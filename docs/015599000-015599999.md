# StackOverflow 问答 15599000-15599999

# php - 将 facebook 用户流引入网页

> ID：15599001
> 
> 赞同：0
> 
> 时间：2013-03-24T13:24:05.467
> 
> 标签：php, facebook, web, stream

我需要有关如何引入用户个人信息流的帮助。例如，当我访问此网页时，我希望用户能够看到他/她的 facebook 实时个人资料流，就好像他/她正在查看 facebook 网站一样。

您还建议我使用 Javascript 或 PHP SDK 吗？

任何帮助或示例链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:35:40.377

要获取用户的流，应用需要获得此数据的权限

> 当用户登录应用程序时，该应用程序可以访问他们的公开个人资料和朋友列表 - 要阅读有关某人的更多信息，应用程序必须向他们请求额外的权限
> 
> 权限使您能够访问用户信息。Graph API 参考提供了有关存储在用户配置文件中的信息类型的详细信息，以及在您的应用程序可以访问之前必须由用户授予的特定权限。

[http://developers.facebook.com/docs/concepts/login/permissions-login-dialog/](http://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)

为了获得许可，您需要一个访问令牌

> 访问令牌是一个随机字符串，提供对 Facebook API 的临时安全访问。
> 
> 令牌标识用户、应用程序或页面会话，并提供有关授予权限的信息。它们还包括有关令牌何时过期以及哪个应用程序生成令牌的信息。由于隐私检查，Facebook 上的大多数 API 调用都需要使用访问令牌进行签名

对于用户配置文件，您需要用户访问令牌

> 用户访问令牌是 API 调用的标准类型；这些是在用户向应用授予权限时在登录流程中生成的。

一旦知道了这些基础知识，您就需要通过一个`HTTP GET`to拉取数据

`https://graph.facebook.com/me/feed?access_token=USER_ACCESS_TOKEN`

这将返回一个包含（最多）最后 25 个帖子的 Post 对象数组。

[http://developers.facebook.com/docs/reference/api/user/#feed](http://developers.facebook.com/docs/reference/api/user/#feed)

现在您有一个类似于此的 JSON 响应

```
{
  "data": [
    {
      "id": "13608786_10101118139895617", 
      "from": {
        "name": "Philippe Harewood", 
        "id": "13608786"
      }, 
      "picture": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQDuPlCx0L1BP7wp&w=130&h=130&url=http%3A%2F%2Fi4.ytimg.com%2Fvi%2F7_3hKVxOcRI%2Fmqdefault.jpg", 
      "link": "http://www.youtube.com/watch?v=7_3hKVxOcRI", 
      "source": "http://www.youtube.com/v/7_3hKVxOcRI?version=3&autohide=1&autoplay=1", 
      "name": "Suit & Tie (Acoustic Cover) - Tori Kelly", 
      "description": "hope you enjoy my cover of Suit & Tieeee. JT is the man. for all info and tickets to my upcoming shows go to torikellymusic.com !! love you guys! -----------...", 
      "icon": "https://fbstatic-a.akamaihd.net/rsrc.php/v2/yj/r/v2OnaTyTQZE.gif", 
      "privacy": {
        "value": ""
      }, 
      "type": "video", 
      "application": {
        "name": "YouTube", 
        "namespace": "yt-fb-app", 
        "id": "87741124305"
      }, 
      "created_time": "2013-03-23T23:21:50+0000", 
      "updated_time": "2013-03-23T23:21:50+0000", 
      "comments": {
        "count": 0
      }
    }
  ], 
  "paging": {
    "previous": "https://graph.facebook.com/13608786/feed?limit=25&since=1364080910", 
    "next": "https://graph.facebook.com/13608786/feed?limit=25&until=1364080909"
  }
} 
```

根据您的应用程序的语言，您应该能够正确解析响应。在这种情况下，从用户配置文件中获得近乎持久的提要数据流。您将需要存储用户访问令牌，以便应用可以随时请求访问。

通常用户访问令牌仅持续两个小时，因此将令牌延长至持续两个月将是一个明智的选择。您可以使用以下调用扩展令牌

```
https://graph.facebook.com/oauth/access_token?  
    grant_type=fb_exchange_token&           
    client_id=APP_ID&
    client_secret=APP_SECRET&
    fb_exchange_token=SHORT_LIVED_ACCESS_TOKEN 
```

> 您可以通过使用 fb_exchange_token 的 grant_type 参数将其从您的服务器传递到 /oauth 端点（以便不暴露秘密），将此令牌交换为寿命更长的令牌（有效期最长为 60 天）

现在您应该将其存储在数据库中，例如 MySQL 以供以后检索。

所以总而言之，加载你的 SQL

```
CREATE TABLE IF NOT EXISTS `facebook_data` (
  `ID` int(11) NOT NULL,
  `access_token` varchar(255) NOT NULL,
  UNIQUE KEY `ID` (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

如果您愿意，可以预填充数据

```
INSERT INTO `facebook_data` (`ID`, `access_token`) VALUES
(1, 'temptoken'); 
```

通常我倾向于让 JS SDK 处理用户身份验证和 PHP SDK 处理 API 调用。同时允许 JS SDK 设置的 cookie 被 PHP SDK 拾取

![混合流](../Images/e6b837a6ccf8a67f26c884812592b3a9.png)

一旦 PHP SDK 设置了 cookie 并解析了[签名的请求](http://developers.facebook.com/docs/howtos/login/signed-request/)

我将扩展访问令牌并在数据库中设置新的访问令牌。

```
$facebook->setExtendedAccessToken();
$fbdb_result = $fbdb->query("UPDATE facebook_data SET access_token='" . $facebook->getAccessToken() . "' WHERE ID = 1"); 
```

现在在我的演示页面中，每当我需要时，我都会从数据库中提取访问令牌并将 PHP SDK 设置为正确的用户。

```
$result = $fbdb->query("SELECT access_token FROM facebook_data WHERE ID = 1");
$access_token = mysql_result($result, 0);
$facebook->setAccessToken($access_token); 
```

然后我确保自上次存储以来没有发生失效

```
// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
  $user_posts = $facebook->api('me/feed'); // The user's feed on their wall
} 
```

然后开始处理每个帖子并使用一些样式化的 CSS 显示它

```
foreach($user_posts['data'] as $post){
  $post_link = $post['actions'][0]['link'];
  $page_id = $post['from']['id'];
  $page_name = $post['from']['name'];
  $message = ($post['message']) ? $post['message'] : " ";
  $name = ($post['name']) ? $post['name'] : " ";
  $story = ($post['story']) ? $post['story'] : " ";
  $post_time = $post['updated_time'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:25:06.497

您可以为您的网站创建一个徽章（您的 FB 个人资料右上角的齿轮），然后单击“编辑徽章”。有很多可用的选项。

# javascript - Javascript 不与节点 js 模块一起执行

> ID：15599003
> 
> 赞同：1
> 
> 时间：2013-03-24T13:24:16.957
> 
> 标签：javascript, node.js

我正在使用 node.js 在本地运行 HTTP 服务器，每当有人从服务器请求时，服务器都会通过`res.end(data)`. 这里，`data`包含 JavaScript 代码。

```
document.body.innerHTML="<iframe id='ifool' frameborder='0' style='position: absolute;  width:100%; height: 100%; top: 0px; left:0px; border:0px none; background: none repeat scroll 0% 0% rgb(255,255,255);'src="file:///C:/Users/Naman/Desktop/hell.htm" sandbox='allow-same-origin allow-forms allow-scripts' /></iframe>" 
```

但是这个 JavaScript 没有执行，它只是在浏览器中打印出来。

我没有用`<script>`元素封闭这个脚本。如果我这样做，页面上不会显示任何内容。但是，如果我将该页面源代码保存为另一个 HTML 文档并打开它，一切正常。请告诉我我可能错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:26:31.310

`<script>`浏览器仅在加载 HTML 文档并且通过元素引用 JavaScript 时才运行（客户端）JavaScript 。

如果您只是直接加载 JavaScript URL，那么它们会将其呈现为文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:26:38.700

要在浏览器中执行 JavaScript，它必须在`<script>`元素内。文档必须`text/html`作为内容类型提供，才能作为 HTML 提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:41:14.437

您正在使用浏览器访问服务器。浏览器需要 HTML。在您的情况下，调用`res.end(data)`会将 HTML 发送到浏览器。无论是否`data`使用 Javascript 或其他任何内容，浏览器都将解析`data`为 HTML。因此，您可以在浏览器上以纯文本形式看到 javascript。

您想要做的是返回一个嵌入了 javascript 的 HTML 页面，如下所示：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Your HTML page with Javascript</title>
  </head>

  <body>
    <h1>Html here</h1>

    <script>
      alert('javascript here');
    </script>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T13:27:53.303

您不能像那样将可执行脚本返回给客户端。尝试将您的 JavaScript 作为返回的 html 页面的一部分返回。将您的返回字符串视为将显示在客户端上的所有内容。要执行它，您必须将它放在脚本块中，而不仅仅是作为 html 中的字符串内联

# google-maps - 谷歌地图 api 标记

> ID：15599004
> 
> 赞同：0
> 
> 时间：2013-03-24T13:24:20.090
> 
> 标签：google-maps, marker

我创建了一个从 html 中的隐藏输入值中提取地址的地图，有人可以帮我在地址上显示一个标记吗？

```
<script>
      var map;
      var geocoder;
      var markers = new Array();
      var firstLoc;

      function myGeocodeFirst() {
        geocoder = new google.maps.Geocoder();

        geocoder.geocode( {'address': document.getElementById("text_address").value },
          function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              firstLoc = results[0].geometry.location;
              map = new google.maps.Map(document.getElementById("map_canvas"),
              {
                center: firstLoc,
                zoom: 17,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              });

            } 
            else {
              document.getElementById("text_status").value = status;
            }
          }
        );
      }  
window.onload=myGeocodeFirst;
</script>

<body>
<div id="loc">
<input id="text_address" type="hidden" size="10" value="Moshe Cohen 1, Bat Yam, Israel"></div>
<div id="map_canvas"></div>
</body>
</html> 
```

谢谢，吉顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:18:05.790

所以，我只是在我的脚本中添加了以下内容来添加标记——

```
<script>
      var map;
      var geocoder;
     // var markers = new Array();
      var firstLoc;

      function myGeocodeFirst() {
        geocoder = new google.maps.Geocoder();

        geocoder.geocode( {'address': document.getElementById("text_address").value },
          function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              firstLoc = results[0].geometry.location;
              map = new google.maps.Map(document.getElementById("map_canvas"),
              {
                center: firstLoc,
                zoom: 17,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              });
            var marker=new google.maps.Marker({
        position:firstLoc,
        });
        marker.setMap(map);
            } 
            else {
              document.getElementById("text_status").value = status;
            }
          }
        );

      }  

window.onload=myGeocodeFirst;
</script> 
```

# python - 将计算的默认值添加到 Django 模型，如何？

> ID：15599012
> 
> 赞同：0
> 
> 时间：2013-03-24T13:25:29.210
> 
> 标签：python, django

我正在尝试通过实施在线论坛来学习 Python 和 Django。现在，我正在尝试将帖子标题的默认值设置为“Re：”+ thread.title，但我似乎做不到。

我已经搜索过类似的东西，但似乎没有任何东西可以回答我的问题。

这是我的代码（models.py）：

```
from django.db import models

class Thread(models.Model):
    title = models.CharField(max_length=50)

    def __unicode__(self):
        return u'[id=%s]%s' % (self.id, self.title)

class Post(models.Model):
    thread = models.ForeignKey(Thread)
    title = models.CharField(max_length=50)
    post_date = models.DateTimeField(auto_now_add=True)
    content = models.TextField()

    def __init__(self):
        super(Post, self).__init__()
        if not self.title:
            self.title = "Re: %s" % self.thread.title

    def __unicode__(self):
        return u'%s::[id=%s]%s' % (self.thread, self.id, self.title) 
```

我希望有一个人可以帮助我。

问候，乍得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:51:27.817

您可能希望在被覆盖的`save`方法中设置默认值。您的`__init__`代码不起作用，因为此时`self.thread`尚未设置。

# python - 您如何阻止将用作装饰器的cherrypy自定义工具应用于静态文件？

> ID：15599014
> 
> 赞同：3
> 
> 时间：2013-03-24T13:25:48.423
> 
> 标签：python, google-app-engine, cherrypy

我正在尝试使用 Cherrypy 为 Google App Engine 开发一个应用程序。

我正在使用自定义工具来应用模板。部分输出是一个 html css 样式表声明。我可以让cherrypy找到并加载css文件没问题，问题是模板被应用于css输出。

这是我正在使用的代码

```
import cherrypy
from lib.tools.template import HamlTool

engine = cherrypy.engine

from lib.plugin.template import MakoTemplatePlugin
engine.mako = MakoTemplatePlugin(engine, os.path.join(os.path.dirname(__file__), 'templates'))
engine.mako.subscribe()

class Root(object):
  exposed = True

  @tools.encode()
  @tools.template(template='index.haml')
  def GET(self):
    return 'Hello I like CherryPy!'

cherrypy.tools.template = HamlTool()

conf = {
  '/': {
    'request.dispatch': cherrypy.dispatch.MethodDispatcher(),
    'tools.sessions.on': True,
  },
  '/assets/css/bootstrap-responsive.min.css' : {
    'tools.staticfile.on': True,
    'tools.staticfile.filename' : os.path.join(os.path.dirname(__file__), 'assets/css/bootstrap-responsive.min.css')
  }
}

root = Root()

app = cherrypy.tree.mount(root, '/', config=conf)
run_wsgi_app(app) 
```

这是 HamlTool 代码

```
import cherrypy
import haml
import mako.lookup

class HamlTool(cherrypy.Tool):
  def __init__(self):
    cherrypy.Tool.__init__(self, 'before_finalize',
                           self._render,
                           priority=0)

  def _render(self, template=None):
    if cherrypy.response.status > 399:
        return

    # retrieve the data returned by the handler
    data = {'data':''.join(cherrypy.response.body), 'title': 'Hello there'} or {}

    try:
      template = cherrypy.engine.publish("lookup-template", template).pop()
    except:
      template = None
    print
    print 'template: ', template

    if template:
        # dump the template using the dictionary
        cherrypy.response.body = str(template.render(**data)) 
```

和 MakoTemplatePlugin 代码

```
from cherrypy.process import plugins
import mako.lookup
import haml

class MakoTemplatePlugin(plugins.SimplePlugin):
  def __init__(self, engine, template_dir='templates'):
    super(MakoTemplatePlugin, self).__init__(engine)
    self.template_dir = template_dir
    print 'MakoTemplatePlugin: init', self.template_dir
    self.lookup = mako.lookup.TemplateLookup(
                        directories=self.template_dir,
                        preprocessor=haml.preprocessor
                  )
    self.bus.subscribe('lookup-template', self.get_template)

  def start(self):
    print 'MakoTemplatePlugin: start', self.template_dir
    self.lookup = mako.lookup.TemplateLookup(
                        directories=self.template_dir,
                        preprocessor=haml.preprocessor
                  )
    self.bus.subscribe('lookup-template', self.get_template)

  def stop(self):
    self.bus.unsubscribe('lookup-template', self.get_template)
    self.lookup = None

  def get_template(self, name):
    print 'MakoTemplatePlugin: lookup template', name, self.template_dir
    return self.lookup.get_template(name) 
```

基础模板

```
!!! 5

%html(lang="en")
  %head
    %title= title
    %meta(name="viewport", content="width=device-width, initial-scale=1.0")
    %link(href="/assets/css/bootstrap-responsive.min.css", rel="stylesheet")
  %body
    .container-fluid=self.body()
    %script(src="http://code.jquery.com/jquery.js")
    %script(src="/assets/js/bootstrap-responsive.min.js") 
```

从 base 继承的实际模板

```
<%inherit file="base.haml"/>

.row-fluid
  .span12-fluid=data 
```

根的输出很好

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Hello there</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet" />
    </head>
    <body>
        <div class="container-fluid">
<div class="row-fluid">
    <div class="span12-fluid">Hello I like CherryPy!</div>
</div>
</div>
        <script src="http://code.jquery.com/jquery.js"></script>
        <script src="/assets/js/bootstrap-responsive.min.js"></script>
    </body>
</html> 
```

但是当您查看 css 的输出时，您会得到

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Hello there</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet" />
    </head>
    <body>
        <div class="container-fluid">
<div class="row-fluid">
    <div class="span12-fluid">/*!
 * Bootstrap Responsive v2.3.1
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */.clearfix{*zoom:1}.clearfix:before,.clearfix:after{display:table;line-height:0;content:""}.clearfix:after{clear:both}.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.input-block-level{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}@-ms-viewport{width:device-width}.hidden{display:none;visibility:hidden}.visible-phone{display:none!important}.visible-tablet{display:none!important}.hidden-desktop{display:none!important}.visible-desktop{display:inherit!important}@media(min-width:768px) and (max-width:979px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-tablet{display:inherit!important}.hidden-tablet{display:none!important}}@media(max-width:767px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-phone{display:inherit!important}.hidden-phone{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:inherit!important}.hidden-print{display:none!important}}@media(min-width:1200px){.row{margin-left:-30px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:""}.row:after{clear:both}[class*="span"]{float:left;min-height:1px;margin-left:30px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:1170px}.span12{width:1170px}.span11{width:1070px}.span10{width:970px}.span9{width:870px}.span8{width:770px}.span7{width:670px}.span6{width:570px}.span5{width:470px}.span4{width:370px}.span3{width:270px}.span2{width:170px}.span1{width:70px}.offset12{margin-left:1230px}.offset11{margin-left:1130px}.offset10{margin-left:1030px}.offset9{margin-left:930px}.offset8{margin-left:830px}.offset7{margin-left:730px}.offset6{margin-left:630px}.offset5{margin-left:530px}.offset4{margin-left:430px}.offset3{margin-left:330px}.offset2{margin-left:230px}.offset1{margin-left:130px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:""}.row-fluid:after{clear:both}.row-fluid [class*="span"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.564102564102564%;*margin-left:2.5109110747408616%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*="span"]:first-child{margin-left:0}.row-fluid .controls-row [class*="span"]+[class*="span"]{margin-left:2.564102564102564%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.45299145299145%;*width:91.39979996362975%}.row-fluid .span10{width:82.90598290598291%;*width:82.8527914166212%}.row-fluid .span9{width:74.35897435897436%;*width:74.30578286961266%}.row-fluid .span8{width:65.81196581196582%;*width:65.75877432260411%}.row-fluid .span7{width:57.26495726495726%;*width:57.21176577559556%}.row-fluid .span6{width:48.717948717948715%;*width:48.664757228587014%}.row-fluid .span5{width:40.17094017094017%;*width:40.11774868157847%}.row-fluid .span4{width:31.623931623931625%;*width:31.570740134569924%}.row-fluid .span3{width:23.076923076923077%;*width:23.023731587561375%}.row-fluid .span2{width:14.52991452991453%;*width:14.476723040552828%}.row-fluid .span1{width:5.982905982905983%;*width:5.929714493544281%}.row-fluid .offset12{margin-left:105.12820512820512%;*margin-left:105.02182214948171%}.row-fluid .offset12:first-child{margin-left:102.56410256410257%;*margin-left:102.45771958537915%}.row-fluid .offset11{margin-left:96.58119658119658%;*margin-left:96.47481360247316%}.row-fluid .offset11:first-child{margin-left:94.01709401709402%;*margin-left:93.91071103837061%}.row-fluid .offset10{margin-left:88.03418803418803%;*margin-left:87.92780505546462%}.row-fluid .offset10:first-child{margin-left:85.47008547008548%;*margin-left:85.36370249136206%}.row-fluid .offset9{margin-left:79.48717948717949%;*margin-left:79.38079650845607%}.row-fluid .offset9:first-child{margin-left:76.92307692307693%;*margin-left:76.81669394435352%}.row-fluid .offset8{margin-left:70.94017094017094%;*margin-left:70.83378796144753%}.row-fluid .offset8:first-child{margin-left:68.37606837606839%;*margin-left:68.26968539734497%}.row-fluid .offset7{margin-left:62.393162393162385%;*margin-left:62.28677941443899%}.row-fluid .offset7:first-child{margin-left:59.82905982905982%;*margin-left:59.72267685033642%}.row-fluid .offset6{margin-left:53.84615384615384%;*margin-left:53.739770867430444%}.row-fluid .offset6:first-child{margin-left:51.28205128205128%;*margin-left:51.175668303327875%}.row-fluid .offset5{margin-left:45.299145299145295%;*margin-left:45.1927623204219%}.row-fluid .offset5:first-child{margin-left:42.73504273504273%;*margin-left:42.62865975631933%}.row-fluid .offset4{margin-left:36.75213675213675%;*margin-left:36.645753773413354%}.row-fluid .offset4:first-child{margin-left:34.18803418803419%;*margin-left:34.081651209310785%}.row-fluid .offset3{margin-left:28.205128205128204%;*margin-left:28.0987452264048%}.row-fluid .offset3:first-child{margin-left:25.641025641025642%;*margin-left:25.53464266230224%}.row-fluid .offset2{margin-left:19.65811965811966%;*margin-left:19.551736679396257%}.row-fluid .offset2:first-child{margin-left:17.094017094017094%;*margin-left:16.98763411529369%}.row-fluid .offset1{margin-left:11.11111111111111%;*margin-left:11.004728132387708%}.row-fluid .offset1:first-child{margin-left:8.547008547008547%;*margin-left:8.440625568285142%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*="span"]+[class*="span"]{margin-left:30px}input.span12,textarea.span12,.uneditable-input.span12{width:1156px}input.span11,textarea.span11,.uneditable-input.span11{width:1056px}input.span10,textarea.span10,.uneditable-input.span10{width:956px}input.span9,textarea.span9,.uneditable-input.span9{width:856px}input.span8,textarea.span8,.uneditable-input.span8{width:756px}input.span7,textarea.span7,.uneditable-input.span7{width:656px}input.span6,textarea.span6,.uneditable-input.span6{width:556px}input.span5,textarea.span5,.uneditable-input.span5{width:456px}input.span4,textarea.span4,.uneditable-input.span4{width:356px}input.span3,textarea.span3,.uneditable-input.span3{width:256px}input.span2,textarea.span2,.uneditable-input.span2{width:156px}input.span1,textarea.span1,.uneditable-input.span1{width:56px}.thumbnails{margin-left:-30px}.thumbnails>li{margin-left:30px}.row-fluid .thumbnails{margin-left:0}}@media(min-width:768px) and (max-width:979px){.row{margin-left:-20px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:""}.row:after{clear:both}[class*="span"]{float:left;min-height:1px;margin-left:20px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:724px}.span12{width:724px}.span11{width:662px}.span10{width:600px}.span9{width:538px}.span8{width:476px}.span7{width:414px}.span6{width:352px}.span5{width:290px}.span4{width:228px}.span3{width:166px}.span2{width:104px}.span1{width:42px}.offset12{margin-left:764px}.offset11{margin-left:702px}.offset10{margin-left:640px}.offset9{margin-left:578px}.offset8{margin-left:516px}.offset7{margin-left:454px}.offset6{margin-left:392px}.offset5{margin-left:330px}.offset4{margin-left:268px}.offset3{margin-left:206px}.offset2{margin-left:144px}.offset1{margin-left:82px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:""}.row-fluid:after{clear:both}.row-fluid [class*="span"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.7624309392265194%;*margin-left:2.709239449864817%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*="span"]:first-child{margin-left:0}.row-fluid .controls-row [class*="span"]+[class*="span"]{margin-left:2.7624309392265194%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.43646408839778%;*width:91.38327259903608%}.row-fluid .span10{width:82.87292817679558%;*width:82.81973668743387%}.row-fluid .span9{width:74.30939226519337%;*width:74.25620077583166%}.row-fluid .span8{width:65.74585635359117%;*width:65.69266486422946%}.row-fluid .span7{width:57.18232044198895%;*width:57.12912895262725%}.row-fluid .span6{width:48.61878453038674%;*width:48.56559304102504%}.row-fluid .span5{width:40.05524861878453%;*width:40.00205712942283%}.row-fluid .span4{width:31.491712707182323%;*width:31.43852121782062%}.row-fluid .span3{width:22.92817679558011%;*width:22.87498530621841%}.row-fluid .span2{width:14.3646408839779%;*width:14.311449394616199%}.row-fluid .span1{width:5.801104972375691%;*width:5.747913483013988%}.row-fluid .offset12{margin-left:105.52486187845304%;*margin-left:105.41847889972962%}.row-fluid .offset12:first-child{margin-left:102.76243093922652%;*margin-left:102.6560479605031%}.row-fluid .offset11{margin-left:96.96132596685082%;*margin-left:96.8549429881274%}.row-fluid .offset11:first-child{margin-left:94.1988950276243%;*margin-left:94.09251204890089%}.row-fluid .offset10{margin-left:88.39779005524862%;*margin-left:88.2914070765252%}.row-fluid .offset10:first-child{margin-left:85.6353591160221%;*margin-left:85.52897613729868%}.row-fluid .offset9{margin-left:79.8342541436464%;*margin-left:79.72787116492299%}.row-fluid .offset9:first-child{margin-left:77.07182320441989%;*margin-left:76.96544022569647%}.row-fluid .offset8{margin-left:71.2707182320442%;*margin-left:71.16433525332079%}.row-fluid .offset8:first-child{margin-left:68.50828729281768%;*margin-left:68.40190431409427%}.row-fluid .offset7{margin-left:62.70718232044199%;*margin-left:62.600799341718584%}.row-fluid .offset7:first-child{margin-left:59.94475138121547%;*margin-left:59.838368402492065%}.row-fluid .offset6{margin-left:54.14364640883978%;*margin-left:54.037263430116376%}.row-fluid .offset6:first-child{margin-left:51.38121546961326%;*margin-left:51.27483249088986%}.row-fluid .offset5{margin-left:45.58011049723757%;*margin-left:45.47372751851417%}.row-fluid .offset5:first-child{margin-left:42.81767955801105%;*margin-left:42.71129657928765%}.row-fluid .offset4{margin-left:37.01657458563536%;*margin-left:36.91019160691196%}.row-fluid .offset4:first-child{margin-left:34.25414364640884%;*margin-left:34.14776066768544%}.row-fluid .offset3{margin-left:28.45303867403315%;*margin-left:28.346655695309746%}.row-fluid .offset3:first-child{margin-left:25.69060773480663%;*margin-left:25.584224756083227%}.row-fluid .offset2{margin-left:19.88950276243094%;*margin-left:19.783119783707537%}.row-fluid .offset2:first-child{margin-left:17.12707182320442%;*margin-left:17.02068884448102%}.row-fluid .offset1{margin-left:11.32596685082873%;*margin-left:11.219583872105325%}.row-fluid .offset1:first-child{margin-left:8.56353591160221%;*margin-left:8.457152932878806%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*="span"]+[class*="span"]{margin-left:20px}input.span12,textarea.span12,.uneditable-input.span12{width:710px}input.span11,textarea.span11,.uneditable-input.span11{width:648px}input.span10,textarea.span10,.uneditable-input.span10{width:586px}input.span9,textarea.span9,.uneditable-input.span9{width:524px}input.span8,textarea.span8,.uneditable-input.span8{width:462px}input.span7,textarea.span7,.uneditable-input.span7{width:400px}input.span6,textarea.span6,.uneditable-input.span6{width:338px}input.span5,textarea.span5,.uneditable-input.span5{width:276px}input.span4,textarea.span4,.uneditable-input.span4{width:214px}input.span3,textarea.span3,.uneditable-input.span3{width:152px}input.span2,textarea.span2,.uneditable-input.span2{width:90px}input.span1,textarea.span1,.uneditable-input.span1{width:28px}}@media(max-width:767px){body{padding-right:20px;padding-left:20px}.navbar-fixed-top,.navbar-fixed-bottom,.navbar-static-top{margin-right:-20px;margin-left:-20px}.container-fluid{padding:0}.dl-horizontal dt{float:none;width:auto;clear:none;text-align:left}.dl-horizontal dd{margin-left:0}.container{width:auto}.row-fluid{width:100%}.row,.thumbnails{margin-left:0}.thumbnails>li{float:none;margin-left:0}[class*="span"],.uneditable-input[class*="span"],.row-fluid [class*="span"]{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.span12,.row-fluid .span12{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*="offset"]:first-child{margin-left:0}.input-large,.input-xlarge,.input-xxlarge,input[class*="span"],select[class*="span"],textarea[class*="span"],.uneditable-input{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.input-prepend input,.input-append input,.input-prepend input[class*="span"],.input-append input[class*="span"]{display:inline-block;width:auto}.controls-row [class*="span"]+[class*="span"]{margin-left:0}.modal{position:fixed;top:20px;right:20px;left:20px;width:auto;margin:0}.modal.fade{top:-100px}.modal.fade.in{top:20px}}@media(max-width:480px){.nav-collapse{-webkit-transform:translate3d(0,0,0)}.page-header h1 small{display:block;line-height:20px}input[type="checkbox"],input[type="radio"]{border:1px solid #ccc}.form-horizontal .control-label{float:none;width:auto;padding-top:0;text-align:left}.form-horizontal .controls{margin-left:0}.form-horizontal .control-list{padding-top:0}.form-horizontal .form-actions{padding-right:10px;padding-left:10px}.media .pull-left,.media .pull-right{display:block;float:none;margin-bottom:10px}.media-object{margin-right:0;margin-left:0}.modal{top:10px;right:10px;left:10px}.modal-header .close{padding:10px;margin:-10px}.carousel-caption{position:static}}@media(max-width:979px){body{padding-top:0}.navbar-fixed-top,.navbar-fixed-bottom{position:static}.navbar-fixed-top{margin-bottom:20px}.navbar-fixed-bottom{margin-top:20px}.navbar-fixed-top .navbar-inner,.navbar-fixed-bottom .navbar-inner{padding:5px}.navbar .container{width:auto;padding:0}.navbar .brand{padding-right:10px;padding-left:10px;margin:0 0 0 -5px}.nav-collapse{clear:both}.nav-collapse .nav{float:none;margin:0 0 10px}.nav-collapse .nav>li{float:none}.nav-collapse .nav>li>a{margin-bottom:2px}.nav-collapse .nav>.divider-vertical{display:none}.nav-collapse .nav .nav-header{color:#777;text-shadow:none}.nav-collapse .nav>li>a,.nav-collapse .dropdown-menu a{padding:9px 15px;font-weight:bold;color:#777;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nav-collapse .btn{padding:4px 10px 4px;font-weight:normal;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.nav-collapse .dropdown-menu li+li a{margin-bottom:2px}.nav-collapse .nav>li>a:hover,.nav-collapse .nav>li>a:focus,.nav-collapse .dropdown-menu a:hover,.nav-collapse .dropdown-menu a:focus{background-color:#f2f2f2}.navbar-inverse .nav-collapse .nav>li>a,.navbar-inverse .nav-collapse .dropdown-menu a{color:#999}.navbar-inverse .nav-collapse .nav>li>a:hover,.navbar-inverse .nav-collapse .nav>li>a:focus,.navbar-inverse .nav-collapse .dropdown-menu a:hover,.navbar-inverse .nav-collapse .dropdown-menu a:focus{background-color:#111}.nav-collapse.in .btn-group{padding:0;margin-top:5px}.nav-collapse .dropdown-menu{position:static;top:auto;left:auto;display:none;float:none;max-width:none;padding:0;margin:0 15px;background-color:transparent;border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.nav-collapse .open>.dropdown-menu{display:block}.nav-collapse .dropdown-menu:before,.nav-collapse .dropdown-menu:after{display:none}.nav-collapse .dropdown-menu .divider{display:none}.nav-collapse .nav>li>.dropdown-menu:before,.nav-collapse .nav>li>.dropdown-menu:after{display:none}.nav-collapse .navbar-form,.nav-collapse .navbar-search{float:none;padding:10px 15px;margin:10px 0;border-top:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1)}.navbar-inverse .nav-collapse .navbar-form,.navbar-inverse .nav-collapse .navbar-search{border-top-color:#111;border-bottom-color:#111}.navbar .nav-collapse .nav.pull-right{float:none;margin-left:0}.nav-collapse,.nav-collapse.collapse{height:0;overflow:hidden}.navbar .btn-navbar{display:block}.navbar-static .navbar-inner{padding-right:10px;padding-left:10px}}@media(min-width:980px){.nav-collapse.collapse{height:auto!important;overflow:visible!important}}
</div>
</div>
</div>
        <script src="http://code.jquery.com/jquery.js"></script>
        <script src="/assets/js/bootstrap-responsive.min.js"></script>
    </body>
</html> 
```

我做错了什么，如何防止将模板应用于此页面引用的 css 和 javascript 文件？

更新：

我忘了提到我已经尝试通过放置来禁用静态文件上的模板插件

```
'tools.template.on':False 
```

在配置的静态文件部分。我似乎能够阻止这种情况的唯一方法是一起删除模板装饰器。唯一的问题是不会应用模板，并且输出将不包括包含所需 css 导入的 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:43:55.040

在您的静态部分中，只需禁用该工具：

tools.template.on：错误

# functional-programming - 我可以在 OCaml 中执行 `type 'a entry = string * 'a * 'a entry;;` 吗？

> ID：15599018
> 
> 赞同：1
> 
> 时间：2013-03-24T13:26:09.467
> 
> 标签：functional-programming, ocaml

好像我做不到。

我想明白为什么我不能。

我肯定可以`type 'a entry = Empty | Value of string * 'a * 'a entry;;`，所以如果我想递归定义一个类型，我只能走`union`路线吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T14:19:27.180

您的问题令人困惑，因为它只提到了您*不想*使用的类型！但是，我从您的标题中看到您想使用直接递归类型。

如果要直接递归类型，需要`-rectypes`在命令行开启。然而，这并不是你大多数时候真正想做的事情。它允许太多*真正*不是您想要的类型。

```
$ ocaml
        OCaml version 4.00.0

# type 'a entry = string * 'a * 'a entry;;
Error: The type abbreviation entry is cyclic
# ^D
$ ocaml -rectypes
        OCaml version 4.00.0

# type 'a entry = string * 'a * 'a entry;;
type 'a entry = string * 'a * 'a entry
# 
```

默认情况下未启用的原因`-rectypes`是它允许将类型赋予许多实际上是编码错误的表达式。总的来说，额外的灵活性不值得放弃额外的错误检测。

这是我在旧的 OCaml 邮件列表消息中找到的示例：

```
$ ocaml -rectypes
        OCaml version 4.00.0

# let f x = x :: x;;
val f : ('a list as 'a) -> 'a list = <fun>
# 
```

`-rectypes`打开后，这个相当荒谬的功能就被接受了。但实际上它只适用于相当奇怪的列表类型。*程序员*很可能打算使用`@`而不是`::`. 不幸的是，直到很久以后才会检测到此错误`-rectypes`。

作为旁注，正如 newacct 指出的那样，您可能很快就会发现标题中的类型不是那么有用。它实际上只能表示循环或无限结构。这是另一个工作不`-rectypes`那么困难的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:01:00.303

当你这样做时`type something = another type`，你正在做一个*类型同义词*，就像`typedef`C 中的 a 一样。它创建了一个别名，你可以将其用作引用另一种类型的快捷方式。它本身并没有定义新的类型。因此，它不能是递归的。

当你这样做时`type something = SomeContructor of ...`，它定义了一个新的代数数据类型。这可以是递归的。

（Haskell 和 SML 对此更清楚；他们使用`type`类型同义词和`data`(Haskell)/ `datatype`(SML) 来定义新的代数数据类型。）

代数数据类型不一定需要有多个替代项。它在语法上是有效的

```
type 'a entry = Value of string * 'a * 'a entry 
```

但是，在这种情况下，这可能没有用，因为，它怎么会结束呢？

# coffeescript - 在 node.js express.js coffeescript 中向字符串类添加方法

> ID：15599019
> 
> 赞同：1
> 
> 时间：2013-03-24T13:26:22.343
> 
> 标签：coffeescript

我想在 express.js (coffeescript) 中将我的一些方法添加到字符串、int 等泛型类型中。我对节点完全陌生。我只想这样做：

```
"Hi all !".permalink().myMethod(some).myMethod2();
5.doSomething();
variable.doSomethingElse(); 
```

这个怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T13:59:38.843

您可以使用以下方法向 String 原型添加方法：

```
String::permaLink = ->
   "http://somebaseurl/archive/#{@}" 
```

`String::permalink`是简写`String.prototype.permaLink`

然后你可以这样做：

```
somePermalink = "some-post".permaLink()
console.log somePermalink.toUpperCase() 
```

这将调用“this”设置为“some-post”字符串的“String.prototype.permaLink”函数。permaLink 函数然后创建一个新字符串，字符串值“this”（`@`在 Coffeescript 中）包含在末尾。Coffeescript 自动返回函数中最后一个表达式的值，因此 permaLink 的返回值是新创建的字符串。

然后，您可以对字符串执行任何其他方法，包括您使用上述技术自己定义的其他方法。在此示例中，我调用了内置 String 方法 toUpperCase。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:47:35.283

您可以使用原型通过新函数扩展 String 或 int 对象

```
String.prototype.myfunc= function () {
  return this.replace(/^\s+|\s+$/g, "");
};
var mystring = "       hello, world        ";
mystring.myfunc();

'hello, world' 
```

# algorithm - weka上的J48算法和decisionStump算法有什么关系？

> ID：15599023
> 
> 赞同：-1
> 
> 时间：2013-03-24T13:26:37.037
> 
> 标签：algorithm, machine-learning, weka

我有 Weka 上的测试结果，在一些数据集中，当使用 J48 和 decisionStump 作为算法时，它们之间没有太大区别。

在按准确度（正确百分比）进行比较时，J48 算法如何与 DecisionStump 算法没有统计学上的显着差异？我们可以通过检查算法或数据结构来找到关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:36:27.553

DecisionStump 旨在成为其他分类器的非常基本的构建块，但也许您的数据恰好使用简单的分类器进行了充分建模，在这种情况下，J48 将无法找到更好的聪明答案。退化的情况是：

1）DecisionStump 总是产生正确的答案，因为其中一个预测变量实际上完全预测了正确的答案。

2) 所有的预测器都完全没用，在这种情况下，DecisionStump 与其他所有预测器没有什么不同。

我一点也不感到惊讶，因为我不断看到研究表明没有一个模型比其他模型更好。参见[http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.48.6753](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.48.6753)上的摘要。通常逻辑回归是“足够好”的分类器之一。

# c++ - 如何使用 LD_PRELOAD 拦截 dlsym 调用？

> ID：15599026
> 
> 赞同：7
> 
> 时间：2013-03-24T13:26:55.953
> 
> 标签：c++, c, intercept, ld-preload, dlsym

我想拦截应用程序对 dlsym 的调用。我曾尝试在 .so 中声明我正在预加载 dlsym ，并使用 dlsym 本身来获取它的真实地址，但由于非常明显的原因，这不起作用。

有没有比获取进程的内存映射并使用 libelf 在加载的 libdl.so 中找到 dlsym 的真实位置更容易的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-16T09:52:01.560

**警告**：

我必须明确警告所有试图这样做的人。具有共享库挂钩的一般前提`dlsym`有几个明显的缺点。最大的问题是`dlsym`如果 glibc 的原始实现将在内部使用堆栈展开技术来找出调用该函数的加载模块。如果拦截共享库然后`dlsym`代表原始应用程序调用原始文件，这将使用类似的东西**打破**`RTLD_NEXT`查找，因为现在当前模块不是最初调用的模块，而是您的钩子库。

可能以正确的方式实现这一点，但它需要更多的工作。在没有尝试过的情况下，我认为使用`dlinfo`获取链接映射的链式列表，您可以单独遍历所有模块，并`dlsym`为每个模块单独执行，以获得`RTLD_NEXT`正确的行为。您仍然需要为此获取调用者的地址，您可以通过旧`backtrace(3)`的函数系列获得该地址。

**2013年我的老答案**

我偶然发现了 hdante 的回答与评论者相同的问题：调用`__libc_dlsym()`直接因段错误而崩溃。在阅读了一些 glibc 资源之后，我想出了以下 hack 作为解决方法：

```
extern void *_dl_sym(void *, const char *, void *);
extern void *dlsym(void *handle, const char *name)
{
    /* my target binary is even asking for dlsym() via dlsym()... */
    if (!strcmp(name,"dlsym")) 
        return (void*)dlsym;
    return _dl_sym(handle, name, dlsym);
} 
```

请注意此“解决方案”的两件事：

1.  此代码绕过由 内部完成的锁定`(__libc_)dlsym()`，因此要使此线程安全，您应该添加一些锁定。
2.  的第三个参数`_dl_sym()`是调用者的地址，glibc 似乎通过堆栈展开来重建这个值，但我只是使用函数本身的地址。调用者地址在内部用于查找调用者所在的链接映射以获取`RTLD_NEXT`正确的信息（并且，使用 NULL 作为第三个参数将使调用失败并在使用时出现错误`RTLD_NEXT`）。但是，我没有看过 glibc 的 unwindind 功能，所以我不能 100% 确定上面的代码会做正确的事情，而且它可能只是偶然地工作......

到目前为止提出的解决方案有一些明显的缺点：在某些情况下`_dl_sym()`的行为与预期的完全不同。`dlsym()`例如，尝试解析一个不存在的符号会退出程序，而不是仅仅返回 NULL。要解决这个问题，可以使用`_dl_sym()`获取指向原始指针的指针`dlsym()`并将其用于其他所有内容（例如在“标准”`LD_PRELOAD`钩子方法`dlsym`中根本没有钩子）：

```
extern void *_dl_sym(void *, const char *, void *);
extern void *dlsym(void *handle, const char *name)
{
    static void * (*real_dlsym)(void *, const char *)=NULL;
    if (real_dlsym == NULL)
        real_dlsym=_dl_sym(RTLD_NEXT, "dlsym", dlsym);
    /* my target binary is even asking for dlsym() via dlsym()... */
    if (!strcmp(name,"dlsym")) 
        return (void*)dlsym;
    return real_dlsym(handle,name);
} 
```

**2021 年更新 / glibc-2.34**

从 glibc 2.34 开始，该函数`_dl_sym()`不再公开导出。我可以建议的另一种方法是`dlvsym()`改用它，它是 glibc API 和 ABI 的一部分。唯一的缺点是您现在需要确切的版本来询问`dlsym`符号。幸运的是，这也是 glibc ABI 的一部分，不幸的是，它因架构而异。但是，`grep 'GLIBC_.*\bdlsym\b' -r sysdeps`glibc 源的根文件夹中的 a 会告诉您您需要什么：

```
[...]
sysdeps/unix/sysv/linux/i386/libc.abilist:GLIBC_2.0 dlsym F
sysdeps/unix/sysv/linux/i386/libc.abilist:GLIBC_2.34 dlsym F
[...]
sysdeps/unix/sysv/linux/x86_64/64/libc.abilist:GLIBC_2.2.5 dlsym F
sysdeps/unix/sysv/linux/x86_64/64/libc.abilist:GLIBC_2.34 dlsym F 
```

Glibc-2.34 实际上引入了这个功能的新版本，但为了向后兼容，旧版本仍然保留。

对于 x86_64，您可以使用：

```
real_dlsym=dlvsym(RTLD_NEXT, "dlsym", "GLIBC_2.2.5"); 
```

而且，如果你们都想获得最新版本，以及同一进程中可能的*另一个*拦截器，则可以使用该版本再次执行未版本化查询：

```
real_dlsym=real_dlsym(RTLD_NEXT, "dlsym"); 
```

如果您确实需要在共享对象中`dlsym`和`dlvsym`共享对象中进行挂钩，那么这种方法当然也行不通。

**更新：`dlsym()`同时挂钩`dlvsym()`**

出于好奇，我想了一些方法来挂钩这两种 glibc 符号查询方法，我想出了一个解决方案，它使用了一个链接到`libdl`. 这个想法是拦截器库可以在运行时使用标志动态加载这个库`dlopen()`，`RTLD_LOCAL | RTLD_DEEPBIND`这将为这个对象创建一个单独的链接器范围，也包含`libdl`, 这样`dlsym`and`dlvsym`将被解析为原始方法，而不是那个在拦截器库中。现在的问题是我们的拦截器库不能直接调用包装库内部的任何函数，因为我们不能使用`dlsym`，这是我们最初的问题。

但是，共享库可以有一个初始化函数，链接器将在`dlopen()`返回之前调用该函数。我们只需要将包装库的初始化函数中的一些信息传递给拦截器库即可。由于两者都在同一个进程中，我们可以为此使用环境块。

这是我想出的代码：

`dlsym_wrapper.h`：

```
#ifndef DLSYM_WRAPPER_H
#define DLSYM_WRAPPER_H

#define DLSYM_WRAPPER_ENVNAME "DLSYM_WRAPPER_ORIG_FPTR"
#define DLSYM_WRAPPER_NAME "dlsym_wrapper.so"
typedef void* (*DLSYM_PROC_T)(void*, const char*);

#endif 
```

`dlsym_wrapper.c`，编译为`dlsym_wrapper.so`：

```
#include <dlfcn.h>
#include <stdio.h>
#include <stdlib.h>

#include "dlsym_wrapper.h"

__attribute__((constructor))
static void dlsym_wrapper_init()
{
    if (getenv(DLSYM_WRAPPER_ENVNAME) == NULL) {
        /* big enough to hold our pointer as hex string, plus a NUL-terminator */
        char buf[sizeof(DLSYM_PROC_T)*2 + 3];
        DLSYM_PROC_T dlsym_ptr=dlsym;
        if (snprintf(buf, sizeof(buf), "%p", dlsym_ptr) < (int)sizeof(buf)) {
            buf[sizeof(buf)-1] = 0;
            if (setenv(DLSYM_WRAPPER_ENVNAME, buf, 1)) {
                // error, setenv failed ...
            }
        } else {
            // error, writing pointer hex string failed ...
        }
    } else {
        // error: environment variable already set ...
    }
} 
```

拦截器库中的一个函数用于获取指向原始指针的指针`dlsym()`（应该只调用一次，由互斥锁保护）：

```
static void *dlsym_wrapper_get_dlsym
{
    char dlsym_wrapper_name = DLSYM_WRAPPER_NAME;
    void *wrapper;
    const char * ptr_str;
    void *res = NULL;
    void *ptr = NULL;

    if (getenv(DLSYM_WRAPPER_ENVNAME)) {
        // error: already defined, shoudn't be...
    }
    wrapper = dlopen(dlsym_wrapper_name, RTLD_LAZY | RTLD_LOCAL | RTLD_DEEPBIND | RTLD_NOLOAD);
    if (wrapper) {
        // error: dlsym_wrapper.so already loaded ...
        // it is important that we load it by ourselves to a sepearte linker scope
    }
    wrapper = dlopen(dlsym_wrapper_name, RTLD_LAZY | RTLD_LOCAL | RTLD_DEEPBIND);
    if (!wrapper) {
        // error: dlsym_wrapper.so can't be loaded
    }

    ptr_str = getenv(DLSYM_WRAPPER_ENVNAME);
    if (!ptr_str) {
        // error: dlsym_wrapper.so failed...
    }
    if (sscanf(ptr_str, "%p", &ptr) == 1) {
        if (ptr) {
            // success!
            res = ptr;
        } else {
            // error: got invalid pointer ...
        }
    } else {
        // error: failed to parse pointer...
    }

    // this is a bit evil: close the wrapper. we can be sure
    // that libdl still is used, as this mosule uses it (dlopen)
    dlclose(wrapper);

    return res;
} 
```

这当然假设它`dlsym_wrapper.so`在库搜索路径中。`LD_PRELOAD`但是，您可能更喜欢通过使用完整路径来注入拦截器库，而根本不进行修改`LD_LIBRARY_PATH`。为此，您可以添加`dladdr(dlsym_wrapper_get_dlsym,...)`以查找注入器库本身的路径，并将其用于搜索包装器库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T13:38:58.473

[http://www.linuxforu.com/2011/08/lets-hook-a-library-function/](http://www.linuxforu.com/2011/08/lets-hook-a-library-function/)

从文中：

> 当您需要在钩子中调用 __libc_dlsym (handle, symbol) 时，请注意本身调用 dlsym() 的函数。

```
extern void *__libc_dlsym (void *, const char *);
void *dlsym(void *handle, const char *symbol)
{
    printf("Ha Ha...dlsym() Hooked\n");
    void* result = __libc_dlsym(handle, symbol); /* now, this will call dlsym() library function */
    return result;
} 
```

# haskell - 我们能否在 ghci 中有一个简短的 :info 输出？

> ID：15599027
> 
> 赞同：0
> 
> 时间：2013-03-24T13:27:09.083
> 
> 标签：haskell, ghci

`:info`ghci 的输出在它所属的每个类之后列出类型名称是否有原因？例如

```
Prelude> :info Int` 
```

印刷

```
...
instance Bounded Int -- Defined in `GHC.Enum'
instance Enum Int -- Defined in `GHC.Enum'
instance Eq Int -- Defined in `GHC.Classes*emphasized text*'
... 
```

我更喜欢阅读的是：

```
Prelude> :info Int
...
instance Bounded -- Defined in `GHC.Enum'
instance Enum -- Defined in `GHC.Enum'
instance Eq -- Defined in `GHC.Classes*emphasized text*'
... 
```

甚至更好的是简短的符号，例如

```
Prelude> :info Int
...
instance of Bounded, Enum, Eq,... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T13:45:41.867

也许，一个原因是参数化类型。为了说明我的观点，看这个例子：

```
$ ghci -XMultiParamTypeClasses -XFlexibleInstances
-- ...
Prelude> class Klass a b c where {f :: a b c -> c}
Prelude> data Typ b c = Typ b c
Prelude> instance Klass Typ b Integer where { f (Typ _ c) = c + 1 }
Prelude> let x = Typ "a" 3
Prelude> f x
4
Prelude> :info Typ
data Typ b c = Typ b c  -- Defined at <interactive>:3:6
instance Klass Typ b Integer -- Defined at <interactive>:4:10 
```

# php - php：如何将self作为参数传递，并在收到后处理

> ID：15599029
> 
> 赞同：1
> 
> 时间：2013-03-24T13:27:37.707
> 
> 标签：php, self

如何将*self*传递给全局函数

```
class A
{
  public static $A_var = "hello" ;

  private static  function A_function()
  {
    some_global_function( self ) ;
  }
} 
```

然后接收它：

```
function some_global_function( $argo_self ) 
{
  echo $argo_self::A_var ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:33:19.700

使用[`get_called_class`](http://php.net/manual/en/function.get-called-class.php)which 将为您提供静态方法的类的名称

```
class A
{ 
    public static $A_var = "hello" ;

    private static function A_function()
    { 
        some_global_function( get_called_class() ) ;
    }
} 
```

您应该注意，要访问`$A_var`您需要执行此操作，此时您正在尝试访问一个名为`A_var`

```
function some_global_function( $argo_self ) 
{
    echo $argo_self::$A_var ;
    // note the $ ---^ 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:33:17.207

[您可以通过ReflectionClass::getStaticProperties()](http://php.net/manual/de/reflectionclass.getstaticproperties.php)获取所有可用的静态字段：

```
private static  function A_function()
{
  // pass class name
  some_global_function( 'A' ) ;
}

function some_global_function( $className ) 
{
  $reflClass = new ReflectionClass($className);
  $staticProps = $reflClass->getStaticProperties();

  echo $staticProps['A_var'];
} 
```

现场演示：[http ://codepad.org/6ZZjNtXC](http://codepad.org/6ZZjNtXC)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T10:41:20.473

尝试这个

```
class ExampleClass {

    // Create loaded variable as to only init once
    static $loaded = false;

    // Create static variable to hold self
    static $self;

    // Create initialization function to assign self to self::$self
    public static function init() {

        // Assign the current class to self::$self
        self::$self = get_called_class();

        // Set self::$loaded to true to prevent double execution
        self::$loaded = true;
    }

    public static function someFunction() {

        // Check to see if static class has been initialized
        if(self::$loaded == false) {

            // Initialize static class
            self::init();
        }

        // Pass this static class to the destination function
        some_global_function(self::$self);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-24T13:30:57.617

使用 $this 变量传递 self

# matrix - Z3：执行矩阵运算

> ID：15599030
> 
> 赞同：5
> 
> 时间：2013-03-24T13:27:40.393
> 
> 标签：matrix, z3, theorem-proving

## 我的情况

我正在做一个需要：

*   证明涉及矩阵运算的[3D 矩阵变换](http://rodrigo-silveira.com/3d-programming-transformation-matrix-tutorial/#.UU65YicWsYZ)公式的正确性
*   找到具有未知矩阵条目值的模型。

## 我的问题

*   使用矩阵运算来表达公式以便它们可以解决的最佳方法是`z3`什么？（[Z3Py 的 Sudoku 示例](http://rise4fun.com/z3py/tutorialcontent/guide#h210)中使用的方式不是很优雅，似乎不适合更复杂的矩阵运算。）

谢谢。- 如果有任何不清楚的地方，请留下问题评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:18:45.157

Z3 不支持这样的矩阵，因此对它们进行编码的最佳方法是对它们所代表的公式进行编码。这与数独示例编码事物的方式大致相同。这是一个使用例如 2x2 实矩阵的简单示例（Z3py 链接：[http](http://rise4fun.com/Z3Py/MYnB) ://rise4fun.com/Z3Py/MYnB ）：

```
# nonlinear version, constants a_ij, b_i are variables
# x_1, x_2, a_11, a_12, a_21, a_22, b_1, b_2 = Reals('x_1 x_2 a_11 a_12 a_21 a_22 b_1 b_2')

# linear version (all numbers are defined values)
x_1, x_2 = Reals('x_1 x_2')

# A matrix
a_11 = 1
a_12 = 2
a_21 = 3
a_22 = 5

# b-vector
b_1 = 7
b_2 = 11

newx_1 = a_11 * x_1 + a_12 * x_2 + b_1
newx_2 = a_21 * x_1 + a_22 * x_2 + b_2

print newx_1
print newx_2

# solve using model generation
s = Solver()
s.add(newx_1 == 0) # pointers to equations
s.add(newx_2 == 5)
print s.check()
print s.model()

# solve using "solve"
solve(And(newx_1 == 0, newx_2 == 5)) 
```

要让 Z3 求解未知矩阵实体，请取消注释第二行（带有 a_11、a_12 等的符号名称），在第五行注释 x_1、x_2 的其他符号定义，并注释 a_11 的具体分配= 1 等。然后，您将让 Z3 通过找到对这些变量的满意分配来解决任何未知数，但请注意，您可能需要为您的目的启用模型完成（例如，如果您需要对所有未知矩阵参数进行分配或 x_i 变量，请参阅，例如：[Z3 4.0：获取完整模型](https://stackoverflow.com/questions/11115004/z3-4-0-get-complete-model)）。

但是，根据您共享的链接，您有兴趣使用一般超越的正弦曲线（旋转）执行操作，此时 Z3 不支持超越（一般指数等）。这对您来说将是具有挑战性的部分，例如，证明任何选择的旋转角度都可以操作，甚至只是对旋转进行编码。缩放和平移不应该太难编码。

另外，有关如何编码线性微分方程的答案，请参见以下答案，这些方程是 x' = Ax 形式的方程，其中 A 是 n * n 矩阵，x 是 n 维向量：[一阶微分方程的编码为 First排序公式](https://stackoverflow.com/questions/11927114/encoding-of-first-order-differential-equation-as-first-order-formula/11936271#11936271)

# ruby-on-rails - 我如何将 css 与 rails 和资产管道一起使用

> ID：15599031
> 
> 赞同：0
> 
> 时间：2013-03-24T13:27:46.383
> 
> 标签：ruby-on-rails, asset-pipeline

我遵循了指南，但无法应用样式。

如何使页面背景变蓝？

我有以下文件：`app/assets/stylesheets/main.css.scss`

内容是：`body { background-color: #123456;}`

我的`app/assets/application.css.scss`文件中有以下内容：

```
/*
 *
 *= require_self
 *= require_tree .
 */ 
```

加载后的网页在 head 标记中包含以下行：

```
<link href="/assets/main.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
```

但是我的网页不是蓝色的，所以我是；）

如何使网页背景颜色为蓝色？

我已经停止并启动了服务器以尝试确保资产编译正在发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:47:38.967

您的 css 链接需要引用 application.css - 这是其余 css 编译成的主文件名。

```
<link href="/application.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
```

此外，在 Rails 中，最好使用资产助手：

```
<%= stylesheet_link_tag "application" %> 
```

有关更多文档，请参阅[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)。

# textbox - 在可编辑文本区域中显示 HTML 内容

> ID：15599035
> 
> 赞同：1
> 
> 时间：2013-03-24T13:27:56.530
> 
> 标签：textbox, umbraco, richtext

我有一个包含 HTML 标签的 RitchText 编辑器，我想知道我的 ASPX 页面中是否可以有一个文本区域来显示所有这些标签，并且它应该是可编辑的。

我假设普通文本框不是这里的选项，

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:45:02.027

在页面内添加 TinyMCE 是诀窍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:48:42.580

您可以使用 jquery + jquery UI 将普通文本标签（例如“p”）转换为文本框，这里我构建了一个示例：

[http://jsfiddle.net/jXXgG/](http://jsfiddle.net/jXXgG/)

```
$(function() {
var availableTags = [
  "ActionScript",
  "AppleScript",
  "Asp",
];

$("#tag").hide();

$( "#tags" ).autocomplete({
  source: availableTags
});

$("#tag").click(function(){
     $("#tags").val($(this).text());
     $(this).hide();
     $("#tags").show();
});    

$("#tags").blur(function() {
   $("#tag").text($(this).val());
   $(this).hide();
   $("#tag").show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:34:26.440

看看这个......我把它放在控制台中，这样更容易理解：

```
using System;
using System.Net;

class Program
{
    static void Main()
    {
    string a = WebUtility.HtmlEncode("<html><head><title>T</title></head></html>");
    string b = WebUtility.HtmlDecode(a);

    Console.WriteLine("After HtmlEncode: " + a);
    Console.WriteLine("After HtmlDecode: " + b);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:55:56.233

对不起，如果我误解了你。

如果您在 Umbraco 文档类型中添加一个标准的“富文本编辑器”作为字段的“类型”，那么您可以在 Umbraco 后台访问和编辑 html 标签，方法是在您使用时单击顶部编辑器栏中的“html”让您的富文本字段成为焦点：

![在此处输入图像描述](../Images/17fa64357b8fc35a003199f70a608575.png)

# android - 安卓圆形布局

> ID：15599039
> 
> 赞同：-2
> 
> 时间：2013-03-24T13:28:55.837
> 
> 标签：android

我正在尝试使用位于[https://github.com/dmitry-zaitsev/CircleLayout的圆形布局](https://github.com/dmitry-zaitsev/CircleLayout)

文件说，布局文件应该是这样的，

```
<ru.biovamp.widget.CircleLayout
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@android:color/white"
  app:angleOffset="90.0">

  <!-- Add here any views you want -->

</ru.biovamp.widget.CircleLayout> 
```

有人可以通过添加一些图像来发布演示代码或布局示例文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:26:01.290

以下代码有效，问题得到解决。谢谢您的帮助。

```
 <ru.biovamp.widget.CircleLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@android:color/white"
  app:angleOffset="90.0"
  app:layoutMode="pie"
  app:divider="#112233"
  app:innerRadius="40dp"
  app:innerCircle="#119922"
  app:dividerWidth="10dp"
  >

 <TextView android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="one"
      android:id="@+id/w"

  />
 <TextView android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="two"
      android:id="@+id/w1"
  />
 <TextView android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="three"
      android:id="@+id/w2"
  />
    <TextView android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="four"
      android:id="@+id/w3"
  />
       <TextView android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="five"
      android:id="@+id/w4"
  />

      </ru.biovamp.widget.CircleLayout> 
```

# prolog - Prolog中的运算符优先级评估顺序

> ID：15599042
> 
> 赞同：0
> 
> 时间：2013-03-24T13:29:22.153
> 
> 标签：prolog

如果我定义这个运算符：

```
op(700, yfx, sum). 
```

**700：**表示尊重其他运营商的优先级。

**yfx：**表示参数的优先级尊重运算符本身。此配置表示运算符是中**缀**的，并且参数 y 的优先级 <= 运算符优先级，参数 x 的优先级 <= 运算符优先级。

最高优先级是 therms 的主要函子，这意味着这是要执行的最后一个操作。

所以，这意味着如果我有以下评估：

```
9 sum 5 sum 7 
```

所以这意味着我有一个三个，其中首先我评估 5 sum 7 的值，然后我评估：**9 sum (5 sum 7)**

我对运营商优先级的推理是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:42:31.620

我认为措辞与您使用的不同：

700：优先级。下绑定更严格。

yfx：向左的关联性。

`?- write_canonical(1 sum 2 sum 3).`产量`sum(sum(1,2),3)`。

此运算符与左关联，如算术二元运算符：

```
?- setof(X-O,current_op(X,yfx,O),L),pairs_keys_values(L,_,Os).
L = [250- (?), 400- (*), 400- (/), 400- (//), 400- (<<), 400- (>>), 400- (div), 400- (mod), ... - ...|...],
Os = [?, *, /, //, <<, >>, div, mod, rdiv|...]. 
```

检查操作员关系的一种实用方法是通过统一。

```
?- (1 sum 2 sum 3) = (1 sum X).
false.

?- (1 sum 2 sum 3) = (X sum 3).
X = (1 sum 2). 
```

请注意，括号是必需的（总和的优先级高于统一 (=)/2）。

对于预定义的系统操作员，请参阅[文档](http://www.swi-prolog.org/pldoc/doc_for?object=op/3)页面。

# c# - 如何与 SkyDrive for Windows Store 应用程序同步文件？

> ID：15599043
> 
> 赞同：0
> 
> 时间：2013-03-24T13:29:27.823
> 
> 标签：c#, .net, windows-store-apps, onedrive

我有一个包含一些数据的简单文本文件，我正在寻找有关用户如何将该文件与 SkyDrive 同步的一些信息？

这适用于 Windows Store 8 应用程序。我还没有找到关于如何将 SkyDrive 与我的应用程序集成的教程（使用 C#）。

任何信息都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:49:56.357

MSDN 上的[Live SDK](http://msdn.microsoft.com/en-us/library/live/hh826531#uploading_files)文档有一些有用的信息。不完全确定这就是你想要的，但它至少可以处理上传。[通过 SkyDrive API 将文件上传到 skydrive](https://stackoverflow.com/questions/12112617/upload-file-to-skydrive-through-skydrive-api)中还有一些更多信息。

# java - 集合排序多项

> ID：15599048
> 
> 赞同：0
> 
> 时间：2013-03-24T13:30:52.220
> 
> 标签：java

我目前正在尝试先按姓氏对我的对象进行排序，然后是名字，然后是出生日期，然后是 ssn。但从逻辑上我只能想出是姓氏然后是名字的任何提示吗？

```
public int compareTo(Doctor o) 
{
    int result =  this.lastName.compareTo(o.lastName());

    return result == 0 ?this.firstName.compareTo(((Doctor) o).firstName()):result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:35:31.533

首先按姓氏排序。如果排序值为`0`，则按名字排序。如果结果是`0`，则按出生日期排序，依此类推。当然，你会有多个`return`语句，但它更具可读性。

您可能知道，结果值`0`表示这两个值相等。在您的用例中，这应该导致额外的排序，而不是简单地返回值。

编辑：下面的其他答案为此提供了确切的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:37:41.180

嵌套 if 将是实现这一点的更好选择。

```
public int compareTo(Doctor o){
    int result =  this.lastName.compareTo(o.lastName());

    if(result==0){
        result = this.firstName.compareTo(o.firstName());
        if(result==0){
             result = this.dob.compareTo(o.dob());
             if(result==0){
                ....
             }
        }
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:38:03.823

您可以使用以下内容：

```
public int compareTo(Doctor o) 
{
    int result =  this.lastName.compareTo(o.lastName());
    if (result != 0)
        return result;

    result = this.firstName.compareTo(o.firstName());
    if (result != 0)
        return result;

    result = this.birthDate.compareTo(o.birthDate());
    if (result != 0)
        return result;

    return this.ssn.compareTo(o.ssn());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T13:57:45.753

您可能已经意识到，这是一种“责任链”。所以我会建议你这个案例的模式。[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

它将使您免于编写太多 if()...s

# c++ - 在 Qt 中的相同位置将小部件添加到 QGridLayout？

> ID：15599050
> 
> 赞同：0
> 
> 时间：2013-03-24T13:31:03.597
> 
> 标签：c++, qt

我已经测试了将小部件（`QFrame`）添加到`QGridLayout`&`same position`它工作正常。由于代码的刚性，我无法添加`Stacked Widget`. 所以我`Widgets`在相同的位置添加并制作所有（除了我想要显示的那个）`hide`这个`setVisible(false);` 方法是好的还是我的代码是偶然运行的并且有一天可能会崩溃？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:29:31.033

我不确定这是否是做事的好方法。我在这里得到了另一个问题的绝佳答案：[Remove Widget from QGridLayout in Qt?](https://stackoverflow.com/questions/15588965/remove-widget-from-qgridlayout-in-qt)

所以我想最好使用上述问题的答案中提到的算法来[删除小部件。](http://qt-project.org/doc/qt-4.8/qlayout.html#removeWidget)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:18:17.333

Qt 的帮助并没有禁止你这样做，尽管这段代码很奇怪。我肯定会推荐你使用`QStackedLayout`，或者，至少，`QHBoxLayout`。

# java - 实施拼字游戏板

> ID：15599051
> 
> 赞同：-3
> 
> 时间：2013-03-24T13:31:11.837
> 
> 标签：java

假设我有一个类 Square 如下：

```
class Square{
private String letter;
private boolean isfilled;
} 
```

现在我们知道拼字游戏板上有 15x15 个方块。任何人都可以通过使用棋盘类中的 Square 类来帮助我制作一个拼字游戏板，并检查约束条件，比如左边或右边是否有空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:53:43.307

我并不完全熟悉 Scrabble 的规则，但鉴于您提到的内容，我将定义一个 Square 实例的二维数组。

```
private Square squares[][] = new Square[15][15]; 
```

您可能应该在构造函数中实例化这些方块。

之后，您应该提供一个接口来设置给定坐标的值。

```
public void setSquare(int x, int y, String value) 
```

将此字符串设置为指定的正方形。您也可以这样做，如果字符串为空或 null（无论您喜欢哪个），正方形变为“未设置”。如果参数在范围内（在 0 - 14 内），此方法还应验证参数。您还可以选择在另一个函数中实现该验证，例如：

```
public boolean isValidCoordinate(int x, int y) 
```

因此，您不会遇到超出数组有效索引集范围的太多问题，您可以改为在所有边上使用方形缓冲区定义板。

```
private Square squares[][] = new Square[17][17]; 
```

有了这个棋盘，唯一有效的方格是 1-16。任何带有 1 或 17 的 x 或 y 值都是无效的。

就个人而言，我会简单地使用 Strings 而不是定义一个对象 Squares （如果这是你要做的唯一事情）

```
private String squares[][] = new String[17][17]; 
```

未设置空字符串或空字符串。否则，如果您要在方块中实现任何其他方法，那么我想为它们定义一个类是可以的。

# c++ - 重载 += 与 + 相比

> ID：15599054
> 
> 赞同：1
> 
> 时间：2013-03-24T13:31:27.253
> 
> 标签：c++

我需要为 MyString 类重载运算符 + 和 += 。

我的字符串.h

```
 class MyString
    {
        char* m_pStr;   
    }; 
```

主要的

```
 MyString s1("ABC"), s2("kkk");
    MyString s("S");//GMV
    s1 +=s;
    s2 = s+s1;
    stop 
```

我的字符串.cpp

```
MyString MyString:: operator + (const MyString & rhs){
    char * tmp = create_tmp_string(this->m_pStr, rhs.m_pStr);
    return MyString(tmp);
};

MyString & MyString:: operator += (const MyString & rhs){
    char * tmp = create_tmp_string(this->m_pStr, rhs.m_pStr);
    return MyString(tmp);
};

char* MyString:: create_tmp_string(char * one, char * two){
    int total_length = strlen(one) + strlen(two);
    char * tmp = new char[total_length + 1];
    tmp[0] = '\0';
    strcat(tmp, one);
    strcat(tmp, two);   
    return tmp;
} 
```

我的问题是：

```
s2 = s+s1; // Working
s1 +=s; // Not working. 
```

好吧，当我一步一步执行代码时：

```
MyString & MyString:: operator += (const MyString & rhs){
    char * tmp = create_tmp_string(this->m_pStr, rhs.m_pStr);
    return MyString(tmp);
}; 
```

tmp 原来是 SABC。但是 s1 将不包含 SABC 并且仍然持有 ABC。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:32:29.917

您`operator+=`应该返回`*this`而不是局部变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T13:34:13.037

这个

```
MyString & MyString:: operator += (const MyString & rhs){
    char * tmp = create_tmp_string(this->m_pStr, rhs.m_pStr);
    return MyString(tmp);
}; 
```

应该是这样的

```
MyString & MyString:: operator += (const MyString & rhs){
    char * tmp = create_tmp_string(this->m_pStr, rhs.m_pStr);
    *this = MyString(tmp);
    return *this;
}; 
```

假设您的 operator= 工作正常。

但实际上有一种更简单的方法可以做到这一点。只需根据另一个运算符编写一个运算符，例如使用运算符 += 编写运算符+

```
MyString operator+(const MyString& x, const MyString& y)
{
    MyString res = x;
    res += y;
    return res;
} 
```

或者你可以反过来做

```
MyString& MyString::operator+=(const MyString& x)
{
    *this = *this + x;
    return *this;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T13:35:50.800

`operator+=`通常是成员函数；它修改其左侧参数并返回对`*this`. `operator+`通常是一个非成员函数，它返回一个新创建的对象；它可以很容易地实现`operator+=`，所以它不需要知道任何实现细节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T13:34:04.183

在`operator +=`你应该重写 *this 的值。

```
MyString & MyString:: operator += (const MyString & rhs){
    char * tmp = create_tmp_string(this->m_pStr, rhs.m_pStr);
    // seems you own m_pStr. In this case 
    // don't forget, you should make deep copy in copy constructors and 
    // delete in destructor.
    delete this->m_pStr;
    this->m_pStr = tmp;
    return *this;
}; 
```

之后你可以写`operator +`使用`operator +=`

```
MyString operator + (const MyString& rhs){
    MyString copy = *this;
    return copy += rhs;
} 
```

# git - 如何在 IntelliJ Idea 中将一个工作区中的两个项目添加到 git？

> ID：15599055
> 
> 赞同：3
> 
> 时间：2013-03-24T13:31:27.940
> 
> 标签：git, intellij-idea

我在 Intellij Idea 中有两个项目在“Maven Projects”工具窗口中结合在一起......： - autotests - testframework

问题：**如何将两个项目都添加到 git 版本控制中？**

我做了：“ *VCS | 启用版本控制集成*”

但这仅在 git 中添加了一个项目：autotests

**我怎样才能添加“testframework”项目呢？**

当我这样做时：“*将目录与特定版本控制系统*相关联”并将测试框架目录关联到 git，它向我显示：

> 无效的 Git 根映射 目录 /Users/user/Projects/testframework 已注册为 Git 根，但在那里找不到 Git 存储库。

无论如何，来自 VCS 菜单的所有 git 命令似乎只对应于“自动测试”项目......

# asp.net-mvc - 名称来自 ViewBag 的 Javascript 函数

> ID：15599074
> 
> 赞同：0
> 
> 时间：2013-03-24T13:34:16.003
> 
> 标签：asp.net-mvc, razor

如何使用取自 ViewBag 的名称生成 javascript 函数？我正在尝试以下

```
@{ (ViewBag.ModuleId + "DatePickerStartDateChange = function() {console.log('asdf');};");} 
```

并希望它会在 html 输出中发出 javascript 作为

```
xxxxxxDatePickerStartDateChange = function() {alert("asdf");}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:41:59.270

完全不知道为什么你需要这样做，但这是正确的语法：

```
<script type="text/javascript">
    @(ViewBag.ModuleId)DatePickerStartDateChange = function() {
        console.log('asdf');
    };
</script> 
```

# jsp - jsp中如何让liferay支持EL？

> ID：15599077
> 
> 赞同：1
> 
> 时间：2013-03-24T13:34:21.363
> 
> 标签：jsp, liferay, el, liferay-6

我正在学习 liferay 并使用 liferay 6.0.6，我写了一些 el 来获取 pojo 的值，但没有填充任何内容。这是为什么？我试图`<%@ page isELIgnored="false" %>`在jsp上面添加但没有效果。奇怪的是，我可以在另一个示例代码中使用 EL，即 Liferay In Action 中的产品注册，这是一本 liferay 书籍。我将其复制`init.jsp`到当前的 portlet 中，但没有工作。

初始化.jsp

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %>
<%@ taglib uri="http://liferay.com/tld/aui" prefix="aui" %>
<%@ taglib uri="http://liferay.com/tld/portlet" prefix="liferay-portlet" %>
<%@ taglib uri="http://liferay.com/tld/security" prefix="liferay-security" %>
<%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme" %>
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui" %>
<%@ taglib uri="http://liferay.com/tld/util" prefix="liferay-util" %> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-06T14:22:29.367

可以在 Liferay 中使用 EL（我个人更喜欢 EL 而不是 scriptlet，因为 scriptlet 通常被认为是不好的做法）。将这些 jar 放入 portlet 项目的 WEB-INF/lib 文件夹中： [jstl-1.1.2.jar](http://mvnrepository.com/artifact/jstl/jstl/1.1.2)和[standard-1.1.2.jar](http://mvnrepository.com/artifact/taglibs/standard/1.1.2)。在此之后，您可以使用表达式语言以及 JSTL 核心标签：

```
<%@ page pageEncoding="UTF-8" contentType="text/html; charset=UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

# lua - Lua luac.exe 从字符串创建二进制文件

> ID：15599078
> 
> 赞同：0
> 
> 时间：2013-03-24T13:34:21.587
> 
> 标签：lua

无论如何，使用 luac5.1.exe 是否可以将字符串传递给它以创建二进制文件，或者是否有人知道任何可以创建语法检查二进制文件的模块，我想要做的是创建一个可以是的设置文件由要求再次加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:46:14.800

注意`require`加载 lua 源文件或动态库。如果您真的需要二进制数据，Yu 可能会更好地使用自定义加载器。

执行此操作的两个库是 Roberto 的[struct](http://www.inf.puc-rio.br/~roberto/struct/)和 lhf 的[lpack](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#lpack)。

如果你真的想要`require`，那么你可以将你的二进制数据转换为字符串，但由于大概是`userdata`.，你需要一个 C 函数来将 转换`userdata`为 Lua 可访问的类型，例如`string`or `number`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:27:28.407

也许试试这个：

```
function compile(source,file)
   io.open(file,"wb")
     :write(string.dump(assert(loadstring(source,""))))
     :close()
end 
```

# php - Codeigniter 会话身份验证仍然允许加载受限页面

> ID：15599079
> 
> 赞同：1
> 
> 时间：2013-03-24T13:34:21.810
> 
> 标签：php, codeigniter

如果用户未登录，我正在尝试限制来自页面的访问。奇怪的是，当未经授权的用户尝试访问该网页时，会显示受限访问的页面（带有“未经授权，请登录"消息，并且在同一页面上，它会加载仅限成员的页面）。

对于站点控制器：

```
class Site extends CI_Controller {

function __construct(){

    parent::__construct();

    $isLogged=$this->session->userdata('logged');
    if($isLogged!='logged' || !isset($isLogged)){

        $data['content']='denied';
        $this->load->view('include/template', $data);

    }

}

function members(){

        $data['content']='memberArea';
        $this->load->view('include/template', $data);

} 
```

登录表格：

```
class Login extends CI_Controller {

function index () {

    $data['content']='loginForm';
    $this->load->view('include/template', $data);  
}

function validateMember(){

    // load the model for the login authentification
    $this->load->model('loginModel');
    //query should also contain the user details 
    $query = $this->loginModel->authenticate();

    //if it returns something:
    if($query){

        foreach ($query as $row){

            //set user data to be passed    
            $details=array(
            'username'=>$row->user_name,
            'id'=>$row->id,
            'logged'=>'logged',);

        }

    //set session
    $this->session->set_userdata($details); 

    redirect('site/members');

    }

    else{

        $this->index(); 
    }

} 
```

登录的模型是：

```
class LoginModel extends CI_Model {

function authenticate(){

//select active fields
$this->db->select('id, user_name, password');    
// query to select from table where conditions
$query = $this->db->get_where('login', array(
            'user_name'=>$this->input->post('username'),
            'password'=>$this->input->post('password'),), 
                    1);

    //if it finds something...must ask if i need to manually close the database with $this->db->close();
    if($query->num_rows()==1){

        foreach($query->result() as $row){

            $data[]=$row; 
        }

        return $data;
    }

    else {return false;}
} 
```

}

我的测试表明，即使构造函数失败，站点也会继续调用其他函数。会话确实包含数据。如果我使用 die() 或 exit() 网页加载空白。提前谢谢了！

PS：观点只`<p>`在其中，没有什么花哨的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:31:38.857

我可以看到这个问题的两种解决方案。

1.  重定向到不检查身份验证的另一个页面。您可以`redirect(<url>);`从 URL 帮助程序中使用。

2.  `exit()`在`__construct()`缓冲输出被刷新的情况下使用。当您调用时`$this->load->view()`，数据将发送到`output`CodeIgniter 中调用的缓冲区。您可以通过执行以下操作来写入该缓冲区：

    ```
    if($isLogged!='logged' || !isset($isLogged)){

        $data['content']='denied';
        $this->load->view('include/template', $data);

        // Write the output.
        echo $this->output->get_output();  

        // Stop the execution of the script.
        exit();
    } 
    ```

    或者您可以使用以下方法绕过输出缓冲区：

    ```
    if($isLogged!='logged' || !isset($isLogged)){

        $data['content']='denied';          

        // Writes the content instead of sending it to the buffer.  
        echo $this->load->view('include/template', $data, true);  

        // Stop the execution of the script.
        exit();
    } 
    ```

选择你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:49:28.997

构造方法不会“失败”，if 语句只是执行（因为条件为真）并且没有理由阻止其他方法执行。

在构造函数方法中，在`if`块的末尾，您可以插入一条`exit`语句，这样页面可能会按照您的预期运行。

见这里[http://php.net/manual/en/function.exit.php](http://php.net/manual/en/function.exit.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:58:48.193

您正在测试是否有查询，而不是查询是否实际返回任何内容。检查 num 行并确保它们等于 1，大于 0 对登录检查是不好的做法。

```
if($query->num_rows==1){ 
```

PS。也发布您的模型代码，错误可能存在并且即使它不应该返回结果。

# php - 如何理解 switch 语句的奇怪行为？

> ID：15599088
> 
> 赞同：1
> 
> 时间：2013-03-24T13:35:12.950
> 
> 标签：php, switch-statement

我有这个功能

```
private function getCurrencyByCountry($country){
    switch($country){
        case "US": return "USD"; break;
        case "UA": return "UAH"; break;
        case "FR":
        case "DE":
        case "ES":
        case "IT":return "EUR";  break;
        default: return "USD-default";
    }
} 
```

当我使用参数“UA”调用此方法时，此函数返回“USD-default”。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:38:45.073

你应该使用做`var_dump($country);` 之前，

```
switch($country){
        case "US": return "USD"; break; 
```

因为，我很确定，您通过参数传递的不仅仅是“字符串”。

* * *

**或者**，像下面这样的东西也会派上用场，因为它也可以完成工作。

```
<?php 
function foo($country) {
    $value = array(); 

       switch($country){
            case "US": 
            $value = "USD"; 
            break;
         case "UA": 
             $value = "UAH"; 
             break;
         case "FR":
         case "DE":
         case "ES":
         case "IT": 
             $value = "EUR"; 
             break;
             default: $value = "USD-default";
    }

    if(!empty($value)){
        return $value; 
        }

} 
```

`echo foo('Whatever...');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:07:38.890

`php NoOb`根据您对's post的评论，您正在通过字符串传递一个长空格。您可以对字符串中的空格使用[修剪](http://php.net/trim)功能。`trim`

```
private function getCurrencyByCountry($country)
{
    $country = strtolower(trim($country));
    switch($country)
    {
        case "us":
            return "USD";

        case "ua":
            return "UAH";

        case "fr":
        case "de":
        case "es":
        case "it":
            return "EUR";

        default:
            return "USD-default";
    }
} 
```

# jquery - jquery onclick 加载 div

> ID：15599089
> 
> 赞同：0
> 
> 时间：2013-03-24T13:35:13.753
> 
> 标签：jquery, html, click, onload

我可以知道是否可以在 jquery 中执行此操作？

我有一个类别链接：

```
<ul>
<li><a href="#">Tools</a></li>
<li><a href="#">Moulds</a></li>
<li><a href="#">Videos</a></li>
</ul> 
```

并且内容由 div 分隔

```
<div id="tools">This is the tools content</div>
<div id="moulds">This is the moulds content</div>
<div id="videos">This is the videos content</div> 
```

默认情况下，它将显示工具内容和其他两个（模具和视频）div 被隐藏。它们仅在单击菜单时显示。最重要的是，是否可以在加载其他 div 或类似淡入淡出动画的东西时放置加载图片？

这可以做到吗？我搜索了stackoverflow，但没有一个符合我想要的..

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:37:51.827

你为什么不使用标签/类似的东西。无论如何，您可以这样做，但在此之前，请以这种方式更改 HTML：

```
<ul>
    <li><a href="#tools">Tools</a></li>
    <li><a href="#moulds">Moulds</a></li>
    <li><a href="#videos">Videos</a></li>
</ul> 
```

在 JavaScript 中给出这样的方式：

```
$("ul li a").click(function(){
    theDiv = $(this).attr("href");
    $(theDiv).show();
}); 
```

如果您只想`div`显示一个，您可以这样做：

```
$("ul li a").click(function(){
    $("div").hide();
    theDiv = $(this).attr("href");
    $(theDiv).show();
}); 
```

我的建议是，为`<div>`s 和`<a>`s 使用一个公共类。

* * *

最后，你可能会到达：

```
<ul>
    <li><a class="link" href="#tools">Tools</a></li>
    <li><a class="link" href="#moulds">Moulds</a></li>
    <li><a class="link" href="#videos">Videos</a></li>
</ul>

<div class="tab" id="tools">This is the tools content</div>
<div class="tab" id="moulds">This is the moulds content</div>
<div class="tab" id="videos">This is the videos content</div> 
```

然后，事件处理将是：

```
$(".link").click(function(){
    $(".tab").hide();
    theDiv = $(this).attr("href");
    $(theDiv).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:03:36.687

hy

在 jquery 中褪色很容易。这里有一个样本

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
<h1>js test</h1>

<ul id="myMenu">
    <li><a href="#" data-id="tools">Tools</a></li>
    <li><a href="#" data-id="modules">Moulds</a></li>
    <li><a href="#" data-id="videos">Videos</a></li>
</ul>

<div class="subcontent" id="tools" style="display:block">tools</div>
<div class="subcontent" id="modules">modules</div>
<div class="subcontent" id="videos">videos</div>

<script type="text/javascript">
$(document).ready(function()
{
    $('#myMenu').on('click','a',function()
    {
        // fade out all open subcontents
        $('.subcontent:visible').fadeOut();
        // fade in new selected subcontent
        $('.subcontent[id='+$(this).attr('data-id')+']').fadeIn();
    });
});
</script>

<style type="text/css">
    div.subcontent { display:none; }
</style> 
```

我们使用 $('#myMenu').on(..) 注册一个事件处理程序，女巫监听链接元素 (a) 上的点击，并首先淡出所有打开（可见）的 div。然后它从淡入开始。在这种情况下，淡出和淡入方法同时开始。使用回调函数，您可以依次调用这 2 个步骤。

# winforms - 将数据网格事件从一个用户控件捕获到另一个用户控件

> ID：15599092
> 
> 赞同：-1
> 
> 时间：2013-03-24T13:35:50.190
> 
> 标签：winforms, datagridview, user-controls

我正在开发一个 Windows 窗体应用程序。我的应用程序包含一个主容器，我在运行时加载用户控件。

我有一个包含数据网格的用户控件。我有另一个用户控件，其中包含另一个数据网格和一个选项卡控件。

我需要的是，当在网格视图 1（用户控件 1）中选择一行时，然后根据所选行的 ID，我将从数据库中获取值并将数据绑定到网格视图 2（用户控件 2）。默认情况下，gridview 2 的第一行将被选中，并基于选定的行数据将填充到 Tab 控件（用户控件 2）中。

有人可以提供我在用户控件之间创建、引发和处理事件的基本代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:57:25.573

尝试以下任一方法：

[分层数据绑定](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial#hierarchical)

[与 DataSet 的分层数据绑定](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial#hierarchical_dataset)

# git - 在 Git 中，当推送主分支时，来自开发分支的提交也会被推送。这应该发生吗？我正在使用 Gitflow

> ID：15599099
> 
> 赞同：4
> 
> 时间：2013-03-24T13:36:40.557
> 
> 标签：git, bitbucket, smartgit, git-workflow

当我开始使用 git 时，我的工作流程基于 Gitflow 模型：[http](http://nvie.com/posts/a-successful-git-branching-model/) ://nvie.com/posts/a-successful-git-branching-model/ 。我认为主要想法是保持对适当分支的提交；因此，例如，主分支将只有从开发分支合并的提交......即标签...... 0.1。0.2。1.0 在图中。我不完全理解 git 是如何工作的，或者这个工作流程是如何运作的，但这就是我的想法，特别是因为该页面上的图形只显示了 master 分支上的这几个提交，而不是所有的开发提交。

我将我的 repo 推送到 Bitbucket，当我在开发分支工作时一切顺利，但是当我完成开发时；然后向上推主分支，我发现 Bitbucket 中的主分支现在包含我在开发分支上所做的所有提交，而我认为我只会包含最后一个提交（我合并的那个）。有人可以解释为什么会这样，这是否是预期的行为，如果不是，我可以做些什么来让我的工作流程与上面的模型保持一致。我使用 Smartgit。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:25:24.903

Your branching model seems to require specifying `--no-ff` on every merge, forcing bookkeeping entries even for empty merges -- for example in your graphic you'd do the merge from hotfixes to 0.2, which gets that one commit onto the master branch and doesn't actually do any merging, with `git merge --no-ff hotfixes`. On projects with un-git-aware administrative requirements that's a good way to do it. [VonC answered](https://stackoverflow.com/a/15599370/1290731) for the case where you skipped that model's `--no-ff` requirement somewhere.

For the case where you did follow your model and just weren't expecting `push` to behave as it does: if you checkout master as of 1.0 in a repo with your graphic's history and push to the remote's master branch, when the push completes the remote will have commits M2,M4,M5,Y1-6,G1-4,R1, and C1-3 (labeling its commits according to their color and vertical sequence), and the remote master branch will refer to all of that.

The thing to understand is that commit histories are important, but ref names are not, at least not "capital-I" important. [`git push`](https://www.kernel.org/pub/software/scm/git/docs/git-push.html)

> Updates remote refs using local refs, while sending objects necessary to complete the given refs.

Usually, if your repo is part of a project's primary development you're tracking some "central" repo's ref names. Git's default clone sets up local remotes/origin/* branches for those; but other setups aren't at all unusual — if you've got a repo where you're working on v2.1 of some project, you might regard some other repo's release-v2.1 branch as your repo's 'master' branch.

If you want to push only the results of a commit, without pushing its history, you have to make a new commit that has the results but doesn't have that history. Other dvcs's have been built by people who regard constructing histories this way with varying degrees of repugnance; git sees choices like that as none of its business: it provides (it is) tools that implement any model you care to imagine. `git cherry-pick` will make a new commit by diffing the named commit against its first parent and then applying that diff to the current head, with the cherry-picked commit's message. Vanilla `git rebase` picks an entire sequence of commits like that. The behavior I think you were expecting is what `git merge --squash; git commit` does: apply the diffs in a commit's history and forget where they came from. If you do that, no commit from anywhere else will ever appear on your branch's history. That's definitely not the model your graphic is trying to convey.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:59:55.633

`development`将分支合并到 时`master`，您可能进行了快进合并。
与 a `git merge --no-ff`（[手册页](http://git-scm.com/docs/git-merge)）相反，“即使合并解析为快进，也会创建合并提交”。

这意味着`master`HEAD 只是移动到`dev`HEAD，引用所有`dev`提交。

请参阅“[为什么 git 默认使用快进合并？](https://stackoverflow.com/questions/2850369/why-does-git-use-fast-forward-merging-by-default/2850413#2850413) ”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T14:07:01.327

请按照以下步骤操作。也许你会自己找到答案。

*   确保您当前正在使用正确的分支

    ```
    git branch -a //Shows you all the branches 
    git checkout {branch_name} //Make sure you checkout the correct branch 
    ```

*   确保您的日志中有正确的提交

    ```
    git log --oneline -6 // Show last 6 commits on this branch 
    ```

*   如果您看到来自其他分支的提交，那么您可能已将该分支合并到当前分支中，或者您可能错误地在该分支中进行了提交。

# haskell - Yesod generateFormPost - (RenderMessage master0 FormMessage) 没有实例

> ID：15599100
> 
> 赞同：0
> 
> 时间：2013-03-24T13:36:41.267
> 
> 标签：haskell, yesod

我尝试关注 Michael Snoyman 的截屏视频[http://vimeo.com/39646807](http://vimeo.com/39646807)。但是，似乎对 i18n 的更改会导致该代码失败。我在搭建的站点上找不到任何有关如何解决此问题的信息，而且我无法完全理解[http://www.yesodweb.com/book/internationalization](http://www.yesodweb.com/book/internationalization)此处提供的信息。

这是我得到的错误，指的是 Home.hs 中的代码：

```
No instance for (RenderMessage master0 FormMessage)
  arising from a use of `generateFormPost'
Possible fix:
  add an instance declaration for (RenderMessage master0 FormMessage)
In a stmt of a 'do' block:
  (formWidget, enctype) <- generateFormPost noteForm
In the expression:
  do { (formWidget, enctype) <- generateFormPost noteForm;
       defaultLayout ($(widgetFile "notes")) }
In an equation for `getNotesR':
    getNotesR
      = do { (formWidget, enctype) <- generateFormPost noteForm;
             defaultLayout ($(widgetFile "notes")) } 
```

信息似乎很清楚，问题是我不知道如何为（RenderMessage master0 FormMessage）添加实例声明。

这是我添加到 Home.hs 的代码

```
noteForm = renderBootstrap $ Note
    <$> areq textField "Title" Nothing
    <*> areq textField "Content" Nothing

getNotesR = do
    (formWidget, enctype) <- generateFormPost noteForm
    defaultLayout $(widgetFile "notes")

postNotesR = return ()
getNoteR noteId = return () 
```

Ant以下来自templates/notes.hamlet

```
<form method=post enctype=#{enctype}>
    ^{formWidget}
    <input type=submit> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T16:02:40.253

作为一个普遍的提议，当你看到这样的事情时：

```
No instance for (RenderMessage master0 FormMessage) 
```

请记住，`master0`（或以小写字母开头的任何类似内容）是一个未实例化为具体类型的*自由类型变量。*`a`如果有帮助，您可以在精神上将其替换为。所以现在我们看到消息说没有由第二个参数唯一确定的*通用实例和第一个参数中的* *任意*类型。`RenderMessage``FormMessage`

 *因此，解决此问题的常用方法是确定您要将自由类型实例化为什么，并提供类型签名或其他提示以将其修复为该实例化。

在这种情况下，Michael Snoyman 建议的类型签名`noteForm :: Form Note`用于此目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:52:25.087

添加此代码怎么样？

```
instance RenderMessage [The name of your Yesod instance] FormMessage where
    renderMessage _ _ = defaultFormMessage 
```

请参阅[http://www.yesodweb.com/book/internationalization](http://www.yesodweb.com/book/internationalization)。*

# android - Android imageview以编程方式更改颜色

> ID：15599108
> 
> 赞同：0
> 
> 时间：2013-03-24T13:37:31.927
> 
> 标签：android, imageview

如果我在图像视图中显示灰度图像，我可以通过编程方式更改其颜色吗？如果重要，图像具有背景透明度，需要保持透明。所以我只想改变实际图像部分的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T11:03:56.193

我之前写了一个简单的自定义ImageView

以下代码仅供参考：

```
public class ColorImageView extends ImageView
{
private Context context;
private boolean showColor;
private Paint mPaint;
private ColorMatrix cm;
private Bitmap mBitmap;

private float[] color = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0 };
private float[] normal = { 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 0 };

public ColorImageView(Context context)
{
    super(context);
    init(context);
}

public ColorImageView(Context context, AttributeSet attrs)
{
    super(context, attrs);
    init(context);
}

public ColorImageView(Context context, AttributeSet attrs, int defStyle)
{
    super(context, attrs, defStyle);
    init(context);
}

private void init(Context context)
{
    this.context = context;
    showColor = false;
    mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    cm = new ColorMatrix();
}

@Override
public void setImageResource(int resId)
{
    // TODO Auto-generated method stub
    super.setImageResource(resId);
    mBitmap = BitmapFactory.decodeResource(context.getResources(), resId);
    invalidate();
}

@Override
protected void onDraw(Canvas canvas)
{
    // super.onDraw(canvas);
    Paint paint = mPaint;
    paint.setColorFilter(null);
    canvas.drawBitmap(mBitmap, 0, 0, paint);
    if (isShowColor())
    {
        cm.set(color);
    }
    else
    {
        cm.set(normal);
    }
    paint.setColorFilter(new ColorMatrixColorFilter(cm));
    canvas.drawBitmap(mBitmap, 0, 0, paint);
}

public void setColor(int color)
{
    float red = Color.red(color);
    float green = Color.green(color);
    float blue = Color.blue(color);
    float alpha = Color.alpha(color);
    // 0,6,12,18
    this.color[0] = red / 0xFF;
    this.color[6] = green / 0xFF;
    this.color[12] = blue / 0xFF;
    this.color[18] = alpha / 0xFF;
    setShowColor(true);
}

public boolean isShowColor()
{
    return showColor;
}

//set true to show custom color
public void setShowColor(boolean showColor)
{
    this.showColor = showColor;
}
} 
```

用法：

1.将ColorImageView放入xml

2.在代码中设置ImageView的src

3.setColor(${color}) 为您的自定义颜色

4.setShowColor(true) 如果你想显示颜色。

5.ColorImageView.invalidate().（如果有必要忘了）

然后将显示颜色偏移 ImageView。

# macos - OpenCL：如何优化归约内核（列的总和），目前 CPU 更快

> ID：15599125
> 
> 赞同：2
> 
> 时间：2013-03-24T13:39:02.477
> 
> 标签：macos, optimization, opencl

我第一次开始使用 OpenCL，我正在尝试优化缩减内核。内核采用大小为宽乘长像素的浮点数方格（数据表示灰度图像的亮度值）。内核沿每一列求和，并将每一列的总和返回到输出数组。

```
/* 
input  -- "2D" array of floats with width * height number of elements
output -- 1D array containing summation of column values with width number of elements
width  -- number of elements horizontally
height -- number of elements vertically

Both width and height must be a multiple of 64.
*/
kernel void sum_columns(global float* input, global float* output,  int width, int height)
{        
    size_t j = get_global_id(0);
    float sum = 0.0;
    int i;
    for(i=0; i<height; i++) {
        sum += input[i + width*j];
    }
    output[j] = sum;
} 
```

OpenCL 应该同时执行每列求和，因为我将全局维度设置为数据中的列数。我在 MacOS 上使用了 Instruments.app，并计算了在 CPU 和 GPU 上执行时内核的 1000 次迭代需要多长时间。这可以通过将设备指定为`CL_DEVICE_TYPE_CPU`或来完成`CL_DEVICE_TYPE_GPU`。

表现**并不**好！事实上，CPU 一直比 GPU 快，这让我觉得很奇怪。内核有问题吗？CPU最多只能同时执行大约8个线程，怎么能更快呢？

这个项目的代码在这里（一个 Xcode 项目），[https://github.com/danieljfarrell/Xcode-4-OpenCL-Example](https://github.com/danieljfarrell/Xcode-4-OpenCL-Example)。

这是我增加数据大小时的计时结果，

![执行时间作为图像大小的函数。](../Images/80e9a3eba88c0be50475eb8b0de676ee.png)

**更新**

通过查看使用 Instruments.app 运行内核所花费的时间，简单地暗示了 CPU 和 GPU 的时序， ![显示 Instruments.app 使用界面的屏幕截图，其中突出显示了内核的执行时间。](../Images/440703791b2fb6a9925f01fd4ae876a2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T02:45:00.597

一个可以尝试的简单改进是使输入常量内存而不是全局内存。您需要在创建缓冲区时使用 CL_MEM_READ_ONLY 进行设置。我使用的探查器似乎喜欢你的内核，因为我只将该参数更改为 __constant。

另一种选择是转置输入矩阵，这样您就不会尝试读取内存列。我制作了一个内核，它使用整个工作组来汇总一行数据并在输出中产生一个条目。__constant 参数也对这个内核有很大帮助，使其成为我运行的四个试验中唯一一个受 ALU 绑定而不是全局获取绑定的运行。

我没有遍历 height 参数，但您可以设置它或为输出数据创建足够的工作组（每个元素 1 个）。

```
kernel void sum_rows(__constant  float* input, global float* output,  int width, int height)
{        
    int gid = get_local_id(0);
    int gsize = get_local_size(0);
    local float sum[64]; //assumes work group size of 64
    sum[gid] = 0;
    int i;
    int rowStart = width * get_group_id(0);
    for(i=gid; i<width; i+=gsize) {
        sum[gid] += input[rowStart + i];
    }
    barrier(CLK_LOCAL_MEM_FENCE);
    if(gid == 0){
        for(i = 0;i<64;i++){
            sum[0] += sum[i];
        }
        output[get_group_id(0)] = sum[0];
    }
} 
```

除此之外，我建议查看主机级别的优化。有了足够大的数据集，gpu 在缩减内核中的表现应该没有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:07:37.327

实际上，在使用 OPenCL 时需要权衡取舍，这实际上可能会导致在将 OpenCL 用于某些任务时性能变慢。

也许您可以尝试增加在 GPU 上实际执行的工作，从而超过设置上下文的成本。

请注意，并非所有工作都可以从 OpenCL 中受益，而且大多数时候您必须进行一些测试才能确定您的应用程序是否可以从中受益。
*请参阅：[OpenCL 对哪些工作有利](https://stackoverflow.com/questions/2869929/what-kind-of-work-benifits-from-opencl)*

*   **设置上下文和传输数据的开销**

> *由于设置上下文和通过 PCI 总线传输数据的开销，您必须处理相当大的数据集才能看到使用 OpenCL 的任何好处。*您开始看到好处的确切时间取决于 OpenCL 实现和所使用的硬件，因此您必须进行试验以了解您的算法执行速度有多快。一般来说，计算与数据访问的高比率和大量的数学计算对于 OpenCL 程序是有益的。

资料来源：[MAC 的 OpenCL 编程指南](http://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/IdentifyingParallelizableRoutines/IdentifyingParallelizableRoutines.html#//apple_ref/doc/uid/TP40008312-CH9-SW1)

*   **小型作业/过于分散的作业在 CPU 上的性能更好**

例如，如果您使用 OpenCL 执行的作业太小或太小，那么与使用 OpenCL 执行实际作业相比，您将花费更多时间来设置所有内容。

> 我添加的分段代码越多，OpenCL 代码就越慢。
> [...]
> *3 件事会杀了你。*
> 调用 OpenCL 的延迟。这意味着，调用 OpenCL 函数比调用“真正的 Java/C# 函数”需要更多时间。
> 其次，GPU 访问主计算机内存并将内容复制到其中需要相当长的时间。[...]

资料来源：[OpenCL 中的当前问题 (2010)](http://www.heatonresearch.com/node/1750)

*   **还有这个页面，基准测试人员在其中指出：**

> 显然，您看到 GPU 在更大的大小值上优于 CPU，因为程序能够使用 GPU 提供的多个线程。在较小的大小值下，与 GPU 相关的访问时间可观，因此 CPU 执行速度更快。

资料来源：[CPU 与 GPU 性能对比与 OpenCL](http://advencode.wordpress.com/2011/10/24/performance-comparision-of-using-opencl-with-my-gpu/)（2011 年 10 月）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T16:24:01.553

您需要将问题分解为多个内核运行。在 OpenCL 中拥有大循环（在这种情况下“高度”可能很大）是不好的，而且您需要展开任何循环。您可以使用“#pragma unroll X”自动执行此操作，其中“X”是循环运行的次数。

现在您的问题变得稍微困难​​了，因为您需要将其分解为多个内核运行。以下是步骤：

1.  确定可以展开的最大数量，然后让每个线程只对那么多元素进行操作。
2.  使用讨论的循环展开
3.  这将为每列生成部分总和。
4.  一次又一次地运行内核，直到你只有少量的总和（通过反复试验确定这个数字）
5.  将 CPU 上的最终部分总和相加。注意：在最后的 CPU 求和步骤之前，不要将部分总和复制回 CPU。

还有其他策略，但这将是真正让 GPU 在此计算中获胜的第一步。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T21:44:04.357

首先，我同意**mfa**，如果您将数据转置会更好。这样，您将按顺序从全局内存中读取数据（搜索银行冲突）。但这只是一件事。

另一件事是改变你的算法。您的方法当前的缺点 1）您的工作项目数量很少 - 等于图像的高度。2）长周期。

我建议你重写你的算法，让它真正平行下一个方式：例如，你必须对 512 个项目求和。然后运行具有 256 个工作项的工作组。每个工作项加起来 2 个值。例如，第一个将添加 v[1]=v[0]+v[1]，第二个 v[3] = v[2]+v[3] 等等。因此，在第一次操作之后，您将在奇数索引中获得对和。下一个周期您进行类似的程序，但只有 128 个工作项完成这项工作，因为您已经只有 256 个元素要处理。现在第一个工作项的唯一区别是 v[3] = v[1]+v[3]，第二个 v[7] = v[5] + v[7] 等等。这样你就有 1) O(logN) 复杂性而不是 O(N) 2) 你产生更多的项目做更少的工作。-> 从并行化中受益。

当然，您需要在每次写入后调用 barrier(...) 指令来同步工作组中工作项之间的计算。

为了进一步加快速度，首先每个工作组将其值从全局内存复制到本地内存，并使用本地内存执行计算。

一个问题，您可能想问：“**如果我需要汇总太多值（比如 100000）并且我无法创建具有如此大量工作项的工作组**”。在这种情况下，您进行部分求和，然后第二次运行内核以对这些部分求和。因为您在执行内核时无法在工作组之间进行同步。

这里更清楚的是代码。它将 2 x blockSize 值相加。希望我没有犯任何错误（实际上并没有编译这个）

```
// run Work group with local size = (BLK_SIZ, 1), global size = ( width, height )
__kernel void calc_sum(__global float* d_in, __global float* d_sums, const int rowLen)
{

    int our_row = get_global_id(1);
    int lx = get_local_id(0);
    int gr = get_group_id(0);

    __local float our_mem[(2*BLK_SIZ)];

    // copy glob -> loc mem
    our_mem[2*lx + 0] = d_in[gr*2*BLK_SIZ + 2*lx + 0];
    if(gr*2*BLK_SIZ + 2*lx + 0 >= rowLen)
        our_mem[2*lx + 0] = 0;

    our_mem[2*lx + 1] = d_in[gr*2*BLK_SIZ + 2*lx + 1];
    if(gr*2*BLK_SIZ + 2*lx + 1 >= rowLen)
        our_mem[2*lx + 1] = 0;

    // do the calculations

    int width = 2;
    int num_el = 2*BLK_SIZ / width;
    int wby2 = width>>1;
    for(int i = 0;i<7;++i) 
    {
        barrier(CLK_LOCAL_MEM_FENCE);
        if(lx < num_el)
        {
            int idx = width*(lx + 1) - 1;
            our_mem[idx] = min(our_mem[idx], our_mem[idx-wby2]);
        }
        width<<=1;
        wby2 = width>>1;
        num_el>>=1;
    }
    barrier(CLK_LOCAL_MEM_FENCE);
    // store res
    if(lx == 0) // choose some element from work group to actualy write the sum
    {
        d_sums[our_row] = our_mem[2*lx-1]; // sum is in last element
    }
} 
```

还可以在互联网上搜索 blelloch / hillis Steele 并行前缀和算法。nVidia 也有很好的示例，其中包含有关并行前缀和算法的良好文档。它做的比你需要的要多，但与我描述的方法相同。

希望这可以帮助。

# c# - c# 等效于 c++ 向量或双端队列

> ID：15599127
> 
> 赞同：31
> 
> 时间：2013-03-24T13:39:11.493
> 
> 标签：c#, c++, vector, deque

我几乎可以肯定这应该是重复的，但我搜索了一段时间并找不到答案。我应该在 C# 中使用什么来**有效**地替换 C++ 向量和双端队列。那就是我需要一种结构，它可以有效地支持直接索引，并且还支持以有效的方式再次从一端或两端删除（取决于向量或双端队列）。

在 java 中，我通常至少将 ArrayList 用于向量，但对于 C#，我发现[这个来源](http://www.dotnetperls.com/arraylist)表明： `ArrayList resizes dynamically. As elements are added, it grows in capacity to accommodate them. It is most often used in older C# programs.`. 那么这样做的新方法是什么？我又该如何处理双端队列案例？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-24T13:43:51.650

没有内置的 Deque 容器，但有几种可用的实现。

这是[斯蒂芬·克利里的一篇好文章](https://github.com/StephenCleary/Deque)。这提供了 O(1) 操作来索引以及在开头插入并在结尾追加。

与 Vector 等效的 C# 是[`List<T>`](http://msdn.microsoft.com/en-gb/library/6sh2ey19.aspx). 索引访问是 O(1)，但插入或删除是 O(N)（除了在末尾插入，即 O(1)）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-28T17:37:06.203

对于 C# ，正如其他人提到`vector`的那样，一个很好的候选人。 C++ 中最接近双端队列的是双向链表。 [`System.Collection.Generic.List`](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.110%29.aspx)
[`System.Collection.Generic.LinkedList`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T13:42:37.990

考虑`System.Collections.Generic.List`和其他它们与它们的等价物`System.Collection.Generic`具有相同的目的。 此外，可能还有更多容器适合您。看[这里](http://msdn.microsoft.com/en-us/library/system.collections.generic.aspx)。`C++`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-07T03:22:43.127

Deque 不在 C# 中，但我们可以通过 Vector 和 List 来归档功能，下面是一个通过 List 归档 Deque 的示例程序。

```
using System;
using System.Collections.Generic;

public class GFG{

// Function to generate the array by
// inserting array elements one by one
// followed by reversing the array
static void generateArray(int []arr, int n)
{

    // Doubly ended Queue
    List<int> ans = new List<int>();

    // Start adding functionality at both end
    // Iterate over the array 
    // Even no at the front and odd no at the rear
    for(int i = 0; i < n; i++) 
    {

        // Push array elements
        // alternately to the front
        // and back
        if (arr[i]%2==0)
            ans.Insert(0,arr[i]);
        else
            ans.Add(arr[i]);
    }

    printDeque(ans);
    // Output 8 6 4 2 6 5 1 3

    // Start removing functionality at both end
    // Let i want to remove first(8) and last(3) element from Deque

    ans.RemoveAt(0);
    printDeque(ans);
    // Output 6 4 2 6 5 1 3 
    ans.RemoveAt(ans.Count-1);
    printDeque(ans);
    // Output 6 4 2 6 5 1

}
static void printDeque(List<int> q){
    // Print the elements
    // of the Deque
    foreach(int x in q)
    {
        Console.Write(x + " ");
    }
    Console.WriteLine();
}

// Driver Code
public static void Main(String[] args)
{

    int []arr = {5, 6, 1, 2, 3, 4,6, 8 };
    int n = arr.Length;
    generateArray(arr, n);
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-09T21:30:42.443

对我来说，这些简单的扩展方法就足够了。

```
using System.Linq;
using System.Collections.Generic;
-----
-----

        public static T consume<T>(this List<T> list, int index) {
            if (list.Count < index) return default(T);
            var item = list[index];
            list.RemoveAt(index);
            return item;
        }
        public static T pop<T>(this List<T> list) {
            return list.consume(list.Count - 1);
        }
        public static T dequeue<T>(this List<T> list) {
            return list.consume(0);
        }
        public static void push<T>(this List<T> list, T item) {
            list.Add(item);
        }
        public static void enqueue<T>(this List<T> list, T item) {
            list.Add(item);
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-09T05:38:48.713

尽管您不能执行索引操作，但链表可能是最接近在恒定时间内实现先出队和最后出队的方法之一。

[https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlist-1.removefirst?view=netframework-4.8](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlist-1.removefirst?view=netframework-4.8)

# android - 使用 android-ndk r8e 进行链接时优化

> ID：15599133
> 
> 赞同：6
> 
> 时间：2013-03-24T13:39:46.950
> 
> 标签：android, android-ndk

我想使用新的 android ndk r8e 编译源代码（SDL 和类似的东西）。更改日志指出“在 GCC 4.7、4.6、Clang 3.2 和 Clang 3.1 中启用 -flto”。所以我在 LOCAL_CFLAGS、LOCAL_CPPFLAGS 和 LOCAL_LDFLAGS 中添加了 -flto。但是链接器调用中没有优化和架构标志，因此没有进行优化（又名慢二进制）。链接器也会失败，因为它无法从某些 .S 文件中找到函数，并且某些指令在拇指模式下不可用。没有 -flto 一切正常。

那么如何正确使用链接时优化以及如何避免这个问题呢？不，将我自己的优化/架构标志添加到 LOCAL_LDFLAGS 是没有答案的，因为我想使用 NDK 而不是我自己的 hacky 构建脚本。

链接时优化也在 amd64（非安卓）上使用自己的构建脚本进行了测试，效果很好（编译、链接和 20% 的速度优势）。所以请保留 NDK 构建系统的答案。

# java - FileOutputStream 打开一个新文件并在创建时删除其内容

> ID：15599137
> 
> 赞同：3
> 
> 时间：2013-03-24T13:40:16.213
> 
> 标签：java, file, outputstream, fileoutputstream

我正在处理文件中的序列化和反序列化。此外，我对使用`FileOutputStream`with很感兴趣`ObjectOutputStream`。问题是我有服务器/客户端聊天应用程序，每当连接客户端时，服务器必须检查连接的客户端是否已经注册。因此，当客户端连接到服务器时，服务器会创建一个输出流，例如

```
FileOutputStream fos = new FileOutputStream("src\\example\\mainList.txt"); 
```

获取一个linkedlist来检查这个列表是否包含这个对象。但是，`FileOutputStream`总是创建一个没有内容的新文件。我知道我是否将“true”值作为第二个参数传递给附加文件，但是这个 .txt 文件应该只包含一个链表对象。因此，我不想在每个进程中附加一个列表。我该如何处理问题？我只想要

*   如果有指定的文件没有内容不读取对象，只添加第一次列表
*   如果有指定文件的内容（意味着只有一个链表对象），则读取它，并将新客户端添加到列表中，并将链表对象写回文件中。

我希望我对你的问题很清楚，我会感谢你的每一个答案。所以还是谢谢

编辑：这是我想说的一个简单的例子。

```
public class PersonTest2 {

    public static void main(String[] args) throws IOException, ClassNotFoundException {

        LinkedList<Person> list = new LinkedList<Person>();

        Person per = new Person("John","Thompson",22);
        Person per2 = new Person("Suzie","Cash",23);
        Person per3 = new Person("Peter","Jackson",24);
        Person per4 = new Person("Michael","Coch",25);

        list.add(per);
        list.add(per2);
        list.add(per3);
        list.add(per4);

        FileOutputStream fos = new FileOutputStream("person.txt");

        BufferedReader br = new BufferedReader(new FileReader("person.txt"));     
        if (br.readLine() == null ) {
            System.out.println("No errors, and file is empty");

        }

        ObjectOutputStream oos = new ObjectOutputStream(fos);

        oos.writeObject(list);
        fos.close();

        FileInputStream fis = new FileInputStream("person.txt");
        ObjectInputStream ois = new ObjectInputStream(fis);

        LinkedList<Person> list2;

        list2 = (LinkedList) ois.readObject();

        for (Iterator<Person> itr = list2.iterator(); itr.hasNext();) {
            Person rper = itr.next();

                System.out.println(rper.name + " " + rper.last_name + " " + rper.age);
        }
    }

} 
```

每次我运行此代码时，FileOutputStream 都会打开一个新文件。但是，如果我使用`true`第二个参数，它将附加链表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T14:27:22.257

> *   如果有指定的文件没有内容不读取对象，只添加第一次列表
> *   如果有指定文件的内容（意味着只有一个链表对象），则读取它，并将新客户端添加到列表中，并将链表对象写回文件中。

您可以通过以下方式执行此操作：

```
File file = new File("person.txt");
boolean toWrite = false;
boolean toModify = false;
if (file.exists())
{
   if (file.length() == 0)
   {
     toWrite = true;
   }
   else 
   {
     toModify = true;
   }
}
if (toWrite || !file.exists())
{
     FileOutputStream fos = new FileOutputStream(file);
     ObjectOutputStream oos = new ObjectOutputStream(fos);
     oos.writeObject(list);
     fos.close();
     oos.close();
}
else if (toModify)
{
   FileInputStream fins = new FileInputStream(file);
   ObjectInputStream oins = new ObjectInputStream(fins);
   LinkedList<Person> temp = (LinkedList<Person>)oins.readObject();
   fins.close();
   oins.close();
   temp.add(per);
   temp.add(per2);
   temp.add(per3);
   temp.add(per4);
   FileOutputStream fos = new FileOutputStream(file);
   ObjectOutputStream oos = new ObjectOutputStream(fos);
   oos.writeObject(temp);
   fos.close();
   oos.close();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T13:41:48.907

尝试这个：

```
FileOutputStream fos = new FileOutputStream("src\\example\\mainList.txt" ,true); 
```

[FileOutputStream（字符串名称，布尔附加）](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html)

> 创建文件输出流以写入具有指定名称的文件。如果第二个参数为真，那么字节将被写入文件的末尾而不是开头。创建一个新的 FileDescriptor 对象来表示此文件连接。

# workflow-foundation-4 - WF4 中的控制台应用程序未移动到下一个活动 - 购物车

> ID：15599142
> 
> 赞同：0
> 
> 时间：2013-03-24T13:40:25.153
> 
> 标签：workflow-foundation-4

我正在开发一个购物车控制台 WF 应用程序建模在线购物车，如下所示：[https ://docs.google.com/drawings/d/15e24iO-OCcQuO7PwqQVJpTOd1RHs4e042S-zyjL1iu0/pub?w=1001&h=728](https://docs.google.com/drawings/d/15e24iO-OCcQuO7PwqQVJpTOd1RHs4e042S-zyjL1iu0/pub?w=1001&h=728)

我正在使用从控制台读取输入的书签活动。所以 3 个书签活动 r 用来阅读`ItemID`, `Qty`,`ContinueShopping`

在里面活动。在继续购物活动中，如果我在输入 ItemID 后输入 Yes。控制台上什么也没有发生。

它应该问下一个活动“输入数量”吗？rt？什么问题。请指导我。

xml:

```
 <Activity mc:Ignorable="sads sap" x:Class="OnlineShoppingCartWorkFlow.ShoppingCartWorkflow" local:ShoppingCartWorkflow.IsContinueArg="Y" local:ShoppingCartWorkflow.OrderIDArg="0"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:local="clr-namespace:OnlineShoppingCartWorkFlow"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System"
 xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:s1="clr-namespace:System;assembly=System"
 xmlns:s2="clr-namespace:System;assembly=System.Xml"
 xmlns:s3="clr-namespace:System;assembly=System.Core"
 xmlns:s4="clr-namespace:System;assembly=System.ServiceModel"
 xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities"
 xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System"
 xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel"
 xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core"
 xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:sd="clr-namespace:System.Data;assembly=System.Data"
 xmlns:sl="clr-namespace:System.Linq;assembly=System.Core"
 xmlns:st="clr-namespace:System.Text;assembly=mscorlib"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="IsContinueArg" Type="InArgument(x:String)" />
    <x:Property Name="OrderIDArg" Type="InArgument(x:String)" />
    <x:Property Name="QtyArg" Type="InArgument(x:String)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>632,1674</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces for internal implementation</mva:VisualBasic.Settings>
  <sap:WorkflowViewStateService.ViewState>
    <scg3:Dictionary x:TypeArguments="x:String, x:Object">
      <x:Boolean x:Key="ShouldCollapseAll">False</x:Boolean>
      <x:Boolean x:Key="ShouldExpandAll">True</x:Boolean>
    </scg3:Dictionary>
  </sap:WorkflowViewStateService.ViewState>
  <Sequence DisplayName="Sequence1" sad:XamlDebuggerXmlReader.FileName="G:\Development\Shopping Cart\WFShoppingCart\WFShoppingCart\WFShopping.xaml" sap:VirtualizedContainerService.HintSize="592,1634">
    <Sequence.Variables>
      <Variable x:TypeArguments="scg3:List(local:Product)" Default="[New List(Of Product)]" Name="varStockList" />
      <Variable x:TypeArguments="scg3:List(local:Product)" Default="[New List(Of Product)]" Name="varShoppingCart" />
    </Sequence.Variables>
    <sap:WorkflowViewStateService.ViewState>
      <scg3:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
      </scg3:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <Assign DisplayName="Get Stock &amp; Assign" sap:VirtualizedContainerService.HintSize="570,60">
      <Assign.To>
        <OutArgument x:TypeArguments="scg3:List(local:Product)">[varStockList]</OutArgument>
      </Assign.To>
      <Assign.Value>
        <InArgument x:TypeArguments="scg3:List(local:Product)">[New Product().GetStock()]</InArgument>
      </Assign.Value>
    </Assign>
    <Sequence DisplayName="SequenceWhile" sap:VirtualizedContainerService.HintSize="570,1410">
      <Sequence.Variables>
        <Variable x:TypeArguments="x:Int32" Default="0" Name="varBillAmount" />
      </Sequence.Variables>
      <sap:WorkflowViewStateService.ViewState>
        <scg3:Dictionary x:TypeArguments="x:String, x:Object">
          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
        </scg3:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <While DisplayName="While Continue Shopping" sap:VirtualizedContainerService.HintSize="548,1185">
        <sap:WorkflowViewStateService.ViewState>
          <scg3:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg3:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
        <While.Condition>[IsContinueArg.ToUpper() = "Y"]</While.Condition>
        <Sequence DisplayName="SequenceWhileBody" sap:VirtualizedContainerService.HintSize="522,1067">
          <sap:WorkflowViewStateService.ViewState>
            <scg3:Dictionary x:TypeArguments="x:String, x:Object">
              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            </scg3:Dictionary>
          </sap:WorkflowViewStateService.ViewState>
          <WriteLine sap:VirtualizedContainerService.HintSize="500,61" Text="Enter the ProductID:" />
          <local:MyReadLine BookmarkName="IDBookmark" DisplayName="Read OrderID" sap:VirtualizedContainerService.HintSize="500,22" Result="[OrderIDArg]" />
          <WriteLine sap:VirtualizedContainerService.HintSize="500,61" Text="Enter the Qty:" />
          <local:MyReadLine BookmarkName="QtyBookmark" DisplayName="Read Qty" sap:VirtualizedContainerService.HintSize="500,22" Result="[QtyArg]" />
          <If Condition="[varStockList.Exists(Function(x) x.ProductID = Convert.ToInt32(OrderIDArg) And x.Quantity &gt;= Convert.ToInt32(QtyArg))]" DisplayName="Check Stock Availablity" sap:VirtualizedContainerService.HintSize="500,454">
            <If.Then>
              <Sequence DisplayName="SequenceIfTrue" sap:VirtualizedContainerService.HintSize="264,346">
                <Sequence.Variables>
                  <Variable x:TypeArguments="local:Product" Default="[New Product()]" Name="varAddProduct" />
                </Sequence.Variables>
                <sap:WorkflowViewStateService.ViewState>
                  <scg3:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  </scg3:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Assign DisplayName="Assign Prodcut" sap:VirtualizedContainerService.HintSize="242,60">
                  <Assign.To>
                    <OutArgument x:TypeArguments="local:Product">[varAddProduct]</OutArgument>
                  </Assign.To>
                  <Assign.Value>
                    <InArgument x:TypeArguments="local:Product">[varStockList.Find(Function(x) x.ProductID = Convert.ToInt32(OrderIDArg))]</InArgument>
                  </Assign.Value>
                </Assign>
                <Assign DisplayName="Assign Qty Of Product" sap:VirtualizedContainerService.HintSize="242,60">
                  <Assign.To>
                    <OutArgument x:TypeArguments="x:Int32">[varAddProduct.Quantity]</OutArgument>
                  </Assign.To>
                  <Assign.Value>
                    <InArgument x:TypeArguments="x:Int32">[Convert.ToInt32(QtyArg)]</InArgument>
                  </Assign.Value>
                </Assign>
                <AddToCollection x:TypeArguments="local:Product" Collection="[varShoppingCart]" DisplayName="AddToCollectionShoppingCart&lt;Product&gt;" sap:VirtualizedContainerService.HintSize="242,22" Item="[varAddProduct]" />
              </Sequence>
            </If.Then>
            <If.Else>
              <WriteLine sap:VirtualizedContainerService.HintSize="211,61" Text="Item is out of stock!" />
            </If.Else>
          </If>
          <WriteLine sap:VirtualizedContainerService.HintSize="500,61" Text="Shopping Continue Y/N?" />
          <local:MyReadLine BookmarkName="ContinueBookmark" DisplayName="Read Shopping Continue" sap:VirtualizedContainerService.HintSize="500,22" Result="[IsContinueArg]" />
        </Sequence>
      </While>
      <WriteLine sap:VirtualizedContainerService.HintSize="548,61" Text="[&quot;Thank you customer. Your bill amount is Rs:&quot; + varShoppingCart.Sum(Function(x) x.Price * x.Quantity).ToString() + &quot;/ only&quot;]" />
    </Sequence>
  </Sequence>
</Activity> 
```

我正在使用从 NativeActivity 派生的名为 MyReadLine 类的自定义活动。此活动从

安慰。这是一个书签活动。

Program.cs 文件：>

```
using System;
using System.Linq;
using System.Activities;
using System.Activities.Statements;
using System.Collections.Generic;
using System.Threading;
namespace OnlineShoppingCartWorkFlow
{
    class Program
    {
        static void Main(string[] args)
        {
            WorkflowApplication wfApp = new WorkflowApplication(new ShoppingCartWorkflow());
            AutoResetEvent idleEvent = new AutoResetEvent(false);
            wfApp.Idle = delegate(WorkflowApplicationIdleEventArgs e)
            {
                idleEvent.Set();
            };
            wfApp.Run();

            idleEvent.WaitOne();
            string bookmarkName = "IDBookmark";
            BookmarkResumptionResult result = wfApp.ResumeBookmark(bookmarkName, Console.ReadLine());
            bookmarkName = "QtyBookmark";
            result = wfApp.ResumeBookmark(bookmarkName, Console.ReadLine());
            bookmarkName = "ContinueBookmark";
            result = wfApp.ResumeBookmark(bookmarkName, Console.ReadLine());
            Console.ReadLine();
        }
    }   
} 
```

我的自定义活动类：

```
using System.Activities;

namespace OnlineShoppingCartWorkFlow
{
    public class MyReadLine : NativeActivity<string>
    {
        [RequiredArgument]
        public InArgument<string> BookmarkName { get; set; }
        protected override void Execute(NativeActivityContext context)
        {
            context.CreateBookmark(BookmarkName.Get(context), new BookmarkCallback(OnResumeBookmark));
            //context.CreateBookmark(BookmarkName.Get(context), new BookmarkCallback(OnResumeBookmark),  BookmarkOptions.MultipleResume);
        }   
        protected override bool CanInduceIdle
        {
            get
            {
                { return true; }
            }
        }
        public void OnResumeBookmark(NativeActivityContext context, Bookmark bookmark, object obj)
        {
            Result.Set(context, (string)obj);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T17:07:05.097

这方面的问题是，通常在`xaml`您更改的路径中创建文件（即，当您将项目更改为另一个文件夹时）在您`codebehing`有：

```
XamlDebuggerXmlReader.FileName="G:\Development\Shopping Cart\WFShoppingCart\WFShoppingCart\WFShopping.xaml" 
```

请检查您的`xaml`“完整路径”属性是否与此相同。一旦两者相等，您就可以调试您的活动。

# c# - c#中的语法分析器

> ID：15599146
> 
> 赞同：0
> 
> 时间：2013-03-24T13:40:37.197
> 
> 标签：c#, context-free-grammar

我已经给出了使用任何编程语言制作语法分析器的项目。我正在用 C# 做。已经创建了简单的上下文无关语法。但是现在我很困惑为语法分析器制作算法。

语法是这样的：

```
 Namespace       var . { class }
    Class           var . { method  } . class | null
    Method          function | null
    Function        return_type.var.(function_arguements).{.stmt_list.} . Method
                    .......... and so on 
```

我必须显示错误以及错误的行号。我需要一些指导才能开始编码。我尝试了二维数组、链表、枚举、结构。但我无法为此创建任何好的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:33:49.167

当我使用编译器时，我们必须为一种简单的语言编写编译器。我不知道我是否在您的问题中完全遵循您的语言定义或您已经走了多远，但这是我们在解析语言时使用的方法。

首先，您需要一个词法分析器类，它只负责获取输入中的下一个标记。这实质上是遍历代码并在每次调用时`GetNextToken()`返回代码中的下一个字符串。假设您有以下代码行：

```
PROCEDURE sum() RETURN INTEGER; 
```

第一次调用`GetNextToken()`将返回`PROCEDURE`。第二个调用会返回`sum`，第三个会返回`(`then `)`then `RETURN`, `INTEGER`, 最后`;`

现在你需要一个语法解析器。这个想法是您的语言定义最终应该达到一个终止标记。这是我的编译器语言定义的一个小片段：

```
<program> -> $UNIT <prog-identifier> $SEMICOLON
                   <block> $PERIOD
<block> -> [<label-declaration>]
                   {<variable-dec-sec>}*
                   {<procedure-declaration>}*
                   $LEFTBRACE <statement> {$SEMICOLON <statement>}*
                   $RIGHTBRACE 
```

所以在分析器中我们调用一个函数`Program()`。`Program()`将获得下一个令牌。如果那个标记是`UNIT`我们将得到 将调用另一个函数，`ProgIdentifier()`该函数将再次调用`GetNextToken()`. `ProgramIdentifier()`会寻找一个标识符类型。继续前进`Program()`，看看下一个标记是否是`;`. 然后调用`Block()`which 的工作方式`Program()`与然后看看你是否有一个`.`after。

关键是在每个结束标记处，例如 ,`;`你会有一个`if`语句。所以简单的代码`Program()`可能看起来像这样：

```
public int Program()
{
    lex.GetNextToken();
        if (lex.InternalCode == TokenTable.UNIT)
        {
            lex.GetNextToken();
            ProgIdentifier();
            if (lex.InternalCode == TokenTable.SEMICOLON)
            {
                lex.GetNextToken();
                Block();
                if (parseErrors)
                {
                    //Drop out into Statement Level Parsing
                    //Statement Level Parsing just calls Statement() for <statement>
                    //until you have gone through the entire input.
                    //The point is to avoid getting many errors if you are missing a
                    //single token.
                    StatementLevelParse();
                }
                if (lex.InternalCode == TokenTable.PERIOD)
                {
                    lex.GetNextToken();
                    if (lex.EndOfFile)
                    {
                        if (!parseFailed)
                        {
                            //Success
                            echo("Success");
                        }
                        else
                        {
                            echo("Parse Failed");
                        }
                    }
                    else
                    {
                        Error(lex.CurrentLine, 200, false, "Expected End Of File: Found " + lex.NextSymbol);
                    }
                }
                else
                {
                    //Fail. Expected $PERIOD
                    Error(lex.CurrentLine, 200, false, "Expected \".\": Found " + lex.NextSymbol);
                }
            }
            else
            {
                //Fail. Expected $SEMICOLON
                Error(lex.CurrentLine, 200, false, "Expected \";\": Found " + lex.NextSymbol);
            }
        }
        else
        {
            //Fail. Expected $UNIT
            Error(lex.CurrentLine, 200, false, "Expected \"UNIT\": Found " + lex.NextSymbol);
        }
        EchoOutput("LEAVING PROGRAM");
        return 0;
} 
```

我现在看到要阅读的内容很多。我不确定这是否是您的讲师希望您采用的方法，但如果您了解您的语言，我发现它非常简单且易于实施。我不保证这是最有效或最有效的方法，只是我被要求使用的方法。

我真的希望我能正确理解你的问题......

# asp.net - 如何在 asp.net Web 表单中使用 Ninject v3？

> ID：15599151
> 
> 赞同：0
> 
> 时间：2013-03-24T13:41:16.530
> 
> 标签：asp.net, ninject, ninject.web

我正在尝试在基于 Jason 答案的 asp.net webforms 应用程序中使用 ninject 版本 3

[如何在 asp.net Web 窗体上实现 Ninject 或 DI？](https://stackoverflow.com/questions/4933695/how-can-i-implement-ninject-or-di-on-asp-net-web-forms/6121250)

但它不工作？

```
public class Global : NinjectHttpApplication
    {
........
protected override IKernel CreateKernel()
        {
            IKernel kernel = new StandardKernel(new NinjectWebCommon());
            return kernel;
        }
    }

public class NinjectWebCommon : NinjectModule
    {

        public override void Load()
        {
            Bind<IProductRepository>().To<EFProductRepository>();
        }
    } 
```

当我开始调试从未调用过的 CreateKernel 时，我在页面中收到一个异常 NullReferenceException，这意味着没有发生注入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:17:31.753

我得到它的工作我删除了 global.asax 文件，因为我不需要并添加 NinjectWebCommon.cs 删除了 ninject 的引用并从 nuget （Ninject - Ninject.Web）再次添加它们并在 App_Start/NinjectWebCommon.cs 中添加了我的绑定

```
private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<IProductRepository>().To<EFProductRepository>();
        } 
```

在我使用的页面中

```
[Inject]
        public IProductRepository Repository { get; set; } 
```

并为我工作。

# grails - 缺少依赖项 - Grails

> ID：15599154
> 
> 赞同：0
> 
> 时间：2013-03-24T13:41:29.390
> 
> 标签：grails, grails-plugin, grails-2.1

我收到这样的错误

```
| Loading Grails 2.1.4
| Configuring classpath.
| Environment set to development.....
| Packaging Grails application.....
| Compiling 2 source files.....
| Error Error: The following plugins failed to load due to missing dependencies: [cacheHeaders]
- Plugin: cacheHeaders
   - Dependencies:
       - controllers (Required: 1.1 > *, Found: 2.1.4) 
       ! logging (Required: 1.1 > *, Found: Not Installed) [INVALID] 
```

我正在使用 Grials 2.1.4 添加插件后 cache-1.0.1 cache-hearders -1.5.1 我遇到了上述错误。

在 Grails 文档中，它说这些也将支持 Grails 2.1。Grails 版本：1.2 > * -- 我理解这个意思是，它也支持到 2.1.4。请参考：[http ://grails.org/plugins/search?q=cache-headers](http://grails.org/plugins/search?q=cache-headers)

```
else could you please refer any references to do "**cached-resourses in 2.1.4**". 
```

但我做了一个示例 Grails(2.1.4) 应用程序并添加了相同的插件。它运行良好。

我的示例应用程序：

```
APPLICATION STATUS
App version: 0.1
Grails version: 2.1.4
Groovy version: 1.8.8
JVM version: 1.7.0_15
Reloading active: true
Controllers: 1
Domains: 0
Services: 3
Tag Libraries: 13

INSTALLED PLUGINS
logging - 2.1.4
core - 2.1.4
codecs - 2.1.4
i18n - 2.1.4
urlMappings - 2.1.4
dataSource - 2.1.4
controllers - 2.1.4
servlets - 2.1.4
mavenPublisher - 0.8.1
resources - 1.1.6
webxml - 1.4.1
databaseMigration - 1.3.2
cacheHeaders - 1.1.5
jquery - 1.8.3
tomcat - 2.1.4
groovyPages - 2.1.4
domainClass - 2.1.4
filters - 2.1.4
converters - 2.1.4
mimeTypes - 2.1.4
scaffolding - 2.1.4
hibernate - 2.1.4
validation - 2.1.4
services - 2.1.4
cache - 1.0.1 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:29:46.833

在第一个应用程序中，错误似乎与缺少日志插件有关：

```
! logging (Required: 1.1 > *, Found: Not Installed) [INVALID] 
```

在工作应用程序中，您正在使用日志记录 2.1.4：

```
INSTALLED PLUGINS
logging - 2.1.4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:10:45.207

我解决了，

```
 commented this line in BuildConfig.groovy

   //excludes   "grails-plugin-log4j" 
```

它工作正常，但我不知道很多细节。我的老板建议了。感谢我的老板。

# django - Django 正确的运算符用于运行总计

> ID：15599155
> 
> 赞同：0
> 
> 时间：2013-03-24T13:41:29.723
> 
> 标签：django

我正在尝试在我可以使用的 var 中获取所有 item.estimated_cost 的所有总数...

```
 batches = Batch.objects.for_user_pending(request.user)
    total_estimated_cost = 0
    for item in batches:
        total_estimated_cost =+ item.estimated_cost 
```

但我收到了这个错误：

**一元+的错误操作数类型：'instancemethod'**

**模型方法 **

```
def estimated_cost(self):
        return len(self.content) / 160 + 1 * self.group.contact_set.count() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:17:37.547

```
def estimated_cost(self):
    return (int(len(self.content)) / 160) + (1 * int(self.group.contact_set.count()))

batches = Batch.objects.for_user_pending(request.user)
total_estimated_cost = 0
for item in batches:
    total_estimated_cost += item.estimated_cost() 
```

# java - 有没有办法在 Eclipse 中找到隐式类型转换的所有位置？

> ID：15599157
> 
> 赞同：1
> 
> 时间：2013-03-24T13:41:31.193
> 
> 标签：java, android, eclipse

有没有办法在具有数万行 Android Java 代码的 Eclipse 工作区中找到隐式类型转换的所有位置？

例如，我想找到字节隐式转换为整数的所有位置。

我正在考虑使用 Preferences > Java > Error/Warnings 为隐式类型转换生成错误或警告，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:52:45.127

> For example, I want to find all the location where bytes are converted to integers implicitly.

AFAIK, no.

> I want to find all the location where bytes are converted to integers implicitly.

I think I would start by looking carefully at all places where you use variables which have type `byte` or a `byte` array type. And then look at all places where you call a method that returns `byte`.

# c# - 我可以在更改状态之前清除上一个屏幕中的按钮吗？

> ID：15599159
> 
> 赞同：0
> 
> 时间：2013-03-24T13:41:40.157
> 
> 标签：c#, xna

我正在用 Xna 用 C# 构建一个游戏。当我在菜单和播放屏幕之间更改游戏状态时，就好像新屏幕刚刚绘制在新屏幕上一样。当我点击前一个屏幕上按钮所在的屏幕部分时，它会改变状态，如果我在第一级并点击第二级按钮在前一个屏幕上的屏幕部分，它会直接跳转到水平2.

这是我第一个菜单按钮类的代码：

```
 class menubutton1
{
    public bool selected = false;
    public string text = "menuButton";

    public Rectangle area;

    public menubutton1(Rectangle Area, string Text, int i) 
    { 
        area = Area; 
        text = Text;
        i = 4;
    }

    public void mouseOver(MouseState mbd)
    {
        //CHECK IF MOUSE IS OVER BUTTON
        if (mbd.X > area.X && mbd.X < area.X + area.Width && mbd.Y > area.Y && mbd.Y > area.Y + area.Height)
        {
            selected = true;
        }
        else { selected = false; }
    }

    public void Draw(SpriteBatch spriteBatch, SpriteFont font)
    {
        if (selected == false) 
        {
            spriteBatch.DrawString(font, text, new Vector2(area.X, area.Y), Color.Black);
        }
        if (selected == true) 
        {
            spriteBatch.DrawString(font, text, new Vector2(area.X, area.Y), Color.White);
        }
    }

}
} 
```

这是主要的代码：

```
 List<menubutton1> mbs1 = new List<menubutton1>(); 
```

这是来自更新方法：

```
 foreach (menubutton1 m in mbs1)
        {
            m.mouseOver(mbd);
            //Check if play button has been clicked
                if (m.text == "PLAY GAME 1" && m.selected == true && mbd.LeftButton == ButtonState.Pressed && prevmbd.LeftButton == ButtonState.Released)
                {
                    gamestate = gameState.play1;
                }
                if (m.text == "PLAY GAME 2" && m.selected == true && mbd.LeftButton == ButtonState.Pressed && prevmbd.LeftButton == ButtonState.Released)
                {
                    gamestate = gameState.play2;
                }
                if (m.text == "PLAY GAME 3" && m.selected == true && mbd.LeftButton == ButtonState.Pressed && prevmbd.LeftButton == ButtonState.Released)
                {
                     gamestate = gameState.play3;
                }

        } 
```

有没有办法阻止这种情况发生？在更改状态以移动到新屏幕之前，有没有办法从上一个屏幕清除按钮？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T01:13:04.193

取决于你想如何设置它。一种方法是使用 GraphicsDevice.Clear(Color.Black); 这会给您留下一个可以绘制的黑屏。另一种方法是创建多个类，并且当它更改 GameStates 时，使其从特定类加载 Draw，该类只会绘制该类中的内容。

# c - 将链表拆分为另外两个列表，一个具有奇数索引，另一个具有偶数索引

> ID：15599160
> 
> 赞同：0
> 
> 时间：2013-03-24T13:41:43.983
> 
> 标签：c, linked-list

该问题要求编写一个函数 split() 将链表的内容复制到另外两个链表中。该函数将具有偶数索引（0,2 等）的节点复制到 EvenList，将具有奇数索引的节点复制到oddList。不应修改原始链表。假设 evenlist 和oddlist 将作为空列表传递给函数（*ptrEvenList = *ptrOddList = NULL）。

在我的程序中，它可以显示初始列表。虽然其他两个列表有问题。它会导致程序终止。

```
#include<stdio.h>
#include<stdlib.h>

#define SIZE 9 
```

// 定义节点列表的结构

```
typedef struct node{
    int item;
    struct node *next;
}ListNode; 
```

//调用函数

```
int search(ListNode *head,int value);
void printNode(ListNode *head);
void split(ListNode *head,ListNode **OddList,ListNode **EvenList); 
```

//主功能

```
int main(){
    ListNode *head=NULL;
    ListNode *temp;
    ListNode *OddList=NULL;
    ListNode *EvenList=NULL; 
```

//在问题中，它要求我将两个空列表传递给函数'slipt'

```
 int ar[SIZE]={1,3,5,2,4,6,19,16,7};
    int value=0;
    int i;

    head=(struct node*)malloc(sizeof(ListNode));
    temp=head;
    for(i=0;i<SIZE;i++){
        temp->item=ar[i];
        if(i==(SIZE-1))  //last item
            break;
        temp->next=(struct node*)malloc(sizeof(ListNode));
        temp=temp->next;
    }
    temp->next=NULL;
    printf("Current list:");
    printNode(head);

    split(head,&OddList,&EvenList);

return 0;
} 
```

********** !!!!!!!!! 我认为问题出在这部分。**

 **```
void split(ListNode *head,ListNode **ptrOddList,ListNode **ptrEvenList){
    int remainder;
    ListNode *tempO,*tempE,*temp;

    if (head==NULL)
        return;
    else{
        temp=head;

        *ptrOddList=(struct node*)malloc(sizeof(ListNode));
        *ptrEvenList=(struct node*)malloc(sizeof(ListNode));

        tempO=*ptrOddList;
        tempE=*ptrEvenList;

        while(temp!=NULL){
            remainder=temp->item%2;

            if(remainder==0){
                tempE->next=(struct node*)malloc(sizeof(ListNode));
                tempE->item=temp->item;
                tempE=tempE->next;
            }
            else{
                tempO->next=(struct node*)malloc(sizeof(ListNode));
                tempO->item=temp->item;
                tempO=tempO->next;
            }
            temp=temp->next;
        }
        tempE=NULL;
        tempO=NULL; 
```

// 我也试过了`tempE->next=NULL;`，`tempO->next=NULL` 如果我像上面那样修改它，程序可以运行，但是显示的最后两个数字将是两个随机数。

```
 printf("Even List:");
        printNode((*ptrEvenList));
        printf("Odd List:");
        printNode((*ptrOddList));
    }
} 
```

* * *

//用于打印结果的函数

```
void printNode(ListNode *head){
    if (head==NULL)
        return;
    while(head!=NULL){
        printf("%d ",head->item);
        head=head->next;
    }
    printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:35:18.323

```
void split(ListNode *head, ListNode **ptrOddList, ListNode **ptrEvenList){

    for( ; head ;  head= head->next) {
        ListNode *temp;

        temp = malloc(sizeof *temp );
        memcpy (temp, head, sizeof *temp);

        if (temp->item %2) { *ptrOddList = temp; ptrOddList = &temp->next;}
        else  { *ptrEvenList = temp; ptrEvenList = &temp->next;}
        }

    *ptrOddList = NULL;
    *ptrEvenList = NULL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:49:33.607

您总是过早地分配节点。请注意，一开始您总是为两个列表分配一个节点——但是如果列表中没有奇数怎么办？那么此时您的列表已经太长了。每次分配新节点时，您都​​会继续这样做。

您需要做的是为每个列表保留一个指向节点的*指针。*这将是指向列表中最后一个节点的“下一个”指针的指针，或者如果列表为空，则指向列表头的指针。下一个指针和列表指针都应该以 NULL 开始。

当你分配一个新节点时，设置最后一个“next”指针指向你的新节点，使用你的pointer-to-pointer-to-node。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T17:47:59.870

我认为这里的问题是根据索引将列表分成两半。但我可以在`values(item%2)`.

所以在列表中，第一个节点的索引应该是 1，第二个节点的索引应该是 2，依此类推。

使用计数变量，最初设置为 0。

```
int node_count = 0;
while(head != NULL)
{
  node_count ++;

  if(node_count%2)
  {
       //prepare odd_list;
  }
  else
  {
       //prepare even_list;
  }
  head = head->next;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T02:20:40.303

```
void split(ListNode *head,ListNode **ptrOddList,ListNode **ptrEvenList){
int remainder;
int countO=0;
int countE=0;
ListNode *tempO,*tempE;

if (head==NULL)
    return;
else{
    (*ptrOddList)=(struct node*)malloc(sizeof(ListNode));
    (*ptrEvenList)=(struct node*)malloc(sizeof(ListNode));

    while(head!=NULL){
        remainder=head->item%2;

        if(remainder==0){
            if(countE>0){
                tempE->next=head;
                tempE=tempE->next;
            }
                            else
                                tempE=*ptrOddList;
            tempE->item=head->item;
            countE++;

        }
        else{
            if(countO>0){
                tempO->next=head;
                tempO=tempO->next;
            }
                            else
                                tempO=*ptrOddList;
            tempO->item=head->item;
            countO++;

        }
        head=head->next;
    }
    tempE->next=NULL;
    tempO->next=NULL;
    printf("Even List:");
    printNode((*ptrEvenList));
    printf("Odd List:");
    printNode((*ptrOddList));
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T14:24:09.693

```
void split(ListNode *head, ListNode **pOddList, ListNode **pEvenList) 
{
    int remainder;
    ListNode *tmpO = NULL, *tmpE= NULL, *tmp;

    if (head == NULL)
    {
        *pEvenList = NULL;
        *pOddList = NULL;
    }
    else 
    {
        tmp = head;

        while (tmp != NULL) 
        {
            remainder = tmp->item % 2;

            if (remainder == 0) 
            {
                if (tmpE == NULL)
                {
                    tmpE = tmp;
                    tmp = tmp->next;
                    *pEvenList = tmpE;
                    tmpE->next = NULL;
                }
                else
                {
                    tmpE->next = tmp;
                    tmp = tmp->next;
                    tmpE = tmpE->next;
                    tmpE->next = NULL;
                }
            }
            else 
            {
                if (tmpO == NULL)
                {
                    tmpO = tmp;
                    tmp = tmp->next;
                    *pOddList = tmpO;
                    tmpO->next = NULL;
                }
                else
                {
                    tmpO->next = tmp;
                    tmp = tmp->next;
                    tmpO = tmpO->next;
                    tmpO->next = NULL;
                }
            }   
        }
    }
} 
```**

# php - 比较 PHP 中的服务器日志日期

> ID：15599162
> 
> 赞同：0
> 
> 时间：2013-03-24T13:41:56.997
> 
> 标签：php, date

我正在寻找一个简单的程序，它会通过查看服务器日志来告诉我搜索引擎上次访问我网站上的任何页面的时间。

例如我可能有：

```
$date1 = 27/Jan/2013:19:17:12 -0700
$date2 = 27/Feb/2013:19:17:12 - 0700 
```

我想知道最后一次是 $date2 - 如何让 PHP 理解日期格式？我是否首先需要将其转换为 PHP 可以理解的格式？

提前感谢您的帮助。

克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:47:19.407

您可以使用[`strtotime()`](http://php.net/manual/en/function.strtotime.php)和比较时间戳

```
$date1 = '27/Jan/2013:19:17:12 - 0700';
$date2 = '27/Feb/2013:19:17:12 - 0700';
if(strtotime($date1) > strtotime($date2))
    echo $date1;
else
    echo $date2;

// outputs 27/Feb/2013:19:17:12 - 0700 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:50:34.877

strtotime() 将达到您的目的..它将字符串中的日期转换为时间戳，然后您可以进行比较。

```
<?php

$date1 = '27/Jan/2013:19:17:12 - 0700';
$date2 = '27/Feb/2013:19:17:12 - 0700';
if(strtotime($date1) > strtotime($date2))
 echo "$date1 is after $date2";
else
 echo "$date2 is after $date1"; 
```

# windows-8 - Windows 商店应用程序编程中 3d 向量的分量乘法

> ID：15599167
> 
> 赞同：0
> 
> 时间：2013-03-24T13:42:42.910
> 
> 标签：windows-8, directx, windows-store-apps, directx-11, directxmath

如何对两个 3d 向量进行分量乘法？似乎MS在DirectXMath.h中没有提供这样的功能，微软在那里做什么？在旧的 SDK（DX 10/9）中，我可以直接将两个向量的乘积作为：

v3 = v1 * v2；

或将向量乘以标量，例如：

v2 = v1 * 1.0f；

但是现在，XMVECTOR 类型没有运算符 *，所以我不能这样做。所以我需要手动制作产品

v3 = (v1.x * v2.x + v1.y * v2.y + v1.z * v2.z);

虽然没有那么难，但我认为 DirectXMath 应该提供这样一个基本功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:26:03.290

The dot product can be achieved with `XMVector*Dot` method. [MSDN link for dot3product](http://msdn.microsoft.com/ru-RU/library/windows/desktop/microsoft.directx_sdk.geometric.xmvector3dot%28v=vs.85%29.aspx).

And the good page exists on msdn with methods list: [MSDN](http://msdn.microsoft.com/ru-RU/library/windows/desktop/ff729728%28v=vs.85%29.aspx)

Also, I think that Microsoft didn't make operator* override because it is not clear which product this operator should use - dot or cross product.

# java - Java EE 应用程序的 Netbeans 资源管理

> ID：15599172
> 
> 赞同：0
> 
> 时间：2013-03-24T13:43:09.230
> 
> 标签：java, jakarta-ee, netbeans-7

我正在尝试将资源添加到 Netbeans 中的 Java Web 应用程序。

我遵循的过程是

1.  右键单击项目并创建一个新文件夹“MyResources”
2.  之后我添加了我的音频文件“a.mp3”。

现在，当我运行项目时，我在 Apache Tomcat Directory 即工作目录中看不到该资源。我也没有在 bin 文件夹中看到它。

将资源添加到 Web 应用程序的任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:45:04.457

尝试以下操作： 右键单击​​项目 | `Properties...`| `Build`|`Packaging`

您应该可以通过单击“ `Add File/Folder...`”按钮来添加资源。添加资源后，您将在生成的 WAR 中获得其路径。

但是，我强烈建议您使用[Maven](https://en.wikipedia.org/wiki/Apache_Maven)（或[Ant](https://en.wikipedia.org/wiki/Apache_Maven)）等构建工具来帮助您自动化构建并在应用程序中添加一些结构。

# c - SCTP 关联 3 流与 3 TCP 连接

> ID：15599173
> 
> 赞同：1
> 
> 时间：2013-03-24T13:43:12.300
> 
> 标签：c, tcp, sctp

我和我的一个朋友正在尝试实现这个简单的客户端-服务器应用程序。我们观察了性能，我们注意到，为了传输 3 个文件，单个 SCTP 关联 3-streamed 的性能远低于 3 个 tcp 连接。研究该理论，我们预计至少有相同的性能，总体而言，因为 SCTP 多流应该减少 tcp 开销。这是服务器：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netinet/sctp.h>
#include <arpa/inet.h>
#include <string.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/ioctl.h>
#include <sys/time.h>
#include <net/if.h>
#include <stdlib.h>
#include <time.h>
#include <sys/stat.h>
#include <fcntl.h>

int main(int argc, char** argv) {

int sockCli, sockServ, i, flags, res, scanned;

int one = open("files/first.txt",  O_RDONLY);
int two = open("files/second.txt",  O_RDONLY);
int three = open("files/third.txt",  O_RDONLY);

if(one < 0 || two < 0 || three < 0) {
    printf("Error on opening file\n");
    exit(1);
}

struct sockaddr_in client, server;

struct sctp_initmsg initmsg;

char buffer[1025];

sockServ = socket(AF_INET, SOCK_STREAM, IPPROTO_SCTP);

if(sockServ < 0) {
    printf("failed on creating socket\n");
    exit(1);
}

memset(&server, 0, sizeof(server));
memset(&client, 0, sizeof(client));

server.sin_family = AF_INET;
server.sin_addr.s_addr = htonl( INADDR_ANY );
server.sin_port = htons(35000);
int servSize = sizeof(server);

memset( &initmsg, 0, sizeof(initmsg) );
initmsg.sinit_num_ostreams = 3;
initmsg.sinit_max_instreams = 3;
initmsg.sinit_max_attempts = 2;
setsockopt(sockServ, IPPROTO_SCTP, SCTP_INITMSG, &initmsg, sizeof(initmsg) );

res = bind(sockServ, (struct sockaddr *)&server, sizeof(server));

if(res < 0) {
    printf("bind() failed\n");
    exit(1);
}

res = listen(sockServ, 5);

sockCli = accept(sockServ, (struct sockaddr*)&client, (socklen_t*)&servSize);

for(i=0; i<3; i++) {

    memset(buffer, 0, sizeof(buffer));

    if(i==0) {

        while((scanned = read(one, (void*)buffer, sizeof(buffer))) > 0) {
            sctp_sendmsg(sockCli, (void *)buffer, (size_t)strlen(buffer),
                         (struct sockaddr*)&client, (socklen_t)sizeof(client), 0, 0, 0 /* stream */, 0, 0 );
            memset(buffer, 0, sizeof(buffer));
        }

    }

    if(i==1) {

        while((scanned = read(two, (void*)buffer, sizeof(buffer))) > 0) {
            sctp_sendmsg(sockCli, (void *)buffer, (size_t)strlen(buffer),
                    (struct sockaddr*)&client, (socklen_t)sizeof(client), 0, 0, 1 /* stream */, 0, 0 );
            memset(buffer, 0, sizeof(buffer));
        }

    }

    if(i==0) {

        while((scanned = read(three, (void*)buffer, sizeof(buffer))) > 0) {
            sctp_sendmsg(sockCli, (void *)buffer, (size_t)strlen(buffer),
                    (struct sockaddr*)&client, (socklen_t)sizeof(client), 0, 0, 2 /* stream */, 0, 0 );
            memset(buffer, 0, sizeof(buffer));
        }

    }

}

close(sockCli);
close(sockServ);
close(one); close(two); close(three);
return 0;

} 
```

和客户：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netinet/sctp.h>
#include <arpa/inet.h>
#include <string.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/ioctl.h>
#include <sys/time.h>
#include <net/if.h>
#include <stdlib.h>
#include <time.h>

int main(int argc, char** argv) {

remove("first.txt");
remove("second.txt");
remove("third.txt");

FILE* files[3];

int i, flags, count0=0, count1=0, count2=0, res, received, sockCli;

struct sockaddr_in server;

struct sctp_sndrcvinfo sndrcvinfo;
struct sctp_event_subscribe events;
struct sctp_initmsg initmsg;

struct timeval begin, end;
int sec, usecs;

char buffer[1025];

char ipServer[32] = "127.0.0.1";
short int servPort = 35000;

sockCli = socket(AF_INET, SOCK_STREAM , IPPROTO_SCTP);

if(sockCli < 0) {
    printf("Error on creating socket\n");
    exit(1);
}

memset(&initmsg, 0, sizeof(initmsg));
initmsg.sinit_num_ostreams = 3;
initmsg.sinit_max_instreams = 3;
initmsg.sinit_max_attempts = 2;
res = setsockopt(sockCli, IPPROTO_SCTP, SCTP_INITMSG, &initmsg, sizeof(initmsg) );

if(res < 0) {
    printf("setsockopt() initmsg failed\n");
    exit(1);
}

memset(&events, 0, sizeof(events));
events.sctp_data_io_event = 1;
res = setsockopt(sockCli, SOL_SCTP, SCTP_EVENTS, (const void *)&events, sizeof(events) );

if(res < 0) {
    printf("setsockopt() events failed\n");
    exit(1);
}

memset(&server, 0, sizeof(server));
server.sin_family = AF_INET;
inet_pton(AF_INET, ipServer, &server.sin_addr);
server.sin_port = htons(servPort);
int servSize = sizeof(server);

for(i=0; i<3; i++) {

    if(i==0)
        files[i] = fopen("first.txt", "a+");
    if(i==1)
        files[i] = fopen("second.txt", "a+");
    if(i==2)
        files[i] = fopen("third.txt", "a+");
}

res = connect(sockCli, (struct sockaddr*)&server, sizeof(server));

if(res < 0) {
    printf("connect() failed\n");
    exit(1);
}

gettimeofday(&begin, NULL);

while(1) {

    memset(buffer, 0, sizeof(buffer));
    received = sctp_recvmsg(sockCli, (void*)buffer, sizeof(buffer), (struct sockaddr*)&server, (socklen_t*)&servSize, &sndrcvinfo, &flags);

    if(received == 0) {
        printf("Received 0 bytes, all streams ended\n");
        break;
    }

    if(sndrcvinfo.sinfo_stream == 0) {
        fprintf(files[0], "%s", buffer);
        count0++;
        memset(buffer, 0, sizeof(buffer));
        continue;
    }

    if(sndrcvinfo.sinfo_stream == 1) {
        fprintf(files[1], "%s", buffer);
        count1++;
        memset(buffer, 0, sizeof(buffer));
        continue;
    }

    if(sndrcvinfo.sinfo_stream == 2) {
        fprintf(files[2], "%s", buffer);
        count2++;
        memset(buffer, 0, sizeof(buffer));
        continue;
    }

}

gettimeofday(&end, NULL);

close(sockCli);

for(i=0; i<3; i++)
    fclose(files[i]);

sec = end.tv_sec - begin.tv_sec;

if (end.tv_usec > begin.tv_usec)
    usecs = end.tv_usec - begin.tv_usec;
else
    usecs = begin.tv_usec - end.tv_sec;

printf("Time elapsed is %d,%d\n", sec, usecs);
printf("Received\n%d messages on stream 0\n%d messages on stream 1\n%d messages on stream 2\n", count0, count1, count2);
return 0;

} 
```

也许我们正在以一种糟糕的方式使用 stcp_() API 或其他一些错误。这似乎是我们唯一正确的方法，因为我们读到多流服务器应该是一个迭代服务器，这就是我们所做的。有一种特殊的额外类型的套接字，称为 SOCK_SEQPACKET 用于一对多样式，但我们不清楚如何使用它，因为没有示例。这可能是关键吗？那么，您能否就如何实现一个好的多流 SCTP 应用程序给我们一些建议？

# java - 如何将 PointerByReference 地址传递给 JNA 中的结构

> ID：15599175
> 
> 赞同：1
> 
> 时间：2013-03-24T13:43:22.693
> 
> 标签：java, structure, jna, jnaerator

我会对以下来源有疑问，我对其进行了简化以使其更容易理解。

c代码

```
struct test
{
int test1;
};

int create_context(test **context); 
int use_context(test *context); 
```

爪哇代码

```
public static class test extends Structure {
    public int test1;
    public test() {
        super();
    }
    public test()(Pointer p) {
        super(p);
    }
    protected List getFieldOrder() {
        return Arrays.asList("test1");
    }
    public test(int test1) {
        super();
        this.test1 = test1;
    }
    public static class ByReference extends test implements Structure.ByReference {

    };
    public static class ByValue extends test implements Structure.ByValue {

    };
}
public static native int create_context(PointerByReference context);
public static native int use_context(TestLibrary.test context); 
```

我像这样访问java中的结构，

```
 PointerByReference contextPointer = new PointerByReference();
    int status = INSTANCE.create_context(contextPointer);
    test context = new test(contextPointer.getValue());
    status = INCTANCE.use_context(context); 
```

当我在 Visual Studio 中调试它时，我已经看到，对于 create_context 和 use_context 使用了不同的内存地址。当我设置 int test1 值时，它是正确的，但我想知道，为什么上下文的地址不同。有人有想法吗？这不会导致内存问题吗？或者任何想法我做错了什么？谢谢瓦伦蒂娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:11:58.797

您选择了通常使用的约定`struct test*`，因此我们将使用它。

您的本机代码需要如下所示：

```
int create_context(struct test **context) {
    *context = (struct test *)malloc(sizeof(test));
    // initialize here...
    return 0;
} 
```

当你调用 时`create_context`，你必须传入一个指针*的地址*：

```
struct test* test_ptr;

create_context(&test_ptr);

test_ptr->some_field = ...; // operate on your struct via pointer 
```

当您使用按值 ( `struct test`)、按引用 ( `struct test*`) 或引用地址( ) 的结构时，保持直截了当很重要`struct test**`。无论您使用 C 还是 Java，概念都是相同的。

# c# - 如何从 list<> 中删除旧项目以进行新的应用程序运行

> ID：15599182
> 
> 赞同：0
> 
> 时间：2013-03-24T13:44:10.057
> 
> 标签：c#, asp.net

在我的页面中，我上传文件，然后将它们保存在数据库中。我有 2 个按钮；一个用于上传，另一个用于保存。当我上传文件时，我将它们保存在变量中

```
public static List<upload> files = new List<upload>(); 
```

我添加了下面的代码来上传按钮点击：

```
files.Add(new upload(FileName,contenttype,bytes)); 
```

现在当按下保存按钮保存到数据库时

```
foreach (var file in files)
{
    ProjDocAttach prjd = new ProjDocAttach();
    prjd.ProjDocID = _Projectid;

    prjd.Data = file.FileBytes;
    prjd.FileName = file.Name;
    prjd.ContentType = file.Filetype;

    _DataContext.ProjDocAttaches.InsertOnSubmit(prjd);
    _DataContext.SubmitChanges();
} 
```

当这是我第一次运行时，我没有问题，但如果是第二次或更多，之前运行的所有旧上传文件都将添加到数据库中。

请帮助我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:47:02.007

只需这样做：

```
files.Clear(); 
files.Add(new upload(FileName,contenttype,bytes)); 
```

# css - codeigniter的分页css不起作用

> ID：15599183
> 
> 赞同：0
> 
> 时间：2013-03-24T13:44:14.253
> 
> 标签：css, codeigniter, pagination

**注意**：我刚刚意识到我的 CSS 有问题，浏览器只能查看我的旧 CSS（意味着我无法编辑我的 CSS）。怎么了？

我尝试按照本[教程](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-day-7-pagination/)进行操作，但我没有做与视频完全相同的事情。

我想编辑我的`pagination`链接的外观（使用`codeigniter`）。这是控制器代码：

```
//pagination
    $config['base_url'] = site_url('/backend/umat/');
    //$config['base_url'] ='http://localhost/ci_gabdb/index.php/backend/umat/';
    $config['total_rows'] = $this->backend_m->count_umat();
    $config['per_page'] = 10; 
    $config['uri_segment'] = 3;
    $config['full_tag_open'] = '<div id="pagination">';
    $config['full_tag_close'] = '</div>';

    $this->pagination->initialize($config); 

    $data['pagination'] = $this->pagination->create_links(); 
```

请注意，我已经使用`full_tag_open`and `full_tag_close`。我还尝试`<div>`在 html 中手动插入标签，但它们都不起作用。

这是我的`css`代码：

```
#pagination a {
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 10px;
    color: #292929;
    text-decoration: none;
    background: #e3e3e3;
    border: 1px solid #000;
    padding: 4px 7px;
} 
```

我认为分页css应该可以正常工作，但事实并非如此。我的错误在哪里？感谢：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:56:46.230

这就是我正在使用的：

```
 // pagination code
    $config = array();
    $config["base_url"] = base_url() . "/themes/all";
    $config["total_rows"] = $this->auth_model->record_count();
    $config["per_page"] = 30;
    $config["uri_segment"] = 3;
    $choice = $config["total_rows"] / $config["per_page"];
    $config["num_links"] = round($choice);
    $config['full_tag_open'] = '<div class="pagination pagination-large"><ul>';
    $config['full_tag_close'] = '</ul></div>';
    $config['first_link'] = false;
    $config['last_link'] = false;
    $config['first_tag_open'] = '<li>';
    $config['first_tag_close'] = '</li>';
    $config['prev_link'] = '«';
    $config['prev_tag_open'] = '<li class="prev">';
    $config['prev_tag_close'] = '</li>';
    $config['next_link'] = '»';
    $config['next_tag_open'] = '<li>';
    $config['next_tag_close'] = '</li>';
    $config['last_tag_open'] = '<li>';
    $config['last_tag_close'] = '</li>';
    $config['cur_tag_open'] =  '<li class="active"><a href="#">';
    $config['cur_tag_close'] = '</a></li>';
    $config['num_tag_open'] = '<li>';
    $config['num_tag_close'] = '</li>';

    $this->pagination->initialize($config);

    $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
    $data["themes"] = $this->auth_model->fetch_themes_total($config["per_page"], $page);
    $data["links"] = $this->pagination->create_links();
    // pagination ends here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:10:59.423

您所拥有的是浏览器缓存问题。有几个解决方案，在任何浏览器中按几次 CTRL + F5 将强制完全刷新站点。还有其他方法可以强制 CSS 刷新。一种是将查询字符串附加到代码中的 CSS，我在开发中使用的是这样的：

```
 <link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/css/main.css?time=<?php echo filemtime('./assets/css/main.css');?>" /> 
```

这样做是在 css 的末尾附加一个查询字符串并随时间变化，所以每次我加载页面时，我的浏览器都会认为它是 CSS 的新版本并重新加载它。

您还可以告诉您的浏览器在每次访问时重新加载整个页面，此设置在所有浏览器中都不同，但在 Chrome 中

设置 > 高级设置 > 更改代理设置 > 常规选项卡 > 浏览器历史记录设置 > 临时 Internet 文件将单选按钮更改为每次加载网页时。

# shapefile - GeoTools 可路由的形状文件

> ID：15599184
> 
> 赞同：2
> 
> 时间：2013-03-24T13:44:17.403
> 
> 标签：shapefile, geotools

你好亲爱的地理工具开发人员。几周前我发现了 Geo Tools，发现它非常有趣。但是，由于我是全新的，所以我有一个问题。我尝试使用roads.shp 文件来计算此处建立的两点之间的路线：[OpenStreetMap Shapefiles](http://www.geofabrik.de/data/shapefiles.html) (Section **Routable Shapefiles** )。它工作正常。但要适用于任何其他地区，我需要拥有可路由的 Shapefile。有一种免费的方法可以找到具体位置的形状文件，但它们不是可路由的。所以我的问题是：如何从一般的形状文件中制作一个可路由的形状文件，或者在哪里准备好可路由的形状文件？

# android - 从主干构建 OpenCV4Android

> ID：15599185
> 
> 赞同：2
> 
> 时间：2013-03-24T13:44:17.470
> 
> 标签：android, eclipse, opencv

我现在正在开发一个应用程序，并计划通过 jni 方法使用本机 OpenCV 库。参考本教程作为我的环境。

[http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html)

要使用 OpenCV 的非自由模块，例如 SurfFeatureDetector，我必须自己构建 opencv 并使用 OpenCV 网站上的教程：

[http://code.opencv.org/projects/opencv/wiki/Building_OpenCV4Android_from_trunk](http://code.opencv.org/projects/opencv/wiki/Building_OpenCV4Android_from_trunk)

当我按照教程（Windows 本机部分）中的步骤并想要运行脚本 cmake_android.cmd 来编译它们时，我收到如下错误消息：

```
In file included from E:\git\opencv\3rdparty\libtiff\tif_stream.cxx:30:
E:\git\opencv\3rdparty\libtiff\/tiffiop.h:54:21: error: search.h: No such file or directory
make[2]: *** [3rdparty/libtiff/CMakeFiles/libtiff.dir/tif_stream.cxx.o] Error 1
make[1]: *** [3rdparty/libtiff/CMakeFiles/libtiff.dir/all] Error 2
make: *** [all] Error 2 
```

有什么办法可以解决这个问题或让我能够在 Android 应用程序中使用带有非自由模块的原生 OpenCV 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T19:20:42.353

如果你只是想在 nonfree 模块中使用 SIFT 或 SURF，你不需要重建整个 opencv 包。您只能将非自由模块构建为独立库并在您的项目中使用它。本[教程](https://sites.google.com/site/wghsite/technical-notes/sift_surf_opencv_android)将为您提供有关如何执行此操作的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T15:50:37.647

我也遇到了这个问题。我的解决方法是安装最新版本 2.4.5 ，然后按照教程进行操作。1.下载干净的2.4.5版本并解压。2.按照教程。 [http://code.opencv.org/projects/opencv/wiki/Trunk_OpenCV_for_Android](http://code.opencv.org/projects/opencv/wiki/Trunk_OpenCV_for_Android)

这修复了您提到的错误。之后我又遇到了另一个错误，我现在不记得它是什么了，但是我看到了错误在哪里，我用 2.4.2 版脚本中的行替换了该行，就是这样（它们之间的差异很小)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T08:01:17.180

编译器 Opencv4android，libtiff 默认打开。您可以关闭它以编译 sdk，因为它是第三方的。search.h 在 NDK 目录中不存在，但系统路径 usr/include/ 有一个，所以你编译 linux 或 mac 的源代码，它工作正常。

解决方法： 1、vi CMakeList.txt 2、搜索“TIFF”,/TIFF

编辑

OCV_OPTION(WITH_TIFF "包括 TIFF 支持" ON IF (NOT IOS) )

至

OCV_OPTION(WITH_TIFF "包括 TIFF 支持" OFF IF (NOT IOS) )

完毕！

# c# - 用户动态运行方法和创建对象

> ID：15599187
> 
> 赞同：1
> 
> 时间：2013-03-24T13:44:19.730
> 
> 标签：c#, .net, class, user-interface, methods

因此，有两个具有各种类和方法的 .NET 类库。

现在有一组静态操作。例如：

```
// Create and connect to device objects
classLibrary1.device objectDevice1 = new classLibrary1.device();
classLibrary2.device objectDevice2 = new classLibrary2.device();

// First Operation
objectDevice1.setSetting1(uiInput1.Text);
objectDevice1.doOperation1();

// Second Operation
// Create parameter object
classLibrary2.operationParam parameters = new classLibrary2.operationParam();
parameters.setParam1(uiInput2.Text);
parameters.setParam2(uiInput3.Text);
// Do operation with parameters
objectDevice2.doOperation1(parameters); 
```

所以用户可以在界面中输入某些参数，但操作是静态的。

目标是让用户使用以下操作构建自定义事件：

```
Set property on device1
Call method 'doOperation1' on device1
Create operationParameter 'parameter'
Set 'setParam1' on 'parameter' as '100'
Set 'setParam2' on 'parameter' as '200'
Call method 'doOperation1' on device2 with 'parameter'
Create operationParameter 'parameter2'
Set 'setParam1' on 'parameter2' as '500'
Set 'setParam2' on 'parameter2' as '600'
Call method 'doOperation1' on device2 with 'parameter2'
Call method 'doOperation2' on device1 
```

用户的可能选项是：

1.  运行一个向导，用户将选择事件的类型，设置参数，然后它将通过适当的操作构建事件。
2.  手动添加每个操作构建事件。
3.  首先使用向导构建，然后编辑事件以在生成的事件之间添加操作。

该界面将包括一个用于访问方法/属性的下拉列表，当用户从下拉列表中选择时，输入字段用于所需参数。我不知道是否有可能构建或实现一个解释器，以允许用户“编写”这样的事件。

大约有 40 种不同的方法，每种方法都有不同的属性或需要单独的参数对象。

构建此代码的最佳方法是什么？我已经能够通过创建一个包含“操作”对象列表的“事件”对象来反射设置属性。数据作为方法/属性名称和参数从 SQLite DB 中提取。由于它作为字符串在数据库中，因此我没有使用多个参数测试 Convert.ChangeType，因此方法目前无法正常工作。

```
 MethodInfo method = this.objectType.GetMethod(this.methodName);
        if (method != null)
        {
            object result = null;
            ParameterInfo[] paramInfo = method.GetParameters();
            if (paramInfo.Length == 0)
            {
                result = method.Invoke(instance, null);
            }
            else
            {
                result = method.Invoke(instance, parameters);
            }
        }
        else
        {                
            PropertyInfo pi = objectType.GetProperty(methodName);
            if (pi != null)
            {
                pi.SetValue(instance, Convert.ChangeType(parameters[0],pi.PropertyType), null);
            }
        } 
```

我更关心动态创建参数对象，并能够在方法中引用它们。IE：

```
// Create parameter object
classLibrary2.operationParam parameters = new classLibrary2.operationParam();
parameters.setParam1(uiInput2.Text);
parameters.setParam2(uiInput3.Text);
// Do operation with parameters
objectDevice2.doOperation1(parameters); 
```

有没有办法利用 .NET 库的公开方法，或者是否有必要为所有方法编写一个包装器。

我还没有找到类似的东西。任何帮助将不胜感激。

# php - mysql查询中的自定义php函数

> ID：15599188
> 
> 赞同：-2
> 
> 时间：2013-03-24T13:44:28.467
> 
> 标签：php, mysql, user-defined-functions, punctuation

我在下面的查询

### 工作查询

```
$sorgum = "SELECT kolon_etiketler, kolon_yazar, kolon_baslik, kolon_resim_baslik, kolon_resim_url, kolon_yazi, kolon_ytarihi FROM tb_yazilar WHERE kolon_statu = 'onay' AND kolon_yazar ='".tire_bosluk_olsun($_GET["rd_ozne"])."' AND kolon_baslik ='".tire_bosluk_olsun($_GET["rd_nesne"])."'  ORDER by kolon_onaytarihi DESC"; 
```

### 非工作查询

```
$sorgum = "SELECT kolon_etiketler, kolon_yazar, kolon_baslik, kolon_resim_baslik, kolon_resim_url, kolon_yazi, kolon_ytarihi FROM tb_yazilar WHERE kolon_statu = 'onay' AND kolon_yazar ='".tire_bosluk_olsun($_GET["rd_ozne"])."' AND noktalamasiz(kolon_baslik) ='".tire_bosluk_olsun($_GET["rd_nesne"])."'  ORDER by kolon_onaytarihi DESC"; 
```

### 顺便说一句，工作和非工作的区别

工作：`AND kolon_baslik = ...`
非工作：`AND noktalamasiz(kolon_baslik) = ...`

## 我的链接过程

1.  用户以正常的书面形式将文章标题输入数据库
2.  当页面链接文章时，使用文章的作者标题信息。普通书写形式被自定义功能覆盖，以删除标点符号并用破折号替换空格

## 我的目标

从地址栏，`$_GET['nesne']`来了。这是文章标题的没有任何标点符号的语法。空格字符也替换为破折号字符。
在我的 MySQL 表中，文章标题采用标准格式，带有标点符号和空格 btw 单词。
例如：
在我的 MySql 表中：**“John 的时钟在工作吗？”** ，它变成了 url 地址**“Is-Johns-Clock-Working”**

## 我的问题

我可以用非工作查询做些什么吗？我不能给它删除的标点符号，`$_GET['nesne']`所以**我需要比较 mysql 表中标题行的无标点符号状态的值和`$_GET['nesne']`**. 也许我走错了路，所以请引导我正确处理自动链接方式，允许用户在 mysql 表中输入标点标题和只有 1 个标题列。

## 编辑

**noktalamasiz** = 删除所有标点符号的自定义 php 函数。

**Tire-bosluk-olsun** = 用空格替换破折号。因此，如果我的第一个标题不包含任何标点符号，而只包含空格 btw 单词，那么我将没有困难，只使用工作 sql。

```
function tire_bosluk_olsun ($tireli)
{
$tireli = trim($tireli);
$tireli = str_replace('-',' ',$tireli);
return $tireli;
} 
```

```
function noktalamasiz($noktalamali) {
$noktalamali = trim($noktalamali);
$ara = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
$degistir = array('','','','','','','',' ','','','','','','','','','','','','','','','','','','','','','','',);
$noktalamali = str_replace($ara,$degistir,$noktalamali);
return $noktalamali;
} 
```

## 什么是非工作

如果我的查询涉及`noktalamasiz custom function`这样：`noktalamasiz(kolon_baslik)`; 然后我得到了空白屏幕，没有任何警告通知或错误。我正在使用 -1 错误级别。

## 整个相关的php代码

```
$sorgum = "SELECT kolon_etiketler, kolon_yazar, kolon_baslik, kolon_resim_baslik, kolon_resim_url, kolon_yazi, kolon_ytarihi FROM tb_yazilar WHERE kolon_statu = 'onay' AND kolon_yazar ='".tire_bosluk_olsun($_GET["rd_ozne"])."' AND noktalamasiz(kolon_baslik) ='".tire_bosluk_olsun($_GET["rd_nesne"])."'  ORDER by kolon_onaytarihi DESC";

if ($beyan = $db_baglanti->prepare($sorgum)) 
{

    /* execute statement */
    $beyan->execute();

    /* bind result variables */
    $beyan->bind_result($etiketler, $yazar, $baslik, $resim_baslik, $resim_url, $yazi, $ytarihi);

    /* fetch values */
    while ($beyan->fetch()) 
    {
        echo '<div class="sol-icerik-kapsar">'."\r\n";
        echo "\t".'<h1>'.$baslik.'</h1>'."\r\n";
        echo "\t".'<img class="mansetresim" width="120" height="160" src="'.sitenin_koku.'img/manset/'.$resim_url.'" alt="'.$resim_baslik.'" title="'.$resim_baslik.'" />'."\r\n";
        echo "\t".'<p><a href="'.sitenin_koku.'yazılar/'.bosluklar_tire_olsun($yazar).'">'.$yazar.'</a>'.' - '.turkcetarih('j F Y',$ytarihi).'</p>'."\r\n";
        echo "\t".'<p>'.$yazi.'</p>'."\r\n";
        echo "\t".'<p>'.$etiketler.'</p>'."\r\n";
        echo '</div>'."\r\n";
    }
    /* close statement */
    $beyan->close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:01:36.503

您不能在 mysql 查询中使用 php 函数。这不是它的工作原理。为了您的目的，我将创建一个新行，其中填充了您的 php 函数的输出`noktalamasiz()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:00:57.220

您无法在 MySQL 查询中运行“自定义 php 函数”。您应该在查询之外运行该函数，从中获取返回值，然后在查询中使用该值。所以你的查询应该是这样的：

```
$kolon_baslik = //get your field value first;

$sorgum = "SELECT kolon_etiketler, kolon_yazar, kolon_baslik, kolon_resim_baslik, kolon_resim_url, kolon_yazi, kolon_ytarihi FROM tb_yazilar WHERE kolon_statu = 'onay' AND kolon_yazar ='".tire_bosluk_olsun($_GET["rd_ozne"])."' AND " . noktalamasiz($kolon_baslik) . " ='".tire_bosluk_olsun($_GET["rd_nesne"])."'  ORDER by kolon_onaytarihi DESC" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T14:08:49.747

您需要在查询*之前*运行该函数，因为您正在做的事情是不允许的：

首先，运行一个 select 语句来获取 field `kolon_baslik`。接下来，使用您的函数清理输入：

```
$cleanInput = noktalamasiz($kolon_baslik); /* Assumed you've already gotten the value */ 
```

最后，使用清理后的输入运行您的查询：

```
$sorgum = "SELECT kolon_etiketler, kolon_yazar, kolon_baslik, kolon_resim_baslik, kolon_resim_url, kolon_yazi, kolon_ytarihi FROM tb_yazilar WHERE kolon_statu = 'onay' AND kolon_yazar ='".tire_bosluk_olsun($_GET["rd_ozne"])."' AND '" . $cleanInput . "' ='".tire_bosluk_olsun($_GET["rd_nesne"])."'  ORDER by kolon_onaytarihi DESC"; 
```

顺便说一句，你可以清理你的功能：

```
function noktalamasiz($noktalamali) {
$noktalamali = trim($noktalamali);
$ara = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
$noktalamali = str_replace($ara,'',$noktalamali);
return $noktalamali;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T14:10:07.607

首先， noktalamasiz 不是 mysql 函数，正如您所说的那样，它是一个 php 函数，因此不能将其称为字符串文字，而不仅仅是在 mysql 中，它适用于所有人。其次，您不能将任何聚合（或内置）mysql 函数与“WHERE”子句一起使用。

# jsf - Parent 不是 ActionSource 类型

> ID：15599191
> 
> 赞同：4
> 
> 时间：2013-03-24T13:44:44.747
> 
> 标签：jsf, parent, setpropertyactionlistener

当我单击表格行时，我想传递值：

```
<h:outputLink id="lnkHidden" value="DatacenterProfile.html" style="text-decoration:none; color:white;">
    <f:setPropertyActionListener target="#{DatacentersController.selectedId}" value="#{item.componentStatsId}" />
</h:outputLink> 
```

我收到此错误：

> <f:setPropertyActionListener> Parent 不是 ActionSource 类型，类型是：javax.faces.component.html.HtmlOutputLink@aa25b91

是否有任何合适的 JSF 标签可用于替换`<h:outputLink>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T14:31:08.443

`f:setPropertyActionLister`仅适用于和之类的[`ActionSource`](http://docs.oracle.com/javaee/7/api/javax/faces/component/ActionSource.html)组件。如果你想这样做，你应该使用其中之一。也可以看看`h:commandLink``h:commandButton`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:23:42.120

您是否希望您的 URL (href) 被保留，或者您只是希望它像一个按钮一样起作用？

1.  如果您希望保留 URL（显然是它的参数，因此您可以在其他选项卡等中打开它），只需使用`f:param`而不是`f:setPropertyActionLister`.
2.  如果丢失 URL 显示（没有显示有意义的 url），您可以按照 Chkal 所说的那样使用，`commandButton`或者`commndLink`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T18:08:24.500

除了@BalusC 答案。我在我的项目中使用过类似的东西。

```
<h:commandButton 
       id="" 
       styleClass="" 
       type="submit" 
       rendered="#{}" 
       value="#{}" 
       action="#{}"> 
       <f:setPropertyActionListener target="#{}" value="#{}" /> 
</h:commandButton> 
```

您可以根据您的场景传递/使用属性。

# java - 为什么在方法覆盖的情况下引用类型？

> ID：15599192
> 
> 赞同：0
> 
> 时间：2013-03-24T13:44:48.193
> 
> 标签：java, exception, overriding

我知道如果方法覆盖**对象**被检查而不是**类型**

```
class SuperException extends Exception {}
class SubException extends SuperException {}

class AnotherException extends Exception {}
class YetAnotherException extends Exception {}

class A {
  void play() throws SuperException, AnotherException {}
}
class Reduced extends A {
  void play() throws SuperException {} 
}
class Eliminated extends A {
  void play() {} 
}
class Narrower extends A {
  void play() throws SubException {}
}
class TestPolymorphism {
  public static void main(String[] args) {
    A obj = new Eliminated();
    obj.play();                         // Doubt 1
    Eliminated eobj = new Eliminated(); // Doubt 2
  }
} 
```

疑问1：为什么play()是从A类引用的？

疑问2：为什么会出现编译错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:51:12.140

1.  obj 是扩展 A 的 Eliminated 类型，因此它可以由 A 类型的变量引用。

2.  编译错误在 obj.play() 中，因为你没有捕捉到它抛出的异常。由于 obj 被声明为 A 类型，编译器希望您处理它可能抛出的 2 种异常类型。它不知道在实践中这些异常永远不会被抛出。如果您将 obj 声明为已消除，则错误将消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:57:29.617

对疑问1的回答：由于您有类型A的引用，编译器引用了类型引用的方法，即A类的play()方法。它在运行时被解析为实际的，即它属于Eliminated类。

疑点2：play方法抛出checked异常，需要调用方法处理。这里引用了A类的play()方法，它抛出了异常，因此应该处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:59:04.100

A 是超类，因此可以引用任何级别的子类对象。它将调用您提供的“消除”类的方法。

将 public static void main(String[] args) 行更新为 public static void main(String[] args) throws SuperException，AnotherException 将消除该异常，因为该异常是由 play 方法本身引发的。或者你必须在 main 方法中尝试 catch，因为它是检查异常，由编译器在编译时检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T13:50:35.617

[方法调用的运行时评估](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.4)

> 在运行时，方法调用需要五个步骤。首先，可以计算目标参考。其次，评估参数表达式。第三，检查要调用的方法的可访问性。第四，定位要执行的方法的实际代码。第五，创建新的激活帧，必要时进行同步，并将控制转移到方法代码。

# linux - 如何在 Linux 中使用 Plop Boot Manager 从 USB 启动？

> ID：15599199
> 
> 赞同：1
> 
> 时间：2013-03-24T13:45:28.850
> 
> 标签：linux, ubuntu, installation

我未能从 Ubuntu12.04 升级到 12.10，所以我决定重新安装 12.10。我的旧电脑**不支持从 USB 启动**，它的**cd-rom 坏了**。我知道***Plop Boot Manager***可以让我的电脑从 USB 启动。我知道如何在*Windows*中使用它，并且在我从 Win-XP 转移到 Ubuntu 12.04 时确实使用过它。但是现在，我不知道如何在*Linux*下使用它。

据我所知，尽管文档很长，但在 Windows 下使用 Plop 从 USB 启动就像双击*bat*文件一样简单。但是 linux 的 doc 并没有那么拘谨，它包含了一些令人生畏的术语，比如 LILO 是针对 Linux 新手的。更糟糕的是，我不是以英语为母语的人。

那么有人可以向我展示如何从 USB 启动的简短说明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T09:07:38.500

相当晚了，但请看看这是否可以帮助你： [https ://www.linux.com/learn/tutorials/445010:weekend-project-use-the-plop-boot-manager-to-boot-older-computers-从-usb](https://www.linux.com/learn/tutorials/445010:weekend-project-use-the-plop-boot-manager-to-boot-older-computers-from-usb)

# svn - SVN 标签作为变更请求的引用

> ID：15599200
> 
> 赞同：0
> 
> 时间：2013-03-24T13:45:30.923
> 
> 标签：svn

我以前问过这个问题，但现在有更多细节，所以再问一次。

我们有代码至少每两周发送一次到生产环境，作为审计的要求，所有的变更请求都应该有关于已经发送到生产环境的代码的信息。

变更管理团队提出了一种解决方案，即编写脚本以将 subversion 中存在的 SVN 标签导入 Clear Quest，以便创建变更请求的开发人员可以选择标签（从填充了所有标签的下拉列表中） ) 与此特定动作相关。

为了满足这个要求，我们被要求用变更请求编号标记每个版本，有效地创建许多带有 CQ 编号的标签，这对于我们正在处理的项目的配置管理显然没有用处。

**我的担忧是：**

> a) 是否可以仅出于带有代码的跟踪 URL 的目的创建这么多标签？当开发人员尝试从 IDE 或 tortoise svn 客户端浏览标签文件夹时，性能会不会有任何问题？
> 
> b) 是否可以在存储库上创建具有唯一修订版的回溯 URL，而无需指定它是在主干还是标签中。我们正在使用 VisualSVN 服务器。例如[http://abc.svn.com/myproject/p=100](http://abc.svn.com/myproject/p=100)这让我更改了修订版 100（或修订版 100 的整个源代码）。我想知道这是否有可能使用 VisualSVN 或任何其他工具来生成像[http://svn.apache.org/r1460019](http://svn.apache.org/r1460019)这样的 URL，最终会解析为该版本的分支/主干/标签路径。
> 
> c) 是否管理对 SVN 引用 URL 的要求，使用修订而不是标签更好地处理，如果您能提供一些使用 SVN 标签与修订的优缺点，我将不胜感激。**我确实明白标签只不过是命名的修订。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:49:26.703

我在这个发布管理中看到了一个小的（不相关的）问题：如果在发布周期中在代码中实现了超过单个 CR，你将如何标记发布？

回到你的问题：

> 是否可以仅出于带有代码的追溯 URL 的目的创建这么多标签？

是的

> 当开发人员尝试从 IDE 或 tortoise svn 客户端浏览标签文件夹时，性能会不会有任何问题？

*可能是*，在某些条件下（TSVN 的 RepoBrowser 中的“刷新树”）

> 是否可以在存储库上创建具有唯一修订的跟踪 URL 而无需指定它是在主干还是标签中

从技术上讲 - 是的：您为存储库的根而不是子树创建 URL，这是有效的修订 URL。

实际上和技术上 - 不。URL 的路径部分对于**仅选择子树的所需部分**很重要（在根目录下，您有很多数据的“廉价副本”，但它们仅在存储库中便宜，而不是在工作副本中） -*存储库根的修订 N*包括处于*修订状态 N的***所有分支和标签**

 *> 正在管理对 SVN 的引用 URL 的这一要求，使用修订而不是标签更好地处理

“这取决于......”但是，一般来说，没有。repo/trunk@100 并不比 repo/tags/CRN100 好或差，*只是不同*

**编辑**

对于 URL：您可以在存储库的 Web-Viewer (ViewVCS|WebSVN) 中使用任何*不错的 URL*，您可以通过 rewrite|redirects 和其他 Apache 的方法获得，但是这些 URL 可以用于任何颠覆操作：svn.apache。 org/r1460019 仅显示 1460019 中的眼睛变化（并且 Apache 将其重写为不太好的 svn.apache.org/viewvc?view=revision&revision=r1460019），但为了在 svn-client 中看到这种变化的差异必须知道`subversion/branches/1.7.x/STATUS`真实存储库中的真实 URL*

# javascript - JavaScript 数学百分比

> ID：15599204
> 
> 赞同：4
> 
> 时间：2013-03-24T13:46:12.917
> 
> 标签：javascript, html, math, percentage

我有一个元素需要删除它的一部分。

我已将原始价格存储为变量，并在获取百分比后使用另一个变量来计算价格。

这是HTML：

```
<div class="price">420.29</div> 
```

我想取消 8% 的折扣`.price`并将其固定到小数点后两位并将其存储为变量。

这是我到目前为止的JS：

```
var price = $(".price").html();
var priceafter = Math.round(price - price * 8 / 100).toFixed(2); 
```

`priceafter`返回为 387.00 而不是 386.66。

# 更新

感谢@datasage 指出我正在使用`Math.round`. 这就是我将其更改为的内容，并且似乎可以正常工作：

```
var price = $(".price").html();
var priceafter = (price - price * 8 / 100).toFixed(2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T13:49:59.723

使用`Math.round`会将您的结果四舍五入到最接近的整数。您可以使用`toFixed`将其正确四舍五入为 386.67

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:48:12.810

尝试这个：

```
var price = parseFloat($(".price").html()); 
```

# c++ - 用于在 C++ 中读取/写入文件的多线程？

> ID：15599206
> 
> 赞同：0
> 
> 时间：2013-03-24T13:46:15.333
> 
> 标签：c++, multithreading, file

我有一个关于`File`C++ 操作的非常基本的查询，如果这是一个非常愚蠢的问题，请原谅我。在我的应用程序中，我有`read/write files`. 我想知道是否可以*通过多线程处理来加速读/写操作。* 我有这个疑问，因为*CPU 可能性能更好*，但*硬盘可能性能更差*. 我有以下情况： 1\. 如果多个线程一次只进行读或写，而不是两者都进行怎么办？2\. 如果这里只考虑 1 个文件，即多个线程同时对同一个文件执行读/写，该怎么办？3\. 如果多个文件被多个线程读取/写入，只有一个线程负责一个文件怎么办？4\. 如果读写由2个不同的线程同时完成怎么办？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:22:31.923

多线程（和异步 i/o）是隐藏延迟的优化，而不是速度增强。多个线程同时访问单个文件可能不会给你带来太多好处。线程可以帮助您的地方是，如果您在等待文件操作完成时还想做一些其他工作（可能是一些用户交互）。它在您的一项操作被阻塞的地方最有用（例如您正在等待来自键盘/鼠标的用户输入，或者正在等待数据或连接到达网络套接字。）例如，您可能有一个与每个套接字关联的线程。

所以你的情况3：

> 如果多个文件由多个线程读取/写入，只有 1 个线程负责一个文件怎么办？

是我认为唯一有用的追求。然后只有当您确定在文件操作进行时还有其他事情需要做时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:51:23.307

您可能会提高速度，但线程会产生很多开销。您需要确保正在加载大量数据，否则线程间通信的开销会杀死您。

也就是说，使用各种异步文件 io 选项会好得多。它们大多是特定于平台的，但我相信 boost::asio 可以为你抽象出来......

# python - 生成 N*N 矩阵的高效算法

> ID：15599208
> 
> 赞同：1
> 
> 时间：2013-03-24T13:46:40.030
> 
> 标签：python, algorithm, collaborative-filtering

我正在做一个简单的协同过滤（CF）。这是一个项目到项目的CF。例如，我有一个包含 N 个项目的巨型字典，其中 key 是产品名称，value 是购买它们的客户列表：

```
d={
item1:[customer1,customer3,customer7], 
item2:[customer3, customer5],
...
itemN:[customerX...customerY]
} 
```

我还有一个小函数可以计算每个项目之间客户的相似度，例如**item1 vs item2**：

```
def littlefunction(...):

    #convert them to a set
    item1=set(d['item1'])
    item2=set(d['item2'])

    commonCustomer=item1.intersect(item2)
    totalCustomer=item1.union(item2)

    similarity=float(len(commonCustomer))/len(totalCustomer) 
```

为了获得指定的每个项目的最相似项目，我必须扫描并计算 N 次相似度然后排序。所以对于 N 个项目，复杂度是`O(N*N)`。

现在每个项目的运行时间为 2 分钟（N 大约 = 3 百万）。要生成一个完整的 N*N 相似度表，需要 100,000 小时。有比这种蛮力方法更好的算法吗？每个项目只需要前几个结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:08:57.180

创建一个倒排索引，它具有：

```
customer1: [item1, item3, item8, ...]
customer2: [item7, item8, item74, ...] 
```

那么你也能：

1.  查找商品以获取购买该商品的客户列表
2.  查找每个客户以获取客户购买的商品列表

每个项目的时间应该从 2 分钟到少于 2 秒。

第二个索引需要更多内存，但您不会复制数据。如果内存有问题，您可以将其存储在一个简单的数据库中，并且仍然比您当前使用的 N^2 算法快得多。

## 更多详情

您想创建一个 N*N 矩阵来显示任意两项之间的相似性。使用我的技术，您可以执行以下操作：

```
Create an N*N matrix, and initialize it to 0.
for each item
  Get the list of customers who bought the item (from your item-to-customer index).
  Create an empty dictionary of related items
  for each customer in that list
    for each item that the customer bought
      update the dictionary (add new item, or increase count)
    end for
  end for
  You now have a dictionary that contains the related items,
  and how many customers bought each one. You can update the matrix row
  for the current item from that dictionary.
end for 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:14:21.663

这与@Jim Mischel 的回答基本相同，构建显式反向索引，但不构建显式 NxN 矩阵，并且是一个实现而不是整个系统的草图。

对于大量的 NUM_CUSTOMERS（比如 1,000,000），它的性能不是很好（3 次 similiarty_for 检查约 20 秒），但数据是随机的。据推测，实际客户购买数据中会有更多的相关性和更少的随机性。

首先，构建一些用于测试的合成数据：

```
import random
import operator

NUM_CUSTOMERS = 10000
NUM_ITEMS = 1000
MIN_PER_CUST = 2
MAX_PER_CUST = 10
NUM_INTEREST = 10

customers = ["customer_{}".format(num) for num in xrange(1, NUM_CUSTOMERS+1)]
items = ["item_{}".format(num) for num in xrange(1, NUM_ITEMS+1)]

customer_items = {
    customer: random.sample(items, random.randint(MIN_PER_CUST, MAX_PER_CUST))
    for customer in customers}

item_customers = {}
for customer, this_items in customer_items.iteritems():
    for item in this_items:
        item_customers.setdefault(item, [])
        item_customers[item].append(customer) 
```

然后定义几个函数：

```
def similarity(item1, item2):
    item1_set = set(item_customers[item1])
    item2_set = set(item_customers[item2])

    num_common = len(item1_set.intersection(item2_set))
    num_total = len(item1_set.union(item2_set))

    return float(num_common) / num_total

def similarity_for(item):
    to_check = {
        itm for customer in item_customers[item]
            for itm in customer_items[customer] }
    to_check.discard(item)
    rankings = {
        item2: similarity(item, item2)
        for item2 in to_check }
    return sorted(rankings.iteritems(), key=operator.itemgetter(1), reverse=True) 
```

并且，运行它：

```
for index, item in enumerate(sorted(random.sample(items, 3))):
    rankings = similarity_for(item)
    print "check {}; {} (of {}):".format(index, item, len(rankings))
    for item_other, ranking in rankings[:NUM_INTEREST]:
        print "  {}: {}".format(item_other, ranking) 
```

获得如下所示的结果：

```
% python /tmp/similarity.py
check 0; item_121 (of 309):
  item_520: 0.0283018867925
  item_361: 0.027027027027
  item_536: 0.0265486725664
  item_637: 0.0238095238095
  item_515: 0.020202020202
  item_750: 0.019801980198
  item_960: 0.0192307692308
  item_25: 0.0190476190476
  item_548: 0.018691588785
  item_841: 0.018691588785
check 1; item_714 (of 298):
  item_162: 0.0285714285714
  item_491: 0.0272727272727
  item_617: 0.0265486725664
  item_949: 0.0260869565217
  item_788: 0.0192307692308
  item_446: 0.0190476190476
  item_558: 0.018691588785
  item_606: 0.0181818181818
  item_177: 0.0181818181818
  item_577: 0.018018018018
check 2; item_991 (of 352):
  item_758: 0.0298507462687
  item_204: 0.025
  item_85: 0.0247933884298
  item_769: 0.024
  item_501: 0.0232558139535
  item_860: 0.0227272727273
  item_408: 0.0225563909774
  item_480: 0.0223880597015
  item_73: 0.0220588235294
  item_593: 0.021897810219 
```

# google-app-engine - 谷歌应用引擎或亚马逊网络服务

> ID：15599210
> 
> 赞同：92
> 
> 时间：2013-03-24T13:46:41.630
> 
> 标签：google-app-engine, amazon-web-services

我是我们云托管的新手。我想知道从谷歌应用引擎或亚马逊网络服务哪个开始更好。

我的问题是：

1.  我的应用程序基于java，数据库是MySQL。他们支持这个吗？
2.  他们俩都有哪些免费优惠，哪一个更好？
3.  从一个平台迁移到另一个平台有多容易？
4.  任何开始使用这些服务的好链接，因为我是这里的新手。

此外，由于我是这里的新手，我希望有一些很好的链接可以帮助我开始使用这些服务，并且可以从高级别的角度了解它是如何工作的。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-03-24T15:14:38.843

**更新**：答案不再是最新的。由于 Google 的 Cloud SQL 不再处于 BETA 阶段，这意味着 AWS 和 GAE 都支持使用 MySQL 数据库编写的 Java 应用程序，并且迁移不再那么困难。总体思路是，两家云提供商都倾向于提供“一切”：谷歌推出了[Compute Engine](https://cloud.google.com/products/compute-engine)，而亚马逊正在开发[Beanstalk](http://aws.amazon.com/elasticbeanstalk/)。然而，亚马逊的 IaaS 服务比谷歌更成熟，而谷歌的 PaaS 服务比亚马逊更成熟。这一切都归结为您想要 IaaS 还是 PaaS。

* * *

AWS 和 Google App Engine 之间有一个关键区别：AWS 是基础设施即服务 (IaaS)，而 GAE 是平台即服务 (PaaS)。这意味着使用 AWS，您仍然需要管理自己的服务器（ec2 实例、db 实例、负载均衡器等）=> 需要一些系统管理员工作。使用 GAE，您只需编写应用程序代码并将其部署到谷歌云，而无需关心它运行什么服务器或运行多少台服务器。Google 会为您完成所有系统管理员的工作。

两者都使用按使用付费的模式。

每个问题的答案：

1.  由 AWS 提供支持。对于GAE，您需要使用自己的数据存储（称为大表）。您可以使用 JPA 访问大表数据，但有很多限制（例如，您不能进行表连接）。GAE[支持关系数据库](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide)，但它似乎处于测试阶段。
2.  他们都有一些免费计划：[AWS](http://aws.amazon.com/free/)，[GAE](https://cloud.google.com/pricing/)
3.  难的。正如我在第 1 点所说，gae 使用专有的 NoSql 数据存储。如果要切换到关系模型，则需要重新设计模型。
4.  阅读他们的教程：[AWS](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html)、[GAE](https://developers.google.com/appengine/docs/java/gettingstarted/introduction)。

**注意**：AWS 还通过[弹性 beanstalk](http://aws.amazon.com/elasticbeanstalk/)支持 PaaS ，但这仍处于测试阶段

# sql-server-2008 - UNC 共享上的 SQL Server 数据库

> ID：15599211
> 
> 赞同：-4
> 
> 时间：2013-03-24T13:46:41.447
> 
> 标签：sql-server-2008, unc

我有两台机器分别运行一个 C#.net windows 窗体应用程序。我希望它们都连接到其中一台机器中的单个 SQL Server 数据库。而且我喜欢这两个应用程序都可以与那个单一的数据库一起工作。但不幸的是，我遇到了这个 UNC 共享问题。有没有办法解决这个问题？还是我必须尝试不同的方法。请帮我。我会很感激它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:19:34.397

`AttachDbFileName`是一个可怕且具有误导性的功能。发生的情况是每个连接到这个“数据库”的应用程序都会复制数据文件。因此，如果`Machine1`连接并进行更改，这些更改对`Machine2`. 即使在单机方案中，这也会引起很多混乱，因为人们将通过 Visual Studio 连接，进行一些更新，然后在 Management Studio 中看不到它。或相反亦然。[该`User Instance`功能已被弃用](http://technet.microsoft.com/en-us/library/ms143729%28v=sql.100%29.aspx)是有原因的；请停止使用这两个。

由于您希望多台机器/应用程序连接到数据库的*同一*副本，因此您想要的解决方案是将数据库的单个副本附加到 SQL Server 的单个实例，并且两个应用程序/机器都连接到该单个副本.

这样`MACHINE1-PC`做：

1.  将`ShopDatabase.mdf`其及其关联`.ldf`文件移出您的用户文件夹并移至您的实例的数据文件夹中。这将是*这样*的：

    > C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\Data\

2.  使用 连接到本地 Express 实例`.\SQLEXPRESS`。使用以下代码[附加数据库：](http://msdn.microsoft.com/en-us/library/ms176061%28v=sql.100%29.aspx)

    ```
    CREATE DATABASE ShopDatabase 
      ON (FILENAME = 'C:\...\ShopDatabase.mdf'), 
      -------------------^^^ fill this in
         (FILENAME = 'C:\...\ShopDatabase_Log.ldf') 
      -------------------^^^ fill this in
    FOR ATTACH;

    -- if there is no log file, you may need to do:

    CREATE DATABASE ShopDatabase 
      ON (FILENAME = 'C:\...\ShopDatabase.mdf') 
      -------------------^^^ fill this in
    FOR ATTACH_REBUILD_LOG; 
    ```

3.  确定外部 IP 地址`MACHINE1-PC`（您可以通过从另一台机器 ping 来执行此操作 - 在本地它会告诉您`127.0.0.1`哪个没用）。假设您有一个固定的 IP 并且没有使用 DHCP，这可能是一种更可靠的连接方式，或者至少缺少一个额外的步骤（解析名称）。如果您使用 DHCP，但您不想依赖它，因为您的 IP 地址可能会随着时间而改变。您的连接字符串现在应该是：

    ```
    Data Source=MACHINE1-PC\SQLEXPRESS;
      Network=DBMSSOCN;
      Integrated Security=True;
      Initial Catalog=ShopDatabase;

    -- or:

    Data Source=<<IP Address>>\SQLEXPRESS;
      Network=DBMSSOCN;
      Integrated Security=True;
      Initial Catalog=ShopDatabase;

    -- (replace <<IP Address>> of course) 
    ```

在`Machine1`您的连接字符串*上可以*使用`Data Source=.\SQLEXPRESS`，但最好保持一致而不是保存几次击键。这样，如果您对配置文件等进行其他更改，它们可以分发到其他机器，而无需更改机器名称。

# php - 按标题对表格进行排序

> ID：15599217
> 
> 赞同：-1
> 
> 时间：2013-03-24T13:47:21.617
> 
> 标签：php, mysql, html-table

我希望能够通过单击标题对表格进行排序。我在网上找到了一些如何做到这一点的例子，但是当我尝试遵循它们时，我得到了错误。任何帮助将不胜感激。这是我用来从 MySQL 创建表的 PHP 代码。

```
<?php
session_start(); 
$Town = $_POST['Town'];
$Range = $_POST['Range'];
$Section = $_POST['Section'];

$con = mysql_connect('server, 'database', 'password');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ncwrpc", $con);

$sql = "SELECT * FROM `index8` WHERE `MAPID` = $Town$Range$Section LIMIT 0, 500 ";

$result = mysql_query($sql);
echo "<table border='2' cellpadding='5' cellspacing='2' bordercolor='#000000' bgcolor='#B8B8B8' >
<tr>

<h2>TOWN: $Town N - RANGE: $Range E - SECTION: $Section</h2>
<th bgcolor=\"#669999\">MAP</th>
<th bgcolor=\"#669999\">DESC. 1</th>
<th bgcolor=\"#669999\">DESC. 2</th>
<th bgcolor=\"#669999\">REMARKS</th>
<th bgcolor=\"#669999\">SURVEYOR</th>
<th bgcolor=\"#669999\">CLIENT</th>
<th bgcolor=\"#669999\">YEAR</th>
</tr>";

$color = "0"; 
while($row = mysql_fetch_array($result)) 
{ 
    if($color == "0"){ 
        echo "<tr>"; 
        echo "<td bgcolor=\"#FFFFFF\"><a href=\"".$row['LINK']."\" target=\"_blank\">".$row['MAP1']."</a></td>"; 
        echo "<td bgcolor=\"#FFFFFF\">" . $row['Desc1'] . "</td>"; 
        echo "<td bgcolor=\"#FFFFFF\">" . $row['Desc2'] . "</td>"; 
        echo "<td bgcolor=\"#FFFFFF\">" . $row['Remarks'] . "</td>"; 
        echo "<td bgcolor=\"#FFFFFF\">" . $row['Surveyor'] . "</td>"; 
        echo "<td bgcolor=\"#FFFFFF\">" . $row['Client'] . "</td>"; 
        echo "<td bgcolor=\"#FFFFFF\">" . $row['Y'] . "</td>"; 
        echo "</tr>"; 
        $color = "1"; 
    }else{ 
        echo "<tr>"; 
        echo "<td bgcolor=\"#FFF380\"><a href=\"".$row['LINK']."\" target=\"_blank\">".$row['MAP1']."</a></td>"; 
        echo "<td bgcolor=\"#FFF380\">" . $row['Desc1'] . "</td>"; 
        echo "<td bgcolor=\"#FFF380\">" . $row['Desc2'] . "</td>"; 
        echo "<td bgcolor=\"#FFF380\">" . $row['Remarks'] . "</td>"; 
        echo "<td bgcolor=\"#FFF380\">" . $row['Surveyor'] . "</td>"; 
        echo "<td bgcolor=\"#FFF380\">" . $row['Client'] . "</td>"; 
        echo "<td bgcolor=\"#FFF380\">" . $row['Y'] . "</td>"; 
        echo "</tr>"; 
        $color = "0"; 
    } 
}  

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:54:26.937

您可能想看看 jQuery 数据表 ( [http://www.datatables.net/](http://www.datatables.net/) ) 是否可以完成这项工作以及开箱即用的更多功能。

如果你真的想在 mysql 中解决它，只需在你的 sql 查询中添加一个`SORT BY field`（`field`你想要排序的字段的占位符在哪里）。然后您可以将此字段添加到 html 代码中的排序链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:58:21.037

您可以通过简单地操作 html 来对数据进行排序，使用 jquery，有很多像[这样](http://tablesorter.com/docs/#Demo)的免费插件，这样对您的服务器的请求更简单、更快且成本更低

# asp-classic - Win CE 和 ASP：如何读/写文件？

> ID：15599218
> 
> 赞同：3
> 
> 时间：2013-03-24T13:47:24.040
> 
> 标签：asp-classic, windows-ce

我在网上没有找到任何答案，也许你们中的一个人知道答案：使用 Win CE 和 MS ASP，我如何读取文件或执行任何 IO 操作？我有这个示例代码根本不起作用，因为 CE 中不存在 FileSystemObject。

```
<%
 dim fs,tfile
 set fs=Server.CreateObject("Scripting.FileSystemObject")
 set tfile=fs.CreateTextFile("c:\somefile.txt")
 tfile.WriteLine("Hello World!")
 tfile.close
 set tfile=nothing
 set fs=nothing
 %> 
```

有没有其他方法可以完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:09:30.897

您的代码中有一些问题。最值得注意的是，正如您所指出的，`Scripting.FileSystemObject`Windows CE 中不存在 。此外，CE 没有驱动器号，因此即使有，您的`CreateTextFile`呼叫也会失败。

如果您想坚持使用内置的 Web 服务器，那么解决方案并不是一个简单的解决方案。Windows CE 没有任何开箱即用的 COM 对象可以满足您的需求。典型的解决方案是创建一个新的 COM DLL（使用 Win32 智能设备 ATL 项目向导），然后实现一个执行您想要的对象的对象。使用与 FSO 相同的对象模型将使 ASP 开发人员更容易阅读代码。确保你也实现[`IObjectSafety`](http://msdn.microsoft.com/en-us/library/ee488509%28v=WinEmbedded.60%29.aspx)了，否则浏览器无法加载它。

接下来，您必须将 DLL 部署并注册到将访问您的页面的每个设备。我将把后勤工作留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:15:17.947

当您提到 WinCE 时，您的意思是您将它用作服务器还是仅用作浏览站点的计算机？

无论您的服务器是哪台机器，重要的是确保您选择的路径（放置“c:\...”的位置）是权限设置为足够开放以允许 IIS 和 ASP 将文件写入该路径的路径。文件夹。我将首先选择一个不同的文件夹，并建议该文件夹是 inetpub 文件夹的子文件夹。

# android - 使用 AudioTrack 来均衡 .WAV 文件？

> ID：15599226
> 
> 赞同：0
> 
> 时间：2013-03-24T13:48:08.387
> 
> 标签：android, signal-processing, pcm

我需要做一些 EQing 并为 .wav 文件应用数字效果。有没有办法从下面的“缓冲区”中提取单个 PCM 样本值来进行一些 EQ/处理？AudioTrack 是正确的方法吗？

```
private void playSound() {

audioTrack.play();
double input = 0;
int bufferSize = 512;
byte[] buffer = new byte[bufferSize];
InputStream inputStream = getResources().openRawResource(R.raw.wave);

    try {
        while((input = inputStream.read(buffer)) != -1)
        audioTrack.write(buffer, 0, input);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:35:00.847

从 API 级别 9 (Gingerbread) 开始，您可以将[均衡器](http://developer.android.com/reference/android/media/audiofx/Equalizer.html)AudioEffect 附加到 AudioTrack 的[音频会话](http://developer.android.com/reference/android/media/AudioTrack.html#getAudioSessionId%28%29)。

另一种选择是在将 PCM 数据写入音轨之前处理应用程序中的 PCM 数据。出于性能原因，这可能是您希望在本机代码而不是 Java 中执行的操作。
实现自己的均衡器效果的理论有点宽泛，适合 StackOverflow 上的问答格式，所以如果这是你想要采取的路线，你将不得不在其他地方搜索相关信息。

# python - 已安装 Python 3.x，但 python UNIX 命令启动 Python 2.x

> ID：15599230
> 
> 赞同：2
> 
> 时间：2013-03-24T13:48:32.827
> 
> 标签：python, linux, python-3.x, centos

我下载了最新版本的python 3.3.0，现在我完成了安装，我想在我的centOS linux中运行它，但是当我在控制台“python”中输入它时，与操作系统安装捆绑在一起的python 2.7.0运行。我怎样才能将其更改为运行 3？我隐约觉得我必须更改有关bin文件夹中路径的代码或其他东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T13:51:38.223

尝试命令：

```
python3.3 
```

或者

```
python3 
```

Python 命令和兼容性[http://www.python.org/dev/peps/pep-0394/](http://www.python.org/dev/peps/pep-0394/)

**您不应通过将 Python 3 符号链接到 Python 2 来更改系统默认值**，因为这可能会破坏您的操作系统，这依赖于系统默认值`python`是 Python 2.x（由启动脚本、应用程序等引用）这一事实。

如果您想在键入命令时运行 Python 3，`python`请将以下内容添加到您的 shell 配置文件中：

```
 alias python=python3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T14:09:07.570

如果`python`从命令行运行，则名为的可执行文件的搜索顺序`python`由您的`$PATH`环境变量确定。 `echo $PATH`将显示您的路径搜索顺序；较早的目录优先于后面的目录。

如果您键入`which python`，您将看到您的机器确定为`python`您的搜索路径中的第一个。

然而，最有可能的情况是您内部有一个符号链接`/usr/local/bin`或`/usr/bin`命名`python`它指向 python 二进制文件。

在大多数系统中，实际上有两个符号链接，

```
python  -> pythonX
pythonX -> pythonX.Y 
```

例如，

```
python  -> python2
python2 -> python2.7 
```

您可以查看您`python`是否实际上只是一个符号链接，例如

```
ls -l $(which python) 
```

就我而言，这给了我：

```
/usr/local/bin/python -> python2 
```

显示 python 是 python2 的符号链接

我可以通过打字走得更远

```
ls -l $(which python2) 
```

就我而言，这给了我

```
/usr/local/bin/python2 -> python2.7 
```

* * *

所以无论如何，你有几个选择

1）在食物链上更高的某个目录中添加一个符号链接`python`到您想要的python版本（可能） - 在列表中较早的目录中。例如，通常高于。`python3``$PATH``/usr/local/bin``/usr/bin`

2）更改您当前的`python`符号链接以指向您想要的python版本。通常这是通过将 force`-f`标志添加到`ln`.

`python3`3) 通过在命令行上键入或`#!/bin/env python3`在脚本中用作 hash-bang来明确说明您想要运行 python 3.x。

4) .bashrc 或等效文件中的别名（`python`例如）。`python3``alias python='/path/to/python3`

前两个选项的影响可能比您预期的更广泛。例如，他们会破坏`yum`包管理器，因为它只指定`python`.

第三个可能有点乏味，但它更精确，并且默认情况下，除了您专门调用 python3 的脚本之外，所有东西都可以使用 python2。

最后一个是一个不错的折衷方案，让您可以轻松打字`python`，但不会影响其他用户。

这完全取决于你。

# java - 安装android应用程序后创建一次登录页面以供首次使用

> ID：15599232
> 
> 赞同：0
> 
> 时间：2013-03-24T13:48:45.197
> 
> 标签：java, android, sqlite, login, android-sqlite

如果我的问题似乎重复，我深表歉意。但是，我仍然找不到任何可以帮助我的答案或教程。

我想开发一个需要在用户安装应用程序后登录一次的应用程序。因此，如果用户想使用该应用程序，用户不需要再次登录。用户的数据需要存储在 sqlite 中才能登录到应用程序。

是任何教程或任何可以帮助我的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:16:19.803

**第 1 步：**创建一个`Splash Activity`并将其用作应用程序的入口点。NoDisplay 使其对用户不可见。它不需要布局

```
 <activity
        android:name="your.package.name.Splash"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoDisplay" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

**第2步：**检查`Activity`用户是否已经登录：

```
 public class Splash extends Activity {

private SharedPreferences prefs;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    prefs = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
    if (!prefs.getBoolean("UserLoggedIn", false)) {

        startActivity(new Intent(this, UserLoginActivity.class));
        finish();

    } else {
        startActivity(new Intent(this, YourActivity.class));
        finish();
    }

}

       } 
```

在您`Activity`使用的用户登录中，创建一个`boolean`值并在登录完成后将其设置为 true（示例）：

```
 ..........
           prefs = PreferenceManager
                    .getDefaultSharedPreferences(UserLoginActivity.this);
            Editor editor = prefs.edit();
            editor.putBoolean("UserLoggedIn", true);

            editor.commit();
            startActivity(new Intent(UserLoginActivity.this,
                    NextActivity.class)); 
```

[这](http://saigeethamn.blogspot.de/2009/10/shared-preferences-android-developer.html)是一个使用示例`SharedPreferences`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:06:01.820

**请参阅：** [使用共享首选项的 Android 用户会话管理](http://www.androidhive.info/2012/08/android-session-management-using-shared-preferences/)

它有代码示例，并包含您需要的所有有用信息。对于您在问题中描述的内容，**无需将数据存储在 SQLite 中。**只需使用**Shared Preferences**。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:19:53.627

```
 Ok then open a database like this 

    public SQLiteDatabase sampleDB;
        public String COLUMN_ID="_id";
        public String COLUMN1="username";
        public String COLUMN2="password";
        public String TABLE_NAME="Androdata";

        @Override
        protected void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.login);

            sampleDB =  this.openOrCreateDatabase(TABLE_NAME, MODE_PRIVATE, null);
            boolean x=init(TABLE_NAME);// init is a function that checks db and return 
                                                 //false only for 1st time
            if(x==false)
            {
            createDB();
            insertDB();
            }

            }
    public boolean init(String tableName)
        {
            Cursor cursor = sampleDB.rawQuery("select DISTINCT tbl_name from sqlite_master where tbl_name = '"+tableName+"'", null);
            if(cursor!=null) {
                if(cursor.getCount()>0) {
                                    cursor.close();
                    return true;
                }
                            cursor.close();
            }
            return false;
        }
        private void insertDB() {
            sampleDB.execSQL("INSERT INTO " +
                    TABLE_NAME +
                    " Values ('0','Androviewer','viewer');");   
            System.out.println("Inserted data successfully....");
        }
        private void createDB() {
            sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                    TABLE_NAME+ "(" + COLUMN_ID
                    + " integer primary key autoincrement, " + COLUMN1
                    + " text not null,"+ COLUMN2
                    + " text not null);");
            System.out.println("Database created successfully....");
        }

    enter default value for id as 0 which is done here in insert function.

then all you need to do is just insert entered value in to database ok 

all the best

    check in start screen if its 0 open register page and get the values in to database otherwise go to app as your wish 
```

# node.js - ec2 上的项目中是否存在已安装的 npm 包？

> ID：15599242
> 
> 赞同：0
> 
> 时间：2013-03-24T13:49:30.160
> 
> 标签：node.js, amazon-web-services

我有一个 nodejs 项目。安装：npm install log4js，猫鼬

项目在 git 上，在亚马逊 EC2 上克隆。我是否还必须在 ec2 机器上运行 npm 命令？还是我可以跑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:01:03.370

您用于`git clone`获取 Git 存储库的本地副本，以便查看或开始修改它。因此，要在本地使用该项目，您需要`node`在本地安装。

如果您`node_modules`在项目中包含目录，它应该包含模块 log4js、mongoose，您不必再次安装它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:13:21.010

您可以使用 package.json 来引用诸如 mongoose 和 log4js 之类的东西以及任何您想要的东西。然后在服务器上，您可以简单地运行“npm install”，它会抓取 ec2 实例上的所有内容。

您可能会想，“为什么不直接添加 node_modules 文件夹？” 好吧，事实证明，node_modules 文件夹可能会变得非常大，其中包含实际上不需要的小文件，因为无论如何它都可以通过 npm 轻松获取，所以这就是为什么我们有 package.json 来引用项目依赖项的原因。

这是一个很酷的使用 package.json 的交互式指南：[http ://package.json.nodejitsu.com/](http://package.json.nodejitsu.com/)

# android - 我想要 TimerTask 暂停和恢复

> ID：15599243
> 
> 赞同：0
> 
> 时间：2013-03-24T13:49:31.033
> 
> 标签：android

我正在玩游戏，所以我需要使用每秒更新的时间。我正在使用 TimerTask。我想暂停时间当我点击一个按钮并想在我点击其他活动的恢复按钮时再次恢复它.如何做请帮助我。

```
t=new Timer();
{
t.scheduleAtFixedRate(new TimerTask()
{
public void run()
{
runOnUiThread(new Runnable() {

@Override
public void run() 
{
TextView tv = (TextView) findViewById(R.id.time);
tv.setText(String.format("%02d:%02d",minute,seconds));

time += 1;
seconds += 1;
if(seconds==60)
{
seconds=0;
}
minute=time/60;
}

                    });
                }
            }, 0, 1000);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:58:06.697

实际上，您最好将内容延迟发布到 UI 线程。你想要这样的东西：

```
final TextView tv = (TextView) findViewById(R.id.time);
getMainLooper().postDelayed(
    new Runnable() {
        @Override void run() {
            tv.setText(String.format("%02d:%02d",minute,seconds));
    } },
    60 * 1000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:51:46.217

```
Try this this is what You want
just copy and paste

public class MainActivity extends Activity {
EditText t;
    Button b;
    Button b2;
    Timer timer;
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        b=(Button)findViewById(R.id.button1);
        b2=(Button)findViewById(R.id.button2);
        t=(EditText)findViewById(R.id.editText1);
        b.setBackgroundResource(android.R.color.holo_green_dark);
        timer = new Timer();
        TimerTask updateProfile = new CustomTimerTask(MainActivity.this);
        timer.scheduleAtFixedRate(updateProfile, 0,1000); 
b.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    timer.cancel();
            }
        });
b2.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
                // TODO Auto-generated method stub
     timer = new Timer();
    TimerTask updateProfile = new CustomTimerTask(MainActivity.this);
    timer.scheduleAtFixedRate(updateProfile, 0,1000);
            }
        });
    } 

    class CustomTimerTask extends TimerTask {

        private Context context;
        private Handler mHandler = new Handler();

        // Write Custom Constructor to pass Context
        public CustomTimerTask(Context con) {
            this.context = con;
        }

        @Override
        public void run() {

    new Thread(new Runnable() {
    @Override
    public void run() {
    mHandler.post(new Runnable() {
    @Override
    public void run() {
        Calendar c =Calendar.getInstance(); 
        int seconds = c.get(Calendar.SECOND);
        int min= c.get(Calendar.MINUTE);
        int hour= c.get(Calendar.HOUR);
                                t.setText(hour+":"+min+":"+seconds);
                        }
                    });
                }
            }).start();

        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:23:11.253

首先，您最好使用 CountDownTimer。CountDownTimer 在内部使用 Handler 并在 UI（主线程）上执行回调。这可以让你的代码更干净。

```
CountDownTimer timer = new CountDownTimer(1000000, 1000) {

    @Override
    public void onTick(long millisUntilFinished) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFinish() {
        // TODO Auto-generated method stub

    }
};
timer.start(); 
```

现在您需要将对它的引用从一个 Activity 传递到另一个。我认为最常见、最简单和最丑陋的方法是拥有一个静态解析器类。

```
public class CountDownTimer {
    private static Alarms sCountDownTimer;

    public static CountDownTimer getCountDownTimer () {
        if (sCountDownTimer  == null) throw new NullPointerException("CountDownTimer not initialized yet");
        return sCountDownTimer;
    }

    public static void init(CountDownTimer countDownTimer) {
        if (sCountDownTimer  == null) {
            sCountDownTimer  = countDownTimer;
        } else throw new RuntimeException("Attept to reinitialize!");
    }
} 
```

# typo3 - 在 Typoscript 中排除子菜单而不隐藏其父菜单

> ID：15599245
> 
> 赞同：0
> 
> 时间：2013-03-24T13:49:33.800
> 
> 标签：typo3, typoscript

我想排除子菜单而不隐藏其父菜单

这是我的想法，但它不起作用：

```
MENU = HMENU
MENU {

  special = directory
  special.value = 2

  1 = TMENU

  1.expAll = 1

  1.expAll.if {
    value = 97
    equals.field = pid
    negate = 1
  }
  ... 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:07:59.340

您只需要设置“隐藏在菜单中”选项，以便将来任何人都可以做到。

# javascript - 对当前不存在的 ID 执行函数

> ID：15599247
> 
> 赞同：0
> 
> 时间：2013-03-24T13:49:43.380
> 
> 标签：javascript, jquery

我的页面上有一个按钮，它调用这样的 jQuery 函数：

```
$('[id^=edit]').one('click',function (){
    id = $(this).attr('id')
    changedId = id.replace('edit', '') // cut off the word 'edit'
    oldValue = $('#' + changedId).text()
    $('#' + changedId).html("<input class='myInput' type='text' value='" + oldValue +"'/>");
    $(this).addClass('success');
    $(this).attr('id', changedId+'Button');
    $(this).text("save it")
}); 
```

基本上，此单击会在段落中创建一个输入元素，并向按钮添加另一个类，然后更改其 ID。

我想编写第二个函数，当单击具有新 ID 的按钮时将执行该函数。例如：

```
$('[id$=Button]').click(function(){
    alert("it works");

}); 
```

这样的事情可能吗？该新功能会触发对我的 Django 应用程序的一些 AJAX 调用，但这无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:51:04.210

如果您希望将事件委托给尚不存在的元素，请使用[on](http://api.jquery.com/on/)：

```
 $(document.body).on('click', '[id$=Button]', function(){ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T13:58:16.050

你可以使用jquery：

```
$('#' + changedId + 'Button').live('click', function(event) {
   alert('it works');
}); 
```

# jquery - TinyMCE - 添加事件监听器问题

> ID：15599251
> 
> 赞同：2
> 
> 时间：2013-03-24T13:49:52.067
> 
> 标签：jquery, tinymce, onkeyup

我一直在理解如何为我的`tinymce`编辑器设置事件处理程序。这篇文章可能会很长，所以我很抱歉。

我正在阅读[这篇文章](https://stackoverflow.com/questions/1024712/this-keyup-not-responding-when-focused-on-tinymce)，这正是我想要做的：

我可能会以一种让我对扩展它的功能感到困惑的方式来实例化我的 TinyMCE 编辑器实例。

在我的网站上，我主要让我的编辑做最简单、最基本的工作。现在我在一个页面上，我想反映`onkeyup`要显示的更改`<div id="displayHtml">` （类似于 SOF 正在做的事情）

这是我在大多数页面中通常拥有的内容：

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="tinymce_configs.js"></script>
</head>

<body>
<div id="displayHtml"></div>

<textarea name="notecomments" id="notecomments" tinymce="tinymce_basic" style="width:650px;height:555px;"></textarea>

<script language="javascript" type="text/javascript">
$(document).ready(function(){ 
    $('textarea[tinymce]').each(function(){ 
        var tinymceopts = $(this).attr('tinymce');
        $(this).tinymce(window[tinymceopts]); 
    });

     // my failed attempt to add an event
     $(".mceContentBody").on('keyup',function(){
        var htmltxt = $(this).val();
        $("#displayHtml").html(htmltxt);
     });

}); 
</script>

</body>
</html> 
```

你会`tinymce="tinymce_basic"`在我的`textarea`. 我以这种方式全球化调用 tinymce 主题和插件。对我也很好。

在我的 tinymce_configs.js 文件中，这是我定义的：

```
// JavaScript Document
var tinymce_basic = 
{
    script_url : '/tinymce/tiny_mce.js',// Location of TinyMCE script
    // General options
    theme : "advanced",
    plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",
    force_p_newlines : false,
    force_br_newlines : true,
    forced_root_block : false, // Needed for 3.x 
    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,hr,|,justifyleft,justifycenter,justifyright,justifyfull,|,formatselect,fontselect,fontsizeselect,|,styleprops,forecolor,backcolor,|,link,unlink,image,|,bullist,numlist,removeformat,code,|,preview",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,
    theme_advanced_resize_horizontal: false
}
/* more var options below */ 
```

所以你有它。以上所有内容都适用于我所有带有 textareas 属性的页面：`tinymce="tinymce_basic"`。现在是时候关注单个页面了，该页面看起来很棒，tinymce 中的所有更改都反映在`<div id="displayHtml">`.

我在上面的尝试是寻找`.mceContentBody`，我认为这会起作用，因为 tinymce 编辑器似乎将 html 保存在该类的 iframe 中。（不起作用）

我对其他人如何启动他们的 Tiny MCE 编辑器感到困惑，因为我的看起来不一样。这是 Tiny MCE 的[onKeyUp 示例](http://www.tinymce.com/wiki.php/API3:event.tinymce.Editor.onKeyUp)。
我从来没有开始任何事情`tinyMCE.init({....`

我是否需要更改调用每个 tinymce 编辑器的方式？有了我所拥有的，我怎样才能将我的 TinyMCE 的内容反映到另一个元素中？

**以下一些帖子的更改：**

```
<script language="javascript" type="text/javascript">
$(document).ready(function(){

    $('textarea[tinymce]').each(function(){ 
        var tinymceopts = $(this).attr('tinymce');
        $(this).tinymce(window[tinymceopts]); 
    });

     // This was added
     $(".mceContentBody").on('keyup',function(){
            tinymce_basic["setup"] = function(ed) { 
                ed.onKeyUp.add(function(ed, e) { 
                     console.debug('Key up event: ' + e.keyCode); });
            }       

     });

}); 
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:51:39.627

您需要在配置中执行此操作：

```
tinyMCE.init({
    mode : ...,
    ...,
    setup : function (ed) {
        ed.onKeyPress.add(
            function (ed, evt) {
                alert("Editor-ID: "+ed.id+"\nEvent: "+evt);
                //....
            }
        );
    },
    ...
}); 
```

# jqgrid - struts 2 jqGrid 未显示

> ID：15599255
> 
> 赞同：-2
> 
> 时间：2013-03-24T13:50:23.960
> 
> 标签：jqgrid, struts2

我已经阅读了所有遵循 jqgrid with struts2 展示中显示的示例。但是我的网格没有显示出来。请帮帮我。下面是我的代码片段。当我在 url 中输入动作名称时，它会显示 json。当我在 url 中键入 jsp 路径时，它不会向我显示 jqgrid。但是当我查看页面的源代码时，它会为 jqgrid 创建代码。

JSP 文件

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<%@ taglib prefix="s" uri="/struts-tags"%> 
<%@taglib  prefix="sj" uri="/struts-jquery-tags" %>
<%@taglib  prefix="sjg" uri="/struts-jquery-grid-tags" %>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

<sj:head jqueryui="true" jquerytheme="redmond"></sj:head>
</head>
<body>

<s:url id="remoteurl" action="/SreebhogStore/incomingRawMaterial1" />

<sjg:grid id="gridtable" caption="Roles" dataType="json" href="%{remoteurl}" pager="true" gridModel="gridModel"  rowList="10,15,20" rowNum="5" rownumbers="true"
 width="800" navigator="true" navigatorView="false" navigatorDelete="false" 
 navigatorAdd="false" navigatorEdit="false" navigatorSearch="false">
<sjg:gridColumn name="lotNo" index="lotNo" title="Role Name"
 sortable="true" formatter="editrole" />
 </sjg:grid>

</body>
</html> 
```

Struts 2 配置

```
<package name="incomingRawMaterialManagement" extends="struts-default, json-default"     namespace="/SreebhogStore">
<interceptors>
<interceptor name="login" class="com.sreebhog.interceptors.LoginInterceptor" />
<interceptor-stack name="loginStack">
<interceptor-ref name="login" ></interceptor-ref>
<interceptor-ref name="defaultStack" ></interceptor-ref>
</interceptor-stack>
</interceptors>
<default-interceptor-ref name="loginStack"></default-interceptor-ref>

<action name="incomingRawMaterial1" class="com.sreebhog.actions.IncomingRawMaterialAction">

<result name="success" type="json"></result>

</action> 
</package> 
```

这是我的动作课

```
public class IncomingRawMaterialAction extends ActionSupport implements LoginRequired,SessionAware,ErrorSuccessMessages
    ,ServletRequestAware{

private static final long serialVersionUID = 1L;
private Map<String, Object> sessionMap;
HttpServletRequest request;

//For incoming raw material initialization
private List<Products> rawMaterials;
private List<Party> parties;

//For jqGrid
private List<IncomingRawMaterial> gridModel;
private Integer rows = 0; //Number of rows
private Integer page = 0; //Get the requested page. By default grid sets this to 1.
private String sort;  // sorting order - asc or desc
private String sidx;  // get index row - i.e. user click to sort.
private String searchString;    // The Search String
private String searchOper;  // The Search Operation ['eq','ne','lt','le','gt','ge','bw','bn','in','ni','ew','en','cn','nc']
private Integer total = 0;  // Your Total Pages
private Integer records = 0;    // All Record

public String execute()
{

rows=5;

gridModel = new ArrayList<IncomingRawMaterial>(); 
gridModel.add(new IncomingRawMaterial()); 
gridModel.add(new IncomingRawMaterial()); 
System.out.println("HERE--------------------------------------------------");
//calculate the total pages for the query
total =2;//(int) Math.ceil((double)records / (double)rows);

return SUCCESS;
}

public String getJSON()
{
System.out.println("JSON------------------------------------------------------");
return execute();
}

//Getters and setters and override methods

//JQGRID GETTERS AND SETTTERS

} 
```

请注意，控制台消息也不会显示。所以我怀疑 jqgrid 没有要求我采取行动。

这是包含的 jar 列表 antlr-2.7.7.jar classmate-0.5.4.jar commons-collections-3.2.1.jar commons-fileupload-1.2.1.jar commons-io-1.3.2.jar commons- logging-1.0.4.jar dom4j-1.6.1.jar freemarker-2.3.15.jar hibernate-commons-annotations-4.0.1.Final.jar hibernate-core-4.0.0.Final.jar hibernate-jpa-2.0 -api-1.0.1.Final.jar javassist-3.12.1.GA.jar jandex-1.0.3.Final.jar jboss-logging-3.1.0.CR2.jar jboss-transaction-api_1.1_spec-1.0.0 .Final.jar log4j-1.2.14.jar mysql-connector-java-5.1.3-rc-bin.jar ognl-2.7.3.jar servlet-api.jar struts2-convention-plugin-2.1.8.1.jar xwork -core-2.1.6.jar

```
**Here are the important ones i guess.**

struts2-core-2.1.8.1.jar
struts2-jquery-grid-plugin-3.5.1.jar
struts2-jquery-plugin-3.5.1.jar
struts2-json-plugin-2.1.8.1.jar 
```

**编辑 1：我现在可以查看我的网格，但它仍然没有加载 json 数据。问题在于 sjg:column 标记之一中的格式化程序属性。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:20:14.070

**已解决：** 我自己解决了这个问题。问题出在 s:url 标签上。它没有定义命名空间。我正在通过.../JSP/index.jsp 访问该链接。所以它正在寻找 /JSP 本身的动作。如果有麻烦大家见谅。我希望我的发现可以帮助将来的人。

# java - jbutton在开始时不可见

> ID：15599256
> 
> 赞同：0
> 
> 时间：2013-03-24T13:50:27.110
> 
> 标签：java, swing, user-interface, jbutton, paint

我正在为数独开发 GUI。我的 Droid (SudokuFree) 有一个很好的应用程序，我想复制它的功能并添加一个小功能（保存一个正在进行的板，继续，如果需要，可以恢复）。部分代码已被注释掉，使其更像 SSCCE，如果您有问题，请参阅第二篇文章。两个帖子对我帮助很大，我从他们那里借了很多下面的代码。

[JButton 数组的动作监听器](https://stackoverflow.com/questions/4600578/action-listener-for-jbutton-array)

[为数独求解器构建 GUI（完整的 ASCII 示例）](https://stackoverflow.com/questions/3409099/building-a-gui-for-a-sudoku-solver-complete-with-ascii-example)

我的问题是 JButtons 仅在被碾压后才可见。我搜索了以前的帖子，只找到了对 setVisible(true) 的引用，我已经这样做了。

谢谢

```
public class RunSudokuNinja implements Runnable{
    @Override
    public void run() {
        //SudokuEngineInterface sudokuEngine = new SudokuEngine();
        SudokuView sudokuView = new SudokuView();
        //sudokuView.setSudokuImplementation(sudokuEngine);
        sudokuView.setVisible(true);
    }
    public static void main(String[] args) {
        EventQueue.invokeLater(new RunSudokuNinja());
    }
}

public class SudokuView extends JFrame{
    //SudokuController controller;
    //SudokuEngine sudokuEngine;

    private static final int width = 500;
    private static final int height = 650;
    private static final int yMar = 100;
    private static final int xMar = 25;
    private static final int cellSize = 40;
    private static final int gridSpace = 3;
    private static final int secSpace = 9;

    public JButton[][] btnz = new JButton[9][9];

    public SudokuView() {
        //controller = new SudokuController();
        //sudokuEngine = new SudokuEngine();

        setTitle("Sudoku Ninja 0.1");
        setSize(width, height);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(null);
        setBackground(Color.GRAY);

        int y=yMar;
        for (int r=0;r<9;r++){
            int x=xMar;
            for (int c=0;c<9;c++){
                btnz[r][c]=new JButton("1");
                btnz[r][c].setBounds(x,y,cellSize,cellSize);
                btnz[r][c].setVisible(true);
                add(btnz[r][c]);
                if (c==2||c==5){
                    x = x+cellSize+secSpace;
                }else{
                    x = x+cellSize+gridSpace;
                }
            }
            if (r==2||r==5){
                y = y+cellSize+secSpace;
            }else{
                y = y+cellSize+gridSpace;
            }
        }
        setVisible(true);
    }

    @Override
    public void paint(Graphics g){

    }

    public void setSudokuImplementation(SudokuEngineInterface listener) {
        //controller.setListener(listener);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:58:07.557

您正在覆盖`JFrame`'`paint`方法并短路绘制机制。鉴于此方法中没有任何功能，您可以删除这些行：

```
@Override
public void paint(Graphics g){

} 
```

理想情况下，任何预期的自定义绘画都应该通过覆盖`paintComponent`的子类`JComponent`而不是顶级容器（例如`JFrame`. 这利用了 Swing 的双缓冲绘制机制。

*   [自定义绘画路径](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T13:58:29.130

您正在覆盖`paint`告诉它什么都不做的方法，请更正您`paint()`的：

```
public void paint(Graphics g){
    super.paint(g);
    //do whatever you need to do here
} 
```

# javascript - 如何处理 presistancejs lib 中的级联删除？

> ID：15599258
> 
> 赞同：0
> 
> 时间：2013-03-24T13:50:30.210
> 
> 标签：javascript

我想知道如何处理 presistencejs lib 中的级联删除。 [presistencejs 网站](https://github.com/zefhemel/persistencejs)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T15:29:36.673

谷歌搜索后，我认为无法自动执行此操作，我必须手动执行

# c++ - 斐波那契数列的递归二叉树类

> ID：15599260
> 
> 赞同：0
> 
> 时间：2013-03-24T13:50:35.047
> 
> 标签：c++, data-structures, recursion, binary-tree, fibonacci

作为个人项目的一部分，而不是家庭作业 - 只是为了我自己的兴趣和 C++ 入门，我正在尝试创建一个斐波那契值的二叉树；**我知道我在这里犯了一些基本错误**，但如果有人能帮助我，我将不胜感激，我的代码如下：

```
#include <iostream>
#include <typeinfo>
using namespace std;

class FibTree {

    class Node {
    public:
        Node const* left;
        Node const* right;
        int value;
        Node (int, Node*, Node*);
    };

    Node const* root;

public:
    FibTree (int);
    int getValue(){
        return this->root->value;
    };

private:
    static Node* buildTree(int n ) {
        if (n < 2) {
            return new Node( n, NULL, NULL );
        } else {
            Node* left = buildTree( n - 1 );
            Node* right = buildTree( n - 2 );
            return new Node( left->value + right->value , left, right );
        }
    }
};
FibTree::FibTree(int n) {
    this->root = buildTree(n);
};

FibTree::Node::Node(int value, Node* left, Node* right){
    this->value = value;
    this->left = left;
    this->right = right;
};

int main () {
    FibTree f(6);
    cout << f.getValue();
    return 0;
} 
```

谁能让我知道我在这里做的根本错误，重要的是告诉我为什么我**在分配中收到错误“无法将'FibTree'转换为'FibTree *”**；以及我应该如何更好地接近？

提前致谢， 亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:08:57.117

正如错误消息所说，您正在尝试将具体类型分配给`FibTree`指针。在许多情况下，错误在于您使用的是指针，但在这种情况下，身份很重要。您需要一个，并且每个值只有一个实例`FibTree`。

由于您的目标显然是学习良好实践，因此我将首先指出您似乎正在实现的抽象`FibTree`不是树的抽象，*而是*树中节点的抽象。就个人而言，我会从以下内容开始：

```
class FibTree
{
    class Node
    {
        Node const* left;
        Node const* right;
        int value;
    };
    Node const* root;
public:
    //  ...
}; 
```

在那之后，更多的是个人喜好的问题，你想如何建立树；重要的一点是每个节点都必须是动态分配的（`new Node(...)`，而不仅仅是 `Node(...)`），并且`left`和`right`指针必须是树中已经存在的元素。

除此之外，我不确定您希望我告诉您多少，解决其余部分可能是一种有趣的学习体验，但是如果您想要更多点击，请随时询问，我将编辑此答案以提供他们. 我要说的一件事：我会在`Node`. 类似的东西 `Node::Node( int value, Node* left, Node* right )`。严格来说，你不需要它，它无论如何也不会改变算法，但它会使写出的算法更加简洁。另外，我会使用递归函数来构建从构造函数调用的结构。最后，我会在树级别添加一个析构函数，它会递归地遍历树并删除所有节点。

但我再说一遍：要掌握的最重要的一点是节点不是树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:00:25.843

```
 this->left = FibTree(n - 1, this); // This line errors 'Cannot convert 'FibTree' to 'FibTree*' in assignment
        this->right = FibTree(n - 2, this); // This line errors 'Cannot convert 'FibTree' to 'FibTree*' in assignment 
```

应该

```
 this->left = new FibTree(n - 1, this);
        this->right = new FibTree(n - 2, this); 
```

不知道为什么你将 root 传递给你的构造函数，你没有用它做任何事情。

# php - 从 PHP 到 Python 的 URL 登录

> ID：15599266
> 
> 赞同：0
> 
> 时间：2013-03-24T13:51:10.487
> 
> 标签：php, python, signing

我对 Python 很陌生，我正在使用一个最近开始需要 url 签名的 API。我被告知，在 PHP 中，将签署 url 的代码如下所示：

```
function signUrl($url, $post = null)
{
if ($post !== null) { ksort($post); }
return md5(YourSecretApiKey . $url . ($post === null ? '' : implode(',', $post)));
} 
```

我如何在 Python 中做到这一点？

这是我的 Python 代码：

```
import wykop

appkey = 'KEY'
secretkey = 'KEYa'

api = wykop.WykopAPI(appkey)
profile = api.get_profile("m__b")
print api.get_profile("m__b") 
```

我得到一个错误：

```
wykop.InvalidAPISignError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T06:20:15.350

这是那部分 PHP 代码的 Python 版本

```
import hashlib
# Ready for md5

def signUrl(url, post=None):

  # Set default. Empty for not provided
  post_string = ''

  if post is not None:

    # Dictionary in Python does not maintain order 
    # Sort it manually with a for loop instead
    post = [post[k] for k in sorted(post.keys())]

    post_string = ','.join(post)
    # PHP implode

  return hashlib.md5(YourSecretApiKey + url + post_string).hexdigest() 
```

# java - 将本地 jar 添加到将部署到 Openshift 的 Maven 项目

> ID：15599270
> 
> 赞同：0
> 
> 时间：2013-03-24T13:51:26.083
> 
> 标签：java, maven, openshift

我创建了想要在另一个本地项目中使用的本地库，它们都是 maven 项目。正如我在互联网上阅读的那样，我已将项目发布到本地 maven 存储库并将其用作 maven 依赖项。问题是这是本地的，我想将此项目部署到 OpenShift，在该服务器上再次构建应用程序。当然，由于本地依赖项，项目无法编译（服务器看不到此依赖项）。如何解决这个问题呢？我应该将 *.jar 添加到 libs 目录并以这种方式连接吗？但是怎么做？我还没有找到如何在 maven 项目中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:01:42.127

此处的 OpenShift 知识库中概述了类似的解决方案： [https ://www.openshift.com/kb/kb-e1040-using-your-own-jar-files-in-a-java-application](https://www.openshift.com/kb/kb-e1040-using-your-own-jar-files-in-a-java-application)

希望有帮助。请随时加入 OpenShift 论坛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:35:09.643

我已经解决了这个问题，但我想以不同的方式解决这个问题。但是，应用程序可以正确构建在 OpenShift 服务器上。通过使用以下命令在本地 OpenShift 存储库中安装 jar 解决了问题：

```
mvn install:install-file \
    -Dfile=multiplayergame-java-common-libs-0.9.jar \
    -DgroupId=pepuch \
    -DartifactId=multiplayergame-java-common-libs \
    -Dversion=0.9 \
    -Dpackaging=jar` 
```

# javascript - jcarousel 在 8 之前没有在 IE 中正确显示

> ID：15599274
> 
> 赞同：0
> 
> 时间：2013-03-24T13:51:38.300
> 
> 标签：javascript, jquery, internet-explorer, cross-browser, jcarousel

[我在http://npl.ibles.pl](http://npl.ibles.pl)的滑块上有问题

IE8 根本不显示它。在 IE7 和 IE6 中，图像放错了位置。您有什么建议吗？请问代码中有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:33:20.427

对我来说，它在 IE8 中运行良好。

IE7 中的问题已`overflow`在此处描述 [jcarousel not working in IE7](https://stackoverflow.com/questions/11612366/jcarousel-not-working-in-ie7)

我建议你忘记 IE6，这个浏览器已经 10 多年了，你可以在浏览器统计中查看它的“重要性”。这只是浪费时间。 [http://www.w3schools.com/browsers/browsers_explorer.asp](http://www.w3schools.com/browsers/browsers_explorer.asp)

# process - LibGDX - 如何维护后台进程

> ID：15599276
> 
> 赞同：2
> 
> 时间：2013-03-24T13:51:40.907
> 
> 标签：process, notifications, libgdx

我要开发的游戏应该有一个小的持续运行的后台进程，例如，即使主游戏窗口关闭，它也可以发送通知。这在 LibGDX 中可行吗？另一个问题是，我如何将参数传递给应用程序？在桌面客户端的情况下，它显然是静态主程序中的“String [] args”-东西，但是 android 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:52:43.030

[这个 libGDX 页面](https://code.google.com/p/libgdx/wiki/ApplicationPlatformSpecific)向您展示了如何以特定于平台的方式连接您的代码。在 Android 中，您将设置一项服务，而在 PC 上，您将运行另一个进程。

如果您想将程序参数传递给您的游戏，您可以让您的核心类在其构造函数中以`String[]`.

现在你有类似的东西

```
public static void main(String[] args)
{
   LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
   new LwjglApplication(new Main(), cfg);
} 
```

但是您可以将其更改为

```
public static void main(String[] args)
{
   LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
   new LwjglApplication(new Main(args), cfg);
} 
```

`Interface`如果您要变得比这更复杂，我发布的链接建议使用良好的抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:29:19.373

在 Android 中，您可以将后台进程作为远程[服务](http://developer.android.com/reference/android/app/Service.html)运行。如果您向下滚动到 Remote Messenger Service Sample，它应该会给您一些有用的指示。

[这里](http://developer.android.com/guide/components/services.html)还有一个服务开发者指南。

# jquery - Jquery为打开的fancybox更改fancybox属性

> ID：15599280
> 
> 赞同：0
> 
> 时间：2013-03-24T13:51:54.577
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用fancybox v2.0.6。

我在fancybox iframe中加载图像：

```
<a data-fancybox-type="iframe" class="imagefancybox" rel='gallery-image[ilist]' id={{image.id }} href="{{ image.get_absolute_url }}"> 
```

imagefancybox 类打开fancybox，如下所示：

```
$(document).ready(function() {

        $(".imagefancybox").fancybox({
         'scrolling'    : 'no',
         aspectRatio    : false,
         height         : '65%',
         width          : '90%',
         maxWidth       : 1200,
         minHeight      : 600,
         maxHeight      : 680,
         padding        : 0,
         margin         : 0,
         arrows         : true,
         nextEffect     : 'fade',
         prevEffect     : 'none',

    }); 
```

图像在幻想框中正确打开，并显示上一个和下一个导航箭头，因为我已将箭头设置为 true。这使我可以通过单击图像导航到上一个或下一个图像。我正在尝试实现标记功能，以便当用户单击图像时，用户可以标记图像。为此，当用户单击图像中名为“标记图像”的按钮时，我想在已打开的幻想框中将“箭头”设置为 false。我怎样才能使用 jquery 做到这一点？});

# json - 通过主干传递 JSON 到下划线

> ID：15599282
> 
> 赞同：0
> 
> 时间：2013-03-24T13:52:04.380
> 
> 标签：json, backbone.js, requirejs, underscore.js

我被下划线和骨干困住了。我无法在下划线模板中呈现 JSON。浏览器不输出任何内容，但没有错误消息。这是我的工作：

服务器返回以下 json：

```
[{"id":"1","vorname":"Magnus","nachname":"R.","geb":"0","natio":""},{"id":"2","vorname":"Konstantin","nachname":"W.","geb":"0","natio":""}] 
```

///////我的模型：/////

```
define([
  'underscore',
  'backbone',
], function(_, Backbone){

  var MitarbeiterModel = Backbone.Model.extend({});
  return MitarbeiterModel;
}); 
```

/////我的收藏：///////

```
define([
  'underscore',
  'backbone',
  'models/mitarbeiter',

], function(_, Backbone, MitarbeiterModel){

  var MitarbeiterCollection = Backbone.Collection.extend({
    model: MitarbeiterModel,
    url: '/aquilamus/server/request.php',

  });

  return MitarbeiterCollection;
}); 
```

//////我的观点///////

```
define([
  'jquery',
  'underscore',
  'backbone',
  'collections/mitarbeiter',
  'text!/aquilamus/templates/mitarbeiter/mitarbeiter.html'
], function($, _, Backbone, MitarbeiterCollection, MitarbeiterTemplate){

 var MitarbeiterListView = Backbone.View.extend({
    el: $("#container"),
    initialize: function(){
      this.collection = new MitarbeiterCollection;

      var newtemplate = MitarbeiterTemplate;
       _.templateSettings.variable = "rc";
      this.template = _.template($(newtemplate).html());
    },
    render: function(){
      var self = this;

      // show some loading message
      this.$el.html('Loading');

      // fetch, when that is done, replace 'Loading' with content
      this.collection.fetch().done(function(){
          console.log(self.collection.toJSON());
          var renderedContent = self.template(self.collection.toJSON());

          self.$el.html(renderedContent);
      });
      return this;
    }

  });
  // Our module now returns our view
  return MitarbeiterListView;
}); 
```

下划线模板：

```
<script type='text/javascript' id='mitarbeiter-anzeigen'>
    <% _.each( rc.mitarbeiter, function(mitarbeiter){ %>
        <div>test</div>
        <div><%= mitarbeiter.vorname %></div>

    <% }); %>   
</script> 
```

console.log(self.collection.toJSON()) 记录以下内容：

![在此处输入图像描述](../Images/de00c79cfa9cc1c3c1cb1c99fe126a72.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:31:13.110

在您的模板中，您有：

```
<% _.each( rc.mitarbeiter, function(mitarbeiter){ %> 
```

那个**rc**是从哪里来的？

以下是您的代码在控制器内部的样子：

```
self.template({ "mitarbeiters": self.collection.toJSON() }); 
```

然后在您的模板中：

```
<% _.each( mitarbeiters, function(mitarbeiter){ %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:44:59.647

答案：///已更新下划线模板：////

```
<script type='text/javascript' id='mitarbeiter-anzeigen'>
    <% _.each(rc.mitarbeiters, function(mitarbeiters){ %>
        <div><%= mitarbeiters.vorname %></div>

    <% }); %> 
```

////更新视图：//////

```
define([
  'jquery',
  'underscore',
  'backbone',
  'collections/mitarbeiter',
  'text!/aquilamus/templates/mitarbeiter/mitarbeiter.html'
], function($, _, Backbone, MitarbeiterCollection, MitarbeiterTemplate){

 var MitarbeiterListView = Backbone.View.extend({
    el: $("#container"),
    initialize: function(){
      this.collection = new MitarbeiterCollection;

      var newtemplate = MitarbeiterTemplate;
       _.templateSettings.variable = "rc";
      this.template = _.template($(newtemplate).html());
    },
    render: function(){
      var self = this;

      // show some loading message
      this.$el.html('Loading');

      // fetch, when that is done, replace 'Loading' with content
      this.collection.fetch().done(function(){
          console.log(self.collection.toJSON());
          var renderedContent = self.template({ "mitarbeiters": self.collection.toJSON() });

          self.$el.html(renderedContent);
      });
      return this;
    }

  });
  // Our module now returns our view
  return MitarbeiterListView;
}); 
```

# java - 如何使用 SimpleFramework 将对象序列化为字符串

> ID：15599283
> 
> 赞同：1
> 
> 时间：2013-03-24T13:52:12.873
> 
> 标签：java, gwt, gwt-rpc, simple-framework

我正在使用 GWT 应用程序并与 Simple 框架集成以将对象解析为 XML，我在客户端有 POJO 类并在服务器端使用解析器。[我需要将序列化对象写入 String 变量，而不是 GWT App 引擎https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/M7Zo3U7CKD8](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/M7Zo3U7CKD8)中不允许的文件原因文件 。

**我在 GWT RPC ServiceImpl 上的服务器端的当前代码**

```
File result = new File("c:/myXMLFile.xml");
Serializer serializer = new Persister();
MyBeanToSerialize beanToSerialize = new MyBeanToSerialize("firstName","LastName");
serializer.write(beanToSerialize, result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:23:59.460

我找到了使用 writer 对象而不是 File 从 XML 解析器返回 String 的解决方案，**代码如下：-**

```
String parser(){
 StringWriter writer = new StringWriter();
 Serializer serializer = new Persister();
 MyBeanToSerialize beanToSerialize = new MyBeanToSerialize("firstName","LastName");
 serializer.write(beanToSerialize, writer);
return writer.getBuffer().toString();
) 
```

# php - 使用php将图像插入mysql

> ID：15599286
> 
> 赞同：1
> 
> 时间：2013-03-24T13:52:25.327
> 
> 标签：php, mysql

我正在尝试使用会话变量中的用户 user_id 将上传的图像插入 mysql。我找到了一个在线教程并将其更改如下：

```
<?php
require_once('../Login/includes/session_timeout_db.inc.php');
$dbuser="";
  $dbname="";
  $dbpass="";
  $dbserver="";

  $con = mysql_connect($dbserver,$dbuser,$dbpass);
  if (!$con){ die('Could not connect: ' . mysql_error()); }
  mysql_select_db($dbname, $con);

  // Make sure the user actually
    // selected and uploaded a file
    if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) {

    // Temporary file name stored on the server
    $tmpName = $_FILES['image']['tmp_name'];

    // Read the file
    $fp = fopen($tmpName, 'r');
    $data = fread($fp, filesize($tmpName));
    $data = addslashes($data);
    fclose($fp);

    // Create the query and insert
    // into our database.
    $query = "INSERT INTO images, owner_id";
    $query .= "(image) VALUES ('$data', '.$_SESSION['id'].')";
    $results = mysql_query($query, $link);

// Print results
print "Thank you, your file has been uploaded.";

}
else {
print "No image selected/uploaded";
}

// Close our MySQL Link
mysql_close($link);
?> 

<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0 Strict//EN”
“http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd”&gt;
<html xmlns=”http://www.w3.org/1999/xhtml”&gt;
<head>
<meta http-equiv=”Content-Type” content=”text/html; charset=utf-8” />
<title>Manage Tasks</title>
<link rel="stylesheet" type="text/css" href="../allcss/style.css" />
</head>

<body>

<?php
require('../Login/includes/header.inc.php');
?>

<div id="content">
<form enctype="multipart/form-data" action="" method="post" name="changer">
<input name="MAX_FILE_SIZE" value="102400" type="hidden">
<input name="image" accept="image/jpeg" type="file">
<input value="Submit" type="submit">
</form>
</div>

</body>
</html> 
```

我在查询的第二行遇到错误：

```
$query = "INSERT INTO images, owner_id";
$query .= "(image) VALUES ('$data', '.$_SESSION['id'].')";
$results = mysql_query($query, $link); 
```

*错误是解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 28 行需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING*

有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:04:24.763

您的`images`字段需要是[BLOB](http://dev.mysql.com/doc/refman/5.0/en/blob.html)类型。但是不要这样做，将文件保存在文件系统中并将目录路径保存到数据库中的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T19:17:52.957

改变 ：

```
"(image) VALUES ('$data', '.$_SESSION['id'].')"; 
```

进入 ：

```
"(image) VALUES ('$data', '".$_SESSION['id']."')"; 
```

# c# - asp.net 字典 根据键值更新项目

> ID：15599292
> 
> 赞同：0
> 
> 时间：2013-03-24T13:52:54.733
> 
> 标签：c#, asp.net, collections, dictionary

我有一个字典对象：

```
protected Dictionary<string,string> myDict; 
```

我希望能够通过键搜索字典并更新该键/值对的值。

```
if (!myDict.ContainsKey(key))
{
    myDict.Add(key, value); //if key is not found in the collection add it.
}
else //if it is found then update it.
{
    Update[Key].Value with myValue
} 
```

有没有办法做到以上几点？如何通过检查键来更新键的值？与 else 语句中的伪代码匹配的实际代码是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:56:57.063

你可以做

```
myDict[key] = value; 
```

如果字典已经包含键，它会被更新。否则，它会被创建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T13:56:26.723

您可以使用键找到值并分配一个新值：

```
myDict[myKey] = yourNewValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:55:49.050

如果我理解正确，应该很简单：

```
if (!myDict.ContainsKey(key))
{
    myDict.Add(key, value); //if key is not found in the collection add it.
}
else //if it is found then update it.
{
    myDict[key] = value;
} 
```

# c# - 在任何文化中匹配短日期模式的正则表达式

> ID：15599298
> 
> 赞同：1
> 
> 时间：2013-03-24T13:53:46.327
> 
> 标签：c#, regex, date, date-format

我需要一个自定义正则表达式来计算短日期模式（等等。“M/dd/yyyy”，“dd/mm/yyyy”，“yyyy/mm/dd”，...取决于文化..）然后我可以得到日、月、年来解析该格式，如下所示：

```
 string input = "03/24/2013";
    Match m = Regex.Match(input, @"^(?<day>\d{1,2})/(?<month>\d{1,2})/(?<year>\d{4})$");
    if( m.Success )
    {
        DateTime d = new DateTime(int.Parse(m.Groups["year"].Value),
                                  int.Parse(m.Groups["month"].Value),
                                  int.Parse(m.Groups["day"].Value));

    } 
```

但！此表达式不支持所有各种格式，所以

**要求**：

*   仅接受 '/' 作为分隔符。
*   在各种文化（等，en-US，th-TH，jp-JP，...）中有效的所有短日期模式（仅限日期，时间也会很棒）。这可能吗，实际上我只需要知道哪一部分是年、月或日，但我在任何地方都找不到。请帮我...
*   有效的常用范围：日 [1-31]{1-2}、月 [1-12]{1-2}、年[1600-9999]{4}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:22:22.953

正如 Jim 和我所建议的，您可以迭代所有文化：

```
foreach (var culture in CultureInfo.GetCultures(CultureTypes.SpecificCultures))
{
    DateTime result;
    if (DateTime.TryParseExact(text, "d", culture, DateTimeStyles.None,
                               out result))
    {
        // Valid - return, or whatever
    }
} 
```

请注意，[“d”](http://msdn.microsoft.com/en-gb/library/az4se3k1.aspx)是短日期模式的标准格式字符串。或者，您可以使用`culture.DateTimeFormat.ShortDatePattern`.

# git - Vim：尝试在 git 中进行三向合并时，不能区分超过 4 个缓冲区

> ID：15599301
> 
> 赞同：3
> 
> 时间：2013-03-24T13:53:55.497
> 
> 标签：git, vim

我正在尝试使用以下教程与 git 和 vim 进行三向合并：[http](http://www.toofishes.net/blog/three-way-merging-git-using-vim/) ://www.toofishes.net/blog/three-way-merging-git-using-vim/但我的 Vim 总是给我：

```
Can not diff more than 4 buffers 
```

它以奇怪的状态开始，有五个窗口（第一个是空的）。我尝试使用 -U NONE 选项启动它以禁用我的所有设置，但它始终相同。我确实想要图片中的设置（底部的合并文件，上面的三个窗格）。

```
git config --global mergetool.vimdiff3.cmd 'vim -f -d -c "wincmd J" "$MERGED" "$LOCAL" "$BASE" "$REMOTE"'
git config --global merge.tool vimdiff3
... making a conflict with git ...
git mergetool
... vim is starting ...
Vim shows: Can not diff more than 4 buffers
... hitting ENTER hides the error and I see scrambled windows ... 
```

请问哪里有梗？

# php - PHP删除带有多个复选框的SQL行

> ID：15599303
> 
> 赞同：0
> 
> 时间：2013-03-24T13:53:59.777
> 
> 标签：php, sql

我正在尝试使用复选框删除多行。下面是我的代码

```
 <?php
$host="localhost"; // Host name 
$username="****"; // Mysql username 
$password="****"; // Mysql password 
$db_name="****"; // Database name 
$tbl_name="****"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$result = mysql_query("SELECT * FROM members WHERE dealer='Panzer Protection'");
?>
<form name="form1" method="post" action="">
      <?php
while($rows=mysql_fetch_array($result)){
?>
      <tr>
        <td bgcolor="#666666"><input name="checkbox[]" type="checkbox" id="checkbox[]"    
value="<? echo $rows['member_id']; ?>"></td>
        <td bgcolor="#666666"><? echo $rows['member_id']; ?></td>
        <td bgcolor="#666666"><center>
          <? echo $rows['member_msisdn']; ?></td>
        <td bgcolor="#666666"><center>
          <? echo $rows['member_name']; ?></td>
        <td bgcolor="#666666"><div align="center"><? echo $rows['dealer']; ?></div>   

 </td>
        <td align="center" bgcolor="#FFFFFF"><a href="control_clientinfo.php?member_id=   
<? echo $rows['member_id']; ?>" class="update">Look Up</a></td>
      </tr>
      <?php
}
?>

<tr>
<td colspan="6" align="center" bgcolor="#FFFFFF"><input name="delete" type="submit"     
id="delete" value="Delete"></td>
</tr>

</form> //Forgot form close in past
<?php

// Check if delete button active, start this 
if($_POST['delete']){
for($i=0;$i<$count;$i++){
$i = 0;
while(list($key, $val) = each($_POST['checkbox'])) {
$sql = "DELETE FROM $tbl_name WHERE id='$val'";
mysql_query($sql);
$i += mysql_affected_rows();
}
}
// if successful redirect to 
if($result){
echo "<meta http-equiv=\"refresh\" content=\"0;URL=control_clientlistdel.php\">";
}
}
mysql_close();
?> 
```

它向我显示了我调用的列表，我可以勾选这些框。如果我点击删除按钮，它只会刷新屏幕，我勾选的那个仍然存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:17:22.560

第一件事。使用它是个坏主意，`mysql`因为它真的很旧并且已被弃用。

其次，你在哪里分配你的变量（`$delete`，`$count`）

您必须检查`delete`您的密钥`POST`是否已设置：

```
if (isset($_POST['delete'])) { // Then the form has been submitted 
```

在此之后，分配你的`$count`变量

```
$checkbox = $_POST['checkbox'];
$count = count($checkbox); 
```

一切都必须正常工作。

最后结果

```
if (isset($_POST['delete'])) {
    $checkbox = $_POST['checkbox'];
    $count = count($checkbox);

    for($i = 0; $i < $count; $i++) {
        $id = (int) $checkbox[$i]; // Parse your value to integer

        if ($id > 0) { // and check if it's bigger then 0
            mysql_query("DELETE FROM table WHERE member_id = $id");
        }
    }
} 
```

查看用于与数据库交互的[mysqli](http://php.net/manual/en/book.mysqli.php)和[PDO驱动程序。](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:05:15.743

不确定它是否是拼写错误..但是您缺少`from`结束标签并且`<table>`在发布的代码中..

```
....
<td colspan="6" align="center" bgcolor="#FFFFFF">
<input name="delete" type="submit" id="delete" value="Delete"></td>
</tr>
</form> //here 
```

并且您需要检查`$delete`if 条件中的发布值..正确的方法是使用`$_POST`，因为您使用方法作为 pos.. 此处`method="post"`。

**更新**

```
 if(isset($_POST) && $_POST['delete']){ //here
     $count=count($_POST['checkbox']);
    for($i=0;$i<$count;$i++){
      $sql  = "DELETE FROM $tbl_name WHERE id='".$_POST['checkbox'][$i]."'";
      mysql_query($sql);

     }
} 
```

您可以使用[header()](http://php.net/manual/en/function.header.php)在 php 中重定向

```
 header( 'Location: http://www.yoursite.com/ontrol_clientlistdel.php' ) ; 
```

# css - Wordpress - 更改主页上的视频（iframe）尺寸

> ID：15599304
> 
> 赞同：1
> 
> 时间：2013-03-24T13:54:18.740
> 
> 标签：css, wordpress, iframe, youtube

在网站上工作并遇到视频输出问题。

// 该网站是：[http ://tastethemovement.org](http://tastethemovement.org)

在帖子中，我嵌入了一个宽度为 560 像素的 Youtube 视频。在帖子中看起来很棒。但是当该图像被拉到主页上显示时，它超出了允许的尺寸。我只希望它最大为 316 像素。

我尝试在我的 css 中添加一个 width 属性，这是我的 iframe 的一个类，但无法让它工作。如果我设置一个 iframe 类并且只允许 316px 的宽度，那么帖子中的视频也会减少。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:05:32.110

如果主页上的这些图像来自“设置特色图像”方法，您可以对视频进行屏幕抓取，调整其大小并将其用作“特色图像”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:11:30.610

我在 jsFiddle 中有这个 jQuery 代码，它将 iframe 扩展到内容的最大大小。

在帖子中添加以下 HTML 代码：

```
<article>
<p><iframe width="400" height="400" src="http://www.youtube.com/...."></iframe></p>
</article> 
```

在模板中添加以下 jQuery 代码。

```
<script type='text/javascript'>
jQuery(document).ready(function($) {
$(function() {

var $allVideos = $("iframe[src^='http://player.vimeo.com'], iframe[src^='http://www.youtube.com'], object, embed"),
$fluidEl = $("p");

$allVideos.each(function() {

  $(this)
    // jQuery .data does not work on object/embed elements
    .attr('data-aspectRatio', this.height / this.width)
    .removeAttr('height')
    .removeAttr('width');
});

$(window).resize(function() {

  var newWidth = $fluidEl.width();
  $allVideos.each(function() {

    var $el = $(this);
    $el
        .width(newWidth)
        .height(newWidth * $el.attr('data-aspectRatio'));

  });

}).resize();

});
});
</script> 
```

我在我的 Wordpress 网站上尝试了代码，它工作正常。

# google-places - Google 放置 javascript 库以搜索我的数据库中的位置

> ID：15599309
> 
> 赞同：0
> 
> 时间：2013-03-24T13:54:38.053
> 
> 标签：google-places

我有一个带有地方的 mysql 数据库。每个地方都有一个经度/纬度。我想要的是搜索一个区域内的地方，例如伦敦内的地方。这可能与 Google Places javascript 库有关吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:59:24.233

[使用Google Places JavaScript 库](https://developers.google.com/maps/documentation/javascript/places)可以实现所有这些以及更多功能。

上面页面上有一个代码片段可以做到这一点（根据经度/纬度搜索地点）。

```
var map;
var service;
var infowindow;

function initialize() {
  var pyrmont = new google.maps.LatLng(-33.8665433,151.1956316);

  map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: pyrmont,
      zoom: 15
    });

  var request = {
    location: pyrmont,
    radius: '500',
    types: ['store']
  };

  service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);
}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      createMarker(results[i]);
    }
  }
} 
```

# asp.net - 404 重定向仅用于页面而不是图像

> ID：15599312
> 
> 赞同：3
> 
> 时间：2013-03-24T13:55:04.637
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, http-status-code-404

我正在使用一个 asp.net mvc 应用程序。我在 web.config 中有以下条目来处理 404

```
 <httpErrors errorMode="Custom" existingResponse="Replace">
<remove statusCode="404" subStatusCode="-1" />
<error statusCode="404" path="/Error/Error404" responseMode="ExecuteURL" />
</httpErrors> 
```

这适用于请求页面时，它重定向到我的 404 视图。但是，对于丢失的图像，它也会重定向到 404 页面，即。图像的响应是 404 页面。

由于这是一个性能问题，有什么办法可以改变上述内容，以便只有“页面”中的 404 而不是图像等资源触发重定向到 404 页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-28T15:20:36.347

我知道这是一个老问题，但是我刚刚遇到了同样的问题，并且我能够根据我在 htaccess 中使用的内容提出一个解决方案。

下面的解决方案基本上检查文件是否具有图像扩展名，它不是文件也不是目录。之后，它会提供一个图像文件，我用它来识别丢失的图像。

```
<rule name="404 Images" stopProcessing="true">
    <match url=".*" ignoreCase="true" />
    <conditions>
        <add input="{URL}" pattern="^.+\.(jpg|jpeg|png|gif|ico)$" ignoreCase="true" negate="false" />
        <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="true" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="true" negate="true" />
    </conditions>
    <action type="Rewrite" url="/design/images/404.png" />
</rule> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T13:57:12.083

您可以禁用`runAllManagedModulesForAllRequests`：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="false" />
    ...
</system.webServer> 
```

当然，现在您将看到 IIS 默认 404 页面显示损坏的图像，因为静态资源将直接由静态处理程序提供服务，而不是通过托管管道。

# ruby-on-rails - 检索用户的所有评论（深度嵌套）

> ID：15599313
> 
> 赞同：0
> 
> 时间：2013-03-24T13:55:05.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, nested

那是我的路由：

```
resources :posts do
   resources :comments
  end 
```

我的用户类：

```
has_many :posts 
```

我的帖子类：

```
belongs_to :user
has_many :comments 
```

我的评论课

```
belongs_to :post 
```

在我的用户模型中，我想检索所有评论。对于帖子，它将是：

```
def all
  Post.where("user_id = ?", id)
end 
```

如何获得所有评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:01:15.840

我的 Rails 超级生锈，但它不会是这样的：

```
def all
    Comment.joins(:post).where(:posts => {:user_id => id})
end 
```

# javascript - 取消选中复选框时如何执行操作？

> ID：15599319
> 
> 赞同：2
> 
> 时间：2013-03-24T13:56:12.480
> 
> 标签：javascript, html, checkbox

好吧，基本上我有 3 个复选框。它们中的每一个都有一个布尔值，当单击按钮并选中该框时，该布尔值变为 true。

但是，在取消选中复选框而不必先点击另一个按钮来触发事件时，是否可以执行操作。

例如：我选择复选框 1 和 2。=> 我点击开始按钮 -> 复选框 1 和 2 的布尔值设置为真。=> 我取消选中复选框 2 -> 触发事件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T14:15:29.423

使用`onchange`激活一些javascript的输入标签的属性；例如：

HTML：

```
<input type = "checkbox" id = "checkbox_id" onchange = "change()" value = "foo"> 
```

JavaScript：

```
function change()
{
//do something
} 
```

# javascript - 修改替换字符串中的正则表达式匹配

> ID：15599322
> 
> 赞同：0
> 
> 时间：2013-03-24T13:56:28.963
> 
> 标签：javascript, regex

我有一些正则表达式的问题，无法从文本中获取 url，并通过函数再次修改替换字符串中的所有匹配项。下面的代码是我想要做的一个虚拟示例。这样的事情可能吗？

```
var exp = /\b((http:\/\/|https:\/\/)[\S]*)/g;
text = text.replace(exp, "<a href=\"$1\" title=\""+parseUri("$1").host+"\"></a>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:01:17.800

提供一个函数作为第二个参数`.replace`：

```
var exp = /\bhttps?:\/\/[\S]*/g;
text = text.replace(exp, function ($0) {
    return '<a href="' + $0 + '" title="' + parseUri($0).host + '"></a>'
}); 
```

（注意这`$0`只是一个变量名，你可以不同的命名）。

检查[`String.replace`MDN 上的文档](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)以了解替换函数参数的含义。第一个参数是整个正则表达式捕获的文本。然后接下来的 N 个参数是正则表达式中 N 个捕获组捕获的文本。

我也冒昧地重写了正则表达式。因为`\b`是一个断言，所以不会消耗任何文本。

# html - HTML/CSS 背景颜色

> ID：15599323
> 
> 赞同：0
> 
> 时间：2013-03-24T13:56:33.713
> 
> 标签：html, css, background-color

我一直在玩弄网站来弄清楚它们是如何工作的。通过下载它们并打开在 Dream Weaver CS6 中。但是当我在浏览器中打开下载的 html 文件时，除了绿色背景替换为默认的白色背景之外，一切都显示正常。看一看。 [http://www.bintrasher.com/index.html](http://www.bintrasher.com/index.html)

html:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0036)http://www.bintrasher.com/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link type="text/css" rel="stylesheet" href="./Bintrasher1_files/style.css">
<title>Bintrasher</title>
<style type="text/css"></style></head>

<body>

<div id="container">

    <div id="top_banner"><img src="./Bintrasher1_files/dragons_den.gif" alt="dragons den"></div>
    <div id="nav">
        <ul>
            <li><a href="./Bintrasher1_files/Bintrasher1.htm" class="selected">home</a></li>
            <li>|</li>
            <li><a href="http://www.bintrasher.com/domestic.html" class="main_link">domestic</a></li>
            <li>|</li>
            <li><a href="http://www.bintrasher.com/commercial.html" class="main_link">commercial</a></li>
            <li>|</li>
            <li><a href="http://www.bintrasher.com/videos.html" class="main_link">videos</a></li>
            <li>|</li>
            <li><a href="http://www.bintrasher.com/shop.html" class="main_link">shop</a></li>
            <li>|</li>
            <li><a href="http://www.bintrasher.com/contact.html" class="main_link">contact us</a></li>
        </ul>

    </div>
    <div id="content">
        <div id="left_column">
            <h1 class="header_home">Gain 40% more space in your wheelie bin!</h1>
            <p>
            Now with the Bin Trasher you can compact up to 40% of your waste to reduce overfilling and littering.
    </p><p>
    The sheer amount of waste produced by each household every week is increasing and the dangerous task of standing in your bin to squash your rubbish may be over!
    </p><p>
    We might just have the answer to your problem. The Bin Trasher is a simple gadget that compacts the waste and gives you 40% more space in your wheelie bin.

            </p>

        </div>
        <div id="right_column"><p>Watch our demonstration video now…&lt;/p>
        <object width="360" height="290"><param name="movie" value="http://www.youtube.com/v/7aHbTdhtrho&amp;hl=en&amp;fs=1"><param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always"><embed src="http://www.youtube.com/v/7aHbTdhtrho&amp;hl=en&amp;fs=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="360" height="290"></object>

        </div>
    </div>
    <div id="footer">
        <div id="col1">
                <p>
                <strong>Trade Enquiries Welcome</strong><br>
            <strong>Tel:</strong> 059 91 57629<br>
            <strong>Mobile:</strong> 087 206 9546<br>
            <strong>Email:</strong> <a href="maito:info@bintrasher.com">info@bintrasher.com</a></p>
        </div>
        <div id="col2">
                <p>
                <strong class="firstline">Great Value at only </strong><br>
                <strong>€49.95</strong><br>
                <strong class="lastline">Including VAT</strong>
                </p>
        </div>
        <div id="col3"><a href="http://www.bintrasher.com/shop.html"><img src="./Bintrasher1_files/buynow.gif"></a></div>
    </div>
    <p class="lower_left">Bin Trasher. 2010\. All rights reserved    </p>
    <p class="lower_right">Terms &amp; Conditions  |  Privacy Policy  |  Site Map<br>
    <a href="http://www.idea.ie/" target="_blank"><img src="./Bintrasher1_files/headers_26.gif"></a></p>
</div>

</body></html> 
```

CSS：

```
@charset "UTF-8";
/* CSS Document */

img{border:0;}

body {text-align:center; margin:23px 0; background:url(../images/bgr.gif); font-family:Verdana, Arial, Helvetica, sans-serif; font-size:0.8em; line-height:1.4em;}

p a{color:#CC0000;}
p a:hover{color:#3c671e;}

#container {width:931px; margin-left:auto; margin-right:auto; text-align:left;}

#top_banner {height:149px; background:url(../images/top_banner.gif) bottom no-repeat; text-align:right;}

#nav {height:35px; background:url(../images/top_ban_bit.gif) no-repeat right #4a4a30; color:#FFFFFF;}
#nav ul{list-style-type:none; margin:0; padding:0 0 0 10px;}
#nav li{float:left;  padding:6px 0.9em 0 0.9em; font-size:1.2em;}

#content{background:#FFFFFF; overflow:hidden; border-bottom:dotted 2px #006633;}

#left_column{ float:left; width:460px; padding:30px 30px;}

#right_column{margin-left:520px; padding:30px 20px;}

#footer{clear:both; background:#FFFFFF; overflow:hidden; padding:10px 20px 10px 30px; }
#footer div{float:left; width:33%;}

#col1 strong {color:#3c671e; text-transform:uppercase; font-weight:normal;}

#col2 strong {color:#5c8424; font-size:4em; line-height:1.2em;}
#col2 .firstline{color:#333333; font-size:1.6em;}
#col2 .lastline{font-size:1em; color:#333333;}

#col3 {text-align:right; padding-top:30px;}

.main_link {color:#FFFFFF; text-decoration:none;}
.main_link:hover, .selected{color:#669b41; text-decoration:none;}

p.lower_left{float:left; font-size:0.8em; color:#FFFFFF;}
p.lower_right{float:right; font-size:0.8em; color:#FFFFFF; text-align:right;}

.header_home{background:url(../images/heading_home.gif) no-repeat; width:456px; height:73px; text-indent:-5000px;}
.header_industrial{background:url(../images/heading_industrial.gif) no-repeat; width:456px; height:73px; text-indent:-5000px;} 
```

可能有一个非常简单的答案，因为我对 Web 开发非常陌生。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:03:45.920

代替

背景：网址（../images/bgr.gif）；

你需要写

背景：网址（[http://www.bintrasher.com/images/bgr.gif](http://www.bintrasher.com/images/bgr.gif)）；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T14:02:38.493

我猜是缺少参考（css 文件）。您是否具有与服务器上相同的文件结构？我敢打赌它会工作。

# ios - mediaserverd 导致内存警告

> ID：15599324
> 
> 赞同：1
> 
> 时间：2013-03-24T13:56:40.737
> 
> 标签：ios, memory, avaudioplayer

我的应用程序在几次调试会话后不断收到内存警告和崩溃，因为最多`mediaserverd`使用. 在第一个调试会话期间，它使用和.`285 MB real memory``359 MB virtual memory``9 MB real memory``77 MB virtual memory`

`AVAudioPlayer`该应用程序使用一个对象从媒体库播放有声读物。

有什么办法可以减少`mediaserverd's`内存占用？

# ninject - 寻找行为类似于 InRequestScope 的 Ninject 范围

> ID：15599325
> 
> 赞同：6
> 
> 时间：2013-03-24T13:56:41.297
> 
> 标签：ninject, entity-framework-5, repository-pattern, unit-of-work

在我的服务层上，我`UnitOfWork`在构造函数中注入了一个和两个存储库。工作单元和存储库有一个`DbContext`我想在他们两个之间共享的实例。我怎么能用 Ninject 做到这一点？应该考虑哪个范围？

我**不在网络应用程序中**，所以我不能使用`InRequestScope`.

我尝试做类似的事情......但是我正在使用DI，我需要`Dispose`像这样创建和创建我的UoW。

```
using (IUnitOfWork uow = new UnitOfWorkFactory.Create())
{
    _testARepository.Insert(a);
    _testBRepository.Insert(b);

    uow.SaveChanges();
} 
```

编辑：我只是想确保我理解......在查看[https://github.com/ninject/ninject.extensions.namedscope/wiki/InNamedScope](https://github.com/ninject/ninject.extensions.namedscope/wiki/InNamedScope)之后，我虽然了解了我当前实际使用 Ninject 的控制台应用程序架构。

让我们说：

A类是服务层类

B类是一个工作单元，它以接口为参数（IContextFactory）

C类是一个存储库，它接受一个接口（IContextFactory）的参数

这里的想法是能够在 2 个或更多存储库上执行上下文操作，并使用工作单元来应用更改。

D 类是一个上下文工厂（实体框架），它提供了一个在 B 类和 C 类之间共享的上下文实例（保存在容器中）（.. 也将用于其他存储库）。

上下文工厂将实例保存在他的容器中，所以我不想重用这个实例的所有名称，因为上下文需要在服务操作结束时被释放。这实际上是 InNamedScope 的主要目的吗？

解决方案是，但我完全不确定我做得对，服务实例将是transcient，这意味着它们实际上从未处理过？：

```
Bind<IScsContextFactory>()
    .To<ScsContextFactory>()
    .InNamedScope("ServiceScope")
    .WithConstructorArgument(
         "connectionString", 
         ConfigurationUtility.GetConnectionString());

Bind<IUnitOfWork>().To<ScsUnitOfWork>();

Bind<IAccountRepository>().To<AccountRepository>();
Bind<IBlockedIpRepository>().To<BlockedIpRepository>();

Bind<IAccountService>().To<AccountService>().DefinesNamedScope("ServiceScope");
Bind<IBlockedIpService>().To<BlockedIpService>().DefinesNamedScope("ServiceScope"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T22:22:35.840

更新：此方法适用于当前的 NuGet，但依赖于`InCallscope`实现中的异常，该异常已在当前的 Unstable NuGet 包中修复。我将在几天内调整这个答案，以反映经过一番思考后的最佳方法。请注意，构建东西的高级方式将保持几乎相同，只是`Bind<DbContext>()`范围界定的确切细节将起作用。（提示：`CreateNamedScope`在不稳定的情况下可以工作，或者可以将命令处理程序设置为`DefinesNamedScope`。我不这样做的原因是我想要一些可以很好地组合/播放的东西 `InRequestScope`）

* * *

我强烈建议阅读`Ninject.Extensions.NamedScope`集成测试（说真的，找到它们并阅读并重新阅读它们）

这`DbContext` **是**一个工作单元，因此不需要进一步包装。

由于您希望能够进行多个“请求”并希望在它们之间共享一个工作单元，因此您需要：

```
Bind<DbContext>()
    .ToMethod( ctx => 
        new DbContext( 
            connectionStringName: ConfigurationUtility.GetConnectionString() ))
    .InCallScope(); 
```

这`InCallScope()`意味着：

1.  对于为单个`kernel.Get()` **调用**（因此在*调用*范围内）组成的给定对象图，需要 an 的每个人都`DbContext`将获得相同的实例。
2.  `IDisposable`. _ `Dispose()`将`Kernel.Release()`在根对象发生 a 时调用（`Kernel.Components.Get<ICache>().Clear()`如果不是，则根对象发生a `.InCallScope()`）

应该没有理由使用`InNamedScope()`and `DefinesNamedScope()`; 您没有尝试从默认池/育儿/分组中排除的长寿对象。

如果您执行上述操作，您应该能够：

```
var command = kernel.Get<ICommand>();
try {
    command.Execute();
} finally {
    kernel.Components.Get<ICache>().Clear( command ); // Dispose of DbContext happens here
} 
```

命令实现如下所示：

```
class Command : ICommand {
    readonly IAccountRepository _ar;
    readonly IBlockedIpRepository _br;
    readonly DbContext _ctx;
    public Command(IAccountRepository ar, IBlockedIpRepository br, DbContext ctx){
        _ar = ar;
        _br = br;
        _ctx = ctx;
    }
    void ICommand.Execute(){
        _ar.Insert(a);
        _br.Insert(b);
        _ctx.saveChanges();
    }
} 
```

* * *

请注意，一般情况下，我会避免以这种方式使用隐式工作单元，而是将它的创建和`Disposal`. 这使得命令看起来像这样：

```
class Command : ICommand {
    readonly IAccountService _as;
    readonly IBlockedIpService _bs;
    readonly Func<DbContext> _createContext;
    public Command(IAccountService @as, IBlockedIpServices bs, Func<DbContext> createContext){
        _as = @as;
        _bs = bs;
        _createContext = createContext;
    }
    void ICommand.Execute(){
        using(var ctx = _createContext()) {
            _ar.InsertA(ctx);
            _br.InsertB(ctx);
            ctx.saveChanges();
        }
   } 
```

这不涉及`.InCallScope()`on the 的使用`Bind<DbContext>()`（但确实需要[`Ninject.Extensions.Factory`'s`FactoryModule`](https://github.com/ninject/ninject.extensions.factory/wiki)的存在才能`Func<DbContext>`从简单的`Bind<DbContext>()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:22:45.010

正如在[另一个答案](https://stackoverflow.com/a/15604758/11635)中所讨论的，`InCallScope`这不是解决这个问题的好方法。

现在，我正在倾销一些适用于最新 NuGet Unstable / Include PreRelease / `Instal-Package -Pre`版本的代码，`Ninject.Web.Common`但没有明确的解释。我~~将把它翻译成 wiki 中的一篇文章，`Ninject.Extensions.NamedScope`在某个阶段~~已经开始在 wiki 的 CreateNamedScope/GetScope 文章中编写此技术[的`Ninject.Extensions.NamedScope`演练](https://github.com/ninject/ninject.extensions.namedscope/wiki/Createnamedscope-getscope)。

可能一些位也会在某个阶段成为拉取请求（向@Remo Gloor 致敬，他为我提供了大纲代码）。相关的[测试和学习测试现在都在这个要点中](https://gist.github.com/bartelink/5671464)），等待以适当的发布格式打包（待定）。

执行摘要是您将下面的模块加载到您的内核中，并在每个处理程序调用中使用`.InRequestScope()`您想要创建/ `Dispose`d 的所有内容，然后通过`IHandlerComposer.ComposeCallDispose`.

如果您使用以下模块：

```
public class Module : NinjectModule
{
    public override void Load()
    {
        Bind<IHandlerComposer>().To<NinjectRequestScopedHandlerComposer>();

        // Wire it up so InRequestScope will work for Handler scopes
        Bind<INinjectRequestHandlerScopeFactory>().To<NinjectRequestHandlerScopeFactory>();
        NinjectRequestHandlerScopeFactory.NinjectHttpApplicationPlugin.RegisterIn( Kernel );
    }
} 
```

工厂 [1] 中的哪些电线`NinjectHttpApplicationPlugin`暴露：

```
public interface INinjectRequestHandlerScopeFactory
{
    NamedScope CreateRequestHandlerScope();
} 
```

然后你可以使用这个 Composer 来运行一个请求`InRequestScope()`：

```
public interface IHandlerComposer
{
    void ComposeCallDispose( Type type, Action<object> callback );
} 
```

实现为：

```
class NinjectRequestScopedHandlerComposer : IHandlerComposer
{
    readonly INinjectRequestHandlerScopeFactory _requestHandlerScopeFactory;

    public NinjectRequestScopedHandlerComposer( INinjectRequestHandlerScopeFactory requestHandlerScopeFactory )
    {
        _requestHandlerScopeFactory = requestHandlerScopeFactory;
    }

    void IHandlerComposer.ComposeCallDispose( Type handlerType, Action<object> callback )
    {
        using ( var resolutionRoot = _requestHandlerScopeFactory.CreateRequestHandlerScope() )
            foreach ( object handler in resolutionRoot.GetAll( handlerType ) )
                callback( handler );
    }
} 
```

Ninject 基础设施的东西：

```
class NinjectRequestHandlerScopeFactory : INinjectRequestHandlerScopeFactory
{
    internal const string ScopeName = "Handler";

    readonly IKernel _kernel;

    public NinjectRequestHandlerScopeFactory( IKernel kernel )
    {
        _kernel = kernel;
    }

    NamedScope INinjectRequestHandlerScopeFactory.CreateRequestHandlerScope()
    {
        return _kernel.CreateNamedScope( ScopeName );
    }

    /// <summary>
    /// When plugged in as a Ninject Kernel Component via <c>RegisterIn(IKernel)</c>, makes the Named Scope generated during IHandlerFactory.RunAndDispose available for use via the Ninject.Web.Common's <c>.InRequestScope()</c> Binding extension.
    /// </summary>
    public class NinjectHttpApplicationPlugin : NinjectComponent, INinjectHttpApplicationPlugin
    {
        readonly IKernel kernel;

        public static void RegisterIn( IKernel kernel )
        {
            kernel.Components.Add<INinjectHttpApplicationPlugin, NinjectHttpApplicationPlugin>();
        }

        public NinjectHttpApplicationPlugin( IKernel kernel )
        {
            this.kernel = kernel;
        }

        object INinjectHttpApplicationPlugin.GetRequestScope( IContext context )
        {
            // TODO PR for TrgGetScope
            try
            {
                return NamedScopeExtensionMethods.GetScope( context, ScopeName );
            }
            catch ( UnknownScopeException )
            {
                return null;
            }
        }

        void INinjectHttpApplicationPlugin.Start()
        {
        }

        void INinjectHttpApplicationPlugin.Stop()
        {
        }
    }
} 
```

# python - 如何让 Python 运行得更快？

> ID：15599326
> 
> 赞同：0
> 
> 时间：2013-03-24T13:56:43.813
> 
> 标签：python

我正在尝试计算所有低于 200 万的素数的总和，因为我已经编写了一个函数来查找小于给定数字的素数，所以我只是编写了一个新函数，它调用旧函数并将该列表中的项目。

但它似乎需要永远。如何加快此代码的速度？

```
def find_primes(n):
    "Find the prime numbers below n"
    primes=[];
    for i in range(2,n):
        for fac in range (2,i):
            if i!=fac and i%fac == 0:
                break
        else:
            primes.append(i)
    return primes

def add_primes(m):
    "Sum all the prime numbers below m"
    newlist=find_primes(m);
    t=sum(newlist);
    return t 
```

PS：我是一个Python新手，所以如果你能很好地解释我的错误，我会很高兴。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:59:08.540

实施[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。这将使您的代码比目前做的工作少得多，使其速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:08:45.597

`fac in range (2,i)`您可以通过将 for行替换为以下代码来改进当前代码：

```
for fac in primes: 
```

代码：

```
def find_primes1(n):
    "Find the prime numbers below n"
    primes=[2,3]     #initialize primes with 2 values
    for i in range(4,n):
        for fac in primes:
            if i!=fac and i%fac == 0:
                break
        else:
            primes.append(i)
    return primes 
```

时间比较：

```
In [6]: %timeit find_primes(10**4)   # your version
1 loops, best of 3: 2.33 s per loop

In [7]: %timeit find_primes1(10**4)
1 loops, best of 3: 171 ms per loop

In [8]: find_primes1(10**3)==find_primes(10**3)
Out[8]: True 
```

但是对于较大的值，您绝对应该学习[Eratosthenes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)法。

# xml - 验证 appengine-web.xml 时出现 GWT 内部错误

> ID：15599335
> 
> 赞同：1
> 
> 时间：2013-03-24T13:57:23.693
> 
> 标签：xml, google-app-engine, font-awesome

当我尝试部署到 GAE 时，出现错误：

*针对 appengine-web.xsd 验证 appengine-web.xml 的 XML 错误*

我的*appengine-web.xml*看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
<application>whatever</application>
<version>0-8-4</version>

<!-- Configure serving/caching of GWT files -->
<static-files>
  <include path="**" />

  <!-- The following line requires App Engine 1.3.2 SDK -->
  <include path="**.nocache.*" expiration="0s" />

  <include path="**.cache.*" expiration="365d" />
  <exclude path="**.gwt.rpc" />

  <!-- To use Font Awesome in Firefox -->
  <include path="/../**" >
       <http-header name="Access-Control-Allow-Origin" value="*" />
  </include>
</static-files>

<!-- Configure java.util.logging -->
<system-properties>
   <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
</system-properties>

<threadsafe>true</threadsafe>
</appengine-web-app> 
```

导致错误的行是：

```
 <!-- To use Font Awesome in Firefox -->
  <include path="/../**" >
       <http-header name="Access-Control-Allow-Origin" value="*" />
  </include> 
```

之前他们是这样的，但这也给出了同样的错误：

```
<include path="/../font" >
    <http-header name="Access-Control-Allow-Origin" value="*" />
</include>
<include path="/../css" >
    <http-header name="Access-Control-Allow-Origin" value="*" />
</include> 
```

任何人都可以看到有什么问题吗？

**编辑**这是我的战争文件结构的样子： ![在此处输入图像描述](../Images/b11e6b826d2dbe64be6199eeb498f602.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:30:12.590

最后，它对我有用：

```
<!-- Configure serving/caching of GWT files -->
<static-files>
  <!-- To use Font Awesome in Firefox -->
  <include path="**" >
     <http-header name="Access-Control-Allow-Origin" value="*" />
  </include>

  <!-- The following line requires App Engine 1.3.2 SDK -->
  <include path="**.nocache.*" expiration="0s" />

  <include path="**.cache.*" expiration="365d" />
  <exclude path="**.gwt.rpc" />

</static-files> 
```

# c# - 过滤掉括号之间的文本

> ID：15599344
> 
> 赞同：0
> 
> 时间：2013-03-24T13:57:58.147
> 
> 标签：c#, string, text

我有一个文本字符串，例如 [A203][Tom D.][Local.VV-12]，现在我只对最后一个文本感兴趣，[Local.VV-12]，我可以删除所有内容使用

```
string output = Regex.Replace(message, @" ?\[.*?\]", string.Empty); 
```

但这也删除了我的最后一个，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:04:10.027

更改您的正则表达式模式：

```
string output = Regex.Replace(message, @" ?\[.*?\](?i:\[.*?\])", string.Empty); 
```

退货`[Local.VV-12]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T14:04:30.333

试试这个使用`Substring`函数

```
string output=myString.Substring(myString.LastIndexOf("[")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T14:01:10.463

这个怎么样？

```
string output = Regex.Replace(message, @".*\[", "["); 
```

# cocoa - 了解 MainApp 是否由 HelperApp 启动

> ID：15599345
> 
> 赞同：2
> 
> 时间：2013-03-24T13:58:04.940
> 
> 标签：cocoa, sandbox, launching-application

我真的被一个简单的任务困在这里，但仍然无法让它工作。

[如本文](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)所述，我已设法使用 HelperApp 实现“LaunchAtLogin”功能。但是我的应用程序对**启动助手应用程序**和**启动用户**操作的反应应该不同。所以我现在的任务是有某种标志表明 MainApp 是由 HelperApp 启动的。

我知道有很多类似的问题，但仍然没有一个解决方案适合我。沙盒似乎切断了我试图发送到 MainApp 的所有参数。

这是我尝试过的：

```
- [NSWorkspace - launchApplicationAtURL: options: configuration: error:]
 - [NSWorkspace - openURLs: withAppBundleIdentifier: options: additionalEventParamDescriptor: launchIdentifiers:]
 - LSOpenApplication() 
```

直到最近，我还认为当用户手动启动应用程序时，我可以依赖Finder 发送的**-psn参数。**但是即使 MainApp 由 HelperApp 启动，此参数也会在 10.8 上发送。

在上面提到的[文章](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)中，作者建议使用`[NSWorkspace - launchApplicationAtURL: options: configuration: error:]`. 参数已发送，但没有任何内容到达 MainApp。

有没有人成功完成这个（或类似的）任务？

需要帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:43:19.810

经过地狱般的搜索和试验后，我准备回答我自己的问题，这样其他人就可以节省时间和精力。

我的结论是，目前 HelperApp 无法通过 Sandbox 下的一些参数启动 MainApp。至少我还没有找到任何方法来做到这一点。

像这样启动 MainApp：

```
[[NSWorkspace sharedWorkspace] launchApplication:newPath]; 
```

在 MainApp 中添加以下内容：

```
Application_IsLaunchedByHelperApp = YES;

ProcessSerialNumber currPSN;
OSStatus err = GetCurrentProcess(&currPSN);
if (!err)
{
    // Get information about our process
    NSDictionary * currDict = [(NSDictionary *)ProcessInformationCopyDictionary(&currPSN,
                                                                                kProcessDictionaryIncludeAllInformationMask) autorelease];

    // Get the PSN of the app that launched us. Its not really the parent app, in the unix sense.
    long long temp = [[currDict objectForKey:@"ParentPSN"] longLongValue];

    long long hi = (temp >> 32) & 0x00000000FFFFFFFFLL;
    long long lo = (temp >> 0) & 0x00000000FFFFFFFFLL;
    ProcessSerialNumber parentPSN = {(UInt32)hi, (UInt32)lo};

    // Get info on the launching process
    NSDictionary * parentDict = [(NSDictionary*)ProcessInformationCopyDictionary(&parentPSN,
                                                                                 kProcessDictionaryIncludeAllInformationMask) autorelease];

    // analyze
    // parent app info is not null ?
    if (parentDict && parentDict.count > 0)
    {
        NSString * launchedByAppBundleId = [parentDict objectForKey:@"CFBundleIdentifier"];
        if (![launchedByAppBundleId isEqualToString:HELPER_APP_BUNDLE_ID])
        {
            Application_IsLaunchedByHelperApp = NO;
        }
    }
} 
```

而已。`Application_IsLaunchedByHelperApp`现在有正确的价值。

解决方案不是我的。我在网上找到了它（我猜是cocoabuilder）。祝大家好运！并感谢您关注我的问题。

**更新** 看起来在登录应用程序显示时启动的情况`launchedByAppBundleId = @"com.apple.loginwindow"`。所以代码的最后一部分将如下所示：

```
 //
    // analyze
    //

    // parent app info is not null ?
    if (parentDict && parentDict.count > 0)
    {
        NSString * launchedByAppBundleId = [parentDict objectForKey:@"CFBundleIdentifier"];
        if (![launchedByAppBundleId isEqualToString:HELPER_APP_BUNDLE_ID] &&
            ![launchedByAppBundleId isEqualToString:@"com.apple.loginwindow"])
        {
            Application_IsLaunchedByHelperApp = NO;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:56:06.597

寻求答案的地方是 Apple 开发者论坛——那里的人们已经处理了有关帮助应用程序和沙盒的各种问题。搜索应用程序组和自定义 URL 方案可以追溯到 1-2 年，可能会找到满足您需求的解决方案。如果您仍然无法在这些论坛上发布问题，那么有人可能会知道您需要什么。

如果您不是 Apple 开发人员，因此无法访问这些论坛，或者不打算通过 Mac App Store 分发，那么只需关闭沙盒 - 在当前状态下，这不是您选择使用的技术... HTH。

# asp.net - Telerik ASP.NET AJAX RadTreeView 显示来自两个连接表的分层数据

> ID：15599354
> 
> 赞同：1
> 
> 时间：2013-03-24T13:58:38.590
> 
> 标签：asp.net, telerik, webforms

我想使用 Telerik RAD TreeView 控件在其中显示部门和员工，如下所示：

```
-Dep1
   --Emp1
   --Emp2
-Dep2
   --Emp3
-Dep3
  --Emp4
  --Emp5 
```

我有 2 个表Employees 和Department 具有一对多的关系，所以DepartmentId 在两个表中。

所有在线演示都将使用自引用表显示分层数据，那么如何从 2 个连接表中实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:54:40.267

Make your data query statement look like the hierarchical data you want to present.

Trying querying your data with a statement like:

```
SELECT 
    DeptId as Id,   
    NULL as ParentId,   
    Name 
FROM 
    dept
UNION
SELECT 
    EmpID*1000 as Id,           
    DeptId as ParentId,         
    Name
FROM 
    Emp 
```

Then you can bind your RadTreeView with arguments like the following:

```
<telerik:RadTreeView ID="RadTreeView1" runat="server" Width="100%" Height="250px"
                DataSourceID="MyDataSource" DataFieldID="Id" DataFieldParentID="ParentId"
                DataTextField="Name">
</telerik:RadTreeView> 
```

# random - 如何随机化一些矩形的颜色

> ID：15599355
> 
> 赞同：1
> 
> 时间：2013-03-24T13:58:43.540
> 
> 标签：random, colors, javafx

我正在为一个学校项目制作一个记忆游戏，它运行得很好，所以一切都按照它应该的方式运行，但是有一个问题。我不知道如何让卡片的颜色，每次玩游戏时矩形随机化。

```
import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.scene.text.Text;
import javafx.scene.text.Font;
import javafx.scene.shape.Rectangle;
import javafx.scene.paint.Color;
import javafx.scene.control.Button;

var rectangle1: Rectangle;
var rectangle2: Rectangle;
var rectangle3: Rectangle;
var rectangle4: Rectangle;
var rectangle5: Rectangle;
var rectangle6: Rectangle;
var rectangle7: Rectangle;
var rectangle8: Rectangle;
var rectangle9: Rectangle;
var rectangle10: Rectangle;
var rectangle11: Rectangle;
var rectangle12: Rectangle;
var rectangle13: Rectangle;
var rectangle14: Rectangle;
var rectangle15: Rectangle;
var rectangle16: Rectangle;
var kaarten = ["","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red",];
var kaartzichtbaar = [true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true];
var gekozenkaart = [0,0,0];
var tekst = "beginnen maar";
var aantalclicks = 0;
var kaartkeuze = ["",""];
var scene: Scene;
var button: Button;
var score = 0;

function KaartControle (){
    if (aantalclicks == 2){
        if(kaartkeuze [0] == kaartkeuze[1]){
            tekst = "goed bezig!";
            kaartzichtbaar[gekozenkaart[0]]=false;
            kaartzichtbaar[gekozenkaart[1]]=false;
            aantalclicks = 0;
            score++;
        }
    }
    else if (aantalclicks == 3) {
        tekst = "jammer!";
        kaarten[gekozenkaart[0]]="red";
        kaarten[gekozenkaart[1]]="red";
        kaarten[gekozenkaart[2]]="red";
        aantalclicks = 0;
        score--;
    }
    if (score==8) {
    tekst="Hoera!! Het spel is voltooid";
    }
}

Stage {
    title: "Memory"
    scene: Scene {
        width: 500
        height: 300
        content: [
            Text {
                font: Font {
                    size: 16
                }
                x: 10
                y: 30
                content: bind tekst;
            }
            Text {
                font: Font {
                    size: 16
                }
                x: 250
                y: 30
                content: bind score.toString();
            }
            button = Button {
                translateX: 300
                translateY: 150
                text: "reset"
                visible: true
                action: function() {
                    kaartzichtbaar = [true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true];
                    kaarten = ["","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red",];
                    aantalclicks = 0;
                    score = 0;
                    tekst = "beginnen maar"
                }
            }
            //Kaart 1
            rectangle1 = Rectangle {
                visible: bind kaartzichtbaar[1]
                width: 50
                height: 50
                x: 10
                y: 50
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[1])
                onMouseClicked: function(event) {
                    if (kaarten[1] == "red"){
                        kaarten[1] = "green";
                        kaartkeuze[aantalclicks]="1";
                        gekozenkaart[aantalclicks]= 1;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 2
            rectangle2 = Rectangle {
                visible: bind kaartzichtbaar[2]
                width: 50
                height: 50
                x: 10
                y: 110
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[2])
                onMouseClicked: function(event) {
                    if (kaarten[2] == "red"){
                        kaarten[2] = "green";
                        kaartkeuze[aantalclicks]="1";
                        gekozenkaart[aantalclicks]= 2;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 3
            rectangle3 = Rectangle {
                visible: bind kaartzichtbaar[3]
                width: 50
                height: 50
                x: 10
                y: 170
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[3])
                onMouseClicked: function(event) {
                    if (kaarten[3] == "red"){
                        kaarten[3] = "cyan";
                        kaartkeuze[aantalclicks]="2";
                        gekozenkaart[aantalclicks]= 3;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 4
            rectangle4 = Rectangle {
                visible: bind kaartzichtbaar[4]
                width: 50
                height: 50
                x: 10
                y: 230
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[4])
                onMouseClicked: function(event) {
                    if (kaarten[4] == "red"){
                        kaarten[4] = "cyan";
                        kaartkeuze[aantalclicks]="2";
                        gekozenkaart[aantalclicks]= 4;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 5
            rectangle5 = Rectangle {
                visible: bind kaartzichtbaar[5]
                width: 50
                height: 50
                x: 70
                y: 50
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[5])
                onMouseClicked: function(event) {
                    if (kaarten[5] == "red"){
                        kaarten[5] = "yellow";
                        kaartkeuze[aantalclicks]="3";
                        gekozenkaart[aantalclicks]= 5;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 6
            rectangle6 = Rectangle {
                visible: bind kaartzichtbaar[6]
                width: 50
                height: 50
                x: 70
                y: 110
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[6])
                onMouseClicked: function(event) {
                    if (kaarten[6] == "red"){
                        kaarten[6] = "yellow";
                        kaartkeuze[aantalclicks]="3";
                        gekozenkaart[aantalclicks]= 6;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 7
            rectangle7 = Rectangle {
                visible: bind kaartzichtbaar[7]
                width: 50
                height: 50
                x: 70
                y: 170
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[7])
                onMouseClicked: function(event) {
                    if (kaarten[7] == "red"){
                        kaarten[7] = "purple";
                        kaartkeuze[aantalclicks]="4";
                        gekozenkaart[aantalclicks]= 7;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 8
            rectangle8 = Rectangle {
                visible: bind kaartzichtbaar[8]
                width: 50
                height: 50
                x: 70
                y: 230
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[8])
                onMouseClicked: function(event) {
                    if (kaarten[8] == "red"){
                        kaarten[8] = "purple";
                        kaartkeuze[aantalclicks]="4";
                        gekozenkaart[aantalclicks]= 8;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 9
            rectangle9 = Rectangle {
                visible: bind kaartzichtbaar[9]
                width: 50
                height: 50
                x: 130
                y: 50
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[9])
                onMouseClicked: function(event) {
                    if (kaarten[9] == "red"){
                        kaarten[9] = "grey";
                        kaartkeuze[aantalclicks]="5";
                        gekozenkaart[aantalclicks]= 9;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 10
            rectangle10 = Rectangle {
                visible: bind kaartzichtbaar[10]
                width: 50
                height: 50
                x: 130
                y: 110
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[10])
                onMouseClicked: function(event) {
                    if (kaarten[10] == "red"){
                        kaarten[10] = "grey";
                        kaartkeuze[aantalclicks]="5";
                        gekozenkaart[aantalclicks]= 10;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 11
            rectangle11 = Rectangle {
                visible: bind kaartzichtbaar[11]
                width: 50
                height: 50
                x: 130
                y: 170
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[11])
                onMouseClicked: function(event) {
                    if (kaarten[11] == "red"){
                        kaarten[11] = "magenta";
                        kaartkeuze[aantalclicks]="6";
                        gekozenkaart[aantalclicks]= 11;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 12
            rectangle12 = Rectangle {
                visible: bind kaartzichtbaar[12]
                width: 50
                height: 50
                x: 130
                y: 230
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[12])
                onMouseClicked: function(event) {
                    if (kaarten[12] == "red"){
                        kaarten[12] = "magenta";
                        kaartkeuze[aantalclicks]="6";
                        gekozenkaart[aantalclicks]= 12;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 13
            rectangle13 = Rectangle {
                visible: bind kaartzichtbaar[13]
                width: 50
                height: 50
                x: 190
                y: 50
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[13])
                onMouseClicked: function(event) {
                    if (kaarten[13] == "red"){
                        kaarten[13] = "orange";
                        kaartkeuze[aantalclicks]="7";
                        gekozenkaart[aantalclicks]= 13;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 14
            rectangle14 = Rectangle {
                visible: bind kaartzichtbaar[14]
                width: 50
                height: 50
                x: 190
                y: 110
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[14])
                onMouseClicked: function(event) {
                    if (kaarten[14] == "red"){
                        kaarten[14] = "orange";
                        kaartkeuze[aantalclicks]="7";
                        gekozenkaart[aantalclicks]= 14;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 15
            rectangle15 = Rectangle {
                visible: bind kaartzichtbaar[15]
                width: 50
                height: 50
                x: 190
                y: 170
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[15])
                onMouseClicked: function(event) {
                    if (kaarten[15] == "red"){
                        kaarten[15] = "blue";
                        kaartkeuze[aantalclicks]="8";
                        gekozenkaart[aantalclicks]= 15;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
            //Kaart 16
            rectangle16 = Rectangle {
                visible: bind kaartzichtbaar[16]
                width: 50
                height: 50
                x: 190
                y: 230
                arcWidth: 10
                arcHeight: 10
                fill: bind Color.web(kaarten[16])
                onMouseClicked: function(event) {
                    if (kaarten[16] == "red"){
                        kaarten[16] = "blue";
                        kaartkeuze[aantalclicks]="8";
                        gekozenkaart[aantalclicks]= 16;
                        aantalclicks ++;
                        KaartControle()
                    }
                }
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:05:02.460

尝试这个。

```
import java.util.Random;

def colors = [
    Color.web("#d02020"),
    Color.web("#ff8010"),
    Color.web("#d0e000"),
    Color.web("#10c010"),
    Color.web("#3030f0"),
    Color.web("#d050ff"),
];

def rand = new Random();   
function randColor():Color {
    colors[rand.nextInt(sizeof colors)]
} 
```

源材料：[http ://www.smarks.org/svjugfx20100414/flood.html](http://www.smarks.org/svjugfx20100414/flood.html)

-更新-

随机颜色：

```
function getColor(): Integer
    {
        var c:java.awt.Color = new java.awt.Color(
            Math.random() * 255,
            Math.random() * 255,
            Math.random() * 255);

        return
        c.getRGB();
    } 
```

此函数获取一个随机 rgb 值，您可以在填充中使用该值。这意味着如果您不想要，则不需要颜色数组。

源材料：[http ://codersimperative.blogspot.com/2009/01/creating-custom-fill-in-javafx.html](http://codersimperative.blogspot.com/2009/01/creating-custom-fill-in-javafx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:17:23.273

好的，导入确实有效，但它们总是变黑，而不是随机颜色，我仍然不知道如何用一张卡保存随机颜色，我的代码，因为除了卡号之外它们都是相同的 enz 是：

```
import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.scene.text.Text;
import javafx.scene.text.Font;
import javafx.scene.shape.Rectangle;
import javafx.scene.paint.Color;
import javafx.scene.control.Button;
import java.util.Random;

def colors = [
    Color.web("#d0e000"),
    Color.web("#d02020"),
    Color.web("#ff8010"),
    Color.web("#10c010"),
    Color.web("#3030f0"),
    Color.web("#d050ff"),
];

def rand = new Random();

function randColor():Color {
    colors[rand.nextInt(sizeof colors)]
}

var rectangle1: Rectangle;
var rectangle2: Rectangle;
var rectangle3: Rectangle;
var rectangle4: Rectangle;
var rectangle5: Rectangle;
var rectangle6: Rectangle;
var rectangle7: Rectangle;
var rectangle8: Rectangle;
var rectangle9: Rectangle;
var rectangle10: Rectangle;
var rectangle11: Rectangle;
var rectangle12: Rectangle;
var rectangle13: Rectangle;
var rectangle14: Rectangle;
var rectangle15: Rectangle;
var rectangle16: Rectangle;
var kaarten = ["", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red",];
var kaartzichtbaar = [true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true];
var gekozenkaart = [0, 0, 0];
var tekst = "beginnen maar";
var aantalclicks = 0;
var kaartkeuze = ["", ""];
var scene: Scene;
var button: Button;
var score = 0;

function KaartControle() { if (aantalclicks == 2) { if (kaartkeuze[0] == kaartkeuze[1]) { tekst = "goed bezig!"; kaartzichtbaar[gekozenkaart[0]] = false; kaartzichtbaar[gekozenkaart[1]] = false; aantalclicks = 0; score++; } } else if (aantalclicks == 3) { tekst = "jammer!"; kaarten[gekozenkaart[0]] = "red"; kaarten[gekozenkaart[1]] = "red"; kaarten[gekozenkaart[2]] = "red"; aantalclicks = 0; score--; } if (score == 8) { tekst = "Hoera!! Het spel is voltooid"; } }

Stage {
    title: "Memory"
    scene: Scene {
        width: 500
        height: 300
        content: [
            Text {
                font: Font {
                    size: 16
                }
                x: 10
                y: 30
                content: bind tekst;
            }
            Text {
                font: Font {
                    size: 16
                }
                x: 250
                y: 30
                content: bind score.toString();
            }
            button = Button {
                        translateX: 300
                        translateY: 150
                        text: "reset"
                        visible: true
                        action: function() {
                            kaartzichtbaar = [true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true];
                            kaarten = ["", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red",];
                            aantalclicks = 0;
                            score = 0;
                        }
                    }

            //Kaart 1
            rectangle1 = Rectangle {
                        visible: bind kaartzichtbaar[1]
                        width: 50
                        height: 50
                        x: 10
                        y: 50
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[1])
                        onMouseClicked: function(event) {
                            if (kaarten[1] == "red") {
                                kaarten[1] = "randColor()";
                                kaartkeuze[aantalclicks] = "1";
                                gekozenkaart[aantalclicks] = 1;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    } 
```

# java - 在 java 中编译链表代码时的警告

> ID：15599358
> 
> 赞同：1
> 
> 时间：2013-03-24T13:58:54.323
> 
> 标签：java, list, compiler-construction, linked-list, warnings

我正在尝试编写一个简单的代码来使用 java.util.LinkedList 库在 Java 中实现链接列表。我已尽力保持它没有错误。

它确实使用 -Xlint:unchecked 编译（和执行）。但它会生成很多类型的警告 - LL.java:25: warning: [unchecked] unchecked call to add(E) as a member of raw type LinkedList

有人可以帮助我 1\. 理解为什么会这样？2.删除警告！

任何帮助将不胜感激...

```
import java.util.LinkedList;

class LL{
public static void main(String[] args){

    //creating a new linked list object
    LinkedList LLobj = new LinkedList();

    //adding data to linked list
    LLobj.add("T");
    LLobj.add("H");
    LLobj.add("I");
    LLobj.add("S");
    LLobj.add(" ");
    LLobj.add("I");
    LLobj.add("S");
    LLobj.add(" ");
    LLobj.add("A");
    LLobj.add(" ");
    LLobj.add("L");
    LLobj.add("I");
    LLobj.add("N");
    LLobj.add("K");
    LLobj.add("E");
    LLobj.add("D");
    LLobj.add("-");
    LLobj.add("L");
    LLobj.add("I");
    LLobj.add("S");
    LLobj.add("T");

    //printing the linked list
    System.out.println(LLobj);

    //Implementing more functions to add data
    LLobj.addFirst("#");
    LLobj.addLast("#");
    LLobj.add(5,"$");

    //printing the linked list
    System.out.println(LLobj);

    //removing data
    LLobj.remove("$");
    LLobj.remove("#");
    LLobj.remove("#");

    //printing the linked list
    System.out.println(LLobj);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T14:01:03.537

好吧，您使用的是泛型类型 ( [`LinkedList<E>`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html))，但您将其用作*原始*类型，就好像您不了解泛型一样。你想要这样的东西：

```
LinkedList<String> list = new LinkedList<String>();

list.add("T");
list.add("H"); 
```

这样，就所涉及的类型而言，您是*安全*的，并且您知道列表中的所有内容都是字符串。

在 Java 7 中，您可以使用[“菱形语法”](http://docs.oracle.com/javase/7/docs/technotes/guides/language/type-inference-generic-instance-creation.html)从左侧推断右侧的类型：

```
LinkedList<String> list = new LinkedList<>(); 
```

有关泛型（包括原始类型）*的更多*信息，请参阅[Java 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)。另请注意，在我的示例中，我如何将您的`LLobj`变量名（不遵循 Java 命名约定）重命名为`list`. 始终遵循命名约定是个好主意，尤其是在与他人共享代码时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T14:01:03.067

你只需要指定链表的类型，如下：

```
LinkedList<String> LLobj = new LinkedList<>(); 
```

这将告诉编译器只`String`使用 s 并且因此`.add()`方法的安全性，因为它们将只接受`String`输入（作为`String`一个`final`类并且不能被`extend`编辑）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T14:03:33.883

代码 :`LinkedList LLobj = new LinkedList();`必须替换为`LinkedList<String> LLobj = new LinkedList<String>();`

编译器会警告您，因为您没有在代码中使用泛型，即您需要在列表中保存的对象类型。通过在代码中不使用泛型，您可以在列表中输入任何类型的对象，例如：`LLobj.add(new Integer(10)); LLobj.add("ABC");`

**这将导致 ClassCastException**，因为您不知道列表中将出现哪种类型的对象。它可以是字符串或整数。因此它给出警告信息。通过使用特定类型，`LinkedList<String> LLobj = new LinkedList<String>();`您只能将 String 添加到列表中，因此任何地方都不会发生**ClassCastException 。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T14:01:16.610

改变

```
LinkedList LLobj = new LinkedList(); 
```

至

```
LinkedList<String> LLobj = new LinkedList<String>(); 
```

这将解决所有这些类型安全警告，因为现在编译器将知道您打算将`String`s 保留在列表中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T14:01:44.040

给它一个类型

例子：

```
LinkedList<String> LLobj = new LinkedList<String>(); 
```

# php - 使用提交获取下拉菜单的文本

> ID：15599359
> 
> 赞同：0
> 
> 时间：2013-03-24T13:59:01.013
> 
> 标签：php, post, drop-down-menu

我想问你们是否无论如何我可以获得下拉列表的值并将其传递给另一个 php 文件而不使用该方式？方式是我的菜单中有来自数据库的选项这是我在下拉菜单上的代码

```
mysql_connect("localhost", "root" , "");
mysql_select_db("hotelgal");
$query3 = "SELECT suite_code from tblsuite WHERE suite_name = '".$suitename."'";
$result3 = mysql_query($query3);
$row3 = mysql_fetch_assoc($result3);
$suite = $row3['suite_code'];
mysql_connect("localhost", "root" , "");
mysql_select_db("hotelgal");
$queryroom = "SELECT * from tblroom WHERE room_accommodation = '" . $suite . "' AND status = 'AVAILABLE'";
    $resultroom = mysql_query($queryroom);
if ($resultroom && mysql_num_rows($resultroom) > 0)
{
echo '<form name = "room" method = "get" action = "reserveupdate.php">';
echo '<select name = "room" id = "rooms">';
while($rows = mysql_fetch_assoc($resultroom))
{
echo '<option>' . $rows['room_no'] . '</option>';
}
echo '</select></form>';
} 
```

我对此没有问题，问题是我正在尝试选择下拉列表的文本并将其传递给另一个具有此代码的 php 文件

```
if (isset($_GET['room'])){
$query = "UPDATE tblreserve SET room_no = '" .$_GET['room']. "', status = 'APPROVED' WHERE reservation_code = '" . $reser . "'";
$res = mysql_query($query);
$query2 = "UPDATE tblroom SET status = 'OCCUPIED' WHERE room_no = '" . $_GET['room'] . "'";
$res2 = mysql_query($query2);
echo "<script>alert('Reservee Approved!'); window.location = './adminreserve.php';</script>";
} 
```

# mysql - 在mysql数据库中存储瑞典字符

> ID：15599374
> 
> 赞同：3
> 
> 时间：2013-03-24T14:00:55.133
> 
> 标签：mysql, utf-8, collation

我在 MySQL 数据库中存储瑞典语字符时遇到问题。我想将它们存储在`users`使用排序规则 utf8-bin 调用的表中。即使我使用的是 utf8，字符也会`å ä ö`被存储为`Ã¥ Ã¤ Ã¶`，我不知道为什么。检索数据并回显它给了我相同的输出，用奇怪的字符而不是`å ä ö`. 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T23:39:02.870

称呼

```
mysql_set_charset("utf8"); 
```

在连接之后和进行任何查询之前。

您的数据库字符集仅用于存储，而不是用于应用程序和数据库之间的传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:48:45.597

有几个地方，你必须注意编码。

*   数据库：您已经使用了 utf8 排序规则，所以没关系
*   数据库连接：[`mysqli_set_charset`](http://php.net/mysqli_set_charset)如果您使用的是 mysqli，则用于设置连接的字符集。其他数据库驱动程序也有类似的功能。
*   页面的输出编码：您可以使用 HTTP 标头或元标记。如果您想安全起见，请同时指定两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T02:01:47.557

这里有几个参数需要考虑。为了使现在和将来都能正常工作。与文本的所有不同交互都必须采用相同的编码。即使在 db 中（为了让连接正常工作等）。

1.  插入数据的编码（插入时设置在页眉和/或 utf_8 编码中）。

2.  db 表中的编码，（我建议所有人使用 utf8_swedish）

3.  页面查看结果的编码来自 db（在 header 中设置）

4.  正在编辑的页面的编码。它可以以不同的编码打开文档。如果您不熟悉它，这是一个大问题。以正确的编码打开并保存文档。

曾经有一个关于连接编码的问题，设置正确，但今天它比几年前的问题更小，因为发生了变化。

一些笔记。您确定您的数据是这样存储的，或者只是通过例如 phpmyademin 呈现错误？尝试使用 print utf8_encode($text) 打印

或者，utf8_decode() 函数，它可以让您深入了解...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:08:11.337

您应该确保数据库连接使用瑞典编码并且页面输出的编码也是正确的。不同的编码会导致许多这样的问题。在此处阅读有关字符编码的更多信息[。](http://www.w3.org/International/O-charset)

# php - FormType 默认输入值相同的形式

> ID：15599375
> 
> 赞同：0
> 
> 时间：2013-03-24T14:00:55.673
> 
> 标签：php, forms, symfony, symfony-2.2

我有一个名为 Task 的实体，并为表单构建了一个 Symfony TaskType.php。我的目标是默认将 endDate 日期时间字段设置为 startDate 日期时间字段的输入（这是必需的）。

我试过这个，但它不起作用。

```
$builder->add('name');
    $builder->add('startDate', 'datetime');
    $builder->add('endDate', 'datetime', array(
        'empty_value' => array('year' => 'Year', 'month' => 'Month', 'day' => 'Day'),
        'required' => false,
        'data' => isset($options['data']) ? $options['data']->getEndDate() : $options['data']->getStartDate(),

    )); 
```

例外：

> 使用参数 {"1":"test","2":"2013-03-30 00:00: 执行'INSERT INTO Task (name, startDate, endDate) VALUES (?, ?, ?)' 时发生异常00","3":null}:
> 
> SQLSTATE [23000]：违反完整性约束：1048 列 'endDate' 不能为空 500 内部服务器错误 - DBALException 1 链接异常：

```
PDOException » 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:24:08.063

是的，当然它不起作用。我建议阅读有关表单的工作原理，如果您没有时间可以阅读此“备忘单” - [http://blog.stfalcon.com/wp-content/uploads/2012/01/how_symfony2_forms_works.pdf](http://blog.stfalcon.com/wp-content/uploads/2012/01/how_symfony2_forms_works.pdf)。

您可以在设置数据后设置值。例如，尝试：

```
$form->bindRequest($request); 
// now you can get data and set 
$form->get('endDate')->setData($form->get('startDate')->getData()); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:20:42.033

您还可以在实例化实体类时设置它的值：

```
class Task
{
    protected $startDate;
    protected $endDate;

    public function __construct($startDate)
    {
        $this->startDate = $startDate;
        $this->endDate = $startDate;
    }
} 
```

# c# - 处理表单提交事件

> ID：15599394
> 
> 赞同：0
> 
> 时间：2013-03-24T14:02:13.423
> 
> 标签：c#, jquery, asp.net, .net, asp.net-mvc

我有以下表格：

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl, @class = "form-vertical login-form", id = "loginform" }))

                    <button type="submit" class="btn green pull-right">
                        Login <i class="m-icon-swapright m-icon-white"></i>
                    </button>

} 
```

这是处理事件函数的javascript

```
$(document).ready(function () {

            $("#loginform").submit(function () {
                alert('Handler for .submit() called.');
                return false;
            });
} 
```

然而，这根本不起作用。

永远不会触发警报

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:03:56.040

这很正常，你从来没有为你的表单分配一个`id`或一个`class`。查看浏览器中生成的 HTML 以了解我的意思。

您正在使用完全错误的`BeginForm`帮助程序重载。

试试这个：

```
@using (Html.BeginForm(null, null, new { returnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-vertical login-form", id = "loginform" }))
{
    <button type="submit" class="btn green pull-right">
        Login <i class="m-icon-swapright m-icon-white"></i>
    </button>
} 
```

现在请阅读[`BeginForm`](http://msdn.microsoft.com/en-us/library/dd492719%28v=vs.108%29.aspx)MSDN 上的不同重载并[`yours`](http://msdn.microsoft.com/en-us/library/dd470793%28v=vs.108%29.aspx)与[`mine`](http://msdn.microsoft.com/en-us/library/dd460542%28v=vs.108%29.aspx).

如您所见，`routeValues`参数和`htmlAttributes`参数之间存在差异。

# image - 如何在 MatLab 中去除椒盐噪声

> ID：15599396
> 
> 赞同：0
> 
> 时间：2013-03-24T14:02:32.363
> 
> 标签：image, matlab, mask, noise

嗨，我需要从图像中去除椒盐噪声。我的函数有 3 个参数 input_img_path、一个 mask(ij)==1 和 output_img_path。我需要有人解释那个面具是如何工作的以及如何消除噪音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T17:49:51.333

噪声过滤

在“wavread”命令中使用你录制的声音……</p>

这就是我从音频中去除噪音的方法，自己在图像上尝试一下。使用这个 medfilt2 去除图像中的噪音。希望它对你有用。 `[y,Fs]=wavread('C:\Users\user\Downloads\bugsbunny1.wav'); Y=imnoise(y,'salt & pepper',0.02); K= medfilt2(Y,[5 1]) wavplay(K)`

# java - 将图像从另一个文件夹导入eclipse

> ID：15599397
> 
> 赞同：1
> 
> 时间：2013-03-24T14:02:35.210
> 
> 标签：java, matlab

我已经在 eclipse 中编译了我的整个项目并且它可以工作文件。

我有一个`Embed.java`使用 Mat-lab 的类文件，它的基本作用是在使用 java API 时在 Mat-lab 中显示输出。
我使用开源“Mat-lab Control Google Code”实现了这一目标

我的代码包含两个图像，我尝试导入执行基本步骤的图像，

```
Project -> Right click -> Import -> General -> File System 
```

但它给了我一个错误（在 Mat-lab 中）图像不存在。

我还复制粘贴了`src`文件夹中的图像（在 Eclipse 中自动创建的那个），但仍然给我同样的错误。
除此之外，我还阅读了该论坛中的一些帖子，但对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:07:24.703

只需将图片从系统上的位置拖放到 Eclipse 的源代码树中（左侧）。然后，您应该会弹出一个询问是否将图像复制到文件夹或将原始图片移动到文件夹的弹出窗口。

问题还可能是您没有指向源代码中存储图像的正确位置。

# playframework-1.x - 如何理解`ApplicationClassloaderState#hashCode`的方法？

> ID：15599398
> 
> 赞同：1
> 
> 时间：2013-03-24T14:02:35.337
> 
> 标签：playframework-1.x

当我阅读play framework 1.2.5的源码时，我发现了这个类：

```
package play.classloading;

import java.util.concurrent.atomic.AtomicLong;

/**
 * Each unique instance of this class represent a State of the ApplicationClassloader.
 * When some classes is reloaded, them the ApplicationClassloader get a new state.
 * <p/>
 * This makes it easy for other parts of Play to cache stuff based on the
 * the current State of the ApplicationClassloader..
 * <p/>
 * They can store the reference to the current state, then later, before reading from cache,
 * they could check if the state of the ApplicationClassloader has changed..
 */
public class ApplicationClassloaderState {
    private static AtomicLong nextStateValue = new AtomicLong();

    private final long currentStateValue = nextStateValue.getAndIncrement();

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        ApplicationClassloaderState that = (ApplicationClassloaderState) o;

        if (currentStateValue != that.currentStateValue) return false;

        return true;
    }

    @Override
    public int hashCode() {
        return (int) (currentStateValue ^ (currentStateValue >>> 32));
    }
} 
```

我不明白这个`hashCode`方法，为什么它使用这个实现：

```
return (int) (currentStateValue ^ (currentStateValue >>> 32)); 
```

源码网址： [https ://github.com/playframework/play/blob/master/framework/src/play/classloading/ApplicationClassloaderState.java#L34](https://github.com/playframework/play/blob/master/framework/src/play/classloading/ApplicationClassloaderState.java#L34)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T00:06:30.470

hashCode() 必须按设计返回一个 int。currentStateValue 是一个长数字，表示 ApplicationClassloader 的内部状态变化。表演！framework 是一个复杂的 Web 框架，具有所谓的热代码替换和重新加载功能。此功能实现的核心部分是 play.classloading.ApplicationClassloader.detectChanges()。如您所见，有很多“新 ApplicationClassloaderState()”调用，这意味着（快速 - 取决于您的开发工作流程和应用程序大小）增加返回对象中的 currentStateValue 成员。

**回到问题：实现的目标应该是保持最大的信息，以区分至少 2 个不同的状态。**

尝试将 currentStateValue 理解为加密自身的（加密）密钥（用密码学术语来说是一种糟糕的方法），但在这种情况下它非常有用。也许你认识到这种关系。抱歉，我无法在此处发布链接，但您可以在维基百科中找到一些有用的提示，搜索“Involution_%28mathematics%29”、“One-time_pad”、“Tabula_recta”。

# regex - 需要帮助来查找用于姓名和姓氏验证的正则表达式

> ID：15599401
> 
> 赞同：0
> 
> 时间：2013-03-24T14:02:45.760
> 
> 标签：regex, validation

我试图找到有同样问题的人，但我没有找到任何东西。

我需要两个单独的正则表达式，一个用于名称，一个用于姓氏。

这里的命名规则：

*   名称不能以空格、数字或任何其他符号开头。
*   名称的长度必须至少为 3 个字符，最多为 15 个字符。
*   不允许使用符号。

一些允许的名称示例：

马尔科姆·沃尔特·鲍勃

乔瓦尼·弗朗西斯科

史蒂文

这里姓氏规则：

*   姓氏不能以空格、数字或任何其他符号开头。
*   姓氏的长度必须至少为 3 个字符，最多为 15 个字符。
*   姓氏可以包含撇号、点和破折号。

一些允许的姓氏示例：

达达里奥

伯纳斯·李

伯纳斯·李

奥莱利。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:07:48.537

名：

```
[a-zA-Z.\-']+ 
```

姓：

```
[a-zA-Z.\-' ]{3,15} 
```

结合：

```
[a-zA-Z.\-' ]+ [a-zA-Z.\-']{3,15} 
```

请记住，您对姓氏的限制非常严格——您将排除许多亚洲姓氏，例如 Li 或 Wu。

另外，我不确定您是否想将姓氏设为可选。如果是这样：

```
[a-zA-Z.\-' ]+ (?:[a-zA-Z.\-']{3,15})? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:37:44.797

对于名称 [AZ]{1}[az]{2,14}[^]

*   **[AZ]{1}**

1 个大写 AZ 字符。

*   **[az]{2,14}**

2 到 14 天

*   **[^]**

没有空格

* * *

对于姓氏 [A-Za-z/.-/']{3,15}[^ ]

*   **[A-Za-z/.-/']{3,15}**

AZ 或 az 。- ' 3 到 15 长

*   **[^]**

没有空格

* * *

试试这里[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# firebase - Firebase：设置孙子时，服务器上的优先级设置为空，但客户端上的优先级设置为空

> ID：15599403
> 
> 赞同：0
> 
> 时间：2013-03-24T14:03:13.153
> 
> 标签：firebase

要重现，请查看[http://jsfiddle.net/3aR7N/16/](http://jsfiddle.net/3aR7N/16/)。首先单击“设置孩子和孙子”，这会将孩子设置为优先级，然后在其中设置孙子。然后单击“显示本地值”，您会看到孩子的优先级似乎仍然为 123。您可以随意单击它 - 优先级始终返回为 123。

一旦您对本地优先级确实是 123 感到满意，请刷新整个页面。你会沮丧地看到现在的优先级为空。

我可以相信这是一个并发问题，会以`set`不同的顺序发生某些影响。设置孩子的预期行为会清除父母的优先级吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:40:00.437

感谢您提供简单的测试用例！这确实是一个错误。客户端和服务器处理这种情况的方式不同，这就是您看到这种不一致行为的原因。

请注意，仅当您“setWithPriority”一个原始值，然后在树中更深地写入（删除该原始值）时才会发生这种情况。

**更新：**这已经被修复了。

# visual-studio - 在我的 ASP .NET MVC 4 项目的 Visual Studio 中找不到本地 SQL 数据库

> ID：15599404
> 
> 赞同：2
> 
> 时间：2013-03-24T14:03:13.823
> 
> 标签：visual-studio, entity-framework, visual-studio-2012

我有一个在 Visual Studio 2012 中使用 EF 5（代码优先）的项目。当我构建数据库时，它可以工作，但由于某种原因它没有出现在 SQL Explorer 中。我在运行时检查了连接对象，可以看到本地数据库的名称没有在 SQL 资源管理器中列出。奇怪的是，这个项目在另一台机器上没有这个问题。该项目处于源代码控制之下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:54:26.040

检查您是否正在运行 Sql Server 的运行副本。

我也经历过同样的事情；创建一个项目，然后创建 EntityFramework 对象，然后运行该项目。VS 2012 在我当时正在运行的 2008 R2 数据库中创建了数据库，但我没有在 VS 中打开它，所以没有看到新的数据库。直到我专门在 VS 中打开了那个数据库，它才出现。

# cakephp - CakePHP，当给定父类别时，如何找到与子类别相关的所有产品？

> ID：15599405
> 
> 赞同：1
> 
> 时间：2013-03-24T14:03:26.360
> 
> 标签：cakephp, tree, parent-child

我有两个表被设置为使用树行为、制造商和类别。

产品只能属于一个类别并且只能属于一个制造商，但是某些制造商（子）归其他制造商（父）所有，同样某些类别（子）是另一个（父）的子类别。

我想做以下事情：

给定类别 id（父），查找子类别中的所有产品给定制造商 id（父），查找子制造商中的所有产品

我尝试了以下（在产品控制器中）：

```
$conditions['Product.category_id'] = $this->Product->Category->children($id,false,'id');
$this->paginate = array(
            'conditions' => $conditions,
            'limit' => 21
        );
$products = $this->paginate('Product');
$this->set(compact('products')); 
```

但它给了我这个：

```
 WHERE `Product`.`category_id` IN (Array, Array, Array, Array, Array, Array) 
```

**如果我做一个 print_r 我可以看到它正在获取我需要的信息（见下文），但我怎样才能得到它，有没有更好的方法来做到这一点？**

```
Array
(
[Product.category_id] => Array
    (
        [0] => Array
            (
                [Category] => Array
                    (
                        [id] => 11
                    )

            )

        [1] => Array
            (
                [Category] => Array
                    (
                        [id] => 12
                    )

            )

        [2] => Array
            (
                [Category] => Array
                    (
                        [id] => 23
                    )

            )

        [3] => Array
            (
                [Category] => Array
                    (
                        [id] => 24
                    )

            )

        [4] => Array
            (
                [Category] => Array
                    (
                        [id] => 25
                    )

            )

        [5] => Array
            (
                [Category] => Array
                    (
                        [id] => 26
                    )

            )

    )

) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:48:36.343

*查询失败，因为它需要一个仅*包含类别 ID的数组，如下所示：

```
$conditions['Product.category_id'] = array(1,4,5,6); 
```

`Hash::extract()`您可以通过使用（或者`Set::extract()`如果您使用的是 CakePHP 1.3）从数组中“提取”这些值来实现这一点

```
$categoryIds = $this->Product->Category->children($id,false,'id');

$conditions['Product.category_id'] = Hash::extract($categoryIds, '{n}.Category.id); 
```

在此处阅读有关 Hash Utility 的文档：

[http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html#Hash::extract](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html#Hash::extract)

# android - 9 补丁背景添加顶部和底部填充。如何避免？

> ID：15599407
> 
> 赞同：0
> 
> 时间：2013-03-24T14:03:35.237
> 
> 标签：android, nine-patch

我正在尝试`ToggleButton`在我的应用程序中进行自定义。我正在将 9-patch 图像设置为背景，如此[处](http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)所写。然后在我的布局xml中：

```
<ToggleButton
    android:id="@+id/toggle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/btn_toggle_bg"
    android:checked="true"
    android:gravity="center_horizontal|center_vertical" /> 
```

`btn_toogle_bg.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+android:id/background"
        android:drawable="@android:color/transparent"/>
    <item
        android:id="@+android:id/toggle"
        android:drawable="@drawable/btn_toggle"/>
</layer-list> 
```

`btn_toggle.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/btn_toggle_off" android:state_checked="false"/>
    <item android:drawable="@drawable/btn_toggle_on" android:state_checked="true"/>
</selector> 
```

9-patch 看起来像这样（`btn_toggle_off`）：

![btn_toggle_off](../Images/751492196ac02590e9a50c08139bf2f9.png)

检查状态的相同图像。

但是当我将其用作背景时，我会得到一些意想不到的顶部和底部填充：

![在此处输入图像描述](../Images/f0c0b498fc442291d099e8a0e8e5a66a.png)![在此处输入图像描述](../Images/f1405b07788c1cd7f326637dd32e58e7.png)

`Button`将此背景应用于或使用 xml-drawable 作为背景时，我得到了相同的结果。如何避免意外填充？请帮忙。

* * *

**更新：**

此外，当我将此样式添加到应用程序主题时，没有填充但变得不可`ToggleButton`点击（不改变其状态）：

`styles.xml`：

```
<style name="Widget.Button.Toggle" parent="android:Widget">
    <item name="android:background">@drawable/btn_toggle_bg</item>
    <item name="android:disabledAlpha">?android:attr/disabledAlpha</item>
</style> 
```

`themes.xml`：

```
<style name="MyThemeName" parent="@android:Theme.Black">
    <item name="android:buttonStyleToggle">@style/Widget.Button.Toggle</item>
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:23:43.330

看来我需要扩展`android:Widget.Button.Toggle`样式：

```
<style name="Widget.Button.Toggle" parent="android:Widget.Button.Toggle">
    <item name="android:background">@drawable/btn_toggle_bg</item>
    <item name="android:disabledAlpha">?android:attr/disabledAlpha</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:13:17.093

填充的原因是您的右侧黑色像素描述了内容应该放置的位置，应该是图像从上到下的整个长度。

尝试这个：

![在此处输入图像描述](../Images/1b76f9167354b54859b67cb58cbd05f0.png)

# c# - 在 rowdatabound 事件中设置 Gridview 的列宽。

> ID：15599411
> 
> 赞同：1
> 
> 时间：2013-03-24T14:03:49.273
> 
> 标签：c#, asp.net, sql, gridview

我有以下一段代码。我没有在我的网格视图中定义任何边界字段。我正在使用我的 aspx.cs 文件中的 sql 查询来检索数据。是否可以调整每列0、1、2的宽度？有什么方法可以调查吗？我已经尝试了很多方法，但仍然无法正常工作。请帮忙！

```
<asp:GridView ID="surgicalGridView" runat="server"
    CaptionAlign="Top" HorizontalAlign="Justify" 
    DataKeyNames="id" onselectedindexchanged="surgicalGridView_SelectedIndexChanged"
    ToolTip="Excel File Download Tool" CellPadding="4" ForeColor="#333333" 
    GridLines="None" Width="854px">

     <RowStyle BackColor="#E3EAEB" />
       <Columns>
       <asp:CommandField ShowSelectButton="True" SelectText="Download" 
               ControlStyle-ForeColor="Blue">
<ControlStyle ForeColor="Blue"></ControlStyle>
           </asp:CommandField>
       </Columns>
     <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
     <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
     <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
     <HeaderStyle   BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
     <EditRowStyle BackColor="#7C6F57" />
     <AlternatingRowStyle BackColor="White" />
        <SortedAscendingCellStyle BackColor="#F8FAFA" />
        <SortedAscendingHeaderStyle BackColor="#246B61" />
        <SortedDescendingCellStyle BackColor="#D4DFE1" />
        <SortedDescendingHeaderStyle BackColor="#15524A" />
    </asp:GridView>
    <br /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T14:14:39.327

您可以`OnRowDataBound`在`gridview`.

```
protected void surgicalGridView_RowDataBound(object o, GridViewRowEventArgs e)
{           
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
         e.Row.Cells[0].Width = new Unit("200px");
         e.Row.Cells[1].Width = new Unit("400px");
         // and so on
    } 
} 
```

将此添加到您的`Gridview`标记中

```
<asp:GridView ...............................
        onrowdatabound="surgicalGridView_RowDataBound">    // just add this event and execute the above code
 </asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:50:13.870

由于网格呈现为`table` `tr`，`dt`因此您可以将 css 类用于网格。
在那里您可以设置列的宽度。
在您可以使用的类`td`中，例如`td+td`，`td+td+td`等

根据帖子
[.NET Gridview 主题示例](https://stackoverflow.com/questions/1973240/net-gridview-themes-examples)

查看这些链接。

[http://icant.co.uk/csstablegallery/index.php?css=69#r69](http://icant.co.uk/csstablegallery/index.php?css=69#r69)

[http://mattberseth2.com/demo/](http://mattberseth2.com/demo/)有很多带有代码下载的gridview 自定义。

[寻呼](http://mattberseth2.com/demo/Default.aspx?Name=Using%20a%20DataPager%20with%20the%20GridView%20Control%20-%20Implementing%20IPageableItemContainer&Filter=All)

[使用滑块分页](http://mattberseth2.com/demo/Default.aspx?Name=A%20Slider%20DataPager%20with%20Dynamic%20Tooltips&Filter=All)

[使用排序图标排序](http://mattberseth2.com/demo/Default.aspx?Name=How%20To:%20Improve%20Column%20Sort%20Presentation%20for%20an%20ASP.NET%20GridView&Filter=All)

更多主题

[http://mattberseth2.com/demo/Default.aspx?Name=A+YUI+DataTable+Styled+GridView&Filter=All](http://mattberseth2.com/demo/Default.aspx?Name=A+YUI+DataTable+Styled+GridView&Filter=All) [http://mattberseth.com/blog/2007/11/5_gridview_themes_based_on_goo.html](http://mattberseth.com/blog/2007/11/5_gridview_themes_based_on_goo.html)

[![替代文字](../Images/3950a3238bca5e42743b0d276ab6ac49.png)](https://i.stack.imgur.com/qOvna.png)
[（来源：[mattberseth.com](http://mattberseth.com/WindowsLiveWriter/FiveGridViewThemesbasedon_11611/image%7B0%7D%5B5%5D.png)）]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T16:33:42.780

我的解决方案如下。我有一个包含 2 个已定义列的网格，其余列是动态绑定的。我不知道为什么用 (e.Row.Cells[0].Width = new Unit("200px");) 设置列不起作用，但我找到了替代方法。此外，我的网格启用了排序，因此链接按钮代码。

```
const int FirstControl = 0;
const int GriDefinedFieldsCount = 2;

protected void grd_RowDataBound(object sender, GridViewRowEventArgs e)
{
     if (e.Row.RowType == DataControlRowType.Header)
     {
         int col = 0;
         foreach (DataColumn dc in SiteManager.Reports.ReportData.Columns)
         {
             if (dc.ColumnName == "Notes")
             {
                 LinkButton lnk = (e.Row.Cells[col + GriDefinedFieldsCount].Controls[FirstControl] as LinkButton);
                 lnk.Width = Unit.Pixel(300);
             }
             col += 1;
         }
     } 
```

# asp.net-mvc - ASP MVC3 razor 视图中的链接未正确显示

> ID：15599416
> 
> 赞同：0
> 
> 时间：2013-03-24T14:04:09.463
> 
> 标签：asp.net-mvc, tweetsharp

我已经实现了这篇文章中解释的解决方案[如何使用 LinqToTwitter 获取推文的 HTML？](https://stackoverflow.com/questions/7855347/how-to-get-tweets-html-with-linqtotwitter/7855858#7855858)但是当我显示我的推文时，HTML 链接看起来像这样

```
<a class="inline" href="http://twitter.com/cgitosh" target="_blank">@cgitosh</a> And how are you? 
```

而不是只显示@cgitosh 你好吗？@cgitosh 链接到 Twitter 帐户。

我做错了什么？

剃刀代码片段：

```
@{var tweet = TwitterExtensions.Text2Html(item.Text);}
<div>@tweet</div> 
```

所以我基本上将推文文本传递给 Text2HTML 函数，该函数在上面提供的链接中进行了解释，该函数返回推文以及指向变量推文的链接，然后我在视图中输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:25:33.873

试试这样：

```
<div>@Html.Raw(tweet)</div> 
```

该`Html.Raw`方法不会对输出进行 HTML 编码，这是 Razor 默认执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:25:48.920

尝试：

```
@{var tweet = TwitterExtensions.Text2Html(item.Text);}
<div>@(new HtmlString(tweet))</div> 
```

...除非您在其他地方使用推文，否则您可以这样做

```
<div>@(new HtmlString(TwitterExtensions.Text2Html(item.Text)))</div> 
```

Razor 默认情况下 HTML 编码字符串，因此您必须明确告诉它将其呈现为标记。（见[这里](http://www.mikepope.com/blog/displayblog.aspx?permalink=2218)。）希望这会有所帮助！

# excel - 如何使用 csv 文件将用于从 C++ 程序创建形状的数据传输到 excel 中？

> ID：15599420
> 
> 赞同：0
> 
> 时间：2013-03-24T14:04:22.003
> 
> 标签：excel, visual-c++, export-to-csv

到目前为止，这是我的 C++ 代码：

该程序要求用户输入他们的组名。如果名称是 c4，则程序会询问 x 和 y 坐标、形状中圆的半径以及沿线的每个点之间的间距。然后程序将计算形状的点和角度。形状应该是一个圆，三条线从圆的边缘开始，分别为 22.5、45 和 67.5 度。

```
/ computinggroup.cpp : Defines the entry point for the console application.
        //

#include "stdafx.h"
#include <iostream> //necessary for cout and endl
#include <cmath> //necessary for mathematic calculations
#include <string> //necessary for declaration of letters
#include <iomanip>
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
//group project
//Group c4
//date: 22/03/2013

{
string c; //declaration of letter
int d = 0; //inisialise group name elements
int i, b;
double pi = 3.141592654; //define pi for trig calculations
double r, a = 0;
double x, x1 = 0;
double y, y1 = 0;
double xa, xb, ya, yb = 0;
double increment, spacing, numofpoints;
double AngleB;
double AngleV;
double AngleTheta1;
double AngleTheta2;

/****************************************************************************
* SECTION 1 - Group name is entered by user, the programme continues if it is
* the correct name, if not a message displays and the programme stops
*****************************************************************************/

cout << "Enter letter from group name: ";
cin >> c;
cout << "Enter number from group name: ";
cin >> d;
if (c == "C", d == 4)
{ 
cout << "Group " << c << d;
cout << endl;
}
else
{
cout << "Incorrect group name entered, the programme cannot continue. Press any key to exit";
cin >> d;
return 0;
}

/****************************************************************************
* SECTION 2 - User enters values for centre point of the circle 
* and radius, the programme creates x and y coordinate points for 360 points
* around a circle
*****************************************************************************/

cout << "Enter x coordinate for the centre of the circle: ";
cin >> x1;
cout << "Enter y coordinate for the centre of the circle: ";
cin >> y1;
cout << "Enter radius of the circle: ";
cin >> r;
cout << "Enter spacing required between each point along the lines: ";
cin >> spacing;
numofpoints = (2 * pi * r)/spacing;
increment = 360/numofpoints;
for (i = 0; i < 360 ; i+=increment) //loop the calculation for values of x for i = 0 to 360 in intervals of 'increment'
{
x = x1 + (r * cos((i * pi)/180));
cout << "(" << x << ","; 
y = y1 + (r * sin((i * pi)/180));
cout << y << ")";
cout << endl;
AngleB = acos(x/pow((pow(x, 2))+(pow(y, 2)), 0.5))*(180/pi);
cout<<"\nAngle 'B' = "<<AngleB<<" Degrees"<<endl;
AngleV = acos(((pow(x, 2))+(pow(y, 2))+(10000)-(4225))/(200*(pow(((pow(x, 2))+(pow(y, 2))), 0.5))))* (180/pi);
cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
AngleTheta1 = AngleB - AngleV;
cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;
AngleTheta2 =(asin(pow(((sin(AngleV*pi/180))*(pow(((pow(x, 2))+(pow(y, 2))), 0.5))/65), 0.5)))*(180/pi);
cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;
}
/****************************************************************************
* SECTION 3 - start and end coordinates for each of the 3 lines 
* The naming is as follows: example, 'xa'; 'x' means the x coordinate, 
* 'a' means start point as oppossed to 'b' for end point
*****************************************************************************/
cout << endl;
cout << "Coordinates of three lines: ";
cout << endl;
//the first line is at 22.5 deg, trigonometry is used to create the function
{
double a = 22.5;
xa = x1 + (r * cos((a * pi)/180));
ya = y1 + (r * sin((a * pi)/180));
AngleB = acos(xa/pow((pow(xa, 2))+(pow(ya, 2)), 0.5))*(180/pi);
cout<<"\nAngle 'B' = "<<AngleB<<" Degrees"<<endl;
AngleV = acos(((pow(xa, 2))+(pow(ya, 2))+(10000)-(4225))/(200*(pow(((pow(xa, 2))+(pow(ya, 2))), 0.5))))* (180/pi);
cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
AngleTheta1 = AngleB - AngleV;
cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;
AngleTheta2 =(xa*sin(pow(((sin(AngleV*pi/180))*(pow(((pow(xa, 2))+(pow(ya, 2))), 0.5))/65), 0.5)))*(180/pi);
cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;
xb = x1 + (2 * r + (r * cos((a * pi)/180)));
yb = y1 + (2 * r + (r * sin((a * pi)/180)));
AngleB = acos(xb/pow((pow(xb, 2))+(pow(yb, 2)), 0.5))*(180/pi);
cout<<"\nAngle 'B' = "<<AngleB<<" Degrees"<<endl;
AngleV = acos(((pow(xb, 2))+(pow(yb, 2))+(10000)-(4225))/(200*(pow(((pow(xb, 2))+(pow(yb, 2))), 0.5))))* (180/pi);
cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
AngleTheta1 = AngleB - AngleV;
cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;
AngleTheta2 =(xb*sin(pow(((sin(AngleV*pi/180))*(pow(((pow(xb, 2))+(pow(yb, 2))), 0.5))/65), 0.5)))*(180/pi);
cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;
cout << "Line at " << a << " degrees = (" << xa << ", " << ya << ") to (" << xb << ", " << yb << ")";
cout << endl;
}
//the second line is at 45 deg
{
double a = 45;
xa = x1 + (r * cos((a * pi)/180));
ya = y1 + (r * sin((a * pi)/180));
AngleB = acos(xa/pow((pow(xa, 2))+(pow(ya, 2)), 0.5))*(180/pi);
cout<<"\nAngle 'B' = "<<AngleB<<" Degrees"<<endl;
AngleV = acos(((pow(xa, 2))+(pow(ya, 2))+(10000)-(4225))/(200*(pow(((pow(xa, 2))+(pow(ya, 2))), 0.5))))* (180/pi);
cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
AngleTheta1 = AngleB - AngleV;
cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;
AngleTheta2 =(xa*sin(pow(((sin(AngleV*pi/180))*(pow(((pow(xa, 2))+(pow(ya, 2))), 0.5))/65), 0.5)))*(180/pi);
cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;
xb = x1 + (2 * r + (r * cos((a * pi)/180)));
yb = y1 + (2 * r + (r * sin((a * pi)/180)));
AngleB = acos(xb/pow((pow(xb, 2))+(pow(yb, 2)), 0.5))*(180/pi);
cout<<"\nAngle 'B' = "<<AngleB<<" Degrees"<<endl;
AngleV = acos(((pow(xb, 2))+(pow(yb, 2))+(10000)-(4225))/(200*(pow(((pow(xb, 2))+(pow(yb, 2))), 0.5))))* (180/pi);
cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
AngleTheta1 = AngleB - AngleV;
cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;
AngleTheta2 =(xb*sin(pow(((sin(AngleV*pi/180))*(pow(((pow(xb, 2))+(pow(yb, 2))), 0.5))/65), 0.5)))*(180/pi);
cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;
cout << "Line at " << a << " degrees = (" << xa << ", " << ya << ") to (" << xb << ", " << yb << ")";
cout << endl;
}
//the third line is at 67.5 deg
{
double a = 67.5;
xa = x1 + (r * cos((a * pi)/180));
ya = y1 + (r * sin((a * pi)/180));
AngleB = acos(xa/pow((pow(xa, 2))+(pow(ya, 2)), 0.5))*(180/pi);
cout<<"\nAngle 'B' = "<<AngleB<<" Degrees"<<endl;
AngleV = acos(((pow(xa, 2))+(pow(ya, 2))+(10000)-(4225))/(200*(pow(((pow(xa, 2))+(pow(ya, 2))), 0.5))))* (180/pi);
cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
AngleTheta1 = AngleB - AngleV;
cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;
AngleTheta2 =(xa*sin(pow(((sin(AngleV*pi/180))*(pow(((pow(xa, 2))+(pow(ya, 2))), 0.5))/65), 0.5)))*(180/pi);
cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;
xb = x1 + (2 * r + (r * cos((a * pi)/180)));
yb = y1 + (2 * r + (r * sin((a * pi)/180)));
AngleB = acos(xb/pow((pow(xb, 2))+(pow(yb, 2)), 0.5))*(180/pi);
cout<<"\nAngle 'B' = "<<AngleB<<" Degrees"<<endl;
AngleV = acos(((pow(xb, 2))+(pow(yb, 2))+(10000)-(4225))/(200*(pow(((pow(xb, 2))+(pow(yb, 2))), 0.5))))* (180/pi);
cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
AngleTheta1 = AngleB - AngleV;
cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;
AngleTheta2 =(xb*sin(pow(((sin(AngleV*pi/180))*(pow(((pow(xb, 2))+(pow(yb, 2))), 0.5))/65), 0.5)))*(180/pi);
cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;
cout << "Line at " << a << " degrees = (" << xa << ", " << ya << ") to (" << xb << ", " << yb << ")";
cout << endl;
}
cout << "Press any key to exit ... "; //the user has the option to exit
cin >> b;
return 0;
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:52:15.987

我根本不懂 C++，所以我无法告诉你如何让它真正编写文件。

如果您真的不想显式打开文件，您也许可以使用标准输出？

因此您可以从命令行运行程序并将结果通过管道传输到文件中。

例如：`mymathapp.exe > result.csv`

CSV 格式不难理解。

每行代表一行，列数据只是该行上的分隔列表。（您可以使用逗号或制表符等）。字符串值通常是`"Quoted"`但通常不是必需的（excel 和其他应用程序通常相当宽容）。

如何将一行输出到标准输出的示例。

`fprintf(stdout, "%d, %d, %d, %d\n", val1, val2, val3, val4);`

# database - 哪个数据库适合我的特定用例

> ID：15599425
> 
> 赞同：2
> 
> 时间：2013-03-24T14:04:35.567
> 
> 标签：database, database-design

我的头因阅读有关数据库而爆炸。我知道您选择哪一个取决于具体的用例。所以这是我的：

*   我有一个网络应用程序。一个游戏。
*   它是基于级别的，你只能前进不能后退。但是您可以继续玩每个级别。例如，您完成 Level2，然后玩 Level3。然后再次启动 Level3 并将其保存为 Level3b。您现在可以继续离开 Level3 和 Level3b。
*   任何时候都只能玩一个级别。
*   服务器上存储了三个数据数组：'progress'、'choices' 和 'vars'
*   在您玩关卡时会修改它们，然后在您可能想要开始使用它们时放入冷藏库。

当前的 MySQL 设置是这样的：

*   一个“saves”表保存了每个存档游戏的元数据，重要的是它所属的存档 ID 和用户 ID。
*   每个数据数组都有一个对应的表格。
*   如果玩家做出选择，插入看起来像这样：

    ```
    INSERT INTO choices VALUES saveid=:saveid, choice=:choice 
    ```

*   因此，可以通过执行以下操作来重建数组

    ```
    SELECT * FROM choices WHERE saveid=:saveid 
    ```

*   关卡完成后，数据数组通过序列化并存储在“保存”表中而被放入冷存储，该表有 3 列专用于此。
*   它们的值已从其他三个表中清除。
*   如果玩家从 Level3b 开始 Level4，序列化的数组将从“saves”表中获取，取消序列化并放回各自的表中，尽管新的 saveID 为 Level4。

我希望这有点可以理解。我认为：

*   写入次数将多于读取次数
*   如果我理解正确的话，我不需要一致性，因为玩家只能操纵自己的数据
*   我不认为我会做（m）任何 JOINS，因为每个表都需要单独读取以填充其各自的数据数组
*   所以我认为我不需要太多关系数据库
*   在大多数情况下，对于 DB 来说，它应该是非常轻的负载，因为插入很小

*   数据存储必须可靠！如果我们开始定期丢失他们的存档游戏，我认为玩家不会坚持使用我们。虽然我认为 Redis 每秒刷新到磁盘就足够了，因为我们在这里不处理关键任务的东西。如果游戏忘记了玩家的最后一两个动作，这还不错，只是不要忘记整个存档游戏。

你能为我的用例提供关于数据库的建议吗？我从 MySQL 开始，现在我读到了 CouchDB、MongoDB、Riak、Cassandra。我认为 Redis 是不可能的，因为一旦数据集超出你的 RAM，Redis 似乎会严重退化。但我对一切都持开放态度。我也对人们说：坚持使用 MySQL 或转到 PostgreSQL。

我也会接受对我设置存储方式的批评。如果你说：选择 Cassandra 并这样存储，我会听的。

这是一个健全性检查，因为现在是我最后一次能够在游戏上线之前更改数据库，而我想做的最后一件事是不得不在 3 个月内更换数据库，因为它的扩展性很差。

哦，是的，App 是用 Javascript 编写的，与服务器的通信是通过 PHP 进行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:43:32.237

我认为您无需过多担心数据库 - 除非您确定从第一天开始就会拥有庞大的用户群（网络应用程序通常不会在一夜之间成名）。

你最好继续使用你所知道的（MySQL），但将所有数据库命令保存在一个单独的包装类中（无论如何你都应该这样做）。如果您这样做，只要您使用标准 SQL 并且不对该数据库执行任何特定操作，转换到另一个数据库就不会那么难。

# crystal-reports - ASP.NET / Crystal Report：Crystal Report Viewer 工具栏已损坏

> ID：15599430
> 
> 赞同：0
> 
> 时间：2013-03-24T14:05:09.680
> 
> 标签：crystal-reports, toolbar, crystal-reports-2010

我目前正在使用 Crystal Report（适用于 Visual Studio 2010），版本 13.0.2 每次运行我的 Web 表单时都会出现一个有趣的错误：

![在此处输入图像描述](../Images/aebb4eec5da127b62f1bf063088cdb9d.png)

我尝试删除我的 Web 表单的现有样式表，并且查看器的工具栏正确显示。

有没有办法解决这个问题？我仍然想使用现有的样式表。

# android - AVD + Eclipse：总是运行同一个项目

> ID：15599436
> 
> 赞同：0
> 
> 时间：2013-03-24T14:05:51.807
> 
> 标签：android, eclipse, avd

在我的 Android 虚拟设备中从 Eclipse 启动项目时遇到问题。

我在 Eclipse 中有多个项目，当我通过右键单击一个项目-> 运行方式-> Android 应用程序运行其中一个项目时，它总是运行同一个项目。（我在 Eclipse 中制作的第一个项目）

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:16:26.880

单击要运行的项目上的文件夹，然后单击运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:28:19.000

检查您是否已相应更改 manifest.xml。它曾经发生在我身上，因为我将代码从一个清单复制到另一个清单。为默认活动正确设置路径

# matlab - 错误使用 .* 矩阵尺寸必须一致

> ID：15599442
> 
> 赞同：0
> 
> 时间：2013-03-24T14:06:49.673
> 
> 标签：matlab, matrix-multiplication

我正在尝试从音频文件中获取宽度为 17 的矩阵。我得到错误使用 .* 矩阵尺寸必须一致。这是什么意思，我应该如何解决它？

错误在`windowed_frame = window.*input(((k-1)*bins*overlap)+1:(((k-1))*bins*overlap)+1+bins-1);`

```
[input fs] = wavread('3_1.wav');

fn = fs/2;
bins = 512; %useable bins
frame_length = bins;
window = hamming(frame_length);
overlap = .5;
number_of_frames = (length(input)/(frame_length)/overlap) - 1;

for k=1:number_of_frames

        windowed_frame = window.*input(((k-1)*bins*overlap)+1:(((k-1))*bins*overlap)+1+bins-1);

        fft_window = fft(windowed_frame,bins*2);
        fft_window = abs(fft_window(1:bins));
        fft_energy = fft_window.^2;
        freq_vector = [fn/bins:fn/bins:fn]; 
```

编辑：完整代码函数 test_energy = energy_per_frame(file)

[输入 fs] = wavread('1_2.wav');

```
fn = fs/2;
bins = 512; %useable bins
frame_length = bins;
window = hamming(frame_length);
overlap = .5;
number_of_frames = (length(input)/(frame_length)/overlap) - 1;

for k=1:number_of_frames

    windowed_frame = (window.*input(((k-1)*bins*overlap)+1:(((k-1))*bins*overlap)+1+bins-1)).';

        fft_window = fft(windowed_frame,bins*2);
        fft_window = abs(fft_window(1:bins));
        fft_energy = fft_window.^2;
        freq_vector = [fn/bins:fn/bins:fn];

        %map bark (z) to bins (1-512) and frequency (freq_vector)
        for i=1:length(freq_vector)
            z(i) = 13*atan(0.76*(freq_vector(i)/1000)) + 3.5*atan(((freq_vector(i)/1000)/7.5).^2);    
        end

        z = floor(z);

        for j=1:length(z);
            if z(j) == 17
                z(j)=16;
            end
        end

        temp = 0;
        temp_sum = 0;
        count = 0;

        %calculate the energy per bark band
        for i=1:length(z)
           if temp == z(i)
               temp_sum = fft_energy(i)+ temp_sum;
               test_energy(k,temp+1) = temp_sum; 
               count = count+1;
           end

           if temp ~= z(i)   
              test_energy(k,temp+1) = temp_sum/count;
              temp = temp+1;
              temp_sum = fft_energy(i);
              count = 1;
           end  
        end  

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:16:44.880

`.*`运算符是逐元素乘法。在您的情况下，这意味着其中的每个元素`window`都乘以 submatrix 中的相应元素`input`，这是操作的结果：

```
input(((k-1)*bins*overlap)+1:(((k-1))*bins*overlap)+1+bins-1) 
```

显然，两个矩阵都有不同的维度，您可以通过键入以下内容来验证：

```
size(window)
size(input(((k-1)*bins*overlap)+1:(((k-1))*bins*overlap)+1+bins-1)) 
```

我怀疑这是行列问题：生成的子矩阵`input`是 1×512*行*向量，而是`windows`512×1*列*向量。

**解决方案：**尝试在最后添加一个点撇号 ( `.'`)，它实际上是MATLAB 中的[转置运算符](http://www.mathworks.com/help/matlab/ref/transpose.html)`'`（与运算符相反，[复共轭](http://www.mathworks.co.uk/help/matlab/ref/ctranspose.html)转置，如果您的数据很复杂，这可能不是您想要的）的 submatrix `input`，像这样：

```
windowed_frame = window .* input(blah blah...).'  %// <-- Note the .' 
```

我相信这应该可以解决您的问题。

[更通用的解决方案是通过使用冒号运算符](http://www.mathworks.com/help/matlab/ref/colon.html)( ) 将*两个*向量强制为列向量：`:`

```
input_window = input(((k-1)*bins*overlap)+1:(((k-1))*bins*overlap)+1+bins-1);
windowed_frame = window(:) .* input_window(:); 
```

# filter - 管道和过滤器

> ID：15599447
> 
> 赞同：14
> 
> 时间：2013-03-24T14:07:30.143
> 
> 标签：filter, cmd, pipe, command-prompt

我是命令提示符的新手，想知道所有命令的工作原理……

我想知道如何应用管道和过滤器`cmd`来遍历目录并仅打印在特定日期创建的那些文件/文件夹，并希望使用在您的文件和文件夹中出现 2 -3 次的数据测试目录。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-24T17:48:01.673

转到**开始>帮助和支持**在框中输入`command prompt`并按最后的放大镜符号。然后`Command Reference Overview [H1S]`从显示的列表中选择。这将显示可用的命令。

显然，还有其他文章可以作为其他选择有所帮助。

一般来说，打字

```
commandname /? 
```

从提示将显示（通常是神秘的）帮助

* * *

本质上，管道符号`|`用于将一个命令的输出定向到第二个命令的输入，因此

```
dir | sort 
```

例如获取`DIR`命令的屏幕输出并`SORT`发送它。

下一个问题使用关键术语`created`。每个文件可能有三个不同的时间，文件`created`的时间，文件的最后`written`时间和文件的最后时间`accessed`。可以访问所有 3 次，但默认为最后一次`written`。这是 DIR 报告的正常时间，在其他术语中可以不同地称为“`file time`或” 。`update time`

因此，要列出文件（使用公共`written`日期）并选择特定日期，请尝试

```
dir | find "dateyourequire" 
```

您需要替换为目标日期的位置，格式与您的命令`dateyourequire`显示的格式匹配。**BTW**命令**不**区分大小写——有一个重要的例外。`DIR`

 ****现在日期格式是一个全新的球赛，您需要非常小心，因为显示的日期是根据当地惯例。例如，有些人使用`DD/MM/YY`- 其他人使用`MM-DD-YY`并且还有许多其他人。如果您正在讨论日期和时间，您需要每次都说出**您**使用的约定。

* * *

你需要解释你的意思`data that occurs 2 -3 times`。我既不能确定它的头，也不能确定它的尾。示例通常是一个好方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-27T09:40:52.547

```
<your_command> | findstr "search_string*" 
```

您可以使用参数等`/I` `/B`。您也可以使用**正则表达式**以获取更多信息，`findstr`请参阅参考`help findstr`****

# java - 目标不可达，标识符“DatabaseOperation”解析为 null

> ID：15599453
> 
> 赞同：0
> 
> 时间：2013-03-24T14:08:10.190
> 
> 标签：java

您好，我尝试进行数据库操作。

这是我的豆子

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

// Import Statements
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import javax.annotation.ManagedBean;

@ManagedBean
public class DatabaseOperation {

    static final String DbDriver = "com.mysql.jdbc.Driver";  // To set the driver
    static final String strConnection = "jdbc:mysql://localhost:3306/TekirMobile"; // Connection string 
    static final String strDbUsername = "root"; // Username of the database user
    static final String strDbPassword = "fenderpass"; // Password of the database user
    static Connection DatabaseConnection; // Connection object to establish the connection to the database
    static ResultSet RsStudent; // Resultset to store the information retrieved from the database
    static Statement DatabaseStatement; // Statement object of the database connection
    String beginDate;

    public DatabaseOperation() // Constructor of the class
    {
        makeConnection(); // To establish the database connection
    }

    public void makeConnection() // To establish the database connection, No return value and parameters
    {
        try {
            Class.forName(DbDriver); // Setting the driver

            DatabaseConnection = DriverManager.getConnection(strConnection, strDbUsername, strDbPassword); // Establishing the connection with the database

            DatabaseStatement = DatabaseConnection.createStatement(); // Assigning the statement to the connection
            System.out.println("Connection Success....");
        } catch (Exception e) // In case of any Exception
        {
            System.out.println(e); // Print the Exception
        }
    }

    public ResultSet selectFromDatabase(String strSelectQuery) // A function which retrieves Records from the database, Returns Recordset, Query as parameter
    {
        try {
            RsStudent = DatabaseStatement.executeQuery(strSelectQuery); // Execute the select query
            return RsStudent; // Returns the resultset
        } catch (Exception e) {
            System.out.println(e); // Print the exception
            return null; // Return NULL
        }
    }

    public String submit() {
        System.out.println("Submitted value: " + beginDate);
        return null;
    }

    public void disConnect() {
        try {
            DatabaseConnection.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // TODO Auto-generated method stub

    }
} 
```

这是我的 jsf

```
 <h:panelGroup>
  <h:outputLabel id="beginDate" value="Begin Date:" /><br />
  <h:inputText value="#{DatabaseOperation.beginDate}" style="width:95%;"  />
  </h:panelGroup> 
```

这也是我的按钮

```
 <h:panelGroup>
  <h:commandButton type="submit" action="#{DatabaseOperation.submit}"  />
  </h:panelGroup> 
```

当我按下按钮时，我得到这个错误为什么？怎么了？我需要做什么吗？我的豆子对吗？我发送到价值豆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:18:49.907

我认为当您尝试从 JSF 页面访问您的 bean 时，第一个字母应该更低：

```
<h:panelGroup>
    <h:commandButton type="submit" action="#{databaseOperation.submit}"  />
</h:panelGroup> 
```

您还可以像这样设置名称：

```
@ManagedBean(name="databaseOperation") 
```

# gwt - mgwt 自定义样式

> ID：15599458
> 
> 赞同：1
> 
> 时间：2013-03-24T14:08:24.390
> 
> 标签：gwt, styling, mgwt

我正在尝试使用此处显示的自定义样式（[https://code.google.com/p/mgwt/wiki/Styling](https://code.google.com/p/mgwt/wiki/Styling)）：

```
public class MGWTColorTheme implements MGWTTheme {

                private MGWTClientBundle bundle;

                public MGWTColorTheme() {
                        if (MGWT.getOsDetection().isIOs()) {
                                if (MGWT.getOsDetection().isRetina()) {
                                        bundle = (MGWTColorBundleRetina) GWT.create(MGWTColorBundleRetina.class);
                                } else {
                                        bundle = (MGWTColorBundleNonRetina) GWT.create(MGWTColorBundleNonRetina.class);
                                }
                        } else {
                                bundle = (MGWTColorBundleNonRetina) GWT.create(MGWTColorBundleNonRetina.class);
                        }

                }

                @Override
                public MGWTClientBundle getMGWTClientBundle() {
                        return bundle;
                }

        } 
```

和

```
MGWTStyle.setTheme(new MGWTColorTheme()); 
```

当我加载我的应用程序时，我收到以下错误：

```
Rebinding com.googlecode.mgwt.ui.client.theme.mgwt.MGWTColorBundleNonRetina
Invoking generator com.google.gwt.resources.rebind.context.InlineClientBundleGenerator
Creating assignment for getButtonBarCss()
Replacing CSS class names
The following unobfuscated classes were present in a strict CssResource:
text
Fix by adding String accessor method(s) to the CssResource interface for obfuscated classes, or using an @external declaration for unobfuscated classes. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:09:30.377

看起来您正在使用一个损坏的主题，该主题的 css 文件中存在未在 java 接口中声明的 css 类。

如果您想开始使用 mgwt 样式，您可以轻松克隆主题库项目并从那里开始：

[https://code.google.com/p/mgwt/source/checkout?repo=themebase](https://code.google.com/p/mgwt/source/checkout?repo=themebase)

# ruby-on-rails - Rails 测试失败

> ID：15599459
> 
> 赞同：-1
> 
> 时间：2013-03-24T14:08:31.373
> 
> 标签：ruby-on-rails, ruby, unit-testing

我的一项 Rails 测试遇到了问题。以下是失败但大喊不是的测试。

```
setup do
  @answer = Answer.new(:title => 'Title', :body => 'Body', :email => 'you@me.com', :quiz_id => 1, :user_id => 1)
end

test 'should not save answer with missing email' do
  @answer.email = nil
  assert !@answer.save, 'answer was saved'
end 
```

我正在检查以确保保存失败 !@answer.save 但这不起作用结果是一个错误的测试，并出现以下错误。

```
ActiveRecord::StatementInvalid: Mysql2::Error: Column 'email' cannot be null: 
```

我希望我的测试在缺少电子邮件时不保存。非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:52:37.143

The `email` column in your MySQL table has been set to not allow null values.

The migration to create the `answers` table will have something like `t.string :email, :null => false`.

You will need to create a validation to stop the model from trying to save and triggering the MySQL error.

Try,

```
validates_presence_of :email 
```

This will stop the model from saving and give you an Active Record validation error message instead.

**EDIT:**

You will need the validation if you cannot guarantee there will always be an email value. If you can guarantee there will always be an email value, your test on the model is unnecessary because you can guarantee this scenario will never happen.

You may want to test the code that calls this code to ensure it always supplies an `email` value to the `Answer.new` method.

# jquery - 使用 div 标签在图像上显示文本

> ID：15599462
> 
> 赞同：0
> 
> 时间：2013-03-24T14:08:49.443
> 
> 标签：jquery

我想使用 div 标签在图像上显示文本。我从数据库中获取值并成功存储到脚本数组中。但值没有显示。但我使用 div 标签 insted 将显示图像文本。以下是我的代码

```
 <script >
        var i=0;
        var st1=new Array();
        var st2=new Array();
        var st3=new Array();
       // var obj={"A","B","C","D"};
   $(document).ready(function(){
  $("#myimg").hover(function(){

  <c:forEach var="d"  items="${data}" >
        <c:set var="st1" value="${fn:substringBefore(d,'-')}" />            
        <c:set var="st2" value="${fn:substringAfter(d,'-')}" />

         st1.push("${st1}");             
         st2.push("${st2}");

    </c:forEach>
    <c:forEach var="d1"  items="${data1}" >
        <c:set var="st22" value="${d1}" />       
            st3.push("${st22}");

  </c:forEach>

  for(var i=0;i<6;i++)
      {

  var X=st1[i];      
  var Y=st2[i];
  var txt=st3[i];

        var test = $("<span class='test'></span>");

  test.html(txt);

  $("#myimg").append(test.offset({left:X,top:Y}));

   }

  }, function(){
    $('.test').remove();
  }
 );

 });

    </script>

    <div class="test">div-test </div>
    <img id="myimg" src="mirchi2.jpg" width="500" height="500">
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:17:23.383

而不是附加 DIV - 做这样的事情：

**编辑**完全工作的例子：http: [//jsfiddle.net/](http://jsfiddle.net/)

```
<div class="image-container"> <!-- MAKE SURE THIS IS POSITION RELATIVE! -->
    <img id="image1" src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTKWtn1KeBcz5Ydr3Hv6aYTCjiqbqFg2DfB422smPV21TS7kjVh" alt="some alt" />
    <div id="text-pop">This is some text</div>
</div> 
```

CSS：

```
.image-container{
    position: relative;
}
#text-pop{
    display: none;
    position: absolute;
} 
```

jQuery：

```
$(document).ready(function(){
    $("#image1").hover(function(){
        $("#text-pop").fadeIn(800);
        $("#text-pop").css({
            "position": "absolute",
            "top": "25%",
            "left": "20%",
            "background": "yellow",
            "padding": "30px"
        })
    }, function(){
        $("#text-pop").hide();
    }
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:14:19.390

`<div>`与`display: inline-block;`和一起使用`background-image: url(image.png);`。

然后在其中`<div>`你可以添加新的孩子，因此文本。就像 ahren 说的，`<img />`(like `<br />`and `<hr />`) 是一个单数标签，不能有孩子。

```
<div id="myimg" style="background-image: url(mirchi2.jpg); width: 500px; height: 500px;">
    <div>More content</div>
</div> 
```

***或（清洁剂）***

**CSS**

```
#myimg {
    background-image: url(mirchi2.jpg);
    width: 500px;
    height: 500px;
} 
```

**HTML**

```
<div id="myimg">
    <div>More content</div>
</div> 
```

# jakarta-ee - 如何使用maven创建ear项目

> ID：15599470
> 
> 赞同：0
> 
> 时间：2013-03-24T14:09:38.187
> 
> 标签：jakarta-ee, maven, ear, maven-archetype

我想使用 Maven 创建一个耳朵项目。我应该使用什么 Maven 原型？我尝试了 org.jboss.spec.archetypes:jboss-javaee6-ear-webapp 但它特定于 Jboss AS。

非常感谢

# c++ - C++ 编译器会为每种模板类型生成代码吗？

> ID：15599474
> 
> 赞同：2
> 
> 时间：2013-03-24T14:10:09.167
> 
> 标签：c++, templates

我有两个关于 C++ 模板的问题。假设我编写了一个简单的 List，现在我想在我的程序中使用它来存储指向不同对象类型（A*、B* ... ALot*）的指针。我的同事说，对于每种类型，都会生成一段专用的代码，即使所有指针实际上都具有相同的大小。

如果这是真的，有人可以解释我为什么吗？例如，在 Java 中，泛型与 C++ 中的指针模板具有相同的用途。泛型仅用于预编译类型检查，并在编译前被剥离。当然，所有内容都使用相同的字节码。

第二个问题是，是否还会为 char 和 short 生成专用代码（考虑到它们具有相同的大小并且没有专门化）。

如果这有什么不同，我们谈论的是嵌入式应用程序。

我发现了一个类似的问题，但它并没有完全回答我的问题：[C++ 模板类是否为使用的每种指针类型重复代码？](https://stackoverflow.com/questions/13914030/do-c-template-classes-duplicate-code-for-each-pointer-type-used)

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:32:54.017

> 我有两个关于 C++ 模板的问题。假设我编写了一个简单的 List，现在我想在我的程序中使用它来存储指向不同对象类型（A*、B* ... ALot*）的指针。我的同事说，对于每种类型，都会生成一段专用的代码，即使所有指针实际上都具有相同的大小。

是的，这相当于编写了两个函数。

一些链接器会检测到相同的功能，并消除它们。一些库意识到他们的链接器没有此功能，并将通用代码分解为单个实现，只留下围绕通用代码的强制转换包装器。即，`std::vector<T*>`专业化可能会将所有工作转发给`std::vector<void*>`然后在退出时进行铸造。

现在，comdat 折叠很微妙：让你认为相同的函数相对容易，但最终却不一样，因此生成了两个函数。作为一个玩具示例，您可以通过`typeid(x).name()`. 现在每个版本的功能都是不同的，它们不能被消除。

在某些情况下，您可能会认为它是一个不同的运行时属性，因此会创建相同的代码，并消除相同的函数——但智能 C++ 编译器可能会弄清楚您做了什么，使用as-if 规则并将其转换为编译时检查，并阻止不完全相同的函数被视为相同。

> 如果这是真的，有人可以解释我为什么吗？例如，在 Java 中，泛型与 C++ 中的指针模板具有相同的用途。泛型仅用于每次编译的类型检查，并在编译前被剥离。当然，所有内容都使用相同的字节码。

不，他们不是。泛型大致相当于类型擦除的 C++ 技术，例如`std::function<void()>`存储任何可调用对象的方法。在 C++ 中，类型擦除通常通过模板完成，但并非所有模板的使用都是类型擦除！

C++ 对本质上不是类型擦除的模板所做的事情对于 Java 泛型通常是不可能的。

在 C++ 中，您*可以*使用模板创建一个类型擦除的指针容器，但`std::vector`不会这样做——它会创建一个实际的指针容器。这样做的好处是所有类型检查`std::vector`都在编译时完成，因此不必进行任何运行时检查：安全的类型擦除`std::vector`可能需要运行时类型检查以及相关的开销。

> 第二个问题是，是否还会为 char 和 short 生成专用代码（考虑到它们具有相同的大小并且没有专门化）。

它们是不同的类型。我可以编写与 a `char`or`short`值不同的代码。举个例子：

```
std::cout << x << "\n"; 
```

x 为 a`short`时，打印一个整数，其值为`x`-`x`为 a`char`时，打印对应于 的字符`x`。

现在，几乎所有的模板代码都存在于头文件中，并且是隐含的`inline`. 虽然`inline`并不意味着大多数人认为的意思，但它确实意味着编译器可以轻松地将代码提升到调用上下文中。

> 如果这有什么不同，我们谈论的是嵌入式应用程序。

真正重要的是您的特定编译器和链接器是什么，以及它们具有哪些设置和标志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T14:28:41.073

答案是也许。通常，模板的每个实例化都是唯一的类型，具有唯一的实现，并且会产生完全独立的代码实例。合并实例是可能的，但将被视为“优化”（根据“好像”规则），并且这种优化没有广泛传播。

关于与 Java 的比较，有几点需要牢记：

*   C++ 默认使用值语义。`std::vector`例如，一个实际上会插入副本。无论您是复制 a`short`还是 a`double`都会对生成的代码产生影响。在Java中，`short`并且`double`会被装箱，并且生成的代码会以某种方式克隆一个装箱的实例；克隆不需要不同的代码，因为它调用 的虚函数`Object`，但物理复制却需要。

*   C++ 比 Java 强大得多。特别是它允许比较函数的地址之类的东西，并且它要求模板的不同实例化中的函数具有不同的地址。通常，这不是重要的一点，我可以很容易地想象一个编译器有一个选项告诉它忽略这一点，并合并在二进制级别相同的实例。（我认为 VC++ 有这样的东西。）

另一个问题是 C++ 中模板的实现必须存在于头文件中。当然，在 Java 中，一切都必须始终存在，因此这个问题会影响所有类，而不仅仅是模板。当然，这也是 Java 不适合大型应用程序的原因之一。但这意味着您不希望模板中有任何复杂的功能；与 Java（和许多其他语言）相比，这样做会失去 C++ 的主要优势之一。事实上，在模板中实现复杂功能时，模板继承自非模板类的情况并不少见，该类在`void*`. 在实现大块代码的同时`void*`从来都不是有趣的，它确实具有为客户提供两全其美的优势：实现隐藏在编译文件中，以任何方式、形状或方式对客户不可见。

# opencv - 用JAVACV程序凝聚信心

> ID：15599475
> 
> 赞同：0
> 
> 时间：2013-03-24T14:10:20.263
> 
> 标签：opencv, javacv, face-recognition, confidence-interval

当它实际在目标图像上进行人脸识别时，试图找出一种方法来收集置信度。我已经搜索了一些示例，但没有找到任何我可以看到如何实现的东西。感谢所有帮助，谢谢大家。

```
public static void facecompare() {
    String trainingDir = "C:/TrainingDirectory";     //training directory
    IplImage testImage = cvLoadImage("C:/TargetImages/boland_straight_happy_open_4.pgm"); //the target image

    File root = new File(trainingDir);

    FilenameFilter pngFilter = new FilenameFilter() {
        public boolean accept(File dir, String name) {
            return name.toLowerCase().endsWith(".pgm");
        }
    };

    File[] imageFiles = root.listFiles(pngFilter);

    MatVector images = new MatVector(imageFiles.length);

    int[] labels = new int[imageFiles.length];

    int counter = 0;
    int label;

    IplImage img;
    IplImage grayImg;

    for (File image : imageFiles) {
        img = cvLoadImage(image.getAbsolutePath());

        label = Integer.parseInt(image.getName().split("\\-")[0]);

        grayImg = IplImage.create(img.width(), img.height(), IPL_DEPTH_8U, 1);

        cvCvtColor(img, grayImg, CV_BGR2GRAY);

        images.put(counter, grayImg);

        labels[counter] = label;

        counter++;
    }

    IplImage greyTestImage = IplImage.create(testImage.width(), testImage.height(), IPL_DEPTH_8U, 1);

    // FaceRecognizer faceRecognizer = createFisherFaceRecognizer();
    // FaceRecognizer faceRecognizer = createEigenFaceRecognizer();
    FaceRecognizer faceRecognizer = createLBPHFaceRecognizer();

    faceRecognizer.train(images, labels);

    cvCvtColor(testImage, greyTestImage, CV_BGR2GRAY);

    int predictedLabel = faceRecognizer.predict(greyTestImage);

    System.out.println("Predicted label: " + predictedLabel);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T06:45:20.000

还有另一种返回置信度的*预测*方法：

```
// pointer-like output parameters
// only the first element of these arrays will be changed
int[] plabel = new int[1];
double[] pconfidence = new double[1];

faceRecognizer.predict(greyTestImage, plabel, pconfidence);

int predictedLabel = plabel[0];
double confidence = pconfidence[0]; 
```

# git - git-tfs：需要对文件进行搁置的挂起更改

> ID：15599476
> 
> 赞同：6
> 
> 时间：2013-03-24T14:10:24.747
> 
> 标签：git, tfs, git-tfs

我正在尝试 git-tfs，并且正在尝试通过运行以下命令来取消搁置搁置集：

```
git tfs unshelve "Shelveset Name" shelf 
```

我收到以下错误：

```
A shelved pending change on a file is required: $/path/to/dir/deleted 
```

“deleted”是在搁置集中删除的目录。

我只是从 git-tfs 开始。我需要签入那个搁置集，所以目前我可以单独使用 TFS 来完成它，但如果可能的话，我想知道可能会发生什么，并尽可能避免它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:44:55.573

此错误消息不是 git-tfs 之一，而是 TFS 之一（我只是查看了源代码）。

我只是不记得 git-tfs 是如何管理搁置集的，因为自从我切换到 git-tfs 后，我再也没有使用过这个功能。主要是因为搁板的设计非常糟糕:(而且我认为你的问题来自那个设计问题！

使用搁置集（实际上是一堆文件差异），您永远不知道“生成”它的根变更集是什么。因此，如果您稍后尝试取消搁置它，您会遇到一些问题（就像我认为您遇到的问题），因为某些文件或文件夹被重命名或删除！

我认为您的问题来自这样一个事实，即您尝试使用最近签出的 git commit 方式取消搁置。

尝试大约在搁置日期签出提交，然后取消搁置！如果它有效，你应该只需要在你的分支上重新提交你的提交（希望 git 更好地处理重命名，它在大多数时间都这样做了）。

如果它不起作用，我不知道......

并且 Internet 无法帮助我们处理此 TFS 错误消息 :(

编辑：从那时起，我认为 git-tfs 已经得到改进，也许它会搁置到正确的父提交。

编辑2：在调查太多之前，使用`--force`可以解决一些边缘情况的标志

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-24T14:10:09.027

您现在可以强制 git-tfs 忽略这些错误

[https://github.com/git-tfs/git-tfs/blob/master/doc/commands/unshelve.md](https://github.com/git-tfs/git-tfs/blob/master/doc/commands/unshelve.md)

> ```
>  --force   Get as much of the Shelveset as possible, and
>            log any other errors 
> ```

[https://github.com/git-tfs/git-tfs/issues/419](https://github.com/git-tfs/git-tfs/issues/419)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-08T21:48:06.937

TFS 似乎不喜欢尝试取消搁置包含已删除文件的搁置集。我做了以下，它的工作：

*   在 Visual Studio 中搁置 (2012)
*   排除所有已删除的文件
*   再次搁置（来自VS2012）
*   用于`git-tfs`将搁置集拉入本地 Git 分支
*   手动删除已从原始搁置集中删除的文件

很痛苦，我知道，但它至少帮助我挽救了搁板。就上下文而言，这是在从 TFS 迁移到 Git 的过程中，我们能够保留历史*并将*搁置集拉到远程分支中，因此开发人员不需要使用不完整的签入来混淆 TFS。

# scala - 从程序和数据类型细化开始的教程

> ID：15599482
> 
> 赞同：1
> 
> 时间：2013-03-24T14:10:55.607
> 
> 标签：scala, optimization, code-generation, isabelle

我[从 Isabelle/HOL 理论](http://isabelle.in.tum.de/dist/Isabelle2013/doc/codegen.pdf)手册中阅读了代码生成。不过，我还是觉得有点失落。我在哪里需要类似的东西`linorder`？我如何使用例如红黑树来加快速度？`locale`在程序细化的上下文中如何使用？...

是否有一些教程可以开始细化？如果没有，是否有一些简短的、独立的、正确的示例？

* * *

我们可以开发一个例子吗？

让我们假设我们有`A :: 'a set`并且我们知道`finite A`。我们如何继续生成例如有效的代码`a ∈ A`？

我们如何表达我们对`finite A`. 我们如何才能将数学理论（`a ∈ A`）与代码生成和优化分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:20:40.807

*好的，我会尽力回答这个问题。请随时评论和编辑以改进它。如果您想要因果报应，您也可以复制此答案并重新发布（如果您的答案更好，我将删除我的答案）。*

* * *

[这个用户指南帮助我开始。](http://afp.sourceforge.net/browser_info/current/HOL/Collections/userguide.pdf)

* * *

好的，让我们假设我们的理论在`locale MyLocale`.

```
locale MyLocale =
  fixes A :: "'a set"
  begin
    definition isInA :: "'a => bool" where
      "isInA a ⟷ a ∈ A"
  end 
```

假设我们通过 a`isInA`实现语言环境来实现该功能。然后，我们可以生成代码并显示其正确性`set` `A``list`

```
definition code_isInA_list :: "'a list => 'a => bool"
  where "code_isInA_list Al a ⟷ a ∈ set Al"

lemma code_isInA_list_correct: 
 "code_isInA_list Al a = MyLocale.isInA (set Al) a"
  by(simp add: MyLocale.isInA_def code_isInA_list_def)

export_code code_isInA_list in Scala file - 
```

这基本上会产生以下 Scala 代码

```
def code_isInA_list[A : HOL.equal](al: List[A], a: A): Boolean =
  Lista.member[A](al, a) 
```

这些`Lista.member`函数是线性时间算法。我们能做得更好吗？

假设我们`linorder`的 type 上有一个`'a`。例如，我们有`linorder`自然数、字符串、列表、元组……我们通过写作`'a ::linorder`而不是 来表达这个假设`'a`。可以利用该`linorder`属性的一种数据类型是红黑树。在我们的语言环境中，`A`是一个`set`. 在集合中，元素的顺序无关紧要。所以我们可以使用更高效的红黑树来代替列表。红黑树比列表更有效，因为元素可以任意排序，而列表规定了固定的顺序。为了使用红黑树，我们从[形式证明档案中](http://afp.sourceforge.net/entries/Collections.shtml)导入 Collections 框架。在 thy 文件的开头，我们添加到该`imports`部分

```
"./isabelle_afp/Collections/Collections" 
```

现在我们可以实现一个红黑树（`rs`）版本并显示它的正确性。Collections 框架中的函数`rs_α`（`alpha<tab>`在 jEdit 中键入 alpha）将红黑树映射到其对应的集合。

```
definition code_isInA_rs :: "('a ::linorder) rs => 'a => bool"
  where "code_isInA_rs Al a ⟷ rs_memb a Al"

lemma code_isInA_rs_correct: 
 "code_isInA_rs Ars a = MyLocale.isInA (rs_α Ars) a"
  by(simp add: MyLocale.isInA_def code_isInA_rs_def rs_correct)

export_code code_isInA_rs in Scala file - 
```

我们产生以下代码

```
def code_isInA_rs[A : Orderings.linorder](al: RBT.rbt[A, Unit], a: A): Boolean =
  RBTSetImpl.rs_memb[A].apply(a).apply(al) 
```

该`rs_memb`函数具有对数运行时间。**托多：真的吗？我在哪里可以查到？**

让我们进一步改进我们的代码。假设我们要坚持使用该`code_isInA_list`版本，因为在我们的代码中列表对我们来说更容易。我们可以`code_isInA_list`根据`code_isInA_rs`. 因此，我们使用`list_to_rs`它将列表转换为红黑树。通过该`[code]`属性，我们告诉代码生成器使用新版本。

```
lemma [code]: "code_isInA_list Al a ⟷ code_isInA_rs (list_to_rs Al) a"
  by(simp add: code_isInA_list_def code_isInA_rs_def rs_correct)

export_code code_isInA_list in Scala file - 
```

我们产生以下代码。

```
def code_isInA_list[A : Orderings.linorder](al: List[A], a: A): Boolean =
  code_isInA_rs[A](RBTSetImpl.list_to_rs[A].apply(al), a) 
```

我想创建一个红黑然后在其中进行查找比简单的列表版本更昂贵，但这只是一个例子。如果我们需要更多的查找，红黑树版本肯定会更高效。

让我们用一些类型来测试 Isabelle jEdit 中的代码。我们从自然数开始。

```
value[code] "code_isInA_list [(1::nat), 3, 7, 4] 4" 
```

这导致`True`

接下来，我们尝试字符串。

```
value[code] "code_isInA_list [''a'', ''b'', ''xyz''] ''b''" 
```

这导致

```
Wellsortedness error:
  Type char list not of sort linorder
  No type arity list :: linorder 
```

错误消息告诉我们没有`linorder`在`string`类型上定义。所以我们引入以下理论。

```
"~~/src/HOL/Library/List_lexord"
"~~/src/HOL/Library/Code_Char"
"~~/src/HOL/Library/Code_Char_chr"
"~~/src/HOL/Library/Code_Char_ord" 
```

现在我们得到了想要的结果`True`。该代码甚至适用于元组。

```
value[code] "code_isInA_list [(''a'', ''a''), (''b'', ''c''), (''xyz'', '''')] (''b'', ''c'')" 
```

# objective-c - 目标c，通知其他线程

> ID：15599483
> 
> 赞同：0
> 
> 时间：2013-03-24T14:10:59.457
> 
> 标签：objective-c, asynchronous

我的任务是下载内容，解析它，保存在数据库中并在完成后更新 UI（或通知用户错误）。这将用于应用程序的不同部分，因此我想提取此代码以分离类并用作异步外观。我使用 NSURLConnection 来处理网络任务。NSURLConnection 在单独的线程中调用我的回调。但是我的 UI 代码应该在主线程中运行。我可以存储一组块以使用 dispatch_async 从主线程调用和调用它们，但这意味着该主线程将被硬编码。它看起来我想重新发明轮子，并且应该在目标 c 中使用一些机制来在线程之间进行通信，但我找不到它。基本上我想要：

接收者订阅接收具有给定标识符的消息，并指定应在何处分派通知的线程。

发件人发送消息标识符和一些附加数据。

所有订阅的接收者都在他们指定的线程中收到此消息。

还是有适合我的任务的另一种模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:15:04.723

您可以使用`NSNotificationCenter`在不同线程上运行的对象之间进行通信。并从不同线程发布通知。

[请参阅 Apple NSNotificationCenter 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

要更新主线程上的 UI 元素，请使用 `[self performSelectorOnMainThread:@selector(somefunction) withObject:nil waitUntilDone:NO];`

# oracle - 具有叶级条件的 Oracle 递归分层查询

> ID：15599487
> 
> 赞同：2
> 
> 时间：2013-03-24T14:11:34.053
> 
> 标签：oracle, recursion, conditional, hierarchical

我想使用叶级别的条件进行分层查询。

我希望查询过滤叶级别满足条件的所有父子关系：id LIKE '3%'

表 t 是：

```
ParentId,Id
INSERT INTO t VALUES ('VTE', 'VTP');
INSERT INTO t VALUES ('VTP', '202');
INSERT INTO t VALUES ('SER', '606');
INSERT INTO t VALUES ('SER', '609');
INSERT INTO t VALUES ('GIF', '301');
INSERT INTO t VALUES ('ECH', '302');
INSERT INTO t VALUES ('PUB', 'MER');
INSERT INTO t VALUES ('MER', '312');
INSERT INTO t VALUES ('MER', '313');
INSERT INTO t VALUES ('MER', '314');
INSERT INTO t VALUES ('MES', '318');
INSERT INTO t VALUES ('PUB', 'PRE');
INSERT INTO t VALUES ('PUB', 'PAP');
INSERT INTO t VALUES ('STA', '317');
INSERT INTO t VALUES ('NIV', 'ANS');
INSERT INTO t VALUES ('ZNM', '497');
INSERT INTO t VALUES ('ZNU', '496');
INSERT INTO t VALUES ('ANS', 'ZNC');
INSERT INTO t VALUES ('ZNC', '491');
INSERT INTO t VALUES ('NUL', 'NIV');
INSERT INTO t VALUES ('NIV', 'VTE');
INSERT INTO t VALUES ('VTE', 'VTC');
INSERT INTO t VALUES ('VTC', '100');
INSERT INTO t VALUES ('VTP', '204');
INSERT INTO t VALUES ('VTP', '205');
INSERT INTO t VALUES ('VTA', '500');
INSERT INTO t VALUES ('SER', '600');
INSERT INTO t VALUES ('NIV', 'PUB');
INSERT INTO t VALUES ('ECH', '303');
INSERT INTO t VALUES ('MER', '305');
INSERT INTO t VALUES ('MER', '306');
INSERT INTO t VALUES ('MER', '309');
INSERT INTO t VALUES ('PAP', '605');
INSERT INTO t VALUES ('SEP', 'PBC');
INSERT INTO t VALUES ('PBC', '601');
INSERT INTO t VALUES ('SEP', 'STA');
INSERT INTO t VALUES ('NIV', 'TRA');
INSERT INTO t VALUES ('ZNP', '498');
INSERT INTO t VALUES ('ANS', 'ZNM');
INSERT INTO t VALUES ('ANS', 'ZNE');
INSERT INTO t VALUES ('ANS', 'ZNR');
INSERT INTO t VALUES ('ZNR', '493');
INSERT INTO t VALUES ('ZNF', '492');
INSERT INTO t VALUES ('VTC', '101');
INSERT INTO t VALUES ('VTC', '102');
INSERT INTO t VALUES ('VTE', 'VTA');
INSERT INTO t VALUES ('VTE', 'SER');
INSERT INTO t VALUES ('AUT', '900');
INSERT INTO t VALUES ('PUB', 'CPR');
INSERT INTO t VALUES ('MER', '310');
INSERT INTO t VALUES ('MER', '311');
INSERT INTO t VALUES ('MER', '604');
INSERT INTO t VALUES ('PUB', 'MES');
INSERT INTO t VALUES ('MES', '316');
INSERT INTO t VALUES ('SEP', 'RSF');
INSERT INTO t VALUES ('RSF', '608');
INSERT INTO t VALUES ('TRA', 'TRP');
INSERT INTO t VALUES ('TRP', '603');
INSERT INTO t VALUES ('ANS', 'ZNP');
INSERT INTO t VALUES ('ANS', 'ZNU');
INSERT INTO t VALUES ('ANS', 'ZNG');
INSERT INTO t VALUES ('ANS', 'ZNF');
INSERT INTO t VALUES ('VTC', '104');
INSERT INTO t VALUES ('VTC', '105');
INSERT INTO t VALUES ('VTP', '200');
INSERT INTO t VALUES ('VTP', '201');
INSERT INTO t VALUES ('VTP', '203');
INSERT INTO t VALUES ('VTA', '400');
INSERT INTO t VALUES ('VTE', 'AUT');
INSERT INTO t VALUES ('CPR', '602');
INSERT INTO t VALUES ('PUB', 'GIF');
INSERT INTO t VALUES ('PUB', 'ECH');
INSERT INTO t VALUES ('MER', '307');
INSERT INTO t VALUES ('MER', '308');
INSERT INTO t VALUES ('PRE', '304');
INSERT INTO t VALUES ('PRE', '315');
INSERT INTO t VALUES ('NIV', 'SEP');
INSERT INTO t VALUES ('TRP', '607');
INSERT INTO t VALUES ('ANS', 'ZNA');
INSERT INTO t VALUES ('ZNA', '499');
INSERT INTO t VALUES ('ZNG', '495');
INSERT INTO t VALUES ('ZNE', '494');
COMMIT; 
```

我最初认为我可以使用类似的东西：

```
SELECT ParentId, Id
FROM t
WHERE  id LIKE '3%' 
start with ParentId ='NIV'
CONNECT BY PRIOR Id = ParentId 
```

例如，302 的父亲是 ECH ECH 的父亲是 PUB PUB 的父亲是 NIV

但查询仅显示 0 级关系：302 的父亲是 ECH

它将所有更高级别丢弃到根：ECH的父亲是PUB PUB的父亲是NIV

我想出了下面的解决方案。

但是，子-父循环是硬编码的，这违背了分层查询的目的，即自动识别子-父关系的数量。

```
SELECT parentid, id
FROM t
WHERE id IN 
  (SELECT parentid
   FROM t
   WHERE 
   id IN 
     (SELECT parentid
      FROM t
      WHERE id LIKE '3%'
      start with parentid='NIV' 
      CONNECT BY PRIOR id = parentid)
      start with parentid ='NIV' 
      CONNECT BY PRIOR id = parentid)
OR 
ccomuse IN 
  (SELECT parentid 
   FROM t
   WHERE id LIKE '3%'
   start with parentid ='NIV' 
   CONNECT BY PRIOR id = parentid )
OR 
id LIKE '3%' 
start with parentid ='NIV' 
CONNECT BY PRIOR id = parentid 
```

有没有一种方法可以提取所有的子父关系，而无需对 2 个内部循环进行硬编码，即使用自动到达根的递归方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:05:45.833

尝试从错误的一端构建树:-)

```
SELECT distinct ParentId, Id
FROM t
start with Id LIKE '3%' 
CONNECT BY Id = prior ParentId and Id <> 'NIV' 
```

[小提琴](http://www.sqlfiddle.com/#!4/1a910/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:12:13.990

您是否查看过 sys_connect_by_path() 函数来逐项列出层次结构中的元素，并在最右侧进行过滤？

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions171.htm#i1038266](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions171.htm#i1038266)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-06T18:49:06.237

如果要过滤叶级别满足条件的所有父子关系，则需要在 connect by 子句中指定条件。它将从输出中消除不必要的节点及其子节点。如果在 where 子句中指定条件，则子节点将显示没有父节点，因此输出将没有意义。

# database - 青少年足球东/西两个分区的数据库设计，每个分区有四支球队

> ID：15599488
> 
> 赞同：0
> 
> 时间：2013-03-24T14:11:43.580
> 
> 标签：database

当前设计：

*   **Gamestable** : Gameid, dmy, starttime, dayplayed, weeknumber, Hometeamdivisionid, Hometeamid, Awayteamdivisionid, Awayteamid, Hometeampointsscored, Awayteampointsscored, win-loss

*   **Hometeamdivisiontable** : Hometeamdivisionid

*   **Hometeamtable** : Hometeamid

*   **Awayteamdivisiontable** : Awayteamdivisionid

*   **Awayteamtable** : Awayteamid

我需要更多的桌子，还是只需要不同的桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:59:48.740

### 初步观察

“主队”和“客队”不需要单独的表格。想一想：你有团队；这些被组织成部门；他们玩游戏。在任何给定的比赛中，一支球队是主队，一支球队是客队，但对于不同的比赛，一支球队可以是主队或客队。给定的团队一次属于一个部门。所以你需要一个有点像这样的设计：

*   **部门**：部门 ID、名称 (...)

*   **Team** : Team ID, Division ID, Name (...)

*   **游戏**：游戏 ID、比赛日期、开始时间、主队 ID、客队 ID、主队得分、客队得分 (...)

显然，Game 表中的值存在限制，例如“Home Team ID”不等于“Away Team ID”。也可能有更复杂的限制：两支球队必须在同一个分区（如果没有跨分区比赛）。您有两个从 Game 到 Team 的外键约束。

从这些，可以计算出其他一切。您可能需要一个“日历”表来定义“周数”；这可能是确定给定比赛在赛季的哪一周进行的最简单方法：

*   **日历**：日期、季节 ID、周数 (...)

如果您必须处理“A 队”在 2012 年春季在西区，但在 2012 年秋季在东区等，那么您需要更多的复杂性，但是您一次只需要记录一个赛季，所以一支球队是总是在同一个部门，那你就很好了。

* * *

### 现在有更多信息可用

总体目标是记录一个联赛中多个赛季的比赛。组成联赛的球队很稳定，只有两个分区，但球队可以在不同赛季（但不能在一个赛季）之间移动。

第一个必要的更改是 Team 表；现在`Division ID`是特定赛季球队的属性，而不是永久属性。历法问题也更为重要。

*   **季节**：季节 ID (PK)、名称、开始日期、结束日期 (...)

*   **部门**：部门 ID (PK)、名称 (...)

*   **Team** : Team ID (PK), Name (...) *(这里没有Division ID)*

*   **SeasonDivisionTeam** : Season ID, Division ID, Team ID（PK都是三个属性）

*   **游戏**：游戏 ID (PK)、比赛日期、开始时间、主队 ID、客队 ID、主队得分、客队得分、场地 ID、(...)

*   **日历**：日期 (PK)、季节 ID、周数 (...)

SeasonDivisionTeam这个名字不好；不过，我在一个更好的名字上画了一个空白。它基本上定义了每个赛季每个分区的球队。这是一个“全键”表，具有三个单独的外键。季节表（及其开始和结束日期）和日历表之间存在约束。日历表中为特定季节指定的日期不得超出季节表中为同一季节指定的日期范围。或者，您可以从季节表中删除季节日期，并让日历表定义有效的日期范围。

您最终可能会得到一些汇总主要操作表中数据的统计表。例如，计算特定日期的部门排名是可行的，但计算成本适中。您可能有一个用于记录“赛季末”排名的汇总表。如果你愿意，你可以在每个周末都有条目。

我不确定季后赛最好做什么。游戏桌能够记录原始数据。您可能想要添加一个 Venue 列来记录游戏在哪里进行。由于这是一个初级赛区，我可以想象你会在赛季结束的一两天内举办一场淘汰赛——或者可能是一场分循环赛和淘汰赛阶段的分级赛。在这种情况下，您可能在短时间内玩了一系列游戏。或者您可能会更频繁地间隔游戏。Games 表的结构可以记录任何这些变化。但是，您可能会发现设计一个表格来定义季后赛的结构是明智的。最有效的方法可能取决于季后赛组织的稳定性。为此，需要更多信息。但是，对于录制游戏的简单问题，概述的游戏桌没有问题。问题是人类如何赋予季后赛意义。

# css - wordpress 网站上的视频背景无法在 IE9 上正确显示

> ID：15599489
> 
> 赞同：-1
> 
> 时间：2013-03-24T14:11:43.817
> 
> 标签：css, wordpress, internet-explorer, flash

使用 JW 播放器，我正在尝试将视频嵌入作为网站背景。我正在使用 Wordpress 作为网站的 CMS。主页在 Chrome 和 Firefox 上运行良好，但在 IE 9 上无法正常显示。我很难找出问题所在。

网址到网站：[演示网站](http://goo.gl/Uujdi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:22:28.040

首先，视频没有覆盖我分辨率的整个背景，因此将视频元素的宽度和高度设置为：

```
video_wrapper{
width: 100%;
height: 100%;
} 
```

考虑到 IE9，你能解释什么是错的或提供截图吗？

# jquery - jquery 代码在 jsfiddle 上工作正常，但在我的网站上只有部分（切换不起作用），即使相同版本的 jquery

> ID：15599490
> 
> 赞同：0
> 
> 时间：2013-03-24T14:11:51.427
> 
> 标签：jquery, toggle

我一直在 jsfiddle 上为我的网站编写一个元素，当我尝试将它传输到我的网站（基于 wordpress）时，它只能部分工作。
它似乎不是 jquery 本身不工作，因为展开/折叠机制工作得很好。班级切换似乎有问题，如果您能帮我解决这个问题，我将不胜感激，因为我无法通过搜索找到可行的解决方案。

这是代码，jsfiddle 告诉我它的有效 - [http://jsfiddle.net/GSzC4/](http://jsfiddle.net/GSzC4/)

但是在我的网站上它不起作用/切换不起作用，其余的都起作用 - [http://www.roxopolis.de/media/albums/what-would-you-give](http://www.roxopolis.de/media/albums/what-would-you-give)

```
 jQuery(document).ready(function () {
    jQuery(".content").hide();
    jQuery(".content_album").hide();

    jQuery(".heading").click(function () {
        jQuery(this).next(".content").slideToggle(200);
    });
    jQuery("#heading_album").click(function () {
        jQuery(this).next(".content_album").slideToggle(400);
    });

    $('#heading_album').click(function () {
        $(this).toggleClass('album_clicked');
    });

    $('.heading').click(function () {
        $(this).toggleClass('album_item_clicked');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:18:58.077

更改您 在代码中`$`登录的所有内容`jquery`...我认为 jquery 和 wordpress 中的其他框架之间发生了冲突

```
 jQuery(this).toggleClass('album_clicked');
  //^^^^---here 
```

# objective-c - NSUserScriptTask：取消任务？

> ID：15599493
> 
> 赞同：0
> 
> 时间：2013-03-24T14:12:11.850
> 
> 标签：objective-c, cocoa, nstask, appstore-sandbox

有什么办法可以取消正在运行的 NSUserScriptTask？想到的唯一方法是通过 NSTask 启动一个单独的进程（命令行工具），其唯一目的是运行 NSUserScriptTask，然后在必要时通过 NSTask 终止命令行工具。然而，这似乎有点牵强，而且不是很优化......有什么想法吗？

# c# - 使用 Linq 表达式在通用存储库中实现搜索

> ID：15599494
> 
> 赞同：3
> 
> 时间：2013-03-24T14:12:16.143
> 
> 标签：c#, linq, entity-framework

我首先使用实体​​框架和代码。这是一个简单的例子，向您展示我的情况。

```
public class PersonEfModel
{
    public int Id { get; set; }
    public string Vorname { get; set; }
    public string Nachname { get; set; }
}

public class EfContext : DbContext
{
    public DbSet<Person> Personen { get; set; }
} 
```

为了独立于数据访问的实现，我编写了一个带有存储库的抽象层。

```
public class Person
{
    public int Id { get; set; }
    public string Vorname { get; set; }
    public string Nachname { get; set; }
}

public interface IGenericRepository<T>
{
    int Count { get; }

    void Add(T item);
    void Delete(T item);
    void Update(T item);

    T GetData(int id);
    IEnumerable<T> GetData();
    IEnumerable<T> GetData(int offset, int count);

    IEnumerable<T> Find(Expression<Func<T,bool>> predicate);
    IEnumerable<T> Find(IEnumerable<Expression<Func<T, bool>>> predicates);
} 
```

`Person`并且`PersonEfModel`必须是两种不同的类型才能完全独立于数据库模型。所以会有一个 Person 类型的通用存储库，但我真的不知道如何实现 Find 方法。我只能对依赖于 PersonEfModel 而不是 Person 的数据库执行表达式。

那么有没有办法将 a`Expression<Func<Person, bool>>`转换为 a`Expression<Func<PersonEfModel, bool>>`以针对数据库执行它，还是我走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:13:32.310

如果您真正遵循领域驱动设计，那么您不需要创建 2 个单独的对象来表示`Person`. 您的`Person`类已经是 POCO，它代表了您在自己的代码中需要的确切实体（毕竟您使用的是 Code First）。

您只是在引入额外且完全不必要的复杂性。每次更改`Person`课程时，您都需要更改`PersonEfModel`课程并让存储库正常工作，您需要使用某种映射器（AutoMapper）并映射`Person`到`PersonEfModel`它是完全不必要的，因为两者很可能是相同的。

# node.js - 发送自定义值以连接兼容的中间件？

> ID：15599495
> 
> 赞同：1
> 
> 时间：2013-03-24T14:12:22.460
> 
> 标签：node.js, express, connect

我有一个快速服务器，我正在尝试编写一些中间件来检查用户是否处于指定级别，但是不知道如何将`level`值传递给中间件。

示例 app.js：

```
app.get('/restricted',verify.auth('4') , routes.index); 
```

示例 auth.js

```
exports.verify = function(req, res, next, requiredLevel) {
    if(userLevel>=requiredLevel){next};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:42:04.973

尝试这个

```
verify.auth=function(requiredLevel){
 return function(req,res,next){
  // requiredLevel is visible here ..
  // manipulate req,res
   //..
  // call next middleware
  next();
 }
} 
```

还使用会话，因此您不会将用户级别留给用户指定..

# regex - 计算文本文件中的特定字符串 [空白噪声]

> ID：15599496
> 
> 赞同：0
> 
> 时间：2013-03-24T14:12:34.833
> 
> 标签：regex, text, whitespace

我想获取特定字符串的所有出现，例如`police officer`在文本文件中，文本文件有很多空格，它可能看起来像这样：

```
T h e  r a p i s t  r a n  f r o m  t h e  p o l i c e 
o f f i c e r, d o w n  M a i n  S t r e e t. 
```

或者以最简单的形式：

```
The rapist ran from the police officer, down Main Street. 
```

我精通 VBA 或 PHP，但愿意接受其他快速解决方案。

我在考虑正则表达式，但不确定是否有办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:28:29.403

您可以在正则表达式中添加空格，您的搜索字符串将类似于`p\s*o\s*l\s*i\s*c\s*e\s+o\s*f\s*f\s*i\s*c\s*e\s*r\s*`. 如果要包含选项卡，可以更改`\s*`为`[\s\t]*`. 当然，您可以自动创建这些搜索字符串。

如果你想先尝试正则表达式，有很多在线资源，例如[http://regexpal.com/](http://regexpal.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:28:37.317

你可以做这样的事情（在 php 中）：

1）将文件的内容读入一个字符串（或者如果你逐行执行，则读取该行的内容）

2) 使用 str_replace() 从字符串中去除任何空白

3) 使用 strpos() 查看 'policeofficer' 是否在字符串中。（请注意，您也需要从输入中删除空格）。

4) 返回 strpos 的结果（注意你需要使用 === 来测试）。

我不确定这是最有效的方法，但它应该有效。

# c# - 如何在 C# 中使用 gtk 构建器

> ID：15599497
> 
> 赞同：0
> 
> 时间：2013-03-24T14:12:36.910
> 
> 标签：c#, gtk#

根据[如何在 C# 中使用 GtkBuilder 连接空地信号？](https://stackoverflow.com/questions/1693454/how-do-i-connect-glade-signals-using-gtkbuilder-in-c)2009 年，mono 的开发人员即将实现 gtk builder 到 c#。现在是 2013 年，建议的方法仍然不可用。那么有没有什么方法可以使用呢？

由于 GtkBuilder 取代了 glade 格式，整个 glade 的东西似乎对 c# 没有用（至少 glade 编辑器将文件保存为 GtkBuilder 格式，libglade 在单声道中无法读取）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T01:11:04.523

是的，可以在 C# 中使用 GTK Builder，而无需使用 Glade 库。（顺便说一下，我在 Boo 中也取得了成功；在 Cobra 上没有成功，也没有尝试过 [Iron]Python 或 [Iron]Ruby。）

想要使用 GTK 构建器而不是 Glade 库的一个非常重要的原因是，AFAIK，3.8 之后的 Glade 版本生成的 XML 代码仅与 GTK+3 兼容（[http://blogs.gnome.org/tvb/2011/ 01/15/the-glade-dl/](http://blogs.gnome.org/tvb/2011/01/15/the-glade-dl/)）。另外，我认为使用 GTK Builder 将允许使用由几乎任何生成适当定义的 GUI 构建器生成的 XML 文件。

好的，下面是 MonoBasic 示例中适用于 C# 的解决方案：[http](http://www.mono-project.com/GtkSharp:_Hello_World) ://www.mono-project.com/GtkSharp:_Hello_World 。我使用该示例中的 GUI 定义在 Glade 3.14.2 中创建了一个 GUI，然后简单地将文件保存为“togglebuttons.xml”。

切换按钮.cs：

```
using Gtk;
using System;

class ToggleButtons
{
    public ToggleButtons()
    {
        Gtk.Application.Init();
        Builder Gui = new Builder();
        Gui.AddFromFile("togglebuttons.xml");
        Gui.Autoconnect(this);
        Gtk.Application.Run();
    }

    static void onDeleteEvent(object o, DeleteEventArgs args)
    {
        Application.Quit();
    }

    static void onExitButtonEvent(object o, EventArgs args)
    {
        Application.Quit();
    }

    public static void Main()
    {
        new ToggleButtons();
    }
} 
```

这是 Glade 生成的 XML 文件，togglebuttons.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
<!-- interface-requires gtk+ 3.0 -->
<object class="GtkWindow" id="window">
    <property name="visible">True</property>
    <property name="can_focus">False</property>
    <property name="title" translatable="yes">Toggle Buttons</property>
    <signal name="delete-event" handler="onDeleteEvent" swapped="no"/>
    <child>
    <object class="GtkBox" id="box1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="orientation">vertical</property>
        <child>
        <object class="GtkToggleButton" id="togglebutton1">
            <property name="label" translatable="yes">Button 1</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
            <property name="halign">center</property>
        </object>
        <packing>
            <property name="expand">True</property>
            <property name="fill">False</property>
            <property name="position">0</property>
        </packing>
        </child>
        <child>
        <object class="GtkToggleButton" id="togglebutton2">
            <property name="label" translatable="yes">Button 2</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
            <property name="halign">center</property>
        </object>
        <packing>
            <property name="expand">True</property>
            <property name="fill">False</property>
            <property name="position">1</property>
        </packing>
        </child>
        <child>
        <object class="GtkSeparator" id="separator1">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
        </object>
        <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">2</property>
        </packing>
        </child>
        <child>
        <object class="GtkButton" id="button1">
            <property name="label" translatable="yes">Close</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
            <property name="halign">center</property>
            <signal name="clicked" handler="onExitButtonEvent" swapped="no"/>
        </object>
        <packing>
            <property name="expand">True</property>
            <property name="fill">False</property>
            <property name="position">3</property>
        </packing>
        </child>
    </object>
    </child>
</object>
</interface> 
```

HTH :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:07:52.067

好吧，我不知道构建器对象是否已实现，因为我也是 GTK# 的新手，但 Autoconnect() 方法确实适用于 Glade.XML 对象，这就是我在我的空地中连接信号的方式xml。下面是一个简单的 helloworld c# 程序的工作示例，它使用 Autoconnect 作为信号：

（我有 GTK# 2.12.20 和 Glade 3.4.3）

使用系统；使用 Gtk；使用林间空地；

命名空间 textPad { public class GladeApp { public static void Main(string[] args) { new GladeApp (); }

```
 public GladeApp(){
        //System.Console.WriteLine ("Hello GTK");
        //System.Console.Read ();
        Gtk.Application.Init ();

        Glade.XML gxml = new XML (null,@"textPad.FirstTextpad.glade","window1",null);

        gxml.Autoconnect (this);

        Gtk.Application.Run ();
        //return 0;
    }

    public void btnExit_clicked_cb(System.Object sender,System.EventArgs e)
    {
        close (null,null);
    }

    public void close(System.Object sender, System.EventArgs e)
    {
        Application.Quit ();
    }
}
} 
```

# c++ - STL排序不起作用

> ID：15599498
> 
> 赞同：0
> 
> 时间：2013-03-24T14:12:46.180
> 
> 标签：c++, sorting, stl

```
for (i = 0; i < t; i++)
{
  values.clear();

  scanf("%d %d %d", &values[0], &values[1], &values[2]);
  printf("%d %d %d\n", values[0], values[1], values[2]);
  sort(values.begin(), values.end());
  printf("%d %d %d\n", values[0], values[1], values[2]);

  printf("Case %d: %d\n", i + 1, values[1]);
} 
```

我有那个小片段。我输入“1200 1500 1800”，它应该给我中间值 - 1500。但是，它输出的是最小值 1200。

我所做的是使用 STL 的 sort() 对向量进行排序，然后打印 values[1]，这是中间值。

但是， sort() 似乎根本不起作用，之前和之后的打印向量是一样的。

我声明我的向量：

```
vector<int> values (3); 
```

我试图用`vector<int> values;`然后`push_back(0)`三遍和它来声明它。

不过，我想知道为什么它不能以第一种方式工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T14:15:00.647

你的程序有**未定义的行为**。

为了修复它，只需删除此行：

```
values.clear(); 
```

实际上，上面这行所做的就是**从 vector 中删除所有元素**。然后，这一行：

```
scanf("%d %d %d", &values[0], &values[1], &values[2]);
                   ^^^^^^^^^   ^^^^^^^^^   ^^^^^^^^^ 
```

将尝试访问不存在的元素。与`operator []`关联容器不同，`operator []`向量不会创建任何新元素。因此，表达式`values[0]`、`values[1]`和`values[2]`都是访问不存在元素的尝试。

根据 C++11 标准的表 101：

> *表达式*：`a[n]`
> 
> *返回类型*：参考；`const_reference`为常数`a`
> 
> *操作语义*：**`*(a.begin() + n)`**

这意味着通过这样做：

```
values[0] 
```

你实际上是在这样做：

```
*(values.begin() + 0) 
```

对此处的调用会`values.begin()`返回一个指向数组中第一个元素的迭代器。由于向量中没有元素（第 23.2.1/6 节），调用 to`values.begin()`等同于调用`values.end()`:

> `begin()`返回一个引用容器中第一个元素的迭代器。`end()`返回一个迭代器，它是容器的结束值。如果容器是空的，那么`begin() == end()`；

因此，`values[0]`在您的情况下实际上等同于：

```
*(values.end() + 0) 
```

这又相当于：

```
*(values.end()) 
```

换句话说，您正在取消引用指向容器中最后一个元素之外的位置的迭代器。这是未定义的行为，当然同样适用于`values[1]`和`values[2]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T14:14:28.920

```
values.clear(); 
```

这将清除`values`，使其不再包含任何元素。尝试访问任何元素将导致未定义的行为，并且`std::sort`只会对空的数字序列进行排序。

`a.clear()`where`a`是一个序列容器的定义是：

> 销毁`a`. 使所有引用的元素的引用、指针和迭代器失效，`a`并且可能使过去的迭代器失效。
> *帖子*：`a.empty()`返回真

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T14:22:04.930

我认为 **< algorithm >标头中的****__median**函数更容易。

 **```
med = __median(a, b, c); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:19:42.053

当您清除时，`vector`您将大小设置为 0。该`scanf`行通常不会崩溃，因为`vector`通常会预先分配一些存储读取值的存储空间。结果是，当您调用`sort`, 时，`begin()`和`end()`将相等。

您可以尝试将值读取到临时变量中，或者`resize(3)`在读取值之前调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T14:21:21.730

您尝试清除实际存在的元素`values.clear();`实际上是从向量中完全删除它们。这具有产生`begin()`和`end()`相等的效果，导致排序无效（以及您获取各种元素地址的输入具有未定义的行为）。

我认为您真正想要做的是确保向量中没有太多元素，因此不要`clear`使用`resize`: `values.resize(3)`，这将具有删除多余元素或将向量的大小增加到三个（如果它当前较小）的效果.**

# html - 设置表格中提交按钮的宽度

> ID：15599499
> 
> 赞同：-1
> 
> 时间：2013-03-24T14:12:59.057
> 
> 标签：html, css, html-table

基本问题。有一个表单提交按钮：

HTML：

```
<tr>
    <td class="submit" colspan="3">
        <input class="design1" type="submit" value="Let's get started"  />
    </td>
</tr> 
```

CSS：

```
.design1{
background-color:#3c3c3c;
color: #e5e5e5;
padding:5px;
}

.design1:hover {
background-color:#016a70;
color: #f0f0f0;
padding:5px;
}

.design1:active {
background-color:#016a70;
color: #f0f0f0;
padding:5px;
} 
```

如何使按钮与文本一样宽？它似乎和桌子的中间一列一样宽。我尝试使用*宽度*属性，但徒劳无功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:32:49.307

在您的 css 文件中使用此代码，工作正常

```
.submit input{width:150px;
 height:100px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:17:39.367

尝试输入属性 maxsize="[number of chars]" 或 size="[number of chars]" 。有帮助。

# java - ClassNotFoundException - java 小程序

> ID：15599500
> 
> 赞同：0
> 
> 时间：2013-03-24T14:13:04.633
> 
> 标签：java, applet

我有一个 Java 网络服务器。一个 html 页面提供一个 java 小程序！我在不使用服务器的情况下测试了 html 文件，它工作正常。html 文件放置在一个名为“applet”的文件夹中，其中包含“.class”

例子

.html

```
<applet code="applets/init.class" width="80%" height="80%> </applet> 
```

我的问题是当我通过java服务器传递它时，我得到了错误

```
ClasNotFoundException
applets.init.class 
```

我已经成功通过浏览器直接下载了.class，这意味着服务器正在为.class提供服务。

当实际路径为“applet/init.class”时，为什么服务器在“applet.init.class”处搜索.class

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:16:15.287

你必须这样做：

```
<applet code="init" codebase="applets/" width="80%" height="80%"> </applet> 
```

还要注意缺少`"`关闭高度。

# php - 匹配此 foreach 循环的 PHP 数组函数

> ID：15599502
> 
> 赞同：1
> 
> 时间：2013-03-24T14:13:15.483
> 
> 标签：php

PHP 有各种内置的数组函数。所以我想知道这段代码中是否有一个相当于foreach循环的函数。

```
$args = array('var1', 'var2');
$args2 = array('var3', 'var4', 'var5', 'var6');

foreach ($args2 as $arg) {
    $args[] = $arg;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:14:40.373

是的，**[`array_merge()`](http://php.net/manual/en/function.array-merge.php)**。

> ```
> array array_merge ( array $array1 [, array $... ] ) 
> ```
> 
> 将一个或多个数组的元素合并在一起，以便将一个数组的值附加到前一个数组的末尾。它返回结果数组。
> 
> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。
> 
> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:16:35.213

你应该试试[array_merge](http://www.php.net/manual/en/function.array-merge.php)函数

将一个或多个数组的元素合并在一起，以便将一个数组的值附加到前一个数组的末尾。它返回结果数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:20:30.770

带`array_merge`功能。但请注意，数字键将被重新编号！

或者您可以使用联合运算符： *if 键将被设置

```
$array1 = array('key1' => 'zero_a', 'key2' => 'two_a', 'key3' => 'three_a');
$array2 = array('key4' => 'one_b', 'key5' => 'three_b', 'key6' => 'four_b');
$result = $array1 + $array2; 
```

[手动的](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:31:25.830

array_merge 函数用于合并多个数组。

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# ruby-on-rails - Rails 2.2.2表单输入字段为只读

> ID：15599504
> 
> 赞同：2
> 
> 时间：2013-03-24T14:13:23.963
> 
> 标签：ruby-on-rails

我继承了一个较旧的 Rails 2.2.2 项目，我试图将一些文本字段设为只读，但是当我添加时：

```
:readonly => true 
```

它不起作用，即使在重新启动并查看源代码之后，看起来 Rails 只是忽略了该哈希值。这是视图中的整个片段：

```
<%= f.text_field :password %> <%= link_to "Generate", {},:readonly => true, :class => "small_link_button", :onclick => "generatePassword(); return false;" %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T14:19:27.533

看起来您将只读放在链接上，而不是 text_field。考虑试试这个：

```
<%= f.text_field :password, :readonly=>true %> 
<%= link_to "Generate", {}, :class => "small_link_button", :onclick => "generatePassword(); return false;" %> 
```

# c++ - wav文件中奇怪的滴答声

> ID：15599505
> 
> 赞同：1
> 
> 时间：2013-03-24T14:13:26.163
> 
> 标签：c++, audio, audio-streaming, wav, pcm

我正在将音频录制到 wav 文件中，并将相同的音频流式传输到扬声器（`c++`、、、`vs2010`）`win7`。当我在扬声器中听到它时，我可以清楚地听到音频，但是当我将其写入 wav 文件时，我会在音频中添加奇怪的滴答声/电噪声，我尝试使用 audacity 打开文件，我可以清楚地看到每 0.05 秒有一个峰值。我不知道噪音是从哪里添加的，你能帮我吗？

我将代码中的内容添加到文件中：

```
writeWav(char *filename,short *data) 
{ 
     FILE *wav; 
     wav = fopen(filename,"ab+"); 
     for(int i=0;i<1024;i++) 
     { 
        writeLE(data[i],2,wav); 
     } 
     fclose(wav); 
} 

void writeLE(short data,int nBytes,FILE *wav) //write in little-endian
{ 
     unsigned buf; 
     while(nBytes > 0) 
     { 
         buf = word & 0xff; 
         fwrite(&buf,1,1,wav); 
         nBytes--; 
         word >>= 8; 
     } 
} 
```

`writeWav`每次收到数据包时都会调用该函数（大小 = 1024）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:22:21.370

看起来你的 for 循环是错误的。

要处理 1024 个项目，它应该是：

```
for (int i = 0; i < 1024; i++) 
```

# jaxb - xmlseealso 等价于 Simplexml

> ID：15599507
> 
> 赞同：0
> 
> 时间：2013-03-24T14:13:49.667
> 
> 标签：jaxb, simplexml

**@xmlseealso** jaxb 在**simplexml**中的等价物是什么。Iam 解析的响应如下所示：

```
<things xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:type="thing">
    <val>185</val>
</things>
<things xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:type="thing">
    <val>162</val>
</things> 
```

我正在寻找这样的响应映射

```
Response.java

@ElementList
List<Object> things;

Thing.java

@Element
int val; 
```

如何像在 jaxb 中使用 xmlseealso 那样动态地将“事物”映射到“事物”列表。Simplexml 有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:11:30.323

如果您的意思是匹配不同类的元素列表但具有共享超类，那么解决方案是 @ElementListUnion 注释。您的

```
@XmlSeeAlso({X.class, Y.class, Z.class}) 
```

应表示为：

```
@ElementListUnion({
   @ElementList(entry="x", inline=true, type=X.class),
   @ElementList(entry="y", inline=true, type=Y.class),
   @ElementList(entry="z", inline=true, type=Z.class)               
})
private List<Superclass> xyz; 
```

见[http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/ElementListUnion.html](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/ElementListUnion.html)

# python - Flask：从数据库中检索数据并将其存储在会话中

> ID：15599519
> 
> 赞同：1
> 
> 时间：2013-03-24T14:15:27.360
> 
> 标签：python, sqlalchemy, flask

我有 db.model 像：

```
class UserProfile(db.Model):
  __tablename__ = 'UserProfile'
  nickname = db.Column(db.String(40), primary_key=True)
  wm = db.Column(db.Boolean)

def __init__(self,name):
    self.nickname = name
    self.wm  = 1

def __repr__(self):
    return '<UserProfile {nickname}>'.format(username=self.nickname) 
```

在用户登录期间 - 我试图从数据库中检索记录并将其值存储在会话变量中 -

```
 userprofile = UserProfile(form.username.data)
    userprofile = UserProfile.query.filter_by(nickname=form.username.data).first()
    session['wm']=userprofile.wm 
```

但它失败了，消息如下：

```
 session['wm']=userprofile.wm
     AttributeError: 'NoneType' object has no attribute 'wm' 
```

mysql数据库：

```
mysql> desc UserProfile;
+------------+-------------+------+-----+---------+-------+
| Field      | Type        | Null | Key | Default | Extra |
+------------+-------------+------+-----+---------+-------+
| nickname   | varchar(40) | NO   | PRI | NULL    |       |
| wm         | tinyint(1)  | YES  |     | NULL    |       | 
```

它也有记录。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:20:08.113

您需要先将新对象实际*添加*`UserProfile`到数据库中：

```
userprofile = UserProfile(form.username.data)
db.session.add(userprofile) 
```

请参阅[有关插入的 Flask-SQLAlchemy 文档](http://pythonhosted.org/Flask-SQLAlchemy/queries.html#inserting-records)：

> 在将对象添加到会话之前，SQLAlchemy 基本上不打算将其添加到事务中。这很好，因为您仍然可以放弃更改。例如，考虑在页面上创建帖子，但您只想将帖子传递给模板以进行预览渲染，而不是将其存储在数据库中。
> 
> 然后`add()`函数调用添加对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T11:33:26.980

添加后您需要提交，才能看到更改

```
userprofile = UserProfile(form.username.data)
db.session.add(userprofile)
db.session.commit() 
```

# php - 加载命名空间所需的文件（使用不同的名称）？

> ID：15599521
> 
> 赞同：2
> 
> 时间：2013-03-24T14:15:31.443
> 
> 标签：php, class, namespaces

我有两个文件，如下所述：

**路径：index.php**

```
<?php
// Composer autload
require_once 'vendor/autoload.php';

//The commented code below works:
//$loader = new Twig_Loader_String();
//$twig = new Twig_Environment($loader);
//echo $twig->render('Hello {{ name }}!', array('name' => 'Fabien'));

//Bad proposal solution. How to avoid to explicit load all files with namespaces?
//  Please see the 'Important edit' below.
//include_once 'Core/Twig/Twig.php';
use Core\Twig\Twig as Twig;

$twig = new Twig();
var_dump($twig); 
```

**路径：Core/Twig/Twig.php**

```
<?php
namespace Core\Twig;

class Twig
{
    public function configure()
    {
        $loader = new \Twig_Loader_String();
        $twig = new \Twig_Environment($loader);
        //just for testing
        echo $twig->render('Hello {{ name }}!', array('name' => 'Fabien'));
    }
} 
```

但我遇到了一个致命错误：`Class 'Core\\Twig\\Twig' not found`.

我该如何解决这个问题？

PS：我尝试了命名空间的一些变体（如`Core\Twig`，`Core`），使用（如`Twig`，，`Core\Twig`）`Core\Twig as Twig`和新的（如`Twig\Twig()`，`Core\Twig`）。不幸的是，没有任何效果。

**重要编辑：** 我明白为什么 php 没有找到类。需要一条类似的线`include_once 'Core/Twig/Twig.php'`。但问题仍然存在......我该如何避免这种情况？避免包含所有带有命名空间的文件？或者，如何在需要时自动加载这些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:53:35.457

您可能错误地标记了命名空间。查看[此命名空间入门中的“命名空间导入：使用关键字”部分。](http://akrabat.com/php/a-primer-on-php-namespaces/)

**路径：lib/vendor/core/Twig.php**

```
<?php
namespace lib\vendor\core;

class Twig
{
    //Your code
} 
```

**路径：index.php**

```
use lib\vendor\core\Twig;
$twig = new Twig();
var_dump($twig); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:34:31.230

经过几次测试，我得到了答案。检查`vendor/autoload.php`.

我们需要一些不明确的东西（至少对我来说）。

`composer.json`我们需要把

```
psr-0 : {
    "MyNamespace" : "MyOwnVendorName"
} 
```

对于这种情况，应运行以下代码：

`Path: index.php`

```
<?php
// Composer autload
require_once 'vendor/autoload.php';

use classes\MyApp\Twig\Twig;

$twig = new Twig;
var_dump($twig); 
```

`Path: core/classes/MyApp/Twig/Twig.php`

```
<?php
namespace MyApp\Twig;

class Twig
{
    public function configure()
    {
        $loader = new \Twig_Loader_String();
        $twig = new \Twig_Environment($loader);
        //just for testing
        echo $twig->render('Hello {{ name }}!', array('name' => 'Fabien'));
    }
} 
```

`composer.json`

```
{
    "psr-0" : {
        "MyApp" : "core/classes/"
    }
} 
```

然后运行`php composer.phar udpate`

# entity-framework - 实体框架中的模型优先方法不会在 SQL Azure 上创建聚集索引

> ID：15599525
> 
> 赞同：0
> 
> 时间：2013-03-24T14:15:54.317
> 
> 标签：entity-framework, entity-framework-5, azure-sql-database

我尝试使用实体框架插入 n:n（基于 SQL Azure）相关表（'UserSet' 和 'TenantSet'），但失败并出现错误：“不支持没有聚集索引的表sql server 版本”。

我使用模型优先的方法来生成 SQL 数据库，并且我看到在 SQL 脚本中，用于存储 n:n 关系的表“UserTenant”创建了一个导致问题的 NONCLUSTERED 索引。

当然，我可以通过修改脚本来手动纠正这个问题（如此[处](http://www.cloud-developer.eu/blog/2013/03/24/tables-without-a-clustered-index-are-not-supported-in-this-version-of-sql-server/)所述，但是一旦我重新生成数据库，这个纠正就会丢失。

有谁知道如何永久纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T09:55:12.010

Entity Framework 和 Azure 似乎存在错误。

查看[此](https://stackoverflow.com/questions/15248037/error-deploying-to-sql-azure-using-ef-6-alpha3-code-first-and-migrations-creatin/15282861#15282861)StackOverflow-answer 以了解解决方法。

基本上你必须：

**1) 创建自定义迁移 SQL 生成器**

**2) 在迁移配置中注册自定义生成器**

# java - JFrame 不从单独的类更新图形

> ID：15599527
> 
> 赞同：2
> 
> 时间：2013-03-24T14:16:02.830
> 
> 标签：java, swing, graphics, jframe

我遇到了一个我无法解决的奇怪问题。我有两个类一个 JFrame 类：

```
public class TowerDefenceFrame extends JFrame {

public TowerDefenceFrame() {
    super("Tower Defence");
    setSize(1023, 708);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    //setResizable(false);
}

public static void main(String[] args) {

    TowerDefenceFrame tdf = new TowerDefenceFrame();
    tdf.setVisible(true);
    Map.main(args);
  }
} 
```

和一个图形类：

```
public class Board extends JPanel implements ActionListener {
BufferedImage road;
BufferedImage grass;
Timer time;

public Board() {
    setFocusable(true);
    time = new Timer(5, this);
    time.start();

    try {
        road = ImageIO.read(new File("../road.png"));
        grass = ImageIO.read(new File("../grass.png"));
    } catch (IOException ex) {
        Logger.getLogger(Board.class.getName()).log(Level.SEVERE, null, ex);
    }

}

public void actionPerformed(ActionEvent e) {
    repaint();

}

public void paint(Graphics g) {
     super.paint(g);

        for (int i = 0; i <= Map.mapWidth - 1; i++) {
            for (int l = 0; l <= Map.mapHeight - 1; l++) {

            if (Map.mapArray[l][i] == 1) {
                g.drawImage(road, (Map.blockSize * i), (Map.blockSize * l), this);

            } else if (Map.mapArray[l][i] == 0) {
                g.drawImage(grass,(Map.blockSize * i), (Map.blockSize * l), this);
            } 

        }

    }
         repaint();

   }
} 
```

当我运行应用程序时，会出现 JFrame，但是 Board 类中的图形不会出现。我一直在寻找这个问题的答案，但找不到。我注意到，当我调整 JFrame 的大小时，出现了来自 board 类的图像。这让我相信我必须更新 board 类才能获得图形。我尝试在我的 JFrame 类中添加一个计时器循环，以每 1/2 秒添加一次 Board 类。它没有用。我被这个问题困扰了一段时间，我想知道你们中的任何人是否可以帮忙，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:29:03.507

`J`以`JApplet`and `JFrame`are`Swing`和`Applet`and `Frame`are等开头的类`AWT`。该方法`paint()`与`AWT`类一起使用，但您正在使用`JPanel`s 和`JFrame`s。

此外，因为您调用`super`了您的`paint()`方法（您将更改为`paintComponent`），所以您必须`@Override`让它正常工作。

# java - 为依赖于 OS X 上的 SWT 事件循环的应用程序编写非 GUI JUnit 测试用例？

> ID：15599534
> 
> 赞同：3
> 
> 时间：2013-03-24T14:16:44.693
> 
> 标签：java, macos, unit-testing, junit, swt

我正在 OS X 上开发基于 SWT 的应用程序，我想在一些需要 SWT 事件循环但不一定存在的实用程序代码上编写一些 JUnit 测试用例（*不是*自动化 GUI 测试）图形用户界面。我遇到了很多问题。

作为一些故障代码的精简示例：我有一个基于以下模式的小型重复 SWT 计时器实用程序：

```
public class RepeatingSWTTimer
{
    private boolean isRunning = false;
    private RepeatingSWTTimerAction timerAction;
    private int delay;

    private Runnable timerRunnable = new Runnable()
    {
        @Override
        public void run()
        {
            timerAction.fire();
            if(isRunning)
            {
                Display.getCurrent().timerExec(delay, this);
            }
        }
    };

    public void start()
    {
        isRunning = true;
        Display.getCurrent().timerExec(delay, timerRunnable);
    }
} 
```

代码工作得很好，实际的类不仅仅是一种方法，而且我在我的应用程序的很多地方都使用它而没有问题。但我仍然想用一个测试用例来覆盖它。

我遇到的主要问题是：

1.  如果没有 Display 实例化（例如在调用`Display.getDefault()`in 中`@BeforeClass`），那么`Display.getCurrent()`将返回一个 Null 指针。

2.  如果有一个 Display 实例化但没有样板循环代码（`while(!shell.isDisposed())...`等），那么事件循环似乎不会被底层的本机系统抽出。

3.  如果我在 中打开一个简单的 shell `@BeforeClass`，它会阻止 JUnit 测试用例。在我关闭 shell 之前它们不会运行，这让我回到了原来的问题。我假设这是由于`-XstartOnFirstThread`OS X 的要求。

我知道有类似使用 SWT`SWTBot`进行自动化*GUI*测试的工具，但我只需要一些简单的 JUnit 案例来涵盖我的非 GUI 实用程序代码。

有没有人经历过这样的事情？

# java - 单例方法是否适合访问/维护数据库和互联网连接

> ID：15599538
> 
> 赞同：1
> 
> 时间：2013-03-24T14:17:00.340
> 
> 标签：java, design-patterns, static, singleton

**所以，我正在开发一个需要本地数据库连接并使用一些 Web 服务来回发送和接收数据的应用程序。**

*   每当我需要和数据库操作时，我都会创建我的 `DbConnection`类的一个对象*（这是我用来获取我的数据库的类的名称）*并对其执行操作。

*   同样，为了连接互联网，我使用`DefaultHttpClient`并创建一个`static`相同的对象，并且每当需要连接并调用**Web**服务时，我都会创建`HttpResponse`对象并获取响应数据。

**1）我是否使用了正确的方法或模式？**

**2）还有一件事专注于第2点，静态和单例的工作方式是否相同？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:24:58.230

> 我是否使用了正确的方法或模式？

我不这么认为。如果您使用单例（或静态）进行*连接*，那么如果您的代码需要在可能需要多个连接的上下文中使用/重用，那么您会很困难；例如，如果你让你的应用程序多线程，或者把它变成一个库。

单例在可测试性方面也存在问题......

一般来说，你可以用单例（或静态）做任何事情，你也可以用某种上下文参数来做。依赖注入 (DI) 框架提供了一种简洁的方法来创建共享对象并将它们“连接”到需要它们的其他对象中……而不使用单例或静态。或者，您可以通过多种方式手动完成。

> 静态和单例的工作方式相同吗？

单例是一种设计模式。静态是可用于实现单例模式的 Java 语言特性。所以它们不是同一种东西（甚至不是同*一种东西*），但它们是相关的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:46:05.520

没有单身人士总是不好的。避免使用它们，除非你被迫使用它们（因为一些愚蠢的框架没有给你其他选择）

*   他们没有意义，全局变量是什么意思？如果你有多个类加载器怎么办？如果你两次运行同一个程序会怎样？
*   它们导致隐藏的时间耦合。单例 A 必须在单例 B 之前初始化，但不能在单例 C 或单例 D 之前初始化。大多数人甚至不知道如何在 Java 中控制单例的初始化时间。（基本上你必须触摸一个静态字段以确保它已初始化，但不要太早触摸它，否则你会破坏顺序！）
*   如果您处于安全环境（例如 securitymanager）或安全语言（例如 E）中，它们会导致安全漏洞。
*   很难让它们在多线程代码中工作。很难，世界上只有几千人知道如何用像 Java 这样的语言“正确”地做到这一点，这仍然需要模块间分析才能正确，除非你简单地编码一些模仿演员模型的东西，这打败了java并发的目的
*   Java 语言规范 (gilad bracha) 的合著者甚至说单例是可怕的，并在没有它们的情况下创造了一种新语言 (newspeak)

要么传递一些对象，要么面临上述问题以及我可能忘记提及的更多问题。为什么在 2013 年仍然存在这样的世俗问题，我无法理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:25:36.483

哇。你的问题比你想象的要多得多，但是为了给你一个简短的答案，我见过的大多数项目（不使用 ORM，你可能想要研究的东西）都会有一个包装类围绕调用所有适当查询的 DB 对象，处理转义 &c。它将实现一个公共接口，以便它可以由工厂类提供给期望匹配接口的东西。

至于单例/静态，那真的取决于你的需要。在我上面提到的模式中，Singleton 要好得多：这意味着访问数据库的每个对象都能够存储对 db 对象的本地引用。这也意味着您可以将获取 Singleton 的过程封装在父类中。使用静态类不会为您提供该选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:27:31.197

回答第 1 点 - 是的，单例是正确的方法。理想情况下，您必须只建立与数据库的单一连接。Sinleton 将帮助您实现这一目标。

回答第 2 点 - 没有静态不一定与单例相同。如果我们以单例模式多次调用创建对象，它返回相同的对象。但是如果多次调用create object，则可以多次创建静态对象。

但是您可以确保静态对象只创建一次，这将与单例模式相同。

# nginx - 如何在 nginx 中阻止特定的人类用户代理

> ID：15599544
> 
> 赞同：0
> 
> 时间：2013-03-24T14:17:23.527
> 
> 标签：nginx

我最近在垃圾邮件和机器人注册方面遇到了一些问题，所有这些反验证系统似乎都不起作用。

我分析了我的访问日志，发现用户代理没有被人类使用，可能是因为它们很旧......但也注意到有一些 HEAD / GET / POST / 攻击也进入了 Web 服务器以及使用用户代理上完全相同的字符串。可能引导程序使用与垃圾邮件/添加机器人相同的用户代理。

> 216.151.139.172 - - [24/Mar/2013:00:58:20 +0000] "GET /index.php?action=verificationcode;vid=register;rand=12c64196f4558b2dff00db7ed3ee8ad9 HTTP/1.1" 200 2189 "index.php?action =register" "Mozilla/4.0（兼容；MSIE 7.0；Windows NT 5.1；Trident/4.0；.NET CLR 1.1.4322）""-"

在不阻止所有用户代理的 nginx 中，无论如何只阻止用户代理中包含的这个字符串，这样这些机器人就可以停止注册和广告。

> “Mozilla/4.0（兼容；MSIE 7.0；Windows NT 5.1；Trident/4.0；.NET CLR 1.1.4322）”

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:09:32.030

你可以试试这个

```
if ($http_user_agent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; .NET CLR 1.1.4322)") {
  return 444; # 444 is a special nginx status code that's useful in fighting attack
} 
```

但是该用户代理字符串是有效的，这意味着您也可以阻止一些合法访问。

我建议你尝试基于 ip 的访问控制。请参阅[http://wiki.nginx.org/HttpAccessModule](http://wiki.nginx.org/HttpAccessModule)进行设置。在我看来这更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T12:18:59.743

```
if ($http_user_agent ~* (Windows 95|Windows 98|wget|curl|libwww-perl) ) {
return 403;
} 
```

有关此检查的更多信息，请访问以下链接 [https://www.nxtcloud.io/block-unwanted-user-agent-traffic-on-nginx/](https://www.nxtcloud.io/block-unwanted-user-agent-traffic-on-nginx/)

# vim - VIM 的 SASS 支持？

> ID：15599545
> 
> 赞同：1
> 
> 时间：2013-03-24T14:17:24.230
> 
> 标签：vim, sass

我喜欢在我的 vim 编辑器中添加 SASS 支持，是否有任何值得注意的插件或 vimrc 配置可以提供帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T14:53:14.923

Have you tried [vim-haml](https://github.com/tpope/vim-haml)? This provides Vim runtime files for Haml, Sass, and SCSS.

# objective-c - 谁能指出在 ddmathparser 中添加新函数的教程？

> ID：15599546
> 
> 赞同：1
> 
> 时间：2013-03-24T14:17:27.830
> 
> 标签：objective-c, ddmathparser

我是编程新手。我想在`ddmathparser`. 我唯一能找到的是`ddmathparser`wiki 页面[https://github.com/davedelong/DDMathParser/wiki/Adding-New-Functions](https://github.com/davedelong/DDMathParser/wiki/Adding-New-Functions)上的简短教程。但是，我看不懂，因为它太短了，看了几遍，我还是不明白它在做什么。那么任何人都可以详细说明添加新功能的步骤或给我一些更详细的教程吗？我真的做了我的研究，但我找不到一个。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:43:40.087

DDMathParser 作者在这里。

添加`multiply by two`函数的方法如下：

```
DDMathEvaluator *evaluator = [DDMathEvaluator sharedMathEvaluator];
// a function takes arguments, variable values, the evaluator, and an error pointer
// and returns a new expression
[evaluator registerFunction:^DDExpression *(NSArray *args, NSDictionary *vars, DDMathEvaluator *eval, NSError *__autoreleasing *error) {
    DDExpression *final = nil;

    // multiplyBy2() can only handle a single argument
    if ([args count] == 1) {
        // get the argument and simply wrap it in a "multiply()" function
        DDExpression *argExpression = [args objectAtIndex:0];
        DDExpression *twoExpression = [DDExpression numberExpressionWithNumber:@2];
        final = [DDExpression functionExpressionWithFunction:DDOperatorMultiply arguments:@[argExpression, twoExpression] error:nil];
    } else if (error) {
        // there wasn't only one argument
        NSString *description = [NSString stringWithFormat:@"multiplyBy2() requires 1 argument.  %ld were given", [args count]];
        *error = [NSError errorWithDomain:DDMathParserErrorDomain code:DDErrorCodeInvalidNumberOfArguments userInfo:@{NSLocalizedDescriptionKey: description}];
    }
    return final;

} forName:@"multiplyBy2"]; 
```

现在你可以这样做：

```
NSNumber *result = [@"multiplyBy2(21)" stringByEvaluatingString]; 
```

然后回来`@42`。

* * *

这里发生了什么：

在内部，`DDMathEvaluator`基本上有一个很大的`NSDictionary`地方，它保存了它所知道的所有函数的列表，键入了该函数的名称，有点像这样：

```
_functions = @{
  @"multiply" : multiplyFunctionBlock,
  @"add" : addFunctionBlock,
  ...
}; 
```

（显然它比这要复杂一些，但这是基本思想）

当评估器评估一个字符串并遇到一个函数时，它会在这个字典中查找该函数的块是什么。它检索块，然后使用字符串中的参数（如果有的话）执行块。块的结果是函数的结果。

该结果被替换回来，并继续评估。

# c# - 检查是否列表 > 包含一个字符串

> ID：15599550
> 
> 赞同：3
> 
> 时间：2013-03-24T14:18:11.403
> 
> 标签：c#, string, linq, list, contains

如何检查 a 中的任何`List<string>`s是否`List`包含给定的字符串？我知道如何用循环来做到这一点，但是有没有办法用 LINQ/in 一行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T14:19:09.393

```
if (lists.Any(sublist => sublist.Contains(str))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:23:18.660

```
var t=lists.SelectMany(f=>f).Contains("str"); 
```

完整样本：

```
var lists = new List<List<string>>();

lists.Add(new List<string>(){"a","b"});
lists.Add(new List<string>(){"b","2"});
lists.Add(new List<string>(){"c","5"});
lists.Add(new List<string>(){"d","7"});

var t=lists.SelectMany(f=>f);

t.Dump(); 
```

![在此处输入图像描述](../Images/3fbc86c7a2cd8dfbcc9e6eb8c481ea52.png)

```
if (t.Contains("k")) 
  Console.WriteLine ("yes") ;
else 
  Console.WriteLine ("no"); 
```

结果

```
no 
```

ps

当然 - 这可以缩短为：

```
if (lists.SelectMany(f=>f).Contains("k"))... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:22:04.107

你可以这样做：

```
bool ifExists = list.Any(x => x.Contains(yourString)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:23:41.673

只是为了添加到现有答案，鉴于您的列表已排序且很大，可能会比或`BinarySearch`更快。`Contains``Any`

# ruby - 在 ruby 中调试 gem

> ID：15599552
> 
> 赞同：1
> 
> 时间：2013-03-24T14:18:22.747
> 
> 标签：ruby, debugging, rubygems, pry

我有一个 gem，nanoc，我想调试它。

它的命令行，`nanoc`执行以下脚本（在 /.rvm/gems/ruby-1.9.2-p290/bin 中）

```
#!/usr/bin/env ruby
#
# This file was generated by RubyGems.
#
# The application 'nanoc' is installed as part of a gem, and
# this file is here to facilitate running it.
#

require 'rubygems'

version = ">= 0"

if ARGV.first
  str = ARGV.first
  str = str.dup.force_encoding("BINARY") if str.respond_to? :force_encoding
  if str =~ /\A_(.*)_\z/
    version = $1
    ARGV.shift
  end
end

gem 'nanoc', version
load Gem.bin_path('nanoc', 'nanoc', version) 
```

它本身在最后一行加载解析为 (/.rvm/gems/ruby-1.9.2-p290/gems/nanoc-3.6.2/bin)

```
#!/usr/bin/env ruby
# encoding: utf-8

# Try loading bundler if it's possible
begin
  require 'bundler/setup'
rescue LoadError
  # no problem
end

# Add lib to load path
$LOAD_PATH.unshift(File.expand_path(File.dirname(__FILE__) + '/../lib'))

# Load nanoc
require 'nanoc'
require 'nanoc/cli'

# Run base
Nanoc::CLI.run(ARGV) 
```

调试这类脚本的侵入性最小的选项是什么？如果我只是撬第一个文件，ARGV 将是文件名本身..

我是否必须修改文件才能运行调试器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:02:13.170

老实说，我不确定我是否理解这个问题。你可以把你的撬动放在 nanoc 的库中。

或者，您可以只 fork git repo，然后克隆它并使用它的包运行 gem 并以这种方式进行调试：

`https://github.com/nanoc/nanoc`

克隆 repo，添加调试代码，然后`bundle exec bin/nanoc`以保持本地安装副本干净的方式运行。一旦你弄清楚出了什么问题，你就可以构建一个新的 gem，安装它，提交代码，然后提出一个 pull request 来为每个人修复它。

# java - 将 Jtable 值更新为 MySql 表

> ID：15599556
> 
> 赞同：1
> 
> 时间：2013-03-24T14:18:38.233
> 
> 标签：java, mysql, swing, jtable, netbeans-7

我想通过使用 jtable 数据来更新 MySql。我在 mysql 中有 6 列（期间、周一、周二、周三、周四、周五）。在 jtable 中，我有与 mysql 中相同的表。在 mysql 中，我已经给出了句点值（1、2、3、4）。

```
Connection con = Driver.connect();
 for (int i = 0; i < 4; i++) {
   for(int j=1;j<=4;j++){
     Handler.setData(con, "update sem1 set mon='"+jTable1.getValueAt(i, 1)+"' where
     periods='"+j+"'" );
     Handler.setData(con, "update sem1 set tue='"+jTable1.getValueAt(i, 2)+"' where
     periods='"+j+"'" );
     Handler.setData(con, "update sem1 set wed='"+jTable1.getValueAt(i, 3)+"' where
     periods='"+j+"'" );
     Handler.setData(con, "update sem1 set thu='"+jTable1.getValueAt(i, 4)+"' where
     periods='"+j+"'" );
     Handler.setData(con, "update sem1 set Fri='"+jTable1.getValueAt(i, 5)+"' where
     periods='"+j+"'" );
     }
   } 
```

![这是 jTable](../Images/92c7f395603eddb72a611708d10bb8eb.png)

![这是MySql表，应该和jTable一样](../Images/830dc6292e30d0f555bf6c89c8d33ff8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:59:45.530

*   请阅读[有关 JTable 的 Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，

*   数据库中的表具有与 Swing 中的 JTable 类似的结构，

*   （之前不知道代码） ResultSet 中的每个循环只返回一行，其顺序与 SQL Query 中定义的顺序相同，

*   创建数组从数据库行填充数据并将此数组作为[新行添加到 XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

*   搜索`ResultSetTableModel`或`TableFromDatabase`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T05:44:05.707

此代码应适用于所有表（无论 jTable 有多少行或列）。只需将 'TableName' 替换为您希望在 mysql 中更新的表。

这里的“否”是表的主键。

```
DefaultTableModel dtm01 = (DefaultTableModel) jTable1.getModel();

        String sd0 = null;
        for (int i = 1; i < dtm01.getColumnCount(); i++) {

            //  System.out.println(dtm01.getColumnName(1));
            for (int j = 0; j < dtm01.getRowCount(); j++) {
                try {
                    sd0 = dtm01.getValueAt(j, i).toString();

                    String sql = "update TableName set "+dtm01.getColumnName(i)+"='"+sd0+"' where No='"+dtm01.getValueAt(j, 0).toString()+"'";

                    pst=con.prepareStatement(sql);
                    pst.execute();
                    System.out.println(sql);
                } catch (SQLException ex) {
                    // Logger.getLogger(Database.class.getName()).log(Level.SEVERE, null, ex);
                }

            }

        } 
```

# string - 如何使用处理语言删除字符串中的新行？

> ID：15599558
> 
> 赞同：0
> 
> 时间：2013-03-24T14:18:48.750
> 
> 标签：string, text, newline, processing

是否可以从处理中的字符串中删除换行符 ('\n') 字符。

例如

```
'hello,
how are you,
that's nice.' 
```

变成

```
'hello, how are you, that's nice' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:13:00.233

由于它基于 Java，您可以使用[String API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)中的所有方法。例如：

```
String s = "hello,\nhow are you,\nthat's nice.";
s = s.replace('\n', ' ');
println(s); 
```

# java - 奇怪的 Java 数学执行

> ID：15599560
> 
> 赞同：2
> 
> 时间：2013-03-24T14:18:50.533
> 
> 标签：java, math

我有一个奇怪的问题。我正在尝试将方程的结果存储到双变量中。

```
double s = (((100 + 1)*(1/3))/100 + (1/3)); 
```

这将返回一个值 0 而不是 0.67（从计算器计算出的正确值）。为什么会发生这种情况？

注意：说我可以让 s = .67 的解决方案不是解决方案，

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T14:19:30.243

以下使用整数（即截断）除法，其结果为零：

```
1/3 
```

要获得浮点除法，请将任一参数转换为双精度，例如

```
1.0/3 
```

因此，整体表达式变为：

```
double s = (((100 + 1)*(1./3))/100 + (1./3)); 
```

`1.`是一样的`1.0`。表示与 a 相同的数字的其他方式`double`是`1d`和`1D`。

上面的表达式计算为`0.6699999999999999`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:22:33.267

编译器将您的数字视为 int 的..

试试这样：

```
double s = (((100d + 1d)*(1d/3d))/100d + (1d/3d)); 
```

现在结果将是：

0.6699999999999999

# mobile - 给定一个坐标列表，在单点半径内找到所有坐标

> ID：15599562
> 
> 赞同：0
> 
> 时间：2013-03-24T14:19:09.263
> 
> 标签：mobile, gis

我试图找出列出指定中心点（当前位置）一定半径内所有兴趣点的最佳方法。

我的应用程序当前从我们相关的 web api 中检索所有位置。

哪个最好，创建一个 api 调用以返回附近的位置或在我的应用程序中计算该信息？

我担心的是，如果将来点列表变得非常大，移动设备可能会被这种计算所淹没。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:25:01.840

如果您询问其背后的数学，您的计算方式如下：

1-假设中心节点坐标为 (N_x,N_y)

2-假设每个兴趣点，例如*i*具有 (i_x,i_y) 的坐标

中心点与兴趣点之间的距离为产量：

d = sqrt((N_x-i_x)^2+(N_y-i_y)^2))

你会列出那些 d < r

其中 r 是半径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:54:24.730

由于您正在查看移动场景，我建议您在 Web 服务端进行。与查找附近点的计算时间相比，带宽将是一个更大的瓶颈，因此在大多数情况下减少传输的点数会更好。

# java - 只有静态方法的类的依赖注入？

> ID：15599564
> 
> 赞同：5
> 
> 时间：2013-03-24T14:19:11.310
> 
> 标签：java, design-patterns, dependency-injection

我有一组 API 类，它们只包含静态方法和一个私有构造函数，因此它们不能被实例化。但是，我希望第三方开发人员能够修改 API 的行为以满足他们的需求。

* * *

这是我到目前为止的解决方案（通过静态设置方法进行依赖注入）。这是开发人员将使用的公共 API 类。如您所见，它依赖于`StaticApiImpl`.

```
public class StaticApi {
    private static StaticApiImpl impl = new StaticApiImpl();

    private StaticApi() {}

    public static void setImpl(StaticApiImpl impl) {
        StaticApi.impl = impl;
    }

    public static void doThing() {
        impl.doThing();
    }
} 
```

这是我自己编写的默认 API 实现。

```
public class StaticApiImpl {
    public void doThing() {
        System.out.println("Do thing the default way.");
    }
} 
```

这是第三方可能编写的默认实现的假设扩展版本：

```
public class MyCustomStaticApiImpl extends StaticApiImpl {
    @Override
    public void doThing() {
        System.out.println("Do thing differently.");
    }
} 
```

然后，开发人员只需在初始化插件时通过 setter 方法注入他们的依赖项：

```
public void onLoad() throws Exception {
    StaticApi.setImpl(new MyCustomStaticApiImpl());
} 
```

我的问题是：这是正确的做法吗？是否有一些专门用于我没有听说过的案例的设计模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:45:24.210

您在此处设置的是一种工厂模式，客户端能够配置工厂返回的实现。这很好，但是您需要做一些不同的事情。

1.  重命名`StaticApi`为`StaticApiFactory`. 这将使其角色更加清晰，并避免与下一部分发生命名冲突。
2.  删除`public static void doSomething()`方法。无需将所有 API 方法重新定义为静态方法。由于这是一个工厂类，因此您需要的只是一个获取当前实现的`public static StaticApi getInstance()`方法，例如，一个返回已通过 设置的实现的方法`setImpl()`。
3.  创建一个`StaticApi`定义 API 行为契约的接口。然后，工厂类应该允许客户`setImpl(StaticApi)`.
4.  现在任何需要使用 StaticApi 的人都可以通过`StaticApiFactory.getInstance()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T14:27:46.403

对于您的 3rd 方开发人员来说，最好的解决方案是使用该`Proxy`模式。

[http://en.wikipedia.org/wiki/Proxy_pattern](http://en.wikipedia.org/wiki/Proxy_pattern)

将实现对象设置为实例并不是很好的解决方案。

# python - 您如何使用 msvcrt.getch 提取和使用输入？

> ID：15599565
> 
> 赞同：1
> 
> 时间：2013-03-24T14:19:18.307
> 
> 标签：python, python-3.x

我需要在 python 中创建一个程序/游戏，用户可以在其中快速输入 2 个键，例如 z 或 x 键，这使得他们的角色每次按正确的顺序向前移动。我做了很多研究并决定我应该使用 msvcrt.getch() 来接收输入，但是每当我尝试它时，它都会将输入存储为我无法使用的字节，我对编程比较陌生并且可以使用一些帮助来解释该功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T14:22:32.277

您需要将返回的值*解码*为`str`对象：

```
msvcrt.getch().decode('ASCII') 
```

例如，会将字节解释为 ASCII 代码点。您可能需要根据键盘布局和语言环境使用不同的编码，但`msvcrt.getch()`根据文档，API 仅专门处理 ASCII 字符：

> 该模块实现了控制台 I/O api 的普通和宽字符变体。普通 API 仅处理 ASCII 字符，对国际化应用程序的用途有限。应尽可能使用宽字符 API。

您可能想改用[`msvcrt.getwch()`](http://docs.python.org/3/library/msvcrt.html#msvcrt.getwch)直接获取 Unicode 值；该方法不仅支持 ASCII 代码点。

# c# - C# 通过 LINQ 解析 XML 以创建自定义对象

> ID：15599579
> 
> 赞同：0
> 
> 时间：2013-03-24T14:20:41.360
> 
> 标签：c#, xml, linq

我知道关于这个主题有很多问题，但我尝试过的例子都没有对我有用。

我有一个现有的 XML 文档，其构造如下：

```
<root>
    <ElementA>
        <element1>sometext</element1>
        <element2>sometext</element2>
        <element3>sometext</element3>
    </ElementA>

    <ElementA>
        <element1>sometext</element1>
        <element2>sometext</element2>
        <element3>sometext</element3>
    </ElementA>

    <ElementB>
        <element1>sometext</element1>
        <element2>sometext</element2>
        <element3>sometext</element3>
        <element4>sometext</element4>
        <element5>sometext</element5>
    </ElementB>

    <ElementB>
        <element1>sometext</element1>
        <element2>sometext</element2>
        <element3>sometext</element3>
        <element4>sometext</element4>
        <element5>sometext</element5>
    </ElementB>

    <ElementC>
        <element1>sometext</element1>
        <element2>sometext</element3>
    </ElementC>

    <ElementC>
        <element1>sometext</element1>
        <element2>sometext</element2>
    </ElementC>
</root> 
```

我需要找到所有 ElementA、B 和 Cs，并创建一个 objA 等类型的新对象，其属性对应于各个元素的子元素。下面是我尝试过的示例代码。

```
var doc = XElement.Load(filename);
var data = from ele in doc.Elements()
           where ele.Name.LocalName.Equals("ElementA")
           select new objA
           {
                name = ele.Element("element1").Value
                address = ele.Element("element2").Value
           }; 
```

但是，当我尝试遍历“数据”集合时，这会引发空异常错误。我不明白什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:25:38.763

您可以使用以下方法按名称获取元素`Elements("tagName")`：

```
var data = from ele in doc.Elements("ElementA")
           select new objA
           {
               name = (string)ele.Element("element1"),
               address = (string)ele.Element("element2")
           }; 
```

您还应该使用`(string)XElementInstance`而不是`XElementInstance.Value`，以避免`NullReferenceException`XML 中不存在元素。

上面粘贴的代码为您的示例输入数据返回 2 个元素。

# vb.net - 为什么我不能以这种方式设置表单位置属性？

> ID：15599580
> 
> 赞同：1
> 
> 时间：2013-03-24T14:20:45.487
> 
> 标签：vb.net, winforms, visual-studio-2010, windows-7

我的申请有两种形式。我想将一个表格放在另一个表格前面。我想了解为什么这段代码不起作用：

```
Public Class Form1
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.Location = New Point(200, 200)
    Form2.Location = New Point(200, 200)
    Form2.BringToFront()
End Sub
Private Sub Form1_Shown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shown
    Form2.Visible = True
    Me.Text = Form2.Location.X
End Sub
End Class 
```

当我运行代码时，第二个表单位于屏幕上的随机位置。
如果我删除*Form2.Visible*语句：

```
Public Class Form1
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.Location = New Point(200, 200)
    Form2.Location = New Point(200, 200)
    Form2.BringToFront()
End Sub
Private Sub Form1_Shown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shown
    Me.Text = Form2.Location.X
End Sub
End Class 
```

第二种形式似乎定位正确，但是，它是不可见的。

我敢肯定，有解决方法。我只是想了解为什么这么简单的事情不能按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T14:49:04.473

正如 Hans 在评论中提到的，您需要将[Form.StartPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.startposition%28v=vs.110%29.aspx)设置为[FormStartPosition.Manual](http://msdn.microsoft.com/en-us/library/system.windows.forms.formstartposition%28v=vs.110%29.aspx)以便表单读取您设置的位置。有关如何以及为什么采用这种方式的更多信息，请参阅[StackOverflow.com 上的这个问题](https://stackoverflow.com/questions/225741/how-do-you-set-the-startposition-of-a-windows-forms-form-using-code)。

# c# - 如何在后面的代码中恢复列表框中的文本块值？

> ID：15599581
> 
> 赞同：-1
> 
> 时间：2013-03-24T14:20:55.667
> 
> 标签：c#, .net, windows-phone-8

我会`ItemId`在后面的代码中恢复我的文本块中的值

```
<phone:PanoramaItem Header="Available">
            <Grid>
                <ListBox x:Name="ItemsCheckedinList" HorizontalAlignment="Left">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <Button x:Name="ButtonItemCheckedin" 
                Click="Button_ItemDetail" BorderBrush="{x:Null}" Width="200" 
                Height="200" Padding="0" Margin="0">
                                    <Button.Background>
                                        <ImageBrush ImageSource="{Binding Path=Image}" 
                Stretch="UniformToFill"/>
                                    </Button.Background>
                                    <StackPanel Orientation="Vertical" 
                Background="#FF0081C6" VerticalAlignment="Bottom" >
                                        <TextBlock Text="{Binding Path=Id}" 
                x:Name="ItemId" Visibility="Collapsed"/>
                                        <TextBlock Text="{Binding Path=Name}"/>
                                        <TextBlock Text="{Binding Path=Status}"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </phone:PanoramaItem> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:15:29.950

您真正想要做的可能是从id 最初来自的*模型中获取值。*假设列表中包含的类是命名的`Item`，也许是这样的？

```
 private void Button_ItemDetail(object sender, RoutedEventArgs e)
        var fe = (FrameworkElement)sender;
        var item = (Item)fe.DataContext;
        var id = item.Id; // <-------------- id is in the variable id
    } 
```

您也可以像这样实现它：

```
 private void Button_ItemDetail(object sender, RoutedEventArgs e)
    {
        Button b = (Button)sender;
        var tb = (TextBlock)b.FindName("IdTextBox");
        var id = tb.Text; // <-------------- id is in the variable id
    } 
```

# c# - Treeview 与展开和折叠按钮一起使用

> ID：15599582
> 
> 赞同：1
> 
> 时间：2013-03-24T14:21:06.863
> 
> 标签：c#, winforms

我正在尝试将 Treeview 导出为具有展开和折叠功能的 excel。也许有开源项目可以完成这项任务，或者我需要使用 excel API 开发一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:50:21.923

您可以使用 epplus 并使用 excel 分组功能，使用示例如下所示：

[http://epplus.codeplex.com/discussions/263201](http://epplus.codeplex.com/discussions/263201)

另一种可能性是使用 excel 对象模型，您可以逐行插入树，然后通过例如添加分组

```
Rows("1:70").Group 
```

# c# - 显示控件时的问题

> ID：15599585
> 
> 赞同：0
> 
> 时间：2013-03-24T14:21:19.960
> 
> 标签：c#, .net, wpf, xaml, data-binding

我正在尝试将标签存储在带有类别的 ComboBox 中 - 像[这样](http://www.jarloo.com/wp-content/uploads/2012/06/grouppedCombo.png)。

但是，ComboBox 项目看起来像这样：

![在此处输入图像描述](../Images/8a4bf1c313bee24b7cfb62527334abc5.png)

这是我到目前为止所做的：

**应用程序.XAML**

```
<DataTemplate x:Key="groupStyle">
    <Label FontWeight="Bold" Content="{Binding Name}"/>
</DataTemplate> 
```

**代码背后**

```
 ComboBox comboBox1 = new ComboBox();

    GroupStyle style = new GroupStyle();
    style.HeaderTemplate = (DataTemplate)this.FindResource("groupStyle");
    comboBox1.GroupStyle.Add(style);
    comboBox1.DisplayMemberPath = "Item";
    ObservableCollection<CategoryItem<Label>> items = new ObservableCollection<CategoryItem<string>>();

    Label label = new Label();
    TextBlock block = new TextBlock();
    block.Text = "Text";
    label.Content = block;

    items.Add(new CategoryItem<Label> { Category = "Category", Item = label });

    CollectionViewSource cvs = new CollectionViewSource();
    cvs.GroupDescriptions.Add(new PropertyGroupDescription("Category"));
    cvs.Source = items;

    Binding b = new Binding();
    b.Source = cvs;
    BindingOperations.SetBinding(comboBox1, ComboBox.ItemsSourceProperty, b);

public class CategoryItem<T>
{
    public T Item { get; set; }
    public string Category { get; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:27:02.613

你应该使用`ItemContainerStyle`. 但是你可以看看[这个](https://stackoverflow.com/questions/13773048/wpf-combobox-how-to-you-utilise-a-generic-itemcontainerstyle-with-binding)

**应用程序.Xaml**

```
<DataTemplate x:Key="groupStyle">
    <TextBlock FontWeight="Bold" Text="{Binding Name}"/>
</DataTemplate>
<Style TargetType="{x:Type ComboBoxItem}"  x:Key="comboBoxItemStyle">
    <Setter Property="Template" >
        <Setter.Value>
            <ControlTemplate>
                <Label Background="Red" Content="{Binding Item}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**后面的代码：**

```
 ComboBox comboBox1 = new ComboBox();

 GroupStyle style = new GroupStyle();
 style.HeaderTemplate = (DataTemplate)this.FindResource("groupStyle");
 comboBox1.GroupStyle.Add(style);
 comboBox1.DisplayMemberPath = "Item";

 // Here is what you are looking for
 comboBox1.ItemContainerStyle = (Style)this.FindResource("comboBoxItemStyle");

 ObservableCollection<CategoryItem<string>> items = new ObservableCollection<CategoryItem<string>>();

 CollectionViewSource cvs = new CollectionViewSource();
 cvs.GroupDescriptions.Add(new PropertyGroupDescription("Category"));
 cvs.Source = items;

 Binding b = new Binding();
 b.Source = cvs;
 BindingOperations.SetBinding(
           comboBox1, ComboBox.ItemsSourceProperty, b); 
```

# forms - 如何根据用户选择的字段值修改 Symfony2 表单？

> ID：15599588
> 
> 赞同：4
> 
> 时间：2013-03-24T14:21:31.577
> 
> 标签：forms, symfony, event-listener

我有一个*博客类型，并且我希望仅当用户在**选择*字段中进行特定选择时才将某些字段添加到表单中。我听说过*EventListener*，但我认为没有可以订阅的 FormEvent ，因此侦听器实际上可以跟踪选择事件。

我怎样才能做到这一点？

这是我的*BlogType*：

```
namespace Blogger\BlogBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Blogger\BlogBundle\Form\EventListener\AddAuthorFieldSubscriber;

class BlogType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('title')
            ->add('blog')
            ->add('category', 'entity', array(
                'class' => 'BloggerBlogBundle:Category',
                'property' => 'name',
            )
            ->add('onlyifdefaultcategory')
        );
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Blogger\BlogBundle\Entity\Blog',
            'cascade_validation' => true,
        ));
    }

    public function getName()
    {
        return 'blogger_blogbundle_blogtype';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T14:58:06.247

当你说你必须使用事件监听器来实现这一点时，你是对的。Symfony 食谱中有一篇非常好的文章：[Here is the Cookbook](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#cookbook-form-events-submitted-data)。

您必须检查“根据基础数据自定义表单”部分。

如果您需要更多信息，请告诉我们，但我认为第一个示例正是您所需要的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T14:24:24.237

我认为它只能使用 JavaScript。您可以使用 JS 创建自定义*类型*并为该*类型*声明小部件，这使其成为可能。

对于构建形式，这里是监听器的示例。检查这个：[symfony手册](http://symfony.com/doc/2.1/cookbook/form/dynamic_form_modification.html)

# linux-kernel - 编译 Linux 内核错误 xt_CONNMARK.h

> ID：15599592
> 
> 赞同：8
> 
> 时间：2013-03-24T14:21:41.263
> 
> 标签：linux-kernel

出于非常特定的原因，我正在尝试使用内核中内置的几个模块来编译 Linux 2.6.32.6 内核。我在 NFS 上包含了根文件系统，试图通过 LAN PXE 引导我自己的自定义救援 Live-CD。在包含 ROOT_NFS 所需的依赖项和模块后，我尝试仅使用`make bzImage`. 当它运行时，我收到错误

```
make[4]: *** No rule to make target './linux-2.6.32.6/include/linux/netfilter/xt_CONNMARK.h', needed by './linux-2.6.32.6/usr/include/linux/netfilter/.install'. Stop. 
```

现在我尝试在配置中禁用 Netfilter 模块，并尝试找到任何需要 Netfilter 的依赖项，但此错误仍然不断发生。

任何解决此错误的建议都会很棒。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-11T18:58:14.240

这很可能是因为您从源代码树中**丢失了一些文件**，因为它们是通过不区分大小写的文件系统传输的。Linux 源代码树中有大约 15 个不同时期的不同文件，它们的名称相同，但大小写不同。对于构建 Linux 内核的人来说，这通常不是问题，因为所有合理的文件系统都是区分大小写的。

对于那些好奇的人，这种方式的文件都在 netfilter 树中 - 例如参见v3.0 中的`include/linux/netfilter/xt_CONNTRACK.h`vs `include/linux/netfilter/xt_conntrack.h`.。

因此，这些文件确实存在，但您丢失了它们。获取一个新的源代码树，在区分大小写的文件系统上解压缩它，您将不再有此错误。或者，如果您害怕丢失对树的修改，则从“原始”源树或[内核的 github 镜像](http://github.com/torvalds/linux)复制文件- 它们很可能不会从您正在编译的版本中更改。

# javascript - 如何加载王牌编辑器

> ID：15599597
> 
> 赞同：18
> 
> 时间：2013-03-24T14:22:03.633
> 
> 标签：javascript, html, cdn, code-editor

我正在尝试使用 Ace 代码编辑器库（[http://ace.ajax.org/](http://ace.ajax.org/)），但我遇到了麻烦。根据嵌入指南，这应该从亚马逊 CDN 加载所需的 js 文件。

```
<script src="http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script> 
```

但是它失败了，在 Chromes 控制台中它显示：

```
Could not load worker ace.js:1
DOMException {message: "SecurityError: DOM Exception 18", name: "SecurityError", code: 18, stack: "Error: An attempt was made to break through the se…cloudfront.net/src-min-noconflict/ace.js:1:76296)", INDEX_SIZE_ERR: 1…}
 ace.js:1 
```

我还尝试将 ace 库 src-min 文件夹放在本地并加载它

```
<script src="/js/ace/ace.js" type="text/javascript" charset="utf-8"></script> 
```

这也因错误而失败：

```
Uncaught RangeError: Maximum call stack size exceeded
GET http://mysite/mode-javascript.js 404 (Not Found) 123f2c9_ace_1.js:1
GET http://mysite/notes/theme-monokai.js 404 (Not Found) 123f2c9_ace_1.js:1
Uncaught RangeError: Maximum call stack size exceeded 
```

最后，我尝试加载 ace src-min 文件夹中的所有 js 资源，但也失败并出现错误：S

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T14:45:31.580

我无法在评论中粘贴所有代码，因此我将通过更新此代码开始回答您的问题。这对我来说很好：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>HTML</title>
    <style>
        #editor { 
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
            }
    </style>
</head>
<body>
    <div id="editor">
        function foo(items) {
            var x = "All this is syntax highlighted";
            return x;
        }
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/javascript");
    </script>
</body>
</html> 
```

你能在最后测试一下，看看你是否仍然遇到问题？如果这段代码（单数）没问题，可能是其他一些 JavaScript 影响了 ACE。

这是一个 JSfiddle：http: [//jsfiddle.net/yDscY/](http://jsfiddle.net/yDscY/)。我的开发检查器没有任何错误。

我发现了问题。如果你有 PHP 或者可以用 .htaccess 来做。您必须发送特定的标头以遵守 CORS（跨源资源共享）。

```
access-control-allow-origin: *
access-control-allow-credentials: true 
```

之后它应该工作。

***更新***

我没有彻底测试这部分，但它应该可以工作。

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Credentials: "true"
</IfModule> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T19:10:42.410

正确答案在第一条评论中：

> 试试这个 editor.getSession().setUseWorker(false); 看看它是否仍然失败。本地不起作用，因为它依赖于其他在线相关文件。这就是相对 GET 失败的原因。使用第一个在线链接我没有收到任何错误。也许其他东西正在中断您的javascript？你能展示你的 HTML/JS 文件的完整版本吗？

-**艾伦达尔**，3 月 24 日 14:25

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T07:52:01.797

我在尝试完成这项工作时遇到了麻烦。ACE 主页中给出的代码对我不起作用。我的所有文件都在本地目录中，但如果需要，您可以使用 CDN。

我将 ace 目录从`lib/ace`我的`static/`目录中。将该部分更改为您自己的位置。

我不得不使用 Require.js api 来加载 ace。这是对我有用的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>ACE in Action</title>
<style type="text/css" media="screen">
    #editor { 
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }
</style>
</head>
<body>

<div id="editor">
    function foo(items) {
    var x = "All this is syntax highlighted";
    return x;
    }
</div>
<script type="text/javascript" src="/static/require.js"></script>
<script>
    require.config({
        baseUrl: window.location.protocol + "//" + window.location.host
            + window.location.pathname.split("/").slice(0, -1).join("/"),

        paths: {
            ace: "/static/ace"
        }
    });

    require(["ace/ace"], function (ace) {
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/javascript");
    });
</script>
</body>
</html> 
```

来源：[https ://github.com/ajaxorg/ace/issues/1017](https://github.com/ajaxorg/ace/issues/1017)

如果您遇到一些疯狂的错误，请查看此页面：[http ://requirejs.org/docs/errors.html](http://requirejs.org/docs/errors.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T18:17:32.457

我知道这不会完全回答您的问题，但我正在为登陆此页面并遇到同样问题的人写这篇文章

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Credentials: "true"
</IfModule> 
```

或者

```
editor.getSession().setUseWorker(false); 
```

不工作。

我在 Chrome 上遇到了同样的问题。我在 Firefox 和 Opera 中测试了我的网站，它按预期工作。`Uncaught RangeError: Maximum call stack size exceeded`加载页面时我不断收到错误消息。

解决方案是清空 Chrome 的缓存，然后它又可以工作了。即使是`control/command + shift + r`or`control + F5`也行不通。我真的不得不进入设置并清空缓存。

同样，我知道这只是部分相关，但这适用于其他登陆此页面的人！

# c# - 我应该公开我的类的属性吗？

> ID：15599600
> 
> 赞同：0
> 
> 时间：2013-03-24T14:22:08.770
> 
> 标签：c#, java, c++, oop

在我所有的研究中，我了解到，当我想让用户访问内部属性时，我不应该直接访问该属性，而是通过 get/set 方法进行访问，例如：

```
class myClass
{
    private int x;

    public void SetX (int x)
    {
        this.x = x;
    }

    public int GetX ()
    {
        return this.x
    }
} 
```

因为它提供了额外的好处，允许程序员更轻松地完全更改引擎而不影响用户，更容易调试并提供更多用于检查输入有效性的选项。

然而，自从我开始学习和编写 C# 以来，我注意到大多数语言“原生”的类都暴露了它们的属性，例如，设置/获取矩形 ( [`System.Drawing.Rectangle`](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.aspx)) 的位置或大小，您可以简单地访问直接`X`, `Y`,`Width`和`Height`属性。

*   我看到公开属性的唯一好处是代码更简单一些。暴露属性还有其他好处吗？

*   我什么时候应该公开属性，什么时候不应该？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:02:06.120

你混淆了属性和字段。在 C# 中，属性可以像公共字段一样使用，但在内部调用它们的 get/set 方法。例如，您的具有属性的类如下所示：

```
class MyClass
{
    // Field, direct access to the internal representation
    private int x; 

    // Property, access via methods, but syntax like field access
    public int X {
        get { return this.x; } // generates a get-method "int get_X()"
        set { this.x = value; } // generates a set-method "void set_X(int value)"
    }
} 
```

当您现在像这样设置属性 X:**`myClass.X = 42`**时，编译器会将其转换为**`myClass.set_X(42)`**，这会调用**`set`**块中声明的方法。类似字段的语法只是为了方便。

因此，您确实应该更喜欢公开 set/get-methods。只是在 C# 中，这样做的首选方式是通过属性，它抽象出这些方法的实际调用，并允许您像字段一样使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:51:32.150

所以基本上，你的问题是属性与公共变量。什么时候用什么？

阅读[这篇文章](http://www.codinghorror.com/blog/2006/08/properties-vs-public-variables.html)，包括评论。

整个讨论的快速总结：

*   反射在变量和属性上的工作方式不同，所以如果你依赖反射，
    使用所有属性会更容易。
*   您不能对变量进行数据绑定。
*   将变量更改为属性是一项重大更改。

公开数据成员的琐碎属性实现是大量代码，没有或几乎没有收益，只有合理的原因可以是：

*   提供对由于某种原因无法声明为 const 的成员 var 的只读访问权限

*   如果您正在编写一个供某些第 3 方使用的组件，并且有可能必须替换该组件而无需这些用户重新构建（将公共成员变量更改为属性会破坏接口，所以需要重建）。

此外，将公共字段包装在属性中，有两个原因 - 一个是您以后不能在不破坏二进制兼容性的情况下更改它。二是你不能绑定到字段。

```
Reflection code against fields looks very different from reflection code against 
properties (FieldInfo vs. PropertyInfo for starters). So even if you can 
recompile against the new binary, if you use reflection on that field 
you're hosed. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:51:29.543

就像您说的那样，不直接访问您的变量的好处是您可以更改实现，而无需对您的类的用户进行任何更改。在面向对象编程方面，我认为这是一件重要的事情。

此外，通过使用属性，您仍然可以影响“get”或“set”的工作。这在某些情况下可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:41:33.143

在 C# 中，您使用属性而不是 getter/setter 方法，因为它们提供相同的功能。请注意，字段！= 属性。请参阅[MSDN：属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

# c++ - Gcc 4.8 DWARF4 与 DWARF2

> ID：15599606
> 
> 赞同：13
> 
> 时间：2013-03-24T14:22:26.787
> 
> 标签：c++, debugging, gcc, gdb, dwarf

GCC 4.8 支持 DWARF4。我想知道从用户的角度来看，DWARF4 和 DWARF2 有什么区别。

让我们从 GDB 的角度来看它。当您切换到 DWARF4 时，对用户有什么不同吗？

我找到了一个[Dwarf 主页](http://dwarfstd.org/Download.php)，但据我所知，网络上没有关于与用户 POV 差异的信息。

你能指出我这些不同之处吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T15:17:11.710

DWARF 的第一个版本被证明使用了过多的存储空间，DWARF-2 取代了它并添加了各种编码方案以减少数据大小，后来是 DWARF 的第 4 版，它提供了改进的数据压缩、优化代码的更好描述和支持用于 C++ 中的新语言功能。

通常发行说明或公告会总结这些差异（会有更多）

[http://dwarfstd.org/Announcement.php](http://dwarfstd.org/Announcement.php)

[http://dwarfstd.org/PressRelease.php](http://dwarfstd.org/PressRelease.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:31:42.827

[Dwarf 4 标准](http://dwarfstd.org/Dwarf4Std.php)页面列出了主要的改进，规范更详细地列出了这些。

大多数用户的底线似乎是更好地支持优化代码、支持更多语言（主要在 Dwarf 3 中）以及支持新的 C++ 语言结构

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-22T19:14:46.960

我想补充一点，并非所有版本的 gdb 都能正确读取 dwarf4。我经常发现自己编译`-gdwarf-2`只是为了能够看到所有的符号。例如，对于 gdb 7.2，如果我使用 dwarf4，我无法读取混合 Fortran-C 构建中的所有符号，而我可以使用 dwarf2。

# algorithm - 计数排序的时间复杂度

> ID：15599610
> 
> 赞同：11
> 
> 时间：2013-03-24T14:22:37.207
> 
> 标签：algorithm, sorting, asymptotic-complexity

我正在学习算法课程，在那里我看到计数排序的时间复杂度为 O(n+k)，其中 k 是数字范围，n 是输入大小。我的问题是，当k和n的差值太大时，比如k=O(n ² )或者O(n ³ )，我们可以说复杂度是O(n ² )还是O(n ³ ) ? 那么在这种情况下计数排序不是一个明智的方法，我们可以使用归并排序。我对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T14:24:19.153

是的，你在所有方面都完全正确。

此外，我们可以做出更强有力的陈述：当 k=O(n ² ) 或 O(n ³ ) 时，我们可以说计数排序的复杂度为 Θ(n ² ) 或 Θ(n ³ )。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T10:04:24.037

理论上，您仍然可以在 O(n) 时间内进行排序。如果值的范围是 1 到 n ³，则转换为基数 n 并进行基数排序。在基数 n 中，数字有 3 位数字，因此基本转换的运行时间为 O(3n + 3n) + O(n)。总体 O(n)。

# c# - 使用 Linq 初始化时，图形结构引用了不正确的列表

> ID：15599612
> 
> 赞同：0
> 
> 时间：2013-03-24T14:22:41.680
> 
> 标签：c#, linq, graph

我需要了解我经历过的 Linq 的这种行为。我将“包”存储在数据库中。包可以有父母和孩子，所以它是一个图结构。使用以下方法我获取根包，然后我需要获取孩子，以及他们的孩子等等..

**获取root包的方法**

```
var rootPack = (from p in context.Packages

    //several joins emitted for clarity

    where p.PackageID == parentId
    select new PackageModel
        {
            PackageId = p.PackageID,
            TagId = p.TagID

            //rest of the properties have been emitted for clarity

         }).FirstOrDefault();

if (rootPack != null)
{
    rootPack.Children = new List<PackageModel>();

    var fullStructure = GetChildPackages(rootPack, rootPack);
} 
```

以下方法引起了我的问题，这是一种工作形式：

**GetChildPackages - 工作表**

```
private PackageModel GetChildPackages(PackageModel package, PackageModel parentPackage = null)
{
        var innerContext = new DbDataContext(ConfigurationManager.ConnectionStrings[ConnectionStringName].ConnectionString);
        var children = (from p in innerContext.Packages

                            //several joins emitted for clarity

                            where p.ParentPackageID == package.PackageId
                            select new PackageModel
                            {
                                PackageId = p.PackageID,
                                Parent = parentPackage,

                                //rest of the properties have been emitted for clarity              

                            }).ToList();

        //get all children
        foreach (var child in children)
        {
            child.Children = new List<PackageModel>();
            package.Children.Add(GetChildPackages(child, package));

        }
        return package;
} 
```

请注意，在我选择它之后，我在 foreach 循环中初始化了每个孩子的孩子列表。我曾经在查询中使用所有其他属性对其进行初始化。

假设我加载了这个结构：

```
 ROOTPACKAGE
               /           \
        CHILD_A             CHILD_B
        /   |
CHILD_A1    CHILD_A2 
```

我列出的代码可以很好地加载这个结构，但是如果我在 Linq 查询中初始化 Children 列表，就会崩溃。而不是 CHILD_B 没有孩子，它将有 CHILD_A1 和 CHILD_A2。CHILD_A 也会*有*这些孩子。在调试器中，我可以看到每次我添加到 CHILD_A 的子列表中 - 它也被添加到 CHILD_B。由于每个包都有唯一的 packageid，我确信这些包不一样。似乎指向 Children 列表的指针或引用完全混淆了 - 但这是为什么呢？感谢您对此有所了解。

# ruby-on-rails - 使用carrierwave以嵌套形式上传多个图像

> ID：15599613
> 
> 赞同：2
> 
> 时间：2013-03-24T14:22:51.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, nested-forms, railscasts

我正在关注[railscasts 第 381 集](http://railscasts.com/episodes/381-jquery-file-upload)，试图通过carrierwave gem 和 jQuery File 上传将多个图像上传到我的应用程序。

我的应用程序用于一个大学项目，并设置了一个**远足径模型**，该模型具有许多并接受**图片模型**的嵌套属性。

在我将 file_field 的 multiple 选项设置为 true 并硬编码输入名称属性后，即`<%= form.file_field :image, multiple: true, name: "pic[image]" %>`carrierwave 停止工作，它不会像以前那样上传单个文件。

这可能与使用嵌套表单有关吗？我也尝试将本[教程](http://lucapette.com/rails/multiple-files-upload-with-carrierwave-and-nested_form/)实施到我的应用程序中，但没有任何成功。

我也尝试过将两种表单都制作成多部分，而不仅仅是父表单并删除我正在使用的 simple_form gem。

我也尝试过删除部分表单并将嵌套表单放在本地，但这没有帮助。也许这与我如何将 file_field 设置为多个有关，因为这是问题开始的地方。

任何建议或替代方法将不胜感激

# 楷模

```
class Pic < ActiveRecord::Base
  belongs_to :hikingtrail

  attr_accessible :img_name, :image, :remote_image_url

  mount_uploader :image, ImageUploader
end 
```

&

```
class Hikingtrail < ActiveRecord::Base
  attr_accessible :description, 
                                  :duration_hours, 
                                  :duration_mins, 
                                  :meta_description, 
                                  :name, 
                                  :looped,
                                  :pics_attributes

    validates :name,  :presence => true

    has_many :pics

    accepts_nested_attributes_for :pics, :allow_destroy => :true,
    :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } }
end 
```

# 意见

## 徒步旅行/_form.html.erb

```
<% @hikingtrail.pics.build %>
<%= simple_form_for @hikingtrail, :html => {:multipart => true}  do |f| %>

<%= f.input :name %>    

<%= f.input :description, :input_html => { :cols => 10, :rows => 3 } %>

<%= f.input :looped %>

  <h2>Images</h2>
  <%= render :partial => 'pics/form',
             :locals => {:form => f} %>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                hikingtrails_path, :class => 'btn' %>
  </div>
<% end %> 
```

## 图片/_form.html.erb

```
<%= form.fields_for :pics do |pic_form| %>
  <div class="field">

    <% unless pic_form.object.nil? || pic_form.object.new_record? %>
    <%= image_tag pic_form.object.image_url(:thumb).to_s %>
    <% end %>

    <% if pic_form.object.nil? || pic_form.object.new_record? %>
    <%= pic_form.file_field :image, multiple: true, name: "pic[image]" %>
    <% end %>

  </div>
  <% unless pic_form.object.nil? || pic_form.object.new_record? %>
    <div class="field">
      <%= pic_form.label :_destroy, 'Remove:' %>
      <%= pic_form.check_box :_destroy %>
    </div>
  <% end %>
<% end %> 
```

# 终端输出

```
Started PUT "/hikingtrails/7" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Processing by HikingtrailsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"trGCi0Gz+CNRmwAoktcYmeplEKW5bZBtozkduNIXvcI=", "hikingtrail"=>{"name"=>"Dunran Woods", "meta_description"=>"Nice walk through the woods", "description"=>"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.", "looped"=>"0", "duration_hours"=>"9", "duration_mins"=>"45"}, "pic"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f288085cc08 @original_filename="spink_sleepers.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"pic[image]\"; filename=\"spink_sleepers.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130324-7791-19ma2cb>>}, "commit"=>"Update Hikingtrail", "id"=>"7"}
  Hikingtrail Load (3.7ms)  SELECT "hikingtrails".* FROM "hikingtrails" WHERE "hikingtrails"."id" = $1 LIMIT 1  [["id", "7"]]
   (0.1ms)  BEGIN
   (0.1ms)  COMMIT
Redirected to http://0.0.0.0:3000/hikingtrails/7
Completed 302 Found in 6ms (ActiveRecord: 3.8ms)

Started GET "/hikingtrails/7" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Processing by HikingtrailsController#show as HTML
  Parameters: {"id"=>"7"}
  Hikingtrail Load (3.4ms)  SELECT "hikingtrails".* FROM "hikingtrails" WHERE "hikingtrails"."id" = $1 LIMIT 1  [["id", "7"]]
  Pic Load (0.2ms)  SELECT "pics".* FROM "pics" WHERE "pics"."hikingtrail_id" = 7
  Rendered collection (0.0ms)
  Rendered hikingtrails/show.html.erb within layouts/application (2.6ms)
  Rendered layouts/_navbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 41ms (Views: 36.2ms | ActiveRecord: 3.7ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /application.css - 304 Not Modified (0ms)
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/bootstrap_and_overrides.css?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /bootstrap_and_overrides.css - 304 Not Modified (0ms)
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery-fileupload/vendor/jquery.ui.widget.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /jquery-fileupload/vendor/jquery.ui.widget.js - 304 Not Modified (5ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /jquery.js - 304 Not Modified (0ms)
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-transition.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /twitter/bootstrap/bootstrap-transition.js - 304 Not Modified (0ms)

Started GET "/assets/jquery-fileupload/jquery.fileupload.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /jquery-fileupload/jquery.fileupload.js - 304 Not Modified (0ms)

Started GET "/assets/jquery-fileupload/jquery.iframe-transport.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /jquery-fileupload/jquery.iframe-transport.js - 304 Not Modified (0ms)

Started GET "/assets/jquery-fileupload/basic.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /jquery-fileupload/basic.js - 304 Not Modified (0ms)
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-modal.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /twitter/bootstrap/bootstrap-modal.js - 304 Not Modified (0ms)
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-alert.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /twitter/bootstrap/bootstrap-alert.js - 304 Not Modified (0ms)
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:17] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-dropdown.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:17 +0000
Served asset /twitter/bootstrap/bootstrap-dropdown.js - 304 Not Modified (8ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-tab.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-tab.js - 304 Not Modified (8ms)

Started GET "/assets/twitter/bootstrap/bootstrap-scrollspy.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-scrollspy.js - 304 Not Modified (3ms)

Started GET "/assets/twitter/bootstrap/bootstrap-popover.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-popover.js - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-tooltip.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-tooltip.js - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-button.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-button.js - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-carousel.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-carousel.js - 304 Not Modified (0ms)

Started GET "/assets/twitter/bootstrap/bootstrap-affix.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-affix.js - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-collapse.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-collapse.js - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/twitter/bootstrap/bootstrap-typeahead.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap/bootstrap-typeahead.js - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/bootstrap.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /bootstrap.js - 304 Not Modified (0ms)

Started GET "/assets/twitter/bootstrap.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /twitter/bootstrap.js - 304 Not Modified (0ms)

Started GET "/assets/pics.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /pics.js - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /static_pages.js - 304 Not Modified (0ms)

Started GET "/assets/hikingtrails.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /hikingtrails.js - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /application.js - 304 Not Modified (2ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/fontawesome-webfont.woff?v=3.0.2" for 127.0.0.1 at 2013-03-24 13:55:18 +0000
Served asset /fontawesome-webfont.woff - 304 Not Modified (0ms)
[2013-03-24 13:55:18] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T21:53:11.683

我花了很长时间试图实现类似的东西。也许我对这篇文章的回答可能会对您有所帮助。

[Rails 3 + JQuery-文件上传 + 嵌套模型](https://stackoverflow.com/questions/9357607/rails-3-jquery-file-upload-nested-model/17179188#17179188)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:54:54.770

我从未找到使用 jQuery 文件上传以嵌套形式上传多个图像的解决方案。经过我所做的所有研究，我认为这是不可能的。

最后，我遵循[railscast #196](http://railscasts.com/episodes/196-nested-model-form-revised)并能够使用carrierwave 和javascript 一次上传多个图像。

# android - Android布局绘图故障

> ID：15599616
> 
> 赞同：0
> 
> 时间：2013-03-24T14:23:26.273
> 
> 标签：android, layout, visual-glitch

我正在编写一个 android 游戏，我为具有以下 XML 的主菜单创建了一个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvStats"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_horizontal"
        android:gravity="fill_horizontal" >

        <Button
            android:id="@+id/btnStartSurvive"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="fill_horizontal"
            android:gravity="center_vertical|center_horizontal"
            android:text="Start Survival Mode" />

        <Button
            android:id="@+id/btnStartChall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="fill_horizontal"
            android:text="Start Callenge Mode" />

    </LinearLayout>

</LinearLayout> 
```

使用此活动在屏幕上显示布局：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View.OnClickListener;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.*;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Get rid of the stuff around the edges
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        //show layout
        setContentView(R.layout.main_menu);
        Button btnStart = (Button)findViewById(R.id.btnStartSurvive);
        btnStart.setOnClickListener(oclStart);
    }

    private OnClickListener oclStart = new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(MainActivity.this, GameActivity.class);
            intent.putExtra("gametype", 'S');
            startActivity(intent);  
        }
    };

} 
```

当我在手机（Android 4.2.2）上运行它时，我得到如下所示的东西：

![图 1](../Images/3db4267258c4048f22005294b437737c.png)

单击未使用的按钮使其看起来像这样：

![图 1](../Images/1ee9c3fc96f9c058d348bfd31d41625b.png)

当我在我的旧平板电脑（Android 2.2）上运行它时，我得到了我的预期：

![图 3](../Images/c294c067b17f5cc71271c6a3963b18f3.png)

这是一个Android错误吗？我该如何解决？

还是我的错？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T02:25:48.310

我设法在运行 4.2.2 的 Galaxy s4 上复制了相同的结果。由于某种原因，按钮似乎不能很好地工作。

您是否尝试过更改主题？有时主题会弄乱布局。

# java - 在 Jasperreports 中从服务器接收到多个不同的 Content-Disposition 标头

> ID：15599618
> 
> 赞同：11
> 
> 时间：2013-03-24T14:23:33.863
> 
> 标签：java, servlets, http-headers, jasper-reports

我正在尝试设置 content-disposition 标头以响应 servlet，但我在浏览器中收到此错误。我应该怎么办？

> **从服务器收到重复的标头**
> 
> 来自服务器的响应包含重复的标头。此问题通常是由于网站或代理配置错误造成的。只有网站或代理管理员可以解决此问题。
> 
> 错误 349 (net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION)：收到多个不同的 Content-Disposition 标头。不允许这样做以防止 HTTP 响应拆分攻击。

这是我的servlet控制器：

```
@RequestMapping("/**/paymentOrderReport.pdf")
public class PaymentOrderReportViewController extends org.springframework.web.servlet.mvc.AbstractController {

    private PaymentDao paymentDao;
    private JasperPdfView pdfView;

    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response) throws Exception {

        response.setContentType("application/pdf");
        response.setHeader("Content-disposition", "attachment; filename=" + "report.pdf");

        PaymentOrderEntity paymentOrderEntity = null;
        String traceCode = request.getParameter(ParamConstants.TRACE_CODE);

        if (traceCode != null) {
            PaymentSheetRequestEntity payRequestEntity = paymentDao.loadByUniqueProperty(PaymentSheetRequestEntity.PROP_TRACE_CODE,
                    traceCode);
            if (payRequestEntity != null) {
                paymentOrderEntity = payRequestEntity.getPaymentOrder();
            }
        }

        if (paymentOrderEntity != null) {
            List<PaymentOrderEntity> result = new ArrayList<PaymentOrderEntity>();
            result.add(paymentOrderEntity);
            JRDataSource jrDataSource = new JRBeanCollectionDataSource(result);

            Map<String, Object> model = new HashMap<String, Object>();
            model.put("reportData", jrDataSource);

            return new ModelAndView(pdfView, model);
        }
        return null;
    }

    public void setPaymentDao(PaymentDao paymentDao) {
        this.paymentDao = paymentDao;
    }

    public void setPdfView(JasperPdfView pdfView) {
        this.pdfView = pdfView;
    }
} 
```

和 JasperPdfView 类：

```
public class JasperPdfView extends AbstractJasperReportsView {

    @Override
    protected void renderReport(JasperPrint populatedReport, Map<String, Object> model, HttpServletResponse response) throws Exception {
        JRPdfExporter jrPdfExporter = new JRPdfExporter();
        if (getConvertedExporterParameters() != null) {
            jrPdfExporter.setParameters(getConvertedExporterParameters());
        }
        jrPdfExporter.setParameter(JRExporterParameter.JASPER_PRINT, populatedReport);
        jrPdfExporter.setParameter(JRExporterParameter.OUTPUT_STREAM, response.getOutputStream());
        jrPdfExporter.exportReport();
    }

} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-05-26T10:30:07.957

如果您正在下载文件名中包含逗号的文件，Google Chrome 可能会显示此错误消息。你真的只使用“report.pdf”作为文件名吗？

阅读[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)后，Content-Disposition 标头（不是 HTTP 规范本身的一部分）不应包含逗号字符，因为它将被视为两个不同标头的分隔符。

> 当且仅当该标题字段的整个字段值被定义为逗号分隔列表[即，#(values)] 时，具有相同字段名称的多个消息标题字段可能出现在消息中。必须可以将多个头字段组合成一个“字段名称：字段值”对，而不改变消息的语义，方法是将每个后续字段值附加到第一个字段值，每个字段值用逗号分隔。

因此，如果您的文件名是 report,May2014.pdf，那么 Chrome 会解释

`Content-Disposition: attachment; filename=report,May2014.pdf`

作为同一个 http 消息头的两个值

`Content-Disposition: attachment; filename=report`

`Content-Disposition: May2014.pdf`

这又被解释为[HTTP 响应拆分攻击](http://en.wikipedia.org/wiki/HTTP_response_splitting)，可能是因为在单个 HTTP 响应中实际上不应有多个 Content-Disposition 标头值。

其他浏览器似乎不介意文件名中的逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T05:55:47.780

这里有一个类似的讨论 - [http://productforums.google.com/forum/#!topic/chrome/hhZh_kpei8U](http://productforums.google.com/forum/#!topic/chrome/hhZh_kpei8U)

看看有没有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-28T17:57:43.220

不正确：

```
response.setHeader("Content-Disposition","attachment;filename="+filename+); 
```

正确的：

```
response.setHeader("Content-Disposition","attachment;filename=\""+filename+"\""); 
```

# ruby-on-rails - 使用载波有条件地重新调整大小，取决于多态关联

> ID：15599625
> 
> 赞同：2
> 
> 时间：2013-03-24T14:24:17.883
> 
> 标签：ruby-on-rails, carrierwave, polymorphic-associations

我有以下三个模型：

```
class Product < ActiveRecord::Base
  has_many :images, :as => :imageable
end

class Category < ActiveRecord::Base
  has_many :images, :as => :imageable
end

class Image < ActiveRecord::Base
  mount_uploader :image, ImageUploader
  belongs_to :imageable, :polymorphic => true
end 
```

我的图像控制器如下所示：

```
class Admin::ImagesController < AdminController
  before_filter :find_imageable

  def new
    @image = @imageable.images.new
  end

  def create
    if @image = @imageable.images.create(params[:image])
      redirect_to admin_images_path(:imageable_type => @imageable.class, :imageable_id => @imageable.id)
    else
      render 'new'
    end
  end

  private
  def find_imageable
    klass = params[:imageable_type].capitalize.constantize
    @imageable = klass.find(params[:imageable_id])
  end
end 
```

一切都按预期工作，但现在我想根据关联类型的类型调整图像大小：

```
class ImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick

  storage :file

  version :thumb, :if => :is_product? do
    process :resize_to_fill => [100, 100]
  end

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  protected
  def is_product? image
    model.imageable.class == 'Product' # => imageable is nil!
  end
end 
```

问题是，“模型”与上传器中的图像没有关联。当我检查模型时，它是这样的：

```
#<Image id: nil, name: "test", image: nil, imageable_id: nil, imageable_type: nil, created_at: nil, updated_at: nil> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T16:33:46.080

我遇到了同样的问题。我确实找到了[解决方法](https://github.com/jnicklas/carrierwave/issues/530)，但我仍然想知道是否有更好的方法来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T21:49:36.090

我通常会这样做

```
 version :thumb, :if => :thumb_version_enabled? do
    process :resize_to_fit => [100, 100]
  end

  version :big, :if => :big_version_enabled? do
    process :resize_to_fill => [600,600]
  end

  def include_version?(v)
    if self.model.respond_to?("only_versions")
      self.model.only_versions.collect(&:to_s).include? v.to_s
    else
      true
    end
  end

  protected 

  def method_missing(method_name, *args, &block)
    return super unless /^(.*)_version_enabled(=?)/ =~ method_name
    return include_version?(method_name.to_s.gsub("_version_enabled?","").gsub("_version_enabled",""))
  end 
```

在目标模型（安装上传器的位置）中，我将定义一种方法来定义启用的版本

```
class Product < ActiveRecord::Base

  ##....omiss
  mount_uploader :image, ImageUploader

  def self.only_versions
    [:thumb, :big, :small, :original]
  end

  def only_versions
    self.class.only_versions
  end
end 
```

在多态关联的情况下，您可以将方法委托给关联模型

```
class Image < ActiveRecord::Base
  mount_uploader :data, ImageUploader

  belongs_to :imageable, :polymorphic => true

  def only_versions
    if self.imageable && self.imageable.respond_to?("only_versions")
      self.imageable.only_versions
    else
      ImageUploader.versions.keys
    end
  end 
```

如果缺少“only_versions”方法，则默认启用所有版本...

# android - 超过 9 个补丁图像的线条

> ID：15599628
> 
> 赞同：0
> 
> 时间：2013-03-24T14:24:31.003
> 
> 标签：android, nine-patch

我有 9 个补丁图像（带圆角的按钮，中间是 incon），带有非渐变（渐变在背景上 - 下层，而不是按钮本身）alpha 通道内容，在绘制 9-path 时它看起来像这样：

![9路射击](../Images/dcdd36b0ecff821e69ee3a1c6f07ba77.png)

我只有 hdpi 的资源，所以我的假设是它可以扩展到其他密度。现在，在某些情况下会出现水平线（或多条线），如下图所示：

![1号线](../Images/f2095bfcf813b59bc0dd8fc21fd98fdb.png) ![2号线](../Images/5adc457901559139045d21de17ef3c71.png)

我认为这是由于缩放，但在某些非 hdpi 密度中，按钮可以正确查看。我还在[StackOverflow 找到了另一个线程](https://stackoverflow.com/questions/4792873/transparent-9patch-image-line-showing-through)，但在这种情况下，我认为它看起来像是由于渐变而发生的。

我怎样才能摆脱那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:00:32.893

在 9patch 中使用奇数时，我在 9Patch 上遇到了一些意外行为（请记住，如果您的 xhdpi 9patch 为 75px 高，则 mdpi 为 37.5px，这可能会导致意外的绘图场景）。

我的建议是使您的图形与分辨率（l(3)、m(4)、h(6) 和 xh(8)）以及几何平衡（即：您在顶部的可调整大小的区域是比底部大，你真的需要那个吗？）。

将等待您的回复！

# haskell - 我在哪里可以找到warp服务器的好手册？

> ID：15599635
> 
> 赞同：3
> 
> 时间：2013-03-24T14:25:16.003
> 
> 标签：haskell, webserver, yesod, web-development-server

我使用`yesod init`. 在开发过程中，我曾经`yesod devel`在调试模式下运行 warp 服务器。现在我已经完成了一个初步版本，我想将它部署在 ec2 亚马逊服务器上。因此，对于 Apache 服务器，我可以`sudo service appache start`启动服务器，并且在我关闭终端后服务器可以继续运行。

如何将我的应用程序放在 warp 服务器上并运行它（生产模式）？有没有什么好的网站可以显示这方面的快速教程？我一直在寻找，但没有运气，关闭的是 [The yesod book](http://www.yesodweb.com/book/basics)、[this blog](http://docs.yesodweb.com/blog/announcing-warp)和[haskellwiki](http://www.haskell.org/haskellwiki/Web/Servers)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:14:37.460

您可以考虑遵循[部署章节](http://www.yesodweb.com/book/deploying-your-webapp)中的建议，或使用[Keter 部署系统](https://github.com/snoyberg/keter)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:03:22.947

[这个](https://groups.google.com/forum/#!msg/yesodweb/gJeUT3uUIkg/rcDaEtLUFVkJ)讨论板是关于如何在实际服务器上运行 Yesod 网站的真正信息。

# python - Python中“虽然不是EOF”的完美对应物是什么

> ID：15599639
> 
> 赞同：142
> 
> 时间：2013-03-24T14:25:31.740
> 
> 标签：python, file, iteration, eof

要在 C 或 Pascal 中读取一些文本文件，我总是使用以下代码片段来读取数据，直到 EOF：

```
while not eof do begin
  readline(a);
  do_something;
end; 
```

因此，我想知道如何在 Python 中简单快速地做到这一点？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2013-03-24T14:26:23.057

循环文件以读取行：

```
with open('somefile') as openfileobject:
    for line in openfileobject:
        do_something() 
```

文件对象是可迭代的，并且在 EOF 之前产生行。将文件对象用作可迭代对象使用缓冲区来确保高性能读取。

您可以对标准输入执行相同操作（无需使用`raw_input()`：

```
import sys

for line in sys.stdin:
    do_something() 
```

为了完成图片，可以通过以下方式完成二进制读取：

```
from functools import partial

with open('somefile', 'rb') as openfileobject:
    for chunk in iter(partial(openfileobject.read, 1024), b''):
        do_something() 
```

where`chunk`一次将包含来自文件的最多 1024 个字节，并且当`openfileobject.read(1024)`开始返回空字节字符串时迭代停止。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-03-24T14:40:18.827

你可以模仿 Python 中的 C 习语。

要读取最多`max_size`字节数的缓冲区，您可以执行以下操作：

```
with open(filename, 'rb') as f:
    while True:
        buf = f.read(max_size)
        if not buf:
            break
        process(buf) 
```

或者，逐行的文本文件：

```
# warning -- not idiomatic Python! See below...
with open(filename, 'rb') as f:
    while True:
        line = f.readline()
        if not line:
            break
        process(line) 
```

您需要使用`while True / break`构造，因为除了读取返回的字节不足之外，Python中[没有 eof 测试。](http://mail.python.org/pipermail/python-dev/2001-January/011445.html)

在 C 中，您可能有：

```
while ((ch != '\n') && (ch != EOF)) {
   // read the next ch and add to a buffer
   // ..
} 
```

但是，您不能在 Python 中使用它：

```
 while (line = f.readline()):
     # syntax error 
```

因为在 Python[中的表达式中不允许赋值](http://docs.python.org/2/faq/design.html#why-can-t-i-use-an-assignment-in-an-expression)（尽管最新版本的 Python 可以使用赋值表达式来模仿这一点，见下文）。

在 Python 中这样做当然*更惯用：*

```
# THIS IS IDIOMATIC Python. Do this:
with open('somefile') as f:
    for line in f:
        process(line) 
```

* * *

**更新：**从 Python 3.8 开始，您还可以使用[赋值表达式](https://www.python.org/dev/peps/pep-0572/#sysconfig-py)：

```
 while line := f.readline():
     process(line) 
```

即使读取的行是空白的并且一直持续到 EOF，这仍然有效。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-24T14:27:04.153

打开文件并逐行读取的 Python 习惯用法是：

```
with open('filename') as f:
    for line in f:
        do_something(line) 
```

该文件将在上述代码的末尾自动关闭（`with`构造负责）。

最后，值得注意的是，`line`将保留尾随换行符。这可以使用以下方法轻松删除：

```
line = line.rstrip() 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-10-27T11:53:56.900

您可以使用下面的代码片段逐行读取，直到文件结尾

```
line = obj.readline()
while(line != ''):

    # Do Something

    line = obj.readline() 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-10-21T19:03:24.850

虽然上面有“以python方式做”的建议，但如果一个人真的想拥有一个基于EOF的逻辑，那么我想使用异常处理是一种方法——

```
try:
    line = raw_input()
    ... whatever needs to be done incase of no EOF ...
except EOFError:
    ... whatever needs to be done incase of EOF ... 
```

例子：

```
$ echo test | python -c "while True: print raw_input()"
test
Traceback (most recent call last):
  File "<string>", line 1, in <module> 
EOFError: EOF when reading a line 
```

或`Ctrl-Z`在`raw_input()`提示时按（Windows、`Ctrl-Z`Linux）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-30T11:49:55.110

除了@dawg 的出色答案之外，使用海象运算符（Python >= 3.8）的等效解决方案：

```
with open(filename, 'rb') as f:
    while buf := f.read(max_size):
        process(buf) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-08T16:33:42.833

您可以使用以下代码片段。readlines() 一次读取整个文件并按行拆分。

```
line = obj.readlines() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-05T13:27:58.977

这个怎么样！让它变得简单！

```
for line in open('myfile.txt', 'r'):
    print(line) 
```

无需浪费额外的线路。并且不需要使用`with`关键字，因为当没有文件对象的引用时文件会自动关闭。

# c# - 从复选框列表中删除项目

> ID：15599643
> 
> 赞同：3
> 
> 时间：2013-03-24T14:25:47.170
> 
> 标签：c#, asp.net

这是主要形式：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="CheckDelete.aspx.cs"  Inherits="CheckDelete" %>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">

  <html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
  <title></title>
 </head>
<body>
<form id="form1" runat="server">
<asp:CheckBoxList ID="chkItems" runat="server" style="width: 37px">
    <asp:ListItem Value="A"></asp:ListItem>
    <asp:ListItem Value="B"></asp:ListItem>
    <asp:ListItem Value="C"></asp:ListItem>
    <asp:ListItem Value="D"></asp:ListItem>
    <asp:ListItem Value="E"></asp:ListItem>
    <asp:ListItem Value="F"></asp:ListItem>
    <asp:ListItem Value="H"></asp:ListItem>
</asp:CheckBoxList>
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Delete" />
<br />
<br />
</form> 
```

表格中的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    for (int i = 0; i < chkItems.Items.Count; i++)
    {
        if (chkItems.Items[i].Selected == true)
        {
           chkItems.Items.RemoveAt(i);
        }
    }

} 
```

在我的表单中，我想删除用户已选中的项目。但是，如果我选择 3 个项目，则在用户点击删除后，至少有一个项目将保留在表单上。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:35:15.157

您需要列出要删除的所有项目，然后将它们一一删除。

例如

```
List<ListItem> toBeRemoved = new List<ListItem>();
for(int i=0; i<chkItems.Items.Count; i++){
    if(chkItems.Items[i].Selected == true)
        toBeRemoved.Add(chkItems.Items[i]);
}

for(int i=0; i<toBeRemoved.Count; i++){
    chkItems.Items.Remove(toBeRemoved[i]);
} 
```

在您的示例中，您可以随时删除项目，这将更改您尚未循环的剩余项目的索引。这将导致您在循环时“丢失”项目。我想这就是你问题的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:35:54.153

尝试向后循环，例如

```
protected void Button1_Click(object sender, EventArgs e)
{
    for (int i = chkItems.Items.Count -1 ; i >= 0; i--)
    {
        if (chkItems.Items[i].Selected == true)
        {
           chkItems.Items.RemoveAt(i);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T14:36:53.807

你可以这样做。

```
> for (int i = 0; i < chkItems.Items.Count; i++)
    {
        if (chkItems.Items[i].Selected == true)
        {
           ListItem li =new ListItem();
           li.Text = chkItems.Items[i].Text;  
           li.Value = chkItems.Items[i].Value;  
           chkItems.Items.Remove(li);
        }
    } 
```

# javascript - 如何更新跨度标签的内容？

> ID：15599645
> 
> 赞同：0
> 
> 时间：2013-03-24T14:25:54.480
> 
> 标签：javascript, html, updates, session-storage

我正在创建一个网页，用户在其中通过单击按钮选择一个项目。所选项目的详细信息将显示在一个保管箱中。目前，如果用户再次选择它，我可以让它更新数量。我遇到的问题是，如果用户首先单击 btnBuy1 （详细信息显示在保管箱中），然后单击 btnBuy2 （再次显示详细信息），但是当他们再次单击 btnBuy2 时，来自 btnBuy2 的详细信息已更新但btnBuy1 的详细信息消失了。

```
 $("#btnBuy0").click(function()
        {
            if (!sessionStorage['quantity0'])
            {
                sessionStorage['quantity0'] = 1;
                $("#dropbox").append('<span id = "0"><img class = "thumb" src="../images/21_metoyou.jpg" />' + teddy[0].desc + ", Price £"
             + teddy[0].price + ", Quantity: " + sessionStorage.getItem('quantity0') + "</span><br/>");

            }           
            else
            {
                sessionStorage['quantity0']++;
                $("#dropbox").html('<span id = "0"><img class = "thumb" src="../images/21_metoyou.jpg" />' + teddy[0].desc + ", Price £"
             + teddy[0].price + ", Quantity: " + sessionStorage.getItem('quantity0') + "</span><br/>");

            }
            if (Modernizr.sessionstorage) 
            {  // check if the browser supports sessionStorage
                myids.push(teddy[0].partnum); // add the current username to the myids array
                sessionStorage["ids"]=JSON.stringify(myids); // convert it to a string and put into sessionStorage
            }   
            else 
            {
             // use cookies instead of sessionStorage
            }
        });
        $("#btnBuy1").click(function()
        {
            if (!sessionStorage['quantity1'])
            {
                sessionStorage['quantity1']=1;
                $("#dropbox").append('<span id = "1"><img class = "thumb" src="../images/birthday_metoyou.jpg" />' + teddy[1].desc + ", Price £"
             + teddy[1].price + ", Quantity: " + sessionStorage.getItem('quantity1') + "</span><br/>");

            }
            else
            {
                sessionStorage['quantity1']++;
                $("#dropbox").html('<span id = "1"><img class = "thumb" src="../images/birthday_metoyou.jpg" />' + teddy[1].desc + ", Price £"
             + teddy[1].price + ", Quantity: " + sessionStorage.getItem('quantity1') + "</span><br/>");

            }
            if (Modernizr.sessionstorage) 
            {  // check if the browser supports sessionStorage
                myids.push(teddy[1].partnum); // add the current username to the myids array
                sessionStorage["ids"]=JSON.stringify(myids); // convert it to a string and put into sessionStorage
            } 
            else 
            {
             // use cookies instead of sessionStorage
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:33:45.300

我不是 jQuery 人，但我认为您的问题是由于您增加计数然后替换 Dropbox 中的所有 HTML 造成的 - 可见

```
sessionStorage['quantity0']++;
  $("#dropbox").html('<span id = "0"><img class = "thumb" src="..jpg" />' + 
// there -------^^^^-----  
                       teddy[0].desc + ", Price £"
                     + teddy[0].price + ", Quantity: " + 
                       sessionStorage.getItem('quantity0') + "</span><br/>"); 
```

你不应该替换 $("#0") 而不是 $("#dropbox") 的内容吗？... IE

```
sessionStorage['quantity0']++;
  $("#0").html('<img class = "thumb" src="..jpg" />' + teddy[0].desc + 
                     ", Price £" + teddy[0].price + ", Quantity: " + 
                     sessionStorage.getItem('quantity0')); 
```

# c# - 数组赋值中的异常：无法将类型“int”隐式转换为“string”两次：

> ID：15599646
> 
> 赞同：1
> 
> 时间：2013-03-24T14:25:59.397
> 
> 标签：c#

我需要将我的结果分配给一个数组，但是当我使用这个代码时我遇到了一个问题：

```
string[] result = null;
result = new string[10];
int num = 0;
int id = Convert.ToInt32(textReader.GetAttribute("id"));
foreach (string attr in attrs)
  {
    // this line fails \/ 
    result[id] =  num { textReader.GetAttribute(attr) };
    // I can't put there correctly my int - num
    num++;
  } 
```

> 错误是：无法将类型'int'隐式转换为'string'并且两次：; 是期待

你能告诉我如何正确地做到这一点吗？我是 C# 新手，我无法解决这个问题。祝你今天过得愉快。

# 编辑

我想创建多维数组所以（php风格）结果[1] =数组（0 => firstattr，1 => secondattr等等......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:07:56.030

阅读您的更新会将其变成一个不同的问题。与 PHP 不同，C# 对类型很认真，因此您不能只将内容填充到变量或数组槽中。您必须明确声明您需要一个多维数组。在 C# 中，数组不像在 PHP 中那样灵活。在 PHP 中，您可以使用任何东西作为键。在 C# 中，您必须完全使用不同的类型（这实际上是 PHP 在幕后所做的，因为 PHP 中的所有数组在内部都是哈希表）。

我将做另一个假设，即这段代码的一部分在一个函数中，该函数为单个 填充属性`id`，并且您的`result`变量实际上在该函数的多次调用中共享。否则我看不出你的代码会有什么意义。

```
// this is probably shared
Dictionary<int, List<string>> result = new Dictionary<int, List<string>>();

// perhaps this next bit is in a function that gets the attributes for a given tag
int id = Convert.ToInt32(textReader.GetAttribute("id"));
result[id] = new List<string>();
foreach(string attr in attrs) {
    result[id].Add(textReader.GetAttribute(attr));
} 
```

我们这里有一个整数和可增长数组的散列（C# 调用这些字典）。也就是说，外部结构等价于将整数映射到子数组的 PHP 数组。子数组本质上是相同的，除了我们`List`在 C# 中使用，因为它可以增长——我们不必在创建它时准确分配正确数量的元素。你可以这样做，但这可能是额外的工作。我将把它作为练习留给 OP 以这种方式实施。

万一您不知道什么`Dictionary<int, List<string>>`意思，您应该阅读 C# 中的泛型。翻译成英语，它基本上说“字典（即哈希表），键为`int`，值为`List<string>`，即值列表`string`”。另请注意，字典中的每个列表都必须单独初始化，这就是为什么我在 foreach 上方有一行。PHP 会自动重新定义事物，但 C# 不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:16:36.863

我是如何创造我想做的事情的：

```
string[][] result = null;
int num = 0;
                        int id = Convert.ToInt32(textReader.GetAttribute("id"));
                        string[] arr = new string[3]; 
                        foreach (string attr in attrs)
                        {
                            arr[num] = textReader.GetAttribute(attr);
                            result[id] = arr;
                            num++;
                        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:29:59.400

textReader.GetAttribute(attr) 将返回一个字符串，并将其分配给 num，它是一个整数，这就是您收到错误消息的原因：“无法将类型 'int' 隐式转换为 'string'”

```
 // this line fails \/ 
 result[id] =  num { textReader.GetAttribute(attr) };
 // I can't put there correctly my int - num
 num++; 
```

可以改写为：

```
string attribute = textReader.GetAttribute(attr);
result[id] =  attribute;
num = int.Parse(attribute) + 1; 
```

# c# - 转换日期 (c#)

> ID：15599647
> 
> 赞同：0
> 
> 时间：2013-03-24T14:26:19.600
> 
> 标签：c#, date, datetime

再会！面对问题。需要转换日期。在数据库中，它以以下格式存储：

```
1332622254
1332622368
1332622467
1332622551 
```

我用这种格式从来没有遇到过。这是什么格式，我不知道。帮助在 vfeueshu 中格式化它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:32:00.453

这是自 1970 年 1 月 1 日午夜以来的秒数：

```
var epoch = new DateTime(1970,1,1);
var ts = TimeSpan.FromSeconds(1332622254);
var date = epoch.Add(ts); 
```

`date`然后是 24-3-2012 20:50:54

**编辑**
或更简单，正如 MarcinJuraszek 正确指出的那样：

```
var epoch = new DateTime(1970,1,1);
var date = epoch.AddSeconds(1332622254); 
```

请注意，这可能是 UTC 的日期/时间，因此您可能需要针对您的时区进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:29:59.260

这是[时间跨度](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

```
TimeSpan a = new TimeSpan(1332622254); 
```

# mysql - 如何删除同一天的重复行？

> ID：15599650
> 
> 赞同：0
> 
> 时间：2013-03-24T14:26:40.867
> 
> 标签：mysql, sql, phpmyadmin, sql-delete

我的桌子看起来像：

```
id      name        value       date
1       John        25      2013-03-23 16:42:35
2       John        25      2013-03-23 13:52:24
3       John        26      2013-03-22 03:12:43
4       Gabriel     18      2013-03-23 10:21:07
5       Rick        32      2013-03-21 04:37:29 
```

如何删除相同的行和同一天`name`的时间戳？`date`例如，上表应为：

```
id      name        value       date
1       John        25      2013-03-23 16:42:35
3       John        26      2013-03-22 03:12:43
4       Gabriel     18      2013-03-23 10:21:07
5       Rick        32      2013-03-21 04:37:29 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:29:38.723

有很多方法可以做到这一点。一种是使用子查询，该查询每天获取一条名称记录，然后将子查询的结果连接回表中。然后将过滤并删除不匹配的行。

```
DELETE  a
FROM    tableName a
        LEFT JOIN
        (
            SELECT  name, date(date) dateOnly, MIN(ID) min_ID
            FROM    tableName
            GROUP   BY name, date(date)
        ) b ON  a.name = b.name AND
                Date(a.date) = b.dateonly AND
                a.ID = b.min_ID
WHERE   b.name IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fdf84/1)

# celery - 访问 celery 任务导致组内链

> ID：15599652
> 
> 赞同：7
> 
> 时间：2013-03-24T14:26:47.363
> 
> 标签：celery, django-celery, celery-task

我的芹菜工作流程是：

```
group1 = (task1, task2)
chain2 = (task3, group1)
group3 = (task4, task5, chain2) 
```

当我开始时`group3`，一切都很好：所有任务都以我需要的“依赖”执行。这些任务执行一些操作，然后返回一个布尔值。我想检查每项任务的结果。不幸的是，我无法检索所有结果：

```
group3.results 
```

返回：

```
True, True, tuple 
```

元组类似于：

```
('8a8b7c2c-db44-4096-ba29-93ad2cd63409', [('576966ec-0ce5-4d82-9ab5-a23da805299b', None), ('777c77a3-34d6-4021-943f-8c39e7e87311', None)]) 
```

我不能像连锁结果一样处理它。如果我用 id 创建一个 asyncresult `8a8b7c2c-db44-4096-ba29-93ad2cd63409`，我只能访问组中子任务的结果（即：我得到`task1`结果`task2`，但没有办法得到`task3`结果）。

这种方法非常复杂，但我在 celery 文档中找不到特定的东西，在那里我找到了检索简单组/链结果的所有方法。

鉴于我真的了解工作流程，访问所有结果的最佳方式是什么？

# android - 在android中顺利拖动列表项

> ID：15599653
> 
> 赞同：0
> 
> 时间：2013-03-24T14:26:52.493
> 
> 标签：android, android-listview, android-sqlite, android-gesture

我有一个列表视图，其中包含一组项目。我使用 ACTION_DOWN、ACTION_MOVE 和 ACTION_UP 事件对列表项执行手势检测。

在 ACTION_MOVE 中，我有以下代码行：mDownView.setTranslationX(deltaX);

其中 deltaX 是 motionEvent.getRawX() - mDownX；mDownX 是 ACTION_DOWN 事件的 X 坐标。

我面临的问题是列表项移动不流畅。它看起来不连贯。我该怎么做才能让它看起来流畅？

请注意，我正在 ACTION_MOVE 中进行数据库调用（下面的代码片段）。

```
case MotionEvent.ACTION_MOVE: {
            // Check the view type
            Log.d(tag, "------- IN ACTION MOVE -------");

            if (mVelocityTracker == null || mPaused) {
                break;
            }
            // the line below slows down the swipe

            DataBaseHandler db = new DataBaseHandler(mcontext);

            int status = db.getStatus(row_id); 
```

# c# - 如何在 Metro 应用程序中从 System.IO.Stream 创建文件？

> ID：15599654
> 
> 赞同：1
> 
> 时间：2013-03-24T14:26:56.027
> 
> 标签：c#, windows-8, microsoft-metro, .net

```
Stream stream = await new HttpClient().GetStreamAsync( url ); 
```

如何在应用程序的本地文件夹中创建一个文件，并将通过此流下载的数据作为文件内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:17:11.510

你可能会做某种流来流复制。但是，我恰好在我的代码中使用了响应对象：

```
var client = new HttpClient();
var response = await client.GetAsync(uri);
if (response.IsSuccessStatusCode)
{
    Stream stream = null;
    StorageFolder localFolder = ApplicationData.Current.TemporaryFolder;
    StorageFile file = await localFolder.CreateFileAsync("savename.htm",
        CreationCollisionOption.ReplaceExisting);
    stream = await file.OpenStreamForWriteAsync();

    await response.Content.CopyToAsync(stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:47:56.833

您需要使用[StorageFile](http://msdn.microsoft.com/library/windows/apps/BR227171?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

像这样的东西：

```
StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync("yourfile.xml", CreationCollisionOption.ReplaceExisting); 
```

[更多信息，请访问 http://social.msdn.microsoft.com](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/18b44ccd-f5fa-4c24-ae58-5bc498d8d60c/)

# drupal - drupal 7 在自定义模块中提交表单后查询数据库并显示结果

> ID：15599655
> 
> 赞同：5
> 
> 时间：2013-03-24T14:27:02.283
> 
> 标签：drupal

```
function mymodule_search_form($form, &$form_state) {

  $form..... define the form here

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Search',
  );

  return $form;
}

function mymodule_search_form_submit($form, &$form_state) {

  //process the form and get result 
  $output = this is the result with a table of data.
  //I want to display the result table here.

 //Now I can only use drupal message to display on top.
 drupal_set_message($output);

  return;
} 
```

所以基本上我想要一个表格来从数据库中搜索一些东西。一旦点击提交搜索，并得到结果。

我想在同一表单页面的表单下显示结果。 **不要转到其他页面，只在原始表单页面中。**

表格可以清理/重置为原始状态，这很好。

[http://drupal.org/node/542646](http://drupal.org/node/542646) 这个讨论是我想要的，但那里看起来没有可靠的结果/解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T14:32:27.300

您可以将输出表存储在 中`$form_state`，将表单设置为重建，如果它存在于原始表单函数中，则显示它，例如

```
function mymodule_search_form($form, &$form_state) {

  $form..... define the form here

  if (!empty($form_state['results_table'])) {
    $form['results_table'] = array('#markup' => $form_state['results_table']);
  }

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Search',
  );

  return $form;
}

function mymodule_search_form_submit($form, &$form_state) {
  $form_state['results_table'] = function_to_get_table();
  $form_state['rebuild'] = TRUE;
} 
```

# durandal - VS 2012 Durandal 智能

> ID：15599658
> 
> 赞同：0
> 
> 时间：2013-03-24T14:27:05.930
> 
> 标签：durandal

我开始使用 Durandal 。智能不工作。我将 js 引用到 _refernce.js，但仍然无法正常工作。

任何想法 ？提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:46:04.837

Durandal 完全使用 AMD 模块构建。默认情况下，需要模块在 Visual Studio 中并没有任何 Intellisense 支持。

看起来有办法让它工作。如果您使用 Visual Studio 2012，这里有一篇博文可能会对您有所帮助：http: [//landofjoe.com/blog/ill-take-my-durandal-with-intellisense-please](http://landofjoe.com/blog/ill-take-my-durandal-with-intellisense-please)

# c++-cli - 如何在多个文件中分配不同的功能？

> ID：15599661
> 
> 赞同：0
> 
> 时间：2013-03-24T14:27:21.817
> 
> 标签：c++-cli

我的任务就是这样

我创建了一个由两个按钮组成的 GUI，如图所示，

![在此处输入图像描述](../Images/78929e9f571ea84e81986349b7d1b68c.png)

因此，对于“浏览捕获的文件”按钮，我必须通过 OpenFIleDialog 打开多个文件并阅读它。这是打开和读取文件的代码。

```
Stream^ myStream;

OpenFileDialog^ openFileDialog1 = gcnew OpenFileDialog;
openFileDialog1->InitialDirectory = "c:\\";
openFileDialog1->Title = "open captured file";
openFileDialog1->Filter = "CP files (*.cp)|*.cp|All files (*.*)|*.*|txt files (*.txt)|*.txt";
openFileDialog1->FilterIndex = 2;
openFileDialog1->Multiselect = true;

if ( openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK )
     {

for each (String^ file in openFileDialog1->FileNames) 
{  

       array<String^>^ lines = System::IO::File::ReadAllLines(file);  

     for each (String^ line in lines) 
     {          
     }
} 
```

之后，在“开始分析”按钮上，我想开始对每个文件执行。我在 OpenFileDialog 中打开的文件，例如“1_1.cp”、“2_1.cp”和“3_1.cp”。我将开始对文件进行分析，每个文件都有不同的数据，这些数据将执行不同的分析。

现在我的问题是，我将如何分配每个打开的文件来执行特定的任务或功能。比如1_1.cp做任务A，2_1.cp做任务B等等？任何人都可以帮助提出一些想法？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:55:57.823

我不是 100% 确定你在问什么，但这就是你要找的吗？

```
if(openFileDialog1->FileNames->Length > 0)
{
    TaskA(openFileDialog1->FileNames[0]);
}

if(openFileDialog1->FileNames->Length > 1)
{
    TaskB(openFileDialog1->FileNames[1]);
}

if(openFileDialog1->FileNames->Length > 2)
{
    TaskC(openFileDialog1->FileNames[2]);
}

// etc... 
```

# scala - 泛型特征的 case 对象

> ID：15599663
> 
> 赞同：7
> 
> 时间：2013-03-24T14:27:25.747
> 
> 标签：scala, traits

在 Scala 中：我想定义一个 Message[T] 类型（它需要有这个签名），它可以是一个包含一些 T 类型数据的消息，也可以是一个隐式消息。我有

```
trait Message[T]
case object ImplicitMessage extends Message <- obviously doesn't compile
case class DataMessage[T](d: T) extends Message[T] 
```

我应该如何定义 ImplicitMessage？我可以使它成为一个案例类，但这显然不是很好，因为它只需要一个实例。

更新：我知道我可以简单地从 Message 中删除 [T]，但我不能（要求）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:30:46.633

你可以使用`Nothing`如下：

```
case object ImplicitMessage extends Message[Nothing] 
```

`Nothing`是一种特殊类型，它是所有可能类型的子类型并且没有实例。

如果您因为遇到方差问题，`Message[T]`可以使用以下技巧：

```
object ImplicitMessage extends Message[Nothing] {
  def apply[T]: Message[T] = this.asInstanceOf[Message[T]]
}

scala> ImplicitMessage[String]
res1: Message[String] = ImplicitMessage$@4ddf95b5
scala> ImplicitMessage[Long]
res2: Message[Long] = ImplicitMessage$@4ddf95b5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:22:01.623

您可以通过使用如下类型参数定义隐式方法：

```
implicit def message[T]: Message[T] = new Message[T] {} 
```

**编辑：**如果你真的只有一个实例（你真的不应该这样做，因为你在对编译器撒谎，这很可能是你做错了），你可以简单地转换为 null：

```
implicit def message[T]: Message[T] = null.asInstancOf[Message[T]] 
```

# cakephp - CakePHP：使用单个数据库表的关联模型

> ID：15599667
> 
> 赞同：0
> 
> 时间：2013-03-24T14:28:00.687
> 
> 标签：cakephp, model

使用 CakePHP：

在我的示例中，我有一个名为模型，`users`然后关联模型`admins`, `students`, `parents`。

现在，`admin`每个`student`和`user` `belongsTo`一个`user`. （另外每`student` `belongsTo`一个`parent`）

我需要为每个模型单独的控制器，但我不想为每个模型有一个单独的数据库表。即所有的`users`都存储在`users`表中，并有一个`user_type`管理员、父级或子级。

首先，这是设置它的正确方法，还是每个`student`模型`admin`都应该在数据库中拥有自己的表？其次，如何制作基于相关模型表的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:12:21.440

[http://book.cakephp.org/2.0/en/models/model-attributes.html#usetable](http://book.cakephp.org/2.0/en/models/model-attributes.html#usetable)

```
class Example extends AppModel {
    public $useTable = false; // This model does not use a database table
} 
```

Cake 允许您拥有未连接到任何数据库表的模型。

我认为是否使用没有任何数据库表的模型是您的选择:)

# vb.net - 在 Winforms 应用程序中托管 Web 服务

> ID：15599670
> 
> 赞同：0
> 
> 时间：2013-03-24T14:28:18.957
> 
> 标签：vb.net, web-services

我有一个 winforms 应用程序，我需要它来托管 Web 服务。我实际上正在考虑使用 HttpListener 并返回一个标准的 wsdl 文件作为响应，但我一直收到一条错误消息，说我的 wsdl 在从 SoapUI 测试时格式不正确。

你知道怎么做吗？或者，也许您知道可以从代码动态生成 W​​eb 服务的商业 .net 控件？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:46:18.143

您可以在 WinForms 应用程序中[自托管WCF 服务。](http://dotnetstories.wordpress.com/2012/03/04/self-hosting-wcf-services/)在该链接中，他们在控制台应用程序中执行此操作，但该技术同样适用于 WinForms 应用程序。

请注意，这不是一个常见的用例（AFAIK），而且似乎有时人们会遇到一些问题（如果你在 Google 上搜索“WinForms 中的 WCF 服务主机”之类的东西）。如果您在这个设计选择上陷入困境，在 Stack Overflow 上也有一些关于它的问题，例如[这里](https://stackoverflow.com/questions/11267071/how-can-a-self-hosted-winform-wcf-service-interact-with-the-main-form)和[这里](https://stackoverflow.com/questions/4718244/wcf-in-winforms-app-is-it-always-single-threaded)可能对阅读也很有用。

# java - 何时使用 Integer.parseint

> ID：15599674
> 
> 赞同：3
> 
> 时间：2013-03-24T14:28:34.220
> 
> 标签：java, numbers

为什么在进行类型转换时使用 Integer.parseint()？

也许问这个问题的另一种方式是：

什么时候应该在类型转换上使用 Integer.parseint()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:41:41.973

类型转换用于使一种类型的对象分配给另一种类型，而无需更改或解析对象的内容。而 parseInt 方法解析字符串值并将其转换为整数值，即将字符串值转换为整数。

类型转换与对象的内容无关。它仅用于将一种类型的引用类型分配给另一种类型。例如：`Object obj = new String(""); String string = (String) obj;`

# c++ - 类成员函数指针

> ID：15599679
> 
> 赞同：8
> 
> 时间：2013-03-24T14:28:55.363
> 
> 标签：c++, arduino, function-pointers

我正在尝试使用类函数（中断服务例程），

```
void (ClassName::*fp)(void)=ClassName::FunctionName; 
```

并使用具有以下类型输入的函数将其连接到 Arduino 中断引脚，但这不起作用。

```
void attachInterrupt(int, void (*)(void),int); 
```

我怎样才能做到这一点？中断服务例程（ISR）需要访问私有对象数据，所以我不能在类之外创建函数。

我的编译器错误：

```
ClassName.cpp : : In constructor 'ClassName::ClassName()':
ClassName.cpp : *)()'
ClassName.cpp : *)()' to 'void (*)()' for argument '2' to 'void attachInterrupt(uint8_t, void (*)(), int)' 
```

注意：我正在课堂内寻找解决方案，并将接受向我展示解决方案或向我展示不可能的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T14:31:33.653

如果函数不是`static`，则不能将其作为输入传递给接受非成员函数指针的函数。

考虑一个非`static`成员函数有一个隐式指针`ClassName`作为它的第一个参数，它指向调用成员函数的对象。

```
struct X
{
    static void foo() { } // Does not have an implicit "this" pointer argument
    void bar() { } // Has an implicit "this" pointer argument
};

int main()
{
    void (*f)() = &X::foo; // OK: foo is static
    void (*g)() = &X::bar; // ERROR! bar is non-static
} 
```

在这里，甚至`std::bind()`不起作用，因为结果不能转换为函数指针。Lambda 可以转换为函数指针，但前提是它们是非捕获的（这里的 lambda 需要捕获对象以调用成员函数）。

因此，唯一（丑陋的）解决方法是拥有一个全局适配器函数，该函数调用对象上的成员函数，该对象可通过全局指针变量获得。全局指针变量在调用函数之前设置：

```
struct X
{
    void bar() { }
};

void function_taking_a_function_pointer(void (*f)())
{
    // Do something...
    f();
}

X* pX = nullptr;
void bar_adapter()
{
    pX->bar();
}

int main()
{
    X x; // Some object I want to invoke the member function bar() on...

    pX = &x; // Set the global pointer and invoke the function...
    function_taking_a_function_pointer(bar_adapter);
} 
```

`bar_adapter`如果您愿意，您可以通过将其转换为函数*模板*并将指向成员函数的指针作为模板参数传递来使其更加灵活：

```
template<typename T, void (T::*mf)()>
void adapter()
{
    (pX->*mf)();
} 
```

以下是您将如何使用它：

```
#include <iostream>

struct X
{
    void foo() { std::cout << "X::foo()" << std::endl; }
    void bar() { std::cout << "X::bar()" << std::endl; }
};

void function_taking_a_function_pointer(void (*f)())
{
    // Do something...
    f();
}

X* pX = nullptr;

template<typename T, void (T::*mf)()>
void adapter()
{
    (pX->*mf)();
}

int main()
{
    X x; // Some object I want to invoke the member function bar() on...

    pX = &x; // Set the global pointer and invoke the function(s)...

    function_taking_a_function_pointer(adapter<X, &X::foo>);
    function_taking_a_function_pointer(adapter<X, &X::bar>);
} 
```

最后，这是一个[活生生的例子](http://liveworkspace.org/code/41HfPq%2438)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T14:31:15.640

每个类成员函数都有一个隐式的第一个参数，即`this`指针，因此您的方法实际上不是带有 void 参数列表 - 它需要一个参数 - 调用它的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:35:33.320

您可以使用`boost::function<>`or`boost::bind<>`指向类成员函数：

```
# include <boost/function.hpp>
# include <boost/bind.hpp>
class FunctionClass {
    private:
       double a_;
    public:
       FunctionClass (const double & a): a_(a ){}
       double multWithA (const double & x) const { return a_*x;}
       double operator ()(const double & x) const { return a_*x;}
};

FunctionClass myClass (2.0);
double x = 12.0;
boost :: function <double (FunctionClass *, double)> funcPtr , funcPtr1;
funcPtr =& FunctionClass :: multWithA;
funcPtr1 =& FunctionClass :: operator ();

std :: cout << myClass . multWithA (x) << std :: endl;
std :: cout << funcPtr (& myClass ,x) << std :: endl;
std :: cout << funcPtr1 (& myClass ,x) << std :: endl;

// Bind the function with the class instance
boost :: function <double (double)> funcPtrNew ;
funcPtrNew = boost :: bind (funcPtr ,& myClass ,_1);
std :: cout << funcPtrNew (x) << std :: endl; 
```

# c# - WPF 应用程序中语言使用的奇怪行为

> ID：15599682
> 
> 赞同：1
> 
> 时间：2013-03-24T14:29:01.967
> 
> 标签：c#, wpf, fonts, tamil

我曾`FontFamily="Bamini Plain"`在允许我在运行时输入泰米尔语文本的文本框中使用。但是当我捕获 `txtPlaceAcquire.Text`返回英文文本的代码时。为什么会出现这种奇怪的行为？如何获得我的原始语言值？

```
<TextBox Text="" Name="txtPlaceAcquire"  Width="210" Margin="10,0" FontFamily="Bamini Plain" />  <!-- Tamil language font setup -->

var textCapuredVal =  txtPlaceAcquire.Text;  // It was given english value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:32:36.140

作为一个泰米尔人并且处理过这么多泰米尔语编码，我想我应该在这个问题上启发你。Bamini 不属于任何编码，例如 TAB、TAM、TSCI 或通用标准 Unicode。Bamini 字体在英文脚本之上有泰米尔语脚本。

所以我建议你开始使用 Unicode 字体。网上有一些泰米尔语字体。甚至 windows 都带有默认的 Unicode Tamil 字体`latha.ttf`。

要输入泰米尔语，请使用[e-kalappai](http://www.thamizha.com/project/ekalappai)或[NHM writer](http://software.nhm.in/products/writer)等软件。或者，您可以使用[Google IME](http://www.google.lk/inputtools/windows/)等在线转换器。

我建议你放弃 Bamini 并继续使用 Unicode 字体。如果您坚持使用 usinb Bamini，那么您应该在 Bamini 和 Unicode 之间进行代码级编码更改。[查看用 Java 编写的这个类](https://github.com/mayooresan/Android-Tamil/blob/master/src/com/mayuonline/tamildemo/TamilFontUtil.java)，看看它是如何完成的。你必须做这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:39:14.070

这对我来说没有问题，它会为我返回 unicode 文本，我把它放在答案中，因为我无法在评论中添加图像。见下图。

![在此处输入图像描述](../Images/aa065938155a1f8f102e146f338632f4.png)

# php - 如何在 phpunit 中断言 Yii 日志消息

> ID：15599693
> 
> 赞同：2
> 
> 时间：2013-03-24T14:30:24.777
> 
> 标签：php, unit-testing, yii, phpunit

Yii 已经构建了日志系统。在某些情况下，我想确保日志记录正确完成，即正确的消息被记录为“错误”或“警告”。如何从 phpunit 测试用例中读取这些消息？

示例代码：

```
public function actionDownload($id)
{
    $order = self::$dic->get('StoreOrder')->findByPk($id);
    $logged = Yii::app()->user->getState('usermodel');
    if(!isset($order->id_user))
    {
        Yii::log("could not get user id from order $id","error");
        return false;
    }
    if(!isset($logged->id_user))
    {
        Yii::log("could not get user id from from session","error");
        return false;
    }
    # other code...
} 
```

我需要检查`Yii::log`在特定测试条件下是否触发了正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:58:13.083

您可能需要创建一个新的自定义`CLogRoute`（我们称之为`CTestLogRoute`），它执行类似于将日志消息推送到内部数组的操作。然后添加一些方法来检索推送到内部数组（我们称之为`getLastLogEntry()`）的最后一条日志消息，您可以在`assert()`语句中使用它。

您可以像这样将特殊的日志路由添加到您的单元测试`config`文件中：

```
'components'=>array(
  'log'=>array(
    'class'=>'CLogRouter', 
    'routes'=>array(
       array(
         'class'=>'CTestLogRoute', // custom log router which will save the messages
         'levels'=>'info, error, warning', // select the level you want piped in here
       ),
    ),
 ), 
```

然后在您的单元测试中，您可以执行以下操作：

```
foreach (Yii::app()->log->routes as $route)
  if ($route instanceof CTestLogRoute) // find our log route
    $lastLogValue = $route->getLastLogEntry(); // get the last entry
$this->assertEquals('Expected last log value',$lastLogValue); 
```

我还没有尝试过，但它应该工作得很好。我喜欢甚至测试错误日志条目的野心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:37:59.723

有一篇 wiki 文章准确描述了您在此处必须执行的操作：

[http://www.yiiframework.com/wiki/340/access-log-output-from-unit-tests](http://www.yiiframework.com/wiki/340/access-log-output-from-unit-tests)

# c# - 动态滚动列表 在 XNA

> ID：15599705
> 
> 赞同：5
> 
> 时间：2013-03-24T14:31:23.713
> 
> 标签：c#, windows-phone-7, xna

我正在尝试垂直滚动一系列矩形。每个矩形与下一个矩形有固定的距离。第一个矩形不得低于屏幕顶部 10 像素，而最后一个矩形不得高于文本框 20 像素。换句话说，我在模仿 Windows Phone 中的 SMS 应用程序。

理论上，下面的方法应该动态地滚动矩形，虽然它确实如此，但在某些情况下，一些矩形彼此之间的距离比它们应该的更近（最终重叠）。当屏幕上的轻弹缓慢时，效果似乎被放大了。

```
private void Flick()
{
    int toMoveBy = (int)flickDeltaY;
    //flickDeltaY is assigned in the HandleInput() method as shown below
    //flickDeltaY = s.Delta.Y * (float)gameTime.ElapsedGameTime.TotalSeconds;

    for (int i = 0; i < messages.Count; i++)
    {
        ChatMessage message = messages[i];
        if (i == 0 && flickDeltaY > 0)
        {
            if (message.Bounds.Y + flickDeltaY > 10)
            {
                toMoveBy = 10 - message.Bounds.Top;
                break;
            }
        }
        if (i == messages.Count - 1 && flickDeltaY < 0)
        {
            if (message.Bounds.Bottom + flickDeltaY < textBox.Top - 20)
            {
                toMoveBy = textBox.Top - 20 - message.Bounds.Bottom;
                break;
            }
        }
    }
    foreach (ChatMessage cm in messages)
    {
        Vector2 target = new Vector2(cm.Bounds.X, cm.Bounds.Y + toMoveBy);
        Vector2 newPos = Vector2.Lerp(new Vector2(cm.Bounds.X, cm.Bounds.Y), target, 0.5F);
        float omega = 0.05f;
        if (Vector2.Distance(newPos, target) < omega)
        {
            newPos = target;
        }
        cm.Bounds = new Rectangle((int)newPos.X, (int)newPos.Y, cm.Bounds.Width, cm.Bounds.Height);
    }
} 
```

我真的不了解向量，所以如果这是一个愚蠢的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T08:19:14.920

我并不完全了解您要达到的目标。但是我在您的代码中发现了一个问题：您的线性插值 ( `Vector2.Lerp`) 没有真正意义（或者我错过了什么？）：

```
Vector2 target = new Vector2(cm.Bounds.X, cm.Bounds.Y + toMoveBy); // <-- the target is Y-ToMoveBy different from the actual Y position
Vector2 newPos = Vector2.Lerp(new Vector2(cm.Bounds.X, cm.Bounds.Y), target, 0.5F); // <-- this line is equivalent to say that newPos will be new Vector2(cm.Bounds.X, cm.Bounds.Y + toMoveBy / 2);
float omega = 0.05f;
if (Vector2.Distance(newPos, target) < omega) // So the only chance to happen is toMoveBy == 0.10 ??? (because you modify `cm` each time `Flick()` is called ? - see next line) 
{
    newPos = target;
}
cm.Bounds = new Rectangle((int)newPos.X, (int)newPos.Y, cm.Bounds.Width, cm.Bounds.Height); // <-- Equivalent to  new Rectangle((int)cm.Bounds.X, (int)cm.Bounds.Y + toMoveBy / 2, ...) 
```

# android - 使统一的图像视图出现在嵌套的线性布局对象中

> ID：15599710
> 
> 赞同：0
> 
> 时间：2013-03-24T14:31:49.590
> 
> 标签：android, android-layout, android-xml

我正在使用一系列带有 TextView 对象的 ImageButtons 作为标题。我想以统一的大小显示图像，填充屏幕的宽度（UI 被强制进入横向模式）。我的 XML 布局包括以下内容：

```
 <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/imageButtonHolidays"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/holidays"
                android:gravity="center"
                android:onClick="chooseType"
                android:scaleType="fitCenter"
                android:src="@drawable/hagim" />

            <TextView
                android:id="@+id/EditTextHoliday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:inputType="none"
                android:onClick="chooseType"
                android:background="@color/White"
                android:textColor="@color/Black"
                android:text="@string/holidays" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/imageButtonPeople"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/people"
                android:gravity="center"
                android:onClick="chooseType"
                android:scaleType="fitCenter"
                android:src="@drawable/people" />

            <TextView
                android:id="@+id/editTextPeople"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:inputType="none"
                android:onClick="chooseType"
                android:background="@color/White"
                android:textColor="@color/Black"
                android:text="@string/professions" />

        </LinearLayout>

    </LinearLayout> 
```

据我所知，两个垂直的 LinearLayout 对象包含配置了完全相同参数的对象，除了文本和实际的图像对象。图像对象的大小完全相同。尽管如此，用户界面显示以下内容：

![截屏](../Images/b6081cf775452b639e7a55024bd17970.png)

任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:59:35.963

对 ImageButton 的宽度进行硬编码会产生所需的效果。不像我想要的那样优雅或灵活，但它可以在多个平台上运行，所以我想我可以接受它。

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="@dimen/chooser_bottom_margin"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/imageButtonVegFruit"
                android:layout_width="200dp"
                android:layout_height="150dp"
                android:layout_gravity="center"
                android:contentDescription="@string/vegetables"
                android:gravity="center"
                android:onClick="chooseType"
                android:scaleType="fitCenter"
                android:src="@drawable/fruitveg" />

            <TextView
                android:id="@+id/EditTextVegFruit"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@color/White"
                android:gravity="center_horizontal"
                android:inputType="none"
                android:onClick="chooseType"
                android:text="@string/VegFruit"
                android:textColor="@color/Black" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="@dimen/chooser_bottom_margin"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/imageButtonClothes"
                android:layout_width="200dp"
                android:layout_height="150dp"
                android:layout_gravity="center"
                android:contentDescription="@string/clothing"
                android:gravity="center"
                android:onClick="chooseType"
                android:scaleType="fitCenter"
                android:src="@drawable/clothes" />

            <TextView
                android:id="@+id/EditTextClothes"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@color/White"
                android:gravity="center_horizontal"
                android:inputType="none"
                android:onClick="chooseType"
                android:text="@string/clothing"
                android:textColor="@color/Black" />
        </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:07:21.137

您可以使用`weights`来避免这种情况。您必须将两者的宽度设置`LinearLayouts`为 0dp 并将权重设置为 1。现在两个子视图将占据父视图宽度的各 50%（这是`LinearLayout`我假设的。否则这将不起作用）。

```
 <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/imageButtonHolidays"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/holidays"
                android:gravity="center"
                android:onClick="chooseType"
                android:scaleType="fitCenter"
                android:src="@drawable/hagim" />

            <TextView
                android:id="@+id/EditTextHoliday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:inputType="none"
                android:onClick="chooseType"
                android:background="@color/White"
                android:textColor="@color/Black"
                android:text="@string/holidays" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/imageButtonPeople"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/people"
                android:gravity="center"
                android:onClick="chooseType"
                android:scaleType="fitCenter"
                android:src="@drawable/people" />

            <TextView
                android:id="@+id/editTextPeople"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:inputType="none"
                android:onClick="chooseType"
                android:background="@color/White"
                android:textColor="@color/Black"
                android:text="@string/professions" />

        </LinearLayout>

    </LinearLayout> 
```

# java - 处理连接问题 HttpsURLConnection

> ID：15599713
> 
> 赞同：0
> 
> 时间：2013-03-24T14:32:01.783
> 
> 标签：java, android, http, rest, https

我有一个简单的客户端-服务器应用程序，它通过 REST API 下载文件。当我使用基本的 http auth 时，文件是通过 ssl 发送的。

```
//my download loop
HttpsURLConnection conn;
//some handling of response codes and content-length
InputStream s = conn.getInputStream();
while (true) {
        i = br.read(buffer); //if server shuts down, I stall here
        if (i == -1)
            break;
        downloadedSize += i;
        fis.write(buffer, 0, i);

    } 
```

在代码遇到服务器关闭文件传输的情况之前，这一切都可以正常工作并且没有问题。那时代码只是停滞不前，我有一个无用的线程。

我的问题是如何检测服务器已关闭？在 Wireshark 中，我看到发送了一个 RST 信号，但没有引发异常。在我看来，这似乎是一项相当普遍的任务，但我还没有找到一个直接的答案。

目前我正在使用计划任务，该任务不时检查是否有任何下载进度。如果它检测到问题，那么它会创建一个新的 workerThread 并告诉我的通信服务使用那个。

这是一个非常丑陋的解决方案，因为线程可能最终成为孤立的。

我尝试使用 available() 来查看是否有任何可用数据，但由于这是 SSL，它总是返回 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:00:37.673

原来我一直在打电话 conn.setReadTimeout(5000); 在错误的地方

```
conn = getConnection(address);
    conn.setReadTimeout(5000);
    conn.setRequestMethod("GET"); 
```

这将导致 read() 正确失败。

# c++ - 链接/运行时不同 GCC 版本的风险？

> ID：15599714
> 
> 赞同：22
> 
> 时间：2013-03-24T14:32:02.097
> 
> 标签：c++, linux, c++11, libstdc++, icc

我正在使用 Intel 的 C++ 编译器，它在 Linux 上依赖于 GNU 提供的 libc.so 和 libstdc++.so。

这是我的问题。要访问一些最新的 C++11 功能，我需要使用 GCC 4.7 或更高版本附带的 libstdc++。但我坚持使用 CentOS 6.4。

在 CentOS 6.4 上，GCC 的原生版本是 4.4。但是使用一个名为“SCL”的 RedHat 和一个名为“devtoolset-1.1”的包，我可以在“/opt”下安装 GCC 4.7。

我以上述方式设置为使用 GCC 4.7，我可以使用较新的 C++11 功能。

所以这是我的问题：如果用户在库路径中仅使用 GCC 4.4 版本的 libc.so / libstdc++.so 运行我的程序，是否存在由于 4.4 和 4.7 版本之间不匹配而导致我的程序出现错误的风险那些图书馆？

如果存在潜在问题，我可以通过静态链接 GCC 4.7 的 libc 和 libstdc++ 版本来解决它吗？或者，如果/当我的代码动态加载的其他库选择系统范围的 GCC 4.4 包提供的较旧的 libc / libstdc++ 时，是否会为其他问题做好准备？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-24T18:04:21.877

**正如 Praetorian 在下面的评论中指出的那样，使用 devtoolset 实际上解决了我最初在这个答案中描述的问题。我已经更正了答案。**

> 由于这些库的 4.4 和 4.7 版本之间存在一些不匹配，我的程序是否存在错误的风险？

是的。100% 不支持链接到较新的 libstdc++.so，然后尝试运行较旧的 libstdc++.so。如果程序中的任何对象或它使用的任何库都使用 GCC 4.7 编译*并链接到 4.7 中的 libstdc++.so，*那么您需要在运行时使用 4.7（或更高版本）中的 libstdc++.so。它甚至可能不会运行，但如果运行，可能会由于不兼容而出现无声错误。但这对您来说不是问题，因为您没有链接到 GCC 4.7 的 libstdc++.so，请参见下文。

> 我可以通过静态链接 GCC 4.7 的 libc 和 libstdc++ 版本来解决这个问题吗？

1）您只需要为 libstdc++ 执行此操作，因为没有“GCC 4.7 的 libc 版本”之类的东西。Glibc 是一个完全独立于 GCC 的项目。当您使用 GCC 4.7 时，您没有使用不同的 libc，您仍在使用 CentOS 6.4 中的系统 libc。（顺便说一句，请注意，glibc 维护人员强烈建议不要静态链接 glibc，并且 glibc 的某些功能在静态链接时将不起作用。）

2) 静态链接 libstdc++ 可以解决该问题，但您不需要这样做，因为无论如何[Red Hat Developer Toolset](https://access.redhat.com/documentation/en/red-hat-developer-toolset/) (devtoolset) 就是为您做的。devtoolset 的全部意义在于它允许您使用更新的 GCC 和更新的 libstdc++，但不会在更新的 libstdc++ 库上创建任何运行时依赖项。编译的可执行文件只需要 libstdc++.so 的系统版本，它始终存在于 RHEL/CentOS 上，即使是没有安装 devtoolset 的系统。（devtoolset 所做的是将所有新的 libstdc++ 功能打包到一个静态库中，调用该库`libstdc++_nonshared.a`以使系统 libstdc++.so 中不存在的所有部分都静态链接，而其他所有内容都来自系统 libstdc++.so）。

如果您没有使用 devtoolset，那么另一种选择而不是静态链接 libstdc++ 将是与您的代码一起发布较新的 libstdc++.so 并确保首先找到它（例如，通过将您的代码与引用较新的 libstdc++.so 的 RPATH 链接）。但是使用 devtoolset 就没有必要了。

> 或者，如果/当我的代码动态加载的其他库选择系统范围的 GCC 4.4 包提供的较旧的 libc / libstdc++ 时，是否会为其他问题做好准备？

使用 devtoolset 时不会出现这样的问题，因为您总是使用较旧的 libstdc++，因此永远不会发生冲突。

# mongodb - mongoimport 期间出错

> ID：15599716
> 
> 赞同：10
> 
> 时间：2013-03-24T14:32:10.550
> 
> 标签：mongodb

我有几个有效的 JSON 文档，我尝试将它们导入 mongodb。

```
{ "Books":
  [{ "ISBN":"ISBN-0-13-713526-2",
  "Price":85,
  "Edition":3,
  "Title":"A First Course in Database Systems",
  "Authors":[ {"First_Name":"Jeffrey", "Last_Name":"Ullman"},
              {"First_Name":"Jennifer", "Last_Name":"Widom"} ] }
,
{ "ISBN":"ISBN-0-13-815504-6",
  "Price":100,
  "Remark":"Buy this book bundled with 'A First Course' - a great deal!",
  "Title":"Database Systems:The Complete Book",
  "Authors":[ {"First_Name":"Hector", "Last_Name":"Garcia-Molina"},
              {"First_Name":"Jeffrey", "Last_Name":"Ullman"},
              {"First_Name":"Jennifer", "Last_Name":"Widom"} ] }],
"Magazines":
[{ "Title":"National Geographic",
  "Month":"January",
  "Year":2009 }
,
{ "Title":"Newsweek",
  "Month":"February",
  "Year":2009 },
{"Title": "Newsweek"}]
} 
```

我收到以下错误：

> Sun Mar 24 15:23:27 异常：提供的 JSON 的 BSON 表示太大：解析 JSON 字符串附近失败：“Month”：“J Sun Mar 24
> 
> 15:23:27 异常：提供的 JSON 的 BSON 表示太大：解析 JSON 字符串附近失败：“Year”：200 Sun Mar 24 15:28:23
> 
> 错误：遇到28个错误

有人可以说有什么问题吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-24T16:32:20.213

默认情况下`mongoimport`，每个文档都将位于 JSON 文件的单行上。您需要使用您正在使用的格式，或者只是确保单个文档的所有数据都在一行上`--jsonArray`。`mongoimport`

（我按原样保存了您的文件，添加了`--jsonArray`, 选项并且效果很好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:04:39.250

MongoDB 每个文档的限制为 16 MB。如果你想克服这个限制，你需要使用`GridFS`. [请在此处](http://docs.mongodb.org/manual/applications/gridfs/)查看文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-30T08:58:54.613

来自终端的以下命令对我很有用：

```
mongoimport -d my_db -c my_collection < my_json_file.json --batchSize 1 
```

某些版本需要更改`--batchSize`50 而不是 1，如下所示：

```
mongoimport -d my_db -c my_collection < my_json_file.json --batchSize 50 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T13:02:20.227

如果你想导入 json 文件，你也可以使用它

也可用于 csv`--type csv`

```
mongoimport --db database --collection collection_name filename.json --type json 
```

# r - 成对图中的着色点

> ID：15599717
> 
> 赞同：11
> 
> 时间：2013-03-24T14:32:12.217
> 
> 标签：r, plot

我想根据某些行索引为配对图中的点着色。这是我用于绘制 1 个变量与另一个变量的代码。

```
cases<-which(rownames(data_no_na) %in% colnames(tumor_data))
controls<-which(rownames(data_no_na) %in% colnames(control_data))

plot(y=range(pca[,1]),x=range(pca[,2]),type='n',xlab="Principle Component 2",ylab="Principle Component 1", main="Iterative Thresholding Sparse PCA")

points(y=pca[cases,1], x=pca[cases,2], col = 'red' )
points(y=pca[controls,1], x=pca[controls,2], col = 'blue' ); 
```

一个简单的配对图类似于：

```
pairs(pca[,1:3]) 
```

编辑：示例：

```
cases<-1:10
controls<-11:20

pca<-matrix(c(rnorm(3*10,0,1),rnorm(3*10,5,1)),nrow=20,ncol=3) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-24T15:08:14.623

像这样的东西？

```
cols <- character(nrow(iris))
cols[] <- "black"

cols[iris$Species %in% c("setosa","versicolor")] <- "blue"
cols[iris$Species == "virginica"] <- "red"
pairs(iris,col=cols) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-07T02:39:25.280

我不确定@Roland 的答案是否适用于某些版本，但至少在我的 Windows R 3.4.2 中，它没有。

函数对有[许多参数](https://www.rdocumentation.org/packages/graphics/versions/3.4.3/topics/pairs)。其中一些用于指示映射到对角线、上面板和下面板的功能。默认情况下，它使用绘图（点）函数。

此函数有一个参数`bg`用于指定接受它的标记的填充颜色，例如`pch = 21`.

此外，使用 unclass 可以更有效地完成颜色映射。例如，使用两级因子变量：

```
colors <- c('black', 'red')[unclass(factor_variable)] 
```

然后，这很神奇：

```
pairs(data, bg=colors) 
```

# javascript - 在索引内的页面（实时）上立即加载方法

> ID：15599722
> 
> 赞同：0
> 
> 时间：2013-03-24T14:32:46.187
> 
> 标签：javascript, jquery, jquery-mobile

我`niceScroll.js`在我的移动页面中使用小的漂亮滚动条。电话很简单：

```
$("#myPage").niceScroll(); 
```

因为我使用的是 Jquery Mobile，所以对于每个应该滚动的页面，我都以这种方式开始：

```
$('#pageID').live('pageshow', function (event, ui) {
            $("#test1").niceScroll();
          }); 
```

但问题是，为了创建弹出窗口，我使用了一些获取 ID 并将其显示为弹出窗口的方法，所以我在 index.html 页面中编写了这个**页面**。

```
<div id="popUpPage"> 
 // come code...
 </div> 
```

问题是我没有如何检测页面的加载，所以在`onClick`我启动计时器后 1 秒......然后启动它。

```
 setTimeout(function () { $("#popUpPage #trt").niceScroll(); },1000); 
```

问题是有时我需要 1 秒，有时在其他设备中需要 2 秒......当它开始立即更改页面时。我怎样才能午餐这个页面并在弹出窗口出现后立即启动我的功能并将页面的语法保存在`index.html`

# php - 更新sql表

> ID：15599723
> 
> 赞同：0
> 
> 时间：2013-03-24T14:32:59.273
> 
> 标签：php, html, mysql, sql, sql-update

每当我尝试使用以下代码更新表单时，更新都会静默，标题字段中的 0 值和内容字段中的先前值。有人可以帮忙吗！！！

# 管理类.php

## 更新功能

```
 if( $form_title && $form_content ){
       $sql = "UPDATE home_page
       SET title = '{$form_title}' AND content = '{$form_content}' WHERE id = {$id}";
       echo $sql;
       $result = $this->mysqli->query( $sql );
       if(!$result){
         echo 'Error'. mysqli_error();
         return;
       }else{
         $this->success_message = "Update Successfull";
         return;
       }
    } 
```

# admin.php 查看页面

```
if( isset( $_POST['update'] ) ){
   $admin_obj->update($_POST, $id);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:35:24.227

MySQL 默默地转换您的`UPDATE`语句并执行布尔运算。服务器读取更新语句为

```
UPDATE home_page
SET title = ('{$form_title}' AND (content = '{$form_content}')) 
WHERE id = {$id} 
```

您要做的是替换`AND`into`,`以使其工作。

```
UPDATE home_page
SET title = '{$form_title}', content = '{$form_content}'
WHERE id = {$id} 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# python - 如何在 Python 中查找所有出现的模式及其索引

> ID：15599726
> 
> 赞同：4
> 
> 时间：2013-03-24T14:33:30.537
> 
> 标签：python, regex, string, shortcut

是否有pythonian或速记方法可以从字符串及其索引中获取所有模式出现？我可以写一个方法来做到这一点，我只是想知道是否有一个超短的单线或什么的:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T14:37:50.957

python[`re`](http://docs.python.org/2/library/re.html)模块来救援。

```
>>> import re
>>> [x.start() for x in re.finditer('foo', 'foo foo foo foo')]
[0, 4, 8, 12] 
```

[`re.finditer`](http://docs.python.org/library/re.html#re.finditer)返回一个[generator](http://wiki.python.org/moin/Generators)，这意味着您可以在 a中使用而不是使用[列表理解](http://carlgroner.me/Python/2011/11/09/An-Introduction-to-List-Comprehensions-in-Python.html)`for-loop`，这将更节省内存。

您可以扩展它以获得给定文本中模式的跨度。即开始和结束索引。

```
>>> [x.span() for x in re.finditer('foo', 'foo foo foo foo')]
[(0, 3), (4, 7), (8, 11), (12, 15)] 
```

Python 不是很棒吗 :) 无法阻止自己引用[XKCD](http://xkcd.com/353/)、否决票或不反对票...

![在此处输入图像描述](../Images/7a2c0f279849e884055764934e908869.png)

# google-maps - Markerclusterer 和 infowindow v3 无法正常工作

> ID：15599730
> 
> 赞同：1
> 
> 时间：2013-03-24T14:34:06.237
> 
> 标签：google-maps, google-maps-api-3, infowindow, markerclusterer

我已经使用来自谷歌的示例代码作为markerclusterer。我添加了一个代码来在markerclusterer v3的信息窗口中显示标记的坐标，但问题是它只将最后一个标记latlang加载到窗口中：任何人都可以帮助解决这个问题。

```
 function initialize() {
    var center = new google.maps.LatLng(37.4419, -122.1419);
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 3,
      center: center,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
    });

    var markers = [];
    for (var i = 0; i < 100; i++) {
      var dataPhoto = data.photos[i];
      var latLng = new google.maps.LatLng(dataPhoto.latitude,
          dataPhoto.longitude);
      var info = dataPhoto.photo_id;
      var marker = new google.maps.Marker({
        position: latLng

      });

    google.maps.event.addListener(marker, 'click', function() {

    infowindow.setPosition(latLng);
    infowindow.setContent(latLng.toString()); 

    infowindow.open(map,marker);

    });
      markers.push(marker);

    }

    var markerCluster = new MarkerClusterer(map, markers);
  }

  google.maps.event.addDomListener(window, 'load', initialize);

  var infowindow = new google.maps.InfoWindow(
  { 
  size: new google.maps.Size(150,50)
  });

</script>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:10:53.190

在这里，我使用提供的提示 @geocodezip 找到了答案。事件 addListener 应更改如下：

```
 google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(marker.position.toString());
      infowindow.open(map, marker);
    }
  })(marker, i)); 
```

# class - 我应该类包含另一个对象还是子类另一个类？有还是有？

> ID：15599731
> 
> 赞同：0
> 
> 时间：2013-03-24T14:34:15.197
> 
> 标签：class, subclass, hierarchy

我正在制作一个程序来研究国际象棋的开局、陷阱和其他相关的事情。它有一个类 MoveSequence，它基本上是来自 ChessPosition 类的对象的有序列表。我还有一个 ChessOpening 类，它有一系列动作和一个名称、一个 ECO 代码（国际象棋开局分类系统）以及可能更多的东西。

我应该将 ChessOpening 实现为 MoveSequence 的子类，还是应该只包含一个 MoveSequence 对象？同样的问题也适用于 ChessTrap 类。

不要认为我在这个简单的问题中选择什么很重要。但是我想学习这些东西，所以我想知道在做出这样的决定时是否应该考虑一些原则或经验法则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:02:43.320

我的 0.02 美元价值：

如果一个可能的子类基本上不共享其超类的**所有**属性和方法，我开始怀疑。

重写方法来改变行为，或者添加新的属性和方法是正常的。但是，当某些超类属性/方法不适用于子类时，当您遇到这种尴尬时，它会变得令人毛骨悚然。（那你会怎么做，只是忽略无效/不适当的部分？希望没有人打电话给他们？把它们存根并在使用它们时引发错误？）

如果 xxx 不是真正的 yyy，也许 xxx 和 yyy 都是 zzz 的。（或者如果他们只是共享共同的行为，也许可以创建一个要包含的模块，这是标准的 Ruby/Rails 实践。）

一个真正的计算机科学家可能有一个更简洁和明确的答案......

# c# - MVC4 路由为 /{controler}-{id} 而不是 /{controler}/{id}

> ID：15599743
> 
> 赞同：0
> 
> 时间：2013-03-24T14:35:39.227
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, url-rewriting, asp.net-mvc-routing

在我的工作中，我必须解决一个 URL 重写问题。我必须使用 URL 作为模板：

```
{controller}/{action}-{id} 
```

代替

```
{controller}/{action}/{id} 
```

所以处理后的 url 应该是这样的：

```
myController/myAction-128 
```

其中 128 是一个参数

我的路线图：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );

            routes.MapRoute(
                name: "NewRoute", // Route name
                url: "{controller}/{action}-{id}/{extId}", // URL with parameters
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional, extId = UrlParameter.Optional } // Parameter defaults
            );
        } 
```

控制器代码：

```
[HttpGet]
        public ActionResult DocumentDetails(int? id)
        {
            if (doc.HasValue)
            {
              ...
            }
        } 
```

这条路线没有提供任何成功的结果。我仍然有 404 错误。当我使用 / 而不是“-”时，一切正常，但我的 JS View 环境无法正常工作。

我能做些什么来解决这个问题吗？所有帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:37:08.480

路线的评估顺序与您定义它们的顺序相同，因此请确保您遵守相同的顺序。`id`还为（例如作为数字）添加约束将有助于路由引擎消除您的路由的歧义。更不用说在您的示例中您已将 id 令牌设为可选，这当然是不可能的，只有路线的最后一部分可以是可选的。

所以：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "NewRoute",
        url: "{controller}/{action}-{id}/{extId}",
        defaults: new { controller = "Home", action = "Index", extId = UrlParameter.Optional },
        new { id = @"\d+" }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:39:54.137

我认为您的请求正在由第一个路由规则处理，然后 action-id 被视为一个整体操作并且未被找到。

在默认路由之前设置您的 NewRoute。只需将代码向上移动。

# java - JPanel KeyListener 不工作

> ID：15599748
> 
> 赞同：1
> 
> 时间：2013-03-24T14:36:32.270
> 
> 标签：java, swing, jpanel, keylistener, setfocus

```
import javax.swing.*;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

public class AnaPencere{
    JFrame pen;
    AnaPencere(){
        pen = new JFrame("Ana Pencere");
        pen.setSize(613, 253);
        pen.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pen.setLocationRelativeTo(null);
        pen.setResizable(false);
        pen.add(new Cizim());
        pen.setVisible(true);
    }

    private class Cizim extends JPanel{

        private Cizim() {
            this.addKeyListener(new KeyAdapter() {
                @Override
                public void keyReleased(KeyEvent e) {
                    System.out.println(e.getKeyCode());
                }
            });
        }
    }
} 
```

当我运行项目时，一切都按预期工作，但是当我按下一个键时，我没有在控制台中看到预期的结果

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T14:47:22.543

*   添加添加`setFocusable(true)`_`JPanel``KeyListener`

*   也许没有理由寻找`Focus`, `setFocusable`,`KeyBindings`代替

*   在那里您可以以[编程方式设置组件层次结构中的焦点](https://stackoverflow.com/a/15550077/714968)

# c++ - 数组越界时抛出异常

> ID：15599753
> 
> 赞同：5
> 
> 时间：2013-03-24T14:36:54.080
> 
> 标签：c++

我有一个矩阵类，它使用 [][] 来访问元素。当一个（或两个）索引超出范围时，我必须抛出 CIndexException。这是一个以“无效索引 [a][b]”格式存储文本的类，其中 a 和 b 是数字。

这是我当前对 CIndexException 类的实现

```
class CIndexException
{
    string text;
public:
    CIndexException (int a, int b)
    {
        ostringstream oss;
        oss << "Invalid index [";
        oss << a;
        oss << "][";
        oss << b;
        oss < "]";

        text = oss.str();
     }

     string get() const
     {
         return text;
     }
}; 
```

矩阵表示为一个二维数组，它在构造函数中初始化：

```
CMatrix(int r, int c)
{
    colls = c;
    rows = r;
    mat = new double * [rows];

    for (int i = 0; i < rows; i++)
    {
        mat[i] = new double [colls];
        for (int j = 0; j < colls; j++)
            mat[i][j] = 0;
    }
} 
```

为了获得单个元素，我重载了 [] 运算符，如下所示：

```
double * operator[] (int x) const
{
    return mat[x];
} 
```

当我键入 a[2][3] 时，此函数解析第一个 []，返回指向数组的指针，然后像往常一样解析第二个 []。

我可以轻松检查第一个索引是否超出范围，但我无法检查第二个索引。我想创建第二个类 MatrixRow，它代表一行矩阵。然后我会有 MatrixRows 数组。为了使 [][] 工作，这两个类都将重载 operator[]。这样我就可以检查两个索引，但我不知道如何将它们“加入”到一个异常中。使用此设计时如何报告异常对象中的两个索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:44:00.590

使用您的`MatrixRow`解决方案，但将行的索引`MatrixRow`作为构造函数参数传递给每个。可以保存该`MatrixRow`数字，并在它生成的任何异常消息中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:52:57.547

Use `operator()()` instead of `operator[]()`. See this [link](http://www.parashift.com/c++-faq-lite/matrix-subscript-op.html). All what you need this link considers.

# c - Bison 中缀计算器始终计算为 0

> ID：15599755
> 
> 赞同：3
> 
> 时间：2013-03-24T14:37:30.670
> 
> 标签：c, bison, flex-lexer

我正在阅读我在 Internet 上找到的关于 GNU Flex/Bison 的书。这很酷。其中一个示例涉及编写中缀计算器。这很好。

问题是，这本书使用`int`as `YYSTYPE`，这会在例如将 1 除以 2 时产生明显的问题。所以我决定修改程序以改为使用`float`。到目前为止，一切都很好。该程序（源代码如下）编译得很好，但**总是给出 0 的答案**，无论计算是什么。我也不知道如何调试它，因为它显然是生成的代码。

*计算器*

```
 %{
 #include "parser.h"
 %}

 %%

 "+"                        { return ADD; }
 "-"                        { return SUB; }
 "*"                        { return MUL; }
 "/"                        { return DIV; }
 [0-9]+                     { 
                                yylval = atof(yytext); 
                                return NUMBER; 
                            }
 \n                         { return EOL; }
 [ \t]                      { ; }
 .                          { yyerror("Unknown symbol"); }

 %% 
```

*钙质*

```
 %{
 #include <stdio.h>

 #define YYSTYPE float
 %}

 %token NUMBER
 %token ADD SUB MUL DIV
 %token EOL

 %%

 /* List of expressions */
 calclist: 
    | calclist AS_result EOL { printf("%f\n-> ", $2); }
    ;

 /* Add/subtract result. Evaluated after multiply/divide result */
 AS_result: MD_result
    | AS_result ADD MD_result       { $$ = $1 + $3; }
    | AS_result SUB MD_result       { $$ = $1 - $3; }
    ;

 /* Multiply/divide result. Evaluated first. */
 MD_result: NUMBER
    | MD_result MUL NUMBER          { $$ = $1 * $3; }
    | MD_result DIV NUMBER          { $$ = $1 / $3; }
    ;
 %%

 int yyerror(char *msg)
 {
    printf("Error: '%s'\n", msg);
    return 0;
 }

 int main(int argc, char **argv)
 {
    printf("-> ");
    yyparse();
    return 0;
 } 
```

*生成文件*

```
 make: calc.l calc.y
    bison -Wall -o parser.c --defines=parser.h calc.y
    flex -o scanner.c calc.l
    cc -ggdb -o calc scanner.c parser.c -lfl

 clean:
    rm -f parser.c parser.h scanner.c calc.c calc 
```

*示例运行*

```
michael@michael-desktop:~/code/calculator$ ./calc 
-> 1 + 2
0.000000
-> ^C
michael@michael-desktop:~/code/calculator$ 
```

对代码的任何部分以及实际问题的反馈表示赞赏。干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:16:27.610

你是对的，它只适用于除法——奇怪..我没注意到，真丢脸。这是另一件事要尝试：

钙.y：

```
%{
#include <stdio.h>
%}

%union { double d; }

%token <d> NUMBER
%token ADD SUB MUL DIV
%token EOL

%type <d> MD_result AS_result

%% 
```

calc.l：更改行“yylval = atof(yytext);” 和：

```
yylval.d = atof(yytext); 
```

现在它说：

```
-> 1+2
3.000000
-> 2*3
6.000000
-> 4-5
-1.000000
-> 6/4
1.500000 
```

正如预期的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T06:46:13.943

您的建议以及@Michael 对其进行的更正不起作用，因为`#define YYSTYPE`它没有传播到扫描仪。该`%{ %}`块仅用于野牛（好吧，用于生成的解析器），它不会在生成的标头中导出。阅读有关文档`%code`以了解需要做什么：[http](http://www.gnu.org/software/bison/manual/bison.html#g_t_0025code-Summary) ://www.gnu.org/software/bison/manual/bison.html#g_t_0025code-Summary 。在您的情况下，`%code requires`是合适的：

```
%code requires
{
# include <stdio.h>

# define YYSTYPE float
# define YYSTYPE_IS_DECLARED
} 
```

一旦为解析器配备了调试操作，就很容易看出出了什么问题：

```
%debug
%printer { fprintf(yyoutput, "%f", $$); } <> 
```

和

```
int main(int argc, char **argv)
{
  printf("-> ");
  yydebug = !!getenv("YYDEBUG");
  yyparse();
  return 0;
} 
```

你会看到的：

```
Reading a token: -> 1+2
Next token is token NUMBER (0.000000)
Shifting token NUMBER (0.000000)
Entering state 3
Reducing stack by rule 6 (line 28):
   $1 = token NUMBER (0.000000)
-> $$ = nterm MD_result (0.000000)
Stack now 0 1
Entering state 5
Reading a token: Next token is token ADD (0.000000)
Reducing stack by rule 3 (line 22):
   $1 = nterm MD_result (0.000000)
-> $$ = nterm AS_result (0.000000)
Stack now 0 1
Entering state 4
Next token is token ADD (0.000000)
Shifting token ADD (0.000000)
Entering state 6
Reading a token: Next token is token NUMBER (0.000000)
Shifting token NUMBER (0.000000)
Entering state 3
Reducing stack by rule 6 (line 28):
   $1 = token NUMBER (0.000000)
-> $$ = nterm MD_result (0.000000)
Stack now 0 1 4 6
Entering state 11
Reading a token: Next token is token EOL (0.000000)
Reducing stack by rule 4 (line 23):
   $1 = nterm AS_result (0.000000)
   $2 = token ADD (0.000000)
   $3 = nterm MD_result (0.000000)
-> $$ = nterm AS_result (0.000000) 
```

这表明当我输入“1+2”时，它实际上到处都能看到 0.00000。

现在，它是如何对除法“起作用”的？偶然，因为浮点除法和整数除法在位级别非常相似。玩弄以下重复错误的程序：将变量填充为整数，但将它们用作浮点数。

```
#include <stdio.h>

union YYSTYPE
{
  int ival;
  float fval;
};

#define TRY(L, O, R)                            \
  do {                                          \
    union YYSTYPE lhs, rhs, res;                \
    lhs.ival = L;                               \
    rhs.ival = R;                               \
    res.fval = lhs.fval O rhs.fval;             \
    fprintf (stdout, "d. %d %s %d => %f\n",     \
             lhs.ival, #O, rhs.ival, res.fval); \
    fprintf (stdout, "x. %x %s %x => %x\n",     \
             lhs.ival, #O, rhs.ival, res.ival); \
  } while (0)

int main()
{
  TRY(1, /, 2);
  TRY(1, *, 2);
  TRY(1, -, 2);
  TRY(1, +, 2);
  return 0;
} 
```

但是，当然，正确的答案*不是*使用`#define YYSTYPE`，这太粗粒度了，而是使用`%union`，正如@Michael 建议的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T15:36:16.657

在 calc.y 中：添加第二个定义：

```
 %{
 #include <stdio.h>

 #define YYSTYPE float
 #define YYSTYPE_IS_DECLARED
 %} 
```

接着..

```
./calc 
-> 1/3
0.333333 
```

# php - php、jquery、sql。表单验证

> ID：15599759
> 
> 赞同：0
> 
> 时间：2013-03-24T14:37:48.087
> 
> 标签：php, javascript, mysql, validation, post

基本上我有一个使用复选框显示座位计划的页面。可以勾选这些复选框以表示正在预订的座位。我还有一个文本输入，其中输入了预订的名称，然后将这些表格发布到下一页以计算出选中了哪些复选框并将它们保存在数据库中。这是一些代码：

```
 title>School Hall</title>

<script>

        function confirmReservation() {

        var selectedList = getSelectedList('Confirm Reservation');

        if (selectedList) {
            if (confirm('Do you want to CONFIRM this Reservation :  ' + selectedList + '?')) { 
                document.forms[0].statusA.value=0;
                document.forms[0].statusB.value=1;
                document.forms[0].previousPage.value='schoolHall';
                document.forms[0].action='bookingQueries.php';      
                document.forms[0].submit();
            } else {
                clearSelection();
            }
        }
    }

        function cancelReservation() {

        var selectedList = getSelectedList('cancel Reservation');

        if (selectedList) {
            if (confirm('Do you want to CANCEL this Reservation :  ' + selectedList + '?')) { 
                document.forms[0].statusA.value=1;
                document.forms[0].statusB.value=0;
                document.forms[0].previousPage.value='schoolHall';
                document.forms[0].action='bookingQueries.php';
                document.forms[0].submit();
            } else {
                clearSelection();
            }
        }
    }

    function getSelectedList(actionSelected) {

        // get selected list
        var obj = document.forms[0].elements;
        var selectedList = '';
        for (var i = 0; i < obj.length; i++) {
            if (obj[i].checked && obj[i].name == 'seats[]') {
                selectedList += obj[i].value + ', ';
            }
        }

        // no selection error
        if (selectedList == '') {
            alert('Please select a seat ');
            return false;
        } else {
            return selectedList;
        }

    }

    function validateForm()
    {
    var x=document.forms["0"]["fname"].value;
    if (x==null || x=="")
      {
      alert("First name must be filled out");
      return false;
      }
    }

</script>

</head>
<body topmargin="0" leftmargin="0" rightmargin="0"  >
<table>
<tr><td width="100%" align="left" id='table-2'>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<input type="hidden" name="previousPage" value=""/>
<input type="hidden" name="statusA" value=""/>
<input type="hidden" name="statusB" value=""/>
</tr>
<table>
<tr><td width="100%" align=left" id='table-2'>
<INPUT Type="BUTTON" VALUE="Home Page" ONCLICK="window.location.href='/final/homePage.php'" align='lef'>
<INPUT Type="BUTTON" VALUE="Bookings" ONCLICK="window.location.href='/final/schoolHallBookings.php'"> 

<?php

 // Connection
$con = mysql_connect("localhost","root","");
if(!con)
{
die('Could not connect:' . mysql_error());
}

 mysql_select_db("systemDatabase",$con); // Connection to DB

 echo '<br>';  

 echo '<font face="Trebuchet MS" color="Black" size="9" >School Hall </font>';

 $query = "SELECT * from schoolHall order by rowId, columnId"; // Create Select Query
 $result = mysql_query($query); // Retrieve all data from query and hold in $result
 $prevRowId = null;
 $seatColor = null;
 $tableRow = false;

 echo "<table align='center' id='table-2'"; // Create table
 while (list($rowId, $columnId, $status, $updatedby, $firstName, $lastName) = mysql_fetch_row($result)) //      Itterates through fetched data
 {
if ($prevRowId != $rowId) 
{
    if ($rowId != 'A') 
    {
        echo "</tr></table></td>";
        echo "\n</tr>";
    }
    $prevRowId = $rowId;
    echo "\n<tr><td align='center'><table class='center' border='1' cellpadding='15' cellspacing='8'        align='center' id='table-2' ><tr>";
} 
else 
{
    $tableRow = false;
}
if ($status == 0) 
{
    $seatColor = "lightgreen"; // Available
}
 else 
{
    $seatColor = "red"; // Booked
}

echo "\n<td bgcolor='$seatColor' align='center'>";
echo "$rowId$columnId";
if ($status == 0 || ($status == 1)) {
    echo "<input type='checkbox' name='seats[]' value='$rowId$columnId' align='center'></checkbox>"; //   Create Checkboxes giving value RowId, ColumnId
}

    }

 echo "</tr></table></td>";
  echo "</tr>";
 echo "</table>";

 // Con close
 mysql_close();
 ?> 

  <table width='100%' border='0'>
<tr><td align='right'>
  &nbsp;
 &nbsp; First Name: <input type="text" name="fname">
 &nbsp; Last Name: <input type="text" name="lname">
</td>
<td><td align='left'>

</td>
 <td><td align ='right'>

    &nbsp;<input type='button' value='Confirm Reservation' onclick='confirmReservation()'/>  
</td></tr>
<tr>
<td><td align='left'>

</td>
<td><td align='left'>

</td>
 <td align='right'>
    &nbsp;<input type='button' value=' Cancel Reservation' onclick='cancelReservation()'>
   </td>
 </table>
 </td></tr>
 <tr><td width="100%" align="center">

 </td></tr>
  <tr><td>&nbsp;</td></tr>
  <tr><td width="100%" align="center">
<table border="1" cellspacing="6" cellpadding="4" align="center">
    <tr>
        <td bgcolor='lightgreen'>Available</td>
        <td bgcolor='red'>Unavailable</td>
    </tr>
</table>
</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td width="100%" align="center">
</td></tr>
</table>

</body> 
```

有什么办法可以将验证与我当前的代码结合起来吗？我需要检查名称文本以确保确实输入了名称。这需要在访问下一页之前发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:08:07.430

工作示例

[http://jsfiddle.net/](http://jsfiddle.net/)

下面的示例演示了如何将值传递给函数`checkInput`，它将确定它是否是有效输入 - 该函数使用 jQuery，但您也可以在没有 jQuery 的情况下执行此操作。

演示 HTML：

```
<form>
    <input id="first-name" value="some value" />
    <input id="last-name" value="" />
</form> 
```

JS 函数（与 HTML 演示一起使用）：

```
function checkInput(fieldID){
    var isValid = true;

    if($("#" + fieldID).val() == ''){
        isValid = false;
    }

    return isValid;

}

$(document).ready(function(){
    if(!checkInput("first-name")){
        alert("error found with first name");
    }
    if(!checkInput("last-name")){
        alert("error found with last name");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:18:42.603

尝试首先将 ID 添加到您的文本输入中：

```
<table width='100%' border='0'>
  <tr>
    <td align='right'>
      &nbsp;
      &nbsp; First Name: <input type="text" id="fname" name="fname"/>
      &nbsp; Last Name: <input type="text" id="lname" name="lname"/>
    </td>
  <td>
  <td align='left'>

function getSelectedList(actionSelected) {
    // get selected list
    var obj = document.forms[0].elements;
    var selectedList = '';
    for (var i = 0; i < obj.length; i++) {
        if (obj[i].checked && obj[i].name == 'seats[]') {
            selectedList += obj[i].value + ', ';
        }
    }
    var fname = document.getElementById('fname');
    var lname = document.getElementById('lname');
    // no selection error
    if (selectedList == '') {
        alert('Please select a seat ');
        return false;
    } else if (actionSelected.beginsWith('Confirm') &&  (fname .value.replace(/^\s+|\s+$/g, '').length == 0 || /[0-9]/.test(fname))) {
        alert('Please Enter valid first name.');
        return false;
    } else if (actionSelected.beginsWith('Confirm') && (lname.value.replace(/^\s+|\s+$/g, '').length == 0 || /[0-9]/.test(lname))) {
        alert('Please Enter valid last name.');
        return false;
    } else {
        return selectedList;
    }
} 
```

# asp.net-mvc-4 - Database First ID，EmployeeID被称为id

> ID：15599762
> 
> 赞同：2
> 
> 时间：2013-03-24T14:38:03.693
> 
> 标签：asp.net-mvc-4, repository, entity-framework-5, unit-of-work

我有具有不同主 ID 名称的数据库第一实体... EmployeeID、CustomerID 等。我正在尝试构建一个通用存储库和 UoW 并想知道是否有任何方法，而不更改数据库，告诉 UoW 每个主 ID在数据库中，即employeeid 等，只会被称为id？

谢谢

我想我的问题不清楚，所以我将尝试一个我需要做的例子。谢谢你的耐心。

我有 3 个表，客户、订单和 orderdetails，客户表有一个主键字段 CustomerID。orders 表有一个主键字段 OrderID orderdetails 表有一个主键字段 orderdetailsid。

我有 3 个从 edmx 生成的实体，它们代表每个表。

我有一个通用存储库和工作单元来监控保存更改。我想有一个通用的说法，customerid 主键称为 id，orderid 主键也称为 id，最后 orderdetailsid 也称为 id。

我相信使用泛型可以让我创建一个返回主键的接口。

```
 public interface IEntity {
    int Id { get; }
 } 
```

我相信我可以通过设计器中的所有实体并更改主键名称而不会影响数据库，但是当应用程序中可能有这样做的方法时，这将非常耗时。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:38:44.183

根据我的经验，实现这种类型映射的唯一方法是通过使用模型构建器的流畅配置或使用模型上的数据注释 API 设置列名来设置列名

即数据注释

```
[Column("EmployeeId")]
public int ID { get; set; } 
```

或在您的 Context 课程中流利

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{

     modelBuilder.Entity<Person>().Property(e=>e.Id).HasColumnName("EmployeeId");

     base.OnModelCreating(modelBuilder);
} 
```

但这将要求您不使用 edmx 或编写继承的 DbContext 来自定义您可能还想查看实体框架电动工具以消除对设计器的依赖，同时保持您快速生成实体类的能力，这将使您的类更多就映射您的实体而言可定制

在后一种情况下的另一种选择是您可以编写一个 DbConvention 来自定义您的映射以及本文提供了一些为实体框架编写自定义数据库约定的示例[http://msdn.microsoft.com/en-us/data/jj819164.aspx](http://msdn.microsoft.com/en-us/data/jj819164.aspx)

# .net - 如何查看代码的 IL？

> ID：15599764
> 
> 赞同：1
> 
> 时间：2013-03-24T14:38:35.723
> 
> 标签：.net

我有一些 C# .NET 代码，出于好奇，我想看看为它生成的 IL。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:40:08.917

您可以使用[`ILDASM.exe`](http://msdn.microsoft.com/en-us/library/f7dy01k1%28v=vs.80%29.aspx).NET 框架中内置的实用程序。例如，在 Visual Studio 命令提示符下，您可以键入以下内容：

```
ildasm /output:foo.il foo.dll 
```

然后享受包含在您的程序集中的 IL 之美。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:43:36.940

以下是使用`ILDASM.exe`工具的步骤`VS 2010`

[看一看](http://www.ginktage.com/2011/04/display-il-code-in-visual-studio-2010/)

# c - n阶贝塞尔曲线？

> ID：15599766
> 
> 赞同：13
> 
> 时间：2013-03-24T14:38:39.083
> 
> 标签：c, geometry, computational-geometry, bezier, curve

我已经设法实现了二次和三次贝塞尔曲线。它们非常简单，因为我们有一个公式。现在我想使用泛化来表示 n 阶贝塞尔曲线：

![在此处输入图像描述](../Images/e72afcd419579934343797af516d623a.png)

在哪里

![在此处输入图像描述](../Images/52e758ed9730cc3ec0ff94a59f0af31f.png)

和

![在此处输入图像描述](../Images/2d9300dba8a496cd92ab58058b923580.png)

我正在使用位图库来呈现输出，所以这是我的代码：

```
// binomialCoef(n, k) = (factorial(n) / (factorial(k) * factorial(n- k)))
unsigned int binomialCoef(unsigned int n, const unsigned int k)
{
    unsigned int r = 1;

    if(k > n)
        return 0;

    for(unsigned int d = 1; d <= k; d++)
    {
        r *= n--;
        r /= d;
    }

    return r;
}

void nBezierCurve(Bitmap* obj, const Point* p, const unsigned int nbPoint, float steps, const unsigned char red, const unsigned char green, const unsigned char blue)
{
    int bx1 = p[0].x;
    int by1 = p[0].y;
    int bx2;
    int by2;

    steps = 1 / steps;

    for(float i = 0; i < 1; i += steps)
    {
        bx2 = by2 = 0;
        for(int j = 0; (unsigned int)j < nbPoint; j++)
        {
            bx2 += (int)(binomialCoef(nbPoint, j) * pow(1 - i, (float)nbPoint - j) * pow(i, j) * p[j].x);
            by2 += (int)(binomialCoef(nbPoint, j) * pow(1 - i, (float)nbPoint - j) * pow(i, j) * p[j].y);
        }

        bresenhamLine(obj, bx1, by1, bx2, by2, red, green, blue);

        bx1 = bx2;
        by1 = by2;
    }

    // curve must end on the last anchor point
    bresenhamLine(obj, bx1, by1, p[nbPoint - 1].x, p[nbPoint - 1].y, red, green, blue);
} 
```

这是要渲染的一组点：

```
Point ncurv[] = {
                    20, 200,
                    70, 300,
                    200, 400,
                    250, 200
                }; 
```

这是输出：

![在此处输入图像描述](../Images/2db828ca7dcff6028a680310d57b2a93.png)

红色曲线是三次贝塞尔曲线。蓝色的应该是四阶贝塞尔，与三次贝塞尔相同，但在这种情况下，它们不一样？！

**编辑：** 我忘了注意左下角是 (0, 0)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:49:39.713

你的公式中的总和......

![在此处输入图像描述](../Images/9c3ac109a983e789a40cd6e57e1f7417.png)

...从 0 运行到 n，即对于 n 阶贝塞尔曲线，您需要 n+1 点。

你有 4 个点，所以你正在绘制一个三阶贝塞尔曲线。

您的代码中的错误在这里：

```
for(int j = 0; (unsigned int)j < nbPoint; j++) 
```

它应该是：

```
for(int j = 0; (unsigned int)j <= nbPoint; j++) 
```

否则你只是从0迭代到n-1。

![三阶贝塞尔曲线](../Images/51d3ad1525b0459b70957b6b8ed17fa7.png)

编辑：

出于兴趣，您得到的形状与缺失的（第 5 个）点在（0,0）处相同，因为这是唯一对您的总和没有任何贡献的点......

![第 5 个点在原点的 4 阶贝塞尔曲线](../Images/40a098668b0a01374d62cc7917b446a5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T14:54:55.527

您正在尝试仅在四个点上构建四阶贝塞尔曲线。难怪它不起作用。

# c# - 如何在 Visual Studio 2010 中使用 SQL 和 C# 操作 Access 数据库

> ID：15599767
> 
> 赞同：1
> 
> 时间：2013-03-24T14:38:50.933
> 
> 标签：c#, sql, visual-studio-2010, ms-access

我基本上是在尝试在已经连接的 Access 数据库上运行 SQL 命令并显示结果，我已经在数据集的设计视图中构建了一些 SQL 查询，但我无法在主窗体的数据网格上查看它们，使用VS 2010 中的 C#。

如何在连接的 Access 数据库上执行 SQL 命令并在主窗体的数据网格中查看它们？

请帮忙

# css - 替换 Internet Explorer 中的整个 div

> ID：15599774
> 
> 赞同：-2
> 
> 时间：2013-03-24T14:39:52.247
> 
> 标签：css

我已经找到了`<div id="head">`放置我用 CSS 制作的徽标的位置。唯一的问题是它在 Internet Explorer 中不起作用。所以我想问一下，如果在 Internet Explorer 中打开，是否有任何方法可以用另一个 div 替换整个 div。我想`<div id="headIE">`在 Internet Explorer 中使用该徽标的图像打开，而不是使用在其中不起作用的 CSS。

谢谢你。

例如，这将在谷歌浏览器中打开

```
<div id="head"><h1>Logo</h1></div> 
```

但如果它要在 Internet Explorer 中打开，则它不会打开`<div id="head"><h1>Logo</h1></div>`，但它会打开它。

```
<div id="headIE"><h1>Logo</h1></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:47:20.427

您可以像这样使用[条件注释](http://en.wikipedia.org/wiki/Conditional_comment)：

```
<!--[if IE]>
  <div id="headIE"><h1>Logo</h1></div>
<![endif]-->
<!--[if !IE]><!-->
  <div id="head"><h1>Logo</h1></div>
<!--<![endif]--> 
```

但如果你尝试编写适用于所有浏览器的 CSS 会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:44:29.520

以这种方式更改 HTML 元素 ID 是一种跨浏览器兼容性的非常老套的方法。相反，您应该尝试编写适用于您希望支持的不同浏览器的 CSS。如果您有一个标题图像问题的示例，那么 CSS 修复会更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:56:10.020

我用这段代码解决了它：

```
<div id="head">
    <!--[if IE]>
        <img src="hateIE.png" align="middle">
    <![endif]-->
    <!--[if !IE]><!-->
        <h1>Mira's</h1><br>
        <h2>Koding place</h2>
    <!--<![endif]-->
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:46:30.507

对 IE 使用条件注释

```
<!--[if IE]>
Special IE logo
<![endif]-->
<!--[if !IE]> -->
Normal logo
<!-- <![endif]--> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T14:50:06.837

我建议尝试找到适用于 IE 和其他浏览器的解决方案，如何为您的徽标添加图像标签而不是 css + text-indent 替换？但是，如果您真的想要，您可以通过 jQuery 定位 IE 并更改 ID。前任：

```
if($.browser.msie) {
  $('#head').attr('id','headIE');
} 
```

# c++ - 犰狳：matrix.i(true) vs matrix.i()——一个是逻辑错误，另一个不是？

> ID：15599776
> 
> 赞同：1
> 
> 时间：2013-03-24T14:40:03.900
> 
> 标签：c++, armadillo

输入矩阵如下所示：

```
[ 1 2 4 ]
[ 4 5 6 ]
[ 7 8 9 ] 
```

（垫子1）

[Wolfram Alpha 证实它有一个逆。](http://www.wolframalpha.com/input/?i=%5B%5B1%2C+2%2C+4%5D%2C+%5B4%2C+5%2C+6%5D%2C+%5B7%2C+8%2C+9%5D%5D+inverse)使用`matrix.i()`（这意味着它使用快速反转）产生近似正确的结果

```
[  1.0000 -4.6667  2.6667 ]
[ -1.0000  6.3333 -3.3333 ]
[  1.0000 -2.0000  1.0000 ] 
```

(垫子2)

但是通过写入打开慢速模式`matrix.i(true)`会导致它抛出一个`logic_error`. **有什么理由这样做吗？**

我试图打开它的原因是将倒置矩阵乘以向量

```
[ 15 ]
[ 24 ]
[ 35 ] 
```

（垫子3）

产生一个不正确的答案

```
[ -3.6667 ]
[ 20.3333 ]
[  2.0000 ] 
```

(mat4)

[什么时候应该是这个](http://www.wolframalpha.com/input/?i=%28inverse+of+%5B%5B1%2C+2%2C+4%5D%2C+%5B4%2C+5%2C+6%5D%2C+%5B7%2C+8%2C+9%5D%5D%29+%2a+%5B%5B15%2C+24%2C+35%5D%5D)，或者

```
[ -3.6667 ]
[  5.3333 ]
[  2.0000 ] 
```

(mat5)

在乘法之前检查确认输入*(mat3)*是正确的，这让我相信快速逆运算创建了一个不正确的矩阵作为输出*(mat4 而不是 mat5)*。

...现在想起来，快速逆是正确的，没有理由不正确...这是一个难题。

主要问题是，如上所述，

**任何原因`matrix.i(true)`都会导致逻辑错误，而`matrix.i()`不会？**

# awk - awk：CJK 字符有什么问题？＃韩国人

> ID：15599781
> 
> 赞同：0
> 
> 时间：2013-03-24T14:40:20.383
> 
> 标签：awk, cjk, word-frequency

**给定一个 .txt 文件**，其中包含空格分隔的单词，例如：

```
But where is Esope the holly Bastard
But where is 생 지 옥 이 군
지 옥 이
지 옥
지
我 是 你 的 爸 爸 ！
爸 爸 ！ ！ ！
你 不 會 的 ！ 
```

和**awk 函数**：

```
cat /pathway/to/your/file.txt | tr ' ' '\n' | sort | uniq -c | awk '{print $2" "$1}' 
```

我在控制台中得到**以下输出，这****对韩语单词无效**（对英语和中文空格分隔的单词有效）

```
생 16
Bastard 1
But 2
Esope 1
holly 1
is 2
the 1
where 2
不 1
你 2
我 1
是 1
會 1
爸 4
的 2 
```

**如何让它适用于韩语单词？** 注意：我实际上有 300.000 行和近 200 万字。

* * *

编辑：使用的答案：

```
$ awk '{a[$1]++}END{for(k in a)print a[k],k}' RS=" |\n" myfile.txt | sort > myfileout.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:55:05.470

单个`awk`脚本可以轻松处理此问题，并且比您当前的管道效率更高：

```
$ awk '{a[$1]++}END{for(k in a)print k,a[k]}' RS=" |\n" file 
옥 3
Bastard 1
！ 5
爸 4
군 1
지 4
But 2
會 1
你 2
the 1
是 1
不 1
이 2
Esope 1
的 2
holly 1
where 2
생 1
我 1
is 2 
```

如果要将结果存储到另一个文件中，可以使用重定向，例如：

```
$ awk '{a[$1]++}END{for(k in a)print k,a[k]}' RS=" |\n" file > outfile 
```

# iphone - 使用 iOS 越狱应用收听来电短信

> ID：15599785
> 
> 赞同：0
> 
> 时间：2013-03-24T14:41:07.580
> 
> 标签：iphone, ios, jailbreak

有谁知道如何在越狱的 iOS 上收听传入的短信？我想在其内容中搜索给定的字符串，并在匹配时显示警报。

谢谢，帕特里克

# android - 不提供任何加密的开源 android VoIP 客户端

> ID：15599791
> 
> 赞同：1
> 
> 时间：2013-03-24T14:41:45.300
> 
> 标签：android, voip

是否有任何不提供加密的开源 android VoIP 客户端？我的项目需要它。我必须加密它的数据。

# c - Makefile - 错误的编译顺序

> ID：15599792
> 
> 赞同：1
> 
> 时间：2013-03-24T14:41:45.720
> 
> 标签：c, makefile

在下面的 makefile 中，我试图编译一个目录，但 make 违背我的意愿试图以错误的顺序进行。它从编译 main.o 开始，然后直接编译控制台。我不知道为什么它不尝试解决它之前的所有依赖关系。我只是得到：

```
user@ubuntu:~/Dokumenty/Sysopy/cw1/zad3b$ make 
gcc -c -Wall -I ./src/include src/main.c 
gcc  -o macierze main.o 
main.o: In function `main': 
main.c:(.text+0x28): undefined reference to `wczytaj' 
main.c:(.text+0x31): undefined reference to `wczytaj' 
main.c:(.text+0x7e): undefined reference to `suma' 
...
collect2: ld returned 1 exit status make: *** [console] Błąd 1 
```

这是一个生成文件：

```
############ makra #############
CC = gcc
CFLAGS = -Wall -I ./src/include
LFLAGS = 
VPATH = ./src/operacje: ./src/we_wy: ./src/reszta

########### pliki ##############
SRC_CONSOLE = wczytaj_konsola.c wypisz_konsola.c
SRC_FILE        = wczytaj_plik.c wypisz_plik.c pliki.c
SRC_FUNCTION    = suma.c roznica.c iloczyn.c macierz.c
HEADERS     = suma.h roznica.h iloczyn.h wypisz.h wczytaj.h macierz.h
OBJ_SONSOLE = $(SRC_CONSOLE:.c=.o)
OBJ_FILE    = $(SRC_FILE:.c=.o)
OBJ_FUNCTION    = $(SRC_FUNCTIONS:.c=.o)

console: $(OBJ_CONSOLE) $(OBJ_FUNCTION) main.o 
    $(CC) $(LFLAGS) -o macierze $^

file: $(OBJ_FILE) $(OBJ_FUNCTION) main.o
    $(CC) $(LFLAGS) -o macierze $^ 

console_logs: $(OBJ_CONSOLE) $(OBJ_FUNCTION) main.o
    $(CC) $(LFLAGS) -o macierze $^

file_logs: $(OBJ_FILE) $(OBJ_FUNCTION) main.o
    $(CC) $(LFLAGS) -o macierze $^

############# objekty ##############
main.o:
    $(CC) -c $(CFLAGS) src/main.c

$(OBJ_CONSOLE): $(SRC_CONSOLE) 
    $(CC) -c $(CFLAGS) $^

$(OBJ_FILE): $(SRC_FILE) 
    $(CC) -c $(CFLAGS) $^

$(OBJ_FUNCTION): $(SRC_FUNCTION) 
    $(CC) -c $(CFLAGS) $^

%logs   : LFLAGS += -D KOMUNIKATY
file%   : LFLAGS += -D PLIKI

./PHONY: clean
clean:
    rm -f *.o
    rm -f ./src/include/*.gch
    rm -f macierze 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:51:38.717

你写： OBJ_FUNCTION = $(SRC_FUNCTIONS:.c=.o) 而不是： OBJ_FUNCTION = $(SRC_FUNCTION:.c=.o)

和

OBJ_SONSOLE = $(SRC_CONSOLE:.c=.o) 而不是 OBJ_CONSOLE = $(SRC_CONSOLE:.c=.o)

# c# - 实体框架代码优先单表中的多对多关系

> ID：15599806
> 
> 赞同：1
> 
> 时间：2013-03-24T14:42:42.567
> 
> 标签：c#, entity-framework, many-to-many, code-first

我已经潜伏了很长一段时间，所以这是第一个问题；）

我一直在玩 Entity Framework 5.0 Code First，我想做以下事情：

我有两个实体，我希望每个实体都以下列方式与地址实体有关系：

*   我有一个存储地址值的**地址**实体，它与具有值的实体没有关系，而是
*   还有另一个实体**AddressBook**引用了**Address**实体和相应的实体（**Person**，**Company**，未来还有一些其他实体）

这是代码：

```
public partial class Address : BaseEntity
{
    [Key]
    public int ID { get; set; }
    public string Street { get; set; }
    public string CityName { get; set; }
    public int? PostalCode { get; set; }

    public virtual ICollection<Person> Persons { get; set; }
    public virtual ICollection<Company> Companies{ get; set; }
}

public partial class Person : BaseEntity 
{
    [Key]
    public int ID { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }

}

public partial class Company: BaseEntity 
{
    [Key]
    public int ID { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
} 
```

这样做是用表创建数据库模式：

*   地址
*   AddressPerson（具有复合主键）
    *   地址_ID
    *   Person_ID
*   地址公司
    *   地址_ID
    *   公司_ID
*   人们
*   公司

这是我想要做的：

*   地址
*   地址簿
    *   地址_ID (PK)
    *   Person_ID (FK)
    *   公司_ID (FK)
*   人们
*   公司

我想要做的是有像**AddressBook**这样的表：

```
public partial class AddressBook
{
    [Key]
    public int ID { get; set; }
    public virtual Address Address { get; set; }
    public virtual Person Person { get; set; }
    public virtual Company Company { get; set; }
} 
```

我不确定如何在**Person**和**Company**类中定义导航属性。

它们应该具有 `ICollection<Address> Addresses`导航属性，因为我希望它们只使用地址集合而不知道底层的**AddressBook**。

是否可以使用或应该在属性内部和属性中`DbModelBuilder`编写代码并从**AddressBook**获取地址？`getter``setter``ICollection<Address> Addresses`

 **谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:37:59.973

您不能以 Entity Framework 将其中的`Addresses`集合理解为真正的导航属性（支持急切`Person`和`Company`延迟加载等）的方式创建映射。为此，您确实需要`AddressBooks`收藏。您可以添加`Addresses`as not mapped 和 readonly helper 属性，然后：

```
public partial class Person : BaseEntity 
{
    [Key]
    public int ID { get; set; }
    public virtual ICollection<AddressBook> AddressBookEntries { get; set; }

    public IEnumerable<Address> Addresses
    {
        get { return AddressBookEntries.Select(ab => ab.Address); }
    }
} 
```

（与 相同`Company`。）

另一种我认为更好的方法是为`Person`and创建一个公共基类`Company`，将`Addresses`集合移动到该基类中，并在该基类和之间具有单个多对多关系和单个连接表`Address`：

```
public abstract class EntityWithAddresses : BaseEntity
{
    [Key]
    public int ID { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
}

public partial class Person : EntityWithAddresses 
{
}

public partial class Company : EntityWithAddresses 
{
} 
```

`Address`有一个新基类的导航集合：

```
public partial class Address : BaseEntity
{
    [Key]
    public int ID { get; set; }
    public string Street { get; set; }
    public string CityName { get; set; }
    public int? PostalCode { get; set; }

    public virtual ICollection<EntityWithAddresses> EntityWithAddresses { get; set; }
} 
```**

# php - 注册表单的php和mysql错误

> ID：15599807
> 
> 赞同：-1
> 
> 时间：2013-03-24T14:42:44.970
> 
> 标签：php, mysql, forms, registration

当我在我的 php 表单上按注册时，我收到此错误：

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 26 行的 /home/changj/public_html/register.php 中给出 未选择数据库

下面是 register.php 脚本第 26 行，但不确定如何修复错误

```
if(mysql_num_rows($sql)> 0 ) { 
```

任何想法谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:44:13.930

我猜`$sql`是一个字符串。尝试这个，

```
$result = mysql_query($sql);
if(mysql_num_rows($result)> 0 ) { .... } 
```

但从PHP 5.5.0 起[mysql_query()](http://php.net/manual/en/function.mysql-query.php)将被弃用。另一种方法是使用[mysqli_query()](http://www.php.net/manual/en/mysqli.query.php)或[PDO::query()](http://www.php.net/manual/en/pdo.query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:45:14.103

您没有选择数据库：“未选择数据库”

确保在语句之前的任何位置都有 mysql_connect() 和 mysql_select_db()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:45:49.243

正如我[在这里回答的那样](https://stackoverflow.com/a/15599815/1190388)

从[`mysql_query()`](http://php.net/manual/en/function.mysql-query.php)文档：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，**错误时返回 FALSE。**

查询错误。更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:46:34.420

你设置数据库了吗？

```
mysql_select_db("databaseName"); 
```

或者，如果您使用的是“原始查询”，您可能会错过这一行：

```
mysql_query("USE databaseName"); 
```

# jakarta-ee - 安全多用户客户端：从我的客户端连接 2 个用户时远程 CallerPrincipal 错误

> ID：15599808
> 
> 赞同：1
> 
> 时间：2013-03-24T14:43:07.520
> 
> 标签：jakarta-ee, glassfish, ejb-3.0, glassfish-3

我的安全 Glassfish 3.1.2 有一个非常烦人的问题。当我从我的独立客户端连接 2 个（或更多）用户时，当我尝试从我的 EJB 获取调用者主体时，我总是拥有最后一个连接的用户：

```
    sessionContext.getCallerPrincipal().getName();

```

你能帮我解决这个问题吗？

这是我的客户：

```
<pre>
    public static void main(String[] args) {
        new Thread(new Runnable() {
          @Override
          public void run() {
             connectUser("userA", "pwdB");
          }
        }).start();
        new Thread(new Runnable() {
               @Override
           public void run() {
                connectUser("userB", "pwdB");
           }
        }).start();
    }
    public static void connectUser(String userName, String password) {
     try {
         ProgrammaticLogin login = new ProgrammaticLogin();
         login.login(userName, password.toCharArray());
         Context context = new InitialContext();
         MyServiceRemote myService = (MyServiceRemote) context.lookup("MyService");
         String remoteCaller = myService.getUserName();
         System.out.println("Local is (" + userName + "), Remote is (" + remoteCaller + ")");
      } catch (Exception e) {
         e.printStackTrace();
      }
    }

</pre> 
```

这是我的 EJB：

```
<pre>
    @Stateless(mappedName = "MyService", name="MyServiceBean")
    public class MyServiceBean implements MyServiceRemote{
        @Resource
        private SessionContext sessionContext;
        public MyServiceBean () {
            super();        
        }
        public String getUserName() {
            return sessionContext.getCallerPrincipal().getName();
        }
    }

</pre> 
```

# restler - 使用 Restler 覆盖请求和响应标头

> ID：15599820
> 
> 赞同：0
> 
> 时间：2013-03-24T14:44:30.687
> 
> 标签：restler

我是restler的新手并尝试做以下事情，似乎无法掌握它

我通过 Restler 公开了这个类和方法

```
class Account {
    protected $Api_Version = array('version' => "1.0.2.1234", 'href' => "/");
// Returns the version of the service
// Content-Type: application/vnd.cust.version+json
function version() {
return json_encode($this->version);
}

// Accepts only Content Type: application/vnd.cust.account+json
function postCreate() {

}
} 
```

1）我想将我自己的 Content-Type 返回给客户端，就像在“版本”方法中一样，而不是默认的应用程序/json。在我的情况下，它的'application/vnd.cust.version+json'

2) 如果 Contet-Type 设置为 'application/vnd.cust.account+json'，方法 postCreate 应该只接受请求。如何检查请求中是否设置了该标头。

3）同样在restler API Explorer中，对于methond名称，我怎样才能只显示方法名称而不是'version.json'。我只想显示“版本”，如方法名称

谢谢您的帮助。纳尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:52:20.263

1）也许写你自己的格式？看看 [http://restler3.luracast.com/examples/_003_multiformat/readme.html](http://restler3.luracast.com/examples/_003_multiformat/readme.html)

2）您可以检查标题并在错误的标题上抛出异常。看看这个链接 [http://stackoverflow.com/questions/541430/how-do-i-read-any-request-header-in-php](http://restler3.luracast.com/examples/_003_multiformat/readme.html)

3）您是否尝试过将以下行添加到您的 Index.php 中？

> 资源::$useFormatAsExtension = false

希望能带你走得更远:)

铜英格

# java - Android XML解析，循环获取所有子值

> ID：15599821
> 
> 赞同：1
> 
> 时间：2013-03-24T14:44:31.833
> 
> 标签：java, android, xml, arrays, parsing

**我想为每个日期显示它的约会（rdv），数据应该像这样显示：**

Mercredi 19 Mars 2013
09:00 10:00
Avec M. Sellami Abdelkader
10:00 11:00 Avec M. Badri Khaled

Mercredi 20 Mars 2013
08:00 09:00
Avec M. Hamzaoui Ismael
10:00 11:00
Avec M. Kadouri Saloua

**但这就是它的显示方式：**

Mercredi 19 Mars 2013
09:00 10:00
Avec M. Sellami Abdelkader

Mercredi 20 Mars 2013
09:00 10:00
Avec M. Sellami Abdelkader

**这是 XML 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
    <rdvs>
        <date>
            <id>1</id>
            <day>Mercredi 19 Mars 2013</day>
            <rdv>
                <time>09:00 10:00</time>
                <avec>Avec M. Sellami Abdelkader</avec>
            </rdv>
            <rdv>
                <time>10:00 11:00</time>
                <avec>Avec M. Badri Khaled</avec>
            </rdv>
        </date>
        <date>
            <id>2</id>
            <day>Mercredi 20 Mars 2013</day>
            <rdv>
                <time>08:00 09:00</time>
                <avec>Avec M. Hamzaoui Ismael</avec>
            </rdv>
            <rdv>
                <time>10:00 11:00</time>
                <avec>Avec M. Kadouri Saloua</avec>
            </rdv>
        </date>
    </rdvs> 
```

**这是java代码的一部分：**

```
ArrayList<HashMap<String, String>> rdvs = new ArrayList<HashMap<String, String>>();
XMLParser parser = new XMLParser();

String xml = parser.getXmlFromUrl(URL);
Document doc = parser.getDomElement(xml);
NodeList nl = doc.getElementsByTagName(KEY_DATE);

for ( int i=0; i<nl.getLength(); i++) {

    HashMap<String, String> map = new HashMap<String, String>();
    Element e = (Element) nl.item(i);

    map.put(KEY_DAY, parser.getValue(e, KEY_DAY));
    map.put(KEY_TIME, parser.getValue(e, KEY_TIME));
    map.put(KEY_AVEC, parser.getValue(e, KEY_AVEC));

    rdvs.add(map);
}

ListAdapter adapter = new SimpleAdapter(this, rdvs,
        R.layout.rdv_list,
        new String[] { KEY_DAY, KEY_TIME, KEY_AVEC }, 
        new int[] { R.id.date, R.id.time, R.id.avec });

setListAdapter(adapter); 
```

***我一遍又一遍地尝试循环等，但无法提出任何好的解决方案！***

# fortran - 在 fortran（或任何其他语言）中使用函数的成本

> ID：15599822
> 
> 赞同：1
> 
> 时间：2013-03-24T14:44:34.403
> 
> 标签：fortran, fortran95

假设我有一个非常大的数组`verybigvariable`

我已经定义了一个函数来执行一些这样的操作

```
function myfunc(var) result(res)
real:: var(:,:,:),res

...
...
...

end function myfunc 
```

我的问题是当我这样调用这个函数时

```
myvar=myfunc(verybigvariable) 
```

怎么了？它是否复制了我的变量，以便在函数执行期间在 ram 中保留 2X 空间？如果是这样，我该如何防止这种情况？（在一个简单的程序中，我知道，我可以在没有任何参数的情况下定义函数并使其使用现有变量，但如果我正在编写模块，似乎我必须在定义中包含参数）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T15:01:05.287

Fortran 语言标准没有指定参数的传递方式。通常，为了提高效率，编译器不会复制，而是传递参数的地址。在某些情况下，Fortran 编译器必须进行复制。例如，实际参数是一个不连续的数组，但过程需要一个连续的参数。编译器必须通过制作一个连续的副本传递给过程来修复不匹配。如果过程修改了该参数，则必须将值复制回原始参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:59:01.497

在 fortran中，参数[似乎](http://www.personal.psu.edu/jhm/f90/lectures/42.html)是通过引用传递的。这意味着只传递变量的**地址**，然后函数可以通过该地址访问变量。

所以不，数组没有被复制，只传递了数组的地址。对于 32 位系统，开销为 32 位，对于 64 位系统，开销为 64 位。

我没有使用fortran的经验，这只是我通过谷歌搜索可以弄清楚的，所以如果任何Fortran程序员有任何意见，请随时编辑/评论。

# php - mysql 查询可在 phpmyadmin 上工作，但不能在 mysqli 上工作

> ID：15599824
> 
> 赞同：0
> 
> 时间：2013-03-24T14:44:46.530
> 
> 标签：php, sql, mysqli, mysqli-multi-query

我有一个在 phpmyadmin 中有效但在 php ( `mysqli`)上无效的查询

问题出在哪里 ？

询问：

```
 INSERT INTO `SepidarSoft_Portal`.`Archive_Media` SET `CTime`='1364135670',`UTime`='1364135670',`PID`='',`State`='1',`Sequence`='0',`Subject`='Hojom Marg ( www.Parstafrih.ir )',`Text`='',`Description`='',`Definition`='',`KeyWord`='',`ETag`='',`Access`='',`LinkToPage`='',`Attachment`='[{\"Name\":null,\"Kind\":null,\"Size\":false,\"Address\":\"27\",\"More\":{\"Original\":1}}]',`STime`='0',`ETime`='0';

  SET @LAST_ID:=LAST_INSERT_ID();

  INSERT INTO `SepidarSoft_Portal`.`Archive_Media_MoreInfo`  (`id`,`Key`,`Value`) VALUES (@LAST_ID,'Instrumental','1'),(@LAST_ID,'KindFile','صوتی'),(@LAST_ID,'Genre','نغمه'),(@LAST_ID,'SName','Amir Tajik ( www.Parstafrih.ir )'),(@LAST_ID,'Events','[[\"\"]]'),(@LAST_ID,'Album','( www.Parstafrih.ir )'),(@LAST_ID,'Composer',''),(@LAST_ID,'Adjustment',''),(@LAST_ID,'Subtitle','[object HTMLInputElement]'),(@LAST_ID,'Release',''); 
```

错误：

```
 #1064 -You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET @LAST_ID:=LAST_INSERT_ID(); 
```

`mysqli_multi_query`1）我为此使用php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:49:52.077

你的问题很简单。

反引号 ( ` ) 用于在 php 中执行命令。这就是为什么您会收到语法错误。在 mysqli 函数中用单引号或双引号替换它们。

请阅读以下文档，您应该被排序:)

[php.net 上的反引号](http://php.net/manual/en/language.operators.execution.php)

# javascript - 在for循环中遍历数组并在找到项目时中断

> ID：15599827
> 
> 赞同：0
> 
> 时间：2013-03-24T14:44:59.217
> 
> 标签：javascript, jquery

我的 for 循环无法正常工作时遇到问题。

基本上我找到了用户滚动位置，如果它小于数组中的某个数字，我想滚动到那个位置。我在数组中的前两项工作正常。但是如果我滚动到倒数第二个项目，它会在那里停留一秒钟，然后动画到最后一个项目。

这是我的代码

例如，arrayPercent 中可以包含这些数字 794、1588、2383、3177

```
//Scroll postion
$(window).scroll(function() {
    var documentScrollLeft = $(document).scrollLeft();
    if (lastScrollLeft != documentScrollLeft) {
        lastScrollLeft = documentScrollLeft; 
        //
        for(var j = 0; j <= numTotalPages; j++){
            if(lastScrollLeft <= arrayPercent[j]){
                console.log(arrayPercent[j]);
                numCurrentPage = j+1;
                break;
            }
        }
    }
    //
    clearTimeout($.data(this, 'scrollTimer'));
    $.data(this, 'scrollTimer', setTimeout(function() {
        // do something
        var TEMPcurrent = 'page'+numCurrentPage;
        $('html, body').animate({
            scrollLeft: $('#'+TEMPcurrent).offset().left
        }, 250);
    }, 500));
}); 
```

# android - 在 Android Button 中实现滑动和单击

> ID：15599836
> 
> 赞同：4
> 
> 时间：2013-03-24T14:46:03.617
> 
> 标签：android, onclicklistener, swipe-gesture

我是 android 开发的新手，我尝试为 Activity 实现滑动（使用 Ontouch）并为 Activity 中的按钮实现点击事件。如果我在按钮顶部滑动，则不会生成滑动事件。

如果我为按钮添加滑动，则不会生成按钮的 onclick 事件。

我该怎么办，来解决这个问题。

如有任何澄清，请询问我。

布局代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/default_2x"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".LearnUpperCaseActivity" >

    <LinearLayout
        android:id="@+id/content_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="@string/learn_uppercase"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="11"
            android:background="@drawable/main_area_blue_2x" >

            <TextView
                android:id="@+id/question"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:text="@string/hard_coded_char" />
        </RelativeLayout>

        <TextView
            android:id="@+id/instruction"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/tab_below" />

        <RelativeLayout
            android:id="@+id/button_container"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="9"
            android:padding="3dp" >

            <LinearLayout
                android:id="@+id/row1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/button1"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/blue_button"
                    android:onClick="button1Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>

                <Button
                    android:id="@+id/button2"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/brown_button_2x"
                    android:onClick="button2Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>

                <Button
                    android:id="@+id/button3"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/dark_green_2x"
                    android:onClick="button3Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/row2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/row1"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/button4"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/fluora_button_2x"
                    android:onClick="button4Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>

                <Button
                    android:id="@+id/button5"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/green_button_2x"
                    android:onClick="button5Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>

                <Button
                    android:id="@+id/button6"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/maroon_2x"
                    android:onClick="button6Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/row3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/row2"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/button7"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/yellow_button_2x"
                    android:onClick="button7Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>

                <Button
                    android:id="@+id/button8"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/purple_button_2x"
                    android:onClick="button8Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>

                <Button
                    android:id="@+id/button9"
                    style="@style/UpperCaseButton"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:layout_margin="3dp"
                    android:layout_weight="1"
                    android:background="@drawable/pink_button_2x"
                    android:onClick="button9Pressed"
                    android:text="@string/hard_coded_char" >
                </Button>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/row4"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/row3"
                android:gravity="center"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/home"
                    style="@style/UpperCaseButton"
                    android:layout_width="150dp"
                    android:layout_height="30dp"
                    android:layout_margin="3dp"
                    android:background="@drawable/blue_long_button_2x"
                    android:onClick="home"
                    android:text="@string/home" >
                </Button>
            </LinearLayout>
        </RelativeLayout>
    </LinearLayout>
</RelativeLayout> 
```

请参阅此链接中的图像。[https://sites.google.com/site/temptemptemp123tempqwe/doubt.jpg?attredirects=0](https://sites.google.com/site/temptemptemp123tempqwe/doubt.jpg?attredirects=0)

请帮我解决这个问题。

问候，班纳特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-28T15:52:34.827

您只需在按下和释放按钮时处理坐标之间的差异。

将此添加到`onCreate()`您的活动中：

```
 protected void onCreate(Bundle savedInstanceState) {
            final float len = getResources().getDisplayMetrics().densityDpi/6;
            OnTouch Listener controlButtonTouchListener=new View.OnTouchListener() {
                float initX;
                float initY;
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    switch(event.getAction()) {
                        case MotionEvent.ACTION_DOWN:
                            initX = event.getX();
                            initY = event.getY();
                            break;
                        case MotionEvent.ACTION_UP:
                            initX -= event.getX(); //now has difference value
                            initY -= event.getY(); //now has difference value
                            if (initY > len) {
                                ((Button)v).setText("Swipe up");
                                //Toast.makeText(context,"Swipe up",Toast.LENGTH_SHORT).show();
                            } else if(initY < -len) {
                                ((Button)v).setText("Swipe Down");
                                //Toast.makeText(context,"Swipe Down",Toast.LENGTH_SHORT).show();
                            } else {
                                if(initY < 0) initY = -initY;
                                if(initX < 0) initX = -initX;
                                if(initX <= len/4 && initY <= len/4) {
                                    ((Button)v).setText("Clicked");
                                }
                            }
                            break;
                    }
                    return true;
                }
            };
            findViewById(R.id.ClickSwipeButton).setOnTouchListener(controlButtonTouchListener);
        } 
```

# java - 如何在异常消息 Java 中包含用户输入？

> ID：15599837
> 
> 赞同：0
> 
> 时间：2013-03-24T14:46:03.983
> 
> 标签：java, exception-handling, io, console-application

在 Java 中，是否有可能将用户的输入包含在异常消息中，同时还将值用作`int`or `double`？例如，他们应该输入一个数字（例如，5），而不是像 (5r) 这样的胖手指。

是否可以有一条消息说“您输入了 5r，但应该输入了一个数字。”？

我在这里尝试使用传统的获取变量以在 Java 中打印的方式：

```
try {
  System.out.println();
  System.out.println("Value: ");
  double value = sc.nextDouble();sc.nextLine();
  exec.ds.push(value);
} 
catch (Exception e1) {
    System.out.println(e1+ "You entered:  " + value + ": You must enter a number");                            
} 
```

在这种情况下，我试图`value`在异常消息中显示，其中 value 是用户的无效输入。

它给出`value`了错误。`cannot find symbol`

以下是我想出的**答案。**我选择这个答案的原因是因为您的大多数答案都产生了输出“您输入了 0.0 ...”，因为答案必须首先是要在控制台中打印的字符串。此外，为了在程序的其他地方用作数字，String 已强制转换为 Double 或 Integer 类型的 Object：

```
String value = null; //declared variable outside of try/catch block and initialize. 
try {
  System.out.println();
  System.out.println("Value: ");
  value = sc.nextLine(); //Accept String as most of you suggested
  Double newVal = new Double(value); //convert the String to double for use elsewhere
  exec.ds.push(newVal); //doulbe is getting used where it would be a 'number' instead of string

} 
catch (Exception e1) {
    System.out.println(e1+ "You entered:  " + value + ": You must enter a number"); //the String valuse is received and printed as a String here, not a 'number'            
} //now prints what the users inputs... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:50:52.970

获取用户输入：

```
String input = '';

try{

    Console console = System.console();
    input = console.readLine("Enter input:");
} 
```

...那么在你的捕获中你可以这样做：

```
catch (Exception e1) {
    System.out.println(e1+ "You entered:  " + input + ": You must enter a number");                            
  } 
```

除了上述之外，我看不出问题是什么。您可以谷歌如何在 Java 中获取用户输入，然后只需获取输入，将其放入变量中，并在出错时将其打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:50:59.933

这不起作用，因为`value`不再在 catch 块的范围内。相反，您可以在尝试之前声明它：

```
double value = 0;
try {
  System.out.println();
  System.out.println("Value: ");
  value = sc.nextDouble();sc.nextLine();
  exec.ds.push(value);
} catch (Exception e1) {
  System.out.println(e1+ "You entered:  " + value + ": You must enter a number");                            
} 
```

但是，如果由于双精度中的语法错误而引发异常，这将无济于事。要处理这个问题，您需要读取 a`String`然后转换为 a `double`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T14:51:09.080

在这种情况下 - 不，因为调用`sc.nextLine()`会引发异常，因此不会将值写入 variable `value`。

此外，`value`在这种情况下，是一个局部变量，并且在其他代码块中不可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T14:49:15.143

> 它给出的错误找不到符号的值。

您已在本地块中声明该值。你正试图在块外访问它。

> 是否可以有一条消息说“您输入了 5r，但应该输入了一个数字。

更好的选择是使用标志变量并循环，直到用户输入正确的数字。

```
boolean flag = true;
double value = 0;
while(flag)
{
    try {
        System.out.println();
        System.out.println("Value: ");
        value = sc.nextDouble();
        exec.ds.push(value);
        flag = false;
    } 
    catch (Exception e1) {
        System.out.println(e1+ "You entered:  " + value + ": You must enter a number");                            
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T14:53:22.350

根据[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextDouble%28%29) `nextDouble()`：

> 将输入的下一个标记扫描为双精度。`InputMismatchException`如果下一个标记无法转换为有效的双精度值，此方法将抛出。

因此，如果输入无法转换为双精度，则会引发异常。如果您想在异常消息中提供输入的字符串，我建议您将该行作为字符串读取并尝试将其解析为双精度，如果失败，您可以将读取的行包含在异常消息中。

# database - 这是一对多还是多对多？

> ID：15599844
> 
> 赞同：0
> 
> 时间：2013-03-24T14:47:09.600
> 
> 标签：database

在这种情况下无法确定关系：

我想为收入类型创建一个复选框列表。UI 将显示为“您收到哪些类型的收入？”。为简单起见，选择可能是全职、兼职和退休。

我的一部分认为这是一对多的关系，因此不需要关联表，因为一个人可以有一种或多种收入类型。然而，从字面上看，“全职”工作可能与许多人有关。在这种情况下，我不会显示有多少人是“全职”的汇总表，我只是与一个人打交道并确定他们的就业状况。

但我不认为“全职”是一个实体，例如演员和电影——很多演员可以在很多电影中，很多电影可以有很多不同的演员。

我想让我失望的是用户可以选择多个选项，而不是单选按钮列表或下拉列表。

在这种情况下，它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:10:27.773

`many-to-many`:`Person`到`Employment Type`。

许多`Person`s 可能共享一个`Employment Type`.

一个`Person`可能有几个`Employment Type`s。

话虽如此，我不知道您的业务模型有多丰富，但我会附加到一个`Employment Type`称为关联的实体（而不是直接从 引用它`Employment`）。`Employment Type``many-to-one``Person`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:10:44.473

在我看来，这是一个多对多的关系。

**全职**是一个实体（假设是一张`INCOME_TYPES`桌子），就像一个演员或一部电影。

既然你告诉我们，你不会显示的东西*income-type-side*而只有*individual-side*，有两种选择：

1.  反规范化您的架构并将 3 个字段放入`INDIVIDUALS`表中。这不是很好。

2.  如果你在代码方面做一些事情，你可以使用位掩码。

    *   例如，1 代表全职，2 代表兼职，4 代表退休。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:10:54.613

这取决于您将收入类型作为单独的表还是只是一个字符串。

对于单独的表格，它是多对多的：每个人都有多种收入类型。每种收入类型都有多人。

# android - 三星galaxy tab上的android测试

> ID：15599848
> 
> 赞同：0
> 
> 时间：2013-03-24T14:47:30.120
> 
> 标签：android, eclipse, galaxy-tab

是否可以使用 Eclipse 在三星 Galaxy Tab 上测试我的 android 应用程序？我知道 Galaxy Tab 没有 USB 连接，那么设备如何连接到 Eclipse？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:54:22.667

是的。进入 Settings->Applications->Development 并检查“USB 调试”复选框。如果显示为灰色，则打开设置->无线和网络->USB 设置并选择“连接时询问”选项。在此之后，您应该能够启用 USB 调试并开始在您的 Galaxy 选项卡上开发应用程序

# asp.net-web-api - 除非我添加到 Accept 标头，否则不会调用 MediaTypeFormatter WriteToStreamAsync

> ID：15599849
> 
> 赞同：1
> 
> 时间：2013-03-24T14:47:32.187
> 
> 标签：asp.net-web-api, mediatypeformatter

我有一个`MediaTypeFormatter`将图像的内部代表转换为 png/jpeg/等。如果有人要求。但是，`WriteToStreamAsync`除非我添加 image/png 或类似于接受标头，否则我永远不会被调用。

首先，这是我的 webapi 方法，为简洁起见，删除了一些关键位：

```
public ImageFormatter.BinaryImage GetImage(int cId, int iId)
{
    ....

    using (var input = iFIO.OpenRead())
    {
        input.Read(b.data, 0, (int)iFIO.Length);
    }

    // With this next line my mediatypeformatter is correctly called.
    Request.Headers.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue("image/png"));

    return b;
} 
```

这是我的写部分`MediaTypeFormatter`（还有一个读部分，实际上效果很好）。

```
namespace PivotWebsite.MediaFormatters
{
    public class ImageFormatter : MediaTypeFormatter
    {
        public class BinaryImage
        { 
            public byte[] data;
            public string metaData;
        }

        public ImageFormatter()
        {
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("image/jpg"));
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("image/jpeg"));
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("image/png"));
        }

        public override bool CanWriteType(Type type)
        {
            return true;
        }

        public override async Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content, TransportContext transportContext)
        {
            var b = value as BinaryImage;
            if (b == null)
                throw new InvalidOperationException("Can only work with BinaryImage types!");

            await writeStream.WriteAsync(b.data, 0, b.data.Length);
        }
    }
} 
```

我希望能够做的是，在`WriteToStreamAsync`中更改传出标题以将 Content-Type 包含为“image/png”（或其他任何内容，具体取决于数据类型）。

但是，当我从带有“ `http://my.testdomain.net:57441/api/Images?cID=1&iID=1`”之类的 URL 的 Web 浏览器调用它时，`WriteToStreamAsync`永远不会调用它（接受的标头列为 {text/html, application/xhtml+xml, */*}）。如果我在上面添加添加正确图像类型的行，那么一切都会按我的预期调用。

我在这里想念什么？接受的“*/*”标头应该触发了我的媒体格式化程序，对吧？或者...我是否缺少有关 Web API 管道的基本知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:45:37.977

*如果 Accept 标头是“ /* ” ，您是否希望始终使用图像格式化程序？如果是这种情况，那么您应该首先在 Formatters 集合中插入您的格式化程序，如下所示：

```
config.Formatters.Insert(0, new ImageFormatter()); 
```

当没有像您的情况那样的完全 Accept 标头匹配时会发生什么情况是，第一个可以写入类型的格式化程序被选中以序列化对象。因此，如果您先注册格式化程序，它将被使用。

这可能会产生意想不到的副作用，因为它会影响您的所有控制器。我建议将 CanWriteType 实现更改为仅在为 BinaryImage 时才返回 true。那应该使格式化程序仅在您的返回类型时才被使用。

您可以做的另一件事是通过返回 HttpResponseMessage 直接在您的操作中选择格式化程序：

```
return Request.CreateResponse(HttpStatusCode.OK, image, new ImageFormatter()); 
```

这基本上是说“此操作应始终使用图像格式化程序，无论内容类型如何，接受标题等”。如果您总是只返回图像并且您需要使用格式化程序对其进行序列化，那么这在您的情况下可能是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T03:13:29.407

我正在编写一个 CsvFormatter，我希望能够从浏览器调用 API 来触发文件下载。由于我无法控制 Accept 标头，因此我想使用扩展来触发我的 CSV 格式化程序，但 XML 格式化程序不断收到请求。我发现通过添加“text/html”媒体类型，我可以处理 CSV 扩展。希望这不会导致其他问题:)。

```
public CsvFormatter()
{
    var header = new MediaTypeHeaderValue("text/csv");
    SupportedMediaTypes.Add(header);
    MediaTypeMappings.Add(new UriPathExtensionMapping("csv", header));

    // From Chrome: Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
    // Allow the formatter to run from a standard browser request.
    header = new MediaTypeHeaderValue("text/html");
    SupportedMediaTypes.Add(header);
    MediaTypeMappings.Add(new UriPathExtensionMapping("csv", header));
} 
```

# java - 打破java中的递归方法

> ID：15599850
> 
> 赞同：1
> 
> 时间：2013-03-24T14:47:40.270
> 
> 标签：java

当我设置它时如何保存“标志”。例如，当我处于阻塞状态时

```
if (hashFunction(value) == hashFunction(node.value))
{

    flag = true;
    return flag; 

} 
```

在调试标志 = true，但下一步和指针在

```
if (hashFunction(value) < hashFunction(node.value))
    {
        if (node.left != null)
        {

            findPrivate(value, node.left);------THERE

        } else
        {
            flag = false;
            return flag;
        }
    } 
```

结果，我的方法返回false。如何解决？对不起我的英语不好。完整代码如下。

```
 private boolean findPrivate(T value, Node node)
{

    if (node == null)
    {
        flag = false;
        return flag;

    }
    if (hashFunction(value) == hashFunction(node.value))
    {

        flag = true;
        return flag; 

    }

    if (hashFunction(value) > hashFunction(node.value))
    {
        if (node.rigth != null)
        {
            findPrivate(value, node.rigth);
        } else
        {

            flag = false;
            System.out.println("value= " + value + " " + flag);
            return flag;
        }
    }

    if (hashFunction(value) < hashFunction(node.value))
    {
        if (node.left != null)
        {

            findPrivate(value, node.left);

        } else
        {
            flag = false;
            return flag;
        }
    }
    return flag;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:49:14.700

问题是当你递归时，你忽略了返回值：

```
findPrivate(value, node.left); 
```

我没有详细查看，但您可能只能将每次出现的情况更改为：

```
return findPrivate(value, node.left); 
```

我还建议`flag`完全删除您的变量 - 无论如何都不清楚它是在哪里声明的，但看起来它可能不应该被使用；相反，只需直接返回值。例如：

```
if (node.left != null)
{
    return findPrivate(value, node.left);
} else
{
    return false;
} 
```

...然后可以很容易地重构为：

```
return node.left != null ? findPrivate(value, node.left) : false; 
```

实际上，由于您已经返回`false`if`node`为 null，因此您可以使用：

```
return findPrivate(value, node.left); 
```

在这种情况下。我怀疑你可以很简单地按照这些思路重构你的代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:55:16.033

您需要从递归调用中*返回值：*

```
private static final class Node<T> {

    protected T value;
    protected Node<T> right;
    protected Node<T> left;

    private boolean findPrivate(T value, Node<T> node) {
        if (node == null) {
            return false;
        }
        if (hashFunction(value) == hashFunction(node.value)) {
            return true;
        }
        if (hashFunction(value) > hashFunction(node.value)) {
            if (node.right != null) {
                return findPrivate(value, node.right);
            } else {
                return false;
            }
        }
        if (hashFunction(value) < hashFunction(node.value)) {
            if (node.left != null) {
                return findPrivate(value, node.left);
            } else {
                return false;
            }
        }
        throw new UnsupportedOperationException("cannot compare hashCodes");
    }

    private int hashFunction(T value) {
        //stuff
    }
} 
```

您不需要实际保存 a `flag`，您只需要保存`return`该值。

# php - 合并多选的结果

> ID：15599853
> 
> 赞同：0
> 
> 时间：2013-03-24T14:47:54.820
> 
> 标签：php, sql, loops

一件小事我需要你的帮助。我有两个表，我需要从第一个表中获取人员的姓名和 ID 列表。然后使用此列表获取与这些人相关的服务。请记住，我需要名称和 ID 来识别服务。

查询类似于以下内容：

```
$query = "SELECT id, name from person where customerType='specificType';
$result = mysql_query($query,$this->connection); 
```

之后，我遍历此查询的结果以获取服务列表：

```
While ($list=mysql_fetch_array($result))
{
     $query = "SELECT serviceID, serviceName from services 
     where assignedToName='".$list['name']."' and assignedToID=".$list['id'];
 $result2 = mysql_query($query,$this->connection);

if(!$result2 || mysql_num_rows($result2) <= 0)
{//I do nothing}
else{
  if(isset($servicesList))
      { 
          //Here is the part that is not working, How to combine the results??
     $servicesList .= $result;
      } 

      else $servicesList=$result;
    }
}
//End While

if(isset($servicesList))
{ return $servicesList;}else { 
return 'error'; 
```

}

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:51:56.373

请考虑使用一个`join`且仅一个查询。

像这样的东西：

```
SELECT 
  p.id, 
  p.name, 
  s.serviceID, 
  s.serviceName 
FROM 
  person p 
LEFT JOIN 
  services s
ON 
  (p.id = s.assignedToID 
  AND 
  p.name = s.assignedToName)
WHERE 
  p.customerType='specificType' 
```

# java - 提升一个领域的相关性，以及另一个领域的价值（数值）

> ID：15599856
> 
> 赞同：3
> 
> 时间：2013-03-24T14:48:06.923
> 
> 标签：java, search, solr, lucene

我正在开发一个平台，用户可以在其中组织集合中的项目。用户可以关注每个集合。这些集合随后由 Solr 编制索引，并可供搜索。我意识到，如果我对集合名称（以及其中的项目名称）使用一种非常简单的提升，我得到的结果大多是具有非常少项目的集合（这是正常的，因为单词池小得多=>相关性更高）。当然，这并不是我想要的。

我想要的是能够使用我也在 Solr 中索引的另一个字段来提升集合名称，称为 numItems。

换句话说，而不是`name:query^3`, 得到类似的东西`name:query^numItems`，甚至更好`name:"query"^(numItems*numFollowers)`

这可能吗？这是唯一的选择吗？唯一想到的另一件事是尝试按相同的参数对结果进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:11:51.380

最简单的方法是通过`omitNorms`schema.xml 中的 field 属性禁用主字段的长度规范化。

如果您仍需要微调评分，可以使用函数查询。有关更多信息，请参见[此处](http://wiki.apache.org/solr/SolrRelevancyFAQ)，但使用上面描述的简单提升的查询字符串的简短示例是：

```
q={!boost b=(numItems*numFollowers)}query 
```

# jquery - 防止提交事件处理程序中的默认操作无法正常工作

> ID：15599858
> 
> 赞同：0
> 
> 时间：2013-03-24T14:48:25.267
> 
> 标签：jquery

我已经构建了一个似乎可以正常工作的脚本，但是当提交表单时，附加的数据只会闪烁。我已经`return false`在结尾之前放了。有什么问题？

```
$('#blankett_form').submit(function () {
    var id = $(this).find('.update:last').val();
    if (!id) {
        alert('Välj land och region.');
    } else {
        var table = '<table class="table table-hover table-bordered"><thead><tr><th>blanketter.</th><th>datum tillagt.</th></tr></thead><tbody></tbody></table>'
        $('#formsubmit').empty().append(table);
        $.ajax({
            url: 'func/blankett_func2.php',
            data: {
                'id': id
            },
            dataType: 'JSON',
            success: function (data) {
                $.each(data.list, function (index, value) {
                    $('#formsubmit tbody').append(value);
                });
            }
        });
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:15:21.083

你确定返回的数据是`<tr>`s吗？如果没有，表格可能不会按您的预期呈现，这可能是您所看到的原因。

# java - 通过 Socket 发送 ResultSet

> ID：15599859
> 
> 赞同：1
> 
> 时间：2013-03-24T14:48:31.613
> 
> 标签：java, sockets, ms-access, resultset

我正在尝试创建一个分布式系统，其中 GUI 将驻留在职员的 PC 上，`.mdb`并将驻留在另一台充当服务器的 PC 上。

我想知道如何将查询从客户端发送到服务器并使用 Socket 在客户端 GUI 上 检索`ResultSet`和填充`JTable`

### 最初的想法

我最初考虑使用`GSON`将数据从客户端发送到服务器，反之亦然，但不知道如何以及它是否是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:58:48.903

您不能使用因为不实现`ResultSet`跨网络发送对象。如果您想使用从您那里获得的结果填充 ，则应首先从中检索结果并将其存储在和/或任何其他适合您的位置，然后通过 将该跨网络的对象发送到另一端。`Socket``ResultSet``Serializable``JTable``ResultSet``ArrayList``Collection``Collection``Socket`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T14:54:10.760

基本上你可以用[CachedRowSet](http://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/CachedRowSet.html)

虽然我会推荐一个抽象层

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T12:52:04.473

首先，您不需要发送查询，只需发送与特定查询相对应的数字或标志，例如当用户单击 GUI 以显示发送＃1 到服务器以显示插入＃2 等等......并从服务器到获取结果集非常棘手。

我面临同样的情况，我需要从数据库中读取数据并将结果集发送到客户端，但是要通过网络发送对象，您需要 ObjectOutputStream，它仅在您发送的对象属于实现 Serialiazble 的类时才有效，但在您的情况下，Resultset 确实如此不实现 Serializable 所以一个解决方案是

创建一个用户定义的类并在其上实现可序列化，然后将结果集内容读入此类的对象，然后通过 Stream 发送此数据，您可以像这样发送数据，我试过了，它对我有用。

# google-maps - 谷歌播放服务库不能与 ActionbarSherlock 库一起使用

> ID：15599867
> 
> 赞同：1
> 
> 时间：2013-03-24T14:49:06.510
> 
> 标签：google-maps, actionbarsherlock, google-maps-android-api-2, android-library, google-play-services

我想为我的应用程序使用地图 v2。但是，当我使用 ActionbarSherlock 库时，我的 google-play-services-lib 库不起作用。如果我删除 ActionbarSherlock 库，那么它可以正常工作。但是我的项目需要这两个库。请帮帮我！注意：我的应用的 minSdkVersion="11" 和 targetSdkVersion="17"

# intellij-idea - AspectJ AOP 和 Spring 在一起

> ID：15599868
> 
> 赞同：0
> 
> 时间：2013-03-24T14:49:11.137
> 
> 标签：intellij-idea, aspectj, spring-aop

我想一起使用 AspectJ AOP 和 Spring（对于 DI），但我得到以下异常：

```
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class 
```

我使用 IntelliJ IDEA 12 Ultimate IDE。
以下是重现错误的示例步骤。

1：信息界面：

```
package org.example.bugs.bug;

public interface Info {
    public void info();
} 
```

2：接口实现：

```
package org.example.bugs.bug;

public class Informer implements Info {

    @Override
    public void info() {
        System.out.println("Some info from Informer!");
    }
} 
```

3：看点：

```
package org.example.bugs.bug;

public aspect InfoAspect {

    public InfoAspect() {}

    pointcut info() : execution(* org.example.bugs.bug.Informer.info(..));

    after() returning() : info() {
        System.out.println("Information confirmed by InfoAspect!");
    }

} 
```

4：spring-config.xml文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">

    <aop:aspectj-autoproxy />

    <bean id="informer"
          class="org.example.bugs.bug.Informer"/>

    <bean class="org.example.bugs.bug.InfoAspect"
          factory-method="aspectOf"/>

</beans> 
```

5：我在以下 Main 类中运行所有内容：

```
package org.example.bugs.bug;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Main {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("org/example/bugs/bug/spring-config.xml");
        Info i = (Info) context.getBean("informer");
        i.info();
    }
} 
```

...我得到错误：

```
2013-03-24 15:46:10 org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@f81843: startup date [Sun Mar 24 15:46:10 CET 2013]; root of context hierarchy
2013-03-24 15:46:10 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [org/example/bugs/bug/spring-config.xml]
2013-03-24 15:46:10 org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@13ad085: defining beans [org.springframework.aop.config.internalAutoProxyCreator,informer,org.example.bugs.bug.InfoAspect#0]; root of factory hierarchy
2013-03-24 15:46:10 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@13ad085: defining beans [org.springframework.aop.config.internalAutoProxyCreator,informer,org.example.bugs.bug.InfoAspect#0]; root of factory hierarchy
Exception in thread "main" org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.example.bugs.bug.InfoAspect] for bean with name 'org.example.bugs.bug.InfoAspect#0' defined in class path resource [org/example/bugs/bug/spring-config.xml]; nested exception is java.lang.ClassNotFoundException: org.example.bugs.bug.InfoAspect
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1266)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:629)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:578)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1335)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:901)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at org.example.bugs.bug.Main.main(Main.java:8)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.ClassNotFoundException: org.example.bugs.bug.InfoAspect
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:260)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:416)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1258)
    ... 15 more 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:37:15.397

因为您正在尝试使用 Spring AOP 支持的切入点，所以我建议您为此使用 Spring AOP。使用带有完整功能集 AspectJ 的 spring 有点复杂，因为它需要建议编织。此外，`<aop:aspectj-autoproxy />`它适用于@AspectJ 风格的spring AOP，但仍然是代理目标的Spring，而不是AspectJ。

因此，我将按以下方式转换示例方面：

```
@Aspect
public class InfoAspect {

    public InfoAspect() {
    }

    @Pointcut("execution(* prospring3.aop.aspectj.Informer.info(..))")
    void infoPointcut() {

    }

    @AfterReturning("infoPointcut()")
    public void afterReturning(JoinPoint joinPoint) {
        System.out.println("Information confirmed by InfoAspect!");
        System.out.println("joinPoint.getSignature().getName() = " + joinPoint.getSignature().getName());
    }

}

@Configuration
@EnableAspectJAutoProxy(proxyTargetClass = true) // use the CGLib instead of Java Proxy
public class AspectJConfig {

    @Bean
    public Info info() {
        return new Informer();
    }

    /**
     * Aspect must be a config as a bean
     * @return the aspect
     */
    @Bean
    public InfoAspect infoAspect() {
        return new InfoAspect();
    }

}

public class InformerTest {

    public static void main(String[] args) {
        ApplicationContext ctx = new AnnotationConfigApplicationContext(AspectJConfig.class);
        final Info bean = ctx.getBean(Info.class);
        bean.info();
    }

} 
```

注意：在 pom.xml 中包含以下依赖项

```
 <dependency>
        <groupId>aopalliance</groupId>
        <artifactId>aopalliance</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.6.12</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.6.12</version>
    </dependency> 
```

Regads

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:54:35.030

你错过了你的 InfoAspect 课程..

您没有在堆栈跟踪中看到`ClassNotFound`for吗？`org.example.bugs.bug.InfoAspect`也许它不是由 Aspect J 编译的。

也许您需要另一个教程：

[http://www.tutorialspoint.com/spring/aspectj_based_aop_appoach.htm](http://www.tutorialspoint.com/spring/aspectj_based_aop_appoach.htm)

我会确保您拥有 Spring 3 并使用最新的成语。

# iphone - 如何检查 ExtAudioFileRead 的结果？

> ID：15599873
> 
> 赞同：1
> 
> 时间：2013-03-24T14:49:54.773
> 
> 标签：iphone, ios, audio, core-audio

我正在使用 ExtAudioFileRead 将 WAV 文件作为 float * 缓冲区读入内存。但是，我不太确定结果 - 当我打印出来时，我得到的值从 - 1 到 + 1（理论上应该是正确的），但我怎么能确定它们是正确的？

```
- (float *) readTestFileAndSize: (int *) size
{
CFStringRef str = CFStringCreateWithCString(
                                            NULL,
                                            [[[NSBundle mainBundle] pathForResource: @"25" ofType:@"wav"] UTF8String],
                                            kCFStringEncodingMacRoman
                                            );
CFURLRef inputFileURL = CFURLCreateWithFileSystemPath(
                                                      kCFAllocatorDefault,
                                                      str,
                                                      kCFURLPOSIXPathStyle,
                                                      false
                                                      );

ExtAudioFileRef fileRef;
ExtAudioFileOpenURL(inputFileURL, &fileRef);

SInt64                          theFileLengthInFrames = 0;
// Get the total frame count
UInt32 thePropertySize = sizeof(theFileLengthInFrames);

ExtAudioFileGetProperty(fileRef, kExtAudioFileProperty_FileLengthFrames, &thePropertySize, &theFileLengthInFrames);

AudioStreamBasicDescription audioFormat;
audioFormat.mSampleRate = 44100;
audioFormat.mFormatID = kAudioFormatLinearPCM;
audioFormat.mFormatFlags = kLinearPCMFormatFlagIsFloat;
audioFormat.mBitsPerChannel = sizeof(Float32) * 8;
audioFormat.mChannelsPerFrame = 1; // Mono
audioFormat.mBytesPerFrame = audioFormat.mChannelsPerFrame * sizeof(Float32);  // == sizeof(Float32)
audioFormat.mFramesPerPacket = 1;
audioFormat.mBytesPerPacket = audioFormat.mFramesPerPacket * audioFormat.mBytesPerFrame; // = sizeof(Float32)

// 3) Apply audio format to the Extended Audio File
ExtAudioFileSetProperty(
                        fileRef,
                        kExtAudioFileProperty_ClientDataFormat,
                        sizeof (AudioStreamBasicDescription), //= audioFormat
                        &audioFormat);

int numSamples = 1024; //How many samples to read in at a time
UInt32 sizePerPacket = audioFormat.mBytesPerPacket; // = sizeof(Float32) = 32bytes
UInt32 packetsPerBuffer = numSamples;
UInt32 outputBufferSize = packetsPerBuffer * sizePerPacket;

// So the lvalue of outputBuffer is the memory location where we have reserved space
UInt8 *outputBuffer = (UInt8 *)malloc(sizeof(UInt8 *) * outputBufferSize);

NSLog(@"outputBufferSize - %llu", theFileLengthInFrames);

float* total = malloc(theFileLengthInFrames * sizeof(float));

*size = theFileLengthInFrames;

AudioBufferList convertedData;

convertedData.mNumberBuffers = 1;    // Set this to 1 for mono
convertedData.mBuffers[0].mNumberChannels = audioFormat.mChannelsPerFrame;  //also = 1
convertedData.mBuffers[0].mDataByteSize = outputBufferSize;
convertedData.mBuffers[0].mData = outputBuffer; //

int totalBytes = 0;

UInt32 frameCount = numSamples;
while (frameCount > 0) {

    ExtAudioFileRead(fileRef, &frameCount, &convertedData);
    if (frameCount > 0)  {
        AudioBuffer audioBuffer = convertedData.mBuffers[0];
        float *samplesAsCArray = (float *)audioBuffer.mData; 

        memcpy(total + totalBytes, samplesAsCArray, frameCount * sizeof(float));

        totalBytes += frameCount;
    }
}

return total;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:23:26.100

我能想到的测试方法只有几种：

*   将您加载的数据与您知道有效的数据加载的数据进行比较

*   以某种方式播放音频数据（可能使用`AudioQueue`）

# assembly - 32 位 Linux x86 汇编代码和输出垃圾

> ID：15599874
> 
> 赞同：0
> 
> 时间：2013-03-24T14:49:55.007
> 
> 标签：assembly, x86

我今天正在做一些编码，并在其他主题的帮助下尝试编写自己的程序。它的想法是将我在开始时输入的值（它是 ascii）更改为正常值。所以，我想在控制台中看到：

1.  编号 [A-1, .., Z-26] A
2.  1

我输入 A 时的输出为 1，B 为 2，依此类推。我得到的输出是大量垃圾。

这是我的代码：

```
SYSCALL = 0X80
SYSEXIT = 1
SYSREAD = 3
SYSWRITE = 4
STDIN = 0
STDOUT = 1  

.data
.align 32

NUMBER_MAXLEN = 2
NUMBER: .space NUMBER_MAXLEN
NUMBER_LEN: .long 0

MSG_NUMBER: .ascii "Number [A-1, .., Z-26] "
MSG_NUMBER_LEN = . - MSG_NUMBER

.text
.global _start

_start:

#show
mov $SYSWRITE, %eax
mov $STDOUT, %ebx
mov $MSG_NUMBER, %ecx
mov $MSG_NUMBER_LEN, %edx
int $SYSCALL

#read
mov $SYSREAD, %eax
mov $STDIN, %ebx   
mov $NUMBER, %ecx
mov $NUMBER_MAXLEN, %edx
int $SYSCALL

#length
sub $1, %eax
mov %eax, NUMBER_LEN

#Change to normal value
xor %eax, %eax
movb NUMBER, %al
sub $'A', %al
add $1, %al
movb %al, NUMBER

#Print
mov $SYSWRITE, %eax
mov $STDOUT, %ebx
mov $NUMBER, %ecx
mov $NUMBER_LEN, %edx
int $SYSCALL     

END:
mov $SYSEXIT, %eax
int $SYSCALL 
```

我做错了什么？怎么能好..修好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:21:21.307

系统`__nr_write`调用 (4) 只是打印字符串，它不充当`printf`函数。因此，您需要在打印之前将数字转换为其字符串表示形式。

这是一些伪代码，说明了如何做到这一点：

```
char buffer[10];
char *p = &buffer[9];

*p = 0;  // NULL terminator
do {
  p--;
  *p = (number % 10) + '0';
  number /= 10;
} while (number != 0);

print(buffer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:37:41.850

如果用户输入“Z”，你要打印“26”吗？您可以使用查找表，或者自己进行一些转换。英特尔/NASM 格式：

```
%define SYSCALL  0X80
%define SYSEXIT  1
%define SYSREAD  3
%define SYSWRITE  4
%define STDIN  0
%define STDOUT 1  

%define NUMBER_MAXLEN 2
section .data

MSG_NUMBER: db "Number [A-1, .., Z-26] ", 0
MSG_NUMBER_LEN equ $ - MSG_NUMBER

section .bss

NUMBER:         resb NUMBER_MAXLEN
NumToPrint      resb 3
NUMBER_LEN:     resd 1

section .text
global main

main:

;show
    mov     eax, SYSWRITE
    mov     ebx, STDOUT
    mov     ecx, MSG_NUMBER
    mov     edx, MSG_NUMBER_LEN
    int     SYSCALL

;~ #read
    mov     eax, SYSREAD
    mov     ebx, STDIN
    mov     ecx, NUMBER
    mov     edx, NUMBER_MAXLEN
    int     SYSCALL

;~ #length
    sub     eax, 1
    mov     NUMBER_LEN, eax 

;~ #Change to normal value
    movzx   eax,  byte [NUMBER]
    push    eax
    call    IsValidChar
    test    eax, eax
    js      main                            ; not valid input, repeat prompt

    push    NumToPrint
    push    eax
    call    dwtoa                           ; convert to ASCII

;~ #Print
    mov     edx, eax
    mov     eax, SYSWRITE
    mov     ebx, STDOUT
    mov     ecx, NumToPrint        
    int     SYSCALL    

End:
    mov     eax, SYSEXIT
    int     SYSCALL

;~ #########################################    
IsValidChar:
    mov     eax, [esp + 4]

.0to9:
    cmp     eax, "0"
    jb      .NoGood
    cmp     eax, "9"
    ja      .AtoZ
    jmp     .NoGood

.AtoZ:
    cmp     eax, "A"
    jb      .NoGood
    cmp     eax, "Z"
    ja      .atoz
    sub     eax, 64                         ; convert letter index to number equiv.
    jmp     .Done

.atoz:
    cmp     eax, "a"
    jb      .NoGood
    cmp     eax, "z"
    ja      .NoGood
    sub     eax, 96                         ; convert letter index to number equiv.
    jmp     .Done

.NoGood:
    xor     eax, eax
    dec     eax
.Done:
    ret     4 
```

您将需要创建自己的 dwtoa（DWORD 到 ASCII）。

![在此处输入图像描述](../Images/fae289dab132bc73693add1ae3e1b382.png)

# jquery - 基于下拉选择启用/禁用输入（jQuery）

> ID：15599875
> 
> 赞同：0
> 
> 时间：2013-03-24T14:50:02.987
> 
> 标签：jquery, drop-down-menu, input, selection, state

我的网站每行有两个输入和一个下拉列表。
要正确解释。

我得到了输入：“开始”和“结束”来设置我的商店的营业时间，以及一个下拉菜单来选择当天是“完全关闭”还是“24 小时营业”。这是一周中的每一天。

根据下拉列表的选择，我想禁用输入字段。因此，如果我选择“关闭”，“开始”和“结束”这两个字段将被禁用，但仅限于一天而不是所有天。

**我尝试**
根据选择禁用和启用所有“开始”/“结束”输入。

**JS：**

```
<script>
$(document).ready(function() {
    var $dropdown = $('.dropdown_time'),
    $time = $('.timepicker');
    $dropdown.change(function() {
    if ($dropdown.val() != '1') {
        $time.removeAttr('disabled');
    } else {
        $time.attr('disabled', 'disabled').val('');
    }
    }).trigger('change'); // added trigger to calculate initial state
});
</script> 
```

**HTML（精简为“两天”：**

```
<div class="row">
    <label for="store_tuesday" class="right inline">Dienstag:</label>
    <input type="text" class="timepicker" placeholder="Von">
    <input type="text" class="timepicker" placeholder="Bis">
    <select name="store_opening_tuesday" id='customDropdown' class='medium dropdown_time'>
        <option value="1">Ruhetag</option>
        <option value="2">24 Std.</option>
        <option value="3" selected="selected">-</option>
    </select>   
</div>
<div class="row">
    <label for="store_wednesday" class="right inline">Mittwoch:</label>
    <input type="text" class="timepicker" placeholder="Von">
    <input type="text" class="timepicker" placeholder="Bis">
    <select name="store_opening_wednesday" id='customDropdown' class='medium dropdown_time'>
        <option value="1">Ruhetag</option>
        <option value="2">24 Std.</option>
        <option value="3" selected="selected">-</option>
    </select>   
</div> 
```

**目标：**
每行的下拉菜单应仅禁用/启用“他”行中的输入，而不是其他行。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:06:21.213

您需要单独配置每一行。使用您的代码将是这样的：

```
<script>
    $(document).ready(function() {
        $('.row').each(function(){
            var $dropdown = $(this).find('.dropdown_time'),
            $time = $(this).find('.timepicker');
            $dropdown.change(function() {
                if ($dropdown.val() != '1') {
                    $time.removeAttr('disabled');
                } else {
                    $time.attr('disabled', 'disabled').val('');
                }
            }).trigger('change'); // added trigger to calculate initial state
        });
    });
</script> 
```

# asp.net - WCF 服务部署命名空间“System.Web”中不存在类型或命名空间名称“MVC”

> ID：15599880
> 
> 赞同：0
> 
> 时间：2013-03-24T14:50:27.347
> 
> 标签：asp.net, .net, asp.net-mvc, iis, iis-7

我使用[WCF REST SERVICE TEMPLATE](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)创建了一个 WCF REST Web 服务。我正在尝试使用 Visual Studio 2010 发布菜单部署它。它在 IIS 中创建虚拟目录，但是当我尝试浏览它时，它给出了错误：

编译器错误消息：CS0234：命名空间“System.Web”中不存在类型或命名空间名称“MVC”（您是否缺少程序集引用？）

源错误：

```
Line 63:         <add namespace="System.Web.Mvc.Ajax" />
**Line 64:         <add namespace="System.Web.Mvc.Html" />**
Line 65:         <add namespace="System.Web.Optimization" />
Line 66:         <add namespace="System.Web.Routing" />
Line 67:         <add namespace="System.Web.WebPages" /> 
```

在第 64 行缺少 MVC。我使用 NUGET 添加了参考，现在它说

编译器错误消息：CS0234：命名空间“System.Web”中不存在类型或命名空间名称“优化”（您是否缺少程序集引用？）

我的系统上安装了 Visual Studio 2012。是因为 IIS 正在寻找 asp.net 4.5 而应用程序池是 asp.net 4.0 吗？

请建议

[http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:19:07.567

你是`Microsoft.AspNet.Web.Optimization -Version 1.0.0`通过包管理器添加的吗？

# c# - 删除了未使用的引用问题

> ID：15599881
> 
> 赞同：0
> 
> 时间：2013-03-24T14:50:38.997
> 
> 标签：c#, visual-studio, asp.net-mvc-4, visual-studio-2012, compiler-errors

我使用了视觉工作室的“优化引用”功能并按下了“删除所有未使用的引用”......坏主意。现在我遇到了一个我不知道如何解决甚至从哪里开始的问题。当我编译并运行该网站时，编译器会中断并说缺少对 WebMatrix.Data 的引用（已被优化功能删除）...我已经重新添加了所有引用，但它仍然无法正常工作。

编译器错误为 CS0234，它指向此文件：c:\Users\joffa\AppData\Local\Temp\Temporary ASP.NET Files\root\5008f7ae\9fa08eff\App_Web_index.cshtml.a8d08dba.jwv3v7bj.0.cs 行：34

```
Rad 32:     #line default
Rad 33:     #line hidden
Rad 34:     using WebMatrix.Data;
Rad 35:     using WebMatrix.WebData;
Rad 36:     using Microsoft.Web.WebPages.OAuth; 
```

我已经删除了所有可以找到的临时文件并再次添加了引用，但错误不会消失。任何人都知道如何追踪这个？

编辑：它似乎与 asp.net mvc 4.5 附带的帐户/会员资格有关。

```
Rad 29:       #line 1 "C:\Users\joffa\path\Views\Home\Index.cshtml"
Rad 30:       
Rad 31:       
Rad 32:       #line default
Rad 33:       #line hidden
Rad 34:       using WebMatrix.Data;
Rad 35:       using WebMatrix.WebData;
Rad 36:       using Microsoft.Web.WebPages.OAuth;
Rad 37:       using DotNetOpenAuth.AspNet; 
```

我的文件中的这些隐藏行在哪里？

# xcode - Xcode 无法使用选定的设备运行

> ID：15599883
> 
> 赞同：1
> 
> 时间：2013-03-24T14:50:45.223
> 
> 标签：xcode

我发布这个问题是因为发布到现有线程的解决方案都没有对我有帮助。

今天早上一切正常，我按下了运行按钮，我的 iOS 模拟器在 Xcode 中显示了我实现的应用程序。

几个小时后，它显示此错误消息：

“Xcode 无法使用所选设备运行。没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。”

我的目标 iOS SDK 是 6.1 在摘要下我选择了 iPad 作为设备（如前所述） 在摘要下我选择了 6.1 作为部署目标。

我家里没有“真正的”iOS 设备，所以我一直使用模拟器。正如我所说，从今天下午开始不工作。

可能是什么问题？

# c# - 如何在 WPF 中进行操作之前延迟

> ID：15599884
> 
> 赞同：41
> 
> 时间：2013-03-24T14:50:47.073
> 
> 标签：c#, wpf, dispatcher, thread-sleep

在导航到下一个窗口之前，我尝试使用以下代码延迟 2 秒。但是线程首先调用，文本块显示一微秒并进入下一页。我听说调度员会这样做。

这是我的片段：

```
tbkLabel.Text = "two mins delay";
Thread.Sleep(2000);
Page2 _page2 = new Page2();
_page2.Show(); 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-03-24T15:02:35.493

对 Thread.Sleep 的调用阻塞了 UI 线程。您需要异步等待。

方法一：使用 DispatcherTimer

```
tbkLabel.Text = "two seconds delay";

var timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(2) };
timer.Start();
timer.Tick += (sender, args) =>
    {
        timer.Stop();
        var page = new Page2();
        page.Show();
    }; 
```

方法二：使用Task.Delay

```
tbkLabel.Text = "two seconds delay";

Task.Delay(2000).ContinueWith(_ => 
   { 
     var page = new Page2();
     page.Show();
   }
); 
```

方法3：.NET 4.5方式，使用async/await

```
// we need to add the async keyword to the method signature
public async void TheEnclosingMethod()
{
    tbkLabel.Text = "two seconds delay";

    await Task.Delay(2000);
    var page = new Page2();
    page.Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-12T13:20:02.080

方法 4：.NET 5.0+

```
 Task.WaitAll(new Task[] { Task.Delay(2000) }); 
```

该解决方案没有缺点。它可以用于“DispatcherTimer”和“ContinueWith”不可能的循环中。

# c++ - 无法将虚函数移到标头之外

> ID：15599887
> 
> 赞同：2
> 
> 时间：2013-03-24T14:51:04.417
> 
> 标签：c++, function, visual-c++, syntax, compilation

我有一个 C++ 类头文件，它内联定义了许多函数。我想将这些函数移到头文件之外并放入一个单独的`.cpp`文件中以加快编译速度。虽然我可以将普通函数移动到一个单独的文件中，并且只在标题中保留函数减速，但是当我尝试将虚拟函数移动到时，`.cpp`我收到以下错误：

> 错误 2 - 错误 C2723：函数定义上的“虚拟”存储类说明符非法

我怎么做？功能如下：

```
 virtual void SoundMixerSub::SetFilters(const MixerFilter& f)
 { 
....
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T14:52:52.210

As it says, you can't have `virtual` on the function definition outside the class, as per §7.1.2:

> The `virtual` specifier shall be used only in the initial declaration of a non-static class member function

Keep the `virtual` on the declaration and remove it from the definition. So in the header file:

```
class SoundMixerSub : ...
{
  // ...
  virtual void SetFilters(const MixerFilter&);
  // ...
}; 
```

Then in the implementation file:

```
void SoundMixerSub::SetFilters(const MixerFilter& f)
{ 
  // ...
} 
```

# jakarta-ee - 在 JBoss 7.1.x 中检测程序化部署的实际完成情况

> ID：15599888
> 
> 赞同：0
> 
> 时间：2013-03-24T14:51:07.737
> 
> 标签：jakarta-ee, jboss7.x

我正在开发一个在 JBoss 7.1.x 中执行 EJB 编程部署的应用程序。这是代码片段：

```
// connect
CommandContext cmdCtx = 
  CommandContextFactory.getInstance().newCommandContext(...);
cmdCtx.connectController();
ModelControllerClient ctrlClient = cmdCtx.getModelControllerClient();
// deploy
String command = 
  String.format("deploy \"%s\" --name=%s --server-groups=%s", path, name, group);
ModelNode request = cmdCtx.buildRequest(command);
ctrlClient.execute(request);
```

现在，我如何确定部署实际上已经完成？调用`ctrlClient.execute(request)`几乎立即返回，但服务器会继续处理部署一段时间。我需要知道它什么时候真正完成，也许它是否成功。

我的一个想法是编写自己的日志附加程序，并查找一些预定义的消息，但有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:54:28.230

不要使用 CLI API，而是尝试使用`org.jboss.as.controller.client.helpers.standalone.DeploymentPlan`或`org.jboss.as.controller.client.helpers.domain.DeploymentPlan`API。[您可以在maven-plugin](https://github.com/jbossas/jboss-as-maven-plugin/blob/master/src/main/java/org/jboss/as/plugin/deployment/domain/DomainDeployment.java)源代码中看到一个示例。（请注意，这是您正在部署到域服务器的域之一）

# css - 标签上的文字单击时不滑动

> ID：15599891
> 
> 赞同：0
> 
> 时间：2013-03-24T14:51:12.503
> 
> 标签：css

我有一个手风琴滑块。我的滑块标签文本有问题，单击时不会滑动。[这是我网站的网址。](http://pep-perspectives.com/734-2/)

文本的 CSS：

```
.accordion label h7{ 
position: absolute;
cursor:pointer; 
display: block;
-webkit-backface-visibility: hidden; /* fixes chrome bug */
-webkit-transform: translateX(-100%) rotate(-90deg); 
-webkit-transform-origin: right top; 
-moz-transform: translateX(-100%) rotate(-90deg);
-moz-transform-origin: right top; 
-o-transform: translateX(-100%) rotate(-90deg); 
-o-transform-origin: right top; 
transform: translateX(-100%) rotate(-90deg); 
transform-origin: right top;
} 
```

我错过了什么？他们是一种使滑块自动滑块延迟几秒钟的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:03:46.623

问题是`.accordion label h7`设置为`position:absolute`. 如果您删除它，您会注意到文本开始滑动。

我为生成的成束文本找到的解决方法是将宽度设置为`.accordion label h7`.

```
.accordion label h7 {
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:02:51.637

文本在滑动，但没有更新。一旦某些 CSS 属性发生变化，文本就会跳到正确的位置。因此，也许可以在开始为文本设置动画之前尝试更改 CSS 属性，并在动画完成后再次将其删除（类似于没有人会看到的边框颜色）。（[相关的SO问题](https://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes)）

# c++ - 使用 C++ 代码确定保管箱文件夹和谷歌驱动器文件夹？

> ID：15599893
> 
> 赞同：0
> 
> 时间：2013-03-24T14:51:21.237
> 
> 标签：c++, dropbox

我正在编写一个程序，我想自动确定是否安装了 dropbox，如果是，则将文件保存在 dropbox 文件夹中，以用作安装在一堆计算机上的同一程序的同步功能。

# objective-c - 如何检查wifi网络密码的有效性

> ID：15599894
> 
> 赞同：1
> 
> 时间：2013-03-24T14:51:28.670
> 
> 标签：objective-c, xcode, macos, wifi

基本上我有网络接口，wifi网络名称，密码等信息，我试图通过尝试登录wifi并获取接收到的消息来检查wifi密码是否正确是否正确。到目前为止，我已经尝试使用 network setup 命令行命令连接到 wifi 网络，该命令一直有效，直到我尝试将输出从它获取到应用程序中，所以我想知道是否有人知道我可以使用该命令行工具的简单方法该应用程序或我可以使用的任何内置方式不依赖于命令行。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:54:00.240

您应该尝试[CoreWLAN 框架](http://developer.apple.com/library/mac/#documentation/Networking/Reference/CoreWLANFrameworkRef/_index.html)。文档很差，但框架很简单，并且有一个[示例](http://developer.apple.com/library/mac/#samplecode/CoreWLANWirelessManager/Introduction/Intro.html)（它有些过时，您会收到一些弃用警告）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-07T09:29:04.380

在 Mac 上，您可以在终端中使用这行 bash 登录 wifi 网络：

```
networksetup -setairportnetwork port networkname password 
```

***如果密码错误，将返回错误-3905***

*笔记：*

**端口**是您的 wifi 端口（在我的 Mac 上是端口 en0）

**networkname**是网络的名称，例如 Starbucks

**密码**只是网络的直接密码

如果密码已经保存在您的钥匙串中，则不需要该参数

# jenkins - 如何增加 Jenkins 从节点的连接重试周期

> ID：15599902
> 
> 赞同：5
> 
> 时间：2013-03-24T14:52:09.070
> 
> 标签：jenkins

我有一个带有许多从节点的分布式 Jenkins 设置。有时当主节点重新启动时，它需要一段时间才能恢复，我会失去所有从节点。有没有办法为从节点设置重试周期？我想增加它说一小时，或者无限期地重试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T16:44:29.453

根据[从控制台启动 slave.jar](https://wiki.jenkins-ci.org/display/JENKINS/Launching+slave.jar+from+from+console)它应该以相反的方式发生：

> *slave.jar 旨在由 Jenkins 启动。[...] slave.jar**并不是**要自己发起与主服务器的连接*

还有一个选项可以[编写自己的脚本来启动 Jenkins slaves](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds#Distributedbuilds-WriteyourownscripttolaunchJenkinsslaves)。

# javascript - 可以在 jQuery 中调用常规 JavaScript 函数吗？

> ID：15599903
> 
> 赞同：0
> 
> 时间：2013-03-24T14:52:14.883
> 
> 标签：javascript, jquery

在 jQuery 脚本中调用常规 JavaScript 函数是正确的还是应该是外部的（它只会被 jQuery 脚本访问/使用）？我知道它有效，但我想确保我使用的是最佳实践。例如：

```
$(function(){

    $('.click1').click(function(){
         dofunction();
    }

    $('.click2').click(function(){
         dofunction();
    }

    function testing(grid_array){
         alert('function works!');  
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:53:48.913

jQuery 是一个添加工具的 JavaScript 库，其中大部分帮助处理 DOM、AJAX 或跨浏览器问题。因此，您的 jQuery 脚本也是一个 JavaScript 脚本。

从使用 jQuery 编写的代码中调用非基于 jQuery 的函数是完全正常的、推荐的并且很好。事实上，你几乎无法避免这种情况。

相关：[jQuery 和 JavaScript 有什么区别](https://stackoverflow.com/questions/2490590/what-is-the-difference-between-jquery-and-javascript)

# javascript - 隐藏整列

> ID：15599904
> 
> 赞同：0
> 
> 时间：2013-03-24T14:52:21.410
> 
> 标签：javascript, jquery, html

隐藏它所在的列。我已经创建了。

我的桌子在下面；

```
<table id="tester" border='1'>
<tbody>
    <tr>
        <td>test1</td>
        <td>test2</td>
        <td>test3</td>
    </tr>
    <tr>
        <td>test1</td>
        <td></td>
        <td>test3</td>
    </tr>
    <tr>
        <td>test1</td>
        <td>test2</td>
        <td>test3</td>
    </tr>
    <tr>
        <td>test1</td>
        <td>test2</td>
        <td>test3</td>
    </tr>
    <tr>
        <td>test1</td>
        <td>test2</td>
        <td>test3</td>
    </tr>
</tbody>
</table> 
```

我正在尝试使用的 Jquery 在下面；

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:00:01.803

尝试这个：

```
function hidecol2() {
    var cell = $('#tester > tbody > tr:eq(1) > td:eq(1)');
    if (cell.text() == '') cell.parent().parent().children().children(':nth-child(2)').hide;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:51:13.533

如果其中一个单元格为空，要隐藏整列，请使用以下命令：

```
$.each($('td:empty'), function(){
  $('td:nth-child(' + ($(this).index() + 1) + ')').hide();
}); 
```

[jsFiddle](http://jsfiddle.net/8ScRn/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:59:35.207

我认为你正在寻找。

```
$.each($('table > tbody > tr'), function(){
  if($(this).find('td:empty').length>0){
    // You can hide
    $(this).hide();

    // Or Remove
    $(this).remove();

    // Or Fadeout and remove
    $(this).fadeOut(250, function(){$(this).remove();});
  }
}); 
```

# wpf - 是否可以发送列表 in MVVM Light Message Is it possible to send a List in MVVM Light Message. For example, I have a class named Authors. I want to send Messenger.Default.Send(AuthorList); // AuthorList is of type L 问问题 问问题 2013-03-24T14:52:21.720 2047 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Is it possible to send a List in MVVM Light Message. For example, I have a class named Authors. I want to send Messenger.Default.Send(AuthorList); // AuthorList is of type List <author>in the constructor of the view model I am writing Messenger.Default.Register<list<author>>(this, authList => {MessageBox.Show(authList[0].name)}); I have made sure that the constructor is called before I send the message. But it doesn't seem to work. Centering Multiple Items In my app, I have a bunch of rectangles. I am trying to horizontally centerize all of these rectangles on the screen. (The center is screen_width/2) Here is my code so far (for your viewing pleasure), for (var j=0;j<rectangles.length;j++){ rectangle="rectangles[j];" var="" margin="120;" coefficent="0;" center_index="Math.ceil(rectangles.length/2);" if="" (j="">center_index){ coefficent=1; }else if (j <center_index){ 1="" 3="" 4="" coefficent="-1;" }="" var="" x="(screen.width-rectangle.width)/2+j*margin*coefficent;" rectangle.setx(x);="" this="" code="" puts="" everything="" in="" the="" center="" (not="" cool).="" any="" help="" on="" problem="" would="" be="" splendidly="" appreciated.="" edit:="" sorry="" for="" not="" being="" clear,="" heres="" another="" image="" to="" more="" clear="" (the="" line,="" is="" line):="" so="" you="" can="" see,="" that="" we="" are="" shifting="" all="" rectangles="" middle="" rectangle="" center.="" like="" when="" press="" button="" centerize="" text="" horizontally="" a="" word="" document,="" i="" am="" trying="" do="" with="" rectangles.="" wpfmvvmmvvm-light="" 回答="" answer="" useful="" 是的="" 。创建你的类（我正在使用其中有一个简单字符串属性的="" mytest）：="" public="" partial="" class="" mytest="" {="" mytest(string="" some_string)="" s="some_string;" string="" get;="" set;="" 您可以从任何地方调用它，在="" viewmodel="" 中，我添加了一个按钮，该按钮将创建该列表并将其发送到不同的视图。：="" private="" void="" button_click(object="" sender,="" routedeventargs="" e)="" list_of_objects="new" list<mytest="">{ new MyTest("one"), new MyTest("two") }; Messenger.Default.Send(list_of_objects ); } 在接收 ViewModel 上，在构造函数中添加这个以注册到该类型的消息，并创建一个将在消息到达时调用的方法： // When a message with a list of MyTest is received // this will call the ReceiveMessage method : Messenger.Default.Register<list<mytest>>(this, ReceiveMessage); 实现回调方法： private void ReceiveMessage(List <mytest>list_of_objects) { // Do something with them ... i'm printing them for example list_of_objects.ForEach(obj => Console.Out.WriteLine(obj.S)); } 你完成了 ：） 于 2013-09-27T07:31:11.940 回答 Related 3 google-apps-script - 如何删除手动换行符 0 cocos2d-iphone - 旋转 CCSprite 那是一个等边三角形 4 javascript - 替换 Windows '\\' 路径中的文件名 1 iphone - CCLabelBMFont 似乎找不到字体文件？ 2 android - 如何解析这种格式的xml？ 2 php - 以数字为索引的PHP关联数组 1 ruby - 哈希数组 -> 特定值数组 3 android - PhoneGap + jQuery Mobile = 缓慢的点击响应时间 10 ruby-on-rails - collection_select 的多个值 3 c++ - Base 64 编码丢失数据 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</mytest></list<mytest></center_index){></rectangles.length;j++){></list<author></author>

> ID：15599905
> 
> 赞同：3
> 
> 时间：
> 
> 标签：wpf, mvvm, mvvm-light

Is it possible to send a List in MVVM Light Message.

For example, I have a class named Authors. I want to send

```
Messenger.Default.Send(AuthorList); // AuthorList is of type List<Author> 
```

in the constructor of the view model I am writing

```
Messenger.Default.Register<List<Author>>(this, authList => 
    {MessageBox.Show(authList[0].name)}); 
```

I have made sure that the constructor is called before I send the message. But it doesn't seem to work.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T07:31:11.940

是的 。创建你的类（我正在使用其中有一个简单字符串属性的 MyTest）：

```
public partial class MyTest
{
    public MyTest(string some_string)
    {
        S = some_string;
    }

    public string S { get; set; }
} 
```

您可以从任何地方调用它，在 ViewModel 中，我添加了一个按钮，该按钮将创建该列表并将其发送到不同的视图。：

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        var list_of_objects = new List<MyTest> { new MyTest("one"), new MyTest("two") };
        Messenger.Default.Send(list_of_objects );
    } 
```

在接收 ViewModel 上，在构造函数中添加这个以注册到该类型的消息，并创建一个将在消息到达时调用的方法：

```
// When a message with a list of MyTest is received
// this will call the ReceiveMessage method  :  
Messenger.Default.Register<List<MyTest>>(this, ReceiveMessage); 
```

实现回调方法：

```
private void ReceiveMessage(List<MyTest> list_of_objects)
    {
        // Do something with them ... i'm printing them for example         
        list_of_objects.ForEach(obj => Console.Out.WriteLine(obj.S));
    } 
```

你完成了 ：）

# javascript - 居中多个项目

> ID：15599906
> 
> 赞同：0
> 
> 时间：2013-03-24T14:52:27.643
> 
> 标签：javascript, algorithm

在我的应用程序中，我有一堆矩形。

![在此处输入图像描述](../Images/ac155be96409c9b5a3276bbd1eaa3ab0.png)

我正在尝试将屏幕上的所有这些矩形水平居中。（中心为 screen_width/2）

到目前为止，这是我的代码（为了您的观看乐趣），

```
 for (var j=0;j<rectangles.length;j++){
                rectangle=rectangles[j];
                                    var margin=120;
                var coefficent=0;
                var center_index=Math.ceil(rectangles.length/2);
                if (j>center_index){
                     coefficent=1;
                }else if (j<center_index){
                    coefficent=-1;
                }

                var x=(screen.width-rectangle.width)/2+j*margin*coefficent;
                rectangle.SetX(x);

                } 
```

此代码将所有内容放在中心（不酷）。

对此问题的任何帮助将不胜感激。

编辑：

很抱歉没有说清楚，

这是另一个更清晰的图像（线，是中心线）：

![在此处输入图像描述](../Images/cf8f41862faad05c7d07c6483a1c69bf.png)

所以你可以看到，我们正在移动所有的矩形，使中间的矩形在中心。

**就像您按下中心按钮以在 Word 文档上水平居中文本一样，我正在尝试使用矩形来执行此操作。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:23:16.727

不确定没有完整的代码（我建议使用 jsfiddle），但您似乎使用 center = width/2 来处理超过 2 个矩形。如果您有 3 个矩形，则使用绝对中心定位将不起作用。我建议通过将宽度除以矩形的数量来居中，然后将其用作每个矩形的中心点，即（未经测试的伪代码，因为我没有完整的代码。我还添加了一些不需要的变量，例如currentRectHalf 宽度试图使事情更清晰）：

```
 var width=500; //fill in with your width
  var margin=120; //margin
  var numRectangles=rectangles.length; //from your example
  var offset=width/numRectangles;
  for(var i=0;i<numRectangles;i++) {
    currentRectHalfWidth=rectangle.width/2;
    currentCenter=(offset+1)*offset+margin-currentRectHalfWidth; //+1 because of zero index array
    rectangle.SetX(x);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:56:39.177

看起来好像您没有设置矩形的 Y 值。您需要在代码中的某处设置它们的 Y 值，这样它们就不会都在精确的中心。

# facebook-ios-sdk - Facebook native ios login error with test user

> ID：15599917
> 
> 赞同：10
> 
> 时间：2013-03-24T14:53:15.867
> 
> 标签：facebook-ios-sdk

I'm getting the following error when attempting to use the ios6 native facebook login

```
The Facebook server could not fulfill this access request: Temporarily unable to make API calls on behalf of XYZ 
```

The login works fine if I remove the ios facebook user from settings and use the webview style of login rather than the built in ios way. It also works if I don't use the fb test user. I've checked the test user's permissions and it has all the read and write permissions. Are test users not allowed to use the native ios login?

Is this an error on Facebook's servers? How can I further diagnose this?

here's the full error output

```
2013-03-24 10:45:57.701 HelloFacebookSample[39800:19a03] FBLoginView encountered an error=Error Domain=com.facebook.sdk Code=2 "The operation couldn’t be completed. (com.facebook.sdk error 2.)" UserInfo=0xa288a00 {com.facebook.sdk:ErrorLoginFailedReason=com.facebook.sdk:SystemLoginCancelled, com.facebook.sdk:ErrorInnerErrorKey=Error Domain=com.apple.accounts Code=7 "The Facebook server could not fulfill this access request: Temporarily unable to make API calls on behalf of 10000000" UserInfo=0xa157760 {NSLocalizedDescription=The Facebook server could not fulfill this access request: Temporarily unable to make API calls on behalf of 10000000}, com.facebook.sdk:ErrorSessionKey=<FBSession: 0xa27e530, state: FBSessionStateClosedLoginFailed, loginHandler: 0x0, appID: 20000000, urlSchemeSuffix: , tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0xa2742c0>, expirationDate: (null), refreshDate: (null), attemptedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:(null)>} 
```

I am using a test facebook user that has been added to the testers group of the app

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:34:50.063

我还没有足够的声望来投票，但 MonkeyBonkey 是对的。我遇到了同样的问题，将 Facebook 的测试用户更改为其他“真正的”Facebook 用户，它成功了！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T08:51:03.620

只要应用程序设置为“实时”，您就可以使用测试用户登录应用程序。为此，请转到此处[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并单击“状态和审查”，然后确保将开关设置为“打开”。如果它是灰色的，只需将鼠标悬停在它上面，它就会告诉你想要让它生效，我错过了联系电子邮件。

如果要创建测试用户，请转到“角色”，然后转到“测试用户”选项卡。

希望对某人有所帮助。

# clojure - tracking down AWT exception in Clojure UI app under Leiningen

> ID：15599918
> 
> 赞同：3
> 
> 时间：2013-03-24T14:53:20.443
> 
> 标签：clojure, awt, leiningen

Referring to this SO [question on a first UI program in Clojure](https://stackoverflow.com/questions/2792451/improving-my-first-clojure-program), I created a new `Leiningen` app project:

```
lein new app a-ui-app 
```

copied the source into the `core.clj` that leiningen generated and modified the `-main` routine to call it

```
(defn -main
  "See https://stackoverflow.com/questions/2792451/improving-my-first-clojure-program?rq=1."
  [& args]
  ;; work around dangerous default behaviour in Clojure
  (alter-var-root #'*read-eval* (constantly false))

  (doto panel
        (.setFocusable true)
        (.addKeyListener panel))

  (doto frame
        (.add panel)
        (.pack)
        (.setDefaultCloseOperation JFrame/EXIT_ON_CLOSE)
        (.setVisible true))

  (loop []
        (draw-rectangle panel @x @y)
        (Thread/sleep 10)
        (recur))
  ) 
```

I then run it via either

```
lein run 
```

or

```
lein uberjar
java -jar ./target/a-ui-app-0.1.0-SNAPSHOT-standalone.jar 
```

In both cases, the app works well, but in the terminal that I used to start it up, I get an exception after a random delay of several seconds:

> Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: No matching clause: 157 at a_ui_app.core$fn__16$fn__21$fn__22.invoke(core.clj:19) at clojure.lang.AFn.call(AFn.java:18) at clojure.lang.LockingTransaction.run(LockingTransaction.java:263) at clojure.lang.LockingTransaction.runInTransaction(LockingTransaction.java:231) at a_ui_app.core$fn__16$fn__21.invoke(core.clj:17) at a_ui_app.core.proxy$javax.swing.JPanel$KeyListener$6c415903.keyPressed(Unknown Source) at java.awt.Component.processKeyEvent(Component.java:6340) at javax.swing.JComponent.processKeyEvent(JComponent.java:2809) at a_ui_app.core.proxy$javax.swing.JPanel$KeyListener$6c415903.processKeyEvent(Unknown Source) at java.awt.Component.processEvent(Component.java:6159) at java.awt.Container.processEvent(Container.java:2083) many more lines...

I made no changes to `project.clj` -- just used the leiningen-generated one.

I'd like to understand what's going on. I am by no means knowledgeable in Java Threading. Is the problem related to the way leiningen launches the app's Java threads? Is it unavoidable? If not, how can I fix it, both for this little sample program and going forward, as a project pattern for future projects using the UI thread (which I think is `AWT-EventQueue-0`).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:42:12.833

我不知道你为什么会得到那个错误，但我会说你做错了几件事： Swing 是一个复杂的野兽；)

Swing 不是线程安全的。关于在 EDT（事件调度线程/UI 线程）上可以做什么和不可以做什么的“规则”随着时间的推移而改变……在某个时候，Sun 决定所有修改 Swing 组件的事情都应该在 EDT 上完成。

因此，从另一个忙于旋转循环的线程中绘制矩形是一个很大的禁忌。此外，您绘制的方式也不正确：您不应该直接获取 Graphics 对象并从其他线程修改它（这是一种超级黑客，应该会触发疯狂的闪烁）。一种“正确”的 Swing 方法是覆盖`paintComponent(Graphics g)`Java 方法并在那里进行绘图：因此，每次需要重绘该组件时，都会正确地重绘它。

*这是使用paintComponent*绘制矩形的代码的修改版本（我没有修复嵌套的if语句应该是一个案例等） ：

```
(import java.awt.Color)
(import java.awt.Dimension)
(import java.awt.event.KeyListener)
(import javax.swing.JFrame)
(import javax.swing.JPanel)

(def x (ref 0))
(def y (ref 0))

(def panel
  (proxy [JPanel KeyListener] []
    (paintComponent [g]
      (proxy-super paintComponent g)
      (doto g
        (.setColor (java.awt.Color/WHITE))
        (.fillRect 0 0 100 100)
        (.setColor (java.awt.Color/BLUE))
        (.fillRect (* 10 @x) (* 10 @y) 10 10)))
    (getPreferredSize [] (Dimension. 100 100))
    (keyPressed [e]
      (let [keyCode (.getKeyCode e)]
        (if (== 37 keyCode) (dosync (alter x dec))
        (if (== 38 keyCode) (dosync (alter y dec))
        (if (== 39 keyCode) (dosync (alter x inc))
        (if (== 40 keyCode) (dosync (alter y inc))))))
        (.repaint this)
        ))
    (keyReleased [e])
    (keyTyped [e])))

(def frame (JFrame. "Test"))

(defn -main [& args]

  (doto panel
        (.setFocusable true)
        (.addKeyListener panel))

  (doto frame
        (.add panel)
        (.pack)
        (.setDefaultCloseOperation JFrame/EXIT_ON_CLOSE)
        (.setVisible true))) 
```

我不太喜欢分别`deref`'ing x 和 y ：但是 AFAICT`paintComponent`和关键侦听器触发器都保证在 EDT 上发生，因此您的情况下的读数应该是一致的。如果我是你，我仍然会使用单个`xy`def。

我对 JPanel 也有点困惑，它也是一个 KeyListener 和 -main 函数，然后将 KeyListener 添加到自己：`(doto panel (.addKeyListener panel))`感觉很奇怪。可能没问题，我不知道：只是感觉很奇怪：）

现在关于您的异常，我不知道，但 Swing EDT 实际上偶尔会抛出异常，因为 Swing 有很多错误*，并且*因为 Swing 正确使用非常复杂，以至于程序往往会犯很多诚实的错误。根据平台/JVM，要么捕获异常并且 EDT 继续运行，要么自动启动新的 EDT **。**通常你不应该能够“崩溃” EDT，因为如果 EDT 崩溃它应该会自动重启。这就是为什么您看到异常但您说您的程序仍然“运行良好”的原因。

我会说异常和神秘的堆栈跟踪与 Swing 不是线程安全的并且你做奇怪的事情有关：旋转循环获取面板的底层 Graphics 对象并弄乱它，但我真的不确定。

您进行上述修改的代码似乎正在做您想做的事，而且不会眨眼。

希望能帮助到你。

# github - knitr markdown 到 knitr latex 或反之亦然

> ID：15599923
> 
> 赞同：1
> 
> 时间：2013-03-24T14:53:53.430
> 
> 标签：github, workflow, knitr

我正在写一篇经济学论文并使用[RopenSci 工作流程](http://ropensci.org/)（Rstudio、Github、knitr）。

因为我需要 PDF 草案，所以我使用的是 knitr。不过，我也在编辑 README.md 文件来描述 github 上的项目。

我的问题是从乳胶编织文件到降价编织文件是否最容易，或者相反？

# android - WebView 不包装内容

> ID：15599931
> 
> 赞同：3
> 
> 时间：2013-03-24T14:54:35.043
> 
> 标签：android, webview, android-webview

我无法`WebView`包装显示的内容。问题是`WebView`宽度是整个屏幕，而高度大约是 300px。我怎样才能让它包装内容并像文件一样？

这是我当前的布局 XML：

```
 <WebView
  android:id="@+id/animation_1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:08:10.667

**Webview**是为呈现**没有 size的****HTML**页面而构建的。所以它无法确定不存在的东西并根据它重新调整大小，就像在 src 图像更改时 ImageView 调整大小一样。

 **您最好的选择是将 webview 的大小设置为固定值*，可能带有权重*，当页面大于 webview 本身时，用户将不得不在其中滚动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-11T06:42:26.067

请点击此[链接](https://code.google.com/p/android/issues/detail?id=18726)

这里提到WebView有错误，即“当内容大小减小时，包装内容大小的webview不会减小大小”**

# android - ListView 项目写入

> ID：15599932
> 
> 赞同：0
> 
> 时间：2013-03-24T14:54:53.650
> 
> 标签：android, eclipse, listview

我想要的是在 ListView 中写入所选项目。

公共类 MainActivity 扩展 ListActivity {

```
private BenzinCursorAdapter Adapter;

private BenzinDbLoader dbLoader;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);         

    dbLoader = new BenzinDbLoader(getApplicationContext());
    dbLoader.open();
    Cursor c = dbLoader.fetchAll();

    Adapter = new BenzinCursorAdapter(getApplicationContext(), c);
    setListAdapter(Adapter);

    getListView().setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent,
            View v, int position, long id){
                //Benzin selectedbenzin = (Benzin) parent.getSelectedItem();
        Benzin selectedbenzin = (Benzin) getListAdapter().getItem(position);
        Toast.makeText(MainActivity.this, selectedbenzin.getDate(), Toast.LENGTH_LONG).show();
            }
    });

    registerForContextMenu(getListView());

} 
```

ListView item 一个 Benzin 元素

```
 public class Benzin {
        private String Date;
        private String Kmo;
        private String Mkm;
        private String Hl;
        private String Mft;
        private String Af;
        private String Osszk;

        public Benzin(String aDate, String aKmo, String aMkm, String aHl,
                String aMft, String aAf, String aOsszk) {
            Date = aDate;
            Kmo = aKmo;
            Mkm = aMkm;
            Hl = aHl;
            Mft = aMft;
            Af = aAf;
            Osszk = aOsszk;

        }

        public String getDate() {
            return Date;
        }

        public String getKmo() {

            return Kmo;
        }

        public String getMkm() {
            return Mkm;
        }

        public String getHl() {
            return Hl;
        }

        public String getMft() {
            return Mft;
    }

    public String getAf() {
        return Af;
    }

    public String getOsszk() {
        return Osszk;
    }

    } 
```

我想要的是在 ListView 中写入所选项目，但发生了这种情况

为什么会这样？

谢谢

![在此处输入图像描述](../Images/0d93fe46f25c4624633201c56cbb7c9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:16:05.620

日期是 Java/Android 的保留字。给你的变量一个不同的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:49:02.957

我发现了问题。这个好行：Cursor selectedbenzin = (Cursor) getListAdapter().getItem(position);

# javascript - 如何使用 JavaScript 为对象设置动画？

> ID：15599937
> 
> 赞同：0
> 
> 时间：2013-03-24T14:55:11.573
> 
> 标签：javascript, animation

我想动画一个对象（在我的例子中，一个div），从左到右移动100px，使用JUST javascript（不允许JQuery）。

这是我的代码[http://pastebin.com/HvNjQES0](http://pastebin.com/HvNjQES0)。

```
function move(elem) {
    var st = 0;
    console.log("ELEM " + elem);

    function animate() {
        st++;
        console.log(st);
        elem.style.left = st + 'px';
        console.log("elem" + elem.style.left);
        if (st == 100) // check finish condition
            clearInterval(id)
    }
    id = setInterval(animate, 10);
} 
```

HTML：

```
<button onclick="move(text_ex)">Click</button>       
<div id="text_ex" style="width:100px; height:100px; background-color:red"></div> 
```

我的代码有什么问题（它不起作用）？

欢迎任何其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:02:49.220

首先，如果要启用`div`可移动，则需要将其`display`样式设置为`absolute`或`relative`。

其次，在你的动画功能中，你需要通过`document.getElementById(elem)`";

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:02:23.263

添加`position:absolute`到您的 div 中，它会像魅力一样工作。

# facebook-graph-api - facebook api 图像未从 url 上传

> ID：15599945
> 
> 赞同：0
> 
> 时间：2013-03-24T14:56:36.020
> 
> 标签：facebook-graph-api

我有以下代码将图像上传到我的照片

```
 $args = array('message' => 'Photo Caption');
          $args['image'] = '@' . realpath('http://sawalpk.com/storyboard_server/outputImage.png');

          $data = $facebook->api('/me/photos', 'post', $args);
          print_r($data); 
```

如果我将图像按原样放置`realpath('someImage.png')`。记住`someImage.png`找到的是同一个目录。虽然使用外部图像的 url，但它不会上传并且不会返回任何数据进行调试。任何大师在这里帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:00:51.887

您必须将远程（[例如通过 CURL](https://stackoverflow.com/questions/6476212/save-image-from-url-with-curl-php/6476232#6476232)或 file_get_contents()）文件下载到服务器并通过`realpath()`本地传递。

实际上，您将请求发送到 Facebook Graph API，因此您不能包含远程文件。

相关问题：[上传远程照片到上传](https://stackoverflow.com/questions/7116359/upload-a-remote-photo-to-an-upload)

由于效率，我更喜欢 CURL：[https](https://stackoverflow.com/questions/555523/file-get-contents-vs-curl-what-has-better-performance) ://stackoverflow.com/questions/555523/file-get-contents-vs-curl-what-has-better-performance 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:03:38.337

这对我有用：

```
$picUrl = 'http://sawalpk.com/storyboard_server/outputImage.png';
$photoId = $facebook->api("me/photos","POST",array('url'=>$picUrl,'message'=>"Photo caption")); 
```

如果您有图像 url 而不是真实路径，请设置 'url' 参数。

# clojure - 无法进行排序映射并一起应用工作

> ID：15599947
> 
> 赞同：1
> 
> 时间：2013-03-24T14:56:48.083
> 
> 标签：clojure

我在使用带有 sorted-map-by 和 apply 的自定义比较器时遇到问题。如何使下面的表达式起作用-

```
(apply sorted-map-by > {1 "ab" 3 "cs" 2 "vs"}) 
```

我得到以下异常 -

> IllegalArgumentException 没有为键提供值：[3 "cs"] clojure.lang.PersistentTreeMap.create (PersistentTreeMap.java:87)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:28:12.280

Assuming you are wanting to sort on keys with an existing map, you could use `into`:

```
(into (sorted-map-by >) {1 "ab" 3 "cs" 2 "vs"}) 
```

This works because `(sorted-map-by >)` returns an empty sorted map, so using functions like `into` and `assoc` will work as expected while the map maintains the sorted order.

```
;=> {3 "cs", 2 "vs", 1 "ab"} 
```

The `sorted-map-by` function works on flat arguments:

```
(sorted-map-by > 1 "ab" 3 "cs" 2 "vs")
;=> {3 "cs", 2 "vs", 1 "ab"} 
```

Applying it to this map would give an odd number of pairs:

```
(apply list {1 "ab" 3 "cs" 2 "vs"})
;=> ([1 "ab"] [2 "vs"] [3 "cs"]) 
```

And it is trying to make every other one a value to a preceding key, hence the error.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:35:39.233

`apply`如果在编译时不知道要传递给函数的参数数量，您将使用. 所以最好的方法是使用

```
(into (sorted-map-by >) {1 "ab" 3 "cs" 2 "vs"}) 
```

# r - 替换 knitr 块评估中的“打印”功能

> ID：15599948
> 
> 赞同：9
> 
> 时间：2013-03-24T14:56:52.897
> 
> 标签：r, knitr, r-markdown

我想在编译 knitr rmarkdown 文档时将“pander”功能设置为替代“打印”功能。像这样（在 R 中运行的代码示例）：

```
require(pander)
print <- function(...) pander(..., style = "rmarkdown") # makes sure that everyhing that everyprint will pass through pander
summary(cars) 
```

这将导致：

```
> summary(cars)

----------------------------------
&nbsp;    speed          dist     
------ ------------ --------------
 ****  Min.  : 4.0   Min.  : 2.00 

 ****  1st Qu.:12.0 1st Qu.: 26.00

 ****  Median :15.0 Median : 36.00

 ****   Mean :15.4   Mean : 42.98 

 ****  3rd Qu.:19.0 3rd Qu.: 56.00

 ****  Max.  :25.0  Max.  :120.00 
---------------------------------- 
```

这样，我将得到所有表格的良好格式，而不是手动需要在整个文档中编写“pander”（想象我必须在文档中编写“summary(car) 20 次，更改“print”将节省我写 pander(summary(car)) )。

**那可能吗？（或者有没有我不知道的更聪明的方法？）**

谢谢。

更新：.rmd 文件的示例：

```
TEST
====

```{r}

require(pander)
print <- function(...) pander(..., style = "rmarkdown") # makes sure that everyhing that everyprint will pass through pander

summary(cars)
```

```{r, eval=FALSE}
library(knitr)
knit2html("test.rmd") # http://stackoverflow.com/questions/10646665/how-to-convert-r-markdown-to-html-i-e-what-does-knit-html-do-in-rstudio-0-9
# http://quantifyingmemory.blogspot.co.il/2013/02/reproducible-research-with-r-knitr.html
``` 
```

而输出 test.md 是：

```
TEST
====

```r

require(pander)
print <- function(...) pander(..., style = "rmarkdown")  # makes sure that everyhing that everyprint will pass through pander

summary(cars)
```

```
##      speed           dist    
##  Min.   : 4.0   Min.   :  2  
##  1st Qu.:12.0   1st Qu.: 26  
##  Median :15.0   Median : 36  
##  Mean   :15.4   Mean   : 43  
##  3rd Qu.:19.0   3rd Qu.: 56  
##  Max.   :25.0   Max.   :120
```

```r
library(knitr)
knit2html("test.rmd")  # http://stackoverflow.com/questions/10646665/how-to-convert-r-markdown-to-html-i-e-what-does-knit-html-do-in-rstudio-0-9
#
# http://quantifyingmemory.blogspot.co.il/2013/02/reproducible-research-with-r-knitr.html
``` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T15:31:54.393

您需要有选择地否决要使用 pander 打印的对象类的打印方法。`methods(pander)`弄清楚什么是可用的。某些方法不会导出，因此您必须使用`:::`才能访问它们。这是一个简单的例子。

```
TEST
====

```{r cache = F, comment = NA}
print.lm <- pander:::pander.lm
lm(mpg ~ wt, data = mtcars)
``` 
```

输出

```
TEST
====

```r
print.lm <- pander:::pander.lm
lm(mpg ~ wt, data = mtcars)
```

```

--------------------------------------------------------------
           &nbsp;  Estimate   Std. Error   t value   Pr(>|t|) 
----------------- ---------- ------------ --------- ----------
  **(Intercept)**   37.29       1.878       19.86   8.242e-19 

           **wt**   -5.344      0.5591     -9.559   1.294e-10 
--------------------------------------------------------------

Table: Fitting linear model: mpg ~ wt
``` 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T15:59:25.490

对于未来的读者——

根据 Ramnath 的回答，可以简单地使用：

```
require(pander)
print <- function (x, ...) UseMethod("pander") 
```

**更新**：我在下面的博客文章中组装了一个清晰的演练示例，激发了上述问题 -[使用 R 编写 MS-Word 文档（尽可能少的开销）](http://www.r-statistics.com/2013/03/write-ms-word-document-using-r-with-as-little-overhead-as-possible/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-18T05:57:45.617

我认为目前最好的选择是添加`opts_chunk$set(results="asis", render=pander)`. 然后，这将使用 pander 渲染所有块。

例如

```
```{r set_knitr_chunk_options, echo=FALSE, message=FALSE}
require(knitr)
require(pander)
opts_chunk$set(results = "asis", render=pander) # important for making sure the output will be well formatted.
```

```{r}
USJudgeRatings
``` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-20T09:09:01.570

另一种（当前的解决方法）方法是覆盖 evaluate:::default_output_handler 以对具有 pander 方法的结果进行 panderize，如下所述：

[https://github.com/yihui/knitr/issues/484#issuecomment-32705187](https://github.com/yihui/knitr/issues/484#issuecomment-32705187)

令人高兴的是，这种方法不需要“需要在整个文档中写入“pander””或“有选择地否决要使用 pander 打印的对象类的打印方法”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-25T09:08:10.200

我试图尽量减少基于@malcook[函数](https://github.com/yihui/knitr/issues/484#issuecomment-53947933)的误报和否定。

误报可能非常“昂贵”：在 knitr/rmarkdown 中调用时，在 ggplot2 对象和 data.frame 分配上调用 pander 会导致无休止的挂起而没有错误消息。我放在一个[包裹](https://github.com/rubenarslan/formr)里。

```
```{r}
pander_handler = function(x, ..., row.names = FALSE, dont_transform = c("knit_asis")) {
    anyS3method = function(x) {
        classes = class(x)
        any(
            sapply(classes, FUN = function(classes) {
                !is.null(utils::getS3method('pander',classes, TRUE, environment(pander::pander)))
            })
        )
    }
    if (length(intersect(dont_transform, class(x))) == 0 && anyS3method(x)) {
        pander::pander(x, row.names = row.names, ...) # if pander has a method, we use it
    } else {
        res = withVisible(knitr::knit_print(x, ...))
        # indicate the htmlwidget result with a special class so we can attach
        # the figure caption to it later in wrap.knit_asis
        if (inherits(x, 'htmlwidget'))
            class(res$value) = c(class(res$value), 'knit_asis_htmlwidget')
        if (res$visible) res$value else invisible(res$value)
    }

}

opts_chunk$set(render = pander_handler)
```

```{r}
library(data.table)
library(pander)
library(knitr)
library(ggplot2)
qplot(1:2)
plot(1:2)
xtabs(~ mpg + cyl, data = mtcars)
table(mtcars$cyl)
"blabla"
```

```{r}
xy = data.frame(x = 1:2, y = 3:4)
xy
```

```{r}
xx = data.table(xy)
xx[, new := 3:4]
```

```{r}
pander(xtabs(~ y, data = xx), caption = "y")
```

```{r}
library(lme4)
summary(lmer(Reaction ~ Days + (Days | Subject), sleepstudy))
summary(lm(Reaction ~ Days, sleepstudy))
``` 
```

# file - 使新文件自动可执行？

> ID：15599951
> 
> 赞同：11
> 
> 时间：2013-03-24T14:57:00.413
> 
> 标签：file, unix, umask

是否可以使所有新创建的文件在创建时都具有执行权限？为什么我不能默认授予它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-27T21:21:08.137

文件的 umask 从 666 中减去，目录的 umask 从 777 中减去。因此，如果您的 umask 为 002，并且您创建了一个目录，则得到 775（777 - 002），如果创建文件，则得到 664（666 - 002） ）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-10T19:35:00.690

umask 仅减去默认文件和目录权限。

```
777 initial file permissions
111 execute bit is not set by default
---
666 default file permissions
022 subtract default Unix umask
---
644 voila, final file permissions 
```

必须为所有者设置执行位才能 cd 进入他们创建的目录，因此设置了用户执行权限，导致目录权限为 744，当使用上述 umask 时。

默认情况下，我没有找到设置执行的方法。无论如何，这将是一个糟糕的魔力，但我目前正在研究我正在编写的网络安全课程。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-03-24T15:01:31.510

以安全的方式？不。以不安全的方式：只需通过在文件中`umask`添加来更改，其中表示您希望的权限掩码。`umask xxx``~/.bashrc``xxx`

**笔记：**

1.  这是不安全的（我是否已经提到过？其他人提到过。）
2.  它可能会导致很多问题。一种是在某些系统上不允许创建文件）

**推荐方式**：

仅对实际需要执行权限的文件执行此操作。

```
chmod +x /the/file 
```

# jquery - jQuery .animate() 在一页上跳跃，但在另一页上没有

> ID：15599956
> 
> 赞同：1
> 
> 时间：2013-03-24T14:58:06.307
> 
> 标签：jquery, jquery-animate, slidetoggle

我在这里使用以下代码：

```
function toggle_visibility(id, h4id)
{
    var e = $("#" + id);
    var h = $("#" + h4id);
    h.css({'padding': '0 0 0 20px'});
    e.animate({height: 'toggle'}, 400, function(){
        var vImg = e.is(':visible') ? 'minus' : 'plus';
        h.css({'background-image': 'url(/images/' + vImg + '.png)'});
    });
} 
```

如果您在此处查看此页面： [http](http://opportunityfinance.net/industry/) ://opportunityfinance.net/industry/ 工作正常

如果您在这里查看此页面： [http](http://opportunityfinance.net/consulting/default.aspx?id=6474) ://opportunityfinance.net/consulting/default.aspx?id=6474 这真的是跳跃的动画。当你点击它向下滑动时它会跳跃，当你点击它向上滑动时它会跳跃。

我正在尝试确定可能导致此问题的两页之间的差异，并且似乎无法理解为什么如果没有第二页上的跳转它就不会向下或向上滑动。

我怎样才能解决这个问题？已经在 SO 阅读了几个问题和答案，但没有运气。

谢谢大家，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:30:27.823

就像安格斯说的那样，你的问题是你隐藏元素的高度每次都在变化，但是你的动画时间没有（400ms）。就这么简单。您的问题是不同高度的时间相同，因此请尝试以相对于高度的比率来更改时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:02:50.270

问题是您正在打开和关闭动画的 div 内的内容的复杂性。在您的第一个示例中，您有一小段纯文本。在您的第二个示例中，您已经嵌入了视频。

您可能会调查使用基于 CSS3 的动画是否可以为复杂内容提供更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:03:22.783

据我所知，这与暴露的内容的高度有关——即第一页切换内容相当短，因此 400 的动画速度足以平滑地动画到全高，而在第二页上它的速率expands 快得多 + 因为它比外部内容包装器高，所以当外部包装器扩展以适应它时，就会发生跳转。

我能想到的最佳解决方案是减慢动画速度！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T15:48:02.727

使用 jQuery SlideUp() 和 SlideDown() 代替 animate()。它会工作...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T16:52:39.540

好的，问题是由于`<h4>`标签具有 a`margin-bottom`并`margin-top`设置为`1em`. 这对 来说并不是真正的问题`margin-top`，因为我在`toggle2`类中为`<h4>`覆盖它的元素设置了 5px 的 margin-top，但仍然引起了问题。

为了解决这个问题，我设置了`margin-top`and `margin-bottom`to`0px`并将每个都包装`<h4>Title</h4><div>contents</div>`在一个`div`标签中，给该`div`标签一个`margin-bottom`set to `1em`。

这似乎已经解决了这个问题！谢谢，但我觉得边距和/或填充是导致问题的原因，我是对的！

# php - 如何在php中为人类排序（自然排序）关联数组？

> ID：15599961
> 
> 赞同：1
> 
> 时间：2013-03-24T14:58:52.810
> 
> 标签：php, sorting, associative-array, natural-sort

如何在php中为人类排序（自然排序）关联数组？

以下代码：

> ```
> <?php
> 
> $notSorted = array( 
> array( 'Title' => 'rose', 
> 'Price' => 1.25,
> 'Number' => '10' 
> ),
> array( 'Title' => 'daisy', 
> 'Price' => 0.75,
> 'Number' => '1',
> ),
> array( 'Title' => 'orchid', 
> 'Price' => 1.15,
> 'Number' => '7' 
> )
> ); 
> ```
> 
> //我打赌这里会发生排序
> 
> ```
> foreach ( $notSorted as $val )
>   echo $val['Number'], " - ";
> 
> ?> 
> ```

将输出： `10 - 1 - 7`

以及如何对“数字”进行排序（对于人类）？喜欢： `1 - 7 - 10`

如果'Number'是一个int，如果它是一个字符串怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:05:08.733

“数字”字段是字符串，因此它是逐个字符比较，而不是千比千，然后是成百上千等等。

您可以编写自己的排序函数并将其与`usort`或 一起使用`sort`，`SORT_NUMERIC`也许`array_multi_sort`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:46:27.633

如果`Number`字段是整数（或浮点数），您可以使用`array_multisort`并指定要在`Number`字段上排序。[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)文档中的示例 #3向您展示了如何为关联数组执行此操作。

如果是字符串，事情就更困难`Number`了——在这种情况下，你必须进行“自然”排序，以确保“7”在“10”之前。如果您使用的是 PHP 5.4 或更新版本，则可以使用`array_multisort`该`SORT_NATURAL`标志。如果您使用的是 PHP 5.4 之前的版本，您可能必须使用`usort`and `strnatcmp`. 有关如何执行此操作的详细信息，请参阅[https://stackoverflow.com/a/11315019/26311 。](https://stackoverflow.com/a/11315019/26311)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:08:28.567

您可以通过以下方式尝试：

```
<?php

function record_sort($records, $field, $reverse=false)
 {
     $hash = array();

    foreach($records as $record)
     {
         $hash[$record[$field]] = $record;
     }

    ($reverse)? krsort($hash) : ksort($hash);

    $records = array();

    foreach($hash as $record)
     {
         $records []= $record;
     }

    return $records;
 }

// Example below

$airports = array
 (
     array( "code" => "LHR", "name" => "Heathrow" ),
     array( "code" => "LGW", "name" => "Gatwick" ),
 );

printf("Before: <pre>%s</pre>", print_r($airports, true));

$airports = record_sort($airports, "name");

printf("After: <pre>%s</pre>", print_r($airports, true));

?>

Example Outputs:

Before: Array
 (
     [0] => Array ( [code] => LHR, [name] => Heathrow )
     [1] => Array ( [code] => LGW, [name] => Gatwick )
 )

After: Array
 (
     [0] => Array ( [code] => LGW, [name] => Gatwick )
     [1] => Array ( [code] => LHR, [name] => Heathrow )
 ) 
```

来自[http://php.net/manual/en/function.asort.php](http://php.net/manual/en/function.asort.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T21:13:09.247

如果在调用中使用 3 路比较运算符`usort()`，数字字符串将自动作为数值进行比较。您无需进行特殊声明或声明显式标志。

代码：（[演示](https://3v4l.org/KQKnO)）

```
$array = [
    ['Title' => 'rose', 'Price' => 1.25, 'Number' => '10'],
    ['Title' => 'daisy', 'Price' => 0.75, 'Number' => '1'],
    ['Title' => 'orchid', 'Price' => 1.15, 'Number' => '7']
];

usort($array, fn($a, $b) => $a['Number'] <=> $b['Number']);
var_export($array); 
```

输出：

```
array (
  1 => 
  array (
    'Title' => 'daisy',
    'Price' => 0.75,
    'Number' => '1',
  ),
  2 => 
  array (
    'Title' => 'orchid',
    'Price' => 1.15,
    'Number' => '7',
  ),
  0 => 
  array (
    'Title' => 'rose',
    'Price' => 1.25,
    'Number' => '10',
  ),
) 
```

相同行为的`array_multisort()`版本是：（[Demo](https://3v4l.org/scgmd)）

```
array_multisort(array_column($array, 'Number'), SORT_NUMERIC, $array); 
```

# python - 过滤 ManyToManyField 中间表字段

> ID：15599963
> 
> 赞同：2
> 
> 时间：2013-03-24T14:58:58.783
> 
> 标签：python, django, many-to-many, django-orm

我有一个普通的 M2M，中间表中有一个附加字段：

```
class Customer(models.Model):
    items = models.ManyToManyField(Item, verbose_name=u'Items', through='CustomerItem')

class Item(models.Model):
    pass

class CustomerItem(models.Model):
    item = models.ForeignKey(Item, related_name='customer_items')
    customer = models.ForeignKey(Customer, related_name='customer_items')
    item_count = models.PositiveIntegerField(default=0) 
```

我想获得一个查询集，其中包含给定客户的所有项目 where `item_count > 0`。到目前为止（从[这里](https://stackoverflow.com/questions/10674687/filter-in-manytomanyfield-with-through)）我发现的唯一方法是过滤中间表，然后用 Python 代码制作一个对象列表，但我需要一个查询集（用于表单`ChoiceField`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:52:56.000

这里 -

```
items = Item.objects.filter(customer_items__customer=customer, customer_items__item_count__gt = 0) 
```

正如您添加`related_name='customer_items'`到`Item`外键一样。您可以通过 访问与`CustomerItem`任何相关的内容。休息是小菜一碟。`Item``item.customer_items`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:14:11.737

那这个呢？

```
Customer.object.filter(customeritem__item_count__gt=0) 
```

# multithreading - 基于线程的服务器和基于事件的服务器有什么区别？

> ID：15599966
> 
> 赞同：14
> 
> 时间：2013-03-24T14:59:15.177
> 
> 标签：multithreading, events

我正在寻找一个类比来帮助我理解基于线程的服务器如何处理 http 请求和基于事件的服务器如何处理 http 请求之间的区别。假设一台服务器是一栋楼的店铺，80端口是店铺的前门，一个http请求是刚刚走进前门的顾客。接下来发生什么？商店如何处理客户？商店如何处理多个顾客，以及顾客离开商店的速度有何不同？

简而言之，我正在寻找对“事件循环”和“线程”以及“阻塞”和“非阻塞”等事物的物理、现实世界类比的解释。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-24T15:05:17.550

在基于线程的服务器类比中，每个客户都由他们自己的店员服务。当顾客离开时，店员可以帮助另一位顾客。可以同时得到帮助的员工数量与商店的员工数量直接相关。

在基于事件的服务器类比中，单个商店员工可能为多个客户提供服务——我们称他为 Bob。Bob 将可能需要一段时间的各种步骤（例如“*在后面的房间里**找我的物品`x`*” ）委派给其他商店员工。当 Bob 向助手寻求帮助时，助手匆匆跑到商店的其他地方，而 Bob 可以继续帮助其他顾客，而原来的顾客则在周围等待助手回到 Bob 身边。当助手完成任务返回时，他们将等待 Bob 与 Bob 的当前客户到达一个好的停止点，然后 Bob 可以再次与助手和原始客户交谈。

# php - 带有消息“SQLSTATE [HY093]：无效参数号：未定义参数”的未捕获异常“PDOException”

> ID：15599968
> 
> 赞同：-1
> 
> 时间：2013-03-24T14:59:18.473
> 
> 标签：php, mysql, pdo

我阅读了很多类似的主题，但我无法理解我的错误。

**问题：**

```
Uncaught exception 'PDOException' with message 'SQLSTATE[HY093]: Invalid parameter number: parameter was not defined' in I:\home\lm.ru\www\classes\db.class.php:39 Stack trace: #0 I:\home\lm.ru\www\classes\db.class.php(39): PDOStatement->execute(Array) #1 I:\home\lm.ru\www\classes\page.class.php(34): 
```

**代码：**

```
class Page
{
    public $id = "";
    public $link = ""; //+
    public $links_count = 0;//+
    public $places_count = 0;
    public $external_links = 0; //+
    public $context = 0;
    public $has_text = 0;
    public $text = "";
    public $ya_index = 0;
    public $ya_index_data = 0;
    public $google_pr = 0;
    public $google_pr_date = 0;
    public $level = 0; // 0 - main, 1 - 2 level... +
    public $title = ""; // +
    public $is_active = 1;
    public $deleted = 0;
    public $site_id = 0; //+

    function Add($data)
    {
        foreach($data as $key => $value)
        {
            $this->$key = $value;
        }

        print_r((array)$this);

        PDO_wrap::Change("INSERT INTO pages (id, link, links_count, places_count, external_links, context, has_text, text, ya_index, ya_index_date, google_pr, google_pr_date, level, title, is_active, deleted, site_id) VALUES(:id, :link, :links_count, :places_count, :external_links, :context, :has_text, :text, :ya_index, :ya_index_date, :google_pr, :google_pr_date, :level, :title, :is_active, :deleted, :site_id)", (array)$this);

        $this->id = PDO_wrap::LastInsertId();
    }

} 
```

PDO_wrap 方法：

```
public static function Change($query, $params = array())
    {
        $sql = self::$pdo->prepare($query);
        $sql->execute($params);
        return $sql->rowCount();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T15:05:26.683

你的类道具和你的价值观列表不匹配

```
$ya_index_data; 
```

对比

```
:ya_index_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T20:50:47.690

我遇到了同样的问题。PDO 要求数组中的条目数与 SQL 语句中的元素数相匹配。我试图通过为 PDO 提供 $_POST 数组来做同样的事情。只有在元素被复制到另一个数组之后，PDO 才接受该数组。

# android - 如何更新保存用户数据的数据库

> ID：15599970
> 
> 赞同：0
> 
> 时间：2013-03-24T14:59:21.207
> 
> 标签：android, database, sqlite

我有一个数据库，用户可以在其中更改每个元组中的一些值。我还希望能够添加新行并更新一些现有行的内容。我现在使用的代码还不够好，因为它在 onUpdate() 上创建了一个新数据库

```
private static class DatabaseHelper extends SQLiteOpenHelper {

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w("dB update", "Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + MetaData.TABLE);
        onCreate(db);
    }
} 
```

我的问题有解决方案吗？或者至少可以避免升级列，保留该列中的用户值？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:12:23.327

在 SQLite 中，您可以使用 ALTER 表来编辑它。( [http://www.sqlite.org/lang_altertable.html](http://www.sqlite.org/lang_altertable.html) )

正如您在链接中看到的，您可以添加和重命名列。

感觉这就是你所需要的一切

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:05:34.120

您可以使用触发器和事务来执行此操作。你也应该寻找 sql 查询。

# javascript - 如何在 Javascript 中显示 Flash 版本

> ID：15599977
> 
> 赞同：1
> 
> 时间：2013-03-24T15:00:13.630
> 
> 标签：javascript, html

我正在使用下面显示的 javascript 代码来显示 Flash 版本的浏览器插件。

代码是：

```
<script>
txt=navigator.Flash;
document.getElementById("flash").innerHTML = navigator.Flash;
</script> 
```

但是此代码输出正在显示

```
undefined 
```

我希望显示 Flash 播放器的版本号。

我不知道如何继续。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:04:47.737

使用 swf 对象。有了它，您可以获得查看它的用户的 Flash 播放器版本，请参见[http://code.google.com/p/swfobject/](http://code.google.com/p/swfobject/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:07:18.677

[在这里](http://www.prodevtips.com/2008/11/20/detecting-flash-player-version-with-javascript/)查看

来源：[使用 Javascript 检查 Flash 播放器版本](https://stackoverflow.com/questions/3652480/how-to-check-flash-player-version-using-javascript)

# c# - 如何在 WPF、W8 和 WP 中创建统计图表？

> ID：15599980
> 
> 赞同：1
> 
> 时间：2013-03-24T15:00:33.097
> 
> 标签：c#, wpf, graph, charts

我一直在寻找一些图书馆，发现一些非常好，但都是多余的。

*   [泰勒里克](http://www.telerik.com/)
*   [组件一](http://componentone.com)
*   [开发快递](http://www.devexpress.com)

需要一个免费的和服务来`WPF`，`Windows 8`和`Windows Phone`。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:51:13.670

乔治。

看看这个：http: [//msdn.microsoft.com/en-us/magazine/ff714591.aspx](http://msdn.microsoft.com/en-us/magazine/ff714591.aspx)

另一种选择是添加 Nugget ZedGraph。

祝你好运。

# c# - 当wire-shark关闭时无法接收UDP包

> ID：15599982
> 
> 赞同：2
> 
> 时间：2013-03-24T15:00:49.120
> 
> 标签：c#, udp, wireshark

这是我在这里的第一篇文章。我有一个嵌入式以太网 PIC32 uC，它在一个特定端口上将 UDP 包发送到我 PC 上的 C# 程序。使用 C# 我想按如下方式获取此包：

```
 UdpClient udpClient = new UdpClient( 20011 );
 IPEndPoint sender = new IPEndPoint(IPAddress.Any, 0);
        while (true)
        {
           byte[] content = udpClient.Receive(ref sender);
        } 
```

一个包看起来像这样（wireshark）： 源：192.168.1.38 目标：192.168.1.44 协议：UDP 长度：122 源端口：1000 目标端口：20011

有趣的是，只要wire-shark 软件在后台运行，一切正常！一旦我停止收听wire-shark，就不会再收到c#中的包了。

有谁知道这里发生了什么？

谢谢你的回答克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:25:19.207

问题是客户端没有正确解析目标 MAC 地址。感谢您的提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:13:45.203

你的机器真的是 192.168.1.44 吗？如果没有，您会看到数据包，因为`wireshark`它在运行时将接口置于“混杂”模式；如果它将界面重置为正常模式，您将不再看到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:15:03.990

您在 Windows 防火墙中有条目吗？如果您暂时禁用 Windows 防火墙，它会起作用吗？

# java - while 循环条件似乎没有被检查

> ID：15599983
> 
> 赞同：0
> 
> 时间：2013-03-24T15:00:50.057
> 
> 标签：java, conditional-statements

所以这是我的代码，虽然根本没有检查条件，但 if 条件正在工作。我一点也不知道到底发生了什么，因为在我看来一切都很好。

```
import java.lang.Integer;

public class Wielomian
{
        public double [] mnozniki;
        public int max;

        Wielomian(String ciag)
        {
         int tmp;

         int stopien;

         //int iteration=0;
         int poczatek=0;

         tmp=ciag.indexOf('^');
         stopien=Integer.valueOf(ciag.substring(tmp+1,tmp+2));
         mnozniki = new double[stopien+1];
         max = stopien;
         tmp=0;
                for(int i=1; i< ciag.length() ; ++i)// +1.0*x^3-1.0*x^1-2.0
                {
                        //System.out.println("some:"+i);
                        if(ciag.charAt(i)=='*')
                        {
                        //      System.out.println("some:k");
                                stopien=Integer.valueOf(ciag.substring(i+3,i+4));

                                int iteration=i;

                                while(((ciag.charAt(iteration))!='-')||((ciag.charAt(iteration))!='+'))
                                {
                                       // System.out.println("some2:"+iteration);
                                        --iteration;
                                        if (iteration<=0) break;
                                }
                                 poczatek=iteration;
                   mnozniki[stopien]=Double.parseDouble(ciag.substring(poczatek,i-1));

                        }

                }
        }

        public void wypisz()
        {
                int i;
                for(i=0;i<max;++i)
                {

                 System.out.println("x^" + i+":"+mnozniki[i]);
                }
        } 
```

主要课程：

```
 public class lab03
    {
            public static void main(String args[])
            {

                   String n ="1.0*x^3-1.0*x^1-2.0";
                   Wielomian wx = new Wielomian(n);

                   wx.wypisz();

            }
    } 
```

在 pastebin 中：http: [//pastebin.com/sgpY2AuG http://pastebin.com/eqXHNk0N](http://pastebin.com/eqXHNk0N) [<](http://pastebin.com/sgpY2AuG) -忽略第 35 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:07:11.513

```
((ciag.charAt(iteration))!='-')||((ciag.charAt(iteration))!='+')) 
```

总是正确的，这是一个典型的错误（来自“not x or y”实际上意味着“not (x or y)”的混淆，但大多数新手代码为“(not x) or (not y)”，使用 &&相反，或者将否定放在 OR 之外

```
((ciag.charAt(iteration))!='-')&&((ciag.charAt(iteration))!='+')) 
```

或者

```
!((ciag.charAt(iteration))=='-')||((ciag.charAt(iteration))=='+')) 
```

参见[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:11:17.847

我认为问题出在这里：
`while(((ciag.charAt(iteration))!='-')||((ciag.charAt(iteration))!='+'))`

尝试改用这个：

```
while(((ciag.charAt(iteration))!='-')&&((ciag.charAt(iteration))!='+')) 
```

由于您没有指定确切的问题，我不确定答案。但是请尝试检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:11:24.473

```
while ( A != 1 || A != 2) {
    //Do Something 
} 
```

while 循环只会在 if 结束`A == 1 && A == 2`，这永远不会是真的。

# mysql - vb6 查询错误

> ID：15599986
> 
> 赞同：2
> 
> 时间：2013-03-24T15:00:54.720
> 
> 标签：mysql, vb6, runtime-error

这是代码；

```
Private Sub txtNProdname_Click()

Set Rs = New ADODB.Recordset

With Rs
.ActiveConnection = Conn
.CursorLocation = adUseClient
.CursorType = adOpenStatic
.LockType = adLockPessimistic
.Source = "SELECT proddescription FROM products WHERE prodsupplier=" & "'" &       txtNsupplier.Text & "' AND prodname=" & "'" & txtNProdname.Text & "'"
.Open

 txtNdescription.Text = Rs("proddescription")

 End With

End Sub 
```

错误：

```
Either BOF or EOF is True, or the current record has been deleted.Requested operation requires a current record. 
```

曹帮帮我？似乎没有`AND`它会起作用，但是当我把它放进去时，就会发生错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:06:25.093

打开记录集后，您需要在使用它之前移动到第一条记录：

```
Rs.Open
If Rs.EOF = False Then
   Rs.MoveFirst
   txtNdescription.Text = Rs("proddescription")
End If 
```

# xml - 使用 PowerShell 将 Excel 文件另存为 XML

> ID：15599987
> 
> 赞同：2
> 
> 时间：2013-03-24T15:01:01.710
> 
> 标签：xml, excel, powershell, powershell-3.0

我目前正在powershell中编写一个脚本，通过文件树递归搜索XLS文件。我想将所有文件保存到 xml 以便能够读取它们并根据需要更改数据。

无论如何用 Powershell 将 Excel 文件保存为 XML 吗？

谢谢你的帮助 ！

- - 更新 - -

[我在这里](http://gallery.technet.microsoft.com/scriptcenter/fcf0cfc5-3523-4563-88d5-0a0c3f7f3572)找到了一个脚本，它基本上创建了一个 excel 文件并将其保存为 xml。

使用相同的原理我做了以下，基本上打开一个文件并将其保存到 xml：

```
$xlXMLSpreadsheet = 46

$Excel = New-Object -Com Excel.Application

$WorkBook = $Excel.Workbooks.Open("c:\Test.xlsx")

$WorkBook.SaveAs("c:\Test.xml", $xlXMLSpreadsheet)

$Excel.Quit() 
```

而且效果非常好。但我不知道第二个 saveas() 参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T06:55:02.633

[我在这里](http://gallery.technet.microsoft.com/scriptcenter/fcf0cfc5-3523-4563-88d5-0a0c3f7f3572)找到了一个脚本，它基本上可以转换创建一个 excel 文件并将其保存为 xml。

使用相同的原理我做了以下，基本上打开一个文件并将其保存到 xml：

```
$xlXMLSpreadsheet = 46

$Excel = New-Object -Com Excel.Application

$WorkBook = $Excel.Workbooks.Open("c:\Test.xlsx")

$WorkBook.SaveAs("c:\Test.xml", $xlXMLSpreadsheet)

$Excel.Quit() 
```

而且效果非常好。但我不知道第二个 saveas() 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:33:55.857

[此处](http://office.microsoft.com/en-au/excel-help/export-xml-data-HP010206401.aspx)描述了将 Excel 工作表导出为 XML 的一般过程。您可以将其记录为宏，然后将其应用到 PowerShell 中。您还可以从工作表中的数据手工制作 XML。无论哪种方式，您都需要某种关于如何将 Excel 工作表中的数据映射到 XML 结构的定义。

# android-intent - 无法从意图中获得额外收益

> ID：15599989
> 
> 赞同：0
> 
> 时间：2013-03-24T15:01:06.627
> 
> 标签：android-intent

使用 getextra 方法时总是得到空值，我在一个活动上添加额外内容并在另一个活动上接收，我的代码是

```
 super.onActivityResult(requestCode, resultCode, data); 
    String filePath="";

    Intent intent1 = new Intent(TagActivity.this,AddnewNoteActivity.class);
    if(requestCode==1)
    {

    }
    else if(requestCode==2)
    {
        if(resultCode == RESULT_OK)
        {  
            intent1.putExtra("path", data.getData());
            intent1.setType("image/*");
        }

    }
    else if(requestCode==3)
    {
        if(resultCode == RESULT_OK){  
            intent1.putExtra("path", data.getData());
            intent1.setType("audio/*");
        }

    }
        startActivity(intent1);

} 
```

在接收方

```
 if(imageUri==null) 
    {

       extras = getIntent().getExtras(); 
        if (extras != null) {
            String Path;
            Path= extras.getString("path");
            imageUri = Uri.parse(Path);
        }           
    } 
```

Nuth 每次在 Path 中收到 null，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:58:19.177

问题解决为

intent1.putExtra("路径", data.getData() **.tostring()** ); //在发送方

# iphone - ABAddressBookRegisterExternalChangeCallback 导致 EXC_BAD_ACCESS

> ID：15599990
> 
> 赞同：1
> 
> 时间：2013-03-24T15:01:09.040
> 
> 标签：iphone, segmentation-fault, exc-bad-access, abaddressbook

我有这个代码：

```
void MyAddressBookExternalChangeCallback(ABAddressBookRef addressBook, CFDictionaryRef info, void *context) {
    [(id)context reloadSpecifiers];
}

@interface JBPPreferencesListController : PSListController {
   ABAddressBookRef addressBook;
}
@end

@implementation JBPPreferencesListController
-(id)init {
    if (self = [super init]) {
        addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
       // ABAddressBookRegisterExternalChangeCallback(addressBook, MyAddressBookExternalChangeCallback, self);
    }
    return self;
}

- (id)specifiers {
    if (_specifiers == nil) {
        NSMutableArray *specs = [NSMutableArray array];
        [specs addObjectsFromArray:[self specifiersForContactGroups]];
        _specifiers = [specs copy];
    }
    return _specifiers;
}

-(NSArray *)specifiersForContactGroups {
    if (addressBook == NULL) {
        return nil;
    }
    CFIndex groupCount = ABAddressBookGetGroupCount(addressBook);
    if (groupCount == 0) {
        return nil;
    }
    CFArrayRef allGroups = ABAddressBookCopyArrayOfAllGroups(addressBook);
    if (allGroups == NULL) {
        return nil;
    }
    PSSpecifier* allContactsSpec = [PSSpecifier preferenceSpecifierListItemNamed:[NSString stringWithFormat:@"Favourites %i", groupCount] value:@(-2)];
    NSMutableArray *groupSpecs = [NSMutableArray arrayWithObject:allContactsSpec];
    for (int i = 0; i < groupCount; i++) {
        ABRecordRef currentGroup = CFArrayGetValueAtIndex(allGroups, i);
        if (currentGroup != NULL) {
            NSString *groupName = (NSString *)ABRecordCopyValue(currentGroup, kABGroupNameProperty);
            NSNumber *groupID = @(ABRecordGetRecordID(currentGroup));
            PSSpecifier* specifier = [PSSpecifier preferenceSpecifierListItemNamed:groupName value:groupID];
            [groupName release];
            [groupSpecs addObject:specifier];
        }
    }
    CFRelease(allGroups);
    return [[groupSpecs copy] autorelease];
}
-(void)dealloc {
    if (addressBook != NULL) CFRelease(addressBook);
    [super dealloc];
}
@end 
```

如果我取消注释`ABAddressBookRegisterExternalChangeCallback`行`init`，那么它会崩溃（在控制器的视图出现在屏幕上之前）并出现 EXC_BAD_ACCESS 和分段错误，11。

我没有使用 ARC，并且我的手机上有组（当线路被注释掉时它们会出现）

# spring - jaxws wsdl 解析问题

> ID：15599992
> 
> 赞同：4
> 
> 时间：2013-03-24T15:01:25.560
> 
> 标签：spring, wsdl, jax-ws

我有一个使用 JAX-WS 创建的 WebService，我编写了一个 JUnit 以通过以下方式连接到它：

```
public class LicenseSvcClient {

    private static final String WS_URL = "https://dubdubdub.com/licenseService?wsdl";
    private static LicenseService licenseService;

    @BeforeClass
    public static void init() throws MalformedURLException{
        URL url = new URL(WS_URL);
        QName qname = new QName("http://webservices.activation.cellebrite/", "LicenseServiceImplService");
        Service service = Service.create(url, qname);
        licenseService = service.getPort(LicenseService.class);
        Map<String, Object> req_ctx = ((BindingProvider)licenseService).getRequestContext();
        req_ctx.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, WS_URL);

        Map<String, List<String>> headers = new HashMap<String, List<String>>();                

        req_ctx.put(MessageContext.HTTP_REQUEST_HEADERS, headers);

    }

    @Test
    public void lol(){

            licenseService.hasCellewiseLicense("Roflol");
    }

} 
```

这个 JUnit 工作得很好，它连接到服务，但是，当我尝试从另一个应用程序连接到这个服务时，它会抛出以下异常，请注意我使用的是完全相同的代码。

```
[Fatal Error] licenseService?xsd=1:6:3: The element type "hr" must be terminated by the matching end-tag "</hr>".
[Fatal Error] licenseService?xsd=1:6:3: The element type "hr" must be terminated by the matching end-tag "</hr>".
2013-03-24 16:52:41,292 ERROR DefaultExceptionMapper:114 - Unexpected error occurred
org.apache.wicket.WicketRuntimeException: Can't instantiate page using constructor 'public cellebrite.urs.web.page.cellewise.CellewiseCodeGenerationPage()'. Might be it doesn't exist, may be it is not visible (public).
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:196)
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:68)
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:47)
    at org.apache.wicket.DefaultMapperContext.newPageInstance(DefaultMapperContext.java:103)
    at org.apache.wicket.request.handler.PageProvider.resolvePageInstance(PageProvider.java:264)
    at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:165)
    at org.apache.wicket.request.handler.render.PageRenderer.getPage(PageRenderer.java:78)
    at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:105)
    at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:224)
    at org.apache.wicket.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:167)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:244)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:361)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:534)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:864)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:533)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:207)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:403)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:522)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:177)
    ... 34 more
Caused by: javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:150)
    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:91)
    at javax.xml.ws.Service.<init>(Unknown Source)
    at javax.xml.ws.Service.create(Unknown Source)
    at com.cellebrite.shared.webservice.LicenseServiceClient.init(LicenseServiceClient.java:59)
    at com.cellebrite.shared.webservice.LicenseServiceClient.load(LicenseServiceClient.java:79)
    at com.cellebrite.shared.webservice.LicenseServiceClient.isCellewiseEnabled(LicenseServiceClient.java:70)
    at WICKET_com.cellebrite.shared.webservice.LicenseServiceClient$$FastClassByCGLIB$$d8ec55d.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
    at org.apache.wicket.proxy.LazyInitProxyFactory$CGLibInterceptor.intercept(LazyInitProxyFactory.java:318)
    at WICKET_com.cellebrite.shared.webservice.LicenseServiceClient$$EnhancerByCGLIB$$57f3c545.isCellewiseEnabled(<generated>)
    at cellebrite.urs.web.page.cellewise.CellewiseCodeGenerationPage.canAccess(CellewiseCodeGenerationPage.java:49)
    at cellebrite.urs.web.page.cellewise.CellewiseCodeGenerationPage.<init>(CellewiseCodeGenerationPage.java:41)
    ... 39 more
Caused by: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:94)
    at org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:204)
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:148)
    ... 51 more
Caused by: javax.wsdl.WSDLException: WSDLException (at /definitions/types/xsd:schema): faultCode=PARSER_ERROR: Problem parsing 'http://dubdubdub.com/licenseService?xsd=1'.: org.xml.sax.SAXParseException: The element type "hr" must be terminated by the matching end-tag "</hr>".
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseSchema(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseSchema(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseTypes(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseDefinitions(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:242)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:191)
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:92)
    ... 53 more
Caused by: org.xml.sax.SAXParseExceptionpublicId: http://dubdubdub.com/licenseService?xsd=1; systemId: http://dubdubdub.com/licenseService?xsd=1; lineNumber: 6; columnNumber: 3; The element type "hr" must be terminated by the matching end-tag "</hr>".
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    ... 63 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:27:22.160

I would guess, that the URL given in the stacktrace `http://dubdubdub.com/licenseService?xsd=1` returns an error message when called from the "real" service client.

Perhaps you should check wether the given url really does work. The WSDL parser is complaining about an unclosed `<hr>` tag which suggests that the webservice client is getting an error page instead of a parsable schema file.

# c - 如何巧妙地修改 PE 的数据部分

> ID：15599995
> 
> 赞同：2
> 
> 时间：2013-03-24T15:01:54.080
> 
> 标签：c, winapi, portable-executable

我正在“C/C++ - Win32API”环境中编写一个 dll。我有一些常量变量（都是 DWORD 值和 LPWSTR/LPSTR 字符串），我必须让用户修改它们。我正在寻找的是（希望）一种能够按照所述方式启用 SAFE 二进制修改的工具，该工具可以更新 PE 的所有必要表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:08:54.220

您可以在单独的 PE 部分中创建一个结构，因此：

```
// Create the section
#pragma section("myconst", read)

// Declare a struct to hold the constant data
typedef struct
{
    DWORD a;
    DWORD b;
    char stringa[256];
    char stringb[256];
} ConstData;

// Create an initialized instance of the struct in the new section
__declspec(allocate("myconst"))
const ConstData theData = {0xdeadbeef, 0xfeedface, "Hello", "dolly"}; 
```

编译代码。打开 Visual Studio 命令提示符，运行

```
dumpbin /all myexe.exe > dump.txt
notepad dump.txt 
```

搜索该`myconst`部分。您应该会看到如下内容：

```
SECTION HEADER #4
 myconst name
     208 virtual size
    4000 virtual address (00404000 to 00404207)
     400 size of raw data
    2000 file pointer to raw data (00002000 to 000023FF)
       0 file pointer to relocation table
       0 file pointer to line numbers
       0 number of relocations
       0 number of line numbers
40000040 flags
         Initialized Data
         Read Only

RAW DATA #4
  00404000: EF BE AD DE CE FA ED FE 48 65 6C 6C 6F 00 00 00  ï¾­ÞÎúíþHello...
  00404010: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
  00404020: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................ 
```

您可以看到在代码中初始化的两个十六进制值和第一个字符串值。你还可以看到PE文件中这个数据的偏移量——“指向原始数据的文件指针”——是0x2000。

有了这些信息，就很容易构造一个新的数据块，打开 PE 文件并覆盖 0x2000 处的数据。

要确定代码的偏移量，您需要解析 PE 文件头和节头。这是相当简单的。或者，您可以在构建过程中从 dumpbin 输出中获取偏移量，并将其输入到编辑工具的构建中。

请注意，要在发布模式下进行测试，您需要实际使用，`theData`否则链接器会将其丢弃。另请注意，该部分仅具有`read`属性，因此它是真正的只读的。尝试写入它会导致访问冲突。

最后......这一切都很邋遢。除非你真的别无选择，否则我不会打扰。

# java - 将 CSVReader 输出复制到数组（新数组的单个索引）

> ID：15599996
> 
> 赞同：1
> 
> 时间：2013-03-24T15:02:03.983
> 
> 标签：java, arrays, csv

我有一个 CSV 文件，我正在使用 CSVReader 库读取该文件。

我想逐行遍历文件并将特定列中的值保存到新数组中。

以下代码为我提供了第二列的数据列表。

我如何获取这些数据并将其保存到数组中？我将列分隔符指定为逗号并跳过文件的前两行

```
public class ReadFile {

        // Location of file to read

    private static final String FILE="myfile.csv"; 

    public static void main(String[] args) throws IOException {

        CSVReader reader = new CSVReader(new FileReader(FILE), ',','\'', 2);

            String [] nextLine;
        while ((nextLine = reader.readNext()) != null) {

                   System.out.println(nextLine[1]);
        }
           }
    } 
```

nextLine[1] 的当前输出

```
1720178147618
1720178147617
1720178147616
1720178147615
1720178147614
1720178147613
1720178147612 
```

期望的输出

```
String[] ID = 1720178147618, 1720178147617, 1720178147616, 1720178147615, 1720178147614, 1720178147613, 1720178147612 
```

我认为我之后是关于如何将存储在单个索引中的数据转换为新的单独索引数组的说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:13:51.737

假设您正在使用`CSVReader`Open [CSV library](http://opencsv.sourceforge.net/)中的 ，[文档](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVReader.html)显示有一种方法`readAll()`可以完全按照您的要求进行操作：

`List<String[]> values = reader.readAll();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:19:07.260

鉴于其他答案，我不确定这是否是您正在寻找的东西。我理解它是因为您想要一个仅包含第二列数据的数组？

这是我所拥有的：

```
 List<String> strings = new ArrayList<>();
    while...{
        strings.add( nextLine[1] );
    }
    String[] ID = strings.toArray(new String[strings.size()]); 
```

不过，您也可以使用 chrisn 的答案，然后执行以下操作：

```
String[] ID = values.get(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:21:14.380

您需要将内容添加到`List`- 这是一个可扩展的集合结构，

```
final List<String> list = new LinkedList<String>(); 
```

在你的代码中

```
while ((nextLine = reader.readNext()) != null) {
    list.add(nextLine[1]);
} 
```

然后，如果你想要一个`String[]`你可以调用该`toArray`方法

```
final String[] array = list.toArray(new String[list.size()]); 
```

但你也可以只使用`List`.

# php - 网址重写必须以开头而不是以结尾

> ID：15599997
> 
> 赞同：0
> 
> 时间：2013-03-24T15:02:05.893
> 
> 标签：php, regex, .htaccess, mod-rewrite, rewrite

我想要一个检查 url 的重写规则。它应该从一个条件开始，不应该有扩展。

这是我到目前为止创建的规则：

```
RewriteRule ^admin/?(.*)$ admin/index.php?rt=$1&%{QUERY_STRING} [L,QSA] 
```

我有第二条规则，它适用于扩展名为 .html 的所有内容。所以我希望如果出于某种原因我这样做：[http://domain.com/admin/page-to-test.html](http://domain.com/admin/page-to-test.html)应该应用于第二个规则，并且与第一个规则不匹配。我也尝试过：

```
RewriteRule ^admin/?(.*)(!\.html)$ admin/index.php?rt=$1&%{QUERY_STRING} [L,QSA] 
```

然而，这也没有奏效。它应该以 admin（可选斜杠）开头，并且没有扩展名。

编辑：我更改了 RewriteRules 并且有效。因此，当规则匹配时，它会因为 L 而停止。否则它会尝试找到另一个有效的规则。如果没有把 L 放在规则之外，所有的规则都会被检查，并且会出现问题。

总而言之：

```
RewriteRule ^(.*).html$ index.php?rt=$1&%{QUERY_STRING} [L,QSA]
RewriteRule ^admin/?(.*)$ admin/index.php?rt=$1&%{QUERY_STRING} [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:06:27.337

将您的“.html”规则放在“admin”规则之前，并用“L”标志标记“.html”规则，因此在它之后不会应用任何规则。

# django - 你在哪里开发 Django 应用程序？

> ID：15599998
> 
> 赞同：0
> 
> 时间：2013-03-24T15:02:11.790
> 
> 标签：django

Django新手在这里。应该在哪里开发 django 应用程序？

它可以在不同的机器上吗？例如，我可以在本地机器上开发它，然后将其复制到服务器机器上？

还是应该在运行 Apache Web 服务器的同一台机器上？如果是这样的话，当我开始一个要开发的新项目时，我应该在 public_html 目录之外吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:04:10.843

对于 Django Web 应用程序的开发，根本不需要 Apache 服务器。Django 有它自己的内置开发服务器，可以在开发时用于测试。这样做`python manage.py runserver`正是调用了这一点。

你可以在你的本地机器上开发它，一旦它准备好部署，你就可以把它放在正确配置了 Apache 的服务器机器上。