# StackOverflow 问答 15709000-15709999

# asp.net - 发布到 Twitter 时将单词转换为主题标签

> ID：15709000
> 
> 赞同：1
> 
> 时间：2013-03-29T18:14:41.947
> 
> 标签：asp.net, twitter, hashtag, linq-to-twitter

我目前使用 LinqToTwitter 将帖子发送到 Twitter。我想将帖子标题中的单词转换为主题标签，当它作为推文被触发时，例如 - “Firefox 很酷”是博客文章并变成#Firefox 很酷[http://myshortu.rl/dhsgeh](http://myshortu.rl/dhsgeh)在推特上。

到目前为止，我看到它的方式是我需要一个数据库表，其中包含我想要转换为主题标签的单词。我必须解析出标题并将单词与数据库中的单词进行比较并添加井号。使用数据库表的最佳方式是什么？或者我可以使用内存中的集合来完成它还是将这些单词保留在 web.config 中？谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:25:48.950

是否使用数据库或文件（例如 web.config）的决定可能取决于您是否要编写允许您维护列表的代码。例如添加、修改、删除。如果是这样，那么数据库听起来是最简单的选择。如果列表很小并且没有变化，那么在 web.config 中添加一个分隔列表就可以了。

由于您使用的是 ASP.NET，因此不能将其保存在内存变量中，但可以将列表保存在缓存中。这可以进行一些非常快速的查找，而不是多个文件或数据库查询。

只是从这个角度来看，很难在论坛中推荐合适的设计，因为可能存在未知的细节。所以，最好把我的回答当作有助于思考权衡是什么的东西，而不是关于你应该做什么的明确建议。

# java - java.text.Normalizer：isNormalized() 返回 false，但 Normalize 不会更改字符串

> ID：15709007
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:15:08.963
> 
> 标签：java, unicode, normalization, unicode-normalization

我刚开始学习`java.text.Normalizer`. 这看起来很简单。我有一个“奇怪”的破折号要处理（特别是[U+2013](http://en.wikipedia.org/wiki/%E2%80%93#En_dash)）

我想把它转换成一个普通的破折号，所以我做了一些快速测试代码：

```
import java.text.Normalizer;

public class Test {
public static void main(String[] args) {
    String weirdDash = "–";
    String normalDash = "-";

    boolean b = Normalizer.isNormalized(weirdDash, Normalizer.Form.NFD);
    if(b == false) {
        System.out.println("Java thinks the weird dash is normal");
        return;
    }
    String normalizedWeirdDash = Normalizer.normalize(weirdDash, Normalizer.Form.NFD);

    if(normalizedWeirdDash.equals(normalDash)) {
        System.out.println("Yay!");
    } else {
        System.out.println("Boo! normalized weird dash "+(normalizedWeirdDash.equals(weirdDash) ? "didn't change" : "= " + normalizedWeirdDash));
    }
}
} 
```

main() 的输出是“嘘！标准化的怪异破折号没有改变”

这怎么可能？这意味着 Normalizer.isNormalized 返回 false，但随后在同一个字符串（具有相同的 Normalizer.Form）上调用 normalize() 根本没有改变它。

我错过了什么？

**编辑** 此方法输出“真”：

```
public class Test {
    public static void main(String[] args) {
        String weirdDash = "–";
        String normalDash = "-";
        String newDash = weirdDash.replaceAll("(\\\u2013)", "-");
        System.out.println(newDash.equals(normalDash));
    }
} 
```

所以，如果一切都失败了，我可以使用它。但是出于好奇，Normalizer 是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:23:35.610

> 这意味着 Normalizer.isNormalized 返回 false

不，这意味着 Normalizer.isNormalized 返回`true`。重新阅读您的代码。也许你的意思是

```
if (b == true) { 
```

当你写

```
if (b == false) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:26:23.503

`U+2013`(en-dash) 和`U+002D`(minus sign) 是两个不同的 Unicode 字符，*而不是*同一字符的两种不同表示。因此，标准化不会将第一个变为第二个。

此外，`"\u2013"`已经在您的代码中 进行了规范化和`isNormalized()`评估。`true`

# python - 无法使用 Django 为对象设置实例变量

> ID：15709014
> 
> 赞同：0
> 
> 时间：2013-03-29T18:15:28.607
> 
> 标签：python, django

我似乎无法使用 Django 设置实例变量。

我想要发生的是：

```
a,b = User(), User()
a.set_status('abc')
b.set_status('def')
b.get_status()
>>> 'def'
a.get_status()
>>> 'abc' 
```

不幸的是，不断发生的事情是：

```
a,b = User(), User()
a.set_status('abc')
b.set_status('def')
b.get_status()
>>> 'def'
a.get_status()
>>> 'def' 
```

我相信这是因为`status`变量是类变量而不是实例变量。如何使代码表现得像我想要的那样？我的模型如下。

```
class Status(models.Model):

    def __init__(self, status = '', time=datetime.datetime.min, *args, **kwargs):
        self.status = status
        self.status_time = time
        super(Status, self).__init__(*args, **kwargs)

    def set_status(self, s):
        self.status = s
        self.status_time = datetime.datetime.now()
        self.save()
    def get_status(self):
        now = datetime.datetime.now()
        if now-self.status_time<datetime.timedelta(minutes=15):
            return self.status
        return None

class User(models.Model):
    facebook_id = models.CharField(max_length=200)
    friends = ListField()
    status = Status()

    @classmethod
    def create_user(cls, fid, friends):
        k = User()
        k.facebook_id = fid
        k.friends = friends
        k.status = Status()
        k.status.save()
        k.save()

    def login(self, facebook_friends):
        self.friends = facebook_friends
        self.save()

    def set_status(self, status):
        self.status.set_status(status)
        #return matching statuses

    def get_status(self):
        return self.status.get_status() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:39:54.850

您的`status`属性是**global**。它是类的一部分，而`User`不是实际实例的一部分。所以这实际上是正常的行为。`set_status()`将通过. `status`_`User``get_status()`

You should redesign your model. You don't really need the `Status` class anyway. You can have that business logic directly in your User methods `set_status` and `get_status`. But if you need to keep track of every status change then just have a ForeignKey to a Status model.

# vb6 - 如何在 Visual Basic 6 中嵌套多个 IF 语句？

> ID：15709015
> 
> 赞同：0
> 
> 时间：2013-03-29T17:57:11.180
> 
> 标签：vb6

如何在 Visual Basic 6`if`中使用另一个 ？`if`

例如，在 C++ 中，我可以用 开始我的语句`{`并用 结束它们，并且我可以在第一条语句`}`中使用另一个。`if`

例如：

```
if m>3
{       .....
     if a>5
      {
       ......
      }
     else {....}
} else ........ 
```

…但在 Visual Basic 中没有`{` `}`或类似的东西

我想编写一个程序，从用户那里接收时间并从中减少 4:30！例如，当用户运行它时，它会问：在德黑兰几点钟了？和用户输入时间（例如 16:30）然后程序从它减少 4 小时 30 分钟！并打印：格林威治标准时间是：12:00！我会更新我的帖子并输入我的代码！请阅读！

```
Option Explicit

Private Sub Command1_Click()
    Cls
    Dim h As Integer, m As Integer, hm As Integer, mm As Integer, t As Integer
    Dim fh As String, fm As String, fhm As String, fmm As String

    t = InputBox("Enter time")
    h = t \ 100
    m = t Mod 100

    Select Case h

    Case 0 To 24

        If m < 60 Then
            If m >= 30 Then

                hm = h - 4
                mm = m - 30

                If h < 10 Then fh = Format(h, String(2, "0")) Else fh = h
                If m < 10 Then fm = Format(m, String(2, "0")) Else fm = m
                If hm < 10 Then fhm = Format(hm, String(2, "0")) Else fhm = hm
                If mm < 10 Then fmm = Format(mm, String(2, "0")) Else fmm = mm

                Print
                Print "      Tehran  Time is  :   "; fh; ":"; fm
                Print
                Print "      GMT       Time is  :   "; fhm; ":"; 
            Else
                hm = h - 5
                mm = m + 30

                If h < 10 Then fh = Format(h, String(2, "0")) Else fh = h
                If m < 10 Then fm = Format(m, String(2, "0")) Else fm = m
                If hm < 10 Then fhm = Format(hm, String(2, "0")) Else fhm = hm
                If mm < 10 Then fmm = Format(mm, String(2, "0")) Else fmm = mm

                Print
                Print "      Tehran  Time is  :   "; fh; ":"; fm
                Print
                Print "      GMT       Time is  :   "; fhm; ":"; fmm
            End If
        End If

    Case Else

        Beep
        Print
        Print "   Time is wrong !!!  Try again "

    End Select

End Sub

Private Sub Command2_Click()
        End
End Sub

Private Sub Form_Load()

End Sub 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T18:05:27.103

VB 中的 If 子句以“End If”结尾（不区分大小写）。没有任何括号。

你可以嵌套任意数量的 if 子句，只要你关闭它们：

```
If ... Then
    *Do stuff*

    If ... Then
        *Do more stuff*
    End If
End If 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T19:08:54.700

单行 If 语句也可以嵌套：

```
If (a) Then [a_stuff] : If (b) Then [a_and_b_stuff] Else [a_and_notb_stuff] Else [nota_stuff] 
```

请注意，`[a_stuff]`后面不能再出现`[a_and_notb_stuff]`，因为无法判断 b 的 Else 语句在哪里结束，因此嵌套 If 语句之后的子句中不会出现任何内容。

任何`*_stuff`部分都可以是空的。但是你可能对空`[a_and_notb_stuff]`的 . 要解决此问题，您可以使用 ' `:`' 代替`[a_and_notb_stuff]`. IDE 将删除冒号，但不会插入另一个 Else 语句。

Addendum: I should point out that this whole post should be treated as information, and not as a recommendation. Nesting single-line If statements like this makes for very unreadable and bug-prone code.

# node.js - 从 Jade 中的子模板设置页面标题

> ID：15709020
> 
> 赞同：13
> 
> 时间：2013-03-29T18:15:58.823
> 
> 标签：node.js, express, pug

我想通过jade在布局的子模板中设置我的页面标题。我不想在路由中设置它们，因为这需要重新启动服务器。这是我希望完成的事情：

**布局.jade：**

```
!!! 5
  head
    - var title = title || "Default Title Here"
    title #{title}
    // ... 
```

**child.jade:**

```
- var title = "Child Title Here"
extends layout
// ... 
```

关于如何实现这一点的任何想法都会有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-29T19:38:17.140

来自[https://github.com/visionmedia/jade/issues/654#issuecomment-5859502](https://github.com/visionmedia/jade/issues/654#issuecomment-5859502)

布局.jade

```
block variables
!!! 5
head
 - var title = title || "Default Title Here"
 title #{title} 
```

child.jade:

```
block variables
  title = "ST"
extends layout 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-13T13:45:24.430

我最终得到了一个非常简单的逻辑，因为上述答案对我不起作用：

在**layout.jade**

```
block head
  - var theTitle = titleVar ? titleVar : "This title was set from The Layout!"
title #{theTitle} 
```

在**child.jade 中：**

```
extends layout
block head
   - var titleVar = "This title was set from the child!" 
```

在此解决方案中，布局将检查是否存在名为 titleVar 的变量：如果确实存在（并且不等于 0），则布局使用 titleVar 的值设置为标题，否则使用预定义的标题（在我们的例子中： " **This title was set from the Layout!** ") 来自布局文件。自己尝试一下，并`//`从子模板中注释 titleVar 的定义并查看结果。
我希望这个解决方案可以帮助其他人:)

# node.js - Best library to upload file via node.js?

> ID：15709024
> 
> 赞同：1
> 
> 时间：2013-03-29T18:16:11.780
> 
> 标签：node.js, file, upload

What is the best way to upload a file to a node.js server ? New to node, so I want to make sure I use an existing library without having to reinvent the wheel. Any tips /

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:07:56.940

Simple way using Express: [Really Simple File Uploads](http://howtonode.org/really-simple-file-uploads)

# mysql - 带有派生表和汇总的结果列宽

> ID：15709027
> 
> 赞同：0
> 
> 时间：2013-03-29T18:16:25.747
> 
> 标签：mysql, group-by, column-width, rollup, mysql-5.5

考虑这些 mysql 查询：

```
create temporary table t (a tinyint); insert into t values (1),(1),(2);

select * from t;
-- +------+
-- | a    |
-- +------+
-- |    1 |
-- |    1 |
-- |    2 |
-- +------+

select c,count(*) from (select a,count(*) c from t group by a) u
  group by c;
-- +---+----------+
-- | c | count(*) |
-- +---+----------+
-- | 1 |        1 |
-- | 2 |        1 |
-- +---+----------+ 
```

为什么在上面的第一个结果表中，`a`占用了四个字符的宽度，而在第二个结果表中，`c`只占用了一个字符的宽度？

```
select c,count(*) from (select a,count(*) c from t group by a) u
  group by c with rollup;
-- +---+----------+
-- | c | count(*) |
-- +---+----------+
-- | 1 |        1 |
-- | 2 |        1 |
-- | NULL |        2 |
-- +---+----------+ 
```

在上面的最后一个结果表中，`NULL`比分配给它的宽度更宽。这是错误还是预期行为？如果是有意的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:21:23.447

这似乎是 mysql 客户端的错误/限制。

mysql 客户端通常会根据列中最长的值很好地填充列，但我过去注意到它不能用多字节字符串字符正确填充，正如你指出的那样`GROUP BY ... WITH ROLLUP`如果列中最长的值短于 4 个字符，则在使用时正确填充。

# php - php中数据的临时存储

> ID：15709028
> 
> 赞同：0
> 
> 时间：2013-03-29T18:16:30.017
> 
> 标签：php

我需要一点建议。我试过在这里和谷歌上搜索，但我没有运气。

我在 PHP 中创建了一个表单。它有 32 个字段，包含各种文本框和选择框。当用户单击提交时，他们会被带到一个新页面，在那里他们可以看到他们输入的数据。如果他们犯了错误，他们必须点击返回表格。然后他们必须重新输入所有数据，而不仅仅是更改不正确的字段。

我是新手，愿意尝试新事物。

感谢您的任何建议，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:20:13.440

发布表单后，您可以将其保存在会话中，如下所示：

```
$_SESSION['form'] = $_POST['form']; 
```

然后在填写表单页面上，您可以设置输入的默认值：

```
<input type="text" name="form[name]" value="<?php echo isset($_SESSION['form']['name']) ? $_SESSION['form']['name'] : ''; ?>"> 
```

# javascript - 当在jade中单击img链接时将变量发送到javascript

> ID：15709031
> 
> 赞同：0
> 
> 时间：2013-03-29T18:16:33.857
> 
> 标签：javascript, image, href, pug

我正在从数组中获取图像的地址，并通过数组来显示每张图片。我想知道有没有一种方法可以在单击时传递与 img 关联的唯一变量？我尝试在 value 字段中使用带有变量的隐藏输入字段，使用 req.body.email 来访问它，但这只会返回最后一个达到的值。是否有可以从 javascript 文件访问的 img 属性，我将如何访问它？

编辑：代码添加

```
 #results
     - for (var i=0, len = arraysArray.length; i<len; i++)
      - email = arraysArray[i][0]
      - pic = './' + email + '.jpg'
      - fname = arraysArray[i][1]
      - sname = arraysArray[i][2]
      - name = fname + ' ' + sname
      - county = arraysArray[i][3]
      - body = arraysArray[i][4]
      .picture
       a(href='/connection')
        img(src='#{pic}', height='80', width='80')
    #searchDetails
      #name
       h2#nameheading #{name}, County: #{county}, College: #{body} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:25:51.340

努力 `element.setAttribute(attribute,value)`做到这一点。您可以使用 VALUE、NAME 或 ID 等属性来存储要传递的值。

# ios - Google 地图上的 iOS 覆盖 UI

> ID：15709035
> 
> 赞同：1
> 
> 时间：2013-03-29T18:16:57.313
> 
> 标签：ios, google-maps-sdk-ios

![](../Images/297d5ac33ffdd9d8be4cba81a2bd10cf.png)

顶部和底部的条形图由 ImageViews 制成，按钮和徽标是覆盖在 mapView 上的视图的子项，如下所示：

![我的视图架构](../Images/e302b523afece76fb54e12b571f89cb1.png)

我的具体问题是 MapView 正在吸收所有触摸事件，因此没有按钮起作用。我已经通过在包含我所有覆盖控件的视图上启用用户交互来解决它，但它会禁用与地图的所有交互。我还尝试将 ui 包裹在一个用户不可与两个子视图（包含条形）交互的视图周围，这最终导致奇怪的演示错误和许多 NSLog 约束错误。

关于如何正确实现此布局的任何想法？如果用户尝试通过触摸灰色条与其进行交互，则该地图不应该工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:28:26.930

看起来您有一个包含所有覆盖元素的视图，并且它位于地图视图上方，因此它将处理所有触摸而不是您的地图视图。

基于这个设计，我要做的是创建一个包含顶部的视图和一个包含底部的视图。然后，将它们放在 Map View 上方的位置，这将使中间的 Map View 上方没有视图。

![在此处输入图像描述](../Images/8d9479acb669dc84c8439418f5b09551.png)

在这里您可以看到，绿色部分是“顶部叠加”，紫色部分是“底部叠加”，没有视图覆盖地图视图的中间部分，您希望用户能够与它进行交互。

# node.js - this.responseXML is not working while making request to isbndb server

> ID：15709036
> 
> 赞同：0
> 
> 时间：2013-03-29T18:16:59.987
> 
> 标签：node.js, xmlhttprequest

I am working on an App and I am trying to do xmlhttp request in nodejs and express but my responseXML is not working and it returns nothing.. Here is my code:-

```
var XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;
var xml2js=require("xml2js");

var xhr=new XMLHttpRequest();

xhr.onreadystatechange=function(){

    console.log("State:"+this.readyState);

    if(this.readyState==4){

        var result=this.responseXML;
        console.log(result);

    }

};

xhr.open("GET","http://isbndb.com/api/books.xml?access_key=QMMEUNJB&results=prices&index1=isbn&value1=0061031321");
xhr.setRequestHeader('Content-type', 'text/xml');

xhr.send(); 
```

And the output is:-

```
Output:-
State:1
State:1
State:2
State:3
State:4 
```

It returns a blank line after State:4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:05:34.887

The `xmlhttprequest` package doesn't (currently) support XML - see the bottom of [https://npmjs.org/package/xmlhttprequest](https://npmjs.org/package/xmlhttprequest)

You're already including the `xml2js` library, but your code doesn't appear to be using it anywhere. Try replacing

```
var result=this.responseXML;
console.log(result); 
```

with this:

```
xml2js.parseString(this.responseText, function (err, result) {
    console.dir(result);
}); 
```

# python - Issue with module changes in python

> ID：15709038
> 
> 赞同：0
> 
> 时间：2013-03-29T18:17:04.583
> 
> 标签：python

I am a newbie to python. Below is my module

mymath.py

```
pi = 3.142

def circle(radius):
    return pi * radius * radius 
```

In terminal, I run it following way:

```
>>import mymath
>>mymath.pi
>>3.142 
```

When I change pi to a local variable and reload(mymath) and do import mymath, still I get value of mymath.pi as 3.142\. However the result of mymath.circle(radius) does reflect the change in result.

```
def circle(radius):
    pi = 3
    return pi * radius * radius

>>import imp
>>imp.reload(mymath)
>>import mymath
>>mymath.pi
>>3.142
>>circle(3)
>>27 
```

Can anyone tell me what might be the issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:27:16.520

From the docs for [`imp.reload()`](http://docs.python.org/3.1/library/imp.html#imp.reload):

> When a module is reloaded, its dictionary (containing the module’s global variables) is retained. Redefinitions of names will override the old definitions, so this is generally not a problem. If the new version of a module does not define a name that was defined by the old version, the old definition remains.

So when you do `imp.reload(mymath)`, even though `pi` no longer exists as a global name in the module's code the old definition remains as a part of the updated module.

If you really want to start from scratch, use the following method:

```
import sys
del sys.modules['mymath']
import mymath 
```

For example:

```
>>> import os
>>> os.system("echo 'pi = 3.142' > mymath.py")
0
>>> import mymath
>>> mymath.pi
3.142
>>> os.system("echo 'pass' > mymath.py")
0
>>> import sys
>>> del sys.modules['mymath']
>>> import mymath
>>> mymath.pi
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'pi' 
```

# c# - 如何迭代地确定 C# 表达式树的深度？

> ID：15709044
> 
> 赞同：7
> 
> 时间：2013-03-29T18:17:47.677
> 
> 标签：c#, lambda, expression

我试图弄清楚是否有一种好方法可以使用迭代方法来确定特定 C# 表达式树的深度。我们使用表达式进行一些动态评估，并且在极少数（错误）情况下，系统可以尝试处理一个太大而导致堆栈溢出的表达式树。我试图找出一种在允许评估树之前检查树深度的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T19:33:19.953

与其尝试专门解决表达式树的问题，不如让我为您描述一些处理不良行为树的通用技术。

您可能想先阅读我关于解决您提出的问题的系列文章：*如何在不使用递归的情况下确定树的深度*？

[http://blogs.msdn.com/b/ericlippert/archive/2005/07/27/recursion-part-one-recursive-data-structures-and-functions.aspx](http://blogs.msdn.com/b/ericlippert/archive/2005/07/27/recursion-part-one-recursive-data-structures-and-functions.aspx)

这些文章是我在编写 JScript 时写的，所以这些示例都在 JScript 中。不过，不难看出如何将这些概念应用于 C#。

让我给你一个 C# 中的小玩具示例，说明如何在不进行完全递归的情况下对递归数据结构进行操作。假设我们有以下二叉树：（假设 WOLOG 的二叉树节点是零个或两个子节点，从不完全是一个。）

```
class Node 
{
    public Node Left { get; private set; }
    public Node Right { get; private set; }
    public string Value { get; private set; }
    public Node(string value) : this(null, null, value) {}
    public Node(Node left, Node right, string value)
    {
        this.Left = left;
        this.Right = right;
        this.Value = value;
    }
}
...
Node n1 = new Node("1");
Node n2 = new Node("2");
Node n3 = new Node("3");
Node n3 = new Node("4");
Node n5 = new Node("5");
Node p1 = new Node(n1, n2, "+");
Node p2 = new Node(p1, n3, "*");
Node p3 = new Node(n4, n5, "+");
Node p4 = new Node(p2, p3, "-"); 
```

所以我们有树 p4：

```
 -
             /     \
            *       +
           / \     / \
          +   3   4   5
         / \
        1   2 
```

我们希望将 p4 打印为带括号的表达式

```
 (((1+2)*3)-(4+5)) 
```

递归解决方案很简单：

```
 static void RecursiveToString(Node node,  StringBuilder sb)
 {
     // Again, assuming either zero or two children.
     if (node.Left != null) 
         sb.Append(node.Value);
     else
     {
         sb.Append("(");
         RecursiveToString(node.Left, sb);
         sb.Append(node.Value);
         RecursiveToString(node.Right, sb);
         sb.Append(")");
      }
 } 
```

现在假设我们知道这棵树可能在左侧“深”，而在右侧“浅”。我们可以消除左边的递归吗？

```
 static void RightRecursiveToString(Node node,  StringBuilder sb)
 {
     // Again, assuming either zero or two children.
     var stack = new Stack<Node>();
     stack.Push(node);
     while(stack.Peek().Left != null)
     {
         sb.Append("(");
         stack.Push(stack.Peek().Left);
     }
     while(stack.Count != 0)
     {
         Node current = stack.Pop();
         sb.Append(current.Value);
         if (current.Right != null)
             RightRecursiveToString(current.Right, sb);
             sb.Append(")");
         }
     }
 } 
```

仅右递归版本当然更难阅读，也更难推理，但它不会破坏堆栈。

让我们来看看我们的例子。

```
push p4
push p2
output (
push p1
output (
push n1
output (
loop condition is met
pop n1
output 1
go back to the top of the loop
pop p1
output +
recurse on n2 -- this outputs 2
output )
go back to the top of the loop
pop p2
output *
recurse on n3 -- this outputs 3
output )
go back to the top of the loop
pop p4
output -
recurse on p3
  push p3 
  push n4
  output (
  loop condition is met
  pop n4
  output 4
  go back to the top of the loop
  pop p3
  output +
  recurse on n5 -- this outputs 5
  output )
  loop condition is not met; return.
output )
loop condition is not met, return. 
```

我们输出什么？`(((1+2)*3)-(4+5))`， 如预期的。

所以你在这里看到我可以从两个递归降到一个。我们可以使用类似的技术从一个递归到没有递归。让这个算法完全迭代——这样它既不会在左边也不会在右边递归——留作练习。

（顺便说一句：我问这个问题的一个变种作为一个面试问题，所以如果你被我面试过，你现在有一个不公平的优势！）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T21:31:08.323

.Net 中包含的`ExpressionVisitor`内容是递归的，但使用一种技巧，您可以将其变成迭代的。

基本上，您正在处理一个节点队列。对于队列中的每个节点，使用`base.Visit()`它来访问其所有子节点，然后将这些子节点添加到队列中，而不是立即递归处理它们。

这样，您不必编写特定于每个`Expression`子类型的代码，而且还可以解决`ExpressionVisitor`.

```
class DepthVisitor : ExpressionVisitor
{
    private readonly Queue<Tuple<Expression, int>> m_queue =
        new Queue<Tuple<Expression, int>>();
    private bool m_canRecurse;
    private int m_depth;

    public int MeasureDepth(Expression expression)
    {
        m_queue.Enqueue(Tuple.Create(expression, 1));

        int maxDepth = 0;

        while (m_queue.Count > 0)
        {
            var tuple = m_queue.Dequeue();
            m_depth = tuple.Item2;

            if (m_depth > maxDepth)
                maxDepth = m_depth;

            m_canRecurse = true;

            Visit(tuple.Item1);
        }

        return maxDepth;
    }

    public override Expression Visit(Expression node)
    {
        if (m_canRecurse)
        {
            m_canRecurse = false;
            base.Visit(node);
        }
        else
            m_queue.Enqueue(Tuple.Create(node, m_depth + 1));

        return node;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T19:46:58.390

您可以始终使用显式内存结构代替使用递归来迭代树。如果您想密切模仿递归行为，您甚至可以使用显式的`Stack`. 由于这是在堆中存储尚未处理的节点上的所有信息，因此需要更多的时间才能用完它。

这是一种通用方法，它遍历基于树的结构（迭代地，而不是递归地）并返回所有项目的扁平序列以及该项目的深度。

```
public static IEnumerable<Tuple<T, int>> TraverseWithDepth<T>(IEnumerable<T> items
    , Func<T, IEnumerable<T>> childSelector)
{
    var stack = new Stack<Tuple<T, int>>(
        items.Select(item => Tuple.Create(item, 0)));
    while (stack.Any())
    {
        var next = stack.Pop();
        yield return next;
        foreach (var child in childSelector(next.Item1))
        {
            stack.Push(Tuple.Create(child, next.Item2 + 1));
        }
    }
} 
```

现在要使用它，我们需要做的就是传入根节点，这是一个将每个元素映射到其直接子节点的函数，然后我们可以取深度的最大值。由于延迟执行，遍历函数产生的每个项目都不会保留在内存中`Max`，因此内存中唯一保留的项目是尚未处理的节点，但有一个已处理的父节点。

```
public static int GetDepth(Expression t)
{
    return TraverseWithDepth(new[] { t }, GetDirectChildren)
        .Max(pair => pair.Item2);
} 
```

# c++ - glm::unProject 问题，世界到屏幕空间对齐错误

> ID：15709045
> 
> 赞同：0
> 
> 时间：2013-03-29T18:17:49.840
> 
> 标签：c++, opengl, 3d, game-engine

我在 3D 空间中有一个平面，它面向我希望能够放置在与单击位置相同的位置的相机。但是，平面的位置超出了鼠标光标。这是针对我希望能够移动并与 UI 上的小部件交互的动态 GUI。

```
void mouse::unProjectMouse(float width, float height, camera* viewportCamera)
{
    if(NULL == viewportCamera)
    {
        std::cout<<CNTRLCALL<<"camera failed! failed to un-project mouse";
    } else {
        glm::vec4 viewport = glm::vec4(0, 0, width, height);
        glm::mat4 tmpView = viewportCamera->updateView();
        glm::mat4 tmpProj = viewportCamera->updateProjection();
        glm::vec3 screenPos = glm::vec3(mouseX, height-mouseY - 1.0f, 1.0f);

        glm::vec3 worldPos = glm::unProject(screenPos, tmpView, tmpProj, viewport);

        worldPos = worldPos / (worldPos.z * -1.0f);

        mouseWorldX = worldPos.x;
        mouseWorldY = worldPos.y;
        mouseWorldZ = worldPos.z;
    }
} 
```

![在这里，我们看到了从视口坐标到世界坐标的映射](../Images/d0454325b9b2ecf80d4b6d11faa0f00f.png)

我不知道为什么飞机没有与鼠标正确对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:07:59.630

这是修复：

```
 void mouse::unProjectMouse(float width, float height, camera* viewportCamera)
{
if(NULL == viewportCamera)
{
    std::cout<<CNTRLCALL<<"camera failed! failed to un-project mouse";
} else {

    glm::vec4 viewport = glm::vec4(0.0f, 0.0f, width, height);
    glm::mat4 tmpView = glm::lookAt(glm::vec3(viewportCamera->getCameraPosX(),viewportCamera->getCameraPosY(),viewportCamera->getCameraPosZ()),
                                    glm::vec3(viewportCamera->getForward().x,viewportCamera->getForward().y,viewportCamera->getForward().z),glm::vec3(0,1,0));
    glm::mat4 tmpProj = glm::perspective( 90.0f, width/height, 0.1f, 1000.0f);
    glm::vec3 screenPos = glm::vec3(mouseX, height-mouseY - 1, 0.0f);

    glm::vec3 worldPos = glm::unProject(screenPos, tmpView, tmpProj, viewport);

    mouseWorldX = worldPos.x;
    mouseWorldY = worldPos.y;
    mouseWorldZ = worldPos.z;
}

} 
```

然后要将对象与光标位置对齐，相机的 Z 元素必须准确：

```
UIcamera->translateCameraX(0.0f);
UIcamera->translateCameraY(0.0f);
UIcamera->translateCameraZ(0.744f); 
```

# php - How to use relative link instead of absoloute for localhost and remote server

> ID：15709052
> 
> 赞同：1
> 
> 时间：2013-03-29T18:18:13.890
> 
> 标签：php, html, web, absolute-path, rel

My Apache web server root directory is set to "C:\webserver\webroot\AptanaProjects"

I want to be able to refer to a style sheet without putting in the absolute reference because I upload, using FTP, to a website.

```
The http://localhost/MovieDatabase/index.php file refers to http://localhost/MovieDatabase/styles/main.css

using:

<link rel="stylesheet" href="/styles/main.css" type="text/css"> 
```

which won't work because obviously I don't include the MovieDatabase part of the path.

How could I work around this to avoid putting in an absolute path? I don't want to change the webserver root directory to MovieDatabase as I have multiple projects.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:21:23.037

Use a relative path by removing the leading slash:

```
<link rel="stylesheet" href="styles/main.css" type="text/css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:25:49.620

Your styles or scripts must be relative to your current file.

If you use slash before any path, accessing it as local file will inform to your browser to lookup file on root path (c:).

In your development environment, you can use Apache mod_alias (Alias) for your application. It may be used according your server path configuration.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:28:15.673

You can use:

```
<link rel="stylesheet" href="./styles/main.css" type="text/css"> 
```

or

```
<link rel="stylesheet" href="/MovieDatabase/styles/main.css" type="text/css"> 
```

or see RichieHindle's answer.

# android - android中的标签活动

> ID：15709053
> 
> 赞同：0
> 
> 时间：2013-03-29T18:18:15.210
> 
> 标签：android, tabview

嗨，我是这个“标签活动”概念的新手。我搜索了这个，最后我知道我应该实现“片段”。我完成了以下代码，但它显示错误。请指导我解决这个问题。

```
public class VendorActivity extends FragmentActivity
{
    private FragmentTabHost mTabHost;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_vendor);

        mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);

         // Tab for Photos

        TabSpec photospec = mTabHost.newTabSpec("Photos");
        // setting Title and Icon for the Tab
        photospec.setIndicator("Photos");
        Intent photosIntent = new Intent(this, Simple.class);
        photospec.setContent(photosIntent);

        System.out.println("b4 fragment");
        TabSpec songspec = mTabHost.newTabSpec("Songs");
        songspec.setIndicator("Songs");
        Intent songsIntent = new Intent(this, Contacts.class);
        songspec.setContent(songsIntent);
        System.out.println("bafter fragment");

        System.out.println("1");
        mTabHost.addTab(photospec); // Error comes here.android
        System.out.println("2");
        mTabHost.addTab(songspec); 
        System.out.println("3");

//       mTabHost.addTab(mTabHost.newTabSpec("simple").setIndicator("Simple"),
//                  FragmentStackSupport.sim.class, null);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_vendor, menu);
        return true;
    }

} 
```

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.app.FragmentTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
    </android.support.v4.app.FragmentTabHost> 
```

我的日志猫：

```
03-29 23:44:09.245: I/Process(447): Sending signal. PID: 447 SIG: 9
03-29 23:46:17.304: I/System.out(474): b4 fragment
03-29 23:46:17.304: I/System.out(474): bafter fragment
03-29 23:46:17.304: I/System.out(474): 1
03-29 23:46:17.444: D/AndroidRuntime(474): Shutting down VM
03-29 23:46:17.444: W/dalvikvm(474): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-29 23:46:17.584: E/AndroidRuntime(474): FATAL EXCEPTION: main
03-29 23:46:17.584: E/AndroidRuntime(474): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.vegetable/com.vegetable.VendorActivity}: java.lang.NullPointerException
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.os.Looper.loop(Looper.java:123)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-29 23:46:17.584: E/AndroidRuntime(474):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 23:46:17.584: E/AndroidRuntime(474):  at java.lang.reflect.Method.invoke(Method.java:521)
03-29 23:46:17.584: E/AndroidRuntime(474):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-29 23:46:17.584: E/AndroidRuntime(474):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-29 23:46:17.584: E/AndroidRuntime(474):  at dalvik.system.NativeStart.main(Native Method)
03-29 23:46:17.584: E/AndroidRuntime(474): Caused by: java.lang.NullPointerException
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.widget.TabHost.addTab(TabHost.java:209)
03-29 23:46:17.584: E/AndroidRuntime(474):  at com.vegetable.VendorActivity.onCreate(VendorActivity.java:50)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 23:46:17.584: E/AndroidRuntime(474):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-29 23:46:17.584: E/AndroidRuntime(474):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:31:55.213

`mTabHost`是`null`。

显然，这是因为`res/layout/activity_vendor.xml`不包含`FragmentTabHost`named `@android:id/tabhost`，这是您的`findViewById()`呼叫所要求的。

# bash - What is the `@Name@` in command line?

> ID：15709059
> 
> 赞同：1
> 
> 时间：2013-03-29T18:18:44.110
> 
> 标签：bash, tsung

I'm looking for Tsung source code. There is a line like following in file [tsung.sh.in](https://github.com/processone/tsung/blob/master/tsung.sh.in):

`ERL_OPTS=" $ERL_DIST_PORTS -smp auto +P $MAX_PROCESS +A 16 +K true @ERL_OPTS@ "`

What does the `@ERL_OPTS@` mean?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:30:06.653

This seems to be something that gets substituted by autoconf during the build process.

Generally, a `.in` file gets preprocessed by some build script. Autoconf uses `@IDENTIFIER@` to indicate the place where the actual value has to be put in. The preprocessed version loses the `.in` extension, thus generating `tsung.sh` in this particular case.

# asp.net - What is the best way to display repeated codeblocks in vb.net?

> ID：15709061
> 
> 赞同：0
> 
> 时间：2013-03-29T18:18:50.360
> 
> 标签：asp.net, sql-server, vb.net

I'm quite new to asp.net and vb.net, so my apologies if I do not use the correct terminology here.

I have a database table and for each row in a returned dataset from that table I want to produce some HTML code eg:

```
<div>
    <img src="SOURCE" />
    <h1>Row1</h1>
    <input type="button" />
    <input type="button" />
</div
<div>
    <img src="SOURCE" />
    <h1>Row2</h1>
    <input type="button" />
    <input type="button" />
</div 
```

What would be the best way to do this? Do I simply pull back an object with the entire data and then write a foreach loop to iterate through each row and insert a string to the page, or should I be looking to use a user control?

我想我正在尝试制作一种论坛列表页面，并希望获取数据库中具有特定条目的所有主题，然后在带有一些输入控件和图像的页面上显示该列表。我还想添加分页；所以在任何时候只显示10个帖子，然后能够分页到下一页。

如果我不是很清楚，我再次道歉，但我有点难以理解解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:21:18.730

您可以使用[Repeater](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)。

```
 <asp:Repeater id="Repeater1" runat="server">
      <ItemTemplate>
          <img src="SOURCE" />
          <h1>Row<%# Container.ItemIndex %></h1>
          <input type="button" />
          <input type="button" />
      </ItemTemplate>
   </asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-29T18:24:49.977

如果您希望重复任何代码块。试试我使用的这段代码..

显示任意 div 3 次的示例代码

```
<% For i as Integer = 1 To 3%>
 <div>
    <img src="SOURCE" />
    <h1>Row1</h1>
    <input type="button" />
    <input type="button" />  
</div> <% Next %> 
```

# java - 如何在一组 RESTful 服务上构建可配置的外观

> ID：15709063
> 
> 赞同：0
> 
> 时间：2013-03-29T18:18:51.310
> 
> 标签：java, rest, jakarta-ee

是时候在 StackOverflow 上提问了，因为我在 Google 中没有找到好的问题。

我们有一个遗留系统（在我的例子中是 2 个）通过 RESTful Web 服务提供一些功能。现在我们正在构建一个 Java EE 系统，该系统将使用该遗留系统中的 RESTful 服务。

问题：如何在提到的 RESTful Web 服务上构建方便的外观 API，以便在我们的 Java EE 应用程序中轻松使用它们？是否有一些框架可以轻松使用一组 REST Web 服务并且可以进行 XML 配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:30:48.057

有多种选择

1.  最“低级”——HTTP 客户端（[http://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)）
2.  更抽象的东西 - RestEasy ClientRequest/ClientRespons ( [http://docs.jboss.org/resteasy/docs/1.2.GA/javadocs/org/jboss/resteasy/client/ClientRequest.html](http://docs.jboss.org/resteasy/docs/1.2.GA/javadocs/org/jboss/resteasy/client/ClientRequest.html) ) 有很多教程如何工作用它
3.  由于 XML 配置，您可能最喜欢它 - Spring Framework RestTemplate 支持（例如，参见[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate .html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html) )，网上也有很多教程。

# java - java中的数组排序方法

> ID：15709066
> 
> 赞同：0
> 
> 时间：2013-03-29T18:18:58.293
> 
> 标签：java, arrays, sorting, methods

我改变了第一个 System.out.println 语句，但我仍然什么也没看到！！！我唯一得到的是构建成功，但没有用户输入的输出！

```
 //initializes the array to have a limit of 10 numbers inputted
    double[] numbers = new double [10];

    // this loop reads in the numbers inputed from the array
    for (int i = 0; i < numbers.length; i++) {
        numbers[i] = input.nextDouble();
 }

System.out.println("Enter " + numbers.length + " values: ");

    java.util.Arrays.sort(numbers);// this is the Array.sort()method

    // this loop sorts the numbers and then prints them
    for(double number : numbers){
        System.out.println(number);
    }
   }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:25:29.590

您的程序可以运行，但您可能没有很好地使用它，因为您一直看到*Enter 10 values:*在您输入每个数字之后。

尝试移动

`System.out.println("Enter " + numbers.length + " values: ");`

到*for*循环之外。然后输入 10 个数字，您将看到输出。

顺便说一句，如果你不将它移到`for`循环之外，你的程序也可以工作，但是......就像你看到的那样，这是误导性的。

下次，使用调试器。太棒了..我有时甚至调试一个工作代码..只是因为它太棒了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:23:54.190

您正在获得输出，而不是在您认为应该的时候。因为您`numbers[i] = input.nextDouble()`在打印语句之前放置了，所以控制台在打印消息之前正在等待输入。我敢打赌，如果您运行该程序，输入一个数字，然后按 Enter，您将收到您认为应该看到的消息。解决方案就是在该`for`循环中切换这两行代码。

# php - Windows系统中的PHP

> ID：15709069
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:19:02.737
> 
> 标签：php, symfony

我开始学习 Symfony2，在我阅读的教程中，我必须在控制台中使用 PHP 做一些事情，如下所示：

```
$ php app/console generate:bundle --namespace=Blogger/BlogBundle --format=yml 
```

但我的系统无法识别此订单。我已经用 PHP 和 MySQL 安装了 XAMPP，我可以运行用 PHP 编写的应用程序。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:04:01.250

您需要将 PHP 添加到 %PATH% 变量中。

您需要添加 php.exe 所在的目录，如下所示：

"c:\xampp\php\"

按照这里的指示：http: [//java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

# java - 页面输出 500 错误时是否存在 XSS 风险？

> ID：15709070
> 
> 赞同：1
> 
> 时间：2013-03-29T18:19:08.107
> 
> 标签：java, xss

去年我在中国的一个网站上工作。该网站一直运行良好，但我刚刚收到中国网络安全局的电子邮件。

他们给我发了一个附件和几个 URL。其中之一是

[http://mydomain.com/servlets/pdf?var=xss<audio](http://mydomain.com/servlets/pdf?var=xss<audio) src=pksovf onerror=pksovf(qrx)>

他们说上面的网址有风险。我检查了 url，它一直抛出 500 错误，因为 url 格式不正确。

如果页面抛出 500 错误，还有风险吗？我不这么认为，但我只是想确认一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:27:26.390

500 大致类似于桌面软件的崩溃。崩溃被认为是安全风险，因为它们可以被恶意输入利用，Web 服务器也是如此。

500 的意思是“我们没有预料到的事情发生了，我们没能处理好”。这意味着那里有些东西可以被利用 - 不能保证这一点，就像不能保证可以利用桌面软件中的崩溃一样，但是将这两种情况都视为潜在的安全漏洞是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:27:33.920

可能*是*的。这取决于错误发生的位置。

如果您的后端在崩溃之前*确实*将此字符串插入了数据库中的某个位置，那么稍后可能会查询该字符串以在您的一个视图中呈现此字符串，这可能会非常危险，因为攻击者可能会在网页中插入任意 HTML 或 Javascript例如，将用户重定向到有害网站。

Also, this could easily result in an [`SQL injection`](http://www.unixwiz.net/techtips/sql-injection.html) if a database was queried with this string at some point, given that it was not filtered.

To summarize, it depends on what your did with this string and *where* did your code crash.

Anyway, you should not have this kind of issues and should always check the validity of a user input. Getting a `500` HTTP return code is exceptional and means that something went *wrong* on the server side. You got to fix this anyway.

# javascript - 我可以向标签添加任意属性吗稍后在 JS 代码中访问它

> ID：15709072
> 
> 赞同：1
> 
> 时间：2013-03-29T18:19:16.060
> 
> 标签：javascript, jquery, dom

有没有办法用无关的属性来补充 DOM 元素，或者标签是否通过设计固定了某些属性？例如，这可能吗？

```
<input id="spec" type="text" preference="silly"/> 
```

然后用 jQuery 或 DOM 请求访问这个元素，比如

```
if ($("#spec").attr("preference")=="silly") {
     document.write("That input is silly")
} 
```

大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:20:46.167

添加任意额外的属性，充其量会使 HTML 无效，并有可能与未来的语言更改发生冲突。

HTML 5 引入了用于在 DOM 中存储任意数据的[`data-*`属性](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)。

jQuery 可以通过[`data()`方法](http://api.jquery.com/data/)访问它们。

```
<input id="spec" data-preference="silly">
if (jQuery('#spec').data('preference') === 'silly') { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:21:27.400

您可以简单地使用[data](http://api.jquery.com/data/)做到这一点：

```
<input id="spec" type="text" data-preference="silly"/> 

if ($("#spec").data("preference") == "silly") {
     alert("That input is silly");
} 
```

# php - Php Drupal 规则代码中的 SQL 错误 - 限制每天的投票数

> ID：15709078
> 
> 赞同：1
> 
> 时间：2013-03-29T18:19:58.827
> 
> 标签：php, mysql, drupal, drupal-rules

激活带有一些 PHP 验证的规则时，我收到一条 SQL 错误消息。该规则的目标是检查用户在过去 24 小时内是否投票超过 2 次。这是我使用的代码：

```
// Configure your settings: 
$daily_limit = 2;
$content_type = 'node';
$day = strtotime(date('Y-m-d'))-1;

// Load the active user account
global $user;

// Drupal has a security feature called the Database Abstraction Layer. 
// You have to build DB queries with variables that are defined in an array.
// Define the query string, where ":drupaluid" etc. are arbitrary placeholders

$query = 'SELECT * FROM votingapi_vote WHERE uid=:drupaluid AND content_type=:drupaltype AND timestamp > :day';

// Define each placeholder
$variables = array(':drupaluid' => $user->uid, ':drupaltype' => $content_type, ':day' => $day);

// Query the Drupal database
$result = db_query($query, $variables);

// Count the number of rows returned from the Drupal database
// From: http://api.drupal.org/api/drupal/includes%21database%21database.inc/function/db_query/7
$nodecount = $result->rowCount();

// Set the flag as to whether this Rule is effective or not
if ( $nodecount >= $daily_limit) {
    return TRUE; // You will be over the accepted quota
} else {
    return FALSE; // Still got room. Allow the new node.
} 
```

我试图调试查询，但即使是一个简单的查询`$query = 'SELECT * FROM votingapi_vote WHERE uid = 1`也不能在 Php 中工作，而它在 mysql 控制台中工作。有人看到这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:35:14.020

[`DatabaseStatementInterface::rowCount`](http://api.drupal.org/api/drupal/includes!database!database.inc/function/DatabaseStatementInterface%3A%3ArowCount/7)特别返回

> 受最后执行的 DELETE、INSERT 或 UPDATE 语句影响的行数。

它不用于检索结果集的计数。为此，请使用计数查询，或者简单地使用 PHP 函数

```
$result = db_query($query, $variables)->fetchAll();

$nodecount = count($result); 
```

# java - 将 Java 文件对象保存为 oracle Blob

> ID：15709081
> 
> 赞同：2
> 
> 时间：2013-03-29T18:20:10.097
> 
> 标签：java, blob

我正在使用播放框架 2.0 和 Intellij。我试图让用户上传一个文档，然后将其保存为 Oracle 数据库中的 blob 对象。我正在使用 play 的方法从用户那里获取文件。然后在控制器中，我将它发送到模型类，我将文件保存在数据库中。问题是“附件”字段在保存到数据库时始终为空，我不知道为什么。我尝试将文件对象读取为字节字符串，然后将其转换为 blob 对象（我还将附件字段转换为 Blob 类型），但该 blob 对象也是空的。我怎样才能做到这一点？

//控制器代码

```
public  static Result ValidateQuestion() {
    Form<Questions> filledForm = questionForm.bindFromRequest();

    if (filledForm.hasErrors()) {
        return badRequest(createQuestion.render(questionForm,fillCourseList(),fillSemesterList()));
    }
    else {
        Http.MultipartFormData body = request().body().asMultipartFormData();
        Http.MultipartFormData.FilePart attachment = body.getFile("attachment");
        if(attachment!=null) {
            Attachmenttable.create(1, "other", attachment.getFile());
        }
        return redirect(routes.TeacherController.TeacherDashboard());
    }

} 
```

//模型类代码

```
@Id
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator = "s_attachmenttable")
public int attachment_id;

@Constraints.Required
public int question_id;

@Constraints.Required
public String name;

@Transient
public File attachment;

public Attachmenttable(int spurning_id, String name, File attachment) {
    this.spurning_id = spurning_id;
    this.nafn = nafn;
    this.vidhengi = vidhengi;
}

public static Attachmenttable create(int question_id, String name, File attachment) {

  Attachmenttable attachmenttable = new Attachmenttable(question_id, name, attachment);
    attachmenttable.save();
    return attachmenttable;
} 
```

# php - InnerHtml 使用类

> ID：15709086
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:20:30.050
> 
> 标签：php, jquery

我正在使用 PHP 和 JQuery 开发一个网站。我正在检索单击事件所需的数据，但是当我从数据库中获得响应时，innerHtml 不起作用。感谢任何帮助

```
$(document).ready(check_messages);

function check_messages() {
    $('.mes_det').click(get_message);
}

function get_message() {

    var name = $(this).find(".name").html();
    var time = $(this).find(".time").html();
    $.get('find_message_text.php?name=' + name + "&time=" + time + "&send=0", function (data) {
        $(this).find(".message_Text").html(data)
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:24:37.413

在`$.get`函数的上下文中，`this`不引用单击的元素，您应该缓存`this`对象。

```
var $this = $(this);
$.get('...', function (data) {
    $this.find(".message_Text").html(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:26:26.863

在您的响应功能中，`$.get`您不能使用`this`引用您的 html 元素。尝试使用此功能：

```
function get_message() {

    var name = $(this).find(".name").html();
    var time = $(this).find(".time").html();
    var elem = this;
    $.get('find_message_text.php?name=' + name + "&time=" + time + "&send=0", function (data) {
        $(elem).find(".message_Text").html(data)
    });
} 
```

# javascript - 如何使用 Jquery 获取一个类并执行一个功能

> ID：15709093
> 
> 赞同：2
> 
> 时间：2013-03-29T18:20:53.747
> 
> 标签：javascript, jquery, html, jquery-mobile, mobile

我目前正在从事一个处理来自网站的提要的项目。我已成功获得提要，但我的挑战是当用户单击提要链接而不是将用户带到提要站点时获取提要的内容和标题。

我尝试过使用不同的方法来获得解决方案，但没有一个有效。

以下是我的最新代码（Jquery Mobile）

```
 (function($){
    $.fn.FeedEk=function(opt){
        var def={FeedUrl:'', MaxCount:5, ShowDesc:true, ShowPubDate:true, ShowFullContent:true};
        if(opt){
            $.extend(def,opt)
        }
        var idd = $(this).attr('id');
        if(def.FeedUrl==null || def.FeedUrl==''){
            $('#'+idd).empty();
            return;
        }
        var pubdate;
        $('#'+idd).empty().append('<div style="text-align:center; margin: auto;"><img src="loader.gif" class="loader" /></div>');
        $.ajax({
            url:'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num='+def.MaxCount+'&output=json&q='+encodeURIComponent(def.FeedUrl)+'&callback=?',
            dataType:'json',
            success:function(data){
                $('#'+idd).empty();
                $('#post').empty();
                var output = '<ul data-role="listview" data-filter="true">';
                $.each(data.responseData.feed.entries,function(i,entry){
                    var i =new Array(i);
                    for(j=0;j<=i;j++)
                        {
                            var id = j;
                        }
                    var title =new Array(entry.title);
                    var content =new Array(entry.content);
                    for(t=0;t<title.length;t++){
                        for(c=0;c<content.length;c++){$('#post').append(title[t]+'<br/>'+content[c])}
                    }
                    //while(id == 
                        //if(i == id
                        //var post = '<div><h3>'+entry.title+'</h3></div>';
                        //post += '<div>Post content'+entry.content+'</div>';
                    output += '<li>';
                    output += '<a href="#postContent" class="ItemTitle '+id+'">'+entry.title+'</a>';
                    /*if(def.ShowPubDate){
                        pubdate=new Date(feed[0].entry.publishedDate);
                        output += '<br/><span class="ItemDate">'+pubdate.toLocaleDateString()+'</span';
                    }
                    if(def.ShowDesc){
                        output += '<br/><span class="ItemDesc">'+feed[0].entry.contentSnippet+'</span>';
                    }*/
                    output += '</li>';});
            console.log(data.responseData.feed.entries);
            output += '</ul>';
            $('#'+idd).html(output);
                if($('.'+id).click() == true){
                    $('#post').empty();
                    var postTitle = title[id];
                    var postContent = content[id];
                    $('#post').append('<div><h3>'+postTitle+'</h3></div><div>'+postContent+'</div>');
                }
            }
        })

    }
    })
    (jQuery); 
```

下面是 HTML 代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>News on the GO!</title>
    <link href="theme/news.min.css" rel="stylesheet" />
    <link href="theme/jquery.mobile.structure-1.2.0.min.css" rel="stylesheet" />
    <link href="theme/FeedEk.css" rel="stylesheet" type="text/css" />
    <script type="application/javascript" src="js/jquery1.7.2-min.js" ></script>
    <script type="application/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>

    <script type="application/javascript" src="js/FeedEk.js"></script>

    <link href="theme/custom.css" rel="stylesheet" type="text/css" />
    <script type="application/javascript" src='js/main.js'></script>
    <script type="application/javascript">
        $(document).ready(function() {
            //latest
            $("#ipaid").FeedEk({
              FeedUrl : 'http://ipaidabribenaija.com/news?format=feed',
              MaxCount : 7,
              ShowDesc : true,
              ShowPubDate:true,
              ShowFullContent:true
            });});
    </script>
</head>

<body>
    <div data-role="page" id="home">
        <div data-role="header" data-position="fixed" data-theme="a">
            <h2>Recent News</h2>
            <a href="#about" data-icon="info" data-theme="a" data-iconpos="notext" class="ui-btn-right" data-rel="dialog">About</a>
        </div><!-- /header -->
        <div class="imghome">
            <img src="images/news.png" alt="news" width="300" height="200" />
        </div>
        <nav data-role="navbar">
            <ul>
                <li><a href="#latest" data-theme="a" data-transition="flip" >Local News</a></li></ul>
        </nav>
        <!--<div data-role="content" >
        </div><!-- /content -->
        <div data-role="footer" data-position="fixed" data-theme="a"></div><!-- /footer -->
    </div><!-- /Page home -->

    <div data-role="page" id="latest" data-title="Local News">
        <div data-role="header" data-position="fixed" data-id="ipaid_header" data-theme="a">
            <h2>Local News</h2>
            <a href="#home" data-rel="back" data-icon="back" data-theme="a">Back</a>
        </div><!-- /header -->
        <div data-role="content" >
            <div id="ipaid">
            </div>
        </div><!-- /content -->
        <div data-role="footer" data-position="fixed" data-id="ipaid_footer" data-theme="a">
            <div data-role="navbar" data-theme="a">
                <ul>
                    <li><a href="#home" data-role="button" data-icon="home" data-iconpos="notext">Home</a></li>
                    <li><a href="#politics" data-role="button" data-icon="arrow-r">Politics</a></li>
                    <li><a href="#world" data-role="button" data-icon="arrow-r">Sports</a></li>
                    <li><a href="#business" data-role="button" data-icon="arrow-r">Business</a></li>
                 </ul>
            </div><!-- /Footernavbar --></div><!-- /footer -->
    </div><!-- /Page Latest --></body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:05:14.440

据我了解。您希望在网页的单独页面上显示每个新闻提要，并防止*链接*打开新窗口（离开您的网页）。

您可以执行以下操作，当然它需要一些调整和 CSS 样式，这可以轻松完成。下面的代码防止在新窗口中打开链接， - 使用`preventDefault()`- 它复制提要详细信息（标题、图像、全文..等）并将它们动态附加到新页面。

每个页面都有一个自动生成的 ID，以防您想使用*Swipe 事件*或任何其他方法在它们之间导航。

[工作示例](http://jsfiddle.net/Palestinian/JE2ps/)

**代码：**

```
var pageid = 0;

$('#ipaid').on('click', 'a', function (e) {
 pageid++;
 e.preventDefault();
 var clicked = $(this);
 var root = clicked.closest('li');
 var linkto = clicked.attr('href');
 var title = clicked.text();
 var date = clicked.parent('div').next('div').text();
 var linkdiv = root.find('div.itemTitle');
 var datediv = root.find('div.itemDate');
 var contentdiv = root.find('div.itemContent');
 var image = contentdiv.first('div').find('img').attr('src');
 var article = '';
 contentdiv.find('p').each(function () {
    article += $(this).text();
});

 var newPage = $("<div data-role=page id='page" + pageid + "'><div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' data-rel='back'>Back</a><h1>" + title + "</h1></div><div data-role=content><p>Date:" + date + "</p><img src='" + image + "'></div><div class='article'><p>" + article + "</p></div></div></div");

 newPage.appendTo($.mobile.pageContainer);

 $.mobile.changePage('#page' + pageid);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:24:35.337

我认为你很简单需要[jFeed](http://archive.plugins.jquery.com/project/jFeed)。jFeed 站点的示例代码：

```
jQuery.getFeed(options);

   options:

   * url: the feed URL (required).
   * data: data to be sent to the server. See jQuery.ajax data property.
   * success: a function to be called if the request succeeds.
     The function gets passed one argument: the JFeed object.

   Example:

   jQuery.getFeed({
       url: 'rss.xml',
       success: function(feed) {
           alert(feed.title);
       }
   }); 
```

# c++ - 声明式 alpha 转换器

> ID：15709107
> 
> 赞同：1
> 
> 时间：2013-03-29T18:21:36.960
> 
> 标签：c++, qt, qml

我想写一个`QDeclarativeItem` `FadeEdges`我实例化的`QML`，例如在这个例子中：

```
FadeEdges {
  Text {
    id: sometext
    text: "some text"
  }
} 
```

重绘后`sometext`，我想减少它在边缘绘制的像素的 alpha（从完全不透明到透明）。所以它的渲染边缘会显得褪色。我的问题是，如果有的话，有什么机制可以使子 alpha 值发生这种变化。

我尝试安装事件过滤器和设置`setFiltersChildEvents()`. `PaintEvent`似乎没有发送 s。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:44:57.350

这不是我自己问题的确切答案，但我想它对初学者有用。只有`QGraphicsEffect::draw`成员函数需要被覆盖（`margins_`是`QMargins`成员变量）：

```
void FadeEdgesEffect::draw(QPainter* painter)
{
  QLinearGradient lg;

  lg.setColorAt(qreal(0), QColor(0, 0, 0, 0));
  lg.setColorAt(qreal(1), QColor(0, 0, 0, 255));

  qreal const width(boundingRect().width());
  qreal const height(boundingRect().height());

  QPoint offset;

  QPixmap pixmap(sourcePixmap(Qt::LogicalCoordinates, &offset));

  {
    QPainter p(&pixmap);

    p.setCompositionMode(QPainter::CompositionMode_DestinationIn);

    if (margins_.left())
    {
      lg.setStart(qreal(0), qreal(0));
      lg.setFinalStop(margins_.left(), qreal(0));

      p.fillRect(QRectF(0, 0, margins_.left(), height), lg);
    }
    // else do nothing

    if (margins_.right())
    {
      lg.setStart(qreal(width), qreal(0));
      lg.setFinalStop(width - margins_.right(), qreal(0));

      p.fillRect(QRectF(width - margins_.right(),
        0, margins_.right(), height), lg);
    }
    // else do nothing

    if (margins_.bottom())
    {
      lg.setStart(qreal(0), height);
      lg.setFinalStop(qreal(0), height - margins_.top());

      p.fillRect(QRectF(0, height - margins_.bottom(),
        width, margins_.bottom()), lg);
    }
    // else do nothing

    if (margins_.top())
    {
      lg.setStart(qreal(0), qreal(0));
      lg.setFinalStop(0, margins_.top());

      p.fillRect(QRectF(0, 0, width, margins_.top()), lg);
    }
    // else do nothing
  }

  painter->drawPixmap(offset, pixmap);
} 
```

# hadoop - Hadoop 1.0.4 - 运行 map reduce 作业中的文件权限问题

> ID：15709112
> 
> 赞同：0
> 
> 时间：2013-03-29T18:21:50.523
> 
> 标签：hadoop, mapreduce, cygwin

我是 hadoop 新手，需要在 windows 中设置一个沙箱环​​境来展示给客户。我已经按照下面提到的步骤

1.  在所有机器上安装 cygwin
2.  设置 ssh
3.  安装hadoop 1.0.4
4.  配置hadoop
5.  [为 hadoop-7682 错误应用补丁](https://github.com/congainc/patch-hadoop_7682-1.0.x-win)

经过大量的尝试和尝试，我成功地运行了所有组件（namenode、datanode、tasktracker 和 jobtracker）。但是现在我在运行 map-reduce 作业并在 tmp 目录上获得权限错误时遇到了问题。当我使用以下命令运行[字数统计示例时](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)

```
bin/hadoop jar hadoop*examples*.jar wordcount wcountjob wcountjob/gutenberg-output 
```

> 13/03/28 23:43:29 信息 mapred.JobClient：任务 ID：尝试_201303282342_0001_m_000003_2，状态：失败初始化尝试_201303282342_0001_m_000003_2 时出错：java.io.IOException：无法设置路径的权限：c:\cygwin\ \taskTracker\uswu50754 到 org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:662) 的 org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:689) 的 org.apache.hadoop 的 0700 .fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509) 在 org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344) 在 org.apache.hadoop.mapred.JobLocalizer.createLocalDirs(JobLocalizer.java:144 ) 在 org.apache.hadoop.mapred 的 org.apache.hadoop.mapred.DefaultTaskController.initializeJob(DefaultTaskController.java:182)。TaskTracker$4.run(TaskTracker.java:1228) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation .doAs(UserGroupInformation.java:1121) 在 org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1203) 在 org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1118) 在 org. apache.hadoop.mapred.TaskTracker$5.run(TaskTracker.java:2430) 在 java.lang.Thread.run(Thread.java:662)1121) 在 org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1203) 在 org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1118) 在 org.apache.hadoop.mapred.TaskTracker $5.run(TaskTracker.java:2430) 在 java.lang.Thread.run(Thread.java:662)1121) 在 org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1203) 在 org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1118) 在 org.apache.hadoop.mapred.TaskTracker $5.run(TaskTracker.java:2430) 在 java.lang.Thread.run(Thread.java:662)

我已经尝试手动设置权限，但这也不起作用。我的理解是，这是由于使用了试图重置权限并失败的 java 库。解决tasktracker问题的权限补丁似乎并没有解决这个问题。

1.  **有没有人找到解决方案？**
2.  **有人可以指点我下载似乎不受此问题影响的 Hadoop 0.20.2 的下载位置吗？**

# user-interface - 使用 Netbeans 创建项目

> ID：15709114
> 
> 赞同：0
> 
> 时间：2013-03-29T18:21:55.197
> 
> 标签：user-interface, inheritance, netbeans

我已经使用 JGrasp 大约 3 年了，我用它来创建类、主类、GUI 类，这些类将包含在同一个文件夹中以便编译。

现在我开始使用 NetBeans，而且我对创建项目、创建我将使用的类类型非常陌生。

所以我的问题是.. 如果我要创建一个简单的项目，它涉及 3 个类，Person（超类）、Employee（继承 Person）和 Date 类（与 Employer 类相关联）。

然后，我还在这个类结构之上创建了一个简单的 Gui 界面，以便根据个人详细信息和/或员工详细信息获取详细信息，然后选择在文本区域显示它们。GUI 包含 2 个类（UserDetails（获取详细信息）和 DisplayDetails（显示详细信息）。

所有这些都包含在 1 个项目中吗？普通类是否包含在与 GUI 类不同的包中？

谢谢，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:25:55.843

使用 5 个类，您可以在没有包结构的情况下度过难关。但是您可能会开始考虑对您的程序代码进行更高级别的组织。

将您的数据对象放在一个包中--com.you.program.data

将您的 GUI 至少放在另一个包中——com.you.program.ui

主程序可以在 com.you.program 或 com.you.program.main 中，或者，如果它更简单，如果它主要只是启动 UI，则只需将主程序放在 UI 包中。

请注意，com.you 理论上是您的网站，而“程序”是您正在处理的程序的名称。

*笔记*

关于是否将应用程序的业务逻辑与将其连接到用户的 UI 分开存在一个理论讨论。这样做可以更轻松地将不同的 UI 放在事物的前面，并允许在桌面/笔记本电脑上运行的用户使用 Swing 界面，为在平板电脑和手机上运行浏览器的用户提供 Web 界面。

这不是一个坏主意，隔离它的一种方法是在您的 IDE 中创建两个项目。一个保存 UI 层代码，一个保存业务层代码。这是一个定义明确的模式并且效果很好。

隔离 UI 和业务层的另一种方法是使用包，但 IDE 不会强制执行任何依赖项管理。但在一个小项目上，它确实运作良好。你必须遵守纪律。（永远不要忘记小项目是如何随着时间的推移变成大项目的，而且他们会出人意料地做到这一点。）

如果您使用项目，请确保在业务层项目使用 UI 层时没有依赖关系，而没有实现定义良好的模式，可能是观察者（GOF 模式）。然而，UI 层可以并且将依赖于业务层。您还可以在独立构建过程中使用擅长此功能的工具（如 Maven 或 Gradle）强制执行此操作。

不管你怎么做，你都要思考什么是业务逻辑。如果您将一些 Javascript 代码添加到浏览器或将一些代码添加到 Swing GUI 或电话应用程序以检查电话号码是否是该国家/地区的有效格式，它可能不会咬你。但是，如果您以类似的方式将代码添加到前端，直接调用电话号码数据库以验证前几位数字是否有效，那么您已经越界了。在这些情况下，该逻辑需要在业务部分中，并且 UI 部分需要调用它来检查该电话号码。对于许多边缘情况，这始终是一个难以解决的问题。

# sql - SQL Openquery 动态参数

> ID：15709117
> 
> 赞同：0
> 
> 时间：2013-03-29T18:22:09.760
> 
> 标签：sql, parameters, parameter-passing, openquery

我试图在 T-SQL 的 Openquery 函数中包含一个参数。我过去成功地做到了这一点，但我当前的代码不合作：

```
declare @bom smalldatetime
declare @eff_date smalldatetime
set @eff_date = (select min(postdate) from #temp_all)
set @bom = convert(varchar(25),dateadd(dd,-(day(@eff_date)-1),@eff_date),101)

select *
into #temp
from openquery(db,
'select l.id
   ,l.date
 from table1 l (nolock)
 inner join table2 m (nolock)
on l.id = m.id and l.date between m.start_date and m.end_date
 inner join table3 d (nolock)
on l.param = d.param
 where l.date = ''''' + convert(varchar(10),@bom,101) + '''''
 and m.param1 = ''Y''
 and m.param2 = ''N''
 and param3 is null
 and d.integer < 30
') 
```

问题在于

```
 where l.date = ''''' + convert(varchar(10),@bom,101) + ''''' 
```

线。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:41:06.177

a) 如果您使用格式 120（或 126）转换日期时间，您将获得更好的、国际安全的 ISO 格式 yyyy-mm-dd 永远不会被误解

b) 您已将 @bom 声明为日期时间，但随后为其分配了一个 varchar。如果您改为将其声明为 varchar，则之后可以使用它来构建 SQL。

c）这种东西有效（[http://sqlfiddle.com/#!6/92119/4](http://sqlfiddle.com/#!6/92119/4)）

```
declare @eff_date smalldatetime
set @eff_date = dateadd(dd,-(day(getdate())-1),getdate())
declare @bom varchar(30)
set @bom = convert(varchar(20),@eff_date,120)

DECLARE @sqq NVARCHAR(300)
set @sqq =  'select 1, '''+@bom+''',3'
exec sp_executesql @sqq; 
```

...希望您将其应用于您的`openquery`

# jquery - jQuery dataTable AJAX 人口

> ID：15709118
> 
> 赞同：4
> 
> 时间：2013-03-29T18:22:29.847
> 
> 标签：jquery, datatable

所以表格在页面上

```
 <table width="100%" id="ticketListTable" class="genmed"></table> 
```

然后我使用 AJAX 返回数据

```
 $.ajax({
    type: 'POST',
    url: "ticketAjax.php",
    data: '&m=swapTicketList',
    dataType: "json",
    success: function(resultData) {
        $('#ticketListTable').dataTable({
            "aaData": resultData,
            "aaSorting": [[0, "desc"]],
            "bJQueryUI": true,
            "bScrollInfinite": true,
            "bScrollCollapse": true,
            "bDestroy": true,
            "bDeferRender": true,
            "iDisplayLength": 100,
            "sScrollY": "1000px",
            "sDom": "Rlfrtip",
        });
    }
}); 
```

AJAX 正在工作并返回

```
 [{"ID":["17316","17314","17313","17312","17311","17310","17309","17308","17307".... 
```

但是 aaData 没有使用该 Json 数据填充表。我误解了这是如何工作的吗？我已经阅读了很多论坛和帖子，它们似乎都导致了这种类型的使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:44:44.673

您需要为数据而不是对象提供数组数组。还要定义你的列。子数组将代表单独的行，主数组包含所有行

遵循`JS Array`示例

[http://www.datatables.net/release-datatables/examples/data_sources/js_array.html](http://www.datatables.net/release-datatables/examples/data_sources/js_array.html)

`aaData`注意提供给并遵循该结构的嵌套数组结构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:36:29.430

好的，所以这并不像我想象的那么容易。在 AJAX 中，我必须构建数组，然后在另一个数组中使用 json_encode 返回它。

```
json_encode(array('tickets' => $tickets)) //-- WHERE $tickets = array(array(1, 'Options 1'), array(2, 'Options 2')) 
```

我还必须将列标题作为数组返回

```
json_encode(array('tickets' => $tickets, 'headers' => $headers)) //-- WHERE $headers = array('ID', 'Options', etc..) 
```

$headers 中的元素数量必须与 $tickets 匹配，否则它不会初始化表。

然后标题的JS部分是

```
 aoColumnArray = [];
        $.each(resultData.headers, function(index, value) {
            var aoColumns = new Object;
            aoColumns['sTitle'] = value;
            aoColumns['sClass'] = 'genmed';
            aoColumnArray.push(aoColumns);
        }); 
```

现在构建数据表对象

```
 ticketTable= [];
        ticketTable.aaData = resultData.tickets;
        ticketTable.aaSorting = [[0, "asc"], [1, "desc"], [2, "desc"]];
        ticketTable.aoColumns = aoColumnArray;
        ticketTable.bJQueryUI = true;
        ticketTable.bScrollInfinite = true;
        ticketTable.bScrollCollapse = true;
        ticketTable.bDestroy = true;
        ticketTable.bDeferRender = true;
        ticketTable.iDisplayLength = 50;
        ticketTable.sScrollY = '400px';
        ticketTable.sDom = 'Rlfrtip';
        $('#ticketTable').dataTable(ticketTable); 
```

使用您要使用的选项。重要的部分是正在处理的 resultData。aaData 和 aoColumns 是使用 AJAX 数据的地方。顺便说一下，这一切都是在ajax调用的成功函数中初始化的。

希望它会帮助别人！

# ruby-on-rails - ruby on rails 范围 - ArgumentError：参数数量错误（1 代表 0）

> ID：15709121
> 
> 赞同：0
> 
> 时间：2013-03-29T18:22:37.797
> 
> 标签：ruby-on-rails, scope

调用范围时出现错误的参数错误：

```
Report.start_driver_time(Unit.find(3007),Driver.find(2),3,2013)

  scope :start_driver_time, lambda { |unit, driver, month, year|
    where("unit_id = ? AND
          driver_id = ? AND
          extract(MONTH FROM time) = ? AND
          extract(YEAR FROM time) = ?",
          unit.id, driver.id, month, year)
    .order("time asc")
    .min(:time)
  }
 #select(:time) select([:id, :time])

  scope :next_driver_time, lambda {|unit, time|
    joins(:alerts => {:alert_code => :alert_unit_codes})
    .where("reports.unit_id = ? AND
            reports.time >= ? AND
            alert_unit_codes.name = ?",
            unit.id, time, "Seat Belt OFF")
    .min(:time)        
  }

  scope :reports_within_driving_period, lambda { |start_time, end_time|
    where("unit_id = ? AND
            reports.time >= ? AND
            reports.time <= ?",
            start_time, end_time)
  } 
```

堆栈跟踪：

```
ArgumentError: wrong number of arguments(1 for 0)
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/relation/delegation.rb:37:in `min'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/relation/delegation.rb:37:in `method_missing'
    from /Users/johnmerlino/Documents/github/XKTrackingSystem/app/models/report.rb:40:in `block in <class:Report>'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/scoping/named.rb:180:in `call'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/scoping/named.rb:180:in `block (2 levels) in scope'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/scoping/default.rb:41:in `block in unscoped'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/relation.rb:241:in `block in scoping'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/scoping.rb:98:in `with_scope'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/relation.rb:241:in `scoping'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/scoping/default.rb:41:in `unscoped'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.5/lib/active_record/scoping/named.rb:180:in `block in scope'
    from (irb):1
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.5/lib/rails/commands/console.rb:47:in `start'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.5/lib/rails/commands/console.rb:8:in `start'
    from /Users/johnmerlino/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.5/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'1.9.3p0 :002 > exit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:24:40.383

我认为您打算使用[minimum](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-minimum)而不是`min`? 我还没有找到对 的引用`min`，因此它可能使用了不使用参数的不同方法。

# macos - 在 Mac 上安装 Haskell 包

> ID：15709129
> 
> 赞同：29
> 
> 时间：2013-03-29T18:23:09.827
> 
> 标签：macos, haskell, ghci, haskell-snap-framework, happstack

我似乎无法在我的 Mac (10.6.8) 上安装一些 Haskell 包。我首先尝试了 Happstack，但失败了，然后我尝试了 Snap。

有时当我运行 ghci 时会出现分段错误。

其他时候它可以工作并且是这样的：

```
GHCi, version 7.4.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> 
```

尝试获取 Snap 时：

```
....
....
....
Loading package vector-0.10.0.1 ... linking ... done.
Loading package zlib-0.5.4.0 ... linking ... done.
Loading package zlib-bindings-0.1.1.3 ... linking ... done.
Loading package zlib-enum-0.2.3 ... linking ... done.
Loading package snap-core-0.9.3.1 ... linking ... done.
Loading package snap-server-0.9.3.3 ... linking ... done.
Loading package directory-tree-0.11.0 ... linking ... done.
cabal: Error: some packages failed to install:
snap-0.11.2 failed during the building phase. The exception was:
ExitFailure 11 
```

我已经多次看到这个问题，但没有什么能真正为我解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-29T18:49:03.207

**2021 年 5 月 22 日更新**

您是否尝试过使用[自制软件](http://mxcl.github.com/homebrew/)？它为您处理依赖项。

使用 homebrew，您可以使用`brew`命令安装`ghc`和`cabal-install`.

```
$ brew install ghc cabal-install
==> Downloading https://ghcr.io/v2/homebrew/core/ghc/manifests/8.10.4
######################################################################## 100.0%
==> Downloading https://ghcr.io/v2/homebrew/core/ghc/blobs/sha256:965f94c14b56e3db7b239860e0a1d577be0b27caf8adb6212710a7430ce723d3
==> Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sha256:965f94c14b56e3db7b239860e0a1d577be0b27caf8adb6212710a7430ce723d3?se=2021-05-23T05%3A15%3A00Z&sig=fkH7sUY44VCLV8hI%2BtZT%2B
######################################################################## 100.0%
==> Pouring ghc--8.10.4.big_sur.bottle.tar.gz
==> /usr/local/Cellar/ghc/8.10.4/bin/ghc-pkg recache
  /usr/local/Cellar/ghc/8.10.4: 6,907 files, 1.5GB
==> Downloading https://ghcr.io/v2/homebrew/core/cabal-install/manifests/3.4.0.0
######################################################################## 100.0%
==> Downloading https://ghcr.io/v2/homebrew/core/cabal-install/blobs/sha256:2c0c5cc90d4739515721557f8e9c02783b3b5f106033c5c09241657b4418b21f
==> Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sha256:2c0c5cc90d4739515721557f8e9c02783b3b5f106033c5c09241657b4418b21f?se=2021-05-23T05%3A15%3A00Z&sig=O7ylxHgq42YVADlzTacdRfY7W
######################################################################## 100.0%
==> Pouring cabal-install--3.4.0.0.big_sur.bottle.tar.gz
  /usr/local/Cellar/cabal-install/3.4.0.0: 7 files, 39.6MB 
```

安装后，您应该能够运行：

```
$ ghc
ghc: no input files
Usage: For basic information, try the `--help' option. 
```

除了 Haskell 解释器，ghci：

```
$ ghci
GHCi, version 8.10.4: https://www.haskell.org/ghc/  :? for help
Prelude> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-09-11T17:22:49.183

`brew install haskell-platform`不再支持。你可能想要

> 错误：没有适用于 haskell-platform 的公式
> 我们不再打包 haskell-platform。考虑安装 ghc 和 cabal-install：
> brew install ghc cabal-install

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-06-19T09:17:47.713

由于`haskell-platform`Mac 的 homebrew 已弃用，您可以`brew install ghc cabal-install`改用。我在 Yosemite 上做了，大约花了一分钟……</p>

```
> $ brew install ghc cabal-install                                             
==> Downloading https://homebrew.bintray.com/bottles/ghc-7.10.1_1.yosemite.bottl
######################################################################## 100.0%
==> Pouring ghc-7.10.1_1.yosemite.bottle.tar.gz
  /usr/local/Cellar/ghc/7.10.1_1: 5423 files, 821M
==> Downloading https://homebrew.bintray.com/bottles/cabal-install-1.22.2.0.yose
######################################################################## 100.0%
==> Pouring cabal-install-1.22.2.0.yosemite.bottle.1.tar.gz
==> Caveats
Bash completion has been installed to:
  /usr/local/etc/bash_completion.d
==> Summary
  /usr/local/Cellar/cabal-install/1.22.2.0: 6 files, 19M 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-02-06T01:00:53.513

这是一个老问题，但考虑到它在 Google 搜索中的排名很高。我就是这样来到这里的。

```
$ brew update
$ brew install haskell-stack
$ stack --version
$ stack --help # "man stack" gives something completely different
$ stack setup # Install GHC
$ stack ghci 
```

来源：[http ://seanhess.github.io/2015/08/04/practical-haskell-getting-started.html](http://seanhess.github.io/2015/08/04/practical-haskell-getting-started.html)

[为什么要堆叠而不是阴谋集团？](https://www.fpcomplete.com/blog/2015/06/why-is-stack-not-cabal)

编辑：

我发现每次我想使用“ghci”时都必须写“stack ghci”很烦人。一个解决方案是简单地将这些行添加到 ~/.bash_aliases 文件中：

```
alias sghc='stack ghc'
alias sghci='stack ghci'
alias srunhaskell='stack runhaskell' 
```

然后获取要应用的文件：

```
$ source ~/.bash_aliases 
```

然后我可以运行 ghci 和/或 haskell 运行这些命令，它将使用堆栈版本：

```
$ sghc [filename]
$ sghci
$ srunhaskell 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-02-10T23:53:30.127

**更新：2016 年 2 月**：*虽然其他答案很有帮助，但我没有找到完整的最新答案。*

安装很简单：

```
$ brew install ghc cabal-install 
```

我需要执行安装后的一个额外步骤是：

```
$ cabal update 
```

其次是：

```
$ cabal install ghc-mod 
```

有关详细信息，请参见[此处](http://www.mew.org/~kazu/proj/ghc-mod/en/install.html)。

[![哈斯克尔安装](../Images/25bfac716c4bf6b1965633ea5a0386f8.png)](https://i.stack.imgur.com/0Ha5Q.gif)

或者，不要使用自制软件进行安装，而是访问[Haskell 平台](https://www.haskell.org/platform/)以获取安装程序磁盘映像 - 请注意，Haskell 平台仅与 OS X 10.6 及更高版本兼容。

虽然，作为一般规则，我总是使用自制软件来管理我的依赖项，但对于 Haskell，我的建议（除非你真的知道自己在做什么）只是安装这个二进制文件。这避免了进一步的任何意外。在本地安装后有优秀的文档：**file:///Library/Haskell/doc/start.html**

不再支持这个问题的流行答案（使用 brew 安装 haskell-platform）。

[![不支持](../Images/6143f8002120599ea159640575447e2b.png)](https://i.stack.imgur.com/gYEXj.gif)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-01T03:39:42.183

不幸的是，OS X 10.6 不支持 GHC 7.4。[下载页面](http://www.haskell.org/ghc/download_ghc_7_4_2#macosx_x86_64)只有 10.7 的安装程序，如您所见，他们是认真的。我从痛苦的经历中知道你的问题——我在你的船上呆了很长时间，除了升级 Mac OS X（或者，大概，降级 GHC，但我真的不想这样做）。我的一位同事确实设法让 7.4.1 在 OS X 10\. *5*上运行，但她付出了不小的努力（她不得不使用不同版本的 GMP，即 5.0.5，并编辑 GHC 的配置脚本），我从来没有尝试过自己复制它。

最后，您有四个选项，按照简单性大致降序排列：

1.  使用[较旧的 Haskell 平台](http://www.haskell.org/platform/prior.html)。这意味着降级到 GHC 7.0.x（不是 GHC 7.2.x——平台中从未有过）；但是，对于哪些 GHC 版本在哪些包版本中并没有很好的记录。 [维基百科暗示](http://en.wikipedia.org/wiki/Haskell_Platform#Versions)2011.2 是 GHC 7.0.x 的第一个版本，而 2012.2 是 GHC 7.4.x 的第一个版本，所以我会先尝试 2011.4.0.0。
2.  自行安装 GHC 7.2（[在 OS X 上受支持），并放弃 Haskell 平台。](http://www.haskell.org/ghc/download_ghc_7_2_1#macosx_x86_64)这可能会导致头痛，但有可能。不要忘记安装[Cabal](http://www.haskell.org/cabal/download.html)、[cabal-install](http://www.haskell.org/cabal/download.html)以及平台附带的所有软件包等。
3.  升级到 OS X 10.7 或 10.8，如果您想进行更全球化（且价格更高）的更改。
4.  尝试复制我同事的做法。（祝你好运，但这绝对是可能的。）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-22T03:34:40.860

2017 年末的回答。我正在运行 macOS Sierra -- 10.12.6 (16G29)。这在我的 MacBook Air 上的安装时间不到五分钟就成功了：

`brew cask install haskell-platform`

随后`ghc --version`报道：

Glorious Glasgow Haskell 编译系统，版本 8.2.1

# php - 使用 curl 搜索推文 - Twitter API

> ID：15709130
> 
> 赞同：1
> 
> 时间：2013-03-29T18:23:13.473
> 
> 标签：php, curl, oauth, twitter

```
$url = "https://api.twitter.com/1.1/search/tweets.json?q=xyz";

        $oauth_access_token = "xxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        $oauth_access_token_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxx";
        $consumer_key = "xxxxxxxxxxxxxxxxxxxxxxxx";
        $consumer_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";

        $oauth = array('oauth_consumer_key' => $consumer_key,
            'oauth_nonce' => time(),
            'oauth_signature_method' => 'HMAC-SHA1',
            'oauth_token' => $oauth_access_token,
            'oauth_timestamp' => time(),
            'oauth_version' => '1.1');
        $base_info = $this->buildBaseString($url, 'GET', $oauth);
        $composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
        $oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
        $oauth['oauth_signature'] = $oauth_signature;
        $header = array($this->buildAuthorizationHeader($oauth), 'Expect:');
        $options = array(CURLOPT_HTTPHEADER => $header,
            CURLOPT_HEADER => false,
            CURLOPT_URL => $url,
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_SSL_VERIFYPEER => false);

        $feed = curl_init();
        curl_setopt_array($feed, $options);
        echo $json = curl_exec($feed);
        curl_close($feed);

        $twitter_data = json_decode($json); 
```

但它给了我一个错误，说“错误的身份验证数据”

# python - 如何：使用 bbfreeze 保存 exe

> ID：15709131
> 
> 赞同：0
> 
> 时间：2013-03-29T18:23:14.300
> 
> 标签：python, windows, user-interface, exe

到目前为止，我已经上了一门计算机科学课程，现在我正在玩一些我制作的 GUI。

我不想将我的考试 GUI 保存为可以在没有安装 python 的情况下运行的 .exe/应用程序。我已经下载了 bbfreeze，因为它似乎是在 Windows 7 中运行得最好的程序，但我不知道如何做到这一点，谁能给我一个提示或链接到一个操作站点。会很好，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T03:11:26.533

The documentation for bbfreeze is severely lacking. I would recomend using py2exe, cx_freeze, or pyinstaller instead. Off these if you are trying to make a *single* exe, pyinstaller is the easiest to use. cx_freeze and py2exe are very good, but they produce a series of files (dlls mostly) that the exe depends on.

To install Pyinstaller, follow the [manual](http://pythonhosted.org/PyInstaller/#installing-in-windows). It boils down to this: install [PyWin32](http://sourceforge.net/projects/pywin32/files/), then [Pip win](https://sites.google.com/site/pydatalog/python/pip-for-windows). In the pip win prompt, type in `venv -c -i pyi-env-name`, and then `pip install PyInstaller`.

# java - 在java中使用Paint()的Graphic g

> ID：15709134
> 
> 赞同：0
> 
> 时间：2013-03-29T18:23:26.097
> 
> 标签：java, swing, applet, japplet

嘿，我想创建一个小程序“白板”，以便在浏览时进行粗略的工作。它包括绘画，粗略，写作等功能。当用户单击并拖动鼠标时，使用 drawLine 命令绘制路径。我创建了一个 ObjectDrawer 类，它监听 MouseDrag 事件，然后使用 Graphics g 绘制对象。我使用这个命令来获取图形 g，我知道它不正确，但我找不到解决方案 Graphic g=obj.getGraphics();

此外，在创建 Applet 时，我们不会创建任何初始化进程的对象。它会自动调用 init()。那么如何使用 applet 类的变量。我的意思是，如果我为 WhiteBoard 类创建一个对象，那么变量将具有相同的始终保持价值观？无论我创建了多少对象？例如，假设 Applet 正在使用 drawstatus 变量作为圆。现在我创建一个对象 obj。obj.drawStatus 是直线还是圆？

```
public class WhiteBoard extends Applet {
    public static int lastx=0;public static int lasty=0;public static String drawStatus="line";

    public void init(){
        setLayout(new BorderLayout());
        MainPanel p=new MainPanel();
        add(p,BorderLayout.SOUTH);
        setBackground(Color.WHITE);
        setForeground(Color.BLUE);
        addMouseListener(new PositionRecorder());
        addMouseMotionListener(new ObjectDrawer());
    }

    public void record(int x,int y){
        lastx=x;
        lasty=y;
    }

}

public class ObjectDrawer extends MouseAdapter {
    WhiteBoard obj=new WhiteBoard();
    int lastx=WhiteBoard.lastx;
    int lasty=WhiteBoard.lasty;int x,y;
    String status=WhiteBoard.drawStatus;
    public void MouseDragged(MouseEvent event){
        x=event.getX();
        y=event.getY();
        Graphics g=obj.getGraphics();
        g.setColor(Color.cyan);

        if(status.equals("line")){
            g.drawLine(lastx,lasty,x,y);
        }
        if(status.equals("rectangle")){

            g.drawRect(lastx,lasty,x-lastx,y-lasty);
        }
        if(status.equals("circle")){
            int r=(int)Math.sqrt(Math.pow(x-lastx,2)+Math.pow(y-lasty, 2));
            g.drawOval(lastx,lasty,2*r,2*r);
        }

    }
} 
```

这里g（Graphics）会在applet或其他地方绘制吗？创建一个对象并使用getGraphics是否正确？因为初始化applet的对象和这个obj不一样。我的意思是只有初始化applet的obj可以换显卡？？

```
public class PositionRecorder extends MouseAdapter {
    WhiteBoard obj=new WhiteBoard();
    public void mouseEntered(MouseEvent event) {
        //requestFocus(); // Plan ahead for typing
        obj.record(event.getX(), event.getY());
    }

    public void mousePressed(MouseEvent event) {
        obj.record(event.getX(), event.getY());
    }
} 
```

抱歉，这个问题变得有点冗长和令人困惑，因为我无法理解真正的问题是什么。感谢阅读编辑：我的新代码有效。请解释为什么它现在有效？只有当我在南部区域移动鼠标时，我的小程序中的面板（按钮）才可见，否则它根本不可见？我必须设置可见（ true) 在面板的小程序中？

```
 import javax.swing.*;
    import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Font;
    import java.awt.Graphics;
    import java.awt.event.*;
    import java.awt.event.MouseEvent;

    public class WhiteBoard extends JApplet implements           MouseListener,MouseMotionListener,KeyListener{
public  int lastx=0;public  int lasty=0; 
Graphics g;Font f;
public void init(){

    MainPanel p=new MainPanel();
    getContentPane().add(BorderLayout.SOUTH,p);
    setBackground(Color.WHITE);

    addMouseListener(this);
    addMouseMotionListener(this);
    addKeyListener(this);

    g=getGraphics();g.setColor(Color.BLUE);
    f=new Font("SERIF",Font.BOLD,16);
    g.setFont(f);
    }

public void record(int x,int y){
    lastx=x;
    lasty=y;
}

public void paint(Graphics g){

}
public void mouseMoved(MouseEvent event){
    record(event.getX(),event.getY());
}
 public void mouseEntered(MouseEvent event) {
      requestFocus(); // Plan ahead for typing
      record(event.getX(), event.getY());

    }

    public void mousePressed(MouseEvent event) {
      record(event.getX(), event.getY());

    }

    public void mouseDragged(MouseEvent event){
        int x,y;
         x=event.getX();
         y=event.getY();

            g.drawLine(lastx,lasty,x,y);
            record(x,y);
        }

    public void keyTyped(KeyEvent ke){

        String msg=String.valueOf(ke.getKeyChar());
        g.drawString(msg,lastx,lasty);
        record(lastx+9,lasty);
    }

    public void keyReleased(KeyEvent ke){}
    public void keyPressed(KeyEvent ke){}
    public void mouseClicked(MouseEvent event){}
    public void mouseExited(MouseEvent event){}
    public void mouseReleased(MouseEvent event){}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:35:34.640

您需要覆盖小程序的paint() 方法。

```
@override
public void paint(Graphics g)
{
    super.paint(g);
    g.setColor(Color.cyan);

    if(status.equals("line")){
            g.drawLine(lastx,lasty,x,y);
    }
    if(status.equals("rectangle")){
            g.drawRect(lastx,lasty,x-lastx,y-lasty);
    }
    if(status.equals("circle")){
            int r=(int)Math.sqrt(Math.pow(x-lastx,2)+Math.pow(y-lasty, 2));
            g.drawOval(lastx,lasty,2*r,2*r);
    }

} 
```

在 mouseDragged() 中，您需要将 x 和 y 保存为实例变量

之后在 mouseDragged() 中调用 repaint()

# c# - 从反序列化的 Javascript 重命名属性

> ID：15709135
> 
> 赞同：0
> 
> 时间：2013-03-29T18:23:29.530
> 
> 标签：c#, javascript, .net, deserialization, custom-attributes

如何反序列化 JavaScript 并更改正在处理的属性的名称？

例如：

```
class MyClass
{
public string CreateDate {get;set;}
}

public class DeserializeMyClass
{
//How do I take "create_date" and convert it to CreateDate? Is there an attribute I
//can use?
var json = @"{""create_date"":""04/12/2013""}";
var ds = new JavaScriptSerializer();

ds.Deserialize<MyClass>(json);

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:24:49.740

看起来你不能轻易地为 JavaScriptSerializer 做到这一点，但你可以在 Json.Net 或使用 DataContractSerializer（.Net 框架的一部分）中做到这一点。

对于 Json.Net，您可以放置​​指定名称的 JsonProperty 属性。

```
class MyClass
{
  [JsonProperty(Name="create_date")]
  public string CreateDate {get;set;}
} 
```

对于 DataContractSerializer 使用`DataMember`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T14:16:23.293

没有对重命名属性的标准支持，`JavaScriptSerializer`但是您可以很容易地添加自己的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.Script.Serialization;
using System.Reflection;

public class JsonConverter : JavaScriptConverter
{
    public override object Deserialize(IDictionary<string, object> dictionary, Type type, JavaScriptSerializer serializer)
    {
        List<MemberInfo> members = new List<MemberInfo>();
        members.AddRange(type.GetFields());
        members.AddRange(type.GetProperties().Where(p => p.CanRead && p.CanWrite && p.GetIndexParameters().Length == 0));

        object obj = Activator.CreateInstance(type);

        foreach (MemberInfo member in members)
        {
            JsonPropertyAttribute jsonProperty = (JsonPropertyAttribute)Attribute.GetCustomAttribute(member, typeof(JsonPropertyAttribute));

            if (jsonProperty != null && dictionary.ContainsKey(jsonProperty.Name))
            {
                SetMemberValue(serializer, member, obj, dictionary[jsonProperty.Name]);
            }
            else if (dictionary.ContainsKey(member.Name))
            {
                SetMemberValue(serializer, member, obj, dictionary[member.Name]);
            }
            else
            {
                KeyValuePair<string, object> kvp = dictionary.FirstOrDefault(x => string.Equals(x.Key, member.Name, StringComparison.InvariantCultureIgnoreCase));

                if (!kvp.Equals(default(KeyValuePair<string, object>)))
                {
                    SetMemberValue(serializer, member, obj, kvp.Value);
                }
            }
        }

        return obj;
    }

    private void SetMemberValue(JavaScriptSerializer serializer, MemberInfo member, object obj, object value)
    {
        if (member is PropertyInfo)
        {
            PropertyInfo property = (PropertyInfo)member;                
            property.SetValue(obj, serializer.ConvertToType(value, property.PropertyType), null);
        }
        else if (member is FieldInfo)
        {
            FieldInfo field = (FieldInfo)member;
            field.SetValue(obj, serializer.ConvertToType(value, field.FieldType));
        }
    }

    public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
    {
        Type type = obj.GetType();
        List<MemberInfo> members = new List<MemberInfo>();
        members.AddRange(type.GetFields());
        members.AddRange(type.GetProperties().Where(p => p.CanRead && p.CanWrite && p.GetIndexParameters().Length == 0));

        Dictionary<string, object> values = new Dictionary<string, object>();

        foreach (MemberInfo member in members)
        {
            JsonPropertyAttribute jsonProperty = (JsonPropertyAttribute)Attribute.GetCustomAttribute(member, typeof(JsonPropertyAttribute));

            if (jsonProperty != null)
            {
                values[jsonProperty.Name] = GetMemberValue(member, obj);
            }
            else
            {
                values[member.Name] = GetMemberValue(member, obj);
            }
        }

        return values;
    }

    private object GetMemberValue(MemberInfo member, object obj)
    {
        if (member is PropertyInfo)
        {
            PropertyInfo property = (PropertyInfo)member;
            return property.GetValue(obj, null);
        }
        else if (member is FieldInfo)
        {
            FieldInfo field = (FieldInfo)member;
            return field.GetValue(obj);
        }

        return null;
    }

    public override IEnumerable<Type> SupportedTypes
    {
        get 
        {
            return new[] { typeof(MyClass) };
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

[AttributeUsage(AttributeTargets.Field | AttributeTargets.Property)]
public class JsonPropertyAttribute : Attribute
{
    public JsonPropertyAttribute(string name)
    {
        Name = name;
    }

    public string Name
    {
        get;
        set;
    }
} 
```

然后`MyClass`类变成：

```
class MyClass
{
     [JsonProperty("create_date")]
     public string CreateDate {get;set;}
} 
```

我认为这可能有点晚了，但认为其他想要使用`JavaScriptSerializer`而不是`Json.Net`或“DataContractJsonSerializer”的人可能会喜欢它。

# c# - 有没有办法使用 SQL 更改 IBM System i（又名 iSeries / AS400）上的用户密码？

> ID：15709137
> 
> 赞同：7
> 
> 时间：2013-03-29T18:23:34.110
> 
> 标签：c#, sql, passwords, db2, ibm-midrange

我有一个 C#.NET 应用程序，它必须能够更改 IBM System i (iSeries / AS400) 机器上的用户密码。我目前正在使用以下代码使用 IBM 专有的**cwbx.dll**执行此操作。

```
using cwbx;

public void ChangePassword(string system, string user, string currentPassword, string newPassword)
{
    AS400System as400 = new AS400System();
    as400.Define(system);
    try
    {
        as400.ChangePassword(user, currentPassword, newPassword);
    }
    finally
    {
        as400.Disconnect(cwbcoServiceEnum.cwbcoServiceAll);
    }
} 
```

这工作得很好，但迫使我（和应用程序的所有用户）对**cwbx.dll**采取专有依赖。我想消除这种依赖。

有没有办法使用类似于 MS SQL Server[`alter login`](http://msdn.microsoft.com/en-us/library/ms189828.aspx)机制的 SQL 更改密码？

我知道我可以使用**IBM.Data.DB2.iSeries .NET 数据提供程序来完成此操作，方法是使用**[Integrating DB2 Universal Universal Database for iSeries with for iSeries with Microsoft ADO .NET](http://www.redbooks.ibm.com/redbooks/pdfs/sg246440.pdf)中的以下代码从 SQL 调用程序。

```
/// <summary>
/// Call a program directly on the iSeries with parameters
/// </summary>
public string CallPgm(string cmdtext)
{
    string rc = " ";

    // Construct a string which contains the call to QCMDEXC.
    // Because QCMDEXC uses single quote characters, we must
    // delimit single quote characters in the command text
    // with an extra single quote.
    string pgmParm = "CALL QSYS/QCMDEXC('"
    + cmdtext.Replace("'", "''")
    + "', "
    + cmdtext.Length.ToString("0000000000.00000")
    + ")";

    // Create a command to execute the program or command.
    iDB2Command cmd = new iDB2Command(pgmParm, _connection);
    try
    {
        cmd.ExecuteNonQuery();
    }
    catch (iDB2Exception ex)
    {
        rc = ex.Message;
    }

    // Dispose the command since we're done with it.
    cmd.Dispose();

    // Return the success or failure of the call.
    return rc;
} 
```

这种技术的问题是我必须有一个现有的连接才能尝试更改密码。不幸的是，如果用户的密码已过期，他们将无法连接到数据库 ( `iDB2CommErrorException`)，因此无法更改他们的密码。

没有 cwbx.dll 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:42:12.827

要以编程方式从 .NET 应用程序更改 IBM i（又名 System i / iSeries / AS400）上的过期密码，而不依赖于*IBM i Access for Windows*（用于 cwbx.dll）的本地安装，请考虑以下选项之一.

*   以编程方式建立到 IBM i 的 Telnet 连接并传输一系列字符，这些字符模仿执行更改密码操作所需的用户输入。***请注意，如果没有进一步配置，这是不安全的。**

*   IBM Toolbox for Java 包括一个 OS/400 或 i5/OS Java 类，可在 Java 程序中用于更改密码。该类的 Java 帮助可在以下 Web 站点的 iSeries 信息中心获得：http: [//publib.boulder.ibm.com/pubs/html/as400/v5r1/ic2924/index.htm](http://publib.boulder.ibm.com/pubs/html/as400/v5r1/ic2924/index.htm)

    *以下示例演示如何使用**IBM Toolbox for Java**对过期密码执行更改密码操作。这可以使用`System.Diagnostics.Process.Start("java ChangeIBMiPassword hostname username oldpw newpw");`（假设有适当的类路径）从 C# 程序中调用。[另请注意，可以通过IKVM.NET 库](http://www.ikvm.net/devguide/net2java.html)直接从 .NET 使用 Java API 。*

```
import com.ibm.as400.access.AS400;

public class ChangeIBMiPassword {
    public static void main(String[] args) {
        if (args.length < 4)
            System.exit(-1);

        String host = args[0];
        String user = args[1];
        String oldpw = args[2];
        String newpw = args[3];

        AS400 sys = new AS400(host, user);  
        try {
            sys.changePassword(oldpw, newpw);
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(-1);
        }
    }
} 
```

*   编写在 IBM i 上运行的安全 Web 服务。此 Web 服务将接受用户名、当前密码和新密码的参数。当用户调用此 Web 服务时，它将代表调用程序执行更改密码操作。

*   Write a secure web service that does not run on the IBM i. This web service will accept parameters for username, current password and new password. When a user calls this web service, it will use the cwbx library to perform the change password operation on behalf of the calling program. This does not totally eliminate the dependency on cwbx.dll, but it lowers it to a single system.

[http://www-01.ibm.com/support/docview.wss?uid=nas10043a8b0e0544f1386256ba100659bcd](http://www-01.ibm.com/support/docview.wss?uid=nas10043a8b0e0544f1386256ba100659bcd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T14:47:06.333

Write a stored procedure or function that invokes CHGUSRPRF. It would need to run under high enough authority (and thereby expose the system to additional risk), but it'd then be easy to interact with SQL. Seems like a very questionable idea.

# javascript - 无法将焦点更改为 jquery 中的滑块

> ID：15709141
> 
> 赞同：0
> 
> 时间：2013-03-29T18:23:48.453
> 
> 标签：javascript, jquery, jquery-ui, slider, focus

我有一个功能可以在用户按下回车键时改变焦点。此功能在大多数页面上都很好用，但现在我有一个带有 1 个选择和 2 个滑块 (jqueryui) 的页面。当我按下回车键时，焦点不会变为滑块。console.log 语句显示我的选择正在返回正确的元素数组：

```
0: select#field_odometerunitsselect
1: div#field_fuelquantityrangeslider.ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all
2: div#field_fueldistancerangeslider.ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all 
```

并且我的 javascript 正确更改为数组中的下一个元素（在本例中为 1）：

```
$('#'+inputs.eq(nextinput).id).focus().select(); 
```

有人可以告诉我为什么上面的行不会将焦点更改为滑块吗？

为了进一步分析，我尝试用这条线手动设置焦点

```
$('#field_fuelquantityrangeslider').focus(); 
```

它也失败了。所以这不是代码问题，而是滑块问题。如何将焦点设置到滑块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-19T02:45:27.677

您需要定位滑块句柄（请参阅[https://stackoverflow.com/a/13692745/786999](https://stackoverflow.com/a/13692745/786999)）：

```
$('#field_fuelquantityrangeslider .ui-slider-handle').focus(); 
```

# jquery - Ajax 成功消息返回我主页的 HTML

> ID：15709146
> 
> 赞同：5
> 
> 时间：2013-03-29T18:23:55.647
> 
> 标签：jquery, ajax, json, wordpress

使用 ajax 和 wordpress（尝试正确执行）。这对我来说相当新，但我以前有过这种工作，而且更有天赋。似乎是随机开始出现问题，所以我将代码分解到最基本的级别，我什至无法让它工作！！！我觉得我只是感到沮丧，这迫使我错过一个简单的错误。这有什么问题吗？

我的 jQuery：

```
$.post(
    ajaxurl, // http://localhost/mysite/wp-admin/admin-ajax.php
    {action: "post-save"},
    function(response){
      alert(response);
    }
); 
```

我的PHP：

```
function update_post(){
    echo json_encode(array("success" => "all systems go"), JSON_FORCE_OBJECT ); 
    exit;
}
add_action( 'wp_ajax_post-save', 'update_post' ); 
```

最终结果是警报有效，这意味着 $.post 成功（对吗？），但返回的变量`response`是我主页的 html 源...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:02:53.383

我想到了...

这可能会帮助像我这样犯同样错误的新手，所以我会回答我自己的问题:)

原来我没有登录，去看看。虽然反应很奇怪，但让我失望了，返回了整个主页。这样做的原因是我阻止了我的函数文件，其中包括 Ajax 响应程序，如下所示：

```
function block_users()
{
    if( !current_user_can( 'delete_pages' ) ) {  
        wp_redirect( get_home_url(), 301 );
        exit;
    }
}
add_action('admin_init','block_users'); 
```

我应该知道登录（以为我是）但是，如此意想不到的结果，那是星期五:)

还要注意任何偶然发现这一点的人：如果您确实希望某人在没有登录的情况下执行 ajax，请使用 wp_ajax 的无权限版本 wp_ajax_nopriv。

```
add_action( 'wp_ajax_nopriv_action', 'function' ); 
```

替代

```
add_action( 'wp_ajax_action', 'function' ); 
```

前者不需要权限，即登录，来做ajax请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-11T09:15:19.757

我遇到了同样的问题，解决方法是将 DOING_AJAX 添加到函数中

```
function block_users()
{
    if( !current_user_can( 'delete_pages' ) && ( ! defined( 'DOING_AJAX' ) || ! DOING_AJAX ) ) {
        wp_redirect( get_home_url(), 301 );
        exit;
    }
}
add_action('admin_init','block_users'); 
```

# phpmailer - PHP 邮件发送问题

> ID：15709149
> 
> 赞同：0
> 
> 时间：2013-03-29T18:24:29.337
> 
> 标签：phpmailer, php

我很难让以下代码运行：

```
$name = 'Kevin';
$company = 'nonw';
$website = 'none';
$email = 'my@email.com';
$phone = 'none';
$message = 'Just a test message.';

$message = "<ul>
            <li><strong>From:</strong> $name</li>
            <li><strong>Company:</strong> $company</li>
            <li><strong>Website:</strong> $website</li>
            <li><strong>Email:</strong> $email</li>
            <li><strong>Phone:</strong> $phone</li>
        </ul>
        <p>$message</p>";

$subject = '[' . $sitename . '] New contact message from ' . $name . ' ( ' . $email . ' )';

$headers = 'From: ' . $sitename . ' <' . $to . '>\r\nReply-To: ' . $email . '\r\n';

$s = mail($subject, $message, $email, $to);
if($s){
echo '<div class="msg">Your message has been sent.  Thank you for contacting us, someone will be in touch soon.</div>';
}else{
echo '<div class="err">There was an error sending your message.  Please try again later.</div>';
print_r(error_get_last());
} 
```

我的 php.ini 中有这个：

```
; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
sendmail_path = "/usr/sbin/sendmail -t -i -f my@email.com" 
```

还尝试过：

```
sendmail_path = "/usr/sbin/sendmail -t -i" 
```

我已经通过直接在服务器上运行它来验证服务器设置正确以发送电子邮件`echo "test" | mail -s "test mail" my@email.com`并且我收到了电子邮件。

会发生什么，或者更重要的是......我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:38:00.130

对不起大家。我在 mailconfig.ini 中拼写错误

改变`"/urs/sbin/sendmail -t -i -f my@email.com"`做`"/usr/sbin/sendmail -t -i -f my@email.com"`的伎俩

# java - 如何从播放框架中的配置文件中读取对象列表

> ID：15709155
> 
> 赞同：7
> 
> 时间：2013-03-29T18:24:40.677
> 
> 标签：java, playframework-2.0, playframework-2.1

如何从 play 框架中的配置文件中读取用户列表？我试过做这样的事情：

```
users=[{uid:123,pwd:xyz},{uid:321,pwd:abc}] 
```

从播放应用程序

```
 List<Object> uids = Play.application().configuration().getList("users"); 
```

会给我一个对象列表，如果我遍历列表，我会得到每个对象

```
{uid=123,pwd=xyz} and {uid=321,pwd=abc} 
```

在这一点上，我不知道如何优雅地获得 uid 的值，我可以做一些 hacky 工作，省略第一个和最后一个括号并解析等号的前后，但这太难看了！任何的想法？（应用程序是用java编写的）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-06-15T15:05:27.890

A Scala implementation that avoids the deprecated `getConfigList` method would rely on retrieving a `Seq[Configuration]` as follows:

```
 case class UserConfig(uid: Int, pwd: String)
  val userConfigs: Seq[UserConfig] = configuration.get[Seq[Configuration]]("users").map { userConfig =>
    UserConfig(userConfig.get[Int]("uid"), userConfig.get[String]("pwd"))
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:14:10.093

*对我来说，uid 的声音列表如下：*

```
# List of UID's
users=[123,456,789] // every number represents a UID 
```

然后你可以得到这个列表：

```
List<Object> uids = Play.application().configuration().getList("users"); 
```

然后用这个做你想做的事：

```
for (Iterator<Object> iterator = uids.iterator(); iterator.hasNext();) {        
    Object object = (Object) iterator.next();
    System.out.println(object);
} 
```

Is this what you are looking for? BTW, you can read more about Play Framework configuration options: [http://www.playframework.com/documentation/2.1.0/Configuration](http://www.playframework.com/documentation/2.1.0/Configuration)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-31T14:59:28.267

Since I had recently the same problem and this is still unanswered, here is my suggestion:

```
List<User> users = getConfig().getConfigList("users").stream().map(
            config -> new User(config.getString("uid"), config.getBoolean("pwd"))
    ).collect(Collectors.toList()); 
```

As far as I know there are no tuples or anything in Java, you need to use either an object or a list with two elements. I decided to go for an object here, you can also return a list.

# excel - 从 Excel 到 Access 更新/创建新记录的 VBA 代码

> ID：15709156
> 
> 赞同：10
> 
> 时间：2013-03-29T18:24:40.770
> 
> 标签：excel, vba, ms-access

我一直在尝试到处寻找答案，但我在 VBA 中的低水平技能并没有帮助我弄清楚我想要编码的内容。

到目前为止我有这个代码：

```
Sub ADOFromExcelToAccess()
' exports data from the active worksheet to a table in an Access database
' this procedure must be edited before use
Dim cn As ADODB.Connection, rs As ADODB.Recordset, r As Long
' connect to the Access database
Set cn = New ADODB.Connection
cn.Open "Provider=Microsoft.ACE.OLEDB.12.0; " & _
    "Data Source=\\GSS_Model_2.4.accdb;"
' open a recordset
Set rs = New ADODB.Recordset
rs.Open "Forecast_T", cn, adOpenKeyset, adLockOptimistic, adCmdTable
' all records in a table
For i = 4 To 16
    x = 0
    Do While Len(Range("E" & i).Offset(0, x).Formula) > 0
' repeat until first empty cell in column A
        With rs
            .AddNew ' create a new record
            .Fields("Products") = Range("C" & i).Value
            .Fields("Mapping") = Range("A1").Value
            .Fields("Region") = Range("B2").Value
            .Fields("ARPU") = Range("D" & i).Value
            .Fields("Quarter_F") = Range("E3").Offset(0, x).Value
            .Fields("Year_F") = Range("E2").Offset(0, x).Value
            .Fields("Units_F") = Range("E" & i).Offset(0, x).Value
            .Update
         ' stores the new record
    End With
    x = x + 1
    Loop
Next i
rs.Close
Set rs = Nothing
cn.Close
Set cn = Nothing
End Sub 
```

到目前为止，这段代码正是我想要的。我知道要添加一个将根据 4 个规则检查记录是否存在的部分：产品、区域、季度_F 和年_F 如果匹配这些，它应该更新另一个字段（单位_F，ARPU）。如果没有，它应该正确运行代码并创建新记录。

非常感谢您的帮助，我被困在这里，不知道如何出去。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T21:59:23.090

I have an Excel spreadsheet with the following data starting in cell A1

```
product  variety  price
bacon    regular  3.79
bacon    premium  4.89
bacon    deluxe   5.99 
```

I have a Table named "PriceList" in my Access database which contains the following data

```
product  variety  price
-------  -------  -----
bacon    premium  4.99
bacon    regular  3.99 
```

The following Excel VBA will update the existing Access records with the new prices for "regular" and "premium", and add a new row in the table for "deluxe":

```
Public Sub UpdatePriceList()
Dim cn As ADODB.Connection, rs As ADODB.Recordset
Dim sProduct As String, sVariety As String, cPrice As Variant
' connect to the Access database
Set cn = New ADODB.Connection
cn.Open "Provider=Microsoft.ACE.OLEDB.12.0; " & _
    "Data Source=C:\Users\Gord\Desktop\Database1.accdb;"
' open a recordset
Set rs = New ADODB.Recordset
rs.Open "PriceList", cn, adOpenKeyset, adLockOptimistic, adCmdTable

Range("A2").Activate  ' row 1 contains column headings
Do While Not IsEmpty(ActiveCell)
    sProduct = ActiveCell.Value
    sVariety = ActiveCell.Offset(0, 1).Value
    cPrice = ActiveCell.Offset(0, 2).Value

    rs.Filter = "product='" & sProduct & "' AND variety='" & sVariety & "'"
    If rs.EOF Then
        Debug.Print "No existing record - adding new..."
        rs.Filter = ""
        rs.AddNew
        rs("product").Value = sProduct
        rs("variety").Value = sVariety
    Else
        Debug.Print "Existing record found..."
    End If
    rs("price").Value = cPrice
    rs.Update
    Debug.Print "...record update complete."

    ActiveCell.Offset(1, 0).Activate  ' next cell down
Loop
rs.Close
Set rs = Nothing
cn.Close
Set cn = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:19:00.910

写完之后，我才意识到您正在使用 VBA，所以我的答案不起作用。但是您应该能够了解正在发生的事情。这是这个想法。对于 VBA 集合，请查看以下内容：

[VBA 集合](http://www.wiseowl.co.uk/blog/s239/collections.htm)

```
 // First build your list
    Dim myRecords As New Collection

    For i = 4 To 16
    x = 0
    Do While Len(Range("E" & i).Offset(0, x).Formula) > 0

                var list = from t in myRecords
                           where t.Products == Range("C" & i).Value
                           && t.Region == Range("B2").Value
                           && t.Quarter == Range("E3").Offset(0, x).Value
                           && t.Year == Range("E2").Offset(0, x).Value
                           select t;

                var record = list.FirstOrDefault();

                if (record == null)
                {
                    // a record with your key doesnt exist yet.  this is a new record so add a new one to the list
                    record = new CustomObject();
                    record.Products = Range("C" & i).Value;
                    //  etc.  fill in the rest

                    myRecords.Add(record);
                }
                else
                {
                    // we found this record base on your key, so let's update
                    record.Units += Range("E" & i).Offset(0, x).Value;                
                }

    x = x + 1
    Loop
Next i

                // Now loop through your custom object list and insert into database 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T23:58:16.957

我没有足够的声誉来评论上述答案之一。该解决方案非常好，但是如果您在一行中有大量记录要循环，则将所有内容都包含在一个循环中会更容易。我还将我的数据放在 Excel 表中（但如果您只有一个非动态范围，请将其作为一个范围输入）。

```
Set LO = wb.Worksheets("Sheet").ListObjects("YOUR TABLE NAME")
rg = LO.DataBodyRange
'All of the connection stuff from above that is excellent
For x = LBound(rg) To UBound(rg)

'Note that first I needed to find the row in my table containing the record to update
'And that I also got my user to enter all of the record info from a user form
'This will mostly work for you regardless, just get rid of the L/Ubound and search
'Your range for the row you will be working on

    If rg(x,1) = Me.cmbProject.Value Then
        working_row = x
        Exit For
    End If
Next
For i = 2 To 17 ' This would be specific to however long your table is, or another range
'argument would work just as well, I was a bit lazy here
    col_names(i-1) = LO.HeaderRowRange(i) 'Write the headers from table into an array
    Data(i-1) = Me.Controls("Textbox" & i).Value 'Get the data the user entered
Next i
'Filter the Access table to the row you will be entering the data for. I didn't need
'Error checking because users had to select a value from a combobox
rst.Filter = "[Column Name] ='" & "Value to filter on (for me the combobox val)"
For i = 1 To 16 'Again using a len(Data) would work vs. 16 hard code
    rst(col_names(i)).Value = Data(i)
Next i 
```

就是这样-然后我刚刚关闭了数据库/连接等，并给我的用户一条消息，说数据已被写入。

您真正需要在这里注意的唯一一件事是我的用户表单尚未（*尚未*）合并数据类型检查，但这是我的下一段代码。否则，当您打开它时，您可能会从 Access 或一些看起来很糟糕的数据中获得异常！

# css - 不同浏览器中 div 内的文本未对齐

> ID：15709162
> 
> 赞同：1
> 
> 时间：2013-03-29T18:25:09.480
> 
> 标签：css

由于某种原因，我无法让一行文本的位置在不同的浏览器中保持一致。我正在尝试让评论线和“喜欢”心线正确对齐，就像您在从 Firefox 拍摄的这张图片的右下角看到的那样：

![在此处输入图像描述](../Images/c74fd5f11644f1af08fd24f4906a61a4.png)

但是，在 chrome 或 Safari 中查看同一页面时，它看起来像这样：

![在此处输入图像描述](../Images/5d807f6caa6a47caab1d1f2564de143b.png)

我尝试在 CSS 中弄乱 div 的相对定位，但无法找到解决此问题的方法。任何帮助将非常感激！该网站是 www.misscarispreschool.com 如果您想查看它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:30:16.330

你的`.entry-meta-right`班级至少需要一个宽度`112px`，但你可能想让它更大，这取决于你的目的。

另外，`.like-74 .like, .action_like { margin-top: 2px; }`让它看起来不错:)

# c++ - 在类中包装 Windows 句柄

> ID：15709166
> 
> 赞同：0
> 
> 时间：2013-03-29T18:25:20.990
> 
> 标签：c++, windows

我正在编写一个 C++ 框架，以便我可以重写一些软件以在多个平台上工作。我的问题与一些使用 Windows 句柄的包装类的实现有关。考虑以下代码...

```
class Font
{
public:
  Font(const LOGFONT& lf)
  {
    m_hFont = ::CreateFontIndirect(lf);
  }

  ~Font()
  {
     ::DeleteObject(m_hFont);
  }

private:
  HFONT m_hFont;
} 
```

然后我有一个 Display 类，我可以在其中调用以下内容......

```
LOGFONT lf;
// initialise lf

Display d;
d.SetFont(Font(lf));
d.DrawText(0,0,"Some Text"); 
```

问题当然是 d.SetFont 会导致 m_hFont 被 Font 类析构函数删除。我很欣赏我可以在堆上创建字体并让图形类负责字体的整体“生命周期”。我想这确实是一个设计问题。是不是更好...

1.  为包装 Windows 句柄的类实现引用计数。
2.  在堆上创建包装类。
3.  还有什么方法？

我注意到 MFC 在其包装器中有一个明确的 DeleteObject ，但这当然不会导致自动资源取消分配。

任何帮助/建议表示赞赏。

谢谢

编辑：我认为这更像是一个复制构造函数问题。即我的 Font 类创建了一个 Windows FONT 句柄，但由于我将 Font 对象按值传递给显示而被破坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:03:03.110

你至少有三个选择：

1.  注意“三法则”：如果一个类有一个非平凡的析构函数，那么它可能还应该实现一个复制构造函数和一个复制赋值运算符。在这种情况下，他们应该确保每个副本都有自己的`m_hFont`.

2.  使用引用计数。

3.  更改`Display::SetFont`为接受指向 a`Font`或 const 引用的指针。这样，您仍然可以创建`Font`“在堆栈上”，并且如果您只传递一个指针或对它的引用，则不会制作任何副本。

编辑

1.  `Display::SetFont`如果您直接接受 a ，您可能可以完全避免该问题`LOGFONT`。这样，`Display`类本身将管理字体（例如删除旧字体结构并创建新字体）。如果您打算`Font`仅在上面的上下文中使用对象（带有 a `Display`）并且字体更改很少，则此选项最有效。

2.  使`Font`该类也将其`LOGFONT`作为成员并仅按需生成 HFONT。复制时，`LOGFONT`将被复制并被`HFONT`赋予无效值。如果 new`Font::GetFont`被调用（比如由`Display`），那么`HFONT`将被创建。在 Font 析构函数中，如果`HFONT`不是无效值，则将其删除。`CreateFontIndirect`如果不是所有副本都将用于调用，这将避免一些不必要的调用`GetFont`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:38:21.993

这就是 Windows 的本质。当您以调用 CreateFontIndirect 之类的方式使用资源时，您必须在完成后调用 DeleteObject 或某种方法来释放资源。究竟是什么问题？您的程序没有按预期运行吗？除非 lf 在您使用它之前超出范围，否则应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:53:06.547

根据答案的建议和一些进一步的想法，我采用了以下方法。我认为 Display 类应该管理字体的生命周期。库用户将为显示类提供字体设置。基本代码如下...

```
struct Typeface
{
   bool Bold;
   int Width;
   int Height;    
};

class Font
{
public:
  Font();
  ~Font();  // calls DeleteObject(m_hFont)

  HFONT Handle() const { return m_hFont; }

  // Create will destroy the current font handle and create a new one
  void Create(const Typeface & tc);

private:
  HFONT m_hFont;
};

class Display
{
public:
  // select font modifies the display's current font
  void SelectFont(const Typeface& tf);

  // Draw a string using the display's selected font
  void DrawString(int x, int y, const String& text);

  // Draw a string using the supplied font
  void DrawString(int x, int y, const String& text, const Font& font);

private:
  Font m_hSelectedFont;  // Font handle automatically destroyed
}; 
```

# c# - Microsoft Visual C# 2010 Express intellisense not working

> ID：15709168
> 
> 赞同：-3
> 
> 时间：2013-03-29T18:25:40.080
> 
> 标签：c#, visual-studio-2010

**I tried googling, but I couldn't find a fix.**

Before, when writing: console.writeline();, C# would automatically uppercase it to Console.WriteLine();.
Now, by mistake, I somehow deactivated that function.
If I write console.writeline(), it doesn't turn it into Console.WriteLine();. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:36:37.773

What your looking for is called: *Intellisense*

The sole goal of this feature is to allow coding to be more productive, smarter, and easier.

You can renable *Intellisense* by hitting **CTRL + J**. That will manually reactivate it. Otherwise you'll need to go to:

*   Tools
*   Options
*   Text Editor
*   Auto List Member

But one of those should address your issue. Otherwise I might suggest running a repair on Visual Studio or Restoring it back to defaults. Cause by default it is enabled and configured correctly.

A known issue can also come from third-party Add Ons that actually handle such data can cause issues with *Intellisense* so uninstalling such Add Ons, then defaulting Visual Studio should fix it as well.

Example:

*   Resharp
*   Visual Assist X
*   Just Code
*   Etc.

Basically the ones that handle code completion, quick coding features.

Here is an article from [Microsoft Developer Network](http://msdn.microsoft.com/en-us/library/hcw1s69b%28v=vs.71%29.aspx).

Hopefully that helps.

# python - numpy 用整数增量替换元素组

> ID：15709169
> 
> 赞同：5
> 
> 时间：2013-03-29T18:25:41.477
> 
> 标签：python, numpy

```
import numpy as np
data = np.array(['b','b','b','a','a','a','a','c','c','d','d','d']) 
```

我需要像这样增量地用一个整数替换每组字符串

```
data = np.array([0,0,0,1,1,1,1,2,2,3,3,3]) 
```

我正在寻找一个 numpy 解决方案

* * *

有了这个数据集[http://www.uploadmb.com/dw.php?id=1364341573](http://www.uploadmb.com/dw.php?id=1364341573)

```
import numpy as np
f = open('test.txt','r')
lines = np.array([ line.strip() for line in f.readlines() ])
lines100 = lines[0:100]
_, ind, inv = np.unique(lines100, return_index=True, return_inverse=True)
print ind
print inv
nums = np.argsort(ind)[inv]
print nums

[ 0 83 62 40 19]
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2
 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1]
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3
 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4]

lines200 = lines[0:200]
_, ind, inv = np.unique(lines200, return_index=True, return_inverse=True)
print ind
print inv
nums = np.argsort(ind)[inv]
print nums
[167   0  83 124 104 144 185  62  40  19]
[1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9
 9 9 9 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 7 7 7 7 7 7 7 7 7 7 7 7
 7 7 7 7 7 7 7 7 7 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4
 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5
 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6]
[9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6
 6 6 6 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 5 5 5 5 5 5 5 5 5 5 5 5
 5 5 5 5 5 5 5 5 5 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 2 2 2 2 2 2 2
 2 2 2 2 2 2 2 2 2 2 2 2 2 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 4 4 4 4
 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:48:22.473

编辑：这并不总是有效：

```
>>> a,b,c = np.unique(data, return_index=True, return_inverse=True)
>>> c # almost!!!
array([1, 1, 1, 0, 0, 0, 0, 2, 2, 3, 3, 3])
>>> np.argsort(b)[c]
array([0, 0, 0, 1, 1, 1, 1, 2, 2, 3, 3, 3], dtype=int64) 
```

* * *

但这确实有效：

```
def replace_groups(data):
    a,b,c, = np.unique(data, True, True)
    _, ret = np.unique(b[c], False, True)
    return ret 
```

并且比字典替换方法快，对于较大的数据集大约快 33%：

```
def replace_groups_dict(data):
    _, ind = np.unique(data, return_index=True)
    unqs = data[np.sort(ind)]
    data_id = dict(zip(unqs, np.arange(data.size)))
    num = np.array([data_id[datum] for datum in data])
    return num

In [7]: %timeit replace_groups_dict(lines100)
10000 loops, best of 3: 68.8 us per loop

In [8]: %timeit replace_groups_dict(lines200)
10000 loops, best of 3: 106 us per loop

In [9]: %timeit replace_groups_dict(lines)
10 loops, best of 3: 32.1 ms per loop

In [10]: %timeit replace_groups(lines100)
10000 loops, best of 3: 67.1 us per loop

In [11]: %timeit replace_groups(lines200)
10000 loops, best of 3: 78.4 us per loop

In [12]: %timeit replace_groups(lines)
10 loops, best of 3: 23.1 ms per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:49:22.323

鉴于@DSM 注意到我最初的想法并不可靠，我能想到的最佳解决方案是替换字典：

```
data = np.array(['b','b','b','a','a','a','a','c','c','d','d','d'])
_, ind = np.unique(data, return_index=True)
unqs = data[np.sort(ind)]
data_id = dict(zip(unqs, np.arange(data.size)))
num = np.array([data_id[datum] for datum in data]) 
```

对于月份数据：

```
In [5]: f = open('test.txt','r')

In [6]: data = np.array([line.strip() for line in f.readlines()])

In [7]: _, ind, inv  = np.unique(data, return_index=True)

In [8]: months = data[np.sort(ind)]

In [9]: month_id = dict(zip(months, np.arange(months.size)))

In [10]: np.array([month_id[datum] for datum in data])
Out[10]: array([ 0,  0,  0, ..., 41, 41, 41]) 
```

# browser - 随着浏览器的缩放，Crystal Report Viewer 变得比预期更大

> ID：15709175
> 
> 赞同：1
> 
> 时间：2013-03-29T18:25:52.367
> 
> 标签：browser, crystal-reports

有谁知道我可以如何修复 Crystal Report Viewer 的大小，以便在用户放大浏览器时它不会变大或变小？我需要该报告保持适应该缩放级别而不是无界。

任何帮助将不胜感激，因为我花了几天时间尝试这个。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:10:33.920

用户调整缩放后，您必须通过 JavaScript 重新调整查看器的大小。这不是微不足道的。请参阅[在 JavaScript 中捕获浏览器的“缩放”事件](https://stackoverflow.com/questions/995914/catch-browsers-zoom-event-in-javascript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:16:57.857

```
<CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" AutoDataBind="True"
            Height="900px" Width="680px" EnableViewState="False" HasZoomFactorList="False"
            BestFitPage="False" /> 
```

# javascript - 来自 python flask approute 的 Ajax 调用返回列表

> ID：15709177
> 
> 赞同：1
> 
> 时间：2013-03-29T18:26:03.900
> 
> 标签：javascript, jquery, python, ajax, flask

我正在使用 ajax 调用来发布一些数据，现在我需要将 python 列表从 approute 返回到 html。我怎么能做到这一点。这是我的代码

```
 $('#stop').submit(function(){
 id = id
 var services = $('#service').val()
 var extra  = document.getElementById('More').value
 $.ajax({
     type: 'post',
     url: "/stopservice/"+id,
     cache:false,
     async:true,
     data: {service: JSON.stringify(services),
            extra: JSON.stringify(extra),
     },
     success: function(data) {
         alert(data)

     },
     error: function(data)
     {               $.unblockUI();
         alert(data)
     }
 });
 return false
      });
       }); 
```

这是我的approute。listofdata = finallist 返回数据列表

所以基本上数据列表是一个python列表。这是approute的返回值。但我无法在 ajax 中获取这些数据。任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:24:27.573

您需要使用 Flask 的[`jsonify`](http://flask.pocoo.org/docs/api/#flask.jsonify)函数（或使用自己将列表转换为 JSON`json.dumps`并将其发送回`application/json`）。

```
# In your route handler
return jsonify(list_of_data=list_of_data) 
```

```
// In your JavaScript
success: function(data) {
    console.log(data.list_of_data);
} 
```

# regex - 在 Go 中打开需要字符转义的路径的文件

> ID：15709178
> 
> 赞同：2
> 
> 时间：2013-03-29T18:26:08.810
> 
> 标签：regex, string, operating-system, go

我有一个文件可以`os.open()`让我返回，`no such file or directory`. 是否有一个函数可以转义文件名以获得正确的路径？类似于 net 包的东西`QueryEscape`？，但当然是文件路径

这是路径名称`"Music/3OH!3 - Streets Of Gold 2010 [Cov+CD][Bubanee]/06\. Touchin On My - 30H!3.mp3"`

我只是使用一个简单的

```
srcName := "Music/3OH!3 - Streets Of Gold 2010 [Cov+CD][Bubanee]/06\. Touchin On My - 30H!3.mp3"
src, err := os.Open(srcName)
if err != nil {
    fmt.Println(err)
    return
} 
```

顺便说一句，该文件确实存在，只是不能遵循路径名。bash 可以遵循的路径`Music/3OH\!3\ -\ Streets\ Of\ Gold\ \[Cov+CD\]\[Bubanee\]/12.\ Strrets\ Of\ Gold\ -\ 30H\!3.mp3`显示了所有需要的转义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:44:43.720

我尝试在我的机器（Mac OS 10.8.3）上创建相同的目录结构，并且使用您的代码打开文件没有问题。这意味着该路径在打开时已正确转义。

确保从文件夹正上方的位置运行 go 程序`Music/`，或者只使用`srcName`.

# jquery - simple_form f.association as: :radio_buttons 具有不同的值和 ids 用于 jQuery 操作

> ID：15709179
> 
> 赞同：0
> 
> 时间：2013-03-29T18:26:09.097
> 
> 标签：jquery, ruby-on-rails, radio-button, associations, simple-form

从[这个](https://stackoverflow.com/questions/15664449/simple-association-architecture-and-implementation-in-ruby-on-rails)继续（`employee belongs_to role`根据该角色，并且有薪水）我想让我`New Employee form`的交互性更强：我希望该`salary`字段的值根据`role`从单选按钮组中选择的值而改变。

我的表格现在看起来像这样：

```
<%= simple_form_for(@room) do |f| %>
  <%= f.input :name, label: 'Full Name', :required => true %>
  <%= f.association :role, as: :radio_buttons, :required => true %>
  <%= f.input :salary, label: 'Salary', :required => true %>
  <%= f.button :submit %>
<% end %> 
```

我的`employees.js.coffee`文件有这个代码：

```
jQuery ->
  $('#employee_employee_role_id_1').click ->
    $(document.getElementById('employee_salary')).val(15) 
```

我将值硬编码以确保我的表单字段ID没有问题。

我需要的是让该`.click`方法适用于所有`#employee_employee_role_id_X`字段（其中 X 是每个单选按钮的编号），并且传递给 .val() 的值是`role.salary`

但是，作为 Rails 和 js/jQuery 的新手，我一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:28:12.840

好的，我设法完成了这项工作，但我一点也不相信这是最好的方法。开始：

在表格中，我刚刚添加了`value_method: :salary`

```
<%= f.association :role, as: :radio_buttons, value_method: :salary, :required => true %> 
```

在我的`.js.coffee`文件中：

```
jQuery ->
  $("input[name='role[role_id]']").change ->
    $(document.getElementById('salary')).val(($("input:radio[name='role[role_id]']:checked").val())) 
```

如果存在，请随时发表评论，甚至提供更好的答案！:)

# jquery - Jquery 函数在我第二次调用它时无法正常工作

> ID：15709180
> 
> 赞同：0
> 
> 时间：2013-03-29T18:26:11.353
> 
> 标签：jquery, function, html

我对 Jquery 真的很陌生。我多次使用相同的功能时遇到问题。我正在尝试创建一个常见问题解答页面。第一个常见问题解答正常，但第二个没有。

```
<script> 
$(document).ready(function(){
   $("#flip").click(function(){
      $("#panel").slideToggle("slow");
   });
});
</script> 
```

这是我调用函数的地方

```
<body>

<div id="flip">How do I delete FAQ's?</div>
<div id="panel">I don't know</div>

<div id="flip"><h1>Why doesn't this work?</h1></div>
<div id="panel"><p>I still don't know</p></div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:33:30.583

您可以使用“开始于”选择器，例如

```
$("[id^=flip]").click(function(){//your code here}) 
```

将函数绑定到 ID 以“flip”开头的所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:28:53.533

因为`ID`必须是唯一的

使用类而不是与属性关联来指定必须显示哪个面板，如下所示：

```
<div class="flip" target="panelA">How do I delete FAQ's?</div>
<div class="panel" id="panelA">I don't know</div>

<div class="flip" target="panelB"><h1>Why doesn't this work?</h1></div>
<div class="panel" id="panelB"><p>I still don't know</p></div>

<script> 
$(document).ready(function(){
   $(".flip").click(function(){
      $('#' + $(this).attr('target')).slideToggle("slow");
   });
});
</script> 
```

# c# - 将两个对象声明为一个列表？

> ID：15709185
> 
> 赞同：1
> 
> 时间：2013-03-29T18:26:23.703
> 
> 标签：c#, linq, linq-to-xml

我所拥有的一切正常。我很好奇是否有更好的方法可以通过 Linq 实现这一点。目前我正在声明一个 ArrayList，然后填充它然后运行它。我可以运行单个 linq 语句来拉取 Windows 程序，然后将 Linux 程序附加到列表中吗？

```
foreach (var winProgram in allWinPrograms.Descendants("Programs").Select(p => new
{
    progName = p.Element("ProgramName").Value
}))
{
    alTemp.Add(winProgram.progName.ToString());
}

foreach (var linProgram in allLinPrograms.Descendants("Programs").Select(p => new
{
    progName = p.Element("ProgramName").Value
}))
{
    alTemp.Add(linProgram.progName.ToString());
}

foreach (string newProgram in alTemp)
{
    if (!alPrograms.Contains(newProgram))
    {
        alPrograms.Add(newProgram);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:34:34.697

假设`allWinPrograms`和的后代`allLinPrograms`属于同一类型，您应该能够`Concat`像这样使用 LINQ：

```
var sorted = allWinPrograms.Descendants("Programs")
    .Concat(allLinPrograms.Descendants("Programs"))
    .Select(p => p.Element("ProgramName").Value.ToString())
    .Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:40:46.883

简短的解决方案

```
foreach (var prg in allWinPrograms.Union(allLinPrograms).Select(x => x).Where(prg =>!allPrograms.Contains(prg)))
{
    allPrograms.Add(prg);
} 
```

长解决方案

```
foreach (var prg in allWinPrograms.Union(allLinPrograms).Select(x => x))
{
     if (!allPrograms.Contains(prg))
     {
         allPrograms.Add(prg);
     }
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T18:41:15.917

如果您将所有内容都放在同一行中，它的可读性如何？您可能会从 linq 执行中获得一些性能优势，但也要记住干净的代码。

```
 foreach (var winProgram in allWinPrograms.Descendants("Programs").Select(p => new
        {
            progName = p.Element("ProgramName").Value
        }))
        {
            alTemp.Add(winProgram.progName);
        }

        foreach (var linProgram in allLinPrograms.Descendants("Programs").Select(p => new
        {
            progName = p.Element("ProgramName").Value
        }))
        {
            alTemp.Add(linProgram.progName);
        }

        foreach (string newProgram in alTemp.Cast<string>().Where(newProgram => !alPrograms.Contains(newProgram)))
        {
            alPrograms.Add(newProgram);
        } 
```

# visual-studio-2010 - 非 web app.config 的 SlowCheetah 转换

> ID：15709190
> 
> 赞同：3
> 
> 时间：2013-03-29T18:26:37.797
> 
> 标签：visual-studio-2010, visual-studio, msbuild, slowcheetah

我对 Sayed Hashimi 和公司在 SlowCheetah 上所做的快速和出色的工作感到困惑，特别是 SlowCheetah 是否能够在 Build 上转换文件而不仅仅是打包和发布。

我安装了 SlowCheetah，并且能够为我正在与开发团队合作部署的控制台应用程序的 app.config 自动生成构建配置实例。在构建时，会在 $(ProjectDir)\obj\x86\$(BuildConfig) 目录下创建一个新的“SlowCheetah”目录。例如，obj\x86\STAGE\SlowCheetah 目录包含一个 app.config 文件，当右键单击 STAGE 转换并选择“查看转换”时，转换完成。

但是，\bin\$(BuildConfig) 目录包含未转换的 app.config 文件以及每个 $(BuildConfig) 转换的所有模板 - 而不是替换 bin\x86\ 中的 app.config 文件带有来自 SlowCheetah 的 STAGE 目录。

构建完成没有错误。

这是预期的操作，还是仍然无法正常工作？

@sayed-ibrahim-hashimi 每个 $(Configuration) 都有一个转换。在 Visual Studio 中查看时转换正确显示，并在 \obj 目录树下的 \slowcheetah 目录中正确转换。转换示例如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- For more information on using transformations see the web.config examples at http://go.microsoft.com/fwlink/?LinkId=214134\. -->
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform
<connectionStrings>
<add name="Portal" connectionString="Data Source=transformtestserver.domain.local;Initial Catalog=TestDB;User Id=TestUser;Password=testpw1;" xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
<add name="DictionaryDatabase" connectionString="Data Source=transformtestserver.domain.local;Initial Catalog=TestDB;User Id=TestUser;Password=testpw2;" xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
<add name="LoggingDatabase" connectionString="Data Source=transformtestserver.domain.local;Initial Catalog=TestDB;User Id=TestUser;Password=testpw3;" xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>    
</connectionStrings>
</configuration> 
```

该问题可能与 Nuget/解决方案配置有关。我正在处理的项目是一个非常大的解决方案的一部分。我很难安装并运行 SlowCheetah - 有一次发现 Nuget 说已安装 SlowCheetah，但解决方案包目录不包含 SlowCheetah。

我在 TeamCity 中设置了一个解决方法，以从 \obj 目录中提取转换后的 app.config 文件，但我真的很想解决这个问题，以便我可以将 SC 推广到完整的开发组。有没有我们可以查看的详细日志可以指出细节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T06:07:32.637

我遇到了同样的问题。

VS 中的本地编译效果很好，但在构建代理 (TeamCity) 时没有发生转换魔法！

我找到的解决方案与**proj 文件中 xml 元素的位置有关**

```
 <PropertyGroup Label="SlowCheetah">
    <SlowCheetahToolsPath>$([System.IO.Path]::GetFullPath( $(MSBuildProjectDirectory)\..\packages\SlowCheetah.2.5.10.3\tools\))</SlowCheetahToolsPath>
    <SlowCheetah_EnableImportFromNuGet Condition=" '$(SC_EnableImportFromNuGet)'=='' ">true</SlowCheetah_EnableImportFromNuGet>
    <SlowCheetah_NuGetImportPath Condition=" '$(SlowCheetah_NuGetImportPath)'=='' ">$([System.IO.Path]::GetFullPath( $(MSBuildProjectDirectory)\Properties\SlowCheetah\SlowCheetah.Transforms.targets ))</SlowCheetah_NuGetImportPath>
    <SlowCheetahTargets Condition=" '$(SlowCheetah_EnableImportFromNuGet)'=='true' and Exists('$(SlowCheetah_NuGetImportPath)') ">$(SlowCheetah_NuGetImportPath)</SlowCheetahTargets>
  </PropertyGroup> 
```

我注意到的是，当最`PropertyGroup`重要的是 ItemGroup`s ellements MsBuild.exe 最后做了转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T07:45:47.723

查找重复的 SlowCheetahTargets 部分 - 我有一个旧版本和一个新版本，旧版本指向一个不再存在于 nuget 包目录中的位置。

删除旧/重复的 SlowCheetahTargets 部分的整个属性组，这应该可以修复它。

# javascript - 简单的 jQuery 不会加载

> ID：15709192
> 
> 赞同：0
> 
> 时间：2013-03-29T18:26:41.840
> 
> 标签：javascript, jquery, ajax, accordion, squarespace

我正在尝试重新学习 HTML/CSS/JavaScript 并遇到我正在构建的网站的问题。我在 Squarespace 并尝试实现 jQuery。我有简单的代码，它不会工作。请让我知道我做错了什么。

这是在我的“页眉代码注入”中

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script> 
```

这是在我的实际页面中：

```
<div id="accordion">

<h3>Section 1</h3>
  <div>
    <p>
      Blah
    </p>
  </div>
  <h3>Secion 2</h3>
  <div>
    <p> lalala
    </p>
   </div>
</div> 
```

我需要声明“text/javascript”吗？我尝试添加“https”，将其声明为 HTML5，等等...

请帮忙！我四处寻找。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:33:00.117

如果您使用 from **local**，那么它会查找`file://`不存在的。用这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script>$(function() {$( "#accordion" ).accordion();});</script> <!-- To call accordion--> 
```

**编辑**：使用`//`，看看 js 控制台中的错误： ![在此处输入图像描述](../Images/5f4e383d8815182a5293360aeeef62cd.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:33:39.007

我假设您想实际使用 jQuery UI 中的手风琴小部件？在这种情况下，您需要实际运行一些代码来告诉 jQuery 您想要这样做。

*在*您的标签导入两个脚本后，添加以下内容：

```
<script>
 $(function() {
     $( "#accordion" ).accordion();
 });
</script> 
```

这告诉 jQuery 找到带有 id 的标签并在`accordion`其上运行函数`.accordion()`，在 jQuery UI 中将其变成手风琴小部件。

另请注意，无协议 URL 的设计使您可以在无需更改代码的情况下进行切换`http:`。`https`不幸的是，如果您从文件系统 ( ) 运行页面，它将无法工作，`file:`因为它会尝试从本地硬盘驱动器加载脚本。`http:`如果您在本地运行，则在 URL 的开头显式添加。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T18:36:54.507

为了使用 jQuery UI 手风琴，您需要设置它：

```
 <script>
  $(function() {
    $( "#accordion" ).accordion();
  });
 </script> 
```

此外，请确保您的 HTML 标记与手风琴插件的预期相符：

```
<div id="accordion">
    <h3>Section 1</h3>
    <div>
        <p>Lorem</p>
    </div>
        <h3>Section 2</h3>
    <div>
        <p>Ipsum</p>
    </div>
</div> 
```

最后，确保您还包括 jQuery UI 的 CSS：

`<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />`

> 请参阅此链接：http: [//jqueryui.com/accordion/](http://jqueryui.com/accordion/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T18:33:56.257

要使用手风琴 UI 小部件，您需要像这样实例化它：

```
 <script>
  $(function() {
    $( "#accordion" ).accordion();
  });
  </script> 
```

加载外部源后。

这可以在文档中找到：http: [//jqueryui.com/accordion/](http://jqueryui.com/accordion/)

点击“查看源代码”链接。

# google-maps - 谷歌地图自动完成默认选择列表中的第一个条目

> ID：15709193
> 
> 赞同：5
> 
> 时间：2013-03-29T18:26:43.200
> 
> 标签：google-maps, autocomplete, google-places

我正在使用 gmap 自动完成功能，有时用户在建议列表中没有选择任何选项。例如，他在输入字段中键入“Paris”并认为搜索将使用 Paris 执行，但是从未调用 gmap autcomplete 的“place_changed”，无法执行搜索。当用户没有做出任何选择时，如何默认选择建议列表的首选？我相信我可以使用模糊事件处理来调整为此处描述的“输入问题”提供的解决方案（[Google maps Places API V3 autocomplete - select first option on enter](https://stackoverflow.com/questions/7865446/google-maps-places-api-v3-autocomplete-select-first-option-on-enter)），但这不起作用。

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-21T01:57:31.030

我认为这有点违背自动完成的目的。

您可以像这样以编程方式检索自动完成预测：

```
function initialize() 
{
    var service = new google.maps.places.AutocompleteService();
    service.getQueryPredictions({ input: 'some address' }, callback);
}

function callback(predictions, status) 
{
   if (status != google.maps.places.PlacesServiceStatus.OK) 
   {
      alert(status);
      return;
   }  

   // Take the first result
   var result = predictions[0]

   // do as you wish with the result    
} 
```

希望有帮助

# android - 无法执行dex：多个dex文件定义了Lcom/facebook/android/AsyncFacebookRunner$1；

> ID：15709196
> 
> 赞同：5
> 
> 时间：2013-03-29T18:26:49.767
> 
> 标签：android, facebook-android-sdk, java

我有一个 android 应用程序，它调用一个 jar lib 说 b.jar。这个 b.jar 库。然后调用 facebook sdk lib。当我在这种情况下编译我的应用程序时，它总是说

**无法执行dex：多个dex文件定义了Lcom/facebook/android/AsyncFacebookRunner$1；转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件定义 Lcom/facebook/android/AsyncFacebookRunner$1；**

我用了几天的时间让它工作，但是，我没有解决这个问题。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T20:03:41.150

转到项目属性，然后 Java 构建路径 -> 库 -> 删除 Android 依赖项，然后确定，然后运行您的项目

参考自：[https ://stackoverflow.com/a/15247670/1585773](https://stackoverflow.com/a/15247670/1585773)

非常适合我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T10:54:48.283

所有答案都可以解决。他们没有解决问题的根本原因。如果您查看您的项目结构，就会发现有一个 FacebookSDK 项目和您的项目。在这两个项目中，您都有 com.facebook.android（第一个 java 文件是 AsyncFacebookRunner）包，其中包含相同的 java 文件。显然多个 dex 文件会定义你的类文件，你会得到错误。

解决方案 - 从您的主项目（不是 FacebookSDK）中删除 com.facebook.android。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T11:27:36.467

对我来说，这是由于与 AddThis SDK 的冲突造成的，因为 AddThis SDK 包含嵌入其中的 Facebook SDK 的部分副本。所以这个`com/facebook/android/AsyncFacebookRunner`类被定义了两次。

我能够使用这些答案解决这个问题：

[Android AddThis sdk + Facebook sdk 不会在 Android Studio 中构建](https://stackoverflow.com/questions/18262647/android-addthis-sdk-facebook-sdk-wont-build-in-android-studio)

[Android Studio - AddThis.jar 上的应用程序崩溃 - “未找到源”消息](https://stackoverflow.com/questions/25964223/android-studio-app-crashing-on-addthis-jar-sources-not-found-message)

具体来说，通过使用第二个答案中的这一步：

*在终端中使用命令`zip -d addthis0.0.8.jar com/facebook/*`从 addthis0.0.8.jar 中删除 Facebook 文件*

由于我使用的是 Eclipse，因此我不需要在这些答案中执行任何其他步骤。

# mysql - 使用不同格式的主键和外键连接两个表

> ID：15709199
> 
> 赞同：2
> 
> 时间：2013-03-29T18:26:55.677
> 
> 标签：mysql, sql, foreign-keys, primary-key

两张表：

```
employee
id name
1  steve
2  rob
3  bell

position     
position_id employee_id position
1           e1         manager
2           e2         seller
3           e3         director 
```

问题是外键的格式与主键不同。如何使用 sql 查询获得结果？

```
name   position
steve  manager
rob    seller
bell   director 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:31:37.507

你是说你`employee_id`在你的职位表中总是有一个前缀“e”吗？如果是这样，那么这应该使用`CONCAT`：

```
select e.name, p.position
from employee e join position p
on p.employee_id = concat('e',e.id) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/630e3/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:53:49.967

**[CONCAT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)**
函数将帮助您隐式转换您的数字 id 并在前面添加“e”以匹配您在职位表中的 employee_id。然后，您可以进行哈希联接以从两个表中获取结果。
**[SQL 小提琴演示](http://sqlfiddle.com/#!2/74a9b/4)**

```
 select E.name, 
       P.position
from Employee E 
inner join Positions P
    on P.employee_id = concat('e',E.id) 
```

# c++ - 如何访问数百万位进行散列

> ID：15709200
> 
> 赞同：0
> 
> 时间：2013-03-29T18:27:09.933
> 
> 标签：c++, c, binary, char, md5

我正在对可执行文件进行 MD5 哈希处理。我使用 python 脚本将可执行文件中的二进制文件读入文本文件，但如果我要将这个构造的文件读入 C 程序，我将处理 MB 的数据，因为 1 和 0 被视为`char`s，每个 1 位数字占用 8 位。是否可以将这些作为单个位读取？如果我制作一个 10MB 的数组来保存二进制转换长度和哈希填充可能需要的所有字符，那么程序的性能会有多糟糕？如果这是不可想象的，是否有更好的方法来处理数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:48:26.470

既然你标记了问题 C 和 C++，我会选择 C。

> 是否可以将这些作为单个位读取？

是的，只需从文件中一次读取 8 个字节，然后将这些`1`s 和`0`s 连接起来形成一个新字节。你不需要为此创建一个 10MB 的数组。

首先，从文件中读取 8 个字节。读取的`char`值将转换为整数值 (`0`和`1`)，然后移位以生成一个新字节。

```
unsigned char bits[8];
while (fread(bits, 1, 8, file) == 8) {
    for (unsigned int i = 0; i < 8; i++) {
        bits[i] -= '0';
    }

    char byte = (bits[0] << 7) | (bits[1] << 6) |
                (bits[2] << 5) | (bits[3] << 4) |
                (bits[4] << 3) | (bits[5] << 2) |
                (bits[6] << 1) | (bits[7]     );

    /* update MD5 Hash here */
} 
```

然后，您将使用新读取的字节更新您的 MD5 哈希。

* * *

**编辑：**由于典型的 MD5 实现必须在处理之前将输入分成 512 位的块，因此您可以在实现本身中摆脱这种开销（但不推荐），只需从文件中读取 512 位（64 字节）然后直接更新哈希。

```
unsigned char buffer[64];
unsigned char bits[8];
unsigned int index = 0;

while (fread(bits, 1, 8, file) == 8) {
    for (unsigned int i = 0; i < 8; i++) {
        bits[i] -= '0';
    }

    buffer[index++] = (bits[0] << 7) | (bits[1] << 6) |
                      (bits[2] << 5) | (bits[3] << 4) |
                      (bits[4] << 3) | (bits[5] << 2) |
                      (bits[6] << 1) | (bits[7]     );

    if (index == 64) {
        index = 0;
        /* update MD5 hash with 64 byte buffer */
    }
}

/* This sends the remaining data to the MD5 hash function */
/* It's not likely that your file has exactly 512N chars */
if (index != 0) {
    while (index != 64) {
        buffer[index++] = 0;
    }
    /* update MD5 hash with the padded buffer. */
} 
```

# java - 注解有参数时CDI拦截器不起作用

> ID：15709203
> 
> 赞同：6
> 
> 时间：2013-03-29T18:27:20.537
> 
> 标签：java, tomcat, annotations, cdi, interceptor

我正在尝试实现一个`@Restricted`注释，以一种用户只能在登录并具有特定角色时才能访问它们的方式来保护控制器方法。我在使用 JSF 和 CDI 的 Tomcat 7 上，所以没有 EJB。只要注解接口没有指定任何参数，拦截器就会被调用。一旦我添加了一个`@Nonbinding Role value() default Role.ADMIN;`参数，拦截器和控制器方法都不会执行。也没有错误或异常。这是我的代码，我真的不知道它有什么问题：

注解：

```
@InterceptorBinding
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.TYPE, ElementType.METHOD })
public @interface Restricted {
    @Nonbinding Role value() default Role.ADMIN; // ###
} 
```

拦截器：

```
@Interceptor
@Restricted
public class RoleBasedRestrictingInterceptor implements Serializable {
    @Inject
    ISecurityManager security;

    @AroundInvoke
    public Object intercept(final InvocationContext ctx) throws Exception {
        final Restricted annotation = ctx.getClass().getAnnotation(Restricted.class);
        log.info("Intercepted, required role is: {}", annotation.value()); // ###
        log.info("User is logged in: {}", security.isLoggedIn());
        return ctx.proceed();
    }
} 
```

控制器：

```
@Named("manageUsers")
@SessionScoped
public class ManageUsersBacking extends implements Serializable {   
    @Restricted(Role.ADMIN) // ###
    public void testRestricted() {
        log.info("testRestricted()");
    }
} 
```

这些`###`事件标记了必须更改或删除的内容才能使其再次工作。拦截器在 中正确定义`WEB-INF/beans.xml`，因为它在我的注释中没有角色参数的情况下工作。

```
16:04:33.772 [http-apr-8080-exec-11] INFO  c.m.s.RoleBasedRestrictingInterceptor - User is logged in: true
16:04:33.772 [http-apr-8080-exec-11] INFO  c.m.c.admin.ManageUsersBacking - testRestricted() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:46:20.393

今天我重新审视了这个特殊问题，发现它与 CDI 无关：

`ctx.getClass().getAnnotation(Restricted.class)`

显然，我的示例中没有类级别的注释。所以 getAnnotation() 返回`null`。相反，我应该使用以下内容：

`ctx.getMethod().getAnnotation(Restricted.class)`

虽然我不知道为什么那里没有任何例外。也许其他一些事情正在发生，因为我将我的应用程序迁移到了 TomEE，所以我无法再重现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:27:31.283

如果你切换到 TomEE，你将不需要依赖（maven）实现，只需要 api（使用 org.apache.openejb:javaee-api:6.0-4 和提供的范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:26:09.430

听起来您的设置正确（beans.xml 和拦截器）。您使用的是哪种 CDI 实现？如果您使用的是 Tomcat，您是否考虑过使用 TomEE？

# c# - 使用 Caliburn Micro 进行导航

> ID：15709207
> 
> 赞同：3
> 
> 时间：2013-03-29T18:27:27.703
> 
> 标签：c#, mvvm, caliburn.micro

我正在玩 Caliburn.Micro，现在有一个非常简单的应用程序。

它有一个 AppView，它实际上有一个用于 NavigationBar 的 ContentControl、一个 InnerView 和一个 StatusBar。

现在我想处理不同内部视图之间的导航。

现在我使用 eventtaggregator 发布一个 NavigationEvent，它应该将主窗口的内部视图切换到另一个视图。

这是我对 Publish 的调用（所有 InnerViews 都有相同的基类，它有一个 IEventAggregator）

```
public void NavigateOverview()
{
    base._eventAggregator.Publish(new NavigateEvent("OverviewViewModel"));
} 
```

现在我将一个字符串传递给处理 NavigateEvent 的 AppViewModel：

```
 public void Handle(NavigateEvent navigate)
        {
            InnerViewModel target;

            switch (navigate.TargetViewModel)
            {
                case "SelectProjectViewModel":
                {
                    target = new SelectProjectViewModel(_eventAggregator);
                    break;
                }
                case "OverviewViewModel":
                {
                    target = new OverviewViewModel(_eventAggregator);
                    break;
                }
                default:
                {
                    throw new InvalidOperationException("no target type found");
                }
            }

            this.CurrentInnerViewModel = target;
        } 
```

传递字符串有效，但容易出错且不是很干净。

Caliburn 的处理方式是什么？那是指挥家应该做的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:10:28.997

为什么不直接传递一个类型呢？这样就没有魔线了

例如

```
public void NavigateOverview()
{
    base._eventAggregator.Publish(new NavigateEvent(typeof(OverviewViewModel)));
} 
```

然后：

```
 public void Handle(NavigateEvent navigate)
    {
        InnerViewModel target;

        // EDIT: Remove the case (only works with integral types so you can't use typeof etc)
        // but you could do this with standard conditional logic

        this.CurrentInnerViewModel = target;
    } 
```

编辑2：

好的，既然您询问了如何构建到 CMs IoC 中，这里是一个将 IoC 与 Castle Windsor 一起使用的示例，以及一个将附加参数传递给导航的解决方案（借用自`EventAggregator`）

引导程序只需要一些零碎的东西来配置容器：

```
public class AppBootstrapper : Bootstrapper<ShellViewModel>
{
    // The Castle Windsor container
    private IWindsorContainer _container;

    protected override void Configure()
    {
        base.Configure();

        // Create the container, install from the current assembly (installer code shown in next section below)
        _container = new WindsorContainer();
        _container.Install(FromAssembly.This());
    }

    // Matches up with Windsors ResolveAll nicely
    protected override IEnumerable<object> GetAllInstances(Type service)
    {
        return (IEnumerable<object>)_container.ResolveAll(service);
    }

    // Matches up with Windsors Resolve
    protected override object GetInstance(Type service, string key)
    {
        return string.IsNullOrEmpty(key) ? _container.Resolve(service) : _container.Resolve(key, service);
    }

    // Windsor doesn't do property injection by default, but it's easy enough to get working:
    protected override void BuildUp(object instance)
    {
        // Get all writable public properties on the instance we will inject into
        instance.GetType().GetProperties().Where(property => property.CanWrite && property.PropertyType.IsPublic)
        // Make sure we have a matching service type to inject by looking at what's registered in the container
                                          .Where(property => _container.Kernel.HasComponent(property.PropertyType))
        // ...and for each one inject the instance
                                          .ForEach(property => property.SetValue(instance, _container.Resolve(property.PropertyType), null));
    }
} 
```

CM 的 Windsor 安装程序可能很简单：

```
public class CaliburnMicroInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        // Register the window manager
        container.Register(Component.For<IWindowManager>().ImplementedBy<WindowManager>());

        // Register the event aggregator
        container.Register(Component.For<IEventAggregator>().ImplementedBy<EventAggregator>());
    }
} 
```

我还有一个导航服务界面来帮助应用程序导航：

```
public interface INavigationService
{
    void Navigate(Type viewModelType, object modelParams);
} 
```

这是由`NavigationService`（在几秒钟内向您展示）实现的

这也需要一个 Windsor 安装程序：

```
public class NavigationInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Component.For<INavigationService>().ImplementedBy<NavigationService>());
    }
} 
```

`NavigationService`工作原理很像，暴露导航参数的`EventAggregator`类型应该为它可以接收的每个参数类实现一个通用接口......

界面看起来像这样（大量借鉴 EventAggregator）：

```
// This is just to help with some reflection stuff
public interface IViewModelParams { }

public interface IViewModelParams<T> : IViewModelParams        
{
    // It contains a single method which will pass arguments to the viewmodel after the nav service has instantiated it from the container
    void ProcessParameters(T modelParams);
} 
```

例子：

```
public class ExampleViewModel : Screen, 
    // We can navigate to this using DefaultNavigationArgs...
    IViewModelParams<DefaultNavigationArgs>, 
    // or SomeNavigationArgs, both of which are nested classes...
    IViewModelParams<SomeOtherNavigationArgs>
{
    public class DefaultNavigationArgs
    {
        public string Value { get; private set; }

        public DefaultNavigationArgs(string value)
        {
            Value = value;
        }
    }

    public class OtherNavigationArgs
    {
        public int Value { get; private set; }

        public DefaultNavigationArgs(int value)
        {
            Value = value;
        }
    }

    public void ProcessParameters(DefaultNavigationArgs modelParams)
    {            
        // Do something with args
        DisplayName = modelParams.Value;
    }

    public void ProcessParameters(OtherNavigationArgs modelParams)
    {            
        // Do something with args. this time they are int!
        DisplayName = modelParams.Value.ToString();
    }
} 
```

这会导致一些强类型导航（例如，重构友好！）

```
NavigationService.Navigate(typeof(ExampleViewModel), new ExampleViewModel.DefaultNavigationArgs("hello")); 
```

或者

```
NavigationService.Navigate(typeof(ExampleViewModel), new ExampleViewModel.OtherNavigationArgs(15)); 
```

这也意味着 ViewModel 仍然可以控制它自己的导航参数

好的，回到温莎一会儿；显然我们需要从我们的视图命名空间安装任何视图——Windsors fluent API 使这非常容易：

```
public class ViewInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        // The 'true' here on the InSameNamespaceAs causes windsor to look in all sub namespaces too
        container.Register(Classes.FromThisAssembly().InSameNamespaceAs<ShellViewModel>(true));
    }
} 
```

好的，现在`NavigationService`实现：

```
public class NavigationService : INavigationService
{
    // Depends on the aggregator - this is how the shell or any interested VMs will receive
    // notifications that the user wants to navigate to someplace else
    private IEventAggregator _aggregator;

    public NavigationService(IEventAggregator aggregator)
    {
        _aggregator = aggregator;
    }

    // And the navigate method goes:
    public void Navigate(Type viewModelType, object modelParams)
    {
        // Resolve the viewmodel type from the container
        var viewModel = IoC.GetInstance(viewModelType, null);

        // Inject any props by passing through IoC buildup
        IoC.BuildUp(viewModel);

        // Check if the viewmodel implements IViewModelParams and call accordingly
        var interfaces = viewModel.GetType().GetInterfaces()
               .Where(x => typeof(IViewModelParams).IsAssignableFrom(x) && x.IsGenericType);

        // Loop through interfaces and find one that matches the generic signature based on modelParams...
        foreach (var @interface in interfaces)
        {
            var type = @interface.GetGenericArguments()[0];
            var method = @interface.GetMethod("ProcessParameters");

            if (type.IsAssignableFrom(modelParams.GetType()))
            {
                // If we found one, invoke the method to run ProcessParameters(modelParams)
                method.Invoke(viewModel, new object[] { modelParams });
            }
        }

        // Publish an aggregator event to let the shell/other VMs know to change their active view
        _aggregator.Publish(new NavigationEventMessage(viewModel));
    }
} 
```

现在，shell 可以处理聚合器消息并激活新注入和额外配置的 VM

```
public class ShellViewModel : Conductor<IScreen>, IHandle<NavigationEventMessage>
{
    private IEventAggregator _aggregator;
    private INavigationService _navigationService;

    public ShellViewModel(IEventAggregator aggregator, INavigationService _navigationService)
    {
        _aggregator = aggregator;
        _aggregator.Subscribe(this);

        _navigationService.Navigate(typeof (OneSubViewModel), null);
    }

    public void Handle(NavigationEventMessage message)
    {
        ActivateItem(message.ViewModel);
    }
} 
```

实际上，我将导航限制为 IScreen 实现，所以我的 NavigationEventMessage 实际上看起来像这样：

```
public class NavigationEventMessage
{
    public IScreen ViewModel { get; private set; }

    public NavigationEventMessage(IScreen viewModel)
    {
        ViewModel = viewModel;
    }
} 
```

这是因为我总是想要我的子视图模型的生命周期

# java - java二维数组超出扩展

> ID：15709211
> 
> 赞同：0
> 
> 时间：2013-03-29T18:27:38.380
> 
> 标签：java, arrays

我有这个简单的代码：

```
double[][] params = new double[][]{{197.0,258.0,427.0,426.0,507.0,524.0,386.0},
    {345.0,473.0,484.0,422.0,406.0,291.0,289.0}};       

for (int i = 0; i <= params.length; i++) {
    for (int j = 0; j <= params[i].length; j++) {
        System.out.println("Coordinates: " + params[i][j]); //line 29       
    }
} 
```

和错误：

```
> Caused by: java.lang.ArrayIndexOutOfBoundsException: 7    at
> com.eyecom.gen.generate_xml(gen.java:29) 
```

为什么我会得到这个异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:28:52.750

在 Java 中，数组是从零开始的。在这里，您超出了数组范围。采用

```
for (int i = 0; i < params.length; i++) {
    for (int j = 0; j < params[i].length; j++) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:29:00.867

尝试

```
for (int i = 0; i < params.length; i++) {
    for (int j = 0; j < params[i].length; j++) {
        System.out.println("Coordinates: " + params[i][j]); // line 29
    }
} 
```

数组中的索引是 from `0`to`length-1`所以你不想使用索引等于`length`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T18:29:42.623

更改 for 循环结构

```
 for (int i = 0; i <= params.length; i++) {
    for (int j = 0; j <= params[i].length; j++) {
        System.out.println("Coordinates: " + params[i][j]); //line 29               
    }
} 
```

到

```
for (int i = 0; i < params.length; i++) {
    for (int j = 0; j < params[i].length; j++) {
        System.out.println("Coordinates: " + params[i][j]); //line 29               
    }
} 
```

# shell - 在 shell 中使用 awk - 将打印结果包含在同一输入中

> ID：15709214
> 
> 赞同：0
> 
> 时间：2013-03-29T18:27:47.050
> 
> 标签：shell, input, awk

我知道这是一个愚蠢的问题，甚至可能与 awk 本身无关（更像是 shell），但让我解释一下我需要什么：我想要（是的，这段代码是错误的，但我希望你能明白）

```
mv [awk 'BEGIN{for (i = 1; i <= 3; i++) { printf("file%d.png ", i) }}'] ../ 
```

被解释为好像我进入了

```
mv file1.png file2.png file3.png ../ 
```

基本上，就像星号一样

```
mv file*.png ../ 
```

做。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:41:40.130

*不安全地*这样做很容易：

```
mv $(awk 'BEGIN{for (i = 1; i <= 3; i++) { printf("file%d.png ", i) }}') ../ 
```

然而，这是危险和不安全的。awk 的输出是字符串拆分和全局扩展的；它不能引用带空格的文件名，如果它引用一个名为 的文件`*`，它将被 shell 替换为当前目录中所有文件的列表；其他 glob 表达式也类似地展开。不要这样做。

* * *

Doing this *safely* with awk is hard without a substantial number of lines of bash wrapping it, because doing it *safely* requires generating a NUL-delimited list of files (which awk can do), reading that list out of awk into a shell array, and then expanding it into an argument list.

```
#!/bin/bash
# ^^ arrays are bash features, so a script starting with #!/bin/sh will not work
#    even if /bin/sh is a symlink to /bin/bash, #!/bin/sh will disable some
#    bash-only extensions.
awk_files=()
while IFS='' read -r -d '' file; do
  awk_files+=( "$file" )
done < <(awk 'BEGIN{for (i = 1; i <= 3; i++) { printf("file%d.png\0", i) }}')
mv "${awk_files[@]}" ../ 
```

The list needs to be NUL-delimited because NULs are the only characters which cannot legitimately exist in a literal filename; newlines, glob characters, and everything else is valid (`/` isn't valid within a filename proper, but as the path separator, it's entirely valid within a fully-qualified path) -- and the shell doesn't have tools for expanding such lists without multiple lines of code involved.

That said, you don't need awk at all for your example:

```
mv file{1..3}.png ../ 
```

...or, to mimic your awk script's logic in native bash:

```
files=()
for ((i=1; i<=3; i++)); do
  files+=( "file${i}.png" )
done
mv "${files[@]}" ../ 
```

# php - MySQL / PHP - 用户过滤器变量返回所有值

> ID：15709216
> 
> 赞同：0
> 
> 时间：2013-03-29T18:27:57.817
> 
> 标签：php, mysql

提前感谢您查看此问题。

我有一系列 HTML 选择元素，用户可以在其中定义他们想要从 MySQL 数据库返回的数据。每个选项都存储在一个变量中。一些选项使用户可以选择“无偏好”，在这种情况下，sql 语句需要接受一个变量，允许它返回该特定列的所有字段。

我正在使用 PHP 作为参考。

这是否存在或者它是一个糟糕的代码设置？目前 SQL 语句正在接受这种格式的变量

```
AND `operationalTier1`='$userOps'
AND `modelName`='$userEndpoint'
AND `status`='$userStatus'
AND `sourceName`='$userSource'
AND `metSLA`='$userSLA' 
```

供用户选择的Select是这种格式

```
 <h3>Data Filters</h3>
            <p>Case Created</p>
            <form action="index.php" method="post">
            <p>Ops Tier 1</p>
            <select name="ops_1_select">
                <option>No Preference</option>
                <option>Add/Create</option>
                <option>Delete/Remove</option>
                <option>Fix</option>
                <option>Inform</option>
            </select> 
```

将选项设置为变量

```
 if ($_POST['ops_1_select'] = "No Preference")
            {
                $userOps= XXXX
            } else
            {
                $userOps= $_POST['ops_1_select'];
            } 
```

因此，如果用户选择“无偏好”，我需要该变量来存储将从数据库中返回所有操作层的内容，这些内容将替换 XXXX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:57:22.383

我会使用`LIKE`insted of`=`并添加一个`%`.

```
AND `operationalTier1` LIKE '$userOps' 
```

和：

```
$userOps= '%'; 
```

或者您可以在设置`AND operationalTier1='$userOps'`时从您的 sql 语句中删除条件`No Preference`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:03:55.220

在您的 if 语句中，您应该使用相等运算符 (==) 而不是赋值运算符 (=)。该 if 语句将始终为 true，并且它将设置您选择的 $_POST 键的值。更改`if ($_POST['ops_1_select'] = "No Preference")`为`if ($_POST['ops_1_select'] == "No Preference")`

前：

```
if ($_POST['ops_1_select'] = "No Preference")
            {
                $userOps= XXXX
            } else
            {
                $userOps= $_POST['ops_1_select'];
            } 
```

后：

```
if ($_POST['ops_1_select'] == "No Preference") {
    $userOps = "XXXX";
} else {
    $userOps = $_POST['ops_1_select'];
} 
```

[你可以在这里](http://sourcedaddy.com/php/differentiate-equal-signs.html)找到更多信息

* * *

因此，根据您对此答案的评论，我将分享一些我认为可能会有所帮助的代码：

```
$fields = array('field1', 'field2', 'field3');
$query = 'text'; // should be everything up until your first WHERE

for ($fields as $key => $val) {
     if ($_POST[$val] == 'No Preference') {
         // IS NOT NULL will return true as long as the field is set
         $and = $val . ' IS NOT NULL';
     } else {
         $and = $val . ' = "' . $_POST[$val] . '"';
     }
     $query = $query . $and . ' AND ';
}

// Remove the trailing AND from $query, add anything else you need, run query 
```

更多注意事项，验证您的输入数据！如果您没有使用 PDO/mysqli 或其他数据库抽象引擎，那么现在是时候开始了。因为这段代码很容易受到 SQL 注入的影响。看看[这个问题](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

# php - PDO 出于某种原因将 id 插入为 0

> ID：15709217
> 
> 赞同：0
> 
> 时间：2013-03-29T18:28:00.517
> 
> 标签：php, pdo

所以我为我的 chrome 插件（它执行一个 ajax 请求来运行这个方法）编写了这个方法，当它运行时，会`file_put_contents`显示一个曾经插入过的 id，但是当它`insert ignore into songs`到达`0`. `artist_id`我不知道为什么......有人可以帮我找到我出错的部分吗？

```
<?php
public function saveLyrics($artist, $title, $lyric){
    $this->db->query("insert ignore into artists (artist_name) value (:artist)", array("artist"   => $artist));
    $artist_id = (int)$this->db->insertID();
    file_put_contents(__DIR__ . "/../process/page", "artist id: $artist_id");
    //return;
    if($artist_id == 0){
        $artist_id = (int)$this->db->getOne("select artist_id from artists where artist_name = :artist", array("artist" => $artist));
    }
    if($artist_id == 0){
        return false;
    }
    $this->db->query("insert ignore into songs (artist_id, song_name) values (:aid, :title)", array("aid"    => $artist_id, "title"  => $title));
    $song_id = (int)$this->db->insertID();
    if($song_id == 0){
        $song_id = (int)$this->db->getOne("select song_id from songs where artist_id = aid and song_name = :title", array("aid"   => $artist_id, "title" => $title));
    }
} 
```

PDO 包装器：

```
<?php

/** 
 * @property PDO $pdo Description
 * @property PDOStatement $sql Description
 */
class DB{

    protected $sql = null;
    protected $pdo = null;

    public function connect(){
        $this->pdo = new PDO("mysql:dbname=envne;host=xxx", "xxx", "xxx");
    }

    public function query($query, $params = array()){
        if($this->pdo === null){
            $this->connect();
        }
        $this->sql = $this->pdo->prepare($query);
        foreach($params as $key => $value){
            $this->sql->bindParam($key, $value);
        }
        $this->sql->execute();
        if(!$this->sql)
            return false;
        return true;
    }
    public function insertID(){
        return (int)$this->pdo->lastInsertId();
    }

    public function getAll($query, $params = array()){
        $this->query($query, $params);
        return $this->sql->fetchAll();
    }

    public function getOne($query, $params = array()){
        $this->query($query, $params);
        return $this->sql->fetchColumn();
    }

} 
```

艺术家：

```
mysql> describe artists;
+-------------+------------------+------+-----+-------------------+----------------+
| Field       | Type             | Null | Key | Default           | Extra          |
+-------------+------------------+------+-----+-------------------+----------------+
| artist_id   | int(10) unsigned | NO   | PRI | NULL              | auto_increment |
| artist_name | char(50)         | YES  | UNI | NULL              |                |
| add_date    | timestamp        | YES  |     | CURRENT_TIMESTAMP |                |
+-------------+------------------+------+-----+-------------------+----------------+
3 rows in set (0.00 sec) 
```

歌曲：

```
mysql> describe songs;
+------------+------------------+------+-----+-------------------+----------------+
| Field      | Type             | Null | Key | Default           | Extra          |
+------------+------------------+------+-----+-------------------+----------------+
| song_id    | int(10) unsigned | NO   | PRI | NULL              | auto_increment |
| artist_id  | int(11) unsigned | YES  | MUL | NULL              |                |
| album_id   | int(11)          | YES  | MUL | NULL              |                |
| song_name  | char(50)         | YES  |     | NULL              |                |
| track_id   | int(11)          | YES  |     | NULL              |                |
| date_added | timestamp        | NO   |     | CURRENT_TIMESTAMP |                |
+------------+------------------+------+-----+-------------------+----------------+
6 rows in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:28:46.310

我只是决定将 Id 直接放入查询中，这样就可以了。

```
$artist_id = (int)$this->db->insertID();
$this->db->query("insert ignore into songs (artist_id, song_name) values ($artist_id, :title)", array("title"  => $title)); 
```

另一种可行的方法是使用问号

```
$artist_id = (int)$this->db->insertID();
$this->db->query("insert ignore into songs (artist_id, song_name) values (?, ?)", array($artist_id, $title)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T23:29:20.613

我刚刚遇到了同样的问题：新插入的项目的 id 为 0，即使该`ID`字段设置为`AUTO_INCRIMENT`.

我找到的解决方案与您的非常相似。使用您的代码，这就是我们得到的：

```
$this->db->query("insert ignore into songs (artist_id, song_name) values (LAST_INSERT_ID(), :title)", array("title"  => $title)); 
```

如您所见，我将`$artist_id = (int)$this->db->insertID();`and替换`$artist_id`为 SQL function `LAST_INSERT_ID()`。

我希望有一天这可以帮助某人:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T07:34:59.963

您的占位符定义不正确：（您缺少冒号）我会这样做：

```
public function saveLyrics($artist, $title, $lyric){
    $this->db->query("insert ignore into artists (artist_name) value (:artist)", array(":artist"   => $artist));
    $artist_id = (int)$this->db->insertID();
    file_put_contents(__DIR__ . "/../process/page", "artist id: $artist_id");
    //return;
    if($artist_id == 0){
        $artist_id = (int)$this->db->getOne("select artist_id from artists where artist_name = :artist", array(":artist" => $artist));
        return false;
    }
    $this->db->query("insert ignore into songs (artist_id, song_name) values (:aid, :title)", array(":aid"=>$artist_id, ":title"=>$title));
    $song_id = (int)$this->db->insertID();
    if($song_id == 0){
        $song_id = (int)$this->db->getOne("select song_id from songs where artist_id = :aid and song_name = :title", array(":aid"=>$artist_id, ":title"=>$title));
    }
} 
```

看看您的 PDO 包装器，您有以下代码：

```
if(!$this->sql)
    return false; 
```

因此，您永远不会注意到实际错误。我猜这个错误是关于占位符的。（如果`$this->db->query("insert ignore into songs (...`在执行查询时出现错误，则 $song_id 将失败）。

改用异常并捕获错误会更好。

我还注意到：

```
$song_id = (int)$this->db->insertID(); 
```

会将值转换两次，首先是在上面的代码中，然后是在 PDO-Wrapper 中的实际函数 insertID() 中。也许这也是一个需要考虑的问题。

# java - EL 表达式的 JSF 困难

> ID：15709219
> 
> 赞同：1
> 
> 时间：2013-03-29T18:28:10.840
> 
> 标签：java, validation, jsf-2, el, required

我在使用属性“必需”JSF 2 + Prime Faces 3.5 时遇到问题。

下面的代码完美运行：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<ui:decorate template="/templates/main_template.xhtml">
    <ui:define name="centro">
        <h:head>
        </h:head>
        <h:body>
            <f:view>
                <h:form id="form">

                    <h3>TITLE</h3>

                    <h:panelGrid id="panel1" columns="3">

                        <h:outputLabel for="input1" value="Input1" />
                        <p:inputText id="input1" value="#{controller.myObject.input1}" label="input1" required="#{empty param['form:input3']}"/>
                        <p:message for="input1" />

                        <h:outputLabel for="input2" value="Input2" />
                        <p:inputText id="input2" value="#{controller.myObject.input2}" label="input2" required="#{empty param['form:input3']}"/>
                        <p:message for="input2" />

                        <h:outputLabel for="input3" value="Input3" />
                        <p:inputText id="input3" value="#{controller.myObject.input3}" label="input3" required="#{empty param['form:input1']}"/>
                        <p:message for="input3" />

                    </h:panelGrid>

                    <p:commandButton id="btn" value="Save" update="form" actionListener="#{controller.save}" />

                </h:form>
            </f:view>
        </h:body>
</ui:define>
</ui:decorate>
</html> 
```

如果我在代码中添加 TAB VIEW，必填字段验证不再起作用，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<ui:decorate template="/templates/main_template.xhtml">
    <ui:define name="centro">
        <h:head>
        </h:head>
        <h:body>
            <f:view>
                <h:form id="form">

                    <h3>#{msgs.clienteCadastroTitulo}</h3>

                    <p:tabView id="tabView">

                    <p:tab id="tab1" title="TAB 1">

                    <h:panelGrid id="panel1" columns="3">

                        <h:outputLabel for="input1" value="Input1" />
                        <p:inputText id="input1" value="#{controller.myObject.input1}" label="input1" required="#{empty param['form:input3']}"/>
                        <p:message for="input1" />

                        <h:outputLabel for="input2" value="Input2" />
                        <p:inputText id="input2" value="#{controller.myObject.input2}" label="input2" required="#{empty param['form:input3']}"/>
                        <p:message for="input2" />

                        <h:outputLabel for="input3" value="Input3" />
                        <p:inputText id="input3" value="#{controller.myObject.input3}" label="input3" required="#{empty param['form:input1']}"/>
                        <p:message for="input3" />
                    </h:panelGrid>

                    </p:tab>

                    </p:tabView>

                    <p:commandButton id="btn" value="Save" update="form" actionListener="#{controller.save}" />

                </h:form>
            </f:view>
        </h:body>
    </ui:define>
</ui:decorate>
</html> 
```

我不会在这里发布我尝试过的所有内容，但他们可以确定我已经尝试过使用教程概述的各种方法、其他用户的问题等。

我仍然不明白我哪里出错了，你想给我一些提示，以便我可以正确执行我的验证。

基本上，我需要的属性应该是动态的，根据我的表单中的字段是否填写。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:22:52.930

如果您查看 API 文档[http://www.primefaces.org/docs/api/3.5/org/primefaces/component/tabview/TabView.html](http://www.primefaces.org/docs/api/3.5/org/primefaces/component/tabview/TabView.html)

tabview 正在实现 javax.faces.component.NamingContainer 所以你需要像这样在命名容器分隔符“：”中包含它的 id

```
form:tabView:input3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:57:15.957

可能通过添加 <p:tabView> 和 <p:tab> 您更改了 param['form:inputX'] 的路径，尝试将其更改为 param['form:tab1:inputX'] 或 param['form:tabView:选项卡1：输入X']。不确定确切的组合，但真的希望这是错误的原因。

# java - 使 Java RMI 在 netbeans 7 上运行

> ID：15709222
> 
> 赞同：0
> 
> 时间：2013-03-29T18:28:18.490
> 
> 标签：java, rmi, netbeans-7

我已经编写了 RMI java 代码并手动启动了 RMI 服务器，但是当我运行程序时，它带来了一个找不到类的错误，我错过了什么：错误：服务器线程中发生 RemoteException；嵌套异常是：java.rmi.UnmarshalException：错误解组参数；嵌套异常是：java.lang.ClassNotFoundException: rmi3.Hello * 类可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:49:50.033

如果您查看堆栈跟踪，您会发现是否抛出了异常：

1.  导出时，这意味着该类在服务器 JVM 的 CLASSPATH 上不可用

2.  绑定时，这意味着它在 RMI 注册表的 CLASSPATH 上不可用。

3.  查找时，这意味着它在客户端的 CLASSPATH 上不可用。

# iphone - 如何在不打开 FBFriendPickerViewController iOS 的情况下获取好友列表

> ID：15709226
> 
> 赞同：4
> 
> 时间：2013-03-29T18:28:33.263
> 
> 标签：iphone, ios, facebook, ios5, facebook-ios-sdk

我正在使用适用于 iOS 的 Facebook sdk 3.2，
有各种适用于 iOS 的示例项目
但我的问题是如何在不打开 FBFriendPickerViewController 的情况下获取朋友列表。
事实上，我想要我所有的朋友 facebook id 并且有任何帮助将不胜感激。
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T10:09:24.600

试试这个：

使用获取好友列表

```
**[FBRequest requestForMyFriends];**

**FBRequest* friendsRequest = [FBRequest requestForMyFriends];**

[friendsRequest startWithCompletionHandler: ^(FBRequestConnection *connection,NSDictionary* result,NSError *error) {
NSArray* friends = [result objectForKey:@"data"];   ...... 
```

编码如下，但主线是

```
 **[FBRequest requestForMyFriends];**

-(void)sessionStateChanged:(FBSession *)session state:(FBSessionState)state error:(NSError *)error {
switch (state) {
    case FBSessionStateOpen: {
        if (self != nil) {
            [[FBRequest requestForMe] startWithCompletionHandler: ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
                if (error) {
                    //error
                }else{
                    FBRequest* friendsRequest = [FBRequest requestForMyFriends];
                    [friendsRequest startWithCompletionHandler: ^(FBRequestConnection *connection,NSDictionary* result,NSError *error) {
                        NSArray* friends = [result objectForKey:@"data"];

                        for (int i = 0; i < [arrFacebookFriends count]; i++) {
                            UserShare *shareObj = [arrFacebookFriends objectAtIndex:i];
                            [shareObj release];
                            shareObj = nil;
                        }
                        [arrFacebookFriends removeAllObjects];

                        for (NSDictionary<FBGraphUser>* friend in friends) {
                            UserShare *shareObj = [[UserShare alloc] init];
                            shareObj.userName = friend.name;
                            shareObj.userFullName = friend.username;
                            shareObj.userId = [friend.id intValue];
                            NSLog(@"%@",friend.id);
                            shareObj.userPhotoUrl = [NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?", friend.id];
                            [arrFacebookFriends addObject:shareObj];
                            [shareObj release];
                        }
                        [self StopSpinner];
                        [tblFacebookFriends reloadData];
                    }];
                }
            }];
        }
        FBCacheDescriptor *cacheDescriptor = [FBFriendPickerViewController cacheDescriptor];
        [cacheDescriptor prefetchAndCacheForSession:session];
    }
        break;
    case FBSessionStateClosed: {
        [self StopSpinner];
        UIViewController *topViewController = [self.navigationController topViewController];
        UIViewController *modalViewController = [topViewController modalViewController];
        if (modalViewController != nil) {
            [topViewController dismissViewControllerAnimated:YES completion:nil];
        }
        //[self.navigationController popToRootViewControllerAnimated:NO];

        [FBSession.activeSession closeAndClearTokenInformation];

        [self performSelector:@selector(showLoginView) withObject:nil afterDelay:0.5f];
    }
        break;
    case FBSessionStateClosedLoginFailed: {
        [self StopSpinner];
        [self performSelector:@selector(showLoginView) withObject:nil afterDelay:0.5f];
    }
        break;
    default:
        break;
}

[[NSNotificationCenter defaultCenter] postNotificationName:SCSessionStateChangedNotificationFL object:session];

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"Error: %@", [FacebookFriendsListViewController FBErrorCodeDescription:error.code]] message:error.localizedDescription delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    [alertView release];
}
} 
```

# python - 在 python 中使用切片操作字符串以添加或删除字符

> ID：15709227
> 
> 赞同：0
> 
> 时间：2013-03-29T18:28:36.097
> 
> 标签：python, string

我正在尝试在 python 中创建一个刽子手游戏，一个特定的功能给我带来了麻烦。我想打印用户可以选择的所有可用字符集。所以我从available ='abcdefghijklmnopqrstuvwxyz'开始，如果我的secretWord是'apple'并且用户在第一次尝试时猜测'a'，那么下一轮的新可用字符集available ='bcdefghijklmnopqrstuvwxyz'。我尝试将如下所示的东西放在一起，但它不起作用，一些字符确实被消除了，但如果我输入“z”，例如，它仍然保留在可用的字符串中。

```
if letter in lettersGuessed: 
                print('Oops! you\'ve already guessed that letter, try again: ')
elif letter in secretWord: #this is the part giving me trouble
                c = available.find(letter)
                available = available[0:c] + available[c+1:] 
```

此外，如果除了字符串切片之外还有任何其他功能或方法可以使这更容易，我也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:58:07.623

有一个更简单的方法使用`replace`.

```
>>> available = 'abcdefghijklmnopqrstuvwxyz'
>>> secret = 'apple'
>>> if 'a' in secret:
...   available = available.replace('a','')
... 
>>> available
'bcdefghijklmnopqrstuvwxyz' 
```

# java - 在 JSP 中编写 URL

> ID：15709229
> 
> 赞同：8
> 
> 时间：2013-03-29T18:28:37.850
> 
> 标签：java, jsp, url, jstl, el

假设我当前的 URL 是： `/app.jsp?filter=10&sort=name`。

我在 JSP 中有一个分页组件，它应该包含如下链接：
`/app.jsp?filter=10&sort=name&page=xxx`.

如何通过向当前 URL 添加新参数在 JSP 中创建有效 URL？我不想在 JSP 中使用 Java 代码，也不想以 URL 结尾：
`/app.jsp?filter=10&sort=name&?&page=xxx`或`/app.jsp?&page=xxx`等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T08:50:44.620

好的，我找到了答案。第一个问题是我必须保留 URL 中的所有当前参数并仅更改`page`参数。为此，我必须遍历所有当前参数并将那些我不想更改的参数添加到 URL。然后我添加了我想要更改或添加的参数。所以我最终得到了这样的解决方案：

```
<c:url var="nextUrl" value="">
    <c:forEach items="${param}" var="entry">
        <c:if test="${entry.key != 'page'}">
            <c:param name="${entry.key}" value="${entry.value}" />
        </c:if>
    </c:forEach>
    <c:param name="page" value="${some calculation}" />
</c:url> 
```

This will create nice and clean URL independent of `page` parameter in request. Bonus to this approach is that URL can be just anything.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-29T18:46:41.150

```
<c:url var="myURL" value="/app.jsp">
   <c:param name="filter" value="10"/>
   <c:param name="sort" value="name"/>
</c:url> 
```

要显示网址，您可以执行以下操作

```
<a href="${myURL}">Your URL Text</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T22:06:39.763

要基于当前 URL 构造新 URL，首先需要从**object中****获取当前 URL`request`**。要访问 JSP 中的`request`对象，请使用JSP 表达式语言定义的`pageContext` [**隐式对象：**](http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaij)

```
${pageContext.request.requestURL} 
```

* * *

下面是在 JSP 页面中构造 URL 的简单示例：

*测试.jsp*

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
    <title>Test Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <h1>Testing URL construction</h1>
    <c:choose>
        <c:when test="${pageContext.request.queryString != null}">
            <a href="${pageContext.request.requestURL}?${pageContext.request.queryString}&page=xxx">Go to page xxx</a>
        </c:when>
        <c:otherwise>
            <a href="${pageContext.request.requestURL}?page=xxx">Go to page xxx</a>
        </c:otherwise>
    </c:choose>
</body>
</html> 
```

此解决方案允许您**根据当前 URL 是否已包含某些查询字符串**来构造 URL 。所以你分别附加

`?${pageContext.request.queryString}&page=xxx`

要不就

`?page=xxx`

到当前 URL。

[JSTL](https://stackoverflow.com/tags/jstl/info)和[表达式语言](https://stackoverflow.com/tags/el/info)用于实现对查询字符串的检查。我们使用[`getRequestURL()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL())方法来获取当前的URL。

# jquery - 将javascript执行脚本放在远程文件中

> ID：15709232
> 
> 赞同：0
> 
> 时间：2013-03-29T18:28:46.107
> 
> 标签：jquery, execution

我发现了一个与我的问题类似的问题，但答案对我不起作用。我有一个在网上找到的与 JQuery 一起使用的导航。

我将导航执行脚本放在一个外部文件中并链接它，但现在它不起作用。有人可以解释为什么它不起作用吗？我还尝试了 $(document).ready( 也不起作用的函数。

我把对文件的引用放在头上

我已经更新了我的 Javascript，这也不起作用

```
 $(document).ready(function() {
        $(function() {
            $('#hn_menu > li').bind('mouseenter',function(){
        var $elem = $(this);
            $elem.find('img')
       .stop(true)
       .animate({
       //'width':'170px',
       'width':'120px',
       //'height':'170px',
       'height':'120px',
       'left':'0px'
    },400,'easeOutBack')
    .andSelf()
    .find('.hn_wrap')
    blah blah blah
        });
    }); 
```

这是整个文档..我需要将这个混乱转换为外部文件脚本

```
 <html>
<head>
    <title>Slide Down Box Menu with jQuery and CSS3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="Slide Down Box Menu with jQuery and CSS3" />
    <meta name="keywords" content="jquery, css3, sliding, box, menu, cube, navigation, portfolio, thumbnails"/>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
    <style>
        body{
            background:#333 url(bg.jpg) repeat top left;
            font-family:Arial;
        }
        span.reference{
            position:fixed;
            left:10px;
            bottom:10px;
            font-size:12px;
        }
        span.reference a{
            color:#aaa;
            text-transform:uppercase;
            text-decoration:none;
            text-shadow:1px 1px 1px #000;
            margin-right:30px;
        }
        span.reference a:hover{
            color:#ddd;
        }
        ul.sdt_menu{
            margin-top:150px;
        }
        h1.title{
            text-indent:-9000px;
            background:transparent url(title.png) no-repeat top left;
            width:633px;
            height:69px;
        }
    </style>
    <script type="text/javascript" src="testexec.js"></script>
     <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easing.1.3.js"></script>
</head>

<body>
    <div class="content">
        <h1 class="title">Slide Down Box Menu with jQuery and CSS3</h1>
        <ul id="sdt_menu" class="sdt_menu">
            <li>
                <a href="#">
                    <img src="images/2.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">About me</span>
                        <span class="sdt_descr">Get to know me</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Portfolio</span>
                        <span class="sdt_descr">My work</span>
                    </span>
                </a>
                <div class="sdt_box">
                        <a href="#">Websites</a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>
                </div>
            </li>
            <li>
                <a href="#">
                    <img src="images/3.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Inspiration</span>
                        <span class="sdt_descr">Where ideas get born</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/4.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Photos</span>
                        <span class="sdt_descr">I like to photograph</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/5.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Blog</span>
                        <span class="sdt_descr">I write about design</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/6.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Projects</span>
                        <span class="sdt_descr">I like to code</span>
                    </span>
                </a>
                <div class="sdt_box">
                    <a href="#">Job Board Website</a>
                    <a href="#">Shopping Cart</a>
                    <a href="#">Interactive Maps</a>
                </div>
            </li>
        </ul>
    </div>
    <div>
        <span class="reference"> 
```

更多脚本和 css 样式：[www.htmldrive.net](http://www.htmldrive.net/ "HTML DRIVE - 免费 DHMTL 脚本、Jquery 插件、Javascript、CSS、CSS3、Html5 库")

```
 <!-- The JavaScript -->
   <!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easing.1.3.js"></script>-->
    <script type="text/javascript">
        $(function() {
            /**
            * for each menu element, on mouseenter, 
            * we enlarge the image, and show both sdt_active span and 
            * sdt_wrap span. If the element has a sub menu (sdt_box),
            * then we slide it - if the element is the last one in the menu
            * we slide it to the left, otherwise to the right
            */
            $('#sdt_menu > li').bind('mouseenter',function(){
                var $elem = $(this);
                $elem.find('img')
                     .stop(true)
                     .animate({
                        'width':'170px',
                        'height':'170px',
                        'left':'0px'
                     },400,'easeOutBack')
                     .andSelf()
                     .find('.sdt_wrap')
                     .stop(true)
                     .animate({'top':'140px'},500,'easeOutBack')
                     .andSelf()
                     .find('.sdt_active')
                     .stop(true)
                     .animate({'height':'170px'},300,function(){
                    var $sub_menu = $elem.find('.sdt_box');
                    if($sub_menu.length){
                        var left = '170px';
                        if($elem.parent().children().length == $elem.index()+1)
                            left = '-170px';
                        $sub_menu.show().animate({'left':left},200);
                    }   
                });
            }).bind('mouseleave',function(){
                var $elem = $(this);
                var $sub_menu = $elem.find('.sdt_box');
                if($sub_menu.length)
                    $sub_menu.hide().css('left','0px');

                $elem.find('.sdt_active')
                     .stop(true)
                     .animate({'height':'0px'},300)
                     .andSelf().find('img')
                     .stop(true)
                     .animate({
                        'width':'0px',
                        'height':'0px',
                        'left':'85px'},400)
                     .andSelf()
                     .find('.sdt_wrap')
                     .stop(true)
                     .animate({'top':'25px'},500);
            });
        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:33:09.383

有几件事可能是问题所在。以下是要遵循的基本准则：

像这样在标签中写下`<script>`链接：`<head>`

```
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="/your-root-folder/your-script.js"></script>
</head> 
```

然后，在 中`your-script.js`，您需要将函数包装在 $(document).ready(function(){...}

```
$(document).ready(function(){
    //call the function here
}); 
```

**编辑**

您的问题是您链接脚本文件的顺序。jQuery 链接和 Easing 链接需要出现在您的脚本之前。请注意，我给出的示例中`your-script.js`是 after `jquery.min.js`。

**复制并替换所有内容：**

的HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Slide Down Box Menu with jQuery and CSS3</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="Slide Down Box Menu with jQuery and CSS3" />
        <meta name="keywords" content="jquery, css3, sliding, box, menu, cube, navigation, portfolio, thumbnails"/>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
    <style>
        body{
            background:#333 url(bg.jpg) repeat top left;
            font-family:Arial;
        }
        span.reference{
            position:fixed;
            left:10px;
            bottom:10px;
            font-size:12px;
        }
        span.reference a{
            color:#aaa;
            text-transform:uppercase;
            text-decoration:none;
            text-shadow:1px 1px 1px #000;
            margin-right:30px;
        }
        span.reference a:hover{
            color:#ddd;
        }
        ul.sdt_menu{
            margin-top:150px;
        }
        h1.title{
            text-indent:-9000px;
            background:transparent url(title.png) no-repeat top left;
            width:633px;
            height:69px;
        }
    </style>
    <!-- The JavaScript -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="test.js"></script>
</head>

<body>
    <div class="content">
        <h1 class="title">Slide Down Box Menu with jQuery and CSS3</h1>
        <ul id="sdt_menu" class="sdt_menu">
            <li>
                <a href="#">
                    <img src="images/2.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">About me</span>
                        <span class="sdt_descr">Get to know me</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Portfolio</span>
                        <span class="sdt_descr">My work</span>
                    </span>
                </a>
                <div class="sdt_box">
                        <a href="#">Websites</a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>
                </div>
            </li>
            <li>
                <a href="#">
                    <img src="images/3.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Inspiration</span>
                        <span class="sdt_descr">Where ideas get born</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/4.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Photos</span>
                        <span class="sdt_descr">I like to photograph</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/5.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Blog</span>
                        <span class="sdt_descr">I write about design</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/6.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Projects</span>
                        <span class="sdt_descr">I like to code</span>
                    </span>
                </a>
                <div class="sdt_box">
                    <a href="#">Job Board Website</a>
                    <a href="#">Shopping Cart</a>
                    <a href="#">Interactive Maps</a>
                </div>
            </li>
        </ul>
    </div>
    <div>
            <span class="reference">More script and css style: <a href="http://www.htmldrive.net/" title="HTML DRIVE - Free DHMTL Scripts,Jquery plugins,Javascript,CSS,CSS3,Html5 Library">www.htmldrive.net</a>               
            </span>
        </div>
    </body>
</html> 
```

我命名的外部javascript `test.js`：

```
// JavaScript Document
$(function() {
            /**
            * for each menu element, on mouseenter, 
            * we enlarge the image, and show both sdt_active span and 
            * sdt_wrap span. If the element has a sub menu (sdt_box),
            * then we slide it - if the element is the last one in the menu
            * we slide it to the left, otherwise to the right
            */
            $('#sdt_menu > li').bind('mouseenter',function(){
                var $elem = $(this);
                $elem.find('img')
                     .stop(true)
                     .animate({
                        'width':'170px',
                        'height':'170px',
                        'left':'0px'
                     },400,'easeOutBack')
                     .andSelf()
                     .find('.sdt_wrap')
                     .stop(true)
                     .animate({'top':'140px'},500,'easeOutBack')
                     .andSelf()
                     .find('.sdt_active')
                     .stop(true)
                     .animate({'height':'170px'},300,function(){
                    var $sub_menu = $elem.find('.sdt_box');
                    if($sub_menu.length){
                        var left = '170px';
                        if($elem.parent().children().length == $elem.index()+1)
                            left = '-170px';
                        $sub_menu.show().animate({'left':left},200);
                    }   
                });
            }).bind('mouseleave',function(){
                var $elem = $(this);
                var $sub_menu = $elem.find('.sdt_box');
                if($sub_menu.length)
                    $sub_menu.hide().css('left','0px');

                $elem.find('.sdt_active')
                     .stop(true)
                     .animate({'height':'0px'},300)
                     .andSelf().find('img')
                     .stop(true)
                     .animate({
                        'width':'0px',
                        'height':'0px',
                        'left':'85px'},400)
                     .andSelf()
                     .find('.sdt_wrap')
                     .stop(true)
                     .animate({'top':'25px'},500);
            });
        }); 
```

# scala - 为所有 Traversables 丰富我的库

> ID：15709233
> 
> 赞同：6
> 
> 时间：2013-03-29T18:28:47.330
> 
> 标签：scala, types, implicit, enrich-my-library

我试图弄清楚如何编写一个适用于 any 的功能交换函数`Traversable[_]`，给定一个集合和要交换的索引。我想出了以下内容：

```
def swap[A, CC <% Traversable[A]](xs: CC, i: Int, j: Int): Traversable[A] = {
  xs.slice(0, i) ++ 
    xs.slice(j, j+1) ++ 
    xs.slice(i+1, j) ++ 
    xs.slice(i, i+1) ++ 
    xs.slice(j+1, xs.size)
}

swap(List(1,2,3,4,5), 0, 4) // => List(5,2,3,4,1) 
```

我想知道如何使它成为 Traversable 的隐式扩展，使我能够使用`List(1,2,3,4,5).swap(0, 4)`. 我能得到的最接近的是以下内容：

```
import language.implicitConversions
class RichTraversable[A, B <% Traversable[A]](xs: B) {
  def swap(i: Int, j: Int): Traversable[A] = {
    xs.slice(0, i) ++ 
      xs.slice(j, j+1) ++ 
      xs.slice(i+1, j) ++ 
      xs.slice(i, i+1) ++ 
      xs.slice(j+1, xs.size)
  }
} 
implicit def richTraversable[A, B <% Traversable[A]](ys: B)(implicit b: Traversable[A])
  = new RichTraversable[A, B](ys) 
```

不幸的是，这还不是。调用`List(1,2,3,4,5).swap(0, 4)`导致以下错误：

> 错误：List[Int] => Traversable[A] 没有可用的隐式视图

我觉得我一定遗漏了一些东西，或者使问题过于复杂化。有谁知道这应该如何构建？

* * *

*注意：这纯粹是学术性的，不会以任何方式在生产环境中使用。我试图更好地处理 Scala 的类型系统和边界。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:19:12.897

如果您使用的是 Scala 2.10：

```
import scala.collection.generic.CanBuildFrom
import scala.collection.TraversableLike

implicit class TraversableWithSwap[A, Repr <: Traversable[A]](val xs: TraversableLike[A, Repr]) extends AnyVal {
  def swap[That](i: Int, j: Int)(implicit bf: CanBuildFrom[Repr, A, That]): That = {
    val builder = bf(xs.asInstanceOf[Repr])
    builder.sizeHint(xs)
    builder ++= xs.take(i)
    builder ++= xs.slice(j, j + 1)
    builder ++= xs.slice(i + 1, j)
    builder ++= xs.slice(i, i + 1)
    builder ++= xs.drop(j + 1)
    builder.result
  }
} 
```

（这`AnyVal`件事把它变成了一个值类，这意味着编译器会将它重写为一个静态函数，以避免在运行时实际进行包装。）

如果使用早期版本，请删除`extends AnyVal`并使用隐式转换函数而不是`implicit class`：

```
implicit def toTraversableWithSwap[A, Repr <: Traversable[A]](xs: TraversableLike[A, Repr]) = new TraversableWithSwap(xs) 
```

并使用它：

```
scala> Vector(1,2,3,4,5,6,7,8,9).swap(2,5)
res0: scala.collection.immutable.Vector[Int] = Vector(1, 2, 6, 4, 5, 3, 7, 8, 9) 
```

请注意，为所有人定义此函数实际上没有意义，`Traversable`因为某些可遍历对象（如`Set`、`Map`等）是无序的，因此交换两个元素是没有意义的。您可能实际上想要为所有`Seq`或某事定义它。

*另外：*我们也可以同意将其称为“增强我的图书馆”吗？

# time-series - 在 Stata 中使用时间序列运算符时忽略周末

> ID：15709240
> 
> 赞同：0
> 
> 时间：2013-03-29T17:12:47.073
> 
> 标签：time-series, stata, missing-data

在使用 和 等时间序列运算符时，是否可以告诉 Stata 忽略周六和`L`周日`F`？

例如，考虑这个数据集：

```
date   price    L1.price / L2.price (currently)    L1.price / L2.price (wanted!)
tue    5        . / .                              . / .
wed    .        5 / .                              5 / .
thu    7        . / 5                              . / 5
fri    3        7 / .                              7 / .
sat                        [ignore this row]
sun                        [ignore this row]
mon    1        . / .                              3 / 7
tue    9        1 / .                              1 / 3 
```

第三列说明了 Stata 当前的行为。

我希望它表现得像最后一列。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:24:34.177

Stata 支持[商务日历](http://www.stata.com/stata12/business-calendars/)。查看**[日期时间业务日历](http://www.stata.com/bookstore/stata12/pdf/d_datetime_business_calendars.pdf)的手动输入。**他们通过省略周末和节假日来指导您如何制作。

# c# - 如何在 C# 中发帖之前进行身份验证？

> ID：15709242
> 
> 赞同：1
> 
> 时间：2013-03-29T18:29:12.020
> 
> 标签：c#, cookies, httpwebrequest

我有一个本地网站（不是我的），在进行一些查询之前需要进行身份验证。身份验证标头如下所示：

```
Host: 192.168.7.9
Connection: keep-alive    
Content-Length: 185
Origin: http://192.168.7.9
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko)
Chrome/27.0.1453.3 Safari/537.36
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Accept: */*
DNT: 1
Referer: http://192.168.7.9/signin
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Cookie: _FProEnterprise_session=BAh7CzoVbmVlZF93ZWxjb21lX21zZ1Q6D3Nlc3Npb25faWQiJTUxNjI5OGRiMDNmNjU4ZDg4ODE3NmFiZjhmMDU3YTI2OglzaXRlSSIKc2l0ZTAGOgZFRjoObGFuZ19wYXRoSSIHZW4GOwhUOg5vbmVfY2xpY2tGOgx1c2VyX2lkaRE%3D--0c6634a714baa7f0e4795aee89b31f9b7ec0565e 
```

请求正文如下所示：

```
username=myusername&password=mypassword 
```

我对身份验证的工作方式不是很了解。那么首先，这是表单身份验证吗？我猜是这样，因为我必须在网站上输入我的用户名和密码，然后提交才能进入。

其次，为什么已经有 Cookie 了？可能是以前的会话，我可以忽略它吗？

我的目标是在 C# 中重现这一点，以便我可以进行身份​​验证、获取 cookie，然后发布数据并从该站点检索结果。至少那是我认为我需要做的。链接和代码将非常有帮助。如果有帮助，我需要从我的 web.api 应用控制器发出这个请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:33:37.273

那是使用纯 HTTP 身份验证，cookie 来自旧会话。

[http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:35:24.347

您使用`asp.net membership provider`并进行身份验证`Membership.ValidateUser()`，这也将验证表单身份验证。检查它是否经过身份验证`(Context.User.Identity.IsAuthenticated)`-`FormsAuthentication.SignOut();`

您首先需要 sql server 或某种身份验证机制来保存用户名和密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:39:38.293

这似乎是一个 AJAX 请求（X-Requested-With: XMLHttpRequest）。因此，用户必须首先在网页上，也就是会话开始的时间。那是用户获取会话cookie的时间，每次发送该cookie以跟踪会话。该会话也保存在存储登录信息的服务器上——无论您是否登录，以及您是谁。

内容似乎是一个简单的 HTTP 表单，但由于它来自 XMLHttpRequest，它也可以使用 Javascript 创建。这至少是通过 HTTP 发送 POST 数据的标准方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T22:45:08.840

这个链接为我解决了这个问题： [这里](https://stackoverflow.com/questions/3258044/c-sharp-webrequest-http-post-with-cookie-port-from-curl-script)

我的最终代码（在我的 web.api 控制器中看起来像这样）：

```
 public static string JsonWithAuth( string url, string data )
    {
        var bytes = Encoding.Default.GetBytes( data );

        using ( var client = new WebClientEx() )
        {
            var values = new NameValueCollection
            {
                { "username", "myUsername" },
                { "password", "myPassword" },
            };
            // Authenticate
            client.UploadValues( "http://192.168.7.9/main/signin", values );

            // Post data
            var response = client.UploadData( url, "POST", bytes );

            return Encoding.Default.GetString( response );
        }
    } 
```

这是使它起作用的类（来自链接的答案）：

```
/// <summary>
/// A custom WebClient featuring a cookie container
/// </summary>
public class WebClientEx : WebClient
{
    public CookieContainer CookieContainer { get; private set; }

    public WebClientEx()
    {
        CookieContainer = new CookieContainer();
    }

    protected override WebRequest GetWebRequest( Uri address )
    {
        var request = base.GetWebRequest( address );
        if ( request is HttpWebRequest )
        {
            ( request as HttpWebRequest ).CookieContainer = CookieContainer;
        }
        return request;
    }
} 
```

所以我最后的电话是这样的：

```
string sampleInfo = JsonWithAuth(
    "http://192.168.7.9/samples/sample_locations_list",
    "sort=position&dir=ASC&box_id="); 
```

希望对其他人有所帮助！

# haml - 在 SublimeText 2 中从 HTML 自动生成 HAML？

> ID：15709247
> 
> 赞同：0
> 
> 时间：2013-03-29T18:29:24.163
> 
> 标签：haml, sublimetext2, toolchain

当我输入 HAML 时，我想让 SublimeText 在另一个窗口中显示解析我的 HAML 的 HTML 结果。

有谁知道如何做到这一点？例如，在 WebStorm 中，有执行此操作的文件观察程序，但 ST2 中是否内置了类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:59:11.410

我用 Typescript 做了类似的事情，只是我只在保存文件时更新了 Javascript 输出。首先，我想说看看[SublimeBuildOnSave](https://github.com/a-sk/sublime-build-on-save/blob/master/autobuild.py)。这将向您展示如何连接到保存功能并查看正在保存的文件。

当你有了大致的想法后，你可以看看[这里](http://www.sublimetext.com/docs/2/api_reference.html#sublime.View)，然后打开另一个窗格（或使用现有的窗格）来显示编译的输出。

制作一个简单的版本非常简单。如果您想要更高级的功能，例如实时编译，则需要更多的努力，但这并非不可能。但是上面的场景对我来说对 Typescript 来说效果很好。（如果我找到我留下该代码的地方，我会发布它。）

# xml - Win8 Metro UI & 小标志

> ID：15709253
> 
> 赞同：1
> 
> 时间：2013-03-29T18:29:46.433
> 
> 标签：xml, windows-8, live-tile

在我的 Win8 Store 程序中，我想在 Live Tile 上使用小徽标。我将图像 uri 设置为应用程序清单重建并启动它。但我在左下角的瓷砖上看不到小标志。我正在使用下一个 XML 来创建动态磁贴

```
<tile>
    <visual branding="logo">
        <binding template="TileWideSmallImageAndText04">
            <image id="1" src="bla bla bla.png" alt="alt text"/>
            <text id="1">BLA BLA</text>
            <text id="2">BLA BLA</text>
        </binding>
        <binding template="TileSquareText02">
            <text id="1">BLA</text>
            <text id="2">BLA</text>
        </binding>
    </visual>
</tile> 
```

在动态磁贴上设置小徽标我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:15:52.510

签出[这个](https://stackoverflow.com/questions/12707806/windows-8-live-tiles-badge-image-text)答案

这些磁贴更新中的图像取自清单 (Package.appxmanifest) 中的“小徽标”30x30 像素图像。

平铺品牌，也可以是应用程序的名称（如果您愿意，也可以不使用）。此处的一些设计/使用指南 -[磁贴和徽章（Windows 应用商店应用程序）的指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx)。

默认功能通过“小徽标”、“显示名称”/“短名称”和“显示名称”设置进行设置，但您可以在磁贴更新中指定[绑定](http://msdn.microsoft.com/en-us/library/windows/apps/br212854.aspx)权限（例如，隐藏某些磁贴更新的徽标/名称） .

# compilation - 带有 BLAS 的 Fortran 77 - 无法弄清楚如何编译

> ID：15709254
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:29:52.380
> 
> 标签：compilation, blas, fortran77

我试图让 BLAS 在 FORTRAN 77 程序中工作，但到目前为止我一直没有成功，我不知道如何开始。作为参考，我在 Ubuntu 12.10 下执行此操作。

这是我要编译的程序的代码：

```
program blastest
  implicit none
  include 'cblas_f77.h'

end 
```

该文件`cblas_f77.h`位于 中`/usr/include`，`libblas.a`并且`libblas.so`在`/usr/lib`.

您如何配置它以使其正常工作？

### 到目前为止，我已经尝试了以下方法：

注意：添加`-lblas`到任何一个选项都没有任何区别......

只是`f77`，没有选择（真的没想到这会起作用，但到底是什么......）：

```
 $ f77 blastest.f -o blastest
    MAIN blastest:
Cannot open file cblas_f77.h
/usr/bin/f77: aborting compilation 
```

`f77`使用包含选项来查找头文件。现在，它失败了（尽管文件名）没有考虑到 FORTRAN 77 编码，所以前六列是非空的......

```
$ f77 blastest.f -o blastest -I/usr/include
       MAIN blastest:
    Error on line 1 of /usr/include/cblas_f77.h: nondigit in statement label field "/*   "
    Error on line 2 of /usr/include/cblas_f77.h: labeled continuation line (starts " * cbl")
    Error on line 3 of /usr/include/cblas_f77.h: labeled continuation line (starts " * Wri")
    ... 
```

完整输出： http: [//pastebin.com/eZBzh9N5](http://pastebin.com/eZBzh9N5)

切换到`gfortran`, 以更灵活地使用头文件中的间距：

```
$ gfortran blastest.f -o blastest -I/usr/include
   Warning: cblas_f77.h:9: Illegal preprocessor directive
   Warning: cblas_f77.h:10: Illegal preprocessor directive
   Warning: cblas_f77.h:12: Illegal preprocessor directive
   ... 
```

完整输出： http: [//pastebin.com/P71Di9pR](http://pastebin.com/P71Di9pR)

好的，所以我猜我需要`-cpp`让预处理器工作。这给出了与上面完全相同的输出。此外，如果您继续阅读，您会看到完整的输出，编译器仍在抱怨标记的延续线进一步向下......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:44:19.843

我相信您正在使用 C 库“cblas”。我会用这个命令重新编译：

```
gfortran blastest.f -o blastest -L/usr/lib -lblas 
```

and this should sort it all out. I do not believe (though i am not sure) that you need to make use of the "include" statement.

# python - Skype4Py WAV 输入

> ID：15709259
> 
> 赞同：1
> 
> 时间：2013-03-29T18:30:18.953
> 
> 标签：python, audio, skype, skype4py

非常感谢您花时间帮助我解决这个问题。

Skype4py 模块 InputDevice 中似乎有错误。它不允许您输入任何 WAV 文件。你们中的一个更高级的程序员可以看看它。我将检查此页面以获取更新并回答您对此问题的任何问题。

[https://github.com/awahlig/skype4py/issues/14](https://github.com/awahlig/skype4py/issues/14) [https://github.com/awahlig/skype4py/issues/15](https://github.com/awahlig/skype4py/issues/15)

非常感谢您的时间，

犀牛

# python - 如何在python中实现trie的remove功能？

> ID：15709261
> 
> 赞同：1
> 
> 时间：2013-03-29T18:30:24.157
> 
> 标签：python, python-2.7, trie

我已经在 python 中阅读了 trie 的以下实现： [https ://stackoverflow.com/a/11016430/2225221](https://stackoverflow.com/a/11016430/2225221)

并尝试为其设置删除功能。基本上，即使一开始我也遇到了问题：如果你想从树中删除一个词，它可以有子“词”，或者它可以是另一个词的“子词”。

如果你用“del dict[key]”删除，你也删除了上面提到的这两种词。谁能帮助我，如何正确删除所选单词（让我们假设它在特里）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-10-22T19:01:30.160

我认为最好递归地做，代码如下：

```
def remove(self, word):
    self.delete(self.tries, word, 0)

def delete(self, dicts, word, i):
    if i == len(word):
        if 'end' in dicts:
            del dicts['end']
            if len(dicts) == 0:
                return True
            else:
                return False
        else:
            return False
    else:
        if word[i] in dicts and self.delete(dicts[word[i]], word, i + 1):
            if len(dicts[word[i]]) == 0:
                del dicts[word[i]]
                return True
            else:
                return False

        else:
            return False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:51:22.447

基本上，要从特里删除一个单词（因为它在您链接到的答案中实现），您只需要删除它的`_end`标记，例如：

```
def remove_word(trie, word):
    current_dict = trie
    for letter in word:
        current_dict = current_dict.get(letter, None)
        if current_dict is None:
            # the trie doesn't contain this word.
            break
    else:
        del current_dict[_end] 
```

但是请注意，这并不能确保 trie 具有最小的大小。删除单词后，可能会在左侧的 trie 中存在不再被任何单词使用的分支。这不会影响数据结构的正确性，它只是意味着 trie 可能会消耗比绝对必要更多的内存。您可以通过从叶节点向后迭代并删除分支来改进这一点，直到找到一个具有多个子节点的分支。

*编辑：*这是一个想法，您可以如何实现一个删除函数，该函数还剔除任何不必要的分支。可能有一种更有效的方法，但这可能会让你开始：

```
def remove_word2(trie, word):
    current_dict = trie
    path = [current_dict]
    for letter in word:
        current_dict = current_dict.get(letter, None)
        path.append(current_dict)
        if current_dict is None:
            # the trie doesn't contain this word.
            break
    else:
        if not path[-1].get(_end, None):
            # the trie doesn't contain this word (but a prefix of it).
            return
        deleted_branches = []
        for current_dict, letter in zip(reversed(path[:-1]), reversed(word)):
            if len(current_dict[letter]) <= 1:
                deleted_branches.append((current_dict, letter))
            else:
                break
        if len(deleted_branches) > 0:
            del deleted_branches[-1][0][deleted_branches[-1][1]]
        del path[-1][_end] 
```

本质上，它首先找到将要删除的单词的“路径”，然后向后迭代以找到可以删除的节点。然后它会删除可以删除的路径的根（这也会隐式删除`_end`节点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-08T07:39:49.900

```
def remove_a_word_util(self, word, idx, node):
    if len(word) == idx:
        node.is_end_of_word = False
        return bool(node.children)

    ch = word[idx]
    if ch not in node.children:
        return True

    flag = self.remove_a_word_util(word, idx+1, node.children[ch])
    if flag:
        return True

    node.children.pop(ch)
    return bool(node.children) or node.is_end_of_word 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T21:06:01.187

处理这种结构的一种方法是通过[递归](https://www.google.com/search?q=recursion&rlz=1C1CHBF_enUS733US734&oq=recursion&aqs=chrome..69i57j69i59j69i60.3271j0j7&sourceid=chrome&ie=UTF-8#dobs=recursion)。在这种情况下，递归的好处在于它会压缩到 trie 的底部，然后将返回的值通过分支向上传递。

下面的函数就是这样做的。它转到叶子并删除该`_end`值，以防输入单词是另一个单词的前缀。然后它传递一个布尔值 ( `boo`)，表示它`current_dict`仍在外围分支中。一旦我们达到当前 dict 有多个孩子的点，我们删除适当的分支并将 boo 设置为，`False`这样每个剩余的递归都不会做任何事情。

```
def trie_trim(term, trie=SYNONYMS, prev=0):
    # checks that we haven't hit the end of the word
    if term:
        first, rest = term[0], term[1:]
        current_length = len(trie)
        next_length, boo = trie_trim(rest, trie=trie[first], prev=current_length)

        # this statement avoids trimming excessively if the input is a prefix because
        # if the word is a prefix, the first returned value will be greater than 1
        if boo and next_length > 1:
            boo = False

        # this statement checks for the first occurrence of the current dict having more than one child
        # or it checks that we've hit the bottom without trimming anything
        elif boo and (current_length > 1 or not prev):
            del trie[first]
            boo = False

        return current_length, boo

    # when we do hit the end of the word, delete _end
    else:
        del trie[_end]
        return len(trie) + 1, True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-24T15:07:14.333

有点长，但我希望这有助于回答您的问题：

```
class Trie:
    WORD_END = "$"

    def __init__(self):
        self.trie = {}

    def insert(self, word):
        cur = self.trie
        for char in word:
            if char not in cur:
                cur[char] = {}
            cur = cur[char]
        cur[Trie.WORD_END] = word

    def delete(self, word):
        def _delete(word, cur_trie, i=0):
            if i == len(word):
                if Trie.WORD_END not in cur_trie:
                    raise ValueError("'%s' is not registered in the trie..." %word)
                cur_trie.pop(Trie.WORD_END)
                if len(cur_trie) > 0:
                    return False
                return True
            if word[i] not in cur_trie:
                raise ValueError("'%s' is not registered in the trie..." %word)
            cont = _delete(word, cur_trie[word[i]], i+1)
            if cont:
                cur_trie.pop(word[i])
                if Trie.WORD_END in cur_trie:
                    return False
                return True
            return False
        _delete(word, self.trie)

t = Trie()
t.insert("bar")
t.insert("baraka")
t.insert("barakalar")

t.delete("barak") # raises error as 'barak' is not a valid WORD_END although it is a valid path.
t.delete("bareka") # raises error as 'e' does not exist in the path.
t.delete("baraka") # deletes the WORD_END of 'baraka' without deleting any letter as there is 'barakalar' afterwards.
t.delete("barakalar") # deletes until the previous word (until the first Trie.WORD_END; "$" - by going backwards with recursion) in the same path (until 'baraka'). 
```

# android - 如何通过 android 应用在 Web 服务器 appengine 上管理/存储图像？

> ID：15709262
> 
> 赞同：1
> 
> 时间：2013-03-29T18:30:26.640
> 
> 标签：android, google-app-engine, google-cloud-sql

我正在开发 android 应用程序，该应用程序需要为用户注册一些与每个用户相关的详细信息和图像。我正在使用 Google Appengine 和 Google Cloud SQL 来实现它。当我需要上传与用户详细信息相关的图像时，我被卡住了。

我无法弄清楚我应该如何管理服务器上的图像。在我的搜索中，我知道最好创建文件系统来存储图像并将该路径与 Cloud SQL 中用户的相应详细信息相关联。

是否有可能，appengine 和 Google cloud SQL bcz 我已经读到我们无法在 appengine 服务器上管理文件系统，因为它不利于[写入权限](https://developers.google.com/appengine/kb/java#writefile)，如果是，请指导我如何通过任何资源或教程。

或任何替代解决方案??????

# three.js - 基于 alpha 混合两个立方体纹理的片段着色器不起作用

> ID：15709263
> 
> 赞同：0
> 
> 时间：2013-03-29T18:30:29.303
> 
> 标签：three.js

我有一个问题完全在暗示我。我正在尝试将两个立方体纹理混合在一起。但由于某种原因，我似乎无法根据 alpha 将一种纹理与另一种混合。该函数如下所示：

`vec4 baseColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );`

`vec4 atmosphereColor = textureCube( tAtmosphere, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );`

`vec4 texelColor = mix( atmosphereColor, baseColor, atmosphereColor.a );`

`gl_FragColor = texelColor;`

所有涉及的材质都有depthWrite: true, depthTest: true和transparent: true。一个是包含 6 个图像的纹理，另一个是 WebGLRenderTarget。WebGLRenderTarget 是使用 Alpha 通道创建的。

`format: THREE.RGBAFormat`

单独他们都按预期工作。例如，如果我使用`gl_FragColor = atmosphereColor;`，则 alpha 是可见的。但是，一旦我尝试将一种与另一种混合，就不会应用任何 alpha。例如，当我这样做时：

`gl_FragColor = vec4( baseColor.r, baseColor.g, baseColor.b, atmosphereColor.a );`

它仍然不会使用提供的 alpha 变量（它只是将其设置为 1.0） - 即使我知道该值存在并且在变化，因为我只是将 gl_FragColor 设置为大气颜色并且可以看到它变化 D:>

有任何想法吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:50:50.617

我能够找到问题的根源。它与渲染器的 clearAlpha 参数有关。对于我的情况，这需要设置为 0 而不是 1。

# javascript - 使用嵌套对象创建复杂表单的 JSON 表示并更新主干模型

> ID：15709265
> 
> 赞同：3
> 
> 时间：2013-03-29T18:30:33.063
> 
> 标签：javascript, json, backbone.js

我有以下骨干模型

```
var Page = Backbone.Model.extend({
    defaults: {
        id: null,
        metadata: {
            name: '',
            title: '',
            ...
        },
        children: []
        parent: null
    },
    urlRoot: '/api/page',
    initialize: function () {}
}); 
```

当我保存以下表单时，我需要创建此表单的 JSON 表示并更新主干模型，然后再将其保存到服务器。我需要这样做，因为我的表单是动态创建的，所以我不能使用硬编码选择器来查找表单名称。下面是一个示例表格。

```
<form>
    <label>Name:</label>
    <input type="text" name="metadata.name" value="">
    <label>Title:</label>
    <input type="text" name="metadata.title" value="">
    <label>Slug:</label>
    <input type="text" name="metadata.slug" value="">
    <label>Url:</label>
    <input type="text" name="metadata.url" value="">
    <button type="submit">Save</button>
</form> 
```

基于 HTML 表单数据更新主干模型的最有效方法是什么？

**编辑**

我[在 stackoverflow 找到了这个答案](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery#8407771)，使用方括号而不是对象之间的点。我认为这种技术效果很好，但也许有类似的方法可以使用点符号来序列化表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:35:24.603

I ended up using [this](https://github.com/maxatwork/form2js) neat little library for converting my form to a JavaScript object

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T19:43:34.127

Having an idea what you have in mind, I'd just remove the `Model` defaults and leave the fields that's always there (or remove it period). Those fields are unknown at this point so setting defaults is not ideal in your case scenario. Technically speaking, the `Model` can just be updated to any field(s) that you want it to be and will adapt to whatever fields you feed it from the server.

The crucial stage is setting the `Model` initially since this dictates what attributes are contained within the `Model`. Since you mentioned that the form is created dynamically, you can create the `Model` via the JSON object that represents the data that goes along with the form you're rendering.

When it's time to save it back to the server, your `Model` will have all the attributes it needs to do the update. That's the first way.

```
model.save(); 
```

Or you can serialize the `Form` as a whole when it's time to save the changes. Basically, create a new `Model` at run-time.

```
var form= $('#myForm'); 
var data = JSON.stringify(form.serializeArray());

/**Create a new instance of the Model then and perform an update. */
var model = new MyModel(data);
model.save(); 
```

# ruby-on-rails - 视图中的 Rails 缓存——无法序列化为 memcached 的 Ruby 对象

> ID：15709266
> 
> 赞同：0
> 
> 时间：2013-03-29T18:30:33.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached

我有一个页面，我在其中迭代多个所有者的一组旅行并在页面上显示所有者图像。我想在视图中缓存整个所有者集，而不仅仅是单个部分。

```
<%
  Rails.cache.fetch("trip_owners_#{trip.id.to_s}", expires_in: 7.days) do
    trip.owners.limit(3).each do |owner|
%>
  <%=render_user_card(owner)%>
<% 
     end
   end
%> 
```

`render_user_card`基本上呈现个人所有者的一部分。

```
def render_user_card(user, options = {})
  return "" unless user
  render :partial => 'users/user_card'
end 
```

问题是我不断收到此错误：

```
You are trying to cache a Ruby object which cannot be serialized to memcached. 
```

据我了解，我必须缓存一个字符串。但是，我不知道该怎么做。如何在旅途中为我的所有用户存储组合的部分，并且仍然能够呈现部分？如果我将它存储为字符串，它将呈现为字符串，而不是带有图像的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:52:24.053

我能够弄清楚如何做到这一点。见下文。

```
<%=
  Rails.cache.fetch("trip_owners_#{trip.id.to_s}", expires_in: 7.days) do
    output = ""
    trip.owners.limit(3).each do |owner|

     output += render_user_card(owner)

    end
    output
  end.html_safe
%> 
```

# java - 使用 printf 以 Java 表格格式打印

> ID：15709269
> 
> 赞同：1
> 
> 时间：2013-03-29T18:30:38.387
> 
> 标签：java, format, printf

我正在构建一个库存控制系统，在此系统上它将具有打印库存列表的功能，库存存储在链接列表中。

我怎样才能让列表以表格格式打印，如果项目上的描述很长，它仍将保持表格格式。

目前这是我拥有的代码：

```
String print = String.format("%-15s %-30s %20s %18s \t\t %-18s\n", "ItemID", "Description", "Price","Qnty", "Re-Order Level")
                + String.format("%-15s %-30s %20s %18s \t\t %-18s\n", "******", "***********", "*****", "****","**************"); 
```

但是如果 StockItems 描述上的文字比其他的长，它会使表格看起来变形。

这是 StockItem 类的格式方法：

```
String format = String.format("%-15s %-30s %20.2f %18d \t\t %-18d", itemID, itemDesc, price, quantity, reOrderLevel); 
```

# java - Floyd-Warshall 负循环。如何找到所有未定义的路径？

> ID：15709277
> 
> 赞同：13
> 
> 时间：2013-03-29T18:31:25.540
> 
> 标签：java, shortest-path, floyd-warshall

我已经实现了 Floyd Warshall 算法并且它可以工作，但问题是我不知道如何找到所有未定义的路径。我在网上搜索过，但我只能找到如何检测图表是否有负循环的答案。

```
vector< vector <int> > floyd_warshall(vector< vector<int> > d, int n){
    for(int i = 0; i < n; i++) d[i][i] = 0;

    for(int i = 0; i < n; i++){
        for(int j = 0; j < n; j++){
            for(int k = 0; k < n; k++){
                if(d[j][i] + d[i][k] < d[j][k] and d[j][i] != INF and d[i][k] != INF){
                    d[j][k] = d[j][i] + d[i][k];
                }
            }
        }
    }

    return d;
} 
```

在图上运行算法后：

```
from: to:   weight:
0     1      1
1     2     -1
2     1     -1
1     3      1
4     0      1 
```

我得到邻接矩阵：

```
 | 0     1     2     3     4
--|----------------------------
0 | 0    -1    -2    -2     INF
1 | INF  -2    -3    -3     INF
2 | INF  -3    -4    -4     INF
3 | INF   INF   INF   0     INF
4 | 1    -2    -3    -7     0 
```

我知道如果节点 i 是负循环的一部分，它在矩阵中的位置 d[i][i] 处具有负值。因此，如果我检查矩阵的对角线，我可以找到属于负循环的所有节点。因此，如果我们查看上面的示例，我们可以看到节点 1 和 2 是负循环的一部分。问题是我想找出哪些路径已定义，哪些未定义。如果您可以通过负循环从 A 到 B，那么路径的长度应该是未定义的，因为它可以任意小。

所以问题是，我怎样才能找到所有未定义的路径？

我希望算法返回矩阵：（而不是上面的那个）

```
 | 0     1     2     3     4
--|----------------------------
0 | 0    -INF   -INF    -INF  INF
1 | INF  -INF   -INF    -INF  INF
2 | INF  -INF   -INF    -INF  INF
3 | INF   INF    INF     0    INF
4 | 1    -INF   -INF    -INF  0 
```

其中 d[i][j] = INF 表示 i 和 j 之间没有 Path，-INF 表示 i 和 j 之间存在任意小路径（路径在某处经过负循环），否则为 d[i ][j] i 和 j 之间的最短长度。

我正在考虑测试每条路径，但这可能太慢了。必须有一些标准的方法来解决这个问题，对吧？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T17:59:01.667

好吧，我找到了解决我自己问题的方法。

```
for(int i = 0; i < n; i++)
    for(int j = 0; j < n; j++)    // Go through all possible sources and targets

        for(int k = 0; d[i][j] != -INF && k < n; k++)
            if( d[i][k] != INF && // Is there any path from i to k?
                d[k][j] != INF && // Is there any path from k to j?
                d[k][k] < 0)      // Is k part of a negative loop?

                d[i][j] = -INF;   // If all the above are true
                                  // then the path from i to k is undefined 
```

我认为它应该有效，而且似乎也有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-07T15:48:05.087

我有一个[视频](https://www.youtube.com/watch?v=4NQ3HnhyNfQ)可以准确解释 Floyd-Warshall 算法的工作原理。本质上，Floyd-Warshall 算法用于在具有正边权或负边权重的加权图中找到所有节点对之间的最短路径。

下面的算法接受一个邻接矩阵，其中 Double.POSITIVE_INFINITY 用于表示两个节点不连接。对于每个节点，您也可能希望为其自身初始化权重 0。

此方法更新初始矩阵以指示所有节点对之间的最小距离。如果最短路径任意小，则答案存储为 Double.NEGATIVE_INFINITY。如果两个节点不能互相到达，那么它仍然是 Double.POSITIVE_INFINITY。此实现运行 Floyd Warshall 两次，如果路径长度小于之前，则我们处于负循环。

```
static void floydWarshall(double[][] dist) {

  int n = dist.length;

  // Compute shortest paths
  for (int k = 0; k < n; k++)
    for (int i = 0; i < n; i++)
      for (int j = 0; j < n; j++)
        if (dist[i][k] + dist[k][j] < dist[i][j])
          dist[i][j] = dist[i][k] + dist[k][j];

  // Identify negative cycles
  for (int k = 0; k < n; k++)
    for (int i = 0; i < n; i++)
      for (int j = 0; j < n; j++)
        if (dist[i][k] + dist[k][j] < dist[i][j])
          dist[i][j] = Double.NEGATIVE_INFINITY;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T12:21:18.850

只要输入图中不存在负循环，Floyd-Warshall 算法就会输出正确的结果。在存在负循环的情况下，计算最短（简单）路径是一个 NP-hard 问题，Floyd-Warshall 算法不会输出正确的结果。

但是可以通过检查矩阵的对角线中是否存在负项来检测负循环的存在。这是在该算法的第 8 行和第 9 行中完成的：

```
1\. M[i, j] := ∞ ∀i 6= j
2\. M[i, i] := 0 ∀i
3\. M[i, j] := c((i, j)) ∀(i, j) ∈ E(G)

4\. for i := 1 to n do
5\.   for j := 1 to n do
6\.     for k := 1 to n do
7\.       if M[j, k] > M[j, i] + M[i, k] 
          then M[j, k] := M[j, i] + M[i, k]

8\. for i := 1 to n do
9\. if M[i, i] < 0 then return(’graph contains a negative cycle’) 
```

[来源](http://www.or.uni-bonn.de/~hougardy/paper/Floyd-Warshall.pdf)

# javascript - 仅在 Internet Explorer 中显示 Div（所有版本）

> ID：15709281
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:31:46.033
> 
> 标签：javascript, jquery, html, css

随着 Internet Explorer 放弃使用条件语句，我对如何将元素或样式单独应用到 IE 感到困惑。这不再适用于 IE10：

```
<!--[if IE]>
<![endif]--> 
```

所以这是一个蓝色和红色框的jsfiddle：http: [//jsfiddle.net/74yK9/1/](http://jsfiddle.net/74yK9/1/)

如何使蓝色框仅出现在 Internet Explorer（所有版本）中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:49:09.383

您可以使用 jQuery 执行此操作，不要忘记也包含[jQuery Migrate 插件](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)：

```
if ($.browser.msie) {

    // For IE only
    $('#bluebox').show();
} else {

    // all other browsers
    $('#bluebox').hide();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:53:12.613

使用 Javascript，您可以使用仅在 IE 中可用的条件编译：

```
if (Function('/*@cc_on return true@*/')()) {
    // Is IE
} 
```

从此处修改：[对于某些情况，例如 Internet Explorer 特定的 CSS 或 Internet Explorer 特定的 JavaScript 代码，如何仅针对 Internet Explorer 10？](https://stackoverflow.com/questions/9900311/how-do-i-target-only-ie10-for-certain-situations-like-ie-specific-css-or-ie-spec)

所以使用它的方式是这样的：

```
var isIE = false;
if (Function('/*@cc_on return true@*/')()) {
    isIE = true;
    // or
    document.documentElement.className += " isIE";
} 
```

这会在 Javascript 中设置一个布尔值和/或`isIE`向您的元素添加一个类`<html>`......这将是`<html class="isIE">`. 所以这意味着你可以检查`isIE`Javacript 中的布尔值，或者基于`class`类似的样式：

```
html.isIE body {
    color: #111;    /* Only applied for IE*/
} 
```

这使用特征检测（某种）并且不使用`userAgent`嗅探。`userAgent`嗅探是一种选择，但不可靠，并且在现代 jQuery 中已弃用/删除。

有关条件编译的更多信息：[http](http://www.javascriptkit.com/javatutors/conditionalcompile.shtml) ://www.javascriptkit.com/javatutors/conditionalcompile.shtml和[http://msdn.microsoft.com/en-us/library/ie/121hztk3%28v=vs.94% 29.aspx](http://msdn.microsoft.com/en-us/library/ie/121hztk3%28v=vs.94%29.aspx)

# python - 对 Python 中的函数对象用法感到困惑

> ID：15709282
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:31:46.687
> 
> 标签：python, function, object, parameters

我目前正在使用“Think Python”学习python，其中我通过了如下的一段代码，并且作为一个初学者程序员，我不明白它是如何工作的，请向我解释下面的代码以及它背后的各种概念。

练习：函数对象是可以分配给变量或作为参数传递的值。例如，do_twice 是一个将函数对象作为参数并调用它两次的函数：

```
def do_twice(f):
    f()
    f()

# Here’s an example that uses do_twice to call a function named print_spam twice.

def print_spam():
    print 'spam'

do_twice(print_spam) 
```

此代码将 o/p 作为垃圾邮件我不知道如何，我想更深入地解释这个概念

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:32:38.690

Python 函数是一流的对象。就像其他对象一样，它们可以分配给变量并传递。

```
>>> def print_spam():
...     print 'spam'
... 
>>> print_spam
<function print_spam at 0x105722ed8>
>>> type(print_spam)
<type 'function'>
>>> another_name = print_spam
>>> another_name
<function print_spam at 0x105722ed8>
>>> another_name is print_spam
True
>>> another_name()
spam 
```

In the above example session I play around with the `print_spam` function object, assigning it to `another_name`, then invoking it via that other variable.

All that the code you quoted from Think Python does is pass `print_spam` as a parameter to the function `do_twice`, which calls it's parameter `f` twice.

# python - Python If 语句从不计算为真

> ID：15709288
> 
> 赞同：1
> 
> 时间：2013-03-29T18:32:16.783
> 
> 标签：python, if-statement, equality

如果我的问题看起来微不足道，我深表歉意。我宁愿在聊天室里问这个；但是，我现在的名声太低了，所以我无法在 Python 聊天室问任何问题。我目前正在为一堂课学习 Python，老师给了我们一些练习题来帮助我们快速学习。我现在正在构建的函数需要一个数字列表并将其转换为字符串。我遇到的问题是我的 if 语句永远不会评估为真。我尝试了几种处理变量的方法，并添加了许多打印语句以查看它们是否应该相等，但无济于事。再次提前感谢。我保证我只是在研究和尝试了很多方法后才问，但现在不知所措......这是我的代码：

```
def nlist2string(nlist):
    characters = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
    numbers = ['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25']
    newList = []
    nListLen = len(nlist)         # var msgLen will be an integer of the length

    print 'Number list before conversion: ', nlist

    index = 0
    while index < nListLen:
        print 'Index at: ', nlist[index]
        num = nlist[index]
        print 'Is num equal to nlist indexed? ', num
        newNum = num % 26

        i = 0
        while i < 26:
            num1 = newNum
            num2 = numbers[i]
            print 'num1 = ', num1
            print 'num2 = ', num2
            if (num1 == num2):
                newList.append(characters[i])
                print 'Here is the current newList: ', newList
            else:
                print 'They never equal each other.'
            i = i + 1
        index = index + 1
    return newList

    numMessage = [28, 0, 33]
    convertedNumMsg = nlist2string(numMessage)
    print 'Number list after conversion: ', convertedNumMsg 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:35:26.847

您正在尝试将整数与字符串进行比较，请尝试将您的定义更改为`numbers`以下内容：

```
numbers = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25] 
```

或者，`numbers = range(26)`.

目前，在比较`num1`and时`num2`，您将进行比较，例如`4 == '4'`，这永远不会是真的：

```
>>> 4 == '4'
False 
```

作为更改创建`numbers`列表方式的替代方法，您可以在比较之前转换`num2`为整数或`num1`字符串，因此要么`num1 == int(num2)`要么`str(num1) == num2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:48:00.457

你有一个字符串列表，数字 0-25。
在 Python 中，字符串永远不会等于数字，因此，`num1 == num2`始终为 False。

所以，应该是

```
numbers = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25] 
```

更合适（并且会起作用）。

甚至更好

```
numbers = range(26) 
```

* * *

如果您不想编辑`numbers`的值，请使用以下条件：

```
if num1 == int(num2): 
```

这会将 num2 转换为整数，这是您想要做的。
此外，在这种情况下，您可以使用[map (Built-in Function)](http://docs.python.org/2/library/functions.html#map)，以提高可读性，如下所示：

```
numbers = map(str, range(26)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T18:48:33.113

上面的答案正确地解决了这个问题，但作为一般提示：将值列表减少为单个值时，请使用该`reduce`函数。我当然意识到这是一个学习练习，但了解这项工作的相关内置功能会很有用。这使您的功能更短：

```
def nlist2string(nlist):

    def convert_to_alpha(s):
        if isinstance(s,str): //check if s is already a string
            return s          //if it is, return it unchanged
        else:
            return str(unichr(s+97)) //otherwise, get the corresponding alphabet
                                     //and return that
    def reduce_func(x,y):
        //convert the numbers to alphabets
        //and join the two together
        return convert_to_alpha(x) + convert_to_alpha(y) 

    return reduce(reduce_func, nlist) 
```

例如，来自以下的输出：

```
l = [7,4,11,11,14]
print nlist2string(l) 
```

是字符串`"hello"`。

reduce 函数有两个参数，一个用于将列表折叠成单个值的函数，以及一个列表。

作为一个更简单的例子`reduce`：

```
function add(x,y):
    return x + y

print reduce(add, [1, 4, 3, 10, 5])
//Output: 23 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T18:37:30.227

在 Python 中，字符串文字和数字是不同类型的对象，并且不比较相等。

```
1 == "1" 
```

返回假。

您正在遍历数字字符串列表，但它不是实际数字列表。

您可以使用 range() 函数（它是 python 内置的）来生成一个数字列表，而不是手动输入它。

# c++ - 基本 - shared_ptr 到值向量的向量

> ID：15709291
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:32:25.433
> 
> 标签：c++, pointers, vector, c++11, shared-ptr

我有一个只包含几个整数的对象向量的向量。

外部向量包含数百个向量，这些向量包含数千到数十万个数据对象。

我正在使用一个涉及很多 shared_ptr 的库，所以这就是我将要使用的。

如何存储它以便将数据存储到堆中？

```
std::vector<std::shared_ptr<std::vector<Data>>>
std::vector<std::vector<std::shared_ptr<Data>>> 
```

ETC

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:35:32.627

`new`将某些内容存储在您在 c++ 或c 中使用的堆上`malloc`。尽管我相信向量实现确实使用了堆，因为向量是一个动态大小的容器。因此，实际上，如果您将元素添加到 elemenet 已经在堆上的向量，除非它是一个指针，在这种情况下，只有指针在堆上，而不是指针指向的元素，正如 @Oswald 指出的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:43:40.723

> 如何存储它以便将数据存储到堆中？

如果您需要*引用语义*，即如果您需要容器中的值作为值的别名，这些值也从代码的其他部分引用，并且在代码的一部分中所做的修改应该对其他部分可见修改`Data`对象的别名，我会说这是正确的容器定义：

```
std::vector<std::vector<std::shared_ptr<Data>>> 
```

对于您关于存储来自何处的问题，`std::vector` *始终*在连续的存储区域中动态分配其元素，无论它们是`shared_ptr`s、`vector`s 还是`Data`s。

但是，我建议您考虑是否真的需要引用语义，或者`Data`在容器内按值存储类型的对象是否不够：

```
std::vector<std::vector<Data>> 
```

This would simplify your code and you would also get rid of the `shared_ptr` memory and run-time overhead.

Whether or not you need reference semantics is something that only you, as the designer of your application, can tell. The information you provided is not enough for me to tell it without uncertainty, but hopefully this answer gave you a hint on the kind questions you should ask yourself, and what would be the answer in each case.

# ruby - 与 Enum#detect `nil` 输出混淆

> ID：15709295
> 
> 赞同：0
> 
> 时间：2013-03-29T18:32:44.143
> 
> 标签：ruby

[`enum#detect`](http://www.rubydoc.info/stdlib/core/Enumerable#detect-instance_method)说：

> 将枚举中的每个条目传递给阻塞。返回第一个不为假的块。如果没有对象匹配，则调用 ifnone 并在指定时返回其结果，否则返回 nil。

现在我正在尝试以下内容：

```
nil.call
#NoMethodError: undefined method `call' for nil:NilClass
#       from (irb):13
#       from C:/Ruby200/bin/irb:12:in `<main>'

(1..10).detect(x = 2) { |i| i % 5 == 0 and i % 7 == 0 }
#NoMethodError: undefined method `call' for 2:Fixnum
#       from (irb):15:in `detect'
#       from (irb):15
        from C:/Ruby200/bin/irb:12:in `<main>' 
```

现在我的问题是为什么下面没有发生同样的错误：

```
(1..10).detect(x = nil) { |i| i % 5 == 0 and i % 7 == 0 }
#=> nil
(1..10).detect(x = nil) { |i| p x; i % 5 == 0 and i % 7 == 0 }
#nil
#nil
#nil
#nil
#nil
#nil
#nil
#nil
#nil
#nil
#=> nil 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:37:33.960

如果您查看该方法的源代码（单击文档页面上的“查看源代码”），您会发现它仅在参数**不是**`detect`时才尝试执行：`call` **`nil`**

 **```
if (!NIL_P(if_none)) {
  return rb_funcall(if_none, id_call, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:38:01.240

> 如果没有对象匹配，则调用 ifnone 并在指定时返回其结果，否则返回 nil。

我认为您对这句话的解析与预期的不同。这里的意思是：

```
if no object matches
  if ifnone is set
    return ifnone.call
  else
    return nil
  end
end 
```

If you pass in `nil` as the argument, that counts as `ifnone` not being set, so it is not called. It will only be called if you pass a value other than `nil` for it.**

# javascript - 使用 javascript 开关的随机标语生成器

> ID：15709296
> 
> 赞同：0
> 
> 时间：2013-03-29T18:32:44.863
> 
> 标签：javascript

我有小问题。我正在学习 javascript，我想使用`switch`.

所以我创建了这个html代码

```
<body onload="rndqu()">
    <div id="head"> <a href="index.html">Mira's place<a><br>
            <h2>&#8220;<span id="quote"></span>&#8221;</h2>
    </div>
</body> 
```

并使用了这个 Javascript

```
var qu;
var slogan;
function rndqu(n){
    var random = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
    };  
    qu = random(1, 3);
}
switch(qu){
    case 1:
        slogan = "Here is the 1";
        break;
    case 2:
        slogan = "Here is the 2";
        break;
    case 3:
        slogan = "Woah";
        break;
    default:
        slogan = "Really?";
}
document.getElementById("quote").innerHTML = slogan; 
```

我不明白为什么它不起作用。有人能帮我吗？谢谢！这是它的jsfiddle [http://jsfiddle.net/NX3cz/](http://jsfiddle.net/NX3cz/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:37:21.130

我会为此使用数组而不是 switch 语句，以使其更灵活。例如：

```
var quotesList = ["I'm a great guy!", "Not even kidding.", "Just incredible."];

var randQuote = function(quotes) {
    var choice = Math.floor(Math.random() * quotes.length);
    return quotes[choice];
}

document.getElementById("quote").innerHTML = randQuote(quotesList); 
```

这样，报价数组的大小可以自由更改，而无需更改任何代码。

演示：[jsfiddle](http://jsfiddle.net/gSEMT/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:38:00.543

您将部分代码留在了`rndqu()`函数之外。我在这里分叉并纠正了你的小提琴：http: [//jsfiddle.net/BwJ7s/](http://jsfiddle.net/BwJ7s/)

这是更正后的 JS 代码：

```
var qu;
var slogan;
function rndqu(n)
{
    var random = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
    };  
    qu = random(1, 3);

    switch(qu){
        case 1:
            slogan = "Here is the 1";
            break;
        case 2:
            slogan = "Here is the 2";
            break;
        case 3:
            slogan = "Woah";
            break;
        default:
            slogan = "Really?";
    }
    document.getElementById("quote").innerHTML = slogan;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:48:11.033

在这里修复[http://jsfiddle.net/NX3cz/13/](http://jsfiddle.net/NX3cz/13/)

```
var qu;
var slogan;
function rndqu(min, max){

    qu =  Math.floor(Math.random() * (max - min + 1)) + min;

    switch(qu){
        case 1:
            slogan = "Here is the 1";
            break;
        case 2:
            slogan = "Here is the 2";
            break;
        case 3:
            slogan = "Woah";
            break;
        default:
            slogan = "Really?";
    }
    document.getElementById("quote").innerHTML = slogan;
}

rndqu(1, 3); 
```

您的代码过于复杂也请注意，在 jsfiddle 中不要添加`body onload="()"`函数。Jsfiddle 为您做到这一点。

如果您想`onbodyload`在真实网页上执行此操作，请将您的代码包装在以下内容中：

```
window.onload = (function(){
    //your code goes here
}) 
```

或将您的脚本包含在 html 文件的底部。

最好的做法是尽可能避免在您的 html 中使用内联 javascript。

# ssl - 通过 SSL 的 IE8 附件下载问题

> ID：15709297
> 
> 赞同：4
> 
> 时间：2013-03-29T18:32:50.783
> 
> 标签：ssl, internet-explorer-8, download, attachment

通过 SSL 在 IE8 上下载 excel 文件时，我们收到错误消息：“无法从 MyHostName 下载 Document.ashx。无法打开此 Internet 站点。请求的站点不可用或找不到。请稍后再试。”

我们尝试了几种解决方案，但除了 regedit（这是不可行的）之外，它们都不起作用。

1）按照[http://support.microsoft.com/kb/323308](http://support.microsoft.com/kb/323308)尝试了注册表编辑，它工作。但是，这不是一个可行的解决方案。2）根据此链接[http://support.microsoft.com/kb/815313](http://support.microsoft.com/kb/815313)尝试了解决方案，他们说如果您“复制快捷方式”并通过浏览器URL运行它，文件将下载。但是，这个解决方案并不一致，有时会起作用，但大部分都不起作用。

3) 将我们的 java 控制器代码更新为 response.setHeader("Cache-Control", " must-revalidate, private "); response.setDateHeader("Expires", -1) 但是当我们查看标题时，它仍然显示为“cache-control: no-cache”。这个解决方案也不起作用

4) 取消选中 IE 8 浏览器上的“不将加密文件保存到磁盘”选项。但这也行不通。[http://blogs.msdn.com/b/ieinternals/archive/2010/04/21/internet-explorer-may-bypass-cache-for-cross-domain-https-content.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/04/21/internet-explorer-may-bypass-cache-for-cross-domain-https-content.aspx) 和 [http://support。 microsoft.com/kb/2549423](http://support.microsoft.com/kb/2549423)

还在互联网上搜索了上述建议的各种选项，但没有一个是完整的证据。

如果有人有上述以外的解决方案。请分享它。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-05T07:44:42.310

我有同样的问题，我发现，一个标题：

```
Pragma: private 
```

会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T22:45:15.897

问题是，如果服务器向浏览器发送一个禁用缓存的 http 标头，Explorer 就会出错。我们也尝试了你说的所有解决方案，但没有运气，但分析 http 响应，我们看到应用程序服务器`no-cache= "Set-Cookie"`自动添加了 http 标头并禁用了 IE8 缓存......可以在 AS 上进行设置，但在我们的例子中，我们做不到，所以我们改变了我们的 cookie 管理代码服务器端，我们解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T21:27:35.243

确保“ **no-store** ”和“ **no-cache** ”按顺序出现在您的标头中。如果反向，IE8 会呕吐。

查看本文末尾的更新：[Internet Explorer 无法下载 https://something](http://blogs.msdn.com/b/ieinternals/archive/2009/10/03/internet-explorer-cannot-download-over-https-when-no-cache.aspx)

我发现我还需要删除“pragma”标题才能使其工作。显然，pragma 不适合响应，尽管我不知道是否有任何旧浏览器需要它。

资料来源：[Pragma 和 Cache-control 标头之间的区别？](https://stackoverflow.com/questions/10314174/difference-between-pragma-and-cache-control-headers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-01T14:35:15.643

我遇到了这个问题，下面的条目解决了这个问题

response.setContentType("application/vnd.ms-xls; charset=utf-8");

response.setHeader("内容配置","附件;文件名="+文件名);

response.setHeader("Pragma", "public");

response.setHeader("Cache-Control", "public, max-age=3800");

# python - 如何在python中获取Box的授权码

> ID：15709299
> 
> 赞同：1
> 
> 时间：2013-03-29T18:32:57.583
> 
> 标签：python, box-api

我被困在“获取访问令牌”部分。在文档中，我需要一个“代码”。但是我怎样才能得到授权码呢？我正在使用python。

```
 authorize_url = 'https://www.box.com/api/oauth2/authorize?response_type=code&client_id=MY_CLIENT_ID'

    def myRequest(path, method=None, options=None):
        response = requests.request(method, path, **options)
        return json.dumps(response.json())

    code = myRequest(
        path=authorize_url,
        method='GET',
        options={
            'headers':{
                'response_type': 'code',
                'client_id': CLIENT_ID,
                }
        }
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:00:10.317

您必须使用一个模块来发出 HTTP 请求，例如[requests](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://python-requests.org/&ei=bABWUeDmIsaXiAKQ3IHABw&usg=AFQjCNEPNMe0O8m1A2DNQhDhvix4qFygsw&bvm=bv.44442042,d.cGE)或[urllib并按照](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://docs.python.org/library/urllib.html&ei=TgBWUcrKIaWqiALmwoGQCQ&usg=AFQjCNHsuNbKzXZ9czlCxbyWmxjYG6EgJg&bvm=bv.44442042,d.cGE)[此处](http://developers.box.com/oauth)指示的说明进行操作。

我在这里设置了一个非常简单的 Flask 应用程序：[https ://github.com/seanrose/box-oauth2-example](https://github.com/seanrose/box-oauth2-example)

在您将用户发送到 Box 的授权 URL 后，“代码”会返回到您的应用程序。

# php - 从函数返回值创建新的类实例 - 单行

> ID：15709302
> 
> 赞同：4
> 
> 时间：2013-03-29T18:33:08.347
> 
> 标签：php, class

是否存在基于返回的函数字符串创建类的新实例的单线（是的，我喜欢它们）？

```
$obj = new {functionThatReturnsAStringValue()}(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T18:53:09.353

我明白你想要什么，但我认为你可以这样做：

```
$obj = ($class = functionThatReturnsAStringValue()) ? new $class() : null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:56:19.140

```
function getObject()
{
  return 'DateTime';
}

$datetime = call_user_func(function ($obj) { return new $obj; }, getObject()); 
```

# javascript - 鼠标悬停时 D3 颜色变化使用分类（“活动”，真）

> ID：15709304
> 
> 赞同：5
> 
> 时间：2013-03-29T18:33:13.007
> 
> 标签：javascript, svg, d3.js, onmouseover, heatmap

我是 js 和 D3 的新手。我已经生成了一个热图，并想使用 D3 的 on.mouseover 更改图块的颜色。我可以显式更改颜色，但想使用 CSS 活动规则。可能很容易解决。任何帮助将不胜感激。完整代码如下。

谢谢。

```
<!DOCTYPE html>
<meta charset="utf-8">
<head>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<title>MJ-Heatmap</title>
<header>
<H1>Country By District_Port_Nme Heatmap</H1>
<p></p>
</header>   
<style>
body {
font: 10px sans-serif;
}
.label {
font-weight: bold;
}
.tile {
shape-rendering: crispEdges;
}
.axis path,
.axis line {
fill: none;
stroke: #000;
shape-rendering: crispEdges;
}
<!-- CSS active state not working -- >
.tile active {
fill: red;
}
</style>
</head>
<body>
<script type="text/javascript">
var buckets = [
{country:"Brazil", distrinct_port_nme:"Baltimore, Maryland", sum_teu: 2, sum_weight: 18585, count_shipments: 1}, 
{country:"Colombia", distrinct_port_nme:"Baltimore, Maryland", sum_teu:28, sum_weight:258028, count_shipments:11}, 
{country:"Brazil", distrinct_port_nme:"Chicago, Illinois", sum_teu: 2, sum_weight: 18585, count_shipments: 1}, 
{country:"Colombia", distrinct_port_nme:"Houston, Texas", sum_teu:14, sum_weight: 95995, count_shipments: 7}, 
{country:"Brazil", distrinct_port_nme:"Long Beach, California", sum_teu: 2, sum_weight: 18584, count_shipments: 1}, 
{country:"China", distrinct_port_nme:"Long Beach, California", sum_teu: 2, sum_weight: 19180, count_shipments: 1}, 
{country:"Colombia", distrinct_port_nme:"Long Beach, California", sum_teu:12, sum_weight:117873, count_shipments: 6}, 
{country:"Singapore", distrinct_port_nme:"Long Beach, California", sum_teu: 6, sum_weight: 77176, count_shipments: 4}, 
{country:"Belgium", distrinct_port_nme:"Los Angeles, California", sum_teu: 2, sum_weight: 17780, count_shipments: 1}, 
{country:"Brazil", distrinct_port_nme:"Los Angeles, California", sum_teu: 2, sum_weight: 18584, count_shipments: 1}, 
{country:"Colombia", distrinct_port_nme:"Los Angeles, California", sum_teu: 7, sum_weight: 52046, count_shipments: 5}, 
{country:"Hong Kong", distrinct_port_nme:"Los Angeles, California", sum_teu: 2, sum_weight: 19180, count_shipments: 1}, 
{country:"India", distrinct_port_nme:"Los Angeles, California", sum_teu:48, sum_weight:460563, count_shipments:24}, 
{country:"Singapore", distrinct_port_nme:"Los Angeles, California", sum_teu:12, sum_weight:115384, count_shipments: 6}, 
{country:"Brazil", distrinct_port_nme:"New York, New York", sum_teu: 4, sum_weight: 27032, count_shipments: 2}, 
{country:"Colombia", distrinct_port_nme:"New York, New York", sum_teu: 8, sum_weight: 42885, count_shipments: 4}, 
{country:"India", distrinct_port_nme:"New York, New York", sum_teu:14, sum_weight:129116, count_shipments: 7}, 
{country:"Singapore", distrinct_port_nme:"New York, New York", sum_teu:42, sum_weight:560628, count_shipments:27}, 
{country:"Brazil", distrinct_port_nme:"Newark, New Jersey", sum_teu: 2, sum_weight: 18584, count_shipments: 1}, 
{country:"Colombia", distrinct_port_nme:"Newark, New Jersey", sum_teu:83, sum_weight:785372, count_shipments:42}, 
{country:"India", distrinct_port_nme:"Newark, New Jersey", sum_teu:62, sum_weight:587654, count_shipments:31}, 
{country:"Brazil", distrinct_port_nme:"Norfolk, Virginia", sum_teu: 8, sum_weight: 33622, count_shipments: 4}, 
{country:"India", distrinct_port_nme:"Norfolk, Virginia", sum_teu: 2, sum_weight: 17780, count_shipments: 1}, 
{country:"Brazil", distrinct_port_nme:"Philadelphia, Pennsylvania", sum_teu: 2, sum_weight: 20160, count_shipments: 1}
];
// margins
var margin = {top: 20, right: 90, bottom: 30, left: 100, left_padding: 100},
width = 700 - margin.left - margin.right,
height = 500 - margin.top - margin.bottom;
// axes and color scale
var x = d3.scale.ordinal()
.rangeBands([0, width], .2),
y = d3.scale.ordinal()
.rangeBands([height,0], .2),
z = d3.scale.linear().range(["lightgrey", "steelblue"]);
var xStep = .5,
yStep = 50;
var svg = d3.select("body").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + 0 + "," + margin.top + ")");
// Compute the scale domains.
x.domain(buckets.map(function(d){return d.country}));
y.domain(buckets.map(function(d){return d.distrinct_port_nme}));
z.domain([0, d3.max(buckets.map(function(d){return d.count_shipments}))]);
// Display the tiles for each bucket.
svg.selectAll(".tile")
.data(buckets)
.enter().append("rect")
.attr("class", "tile")
.attr("x", function(d) { return x(d.country) + margin.left+margin.left_padding; })
.attr("y", function(d) { return y(d.distrinct_port_nme); })
.attr("width",x.rangeBand())
.attr("height",y.rangeBand())
.style("stroke","goldenrod")
.style("fill", function(d) { return z(d.count_shipments); })
.on("mouseover", function() { d3.select(this).classed("active", true ) })       // classed("active",boolean) not working
.on("mouseout",  function() { d3.select(this).classed("active", false) });
//  .on("mouseover", function() { d3.select(this).style("fill", "aliceblue");});    // this change work fine
//  .on("mouseout", function(){d3.select(this).style("fill", "white");});           // this change work fine
svg.selectAll("text")
.data(buckets)
.enter().append("text")
.text("text")
.attr("x", function(d) { return x(d.country) + margin.left + margin.left_padding + x.rangeBand()/2; })
.attr("y", function(d) { return y(d.distrinct_port_nme) + y.rangeBand()/2; })
.attr("dx",0)
.attr("dy",".35em")
.attr("text-anchor","middle")
.style("fill","black").attr("font-size","14").attr("font-weight","Bold")
.text( function(d) { return d.count_shipments; });
// Add a legend for the color values.
var legend = svg.selectAll(".legend")
.data(z.ticks(6).slice(1).reverse())
.enter().append("g")
.attr("class", "legend")
.attr("transform", function(d, i) { return "translate(" + 0 + "," + (10 + i * 20) + ")"; });
legend.append("rect")
.attr("width", 20)
.attr("height", 20)
.style("fill", z);
legend.append("text")
.attr("x", 26)
.attr("y", 10)
.attr("dy", ".35em")
.text(String);
svg.append("text")
.attr("class", "label")
.attr("x", 0)
.attr("y", 0)
.attr("dy", ".35em")
.text("count_shipments");
// Add an x-axis with label.
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate("+ (margin.left+margin.left_padding) + "," + height + ")")
.attr("text_anchor", "top")
.call(d3.svg.axis().scale(x).orient("bottom"))
.append("text")
.attr("class", "label")
.attr("x", width-10)
.attr("y", -5)
.attr("text-anchor", "end")
.text("Country");
// Add a y-axis with label.
svg.append("g")
.attr("class", "y axis")
.attr("transform", "translate("+ (margin.left+margin.left_padding) + "," + 0 + ")")
.attr("text-anchor","right")
.call(d3.svg.axis().scale(y).orient("left"))
.append("text")
.attr("class", "label")
.attr("y", 3)
.attr("dy", ".71em")
.attr("text-anchor", "end")
.attr("transform", "rotate(-90)")
.text("distrinct_port_nme");
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T20:21:44.717

**编辑**

首先，您的 CSS 略有偏差是对的。

```
.tile active {
  fill: red;
} 
```

应该：

```
.tile.active {
  fill: red;
} 
```

然后，就像我在下面解释的那样，你应用到元素的填充

```
.style("fill", function(d) { return z(d.count_shipments); }) 
```

最终优先于`active`类应用的填充。

但是，与我最初建议的不同，您可以通过简单地交换来解决它`style`，`attr`因此您需要：

```
.attr("fill", function(d) { return z(d.count_shipments); }) 
```

（可能也应该为中风这样做）。

这是一个[更新的工作 jsFiddle](http://jsfiddle.net/WEsUe/1/)

* * *

**原帖**

我怀疑它以应有的方式工作——即，正在适当地添加/删除具有相关填充的“活动”类——并且您可以通过右键单击并检查开发工具中的元素来验证这一点。

我认为真正的问题是您还直接在元素上设置了填充（在`.on("mouseover"...)`调用之前的一行），它总是会覆盖您的类应用的填充。通常在 CSS 中你可以（不是说你应该）使用`!important`关键字来强制它接受类应用的填充。但我很确定这不适用于 SVG（与普通的 HTML 元素相反）。

所以，我认为你唯一的选择是：

```
.style("fill", function(d) { return z(d.count_shipments); })
.on("mouseover", function() {
  d3.select(this)
    .attr('fill', '') // Un-sets the "explicit" fill (might need to be null instead of '')
    .classed("active", true ) // should then accept fill from CSS
})
.on("mouseout",  function() {
  d3.select(this)
    .classed("active", false)
    .attr('fill', function(d) { return z(d.count_shipments); }) // Re-sets the "explicit" fill
  }); 
```

希望这有效....

# css - Why has my CSS rule been overridden?

> ID：15709305
> 
> 赞同：1
> 
> 时间：2013-03-29T18:33:15.313
> 
> 标签：css, media-queries

I have a media query telling my `footer` to have `background-color:none` only in Landscape. When in portrait it is a transparent red. For some reason it is ignoring the landscape query. ![Here is a screenshot from inspector.](../Images/6e5f611749a80dad9566caadee306957.png)

What could possibly be causing this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:36:15.720

The problem isn't with the media query, it's with the `background-color` declaration. `none` is not a valid value for `background-color`, so the declaration gets ignored and the `rgba()` value used instead.

To remove a background color, use `transparent` instead of `none`.

# javascript - 查找最大和最小数组Javascript

> ID：15709307
> 
> 赞同：0
> 
> 时间：2013-03-29T18:33:24.017
> 
> 标签：javascript

我试图找出比较两个数组的最佳方法。

本质上，我想知道最大和最小的数组以进行进一步处理。到目前为止，这是我这样做的代码：

```
merge: function(arrOne, arrTwo) {

   if(arrOne == null || arrTwo == null) throw new Error();

    var bigArr = arrOne.length > arrTwo.length ? arrOne : arrTwo,
        smallArr = bigArr.length == arrOne.length ? arrTwo : arrOne;

    console.log(bigArr);
    console.log(smallArr);

} 
```

虽然这可行，但我猜必须有一种更简单、更有效的方法来做到这一点。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:03:05.323

最好的方法是不使用三元组，而是写一个正常的条件。

```
var bigArr, smallArr;
if(arrOne.length > arrTwo.length){
    bigArr = arrOne;
    smallArr = arrTwo;
}else{
    smallArr = arrOne;
    bigArr = arrTwo;
} 
```

可读，快速，显然没有错误。

如果您*真的*想使用三元运算符（例如避免重复声明*和*声明后赋值），也许正确的解决方案是重复（或缓存）条件：

```
var   bigArr = arrOne.length > arrTwo.length ? arrOne.length : arrTwo.length,
    smallArr = arrOne.length > arrTwo.length ? arrTwo.length : arrOne.length; 
```

有点可读，显然没有错误，在声明时分配。

如果你想避免`if` *和*条件重复，它仍然是可能的。但是，代码不可读（主要是因为使用了逗号运算符），因此不应在生产代码中使用。不过，它可能对代码高尔夫仍然有用，我将适当地命名变量。小心轻放：

```
l=(a.length>b.length)?(s=b,a):(s=a,b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:49:27.800

如果数组之间存在未定义的值，您的代码将失败。如果您需要处理这种情况，您可能想尝试一种完全不同的方法。

```
var myArray = new Array();
myArray[100] = true;
console.log(myArray.length); // returns 101 
```

# javascript - 我的 div 显示/隐藏代码在静态 HTML 页面上运行良好，但在 Wordpress 3.5.1 页面上不起作用

> ID：15709309
> 
> 赞同：2
> 
> 时间：2013-03-29T18:33:34.960
> 
> 标签：javascript, jquery, wordpress

这是代码的浓缩版本，实际版本太长无法发布，但这足以代表概念。我正在使用它来根据锚点表示的几个选择来切换吉他图，锚点在 href="" 中具有相应的 id。在花了几天时间让它在静态 html 页面上正常工作后，该脚本将无法在我打算使用它的 Wordpress 页面中工作。我已经尝试使用头部或内联脚本（这不重要） - 但无论哪种方式它都不会起作用。我知道 Wordpress 和某些插件使用 Jquery，因此可能存在版本不匹配导致冲突。我（还）不是 javascript 方面的专家，但我知道俗话说有几种方法可以给猫剥皮，我只需要找到一种与 Wordpress 配合得很好的方法。

```
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {

    var divswitch = $('div.diagram_container a');

    divswitch.bind('click',function(event){
        var $anchor = $(this);
        var ids = divswitch.each(function(){
           $($(this).attr('href')).hide();   
        });
        $($anchor.attr('href')).show();
        event.preventDefault();
    });

});
</script>

<style>
.diagram {
    margin: 0;
    width: 100%;
}
.diagram_container {
    width: 100%;
}
</style>

    <div id="RH_RW_Div" class="diagram_container" style="float:left; display:block;">
        <div class="diagram_menu">
          <a class="checked" href="#RH_RW_Div"><span class="checkbox_label">Right Handed</span></a> 
          <a class="unchecked" href="#LH_RW_Div"><span class="checkbox_label">Left Handed</span></a>
        </div>
        <img class="diagram" src='images/RH_RW.gif' /><br />
    </div>

    <div id="LH_RW_Div" class="diagram_container" style="float:left; display:none;">
        <div class="diagram_menu">
          <a class="unchecked" href="#RH_RW_Div"><span class="checkbox_label">Right Handed</span></a> 
          <a class="checked" href="#LH_RW_Div"><span class="checkbox_label">Left Handed</span></a>
        </div>
        <img class="diagram" src='images/LH_RW.gif' /><br />
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:44:49.677

我的猜测是您的 Wordpress 安装或插件已经在头脑中加载了 jQuery。检查它是否存在，如果存在，请不要再次调用它。

如果还是不行，而且你有这个网站在线，把链接发给我，我会看看。

调用 jQuery 两次通常会导致问题。如果您特别需要 1.8.3（[wp_register_script](http://codex.wordpress.org/Function_Reference/wp_register_script)和[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)），还有一种加载 jQuery 和覆盖 Wordpress 版本的正确方法，但我认为您还不需要走这条路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:01:38.217

Wordpress 默认使用[**jQuery.noConflict()**](http://api.jquery.com/jQuery.noConflict/)。这是为了确保使用该`$`变量的其他库不会发生冲突。这就是为什么你的控制台说它不是一个功能。

但是，很明显，该`jQuery`变量仍然有效，您应该使用它，并`$`自己将变量传递给您的函数以启用`jQuery`.

所以你的代码应该是这样的：

```
jQuery(document).ready(function($){

     // Your functions go here

}); 
```

# php - mod重写具有特定长度的正则表达式

> ID：15709310
> 
> 赞同：1
> 
> 时间：2013-03-29T18:33:35.867
> 
> 标签：php, apache, .htaccess

好的。我的 .htaccess 文件中有这个正则表达式来重写/任何字母数字到 index.php?id=alphanumeric 字符串。

```
 RewriteEngine on

 RewriteRule ^([A-Z-a-z0-9]+)$ index.php?id=$1 
```

我遇到的问题是，当一些其他变量被添加到该字符串时，一切都停止工作。

例如：

www.someaddress.com/ABCDEFGH 工作正常。

www.someaddress.com/ABCDEFGH&othervariable=123 失败。

我知道我的字母数字字符串总是 8 个字符。有没有办法让正则表达式只匹配 8 并保留字符串的其余部分？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:36:26.517

试试这个：

```
 RewriteRule ^([A-Za-z0-9]{8}) index.php?id=$1 
```

请注意和之间的字符`-`不是必需的`Z``a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:37:16.113

像这样的东西应该可以解决问题。你想删除 $ 让它忽略其余的变量。

RewriteRule ^([A-Z-a-z0-9]{8}) index.php?id=$1

# c++ - 枚举类型检查

> ID：15709317
> 
> 赞同：2
> 
> 时间：2013-03-29T18:33:59.363
> 
> 标签：c++, c, eclipse, optimization, arduino

我有一个函数可以获取预定义的特定枚举类型的操作数。出于安全原因，我希望该函数测试操作数是否属于特定的枚举类型。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:38:55.100

如果你`enum`看起来像：

```
enum /* ... */
{
  V1,
  V2,
  /* ... */ 
  VN
}; 
```

您可以使用以下条件：

```
if (v < V1 || v > VN)
{
  /* invalid */
} 
```

但是，如果您提供特定值，则必须检查每个值。宏可以帮助你一点。

在这一点上，标准还有一个方面，它说，在：

```
enum /* ... */
{
  V1 = 0,
  V2 = 2,
}; 
```

`1`是类型的有效值`enum /*...*/`。因此，您必须详细说明“枚举类型检查”对您意味着什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:38:38.247

[C](http://en.wikipedia.org/wiki/C_%28programming_language%29)中的枚举只是一个整数，因此无法检查它是否属于特定的枚举类型。

# mongodb - 计算 mongo 数据库中的字段名称（不是值）

> ID：15709318
> 
> 赞同：0
> 
> 时间：2013-03-29T18:34:05.580
> 
> 标签：mongodb

有没有办法计算 mongodb 中的字段名称？我有一个 mongo 文档数据库，其中包含其他嵌入式文档。以下是数据可能看起来的示例。

```
{   
    "incident": "osint181",
    "summary":"Something happened",
    "actor": {
        "internal": {
            "motive": [
                "Financial"
            ],  
         "notes": "", 
        "role": [
            "Malicious"
        ],  
        "variety": [
            "Cashier"
        ]   
        }   
    }   
} 
```

另一个文档可能如下所示：

```
{   
    "incident": "osint182",
    "summary":"Something happened",
    "actor": {
        "external": {
            "motive": [
                "Financial"
            ],  
         "notes": "", 
        "role": [
            "Malicious"
        ],  
        "variety": [
            "Hacker"
        ]   
        }   
    }   
} 
```

如您所见，演员在第二个文档中已从内部更改为外部。我想做的是计算每种类型演员的事件数量。我的第一次尝试是这样的：

```
db.public.aggregate( { $group : { _id : "$actor", count : { $sum : 1 }}} ); 
```

但这给了我整个子文档，并且计数反映了有多少文档完全相同。相反，我希望获得内部计数和外部计数等。有没有一种优雅的方法可以做到这一点？如果不优雅，有人可以给我一个肮脏的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:01:44.073

此类问题的最佳选择是使用 mongoDB 的 map-reduce ，它将允许您遍历 mongoDB 文档的所有键，并且可以轻松添加复杂的逻辑。在此处查看 map reduce 示例：http: [//docs.mongodb.org/manual/applications/map-reduce/](http://docs.mongodb.org/manual/applications/map-reduce/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:30:05.233

这是我根据 Devesh 的提示得出的答案。我创建了一个 map 函数，它查看 actor 的值并使用我定义的 isEmptyObject 函数检查文档是否为空 JSON 对象。然后我使用 mapReduce 遍历集合并检查操作字段是否为空。如果对象不为空，那么我不会返回键的值，而是返回键本身，该键将被命名为内部、外部或其他名称。

The magic here was the scope call in mapReduce which makes it so that my isEmptyObject is in scope for mapReduce. The results are written to a collection which I named temp. After gathering the information I want from the temp collection, I drop it.

```
var isEmptyObject = function(obj) {
    for (var name in obj) {
        return false;
    }   
    return true;
};  

var mapFunction = function() {
    if (isEmptyObject(this.action)) {
        emit("Unknown",1); }
    else { 
        for (var key in this.actor) { emit(key,1); } } };

var reduceFunction = function(inKeys,counter) {
    return Array.sum(counter); };

db.public.mapReduce(mapFunction, reduceFunction, {out:"temp", scope:{isEmptyObject:isEmptyObject}} );

foo = db.temp.aggregate(
    { $sort : { value : -1 }});

db.temp.drop();
printjson(foo) 
```

# jquery - jquery 切换以显示响应式设计中的隐藏元素

> ID：15709320
> 
> 赞同：0
> 
> 时间：2013-03-29T18:34:20.667
> 
> 标签：jquery, responsive-design, toggle

我使用 CSS 在某些断点处显示和隐藏元素。我还使用 jquery 切换来显示/隐藏元素。如果我将浏览器大小调整为移动设备大小，一切正常，但是当我调整浏览器大小以使其更大时，我使用 Jquery 隐藏的元素随后被隐藏，在我的网页中留下空白。我需要一种无缝的方式来在窗口调整大小或改变方向时重置为原始值。

例如，我有一个用 CSS 为平板电脑或移动设备隐藏的菜单 div，我使用 CSS 而不是菜单显示菜单图标。然后，我在选择图标时使用 Jquery 显示/隐藏菜单。如果我将浏览器放大或将手机或平板电脑的方向更改为横向，如果用户使用图标隐藏菜单，则菜单不会显示。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:36:39.147

我也有同样的问题。这是我的解决方案的一个非常简单的版本：

```
$(window).on('resize',function(){
    if($(this).width() > 800){
        $('#Menu').removeAttr('style');
    }
}); 
```

或者菜单应该显示的宽度。这摆脱了 jQuery 通过点击按钮放入的“显示/隐藏”内联 CSS。

我会说我的解决方案涉及更多组件......在一个函数中，我注意到`.on()`处理程序为移动版本应用了一百万次，所以我`.off()`之前有`.on('click')`......类似的东西。但是核心组件是去掉了jQuery给菜单的样式属性，这样你给它的CSS就不再被覆盖了。

# java - ClassName.this 的目的是什么？

> ID：15709321
> 
> 赞同：15
> 
> 时间：2013-03-29T18:34:21.873
> 
> 标签：java, android, this

我已经看到`ClassName.this`在 SO 和其他在线地方的很多 Android 代码中使用（而不是简单的`this`关键字）来引用类的当前实例。我知道您可能决定以`this`类名开头以消除任何歧义，但根据我的经验，这样做通常是不必要的，因为实际上只能`this`指一件事——代码正在执行的类的当前实例. 还有什么我忽略的建议在`this`关键字前面加上一个类名总是更好的做法，或者在任何情况下它实际上是必要的？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-29T18:35:27.037

要从内部类或匿名类内部访问封闭类的实例，您需要使用以下语法：

```
EnclosingClass.this.someMethod(); 
```

*   请参阅[Java 教程：嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-29T18:38:18.553

> 这实际上只能指一件事。

这是不正确的。

> 还有什么我忽略的建议在 this 关键字前面加上类名总是更好的做法，或者是否有任何必要的情况？

是和是，分别。特别是，`ClassName.this`需要从内部类中获取`this`.

例如：

```
 myButton.setOnClickListener(new Button.OnClickListener() {  
    public void onClick(View v) {
          startActivity(new Intent(MyActivity.this, MyOtherActivity.class));
        }
     }); 
```

在这里，使用`this`而不是`MyActivity.this`将失败并出现编译错误，抱怨这`Button.OnClickListener`不是`Intent`构造函数的有效第一个参数。`MyActivity.this`返回包含该实例的`this`实例。`MyActivity``Button.OnClickListener`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T04:27:35.540

我没有那么多回购来发表评论，所以把它写下来作为答案。

我认为这个问题的基本关注点是检查在开发人员已经知道不会有任何内部类调用的情况下，使用 classname.this 而不是 'this' 关键字是否存在任何优势。

Of course in case of inner class scenarios ,you have to use classname.this to call its enclosing class. but there can be scenraio that you already know that this particular code won't be called inside any inner class.so why to specify classname.this,instead just use 'this'.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-05T19:36:46.157

Window win = SwingUtilities.getWindowAncestor(RedPanel.this);

Usually you'll see code like this inside of an inner class. So say you have a class called RedPanel that subclasses a JPanel, and say inside of this you have an anonymous inner class that implements ActionListener. If you want to refer to the "this" RedPanel object inside of the ActionListener, you can't use just "this" since it refers to the ActionListener not to RedPanel. To get a handle on the RedPanel "this" you'll need to use RedPanel.this.

# c++ - Xcode在函数中使用时如何使用IBOutlet进行标记

> ID：15709323
> 
> 赞同：4
> 
> 时间：2013-03-29T18:34:33.630
> 
> 标签：c++, objective-c, macos, cocoa, function

我与我的标签有联系：

```
@property (weak) IBOutlet NSTextField *scoreBox; 
```

正确，我正在尝试像这样访问它：

```
void namedfunction(button) {

    if (button == button) {
        score = score + 100;
        [scoreBox setIntValue:score];
      // ^ error
    }
} 
```

我收到了这个错误：

> AppDelegate.m:52:10：使用未声明的标识符“scoreBox”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:36:05.543

采用

```
[_scoreBox setIntValue:score]; 
```

或者

```
[self.scoreBox setIntValue:score]; 
```

**还要检查您是否最终比较了相同的按钮，如 : `button==button`。*

编辑2：

因为您的代码是：

```
int perus(int nappi){

} 
```

将其更改为：

```
- (NSInteger *)perus:(NSInteger *)nappi{
    //all should do inside, rest are OK.
} 
```

~~编辑：~~

我不确定以下内容，因为在[这里找到了这个](http://www.cocoabuilder.com/archive/cocoa/158356-iboutlets-out-of-scope-in-functions.html)

**我建议你切换到 obj-c 方法，而不是使用 C 函数来处理这类事情。*

A C function is just that, a block of code not attached to anything else. Your instance variable is attached to each Controller object. So when you call printChatter() there is no way to know which instance of Controller you want to use. You could add an object variable to your function:

```
void namedfunction(const void *button, const void *appDele){
    NSTextField *myButton=[appDele scoreBox];
    ....
} 
```

# java - Play Framework 2.1 Java/Eclipse：自动重新加载不起作用

> ID：15709325
> 
> 赞同：5
> 
> 时间：2013-03-29T18:34:38.557
> 
> 标签：java, eclipse, macos, playframework, jnotify

问题/秒：

*   视图正在编译，但在浏览器中点击刷新不会显示更改，除非手动重新启动服务器。
*   对控制器的更改使用自动编译，`~run`但只有手动重新启动服务器才会更新服务器上的内容。
*   只有在手动重新启动服务器后才会显示对`routes`under的更改。`conf`

背景：

*   在 OSX 10.8.3 上运行
*   使用 Eclipse Juno 4.2.2
*   服务器使用启动`play ~run`
*   **只有**重新启动服务器才会显示视图、控制器、路由的更改

为了能够进行更改而不必每次尝试都重新启动服务器（没有成功）：

*   在控制台中：`clean`-> `eclipse`->`~run`
*   在控制台中：`clean`-> `compile`->`~run`
*   关闭/重新启动计算机
*   勾选`Refresh using native hooks or polling`-> 删除`classes_managed`并`Referenced Libraries`手动添加

问题：

*   **如何恢复自动重新加载功能？**
*   **这个问题如何在 Eclipse 之外的 IDE 上解决？**

更多的信息：

*   [Playframework重新加载不起作用Mac OSX](https://stackoverflow.com/questions/15512229/playframework-reload-not-working-mac-osx)
*   [在网络文件系统上使用 Play 框架自动重新加载](https://stackoverflow.com/questions/14299300/auto-reloading-with-play-framework-on-a-network-filesystem)

他们都指出 JNotify 是自动重新加载不起作用的原因。一个答案（没有足够的代表写评论）提到如何“破解 Play 框架的 sbt 插件以使 PlayReloader 特征表现得好像 JNotify 不可用一样”。一个人怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T18:34:14.820

The following got Play's auto-reload to working with Eclipse:

1.  In Eclipse Preferences go to `General` → `Workspace`. Uncheck `Build automatically`.
2.  Restart OS X.

For whatever reason, I had to restart OS X to get akim's suggestion to take hold.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T11:30:57.193

I got around this problem by changing the project configuration in Eclipse. I unchecked the "Allow output folders for source folders" option, which means that Eclipse will compile classes to the "bin" folder. This prevents the Eclipse compilation from interfering with the Play compilation. The only downside is that you have to remember to redo it if you ever do `play eclipse` again.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:03:19.363

按照 akim 的建议，在 Eclipse Preferences 中禁用`Build automatically`under`General\Workspace`可以解决问题并在上述所有问题情况下重新启用 Play! 的自动重新加载功能。

# c++ - C++ 包装重载函数

> ID：15709327
> 
> 赞同：2
> 
> 时间：2013-03-29T18:34:46.673
> 
> 标签：c++, overloading

我想为一堆重载函数创建一个包装

```
void print(int i);
void print(long i);
void print(char* s);
...

void myPrint(int x, int y, ??? toPrint){
    moveTo(x,y);
    print(toPrint);
} 
```

我该怎么做？可以不用模板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:39:59.123

如果您**不能使用模板**，您可以采用与`myPrint`您相同的方法`print`。

```
void myPrint(int x, int y, int toPrint){
    moveTo(x,y);
    print(toPrint);
}

void myPrint(int x, int y, long toPrint){
    moveTo(x,y);
    print(toPrint);
}

void myPrint(int x, int y, char* toPrint){
    moveTo(x,y);
    print(toPrint);
} 
```

由于您正在进行嵌入式编码，因此您也可以原谅自己使用宏。

```
#define MYPRINT( x, y, toPrint ) \
    do {                         \
        moveTo(x,y);             \
        print(toPrint);          \
    } while(false) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:40:38.910

我想你可以写三个单独的包装器。它相当于模板将产生的内容（即有点代码膨胀）。

```
void myPrint(int x, int y, int toPrint) {
    moveTo(x,y);
    print(toPrint);
}

void myPrint(int x, int y, long toPrint) {
    moveTo(x,y);
    print(toPrint);
}

void myPrint(int x, int y, char *toPrint) {
    moveTo(x,y);
    print(toPrint);
} 
```

我不一定推荐这个，因为代码隐藏宏现在非常不受欢迎，但您可以使用预处理器宏作为模板替换。

```
#define DEFINE_MY_PRINT(Type)                  \
    void myPrint(int x, int y, Type toPrint) { \
        moveTo(x,y);                           \
        print(toPrint);                        \
    }

DEFINE_MY_PRINT(int)
DEFINE_MY_PRINT(long)
DEFINE_MY_PRINT(char *) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T18:36:31.920

模板将是首选，但您可以（ab）使用预处理器：

```
#define MY_PRINT(T) void myPrint(int x, int y, T toPrint) \
{ \
    moveTo(x,y); \
    print(toPrint); \
}

MY_PRINT(int)
MY_PRINT(long)
MY_PRINT(char*) 
```

# php - 使用 PHP 处理 JSON 数据

> ID：15709330
> 
> 赞同：1
> 
> 时间：2013-03-29T18:34:55.777
> 
> 标签：php, ajax, arrays, json, post

场景：玩在线游戏，有一个 javascript 文件，允许我使用 POST/json 将数据移植到服务器上的 PHP。我必须将我的服务器路径输入到我的客户端 PC 中才能正常工作。我得到确认连接正常。

PHP 只能识别来自我正在播放的网站的源，并且我可以在我的开发者控制台中看到数据传输到该网站。发布的数据采用以下格式：我可以在控制台中看到数据以数组形式出现：

```
Request URL: //xxxxxx.xxxx/aix/server_api.php Request Method:POST Status Code:200 OK Request Headersview source Accept:application/json, text/javascript, */*; q=0.01 Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3 Accept-Encoding:gzip,deflate,sdch Accept-Language:en-GB,en-US;q=0.8,en;q=0.6 Connection:keep-alive Content-Length:65236 Content-Type:application/x-www-form-urlencoded; charset=UTF-8 Host:sd.fast-page.org Origin:http://xx.yyy.com Referer:http://xxx.yyy.com/232/index.aspx User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.22 (KHTML, like Gecko) Ubuntu Chromium/25.0.1364.160 Chrome/25.0.1364.160 Safari/537.22 Form Dataview sourceview URL encoded alliance[id]:118 alliance[name]:DS alliance[members]:12 alliance[score]:982078 data_type:city data[0][id]:12517457 data[0][owner_id]:1538 data[0][owner]:MM1 data[0][coords]:'081:191 data[0][name]:C31 4Chief data[0][score]:11020 data[0][city_type]:castle data[0][location]:land data[1][id]:12517458 data[1][owner_id]:1538 data[1][owner]:MM1 data[1][coords]:'082:191 data[1][name]:C31 5Redrum data[1][score]:10596 data[1][city_type]:castle data[1][location]:water data[2][id]:12386381 data[2][owner_id]:1538 data[2][owner]:MM1 data[2][coords]:'077:189 data[2][name]:C31 1Home data[2][score]:10460 data[2][city_type]:castle data[2][location]:land data[3][id]:12320847 data[3][owner_id]:1538 data[3][owner]:MM1 data[3][coords]:'079:188 data[3][name]:C31 6North data[3][score]:10182 data[3][city_type]:castle data[3][location]:land data[4][id]:12386382 data[4][owner_id]:1538 data[4][owner]:MM1 data[4][coords]:'078:189 data[4][name]:C31 3Back data[4][score]:10108 data[4][city_type]:castle data[4][location]:land data[5][id]:12517453 data[5][owner_id]:1538 data[5][owner]:MM1 data[5][coords]:'077:191 data[5][name]:C31 2Second data[5][score]:9968 data[5][city_type]:castle data[5][location]:land data[6][id]:12714060 data[6][owner_id]:1538 data[6][owner]:MM1 data[6][coords]:'076:194 data[6][name]:C31 MacoHub data[6][score]:9692 data[6][city_type]:castle data[6][location]:land data[7][id]:12517460 data[7][owner_id]:1538 data[7][owner]:MM1 data[7][coords]:'084:191 data[7][name]:C31 Tango data[7][score]:9163 data[7][city_type]:castle data[7][location]:land data[8][id]:12582993 data[8][owner_id]:1538 data[8][owner]:MM1 data[8][coords]:'081:192 data[8][name]:C31 Spring data[8][score]:8864 data[8][city_type]:castle data[8][location]:land data[9][id]:12517454 data[9][owner_id]:1538 data[9][owner]:MM1 data[9][coords]:'078:191 data[9][name]:C31 Pally data[9][score]:8816 data[9][city_type]:castle data[9][location]:land data[10][id]:12779603 data[10][owner_id]:1538
[and so on and so forth.....have masked the rest but this is the format
Response Headersview source Access-Control-Allow-Headers:Content-Type Access-Control-Allow-Methods:POST, GET, OPTIONS Access-Control-Allow-Origin: //xxx.yyy Access-Control-Max-Age:1000 Cache-Control:no-store, must-revalidate, max-age=0, proxy-revalidate, no-transform Connection:keep-alive Content-Encoding:gzip Content-Length:70 Content-Type:application/json Date:Fri, 29 Mar 2013 18:08:14 GMT Expires:Fri, 29 Mar 2013 18:08:14 GMT Pragma:no-cache Server:Apache Vary:Accept-Encoding X-Powered-By:PHP/5.5.0alpha5 
```

现在我在上面看到的是当我触发客户端应用程序时输出到我的 PC 上的控制台。

PHP如下：

```
$m = false;
if(preg_match('/http\:\/\/game url/',$_SERVER['HTTP_ORIGIN'],$m))
    { $m = $m[1]; }

if(empty($m)) { die('Invalid Origin.'); }

if(!empty($_POST['data_type']))
{
    $sender     = $_POST['sender'];
    $alliance   = $_POST['alliance'];
    $request    = $_POST['data_type'];
    $data       = $_POST['data'];

    // Response to Alliance Info Exporter
    $json       = array(
        'message'   => 'recieved.',
        'data'      => array(),
        'error'     => false
    );

    // handle data types
    switch($request)
    {
        case 'connection_test': $json['message'] = 'Welcome to our server. Your are connected!'; break;
        case 'member'   : /* Code for member request */         break;
        case 'city'     : /* Code for city request */           break;
        case 'support'  : /* Code for support request */        break;
        default         :  $json['message'] = 'Nothing Done.';  break;
    }

    // set headers for API
    header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']);
    header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
    header('Access-Control-Max-Age: 1000');
    header('Access-Control-Allow-Headers: Content-Type');
    header('Content-type: application/json');

    // Respond
    die(json_encode($json));
}
die('No Access.'); 
```

我这里有两三个问题

1.  我似乎根本无法操纵 PHP 获取的数据
2.  每当我尝试向 case 语句添加任何参数时，甚至只是为了看看我是否可以以某种方式解析数据，那么 api 就会停止响应我的客户端

例如，在城市交换机上，我只是试图将数据输出到一个文件中，以确认它正在通过，因为我的浏览器控制台给了我一个 POST 成功代码（http 200）

这是我使用的代码：

```
$f = fopen("city.txt", "w");
fwrite($f, $_POST);
fclose($f); 
```

我在我的 PHP 的主要部分尝试了它，在城市案例切换（这是我首先执行的查询类型）尝试了它，我尝试了其他定义的类型，如 $data 等。没有写入。

我究竟做错了什么？

其次，我的最终状态是将其发布到 SQL 服务器，我该怎么做？

# javascript - DOM 事件清除文本值

> ID：15709333
> 
> 赞同：0
> 
> 时间：2013-03-29T18:35:16.320
> 
> 标签：javascript, html, dom, javascript-events

我正在编写一个 JS 代码来计算给定一些个人成绩的最终成绩并在 html 页面中输出结果，但是当我触发事件和函数时，它会在一瞬间输出错误答案，然后立即与输入的值一起消失文本框。

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Problem 2</title>
        <script src="grades.js" type="text/javascript"></script>
    </head>

    <body>
        <h1>Grade Calculator</h1>
        <form id ="myForm">
            <div id="assignments">
            HW <input type="text" size="1"/> / <input type="text" size="1"/><br/>
            HW <input type="text" size="1"/> / <input type="text" size="1"/><br/>
            HW <input type="text" size="1"/> / <input type="text" size="1"/>
            </div>

            <div>
                <input type="checkbox" /> Curve +5?
            </div>

            <div id="resultsarea">
                <p>
                    <!--add buttons here -->
                    <button id="comp">Compute</button>
                    <button id="clr">Clear</button>
                </p>

                <!-- add results here -->
            </div>
        </form>
    </body>
</html> 
```

JS：

```
window.onload = pageLoad;

function pageLoad()
{
    var cbutton = document.getElementById("comp");
    cbutton.onclick = compute;
}

function compute()
{
    var values = document.getElementsByTagName("input");
    var marks = 0;
    var total = 0;
    for (var i=0; i < values.length; i++)
    {
        if(values[i].type == "text")
        {
            if (i%2 == 0)
            marks += parseInt(values[i].value);
            else
            total += parseInt(values[i].value);
        }
    }
    var result = Math.round(marks/total);
    document.writeln(result);
} 
```

# java - 在整个堆中恢复堆条件

> ID：15709334
> 
> 赞同：5
> 
> 时间：2013-03-29T18:35:19.857
> 
> 标签：java, heap, heapsort

我正在尝试回答以下编程问题：

在 heap.java 程序中，该`insert()`方法在堆中插入一个新节点并确保保留堆条件。编写一个`toss()`方法，在堆数组中放置一个新节点，而不尝试保持堆条件。（也许每个新项目都可以简单地放在数组的末尾。）然后编写一个`restoreHeap()`方法来恢复整个堆中的堆条件。当必须一次插入大量数据时，重复使用`toss()`后单个`restoreHeap()`使用比重复使用更有效。`insert()`有关线索，请参见堆排序的描述。为了测试你的程序，插入一些项目，再加入一些，然后恢复堆。

我已经为 toss 函数编写了代码，该函数在末尾成功插入节点并且不修改堆条件。不过，我的功能有问题，`restoreHeap`我无法绕开它。我已经包含了下面的两个函数。

heap.java 的完整代码在[这里](http://pastebin.com/XpBPhA0m)（包括`toss()`和`restoreHeap()`）

`toss()`- 我基于插入功能

```
public boolean toss(int key)
{
    if(currentSize==maxSize)
        return false;
    Node newNode = new Node(key);
    heapArray[currentSize] = newNode;
    currentSize++;
    return true;
}  // end toss() 
```

`restoreHeap()`- 我基于trickleUp函数，我得到了一个StackOverflowError。

```
public void restoreHeap(int index)
{
    int parent = (index-1) / 2;
    Node bottom = heapArray[index];

    while( index > 0 &&
            heapArray[parent].getKey() < bottom.getKey() )
    {
        heapArray[index] = heapArray[parent];  // move it down
        index = parent;
        parent = (parent-1) / 2;
    }  // end while
    heapArray[index] = bottom;
    while(index != 0)
    {
        restoreHeap(parent++);
    }

}  // end restoreHeap() 
```

有任何想法吗？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:07:33.610

我会试一试。这是一种通过一些解释来完成您所要求的事情的方法。

由于您知道堆中所有节点的一半是叶子，而叶子本身就是有效的堆，因此您只需遍历另一半节点以确保它们也是有效的。如果我们从底部向上执行此操作，我们可以在向上通过堆时保持“下方”的有效堆结构。这可以通过`for`循环轻松完成：

```
 public void rebuildHeap()
 {
    int half = heapArray.length / 2;
    for(int i = half; i >= 0; i--)
        restoreHeap(i);
 } 
```

那怎么`restoreHeap`实施呢？它应该检查节点`index`与它的子节点，看看它是否需要重新定位节点。因为我们确保`index`节点下面的树是堆，所以我们只需要将`index`节点移动到正确的位置。因此，我们将它向下移动到树中。

首先，我们需要找到孩子。由于三者中的每一行的节点数是前一行的两倍，因此可以像这样定位子节点：

```
private void restoreHeap(int index)
{
    int leftChild = (index * 2) + 1;  //+1 because arrays start at 0
    int rightChild = leftChild +1;
    ... 
```

现在您只需将孩子的值与您的`index`节点值进行比较。如果子节点的值更大，则需要将`index`节点与子节点交换。如果两个孩子的值都较大，则需要与两者中值最大的孩子进行交换（以保持交换后的堆结构）。交换节点后，您需要再次调用该方法以查看是否需要将`index`节点向下移动到树的下方。

```
 ...
    int biggest = index;
    if(leftChild < currentSize && heapArray[leftChild].getKey() > heapArray[index].getKey())
        biggest = leftChild;  //LeftChild is bigger
    if(rightChild < currentSize && heapArray[rightChild].getKey() > heapArray[biggest].getKey())
        biggest = rightChild; //RightChild is bigger than both leftChild and the index node

    if(biggest != index) //If a swap is needed
    {
        //Swap
        Node swapper = heapArray[biggest];
        heapArray[biggest] = heapArray[index];
        heapArray[index] = swapper;

        restoreHeap(biggest);
    }
} 
```

# java - 在java中旋转GIF图像

> ID：15709342
> 
> 赞同：1
> 
> 时间：2013-03-29T18:35:39.610
> 
> 标签：java, rotation, gif

我正在尝试在 java 中旋转 GIF 图像。
我阅读了这些有趣的两条关于在 java 中旋转图像的线索：[线索 1](https://stackoverflow.com/questions/12799052/background-is-black-when-rotating-an-image)和[线索 2](https://stackoverflow.com/questions/12165977/java-image-rotation)。

一切正常，除了当我旋转我的 GIF 图像时，不再有 GIF 图像的动画。仅显示 GIF 动画的第一张图像。

那么，有没有办法在旋转我的 GIF 图像后保留 GIF 动画，而不使用任何第三方库而只使用标准 J2SE？或者我是否必须将我的 GIF 图像分成单个图像，一张一张地旋转它们，然后循环显示它们？

我没有给出我写的任何代码，因为在我的拙见中它是不相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:22:21.850

我认为动画 gif 是通过存储多个帧来工作的，所有帧都是 gif 格式。因此，您只需要将旋转方法应用于每个图像，而不是整个 gif。

[维基百科对格式有很好的描述](http://en.wikipedia.org/wiki/Graphics_Interchange_Format#Animated_GIF)

# java - 我们可以在java中使用replaceAll()进行多次替换吗

> ID：15709362
> 
> 赞同：1
> 
> 时间：2013-03-29T18:37:22.040
> 
> 标签：java, replaceall

整个想法是用逗号 (, ) 替换空格，或者用一个逗号 (,) 替换逗号后跟空格 (,)。我们可以做一些如下的事情吗？

```
 strLine = strLine.replaceAll(", | ,",","); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:44:13.357

您的替换将`"a ,b, c , d , e"`变为`"a,b,c, d , e"`.

使用这种形式可能会更好：`replaceAll("\\s*,\\s*",",")`.

这将产生`"a,b,c,d,e"`

`\\s`将匹配空格、制表符和换行符，`*`意味着它之前的内容可以出现 0 次或更多次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:45:16.460

是的，你可以，因为在替换之前`replaceAll`先创建一个`Pattern`，如果你查看[Pattern](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)的 javadocs ，你可以看到 | 具有您想要的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T18:45:58.867

你可以使用这个：

```
strLine = strLine .replaceAll("\\s?,\\s?",","); 
```

# bitmap - 位图图像到十六进制转换

> ID：15709363
> 
> 赞同：1
> 
> 时间：2013-03-29T18:37:23.320
> 
> 标签：bitmap, hex, bmp, file-conversion

我正在寻找一种可以将标准位图图像转换为十六进制值数组的开发工具。有没有这样的事情，但如果没有，我将如何自己做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:48:16.147

如果您以块的形式读取文件，您可以获得准确的数据。您可以使用带有标题的结构来跟踪文件的大小和每个块中存在的实际数据。

这可以在一个简单的 C 程序中完成。顺便说一句，如果您以十六进制模式转储文件数据，您将始终看到图像中的数据将是十六进制。将块大小设为 4K 或 64K，则 header 不会是开销。

# java - 将图片与白色混合

> ID：15709364
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:37:29.243
> 
> 标签：java, colors, blending

嗨，我有一个项目需要将白色和黑色与图片混合。我有黑色代码工作，但我似乎无法让白色工作。有人可以告诉我我做错了什么吗，我早些时候让白色工作过，但它消失了，我真的不知道如何......谢谢！底部有图片结果的链接！

```
import java.awt.Color;
public class BlendingWithBlackAndWhite 
{
 public static void main(String[] args)

{
FileChooser.pickMediaPath();
BlendablePic pRef = new BlendablePic(FileChooser.pickAFile());
double a[]= new double[3];
a[0]=0.1;
a[1]=0.3;
a[2]=0.5;
pRef.blendRectWithWhite(0, 920, 920, 920, a[0]+0.9);
pRef.blendRectWithWhite(920, 920, 920, 1840, a[2]);
pRef.blendRectWithWhite(1840, 920, 920, 2760, a[1]-0.3);
pRef.blendRectWithBlack(0,0, 920, 920, a[1]);
pRef.blendRectWithBlack(920,0, 1784, 920, a[0]);
pRef.blendRectWithBlack(1785,0, 2600, 920, a[2]*-0.2);
pRef.explore();
}}

public class BlendablePic extends Picture{
public BlendablePic(String filename){
super(filename);
 }
 public void blendRectWithWhite(int xMin, int yMin, int xMax, int yMax, double a)
  {
int x;
x = xMin;
while (x<= xMax)
{
  int y;
  y = yMin;
  while(y <= yMax)
  {
    Pixel refPix = this.getPixel(x,y);
    refPix.setRed((int)Math.round(refPix.getRed() * (1.0-a)+255*a));
    refPix.setGreen((int)Math.round(refPix.getGreen() * (1.0-a)+200*a));
    refPix.setBlue((int)Math.round(refPix.getBlue() * (1.0-a)+255*a));
  y= y+1;
  }
  x = x+1;
}
}
public void blendRectWithBlack(int xMin, int yMin, int xMax, int yMax, double a)
{
int x;
x = xMin;
while (x<= xMax)
{
  int y;
  y = yMin;
  while(y <= yMax)
  {
    Pixel refPix = this.getPixel(x,y);
    refPix.setRed((int)Math.round(refPix.getRed() * (0.2 +a)+0*a));
    refPix.setGreen((int)Math.round(refPix.getGreen() * (0.2 +a)+0*a));
    refPix.setBlue((int)Math.round(refPix.getBlue() * (0.2 +a)+0*a));

  y = y+1;
}
x = x+1;
 }
 }} 
```

第一张[图片](http://feathermeadows.tumblr.com/image/46611421940)是我需要做的，第二张是我从上面的编码中得到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:47:14.397

只看图片，你肯定已经有了混合算法，只是在混合成白色时实际上并没有做任何事情。这意味着方法应该几乎完全相同，其中一个是“添加”颜色，另一个是“减去”颜色。当我查看您的方法时，我发现这在很大程度上是正确的，但是您更改了第二个加数...

```
(1.0-a)+255*a
(1.0-a)+200*a
(1.0-a)+255*a

(0.2 +a)+0*a
(0.2 +a)+0*a
(0.2 +a)+0*a 
```

当你乘以 0*a 时，你得到 0，所以你的混合正好是 0.2+a。我怀疑你的问题在这里......

# php - 在 WAMP 上为 PHP 安装 SQLSRV 扩展

> ID：15709374
> 
> 赞同：8
> 
> 时间：2013-03-29T18:37:45.107
> 
> 标签：php, sql-server, wamp

我已经看过很多这样的帖子，并且都浏览了它们，但我仍然无法运行 SQLSRV 扩展。你能帮我吗？我将在下面发布我拥有的所有信息：

*   Windows 7 64 位
*   WampServer 2.2 32 位
*   PHP 5.4.3 32 位
*   Apache 2.2.22（不知道是 VC6 还是 VC9）
*   Microsoft SQL Server 2012 本机客户端 64 位

我下载了 SQLSRV30.exe。我将 dll 文件解压到 C:\wamp\bin\php\php5.4.3\ext。

**在我的 php.ini 中：**

*   extension_dir = "c:/wamp/bin/php/php5.4.3/ext/"

*   扩展=php_sqlsrv_54_ts.dll

*   扩展=php_pdo_sqlsrv_54_ts.dll

我知道 SQLSRV30.exe 是 32 位的。这就是为什么我有 32 位版本的 Wamp 和 PHP。我也知道 Wamp 中没有什么是非线程安全的。
如果我查看 phpinfo() 我应该看到一个“sqlsrv”部分，但我目前没有。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-30T03:49:53.380

如果您正在编辑`c:\wamp\bin\php\php.ini`，请不要编辑该文件，只需编辑 wamp server php.ini 文件给出的文件，转到 wamp server php，然后 php.ini 即可获得写入 ini 文件。

我有同样的问题，这为我解决了。

另外，请确保您右键单击 WAMP 快捷方式和“以管理员身份运行”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T09:40:15.460

今天早上我遇到了一些麻烦，但我发现我有一个 x64 WampServer ......它不能正常工作。

因此，我重新安装了 x86 WampServer，并按照我在 PHP.net ( [http://php.net/manual/en/sqlsrv.requirements.php](http://php.net/manual/en/sqlsrv.requirements.php) ) 上可以找到的所有内容进行操作。因为我在寻找我的 x64 解决方案时看到了这篇文章，所以我想我会回来尝试帮助你：

1) 如果你在 Wamp 上有 PHP 5.4.#，我敢打赌它是 TS,VC9

2) 找到正确的“php.ini”：我的不在“bin/php#”文件夹中，而是在“bin/apache#”文件夹中（C:\wamp\bin\apache\apache2.2.22\bin\ php.ini)

3）SQLSRV驱动有2个版本，2.0和3.0，请确保你有3.0！

从外观上看，我们拥有完全相同的 Wamp 版本，所以...我很确定您必须使用“php_sqlsrv_54_ts.dll”和“php_pdo_sqlsrv_54_ts.dll”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-02T01:22:51.207

你在你的 php 扩展列表中看到你的新 dll 了吗？如果是这样，请单击它并确保其名称中有一个 V。（左键单击希望绿色的 wamp 符号。php-->php 扩展名--> dll 的名称）

我对 php 5.5、SQLSRV31.exe、php_sqlsrv_55_nts.dll 和 php_sqlsrv_55_ts.dll 也有类似的问题。奇迹般地奏效了。

# algorithm - 用于在时间线上折叠重叠事件的算法/数据结构

> ID：15709375
> 
> 赞同：5
> 
> 时间：2013-03-29T18:37:52.740
> 
> 标签：algorithm, timeline

我正在寻找一种算法来执行以下操作。我有一个事件时间表，这些事件跨越可以重叠的时间段。我想将这些事件折叠成一个时间线不重叠的时间段，每个时间段都由一个或多个事件的存在定义。

虽然概念上很简单，但捕捉所有可能的情况并适当地分割时间线可能有点混乱。

为了说明（这里的横轴是时间）：

```
Event A   -----
Event B      ---- 
```

变成

```
Event A   ---
Event A+B    --
Event B        -- 
```

另一个例子：

```
A    -----------
B       ---
C            -- 
```

变成：

```
A    ---
A+B     ---
A          --
A+C          --
A              - 
```

是否有任何标准算法/数据结构可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:24:14.940

Put the start and end times of every event in an array, and sort them in non-decreasing order of time (if a "start" and an "end" happen and the same time, break ties by placing the "end" first).

We'll do a [sweep line](http://en.wikipedia.org/wiki/Sweep_line_algorithm) algorithm.

Traverse the sorted array, while maintaining a set of "active" events: whenever you see a start/end time, respectively add or drop the corresponding event from the set, and add (if the active set is non-empty) an event to your solution.

The resulting set of events is disjoint, and can be labelled as needed.

# php - php 数据库 - 为每个用户存储 30 天的数据

> ID：15709383
> 
> 赞同：1
> 
> 时间：2013-03-29T18:38:02.867
> 
> 标签：php, sql, phpmyadmin

我正在尝试建立一个数据库来记录每个用户最近 30 天的信息。数据将每天记录一次（即通过 cron 作业），并将成为项目的值（即不断变化）。

构建它的最佳方法是什么？我正在考虑设置一个表，然后将 30 天存储在表中并删除第 31 天，因为我在 cron 作业中添加了新的一天（并将所有其他天移到了一天），但这似乎不是很高效的..

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:45:44.880

您可以做的是存储每个条目的当前日期，然后在您的 cron 作业中，删除所有超过 30 天的条目。

例如（使用 MySQL），

```
DELETE FROM user_statistics WHERE DATEDIFF(NOW(), date_of_record) > 30; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:45:16.643

使用自己的**日期**存储用户数据，并在超出限制时删除最旧的数据。无需转移任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T18:45:54.833

我会使用`DATE`列按实际日期记录。您可以在 MySQL 中轻松查询“过去 30 天”。

至于清除，cron 作业也可以很容易地删除任何超过 30 天的内容。或者，由于很容易忽略超过 30 天的任何内容，您甚至可以选择不删除较旧的记录（至少不是每天都删除）。

# c# - OracleException ORA-03113: 通信通道上的文件结束

> ID：15709386
> 
> 赞同：0
> 
> 时间：2013-03-29T18:38:16.790
> 
> 标签：c#, database, oracle, exception, service

我正在处理的 Windows 服务出现错误。该服务每天运行两次。当它在下午 6:00 运行时，它工作得很好。当它在早上 6:00 运行时，我收到一封包含此堆栈跟踪的电子邮件。有谁知道错误可能是什么？

> Oracle.DataAccess.Client.OracleException ORA-03113：通信通道上的文件结束进程 ID：2448 会话 ID：155 序列号：54127 在 Oracle.DataAccess.Client.OracleException.HandleErrorHelper（Int32 errCode，OracleConnection conn，IntPtr opsErrCtx , OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck) at Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, String procedure, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, Boolean bCheck) 在 Oracle。 DataAccess.Client.OracleCommand.ExecuteReader(Boolean requery, Boolean fillRequest, CommandBehavior behavior) at Oracle.DataAccess.Client.OracleCommand.ExecuteReader() at MSSUPhotoSyncService.OneCardPhotoMgr.GetCurrentSIDs() in PhotoMgr.cs:line 93

# html - 如何正确定位关闭按钮

> ID：15709390
> 
> 赞同：1
> 
> 时间：2013-03-29T18:38:25.353
> 
> 标签：html, css

每个人！我是一名长期的 Web 开发人员和设计师，但这个让我目瞪口呆。我有一个带有关闭按钮的警报（这不是 Bootstrap）。它在主页上显示正常：

![在此处输入图像描述](../Images/7a9ffbcab2aec6cb5139b84999a5930f.png)

但是当我在提交页面上放置相同的警报时，它会将关闭按钮向下移动：

![在此处输入图像描述](../Images/39b98c899715b361f211b30e5341c755.png)

有任何想法吗？这是我的 HTML：

```
<div class="alert">
    <div class="alertContents">
        When you submit yo stuff, it comes up in the feed right away.
        <div class="alertClose">&times;</div>
    </div>
</div> 
```

和 CSS：

```
.alert {
    width: 100%;
    background-color: #DD7474;
    font-family: 'Raleway', sans-serif;
    font-size: 18px;
    color: #FBFBFC;
    margin: auto;
    border-radius: 2px;
    border-color: transparent;
    border-width: 0px;
    border-style: solid;
}
.alertContents {
    padding-top: 4px;
    padding-bottom: 4px;
    padding-left: 10px;
    padding-right: 10px;
}
.alertClose {
    float: right;
    width: auto;
    height: auto;
    color: #FBFBFC;
    cursor: hand;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:47:48.050

```
.alert {
 position:relative;
}
.alertClose {
 position:absolute;
 top:5;
 right:5;
} 
```

这可能是你需要的。在此链接上查看 #4 [http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:42:13.453

我会使用：

```
 position: absolute; 
```

然后添加

```
 left: 250px; 
```

编辑：将这些代码添加到您的 css 中......哦，回头看看发生了什么，您也许可以确保有一个：

```
 clear: both; 
```

像这样的功能：

```
 <div class="clear"></div> 
```

或者

```
 <br clear="all" /> 
```

# python - Weird matplotlib.pyplot importation

> ID：15709391
> 
> 赞同：2
> 
> 时间：2013-03-29T18:38:25.577
> 
> 标签：python, matplotlib

I found a really weird behaviour when trying to import the module `pyplot` from `matplotlib`. First it says it does not exist, but after importing `pylab` (another `matplotlib` module), it suddently works!

```
>>> import matplotlib
>>> matplotlib.__version__
'1.2.1'
>>> matplotlib.pyplot
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'pyplot'
>>> import pylab
>>> matplotlib.pyplot
<module 'matplotlib.pyplot' from '/Library/Python/2.7/site-packages/matplotlib/pyplot.pyc'> 
```

Anyone else has this behaviour in his/her computer?

* * *

****** This happened on a OS X Mountain Lion, running Python 2.7\. I installed `matplotlib` with `pip`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:40:14.843

In general, to access a module within a package, you must import that module. You can't just import the package and access the module with dot syntax. Just do `from matplotlib import pyplot` (or `import matplotlib.pyplot` if you really like typing dots).

The reason it works after importing `pylab` is that `pylab` imports `pyplot`, after which `pyplot` is available as an attribute of the enclosing package `matplotlib`.

Basically, if you do `import package`, you can't expect you will be able to do `package.module`. But if you do `import package` *and* `from package import module`, then you can do `package.module`.

# mysql - 在 MYSQL 中加入 5 数据库

> ID：15709396
> 
> 赞同：0
> 
> 时间：2013-03-29T18:38:50.650
> 
> 标签：mysql

我有 5 个数据库，假设他们的名字是`A` `B` `C` `D` `E`

所有数据库具有相同的表/结构/字段

我想使用表从 5 个数据库中获取结果`SMSOutgoing`，该字段是`uid`

它看起来像这样：

```
SELECT * OR JOIN 5 database A B C D E F
FROM `table` SMSOutgoing
WHERE uid = 1 
```

不是所有的数据库都有uid=1，需要显示哪个数据库有结果

我运行 SMS Gateway，每个电话/1 个号码使用 1 个数据库，这就是为什么有这么多不同的数据库。

我花了几个小时来解决它，但总是出错，我认为我遵循了错误的指南（在 1 个数据库中加入多个表）

我迷路了，请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:42:22.137

听起来您想在 SMSOutgoing 表中列出包含 uid = 1 的数据库。如果是这样，您应该可以使用`UNION`：

```
SELECT DISTINCT 'DatabaseA' WhichDb
FROM DatabaseA.SMSOutgoing 
WHERE uid = 1
UNION
SELECT DISTINCT 'DatabaseB' WhichDb
FROM DatabaseB.SMSOutgoing 
WHERE uid = 1
UNION
...
UNION
SELECT DISTINCT 'DatabaseF' WhichDb
FROM DatabaseF.SMSOutgoing 
WHERE uid = 1 
```

I used `DISTINCT` in case you could have multiple uid in the same table -- that may be unnecessary.

*EDIT: From your comments, it sounds like you just want the results:*

```
SELECT *
FROM DatabaseA.SMSOutgoing 
WHERE uid = 1
UNION
SELECT *
FROM DatabaseB.SMSOutgoing 
WHERE uid = 1
UNION
...
UNION
SELECT *
FROM DatabaseF.SMSOutgoing 
WHERE uid = 1 
```

You may need to use `UNION ALL` if you might have duplicates...

# windows-phone-7 - Software license : ML-LPL in commercial. AR library

> ID：15709399
> 
> 赞同：1
> 
> 时间：2013-03-29T18:38:58.720
> 
> 标签：windows-phone-7, licensing

I'm facing problem with understanding Microsoft ML-LPL license [http://gart.codeplex.com/license](http://gart.codeplex.com/license)

After riding it I'm still unable to understand if it can be used in commercial project.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:20:51.647

The MS-LPL is essentially the MS-PL, where the extra L means "Limited", and has the extra condition that the projects must be for the Windows platform:

> 3 (F) Platform Limitation- The licenses granted in sections 2(A) & 2(B) extend only to the software or derivative works that you create that run on a Microsoft Windows operating system product.

And MS-PL is [allowed for commercial use](http://www.tldrlegal.com/license/microsoft-public-license-%28ms-pl%29), so aslong as your project is for the Windows platform it should be fine.

# c++ - MAODV : 没有成员命名

> ID：15709408
> 
> 赞同：2
> 
> 时间：2013-03-29T18:39:28.530
> 
> 标签：c++, ns2

```
void AODV::rt_resolve(Packet *p) {
    struct hdr_cmn *ch = HDR_CMN(p);
    struct hdr_ip *ih = HDR_IP(p);
    aodv_rt_entry *rt;
    ch->xmit_failure_ = aodv_rt_failed_callback;
    ch->xmit_failure_data_ = (void*) this;
    rt = rtable.rt_lookup(ih->daddr());

    if(rt == 0) {
      rt = rtable.rt_add(ih->daddr());
    }

    if(rt->rt_flags == RTF_UP) {
       assert(rt->rt_hops != INFINITY2);
     #ifdef PREDICTION
        double breakTime = 2000.0;
        if (ch->num_forwards() != 0 && ch->next_hop_ == index){
        Node *currentNode = Node::get_node_by_address(index);
        breakTime = currentNode->getTime(ch->prev_hop_);

     if (breakTime < 2000.0 && breakTime > CURRENT_TIME 
      && (breakTime - CURRENT_TIME < PREDICTION_TIME_FOR_UNICAST) 
      && (rt->rt_prevnode_warning == 0)){              
        //printf("\nPREDICTION:: at %.9f on node %d prev node %d , dst %d, will break at %.9f\n", CURRENT_TIME, index, ch->prev_hop_, ih->daddr(), breakTime); 
        sendLPW(ch->prev_hop_, breakTime);
        rt->rt_prevnode_warning ++;
    }
}
#endif
forward(rt, p, NO_DELAY);
} 
```

在上面的 MAODV 代码中，我收到以下错误

```
In member function ‘void AODV::rt_resolve(Packet*)’:
 aodv/aodv.cc:569:34: error: ‘class Node’ has no member named ‘getTime’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:02:01.580

复制[node.h](http://read.pudn.com/downloads182/sourcecode/comm/849441/maodv-code/node.h__.htm)到目录

> ns-allinone-2.35/ns-2.35/common

由于该函数是在 MAODV 代码的“node.h”中定义的，而不是在已经存在的简单“node.h”中定义的。

# android - Google Maps Android API V2 和 Android 2.3.5 的错误

> ID：15709411
> 
> 赞同：0
> 
> 时间：2013-03-29T18:39:36.920
> 
> 标签：android, google-maps-api-2, android-2.3-gingerbread, supportmapfragment

我正在尝试将 SupportMapFragment 类与 Google Maps API v2 一起使用。但我一直遇到这个错误。我已导入 google-play-services_lib 项目，并将其添加到我的 Java 构建路径中。

```
 03-29 23:58:09.893: E/AndroidRuntime(26163): FATAL EXCEPTION: main
    03-29 23:58:09.893: E/AndroidRuntime(26163): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.yo/com.example.yo.MainActivity}: android.view.InflateException: Binary XML file line #13: Error inflating class fragment
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1830)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.os.Handler.dispatchMessage(Handler.java:99)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.os.Looper.loop(Looper.java:150)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.ActivityThread.main(ActivityThread.java:4277)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at java.lang.reflect.Method.invokeNative(Native Method)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at java.lang.reflect.Method.invoke(Method.java:507)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at dalvik.system.NativeStart.main(Native Method)
    03-29 23:58:09.893: E/AndroidRuntime(26163): Caused by: android.view.InflateException: Binary XML file line #13: Error inflating class fragment
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:250)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.Activity.setContentView(Activity.java:1712)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.example.yo.MainActivity.onCreate(MainActivity.java:11)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    ... 11 more
    03-29 23:58:09.893: E/AndroidRuntime(26163): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f060000
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.content.res.Resources.getValue(Resources.java:901)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.content.res.Resources.openRawResource(Resources.java:826)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.content.res.Resources.openRawResource(Resources.java:808)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at maps.af.w.a(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at maps.z.ab.a(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at maps.z.ag.a(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at maps.z.ag.a(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at maps.z.bw.a(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at maps.z.r.onCreateView(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.os.Binder.transact(Binder.java:279)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.google.android.gms.maps.SupportMapFragment$a.onCreateView(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.google.android.gms.internal.e$4.a(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.google.android.gms.internal.e.a(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.google.android.gms.internal.e.onCreateView(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:884)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
    03-29 23:58:09.893: E/AndroidRuntime(26163):    ... 20 more
    03-29 23:58:09.933: D/dalvikvm(26163): GC_CONCURRENT freed 367K, 45% free 3282K/5959K, external 0K/0K, paused 6ms+5ms
    03-29 23:58:11.764: I/Process(26163): Sending signal. PID: 26163 SIG: 9 
```

这是我的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.yo"
        android:versionCode="1"
        android:versionName="1.0" >

         <permission
                android:name="com.example.yo.permission.MAPS_RECEIVE"
                android:protectionLevel="signature">
         </permission>

        <uses-permission
            android:name="com.example.yo.permission.MAPS_RECEIVE"/>
        <uses-permission
            android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
        <uses-permission
            android:name="android.permission.INTERNET"/>
        <uses-permission
            android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
        <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true"/> 

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.yo.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <uses-library android:name="com.google.android.maps" />
             <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="the key"/>
        </application>
    </manifest> 
```

我的主要活动：

```
 package com.example.yo;

    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;

    public class MainActivity extends FragmentActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }
    } 
```

和 XML：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="@string/hello_world" />
        <fragment
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            class="com.google.android.gms.maps.SupportMapFragment"/>

    </RelativeLayout> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:43:56.697

从 manifast 文件中删除这行代码：

```
 <uses-library android:name="com.google.android.maps" /> 
```

谷歌地图 API V2 不需要它。

它与您当前的问题无关，但您还需要添加以下权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

并且您需要以其他方式添加谷歌库，请在我写的博客文章中阅读更多信息：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

# python - 如何检测屏幕上是否存在图像？

> ID：15709414
> 
> 赞同：4
> 
> 时间：2013-03-29T18:39:53.910
> 
> 标签：python, image, python-2.7, detection

这是我需要检测的图像： http: [//s13.postimg.org/wt8qxoco3/image.png](http://s13.postimg.org/wt8qxoco3/image.png)

这是 base64 表示：[http ://pastebin.com/raw.php?i=TZQUieWe](http://pastebin.com/raw.php?i=TZQUieWe)

我请求你帮助的原因是因为这是一个复杂的问题，我没有能力解决它。我自己可能需要一个星期的时间来完成。

我想到的一些伪代码：

1）截取应用程序并将其存储为图像对象。

2）将我的图像的二进制64表示转换为图像对象。

3）使用某种算法/函数来比较两个图像对象。

在屏幕上，我的意思是在应用程序中。我有应用程序的窗口名称和 PID。

为了 100% 清晰，我需要检测 image1 是否在 image2 内。image1 是我在 OP 中给出的图像。image2 是一个窗口的屏幕截图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:14:16.980

如果你把它分解成碎片，它们都很简单。

首先，您需要将应用程序窗口的屏幕截图作为 2D 像素数组。有多种不同的方法可以以特定于平台的方式执行此操作，但您没有提及您所在的平台，所以……让我们使用[PIL](http://www.pythonware.com/library/pil/handbook/image.htm)抓取整个屏幕：

```
screenshot = ImageGrab.grab()
haystack = screenshot.load() 
```

现在，您需要将 base64 转换为图像。快速浏览一下，它显然只是一个编码的 PNG 文件。所以：

```
decoded = data.decode('base64')
f = cStringIO.StringIO(decoded)
image = Image.open(f)
needle = image.load() 
```

现在你有一个二维像素数组，你想看看它是否存在于另一个二维数组中。有更快的方法来做到这一点——使用`numpy`可能是最好的——但也有一种愚蠢的蛮力方式，它更容易理解：只需迭代`haystack`; 对于每一个，迭代列，并查看是否找到与`needle`. 如果是这样，请继续浏览其余行，直到完成所有`needle`，在这种情况下，您返回`True`，或者找到不匹配的情况，在这种情况下，您`continue`只需从下一行重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:51:46.130

这可能是最好的起点：

[http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

如果您无法访问图像的元数据、文件名、类型等，那么您尝试做的事情非常困难，但您的伪声音听起来很准确。本质上，您必须根据照片的形状、线条、大小、颜色等创建算法模型。然后您必须将该模型与已在某些数据库中制作和索引的模型进行匹配。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T19:20:50.227

看起来[https://python-pillow.org/](https://python-pillow.org/)是 PIL 的更新版本。

# java - Maven 在 Nexus 中找不到依赖项

> ID：15709417
> 
> 赞同：3
> 
> 时间：2013-03-29T18:40:04.563
> 
> 标签：java, maven

我的项目的 pom 文件具有以下分发管理标签

```
<distributionManagement>
    <repository>
        <id>confiz-repo</id>
        <url>http://10.10.10.230:8081/nexus/content/repositories/snapshots/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
            <updatePolicy>always</updatePolicy>
        </snapshots>
    </repository>
</distributionManagement> 
```

我使用 mvn deploy 这给了我成功。所以我知道我的工件已成功部署。现在我的 settings.xml 文件如下

```
<?xml version="1.0" encoding="UTF-8"?>

<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <pluginGroups>
  </pluginGroups>

  <proxies>
  </proxies>

  <servers>
    <server>
      <id>confiz-repo</id>
      <username>admin</username>
      <password>admin123</password>
    </server>
  </servers>

  <mirrors>
    <mirror>
      <!-- The id of this mirror and the server instance above needs to be the same!-->
      <id>confiz-repo</id>
      <mirrorOf>*</mirrorOf>
      <url> http://10.10.10.230:8081/nexus/content/groups/public/</url>
    </mirror>
    <mirror>
      <!-- The id of this mirror and the server instance above needs to be the same!-->
      <id>confiz-repo</id>
      <mirrorOf>*</mirrorOf>
      <url> http://10.10.10.230:8081/nexus/content/repositories/snapshots/</url>
    </mirror>
  </mirrors>

  <profiles>
    <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>confiz-repo</id>
          <url>http://central</url>
          <releases>
        <enabled>true</enabled>
      </releases>
          <snapshots>
        <enabled>true</enabled>
        <updatePolicy>always</updatePolicy>
      </snapshots>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <id>confiz-repo</id>
          <url>http://central</url>
          <releases>
        <enabled>true</enabled>
      </releases>
          <snapshots>
        <enabled>true</enabled>
      </snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>

  <activeProfiles>
    <activeProfile>nexus</activeProfile>
  </activeProfiles>

</settings> 
```

现在，当我将第一个项目的依赖项包含到我的第二个项目中并运行 mvn clean install maven 时会抱怨

```
[ERROR] Failed to execute goal on project merchant: Could not resolve dependencies for project com.onestopspot:merchant:apk:1.0.1-SNAPSHOT: Could not find artifact com.confiz.abc:my-artifact:jar:1.0-SNAPSHOT in confiz-repo (http://10.10.10.230:8081/nexus/content/groups/public/) -> [Help 1] 
```

我究竟做错了什么 ？

**编辑**- 我可以看到我的工件部署在 nexus 中。所以我说 mvn deploy 可以正常工作是对的。但是 nexus 试图读取的路径`http://10.10.10.230:8081/nexus/content/groups/public/`不包含我的工件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:42:49.143

您的第二个项目正在尝试从不存在的 nexus 中获取第一个项目的工件

1.  您可能希望在 nexus 上部署快照
2.  如果您不想这样做 1.`mvn clean install -o`在离线模式下运行第二个项目

# java - 处理 Java 加密异常

> ID：15709421
> 
> 赞同：18
> 
> 时间：2013-03-29T18:40:19.833
> 
> 标签：java, security, exception, encryption, cryptography

在 Java 中处理加密/解密时，这段非常基本的代码非常常见。

```
final Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding");
cipher.init(Cipher.ENCRYPT_MODE, key, iv);
cipher.doFinal(*something*); 
```

仅这三行，可能会引发六个异常，我不确定处理它们的最干净（就代码可读性而言）的方法是什么。尝试使用六个 catch 子句对我来说真的很香。

在使用此类对象时，是否存在我显然遗漏的微模式或最佳实践？

**编辑**

对不起，我想我没有很好地解释自己。我的问题并不是要避免使用 try\catch 子句，而是是否有处理类似情况的通用方法。

加密例外是

```
NoSuchPaddingException, NoSuchAlgorithmException
InvalidAlgorithmParameterException, InvalidKeyException,
BadPaddingException, IllegalBlockSizeException 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T22:30:51.950

您指出了以下例外情况：

```
NoSuchPaddingException, NoSuchAlgorithmException
InvalidAlgorithmParameterException, InvalidKeyException,
BadPaddingException, IllegalBlockSizeException 
```

现在所有这些都是[`GeneralSecurityException`](http://docs.oracle.com/javase/6/docs/api/java/security/GeneralSecurityException.html)'，所以很容易抓住它们。但是看看用例，您可能不想这样做。

* * *

如果您查看异常的原因，您会发现这些异常中的任何一个（最后两个除外）仅在生成算法或密钥的实现时才被抛出。我认为，一旦您测试了您的应用程序，这些值或多或少保持不变是合理的。因此，抛出 - 例如 - 一个[`IllegalStateException`](http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html). `IllegalStateException`是一个运行时异常，您不需要抛出（在方法签名中）或捕获。当然，您应该将安全异常作为异常的*原因*包括在内。

* * *

现在最后两个例外，[`BadPaddingException`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/BadPaddingException.html)并且[`IllegalBlockSizeException`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/IllegalBlockSizeException.html)是不同的。它们依赖于实际的密文，因此它们依赖于算法的输入。现在，通常您应该始终在将输入输入到您的[`Cipher`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html)实例之前验证输入的完整性，启动解密，例如首先验证 HMAC 校验和）。因此，从这个意义上说，您仍然可以摆脱运行时异常。如果您不执行单独的完整性检查，那么您应该不应该转换为`RuntimeException`. 相反，您可以让用户处理异常，或者将其作为特定于用例的异常重新抛出。

如果您`BadPaddingException`通过（重新）抛出它来处理它，那么应该了解明文预言机攻击，例如填充预言机攻击。对于 CBC 模式下的 padding oracle 攻击：如果对手可以尝试让您多次解密密文并收到解密失败（或失败）的指示，那么他们可以*在不破坏密码的情况下检索消息的明文*。出于这个原因，在可以处理身份验证标签的 16 个附加字节的情况下，应该首选经过身份验证的模式，例如 GCM 模式。

* * *

最好使用单独的`try`/`catch`块来构建和初始化`Cipher`以及解密本身。您还可以`BadPaddingException`在`IllegalBlockSizeException`处理[`GeneralSecurityException`](http://docs.oracle.com/javase/6/docs/api/java/security/GeneralSecurityException.html). 从 Java 7 开始，您也可以使用 multi-catch 语句（例如`catch(final BadPaddingException | IllegalBlockSizeException e)`）。

* * *

最后一些注意事项：

*   [`BadPaddingException`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/BadPaddingException.html)并且[`IllegalBlockSizeException`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/IllegalBlockSizeException.html)可能`Cipher`因为没有完全接收到数据，或者因为攻击者弄乱了数据而被抛出；
*   [`BadPaddingException`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/BadPaddingException.html)如果密钥不正确，也可能会抛出。
*   Beware that an exception may be thrown for AES key sizes 192 bit and 256 bit if the unlimited crypto files are not being installed (check the [Oracle JavaSE site](http://www.oracle.com/technetwork/java/javase/downloads/index.html) for more info); you should check if the key size is permitted when the application is started (this is mainly true for old / deprecated versions of Java);

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T20:08:30.510

如果您愿意失去一些细节，所有 Crypto 异常都扩展[GeneralSecurityException](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/GeneralSecurityException.html)，您可以抓住它。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-29T18:43:27.137

处理这个问题的最好方法是创建一个业务异常（MyModuleException 或其他东西），然后重新抛出该异常，添加 Crypto 异常以导致部分。这样，您的方法将只抛出一个异常，而不是六个，这在应用程序的其他层中会更容易管理。

```
public void myMethod(...) throws MyModuleException {
  try {
    final Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding");
    cipher.init(Cipher.ENCRYPT_MODE, key, iv);
    cipher.doFinal(*something*);
  } catch(Crypto1Ex ex){
    throw new MyModuleException("something is wrong", ex); //ex added, so it is not lost and visible in stacktraceses
  } catch(Crypto1Ex ex){
    throw new MyModuleException("something is wrong", ex);
  } //etc.
} 
```

在 Java 7 中，您可能会更轻松地处理它（请参阅：[http](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html) ://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html ）

# android - Wifi getSSID() 返回 null

> ID：15709422
> 
> 赞同：1
> 
> 时间：2013-03-29T18:40:26.823
> 
> 标签：android, wifi

建立新连接后，我使用 getSSID() 获取 wifi 网络的名称。但有时我会为该值获得 null 。这是我的代码：

清单中的权限是正确的，因为正如我所说，大多数情况下它都有效。

我将此过滤器用于广播接收器：

```
<action android:name="android.net.wifi.supplicant.CONNECTION_CHANGE" /> 
```

在广播中，我这样做：

```
if("android.net.wifi.supplicant.CONNECTION_CHANGE".equals(intent.getAction()))
{  boolean bConected = intent.getBooleanExtra(WifiManager.EXTRA_SUPPLICANT_CONNECTED, false);
   if(bConnected == true)
   {  WifiManager wifi = (WifiManager) Contexto.getSystemService(Context.WIFI_SERVICE);
      String MyName = wifi.getConnectionInfo().getSSID();
      Sometimes MyName is null here even if Wifi is connected correctly
   }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:51:46.607

`null`我经常使用类似的代码，但在连接时我从未收到过。

这是我的代码：

```
WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
WifiInfo info = wifi.getConnectionInfo();
String myName = info.getSSID(); 
```

因此，我建议您在收到`CONNECTION_CHANGE`广播后等待 400 到 1000ms 左右再请求信息。

* * *

这是一个将实现延迟的示例：

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        WifiInfo info = wifi.getConnectionInfo();
        String myName = info.getSSID();
    }
}, 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:52:37.297

Android 开发者网站指出：

> 如果当前没有连接网络，SSID 可能为空。

You're listening to a `CONNECTION_CHANGE` event, what if the state of the connection changed from connected to disconnected ?

Wifi devices gets sometimes disconnected from an access point and they do reconnect silently without you even noticed it was disconnected.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T16:32:31.033

I've found out the hard way that the supplicant subsystem is only relevant to the WPA security mechanism, and is really not a good choice to use for monitoring general wifi connection status. The verbiage in the documentation would lead you to believe that it's possible, but I had a lot of trouble when trying to use the supplicant actions, including issues similar to the one you describe.

From the [SupplicantState](http://developer.android.com/reference/android/net/wifi/SupplicantState.html) enum documenation:

> These enumeration values are used to indicate the current wpa_supplicant state. This is more fine-grained than most users will be interested in. In general, it is better to use NetworkInfo.State.

Using the NETWORK_STATE_CHANGED_ACTION and looking at the NetworkInfo extra I was able to get expected, stable behavior.

# python - Python仅重新单词和数字

> ID：15709423
> 
> 赞同：1
> 
> 时间：2013-03-29T18:40:27.073
> 
> 标签：python, regex

我正在尝试替换所有出现的`~,!,@,#,$,%,^,&`字符和其他一些字符，并删除制表符、换行符和多个空格。我只想清理并拥有单词和数字。

举个例子：

```
test! should be test
<script> should be script
test   test should be test test. 
```

我尝试使用`re.sub('[/.!,;+()]#-&?=<>|%$', ' ', string);`. 这替换了其中的一些，但是当我添加更多字符来替换它时，它就停止了工作。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:44:21.567

看起来您将新字符放置在字符类框之外。

尝试这个。

```
re.sub('[/.!,;+()#&?=<>|%$-]', ' ', string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:46:26.417

有些（如果不是所有）您使用的字符都是特殊的正则表达式字符，正则表达式引擎将它们解释为文字字符。

执行您所要求的更好的方法是删除所有不在您想要的字符集中的字符。

```
re.sub(r'[^0-9A-Za-Z \.]', '', input) 
```

删除多个空格有点复杂。

```
re.sub(r'\s{2,}', '', input) 
```

删除任何空白两次或更多次，什么都没有。

# web-services - 缓存即服务

> ID：15709429
> 
> 赞同：0
> 
> 时间：2013-03-29T18:41:00.730
> 
> 标签：web-services, caching, distributed-caching

有人知道任何缓存即服务产品吗？本质上，获取您最喜欢的语言的 SDK、API 密钥并从缓存服务中读取和写入？

就像是：

```
cache = new Cache;

// read from the cache
cache->get( api_key, cache_key );

// write to the cache
cache->set( api_key, cache_key, data, expiration ); 
```

我四处寻找，没有找到类似的东西。我只是好奇胜过一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:48:17.933

也许 memcached 可以解决问题：

[http://blog.couchbase.com/memcached-144-windows-32-bit-binary-now-available](http://blog.couchbase.com/memcached-144-windows-32-bit-binary-now-available)

[http://en.wikipedia.org/wiki/Memcached](http://en.wikipedia.org/wiki/Memcached)

更新

[http://aws.amazon.com/elasticache/](http://aws.amazon.com/elasticache/)

# javascript - 如何从 forEach 函数聚合 json 对象数组？

> ID：15709432
> 
> 赞同：1
> 
> 时间：2013-03-29T18:41:11.727
> 
> 标签：javascript, json, node.js

我想渲染 node.js 中所有项目的故事数组。怎么做？

```
app.get('/stories', function(request, response) {
  var projects_ids = [1,2]; 
  project_ids.forEach(function(id) {
    pivotal.getStories(id, function(err, project_stories) {
      console.log("Stories: " + project_stories);

      return JSON.stringify(project_stories);
    });
  });
  response.send(array_of_stories);
}); 
```

在日志中我得到：

```
Stories: [object Object]
Stories: [object Object] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:00:09.513

您当前的方法将不起作用，因为 getStories 是异步的（基于 的方法签名的假设`getStories`）。如果可以的话，我建议您创建一个`pivotal`可以获取多个项目 ID 的故事的方法，因此您的代码将显示为：

```
app.get('/stories', function(req, res) {
    var project_ids = [1, 2];
    pivotal.getStories(project_ids, function(err, project_stories) {
        res.send(project_stories);
    }
}); 
```

如果这不是一个选项，我建议您查看一个流库，例如[node-seq](https://github.com/substack/node-seq)。然后你的代码可以读到这样的东西：

```
app.get('/stories', function(req, res) {
    var project_ids = [1, 2];
    Seq(project_ids)
        .parEach(function(project_id) {
            pivotal.getStories(project_id, this);
        })
        .seq(function() {
            var aggregatedStories = [];
            Hash.map(this.args, (function(arg) {
            // Each parSeq aparently results in an array of objects
                aggregatedStories.push(arg[0]);
            }));
            res.send(aggregatedStories);
        });
}); 
```

该`Hash.map`函数来自一个名为的节点模块`hashish`

编辑：更详细地说，`parEach`将并行执行函数，并且在并行`seq`执行的所有回调完成后执行以下操作。`node-seq`将每次并行执行的结果放入下面的参数数组中`seq`，因此有点神秘`Hash.map(this.args)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:53:30.800

您希望您的服务器发送一个`project_stories`对象数组作为对请求的响应吗？我不确定您的 return 语句返回到哪里，因此省略了我会尝试类似于以下内容的方法来发送对象数组作为对请求的响应。**编辑：**正如其他人指出的那样，`.getStories`是异步的。或许你可以试试，[caolan 的异步模块](https://github.com/caolan/async#forEach)。像这样实现：

```
var async = require('async');
var array_of_stories = [];

var getStories = function(id, callback) {
  pivotal.getStories(id, function(err, project_stories) {
    array_of_stories.push(project_stories);
  });
}

app.get('/stories', function(request, response) {
  var projects_ids = [1,2];
  async.forEach(project_ids, getStories, function(error) {
    if(!error){
      response.send(array_of_stories);
    }
  });
}); 
```

# php - 在下拉菜单中显示“选择一个 ...”

> ID：15709434
> 
> 赞同：0
> 
> 时间：2013-03-29T18:41:34.583
> 
> 标签：php, mysql

我有一个使用下面的代码创建的下拉菜单，它从品牌表中获取所有品牌。它使用一个while 循环，因此在菜单上按字母顺序显示所有内容（即，阿迪达斯等）。因此，我不会`<options>`逐行将它们列为单独的。

```
echo "<form action=\"type.INC.php\" method=\"get\">\n";
echo "<select name=\"brand\">\n";

$stmt = mysqli_stmt_init($hook);
if($stmt=mysqli_prepare($hook,"SELECT brandid, brandname FROM brands WHERE brandid "));
{
mysqli_stmt_bind_param($stmt,"i", $brandid);
mysqli_stmt_execute($stmt);
mysqli_stmt_bind_result($stmt, $brandid, $brandname);
while(mysqli_stmt_fetch($stmt))
    {
    $brandname = htmlspecialchars($brandname, ENT_QUOTES, 'UTF-8');
    echo "<option value=\"$brandid\">$brandname </option>"; 
    }    
echo "</select>\n";
echo "<input name=\"submit\" type=\"submit\" id=\"brandid\" value=\"submit\" />\n";
echo "</form> \n"; 
```

如何显示句子“SELECT A BRAND”以显示为默认的第一个值？我应该在我的品牌表中输入“SELECT A BRAND”并将primaryID 分配为零吗？

有没有更好的方法来做到这一点？

我对这个问题的所有搜索都会导致与“select=selected 属性”相关的主题。

谢谢，珍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:43:01.060

只需在循环之前手动添加它：

```
echo "<form action=\"type.INC.php\" method=\"get\">\n";
echo "<select name=\"brand\">\n";
// Select a brand, empty value:
echo "<option value=\"\">(SELECT A BRAND)</option>";

$stmt = mysqli_stmt_init($hook);
if($stmt=mysqli_prepare($hook,"SELECT brandid, brandname FROM brands WHERE brandid "));
{
    mysqli_stmt_bind_param($stmt,"i", $brandid);
    mysqli_stmt_execute($stmt);
    mysqli_stmt_bind_result($stmt, $brandid, $brandname);
    while(mysqli_stmt_fetch($stmt))
    {
        $brandname = htmlspecialchars($brandname, ENT_QUOTES, 'UTF-8');
        echo "<option value=\"$brandid\">$brandname </option>"; 
    }    
    echo "</select>\n";
    echo "<input name=\"submit\" type=\"submit\" id=\"brandid\" value=\"submit\" />\n";
    echo "</form> \n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:43:42.410

添加

`echo "<option>SELECT A BRAND</option>";`

作为代码的第三行。

# ios - UITableView deselectRowAtIndexPath 调用 UITableviewCell setSelected？

> ID：15709435
> 
> 赞同：0
> 
> 时间：2013-03-29T18:41:38.600
> 
> 标签：ios, uitableview

我有自定义单元格，它们在选择时会执行一个简短的动画，并且在取消选择时应该动画回到它们的第一个状态。

这是我`setSelected`

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {

if (selected && animated) {
    NSLog(@"animate");
    [UIView animateWithDuration:0.3
                          delay:0.0
                        options:UIViewAnimationOptionBeginFromCurrentState
                     animations:^{
                         self.chevronImage.transform = CGAffineTransformMakeRotation(M_PI);
                         [self.chevronImage setCenter:CGPointMake(self.chevronImage.center.x, self.chevronImage.center.y - 1)];
                     }
                     completion:nil];
}

if (!selected && animated) {
    NSLog(@"unanimate");
    [UIView animateWithDuration:0.3
                          delay:0.0
                        options:UIViewAnimationOptionBeginFromCurrentState
                     animations:^{
                         self.chevronImage.transform = CGAffineTransformMakeRotation(0);
                         [self.chevronImage setCenter:CGPointMake(self.chevronImage.center.x, self.chevronImage.center.y + 1)];
                     }
                     completion:nil];
}

[super setSelected:selected animated:animated];
} 
```

这是调用它的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

if (![selectedIndex isEqual:indexPath]) {
    NSLog(@"select %i", indexPath.row);
    [tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionNone];
}
if (selectedIndex != nil) {
    NSLog(@"deselect %i", selectedIndex.row);
    [tableView deselectRowAtIndexPath:selectedIndex animated:YES];
}
if (controlRowIndex != nil && [indexPath isEqual:controlRowIndex]) {
    return;
}

indexPath = [self modelIndexPathforIndexPath:indexPath];
NSIndexPath *indexPathToDelete = controlRowIndex;

if ([indexPath isEqual:selectedIndex]){
    selectedIndex = nil;
    controlRowIndex = nil;
} else {
    selectedIndex = indexPath;
    controlRowIndex = [NSIndexPath indexPathForRow:indexPath.row + 1
                                         inSection:indexPath.section];
}

[self.tableView beginUpdates];
if (indexPathToDelete){
    [self.tableView deleteRowsAtIndexPaths:@[indexPathToDelete]
                          withRowAnimation:UITableViewRowAnimationFade];
}
if (controlRowIndex){
    [self.tableView insertRowsAtIndexPaths:@[controlRowIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
}
[self.tableView endUpdates];
} 
```

如果我选择一行然后再次点击它以取消选择它，这会很好。但是，如果我点击第 0 行，然后点击第 1 行，我会选择两行，第 0 行永远不会被取消选择。

我不知道有什么不同，我每次都传递完全相同的值，但如果它当前也被选中，我只能让它动画化。我已经验证它正在发送正确的 indexPath，所以我有点不知所措。

编辑：添加了完整的方法代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:36:34.293

我本来希望您将变量设置在`selectedIndex`中`didSelectRowAtIndexPath:`，但我看不到您在哪里设置它。因此，看起来您正在与错误的索引路径进行比较。

从概念上讲，我会先取消选择。

```
BOOL tappedSelectedCell = [selectedIndex isEqual:indexPath];
if (selectedIndex != nil) {
   // deselect selectedIndex
   selectedIndex = nil;
}

if (selectedIndex == nil && !tappedSelectedCell) {
   // select indexPath
   selectedIndex = indexPath;
} 
```

或更简单，但稍长

```
if (selectedIndex == nil) {
   // select indexPath
   selectedIndex = indexPath;
   return;
}

if ([selectedIndex isEqual:indexPath]) {
   // deselect indexPath
   selectedIndex = nil;
}
else {
    // deselect selectedIndex
    // select indexPath
    selectedIndex = indexPath;
} 
```

# php - 展平阵列

> ID：15709438
> 
> 赞同：0
> 
> 时间：2013-03-29T18:41:51.727
> 
> 标签：php

我有一个将数组更改为 html 列表（ol/ul）的函数。数组的深度作为参数传递。

我只想在一个函数中做到这一点。

```
for($i = 0; $i < $depth; $i++) {
   foreach($list_array as $li) {
      if(! is_array($li))
      {
         $str .= '<li>' . $li . '</li>';
      }
   }
} 
```

这段代码给了我数组的第一个维度。每次`$i`增量时，我都想展平这个数组。

你有什么建议可能有用吗？

是的，我知道`array_walk_recursive()`，对象迭代器等......我想知道是否有一种简单的方法可以在不使用任何其他方法的情况下完成这项任务。我什么都想不出来。

不，这不是任何不允许我使用迭代器等的大学项目。

编辑：

```
print_list(array(
   'some first element',
   'some second element',
   array(
      'nested element',
      'another nested element',
      array(
         'something else'
      )
   )
)); 
```

应该输出类似：

```
<ul>
   <li>some first element</li>
   <li>some second element</li>
   <ul>
      <li>nested element</li>
      <li>another nested element</li> // etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:00:46.637

这可能是使用递归最容易完成的：

```
function print_list($array){
    echo '<ul>';
    // examine every value in the array
    // (including values that may also be arrays)
    for($array as $val){
        if(is_array($val){
            // when we discover the value is, in fact, an array
            // print it as if it were the top-level array using
            // this function
            print_list($val);
        }else{
            // if this is a regular value, print it as a list item
            echo '<li>'.$val.'</li>';
        }
    }
    echo '</ul>';
} 
```

如果你想做缩进，你可以定义一个深度跟踪参数和一个协程 ( `print_list_internal($array, $depth)`) 或者只是添加一个默认参数 ( `print_list($array,$depth=0)`)，然后根据`$depth`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:05:07.930

```
function print_list($array) {
  echo '<ul>';
  // First print all top-level elements
  foreach ($array as $val) {
    if (!is_array($val)) {
      echo '<li>'.$val.'</li>';
    }
  }
  // Then recurse into all the sub-arrays
  foreach ($array as $val) {
    if (is_array($val)) {
      print_list($val);
    }
  }
  echo '</ul>';
} 
```

# ruby-on-rails - redirect_to @client 是什么意思？

> ID：15709439
> 
> 赞同：0
> 
> 时间：2013-03-29T18:41:52.493
> 
> 标签：ruby-on-rails

这里我有一个客户端的脚手架，在 ClientsController 的 create 方法中，

```
if @client.save
  redirect_to @client
else
  render :action => "new"
end 
```

这里重定向到客户端类的实例变量意味着什么？

此外，在 else 中，如果保存失败，render 会渲染新的视图。但是，控制器如何将原始输入保持在同一位置？（例如，我填写表格并发送但未能继续，因此它会将我带回新的客户页面，并在正确的位置输入我的原始输入。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:46:25.043

`redirect_to @client`重定向到`clients/show/1`目录。其中 1 是客户端的 ID。并`render :action => "new"`渲染新动作，有关更多详细信息，请参阅[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

# javascript - $.parseJSON 意外字符

> ID：15709440
> 
> 赞同：1
> 
> 时间：2013-03-29T18:41:55.783
> 
> 标签：javascript, php, jquery, mysql, ajax

我正在尝试从元素`data`上的 html 属性发送数据`span`并使用 Ajax 接收它，然后使用 php 和 mysql 处理它并将新值返回给我在 html 中的 data 属性，但是我收到一个错误，上面写着“$ .parseJSON 意外字符”，有人可以查看我的代码，看看我是否正确处理数据，因为我是使用 JSON 的新手。

**HTML / PHP**

```
<span data-object=
'{"art_id":"<?php echo $row['art_id'];?>",
"art_featured":"<?php echo $row['art_featured'];?>"}' 
class="icon-small star-color"></span>
<!-- art_id and art_featured are both int and art_featured will be either 1 or 0 --> 
```

**jQuery/阿贾克斯**

```
$("span[class*='star']").on('click', function () {
    var data = $.parseJSON($(this).data('object'));
    var $this = $(this);

    $.ajax({
        type: "POST",
        url : "ajax-feature.php",
        data: {art_id: data.art_id,art_featured: data.art_featured}
    }).done(function(result) {
        data.art_featured = result;
        $this.data('object', JSON.stringify( data ));
    });

}); 
```

**PHP/mySQL**

```
if($_POST['art_featured']==1) {
        $sql_articles = "UPDATE `app_articles` SET `art_featured` = 0 WHERE `art_id` =".$_POST['art_id'];

        $result = array('art_id' => $_POST['art_id'], 'art_featured' => 0);
        echo json_encode($result);
    }
    else if($_POST['art_featured']==0){
        $sql_articles = "UPDATE `app_articles` SET `art_featured` = 1 WHERE `art_id` =".$_POST['art_id'];

        $result = array('art_id' => $_POST['art_id'], 'art_featured' => 1);
        echo json_encode($result);
    }

    if(query($sql_articles)) {

    }
    else {

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:44:04.647

你不需要使用`$.parseJSON`，jQuery 会为你做这些。

```
$("span[class*='star']").on('click', function () {
    var data = $(this).data('object');
    var $this = $(this);

    $.ajax({
        type: "POST",
        url : "ajax-feature.php",
        data: {art_id: data.art_id,art_featured: data.art_featured}
    }).done(function(result) {
        data.art_featured = result;
        $this.data('object', data);
    });

}); 
```

您也不需要稍后对其进行字符串化。

# php - 在两个不同服务器上的两个不同页面之间来回传递变量

> ID：15709447
> 
> 赞同：0
> 
> 时间：2013-03-29T18:42:23.337
> 
> 标签：php

我想在 php 中的两台服务器之间传递变量，例如 A 将发送给 B，然后 B 将对此进行处理并将结果传递给 A，然后 A 将根据结果对其进行处理并将结果传递给 B 等等。这是服务器 A 上的代码。它将电子邮件传递给 B 并将结果存储在 $result 中。

```
$Email = $_POST['email'];
$postdata="&email=$Email";
$useragent= "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" ; 

$ch = curl_init("http://www.gguproject.hostoi.com/handler.php"); 
curl_setopt($ch, CURLOPT_USERAGENT, $useragent); //set our user agent 
curl_setopt($ch, CURLOPT_POST, 1); //set how many paramaters 
curl_setopt($ch, CURLOPT_POSTFIELDS,$postdata); //set data to post 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$result= curl_exec ($ch); //execute and get the results 
curl_close ($ch); 
```

这是服务器 B 上的代码。我无法将存储在 $row 中的查询结果传回服务器 A。

* * *

```
<?php 
require_once('database_connection.php') ;
ini_set ("display_errors", "1");  
error_reporting(E_ALL);  
$error = array();
$email = $_POST['email'];
if(!empty($email))
{
    $check;
    $query_check_credentials = "SELECT * FROM members WHERE (Email='$email') AND Activation IS NULL";
    $result_check_credentials = mysqli_query($dbc, $query_check_credentials);
        if(!$result_check_credentials)

        {
            print 3;
        }
        if (@mysqli_num_rows($result_check_credentials) == 1)//if Query is successfull 
        { // A match was made.

            $row= mysqli_fetch_array($result_check_credentials, MYSQLI_ASSOC);//Assign the result of this query to SESSION Global Variable
            print 2;
            $POST['name']=$row['Username'];

        }
        else
        { 
            print 1;

        }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:48:06.813

如果要将信息从 B 传递回 A，则应在 B 中回显它。`$result`将其包含为字符串。我建议使用 JSON 格式。

在 B 上，不要将 1、2、3 作为状态打印，而是将其放在`$status`变量中，例如

```
$status = 3; 
```

最后，执行：

```
$result = array('status' => $status, 'data' => $row);
echo json_encode($result); 
```

在 A 上，您可以执行以下操作：

```
$result = curl_exec ($ch);
$data = json_decode($result); 
```

然后，您可以使用`$data['status']`获取状态代码并`$data['data']`获取行。

# svn - Subclipse 生成嵌套的工作副本？

> ID：15709453
> 
> 赞同：1
> 
> 时间：2013-03-29T18:42:48.707
> 
> 标签：svn, subclipse

我正在尝试将 Subclipse 1.8.x 集成到我们现有的 Subversion 1.7.x 工作环境中，其中包括 Tortoise。当我使用**Team|Share Project...**功能将项目添加到现有工作副本时，Subclipse 在请求的位置创建一个新的嵌套工作副本，而不是将项目添加到现有工作副本。Tortoise 将其报告为嵌套的工作副本。

我不确定是否应该始终避免嵌套工作副本，但它们肯定更难使用。我可以通过在 Eclipse 中分离项目，从 Tortoise 添加项目，从 Tortoise 提交更改，然后在 Eclipse 中重新导入项目来解决此问题。

Subclipse 有没有办法在添加新项目时自动使用现有的工作副本？项目的位置是否比工作副本的顶层低了几个级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:48:57.243

当您共享一个项目时，会发生以下两种情况之一：

1) Subclipse 识别出该项目已经是一个有效的 SVN 工作副本。在这种情况下，它只会将其“连接”到 SVN，以便您可以对其使用 SVN 操作。

2) 它将通过提供在存储库中创建一个文件夹，在同一位置检查它，然后让您添加其余文件，将项目变成一个工作副本。

如果您在恰好已经是工作副本的文件夹结构中创建项目，则无法检测到这一点，因为 SVN 只会报告与某个随机文件夹相同的状态。在这种情况下，我建议您使用 TortoiseSVN 至少将项目根文件夹添加到 SVN，以便可以将其识别为工作副本的一部分。然后，Subclipse 应该能够将其连接到 SVN 并从那里处理其余部分。

# eclipse - 为什么叫“EMF Generator_Model_”？

> ID：15709456
> 
> 赞同：0
> 
> 时间：2013-03-29T18:42:57.057
> 
> 标签：eclipse, eclipse-emf

在 Eclipse 建模框架 (EMF) 中，有用于定义模型的 ecore 文件。从这个模型代码（和其他东西）可以生成。该生成步骤由“EMF 生成器模型”描述。现在我的问题是，为什么这个文件被称为“模型”而不是“配置”或类似的东西。在我看来，它没有建模任何东西，但它描述了一个生成步骤......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T08:44:38.323

EMF 的当前实现是使用引导方法创建的。起初，描述存储在 ecore 和 genmodel 中的数据的模型是手工编写的。一旦 EMF 足够稳定，它们就会被 EMF 本身建模和生成。这意味着，ecore 和 genmodel 在任何方面都是 EMF 模型。

这类似于为新的编程语言开发了多少编译器。初始实现必须用第二种语言编写，但一旦编译器完成，您就可以使用新语言编写新实现，添加功能，然后使用之前版本编译器的二进制文件来创建下一个。

来自 EMF 的创建者 Ed Merks：

> 毕竟，EMF 的生成器模型会生成 Ecore 模型和自身，因此我们实际上无法删除我们生成的代码。我们需要它来引导环境。这是个棘手的问题。 [http://ed-merks.blogspot.de/2008/10/hand-written-and-generated-code-never.html](http://ed-merks.blogspot.de/2008/10/hand-written-and-generated-code-never.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T15:33:11.443

While the other answers are perfectly correct, there is one additional difference between a "model" and a "configuration". All EMF models (including this generator model) can be modified, transformed and so on by *every already available EMF tool* (because they all use the same meta model).

This is a huge difference compared to the situation that the configuration can only be read by another tool, if it knows the exact format of the configuration serialization.

So you can create an UML diagram of the generator model, you can use it in a model based graphical editor, you can transform it using model-to-model transformation plugins, you can put it into EMFstore, ... without any of these tools having been prepared specifically for *that* model.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T22:29:28.483

实际上，从技术上讲`genmodel`，这些`ecore`文件也是 EMF 模型。因此，以这种方式调用它并不奇怪。

事实上，您必须了解 EMF 允许描述任何类型的结构化信息。所以它可以用来描述你自己的语义以及描述代码生成配置甚至描述自己（ecore）。

# jquery - JQuery - 验证器插件

> ID：15709460
> 
> 赞同：0
> 
> 时间：2013-03-29T18:43:23.173
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

我想将验证器插件与 Twitter Bootstrap 一起使用。但是，它目前并没有真正起作用，我现在不知道为什么。

我的表格：

```
<div class="form_errors"></div>
<div class="form_holder_invitee" id="form_holder_invitee">
    <form class="homepage_invitee_form" id="homepage_invitee_form" action="add"
    method="get">
        <input name="email" placeholder="Email Address" id="email_address_new"
        type="text placeholder">
        <br>
        <input name="firstName" placeholder="First Name" id="firstname_new" type="text placeholder">
        <input name="lastName" placeholder="Last Name" id="lastname_new" type="text placeholder">
        <br>
        <button type="submit" class="btn btn-primary opal_btn" id="submit_form_new"
        value="submit">Request Invitation</button>
    </form>
</div> 
```

这是我的验证器脚本：

```
$(document).ready(function () {

    $('#form_holder_invitee').validate({
        rules: {
            firstName: {
                minlength: 2,
                required: true
            },
            email: {
                required: true,
                email: true
            },
            lastName: {
                minlength: 2,
                required: true
            }
        },
        highlight: function (element) {
            $(element).closest('.form_errors')
                .removeClass('success').addClass('error');
        },
        success: function (element) {
            element.text('OK!').addClass('valid')
                .closest('.form_errors')
                .removeClass('error').addClass('success');
        }
    });

}); // end document.ready 
```

还有一点 CSS 来显示错误：

```
label.error {
    font-weight: bold;
    color: red;
    padding: 2px 8px;
    margin-top: 2px;
} 
```

但是，当我输入表单时，什么也没有发生。这些库在我的 html 中正确配置。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:51:13.057

我认为这是因为您在包装器 div 而不是表单上注册了 .validate 函数？但我不知道验证器插件。

# c++ - d3dx11.lib 没有找到？

> ID：15709469
> 
> 赞同：9
> 
> 时间：2013-03-29T18:43:55.890
> 
> 标签：c++, directx, direct3d, directx-11, direct3d11

我正在使用 Windows 8 / Visual Studio 2012、C++11 和 Direct3D 11 进行开发。

我包括这样的 Direct3D 库

```
#pragma comment(lib, "dxgi.lib")
#pragma comment(lib, "d3d11.lib")
#pragma comment(lib, "d3dx11.lib") // <-- error LNK1104: cannot open file 'd3dx11.lib'
#pragma comment(lib, "d3dx10.lib") 
```

但是，链接器似乎找不到**d3dx11.lib**。将库所在的路径添加到项目的“库目录”后，链接器仍然找不到这些文件。即使我将 lib 文件复制到项目目录本身之后，它也不起作用。

我从 2010 年 6 月起安装了 Windows 8 SDK 和 DirectX SDK。我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T15:13:09.370

当我自己处理这个问题时，我从这里开始：

[DirectX SDK 在哪里？](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275%28v=vs.85%29.aspx)

然后 - 在该页面的中间，阅读有关 DirectXMath 的信息：

[DirectXMath](http://msdn.microsoft.com/en-us/library/windows/desktop/hh437833%28v=vs.85%29.aspx)

它几乎只是包括正确的头文件并将“D3DX”前缀更改为“XM”。不是那么简单，但这是一般的想法。

你的第一个程序可能会有这样的包含/使用：

```
#include <d3d11.h>
#include “DirectXMath.h”
#include “DirectXPackedVector.h”

using namespace DirectX; 
using namespace DirectX::PackedVector;

struct mystruct
{
   DirectX::XMFLOAT3 position;
   DirectX::PackedVector::HALF packedValue;
}; 
```

当然，“使用命名空间”并不是最佳实践，但在这个例子中，我发现程序每一行上的“DirectX::”让我的程序几乎无法（对我）阅读——所以我去了与“使用”。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-20T09:46:58.860

可能您在属性中包含了错误的路径，而不是“*DirectxSDK/Lib/x86”，您包含了“”*DirectxSDK/Lib”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-03T02:23:15.717

我在使用 VS2010 时也遇到了这个问题，但我刚刚找到了解决方案。您需要为链接器提供您遇到问题的库文件。

项目->属性->配置属性->**链接器**->附加库目录

然后将您想要的库文件添加到那里。为我工作，希望也对你有用，然后你不必弄乱 DirectXMath 并为它寻找新的教程。

# git - 使用 Git 创建补丁 - 仅保留文件路径的基本名称？

> ID：15709475
> 
> 赞同：2
> 
> 时间：2013-03-29T18:44:17.940
> 
> 标签：git, patch

我的情况是我正在对已安装的 Drupal 模块进行更改，我想将其提交回项目（对开源来说是的）。我的问题是这样的：

```
diff --git a/docroot/profiles/commons/modules/contrib/features/features.drush.inc b/docroot/profiles/commons/modules/contrib/features/features.drush.inc
index 0d7a10d..ae5e88b 100644
--- a/docroot/profiles/commons/modules/contrib/features/features.drush.inc
+++ b/docroot/profiles/commons/modules/contrib/features/features.drush.inc 
```

显然，这些是补丁文件的前几行，告诉补丁命令在哪里可以找到要补丁的文件。但是，由于我想将其提交回功能项目，因此我想将其`docroot/profiles/commons/modules/contrib/features/`从路径中删除。所以，上面应该是这样的：

```
diff --git a/features.drush.inc b/features.drush.inc
index 0d7a10d..ae5e88b 100644
--- a/features.drush.inc
+++ b/features.drush.inc 
```

我已经看过了，`man git-diff`但我还没有看到这样做（即只保留文件名）。我大概是个盲人。

**TL;博士**

使用 Git 创建补丁文件时，如何仅保留文件路径的基本名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:08:30.230

的`--relative`选项`git diff`做到了。

# java - From where can I download classes12.jar file for jdk7

> ID：15709477
> 
> 赞同：-2
> 
> 时间：2013-03-29T18:44:22.147
> 
> 标签：java, jakarta-ee

I am new to WCD programming. So I am not understanding from where can I download classes12.jar file. I also don't know exactly whether it is automatically available with jdk or oracle or it has to be downloaded. And where should I place the file after downloading????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:46:28.417

That file would be the Oracle drivers. You need to look at the Oracle (database) web site to find the correct variety for your version of Java and your release number of Oracle.

If you have database admins you can check with, they might be able to supply the right jar file.

*Note*

The 12 refers to Java version 1.2\. Up to a point, Oracle used this naming convention. Then they just sort of quit paying attention. It was pretty much justified as Java became more and more stable between versions.

# jquery - Web 发布的应用程序脚本 HTML 服务/JQueryUI 应用程序不起作用。开发版可以

> ID：15709479
> 
> 赞同：2
> 
> 时间：2013-03-29T18:44:39.000
> 
> 标签：jquery, html, google-apps-script

我使用 HTML 服务制作了一个简单的 JQUERY UI Datepicker 应用程序，只是为了看看事情是如何工作的。它有一个文本框，单击时会显示日期选择器，旁边有一个本地化选择器。当我从开发人员链接执行它时，它虽然非常慢，但仍然有效。

但是，当我尝试从与 Dev 链接不同的 Web 发布链接执行相同的应用程序时，它不起作用。它显示文本框，但不显示允许您选择本地化的列表框。单击时它也不显示日期选择器。

**代码.gs：**

```
function doGet() {

Logger.log(getContent("jquidatepickerFR"));
Logger.log(getContent("jquidatepickerTR"));
var result=HtmlService.createTemplateFromFile('myPage').evaluate();
  Logger.log(result.getContent());  
return result;
}

function getContent(filename) {

var return1= HtmlService.createTemplateFromFile(filename).getRawContent();
return return1;
} 
```

**我的页面.html**

```
<!doctype html>

<html lang="tr">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Datepicker - Localize calendar</title>
  <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.js"></script>

  <?!= getContent("jquidatepickerTR")?>
  <?!= getContent("jquidatepickerFR")?>
  <?!= getContent("style")?>
  <script>
  $(function() {
    $.datepicker.setDefaults( $.datepicker.regional[ "" ] );
    $( "#datepicker" ).datepicker( $.datepicker.regional[ "tr" ] );
    $( "#locale" ).change(function() {
      $( "#datepicker" ).datepicker( "option",
        $.datepicker.regional[ $( this ).val() ] );
    });
  });
  </script>
</head>
<body>

<p>Date: <input type="text" id="datepicker" />&nbsp;
  <select id="locale">
    <option value="tr"  selected="selected">Türkçe</option>
    <option value="fr">French (Français)</option>
  </select></p>

</body>
</html> 
```

[公共网络应用程序链接](https://script.google.com/macros/s/AKfycbwL8ztpdngWDaLpvCeAZvlwo94aGowa6MIVNyWgw9ovxixqWIR6/exec)

这是什么原因造成的，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T20:42:27.423

答案就在这里，我想（但我不明白......）。这是一个卡哈问题。

[https://code.google.com/p/google-caja/issues/detail?id=1645](https://code.google.com/p/google-caja/issues/detail?id=1645)

# c# - 如何删除 GTK 窗口

> ID：15709487
> 
> 赞同：0
> 
> 时间：2013-03-29T18:44:59.443
> 
> 标签：c#, gtk

我创建了一个 GTK 窗口，现在我不再需要它了，那么如何从内存中删除它呢？

我想调用`Hide()`然后删除所有引用并不会真正让 GC 清理所有东西，所以我需要调用一些额外的函数以便完全从内存中删除窗口吗？

我想这`Dispose()`是一个很好的候选人，但我不知道它实际上做了什么，因为文档很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:57:10.323

[gtk_widget_destroy()](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-destroy)。

无论如何，如果您使用的是[c#](/questions/tagged/c%23 "显示标记为“c#”的问题") [1]，那么当最后一个引用超出范围时，绑定应该会自动处理对象销毁。

[1] 我对 C# 一无所知，但至少在[lua](/questions/tagged/lua "显示标记为“lua”的问题")中是这样的。

# php - PHP中是否有强制字符串采用日期时间格式？

> ID：15709493
> 
> 赞同：0
> 
> 时间：2013-03-29T18:45:34.383
> 
> 标签：php, datetime

[您可以在此处](http://www.php.net/manual/en/datetime.formats.php)查看所有接受的日期时间格式。

```
$timeString = 'Y-m-d';
$this->isDateTimeFormat($trimeString); // returns true
$this->isDateTimeFormat('Sponge Bob'); // returns false 
```

我对用正则表达式解决这个问题不感兴趣，我已经遇到了*一个*问题。但也许有人知道一种方法来检查字符串是否符合要求，如果不符合则抛出异常？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:48:32.177

[`strtotime`](http://www.php.net/manual/en/function.strtotime.php)在日期 运行函数。

如果它返回 0、false 或 -1 以外的任何值，那么它就是一个好日期。

如果之后您希望它采用特定格式，只需[`date`](http://www.php.net/manual/en/function.date.php)在其上放置格式即可。
我总是添加`date`格式，因为正如 Boaz 所说，它接受“明天”或“+2 周”作为日期。

# objective-c - 比较两个具有相同值但顺序不同的数组

> ID：15709494
> 
> 赞同：7
> 
> 时间：2013-03-29T18:45:37.410
> 
> 标签：objective-c, nsarray

我有 2 个 nsarray，具有相同的值但顺序不同。

NSArray * array1 = {0,1,2,3}
NSArray * array2 = {2,3,1,0}

我需要一种方法来确定两个数组是否以不同的顺序具有相同的值。

有点儿

```
-(BOOL) isSameValues:(NSArray*)array1 and:(NSArray*)array2; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-29T19:29:35.477

You can use `NSCountedSet` for that purpose:

```
- (BOOL)isSameValues:(NSArray*)array1 and:(NSArray*)array2
{
    NSCountedSet *set1 = [NSCountedSet setWithArray:array1];
    NSCountedSet *set2 = [NSCountedSet setWithArray:array2];
    return [set1 isEqualToSet:set2];
} 
```

`NSCountedSet` is a collection of different objects, where each object has an associated counter with it. Therefore the result for

```
NSArray *array1 = @[@0,@1,@2,@3];
NSArray *array2 = @[@2,@3,@1,@0]; 
```

is `YES`, but for

```
NSArray *array1 = @[@1,@1,@3,@3];
NSArray *array2 = @[@3,@3,@3,@1]; 
```

the result is `NO`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T18:47:32.243

**更新：**如果数组有重复元素，这将不起作用！

`NSSet`您可以使用这些数组创建两个s 并进行比较。

```
NSArray * array1 = @[@0,@1,@2,@3];
NSArray * array2 = @[@2,@3,@1,@0];

NSSet *set1 = [NSSet setWithArray:array1];
NSSet *set2 = [NSSet setWithArray:array2];

NSLog(@"result %@", [set1 isEqualToSet:set2] ? @"YES" : @"NO"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T18:48:52.393

```
if ([[NSSet setWithArray:array1] isEqualToSet:[NSSet setWithArray:array2]]) {
    // the objects are the same
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T18:54:34.647

取元素总数。有一个柜台。并放置双'for循环'来解析彼此的每个元素。在每次匹配时增加计数器。注意：这在所有元素都是唯一的情况下有效。

如果不同或您不知道，请将它们排序并一对一匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T18:57:28.470

另一种方法是使用`NSHashTable`.

```
- (BOOL)array:(NSArray *)array1 containsTheSameObjectsAsArray:(NSArray *)array2 {
    if (array1.count != array2.count) {
        return NO;
    }
    NSHashTable *table = [[NSHashTable alloc] initWithOptions:NSHashTableWeakMemory 
                                                     capacity:array1.count];
    for (NSObject *object in array1) {
        [table addObject:object];
    }
    for (NSObject *object in array2) {
        if (![table containsObject:object]) {
            return NO;
        }
    }
   return YES;
} 
```

Note that `NSHashTable` requires iOS 6+

# python - Python：使用 mini dom 解析 XML

> ID：15709499
> 
> 赞同：0
> 
> 时间：2013-03-29T18:45:50.793
> 
> 标签：python, xml, parsing, text-parsing

我正在解析一个大小合适的 xml 文件，但遇到了问题。出于某种原因，即使我之前对不同的 xml 文件做了*完全相同的事情，我也无法提取数据。*

这是我的代码片段：（程序的其余部分，我已经测试过并且它们工作正常）编辑：更改为包含测试 try&except 块

```
def parseXML():
    file = open(str(options.drugxml),'r')
    data = file.read()
    file.close()
    dom = parseString(data)
    druglist = dom.getElementsByTagName('drug')

    with codecs.open(str(options.csvdata),'w','utf-8') as csvout, open('DrugTargetRel.csv','w') as dtout:
        for entry in druglist:
        count = count + 1
        try:
            drugtype = entry.attributes['type'].value
            print count
        except:
            print count
            print entry
            drugidObj = entry.getElementsByTagName('drugbank-id')[0]
            drugid = drugidObj.childNodes[0].nodeValue
            drugnameObj = entry.getElementsByTagName('name')[0]
            drugname = drugnameObj.childNodes[0].nodeValue

            targetlist = entry.getElementsByTagName('target')
            for target in targetlist:
                targetid = target.attributes['partner'].value
                dtout.write((','.join((drugid,targetid)))+'\n')

            csvout.write((','.join((drugid,drugname,drugtype)))+'\n') 
```

如果您想知道 XML 文件的架构大致是什么样子，这里有一个粗略的可怕的关卡草图：

```
<drugs>
   <drug type='something' ...>
      <drugbank-id>
      <name>
      ...
      <targets>
         <target partner='something'> 
```

我在这里输入的那些，我需要从 XML 文件中提取并将其粘贴到 csv 文件中（如上面的代码所示），并且该代码以前适用于不同的 xml 文件，不知道为什么它不适用于这个文件。我在'type'上得到了KeyError，即使每种药物都有一个drugid，我也得到了提取drugid的索引错误。我在这里搞砸什么？

编辑：我提取的东西保证在每种药物中都有。

对于任何关心的人，这里是我正在解析的 XML 文件的链接： [http ://www.drugbank.ca/system/downloads/current/drugbank.xml.zip](http://www.drugbank.ca/system/downloads/current/drugbank.xml.zip)

编辑：在实现 try & except 块（见上文）后，我发现：在架构中，有一些称为“药物相互作用”的部分*也*有一个名为*drug*的子字段。所以像这样：

```
 <drugs>
       <drug type='something' ...>
          <drugbank-id>
          <name>
          ...
          <targets>
             <target partner='something'>
          <drug-interactions>
             <drug> 
```

我认为我的行 druglist = dom.getElementsByTagName('drug') 也无意中捡起了这些——我不知道如何解决这个问题……有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:44:39.980

我有一种感觉，可能由于内存不足或其他原因发生了一些奇怪的事情，所以我使用迭代器对每种药物重写了解析器，并尝试了它并让程序在没有引发异常的情况下完成。

基本上我在这里所做的是，我没有将整个 XML 文件加载到内存中，而是解析 XML 文件以查找每个`<drug>`and`</drug>`标记的开头和结尾。然后我每次都用 minidom 解析它。

代码可能有点脆弱，因为我假设每个`<drug>`和`</drug>`对都在自己的行上。希望它的帮助大于它的危害。

```
#!python
import codecs
from xml.dom import minidom

class DrugBank(object):
    def __init__(self, filename):
        self.fp = open(filename, 'r')

    def __iter__(self):
        return self

    def next(self):
        state = 0

        while True:
            line = self.fp.readline()

            if state == 0:
                if line.strip().startswith('<drug '):
                    lines = [line]
                    state = 1
                    continue

                if line.strip() == '</drugs>':
                    self.fp.close()
                    raise StopIteration()

            if state == 1:
                lines.append(line)
                if line.strip() == '</drug>':
                    return minidom.parseString("".join(lines))

with codecs.open('csvout.csv', 'w', 'utf-8') as csvout, open('dtout.csv', 'w') as dtout:
    db = DrugBank('drugbank.xml')
    for dom in db:
        entry = dom.firstChild
        drugtype = entry.attributes['type'].value
        drugidObj = entry.getElementsByTagName('drugbank-id')[0]
        drugid = drugidObj.childNodes[0].nodeValue
        drugnameObj = entry.getElementsByTagName('name')[0]
        drugname = drugnameObj.childNodes[0].nodeValue

        targetlist = entry.getElementsByTagName('target')
        for target in targetlist:
            targetid = target.attributes['partner'].value
            dtout.write((','.join((drugid,targetid)))+'\n')

        csvout.write((','.join((drugid,drugname,drugtype)))+'\n') 
```

可以进一步帮助您的有趣阅读在这里： [http ://www.ibm.com/developerworks/xml/library/x-hiperfparse/](http://www.ibm.com/developerworks/xml/library/x-hiperfparse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:19:56.043

基本上，在解析 xml 时，您不能依赖于您知道结构的事实。找出代码中的结构是一个好习惯。

因此，每次访问元素或属性时，请先检查是否有。在您的代码中，它意味着以下内容：

确保药物元素上有一个属性“类型”：

```
drugtype = entry.attributes['type'].value if entry.attributes.has_key('type') else 'defaulttype' 
```

确保 getElementsByTagName 在访问其元素之前不返回空数组：

```
drugbank-id = entry.getElementsByTagName('drugbank-id')
drugidObj = drugbank-id[0] if drugbank-id else None 
```

此外，在访问子节点之前，请确保有：

```
if drugidObj.hasChildNodes:
    drugid = drugidObj.childNodes[0].nodeValue 
```

或者使用 for 循环遍历它们。

当您调用`getElementsByTagName`drug elemet 时，它会返回所有元素，包括嵌套元素。要仅获取药物元素，它们是药物元素的直接子元素，您必须使用`childNodes`属性。

# c++ - 访问子类 C++ 的属性/函数

> ID：15709500
> 
> 赞同：0
> 
> 时间：2013-03-29T18:45:50.797
> 
> 标签：c++, inheritance

我在我的程序中遇到了设计问题，因为我偶尔需要访问所有存储在基类指针向量中的子类的属性和方法。我的代码看起来像这样：

```
class B1;
class B2;
class Base {
  private:
  int id, a, b;

  public:
  virtual int getA() { return a; }
  virtual int getB() { return b; }
  virtual B1 *getB1() { return NULL; } //seems like a bad idea
  virtual B2 *getB2() { return NULL; }  //to have these two functions
  Base(int newId) { id = newId; }
};

class B1 : public Base {
   private:
   int x;

   public:
   int getX() { return x; }
   B1 *getB1() { return this; }
};

class B2 : public Base {
   private:
   int y;

   public:
   int getY() { return y; }
   B2 *getB2() { return this; }
};

class Thing {
   private:
   std::vector<Base*> bases;

   void addBase(Base *base) { bases.push_back(base); }
   void doB1Stuff();
   void doB2Stuff();
   void setAandB(int ID, int newA, int newB); //set a and b of one of the elements in bases vector based upon the id given
}; 
```

问题是我是否需要在 Thing 中访问 x 或 y，如下所示：

```
void Thing::doB1Stuff() {
  for(std::vector<Base*>::iterator it = bases.begin(); it != bases.end(); ++it) {
    if (it->getB1()) {
      //do stuff with b1
    }
  }
} 
```

上面的代码应该可以工作，但如果这似乎是个坏主意，因为在使用 B1/B2 属性之前很容易忘记检查指针是否为空，如下所示：

```
void Thing::doB2Stuff() {
  for(std::vector<Base*>::iterator it = bases.begin(); it != bases.end(); ++it) {
    std::cout << it->getY(); //I believe this will crash the program if a NULL pointer is returned
  }
} 
```

因此，我的问题是：什么是访问子类属性的好方法？我正在考虑在 Thing 中为 B1s 和 B2s 设置两个单独的向量，但这似乎也不是一个好主意，因为我需要能够轻松设置 a 和 b。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:51:36.950

您所拥有的一切都很好：只要您不将`NULL`s 存储在`bases`指针向量中，就无需对迭代器返回的值进行空值检查。不幸的是，指针向量是多态对象容器的唯一选择。您可以创建一个共享指针向量来简化删除处理，但基本思想将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:50:06.257

您可以检查您正在访问的项目是否是您正在寻找的正确子类类型，但要执行此操作，您需要包含运行时类型信息 (rtti)。

然后，如果它是某种类型而不是 null，您可以将其强制转换为该类型并调用正确的函数。

您也可以使用[动态](http://www.cplusplus.com/doc/tutorial/typecasting/)_cast，尽管要使其正常工作，您需要再次使用 rtti，这与检查自己然后进行静态转换基本相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:54:18.523

没错，这不是解决问题的好方法，您可以使用`dynamic_cast`一种安全的方法来确定要使用的对象，但这对我来说是不好的代码味道。

为了访问子属性，我会做的是创建一个虚函数，它返回您在 Base 类中想要的值。

例子：

```
class Base {
  private:
  int id, a, b;

  public:
  virtual int getA() { return a; }
  virtual int getB() { return b; }
  virtual int getSubValue() = 0; // 
  Base(int newId) { id = newId; }
};

class B1 : public Base {
   private:
   int x;

   public:
   int getSubValue() { return x; }   
};

class B2 : public Base {
   private:
   int y;

   public:
   int getSubValue() { return y; }   
}; 
```

然后你可以调用它->getSubValue() 来获取你请求的子值。

这是我的意见，有很多方法可以解决这个问题，但这是我根据您提供的信息提出的建议。

# css - 儿童主题css类问题

> ID：15709506
> 
> 赞同：0
> 
> 时间：2013-03-29T18:45:58.693
> 
> 标签：css, wordpress-theming

我是学生。我正在我的博客上构建一个 WordPress 子主题。我@import 父主题。我将一个类定义为子主题的最后一个语句。当我在标题标签上使用该类将文本变为红色时，该类的一部分正在工作。我在类中定义的边距被父主题覆盖？为什么？[http://rollingokie.com/how-to-find-cheap-airfare/](http://rollingokie.com/how-to-find-cheap-airfare/) -> 检查元素 -> “了解” 哦，是的，我阅读了 Coyier 的文章和 !important 的作品。那么我不明白的级联中发生了什么？我的边距的特异性值是否与父主题中的值相同？谢谢。你们这些人很棒。大多...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:05:32.567

好吧，您需要研究特异性。这并不意味着链接一堆类，它意味着元素本身，如 h2 标签本身和类和 ID 一样具有“权重”。

不管你有多少 ID 的覆盖类：

```
<div class ="firstDiv firstP redHeader">stuff</div> 
```

不像以下那样“具体”：

```
<div id="colorMeRed">stuff</div> 
```

无论规则何时何地出现（当然不包括内联样式），一个 ID 比这三个类具有更大的权重并且将被覆盖。

所以谷歌'特异性和重量'。你会发现：0100 = 一个 id，我上面的类示例是 =0030。注意放置。01 大于 003

# html - 链接在 chrome 中不起作用

> ID：15709509
> 
> 赞同：-8
> 
> 时间：2013-03-29T18:46:21.187
> 
> 标签：html, css, hyperlink

我正在进行一个项目，顶部导航链接在 chrome 中不起作用。

当您单击它们时，没有任何反应

这是网站[http://www.blackcountrydesigns.co.uk/examples/green](http://www.blackcountrydesigns.co.uk/examples/green)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:47:20.933

你看代码了吗？他们哪儿也不去……

```
<li><a class="entypo-home active" href="http://www.google.com">Home</a></li>
<li><a class="entypo-briefcase" href="#">Services</a></li>
<li><a class="entypo-picture" href="#">Portfolio</a></li>
<li><a class="entypo-address" href="#">Contact</a></li> 
```

# php - 在 PHP 中使用 AJAX 请求保存 base64 编码的图像

> ID：15709515
> 
> 赞同：13
> 
> 时间：2013-03-29T18:47:15.230
> 
> 标签：php, jquery, base64

我将画布图像编码为 base64，这给了我这个：

```
data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAICAgICAQICAgICAgIDAwYEAwMDAwcFBQQGCAcICAgHCAgJCg0LCQkMCggICw8LDA0ODg4OCQsQEQ8OEQ0ODg7/2wBDAQICAgMDAwYEBAYOCQgJDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg7/wAARCAAKAAoDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD5a/Z7/Zw8EfF/9mT4h6Z4u0GTwt8WNP1iSya7vZp0uNKYJBsItyANjt5o2uGkDBsHhMfDsOn2zWcTQ39tJCUBR5HVGYY4JUEgH2BIHrXunw71vWdI/aa+POraTq+p6Xqr+H/Edy15aXTxTNMt4m2QupDbxubDZyMn1r4yRE8pflXoO1fleQYDEzzHGxnXbjeEop6qPNFtpXb00Wm3zP1vNM2pUMLh5RpK75k3fV8rVm7LzP/Z 
```

这似乎是一个有效的 base64 图像（使用在线解码器对其进行解码）。

我使用 jquery ajax 将其与其他（表单）变量一起发送，如下所示：

```
$.ajax({
    type: "POST",
    url: "index.php?action=saveNewPost",
    data: {text: text, img: encodeURIComponent(base64img)},
    contentType: "application/x-www-form-urlencoded;charset=UTF-8",
    success: function(){
        //...
    }
}); 
```

在服务器上这行：

```
saveImage(utf8_decode($_POST['img'])); 
```

调用：

```
function saveImage($base64img){
    define('UPLOAD_DIR', '../uploads/');
    $base64img = str_replace('data:image/jpeg;base64,', '', $base64img);
    $data = base64_decode($base64img);
    $file = UPLOAD_DIR . uniqid() . '.jpg';
    file_put_contents($file, $data);
} 
```

但是，该文件未保存。有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T19:04:05.493

让我们尝试使用单个函数和调用在同一文件夹中创建文件 test.php，检查浏览器中的输出错误或`/var/log/httpd/error_log`

```
<?php

function saveImage($base64img){
    define('UPLOAD_DIR', '../uploads/');
    $base64img = str_replace('data:image/jpeg;base64,', '', $base64img);
    $data = base64_decode($base64img);
    $file = UPLOAD_DIR . '123123123.jpg';
    file_put_contents($file, $data);
}

saveImage('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAICAgICAQICAgICAgIDAwYEAwMDAwcFBQQGCAcICAgHCAgJCg0LCQkMCggICw8LDA0ODg4OCQsQEQ8OEQ0ODg7/2wBDAQICAgMDAwYEBAYOCQgJDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg7/wAARCAAKAAoDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD5a/Z7/Zw8EfF/9mT4h6Z4u0GTwt8WNP1iSya7vZp0uNKYJBsItyANjt5o2uGkDBsHhMfDsOn2zWcTQ39tJCUBR5HVGYY4JUEgH2BIHrXunw71vWdI/aa+POraTq+p6Xqr+H/Edy15aXTxTNMt4m2QupDbxubDZyMn1r4yRE8pflXoO1fleQYDEzzHGxnXbjeEop6qPNFtpXb00Wm3zP1vNM2pUMLh5RpK75k3fV8rVm7LzP/Z'); 
```

这意味着部分 AJAX => php 脚本的麻烦。现在，我们尝试比较从 ajax 和原始字符串收到的内容，只需将您的函数更改为此并查看 test.txt：

```
function saveImage($base64img){
    define('UPLOAD_DIR', '../uploads/');

    $file = UPLOAD_DIR . 'test.txt';
    file_put_contents($file, 'ORIG:'.'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAICAgICAQICAgICAgIDAwYEAwMDAwcFBQQGCAcICAgHCAgJCg0LCQkMCggICw8LDA0ODg4OCQsQEQ8OEQ0ODg7/2wBDAQICAgMDAwYEBAYOCQgJDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg7/wAARCAAKAAoDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD5a/Z7/Zw8EfF/9mT4h6Z4u0GTwt8WNP1iSya7vZp0uNKYJBsItyANjt5o2uGkDBsHhMfDsOn2zWcTQ39tJCUBR5HVGYY4JUEgH2BIHrXunw71vWdI/aa+POraTq+p6Xqr+H/Edy15aXTxTNMt4m2QupDbxubDZyMn1r4yRE8pflXoO1fleQYDEzzHGxnXbjeEop6qPNFtpXb00Wm3zP1vNM2pUMLh5RpK75k3fV8rVm7LzP/Z'."\n".'AJAX:'.$base64img);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:15:13.357

它有效 - 似乎当文件包含在 php 中时使用

```
include('file.php'); 
```

相对路径来自父级而不是来自包含的文件:(

这就是整个问题......谢谢大家

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T21:08:55.383

You write `encodeURIComponent` (JS) and then `utf8_decode` (PHP). Just use `urldecode` (PHP) and it will work fine! :)

# c# - 隐藏 C# XML 文档

> ID：15709517
> 
> 赞同：2
> 
> 时间：2013-03-29T18:47:21.690
> 
> 标签：c#, visual-studio

我在我的最新项目中使用了 C# XML 样式的文档（例如使用`///<summary>`东西）。我发现这使得源代码变得很长，阅读起来很痛苦。Visual Studio 中有没有办法自动折叠这些，还是我必须使用折叠来定义和重新展开函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:52:41.230

看看下面的帖子，我认为它应该有所帮助

[http://www.helixoft.com/blog/archives/30?n=collapse-all-xml-comments-in-vb-net-or-c](http://www.helixoft.com/blog/archives/30?n=collapse-all-xml-comments-in-vb-net-or-c)

# jsf - 做什么 属性呢？

> ID：15709521
> 
> 赞同：5
> 
> 时间：2013-03-29T18:47:27.690
> 
> 标签：jsf, jsf-2, primefaces, global, commandbutton

`global`将属性设置为`<p:commandButton>`to`false`或将其设置为 之间有什么区别`true`。我正在浏览 primefaces 展示，但无法理解其中的区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T18:54:09.567

形成 Primefaces TLD：

> 定义是否触发 ajaxStatus。

如果`global`为 true 并且您在页面上定义了 ajaxStatus，那么如果您单击该按钮，则会显示状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T02:53:10.803

简单来说，如果您不想显示“处理”对话框，请将 global 设置为 false。默认情况下，此字段设置为 true，因此它将始终显示“正在加载”对话框（也称为 ajaxStatus）

# c# - 如何用固定长度和许多元素编写这个正则表达式

> ID：15709526
> 
> 赞同：1
> 
> 时间：2013-03-29T18:47:38.810
> 
> 标签：c#, java, regex

字符串以字符开头，后跟数字（字符和数字都可以为空），但总长度不应超过8。

我的解决方案是

```
([a-zA-Z]*[0-9]*){0,8} 
```

似乎总长度 8 不能工作，所以怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:52:21.630

要使用正则表达式检查字符串的长度，您可以使用[前瞻](http://www.regular-expressions.info/lookaround.html#lookahead)机制并`(?=^.{0,8}$)`在正则表达式的开头添加。`^`是代表数据开始的锚点，`$`代表结束。

但在你的情况下，我可能会使用类似的东西

```
someString.matches("^(|[a-zA-Z]\\d{0,7})$") 
```

它会接受

*   空字符串，
*   字符串开头仅包含一个字母，最多包含 7 位数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:02:00.897

我认为这会奏效`([a-zA-Z]|[0-9]){0,8}`

如果没有尝试使用这个工具[gskinner](http://gskinner.com/RegExr/) 或[www.rubular.com](http://www.rubular.com/)

# c# - 使用 C# 从后面的代码生成下拉列表项

> ID：15709532
> 
> 赞同：1
> 
> 时间：2013-03-29T18:47:49.333
> 
> 标签：c#, asp.net, dropdownbox

我正在尝试从后面的代码生成下拉列表，但出现此错误：

```
Object reference not set to an instance of an object.
Line 101:        ddlGroupName1.DataSource = cmd.ExecuteReader(); 
```

有人可以帮忙吗？这是我的 aspx 代码：

```
 <asp:DropDownList ID="ddlGroupName1" runat="server" OnSelectedIndexChanged="GroupNameChanged1"
                                        AutoPostBack="true" AppendDataBoundItems="true">
                                        <asp:ListItem Text="ALL" Value="ALL"></asp:ListItem>
                                        <asp:ListItem Text="Top 10" Value="10"></asp:ListItem>
                                    </asp:DropDownList> 
```

这是我背后的代码

```
 private void GetGroupNameList(DropDownList ddlGroupName1)
    {
        DataSet dataSet = new DataSet();
        String strConnString = System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString;
        SqlConnection con = new SqlConnection(strConnString);

        SqlCommand cmd = new SqlCommand("select distinct GroupName" +
                        " from MyTable");
        cmd.Connection = con;
        con.Open();
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        da.Fill(dataSet);

        ddlGroupName1.DataSource = dataSet.Tables[0];

        ddlGroupName1.DataBind();
        con.Close();
        ddlGroupName1.Items.FindByValue(ViewState["MyFilter"].ToString())
                .Selected = true;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:51:47.210

ExecuteReader 返回一个数据读取器，它要求您迭代每一行。你有几个选择。使用以下方法迭代数据读取器：

```
 SqlDataReader reader = cmd.ExecuteReader();
    while (reader.Read())
    {
        // Add your values to a List of entities or DataTable, then bind to that
    } 
```

或者使用 SqlDataAdapter 将其直接转储到 DataSet/DataTable 并绑定到它。

像这样：

```
DataSet dataSet = new DataSet();
String strConnString = System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString;
using (SqlConnection con = new SqlConnection(strConnString))
{
   using (SqlCommand cmd = new SqlCommand("select distinct GroupName" +
                    " from MyTable"))
   {
       cmd.Connection = con;

       SqlDataAdapter da = new SqlDataAdapter(cmd);
       da.Fill(dataSet);

       ddlGroupName1.DataSource = dataSet.Tables[0];
       ddlGroupName1.DataBind();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:51:03.843

我认为您不能使用 .datasource = sqldatareader() 您需要将数据加载到`datatable`并执行 .datasource = _dtDataTable。sqldatareader() 是实时的一一读取行。

# php - 通过 PHP 从 MySQL 检索信息到 AS3

> ID：15709535
> 
> 赞同：1
> 
> 时间：2013-03-29T18:47:57.910
> 
> 标签：php, mysql, actionscript-3, flash

我目前正在做一个在 TutsPlus 上找到的教程。本教程是通过 PHP 将信息从 AS3 保存到 MySQL，然后检索此信息。

到目前为止，它有效。I 可以输入用户名和分数，保存到数据库中。但是有一个问题，我希望能够在表格中显示所有名称和分数，而不必搜索名称然后找到该特定用户的分数。

保存信息的代码（有效）如下。

```
package {

import flash.display.*; 
import flash.events.*;
import flash.net.*;

public class register extends MovieClip {

    public function register ():void {

        register_button.buttonMode = true;

        register_button.addEventListener(MouseEvent.MOUSE_DOWN, checkForm);

        username_text.text = "";
        userbio_text.text = "";

    }

    public function checkForm (e:MouseEvent):void {

        if (username_text.text != "" && userbio_text.text != "") {

            sendForm();

        } else {

            result_text.text = "PLEASE ENTER A NAME";

        }

    }

    public function sendForm ():void {

        /*
        we use the URLVariables class to store our php variables 
        */

        var phpVars:URLVariables = new URLVariables();

        phpVars.username = username_text.text;
        phpVars.userbio = userbio_text.text;

        /*
        we use the URLRequest method to get the address of our php file and attach the php vars.
        */

        var urlRequest:URLRequest = new URLRequest("localhost/php/register.php");

        /*
        the POST method is used here so we can use php's $_POST function in order to recieve our php variables.
        */

        urlRequest.method = URLRequestMethod.POST;

        /*
        this attaches our php variables to the url request
        */

        urlRequest.data = phpVars;      

        /*
        we use the URLLoader class to send the request URLVariables to the php file
        */

        var urlLoader:URLLoader = new URLLoader();
        urlLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

        /*
        runs the function once the php file has spoken to flash
        */

        urlLoader.addEventListener(Event.COMPLETE, showResult);

        /*
        we send the request to the php file
        */

        urlLoader.load(urlRequest);

    }

    /*
    function to show result
    */

    public function showResult (e:Event):void {

        result_text.text = "" + e.target.data.result_message;

    }

}

} 
```

从这里，我可以转到另一个应用程序并搜索用户名，然后显示该用户的分数。下面的代码：

```
package actions {

import flash.display.MovieClip;
import flash.events.*;
import flash.net.*;
import flash.text.*;

public class main extends MovieClip {

    public function main ():void {

        submit_button.buttonMode = true;

        submit_button.addEventListener(MouseEvent.MOUSE_DOWN, checkLogin);

        username.text = "";

    }

    public function checkLogin (e:MouseEvent):void {

            if (username.text == "") {

            username.text = "Enter your username";

            } 

        else {

            processLogin();

        }

    }

    public function processLogin ():void {

        var phpVars:URLVariables = new URLVariables();

        var phpFileRequest:URLRequest = new URLRequest("http://xx.xx.xx.uk/~bf93fv/Source%202/php/controlpanel.php");

        phpFileRequest.method = URLRequestMethod.POST;

        phpFileRequest.data = phpVars;

        var phpLoader:URLLoader = new URLLoader();
        phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;           
        phpLoader.addEventListener(Event.COMPLETE, showResult);

        phpVars.systemCall = "checkLogin";
        phpVars.username = username.text;

        phpLoader.load(phpFileRequest);

    }

    public function showResult (event:Event):void {

        result_text.autoSize = TextFieldAutoSize.LEFT;

        result_text.text = "" + event.target.data.systemResult;

    }

}

} 
```

单独显示用户名和分数的 controlpanel.php 文件如下：

```
<?php
include_once "connect.php";
$username = $_POST['username'];
if ($_POST['systemCall'] == "checkLogin") {
$sql = "SELECT * FROM users WHERE username='$username'";
$query = mysql_query($sql);
$login_counter = mysql_num_rows($query);
if ($login_counter > 0) {
    while ($data = mysql_fetch_array($query)) {
        $userbio = $data["user_bio"];
        print "systemResult=$username Scored $userbio";
    }
}
else {
    print "systemResult=The login details dont match our records.";
}
}
?> 
```

有没有人知道任何简单的方法可以将数据库中的所有信息查看到表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:27:25.457

您可能希望在 PHP 代码中改进一些事情（您的 AS3 更好）。

*   使用`PDO`而不是使用特定 DBMS 的函数。这样做的原因是它是可移植的（在一定程度上）。比如说，如果你想将数据库从 MySQL 迁移到 Postgres，你必须重写更少的代码，否则你就不得不这样做。PDO 还提供了一些清理输入的方法。它不是防弹的 - 总比没有好。PDO 被认为是“良好实践”，因此您将立即学习编写良好的代码，而不是从一开始编写新风格的代码，然后发现如何正确地做到这一点。如果您正在考虑一个非常原始的任务（例如单次选择），它可能会更冗长一些，但是一旦您的任务变得稍微复杂一点，它就变得值得花时间。

*   在您的 SQL 查询中制定一条永远不要使用的一般规则`select *`，除非用于测试/调试。这是一种懒惰，最终会给你带来很多问题。通过这样做，您将很难在以后维护您的代码，从而有效地将其转换为“一次编写 - 跑路”之类的东西。同样，作为一个简单的概念证明，它是好的， - 长期解决方案 - 不好。如果您仍然对我要说的内容感到困惑：*明确列出所有列名*。

*   使用`include`/`require`和他们的`_once`家人作为长期解决方案是一个坏主意。同样，对于一个简单的测试来说还可以——从长远来看是不好的。好的程序是用函数/类编写的，并使用`__autoload()`或使用自动加载类的能力的框架。这使得更大的应用程序比包含的网络更易于管理、更容易导航和理解。

*   您必须清理来自 Web 应用程序用户的输入，即不要这样做`$_POST['key']`。至少编写一个函数来检查密钥是否存在以及它是否具有预期的格式。

* * *

现在，您的实际问题是发送数据。

*   您可以只发送您在 PHP 中获得的原始 SQL 输出 - 将使您的服务器免于重新编码所有这些的问题。在非常简单的情况下工作，但随着更复杂的任务变得更加复杂。这也是不常见的，所以你会发现人们不知道如何处理。（没有技术限制，它只是一个真正的历史文物）。

*   有一堆流行的格式可以被各种应用程序消化，而不是 Flash。其中包括 XML、JSON、Protobuf。还有一些更特别的 PHP，比如从`serialize()`. 如果你走这条路，我会敦促你坚持使用 JSON。XML 可能是一种更成熟的技术，但 JSON 具有内置的基本类型系统的好处（而在 XML 中，它是在它之上的另一层，也就是说，除了其他东西之外，它没有在 Flash 中实现 - 我在说关于 XSL）。

*   有 AMF（ActionScript 消息格式）——它是 Flash 的理想选择。PHP 也非常清楚如何生成它（那里有几种流行的实现）。与 JSON 或 XML 相比，这种格式要紧凑得多。它具有更强的表达能力（可以描述循环依赖、多对多关系、具有引入自定义类型的过程、自定义 [反] 序列化例程）。它也是自描述的，除非您使用自定义序列化例程。如果您以后不打算将应用程序迁移到 JavaScript，这是最好的选择，因为 JavaScript 在使用二进制数据时存在问题。在那里解析这种格式是不可能的。

*   Protobuf 也是一个可行的选择。这是谷歌设计的一种数据交换格式。它在精神上与 AMF 相似，但它可能不是自我描述的。它依赖于应用程序来了解如何从中生成自定义对象。然而，它有一个可以在 JavaScript 中解析的形式（尽管你会失去紧凑性的好处）。

* * *

**您的 ActionScript 代码：**如果您选择 AMF，则需要查看`NetConnection`课程。我建议你看看 AMFPHP 项目——它也有例子。或者，Zend 框架有`Zend_Amf`用于该目的的库。但是一开始使用整个框架可能会让人不知所措。

如果您使用 XML - 那么有一个内置的 XML 类，网络上有数百万个关于如何使用它的示例。

如果您使用 JSON，那么不久前也有一个内置类。但在出现之前，有几个库可以解析它。

GoogleCode 上曾经有一个项目支持 Flash 中的 Protobuf，但它需要相当多的默许和体力劳动才能开始。

* * *

最后，这里提到的事情的索引：

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php) - PDO

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php) - PHP 中的 JSON

[http://php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php) - PHP*中的 XML（如果考虑使用 PHP，没有关于哪个 XML 库更好的协议。我可能会坚持这个，但是 ymmv）。*

[http://www.silexlabs.org/amfphp/](http://www.silexlabs.org/amfphp/) - PHP 中的 AMF

[http://framework.zend.com/manual/1.12/en/zend.amf.html](http://framework.zend.com/manual/1.12/en/zend.amf.html) Zend_Amf 库

[http://code.google.com/p/protobuf-actionscript3/](http://code.google.com/p/protobuf-actionscript3/) ActionScript 中的 Protobuf

[https://github.com/drslump/Protobuf-PHP](https://github.com/drslump/Protobuf-PHP) PHP Protobuf *（抱歉，没用过这个，但看起来不错）*

[http://www.blooddy.by/en/crypto/](http://www.blooddy.by/en/crypto/)对于旧版本的 Flash 播放器 - 这个库有我所知道的最好的 JSON 解码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:06:27.227

最好的方法是（我认为）使用 XML。

在 PHP 端，脚本输出一个包含所有用户的 XML 文档：

```
$sql = "SELECT * FROM users "; // add order statement if needed
$query = mysql_query($sql);
$login_counter = mysql_num_rows($query);

$xml = array('<?xml version="1.0" encoding="UTF-8"?><users>');

if ($login_counter > 0) {

    while ($data = mysql_fetch_array($query)) {  

        $xml[] = '<user name="'.$data['username'].'" bio="'.$data["user_bio"].'" />';
    }

}
else {
    // do nothing
    // you will handle it on the flash side by checking the length of user nodes list
}
$xml[] = '</users>';
header('Content-Type:text/xml');
die(implode('', $xml)); 
```

这将输出一个 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<users>
 <user name="..." bio="..." />
 <user name="..." bio="..." />
 [...]
</users> 
```

（PHP 上有类似 SimpleXML 的类以更简洁的方式处理 XML）

作为侧：

借助 XML/XMLList 类，您可以轻松浏览/显示 Flash 端的数据

只需在完整的事件处理程序中适应并将数据转换为 XML `URLLoaderDataFormat`：`TEXT`

```
var xml:XML = new XML(event.target.data); 
```

然后迭代用户元素以显示它们：

```
var users:XMLList = xml.user;
var user:XML;

for (user in users) {
 trace('name->' + user.attribute('name') );
 trace('bio->' + user.attribute('bio') );

} 
```

# eclipse - Egit 无法获取 README 更改

> ID：15709538
> 
> 赞同：0
> 
> 时间：2013-03-29T18:48:05.503
> 
> 标签：eclipse, egit

我正在使用 Eclipse 4.2.1 和 EGIT。我做了以下事情：

1.  在 Github 上创建了一个帐户。
2.  创建一个 Repo 并在我创建它时使用来自 Github 的自述文件对其进行初始化。
3.  使用 EGIT 克隆了 repo。
4.  在 Eclipse 中创建了一个 Java 项目，这是一个带有 main 方法的单个类。
5.  与 GIT 共享项目。团队-> 共享项目-> GIT
6.  在 Configure GIT repo 对话框中：选择我刚刚从 Github 克隆的 repo。
7.  做一个提交。
8.  推送到远程源。
9.  返回 Github 并更改自述文件。（这显示在 Github 上的提交中）
10.  使用 EGIT 获取更改。

更改后的自述文件显示在 EGIT 的远程跟踪分支中，但不在我的本地主分支中。我试过刷新，但它仍然不起作用。这样做之后，我当地的主人落后了，我无法推动。我被拒绝非快进。

我可以通过基于 HEAD 创建一个新的本地分支然后将其合并到我的本地 master 来解决这个问题。但是为什么会这样呢？还有其他人遇到这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:18:47.017

获取仅将来自 github 的更改获取到本地计算机上的远程跟踪分支（将其想象为一种索引），而不是获取到您的工作目录（您编辑的真实文件）。您仍然必须将远程更改合并到本地分支中（您可以通过展开存储库节点分支 -> 远程跟踪 -> 源/主并在上下文菜单中选择“合并”来完成）。

如果您总是只想获取并立即合并远程更改，请使用“Pull”命令而不是“Fetch”命令，它是获取和合并的组合。

# php - mysql内部连接计数问题

> ID：15709541
> 
> 赞同：0
> 
> 时间：2013-03-29T18:48:12.330
> 
> 标签：php, mysql

我有两个表：Table1 和 Table2。

表格1：

```
log_id | postcode
1      |  LS11LS 
```

表2：

```
region | postcode
Leeds     | LS1
Leeds     | LS11 
```

当我使用以下查询时，

```
SELECT table2.region 'Region', 
       Count(table1.postcode) AS 'count' 
FROM   table1 
INNER JOIN table2 
   ON table1.postcode LIKE Concat(table2.postcode, '%') 
```

我明白了

```
Region   |   count
Leeds    |    2 
```

它应该是 1，因为 Table1 上只有一条记录。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:49:34.780

听起来你需要使用`DISTINCT`：

```
SELECT table2.region 'Region', 
    COUNT( DISTINCT table1.log_id )  as 'count' 
FROM table1 
    INNER JOIN table2 ON 
        table1.postcode LIKE CONCAT( table2.postcode,  '%' ) 
```

我用 log_id 替换了邮政编码，因为它可能是您唯一的列。

*编辑：虽然我不确定您在寻找什么，但这是使用子查询的另一种方法：*

```
SELECT Region, COUNT(1) as 'Count'
FROM Table1 T
    JOIN (
        SELECT DISTINCT T2.Region, T.PostCode
        FROM table1 T
            INNER JOIN table2 T2 ON 
                    T.postcode LIKE CONCAT( T2.postcode,  '%' )
    ) T2 ON T.PostCode = T2.PostCode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:38:34.080

ok the final solution for this thing after 8 hours . by the end user post code entry , trim the post code off any spaces , and then str_replace the spaces to nothing , and then take off the last 3 letter / numbers of the string . and save it as an additional column along with the original postcode , now you will have post codes store like LS1 . LS11 , and instead of inner join using like , use = . this is i believe the only way out there.

see [This link](http://board.phpbuilder.com/showthread.php?10363132-UK-Postcode-mysql-partial-match-array-please-help/page2&s=281744767b032f2943a94469f74efe3c) for more info

# php - 从 xml 解析时转换 SimpleXMLElement 对象

> ID：15709542
> 
> 赞同：2
> 
> 时间：2013-03-29T18:48:14.500
> 
> 标签：php, xml, simplexml

```
$drivetracker = simplexml_load_file('geot_5980.xml');
$data = array();
foreach ($drivetracker->plays->qtr as $qtr):
foreach ($qtr->play as $myplay):
$hasball = $myplay['hasball'];
$play = $myplay['spot'];
$down = $myplay['down'];
$togo = $myplay['togo'];
$type = $myplay['type'];
$text = $myplay['text'];
array_push($data, array("text" => $text,                
            "spot" => $play,
            "ball" => $hasball,
            "togo" => $togo,
            "type" => $type,
            "drive"=> $drive)
               );
endforeach;
endforeach;
print_r($data); 
```

我明白这个...

```
[16] => Array
        (
            [text] => SimpleXMLElement Object
                (
                    [0] => Tanner, C. kick attempt good.
                )

            [spot] => SimpleXMLElement Object
                (
                    [0] => DU03
                )

            [ball] => SimpleXMLElement Object
                (
                    [0] => GT
                )

            [togo] => SimpleXMLElement Object
                (
                    [0] => 0
                )

            [type] => SimpleXMLElement Object
                (
                    [0] => X
                )

            [drive] => 7
        )

    [17] => Array
        (
            [text] => SimpleXMLElement Object
                (
                    [0] => Tanner, C. kickoff 51 yards to the DU14, Butler, L return 16 yards to the DU30 (Noble, D.).
                )

            [spot] => SimpleXMLElement Object
                (
                    [0] => GT35
                )

            [ball] => SimpleXMLElement Object
                (
                    [0] => GT
                )

            [togo] => SimpleXMLElement Object
                (
                    [0] => 0
                )

            [type] => SimpleXMLElement Object
                (
                    [0] => K
                )

            [drive] => 7
        )

) 
```

我的问题是......我如何做到这一点，而不是

```
[text] => SimpleXMLElement Object
                (
                    [0] => Tanner, C. kick attempt good.
                ) 
```

我明白了

```
[text] = > "Tanner, C. kick attempt good." 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:53:47.937

代替：

```
$hasball = $myplay['hasball'];
$play = $myplay['spot'];
$down = $myplay['down'];
$togo = $myplay['togo'];
$type = $myplay['type'];
$text = $myplay['text']; 
```

你想打电话：

```
$hasball = (string) $myplay['hasball'];
$play = (string) $myplay['spot'];
$down = (string) $myplay['down'];
$togo = (string) $myplay['togo'];
$type = (string) $myplay['type'];
$text = (string) $myplay['text']; 
```

通过使用 进行强制转换`(string)`，它会将 XML 标记的内容作为字符串返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:54:10.587

如果您将 a 类型转换`SimpleXMLElement`为字符串，您将获得它的值。所以这应该工作：

```
array_push($data, array(
    "text" => (string)$text,                
    "spot" => (string)$play,
    "ball" => (string)$hasball,
    "togo" => (string)$togo,
    "type" => (string)$type,
    "drive"=> (string)$drive)
); 
```

# android - 使用 Android 进行简单的 HTML 解析？

> ID：15709545
> 
> 赞同：0
> 
> 时间：2013-03-29T18:48:19.013
> 
> 标签：android, html, parsing, dom, sax

我有一个简单的网页，我想用一个 Android 应用程序抓取。[模式和正则表达式显然](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)对推荐感到疑惑？SAX、DOM 还是 Jsoup？我正在使用的 HTML 只有 16K 的数据，所以我更喜欢最轻量的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:19:51.973

所以，我认为这是一个非常“笼统”的问题，要给你完全正确的答案，这很难，因为每个开发人员都可以给你个人经验，但经验是非常多变的。我有经验，`DOM`并且`JSoup`两者都按预期工作。

`DOM`如果我正在使用，我通常会使用`XML`. 当我使用`HTML`（有时）我正在使用`JSoup`时，我可以向您推荐 JSoup。这是一个诡计。

但如果你愿意，你可以看看

*   [`HTMLCleaner`](http://htmlcleaner.sourceforge.net/)有很好的反馈
*   或者你可以看看一些[`open-source HTML parsers`](http://java-source.net/open-source/html-parsers)

## 笔记：

`SAX`和之间的区别在于`DOM`它在加载时`SAX`解析`XML`，比它更快`DOM`但对应用程序有更高的要求，并且它不是`XML`根据[`W3C`](http://www.w3.org/)

# java - 使用正则表达式替换字符串

> ID：15709548
> 
> 赞同：0
> 
> 时间：2013-03-29T18:48:23.217
> 
> 标签：java, regex, text, replace

用 Java 中的正则表达式替换 - 我有一个字符串

```
    所有的{
    条件 {licenseState=="NY"}
    条件{professionalId==301}
    条件 {professionId=="301"}
}

```

是否可以使用正则表达式在 java 中进行替换，所以字符串看起来像这样：

```

    所有的{
    条件 'licenseState=="NY"', {licenseState=="NY"}
    条件“职业 ID==301”，{职业 ID==301}
    条件 'professionId=="301"', {professionId=="301"}
    }  

```

基本上得到 {} 括号内的内容并将其分开放置。有可能吗？怎么做？NewLine char 不能保证在每个条件之后都存在。

我试过了：

```
condition\s*?{[a-zA-Z0-9=<>\s"']*} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:53:38.083

您可以使用[字符串 replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)函数。像这样的东西：

```
yourString.replaceAll("\\{([^{}]*\\=\\=[^{}]*)\\}", "'$1', {$1}"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:58:01.057

假设没有嵌套`{}`

```
str = str.replaceAll( "(?<=condition)\\s*(\\{([^}]+)\\})", " '$2', $1" ); 
```

# database-design - 是 ER 图中的关系

> ID：15709558
> 
> 赞同：0
> 
> 时间：2013-03-29T18:48:40.570
> 
> 标签：database-design, entity-relationship

我正在为大学宿舍办公室建模和实施数据库。

这是我到目前为止的ER图：

![ER图](../Images/4b29b4c9d58cce72b2ef69c2e704c83b.png)

规范说大厅有马槽，公寓有房间数量。否则属性是相同的。发票和地址需要有公寓或大厅的地址。

我应该将平面和大厅实体存储在同一张表中吗？我怎样才能让一个实体（地点）链接另外两个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:47:57.617

在 info 选项卡中查找以下标签： [single-table-inheritance](/questions/tagged/single-table-inheritance "显示标记为“单表继承”的问题") [class-table-inheritance](/questions/tagged/class-table-inheritance "显示标记为“类表继承”的问题") [shared-primary-key](/questions/tagged/shared-primary-key "显示标记为“共享主键”的问题")。

对于像您这样的简单情况，单表继承可能是您最好的选择。您将在属性中包含一些不适用于所有行的 NULL，但这不应该是一个主要问题。

对于复杂的情况，class-table-inheritance 效果更好，但需要做一些额外的工作。

Shared-primary-key 是一种额外的技术，您可以将其与 class-table-inheritance 一起使用，以强制“is a”关系的一对一性质。

# puppet - Puppet：抑制文件类型的通知输出

> ID：15709562
> 
> 赞同：4
> 
> 时间：2013-03-29T18:48:57.350
> 
> 标签：puppet

作为 puppet 应用配置设置的一部分，我需要以递归方式更改所有者组和目录权限。使用 puppet 的文件类型很容易做到这一点：

```
 file { "$appRoot":
      ensure => directory,
      recurse => true,
      owner => 'whoever',
      group => 'thegroup',
    } 
```

问题是这个目录下有几万个文件，puppet的通知：日志输出对每个文件写出3次到控制台或日志文件，通知它成功地改变了所有者、组和模式。这会导致无法使用的大输出日志，除非出现错误，否则我想抑制此输出。

在 exec 类型中，有一个选项可以执行此操作，logoutput => on_failure 或 false，但我似乎无法找到任何方法来使用文件执行此操作。似乎在 exec 中做很多（或任何事情）在 puppet 世界中是不受欢迎的，除了将其移动到 exec 之外，还有其他方法可以自定义文件操作的日志记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:31:41.653

你可以就跑`--logdest /dev/stdout`。`puppet agent`这会将所有日志放入标准输出。您的日志文件不会被写入，您可以通过`egrep`或类似的方式收听标准输出，并且只选择您想要的东西，例如不成功......

```
 puppet agent <options> --logdest /dev/stdout | egrep -iv "notice" >& /log/dir/logoutput 
```

# actionscript-3 - TweenMax 延迟调用和 killtweens 的

> ID：15709564
> 
> 赞同：0
> 
> 时间：2013-03-29T18:49:05.147
> 
> 标签：actionscript-3, gsap

有没有人熟悉这个 Tween 的延迟电话，因为我一直在努力让它工作，但我做不到。我知道如何延迟调用函数，但我也想删除该 Tween 以进行延迟调用：

```
var speed:Number = player.getBasicSpeed();

            if (player.getSpeed() > speed)
            {
                TweenMax.killTweensOf(clearPowerup);
            }else {
                player.setSpeed(2.5);
                player.onPowerup("speedPowerup");
                TweenMax.delayedCall(5, clearPowerup, [player, speed]);
            } 
```

因此，如果玩家拿起加电，并且如果这个加电仍然存在，那`killTweensOf`应该会终止延迟调用，`clearPowerup`但事实并非如此。

谢谢您的帮助

回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:43:54.810

您需要使用此行来终止延迟呼叫：

```
TweenMax.killDelayedCallsTo(clearPowerup); 
```

# java - 在java中删除awt包中的MenuBar

> ID：15709568
> 
> 赞同：1
> 
> 时间：2013-03-29T18:49:15.643
> 
> 标签：java, awt, menubar

有什么方法可以从 awt 包中的 java 窗口中删除菜单栏。我已经根据条件创建了菜单栏，当条件为假时，我想在 awt 包中将其删除（不使用 swing 类方法），但找不到任何方法。

我应该能够根据条件多次创建/删除菜单栏。

即使在 Oracle 提供的文档中，我也没有找到任何完全删除菜单栏的方法，我感到很震惊，尽管存在从菜单栏中删除组件的方法。

这是一个漏洞吗？他们错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:08:24.760

Try: `setMenuBar(null);`

From the documentation:

> mb - the menu bar being set. If this parameter is null then any existing menu bar on this frame is removed.

# http - 谷歌怎么知道我的？

> ID：15709577
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:49:48.840
> 
> 标签：http, curl, http-headers, http-accept-language

我曾经`curl`以这种方式请求 www.google.com：

`curl -v --url "http://www.google.com"`

我发现结果`HTTP/1.1 302 Moved Temporarily`是`Location: http://www.google.com.eg/`。

虽然当我检查 HTTP 请求标头时，我找不到任何可以告诉我的信息，例如`accept-lang`.

```
Here's the output of the above `curl` command:
* About to connect() to www.google.com port 80 (#0)
*   Trying 173.194.40.49...
* connected
* Connected to www.google.com (173.194.40.49) port 80 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.27.0
> Host: www.google.com
> Accept: */*
> 
* additional stuff not fine transfer.c:1037: 0 0
* HTTP 1.1 or later with persistent connection, pipelining supported
< HTTP/1.1 302 Moved Temporarily
< Content-Length: 216      
< Location: http://www.google.com.eg/
< Cache-Control: private
< Content-Type: text/html; charset=UTF-8
< P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
< Date: Fri, 29 Mar 2013 18:44:02 GMT
< Server: gws
< X-XSS-Protection: 1; mode=block
< X-Frame-Options: SAMEORIGIN
< Set-Cookie: PREF=ID=9d542bb0ba74e1b0:FF=0:TM=1364582642:LM=1364582642:S=QNWV6IaUY-Uw1oUy; expires=Sun, 29-Mar-2015 18:44:02 GMT; path=/; domain=.google.com
< Set-Cookie: NID=67=jOeZdv6A3qHXveaYvn-nG0OKh1cHmwVO8VvA8U-Xv0VBA5nbMtMFcD6d94OS67GJ7ky3hoULCj9qJ97o2HwvRYigj1qGyFBWGRdSRFmi9LLEVKN03IglQrN25BQxTDPx; expires=Sat, 28-Sep-2013 18:44:02 GMT; path=/; domain=.google.com; HttpOnly
< Connection: keep-alive
< 
* Connection #0 to host www.google.com left intact
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8"><TITLE>302 Moved</TITLE></HEAD><BODY><H1>302 Moved</H1>The document has moved <A HREF="http://www.google.com.eg/">here</A>. </BODY></HTML>* Closing connection #0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:07:53.963

他们可能正在根据传入请求的 IP 地址进行地理定位，以便将您重定向到特定国家/地区的页面。

# wicket - wicket 提供文件供下载

> ID：15709578
> 
> 赞同：2
> 
> 时间：2013-03-29T18:49:49.990
> 
> 标签：wicket

我有一个带有提交按钮的面板。在提交时，我想将一些文本写入文件并将文件提供给用户下载。不知道该怎么做。如果有人可以指向真正有用的链接或代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T10:18:03.383

正如[Wicket wiki 上的条目中所述，](https://cwiki.apache.org/confluence/display/WICKET/AJAX+update+and+file+download+in+one+blow)您需要创建一个行为来构建您的文件，然后从提交链接触发该行为。这将确保模型更新在您用于创建文件之前完成。

从资源流创建请求的行为实现：

```
public abstract class AJAXDownload extends AbstractAjaxBehavior
{
    private boolean addAntiCache;

    public AJAXDownload() {
        this(true);
    }

    public AJAXDownload(boolean addAntiCache) {
        super();
        this.addAntiCache = addAntiCache;
    }

    /**
     * Call this method to initiate the download.
     */
    public void initiate(AjaxRequestTarget target)
    {
        String url = getCallbackUrl().toString();

        if (addAntiCache) {
            url = url + (url.contains("?") ? "&" : "?");
            url = url + "antiCache=" + System.currentTimeMillis();
        }

        // the timeout is needed to let Wicket release the channel
        target.appendJavaScript("setTimeout(\"window.location.href='" + url + "'\", 100);");
    }

    public void onRequest()
    {
        ResourceStreamRequestHandler handler = new ResourceStreamRequestHandler(getResourceStream(),getFileName());
        handler.setContentDisposition(ContentDisposition.ATTACHMENT);
        getComponent().getRequestCycle().scheduleRequestHandlerAfterCurrent(handler);
    }

    /**
     * Override this method for a file name which will let the browser prompt with a save/open dialog.
     * @see ResourceStreamRequestTarget#getFileName()
     */
    protected String getFileName()
    {
        return null;
    }

    /**
     * Hook method providing the actual resource stream.
     */
    protected abstract IResourceStream getResourceStream();
} 
```

（提交）链接和行为实现：

```
final AJAXDownload download = new AJAXDownload()
{
    @Override
    protected IResourceStream getResourceStream()
    {
        return createResourceStream(item.getModelObject());
    }
};
item.add(download);

item.add(new AjaxSubmitLink("link") {
    @Override
    public void onSubmit(AjaxRequestTarget target, Form<?> form)
    {
        // do whatever with the target, e.g. refresh components
        target.add(...);

        // finally initiate the download
        download.initiate(target);
    }
}); 
```

@magomi 针对[这个](https://stackoverflow.com/questions/9799479/wicket-download-link)问题创建了一个类似的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:20:12.653

这并不容易。我使用了下载链接，但下载链接没有使用任何表单变量，因为单击下载链接不会提交表单。它只使用初始值。我不得不使用 ajax onchange 事件来更新代表表单组件的实例变量，然后使用下载链接根据用户输入创建一个文件。

# c# - 奇怪的错误 - C# 应用程序

> ID：15709580
> 
> 赞同：0
> 
> 时间：2013-03-29T18:49:55.847
> 
> 标签：c#, syntax-error

```
... other LOCs
using System.Net;
using System.Net.Sockets;

namespace Chat
{
    class MyServer
    {
        try
        {
            IPAddress ip = IPAddress.Parse("localhost");
            TcpListener myListener = new TcpListener(ip, 8000);

            myListener.Start();

            Console.WriteLine("Local end point: " + myListener.LocalEndpoint);
        }
        catch(Exception e)
        {
            Console.WriteLine("Error... " + e.StackTrace);
        }
    }
} 
```

好吧，我真的很恼火 - 我收到错误： - 尝试 -> “类、结构或接口成员声明中的无效标记 'try' - `new TcpListener(ip, 8000);`-> 对于`ip`参数：“字段初始值设定项无法引用非静态字段 'ip '"。我可以将它声明为静态，但有什么意义呢？ - `myListener.Start();`-> 'myListener' 是一个字段，但用作类型 - `Console.WriteLine(...`-> 是一种方法，但用作类型。

说真的，我从来没有遇到过这么奇怪的错误。是因为我以某种错误的方式打开了整个课程吗？我有另一个包含该`Main()`方法的类，但这不应该是问题......这真的很烦人，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:52:21.123

您需要将 try 块放在方法中，而不是放在类中。

```
class A
{
    void func1()
    {
      try{

       }
      catch(Exception e)
      {

      }

    }

} 
```

# mysql - Zebra_Database MySQL 包装器是否可以防止 SQL 注入？

> ID：15709582
> 
> 赞同：0
> 
> 时间：2013-03-29T18:50:00.583
> 
> 标签：mysql, database, sql-injection

我正在考虑使用此处找到的名为 Zebra_Database 的 MySQL 包装器：

[http://stefangabos.ro/php-libraries/zebra-database/](http://stefangabos.ro/php-libraries/zebra-database/)

有人可以通过代码判断这是否可以防止 SQL 注入，还是我应该采取进一步措施来保护自己？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:27:13.120

它鼓励使用准备好的语句——与 mysqli 使用的相同的有限版本——因此，它没有提供 100% 的保护。
它使用某种查询构建器 - 因此，它使您的 SQL 过于不灵活（并且 - 因此 - 再次不安全）。

就我个人而言，我不会使用它，但对于初学者来说，它总比“用 mysqli_real_escape_string 包装每个输入”要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:09:04.537

它鼓励使用不易受 SQL 注入影响的预准备语句。

从 Zebra_Database 的首页：

> 它鼓励开发人员编写可维护的代码，并通过鼓励使用准备好的语句来提供更好的默认安全层，其中参数会自动转义。

这意味着您应该使用准备好的语句，这些语句一开始就不容易受到 SQL 注入的影响。请参阅[有关](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)使用准备好的语句的问题。

# nstextfield - 如何将 NSTextField 1 的值分配给 r NSTextField 2

> ID：15709584
> 
> 赞同：0
> 
> 时间：2013-03-29T18:50:10.590
> 
> 标签：nstextfield

我在读一本书，在示例代码中，他们展示了如何将 NSTextField 的值分配给另一个 NSTextField，如下所示：

```
self.theStory.text = self.theTemplate.text; 
```

当我尝试在不使用点表示法的情况下做同样的事情时：

```
 [[self theStory]text] = [[self theTemplate]text]; 
```

我收到以下错误： **表达式不可分配。**

我是 Objective-C 的新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:52:24.267

像这样的东西：

```
[[self theStory] setText:[[self theTemplate]text]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:53:48.050

当你使用方括号而不是点时，你需要使用 setter 方法的全名，并去掉`=`.

```
[[self theStory] setText:[[self theTemplate] text]]; 
```

以我的经验，点表示法最适合用于设置或获取状态，通过写入或读取属性或键路径（例如，键路径是方法链`self.datamodel.members.count`）。当您执行某种操作时，括号表示法是更好的选择。在某些情况下，可以对没有参数的方法使用点表示法，但这会使代码混乱。例如，如果我有一个`NSTimer`实例`myTimer`，我会使用`[myTimer fire]`，而不是`myTimer.fire`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:54:01.213

那是因为你不能那样做。点表示法有两个等价物，“name”形式和“setName:”形式。你会用`[[self theStory] setText:[[self theTemplate] text]];`.

# c++ - 将未知长度的char**(c)转换为向量 (c++)

> ID：15709585
> 
> 赞同：6
> 
> 时间：2013-03-29T18:50:29.383
> 
> 标签：c++, arrays, string, vector, c-strings

如何将 C char** 转换为 C++ 向量？是否有一些内置功能可以用来执行此操作，或者通过一系列迭代步骤来完成它更好？

编辑：由于各种原因，C 数组中的元素数量是未知的。有可能我可以将它作为另一个参数传递，但这绝对有必要吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-29T18:53:38.260

您可以简单地使用`std::vector`带有两个迭代器的构造函数：

```
const char* arr[] = {"Hello", "Friend", "Monkey", "Face"};
std::vector<std::string> v(std::begin(arr), std::end(arr)); 
```

或者如果你真的有一个`const char**`：

```
const char** p = arr;
std::vector<std::string> v(p, p + 4); 
```

由于数组到指针的转换，它也可以直接使用`arr`而不是使用。`p`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T18:52:22.407

```
char** c;
vector<string> v(c, c + 10); 
```

将从给定范围的元素构造元素。10 是这里的元素数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T19:29:31.280

您可以使用带有两个迭代器的[构造函数，即`std::vector`](http://www.cplusplus.com/reference/vector/vector/vector/)***范围构造函数***：

```
char* strings[] = {"aaa", "bbb", "ccc", "ddd"};
std::vector<std::string> v(strings, strings + 4); 
```

`4`你的数组的大小在哪里。在这个具体示例中，`strings`也可以使用[`sizeof`operator](http://en.cppreference.com/w/cpp/language/sizeof)来计算数组的大小：

```
int len = sizeof(strings)/sizeof(char*);
std::vector<std::string> v2(strings, strings + len); 
```

但是，纯数组的大小是不可能的，`char**`因为不能以任何方式直接从指针中检索数组的大小（也值得阅读有关[数组衰减的](https://stackoverflow.com/q/1461432/1168156)内容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T19:03:52.793

这个单行代码对于捕获命令行参数很有用......

```
int
main(int argc, char ** argv)
{
  std::vector<std::string> arguments(argv, argv + argc);
} 
```

# ckan - 将附加内容附加到 CKAN 资源？

> ID：15709586
> 
> 赞同：4
> 
> 时间：2013-03-29T18:50:32.390
> 
> 标签：ckan

我可以在 CKAN 资源中附加额外内容吗？我注意到它`ckan.model.Resource`有一个`extras`属性，所以我尝试使用以下内容创建资源：

```
resource = {
    "package_id": "my-package-id",
    "url": "http://google.com",
    "name": "Google",
    "extras": [
        { "key": "myextra", "value": "my extra content" }
    ]
}

from ckan.plugins import toolkit
toolkit.get_action("resource_create")(faked_context, resource) 
```

我跟着逻辑功能最终运行`package_update`，但失败了`ValidationError: {u' junk': u'The input field __junk was not expected.'}`

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T13:12:56.887

您不必为资源附加项使用键“附加”，只需在资源字典中添加任何您想要的任意键值对作为顶级键，它们将被转换为资源附加项。例如，我认为这应该有效：

```
resource = {
    "package_id": "my-package-id",
    "url": "http://google.com",
    "name": "Google",
    "myextra": "my extra content"
} 
```

至少，我只是在 API 上尝试过它并且它工作，所以我认为它可以通过插件工具包工作，就像你正在做的那样。我猜这个功能需要记录，可能在[resource_create() 文档字符串](http://docs.ckan.org/en/latest/ckan.logic.action.create.html#ckan.logic.action.create.resource_create)中。

（注意：这不适*用于*包，要向包添加自定义字段，请参阅CKAN 附带的[example_idatasetform 扩展。）](https://github.com/okfn/ckan/tree/release-v2.0/ckanext/example_idatasetform)

# css - 具有固定高度和自动宽度的 CSS Div

> ID：15709587
> 
> 赞同：0
> 
> 时间：2013-03-29T18:50:36.610
> 
> 标签：css, height, width, fixed

所以我想制作一个 div 容器，我给它一个固定的高度，并希望它的宽度自动适应其中的内容，即使它超过屏幕宽度的 100%。简单地通过在 div 的 css 上声明 width:auto 是行不通的，因为它不会超过屏幕的 100%。

```
.container {
    background: red;
    height: 200px;
    width: auto;   
} 
```

这是一个演示：

[http://jsfiddle.net/8MqtN/2/](http://jsfiddle.net/8MqtN/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:59:42.957

而不是宽度尝试使用`display:inline-block`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:56:35.067

为你的身体使用下面的 css 并尝试一次，看看你是否得到你想要的。

```
 body
          {
          margin : 0;
          padding: 0;
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T06:36:40.507

我刚刚添加到您的 css 类 .container

```
position: relative; display: table; 
```

现在您的内容似乎知道您的内容的高度。您设置的红色背景会根据里面的内容进行相应的扩展。这就是你想要达到的目标吗？

# python - 通过 Python 3.3 中的循环将键和值迭代到字典中

> ID：15709591
> 
> 赞同：1
> 
> 时间：2013-03-29T18:50:59.953
> 
> 标签：python, dictionary, loops

假设我有两个列表。

```
>>> List1 = ['This', 'is', 'a', 'list']
>>> list2 = ['Put', 'this', 'into', 'dictionary']

>>> d = {} 
```

我将如何使用循环使 list1 成为键并 list2 成为值，以便每个索引将自己存储到字典中，例如......

```
>>> d = {'This': 'Put', 'is': 'this', 'a': 'into', 'list': 'dictionary'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:02:40.233

由于您明确询问“我将如何使用循环到 X”而不是“我如何 X”，这可能是一个家庭作业，他们不希望您用`zip`. 所以，以防万一，我会给你一个提示。

首先，这是一种同步迭代两个列表的方法（假设您知道它们的长度相同）。这不是*正确*的做法——再一次，那是`zip`——但如果你的教授希望你以错误的方式做事，你可以。

```
length = len(List1)
for i in range(length):
    print(List1[i], List2[i]) 
```

现在您只需要弄清楚在该循环中要做什么，而不是`print`,对于两个列表中每个匹配的 x 和 y 都`d[x]`必须相等`y`。

# jquery - Ajax 在 Rails 中更新日历

> ID：15709592
> 
> 赞同：0
> 
> 时间：2013-03-29T18:51:01.643
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我有一个事件数据库，我希望它显示“今天的事件”。

我有那部分工作。在页面底部我有一个日历，当您单击日期时，我希望它更新列出的事件以显示新日期。

目前我有

```
<% date = Date.current %>
<% @events.each do |event| %>
<% if event.eventdate === date %>
    <%= event.title %><br>
<% end %>
<% end %> 
```

例如按钮是

```
<button type="submit" id="dateChange" value="01-01-2013">January 1</button> 
```

jQuery是

```
$(document).ready(function() {
    $('#setdate').html("<% date = Date.tomorrow %>")
 });
}); 
```

它将 html 更新到明天（就像测试一样）。

两个问题-> 如何让它更新列出的实际事件以及如何提取按钮的值并将其用作 Date 变量？

也不确定在我的控制器中做什么，它只是一个索引功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:13:21.727

让您的控制器响应 JS 请求并将标记生成保留在部分内部，以便您可以轻松地渲染该部分。此外，您需要确保您的链接/按钮将远程属性设置为 true，否则它将不起作用。

这是一个我没有测试过的例子，但它应该可以工作。

**index.html.erb**

```
<div id="events">
    <%= render( 'events_list' ) %>
</div> 
```

**_events_list.html.erb**

```
<% date ||= Date.current %>
<% @events.each do |event| %>
    <% if event.eventdate === date %>
        <%= event.title %><br>
    <% end %>
<% end %>
<%= link_to "#{date.tomorrow}", events_path({:date => date.tomorrow}), :remote => true %> 
```

**events_controller.rb**

```
...
def index
    @events = Event.all
    @next_date = params[:date]
  respond_to do |format|
    format.html
    format.js # By default this will look for views/events/index.js.erb
  end
end
... 
```

**index.js.erb**

```
$('#events').html("<%= escape_javascript render( 'events_list', :date => @next_date ) %>"); 
```

试一试，让我知道。

# mysql - MySQL 创建函数失败并出现错误 1064

> ID：15709604
> 
> 赞同：2
> 
> 时间：2013-03-29T18:51:39.223
> 
> 标签：mysql, create-function

我的生产服务器上有一个运行 MySQL v5.5.8 的函数，可以正常执行。

当我尝试在运行 MySQL v5.5.9 的测试服务器上创建相同的功能时，创建失败并出现错误 1064。有人可以解释为什么在一台服务器上可以，而在另一台服务器上不行吗？为什么 MySQL 会返回如此模糊和无用的消息，我永远不会知道！！！

创建是：

```
DELIMITER $$

CREATE FUNCTION `CheckProjType` (type INT, cost BIGINT ) 
    RETURNS VARCHAR(50) 
    CHARSET latin1
    NO SQL
BEGIN
    DECLARE rtn VARCHAR(50);
    IF type = 5 THEN SET rtn = 'New Maint';
    ELSE
      IF type = 4 THEN SET rtn = 'Ongoing Maintenance';
      ELSE
        IF type = 3 THEN SET rtn = 'New Development';
        else
          IF cost > 1000000000 THEN SET rtn = 'New Expansion';
          else
            IF cost > 250000000 THEN SET rtn = 'Major Improvement';
            ELSE
              IF cost > 25000000 THEN SET rtn = 'Major Development';
              ELSE
                 SET rtn = 'Small Improvement';
              END IF;
            END IF;
          END IF;
        END IF;
      END IF;
    END IF;

  RETURN rtn;

END $$

DELIMITER ; 
```

这是错误：

```
ERROR 1064: You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use 
near '' at line 6

SQL Statement:

CREATE FUNCTION `CheckProjType` (type INT, cost BIGINT ) 

    RETURNS VARCHAR(50) 

    CHARSET latin1

    NO SQL

BEGIN

    DECLARE rtn VARCHAR(50) 
```

# python - 在 grails 应用程序后面使用 Python 或 C

> ID：15709616
> 
> 赞同：4
> 
> 时间：2013-03-29T18:52:25.027
> 
> 标签：python, grails, groovy, jms, activemq

我正在开发一个处理大量图像处理的 grails 应用程序。工作流程是：

*   用户上传图片
*   项目被添加到队列中
*   后端进程将从队列中选择项目并对其进行分析

我遇到了 OpenCV，它有很多我想使用的功能，但是，[JavaCV](https://code.google.com/p/javacv/)的 Java 包装器很难使用。除了 Java/Scala 中的几个示例之外，它缺少文档。但是，它有不错的 C 或[Python](http://opencv.willowgarage.com/documentation/python/)文档。

所以我想知道是否可以用 Python 或 C 编写队列工作程序。工作程序将从队列中取出一个项目，对其进行处理，然后将其放回队列中，以便我的 grails 应用程序可以接收它。

我的问题是：

*   我应该为我的队列使用什么？JMS 插件？
*   为了让 Python 或 C 识别队列中有新项目，我需要做些什么特别的事情吗？这对 ActiveMQ 有好处吗？
*   您认为我的方法存在重大问题吗？
*   任何显示此类 JMS 跨平台演示的链接将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:31:59.703

*   我应该为我的队列使用什么？JMS 插件？

我猜你可能会在不同的队列实现中遇到同样的问题：你可能找不到用于 JMS 的好的 C 或 Python API。

为什么不直接使用数据库表作为队列？

*   为了让 Python 或 C 识别队列中有新项目，我需要做些什么特别的事情吗？这对 ActiveMQ 有好处吗？

没什么特别的——你只需要知道如何使用队列... :-) ActiveMQ 是 Java 世界中众所周知的 JMS 实现

*   您认为我的方法存在重大问题吗？

如果您可以在项目中处理两种不同的语言，则不会。这会增加复杂性。如果您决定使用 JMS 解决方案，您还将通过队列管理器增加复杂性......

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T18:13:35.063

With grails 2, you can using Python code via Jython, And in Grails 3+, spring boot make using Python far more easier than grails2.

Here is some info: [http://docs.spring.io/spring-python/1.2.x/sphinx/html/](http://docs.spring.io/spring-python/1.2.x/sphinx/html/)

# iphone - Toggle to editing mode in View Controllers

> ID：15709617
> 
> 赞同：0
> 
> 时间：2013-03-29T18:52:28.137
> 
> 标签：iphone, ios, uiviewcontroller

I have a View Controller that displays some labels. When entering in editing mode, I want them to change to `UITextField` in order to be editable. What is the cleanest way to do it?

So far, I have edited `(void)setEditing:(BOOL)flag animated:(BOOL)animated`. In my `.xib` I have both the `UILabel` and `UITextField` on above the other and when entering editing mode, I disable the hide the labels and show the text fields. But I was wondering if there is a wiser way to do it.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:24:36.887

Using a UITableView to manage the view mode and edit more is cleaner than what you are doing currently.

# php - What is more efficient, saving to text file or database table?

> ID：15709626
> 
> 赞同：0
> 
> 时间：2013-03-29T18:53:01.190
> 
> 标签：php

I'm building a blog, I have done to build the replies system and now I'm working on the "posts" system. the replies was built to be saved in a database table. So I wonder if the posts should be saved in a table too or in text files. And generally, what do you prefer and do more in you'r projects?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:58:24.877

Save them in your database.

By doing this you will obtain consistency (all blog-related data is in a database you can easily backup/restore) and functionality (easier to search, retrieve, process, etc).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:58:03.333

If you can handle the file saving, traversing and retrieve the data, then use file; otherwise, use a database.

# php - 使用 PHP 从文件中读取大型 js 数组

> ID：15709631
> 
> 赞同：0
> 
> 时间：2013-03-29T18:53:12.547
> 
> 标签：php, javascript, ajax, json

我正在尝试处理来自 CSV 文件的大型（150MB+）JavaScript 数组。

这是数组的样子：

```
var results = [
{"requestId":"1","responseId":"1","time":"11","opacity":"0.6"}
,
{"requestId":"1","responseId":"2","time":"12","opacity":"0.7"}
,
{"requestId":"1","responseId":"3","time":"13","opacity":"0.8"}
,
{"requestId":"1","responseId":"4","time":"14","opacity":"0.9"}
,
{"requestId":"1","responseId":"5","time":"15","opacity":"0.1"}
....
]; 
```

大约有 100,000 行。我需要从每个数组元素中获取每个值。

例如，我需要分别从“requestId”、“responseId”、“time”和“opacity”中取 1、1、11 和 0.6。

我尝试使用 *file_get_contents* （失败，无法读取文件，文件太大）和文件流，还有以下要读取的代码，但我不知道如何使用 PHP 提取数字。非常感谢你的帮助。无论如何我可以将其转换为 PHP 数组或 JSON 吗？我喜欢尽可能快地处理数字......

```
$fh = fopen($cachedFile, 'r');
$Data = fread($fh, filesize($cachedFile));
fclose($fh);
echo "<pre>";
echo $Data;
echo "</pre>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:04:01.627

> 失败，无法读取文件，文件太大

这是您的 PHP 配置文件限制的问题。您可以在*php.ini 中将*其更改为：

```
memory_limit = 200M 
```

或者将以下内容添加到您的 PHP 脚本中：

```
ini_set('memory_limit', '200M'); 
```

* * *

> 我不知道如何使用 PHP 提取数字

为了获取值，您可以使用以下内容：

```
$fh = fopen('a.txt', 'r');
$Data = fscanf($fh, '{"requestId":"%d","responseId":"%d","time":"%d","opacity":"%f"}');

print_r($Data); 
```

这将输出如下内容：

```
Array
(
    [0] => 1
    [1] => 1
    [2] => 11
    [3] => 0.6
) 
```

请注意，在上面的代码中，我假设您的文件有多行`'{"requestId":"%d","responseId":"%d","time":"%d","opacity":"%f"}'`. 您可以将其更改为您想要的任何内容

# c# - Linq 按不同值搜索

> ID：15709640
> 
> 赞同：5
> 
> 时间：2013-03-29T18:53:49.687
> 
> 标签：c#, linq

我有这样的课：

```
class Person
{
    private String sName;
    private String sPhone;
    private String sAge;
    private String sE_Mail;
    // … code …
} 
```

而且我必须通过从用户那里收到的值进行搜索，它可能是这个类的任何属性。我也有这个：

```
public IEnumerable<Person> SearchByPhone(string value)
{
    return from person in personCollection                   
           where person.**SPhone** == value
           select person;
} 
```

我有四个这样的方法，唯一的区别是属性。拜托，谁能告诉我如何仅用一种方法或不可能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:56:58.207

无需编写单独的方法。一个方法就足够了：

```
public IEnumerable<Person> Search<T>(T value, Func<Person,T> mapFunc)
{
    return from person in personCollection                   
           where mapFunc(person).Equals(value)
           select person;
 } 
```

然后这样称呼它：

```
Search("SOME VALUE", input=>input.sPhone);  //sPhone must be public
Search("SOME VALUE", input=>input.sAge);     //sAge must be public 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:57:14.577

您可以为此使用[动态 linq 库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

```
public IQueryable<Person> Search(string column, string value)
{
    return personCollection.Where(string.Format("{0} = @1", column), value);
} 
```

或者您可以自己构建表达式：

```
public IQueryable<Person> Search(string column, string value)
{
    var param = Expression.Parameter(typeof(T), "x");
    var prop = Expression.Property(param, column);
    var val = Expression.Constant(value, prop.Type);
    var equals = Expression.Equal(prop, val);
    var lambda = Expression.Lambda(equals, param);
    return personCollection.Where(lambda);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T19:02:24.917

最简单的方法是将 where 语句变成 or 操作。

```
public IEnumerable<Person> SearchByValue(string value)
{
    return from person in personCollection
           where (person.sName.Equals(value) || 
               person.sPhone.Equals(value) || person.sAge.Equals(value) || 
               person.sE_Mail.Equals(value));
} 
```

就我个人而言，我更喜欢使用 fluent api，因为它不那么冗长，并且使将 LINQ 命令链接在一起更加明显......这也是那个实现

```
public IEnumerable<Person> SearchByValue(string value)
{
    return personCollection.Where(p => p.sName.Equals(value) || 
               p.sPhone.Equals(value) || p.sAge.Equals(value) || 
               p.sE_Mail.Equals(value));
} 
```

# ruby - 如何返回带有 case 语句的哈希？

> ID：15709645
> 
> 赞同：3
> 
> 时间：2013-03-29T18:53:55.270
> 
> 标签：ruby, hashmap

我正在尝试编写一个获取日期的天数的函数，例如，今天（3 月 29 日）是一年中的第 88 天。然后它返回一个包含月份和月份中的日期的哈希：

```
{"month" => "March, "day" => 29} 
```

我不太清楚这段代码有什么问题，但它总是返回`nil`. 有什么想法吗？我正在使用 Ruby 1.8.7 p358。

```
def number_to_date(days)
  date = case days
    when days <= 31  then {"month" => "January",   "day" => days}
    when days <= 59  then {"month" => "February",  "day" => (days - 31)}
    when days <= 90  then {"month" => "March",     "day" => (days - 59)}
    when days <= 120 then {"month" => "April",     "day" => (days - 90)}
    when days <= 151 then {"month" => "May",       "day" => (days - 120)}
    when days <= 181 then {"month" => "June",      "day" => (days - 151)}
    when days <= 212 then {"month" => "July",      "day" => (days - 181)}
    when days <= 243 then {"month" => "August",    "day" => (days - 212)}
    when days <= 273 then {"month" => "September", "day" => (days - 243)}
    when days <= 304 then {"month" => "October",   "day" => (days - 273)}
    when days <= 334 then {"month" => "November",  "day" => (days - 304)}
    when days <= 365 then {"month" => "December",  "day" => (days - 334)}
  end
  return date
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:01:43.420

如果要在每个子句`case`中使用表达式，则需要使用裸语句。`when`否则，Ruby 将调用`(days <= 31) === days`，这永远不会是真的。

```
def number_to_date(days)
  date = case
    when days <= 31  then {"month" => "January",   "day" => days}
    when days <= 59  then {"month" => "February",  "day" => (days - 31)}
    # ...
  end
  return date
end 
```

This implementation however ignores leap days and it seems simpler and more correct to just do this:

```
def number_to_date(days)
  date = Date.ordinal(Date.today.year, days)
  {"month" => Date::MONTHNAMES[date.month], "day" => date.day}
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:00:04.920

你只需要一个小的语法调整。`days`从`date = case days`声明中删除。否则，您的条件语句将与`days`变量进行比较。

# jquery - Dynamic horizontal scrolling shadows

> ID：15709647
> 
> 赞同：0
> 
> 时间：2013-03-29T18:54:02.473
> 
> 标签：jquery

How would I detect wether a horizontal scroll bar is at the end.

I have got this far with adding horizontal scrolling shadows: [http://codepen.io/hugo/pen/kCveF](http://codepen.io/hugo/pen/kCveF)

but I would like to remove the class ".shadow-middle" and add the class".shadow-left" when the scroll bar gets to the end.

How would I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:56:55.577

I would try to get the window size when the page loads and then set a `scrollLeft()` if statement that went something like if scrollLeft equals window width remove shadow middle and add shadow left.

I forked your project on codepen and then wrote the javaScript I was explaining. here is the [pen](http://codepen.io/kqlambert/pen/nkbCy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:09:16.343

You would need to get the width of the container and compare it with the scrollLeft, switching the classes when they are the same on scroll

# android - Textview setCompoundDrawables 不会更改或显示

> ID：15709648
> 
> 赞同：3
> 
> 时间：2013-03-29T18:54:02.663
> 
> 标签：android, android-layout

我有一个带有自定义列表项的 ListView

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >    
    <ImageView
        android:id="@android:id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/app_name"
        android:maxWidth="32dp" />

    <TextView
        android:id="@android:id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textIsSelectable="true"
        android:textSize="24sp" >

    </TextView>
</LinearLayout> 
```

现在 Eclipse 用`This tag and its children can be replaced by one <TextView/> and a compound drawable`. 一切正常，但我讨厌警告现在我已经改变了看法。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <TextView
        android:id="@android:id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textIsSelectable="true"
        android:textSize="24sp"
        android:drawableLeft="@drawable/unstarred" >

    </TextView>
</LinearLayout> 
```

但是图像没有显示，可以告诉我布局有什么问题，这是我的适配器

```
public class CategoryAdapter extends ArrayAdapter<Category> {

    private Context mContext;
    private int mLayoutResourceId;
    private Category mCategories[] = null;

    public CategoryAdapter(Context context, int layoutResourceId, Category[] data) {
        super(context, layoutResourceId, data);

        mContext = context;
        mCategories = data;
        mLayoutResourceId = layoutResourceId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;
        Holder holder = null;

        if(null == row) {               
            row = LayoutInflater.from(mContext).inflate(mLayoutResourceId, parent, false);
            holder = new Holder();
            holder.mIcon = (ImageView)row.findViewById(android.R.id.icon);
            holder.mTitle = (TextView)row.findViewById(android.R.id.title);

            row.setTag(holder);
        } else {
            holder = (Holder) row.getTag();
        }

       // obviously only one is used at a time
       // First layout
       final Category category = mCategories[position];
       holder.mTitle.setText(category.getName());
       holder.mIcon
          .setImageResource(category.getStarred() == 1 ? R.drawable.starred : R.drawable.unstarred);            

       // Second layout
       final Category category = mCategories[position];
       final Drawable icon = getResources().getDrawable(category.getStarred() == 1 ? R.drawable.starred : R.drawable.unstarred);
       holder.mTitle.setText(category.getName());
       holder.mTitle.setCompoundDrawables(icon, null, null, null);

        return row;
    }       
}

public static class Holder {
    ImageView mIcon;
    TextView mTitle;        
} 
```

问题是：**图像未显示**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-29T19:36:44.983

我改变`setCompoundDrawables`并`setCompoundDrawablesWithIntrinsicBounds`最终工作

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-10T22:29:39.767

我知道这是一个老问题，但仍然相关（至少对我而言 ;-)），所以也许其他人正在寻找答案。

尽管user4294815的[回答](https://stackoverflow.com/a/27143533/882251)非常接近，但没有一个答案实际上描述了问题所在。

发生这种情况的原因是因为`#setBounds()`尚未在您的图标上调用，因此它永远不会有任何大小，除了`width = 0`and `height = 0`。

此外，如果您查看文档，`#setCompoundDrawables()`它实际上表明您需要`#setBounds()`在`Drawable`设置之前调用`Drawable`：

> ```
> /**
>  * Sets the Drawables (if any) to appear to the left of, above, to the
>  * right of, and below the text. Use {@code null} if you do not want a
>  * Drawable there. The Drawables must already have had
>  * {@link Drawable#setBounds} called.
>  * <p>
>  * Calling this method will overwrite any Drawables previously set using
>  * {@link #setCompoundDrawablesRelative} or related methods.
>  *
>  * @attr ref android.R.styleable#TextView_drawableLeft
>  * @attr ref android.R.styleable#TextView_drawableTop
>  * @attr ref android.R.styleable#TextView_drawableRight
>  * @attr ref android.R.styleable#TextView_drawableBottom
>  */ 
> ```

现在要解决此问题，您可以调用`#setBounds()`您的`Drawable`，或者如果您不`Drawable`直接使用，则必须使用`#setCompoundDrawablesWithIntrinsicBounds()`或`#setCompoundDrawablesRelativeWithIntrinsicBounds()`。后者在今天更合适，因为它不使用`left`and`right`命名，而是使用`start`and `end`，因此图标将相对于阅读方向进行设置。

I know that rkmax's own [answer](https://stackoverflow.com/a/15710264/882251) answered the question, or at least provided the solution, but sometimes that's not enough - text explaining the issue is more appropriate in my opinion and adds clarification to the next person looking at this question.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-26T07:33:59.003

添加：

```
icon.setBounds(0, 0, your icon width, your icon height); 
```

前：

```
holder.mTitle.setCompoundDrawables(icon, null, null, null); 
```

或者：

```
holder.mTitle.setCompoundDrawablesWithIntrinsicBounds(category.getStarred() == 1 ? R.drawable.starred : R.drawable.unstarred, null, null, null); 
```

反而。

# database - 存储 facebook UID 的最佳数据库类型是什么？

> ID：15709651
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:54:13.000
> 
> 标签：database, facebook, authentication, facebook-authentication

我的应用程序的用户可以通过 Facebook 进行身份验证，因此我将 facebook uid 存储在我的数据库中，当用户登录时，我需要像这样查询我的数据库：

```
SELECT * FROM users WHERE uid = _SOME_UID_; 
```

现在`uid`列是 VARCHAR，但我认为我需要将其转换为某种数字类型 BIGINT。

为什么我认为我需要这样做：

1.  **处理器时间：**通常使用数字（过滤/索引）的操作总是比使用字符串的相同操作快

2.  **存储：**数字小于对应的字符串

3.  **嗯... oauth-argument** Facebook 身份验证是我要使用的唯一身份验证类型（实际上，这是一个画布应用程序） - 所以我不需要关心非数字的 UID

问题是：

1.  我对吗？
2.  Facebook 有朝一日可以开始使用非数字 uid 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:03:39.967

我会坚持使用 VARCHAR。

虽然它当然可以存储为一个，但我认为 Facebook UID 并不是一个真正的数字。它是一个字符集合，恰好都是数字——但它是一个标识符，而不是一个要被操纵的数字。

我想知道性能差异到底是*什么*。找出这一点，做出决定会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:08:45.387

这取决于几个因素。首先，您的数据收集可能有多大，我们谈论的是数千个 UID 还是数百万个？如果您不担心项目的规模，然后尝试找到最小的容器（一个大整数），那么您会更担心能够随着变化进行扩展。

So now you need to choose VarChar of a reasonable size which will take any format of UID and be happy- this includes leading zeros and bigInt which is easier to sanitise for but unfriendly to leading zeros and letters.

If you *know* that the UID is always a non-leading zero or zero padded number then you can get slightly better security by sanitising by way of casting to type. That and size are all the benefits of bigInt.

VarChar has the downfall of size - you need to know the biggest UID length before you start but leading zeros, letters and other unexpected content can be handled with the small exception that you are now cleaning a string.

From a programming point of view it makes very little odds as a UID is just a label that is unique. With an index on it I should not imagine that there is any speed difference in MySQL at least not with the common engines it might be using.

So *best* is simply a product of what you need most from the data.

# r - 将 .combine 与 cforest 一起使用时遇到问题

> ID：15709655
> 
> 赞同：4
> 
> 时间：2013-03-29T18:54:23.913
> 
> 标签：r, parallel-processing, random-forest

您好，我在 R中并行化*cforest时遇到问题。*

我一直在尝试使用*派对*包的*cforest*函数创建分类模型。我希望它在我的计算机上的多个内核中并行运行。我已经使用*randomForest*算法结合*.combine*和*foreach*成功地做到了这一点：

 ***```
 library(doParallel)
    library(foreach)
    library(randomForest)
    library(party)        
    cl <- (5)
    registerDoParallel(cl)        
    set.seed(1234)
    abs_pos_dat_all <- read.csv('all_abs_pos_predictors_3_20_13_for_R.txt');
    abs_pos_dat <- abs_pos_dat_all[1:10000,]
    train_test_indices <- sample(2,nrow(abs_pos_dat), replace=TRUE, prob=c(.7,.3));
    ref_polarity_dat <- read.table('ref_polarity_3_20_13_for_R.txt');
    ref_polarity_dat <- factor(ref_polarity_dat[1:10000,])
    ref_polarity_train <- ref_polarity_dat[train_test_indices==1]
abs_pos_train[,1] <- ordered(abs_pos_train[,1], labels = c("Buried","Part buried","Exposed"))
abs_pos_train[,2] <- ordered(abs_pos_train[,2], labels = c("Helix","Strand","Other"))
Flank_FA_labels <- c("bur bur","bur part","part part","bur exp","part exp", "exp exp")
Flank_Struc_labels <- c("helix helix","helix strand","strand strand","helix other","strand other", "other other")
Flank_Polarity_labels <- c("polar polar", "polar nonpolar", "non polar non polar" )

    for(i in 1:length(Flank_FA_labels)){
        abs_pos_train[,i] <- ordered(abs_pos_train[,2+i], labels = Flank_FA_labels) 
        abs_pos_train[,8+i] <- ordered(abs_pos_train[,8+i], labels = Flank_Polarity_labels)
        abs_pos_train[,14+i] <- ordered(abs_pos_train[,14+i], labels = Flank_Struc_labels)
    }

   colnames(abs_pos_train) <- c("ref_FA", "ref_struc", "Np1Flank_FA", "Np2Flank_FA", "Np3Flank_FA", "Np4Flank_FA", "Np5Flank_FA", "Np6Flank_FA", "Np1Flank_Struc", "Np2Flank_Struc", "Np3Flank_Struc", "Np4Flank_Struc", "Np5Flank_Struc", "Np6Flank_Struc", "Np1Flank_P_NP","Np2Flank_P_NP", "Np3Flank_P_NP", "Np4Flank_P_NP", "Np5Flank_P_NP", "Np6Flank_P_NP")

    abs_pos_random_forest <<- foreach(ntree=rep(100, 5), .combine=combine, .packages='randomForest') %dopar%  randomForest(ref_polarity_train~.,data = abs_pos_train, ntree=ntree) 
```

但是，当我使用与*cforest*相同的语法时，我收到以下错误：

```
 abs_pos_inference_random_forest <<- foreach(ntree=rep(20, 6), 
    .combine=combine , .packages='party') %dopar%  cforest(ref_polarity_train~.,
    data = abs_pos_train, controls = cforest_unbiased(ntree=ntree, mtry = 1))
    error calling combine function:
    <simpleError in fun(result.1, result.2): 
    Argument must be a list of randomForest objects> 
```

我无法弄清楚为什么 .combine 正在寻找*randomForest*对象而不是*cforest*对象，或者至少为什么 .combine 不会自动识别正在组合的对象的类型，如果它们都是单个函数的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:29:51.333

您将收到相同的错误消息执行：

```
library(randomForest)
combine(1,2,3) 
```

大概是加载了randomForest包，所以`combine`通过选项将randomForest函数传递给了foreach `.combine`。如果`combine`是具有由 randomForest 和 party 定义的方法的通用函数，那么它可能会按您的预期工作。但这不是通用的。它只是 randomForest 包中定义的常规函数​​，foreach 尽职尽责地调用了它。

我对party包不是很熟悉，所以不知道它是否包含等效功能。***

# javascript - 让主干视图共存还是一次创建和销毁一个？

> ID：15709657
> 
> 赞同：0
> 
> 时间：2013-03-29T18:54:42.197
> 
> 标签：javascript, backbone.js, coffeescript

我有一个单页应用程序。布局的一部分在十个不同的视图之间切换。在任何给定时间只需要一个视图。

让十个视图全部存在并且它们可以根据需要渲染和隐藏自己，或者视图一次只存在一个并且渲染/隐藏步骤也会创建和销毁它们，是不是更好？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:59:47.057

假设您可以相当快地重新创建视图，销毁未显示的视图将为您提供更好的性能，尤其是在移动设备上。

# dependency-injection - Zend Framework 2 将服务管理器注入 Fieldset

> ID：15709659
> 
> 赞同：1
> 
> 时间：2013-03-29T18:54:47.993
> 
> 标签：dependency-injection, zend-framework2, zend-form, service-locator, servicemanager

我只是将我的 ZF2 更新到 V2.1.4，以便我可以使用 Zend\Form 类的 init 方法将 ServiceLocator 注入 FieldSet，如[Zend 文档](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.advanced-use-of-forms.html)所述。

我在 Global.php 和 Module.php 文件中有数据库驱动程序和服务的定义，还解释了[文档](https://packages.zendframework.com/docs/latest/manual/en/user-guide/database-and-models.html)。该服务在所有项目中都可以正常工作。

这是我的字段集代码：

```
 class UserFieldset extends Fieldset implements ServiceLocatorAwareInterface{
        protected $serviceLocator;  
            public function setServiceLocator(ServiceLocatorInterface $sl) {
                $this->serviceLocator = $sl;
            }
            public function getServiceLocator() {
                return $this->serviceLocator;
            }   
            public function init() {
                var_dump($this->serviceLocator);
            }

            public function __construct() {
                    .........
            } 
```

}

我的问题如下：

在 UserFieldset::init() 方法内部，$this->serviceLocator 不是 Zend\ServiceManager\ServiceManager 的实例，就像从控制器获取服务时那样。该实例是 Zend\Form\FormElementManager 并使用 var_dump，看到它没有我的 Zend 配置的任何服务。

如何使用 DI 在 Fieldset 中拥有 Zend\ServiceManager\ServiceManager 实例？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:07:27.827

您可以像这样获取服务管理器实例：

```
public function init() {
    // You will get the application wide service manager
    $sm = $this->getFormFactory()->getFormElementManager()->getServiceLocator();

    // Now you can get things like the application configuration
    $config = $sm->get('Config');
} 
```

* * *

**注意：** 确保您的字段集是通过`FormElementManager`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:01:57.810

你几乎必须构造函数注入你所有的东西。我这样做如下：

```
$form = new SomeForm($serviceManager) 
```

SomeForm 内部：

```
public function __construct(ServiceManager $serviceManager) {
    $fieldSet = new SomeFieldset($serviceManager)

    $this->add($fieldSet);
} 
```

您可以将其嵌套到您希望的深度。关于这一切如何完成的一个很好的文档是

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:02:24.080

尝试调用`FormElementManager`s`getServiceLocator()`方法

```
public function init() {
    var_dump($this->serviceLocator->getServiceLocator());
} 
```

# android - Android：查找两个地理点之间的距离

> ID：15709661
> 
> 赞同：1
> 
> 时间：2013-03-29T18:54:56.240
> 
> 标签：android, map, distance, geo

在 Android 中，当使用距离之间的数学方法时，它返回 0.0kms

还有方法之间的距离..请帮助我...永远感谢..

我正在为我的最终项目而奋斗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:51:53.297

```
double distance

Location locationA = new Location(“point A”)

locationA.setLatitude(latA);

locationA.setLongitude(lngA);

Location locationB = new Location(“point B”);

locationB.setLatitude(latB);

LocationB.setLongitude(lngB);

distance = locationA.distanceTo(locationB); 
```

[http://developer.android.com/reference/android/location/Location.html](http://developer.android.com/reference/android/location/Location.html)

# google-chrome - DevTools 消息“样式无效”是什么意思？

> ID：15709664
> 
> 赞同：3
> 
> 时间：2013-03-29T18:55:19.467
> 
> 标签：google-chrome, webkit, google-chrome-devtools

*此消息是对Developer Tools -> Timeline -> Frames*中“重新计算样式”记录的解释。对于这个字符串，我能找到的唯一搜索结果是对其在 Webkit 本地化源中的位置的引用。

我有一套非常流畅的 60fps 动画正在运行，除了偶尔会消耗 100 多毫秒的“样式无效”打嗝。如 DevTools 时间线图的悬停状态所示，所述打嗝出现在两个位置之一：

1) 一个 greensock 时间轴，它的播放头来回移动以控制在`translateX`屏幕上播放的元素的动画。

2) 直接在一小部分旋转元素上设置变换的代码块：

```
while(i--) {
    gears[i].style['WebkitTransform'] = 'rotate3d(0,0,1,' + (delta * rotations[i]) + 'deg)';
} 
```

![devtools 时间线的屏幕截图](../Images/be8cc7ac1480e0a5ab547807e6b40f1a.png)

这两个都是从`requestAnimationFrame`循环中调用的，并且在代码中的任何地方修改的唯一属性是转换`rotate`/`rotate3d`和`translate`// `translateX`（`translate3d`我已经尝试过使用和不使用3d）。

我也尝试禁用 and 中的一个或另一个`translateX`，`rotate`但它们每个似乎仍然单独导致问题。

# c# - 定期查询数据库并将数据上传到外部 Web 服务的正确方法是什么？

> ID：15709665
> 
> 赞同：0
> 
> 时间：2013-03-29T18:55:22.313
> 
> 标签：c#, .net, multithreading

我有一个 Windows 窗体应用程序，它从多个设备收集数据 - 并将该数据存储在本地 SQLite 数据库中。然后，在一段时间内，我需要将新记录上传到外部网络服务 - 这意味着我需要读取带有“WasUploaded = 0”字段的新记录，上传它们，然后设置“WasUploaded = 1”成功。今天我会像 10 年前那样做这件事——分叉一个新的后台线程，然后做无限循环：

```
while(true) 
{
   try
   {
        var newRecords = dbRepo.ReadNew(10);    // read 10 records at a time
        UploadToExternalWebservice(newRecords);
        foreach (var r in newRecords)
        {
            r.WasUploaded = 1;
        }
        dbRepo.CommitChanges(newRecords);
    } 
    catch (Exception ex)
    {
        Logger.LogError(ex);
    }

    Thread.Current.Sleep(15*1000);
} 
```

但我开始怀疑 - 有没有更好的方法可以做到这一点？在这里使用 Tasks 库值得吗？...还有别的吗？

如果这很重要，我在 .Net 4.0 上。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:59:02.993

使用计时器。将其设置为每 10 分钟（或其他任何时间），然后进行上传。

```
System.Threading.Timer uploadTimer = new Timer(UploadProc, null, TimeSpan.FromMinutes(10), TimeSpan.FromMinutes(10));

void UploadProc(object state)
{
    // do query, upload, and update logic here
} 
```

不需要一个大部分时间都在休眠的显式线程。

如果您希望它更频繁（您的示例中有 15 秒），您可能会遇到可重入计时器滴答声。也就是说，如果您将其设置为 15 秒并且处理时间超过 15 秒，那么您最终将有多个线程同时运行上传代码。

如果这是可能的，您有两个选择：使用锁来防止重新进入，或者使用在每个进程后更新的一次性计时器。

锁很简单。在类范围内定义一个锁对象：

```
private object uploadLock = new object(); 
```

在 UploadProc 内部：

```
void UploadProc(object state)
{
    if (!Monitor.TryEnter(uploadLock))
    {
        // upload in progress. Quit.
        return;
    }
    try
    {
        // processing here
    } 
    finally
    {
        Monitor.Exit(uploadLock);
    }
} 
```

效果很好。一次性的想法涉及将计时器设置为滴答一次然后停止。然后在完成处理后更新它：

```
System.Threading.Timer uploadTimer = new Timer(
    UploadProc, null, TimeSpan.FromSeconds(15), TimeSpan.FromMilliseconds(-1));

void UploadProc(object state)
{
    // processing here
    // now reset the timer
    uploadTimer.Change(TimeSpan.FromSeconds(15), TimeSpan.FromMilliseconds(-1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:59:48.523

这是一个基本的推拉问题。如果数据源可以通知您，那么您可以这样做，否则我认为您的方法是正确的。您可以设置不同的服务来提取这些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:02:19.483

使用 Quartz 定期设置工作，使用 Timer 绝对不是最好的方法，你可以，但这是一种快速的肮脏方法。

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

你也可以为你的工作使用队列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T19:19:50.750

我已经`DispatcherTimer`为此使用了类。

示例用法：

```
DispatcherTimer dt = new DispatcherTimer();
dt.Interval = TimeSpan.FromSeconds(1);
dt.Tick += delegate(object s, EventArgs args) {

//Your Logic here!!    

};
timer.Start(); 
```

这里也是类：[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)

# android - 使用自定义适配器实现复选框

> ID：15709666
> 
> 赞同：1
> 
> 时间：2013-03-29T18:55:22.760
> 
> 标签：android, listview, checkbox, adapter

我正在尝试让我的复选框在自定义适配器中起作用。但是，我仍然没有得到一小部分，我的程序不断强制关闭我尝试测试的每种类型。

这是一个文件管理器，它列出了 sdcard 中的所有图像文件。

```
public class FileBrowserMusic extends ListActivity {

    private File currentDir;
    private FileArrayAdapter adapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.music_main);

        currentDir = new File (Environment.getExternalStorageDirectory().getPath());
        List<Option>flss = new ArrayList<Option>();
        listFiles (currentDir, flss);
        Collections.sort (flss);
        ArrayAdapter<Option> adapter = new FileArrayAdapter(this, flss);
            setListAdapter(adapter);
        registerForContextMenu(getListView());
    }

    // Recursively search for all image files.
    private void listFiles (File f, List<Option> flss) {
        if(f.isDirectory()){
            File[] files = f.listFiles();

            try {
                for (File ff : files){
                    if(!ff.isDirectory()) {
                        if(ff.getName().endsWith(".jpg")) {
                            Log.d(" FILES",ff.getName());
                            flss.add(new Option (ff.getName(),"Files Size: "+ff.length(),ff.getAbsolutePath()));
                        }
                    }
                    else {
                        listFiles(ff, flss);
                    }
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                //e.printStackTrace();
            } 
        }
    }

} 
```

这是我的适配器类。

```
public class FileArrayAdapter extends ArrayAdapter<Option> {

    private Context c;
    private int id;
    private List<Option>items;
    private Activity context;

    public FileArrayAdapter(Activity context, List<Option> objects) {
        super(context, R.layout.music_view, objects);

        this.context = context;
        items = objects;
    }

    public Option getItem (int i) {
        return items.get (i);
    }

    static class ViewHolder {
        protected TextView name, size;
        protected CheckBox checkbox;
    }

    @Override
public View getView (int position, View convertView, ViewGroup parent) {
    // View v = convertView;
    final Option o = items.get(position);
    /*if (v == null) {
        LayoutInflater vi = (LayoutInflater)c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.music_view, null);*/
    View v = null;
    final ViewHolder viewHolder = new ViewHolder();
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        v = inflator.inflate(R.layout.music_view, null);

        //TextView t1 = (TextView) v.findViewById(R.id.backDot);
        //TextView t2 = (TextView) v.findViewById(R.id.backPDir);
        viewHolder.name = (TextView) v.findViewById(R.id.name);
        viewHolder.size = (TextView) v.findViewById(R.id.size);
        viewHolder.checkbox = (CheckBox) v.findViewById(R.id.check);
        viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                Option element = (Option) viewHolder.checkbox.getTag();
                element.setSelected(buttonView.isChecked());
                Log.v("Checked : ", ""+ element.getName());
            }

        });

        v.setTag(viewHolder);
        viewHolder.checkbox.setTag(items.get(position));

    } else {
        v = convertView;
        ((ViewHolder) v.getTag()).checkbox.setTag(items.get(position));
    }

    ViewHolder holder = (ViewHolder) v.getTag();
    holder.name.setText(o.getName());
    holder.size.setText(o.getPath());
    holder.checkbox.setChecked(o.isSelected());

    return v;
}

} 
```

我的选项类。

```
public class Option implements Comparable<Option>{

    private String name;
    private String data;
    private String path;
    boolean selected = false;

    public Option (String n, String d, String p) {
        name = n;
        data = d;
        path = p;       
    }

    public Option (String n, String d, String p, boolean s) {
        name = n;
        data = d;
        path = p;       
        selected = s;       
    }

    public void setName (String n) {
        name = n;
    }

    public void setData (String d) {
        data = d;
    }

    public void setPath (String p) {
        path = p;
    }

    public String getName() {
        return name;
    }

    public String getData() {
        return data;
    }

    public String getPath() {
        return path;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected (boolean s) {
        this.selected = s;
    }

    public int compareTo(Option o) {
        if (this.name != null) {
            return this.name.toLowerCase().compareTo(o.getName().toLowerCase());
        } else {
            throw new IllegalArgumentException();
        }
    }

} 
```

最后，我的 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="wrap_content">

    <TextView android:text="@+id/name" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:id="@+id/label"
        android:layout_marginLeft="15dp"
        android:layout_marginTop="5dp"
        android:textStyle="bold"
        android:textSize="20sp"></TextView>

    <TextView android:text="@+id/size"
        android:layout_below="@+id/label"
            android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:id="@+id/sub"
        android:layout_marginLeft="15dp"
        android:textSize="15sp"></TextView>

    <CheckBox android:id="@+id/check" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_marginLeft="4dp"
        android:layout_marginRight="10dp" android:layout_alignParentRight="true"
        ></CheckBox>
</RelativeLayout> 
```

我哪里做错了？最初，我的代码仅用于在列表视图中列出图像文件。之后，我尝试实现复选框但无法实现。

欣赏它。

由于所有的测试和东西，到目前为止，代码非常混乱。

T1 和 T2 是我之前做文件管理器时的代码。可以忽略它，我猜不应该弄乱我当前的代码。我将删除它并进行测试。

这是我的日志。

```
03-29 18:37:56.086: E/AndroidRuntime(4299): FATAL EXCEPTION: main
03-29 18:37:56.086: E/AndroidRuntime(4299): java.lang.NullPointerException
03-29 18:37:56.086: E/AndroidRuntime(4299):     at sg.joogle.safeit.FileArrayAdapter.getView(FileArrayAdapter.java:98)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.AbsListView.obtainView(AbsListView.java:2033)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.ListView.onMeasure(ListView.java:1155)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.View.measure(View.java:12723)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.View.measure(View.java:12723)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.View.measure(View.java:12723)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.View.measure(View.java:12723)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.View.measure(View.java:12723)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.os.Looper.loop(Looper.java:137)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at java.lang.reflect.Method.invokeNative(Native Method)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at java.lang.reflect.Method.invoke(Method.java:511)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-29 18:37:56.086: E/AndroidRuntime(4299):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:47:35.290

您检查 o !- null，但在 if 块之外，您将 setText 分配给 o.getName。那个时候 o 有没有可能真的是空的？

# bdd - 如何参数化 GivenStories 以及我正在测试的当前故事？

> ID：15709669
> 
> 赞同：2
> 
> 时间：2013-03-29T18:55:38.747
> 
> 标签：bdd, reusability, parameterized, jbehave

我想重用一些常见的步骤。例如

```
Scenario: Navigate to Page 2 and perform first set of validations
Given A user<username> is logged in
When user clicks on <menuItem>
and page <page_name> is displayed
and user clicks on Submit button
Then Page <second_page> is displayed
And validate <condition_1>

Scenario: Navigate to Page 2 and perform second set of validations
Given A user<username> is logged in
When user clicks on <menuItem>
and page <page_name> is displayed
and user clicks on Submit button
Then Page <second_page> is displayed
And validate <condition_2>

Examples:
|username|page_name|menuItem|condition_1|condition_2|
|username1|Page1|Menu1|Condition1|Condition2| 
```

现在，由于给定的条件相同，我想将故事规范化为这样的东西。

在 precondition1.story

```
Given A user<username> is logged in
When user clicks on <menuItem>
and page <page_name> is displayed
and user clicks on Submit button
Then Page <second_page> is displayed 
```

在 currentTestStory.story

```
GivenStories: precondition1.story

Scenario: Navigate to Page 2 and perform first set of validations
Given Page <second_page> is displayed
And validate <condition_1>

Scenario: Navigate to Page 2 and perform second set of validations
Given Page <second_page> is displayed
And validate <condition_2>

Examples:
|username|page_name|menuItem|condition_1|condition_2|
|username1|Page1|Menu1|Condition1|Condition2| 
```

但我面临的挑战是，我无法从当前故事中参数化 GiveStory。有没有办法实现我想要做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:48:40.080

您可以从当前故事参数化给定故事。

[请参阅http://jbehave.org/reference/stable/given-stories.html](http://jbehave.org/reference/stable/given-stories.html)页面上的“通过示例参数化的 GivenStories”部分

缺点是您必须修改代码并将 @Named 注释添加到您的 java 步骤中。所以根据页面中的例子，下面的方法可以照顾到例子中的参数：

```
@When("Something happens")
public void happening(@Named("One") String one, @Named("Two") String two) {
    //Do good
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:15:56.760

我的方法是在这个故事中根本不使用 GivenStories。使用步骤

```
Given Page <second_page> is displayed 
```

然后在该步骤中执行任何操作以显示第二页。

# javascript - 我想计算所有表格元素的总和。IE。警报框应显示 21 而不是 010203040506

> ID：15709672
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:55:45.293
> 
> 标签：javascript

我想添加给定表中的数值。警报框应显示总和。

```
<html>
    <head>
    <script type="text/javascript">
function Calc()
{
i=0
temp=0;
ab=0;
while(i<=5)
{
ab=document.getElementById("tabl").rows[0].cells[i].innerHTML;
temp+=ab;
i++
}
    alert(temp);
}
    </script>
    </head>
    <body>
<table id="tabl" border="1">
            <tr>
        <td>01</td>
            <td>02</td>
        <td>03</td>
            <td>04</td>
        <td>05</td>
            <td>06</td>
        </tr>
    </table>
<input type="button" value="Calculate" onclick="Calc()"> 
    </body>
    </html> 
```

但是在执行程序时，警报框会显示 010203040506。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:00:38.973

利用

temp+=parseFloat(ab);

或者 parseInt() 如果它们总是整数。

否则，您只需连接字符串，而您需要将其转换为数字以执行加法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:03:08.903

您正在连接字符串值，而不是添加数字，使用`parseFloat`或`parseInt`在您的等式中。

看到它在这里工作：http: [//jsfiddle.net/7N6vX/](http://jsfiddle.net/7N6vX/)

# ruby - 为什么 [1,2,3,4,5].each {|n| puts n } 生成一个 rspec 覆盖率报告（！）

> ID：15709673
> 
> 赞同：1
> 
> 时间：2013-03-29T18:55:53.230
> 
> 标签：ruby, rspec, block

我打错了。我的意思是输入这个：

```
[1,2,3,4,5].each {|n| puts n} 
```

但我输入了这个：

```
[1,2,3,4,5].each n { puts n } 
```

我有：

```
Coverage report generated for RSpec to /home/... 
```

第二个命令的结果真的很令人惊讶：我得到了一份 rspec 覆盖率报告！

错误输入的代码使我的系统生成覆盖率报告怎么办？

# ruby - 按日期查询 vs 按时间查询

> ID：15709675
> 
> 赞同：0
> 
> 时间：2013-03-29T18:55:55.557
> 
> 标签：ruby, database, datetime, tire

我假设应用程序代码应始终将时间存储在数据库中作为 UTC（如果我错了就打我）

现在假设我想查询 23-mar-2013 到 24-mar-2013 之间的所有内容。我应该创建一个时间对象，然后查询诸如“23-mar-2013:00:00:00UTC”到“24-mar-2013:24:00:00UTC”之类的东西还是只按日期查询是正确的“23-mar- 2013 年”至“2013 年 3 月 24 日”。

现在，当我不在 UTC 和像 -7:30 这样的时区时，问题就来了。

现在日期查询会出错..

那么这是否意味着我应该随时查询？

我正在谈论 ElasticSearch、Tire、Ruby（但我认为这不重要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:31:44.100

实施*绝对*重要。根据数据库存储日期/时间值的方式，查询一个或另一个数据库非常不同。我建议您编辑您的问题，并使其针对您正在使用的技术。如果可以，请显示一些代码。

不过，总的来说，您混合了两个概念，您可能应该尝试在精神上将它们分开。

*   发生某事的那一刻，一个事件时间，可以通过 DateTime 组合值来衡量 - 表示为 UTC，或者表示为从已知偏移量的 UTC 偏移的值。这通常被称为“瞬时时间”、“世界时间”或“物理时间”。

*   我们在本地谈论日期和时间时赋予它们的值，例如“今天”、“昨天”或“2013 年 3 月 29 日”。即使我们有时间，我们也是在谈论日历上一天的一小部分。这通常被称为“日历时间”、“当地时间”或“公民时间”。

您始终可以使用瞬时时间进行查询和数学运算。这是明确的。然而，“今天”的概念毫无意义。没有观察者来标记一天的结束和下一天的开始。（有人可能会说观察者在伦敦，但在 BST 期间并非如此。）

日历时间仅适用于当您具有日级精度且只有一名观察员时的查询或数学。因此，它通常无法很好地表达本应具有普遍性的事物，例如事件。

让我们回到你原来的问题。你说：

> 我想查询 2013 年 3 月 23 日至 2013 年 3 月 24 日之间的所有内容

就在那里 - 你有问题。上下文是什么？你在说谁的日历日期？即使您说的是 3 月 23 日，但您可能并不是指 3 月 23 日午夜 UTC 到 3 月 24 日午夜 UTC。您可能是指*其他*日历的午夜。

请记住，并非每一天都是 24 小时。当时区打开和关闭夏令时（或夏令时）时，天的长度可能是 23 小时或 25 小时。

那么该怎么办？首先，您需要一个时区数据库（例如 IANA/Olson/TZ/TZDB/ZoneInfo 数据库） [这是一个用 Ruby 实现的](http://tzinfo.rubyforge.org/)。

现在，您需要知道用户的本地时区。那就是 - 提出问题的人，您正在向其展示查询结果。这将涉及您自己的应用程序逻辑，可能是选择器或选择器。如果这是一个 Web 应用程序，您可能想查看[这个基于地图的时区选择器](https://github.com/dosx/timezone-picker)，或者查看[jsTimeZoneDetect](https://bitbucket.org/pellepim/jstimezonedetect)。

您应该始终以瞬时时间存储事件。假设您将事件存储为 UTC（尽管您可能使用偏移量，但我们暂时忽略它）。

因此，您需要知道用户想要的日期范围，查询的开始日期和结束日期映射到什么 UTC 时间？例如，假设我们在印度使用`Asia/Calcutta`时区。我们将`23-mar-2013 00:00 - 24-mar-2013 00:00`, 转换为 UTC 等效值`22-mar-2013 18:30 - 23-mar-2013 18:30`。

Then you can use those UTC DateTime values to query the database.

When you return the results to your user, you will probably want to convert UTC back to local time so they understand the results they are looking at.

You should also read the many great suggestions [in this post](https://stackoverflow.com/q/2532729/634824).

# php - 斜杠和''之间的区别

> ID：15709676
> 
> 赞同：0
> 
> 时间：2013-03-29T18:55:58.953
> 
> 标签：php, escaping, quotes, double-quotes

抱歉，如果有与此非常相似的问题，或者在其他地方有答案，但我最近有一个问题一直在我脑海中。

大多数精通编程语言和字符串的人都知道，您可以使用斜杠 (\") 转义引号

前任： `echo "<input name=\"submit\" type=\"submit\" id=\"brandid\" value=\"submit\" />\n";`

但我通常做的是在 " 中使用 ' 而不是斜杠。所以上面的代码看起来像这样：

```
echo "<input name='submit' type='submit' id='brandid' value='submit' />\n"; 
```

有人可以解释两者之间的差异以及两者之间的优缺点吗？抱歉，如果我没有使用正确的术语或遗漏了什么。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:06:31.077

取决于你喜欢什么，你需要做什么。如果我需要做很多变量替换，双引号和花括号（如果需要）是可行的方法。如果我不需要，我个人不喜欢添加额外的不必要的标记（阅读：转义）。

```
echo "Hello \"$username\", your last visit was on $lastVisit at $time"; 
```

相对于...

```
echo 'Hello "'.$username.'", your last visit was on '.$lastVisit.' at '.$time; 
```

如果它是简单的 HTML 标记并且不需要变量替换，那么单引号就可以了。

```
echo '<a href="index.php">Home</a>'; 
```

这里没有正确答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:08:40.247

在你的情况下，差异并不大。您可以使用其中任何一个。这对于一些需要传递值的 JavaScript 事件来说很明显

```
echo "<input name='submit' type='submit' onclick='MyAwesomeFunction(\"a string\", \"to be\", \"passed here\");' />\n"; 
```

不过，我更喜欢以下内容：

```
?>
<input name='submit' type='submit' onclick='MyAwesomeFunction("a string", "to be", "passed here");' />
<?php 
```

# java - Spring Security：同时处理 Web 应用程序安全性和 Web 服务安全性

> ID：15709679
> 
> 赞同：1
> 
> 时间：2013-03-29T18:56:09.843
> 
> 标签：java, spring, spring-security

如果用户无权访问某些 URI 模式，是否可以在 Spring Security 配置中创建条件以防止显示登录表单？

我现在有以下配置：-

```
<security:http auto-config="true">
    <security:form-login login-page="/" authentication-failure-url="/?login_error=1" default-target-url="/" always-use-default-target="true"/>
    <security:logout logout-success-url="/"/>
    <security:intercept-url pattern="/secure/**" access="ROLE_ADMIN,ROLE_USER"/>
    <security:intercept-url pattern="/api/**" access="ROLE_WEBSERVICE"/>
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
</security:http> 
```

这就是我希望 Spring Security 处理的：-

1.  当用户在`/secure/**`没有从浏览器正确访问的情况下点击时，应该显示一个登录表单。此配置满足此要求。
2.  当用户在`/api/**`没有正确访问权限的情况下点击时，抛出 403 错误而不是显示登录表单。原因是用户可能以编程方式从 javascript 或使用 curl 调用 Web 服务，并且在响应中返回登录表单的 HTML 源代码是没有意义的。
3.  `/api/login`在他们可以使用其他`/api`Web 服务之前，使用将调用对自己进行身份验证。

我一直在使用 Spring Security 构建这个 Web 应用程序，它运行得很好。但是，现在，我需要能够通过 Web 服务公开一些功能，并且我很难尝试使用 Spring Security 来保护我的 Web 应用程序和我的 Web 服务。

非常感谢任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:22:19.263

您可以根据传入请求路径的模式定义[多个过滤器链](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#filter-chains-with-ns)，并使用它来将 Web 服务部分与浏览器访问分开。

对于`/api`过滤器链，您将定义一个`Http403ForbiddenEntryPoint`并将其设置为`entry-point-ref`属性：

```
<http pattern="/api/**" entry-point-ref="forbiddenEntryPoint">
   ...
</http>

<http>
   ... standard form-login etc., as you have now
</http>

<bean id="forbiddenEntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint" /> 
```

# c# - 禁用 Windows 控制焦点

> ID：15709684
> 
> 赞同：1
> 
> 时间：2013-03-29T18:56:27.607
> 
> 标签：c#, wpf

我正在使用 WPF 制作自定义 UI。

目前我没有使用 Blend，但如果必须，我将学习如何使用它。

我试图消除将鼠标悬停在控件上时发生的效果，这就是没有悬停时的样子：

![没有悬停](../Images/efa21728ef5032fa355580654f3149f4.png)

并悬停：

![徘徊](../Images/91a1b3478488fef4ff2984a46de75482.png)

有谁知道我可以如何删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:11:58.340

控件在 WPF 和 Silverlight 中具有 VisualStates。如果您使用的是默认文本框控件，则它具有用于 MouseOver 的 VisualState：

```
<vsm:VisualState x:Name="MouseOver">
              <Storyboard>
                <ColorAnimation Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" To="#FF99C1E2" Duration="0"/>
              </Storyboard>
            </vsm:VisualState> 
```

我给你的建议是去这个网站：[TextBox Default Template](http://msdn.microsoft.com/en-us/library/cc645061%28v=vs.95%29.aspx)

获取文本框的默认模板，然后删除 MouseOver 的视觉状态。或者您可以为任何这样的模板执行此操作。

希望你明白了！

# c# - 在 javascript 中使警报消息安全的最佳方法

> ID：15709694
> 
> 赞同：3
> 
> 时间：2013-03-29T18:57:25.203
> 
> 标签：c#, javascript, jquery, asp.net

我想通过注册一个脚本来显示我的asp.net页面中的消息，有时甚至是来自错误的异常代码。我使用这段代码：

```
ScriptManager.RegisterStartupScript(this, Page.GetType(), "NoDept", "alert('Adjustments require the Total Amount to be ZERO to post!');", true); 
```

如果我可以决定在开发过程中显示的信息，这非常有用，但是如果我想显示来自应用程序的数据，它可能包含无效文本，这当然会破坏脚本并且它不会显示。例如，消息中带有 ' 的内容。

当我尝试显示来自异常的消息时遇到了问题，例如：

```
ScriptManager.RegisterStartupScript(this, Page.GetType(), "processError", "alert('" + ptcred.TransactionError + "');", true); 
```

ptcred.TransactionError 是 ASP.NET 异常错误，它可能包含无效字符。

在我的 alert() 函数中处理不会搞砸我的 javascript 的此信息的最佳方法是什么？jQuery 可以做些什么来清理它？

编辑：我应该解释一下，我想继续轻松地注册一个警报脚本，它简单方便。只是想知道是否有类似 HTML.Encode 之类的东西或可以清理信息的东西，这将使消息不会搞砸脚本。

谢谢，科里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:02:39.653

您需要转义任何引号字符。

```
Regex.Replace(ptcred.TransactionError, "(\"|\')", "\\$1"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T21:28:01.057

您可以调用[HttpUtility.JavaScriptStringEncode](http://msdn.microsoft.com/en-us/library/dd992817.aspx)方法（在 ASP.NET 4.0 中引入）：

```
ScriptManager.RegisterStartupScript(
    this, Page.GetType(), "processError",
    "alert('" + HttpUtility.JavaScriptStringEncode(ptcred.TransactionError) + "');",
    true); 
```

**Caution:** If `TransactionError` might contain user-entered data, then it's extremely important that you correctly encode it, like above. Otherwise, you may introduce a security vulnerability and expose your application to cross-site scripting (XSS) attacks. I don't know if ChaosPandion's answer (escaping single and double quotes) is sufficient to avoid XSS.

# actionscript-3 - AS3 - 类型和类别

> ID：15709695
> 
> 赞同：0
> 
> 时间：2013-03-29T18:57:28.433
> 
> 标签：actionscript-3

我不太确定，但我猜我的问题与我声明变量的方式有关。

下面的代码在 AS3 中合法吗？

```
 var fish1:Fish = new Fish;
    var fish2:Fish = new Fish;
    var fish3:Fish = new Fish;
    var fish4:Fish = new Fish;
    addChild(fish1);
    addChild(fish2);
    addChild(fish3);
    addChild(fish4);
    fish1.x = 0;
    fish2.x = 150;
    fish3.x = 300;
    fish4.x = 450; 
```

我收到 addChild 的每一行的编译器错误说：

Main.as，第 14 行 1180：调用可能未定义的方法 addChild。Main.as，第 14 行 1120：访问未定义的属性 fish3。

对于我指定鱼的 x 坐标的每一行，我都会收到编译器错误消息

Main.as，第 15 行 1120：访问未定义的属性 fish4。

鱼变量的类型是鱼，我已经在我的 .fla 文件的库中定义了它们。提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:48:49.963

您的类需要对某种形式的 DisplayObjectContainer 进行子类化，其中 MovieClip 和 Sprite 是两种可能的选择（一定要找出来）。

但我怀疑真正的问题是你正在编写类代码，就像它是时间线代码一样。我认为你可能关闭了严格模式，这就是为什么你没有得到有用的编译时错误，这将帮助任何熟悉 AS3 的人（尽管可能不是你）立即弄清楚你的代码应该看起来更像

```
    类主要扩展雪碧{
       public var fish1:Fish = new Fish();
       public var fish2:Fish = new Fish();
       public var fish1:Fish = new Fish();
       公共函数 Main() {
          addChild(fish1);
          添加孩子（鱼2）；
          addChild(fish3);
          //不打算输入这个废话。
          //定位代码（和addChild）是浪费时间。
          //这就是舞台的用途！
       }
    }

```

# java - 尝试打开页面大小为 64KB 的 sqlite DB 时出现异常

> ID：15709698
> 
> 赞同：2
> 
> 时间：2013-03-29T18:57:37.283
> 
> 标签：java, sqlite, jdbc

我有一个与 SQLite DB 交互的 java 程序，其中 journal_mode 为删除。

该程序适用于所有数据库，只要数据库的页面大小为 32 KB，我就可以进行事务。

但是有一个 sqlite DB 的页面大小为 64 KB。当我尝试执行 stmt.executeQuery(); 在那个数据库上，它给了我异常
java.sql.SQLException: [SQLITE_NOTADB] 打开的不是数据库文件的文件（文件已加密或不是数据库）

有人可以让我知道这可能是什么解决方案吗？此数据库未加密，并且 journal_mode 仅作为删除。

不过，我可以使用 SQLITESpy 工具打开这个数据库。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T16:35:55.243

如果数据库被另一个应用程序打开并且打开了 wal 和 shm 文件，我会得到同样的奇怪错误。由于我不想打扰这种奇怪的设计内部细节，我正在使用以下解决方法：

```
echo ".dump" | sqlite3 database.db |  sqlite3 dbcopy.db 
```

并处理副本以进行查询。我什至以这种方式免受数据库损坏问题的影响，这似乎也困扰着“新”的 sqlite 设计。我希望 sqlite 设计人员能够确保外部接口更加稳定和干净，并且不会显示诸如失败和损坏之类的内部设计问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:26:56.677

使用 64 KB 页面需要[SQLite 3.7.1](http://www.sqlite.org/releaselog/3_7_1.html)或更高版本。

# mongodb - difference between mongodb and mongodb-server

> ID：15709700
> 
> 赞同：7
> 
> 时间：2013-03-29T18:57:44.113
> 
> 标签：mongodb, ubuntu

When I am trying to install mongodb in my Ubuntu box, apt-get shows me the following options

> mongodb mongodb-clients mongodb-dev mongodb-server

Can anyone please tell me the difference between mongodb and mongodb-server?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T19:09:08.917

Package [mongodb](http://packages.ubuntu.com/lucid/amd64/mongodb/filelist) installs full set of packages - client, admin tools, development files, mongod (mongodb daemon) and mongos (shard routing service), while [mongodb-server](http://packages.ubuntu.com/raring/amd64/mongodb-server/filelist) installs only mongod and mongos (and logs / docs).

# java - Java中的角度帮助

> ID：15709701
> 
> 赞同：0
> 
> 时间：2013-03-29T18:57:47.527
> 
> 标签：java, trigonometry, angle

我正在尝试制作一个角度程序来计算输入角度的 sin、cos 和 tan。这是我遇到问题的代码部分：

```
c.println ("You have entered an angle of " + angle + " degrees.");
radians = Math.toRadians (angle); //convert angle (which is in degrees) to radians(radians = (pi / 180)*degrees)
c.println ("The angle in radians is " + radians); //diplay angle in radians

//caluclating sine, cosine & tangent

double sinx = Math.sin (Math.toRadians (angle));
c.println ("The sine of the angle is " + sinx+ " radians."); //convert sin of angle (in deg) to radians
double cosx = Math.cos (Math.toRadians (angle));
c.println ("The cosine of the angle is " + cosx+ " radians.");//convert cos of angle (in deg) to radians
double tanx = Math.tan (Math.toRadians (angle));
c.println ("The tangent of the angle is " + tanx+ " radians.");//convert tan of angle (in deg) to radians 
```

如果我输入一个 90 度的角度，余弦输出是 6.12^-17.... 当它应该只是 = 0。所以某处有计算错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-20T19:25:54.123

这只是一个四舍五入的错误。这个数字非常小，所以如果你将它四舍五入到小数点后 14 位，或者只输出前 15 位，它将等于 0。从度数到弧度的转换并不精确，因此它给出的值非常接近 0，但并不精确。由于显而易见的原因，您实际上无法存储 PI 的确切值。

# wix - Wix：安装路径不是从对话框中获取的，始终安装在默认目录中

> ID：15709702
> 
> 赞同：1
> 
> 时间：2013-03-29T18:57:51.770
> 
> 标签：wix, installation

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="InetPub" Name="inetpub">
    <Directory Id="wwwroot" Name="wwwroot">
      <Directory Id="InstallDir" Name="AppName"> 
```

并且还有一个对话框从用户那里获取路径，但安装后它仍然进入 wwwroot 文件夹。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:59:23.290

我正在使用 `<UIRef Id="WixUI_Mondo" />`，您选择自定义的地方，您可以浏览并安装到任何目录。

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="ProgramFiles64Folder">
    <Directory Id="CompanyDir" Name="Company">
      <Directory Id="INSTALLFOLDER" Name="IPDev"> 
```

还要确保在组件之前有这样一行：

```
<DirectoryRef Id="INSTALLFOLDER">
  <Directory Id="dir_SampleImages_0" Name="SampleImages">
    <Component Id="comp_SAMPLE_IMAGES_0" DiskId="1" KeyPath="yes" Guid="2FCE9C4A-47B7-4473-BF6E-8ED14C5A9AB0">
      <File Name="Aptina1.raw" Id="file_SAMPLE_IMAGES_0" Source="..\Import\SampleImages\Aptina\400lux_DPonblueEdgehor_bigred0005.raw" />
    </Component> 
```

如果您有任何其他问题，请分享您的完整代码

# jquery - jQuery .html 函数

> ID：15709707
> 
> 赞同：0
> 
> 时间：2013-03-29T18:58:26.943
> 
> 标签：jquery

我正在使用 jquery .get 来加载页面的内容。页面加载正常，输出存储在变量数据中。我只想从该数据变量中获取 ID 为“result1”的特定 div 并将其放在页面上。我无法从变量数据中解析这个特定元素，似乎所有元素都被放置在页面上。我认为这是一个简单的解决方法，但它让我发疯。

这是没有任何解析尝试的基本代码：

```
$.get("test.php?id=" + $(this).attr('id') + "&auth=1" ,function(data){
        $("#details1").html(data);
  }); 
```

以下是数据的结果：

```
<div id='result1'>
<table>
<tr>
<td>testa</td>
<td>testb</td>
</tr>
</table>
</div>

<div id='result2'>
<table>
<tr>
<td>testc</td>
<td>testd</td>
</tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:04:02.457

您可以使用[负载（）](http://api.jquery.com/load/)

```
$("#details1").load("test.php?id=" + $(this).attr('id') + "&auth=1 #result1"); 
```

> .load() 方法与 $.get() 不同，它允许我们指定要插入的远程文档的一部分。这是通过 url 参数的特殊语法实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格后面的部分是确定要加载的内容的 jQuery 选择器。

或者你可以自己做同样的事情：

```
$.get("test.php?id=" + $(this).attr('id') + "&auth=1" ,function(data){
    $("#details1").append( $('<div />').append(data).find('#result1') );
    $("#details2").append( $('<div />').append(data).find('#result2') );
    $("#details3").append( $('<div />').append(data).find('#result3') );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:08:01.537

```
$.get("test.php?id=" + $(this).attr('id') + "&auth=1" ,function(data){
    $("#details1").html($(data).filter('#result1'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:04:21.213

使用此语法仅加载元素`result1`中的 div 。`details1`

```
$('#details1').load("test.php?id=" + $(this).attr('id') + "&auth=1 #result1'); 
```

# java - 上传成功后在服务器端运行小程序

> ID：15709709
> 
> 赞同：0
> 
> 时间：2013-03-29T18:58:28.640
> 
> 标签：java, applet, server-side, post-processing

我正在制作一个上传音频文件的上传器现在我想做以下事情：

*   将文件上传到服务器后，Applet 应在服务器端启动
*   上传内容的名称和其他详细信息应传递给 Applet

*   Applet 将处理音频上的某些内容，然后将结果传递给 DB（或 Servlet）

我的问题是如何在服务器端实现这种 Applet-Servlet 通信。

它与某些允许用户上传图像然后他们处理某些内容（即添加水印、调整提取细节等）然后给出结果的站点类似。＆我正在尝试同样的事情，但在我创建的 Applet 和 JSP-Servlet 的帮助下使用音频。提前致谢。

# c++ - C ++正则表达式在字符串中搜索文件路径

> ID：15709711
> 
> 赞同：0
> 
> 时间：2013-03-29T18:58:32.830
> 
> 标签：c++, regex

我正在尝试解析可以包含文件路径的字符串。我正在使用带有正则表达式库的 C++。我对正则表达式不是很好，这里是 ECMAScript。

我不知道为什么字符串：

> "C:\Windows\explorer.exe C:\titi\toto.exe"

不匹配模式（实际上它只找到第一个）

> (?:[a-zA-Z]\:|\\)(?:\\[a-z_\-\s0-9]+)+

你有更好的主意来找到每场比赛吗？谢谢！

这是我的代码：

```
wsmatch matches;
regex_constants::match_flag_type fl = regex_constants::match_default ;  
regex_constants::syntax_option_type st = regex_constants::icase             //Case insensitive
                                        | regex_constants::ECMAScript
                                        | regex_constants::optimize;

wregex pattern(L"(?:[a-zA-Z]\\:|\\\\)(?:\\\\[a-z_\\-\\s0-9]+)+", st);

// Look if matches pattern
printf("--> %ws\n", path.c_str());
if (regex_search(path, matches, pattern, fl) 
&& matches.size() > 0)
{
    for (u_int i =  0 ; i < matches.size() ; i++)
    {
        wssub_match sub_match = matches[i];
        wstring sub_match_str = sub_match.str();

        printf("%ws\n", sub_match_str.c_str());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:59:00.023

You could use something like this:

```
.?:(\\[a-zA-Z 0-9]*)*.[a-zA-Z]* 
```

I tested it with [http://regexpal.com/](http://regexpal.com/) and it extracts all file paths.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T14:26:33.147

虽然@mspoerr 提供的正则表达式满足了示例问题，但在更复杂的场景中它对我来说并不是很好，因此我曾经编写自己的。

**正则表达式：**

```
(\w:)?([\\\w\s0-9_]*)\.\w+ 
```

**高级测试字符串：**

```
C:\Wi ndows\explorer.exe asdasds
 : ad  C:\titi\toto.Heexe
HELLOO : qwefqwfqwf c:\aa. 
```

（它只匹配两个有效的文件路径）

# sql - What is best way to get last indexof character in SQL 2008

> ID：15709712
> 
> 赞同：43
> 
> 时间：2013-03-29T18:58:36.973
> 
> 标签：sql, string, sql-server-2008

In C#, we have `String.LastIndexOf` method to get a last index of a particular character location for given string. Is there any similar function to do same in SQL Server. I tried using `CHARINDEX` but couldn't able to achieve it.

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-29T19:00:44.223

A little tricky, but you could do something like:

```
REVERSE(SUBSTRING(REVERSE([field]),0,CHARINDEX('[char]',REVERSE([field])))) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-29T19:01:00.653

```
DECLARE @x VARCHAR(32) = 'xyzxyzyyythgetdghydgsh';
SELECT LEN(@x) - CHARINDEX('y', REVERSE(@x)) + 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:16:06.733

Try this one out, analyze result step by step.

```
 declare @string varchar(max)
declare @subString varchar(max)
set @string = 'this is a duplicated question,      but may get some new answers, since tech chagne from time to time as we know';
set @subString = 'this is a duplicated question,      but may get some new answers, since tech chagne from time to time'
--Find the string.lastIndexof(time)
select LEN(@String)
select LEN(@SubString)
select CHARINDEX('time', REVERSE(@string))
select reverse(@string)
select reverse('time')
SELECT LEN(@string) - CHARINDEX(reverse('time'), REVERSE(@string)) - Len('time') + 1 
```

# node.js - 可以做一个通用的 Backbone.js 获取来填充多个集合吗？[Backbone.js/Express]

> ID：15709713
> 
> 赞同：0
> 
> 时间：2013-03-29T18:58:40.540
> 
> 标签：node.js, backbone.js, express

我有一个使用多个集合（6 个左右）的页面，当页面被路由到时，每个集合都需要从服务器获取数据。显然，有很多连接需要发生，这可能会使这个页面变慢。我想知道当我路由到此页面时是否可以进行一般提取。这样我可以一次检索所有数据，将其作为一个大的 json 块发送，并同时将数据分配给每个集合。这只需要一个连接。我环顾四周，并没有看到 Backbone 的这种技术。

这是正确的想法吗？我在服务器端使用 Express/Node。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:41:24.967

我无法评论这是否好，但我做过类似的事情。我只是使用 jQuery 向我的端点发出了一个 AJAX 请求，该端点为一个大型 JSON 对象中的所有集合提供数据，类似于：

```
{
    "Collection1": [...],
    "Collection2": [...],
    ....
    "CollectionN": [...]
} 
```

当我从服务器获得响应时（在成功回调中），我获取每个集合的数据并只使用 collection.add() 函数。这与 Backbone 在 fetch 中所做的基本相同（发出请求，并将返回的值传递给 add）。当数组传递给 collection.add() 函数时，数组中的每个对象都用于创建模型。

# math - 64 位算术，16 位字长（跨 4 个字存储 64 位数字）

> ID：15709714
> 
> 赞同：1
> 
> 时间：2013-03-29T18:58:43.617
> 
> 标签：math, assembly

我目前正在为 16 位定制微处理器编写软件。我需要能够处理大于 16 位的数字。指令集非常有限，但有左移、右移、AND、OR 和 NOT。我将如何实现这种类型的算术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:31:22.920

对于加法和减法，您确实将溢出从一个词带到另一个词。对于乘法，[http](http://en.wikipedia.org/wiki/Binary_multiplier) ://en.wikipedia.org/wiki/Binary_multiplier中描述的技术相当容易实现，并且比串行加法更好。除法通常更复杂，但一个很好的起点是[http://en.wikipedia.org/wiki/Division_algorithm#Integer_division_.28unsigned.29_with_remainder](http://en.wikipedia.org/wiki/Division_algorithm#Integer_division_.28unsigned.29_with_remainder)。

该除法算法实际上只是一个整数“长除法”。不是特别快，但很准确。这篇文章有更多涉及的方法，但它们……嗯，涉及更多。可能先做一个简单的，然后看看你是否需要优化它。

另请查看[http://en.wikipedia.org/wiki/Multiplication_algorithm](http://en.wikipedia.org/wiki/Multiplication_algorithm)。[http://x86asm.net/articles/working-with-big-numbers-using-x86-instructions/](http://x86asm.net/articles/working-with-big-numbers-using-x86-instructions/)有一些关于 x86 处理器上的多字算术的很好的信息，其中大部分应该适用于其他 CPU。

我已经很久没有玩过这些东西了。在 Z80 上完成了 32 位算术（很多很多年前），我知道你在这里遇到了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-12T13:42:04.470

如果有人想要代码来执行此操作，我现在正在编写它。截至上周，我有 64 位乘法运算，所以现在我正在研究 64 位除法运算。该代码将在[https://github.com/drtonyr](https://github.com/drtonyr)上或给我发送电子邮件。联系我是最好的方法，因为下面的代码是非标准的（我打算编写/构建所有东西，包括焊接晶体管），但如果它有帮助，那么它看起来像这样（在类似 Forth 的语言中）：

```
: 4mul pick(7) pick(4)        # grab the sign words
  xor mvDC                    # compute final sign and put on call stack
  4abs 4swap 4abs 4maxmin     # abs swap so that second is smallest
  callocC(4)                  # zero space on call stack for result
  allocC(4)                   # space for smallest multiplier
  storeC(1) storeC(2) storeC(3) storeC(4) # smallest to C in reverse order
  C add(8) D sub(2)              # set up pointers for main _4mul_word calcs
  mvCD _4mul_word _4mul_word_asl # mul X0
  mvCD _4mul_word _4mul_word_asl # mul X1
  mvCD _4mul_word _4mul_word_asl # mul X2
  mvCD _4mul_word                # mul X3
  ndrop(7)                    # don't need X3, pointers or shift space anymore
  4mvCD                       # move result to data stack
  mvCD <0 if? 4negate         # set correct sign
  ;                           # and exit happy 
```

其中大部分是数据移动，但想法是得到一个 64 位的结果和最大的数字，每个周期向上移动一个，然后挑选最小数字的位，如果该位被设置，则添加到累加器中，这是通过 _4mul_word 实现的（_4mul_word_asl 只是在最高位为零时完成移位）。有一天我会进一步优化，因为最小的数字可能在顶部有很多零，一旦你处理了最小数字的最高位，整个事情就会停止。_4mul_word 在下面，但这里的主要内容是（a）你可以做到，（b）它需要做很多工作并且运行缓慢。

```
_4mul_word:  # top of stack contains the top address of accumulator (D),
             # the top address of partial shifted input (A) and
             # the word to multiply (B).
             # This runs over all non-zero bits.
  *C = E, C -= I  # store E
  *C = D, C -= I  # store D - we will leave stack state unchanged

  B = *D, D -= I  # pop the main word we are going to work with
  A = *D, D -= I  # Address of partially shifted
  D = *D, D -= Z  # Address of accumulator

  _4mul_word_loop:
    Z = B & I         # test a single bit
    eq0 P = *P, P += I  # skip if bit is zero
    :_4mul_word_bitzero
      *C = A, C -= I  # store A as we are going to change it
      *C = D, C -= I  # store D as we are going to change it
      *C = B, C -= Z  # store B as we are going to change it

                      ## add in the shifted value (A) to accumulator (D)
      B = *D, D -= Z  # read X0
      E = *A, A -= I  # read Y0
      B = B + E       # compute Z0
      *D = B, D -= I  # and store it
      B = *D, D -= Z  # read X1
      E = *A, A -= I  # read Y1
      cin B = B + E   # compute Z1
      *D = B, D -= I  # and store it
      B = *D, D -= Z  # read X2
      E = *A, A -= I  # read Y2
      cin B = B + E   # compute Z2
      *D = B, D -= I  # and store it
      *D = B, D -= I  # and store it
      B = *D, D -= Z  # read X3
      E = *A, A -= I  # read Y3
      cin B = B + E   # compute Z3
      *D = B, D -= I  # and store it

      B = *C, C += I  # restore B
      D = *C, C += I  # restore D
      A = *C, C += Z  # restore A
    _4mul_word_bitzero:

                    ## shift up the contents of A
    *C = A, C -= Z  # store A as we are going to change it
    E = *A, A -= Z  # read X0
    E = E + E       # compute Z0
    *A = E, A -= I  # and store it
    E = *A, A -= Z  # read X1
    cin E = E + E   # compute Z1
    *A = E, A -= I  # and store it
    E = *A, A -= Z  # read X2
    cin E = E + E   # compute Z2
    *A = E, A -= I  # and store it
    E = *A, A -= Z  # read X3
    cin E = E + E   # compute Z3
    *A = E, A -= I  # and store it
    A = *C, C += Z  # restore A

    B = B >> I      # shift down B
    ne0 P = *P, P += I  # loop if we haven't yet shifted down B to zero
    :_4mul_word_loop

  C = C + I
  D = *C, C += I  # restore D
  E = *C, C += Z  # restore E
  P = *E, E += I  # execute the NEXT code 
```

# c# - 将文件上传到Windows窗体中的特定文件夹并将文件名上传到sql server

> ID：15709721
> 
> 赞同：0
> 
> 时间：2013-03-29T18:59:02.920
> 
> 标签：c#, windows, winforms

我有一个 Windows 窗体应用程序，它是用 C# 编写的。我还在使用带有 datagridview 的 sql 服务器。我的程序中有一个添加表单，允许用户将数据输入到上传到我的服务器的多个文本框中。我已经完成了这部分，它工作得很好。

我有一个名为“resumelinkTextBox”的文本框。我还有一个浏览按钮，可以打开一个“打开文件对话框”。我希望能够从打开的文件对话框浏览器中选择一个文件，然后将路径输入到“resumelinkTextBox”中。当我点击“添加简历”时，我希望它将文件上传到我网络上的指定文件夹。另外，我需要它来更新我的 sql server 中的“resumelink”列，但只有文件名。因此，如果我的文件位于“C:\Users\newresume.doc”，我需要将其上传到“C:\Users\NewResumes”，然后在我的“resumelink”列中只有文件名“newresume.doc” sql服务器。

任何示例或示例链接将不胜感激。

下面是我的插入命令，它将文本框中的信息上传到我的 sql 服务器。

```
insertCommand.CommandText = "SET IDENTITY_INSERT HRResume ON; INSERT INTO HRresume (name, skillset, recordkey, date, comment, referral, resumelink) VALUES (@name, @skillset, @recordkey, @date, @comment, @referral, @resumelink); SET IDENTITY_INSERT HRResume OFF";
insertCommand.Parameters.AddWithValue("@name", nameTextBox.Text);
insertCommand.Parameters.AddWithValue("@skillset", skillsetTextBox.Text);
insertCommand.Parameters.AddWithValue("@recordkey", recordkeyTextBox.Text);
insertCommand.Parameters.AddWithValue("@date", dateTextBox.Text);
insertCommand.Parameters.AddWithValue("@comment", commentTextBox.Text);
insertCommand.Parameters.AddWithValue("@referral", referralTextBox.Text);
insertCommand.Parameters.AddWithValue("@resumelink", resumelinkTextBox.Text);
insertCommand.Connection.Open();
insertCommand.ExecuteNonQuery();
MessageBox.Show("Resume Added.");
connection.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:03:35.023

这是一个普遍的问题。使用`File.OpenRead()`和

[http://msdn.microsoft.com/en-us/library/sfezx97z.aspx](http://msdn.microsoft.com/en-us/library/sfezx97z.aspx)

[http://msdn.microsoft.com/en-us/library/system.io.file.openread.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.openread.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)

然后解析文件路径并获取其名称并像以前一样执行 sql insert 。

# javascript - 为什么使用 popcorn.js 无法在 Chrome 中运行 html5 视频？

> ID：15709722
> 
> 赞同：0
> 
> 时间：2013-03-29T18:59:03.920
> 
> 标签：javascript, html, html5-video, popcornjs

在添加 popcorn.js 之前，该视频在 Firefox 和 Chrome 上运行良好。现在我添加 popcorn.js 用于字幕目的，它适用于 Firefox，但不适用于 Chrome（视频为空白，带有不可点击的视频控件）。我已经有 HTML 格式的备用视频源，

```
<video id="video" width="620" height="420" controls="true" preload="none">
    <source src="caption.ogg" type='video/ogg; codecs="theora, vorbis"' />
    <source src="caption.webm" type='video/webm; codecs="vp8.0, vorbis"' /> 
    <source src="caption.mp4" type='video/mp4; codecs="avc1.4D401E, mp4a.40.2, H.264"' />
    Your browser does not support HTML5 video
</video> 
```

有人告诉我它有什么问题吗？我怀疑 popcorn.js 只能在 Firefox 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T11:45:32.880

> ### popcorn.js 仅适用于 Firefox？

### 错误的

Popcorn.js 在 Chrome 上运行良好。
请验证以下内容：

1.  您使用的是最新版本的 Chrome。
2.  您使用的计算机是健康的（没有病毒，没有垃圾等......）
3.  要么发布你写的 JS，要么逐行检查它，检查是否有任何错误。
4.  （实际上应该是 1）您检查 chrome 开发工具控制台是否有任何错误？

# php - PHP Regex throwing error messages

> ID：15709729
> 
> 赞同：1
> 
> 时间：2013-03-29T18:59:49.060
> 
> 标签：php, regex, preg-replace, expression

I have looked at the documentation that PHP provides on [PCRE Patterns](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php). I am using a third party plugin to handle some text from the user, and the following preg_replace is failing because of missing terminating ] char. (preg_replace(): Compilation failed: missing terminating ] for character class

```
$input  = preg_replace('/[\]/i','',$userInput); 
```

From what I can see the terminating delimiter is / with a character class that only has a \ in it. The i, if I can read correctly tells the expression to not care about upper or lower case. I see both opening [ and closing ].

Why is it throwing the error? What is the preg_replace trying to do?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:02:05.520

You need to escape the `\` otherwise it escapes the `]` (and you need to escape it twice, once for the PHP string and once for PCRE).

```
$input  = preg_replace('/[\\\]/i','',$userInput); 
```

And you can omit the `[` and `]` altogether (as well as the `i`).

```
$input  = preg_replace('/\\\/','',$userInput); 
```

Or, you can just use `str_replace`:

```
$input  = str_replace('\\','',$userInput); 
```

# hibernate - 如何使用休眠从grails中的子实体获取父实体

> ID：15709730
> 
> 赞同：0
> 
> 时间：2013-03-29T18:59:50.090
> 
> 标签：hibernate, grails

我有以下问题。在 grails 中，假设我有以下关系：

```
class Shop {
    static hasMany = [category: Category]
    String name;
    .... (additional shop attributes)
}

class Category {
    static belongsTo = [Shop]
    static hasMany = [item: Item]
    String name;
    ... (additional category attributes)
}

class Item {
    static belongsTo = [Category]
    String name;
    double price;
    ... (additional item attributes)
} 
```

A`Shop`有许多不同类型的类别，例如`Diary`,`Household`等。每个类别可以有多个项目，例如`Milk`,`Cheese`等。

它们都是单向关系。

我正在使用休眠事件侦听器来捕获插入/更新/删除后发生的更改。如果我只对每个级别发生的事情感兴趣，那就太好了。例如，如果一个项目的价格发生了变化，从休眠事件，我可以到达项目实体，我会知道价格字段随着项目 id xxx 的变化而变化。

但是，我想将更改关联回`Shop`级别，以便进行一些有意义的审计跟踪。如果我只更改特定商品的价格，我将在商品级别使用休眠中的 postupdateevent 来获取实体。有没有办法递归地回到这个`Shop`级别，这样我就可以生成一个审计跟踪`(shopId).category(categoryId).price`？这样，我会知道，对于价格的特定变化，它是 for which`Category`和 for which `Shop`。

grail 元类或休眠实用程序类是否提供了一种从最底层子级到最顶层父级遍历对象树的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:48:51.747

如果您没有双向链接，那么您将不得不“从顶部搜索”，可能使用标准

```
def shops = Shop.withCriteria {
  category {
    item {
      idEq(currentItem.id)
    }
  }
} 
```

这将为您提供一个包含包含`currentItem`.

# java - 如何解析一个应该包含数组的空值 JSON

> ID：15709733
> 
> 赞同：0
> 
> 时间：2013-03-29T19:00:00.717
> 
> 标签：java, android, json, gson

我应该收到`JSON`这样的

```
{
    "browse": [
        {
            "title": "Program Translations"
        }
    ],
    "errorno": "fe_200",
    "message": "Your browse history"
} 
```

但由于没有浏览信息，我得到它这样..

```
{"errorno":"fe_3946","message":"No browse history found.","browse":"NULL"} 
```

这是完全正常的。

我写过这样的java类..

```
class BrowseHistoryJson {

      public BrowseHistoryJson() {}

      private String errorno;
      private String message;
      private List<Browse> browse;
      // other attributes

      public String getErrorNo() {
        return errorno;
      }
      public String getMessage() {
            return message;
          }
      public List<Browse> getResults() { return browse; }
      public void setErrorNo(String errorno) {
            this.errorno = errorno;
          }
      public void setMessage(String message) {
        this.message = message;
      }

      public void setResults(List<Browse> browse) { this.browse = browse; }
      public String toString() { return "Results[" + browse + "]";}

      static class Browse {
            private String title;

            public String getTitle() {
                return title;
            }

            public void setTitle(String title) {
                this.title = title;
            }

            public String toString() { return "Result[title:" + title +"]"; }
        }

    } 
```

现在当我执行语句时

BrowseHistoryJson 结果 = new Gson().fromJson(reader, BrowseHistoryJson.class);

我得到了例外

```
com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was STRING at line 1 column 74   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
at com.google.gson.Gson.fromJson(Gson.java:795)
at com.google.gson.Gson.fromJson(Gson.java:734) 
```

当我在数组中获取数据时，它工作得很好`browse`。

如何添加`null`处理，例如预先声明该值可能为空的某种方式？

我检查了 JSON 笔记并在互联网上搜索，但没有什么真正有用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:02:54.187

您需要使用 GsonBuilder 对象来创建您的 Gson 对象。

```
Gson gson = new GsonBuilder().serializeNulls().create();//handle null 
```

当您这样做时，gson 将适当地处理空值。

# highcharts - 当 highcharts-container 溢出可见时，Windows 8 上 IE10 中的空白

> ID：15709746
> 
> 赞同：0
> 
> 时间：2013-03-29T19:00:56.803
> 
> 标签：highcharts

我正在使用该线程末尾指定的技术：[Highcharts 工具提示溢出被隐藏](https://stackoverflow.com/questions/10734746/highcharts-tooltip-overflow-is-hidden/10975843#10975843)以允许工具提示在 highcharts 容器之外流动。

一切都很好，除非在 Windows 8 上的 IE10 中查看。

设置时，图表下方会显示大量空白`.highcharts-container {overflow : visible}`。

这是问题的演示：http: [//jsfiddle.net/Bp4zG/6/](http://jsfiddle.net/Bp4zG/6/)

您需要在 Windows 8 上查看 IE10 中的演示才能看到它。

是否有另一种方法可以在容器外流动工具提示？还是一种消除神秘空白的方法？

这对我的应用程序来说是一个问题，因为它显示在一个非常宽的页面中，带有一个水平滚动条，这反过来又与我拥有的一些 scrollTo js 函数混淆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:57:45.450

设法通过将所有内容包装在 div 中来修复它`overflow: hidden`

**html**

```
<div class="wrapper">
 <div id="container" style="height: 300; width:100%"></div>
</div> 
```

**CSS**

```
.highcharts-container {overflow: visible !important; } 
.wrapper {overflow: hidden;} /* the fix! */ 
```

请参阅此处修复：http: [//jsfiddle.net/Bp4zG/8/](http://jsfiddle.net/Bp4zG/8/)

# ics-openvpn - Android ics-Openvpn

> ID：15709747
> 
> 赞同：1
> 
> 时间：2013-03-29T19:01:00.227
> 
> 标签：ics-openvpn

我正在构建开源项目[https://code.google.com/p/ics-openvpn/](https://code.google.com/p/ics-openvpn/)

自述文件说：“禁用 Google 断码（jni/Android.mk 中的 WITH_BREAKPAD=0）”

我该如何执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T10:48:54.427

GO jni 文件夹 打开 Android.mk 并搜索 WITH_BREAKPAD .. 当你找到它时 .. 就像 WITH_BREAKPAD=1 使它 WITH_BREAKPAD=1 因此解决

# autocomplete - sublime text 2 插件，用于输入具有特定格式的自动许可注释行

> ID：15709753
> 
> 赞同：1
> 
> 时间：2013-03-29T19:01:16.067
> 
> 标签：autocomplete, sublimetext2, text-editor, code-snippets, tab-completion

我正在尝试在 Sublime Text 2 中设置一个片段，该片段将扩展到以下内容：

```
/**
* @version   $Id: ${1:current_file_name.extension} ${2:random_4_digit_number} ${3:YYYY-MM-DD} ${4:time_in_UTC_24} ${5:current_logged-in_user} $
* @author    Company http://example.com
* @copyright Copyright (C) 2007 - ${6:current_year} Company
* @license   http://www.gnu.org/licenses/gpl-2.0.html GNU/GPLv2 only
*/ 
```

上面的代码片段有光标停止。如果所有数据都可以自动化，那么我不需要任何光标停止。

站点地图如下：

**${1:current_file_name.extension}**

*自动粘贴正在编辑的当前文件的名称。*

**${2:random_4_digit_number}**

*从 0000 到 9999 随机生成的数字*

**${3:YYYY-MM-DD}**

*使用`-`分隔符的当前日期。*

**${4:time_in_UTC_24}**

*UTC 24 小时格式的当前时间，包括使用`:`分隔符的秒数。*

**${5:current_logged-in_user}**

*当前登录的用户*

**${6:current_year}**

*本年度*

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:37:26.090

使用片段可能不可能，但是我编写了一个插件来完成您想要的。在 Sublime 中，单击*Tools > New Plugin*。将示例代码替换为以下内容。将其命名为“add_license_stamp.py”并将其保存在您的*Packages*文件夹中（而不是*Packages/User*中）。此外，在您的键映射文件中添加键绑定。要运行该命令，请将光标放在您想要的位置并按下键绑定：

## 键绑定：

```
{ "keys": ["ctrl+shift+9"], "command": "add_license_stamp" } 
```

## 插入：

```
import sublime, sublime_plugin
import os
import datetime
import random
import getpass

''' Add license stamp
/**
* @version   $Id: ${1:current_file_name.extension} ${2:random_4_digit_number} ${3:YYYY-MM-DD} ${4:time_in_UTC_24} ${5:current_logged-in_user} $
* @author    Company http://example.com
* @copyright Copyright (C) 2007 - ${6:current_year} Company
* @license   http://www.gnu.org/licenses/gpl-2.0.html GNU/GPLv2 only
*/
'''

class AddLicenseStampCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        company_name = "BobCo"
        company_site = "http://bobco.com"

        file_path = self.view.file_name()
        file_name = os.path.basename(file_path)
        year = datetime.datetime.utcnow().strftime("%Y")
        date_time = datetime.datetime.utcnow().strftime("%Y-%m-%d %H:%M:%S UTC")
        random_number = str(random.randrange(0000, 9999)).zfill(4)
        user = getpass.getuser()

        license = "/**\n"
        license += "* @version   $Id: " + file_name + " " + random_number + " " + date_time + " " + user + " $\n"
        license += "* @author    " + company_name + " " + company_site + "\n"
        license += "* @copyright Copyright (C) 2007 - " + year + " " + company_name + "\n"
        license += "* @license   http://www.gnu.org/licenses/gpl-2.0.html GNU/GPLv2 only\n"
        license += "*/\n"

        self.view.replace(edit, self.view.sel()[0], license) 
```

（注意：python 要求代码后有一个空行）

Replace "BobCo" with your company name. I'm not sure of the best way to get the current user name, I used this question: [Is there a portable way to get the current username in Python?](https://stackoverflow.com/questions/842059/is-there-a-portable-way-to-get-the-current-username-in-python) . They say it is compatible with the major OSes. If not do something similar to how I did the company name. And manually set it per user. Also, I don't know what UTC 24-hour format is. But I just used the time in 24 hour format.

*Edit*

I changed now() to utcnow() to get the utc date/time. I added date/time formatting. I added zfill(4) to the random number to pad it with zeros if under 4 digits. You can highlight the current stamp and hit the key binding to update it. You could also get fancy and automatically replace on save, but beyond the current scope. You would have to use a regex to find the current stamp. Then activate the script upon save instead of run.

# silverlight - MVVM 数据绑定到新对象实例

> ID：15709755
> 
> 赞同：0
> 
> 时间：2013-03-29T19:01:29.827
> 
> 标签：silverlight, windows-phone, mvvm-light

我在 Windows Phone 中使用 MVVMlight。模型通过定位器通过 xaml 绑定。视图模型从 webrequest 加载模型的新实例，然后分配它。我不确定为什么视图没有被更新，是因为它分配了一个新实例吗？如果我更新模型的属性而不是分配新实例，它会在视图上更新。

分配模型的新实例时如何更新视图？

查看型号：

```
public class MyViewModel : ViewModelBase
{
    public MyModel Model { get; set; }

    public MyViewModel ()
    {
        if (IsInDesignMode)
        {
        }
        else
        {
            //async call
            api.GetModel(response =>
                                 Deployment.Current.Dispatcher.BeginInvoke
                                     (() =>
                                          {
                                              //this works.
                                              //Model.Property1 = "Some Text";
                                              //this doesn't work
                                              Model = response.Data;

                                          }
                                     ));
        }
    }
} 
```

查看.xaml

```
<UserControl x:Class="Grik.WindowsPhone.CardDetailsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    DataContext="{Binding MyModel, Source={StaticResource Locator}}" >

    <Grid x:Name="LayoutRoot" >
        <TextBlock Text="{Binding Model.Property1}" />

    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:48:00.070

ViewModel 没有实现`INotifyPropertyChanged`接口。`MyModel`以及它的所有属性也需要使用属性更改事件。

你展示你`Model.Property1`在xaml中使用，`Model.Property1`还需要引发property changed事件。

```
public class MyModel : INotifyPropertyChanged
{
    private string _Property1 = "";

     public string Property1
    {
        get { return this._Property1; }

        set
        {
            if (value != this._Property1)
            {
                this._Property1 = value;
                NotifyPropertyChanged();
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:17:17.503

我想在 View Model Locator 类中查看您的代码

在 MyViewModel 类中，您可能需要重写此属性

```
public MyModel Model { get; set; } 
```

到

```
private MyModel _model; 
public MyModel Model { 
get{return this._model;}
set{
    this._model = value;
    this.NotifyPropertyChanged("Model");
}
} 
```

# asp.net-mvc - HttpPost 上的 ASP.NET MVC DropDownList 值

> ID：15709756
> 
> 赞同：1
> 
> 时间：2013-03-29T19:01:31.263
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, viewmodel, html.dropdownlistfor

我正在关注[ASP.NET MVC 上的本教程](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc)，特别是其中指出将 String of 提供`"MovieType"`给 Razor 视图如下：`@Html.DropDownList("MovieType")`将提供**DropDownList**`ViewBag`的密钥以在of 类型中查找属性`IEnumerable<SelectListItem>`。

这工作得很好。

但是，我无法使用`[HttpPost]`属性获取用户在我的方法上选择的值。

这是我的代码以及迄今为止我尝试过的代码。

**控制器**

```
public class ProductController : Controller 
{
    private readonly ProductRepository repository = new ProductRepository();

    // Get: /Product/Create
    public ActionResult Create()
    {
        var categories = repository.FindAllCategories(false);
        var categorySelectListItems = from cat in categories
                                      select new SelectListItem()
                                          {
                                              Text = cat.CategoryName,
                                              Value = cat.Id.ToString()
                                          };
        ViewBag.ListItems = categorySelectListItems;
        return View();
    }

    [HttpPost]
    public ActionResult Create(Product product)
    {
        /** The following line is not getting back the selected Category ID **/
        var selectedCategoryId = ViewBag.ListItems;
        repository.SaveProduct(product);
        return RedirectToAction("Index");
    }
} 
```

**剃须刀 cshtml 查看**

```
@model Store.Models.Product

<h2>Create a new Product</h2>

@using (@Html.BeginForm())
{
    <p>Product Name:</p>
    @Html.TextBoxFor(m => m.ProductName)

    <p>Price</p>
    @Html.TextBoxFor(m => m.Price)

    <p>Quantity</p>
    @Html.TextBoxFor(m => m.Quantity)

    <p>Category</p>
    @Html.DropDownList("ListItems")
    <p><input type="submit" value="Create New Product"/></p>
} 
```

我尝试使用 的重载`DropDownList`，但我无法取回用户选择的值。

如果有人看到我所缺少的或有任何想法或建议，我将不胜感激。谢谢！

**更新**

发布`Product`模型。请注意，这是在我创建 .edmx 时由实体框架自动生成的。

```
namespace Store.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Product
    {
        public long Id { get; set; }
        public string ProductName { get; set; }
        public decimal Price { get; set; }
        public int Quantity { get; set; }
        public System.DateTime DateAdded { get; set; }
        public Nullable<long> CategoryId { get; set; }

        public virtual Category Category { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:08:08.443

您正在将类型模型传递`Store.Models.Product`到您的视图中。其他字段使用 lambda 表达式绑定到此模型，但`@Html.DropDownList()`不绑定到模型，因此当模型在 HTTPPost 中返回时，选择不存在。

您需要将`Category`字段添加`Store.Models.Product`到该列表，然后使用以下方法绑定到该列表：

```
@Html.DropDownListFor(m => m.Category, ViewBag.ListItems) 
```

然后 MVC 应该正确地将您的输入控件绑定到模型。

例如，此语法确实有效：

```
int[] listItems = {1, 2, 3, 4};
SelectList selectList = new SelectList(listItems);
@Html.DropDownListFor(m => m.CategoryId, selectList); 
```

请注意，[`SelectList`](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist%28v=vs.108%29.aspx)继承自[`MultiSelectList`](http://msdn.microsoft.com/en-us/library/system.web.mvc.multiselectlist%28v=vs.108%29.aspx)which implements `IEnumerable<SelectListItem>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:14:59.280

遵循 Peter G. 在他的回答中提到的内容，但仅供参考，您还应该能够将您的 Post 控制器更改为：

```
[HttpPost]
public ActionResult Create(Product product, int ListItems)
{

} 
```

正如彼得所提到的（再次使用他的答案），问题是当您的表单发布时，您的下拉列表的名称为“ListItems”，并且您的控制器上没有任何东西可以绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:29:07.343

我最终做了以下事情：

**控制器**

```
...
    [HttpPost]
    public ActionResult Create(Product product)
    {
        var categoryId = product.CategoryId;
        repository.SaveProduct(product);
        return RedirectToAction("Index");
    }
... 
```

**剃须刀 cshtml 查看**

```
...
<p>Category</p>
@Html.DropDownList("CategoryId", (IEnumerable<SelectListItem>) ViewData["ListItems"])
... 
```

它看起来很丑，老实说，我不完全理解为什么我不能像 Peter 建议的那样使用 lambda 表达式，`@Html.DropDownListFor(m => m.CategoryId, ViewBag.ListItems)`.

对我来说，我已经“让它工作”，但想了解为什么，如果有更优雅的方式我可以做到。

当我输入 时`@Html.DropDownListFor(m => m.CategoryId, ViewBag.ListItems)`，IntelliSense 会自动填充`m.CategoryId`，但随后会将其标记为红色，并且会出现运行时错误。

# c# - 使用 WinForms 启用 .cs 文件的可视化编辑

> ID：15709759
> 
> 赞同：-1
> 
> 时间：2013-03-29T19:01:40.000
> 
> 标签：c#, winforms, visual-studio-2010

我们目前严格使用 Visual Studio 2010 中的文本编辑器管理和编辑所有基于 c# winform 的界面。

无论如何，我们是否可以获取我们的源文件并让我们可以使用可视化 Winform 编辑器来编辑它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:10:26.957

If you give your .cs files a designer.cs and a .resx file, Visual Studio will allow you to open them up in the visual editor. The catch is that you will have to create a `partial class` of your original .cs object and move the code for the visual elements into the Designer.cs file. So if you have a file

```
SomeClass.cs 
```

you will need to add

```
SomeClass.cs
    SomeClass.designer.cs
    SomeClass.resx 
```

Once you add them, visual studio will automatically figure out they are supposed to be related and allkow you to open them in the visual editor.

# google-apps-script - Google 电子表格中的 Google Analytics（分析）数据

> ID：15709765
> 
> 赞同：0
> 
> 时间：2013-03-29T19:01:59.193
> 
> 标签：google-apps-script, google-sheets, google-analytics

我能够获取代码示例以将数据从 Google Analytics 提取到 Google 电子表格（[https://developers.google.com/analytics/solutions/articles/reporting-apps-script](https://developers.google.com/analytics/solutions/articles/reporting-apps-script)）但是，我知道我想要的配置文件，我不需要通过获取“第一个配置文件”的开销。当我尝试对这样的 ID 进行硬编码时，它无法正常工作：

```
function getReportDataForProfile() {

  var profileId = '12345678';
  var tableId = 'ga:12345678';
  var startDate = getLastNdays(14);   // 2 weeks (a fortnight) ago.
  var endDate = getLastNdays(0);      // Today.

  var optArgs = {
    'dimensions': 'ga:keyword',              // Comma separated list of dimensions.
    'sort': '-ga:visits,ga:keyword',         // Sort by visits descending, then keyword.
    'segment': 'dynamic::ga:isMobile==Yes',  // Process only mobile traffic.
    'filters': 'ga:source==google',          // Display only google traffic.
    'start-index': '1',
    'max-results': '250'                     // Display the first 250 results.
  };

  // Make a request to the API.
  var results = Analytics.Data.Ga.get(
      tableId,                  // Table id (format ga:xxxxxx).
      startDate,                // Start-date (format yyyy-MM-dd).
      endDate,                  // End-date (format yyyy-MM-dd).
      'ga:visits,ga:pageviews', // Comma seperated list of metrics.
      optArgs);

  if (results.getRows()) {
    return results;

  } else {
    throw new Error('No profiles found');
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T16:18:55.587

配置文件 ID 必须以 ga: 为前缀。

所以在你的情况下：

```
var profileId = '12345678'; should be:

var profileId = 'ga:12345678'; 
```

[https://developers.google.com/analytics/devguides/reporting/core/v3/reference#ids](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#ids)

# c# - 单一来源生产者到并行工作的多个消费者

> ID：15709769
> 
> 赞同：0
> 
> 时间：2013-03-29T19:02:16.440
> 
> 标签：c#, task-parallel-library

我想要一种队列，其中单个源在其中输入数据，另一方面，消费者将等待，当他们检测到队列不为空时将开始执行数据，直到它们停止。但重要的是，如果队列被清空，他们仍将继续观察队列，以便如果有更多数据弹出，他们将能够使用它。我发现了[多个消费者和多个生产者](http://programmerfindings.blogspot.com/2012/07/producer-consumer-problem-using-tpl-and.html)，因为消费者嵌套在生产者中，在我的情况下我不能这样做，因为我将有一个单一的来源和消费者承诺到队列中，直到我停止它们。因此不是串联，但消费者和生产者都是并行执行的。

将通过以下方式并行执行消费者和生产者

```
Parallel.Invoke(() => producer(), () => consumers()); 
```

这样的问题是我将如何执行有时并行为空的队列的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:57:29.437

您可以使用[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx).

您可以将其中一个用作队列，并将对它的引用传递给`producer()`和每个`consumers()`.

您[`GetConsumingEnumerable()`](http://msdn.microsoft.com/en-us/library/dd287186.aspx)将从每个消费者线程调用，并将其与`foreach`.

生产者线程会将项目添加到集合中，并[`CompleteAdding()`](http://msdn.microsoft.com/en-us/library/dd287086.aspx)在完成生产时调用。这将自动使所有消费者线程退出它们的 foreach 循环。

这是一个基本示例（没有错误处理）。调用`Thread.Sleep()`是为了模拟负载，不应在实际代码中使用。

```
using System;
using System.Collections.Concurrent;
using System.Threading;
using System.Threading.Tasks;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            ThreadPool.SetMinThreads(10, 0); // To help the demo; not needed in real code.
            var plant = new ProcessingPlant();
            plant.Process();
            Console.WriteLine("Work complete.");
        }
    }

    public sealed class ProcessingPlant
    {
        private readonly BlockingCollection<string> _queue = new BlockingCollection<string>();

        public void Process()
        {
            Parallel.Invoke(producer, consumers);
        }

        private void producer()
        {
            for (int i = 0; i < 100; ++i)
            {
                string item = i.ToString();
                Console.WriteLine("Producer is queueing {0}", item);
               _queue.Add(item);  // <- Here's where we add an item to the queue.
                Thread.Sleep(0);
            }

            _queue.CompleteAdding(); // <- Here's where we make all the consumers
        }                            //    exit their foreach loops.

        private void consumers()
        {
            Parallel.Invoke(
                () => consumer(1),
                () => consumer(2),
                () => consumer(3),
                () => consumer(4),
                () => consumer(5)
            );
        }

        private void consumer(int id)
        {
            Console.WriteLine("Consumer {0} is starting.", id);

            foreach (var item in _queue.GetConsumingEnumerable()) // <- Here's where we remove items.
            {
                Console.WriteLine("Consumer {0} read {1}", id, item);
                Thread.Sleep(0);
            }

            Console.WriteLine("Consumer {0} is stopping.", id);
        }
    }
} 
```

（我知道这是使用一个额外的线程来启动消费者，但我这样做是为了避免掩盖真正的观点 - 这是为了演示 BlockingCollection 的使用。）

# ios - 子类化 UIButton (JSON.NET) 时无法反序列化 JSON

> ID：15709776
> 
> 赞同：1
> 
> 时间：2013-03-29T19:02:33.607
> 
> 标签：ios, json, mono, xamarin.ios, json.net

我正在使用 json.net 来解析一些属性。我现在试图将它用于派生自 UIButton 的类：

```
 public class JsonButton : UIButton
{
    public String ItemId = "";

    public JsonButton ()
    {
    }
} 
```

我收到以下错误：

> 无法将 JSON 对象反序列化为“MyApplication.JsonButton”类型。
> 
> 在 Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject (Newtonsoft.Json.JsonReader reader, System.Type objectType, Newtonsoft.Json.Serialization.JsonContract contract, Newtonsoft.Json.Serialization.JsonProperty member, System.Object existingValue) [0x003a4] /Users/xxx/Projects/_MonoTouchLibraries/Newtonsoft.Json-master/Newtonsoft.Json/Serialization/JsonSerializerInternalReader.cs:441

如果我从我自己的类中子类化它，JSON 工作没有问题

```
public class JsonButton : MyOwnClass
{
    public String ItemId = "";

    public JsonButton ()
    {
    }
} 
```

测试 JSON 非常简单（正如上面所说的使用类）：

```
{
"ItemId": "16"
} 
```

有任何想法吗？

# java - 在 Netbeans 中导出 Derby 数据库

> ID：15709779
> 
> 赞同：12
> 
> 时间：2013-03-29T19:02:38.570
> 
> 标签：java, database, netbeans, derby

我有一个带有 derby 数据库的项目。

我希望能够备份或导出数据库，以便我可以将它与项目文件一起提供给我的讲师。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-24T15:56:34.547

默认情况下，数据库驻留在您的主文件夹下`.netbeans-derby`（此文件夹可能隐藏在 Windows 下）。复制这个文件夹是可行的，但是你的讲师必须在他的 IDE 中“注册”这个复制的位置。去做这个：

*   在 下`Services`，打开`Databases`节点。
*   右键单击`Java DB`并选择属性。
*   在该`Database Location`字段中，输入复制文件夹的路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T00:44:31.977

有很多方法可以备份和/或导出 Derby 数据库中的数据：这是文档的链接：http: [//db.apache.org/derby/docs/10.9/adminguide/cadminparttwo.html](http://db.apache.org/derby/docs/10.9/adminguide/cadminparttwo.html)

为了进行备份，您必须在磁盘上找到数据库数据。它将全部位于一个文件夹/目录中；该文件夹/目录使用您的数据库名称命名。因此，如果您的数据库是 jdbc:derby:brydb，请查找名为“brydb”的文件夹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-24T15:47:35.800

晚了，但它可能对其他人有用：

1.  在 Netbeans 中，启动与数据库的连接。
2.  右键单击它并选择“执行命令”
3.  写这个： `CALL SYSCS_UTIL.SYSCS_EXPORT_TABLE (null, 'YOURTABLE', 'PATHTODUMPFILE', null, null, null)`

记得在简单的引号''之间写下你的表名和路径

[http://db.apache.org/derby/docs/10.9/adminguide/radminimport91458.html](http://db.apache.org/derby/docs/10.9/adminguide/radminimport91458.html)中的更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-06T14:56:21.620

对于 2017 年的 NetBeans。

让我建议如何导出 sql 脚本的文件（连接到 db 后）。所以，去

**1.服务->数据库->链接->模式->表->MYDB。**

**2\. 右键单击​​ MYDB 并选择“浏览数据”。然后单击“执行 sql”第一个图标/按钮**

**3\. 在下面的行列表中，右键单击其中任何一个，然后选择“显示创建场景..”有时输出/日志窗口可能会覆盖该列表。在这种情况下，请关闭它。**

**4\. Copypast(cntrl-c,cntrl-v) 指令从弹出窗口到你之前准备好的txt文件**

**5\. 再次单击底部列表的任何行。通过 cntrl-a 键的组合选择所有这些。右键单击并选择“为 INSERT 显示场景..”**

**6.从弹出窗口复制指令并将它们粘贴/添加到上述txt文件中**

您已完成 sql 脚本文件。

# html - 共享链接时网站的图像不显示

> ID：15709785
> 
> 赞同：-4
> 
> 时间：2013-03-29T19:02:55.340
> 
> 标签：html, facebook, image, share

我使用[facebook linter](https://developers.facebook.com/tools/debug)来调试我的网站。

一切都好，包括图像（og：image ...）

但是，当我在 facebook 上分享链接时，没有图像。

每个人都知道为什么或如何解决这个问题？

该网站是[oddvise.com](http://oddvise.com)

谢谢，若奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:05:24.790

这是脸书的问题。等一两天，你会在你的下一个分享中看到它会出现。

除此之外，`http://www.oddvise.com/`不存在。所以每当你分享时，你需要使用`http://oddvise.com/`而不是`http://www.oddvise.com/`

# css - 从 Less 文件创建 CSS 文件

> ID：15709786
> 
> 赞同：4
> 
> 时间：2013-03-29T19:02:55.733
> 
> 标签：css, less, web-essentials

我希望找到一种方法来使用网络必需品或类似的东西从我的 less 文件中创建我的 css 文件。当创建一个新的 less 文件时，它将创建要匹配的 css，但是在我的一些旧文件上，我永久删除了 css 文件，我正在寻找它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:25:41.407

[grunt-contrib-less](https://github.com/gruntjs/grunt-contrib-less)是持续将 LESS 转换为 CSS 的绝佳解决方案，就像[assemble-less](http://github.com/assemble/assemble-less)一样（我是后者的维护者）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:53:44.513

所以我能够回答我自己的问题。使用 VS2012 Web Essentials 时，如果存在错误，您的 .less 文件将不会编译并创建匹配的 .css 和 .min.css。我的错误之所以发生，是因为我没有拖入包含这些变量的 .less 文件的 @import 中，因此无法识别我的一些变量。我快速浏览了您提到的库，它们看起来确实很酷。感谢你的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T20:21:37.030

需要说明的是，如果你安装了 Web Essentials 插件，你必须重启 Visual Studio，否则 .min.css 和 .css 也不会生成。

# ruby-on-rails - 为什么 User.all.each {|u| puts u.id} 打印所有字段？

> ID：15709787
> 
> 赞同：2
> 
> 时间：2013-03-29T19:03:00.050
> 
> 标签：ruby-on-rails, ruby

以下代码：

```
User.all.each {|u| puts u.id} 
```

打印出所有记录的所有字段。

如何将其更改为仅打印该`id`字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T19:09:10.477

我无法复制此行为，但如果您在控制台中查看此行为，您可能会误认为`#each`返回 self（以及 self，一个大的 User 对象数组，然后检查）对于每个打印所有字段的调用。您能否改为运行`User.all.each {|u| puts u.id}; nil`让控制台`nil`在每个之后返回并查看行为是否仍然存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:06:41.960

如果你运行`puts u`，它会给出一个散列还是一个对象？如果是散列，则使用`puts u[:id]`or`puts u['id']`而不是`puts u.id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:43:21.060

If you are running this irb or rails console, it should print out just the IDs but then the return from your code is the set of users which the console will then print out. Scroll up and you will see the output you expect followed by the print out of all the user objects with full details.

# javascript - Queue() / dequeue() JQuery 无法正常工作

> ID：15709792
> 
> 赞同：0
> 
> 时间：2013-03-29T19:03:15.207
> 
> 标签：javascript, jquery, coffeescript

我一直在使用 CoffeScript 和 JQuery。我需要创建一个简单的动画。

我尝试使用延迟，但我完全不明白，所以我之前阅读了一个问题：

[此页面的链接](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me)

所以我决定使用队列；主要问题是尽管队列内部有更多元素，但只考虑了动画的最后一个元素。

我希望你能帮助我:)，你可以找到下面的代码。

队列中的所有元素（CoffeScript）。

```
 for proc in listaDeProcesos
    id = proc.id
    nombre = proc.nombre
    idFinal = "#{id}#{nombre}"
    tiempo = parseInt(proc.tejecucion)
    $("#animacion").queue('chain',(next)->
            $("##{idFinal}").fadeOut(tiempo,->
                    next()
                )
        ) 
```

出队函数调用：

```
 $("#animacion").dequeue('chain') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:53:35.893

恭喜！反对这一点是所有 JavaScript（或 CoffeeScript）开发人员的通行仪式。你最终一定会遇到它。解释是双重的：

*   JavaScript（和 CoffeeScript）变量是函数范围的，而不是块范围的
*   [闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))

基本上，每次迭代都会创建一个引用*变量* `idFinal`的函数，而不是循环中该次迭代的*值。*`idFinal`因此，当以后的迭代发生变化时`idFinal`，它会针对您创建的所有函数进行更改。有关行为的更简单示例，请参见此处：

[循环内的 JavaScript 闭包——简单实用的示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

在 CoffeeScript 中解决这个问题的一种方法是在结构中引入一个新的范围`do`：

```
for {id, nombre, tejecucion} in listaDeProcesos
  do (idFinal = "#{id}#{nombre}", tiempo = parseInt(tejecucion)) ->
    $("#animacion").queue 'chain', (next) ->
      $("##{idFinal}").fadeOut tiempo, next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:55:33.123

我找到了另一种解决方案，以防其他人遇到同样的问题，我在下面编写代码，无论如何谢谢:)

所有代码都在coffeescript中。

动画元素类

```
class animatedElement
constructor: (@element,@time) ->
showInfo: ->
    alert ("#{@element} >> #{@time}") 
```

迭代您想要动画的内容：

```
for proc in listaDeProcesos
    id = proc.id
    nombre = proc.nombre
    idFinal = "#{id}#{nombre}"
    tiempo = parseInt(proc.tejecucion)
    elemento = new animatedElement($("##{idFinal}"),tiempo)
    queue.push(elemento) 
```

辅助功能

```
showAnimation = ()->
if (queue.length > 0)
    tiempo = queue[0].time
    (queue.shift().element).fadeOut(tiempo, showAnimation) 
```

最后你只需要打电话

```
showAnimation() 
```

我希望它对其他人有用:)

# mysql - 使用 updateQuery() 语句错误检索的行数

> ID：15709793
> 
> 赞同：0
> 
> 时间：2013-03-29T19:03:27.320
> 
> 标签：mysql

我想打印从 JDBC（mysql 数据库）中的 updateQuery() 语句检索到的行数。我到目前为止的代码是这样的：

```
 int rows=0;
//constructor sets this up like opening connection, etc...
String buildSelectQuery = buildSelectQueryForCode();
            stmt = connection.createStatement();
            rows= stmt.executeUpdate(buildSelectQuery); <---- mismatch
            System.out.println(rows); 
```

buildSelectQuery 在哪里`CREATE VIEW viewName AS (SELECT * FROM tableName WHERE gen-congruence>1)`。类中还有一个 getRows 方法：

```
public String getRows(){
    return Integer.toString(rows);
} 
```

现在，理想情况下，这个查询应该提取超过 2000 条记录，这也在视图中完成（实际上在数据库中），但是 getRows（在 GUI 中被调用）在视图中打印出不正确的行数 (0)我不知道为什么。是否有另一种方法来设置结果集？难道我做错了什么？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:05:55.703

您的查询正在**创建**视图，而不是从视图中选择，因此不会返回任何行。读取某些行时，您需要更新*行。*

# javascript - 用于传递产品和金额的简单 PayPal Javascript API

> ID：15709802
> 
> 赞同：2
> 
> 时间：2013-03-29T19:04:03.173
> 
> 标签：javascript, paypal

我想要一个带有两个文本字段和一个按钮的简单表单：

*   产品编号
*   数量
*   查看

单击按钮时，会出现默认的 PayPal 结帐，其中包含产品 ID 和预先填充的金额。如何使用 Javascript 实现这一目标？

**更新**

我想严格使用 Javascript 来实现这一点，而不是像 PHP 这样的服务器端代码。它更像是一个通用的 PayPal 按钮，还有两个带有产品 ID 和金额的文本字段。

**更新 2**

我应该搜索 PayPal 按钮自定义金额，而不是搜索 PayPal Javascript API。看起来这将解决我的问题。

[使用自定义按钮将价格变量传递给 PayPal](https://stackoverflow.com/questions/5255571/passing-price-variable-to-paypal-with-custom-button)

[https://www.paypal.com/us/cgi-bin/webscr?cmd=_pdn_xclick_techview_outside](https://www.paypal.com/us/cgi-bin/webscr?cmd=_pdn_xclick_techview_outside)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T21:24:21.730

Have a look at [https://github.com/paypal/JavaScriptButtons](https://github.com/paypal/JavaScriptButtons)

We've only recently released these, so they don't support all button types just yet (i.e. donations), but they'll work just fine for 'Buy now' buttons.

```
<script src="paypal-button.min.js?merchant=YOUR_MERCHANT_ID"
    data-button="buynow"
    data-name="My product"
    data-amount="1.00"
></script> 
```

# javascript - Asp.net 将文本框中的信用卡号掩码为输入，然后验证和处理信用卡号

> ID：15709807
> 
> 赞同：1
> 
> 时间：2013-03-29T19:04:12.830
> 
> 标签：javascript, asp.net, pci-compliance

我支持一个接受和处理信用卡的 Asp.Net Web 应用程序。但是由于新规则，我需要在输入信用卡号时对其进行屏蔽。因此，如果第一个数字是`4`，则在输入下一个数字（例如 9）之前它是可见的，然后文本框显示`*9`。

我能想到的一种方法是使用 JavaScript 和隐藏字段来掩盖关键事件中的信用卡号，并将 CC 存储在隐藏字段中。但我不确定是否有更好的方法。以及如果用户更新现有号码如何处理。

有没有这样做的最佳实践？请记住，我需要这些数字并在处理信用卡之前运行验证，然后处理信用卡并将其存储在数据库中。我已经在数据库中加密了 CC 字段。

任何建议/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:14:33.960

有一个 jQuery 插件可以为你做到这一点：

[http://blog.decaf.de/2009/07/iphone-like-password-fields-using-jquery/](http://blog.decaf.de/2009/07/iphone-like-password-fields-using-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:08:25.397

这几乎是你能做到的唯一方法。至于更新，您永远不应该显示信用卡号码，因此他们将不得不重新输入他们的整个信用卡号码。

# prolog - 好的 Prolog 代码的特点？

> ID：15709808
> 
> 赞同：10
> 
> 时间：2013-03-29T19:04:15.613
> 
> 标签：prolog, failure-slice, logical-purity

编写好的 Prolog 必须掌握哪些设计启发式方法？我听说一个有经验的程序员需要大约两年的时间才能精通 Prolog。有效地使用递归是其中的一部分，但这似乎是一个相对较小的障碍。到底是什么给程序员带来了这么多麻烦？我应该在示例代码中寻找什么来判断它的质量？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-29T19:56:47.723

编写好的 Prolog 代码的主要困难不仅在于理解，而且在于充分传达程序的意图或目的。与其他编程语言相比，在同一个程序中通常有几种完全不同的 Prolog 代码。通过混淆这些级别的错误和问题随之而来：

**纯粹的、单调的代码。** 这段代码是 Prolog 的核心。在这样的代码中，许多代数属性都成立，并且实际问题以 Prolog 经常宣传的纯粹、理想的方式描述。然而，即使在这样的部分中，某些程序属性也可能会出现，例如不终止。以合取的交换性为例。在纯粹的、单调的代码中，`( A, B )`和`( B, A )`描述相同的关系。唯一的区别可能在于不同的终止行为和答案出现的顺序。理想情况下，纯谓词的名称表明谓词是关系。命令式在这里绝对不是一个好的选择。

**副作用代码。** 另一个极端是只有通过机器或大脑有效执行才能理解的代码。程序中没有简单的不变量。但即使在这样的部分，可能仍会观察到某些特性，如坚定不移。实际上，这样的代码与其他编程语言没有太大区别。

通常，副作用部分会“吞噬”纯粹的一面，因为程序员习惯于命令式、面向命令的“做这个做那个”的思维方式。要转向另一个方向，请考虑您将失去或获得哪些属性。想想测试你的程序是多么容易：一个程序越纯，在没有任何额外沙箱的情况下就越容易测试。一个简单的顶级查询就足够了。

一些例子，如何以看似必要的副作用为代价来扩展纯粹的一面：

*   [使用手动列表迭代与失败递归的优缺点是什么](https://stackoverflow.com/questions/9744641/what-are-the-pros-and-cons-of-using-manual-list-iteration-vs-recursion-through-f/9791028#9791028)

*   [Prolog递归跳过相同的结果](https://stackoverflow.com/questions/8305811/prolog-recursion-skipping-same-results/8309945#8309945)

或者干脆[这些答案](https://stackoverflow.com/search?q=user%3a772868%20[prolog]%20is%3aanswer%20pure)。

编辑：在您的评论中，您要求“学习建议”。所以这里有一些：

1.  坚持只写纯粹的、单调的代码。如果你都知道，你只能判断选择一方或另一方。我假设您以前有一些使用某些面向命令的语言产生副作用的经验，但没有使用纯代码的经验。因此，这意味着您将避免编写本质上非单调的代码。

2.  玩顶级。想象一下，顶层是访问您的程序的唯一途径。你将如何制定一个适合这种格式的问题？SWI 顶层经过专门设计，可实现这种轻量级交互。

3.  使用[clpfd](/questions/tagged/clpfd "show questions tagged 'clpfd'")进行算术运算。不要使用`(is)/2`，它会使您的代码过于模仿。

4.  享受纯单调代码的代数性质。想一想：您添加了一个目标，无论在哪里，您仍然可以预测该目标将使您的程序专业化（并且最多保持原样）。你可以——盲目地——删除一个目标，但你仍然知道（部分）它的影响。

5.  研究[故障片](/questions/tagged/failure-slice "show questions tagged 'failure-slice'")的概念以掌握不终止。

6.  Do not use a step-by-step tracer/debugger, as it is offered in many Prologs. It only shows you the precise steps Prolog takes. It does not show you anything directly related to the meaning of the program. It reinforces a step-by-step thinking.

7.  Watch your language. The way how you talk about a program influences the way you think about it. So, if you use a lot of operationalizing language (like: This does this etc), chances are you reinforce the command-oriented view. There is a cleaner way of talking about things, but you need to find it. This is probably the hardest part.

# c# - 在c#中检索大量数据时如何防止System.OutOfMemoryException

> ID：15709809
> 
> 赞同：1
> 
> 时间：2013-03-29T19:04:19.900
> 
> 标签：c#

我有一个 C# 程序，它在启动时用 400 万个 Guid 填充字典。此时我不断收到“System.OutOfMemoryException”类型的异常错误。

例子：

```
using (reportingconn)
{
    var initialrowkeys = reportingconn.Query("select rowkey from table”);
} 
```

谁能给我一些想法，如何最好地将大量数据从 SQL 检索到字典中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:05:51.110

使用`SqlDataReader()`它将逐行读取，而不是`SqlDataAdapter.Fill.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:35:19.987

似乎 C# 数据字典有 2GB 的内存限制。一位程序员朋友告诉我将我的控制台应用程序从 32 位更改为 64 位，以防止这种限制。这似乎解决了我的问题。

# java - 在 JDBC 中使用 postgres 锁定表

> ID：15709815
> 
> 赞同：4
> 
> 时间：2013-03-29T19:04:34.850
> 
> 标签：java, postgresql, jdbc, transactions, locking

只是一个关于使用 JDBC 在 postgres 数据库中锁定表的快速问题。我有一个要为其添加新记录的表，但是，要为主键执行此操作，我使用了一个递增的整数值。

我希望能够在 Java 中检索此列的最大值并将其存储为变量，以便在添加新行时用作新的主键。

这给了我一个小问题，因为这将被建模为多用户系统，当 2 个位置请求相同的最大值时会发生什么？当尝试添加相同的主键时，这当然会产生问题。

我意识到我应该在表上使用独占锁来防止在获取密钥和添加新行时读取或写入。但是，我似乎找不到任何方法来处理 JDBC 中的表锁定，只是标准事务。

伪代码如下：

```
primaryKey = "SELECT MAX(id) FROM table1;";
primary key++;
//id retrieved again from 2nd source

"INSERT INTO table1 (primaryKey, value 1, value 2);" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:07:31.893

You're absolutely right, if two locations request at around the same time, you'll run into a race condition.

The way to handle this is to create a [sequence](http://www.postgresql.org/docs/8.1/static/sql-createsequence.html) in postgres and select the nextval as the primary key.

I don't know exactly what direction you're heading and how your handle your data, but you could also set the column as a [serial](http://www.postgresql.org/docs/8.1/static/datatype.html#DATATYPE-SERIAL) and not even include the column in your insert query. The column will automatically auto increment.

# javascript - Javascript 在我的代码中的开关问题

> ID：15709818
> 
> 赞同：0
> 
> 时间：2013-03-29T19:04:45.780
> 
> 标签：javascript

我为我的测试站点制作了 Javascript 随机标语生成器，但不知何故出现了错误，我真的不知道为什么。

```
<body onload="rndqu()">
    <div id="head"> <a href="index.html">Mira's place<a><br>
            <h2>&#8220;<span id="quote"></span>&#8221;</h2>
    </div>
</body> 
```

这是Javascript

```
var qu;
var slogan;
function rndqu(n){
    var random = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
    };  
    qu = random(1, 7);
    switch(qu){
        case 1:
            slogan = "This text is random generated. Woohooo... :P";
            break;
        case 2:
            slogan = "Mira is creating huge game named Rock Paper.";
            break;
        case 3:
            slogan = "I will add discussion on my site!";
            break;
        case 4:
            slogan = "Everyone loves Koding.";
            return;
        case 5:
            slogan = "Mira is potato. :(";
            return;
        case 6:
            slogan = "I'm learning Javascript, this slogan is made in Javascript!";
            return;
        case 7:
            slogan = "There is actually over 9000 slogans!";
            return;
        default:
            slogan = "Is it possible to get default?";
    }
    document.getElementById("quote").innerHTML = slogan;
} 
```

有时它起作用，有时它不起作用。我尝试了谷歌浏览器和它的控制台并使用这个命令`rndqu(); console.log(qu);`来调试它。但我失败了。我在代码中看不到任何错误。

什么时候：

`qu = 1`口号是正确的。

`qu = 2`口号是正确的。

`qu = 3`口号是正确的。

`qu = 4`口号没有改变。

`qu = 5`口号没有改变。

`qu = 6`口号没有改变。

`qu = 7`口号没有改变。

为什么它不起作用对我来说完全是个谜。

**编辑：我是瞎子。我瞎了眼！！！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T19:05:59.763

因为在不起作用的情况下，您正在使用`return;`而不是，`break;`所以您正在退出函数并且没有到达存储结果的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:07:32.147

自第 4 号案例以来，您已经返回而不是休息 易于修复 :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T19:07:45.520

you've `return;` instead of `break;` in cases 4, 5, 6, and 7

# mysql - 创建表时分配主键的快捷方式

> ID：15709821
> 
> 赞同：0
> 
> 时间：2013-03-29T19:04:54.187
> 
> 标签：mysql

创建表时使用快捷查询分配主键的正确方法是什么？

这是我的快捷方式的示例：

```
create table booking_product (
`id` int(10) not null constraint `booking_product_id` primary key auto_increment ,
`bookingId` int(10) not null,
`serviceId` int(10) not null,
`date` date not null,
`price` decimal(30,15) not null,
`qty` int(1) not null,
`currencyId` int(10) not null,
`total` decimal(30,15) not null,
`roomInclusion` text null default null,

foreign key booking_product(bookingId) references booking(id) on update cascade on delete cascade,
foreign key booking_product(serviceId) references service(id) on update cascade on delete set null,
foreign key booking_product(currencyId) references currency(id) on update cascade on delete set null
) engine = InnoDB; 
```

*   注意第 2 行我尝试分配主键，但是这个查询是错误的并产生错误。如果我尝试只使用`id int(10) not null primary key auto_increment ,`我会得到错误：`Duplicate key name 'booking_product'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:09:37.230

如果使用`constraint booking_product_id`，则不会出现错误，`Duplicate key name 'booking_product'`因为 SQL 解析器在第一个错误处停止。

丢弃`constraint booking_product_id`和使用

```
foreign key bookingId_fk(bookingId) references booking(id)
    on update cascade
    on delete cascade,
foreign key serviceId_fk(serviceId) references service(id)
    on update cascade
    on delete set null,
foreign key currencyId_fk(currencyId) references currency(id)
    on update cascade
    on delete set null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:27:07.643

我知道你选择了一个答案，但是当我将你的 create 语句简化为下面的代码时，我让它工作了。现在，通过 Oswald 添加的“删除约束”请求，您可能拥有您想要的一切：

```
create table booking_product (
id int(10) not null auto_increment,
PRIMARY KEY(id),  <<<<< this worked for me...
bookingId int(10) not null,
serviceId int(10) not null,
date date not null,
price decimal(30,15) not null,
qty int(1) not null,
currencyId int(10) not null,
total decimal(30,15) not null,
roomInclusion text null default null) 
```

同样，我只是从您提出的分配主要问题的问题中处理问题。

希望这可以帮助。

# c++ - 在队列类模板中重载运算符<<

> ID：15709822
> 
> 赞同：0
> 
> 时间：2013-03-29T19:04:53.267
> 
> 标签：c++, templates, operators

我所有其他重载的运算符都在工作。但是，我无法让 << 正常工作。

编译器说：

**在 main.cpp:3:0 包含的文件中：**

**Queue.h：在函数'std::ostream& operator<<(std::ostream&, const Queue&)'中：**

**Queue.h:203:19：错误：未在此范围内声明“currNode”**

这是我的代码：

队列.h

```
#ifndef QUEUE_H
#define QUEUE_H
#include <string>
#include <iostream>

using namespace std;

template <typename T>

class Queue
{
  template <typename V>
  friend ostream& operator<<(ostream&, const Queue<V>&);

  class Node
  {
    friend class Queue;
    public:
      T* data;
      Node* next;
  };

  public:
    Queue();
    Queue(Queue<T>&);
    ~Queue();
    void pushBack(T*);
    void popFront();
    T front();
    bool empty();

    T*    operator[](int);           
    Queue<T>&  operator+=(T*);            
    Queue<T>&  operator+=(Queue<T>&);     
    Queue<T>   operator+(T*);             
    Queue<T>   operator+(Queue<T>&);  
    Queue<T>&  operator-=(T*);            
    Queue<T>&  operator-=(Queue<T>&);     
    Queue<T>   operator-(T*);             
    Queue<T>   operator-(Queue<T>&);     
    Queue<T>&  operator=(const Queue<T>&);
    //Empty the queue
    Queue<T>   operator!();                

  private:
    Node* head;
};

//Constructor
template <typename T>
Queue<T>::Queue(): head(0)
{
}

template <typename T>
Queue<T>::Queue(Queue<T>& copy)
{
  head=0;
  Node* currNode = copy.head;
  Node* prevNode = 0;
  Node* newNode;

  while (currNode!=0){
    newNode = new Node();
    newNode->data = currNode->data;
    if (prevNode!=0) prevNode->next = newNode;
    if (head ==0) head = newNode;
    prevNode=newNode;
    currNode=currNode->next;
  }
}

//Destructor
template <typename T>
Queue<T>::~Queue()
{
  Node *currNode, *nextNode;
  currNode = head;
  while(currNode!=0){
    nextNode=currNode->next;
    delete currNode;
    currNode=nextNode;
  }
}

//Adding to back
template <typename T>
void Queue<T>::pushBack(T *newData){
  Node *newNode = new Node;
  newNode->data = newData;
  newNode->next = 0;

  //If empty
  if (head==0){
    head = newNode;
    return;
  }

  Node *currNode;
  currNode = head;
  while(currNode->next!=0)
    currNode=currNode->next;
  currNode->next = newNode;
}

//Removing from front
template <typename T>
void Queue<T>::popFront(){
  Node *oldNode;
  oldNode = head;

  head = oldNode->next;
  delete oldNode;
}

//getFront
template <typename T>
T Queue<T>::front(){
  return *(head->data);
}

//Is it empty
template <typename T>
bool Queue<T>::empty(){
  if (head==0)
    return true;
  else
    return false;
}

/*------------------------Overloaded Operators---------------------------*/

template <typename T>
Queue<T>& Queue<T>::operator+=(Queue<T>& q)
{

  Node *curr;
  curr = q.head;

  while(curr!=0)
  {
    this->pushBack(curr->data);
    curr = curr->next;
  }

  return (*this);
}

template <typename T>
Queue<T> Queue<T>::operator+(Queue<T>& q)
{
  Queue<T> newQueue = *this;

  newQueue+=q;

  return newQueue;
}

template <typename T>
Queue<T> Queue<T>::operator+(T *t)
{

  Queue<T> tmp = *this;

  if(t == 0)
   return tmp;

  tmp.pushBack(t);
  return tmp;
}

template <typename T>
Queue<T>& Queue<T>::operator+=(T *t)
{
  if(t == 0)
    return (*this);

  this->pushBack(t);
  return (*this);
}

template <typename T>
Queue<T> Queue<T>::operator!()
{
  if(this ==0)
   return (*this);  

  Node *curr = head;
  while(curr!=0)
  {
    curr = curr->next;
    this->popFront();
  }
  return (*this);
}

/*NOT WORKING?!?!*/
template <typename T>
ostream& operator<<(ostream& output, const Queue<T>& q)
{
  Queue<T>::Node *currNode;    /******HERE IS THE PROBLEM******/
  currNode = q.head;

  if(q.head == 0)
  {
    output << "Empty" << endl; 
    return output;
  }
  do {
    output << *(currNode->data) << endl;
    currNode = currNode->next;
  } while (currNode != 0);

  return output;
}

template <typename T>
Queue<T>& Queue<T>::operator-=(T *t)
{

  if(t == 0)
    return (*this);

  //REMOVE ELEMENT
  Node *currNode, *prevNode;
  currNode=head;
  prevNode=0;
  while (currNode != 0){
    if ((*currNode->data) == (*t)){
      if (prevNode == 0)
        head = currNode->next;
      else
        prevNode->next = currNode->next;
      delete currNode;
      break;
    }
    prevNode=currNode;
    currNode=currNode->next;
  }
  return (*this);
}

template <typename T>
Queue<T>& Queue<T>::operator-=(Queue<T>& q)
{
  //REMOVE ELEMENT
  Node *currNode;
  currNode=q.head;
  while(currNode!=0)
  {
    (*this)-=currNode->data;
    currNode=currNode->next;
  }
  return (*this);
}

template <typename T>
Queue<T> Queue<T>::operator-(T *t)
{
  //REMOVE ELEMENT
  Queue<T> newQueue = *(this);
  newQueue-=t;
  return newQueue;
}

template <typename T>
Queue<T> Queue<T>::operator-(Queue<T>& q)
{
  //REMOVE ELEMENT
  Queue<T> newQueue= *(this);
  newQueue-=q;
  return newQueue;
}

template <typename T>
Queue<T>& Queue<T>::operator=(const Queue<T>& copy)
{
  head=0;
  Node* currNode = copy.head;
  Node* prevNode = 0;
  Node* newNode;

  while (currNode!=0){
    newNode = new Node();
    newNode->data = currNode->data;
    if (prevNode!=0) prevNode->next = newNode;
    if (head ==0) head = newNode;
    prevNode=newNode;
    currNode=currNode->next;
  }
  return (*this);
}

template <typename T>
T* Queue<T>::operator[](int index)
{
  Node *currNode;
  currNode=head;
  int i=0;

  while(currNode!=0){
    if(index==i++)
      return currNode->data;
    currNode=currNode->next;
  }

  return 0;
}

#endif 
```

主文件

```
#include <iostream>
#include <string>
#include "Queue.h"

using namespace std;

int main()
{

  Queue<string> q1;
  Queue<int> q2;

  string s = "Hello";
  int i = 3;

  q1.pushBack(&s);
  q2.pushBack(&i);

  cout<<"contents of q1 = " << (*q1) << endl;
  cout<<"contents of q2 = " << (*q2) << endl;

  return 0;
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:15:09.547

我强烈建议您阅读 hmjd 发布的链接，但问题的要点是您需要告诉编译器 Queue::Node 是一种类型，通过`typename Queue< T >::Node`

# java - 如何使用 OutputStream 将附件添加到 Java 中的电子邮件？

> ID：15709823
> 
> 赞同：10
> 
> 时间：2013-03-29T19:05:01.687
> 
> 标签：java, email, file-io, outputstream

我已经看到了`javax.mail`库的代码，您可以在其中向电子邮件添加附件：

```
MimeBodyPart attachmentPart = new MimeBodyPart();
FileDataSource fds = new FileDataSource("C:/text.txt");
attachmentPart.setDataHandler(new DataHandler(fds));
attachmentPart.setFileName("text.txt");
multipart.addBodyPart(attachmentPart); 
```

但这要求文件驻留在此磁盘上的某个位置。

我想`OutputStream`从电子邮件库中获取一个权利，并将文件内容直接从我写入的另一个地方流式传输到其中`OutputStream`。

这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T19:40:48.030

尝试使用 ByteArrayDataSource，像这样

```
ByteArrayOutputStream baos = //Read the output stream
DataSource aAttachment = new  ByteArrayDataSource(baos.toByteArray(),"application/octet-stream");
MimeBodyPart attachmentPart = new MimeBodyPart();

attachmentPart.setDataHandler(new DataHandler(aAttachment)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-29T02:21:13.537

是的，这是可能的。使用 ByteArrayDataSource 的答案不能为大型附件提供令人满意的解决方案，因为它要求整个内容一次驻留在内存中。更好的解决方案是使用由 PipedInputStream 提供的 DataHandler，而 PipedInputStream 又由 PipedOutputStream 写入。当然，这需要第二个线程。下面的代码演示了这一点：

```
import com.sun.mail.smtp.*;
import java.io.InputStream;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PipedInputStream;
import java.io.PipedOutputStream;
import java.util.Date;
import java.util.Properties;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.mail.*;
import javax.mail.internet.*;

public class javamail {

    // Piped Data Source

    private static class PipedDataSource  implements DataSource {
        InputStream in;
        String type;
        public PipedDataSource (InputStream in, String type) { this.in = in; this.type = type; }
        public String getContentType() { return type; }
        public InputStream getInputStream() { return in; }
        public String getName() { return "DataSource"; }
        public OutputStream getOutputStream() throws IOException { throw new IOException("No OutputStream"); }
    }

    // Main Method

    public static void main(String [] args) throws Exception {

        final int BUFFER_SIZE = 32768;

        Properties properties = new Properties();
        properties.put("mail.smtp.starttls.enable", System.getProperty("mail.smtp.starttls.enable","true"));
        properties.put("mail.smtp.ssl.trust", System.getProperty("mail.smtp.ssl.trust","*"));
        properties.put("mail.smtp.host", System.getProperty("mail.smtp.host","localhost"));
        properties.put("mail.smtp.port", System.getProperty("mail.smtp.port","587"));

        Session session = Session.getInstance(properties);

        String host = properties.getProperty("mail.smtp.host");
        int port = Integer.parseInt(properties.getProperty("mail.smtp.port"));
        System.err.println("connect: smtp://"+host+":"+port); System.err.flush();

        MimeMessage msg = new MimeMessage(session);

        PipedInputStream in = new PipedInputStream(BUFFER_SIZE);
        PipedOutputStream out = new PipedOutputStream(in);

        // Set general headers

        msg.setFrom(System.getProperty("mail.from","Unknown <unknown@example.com>"));
        msg.setRecipients(Message.RecipientType.TO, System.getProperty("mail.to", "unknown@example.com"));
        msg.setSentDate(new Date());
        msg.setSubject("JavaMail Test");
        msg.setHeader("X-Mailer", "JavaMail");

        // Set main text - Part 1 - content provided here
        MimeBodyPart part1 = new MimeBodyPart();
        StringBuilder sb = new StringBuilder();
        sb.append("This is the cover letter that describes the accompanying  \n");
        sb.append("attachment, which is a base64 encoded text document of  \n");
        sb.append("little more value than a demonstration.\n\n");
        part1.setText(sb.toString()); // Writes a computed Content-Type Header
        part1.setHeader("Content-Type","text/plain; charset=us-ascii; format=flowed; delsp=yes"); // Rewrite Header

        // Set attachment - Part 2 - content provdied from another thread via a pipe
        MimeBodyPart part2 = new MimeBodyPart();
        part2.setDataHandler(new DataHandler(new PipedDataSource (in, "text/html"))); // Writes a Content-Type Header
        part2.setHeader("Content-Type","text/plain; charset=\"utf-8\"; name=\"Lorem Ipsum.txt\""); // Rewrite Header
        part2.setHeader("Content-Disposition", "attachment; filename=\"Lorem Ipsum.txt\"");
        part2.setHeader("Content-Transfer-Encoding","base64");

        // Join parts
        MimeMultipart multipart = new MimeMultipart();
        multipart.addBodyPart(part1);
        multipart.addBodyPart(part2);
        msg.setContent(multipart);

        // Start thread to deliver content for Part 2 attachment via DataHandler
        Thread t = new Thread() {
            public void run() {
                try {
                    PrintWriter w = new PrintWriter(new OutputStreamWriter(out,"UTF-8"));
                    w.print("Lorem ipsum dolor sit amet, ligula suspendisse nulla pretium");
                    w.print(", rhoncus tempor fermentum, enim integer ad vestibulum volut");
                    w.print("pat. Nisl rhoncus turpis est, vel elit, congue wisi enim nun");
                    w.print("c ultricies sit, magna tincidunt. Maecenas aliquam maecenas ");
                    w.print("ligula nostra, accumsan taciti. Sociis mauris in integer, a ");
                    w.print("dolor netus non dui aliquet, sagittis felis sodales, dolor s");
                    w.print("ociis mauris, vel eu libero cras. Faucibus at. Arcu habitass");
                    w.print("e elementum est, ipsum purus pede porttitor class, ut adipis");
                    w.print("cing, aliquet sed auctor, imperdiet arcu per diam dapibus li");
                    w.print("bero duis. Enim eros in vel, volutpat nec pellentesque leo, ");
                    w.print("temporibus scelerisque nec.");
                    w.println("");
                    w.println("");
                    w.flush(); // Ensure data completely flushed to buffer
                    w.close(); // closes the writer and PipedOutputStream
                } catch(Exception e) { e.printStackTrace(); };
                try { out.close(); } catch(Exception e) { e.printStackTrace(); }
            }
        };
        t.start();

        // Send the message on its way
        SMTPTransport xp = (SMTPTransport) session.getTransport();
        xp.connect();
        xp.sendMessage(msg,msg.getAllRecipients());
        System.err.println(xp.getLastServerResponse());

        t.join();
        return;
    }
} 
```

您可以使用在命令行中定义的以下属性（根据需要进行编辑）运行此代码：

```
-Dmail.from="sender@host.example.com"
-Dmail.to="receipient@host.example.com"
-Dmail.smtp.host=smtp.example.com
-Dmail.smtp.port=587 or 25 
```

示例代码发送一封电子邮件，其中包含使用 us-ascii 编码的文本/纯文本求职信和使用 base64 传输编码的 utf-8 编码的文本/纯文本附件。如果 MX 支持，它还使用 STARTTLS（加密传输）。

# matlab - MATLAB create title over one column of subplot

> ID：15709824
> 
> 赞同：2
> 
> 时间：2013-03-29T19:05:04.650
> 
> 标签：matlab, graph, matlab-figure

So I have a 3x3 array of subplots. I know how to get a title on each one of them, and I know how to get a "super title" using the suptitle function over the whole thing, but I can't figure out how to get titles to only show up over each column. I also want to do a similar thing with the rows. Think hip, knee, ankle across the top, then angular velocity, torque, and power down the left side. Thoughts?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:30:06.370

You can use `text` to label the columns and rows.

```
subplot(2,2,1)
title('a')
h1 = text(-0.25, 0.5,'row 1');
set(h1, 'rotation', 90)
text(0.35,1.2,'column 1');

subplot(2,2,2)
title('b')
text(0.35,1.2,'column 2');
subplot(2,2,3)

title('c')
h = text(-0.25, 0.5, 'row 2');
set(h, 'rotation', 90)
subplot(2,2,4)
title('d') 
```

The position of text will have to be adjusted based on the x and y range of your plots.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T11:42:11.500

As noted in the comments to the other answer, you can do this using titles and y-labels in individual subplots.

在图的第一行使用`title`以生成列标签。对于行标签，请利用（可能未记录？）功能，该功能允许您拥有多行标签，因此：

`ylabel({'Row label' 'Actual y-label'});`

这是一个令人讨厌的 kludge，如果您的子图是在循环中生成的，它就是一个 PITA，但直到/除非 Mathworks 给我们提供了一种正确的方法来做到这一点，这是我所知道的最好的。

# c# - 具有 Object 属性的 WebAPI JSON 反序列化

> ID：15709830
> 
> 赞同：1
> 
> 时间：2013-03-29T19:05:18.853
> 
> 标签：c#, xml, json, serialization, asp.net-web-api

我对 Asp.net Web Api 有以下问题。我尝试使用以下对象作为我的操作的参数

```
 [DataContract]
 public class MyObject
 {
      [DataMember]
      public object MyIdProperty {get;set;}
 } 
```

MyIdProperty 属性可以包含 Guid 或 Int32

在 MVC 中，我做了一个 ModelBinder，它就像一个魅力，所以我为 WebApi 做了一个这样的

```
public class HttpObjectIdPropertyModelBinder : IModelBinder
{
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        if (bindingContext.ModelType != ObjectType
                   || (bindingContext.ModelName.TrimHasValue()
            && !bindingContext.ModelName.EndsWith("Id", StringComparison.OrdinalIgnoreCase)))
        {
            return false;
        }

        ValueProviderResult result = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        if (result == null || result.RawValue == null || result.RawValue.GetType() == ObjectType)
        {
            bindingContext.Model = null;
            return true;
        }

        bindingContext.ModelState.SetModelValue(bindingContext.ModelName, result);

        string stringValue = result.RawValue as string;

        if (stringValue == null)
        {
            string[] stringValues = result.RawValue as string[];

            if (stringValues != null && stringValues.Length == 1)
            {
                stringValue = stringValues[0];
            }

            if (stringValue == null)
            {
                return false;
            }
        }

        Guid guid;
        int integer;
        if (Guid.TryParse(stringValue, out guid))
        {
            bindingContext.Model = guid;
        }
        else if (int.TryParse(stringValue, out integer))
        {
            bindingContext.Model = integer;
        }
        else
        {
            return false;
        }

        return true;
    }

    private static readonly Type ObjectType = typeof(object);

    private static HttpParameterBinding EvaluateRule(HttpObjectIdPropertyModelBinder binder, HttpParameterDescriptor parameter)
    {
        if (parameter.ParameterType == ObjectType
                   && parameter.ParameterName.EndsWith("Id", StringComparison.OrdinalIgnoreCase))
        {
            return parameter.BindWithModelBinding(binder);
        }

        return null;
    }

    public static void Register()
    {
        var binder = new HttpObjectIdPropertyModelBinder();
        GlobalConfiguration.Configuration.Services.Insert(typeof(ModelBinderProvider), 0, new SimpleModelBinderProvider(typeof(object), binder));
        GlobalConfiguration.Configuration.ParameterBindingRules.Insert(0, param => EvaluateRule(binder, param));
    }
} 
```

这是我第一次为 WebApi 做模型绑定器，所以我什至不确定我是否做得很好，以及它是否是解决这个问题的好方法。

无论如何，如果我有这样的动作，这个模型活页夹

```
 public IEnumerable<MyObject> Get(object id)
 {
      // code here...
 } 
```

使用 Json 格式化程序或 Xml 格式化程序和模型绑定器正确反序列化参数 id

但是，如果我使用以下操作

```
 public void Post(MyObject myObject)
 {
      // code here...
 } 
```

当我使用 Xml 格式化程序时，参数 myObject 被完美地反序列化，但是当我使用 Json 格式化程序时，属性 MyIdProperty 包含一个字符串而不是 Guid 或 Int32。在这两种情况下，我的模型活页夹根本没有使用。与 MVC 相比，它在动作参数处停止对模型的评估，MVC 为每个具有复杂类型的属性使用模型绑定器。

注意：我不想使用 true 类型或使用带有 true 类型的内部或受保护属性，因为我在很多不同的对象中都有这种属性，如果我必须复制代码将变得非常难以维护他们每次

# java - 当我将代码从一个应用程序移动到另一个应用程序时，用于编辑谷歌电子表格的 Android 应用程序崩溃

> ID：15709834
> 
> 赞同：1
> 
> 时间：2013-03-29T19:05:36.560
> 
> 标签：java, android, spreadsheet

我对 Java 和 Android 开发都非常缺乏经验。但我设法制作了一个简单的 Android 应用程序来读取接近传感器的值。我还设法编写了一个 Java 应用程序来编辑谷歌电子表格中的一个单元格。

因此，现在我想将两者结合起来，并拥有一个 Android 应用程序，该应用程序将根据 poximity 传感器的值更改谷歌电子表格中单元格的值。

但是，当我组合代码时，我的应用程序崩溃了，而且我对 Eclipse 环境和调试器了解不足，无法弄清楚发生了什么。该应用程序安装良好并提供午餐。主视图仅显示一秒钟，然后应用程序崩溃。

```
package com.example.mysensorproject;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

import com.google.gdata.client.spreadsheet.SpreadsheetService;
import com.google.gdata.data.spreadsheet.CellEntry;
import com.google.gdata.data.spreadsheet.CellFeed;
import com.google.gdata.util.AuthenticationException;
import com.google.gdata.util.ServiceException;

public class MainActivity extends Activity implements SensorEventListener {

        TextView proxText;
        SensorManager sm;
        Sensor proxSensor;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        sm=(SensorManager)getSystemService(SENSOR_SERVICE);
        proxSensor=sm.getDefaultSensor(Sensor.TYPE_PROXIMITY);
        proxText=(TextView)findViewById(R.id.proximityTextView);        
        sm.registerListener(this, proxSensor, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        proxText.setText(String.valueOf(event.values[0]));

        //change value in spreadsheet
        SpreadsheetService service = new SpreadsheetService("wise");
        service.setProtocolVersion(SpreadsheetService.Versions.V3);

        try {

            service.setUserCredentials("email@example.com", "password");
        } catch (AuthenticationException e) {
            e.printStackTrace();
        }

        URL url = null;         
        try {
            url = new URL("https://spreadsheets.google.com/feeds/cells/0AuDoKcCfLURKdEQ3bVFLemY5aVh2SGQySE10QTYzRGc/od6/private/full");
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        CellFeed cellFeed = null;
        try {
            cellFeed = service.getFeed(url, CellFeed.class);
//          System.out.println("Cell Feed Worked");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ServiceException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        for (CellEntry cell : cellFeed.getEntries()) {
               cell.changeInputValueLocal(String.valueOf(event.values[0]));
               try {
                cell.update();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ServiceException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }
*/        
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T06:05:41.273

当您尝试在 UI 中执行此操作时会发生这种情况。你需要在后台（线程）做。您可以使用 AsyncTask 之类的东西：（[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)）。

一些代码例如：

```
public class TaskModifySpreadsheet extends AsyncTask <Spreadsheet, Object, Spreadsheet> 
{
    @Override
    protected Spreadsheet doInBackground(Spreadsheet... titles) {
        // Do all work with the spreadsheet here. Modify cells, retrieving... etc.
    }
} 
```

# php - php数组没有通过json编码

> ID：15709837
> 
> 赞同：0
> 
> 时间：2013-03-29T19:05:48.623
> 
> 标签：php, javascript, json

```
$drivetracker = simplexml_load_file('geot_5980.xml');
$data = array();
foreach ($drivetracker->plays->qtr as $qtr):
    foreach ($qtr->play as $myplay):
    $hasball = (string)$myplay['hasball'];
        $play = (string)$myplay['spot'];
        $down = (string)$myplay['down'];
    $togo = (string)$myplay['togo'];
    $type = (string)$myplay['type'];
    $text = (string)$myplay['text'];
        if($drive == $driveid){
                array_push($data, array("text" => $text,               
                "spot" => $play,
                "ball" => $hasball,
                "togo" => $togo,
                "type" => $type,
                "drive"=> $drive)
           );
            }
    }
    endforeach;
endforeach;

echo json_encode($data); 
```

如果我`print_r($data)`得到，

```
Array
(
    [0] => Array
        (
            [text] => Godhigh, R. rush for 2 yards to the GT27 (Canty, W).
            [spot] => GT25
            [ball] => GT
            [togo] => 10
            [type] => R
            [drive] => 7
        )

    [1] => Array
        (
            [text] => Days, S. rush for 5 yards to the GT32 (Woodruff, J;Brown, Ky).
            [spot] => GT27
            [ball] => GT
            [togo] => 8
            [type] => R
            [drive] => 7
        )

    [2] => Array
        (
            [text] => Sims, D. rush for 6 yards to the GT38, 1ST DOWN GT (Anunike, K;Sarmiento, S).
            [spot] => GT32
            [ball] => GT
            [togo] => 3
            [type] => R
            [drive] => 7
        )

    [3] => Array
        (
            [text] => Godhigh, R. rush for 18 yards to the DU44, 1ST DOWN GT (Cockrell, R).
            [spot] => GT38
            [ball] => GT
            [togo] => 10
            [type] => R
            [drive] => 7
        )

    [4] => Array
        (
            [text] => Lee, V. pass complete to Greene, J. for 5 yards to the DU39 (Foster, T).
            [spot] => DU44
            [ball] => GT
            [togo] => 10
            [type] => P
            [drive] => 7
        )

    [5] => Array
        (
            [text] => Laskey, Z. rush for 9 yards to the DU35 (Sink, N).
            [spot] => DU44
            [ball] => GT
            [togo] => 10
            [type] => R
            [drive] => 7
        )

    [6] => Array
        (
            [text] => Laskey, Z. rush for 5 yards to the DU30, 1ST DOWN GT (Canty, W;France, C).
            [spot] => DU35
            [ball] => GT
            [togo] => 1
            [type] => R
            [drive] => 7
        )

    [7] => Array
        (
            [text] => Laskey, Z. rush for 4 yards to the DU26 (Sink, N).
            [spot] => DU30
            [ball] => GT
            [togo] => 10
            [type] => R
            [drive] => 7
        )

    [8] => Array
        (
            [text] => Lee, V. rush for 3 yards to the DU23 (Brown, Ky).
            [spot] => DU26
            [ball] => GT
            [togo] => 6
            [type] => R
            [drive] => 7
        )

    [9] => Array
        (
            [text] => Laskey, Z. rush for 5 yards to the DU18, 1ST DOWN GT (Canty, W).
            [spot] => DU23
            [ball] => GT
            [togo] => 3
            [type] => R
            [drive] => 7
        )

    [10] => Array
        (
            [text] => Smith, O. rush for 8 yards to the DU10 (France, C).
            [spot] => DU18
            [ball] => GT
            [togo] => 10
            [type] => R
            [drive] => 7
        )

    [11] => Array
        (
            [text] => Lee, V. rush for 4 yards to the DU6, 1ST DOWN GT (France, C).
            [spot] => DU10
            [ball] => GT
            [togo] => 2
            [type] => R
            [drive] => 7
        )

    [12] => Array
        (
            [text] => Laskey, Z. rush for 3 yards to the DU3 (Helton, D;Woodruff, J).
            [spot] => DU06
            [ball] => GT
            [togo] => 0
            [type] => R
            [drive] => 7
        )

    [13] => Array
        (
            [text] => Laskey, Z. rush for no gain to the DU3 (Woodruff, J;Brown, Ky).
            [spot] => DU03
            [ball] => GT
            [togo] => 0
            [type] => R
            [drive] => 7
        )

    [14] => Array
        (
            [text] => Smith, O. rush for 1 yard to the DU2 (France, C).
            [spot] => DU03
            [ball] => GT
            [togo] => 0
            [type] => R
            [drive] => 7
        )

    [15] => Array
        (
            [text] => Lee, V. rush for 2 yards to the DU0, TOUCHDOWN, clock 04:34.
            [spot] => DU02
            [ball] => GT
            [togo] => 0
            [type] => R
            [drive] => 7
        )

    [16] => Array
        (
            [text] => Tanner, C. kick attempt good.
            [spot] => DU03
            [ball] => GT
            [togo] => 0
            [type] => X
            [drive] => 7
        )

    [17] => Array
        (
            [text] => Tanner, C. kickoff 51 yards to the DU14, Butler, L return 16 yards to the DU30 (Noble, D.).
            [spot] => GT35
            [ball] => GT
            [togo] => 0
            [type] => K
            [drive] => 7
        )

) => Array
        (
            [text] => Tanner, C. kickoff 51 yards to the DU14, Butler, L return 16 yards to the DU30 (Noble, D.).
            [spot] => GT35
            [ball] => GT
            [togo] => 0
            [type] => K
            [drive] => 7
        )

) 
```

但如果我这样做`echo json_encode($data);` ，它不会给我这种格式......（它给我空白）

```
[{"text":"","spot":"","ball":"","togo":"0","type":"","drive":""},{"text":"","spot":"","ball":"","togo":"0","type":"","drive":""},{"text":"","spot":"","ball":"","togo":"0","type":"","drive":""},{"text":"","spot":"","ball":"","togo":"0","type":"","drive":""},{"text":"","spot":"","ball":"","togo":"0","type":"","drive":""}] 
```

$data 未通过 json 编码的可能原因是什么？

这是来自 print_r($data);

```
Array ( [0] => Array ( [text] => Godhigh, R. rush for 2 yards to the GT27 (Canty, W). [spot] => GT25 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [1] => Array ( [text] => Days, S. rush for 5 yards to the GT32 (Woodruff, J;Brown, Ky). [spot] => GT27 [ball] => GT [togo] => 8 [type] => R [drive] => 7 ) [2] => Array ( [text] => Sims, D. rush for 6 yards to the GT38, 1ST DOWN GT (Anunike, K;Sarmiento, S). [spot] => GT32 [ball] => GT [togo] => 3 [type] => R [drive] => 7 ) [3] => Array ( [text] => Godhigh, R. rush for 18 yards to the DU44, 1ST DOWN GT (Cockrell, R). [spot] => GT38 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [4] => Array ( [text] => Lee, V. pass complete to Greene, J. for 5 yards to the DU39 (Foster, T). [spot] => DU44 [ball] => GT [togo] => 10 [type] => P [drive] => 7 ) [5] => Array ( [text] => Laskey, Z. rush for 9 yards to the DU35 (Sink, N). [spot] => DU44 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [6] => Array ( [text] => Laskey, Z. rush for 5 yards to the DU30, 1ST DOWN GT (Canty, W;France, C). [spot] => DU35 [ball] => GT [togo] => 1 [type] => R [drive] => 7 ) [7] => Array ( [text] => Laskey, Z. rush for 4 yards to the DU26 (Sink, N). [spot] => DU30 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [8] => Array ( [text] => Lee, V. rush for 3 yards to the DU23 (Brown, Ky). [spot] => DU26 [ball] => GT [togo] => 6 [type] => R [drive] => 7 ) [9] => Array ( [text] => Laskey, Z. rush for 5 yards to the DU18, 1ST DOWN GT (Canty, W). [spot] => DU23 [ball] => GT [togo] => 3 [type] => R [drive] => 7 ) [10] => Array ( [text] => Smith, O. rush for 8 yards to the DU10 (France, C). [spot] => DU18 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [11] => Array ( [text] => Lee, V. rush for 4 yards to the DU6, 1ST DOWN GT (France, C). [spot] => DU10 [ball] => GT [togo] => 2 [type] => R [drive] => 7 ) [12] => Array ( [text] => Laskey, Z. rush for 3 yards to the DU3 (Helton, D;Woodruff, J). [spot] => DU06 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [13] => Array ( [text] => Laskey, Z. rush for no gain to the DU3 (Woodruff, J;Brown, Ky). [spot] => DU03 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [14] => Array ( [text] => Smith, O. rush for 1 yard to the DU2 (France, C). [spot] => DU03 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [15] => Array ( [text] => Lee, V. rush for 2 yards to the DU0, TOUCHDOWN, clock 04:34\. [spot] => DU02 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [16] => Array ( [text] => Tanner, C. kick attempt good. [spot] => DU03 [ball] => GT [togo] => 0 [type] => X [drive] => 7 ) [17] => Array ( [text] => Tanner, C. kickoff 51 yards to the DU14, Butler, L return 16 yards to the DU30 (Noble, D.). [spot] => GT35 [ball] => GT [togo] => 0 [type] => K [drive] => 7 ) ) 
```

# android - 如何在某些事件的给定设置中重用 ListFragement

> ID：15709839
> 
> 赞同：0
> 
> 时间：2013-03-29T19:05:55.383
> 
> 标签：android

这就是我所拥有的

1.  XListActivity.class 它膨胀LinearLayout并创建一个Fragment，YListFragment

2.  YListFragment.class 从 xml 膨胀 LsitView 并设置一个扩展基本适配器的适配器

现在在某些事件（例如 onClick）上，我想重用相同的片段和 ListView 不同的数据集。

如果我在 XListActivity 中处理 OnClick() 事件，那么我没有在 yListFragment 中创建的 ListView 和 Adapter 的引用。我需要他们清空适配器。我想避免静态引用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:29:57.973

您可以使用标签或 id 获取您的片段`FragmentManager`。

```
YListFragment fragment = (YListFragment)getFragmentManager().findFragmentByTag("ylistfragment");
fragment.somePublicMethodInYListFragment(); 
```

Activity -> Fragment 和 Fragment -> Activity 沟通指南在[此概述](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

# jquery - jQuery 自动完成除了填充自己的字段外，什么都做

> ID：15709841
> 
> 赞同：1
> 
> 时间：2013-03-29T19:05:56.407
> 
> 标签：jquery, autocomplete

我有一个带有自动完成功能的简单文本输入：

```
<input type="text" class="span4" id="autoc1" name="agent" value=""> 
```

我正在使用以下 jquery 代码来执行自动完成并带回数据。然后单击一下，我想用返回的数据填充两个输入。除了没有填充自动完成的实际字段之外，一切都按原样工作。

查询：

```
$(function() {
    // input id of field with autoc on        
    $( "#autoc1" ).autocomplete({

        // php mysql data get
        source: "/pages/includes/getAgent.php",            
        minLength: 2,

        select: function( event, ui ) {
            //alert(ui.item.agent_name); //  shows correct info, here only to test

            //tried $(this) as below - didn't work
            //$(this).val(ui.item.agent_name);

              $('#autoc1').val(ui.item.agent_name); //  tried with and without this, didn't work
              $('#comm').val(ui.item.commission_percent); // this works perfectly!!
        }
    }).data( "ui-autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li>" )
        .append( "<a>" + item.agent_name + "</a>" )
        .click(function(){$('#autoc1').val(item.agent_name)}) // added this. didn't work
        .appendTo( ul );
    };
}); 
```

如果有帮助，这是返回的 JSON：

```
[{"0":"agent a","agent_name":"agent a","1":"15","commission_percent":"15"},
{"0":"agent b","agent_name":"agent b","1":"10","commission_percent":"10"}] 
```

完全没有想法！

**编辑**

更多html，基本形式，简单

```
<form class="add_booking" method="post">

    <input type="text" placeholder="Date" class="span2" id="datepicker" name="date" value="<?=$showDate?>">

    <input type="text" placeholder="Booking Agent" class="span4 here" id="autoc1" name="agent" value="<?=$ds['agent']?>">

    <input type="text" placeholder="15" class="span1" name="commission" id="comm" value="<?=$ds['show_comm_percent']?>">%

etc etc </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:17:26.213

在您正在执行的代码部分中：

```
data( "ui-autocomplete" )._renderItem 
```

您正在搞乱 jQuery 自动完成的内部数据和功能。你不应该那样做。

我认为它不起作用的原因是您将无效的东西传递给自动完成：

> 支持的格式有两种： 字符串数组：[ "Choice1", "Choice2" ] 具有标签和值属性的对象数组：[ { label: "Choice1", value: "value1" }, ... ]

但是您正在传递自定义数据。为此（不干预 Autocomplete 自己的函数），您应该使用函数数据源：

```
Function: The third variation, a callback, provides the most flexibility and can be used to connect any data source to Autocomplete. The callback gets two arguments:
A request object, with a single term property, which refers to the value currently in the text input. For example, if the user enters "new yo" in a city field, the Autocomplete term will equal "new yo".
A response callback, which expects a single argument: the data to suggest to the user. This data should be filtered based on the provided term, and can be in any of the formats described above for simple local data. It's important when providing a custom source callback to handle errors during the request. You must always call the response callback even if you encounter an error. This ensures that the widget always has the correct state. 
```

给出的例子是：

```
$( "#autocomplete" ).autocomplete({
  source: function( request, response ) {
          var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
          response( $.grep( tags, function( item ){
              return matcher.test( item );
          }) );
      }
}); 
```

当您从服务器获取数据时，您需要在对服务器进行 ajax 调用时存储响应函数，并在返回数据时调用它。

但是，如果您想在使用自定义数据格式并覆盖内部函数时继续使用您的版本，为了使其工作，您可以添加`return false`到 select 函数。

```
select: function( event, ui ) {
    $('#autoc1').val(ui.item.agent_name); //  tried with and without this, didn't work
    $('#comm').val(ui.item.commission_percent); // this works perfectly!!
    return false;
} 
```

这样做的原因是您现在正在手动设置字段的值，并且返回 false 会阻止自动完成尝试设置字段本身的值（并且由于不知道将字段设置为什么而失败）。

我知道的原因是我希望我的应用程序中的自动完成功能能够自动提交选定的值，就像用户在选择值后按下回车一样。这样做的方法是：

```
autocompleteSelect: function(event, suggestItems){
    var suggestItem = suggestItems.item;
    $(this.element).find('.tagInput').val(suggestItem.value);
    $(this.element).find('.tagInput').blur(); //This triggers the onchange function elsewhere
    $(this.element).find('.tagInput').val("");
    event.stopPropagation();
    return false;
}, 
```

# javascript - Destroy Backbone views on route change

> ID：15709844
> 
> 赞同：4
> 
> 时间：2013-03-29T19:06:07.490
> 
> 标签：javascript, jquery, backbone.js, backbone-views, backbone-routing

My view should be destroyed after the current route position is left.

So in this schematic example the login view should be destroyed after the user entered his credentials:

![Routes](../Images/4448807333b564f26561be8e22fd44a8.png)

I tried to solve this by using `Backbone.Router` events:

```
var Router = Backbone.Router.extend({
    initialize: function () {
        Backbone.history.start();
    },
    routes: {
        "sample" : "sample"
    },
    sample: function(){
      // Build view
      var demoView = $("<div/>")
          .appendTo(document.body)  
          .text("I am lost!");

      // Destroy view
      this.once('route', function(){
        demoView.remove(); 
      });
    },
}); 
```

Unfortunately this does not work as the route events are raised **after** the routes are executed:

[http://jsfiddle.net/hcuX9/](http://jsfiddle.net/hcuX9/)

Is there a solution to destroy views after leaving the route position?

Do I have to [hack a new event](http://jsfiddle.net/hcuX9/1/) into Backbone.js?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:41:30.053

我用来做的是让一个`App.current`变量指向正在渲染的当前视图。

在每条路线的顶部（或您的情况下的相关路线），我从中删除当前视图`App.current`，然后为其分配新视图：

```
someRoute: function() {
  if(App.current && App.current.remove) App.current.remove();  

  // Asign a new current page
  App.current = new SomeView();
  ...
} 
```

这样，我只让每条路线的一个视图直播，摆脱像你这样的问题。

如果您不喜欢`App.current`在每条路由的顶部检查和调用 remove 方法，您可以侦听 Backbone.history 路由事件并在那里注入该逻辑：

```
Backbone.history.on('route', function() {
  if(App.current && App.current.remove) App.current.remove();  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:48:53.797

我认为你被你的黑客所困扰，除非你可以根据你的需要调整 .listenTo - 那么你将需要在你有路由更改的任何地方使用 .trigger 触发一个自定义事件，这可能是不可能的。请注意，之前在骨干网中已请求（并拒绝）此功能：

[https://github.com/documentcloud/backbone/pull/494](https://github.com/documentcloud/backbone/pull/494)

查看其他试图做同样事情的补丁的拉取请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:39:25.207

在这里，我们使用`on`and`off`来监听传入的路由事件，而不是`once`因为我们不能依赖单个事件*而不是*当前路由。当我们收到一个即使不是我们当前路由的路由时，我们也可以销毁视图并移除监听器：

```
 // Destroy view
  var self = this;
  var onRoute = function(route, params){
    if(route !== 'sample'){
      demoView.remove();
      self.off('route', onRoute);
    }
  };
  this.on('route', onRoute); 
```

我在这里修改了你的测试小提琴：http: [//jsfiddle.net/rgthree/hcuX9/3/](http://jsfiddle.net/rgthree/hcuX9/3/)

* * *

**另一种选择，**因为您的小提琴（不在您的问题中）直接导航到另一个视图。这会导致在 sample2 路由*之后*触发其他路由的事件。因此，上述内容将删除该视图。现在，它更加完整。您可以处理它的一种更简单的方法是简单地推迟`once`in a `setTimeout`，这样它直到当前路由被触发后才会监听：

```
// Destroy view
var self = this;
setTimeout(function(){        
  self.once('route', function(){
    demoView.remove(); 
  });
}, 0); 
```

你可以在这里看到你的小提琴：http: [//jsfiddle.net/rgthree/hcuX9/4/](http://jsfiddle.net/rgthree/hcuX9/4/)

# java - Ensuring MAVEN_HOME is set correctly

> ID：15709845
> 
> 赞同：2
> 
> 时间：2013-03-29T19:06:23.843
> 
> 标签：java, eclipse, maven, intellij-idea, maven-3

A Java and Maven noob here:

Using OSX 10.8

And Installed Maven with HomeBrew

1- If I say `which mvn` I will get this: `/usr/local/bin/mvn`

2- If I say `echo $MAVEN_HOME` I will get nothing back.

3- If I go to my Maven Installation on EClipse it will look like this:

![enter image description here](../Images/90551b6cf77253f333253a24ab940e98.png)

4- If I go to Maven settings in IntelliJ, it will look like this: So far I have been able to run Maven goals with IntelliJ.

![enter image description here](../Images/769379eadb874769387031623b4ce8ba.png)

Ok That's all I have. Can you please take a look and see what are the inconsistencies I am having and what things to fix to set this correctly everywhere?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:17:26.513

在 Mac OS X 下，您应该在`/etc/launchd.conf`. launchd 加载的变量在您的 shell 以及 Intellij IDEA 等 GUI 应用程序中都可用。

Intellij IDEA 将使用 M2_HOME 来查找 Maven 安装。编辑或创建`/etc/launchd.conf`：

```
setenv M2_HOME /usr/share/maven 
```

不幸的是，要看到效果，您必须重新启动机器。另一个缺点是，您不能在文件中使用空格。这意味着，您不能将 MAVEN_OPTS 设置为[多个 value](https://stackoverflow.com/questions/2519292/setenv-variable-with-spaces-in-launchd-conf)。

# ios - Facebook get user status

> ID：15709846
> 
> 赞同：1
> 
> 时间：2013-03-29T19:06:30.250
> 
> 标签：ios, facebook, facebook-graph-api

In my iOS application, I am trying to implement Facebook but am running into a problem. I currently have the user logging in as well as I have implemented the friend picker. I am looking to now have it so when the user taps a friend it will show their status(last post in their feed. e.g.."In NYC on broadway!"). I did a lot of research online but am getting very confused. If someone could point me to good tutorial or could just explain this that would be great. I believe I have to use open graph but other then Facebook's tutorials I can't find any. Are there any tutorials other than on FB?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:29:53.067

`/<userId>/feed`您可以通过调用( [https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Ffeed](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Ffeed) )访问用户的提要。然后，查找`data`数组 where的第一个元素`"type": "status"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:17:30.067

我认为您正在寻找的答案在[这里](https://stackoverflow.com/questions/5479819/facebook-graph-api-get-all-users-and-their-status)，除了您将基本上（我假设）显示朋友列表及其个人资料照片。单击个人资料图片时，用户会看到他们的状态吗？或者您可以尝试一次完成所有操作（朋友姓名、照片、朋友的最后状态）。他们在该帖子中引用的 facebook 开发者 url 在[这里](https://developers.facebook.com/docs/reference/api/batch/)

# jquery - How to Fade Out an Element when Another Element Fade in

> ID：15709848
> 
> 赞同：-1
> 
> 时间：2013-03-29T19:06:33.607
> 
> 标签：jquery, html, css

Right now the code that I am using to try and get this to work does not seem to function correctly. h7 represents the element that is fading in while the class of back is the element that is going to fade out when h7 fades in. I hope to get this to work both ways

```
if ($("h7").css("display", "block")) {
    $(".back").hide("fast");
}           
else if ($("h7").css("display", "none")) {
    $(".back").show(500);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:09:10.163

You are using `css` as setter which returns a jQuery object and an object is always `true` in JavaScript, you can use `:visible` selector and `is` method.

```
if ($("h7").is(":visible")) {
    $(".back").hide("fast");
}
else {
    $(".back").show(500);
} 
```

Note that `h7` is not valid element.

# entity-framework - 我可以从指定的迁移中解码 EntityFramework 模型吗？

> ID：15709849
> 
> 赞同：18
> 
> 时间：2013-03-29T19:06:40.513
> 
> 标签：entity-framework, entity-framework-5

显然 IMigrationMetadata.Target 编码了 EF 模型的状态。我可以使用它来重建特定迁移的模型吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-30T19:04:05.173

是的，有可能。我自己很好奇那些魔法资源字符串到底存储了什么。通过[深入研究 Entity Framework 源代码](http://entityframework.codeplex.com/SourceControl/changeset/view/32435ee2f8774d62562ec31067a7abca670d083c#src/EntityFramework/Migrations/DbMigrator.cs)（参见`DbMigrator.GetLastModel()`方法），我发现它`IMigrationMetadata.Target`只是存储了一个包含 gzip 压缩 XML 数据的 base-64 字符串。为了测试这一点，我创建了一个新的控制台应用程序，其中包含一个简单的代码优先模型，定义如下：

```
public class ContactContext : DbContext
{
    public virtual IDbSet<Contact> Contacts { get; set; }
}

public class Contact 
{
    public int Id {get; set;}
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

然后我使用 NuGet 包管理器控制台创建了一个迁移：

```
PM> Enable-Migrations
PM> Add-Migration MyMigration 
```

接下来，我将以下代码添加到我的应用程序的`Main()`方法中，以解码该字符串中的值并将其转储到控制台：

```
var migration = new MyMigration();
var metadata = (IMigrationMetadata)migration;
var compressedBytes = Convert.FromBase64String(metadata.Target);
var memoryStream = new MemoryStream(compressedBytes);
var gzip = new GZipStream(memoryStream, CompressionMode.Decompress);
var reader = new StreamReader(gzip);
Console.WriteLine(reader.ReadToEnd()); 
```

这将[输出一个 EDMX 文件](https://gist.github.com/lasandell/5277787)`DbContext`，该文件表示与创建迁移的我相关联的实体数据模型。如果我将此输出写入具有`.edmx`扩展名的文件，我可以使用 Visual Studio 打开它并在实体设计器中查看它。

然后，如果出于某种原因我想重新生成`DbContext`生成模型的实体类，我只需要执行以下操作：

1.  将`.edmx`文件添加到 Visual Studio 项目。
2.  如果我还没有，请安装[适用于 C# 的 EF 5.x DbContext Generator 。](http://visualstudiogallery.msdn.microsoft.com/da740968-02f9-42a9-9ee4-1a9a06d896a2)
3.  `Add -> New Item`通过从项目节点上下文菜单中选择来添加相关的 T4 模板。
4.  修改新添加的`.tt`文件，替换`$edmxInputFile$`为我的`.edmx`文件名。
5.  看着这两个模板神奇地将我的代码优先类型重新生成到它们各自的`.cs`文件中。

希望这能回答你的问题！:-D

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-10T11:25:30.337

[我创建了一个小型控制台应用程序，用于从 __MigrationHistory 表https://github.com/andreydil/EfMigrationModelDecoder](https://github.com/andreydil/EfMigrationModelDecoder)的 Model 列导出 EDMX
您可以使用参数选择特定的迁移`/migration`，即：

```
EfMigrationModelDecoder.Cli.exe "<connectionString here>" /migration:Init 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-28T23:57:19.127

我创建了一个 PowerShell 脚本来提取从数据库到 edmx 文件的最新迁移。

[https://gist.github.com/otto-gebb/93d021c8fd300646dba0073a77585a94](https://gist.github.com/otto-gebb/93d021c8fd300646dba0073a77585a94)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-06T12:34:34.830

您还可以使用 SQL...

```
SELECT CONVERT(xml, DECOMPRESS(Model)) FROM [dbo].[__MigrationHistory] WHERE MigrationId = 'NameOfMigration' 
```

# sed - Use Sed to Update Text in Bourne Shell

> ID：15709857
> 
> 赞同：0
> 
> 时间：2013-03-29T19:07:20.127
> 
> 标签：sed, sh

I'm trying to update a file in Bourne Shell. The user inputs a name and then is prompted to change the persons name, age and courses. Here's part of the code I've written:

```
 echo "please enter the name: \c"
   read updateInput

   updateNumber=$(grep -cwi "$updateInput" database.txt)
   updateRecord=$(grep -i "$updateInput" database.txt)

   test=$(! grep -i "$updateInput" database.txt)

   if [ "$updateNumber" -gt "1" ]
   then
          echo "ambiguous input"
   elif [ "$updateRecord" = "" ]
   then
           echo "record not found"
   else
           lineNumber=$(grep -ni $updateInput database.txt | cut -f1 -d:)

           grep -i $updateInput database.txt > tmp
           read first last age course1 course2 < tmp

           echo "record found, enter new value now:"
           echo "name ($first $last): \c" 
           read uFirst uLast
           if [ "$uFirst" != "" ]
           then
                   sed "$lineNumber s/$first/$uFirst/" database.txt
           fi
           if [ "$uLast" != "" ]
           then
                   sed "$lineNumber s/$last/$uLast/g" database.txt
           fi 
```

When run, sed outputs the correct output with the right things changed, but it doesn't actually update the database file at all. I've tried googling all sorts of things, but nothing is working. If someone could point me in the right direction, that would be awesome. Thanks so much :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:14:25.350

如果这是 GNU `sed`，您可以使用该`-i`选项来编辑文件：

```
sed -i "$lineNumber s/$first/$uFirst/" database.txt 
```

否则，您需要将 sed 输出捕获到一个临时文件中，然后将其复制到原始文件上。

# database - 如果 postgres 中的语句抛出错误

> ID：15709861
> 
> 赞同：1
> 
> 时间：2013-03-29T19:07:31.830
> 
> 标签：database, postgresql, if-statement

我正在尝试对此发表声明：

```
IF EXISTS (SELECT * FROM LeadCustomer WHERE FirstName = 'John' AND Surname = 'Smith') THEN
    SELECT * FROM LeadCustomer WHERE FirstName = 'John' AND Surname = 'Smith';
ELSE 
    INSERT INTO LeadCustomer (Firstname, Surname, BillingAddress, email) VALUES ('John', 'Smith', '6 Brewery close, Buxton, Norfolk', 'cmp.testing@example.com');;
END IF; 
```

它抛出错误：

> 错误：“IF”处或附近的语法错误

我发现[了这个问题](https://stackoverflow.com/questions/11299037/postgresql-if-statement)，但这些答案中建议的格式似乎也不起作用。想知道是否有人能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:13:59.007

`If`是 plpgsql 语言的一部分。它只能在 plpgsql 函数中工作：

[http://www.postgresql.org/docs/current/interactive/plpgsql.html](http://www.postgresql.org/docs/current/interactive/plpgsql.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:19:02.607

您正在寻找[CASE](http://www.postgresql.org/docs/7.4/static/functions-conditional.html)表达式。

# java - how to automatically start new song after old one ends

> ID：15709863
> 
> 赞同：0
> 
> 时间：2013-03-29T19:07:36.470
> 
> 标签：java, swing, audio, mp3

I am making an MP3 player but my problem is I cant automatically start a new song after the old one is finished. I have tried using isComplete()

Then I tried finding the length of the song and using thread.sleep() and I set it as the same length as my song so when the song is over a new one starts and it worked, the only problem is I cant click on any buttons and when i try to exit nothing happens, the song keeps playing and a new one will start but the window freezes

If you could help that would be great (The problem is around line 312)

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import java.util.concurrent.*;
import java.util.logging.*;
import java.lang.reflect.Array;
import java.lang.reflect.Method;
import java.net.*;

import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.UnsupportedAudioFileException;
import javax.swing.*;

import javazoom.jl.player.Player;
import javazoom.spi.mpeg.sampled.file.MpegAudioFileReader;

public class PPR extends JPanel{

private static long startTime;
private static long stopTime;
static int ms;

static int songnumber = 0;
static String song;
static Long duration;
//Above is the song number and the path
static File test = new File ("C:/Users/cmtc/Documents/WorkSpace/Mp3 Player/music/aa.mp3");

static File[] files = new File("music").listFiles();
static LinkedList songnames = new LinkedList();
//above is the array that gets all of the files and the linked list that gets all the names

 private final static int NOTSTARTED = 0;
 private final static int PLAYING = 1;
 private final static int PAUSED = 2;
 private final static int FINISHED = 3;
    //above tell the player what is happening

    private final Object playerLock = new Object();
    //not sure if i need above

    private static int playerStatus = NOTSTARTED;
    //above starts off by saying the player hasnt started yet

static JFrame f = new JFrame();
static JPanel p = new JPanel();
static String filename = "this string doesnt matter";

//above is the jpanel and jframe

 static FileInputStream input; 
 static MP3 player; 
 //above allows for file io and the mp3 player

    static Runnable Graphic = new Runnable() {
     public void run() {
         gui();
     }
 };

 // I had to make threads so that more than one button is visible

 public static void invokeLater(Runnable doRun){
     SwingUtilities.invokeLater(Graphic);
}

 //above is what allows multiple buttons to be visible

public PPR(){

    SwingUtilities.invokeLater(Graphic);
}

//above is similar to what is above this

public static void gui(){
    f.setVisible(true);
        f.setSize(1600,900);
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(p);

    PlayPauseRewind();

}

//above is baseically what runs the three buttons

public static void PlayPauseRewind(){

    Object play = ppr(80,26,25,25,"pics/play.jpg");

    ((AbstractButton) play).addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            startTime = e.getWhen();
            if (playerStatus == PLAYING){
                pause();
                playerStatus = PAUSED;
            }else if (playerStatus == NOTSTARTED){
                 play();
                 playerStatus = PLAYING;
            }else if (playerStatus == PAUSED){
             resume();
             playerStatus = PLAYING;
        }

        }

    });

    //above is play ***************************************

    Object next = ppr(120,26,25,25,"pics/next.png");
    ((AbstractButton) next).addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            if (songnumber == files.length-1){
                System.out.println("No More songs");
            }else if (playerStatus == NOTSTARTED){
                play();
                playerStatus = PLAYING;
                pause();
                 playerStatus = PAUSED;
                 songnumber++;
                 play();
                    playerStatus = PLAYING;
                System.out.println(songnumber);
            }else if (playerStatus == PAUSED){
                songnumber++;
                play();
                pause();
                playerStatus = PAUSED;
                System.out.println(songnumber);
            }else{
            stop();
            songnumber++;
            System.out.println(songnumber);

            //above tells the next button what to do below is the try/catch

            try {
                input = new FileInputStream(allsongs(songnumber,song)); 
                player = new MP3(input);

                // start playing
                player.play();

                // after 5 secs, pause

            } catch (final Exception e1) {
                throw new RuntimeException(e1);
            }
            playerStatus = PLAYING;
            }   
        }
    });

    Object back = ppr(40,26,25,25,"pics/back.png");
    ((AbstractButton) back).addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            if (songnumber == 0){
                System.out.println("No More songs");
            }else if (playerStatus == NOTSTARTED){
                play();
                playerStatus = PLAYING;
                pause();
                 playerStatus = PAUSED;
                 songnumber--;
                 play();
                    playerStatus = PLAYING;
                System.out.println(songnumber);
            }else if (playerStatus == PAUSED){
                songnumber--;
                play();
                pause();
                playerStatus = PAUSED;
                System.out.println(songnumber);
            }else{
            stop();
            songnumber--;
            System.out.println(songnumber);

            //above tells the back button what to do below is the try/catch

            try {
                input = new FileInputStream(allsongs(songnumber,song)); 
                player = new MP3(input);

                // start playing
                player.play();

                // after 5 secs, pause

            } catch (final Exception e1) {
                throw new RuntimeException(e1);
            }
            playerStatus = PLAYING;
            }   
        }
    });

}

public static Object ppr(int x, int y, int width, int height, String file){
    p.setLayout(null);      

    Toolkit tool = Toolkit.getDefaultToolkit();
        Image player = tool.getImage(file);
            ImageIcon playbutton = new ImageIcon(player);

    JButton play = new JButton(playbutton);
        play.setBounds(x, y, width, height);

            return p.add(play);

            //above is a method that makes creating buttons very easy
}

public static void play(){
    startTime = System.currentTimeMillis();
    try {
        input = new FileInputStream(allsongs(songnumber,song)); 
        player = new MP3(input);

        player.play();

    } catch (final Exception e) {
        throw new RuntimeException(e);
    }
    playerStatus = PLAYING;

    nextsong();

}

//above is the play method

public static void pause(){
    try {

        // start playing
        player.pause();

        // after 5 secs, pause

    } catch (final Exception e) {
        throw new RuntimeException(e);
    }
    playerStatus = PAUSED;
}
//above is the pause method

public static void resume(){
    try {

        // start playing
        player.resume();

        // after 5 secs, pause

    } catch (final Exception e) {
        throw new RuntimeException(e);
    }
}

public static void length(){

    long size = files[songnumber].length();
    AudioFileFormat baseFileFormat;
    int ms = 0;
    try {
        baseFileFormat = new MpegAudioFileReader().getAudioFileFormat(files[songnumber]);
        Map properties = baseFileFormat.properties();
        duration = (Long) properties.get("duration");
        duration = duration/1000;
        ms = (int) (duration/10);
        System.out.println(ms);
        //System.out.println(size);
    } catch (UnsupportedAudioFileException | IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

//ABOVE AND BELOW IS WHERE I AM TRYING TO FIX IT;

public static void nextsong(){
    length(); 
    try {
        Thread.sleep(duration);
        stop();
        songnumber++;
        play();
        playerStatus=PLAYING;

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static void stop(){
    try {

        player.stop();

    } catch (final Exception e) {
        throw new RuntimeException(e);
    }
}

//above is the resume method

public static void temp(){
    JOptionPane.showMessageDialog(null, "Action Listener is working");
}
//above is what I use to make sure the actionlistener is working I wont need it eventually

public static String allsongs(int songnumber,String song){
            for (int i = 0; i<files.length;i++){

            songnames.add("music/" + files[i].getName());   

            song = (String) songnames.get(songnumber);

        }
            return song;
    }

//above is the loop that goes through the folder and names everysong while         assigning it a song number

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:26:18.760

您正在使用某种 MP3 播放器，我无法追踪它的来源，因为我找不到匹配的导入语句：

```
 player = new MP3(input);

 player.play(); 
```

最常见的做法是为播放器添加一个监听器（如果你的 MP3 类支持它），比如

```
player.addXXXListener(new XXXListener(){}); 
```

XXXlistener 将有一个在播放完毕后被调用的方法，在该方法中您可以开始下一首歌曲。

所以这取决于你的 MP3 类支持什么。

# python - 使用 Python 将文本插入到特定文本之后的文本文件中

> ID：15709864
> 
> 赞同：4
> 
> 时间：2013-03-29T19:07:37.830
> 
> 标签：python, text

我必须编辑一些文本文件以包含新信息，但我需要根据周围的文本在文件的特定位置插入该信息。

这不像我需要的那样工作：

```
 with open(full_filename, "r+") as f:
        lines = f.readlines() 
        for line in lines:
            if 'identifying text' in line:   
                offset = f.tell()
                f.seek(offset)  
                f.write('Inserted text') 
```

...因为它将文本添加到文件的末尾。我将如何将其写入识别文本之后的下一行？

（AFAICT，这不是类似问题的重复，因为没有一个能够提供这个答案）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T19:19:04.950

如果您不需要就地工作，那么可能是这样的：

```
with open("old.txt") as f_old, open("new.txt", "w") as f_new:
    for line in f_old:
        f_new.write(line)
        if 'identifier' in line:
            f_new.write("extra stuff\n") 
```

（或者，与 Python-2.5 兼容）：

```
f_old = open("old.txt")
f_new = open("new.txt", "w")

for line in f_old:
    f_new.write(line)
    if 'identifier' in line:
        f_new.write("extra stuff\n")

f_old.close()
f_new.close() 
```

哪个转

```
>>> !cat old.txt
a
b
c
d identifier
e 
```

进入

```
>>> !cat new.txt
a
b
c
d identifier
extra stuff
e 
```

（关于在 'string2' 中使用 'string1' 的常见警告：'name' in 'name' is True，'hello' in 'Othello' is True，等等，但显然你可以使条件任意复杂。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:45:58.173

您可以使用正则表达式，然后替换文本。

```
import re
c = "This is a file's contents, apparently you want to insert text"
re.sub('text', 'text here', c)
print c 
```

返回“这是一个文件的内容，显然你想在此处插入文本”

不确定它是否适用于您的用例，但如果适合，它会很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-22T13:26:08.633

这将在文件中查找任何字符串（不具体，仅位于行首，即也可以存在于多行中）。

通常，您可以遵循以下算法：

1.  在文件中查找字符串，并捕获“位置”
2.  然后拆分有关此“位置”的文件，并尝试将新文件创建为
    *   将 start-to-loc 内容写入新文件
    *   接下来，将您的“NEW TEXT”写入新文件
    *   接下来，将内容定位到新文件

让我们看看代码：

```
#!/usr/bin/python

import os

SEARCH_WORD = 'search_text_here'
file_name = 'sample.txt'
add_text = 'my_new_text_here'

final_loc=-1
with open(file_name, 'rb') as file:
        fsize =  os.path.getsize(file_name)
        bsize = fsize
        word_len = len(SEARCH_WORD)
        while True:
                found = 0
                pr = file.read(bsize)
                pf = pr.find(SEARCH_WORD)
                if pf > -1:
                        found = 1
                        pos_dec = file.tell() - (bsize - pf)
                        file.seek(pos_dec + word_len)
                        bsize = fsize - file.tell()
                if file.tell() < fsize:
                                seek = file.tell() - word_len + 1
                                file.seek(seek)
                                if 1==found:
                                        final_loc = seek
                                        print "loc: "+str(final_loc)
                else:
                                break

# create file with doxygen comments
f_old = open(file_name,'r+')
f_new = open("new.txt", "w")
f_old.seek(0)
fStr = str(f_old.read())
f_new.write(fStr[:final_loc-1]);
f_new.write(add_text);
f_new.write(fStr[final_loc-1:])
f_new.close()
f_old.close() 
```

# java - 如何在 Java GUI 中添加地图（如 C# 的 GMap.net）？

> ID：15709870
> 
> 赞同：1
> 
> 时间：2013-03-29T19:07:56.007
> 
> 标签：java, maps

C# 有一个很好的库/api 用于创建/使用带有在[Gmap.net](http://greatmaps.codeplex.com/)上找到的 winforms 的地图java 有这样的库吗？

我发现的最接近的东西是[worldwind](http://worldwind.arc.nasa.gov/java/)但这看起来不如 GMap.net 在 winforms 中的一半好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:38:42.027

这些库可能会有所帮助

*   通用 Swing 组件：[https ://github.com/msteiger/jxmapviewer2](https://github.com/msteiger/jxmapviewer2)
*   与 JavaFX 集成：http: [//fxexperience.com/2011/05/maps-in-javafx-2-0/](http://fxexperience.com/2011/05/maps-in-javafx-2-0/)

# python - 将返回的 urlopen() 转换为浮点数

> ID：15709872
> 
> 赞同：1
> 
> 时间：2013-03-29T19:07:59.393
> 
> 标签：python

试图让它工作，但继续得到“ValueError：无法将字符串转换为浮点数：”错误。我试过 read() 和 readline() 但无法弄清楚。

谢谢您的帮助！

```
from urllib2 import urlopen
current_time = urlopen("http://just-the-time.appspot.com/?f=%t")
print current_time.readline()

future = float(current_time.readline()) + 30
print "future" + future 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:09:29.560

您*之前已经*阅读了该行的值。只读*一次*：

```
current_time = urlopen("http://just-the-time.appspot.com/?f=%t")
current_time = current_time.read()

future = float(current_time) + 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:11:54.310

你的第一个电话`current_time.readline()`是吃掉整个回应。第二次调用它只返回一个空字符串。像这样写：

```
now = current_time.readline()
future = float(now) + 30 
```

# vb.net - 使用 VB.Net 将数字格式化为货币

> ID：15709876
> 
> 赞同：3
> 
> 时间：2013-03-29T19:08:11.957
> 
> 标签：vb.net, formatting, currency

我今天为您解决了一个简单的问题，它已经花费了我一天的时间，但没有真正的成就。我正在尝试格式化数字以显示为货币。有很多方法可以做到这一点，我想我已经完成了大部分。

所以这就是问题所在：我正在添加多个可以是正数和负数的数字，我不知道。当我最后使用 格式化时`TextBox.Text = Format(variable, "C")`，我得到了正数的正确格式（例如`123 456,00 $`，我住在加拿大），而我有`(123 456,00 $)`负数。我宁愿在开头使用“-”符号。

我在网上搜索以找到其他方法来做到这一点，例如： `FormatCurrency("-123 456", 2, TriState.True, TriState.False)`。这样我就可以去掉括号，但“-”在数字之后`(123 456,00 $-)`。

下一个：`SpecificCulture`。所以我在这里`NegativeValueHere.ToString("C", CultureInfo.CreateSpecificCulture("fr-CA"))`。有了这个，我又回到了开头的括号中`(123 456,00 $)`。请注意，我的应用程序在文化设置下运行，`("fr-CA")`因为那是我居住的地方。

我又试了一次，但不记得是什么了。但是“$”在数字前面，例如`$-123 456,00`。

注意：我在 VB.Net 上运行，并且必须将数字格式化为放入 readonly `TextBox`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:52:28.107

You can create your own culture with a custom pattern for negative currency values. Take a look at the MSDN library article for NumberFormatInfo.CurrencyNegativePattern. For example:

```
Imports System.Globalization

Module Module1
    Sub Main()
        Dim simon = DirectCast(CultureInfo.GetCultureInfo("fr-CA").Clone, CultureInfo)
        simon.NumberFormat.CurrencyNegativePattern = 1
        Dim test = -1234.567
        Console.WriteLine(test.ToString("C", simon))
        Console.ReadLine()
    End Sub
End Module 
```

Output: -$1 234,57

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T19:42:17.933

这似乎对我有用：

```
Sub Main()
    Dim value As Decimal = -123.45
    Dim positiveValue As Decimal = 123.45
    Dim customCurrencyInfo As CultureInfo = CultureInfo.CreateSpecificCulture("fr-CA")

    customCurrencyInfo.NumberFormat.CurrencyNegativePattern = 8

    Dim formatString As String = value.ToString("C", customCurrencyInfo)
    Dim formatStringPositive As String = positiveValue.ToString("C", customCurrencyInfo)

    Console.WriteLine(formatString) '-123,45 $
    Console.WriteLine(formatStringPositive) '123,45 $
    Console.ReadLine()

End Sub 
```

`NumberFormat.CurrencyNegativePattern`您可以从此链接获取不同的模式值[。](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern.aspx)

对不起，如果我跑题了

# ms-access-2007 - extract similar record from two tables

> ID：15709877
> 
> 赞同：1
> 
> 时间：2013-03-29T19:08:16.137
> 
> 标签：ms-access-2007

I have two tables in access and both conttains numbers (1057, 1045, 4252, etc.) I would like to pull the similar records that is in both tables. For instance if table x has record 1057 and table y also includes 1057 than I want to see those records. Any help would be greatly appreciated. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:14:13.043

```
select t1.*,t2.* from table1 as t1
inner join table2 as t2 on (t1.COMMONCOLUMNID = t2.COMMONCOLUMNID) 
```

已编辑

```
select * from TableName where DiscreteUID in (select predecessor from TableName) 
or
DiscreteUID in (select successor from TableName) 
```

已编辑

```
 (select DiscreteUID, 1 as IsPredecessor, 0 as IsSuccessor from TableName where DiscreteUID in (select predecessor from TableName))

UNION
    (select DiscreteUID, 0 as IsPredecessor, 1 as IsSuccessor from TableName where DiscreteUID in (select successor from TableName)) 
```

# c++ - 如何从实体组件系统中的子类访问属性

> ID：15709880
> 
> 赞同：2
> 
> 时间：2013-03-29T19:08:25.100
> 
> 标签：c++, components, system, entities, subclass

我刚刚开始为横向卷轴游戏开发实体组件系统。

我对 C++ 很陌生，但我已经阅读了很多教程，并决定最好的方法是拥有一个包含组件向量的实体类。然后会有一个基本组件类，其中包含实际组件子类。

实体.h：

```
#ifndef _ENTITY_H
#define _ENTITY_H

#include "header.h"

class Entity

{

public:
    Entity();
    ~Entity();

    // Vector which stores all added components
    vector<Component*> Components;

    // Add component method
    void AddComponent(Component* component);

};

#endif 
```

实体.cpp：

```
#include "header.h"
#include "Component.h"
#include "Entity.h"

Entity::Entity(){}

Entity::~Entity(){}

void Entity::AddComponent(Component* component)
{
    Components.push_back(component);
} 
```

组件.h：

```
#ifndef _COMPONENT_H
#define _COMPONENT_H

#include "header.h"

class Component

{

public:

    // Forward declaration 
    class Entity;

    Component();
    ~Component();

    void Connect(Entity* entity) {}

    string Name;
};

// Position component
class Position: public Component{ 

public:
    int x, y; 

};

// Display component
class Display: public Component{ 

public:

    sf::Sprite baseSprite; };

#endif 
```

组件.cpp：

```
#include "header.h"
#include "Component.h"

Component::Component(){}

Component::~Component(){} 
```

现在要添加一个新组件，我会这样做：

```
Entity* new_component;
new_component = new Entity;
new_component->AddComponent(new Position);  
new_component->AddComponent(new Display); 
```

问题是，一旦我添加了组件，我就不知道如何再次访问它。

例如，我希望能够访问 Position 的 x 和 y 值。但是当我尝试像这样访问列表中的组件时：

```
Components[i]->... 
```

我只提出了基础组件类的属性。

Any help would be much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T03:14:30.347

You can store certain types of components in a certain index. For example, all position components are stored in position 0, all velocity components are stored in position 1.

Then you can retrieve the components easily

```
template <class T>
T * Entity::getComponent()
{
    return static_cast<T*>(components[T::getIndex()]);
} 
```

Component::getIndex() is a static method that should return the index for that component.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:21:12.217

Use `static_cast<T>` or `dynamic_cast<T>` to cast the vector element to the appropriate type before accessing methods of the derived class.

To use `static_cast<T>`, you will have to remember which element is of which type, because the `static_cast<T>` will not tell you.

`dynamic_cast<T>` will return a null-pointer if `T` is not of the appropriate pointer type, but this entails some run time overhead (about which I wouldn't be too concerned).

As a side note, I would seriously consider a redesign so that casting is not necessary.

# android - Android Facebook sdk，上传时加密照片

> ID：15709884
> 
> 赞同：0
> 
> 时间：2013-03-29T19:08:35.710
> 
> 标签：android, facebook

问题是关于我正在开发的 android 应用程序的安全考虑。我可以使用 Request.newUploadPhotoRequest 将照片上传到 Facebook，然后执行AndWait。但我想以加密形式传输照片。是否可以 ？

我正在使用 facebook sdk 3。

另外，我不确定是否由 facebook sdk 自动完成加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:43:34.040

默认情况下，Request 类使用“https”方案，因此适用标准 SSL 加密。

# getstring - How to get string resources in my class?(Android )

> ID：15709895
> 
> 赞同：0
> 
> 时间：2013-03-29T19:09:21.230
> 
> 标签：getstring

please help me.

I need get a string data in my class, when i use a Resources.getSystem().getString(R.string.test), but get a error: Resources$NotFoundException (id=830139056248)

my code:

```
 // manage DB
  private class DBHelper extends SQLiteOpenHelper{

    public DBHelper(Context context, String name, CursorFactory factory,
        int version) {
      super(context, name, factory, version);
    }

    // Create DB and insert data
    @Override
    public void onCreate(SQLiteDatabase db) {
      db.execSQL(DB_CREATE);

          ContentValues cv = new ContentValues();

        cv.put(COLUMN_EX_NAME, "TITLE NAME");
        cv.put(COLUMN_EX_IMG,  R.drawable.ex_pic3);
        cv.put(COLUMN_EX_TYPE,  0);
        cv.put(COLUMN_EX_DESCRIPTION, Resources.getSystem().getString(R.string.test));

  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:14:18.043

尝试这个：

```
private class DBHelper extends SQLiteOpenHelper{

private Context context;

public DBHelper(Context context, String name, CursorFactory factory, int version) {
  super(context, name, factory, version);
  this.context = context;
}

// Create DB and insert data
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(DB_CREATE);
    ContentValues cv = new ContentValues();
    cv.put(COLUMN_EX_NAME, "TITLE NAME");
    cv.put(COLUMN_EX_IMG,  R.drawable.ex_pic3);
    cv.put(COLUMN_EX_TYPE,  0);
    cv.put(COLUMN_EX_DESCRIPTION, context.getString(R.string.test)); 
```

}

# jquery - Countup to a specific number till the end of the day

> ID：15709896
> 
> 赞同：-3
> 
> 时间：2013-03-29T19:09:24.447
> 
> 标签：jquery, count, counter, countdown

I need a jquery to count up to a specific number (let's say 750) till midnight. It will use visitor's clock of course, and repeat the count up daily.

I tried several modifications but nothing worked for me. Is there anyone who can fingure that out?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:13:26.117

由于您没有提供任何代码，我们不知道您尝试了什么，我也没有理由为此提供代码。

这是您将如何做到的。

1：获取用户计算机上的当前时间。
2：计算午夜的时间戳。
3：一天是 86400 秒长或 86400000 毫秒长。
4：求剩余时间百分比。
5：将该百分比与您想要的特定数字相乘并取底。

# c#-4.0 - 访问业务对象？

> ID：15709902
> 
> 赞同：0
> 
> 时间：2013-03-29T19:09:42.987
> 
> 标签：c#-4.0, lambda, asp.net-4.0

我正在尝试实现与“四人帮”设计模式类似的结构。但我被困在了点上。下面是问题。

```
public class Product
{
    public Product()
    {
        Category=new Category();
    }

    public Product(int productId, string productName, string weight, double unitPrice, int unitsInStock)
        : this()
    {
        ProductId = productId;
        ProductName = productName;
        Weight = weight;
        UnitPrice = unitPrice;
        UnitsInStock = unitsInStock;
    }

    public int ProductId { get; set; }

    public string ProductName { get; set; }

    public string Weight { get; set; }

    public double UnitPrice { get; set; }

    public int UnitsInStock { get; set; }

    public Category Category { get; set; }

}

public class Category :
{

    public Category()
    {

    }
    public Category(int categoryId, string name, string description)
        : this()
    {
        CategoryId = categoryId;
        Name = name;
        Description = description;
    }

    public int CategoryId { get; set; }

    public string Name { get; set; }

    public string Description { get; set; } 
```

通过以下获取产品列表。

```
public List<Product> GetProduct()
    {
        string sql =
         @"SELECT ProductId, ProductName, Weight, UnitPrice, UnitsInStock,CategoryId,
             FROM [Product]

        return Db.ReadList(sql, Make);
    }

private static Func<IDataReader, Product> Make = reader =>
      new Product
      {
          ProductId = reader["ProductId"].AsId(),
          ProductName = reader["ProductName"].AsString(),
          Weight = reader["Weight"].AsString(),
          UnitPrice = reader["UnitPrice"].AsDouble(),
          UnitsInStock = reader["UnitsInStock"].AsInt(),
          Category.CategoryId=reader["CategoryId].AsInt()
      }; 
```

但是当我写下面我得到错误。

```
Category.CategoryId=reader["CategoryId].AsInt() 
```

如何获取列表中产品的 CategoryId？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:16:21.497

您不能在对象初始值设定项中设置这样的嵌套属性。

相反，您需要在子对象上设置属性：

```
Category = {
    CategoryId = ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:08:41.227

代码如下所示。（如果其他人需要帮助）。

```
private static Func<IDataReader, Product> Make = reader =>
      new Product
      {
          ProductId = reader["ProductId"].AsId(),
          ProductName = reader["ProductName"].AsString(),
          Weight = reader["Weight"].AsString(),
          UnitPrice = reader["UnitPrice"].AsDouble(),
          UnitsInStock = reader["UnitsInStock"].AsInt(),
          Version = reader["Version"].AsBase64String(),
          Category =
          {
              CategoryId = reader["CategoryId"].AsId(),
              Name = reader["Name"].AsString()
          }

      }; 
```

# database-design - Orderline 应该引用产品还是仅具有产品名称属性？

> ID：15709905
> 
> 赞同：1
> 
> 时间：2013-03-29T19:10:06.933
> 
> 标签：database-design, domain-model

在为订单建模时，在订单行中拥有产品属性是否有帮助，还是只需要产品名称？

命令：

```
public class Order 
{
    public Guid Id {get; set;}
    public DateTime OrderDate {get; set;}
    public Decimal Total {get;set;}
} 
```

订单线：

```
public class Orderline
{
    public Guid Id {get; set;}
    public Order Order {get; set;}
    public Product Product {get; set;}
    public int Quantity {get; set;}
    public Decimal Price {get; set;}
} 
```

有了这个，如果我删除一个产品，它要么需要级联删除订单行和订单（这真的很糟糕），要么我在产品上`soft delete`设置一个`IsDeleted`标志。

当然，在域模型中存在关系可能会有所帮助；因此，我可以从订单中访问它的 Orderlines，然后进入每行的产品并访问产品的所有属性。但是由于 Orderline 具有价格属性，因此这种对产品的依赖似乎弊大于利。如果我更改 Orderline 使其只有产品的名称（在下面的类中，我已将类型从更改`Product`为`String`，那么我可以删除产品而不影响它的任何记录：

```
public class Orderline
{
    public Guid Id {get; set;}
    public Order Order {get; set;}
    public string Product {get; set;}
    public int Quantity {get; set;}
    public Decimal Price {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:20:35.690

我建议您只需将产品信息复制到订单行。产品有随时间变化的趋势，您真正想要的是客户在特定时间购买的产品的快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:15:15.103

这真的取决于你的情况。如果订单被删除，则需要删除订单行，那么通过引用是正确的。我会通过参考来做。它简单快捷，而不是通过额外的步骤通过 ordername 获取订单。我什至不知道 orderline 与 order 有何不同。我认为应该只有一个命令，浓缩。如果东西保存在sql中，做一个外键标识，如果一切都在c#中完成，引用就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:32:04.777

If memory serves, well-established sales systems like Dynamics GP do both. You need to know what the state of the product was at the time of order; but it's also useful to be able to link a line item to the originating product. For instance, with any given product you might at some time need to compile a list of customers who purchased the product. Or, if the name of a product changes, you may need to be able to determine, for purposes of fulfillment, what the product "is."

That said, what the product "is" shouldn't change. And products which have been ordered should generally never be deleted. But, you ideally also know the exact phrasing, description, pricing, etc. that were on a customer's invoice.

In code, it's a matter of preference, as long as you fulfill the best practices under the hood. I'd suggest having two full Product objects on each OrderLine:

```
public class Orderline
{
    public Guid Id {get; set;}
    public Order Order {get; set;}
    public Product Product {get; set;}
    public Product OriginalProduct {get; set;}  // or "OriginatingProduct" or whatever
    public int Quantity {get; set;}
    public Decimal Price {get; set;}
} 
```

# maven - 如何轻松区分两个 Maven pom 文件之间的依赖关系？

> ID：15709907
> 
> 赞同：7
> 
> 时间：2013-03-29T19:10:09.343
> 
> 标签：maven, pom.xml

我的老板喜欢按照范围、组和工件 ID 对给定 Maven pom 文件中的依赖项进行排序。

我最近继承了相当数量的项目，其中有相当数量的未排序的依赖项。所以我对它们进行了分类。

长话短说，我想确保我没有无意中删除依赖项或将错误排序的依赖项复制到错误的 pom.xml 中。

所以我想知道是否有某种机制或 Maven 报告插件可以将 pom 与以前的版本进行比较，并向我展示添加或修改了哪些依赖项。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-07-19T14:18:55.063

我喜欢使用一个简单的[脚本](https://grep.codeconsult.ch/2010/07/08/list-all-your-maven-dependencies/)来获取排序的依赖项列表，然后将它们与 meld 之类的 difftool 进行比较。

```
#!/bin/bash
# first grab all dependencies
mvn dependency:resolve >/dev/null

# then list them with -o to keep noise low,
# remove extra information and duplicates
mvn -o dependency:list \
| grep ":.*:.*:.*" \
| cut -d] -f2- \
| sed 's/:[a-z]*$//g' \
| sort -u 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-19T05:15:15.833

Maven 插件 -[版本](http://www.mojohaus.org/versions-maven-plugin/compare-dependencies-mojo.html)，可能会拯救你。

```
mvn versions:compare-dependencies -DremotePom=my.group:other-project:1.0-SNAPSHOT 
```

我喜欢通过过滤、排序和打印嵌套多个模块的唯一差异来简化。为此，请使用：

```
 mvn versions:compare-dependencies -DremotePom=my.group:other-project:1.0-SNAPSHOT | grep '\->' | sort | uniq 
```

希望你觉得它有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T19:50:19.487

在 Maven 中解决依赖问题的最佳方法是以下命令

```
mvn dependency:tree 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-07T01:52:06.150

我发现（对我来说）最简单的方法是使用 eclipse 'Effective POM' 视图。

这是怎么做的

1.  在eclipse中打开第一个pom。
2.  单击该 pom 的“依赖层次结构”选项卡。
3.  在eclipse中打开第二个pop。
4.  单击该 pom 的“依赖层次结构”选项卡。
5.  将第二个 pom 窗口拖出 eclipse 以创建第二个 eclipse 窗口，以便您可以并排查看 pom 依赖项。

希望这可以帮助 ：）

# ios - 主从应用背景

> ID：15709910
> 
> 赞同：1
> 
> 时间：2013-03-29T19:10:23.143
> 
> 标签：ios, objective-c, xcode4, background, master-detail

我的主从应用程序背景有问题。当我启动应用程序而不是显示我设置的背景图像时，它会显示： ![在此处输入图像描述](../Images/b682c152fe5f5c7be092456f1c639fc4.png)

当我按下添加按钮时，它会变为真实背景： ![在此处输入图像描述](../Images/d051a02d0c47578495c94d716db109b2.png)

这是我正在使用的代码：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
    }

    return self;
}

- (void)viewDidLoad
{

        [super viewDidLoad];

    bgView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    bgView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"textured_paper.png"]];

    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)insertNewObject:(id)sender
{
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }
    [_objects insertObject:[NSDate date] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _objects.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    tableView.backgroundView = bgView;
    static NSString *CellIdentifier = @"Cell";
    tableView.separatorColor = [UIColor colorWithHue:0 saturation:0 brightness:33 alpha:0.2];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    }

    cell.textLabel.textColor = [UIColor whiteColor];
    cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Cell.png"]];
    cell.textLabel.backgroundColor = [UIColor clearColor];

    NSDate *object = _objects[indexPath.row];
    cell.textLabel.text = [object description];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!self.detailViewController) {
        self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    }
    NSDate *object = _objects[indexPath.row];
    self.detailViewController.detailItem = object;
    [self.navigationController pushViewController:self.detailViewController animated:YES];
} 
```

我怎样才能使它直接显示背景图像？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:40:04.277

而不是制作另一个视图，只需将其放入`viewDidLoad`

```
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"textured_paper.png"]];
self.tableView.backgroundView = nil; 
```

并删除这些

```
//in viewDidLoad
bgView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
bgView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"textured_paper.png"]];
//in cellForRowAtIndexPath:
tableView.backgroundView = bgView; 
```

或者尝试把

```
tableView.backgroundView = bgView; 
```

在`viewDidLoad`它应该工作。

您遇到此问题的原因是因为您在设置`backgroundView`单元格时调用的方法中设置了 tableView 的视图中至少有一个单元格。

# css - CSS 框图像 - 布局问题

> ID：15709912
> 
> 赞同：0
> 
> 时间：2013-03-29T19:10:31.343
> 
> 标签：css, layout

我在使用 css 布局对象时遇到困难，

由于代表无法发布图像，因此图像托管在这里....

[![](../Images/4287cd378253e830b12131b79f82a83a.png)](https://i.stack.imgur.com/JeCwq.png)

用于每个带有 div 标记的图像的 css ive 如下

```
#compbox img {
  float:left;
   margin:5px;
}
#compwinnerbox img {
  float:left;
  margin:5px;
} 
```

等等，每个盒子，虽然我将如何让底行的第三个盒子填补空白 - 所以在某种意义上浮动？对不起，如果我解释得不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:16:07.387

[鉴于浮动](http://www.w3.org/TR/CSS2/visuren.html#floats)的规范，使用 CSS 和您的布局您无法做到这一点：

> 5 - 浮动框的外部顶部不得高于源文档中早期元素生成的任何块或浮动框的外部顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:16:36.487

要么使用 jQuery Masonry： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

或者对于 CSS 方法使用`column`

```
.col {
 -moz-column-count:3; /* Firefox */
-webkit-column-count:3; /* Safari and Chrome */
column-count:10px;
-moz-column-gap:10px; /* Firefox */
-webkit-column-gap:10px; /* Safari and Chrome */
column-gap:2;
} 
```

[http://jsfiddle.net/4gXCs/3/](http://jsfiddle.net/4gXCs/3/)

# javascript - 地理编码器 - 多个标记不会显示标题

> ID：15709914
> 
> 赞同：0
> 
> 时间：2013-03-29T19:10:31.953
> 
> 标签：javascript, google-maps, google-api, title, marker

我遇到地理编码器不显示每个标记的标题的问题。这是代码：

```
var map;
var marker = [];
function gmap_initialize() {        
    var ikonica = templateDir+'/images/gmap/gmap_pointer_and_shadow.png';
    var map_canvas = document.getElementById('gmap');   
    var my_latlan = new google.maps.LatLng(45.55496, 18.69551);
    var map_options = {
        center: my_latlan,
        zoom: 13,     
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(gmap, map_options);

    var geocoder = new google.maps.Geocoder();
    //js_adrese below is actually an array that contains addresses  
    for (i=0; i<js_adrese.length; i++)
    {           
        geocoder.geocode( {'address': js_adrese[i]}, function(results, status) {        
        if (status == google.maps.GeocoderStatus.OK) 
        {               
            var x = results[0].geometry.location.lat();
            var y = results[0].geometry.location.lng();             
            marker[i] = new google.maps.Marker({                    
               position: results[0].geometry.location,
               map: map,                   
               icon: ikonica,
               title: js_adrese[i] // undefined in console
            });             
        } 
        else 
        {
            alert("Geocode failed. Reason: " + status);
        }
    });     
}
}; 
```

当我设法显示标题时，它只显示 js_adrese[i] 的最后一个值，因此每个标记都有相同的标题。

重要提示：我完全是 js 和 google api 的菜鸟，所以请，如果你愿意将技术谈话降低到我的白痴水平并用蹩脚的话指出，问题是什么以及如何解决它？请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:16:38.357

谷歌地图地理编码服务（个人）每秒只允许 10 个请求或接近的请求。尝试将您的请求减少到说 2 或 3 个地址，如果这正常工作，那么您必须离线地理编码并从生成的纬度和经度创建您的标记。

# c# - 如何使用 Windows 窗体禁用选择颜色/选择网格中的单元格

> ID：15709915
> 
> 赞同：0
> 
> 时间：2013-03-29T19:10:36.143
> 
> 标签：c#, windows, forms, grid, selection

我正在使用 C# Windows 窗体。

我有一个网格视图。用户应该不能选择单元格。他一次只能（左右）鼠标单击一个单元格。

我没有找到如何禁用选择。所以我先设置：

```
 this.grid.MultiSelect = false; 
```

用户不应该能够选择一个单元格，但如果他能够选择它也不错（只要我没有为其设置事件处理程序）。所以我的下一个想法是：我应该禁用选择颜色。所以我使选择颜色与原始颜色相同：

```
 this.gridCellStyle.SelectionBackColor = this.gridCellStyle.BackColor;
        this.gridCellStyle.SelectionForeColor = this.gridCellStyle.ForeColor; 
```

我用随机测试值填充我的网格：

```
 grid.ColumnCount = 9;
        grid.Rows.Add(1, 2, 3, 4, 5, 6, 7, 8, 9); 
```

**问题：**有没有更好的方法来禁用单元格选择或默认样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:21:21.723

如果您要这样做，即使您所做的只是向用户隐藏单元格被选中的指示，您会将选择颜色设置为正常颜色，这些颜色绝对不透明并且绝对不一样，除非您是寻找隐形墨水解决方案（白底白字）。

这里唯一的错误是您的代码。

至于你真正的问题

“用户不应该能够选择一个单元格。他一次只能（左右）鼠标单击一个单元格”。看到至少左键单击一个单元格是选择它的一种方式，我们都有点难过。

# excel - 具有冗余或缺失单元格的递归列表/排序

> ID：15709917
> 
> 赞同：0
> 
> 时间：2013-03-29T19:10:57.593
> 
> 标签：excel, vba, list, macos, sorting

我正在使用包含一些怪癖的单列数据。我在问题的详细信息下方包含了 VBA 代码。

数据组织方式的示例：

*   姓名
*   法庭
*   优惠
*   法庭
*   优惠
*   优惠
*   法庭
*   优惠

但是，由于收集数据的方式，法院并不总是列出。一旦我转置数据，这就会抛出我的列。我写的 VBA 试图纠正这个问题，只要有 Offe 的实例，如果前面的单元格是 Court，则定期打印 Offe。如果上一个单元格不是 Court，则打印上一个 Court（另存为 CourtCell），然后打印 Offe 并继续下一个单元格。

我收到一个需要对象的错误。

```
Sub CourtAdder()

Dim lngRowLast As Long, _
lngRowPaste As Long, _
lngColOffset As Long
Dim rngCell As Range, _
rngDataSet As Range
Dim strSourceTab As String, _
strOutputTab As String

 'Tab name containing source data.  Change to suit.
strSourceTab = "Sheet1"
 'Tab name for data output.  Change to suit.
strOutputTab = "Sheet2"

lngRowLast = Sheets(strSourceTab).Cells(Rows.Count, "A").End(xlUp).Row

 'Assumes the original dataset is in Column A and starts at Row 1\.  Change to suit.
Set rngDataSet = Sheets(strSourceTab).Range("A1:A" & lngRowLast)

Application.ScreenUpdating = False

For Each rngCell In rngDataSet

    If Left(rngCell.Value, 5) = "Court" Then
        CourtCell = ActiveCell.Value
    End If
    If Left(rngCell.Value, 4) = "Offe" Then
        If Left(Rng.Cell.Value.Offset(-1, 0), 4) = "Cour" Then
            lngRowPaste = 27
            lngColOffset = 1
        Else
            ActiveCell.PasteSpecial (xlPasteValues)
            lngRowPaste = 1
            lngColOffset = 1
        End If
    Else
        lngRowPaste = lngRowPaste + 1
        lngColOffset = 1

    End If

'        Sheets(strOutputTab).Cells(lngRowPaste, lngColOffset).Value = rngCell.Value'
 '       lngColOffset = lngColOffset + 1 '

Next rngCell

Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:40:32.883

几点：

1.  您并没有在您的读取单元中进行物理循环，因此使用`ActiveCell`不会将任何内容保存到`CourtCell`.
2.  显示您的原始数据，循环浏览行和列并粘贴对我来说没有意义。
3.  `PasteSpecial`由于您没有复制任何内容，因此using不会做任何事情，**这就是您的错误所在**。

* * *

我会`for`像这样构造循环：

```
lngColOffset = 1
For Each rngCell In rngDataSet

    If Left(rngCell.Value, 5) = "Court" Then
    'if a court field?

        'save value and don't copy any values
        CourtCell = rngCell.Value

    Else
    'if not a court field?

        'add last saved court and current offe to out put sheet
        Sheets(strOutputTab).Cells(1, lngColOffset).Value = CourtCell
        Sheets(strOutputTab).Cells(2, lngColOffset).Value = rngCell.Value

        'go to next column to write
        lngColOffset = lngColOffset + 1

    end if

Next rngCell 
```

我希望这是有道理的，我理解。如果没有，我可以提供更多帮助。

# android - Android：仅使用加速度计确定倾斜角度

> ID：15709918
> 
> 赞同：0
> 
> 时间：2013-03-29T19:10:58.270
> 
> 标签：android, accelerometer, angle, tilt

我正在尝试使用加速度计读数即时计算关于初始位置的腿的角度。

当我接近这个时，我决定我需要记录一个平均重力矢量并计算我当前读数和那个之间的某个角度。

从理论上讲，这似乎是合理的：腿部的每个位置的重力读数都不同，因此在静止位置，读数应该收敛到一个向量，我可以用它来找到腿的角位移，相对于开始时的读数。

但是，我尝试了几种组合：两个向量之间的角度仅使用 Z 和 Y 分量（使用[this](http://www.wikihow.com/Find-the-Angle-Between-Two-Vectors)）；计算重力和电流之间的差向量，并执行 atan2(dY,SQRT(dX^2+dZ^2)); 计算 atan2(dY,dz)...（其中 dY 和 dZ 分别是 Y 和 Z 分量的当前和重力矢量的减法）

这些解决方案似乎都不起作用，所以我想知道我是否可以做到这一点。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:54:34.550

假设设备绑在腿上，屏幕朝向与用户相同的方向，那么您可以计算出屏幕表面与东西向平面之间的角度。我只是在这里给你一个想法，你必须做更多的工作才能知道角度是低于还是高于东西向平面。角度可以计算为

```
Math.acos(event.values[3] / norm of event.values[3]); 
```

因此，如果用户站立，则角度将为 90 或 -90，具体取决于您的约定。当腿向上移动时，角度的绝对值将减小。一个大腿平行于东西平面，即屏幕平放，腿向上移动，你会得到与腿向下移动相同的角度，所以你需要使用更多的信息来解决这个问题。
如果屏幕与用户面对的方向正交，那么您必须计算东西向平面与与屏幕正交的平面之间的角度。我让你弄清楚这一点，它可能是上面的等式，`event.values 0 or 1`具体取决于设备是纵向还是横向。

# javascript - 勾选复选框后的必填字段

> ID：15709921
> 
> 赞同：1
> 
> 时间：2013-03-29T19:11:43.993
> 
> 标签：javascript, html, forms, checkbox

我对 JavScript 很陌生，我正在尝试通过切换所需的类来创建一个表单，该表单需要在标记复选框后将信息输入到字段中。我已经尝试了两天，如果选中“体育馆”框，则无法将“开始日期”设为必填字段。任何帮助都会很棒。

这是我到目前为止所拥有的：

```
 <!DOCTYPE html>
    <html>
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
    <script type="text/javascript">    

    $(document).ready(function(){
        $("#gym").change(function(){              
            $("#togg1").toggle(this.checked);
            $("#startDate").toggleClass("required");
            $("#endDate").toggleClass("required");
            $("#startTime").toggleClass("required");
            $("#endTime").toggleClass("required");

    if(this.checked){
           $("#startDate").attr('required','required');
           $("#endDate").attr('required','required');
           $("#startTime").attr('required','required');
           $("#endTime").attr('required','required');
      }
      else{
           $("#startDate").removeAttr('required')
           $("#endDate").removeAttr('required')
           $("#startTime").removeAttr('required')
           $("#endTime").removeAttr('required')
      }

        });
    });

    </script>

    </head>
    <body>

    <div id="courseForm" style="width: 500px; border: 1px solid #000; padding: 50px 0 50px 50px;margin: 0 auto;">
    <form id="serviceForm" action="#" onSubmit="required(this);" method="POST" enctype="text/plain">
    <input name="orgid" type="hidden" value="000001" />
    <input name="retURL" type="hidden" value="#" />
    <label for="company">* Agency Requesting Facility:</label>
    <br />
    <input id="company" required="required" maxlength="50" name="company" size="50" type="text" />
    <br />
    <br />
    <label for="name">* Agency Contact:</label>
    <br />
    <input id="name" required="required" maxlength="50" name="name" size="50" type="text" />
    <br />
    <br />
    <label for="phone">* Contact Phone Number:</label>
    <br />
    <input id="phone" required="required" maxlength="14" name="phone" size="14" type="text" />
    <br />
    <br />
    <br />Courses offered
    <br />

<input id="gym" name="gym" type="checkbox" value="1" />Gymnasium
    <br />
    <span id="togg1" style="display:none">
            <span id="togg2" style="display:inline">
                <lable for="startDate">* Start Date:</lable>
                    <input id="startDate" maxlength="10" name="startDate" size="10" />
            </span>
            <span id="togg2" style="display:inline">
                <lable for="endDate">* End Date:</lable>
                    <input id="endDate" maxlength="10" name="endDate" size="10" /><br /><br />
            </span>
            <span id="togg2" style="display:inline">
                <lable for="startTime">* Start Time:</lable>
                    <input for="startTime" maxlength="7" name="startTime" size="7" />
            </span>
            <span id="togg2" style="display:inline">
                <lable for="endTime">* End Time:</lable>
                    <input for="endTime" maxlength="7" mane="endTime" size="7" /><br />
            </span>
    </span>

    <br />
    <br />
    <label for="description">Comments:</label>
    <br />
    <textarea name="description" cols="40" rows="5"></textarea>
    <br />
    <br />* denotes required fields
    <br />
    <input type="submit" name="submit" id="submit" value="SUBMIT" />
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:21:50.667

您在“onSubmit”中调用“必需”函数。这不是必要的和错误的，因为“必需”功能不存在。

然后，您必须添加以下行：

```
$("#serviceForm").validate(); 
```

在“$(document).ready”调用中，以便在 DOM 加载后执行。

这里有一个例子说明它是如何工作的：

[http://jsfiddle.net/4rscN/](http://jsfiddle.net/4rscN/)

I have supposed you use the following plugin: [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

If not, you have to add it.

For the validate plugin, I think you have to use the required class, not the required attribute. You are mixing class required with the attribute required, which is an attribute you can use in HTML5, but always take into account not all browsers support it.

For a good reference about this:

[http://caniuse.com/#search=required](http://caniuse.com/#search=required)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:21:57.190

You forget to add 'required' attribute to 'Start Date'

```
$(document).ready(function(){
   $("#gym").change(function(){              
      $("#togg1").toggle(this.checked);
      $("#startDate").toggleClass("required");

      if(this.checked){
           $("#startDate").attr('required','required');
      }else{
           $("#startDate").removeAttr('required')
      }

   });
}); 
```

# jquery - 对话框中的 jQuery 选项卡小部件：显示错误

> ID：15709923
> 
> 赞同：0
> 
> 时间：2013-03-29T19:11:51.783
> 
> 标签：jquery, html, css

我在对话框中有一个 jQuery 选项卡小部件。[在此 Fiddle](http://jsfiddle.net/cvh2013/8UBQF/)中首次单击 Advisers 图像时，对话框和选项卡小部件显示正常。但是，如果关闭对话框并再次单击图像，则会呈现对话框，但选项卡小部件不会呈现。

我认为这与`toggle()`选项卡小部件上使用的方法有关，但如果我删除该方法，选项卡小部件将永远不会显示。几乎就像我需要在对话框关闭时“重新初始化”页面状态，以便在第二次和随后单击 Adviser 图像时呈现选项卡对话框（请原谅我在这里与 UI 术语搏斗，我是服务器侧编码器）。

任何人都可以给我一个指针，好吗？

**HTML**

```
<a href="#" id="advisers-image">
    <div class="circle hovershadow advisers advisers-box-shadow text">Professional
        advisers</div>
</a>

<a href="#" id="industry-image">
    <div class="circle hovershadow industry industry-box-shadow">Industry</div>
</a>

<div style="clear: both;"></div>

<div id="advisers-dialog" class="dialog">

    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Law firms</a></li>
            <li><a href="#tabs-2">Accounting and audit firms</a></li>
            <li><a href="#tabs-3">Management consultants and economists</a></li>
        </ul>
        <div id="tabs-1">
            <p>Law firm text goes here.</p>
        </div>
        <div id="tabs-2">
            <p>Accounting and audit firm text goes here.</p>
        </div>
        <div id="tabs-3">
            <p>Management consultants and economists text goes here.</p>
        </div>
    </div>
</div>

<div id="industry-dialog" class="dialog" title="Industry">Industry
    text goes here</div> 
```

**Javascript**

```
<script type="text/javascript">
$( "#tabs" ).tabs().hide();
</script>

<script type="text/javascript">         
$( "#industry-dialog" ).dialog({ autoOpen: false });
$( "#industry-image" ).click(function() {
$( "#industry-dialog" ).dialog( "option", "modal", true );
$( "#industry-dialog" ).dialog( "option", "height", "auto" );
$( "#industry-dialog" ).dialog( "option", "width", 700 );
$( "#industry-dialog" ).dialog( "open" );
});
</script>

<script type="text/javascript">         
$( "#advisers-dialog" ).dialog({ autoOpen: false });
$( "#advisers-image" ).click(function() {
$( "#advisers-dialog" ).dialog( "option", "modal", true );
$( "#advisers-dialog" ).dialog( "option", "height", "auto" );
$( "#advisers-dialog" ).dialog( "option", "width", 700 );
$( "#advisers-dialog" ).dialog( "open" );
$( "#tabs" ).tabs( "option", "heightStyle", "content" );
$( "#tabs" ).tabs( 'select', 0 );
$( "#tabs" ).toggle();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:51:37.840

基本原因是每次点击你调用的图片`$( "#tabs" ).toggle();`。

因此，在偶数次点击时，选项卡将被隐藏，在奇数次点击时，它们将可见。不需要隐藏选项卡，因为它们包含在设置为隐藏的对话框中。

附加说明：

由于两个对话框的选项都是重复的，因此无需在每次打开时都设置它们。可以合并为原始选项对象，两个对话框共享一个对象，减少大量代码。

```
var commonDialogOptions={
    autoOpen: false,
    modal:true,
    width:700
}
$("#industry-dialog, #advisers-dialog").dialog(commonDialogOptions); 
```

这将删除点击处理程序中的选项设置。如果您需要单独设置特定选项，可以根据需要进行设置

简化代码演示，删除选项卡隐藏/显示：http: [//jsfiddle.net/8UBQF/2/](http://jsfiddle.net/8UBQF/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:50:14.580

简单的解决方法是调用

```
$( "#tabs" ).show(); 
```

代替

```
$( "#tabs" ).toggle(); 
```

`.show()`只是使元素可见，而不管其当前状态如何，同时`.toggle()`切换它。

在这种特殊情况下，我不知道您为什么甚至需要隐藏`#tabs`最初的内容。它们在对话框内，不会被看到。如果您`.hide()`一开始不这样做，则以后无需致电`.show()`。请参阅 jsFiddle 修订版：http: [//jsfiddle.net/8UBQF/1/](http://jsfiddle.net/8UBQF/1/)

# java - 扫描仪的问题

> ID：15709931
> 
> 赞同：0
> 
> 时间：2013-03-29T19:12:17.733
> 
> 标签：java

我的扫描仪和 nextLine 有问题。发生的情况是它跳过了循环的第一圈。我的猜测是扫描仪已经在这里包含了一些东西，比如换行符之类的。如果我对 strCount 和循环中的一个使用两种不同的扫描仪，它确实有效。这是正确的吗？如果是，有什么方法可以在不使用两个不同扫描仪的情况下完成这项工作。

```
import java.util.*;

public class chars_in_string {
public static void main(String[] args) {
    Scanner key = new Scanner(System.in);

    System.out.print("Number of strings?");
    int strCount = key.nextInt();
    String [] array = new String[strCount];

    for(int x = 0; x < strCount; x++){

        System.out.print("String "+(x+1)+":");
        array[x] = key.nextLine();

    }
}

} 
```

输入/输出示例：

串数？8

字符串 1：字符串 2：

从这里输入任何字符串都可以正常工作，它只会在循环中跳转 1 步以获取下一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:14:11.943

问题是`Scanner.nextInt()`不消耗行终止符。`nextLine()`在进入循环之前做一个额外的事情。

# php - 使用 mysql_fetch_array 检索字段值

> ID：15709932
> 
> 赞同：0
> 
> 时间：2013-03-29T19:12:18.947
> 
> 标签：php, mysql

我正在使用以下 PHP 代码从与 ID 匹配的表中检索名称：

```
$qry = "SELECT league_name FROM Leagues where league_id = '".$_SESSION['SESS_LEAGUE_ID']."'";
$row = mysql_fetch_array($qry);
$leaguename = $row['league_name']; 
```

我知道 SESS_LEAGUE_ID 是正确的，因为我可以将其输出到变量并查看它，但是当我尝试从 Leagues 表中获取与 ID 匹配的名称时，我什么也得不到。

$leaguename 始终为空。我检查了数据库，肯定会返回一些文本。League_name 字段是 varchar 类型。

我知道这很简单，我没有做，但我想不出是什么！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:13:42.330

你需要执行语句

```
$result = mysql_query($qry);
$row = mysql_fetch_array($result); 
```

停止使用`mysql_`函数。它们不再被维护[并被正式弃用](http://j.mp/XqV7Lp)。改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

# python - 对象对于所需数组来说太深 - scipy.integrate.odeint

> ID：15709933
> 
> 赞同：2
> 
> 时间：2013-03-29T19:12:24.483
> 
> 标签：python, numpy, scipy, odeint

我昨天刚开始使用 Python，使用`scipy.integrate.odeint`.

我定义了一个函数

```
def SIR(x, t, beta, gamma, mu, M): 
```

它接受`numpy.array`对象`x`,`t`和`M`; 和标量浮动`beta`, `gamma`, 和`mu`.

`M`是`(60,60)`大小，但我认为这并不重要。

`x`并且`t`都是非单例的，有`x.shape`存在`(180,)`和`t.shape`存在`(5000,)`。我试过给他们一个单一的维度，让他们分别有形状`(180,1)`和`(5000,1)`，但我仍然得到同样的错误：

```
In [1]: run measles_age.py
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/IPython/utils/py3compat.py in execfile(fname, *where)
    173             else:
    174                 filename = fname
--> 175             __builtin__.execfile(filename, *where)

/Users/qcaudron/Documents/SIR/measles_age.py in <module>()
    111 
    112 
--> 113         x = integrate.odeint(SIR, x0, t, args=(beta, gamma, mu, M));
    114 
    115 #       plot(t, x);

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/scipy/integrate/odepack.py in odeint(func, y0, t, args, Dfun, col_deriv, full_output, ml, mu, rtol, atol, tcrit, h0, hmax, hmin, ixpr, mxstep, mxhnil, mxordn, mxords, printmessg)
    141     output = _odepack.odeint(func, y0, t, args, Dfun, col_deriv, ml, mu,
    142                              full_output, rtol, atol, tcrit, h0, hmax, hmin,
--> 143                              ixpr, mxstep, mxhnil, mxordn, mxords)
    144     if output[-1] < 0:
    145         print _msgs[output[-1]] 
```

即使`SIR`刚刚返回`x`，我也会收到此错误，并且如果我将所有参数从中剥离`x`出来`t`：

```
def SIR(x, t):
    return x; 
```

如您所见，导致错误的行是

```
x = integrate.odeint(SIR, x0, t, args=(beta, gamma, mu, M)); 
```

编辑 ：

我被要求添加该`SIR`方法的完整代码。因为它相对较长，所以我将完整的 .py 脚本放在了一个 pastebin 中：http: [//pastebin.com/RphJbCHN](http://pastebin.com/RphJbCHN)

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:30:38.910

我可以通过多种方式重现您的错误。

`y0`如果参数或`t`to 的参数`odeint`不是一维数组，则会立即发生错误。在 pastebin 上发布的代码示例中（在评论中提到），`t`被改写如下：

```
t = np.arange(0, 520, 1);
t = t.reshape(len(t),1); 
```

删除改变形状的线`t`。 `t`必须是一维数组，而不是形状为 (len(t), 1) 的二维数组。

例如...

```
In [177]: def SIR(x, t):
   .....:     return x
   .....: 
```

这有效...

```
In [178]: x0 = [0.1, 0.2]

In [179]: odeint(SIR, x0, t=[0, 0.5, 1])
Out[179]: 
array([[ 0.1       ,  0.2       ],
       [ 0.16487213,  0.32974426],
       [ 0.27182822,  0.54365643]]) 
```

这会导致错误：

```
In [180]: x0 = [[0.1, 0.2]]  # wrong shape

In [181]: odeint(SIR, x0, t=[0, 0.5, 1])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-181-a37878f92395> in <module>()
----> 1 odeint(SIR, x0, t=[0, 0.5, 1])

/home/warren/anaconda/lib/python2.7/site-packages/scipy/integrate/odepack.pyc in odeint(func, y0, t, args, Dfun, col_deriv, full_output, ml, mu, rtol, atol, tcrit, h0, hmax, hmin, ixpr, mxstep, mxhnil, mxordn, mxords, printmessg)
    142     output = _odepack.odeint(func, y0, t, args, Dfun, col_deriv, ml, mu,
    143                              full_output, rtol, atol, tcrit, h0, hmax, hmin,
--> 144                              ixpr, mxstep, mxhnil, mxordn, mxords)
    145     if output[-1] < 0:
    146         print _msgs[output[-1]]

ValueError: object too deep for desired array 
```

检查您给出的初始条件`odeint`（第二个参数）是否是一*维*numpy 数组（不是形状为 (1, 180) 或 (180, 1) 的二维数组）。

I also get the 'object too deep...' error if `SIR` *returns* an array with the wrong shape. It must return a *1-D* array, with the same shape as its first argument. Make sure it is truly 1-D, and not 2-D with shape (1, 180) or (180, 1).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T19:25:30.493

从本[教程](http://docs.scipy.org/doc/scipy/reference/tutorial/integrate.html#ordinary-differential-equations-odeint)看来，第一个参数 to`integrate.odeint()`需要是一个要操作的函数（在您的情况下）`x0`和`t`. 由于您的`SIR()`函数只接受一个参数，因此操作失败。从返回的结果的大小和/或形状可能`SIR()`相对于其余参数很重要。

# android - Android getAssets().openFd(string) - 找不到文件

> ID：15709935
> 
> 赞同：0
> 
> 时间：2013-03-29T19:12:33.967
> 
> 标签：android, audio, file-io, filenotfoundexception

getAssets()openFD() 失败。

```
AssetFileDescriptor fileFD=null;
File file = new File(Environment.getExternalStorageDirectory() + "/Music/ckyws8.wav");
fileFD = getAssets().openFd(file.toString()); //FAILS 
```

日志显示：java.io.FileNotFoundException: /mnt/sdcard/Music/ckyws8.wav

即使`file.exists()`返回`true` 和测试：

```
File tempath = new File(Environment.getExternalStorageDirectory() + "/Music");          
int files = tempath.list().length;
for(int f=0;f<files;f++){
    Log.d(LOG_TAG,tempath.list()[f].toString());    
} 
```

返回一个包含`ckyws8.wav`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:37:46.663

以前的答案可能很短，但很有帮助。如果其他人遇到同样的误解，以下是我为使代码正常工作所做的更改：

首先，因为它不是资产中的文件`AssetFileDescriptor fileFD=null;`更改资产中的文件，因此请`FileDescriptor fileFD=null;`记住它们具有不同的功能，并且代码的其他部分也需要更改。

得到`FileDescriptor`一个`FileInputStream`必需的，因此代码的另一部分如下：

```
File file = new File(Environment.getExternalStorageDirectory() + "/Music/ckyws8.wav");//same as before
FileInputStream fis = new FileInputStream(file);
fileFD = fis.getFD(); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:23:53.213

`AssetManager`用于访问应用程序的资产，即`assets/`项目源代码树中目录的内容。它不适用于访问内部或外部存储上的文件，这就是您的代码不起作用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-22T08:12:27.410

读取资产文件流的正确方法如下：
`InputStream is = ctx.getAssets().open("fileName");`

# c++ - FAT 文件系统中的簇、页、扇区

> ID：15709937
> 
> 赞同：1
> 
> 时间：2013-03-29T19:12:42.553
> 
> 标签：c++, c, operating-system, dos, fat

我试图理解 FAT 文件系统中“集群”的概念。具体来说，一个簇、一个块、一个扇区之间的关系是什么。

我的理解如下 1) 一个 Block/Page 是 4096 字节，一个块被分成扇区。2) 扇区是磁盘上的最小存储单位。3) 我们检索并存储在块/页中的数据。4) 光盘有轨道，每个轨道都有块/页。

我的理解对吗？我不确定集群在哪里适合所有这些。

有人可以澄清我的理解吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:35:20.130

扇区是磁盘驱动器本身设置的磁盘驱动器上的存储单元。对于软盘或可能的 RAM 磁盘，这通常是 256 字节，对于大多数硬盘，通常是 512 字节。

集群是文件系统设置的存储单元。它（至少几乎）总是一些整数个扇区，因此簇大小是扇区大小的整数倍。

术语“页面”在 MS-DOS 中并不经常使用。x86 处理器可以定义/使用 4096 字节的页面，但它们在受保护模式下这样做，而 DOS 在实模式下运行（或其模拟，例如 V86 任务）。尽管 MS-DOS 和在其下运行的程序通常都不会看到或使用页面（例外是切换到保护模式本身，可能使用 VCPI 或 DPMI 之类的东西）。

在 MS-DOS 中使用的另一个术语*是*段落，它是 16 字节的内存。这是仅使用段地址可以解决的最小数量，没有偏移量。例如，当您从 MS-DOS 分配内存时，您将分配大小指定为段落数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:35:52.747

从此链接引用：[http ://cquirke.mvps.org/9x/fat.htm](http://cquirke.mvps.org/9x/fat.htm)

**集群**：FATxx 文件系统逻辑级别的单个数据存储单元

**扇区**：物理磁盘级别的单个存储单元

A **cluster** is the smallest unit of storage the operating system's file system can manage. For example, if a 1KB file is stored in a system with a 32KB cluster size (see table below), the 1KB file takes up 32KB of disk space. Below are the cluster sizes for the FAT32 file systems on Windows computers.

```
Disk Size          Cluster size

512MB-8GB           4KB
    8-16GB          8KB
   16-32GB         16KB
   32GB+           32KB 
```

# javascript - Javascript-单击后禁用列表视图列

> ID：15709940
> 
> 赞同：0
> 
> 时间：2013-03-29T19:12:44.717
> 
> 标签：javascript, jquery, html, listview

我有一个显示列的asp listview。如果它是可编辑的，它会将文本放入 textarea 框中并允许用户对其进行编辑。我正在苦苦挣扎的是，一旦单击并编辑了一个地址，我想禁止任何其他地址进行编辑。

如果显示文本区域，他们是否可以忽略“originalType”跨度上的点击功能？

```
<asp:ListView ID="table" >
<LayoutTemplate>
    <table >
        <thead>               
            <th>
                Address Type
            </th>
            <span>
            <th>
                State
            </th>
            </span>
            </thead>
            <tbody>
                <tr id="item" runat="server" />
            </tbody>
    </table>
</LayoutTemplate>
<ItemTemplate>
    <tr class="abc">
        <td width="40%">
            <span class="originalType" id="original">                    
                    <span class="TypeSpan" style="display:none;"><%# DataBinder.Eval("AddressType")%></span>                                     
            </span>                
                    <span data-enabled="false" class="EditType" style="display:none">                   
                    <textarea class="edit"><%# DataBinder.Eval("AddressType")%> </textarea>  
                    <input type="button" class="button3 buttonSave" id="buttonSave" value="Save" />
                    <input type="button" class="button3 buttonCancel" id="buttonCancel" value="Cancel" />                                               
            </span> 
        </td>

        <td width="45%">

        </td>
        </span>
    </tr>
  </ItemTemplate>
  <EmptyItemTemplate>
  </EmptyItemTemplate>
 <EmptyDataTemplate>    
 </EmptyDataTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:16:37.533

你的线

```
newEditBox.attr("data-enabled" == "true") 
```

应该

```
newEditBox.attr("data-enabled", "true") 
```

另外，您何时将其设置为“假”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:22:42.920

如果您正在检查值正确的方法是
`newEditBox.attr("data-enabled") == 'false'`

# opencv - 为什么我在尝试计算集群时得出未处理的异常

> ID：15709943
> 
> 赞同：0
> 
> 时间：2013-03-29T19:13:11.237
> 
> 标签：opencv, machine-learning, computer-vision, cluster-computing

我尝试使用 OpenCV 制作描述符字典。当我使用 BOWKmeansTrainer 的方法 .cluster() 时，我的应用程序抛出未处理的异常

> OpenCV 错误：未知函数中的断言失败（data.dims <= 2 && type == CV_32F && K > 0），文件......\src\opencv\modules\core\src\matrix.cpp，行2485 未知异常

我不明白为什么会这样。我试图更改参数，但没有帮助。

你能给我一些想法如何解决这个问题吗？

int main(int argc, char* argv[]) {

```
const int countClusters = 2;

vector<string> fileList;

GetFilesInFolder(folder_one, fileList);

vector<bool> trainMask(fileList.size());
InitRandomBoolVector(trainMask, 0.1);

Ptr<FeatureDetector> keypointsDetector = FeatureDetector::create("HARRIS");

Ptr<DescriptorExtractor> descriptorsExtractor = DescriptorExtractor::create("BRIEF");

Mat descriptors;
Mat voc;

TermCriteria tc(TermCriteria::COUNT + TermCriteria::EPS, 10, 0.001);
BOWKMeansTrainer bowTrainer(vocSize,tc);
for(int i = 0;i < filesList.size();i++)
{
    if(is_voc.at(i))
    {
        vector<KeyPoint> keypoints;
        Mat image = imread(filesList.at(i));

        keypointsDetector->detect(image,keypoints);
        descriptorsExtractor->compute(image,keypoints,descriptors);
        bowTrainer.add(descriptors);
    }
}
try
{
    voc = bowTrainer.cluster();
}
catch(std::exception ex)
{
    printf(ex.what());
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T20:05:08.160

您是否检查过您输入 BOWKMeansTrainer 的关键点和描述符是否有效？我认为这可能是一个很好的起点。

我能够使用 SIFT 将描述符输入 BOWKMeansTrainer，但不确定是否将其与 HARRIS/BRIEF 一起使用。以下是 SIFT 方法的代码：

```
 Mat allDescriptors;
    SiftDescriptorExtractor detector;
    for (int i = 1; i <= 10; i++) {
        // get keypoints
        vector<KeyPoint> keypoints;
        // assuming you have a function intToString that converts your iterator to a string,
        // this line creates a file path, e.g. /home/ubuntu/1.jpg to /home.ubuntu/10.jpg
        string imagePath = "<put path to your image here>" + "/" + intToString(i) + ".jpg";
        Mat imageToUse = imread(imagePath, CV_LOAD_IMAGE_GRAYSCALE); //Load as grayscale
        detector.detect(imageToUse, keypoints);
        // get descriptors
        Mat descriptors;
        detector.compute(imageToUse, keypoints,descriptors);
        // load descriptors into your descriptor array
        allDescriptors.push_back(descriptors);
    } 
```

此代码使用 SiftDescriptorExtractor 进行关键点检测和描述符提取。如果将关键点和描述符保存到文件中，您可以看到它们是维度为 128*n 的 Mats。尝试将描述符保存在文件中并检查它们是否具有您期望的尺寸。

如果不是这个，那么它可能是您用于培训师的参数。

祝你好运。BOWKMeans 真的很难设置。

# .net - WPF：在 Visual Studio 中操作时，数据绑定的标签很难使用。

> ID：15709947
> 
> 赞同：1
> 
> 时间：2013-03-29T19:13:30.640
> 
> 标签：.net, wpf

假设我有以下用于 WPF 用户控件的 XAML：

```
<Grid Background="#FFCBCBCB">
<Label Content="{Binding Path=Name}"  Margin="115,10,10,91"/>
<Grid/> 
```

当程序运行时，视图会获得一个对象，该对象具有一个名为 Name 的属性。但是，在 Visual Studio 中处理该标签时，该标签不包含任何文本。

**有没有办法拥有一个仅用于开发的占位符，以便我可以更好地可视化控件的外观？**

我已经阅读了关于 fallbackvalue 的信息，但是这似乎只适用于没有空格的字符串。

```
<Label Content="{Binding Path=Name, FallbackValue=Iamonelongstring}"  Margin="115,10,10,91"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:18:16.260

你要找的是`DesignData`

[http://blogs.msdn.com/b/mcsuksoldev/archive/2010/08/27/designdata-mvvm-support-in-blend-vs2010-and-wpf-silverlight.aspx](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/08/27/designdata-mvvm-support-in-blend-vs2010-and-wpf-silverlight.aspx)

应该给个很好的介绍

您基本上可以设置设计时视图模型以仅在设计时提供数据

[http://channel9.msdn.com/events/MIX/MIX11/OPN03](http://channel9.msdn.com/events/MIX/MIX11/OPN03)

在上面的视频中，您还可以看到演示者创建和使用设计时间数据

附带说明一下，`FallbackValue`可以支持空格，将文本用单引号括起来。

就像是：

```
<Label Content="{Binding Path=Name, FallbackValue='I am one long string'}"  Margin="115,10,10,91"/> 
```

不过，您不想这样做，因为`FallbackValue`这不仅是为了设计时间，而且是为了完全不同的目的。您应该研究`DesignData`并使用它来帮助您的设计时间工作（当您说将集合之类的东西和与 DataContexts 绑定作为该组中的对象时，它会提供更多帮助。即使选择了，FallbackValue 也会变得无用使用）

# regex - 匹配一个非边界词

> ID：15709949
> 
> 赞同：-1
> 
> 时间：2013-03-29T19:13:43.473
> 
> 标签：regex, grep

我对非边界词的概念感到困惑，因为 grep 命令没有返回我期望它返回的内容。我正在寻找仅匹配*malloc*单词而不匹配*lmmmalloc*的行，因此我决定使用：

```
grep -inr '\bmalloc\b' . 
```

它返回以下内容：

```
./xxxx.xx:918:    /* Free the malloc before exiting the function. */ 
```

使用以下命令修改 grep 命令以检索包含*lmmmalloc的所有行后：*

```
grep -inr '\Bmalloc\B' . 
```

我希望 \B 返回包含子字符串*malloc*的行，而不是与之前发布的相同结果。我希望结果如下：

```
grep -inr '\blmmmalloc\b' 
./xxxx.xx:376:  string_temp = (char *) lmmmalloc (cxp, 
```

我的理解是否有缺陷，如果是这样，有人可以澄清和纠正 grep 命令吗？

我正在使用 GNU grep 2.5.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:39:10.393

`\Bmalloc\B`表示*前面*`m`必须有一个单词字符，并且*后面*必须有一个单词字符。如果您希望它匹配，请保留第二个原样：*`c`*`immmalloc``\b`**

 **```
grep -inr '\Bmalloc\b' . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:34:08.473

在 grep 中使用这样的单词边界：

```
grep -inr "\<malloc\>" 
```**

# java - 如何将 Eclipse 项目的“Java 构建路径”部分中引用的 jar 包含在使用 build.xml 文件由 Ant 生成的 jar 文件中

> ID：15709951
> 
> 赞同：3
> 
> 时间：2013-03-29T19:13:46.503
> 
> 标签：java, eclipse, build, ant

基本上这是我的要求，如果有人在“Java Build Path”部分中添加或删除了一个jar引用，那么在构建项目并生成项目的jar时应该包含该jar（或者在删除的情况下不包含）带有一个 build.xml 蚂蚁文件。我期待在 xml 文件中引用属性或变量。就像是：

```
<!-- copy the JARs that you need to "target" directory  -->
<copy todir="target">
    <fileset dir="${buildPath}" includes="*.jar" />
</copy> 
```

其中 ${buildPath} 指向“Java 构建路径”。这只是一个例子，并不起作用

请注意，我不想将每个 jar 单独放在 build.xml 中，而是要使用 include="*.jar" 之类的东西，所以如果有人更改 "Java Build Path" ，我不必更改构建.xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:40:08.213

Eclipse 构建路径信息存储在`.classpath`文件中，您可能可以从中解析出简单的位（指向项目工作空间内或外部具有绝对路径的单个 JAR 文件的条目），但这只会让您到目前为止 -还有其他类型的类路径条目，例如基于“类路径变量”的条目、对工作区中其他项目的引用或 Eclipse 插件提供的其他类型的容器。例如，我有 GGTS 插件（用于 Groovy 和 Grails），而我的 Grails 项目`.classpath`根本没有明确列出的 JAR，它只是说

```
<classpathentry kind="con" path="org.grails.ide.eclipse.core.CLASSPATH_CONTAINER"/> 
```

有一个[Ant4Eclipse](http://www.ant4eclipse.org/)项目声称可以帮助解决这个问题，但最近的版本（“里程碑 4”）是从 2010 年中期开始的，我不知道它与最近的 Eclipse 配合得如何。

更好的方法可能是使用[Ivy](http://ant.apache.org/ivy/)以声明方式管理您的依赖项，并让 Ant 构建*和*Eclipse 项目（使用[IvyDE](http://ant.apache.org/ivy/ivyde/)）从那里获取它们的库。当您想要添加或删除依赖项时，您只需编辑`ivy.xml`文件，Ant 和 Eclipse 都会在下一次构建时获取更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T16:25:03.530

使用 xmlproperty 任务将 .classpath 读入属性值。

```
<xmlproperty file=".classpath" collapseAttributes="true" delimiter=";" /> 
```

然后在路径中设置该值

```
<path id="eclipse.classpath">
    <pathelement path="${classpath.classpathentry.path}"/>
</path>

<target name="compile" depends="init">

    <javac srcdir="${src}" destdir="${build}" updatedProperty="compiled">
        <classpath refid="eclipse.classpath"/>
    </javac>
</target> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T20:11:57.543

eclipse 中的*Java 构建路径*实际上是由`.classpath`eclipse 项目中的文件支持的。因此，如果您查看该文件，您将看到 eclipse 使用的所有路径。您可以使用 ant 将它们解析出来。例如，我有一个简单的项目，它有一个指向标准 JRE 库的*Java 构建路径*和一个指向另一个项目（数据集工具）的 jar 的链接。这是我的`.classpath`：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"/>
    <classpathentry kind="lib" path="/dataset-tools/target/dataset-tools.jar"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

因此，如您所见，如果您将一个新 jar 添加到您的*Java 构建路径*，它会反映在`.classpath`文件中：

```
 <classpathentry kind="lib" path="/dataset-tools/target/dataset-tools.jar"/> 
```

您可以使用 ant 来解析该文件以查找`classpathentry`带有 kind 的这些元素`lib`。[这与此处](https://stackoverflow.com/questions/2404224/how-do-i-set-the-eclipse-build-path-and-class-path-from-an-ant-build-file)给出的答案相同。

# sql - 如何正确加入不同的查询，其中不同的查询可能返回不同数量的结果

> ID：15709954
> 
> 赞同：0
> 
> 时间：2013-03-29T19:14:02.987
> 
> 标签：sql, union

我正在使用 SQL Server 2008。我想将三个不同的查询合并在一起，但由于查询的结构不同，我不确定如何正确执行。我的第一个查询创建了两个表来插入记录以进行比较，其中`MAX`返回访问列的 。前任：

询问：

```
SET ANSI_NULLS OFF
GO

-- VARIABLE DECLARATION
DECLARE @STARTDATE DATETIME
DECLARE @ENDDATE DATETIME

-- VARIABLE INITIALIZATION
SET @STARTDATE = '6/1/12';
SET @ENDDATE = '1/1/13';

--#############################################################################################
-- TABLE DECLARATION WHICH WILL BE USED TO GET THE MAX ORDERED DATE                           #
--                                                                                            #
DECLARE @T1 TABLE (ENCOUNTER VARCHAR(200), PT_NAME VARCHAR(500), MRN VARCHAR(200),          --#
                   LOS VARCHAR(200), PT_LOC VARCHAR(500), PT_DISPO VARCHAR(500),            --# 
                   LAB_NAME VARCHAR(500), LAB_VALUE VARCHAR(40),LOWER_LIMIT VARCHAR(30),    --# 
                   UPPER_LIMIT VARCHAR(30), HISTORY VARCHAR(10), HAS_HISTORY VARCHAR(10),   --#
                   AB_CODE VARCHAR(30), ORDER_ENTERED VARCHAR(500))                         --#
DECLARE @T2 TABLE (ENCOUNTER2 VARCHAR(200), PT_NAME2 VARCHAR(500), MRN2 VARCHAR(200),       --# 
                   LOS2 VARCHAR(200), PT_LOC2 VARCHAR(500), PT_DISPO2 VARCHAR(500),         --#
                   LAB_NAME2 VARCHAR(500), LAB_VALUE2 VARCHAR(40),LOWER_LIMIT2 VARCHAR(30), --#
                   UPPER_LIMIT2 VARCHAR(30), HISTORY2 VARCHAR(10), HAS_HISTORY2 VARCHAR(10),--# 
                   AB_CODE2 VARCHAR(30), ORDER_ENTERED2 VARCHAR(500))                       --#
--                                                                                            #
--#############################################################################################

--##       TABLE INSERTIONS     ##
--###########################################################################################
--## WHAT GETS PUT INTO TABLE 1 ##
INSERT INTO @T1
SELECT
A.VisitIDCode,
A.ClientDisplayName,
A.IDCode,
A.LOS,
A.CurrentLocation,
A.DischargeDisposition,
A.ItemName,
A.Value,
A.ReferenceLowerLimit,
A.ReferenceUpperLimit,
A.IsHistory,
A.HasHistory,
A.AbnormalityCode,
A.Entered

FROM
(
-- COLUMN SELECTION
SELECT CV.VisitIDCode, CV.ClientDisplayName, CV.IDCode,DATEDIFF(DD,CV.ADMITDTM,CV.DISCHARGEDTM)AS 'LOS',
CV.CurrentLocation, CV.DischargeDisposition, BO.ItemName, BO.Value,
BO.ReferenceLowerLimit, BO.ReferenceUpperLimit, BO.IsHistory, BO.HasHistory, BO.AbnormalityCode,
BO.Entered

-- DB USED: SCM
FROM CV3ClientVisit CV
JOIN CV3BasicObservation BO
ON CV.GUID = BO.ClientVisitGUID

WHERE CV.AdmitDtm BETWEEN @STARTDATE AND @ENDDATE
AND CV.TypeCode = 'INPATIENT'
AND BO.Value IS NOT NULL
AND (BO.ItemName LIKE '%SODIUM LEVEL%'
OR BO.ITEMNAME LIKE '%HEMOG%')
)A 

--##       TABLE INSERTIONS     ##
--###########################################################################################
--## WHAT GETS PUT INTO TABLE 2 ##
INSERT INTO @T2
SELECT
B.VisitIDCode,
B.ClientDisplayName,
B.IDCode,
B.LOS,
B.CurrentLocation,
B.DischargeDisposition,
B.ItemName,
B.Value,
B.ReferenceLowerLimit,
B.ReferenceUpperLimit,
B.IsHistory,
B.HasHistory,
B.AbnormalityCode,
B.Entered

FROM
(
-- COLUMN SELECTION
SELECT CV.VisitIDCode, CV.ClientDisplayName, CV.IDCode,DATEDIFF(DD,CV.ADMITDTM,CV.DISCHARGEDTM) AS 'LOS', 
CV.CurrentLocation,CV.DischargeDisposition, BO.ItemName, BO.Value,BO.ReferenceLowerLimit, BO.ReferenceUpperLimit,   
BO.IsHistory, BO.HasHistory, BO.AbnormalityCode,BO.Entered

-- DB USED: SCM
FROM CV3ClientVisit CV
JOIN CV3BasicObservation BO
ON CV.GUID = BO.ClientVisitGUID

WHERE CV.AdmitDtm BETWEEN @STARTDATE AND @ENDDATE
AND CV.TypeCode = 'INPATIENT'
AND BO.Value IS NOT NULL
AND (BO.ItemName LIKE '%SODIUM LEVEL%'
OR BO.ITEMNAME LIKE '%HEMOG%')
)B

--###########################################################################################
--## HERE IS WHERE WE DO TABLE COMPARISONS ##

SELECT
DISTINCT T1.ENCOUNTER,
T1.PT_NAME AS 'PT NAME', T1.MRN AS 'MRN', T1.LOS AS 'LOS', T1.PT_LOC AS 'PT LOC',
T1.PT_DISPO AS 'PT DISPO', T2.LAB_NAME2 AS 'LAB NAME', T2.LAB_VALUE2, T2.LOWER_LIMIT2 AS 'LOWER LIMIT',
T2.UPPER_LIMIT2 AS 'UPPER LIMIT', T2.AB_CODE2 AS 'AB CODE', T2.ORDER_ENTERED2

FROM @T1 T1
JOIN @T2 T2
ON T1.MRN = T2.MRN2

WHERE
T1.ENCOUNTER = T2.ENCOUNTER2
AND T1.ORDER_ENTERED < T2.ORDER_ENTERED2
AND T2.ORDER_ENTERED2 = (
                        SELECT MAX(TEMP.ORDER_ENTERED2)
                        FROM @T2 TEMP
                        WHERE T1.MRN = TEMP.MRN2
                        ) 
```

结果

```
CLIENT ID    VISIT ID     ARRIVE DATE     VALUE     DATE VALUE ORDERED
.......................................................................
1      |     1      |     1/1/13     |    5     |   1/1/13
1      |     1      |     1/1/13     |    6     |   1/2/13 <- returned row 
```

此查询将返回日期值排序为 1/2/13 的行。

第二个查询计算了客户 ID 列中的客户在 12 个月的时间范围内出现了多少次。因此，对于上述内容，它将返回类似于查询 2 的内容：

```
-- VARIABLE DECLARATION
DECLARE @STARTDATE DATETIME
DECLARE @ENDDATE DATETIME

-- INITIALIZE VARIABLES
SET @STARTDATE = '6/1/12';
SET @ENDDATE = '1/1/13';

-- COLUMN SELECTION
SELECT DISTINCT CV.IDCode AS 'MRN', COUNT(CV.IDCODE) AS 'COUNT OF IP VISITS'

FROM CV3ClientVisit CV

WHERE CV.AdmitDtm BETWEEN @STARTDATE AND @ENDDATE
AND CV.TypeCode LIKE '%INPATIENT'
AND CV.VisitStatus IN(
'ADM',
'DSC'
)
GROUP BY CV.IDCode
ORDER BY COUNT(CV.IDCode) DESC 
```

结果：客户 ID 访问次数 ................................................... 1 | 2

第三个也是最后一个查询告诉我他们做了多少次，例如

查询 3：

```
Declare @procedures Table (MRN varchar(20), Patient varchar(80), VisitID varchar(20), Admit datetime, Disch datetime, SurgProc varchar(200), ProcDesc varchar(200))
insert into @procedures

select cv.IDCode,cv.ClientDisplayName,cv.VisitIDCode,AdmitDtm,cv.DischargeDtm,ed.Description,ed.text from CV3ClientVisit cv
left join cV3ClientEventDeclaration ed
    on cv.GUID=ed.ClientVisitGUID
        where ed.typecode = 'Surgery'
        and cv.AdmitDtm > '6/30/12' and cv.AdmitDtm <='1/1/13'
        and Status = 'Active'

    select visitid, COUNT(visitid)as '#Surg Procs' from @procedures
        group by visitid 
```

结果：

```
CLIENT ID     VISIT ID     ARRIVE DATE     DEPART DATE     COUNT OF PR VISITS
...............................................................................
1         |   1         |  1/1/13       |  1/3/13       |  3 
```

所以我的问题是，我如何正确地`JOIN`将所有这些查询放在一起以获得一个结果？有时客户可能没有针对其中一个查询的结果。

谢谢你，

PS我希望这一切都清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:02:56.910

我怀疑你不想要 a`union`而是想要`join`. 这会将所有字段放在一行中：

```
SELECT q1.CLIENT_ID, q1.VISIT_ID, q1.ARRIVE_DATE,
       q3.DEPART_DATE, q3.LENGTH_OF_STAY,
       q1.VALUE, q1.DATE_VALUE_ORDERED,
       q4.Count_of_Visits
FROM (<query1>
     ) q1 left outer join
     (<query2>
     ) q2
     on q1.client_id = q2.client_id left outer join
     (<query3>
     ) q3
     on q1.client_id = q3.client_id and q1.client_id = q3.visit_id left outer join
     (<query4>
     ) q4
     on q1.client_id = q4.client_id and q1.client_id = q4.visit_id 
```

我还猜测您可以在一个更简单的查询中获取所有数据。也就是说，这四个子查询可能不是必需的。如果您有兴趣对此进行调查，您应该问另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:25:57.403

一种方法是识别在您要联合的所有查询中选择的所有列，然后将具有空值的适当命名和定位的列（查询中缺少相关列）添加到每个查询 - 即。就像是：

```
SELECT CLIENT_ID,
       VISIT_ID,
       ARRIVE_DATE,
       NULL DEPART_DATE,
       NULL LENGTH_OF_STAY,
       VALUE,
       DATE_VALUE_ORDERED,
       NULL Count_of_Visits,
       1 QUERY_ID
FROM   {Query 1}
UNION ALL
SELECT CLIENT_ID,
       NULL VISIT_ID,
       NULL ARRIVE_DATE,
       NULL DEPART_DATE,
       NULL LENGTH_OF_STAY,
       NULL VALUE,
       NULL DATE_VALUE_ORDERED,
       Count_of_Visits,
       2 QUERY_ID
FROM   {Query 2}
UNION ALL
SELECT CLIENT_ID,
       VISIT_ID,
       ARRIVE_DATE,
       DEPART_DATE,
       LENGTH_OF_STAY,
       NULL VALUE,
       NULL DATE_VALUE_ORDERED,
       NULL Count_of_Visits,
       3 QUERY_ID
FROM   {Query 3}
UNION ALL
SELECT CLIENT_ID,
       VISIT_ID,
       ARRIVE_DATE,
       DEPART_DATE,
       NULL LENGTH_OF_STAY,
       NULL VALUE,
       NULL DATE_VALUE_ORDERED,
       Count_of_PR_Visits Count_of_Visits,
       4 QUERY_ID
FROM   {Query 4} 
```

# sql-server - SQL：子选择日期

> ID：15709955
> 
> 赞同：1
> 
> 时间：2013-03-29T19:14:05.410
> 
> 标签：sql-server, subquery

我有这个 SQL：

```
Select history.date, history.rasID, status.status
From RAS_RASHistory as history
inner join RAS_Status as status on History.statusID = status.statusID
Where history.date between @startDate 
      and @endDate and history.statusID in (select value from @status)
order by rasID, history.date desc 
```

当我执行它时，我得到以下结果：

```
date                    rasID   status
2011-11-17 14:15:21.693 10000   Planning
2011-11-17 14:14:53.177 10000   New
2011-11-16 08:39:47.770 10000   New
2011-11-16 09:18:50.630 10001   New
2011-11-16 11:26:23.867 10002   Planning
2011-11-16 10:01:42.050 10002   Planning
2011-11-16 10:00:36.527 10002   New 
```

我真正想要的是：

```
date                    rasID   status
2011-11-17 14:15:21.693 10000   Planning
2011-11-16 09:18:50.630 10001   New
2011-11-16 11:26:23.867 10002   Planning 
```

但我不确定如何获得它。我认为子选择可能是一种方式，但我不太确定。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:18:38.650

```
;WITH x AS 
(
  Select h.[date], h.rasID, s.[status], -- please pick better column names!
    rn = ROW_NUMBER() OVER (PARTITION BY h.rasID ORDER BY h.[date] DESC)
  FROM dbo.RAS_RASHistory as h -- please use dbo prefix!
  INNER JOIN dbo.RAS_Status as s -- please use manageable aliases!
  ON h.statusID = s.statusID
  Where h.date between @startDate and @endDate 
  and h.statusID in (select value from @status)
)
SELECT [date], rasID, [status]
FROM x
WHERE rn = 1
order by rasID, [date] desc; 
```

[另外请注意`BETWEEN`日期范围](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)。

您也可以将其重写为：

```
;WITH h AS
(
  SELECT [date], rasID, statusID,
    rn = ROW_NUMBER() OVER (PARTITION BY rasID ORDER BY [date] DESC
  FROM dbo.RAS_RASHistory
  WHERE [date] BETWEEN @startDate AND @endDate
  AND statusID IN (SELECT value FROM @status)
)
SELECT h.[date], h.rasID, s.[status]
   FROM h INNER JOIN dbo.RAS_Status AS s
   ON h.statusID = s.StatusID
   AND h.rn = 1
ORDER BY h.rasID, h.[date] DESC; 
```

# c++ - 使用 NVAPI 从 NVidia GPU 获取温度

> ID：15709958
> 
> 赞同：4
> 
> 时间：2013-03-29T19:14:16.113
> 
> 标签：c++, gpu, nvidia, temp, nvapi

过去几天我一直在尝试使用 C++ 获取 GPU 的温度

使用 NVAPI 我有以下代码

```
#include "stdafx.h"
#include "nvapi.h"

int _tmain(int argc, _TCHAR* argv[])
{
    NvAPI_Status ret = NVAPI_OK;
    int i=0;

    NvDisplayHandle hDisplay_a[NVAPI_MAX_PHYSICAL_GPUS*2] = {0};

    ret = NvAPI_Initialize();

    if (!ret == NVAPI_OK){
        NvAPI_ShortString string;
        NvAPI_GetErrorMessage(ret, string);
        printf("NVAPI NvAPI_Initialize: %s\n", string);
    }

    NvAPI_ShortString ver;

    NvAPI_GetInterfaceVersionString(ver);
    printf("NVAPI Version: %s\n", ver);

    NvU32 cnt;

    NvPhysicalGpuHandle phys;

    ret = NvAPI_EnumPhysicalGPUs(&phys, &cnt);

    if (!ret == NVAPI_OK){
        NvAPI_ShortString string;
        NvAPI_GetErrorMessage(ret, string);
        printf("NVAPI NvAPI_EnumPhysicalGPUs: %s\n", string);
    }

    NvAPI_ShortString name;

    NV_GPU_THERMAL_SETTINGS thermal;

    ret = NvAPI_GPU_GetFullName(phys, name);
    if (!ret == NVAPI_OK){
        NvAPI_ShortString string;
        NvAPI_GetErrorMessage(ret, string);
        printf("NVAPI NvAPI_GPU_GetFullName: %s\n", string);
    }

    printf("Name: %s\n", name);
    thermal.version =NV_GPU_THERMAL_SETTINGS_VER;
    ret = NvAPI_GPU_GetThermalSettings(phys,0, &thermal);

    if (!ret == NVAPI_OK){
        NvAPI_ShortString string;
        NvAPI_GetErrorMessage(ret, string);
        printf("NVAPI NvAPI_GPU_GetThermalSettings: %s\n", string);
    }

    printf("Temp: %l C\n", thermal.sensor[0].currentTemp);

    return 0;
} 
```

我得到的输出是

```
NVAPI Version: NVidia Complete Version 1.10
Name: GeForce GTX 680
Temp:  C 
```

所以 NVAPI 正在初始化，它可以找到我的 GTX680 GPU，但它不会返回温度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:37:19.327

`printf`对它传递的参数的大小和类型非常敏感。

由于`currentTemp`固定为 32 位无符号（并且 C++ 不保证`printf`喜欢的类型的特定位数），因此将其转换为`printf`可以预期的类型。

```
printf("Temp: %u C\n", static_cast<unsigned>(thermal.sensor[0].currentTemp) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-19T00:56:16.047

我认为问题在于您需要通过以下方式设置热设置：

```
NV_GPU_THERMAL_SETTINGS ThermalInfo;
ThermalInfo.version = NV_GPU_THERMAL_SETTINGS_VER_2;
ThermalInfo.sensor[0].controller = NVAPI_THERMAL_CONTROLLER_GPU_INTERNAL;
ThermalInfo.sensor[0].target = NVAPI_THERMAL_TARGET_GPU; 
```

你也应该写：

```
NvPhysicalGpuHandle  nvGPUHandle[NVAPI_MAX_PHYSICAL_GPUS]; 
```

因为你可能会破坏内存。（注意查看 NVAPI 提供的文档中的 NvAPI_EnumPhysicalGPUs）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T17:35:10.197

您的代码几乎可以正常工作，只是这些行上的拼写错误；）

```
(!ret == NVAPI_OK) 
```

将它们更改为：

```
(ret != NVAPI_OK) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-24T19:14:30.983

您已经能够为 thermo.sensor[0].currentTemp 获得正确的值，

只是您在打印时弄错了。

请查看 Nvapi 中的 thermo.sensor 结构：

```
struct
{
    NV_THERMAL_CONTROLLER       controller;         //!< internal, ADM1032, MAX6649...
    NvS32                       defaultMinTemp;     //!< Minimum default temperature value of the thermal sensor in degree Celsius
    NvS32                       defaultMaxTemp;     //!< Maximum default temperature value of the thermal sensor in degree Celsius
    NvS32                       currentTemp;        //!< Current temperature value of the thermal sensor in degree Celsius
    NV_THERMAL_TARGET           target;             //!< Thermal sensor targeted - GPU, memory, chipset, powersupply, Visual Computing Device, etc
} sensor[NVAPI_MAX_THERMAL_SENSORS_PER_GPU]; 
```

它表明 NvS32 currentTemp 是有符号的 32 位整数。

# c - 错误：函数“g_slist_free_full”的隐式声明

> ID：15709962
> 
> 赞同：2
> 
> 时间：2013-03-29T19:14:22.817
> 
> 标签：c, compilation, compiler-errors, implicit-declaration

我正在尝试编译一些名为[libfprint](http://www.freedesktop.org/wiki/Software/fprint/libfprint)的软件。我已经在另一台机器上成功编译了它，但是现在，在许多文件中，我收到以下错误：

```
tomselleck@ubuntuselleck:~/Documents/FingerBellProject/libfprint-0.5.0$ sudo make
[sudo] password for tomselleck: 
make  all-recursive
make[1]: Entering directory `/home/tomselleck/Documents/FingerBellProject/libfprint-0.5.0'
Making all in libfprint
make[2]: Entering directory `/home/tomselleck/Documents/FingerBellProject/libfprint-0.5.0/libfprint'
  CC       libfprint_la-aes1610.lo
drivers/aes1610.c: In function 'capture_read_strip_cb':
drivers/aes1610.c:619: error: implicit declaration of function 'g_slist_free_full'
make[2]: *** [libfprint_la-aes1610.lo] Error 1
make[2]: Leaving directory `/home/tomselleck/Documents/FingerBellProject/libfprint-0.5.0/libfprint'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/tomselleck/Documents/FingerBellProject/libfprint-0.5.0'
make: *** [all] Error 2 
```

有任何想法吗？谢谢 ！

**编辑**

我将发布一个引发错误的行的示例：

```
 /* stop capturing if MAX_FRAMES is reached */
    if (aesdev->blanks_count > 10 || g_slist_length(aesdev->strips) >= MAX_FRAMES) {
        struct fp_img *img;

        fp_dbg("sending stop capture.... blanks=%d  frames=%d", aesdev->blanks_count, g_slist_length(aesdev->strips));
        /* send stop capture bits */
        aes_write_regv(dev, capture_stop, G_N_ELEMENTS(capture_stop), stub_capture_stop_cb, NULL);
        aesdev->strips = g_slist_reverse(aesdev->strips);
        img = aes_assemble(aesdev->strips, aesdev->strips_len,
            FRAME_WIDTH, FRAME_HEIGHT);

        g_slist_free_full(aesdev->strips, g_free);<---- Error here

        aesdev->strips = NULL;
        aesdev->strips_len = 0;
        aesdev->blanks_count = 0;
        fpi_imgdev_image_captured(dev, img);
        fpi_imgdev_report_finger_status(dev, FALSE);
        /* marking machine complete will re-trigger finger detection loop */
        fpi_ssm_mark_completed(ssm);
        /* Acquisition finished: restore default gain values */
        restore_gain();
    } else {
        /* obtain next strip */
        fpi_ssm_jump_to_state(ssm, CAPTURE_REQUEST_STRIP);
    }

out:
    g_free(data);
    libusb_free_transfer(transfer);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:21:13.123

这发生在

*   该函数的第一次使用在其定义之前，
*   该函数没有原型，或者
*   缺少所需的头文件。

在第一次使用之前，确保文本或标题中有原型，或者将函数移动到文件的前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:07:46.600

...also (parenthetically) don't run `make` as root, with sudo. That's partly because one can imagine something breaking during the build which stomps on something important (which not being root would have prevented), and also on the general principle that it's good to be root as little as possible.

If you are indeed installing something in a system location such as `/usr/local`, build as yourself, then do `make -n install` and check what's going to be installed where (presuming the thing you're building has an install target). If everything looks OK, only then do `sudo make install`.

# c# - 在 WinRT C# 应用程序上禁用 GridView 的鼠标右键单击事件

> ID：15709966
> 
> 赞同：1
> 
> 时间：2013-03-29T19:14:48.247
> 
> 标签：c#, gridview, windows-runtime, right-click

我的 WinRT 应用程序中有一个 GridView，问题是 gridViwes 的标准功能之一是当您单击右键（鼠标）时，单击的项目被选中，这将专注于该项目，并从前一个，我不会发生这种情况，我需要禁用右键单击鼠标-我认为这是解决方案，，，-但是如果您认为禁用鼠标右键单击事件是错误的，请给我其他建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:30:43.937

我认为这不是最好的解决方案，我真的不知道 WinRT 的 GridView，但我是 Silverlight 开发人员，所以我认为您可以订阅单元格的 MouseRightButtunUp/Down 事件并`e.Handled = true;`在代码隐藏中处理它们.

对于 WinRT（编辑）：

```
 private void Target_PointerMoved(object sender, PointerRoutedEventArgs e)
    {
     if (ptr.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Mouse)
     {
        Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
        if (ptrPt.Properties.IsLeftButtonPressed)
        {
        e.Handled = true;
        }
     }
    } 
```

希望这个有帮助！

# css - css问题为什么我的图片不显示？

> ID：15709967
> 
> 赞同：0
> 
> 时间：2013-03-29T19:14:52.130
> 
> 标签：css

这是我第一次使用堆栈溢出，所以如果你能为我回答这个问题，我将不胜感激。我的 css 有问题，因为它没有显示我想在我的网站上显示的三个图像。其中两个图像用于网站的顶部边框和底部边框，标题图像是将在网站中显示的主图像。下面是我的css的副本，所以如果你能回复我，我将不胜感激，谢谢。

```
 body, h1, p, nav ul {
    margin: 0;
    padding: 0;
    color: "#B0E0E6";
}
table{id:"Table_01" width="1500" border="0" cellpadding="0" cellspacing="0"

}
img {
    id:top ;
    src:"205&#x20;images/top.jpg";
    width:1750px;
    height:154px;

   margin-top: 5px;
}

nav ul li {
    display:inline;

}

nav ul li a {
    text-decoration: none;
    color: black;
    height: 40px;
    border-bottom: 0px solid black;
    border-top: 0px solid black;
    padding-left: 300px;
    padding-top: 5px;
}

nav ul li a:hover {
    background-color: white;
    color: red;
}
h1 {
    padding-top: 50px;
    padding-left: 0px;
    color: yellow;
    font-size: 90px;

    white-space: nowrap;
    margin-left:0px;
    margin-top:150px;
    position: relative;
}
h2 {
    padding-top: 50px;
    padding-left: 30px;
    color: black;
    text-align: left;
    margin-left: opx;

}

h3 {  
    padding-top: 50px;
    padding-left: 30px;
    color: white;
    margin-right:155px;
    margin-top:-100px;
    position: relative;
    float: right;
    text-align: top;
 }

  }
 header { 
    background-image: url('banner.jpg');
    background-repeat: no-repeat;
    height:400px;
    width:1750px;

    margin-top:250px;
    position:relative;
    float: left;

}

 }

footer ul {
    list-style: none;
}
footer ul li {
    display:inline;
}
footer ul li a {
      text-decoration: none;
    color: black;
    height: 50px;
    border-bottom: 0px solid black;

    padding-left: 300px;
    padding-top: 5px;
}
footer ul li a:hover {
    background-color: blue;
    color: black;
}
footer {
    background-color: white;
    bottom:0px;
    width: 1750px;
    color: white;
    clear: both;
    margin-bottom: 10px;

}
img {

    src:"205&#x20;images/bottom.jpg";
    width:1750px;
    height:132px;
    alt:"";
    position: relative;
    bottom: 600px;
}

nav {
    background-color: blue;
    width: 1750px;
    float: left;
    margin-top: 130px;
}
article {
    background-color:#ADD8E6 ;
    color: black;
    text-align:left;
    margin-left: 0px;
    margin-bottom: 5px;
    font-size: 20px;
    }
forms{

 margin-left:300px;
 width: 10em;
 margin-bottom: 300px

}

#page {
    background-color: #ADD8E6;
    width: 800px;
    margin: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:19:19.530

您应该阅读有关 CSS 基础知识的更多信息。一个很好的起点是[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/CSS)。您的 css 文件中有几个语法错误。在这里试试这个：

```
.YourImageClass {
    background:url("images/top.jpg");
    width: 1750px;
    height: 154px;
    margin-top: 5px;
} 
```

但请注意，这只适用于具有*YourImageClass*类的元素。例如：

```
<div class="YourImageClass">...</div> 
```

# mysql - MySQL模拟行号

> ID：15709972
> 
> 赞同：0
> 
> 时间：2013-03-29T19:15:36.423
> 
> 标签：mysql, sql

我感兴趣地阅读了以下关于在 MySQL 中模拟 rownum 的博客文章：

[http://craftycodeblog.com/2010/09/13/rownum-simulation-with-mysql/](http://craftycodeblog.com/2010/09/13/rownum-simulation-with-mysql/)

我想扩展这个概念，让行号在满足特定条件时重置，即其他一些列更改值，因此结果将如下所示：

```
 id | date       | rownum
-----+------------+--------
   1 | 2013-03-20 |      1
   2 | 2013-03-20 |      2
   3 | 2013-03-20 |      3
   4 | 2013-03-21 |      1   <-- rownum resets because date changes
   5 | 2013-03-21 |      2
   6 | 2013-03-21 |      3
   7 | 2013-03-22 |      1
   8 | 2013-03-22 |      2 
```

几个小时以来，我一直试图弄清楚这一点，但没有任何令人满意的表现。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:23:20.920

您可以使用以下方法实现用户定义的变量以获取每组日期的行号：

```
select id, date, rownum
from
(
  select id,
    date,
    @row:=case when @prev=date then @row else 0 end +1 rownum,
    @prev:=date  
  from yourtable
  cross join (select @row:=0, @prev:=null) c
  order by date
) d
order by date, rownum 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/dd40a/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:53:25.693

这有效，请参阅[http://www.sqlfiddle.com/#!2/e7f5e/11](http://www.sqlfiddle.com/#!2/e7f5e/11)

```
SELECT if(changed, @rownum:=1, @rownum:=@rownum + 1) as rownum, rowdate
FROM (SELECT if(@lastdate=rowdate, '', @lastdate:=rowdate) as changed, rowdate
      FROM dates) flagged,
     (SELECT @rownum:= 0, @lastdate:='') setup; 
```

# php - $_POSTing 多个具有相同 id 的输入，这些输入是通过 jQuery 在单击时添加的。

> ID：15709974
> 
> 赞同：0
> 
> 时间：2013-03-29T19:15:38.793
> 
> 标签：php, javascript, jquery, mysql

我的网站搜索 Spotify 库并返回结果列表。用户可以单击其中一个结果并将其添加到播放列表中，该列表又将作为表单提交的一部分发布。下面的代码将点击的歌曲添加到 .selected-list 容器中，然后使用 Spotify 歌曲 href 的值将隐藏的输入添加到 DOM。

```
 $('.spotify-result').click(function() {
    var $input = $('<input type="hidden" id="track_href" class="track" value="" name="track_href" />');
    $(this).clone().appendTo($('.selected-list'));
    $('.submit-spotify').before($input);
    $input.val($('.track-href', this).text());
 }); 
```

我在这里遇到的问题是，每个输入都被赋予了一个 'track_href' 的 id，它是在 $_POST 变量中发送的。下面的 PHP 显示了我如何将它添加到我的表中。

```
$song_query = "INSERT INTO songs (playlist_id, href) VALUES ('$playlist_id', '$href')";
if (mysql_query($song_query)) {
    $message = "<p>Congratulations, your Journix has been added.</p>";
} else {
    $message = ("Insert failed. " . mysql_error() . "<br/>" . $song_query);
} 
```

此刻发生的只是第一首歌曲被添加到表中。我猜想我需要某种循环来遍历每个输入，但我确信用相同的 id 发布每个输入并不是解决问题的方法。

我知道 mysql 功能正在贬值，但这是针对需要我使用 mysql 的大学项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:20:35.787

有两个问题。

首先，html id 必须是唯一的。除非您使用 jquery 来获取这些 id，否则这不会真正影响您，但您仍然应该更改它。你真的需要身份证吗？

其次，具有相同名称的输入将相互覆盖。为了保存这一切，我会把它做成一个数组。

```
name="track_href[]" 
```

之后，您可以遍历 $_POST['track_href'] 并进行插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:23:24.143

它是 $_POST 数组中的键，而不是输入的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T19:25:43.010

it isnt the `id` of the `input` field but the `name` attirbute. You need to make them unique or an array for easy access in backend PHP script.

**in frontend** use

```
var $input = $('<input type="hidden" id="track_href" class="track" value="" name="track_href[]" />'); 
```

instead of

```
var $input = $('<input type="hidden" id="track_href" class="track" value="" name="track_href" />'); 
```

**in backend**

```
//$href is an array now
  foreach($href as $v){
     $tmp[] = "('$playlist_id', '".mysql_real_escape_string($v)."')";
  }
  $song_query = "INSERT INTO songs (playlist_id, href) VALUES ".implode(',', $tmp); 
```

# jquery-ui - 不能拖动 div 但可以拖动图像

> ID：15709976
> 
> 赞同：0
> 
> 时间：2013-03-29T19:16:03.003
> 
> 标签：jquery-ui

我想将小部件区域中的几个元素拖到另一个 div 中。其中一个元素是蓝色框的图像，另一个是橙色背景的 div：![在此处输入图像描述](../Images/2560e78dd1b5fe762a7c65f5347ebf23.png)

两者都有 class="widget"。拖放线是：

```
$(document).ready(function(){
        $('.widget').draggable({opacity:'0.5', helper:'clone'});      
        $('#page').droppable({accept:'.widget'});
}); 
```

问题是只有蓝色图像是可拖动的。

这里有一个 jsFiddle：http: [//jsfiddle.net/stevea/2Xu2P/](http://jsfiddle.net/stevea/2Xu2P/) 您可以看到可以拖动蓝色图像但不能拖动橙色 div。

有没有人看到问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:45:12.667

我已经在[这里](http://jsfiddle.net/2Xu2P/5/)测试过，它可以工作，如果你删除`helper: 'clone'`.

相反，如果您确实需要克隆功能，请查看[此处](https://stackoverflow.com/questions/867469/when-i-make-a-draggable-clone-and-drop-it-in-a-droppable-i-cannot-drag-it-again)。

# asp.net - Telerik RadGrid_Itemdatabound

> ID：15709979
> 
> 赞同：1
> 
> 时间：2013-03-29T19:16:09.410
> 
> 标签：asp.net, telerik-grid

我试图在 gridview 上显示从数据库中获取的记录。但是，我无法将获取的数据与 grid_itemdatabound 绑定。

从数据库中获取记录后，我无法进入 if 条件。如果条件为 false，它就像部分“e.Item is GridDataItem”一样发生。有什么建议吗？

这是 .aspx 代码，我遇到了问题。

```
private void RadGrid_Itemdatabound(object sender, Telerik.Web.UI.GridItemEventArgs e)
{

    if ((e.Item is GridDataItem)) 
    {
        lblMessage.Text = "SOME TEXT TO BE PRNTED";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:04:36.923

`Itemdatabound`事件也包括其他类型的项目，例如`GridHeaderItem`.

例如，如果`e.Item`是`GridHeaderItem`，则为`e.Item is GridDataItem`假。

此外，如果要访问项目内的控件，则需要强制转换为适当的控件类型。

例如，

```
private void RadGrid_Itemdatabound(object sender, GridItemEventArgs e)
{
   if (e.Item is GridDataItem) 
   {
      var item = (GridDataItem) e.Item;
      var user= (User) e.Item.DataItem; // Cast to appropriate object
      var lblMessage = (Label) item.FindControl("lblMessage");
      lblMessage.Text = user.FirstName;
   }
} 
```

# apache - .htaccess 与 EasyPHP：RewriteRule 不起作用

> ID：15709980
> 
> 赞同：1
> 
> 时间：2013-03-29T19:16:11.780
> 
> 标签：apache, mod-rewrite, easyphp

我一直在尝试在我的开发环境中启用 URL 重写。我使用 EasyPHP 5.4.6。我正在尝试创建一个仅影响一个站点（别名）的简单重写规则（将 /about-us/ 重写为 about-us.php）。我已将 .htaccess 文件放在该页面的根文件夹中。我已经处理了这些事情： 1\. mod_rewrite 模块加载在 httpd.conf 2\. phpinfo() 列出加载模块中的 mod_rewrite 3\. 我的规则有效（在线测试） 4\. .htaccess 存储在页面的根文件夹中5\. 该站点的文件夹在配置文件中定义为别名 6\. 在该定义中，AllowOverride 设置为 All

猜猜看，RewriteRule 不起作用，我不断收到 404 错误。知道是什么原因造成的吗？

这是来自 httpd.conf 的别名定义

```
Alias "/website" "C:/local/website"
<Directory "C:/local/website">
Options FollowSymLinks Indexes
AllowOverride All
Order deny,allow
Allow from 127.0.0.1
Deny from all
Require all granted 
```

这是我的 .htaccess

```
RewriteEngine On
RewriteBase /
RewriteRule ([a-zA-Z0-9\-]+)/? $1.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:20:16.063

您正在使用“/website”别名，我认为您应该在本地 .htaccess 文件（即`RewriteBase /website`）中声明具有相同值的 RewriteBase。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T23:52:42.580

我建议使用EasyPHP*的“虚拟主机管理器”模块。*

# node.js - Express3 JS - 在路由中访问和设置会话数据

> ID：15709989
> 
> 赞同：0
> 
> 时间：2013-03-29T19:17:03.783
> 
> 标签：node.js, express, node-mysql

我正在尝试在 node-mysql 查询回调中访问 nodejs 服务器会话变量，但我似乎无法访问或设置 req.session 中的任何变量。

```
connection.connect();   
    connection.query('SELECT id, firstname, lastname FROM users WHERE username = ? AND password = ?', [username, password] , function(err, rows, fields) {
        if (err) throw err;
        console.log(rows.length);

        if(rows.length > 0){
            console.log('Firstname: ' + rows[0]['firstname'] + ' Last Name: ' + rows[0]['lastname']);
            req.session.firstname = rows[0]['firstname'];
            req.session.lastname = rows[0]['lastname'];
        } else {
            console.log('No Results');
        }
    }); 
    connection.end(); 
```

正如您在上面看到的，我正在尝试将名字和姓氏添加到会话中作为测试，以查看会话是否正常工作，但这最终将成为身份验证系统的一部分。

实现这一目标的最佳方法是什么。我错过了一些重要的中间件吗？

编辑：这是 routes.login_process 中的完整代码

```
var mysql = require('mysql');
var md5 = require('MD5');

exports.login_process = function(req, res){
    var username = req.body.username;
    var password = md5(req.body.password);

    var connection = mysql.createConnection({
        host     : 'localhost',
        user     : 'root',
        database : 'node',
        password : 'test',
    });

    connection.connect();   
    connection.query('SELECT id, firstname, lastname FROM users WHERE username = ? AND password = ?', [username, password] , function(err, rows, fields) {
        if (err) throw err;
        console.log(rows.length);

        if(rows.length > 0){
            console.log('Firstname: ' + rows[0]['firstname'] + ' Last Name: ' + rows[0]['lastname']);
            req.session.firstname = result[0]['firstname'];
            req.session.lastname = result[0]['lastname'];
        } else {
            console.log('No Results');
        }
    });
    connection.end();

    res.writeHead(200);
    res.end();
    //res.redirect('http://www.bbc.co.uk');
} 
```

这是从发布到 /login 的表单发布的

```
app.post('/login', routes.login_process); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:00:43.860

The problem is that query is asynchronous, and your res.end() is occurring synchronously after the connection is initiated, thus ending the request before the query callback executes. After the response is ended, the request object can no longer be referenced. Change your code to:

```
connection.connect();   
connection.query('SELECT id, firstname, lastname FROM users WHERE username = ? AND password = ?', [username, password] , function(err, rows, fields) {
    if (err) throw err;
    console.log(rows.length);

    if(rows.length > 0){
        console.log('Firstname: ' + rows[0]['firstname'] + ' Last Name: ' + rows[0]['lastname']);
        req.session.firstname = result[0]['firstname'];
        req.session.lastname = result[0]['lastname'];
    } else {
        console.log('No Results');
    }

    res.writeHead(200);
    res.end();
});

connection.end(); 
```

This causes your response to wait until the query has completed.

Note that I am not sure where exactly the connection.end() will have to go. If it doesn't work where I put it, try moving it to where res.end() is (however this may or may not work depending on if the library you are using waits for existing queries before ending, or simply kills them)

# javascript - Javascript, Flotr2 是什么意思 [[ value,value]]

> ID：15709990
> 
> 赞同：0
> 
> 时间：2013-03-29T19:17:04.987
> 
> 标签：javascript, flotr

我不是 javascript 专家，但我知道如何使用它。但我不明白这段代码：

```
d2 = [[0, 3]] 
```

这是什么意思？我在谷歌上找不到。我迷路了，我试图将 0 更改为任何其他数字，但它什么也没改变。

此代码是 flotr2 网站上饼图示例的一部分： [http ://humblesoftware.com/flotr2/index#!basic-pie](http://humblesoftware.com/flotr2/index#!basic-pie)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:18:56.603

它是一个包含一个项目的数组，恰好是一个包含两个元素的数组：0 和 3。您可以将其扩展为矩阵。

```
d2 = [
        ["1,1", "1,2", "1,3"]
      , ["2,1", "2,2", "2,3"]
      , ["3,1", "3,2", "3,3"]
];

d2[0][0] === "1,1"; // The first element 
```

或者也许是一组 xy 点。

```
d2 = [[1,1], [2,2], [3,3]]; // points in the equation: y = x;
d3 = [[1,1], [2,4], [3,9]]; // points in the equation: y = x^2; 
```

这称为数组文字。数组可以包含任何东西，包括数组、对象等。

![在此处输入图像描述](../Images/cdde68ffa2c9219dd80d55adfe53d206.png)

图片取自[json.org](http://json.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T23:13:56.770

据我所知

```
d2 = [[0, 3]] 
```

对于上面的片段：

d2：数据序列2值 0：表示x坐标值（饼图中忽略） 3：表示y坐标值

既然 x 坐标值被忽略了，为什么我们需要它呢？不知道..可能只是懒惰的编码。

仅供参考：请注意：

```
d2 = [[, 3]] 
```

...也可以正确渲染，但是

```
d2 = [[3]] 
```

...引发错误

# c# - Send a key to Windows desktop

> ID：15709991
> 
> 赞同：1
> 
> 时间：2013-03-29T19:17:06.033
> 
> 标签：c#, windows

I want to build an app to send programmatically keystrokes to Windows desktop and not to a specified windows. For example if we hit arrows keys then the icons in the desktop are selected... Is it possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:00:19.707

SendInput windows API would do what you want. In fact sending input to a targeted window is a more difficult task. SendInput will send the input to the virtual input queue corresponding to the windows session of the process that is calling this API. The input or keys if you will, will land on whatever desktop that is active and inside that whatever window that is in the foreground.

If the Listview control that shows the desktop icons is the foreground window then the arrow keys you would send would move the selection - otherwise it might move a cursor on a notepad (if notepad is the foreground window). Note: Window that is on top is not necessarily the fore ground window. Look at SetForegroundWindow API to know more about the meaning of a fore ground window.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:41:01.083

You should be able to do this via the [LVM_SETITEMPOSITION](http://msdn.microsoft.com/en-us/library/bb761192%28VS.85%29.aspx) in the win API. Have a look at the following thread which covers some suggestions already on using this: [How can I programmatically manipulate Windows desktop icon locations?](https://stackoverflow.com/questions/131690/how-can-i-programmatically-manipulate-windows-desktop-icon-locations)

# asp.net-mvc - 如何为子模型使用 Html.TextBoxFor - 获取正确的名称属性

> ID：15709992
> 
> 赞同：1
> 
> 时间：2013-03-29T19:17:08.820
> 
> 标签：asp.net-mvc

我们有几种表格要求我们的会员提供个人信息。我们有一个个人信息模型和一个使用该模型的局部视图。几个模型使用 PersonalInfo 模型作为子模型。

我希望局部视图能够使用正确的名称属性呈现 html。为了正确绑定，FirstName 输入标记的名称属性应该是“PersonalInfo.FirstName”，而不是“FirstName”。

我想使用 Html.TextBoxFor 因为它利用了数据注释和不显眼的验证。Html.TextBox 不实现对数据注释的验证。

或者 - 也许有人可以告诉我为什么 Html.TextBox 不使用数据注释并创建客户端验证。

```
public class PersonalInfo {
    [Required(ErrorMessage = "First Name is required")]
    [StringLength(50, ErrorMessage = "First Name must be less than 50 letters")]
    public string FirstName {get; set;}
    public string LastName {get; set;}
}

public class MemberModel {
    public string ShoeSize {get; set;}
    public PersonalInfo PersonalInfo {get; set;}
}

public class VolunteerModel {
    public string HairColor {get;set;}
    public PersonalInfo PersonalInfo {get; set;}
} 
```

会员观点：

```
@model Member
using (Html.BeginForm()) {
    <h1>Member Info</h1>
    @Html.TextBoxFor(x => x.ShoeSize)
    @{Html.RenderPartial("_PersonalInfo", Model.PersonalInfo);}
} 
```

志愿者观点：

```
@model Volunteer
using (Html.BeginForm()) {
    <h1>Volunteer Info</h1>
    @Html.TextBoxFor(x => x.HairColor)
    @{Html.RenderPartial("_PersonalInfo", Model.PersonalInfo);}
} 
```

个人信息的部分视图..._PersonalInfo.cshtml：

```
@model PersonalInfo
@Html.TextBoxFor(x => x.FirstName)
@Html.TextBoxFor(x => x.LastName) 
```

控制器：

```
public class MemberController : Controller
{
    public ActionResult Index()
    {
        return View(new MemberModel());
    }
    [HttpPost]
    public ActionResult Index(MemberModel model)
    {
        // model.PersonalInfo.FirstName should be set from user input at this point.
        // It is not set correctly when <input name="FirstName">.
        // It will work if <input name="PersonalInfo.FirstName">.
        return View(model);
    }
} 
```

局部视图渲染的 Html 代码：

```
<input class="basic-textbox focus" data-val="true" data-val-length="First Name must be less than 50 letters" data-val-length-max="50" data-val-required="First Name is required" id="FirstName" name="FirstName" type="text" value="Joseph" /> 
```

如果我使用 Html.TextBox，我不会得到客户端验证。

```
@Html.TextBox("PersonEditorModel.FirstName", Model.FirstName) 
```

结果是：

```
<input id="PersonEditorModel_FirstName" name="PersonEditorModel.FirstName" type="text" value="Joseph" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:26:01.067

您应该使用 EditorTemplates 而不是局部视图。

您需要移动`_PersonalInfo.cshtml`到`Views\Shared\EditorTemplates\PersonalInfo.cshtml`并更改志愿者视图：

```
@model Volunteer
using (Html.BeginForm()) {
    <h1>Volunteer Info</h1>
    @Html.TextBoxFor(x => x.HairColor)
    @Html.EditorFor(x => x.PersonalInfo) @* << change *@
} 
```

有关更多详细信息，请参阅[Dave A 提到的博文。](http://lostechies.com/jimmybogard/2011/09/07/building-forms-for-deep-view-model-graphs-in-asp-net-mvc/)Scott Hanselman[最近](http://www.hanselman.com/blog/ASPNETMVCDisplayTemplateAndEditorTemplatesForEntityFrameworkDbGeographySpatialTypes.aspx)还发表了一篇文章，展示了 EditorTemplates。

# c++ - 如何从 C++ 返回 char ** 并使用 ctypes 将其填充到 Python 中的列表中？

> ID：15709994
> 
> 赞同：1
> 
> 时间：2013-03-29T19:17:25.643
> 
> 标签：c++, python, ctypes

我一直在尝试将字符串数组从 C++ 返回到 python，如下所示：

```
// c++ code
extern "C" char** queryTree(char* treename, float rad, int kn, char*name, char *hash){
    //.... bunch of other manipulation using parameters...

    int nbr = 3; // number of string I wish to pass
    char **queryResult = (char **) malloc(nbr* sizeof(char**));
    for (int j=0;j<nbr;j++){
        queryResult[j] = (char *) malloc(strlen(results[j]->id)+1);
        if(queryResult[j]){
            strcpy(queryResult[j], "Hello"); // just a sample string "Hello"
        } 
    }
    return queryResult;
}
// output in C++:
Hello
Hello
Hello 
```

以下是python中的代码：

```
libtest = ctypes.c_char_p * 3;
libtest = ctypes.CDLL('./imget.so').queryTree("trytreenew64", ctypes.c_float(16), ctypes.c_int(20), ctypes.c_char_p(filename), ctypes.c_char_p(hashval))
print libtest 
```

python中的输出是整数：？

我是python的新手。我知道我在 python 方面做错了什么。我一直在查看他们传递 char* 的其他一些问题，但我无法让它为 char** 工作。我已经尝试了几个小时。任何帮助，将不胜感激。

```
19306416 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:21:01.483

[ctypes 文档](http://docs.python.org/2/library/ctypes.html#return-types)说：*“默认情况下，假定函数返回 C int 类型。其他返回类型可以通过设置函数对象的 restype 属性来指定。* ”

 *这应该有效：

（*编辑添加指针*）

```
imget = ctypes.CDLL('./imget.so')
imget.queryTree.restype = ctypes.POINTER(ctypes.c_char_p * 3)
imget.queryTree.argtypes = (ctypes.c_char_p, ctypes.c_float, ctypes.c_int,
    ctypes.c_char_p, ctypes.c_char_p)
libtest = imget.queryTree("trytreenew64",16, 20, filename, hashval) 
```*

# vba - 使用 Excel VBA 添加 Powerpoint 标题幻灯片

> ID：15709996
> 
> 赞同：1
> 
> 时间：2013-03-29T19:17:27.563
> 
> 标签：vba, excel

我有从 excel 运行的 VBA 代码，它使用从 excel 文档中复制的图表生成 6 张幻灯片演示文稿。我将使用哪些代码行来插入标题幻灯片并定义该幻灯片上的文本（标题 + 副标题）？使用 Excel 2007。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:40:03.320

因此，@Siddharth Rout 提案的一些额外替代方案（这也很好）。我使用`.AddTitle`的方法在格式化该形状时可能是有益的。

```
Sub add_title()

Dim shpCurrShape As Shape

Dim ppPres As Presentation

Set ppPres = ActivePresentation
With ppPres.Slides(1)

If Not .Shapes.HasTitle Then
    Set shpCurrShape = .Shapes.AddTitle
Else
    Set shpCurrShape = .Shapes.Title
End If

    With shpCurrShape
    With .TextFrame.TextRange
        '~~> Set text here
        .Text = "BLAH BLAH"
        '~~> Alignment
        .ParagraphFormat.Alignment = 3
       '~~> Working with font
       With .Font
          .Bold = msoTrue
          .Name = "Tahoma"
          .Size = 24
          .Color = RGB(0, 0, 0)
       End With
    End With
End With
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:24:19.473

您必须使用`.AddTextbox`添加标题

看这个例子

```
Dim shpCurrShape As Object

'~~> If doing from within PP remove oPPApp else it is your PP object
With oPPApp.ActivePresentation.Slides(1)
    '~~> Add Heading
    'expression.AddTextbox(Orientation, Left, Top, Width, Height)
    Set shpCurrShape = .Shapes.AddTextbox(1, 18, 48, 654, 29.08126)

    With shpCurrShape
        With .TextFrame.TextRange
            '~~> Set text here
            .Text = "BLAH BLAH"
            '~~> Alignment
            .ParagraphFormat.Alignment = 3
           '~~> Working with font
           With .Font
              .Bold = msoTrue
              .Name = "Tahoma"
              .Size = 24
              .Color = RGB(0, 0, 0)
           End With
        End With
    End With
End With 
```

**截屏**

![在此处输入图像描述](../Images/ff1b5ecd5580fea9108e32f5ceb08b53.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T14:03:45.040

这是另一个使用“添加”方法的解决方案，并使用 Powerpoint 的幻灯片布局作为标题幻灯片。

```
Sub AddTitleSlide()
Dim sld As Slide
Dim ttlBox As Shape

Set sld = ActivePresentation.Slides.Add(1, ppLayoutTitle)
Set ttlBox = sld.Shapes("Title 1")

ttlBox.TextFrame2.TextRange.Characters.Text = "Here is the slide title!"

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-01T04:28:58.097

这是我使用的解决方案：

```
'Setup PPTX File
Set oPA = CreateObject("PowerPoint.Application")
oPA.Visible = True
Set oPP = oPA.ActivePresentation
slideNumber = oPP.Slides.Count + 1
Set oPS = oPP.Slides.Add(slideNumber, ppLayoutBlank)
oPA.ActiveWindow.View.GotoSlide (slideNumber) 'this line makes testing easier otherwise not required
Set sObj = oPP.Slides(slideNumber)
sObj.Shapes(1).TextFrame.TextRange.Text = titleText

 'Include Text in Powerpoint
oPP.Slides(slideNumber).CustomLayout = oPP.Designs(1).SlideMaster.CustomLayouts(X) 'X=Layout Number with a title page
sObj.Shapes(1).TextFrame.TextRange.Text = titleText 
```

# javascript - jquery在另一个页面上搜索

> ID：15709998
> 
> 赞同：-5
> 
> 时间：2013-03-29T19:17:40.093
> 
> 标签：javascript, jquery

我有一个这样的按钮

```
<input type='button' id='button' value='search'/> 
```

我有这个网址

```
url = "localhost/mywebsite/mypage.html 
```

我希望当用户按下按钮时，一个 jquery 函数会触发以在该 url 中搜索特定数据，我试过这样；

```
$("#button).on('click'function(){
$(get).(url).search('data');
}); 
```

但我没有得到任何结果，请问为什么？如何标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:30:01.907

您需要以下 jQuery：

```
$("#button").on('click', function () {
    $('#get').load(url);
}); 
```

* * *

哪里，`#get`是

```
<div id='get'>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:30:15.850

只是和示例将是：

```
var url = "localhost/mywebsite/mypage.html";
$("#button").on("click", function() {
    $('body').load( url +" #content" );
}); 
```

将从您的其他页面加载`#content`到`body`