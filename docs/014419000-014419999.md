# StackOverflow 问答 14419000-14419999

# actionscript-3 - 如何在 AS3 中将类文件与库中的文件相关联

> ID：14419001
> 
> 赞同：0
> 
> 时间：2013-01-19T21:19:40.013
> 
> 标签：actionscript-3, embed

我正在尝试开始使用名为 FlashDevelop 的 Flash IDE，它不使用我习惯的 .FLA 编辑器。我已经找到了如何将 /lib 文件夹中的文件嵌入到项目中，但我不确定如何像我之前所做的那样，将嵌入文件（例如 .jpg）与 .as 文件相关联以提供说明关于如何行动。下面是代表我尝试弄清楚的代码，在此先感谢您的帮助。

```
package 
{
    import flash.display.Bitmap;
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.events.Event;

    [Frame(factoryClass="Preloader")] //This references an auto generated preloader which I haven't touched
    public class Main extends Sprite 
    {
        [Embed(source="../lib/index.jpg")]
        public var logo:Class; //I'm attempting to connect the image in the above line to my logo.as file, all that's in there is an empty constructor and a simple update method that moves the image to the right
        public var pic:logo;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // entry point
            pic:logo = new logo();
            addChild(pic);
            addEventListener(Event.ENTER_FRAME, update);
        }

        private function update(e:Event):void 
        {
            pic.update();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:32:21.687

您可以简单地将 index.jpg 嵌入和实例化移动到*logo.as*中。（另外，如果你坚持用大写字母命名你的类，它可以帮助避免类和变量之间的混淆，所以例如我会称之为*Logo.as。*）然后你的主类只需要添加 a`new Logo()`和*Logo.as*将注意创建实际图像。

编辑：另外，请确保您不会偶然这样做：

```
pic:Logo = new Logo(); 
```

那应该是：

```
pic = new Logo(); 
```

# ruby - 单击事件进程，但 watir-webdriver / selenium-webdriver 在速度更快的 Mac 上仍会引发 TimeoutError

> ID：14419002
> 
> 赞同：0
> 
> 时间：2013-01-19T21:19:54.103
> 
> 标签：ruby, cucumber, selenium-webdriver, watir-webdriver

使用中的宝石：

*   watir-webdriver-0.6.2
*   selenium-webdriver-2.27.2

在所有系统上使用 Firefox 16.0.2。

情况：我们有一个模态窗口，运行后会关闭

```
link(:text, 'Continue').click 
```

系统 1：硬件概述：

*   型号名称：MacBook Air
*   型号标识符：MacBookAir4,2
*   处理器名称：英特尔酷睿 i5
*   处理器速度：1.7 GHz
*   处理器数量：1
*   核心总数：2
*   内存：4 GB
*   操作系统：OS X 10.8.2

系统 1 结果：总是成功

系统二：

*   型号名称：MacBook Pro
*   型号标识符：MacBookPro10,1
*   处理器名称：英特尔酷睿 i7
*   处理器速度：2.3 GHz
*   处理器数量：1
*   核心总数：4
*   内存：16 GB
*   操作系统：OS X 10.8.2

系统 2 结果：执行单击，然后在指定时间后抛出 Timeout::Error。

中间系统（对不起，我没有可用的完整规格）是一款新的 Mac Mini，也带有 Mountain Lion。这个系统一直失败，直到在试图追踪它时，我在产生超时的特定调用处添加了一个 puts 语句。当然，这导致了持续的成功状态，这表明了我们亲切地称之为 Heisenerror 的情况。

puts 语句被添加到 lib/selenium/webdriver/remote/bridge.rb 中的 selenium-webdriver 代码中，第 613 行附近，如下所示：

```
puts "-> #{verb.to_s.upcase} #{path}" if verb.to_s.upcase == 'POST' 
```

这会打印出对浏览器发出的所有发布请求。超时的特定发布请求是点击请求之一。我没有完整的路径，但如果需要，会在星期一添加。

有人知道如何使用 watir/selenium 规避与系统相关的超时吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:00:38.450

也许使用 wait_until 方法等待加载页面

```
wait_until(:timeout => 20) { page.current_url =~ /some_url/ } 
```

[http://rubydoc.info/github/moredip/Frank/master/Frank/Cucumber/WaitHelper.wait_until](http://rubydoc.info/github/moredip/Frank/master/Frank/Cucumber/WaitHelper.wait_until)

接着

```
find(".some_class").find('a', :text => /Continue/).click 
```

# c# - 如何让这个线程知道不同线程中的进程

> ID：14419004
> 
> 赞同：0
> 
> 时间：2013-01-19T21:20:11.980
> 
> 标签：c#

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using System.Timers;
using System.Diagnostics;

using System.Threading;

namespace ConsoleApplication2 {
    class Program {

        public static System.Timers.Timer aTimer;
        public static System.Diagnostics.Stopwatch sw;
        public static Boolean HasNotepadclosed;
        public static Process pr;

        static void Main(string[] args) {

            Boolean HasNotepadclosed = false;
            sw = new Stopwatch();

            pr = new Process();
            pr.StartInfo = new ProcessStartInfo(@"notepad.exe");
            pr.EnableRaisingEvents = true;
            pr.Exited += new EventHandler(YouClosedNotePad);
            pr.Start();

            aTimer = new System.Timers.Timer();
            aTimer.Interval = 500;
            aTimer.Elapsed += new ElapsedEventHandler(myGong);
            GC.KeepAlive(aTimer);

            Thread myFirstThread;
            myFirstThread = new Thread(new ThreadStart(HelloFirstThread));
            myFirstThread.Start();

            sw.Start();
            aTimer.Enabled = true;

            Console.WriteLine("press [enter] to exit");
            Console.ReadLine();
        }

        static void HelloFirstThread() {
            Console.WriteLine("we're in here now");
            Thread.Sleep(7000);
            if(HasNotepadclosed) {
                Console.WriteLine("bye bye: notepad open");
            } else {
                Console.WriteLine("bye bye: notepad closed");
            }

        }

        static void YouClosedNotePad(object sender, EventArgs e) {
            Console.WriteLine("thanks for closing notepad");
            HasNotepadclosed = true;
        }
        static void myGong(object sender, ElapsedEventArgs e) {
            Console.WriteLine("hello at {0} milliseconds elapsed = {1}", e.SignalTime, sw.ElapsedMilliseconds);
            if(sw.ElapsedMilliseconds > 4000) {
                aTimer.Dispose();
            }
        }

    }
} 
```

如果我在`myFirstThread`完成睡眠之前关闭记事本，那么我仍然会得到一个最终答案，说“再见：记事本打开”。我需要如何`myFirstThread`了解原件中发生的事情`thread`- 这很容易做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:28:18.017

我会通过以下方式做到这一点：

*   将对象传递`Process`给我需要它所在的线程；
*   使用`WaitForExit`方法（可能具有给定的超时值）；

# ruby - 在 ruby /sinatra 中根据请求覆盖常量

> ID：14419007
> 
> 赞同：0
> 
> 时间：2013-01-19T21:20:28.950
> 
> 标签：ruby, sinatra, variable-assignment

我不想在这里复制整个代码，因为它相当庞大，但这是它的要点：

```
require 'sinatra'

SOME_DATA = get_hashes_from_db

get '/' do

 # SOME_DATA's hashes are filtered using .delete
 result = process_data SOME_DATA, request

 response.body(JSON.generate(result))
end 
```

每个请求，哈希列表都会根据请求中发送的一些参数进行过滤。SOME_DATA 中存在的一些字段用于此过滤器，但是当需要使用 .delete 将它们发送回以擦除整个密钥时，它们会被剥离。例子：

过滤前：

```
{'condition' => 'rainy', 'data' => 'get an umbrella!'} 
```

过滤后：

```
{'data' => 'get an umbrella!'} 
```

现在的问题是：即使传递给函数的原始常量随后被切块并重新分配了十几次，对从原始 STILL 重新分配的变量调用 .delete 方法也会影响原始常量。在请求 1 中，我将拥有 10 个散列，每个散列有 10 个字段。根据请求 2，我将有 10 个哈希，但每个有 2-5 个字段。

我想我[和这个人有同样的问题](https://stackoverflow.com/questions/1465569/ruby-how-can-i-copy-a-variable-without-pointing-to-the-same-object)，但是我试过用 .clone 传递它，希望它能解决这个问题，但它没有。

我以前遇到过这个特殊问题，但我认为我从来没有解决过它。为什么即使（在上面的伪代码中）我传递`SOME_DATA.clone`给它，它仍然会覆盖原始文件`process_data`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:59:00.087

尝试这样的事情：

```
SOME_DATA = get_hashes_from_db.freeze 
```

现在，当某些代码尝试修改时，它会引发异常`SOME_DATA`

如果`get_hashes_from_db`返回一个数组或散列，那么你也需要`freeze`每个数组/散列元素。

# groovy - 演员异常

> ID：14419012
> 
> 赞同：0
> 
> 时间：2013-01-19T21:20:55.757
> 
> 标签：groovy, actor, gpars

我只想在 Groovy 中的两个演员之间发送一些消息。
我收到第一条消息`abc`，但得到以下异常：

> Actor 线程 Actor 线程 1 groovy.lang.MissingPropertyException 发生异常
> ：没有此类属性：act1 类：groovyx.gpars.actor.DefaultActor

这是我的代码：

```
import static groovyx.gpars.actor.Actors.actor

def act2 = actor {
    react {
        println it
        act1.send "def"
    }
}

def act1 = actor {
    act2.send 'abc'
    react { println it }
}

[act1, act2]*.join() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:52:35.820

尝试做

```
def act1, act2 
```

在导入语句之后的脚本顶部

然后删除`def`您当前拥有的 2 个关键字

# django - 为什么 Django 鼻子测试需要 --exe？

> ID：14419015
> 
> 赞同：0
> 
> 时间：2013-01-19T21:21:22.610
> 
> 标签：django, django-nose

为什么我在运行 django-nose 测试时必须使用 --exe 参数。如果我不使用它，它将跳过测试运行

例如

```
manage.py test myapp

Ran 0 tests in 0.000s 
```

而我的测试在正确的地方等。

以详细程度 3 运行它显示：

```
nosetests --verbosity 3 myapp 
```

它显示：（更改了路径名称，但无论如何，鼻子找到它们但跳过它们！！）

```
nose.selector: INFO: /path_to_project/path_to_app/myapp/tests.pyc is executable; skipped
nose.selector: INFO: /path_to_project/path_to_app/myapp/tests.py~ is executable; skipped 
```

运行测试的唯一方法是使用 --exe 参数

我在用：

*   Ubuntu（10.4 或 11.4 都无所谓）
*   Python 2.6 和 2.7
*   Django 1.4.3

这是为什么？

根据你不需要的文件--exe

但经过一段时间的困惑......并谷歌搜索并查看这里，我得到了这个建议。

看到[鼻子没有找到 Django 测试](https://stackoverflow.com/questions/12867892/nose-doesnt-find-django-tests?)

和[鼻子无法在 ubuntu 中找到测试](https://stackoverflow.com/questions/1457104/nose-unable-to-find-tests-in-ubuntu/)

但是对于这种似乎是错误的解决方法的解释无处可寻？

还是我错过了什么？

我提出这个要求，因为其他问题都很老了，没有找到令人满意的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:25:22.423

这不是一个错误，这是一个功能。

请在此处查看很好的解释：[Python 中的“导入安全”是什么意思？](https://stackoverflow.com/questions/10330499/what-does-import-safe-mean-in-python)

# php - 日期到十二生肖和格式日期

> ID：14419016
> 
> 赞同：2
> 
> 时间：2013-01-19T21:21:26.457
> 
> 标签：php, date-format

好的，我有一些代码，是从互联网上收集的。所以这就是我想要实现的目标。

好的页面，用户输入生日（不是生日）所以我们将 dd/mm 格式的数据保存到数据库中，例如：30/07 代表 7 月 30 日）

所以下一页用户转到，我想正确格式化日期以匹配我想要实现的内容，添加相应的序数（但删除 dd 和 mm 之间的 - ）并且不回显 yy 因为我们一开始就没有得到该信息地方。

本质上，如果当用户点击此页面时，我们知道 dd 和 mm ，我很乐意将当前年份添加为 yy （但不是从 db 获取 yy ）而是临时提供它。

下面的脚本来自互联网，考虑了闰年，但需要帮助。我不能只删除年份，因为这会给出错误的结果（可能是由于 strtotime 函数）但是当用户添加他们的生日时，我们没有抓住年份，因为我们不需要它。

代码：

```
<?php
function getStarSign($date="")
{
$zodiac[356] = "Capricorn";
$zodiac[326] = "Sagittarius";
$zodiac[296] = "Scorpio";
$zodiac[266] = "Libra";
$zodiac[235] = "Virgo";
$zodiac[203] = "Leo";
$zodiac[172] = "Cancer";
$zodiac[140] = "Gemini";
$zodiac[111] = "Taurus";
$zodiac[78]  = "Aries";
$zodiac[51]  = "Pisces";
$zodiac[20]  = "Aquarius";
$zodiac[0]   = "Capricorn";
if (!$date) $date = time();
$dayOfTheYear = date("z",$date);
$isLeapYear = date("L",$date);
if ($isLeapYear && ($dayOfTheYear > 59)) $dayOfTheYear = $dayOfTheYear - 1;
foreach($zodiac as $day => $sign) if ($dayOfTheYear > $day) break;
return $sign;
}
$myBday = "2013-07-30"; // this needs to be in English Australian format not American English format but do not need year
$AuEnBday = date("dS-F-Y", strtotime($myBday)); // this switches the date from USA to AU date format but do not need year
?> 
```

以上呼应：Leo 30th-July-2013

我想回应：Leo 7 月 30 日（年份位可以是页面上的 var，但不是来自 db）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:26:18.893

```
// One more time!
$myBday = date("Y") . "-07-30"; // 2013-07-30

// Two digit year
$myBday2 = date("y") . "-07-30"; // 13-07-30 
```

# javascript - 在现有图像上附加热点。JS和JQ

> ID：14419022
> 
> 赞同：0
> 
> 时间：2013-01-19T21:22:04.203
> 
> 标签：javascript, jquery, append

我想要做的是在现有图像之上附加热点。截至目前，此代码附加了新的 div 和图像，但在图像旁边而不是在图像之上。我是 javascript 和 jquery 的新手，因此不胜感激。

```
//build data structure to store coordinates and content. 
var product_hotspots = new Array();
product_hotspots[0] = {x: 200, y:200, content: "This is test content"}
product_hotspots[1] = {x: 500, y:500, content: "This is more test content"}
product_hotspots[2] = {x: 400, y:400, content: "This is even more test content"}

//loop through each hotspot. 
$(product_hotspots).each(function(idx) {
    //append a new div to #product_image for each hotspot with the following format: 
    var $newdiv1 = $('<div id="bullet" style="position: absolute; top: product_hotspot[idx].x; left: product_hotspot[idx].y" data-content="product_hotspot[idx].content"></div>');
    var $image1 = $('<img src="images/hotspot.png"/>');

    $("#product_image").append($newdiv1,$image1);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:26:02.333

您从 object 获取的属性的串联不正确。您缺少告诉 javascript 它们不是 javascript 对象的字符串和值的引号

尝试

```
$('<div id="bullet" style="position: absolute; top:'+product_hotspot[idx].x+'px; left:'+product_hotspot[idx].y+'px" data-content="'+product_hotspot[idx].content+'"></div>'); 
```

`product_hotpsot`注意反映它们不是字符串的项目的语法突出显示

注意：我相信`x`您`y`在`style`. 通常`x`不是`left`_`top`

# php - 正则表达式以 | 开头是什么意思 ?

> ID：14419032
> 
> 赞同：3
> 
> 时间：2013-01-19T21:22:40.383
> 
> 标签：php, regex

这是一个例子：

```
return preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?
                  (/.*)?$|i', $url); 
```

这是另一个：

```
preg_match_all("|<[^>]+>(.*)</[^>]+>|U", "<b>example: </b><div align=left>this is a test</div>", $out, PREG_PATTERN_ORDER); 
```

不是| 正则表达式中的 OR？正则表达式以 | 开头是什么意思？?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T21:23:31.410

他将它用作正则表达式分隔符，这是一个**非常糟糕的主意**，因为它阻止了它被用作 OR 运算符。

`/`虽然在处理 URL 或其他任何经常使用斜杠的东西时不使用它确实有意义（`/`因为在这种情况下，每个法线都必须被转义），但通常使用 eg或作为分隔符`\/`要好得多，因为这些是普通字符在正则表达式本身。`#``~`

# php - 您如何使用 SQL 或 PHP 查找和列出稳定的室友匹配项？

> ID：14419033
> 
> 赞同：6
> 
> 时间：2013-01-19T21:23:06.167
> 
> 标签：php, mysql

**先决条件**

我有两张桌子。一张表中的人员列表，以及他们在外键查找表中的偏好。第一个表只是人员列表。另一个是他们都列出了他们希望作为室友的其他一些人。

餐桌人：

*   身份证、姓名、姓氏等人员名单

餐桌选择：

*   选择者列表（FK 人员 ID）
*   选择的列表（FK 人 ID）

**问题**

如何使用 SQL（或 PHP）列出匹配项？也就是说，在他想成为室友的人的名单上还有一个人？基本上，您有一个带有所选列表的选择器。您将如何检查选择者是否也在他或她选择的列表中？

基本上我想要一份关于每场稳定比赛的报告，即选择者也在他或她选择的至少一个列表中。

我猜一个 for 循环可以解决问题，但是您如何将第一次迭代放在一起呢？循环的其余部分要少得多？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T22:12:42.717

基于加入的解决方案：

```
SELECT
    r1.name as name1,
    r2.name as name2
FROM
    roommate r1
JOIN
    roommate_pair rp1 ON r1.id = rp1.chooser_id
JOIN
    roommate r2 ON r2.id = rp1.choosen_id
JOIN
    roommate_pair rp2 ON r2.id = rp2.chooser_id
WHERE
    rp2.choosen_id = r1.id
GROUP BY
    CONCAT(GREATEST(r1.id,r2.id),'-',LEAST(r1.id,r2.id)) 
```

Last `GROUP BY` is to remove duplicate matches in swapped columns. [Working SQL Fiddle](http://www.sqlfiddle.com/#!2/cb841/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T22:11:07.017

```
SELECT a.chooser, a.chosen
FROM roommates a,roommates b
WHERE a.chooser = b.chosen
AND a.chosen = b.chooser; 
```

使用上面的查询，你应该得到交叉引用的 id ......但是，你确实得到了双精度（两个引用都返回）。请参阅[SQL 小提琴](http://www.sqlfiddle.com/#!2/cc8f9/1/0)。您可以在您的 PHP 代码中进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T21:27:41.400

这段代码应该为您提供一些提示。首先，您将遍历所有人。然后从可能的首选人员列表中，您只选择那些反过来在他们的首选人员列表中拥有原始人员的人。

```
for cc in (select * from people) loop
  for dd in (select * from preferences pr where pr.source_id = cc.people_id and exists (select 1 from preferences pr1 where pr1.source_id = pr.friend_id and pr1.friend_id = cc.people_id)) loop
    --do your stuff here
  end loop
end loop 
```

# java - 当 EditText 中只有一个字符时防止退格

> ID：14419036
> 
> 赞同：0
> 
> 时间：2013-01-19T21:23:43.390
> 
> 标签：java, android, string, ime, textwatcher

全部-对不起，我的标题太长了，我找不到任何其他方式来表达它。所以，我有一个`EditText`并且当只剩下一个字符时（我可以通过 a 监视它`TextWatcher`）我想禁用退格键。这是我到目前为止所拥有的：

```
 editText$.addTextChangedListener(new TextWatcher() {
    private String current = "";
    String one = "1";   
    String empty = one; //Right now only set to "1" but want to set to "[any character]"
    public void onTextChanged(CharSequence s, int start, int before, int count) {       
    }
    public void afterTextChanged(Editable s) {

        if (s.toString().equals(empty)) {
            editText$.setOnKeyListener(new OnKeyListener() {                 
                public boolean onKey(View v, int keyCode, KeyEvent event) {                 
                     if(keyCode == KeyEvent.KEYCODE_DEL){                        
                           return true; //Disable backspace key here
                         }                  
                return false;       
                    }
            });         
        }       
    }
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }
  }); 
```

除了两个关键问题外，这有效：

1）我只能弄清楚如何检查特定字符（“1”）与我想检查的任何一个字符。我已经尝试过`String empty = "1" + "2" + "etc";`，但是当我这样做时代码不再有效，而且，这似乎是一种低效的方式来完成这项任务。

2）当`EditText`有类似 134 的内容时，即使“1”不是唯一的字符，退格键也会被禁用。显然，如果“1”是第一个字符，其余的无关紧要。这是我的主要问题。

我知道这是很多问题，但是您可以提供任何帮助来帮助我解决这两个问题，我们将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T21:26:27.893

您可以使用`if (s.toString().length() == 1)`检测框是否只有 1 个字符，如果为真则禁用按钮（如果为假则启用它）。

# asp-classic - 经典的 ASP 响应。用 UTF-8 编写汉字

> ID：14419045
> 
> 赞同：1
> 
> 时间：2013-01-19T21:24:25.087
> 
> 标签：asp-classic, utf-8

我是字符集和编码的新手。我不知道我做错了什么，但是当我希望它输出你好时，页面只会吐出奇怪的代码。这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%Response.ContentType = "text/html"
Response.AddHeader "Content-Type", "text/html;charset=UTF-8"
Response.CodePage = 65001
Response.CharSet = "UTF-8"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body>
<%response.write ("你好")%>
</body>
</html> 
```

我只能在屏幕上看到：ä½ å¥½ 该文件也以 UTF-8 编码保存。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:55:13.657

如果它对某人有帮助。ASP 声明总是在任何 HTML 之前。包括定义会话，这样永远不会失败编码 utf-8

```
<%@CodePage = 65001%>
<%
Session.CodePage = 65001
Response.charset ="utf-8"
Session.LCID     = 1033 'en-US
%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body>
<%response.write ("你好")%>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:34:37.240

您的 asp 文件很可能只是 UTF-8 编码（没有 bom）。
如果是，需要用 BOM 保存文件。
在 Notepad++ 中，`Encoding > Convert to UTF-8`
在 Notepad 中，在保存对话框中将编码指定为 UTF-8。

事实上，[不推荐使用 UTF-8 文件的 BOM](https://stackoverflow.com/a/2223926/893670)。
关键是在 ASP 中，响应流隐式需要 BOM。
作为一个实验，尝试运行以下页面（编码为没有 bom 的 utf-8），你会看到 Response 对象刷新奇怪的字符而不是字母。然而，直接输入将是平滑的，因为它应该是。

```
<%
Response.Codepage = 65001
Response.Charset = "utf-8"
Response.Write "I'm weird: 好"
%><br />I'm not weird: 好 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T23:20:50.463

将您的 DOCTYPE 声明移到设置代码页的代码块**之后。**代码页设置需要在任何输出之前进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T22:27:35.137

您不必在服务器端将 .asp 保存为 UTF-8！只需正常保存（UCS-2）。

# java - 在循环中添加行时动态更新 Jtable

> ID：14419066
> 
> 赞同：2
> 
> 时间：2013-01-19T21:26:21.963
> 
> 标签：java, swing, swingworker

我正在尝试用 Java 编写简单的应用程序以仅从邮件服务器获取所有标头。实际上，除了在使用 DefaultTableModel 时在 JTable 中显示数据之外，一切都运行良好。关键是我在邮箱中有大约 6k 条消息：P。当我触发下载标题按钮 GUI 挂起直到收到最后一条消息 - 然后我可以在 JTable 中正确看到所有内容。每次我从单个消息中获取标题时，JTable 都不会更新 - 仅在下载所有消息之后 - 直到 GUI 挂起。为了找出发生了什么，我编写了另一个应用程序，将行添加到 JTable。Delphi 更新 GUI 中有简单的“Application.ProcessMessages”...我不知道如何在 java ( swing ) 中实现相同...请帮助。编码 ：

```
import java.util.logging.Level;        
import java.util.logging.Logger;            
import javax.swing.table.DefaultTableModel;
public class NewApplication extends javax.swing.JFrame {
String[] in;
public NewApplication() {
    initComponents();
}                                                         

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
in=new String[5];    
in[0]="0";
in[1]="1"; 
in[2]="2"; 
in[3]="3"; 
in[4]="4"; 
for(Integer r=0;r<5000;r++)
{
        try {
            add(in);               
            Thread.sleep(5);
        }
        catch (InterruptedException ex) {
            Logger.getLogger(NewApplication.class.getName()).log(Level.SEVERE, null,     ex);
        }
}
}                                        

public void add(String[] in)
{
    DefaultTableModel model = (DefaultTableModel) jTable1.getModel();
    model.addRow(new Object[]{in[0], in[1], in[2],in[3],in[4]});
}
public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new NewApplication().setVisible(true);
        }
    });
}
} 
```

添加单行后更新 JTable 的最简单方法是什么？问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T21:29:46.430

这个问题几乎每天都会被问到。当您在事件分派线程中执行操作时（例如读取 6K 消息），您正在阻止事件分派线程重新绘制 GUI。

长任务不能在事件派发线程中完成，而应在单独的后台线程中完成。使用 SwingWorker。它的 javadoc 解释了如何使用它，以及[swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。

# android - 如何将密码输入我的应用程序

> ID：14419069
> 
> 赞同：-1
> 
> 时间：2013-01-19T21:26:40.213
> 
> 标签：android

我写了另一个应用程序，现在它只存储我的私人数据。如您所知，每当用户单击应用程序图标时，应用程序就会启动。我想在我的应用程序启动之前输入密码。如果用户输入错误密码，最多 5 次，应用程序将无法启动。

我的问题是；如果给出错误的通行证，我如何输入密码并且不让我的应用程序启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:30:24.580

您的主要活动应提供输入密码的提示。密码框应该是一个`EditText`带有密码属性集的（在输入时隐藏字符）。您还应该有一个提交`Button`，它将检查您存储的密码。您应该有一个计数器，当输入每个错误输入的密码时，该计数器将递增到 5。当它达到 5 时，您可以使用`finish()`来终止活动（在您正在使用的设备`finish()`上调用）。`Activity`如果他们输入了正确的密码，您可以`Intent`启动另一个`Activity`，这将是您的实际应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:34:05.413

您需要在应用程序图标启动后立即向用户询问密码，因此您的应用程序应该做的第一件事就是要求身份验证。

因此，在 MainActivity（应用程序启动时调用的第一个活动）中，

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            passwordCounter = 0;
            //ask the user for the password using a non-cancellable Dialog
            //get the input in an EditText

            //when the Submit button is clicked after entering the password, do the following
            if(password does not match && passwordCounter < 5)
              {
                 passwordCounter++;
                //ask the user for the password once again using the non-cancellable Dialog
              }
             else if (password does not match && passwordCounter >= 5)
             {
                finish(); // kill your Activity

             }
             else
             {
                //start the actual functioning of the application
             }
} 
```

# css - 编辑 CSS 并将更改返回 SASS 的最佳方法

> ID：14419074
> 
> 赞同：4
> 
> 时间：2013-01-19T21:27:19.490
> 
> 标签：css, sass

我发现从 Chrome 编辑 CSS 非常方便，然后直接保存我的编辑。但是我需要一种方法来手动将这些更改带回 SASS，我认为可能有一种工具可以更轻松地完成此操作。

我知道很难有一个自动执行此操作的工具，但可能有一些工具至少可以在 SASS 文件和 CSS 文件之间进行比较（如 diff），让我在右窗格和左窗格中的 CSS，在同步视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:31:23.547

您可能想尝试这个漂亮的在线服务：[https](https://css2sass.heroku.com/) ://css2sass.heroku.com/或代码：[https ://github.com/jpablobr/css2sass](https://github.com/jpablobr/css2sass)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:09:45.113

[Sass Sleuth](http://mobify.github.io/sass-sleuth/)是一个可以为你解决这个问题的工具。

或者，您可以为 Firefox使用[FireSass ，或为 Chrome 使用](https://addons.mozilla.org/en-US/firefox/addon/firesass-for-firebug/)[Sass Inspector](https://chrome.google.com/webstore/detail/sass-inspector/lkofmbmllpgfbnonmnenkiakimpgoamn/details)。

# ruby-on-rails-3 - 某些字段在 Rails 的片段缓存中获取旧值

> ID：14419078
> 
> 赞同：0
> 
> 时间：2013-01-19T21:27:36.590
> 
> 标签：ruby-on-rails-3, caching, fragment-caching

我有一个视图来显示保存在数据库中的资源的详细信息。一些细节属于 Resource 模型本身，一些细节属于关联模型。

在视图中，我使用片段缓存来获取详细信息。

当用户按下视图上的按钮时，视图的一部分将被表单替换，因此用户可以在不加载新页面的情况下编辑详细信息。打开表单时，缓存已过期（实际上是，我已经检查过）。当用户提交表单 ( `using :remote => true`) 时，表单被隐藏，并且使用 jQuery 重新加载原始内容并呈现部分内容。

到目前为止，一切正常。原始内容使用新值正确重新加载，来自内部代码`<% cache ... do %>`和`<% end %>`.

奇怪的是，当我重新加载页面时，一些新值消失了。而是显示一些旧值（那些应该在最后一次提交后被缓存的值）。更奇怪的是，一些值被更新了，即使它们与错误值在同一个新缓存文件中。

据我所知，关联模型中的值是正确的，而 Resource 模型中的值是错误的（旧的）。我一直在想是不是跟sql缓存有关系，但我觉得不是这样，因为我觉得重载页面的时候应该清空sql缓存。

如果我打开表单并再次提交，数据就会更新，一切都很好。那就是上次提交的数据正在进入缓存。如果我在提交之前更改了表单中的数据，它仍然是缓存文件中包含的上次提交的数据。因此，即使其他字段已正确更新，似乎为 Resource 模型提交的数据也会被一次提交延迟。

如果我在 development.rb 中关闭缓存，一切都会按预期进行。每次更新所有数据。

顺便说一句，我确实在我的服务器上遇到了同样的问题。

任何有线索的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:53:01.537

似乎数据在更新后很快就被缓存了。到目前为止，我的解决方案是在资源更新后不到两分钟的时间内删除视图中的缓存。该片段是未缓存的，直到有人稍后更新该页面。这不是一个很好的解决方案，而页面上的每个资源（30 个资源）在每次查看页面时都必须查询更新时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:44:32.087

Not sure if this will help, but in the last couple of days I have implemented a cache-key based fragment cache scheme on my own site with some success.

I implemented a get_cache_key function in all my models

```
 def get_cache_key(prefix=nil)
    cache_key = []
    cache_key << prefix if prefix
    cache_key << self

    child_objects.in_sort_order.each do |child_object|
      cache_key << child_object.get_cache_key
    end

    return cache_key.flatten
  end 
```

In my views I then used

```
<% cache(@home_page.get_cache_key('some_name_for_fragment')) do %>
...Render View
<% end %> 
```

The models now produce a cache key that will invalidate the cache if parent model or any of its children are changed.

The full write up is here, on my website. [Rails caching strategy using key-based approach](http://mark.stratmann.me/content_items/rails-caching-strategy-using-key-based-approach)

# arrays - 使用主数组作为指导删除数组元素的最佳实践？

> ID：14419081
> 
> 赞同：0
> 
> 时间：2013-01-19T21:28:06.377
> 
> 标签：arrays, actionscript-3

这是有问题的：

我有一个主阵列，它是一个包含游戏中所有实体的阵列。

当一个实体（单元、建筑物等）死亡时，我会从数组中删除该实体。

现在，我从该数组中获得了其他几个“子组”数组。比如，enemyEntities、aliedEntities、movingEntities 等。每次我创建一个新实体时，我都会将它添加到相应的数组中。

一切正常，但是，当我从主数组中删除一个元素时，我想以某种方式自动从其他数组中删除它，比如说，以一种优雅的方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:04:42.540

有一个删除方法可以解决这一切。首先将其从主数组中删除，然后从每个子数组中删除（如果找到对象）。一种更好的方法可能是将所有数组放在另一个数组中，并在循环中对它们中的每一个执行此操作。

# javascript - 如何将 javascript 源文件插入到我的金字塔 python 应用程序中并在我的模板中使用它们？

> ID：14419082
> 
> 赞同：2
> 
> 时间：2013-01-19T21:28:08.670
> 
> 标签：javascript, python, templates, pyramid

我已经从最初的问题重新定义了这个问题，使其对手头的问题更加基础。我的文件系统的相关部分如下。

```
env
    tutorial
        tutorial
            templates
                view.pt
            static
                myjava.js
            views.py
            __init__.py 
```

现在我的 view.pt 模板有

```
<script type="text/javascript" src="/static/myjava.js"></script> 
```

然后在我的`__init__.py`，我有

```
config.add_static_view(name='static',path='env/tutorial/tutorial/static') 
```

最后，myjava.js 文件本身非常简单：

```
document.write("hello from the javascript file") 
```

我正在尝试遵循此文档：[http ://docs.pylonsproject.org/projects/pyramid/en/latest/narr/assets.html](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/assets.html)

但现在没有任何文字出现。我觉得问题出在我给它的路径上。

我有一些想法：在 config.add_static_view 中，name='static' 令人困惑。我希望用户能够访问网址 www.domain.com/firstpage，其中 firstpage 是使用 javascript 文件资源（静态文件夹中的文件）的模板的结果。我担心这些静态资产仅适用于以 www.domain.com/static/ 开头的网址...这是一个有效的问题吗？如何告诉 config.add_static_view 函数为从 view.pt 模板呈现的任何视图提供静态资源？

编辑：这是有效的：

在模板中，使用 src="${request.static_url('tutorial:static/myjava.js')}"

然后在**init** .py 中使用 config.add_static_view(name='static',path='tutorial:static/')

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:15:57.723

您在模板中的 javascript 链接应该类似于`src="${request.static_url('tutorial:static/myjava.js')}"`

这使您的应用程序更容易重新定位。

这也使用了适当的资产规范，使用包的名称、“教程”、冒号，然后是相对于“教程”包位置的路径，在您的情况下，包位于`env/tutorial/tutorial`.

编辑：我忘记了 Configurator 对象。

在这里，您想使用类似的资产规范，例如`config.add_static_view('static', 'tutorial:static/')`.

您也可以为不同的目录制作不同的静态视图，例如： `config.add_static_view('images', 'tutorial:images/')`

当您执行此类操作时，您可以将应用程序的根目录移动到另一个位置，从而允许您拥有`http://mysite.com/stable/`并`http://mysite.com/devel/`可以访问`/`被重写到`/stable/`.

静态视图可以从任何模板调用，代码如下`${request.static_url('tutorial:images/icons/favicon.ico')}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T23:43:14.050

正在阅读[此处的文档](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/assets.html)，看起来当您调用`add_static_view`它时会更改文件的路径？引用文档：

> 这意味着您希望将 /var/www/static 中的文件作为 /static URL 前缀的子 URL 提供。因此，当用户访问应用程序的 URL /static/foo.css 时，将返回文件 /var/www/static/foo.css。

就您而言，由于您调用的是`env/tutorial/tutorial/static`“静态”，因此您可能想尝试`src="static/Three.js">`

# memory - 如何在 x86 汇编中以保护模式在屏幕上绘制像素？

> ID：14419088
> 
> 赞同：15
> 
> 时间：2013-01-19T21:28:44.183
> 
> 标签：memory, video, assembly, x86, pixel

我正在创建一个小引导加载程序+内核，直到现在我设法读取磁盘、加载第二个扇区、加载 GDT、打开 A20 并启用 pmode。

我跳到了 32 位函数，它在屏幕上显示一个字符，将视频内存用于文本内容 (0x000B0000 - 0x000B7777)

```
pusha
mov edi, 0xB8000
mov bl, '.'
mov dl, bl
mov dh, 63
mov word [edi], dx
popa 
```

现在，我想更进一步，在屏幕上绘制一个像素。正如我在某些网站上所读到的，如果我想使用 VGA 的图形模式，我必须在位置 0x000A0000 处写入我的像素。是对的吗？

现在，单个像素的格式是什么？对于单个字符，您需要 ASCII 代码和属性，但是您需要定义一个像素（如果它的工作方式与文本模式相同）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-19T22:24:47.477

不幸的是，它有点远。

写入显存的规则取决于图形模式。在传统的视频模式中，VGA 模式 320x200 (8bpp) 是唯一一种视频内存表现得像普通内存的模式：您将一个字节对应于您想要的像素写入视频缓冲区，从 0xA000:0000（或线性 0xA0000）开始， 就这样。

对于其他 VGA (pre-SVGA) 模式，规则更复杂：当您将一个字节写入视频内存时，您会寻址一组像素，并且我早已忘记的一些 VGA 寄存器指定这些像素的哪些*平面*被更新以及如何使用它们的旧值。这不再只是*记忆*。

有SVGA模式（800x600x8bpp开头）；您可以使用[VESA Video Bios Extensions](http://en.wikipedia.org/wiki/VESA_BIOS_Extensions)以独立于硬件的方式切换到它们。在这些模式下，视频内存的行为再次像内存一样，每个像素有 1、2、3 或 4 个字节，并且没有类似 VGA 的 8 像素组，您可以使用一个字节访问。问题是实模式视频缓冲区不再足够大，无法处理整个屏幕。

VESA VBE 1.2 通过提供修改*内存窗口基数*的函数解决了这个问题：在任何特定时刻，线性 0xA0000 处的段正在寻址视频内存的 64Kb 区域，但您可以控制整个*帧缓冲区的**哪些*64Kb在此地址可用（基地址调整的最小单位，也称为*窗口粒度*，取决于硬件，但您可以依赖在 0xA0000 处映射 N*64Kb 偏移量的能力）。缺点是每次开始使用不同的 64Kb 块时都需要调用 VBE BIOS。

 **VESA VBE 2.0 添加了平面帧缓冲区，在保护模式下（也在[虚幻模式下](http://en.wikipedia.org/wiki/Unreal_mode)）在某个高地址处可用。因此，进入视频模式需要调用 VBE BIOS，而不是绘制像素。

VESA VBE 3.0 可能还不够便携，它提供了一种在保护模式下调用 VBE 函数的方法。（我没有机会尝试它，在我的“组装操作系统”时代它不存在）。

无论如何，您必须先*切换*到图形模式。这样做有几种变体：

*   最简单的方法是在进入保护模式之前使用 BIOS 调用。使用 VBE 2.0，您将不需要视频内存窗口调整调用。
*   另一种方法是创建一个对 BIOS 来说足够好的 V8086 模式环境。最困难的部分是将中断转发到实模式中断处理程序。这并不容易，但完成后，您将能够在 PM 中切换视频模式并使用其他一些 BIOS 功能（例如，用于磁盘 I/O）。
*   还有一种方法是使用 VESA VBE 3.0 保护模式接口。不知道它可能是多么容易或复杂。
*   真正的绝地方法是挖掘特定视频卡上的信息，通过设置其寄存器来切换模式。去过那里，过去为一些 Cirrus 卡做过 - 在 PM 中获得大的普通帧缓冲区并不太复杂。它是不可移植的，但如果目标是了解机器的内部结构，它也许正是您所需要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T21:39:12.323

这取决于使用的图形模式，并且有很多差异。BIOS VGA 视频模式`13h`（320x200，8 位/像素）可能是最容易上手的（它是唯一具有 256 色的 BIOS VGA 视频模式，但是您可以通过直接写入视频卡的端口来创建自己的模式)：在 BIOS 视频模式 13h 中，映射到屏幕的视频内存开始于`0x0A0000`每个像素连续运行 1 个字节，并且只有 1 个位平面，因此每个坐标的内存地址为`0x0A000 + 320*y + x`：

在实模式下更改为 BIOS 视频模式 13h（320 x 200，8 位/像素）：

```
mov ax,0x13
int 0x10 
```

在保护模式下在左上角绘制一个像素（在视频模式 13h 中）：

```
mov edi,0x0A0000
mov al,0x0F      ; the color of the pixel
mov [edi],al 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T17:04:04.013

```
org 100h
bits 16
cpu 386

section.text:
START:
mov ax,12h
int 10h
mov al,02h
mov ah,0ch 

pixel.asm
c:\>nasm pixel.asm -f bin -o pixel.com
int 10h 
```**

# mysql - 将索引添加到mysql中的列

> ID：14419090
> 
> 赞同：6
> 
> 时间：2013-01-19T21:28:53.443
> 
> 标签：mysql, phpmyadmin

如何使用 PHPmyadmin 创建索引？

我有一个包含 5,000 行的数据库

```
ID | IP | DATE 
```

在将数据添加到此表之前，我将其设置`id`为主键，

该网站使用此查询：

```
mysql_query("SELECT * FROM users WHERE ip = '$ip'"); 
```

我今天读到索引可以加速和提高性能，在我的情况下，我需要如何将索引添加到 IP 列，

我是 phpmyadmin 和我看到“添加唯一索引”和“添加索引”选项的操作，我是新手，感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T21:30:51.723

单击 的行中显示“索引”的图标`ip`。（这是带有闪电的那个）。不要选择`primary key`或`unique`。只是索引。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-19T21:32:24.387

或者您可以运行查询：

```
ALTER TABLE `users` ADD INDEX `ip` (`ip`) 
```

# wpf - 绑定到可观察集合，依赖属性失败

> ID：14419092
> 
> 赞同：0
> 
> 时间：2013-01-19T21:30:10.507
> 
> 标签：wpf, binding, user-controls, dependency-properties, invocationtargetexception

我有一个用户控件，我需要一个我制作的简单类的列表，称为 Person：

```
public class Person {
    public string Name { get; set; }
} 
```

现在在用户控件中，我需要一个可以绑定的 ObservableCollection<Person>。所以我想我需要让它成为一个依赖属性。所以在用户控件中我有以下内容：

```
public static readonly DependencyProperty PersonsDependencyProperty =
    DependencyProperty.Register("Persons", typeof(ObservableCollection<Person>),
                                typeof(PersonUserControl)); 
```

属性是这样的：

```
public ObservableCollection<Person> Persons
{
   get
    {
        return (ObservableCollection<Person>)GetValue(PersonsDependencyProperty);
    }
    set
    {
        SetValue(PersonsDependencyProperty, value);
    }
} 
```

现在在我的 MainWindow.xaml 代码隐藏中，我创建了一个名为 PersonList 的 ObservableCollection<Person>，将主窗口数据上下文设置为 self，然后像这样绑定到它：

```
<Local:PersonUserControl Persons="{Binding PersonList}">
</Local:PersonUserControl> 
```

我得到了错误：调用的目标抛出了异常。- 没有进一步的解释。谁能告诉我如何应对它或我做错了什么。

我希望我说得足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:53:38.923

`PersonsDependencyProperty`应该只是`PersonsProperty`。如果没有更多信息，很难说这是否是根本原因，但这肯定是一个问题。WPF 将“属性”附加到绑定路径以查找相关的依赖项属性。因此，它不会找到你的。

# java - 带有 ViewPager 和 ActionBarSherlock 选项卡的 SlidingMenu

> ID：14419097
> 
> 赞同：1
> 
> 时间：2013-01-19T21:30:34.850
> 
> 标签：java, android, actionbarsherlock, android-viewpager, slidingdrawer

在我的日历应用程序中，我使用 ActionBarSherlock 来显示两个选项卡 - 1) 日历 2) 转换器。在 ActionBar 菜单项的单击事件中，我使用[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)抽屉来显示该月的事件摘要。

我想专门为日历选项卡使用 viewpager，并且我已经通过这种方式实现了它：

**主.java：**

```
public class BaseActivity extends SlidingSherlockFragmentActivity 
{

    private ViewPager pager;
    CalendarFragmentPagerAdapter mPagerAdapter;
    private static final int MONTHS_LIMIT = 5;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 

        setTitle(R.string.app_name);

        setContentView(R.layout.main);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.main, new CalendarFragment())
        .commit();

        setBehindContentView(R.layout.content_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, new EventsSummary())
        .commit();

        setSlidingActionBarEnabled(false);

        final ActionBar bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setHomeButtonEnabled(true);

        ActionBar.Tab calendar = bar.newTab();
        ActionBar.Tab converter = bar.newTab();

        calendar.setText(this.getResources().getString(R.string.calendar));
        converter.setText(this.getResources().getString(R.string.converter));

        calendar.setTabListener(new MyTabListener());
        converter.setTabListener(new MyTabListener());

        bar.addTab(calendar);
        bar.addTab(converter);

        // customize the SlidingMenu
        SlidingMenu sm = getSlidingMenu();
        sm.setShadowWidthRes(R.dimen.shadow_width);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffsetRes(R.dimen.actionbar_home_width);
        sm.setSlidingEnabled(false);

        mPagerAdapter = new CalendarFragmentPagerAdapter(getSupportFragmentManager());
        pager = (ViewPager) this.findViewById(R.id.viewpager);
        pager.setAdapter(mPagerAdapter);
        pager.setCurrentItem(MONTHS_LIMIT / 2);

    }

    private class MyTabListener implements ActionBar.TabListener
    {

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if(tab.getPosition()==0)
            {
                CalendarFragment frag = new CalendarFragment();
                ft.replace(R.id.main, frag);
            }
            else
            {
                ConverterFragment frag = new ConverterFragment();
                ft.replace(R.id.main, frag);
            }
        }
        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
        }
     }

    public boolean onOptionsItemSelected(MenuItem item) {
        Intent newActivity;
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.menu_slidingmenu:
                toggle();
                return true;

            default:
                return super.onOptionsItemSelected(item);
        }
    }

    public class CalendarFragmentPagerAdapter extends FragmentPagerAdapter {

        public CalendarFragmentPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            CalendarFragment fragment = new CalendarFragment();
            Bundle args = new Bundle();
            args.putInt("offset", position - MONTHS_LIMIT / 2);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return MONTHS_LIMIT;
        }

    }
} 
```

**日历片段.java：**

```
public class CalendarFragment extends Fragment
{

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            Bundle args = getArguments();
            int offset = args.getInt("offset"); //throws NullPointerException
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

            View v =  inflater.inflate(R.layout.simple_calendar_view, container, false);

            .....

            return v;
        }

        @Override
        public void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            outState.putBoolean("dummy", true);
        }

} 
```

问题出在 CalendarFragment 中的这一行：

```
int offset = args.getInt("offset"); 
```

它抛出错误`NullPointerException`，调试显示这是因为`Bundle args = getArguments()`为空。

我试图将断点放在 PagerAdapter 中的这一行：

```
Bundle args = new Bundle(); 
```

但它永远不会到达这里并且应用程序崩溃并抛出`NullPointerException`.

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:46:44.587

这里

```
getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.main, new CalendarFragment())
        .commit(); 
```

和这里

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if (tab.getPosition() == 0) {
        CalendarFragment frag = new CalendarFragment();
        ft.replace(R.id.main, frag);
    } else {
        ConverterFragment frag = new ConverterFragment();
        ft.replace(R.id.main, frag);
    }
} 
```

您只是在创建一个没有任何参数的空 CalendarFragment 实例。

因此，您的活动启动，创建一个没有参数的空片段，然后在尝试获取这些时崩溃

# php - 使用 cURL 检索网站并绕过同源限制，插入 javascript

> ID：14419099
> 
> 赞同：-1
> 
> 时间：2013-01-19T21:30:51.023
> 
> 标签：php, javascript, curl, cross-domain, same-origin-policy

我需要在 iframe 中加载几个网站，同时在每个页面中添加一个谷歌翻译插件，以便可以翻译它们。这是我插入部分的代码：

```
<iframe onload="googleJS1(); googleJS2(); googleJS3();" class=iframe2 src=http://localhost:8888/mysitep></iframe>

<script>
    function googleJS1() {
        var iframe = document.getElementsByTagName('iframe')[0];
        var doc = iframe.contentWindow.document;
        var newScript = doc.createElement('div');
        newScript.setAttribute("id", "google_translate_element");
        var bodyClass = doc.getElementsByTagName('body')[0];
        bodyClass.insertBefore(newScript, bodyClass.childNodes[0]);
    }

    function googleJS2() {
        var iframe = document.getElementsByTagName('iframe')[0];
        var doc = iframe.contentWindow.document;
        var newScript = doc.createElement('script');
        newScript.setAttribute("src", "http://translate.google.com/translate_a/element.js?    cb=googleTranslateElementInit");
        var bodyClass = doc.getElementsByTagName('head')[0];
        bodyClass.insertBefore(newScript, bodyClass.childNodes[1]);
    }

    function googleJS3() {
        var iframe = document.getElementsByTagName('iframe')[0];
        var doc = iframe.contentWindow.document;
        var newScript = doc.createElement('script');
        newScript.setAttribute("src", "http://localhost:8888/mysite/google.js");
        var bodyClass = doc.getElementsByTagName('head')[0];
        bodyClass.insertBefore(newScript, bodyClass.childNodes[2]);
    }
}
</script> 
```

只要 iframe 目标 URL 位于同一服务器上，此方法就可以工作。我阅读以绕过相同的来源约束，我应该设置代理服务器并通过代理传递所有 URL 请求。所以我阅读了 cURL 并尝试了这个作为测试：

```
<?php

function get_data($url) {
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch,CURLOPT_USERAGENT, $userAgent);
        curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    curl_setopt($ch,CURLOPT_FOLLOWLOCATION,true);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$test = get_data("http://www.selfridges.com");
echo $test;

?> 
```

加载了基本的 HTML 元素，但没有加载 CSS 和图像。此外，链接仍然指向原始 URL。我需要一些关于如何将 CSS、图像和 js 从目标 URL 拉到代理并从那里加载页面的建议，使其看起来像是来自相同的域和端口并通过相同的源策略。我还需要链接以这种方式工作。

例如：

```
main page - http://localhost:8888/proxy.php 

links     - http://localhost:8888/proxy.php/products/2012/shoes 
```

也欢迎任何其他方法或替代方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:47:57.217

假设目标文档中的所有链接和图像都是相对的，您可以将`base`标签注入头部。这将有效地使链接成为绝对链接，因此链接和图像仍将引用目标域（而不是您的域）。

[http://reference.sitepoint.com/html/base](http://reference.sitepoint.com/html/base)

不过，不确定这将如何与 css 图像一起使用。

一个对任何目标站点都有效的解决方案将*很难*——您不仅需要解析 html 中的链接，还需要解析任何 css 引用中的链接。一些站点可能使用 AJAX 来填充页面，这也会在目标站点上导致同源策略问题。

# mongodb - EC2 上持久性 mongoDB 数据的问题

> ID：14419101
> 
> 赞同：1
> 
> 时间：2013-01-19T21:30:59.917
> 
> 标签：mongodb, amazon-ec2

我正在尝试将数据存储在 Amazon EC2 上的 mongoDB 数据库中。我正在使用 starcluster 来配置和启动 EC2 实例。我在 /root/data 安装了一个 EBS 卷。[我按照此处](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)的说明安装了 mongoDB 。当我登录到 EC2 实例时，我可以键入，这会将我带到带有数据库`mongo`的 mongo shell 。`test`然后，我将一些数据添加到数据库中，比如说`database1`，其中包含各种集合。当我退出 EC2 实例并使用 终止它，`starcluster terminate mycluster`然后创建一个新的不同实例时，`database1`数据不再显示在 mongo shell 中。

我尝试将`/etc/mongodb.conf`文件中的 dbpath 更改`/root/data/mongodb`为 EBS 卷，然后使用and启动和停止`mongodb`服务。然后我再试一次并收到`sudo service mongodb stop``sudo service mongodb start``mongo`

```
MongoDB shell version: 2.2.2
connecting to: test
Sat Jan 19 21:27:42 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed 
```

另一个问题是，每当我终止 EC2 实例时，我对配置文件所做的任何更改都会消失。

所以我的基本问题是：如何更改 mongoDB 在 EC2 上存储其数据的位置，以便在我终止一个 EC2 实例然后启动另一个 EC2 实例时数据将保留。

### 编辑：

回应第一个答案：

1.  目录确实存在
2.  我将所有者更改为`mongodb`
3.  然后我发出命令`sudo service mongodb stop`
4.  检查端口是否已使用`netstat -anp | grep 27017`. 没有输出。
5.  使用重新启动mongodb`sudo service mongodb start`
6.  再次检查端口 27017 并没有收到任何输出。
7.  尝试连接到 mongo shell 并收到相同的错误消息。
8.  改`mongodb.conf`回原来的设置，按上述步骤重启mongodb，再次尝试连接。同样的错误。

EBS 卷在 starcluster 配置中配置为在每次启动时重新附加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:49:14.473

对于更改问题后的“连接失败” ，您可以查看（可能在）`/etc/mongodb.conf`中指定的日志文件：`/etc/mongodb.conf``/var/log/mongodb/mongodb.log`

1.  检查指定的目录是否`dbpath`存在。
2.  确保它可由“mongodb”用户写入。也许最好是 chown 到 mongodb。
3.  确保 mongod 在启动它之前实际释放了 27017 端口：`netstat -anp | grep 27017`
4.  在启动之前等待几秒钟`mongod`以重新启动`mongo`。

您的问题不清楚您是否将[Starcluster EBS 卷用于 Persistent Storage](http://star.mit.edu/cluster/docs/latest/manual/volumes.html)。请注意，当您终止一个实例并启动另一个实例时，[普通 EBS 卷](http://star.mit.edu/cluster/docs/latest/manual/configuration.html#amazon-ebs-volumes)不会自动保留并重新附加。您需要手动附加和安装它们。

一旦你开始工作，你可能想要创建一个[自定义 Starcluster AMI](http://star.mit.edu/cluster/docs/latest/manual/create_new_ami.html)，并正确安装 mongo 并适当修改 /etc/mongodb.conf。

# azure - Microsoft Azure 存储 - 成功百分比

> ID：14419103
> 
> 赞同：6
> 
> 时间：2013-01-19T21:31:11.180
> 
> 标签：azure, azure-blob-storage

我在我的托管策略中添加了一个 microsoft azure 存储，并将大约 15gb 的视频移动到 Azure。我设置了 CDN 端点，看起来很好，我没有任何抱怨。但我添加了监控，无法理解“成功百分比”指标，为什么它不是 100%？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T22:07:24.973

因为有些请求可能出错：

*   节流
*   身份验证失败（例如 SAS 密钥过期）
*   客户端/服务器超时
*   网络错误

可以在此处找到可能的错误的完整列表：[存储分析记录的操作和状态消息](http://msdn.microsoft.com/en-us/library/windowsazure/hh343260.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:22:34.503

Sandrino 基本上是正确的，但是一个可能有回发的页面有一个 http 304 上的资产被 chached。目前 azure 报告说它未能提供百分比。我相信这会在下次控制台更新时发生变化。

# java - 如何创建一个随机整数数组生成器

> ID：14419119
> 
> 赞同：2
> 
> 时间：2013-01-19T21:32:59.557
> 
> 标签：java, android, random, arraylist

我创建了一种方法，它生成随机数，条件是下一个随机数与数组中的前一个不匹配这是代码

```
// some code   

int k=0;

//some code....

randomgenerator(k); // method call

public void randomgenerator(int j)
{

    for(j=0; j<=99; j++){
        if(j >= 1){
            if (randomset.get(j) == randomset.get(j-1)){
                randomset.add(0 + ( j  ,  int)(Math.random() * ((99 - 0) + 1)));
            }
            else{
                randomset.add(0 + (int)(Math.random() * ((99 - 0) + 1)));
            }
        }       
    }
} 
```

我得到的错误是 **java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:36:51.303

因为最初 randomset 是空的，因此它的大小为 0 并在索引 1 处返回异常。添加`randomset.add(0 + (int)(Math.random() * ((99 - 0) + 1)));`if `j < 1`(not >=1) 的最佳方法。

正确代码：

```
public void randomgenerator(int j)
{
for(j=0; j<=99; j++){
    if(j >= 1){
        if (randomset.get(j) == randomset.get(j-1)){
            randomset.add(0 + ( j  ,  int)(Math.random() * ((99 - 0) + 1)));
        }
        else{
            randomset.add(0 + (int)(Math.random() * ((99 - 0) + 1)));
        }
    }
    else {
           randomset.add(0 + (int)(Math.random() * ((99 - 0) + 1)));
    }       
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:38:55.093

采用

```
 for(j=0; j<randomset.size(); j++){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T21:39:59.710

您不能引用`ArrayList`其索引不在 bounds 中的元素`[0, size() - 1]`。创建`ArrayList`via`ArrayList()`会创建一个 size 列表`0`。要将元素添加到此数组，您必须调用添加元素的方法之一，例如`add()`。您的第一个电话是 to `get()`，但列表有大小`0`，所以甚至`get(0)`会导致`IndexOutOfBoundsException`.

做什么取决于列表的预期内容。在您的情况下，我建议编写一个辅助函数，该函数在*不包括*指定数字的范围内生成一个随机数。您可以在一个简单的循环中使用该函数来生成整个列表，将前一个元素传递给提到的辅助函数。

例子：

```
public static int randomInRange(int a, int b) {
    return (int)(Math.random() * (b - a + 1));
}

public static int randomInRangeExcluding(int a, int b, int excluding) {
    int result = (int)(Math.random() * (b - a));
    if (result == excluding) {
        result++;
    }
    return result;
}

public static List<Integer> generateRandomList(int size) {
    ArrayList<Integer> result = new ArrayList<Integer>();
    for (int j = 0; j <= size; j++) {
        if (j > 0) {
            result.add(randomInRangeExcluding(0, size - 1, result.get(j - 1)));
        } else {
            result.add(randomInRange(0, size - 1));
        }    
    }
    return result;
} 
```

并使用以下方法获取值：

```
generateRandomList(100); 
```

调用它会产生一个随机整数列表，其中没有两个连续元素相等：

```
[27, 34, 53, 92, 56, 93, 21, 22, 45, 95, 48, 25, 18, 26, 54, 1, 82, 26, 5, 62, 84, 23, 8, 84, 25, 0, 36, 37, 54, 95, 4, 26, 65, 53, 81, 16, 47, 56, 73, 46, 60, 50, 37, 89, 61, 84, 23, 79, 47, 87, 68, 49, 15, 17, 55, 71, 17, 55, 71, 51, 67, 33, 80, 47, 81, 24, 10, 41, 76, 60, 12, 17, 96, 43, 57, 55, 41, 56, 21, 85, 98, 40, 9, 39, 53, 28, 93, 70, 89, 80, 40, 41, 30, 81, 33, 53, 73, 28, 38, 87, 29] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T21:41:29.417

不要使用与输入参数和循环变量相同的变量。

公共无效随机发生器（整数长度）{

对于 (int j = 0; j < 长度; j ++) ...

我不确定我是否遵循其余的代码，但这是一个开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T22:15:20.117

你的功能是什么？您收到一个名为**j**的参数，然后您重新分配了它？

randomset.get(j) == randomset.get(j-1) <- 在这一行你有一个**java.lang.IndexOutOfBoundsException**因为你从位置 1 调用值但是在你的列表中你只有一个值位置 0; 所以抛出一个错误

而且，这是什么？**((99 - 0) + 1))** ,你可以白100，简单易读

顺便说一句，在这一行你有一个错误， **randomset.add(0 + ( j , (int)(Math.random() * ((99 - 0) + 1)));**

您应该编写更简洁的代码。

我为您准备了一个解决方案：一个生成带有随机数的列表并尊重您的条件的函数：两个连续的数字不相同。

您必须使用要生成的元素数调用此方法**generateRandomList**。

```
public static final Integer MAX_RANDOM_NUMBER = 100;

public static List<Integer> generateRandomList(int randomNumbers) {
    return generateRandomList(randomNumbers, -1);
}

private static List<Integer> generateRandomList(final int randomNumbers, final int previousNumber) {
    if (randomNumbers == 1) {
        return new ArrayList<Integer>() {
            {
                add(getNextNumber(previousNumber));
            }

        };
    } else {

        return new ArrayList<Integer>() {
            {
                int value = getNextNumber(previousNumber);
                add(value);
                addAll(generateRandomList(randomNumbers - 1, value));
            }

        };
    }
}

private static int getNextNumber(int previousNumber) {
    boolean generateNewValue = true;
    int currentValue = 0;
    while (generateNewValue) {
        currentValue = (int) (Math.random() * MAX_RANDOM_NUMBER);
        generateNewValue = currentValue == previousNumber;
    }
    return currentValue;
} 
```

# java - 关于Spring Framework应用中Beans.xml配置文件的使用

> ID：14419123
> 
> 赞同：8
> 
> 时间：2013-01-19T21:33:51.337
> 
> 标签：java, spring, configuration, frameworks

我正在学习 Spring MVC。今天想了解如何实现一个 JDBC DAO，我在 Spring（Spring，不是 Spring MVC）中找到了这个“Hello World”并开始看到它（因为我认为要实现一个 DAO，我必须创建一个单独的 Spring执行数据访问的项目...）

[http://www.tutorialspoint.com/spring/spring_hello_world_example.htm](http://www.tutorialspoint.com/spring/spring_hello_world_example.htm)

好的，这是一个独立的应用程序，这不是一个 Web 应用程序，所以它没有 Web 应用程序结构（WEB-INF 文件夹、web.xml 文件和我在我的 Web 应用程序中拥有的调度程序 servlet 配置文件）

在此示例中，我有一个*Beans.xml*配置文件，用于为不同的 bean 分配唯一 ID，并控制具有不同值的对象的创建，而不会影响任何 Spring 源文件...

例如，在本例中，我使用*Beans.xml*文件为“message”变量传递“Hello World”消息值，因此我可以在不影响*HelloWorld.java*和*MainApp.java*文件的情况下打印该值

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

   <bean id="helloWorld" class="com.tutorialspoint.HelloWorld">
       <property name="message" value="Hello World!"/>
   </bean>

</beans> 
```

所以我有一些问题要问你：

1.  这个文件是配置我的**Bean Factory**的文件吗？我认为，除了将文本值作为变量的值传递之外，我还可以将 bean 作为另一个 bean 的依赖项注入。

    这样对吗？

2.  在这个例子中，我可以不使用*Beans.xml*文件并使用来代替注释系统吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-20T01:08:53.213

**1）**这个*Beans.xml*（其实你可以随便命名）是一个**Spring配置文件**。它包含一个[**配置元数据**](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-metadata)。

来自官方 Spring 文档：

> ## 5.2.1 配置元数据
> 
> 如上图所示，Spring IoC 容器使用一种形式的配置元数据；此配置元数据表示您作为应用程序开发人员如何告诉 Spring 容器实例化、配置和组装应用程序中的对象。

配置元数据传统上以简单直观的 XML 格式提供，**但它不是唯一允许的配置元数据形式**（请参阅第二个问题的答案）

是的，你是对的：你可以注入另一个 bean 作为参考。

来自官方 Spring 文档：

> ## 5.3 Bean概述
> 
> Spring IoC 容器管理一个或多个 bean。这些 bean 是使用您提供给容器的配置元数据创建的，例如，以 XML 定义的形式。
> 
> 在容器本身内，这些 bean 定义表示为 BeanDefinition 对象，其中包含（以及其他信息）以下元数据：
> 
> *   一个包限定的类名：通常是被定义的 bean 的实际实现类。
>     
>     
> *   Bean 行为配置元素，它说明 bean 在容器中的行为方式（范围、生命周期回调等）。
>     
>     
> *   **对 bean 完成工作所需的**其他 bean 的引用；**这些引用也称为[**协作者**或 **依赖项**](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-ref-element)。**
>     
>     
> ***   要在新创建的对象中设置的其他配置设置，例如，在管理连接池的 bean 中使用的连接数，或池的大小限制。**

 **使用官方文档中对其他 bean 的引用的简单示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="exampleBean" class="examples.ExampleBean">
        <!-- setter injection using the nested <ref/> element -->
        <property name="beanOne">
            <ref bean="anotherExampleBean"/>
        </property>

        <!-- setter injection using the neater 'ref' attribute -->
        <property name="beanTwo" ref="yetAnotherBean"/>
        <property name="integerProperty" value="1"/>
    </bean>

    <bean id="anotherExampleBean" class="examples.AnotherBean"/>
    <bean id="yetAnotherBean" class="examples.YetAnotherBean"/>

</beans> 
```

* * *

**2）** 来自官方Spring文档：

> ## 5.2.1 配置元数据
> 
> ...
> 
> **基于 XML 的元数据不是唯一允许的配置元数据形式**。Spring IoC 容器本身与实际编写此配置元数据的格式完全分离。
> 
> 有关在 Spring 容器中使用其他形式的元数据的信息，请参阅：
> 
> *   [**基于注解的配置**](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-annotation-config)：Spring 2.5 引入了对基于注解的配置元数据的支持。
>     
>     
> *   [**基于 Java 的配置**](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-java)：从 Spring 3.0 开始，Spring JavaConfig 项目提供的许多特性成为核心 Spring Framework 的一部分。因此，您可以使用 Java 而不是 XML 文件来定义应用程序类外部的 bean。要使用这些新功能，请参阅 、`@Configuration`和`@Bean`注释。`@Import``@DependsOn`

另请阅读：
[没有 XML 的 Spring：Spring Annotations 与 Spring XML 文件的基础知识](http://www.theserverside.com/tutorial/Spring-Without-XML-The-Basics-of-Spring-Annotations-vs-Spring-XML-Files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-21T09:48:49.113

我创建了一个文件夹`/src/main/resources/`并将这个`beans.xml`文件放在那里：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-4.3.xsd">

 <bean id="employee" class="HelloSpring.Employee">
 <property name="name" value="test spring"></property>
 </bean>
</beans> 
```

有效！

我这样访问它：

```
package HelloSpring;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Customer {

    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("./beans.xml");

        Employee obj = (Employee) ctx.getBean("employee");
        obj.displayName();
    }
} 
```**

# c# - C#：获取窗口服务的下一次执行时间

> ID：14419125
> 
> 赞同：1
> 
> 时间：2013-01-19T21:34:22.460
> 
> 标签：c#, windows-services, scheduling, execution

我正在开发一个窗口服务，我必须安排它。时间表设置为一周中的任何三天和一天四次。在任何时候启动服务，它必须选择下一个执行时间。

下一次执行时间可以在同一天或下一个预定日期（可能有一两天的差距）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:40:27.103

看看[任务计划程序托管库（Codeplex）](http://taskscheduler.codeplex.com/releases/view/83241)。我相信它是由微软自己维护的。

将 DLL 引用添加到 后`Microsoft.Win32.TaskScheduler`，您可以像这样轻松地使用它：

```
var taskService = new TaskService();
var task = taskService.NewTask();

task.Triggers.Add(new WeeklyTrigger(DaysOfTheWeek.Friday, 1));
task.Actions.Add(new ExecAction("YourProgram.exe", null, null));

task.RootFolder.RegisterTaskDefinition("YourTaskName", task); 
```

这将注册一个**每周五**运行的任务，执行**YourProgram.exe**。

# javascript - 为什么我的表单在提交时没有验证？

> ID：14419127
> 
> 赞同：0
> 
> 时间：2013-01-19T21:34:22.373
> 
> 标签：javascript, forms, validation, submit, form-submit

我的页面上有一个注册表单，网址为[http://business.uglyopportunities.com/affiliate-signup/](http://business.uglyopportunities.com/affiliate-signup/)（向下滚动查看表格）

请记住，我不太擅长 JS，所以这可能是一个简单的错误。

无论如何，这是我的表单的第一行，告诉它进行验证：

```
<form accept-charset="UTF-8" action="xxxxx" class="infusion-form" method="POST" name="myform" onsubmit="return validateForm();"> 
```

这是我的 validateForm javascript：

```
<script type="text/javascript">
function validateForm() {
    var a = document.forms["myform"]["inf_field_FirstName"].value;
    var b = document.forms["myform"]["inf_field_Email"].value;
    var c = document.forms["myform"]["inf_field_Phone1"].value;
    var d = document.forms["myform"][" inf_field_StreetAddress1"].value;
    var e = document.forms["myform"][" inf_field_City"].value;
    var f = document.forms["myform"][" inf_field_State"].value;
    var g = document.forms["myform"][" inf_field_PostalCode"].value;
    var h = document.forms["myform"][" inf_other_Username"].value;
    var i = document.forms["myform"][" inf_other_Password"].value;
    var j = document.forms["myform"][" inf_other_RetypePassword"].value;

    if (a == null || a == "" || a == "First Name Here") {
        alert("Please enter your First Name!");
        return false;
    }
    if (c == null || c == '' || c == "Enter Your Phone Here" || c.length < 9) {
        alert("Please insert your phone number!");
        return false;
    }
    if (d == null || d == '' || d == "Street Address”) {
        alert("Please insert your street address ");
        return false;
    }
    if (e == null || e == '' ||e == "City”) {
        alert("Please insert your city");
        return false;
    }

    if (f == null || f == '' || f == "State”) {
        alert("Please insert your state ");
        return false;
    }

    if (g == null || g == '' ||g == "Postal Code”) {
        alert("Please insert your postal code");
        return false;
    }
    if (h == null || h == '' || h == "Username”) {
        alert("Please insert your username ");
        return false;
    }
    if (i == null || i == '' ||i == "password”) {
        alert("Please insert your password");
        return false;
    }
    if (j == null || j == '' || j == "password”) {
        alert("Please re - type your password ! ");
        return false;
    }

    var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    if (document.myform.inf_field_Email.value.search(emailRegEx) == -1) {
        alert("Please enter a valid email address.");
        return false;
    }
}
</script> 
```

那是行不通的。但是，当我使用此代码时，它运行良好：

```
<script type="text/javascript">
function validateForm() { 
    var a=document.forms["myform"]["inf_field_FirstName"].value; 
    var b=document.forms["myform"]["inf_field_Email"].value; 
    var c=document.forms["myform"]["inf_field_Phone1"].value; 
    if (a==null || a=="" || a=="First Name Here") {   
        alert("Please enter your First Name!");
        return false;
    }
    if (c==null || c==''|| c=="Enter Your Phone Here" || c.length < 9) {
        alert("Please insert your phone number!");
        return false;
    }

    var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    if (document.myform.inf_field_Email.value.search(emailRegEx) == -1)  {
        alert("Please enter a valid email address.");
        return false;
    }
}
</script> 
```

**更新代码*****

```
<script type="text/javascript">// <![CDATA[
function validateForm() {
    var a = document.forms["myform"]["inf_field_FirstName"].value;
    var b = document.forms["myform"]["inf_field_Email"].value;
    var c = document.forms["myform"]["inf_field_Phone1"].value;
    var d = document.forms["myform"]["inf_field_StreetAddress1"].value;
    var e = document.forms["myform"]["inf_field_City"].value;
    var f = document.forms["myform"]["inf_field_State"].value;
    var g = document.forms["myform"]["inf_field_PostalCode"].value;
    var h = document.forms["myform"]["inf_other_Username"].value;
    var i = document.forms["myform"]["inf_other_Password"].value;
    var j = document.forms["myform"]["inf_other_RetypePassword"].value;

    if (a == null || a == "" || a == "First Name Here") {
        alert("Please enter your First Name!");
        return false;
    }
    if (c == null || c == '' || c == "Enter Your Phone Here" || c.length < 9) {
        alert("Please insert your phone number!");
        return false;
    }
    if (d == null || d == '' || d == "Street Address") {
        alert("Please insert your street address ");
        return false;
    }
if (e == null || e == '' ||e == "City") {
        alert("Please insert your city");
        return false;
    }

    if (f == null || f == '' || f == "State") {
        alert("Please insert your state ");
        return false;
    }

if (g == null || g == '' ||g == "Postal Code") {
        alert("Please insert your postal code");
        return false;
    }
    if (h == null || h == '' || h == "Username") {
        alert("Please insert your username ");
        return false;
    }
if (i == null || i == '' ||i == "password") {
        alert("Please insert your password");
        return false;
    }
    if (j == null || j == '' || j == "password") {
        alert("Please re - type your password ! ");
        return false;
    }

    var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    if (document.myform.inf_field_Email.value.search(emailRegEx) == -1) {
        alert("Please enter a valid email address.");
        return false;
    }
}
// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:52:12.457

你在这里有一个空白：

```
var d = document.forms["myform"][" inf_field_StreetAddress1"].value;
//                                ^----------------------- 
```

你有同样的问题 for`e,f,g,h,i,j`

此外，您使用了错误的引号符号：

```
"Street Address”
//             ^-------------- 
```

你做了几次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:58:59.017

正如 gdoron 所说，这可能是拼写问题。您不能以空格开头的元素名称[http://www.w3.org/TR/html401/types.html#type-name](http://www.w3.org/TR/html401/types.html#type-name)

# php - 将转换为 PHP 的 Javascript var 放入

> ID：14419131
> 
> 赞同：-2
> 
> 时间：2013-01-19T21:35:00.350
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [Ajax 之后的 Javascript](https://stackoverflow.com/questions/14417862/javascript-after-ajax)

我想在 DOM 中使用 Javascript 代码。

我有这个要求：

```
function ajaxrequest(str){

    var aircraft = $("#resultdiv");
        aircraft.load("./file.php?icao="+str, function(){
        });
    } 
```

我在file.php中有这个javascript代码：

```
<script>
    function example(){

            var id = document.getElementById('id').value;
                    $("div2").text(id);
        }
    </script> 
```

如何正确地从 DOM 中执行 Javascript？如果我在 DOM 中这样做。`var id = document.getElementById('id').value;`不工作。

**@charlietfl**这是 HTML 代码

```
<div id="editaircraftdialog" style="width: auto; min-height: 100px; height: auto;" class="ui-dialog-content ui-widget-content" scrolltop="0" scrollleft="0"><input id="id" value="foo">
<input id="editaircraft" type="submit" value="Edit Aircraft">

<div id="div2"></div></div> 
```

这是文件的代码：

```
<input id="id" value="foo"/>
<tr><td><input id="editaircraft" type="submit" value="Edit Aircraft"></td></tr>
<script>
$("#editaircraft")
                .find('button') /* ??? */
                .click(editForm);
function editForm(){
var id = document.getElementById('id').value;
$("div2").text(id);
}

</script>
<div id="div2"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:50:11.613

如果远程文件中的脚本放在它要查找的 html 之前，它将找不到它，因为脚本将在 html 存在之前运行。颠倒 html 和 script 的顺序将意味着 html 在脚本尝试找到它之前就存在并且它将起作用。

即使代码包含在 中也是如此`document.ready`，因为该`ready`事件已经发生在主页面中

远程文件中显示的脚本也是一个函数，但您从未显示调用该函数

不会工作：

```
<script> var id = document.getElementById('id').value;</script>
<input id="id" value="foo"/> 
```

将工作：

```
<input id="id" value="foo"/>
<script> var id = document.getElementById('id').value;</script> 
```

编辑：您还可以将脚本放在`load`主页面的完整回调中：

```
aircraft.load("./file.php?icao="+str, function(){
   /* new html now exists, run code here*/
 }); 
```

# assembly - 将 as86 转换为 fasm

> ID：14419132
> 
> 赞同：1
> 
> 时间：2013-01-19T21:35:06.390
> 
> 标签：assembly, x86, fasm, as86

我正在尝试将 as86 的这一程序集转换为 fasm。我有3个问题：

1) 为什么 `seg es`给定的`error: illegal instruction.`this 在 16 位中无效？

2) `mov byte [0],0x41`(FASM 语法) 是否完全等同于`mov [0],#0x41`(as86 语法)？如果不是，你能告诉我相当于吗？

3) 为什么`entry start`在 FASM 中给出错误？

这是程序集代码：

**as86**

```
entry start
start:
       mov ax,#0xb800
       mov es,ax
       seg es
       mov [0],#0x41
       seg es
       mov [1],#0x1f
 loop1: jmp loop1 
```

和我写的 fasm 版本：

**FASM**

```
use16
format binary

start:
    mov ax,0xb800
    mov es,ax
    seg es
    mov byte [0],0x41
    seg es
    mov byte [1],0x1f
loop1:  jmp loop1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:52:33.343

正确的语法是：

```
mov byte [es:0],0x41    ;I'm not sure if this instruction is supported under 16 bit CPU 
```

或者

```
push bx 
mov  bx,0   ;you can use also: xor  bx, bx
mov  byte [es:bx],0x41
pop  bx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:43:41.747

`seg es`看起来很腥。尝试以下操作：

```
mov byte ptr es:[0],0x41 
```

# emacs - Emacs 不会在任何语言中将缩进设置为 4 个空格

> ID：14419147
> 
> 赞同：4
> 
> 时间：2013-01-19T21:37:51.093
> 
> 标签：emacs, tabs, indentation, auto-indent

我无法让 Emacs 运行并将 Python（或任何环境）设置为 4 空格制表符。以下是我的`.emacs`文件，我已经尝试了 下的所有选项`;; --- Set python indent to 4 spaces ---`，但都没有奏效。缩进是否可能发生一些冲突或覆盖？

此外，无论我将制表符列表变量设置为 4 的倍数多少次，当我从菜单中使用“自定义 Emacs”并在 .emacs 文件中设置变量时，它们总是以 8 的倍数结束。

我正在为 Mac OS X ( [http://emacsformacosx.com/](http://emacsformacosx.com/) ) 使用 GNU emacs。

```
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(ansi-color-names-vector ["#242424" "#e5786d" "#95e454" "#cae682" "#8ac6f2" "#333366" "#ccaa8f" "#f6f3e8"])
 '(custom-enabled-themes (quote (deeper-blue)))
 '(indent-tabs-mode nil)
 '(inhibit-startup-screen t)
 '(python-guess-indent nil)
 '(python-honour-comment-indentation t)
 '(python-use-skeletons t)
 '(speedbar-indentation-width 2)
 '(tab-stop-list (quote (4 8 12 16 20 24 28 32 36 40 44 48 52 56 60))))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:inherit nil :stipple nil :background "#181a26" :foreground "gray80" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 120 :width normal :family "consolas"))))
 '(bold ((t (:foreground "white" :weight bold))))
 '(variable-pitch ((t (:family "Helvetica Neue")))))

(add-to-list 'load-path "~/.emacs.d/el-get/el-get")

(unless (require 'el-get nil 'noerror)
  (with-current-buffer
      (url-retrieve-synchronously
       "https://raw.github.com/dimitri/el-get/master/el-get-install.el")
    (let (el-get-master-branch)
      (goto-char (point-max))
      (eval-print-last-sexp))))

(el-get 'sync)

(add-to-list 'package-archives
             '("melpa" . "http://melpa.milkbox.net/packages/") t)

;; Yet another snippet extension for emacs -------------------------------------
(add-to-list 'load-path
              "~/.emacs.d/plugins/yasnippet")
(require 'yasnippet)
(yas-global-mode 1)

;; Develop and keep personal snippets under ~/emacs.d/mysnippets
(setq yas/root-directory "~/.emacs.d/mysnippets")

;; Load the snippets
(yas-load-directory yas/root-directory)

;; Auto headers for files ---------------------------------------------------
(add-to-list 'load-path "~/.emacs.d/plugins/")
(require 'header2)
(add-hook 'emacs-lisp-mode-hook 'auto-make-header)

;; Invoke Emacs Speaks Statistics (ESS) for R
(require 'ess-site)

; automatically get the correct mode 
auto-mode-alist (append (list '("\\.c$" . c-mode)
                  '("\\.tex$" . latex-mode)
                  '("\\.S$" . S-mode)
                  '("\\.s$" . S-mode)
                  '("\\.R$" . R-mode)
                  '("\\.r$" . R-mode)
                  '("\\.html$" . html-mode)
                              '("\\.emacs" . emacs-lisp-mode)
                    )
              auto-mode-alist)

;; --- Automatically close all parens and quotes ---
(add-to-list 'load-path "~/.emacs.d/plugins/autopair")
(require 'autopair)
(autopair-global-mode) ;; enable autopair in all buffers

; Match Triple-quoting in python
(add-hook 'python-mode-hook
          #'(lambda ()
              (setq autopair-handle-action-fns
                    (list #'autopair-default-handle-action
                          #'autopair-python-triple-quote-action))))

;; --- Add autopairing of $ in latex ---
(add-hook 'latex-mode-hook
          #'(lambda ()
              (push '(?$ . ?$)
                    (getf autopair-extra-pairs :string))))

; Show column numbers
(setq column-number-mode t)

; --- Set python indent to 4 spaces ---
;; Set indent size to 4
(setq standard-indent 4)
(setq default-tab-width 4)

;; (add-hook 'python-mode-hook '(lambda () 
;;  (setq python-indent 4)))
;; (setq-default py-indent-offset 4)
;; (setq indent-tabs-mode t
;;       tab-width 4
;;       python-indent 4)

;; Python Hook
;; (add-hook 'python-mode-hook
;;           (function (lambda ()
;;                       (setq indent-tabs-mode nil
;;                             tab-width 4))))

;; --- Remove all tabs, convert them to spaces ---
(setq indent-tabs-mode nil)

;; --- Auto complete latex --- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:41:49.267

从`C-h v default-tab-width RET`

> 该变量自 23.2 起已过时；改用“制表符宽度”。

并且对于`tab-width`

> 文档：
> *制表位之间的距离（用于显示制表符），以列为单位。
> **您可以自定义此变量。**

当我插入

```
(custom-set-variables
 '(tab-width 4)) 
```

进入`~/.emacs`并重新启动 emacs，它设置为`4`.

# sql - 获得定制报告

> ID：14419150
> 
> 赞同：0
> 
> 时间：2013-01-19T21:38:46.340
> 
> 标签：sql, reporting-services, sql-server-2008-r2

目标：
在报表Service 2008 R2中根据下图显示结果。

问题：
我应该怎么做？

您还必须记住，实际上该列表包含大量数据，可能是 miljon

![在此处输入图像描述](../Images/88b8a4ec82fb08ea6ac343e2e1b08263.png) ![在此处输入图像描述](../Images/34690e374ae92b45c03093a8e28374bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:28:55.677

我会使用一个带有文本框的**列表**来进行这种显示。此外，您可以考虑在每个客户之后添加分页符。

我个人在处理数千行时遇到了很多性能问题，更不用说数百万行了。

我对您的建议是重新考虑报告的主要目标：如果报告是用于导出目的 - 那么不要为此使用 ssrs。如果报告用于查看 - 那么也许可以使用每个用户选择的参数来缩小数据范围。

最后一件事，祝你好运:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:31:44.050

In terms of the report itself, this should be a fairly standard implementation.

You'll need to create one **Tablix**, with one **Group** for *Customer* (one row), one **Group** for *Artist* (two rows, one for the headers and one for the *Artist* name, then a detail row for the *Title*.

It looks like you need more formatting options for the *Customers* **Textbox** - you could merge the cells in the *Customer* header row, then insert a **Rectangle**, which will give you more options to move objects around in the row.

For large reports you've got a few options:

**Processing large reports:** [http://msdn.microsoft.com/en-us/library/ms159638(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms159638(v=sql.105).aspx)

**Report Snapshots:** [http://msdn.microsoft.com/en-us/library/ms156325(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms156325(v=sql.105).aspx)

**Report Caching:** [http://msdn.microsoft.com/en-us/library/ms155927(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms155927(v=sql.105).aspx)

I would recommend scheduling a **Snapshot** overnight to offload the processing to a quiet time, then making sure the report has sensible pagination set up so not too much data has to be handled at one time when viewed (i.e. not trying to view thousands of reports at one time when viewed in Report Manager).

Another option would be to set up an overnight **Subscription** that could save the report to a fileshare or send it as an email.

Basically you're thinking about reducing the amount of processing that needs to be done at peak times and processing the report once for future use to reduce overall resource usage.

# ios - 拍照时应用程序崩溃且没有错误

> ID：14419151
> 
> 赞同：0
> 
> 时间：2013-01-19T21:38:54.820
> 
> 标签：ios, objective-c, cocoa-touch

我的应用程序拍摄一张照片，裁剪它，然后在使用 NSCoding 保存之前使用过滤器。如果我尝试连续拍摄 4-5 张照片，应用程序将崩溃且没有错误消息。我真的不知道如何调试这个。我猜这是内存问题，但显然`release`在带有 ARC 的 iOS 5 中没有。我添加了一张图片，它并没有告诉我太多，但也许它可以提供帮助。

![在此处输入图像描述](../Images/878e1bd3129317621f6e6382231321e6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:44:04.093

您的应用程序显然（如图所示）分配了越来越多的内存，而在不再需要它并且您有很多（大）内存泄漏时不会再次释放它。

检查您的内存管理并确保例如保存到磁盘的图像数据，未显示在任何地方也被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:41:49.227

我知道这可能发生的两个原因：

1.  内存不足
2.  你推迟 UI 太久了

对于＃1，在您的应用程序委托中放置某种日志操作`didReceiveMemoryWarning`，并扫描控制台日志以查找系统发出的（容易错过的）内存警告。在你的应用程序被杀死之前，你会收到一个内存警告。

但是，我不知道有什么好的方法可以检测您何时因＃2 被杀。

但看起来你的问题是内存。

# api - 为 REST API 编写单元测试的最佳方式是什么？

> ID：14419155
> 
> 赞同：8
> 
> 时间：2013-01-19T21:39:12.980
> 
> 标签：api, unit-testing, http, rest, testing

在为 API 包装器编写单元测试时，我应该对 REST API 端点进行真正的调用，还是应该使用模拟成功和错误调用的 mocl 响应？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-19T21:46:20.417

**单元测试**意味着只测试你的*单元*（API 包装器），没有别的。因此，不幸的是，您应该模拟整个 API。

另一方面，这从来没有真正给我足够的信心，所以我去进行**系统测试**（也称为组件测试）。在这种情况下，您应该针对现有 API 运行 API 包装器，可能嵌入并与您的测试一起启动。在**集成测试**中，最终方案是针对真实但最有可能的 API 测试实例（沙盒、开发环境）运行 API 包装器。

在完善的数据库测试领域：单元测试模拟整个 DAO 级别，组件测试针对内存数据库运行，而集成测试使用一些假数据连接到真实数据库。

# google-maps - Google Maps LatLngBounds Contains 函数始终返回 true

> ID：14419164
> 
> 赞同：0
> 
> 时间：2013-01-19T21:40:36.847
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我想在拖动另一个标记时实现对标记的捕捉功能。

我有一个函数可以检查两个标记是否“关闭”：（从[这里](https://stackoverflow.com/questions/1484578/snap-to-nearest-marker)获取）

```
function arePointsNear(point1, point2) {
    var sw = new google.maps.LatLng(point2.lat() - 0.005, point2.lng() - 0.005);
    var ne = new google.maps.LatLng(point2.lat() + 0.005, point2.lng() + 0.005);
    var bounds = new google.maps.LatLngBounds(sw, ne);
    return bounds.contains(point1);
}; 
```

现在，在标记的拖动事件中，我这样做：

```
for (var index in allMarkers) {
    if(allMarkers[index] == marker) {
        continue;
    }

    var point1 = allMarkers[index].position;
    var point2 = marker.position;

    // This always returns true
    var isClose = arePointsNear(point1, point2);
} 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:08:16.780

该算法正在运行..问题出在我的代码中。我正在检查同一个标记的位置，而不是两个标记的位置。

# c++ - 在 Windows 7 上使用带有代码块的 clang

> ID：14419168
> 
> 赞同：4
> 
> 时间：2013-01-19T21:41:31.053
> 
> 标签：c++, clang, codeblocks

我已经设法使用 Visual Studio 210 在 Windows 7 上构建了 clang，现在我喜欢将它与 codeblocks IDE 一起使用。因此，我将 clang 可执行文件复制到了 mingw bin\ 文件夹中，并更新了代码块的编译器设置以使用 clang 而不是 gcc。

但是当我编译 hello world 示例时，出现以下错误：

```
||=== clang_test, Debug ===|
obj\Debug\main.o:c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\system_error|447|undefined reference to `std::iostream_category()'|
obj\Debug\main.o:c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\stdexcept|170|undefined reference to `std::exception::exception(char const* const&)'|
||=== Build finished: 2 errors, 0 warnings ===| 
```

我想我必须使用 clang 的头文件，但我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T22:20:28.387

*更新*

MSYS2 软件包可用于 32 位和 64 位的 clang，从我所做的有限测试来看，它似乎工作得很好。编译器可以在 MSYS2 环境之外使用。

关于如何安装 MSYS2，请参见[此处](http://sourceforge.net/p/msys2/wiki/MSYS2%20installation/)。然后运行

```
pacman -Sy mingw-w64-x86_64-clang 
```

或者

```
pacman -Sy mingw-w64-i686-clang 
```

在更新 MSYS2 以安装 Clang 之后。

该软件包中使用的补丁（如果您想自己构建 LLVM/Clang）位于[此处](https://github.com/Alexpux/MINGW-packages/tree/master/mingw-w64-clang)。

* * *

*旧回复如下，略过时*

如果你想在 Windows 上为 C++ 使用 Clang，你目前唯一的选择是使用（或自己构建）Clang with/for MinGW(-w64)。

幸运的是，我提供包：

*   [铿锵声 3.2](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/clang-3.2-release/i686-w64-mingw32-clang-3.2-release-win32_rubenvb.7z/download)
*   [GCC 4.6.3 dw2](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/gcc-dw2-4.6-release/i686-w64-mingw32-gcc-dw2-4.6.3-2-release-win32_rubenvb.7z/download)

将两者解压缩到同一目录并添加`mingw32-dw2/bin`到`PATH`，或将 Codeblocks 指向它。您将受限于 GCC 4.6 的 libstdc++。不过，Clang 3.2 的 C++11 语言支持功能齐全。

请注意，Clang 需要 GCC 样式选项，因此我建议修改 Codeblocks GCC 构建过程并替换`g++`为`clang++`和。`gcc``clang`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:03:49.953

clang 尚不支持 MSVC C++ ABI，因此无法正确编译 C++ 代码。

更新：截至 2014 年 12 月，clang 确实支持 MSVC，但 (heh) 例外。要编译代码，你必须做

```
clang-cl.exe /D_HAS_EXCEPTIONS=0 foo.cpp 
```

如果要直接使用 clang.exe：

```
clang++ -target i686-pc-windows-msvc -D_HAS_EXCEPTIONS=0 foo.cpp -o foo.exe 
```

等等

有关 MSVC 支持的最新状态，请参阅[http://clang.llvm.org/docs/MSVCCompatibility.html](http://clang.llvm.org/docs/MSVCCompatibility.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:42:32.870

我的 CodeBlocks 构建日志将命令行显示为

clang++.exe -fno-ms-兼容性 -fno-use-cxa-atexit -IC:\mingw\include\c++\4.7.0 -IC:\mingw\include\c++\4.7.0\x86_64-w64-mingw32 - IC:\mingw\include\c++\4.7.0\backward -IC:\mingw\include -c C:\Users\Vipul\Documents\Hello.cpp -o C:\Users\Vipul\Documents\Hello.o

ld.exe -oC:\Users\Vipul\Documents\Hello.exe C:\Users\Vipul\Documents\Hello.o -m i386pep -Bdynamic -Lc:\mingw\lib c:\mingw\lib\crt2.oc :\mingw\lib\crtbegin.o -lstdc++ -lmingw32 -lgcc_s -LC:\Windows\SUA\opt\gcc64\lib\gcc\x86_64-pc-interix6\4.6.0 -lgcc -lmoldname -lmingwex -lmsvcrt -ladvapi32 -lshell32 -luser32 -lkernel32 c:\mingw\lib\crtend.o

我可以运行程序。我已经用 VSExpress 构建了 Windows clang。如果编译或链接最终导致错误，那么比较我们的命令行可能有助于隔离问题。

# java - 如何在 JDT TypeHierarchy 中设置区域（= java 元素集）参数？

> ID：14419171
> 
> 赞同：1
> 
> 时间：2013-01-19T21:41:42.903
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

http://www.google.com/url?sa=t&rct=j&q=jdt_fundamentals&source=web&cd=1&ved=0CDIQFjAA&url=http%3A%2F%2Fwww.eclipsecon.org%2F2008%2Fsub%2Fattachments%2FJDT_fundamentals.ppt">JDT使用 JDT 获取类型层次结构的示例代码教程。

![在此处输入图像描述](../Images/41b6cda0939b7c89f13da1ddd435f6f9.png)

如何设置区域（= java 元素集）参数？当我的代码 A 具有子类 B 和超类 C 时，如何设置区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:16:38.560

在阅读了[IRegion Javadocs](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2FIJavaElement.html)并[使用 Eclipse 的 JDT 之后，如何从类名中获取 IType？](https://stackoverflow.com/questions/3465365/using-eclipses-jdt-how-does-one-get-an-itype-from-a-class-name)，我觉得您应该能够创建这样的区域：

```
final IJavaProject project = ...;
final IProgressMonitor monitor = ...;
final IRegion region = JavaCore.newRegion();
region.add(project.findType("some.packagename.B"));
final ITypeHierarchy typeHierarchy = project.newTypeHierarchy(region, monitor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:00:07.233

[我从这个网站](http://www.eclipse.org/forums/index.php/t/109644/)得到提示的这段代码工作正常。

```
IRegion region = JavaCore.newRegion();
for (IJavaElement i : javaProject.getPackageFragmentRoots())
{
    String elementName = i.getElementName();
    if (!elementName.endsWith("jar") && !elementName.endsWith("zip"))
        region.add(i);
    }

    NullProgressMonitor progressMonitor = new  NullProgressMonitor();

    // for getting a class hierarchy for type
    ITypeHierarchy typeHierarchy= type.newTypeHierarchy(progressMonitor);
    // for getting all the class hierarchies of the region in the project
    ITypeHierarchy typeHierarchy= javaProject.newTypeHierarchy(region, progressMonitor);
} 
```

相关 -[为什么我在 JDT API 中没有使用 getAllSuperclasses() 的超类？](https://stackoverflow.com/questions/14295087/why-i-got-no-super-classes-with-getallsuperclasses-in-jdt-api/14329786#14329786)

# ios - 如何为我的案例与核心数据中的关系建模我的实体？

> ID：14419172
> 
> 赞同：1
> 
> 时间：2013-01-19T21:41:47.767
> 
> 标签：ios, core-data, orm

我真的需要一些帮助来解决我的应用程序中的这个小难题。

案例：我在 Core-Data 中有 4 个实体：

*   MixColors（由来自 ColorA、B 和 C 的 3 种颜色组成。还有很多）
*   颜色A
*   颜色B
*   颜色C

用户选择 3 种颜色（A、B、C），并将结果存储在 MixColors 中。3 种颜色只是颜色实体的 ID，即索引 ID（主键）。实体混合颜色由这些颜色的“许多”组合组成。

**我不好的解决方案：**我可以轻松地制作没有关系的模型..但我更喜欢核心数据中的关系。

**问题：**那么我怎样才能做到这一点呢？我是否应该将 ColorA、B、C 组合成一个实体：Color - 然后建立单一关系，但我发现索引 ID 存在一些问题？那么在核心数据中对这种情况进行建模的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:05:12.617

在核心数据中，您根本不必担心 ID，一切都会为您处理好。也许试试这个：

```
Palette < ---- >> Color 
```

您只需要 2 个对象以及调色板对象和颜色对象之间的一对多关系。在实践中，这意味着 Palette 对象将具有一个名为 Colors 的属性，该属性将是一个`NSSet`颜色对象。如果颜色对象还必须保持其顺序，则为此添加一个属性，例如存储数字的“顺序”。然后，您可以按该顺序获取它们。

# c++ - 特定编译器/平台问题上的 C++ 空终止字符串

> ID：14419174
> 
> 赞同：0
> 
> 时间：2013-01-19T21:41:51.730
> 
> 标签：c++, string

我发现了一些类似的代码（以下代码中有很多问题）：

```
//setup consistent in each of the bad code examples
string someString; 
char* nullValue = getenv("NONEXISTENT"); // some non-existent environment variable  

// bad code example 1:
char x[1024];
sprintf(x," some text%s ", nullValue); //crashes on solaris, what about linux?  

// bad code example 2: 
someString += nullValue; // What happens here?  

//bad code example 3:
someString.append(nullValue); // What happens here?  

//bad code example 4:
string nextString=string(nullValue); //What happens here?
cout<<nextString; 
```

我们正在使用 solaris、linux、gcc、sunstudio，将来很可能会使用 clang++。此代码的行为跨平台和编译器是否一致？在上述代码的所有情况下，我都找不到描述预期行为的规范。

目前，我们在使用 gcc（和在 linux 上）运行我们的代码时遇到问题，上面的代码可能是原因吗？

如果上面的代码在所有这些环境中的行为都相同，那么这对我来说是有价值的信息（即使行为是崩溃），因为我会知道这不是我们的 linux 问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:06:23.820

一般来说，NULL 的这些使用（预期有效的 C 字符串）会导致未定义的行为，这意味着任何事情都可能发生。一些平台试图为此定义行为。IIRC 有一些平台可以优雅地处理将 NULL 指针传递给 printf 系列函数以进行 %s 格式替换（打印类似“（null）”的内容）。除此之外，一些平台试图确保此类情况下的可重现崩溃（例如致命信号）。但一般来说，你不能依赖这个。

如果您在代码的那个区域有问题：是的，这是一个可能的原因或可能掩盖其他原因，所以：修复它，它坏了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:00:55.663

从指针构造字符串时出现问题，而没有先检查返回值。`getenv`定义说：

> 检索包含名称被指定为参数的环境变量的值的 C 字符串。如果请求的变量不是环境列表的一部分，则该函数返回一个空指针。

C++ 标准`std::string`明确不允许从空指针*创建*a 。附加到字符串 ( `+=`) 也是如此。

我不是 C 专家，但有一种预感，`sprintf`也不允许使用空指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:36:18.463

在您描述的任何情况下使用 NULL 指针时发生的确切情况是“未定义的行为”。一些 C 库确实可以识别 printf 中字符串的 NULL，并且会打印“(null)”或类似的内容，但我绝对不会依赖它。同样，您对 NULL 的其他用法是“未定义的”，这意味着它们保证不会在一系列平台上以任何特定方式工作。在一个平台上发生的事情很可能与在另一个平台上发生的事情完全不同（或者使用另一个品牌/版本的编译器，或者使用不同的编译器优化设置，或者如果你不走运，那一天的风向）。在这种情况下，它可能会导致崩溃或“行为良好的代码”——这取决于谁编写了 C/C++ 库。

One solution, if you have a few of these things is to create a "getenv_safe" that instead of returning NULL returns an empty string [or "not set" or similar] if the environment variable isn't set, and then either fix the code directly, or `#define getenv(x) getenv_safe(x)`.

# c# - 关于未分配的变量

> ID：14419175
> 
> 赞同：13
> 
> 时间：2013-01-19T21:41:53.420
> 
> 标签：c#

只是好奇，我不是想解决任何问题。

为什么只分配局部变量？

在以下示例中：

```
class Program
{
    static int a;
    static int b { get; set; }
    static void Main(string[] args)
    {
        int c;
        System.Console.WriteLine(a);
        System.Console.WriteLine(b);
        System.Console.WriteLine(c);
    }
} 
```

为什么只给我一个警告并`a`给我一个错误？`b``c`

另外，为什么我不能只使用**Value Type**的默认值并编写以下代码？

```
 bool MyCondition = true;
        int c;
        if (MyCondition)
            c = 10; 
```

它与内存管理有什么关系吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-19T22:05:18.630

蒂姆对你的第一个问题给出了一个很好的答案，但我可以添加更多细节。

您的第一个问题基本上是“必须明确分配本地人，那么为什么不对字段进行相同的限制？” Tim 指出，Jon 指出实际上很难做到这一点。对于本地人来说，第一次读取和首次写入本地时几乎总是一清二楚。在不清楚的情况下，编译器可以做出合理的保守猜测。但是对于字段，要知道第一次读取和第一次写入发生的时间，你必须知道关于以什么顺序调用哪些方法的各种事情。

简而言之，分析本地人需要*本地*分析；分析不必经过包含声明的块。现场分析需要*全局*分析。这是很多工作；更容易说字段被初始化为其默认值。

（现在，就是说，当然可以进行这种全局分析；我的新工作可能会涉及到精确地进行这种分析。）

您的第二个问题基本上是“那么，如果默认值的自动分配对于字段来说足够好，那么为什么它对本地人来说不够好？” 答案是“因为未能分配局部变量并意外获取默认值是常见的错误来源。” C# 经过精心设计，旨在阻止导致令人讨厌的错误的编程实践，这就是其中之一。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-19T21:42:43.557

因为其他变量是用它们的[**默认**](http://msdn.microsoft.com/en-us/library/vstudio/25tdedf5.aspx)值初始化的。

Jon Skeet 已经在这个问题上找到[了一些有趣的词：](https://stackoverflow.com/a/1542851/284240)

> 对于局部变量，编译器对流程有一个很好的了解——它可以看到变量的“读取”和变量的“写入”，并证明（在大多数情况下）第一次写入将发生在第一次读取之前.
> 
> 实例变量并非如此。考虑一个简单的属性——你怎么知道有人在得到它之前是否会设置它？这使得强制执行合理的规则基本上是不可行的——所以要么你必须确保所有字段都在构造函数中设置，要么允许它们具有默认值。C# 团队选择了后一种策略。

[这](https://stackoverflow.com/a/1542864/284240)是相关的C# 语言规范：

> 5.3 明确赋值
> 
> 在函数成员的可执行代码中的给定位置，如果编译器可以通过特定的静态流分析（第 5.3.3 节）证明该变量已被自动初始化或已被至少一项任务的目标。
> 
> 5.3.1 初始赋值变量
> 
> 以下类别的变量被归类为最初指定的：
> 
> *   静态变量。
>     
>     
> *   类实例的实例变量。
>     
>     
> *   最初分配的结构变量的实例变量。
>     
>     
> *   数组元素。
>     
>     
> *   值参数。
>     
>     
> *   参考参数。
>     
>     
> *   在 catch 子句或 foreach 语句中声明的变量。
>     
>     
> 
> 5.3.2 最初未赋值的变量
> 
> 以下类别的变量被归类为最初未分配：
> 
> *   最初未分配的结构变量的实例变量。
>     
>     
> *   输出参数，包括 struct 实例构造函数的 this 变量。
>     
>     
> *   局部变量，在 catch 子句或 foreach 语句中声明的变量除外。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-19T22:22:17.070

CLR 提供了将局部变量初始化为其默认值的硬保证。但这种保证确实有局限性。缺少的是它能够识别方法体内的范围块。一旦编译器将代码转换为 IL，它们就会消失。Scope 是一种语言结构，在 CLI 中没有平行项，也无法在 IL 中表示。

例如，在 VB.NET 之类的语言中，您可以看到这会出错。这个人为的例子显示了这种行为：

```
Module Module1
    Sub Main()
        For ix = 1 To 3
            Dim s As String
            If ix = 2 Then s = "foo"
            If s Is Nothing Then Console.WriteLine("null") Else Console.WriteLine(s)
        Next
        Console.ReadLine()
    End Sub
End Module 
```

输出：

```
null
foo
foo 
```

或者换句话说，局部变量`s`只被初始化了一次并且之后保持它的值。当然，这具有创建错误的诀窍。VB.NET 编译器*确实会*为它生成一个警告，并且有简单的语法来避免它（As New）。像 C++/CLI 这样的托管语言具有相同的行为，但根本不会发出诊断信息。但是C#语言提供了更强的保证，它会产生错误。

此规则称为“明确分配”。确切的规则在 C# 语言规范第 5.3.3 章中有详细说明

明确的分配检查有其局限性。它适用于局部变量，因为它们的范围非常有限（方法体私有）并且您无法使用反射来获取它们。处理类的字段要困难得多，它需要整个程序分析，这可能需要超出编译器所能看到的范围。就像另一个程序集中的代码一样。这就是为什么 C# 编译器只能发出警告但不能直接拒绝代码的原因。

# php - 如何仅从数据库中选择随机记录一次

> ID：14419177
> 
> 赞同：0
> 
> 时间：2013-01-19T21:42:09.350
> 
> 标签：php, mysql

我想创建一个 PHP 页面，它从 MySQL 数据库中选择一条随机记录（一个字符串，将用作唯一的“令牌”）。我只想选择这个随机记录一次，之后再也不选择。

为此，我向表中添加了一个额外的字段（名为“numberfield”，包含 number `0`），该字段在选择特定记录时递增。这样，只能`0`选择 numberfield 表字段中值为 的记录。一旦选择了随机记录，numberfield 字段就会增加到`1`并且不能再选择。我正在考虑使用以下 PHP 代码：

```
$result = mysql_query("SELECT token FROM table WHERE numberfield < **1** ORDER BY RAND() LIMIT 0,1");

if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}

$row = mysql_fetch_row($result);
echo $row[0];
mysql_query("UPDATE table SET numberfield=numberfield+1 WHERE token=" + $row[0] + ""); 
```

这会是正确的方法吗？有什么想法吗 ？

此外，我想避免在页面刷新时**选择不同的随机记录。**将“令牌”保留在缓存中的正确和最简单的方法是什么？例如，是否可以将“令牌”保留在页面刷新期间不会被覆盖的会话中，或者我是否必须使用 Ajax 等其他技术。非常感谢您的帮助和评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:03:01.120

1.  您应该停止使用`mysql_`已弃用的函数。
2.  您应该避免`ORDER BY RAND()`在较大的表中使用，因为寻找随机数会产生开销。
3.  要完成 a`SELECT ... UPDATE`你需要某种锁定。*一行被随机*选择两次的可能性很小。这可以使用存储过程来防止。
4.  您可以只使用 PHP 生成的会话 id 或其中的一部分。[本主题](https://stackoverflow.com/questions/138670/how-unique-is-the-php-session-id)讨论会话 id 的唯一性，[本主题](https://stackoverflow.com/a/12240936/679449)讨论不同的长度。
5.  您也可以在 PHP 端创建一个随机字符串，这样可以节省连接数据库的开销。

# data-structures - 平衡 AVL 树

> ID：14419180
> 
> 赞同：4
> 
> 时间：2013-01-19T21:42:22.970
> 
> 标签：data-structures, tree, rotation, binary-search-tree, avl-tree

我无法平衡 AVL 树。我已经到处搜索了如何平衡它们的步骤，但我找不到任何有用的东西。

我知道有4种：

*   单向左旋转
*   单次右转
*   双左右旋转
*   双左右旋转

但我就是不知道**如何选择其中一个**以及**应用它的节点**！

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:39:35.500

这是 java 实现，您将在那里了解算法的概念：

```
private Node<T> rotate(Node<T> n) {
    if(n.getBf() < -1){
            if(n.getRight().getBf() <= 0){
                return left(n);         
            }
            if(n.getRight().getBf() > 0){
                return rightLeft(n);
            }
    }   
    if(n.getBf() > 1){
            if(n.getLeft().getBf() >= 0){
                return right(n);
            }
            if(n.getLeft().getBf() <  0){
                return leftRight(n);
            }
    }
    return n;
} 
```

4个旋转的单独方法在这里：

```
/**
 * Performs a left rotation on a node
 * 
 * @param n The node to have the left rotation performed on
 * @return The new root of the subtree that is now balanced due to the rotation
 */
private Node<T> left(Node<T> n) {
    if(n != null){
        Node<T> temp = n.getRight();
        n.setRight(temp.getLeft());
        temp.setLeft(n);
        return temp;
    }
    return n;   
}

/**
 * Performs a right rotation on a node
 * 
 * @param n The node to have the right rotation performed on
 * @return The new root of the subtree that is now balanced due to the rotation
 */
private Node<T> right(Node<T> n) {
    if(n != null){
        Node<T> temp = n.getLeft();
        n.setLeft(temp.getRight());
        temp.setRight(n);
        return temp;
    }
    return n;
}

/**
 * Performs a left right rotation on a node
 * 
 * @param n The node to have the left right rotation performed on
 * @return The new root of the subtree that is now balanced due to the rotation
 */
private Node<T> leftRight(Node<T> n) {
    n.setLeft(left(n.getLeft()));
    Node<T> temp = right(n);
    return temp;
}

/**
 * Performs a right left rotation on a node
 * 
 * @param n The node to have the right left rotation performed on
 * @return The new root of the subtree that is now balanced due to the rotation
 */
private Node<T> rightLeft(Node<T> n) {
    n.setRight(right(n.getRight()));
    Node<T> temp = left(n);
    return temp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:05:46.370

AVL 树中的关键不变量是每个节点的*平衡因子*是 -1、0 或 +1。这里，“平衡因子”是左右子树之间的高度差。+1 表示左子树比右子树高 1，-1 表示左子树比右子树短 1，0 表示子树大小相同。此信息通常缓存在每个节点中。

当你得到一个平衡因子为 -2 或 +2 的节点时，你需要进行旋转。以下是需要轮换时的一种可能设置：

```
 u (-2)
         / \
        A   v (-1)
           / \
          B   C 
```

如果我们填充这些树的高度，我们会得到

```
 u h + 2
         / \
    h-1 A   v h + 1
           / \
      h-1 B   C h 
```

如果发生这种情况，进行一次右旋转会产生

```
 v h+1
        / \ 
     h u   C h
      / \
 h-1 A   B h-1 
```

嘿！树是平衡的。这棵树的镜像也可以通过一次左旋转来修复。

所有的 AVL 树旋转都可以简单地通过在一个小范围内列举可能的平衡因子来确定，然后确定在每个步骤中应该应用哪些旋转。我将把这个作为练习留给读者。:-) 如果您只想查找答案，[维基百科关于 AVL 树](http://en.wikipedia.org/wiki/AVL_tree#Insertion)的文章有一张很好的图片，总结了所有可能需要应用的旋转。

希望这可以帮助！

# c# - 如何在 Windows 窗体 c# 中覆盖关闭控件

> ID：14419182
> 
> 赞同：-4
> 
> 时间：2013-01-19T21:42:34.717
> 
> 标签：c#, forms, navigation

我想让 X 控件关闭窗口以隐藏当前显示的前一个表单。

在form1中我得到：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 form2 = new Form2();
    form2.Tag = this;
    form2.Show(this);
    Hide();
} 
```

然后当我单击 XI 时想显示上一个并隐藏当前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:22:22.057

您不应该`Form.OnFormClosing()`仅仅为此而覆盖。该`Form.FormClosing`事件为您提供此功能：

```
void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{
  // Prevent the user from closing this window, minimize instead.
  if (e.CloseReason == CloseReason.UserClosing)
  {
    this.WindowState = FormWindowState.Minimized;
    e.Cancel = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:48:10.110

您可以覆盖[OnFormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onformclosing.aspx)来执行此操作。

```
 protected override void OnFormClosing(FormClosingEventArgs e)
{
    if (e.CloseReason == CloseReason.WindowsShutDown) return;

    // DO WHATEVER HERE
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T21:52:08.380

您必须跟踪您的实例化表单。

```
// Program.cs

public static FormA Instance;

public static void Main()
{
    Instance = new FormA();
    Instance.Show();
} 
```

然后：

```
// FormB.cs

private void button1_Click(object sender, EventArgs e)
{
    Hide(); // Hide current...
    Program.Instance.Show(); // Show previous...
} 
```

# javascript - jsfiddle 说有一个错误，但它的工作原理？尝试创建一个cookie读取功能

> ID：14419186
> 
> 赞同：0
> 
> 时间：2013-01-19T21:43:07.870
> 
> 标签：javascript, function, cookies, jsfiddle, indexof

```
document.cookie = "happy=random stuff";
function readCookie(name) {
    var cookie,cname,i;
    cookie = document.cookie.split(";");
    cname = name;
    for (i=0; i<=cookie.length; i++) {
        var c = cookie[i];
        if (c.indexOf(cname) == 0) {
            alert(c.substring(cname.length,c.length));
            return c.substring(cname.length,c.length);
        }
    }
    return null;
}

readCookie("happy"); 
```

[http://jsfiddle.net/a2R3j/](http://jsfiddle.net/a2R3j/) 看来这一行是错误的：

```
if (c.indexOf(cname) == 0) { 
```

它完美地工作。但是 jsfiddle 说有一个错误。真的有什么不对吗？

为清楚起见编辑：我希望它通过调用函数 getCookie(name here) 来返回 cookie 的内容，为清楚起见进行另一个编辑：Yusaf 代码：![东西](../Images/83f3ed8514613c94829f5b2e567700d6.png)

带有 indexOf 的代码：![东西](../Images/c94bf0fdfb17e002791146b2992e0785.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:00:34.957

## [http://jsfiddle.net/6qLZe/](http://jsfiddle.net/6qLZe/)

使用`.split("=")[1]`而不是您的子字符串方法

```
document.cookie = "joker=batman";

function readCookie(cname) {
    var cookie_split = document.cookie.split(";");
    for (i = 0; i < cookie_split.length; i++) {
        var cookie_var = cookie_split[i].split("=")[0];
        if (cookie_var == cname) {
            return cookie_split[i].split("=")[1];
        }
    }
    return null
}

alert(readCookie("joker")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:01:53.600

您在 document.cookie 中有一个 cookie - 因此长度为 1，并且该 cookie 位于位置 0（js 从零开始）。

您的`for`循环高达`i <= cookie.length`，因此它迭代两次-首先是 for `cookie[0]`，然后是 for `cookie[1]`，因为`cookie[1]`不存在而失败。

`for`将循环更改为`for (i = 0; i < cookie.length; i++) {`

# php - 缺少语法错误），不知道将其放置在何处以回显输入

> ID：14419188
> 
> 赞同：0
> 
> 时间：2013-01-19T21:43:28.070
> 
> 标签：php, javascript

我想知道在下面的代码中显示文本输入的正确方法是什么，因为没有输出任何内容：

```
<script language="javascript" type="text/javascript">
  window.top.stopVideoUpload(
    <?php echo $result; ?>,
    '<?php echo "<input name='vidid' type='text' value='".$id."'/>" . $_FILES['fileVideo']['name']; ?>'
  );
</script> 
```

我收到的错误是：`syntaxError: missing ) after argument list.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:46:25.193

逃避你的报价

```
<script language="javascript" type="text/javascript">
  window.top.stopVideoUpload(
    <?php echo $result; ?>,
    '<?php echo "<input name=\'vidid\' type=\'text\' value=\'".$id."\'/>" . $_FILES['fileVideo']['name']; ?>'
  );
</script> 
```

取决于 $result 是什么 - 应该是一个数字或者它也必须被引用我们还需要知道 $_FILES 包含什么所以请发布你现在拥有的渲染视图源

转义应该使它看起来像

```
 window.top.stopVideoUpload(
    10,
    '<input name=\'vidid\' type=\'text\' value=\'someId'/> bla'
  ); 
```

这更容易阅读

```
 '<?php echo '<input name="vidid" type="text" value="'.$id.'" />' . $_FILES['fileVideo']['name']; ?>' 
```

这使

```
 window.top.stopVideoUpload(
    10,
    '<input name="vidid" type="text" value="someId"/> bla'
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:50:55.053

总是逃避你的输出：

```
window.top.stopVideoUpload(
    <?php echo json_encode($result); ?>,
    <?php echo json_encode("<input name='vidid' type='text' value='".$id."'/>" . $_FILES['fileVideo']['name']); ?>
); 
```

在这种情况下，您正在输出应该在 JavaScript 中使用的值，因此请使用它`json_encode()`来编写有效的 JavaScript 值。

# android - 将应用程序事件（logcat）保存在 sd 上的文件中

> ID：14419191
> 
> 赞同：1
> 
> 时间：2013-01-19T21:43:54.700
> 
> 标签：android, logcat

我想将我的应用程序 logcat 事件保存在 sd 卡上的文本文件中。我的令人震惊的应用程序在我和我朋友的设备上正常运行，但其他应用程序在我的应用程序上出现错误。例如，他们说应用程序中的警报时间错误，但我在我和我朋友的设备中没有看到这个错误。由于这个问题和其他问题，我想以原子方式保存与我的应用程序相关的所有事件 logcat。所以他们将日志文件发送给我以解决问题。我怎样才能做到这一点？谢谢对不起我的英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:53:52.893

您可以通过以下方式获取 logcat：

```
static final int BUFFER_SIZE = 1024;

public String getLogCat() {
    String[] logcatArgs = new String[] {"logcat", "-v", "time"};

    Process logcatProc = null;
    try {
        logcatProc = Runtime.getRuntime().exec(logcatArgs);
    }
    catch (IOException e) {
        return null;
    }

    BufferedReader reader = null;
    String response = null;
    try {
        String separator = System.getProperty("line.separator");
        StringBuilder sb = new StringBuilder();
        reader = new BufferedReader(new InputStreamReader(logcatProc.getInputStream()), BUFFER_SIZE);
        String line;
        while ((line = reader.readLine()) != null) {
            sb.append(line);
            sb.append(separator);
        }
        response = sb.toString();
    }
    catch (IOException e) {
    }
    finally {
        if (reader != null) {
            try {
                reader.close();
            }
            catch (IOException e) {}
        }
    }

    return response;
} 
```

然后，您可以将其保存`String`到 SD 卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:51:58.963

[ACRA](http://www.acra.ch/) Android 库已经实现了这种类型的功能。该库检测崩溃，并将崩溃信息发送到 Google Docs 电子表格或您自己的目的地。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T08:53:28.390

> 您可以通过以下方式获取 logcat：

```
static final int BUFFER_SIZE = 1024;

public String getLogCat() {
    String[] logcatArgs = new String[] {"logcat", "-v", "time"};

    Process logcatProc = null;
    try {
        logcatProc = Runtime.getRuntime().exec(logcatArgs);
    }
    catch (IOException e) {
        return null;
    }

    BufferedReader reader = null;
    String response = null;
    try {
        String separator = System.getProperty("line.separator");
        StringBuilder sb = new StringBuilder();
        reader = new BufferedReader(new InputStreamReader(logcatProc.getInputStream()), BUFFER_SIZE);
        String line;
        while ((line = reader.readLine()) != null) {
            sb.append(line);
            sb.append(separator);
        }
        response = sb.toString();
    }
    catch (IOException e) {
    }
    finally {
        if (reader != null) {
            try {
                reader.close();
            }
            catch (IOException e) {}
        }
    }

    return response;
} 
```

> 然后，您可以将其保存`String`到 SD 卡。

“Dororo”的这个答案对我不起作用，因为它总是因为很多行而陷入困境，但我不知道如何解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T05:53:40.803

除非您指定“-d”参数，否则 logcat 将阻止读取新日志。

尝试

```
 String[] logcatArgs = new String[] {"logcat", "-d", "-v", "time"}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-14T07:28:25.063

在线程内执行以避免 ANR

# mercurial - hg-git 可以从分叉的仓库中提取，但不能从原始仓库中提取

> ID：14419193
> 
> 赞同：0
> 
> 时间：2013-01-19T21:44:11.750
> 
> 标签：mercurial, github, tortoisehg, hg-git

我正在使用 TortoiseHg 和 hg-git Mercurial 插件来与 Github 交互，而不使用 Git，只使用 Hg。在 Github 上，我分叉了[pandas 存储库](https://github.com/pydata/pandas)。我成功地将我的叉子克隆到我的电脑上。我想将原始 pandas 存储库添加为 Hg 中的 URL，因此我可以从该存储库中提取更改并将它们与我自己所做的任何更改集成。我在 TortoiseHg 的 URL 中添加了原始的 pandas 存储库，名称为“upstream”。

但是，如果我尝试从原始上游 repo 中提取，Hg 会挂起很长时间，然后最终会发出“504 - 网关超时”错误。如果我直接克隆 pandas repo（而不是克隆我的 fork），我可以很好地从中提取。

奇怪的是，这似乎并非所有回购都发生。[我用matplotlib repo](https://github.com/matplotlib/matplotlib)做了同样的过程（fork，克隆 fork，然后尝试从原始库中提取），它似乎从原始 repo 中提取就好了。

更奇怪的是，如果我克隆原始 repo，然后将我的 fork 添加为额外的 URL，我可以从两者中提取。所以不知何故，在原始克隆期间设置的 URL 是可以的，但是手动将相同的 URL 设置为源是行不通的。

这似乎表明问题出在 pandas repo 上。这可能吗？Github 上是否有一些设置可能会影响我从该回购中提取的能力？我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T11:37:36.897

我`hg-git`通过命令行重复了这个过程，但无法复制问题。所以有几种可能：

1.  （您的）TortoiseHG（配置）存在问题。
2.  在将 URL 输入 TortoiseHG 时，您输入了某种类型的错字。
3.  中有一个奇怪的角落案例`hg-git`。
4.  某些事情在您的`hgrc`- 您的全局问题（隐藏在您的主目录中）或您的存储库特定的问题（在 中找到`.hg/hgrc`）。

如果您将`hgrc`文件作为 Github Gist 提供（根据需要匿名），这可能会提供一些见解。

同时，一种解决方案是手动执行 git 操作，然后强制更新：

```
cd path/to/hg/repo
git fetch https://github.com/pydata/pandas.git # equal to hg pull, 
hg gimport # pulls the changesets from the hidden git repo into the mercurial repo 
```

如果这有效，那么保存的 URL 可能有问题。

你仍然需要担心合并和变基等等，但你可以在 Mercurial 中做到这一点。当您推送到 git 远程时，隐藏的 git 存储库将自动出现，或者您可以强制它通过`hg gexport`.

# android - 拍照时如何播放设备特定的相机声音？

> ID：14419194
> 
> 赞同：3
> 
> 时间：2013-01-19T21:44:15.163
> 
> 标签：android, audio, camera, shutter

在 Android 上拍照很简单：

```
camera.takePicture(null, null, mPicture); 
```

我唯一担心的是没有声音或视觉指示。

在我的布局上创建视觉快门动画听起来很复杂，但我认为我可以处理它，但我真的很想播放原始的 Android 相机声音。

由于这种声音可能特定于不同的制造商，我只是想知道这是否是我们可以在应用程序中轻松重复使用的声音。

感谢您的帮助

编辑：

我找到了这个片段，但相信有更好的方法来实现它：

```
 // Play the Shutter Sound
        AudioManager meng = (AudioManager) FullscreenActivity.this.getSystemService(
                Context.AUDIO_SERVICE);
        int volume = meng.getStreamVolume(AudioManager.STREAM_NOTIFICATION);

        if (volume != 0) {
            if (_shootMP == null)
                _shootMP = MediaPlayer
                        .create(FullscreenActivity.this,
                                Uri.parse("file:///system/media/audio/ui/camera_click.ogg"));
            if (_shootMP != null)
                _shootMP.start();
        } 
```

资料来源：亚历克斯·科恩

# vb.net - 将枚举类型的值加载到组合框中

> ID：14419196
> 
> 赞同：17
> 
> 时间：2013-01-19T21:44:52.670
> 
> 标签：vb.net, combobox, enums

给定以下枚举：

```
Enum enumExample
  world
  oblivion
  holiday
End Enum 
```

我可以将其值添加到 ComboBox 项目列表中，如下所示：

```
combo.Items.Add(enumExample.holiday)
combo.Items.Add(enumExample.oblivion)
combo.Items.Add(enumExample.world) 
```

有没有更短的方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-19T21:48:44.350

您可以使用[`Enum.GetValues`](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)获取枚举值的列表，然后迭代结果：

```
For Each i In  [Enum].GetValues(GetType(EnumExample))
  combo.Items.Add(i)
Next 
```

或者，正如@Styxxy 提到的：

```
combo.Items.AddRange([Enum].GetValues(GetType(EnumExample))) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-07T17:19:50.873

为什么不直接使用：

```
Enum enumExample
  world
  oblivion
  holiday
End Enum

ComboBox1.DataSource = [Enum].GetValues(GetType(enumExample)) 
```

这是我用过的，它似乎奏效了。

# c++ - 如何从剪贴板中清除指定格式的数据？

> ID：14419197
> 
> 赞同：3
> 
> 时间：2013-01-19T21:44:56.040
> 
> 标签：c++, windows, winapi

我将一些数据放入剪贴板，从剪贴板复制数据后，我想清除数据而不清除整个剪贴板。

像这样的东西：

```
wchar_t* buf=NULL;
if( OpenClipboard(NULL)!=0)
{
HANDLE hData = GetClipboardData( CF_UNICODETEXT );
buf = (wchar_t*)GlobalLock( hData );
GlobalUnlock( hData );
CloseClipboard();
return buf;
} 

//job is done, and now I want to clear only hData! 
```

据我了解， EmptyClipboard() 将清空所有内容！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T01:33:05.080

剪贴板一次只能保存一个`IDataObject`；此数据对象可以呈现多种数据格式，但它只是一个 COM 对象。做你想做的唯一方法是复制现有的数据对象（减去你想要删除的格式）并将其设置到剪贴板来代替原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:28:26.630

我想知道你为什么要这样做。我不是 Windows 编程方面的专家，但无论如何我都会尝试回答，因为在我看来，这个问题已经被“孤立”了，我可能会提供一些见解（希望我没有大错特错）。

据我了解，剪贴板旨在保存*一个*实体的几种*替代*表示形式（以不同的格式） 。

 *仅删除*一种*此类表示的用例是什么？我想说的是，要么删除所有表示（通过`EmptyClipboard()`），要么不删除。

可能您认为剪贴板旨在保存*多个不同类型的实体*，这就是您正在寻找选择性删除的原因。恐怕这是一种误解，并不能反映剪贴板的真正用途。*

# android - xml文件与xml布局

> ID：14419198
> 
> 赞同：2
> 
> 时间：2013-01-19T21:44:59.850
> 
> 标签：android, android-layout

我创建了两个布局文件。

创建此 xml 的 Android XML 布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

和一个 Android XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

从外观上看，两者是一样的。什么时候使用一个而不是另一个，因为它们都在创建相同的 xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:42:33.697

是的，它们在程序上是相同的，没有不同类型的xml。重要的是 xml 的位置（布局、值、...）。

在 Eclipse 中，IDE 视图可能存在细微差别，如果您创建 Android XML 文件而不是布局文件，我不确定您是否拥有图形布局视图（这是一个细节，因为您仍然可以添加此视图;) )

但结果 apk 将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T00:45:23.530

您使用 Android XML 的原因是您想使用布局工具（GUI 布局编辑器）。Eclipse IDE 将对这个文件做出不同的反应。

但是，代码是相同的，因此您创建的 APK 也将是相同的 - 在您的最终输出中并不重要。

我总是使用 Android XML 文件，因此它们可以更好地集成到 ADT 工具中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T11:25:01.443

据我所知，唯一的区别是在 xml 中你不能同时使用 "android:layout-width:" 和 "android:layout-height:" 属性，这使得 xml 例如适合使用菜单和项目酒吧和其他用途。

# css - font-family 在 Firefox 中不起作用，但在所有其他浏览器中都起作用？

> ID：14419200
> 
> 赞同：2
> 
> 时间：2013-01-19T21:45:23.037
> 
> 标签：css, font-family

我正在使用：body { font-family:"Franklin Gothic Demi"; }

它在 Chrome、Safari 和 Internet Explorer 中正确显示字体，但在 Firefox 中显示 Times New Roman。我错过了什么吗？我以为 Franklin Gothic Demi 是内置的网络字体...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:48:37.817

尝试清除 Firefox 中的缓存。

还可以考虑嵌入字体，使其在所有浏览器和客户端之间更加兼容。[http://www.google.com/webfonts](http://www.google.com/webfonts)

有些人讨论了这个确切的问题。 [http://forums.madcapsoftware.com/viewtopic.php?f=9&t=15267](http://forums.madcapsoftware.com/viewtopic.php?f=9&t=15267)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T07:37:28.630

如果您使用的是基于 Mac 或 Linux 的操作系统，您可以按照以下步骤操作：

1) 转到[https://fonts.google.com/](https://fonts.google.com/)
2)**下载**您选择的字体。
3) 转到您的**HOME**目录。
4) 转到**.fonts**文件夹（创建一个，如果之前没有创建！）
5) 从下载的 zip 文件夹 (fonts.zip) 中提取 .ttf 文件到 .fonts 文件夹中。
6）使用适当的CSS命令和字体的家族名称，它应该可以工作。

提示：Google 字体还为您提供了您要使用的字体系列的适当 CSS 代码行！

# c++ - 字符串和成员函数指针的 C++ 映射

> ID：14419202
> 
> 赞同：5
> 
> 时间：2013-01-19T21:46:14.193
> 
> 标签：c++, map, member-function-pointers

嘿，所以我正在制作一个以字符串为键、成员函数指针为值的映射。我似乎无法弄清楚如何添加到地图，这似乎不起作用。

```
#include <iostream>
#include <map>
using namespace std;

typedef string(Test::*myFunc)(string);
typedef map<string, myFunc> MyMap;

class Test
{
private:
    MyMap myMap;

public:
    Test(void);
    string TestFunc(string input);
};

#include "Test.h"

Test::Test(void)
{
    myMap.insert("test", &TestFunc);
    myMap["test"] = &TestFunc;
}

string Test::TestFunc(string input)
{
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T21:53:37.527

见[`std::map::insert`](http://en.cppreference.com/w/cpp/container/map/insert)和[`std::map`](http://en.cppreference.com/w/cpp/container/map)为`value_type`

```
myMap.insert(std::map<std::string, myFunc>::value_type("test", &Test::TestFunc)); 
```

并且对于`operator[]`

```
myMap["test"] = &Test::TestFunc; 
```

您不能在没有对象的情况下使用指向成员函数的指针。您可以将指向成员函数的指针与类型的对象一起使用`Test`

```
Test t;
myFunc f = myMap["test"];
std::string s = (t.*f)("Hello, world!"); 
```

或带有指向类型的指针`Test`

```
Test *p = new Test();
myFunc f = myMap["test"];
std::string s = (p->*f)("Hello, world!"); 
```

另请参阅[C++ FAQ - 指向成员函数的指针](https://isocpp.org/wiki/faq/pointers-to-members)

# php - 如何从 PHP 向 Windows CMD 发送命令及其参数？

> ID：14419205
> 
> 赞同：0
> 
> 时间：2013-01-19T21:46:30.063
> 
> 标签：php, windows, ftp, cmd

我正在使用 system() 函数从 PHP 发送 CMD 命令。单行命令可以正常工作，但我不知道如何从 PHP 传递其他命令参数。

例如：`cd`等`time`工作正常。但是`ftp ftp.myserver.com`来自 CMD 的命令需要用户名密码才能从 CMD 连接 FTP。如何将用户名和密码从 PHP 脚本传递到 CMD？页面只是不断加载。可能是在等待用户名输入。我怎样才能做到这一点？

如何使用 system() 或 PHP 中的其他类似函数发送用户名和密码？

我需要连接到 FTP 并从 PHP 执行 CMD FTP 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:19:52.600

改用：

```
ftp_connect($url);
ftp_login($user, $pass); 
```

然后按照[这个参考](http://www.php.net/manual/en/book.ftp.php)做任何你想做的事情。

# python - :-1 在 python 中是什么意思？

> ID：14419206
> 
> 赞同：23
> 
> 时间：2013-01-19T21:46:34.103
> 
> 标签：python, syntax

> **可能的重复：**
> [Python 切片表示法](https://stackoverflow.com/questions/509211/the-python-slice-notation)

我正在尝试将一些 Python 代码移植到 C，但我遇到了这一行，但我无法弄清楚它的含义：

```
if message.startswith('<stream:stream'):
    message = message[:-1] + ' />' 
```

我知道如果 '`message`以 then 开头，`<stream:stream`则需要附加一些内容。但是我似乎无法弄清楚它应该附加在哪里。我完全不知道是什么`:-1`指示。我做了几次谷歌搜索，没有结果。

有人能解释一下这是做什么的吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-19T21:48:04.743

它是列表索引，它返回`[:]`除最后一个之外的所有元素`-1`。类似的问题[在这里](https://stackoverflow.com/questions/509211/the-python-slice-notation)

例如，

```
>>> a = [1,2,3,4,5,6]
>>> a[:-1]
[1, 2, 3, 4, 5] 
```

它像这样工作

`a[start:end]`

```
>>> a[1:2]
[2] 
```

`a[start:]`

```
>>> a[1:]
[2, 3, 4, 5, 6] 
```

`a[:end]`
你的情况

```
>>> a = [1,2,3,4,5,6]
>>> a[:-1]
[1, 2, 3, 4, 5] 
```

`a[:]`

```
>>> a[:]
[1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T21:49:57.637

它被称为切片，它返回`message`除最后一个元素之外的所有内容。

理解这一点的最佳方法是举例：

```
In [1]: [1, 2, 3, 4][:-1]
Out[1]: [1, 2, 3]
In [2]: "Hello"[:-1]
Out[2]: "Hell" 
```

您可以随时替换`-1`为任何数字：

```
In [4]: "Hello World"[:2] # Indexes starting from 0
Out[4]: "He" 
```

不包括最后一个索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T21:47:57.607

它被称为`slicing`

“返回一个切片对象，表示由 range(start, stop, step) 指定的索引集。”
- 从这个链接：[http ://docs.python.org/2/library/functions.html#slice](http://docs.python.org/2/library/functions.html#slice)

您会注意到它类似于范围参数，并且该`:`部分返回整个可迭代对象，因此`-1`除了最后一个索引之外的所有内容。

以下是切片的一些基本功能：

```
>>> s = 'Hello, World'
>>> s[:-1]
'Hello, Worl'
>>> s[:]
'Hello, World'
>>> s[1:]
'ello, World'
>>> s[5]
','
>>> 
```

遵循这些论点：

```
a[start:stop:step] 
```

或者

```
a[start:stop, i] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T21:48:07.580

它返回`message`没有最后一个元素。如果`message`是字符串，则`message[:-1]`删除最后一个字符。

请参阅[教程](http://docs.python.org/2/tutorial/introduction.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T21:58:13.100

直接回答您的情况：

```
if message.startswith('<stream:stream'): message = message[:-1] + ' />' 
```

这基本上检查是否`message`以 开头`<stream:stream`，如果是这种情况，它将删除最后一个字符并添加 a `' />'`。

因此，由于您的消息是一个 XML 字符串，它将使元素成为一个空元素，并自行关闭。

# scala - Scala 的 SBT 中的默认日志文件在哪里？

> ID：14419221
> 
> 赞同：12
> 
> 时间：2013-01-19T21:48:15.070
> 
> 标签：scala, sbt

[SBT 文档](http://www.scala-sbt.org/release/docs/Howto/logging.html)说“运行命令时，将更详细的日志记录输出发送到文件而不是屏幕（默认情况下）。......”

日志文件在哪里？

如果我在我的程序中使用了日志功能，程序完成后我在哪里可以找到这些日志？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T23:00:50.707

如果您只是尝试使用兼容 SLF4J 的记录器（如您评论中的链接所建议的那样）记录到文件，我建议您使用 Logback 进行记录，如此[处](http://blog.knoldus.com/2012/03/23/quickknol-integrating-logback-with-scala/)所述。

配置起来相当简单（对于简单的用例），包括将日志输出发送到哪里。链接到的教程只配置了一个控制台追加器，即将记录的输出发送到控制台。您可以像这样（在您的 ）中配置[`FileAppender`](http://logback.qos.ch/manual/appenders.html#FileAppender)（即发送日志输出到文件`logback.xml`）：

```
<appender name="FILE" class="ch.qos.logback.core.FileAppender">
   <file>testFile.log</file>
   <append>true</append>
   <encoder>
     <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
   </encoder>
 </appender> 
```

然后`<appender-ref ref="STDOUT" />`从教程更改为`<appender-ref ref="FILE" />`. 你真的应该看一下 logback / SLF4J 文档，以便在需要时弄清楚如何设置更复杂的日志记录配置，但这应该可以帮助你入门。

设置完所有内容（即添加 logback 作为依赖项并在 中`build.sbt`创建`logback.xml`配置`src/main/resources`）后，您可以像这样调用记录器：

```
import org.slf4j.LoggerFactory
import ch.qos.logback.core.util.StatusPrinter
import ch.qos.logback.classic.LoggerContext

object LogTester extends App{
  def logger = LoggerFactory.getLogger("KDURLFilter")
  StatusPrinter.print((LoggerFactory.getILoggerFactory).asInstanceOf[LoggerContext])
  logger.info("vikas")
} 
```

* * *

# 例子

我创建[了一个示例 SBT 项目](https://github.com/x3ro/scala-sbt-logback-example) ，您可以在其中看到正在运行的 logback 配置。

# python - 从 gi.repository 导入 Gtk 对象

> ID：14419223
> 
> 赞同：0
> 
> 时间：2013-01-19T21:48:22.557
> 
> 标签：python, import, introspection, gtk3

回到我的 GTK2 时代，我可以做一个

```
from gtk import Clipboard 
```

从我的程序中访问剪贴板。

现在，我们必须内省地导入对象，如下所示：

```
from gi.repository import Gtk 
```

我一直在挠头，看看是否有办法从 Gtk 导入一个对象，例如：

```
from gi.repository import Gtk.Clipboard 
```

当然这会导致 SyntaxError 异常。

有没有办法做我想做的事？我现在想要这个的一个原因是，我需要一种非常轻松的方式来访问脚本的剪贴板。我不想导入所有的 Gtk，因为它太过分了/矫枉过正。我只想要 Clipboard 类，但我对 gi.repository 中的其他项目（如 Notify）很好奇。

谢谢，

纳尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:22:35.170

非常简单地。

```
from gi.repository.Gtk import Clipboard 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:40:41.767

你不能只导入一个对象：你可以导入一个模块（Gtk）并在当前命名空间中添加一个名称（Clipboard），即这些应该是等价的：

```
from gi.repository.Gtk import Clipboard 
```

和

```
from gi.repository import Gtk
Clipboard = Gtk.Clipboard 
```

# node.js - 使用 Node 和 Redis 获取 10 个随机项目

> ID：14419225
> 
> 赞同：1
> 
> 时间：2013-01-19T21:48:22.903
> 
> 标签：node.js, mongodb, redis

我正在尝试找出如何最好地从 Mongo 集合中获取一组 10 个随机项目。我的计划是在 Redis 中存储一组 Mongo ID，使用 Redis SRANDMEMBER 命令获取 10 个随机 ID，然后从 Mongo 集合中获取它们。

由于我使用的是 Node，我无法使用 SRANDMEMBER 10，因为节点“redis”包不接受可选的第二个参数。

我真正绊倒的地方是如何以异步友好的方式做到这一点。我曾尝试使用节点异步库提供的几个工具，例如 Waterfall 和 While，但 Redis 调用总是晚于数据。

* * *

编辑#2：

为了响应下面的帮助，我将我的功能改进如下：

```
client.send_command("SRANDMEMBER", ["album_id_set", "10"], function(err, results) {
    if (err) console.log('Redis error: ' + err);
    Album.find({
        '_id' : { $in: results }
    }, function(err, result){
        if (err) console.log('Mongo error: ' + err);
        response.json(result);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:02:16.343

使用`redis`or`node-redis`包的解决方案是发送原始命令。
我已经测试了这两个软件包并且都为我工作。

## 使用 node-redis 包

[https://github.com/tim-smart/node-redis](https://github.com/tim-smart/node-redis)

`node-redis`返回一个缓冲区对象数组。

```
client.sendCommand('SRANDMEMBER', ['album_id_set', '10'], function(err, reply) {
    for (var i = 0; i < reply.length; i++) {
        console.log(reply[i].toString());
    };
}); 
```

## 使用 redis 包

[https://github.com/mranney/node_redis](https://github.com/mranney/node_redis)

`redis`返回一个字符串数组。

```
client.send_command('SRANDMEMBER', ['album_id_set', '10'], console.log); 
```

有关详细信息，请参阅[send_command](https://github.com/mranney/node_redis#clientsend_commandcommand_name-args-callback)文档。

# qt - 包含敏感内容的 QTemporaryFile（无物理文件）

> ID：14419227
> 
> 赞同：1
> 
> 时间：2013-01-19T21:48:42.043
> 
> 标签：qt, temporary-files

我想`diff`在两个有点敏感（不是*很*关键）的字符串上调用一个外部进程（）。这就是为什么我不想将它们作为未加密的文件存储在光盘上。但是，`diff`只接受文件名（嗯，两个文件之一可以是标准输入，但这对我没有帮助）。

所以我有了将数据写入 a 的想法，`QTemporaryFile`当超出范围时会自动删除文件。根据平台和配置，a`QTemporaryFile`将仅存储在 RAM 中。但是，由于不能保证这一点，我想通过在删除前将内容归零来*安全地删除文件。*我不需要在`diff`运行时隐藏其他进程的文件（我不是那么迂腐），但我不希望任何进程能够在*之后*读取文件。

我的想法是正确的方法吗？你知道`diff`不使用文件的另一种调用方式吗？

也许有一种可移植的方式来通过命名管道？（我只知道`mkfifo`在 UNIXoid 系统上）。也许 Qt 甚至对此有一些解决方案？谷歌搜索时，我只发现`QLocalSocket`哪个似乎不是正确的选择。

我需要可移植的解决方案，特别是我想支持 Linux 和 Windows 7；请在向我指出一些本机解决方案时考虑这一点。

# sqlite - 试图让 tkinter 应用程序将数据保存到 SQLite3 数据库中

> ID：14419230
> 
> 赞同：1
> 
> 时间：2013-01-19T21:49:02.413
> 
> 标签：sqlite, tkinter, python-3.3

我正在编写一个小程序来简单地将文本数据和整数数据保存到`SQLite3`数据库中。

我创建了`test.db`使用以下代码调用的数据库：

```
con = sqlite3.connect('test.db')
cur = con.cursor()
cur.execute('drop table if exists data')
cur.execute('create table data(t1 TEXT, i1 INT)')
con.commit()
print('DB created') 
```

问题是当我运行它时它告诉我该`cur.execute`行需要字符串作为参数，但我已经定义`text1`为带有`StringVar`.

```
from tkinter import *
from tkinter import ttk
import sqlite3

def savedata(text1, int1):
    con = sqlite3.connect('test.db')
    cur = con.cursor()
    cur.execute(('INSERT INTO data (t1, i1) VALUES (?,?)', (text1, int1)))
    con.commit()
    print('record inserted in data')

root = Tk()
root.title("Little Program To Save Data")

mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column = 0, row = 0, sticky = (N,W,E,S))
mainframe.columnconfigure(0, weight = 1)
mainframe.rowconfigure(0, weight = 1)

text1 = StringVar()
text_entry = ttk.Entry(mainframe, width = 20, textvariable=text1)
text_entry.grid(column = 2, row = 1, sticky = (N,W,E,S))

int1 = IntVar()
int_entry = ttk.Entry(mainframe, width = 20, textvariable=int1)
int_entry.grid(column = 2, row = 2, sticky = (N,W,E,S))

ttk.Button(mainframe, text = "Save!", command=savedata(text1, int1)).grid(column = 3, row = 3, sticky = (W, E))

for child in mainframe.winfo_children(): 
    child.grid_configure(padx = 5, pady = 5)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:19:39.770

该代码不起作用，因为`StringVar`它们`IntVar`不是典型的 Python 对象`str`，`int`它们实际上代表 Tcl 变量，您可能碰巧将这些变量设置为包含可以分类为字符串或整数的值。

您需要做的第一件事是更改`savedata(text1, int1)`为，`savedata(text1.get(), int1.get())`以便您实际获取存储在其中的值。其次，您`command`在小部件中定义参数值的方式`Button`是错误的，因为您正在执行它，而不是在实际单击按钮时传递要执行的函数。这是通过将该部分更改为 来解决的`command = lambda: savedata(...)`。第三，你在打电话

```
cur.execute(('INSERT INTO data (t1, i1) VALUES (?,?)', (text1, int1))) 
```

但这肯定会失败，因为您将元组传递给`execute`，您真正想要的是：

```
cur.execute('INSERT INTO data (t1, i1) VALUES (?,?)', (text1, int1)) 
```

现在你的代码可以工作了，但是这里不需要使用 Tcl 变量。

# c++ - c ++链接第3方标头和源

> ID：14419231
> 
> 赞同：3
> 
> 时间：2013-01-19T21:49:04.317
> 
> 标签：c++, visual-studio-2010, tinyxml

我正在尝试将[TinyXML 版本 2](https://github.com/leethomason/tinyxml2)集成到一个项目中，但是因为 TinyXML 非常小（哈哈！）它没有被打包到静态或动态库中。只提供了标题和来源。我收到链接器错误，因为编译器找不到与标头链接的源文件（它们位于同一位置）。

有没有办法将第 3 方源链接到项目中而无需将其复制到本地项目空间中？

或者

我是否应该手动创建一个库文件（包含单个源文件）并使用它来解决问题（即使源不更改是打包它的一个很好的理由，对于一个文件来说似乎有点过分了）？

[见标签]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:58:13.090

由于您不希望它出现在本地项目空间中，因此您似乎将其视为一个库，至少在概念上是这样。

构建库文件一次，再也不用担心它。

库中源文件的数量与您无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:59:38.430

包括`tinyxml2.cpp`而不是`tinyxml2.h`. 或者您可以构建`.lib`文件、包含`.h`文件并告诉链接器使用您的`.lib`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:00:45.603

或者，通过简单地将 .cpp 文件包含在单个翻译单元中来构建临时静态库。这可能会被一些人反对，但它是一个简单的解决方案，也有它的优点。

# if-statement - 如果用问号表示。用正常的 if else 指令翻译成什么

> ID：14419234
> 
> 赞同：0
> 
> 时间：2013-01-19T21:49:12.583
> 
> 标签：if-statement, logic

我有这个表达式，我知道它是一个 if 语句……但它翻译成什么？标志=标志？0：1；是吗： if (flag==flag) flag=0 else flag =1 如果是这种情况，那么当计时器达到 12500 时，flag 将变为 1，但它永远不会再次变为 0。正确的？

```
int flag = 0; 
while(1)
  {
     if (timer == 12500)
       {
          flag = flag?0:1;
          timer=0;
       }

     if(flag == 1)

      p4_0=0; //turn on LED0

    else

      p4_0=1; //turn off LED0

    timer++;
   } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:51:37.060

这是一个三元表达式

变量 = 变量？表达式1：表达式2

表示如果 var 为真，则将 expression1 分配给 var，否则将 expression2 分配给 var。基本上这个。

```
if (var)
    var = expression1
else
    var = expression2 
```

所以在上面的代码中，当计时器 == 12500 时，标志将被重置并关闭 LED0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:04:15.150

(flag = flag?0:1) 表示 if(flag) then flag=0 否则 flag=1。更准确地说，如果 flag 的值为 0 那么 flag 将变为 1 否则对于所有非零值 flag 将变为 0。它在您的代码中的用途是，一旦计时器达到 12500，标志将变为 1，LED 将打开，此后将保持打开状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T21:52:32.703

标志=标志？0：1；表示如果 flag 为 0 则为零，如果 flag >0 则 flag 变为 1。

# jquery - jQuery在一组选择器中搜索特定元素，如果没有找到，添加它

> ID：14419235
> 
> 赞同：1
> 
> 时间：2013-01-19T21:49:19.410
> 
> 标签：jquery, loops

我需要在一组“容器”div 中搜索类“a2”。如果找到了，什么也不做；如果缺少，请添加它。

原始代码：

```
<div class="container">
  <div class="a1">
    <span class="Label">Status:</span>
    <span class="Text">Active</span>
  </div>
  <div class="a2">
    <span class="Label">Description:</span>
    <span class="Text">2</span>
  </div>   
</div>

</br>
</br>

<div class="container">
  <div class="a1">
    <span class="Label">Status:</span>
    <span class="Text">Active</span>
  </div>
</div>

</br>
</br>

<div class="container">
  <div class="a1">
    <span class="Label">Status:</span>
    <span class="Text">Active</span>
  </div>  
</div> 
```

这是我的脚本：

```
$('div.container').each(function(){
   if($(this).children('.a2').length == 0){  
      $('<div class="a2"><span class="Label">Description:</span><span  class="Text">0</span></div>').insertAfter('div.a1');    
      return false; 
   }      
}); 
```

在此处查看[演示](http://jsfiddle.net/g9G85/78/)。

问题是脚本在不需要的第一个“容器”中插入了“a2”div。有人可以帮我弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:50:47.413

```
.insertAfter('div.a1'); 
```

在每个元素之后插入`div.a1`元素。您想要的是将其附加到当前`div.container`：

```
.appendTo(this); 
```

还有，不要`return false`。它将停止整个循环。`if`已经看守是否添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:52:23.633

```
$('div.container').filter(function(){
     return $('.a2', this).length === 0;
}).append('<div class="a2"><span class="Label">Description:</span><span class="Text">0</span></div>'); 
```

或者：

```
$('div.container').not(":has('div.a2')")
                  .append('<div class="a2"><span class="Label">Description:</span><span class="Text">0</span></div>'); 
```

[http://jsfiddle.net/xGACz/](http://jsfiddle.net/xGACz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:07:43.233

您可以使用该`not`方法和`:has`选择器来过滤容器，以便您只拥有那些没有`a2`元素的容器：

```
$('div.container').not(':has(> .a2)').append(
  $('<div class="a2"><span class="Label">Description:</span><span  class="Text">0</span></div>')
); 
```

# c - 为什么这会用浮点数返回正确的值而不是双精度值？

> ID：14419236
> 
> 赞同：0
> 
> 时间：2013-01-19T20:22:53.337
> 
> 标签：c, types

```
float Raise2power(double base, int exponent){
    if(exponent==0){
        return 1;
    }
    else {
        while (--exponent){
            base*=base;
        }
        return base;
    }
} 
```

我将返回类型更改为float，这段代码可以工作，但是在返回垃圾之前它是双倍的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:14:30.150

问题一定出在您没有向我们展示的某些代码中。

首先，这不是幂函数。你反复*平方* `base`。

当我将您的功能合并到一个小的完整程序中时：

```
#include <stdio.h>

float Raise2power(double base, int exponent){
   if(exponent==0){
       return 1;
   }
   else {
        while (--exponent){
           base*=base;
        }
        return base;
   }
}

int main(void) {
    int i;
    for (i = 0; i <= 5; i ++) {
        printf("Raise2power(10.0, %d) = %.1f\n", i, Raise2power(10.0, i));
    }
    return 0;
} 
```

我得到这个输出：

```
Raise2power(10.0, 0) = 1.0
Raise2power(10.0, 1) = 10.0
Raise2power(10.0, 2) = 100.0
Raise2power(10.0, 3) = 10000.0
Raise2power(10.0, 4) = 100000000.0
Raise2power(10.0, 5) = 10000000272564224.0 
```

当我更改`float Raise2power`为 时`double Raise2power`，我得到以下输出：

```
Raise2power(10.0, 0) = 1.0
Raise2power(10.0, 1) = 10.0
Raise2power(10.0, 2) = 100.0
Raise2power(10.0, 3) = 10000.0
Raise2power(10.0, 4) = 100000000.0
Raise2power(10.0, 5) = 10000000000000000.0 
```

向我们展示一个完整的程序及其输出。

**更新：**在评论中，你说你已经修复了这个错误并且它现在正在工作。我怀疑这两件事是无关的；您向我们展示的代码中的任何内容都不应该产生垃圾值——除非您在其他地方做错了什么。

我最好的猜测是您已将函数*定义*为`float`在一个地方返回，但将其*声明*为返回`double`在另一个地方返回，反之亦然。编译器在看到调用时会假设结果是一种类型，而实际上它是另一种类型。

要么是这样，要么你在没有可见声明的情况下调用了该函数。对于 C99 之前的编译器（例如 Microsoft 的），编译器将假定返回类型为`int`，这又会产生垃圾。但是你应该得到垃圾 for`float`或 for `double`。

避免这种问题的方法是在头文件中*声明*函数，并且`#include`在`.c`定义函数的文件（以便编译器可以检查一致性）和包含对该函数的调用的任何源文件中都声明该头文件.

但同样，这只是猜测，因为您从未向我们提供足够的信息来诊断问题。

推荐阅读：[http ://sscce.org/](http://sscce.org/)

# python - pymongo 使用字符串而不是字典进行查询

> ID：14419241
> 
> 赞同：2
> 
> 时间：2013-01-19T21:49:51.193
> 
> 标签：python, mongodb, pymongo

pymongo 有没有办法使用字符串而不是字典来执行查询？我希望能够使用与 python/pymongo 的 MongoDB shell 完全相同的语法。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:47:24.237

The [`eval()`](http://api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.eval) function might be what you're looking for. Note that it executes the JS code on the db server -- NOT in a Mongo shell on some client. Therefore it comes with lots of warnings, and I would strongly advise against using it in a serious production situation. See the [Mongo db.eval docs](http://docs.mongodb.org/manual/reference/method/db.eval/#db.eval) for details and examples.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:00:18.767

MongoDB shell 是功能齐全的 javascript 控制台/解释器，带有一些与 mongodb 服务器的消息绑定。相比之下，PyMongo 缺少嵌入式 javascript 解释器甚至 javascript 解析器，因此您无法按原样执行 MongoDB shell 查询。

请注意，mongo shell 查询不是 json 文档，因为它们能够包含一些函数和一些对象构造函数，例如`{value: 2+2}`.

# abstract-syntax-tree - xtext：AST、元模型和解析树之间的关系

> ID：14419244
> 
> 赞同：3
> 
> 时间：2013-01-19T21:50:00.673
> 
> 标签：abstract-syntax-tree, xtext, metamodel

有人可以解释一下解析树、AST 和元模型之间的关系吗？到目前为止，我知道 xtext 从语法中派生出 EMF Ecore 元模型并使用 antlr 生成解析器。但是它将如何被解析：输入首先通过词法分析器，然后解析器从解析器规则中创建一个解析树，对吗？在解析树之外，Xtext 还创建了一个 AST？为了什么？在这种情况下，元模型有什么目的？我对所有的定义有点困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T20:48:05.457

您对三步解析过程是正确的：首先词法分析器从输入流开始，然后创建基于 Antlr 的解析树，最后 Xtext 从解析树生成基于 EMF 的 AST。前两个步骤对于每个解析器（生成器）来说都是很自然的，第三步需要一些解释。我将开始有点冗长的解释，然后我将简要介绍元模型和 EMF。

首先，生成的解析器不支持标识符解析（处理变量或函数调用所需），这些函数需要手动添加，因此几乎所有语言都需要手动编码后处理步骤，需要扩展已经存在的解析树。

其次，EMF 为其模型提供了一个很好的、类型安全的 API，以及一个强大的反射 API，它允许创建非常通用但有用的组件，从而简化模型的处理（例如代码生成器，如[Acceleo](http://eclipse.org/acceleo/)或一个方面[Xtend](http://www.eclipse.org/xtend/)的模型转换工具，如[ATL](http://www.eclipse.org/atl/)、[ETL](http://eclipse.org/epsilon/)、[VIATRA2](http://eclipse.org/viatra2)）。我无法准确说出 Antlr 的解析树 API 和 EMF 之间的区别，但我使用了 LPG 解析器生成器的 API，并且在我看来，EMF 更易于使用。

更好的是，使用 EMF 允许将丰富的 Xtext 功能与其他基于 EMF 的编辑器（例如基于 GMF 的图形编辑器）一起重用。有关基本思想，请参阅较早的 EclipseCon 演示：[TMF 与 GMF - 结合文本和图形建模](http://www.fosslc.org/drupal/content/tmf-meets-gmf-combining-graphical-and-textual-modeling)。

一般来说，如果我们需要使用解析信息来扩展我们的解析树，那么通过重用已经使用的范例可以简化我们的语言与其他工具的集成。

EMF 依赖于元建模的概念：我们必须定义模型中可用的元素集，以及附加约束，例如有关连接的信息。这个概念类似于 XML 的模式定义（例如 DTD 或 SML 模式）——我们有一个统一的方式来描述模型。Xtext 以多种方式与 EMF 协同工作：

*   首先，根据语法，它生成并注册一个 EMF 元模型，可以在每个基于 EMF 的工具中使用。
*   然后解析过程的最终结果是一个 EMF 模型，可以使用 EMF API 读取和修改 - 更改被序列化回文本形式。

我希望，答案足够清楚。如果需要，请随时要求更多说明。

# asp.net-mvc - 如何在 asp.net MVC 视图中显示 SmtpClient.SendAsync() 的实际结果？

> ID：14419245
> 
> 赞同：-2
> 
> 时间：2013-01-19T21:50:02.623
> 
> 标签：asp.net-mvc, razor, callback, smtpclient, sendasync

SmtpClient.SendAsync() 调用不会像 SmtpClient.Send() 那样返回结果，但会继续并且无法在视图中显示结果。那么如何在这里挂钩回调函数，获取发送电子邮件结果/错误并将其显示在视图中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:18:27.723

你有两个选择：

`SmtpClient.Send()`a)改为打电话。

b)`SmtpClient.SendAsync()`从异步控制器调用它：

```
public class HomeController : AsynController
{
    [HttpPost]
    public void IndexAsync()
    {
        SmtpClient client = new SmtpClient();

        client.SendCompleted += (s,e) =>
        {
            AsyncManager.Parameters["exception"] = e.Error;
            AsyncManager.OutstandingOperations.Decrement();
        };

        AsyncManager.OutstandingOperations.Increment();

        client.Send(GetMessage());
    }

    public void IndexCompleted(Exception exception)
    {
        if (exception != null)
        {
            ModelState.AddError("", "Email send failed");
            return View();
        }
        else
        {
            return Redirect("Complete");
        }
    }
} 
```

# python - AppEngine NDB PolyModel 获取属性

> ID：14419247
> 
> 赞同：0
> 
> 时间：2013-01-19T21:50:28.240
> 
> 标签：python, app-engine-ndb, polymodel

我在使用 appengine 时遇到问题，我似乎无法弄清楚：

```
from google.appengine.ext import ndb
from google.appengine.ext.ndb import polymodel

class Item(polymodel.PolyModel):
      name = ndb.StringProperty()
      type = ndb.StringProperty(choices=["Medical","Food"])
      sub_category_type = ndb.StringProperty()
      sub_category_sub_type = ndb.StringProperty()

class MedicalItem(Item):
      med_sub_type = ndb.StringProperty()
      can_split_item = ndb.BooleanProperty()

class ItemInHouse(ndb.Model):
      item = ndb.StructuredProperty(Item)
      amount_of_item = ndb.FloatProperty() 
```

因此，使用上面的类，当我查询所有 ItemInHouse，然后我尝试访问那些具有 MedicalItem 的 iteminhouse 时，我无法获得 med_sub_type。那是：

```
itms = ItemInHouse.query(ItemInHouse.item.type == "Medical").fetch()
for itm in itms:
    self.response.out.write(itm.item.med_sub_type) 
```

在 itm.item.med_sub_type 处引发错误。我什至尝试过：`itm.item._values["med_sub_type"].b_val`但这仍然会引发 AttributeError：'Item' 对象没有属性 'med_sub_type'。我确实在`class_`它拥有的属性`Item`和`MedicalItem`属性中看到了，但我无法访问它。有任何想法吗？

谢谢乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:51:46.200

我担心您尝试做的事情可能是不可能的——我认为我没有预料到将 PolyModel 实例存储为 StructuredProperty 值。这能解释你所看到的吗？您可能想在 NDB 项目跟踪器上提交功能请求，但我不能保证它会被实施。

# c# - 找不到绑定源

> ID：14419248
> 
> 赞同：26
> 
> 时间：2013-01-19T21:50:42.197
> 
> 标签：c#, wpf, binding

当我添加一个新选项卡然后将其删除时，我的应用程序会抛出此错误消息：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.TabControl', AncestorLevel='1''. BindingExpression:Path=TabStripPlacement; DataItem=null; target element is 'TabItem' (Name=''); target property is 'NoTarget' (type 'Object') 
```

如果我添加一个新标签，切换到另一个标签，切换回来，然后删除它，它不会抱怨。似乎在切换过程中“更新”了一些东西，但我不知道是什么以及如何修复它们。

这是我的 xaml 文件：

```
<Window x:Class="MyHomework__MVVM_.MyHomeworkView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       Title="My Homework" Height="450" Width="800" ResizeMode="CanMinimize">
    <Grid Margin="0,0,10,10">
        <TabControl HorizontalAlignment="Left" Height="330" VerticalAlignment="Top" Width="764" Margin="10,10,0,0" ItemsSource="{Binding AllTabs}" SelectedItem="{Binding SelectedTab}">
            <TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    <Setter Property="Header" Value="{Binding Header}"/>
                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <Grid>
                                    <TextBox Text="{Binding Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" FontSize="16" AcceptsReturn="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextChanged="OnTextChanged">
                                    </TextBox>
                                </Grid>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="FontSize" Value="20"/>
                </Style>
            </TabControl.ItemContainerStyle>
        </TabControl>
        <Button Content="Add Course" HorizontalAlignment="Left" VerticalAlignment="Top" Width="105" Margin="10,351,0,0" Height="50" Command="{Binding AddCourseCommand}"/>
        <Button Content="Drop Course" HorizontalAlignment="Left" VerticalAlignment="Top" Width="76" Margin="126,379,0,0" Height="22" Command="{Binding DropCourseCommand, UpdateSourceTrigger=PropertyChanged}"/>
        <Button Content="Save HW" HorizontalAlignment="Left" VerticalAlignment="Top" Width="105" Margin="669,351,0,0" Height="50" Command="{Binding SaveHomeworkCommand, UpdateSourceTrigger=PropertyChanged}"/>
    </Grid>
</Window> 
```

这是我添加/删除标签的代码：

```
public void AddNewTab()
        {
            NewCourseName ncn = new NewCourseName();
            ncn.Owner = mainWindow;
            ncn.ShowDialog();
            if (ncn.courseName != null)
            {
                MyHomeworkModel newTab = new MyHomeworkModel();
                newTab.Header = ncn.courseName;
                newTab.Text = "";
                AllTabs.Add(newTab);
                SelectedTab = newTab;
            }
        }

public void RemoveTab()
        {
            DropCourseConfirmation dcc = new DropCourseConfirmation();
            dcc.Owner = mainWindow;
            dcc.ShowDialog();
            if (dcc.drop == true)
            {
                int index = AllTabs.IndexOf(SelectedTab);
                AllTabs.Remove(SelectedTab);

                if (AllTabs.Count > 0)
                {
                    if (index == 0)
                    {
                        SelectedTab = AllTabs[0];
                    }
                    else
                    {
                        SelectedTab = AllTabs[--index];
                    }
                }
                else
                {
                    SelectedTab = null;
                }
            }
        } 
```

如果您需要查看更多代码，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-08T16:41:47.880

正如[Zarat](https://stackoverflow.com/a/16367625/138078)提到的，Windows 8 中 TabItem 的默认样式具有在删除后触发的触发器，然后查找现在丢失的 TabControl。我认为这是一个错误，因为添加和删除 TabItems 是一个非常常见的场景，不是吗？

我发现作为一种解决方法，可以删除 TabItem 的模板：

```
foreach (var item in TabControl.Items)
{
    var tabitem = item as TabItem;
    // if this is the item to remove
    tabitem.Template = null;
    TabControl.Items.Remove(item);
} 
```

这在我的场景中看起来不错，因为我不会再使用 TabItem 了。

我还尝试清除模板的触发器集合或清除其触发器的条件集合，但不允许这样做（错误）。
此外，似乎没有办法禁用触发器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-03T21:11:41.407

这不是错误，只是 WPF 绑定引擎在更新绑定并注意到某些内容丢失时发出的一些噪音。很遗憾，它不能被静音。也许它值得在 Connect 或 MSDN 论坛上报告，但不要指望任何快速反应。

您注意到的消息来自 aero2.normalcolor.xaml - Windows 8 的默认样式。如果您在默认位置安装了 VS 2012 SP 2，您可以在此处找到它们：C:\Program Files (x86)\Microsoft Visual Studio 11.0 \混合\系统主题\ Wpf

在这个文件中，有几个 MultiDataTrigger 有条件检查相对源上的 TabStripPlacement，寻找父 TabControl。因此，当您从 TabControl 中删除 TabItem 时，绑定引擎可能会尝试更新绑定并发现父项丢失，并记录警告。这完全没问题，因为 TabItem 已被删除并且您不再关心样式（如果您要再次添加它，绑定将被重新评估并且一切都会好起来的）。

现在我不知道他们为什么在 Windows 8 的 RelativeSource 上检索 TabStripPlacement，因为 TabItem 本身似乎带有其父 TabStripPlacement 的副本。所有其他默认样式都使用 TabStripPlacement 的本地副本进行绑定。因此，如果您喜欢冒险，您可能希望将样式复制到您自己的资源字典中，并在调试期间使用“固定”版本以减少噪音......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-04T13:35:56.447

我相信这是最终修复，它将在 XAML 级别（没有代码背后）工作，并且应该适用于每个人。

**在您的 TabControl 中，添加此*ItemContainerStyle***

```
<TabControl ItemContainerStyle="{StaticResource FixTabStripTabItemStyle}"/> 
```

**并将此*Style*和此*ControlTemplate*添加到您的窗口/应用程序资源**

```
<!--This should be used whenever a TabControl is using ItemsSource, as some Bindings are failing when the tabs are removed/added-->
<Style x:Key="FixTabStripTabItemStyle" TargetType="{x:Type TabItem}">
    <Setter Property="MinWidth" Value="60" />
    <Setter Property="Template" Value="{DynamicResource FixTabStripTabItemControlTemplate}"/>
</Style>

<ControlTemplate x:Key="FixTabStripTabItemControlTemplate" TargetType="{x:Type TabItem}">
    <Grid x:Name="templateRoot" SnapsToDevicePixels="True">
        <Border x:Name="mainBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1,1,1,0" Background="{TemplateBinding Background}" Margin="0">
            <Border x:Name="innerBorder" BorderBrush="#FFACACAC" BorderThickness="1,1,1,0" Background="White" Margin="-1" Opacity="0"/>
        </Border>
        <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" ContentStringFormat="{TemplateBinding HeaderStringFormat}" ContentSource="Header" Focusable="False" HorizontalAlignment="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{Binding VerticalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}"/>
    </Grid>
    <ControlTemplate.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Background" TargetName="mainBorder">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Background" TargetName="mainBorder">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Background" TargetName="mainBorder">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Background" TargetName="mainBorder">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Panel.ZIndex" Value="1"/>
            <Setter Property="Margin" Value="-2,-2,0,-2"/>
            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Panel.ZIndex" Value="1"/>
            <Setter Property="Margin" Value="-2,0,-2,-2"/>
            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Panel.ZIndex" Value="1"/>
            <Setter Property="Margin" Value="0,-2,-2,-2"/>
            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Panel.ZIndex" Value="1"/>
            <Setter Property="Margin" Value="-2,-2,-2,0"/>
            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
        </MultiDataTrigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

# html - 如何在 div 中避免页脚在其上方重叠图像

> ID：14419254
> 
> 赞同：0
> 
> 时间：2013-01-19T21:51:18.133
> 
> 标签：html, css, positioning

我试图避免我的页脚与位于页脚上方 div 内右下角的图像重叠。我已将 z-index 应用于具有右下角图像的容器，但它仍被页脚重叠。

我应用的 CSS 看起来像这样

```
.content_body
    {
    margin: 0 auto;
    width: 100%;
    overflow: hidden;
    padding-top: 30px;
    background: #E6E6E0;
    color: #555;
    font-family: Tahoma, Arial, sans-serif;
    font-size: 14px;
    min-height: 800px;
     background-image: url(http://types4u.org/Tomike/temp/images/saturation.png) ;
    background-position: right bottom; 
     background-repeat: no-repeat;
     z-index: 1;
    }

       #footer
        {
       background: url(http://types4u.org/Tomike/temp/images/bg2.jpg) #E6E6E0;
       color: white;
    font-family: Lato, Tahoma, Arial, sans-serif;
     font-size: 13px;
     line-height: 1.5em;
     padding: 40px 50px 50px 50px;
     clear: both;
     border-top: solid #000033 5px;
     }

   .design_by
      {
     float:     right;
     font-size: 2.4em;
     font-family: 'tangerine', cursive;
     color:     white;
   }

   .copyright
  {
  float:     left;
   font-size: 2.4em;
  font-family: 'tangerine', cursive;
   color:     white;
       }

 <div class="content_body"> 
    hello
 </div>

 <div id="footer">
    <div class="copyright">
       <a href="#">mine.com</a> &copy copyright 2013 all rights reserved.
    </div>  

   <div class="design_by">  
       Design by <a href="http://types4u.org" target="http://types4u.org">types 4 u</a> 
   </div> 
   </div> 
```

[jsfiddle](http://jsfiddle.net/CjXxk/4/)示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:00:29.927

将该图像放在单独的 div 中，并在相对定位的父级中为其提供绝对定位。

[http://jsfiddle.net/CjXxk/10/](http://jsfiddle.net/CjXxk/10/)

图像下方的空白实际上是因为图像本身存在一条空白。

```
.saturation-image
{
    width: 500px;
    height: 300px;
    background-image: url(http://types4u.org/Tomike/temp/images/saturation.png);
    position: absolute;
    bottom: 0px;
    right: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:01:32.030

您将不得不重新考虑您正在使用的代码。因为您将图片设置为内容主体的背景图像，所以它将始终位于页脚后面，因为页脚位置固定在内容主体的顶部。您必须将图像放在单独的 div 中。

我将您的小提琴更新为下面的代码。在这里看到它：http: [//jsfiddle.net/CjXxk/13/](http://jsfiddle.net/CjXxk/13/)

```
 <div class="content_body"> 
     hello
</div>

<div class="picture">
    <img src="http://types4u.org/Tomike/temp/images/saturation.png" />
</div>

<div id="footer">
     <div class="copyright">
         <a href="#">mine.com</a> &copy copyright 2013 all rights reserved.
     </div>  

     <div class="design_by">  
         Design by <a href="http://types4u.org" target="http://types4u.org">types 4 u</a> 
     </div> 
</div> 
```

然后是 CSS：

```
.picture {
    position:fixed;
    bottom:0;
    right:0;
}

.content_body
    {
    margin: 0 auto;
    width: 100%;
    overflow: hidden;
    padding-top: 30px;
    background: #E6E6E0;
    color: #555;
    font-family: Tahoma, Arial, sans-serif;
    font-size: 14px;
    min-height: 800px;
    }

#footer
    {
    background: url(http://types4u.org/Tomike/temp/images/bg2.jpg) #E6E6E0;
    color: white;
    font-family: Lato, Tahoma, Arial, sans-serif;
    font-size: 13px;
    line-height: 1.5em;
    padding: 40px 50px 50px 50px;
    clear: both;
    border-top: solid #000033 5px;
    }

.design_by
    {
    float:     right;
    font-size: 2.4em;
    font-family: 'tangerine', cursive;

    color:     white;
    }

.copyright
    {
    float:     left;
    font-size: 2.4em;
    font-family: 'tangerine', cursive;
    color:     white;
    } 
```

# c# - 可观察的等待方法 C#

> ID：14419255
> 
> 赞同：3
> 
> 时间：2013-01-19T21:51:23.390
> 
> 标签：c#, system.reactive

Observable.FromAsyncPattern 可用于从 BeginX EndX 样式的异步方法中生成 observable。

也许我误解了一些事情，但是是否有类似的功能可以从新的异步样式方法创建一个 observable - 即.. Stream.ReadAsync？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T21:56:44.210

您可以使用[ToObservable](http://msdn.microsoft.com/en-us/library/hh229584.aspx)创建`IObservable<T>`一个：`Task<T>`

```
using System.Reactive.Threading.Tasks;

Stream s = ...;
IObservable<int> o = s.ReadAsync(buffer, offset, count).ToObservable(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:29:57.547

请注意，李的回答是正确的，但最终我最终做的是使用 Observable.Create 不断地从流中读取，见下文 -

```
 public static IConnectableObservable<Command> GetReadObservable(this CommandReader reader)
    {

       return Observable.Create<Command>(async (subject, token) =>
        {

            try
            {

                while (true)
                {

                    if (token.IsCancellationRequested)
                    {
                        subject.OnCompleted();
                        return;
                    }

                    Command cmd = await reader.ReadCommandAsync();

                    subject.OnNext(cmd);

                }

            }

            catch (Exception ex)
            {
                try
                {
                    subject.OnError(ex);
                }
                catch (Exception)
                {
                    Debug.WriteLine("An exception was thrown while trying to call OnError on the observable subject -- means you're not catching exceptions everywhere");
                    throw;
                }
            }

        }).Publish();

    } 
```

# android - android 内容提供程序错误 INSTALL_FAILED_CONFLICTING_PROVIDER

> ID：14419256
> 
> 赞同：0
> 
> 时间：2013-01-19T21:51:24.487
> 
> 标签：android, sqlite, android-contentprovider, android-contentresolver

我在手机上有超过 5 个应用程序需要与内容提供者共享数据，并且每个应用程序首先安装，必须创建表和 URI，所以在所有应用程序中我应该在清单中声明提供程序，以授予应用程序初始化提供程序的权限. 但我收到安装错误：INSTALL_FAILED_CONFLICTING_PROVIDER 错误，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:30:06.127

> I have more than 5 applications on the phone that they need to share data with content provider

Most likely, this is not a good idea.

> so in all applications I should declare provider in manifest, to give the application authority to initialize provider

That will not work.

> But I got Installation error: INSTALL_FAILED_CONFLICTING_PROVIDER error

That is why that will not work.

> how can I manage this problem ?

Assuming for the moment that this was a good idea, you could ship the app with the `<provider>` marked as `android:enabled="false"`. Then, the first app could try to access the `ContentProvider`, and when it determines that nobody else has set up the `ContentProvider`, it can enable its own (see `PackageManager` and `setComponentEnabledSetting()`).

So, let us suppose that your five applications are named A, B, C, D, and E. A is installed first. The user runs it, A sees that there is no `ContentProvider`, and enables its own. The user proceeds to install B, C, D, and E, and they all use A's `ContentProvider` to store their data. The user now uninstalls A. B, C, D, and E will lose all their data, as their data goes away when A is uninstalled. The user, in all likelihood, will not appreciate this.

The only scenario in which that is a good idea is if B, C, D, and E are supposed to depend entirely upon A. In that case, B, C, D, and E do not need their own `ContentProvider`, as they can always use A's, and if A does not exist, that is the user's fault.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T00:04:28.860

您应该像这样在每个应用程序的清单中定义提供程序：

```
android:authorities="com.app.SomeContentProvider${applicationId}" 
```

您的提供商对于每个应用程序都是独一无二的，这一点很重要。

# tomcat - 停止和启动 Tomcat 以测试 Servlet

> ID：14419261
> 
> 赞同：0
> 
> 时间：2013-01-19T21:52:06.960
> 
> 标签：tomcat, servlets

我刚刚构建了一个带有 servlet 的小型测试 Web 应用程序，如下所示：

***index.html --> servlet (doPost) --> 重定向到结果页面***

索引页面是一个简单的表单，当单击它的“提交”按钮时，它会通过 doPost 调用 servlet。然后在 servlet 中运行业务方法（使用表单数据）后，将出现重定向到结果页面。

我将我的项目作为战争导出到我的 tomcat 7 /webapps 目录并启动容器。一切运行良好！

**问题：** 但是，为什么每次我想重新测试表单时都必须停止然后启动 Tomcat？也就是说，如果我从结果页面单击“返回”到表单页面（index.html）并在 Firefox 中点击刷新按钮，我可以填写一个新表单，但是当我再次单击提交时，业务逻辑功能永远不会运行在 servlet 中，除非我重新启动容器？

*索引.html*

```
<html>
<head>
<title>URL Auction Search Page</title>
</head>
<body>
<CENTER>
 <FORM ACTION="/ResultServlet/Results" METHOD=GET>
   <INPUT TYPE=TEXT NAME="st">
   <INPUT TYPE=SUBMIT VALUE=Submit>
  </FORM>
</CENTER>
</body>
</html> 
```

*小服务程序*

```
@WebServlet("/Results")
public class Results extends HttpServlet {
    private static final long serialVersionUID = 1L;
       public static String str="";

    private String businessLogic(String q){
        try {
            str = new compute.URL.GetAvailURI( "https://www.registerdomains.com/auctionAPI/Key:a05u3***1F2r6Z&urlSearch="+q);
            /*more boring number crunching */
            return str;
            }
/*
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
    }
*/
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Results r = new Results();
        String st = request.getParameter("st");
        response.sendRedirect("results/resultActionURL.html?st="+r.businessLogic(st)");

    }

} 
```

# java - 如何调用泛型对象的静态类方法？

> ID：14419269
> 
> 赞同：7
> 
> 时间：2013-01-19T21:52:59.563
> 
> 标签：java, class, generics, robospice

我需要将泛型类型的类传递给类的构造函数。该类是来自 RoboSpice Android 库的[SpiceRequest](https://github.com/octo-online/robospice/blob/master/robospice-core-parent/robospice/src/com/octo/android/robospice/request/SpiceRequest.java)，用于对构造函数的引用[。](https://github.com/octo-online/robospice)

在这种情况下，当可以从泛型类型本身访问它时，类需要将泛型的类传递给构造函数，这似乎很奇怪`RESULT.class`，但也许我错了。无论如何，我不想更改库的代码，而是需要为 , 的泛型类型使用泛型`SpiceRequest`类型`Map<String, ? extends Object>`。这是我的代码：

```
SpiceRequest<Map<String, ? extends Object>> request =
        new SpiceRequest<Map<String, ? extends Object>>(???) {
            ...
        }; 
```

以及构造函数的签名`SpiceRequest`：

```
public SpiceRequest(final Class<RESULT> clazz) {
    ...
} 
```

为了 ？？？我尝试`Map.class`过编译器错误：`The constructor SpiceRequest<Map<String,? extends Object>>(Class<Map>) is undefined.`

`Map<String, ? extends Object>.class`给出错误：`Syntax error on tokens, PrimitiveType expected instead`，特别是下划线`? extends Object`。它也给出与 相同的错误`Map.class`。

并`Map.<String, ? extends Object>class`给出相同的编译器错误。

获取泛型类的正确方法是什么`Class<Map<String, ? extends Object>>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T22:50:55.633

具体参数化类型或通配符参数化类型没有类文字。来自[Angelika Langer 的泛型教程](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ310)：

> *通配符参数化类型在称为类型擦除*的过程中转换为字节码时会丢失其类型参数。作为类型擦除的副作用，泛型类型的所有实例共享相同的运行时表示，即相应*原始类型*的表示。换句话说，参数化类型没有自己的类型表示。因此，没有必要形成诸如`List<?>.class`、`List<? extends Number>.class`和之类的类文字`List<Long>.class`，因为不`Class`存在这样的对象。只有原始类型`List`具有`Class`表示其运行时类型的对象。它被称为`List.class`。

出于同样的原因，具体参数化类型没有类文字，简而言之就是[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

出于您的目的，您只需要对类文字进行未经检查的强制转换：

```
Class<Map<String, ?>> c = (Class<Map<String, ?>>)(Class<?>)Map.class; 
```

请注意，双重转换是必要的，因为从to`Class<?>`的直接转换是非法的。`Class<Map>``Class<Map<String, ?>>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T07:37:09.003

这个问题与 RoboSpice 本身并不真正相关，而是与 Java 语法的限制有关：在 Java 中没有可用于获取参数化泛型类型的类/类型的文字。

如果你想做类似的事情

```
public class ListTweetRequest extends SpiceRequest<List<Tweet>> {

   public ListTweetRequest(Object cacheKey ) {
       super( <Here is the problem>, cacheKey );
   }
} 
```

那么你不能将类传递`List<Tweet>.class`给你的父构造函数。这确实是 Java 的限制，因为泛型是使用类型擦除实现的，并且`List<Tweet>.class`在 Java 中没有真正的意义。

最好和最干净的解决方法是使用中间类型，例如：

```
public class ListTweet extends List<Tweet> {
}

public class ListTweetRequest extends SpiceRequest<ListTweet> {

   public ListTweetRequest(Object cacheKey ) {
       super( ListTweet.class, cacheKey );
   }
} 
```

这样做的好处是为您提供了一个可以传递给*SpiceRequest*的构造函数的真实类型。但要小心混淆。在这些情况下，proguard 将尝试删除 ListTweet 类，您必须明确保护它免受混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T21:59:08.550

我总是用擦除来猜测，但你有没有试过用 Map.class 来调用它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-17T13:45:22.197

我也遇到了这个问题，我找到了@Snicolas 所说的解决方案。

看看这个 robospice-sample-retrofit 的例子：

[https://github.com/octo-online/RoboSpice-samples/blob/release/robospice-sample-retrofit/src/com/octo/android/robospice/sample/retrofit/network/SampleRetrofitSpiceRequest.java](https://github.com/octo-online/RoboSpice-samples/blob/release/robospice-sample-retrofit/src/com/octo/android/robospice/sample/retrofit/network/SampleRetrofitSpiceRequest.java)

实际上最好不要从原始 List 接口继承，而是从任何子类（如 ArrayList 等）继承，否则您将必须实现所有接口方法。

```
import java.util.ArrayList;

public class Contributor {
    public String login;
    public int contributions;

    @SuppressWarnings("serial")
    public static class List extends ArrayList<Contributor> {
    }
} 
```

# cakephp - 翻译配置

> ID：14419271
> 
> 赞同：0
> 
> 时间：2013-01-19T21:53:13.480
> 
> 标签：cakephp, cakephp-2.2

我将站点常规设置（站点名称和标题）放在配置文件中，然后`bootstrap.php`通过`Configure::load('config')`.

因为我的网站是双语的，所以我决定参加 I8n 课程。所以在`config.php`我使用`__()`函数来翻译网站标题：

```
$config = array(
    'title' => __('SITE TITLE')
); 
```

对于默认语言，它可以正常工作（并显示“SITE TITLE”），因为我把它放在函数`Configure::write('Config.language', 'eng');`之前`load`。但是对于其他语言，它不起作用；并以英文显示标题（默认语言。）

我从 URL 获取新语言，并在方法中将其设置为新（默认）语言`AppController` `beforeFilter`。（你知道，控制器将在引导后加载。）

你建议我怎么做？（不使用数据库表来获取/设置站点常规设置）

# html - 在 CSS 中对齐框中的文本

> ID：14419272
> 
> 赞同：1
> 
> 时间：2013-01-19T21:53:33.577
> 
> 标签：html, css, wordpress

我想对齐文本

```
#navigation li a{} 
```

a-element/container/box 不应该离开它的位置。我只想将文本放置在元素/容器/框的左下角（但是它被称为），边缘有一些空间。text-align-assignment 是不够的。还有别的吗？如前所述：a-element/container/box 不应该通过移动 a-box 中的文本来移动。

我无法将另一个盒子放入我的 a-box，因为我使用的导航是

```
wp_nav_menu 
```

来自wordpress。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:07:50.177

试试这个：

**更新**：使用容器列表项；

```
#navigation li {
    display: table-cell;
    vertical-align: bottom;
    text-align: left;
    padding: 0; /* if you want no spaces at the edges inside the anchor. */
    /* ... rest of your properties */
}

#navigation li a {
    padding: 0; /* if you want no spaces at the edges inside the list item. */
    /* ... rest of your properties */
} 
```

**注意：**属性的值，`display`例如；“表格单元格”，“内联表格”，“表格”，“表格标题”，“表格列”，“表格列组”，“表格行”，“表格行组”， IE7 及更早版本不支持“继承”。IE8 需要一个!DOCTYPE。IE9 支持这些值。

这是**[关于 jsFiddle 的演示](http://jsfiddle.net/onury/putf3/)**。

# paging - 虚拟内存 - 同时在 RAM 和硬盘上的页面？

> ID：14419277
> 
> 赞同：1
> 
> 时间：2013-01-19T21:54:08.083
> 
> 标签：paging, virtual-memory, page-fault

一个页面可以同时在物理内存和虚拟内存中吗？

如果我要求一个位于虚拟内存上的地址，它是否总是会触发页面错误？如果第一个问题是正确的，那么它应该只在页面不在物理内存中时触发页面错误。那正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:57:56.093

> 一个页面可以同时在物理内存和虚拟内存中吗？

当您将内存块分页时，您需要空间来存放其他内容，因此将其放在 RAM 和页面文件中是没有意义的。

> 如果我要求一个位于虚拟内存上的地址，它是否总是会触发页面错误？如果第一个问题是正确的，那么它应该只在页面不在物理内存中时触发页面错误。那正确吗？

是的，这是正确的。页面错误会导致中断。如果您在访问内存时总是遇到页面错误，那么您的性能就会非常低。

# macos - 为旧版 Mac OSX 编译的缺点

> ID：14419283
> 
> 赞同：0
> 
> 时间：2013-01-19T21:54:37.727
> 
> 标签：macos, osx-snow-leopard, osx-leopard

我正在为 Mac OSX 维护一个应用程序。目前我使用`-mmin-macosx-version=10.6`的是 10.5，但仍有极少数用户运行 10.5。我想知道是否值得为所有人编译一个版本，将最低要求设置为 10.5，或者构建两次：强制兼容 10.5 是否存在任何全局的、非应用程序特定的缺点？我最关心的是与现代系统 10.7+ 的性能和兼容性。我只提供 Intel x86_64 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:55:50.333

部署目标应该对应用程序性能绝对没有影响。您没有理由提供单独的二进制文件。

# python - 在numpy中将非常低的值设置为零

> ID：14419290
> 
> 赞同：45
> 
> 时间：2013-01-19T21:56:22.347
> 
> 标签：python, numpy

在 numpy 我有一个像

```
[0 +  0.5j, 0.25 + 1.2352444e-24j, 0.25+ 0j, 2.46519033e-32 + 0j] 
```

将超低值设置为零的最快和最简单的方法是什么？

```
[0 +  0.5j, 0.25 + 0j, 0.25+ 0j, 0 + 0j] 
```

效率不是最重要的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-19T22:00:04.147

嗯。我对此并不满意，但这似乎有效：

```
>>> a = np.array([0 +  0.5j, 0.25 + 1.2352444e-24j, 0.25+ 0j, 2.46519033e-32 + 0j])
>>> a
array([  0.00000000e+00 +5.00000000e-01j,
         2.50000000e-01 +1.23524440e-24j,
         2.50000000e-01 +0.00000000e+00j,   2.46519033e-32 +0.00000000e+00j])
>>> tol = 1e-16
>>> a.real[abs(a.real) < tol] = 0.0
>>> a.imag[abs(a.imag) < tol] = 0.0
>>> a
array([ 0.00+0.5j,  0.25+0.j ,  0.25+0.j ,  0.00+0.j ]) 
```

您可以根据问题的需要选择您的容忍度。我通常使用一个数量级或更高的数量级

```
>>> np.finfo(np.float).eps
2.2204460492503131e-16 
```

但它取决于问题。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-19T22:13:34.503

要将小于`eps`零的元素设置为：

```
a[np.abs(a) < eps] = 0 
```

可能有一个更有效的专门功能。

如果您想禁止打印小浮点数：

```
import numpy as np
a = np.array([1+1e-10j])
print a # -> [ 1\. +1.00000000e-10j]

np.set_printoptions(suppress=True)
print a # -> [ 1.+0.j] 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-04-25T15:01:07.360

通过使用数组的方法 round(n)

```
np.array( [0 +  0.5j, 0.25 + 1.2352444e-24j, 
           0.25+ 0j, 2.46519033e-32 + 0j]  ).round(23) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-23T15:44:53.983

您还可以使用以下[`numpy.isclose`方法](http://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.isclose.html)：

```
>>> np.isclose([1e10,1e-7], [1.00001e10,1e-8])
array([True, False]) 
```

通过询问它是否接近于零，它应该可以工作：

```
>>> np.isclose([1e10,0], [1.00001e-10,0])
array([False, True]) 
```

您可以自定义`atol`（绝对容差，默认为`1e-08`）和`rtol`（相对容差，默认为`1e-05`）参数。然后，您可以设置`rtol=0`为仅使用绝对容差。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-11T17:55:48.477

如果所有数字都有小的虚部，而你只想抑制这些，那么你可以使用

```
b=np.real_if_close(a) 
```

否则 DSM 的建议是前进的方向，即

```
a.real[abs(a.real)<1e-13]=0
a.imag[abs(a.imag)<1e-13]=0 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-01-20T17:37:32.853

```
diff = x-y
diff[diff>1.e-16]

Out[93]:
array([], dtype=float64)

diff[diff>1.e-18]

array([1.73472348e-18, 1.73472348e-18, 1.73472348e-18, 1.73472348e-18,
       1.73472348e-18, 1.73472348e-18, 1.73472348e-18, 1.73472348e-18,
       1.73472348e-18, 1.73472348e-18, 1.73472348e-18, 1.73472348e-18,
       1.73472348e-18, 1.73472348e-18, 1.73472348e-18, 1.73472348e-18,
       1.73472348e-18]) 
```

# jquery - 简单查询表搜索过滤器

> ID：14419291
> 
> 赞同：3
> 
> 时间：2013-01-19T21:56:29.967
> 
> 标签：jquery, search, filter

打击是表的基本过滤器搜索。目前它过滤和搜索整个表（thead & tbody）。有没有办法让这个脚本只搜索 tbody？我想从过滤结果中排除thead，我尝试将“id="kwd_search"”附加到标签而不是标签上，但这会使脚本不起作用。我不希望它做的另一个是在找到结果时将表行缩放得更小。

非常感谢任何帮助，并感谢您的阅读。 [这是我所拥有的现场演示](http://jsfiddle.net/aPLLF/)。我对这些东西真的很慢，所以如果我能得到一个活生生的例子，如果它不是太麻烦的话，我真的会很好。

```
// When document is ready: this gets fired before body onload <img src='http://blogs.digitss.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> 
$(document).ready(function(){
    // Write on keyup event of keyword input element
    $("#kwd_search").keyup(function(){
        // When value of the input is not blank
        if( $(this).val() != "")
        {
            // Show only matching TR, hide rest of them
            $("#my-table tbody>tr").hide();
            $("#my-table td:contains-ci('" + $(this).val() + "')").parent("tr").show();
        }
        else
        {
            // When there is no input or clean again, show everything back
            $("#my-table tbody>tr").show();
        }
    });
});
// jQuery expression for case-insensitive filter
$.extend($.expr[":"], 
{
    "contains-ci": function(elem, i, match, array) 
    {
        return (elem.textContent || elem.innerText || $(elem).text() || "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:23:35.307

我不想调试这种`contains-ci`方法。可以换成`filter()`

```
// When document is ready: this gets fired before body onload <img src='http://blogs.digitss.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> 
$(document).ready(function() {
     /* cache td elements to improve search performance*/
      var $rows=$("#my-table tbody>tr"), $cells=$rows.children();
    // Write on keyup event of keyword input element
    $("#kwd_search").keyup(function() {
        var term = $(this).val()
        // When value of the input is not blank
        if(term != "") {
            // Show only matching TR, hide rest of them
            $rows.hide();
            $cells.filter(function() {
                return $(this).text().toLowerCase().indexOf(term) > -1;
            }).parent("tr").show();
        } else {
            // When there is no input or clean again, show everything back
            $rows.show();
        }
    });
}); 
```

演示：http: [//jsfiddle.net/aPLLF/2/](http://jsfiddle.net/aPLLF/2/)

# java - Java：在列表中添加或删除元素时避免使用“instanceof”

> ID：14419294
> 
> 赞同：4
> 
> 时间：2013-01-19T21:56:48.667
> 
> 标签：java, arraylist, instanceof

我正在创建一个游戏。一个游戏有一个 GameMap。为了跟踪 GameMap 上事物的状态，我想为每个事物创建 ArrayLists。问题是，我不想创建单独的方法来从每种类型的 ArrayList 中添加或删除项目。我是新手，所以我首先想到的当然是“instanceof”运算符。

请记住，目前，GameMap 是一个离散类，而不是接口或抽象类。目的是在游戏初始化时实例化一个 GameMap 对象。

```
public class GameMap {

//GameMap has a name
private String mapName;

//GameMap has rooms
private ArrayList<Room> roomsOnMap;

//GameMap has items
private ArrayList<Item> itemsOnMap;

//GameMap has people
private ArrayList<Person> peopleOnMap;

//construct GameMap with rooms, items, and people
private GameMap(String mapName, ArrayList someRooms, ArrayList someItems, ArrayList somePeople)
{
    this.mapName = mapName;
    this.roomsOnMap = someRooms;
    this.itemsOnMap = someItems;
    this.peopleOnMap = somePeople;
}

public void addObject(Object o)
{
    //HOW DO I AVOID THIS?
    if(o instanceof Room)
    {
        roomsOnMap.add((Room) o);
    }
    else if(o instanceof Item)
    {
        itemsOnMap.add((Item) o);
    }
    else if(o instanceof Person)
    {
        peopleOnMap.add((Person) o);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T21:58:48.393

使用[重载](http://en.wikipedia.org/wiki/Function_overloading)方法：

```
void addObject(Room room) {
  roomsOnMap.add(room);
}

void addObject(Item item) {
  itemsOnMap.add(item);
}

.. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T22:02:52.493

这是一个技巧：

```
Map<Class, ArrayList> map = new HashMap<Class, ArrayList>();
map.put(Room.class, roomsOnMap);
map.put(Item.class, itemsOnMap);
map.put(Person.class, peopleOnMap);

// ...

public void addObject(Object o)
{
    map.get(o.getClass()).add(o); // be aware of NullPointerException here
} 
```

不过，我建议为此使用重载方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T22:03:31.687

你的预感`instanceOf`可能不是一个很好的主意是正确的。

如果 Room、Items 和 Persons 是某种“ `GameElements`”或“ `MapElements`”，您可以通过共同的父级在它们之间建立关系：

```
enum ElementType
{
    PERSON, ITEM, ROOM;
}

interface MapElement
{
    public ElementType getType();
}

class Room implements MapElement
{
    public ElementType getType()
    {
        return ElementType.ROOM;
    }
    //other attributes and methods...
}

class Person implements MapElement
{
    public ElementType getType()
    {
        return ElementType.PERSON;
    }
    //other attributes and methods...
}

class Item implements MapElement
{
    public ElementType getType()
    {
        return ElementType.ITEM;
    }
    //other attributes and methods...
} 
```

那么你的`add`方法就可以对这个接口进行操作了

```
public void addObject(MapElement e)
{
    if(e.getType == ElementType.Room)
    {
        roomsOnMap.add((Room) e);
    }
    ...
} 
```

仅当元素相关时才执行此操作。如果不是，您应该有单独的方法。使用一种方法来执行此操作可能看起来很有效，但您不会获得任何收益。对于使用此类的任何类（以及编写它的开发人员），单独的 add 方法（如果元素不相关）比使用通用 add`Object`作为参数更直观。你不会丢失任何东西，即使是几行代码，如果事实上你的类和方法变得更加简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T21:59:24.270

如果你想避免使用`instanceof`尝试`Visitor`设计模式。

在这里你可以找到它的描述：[http ://www.oodesign.com/visitor-pattern.html](http://www.oodesign.com/visitor-pattern.html)

# javascript - XMLHttpRequest 在一个页面上被阻止，但在另一个页面上没有？

> ID：14419298
> 
> 赞同：0
> 
> 时间：2013-01-19T21:57:39.917
> 
> 标签：javascript

我有两个页面，都在同一个域上。两者都试图从 Google 日历获取事件源。一个成功，一个不成功。唯一的区别是一个使用jQuery的document.ready，另一个使用window.onload。

有效的页面：[http ://wwwtest.english.wisc.edu/calendar.htm](http://wwwtest.english.wisc.edu/calendar.htm)

不起作用的页面：[http ://wwwtest.english.wisc.edu/844.htm](http://wwwtest.english.wisc.edu/844.htm)

第二个页面是由 CMS 生成的，因此我无法控制脚本的加载顺序，因此我使用 window.onload 来确保首先加载其他脚本。

****以下补充说明****

是的，我已经完成了调试，这是确切的错误：

> XMLHttpRequest 无法加载 [https://www.google.com/calendar/feeds/rhrab82ir5qgut1ddv7qj087c8%40group.ca](https://www.google.com/calendar/feeds/rhrab82ir5qgut1ddv7qj087c8%40group.ca) …ar.google.com/public/basic?start=1356847200&end=1360476000&_=1358694509517。Access-Control-Allow-Origin 不允许来源[http://wwwtest.english.wisc.edu 。](http://wwwtest.english.wisc.edu)

但对我来说令人困惑的部分是：

我从有效的页面复制了代码，只更改了两件事：

1) 我从使用 jQuery 的 document.ready 更改为使用 window.onload

2) 我改变了 jQuery 选择器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:06:06.723

我可能通过在 firebug 中的快速调试发现了您的问题。你的来电

[https://www.google.com/calendar/feeds/rhrab82ir5qgut1ddv7qj087c8%40group.calendar.google.com/public/basic?start=1356850800&end=1360479600&_=1358632991615](https://www.google.com/calendar/feeds/rhrab82ir5qgut1ddv7qj087c8%40group.calendar.google.com/public/basic?start=1356850800&end=1360479600&_=1358632991615) 正在返回：XML解析错误：找不到元素位置：moz-nullprincipal :{627004d0-0e97-ca46-9ae8-767df4ae9d4f} 第 1 行，第 1 列：

有一些有趣的信息位于[Cross-domain Ajax call gets no element found Location: moz-nullprincipal](https://stackoverflow.com/questions/7053995/cross-domain-ajax-call-gets-no-element-found-location-moz-nullprincipal) and

[jQuery Ajax 调用 No element found 问题](https://stackoverflow.com/questions/3334969/jquery-ajax-call-no-element-found-issue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:07:51.953

XMLHttpRequest 无法加载[https://www.google.com/calendar/feeds/rhrab82ir5qgut1ddv7qj087c8%40group.ca](https://www.google.com/calendar/feeds/rhrab82ir5qgut1ddv7qj087c8%40group.ca) …ar.google.com/public/basic?start=1356814800&end=1360443600&_=1358633133560。Access-Control-Allow-Origin 不允许来源[http://wwwtest.english.wisc.edu 。](http://wwwtest.english.wisc.edu)

我使用 Chrome 来调试这些东西。Ctrl+Shift+J 用于 JavaScript 控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T15:52:32.083

显然，完整日历具有使用 Google 日历事件所需的特定附加脚本。

这里的信息：http: [//arshaw.com/fullcalendar/docs/google_calendar/](http://arshaw.com/fullcalendar/docs/google_calendar/)

第一个例子加载了这个脚本，但第二个没有。添加它后，事件会正确加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T22:10:34.430

第一个使用 jsonp api，而第二个使用 xml api，因此适用同源策略，如果您可以更改第二个请求以使用 jsonp api。

# python - 创建表后向 SQLAlchemy 模型添加索引

> ID：14419299
> 
> 赞同：39
> 
> 时间：2013-01-19T21:57:47.563
> 
> 标签：python, indexing, sqlalchemy

我有一个烧瓶-sqlalchemy 模型：

```
class MyModel(db.Model):
__tablename__ = 'targets'
id = db.Column(db.Integer, primary_key=True)
url = db.Column(db.String(2048)) 
```

该表已创建并正在使用中。我想在 url 属性上创建一个索引，所以我将 index=True 传递给它：

```
url = db.Column(db.String(2048), index=True) 
```

如何在不删除和重新创建表的情况下使该索引生效？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2016-12-21T03:03:08.587

给定原始问题的模型类。

```
class MyModel(db.Model):
    __tablename__ = 'targets'
    id = db.Column(db.Integer, primary_key=True)
    url = db.Column(db.String(2048)) 
```

您不能只添加`index=True`，因为即使您调用`db.Model.metadata.create_all()`索引也不会在已创建的表上创建。

相反，您需要创建一个独立的`Index`对象，然后再创建它。它看起来像这样：

```
class MyModel(db.Model):
    __tablename__ = 'targets'
    id = db.Column(db.Integer, primary_key=True)
    url = db.Column(db.String(2048))

mymodel_url_index = Index('mymodel_url_idx', MyModel.url)

if __name__ == '__main__':
    mymodel_url_index.create(bind=engine) 
```

现在`engine`来自哪里将取决于您的 sqlalchemy 配置，但此代码应该传达需要发生的事情的要点。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2019-09-20T10:10:19.950

自从提出问题以来，已为此添加了支持。

现在您只需添加`index=True`到现有列，并自动生成迁移。

检查以下软件包版本：

```
alembic==1.0.10
SQLAlchemy==1.3.4
SQLAlchemy-Utils==0.34.0
Flask-SQLAlchemy==2.4.0
Flask-Migrate==2.5.2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-24T13:45:29.400

调用`create()`索引：

```
index.create() 
```

[http://docs.sqlalchemy.org/en/latest/core/constraints.html#sqlalchemy.schema.Index.create](http://docs.sqlalchemy.org/en/latest/core/constraints.html#sqlalchemy.schema.Index.create)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T02:43:06.633

**请注意，这是不正确且过于复杂的答案**

正确的方法是使用[这里](https://stackoverflow.com/a/16736472/1296661)`index.create`所说的。

* * *

首先确保您拥有数据库的最新快照并且能够从该快照恢复数据库。

对于中型和大型项目（您可能需要同时支持多个版本并安装在多个环境中的项目），有一个特殊的过程是数据库管理生命周期的一部分，称为“数据库迁移”。数据库迁移包括对现有架构的更改。SQLAlchemy 不支持开箱即用的迁移。

有两种 SQLAlchemy 兼容的数据库迁移工具可用：

*   [蒸馏器](http://alembic.readthedocs.org/)
*   [SQLAlchemy-迁移](http://code.google.com/p/sqlalchemy-migrate/)

在 SQLAlchemy 文档页面中查看更多信息和这些工具的链接：[Altering Schemas through Migrations](http://docs.sqlalchemy.org/en/latest/core/schema.html#altering-schemas-through-migrations)。

但是，如果您正在处理小型项目，我建议您从数据库命令行实用程序或通过 python 脚本中的 connection.execute() 手动运行 ALTER TABLE DDL 查询。

在我现在工作的生产应用程序中，我们只支持一个最新版本的应用程序。对于每个数据库架构更改，我们执行以下步骤：

*   制作生产数据库的快照
*   在开发环境中加载此快照
*   更新 sqlalchemy 数据模型模块
*   准备并运行更改表查询并保存此查询以供以后使用
*   对代码进行其他相关更改
*   在开发环境上运行测试
*   将最新版本的代码部署到生产环境
*   在生产中更改表

此外，我使用以下技巧来生成创建表/索引查询：我将我的应用程序指向全新的数据库，启用 sqlalchemy 查询的日志记录并运行`metadata.create_all()`- 所以在日志（或 STDOUT）中，我看到由 sqlalchemy 生成的创建查询

根据您所使用的数据库系统，索引创建查询会略有不同。通用查询如下所示：

```
create index targets_i on targets(url); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-14T17:38:11.533

您必须清楚两个阶段：

1.  你的 ORM：你的数据模型是什么样子的
2.  您的迁移进度：将设计中的数据模型转换为数据库表

Add`index=True`仅更新您设计的 ORM。您应该检查您的迁移进度 - 他们如何根据您的 ORM 创建您的数据库表。您没有提到迁移，所以我认为您忘记了它们。

我建议尝试主动管理您的迁移流程 - 例如了解[Alembic](http://alembic.readthedocs.org/)及其工作原理。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-04-12T05:38:48.333

我不确定这是否符合最佳实践，但我发现`Alembic`会在迁移期间通知我索引，`__table_args__`但实际上不会为我制作索引。我制作了这个小脚本，可以生成在`__table_args__`属性中找到的新索引。它`Index.create()`如上所述使用，但如果它们不存在，则会生成新索引。

```
def create_indexes(db, drop_index=False):
    """
    Creates all indexes on models in project if they do not exists already. Assumes all models
    inherit from RequiredFields class, otherwise will need to adjust search for subclasses. If the index
    exists SQLAlchemy throws an error and we assume everything is ok. 
    :param db: The app db object, acts as the engine param for the Index.create()
    :param drop_index: specifies whether the indexes should be dropped or created
    :return:
    """
    from application.base_models import RequiredFields
    from sqlalchemy import Index
    from sqlalchemy.exc import ProgrammingError
    for klass in RequiredFields.__subclasses__():
        if hasattr(klass, '__table_args__'):
            for item in getattr(klass, '__table_args__'):
                if isinstance(item, Index):
                    try:
                        if not drop_index:
                            item.create(db.engine)
                        else:
                            item.drop(db.engine)
                    except ProgrammingError:  # If index exists, creation fails on error
                        pass
    return 
```

这是一个显示索引的示例类。

```
class MyModel(RequiredFields):

    __table_args__ = (
         db.Index( ... ),
         db.Index( ... ),
    ) 
```

* * *

## 回答 #7

> 赞同：-10
> 
> 时间：2017-10-07T08:47:43.990

使用烧瓶迁移。很酷。添加索引后，只需使用以下命令：

```
python manage.py db migrate 
```

一切正常

# python - 'with open()' 不起作用？

> ID：14419312
> 
> 赞同：0
> 
> 时间：2013-01-19T21:59:21.963
> 
> 标签：python, file, python-3.x, io

我有代码：

```
filename = "C:/users/patrik/documents/mypython.txt"
with open(filename) as f:
    if f.readlines()[0] == "patrik's file": #first line
        f.write("This file has been read by patrik!") 
```

为什么它不起作用？我没有收到任何错误，此后文件内容变得混乱，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:00:54.733

要对文件执行读取和写入操作，您可以选择以下模式之一：

`'r+'`：

> 打开一个文件进行读写。文件指针将位于文件的开头。

`'a+'`：

> 打开一个文件以进行追加和读取。如果文件存在，则文件指针位于文件末尾。该文件以附加模式打开。如果该文件不存在，则创建一个新文件进行读写。

请注意，这`file`是python中的内置函数，因此您不应将其用作变量名

# xml - Inno Setup - 如何在没有提示消息的情况下保存 Xml 节点

> ID：14419314
> 
> 赞同：1
> 
> 时间：2013-01-19T21:59:27.917
> 
> 标签：xml, inno-setup

我希望安装程序在没有提示消息的情况下静默编辑 xml 文件，如果 xml 文件存在于目标位置，则安装程序对其进行编辑，如果目标位置不存在，则安装继续并忽略 xml 文件执行没有提示信息就不存在。我看到了 CodeAutomation.iss 但这对我没有帮助。请帮助提供代码示例。

```
[Files]
Source: GameConfiguration.xml; DestDir: "{pf}\Game\Sala"; Flags: uninsneveruninstall;

procedure SaveValueToXML(const AFileName, APath, AValue: string);
var
  XMLNode: Variant;
  XMLDocument: Variant;  
begin
  XMLDocument := CreateOleObject('Msxml2.DOMDocument.6.0');
  try
    XMLDocument.async := False;
    XMLDocument.load(AFileName);
    if (XMLDocument.parseError.errorCode <> 0) then
      MsgBox('Install Garena. ' +
        XMLDocument.parseError.reason, mbError, MB_OK)
    else
    begin
      XMLDocument.setProperty('SelectionLanguage', 'XPath');
      XMLNode := XMLDocument.selectSingleNode(APath);
      XMLNode.text := AValue;
      XMLDocument.save(AFileName);
    end;
  except
    MsgBox('Install Garena', mbError, MB_OK);
  end;
end;

  function NextButtonClick2(PageID: Integer): Boolean;
 begin
    Result := True;
    if (PageId = wpFinished) then begin
        SaveValueToXML(ExpandConstant('{pf}\Game\Sala\GameConfiguration.xml'), '//@param', PEdit.Text);
        SaveValueToXML(ExpandConstant('{pf}\Game\Sala\GameConfiguration.xml'), '//@path', ExpandConstant('{reg:HKCU\SOFTWARE\xxx,InstallPath}\xxx.exe'));
    end;
 end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:04:24.977

只需先测试 XML 文件是否存在：

```
function NextButtonClick2(PageID: Integer): Boolean;
var
  XMLFile: string;
begin
  Result := True;
  if (PageId = wpFinished) then 
  begin
    XMLFile := ExpandConstant('{pf}\Game\Sala\GameConfiguration.xml');
    if FileExists(XMLFile) then 
    begin
      SaveValueToXML(XMLFile, '//@param', PEdit.Text);
      SaveValueToXML(XMLFile, '//@path', 
        ExpandConstant('{reg:HKCU\SOFTWARE\XXX,InstallPath}\xxx.exe'));
    end;
  end;
end; 
```

结尾;

# javascript - 独立项目符号的相对移动 (HTML5/Javascript)

> ID：14419317
> 
> 赞同：1
> 
> 时间：2013-01-19T21:59:56.380
> 
> 标签：javascript, html, canvas, cursor

我需要一些有关此代码的帮助。我正在制作的游戏是一个自上而下的 2d 游戏。我的角色已经可以移动并发射子弹了。我面临的问题是使子弹朝着光标的方向射击。

我已经完成了，但问题是当我射击多发子弹时，所有子弹都会改变方向以朝向我的光标。我认为需要做的是每颗子弹都需要分配它的特定路径，这样当我发射另一颗子弹时它不会改变。子弹已经是一个物体，所以我不知道我做错了什么。

```
Bullet.prototype.draw = function() {
    this.drawX += (mouseX - this.drawX) * 0.01 ;
    this.drawY += (mouseY - this.drawY) * 0.01 ;
    ctxbullet.drawImage(imgSprite, this.srcX, this.srcY, 
        this.width, this.height, this.drawX, this.drawY, 10, 8);
}; 
```

如您所见，每个 Bullet 都遵循此处的规则和逻辑。

另一个问题是子弹不会以恒定的速度移动。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:26:47.330

看起来您在该函数中使用的 mouseX 和 mouseY 属性是在其他地方定义的。这意味着随着该变量在此函数之外更新，您用于更新 drawX 和 drawY 的数字也将发生变化。

您需要做的是在创建时跟踪 mouseX 和 mouseY 的本地副本。我不知道您的其余代码是什么样的，但我会猜测一下。

```
function Bullet(x, y) {
    this.srcX = x;
    this.srcY = y;
    // keep track of original mouse coordinates
    this.mouseX = mouseX;
    this.mouseY = mouseY;
}

Bullet.prototype.draw = function() {
    this.drawX += (this.mouseX - this.drawX) * 0.01;
    this.drawY += (this.mouseY - this.drawY) * 0.01;
    ctxbullet.drawImage(
        imgSprite,
        this.srcX,  this.srcY,
        this.width, this.height,
        this.drawX, this.drawY,
        10, 8
    );
}; 
```

这将确保子弹在创建时始终朝着鼠标坐标移动，但您很快就会遇到另一个问题。由于速度与子弹距离这些鼠标坐标的距离有关（这就是您遇到速度不一致的原因），子弹会减慢到鼠标坐标处停止。

您需要做的是以所需的速度创建一个从 src 点到鼠标点的向量。这将允许子弹跟随那个向量直到无穷大（但你知道，实际上并不是无穷大，希望你一旦超出边界就将其移除）。

```
function Bullet(x, y) {
    var dX = mouseX - x,
        dY = mouseY - y,
        dist = Math.sqrt(dX * dX + dY * dY)
    ;
    // we want our deltas to be proportions of the total distance
    this.dX = dX / dist;
    this.dY = dY / dist;
    this.speed = 5; // arbitrary number
}

Bullet.prototype.draw = function() {
    // I didn't test this, but I think it works
    this.drawX += this.dX * this.speed;
    this.drawY += this.dY * this.speed;
    ctxbullet.drawImage(
        imgSprite,
        this.srcX,  this.srcY,
        this.width, this.height,
        this.drawX, this.drawY,
        10, 8
    );
} 
```

# mysql - 不是那么简单的 SQL 查询

> ID：14419319
> 
> 赞同：7
> 
> 时间：2013-01-19T22:00:05.507
> 
> 标签：mysql, sql, join

所以我得到了任务，即使在谷歌的帮助下，我仍然无法解决一些问题。也许有人可以提出一些解决方案（是否必须使用 JOINS 来完成？等等）。

这是数据库：

```
CREATE TABLE Foto (
    ID int PRIMARY KEY,
    FileName varchar(100),
    FileSize int,
    Created int
) DEFAULT CHARSET=utf8;

CREATE TABLE Users (
    LoginName varchar(10) PRIMARY KEY,
    Surname varchar(20),
    Name varchar(20),
    Created date,
    LastLoginDate date
) DEFAULT CHARSET=utf8;

CREATE TABLE Scoring (
    ID int,
    LoginName varchar(10),
    Score int,
    ScoreDate date,
    FOREIGN KEY (LoginName) REFERENCES Users(LoginName),
    FOREIGN KEY (ID) REFERENCES Foto(ID),
    PRIMARY KEY(ID, LoginName)
) DEFAULT CHARSET=utf8; 
```

“照片”（照片）和用户表应该很清楚。“评分”表适用于对照片进行评分的用户。每个用户只能对每张照片进行一次评分。任务是：

1.  编写查询，返回所有 AVG 分数高于 9 的照片的照片 ID、文件名和 AVG(Score)，并创建可提高此查询性能的索引。

2.  编写将返回“LoginName”、“Name”、“Surname”和用户对他为特定用户（例如，名为“John”的用户）评分的照片给出的 AVG 分数的查询。创建可以提高此查询性能的索引。

我正在使用 MySQL 5.5.16，我对第一个查询的想法是这样的：

```
SELECT F.ID, F.FileName, AVG(SC.Score)
FROM Foto F, scoring SC
WHERE F.ID = SC.ID
AND AVG(SC.Score) > 9
GROUP BY SC.ID; 
```

它返回“#1111 - 组函数的无效使用”，我从来没有真正喜欢聚合函数：D

总的来说，我意识到我很擅长 SQL，我想训练更多地编写查询，但是我在互联网上找到的大多数教程都有非常简单的示例，对解决这些问题没有多大帮助。也许你们中的一些人可以向我建议一个资源，该资源将具有更复杂、准备好的数据库和任务（如果我遇到困难，也有答案）来编写查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:09:27.760

可能有帮助的一件事是学习使用显式 JOIN 语法（使用`ON`子句）而不是老式的隐式语法（使用`WHERE`子句）。这应该有助于让您将来更清楚地了解情况。

您的错误是您需要使用`HAVING`子句对聚合函数的结果进行子集化。您不能在`WHERE`子句中使用聚合函数。

所以，试试这个：

```
SELECT F.ID
     , F.FileName
     , AVG(SC.Score)
FROM   Foto F
JOIN   scoring SC
ON     F.ID = SC.ID
GROUP BY F.ID, F.FileName 
HAVING AVG(SC.Score) > 9 
```

祝你好运！

编辑：了解任何数据库的最佳地点是您正在使用的特定数据库的文档页面。在你的情况下，[看这里](http://dev.mysql.com/doc/refman/5.5/en/index.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T22:13:17.607

> WHERE 子句用于比较基表中的值，而 HAVING 子句可用于过滤查询结果集中聚合函数的结果。
> 
> HAVING 子句被添加到 SQL 中，因为 WHERE 关键字不能与聚合函数一起使用。

(1) 您必须添加`HAVING`到您的查询中。

```
SELECT F.ID, F.FileName, AVG(SC.Score)
FROM   Foto F INNER JOIN scoring S ON F.ID = S.ID
GROUP BY F.ID, F.FileName 
HAVING AVG(S.Score) > 9 
```

(2)

```
SELECT U.LoginName, U.Name, U.Surname, AVG(S.Score)
FROM Scoring S INNER JOIN Users U ON S.LoginName = U.LoginName
GROUP BY S.LoginName 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!8/8361c/6)

希望这个答案能给你下次考试更好的背景:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:03:58.310

选择中的所有内容都必须在 GROUP BY 或聚合函数中。

```
SELECT F.ID, F.FileName, AVG(SC.Score)
FROM Foto F
INNER JOIN scoring SC
ON F.ID = SC.ID
GROUP BY F.ID, F.FileName 
HAVING AVG(SC.Score) > 9 
```

您将要加入或搜索的任何列都可以从索引中受益。

# c# - 两个 listViews 绑定一个数据源，两个过滤器 - 第二个覆盖第一个......为什么？

> ID：14419323
> 
> 赞同：2
> 
> 时间：2013-01-19T22:00:31.437
> 
> 标签：c#, wpf

我正在努力解决可以这样概括的 WPF 问题：

1.  有两个 ListView

    ```
    <ListView x:Name="listView1"></ListView>
    <ListView x:Name="listView2"></ListView> 
    ```

2.  在代码隐藏中为它们创建了过滤器：

    ```
    var listViewCollection1 = (ListCollectionView)CollectionViewSource.GetDefaultView(Items);
    listViewCollection1.Filter = item => (item as string).Length == 5;
    listView1.ItemsSource = listViewCollection1;

    var listViewCollection2 = (ListCollectionView)CollectionViewSource.GetDefaultView(Items);
    listViewCollection2.Filter = item => (item as string).Length == 3;
    listView2.ItemsSource = listViewCollection2;

    public ObservableCollection<string> items = new ObservableCollection<string>()
                                                    {
                                                        "John",
                                                        "Jan",
                                                        "Lanny",
                                                        "Carol",
                                                        "Hug",
                                                    };

    public ObservableCollection<string> Items
    {
        get
        {
            return items;
        }
        private set
        {
            items = value;
        }
    } 
    ```

3.  第二个过滤器覆盖第一个过滤器，以下项目显示在两个列表视图中：

    *   简
    *   拥抱
4.  谁能告诉我，怎么了？如何正确实例化绑定到一个数据源、具有两个不同过滤器的两个 listView？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:08:46.157

两个`ListView`s 本质上都绑定到同一个集合的同一个视图，你设置一次过滤器然后覆盖它。

请记住，当您获得对对象的引用时，您不会创建它的*副本*，而是*引用*它。仅仅因为该引用的名称不同并不会使其不同。

您可以通过运行调试器并中断第二个过滤器来发现这一点，您会注意到在该行运行之前，过滤器设置为长度为 5 的 lambda 过滤，然后您将其*更改*为长度为 3 .

要实现您想要的，您需要创建另一个`CollectionViewSource`，并将其`Source`设置为原始列表。

```
var listViewCollection1 = (ListCollectionView)CollectionViewSource.GetDefaultView(Items);
listViewCollection1.Filter = item => (item as string).Length == 5;
listView1.ItemsSource = listViewCollection1;

var newView = new CollectionViewSource() { Source = Items };
var listViewCollection2 = (ListCollectionView)newView.View; // Here the View must be used
listViewCollection2.Filter = item => (item as string).Length == 3;
listView2.ItemsSource = listViewCollection2; 
```

*（注：未经测试，但原理应该是健全的）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:08:35.567

它们指的是同一个视图对象。[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.getdefaultview.aspx)

# c - 使用 gcc 编译的代码不会在 Visual Studio 2012 中编译

> ID：14419326
> 
> 赞同：1
> 
> 时间：2013-01-19T22:00:47.407
> 
> 标签：c, visual-studio-2012

我对过程编程非常陌生，所以我不确定我的代码是否不好，或者我在 Visual Studio 中是否做错了什么。

所以我有这段代码应该打印一个整数，打印它在内存中的位置，通过内存更改它的值，然后打印新的整数以及它在内存中的位置。

它可以通过带有 gcc 的 cmd 编译并运行良好，但在 Visual Studio 中则不行。

```
#include <stdio.h>

int main(){
    int a = 4;
    printf("Integer is: %d\n", a);
    printf("Integer is stored at: %p in memory\n", a);
    int *pointer = &a;
    *pointer = 3;
    printf("Integer is now: %d at %p in memory\n",a,*pointer);
    getchar();
    return 0;
} 
```

当我尝试编译和运行时，Visual Studio 给了我这些错误：

> 第 9 行：错误 C2065：“指针”：未声明的标识符
> 
> 第 9 行：错误 C2100：非法间接
> 
> 第 11 行：错误 C2065：“指针”：未声明的标识符
> 
> 第 11 行：错误 C2100：非法间接

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T22:07:39.547

Visual Studio C 编译器不支持 C99，尤其是能够在块中的任何位置声明变量。GCC 支持 C 语言的多个版本。IIRC，将 -std=c89 作为标志传递给 gcc 也会标记这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T09:34:33.883

我认为你应该首先在函数顶部声明变量，当你打印内存地址时，`%p`你应该给出要打印的变量的地址

尝试这个

```
int main()
{
    int a = 4;
    int *pointer=&a;
    printf("Integer is: %d\n", a);
    printf("Integer is stored at: %p in memory\n",&a);
    *pointer = 3;
    printf("Integer is now: %d at %p in memory\n",a,pointer);
    getchar();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:07:58.267

`printf("Integer is stored at: %p in memory\n", a);` 您需要采取的地址`a`如`&a`。

`printf("Integer is now: %d at %p in memory\n",a,*pointer);` 您无需取消引用`pointer`即可获取地址。使用`pointer`，而不是`*pointer`

如果您使用 C89（我认为）或更旧的编译器进行编译，则必须将指针的声明移到块的顶部。您不能在旧 C 的代码中间声明变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T22:29:03.617

使用 VS2012 / C 你需要添加块才能做你想做的事，不幸的是编译器不支持中间的声明

```
int main(){
    int a = 4;
    printf("Integer is: %d\n", a);
    printf("Integer is stored at: %p in memory\n", a);
    {
      int *pointer = &a;
      *pointer = 3;
      printf("Integer is now: %d at %p in memory\n",a,*pointer);
    }
    getchar();
    return 0;
} 
```

`/TP`或者，您可以通过指定文件上的开关来强制将 .c 文件编译为 .cpp文件。

# android - Android googlemaps v2 完成加载事件或回调

> ID：14419334
> 
> 赞同：2
> 
> 时间：2013-01-19T22:01:35.993
> 
> 标签：android, events, callback, loading, google-maps-android-api-2

我想在谷歌地图加载后做点什么（地图块已经被填满）有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T02:44:29.543

正如[qubz](https://stackoverflow.com/users/496625/qubz)所指出的，ViewTreeObserver 可用于在地图加载完成后实现回调，因此用户将在启动后立即获得例如正确的位置：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // This is a small hack to enable a onMapLoadingCompleted-functionality to the user.
    final View mapView = getSupportFragmentManager().findFragmentById(R.id.google_map_fragment).getView();
    if (mapView.getViewTreeObserver().isAlive()) {
        mapView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @SuppressWarnings("deprecation")
            // We use the new method when supported
            @SuppressLint("NewApi")
            // We check which build version we are using.
            @Override
            public void onGlobalLayout() {
                if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
                    mapView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                } else {
                    mapView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                }
                // Send notification that map-loading has completed.
                onMapFinishedLoading();
            }
        });
    }
}

protected void onMapFinishedLoading() {
    // Do whatever you want to do. Map has completed loading at this point.
    Log.i(TAG, "Map finished loading.");
    GoogleMap mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.google_map_fragment))
                    .getMap();
    mMap.moveCamera(CameraUpdateFactory.zoomIn());
} 
```

# css - 一页 CSS 打印预览

> ID：14419335
> 
> 赞同：0
> 
> 时间：2013-01-19T22:01:53.030
> 
> 标签：css

我使用这个 CSS 代码来创建一个像 A4 大小的纸一样的页面

```
.box { width:700px; 
height:700px;
padding:30px;
border:1px solid black;
margin:1px;
display:table; } 
```

我的问题是：

当我打印预览时，即使我将打印机的设置设置为缩小和适合，它仍然会产生 2 页，我应该制作什么脚本，这样我才能将宽度和长度固定为与 A4 尺寸的纸张相同，我看到了那里的一些文章没有等于 A4 大小的特定像素。但后来我只想输出 1 页。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:17:36.917

您还可以在 CSS 中使用厘米作为大小值以及像素。

```
height: 20cm; 
```

希望这能解决您的问题。

# vim - macvim c++ 语法高亮不匹配 .vimrc

> ID：14419339
> 
> 赞同：0
> 
> 时间：2013-01-19T22:02:13.670
> 
> 标签：vim, macvim

我在 os x 10.8.2 上使用 macvim 7.3 快照 66

我的 ~/.vimrc 中有以下内容（没有 ~/.gvimrc 文件）

```
syntax on
hi Comment guifg=darkred gui=none
hi PreProc guifg=darkgoldenrod
hi Type guifg=darkgreen gui=none
hi Constant guifg=darkmagenta
hi Statement guifg=darkblue gui=none 
```

但是，当我使用 mvim 编辑 h/cpp 文件时，注释是蓝色的，其他颜色也与我的设置不匹配？可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:14:39.640

您可以执行`:scriptnames`以查看 Vim 为当前缓冲区提供了哪些脚本以及以什么顺序（最近在底部）。您还可以`:verbose highlight Comment`用来检查特定突出显示组的最后设置位置。

除非您使用不同的配色方案，否则您可能会在`:scriptnames`to be的输出中找到最后一行之一`$VIMRUNTIME/colors/macvim.vim`，这是 MacVim 的默认配色方案。配色方案，包括默认配色方案，将取代`.vimrc`并覆盖其中的任何设置。

如果您对当前的配色方案完全不满意，请尝试寻找另一个配色方案。如果您通常对此感到满意，但您想修改特定文件类型的突出显示，请考虑使用该`~/.vim/after/syntax`目录。有关[`:help mysyntaxfile-add`](http://vimdoc.sourceforge.net/htmldoc/syntax.html#mysyntaxfile-add)更多信息，请参阅。

# c - 在 C 中：在指向函数时使用 void 和 int 关键字

> ID：14419342
> 
> 赞同：1
> 
> 时间：2013-01-19T22:02:25.800
> 
> 标签：c

我正在尝试做一个函数由指​​针指向的程序。它如下： -

这是第一个使用“void”返回类型的程序。

```
#include<stdio.h>
#include<conio.h>
void CharPrint(char *ptr);
main()
{
    char *str="Hello World";
    void (*ptr1)(char *ptr);
    ptr1=CharPrint;
    if((*ptr1)(str))
        printf("Done");
    return 0;
}
void CharPrint(char *ptr)
{
    printf("%s\n",ptr);
} 
```

它会引发许多错误。他们是：-

![在此处输入图像描述](../Images/a1ed00869b5aac6283a43a40b83202dc.png)

第二个程序如下：-

```
#include<stdio.h>
#include<conio.h>
int CharPrint(char *ptr);
main()
{
    char *str="Hello World";
    int (*ptr1)(char *ptr);
    ptr1=CharPrint;
    if((*ptr1)(str))
        printf("Done");
    return 0;
}
int CharPrint(char *ptr)
{
    printf("%s\n",ptr);
    return 0;
} 
```

该程序运行没有任何问题。

输出是： -

![在此处输入图像描述](../Images/ca8c6cb89bf44989b3d819c2bbd7cd9e.png)

我的问题是，在第一个输出中，为什么它在第 9 行显示“Not an allowed type in function main”。其他行也引起了疑问，但这一行最困扰我。有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T22:05:16.313

您的第一个函数不返回任何内容。因此，您无法测试 `if((*ptr1)(str))`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T22:05:52.137

```
void (*ptr1)(char *ptr);
ptr1=CharPrint;
if((*ptr1)(str))
    printf("Done"); 
```

`if`如果返回值为，测试什么`void`？只需将最后两行更改为：

```
((*ptr1)(str)); 
```

# java - 使用snakeyaml 将此文件解析为对象的简单方法是什么？

> ID：14419345
> 
> 赞同：0
> 
> 时间：2013-01-19T22:02:56.353
> 
> 标签：java, parsing, file-io, snakeyaml

假设我有一个需要传递的格式如下的文件

```
Name: XYZ
 SSN: 123

Name: ABC
 SSN: 456 
```

假设我已经创建了以下类

```
Class Data{
 String name;
 int ssn;
 } 
```

现在我需要解析上面的文件，并且对于每个条目，我需要创建一个数据类型的对象。如何在 Java 中使用snakeyaml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T23:44:19.913

长话短说，我无法让它与 SnakeYaml 一起使用，但我可以让它与 YamlBeans 一起使用。这是 YAML 文档的样子（在修复了我之前回答的错误之后）：

```
-
  name: XYZ
  ssn: 123
-
  name: ABC
  ssn: 456 
```

这是来源：

```
import java.io.FileNotFoundException;
import java.io.FileReader;

import com.esotericsoftware.yamlbeans.YamlException;
import com.esotericsoftware.yamlbeans.YamlReader;

public class ArraySpike
{
    public static void main(String[] args) throws FileNotFoundException, YamlException
    {
        System.out.println("Parsing " + args[0] + " ...\n");

        YamlReader reader = new YamlReader(new FileReader(args[0]));

        Data[] dArray = reader.read(Data[].class);

        for (Data d: dArray)
        {
            System.out.println("name: " + d.name);
            System.out.println("ssn: " + d.ssn + "\n");
        }

    }
} 
```

根据我之前的评论，我将“数据”类更改为适当的 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:49:40.577

我自己是 YAML 和 SnakeYaml 的新手，但我注意到的第一件事是您的“类”类不是 Java Bean。您需要为“name”和“ssn”创建 getter 和 setter。我注意到的第二件事是您的班级成员的姓名和您的 YAML 文档中的信息不一致（“姓名”与“姓名”，“SSN”与“ssn”）。最后，YAML 文档中“SSN”之前的空格会导致问题。

# c# - Observable 读取流直到它结束或出现错误

> ID：14419349
> 
> 赞同：2
> 
> 时间：2013-01-19T22:03:36.033
> 
> 标签：c#, system.reactive

使用响应式扩展，我如何创建一个 Observable，它将持续调用流上的 Read 方法并将结果传播给它的观察者？

或者这是完全错误的处理方式？我应该实现自己的 IObservable 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:40:10.617

我从来没有遇到过实现我自己的 observable 有意义的情况。

试试这个：

```
public static IObservable<byte[]> ObservableRead(Stream stream, int bufferSize)
{
    return Observable.Create<byte[]>(o =>
    {
        var buffer = new byte[bufferSize];
        var read = 0;
        try
        {
            while (true)
            {
                read = stream.Read(buffer, 0, buffer.Length);
                if (read == 0)
                {
                    break;
                }
                var results = buffer.Take(read).ToArray();
                //Always return a copy
                //never the buffer for concurrency's sake.
                o.OnNext(results);
            }
        }
        catch (Exception ex)
        {
            o.OnError(ex);
        }
        finally
        {
            o.OnCompleted();
        }
        return Disposable.Empty;
    });
} 
```

# android - 使用 findViewById 时 WebView 不显示任何内容

> ID：14419352
> 
> 赞同：0
> 
> 时间：2013-01-19T22:03:53.243
> 
> 标签：android, android-webview

我的 WebView 没有显示任何内容。它只是空的。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

  <!--   <LinearLayout
        android:id="@+id/tableRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/buttonAccept"
            android:layout_width="0sp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/button_accept" />

        <Button
            android:id="@+id/buttonDeny"
            android:layout_width="0sp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/button_deny" />
    </LinearLayout> -->

</LinearLayout> 
```

这是活动：

```
public class TermsOfUseDialogActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.terms_menu_dialog);

        WebView webview = (WebView) findViewById(R.id.webview);
//      WebView webview = new WebView(this);
//      setContentView(webview);

        String htmlCode = "<html><body>WebView Test<br /><br />New Line Test</body></html>";
        // webview.loadDataWithBaseURL(null, htmlCode, "text/html", "UTF-8", null);

//      webview.clearView();
        webview.loadData(htmlCode, "text/html", "UTF-8");
//      webview.reload();

        // webview.loadUrl("http://www.google.at");
    }
} 
```

如您所见，我注释掉了一些代码。如果这些尝试有效，则没有，除了这部分......

```
WebView webview = new WebView(this);
setContentView(webview); 
```

在这种情况下，我看到了内容，但我不能使用它，因为我也需要使用上面 XML 中显示的按钮。任何想法为什么这不显示任何内容？

（上网权限在AndroidManifest中设置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:20:11.093

我找到了解决方案。布局不正确。使用以下布局，我有一个全屏 Web 视图，下面有 2 个按钮：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

  <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/buttonRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true">

        <Button
            android:id="@+id/buttonAccept"
            android:layout_width="0sp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/button_accept" />

        <Button
            android:id="@+id/buttonDeny"
            android:layout_width="0sp"
            android:layout_height="wrap_content"
            android:text="@string/button_deny"
            android:layout_weight="1" />
  </LinearLayout>

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_above="@+id/buttonRow"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

# ruby-on-rails - Rails 应用程序错误：脚本头过早结束

> ID：14419354
> 
> 赞同：7
> 
> 时间：2013-01-19T22:04:06.783
> 
> 标签：ruby-on-rails, apache, ubuntu-12.04, passenger

我的设置：Ubuntu 12.04 LTS、Apache、Phusion Passenger、最新的 Ruby 和 Rails。

当我访问我的网站时，我收到 500 内部服务器错误。错误日志文件：脚本头过早结束

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-30T13:58:47.837

只是在这里发布以防其他人遇到与我相同的问题。

我遵循[Rails 教程](http://ruby.railstutorial.org/chapters/static-pages)，该教程的一部分是确保`secret_token`动态生成（在链接中列出 3.2）作为`.secret`应用程序根目录中的文件。

问题是应用程序不知何故没有将令牌写入文件，所以我从我的 development 中获取值`.secret`，修改它，并将其保存在服务器上。这使我的应用程序在生产中工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T22:28:51.073

如果您在评论中提到的服务器上不存在为`production`您配置的数据库，那么这可能是您的问题的根源，因为它无法建立数据库连接。`config/database.yml`

从您的应用程序中删除该连接`config/database.yml`并重新启动您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-03T12:22:16.700

行。我在使用 dreamhost VPS 时遇到了完全相同的问题。

我犯了2个错误。首先我没有在生产模式下运行“bundle exec rake db:migrate”，即“bundle exec rake db:migrate RAILS_ENV=production”

但是这个问题仍然不断出现。然后我尝试了 Jesper8 的答案。我运行“rake secret”并将秘密令牌复制到“production:secret_key_base:”前面的 config/secrets.yml 文件中

重新启动我的应用程序，它工作

希望这可以帮助面临类似问题的人

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-18T11:01:11.477

确保您的环境是开发环境：

`RailsEnv development`

添加到虚拟主机配置

# android - 困惑：SQLiteOpenHelper onUpgrade() 的行为如何？并与旧数据库备份的导入一起？

> ID：14419358
> 
> 赞同：27
> 
> 时间：2013-01-19T22:04:36.317
> 
> 标签：android, import, export, sqliteopenhelper

假设我在 SQLiteOpenHelper 中有一个包含 2 列的数据库表 test_table 和相应的创建脚本：

```
DB_VERSION = 1:
public void onCreate(SQLiteDatabase db)
{
db.execSql("CREATE table test_table (COL_A, COL_B);
} 
```

这是在 Play 商店中发布的初始应用程序版本 1。

一段时间后，应用程序和使用的数据库会更新。我猜 SQLiteOpenHelper 类必须像这样调整：

```
DB_VERSION = 2:
public void onCreate(SQLiteDatabase db)
{
db.execSql("CREATE table test_table (COL_A, COL_B, COL_C)");
}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
db.execSql("ALTER TABLE test_table ADD Column COL_C");
} 
```

一段时间后，另一个应用程序更新：

```
DB_VERSION = 3:
public void onCreate(SQLiteDatabase db)
{
db.execSql("CREATE table test_table (COL_A, COL_B, COL_C, COL_D)");
}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
db.execSql("ALTER TABLE test_table ADD Column COL_D");
} 
```

--> 这就是我需要建议的地方。如果用户安装应用程序版本 1，他有列 A 和 B。如果他随后更新到版本 2，onUpgrade 会触发并添加列 C。从头开始安装的新用户通过 create 语句获得 3 列。如果用户随后更新到版本 3，onUpgrade 将再次触发并添加列 D。但是，如果用户安装应用程序版本 1，然后跳过版本 2 的更新并更新版本 3，该怎么办？那么他就会错过

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)

    {
    db.execSql("ALTER TABLE test_table ADD Column COL_C");
    } 
```

部分且仅

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)

    {
    db.execSql("ALTER TABLE test_table ADD Column COL_D");
    } 
```

会被调用，这会导致一个表 test_table(COL_A, COL_B, COL_D)??

处理实时应用程序的数据库升级的正确方法是什么，以便用户不会丢失他的数据？您是否必须在 onUpgrade() 方法中检查所有可能的（旧）版本并根据该版本执行不同的 alter table 语句？

我问是因为在我的应用程序中，用户可以导出和导入数据，这无非是导出：复制整个数据库并导入：将应用程序数据库替换为备份副本数据库。

如果用户拥有应用程序版本 1，导出数据库，升级应用程序（新数据库结构）并导入旧版本 1 备份，会发生什么情况？--> SQLiteOpenHelper 将如何表现？--> 处理数据库升级和导入/导出功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-19T22:36:39.413

> 处理实时应用程序的数据库升级的正确方法是什么，以便用户不会丢失他的数据？您是否必须在 onUpgrade() 方法中检查所有可能的（旧）版本并根据该版本执行不同的 alter table 语句？

总的来说，是的。

一种常见的方法是进行成对升级：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  if (oldVersion<2) {
    // do upgrade from 1 to 2
  }

  if (oldVersion<3) {
    // do upgrade from 2 to 3, which will also cover 1->3,
    // since you just upgraded 1->2
  }

  // and so on
} 
```

例如，这大致相当于 Rails 迁移。

> 如果用户拥有应用程序版本 1，导出数据库，升级应用程序（新数据库结构）并导入旧版本 1 备份，会发生什么情况？--> SQLiteOpenHelper 将如何表现？

如果通过“复制整个数据库”，您的字面意思是 SQLite 数据库文件的完整文件副本，那么当`SQLiteOpenHelper`打开恢复的备份时，数据库将具有旧的模式版本并且将`onUpgrade()`正常通过。

> 处理数据库升级和导入/导出功能的正确方法是什么？

我怀疑答案是：要么通过复制整个文件来进行备份，要么还安排备份和恢复模式版本，你可以通过调用`getVersion()`一个`SQLiteDatabase`对象来获得它。话虽如此，我还没有过多地处理这种情况，并且可能还有更多我没有想到的问题。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-14T12:02:32.987

下面的伪代码显示增量升级

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        switch(oldVersion) {

        case 2:
                //upgrade logic from version 2 to 3
        case 3:
                //upgrade logic from version 3 to 4
        case 4:
                //upgrade logic from version 4 to 5
                break;
        default:
                throw new IllegalStateException(
                "onUpgrade() with unknown oldVersion" + oldVersion));
        }
    } 
```

我的意思是增量升级 - 请注意案例 2 和 3 中缺少的 break 语句

说如果旧版本是2，新版本是4，那么逻辑会将数据库从2升级到3，然后再升级到4

如果旧版本是 3，新版本是 4，它只会运行 3 到 4 的升级逻辑

继续为每个新的数据库版本升级添加新案例，这将进行增量更改

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-02T05:56:25.933

我怀疑你也可以创建一个包含所有你需要的列的新表

`CREATE TABLE new_test_table (COL_A, COL_B, COL_C,COL_D);`

将旧表中的数据复制到新表中

`INSERT INTO new_test_table SELECT * FROM test_table;`

放下旧桌子 `DROP TABLE test_table;`

并重命名新表

`ALTER TABLE new_test_table RENAME TO test_table;`

所以简而言之

```
public void onUpgrade(SQLiteDatabase db,int OldVersion,int NewVersion){
  db.execSQL("CREATE TABLE new_test_table (COL_A, COL_B, COL_C,COL_D);"+
             "INSERT INTO new_test_table SELECT * FROM test_table;"+
             "DROP TABLE test_table;"+
             "ALTER TABLE new_test_table RENAME TO test_table;");"
    } 
```

这样您就不必担心数据丢失或增量更改

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-04T00:18:18.923

我认为回答这个问题为时已晚，但它可能对其他人有所帮助。

```
 DB_VERSION = 1:
        public void onCreate(SQLiteDatabase db)
        {
        db.execSql("CREATE table test_table (COL_A, COL_B, COL_C, COL_D, COL_E");
        }

      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
             switch (oldVersion) {
        case 1:                     db.execSql("ALTER TABLE test_table ADD Column COL_C");
                                    db.execSql("ALTER TABLE test_table ADD Column COL_D");
                                    db.execSql("ALTER TABLE test_table ADD Column COL_E");
                            break;
        case 2:                     db.execSql("ALTER TABLE test_table ADD Column COL_D");
                                    db.execSql("ALTER TABLE test_table ADD Column COL_E");
                            break;
        case 3:                     db.execSql("ALTER TABLE test_table ADD Column COL_E");

                            break;

and so on...
} 
```

如果用户第一次安装应用程序，他将从**onCreate获取所有列**

如果是旧版本的数据库 2，则案例 2 添加列 C 和 D。

如果旧版本的数据库 3 则案例 3 仅添加列 E

这样就不会混淆数据库版本。

# cakephp - CakePHP：使用自定义数组提供 paginate()

> ID：14419366
> 
> 赞同：2
> 
> 时间：2013-01-19T22:05:46.657
> 
> 标签：cakephp, pagination

`paginate()`我想用我自己构建的数组来提供 CakePHP 的函数，如下所示：

```
class SomeController extends AppController {

  var $paginate = array(
          'limit' => 25,
          'order' => array(
                  'Post.title' => 'asc'
          )
  );

  public function index(){

    $theArray = array(
      array(
        'Entity1'=>
          array('id'=>1, 'someField'=>'value1'),
        'SecondEntity'=>
          array('id'=>1, 'fieldTwo'=>'reallyInteresting')
      ),
      array(
        'Entity1'=>
          array('id'=>2, 'someField'=>'value2'),
        'SecondEntity'=>
          array('id'=>2, 'fieldTwo'=>'displayedValue')
      )
    );
    $this->set('data',$this->paginate($theArray));
  }
} 
```

我该怎么做最简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:53:40.737

1.  您的变量 $paginate 和函数 $this->paginate() 的名称相同 - 您需要重命名一个。

2.  不清楚您的订购字段 Post.title - 数据样本中没有这样的字段/表。

3.  给你的小代码示例：

 `````
public function paginate($array, $page = 0) {
  // array_slice() to extract needed portion of data (page)
  // usort() to sort data using comparision function $this->sort()
  return(
    array_slice(
      usort(
        $array,
        array($this, 'sort') // callback to $this->sort()
      ),
      $page*$this->paginate['limit'],
      $this->paginate['limit']
    )
  );
}

public function sort($a, $b) {
  $result = 0;
  foreach($this->paginate['order'] as $key => $order) {
    list($table, $field) = explode('.', $key);
     if($a[$table][$field] == $b[$table][$field])
      continue;
     $result = ($a[$table][$field] < $b[$table][$field] ? -1 : 1) *
      ($order == 'asc' ? 1 : -1);
  }
  return($result);
} 
`````

# ruby-on-rails - amazon_flex_pay 宝石

> ID：14419367
> 
> 赞同：0
> 
> 时间：2013-01-19T22:05:50.447
> 
> 标签：ruby-on-rails

我将 amazon_flex_pay gem 用于我的项目。我的项目基于 Selfstarter - 开源项目。如何通过 api gems 使用令牌选项收费？
在文档中
`AmazonFlexPay.pay('12.99', 'USD', 'STOKEN', 'myrequest3292')`
，什么是 STOKEN？

我放了 token_id 并查看`Sender token is not valid.`
gem 的链接 - [https://github.com/kickstarter/amazon_flex_pay](https://github.com/kickstarter/amazon_flex_pay)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:42:32.460

*免责声明：我还没用过`amazon_flex_pay`；我一直在阅读它。而且我已经有一段时间没有使用 FPS 本身了。*

[gem 文档](http://rdoc.info/gems/amazon_flex_pay/AmazonFlexPay/API#pay-instance_method)链接到 Pay 的API[文档](http://docs.aws.amazon.com/AmazonFPS/latest/FPSAdvancedGuide/Pay.html)，其中更详细地描述了流程。

Pay 方法本身用于实际向某人收费。在您执行此操作之前，您需要获得付款人（发件人）的授权。

为此，您需要使用联合品牌服务 API 将用户发送到（联合品牌）亚马逊页面，他们将在其中确认付款。在 Selfstarter 中，这发生在[`OrdersController#prefill`](https://github.com/lockitron/selfstarter/blob/master/app/controllers/preorder_controller.rb#L10).

如果用户同意，亚马逊将向您的应用程序发送确认信息，包括**发件人令牌**。该 Sender Token 是您从 Sender 转账的授权。在 Selfstarter 中，亚马逊发布到的操作是[`OrdersController#postfill`](https://github.com/lockitron/selfstarter/blob/master/app/controllers/preorder_controller.rb#L36). 大多数实际工作发生在[`Order.postfill!`](https://github.com/lockitron/selfstarter/blob/master/app/models/order.rb#L25). （请注意，`tokenID`参数已保存为`@order.token`。）

获得该令牌后，您可以照常调用`AmazonFlexPay.pay`，提供您收到的令牌代替`'STOKEN'`.

# php - 使用数组语法访问字符串中的字符

> ID：14419371
> 
> 赞同：11
> 
> 时间：2013-01-19T22:06:07.180
> 
> 标签：php, string

假设我们有这段代码`$test = 'text';`。`echo $test[0]`和有什么区别`echo $test{0}`？结果是一样的。

将包含字符串的变量视为字符数组是否是一种好习惯？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-20T10:55:41.880

好的，我将汇总我的评论作为答案：

引用手册

> 出于相同目的，也可以使用大括号访问字符串，如 $str{42}。但是，从 PHP 7 开始不推荐使用此语法。请改用方括号。

此外，尽管没有记录，但 {} 访问器也适用于数组，这使得 $foo{$bar} 和 $foo[$bar] 完全等效。它只是为了方便 Perl 程序员的旧语法。

关于第二个问题，如果将字符串视为字符数组是一种好习惯：是的，如果它对您的任务有用，那就去做吧。在像 C 这样的低级语言中，字符串*是*字符数组，所以这样对待它们是很自然的。

但请记住，PHP 对 unicode 的支持很差。因此，如果您的字符串采用多字节编码（即 UTF-8），这可能无法按预期工作。在这种情况下，最好使用[多字节函数](http://php.net/manual/en/book.mbstring.php "多字节函数")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-18T01:06:21.500

你可以写“你好，我是字符串$string{0}的一个字符”

但是你不能写“你好，我是字符串$string[0]的一个字符”

您必须使用字符串连接符号，例如
"Hello, I am a character of a string" 。$字符串[0]；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-16T09:10:57.063

[https://www.php.net/manual/en/language.types.string.php](https://www.php.net/manual/en/language.types.string.php)

> PHP 7.4 已弃用使用 {} 语法访问字符串文字中的字符。这已在 PHP 8.0 中删除。

所以，**总是**使用方括号`$str[0]`。

# google-chrome-extension - Chrome 扩展端口错误：无法建立连接。接收端不存在

> ID：14419372
> 
> 赞同：2
> 
> 时间：2013-01-19T22:06:21.753
> 
> 标签：google-chrome-extension

我曾尝试浏览此处发布的类似问题，但似乎没有一个有效

清单.json

```
{
    "manifest_version": 2,
    "name" : "A simple Found Text Demo",
    "description" : "Bla",
    "version" : "1.0",
    "background" : {
        "pages" : "background.html"
    },
    "page_action" : {
        "default_icon" : "icon.png"
    },

    "content_scripts" : [{
        "matches" : ["*://*/*"],
        "js" : ["contentscript.js"]
    }]
} 
```

背景.html

```
<html>
 <script>
    chrome.extension.onMessage.addListener(
            function(request, sender, sendResponse){
            alert(request);

    //chrome.pageAction.show(sender.tab.id);
            sendResponse('Found!');
            }
    )
 </script>
</html> 
```

内容脚本.js

```
chrome.extension.sendMessage({"name" : "hola"}, function(res){
     console.log(res); }) 
```

但是我反复得到同样的错误：

```
Port error: Could not establish connection. Receiving end does not exist. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T23:18:09.313

由于事情变成了`manifest 2`，您实际上不再被允许使用内联脚本（例如您`background.html`在`<script>`上面的标签中拥有的内容。请参见[此处](http://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)）。我不确定你的用例，但在大多数情况下是简单的情况（阅读：我做过的东西:)），你实际上不需要填充`background.html`任何东西。相反，您可以直接传入一个`background.js`包含与上面相同的脚本的文件。因此，您可以尝试将您的更改`manifest.json`为：

```
{
    "manifest_version": 2,
    "name" : "A simple Found Text Demo",
    "description" : "Bla",
    "version" : "1.0",
    "background" : {
        "scripts" : ["background.js"]
    },
    "page_action" : {
        "default_icon" : "icon.png"
    },

    "content_scripts" : [{
        "matches" : ["*://*/*"],
        "js" : ["contentscript.js"],
        "run_at": "document_end"
    }]
} 
```

请注意，我们在这里做了两件事 - 更改`pages`为`scripts`inside of`background`并将其指向`["background.js"]`，然后添加`"run_at": "document_end"`到该`content_scripts`部分的末尾。如果忽略，这肯定会导致问题（类似于您现在看到的问题） - 您现在告诉内容脚本在页面加载后运行。如果它立即运行，您将面临后台页面未加载的风险，这意味着它尚未准备好接收消息并为您提供连接错误。下面是`background.js`，它与您之前在`<script>`标签之间的脚本相同：

```
chrome.extension.onMessage.addListener(
        function(request, sender, sendResponse){
        alert(request);

//chrome.pageAction.show(sender.tab.id);
        sendResponse('Found!');
        }
) 
```

# node.js - 在 Heroku 上未加载 Express 自定义模块

> ID：14419374
> 
> 赞同：6
> 
> 时间：2013-01-19T22:06:26.597
> 
> 标签：node.js, heroku, module, express

*请参阅下面的更新*

我用 Express 编写了一个 Node.js 应用程序，在本地运行良好，但是当我在 Heroku 上运行该应用程序时，它给了我以下错误：

```
2013-01-19T21:55:42+00:00 app[web.1]: module.js:340
2013-01-19T21:55:42+00:00 app[web.1]:     throw err;
2013-01-19T21:55:42+00:00 app[web.1]:     ^
2013-01-19T21:55:42+00:00 app[web.1]: Error: Cannot find module './blog/blog'
2013-01-19T21:55:42+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2013-01-19T21:55:42+00:00 app[web.1]:     at Module.require (module.js:362:17)
2013-01-19T21:55:42+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:467:10)
2013-01-19T21:55:42+00:00 app[web.1]:     at require (module.js:378:17)
2013-01-19T21:55:42+00:00 app[web.1]:     at Object.<anonymous> (/app/app.js:15:12)
2013-01-19T21:55:42+00:00 app[web.1]:     at Function.Module._resolveFilename (module.js:338:15)
2013-01-19T21:55:42+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-01-19T21:55:42+00:00 app[web.1]:     at Module.runMain (module.js:492:10)
2013-01-19T21:55:42+00:00 app[web.1]:     at Function.Module._load (module.js:280:25)
2013-01-19T21:55:42+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2013-01-19T21:55:43+00:00 heroku[web.1]: Process exited with status 1
2013-01-19T21:55:43+00:00 heroku[web.1]: State changed from starting to crashed 
```

我不明白为什么它不能在 Heroku 上运行，因为完全相同的代码在本地完美运行。也许这与我如何将代码放在 Heroku 的服务器上有关？以防万一，下面是我的文件系统、我的文件的代码`app.js`以及我要加载的`blog.js`模块：`app.js`

**文件系统：**

![文件系统](../Images/6847111de3fa85594a172e634824a358.png)

**应用程序.js：**

```
//requires and starts up app
var express = require('express');
var app = express();

//db setup
var mongoose = require('mongoose')
  , dbURI = 'localhost/brads-projects';

//configures app for production, connects to MongoHQ databse rather than localhost
app.configure('production', function () {
  dbURI = process.env.MONGOHQ_URL;
});

//requires the various project files
var blog = require('./blog/blog').blog;

//tries to connect to database.
mongoose.connect(dbURI);
//once connection to database is open, then rest of app runs
mongoose.connection.on('open', function () {
  //runs the blog app
  blog(app, express);

  app.listen(process.env.PORT || 5000);
});

//in the event of a connection to database error, the app will not run
mongoose.connection.on('error', console.error.bind(console, 'connection error:')); 
```

**博客.js：**

```
module.exports.blog = function(app, express) {
    //models
    var postmodel = require('./models/post').postmodel
      , usermodel = require('./models/user').usermodel
      , notificationmodel = require('./models/notification').notificationmodel
      , commentmodel = require('./models/comment').commentmodel;

    //controllers
    var indexHandler = require('./controllers/index').index
      , newpostHandler = require('./controllers/newpost').newpost
      , postandidHandler = require('./controllers/postandid').postandid
      , newPostHandler = require('./controllers/newpost').newpost
      , searchHandler = require('./controllers/search').postsearch
      , loginHandler = require('./controllers/login').login
      , logoutHandler = require('./controllers/login').logout
      , dashboardHandler = require('./controllers/dashboard').dashboard
      , registerHandler = require('./controllers/register').register
      , userSettingsHandler = require('./controllers/usersettings').usersettings
      , editpostHandler = require('./controllers/editpost').editpost
      , newCommentHandler = require('./controllers/newcomment').newcomment;

    //misc requires
    var MemStore = require('connect/lib/middleware/session/memory');

    //configures app for general stuff needed such as bodyParser and static file directory
    app.configure(function () {
        app.use(express.bodyParser());
        app.use(express.static(__dirname + '/static'));
        app.use(express.cookieParser('lockirlornie123'));
        app.use(express.session({store: MemStore( {
            reapInterval: 60000 * 10
        })}));
    });

    //requires a user session for access
    function requiresLogin(request, response, next) {
        if (request.session.user) {
            next();
        } else {
            response.redirect('/blog/login');
        }
    };

    //requires user session and admin for access
    function requiresLoginAndAdmin(request, response, next) {
        if (request.session.user && request.session.user.role === 'admin') {
            next();
        } else {
            if (request.session.user) {
                response.redirect('/blog');
            } else {
                response.redirect('/blog/login');
            }
        }
    };

    console.log("loaded");

    var PostModel = new postmodel();
    var Post = PostModel.setupPostSchema();

    var UserModel = new usermodel();
    var User = UserModel.setupUserSchema();

    var NotificationModel = new notificationmodel();
    var Notification = NotificationModel.setupNotificationSchema();
    NotificationModel.clickNotificationHandler(app, Notification);

    var CommentModel = new commentmodel();
    var Comment = CommentModel.setupCommentSchema();

    app.set('views', __dirname + '/views');
    app.set('view engine','jade');

    /*
    var newuser = new User({email: "brad.ross.35@gmail.com", password: UserModel.createHashPass("Brad1234"), role: 'admin', activated: true});
    newuser.save(function (err) {
        if (err) {
            console.log("error saving!");
        } else {
            console.log("successfully created!");
        }
    });
    */

    //get request for the home page that displays the 10 most recent posts
    indexHandler(app, Post, PostModel, NotificationModel.getNotifications, Notification);

    //get request for the unique page for every post
    postandidHandler(app, Post, NotificationModel.getNotifications, Notification, CommentModel.getComments, Comment);

    //post request for the submit url that creates a new post and puts it into the database
    //if a get request is sent to the sumbit page, it redirects users away from the /submit url in order to keep them away and not cause errors.
    newPostHandler(app, Post, requiresLogin, PostModel, NotificationModel.getNotifications, Notification);

    //post request to create a new comment
    newCommentHandler(app, Comment, requiresLogin, CommentModel, NotificationModel.getNotifications, Notification, NotificationModel.createNotification, Post);

    //get request for search page that both displays search results and allows users to create new search queries
    searchHandler(app, Post, NotificationModel.getNotifications, Notification);

    //login page get request and post request
    loginHandler(app, UserModel.authenticate, User);

    //logout page that redirects back to home
    logoutHandler(app);

    //dashboard page for managing posts by user
    //and if user is an admin, adding and deleting users
    dashboardHandler(app, User, Post, requiresLoginAndAdmin, NotificationModel.getNotifications, Notification, Comment);

    //a page for users to register for posting priveleges
    registerHandler(app, User, UserModel, NotificationModel.createNotification, Notification);

    //a page for user settings
    userSettingsHandler(app, User, UserModel, requiresLogin);

    //a page to edit posts
    editpostHandler(app, Post, requiresLogin, NotificationModel.getNotifications, Notification);
}; 
```

**更新：**

多亏了下面的建议，我已经跑去`heroku run bash`找出实际存在的文件，当我执行以下操作时，我发现了一些有趣的信息，即我尝试导入的文件*实际上并不存在*：

```
~ $ cd ./blog
~/blog $ ls
~/blog $ cd ..
~ $ cd ./addressbook
~/addressbook $ ls
~/addressbook $ cd ..
~ $ cd ./views
~/views $ ls
addressbook  blog  index
~/views $ cd ./blog
~/views/blog $ ls
dashboard.jade  index.jade    layout.jade  newpost.jade    register.jade
editpost.jade   index_error.jade  login.jade   postandid.jade  search.jade 
```

看起来我正在做的事情不是在 app/blog 和 app/addressbook 中上传这些文件。有趣和很好的信息。感谢您的建议...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T21:37:54.277

根据您提供的信息，这可能是答案。在 mac 终端中（我假设您正在运行 OSX 的屏幕截图）从 blog.js 文件所在的文件夹中运行此命令。

```
file blog.js -I 
```

这**应该**告诉您该文件的 MIME 类型为“text/plain”，如果返回的 MIME 类型为“text/xc”，那么该文件看起来像是最初在 Linux 上创建的 - 这是您的问题。

简单地解决这个问题：

*   创建一个新文件
*   复制 blog.js 的内容
*   git rm 旧文件
*   重命名新文件
*   获取添加新文件

新文件现在应该具有“text/plain”的 MIME 类型。将更改推送到 Heroku 并进行测试。

如果这不是问题，我的下一步将是运行：

```
heroku run bash 
```

并查看该文件是否存在于您的应用程序期望在 Heroku 上找到它的位置。如果您仍有问题，请发回这些调查的结果。

让我知道！

*参考：[Mac 开发者库：'file' 命令](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/file.1.html)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:13:47.197

奇怪的行为；尝试使用以下方法进行调试：

```
console.log( __dirname ); 
```

确保以下路径正确（指向您的*blog.js*文件）：

```
console.log( __dirname + '/blog/blog.js' ); 
```

然后尝试将其显式传递给`require`: (可能会因`__dirname`返回的内容而异..)

```
var blog = require( __dirname + '/blog/blog' ).blog; 
```

# php - mysql没有读取特殊的utf8（øœå）字符

> ID：14419375
> 
> 赞同：0
> 
> 时间：2013-01-19T22:06:29.070
> 
> 标签：php, mysql, utf-8

从我的数据库中读取后，特殊字符无法正确显示。

我以这种方式连接到我的数据库：

```
$link = mysql_connect($db_host,$db_user,$db_pass) or die('Unable to establish a DB     connection');

mysql_select_db($db_database,$link);
mysql_query("SET names UTF8");

?> 
```

我正在以这种方式读取数据库：

```
$rs = mysql_query("SELECT id, name FROM tags ");
while($row = mysql_fetch_array($rs))
{
    //Read each tag into a span-menu
    echo "<div class=\"span-3\"id=\"".$row['id']."\">"."<a href=\"activities.php?tag_id=".$row['id']."&tag=".$row['name']."\"><h5>".$row['name']."</h5></a></div>\n ";

} 
```

该表包含正确的字符，所以问题是当它们被读取时......

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:10:37.920

很可能是您的 HTML 页面显示了错误的编码，而不是 mysql（或您的查询）。

如果您使用的是 HTML5，请将以下内容添加到`<head>`您的 html 中：

```
<meta charset="utf-8"> 
```

如果您使用的是 HTML4/XHTML，则为：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

您可以查看页面返回的编码并使用浏览器测试不同的编码。在 Chrome 中，单击查看 > 编码。

# php - PHP 没有显示错误

> ID：14419376
> 
> 赞同：1
> 
> 时间：2013-01-19T22:06:30.870
> 
> 标签：php

我在使用新的 Web 服务器时无法看到 PHP 错误。

每次我收到错误消息时都会收到消息“HTTP-Error 500（内部服务器错误）”有什么方法可以启用错误报告吗？`error_reporting(E_ALL);`线路不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:10:15.060

您需要检查与您的 Web 服务器相对应的错误日志。确保您已允许您的 Web 服务器写入日志文件目录的权限。您可以通过检查`error_log`php.ini 文件中的变量来找到日志文件的位置。

请参阅[此处](https://stackoverflow.com/questions/5127838/where-does-php-store-the-error-log)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:25:17.133

设置`error_reporting(-1);`，`ini_set('display_errors', 'On');`这将显示您的错误。还要确保您的`error_log` `php.ini`设置未设置为`syslog`文件名或文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:34:00.217

要让服务器打印 php 错误，可以在代码中使用 ini_set() 方法。好的！

或者，您可以更改 php.ini 配置文件。打开文件并查找`errors and warnings`，在此部分中，您可以配置发生错误时的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T23:37:28.470

您可以尝试使用 htaccess 来激活错误报告。

```
# PHP error handling for development servers
php_flag display_startup_errors on
php_flag display_errors on
php_flag html_errors on
php_flag log_errors on
php_flag ignore_repeated_errors off
php_flag ignore_repeated_source off
php_flag report_memleaks on
php_flag track_errors on
php_value docref_root 0
php_value docref_ext 0
php_value error_log /home/path/public_html/domain/PHP_errors.log
# [see footnote 3] # php_value error_reporting 999999999
php_value error_reporting -1
php_value log_errors_max_len 0

<Files PHP_errors.log>
 Order allow,deny
 Deny from all
 Satisfy All
</Files> 
```

资料来源： http: [//perishablepress.com/advanced-php-error-handling-via-htaccess/](http://perishablepress.com/advanced-php-error-handling-via-htaccess/)

# android - Android 聊天、信使

> ID：14419379
> 
> 赞同：1
> 
> 时间：2013-01-19T22:06:42.333
> 
> 标签：android, listview, chat

我创建了一个只能发送短信并将其保存在数据库中的聊天。我使用 listView 来显示消息。

如何将图像、音频、视频一起发送。如何在一个视图中组合文本图像。创建一个新视图，并概述 onDraw。你有什么想法吗？代码？

# java - Android：适配器内部的静态变量为空

> ID：14419381
> 
> 赞同：2
> 
> 时间：2013-01-19T22:06:55.700
> 
> 标签：java, android, static, android-arrayadapter

我在这里尝试了所有可能的问题，但无法绕过它。

我有一个 java 文件（android 活动），我在其中声明

```
private someAdapter someAdapterObj; 
```

在 onCreate() 内部，我调用构造函数并实例化适配器。

```
this.someAdapterObj= new someAdapter (this,
                       R.layout.item_row,someAdapter.getAllNews()); 
```

在 someAdapter 文件中，我有

```
private static someArrayList; 
```

我在 someAdapter 中也有一个 addtoarraylist()。

现在，我从 mainActivity 中的 onCreate 调用 addtoarraylist()，但在实例化适配器之前。这应该是可能的，因为数组列表是静态的。但是，当我添加到数组列表时，我得到了一个空指针异常。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T23:12:00.993

任何类型为类（不是原始类型）的实例或静态变量默认为`null`. 您需要对其进行初始化 - 例如：

```
private static List<Foo> someArrayList = new ArrayList<Foo>(); 
```

*但是*：

*   `ArrayList`不是线程安全的，所以你需要同步
*   像这样使用静态变量有点代码味道（全局状态）；如果您可以适当地连接组件，通常会更干净，这样您就不需要任何全局状态

# c - c语言中的索引

> ID：14419383
> 
> 赞同：1
> 
> 时间：2013-01-19T22:07:08.103
> 
> 标签：c, arrays, recursion, indexing

我有一个关于查找索引的问题。

假设我在数组中有一个“相对”索引（用 malloc 分配），或者基本上是一个不告诉我我真正在哪里的索引。如何找到“绝对”索引？我正在尝试使用二进制搜索来定位数组中的数字，但我还需要索引，当我使用递归进行操作时，我会丢失实际的索引。

我在想，因为它是一个数组，所以我可以减去大小或其他东西（假设它是一个 ints 数组）来弄清楚我从一开始就做了多少步，但我不太明白。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:12:52.403

假设通过*相对索引*您的意思是数组内的指针，您可以使用指针算术获得它的偏移量：

```
int *array = malloc(100*sizeof(int));
// Let's say you've got a pointer to an array element somehow,
// through your recursive search or in any other way.
// I'll assign it directly for simplicity:
int *ptr = &array[23];
int absIndex = ptr - array; // This equals 23 
```

编译器会`sizeof`为您处理数组元素的划分，因此如果您的数组元素是双精度数、字符、结构或其他任何内容，则减法的结果不会改变。`ptr`但是，和的指针类型`array`需要匹配。

# c# - 在 DMP 上使用 mozilla 1.8.1.18 调用 dll 方法时参数丢失

> ID：14419384
> 
> 赞同：1
> 
> 时间：2013-01-19T22:07:15.637
> 
> 标签：c#, dll, service, parameters, dmp

这是在 Cisco 4400 DMP 升级到 Mozilla 1.8.1.18（固件版本 5.3.5）后出现的问题。

AC# 方法使用命令行 (QueryString) 参数来调用 DLL 中使用此变量作为参数的方法。

这是代码片段：

```
public string Get_Channel_Orientation(int channelId)
{
    ChannelService channelService = new ChannelService();
    return channelService.GetRootOrientation(channelId);        
} 
```

channelId 是一个 QueryString 参数。在浏览器升级之前，它一直正常运行。现在，channelId 值始终为空。如果您放置文字而不是 QueryString 参数，例如：

```
 return channelService.GetRootOrientation(123); 
```

即使使用升级的浏览器，它也能正常工作。

并且即使传递给Service方法时为null，但如果将channelId的值打印到控制台，它是正确的（即它是URL中传递的值）

这种情况似乎是不可能的，因为它是服务器端的，不应该受浏览器版本的影响，但我看不出工作和非工作情况之间的其他区别。

# android - 自定义 Listview 无法正确显示 ImageView

> ID：14419387
> 
> 赞同：0
> 
> 时间：2013-01-19T22:07:33.707
> 
> 标签：android, listview

我创建了一个自定义 ListView，其中包含在 xml 文件中定义的自定义布局。我的 XML 看起来像这样：[http](http://pastebin.com/1TA715MG) : //pastebin.com/1TA715MG 和我的 ListAdapter 像这样：[http ://pastebin.com/kqTWAJE5](http://pastebin.com/kqTWAJE5)

如果我创建一个列表并用产品填充它，则应该在每个项目的左侧显示一个拇指。这适用于 98% 的项目，但有时只有透明图像。如果我现在快速向下和向上滚动，以便不再显示该项目，图像会出现 Ô.o 这种效果在我看来真的很奇怪，是否有可能导致该错误？

# javascript - 不同JS文件之间如何访问函数？

> ID：14419392
> 
> 赞同：0
> 
> 时间：2013-01-19T22:07:51.227
> 
> 标签：javascript, html, scope

我试图通过使用多个专注于某些特定任务的 javascript 文件来分离我的应用程序的逻辑。

JSfiles 中定义的函数需要在文件本身之间进行访问。

我知道调用函数的顺序很重要，定义“全局”与“本地”范围很重要。在以下文件中，文件未包装在函数中，因此我认为它们在全局范围内。

**文件1.js**

```
function addingToDOM(stuff) {
...  
...
} 
```

**文件2.js**

```
// call addingToDOM
addingToDOM(someStuff);
function doOtherTHings() {
...
...
} 
```

**HTML**（文件顺序）

```
<script src="file1.js"></script>
<script src="file2.js"></script> 
```

**错误**
`addingToDOM is not defined`

`file2.js`在 HTML 中调用`file1.js`after 。 我不明白为什么它没有定义。 `file1.js`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:14:11.173

您的 JS 文件应该只定义函数并调用同一个 JS 文件中的函数。如果要从另一个 JS 文件中调用函数，则需要先加载该 JS 文件。我会将所有调用代码（有点像其他语言（如 C）中的“主”函数）放在一个地方，最好放在 html 文档的末尾。毕竟，加载了其他 JS 文件（和标记）。这并不是说您不能从 file2 调用 file1 中的函数，而是它们都应该在您的代码开始运行之前完全加载。

您的设置应该按原样工作，但请确保调用第一个需要运行的函数，而不是从 JS 文件中，而是在 HTML 文档的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:17:22.123

问题看起来像在脚本标签中引用您的 src 属性。在 HTML 中试试这个：

```
<script src="file1.js"></script>
<script src="file2.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:19:23.717

也许你正在寻找类似的东西`require.js`：它让你可以轻松地管理多个 JS 文件之间的依赖关系，通过指定模块的加载顺序等。

[http://requirejs.org/](http://requirejs.org/)

除此之外，建议在生产环境中只包含一个包含所有代码的 JavaScript 文件*（*第 3 方库通常仍然是独立的） - 然后可以缩小此文件，从而使其比多个文件更小、下载速度更快。但这在开发过程中并不重要，您应该意识到这一点。

*编辑：*顺便说一句，`require.js`还提供了一种简单的方法来从所有模块中生成单个缩小文件以进行生产。

# ios - iOS：在模态视图下将视图旋转应用于视图控制器

> ID：14419395
> 
> 赞同：5
> 
> 时间：2013-01-19T22:08:10.557
> 
> 标签：ios, objective-c, ipad, uiviewcontroller, modalviewcontroller

为了显示具有透明背景的视图，我一直在关注[这个问题的解决方案。](https://stackoverflow.com/questions/587681/how-to-use-presentmodalviewcontroller-to-create-a-transparent-view)我遇到的问题是，一旦显示模态视图控制器，底层视图就不再旋转了。

例如，如果`A`是我的视图控制器，那么`B`就是我的模态视图。问题如下。我目前有我的设备纵向并已`A`显示。然后我以模态方式呈现`B`。然后我旋转我的设备，B 随之旋转，但`A`保持原样。

请有人建议如何处理这种旋转，以便底层视图（`A`）也被旋转？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T07:43:56.903

ModalViewController 用于中断当前工作流并显示一组新视图。因此，当您以模态方式呈现时，在这种情况下，您正在呈现 B，当前活动的 Viewcontroller 是 B 而不是 A。

ViewController 是 Model-View-Controller (MVC) 设计模式中的传统控制器对象。他们还负责用户界面、手势识别、事件管理（例如按钮）和视图的对齐。

当您呈现 B 时，当前视图控制器从 A 更改为 B，因此当您尝试旋转时（如果提供了方向支持），B 的视图会因为其视图控制器处于活动状态而受到影响，并且它会响应旋转。通常我们不会注意到这些，因为视图是不透明的。在您的情况下，视图是透明的，我们注意到 A 没有响应旋转。

我在iOS6中尝试了上面的例子（来自你提到的那个）

```
ViewController2 *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"VC2"];
vc.view.backgroundColor = [UIColor clearColor];
self.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentViewController:vc animated:YES completion:nil]; 
```

这里 A 保持纵向模式

当我这样做将第二个视图控制器的视图添加为子视图时，A 更改为横向

```
ViewController2 *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"VC2"];
vc.view.backgroundColor = [UIColor clearColor];
self.view addSubview:vc.view]; 
```

发生这种情况是因为在第二次试验中，活动视图控制器是 A 而不是 B，因为 B 的视图是添加到 A 的子视图。通过 Apples 的文档

*   [关于 ViewController](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)
*   [关于窗口和视图](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/Introduction/Introduction.html)
*   [呈现视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW1)

# android - Android：我有一个 HashMap 数组，如果给定一个 HashMap 条目中的键，如何找到特定的 HashMap 条目？

> ID：14419396
> 
> 赞同：1
> 
> 时间：2013-01-19T22:08:16.687
> 
> 标签：android

我有一个 HashMap 数组，如果给定一个 HashMap 条目中的键，如何找到特定的 HashMap 条目？

例如，我有这个：

```
ArrayList<HashMap<String, String>> bathroomList = new ArrayList<HashMap<String, String>>(); 
```

我还知道我要查找的数组条目之一中的键：

```
String selectedKey = ((TextView) view.findViewById(R.id.key)).getText().toString(); 
```

如何迭代数组以找到它？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:29:04.423

A map is a dictionary. For each key, it has one and only one entry. And there's no point in iterating over a map to find a key, since the whole point af a map is to be able to get the entry for a key in a single method call (O(1) for a HashMap):

```
String value = map.get(selectedKey) 
```

will get you the value associated with `selectedKey` in the map.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:57:33.477

您想要像常规 for 循环这样的东西来遍历 arraylist，然后只检查 null 您不能遍历 hashmap，但是如果您查找一个键并且它不存在，那么它只会返回 null。

```
ArrayList< HashMap< String, Object>> bathroomList; //this must be initialized.
public String getEntry(String key) {
    int count = bathroomList.length(); // this might be size i can never
                                        // remember
    String result = null;

    for (int i = 0; i < count; i++) {
        result = ((String) bathroomList[i].get(key));
        if (result != null) {
            break;
        }
    }
            if(result == null){
            result = "Key Not Found";
            }
     return result;   
} 
```

编辑以映射哈希图。

```
public HashMap<String, String> getData(String key) {
    String[] hashmapKeys = {"key1", "key2", "key3"};
    if(key.equals("key1"){
        return bathroomList[0];
    }
        if(key.equals("key2"){
        return bathroomList[1];
    }
        if(key.equals("key3"){
        return bathroomList[2];
    }

} 
```

我可以建议使用不同的数据结构。如果您已经知道您正在使用键映射事物，那么`ArrayList< HashMap< String, String > >`您可以使用 a而不是`HashMap< String, HashMap<String, String>>`

`HashMap< String, HashMap<String, String>> bathroomList;`

然后让你的数据集使用

`HashMap<String, String>> dataSelected =`浴室列表.get（selectedKey）；`

大多数情况下，当您从列表中选择某些内容时，您将使用数组列表，因为您传入了用户单击的列表的位置。列表中的位置决定了无论如何选择了哪些数据。

# python - 带金字塔的斯普罗克斯的你好世界

> ID：14419400
> 
> 赞同：0
> 
> 时间：2013-01-19T22:08:34.297
> 
> 标签：python, pyramid, sprox

我尝试使用金字塔在[Sprox中构建最简单的形式。](http://sprox.org)

```
# model.py
class Allocation:
    # some fields ...
class SproxForm(AddRecordForm):
    __model__ = Allocation

sprox_form = SproxForm(DBSession) 
```

* * *

```
# views.py
def sprox_form(request):
    return {'f':sprox_form,'kw':{}} 
```

* * *

```
<html>
<body>
<div tal:content="structure f(kw)"/>
</body>
</html> 
```

但它只是打印出[表单教程](http://sprox.org/tutorials/form.html)`{'kw': {}, 'f': }`是使用 TurboGears2 编写的，我无法将其翻译成金字塔，因为我是金字塔新手。

那么有人可以告诉我我做错了什么，或者给我看一个使用金字塔的简短（但完整）的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:14:05.560

那么你的表单被命名`sprox_form`，你的视图被命名`sprox_form`。这种模棱两可是个坏主意。除此之外，假设您的变色龙语法正确，我看不到任何可疑之处。如果您使用的是 mako，那将很简单`${f(kw)}`，尽管`f`我可能会建议使用名称`widget`or `form`，而不是`kw`may `value`or `form_input`。

# python - 调用嵌套在类中的方法

> ID：14419402
> 
> 赞同：1
> 
> 时间：2013-01-19T22:08:40.127
> 
> 标签：python, class, python-2.7, typeerror

我正在使用基于 GNU 操作系统的所有程序（Precise Puppy 5.4）

# 描述

*   首先我创建一个类。
*   在那个类里面我定义了一个方法
*   此方法采用通用命名参数
*   在里面我有一个`if-elif-else`与参数值一起使用的语句
*   该`if`语句确定要返回的字符串

在类之外，我提示传递给变量的用户输入`userinput`。

然后我用`userinput`作为参数调用该方法并将返回值分配给变量 name `variable`。然后我打印`variable`.

# 几点注意事项

首先，我知道还有其他方法可以达到相同的效果。我不使用其中之一的原因是因为我正在进行相当大的文本冒险，并且需要做出大量决策并分配大量变量。

如果我要使用类作为类别和方法作为特定区域来对游戏的不同部分（即：一个名为的类`Player`和名为`stats`、`inventory`、等的方法）进行分类，那么使用代码会容易得多`gold`

`class.function`我知道该错误与我调用 时该类没有返回值的事实有关。但是该方法不在类内部调用，因此无法从类内部的方法返回值，而是在方法外部。

```
class classname () :
    def methodname (value) :
        if value == 1 :
            return "Hello World"
        else :
            return "Goodbye World!"
userinput = raw_input("Enter the number [1]\n")
variable = classname.methodname (userinput)
print (variable) 
```

控制台输出

```
Enter the number [1]        (this is the prompt)
1                           (this is the user input)

(now the error)

Traceback (most recent call last):
    File "filename.py", line 8, in <module>
        variable = (classname.methodname (userinput))
TypeError: unbound method methodname() must be called with
classname instance as first argument (got classobj instance
instead) 
```

这个问题已被解决。这个问题是一个简单的语法问题。这是解决方案的最大固定代码 Props 和用于格式化这篇文章的 Lev Levitsky！^.^

```
class classname () :
    def methodname (self, value) :
        if value == "1" :
            return "Hello World"
        else :
            return "Goodbye World!"
userinput = raw_input("Enter the number [1]\n")
variable = classname().methodname (userinput)
print (variable) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:17:40.953

你快到了。只需在`@staticmethod`前面添加`def methodname(value)`;)

或者，如果您不打算使用静态方法，请尝试更改 methodname 的签名以接受一个额外的参数 self ( `def methodname (self, value) :`) 并确保始终`methodname`从实例调用：`variable = (classname().methodname (userinput))`。

# entity-framework - 是否有等效于 DbContext.Set(type) 的 DataServiceContext.Set(type)

> ID：14419406
> 
> 赞同：4
> 
> 时间：2013-01-19T22:08:46.903
> 
> 标签：entity-framework, wcf-data-services, entity-framework-5, dbcontext, wcf-data-services-client

我最近创建了一个围绕 Entity Framework 的 DbContext 构建的非常强大的 API。我正在使用大量元数据编程并利用这样一个事实，即我可以通过像 DbContext.Set(typeof(Customer)) 这样的调用来获取我的数据。只是，在我的 API 中，我在编译时不知道我将传递给 Set 方法的类型。这与 EntityFramework 一起工作得很好，我想添加另一个层抽象并让它与 EntityFramework 或 DataServiceContext 一起工作。所以，我真的有两个问题。

首先，更具体地说，是否存在等效于 DbContext.Set(type) 方法的 DataServiceContext（即 odata/wcf）？

其次，更一般地说，是否有一个很好的资源可以将 DbContext 提供的 API 与 DataServiceContext 进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:54:55.417

EntityFramework 和 DataServices 客户端 API 不应混用。尽管它们看起来相似，但它们并不相似。DbSet 表示实体集。我不认为 DataServiceContext 中的实体集有很强的契约。相反，实体集的名称作为字符串传递给需要知道这一点的方法（例如查看`DataServiceContext.AddObject()`或`DataServiceContext.CreateQuery()`方法）。从某种意义上说，它使动态编程 DataServiceContext 变得更加容易。另一方面，您仍然需要知道管道的另一端（即服务器）是什么。如上所述，WCF 数据服务和 EntityFramework 是不同的技术（即使它们可以一起工作），它们的 API 虽然相似，但用于不同的目的。因此，比较它们就像比较苹果和橙子一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T18:24:43.597

客户端的 DbContext API 与服务器端的 DbContext 不同。主要目标是暴露数据和模型，这可以做得很好。我认为您可能过度设计了您的应用程序，因为 WCF 数据服务可以提供足够的功能。

这是来自非常擅长实体框架的 Ladislav Mrnka 的链接，他展示了如何使用 WCF 数据服务公开强大的 api。

[使用存储库模式实现 WCF 数据服务](https://stackoverflow.com/questions/6748199/implement-wcf-data-service-using-the-repository-pattern)

# python - 涉及 m2m 和外键的 django 模型帮助

> ID：14419408
> 
> 赞同：0
> 
> 时间：2013-01-19T22:09:01.273
> 
> 标签：python, database, django, models, django-orm

好的，所以这对其他人来说可能真的很容易解决，但我真的很困惑如何解决这个问题。

因此，首先，我有一个模型 A，它具有与特定表具有多对多关系的多个字段。所以例如

```
class A(models.Model):
    field1 = models.ManyToMany('field1Collection')
    field2 = models.ManyToMany(field2Collection')

class field1Collection(models.Model):
    description = models.TextField()

class field2Collection(models.Model):
    description = models.TextFIeld() 
```

无论如何，这就是我想要完成的。我需要编写另一个可以容纳排名系统的模型。例如，我想创建一个我可以定义的记录

我有 x 个等级（例如 3 个）：

1.  field1Collection 对象 3
2.  field2Collection 对象 6
3.  field1Collection 对象 2

所以我基本上希望能够从我的 field1Collection 和 field2Collection 表中选择对象并为其分配排名。我尝试使用外键和 m2m 字段来思考方案，但它们都出错了，因为模型需要“提前”知道我需要引用哪个集合集。这很多有意义吗？谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:04:50.123

您需要 field1Collection 和 filed2Collection 有一个共同的祖先类，您可以使用foreignKey 来引用它。请参阅有关继承的 django 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:05:03.973

`GenericForeignKey`您可以使用关系解决此问题

```
from django.db import models
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic

class RankItem(models.Model):
    rank = models.IntegerField()
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    def __unicode__(self):
        return self.rank 
```

一个普通的 ForeignKey 只能“指向”另一个模型，这意味着如果 RankItem 模型使用 ForeignKey，它就必须选择一个且只有一个模型来存储标签。contenttypes[应用](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericForeignKey)程序提供了一个特殊的字段类型，它可以解决这个问题并允许关系与任何模型

# android - 只为 iPhone Android 编写应用程序

> ID：14419412
> 
> 赞同：-1
> 
> 时间：2013-01-19T22:09:43.250
> 
> 标签：android, jquery, iphone, cordova, jquery-mobile

嗨，我必须为 Android 和 iPhone 开发一个应用程序。我知道为 Android 开发和为 iPhone 开发的语言，但如果我只想为所有平台创建一个应用程序，我该如何使用？我必须创建一个简单的应用程序，其中包含一些从服务器获取的新闻，这个应用程序可以从 iTunes 和 PlayStore 下载，但它是同一个应用程序。我知道有PhoneGap，但我不知道它是否可以做到我想要的。我认为使用 jQuery Mobile 的另一种方式，但是当我完成开发后如何创建应用程序？因为我曾经在我的移动服务器上使用 jQuery Mobile 之类的网站，而不是创建应用程序。我想创建一个 jQueryMobile 应用程序，什么时候用一些程序编译它来创建我的应用程序。我有点困惑，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:16:14.840

您不能为两个平台本地编写一个应用程序。要么您在本地开发，但为每个平台单独开发，或者您使用像 Phonegap 这样的框架。然后用 HTML5 和 JavaScript 编写代码。您仍然需要为每个平台设置一个项目，但您可以为两个项目使用相同的 HTML/JS 文件，然后简单地将它们放入。唯一的例外是：您编写的任何本机代码都需要再次为两个平台编写（例如，所有标准 phonegap 插件都是为每个平台单独编写的，但它们已经存在，因此您不需要编写它们）。

jQuery Mobile 是另外一回事，它是一个用于 Web 开发的框架。您可以使用 jQuery Mobile 开发您在 Phonegap 应用程序中使用的应用程序（我就是这样做的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T22:17:31.800

看看我之前对这个问题的 3 个回答：

1.  框架和一些关于它们的东西：[https ://stackoverflow.com/a/14166593/1848600](https://stackoverflow.com/a/14166593/1848600)
2.  原生应用与混合应用：[https ://stackoverflow.com/a/14069937/1848600](https://stackoverflow.com/a/14069937/1848600)
3.  Phonegap + jQuery Mobile 教程：[https ://stackoverflow.com/a/14375842/1848600](https://stackoverflow.com/a/14375842/1848600)

我希望你能在那里找到你的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T23:39:54.537

另一个框架选项是 Apache Flex 框架。您可以使用它为 Android 和 iOS 创建本机应用程序。它当然能够创建一个简单的新阅读器应用程序。

Apache Flex 刚刚成为顶级 Apache 项目，并且刚刚发布了 4.9.0 版本。

有关更多信息，请参阅： http: [//flex.apache.org](http://flex.apache.org)（或[http://flex.apache.org/v2](http://flex.apache.org/v2)）

如果您确实走上了框架路径，并且无论您选择哪一个，很可能您仍然需要为每个平台进行一些优化。用户期望每个平台上都有不同的 UI 约定。例如 iPhone 导航一般在底部，Android 导航一般在顶部。

# .htaccess - 卡在 htaccess 重写 url

> ID：14419414
> 
> 赞同：1
> 
> 时间：2013-01-19T22:09:57.450
> 
> 标签：.htaccess

我已经坚持了几个星期，我想我现在已经接近了，但我被困在 htcaccess 的语法上。

这就是我想要做的：用户在 site.com 中输入并被重定向到 subdomain.wordpresshost.com；但是地址栏仍然显示site.com（我也想在此之后保留任何内容，例如/blog.html等）

名称服务器已设置完毕，现在我只是在重写 url……这是我想出的最好的代码……它只是不工作

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^subdomain.wordpresshost.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^site.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.site.com$ [NC]
RewriteRule ^(.*)$ http://www.site.com/$1 [L,R=301] 
```

此代码成功将 subdomain.wordpresshost.com 更改为 site.com；但是，它返回一个错误，指出“服务器不可用”或“重定向太多”

我想我的头撞到了键盘上，所以我只是在发出静电噪音，所以我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:12:09.317

最后一个`RewriteCond`是不必要的并且正在创建重定向循环 -`www.site.com`被重写为`www.site.com`......也许你的意思是非 www。无论哪种方式，它都需要被删除。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^subdomain.wordpresshost.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^site.com$ [NC]
RewriteRule ^(.*)$ http://www.site.com/$1 [L,R=301] 
```

# android - 如何在 AsyncTask 中调用 Activity 方法

> ID：14419417
> 
> 赞同：1
> 
> 时间：2013-01-19T22:10:21.453
> 
> 标签：android, android-asynctask, android-activity

我想`Activity`在`onPostExecute`我的`AsyncTask`. 你知道我该怎么做吗？

我想`sendSMS(String phoneNumber, String message)`在`onPostExecute`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:15:20.600

一种方法是传递`Activity`through`PostTask`构造函数的实例，例如：

```
private class PostTask extends AsyncTask<String, Integer, String>
{
    private AsyncBigCalculActivity activity;

    public PostTask(AsyncBigCalculActivity activity)
    {
        this.activity = activity;
    }

    // ...
} 
```

并在创建`PostTask`实例时，传递活动实例：

```
new PostTask(this).execute(); 
```

`sendSMS()`现在您可以从内部调用`PostTask`，例如：

```
activty.sendSMS(...); 
```

* * *

另请注意，如果您`PostTask`在 activty 中将 定义为私有类，则可以调用`sendSMS()`如下：

```
AsyncBigCalculActivity.this.sendSMS(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:14:08.777

像这样向你的 AsyncTask 添加一个构造函数和一个全局变量：

```
AsyncBigCalculActivity mActivity;

public PostTask(AsyncBigCalculActivity a) {
    mActivity = a;
} 
```

然后只需`mActivity.sendSMS("test", "test")`在需要时使用。

但是，您确实应该拥有`sendSMS()`实用程序类中的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:14:39.060

如果你`AsyncTask`是你的内部类，`Activity`那么你应该能够`Activity`从你的`onPostExecute()`. 否则，您可以将 发送`Context`到您的构造函数`AsyncTask`并使用它来调用方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T15:38:54.710

# 写一个回调

您可以使用接口创建回调。这样您就可以在`AsyncTask`任何活动中使用您的。（松耦合代码）

**1) 创建回调**

```
interface MyAsyncTaskCallBack{

   public void doStuff(String arg1,String arg2);

} 
```

**2) 在 AsyncTask 中初始化回调**

```
private class MyTask extends AsyncTask<String, Void, Void>
{
     private MyAsyncTaskCallBackactivity callback;

     public MyTask(MyAsyncTaskCallBackactivity callback)
     {
          this.callback = callback;
     }

     //Call callback.doStuff(....phonenum, ....message); in your postExecute

} 
```

**3）在您的活动中实现回调并覆盖 doStuff() 方法**

```
public YourActivity extends AppCompatActivity implements MyAsyncTaskCallBack{

      // Your Activity code 
      // new MyTask(this).execute("phonenum","msg");    //<--- This is how you run AsyncTask

      private void sendMessage(String num, String msg){

          // send msg logic
      }

     @Override
     public void doStuff(String arg1,String arg2){
         sendMessage(arg1,arg2);  // invoke activity method
     }

} 
```

# actionscript-3 - Actionscript - 加载和播放另一个声音文件

> ID：14419424
> 
> 赞同：1
> 
> 时间：2013-01-19T22:11:12.017
> 
> 标签：actionscript-3, actionscript

我正在播放一个声音文件，我希望 onclick 开始播放另一个文件。

您可以在以下示例中检查函数**PlayAnother() ：**

```
private var TheSound:Sound = new Sound();           
private var mySoundChannel:SoundChannel = new SoundChannel();

private function PlaySound(e:MouseEvent):void
{       
    TheSound.load(new URLRequest("../lib/File1.MP3"));
    mySoundChannel = TheSound.play();
}

private function PlayAnother(e:MouseEvent):void
{           
    mySoundChannel.stop();
    TheSound.load(new URLRequest("../lib/File2.MP3"));          
}

public function Test1():void 
{
    var Viewer:Shape = new Shape();
    Viewer.graphics.lineStyle(0, 0x000000);
    Viewer.graphics.beginFill(0x000000);
    Viewer.graphics.drawRect(0, 0, 1, 10);
    Viewer.graphics.endFill();  
    Viewer.width = 30;
    Viewer.x = 10;

    var Viewer1:Shape = new Shape();
    Viewer1.graphics.lineStyle(0, 0x000000);
    Viewer1.graphics.beginFill(0x000000);
    Viewer1.graphics.drawRect(0, 0, 1, 10);
    Viewer1.graphics.endFill();         
    Viewer1.width = 30;
    Viewer1.x = 50;

    var tileSpot:Sprite = new Sprite();
    var tileSpot1:Sprite = new Sprite();
    tileSpot.addChild(Viewer)
    tileSpot1.addChild(Viewer1)
    addChild(tileSpot);
    addChild(tileSpot1);

    tileSpot.addEventListener(MouseEvent.CLICK, PlaySound);
    tileSpot1.addEventListener(MouseEvent.CLICK, PlayAnother);      
} 
```

但我得到了错误（函数调用顺序不正确，或者之前的调用不成功）。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T01:44:26.707

Flash 正在抱怨，因为您正在将一个新文件加载到已经有数据的 Sound 对象中。（如果您在[此处查看 Sound.load()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#load%28%29)的文档，它会显示“*一旦在 Sound 对象上调用 load()，您就不能稍后将不同的声音文件加载到该 Sound 对象中*”）。

你只需要在加载 File2 之前实例化一个新的 Sound 并`play()`再次运行：

```
private function PlayAnother(e:MouseEvent):void
{           
    mySoundChannel.stop();
    TheSound = new Sound();
    TheSound.load(new URLRequest("../lib/File2.MP3"));      
    mySoundChannel = TheSound.play();    
} 
```

# google-sheets - 谷歌电子表格公式将字符串解析为单元格

> ID：14419428
> 
> 赞同：14
> 
> 时间：2013-01-19T22:11:46.950
> 
> 标签：google-sheets, google-drive-api

使用谷歌电子表格有没有办法将单元格值评估为查找操作中的行？例如，我想评估一个单元格的值并将其用作查找另一个单元格的行，而不是 =D2 来获取 D2 的值。我查看了谷歌电子表格公式文档，但无法找到解决方案。

下面的伪代码说明了我正在尝试做的事情。

```
        A B C D
    1 天
    2 =[B1]2 10
    3 =[B1]3 9
    4 =[B1]4 8

```

鉴于 B1 的值为“D”，我希望单元格 B2、B3 和 B4 分别解析为 10、9 和 8。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-25T09:59:24.250

你可能正在寻找这样的东西：

`=INDIRECT(INDEX(B$1;1;1)&ROW())`

1.  获取 B1 单元格的`INDEX(B$1;1;1)`内容（1;1 是强制性参数，因为您可以为 INDEX 提供范围并表示：*范围内的第一行；范围内的第一列*是**D**
2.  `ROW()`返回当前行号，无论是**2、3**等。
3.  & 连接两个值，所以结果像**"D" & "2"** => **"D2"一样处理**
4.  `INDIRECT(reference)`返回对要为其返回内容的单元格或区域（以文本形式）的引用。

请参阅[https://support.google.com/drive/table/25273?hl=en](https://support.google.com/drive/table/25273?hl=en)

不过，根据最初的问题是什么，可能会有更好的解决方案。以上只是对您问题的直接回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-24T23:01:19.880

考虑到 PsychoFish 关于使用 with 的建议的正确性和`INDEX()`有用`INDIRECT()`性，以及任何一种解决方案对所有问题的有限用处，我认为以下公式在这种特殊情况下也适用：

```
=INDIRECT(B$1&Row()) 
```

# android - 在 Eclipse 中启动 Android SDK 管理器会引发异常

> ID：14419429
> 
> 赞同：1
> 
> 时间：2013-01-19T22:11:51.803
> 
> 标签：android, eclipse, eclipse-plugin, eclipse-adt

当我尝试在 Eclipse（以及控制台）中启动 Android SDK 管理器时，我得到了这个异常

```
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager] Exception in thread "main" java.lang.NoClassDefFoundError: com/android/archquery/Main
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager] Caused by: java.lang.ClassNotFoundException: com.android.archquery.Main
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.security.AccessController.doPrivileged(Native Method)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager] Exception in thread "main" java.lang.NoClassDefFoundError: com/android/archquery/Main
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager] Caused by: java.lang.ClassNotFoundException: com.android.archquery.Main
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.security.AccessController.doPrivileged(Native Method)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
[2013-01-19 22:43:47 - SDK Manager] [SDK Manager]   at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager] Exception in thread "Thread-1" java.lang.NoClassDefFoundError: com/android/sdkmanager/Main
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager] Caused by: java.lang.ClassNotFoundException: com.android.sdkmanager.Main
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager]   at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager]   at java.security.AccessController.doPrivileged(Native Method)
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager]   at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager]   at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager]   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
[2013-01-19 22:43:48 - SDK Manager] [SDK Manager]   at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我不知道是什么原因造成的，但重新安装 Eclipse 和 adt 插件并下载新版本的 SDK 无法解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:56:21.663

好的，现在一切正常（Android SDK 管理器正常启动）。我尝试了什么：我下载了 SDK Tools only 包并尝试通过终端启动 sdk Manager。一切都很好。然后移到我的文件夹中，它不起作用。事实证明，该错误是由文件夹名称中的斜杠引起的。真的很奇怪，很难找到。希望能帮助到你

# php - require_once 没有像我预期的那样工作

> ID：14419434
> 
> 赞同：2
> 
> 时间：2013-01-19T22:12:27.740
> 
> 标签：php, phpunit, require-once

> **可能重复：**
> [require_once 中的相对路径不起作用](https://stackoverflow.com/questions/5371828/relative-path-in-require-once-doesnt-work)

我有一个这样的项目结构：

```
ProjectName/
   src
     test
       TestClass.php
   tests
     TestTestClass.php 
```

当我尝试`require_once '/ProjectName/src/test/TestClass.php';`进入*tests/TestTestClass.php 时*，我从 PHP 中得到一个错误，指出：**没有这样的文件或目录。**

我检查了拼写，我检查了一切。我不能给它完整的`/home/userName/bla/bla`路径，因为我需要把它交给其他人。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:15:23.873

这是预期的行为。执行时`TestTestClass.php`，您的工作目录设置为`ProjectName/tests`.

使用会更好`../src/test/TestClass.php`。

您的路径实际上是绝对的，因此您将直接从 开始工作`/`，这不是您所期望的。如果您`include_path`设置为服务器的根目录，那么您的代码将在没有第一个`/`. 如果您不希望依赖`include_path`或任意级别（使用`..`），您始终可以在您的第一个文件中设置一个环境变量来定义应用程序根目录的完整路径，然后将其用于所有包含。

例如`/ProjectName/index.php`：

```
define('APPPATH', __DIR__); 
```

.. 并在`/ProjectName/tests/TestTestClass.php`：

```
require_once APPPATH . '/src/test/TestClass.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:15:22.847

传递给 require/include/require_once/include_once 的绝对文件路径都从文件系统根目录工作，而不是网络服务器根目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:16:22.920

使用特殊的**DIR**来获取脚本的当前路径，这样您可以更轻松地找到脚本路径：

```
require_once(__DIR__ . '../folder/whatever.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T22:16:39.407

您将从为您的项目创建*路径常量中受益。*[`__FILE__`](http://php.net/manual/en/language.constants.predefined.php)用常数 和很容易做到这一点[`dirname()`](http://php.net/dirname)。

```
define('ROOT_PATH', dirname(__FILE__)); 
```

以上内容可以放在配置文件中，以便在整个项目中包含文件更容易。

```
require_once ROOT_PATH . '/src/test/TestClass.php'; 
```

我还建议研究[autoloader](http://php.net/manual/en/language.oop5.autoload.php)。

# c# - 使用 JQuery 重新加载部分视图

> ID：14419436
> 
> 赞同：2
> 
> 时间：2013-01-19T22:12:44.793
> 
> 标签：c#, jquery, asp.net, asp.net-mvc-3, partial-views

我有一个页面，顶部有一个视频，还有一个可供您选择的视频列表。目前，单击视频列表中的链接将重新加载整个页面。我需要它来仅刷新我在页面顶部包含视频的部分视图。

我在 SO 上看到了几篇文章，展示了如何使用 JQuery 重新加载部分视图，但在我的情况下无法正常工作。我不确定如何传递视频的正确 ID。

控制器：

```
 public ActionResult Videos(int topVideo = 0)
    {
        VideosModel model = new VideosModel();
        model.Videos = StatsVideoService.GetEntityList(new Lookup(TableStatsVideo.IsDeleted, false)).OrderByDescending(x => x.DateCreated).ToList();

        if (topVideo == 0)
            model.TopVideo = model.Videos.First();
        else
        {
            model.TopVideo = model.Videos.Where(x => x.StatsVideoId == topVideo).FirstOrDefault();
            if (model.TopVideo == null)
                model.TopVideo = model.Videos.First();
        }

        return View(model);
    } 
```

看法：

```
@model Project.Models.VideosModel

<section class="videos">
    <div id="top_video">
        @{Html.RenderPartial("StatsVideo", Model.TopVideo);}
    </div>

    <ul>
        @foreach (var item in Model.Videos)
        {
            <li>
                <div class="videoList">
                    <a href ="@Url.Action("Videos", "Home", new { topVideo = item.StatsVideoId })">
                        <img src="@Url.Content("~/Content/img/video-ph.png")" />
                    </a>
                    <p class="videoTitle">@item.Title</p>
                </div>
            </li>
        }
    </ul>
</section> 
```

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:47:26.537

在把我的头撞在墙上几个小时后，我让它工作了！作为对将来查看本文的任何其他人的参考，以下是我如何使它工作的：

我将链接的 onclick 设置为指向一个 javascript 方法，将视频的 id 作为参数传入：

```
 @foreach (var item in Model.Videos)
    {
        <li>
            <div class="videoList">
                <a href ="#" onclick="updateTopVideo(@item.StatsVideoId)">
                    <img src="@Url.Content("~/Content/img/video-ph.png")" />
                </a>
                <p class="videoTitle">@item.Title</p>
            </div>
        </li>
    } 
```

然后我在底部的视图中包含了这个脚本：

```
<script>
    var updateTopVideo = function (itemId) {

        var url = '@Url.Content("~/Home/StatsVideo/")';
        url = url + itemId;
        $.get(url, "", callBack, "html");
    };

    var callBack = function (response) {
        $('#top_video').html(response);
    };
</script> 
```

最后，我向控制器添加了一个方法，该方法将返回屏幕顶部视频所需的部分视图：

```
 public ActionResult StatsVideo(int Id)
    {
        IStatsVideo vid = StatsVideoService.GetEntity(new Lookup(TableStatsVideo.StatsVideoId, Id));
        if (vid == null)
            vid = StatsVideoService.GetEntityList(new Lookup(TableStatsVideo.IsDeleted, false)).OrderByDescending(x => x.DateCreated).FirstOrDefault();

        return PartialView(vid);
    } 
```

这段代码应该很容易理解。基本上，onclick 调用第一个 javascript 方法，然后调用控制器。控制器构建局部视图并返回它。第一个 javascript 方法将其传递给第二个 javascript 方法，该方法将 div“top_video”的 html 设置为返回的部分视图。

如果有任何不合理的地方，或者将来有人遇到问题，请告诉我，我会尽力提供一些帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:24:18.293

我认为这里可能有几个令人困惑和不一致的元素。

首先，您返回的是完整视图而不是部分视图。这会重新加载所有包含的元素，而不仅仅是与您的局部视图相关的部分。

其次，您使用的是 Url.Action，它只生成 url。我建议使用 Ajax.ActionLink，它允许您进行完全 ajax 调用、刷新部分 div 的内容并更新目标 div 元素。

代替：

```
<div class="videoList">
                <a href ="@Url.Action("Videos", "Home", new { topVideo = item.StatsVideoId })">
                    <img src="@Url.Content("~/Content/img/video-ph.png")" />
                </a>
                <p class="videoTitle">@item.Title</p>
            </div> 
```

尝试更现代的解决方案

```
<div class="videoList">
@Ajax.ActionLink(
"Videos", 
"Home", 
"new { topVideo = item.StatsVideoId }, 
new AjaxOptions {  
    HttpMethod = "GET", 
    OnSuccess = "handleSuccess" 
}
)
</div> 
```

通过这种方式，您可以非常具体地指定每个链接要执行的操作，并且可以传递多个参数以及定义回调函数。您还可以在 ajax 选项中使用“UpdateTargetId”将新刷新的局部视图加载到 DOM 元素中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:30:28.640

You can remove the around the image and just store the url generated by the `Url.Action` in a data-href attribute.

Then you can use the jquery load method to load the data:

```
$(".videolist>img").click(function () {
    $("#content").load($(this).data("href"));
}); 
```

I created a fiddle that loads content dynamically here, so you can play with it if you want: [http://jsfiddle.net/bTsLV/1/](http://jsfiddle.net/bTsLV/1/)

# java - 在 java 库的两个不同实现之间轻松切换？

> ID：14419438
> 
> 赞同：2
> 
> 时间：2013-01-19T22:13:04.407
> 
> 标签：java

我目前正在开发一个使用第三方库来管理硬件的项目。

我希望创建一个提供相同界面的替代库，但不是控制实际硬件，而是提供一个漂亮的假 GUI。最好这可以通过更换罐子来完成。

问题是所有第三方代码都在 namespace`edu.edu.wpi.first.wpilibj`中，当然我的库的命名空间会非常不同。

有没有什么方法可以在两个库之间轻松切换实现，在 java 中提供相同的接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:15:59.553

是的，有设计模式可以做到这一点。

您可以查看策略模式。

更好的是，您可以查看[Dependency injection](http://www.firatatagun.com/dependency-injection-inversion-of-control-in-a-nutshell/)。

您可以使用[Google Guice](http://www.javabeat.net/2007/08/introduction-to-google-guice/)作为容器，并根据您的配置，在运行时，您的实现可以在使用 N 个库之间切换。

归根结底，您需要将这些库包装在一些抽象之上。

这是一个例子：

```
interface ISomeOperation{
    void process();
}

class ThatUsesTheWPILIBJ implements ISomeOperation{

    void process(){
      //use library here
    }

}

class ThatUsesYourMock implements ISomeOperation{
    void process(){
      //use your mock here
    }
}

public YourUIClass{

    private ISomeOperation _operatingClass;

    public YourUIClass(ISomeOperation  operatingClass){

        _operatingClass = operatingClass;
    }

    public void render(){
        _operatingClass.process();
    }
} 
```

现在你需要做的就是接线。看看谷歌 guice 配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:24:24.887

是的。[服务加载器](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html "服务加载器")。它允许通过将 jar 放入类路径（或通过某些配置）来切换实现。但它对现有代码没有帮助。（但一旦完成，切换到任何其他实现都很容易。

使用它的库很容易，但如果库不使用它，则很难引入服务加载。您需要创建服务加载包装器。如果另一个库使用原始库，您也需要更改并重新编译它。

另一种方法是将它放在与原始库相同的包中并镜像其公共接口。但这很丑陋。

# web-services - 如何使用 ssl 保护 Web 服务

> ID：14419445
> 
> 赞同：2
> 
> 时间：2013-01-19T22:14:24.137
> 
> 标签：web-services, jakarta-ee, ssl

我使用 Javafx 作为客户端使用 Netbeans 7.3.2 构建 Java EE 应用程序，由 EJB 的 Web 服务提供服务。我想添加 SSL 以保护通过网络与客户端进行的 Web 服务通信。我尝试为 Web 服务添加安全性，但出现以下错误

```
SEVERE: WSS1601: Security Requirements not met - Transport binding configured in policy but incoming message was not SSL enabled 
```

严重：WSITPVD0035：验证入站消息中的安全性时出错。com.sun.xml.wss.impl.XWSSecurityRuntimeException：WSS1601：未满足安全要求 - 在策略中配置了传输绑定，但传入消息未启用 SSL

我已经尝试了所有方法来获取在线教程来帮助我做到这一点，因为我是 Web 服务安全的新手，更不用说为此配置 SSL。

请有人可以帮助我提供一些教程或解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:05:53.947

Web 服务通常是后台的普通 Web 应用程序。所以通常在服务器端启用 SSL 并分配一个 SSL 端口就足够了。例如在 WebLogic 中打开 WebLogic 管理控制台并设置以下内容：

*   Environment/Servers/AdminServer/Configuration/SSL Listen Port 已启用

*   环境/服务器/AdminServer/配置/SSL 监听端口：7004

然后在客户端只需将 http 更改为 https 并将非 SSL 端口更改为 Web 服务 URL 中的 SSL 端口。

# kmdf - 如何从客户端应用程序访问 KMDF 驱动程序

> ID：14419447
> 
> 赞同：0
> 
> 时间：2013-01-19T22:14:29.633
> 
> 标签：kmdf

我编写了一个示例 KMDF 驱动程序。我不知道我是否做对了所有事情，但在 DebugView 实用程序中看到 KMDF 驱动程序打印调试消息 - 当我将此驱动程序添加为新硬件时。它还在设备管理器下显示为“示例设备”。

现在我想编写一个可以调用这个驱动程序的示例客户端——这样我就可以在驱动程序和客户端之间建立连接。我读到我们需要使用“CreateFile”和“DEviceIOControl”等。但我无法开始使用它。

您能否指导我创建示例客户端以访问示例 KMDF 驱动程序？

我的驱动程序 INF 文件如下所示：-

```
 ***My INF FILE****
; myshelldriver.INF
; Windows installation file for installing the myshelldriver driver
; Copyright (c) Microsoft Corporation All rights Reserved
;
; Installation Notes:
;
;     Using Devcon: Type "devcon install myshelldriver.inf myshelldriver" to install
;

[Version]
Signature="$WINDOWS NT$"
Class=Sample
ClassGuid={78A1C341-4539-11d3-B88D-00C04FAD5171}
Provider=%MSFT%
DriverVer=09/24/2012,1.0
CatalogFile=myshell.cat

[DestinationDirs]
DefaultDestDir = 12

[ClassInstall32]
Addreg=SampleClassReg

[SampleClassReg]
HKR,,,0,%ClassName%
HKR,,Icon,,-5

[DiskCopyfiles]
wdfmyshelldriver.sys

[SourceDisksNames]
1=%InstDisk%,

[SourceDisksFiles]
Wdfmyshelldriver.sys=1

[Manufacturer]
%MSFT% = DiskDevice,NTAMD64

; For Win2K
[DiskDevice]
%DiskDevDesc% = DiskInstall, wdfmyshelldriver

; For XP and later
[DiskDevice.NTAMD64]
%DiskDevDesc% = DiskInstall, wdfmyshelldriver

[DiskInstall.NT]
CopyFiles = DiskCopyfiles

;;specify that this is the installation
;;for nt based systems.
[DriverInstall.ntx86]
DriverVer=09/24/2012,1.0
CopyFiles=DriverCopyFiles

[DiskInstall.NT.Services]
AddService = wdfmyshelldriver, %SPSVCINST_ASSOCSERVICE%, DiskServiceInst

[DiskServiceInst]
ServiceType   = %SERVICE_KERNEL_DRIVER%
StartType     = %SERVICE_DEMAND_START%
ErrorControl  = %SERVICE_ERROR_NORMAL%
DisplayName   = %DiskServiceDesc%
ServiceBinary = %12%\Wdfmyshelldriver.sys
AddReg        = DiskAddReg

[DiskAddReg]
HKR, "Parameters", "BreakOnEntry",      %REG_DWORD%, 0x00000000
HKR, "Parameters", "DiskSize",          %REG_DWORD%, 0x00100000
HKR, "Parameters", "DriveLetter",       %REG_SZ%,    "R:"
HKR, "Parameters", "RootDirEntries",    %REG_DWORD%, 0x00000200
HKR, "Parameters", "SectorsPerCluster", %REG_DWORD%, 0x00000002

[Strings]
MSFT            = "Microsoft"
ClassName       = "My Shell Device"
DiskDevDesc     = "WDF My Shell Driver"
DiskServiceDesc = "myshelldriver Driver"
InstDisk        = "myshelldriver Install Disk"
;*******************************************
;Handy macro substitutions (non-localizable)
SPSVCINST_ASSOCSERVICE = 0x00000002
SERVICE_KERNEL_DRIVER  = 1
SERVICE_DEMAND_START   = 3
SERVICE_ERROR_NORMAL   = 1
REG_DWORD              = 0x00010001
REG_SZ                 = 0x00000000

**** END OF INF FILE*** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:38:42.803

WDK 中有很多相关的示例。例如，看看[KMDF Echo 示例](http://code.msdn.microsoft.com/windowshardware/KMDF-Echo-Sample-86c129f4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T05:18:51.470

首先，您需要命名您的对象。其次，您至少需要执行以下操作之一：

1.  在 \GLOBAL??\ 中创建符号链接
2.  注册设备接口。

选项 1 将让您做简单的事

```
CreateFile("\\\\.\\<device_name>, ...); 
```

选项 2，您将需要使用 Setup DI Api 例程来找到您的设备以将其打开。

# android - JPEG 方向功能如何工作？

> ID：14419449
> 
> 赞同：2
> 
> 时间：2013-01-19T22:14:53.303
> 
> 标签：android, image, image-processing, jpeg, android-imageview

我确实有一些图像（[示例](http://i.kb.irrelevant.at/279939a61eec6fb0e51e434c1c6c5a6f.jpg)），根据我使用的软件，它们的显示方式会有所不同。

当我在浏览器中打开图片时，图片从右侧加载到左侧（[与其他从上到下加载的图片相反](http://i.kb.irrelevant.at/305d16d2a5788fe2010ec7cd7b0fdf5c.jpg)）。

**浏览器：**
![图像浏览器](../Images/ec995905154526540ee6400283782a1c.png)

当我在 Android 应用程序（通过`UrlImageViewHelper`）中显示相同的图像时，图像将以 90° 的旋转显示。

**安卓：**
![图像安卓](../Images/30868ee1c04f652dcc069d0b933a181e.png)

“正常”图像（从上向下加载）在我的应用程序中正确显示。

**问题**

1.  浏览器从哪里获得有关图像方向的信息？
2.  如何实现一个知道图像原始方向的 Android ImageView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:29:56.567

试试这个：

将旋转的 jpeg 放入您的 res/drawable 中。设置一个 ImageView 来使用它。走着瞧吧。

UrlImageViewHelper 实际上并不进行特殊的图像加载。它只是像它应该使用的那样使用 BitmapFactory。

这很可能是一个 Android 框架/libjpeg 错误，其中 jpeg 旋转 EXIF 标记未得到尊重。

# javascript - 如何使 Adsense 广告与响应式网站一起使用

> ID：14419450
> 
> 赞同：9
> 
> 时间：2013-01-19T22:14:58.790
> 
> 标签：javascript, jquery, mobile, responsive-design, adsense

我查看了当前的解决方案，这两个帖子已经部分涵盖了这个问题； [使 Adsense 响应](https://stackoverflow.com/questions/9366048/making-adsense-responsive) 并 [在 javascript 中“如果手机”](https://stackoverflow.com/questions/9048253/in-javascript-if-mobile-phone)

我有一个响应式网站，唯一在手机上破坏它的是我页面上的横向谷歌广告，这使得它一开始就突出了额外的空间，因为它比其他所有东西都大。

我正在寻找是否有人有一个可行的解决方案，所以我基本上可以在这个大横幅和更小的移动浏览器格式之间切换，屏幕尺寸更小并且不会破坏我的响应式网站。

我目前的解决方案是缩小屏幕尺寸并在低于某个阈值时显示较小的广告。有没有更好的办法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T05:51:10.537

您可以将此代码用于 AdSense，这并不违反 TOS，因为它不会“即时”更改广告，您只是根据屏幕尺寸投放广告，而不是更改广告本身。

```
<script type="text/javascript">

    var width = window.innerWidth 
        || document.documentElement.clientWidth 
        || document.body.clientWidth;

    google_ad_client = "ca-publisher-id";

    if (width > 800) {
        // Activa el anuncio "Leaderboard" de 728x90 para pantallas anchas
        google_ad_slot = "ad-unit-1"; 
        google_ad_width = 728; 
        google_ad_height = 90;
    } else if ((width <= 800) && (width > 400)) { 
        // Activa el anuncio "Banner" de 468x60 para pantallas pequeñas (móviles) 
        google_ad_slot = "ad-unit-3"; 
        google_ad_width = 468; 
        google_ad_height = 60;
    } else { 
        // Activa el anuncio "Medium Rectangle" de 300x250 para medianas (tablets)
        google_ad_slot = "ad-unit-2"; 
        google_ad_width = 300; 
        google_ad_height = 250;
    }

</script>

<script type="text/javascript"
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

这是 DFP 的一个：

```
var width = window.innerWidth 
    || document.documentElement.clientWidth 
    || document.body.clientWidth;
if (width >= 800) {
    // Activa el anuncio "Leaderboard" de 728x90 para pantallas anchas
    document.write('<div id="div-gpt-ad-1234567891234-1" style="width:728px; height:90px;"">');
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1234567891234-1'); });
    document.write('</div>');

} else if ((width < 800) && (width > 400)) { 
    // Activa el anuncio "Medium Rectangle" de 300x250 para medianas (tablets) 
    document.write('<div id="div-gpt-ad-1234567891234-2" style="width:300px; height:250px;"">');
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1234567891234-2'); });
    document.write('</div>');

} else { 
    // Activa el anuncio "Banner" de 468x60 para pantallas pequeñas (móviles) 
    document.write('<div id="div-gpt-ad-1234567891234-3" style="width:468px; height:60px;"">');
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1234567891234-3'); });
    document.write('</div>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T01:43:47.500

谷歌现在引入了[响应式广告单元](https://support.google.com/adsense/answer/3213689)。您需要生成新的广告代码才能使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-12T03:39:56.183

**我认为这在 2019 年不是必需的，因为Google Adsense**正式推出了太多适合各种屏幕尺寸（响应式）的新广告格式。

但是，当用户从不同的屏幕尺寸浏览时，您可以使用一些 Javascript 代码来确定广告位置或何时显示或隐藏它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T05:42:11.313

此工具顶部有一个免责声明，以确保 Google 对您使用它感到满意，但这将完全符合您的要求。

[http://www.responsiveads.com/responsive-adsense/](http://www.responsiveads.com/responsive-adsense/)

从他们的[博客](http://www.responsiveads.com/getting-google-adsense-to-work-in-responsive-web-designed-sites/)

> Google 很可能会在不久的将来为此提出自己的解决方案，但与此同时，发布商可以使用我们的解决方案使 AdSense 能够在所有屏幕上通过其网站获利！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T22:26:05.800

这是 AdSense 的一个大问题。根据服务条款，您不能以编程方式刷新广告，这意味着如果您的布局在调整大小后需要加载不同的广告，您将无法加载。

话虽如此，Google DFP（支持加载 AdSense 广告）确实有[一个 refresh 方法](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1650154&expand=pubservice_details#refresh)。我已经阅读了所有政策，您似乎可以将此方法用于您自己的广告，但在使用 AdSense 时则不能。

* * *

**编辑：**前几天刚和谷歌打过电话......他们确认在提供 AdSense 时使用 DFP 的刷新功能违反了他们的 AdSense 政策。刷新功能只能与您自己的广告一起使用，否则您可能会失去您的帐户和您赚取的资金。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T14:40:13.937

我已经用简单的css做到了这一点。

如果它不是一个 Flash 对象，你可以让它调整大小。

如果它是 iframe，则使其宽度为 100%

根据加载的广告，它可能会切断一些图像，如果是这种情况，那么您将需要一些 javascript 来测量动画并相应地重新加载添加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-05T11:03:36.320

```
<style>
iframe{width:100%}
</style>
```

并解决了所有问题，我在引导网站和 Adsense 上遇到了这个问题

# java - 使用杰克逊是否可以忽略所有循环关系而无需添加注释？

> ID：14419455
> 
> 赞同：0
> 
> 时间：2013-01-19T22:15:38.587
> 
> 标签：java, json, jackson, json-lib

Jackson 2.0 对循环引用有很好的支持，但是，似乎都需要注释 POJO 类。如果我无法编辑要序列化为 json 的 java 类，但只想忽略循环引用，例如 json lib jsonConfig.setCycleDetectionStrategy(CycleDetectionStrategy.LENIENT)，它基本上会在发生循环引用时忽略循环引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:16:57.523

不。Jackson 不进行全周期检测；仅当注释表明需要时才进行身份检查。

# c - C argv 数据的最大大小是多少

> ID：14419464
> 
> 赞同：10
> 
> 时间：2013-01-19T22:17:00.967
> 
> 标签：c, argv

> **可能重复：**
> [关于主函数的命令行参数](https://stackoverflow.com/questions/7498892/about-command-line-arguments-of-main-function)

我将如何确定可以传递给 C main(int argc, char* argv) 的最大数据大小？标准中是否有一个宏可以定义这个？数据是由主进程“拥有”的（即我的程序是否存储这些数据），还是它以某种方式被操作系统“拥有”，我可以得到一个指向它的指针？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T22:21:28.510

在 POSIX 系统中，有一个值 ，`ARG_MAX`定义[`<limits.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/limits.h.html#tag_13_24) 为最小可接受值`_POSIX_ARG_MAX`（即 4096）。[`sysconf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sysconf.html)您可以通过带有参数的函数在运行时发现该值`SC_ARG_MAX`。

它通常是 256 KiB。

`argv`（指针数组和它们指向的字符串）中的数据由程序“拥有” 。它们可以修改；这是否明智取决于您的观点。`main()`如果不调用未定义的行为，您当然不能超出传递给函数的范围。GNU 等`getopt()`函数在没有在环境中设置 POSIXLY_CORRECT 环境变量的情况下运行时会重新组织参数。您已经有一个指向`argv`提供给的数据的指针`main()`。

根据经验，您经常会发现紧跟在字符串结尾之后的数据`argv[argc-1]`实际上是环境的开始。主程序可以像`int main(int argc, char **argv, char **envp)`在某些系统中那样编写（在 C 标准附件 J，§J.5.1 中被识别为扩展），其中`envp`的值与存储在全局变量 中的值相同`environ`，并且是以空值结尾的开始指向环境字符串的指针数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T22:42:21.963

`ARG_MAX`是新进程的最大参数长度

如果您尝试调用具有太多参数的程序，即很可能与模式匹配有关，您将看到此错误消息：

```
$ command * 
```

只有`exec()`系统调用及其直接变体会产生此错误。它们返回相应的错误条件 E2BIG()。

不应责怪外壳，它只是将这个错误传递给您。事实上，shell 扩展不是问题，因为这里还不需要 exec()。扩展只受虚拟内存系统资源的限制。

因此，以下命令可以顺利运行，因为它们不会将太多参数传递给新进程，而是仅使用 shell 内置（echo）或使用控制结构（for 循环）迭代参数：

```
/dir-with-many-files$ echo * | wc -c
/dir-with-many-files$ for i in * ; do grep ARG_MAX "$i"; done 
```

学习上限有不同的方法

**命令：** getconf ARG_MAX

**系统调用：** sysconf(_SC_ARG_MAX)

**系统标头：**例如 <[sys/]limits.h> 中的 ARG_MAX

与标题对比，`sysconf`并`getconf`告诉实际有效的限制。这与允许在运行时通过重新配置、重新编译（例如 Linux）或通过应用补丁（HP-UX 10）来更改它的系统相关。

的示例用法`sysconf()`：

```
#include <stdio.h>
#include <unistd.h>
int main() {
    return printf("ARG_MAX: %ld\n", sysconf(_SC_ARG_MAX));
} 
```

如果您安装了 cpp，则可以方便地查找标题中的限制：

```
cpp <<EOF
#include <limits.h>
#include <param.h>
#include <params.h>
#include <sys/limits.h>
#include <sys/param.h>
#include <sys/params.h>
arg_max: ARG_MAX
ncargs: NCARGS
EOF 
```

查看`ARG_MAX`/`NCARGS`时，您必须同时考虑`argv[]`and `envp[]`（参数和环境）的空间消耗。因此，您必须至少根据当前可用空间的结果`env|wc -c`和`env|wc -l * 4`对当前可用空间的良好估计来减少 ARG_MAX。

POSIX 建议额外减去 2048，以便进程可以节省地修改其环境。使用 getconf 命令快速估算：

```
 expr `getconf ARG_MAX` - `env|wc -c` - `env|wc -l` \* 4 - 2048 
```

获取当前可用空间的最可靠方法是测试 exec() 是否成功，并增加参数长度，直到它失败。这可能很昂贵，但至少您只需要检查一次，自动考虑 envp[] 的长度，结果是可靠的。

或者，可以使用 GNU [autoconf 检查](http://www.in-ulm.de/~mascheck/various/argmax/autoconf_check.html)“正在检查命令行参数的最大长度...”。它的工作原理非常相似。

但是，出于意图和简单的原因，它导致的值要低得多（它可能只是实际值的四分之一）：

在 n 增加的循环中，检查尝试使用参数长度为 2n 的 exec()（但不会检查 n 是否大于 16，即 512kB）。如果 ARG_MAX 是 2 的幂，则最大值为 ARG_MAX/2。最后，找到的值除以 2（为了安全），原因是“C++ 编译器可以处理大量附加参数”。

**实际值**

在 Linux 2.6.23 上，它是堆栈大小的 1/4。[内核代码](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=b6a2fea39318e43fee84fa7b0b90d68bed92d2ba)供参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:31:04.153

`main()`它接受的内容并不特别。`main()`特殊的是在第一次被调用之前发生的魔法。

你可以`main()`随心所欲地打电话...

```
#include <stdio.h>

char longstring[1024000] = "foo";

int main(int argc, char **argv) {
  char *p = longstring;
  printf("main called with argc == %d", argc);
  if (argv) printf(" and a relevant argv");
  puts("");
  switch (argc) {
    case 1: main(2, NULL); break;
    case 2: main(3, &p); break;
    default: puts("Uff!"); break;
  }
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T22:30:38.420

我可能错了，但我认为 argc 和 argv 属于**libc.so.6**中的**__libc_start_main**[谁调用 main ？](http://linuxgazette.net/issue84/hawk.html)

 **可能会有所帮助:)**

# php - include_once 或 require_once 解决了哪些问题？

> ID：14419478
> 
> 赞同：2
> 
> 时间：2013-01-19T22:19:36.677
> 
> 标签：php, include

来自 php 手册

> include_once 可能有助于避免函数重新定义、变量值重新分配等问题。

好的，所以 include_once 解决了函数重新定义、变量值重新分配等问题，但为什么它们首先会成为问题？

我试图了解重新定义函数或重新分配变量值涉及哪些风险，除了由于额外的输入/输出和处理导致的性能下降？

是因为 php 解析器混淆了要加载/使用哪个版本的函数，还是函数的原始版本在重新定义后丢失了？还有什么以及变量重新分配呢？

我确实知道在哪里使用`include`vs `include_once`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:21:54.450

想象一下以下包含文件`hello.php`：

```
function hello()
{
    return 'Hello World';
}

$a = 0; 
```

现在想象以下文件`index.php`：

```
include 'hello.php';

$a = 1;
hello();

include 'hello.php';

hello();
echo $a; // $a = 0, not 1 
```

您的代码现在将出现致命错误，因为该函数已定义两次。使用`include_once`会避免这种情况，因为它只会包含`hello.php`一次。此外，对于`variable value reassignment`, `$a`（如果代码编译）将被重置为 0。

* * *

*从评论中，请考虑这是一个侧面答案- 如果您**正在*寻找需要多次重置一组变量的东西，我希望使用一个带有类似方法的类`Reset`，您甚至可以将其设为静态如果你不想实例化它，像这样：

```
public class MyVariables
{
    public static $MyVariable = "Hello";
    public static $AnotherVariable = 5;

    public static function Reset()
    {
        self::$MyVariable = "Hello";
        self::$AnotherVariable = 5;
    }
} 
```

用法如：

```
MyVariables::$MyVariable = "Goodbye";
MyVariables::Reset();
echo MyVariables::$MyVariable; // Hello 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:27:36.500

假设您有一个包含脚本 vars.inc.php：

```
<?php

    $firstname = 'Mike';
    $lastname = 'Smith';

?> 
```

然后你有一个脚本 script.php：

```
<?php

    echo "$firstname $lastname"; // no output

    include('vars.inc.php');
    echo "$firstname $lastname"; // Mike Smith

    $firstname = "Tim";
    $lastname = "Young"; 
    echo "$firstname $lastname"; // Tim Young

    include('vars.inc.php');
    echo "$firstname $lastname"; // Mike Smith
?> 
```

发生的情况是，如果您在代码执行中修改 var，然后再次包含定义它们的文件，那么您正在更改它们的内容。include_once 将确保这永远不会发生抛出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:23:08.457

它会阻止您多次加载页面。通常，您将在页面顶部使用它来引入您的 init、函数、类文件等。

如果您在页面内动态加载页面，则特别有用。

# mysql - 使用 mysql 连接器安装 mysql.data.mysqlclient 但没有 bin 文件夹？

> ID：14419482
> 
> 赞同：0
> 
> 时间：2013-01-19T22:19:55.757
> 
> 标签：mysql, vb.net, visual-studio-2010, ado.net, odbc

我想使用 VB.NET 连接到我们的远程 mysql 数据库，但我在安装 .dll 文件时遇到问题。我需要添加 mysql.data.mysqlclient 引用但找不到包含 .dll 文件的 bin 文件夹。我做了很多谷歌和堆栈溢出搜索，但没有偶然发现任何解决方案。

1.  我下载[了mysql连接器](http://dev.mysql.com/downloads/connector/net/6.0.html%20to%20my%20desktop)
2.  解压
3.  打开 Visual Studio 2010 Express 并创建新项目
4.  在解决方案资源管理器下，右键单击以添加参考
5.  然后浏览到解压的mysql连接器文件夹找到bin文件夹

这个 bin 文件夹在任何地方都找不到。我错过了一些东西，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-05-24T14:08:48.347

您必须将 mysql 连接器安装到您的机器上。然后打开您的项目，右键单击，然后单击“添加引用”，在“.NET”选项卡中找到“mysql.data”。

# coffeescript - Collection.update 给出服务器错误

> ID：14419488
> 
> 赞同：3
> 
> 时间：2013-01-19T22:20:34.620
> 
> 标签：coffeescript, meteor

尝试同时学习 Meteor 框架和 coffeescript/node。一直在开发一个使用 onloadend 的简单文件上传程序。当调用 FileReader onloadend 事件函数时，我会尝试确定文件是否已经存在，如果存在，我会使用新的文件数据和版本进行更新。

该代码适用于插入但不适用于更新。有人可以帮忙吗？我已经发布到流星谈话没有答案，因为我怀疑它是周末（当我做我的大部分实验时）。

代码片段...

```
file_reader.onloadend = ((file_event) ->
     (event) ->
        f_filename = escape file_event.name
        version = 0
        f_record = null

        f_record = doc_repo.findOne { name: f_filename }

        if f_record && f_record.name
          doc_repo.update
            name: f_filename
            ,
            $set:
              version: 10
        else
          doc_repo.insert
            name: f_filename
            data: event.target.result
            version: 0
    )(file_obj) 
```

错误

```
Exception while invoking method '/documents/update' TypeError: Cannot read property 'toBSON' of undefined
    at Function.calculateObjectSize (/usr/local/meteor/lib/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:210:12)
    at BSON.calculateObjectSize (/usr/local/meteor/lib/node_modules/mongodb/node_modules/bson/lib/bson/bson.js:1463:15)
    at UpdateCommand.toBinary (/usr/local/meteor/lib/node_modules/mongodb/lib/mongodb/commands/update_command.js:67:20)
    at Connection.write (/usr/local/meteor/lib/node_modules/mongodb/lib/mongodb/connection/connection.js:138:40)
    at __executeInsertCommand (/usr/local/meteor/lib/node_modules/mongodb/lib/mongodb/db.js:1837:14)
    at Db._executeInsertCommand (/usr/local/meteor/lib/node_modules/mongodb/lib/mongodb/db.js:1912:7)
    at Collection.update (/usr/local/meteor/lib/node_modules/mongodb/lib/mongodb/collection.js:445:13)
    at app/packages/mongo-livedata/mongo_driver.js:178:16
    at Db.collection (/usr/local/meteor/lib/node_modules/mongodb/lib/mongodb/db.js:507:44)
    at _Mongo._withCollection (app/packages/mongo-livedata/mongo_driver.js:51:13) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:58:28.117

看起来 Mongo 没有获得它需要进行更新的第二个参数。因此，在常规 JavaScript 中，它期望这样：

```
collection.update({..selector..}, { .. modifier }); 
```

所以我会尝试在修饰符对象周围放置一些大括号，如下所示：

```
doc_repo.update
  name: f_filename,
  {
    $set:
      version: 10
  } 
```

# android - Run 中的 while 循环停止执行

> ID：14419489
> 
> 赞同：0
> 
> 时间：2013-01-19T22:20:38.853
> 
> 标签：android

我的程序在活动运行代码中的 While 循环中运行。它每 100 毫秒左右读取一次 USB 数据。当该 USB 数据流中的一个字节设置时，我称之为 startVoiceRecognitionActivity()：

```
private void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
        startActivityForResult(intent, REQUEST_CODE);       
} 
```

语音识别器运行良好，我的 USB 数据流 While 循环在语音识别器执行操作时继续运行。

但是，在 onActivityResult 执行后，我的 While 循环被终止。我需要留在这个while循环中，我该怎么做？

编辑：我一直在调试它，并将显示相关的当前代码。似乎 onActivityReturn 在程序崩溃之前以某种方式破坏了 USB。我已经编辑了我的 while 循环，以显示我在语音识别器调用后如何尝试重新建立 USB。

使用显示的代码，在运行调试的语音识别器调用之后，代码在没有断点的情况下中断。如果我从那里恢复代码执行，程序就会停止，就像我单击了 Terminate 按钮一样。这是我的计算机屏幕，当执行本身发生中断时，它似乎是一个 NullPointerException 问题，仍然超出我的知识库。希望有人能指出我正确的方向。

我开始相信您在下图中看到的线程 [<12> Thread-130]（正在运行）是罪魁祸首。此线程出现在从语音识别器调用返回时。我想我需要确保在语音识别器调用后执行返回到原始线程，但我可能会离开这里吗？

![在此处输入图像描述](../Images/06194c1f176be4e19dd05c8a7ab9ebe5.png)

或者更好（也许），有没有办法在我调用语音识别器时杀死原始线程 <11>？

哇，就是这样，或者至少我是这么认为的，我需要做的就是打破；在我启动语音识别器后退出 while 循环（我还必须在 USB 请求失败时退出 while 循环）。

而且，我不必在 runOnUiThread() 中启动语音识别器。

我认为这很有魅力，但我注意到暂停的线程在累积，最终程序停止执行语音识别器。我相信我会追查到这一点，但任何智慧之言都会有所帮助。

抱歉这么多细节，但我会将整个初学者的思考过程留给后面的人（除非你开始对此投反对票）。

PS 这是多么棒的调试环境啊！！！！

似乎挂起的线程是在我调试时创建的，还没有弄清楚它为什么停止工作，但可能是所有那些挂起的线程。我会弄清楚的。我无法复制该问题，并且我认为我确实已经找到了答案（上图），但我会等一会儿再将其发布为答案，以确保。

1/21 11:14 EST：还有 2 个问题

- 大约十分之一的语音识别调用会导致执行 onResume()，但 run() 在 onResume() 之后不会执行（另外 9 次 run() 在 onResume() 之后输入）。这会导致我的程序挂起，因为没有进入 while 循环。

- 每次用户使用系统的“返回”箭头使用另一个程序然后返回到我的程序时，就会出现另一个线程（带有自己的 while 循环）。实际上，这会创建我的程序的多个实例，并且是不可接受的。

而且，我又回到了在 runOnUiThread() 中启动语音识别器，我认为挂断更少。

美国东部时间 1 月 21 日下午 1:27：

再一次，我想我已经成功了。我已经调用了 100 次语音识别，间歇性地使用了其他程序，并且在我的调试窗口中仍然有相同数量的运行线程并且它没有挂断。

我所做的是，声明一个活动级别整数 exitloopnow。我在 onCreate、onStart 和 onResume 中将 exitloopnow 设置为 0。我在 onPause、onStop 和 onDestroy 中将 exitloopnow 设置为 1。在 run() while 循环中，如果 exitloopnow==1 则中断。

同样，如果这继续有效，我会将其设置为答案，除非有人提出更好的答案。

美国东部时间 1 月 21 日下午 2:00：

我想100次是不够的。我在它挂起的地方以调试模式捕捉到它。它似乎卡在下图所示的 .resquestWait() 上。

我在“不可用 [本机方法]”上找不到太多内容，所以我又被卡住了。如果我恢复代码执行并再次中断，它总是在他的行 (350) 上。

美国东部时间 1 月 22 日上午 9:20：

虽然代码挂在第 350 行，但我可以拔下 USB 电缆，然后将其重新插入，这确实会创建另一个工作线程，但这是不可取的。我还可以使用 Android 的后退按钮并通过在最近的应用程序中选择程序来获取另一个线程，这也是不可取的。

![在此处输入图像描述](../Images/3d271199a6b2c6afe81a70a1dd738358.png)

这是 onActivityResult()：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
    {
        // Populate the wordsList with the String values the recognition engine thought it heard
        final ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

        this.runOnUiThread(new Runnable() {
            public void run() {
                ((TextView) findViewById(R.id.tvTitle)).setText(matches.get(0));
            }
        });
        BusyV=0;
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

而当前的 While 循环：

```
@Override
public void run() {
    while (true) {
        request.queue(buffer, 64);
        if (mConnection.requestWait() == request) {
            if (buffer.get(7)==0) {  //New Box (Yellow) button pressed now
                this.runOnUiThread(new Runnable() {
                    public void run() {
                        ((TextView) findViewById(R.id.tvSpine)).setText("Spine");
                        ((TextView) findViewById(R.id.tvPage)).setText("Page");
                        ((TextView) findViewById(R.id.tvThick)).setText("Thick");
                    }
                }); 
                if (CanRecog==1) {
                    if (BusyV!=1) {
                        BusyV=1;

                        this.runOnUiThread(new Runnable() {
                            public void run() {
                                Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
                                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                                        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
                                intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition ...");
                                startActivityForResult(intent, REQUEST_CODE);       
                            }
                        });
                    }
                }
            }
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
            }
        } else {
            this.runOnUiThread(new Runnable() {
                public void run() {
                    ((TextView) findViewById(R.id.tvZnum)).setText("USB lost at "+ System.currentTimeMillis());
                    ((TextView) findViewById(R.id.tvXnum)).setText("   ");
                }
            });
        }
    }
} 
```

以及我尝试重新建立 USB 的代码（在 onResume 代码中，因为在语音识别 onActivityResult() 之后会自动调用 onResume：

```
@Override
public void onResume() {
    super.onResume();
    Intent intent = getIntent();
    Log.d(TAG, "intent: " + intent);
    savetofile("1 intent: " + intent);
    connectToUsb();
}

private void connectToUsb() {
    if (amconnected==1) {
        mConnection.close(); 
        request.close(); 
    } else {            
        setupusb();
    }
    amconnected=0;
    while(amconnected==0) {
        doconnect();
    }   
    request.initialize(mConnection, mEndpointIntr);
}

private void setupusb() {
    mUsbManager = (UsbManager) getSystemService(Context.USB_SERVICE);
    mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(ACTION_USB_PERMISSION), 0);
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    registerReceiver(mUsbReceiver, filter);
}

private void doconnect() {
    HashMap<String, UsbDevice> deviceList = mUsbManager.getDeviceList();
    Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
    while (deviceIterator.hasNext()) {
        UsbDevice device1 = deviceIterator.next();
        if (device1.getVendorId() == 1240 & device1.getProductId() == 63) {
            mUsbManager.requestPermission(device1, mPermissionIntent);
            setDevice(device1);
        }
    }
}

private void setDevice(UsbDevice device) {
    Log.d(TAG, "setDevice " + device);
    savetofile("2 setDevice " + device);
    if (device.getInterfaceCount() != 1) {
        Log.e(TAG, "could not find interface");
        savetofile("3 could not find interface");
        return;
    }
    UsbInterface intf = device.getInterface(0);
    UsbEndpoint ep = intf.getEndpoint(0);
    if (ep.getType() != UsbConstants.USB_ENDPOINT_XFER_INT) {
        Log.e(TAG, "endpoint is not interrupt type");
        savetofile("5 endpoint is not interrupt type");
        return;
    }
    mEndpointIntr = ep;
    if (device != null) {
        UsbDeviceConnection connection = mUsbManager.openDevice(device);
        if (connection != null && connection.claimInterface(intf, true)) {
            Log.d(TAG, "open SUCCESS");
            savetofile("6 open SUCCESS");
            mConnection = connection;
            Thread thread = new Thread(this);
            thread.start();
            amconnected=1;
        } else {
            Log.d(TAG, "open FAIL");
            savetofile("7 open FAIL");
            mConnection = null;
        }
    }
} 
```

和我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="act.ProMeasure2D">

<uses-feature android:name="android.hardware.usb.host" />
<uses-sdk android:minSdkVersion="13" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" />

<application android:theme="@android:style/Theme.Black" android:label="ProMeasure2D">
    <activity android:name="act.ProMeasure2D.ProMeasure2DActivity"
        android:label="ProMeasure2D">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
        </intent-filter>

        <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
            android:resource="@xml/device_filter" />
    </activity>
</application> 
```

和我的项目结构： ![在此处输入图像描述](../Images/610f4c707e4c548cd2cd9a5a961abce0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:19:09.620

就是这样，我需要做的就是打破；在我启动语音识别器后退出 while 循环（我还必须在 USB 请求失败时退出 while 循环）。

而且，我不必在 runOnUiThread() 中启动语音识别器。

现在就像一个魅力。

抱歉这么多细节，但我会将整个初学者的思考过程留给后面的人（除非你开始对此投反对票）。

PS 这是多么棒的调试环境啊！！！！

# javascript - Chrome、边距和 jQuery 动画

> ID：14419491
> 
> 赞同：2
> 
> 时间：2013-01-19T22:20:56.677
> 
> 标签：javascript, jquery, html, css, google-chrome

我有一个奇怪的显示与 chrome 不一致，也许有跨浏览器经验的人可以阐明它。

小提琴：http: [//jsfiddle.net/Bio2hazard/DqCMY/](http://jsfiddle.net/Bio2hazard/DqCMY/)

我已经尽可能地简化了代码以深入挖掘问题。

HTML（真的只有几张图片）

```
<div id="1" class="list_box">
    <img class="game_image" src="http://lorempixel.com/output/animals-q-c-184-69-9.jpg"
    width="184" height="69"/>
</div>
<div id="2" class="list_box">
    <img class="game_image" src="http://lorempixel.com/output/animals-q-c-184-69-9.jpg"
    width="184" height="69"/>
</div>
<div id="3" class="list_box">
    <img class="game_image" src="http://lorempixel.com/output/animals-q-c-184-69-9.jpg"
    width="184" height="69"/>
</div>
<div id="4" class="list_box">
    <img class="game_image" src="http://lorempixel.com/output/animals-q-c-184-69-9.jpg"
    width="184" height="69"/>
</div>
<div id="5" class="list_box">
    <img class="game_image" src="http://lorempixel.com/output/animals-q-c-184-69-9.jpg"
    width="184" height="69"/>
</div>
<div id="6" class="list_box">
    <img class="game_image" src="http://lorempixel.com/output/animals-q-c-184-69-9.jpg"
    width="184" height="69"/>
</div> 
```

CSS

```
body {
    background-color: #2d2d2b;
    color: #939393;
}

.list_box {
    margin-bottom: 2em;
    display:inline-block;
    width: 184px;
    height: 69px;
    overflow: hidden;
}

.testleft {
    float: left;   
}

.testright {
    float: right;   
} 
```

JS（可能是有趣的部分）

```
$.fn.infoCardDisable = function () {
    $('.active').stop().animate({
        height: '69px',
        marginBottom: '2em'
    }, 400, function() { 
        $(this).removeClass('active');
        $(this).children('.testleft').remove();
        $(this).children('.testright').remove();
    });
}

$('.list_box > .game_image').click(function (e) {    
    if ($(this).parent().hasClass('active')) {
        $(this).infoCardDisable();
    } else {        
        $(this).infoCardDisable();

        $(this).parent().append('<span class="testleft">L.Test</span><span class="testright">R.Test</span>');

        $(this).parent().addClass('active').stop().animate({
            height: '103px',
            marginBottom: '-2px'
        }, 400);
    }
    return false;
}); 
```

基本目标是向下展开 list_box 元素以在单击图像时显示其他内容。此操作不应影响内容的定位或流动。

它在 Firefox 和 IE 中都可以正常工作，但是 chrome 有各种各样的问题。

1）浮子：左；和浮动：对；在文本上会导致框比任何其他元素尴尬地卡在更高的位置。可以通过移除浮动来修复，但我需要它们来定位元素。

2）整个事物使周围的所有元素都跳来跳去。这可以通过从 list_element 中删除 display: inline-block 来解决，但不幸的是这不是一个选项。

我的测试是在 Firefox(18.0.1)、Chrome(24.0.1312.52) 和 Internet Explorer(9.0.8) 上完成的。

苏……有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:26:26.847

Chrome 的默认值`vertical-align`有时会表现得很奇怪，您可以通过显式设置来解决它：

```
.list_box {
    [...]
    vertical-align: top;
} 
```

[**小提琴**](http://jsfiddle.net/DqCMY/7/)

# r - 使用 ggplot 在多个 geom_point 组周围绘制轮廓

> ID：14419493
> 
> 赞同：13
> 
> 时间：2013-01-19T22:21:21.077
> 
> 标签：r, ggplot2, polygon

我目前有下面包含的代码来绘制这个： ![在此处输入图像描述](../Images/21113b3ed3bb427f499e8ca9d2503d52.png)

我要做的是让每个组的大纲遵循每个组中的所有要点——而不是像现在这样跳过其中的一些。此外，我希望每个轮廓都有一个半透明的填充。谢谢你的帮助。

```
library(ggplot2)
library(reshape)
library(car)

G1 <- 1:10
G2 <- 11:20
G3 <- 21:30
G4 <- 31:35
G5 <- 36:41

sdata <- read.csv("http://dl.dropbox.com/u/58164604/sdata.csv", stringsAsFactors = FALSE)
pdata<-melt(sdata, id.vars="Var")

VarArea <- data.frame(unique(pdata$Var))
VarFinalMin <-c()
for (g in 1:max(VarArea))
{
VarNum<-pdata[which(pdata$Var==g),1:c(ncol(pdata))]
VarN <- g
VarMin <- min(VarNum$value)
VarMinN <- cbind(VarN, VarMin)
VarFinalMin <- rbind(VarFinalMin,VarMinN) 
}
VFinalMin <- data.frame(VarFinalMin)
colnames(VFinalMin)<-c("Variable", "Value")

VarFinalMax <-c()
for (g in 1:max(VarArea))
{
VarNum<-pdata[which(pdata$Var==g),1:c(ncol(pdata))]
VarN <- g
VarMax <- max(VarNum$value)
VarMaxN <- cbind(VarN, VarMax)
VarFinalMax <- rbind(VarFinalMax,VarMaxN)
}
VFinalMax <- data.frame(VarFinalMax)
colnames(VFinalMax)<-c("Variable", "Value")

VFinal<-rbind(VFinalMin, VFinalMax)
VFinal$Group <- recode(VFinal$Variable, "G1 = 'A'; G2 = 'B'; G3 = 'C'; G4 = 'D'; G5 = 'E'")

ggplot(VFinal, aes(Variable, Value, colour = Group)) + geom_point()
find_hull <- function(VFinal) VFinal[chull(VFinal$Variable, VFinal$Value), ]
hulls <- ddply(VFinal, "Group", find_hull)
ggplot(VFinal, aes(Variable, Value, colour = Group)) + geom_point() + geom_polygon(data = hulls, fill = NA) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T23:03:38.220

如果您重新排列形状的底部和顶部分别升序和降序，您可以只使用`geom_polygon`原始形状`data.frame`并跳过所有凸包内容：

```
VLarge <- VFinal[which(VFinal$Value > 25000),]
VLarge <- VLarge[order(-VLarge$Variable, VLarge$Group),]
VSmall <- VFinal[which(VFinal$Value <= 25000),]
VSmall <- VSmall[order(VSmall$Variable, VSmall$Group),]
VFinal <- rbind(VSmall, VLarge)
ggplot(VFinal, aes(Variable, Value, colour = Group)) + geom_point() + 
    geom_polygon(aes(fill = Group), alpha = 0.3) 
```

![在此处输入图像描述](../Images/dd02affdad1da91b4ed1d2f9fd0df502.png)

# .htaccess - 缺少重写标志？.htaccess 引起的服务器 500

> ID：14419497
> 
> 赞同：2
> 
> 时间：2013-01-19T22:21:35.000
> 
> 标签：.htaccess

我目前在我的根目录上有一个 htaccess 文件。我在回调/api 中创建了一个新的 htaccess 文件并输入了这个：

```
RewriteEngine on
RewriteBase /callbacks/api
RewriteRule ^(.*)\.(json|xml|csv|txt|printr)$ ./endpoint.php?api_request=$1&api_response_type=$2 
```

我遵循与其他 htaccess 中相同的重写规则（工作得很好）。但是在这种情况下，我传递了以下 URL：

```
domain.com/callbacks/api/v1/test_rest.xml 
```

在我的 endpoint.php 文件中，我有：

```
<?
//just making sure the 500 is not due to php
//so lets just dump the GET's
var_dump($_GET);
?> 
```

我是否缺少重写规则末尾所需的标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:48:49.280

尝试这个：

```
RewriteEngine on
RewriteBase /callbacks/api
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.(json|xml|csv|txt|printr)$ ./endpoint.php?api_request=$1& api_response_type=$2   [L] 
```

我没有测试规则，只是添加了 2 行来防止循环。

# java - 编写图像位掩码

> ID：14419501
> 
> 赞同：2
> 
> 时间：2013-01-19T22:22:12.503
> 
> 标签：java, image, graphics, bit-manipulation

我正在研究一种图像冲突机制，该机制使用长值作为每个图像的位掩码，如果不排除像素（在大多数情况下是透明的），则将每个位设置为 1，否则设置为 0。我编写了一个测试方法，将位掩码作为 1 和 0 写入文本文件。在我看来，理论上，因为图像是逐行读取的，所以 1 和 0 应该类似于图像本身。

这不是我真正得到的。是我的位分配代码或打印代码有问题吗？或者它应该看起来像那样？

**图像解析**

```
 int[] data = ColorUtils.getImageData(img);
    bounds = new Rectangle(img.getWidth(), img.getHeight());
    int wt = (int) bounds.getWidth();
    int ht = (int) bounds.getHeight();
    bitmasks = new long[ht];
    for(int y = 0; y < ht; y++) {
        long bitmask = 0;
        for(int x = 0; x < wt; x++) {
            if(data[x + y * wt] != excludedColor)
                bitmask = (bitmask << 1) + 1;
            else
                bitmask = bitmask << 1;
        }
        bitmasks[y] = bitmask;
    } 
```

**文件打印**

```
 PrintWriter pw =  null;
    try {
        pw = new PrintWriter(new File("/home/brian/Desktop/imageModel.txt"));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        return;
    }
    for(int y = 0; y < bounds.getHeight(); y++) {
        long bitmask = bitmasks[y];
        for(int x = 0; x < bounds.getWidth(); x++) {
            pw.print(String.valueOf((bitmask >> (x + y * (int) bounds.getWidth())) & 1));
        }
        pw.println();
        pw.println();
    }
    pw.close(); 
```

**图片：**

![正在解析的测试图像](../Images/1d5a272f6da925786c7b8af44189bbf8.png)

**生成的文本文件：** [查看](http://dl.dropbox.com/u/34206572/Misc/imageModel.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:46:46.267

您的图像解析对我来说看起来大部分都很好，假设您实际上可以将整行存储到 long 中而不会溢出它（并且还假设您通过正确考虑所有通道来浏览数据，这对我来说在您的代码中是错误的）。但是在“文件打印”上，我看不出它是如何正确的。您`bitmask`每行存储一个，所以如果我们可以索引它，`bitmask[width - 1]`将表示给定行中`bitmask[width - 2]`的第一列，第二列，...，并`bitmask[0]`表示该行中的最后一列。所以在拆包阶段需要纠正两件事：1）从`x`=宽度-1到0的循环；2）然后通过执行解压缩它`((mask >> x) & 1)`。

将图像大小调整为 50x50 并考虑到 alpha 值`<= 2`代表背景后，我得到以下结果：

```
00000000000000000111111111111111000000000000000000
00000000000000011111111111111111110000000000000000
00000000000001111111111111111111111100000000000000
00000000000011111111111111111111111111000000000000
00000000001111111111111111111111111111100000000000
00000000011111111111111111111111111111110000000000
00000000111111111111111111111111111111111000000000
00000001111111111111111111111111111111111100000000
00000011111111111111111111111111111111111110000000
00000011111111111111111111111111111111111111000000
00000111111111111111111111111111111111111111000000
00001111111111111111111111111111111111111111100000
00001111111111111111111111111111111111111111100000
00011111111111111111111111111111111111111111110000
00011111111111111111111111111111111111111111110000
00111111111111111111111111111111111111111111111000
00111111111111111111111111111111111111111111111000
00111111111111111111111111111111111111111111111000
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
01111111111111111111111111111111111111111111111100
00111111111111111111111111111111111111111111111100
00111111111111111111111111111111111111111111111000
00111111111111111111111111111111111111111111111000
00011111111111111111111111111111111111111111111000
00011111111111111111111111111111111111111111110000
00011111111111111111111111111111111111111111110000
00001111111111111111111111111111111111111111100000
00000111111111111111111111111111111111111111100000
00000111111111111111111111111111111111111111000000
00000011111111111111111111111111111111111110000000
00000001111111111111111111111111111111111100000000
00000001111111111111111111111111111111111100000000
00000000111111111111111111111111111111111000000000
00000000011111111111111111111111111111110000000000
00000000000111111111111111111111111111000000000000
00000000000011111111111111111111111110000000000000
00000000000000111111111111111111111000000000000000
00000000000000001111111111111111100000000000000000
00000000000000000011111111111110000000000000000000 
```

# arrays - MATLAB打印出一个字符串列表？

> ID：14419504
> 
> 赞同：0
> 
> 时间：2013-01-19T22:22:34.537
> 
> 标签：arrays, string, matlab

遇到以下我认为可行的代码的问题：

```
OriginalSamples = {'BeforeWeDepart','ImSoGlad','NotToday', 'WellNowYouKnow'};
numOriginalSamples = length(OriginalSamples);

for i=1:numOriginalSamples
    disp(OriginalSamples(i));
end 
```

我得到的错误是：

```
Error using ==> vertcat
CAT arguments dimensions are not consistent. 
```

这个简单的操作怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:05:12.963

尝试更改`disp(OriginalSamples(i))`为`disp(OriginalSamples{i})`

使用索引`()`返回单元格数组，而使用索引`{}`返回单元格的内容

# java - 在 Neuroph 上生成错误图

> ID：14419506
> 
> 赞同：0
> 
> 时间：2013-01-19T22:22:37.850
> 
> 标签：java, neural-network

我正在开发一个程序并使用 Neuroph 框架中的多层感知器。我查看了 Neuroph 的 API 文档，看看它是否有获取网络错误的方法，但没有这样做。但我在另一个名为 SupervisedLearning 的课程中​​找到了这些方法。如何在训练网络 (MLP) 时生成错误图？我至少需要获取错误数组，以便生成图表。但是MLP没有这样的方法。

# php - 回显使用 php 发送到数据库的微型编辑器内容

> ID：14419508
> 
> 赞同：0
> 
> 时间：2013-01-19T22:22:59.520
> 
> 标签：php, javascript, jquery

我需要帮助，请我需要一些帮助。我尝试在我的网页中使用 tinyeditor jquery，编辑器的内容成功提交到数据库但带有 html 标记。现在，当我尝试从数据库中检索数据并将其显示在另一个页面上时，它会将内容与所有 html 标签一起带出。请问我该如何更正它以显示为格式化文本？谢谢。

使用的 tinyeditor 脚本

```
<script>
new TINY.editor.edit('editor',{
id:'input', // (required) ID of the textarea
width:584, // (optional) width of the editor
height:175, // (optional) heightof the editor
cssclass:'te', // (optional) CSS class of the editor
controlclass:'tecontrol', // (optional) CSS class of the buttons
rowclass:'teheader', // (optional) CSS class of the button rows
dividerclass:'tedivider', // (optional) CSS class of the button diviers
controls:['bold', 'italic', 'underline', 'strikethrough', '|', 'subscript', 'superscript', '|', 'orderedlist', 'unorderedlist', '|' ,'outdent' ,'indent', '|', 'leftalign', 'centeralign', 'rightalign', 'blockjustify', '|', 'unformat', '|', 'undo', 'redo', 'n', 'font', 'size', 'style', '|', 'image', 'hr', 'link', 'unlink', '|', 'print'], // (required) options you want available, a '|' represents a divider and an 'n' represents a new row
footer:true, // (optional) show the footer
fonts:['Verdana','Arial','Georgia','Trebuchet MS'],  // (optional) array of fonts to display
xhtml:true, // (optional) generate XHTML vs HTML
cssfile:'style.css', // (optional) attach an external CSS file to the editor
content:'starting content', // (optional) set the starting content else it will default to the textarea content
css:'body{background-color:#ccc}', // (optional) attach CSS to the editor
bodyid:'editor', // (optional) attach an ID to the editor body
footerclass:'tefooter', // (optional) CSS class of the footer
toggle:{text:'source',activetext:'wysiwyg',cssclass:'toggle'}, // (optional) toggle to markup view options
resize:{cssclass:'resize'} // (optional) display options for the editor resize
});

</script> 
```

和

```
<script>
var editor = new TINY.editor.edit('editor', {
id: 'tinyeditor',
width: 500,
height: 175,
cssclass: 'tinyeditor',
controlclass: 'tinyeditor-control',
rowclass: 'tinyeditor-header',
dividerclass: 'tinyeditor-divider',
controls: ['bold', 'italic', 'underline', 'strikethrough', '|', 'subscript', 'superscript', '|',
    'orderedlist', 'unorderedlist', '|', 'outdent', 'indent', '|', 'leftalign',
    'centeralign', 'rightalign', 'blockjustify', '|', 'unformat', '|', 'undo', 'redo', 'n',
    'font', 'size', 'style', '|', 'link', 'unlink', '|', 'print'],
footer: false,
fonts: ['Verdana','Arial','Georgia','Trebuchet MS'],
xhtml: true,
cssfile: 'custom.css',
bodyid: 'editor',
footerclass: 'tinyeditor-footer',
resize: {cssclass: 'resize'}
      }
);

</script> 
```

**发布到数据库的表单**

```
<form action="upload_poetry.php" method="post"
 enctype="multipart/form-data">
                <table width="100%" height="137" border="0" cellpadding="5" cellspacing="5">

                  <tr>
                    <td align="right" valign="top"><strong>Poem:</strong></td>
                    <td>.
                      <label for="tinyeditor"></label>
                    <textarea name="tinyeditor" id="tinyeditor" cols="45" rows="5"></textarea></td>
                </tr>
                  <tr>
                    <td>&nbsp;</td>
                    <td><input type="submit" name="button" id="button" value="Submit"  onclick="editor.post()"/></td>
                </tr>

              </table>
              </form> 
```

**用于插入数据库的代码**

```
<?php
include ('config.php');

$poem=$_POST['tinyeditor'];

$sql= "insert into poetry ( poem)values('$poem')";
$query=mysqli_query($dbC, $sql) or die(mysqli_error());
if ($query){

$msg = "Entry submitted pending Admin approval";
    header("location:poem.php?msg=$msg");
}
else{$msg = "Not submitted Please retry";
    header("location:poem.php?msg=$msg");}

?> 
```

用于从数据库中检索的代码

```
<?php
                     include('config.php');
                     if (isset($_GET['id'])){
                     $id = $_GET['id'];
                     $sql = "SELECT * FROM poetry where title_id=$id";
                     $query = mysqli_query($dbC, $sql) or die(mysqli_error());
                     while($row = mysqli_fetch_array($query)){

                          $poem = $row['poem'];

                     }

                     ?>
                     <table width="50%" border="0" cellspacing="1" cellpadding="1">
                       <tr>
                       <td><strong>Poem:</strong></td>
                         <td colspan="4"><textarea id="" name="" ><?php echo $poem ?></textarea> </td>
                       </tr>

                     </table>
                       <?php
                     }
                     echo "<p><a href='index.php>Select an applicant to view his/her particulars</a></p>";
                     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:00:53.043

谢谢大家。我能够通过使用如下所示的 html_entity_decode 代码解决问题 $poetry 是从数据库中检索到的数据

```
 `$orig = $poetry;
                          $a = htmlentities($orig);

                        $poem = html_entity_decode($a);` 
```

并在 div 标签而不是 textarea 中回显结果。

```
<div> <?php echo $poem; ?> </div> 
```

非常感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T01:36:08.580

看起来您的 HTML 已发送到 DB HTML 编码。如果要将其作为格式化字符串取回，请使用`html_entity_decode`：

```
$textFromDB = "&lt;span&gt;Some text&lt;/span&gt;";
$decodedHTML = html_entity_decode($textFromDB);
echo $decodedHTML; 
```

这将输出一个包含文本的 span 元素`Some text`，如下所示：

```
<span>Some text</span> 
```

参考`html_entity_decode`： http: [//php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

该页面上还有一个指向该`htmlentities`函数的链接，该函数处理字符串的 HTML 编码。

# android - 在没有 onPrepareDialog() 的情况下更改 AlertDialog 中的 EditText 小部件的内容

> ID：14419512
> 
> 赞同：0
> 
> 时间：2013-01-19T22:23:22.453
> 
> 标签：android, dialog, android-alertdialog

我将 AlertDialog 与包含 EditText 小部件的自定义视图一起使用。我想在显示 AlertDialog 之前更改 EditText 小部件的内容。我知道这通常是通过覆盖 onPrepareDialog() 并在那里设置文本来完成的。但是，据我所知，这在我的特定情况下不起作用，因为我使用 AlertDialog.show() 而不是 Activity.showDialog()。

那么我应该如何处理使用 AlertDialog.show() 显示的对话框呢？一种解决方案是在对话框被带到前面之后设置文本，即：

```
AlertDialog alertDialog = builder.create(); 
alertDialog.show();
EditText editText = (EditText) alertDialog.findViewById(R.id.text);
editText.setText("Foo bar"); 
```

但是，我认为这不是一个好的解决方案，因为首先显示对话框，然后设置文本。我想在实际显示对话框之前设置文本。

有什么办法可以做到这一点？我不能在 alertDialog.show() 之前执行此操作，因为 findViewById() 在 alertDialog.show() 之前调用时返回 null。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:30:51.820

```
AlertDialog alertDialog = builder.create(); 
alertDialog.show(); 
```

Since you have access to the AlertDialog.Builder object, simply change the layout before calling `builder.create()`.

* * *

**Addition**

> I have an EditText widget in my XML file which I inflate using builder.setView(inflater.inflate(R.layout.mydialog, null)). How do I change the text of this EditText widget without calling findViewById()?

Break that line into a series of commands. Specifically: inflate the XML, alter the layout, and pass it to `setView()`.

```
View view = inflater.inflate(R.layout.mydialog, null);
EditText editText = (EditText) view.findViewById(R.id.text);
editText.setText("Foo bar");
builder.setView(view); 
```

# html - Twitter Bootstrap：如何不将列缩放到 767px 以下的单行

> ID：14419513
> 
> 赞同：0
> 
> 时间：2013-01-19T22:23:30.050
> 
> 标签：html, twitter-bootstrap, responsive-design, grid-layout

正如你已经知道的那样，如果你在 767px 及以下，twitter bootstrap 会将每个 span* 缩放到 100% 宽度。因此，例如，如果我们在 768px 及以上有两列：

```
<div class="row">
    <div class="span6">Column 1</div>
    <div class="span6">Column 2</div>
</div> 
```

这是结果：

```
| column 1 | column 2 | <- desktops 
```

在 767px 及以下，它们将折叠为：

```
| column 1 |   <- tablets, mobile
| column 2 | 
```

这就是应该的。
但是......如果你想要这种行为连续而不是另一个，你会如何处理？
即使在 767 像素以下，如何留下两个（或更多）列？

```
<div class="row">
    <div class="span6">Column 1</div>
    <div class="span6">Column 2</div>
</div>

<div class="special row">
    <div class="span6">Column 1</div>
    <div class="span6">Column 2</div>
</div>

| column 1 | column 2 | <- desktops
| column 1 | column 2 | 

| column 1 |   <- tablets, mobile
| column 2 |
| c1 |  c2 | 
```

我真的很好奇。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T00:04:01.227

*在我们等待查看它是否被标记为重复时，我已将其移至答案。*

要在移动/平板电脑环境中维护这两个列，您需要在元素上添加另一组类以及 CSS 中的一些附加规则。

默认情况下，所有元素都堆叠在移动设备上，因为线性版本是我们所期望的。如果您查看[http://foundation.zurb.com/docs/grid.php](http://foundation.zurb.com/docs/grid.php)，您会看到 Zurb 还创建了另一组基于 4 列移动网格的样式。通过添加这些额外的类，它可以让你控制你的列占据 1/3 1/2 2/3 全宽。

我编写了一个基本示例供您使用 -> [http://playground.responsivedesign.is/twitter-bootstrap/](http://playground.responsivedesign.is/twitter-bootstrap/)，但以下是详细信息。

这是您要添加到 HTML 中的标记（附加`.mobile-*`类）

```
 <div class="span4 mobile-one">...</div>
 <div class="span8 mobile-three">...</div> 
```

或者

```
 <div class="span6 mobile-two">...</div>
 <div class="span6 mobile-two">...</div> 
```

而需要添加的CSS是..

```
.row-fluid .mobile-one {
  width: 31.491712707182323%;
  *width: 31.43852121782062%;
}

.row-fluid .mobile-three {
  width: 65.74585635359117%;
  *width: 65.69266486422946%;
}

.row-fluid .mobile-two {
  width: 48.61878453038674%;
  *width: 48.56559304102504%;
}

.row-fluid .mobile-one,
.row-fluid .mobile-two,
.row-fluid .mobile-three {
  float:left;
  margin-left: 2.7624309392265194%;
  *margin-left: 2.709239449864817%;
} 
```

您还问过它是否也可以使用`.row`而不是使用`.fluid-row`. 它可以做到，但有一些规则`.fluid-row`是级联的，所以你需要做更多的试错工作。我的官方立场是重新考虑您使用基于像素的静态布局的原因（尽管使用@media 进行响应）并采用流畅的布局。

# javascript - 使用 Plovr 从简单的 javascript 文件中删除空格而不管理依赖项

> ID：14419515
> 
> 赞同：0
> 
> 时间：2013-01-19T22:23:35.170
> 
> 标签：javascript, google-closure-compiler, google-closure, plovr

我不知道如何让 Plovr 从一个简单的 javascript 文件中删除空格，而不是尝试管理依赖项或范围。（如果我能提供帮助，我不想使用 ADVANCED 模式，因为我对这个文件的需求非常简单，我不想定义 externs 来保留每个变量名。）我已经梳理了 Plovr 文档但我仍然无法弄清楚我做错了什么。

你好.js：

```
alert("Hello world"); 
```

你好-config.js：

```
{
  "id": "hello",
  "mode": "WHITESPACE_ONLY",
  "level": "QUIET",
  "inputs": "./hello.js",
  "output-file": "./hello-compiled.js"
} 
```

当我运行`java -jar ./plovr.jar build hello-config.js`时，输出`hello-compiled.js`不是我期望的一行。相反，它有 21 行长，有很多这样的东西：

你好-compiled.js：

```
var COMPILED=!0,goog=goog||{};goog.NODE_JS=!1;goog.global=goog.NODE_JS?eval("global"):this;goog.DEBUG=!0;goog.LOCALE="en";
goog.addDependency=function(a,b,c){if(!COMPILED){for(var d,a=a.replace(/\\/g,"/")
goog.scope=function(a){a.call(goog.global)}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:49:17.910

Plovr 正在添加闭包库“base.js”。您可以通过设置来避免这种情况：

“实验排除关闭库”：真

如此处所述： [https ://groups.google.com/forum/?fromgroups=#!topic/plovr/AEvvn8wST2A](https://groups.google.com/forum/?fromgroups=#!topic/plovr/AEvvn8wST2A)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:21:42.883

Use `"mode": "WHITESPACE",`

Because Plovr does not recognize `"mode": "WHITESPACE_ONLY",` and uses default mode.

Read [http://plovr.com/docs.html](http://plovr.com/docs.html) section "More on Config Files" for correct mode types.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T07:33:27.003

> 你需要安装python和java，并确保它运行正常。在closureCompiler文件夹中，与closure文件夹并行，添加plovr-81ed862.jar

配置文件

```
{
    "id": "hello",
        "inputs": "hello.js",
        "output-file": "hello-compiled.js"
} 
```

> 创建批处理文件 plovr-build.bat 并包含以下行

```
java -jar .\closureCompiler\plovr-81ed862.jar build .\hello-config.js
pause 
```

创建另一个批处理文件 plovr-serve 并添加以下行

```
java -jar .\closureCompiler\plovr-81ed862.jar serve .\hello-config.js
pause 
```

保持这两个批处理文件和 hello-config.js 与文件夹关闭和关闭编译器并行

然后你准备好了。运行构建，然后运行 ​​plovr-serve。现在打开您的 application.html。不要关闭 plovr-serve 窗口。

# vb.net - 以另一种形式访问同一个类的实例

> ID：14419516
> 
> 赞同：2
> 
> 时间：2013-01-19T22:23:44.660
> 
> 标签：vb.net, class, singleton, instance

我确信这是一个简单的问题，但我没有足够的经验知道答案。:)

```
DataClass, Form1, Form2 
```

我有一个公共课程，`DataClass`在一个单独的文件中，`DataClass.vb`。在`DataClass`我有数据存储在我需要访问的几个数组中。我有方法`DataClass`可以访问数据。其中之一是`GetName`。一切正常`Form1`。我需要在另一个表单上访问数组中的相同数据，但是我需要调用该类的一个新实例，所以当我调用访问数组的方法时，数据是空的。

我已经看到一些线程提到创建一个`singleton class`.，但大多数都是关于我不太熟悉的 C#。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:42:04.310

有很多方法可以做到这一点。其中之一将涉及创建一个`Module`然后`Public`在模块中创建实例化您的类的变量：

```
Module MyGlobalVariables
    Public MyDataClass As DataClass
End Module 
```

现在，您项目中的所有表单都可以访问`DataClass`via `MyGlobalVariables.MyDataClass`。

* * *

一种更可取的方法是向您的 Form2 添加一个可以设置为`DataClass`实例的属性：

```
Public Property MyDataClass As DataClass 
```

然后，您将按`Form2`如下方式实例化您的（假设您用于实例化的变量`DataClass`被`Form1`称为`_dataClass`）：

```
Dim frm2 As New Form2()
frm2.MyDataClass = _dataClass
frm2.Show() 
```

* * *

最后，另一种方法是覆盖 的构造函数`Form2`并允许它接收类型的参数`DataClass`。然后，您可以实例`Form2`化为：

```
Dim frm2 As New Form2(_dataClass) 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T00:02:53.513

你可以像这样创建一个单例类

```
Public Class DataClass
    Public Shared ReadOnly Instance As New DataClass()

    Private Sub New()
    End Sub

    ' Other members here
End Class 
```

`Instance`您可以通过自动初始化的共享成员访问单个实例。构造函数`New`是私有的，以禁止从类外部创建新实例。

您可以像这样访问单例

```
Dim data = DataClass.Instance 
```

但这是不可能的

```
Dim data = new DataClass() 'NOT POSSIBLE! 
```

由于单例类是通过类名访问的，所以可以很容易地从两种形式中访问。

# git - 使用 git hook 在源文件顶部添加许可证和应用程序版本以注释

> ID：14419517
> 
> 赞同：8
> 
> 时间：2013-01-19T22:23:46.590
> 
> 标签：git, hook

我正在尝试为 git 创建一个预提交挂钩，用于编辑每个 .h 和 .m 文件顶部的注释。我想更改 x-code 添加的标题注释以包含应用程序版本和许可证信息。这在更改为新版本时会很有帮助。

这是我在 x-code 中创建文件时自动插入的文本：

```
//
//  myFile.h
//  myApp 
//
//  Created by Developer on 11/13/12.
//  Copyright (c) 2012 myCompany LLC. All rights reserved.
// 
```

我想把钩子改成这样：

```
/*

myFile.h
myApp
Version: 1.0

myApp is free software: you can redistribute it and/or modify it under the terms 
of the GNU General Public License as published by the Free Software Foundation,
either version 2 of the License, or (at your option) any later version.

myApp is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR 
PURPOSE.  See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with myApp.
If not, see <http://www.gnu.org/licenses/>

Copyright 2012 myCompany. All rights reserved.

This notice may not be removed from this file.

*/ 
```

我在想我会有一个文本文件，其中包含我想要更改的标题文本。或者检测应用程序版本号何时更改。当使用新版本号和 git 更新此文件时，我会执行 git commit，然后它将使用新版本更新所有其他文件并更改任何新文件以具有正确的标题文本。这似乎很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T01:16:53.510

使用[涂抹/清洁过滤器](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)（整章，最仔细地链接“关键字扩展”）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T01:05:30.333

在使用 perl inplace-edit '-i' 的等价物之前，我已经做过类似的事情，但是使用 perl 脚本而不是仅仅在命令行上，因为数据更大。

考虑到一些调整和测试，我已经完成了以下应该满足您需求的操作：D。

新的源头文件在`__DATA__`perl 脚本的部分中定义。

有一个说明如何通过环境变量传递 VERSION 和 COPY_YEAR。

自从我做了一些严肃的 perl 以来已经有一段时间了，但它适用于我的测试用例，它会创建备份，尽管我建议你先备份你的文件。

我希望它在某种程度上有所帮助。

示例用法：

```
$ perl add_header *.h *.m 
```

脚本：

```
use strict;
my $extension = '.orig';
local $/ = undef; # slurp
my $oldargv = undef;

my $replacement = <DATA>;
$replacement =~ s/{VERSION}/$ENV{VERSION} or '1.0.alpha'/e;
$replacement =~ s/{COPY_YEAR}/$ENV{COPY_YEAR} or '2013'/e;

LINE: while (<>) {
    if ( $ARGV ne $oldargv) {
        my $backup = undef;
        if ($extension !~ /\*/) {
            $backup = $ARGV . $extension;
        }
        else {
             ($backup = $extension) =~ s/\*/$ARGV/;
        }
        rename($ARGV, $backup);
        open(ARGVOUT, ">$ARGV");
        select(ARGVOUT);
        my $oldargv = $ARGV;
    }
    s!^//.*Copy.*?//$!$replacement!sm; # THE BUSINESS END.
}
continue {
    print;
}
select(STDOUT);
__DATA__
/**
 *  My New Header...
 *  Version info {VERSION} ]}
 *  made {COPY_YEAR}
 */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T17:43:04.203

我曾经做过类似的事情，但从一个带注释的标签中获取版本号，这是我们在发布版本最终确定时创建的。构建过程将；

*   使用指定标签签出代码
*   从标签生成版本号（格式为“foo_version_1_2”-> 1.2），并将其写入文件。这是这样一个模板可以将其拉入以在应用程序中显示
*   执行构建
*   把它打包

您可以在构建期间轻松地运行脚本来填充版本号。我记得看过涂抹/清洁过滤器，但这似乎是一种令人讨厌的方法。

如果您尝试填充特定于文件的数字，上述内容将不太有用，但无论如何我都会质疑它的价值，因为您没有在 git 中对单个文件进行版本控制。你为什么要这么做？

# javascript - 带有编号名称难题的 Javascript 数据集

> ID：14419518
> 
> 赞同：0
> 
> 时间：2013-01-19T22:23:48.130
> 
> 标签：javascript, attributes, dataset, parallax, skrollr

我正在使用[Skrollr.js](https://github.com/Prinzhorn/skrollr)库在页面上进行一些视差滚动。该库使用数据集来指定一些开始和结束 css 代码（基于您的滚动位置）示例：

```
<div data-0="top:0px;" data-100="top:500px"></div> 
```

我需要动态创建一些元素并设置它们的数据集，例如，如果元素看起来像这样：

```
<div data-foo="bar"></div> 
```

这可以正常工作：

```
var elem = document.createElement('div');
    elem.dataset['foo'] = 'bar'; 
```

但是因为我使用的是使用整数作为名称（ data-0 ）的库，所以我被卡住了......我试过这个：

```
 elem.dataset[0] = 'foo'; 
```

和...

```
 elem.dataset['0'] = 'foo'; 
```

没有运气......还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:37:47.580

尝试

```
var elem = document.createElement('div');
elem.setAttribute("data-0", "foo"); 
```

# javascript - 动画显示/隐藏脚本

> ID：14419519
> 
> 赞同：1
> 
> 时间：2013-01-19T22:23:49.607
> 
> 标签：javascript, jquery, animation

我正在尝试向显示/隐藏脚本添加动画/淡入淡出。

当用户单击“.show”锚点时，我想将“.buttons” div 向下滑动“.targetDiv” div 的高度，之后我希望“.targetDiv” div 淡入。

然后（如果可能），我希望在单击“.hide”锚点时发生相反的动作 - 导致“.targetDiv”淡出，并且“.buttons” div 向上滑动（回到其原始位置）。

谢谢您的帮助！

jsFiddle：

[http://jsfiddle.net/XwN2L/1296/](http://jsfiddle.net/XwN2L/1296/)

HTML：

```
 <div id="content" class="targetDiv">Content</div>
    <div class="buttons">
        <a  class="show" target="content">Show</a>
        <a  class="hide" target="content" style="float: right;">Hide</a>
    </div> 
```

JavaScript：

```
 $('.targetDiv').hide();
    $('.show').click(function () {
        $('.targetDiv').hide();
        $('#' + $(this).attr('target')).show();
    });

    $('.hide').click(function () {
        $('#' + $(this).attr('target')).hide();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:48:04.137

我会简单地使用 jquery 的 slideUp/slideDown 方法。

```
$('.targetDiv').hide();
$('.show').click(function () {
    $('.targetDiv').hide();
    $('#' + $(this).attr('target')).slideDown('slow');
});

$('.hide').click(function () {
    $('#' + $(this).attr('target')).slideUp('slow');
}); 
```

如果您迫切希望滑动**和**褪色，请查看以下内容：

[同时淡出（）和滑动（）？](https://stackoverflow.com/questions/2387515/jquery-fadeout-and-slideup-at-the-same-time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:54:21.360

当目标元素嵌套在另一个元素中时，更容易完成。这样，您可以分别将幻灯片动画应用到包含的父元素和淡入淡出动画到目标子元素。

例如：

**HTML**

```
<div id="content_container">
    <div id="content" class="targetDiv">Content</div>
</div>

<div class="buttons">
    <a  class="show" target="content">Show</a>
    <a  class="hide" target="content" style="float: right;">Hide</a>
</div> 
```

**Javascript**

```
$('.show').click(function () {
    var target        = $('#' + $(this).attr('target'));
    var target_parent = target.parent().height(target.outerHeight());
    target_parent.slideDown(250, function() { target.fadeIn(500); });
});

$('.hide').click(function () {
    var target        = $('#' + $(this).attr('target'));
    var target_parent = target.parent();
    target.fadeOut(500, function() {target_parent.slideUp(500);} );
}); 
```

请注意在“显示”处理程序中，父元素如何从当前隐藏的子元素继承其高度。

查看可能的**[jsFiddle 演示](http://jsfiddle.net/XwN2L/1303/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T22:46:54.730

一种选择：

给你的元素绝对定位：

```
position: absolute;
top:0px; 
```

然后像这样动画它：

```
$('.show').click(function () {
        $('.targetDiv').hide();
        $('.buttons').animate({
            top : '80px' // the height of your content + the padding + the margins
        },'slow',function(){
            $('#content').fadeIn('slow');
        });
});

$('.hide').click(function () {
    $('#content').fadeOut('slow',function(){
        $('.buttons').animate({
            top : '0px' // the height of your content + the padding + the margins
        });
    });
}); 
```

工作示例：http: [//jsfiddle.net/XwN2L/1298/](http://jsfiddle.net/XwN2L/1298/)

# c++ - 对向量的排序向量

> ID：14419520
> 
> 赞同：19
> 
> 时间：2013-01-19T22:23:57.510
> 
> 标签：c++, stl, vector

我有

```
 vector<vector<int>> vec 
```

在我的 C++ 应用程序中。

每个整数向量作为“大”向量的一个元素都有 4 个 INT 值。我想根据它的 ints 内容向量的第三个值对 vec 进行排序（我的意思是每个“内部”向量第三个元素） - 可能吗？

**编辑**

假设我有一个函数

```
COST(vector<int>) 
```

它根据我的向量值计算出一些值 - 我也可以在比较参数中使用它吗？它会帮助我更多。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-19T22:28:31.777

是的。`std::sort`可以带第三个参数，这是排序时使用的比较函数。例如，您可以使用 lambda 函数：

```
std::vector<std::vector<int>> vec;
// Fill it

std::sort(vec.begin(), vec.end(),
          [](const std::vector<int>& a, const std::vector<int>& b) {
  return a[2] < b[2];
}); 
```

或者，您可以传递任何其他可使用 signature 调用的内容`bool(const std::vector<int>&, const std::vector<int>&)`，例如仿函数或函数指针。

* * *

对编辑的回应：只需将您的`COST`功能应用于`a`and `b`：

```
std::sort(vec.begin(), vec.end(),
          [](const std::vector<int>& a, const std::vector<int>& b) {
  return COST(a) < COST(b);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T23:14:41.443

如果您想按成本比较两个向量，请尝试以下操作：

```
bool predicate(const std::vector<int>& a, const std::vector<int>& b)
{
    return COST(a) < COST(b);
} 
```

笔记：

*   以上也适用于 C++98，我不确定 C++11 的使用范围有多广，以及您是否有兼容的编译器。否则，您当然也可以按照 sftrabbit 的建议使用 lambda 表达式。
*   您没有说 COST 返回什么，我只是假设一些可排序的值，例如 float 或 long。
*   我希望您在将向量传递给 COST() 时不要复制向量，那样效率会非常低。
*   COST 建议使用一个宏，就像所有的 UPPERCASE_NAMES 一样。不要使用宏。不要为函数使用宏名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-11T18:17:56.420

`sort(vec.begin(), vec.end(), comp);`

哪里`comp`是：

```
static bool comp(const vector<int>& vec1, const vector<int>& vec2){
    return vec1[2] < vec2[2];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-24T16:30:58.797

```
#include <vector>
#include <algorithm>
#include <cstdlib>
#include <ctime>

using namespace std;

// This makes the sort be according to column 2 and ascending
bool sortFunc( const vector<int>& p1,
           const vector<int>& p2 ) {
 return p1[1] < p2[1];
 }

int main() {

  srand(time(NULL));

  // Creates and initializes 10 x 4 vector
  vector< vector<int> > vec;
  for( int i=0; i<10; i++ ) {
   vector<int> tmpVec;
   for( int j=0; j<2; j++ ) {
  tmpVec.push_back( rand()%10 );
   }
   vec.push_back( tmpVec );
  }

  // Print out the pre-sorted vector
 cout << "Pre-sorting state:" << endl;
  for( int i=0; i<vec.size(); i++ ) {
   for( int j=0; j<vec[i].size(); j++ ) {
  cout << vec[i][j] << " ";
  }
cout << endl;
}
  cout << endl;

  // Do the sorting according to column 2
  sort(vec.begin(), vec.end(), sortFunc);

  // Print out the post-sorted vector
   cout << "Post-sorting state:" << endl;
   for( int i=0; i<vec.size(); i++ ) {
    for( int j=0; j<vec[i].size(); j++ ) {
  cout << vec[i][j] << " ";
    }
   cout << endl;
   }

  return 0;
  } 
```

来源：[https ://shihho.wordpress.com/2012/11/28/sort_with_vectors/](https://shihho.wordpress.com/2012/11/28/sort_with_vectors/)

# android - 移动 MapFragment (SurfaceView) 导致黑色背景闪烁

> ID：14419521
> 
> 赞同：55
> 
> 时间：2013-01-19T22:24:13.343
> 
> 标签：android, surfaceview, android-maps, android-maps-v2, mapfragment

我正在尝试实现新的 Android Google Maps API (v2)。然而，它似乎并不适合[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)。您可能知道，`MapFragment`实现是基于`SurfaceView`. 问题是`SurfaceView`不喜欢移动它——我的意思是把它放在可移动的视图中：

*   [`ViewPager`](https://stackoverflow.com/questions/13837697/viewpager-with-google-maps-api-v2-mysterious-black-view/13993640#13993640),
*   [`ScrollView`](https://stackoverflow.com/questions/13746351/mapfragment-in-scrollview),
*   [`ListView`](https://stackoverflow.com/questions/14218124/new-gms-maps-mapview-rendering-lags-a-bit-when-in-a-listview?lq=1),
*   或前面提到的`SlidingMenu`。

当你移动它时，它会在最初放置像素的地方留下一个黑洞。它看起来像[这样](https://f.cloud.github.com/assets/2045380/11888/0cf2b480-456b-11e2-8633-277dac130328.png)。

这个问题可以通过在其上指定透明背景`SurfaceView`或什至在其上放置透明来部分解决`View`。我只是想不出结果是否仅对我来说是不可接受的，或者我有一个不同的问题使它看起来像它的样子。

**要查看它的外观，请观看[此视频](http://youtu.be/qSBuFqMliJM)。**

（对不起质量，但问题很容易看出）

当一个普通的列表视图（橙色屏幕）在打开时被拉开`SlidingMenu`，动画是流畅和漂亮的。但是一旦`MapFragment`出现，地图上就会出现一些奇怪的刷新/闪烁/同步问题。

在 HTC One S 和三星 Galaxy ACE 上测试。

* * *

~~我解决这个问题的超级疯狂的想法：每次开始动画开始时，截取`MapFragment`（使用 SurfaceView 应该可以）并在动画期间将其覆盖。但我真的不知道该怎么做......~~ [不可能截图地图](https://stackoverflow.com/questions/13773658/capture-screen-shot-of-googlemap-android-api-v2)，但也许有人会从中得到启发。

或者也许以其他方式禁用重绘地图，我不知道。

* * *

**更新：**

找到[了这个](http://android-developers.blogspot.com/2011/11/android-40-graphics-and-animations.html)。

看来 SurfaceView 可以更改为 TextureView 以消除这些限制。但是由于MapFragment是基于SurfaceView的，不知道能不能实现。

**另一个更新** 似乎这个问题已经在设备 4.1+ 上得到解决。他们只是使用了 TextureView。但在较低版本上，我们仍然必须使用变通方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-15T00:14:59.010

当然，正确的解决方案是让 Google 解决问题（请参阅 Android Maps V2 问题 4639：[http](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4639) ://code.google.com/p/gmaps-api-issues/issues/detail?id=4639 ）。

然而，我的一位同事建议简单地将地图扩展到其容器之外。如果我们将地图片段扩展到其容器的可见区域之外，如下所示：

```
android:layout_marginLeft="-40dp"
android:layout_marginRight="-40dp" 
```

我们可以减少/消除闪烁。较新的设备（例如 Galaxy Nexus）在这次黑客攻击后没有闪烁，而较旧的设备（例如 LG Optimus V）显示闪烁减少。我们必须扩展两边的边距，以便信息窗口在被选中时居中。

* * *

更新：谷歌在 8 月 28 日修复了这个问题，但我猜它仍然需要发布。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T23:05:00.313

这是一个疯狂的想法，不要移动 MapView ;-)

也就是说，在 FrameLayout 的应用程序后面创建一个 MapView 全屏宽度。然后将您的视图放在顶部，并在您需要显示它的位置打一个洞到 MapView。移动时，您需要更新地图位置以保持同步，以便用户继续看到地图的同一部分，但这应该比移动表面视图更好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-16T10:23:05.470

添加 `android:hardwareAccelerated="true"`您的清单文件。

例如：`<application android:name=".Sample" android:hardwareAccelerated="true" />`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-28T21:56:50.797

好吧，引用 Dianne Hackborn（Android 框架工程师）

> 表面视图实际上是在您的窗户后面，并且在窗户上打了一个孔供您查看。因此，您可以将东西放在窗口的顶部，但窗口中的任何内容都不会出现在其后面。 [原帖](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/jYjvm7ItpXQ "谷歌论坛帖子")

这种架构是您看到这些闪烁的部分原因。

由于双缓冲区，有时会出现一些闪烁：[Android 编码博客进一步解释](http://android-coding.blogspot.ca/2012/01/flickering-problems-due-to-double.html "双缓冲区解决方法")。

您还可以尝试将其子类化`SurfaceView`以尝试以不同方式绘制背景。我还没有看到不会将 z-index 更改为顶部的示例。[看看这个 SO 帖子](https://stackoverflow.com/questions/8391056/how-to-make-surfaceview-with-transparent-background "堆栈溢出")

否则，我建议仅`SurfaceHolder`在您的视图聚焦后获取（尝试在此之前制作一个临时视图）并删除`SurfaceView`while not in focus 和屏幕上的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-17T16:55:22.350

在我的场景中，我有一个初始片段，在单击按钮时，它会在第二个片段中交换，其中包含一个 MapFragment。我注意到这种闪烁仅在您第一次交换片段时发生 - 弹出返回堆栈，并在另一个相同类型的片段中交换不会导致闪烁。

因此，考虑到它与将初始 SurfaceView 添加到窗口有关，我尝试将 SurfaceView 的空实例添加到我最初加载的片段中，在它的主视图后面。还有宾果游戏，在下一个片段中制作动画时不再闪烁！

我知道这不是最干净的解决方案，但它有效。Google MapFragment（在我的例子中是 SupportMapFragment）仍然可以正常工作，因为未使用的 SurfaceView 在前一个片段中。

我应该添加我正在使用 v2 API。

**更新**@VenomVendor

我将空的 SurfaceView 添加到要显示的第一个片段，在索引 0 处 - 在主视图后面。在我的例子中，主页片段是包含谷歌地图片段的前一个片段，不确定这是否重要：

```
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class HomeFragment extends FragmentBase {
private SurfaceView sview;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_home, container, false);

    //this fixes google maps surface view black screen animation issue
    sview = new SurfaceView(getActivity());
    sview.setZOrderOnTop(true);    // necessary
    SurfaceHolder holder = sview.getHolder();
    holder.setFormat(PixelFormat.TRANSPARENT);

    container.addView(sview, 0);
    ...
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-14T11:26:04.963

> 不可能截取地图的屏幕截图，但也许有人会从中得到启发。

可以使用[GoogleMap 的快照界面](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.SnapshotReadyCallback)。现在您可以在滚动页面时显示地图的快照。有了这个，我解决了 ViewPager 的问题，也许您可​​以更改代码以适合您的 SlidingMenu。

这是我设置快照的代码（它与地图在同一个片段中，称为 FragmentMap.java）：

```
public void setSnapshot(int visibility) {
    switch(visibility) {
    case View.GONE:
        if(mapFragment.getView().getVisibility() == View.VISIBLE) {
            getMap().snapshot(new SnapshotReadyCallback() {
                @Override
                public void onSnapshotReady(Bitmap arg0) {
                    iv.setImageBitmap(arg0);
                }
            });
            iv.setVisibility(View.VISIBLE);
            mapFragment.getView().setVisibility(View.GONE);
        }
        break;
    case View.VISIBLE:
        if(mapFragment.getView().getVisibility() == View.GONE) {
            mapFragment.getView().setVisibility(View.VISIBLE);
            iv.setVisibility(View.GONE);
        }
        break;
    }
} 
```

其中“mapFragment”是我的 SupportedMapFragment，“iv”是一个 ImageView（使其成为 match_parent）。

在这里我控制滚动：

```
pager.setOnPageChangeListener(new OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            if(position == 0 && positionOffsetPixels > 0 || position == 1 && positionOffsetPixels > 0) {
                ((FragmentMap)adapter.getRegisteredFragment(1)).setSnapshot(View.GONE);
            } else if(position == 1 && positionOffsetPixels == 0) {
                ((FragmentMap)adapter.getRegisteredFragment(1)).setSnapshot(View.VISIBLE);
            }
        }
        @Override
        public void onPageScrollStateChanged(int arg0) {}
        @Override
        public void onPageSelected(int arg0) {}
    }); 
```

我的带有地图的片段（FragmentMap）位于位置 1，所以我需要控制从位置 0 到 1 以及从位置 1 到 2（第一个 if 子句）的滚动。“getRegisteredFragment()”是我的自定义 FragmentPagerAdapter 中的一个函数，其中我有一个名为“registeredFragments”的 SparseArray(Fragment)。

因此，每当您滚动到地图或从地图滚动时，您总会看到它的快照。这对我来说非常有效。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-22T21:11:59.213

这对我有用...将 map:zOrderOnTop="true" 添加到您的片段中...

```
<fragment
                android:id="@+id/map"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:name="com.google.android.gms.maps.SupportMapFragment""
                map:zOrderOnTop="true"/> 
```

请记住将此添加到您的父 ScrollView

```
xmlns:map="http://schemas.android.com/apk/res-auto" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-04T12:27:08.973

我在 webview 和 SlidingMenu 上遇到了同样的问题，我通过修改 SlidingMenu 源代码来解决，正如主要开发人员[在此处解释的那样。](https://github.com/jfeinstein10/SlidingMenu/issues/261#issuecomment-12786248)

> 注释掉 SlidingMenu 的 manageLayers 方法中的硬件加速。这似乎是唯一的解决方案，因为 SurfaceViews 不起作用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-06-24T11:09:55.257

尝试添加..

getHolder().setFormat(PixelFormat.TRANSLUCENT);

到 SurfaceView 的构造函数。TextureView 也应该可以工作，但需要您放弃对 sub api 14 设备的支持。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-07T06:37:12.587

为了防止 MapView（它实际上是一个 SurfaceView）产生黑洞，我添加了一个具有透明背景色的空视图来覆盖整个 MapView，这样它就可以防止 MapView 产生黑洞。它可能适用于您的情况。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-08-13T15:02:24.420

另一种替代解决方案是使用新`GoogleMap.snapshot()`功能，并使用地图截图代替；[如此处](https://stackoverflow.com/a/18212473/495800)所述。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-22T09:54:32.430

I had same issue of black screen on scrolling of list view, i was using map fragment with list view in same screen i have resolved this issue with use of the magical property **in xml** where i am talking list view just we have to put **android:scrollingCache="false"**.my issue is fixed try this property to stop lagging and flickering in your maps.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-11-09T20:26:15.670

如果可能，将您的 FrameLayout 更改为 RelativeLayout

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-12-04T04:13:15.930

我遇到了同样的问题，并使用了基于更改“可见性”的解决方法。

```
private GoogleMap mMap;
private SupportMapFragment mMapFragment;

mMapFragment = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.mapFragment));
mMap = mMapFragment.getMap();

//Change the visibility to 'INVISIBLE' before the animation to go to another fragment.
mMapFragment.getView().setVisibility(View.INVISIBLE);

//Change the visibility to 'VISIBLE' after coming back to the original fragment that has map fragment.
mMapFragment.getView().setVisibility(View.VISIBLE); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-02-21T13:20:25.737

伙计们，我发现的最佳解决方案是通过此实例化您的支持图。创造奇迹

```
SupportMapFragment mapFragment = SupportMapFragment.newInstance(new GoogleMapOptions().zOrderOnTop(true)); 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-01-30T04:42:48.620

这是我用来摆脱 ViewPager 中闪烁的一个非常简单的解决方法。我想这对于任何 Fragment 或其他动态添加的 MapView 都适用。

问题似乎并不是 MapView 本身，而是运行 MapView 所需的资源。这些资源仅在您第一次在 Activity 中启动 MapView 时加载，并重新用于每个后续 MapView，正如您所期望的那样。这种资源加载是导致屏幕闪烁的原因。

所以为了消除闪烁，我只是在我的 Activity 的布局中包含了另一个 MapView（在 Activity 中的位置无关紧要）。加载 Activity 后，我只需将额外 MapView 的 Visibility 设置为 GONE。这意味着当您使用 MapViews 启动任何 Fragment 时，您的 MapView 所需的所有资源都已准备就绪，没有延迟，没有闪烁，所有的快乐。

这当然是一种解决方法，而不是潜在问题的真正“解决方案”，但它会解决副作用。

因此，为了掩盖用于完整性的代码：

随机（但干净地）放置在我的活动布局中：

```
<com.google.android.gms.maps.MapView
        android:id="@+id/flash_map"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

然后在我的活动课上

```
private MapView flashMap;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            // Code omitted

    try {
        MapsInitializer.initialize(this);
    } catch (GooglePlayServicesNotAvailableException e) {
        e.printStackTrace();
    }
    flashMap = (MapView)findViewById(R.id.flash_map);
    flashMap.onCreate(savedInstanceState);
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
        flashMap.onSaveInstanceState(outState);
}

@Override
public void onResume() {
    super.onResume();
    flashMap.onResume();
    flashMap.setVisibility(View.GONE); // Just like it was never there...
}

@Override
public void onPause() {
    flashMap.onPause();
    super.onPause();
}

@Override
public void onDestroy() {
    flashMap.onDestroy();
    super.onDestroy();
}

@Override
public void onLowMemory() {
    super.onLowMemory();
    flashMap.onLowMemory();
} 
```

# php - 在 PHP 中使用会话

> ID：14419525
> 
> 赞同：-3
> 
> 时间：2013-01-19T22:24:26.823
> 
> 标签：php, session

我是 PHP 新手，我需要有人指导我完成会话。我的意思是，你如何保存和检索变量。

我怎样才能得出这样的变量？

如何将它们从一页传递到另一页？

ps：我基本上是在要求关于会话的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:32:00.360

The PHP manual has a [basic sessions usage](http://us1.php.net/manual/en/session.examples.basic.php) tutorial.

```
<?php
session_start();
if (!isset($_SESSION['count'])) {
  $_SESSION['count'] = 0;
} else {
  $_SESSION['count']++;
} 
```

Session variables persist between pages (as long as you call `session_start()` on each one), you don't have to do anything to get them to pass.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:29:43.780

Have a look at [this](http://www.tizag.com/phpT/phpsessions.php) tutorial, just to begin. It's very clear and it contains very good examples.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:33:41.813

`session_start();`在页面顶部开始会话使用。

要创建会话变量：

```
$myvariable = 1;
$_SESSION['variable'] = $myvariable; 
```

现在创建另一个`session_start();`顶部的页面

并打印会话变量，检查它是否存在，

```
if(isset($_SESSION['variable'])){

echo $_SESSION['variable'];

//which should print '1';

} 
```

要取消设置会话，请使用 destroy_session();

可以在[此处找到我用来学习 PHP 会话的出色而简单的教程](http://www.tizag.com/phpT/phpsessions.php)

我希望这有帮助。

谢谢

克里斯

# ruby-on-rails - 使用已登录的管理员用户通过 Devise 创建新用户

> ID：14419527
> 
> 赞同：2
> 
> 时间：2013-01-19T22:24:43.530
> 
> 标签：ruby-on-rails, ruby, devise

我正在使用 Devise 在 Rails 上构建服务，该服务需要“管理员”用户将普通用户添加到他们的组织帐户中。Devise 的默认行为不支持这一点，因为当登录的管理员用户尝试创建常规用户帐户时，会调用 ':require_no_authentication' 方法。

实现我正在寻找的功能的推荐方法是什么？

*   :require_no_authentication 由 Devise::RegistrationsController 类中的 prepend_before_filter 调用，而不是在 RegistrationsController 方法之一中调用，所以我不知道这是否可以被覆盖（如果我错了，请纠正我）。
*   我相信将管理员用户与普通用户分开是可行的，但是这些用户将共享非常相似的属性，所以我相信这样做会增加不必要的重复。
*   我目前正在尝试使用带有“users#new”和“users#create”控制器操作的常规设计注册流程创建新的管理员用户（他们反过来创建普通用户所属的组织），并允许管理员添加新的用户通过“用户#添加”操作。

如果可能有另一个更好的用户身份验证 gem 更适合我的需求，我很乐意看看切换到那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:27:48.567

这似乎更像是一个授权问题而不是身份验证问题。您可以使用授权 gem，例如[cancan](https://github.com/ryanb/cancan)，将角色分配给用户（例如 admin）并向这些角色授予权限。这与 Devise 一起工作得非常好。这是一个教程：

[http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/](http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/)

编辑：我想我可能误解了你的问题。也许您需要的只是另一个控制器来处理在设计控制器之外创建用户。您可以使用 cancan 将对该控制器的访问权限限制为仅限管理员。

# php - 使用时准备好的语句和空值？

> ID：14419530
> 
> 赞同：0
> 
> 时间：2013-01-19T22:24:50.003
> 
> 标签：php, mysqli

我需要评估用户是否在特定日期之后登录系统。为此，MySQL 数据库中有三个表，用户、调查和登录。调查包含需要与用户上次登录比较的时间点的日期。这是问题。

当我使用“？” 占位符，生成的 num_rows 计数始终为 0。但是当我在将查询语句交给 $mysqli->prepare() 之前分配值时，该过程按预期工作。不知何故， store_result() 没有选择该列。这是我的代码：

```
 if (isset($userId)){
//get survey release date
$res3 = $mysqli->query("SELECT sur_date,sur_url FROM survey ORDER BY sur_id DESC limit 1");
$array = $res3->fetch_assoc();
$theta_date = $array['sur_date'];
//$theta_date = "2013-01-18 01:00:00";

   //this didn't generate errors, but didn't output the correct result either.
   //$query = "SELECT login_id FROM logins WHERE login_user=? AND login_date>=?";
   //if ($stmt = $mysqli->prepare($query)){
   // $stmt->bind_param('ss',$userID,$theda_date);
   // $stmt->execute();

  //this works
  $query = "SELECT login_id FROM logins WHERE login_user='$userId' AND login_date>='$theta_date'";
    if ($stmt = $mysqli->prepare($query)){
    $stmt->execute() or die("The query did not work");

    //if number is greater than 0 do something
    $stmt->store_result();
      printf("The number of login ids after theta are %d",$stmt->num_rows);
  $stmt->close();
}else{
   echo "The query did not execute.";
}
 }else{
   echo "The User ID was not valid.";
   exit();
 }
 $mysqli->close(); 
```

任何见解都会有所帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:35:18.490

准备好的语句似乎与 $theta_date 日期时间格式有问题。$theta_date 在调查表中存储为“2013-01-18 01:00:00”。bind_param() 试图解析 $theta_date 作为参考。这是解决方案：

```
 //convert datetime to Unix timestamp with strtotime()
 $theta_date = $array['sur_date'];
 $timestamp = strtotime($theta_date);

 //In the prepared statement, use MySQL FROM_UNIXTIME function to convert timestamp
 $query = "SELECT login_id FROM logins WHERE login_user=? AND login_date>=FROM_UNIXTIME(?)";

 //changed the parameter types to integer and bound $timestamp to second placeholder
 if ($stmt = $mysqli->prepare($query)){
   $stmt->bind_param('ii',$userId,$timestamp);
   $stmt->execute();

//the rest is the same
 $stmt->store_result();
   printf("The number of login ids after theta are %d",$stmt->num_rows);
   $stmt->close();
} 
```

那是一种痛苦。

# python - 在 Django 启动时初始化一个类，然后在视图中引用它

> ID：14419532
> 
> 赞同：2
> 
> 时间：2013-01-19T22:25:12.637
> 
> 标签：python, django

我正在尝试在 Django 启动时进行一些预处理（我在 urls.py 中放置了一个运行一次的启动脚本），然后在我的视图中使用创建的对象实例。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:28:05.500

尝试使用单例设计模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:01:21.573

您可以使用[上下文处理器](https://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors)将其添加到您的模板上下文中。

如果您希望它在 中`View`，而不是在 中`Template`，那么您可以拥有一个具有此的基本 View 类，或者只是将引用导入到您的视图所在的模块中（并直接访问它）。

请注意，每个 django 线程可能在内存中具有对象的不同副本，因此这实际上应该仅用于只读访问。如果您对其进行更改，您可能会发现自己处于一个受伤的世界。

# css - 页脚穿过 div 的中间

> ID：14419534
> 
> 赞同：1
> 
> 时间：2013-01-19T22:25:26.167
> 
> 标签：css, html, footer

在过去的两天里，我一直在为我的投资组合网站解决这个问题，但还没有找到解决方案。

页面的基本结构是页眉、内容包装器（导航栏和内容 div）和页脚。问题是页脚正在穿过包装器 div 的中间，使内容在页脚周围和下方运行。我会发布截图，但我没有足够的声誉。

看起来包含简历信息的 div 是唯一导致问题的，而页脚仅对应于导航栏。

代码如下。

**附加信息：** 当我尝试将页脚的位置设置为固定时，它会从页面中完全消失。我还尝试删除 .wrapper div 并仅使用内容 div。我还尝试将 div 的位置更改为绝对和相对。

## HTML

```
<!DOCTYPE html5>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel='icon' href='/favicon.png' />
<link rel='stylesheet' href='main.css' />
<link rel='stylesheet' href='webfonts.css' />

<title>Kyle Simmonds: Design, Writing and Web</title>

</head>
<body>

<header>
    <!--<a class='headerlogo' href="http://kylesimmonds.com"><h1>Kyle Simmonds</h1></a>-->
    <a href='index.html'>
            <ul>
                <li id='title'>Kyle Simmonds</li>
                <li id='subtitle'>Copywriting, Graphic Design and Web Development</li>
            </ul>
    </a>
</header>

<div class='wrapper'>

<!-- NAVIGATION BAR -->
    <nav>       
            <ul class='firstlevel'>
                <li><a href='index.html'>Home</a></li>
                <li><a href='resume.html'>R&eacute;sum&eacute;</a></li>
                <li><a href='portfolio.html'>Portfolio</a></li>
                <li><a href='blog.html'>Musings</a></li>
                <li><a href='contact.html'><font color='#f00'>Contact Me</font></a>
                    <ul class='secondlevel'>
                        <li>Email: <a href='mailto:kbsimmonds@gmail.com'>kbsimmonds@gmail.com</a></li>
                    </ul>
                </li>
            </ul>
    </nav>

    <div class='content' id='resume'>

        <h2>ABOUT ME</h2>
            <p></p>
<hr />
        <h2>EXPERIENCE</h2>
            <h4>Gulliver's Travel</h4>
            <ul>
                <li id='jobtitle'>Social Media Intern</li>
                <li id='subhead'>January&ndash;August '12</li>
                <li>// Established and managed company's Facebook and Twitter pages</li>
                <li>// Created graphics for emails and promotions</li>
            </ul>

            <h4>TCU Schieffer School of Journalism</h4>
            <ul>
                <li id='jobtitle'>Website Assistant</li>
                <li id='subhead'>August '09&ndash;December '12</li>
                <li>// Uploaded content onto the school's website through HTML and CSS</li>
                <li>// Managed the site by keeping it free of visual and typographical errors</li>
            </ul>

            <h4>TCU Student Activities</h4>
            <ul>
                <li id='jobtitle'>Graphic Designer</li>
                <li id='subhead'>September '10&ndash;December '12</li>
                <li>// Designed posters for campus-wide events</li>
                <li>// Created invitations and printed materials for special events</li>
            </ul>

            <h4>Peaceable Kingdom Retreat for Children</h4>
            <ul>
                <li id='jobtitle'>Summer Staff</li>
                <li id='subhead'>Summer '10&ndash;'11</li>
                <li>// Facilitated activities for campers including high-ropes courses (zip line and rock climbing) and pool activities</li>
                <li>// Ensured a safe and fun environment for campers by being lifeguard, CPR and high-ropes certified</li>
            </ul>

<hr />  
        <h2>SKILLS</h2>
            <ul id='skills'>
                <li>// Advertising</li>
                <li>// Copywriting/editing</li>
                <li>// Graphic Design</li>
                <li>// Photoshop</li>
                <li>// InDesign</li>
                <li>// Illustrator</li>
                <li>// Web Development</li>
                <li>// HTML</li>
                <li>// CSS</li>
                <li>// jQuery</li>
                <li>// Audio/Video Editing</li>
            </ul>

<hr />
        <h2>EDUCATION</h2>
            <h4>Texas Christian University</h4>
            <ul>
                <li id='subhead'>December '12</li>
                <li>// BS Strategic Communication</li>
                <li>// Music Minor</li>
                <li>// Studies in Italian</li>
            </ul>

    </div>
</div>

<footer>
<p>&copy; 2013 Kyle Simmonds. All rights reserved.</p>
</footer>

<script src='jquery-1.8.3.js'></script>
<script src='jquery-ui-1.9.2.custom.min.js'></script>

</body>
</html> 
```

## CSS

```
body{
font-family:'OpenSans', sans-serif;
margin:0 auto;
padding:0px;
width:100%;
height:100%;
}

a, a:hover,a:active,a:visited{
text-decoration:none;
color:#000;
}

header{
width:100%;
height:70px;
background:#000;
margin:0 auto;
padding:0px;
}

    header h1{
        margin:0 0 0 10px;
        }

    header h4{
        font-weight:300;
        margin:10px;
        }

            header ul{
                width:960px;
                margin:0px 0 0 0;
                padding:8px 0 0 50;
                overflow:hidden;
                }

            header li{
                list-style:none;
                display:inline;
                }

                    #title{
                        font-size:36px;
                        color:#fff;
                        }

                    #subtitle{
                        font-size:12px;
                        font-weight:lighter;
                        font-style:italic;
                        color:#ddd;
                        }

.wrapper{
height:100%;
width:960px;
margin:0 auto;
margin-bottom:10px;
padding:0px;
position:relative;
}

    nav{
        height:100%;
        width:300px;
        margin:0 auto;
        float:left;
        padding:10px;
        }

            nav .firstlevel{
                height:100%;
                margin:0px;
                padding:0px;
                display:block;
                border-right:solid 2px #000;
                float:left;
                }

            nav .firstlevel li{
                list-style-type:none;
                font-weight:lighter;
                font-size:16px;
                padding:10px;
                }

                    nav .secondlevel ul{
                        display:inline;
                        }

                    nav .secondlevel li{
                        font-size:12px;
                        margin:0 0 0 -30px;
                        padding:10px;
                        }

    .content{
        height:100%;
        width:600px;
        margin:10px 0 0 50;
        padding:0px;
        position:absolute;
        }

            .content p{
                font-size:12px;
                }

                hr{
                    border:0;
                    height:1px;
                    background:#aaa;
                    }

                    #resume{
                        display:inline;
                        }

                            #resume h2{
                                font-size:16px;
                                color:#aaa;
                                margin-bottom:5px;
                                padding:0;
                                }

                            #resume h4{
                                font-size:14px;
                                color:#444;
                                margin-top:15px;
                                margin-bottom:0;
                                }

                            #resume ul{
                                margin:0 0 0 0px;
                                }

                                    #jobtitle{
                                        font-weight:bold;
                                        font-size:16px;
                                        margin:3px 0 0 0;
                                        }

                                    #subhead{
                                        color:#aaa;
                                        }

                            #resume li{
                                font-size:12px;
                                list-style:none;
                                display:block;
                                margin:0;
                                padding:0;
                                }

footer{
background-color:#000;
height:6%;
width:100%;
margin:0 auto;
margin-bottom:0px;
padding:0px 0 0 0;
position:absolute;
clear:both;
}

    footer p{
        position:relative;
        font-size: 10px;
        color:#fff;
        text-align:right;
        margin:8px 10 0 0;
        } 
```

此外，如果您有建议让这个问题成为一个更好的问题或更好的代码，请告诉我。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:52:38.690

好的，所以我有一些建议。你可以去看看更新的 jsFiddle，在这里：

[http://jsfiddle.net/tf4cq/1/](http://jsfiddle.net/tf4cq/1/)

基本上，没有任何充分的理由进行`.content`绝对定位。您浮动侧边栏（您的导航菜单），因此要确保内容在左侧正确排列，只需添加一个`left-padding`等于或大于侧边栏宽度的值。

您的页脚没有出现在您认为应该的位置的原因是，只要您应用`float`or `position: absolute`(or `fixed`，为此，它上面的两个元素（导航栏和内容）都会从正常文档流中取出事情）。

基本上，您只需要稍微更新一下 CSS 文件：

```
body{
    font-family:'Open Sans', sans-serif;
    margin:0 auto;
    padding:0;
    width:100%;
    height:100%;
}

a, a:hover, a:active, a:visited{
    text-decoration:none;
    color:#000;
}

header{
    width:100%;
    height:70px;
    background:#000;
    margin:0 auto;
    padding:0;
}

    header h1{
        margin:0 0 0 10px;
    }

    header h4{
        font-weight:300;
        margin:10px;
    }

    header ul{
        width:960px;
        margin:0;
        padding:8px 0 0 50;
        overflow:hidden;
    }

    header li{
        list-style:none;
        display:inline;
    }

#title{
    font-size:36px;
    color:#fff;
}

#subtitle{
    font-size:12px;
    font-weight:lighter;
    font-style:italic;
    color:#ddd;
}

.wrapper{
    height:100%;
    width:960px;
    margin:0 auto 10px;
    padding:0;
    position:relative;
}

nav{
    height:100%;
    width:300px;
    margin:0 auto;
    float:left;
    padding:10px;
}

    nav .firstlevel{
        height:100%;
        margin:0px;
        padding:0px;
        display:block;
        border-right:solid 2px #000;
        float:left;
    }

    nav .firstlevel li{
        list-style-type:none;
        font-weight:lighter;
        font-size:16px;
        padding:10px;
    }

    nav .secondlevel ul{
        display:inline;
    }

    nav .secondlevel li{
        font-size:12px;
        margin:0 0 0 -30px;
        padding:10px;
    }

.content{
    height:100%;
    width:600px;
    margin:10px;
    padding:0;
    padding-left:300px;
}

    .content p{
        font-size:12px;
    }

hr{
    border:0;
    height:1px;
    background:#aaa;
}

#resume{
}

    #resume h2{
        font-size:16px;
        color:#aaa;
        margin-bottom:5px;
        padding:0;
    }

    #resume h4{
        font-size:14px;
        color:#444;
        margin-top:15px;
        margin-bottom:0;
    }

    #resume ul{
        margin:0 0 0 0px;
    }

    #resume li{
        font-size:12px;
        list-style:none;
        display:block;
        margin:0;
        padding:0;
    }

#jobtitle{
    font-weight:bold;
    font-size:16px;
    margin:3px 0 0 0;
}

#subhead{
    color:#aaa;
}

footer{
    background-color:#000;
    height:6%;
    width:100%;
    margin:0 auto;
    margin-bottom:0px;
    padding:0;
    position:absolute;
    clear:both;
}

    footer p{
        position:relative;
        font-size: 10px;
        color:#fff;
        text-align:right;
        margin:8px 10 0 0;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:36:28.217

我（愚蠢地）意识到 DOCTYPE 说的是 html5，而 html 是正确的声明。@TiesonT。感谢您的帮助。更改 DOCTYPE 解决了这个问题。

# java - 如何使用 XSL 动态设置属性值

> ID：14419552
> 
> 赞同：0
> 
> 时间：2013-01-19T22:27:26.940
> 
> 标签：java, html, xml, xslt

我是 xslt 的新手，我正在做一个聊天应用程序，我想将用户会话保存为 xml 文件，这些文件以用户预定义的颜色和字体显示，所以我使用 xslt 来实现这一点，但我不知道如何从 xml 中获取字体并将其应用到 html 标记中，使其与用户选择的字体一起显示。

```
<xsl:choose>
    <xsl:when test="/body/msg[italic/text()='true']">
        <i>
            <font family="/body/msg[font/text()] color="/body/msg/color">
                <xsl:value-of select="from" /><p>: </p>
                <xsl:value-of select="content"/><br/>
            </font>
        </i>
    </xsl:when>
    <xsl:when test="/body/msg[bold/text()='true']">
        <b>
            <font family="/body/msg[font/text()]" color="/body/msg/color">
                <xsl:value-of select="from" /><p>: </p>
                <xsl:value-of select="content"/><br/>
            </font>
        </b>
    </xsl:when>
    <xsl:when test="/body/msg[bold/text()='true'] and /body/msg[italic/text()='true']">
        <b>
            <i>
                <font family="/body/msg[font/text()]" color="/body/msg/color">
                    <xsl:value-of select="from" /><p>: </p>
                    <xsl:value-of select="content"/><br/>
                </font>
            </i>
        </b>
    </xsl:when> 
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:56:15.097

没有看到您的输入格式很难猜测，但是我认为您正在寻找属性值模板（`{ }`在文字结果元素属性值中使用）。如果你改变

```
 <font family="/body/msg[font/text()]" color="/body/msg/color"> 
```

至

```
 <font family="{/body/msg[font/text()]}" color="{/body/msg/color}"> 
```

然后`family`and`color`属性将通过评估这些 XPath 来获取值，尽管 Xpath for family 看起来很可疑。以上将给出整个 msg 元素的字符串值，我怀疑它应该更像是`/body/msg/font` 提取字体元素的字符串值。（如果可能，通常最好避免使用`text()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:11:36.897

我可以建议使用这样的方法吗？如果可能，最好避免重复大部分代码（这被称为[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，如果您需要更改该`<font>`部分和其中的内容，则无需在三个地方更改它.这也处理既没有也没有指定的情况`bold`,`italic`你目前没有考虑到：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="body">
    <body>
      <xsl:apply-templates select="msg" />
    </body>
  </xsl:template>

  <xsl:template match="msg">
    <xsl:param name="formatting" select="bold | italic"/>

    <xsl:choose>
      <xsl:when test="$formatting[self::bold and . = 'true']">
        <b>
          <xsl:apply-templates select=".">
            <xsl:with-param name="formatting" select="$formatting[not(self::bold)]" />
          </xsl:apply-templates>
        </b>
      </xsl:when>
      <xsl:when test="$formatting[self::italic and . = 'true']">
        <i>
          <xsl:apply-templates select=".">
            <xsl:with-param name="formatting" select="$formatting[not(self::italic)]" />
          </xsl:apply-templates>
        </i>
      </xsl:when>
      <xsl:otherwise>
        <font family="{font}" color="{color}">
          <xsl:value-of select="from" />
          <p>: </p>
          <xsl:value-of select="content"/>
          <br/>
        </font>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<root>
  <body>
    <msg>
      <bold>true</bold>
      <italic>false</italic>
      <font>Arial</font>
      <color>Blue</color>
      <from>Shelly</from>
      <content>Hey, how are you doing?</content>
    </msg>
    <msg>
      <bold>false</bold>
      <italic>true</italic>
      <font>Times New Roman</font>
      <color>Red</color>
      <from>Tom</from>
      <content>What's up?</content>
    </msg>
    <msg>
      <bold>false</bold>
      <italic>false</italic>
      <font>Courier</font>
      <color>Yellow</color>
      <from>Fred</from>
      <content>I've been trying to reach you</content>
    </msg>
    <msg>
      <bold>true</bold>
      <italic>true</italic>
      <font>Comic Sans</font>
      <color>Green</color>
      <from>Lisa</from>
      <content>Talk to you later.</content>
    </msg>
  </body>
</root> 
```

产生：

```
<body>
  <b>
    <font family="Arial" color="Blue">
      Shelly<p>: </p>Hey, how are you doing?<br />
    </font>
  </b>
  <i>
    <font family="Times New Roman" color="Red">
      Tom<p>: </p>What's up?<br />
    </font>
  </i>
  <font family="Courier" color="Yellow">
    Fred<p>: </p>I've been trying to reach you<br />
  </font>
  <b>
    <i>
      <font family="Comic Sans" color="Green">
        Lisa<p>: </p>Talk to you later.<br />
      </font>
    </i>
  </b>
</body> 
```

# java - Apache http客户端->本地 地址绑定->一段时间后BindException

> ID：14419555
> 
> 赞同：2
> 
> 时间：2013-01-19T22:27:49.037
> 
> 标签：java, concurrency, connection-pooling, apache-httpclient-4.x

操作系统：Linux (Debian)
Java：Java(TM) SE 运行时环境（内部版本 1.7.0_05-b06）
Java：Java HotSpot(TM) 64 位服务器 VM（内部版本 23.1-b03，混合模式）
Apache http 客户端：v4。 2.3（最新）

我想创建一个具有多个客户端的 PoolingConnectionManager，每个客户端都有其唯一的本地地址 (ConnRoutePNames.LOCAL_ADDRESS)。
这些客户端将被多个工作人员使用（每个工作人员选择随机客户端并执行请求）。

**问题是**：当我为客户端设置本地地址时，经过一段时间（例如 1 分钟），我总是收到 java.net.BindException 消息“地址已在使用中”。

**问题**：是bug吗？

```
java.net.BindException: Address already in use
at java.net.PlainSocketImpl.socketBind(Native Method) ~[na:1.7.0_05]
at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376) ~[na:1.7.0_05]
at java.net.Socket.bind(Socket.java:627) ~[na:1.7.0_05]
at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:120) ~[httpclient-4.2.3.jar:4.2.3]
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.2.3.jar:4.2.3]
at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294) ~[httpclient-4.2.3.jar:4.2.3]
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:645) ~[httpclient-4.2.3.jar:4.2.3]
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:480) ~[httpclient-4.2.3.jar:4.2.3]
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906) ~[httpclient-4.2.3.jar:4.2.3]
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805) ~[httpclient-4.2.3.jar:4.2.3]
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784) ~[httpclient-4.2.3.jar:4.2.3]
at controllers.Test$Worker.run(Test.java:67) ~[test_2.9.1-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]
at java.lang.Thread.run(Thread.java:722) [na:1.7.0_05] 
```

代码（简化）：

```
public static void main(String[] args) throws UnknownHostException
{
    ClientConnectionManager connManager = buildConnectionManager(30);

    List<HttpClient> clients = new ArrayList<>();
    for(int i=0; i<8; ++i)
    {
        HttpClient client = buildClient(connManager, InetAddress.getByName("111.111.111." + (50 + i));
        clients.add(client);
    }

    for(int i=0; i<30; ++i)
    {
        new Thread(new Worker(clients)).start();
    }
}

public static ClientConnectionManager buildConnectionManager(Integer parallelism)
{
    PoolingClientConnectionManager connectionManager = new PoolingClientConnectionManager();
    connectionManager.setMaxTotal(parallelism);
    connectionManager.setDefaultMaxPerRoute(parallelism);

    return connectionManager;
}

public static HttpClient buildClient(ClientConnectionManager connectionManager, InetAddress localAddress)
{
    DefaultHttpClient httpClient = new DefaultHttpClient(connectionManager);
    HttpParams params = httpClient.getParams();
    params.setParameter(ConnRoutePNames.LOCAL_ADDRESS, localAddress);

    return httpClient;
}

private static class Worker implements Runnable
{
    private List<HttpClient> clients = null;

    public Worker(List<HttpClient> clients)
    {
        this.clients = clients;
    }

    public void run()
    {

        do
        {
            HttpGet httpGet = new HttpGet("http://google.com/robots.txt");
            HttpClient client = this.clients.get(new Random().nextInt(this.clients.size()));

            try
            {
                HttpResponse httpResponse = client.execute(httpGet);
                EntityUtils.consume(httpResponse.getEntity());

                logger.debug("Success request");
            }
            catch(IOException e)
            {
                httpGet.abort();
                logger.info("IO error", e);
            }
        }
        while(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:04:05.597

此问题可能与您的 TCP 堆栈有关。我不认为这是 HttpClient 中的错误。您可以在这里找到解决方案： [http ://planet.jboss.org/post/concurrent_high_throughput_performance_testing_with_jmeter](http://planet.jboss.org/post/concurrent_high_throughput_performance_testing_with_jmeter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:40:39.227

我能想到的唯一理论是 TCP/IP 堆栈用尽端口并开始为新连接分配相同的端口号，而旧连接尚未完全清理。我没有看到这个问题是 HttpClient 中的错误的证据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:49:58.470

感谢您的回答！
是的，问题出在 tcp/ip 堆栈上，但我不明白为什么 :)

所以，下面解释原因。

我创建了连接管理器（例如 size=10）、几个客户端（每个客户端都有其唯一的本地地址）和几个工作人员。
每个工作人员随机获取客户端并执行请求。
因此，一个客户端可能同时由多达 10 个工作人员并行执行。
在另一个时候，另一个客户端可以由多达 10 个工作人员并行执行。
这就是为什么管理器中的所有 10 个连接都不能保持活动状态，它们一直在关闭/创建。

对不起，打扰你！

# c++ - 检查移动未初始化的变量并使用移动的变量

> ID：14419560
> 
> 赞同：1
> 
> 时间：2013-01-19T22:28:09.677
> 
> 标签：c++, c++11, g++, warnings, move

在调试会话之后，我意识到下一个示例代码编译时没有警告（g++-4.7.2 -Wextra 和 -Wall）

```
char *p;
char *q = std::move(p);
*p = 'p';
*q = 'q'; 
```

我有点震惊，对此我有三个问题。

1-我是否遗漏了有关移动语义的内容，并且在这种情况下没有发出警告是有原因的，还是 gcc 的检查不够好？

2-下一个代码应该发出警告吗？

```
char c = 'c';
char *p = &c;
char *q = std::move(p);
*p = 'p'; 
```

据我了解， after`std::move(p)` `p`可以保存任何值，因此一旦`p`被移动就像一个未初始化的变量。

3-其他工具/编译器可以检查这些错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:40:00.270

> 1-我遗漏了一些关于移动语义的东西，在这种情况下有理由不发出警告，或者 gcc 检查不够好？

代码是错误的，所以警告会很好。G++ 不够聪明，无法“看穿”对`std::move`. 通过引用函数（该函数可能会初始化变量）传递未初始化的变量是有效的，因此调用`std::move`自身不会触发警告。因为`q`被分配了一个值，所以它似乎被初始化给编译器。

如果我打开优化以便 G++ 内联调用，`std::move`那么我会收到来自 G++ 4.7 的错误：

```
f.cc: In function ‘int main()’:
f.cc:6:9: warning: ‘p’ is used uninitialized in this function [-Wuninitialized] 
```

这是因为对编译器的调用`std::move`不再是“不透明的”，当它分析内联代码时，它可以看到`p`永远不会被赋值。编译器仍然不够聪明，看不到它`q`永远不会得到一个*好的*值，里面的转换`std::move`可能会让编译器感到困惑。

> 2-下一个代码应该发出警告吗？

不`std::move`，不会改变指针等基本类型，因此不会改变 的值`p`。标准库表示，对象在被移动后处于“有效但未指定”状态，因为标准通常不定义移动构造函数或移动赋值运算符的确切行为，但对于基本类型，例如`int`和`char*`没有移动构造函数。`std::move(p)`只是将对象转换为右值，它不会改变它，并且`q`用值初始化也不会改变它 - 它只是复制值。

> 3-其他工具/编译器可以检查这些错误吗？

即使启用了优化，Clang 和 ICC 也无法警告第一个示例。

请注意，尽管警告非常有用，但编译器并不完美，不可能警告所有不安全的代码。当不安全的代码没有收到警告时，你不应该感到完全惊讶（也许打开一个错误报告让编译器请求改进）——这并不意味着代码是好的。没有警告并不意味着没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:42:44.757

指针的移动构造函数是微不足道的，这意味着它与它的复制构造函数相同：复制值。因此，就 C++11 而言，这将复制指针。在您的第一种情况下，它正在复制未初始化的指针。

现在，如果这些是`std::unique_ptr`对象，那将不是正确的代码。但是没有理由期望编译器会警告它，因为编译器无法*确定*移出对象不能`operator*`调用它。

通常，标准库声明已被移出的对象处于有效但未定义的状态。例如，这是完全合法的：

```
std::vector<int> src = ...;
std::vector<int> dest = std::move(src);
src.assign(...); 
```

`std::unique_ptr`不同之处在于它准确地指定了移动对象离开它的状态。但是编译器不能假设任何类型。它不能假设一个对象处于任何特定函数调用都*必须*失败的无效状态。

# java - 为什么这个对象不能序列化？

> ID：14419564
> 
> 赞同：1
> 
> 时间：2013-01-19T22:28:31.443
> 
> 标签：java, serialization, plugins, minecraft, bukkit

好的，对于我的 Bukkit 插件，我需要以下 java 类 (NewItem.java) 可序列化，但事实并非如此。当我的插件尝试保存它时，它给了我错误：

```
 16:33:23 [SEVERE] java.io.NotSerializableException: org.bukkit.inventory.ItemSta
ck
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeObject0(Unknown Sourc
e)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeObject(Unknown Source
)
16:33:23 [SEVERE]       at java.util.ArrayList.writeObject(Unknown Source)
16:33:23 [SEVERE]       at sun.reflect.GeneratedMethodAccessor43.invoke(Unknown
Source)
16:33:23 [SEVERE]       at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
16:33:23 [SEVERE]       at java.lang.reflect.Method.invoke(Unknown Source)
16:33:23 [SEVERE]       at java.io.ObjectStreamClass.invokeWriteObject(Unknown S
ource)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeSerialData(Unknown So
urce)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeOrdinaryObject(Unknow
n Source)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeObject0(Unknown Sourc
e)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeObject(Unknown Source
)
16:33:23 [SEVERE]       at java.util.HashMap.writeObject(Unknown Source)
16:33:23 [SEVERE]       at sun.reflect.GeneratedMethodAccessor42.invoke(Unknown
Source)
16:33:23 [SEVERE]       at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
16:33:23 [SEVERE]       at java.lang.reflect.Method.invoke(Unknown Source)
16:33:23 [SEVERE]       at java.io.ObjectStreamClass.invokeWriteObject(Unknown S
ource)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeSerialData(Unknown So
urce)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeOrdinaryObject(Unknow
n Source)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeObject0(Unknown Sourc
e)
16:33:23 [SEVERE]       at java.io.ObjectOutputStream.writeObject(Unknown Source
)
16:33:23 [SEVERE]       at com.tommy3244.plugins.MakeYourOwnBlocks.SaveLoadAPI.s
ave(SaveLoadAPI.java:16)
16:33:23 [SEVERE]       at com.tommy3244.plugins.MakeYourOwnBlocks.MakeYourOwnBl
ocks.onDisable(MakeYourOwnBlocks.java:60)
16:33:23 [SEVERE]       at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlug
in.java:219)
16:33:23 [SEVERE]       at org.bukkit.plugin.java.JavaPluginLoader.disablePlugin
(JavaPluginLoader.java:481)
16:33:23 [SEVERE]       at org.bukkit.plugin.SimplePluginManager.disablePlugin(S
implePluginManager.java:400)
16:33:23 [SEVERE]       at org.bukkit.plugin.SimplePluginManager.disablePlugins(
SimplePluginManager.java:393)
16:33:23 [SEVERE]       at org.bukkit.plugin.SimplePluginManager.clearPlugins(Si
mplePluginManager.java:434)
16:33:23 [SEVERE]       at org.bukkit.craftbukkit.v1_4_6.CraftServer.reload(Craf
tServer.java:563)
16:33:23 [SEVERE]       at org.bukkit.Bukkit.reload(Bukkit.java:184)
16:33:23 [SEVERE]       at org.bukkit.command.defaults.ReloadCommand.execute(Rel
oadCommand.java:23)
16:33:23 [SEVERE]       at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCo
mmandMap.java:186)
16:33:23 [SEVERE]       at org.bukkit.craftbukkit.v1_4_6.CraftServer.dispatchCom
mand(CraftServer.java:514)
16:33:23 [SEVERE]       at org.bukkit.craftbukkit.v1_4_6.CraftServer.dispatchSer
verCommand(CraftServer.java:506)
16:33:23 [SEVERE]       at net.minecraft.server.v1_4_6.DedicatedServer.al(Dedica
tedServer.java:260)
16:33:23 [SEVERE]       at net.minecraft.server.v1_4_6.DedicatedServer.r(Dedicat
edServer.java:225)
16:33:23 [SEVERE]       at net.minecraft.server.v1_4_6.MinecraftServer.q(Minecra
ftServer.java:494)
16:33:23 [SEVERE]       at net.minecraft.server.v1_4_6.MinecraftServer.run(Minec
raftServer.java:427)
16:33:23 [SEVERE]       at net.minecraft.server.v1_4_6.ThreadServerApplication.r
un(SourceFile:849) 
```

NewItem.java 的源代码在这里：

```
 package com.tommy3244.plugins.MakeYourOwnBlocks;

import java.util.*;
import java.util.logging.Logger;
import java.io.Serializable;
import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.block.Block;
import org.bukkit.configuration.ConfigurationSection;
import org.bukkit.entity.Player;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.ShapedRecipe;

public class NewItem implements Serializable
{
   public int id;
 public byte data;
  public int damage;
 public String name;
    public List<String> lore;
    public List<List<String>> commands;
    public NewItem(List<String> lore, String name, int itemid, byte itemdata, List<List<String>> lines, int damage, boolean hasRecipe, ConfigurationSection section)
 {
      id = itemid;
       data = itemdata;
       this.name = name;
      this.damage = damage;
      this.lore = lore;
      commands = lines;
      ItemStack stack;
       if(data != 0)
      {
          stack = new ItemStack(id, data);
       }
      else
       {
          stack = new ItemStack(id);
     }
      if(hasRecipe)
      {
      try
        {
      ShapedRecipe recipe = new ShapedRecipe(stack);
     String r1 = section.getString("items."+name+".r1");
        String r2 = section.getString("items."+name+".r2");
        String r3 = section.getString("items."+name+".r3");
        List<Integer> defines = section.getIntegerList("items."+name+".defines");
        Character[] chars = {'1', '2', '3', '4', '5', '6', '7', '8', '9'};
     List<Character> charlist = Arrays.asList(chars);
     for(int defined : defines)
     {
          Material md = Material.getMaterial(defined);

           recipe.setIngredient(charlist.get(0), md);
     }
      String[] rows = {r1, r2, r3};
      recipe.shape(rows);
        Bukkit.addRecipe(recipe);
      }
      catch(Exception error)
     {

       }
      }
  }
  public NewItem(List<String> lore, String name, int itemid, List<List<String>> lines, int damage, boolean hasRecipe, ConfigurationSection section)
    {
      this(lore, name, itemid, (byte)0, lines, damage, hasRecipe, section);
  }
  public Logger getLogger()
  {
      return Bukkit.getServer().getPluginManager().getPlugin("MakeYourOwnBlocks").getLogger();
 }
  public int getItem()
   {
      return id;
 }
  public String getName()
    {
      return name;
   }
  public boolean onRightClick(Player p, boolean right, boolean block)
    {
      int isright; 
      int isblock;
       if(right)
      {
          isright = 1;
       }
      else
       {
          isright = 0;
       }
      if(block)
      {
          isblock = 1;
       }
      else
       {
          isblock = 0;
       }
      try
        {
          List<String> cmds = commands.get(0);
         for(String line : cmds)
            {
              line = line.replaceAll("\\<block\\>", String.valueOf(isblock));
                line = line.replaceAll("\\<right\\>", String.valueOf(isright));
                String[] segments = line.split(" ");
             String cmd = segments[0];
              List<String> rest = Arrays.asList(segments);
             getLogger().info(String.valueOf(rest));
                rest.remove(0);
                StringBuilder sb = new StringBuilder();
                for(String stst : rest)
                {
                  sb.append(stst);
               }
              String reststr = sb.toString();
                if(cmd.equalsIgnoreCase("cmd"))
              {
                  Bukkit.getServer().dispatchCommand(Bukkit.getConsoleSender(), reststr);
                }
              if(cmd.equalsIgnoreCase("setblock"))
             {
                  Block b = p.getWorld().getBlockAt(Integer.parseInt(rest.get(0)), Integer.parseInt(rest.get(1)), Integer.parseInt(rest.get(2)));
                    b.setTypeId(Integer.parseInt(rest.get(3)));
                    if(rest.size() > 4)
                 {
                      b.setData((byte)Integer.parseInt(rest.get(5)));
                    }
              }
              if(cmd.equalsIgnoreCase("say"))
              {
                  p.sendMessage(reststr);
                }
              if(cmd.equalsIgnoreCase("kill"))
             {
                  p.setHealth(0);
                }
              if(cmd.equalsIgnoreCase("hurt"))
             {
                  p.setHealth(p.getHealth()-Integer.parseInt(rest.get(0)));
              }
          }
      }
      catch(Exception error)
     {
          error.printStackTrace();
           return false;
      }
      return true;
   }
  public boolean onLeftClick(Player p, boolean right, boolean block)
 {
      int isright; 
      int isblock;
       if(right)
      {
          isright = 1;
       }
      else
       {
          isright = 0;
       }
      if(block)
      {
          isblock = 1;
       }
      else
       {
          isblock = 0;
       }
      try
        {
          List<String> cmds = commands.get(1);
         for(String line : cmds)
            {
              line.replaceAll("\\<block\\>", String.valueOf(isblock));
               line.replaceAll("\\<right\\>", String.valueOf(isright));
               String[] segments = line.split(" ");
             String cmd = segments[0];
              List<String> rest = Arrays.asList(segments);
             rest.remove(rest.get(0));
              StringBuilder sb = new StringBuilder();
                for(String stst : rest)
                {
                  sb.append(stst);
               }
              String reststr = sb.toString();
                if(cmd.equalsIgnoreCase("cmd"))
              {
                  Bukkit.getServer().dispatchCommand(Bukkit.getConsoleSender(), reststr);
                }
              if(cmd.equalsIgnoreCase("setblock"))
             {
                  Block b = p.getWorld().getBlockAt(Integer.parseInt(rest.get(0)), Integer.parseInt(rest.get(1)), Integer.parseInt(rest.get(2)));
                    b.setTypeId(Integer.parseInt(rest.get(3)));
                    if(rest.size() > 4)
                 {
                      b.setData((byte)Integer.parseInt(rest.get(5)));
                    }
              }
              if(cmd.equalsIgnoreCase("say"))
              {
                  p.sendMessage(reststr);
                }
              if(cmd.equalsIgnoreCase("kill"))
             {
                  p.setHealth(0);
                }
              if(cmd.equalsIgnoreCase("hurt"))
             {
                  p.setHealth(p.getHealth()-Integer.parseInt(rest.get(0)));
              }
          }
      }
      catch(Exception error)
     {
          return false;
      }
      return true;
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T22:30:14.790

您需要实施[`java.io.Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)：

```
public class NewItem implements Serializable 
```

来自 JavaDoc：

> 类的可序列化性由实现 java.io.Serializable 接口的类启用。未实现此接口的类将不会对其任何状态进行序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于识别可序列化的语义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T22:29:37.810

[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)通过实现接口将其标记为可序列化

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T22:41:14.647

你用了一些`List`s。`List`不执行`Serializable`。[并非所有`List`的实现都可能是`Serializable`]

我会尝试使用`ArrayList`which implements `Serializable`。

理所当然`NewItem`也必须落实`Serializable`。

# php - Highchart 数组 Xaxis

> ID：14419566
> 
> 赞同：1
> 
> 时间：2013-01-19T22:28:43.983
> 
> 标签：php, highcharts

我有一个使用 highcharts 的 php 页面。我似乎无法让 xaxis 使用数组填充。

我有一个使用以下方法制作的 php 数组：

```
$x = array(); 
while ($data = mysql_fetch_assoc($results)){ 
    $x[]= $data['sold_date'];  
} 
```

当我 print_r 我得到

> 数组 ( [0] => 2009-01-20 [1] => 2009-04-17 [2] => 2009-09-15 [3] => 2009-10-16 [4] => 2010-01 -04 [5] => 2010-04-01 [6] => 2010-07-23 [7] => 2010-10-20 [8] => 2011-01-07 [9] => 2011-05 -27 [10] => 2011-07-01 [11] => 2011-10-14 [12] => 2012-01-27 [13] => 2012-04-25 [14] => 2012-07 -24 [15] => 2012-11-07 [16] => 2013-01-18 )

现在在 highcharts 中，我希望上面的数组是 xaxis 的值。我不知道我做错了什么。我努力了：

```
xAxis: {
  categories: ["<?php echo $x;?>"]
}, 
```

但它返回：单词数组 1 2 4 5 6 7... 而不是列出数组中的日期。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:45:02.717

使用 join() 函数进行数组

```
categories: ['<?php echo join($categories, "', '") ?>'] 
```

示例类别数组：

```
<?php
   $categories[] = 'Jan';
   $categories[] = 'Feb';
   $categories[] = 'Mar';
   $categories[] = 'Apr';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:57:18.647

```
<?php
$i = 0;
$num = count($x);
?>

xAxis: {
  categories: [<?php foreach($x as $key) { 
                         if(++$i === $num) { // this will remove the comma if last in array.
                             $comma = ''; 
                         }
                         else {
                             $comma = ',';
                         }
                         echo "'" . $key . "'" . $comma . ""; } ?>]
}, 
```

这是未经测试的。

# java - Apache Tomcat - 来回流

> ID：14419567
> 
> 赞同：0
> 
> 时间：2013-01-19T22:28:48.830
> 
> 标签：java, tomcat, stream

我有一个 java 客户端和一些 Tomcat 服务器 - Web 服务器。我必须在同一台服务器上执行一系列操作。我想到的是使用相同的 tcp 会话，使用以下链：读、写、读、写...-在服务器端写、读、写、读...-在客户端

问题 - 读取后，在 tomcat 服务器上写入 - 下一次读取得到 -1 或 EOFException。

客户端代码：

```
 java.net.URL u = new URL("http", "127.0.0.1", 8080, "/Dyno/BasicServlet");
    HttpUrlConnection huc = (HttpURLConnection)u.openConnection();
    huc.setRequestMethod("POST");
    huc.setDoOutput(true);
    huc.connect();
    os = huc.getOutputStream();
    byte[] b = info();
    os.write(b)
    os.flush();
    is = huc.getInputStream();
    byte[] b2 = new byte[10];
    is.read(b2);
    byte[] b = info(b2);
    os.write(b) 
```

服务器代码：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    ServletInputStream is = request.getInputStream();
    ServletOutputStream os = response.getOutputStream();
byte[] clientMsg = new byte[10];
is.read(clientMsg);
    serverMsg = respond(clientMsg);
    os.write(serverMsg)
    os.flush();
    is.read(); //Here I get -1 
```

我的理论是Tomcat正在关闭流。你同意吗？无论如何要绕过这个？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:00:43.910

HTTP 只是请求-响应。但是 WebSockets 允许客户端和服务器之间的全双工通信。

Apache Tomcat 7 初步支持 WebSockets。

# macos - How would you get a webpage source from Terminal?

> ID：14419573
> 
> 赞同：4
> 
> 时间：2013-01-19T22:29:20.440
> 
> 标签：macos, bash, terminal

On my website I have a text file with data on it (The site in question is hosted by GoDaddy, so I can't access the file locally). This file is updated through PHP. From the Unix/Linux/Mac bash I would like to get the contents of the text file so I can use it in scripts. Any help would be appreciated :)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-19T22:35:33.093

`curl`已安装在您的 Mac 上，因此您无需安装它。您还会发现`curl`安装在几乎任何 Linux 发行版上。这可能是你最安全的选择。

```
cd ~/Desktop
curl www.google.com >> google.txt 
```

`wget`可以使用[Homebrew](http://mxcl.github.com/homebrew/)轻松安装在您的 Mac 上。它可能已经安装在大多数 Linux 发行版上。

```
cd ~/Desktop
wget www.google.com 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T22:32:45.740

Install [MacPorts](http://macports.org) and install `wget`:

```
$ sudo port install wget 
```

And then:

```
$ wget http://godaddy.com/somewhere/somefile.txt 
```

And the resulting text file will be `somefile.txt` (this can be changed using the `-O` option).

# sql - SQL - 二级索引方便

> ID：14419574
> 
> 赞同：0
> 
> 时间：2013-01-19T22:29:29.173
> 
> 标签：sql, indexing

我有一个表格显示当前连接到系统的用户，但我每分钟收到 100 个新连接，而且每分钟大约有 100 个用户离开该站点。如果我必须查询特定列，为该给定列创建二级索引是否方便？（考虑到表格内容每分钟都在变化）。

如果查询是一个聚合（比如给定时间的用户数），它会有什么不同吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:40:20.913

您应该根据查询的要求在列上创建索引。

考虑到您在表上的每个索引都会增加服务器上更新/插入查询的负载。您必须权衡拥有索引的性能优势与修改查询的性能下降。

反复试验可能是一个好方法。

# java - Ant java 任务在 rt.jar 中找不到类，但控制台中的 java 成功（并且 JAVA_HOME 已正确设置）

> ID：14419576
> 
> 赞同：1
> 
> 时间：2013-01-19T22:29:37.080
> 
> 标签：java, ant

我正在尝试使用 Ant 执行一些 JAX-WS 代码，尽管**javac**目标成功，但**java**目标失败并显示以下内容：

```
java.lang.ClassNotFoundException: com.sun.xml.internal.ws.spi.ProviderImpl 
```

现在，如果我将以下**jar显式添加到****java**任务使用的类路径中：

```
/usr/lib/jvm/java-1.7.0-openjdk-i386/jre/lib/rt.jar 
```

...然后执行成功，但这不应该是必要的，因为**JAVA_HOME**已正确设置：

```
$ echo $JAVA_HOME
/usr/lib/jvm/java-7-openjdk-i386 
```

此外，我回应了**Java** Ant 正在使用的版本，我得到：

```
ant.java.version=1.7 
```

这是我的 Ant***运行***任务的相关部分：

```
<echo message="ant.java.version=${ant.java.version}" />
<java classname="${project.MainClass.name}">                    
   <classpath refid="run.classpath"/>           
</java> 
```

最后，如果我从命令行（而不是在 Ant 中）运行代码，则无需显式将**rt.jar**添加到**CLASSPATH** ，执行也会成功。

# 更新和解决

查看已接受的答案，我认为这是与使用内部 Sun 类相关的更广泛问题的一个实例。如this [answer](https://stackoverflow.com/a/4070685/274677)中所述，要针对内部 Sun 类进行显式编译，必须设置`javac -XDignore.symbol.file`标志。这是因为`javac`默认情况下不链接到`rt.jar`文件，而是链接到带有类存根的特殊符号文件`lib/ct.sym`，该类存根包含许多（但不是全部）Sun 的类。出于完全相同的原因，在类路径中显式添加`rt.jar`也可以解决问题，但我认为使用`javac -XDignore.symbol.file`. 至于为什么 Ant 显然会针对`rt.jar`when`fork`设置为 true 进行编译（正如[这个答案](https://stackoverflow.com/a/14428695/274677)所建议的那样），我仍然不知道。

回想起来，我认为`javac`不包含`rt.jar`在 CLASSPATH 中是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-21T13:18:06.223

添加编译器参数：

```
<compilerarg value="-XDignore.symbol.file" /> 
```

这对我有用：

```
 <javac srcdir="src" destdir="build_output" source="1.7" target="1.7">
  <compilerarg value="-XDignore.symbol.file" />
  <classpath>
    <pathelement location="lib/......jar"/>
    <pathelement location="lib/....jar"/>
  </classpath>
</javac> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:03:45.363

一个解决方案是将**java**的 Ant 任务**分支**属性设置为“true”：

```
<java classname ="${project.MainClass.name}" fork="true">
    <classpath refid="run.classpath"/>
</java> 
```

当**fork**设置为“true”时，rt.jar 不必显式存在于*run.classpath*中。

# git - Moving Git project has caused many blob and tree errors

> ID：14419579
> 
> 赞同：0
> 
> 时间：2013-01-19T22:29:56.973
> 
> 标签：git, compiler-errors, migration

After moving my whole project folder from one location on a hard drive, to another on the same hard drive, `git fsck` now outputs the errors below. I did not change anything in the *.git* directory. Is this normal and how can I begin to fix this?

I don't really care if I have to reset the entire project and lose my history at this point! I would have imagined Git would work in my folder relatively. Is this not the case?

Rechecking out is not an option, because I have quite a bit of uncommitted work now.

```
broken link from    tree 20472cbdb5e63ca43e533765cc1a91625fe52972
              to    tree c40b8ac97a9afa0893ac6f10324848eb3a4cc460
broken link from    tree 99bba11042f2c2342b2a32e12483b16e6c46ca8b
              to    tree bbb9d8714d49586842fb141e5c3da6fb7cc90488
broken link from    tree 010f020814c6a991a927eeae696ddd7ea928b4db
              to    tree bb3aacd59b6f876f7213a466c94a32d6e1049020
broken link from    tree 952eb80d9f0414b7dc4adf0c8b86ebf9373f3a30
              to    blob bb345fdd2f7ab26ca7fa7ab714d3279e445ca934
broken link from    tree 5906b6d79b7faf30a2461729de694e465a5bf4c1
              to    blob c44110ff88641d5c14327ca7b00f5a76ff8e2228
broken link from    tree 0114e32779714a4b1c4419fa6a6be1fc04265960
              to    blob bb98c60ea1b96a838fe497742b9223ccd97abcc5
broken link from    tree 80bdd30b648cf3f4156ae12b88f12d36dd66909a
              to    blob bb14ba97547dfd68af6c6eba3bbd74416b9d683f
broken link from    tree 2307fc0c1604b3336cba6622420c3632906ec063
              to    blob bbeb6d9170b74545a8a20ec11fd049a86d7f313e
broken link from    tree 9a74b5fb00161ae220e93b3cc2e45eff7fcedef9
              to    blob c457fb4c4ea3758bcf10599b7d93d6202e195d3e
broken link from    tree 13cdd163fb9d7aaf00c03b19b07ec7f316959f2a
              to    blob bb50cb721e30ea8759089e8dd37cb79728c58651
broken link from    tree 3873530bd6cb79d7a1fc42da1fc0fe493fb0e892
              to    tree c4995cff4851c8577bf6702635c0f760b4f59627
broken link from    tree f9f1ee36c894aaed76ddb90cf91ebd3700bcb384
              to    blob bb2a3fc65c38168a96b6e2baae6b7adffa812597
broken link from    tree c8684f6dee7f94a2db6bec1a245655417138dcf4
              to    tree c481208829c1275cc4d5dd1ef316f2e2832234ca
broken link from    tree 10c06ab1c21ee71643f8884efe62f5e35abe418e
              to    blob c46859a5137b04e6342147b6780f927089ccb8e7
broken link from    tree 10c06ab1c21ee71643f8884efe62f5e35abe418e
              to    blob c405c0acde50fbcc3ba240b105d88fc18256a605
broken link from    tree a0d2467fcae809a5a5ef5dbbe67aec7f27d32c2b
              to    blob c430db086cc4d0881642e07d630352b83c0026cd
broken link from    tree 07f04871d7419bd219effe60705e1a45b724677f
              to    blob bb61249cfb3d2470572911b68d920abd77dcad2e
broken link from    tree 07f04871d7419bd219effe60705e1a45b724677f
              to    blob c4cff0e29bc5a7dcd62d6b17e91a0e24c5af5025
broken link from    tree 07f04871d7419bd219effe60705e1a45b724677f
              to    blob c45bf78c96a972a88d79d927a1fba5ade6b197b1
broken link from    tree 115ab71506fa63ef9d64f34aa4fb30c0becbdbcc
              to    blob bb0ba653563b50784ec57785e189246a75e51e8b
broken link from    tree 67cbaec51d0cfec5500602015e49b5488095c1bc
              to    blob c44eed79d1a98f2fe65c5b1dd9deb86827624089
broken link from    tree 67cbaec51d0cfec5500602015e49b5488095c1bc
              to    blob bbb83d859655f7687f2a5fb224a6ce42de07fc24
broken link from    tree 2afc3b88e4d79749b61bafbd0ddf8e00725fbf3d
              to    blob bb5a95e6a741ff71d40e57e3341ad9d47d1d6831
broken link from    tree 2afc3b88e4d79749b61bafbd0ddf8e00725fbf3d
              to    blob bba0871d6353dc62f105c757978d224f8c224c03
broken link from    tree 2afc3b88e4d79749b61bafbd0ddf8e00725fbf3d
              to    blob bb69d9a0778058e7a5c6f872846659189e998f25
broken link from    tree cca2bf1e2189c6362b74ca0cd3538d7d8eb45c4d
              to    blob bbb1c50ed0a66a3291088beb722f652fa39f6285
missing blob bba0871d6353dc62f105c757978d224f8c224c03
missing blob bb61249cfb3d2470572911b68d920abd77dcad2e
missing tree c481208829c1275cc4d5dd1ef316f2e2832234ca
missing blob c42147c58ad95201ec590f52b5a22ba08d4e942f
missing blob c44110ff88641d5c14327ca7b00f5a76ff8e2228
missing blob c442050c12d64c3f1dd21deb829314d824670f79
missing blob c405c0acde50fbcc3ba240b105d88fc18256a605
dangling tree 4ee8f71cec011177d057415ec822eae23225699a
missing blob c46859a5137b04e6342147b6780f927089ccb8e7
missing blob bb69d9a0778058e7a5c6f872846659189e998f25
missing blob bb6a64000c058a75dd86510a3f4e1fa4e9dfad04
missing blob bb2a3fc65c38168a96b6e2baae6b7adffa812597
missing blob bb0ba653563b50784ec57785e189246a75e51e8b
missing blob bbeb6d9170b74545a8a20ec11fd049a86d7f313e
missing tree c40b8ac97a9afa0893ac6f10324848eb3a4cc460
dangling tree 86ae2fdbbe7ab685b3cdbae5e64cebdb5ed1291f
missing blob bb8e58c88a6b86169d25a1b15ea6be5a8031d6f0
missing blob c44eed79d1a98f2fe65c5b1dd9deb86827624089
missing blob bbefc6516f82b1947610b46d1e84c394f9f0fe23
missing blob c4cff0e29bc5a7dcd62d6b17e91a0e24c5af5025
dangling tree 12b0136b8200c06530a040d3e262deaa69eaab9e
missing blob bb50cb721e30ea8759089e8dd37cb79728c58651
missing blob c430db086cc4d0881642e07d630352b83c0026cd
missing blob bbb1c50ed0a66a3291088beb722f652fa39f6285
missing blob c4d1be8a2f7c2b4411693b36ae9b9e9c3c7154ff
dangling tree 2cb3c703da2bb5267b8562a476fb8f19381fb178
missing blob bbf3812ff88b82555fb9dba5c88392757854929c
missing blob bb14ba97547dfd68af6c6eba3bbd74416b9d683f
missing blob bb345fdd2f7ab26ca7fa7ab714d3279e445ca934
missing blob c414cfafdf560f15f43b491224c596ffb9cecba3
dangling tree 4f16115df4ef7a2aa804ebfbd91d55319968b379
dangling tree 08572d6482cb634d304d4152679146d633e545a8
missing blob c457fb4c4ea3758bcf10599b7d93d6202e195d3e
missing blob bb98c60ea1b96a838fe497742b9223ccd97abcc5
missing blob bbb83d859655f7687f2a5fb224a6ce42de07fc24
missing blob c4d8534a7667a48dd2b098bf23f607d2d0899e33
missing tree bbb9d8714d49586842fb141e5c3da6fb7cc90488
missing blob c4998429d0471239ffc521a63514c56e3fd403b2
missing blob c4f9a0de974d02b95eca11fd93aeb85e6523e945
missing tree c4995cff4851c8577bf6702635c0f760b4f59627
missing tree bb3aacd59b6f876f7213a466c94a32d6e1049020
missing blob bb5a95e6a741ff71d40e57e3341ad9d47d1d6831
missing blob c45bf78c96a972a88d79d927a1fba5ade6b197b1
missing blob c41ca6b00b211068e825e9d8a720b1e8fa6ce590
dangling tree ce7d1fe488143f000ff098402695b8764326dc4c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:04:14.593

移动完整的结帐应该没有问题。然而不知何故，您的*.git*目录已损坏。

如果无法选择新的克隆并且您需要修复存储库，请查看[相应的 Git 常见问题解答](https://git.wiki.kernel.org/index.php/GitFaq#How_to_fix_a_broken_repository.3F)。

# java - 从Android中的适配器访问片段内的类

> ID：14419581
> 
> 赞同：0
> 
> 时间：2013-01-19T22:30:12.897
> 
> 标签：java, android, class

我有一个包含两个片段的片段活动。在其中一个片段中，我有一个名为的任务类，`HelpfulTask` 我通常像这样访问它：

```
new HelpfulTask().execute(); 
```

但是我需要从我的适配器内部访问它，该适配器位于此 Fragment 活动之外的单独类中。

同样，这是布局：

```
MainActivity extends FragmentActivity {

     Fragment A {

     }

     Fragment B extends ListFragment {

         class HelpfulTask extends AsyncTask {

            // How do I call/access this from separate Arraydapter?

         }

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:37:16.597

两种选择：

*   通过 的实例访问它`FragmentA`，例如：

```
MainActivity a = ... // get reference to the activity instance
MainActivity.FragmentA fa = a.new FragmentA();
MainActivity.FragmentA.HelpfulTaskextends h = fa.new HelpfulTaskextends(); 
```

*   将内部类声明为`static`，以便您可以以静态方式访问它们（无实例）：

```
MainActivity.FragmentA.HelpfulTaskextends h = new MainActivity.FragmentA.HelpfulTaskextends(); 
```

# php - mysqli_query - return values

> ID：14419593
> 
> 赞同：8
> 
> 时间：2013-01-19T22:31:29.150
> 
> 标签：php, mysqli

I am using the PHP function `mysqli_query` to run a `SELECT` query.

What does `mysqli_query` return if the query runs successfully, but the query finds no matches?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T22:38:19.147

根据[手册](http://www.php.net/manual/en/mysqli.query.php)：

> 失败时返回 FALSE。对于成功的 SELECT、SHOW、DESCRIBE 或 EXPLAIN 查询，mysqli_query() 将返回一个 mysqli_result 对象。对于其他成功的查询，mysqli_query() 将返回 TRUE。

运行但未返回结果的查询仍被视为“成功查询”，因为该查询确实在数据库中运行并且空结果集是合法响应。这意味着查询仍将返回一个`mysqli_result`对象，如果您检查其行数（通过`$result->num_rows`面向对象样式或`mysqli_num_rows($result)`过程样式），它将返回 0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T22:33:15.083

A `Mysqli_query` object, than you can use [mysqli_num_rows](http://php.net/manual/en/mysqli-result.num-rows.php) to count the number of rows returned. So:

```
if(mysqli_num_rows($query) > 0 ){
    // Do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:35:09.730

```
if ($result = $mysqli->query("SELECT * FROM data"))
{
    $count = $result->num_rows; 
    printf("Result set has %d rows.\n", $count);
    $result->close();
} 
```

从[参考](http://php.net/manual/en/mysqli.query.php)：

> 失败时返回 FALSE。对于成功的 SELECT、SHOW、DESCRIBE 或 EXPLAIN 查询，mysqli_query() 将返回一个 mysqli_result 对象。对于其他成功的查询，mysqli_query() 将返回 TRUE。

# javascript - JSTestDriver concurrent tests

> ID：14419594
> 
> 赞同：2
> 
> 时间：2013-01-19T22:31:30.290
> 
> 标签：javascript, testing, continuous-integration, js-test-driver

I've been evaluating JSTestDriver, and it seems to be working well. I want to use it in a continuous integration environment, and I want to know if multiple projects can be testing against the same JSTestDriver server at the same time.

So my configuration is I have 1 JSTestDriver server with 3 different browsers captured. Can multiple projects run their test suites against that same server? Or is a JSTestDriver server only designed to run one test suite at a time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:53:21.280

我也在持续集成环境中使用 JSTestDriver。不幸的是，我注意到 JSTestDriver 在长时间运行时会变得不稳定，这意味着我们需要重新启动 JSTestDriver 服务器进程并重新连接所有从属的浏览器。我发现这篇[文章](https://groups.google.com/forum/?fromgroups=#!topic/js-test-driver/8EXVL-Rl4Ys)中也描述了这种行为。

因此，我们在每次构建之前重新启动 JSTestDriver 以确保它正常工作。这意味着您不能将一个 JSTestDriver 用于所有构建，因为它可能会被一个构建重新启动，而另一个构建想要在其上运行测试。因此，您的持续集成中的每个构建计划都应该有一个自己的 JSTestDriver 实例来使用，并且开发人员应该使用他们自己在本地机器上运行的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T00:28:30.223

conf 文件指定了进行测试运行所需的所有文件。更好的问题可能是您是否能够同时运行多个 conf 文件。就我个人而言，我只会将所有需要测试的文件包含在一个 conf 文件中。但如果这不是一个选项，这里有一些链接。

检查此链接：（Grunt-JsTestDriver） [https://npmjs.org/package/grunt-jstestdriver](https://npmjs.org/package/grunt-jstestdriver) [https://github.com/rickyclegg/this/blob/master/node_modules/grunt-jstestdriver/README.md](https://github.com/rickyclegg/this/blob/master/node_modules/grunt-jstestdriver/README.md)

# android - How to disable the drawing cache?

> ID：14419597
> 
> 赞同：4
> 
> 时间：2013-01-19T22:32:01.033
> 
> 标签：android, android-view

I'm using a ListView to show plenty of images (endless scrolling). When I start to scroll down the list this messages floods the logcat:

> WARN/View(15722): View too large to fit into drawing cache, needs 1639680 bytes, only 1536000 available

I'm having trouble to understand the drawing cache mechanism but it seems to be enabled by default as I did not enable it. I assume it would be better to disable it because it produces hundreds of warnings within seconds. But I've got no idea which view is actually causing this issue. I tried to apply `setDrawingCacheEnabled(false)` to all involved views but the issue remained.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T21:10:16.000

应用`setScrollingCacheEnabled( false )`到 ListView 就可以了。

# css - iPhone 5 模拟器和媒体查询

> ID：14419606
> 
> 赞同：0
> 
> 时间：2013-01-19T22:33:14.123
> 
> 标签：css, responsive-design, media-queries, iphone-5

我在这里看到了关于如何获取 iPhone5 的媒体查询的答案

***@media only screen and (max-device-width: 1136px) and (min-device-width: 960px) and (device-height: 640px), only screen and (max-device-height: 1136px) and (min-device -height: 960px) and (device-width: 640px) { /*** **iPhone only */ }***

问题是，我已经为 ipod touch、iphone4 和 iphone 5 尝试了几个基于网络的模拟器。它们不仅准确。我不拥有任何这些设备，所以我怎么知道 div 是否正确对齐，或者它是否在这些设备上正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:27:42.997

没有任何东西可以代替真实的东西。

请您的一位朋友借用他们的手机，或前往当地的 Apple Store（或零售商）并要求试用手机并访问您的网站进行检查。

如果您在本地开发，请将您的代码复制到[http://codepen.io](http://codepen.io)，以便您可以从商店访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:44:42.820

我想我找到了替代方案。

使用 Google Chrome 检查元素 --> 设置 --> 用户代理。

# android - What version of Eclipse is included with the SDK ADT bundle for Android Dev?

> ID：14419609
> 
> 赞同：15
> 
> 时间：2013-01-19T22:33:33.830
> 
> 标签：android, eclipse, eclipse-plugin, development-environment

See [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html) I want to know whether the bundle contains the buggy version of Eclipse (I think Juno) as well as just for curiosity's sake whether they use classic or java or java ee.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-28T22:13:56.640

4.2.

查看 adt 文件夹中的 eclipse/readme/readme_eclipse.html 文件，您将找到版本信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T22:53:29.543

如果您对所需的 Eclipse 版本特别感兴趣，只需下载您喜欢的版本和“仅限 SDK 工具”捆绑包，然后按照“现有 IDE”说明进行操作。

看起来 IDE 包包含用于移动开发的 Juno (3.8)，但我不是 100% 的。我不知道这是“错误”版本还是 4.x。

# regex - 实现词法分析器时的 DFA 与正则表达式？

> ID：14419614
> 
> 赞同：10
> 
> 时间：2013-01-19T22:34:05.020
> 
> 标签：regex, compiler-construction, lexical-analysis, dfa

（我只是在学习如何编写编译器，所以如果我提出任何不正确的声明，请纠正我）

当他们可以简单地使用正则表达式时，为什么仍然有人在代码中实现 DFA（goto 语句、表驱动的实现）？据我了解，词法分析器接收一串字符并生成一个标记列表，这些标记在语言的语法定义中是终端，使得它们可以用正则表达式来描述。循环一堆正则表达式，如果找到匹配项就跳出循环不是更容易吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T23:14:25.510

你说得对，在很多情况下，写正则表达式比写 DFA 更容易。然而，一个值得思考的好问题是

> 这些正则表达式匹配器如何工作？

大多数非常快速的正则表达式匹配器实现都是通过在内部编译成某种类型的自动机（NFA 或最小状态 DFA）来工作的。如果您想构建一个扫描器，该扫描器通过使用正则表达式来描述要匹配的令牌然后循环遍历所有令牌，您绝对可以这样做，但在内部它们可能会编译为 DFA。

很少有人真正编写 DFA 来进行扫描或解析，因为它太复杂了。这就是为什么有类似`lex`or的工具`flex`，它可以让您指定要匹配的正则表达式，然后在幕后自动编译为 DFA。这样，您就可以两全其美——您可以使用更好的正则表达式框架来描述要匹配的内容，但您可以在幕后获得 DFA 的速度和效率。

关于构建巨型 DFA 的一个更重要的细节是，可以构建一个尝试并行匹配多个不同正则表达式的单个 DFA。这提高了效率，因为可以在字符串上运行匹配的 DFA，同时搜索所有可能的正则表达式匹配。

希望这可以帮助！

# c++ - 不允许绑定到初始化列表中引用的临时对象超过 ctor 的理由是什么？

> ID：14419616
> 
> 赞同：1
> 
> 时间：2013-01-19T22:34:34.810
> 
> 标签：c++

简单的例子：

```
struct A
{
   A() : i(int()) {}
   const int& i;
}; 
```

来自 gcc 的错误：

> 临时绑定到 'A::i' 只会持续到构造函数退出

来自 12.2p5 的规则：

> 临时绑定到构造函数的 ctor-initializer (12.6.2) 中的引用成员将持续存在，直到构造函数退出。

**问题**

有人知道这条规则的基本原理吗？在我看来，让临时人活到参考死亡会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:41:35.930

我不认为*不*扩展到对象生命周期需要证明。相反会！

临时对象的生命周期扩展仅扩展到封闭范围，这既自然又有用。这是因为我们严格控制接收引用变量的生命周期。相比之下，类成员根本不是真正的“范围内”。想象一下：

```
int foo();
struct Bar
{
    Bar(int const &, int const &, int const &) : /* bind */ { }
    int & a, & b, & c;
};

Bar * p = new Bar(foo(), foo(), foo()); 
```

`foo()`为临时人员定义有意义的寿命延长几乎是不可能的。

相反，我们有默认行为，即`foo()`临时的生命周期延伸到包含它的完整表达式的末尾，并且没有更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T00:05:33.057

它会生活在什么样的记忆中？

为了让它按照您建议的方式工作，它不能在堆栈上，因为它必须比任何单个函数调用的寿命更长。它不能放在内存中的 struct A 之后，因为它无法知道 A 是如何分配的。

充其量，它必须变成一个秘密的堆分配。这将需要在析构函数运行时进行相应的秘密释放。复制构造函数和赋值运算符也需要秘密行为。

我不知道是否有人真正考虑过这样做。但就个人而言，对于一个相当晦涩的功能来说，这听起来过于复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:37:24.827

构造函数初始化列表中的 int() 在堆栈上。

一旦设置了该值， int() 就会超出范围并且引用变得无效。

# c# - 每次登录后启动程序

> ID：14419619
> 
> 赞同：0
> 
> 时间：2013-01-19T22:35:16.413
> 
> 标签：c#, windows, winforms, login

我试图在互联网上到处找到这个，但没有运气。我想让我的程序在每次登录后启动（LoginUI.exe）。是否可以检测到用户何时锁定了他/她的计算机（Winkey + L）然后启动我的程序？如果这是不可能的，那么一旦用户刚刚登录，有没有办法检测到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T22:50:21.543

您可以编写一个程序来通过`SystemEvents`in监视用户会话状态`Microsoft.Win32`：

```
// Put this somewhere in your console app/windows form initialization code.
SystemEvents.SessionSwitch += OnSessionSwitch;

// Put this method in your console app/windows form somewhere.
static void OnSessionSwitch(object sender, SessionSwitchEventArgs e)
{
  switch (e.Reason)
  {
    case SessionSwitchReason.SessionLogon:
      // User has logged on to the computer.
      break;

    case SessionSwitchReason.SessionLogoff:
      // User has logged off from the computer.
      break;

    case SessionSwitchReason.SessionUnlock:
      // The computer has been unlocked.
      break;

    case SessionSwitchReason.SessionLock:
      // The computer has been locked.
      break;
  }
} 
```

在您的情况下，您可以`Process.Start(...)`在检测到`SessionLogon`or时执行此操作`SessionUnlock`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:37:55.940

看起来SO已经有一些关于这类事情的信息。c# 中的注册表修改看起来可以解决问题。

[以编程方式在登录时启动应用程序](https://stackoverflow.com/questions/385793/programmatically-start-application-on-login)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:45:21.957

我想[这](http://www.codeproject.com/Tips/474092/Run-Csharp-application-on-Windows-startup-Windows)就是你要找的人！这是相关的片段：

```
WshShell shell = new WshShell();
string shortcutAddress = startupFolder + @"\MyStartupShortcut.lnk";
IWshShortcut shortcut = (IWshShortcut)shell.CreateShortcut(shortcutAddress);
shortcut.Description = "A startup shortcut. If you delete this shortcut from your computer, LaunchOnStartup.exe will not launch on Windows Startup"; // set the description of the shortcut
shortcut.WorkingDirectory = Application.StartupPath; /* working directory */
shortcut.TargetPath = Application.ExecutablePath; /* path of the executable */
shortcut.Save(); // save the shortcut 
```

# python-2.7 - Reportlab pdf 编码

> ID：14419621
> 
> 赞同：3
> 
> 时间：2013-01-19T22:35:29.623
> 
> 标签：python-2.7, reportlab, linux-mint

我想用reportlab写一些土耳其字符到pdf。我使用休闲代码来做到这一点。

```
c = Canvas("test.pdf")  
data="ğçİöşü"
p = Paragraph(data.decode('utf-8'), style=styNormal) 
```

但它没有以pdf格式显示我的数据。

输出：■ç■ö■ü</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-02T05:27:05.313

如[this answer to a similar question](https://stackoverflow.com/a/17011377/389289)中所述，您需要使用支持您的字符的字体。

简而言之，试试这个：

```
pdfmetrics.registerFont(TTFont('Verdana', 'Verdana.ttf'))
c.setFont("Verdana", 8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:05:43.940

确保您的文件是 UTF-8 编码的，我还建议确保数据变量是 UTF-8 做

```
data = u"ğçİöşü" 
```

# php - 正则表达式 mysql 函数

> ID：14419628
> 
> 赞同：3
> 
> 时间：2013-01-19T22:36:36.143
> 
> 标签：php, mysql, regex, isbn

我有几个用于匹配 ISBN 10 的 PHP 正则表达式，但我找不到一个与 MySQL 兼容的`REGEXP`，有人可以帮我在 MySQL 中匹配 ISBN 10 吗？

我已经尝试过这个（适用于 PHP，但不适用于 MySQL）

```
"^(97(8|9))?\d{9}(\d|X)$" 
```

以下是我运行此正则表达式的一些值：

```
ISBN10: 0470945176
by Paul D. Kimmel
Publisher: John Wiley &amp; Sons
Copyright year: © 2011 
```

和

```
Thomas E. Creighton (Author)
ISBN-10: 0471153028 
Publisher: Wiley-Interscience; 1 edition (April 8, 1999)
2878 pages 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:45:57.400

`\d`MySQL 正则表达式中不存在该快捷方式。改用`[[:digit:]]`字符类：

```
"^(97(8|9))?[[:digit:]]{9}([[:digit:]]|X)$" 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ec493/1/0)上查看。

# php - 如何在作为另一个类的扩展的类中调用函数？

> ID：14419631
> 
> 赞同：-1
> 
> 时间：2013-01-19T22:36:42.710
> 
> 标签：php

好的，我知道。我知道......这可能是一个简单的。但是，我对 OOP 很陌生，想学习如何更有效地回收我的代码。

我在 php 中有一个类，然后是另一个类，它像这样扩展了以前的类

```
class team {
   private $league;
   private $team;
   public $year = 2013;

   function getTeamSeasonRecord($league, $team) {
   // Get given's team record thus far

      $this->record = $record;
     return $record;
}

class game extends team{

  public function __construct()
  {
        global $db;

        if($game_league == "mlb")
        {
            $table = "current_season_games";
        } else
        {
            $table = "".$game_league."_current_season_games";
        }

        $query = "SELECT * FROM ".$table." WHERE game_id = :game_id";
        $stmt = $db->prepare($query);
        $stmt->execute(array(':game_id' => $game_num));
        $count = $stmt->rowCount();

        $this->games_count = $count;

        if($count == 1)
        {
            $this->game_league = $game_league;
            $this->game_num = $game_num;

            while($row = $stmt->fetch(PDO::FETCH_ASSOC)) 
            {
                $home_team  = $row['home_team'];
                $away_team  = $row['away_team'];
                $game_int   = $row['game_date_int'];
                $game_date  = $row['game_date'];
                $game_time  = $row['game_time'];
            }

            $this->home_team = $home_team;
            $this->away_team = $away_team;
            $this->game_int = $game_int;
            $this->game_date = $game_date;
            $this->game_time = $game_time;
        }
    }

  $team_class = new team($this->game_league, $this->home_team, 2013);
  $record = $team_class->getTeamSeasonRecord($this->game_league, $this->home_team);
  $this->team_record -> $record;
} 
```

既然名为“游戏”的类是名为“团队”的类的扩展，那么游戏类不能访问团队类范围内的所有功能吗？编写在团队类中的 getTeamSeasonRecord() 函数将查找任何给定团队的记录。但是，对于游戏类，有两个团队。1.) 主队和 2.) 客队。我需要找到主队和客队的记录。如何回收代码，以便我不必在两个类中具有相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:52:24.093

游戏不应该扩展团队，因为游戏不是团队。游戏是团队玩的东西，它完全是一个不同的对象，你建模的方式继承不应该适用。

```
class game{

  private $homeTeam;
  private $awayTeam;

  function GetHomeTeam()
  {
    return $this->homeTeam;
  }

  function GetAwayTeam()
  {
    return $this->awayTeam;
  }
} 
```

可能使用继承的示例（并继续使用体育领域）

```
class Team
{
  function GetSeasonRanking(){...}
}

class SoccerTeam extends Team
{
  function GetGoalKeeper(){...}
}

class BaseballTeam extends Team
{
  function GetPitchers{...}
} 
```

SoccerTeam 和 BaseballTeam（子类型）都是球队（超类型）并且有一个赛季排名，但是他们必须扩展球队以实现球队比赛的复杂性。

# c++ - 从 void 指针递增值

> ID：14419632
> 
> 赞同：0
> 
> 时间：2013-01-19T22:36:57.753
> 
> 标签：c++, pointers

我正在尝试从键盘的快捷方式修改一些变量[不需要来自同一个类/结构]，如下所示： 包含变量的 foo 结构：

```
struct Foo {
    int a;
    float b;
};

struct Foo2 {
    int c;
}; 
```

还有一个主要的：

```
int main() {
    Foo f;
    Foo2 f2
    void* p = &(f.a); //it could be &(f2.c)

    if ('A' key activated) {
        *p += 1;
    }
} 
```

目前，我被困在这一点上：

```
error: invalid operands to binary expression ('void' and 'int') 
```

让它发挥作用的唯一方法是改变：

```
*p += 1; 
```

经过：

```
*(int*)p += 1; 
```

这不是一个好的解决方案，因为我不应该知道 p 指向的类型。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:39:59.603

将指针转换为 void* 会丢失类型信息，编译器将不知道如何递增。你为什么不做一个指向 Foo 的指针呢？

```
int main() {
    Foo f;
    Foo* p = &f;

    if ('A' key activated) {
        p->a += 1;
    }
} 
```

**还要记住，增加浮点数不是一个好主意！**

对于这个答案的评论中的问题：

```
struct FooBar
{
    int *a;
    float *b;
};

int main() {
    Foo f;
    Bar b;
    FooBar fb{&f.a, &b.b};

    if ('A' key activated) {
        *(fb.a) += 1;
    }
} 
```

请注意，此解决方案相当 C 风格。查看致命吉他的答案以获得更多 C++ 风格的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:46:18.913

*编辑：*起初我没有意识到您希望每个条目有不同的类型。基于处理键盘快捷键的任务，您可以使用多态类，并将其实例放入 std::map：

```
class KeyHandler {
public:
    virtual void onKeyStroke() = 0;
};

class MyHandler : public KeyHandler {
public:
    MyHandler(int& value) : myValue(value) {}

    virtual void onKeyStroke() {
        myValue_ += 1;
    }

private:
    int& myValue_; // Other subclasses could have other data
};

// Now place instances of different Handlers into a std::map
typedef std::shared_ptr<KeyHandler> PKeyHandler;
std::map<char, PKeyHandler> bindings;

bindings['A'] = PKeyHandler(new IncrementIntHandler(&someInt)); 
bindings['B'] = PKeyHandler(new IncrementFloatHandler(&someFloat));

// The actual input handler then just invokes
// the correct handler for a key stroke.
bindings[keyCode]->onKeyStroke(); 
```

这样，您可以为要支持的每个操作定义一个处理程序类，并将相应的逻辑实现到这些类中。您可以使基类的实现不做任何事情来处理非映射键等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:44:06.050

当然，请改用`int`指针：

```
int * p = &f.a;

if ( /* condition */ ) { ++*p; } 
```

# actionscript-3 - addCircle 到现有的影片剪辑，使用数组中的剪辑名称

> ID：14419633
> 
> 赞同：0
> 
> 时间：2013-01-19T22:37:11.240
> 
> 标签：actionscript-3

我目前正在构建一个项目，其中我有一张包含许多船舶和飞机的地图。我想要实现的是检查它们之间的视线距离。我设置了一个 LOS 计算器，它检查一个平台的高度和第二个平台的高度，然后给出响应。这很好用。

然后我想根据这个计算器的结果添加Circle。因此，如果结果是 10，它将绘制一个半径为 10 厘米的圆。如果结果是 100，那么它会在 100 处绘制它，你会得到图片。这行得通。

我现在的问题是我需要能够在我进行计算之前或之后单击一个平台，并将 .addCircle 添加到该电影剪辑中。我已经设置了一个数组来存储影片剪辑实例名称并对其进行跟踪。我在舞台上添加了一个字段，以便您可以点击一个平台，它会识别点击的平台。我只是迷失了如何将圆圈放入已单击的电影剪辑中。

我对 AS3 很陌生，所以这开始让我头疼了。任何帮助将不胜感激。

我的代码附在下面。我希望我已经正确插入了这个。再次感谢

```
import flash.events.MouseEvent;
import flash.display.MovieClip;

stage.focus=ht1;

// creation of array containing movieclips and code that adds the clicked movieclip to Array-platformClicked
var platformArray:Array = [arunta_mc, f15_mc];
var platformClicked = [];
var selectedPlatform:MovieClip = new MovieClip();

for(var i:int = 0; i < platformArray.length; i++) {
    platformArray[i].buttonMode = true;
    platformArray[i].addEventListener(MouseEvent.CLICK, item_onClick);
}

function item_onClick(event:MouseEvent):void {
    var selectedPlatformArray:Array = platformArray.filter(checkName);
    selectedPlatform = selectedPlatformArray[0];
    myText.text = event.currentTarget.name + " was clicked";
    var platformClicked = String(event.currentTarget.name);
trace(platformClicked);
}

function checkName(item:MovieClip, index:int, array:Array):Boolean
{
    return(item.name == platformClicked);
}

//setup of LOS Calculator code
var counter:Number=1;
operator_txt.text = "+";
ht1.restrict="-0123456789.";
ht2.restrict="-0123456789.";
var myresult:Number;
var test = [];

//start of code when equal button is pressed
equal_btn.addEventListener(MouseEvent.CLICK, equalhandler);
var newCircle:Shape = new Shape();//defines circle to be drawn

    function equalhandler(event:MouseEvent):void{
        newCircle.graphics.lineStyle(1, 0x000000);
        newCircle.graphics.beginFill(0x435632);
        newCircle.alpha = .1;
    //start of result code
    result_txt.text = String(int((1.23*(Math.sqrt(Number(parseFloat(ht1.text)+parseFloat(ht2.text)+""))))));
    var test = String(int((1.23*(Math.sqrt(Number(parseFloat(ht1.text)+parseFloat(ht2.text)+""))))));
    trace(test);
    //end of result code
    newCircle.graphics.drawCircle(0,0,test);//add circle based on LOS calculation
    newCircle.graphics.endFill();
    //var selectedPlatform:MovieClip = selectedPlatformArray[0];
    selectedPlatform.addChild(newCircle);//this is where I need to add newCircle to the movieClip that is clicked
    trace(selectedPlatform);
//trace(platformClicked);
}

//start of code for the clear button
clear_btn.addEventListener(MouseEvent.CLICK, clearhandler);
function clearhandler(event:MouseEvent):void{
ht1.text=ht2.text=result_txt.text="";
removeChild(newCircle);
var test = [];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:04:20.780

您可以使用该`filter()`方法检查每个项目的名称，如下所示：

```
var selectedPlatformArray:Array = platformArray.filter(checkName); 
```

在你的代码的某个地方，定义`checkName`函数

```
function checkName(item:MovieClip, index:int, array:Array):Boolean
{
    return (item.name == platformClicked);
} 
```

`selectedPlatformArray``true`现在将包含为该函数返回的所有元素`checkName`，并且只要您没有多个`MovieClips`同名的元素，该数组就应该只包含一个元素，您可以通过访问数组的第一个元素来检索它：

```
var selectedPlatform:MovieClip = selectedPlatformArray[0]; 
```

或者，您也可以使用该`getChildByName()`功能，如下所示：

```
var selectedPlatform:MovieClip = stage.getChildByName(platformClicked); 
```

然而，这取决于对象被添加到的位置，如果它们不是都在同一个容器中（或根本没有添加），那么这不是最佳选择。不过，对于小型项目来说，这是一个快速简单的解决方案。

`equalHandler`无论如何，无论您使用什么方法，您都可以像往常一样轻松地将圆圈添加到您的函数中：

```
selectedPlatform.addChild(newCircle); 
```

我建议您查看[`filter()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#filter%28%29)和的文档[`getChildByName()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getChildByName%28%29)，以便更好地了解它们的工作原理，因为我的示例仅显示了您在这种特定情况下如何使用它们。

* * *

您应该拥有的完整代码：

```
import flash.events.MouseEvent;
import flash.display.MovieClip;

stage.focus=ht1;

// creation of array containing movieclips and code that adds the clicked movieclip to Array-platformClicked
var platformArray:Array = [arunta_mc, f15_mc];
var platformClicked:String = "";
var selectedPlatform:MovieClip = new MovieClip();

for(var i:int = 0; i < platformArray.length; i++) {
    platformArray[i].buttonMode = true;
    platformArray[i].addEventListener(MouseEvent.CLICK, item_onClick);
}

function item_onClick(event:MouseEvent):void {
    var selectedPlatformArray:Array = platformArray.filter(checkName);
    selectedPlatform = selectedPlatformArray[0];
    myText.text = event.currentTarget.name + " was clicked";
    platformClicked = String(event.currentTarget.name);
    trace(platformClicked);
}

function checkName(item:MovieClip, index:int, array:Array):Boolean
{
    return(item.name == platformClicked);
}

//setup of LOS Calculator code
var counter:Number=1;
operator_txt.text = "+";
ht1.restrict="-0123456789.";
ht2.restrict="-0123456789.";
var myresult:Number;
var test:String = "";

//start of code when equal button is pressed
equal_btn.addEventListener(MouseEvent.CLICK, equalhandler);
var newCircle:Shape = new Shape();//defines circle to be drawn

function equalhandler(event:MouseEvent):void{
    newCircle.graphics.lineStyle(1, 0x000000);
    newCircle.graphics.beginFill(0x435632);
    newCircle.alpha = .1;
    //start of result code
    result_txt.text = String(int((1.23*(Math.sqrt(Number(parseFloat(ht1.text)+parseFloat(ht2.text)+""))))));
    test = String(int((1.23*(Math.sqrt(Number(parseFloat(ht1.text)+parseFloat(ht2.text)+""))))));
    trace(test);
    //end of result code
    newCircle.graphics.drawCircle(0,0,test);//add circle based on LOS calculation
    newCircle.graphics.endFill();
    //var selectedPlatform:MovieClip = selectedPlatformArray[0];
    selectedPlatform.addChild(newCircle);//this is where I need to add newCircle to the movieClip that is clicked
    trace(selectedPlatform);
    //trace(platformClicked);
}

//start of code for the clear button
clear_btn.addEventListener(MouseEvent.CLICK, clearhandler);
function clearhandler(event:MouseEvent):void{
    ht1.text=ht2.text=result_txt.text="";
    selectedPlatform.removeChild(newCircle);
    test = "";
} 
```

# android - android sdk 上的演示活动

> ID：14419634
> 
> 赞同：-2
> 
> 时间：2013-01-19T22:37:15.330
> 
> 标签：android

请查看图片以了解我想要什么

[http://i.stack.imgur.com/eC4ZR.png](http://i.stack.imgur.com/eC4ZR.png)

活动 1**全屏 + 无标题栏**

活动 2**无全屏 + 标题栏**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:41:10.237

添加：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                    WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

到您想要在全屏模式下的第一个 Activity 的 onCreate() 。对其他人什么也不做。而已。

# html - 如何调整用 CSS 添加的引号符号的边距

> ID：14419637
> 
> 赞同：3
> 
> 时间：2013-01-19T22:37:26.800
> 
> 标签：html, css, margin, double-quotes

我正在尝试仅使用 CSS 添加引号。这行得通，但我想就其中的内容降低引号。这是它目前的样子：

![高引号截屏](../Images/a84c03a957d18d7a83078cc534954df5.png)

的HTML：

```
<p id="quote">This is a quotation.</p> 
```

CSS：

```
#quote {
}

#quote:before {
    content: "\201C";
    font-family: Garamond, Palatino, Roman, "Times New Roman", serif;
    font-size: 36pt;
}

#quote:after {
    content: "\201D";
    font-family: Garamond, Palatino, Roman, "Times New Roman", serif;
    font-size: 36pt;
} 
```

还有一个[JS Fiddle](http://jsfiddle.net/uZTj7/)。

我已经尝试添加一个上边距`#quote:before`，`#quote:after`但这似乎也适用于引号之间的文本（即使我专门添加了一个零或负的上边距）。我也尝试过填充和制作各种元素内联块。

有没有办法使用 CSS 将引号向下移动？我宁愿避免更改 HTML 结构或添加图像，我觉得这应该是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:45:48.277

尝试添加：

```
position: relative;
top: 19px; 
```

到`#quote:before`和`#quote:after`。

我还在两个引号中添加了一些填充...

JSFiddle：http: [//jsfiddle.net/leniel/GAaBT/](http://jsfiddle.net/leniel/GAaBT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:47:36.507

原因是您将 font-size 属性应用于引号而不是文本，这就是引号变大的原因。尝试这个。

```
#quote {
    font-size:36px;
}

#quote:before {
    content: "\201C";
}

#quote:after {
    content: "\201D";
} 
```

# php - 使用 php 正则表达式搜索链接

> ID：14419638
> 
> 赞同：0
> 
> 时间：2013-01-19T22:37:27.480
> 
> 标签：php, regex

我使用 c 和 c# 进行编程，并且正在使用一些第三方正则表达式库来识别链接模式。但是昨天，由于某种原因，有人要求我改用 php。我不熟悉 php 正则表达式，但我尝试了，没有得到预期的结果。我必须提取并替换以下形式的图像 src 的链接：

```
<img src="/a/b/c/d/binary/capture.php?id=main:slave:demo.jpg"/> 
```

我只想要 src 中的路径，但引号可以是双引号或单引号，id 也可以因情况而异（这里是 main:slave:demo.jpg）

我尝试以下代码

```
 $searchfor = '/src="(.*?)binary\/capture.php?id=(.+?)"/';
 $matches = array();
 while ( preg_match($searchfor, $stringtoreplace, $matches) == 1 ) {
   // here if mataches found, replace the source text and search again
   $stringtoreplace= str_replace($matches, 'whatever', $stringtoreplace);
 } 
```

但它不起作用，我错过了什么或上面的代码有任何错误？

更具体地说，假设我有一个图像标签，它将 src 作为

```
 <img src="ANY_THING/binary/capture.php?id=main:slave:demo.jpg"/> 
```

这里 ANY_THING 可以是任何东西，并且“/binary/capture.php?id=”将在所有情况下固定，“id=”之后的字符串是模式“main:slave:demo.jpg”，冒号之前的字符串将是因情况而异，jpeg 的名称也会有所不同。我希望将其替换为

```
 <img src="/main/slave/demo.jpg"/> 
```

由于我只有在特定时间和限制时间内修改 php 脚本的权利，所以我想在进行任何修改之前调试我的代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:51:57.457

首先，您可能知道，[不应该使用正则表达式来操作 HTML](https://stackoverflow.com/a/1732454/670388)。

但是，请尝试：

```
$stringtoreplace = '<img src="/a/b/c/d/binary/capture.php?id=main:slave:demo.jpg"/>';
$new_str = preg_replace_callback(
    // The regex to match
    '/<img(.*?)src="([^"]+)"(.*?)>/i',
    function($matches) { // callback
        parse_str(parse_url($matches[2], PHP_URL_QUERY), $queries); // convert query strings to array
        $matches[2] = '/'.str_replace(':', '/', $queries['id']); // replace the url
        return '<img'.$matches[1].'src="'.$matches[2].'"'.$matches[3].'>'; // return the replacement
    },
    $stringtoreplace // str to replace
);
var_dump($new_str); 
```

# actionscript-3 - 如何从下一帧 AS3 中引用对象

> ID：14419649
> 
> 赞同：0
> 
> 时间：2013-01-19T22:38:34.457
> 
> 标签：actionscript-3, actionscript, reference, flash-cs4

我对 Flash CS4 有问题。我在第一帧有 TextFields，在第二帧有其他 TextFields，等等。在第一帧我有 TextField 来输入数字，以及按钮计算，它计算所有 TextField 的值。我有菜单来浏览标签（框架）。

所以...当我输入数字并单击“计算”时，我在第一帧的 TextFields 中获得了值，但是当我切换到下一个选项卡（帧）时，我看到清晰的 TextFields 和输出错误（错误 #1009）。

我知道，原因是从下一帧将第一帧中的值添加到 TextFields，但我不知道如何修复它。

请寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T01:57:41.137

When the next tab is clicked, store the value of the textfield in a variable.

If writing your ActionScript on the timeline, this is the code:

```
// On frame 1:
// Create the variable to store the textfield value
textfieldValue:String = "";

function tabClicked(event:MouseEvent):void {
    // Store the value of myTextField
    textfieldValue = myTextField.text;
}

// On frame 2
// Populate the new instance of myTextField with the stored value
myTextfield.text = textfieldValue; 
```

# angularjs - 在输入中过滤 ng-model

> ID：14419651
> 
> 赞同：126
> 
> 时间：2013-01-19T22:38:43.380
> 
> 标签：angularjs, angularjs-filter, dom-manipulation, angularjs-ng-model

我有一个文本输入，我不想让用户使用空格，输入的所有内容都会变成小写。

我知道我不允许在 ng-model 上使用过滤器，例如。

```
ng-model='tags | lowercase | no_spaces' 
```

我看着创建自己的指令，但添加函数`$parsers`并且`$formatters`没有更新输入，只有其他元素`ng-model`。

如何更改我当前正在输入的输入？

我本质上是在尝试创建类似于 StackOverflow 上的“标签”功能。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2013-01-20T13:31:48.080

我相信 AngularJS 输入和指令的意图`ngModel`是**无效输入永远不应该出现在模型中**。该模型应始终有效。拥有无效模型的问题是我们可能有观察者基于无效模型触发并采取（不适当的）动作。

正如我所看到的，这里正确的解决方案是插入`$parsers`管道并确保无效输入不会进入模型。我不确定你是如何尝试处理事情的，或者什么对你不起作用，`$parsers`但这里有一个简单的指令可以解决你的问题（或者至少是我对问题的理解）：

```
app.directive('customValidation', function(){
   return {
     require: 'ngModel',
     link: function(scope, element, attrs, modelCtrl) {

       modelCtrl.$parsers.push(function (inputValue) {

         var transformedInput = inputValue.toLowerCase().replace(/ /g, ''); 

         if (transformedInput!=inputValue) {
           modelCtrl.$setViewValue(transformedInput);
           modelCtrl.$render();
         }         

         return transformedInput;         
       });
     }
   };
}); 
```

一旦声明了上述指令，就可以像这样使用它：

```
<input ng-model="sth" ng-trim="false" custom-validation> 
```

正如@Valentyn Shybanov 提出的解决方案一样，`ng-trim`如果我们想在输入的开头/结尾禁止空格，我们需要使用该指令。

这种方法的优点是 2 倍：

*   无效值不会传播到模型
*   使用指令很容易将此自定义验证添加到任何输入，而无需一遍又一遍地复制观察者

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-19T23:31:16.757

我建议观看模型值并在更改时对其进行更新：http://plnkr.co/edit/Mb0uRyIIv1eK8nTg3Qng? [p =preview](http://plnkr.co/edit/Mb0uRyIIv1eK8nTg3Qng?p=preview)

唯一有趣的问题是空格：在 AngularJS 1.0.3 中，输入时 ng-model 会自动修剪字符串，因此如果您在末尾或开头添加空格，它不会检测到模型已更改（因此我的空格不会自动删除代码）。但是在 1.1.1 中有一个 'ng-trim' 指令允许禁用这个功能（[commit](https://github.com/angular/angular.js/commit/d519953a4b219035587e3fcb2e9cc52e02b408ca)）。因此，我决定使用 1.1.1 来实现您在问题中描述的确切功能。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-01-14T11:16:05.413

解决此问题的方法可能是在控制器端应用过滤器：

`$scope.tags = $filter('lowercase')($scope.tags);`

不要忘记声明`$filter`为依赖项。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-12-10T22:36:55.860

如果您使用的是只读输入字段，则可以将 ng-value 与过滤器一起使用。

例如：

```
ng-value="price | number:8" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-20T12:34:49.853

使用添加到 $formatters 和 $parsers 集合的指令来确保在两个方向上执行转换。

有关更多详细信息，请参见[其他答案](https://stackoverflow.com/a/13671433/81595)，包括指向 jsfiddle 的链接。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-07T17:25:12.387

我有类似的问题并使用

```
ng-change="handler(objectInScope)" 
```

在我的处理程序中，我调用 objectInScope 的一个方法来正确修改自身（粗略输入）。在控制器中，我在某个地方启动了

```
$scope.objectInScope = myObject; 
```

我知道这不使用任何花哨的过滤器或观察者......但它很简单而且效果很好。唯一的缺点是 objectInScope 在对处理程序的调用中发送......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-02T17:24:13.020

`ng-model`如果您正在执行复杂的异步输入验证，那么将一个级别抽象为具有自己验证方法的自定义类的一部分可能是值得的。

[https://plnkr.co/edit/gUnUjs0qHQwkq2vPZlpO?p=preview](https://plnkr.co/edit/gUnUjs0qHQwkq2vPZlpO?p=preview)

**html**

```
<div>

  <label for="a">input a</label>
  <input 
    ng-class="{'is-valid': vm.store.a.isValid == true, 'is-invalid': vm.store.a.isValid == false}"
    ng-keyup="vm.store.a.validate(['isEmpty'])"
    ng-model="vm.store.a.model"
    placeholder="{{vm.store.a.isValid === false ? vm.store.a.warning : ''}}"
    id="a" />

  <label for="b">input b</label>
  <input 
    ng-class="{'is-valid': vm.store.b.isValid == true, 'is-invalid': vm.store.b.isValid == false}"
    ng-keyup="vm.store.b.validate(['isEmpty'])"
    ng-model="vm.store.b.model"
    placeholder="{{vm.store.b.isValid === false ? vm.store.b.warning : ''}}"
    id="b" />

</div> 
```

**代码**

```
(function() {

  const _ = window._;

  angular
    .module('app', [])
    .directive('componentLayout', layout)
    .controller('Layout', ['Validator', Layout])
    .factory('Validator', function() { return Validator; });

  /** Layout controller */

  function Layout(Validator) {
    this.store = {
      a: new Validator({title: 'input a'}),
      b: new Validator({title: 'input b'})
    };
  }

  /** layout directive */

  function layout() {
    return {
      restrict: 'EA',
      templateUrl: 'layout.html',
      controller: 'Layout',
      controllerAs: 'vm',
      bindToController: true
    };
  }

  /** Validator factory */  

  function Validator(config) {
    this.model = null;
    this.isValid = null;
    this.title = config.title;
  }

  Validator.prototype.isEmpty = function(checkName) {
    return new Promise((resolve, reject) => {
      if (/^\s+$/.test(this.model) || this.model.length === 0) {
        this.isValid = false;
        this.warning = `${this.title} cannot be empty`;
        reject(_.merge(this, {test: checkName}));
      }
      else {
        this.isValid = true;
        resolve(_.merge(this, {test: checkName}));
      }
    });
  };

  /**
   * @memberof Validator
   * @param {array} checks - array of strings, must match defined Validator class methods
   */

  Validator.prototype.validate = function(checks) {
    Promise
      .all(checks.map(check => this[check](check)))
      .then(res => { console.log('pass', res)  })
      .catch(e => { console.log('fail', e) })
  };

})(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-16T23:39:34.077

我来这里是为了寻找一种解决方案，该解决方案可以主动更改输入文本，并在我们键入时用 * 屏蔽除最后 4 位以外的所有数字。这是通过 $formatters 实现的

eg: Account Num 输入框：`1234567890AHSB1`应该在输入框中显示为`**********AHSB`

答案只是上面[@pkozlowski.opensource](https://stackoverflow.com/a/14425022/5589507)给出的答案的轻微变化。

```
angular.module('myApp').directive('npiMask', function() {
  return {
    require: 'ngModel',
    link: function($scope, element, attrs, modelCtrl) {
      modelCtrl.$formatters.push(function(inputValue) {
        var transformedInput = inputValue.toString().replace(/.(?=.{4,}$)/g, '*');
        if (transformedInput !== inputValue) {
          modelCtrl.$setViewValue(transformedInput);
          modelCtrl.$render();
        }
        return transformedInput;
      });
    }
  };
});
```

```
<input-text 
 name="accountNum" 
 label="{{'LOAN_REPAY.ADD_LOAN.ACCOUNT_NUM_LABEL' | translate}}" 
 ng-model="vm.model.formData.loanDetails.accountNum" 
 is-required="true" 
 maxlength="35" 
 size="4" 
 npi-mask>
</input-text>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-19T06:50:12.847

你可以试试这个

```
$scope.$watch('tags ',function(){

    $scope.tags = $filter('lowercase')($scope.tags);

}); 
```

# php - PHP多人游戏：数据同步无法正常工作

> ID：14419652
> 
> 赞同：1
> 
> 时间：2013-01-19T22:38:44.520
> 
> 标签：php, ajax, canvas, multiplayer

我正在使用 Canvas 和 MySQL 数据库在 PHP 中开发多人游戏。两名玩家加入游戏，他们首先获得对手的位置（X，Y 和角度）。

当他们准备好时，游戏开始。游戏算法是这样的。
**每 50 毫秒**

1.  计算自己的位置 (X,Y)
2.  获取对手的角度（AJAX）并计算对手的位置（X2，Y2）
3.  然后在 Canvas 上绘制并更新数据库。

    ```
    context.fillStyle = "green";
    context.fillRect(p1.x,p1.y, 5,5);
    addPoints(p1.x,p1.y);
    updateRoundJQ(p1.x,p1.y,p1.a);

    context.fillStyle = "red";
    context.fillRect(x2,y2, 5,5);
    addPoints(x2,y2);

    loopTimer = setTimeout('drawLine()', 50); 
    ```

但不幸的是，我得到了这个结果。接收数据有很大延迟。谁能帮助我如何摆脱这个巨大的错误？真的会很感激。

**玩家 1 的屏幕** ![播放器 1 合一电脑](../Images/97a59b60645ba07c1dddb8cb75260670.png)

**玩家 2 的画面** ![玩家 2](../Images/c84a6e71d7b8133a6e6f3f201d79f0c4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:52:19.833

您的脚本不是每 50 毫秒运行一次 - 因为它只是在所有其他功能都运行后才设置超时。根据`updateRound`工作方式，这可能会将往返时间添加到每个间隔。

例如，考虑以下时间：

```
context.fillStyle = "green"; // 1ms
context.fillRect(p1.x,p1.y, 5,5); // 1ms
addPoints(p1.x,p1.y); // 1ms
updateRoundJQ(p1.x,p1.y,p1.a); // web request? 300ms

context.fillStyle = "red"; // 1ms
context.fillRect(x2,y2, 5,5); // 1ms
addPoints(x2,y2); // 1ms

loopTimer = setTimeout('drawLine()', 50); // wait 50ms from now 
```

因此，使用这些示例计时，您的循环将仅在 ~306 毫秒后运行。

可能值得考虑使用 websocket 将数据推送到您的客户端，而不是使用 AJAX 拉取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:50:24.963

我终于找到了使用**Node.JS**和**Socket.IO**的解决方案。该解决方案将比在 AJAX 中简单得多。

```
 //Client Side Request   
  function sendMyPoints(){
       socket.emit('myPoints',p1.x,p1.y);
  }

  //Server Handles the Request 
  socket.on('myPoints',function(xP, yP){
    socket.broadcast.emit('getOppPoints',xP,yP);
  });

  //Client gets the Response
  socket.on('getOppPoints',function(xPos,yPos){
      drawOppPoints(xPos, yPos);
  }); 
```

感谢您推荐 Websocket。这很棒。

# .htaccess - 在 .htaccess 中重定向时遇到问题

> ID：14419655
> 
> 赞同：0
> 
> 时间：2013-01-19T22:39:07.840
> 
> 标签：.htaccess, redirect

使用 .htaccess 我如何重定向：

```
http://localhost/mvc_md/index.php/welcome/destroy 
to 
http://localhost/mvc_md/welcome/destroy 
```

我目前正在使用它，但它不起作用：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^localhost/mvc_md/$
RewriteRule ^(.*) localhost/$1  [QSA,L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:20:20.770

```
Options +FollowSymLinks 
RewriteEngine on 
RewriteRule ^([a-zA-Z]*)/?([a-zA-Z]*)?/?([a-zA-Z0-9]*)?/?$ index.php/$1/$2/$3 [NC,L] 
```

# php - URL 重写模块问题

> ID：14419658
> 
> 赞同：0
> 
> 时间：2013-01-19T22:39:59.537
> 
> 标签：php, module, rewrite

我想在 htaccess 文件中创建一个重写模块，如下所示

```
http://example.com/index.php?tel=604-567-0909&cat=1&sort=2 
```

至

```
http://example.com/604-567-0909/?cat=1&sort=2 
```

`$_GET`也会如此

```
$_GET[tel] = 604-567-0909
$_GET[cat] = 1 
$_GET[sort] = 2 
```

这条规则会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:44:03.530

如果您只想在`tel`字段中接受数字和破折号，它看起来像这样：

```
RewriteRule ^/?([0-9\-]+)/$ index.php?tel=$1 [L] 
```

查询字符串中的其他值将自动结转，并且此规则在没有它们的情况下也可以正常工作。

# c++ - 如何在类中未初始化“this”指针？

> ID：14419666
> 
> 赞同：-8
> 
> 时间：2013-01-19T22:41:05.180
> 
> 标签：c++, this, initialization

我似乎遇到了一个非常奇怪的错误。基本上，我有一个 A 类，用于管理像素数据的磁盘缓存。在主程序中，我使用以下方法创建 A 的对象：

```
A* obj = new A(...); 
```

然后，我调用一个从磁盘读取像素的方法：

```
Pixel pix = obj->read(...); 
```

但是，当我尝试使用“this”指针从 read() 方法中访问 A 的私有成员变量时，我收到访问冲突错误，因为“this”指针未初始化（MSVC 2012 设置为 0xCCCCCCCC）。但是，我检查了构造函数返回的“obj”指针的值，它似乎是一个有效的地址。

我的猜测是构造函数以某种方式失败了，但是为什么它会返回一个指向对象的指针呢？或者，如果构造函数没有失败，为什么“this”指针在类中未初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:49:34.520

[在 Visual Studio C++ 中，内存分配表示形式是什么？](https://stackoverflow.com/questions/127386/in-visual-studio-c-what-are-the-memory-allocation-representations)：

> *   0xCCCCCCCC ：被微软的 C++ 调试运行时库用来标记未初始化的堆栈内存

在你这样做的那一刻`obj->`，你的`obj`还没有初始化。问题中的两行代码不是您的真实代码，或者中间发生了一些重要的事情。

简单地逐步使用调试器将为您提供问题的答案。

可能的原因之一是`obj`您的函数中有 2 个以上的局部变量。

# ruby-on-rails - 如果可以随事件过期，为什么要设置缓存过期？（导轨）

> ID：14419672
> 
> 赞同：1
> 
> 时间：2013-01-19T22:42:03.303
> 
> 标签：ruby-on-rails, caching

我见过很多短期到期，比如 30 分钟、6 小时。我很少看到像 7 天或 30 天这样的东西。所以，如果我有一个要缓存的类别列表。如果我可以在通过观察者/回调更新类别时使缓存过期，我为什么要在该缓存上设置过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:23:47.763

根据时间与数据更改时间，可能有很多原因使缓存过期。想象一下有一个非常高流量的网站，其中数据不断过期缓存。确定使用哪种类型的缓存过期机制取决于您如何回答以下问题：

1.  您希望您的数据尽可能保持最新吗？
2.  您是否有非常高流量的网站/应用程序？
3.  更新的数据是否经常导致大量缓存对象过期？

如果`3`对您来说是一个大问题，那么基于时间到期可能是您的最佳选择。如果`2`并且`3`是真的，那么你会发现你的缓存经常过期并且失去了大部分的好处。显然这`1`是对您最重要的事情，您可能需要查看完全不同的缓存选项。

`1`我的建议是通常从观察者/回调方法开始，当你需要扩展时，如果不是太重要，你可以尝试根据时间过期，或者使用更适合生产的东西，比如[memcached](http://memcached.org/)。

# c# - 当我在 Windows 8 中创建全屏 WPF 应用程序时，屏幕结果不正确

> ID：14419675
> 
> 赞同：1
> 
> 时间：2013-01-19T22:42:21.310
> 
> 标签：c#, wpf, windows-8, visual-studio-2012

我正在创建一个 WPF windows 8 桌面应用程序，它只需要在全高清屏幕（1920 x 1080）上工作。

所以我设置了我的 mainWindow 来适应这些比率。但它只填满了我屏幕的一部分。

然后我想用这段代码检查视觉工作室输出的屏幕宽度和屏幕高度

```
 double height = System.Windows.SystemParameters.PrimaryScreenHeight;
        double width = System.Windows.SystemParameters.PrimaryScreenWidth;

        MessageBox.Show(height.ToString());
        MessageBox.Show(width.ToString()); 
```

它输出 864x1536

但我百分百确定我的屏幕是 1920 x 1080，如果我右键单击桌面并更改屏幕分辨率，我可以看到它。

这是我的全屏代码

```
 <Window x:Class="app.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    xmlns:local="clr-namespace:app"
    Title="MainWindow" 
    WindowStyle="None"
    WindowState="Maximized"
    Background="White" 
    ResizeMode="NoResize"  
    WindowStartupLocation="CenterScreen" 
    > 
```

有谁知道这是什么原因造成的？

编辑：我是带有三星 24 英寸全高清屏幕的 windows 8 pro 32 位机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:08:43.113

您可以尝试检查您的显示设置。也许他们设置为使用两个显示器（显示器），而您的屏幕现在是次要的（但主要设置为 1536x864）。我的意思是[这个设置](http://images.pcworld.com/images/article/2012/07/intel-11389049.jpg)。

# c++ - 带有模板类的 constexpr 和静态成员声明

> ID：14419679
> 
> 赞同：2
> 
> 时间：2013-01-19T22:42:46.517
> 
> 标签：c++, templates, static, declaration, constexpr

请看代码：

```
#include <iostream>
#include <typeinfo>

template<int N>
struct C
{
  static constexpr int n = N;
  using this_type_1 = C<n>;
  using this_type_2 = C<N>;
  static this_type_1* p_1;
  static this_type_2* p_2;
};

template<int N>
//C<N>* C<N>::p_1; // <--- error pattern
typename C<N>::this_type_1* C<N>::p_1; // <--- ok pattern

template<int N>
C<N>* C<N>::p_2; // ok

int main(){
  std::cerr
    << typeid(C<0>).name() << "\n"
    << typeid(C<0>::this_type_1).name() << "\n"
    << typeid(C<0>::this_type_2).name() << "\n"
  ;
} 
```

它可以用g++-4.7.1和clang++-3.1编译。但它无法使用注释掉的错误模式进行编译。

g++ 错误信息是：

```
test.cpp:15:13: error: conflicting declaration ‘C<N>* C<N>::p_1’
test.cpp:10:23: error: ‘C<N>::p_1’ has a previous declaration as ‘C<N>::this_type_1* C<N>::p_1’
test.cpp:15:13: error: declaration of ‘C<N>::this_type_1* C<N>::p_1’ outside of class is not definition [-fpermissive] 
```

clang++ 错误信息是：

```
test.cpp:15:13: error: redefinition of 'p_1' with a different type
C<N>* C<N>::p_1; // error
            ^
test.cpp:10:23: note: previous definition is here
  static this_type_1* p_1;
                      ^
1 error generated. 
```

幸运的是，我发现了一个工作模式。但我不知道为什么无法编译错误模式。请根据 C++ 语言规范告诉我原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:28:02.230

的两个可能的定义`C<N>::p_1`并不像它们看起来那样等价，因为`C<N>::n`可能在给定的第一次实例化之前的任何时间都明确地专门化`N`。

```
template<int N>
struct C
{
  static constexpr int n = N;
  using this_type_1 = C<n>;
  static this_type_1* p_1;
};

template<int N>
C<N>* C<N>::p_1; // ERROR

template<>
constexpr int C<5>::n = 6;

int main()
{
    C<6>* p = C<5>::p_1;
} 
```

如果编译器接受了 的定义`C<N>::p_1`，则其声明的类型可能不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:16:13.647

这**符合**IMO 的错误，它影响 Clang (3.2) 和 GCC (4.7.2)。我的主张得到以下证据的支持（我试图将 OP 问题的代码减少到最低限度）：

```
#include <type_traits>

template<int N>
struct C
{
    static constexpr int n = N;
    using T = C<n>;
    static T* p;
};

// This compiles, which proves that (C<N>* == typename C<N>::T*)
static_assert(std::is_same<C<5>*, typename C<5>::T*>::value, "Error!");

template<int N>
typename C<N>::T* C<N>::p; // OK
//       C<N>*    C<N>::p; // ERROR! Contradicts the above hypothesis

int main()
{
} 
```

该`static_assert()`表达式不会导致任何编译错误，这意味着这两种类型确实是相同的。`static`但如果是这样的话，这两种定义成员的方式应该没有区别`C<N>::p`。

此外，此代码**确实编译**：

```
#include <type_traits>

template<int N>
struct C
{
    using T = C<N>;
    static T* p;
};

// This compiles, which proves that (C<N>* == typename C<N>::T*)
static_assert(std::is_same<C<5>*, typename C<5>::T*>::value, "Error!");

template<int N>
C<N>* C<N>::p; // OK now

int main()
{
} 
```

这意味着问题与使用`constexpr`静态变量（`n`在本例中）作为模板参数有关。

# android - 安卓游戏倒计时

> ID：14419681
> 
> 赞同：0
> 
> 时间：2013-01-19T22:42:53.357
> 
> 标签：android

好的，这是我的问题，我已经制作了一个完整的游戏，菜单和帮助页面得分生活水平，但我无法让计时器正常工作，一开始我认为这是一个 if() 但我运行了它它会下降到快。

我已经使用android java（eclipse）制作了游戏，我会发布一些代码但我不确定你想看到哪些位，我现在java中的秒是毫秒所以50000/1000 = 50秒但我不知道如何为此，我查看了一些示例代码，但不确定它是如何工作的。

计时器是我制作的一个标签，出现在 AVD 上，atm 它只是说 50000 而没有做任何事情

我试着这样做

公共类计时器扩展了 CountDownTimer{

```
 public timer(long timer, long Interval) {

            super(timer, Interval);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub
            //canvas.drawText("GAME OVER", 200, 700, paint);

        }

        @Override
        public void onTick(long millisUntilFinished) {
            // TODO Auto-generated method stub

            realtime = (int) millisUntilFinished;

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:21:48.663

游戏开始时保存系统时间并创建一个具有所需文本大小和颜色的新 Paint 实例。

```
 startTime = System.currentTimeMillis();
    text = new Paint();
    text.setColor(Color.RED);
    text.setTextSize(20); 
```

要将文本绘制到 onDrow 方法内的画布/屏幕上，请执行以下操作。

```
 timeNow = System.currentTimeMillis();
    long timeToGo = 50 - (timeNow - startTime) / 1000;
    if (timeToGo >= 0) {
        canvas.drawText(Long.toString(timeToGo), 10, 25, text);
    } 
```

这将在屏幕左上方放置一个红色倒计时计时器，从 50 开始倒计时。

# actionscript - 使用所有 AS 文件编译 FLA

> ID：14419683
> 
> 赞同：2
> 
> 时间：2013-01-19T22:43:11.607
> 
> 标签：actionscript, compilation, flash, decompiling

首先，我不是闪存专家.. 仍然想弄清楚，但是，我使用了一个工具*（sothink SWF 反编译器）*将 SWF 文件反编译为 FLA，我首先认为它只会以一个 FLA 文件结束它拥有一切，
在反编译后，它提取了 FLA、AS 和许多不同的目录*（com、it、mx、org ..）*
问题是，Flash Pro 没有给我导入这些文件夹的选项，看来我需要以他们排序的方式逐个文件导入文件，这真的很痛苦，事实上..我不知道如何，在搜索了一段时间后，我认为它们是库，我猜其中一些库在 flash pro 中是默认的，并且已经在那里，我注意到的其他一些与文件相关

我想知道是否有某种方法可以导入所有反编译的内容.. 编辑 actionscript 并将其保存回 SWF 文件？

# jquery - 将当前表单数据附加到 iframe

> ID：14419684
> 
> 赞同：1
> 
> 时间：2013-01-19T22:43:19.733
> 
> 标签：jquery, forms, iframe, append

我想将当前表单数据附加到 iframe 并在 iframe 中提交表单而不是原始表单。下面是代码片段

```
 <script> 
   $(document).ready(function() {
    $("#imageSubmit").click(function(e) {
     e.preventDefault(); 
     $("#wrapper iframe").remove();
     $("#wrapper").append("<iframe src=''>" + $("#imageForm").html()+"</iframe>");
     $("#wrapper iframe form").submit();
     $("#wrapper iframe").load(checkStatus);
    });
   });

   function checkStatus() {
    var status = $.parseJSON($("#wrapper iframe").html());
    if (status.success) {
     alert("File " + status.filename + " uploaded!");
    } else {
     alert("Fail!");
    }
   }
  </script>

<body>
  <div id="wrapper">
   <form name="imageForm" id="imageForm" action="SOMETHING">
    <input type="file" id="imageInput" />
    <input type="submit" id="imageSubmit" />
   </form>
  </div>
</body> 
```

但是，将当前表单 HTML 附加到 iframe 时，它​​会将解码的 HTML（对不起这个词）添加到 iframe。这是我得到的 iframe 输出：

```
 <iframe>
        &lt;input type="file" id="imageInput"&gt;
        &lt;input type="submit" id="imageSubmit"&gt; 
   </iframe> 
```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T00:39:25.953

iframe 与其他 DOM 元素不同，因为它们在窗口中创建另一个文档。

另一个小技巧是需要等待 iframe 加载所以使用`load`事件`iframe`添加内容

要使用 iframe（仅限同一域），您需要使用`contents()`. 里面`contents()`有一棵新树，包括`document`、和`html``head``body`

```
/* dummy src to avoid same domain restrictions in some browsers*/
var jsbinIframeSrc='http://jsbin.com/evoger/1';

var $iframe=$('<iframe src="'+jsbinIframeSrc+'" width="400px" height="300px"></iframe>'); 

$("#wrapper").append( $iframe);

var $form=$('#imageForm').on('submit', function(e){
    /* demo code to show that submit works when triggered inside iframe*/
    e.preventDefault();
    $(this).replaceWith('Form was submitted');
})

$iframe.on('load', function(){
    /* unbind "load" so doesn't add form again when submitted*/
    $iframe.off('load');
     /* insert form in iframe body*/
    $(this).contents().find('body').html($form);
    $form.submit();

}) 
```

演示：http: [//jsbin.com/otobug/2/edit](http://jsbin.com/otobug/2/edit)

API 参考：[http ://api.jquery.com/contents/](http://api.jquery.com/contents/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:17:25.650

谢谢您的答复。我按照以下方式做了，像冠军一样工作：

```
var iframe = "<iframe name='frame' id='frame' style='visibility:hidden' onload='onFrameLoad();'></iframe>";
$('wrapper').append(iframe);
$('#form').attr('target','frame');

function onFrameLoad(cur_form_number) {
.
.
} 
```

# android - 如何在android apk的清单中编辑包名称

> ID：14419685
> 
> 赞同：0
> 
> 时间：2013-01-19T22:43:22.037
> 
> 标签：android, manifest, apk, filenames

我想在我的手机上**启动相同的应用程序两次**，所以我做了谷歌并得到我需要**更改包名称**所以我为此使用***apktool***并反编译我的 apk 并更改清单文件中的包名称但是当我尝试重建时它给了我一些错误........！！现在我不知道该怎么办......！我在重建过程中遇到了这个错误......--->

```
Exception in thread "main" brut.androlib.AndrolibException: brut.androlib.Androl
ibException: brut.common.BrutException: could not exec command: [aapt, p, --min-
sdk-version, 8, -F, C:\Users\SaMPoR\AppData\Local\Temp\APKTOOL501867114468940568
1.tmp, -I, C:\Users\SaMPoR\apktool\framework\1.apk, -S, C:\Users\SaMPoR\Desktop\
Android New Stuff\apk tool\apktool1.5.1\2\res, -M, C:\Users\SaMPoR\Desktop\Andro
id New Stuff\apk tool\apktool1.5.1\2\AndroidManifest.xml]
        at brut.androlib.Androlib.buildResourcesFull(Androlib.java:357)
        at brut.androlib.Androlib.buildResources(Androlib.java:282)
        at brut.androlib.Androlib.build(Androlib.java:205)
        at brut.androlib.Androlib.build(Androlib.java:176)
        at brut.apktool.Main.cmdBuild(Main.java:218)
        at brut.apktool.Main.main(Main.java:74)
Caused by: brut.androlib.AndrolibException: brut.common.BrutException: could not
 exec command: [aapt, p, --min-sdk-version, 8, -F, C:\Users\SaMPoR\AppData\Local
\Temp\APKTOOL5018671144689405681.tmp, -I, C:\Users\SaMPoR\apktool\framework\1.ap
k, -S, C:\Users\SaMPoR\Desktop\Android New Stuff\apk tool\apktool1.5.1\2\res, -M
, C:\Users\SaMPoR\Desktop\Android New Stuff\apk tool\apktool1.5.1\2\AndroidManif
est.xml]
        at brut.androlib.res.AndrolibResources.aaptPackage(AndrolibResources.jav
a:349)
        at brut.androlib.Androlib.buildResourcesFull(Androlib.java:335)
        ... 5 more
Caused by: brut.common.BrutException: could not exec command: [aapt, p, --min-sd
k-version, 8, -F, C:\Users\SaMPoR\AppData\Local\Temp\APKTOOL5018671144689405681.
tmp, -I, C:\Users\SaMPoR\apktool\framework\1.apk, -S, C:\Users\SaMPoR\Desktop\An
droid New Stuff\apk tool\apktool1.5.1\2\res, -M, C:\Users\SaMPoR\Desktop\Android
 New Stuff\apk tool\apktool1.5.1\2\AndroidManifest.xml]
        at brut.util.OS.exec(OS.java:89)
        at brut.androlib.res.AndrolibResources.aaptPackage(AndrolibResources.jav
a:347)
        ... 6 more 
```

更新：-> 是的，我刚刚在清单文件中更改了包名，所以我现在收到了这个错误，我在所有 Xml 文件中更改了我的包名，所以没有这样的错误，但是当我尝试安装更新的 apk 时，我认为它意外关闭（我是不确定）我也需要在类中更改包名称...如果是的话如何...？b'coz 我没有原始源代码.....!!!

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-22T17:43:00.827

尝试将 sdk>platform-tools 中的 aapt.exe 文件复制到 c:\windows

# c# - 使用 TypeLib 获取方法和属性的名称

> ID：14419689
> 
> 赞同：1
> 
> 时间：2013-01-19T22:44:03.290
> 
> 标签：c#, com, activex, typelib

我有一个 ActiveX 组件，它也有一个详细的 Typelib。现在我想在 C# 中以编程方式获取该组件的方法和属性列表。
谁能指导我如何去做？

# c - 编译时对“dgesv_”的未定义引用

> ID：14419691
> 
> 赞同：0
> 
> 时间：2013-01-19T22:44:06.793
> 
> 标签：c, makefile

我有以下生成文件：

```
CC = gcc

ROOTPATH = /home/swagatam
LIB_PATH = $(ROOTPATH)/mylib/libf2c.a \
            $(ROOTPATH)/mylib/blas_LINUX.a \
        $(ROOTPATH)/mylib/lapack_LINUX.a -lm

INC_PATH = -I$(ROOTPATH)/myinclude

swadgesv : swadgesv.o
    $(CC) $(LIB_PATH) swadgesv.o -o swadgesv

swadgesv.o : swadgesv.c
    $(CC) $(INC_PATH) -c swadgesv.c

clean:
    rm -f *.o 
```

swadgesv.c 是 AX = B 形式的程序求解方程。我需要 3 个头文件和 3 个库来链接以解决问题。但是当我在终端中运行 Makefile 时，它​​显示：

```
gcc -I/home/swagatam/myinclude -c swadgesv.c
gcc /home/swagatam/mylib/libf2c.a /home/swagatam/mylib/blas_LINUX.a         /home/swagatam/mylib/lapack_LINUX.a -lm swadgesv.o -o swadgesv
swadgesv.o: In function `main':
swadgesv.c:(.text+0x0): multiple definition of `main'
/home/swagatam/mylib/libf2c.a(main.o):(.text.startup+0x0): first defined  here
/home/swagatam/mylib/libf2c.a(main.o): In function `main':
(.text.startup+0xad): undefined reference to `MAIN__'
swadgesv.o: In function `main':
swadgesv.c:(.text+0xc1): undefined reference to `dgesv_'
collect2: ld returned 1 exit status
make: *** [swadgesv] Error 1 
```

即使我更改 LIB_PATH 中库的顺序，它也会显示不同的错误。我正在从我安装的 clapack 库中调用一个函数 dgsev。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T22:47:41.537

将您的库放在目标文件之后：

```
swadgesv: swadgesv.o
    $(CC) swadgesv.o -o swadgesv $(LIB_PATH) 
```

如果您首先列出库，则加载器正在寻找一个符号`main()`，它通常不会在库中找到它，因此它没有理由链接库中的任何符号并有效地忽略它们。当它最终遇到您的目标文件时，它会找到`main()`，但没有找到`main()`目标文件后面的（不存在的）参数中引用的符号。因此，符号仍未定义。链接行上参数的顺序确实很重要。

# macos - AppleScript as .app 不从命令行获取参数

> ID：14419700
> 
> 赞同：9
> 
> 时间：2013-01-19T22:45:17.127
> 
> 标签：macos, applescript, command-line-arguments

我尝试在 AppleScript 中处理命令行参数。如果我使用`osascript TestArgs.scpt a.txt b.txt`. 但是，如果我将脚本保存为 .app 并从命令行运行它，它不会显示任何参数：`open -a TestArgs --args a.txt b.txt`不起作用。我还尝试了脚本的几种变体，但均未成功。

```
on run argv
    set argc to 0
    try
        set argc to (count of argv)
    end try
    tell application "Finder" to display dialog ("Argument Count: " & argc as string)
end run 
```

似乎问题出在 OSX 10.8 上，因为相同的脚本在 10.7 上按预期工作

我的错误在哪里？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-01T17:39:10.397

有一种方法可以使用 JXA（用于自动化的 JavaScript），这可能是一个可以接受的解决方案。它使用了 Objective-C 桥接器，因此也可以使用 AppleScript。这主要[取自 JXA Cookbook](https://github.com/dtinth/JXA-Cookbook/wiki/Shell-and-CLI-Interactions#arguments)。

此问题中与 AppleScript 等效的 JXA 将使用：

```
function run(argv) {
  …
} 
```

但它也存在编译到应用程序时无法工作的相同问题。您可以通过开始代码来解决这个问题

```
ObjC.import('Foundation')
const args = $.NSProcessInfo.processInfo.arguments
const argv = []
const argc = args.count
for (let i = 0; i < argc; i++) { argv.push(ObjC.unwrap(args.objectAtIndex(i))) }
delete args 
```

用户给定的参数将从 开始`argv[1]`，`argv[0]`applet 本身也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:21:16.880

您为什么不将 osascript 与应用程序一起使用？这样可行。你基本上有两种方法来传递参数。这些适用于 scpt 或应用程序...

1）从命令行：osascript /path/to/script arg1 arg2

2) 从另一个脚本：使用参数 {arg1, agr2} 运行脚本文件 path:to:script。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-15T09:05:55.533

我自己也一直在寻找解决方案。由于还没有批准的解决方案，我想指出[red_menace](https://stackoverflow.com/users/10853463/red-menace)发布的[解决方案](https://stackoverflow.com/a/57700497/4216175)。在那里，您可以找到一个 AppleScript 代码，该代码完全回答了原始发布的问题，即如何使用命令行参数运行 Applescript 应用程序。

值得称赞的是，AppleScript 代码让人想起[user137369](https://stackoverflow.com/users/1661012/user137369)发布的[JavaScript 应用程序](https://stackoverflow.com/a/44313903/4216175)。

# wpf - 绑定到 ObservableCollection 的索引

> ID：14419703
> 
> 赞同：1
> 
> 时间：2013-01-19T22:45:40.387
> 
> 标签：wpf, binding

我有个问题。我绑定`ListView`到我的`ObservableCollection<ImageSource>`：

```
<ListView x:Name="FramesListView" ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Disabled"
      ItemsSource="{Binding Path=FrameImages}" SelectionChanged="FramesListView_OnSelectionChanged">
<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapPanel
            Width="Auto"
            ItemWidth="{Binding (ListView.View).ItemWidth, RelativeSource={RelativeSource AncestorType=ListView}}"
            ItemHeight="{Binding (ListView.View).ItemHeight, RelativeSource={RelativeSource AncestorType=ListView}}" />
    </ItemsPanelTemplate>
</ListView.ItemsPanel>

<ListView.ItemTemplate>
    <DataTemplate>
        <Border Width="100" Height="75" BorderThickness="1" BorderBrush="DarkGray" VerticalAlignment="Center" Margin="7,5,7,5">
            <StackPanel Orientation="Vertical">
                <Image Margin="5,5,5,5" Width="100" Height="75" Source="{Binding}" Stretch="Fill"></Image>
                <Label HorizontalAlignment="Center" Content="{Binding}"></Label>
            </StackPanel>
        </Border>
    </DataTemplate>
</ListView.ItemTemplate>
</ListView> 
```

除了一件事，一切都很好。我还想在每个图像下显示索引。我不知道如何意识到这一点。

如何更改该行以使其成为可能？

```
<Label HorizontalAlignment="Center" Content="{Binding}"></Label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T01:07:19.190

我曾经在类似情况下使用的一个有点骇人听闻的解决方案是为此目的使用 AlternationIndex 属性。通过将 AlternationCount 设置为足够高的数字，AlternationIndex 属性可以用作计数器。

```
<ItemsControl x:Name="itemsControl" AlternationCount="100000">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Label Content="{Binding Path='(ItemsControl.AlternationIndex)', RelativeSource={RelativeSource AncestorType=ContentPresenter}}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

然而，这有一个缺点，即编号从 0 开始。

另一个更清洁的解决方案包括创建一个 ValueConverter，如此处所述： [如何绑定 ListBoxItem 的索引](https://stackoverflow.com/questions/3843829/how-can-i-bind-against-the-index-of-a-listboxitem)

# bash - 带 sed 命令的 Bash 脚本中的引号和 \

> ID：14419712
> 
> 赞同：0
> 
> 时间：2013-01-19T22:47:00.650
> 
> 标签：bash, variables, raspberry-pi, raspbian

我正在编写一个 bash 脚本来帮助我更快地设置我的 rpi 的网络接口。它现在已经基本完成，并且使用 sed 来更改 /etc/network/interfaces 文件的不同部分，具体取决于网络接口的设置方式。我的问题是我在不想要引号的地方插入引号，如果我删除引号，我会插入包含要作为变量名字符串插入的数据的变量，而不是将它们作为值插入。

我的代码如下（虽然我已经把它删掉了）

```
#!/bin/bash
ANS=''
ssid=''
psk=''
file='/etc/network/interfaces'
ip=''
netmask=''
broadcast=''
gateway=''
function static {
    echo 'Will now set up Static IP'
    echo 'What IP address do you want to assign this Device?'
    echo -e '> \c'
    read ip
    echo 'What is your Networks Netmask/Subnet?'
    echo -e '> \c'
    read netmask
        echo 'What is your Networks Broadcast Address?'
        echo -e '> \c'
        read broadcast
        echo 'What is the address of your Networks Gateway?'
        echo -e '> \c'
        read gateway
    echo 'You entered the following information about your Network'
    echo ''
    echo 'Address: ' $ip
    echo 'Netmask: ' $netmask
    echo 'Broadcast: ' $broadcast
    echo 'Gateway: ' $gateway
    echo 'Is this information correct? (y/n)'
    echo -e '> \c'
        read ANS
        if [ $ANS = 'y' ]; then
        sed -i "s/^iface eth0 inet dhcp.*\$/iface eth0 inet static/" $file
        sed -i "s/^#    address.*\$/    address \"$ip\"/" $file
        sed -i "s/^#    netmask.*\$/    netmask \"$netmask\"/" $file
        sed -i "s/^#    broadcast.*\$/  broadcast \"$broadcast\"/" $file
        sed -i "s/^#    gateway.*\$/    gateway \"$gateway\"/" $file
        echo 'Static IP address has now been set up'
        start
    else
        static
    fi
} 
```

问题是这里的这些行

```
 sed -i "s/^#    address.*\$/    address \"$ip\"/" $file
        sed -i "s/^#    netmask.*\$/    netmask \"$netmask\"/" $file
        sed -i "s/^#    broadcast.*\$/  broadcast \"$broadcast\"/" $file
        sed -i "s/^#    gateway.*\$/    gateway \"$gateway\"/" $file 
```

哪个插入`address "(var_address)"`。正如我所说，我可以让它插入`address $address`。但不是，如我所愿，`address (var_address)`。有人可以解释如何在 sed 命令中使用 / 和 \ 以及 " 和 ' 以便我可以解决问题。正如您可能已经猜到我对 bash 有点陌生，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T00:20:02.483

虽然 bash 不会尝试解析没有标准变量，例如`$/`，但您可以简单地：

```
sed "
    /^iface $iface/,/^$/{
        /address/s/^.*$/\taddress $ip/;
        /netmask/s/^.*$/\tnetmask $netmask/;
        /broadcast/s/^.*$/\tbroadcast $broadcast/;
        /gateway/s/^.*$/\tgateway $gateway/;

    }" -i $file 
```

注意：这仅修改**了 1 段**有关`$iface`: 与第一 sed 行：`/^iface $iface/,/^$/{ ... }`分隔一个命令块，该命令块只能从匹配`/^iface $iface/`到空行（或文件结尾）的行中执行。

要在 bash 中使用 IP 地址，请查看[https://serverfault.com/a/461831/142978](https://serverfault.com/a/461831/142978)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T23:16:41.833

如果我正确理解了所需的内容，则应该可以：

```
sed -i "s/^#    address.*\$/    address $ip/" $file
sed -i "s/^#    netmask.*\$/    netmask $netmask/" $file
sed -i "s/^#    broadcast.*\$/  broadcast $broadcast/" $file
sed -i "s/^#    gateway.*\$/    gateway $gateway/" $file 
```

# javascript - JavaScript 图像覆盖 Web 应用程序

> ID：14419713
> 
> 赞同：0
> 
> 时间：2013-01-19T22:47:17.277
> 
> 标签：javascript, html, css, web, image

我正在开发一个 HTML/CSS/JavaScript 应用程序，并且我有一个功能，用户可以单击多个图像选项（不同大小），然后单击“开始！” 应用程序将使用 JavaScript 将图像叠加在一起（按顺序使最大的图像在底部，依此类推）。我环顾四周，我看到的大多数网站都建议使用 CSS `position:absolute`，但我想知道是否有另一种使用 JavaScript 的方法来做到这一点，所以它更具交互性。

有什么建议么？我是 JavaScript 的初学者，很抱歉问了一个初级问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:51:06.343

您可以使用 JavaScript 来操纵图像的位置。为每个图像分配一个 id 并使用 JavaScript`getElementById`更改位置。

所以像：

```
<div id="image1"><img src="image1.png" /></div> 
```

然后是你的 JavaScript：

```
document.getElementById("image1").style.position = "absolute";
document.getElementById("image1").style.left = "0px";
document.getElementById("image1").style.top = "30px"; 
```

您可以对多个图像执行此操作，只需为每个图像 div 分配一个唯一的 id。

# java - 找不到符号 - 类文件

> ID：14419721
> 
> 赞同：0
> 
> 时间：2013-01-19T22:48:16.960
> 
> 标签：java, compiler-errors

我正在创建一个实现的类，`DirectoryStream`这样我就可以遍历一个目录。但是，我无法超越编译时错误，因为当我尝试导入“java.nio.file”时，它指出“找不到符号 - 类文件”。有谁知道为什么？

```
 import java.nio.file;
                   ^ to ^ is highlighted red when I compile the file. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:49:21.207

它应该是

```
import java.nio.file.*; 
```

`java.nio.file`是[包](http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html)不是类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:50:58.110

该声明

```
import java.nio.file; 
```

尝试`file`从包中导入命名的类`java.nio`。这显然不存在（在 JRE 中）。

在您的代码中，该语句应该是

```
import java.nio.file.DirectoryStream; 
```

（并仔细检查您使用的是 Java 7，它在以前的版本中不可用）

# gwt - 在父 FlowPanel 中水平居中 FlexTable？

> ID：14419723
> 
> 赞同：1
> 
> 时间：2013-01-19T22:48:33.243
> 
> 标签：gwt

我创建了一个 FlexTable，我想在父 FlowPanel 中水平居中，例如：

```
FlexTable ft = new FlexTable();
ft.add(0, 0, new Label());
ft.add(0, 1, new Orange());
ft.add(0, 2, new Label());

FlowPanel parent = new FlowPanel();
parent.add(ft); // how can I horizontally center the table in this div? 
```

表格的内容比父 FlowPanel 窄（也就是 width:auto，浏览器的整个宽度），但是表格现在是左对齐的，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:42:36.597

两种选择：

```
parent.getElement().getStyle().setTextAlign(TextAlign.CENTER); 
```

或者

```
ft.getElement().getStyle().setProperty("margin", "0 auto"); 
```

当然，您可以改用 CSS 样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:49:09.037

首先？您使用的是哪个版本的 GWT？之所以提出这个问题，是因为 FlexTable 中没有类似于您在[最新版本](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FlexTable.html)中使用的 add (int, int, Widget ) 的方法。

但是，您可以使用以下代码。

```
 FlexTable ft = new FlexTable();
    ft.setWidget(0, 0, new Label("a"));
    ft.setWidget(0, 1, new Label("b"));
    ft.setWidget(0, 2, new Label("c"));

    FlowPanel parent = new FlowPanel();
    parent.setSize("100%", "100%");
    parent.add(ft);
    parent.getElement().getStyle().setProperty("TextAlign", "center");
    // If you are using Firefox : 
    //parent.getElement().getStyle().setProperty("TextAlign", "-moz-center");
    RootLayoutPanel.get().add(parent); 
```

如果您不想在 java 代码中提及样式，您可以随时使用 CSS 之类的

```
parent.addStyleName("myStyle"); 
```

在 CSS 中

```
.myStyle{
text-align : center;
} 
```

# c# - 浏览表单时出现ObjectDisposeException c#

> ID：14419724
> 
> 赞同：0
> 
> 时间：2013-01-19T22:48:33.980
> 
> 标签：c#, forms, navigation

我想浏览表单，所以当我客户端 buttonKlient 时，我转到 Form2，然后当我单击控件“x”时，我回到 Form1，我得到：

（`fk`是`Form2`）

```
 private void button1_Click(object sender, EventArgs e) {
                if (fk == null)
                    fk = new OknoKlient();
                fk.Tag = this;
                fk.Show(this);//here is ObjectDisposedException
                Hide();
            } 
```

然后在`Form2`

```
 protected override void OnFormClosing(FormClosingEventArgs e) {
            if (e.CloseReason == CloseReason.WindowsShutDown) return;
            var form1 = (Form1)Tag;
            form1.Show();
            Hide();
            // DO WHATEVER HERE
        } 
```

当我单击打开时，我通过控件将其关闭，`button1`然后再次单击 button1 并出现异常。`Form2 fk``x``ObjectDisposedException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:05:58.867

```
protected override void OnFormClosing(FormClosingEventArgs e) {
    if (e.CloseReason == CloseReason.WindowsShutDown) return;
    e.Cancel = true; // <---------------------- this
    var form1 = (Form1)Tag;
    form1.Show();
    Hide();
    // DO WHATEVER HERE
} 
```

您正在隐藏表格，是的..但表格仍在处理中。您需要添加`e.Cancel = true;`以取消表单关闭。

# php - 什么是 Facebook API 错误 191

> ID：14419726
> 
> 赞同：0
> 
> 时间：2013-01-19T22:48:46.230
> 
> 标签：php, facebook, facebook-graph-api

> **可能重复：**
> [Facebook API 错误 191](https://stackoverflow.com/questions/4691782/facebook-api-error-191)

我正在使用的一些代码出现以下错误。错误是

> API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序 错误消息：redirect_uri 不属于应用程序。

```
<?php   
$facebook = new Facebook(array('appId' => $app_id,'secret' => $app_secret,'cookie' => true));
if($facebook->getUser() < 1)
{
    $red_url = $page_url.'?sk=app_'.$app_id;
    $redir = $facebook->getLoginUrl(array('redirect_uri'=>$red_url,'next'=>$red_url,'scope'=>'offline_access,publish_stream,status_update,photo_upload,user_birthday'));
    echo "<script>top.location.href='".$redir."';</script>";
    exit;
}
$user = $facebook->api('/me'); 
```

任何人都可以解释如何解决这个问题以及为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:12:47.577

您需要告诉 Facebook 您的应用可以访问该网站。

编辑您的应用设置（通过 FB 开发者仪表板）。在基本设置页面上，单击“使用 Facebook 登录的网站”并输入您的网站地址。

![编辑您的 Facebook 应用程序网站](../Images/c387b95addc718b4f4051f57a9973145.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:50:43.283

你能说“跨站点脚本”；）吗？

解决方法：

浏览器、编辑设置、网站 <= 将网站 URL 添加到应用设置

这里有一点背景：

> * [http://techblog.hybris.com/2012/06/05/oauth2-the-implicit-flow-aka-as-the-client-side-flow/](http://techblog.hybris.com/2012/06/05/oauth2-the-implicit-flow-aka-as-the-client-side-flow/)
> 
> `redirect_uri`：服务器配置了一个redirect_uri（我们强烈推荐），它需要匹配client_id的设置。Client_id 和 redirect_uri 都是应用程序开发人员需要事先获取的服务器端设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T23:31:32.240

当您打开 Facebook 应用程序时，您需要设置您的应用程序打算在其下运行的域 - 并且（几乎）您的应用程序与 facebook 接触的每个地方（尤其是客户端）都必须来自同一个 url域（或其子域）

在您的情况下，您告诉 Facebook 为用户授权该应用程序，然后将他重定向到`$red_url`我理解为安装您的应用程序的页面 - 但此链接不在您的应用程序的域下（除非您注册`facebook.com`为您的应用程序应用程序仪表板中的域

如果您想将用户重定向到该特定选项卡 - 您可以在应用程序的域下创建一个代理文件，将用户重定向到该选项卡，例如：

假设您在[应用仪表板](http://developers.facebook.com/app/)`mydomain.com`中注册为您的应用域。然后 - 创建一个名为example 的文件，该文件将包含以下脚本并将其放在：`redirect.php``http://www.mydomain.com/my_directory/redirect.php`

```
<?php
$app_id ="ENTER_YOUR_APP_ID_HERE";
$page_url = "ENTER_THE_PAGE_URL_HERE"; //for example: http://www.facebook.com/techmarketing.co.il
$red_url = $page_url.'?sk=app_'.$app_id;

header("Location: {$red_url}"); 
```

您的脚本将更改为：

```
<?php   
$facebook = new Facebook(array('appId' => $app_id,'secret' => $app_secret,'cookie' => true));
if($facebook->getUser()==0)
{
    $red_url = "http://www.mydomain.com/my_directory/redirect.php";
    $redir = $facebook->getLoginUrl(array('redirect_uri'=>$red_url,'next'=>$red_url,'scope'=>'offline_access,publish_stream,status_update,photo_upload,user_birthday'));
    echo "<script>top.location.href='".$redir."';</script>";
    exit;
}
$user = $facebook->api('/me'); 
```

# javascript - 在 jQuery 中附加 [object%20Object] 的 JSON 请求

> ID：14419730
> 
> 赞同：6
> 
> 时间：2013-01-19T22:48:55.447
> 
> 标签：javascript, jquery, ajax, http-status-code-404, getjson

`getJSON`我正在尝试使用该方法获取我用 jQuery 编写的自定义 JSON 提要。由于未知原因，URL 似乎`cache_gen.php?location=PL4`已从末尾剥离并替换为 [object%20Object] 导致发生 404 错误。

这是我正在使用的 jQuery：

```
var fetchData = function() {

    if (Modernizr.localstorage) {

        var api_location = "http://weatherapp.dev/cache_gen.php";
        var user_location = "PL4";
        var date = new Date();

        console.log(api_location + '?location=' + user_location);

        jQuery.getJSON({
            type: "GET",
            url: api_location + '?location=' + user_location,
            dataType: "json",
            success: function(jsonData) {
                console.log(jsonData);
            }
        });

    } else {
        alert('Your browser is not yet supported.  Please upgrade to either Google Chrome or Safari.');
    }
}

fetchData(); 
```

从控制台日志中，我可以看到 URL 字符串正确计算为：`http://weatherapp.dev/cache_gen.php?location=PL4`

但是控制台中的第二行是：`Failed to load resource: the server responded with a status of 404 (Not Found)`.

谁能指出我正确的方向？

**更新 19/01/2013 23:15**

好吧，我刚刚进行了转换，因此非常适合使用`$.ajax`. 我还添加了一个失败事件并记录了传递给它的所有数据。

```
var fetchData = function() {

    if (Modernizr.localstorage) {

        var api_location = "http://weatherapp.dev/cache_gen.php";
        var user_location = "PL4";
        var date = new Date();

        var url = api_location + '?location=' + user_location;

        console.log(url);

        jQuery.ajax({
            type: "GET",
            url: api_location + '?location=' + user_location,
            dataType: "json",
            success: function(jsonData) {

                console.log(jsonData);
            },
            error: function( jqXHR, textStatus, errorThrown ) {
                console.log('textStatus: ' + textStatus );
                console.log('errorThrown: ' + errorThrown );
                console.log('jqXHR' + jqXHR);
            }
        });

    } else {
        alert('Your browser is not yet supported.  Please upgrade to either Google Chrome or Safari.');
    }
}

fetchData(); 
```

在此之后，我的控制台为我提供了以下信息：

```
http://weatherapp.dev/cache_gen.php?location=PL4
download_api.js:44textStatus: parsererror
download_api.js:45errorThrown: SyntaxError: JSON Parse error: Unable to parse JSON string
download_api.js:46jqXHR[object Object] 
```

我已确保 JSON 提要的标头是最新的，并且提要肯定提供有效的 JSON（它有效地缓存了第 3 方服务提要以节省 API 成本）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T13:17:00.817

您看到此错误的原因：

```
http://weatherapp.dev/cache_gen.php?location=PL4
download_api.js:44textStatus: parsererror
download_api.js:45errorThrown: SyntaxError: JSON Parse error: Unable to parse JSON string
download_api.js:46jqXHR[object Object] 
```

是因为您的 JSON 无效。即使从服务器正确返回响应，如果您的 dataType 是 'json' 并且返回的响应不是格式正确的 JSON，jQuery 也会执行错误函数参数。

[http://jsonlint.com](http://jsonlint.com)是验证 JSON 字符串有效性的一种非常快速且简单的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-11T19:44:35.347

我今天遇到了同样的问题。在我的例子中，我将一个 JSON 对象分配给一个名为“location”的变量，该变量是[Windows 下 JavaScript](http://www.w3schools.com/js/js_reserved.asp)中的保留字，并且显然是 windows.location 的简写！因此，浏览器重定向到当前 URL，并附加了 [object%20Object]。如果同样的事情发生在您身上，只需使用“位置”以外的变量名称。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:58:00.253

查看实际的函数用法：

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

您不能将对象参数传递给`$.getJSON`like with `$.ajax`，您的代码应如下所示：

```
 jQuery.getJSON('api_location + '?location=' + user_location)
         .done(function() {
            //success here
         })
         .fail(function() {
           //fail here
         }); 
```

为了让它更清楚一点，`$.getJSON`它只是一个最终调用的“包装函数`$.ajax`” `{type:'get',dataType:'JSON'}`。您可以在我上面提供的链接中看到这一点。

# php - 如何正确设置运行发送电子邮件的 PHP 脚本的 cron 作业？

> ID：14419732
> 
> 赞同：0
> 
> 时间：2013-01-19T22:49:29.060
> 
> 标签：php, email, cron

我已经编写了一个 PHP 脚本，该脚本将一些内容发送到预定义的电子邮件地址，并希望设置一个每天运行该 PHP 脚本的 cron 作业。此外，我已将其设置为每次 cron 运行时也向我发送一封电子邮件。我应该提到，该脚本使用 PHP`mail()`函数以 html 格式发送电子邮件，并且我已经通过直接通过浏览器的地址栏访问来测试该脚本是否有效。

cron 命令： `php /home/myuserid/public_html/projects/jobs/index.php`

令人惊讶的是，当 cron 运行时，我通过电子邮件收到以下错误消息：

***在 /usr/bin/sendmail 第 15 行的连接 (.) 或字符串中使用未初始化的值。内容类型：text/html***

我什至不确定从哪里开始寻找问题，所以我需要问：我如何正确设置一个简单的 cron 作业，该作业运行一个使用该`mail()`函数发送电子邮件的 PHP 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:22:45.253

如果不查看脚本本身，很难准确地说出问题出在哪里，但根本问题是输出流被发送到错误的位置。在标准 POSIX 环境中，有 2 个标准输出流，标准输出 ( `stdout`) 和标准错误 ( `stderr`)。在 Web 浏览器中查看脚本时，`stdout`将传递给浏览器`stderr`并由 Apache 处理并通常发送到记录器。

从命令行调用时，情况有所不同：它们可能会打印到控制台（这是标准的`stdout`），但取决于脚本和 CLI 之类的东西`php.ini`。在您的情况下，引用 的行`Content-Type`表示输出被发送到错误的位置。您可以使用 shell（通常是 BASH）重定向来重定向输出。您使用`>`for write 和`>>`for append ，您还可以指示默认为`stdout`和`2`表示的输出流`stderr`。输出可以发送到任何地方，例如基本日志文件，或者如果根本不需要它，可以通过将其发送到特殊设备来丢弃它`/dev/null`。

所以....提供的解决方案

`php /home/myuserid/public_html/projects/jobs/index.php 2> /dev/null`

运行您的脚本，同时丢弃`stderr`之前发送到错误目的地并导致某些接收器抛出的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:19:26.093

我已经联系了我的托管服务提供商，他们已经将 cron 命令自己更改为`php /home/myuserid/public_html/projects/jobs/index.php 2> /dev/null`，这就成功了。@Matt Whipple 建议进行部分修复（即添加`/dev/null`到命令行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:52:58.360

您必须确保您的服务器有一个活动的 SMTP 服务器。另外，如果它说您有连接问题，那么您做错了一些事情，例如；

```
$output = $string . " and " . $string; 
```

或像这样；

```
$output = "Hello";
$output .= " there!"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T22:54:58.333

运行cron的方法似乎是正确的。您的邮件发送一定有问题。您的服务器可能不支持使用`mail()`功能。[您可以更喜欢使用PhpMailer](http://sourceforge.net/projects/phpmailer/)的smtp 邮件。

尝试设置标题：

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";

mail($to, $subject, $message, $headers); 
```

# c++ - c ++：在哪里删除对象并将对象转换回父类的成员

> ID：14419738
> 
> 赞同：1
> 
> 时间：2013-01-19T22:50:05.780
> 
> 标签：c++, oop, serial-port

我有一个简单的 Message 类和一个简单的 SerialPort 类。我还有一个特定的消息子类和一个特定的串口子类（CustomMessage & CustomSerialPort）：

```
class Message
{
public: 
    uint8 getLength() const ( return m_length; }
    const uint8* getData() const { return m_contents; }
...
}

class SerialPort
{
public:
    bool OpenSerial(int32& errcode);  
    bool ReadFromSerial(int32& errcode, Message& msg);  
    bool WriteToSerial(int32& errcode, Message& msg, 
        uint32* const nBytesWritten);
...
} 
```

这是自定义类。请注意，我重载了 WriteToSerial() 以获取 CustomMessage 而不仅仅是 Message。

```
class CustomSerialPort : public SerialPort
{
public:
    bool WriteToSerial(int32& errcode, CustomMessage& msg, 
        uint32* const nBytesWritten);
...
}

class CustomMessage : public Message 
{
    // lots of stuff for messages to specific device
} 
```

同样重要的是，CustomSerial::WriteToSerial 和 CustomMessage::toMessage() 的实现

```
bool CustomSerialPort::WriteToSerial(int32& errcode, CustomMessage& msg, 
    uint32* const nBytesWritten)
{
    SerialPort::WriteToSerial(errcode, msg.toMessage(), nBytesWritten);
}

Message& CustomMessage::toMessage() 
{
    Message* msg = new Message(m_contents, m_length);
    return *msg;
} 
```

可以看到我调用了SerialPort类的WriteToSerial，给它发送了一个已经转换为Message的CustomMessage。

**我的问题是：我应该在哪里删除我创建的传递给 SerialPort::WriteToSerial 的消息？**

或者，我应该做更多这样的事情：

```
bool CustomSerialPort::WriteToSerial(int32& errcode, CustomMessage& msg, 
    uint32* const nBytesWritten)
{
    // don't use new
    Message m(msg);

    SerialPort::WriteToSerial(errcode, m, nBytesWritten);
    // deleted when goes out of scope
} 
```

然后，使用选项 2，如果我的理解是正确的，我只需要创建一个带有 CustomMessage 参数的 Message 构造函数......等等......这看起来很奇怪......在父类构造函数中采用子类对象参数。我需要重新考虑这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:53:14.810

您不需要`new Message`进入 toMessage() 也不需要删除它。

改变

```
Message& CustomMessage::toMessage() 
{
    Message* msg = new Message(m_contents, m_length);
    return *msg;
}

bool CustomSerialPort::WriteToSerial(int32& errcode, CustomMessage& msg, 
    uint32* const nBytesWritten); 
```

到

```
Message CustomMessage::toMessage() 
{
    return Message(m_contents, m_length);
}

bool CustomSerialPort::WriteToSerial(int32& errcode, const CustomMessage& msg, 
                                                     ^^^ const
    uint32* const nBytesWritten) 
```

在`toMessage()`WriteToSerial 中调用时，它将被绑定，直到 WriteToSerial() 函数完成。

您还需要为所有函数添加**const**限定符`Message`作为输入

```
class SerialPort
{
public:
    bool OpenSerial(int32& errcode);  
    bool ReadFromSerial(int32& errcode, const Message& msg);  
    bool WriteToSerial(int32& errcode, const Message& msg, 
        uint32* const nBytesWritten);
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:58:32.203

只要有可能，不要使用`new`. 唯一应该使用 new 的时间是： 1\. 您无法事先知道需要多少个对象，并且“少数”和“很多”之间的可能范围差异很大，因此使用固定大小的数组或类似数组是不合理的. 2\. 当对象必须比你当前的函数持续更长时间，并且从较低的函数传递对象是不合理的。3\. 对象的类型在对象被创建之前是无法知道的（尤其是多态性）。

不使用`new`帮助是因为您以后不必记住`delete`它。

如果您确实使用`new`，那么最好将它放在一个资源持有对象中 - 智能指针或类似的东西 - 这样，您就不必记住删除它。

# ocaml - 为什么此 OCaml 代码会收到“意外令牌”？

> ID：14419750
> 
> 赞同：2
> 
> 时间：2013-01-19T22:51:10.067
> 
> 标签：ocaml

```
let rec move_robot (pos: int) (dir: string) (num_moves: int) : int =

    let new_forward_position = pos + num_moves in
    if (new_forward_position > 99) then failwith "cannot move beyond 99 steps"
    else new_forward_position

    let new_backward_position = pos - num_moves in
    if (new_backward_position pos < 0) then failwith "cannot move less than 0 steps"
    else new_backward_position

    begin match dir with 
    | "forward" -> new_forward position
    | "backward" -> new_backward_position
    end 
```

我继续为 let new_backward_position 线获取“意外令牌”。我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:11:26.467

这是编译的代码：

```
let rec move_robot pos dir num_moves =
    let new_forward_position = pos + num_moves in
    if new_forward_position > 99 then failwith "cannot move beyond 99 steps";

    let new_backward_position = pos - num_moves in
    if new_backward_position < 0 then failwith "cannot move less than 0 steps";

    begin match dir with
    | "forward" -> new_forward_position
    | "backward" -> new_backward_position
    end 
```

我修改了几处：

*   重要：`if foo then bar else qux`是 OCaml 中的一个表达式，它采用值`bar`或`qux`. 因此 `bar`和`qux`需要具有相同的类型。
*   `new_backward_position`代替`new_backward_position pos`
*   你不需要类型注释：OCaml 有类型推断
*   if 子句周围不需要括号
*   错别字`new_forward position`

此外，根据您的代码逻辑，`let _ = move_robot 0 "forward" 5`失败。它不应该返回 5 吗？我建议您先定义一个 sum 类型`pos`并对其进行模式匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:13:09.703

如果您假设故障不会发生，则您的代码具有以下基本结构：

```
let f () =
    let p = 3 in p
    let q = 5 in q
    ... 
```

目前尚不清楚您要做什么，但这不是格式良好的 OCaml（正如编译器告诉您的那样）。也许你想要的是更像这样的东西：

```
let f () =
    let p = 3 in
    let q = 5 in
    match ... 
```

如果是这样，您需要在您`if`的 s 之前移动您的`in`s：

```
let f () =
    let p = if badp then failwith "" else 3 in
    let q = if badq then failwith "" else 5 in
    match ... 
```

或者，这可能是您想要的更多：

```
let f () =
    let p = 3 in
    let () = if badp p then failwith "" in
    let q = 5 in
    let () = if badq q then failwith "" in
    match ... 
```

（我希望这是有帮助的。）

# javascript - 为 iPhone 5 修改 webapp 全屏书签

> ID：14419751
> 
> 赞同：1
> 
> 时间：2013-01-19T22:51:10.627
> 
> 标签：javascript, ios, web-applications, bookmarklet

如何修改这个激活 webclip 应用程序模式的小书签，以便 iOS 以 4 英寸全屏显示它？：[http](http://cl.ly/text/1H1b3E3K3T0V) ://cl.ly/text/1H1b3E3K3T0V 我已经阅读了您需要进行的更改在优化页面时在 html 中，但我没有正确使用此脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:23:17.153

我怀疑在页面加载后添加元标记“apple-mobile-web-app-capable”是行不通的。Safari 可能不会期望这会在事后发生变化，因此不会等待变化。换句话说，我会预测你不能使用书签来以这种直接的方式做你想做的事情。

我怀疑添加“apple-touch-startup-image”会起作用，因为 Safari 在用户选择创建主屏幕快捷方式之前不会检查此信息。

作为解决该问题的一种可能方法，您可能会考虑以某种方式尝试使用修改后的 HTML 重新创建页面。小书签可能会像上面那样修改 DOM，然后使用 window.open() 创建一个新的空白选项卡，并将其内容设置为等于当前 document.documentElement.outerHTML。这只是我脑海中的一个建议，我还没有测试过。

# java - 使用 Spring Framework 将 Excel 数据导入数据库

> ID：14419753
> 
> 赞同：0
> 
> 时间：2013-01-19T22:51:22.843
> 
> 标签：java, spring, excel, spring-mvc

我正在开发一个将数据存储在 mysql 数据库中的网站。该网站的一位用户希望在 Excel 电子表格中记录该网站的数据。我打算开发一个由三部分组成的解决方案：

1.  将上传的 excel 电子表格保存到服务器目录中的控制器类。
2.  使用 apache POI 从目录中读取保存的 excel 电子表格的服务层。3\. JPA将excel电子表格中的数据记录到mysql数据库中。

这是预期解决方案的好模式吗？有没有人实施过类似的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:32:52.873

听起来很合理。

*   看看用户是否会上传 csv 文件而不是 xls 文件，因为这样会更容易处理。
*   尝试流式上传直接到磁盘。如果你把它存储在内存中，那么大的上传会导致 jvm 出现内存不足的错误。

# mysql - Mysql - 使用 Ymd 格式按月分组

> ID：14419756
> 
> 赞同：7
> 
> 时间：2013-01-19T22:52:04.103
> 
> 标签：mysql

如果我有格式为“Ymd”的“日期”列，我可以使用基于日期列但按月分组的 GROUP BY 吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-19T22:52:35.763

使用 MySQL 的[`DATE_FORMAT()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_date-format)功能仅对所需部分进行分组：

```
GROUP BY DATE_FORMAT(my_column, '%Y-%m') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-12T10:39:32.287

例如：`created_at`是您需要的列

```
SELECT DATE_FORMAT(`created_at`, '%Y-%m-%d') 
FROM `table` 
GROUP BY DATE_FORMAT(`created_at`, '%Y-%m-%d') 
```

请注意，您需要选择`created_at`.

# .htaccess - 如何使用 Apache VirtualHost 获取 .htaccess 文件

> ID：14419757
> 
> 赞同：11
> 
> 时间：2013-01-19T22:52:14.103
> 
> 标签：.htaccess, apache2, virtualhost

我的问题是我`.htaccess`在本地服务器上的文件没有被读取。文件中的设置`VirtualHost`似乎总是优先。

我尝试了以下方法：

*   启用`mod_rewrite`
*   将 更改`AllowOverride`为`All`但这会导致`HTTP Error 500 Internal server error`. 我已经尝试了各种选项，但它总是会导致 500 错误。

我在 Ubuntu 上使用 VirtualHost 文件，如下所示：

```
<VirtualHost *:80>
ServerAdmin webmaster@localhost

DocumentRoot /web/website
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /web/website>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>
</VirtualHost> 
```

在我的`.htaccess`文件中，`/web/website`我有以下规则（未被阅读）：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$ index.php?/$1 [L]
RewriteCond %{HTTP_USER_AGENT} ^facebookexternalhit
RewriteRule ^(.*)$ ogtags.php?$1 [L,QSA]
ErrorDocument 404 /404
ErrorDocument 401 /401 
```

我尝试过的一件有效的事情是将这些规则直接附加到 VirtualHost 文件中，但我希望我的`.htaccess`文件能够正常工作！有这么大的要求吗？:(

**编辑：**所以我查看了我的 apache `error.log`，它说`Invalid command 'Action', perhaps misspelled or defined by a module not included in the server configuration`是指我的`.htaccess`文件。似乎没有我可以启用的名为 Action 的模块。有任何想法吗？

**编辑2：**我注意到我的`httpd.conf`文件是空白的。既然我正在使用`VirtualHost`文件，这应该很重要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T13:47:32.900

查看我的 apache 后，`error.log`我意识到我只需要启用 Apache`actions`模块：

> sudo a2enmod 动作

不再出现 500 个内部服务器错误！

希望这可以帮助某人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T23:10:54.120

你错过了`RewriteBase /` 指令

`RewriteEngine`在指令 之后添加它：

```
RewriteEngine On
RewriteBase / 
```

# c - 无效函数返回（NULL）

> ID：14419771
> 
> 赞同：0
> 
> 时间：2013-01-19T22:54:02.137
> 
> 标签：c

我正在查看一个 C 客户端-服务器程序并遇到了这个问题。编译器抱怨该函数“在返回 void 的函数中返回一个值”。

我的问题是，返回 (NULL) 而不是简单地返回有什么意义？这可能是为了避免调用者收回垃圾吗？

```
void *ThreadMain(void *threadArgs)
{
    int clntSock;                   /* Socket descriptor for client connection */

    /* Guarantees that thread resources are deallocated upon return */
    pthread_detach(pthread_self()); 

    /* Extract socket file descriptor from argument */
    clntSock = ((struct ThreadArgs *) threadArgs) -> clntSock;
    free(threadArgs);              /* Deallocate memory for argument */

    HandleTCPClient(clntSock);

    return (NULL);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:03:20.627

```
 "return with a value, in function returning void". 
```

您有一些其他具有返回类型的函数，`void`并且您正在从该函数返回一个值。但是您发布的功能不是*那个*功能。基本上您发布的功能与您的问题无关:)

您发布的返回类型`void *`不同于`void`. 所以这不是编译器抱怨的功能。查看代码中返回`void`(not `void *`) 的其他函数，并且其中一个（或多个）返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:56:05.713

返回的原因`NULL`是返回一个指向“无”的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T23:10:37.600

他返回 NULL 因为“合同”说他必须返回一个指针，而且他显然不能/不想更改合同。

# python - 在python中关闭body标签之前附加

> ID：14419772
> 
> 赞同：0
> 
> 时间：2013-01-19T22:54:09.113
> 
> 标签：python, template-engine

好的，所以我有一个 template.html 文件，如下所示：

```
<h1>Hello wolrd</h1>
<div>This is me</div> 
```

我想在结束正文标记之前将其附加到我的索引文件中。就像这样：

```
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title></title>
</head>
<body>

<script type="text/ng-template" id="templates/template.html">
<h1>Hello wolrd</h1>
<div>This is me</div> 
</script>

</body>
</html> 
```

到目前为止，我已经阅读了文件并附加到它的末尾，但是我还没有将脚本标签添加到我正在阅读的文件中并附加到我的文件的正确位置。这是我目前拥有的：

```
#!/usr/bin/env python
import fileinput

to_readfile=open('index.html', "r")
try:
  reading_file=to_readfile.read()

  writefile=open('index2.html','a')
  try:
    writefile.write("\n")
    writefile.write(reading_file)
  finally:
    writefile.close()

finally:
  to_readfile.close() 
```

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:40:25.780

最简单的方法是在布局模板中添加一个占位符，然后在处理布局时搜索占位符并将其替换为另一个模板的内容。

```
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title></title>
</head>
<body>

<script type="text/ng-template" id="templates/template.html">
{{content}}
</script>

</body>
</html>

...
..
.
layout = open('layout.html', "r")
layout_contents = layout.read()

partial=open('partial_file.html','r')
result = layout_contents.replace("{{content}}", partial)

writefile = open("file_to_write.html", "w")
writefile.write("\n")
writefile.write(result)
.
..
.... 
```

您还可以使用更广泛的解决方案，例如 jinja [http://jinja.pocoo.org/docs/templates/#template-inheritance](http://jinja.pocoo.org/docs/templates/#template-inheritance)使用的解决方案。

# ios - 搜索整个 UITableView 单元格的 UISearchBar

> ID：14419779
> 
> 赞同：0
> 
> 时间：2013-01-19T22:55:10.223
> 
> 标签：ios, objective-c, xcode, uisearchbar

我有一个基于搜索栏过滤的表格视图。只要搜索以与单元格文本相同的字符开始，这就会很好地工作。

我希望能够搜索单元格文本的任何部分，即使是在中间。例如。如果单元格文本是“Jon Bon Jovi”，如果用户在搜索栏中键入“Bon Jovi”甚至只是“Jovi”，我希望它仍然出现。

我当前的代码如下：

```
for (NSDictionary *item in listItems)
{

    if ([scope isEqualToString:@"All"] || [[item objectForKey:@"type"]  
    isEqualToString:scope] || scope == nil)
    {
        NSComparisonResult result = [[item objectForKey:@"name"] 
        compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) 
        range:NSMakeRange(0, [searchText length])];

        if (result == NSOrderedSame)
        {
            [filteredListItems addObject:item];
        }
    }
} 
```

任何帮助都是极好的。谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:02:09.023

不要使用`-compare:options:range:`（它只是根据您的项目名称对搜索字符串进行排序），而是考虑查看[`-rangeOfString:options:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-rangeOfString_options_)- 这实际上会在整个项目名称中搜索您的搜索字符串。您可以用以下内容替换`if`语句的内部主体：

```
NSStringCompareOptions opts = (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch);
NSRange resultRange = [[item objectForKey:@"name"] rangeOfString:searchText
                                                         options:opts];
if (resultRange.location != NSNotFound) {
    [filteredListItems addObject:item];
} 
```

# recursion - 邻接图的树

> ID：14419780
> 
> 赞同：1
> 
> 时间：2013-01-19T22:55:17.883
> 
> 标签：recursion, clojure, tree, adjacency-list

我正在尝试创建一个从表单的邻接列表构建树的函数`{node [children]}`。

```
(def adjacency
  {nil [:a]
   :a [:b :c]
   :b [:d :e]
   :c [:f]}) 
```

这应该导致

```
{nil {:a {:b {:d nil
              :e nil}
          :c {:f nil}}}} 
```

但是我试过了，我无法让它工作。递归是我的一个弱点，我发现的大多数递归示例只处理列表上的递归，而不是树。

**已编辑：**由于在发布时没有编辑器和原始来源，原始数据集和结果无意中嵌套得太深。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:15:24.333

中的每个子图中只有一个条目`adjacency`。这是必要的吗？结果也出现了同样的问题`tree`。

我希望它会更清楚：

```
(def adjacency {:a [:b :c]
                :b [:d :e]
                :c [:f]}) 
```

所以解决方案是：

```
(defn tree [m root]
  (letfn [(tree* [l]
            (if (contains? m l)
              {l (into {} (map tree* (m l)))}
              [l nil]))]
    (tree* root))) 
```

测试：

```
(tree adjacency :a)
=> {:a {:b {:d nil
            :e nil}
        :c {:f nil}}} 
```

**更新**。如果您不需要将结果树作为嵌套映射

```
(defn tree [m root]
  (letfn [(tree* [l]
            (if (contains? m l)
              (list l (map tree* (m l)))
              (list l nil)))]
    (tree* root)))

(tree adjacency :a)
=> (:a ((:b ((:d nil)
             (:e nil)))
        (:c ((:f nil))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T09:57:45.100

我通常更喜欢`clojure.walk`在处理树木时使用。我假设根节点在`adjacency`向量中是第一个。

```
(use 'clojure.walk)

(def adjacency
  [{nil [:a]}
   {:a [:b :c]}
   {:b [:d :e]}
   {:c [:f]}])

(prewalk
 (fn [x]
   (if (vector? x)
     (let [[k v] x lookup (into {} adjacency)]
       [k (into {} (map (fn [kk] [kk (lookup kk)]) v))])
     x))
 (first adjacency)) 
```

结果：`{nil {:a {:b {:d {}, :e {}}, :c {:f {}}}}}`

注意：空子元素表示为`{}`而不是`nil`，子元素也是地图而不是矢量，因为地图可以轻松导航此树。

# ruby-on-rails - Rails 3 中的用户-朋友关系模型

> ID：14419781
> 
> 赞同：1
> 
> 时间：2013-01-19T22:55:24.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, social-networking

我是一名新的 Rails 开发人员，我正在尝试对用户-朋友关系（Facebook 风格）进行建模，例如它同时具有朋友和订阅系统。我在一些博客和书籍上读过它，但我觉得我找不到一个非常合适的实现。

1.  **我希望每个关系对应的数据库中只有 1 个条目**，所以我用字段（user_id，friend_id，status，type）对我的关系表建模，其中 type ={friend，subscriber} 和 status = {accepted，hold }

2.  我想实现所有功能，如 send_request、accept_request、cancel_request、unfriend、delete_request、subscribe、unsubscribe。

3.  接下来我希望所有功能都遵循抽象规则。像 send_request 应该像 current_user.send_request(@user) 而不是像 send_request(@user, @friend) 那样工作，并在那里写下所有的 sql。

4.  我相信这样的实现可以帮助我将关系扩展到更多类型，如“家人”“最好的朋友”等。

我看了很多，但找不到正确实现 facebook 风格的友谊模型。请告诉我一些资源，我可以从中获得一些帮助，或者如果可能的话帮助我编写代码。我正在以我开始编码的方式发布我的用户模型的代码，但我觉得可能有更好的解决方案。请通过一些见解。我知道这个问题不是很中肯和主观的。管理员：请原谅违反了 Stackoverflow 的规则。

```
 ```
class User < ActiveRecord::Base
 devise :database_authenticatable, :registerable, :recoverable, :rememberable,    :trackable, :validatable

 has_one :profile, :dependent => :destroy

 has_many :relationships, :foreign_key => :user_id, :dependent => :destroy
 has_many :reverse_relationships, :foreign_key => "friend_id",  :class_name =>    "Relationship", :dependent => :destroy

 has_many :direct_friends, :through => :relationships, :conditions => "status =    'accepted'", :source => :friend
 has_many :reverse_friends, :through => :reverse_relationships, :conditions => "status = 'accepted'", :source => :user

 has_many :requested_friends, :through => :reverse_relationships,
:source => :friend, :conditions => "status = 'hold'", :order => :created_at
 has_many :pending_friends, :through => :relationships, 
:source => :user, :conditions => "status = 'hold'", :order => :created_at

  attr_accessible :email, :password, :password_confirmation, :remember_me

 def friends
   direct_friends | reverse_friends
 end

.
.
. 
``` 
```

# php - InnoDB 事务和 REST

> ID：14419786
> 
> 赞同：0
> 
> 时间：2013-01-19T22:56:07.533
> 
> 标签：php, mysql, rest, transactions, innodb

我希望我的问题适合这个网站并且不是太宽泛，但是我在设计以下架构时遇到了麻烦：

我有两个网站。站点 1 负责在用户之间转移信用。站点 2 负责为这些用户提供服务/产品，这些服务/产品可以使用他们在站点 1 中拥有的积分来支付。

假设我在站点 1 上有 1000 个积分。我有一个在站点 2 上花费 50 个积分的服务/产品，并且用户想用他在站点 1 中拥有的积分购买它。

两个站点都与 REST 通信。因此，例如，当用户想要购买服务/产品时，站点 2 准备其请求并将其发送到站点 1，站点 1 进行交易并向站点 2 确认交易成功（例如，用户对服务/产品有足够的积分并且这些学分已成功转移到目的地）

现在这是棘手的部分。在站点 1 中，我有以下逻辑：

```
Begin transaction
update user set credits -= 50 where id = 1
update user set credits += 50 where id = 2
REST CALL (Site 2) Success
Site 2 response - OK, commit transaction
Commit 
```

由于 REST 是对不同站点的调用，因此事务可能需要一些时间才能完成。同时，是否为任何事务锁定了整个表，或者用户 1 和用户 2 的行是否被锁定？这是实现我的逻辑的正确方法吗？我错过了什么吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:21:02.587

由于您使用的是主键而不是范围，因此它应该是行级锁定。还有共享锁与排他锁的概念。共享锁允许其他进程在更新/删除场景中使用独占锁时仍然读取数据，并阻止所有其他进程读取它。

一般的逻辑..如果真的只有*一个*地方存储学分和*一个*读取它们的地方，那么实时同步有多重要？3、5 或 10 秒后是否足够？如果站点 1 完全关闭，您是否要让站点 2 仍然工作？

就个人而言，我会稍微重组一下：

*   用户在站点 1 上创建一个帐户。
*   第一次在站点 2 上完成交易时，它会验证帐户是否存在于 S1 上并获取信用数量......并保留它。
*   每当在站点 2 上完成交易时，您首先检查本地信用计数（缓存），*如果有足够的信用*，您将返回[202 Accepted](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#2xx_Success)响应代码。它基本上意味着“嘿，我们接受了这个，但还没有完成。”
*   您可以立即允许用户在此时继续。
*   **但**在您进行本地信用检查的同时，您向 S1 发出了另一个实际交易请求。
*   希望该服务可以为您提供成功/失败消息*以及*更新的**最终/官方**信用计数。
*   使用它，您将本地事务状态更新为 204 NO Content (success) 并为下一次更新缓存。

由于 S1 始终返回确定的当前信用计数，因此您不必担心以 100% 准确的方式维护 S2 上的信用计数。您可以从 S1 等待它。

如果你*真的很*紧张，你可以有一个工作每 N 小时运行一次，轮询 S1 请求在这 N 小时内更新的每个帐户的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:02:05.823

这是对您对凯西回答的问题的回应：

是的，只要你这样做：

*   **站点 2：**

    1.  客户登录。
    2.  向站点 1 询问此用户（用户 1）的信用总额和交易历史记录（GET 请求）。
    3.  （任何收到“交易成功”响应的等待交易都可以下载/发送）
    4.  使用信用总额为可以负担的东西启用“购买”按钮。
    5.  客户点击购买按钮
    6.  生成站点 2 唯一的事务 ID，将其与谁购买了什么、何时购买的详细信息一起存储在数据库中，状态 = 未决。告诉用户交易已经收到，他们应该尽快通知它是否成功（HTTP 202 响应）
    7.  将购买请求发布到站点 1，包括身份验证（不希望伪造请求导致人们花费他们不想花费的钱）和交易 ID。
*   **站点 1**

    1.  验证身份验证
    2.  验证站点 2 之前没有使用过站点 2 的 transactionID。如果有，则返回错误，如果没有：
    3.  开始交易
    4.  更新用户设置积分 -= 50 其中 id = 1
    5.  更新用户设置积分 += 50 其中 id = 2
    6.  插入事务 remoteSiteID = 'Site2', remoteTransactionID = tID, user = 1
        如果 site2 是唯一使用来自 site1 的积分的站点，则不需要 remoteSiteID 字段
    7.  犯罪
    8.  REST CALL（站点 2）成功
*   **站点 2：**

任一：
1\. 接收 REST 成功调用，使购买可用于下载/发送，向用户显示一些消息说购买处理完成。更新本地交易记录，state=succeeded。

或
2\. 站点 2 已关闭。下次后台轮询过程运行（检查等待响应的购买请求的状态）或下次客户登录时（在这种情况下也启动轮询——第一个列表中的步骤 3），将记录交易成功

如果您没有收到对事务的响应，请使用事务 ID 执行 GET。如果响应是错误的，Site 1 没有收到原始请求，Site 2 可以自由地重复事务（POST）请求。如果响应是“交易失败”，那么用户没有足够的积分，相应地更新站点 2 上的交易记录。如果结果是“交易成功”，也要记录。

如果交易失败 N 次，或者自用户单击按钮后经过了一段时间（例如 5 分钟），则站点 2 将停止重试购买。

# jquery - Caja / Google Apps 脚本和 jQueryUI 手风琴

> ID：14419793
> 
> 赞同：0
> 
> 时间：2013-01-19T22:56:36.503
> 
> 标签：jquery, jquery-ui, google-apps-script, jquery-ui-accordion, google-caja

这可能被证明是一个非常幼稚的问题，因为我刚开始使用 jQueryUI，但最好问一个愚蠢的问题，而不是疯狂地试图找出一个不属于我的错误。最终，我试图生成一个动态的项目列表，这些项目将作为 JQUI 手风琴显示给用户 - 问题是，它永远不会起作用。

我对文档的阅读（包括谷歌认为这应该在 Caja / GAS 沙箱中工作）是这应该会产生 10 个“行”的手风琴优点。但在实践中，只有三个转换为手风琴风格，而其余的则保持原来的无聊格式。控制台中没有出现任何内容 - 没有错误、警告等。但是，相同的 HTML 部分确实在纯粹的客户端工作，因此我担心沙盒/语法问题。

我哪里错了？

请参阅以下来自 Google Apps 脚本项目的示例代码：

代码.gs：

```
function doGet()
{
  return HtmlService.createTemplateFromFile('myHtml.html').evaluate();
} 
```

myHtml.html：

```
<html>
  <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/ui-lightness/jquery-ui.css" type="text/css" />
    <script>
      function createAccordion()
      {
        var html = "";
        for (var i = 0; i< 10; i++)
        {
          html += "<h3><div>Heading " + i + "</div></h3><div>Body " + i + " </div>\n";
        }
        console.log(html);
        $("#accordion").html(html);
        $("#accordion").accordion();
      }      
      $(document).ready(function(){
        console.log("Hello, world!");
        createAccordion();
      });
    </script>
  </head>
  <body>
    <div id="accordion">Stuff</div>
    <p>Hello!</p>
  </body>
</html> 
```

**编辑**：奇怪的转折——如果我像这样初始化手风琴：

```
$("#accordion").accordion({ header: "h3" }); 
```

它莫名其妙地工作，就像（否则）预期的那样。我最好的猜测是，这与 Caja 的解析器在 jQueryUI 要求所有“#accordion”的 children() 时发回一些时髦的东西有关，但这不会干扰 .find() 结果。不过，我全都在寻求更明智的意见！

# android - ARM NEON，从索引数组设置通道？

> ID：14419794
> 
> 赞同：1
> 
> 时间：2013-01-19T22:56:39.770
> 
> 标签：android, android-ndk, java-native-interface, arm, neon

我这里有一些源代码可以进行线性插值，但需要 4 个值，每个值由数组中的索引给出：

```
float32x4_t fraction = ... (4 floats in range 0<f<1)

uint32x4_t idxA = ... (4 indices into float array)
uint32x4_t idxB = ... (4 indices into float array)

uint32_t indicesA[4];   vst1q_u32( indicesA, idxA );
uint32_t indicesB[4];   vst1q_u32( indicesB, idxB );

float32x4_t arrValuesA, arrValuesB;

arrValuesA = vsetq_lane_f32(_arr[indicesA[0]], arrValuesA, 0 );
arrValuesA = vsetq_lane_f32(_arr[indicesA[1]], arrValuesA, 1 );
arrValuesA = vsetq_lane_f32(_arr[indicesA[2]], arrValuesA, 2 );
arrValuesA = vsetq_lane_f32(_arr[indicesA[3]], arrValuesA, 3 );

arrValuesB = vsetq_lane_f32(_arr[indicesB[0]], arrValuesB, 0 );
arrValuesB = vsetq_lane_f32(_arr[indicesB[1]], arrValuesB, 1 );
arrValuesB = vsetq_lane_f32(_arr[indicesB[2]], arrValuesB, 2 );
arrValuesB = vsetq_lane_f32(_arr[indicesB[3]], arrValuesB, 3 );

float32x4_t diff = vsubq_f32(arrValuesA, arrValuesB);

float32x4_t result = vmlaq_f32( arrValuesA, diff, fraction ); 
```

“问题”是，它不够快，需要 4 个单浮点指令和 4 个数组查找来为每个通道提供数据。如果我使用普通的 C 代码，速度是一样的。

有人知道如何进一步优化吗？我没有找到任何直接通过数组查找读取值的指令。

# java - 为什么除以两个整数的对数算法在某些特殊测试用例中失败？

> ID：14419798
> 
> 赞同：1
> 
> 时间：2013-01-19T22:57:10.760
> 
> 标签：java, math

我试图在不使用 / % * 问题的情况下使用该公式`a/b = e^(ln a - ln b)`来解决臭名昭著的`Divide 2 Integers`问题，但是对于某些测试用例，`(dividend=Integer.MAX_VALUE or MIN_VALUE and divisor=1)`我的解决方案失败了。

为什么会失败？

[编辑]：我为该测试用例得到的答案是`(MAX-1 or MIN+1)`. 我想知道为什么会这样。

```
public int divide(int dividend, int divisor) {
    boolean neg = false;
    if ((dividend < 0 && divisor > 0) || (dividend > 0 && divisor < 0))
        neg = true;

    long a = dividend;
    a = Math.abs(a);
    long b = divisor;
    b = Math.abs(b);

    double res = Math.pow(Math.E, Math.log(a) - Math.log(b));
    int ans = Math.floor(res);
    return neg ? -ans : ans;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T23:12:03.563

这里问题的根源在于计算的**中间**结果。

Double 是**浮点类型**，使用时**可能会丢失精度**。

您在中间计算中使用 double ：

```
double res = Math.pow(Math.E, Math.log(a) - Math.log(b));
int ans = Math.floor(res); 
```

例如，如果您使用 5 和 1，res = 4.999999999999，Math.floor(res) 将返回 4。

使用 Integer.MAX_VALUE 你有 2147483647（原始值），但结果是 2147483646。原因与 5 完全相同。

# ember.js - 即使模板被渲染，emberjs #each 助手也不会产生任何输出

> ID：14419803
> 
> 赞同：1
> 
> 时间：2013-01-19T22:58:30.127
> 
> 标签：ember.js, ember-data, ember-router

尽管“posts/index”模板正在渲染，但模板内的 emberjs #each 助手不会产生任何输出。这是**jsfiddle：http: [//jsfiddle.net/rxWzu/](http://jsfiddle.net/rxWzu/)**

我试过这个：

```
{{#each  post in content}}
 <p> {{post.title}} </p>
<p>{{#linkTo 'posts.post' post}} {{post.body}}  {{/linkTo}}</p>
{{/each}} 
```

还有这个

```
{{#each controller}}
 <p>{{title}} </p>
 <p>{{#linkTo 'posts.post' post}} {{body}}  {{/linkTo}}</p>
{{/each}} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:13:01.110

你应该`EmBlog.Post.find()`在你的`model`方法中使用`EmBlog.PostsIndexRoute`.

```
EmBlog.PostsIndexRoute  = Ember.Route.extend({
  model: function(){
     return  EmBlog.Post.find();
  }
... 
```

此外，您不需要调用`setupController`任何一条路线。您调用它的方式是 Ember 中的默认方式。

[JSFiddle 示例](http://jsfiddle.net/cteegarden/rxWzu/1/)

# python - 如何取消标签整个块？

> ID：14419805
> 
> 赞同：0
> 
> 时间：2013-01-19T22:58:41.017
> 
> 标签：python, eclipse

意味着在每行中有一个带有额外选项卡的块我如何使用 eclipse 删除这个选项卡？

例如 -

```
 while(1):
        if(data == "ACK"):
            break 
```

转换成 -

```
while(1):
    if(data == "ACK"):
        break 
```

我**为 Web 开发人员使用 Eclipse Java EE IDE。**使用**PyDev 2.7**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:04:53.060

选择所有三行并点击`Shift`+`Tab`应该取消缩进代码块。

# optimization - [Aptana] 是否有最小化功能，如果有，它在哪里？

> ID：14419807
> 
> 赞同：0
> 
> 时间：2013-01-19T22:58:52.483
> 
> 标签：optimization, aptana3

我在 Aptana Studio 3 工作，想知道是否有一种快速简便的方法可以在完成开发后最小化您的代码？

假设您有一个较长的 SQL 插入，为了便于在开发过程中进行编辑，您已将其分隔为几行。在生产时，您可以检查并删除所有换行符以将代码压缩为更少的行，但这可能是一项非常耗时的手动任务。

只是想知道是否有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:08:56.297

我不知道 Aptana 是否具有此功能，但我怀疑这样做是否会给您带来任何好处。

通常，将代码放在更少的行上实际上并没有带来任何好处，除非该代码必须通过网络传输（例如到 Web 浏览器），在这种情况下您可以节省几个字节的网络流量。

# html - HTML - 停靠元素

> ID：14419813
> 
> 赞同：1
> 
> 时间：2013-01-19T22:59:35.027
> 
> 标签：html, css, dock

我设计了一个简单的网站。唯一剩下的就是在左边做一个小盒子。但即使向下滚动，我也希望始终可见。它的用途就像一个小广告。![浮动框][1]

你能发布一两个例子吗？为此需要什么CSS？（如果需要）

不幸的是，我不能发布任何图片，因为我是新用户（我不允许......这有点令人沮丧）

但我会尽快发布一张图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:01:24.577

你应该申请`position: fixed`这个盒子。

> 固定定位
> 
> 具有固定位置的元素相对于浏览器窗口定位。
> 
> 即使窗口滚动，它也不会移动。

这是一个示例：[http ://www.w3schools.com/css/tryit.asp?filename=trycss_position_fixed](http://www.w3schools.com/css/tryit.asp?filename=trycss_position_fixed)

您可以在此处阅读有关 CSS 定位的更多信息：http: [//www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

* * *

这是我为你烘焙的一个 jsFiddle，它展示了如何让它工作：http: [//jsfiddle.net/leniel/8ub7s/2/](http://jsfiddle.net/leniel/8ub7s/2/)

您可以看到，即使滚动，标题仍然可见，如果将其悬停，广告框将显示。只需根据您的需要调整 CSS，因为您希望它向左浮动。:)

# javascript - css 变换在悬停时没有过渡，在鼠标移出时保持静止

> ID：14419815
> 
> 赞同：0
> 
> 时间：2013-01-19T23:00:01.167
> 
> 标签：javascript, jquery, css

我已经为标头编写了指南针和指南针针，当您将鼠标悬停在指南针上时，针会以 720 度角旋转，但是，我想要一种方法，以便当我将鼠标从指南针上移开时它不会反转。抱歉，如果我忽略了一个简单的解决方案，但这是我当前的代码来解释我做得更好的地方。

```
.arrow{
    width:100px; 
    height:100px;
    background-image:url(https://dl.dropbox.com/u/81513943/Monolith/images/compass.png);
    background-size:100px;
}

.arrowhover{
    position:absolute;
    margin-top:-100px;
    background-size:100px;
    width:100px;
    -webkit-transition: all 1.7s ease-in-out;
    -moz-transition: all 1.7s ease-in-out;
    -ms-transition: all 1.7s ease-in-out;
    -o-transition: all 1.7s ease-in-out;
    transition: all 1.7s ease-in-out;
    height:100px;
}

.arrowhover:hover{      
    -webkit-transform: rotate(1440deg);
    -moz-transform: rotate(1440deg);
    -webkit-transition: all 1.7s ease-out;
    -moz-transition: all 1.7s ease-in-out;
    -ms-transition: all 1.7s ease-in-out;
    -o-transition: all 1.7s ease-in-out;
    transition: all 1.7s ease-in-out;
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
} 
```

所以是的，指南针是正常的，悬停它会旋转 720 度，鼠标移开我不想要动画，有没有办法做到这一点？

ps 我对 jquery 和 javascript 没用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:50:09.573

检查我更新的小提琴：http: [//jsfiddle.net/rHpDn/3/](http://jsfiddle.net/rHpDn/3/)

我添加`transition: all 0s ease-in-out;`到 .arrow，所以它不再有过渡回来了。

# c++ - 如何管理对象之间的一对多关系？（移动相关）

> ID：14419817
> 
> 赞同：0
> 
> 时间：2013-01-19T23:00:03.303
> 
> 标签：c++, c++11, move

首先我想说我对 CPP 很陌生（我从 cpp11 开始）:) 考虑以下实体：学生（名字 + 姓氏）和组（描述 + 更多学生）。我在 C++ 中创建了以下 2 个类：

```
class Student
{
private:
    std::string firstName;
    std::string lastName;
    Student(const Student &student);
    Student& operator=(const Student &student);
public:
    Student():firstName(""), lastName("") { }
    Student(std::string firstName, std::string lastName):firstName(firstName), lastName(lastName) { }
    Student(const Student &&student):firstName(student.firstName), lastName(student.lastName) { }
    Student& operator=(const Student &&student) { this->firstName=student.firstName; this->lastName=student.lastName; return *this; }
    std::string GetFirstName() const { return this->firstName; }
    std::string GetLastName() const { return this->lastName; }
};

class Group
{
private:
    std::string description;
    std::vector<std::shared_ptr<Student>> students;
    Group(const Group &group);
    Group& operator=(const Group &group);
public:
    explicit Group():description(""), students(std::vector<std::shared_ptr<Student>>()) { }
    explicit Group(std::string description) :description(description), students(std::vector<std::shared_ptr<Student>>()) { }
    void NewStudent(Student &&student) { students.push_back(std::make_shared<Student>(std::move(student))); }
    std::vector<std::shared_ptr<Student>> GetStudents() const { return students; }
}; 
```

主要我有这个：

```
Student s1("fn1","ln1");
Student s2("fn2","ln2");
//Student s3("fn3","ln3");
Group cppGroup("C plus plus");
cppGroup.NewStudent(std::move(s1));
cppGroup.NewStudent(std::move(s2));
cppGroup.NewStudent(Student("fn3", "ln3"));
//cppGroup.NewStudent(s3);
std::vector<std::shared_ptr<Student>> cppStudents=cppGroup.GetStudents(); 
```

我的问题与 NewStudent 方法有关。在前两种情况下，参数是 move(s)，在第三种情况下是 Student(...)。我的猜测是 Student("fn3", "ln3") 与 Student s3("fn3, "ln3") 相同，但是如果我将 s3 传递给函数，它将无法编译并出现以下错误：*无法从学生对学生&&*

PS：如果您帮助我了解如何制作我认为理想的示例，我将不胜感激。非常感谢你。

LE：我想我明白发生了什么，Visual Studio 显示以下错误：*无法将左值转换为右值*，所以我的猜测是，如果我传递给 NewStudent s3，它不知道如何将其转换为右值，但如果我如果将调用移动构造函数，则传递它 Student("fn3", "ln3")。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:14:17.850

如果这确实是您的设计，您可以对其进行大量简化并取消所有智能指针和自定义结构：

```
class Student
{
private:
    std::string firstName;
    std::string lastName;
public:
    Student(std::string firstName, std::string lastName):firstName(firstName), lastName(lastName) { }
    std::string GetFirstName() const { return this->firstName; }
    std::string GetLastName() const { return this->lastName; }
};

class Group
{
private:
    std::string description;
    std::vector<Student> students;
public:
    explicit Group(std::string description) :description(description) { }
    void NewStudent(Student student) { students.push_back(student); }
    std::vector<Student> GetStudents() const { return students; }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:15:26.833

我建议更改您的设计并使用智能指针。

为所有学生准备一个容器。

一*组*学生将在“所有学生”容器中拥有一个或多个指向学生的智能指针。

这种设计允许您在不复制学生对象的情况下拥有不同的主题组。*Group* contains 将包含智能指针的副本。

使用此设计，您还可以创建索引以按不同标准对学生进行排序。例如，您可以有一个按名字排序的学生索引和另一个按姓氏排序的学生索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T23:47:11.220

Student("fn3", "ln3") 是一个没有名字的临时对象。编译器决定它可以放弃它，因为你没有机会再次使用它。在 Student s2("fn2","ln2") 的情况下，您将引用变量 s2 中的对象。所以你必须用 move 语句明确地放弃它。

# ms-access-2003 - 查询以查找 Access 表中的重复项

> ID：14419818
> 
> 赞同：2
> 
> 时间：2013-01-19T23:00:35.110
> 
> 标签：ms-access-2003

我已经用尽了所有我能找到的例子，但我仍然没有得到我需要的结果。

我有一个发票表，我需要在其中找到在多个客户上使用相同发票号的任何实例。一个发票编号可以在表中出现多次，每条记录都用发票和发票序号区分，但每张发票应该只有一个客户，但有些错误已经悄悄出现。

我需要的是只有那些有两个或更多客户的发票的报告。在下面的数据中，客户 45001301 不应是发票 708，seq 3 的客户编号。

```
Cust No Invoice No  Seq No  Input Date
700180  708 1   9/30/2007
700180  708 2   9/30/2007 
45001301    708 3   9/30/2007
700180  708 4   9/30/2007
700190  709 1   9/30/2007
700190  709 2   9/30/2007 
```

我试图做的只是通过查询获得一个简单的组，以仅向我显示具有多个客户的发票，就像这样-

```
[Invoice No] [Cust no]
   708          700180 
   708        45001301 
```

但是我只想看到有两个或更多客户的那些，所以在上面的例子中我看不到发票 709 的条目，因为它只有一个客户。

```
[Invoice No] [Cust no]
   708          700180 
   708        45001301
   709          700190 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:14:23.547

首先创建一个返回 和 的所有不同组合的`[Invoice No]`查询`[Cust no]`。然后将其用作子查询，在其中计算每个客户的数量`[Invoice No]`并添加一个`HAVING`子句以将输出限制为仅计数大于一的那些。

```
SELECT sub.[Invoice No], Count(*) AS customers
FROM
    (
        SELECT DISTINCT [Invoice No], [Cust no]
        FROM Invoices
    ) AS sub
GROUP BY sub.[Invoice No]
HAVING Count(*) > 1; 
```

然后，如果您需要查看*哪些*客户重复了这些发票，`INNER JOIN`则该查询返回到`Invoices`表中。

```
SELECT DISTINCT i.[Invoice No], sub2.customers, i.[Cust No]
FROM
    Invoices AS i
    INNER JOIN
    (
        SELECT sub.[Invoice No], Count(*) AS customers
        FROM
            (
                SELECT DISTINCT [Invoice No], [Cust no]
                FROM Invoices
            ) AS sub
        GROUP BY sub.[Invoice No]
        HAVING Count(*) > 1
    ) AS sub2
    ON i.[Invoice No] = sub2.[Invoice No]; 
```

使用 Access 2007 和名为 的表中的示例数据`Invoices`，该查询为我提供了以下结果集：

```
Invoice No customers Cust No
708                2   700180
708                2 45001301 
```

如果您真的想查看这些重复发票编号的*所有*数据，请将第二个查询的第一行更改为：

```
SELECT i.[Invoice No], sub2.customers, i.[Cust No], i.[Seq No], i.[Input Date] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:22:26.300

怎么样：

```
SELECT inv.[cust no],
       inv.[invoice no],
       inv.[seq no],
       inv.[input date]
FROM   inv
       INNER JOIN (SELECT q.[invoice no],
                          Count(q.[invoice no]) AS [CountOfInvoice No]
                   FROM   (SELECT inv.[invoice no],
                                  inv.[cust no]
                           FROM   inv
                           GROUP  BY inv.[invoice no],
                                     inv.[cust no]) AS q
                   GROUP  BY q.[invoice no]
                   HAVING (( ( Count(q.[invoice no]) ) > 1 ))) AS q2
ON inv.[invoice no] = q2.[invoice no] 
```

其中 inv 是您的表的名称。

该查询返回具有多个关联客户编号的发票编号的所有详细信息和行。

```
cust no invoice no  seq no  input date
700180      708     4       30/09/2007
45001301    708     3       30/09/2007
700180      708     2       30/09/2007
700180      708     1       30/09/2007 
```

# python - 使用 Tkinter 在球后追踪

> ID：14419821
> 
> 赞同：0
> 
> 时间：2013-01-19T23:00:49.507
> 
> 标签：python, tkinter

所以我有这个创建移动球的代码：

```
from Tkinter import *
from random import randrange
from threading import Thread

Matrice = (600*400)*[0]

class Ball(Frame):

    def __init__(self, can, posx, posy, name):
        self.can = can

        self.largeur_can = int(self.can.cget("width"))
        self.hauteur_can = int(self.can.cget("height"))

        self.posx = posx
        self.posy = posy
        self.name = name 

        self.ball1 = self.can.create_oval(self.posy, self.posx, self.posy+10, self.posx+10, outline="red", fill=self.name, width=2)

        self.nx = randrange(-10,10,1)
        self.nx /= 2.0
        self.ny = randrange(-10,10,1)
        self.ny /= 2.0

        self.move()

    def move(self):
        global Matrice
        self.pos_ball = self.can.coords(self.ball1)
        self.posx_ball = self.pos_ball[0]
        self.posy_ball = self.pos_ball[1]

        if self.posx_ball < 0 or (self.posx_ball + 10) > self.largeur_can:
            self.nx = -self.nx         
        if self.posy_ball < 0 or (self.posy_ball + 10) > self.hauteur_can:
            self.ny = -self.ny

        self.can.move(self.ball1, self.nx, self.ny)

        Matrice[int(self.posy_ball)*600 + int(self.posx_ball)] += 100

        self.can.after(10, self.move)

root=Tk()
can=Canvas(root,width=600,height=400,bg="black")
for x in range(10):
    x=Ball(can,100,400, "blue")
    x=Ball(can,100,400, "green")
can.pack()
root.mainloop() 
```

我会在球后面创建痕迹，我创建了一个矩阵`Matrice`，在其中记录了每个球的传球位置，现在我想在背景中显示它，但我不知道如何。注意：矩阵中的值可能会减少或在`move`. 所以有人知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:15:43.107

这是一种低效的方法，但它是最简单的。每次移动球时，只需从它过去的位置到现在的位置画一条线。

```
self.can.move(self.ball1, self.nx, self.ny)

new_pos = self.can.coords(self.ball1)
self.can.create_line(self.posx_ball, self.posy_ball, new_pos[0], new_pos[1], fill='red')

self.can.after(10, self.move) 
```

请注意，这条线将跟随精灵的左上角 - 如果您希望它跟随精灵的中间，您可以调整坐标。

# c++ - 类的类 PHP 语法

> ID：14419828
> 
> 赞同：0
> 
> 时间：2013-01-19T23:02:15.803
> 
> 标签：c++, oop, object

我只是想知道这在 C++ 中是否可行。

在 PHP（框架）中，我有时会看到类（对象）和类中的方法被以下访问：

```
$this->encrypt->decode($msg, $key); 
```

在我的一个程序中，我有以下内容：

```
Directory *d = new Directory("dir");
d->open(); 
```

是否可以改为：

```
Directory *d = new Directory("dir")->open(); 
```

那么这两个方法可以在同一行执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:09:24.313

不，这是不可能的，除非 Directory 类被设置为明确支持这一点。这通常涉及使类中的大多数方法返回对自身的引用，以便您可以将方法调用链接在一起。

不过，您的 php 示例完全不同。您发布的示例的 C++ 版本将是：

```
Directory("dir").open(); 
```

没有捕获返回的 Directory 实例`Directory("dir")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T23:09:26.453

PHP 代码在当前类`$this->encrypt->decode($msg, $key);`中调用`decode()`方法。`encrypt`

您拥有的代码正在执行初始化类然后调用它的不同任务。

以同样的方式你不能在 PHP 中做到这一点：

```
$test = new Test()->method(); 
```

.. 你也不能在 C++ 中做到这一点，不。在这种情况下，您不会期望 in 的实例`Test`，`$test`而是`method()`在新实例化的测试对象上返回 of。

也就是说，您确实可以像您说的那样内联它，如果您只需要`open()`（或根本不需要）的返回值而不是 的实例`Directory`：

```
Directory("dir").open(); 
```

# django - django 提供的 Jquery Mobile 中未显示 Google Adsense 广告

> ID：14419831
> 
> 赞同：0
> 
> 时间：2013-01-19T23:02:37.200
> 
> 标签：django, jquery-mobile, adsense

我正在尝试让 Google AdSense 广告显示在我的移动网站上。我正在使用 Django 来提供我的网页，我正在使用 JQuery Mobile 来显示和格式化内容。我在静态 html 页面上遵循了[这些博客说明](http://therockncoder.blogspot.com/2012/08/jquery-mobile-and-adsense.html)，并且广告显示良好。当我在基本模板中使用**完全相同的**代码时，移动广告不会显示。当我比较 HTML 源代码时，它们看起来完全相同，并且所有链接的工作方式完全相同。Django 是否会在标题中注入一些东西来阻止广告显示？HTML源代码如下：

```
 <html>
<head>
    <title>Test AdSense</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />    
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css"/>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

    <script type="text/javascript"><!--
        google_ad_client = "ca-pub-XXXXXXXXXXXXXXXXXX";
        /* LTC MobileHeader */
        google_ad_slot = "XXXXXXXXXXXX";
        google_ad_width = 320;
        google_ad_height = 50;
    //-->
    </script>
</head>
<body>
    <div id="Div1" data-role="page" data-ajax="false">
        <header data-role="header" data-position="fixed">
            <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
            <h1>Index Page</h1>
        </header>
        <section data-role="content">
            <a href="page2.html" data-role="button" data-ajax="false">to Page 2</a>
        </section>
        <footer data-role="footer" data-position="fixed"></footer>      
    </div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:54:23.420

我决定将代码上传到我在 Ubuntu 上运行的登台系统，并且广告显示得很好。我的开发环境发生了一些事情，它在阻止对 Google 的调用的 Windows 上运行。

# javascript - 具有 SpriteSheet 不透明度和背景的 EaselJs

> ID：14419833
> 
> 赞同：0
> 
> 时间：2013-01-19T23:03:00.033
> 
> 标签：javascript, html, canvas, easeljs

我有一个简单的问题 - 我目前使用 Sprite sheet 和 easelJS 制作精灵和动画，但我希望白色像素（字符周围）清晰，以便可以查看背景。我认为它可以逐像素完成，但成本太高。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:47:51.140

这听起来更像是图像和/图像格式的问题，而不是easeljs/SpriteSheet。你使用 jpg 作为 SpriteSheetImage 吗？要获得透明度，您需要使用 .png，并最好使用 Photoshop 去除白色背景。

# java - 更改休眠数据类型

> ID：14419839
> 
> 赞同：0
> 
> 时间：2013-01-19T23:03:53.500
> 
> 标签：java, hibernate, jsp

我正在开发一个充分利用 Hibernate 的应用程序。但是昨天我想将数据库中的一列（评论日期）从 更改`Date`为`DateTime`.

我有一个从数据库中检索所有评论并将它们显示在表格中的方法。但是，由于我更改了数据类型，这不再有效。

我应该怎么办？

```
List<Comments> cmts = new CommentsHelper().getAllComments();

    out.println("<table class=\"tableC\"><tr><th class=\"name\" >User</th><th class=\"date\">Date</th><th class=\"comment\">Comment</th></tr>");

    for (Comments c : cmts)
    { 
```

错误出现在增强的 for 循环中。

这是堆栈跟踪：

```
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
root cause

java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to mediatek.Comments
    org.apache.jsp.comments_jsp._jspService(comments_jsp.java:269)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

另请注意，我尝试将类中的`commentDate`类型从`Date`更改为（由 Hibernate 生成），但显示错误“找不到符号”。`DateTime``Comments`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:16:31.227

我不认为

```
new CommentsHelper().getAllComments(); 
```

正在返回一个

```
List<Comments> 
```

它返回一个非类型

```
List 
```

你需要一个 .addEntity(Comments.class); 在您的休眠代码中。

```
session.createSQLQuery("SELECT * FROM Comments Order BY CommentDate")
    .addEntity(Comments.class).list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:43:34.730

`DateTime`是一个 jodatime 类（对吗？），休眠将无法将数据库时间戳映射到`DateTime`开箱即用。标准行为是休眠序列化对象（`DateTime`is `Serializable`）并将其映射到数据库上的类似 blob 的结构。这可能不是你想要的。

但是有一个非常简单的解决方案：将[jadira 用户类型](http://usertype.sourceforge.net/)添加到您的项目中（并添加一些休眠属性，如其文档中所述）。然后，您将直接将数据库时间戳映射到实体上的 jodatime 类。

# sql - 添加列以获得总计和排名总计

> ID：14419848
> 
> 赞同：0
> 
> 时间：2013-01-19T23:05:16.613
> 
> 标签：sql, rank

这是我的桌子

**学生编号**

```
ROLL_NO NAME    CLASS   HINDI   MATHS   SCIENCE
2   amit    11  91  91  81
3   anirudh 11  88  87  81
4   akash   11  82  81  85
5   pratik  10  81  99  98
7   rekha   10  79  97  82
6   neha    10  89  91  90
8   kamal   10  66  68  69
1   ankit   11  97  98  87 
```

我想添加最后三列并在按类划分的总数上排名

这是我试过的

```
select roll_no,name,class,total,
rank() over (partition by class order by total desc) as rank
from student_numbers,(select hindi+maths+science total from student_numbers)
; 
```

但这显示了一个非常大的表格，重复的学生姓名具有不同的总数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:21:26.383

我不确定您要完成什么 - 按班级排序最高分？如果是这样，这样的事情应该可以工作：

```
SELECT SN.Roll_No, 
   SN.Class, 
   SN2.Total, 
   RANK() OVER (PARTITION BY SN.Class ORDER BY SN2.Total DESC) as rank
FROM Student_Numbers SN
JOIN (
SELECT
   Roll_no, hindi+maths+science as Total
FROM Student_Numbers
) SN2 ON SN.Roll_No = SN2.Roll_No 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/7f089/2)。

祝你好运。

# c# - MVC 找不到资源

> ID：14419853
> 
> 赞同：0
> 
> 时间：2013-01-19T23:05:51.377
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

好吧，这快把我逼疯了。

我有这个项目，我几个月没有接触`FeedController`. 一切正常。然后，我打开`FeedController`来更改动作中的一些代码，由于某种原因，VS2010 崩溃了。好的，VS之前已经崩溃了，没什么异常。

所以我重新启动了VS，并且神秘地`FeedController`开始给出*“404找不到资源”*错误。

所以我检查了`Global.asax`，，`Web.Config`StartURL，所有人们推荐的东西。无法让它工作。如果我打电话`/Feed/Index`，它的工作原理！但`/Feed/`只是给了我错误。

将整个控制器的名称更改为`ShitController`它只是工作完美！不知何故，该项目决定“Feed”是某种“诅咒词”。

清理解决方案，`/bin/`重新启动 vs 开发服务器，重新启动计算机，它永远只是代理。

我开始认为这是一个 MVC3 严重的 BUG。

任何人？

我快疯了。我应该去散步，也许:)

路线：

```
routes.MapRoute(
    "XBLContentDetailsLocale",
    "XBLContent/Details/{guid}/{locale}",
    new { controller = "XBLContent", action = "Details"},
    new { guid = @"[0-9|a-z|\-]{36}", locale = @"[a-z|A-Z]{2}-[A-Z|a-z]{2}"}
);

routes.MapRoute(
    "XBLContentDetails",
    "XBLContent/Details/{guid}",
    new { controller = "XBLContent", action = "Details" },
    new { guid = @"[0-9|a-z|\-]{36}" }
);

routes.MapRoute(
    "XBLContentDaysLocale",
    "XBLContent/{days}/{locale}",
    new { controller = "XBLContent", action = "Index" },
    new { days = @"[0-9]", locale = @"[a-z|A-Z]{2}-[A-Z|a-z]{2}" }
);

routes.MapRoute(
    "XBLContentDays",
    "XBLContent/{days}",
    new { controller = "XBLContent", action = "Index" },
    new { days = @"[0-9]" }
);

routes.MapRoute(
    "FeedRouteFull",
    "Feed/{action}/{sort}/{locale}",
    new { controller = "Feed", action = "GameAddons" },
    new { sort = @"[a-z|A-Z]+", locale = @"[a-z|A-Z]{2}-[A-Z|a-z]{2}" }
);

routes.MapRoute(
    "FeedRouteSort",
    "Feed/{action}/{sort}",
    new { controller = "Feed", action = "GameAddons", sort = UrlParameter.Optional },
    new { sort = @"[a-z|A-Z]+" }
);

routes.MapRoute(
    "FeedRoute",
    "Feed/{action}",
    new { controller = "Feed", action = "Index" }
);

routes.MapRoute(
    "Locale",
    "{locale}",
    new { controller = "Home", action = "Index" },
    new { locale = @"[a-z|A-Z]{2}-[A-Z|a-z]{2}" }
);

routes.MapRoute(
    "ControllerLocale",
    "{controller}/{locale}",
    new { controller = "Home", action = "Index", locale = UrlParameter.Optional },
    new { locale = @"[a-z|A-Z]{2}-[A-Z|a-z]{2}" }
);

routes.MapRoute(
    "ControllerActionLocale",
    "{controller}/{action}/{locale}",
    new { controller = "Home", action = "Index", locale = UrlParameter.Optional },
    new { locale = @"[a-z|A-Z]{2}-[A-Z|a-z]{2}" }
);

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

**更新：** 我评论了所有路线，只留下默认路线，错误仍然存​​在。

**更新：** 这是整个控制器。只更改了 Arcade 动作并注释了“旧代码”：

```
public class FeedController : Controller
{
    XBLContentContext db = new XBLContentContext();

    private int activemenu = 4;

    private const int QT_FEED = 12;

    public ActionResult Index(string locale)
    {
        if (String.IsNullOrEmpty(locale))
            locale = "en-us";

        ViewBag.Title = "Xbox LIVE Feeds";
        ViewBag.Description = "Xbox LIVE Feed generator. Configure and add it to your favourite feed reader.";
        ViewBag.Keywords = "xbox, live, tools, feed, syndication, rss, atom";

        ViewBag.ContentType = Enum.GetValues(typeof(ContentType)).Cast<ContentType>().Select(v => new SelectListItem
        {
            Selected = (v == ContentType.Arcade),
            Text = v.ToString().ToSentence(),
            Value = v.ToString()
        });
        ViewBag.SortBy = Enum.GetValues(typeof(SortBy)).Cast<SortBy>().Select(v => new SelectListItem
        {
            Selected = (v == SortBy.OfferStartDate),
            Text = v.ToString().ToSentence(),
            Value = v.ToString()
        });

        ViewBag.Regions = (from x in GlobalVariables.Regions
                           select new SelectListItem
                           {
                               Selected = (x.ID.ToLower() == locale),
                               Text = x.Country,
                               Value = x.ID.ToLower()
                           }).OrderBy(x => x.Text).ToList();

        return View();
    }

    public ActionResult AllDownloads(string sort, string locale)
    {
        var today = DateTime.Today;
        var region = "All Regions";

        var qry = from c in db.XBLRegionalContents.Include("Region").Include("Content")
                  where c.PublishDate <= today
                  select c;

        var qry2 = from c in qry
                   group c by c.ContentId into grouped
                   let maxdate = grouped.Max(x => x.PublishDate)
                   select new
                   {
                       Key = grouped.Where(x => x.ContentId == grouped.Key && (x.PublishDate == maxdate)).FirstOrDefault(),
                       Value = grouped.Where(x => x.ContentId == grouped.Key).Select(x => x.Region)
                   };

        if (!String.IsNullOrEmpty(locale))
            qry2 = from c in qry2
                   where c.Value.Any(x => x.ID == locale)
                   select c;

        var model = qry2.OrderByDescending(x => x.Key.PublishDate).Take(QT_FEED).ToDictionary(x => x.Key, x => x.Value);

        if (!String.IsNullOrEmpty(locale) && model.Count() > 0)
            region = model.FirstOrDefault().Key.Region.CountryEnglish;

        ViewBag.Language = locale;
        ViewBag.FeedTitle = "XBLTOOLS - Latest Content";
        ViewBag.FeedDescription = String.Format("{0} - {1}", region, DateTime.Now);

        return View("GlobalFeed", model);
    }

    public ActionResult FullGames(string sort, string locale)
    {
        var today = DateTime.Today;
        var region = "All Regions";

        var indie = ContentType.IndieGames.ToString();
        var qry = from c in db.XBLRegionalContents.Include("Region").Include("Content")
                  where c.Content.RelatedGameId == null && c.Content.FileSize > 0
                  && c.PublishDate <= DateTime.Today
                  && c.Content.ContentType != indie
                  select c;

        var qry2 = from c in qry
                   group c by c.ContentId into grouped
                   select new
                   {
                       Key = grouped.Where(x => x.ContentId == grouped.Key).FirstOrDefault(),
                       Value = grouped.Where(x => x.ContentId == grouped.Key).Select(x => x.Region)
                   };

        if (!String.IsNullOrEmpty(locale))
            qry2 = from c in qry2
                   where c.Value.Any(x => x.ID == locale)
                   select c;

        var model = qry2.OrderByDescending(x => x.Key.PublishDate).Take(QT_FEED).ToDictionary(x => x.Key, x => x.Value);

        if (!String.IsNullOrEmpty(locale) && model.Count > 0)
            region = model.FirstOrDefault().Key.Region.CountryEnglish;

        ViewBag.Language = locale;
        ViewBag.FeedTitle = "XBLTOOLS - Full Games";
        ViewBag.FeedDescription = String.Format("{0} - {1}", region, DateTime.Now);

        return View("GlobalFeed", model);
    }

    public ActionResult Arcade(string sort, string locale)
    {
        var page = db.XBLPages.First(x => x.Type == (int)XBLPageType.List);
        using (XBLPageCrawler crawler = new XBLPageCrawler(page, ContentType.Arcade, DownloadType.Game, sort,  locale))
        {
            var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
            ViewBag.Language = locale;
            ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, crawler.CType.GetDescription());

            return View("Feed", crawler.PageContent);
        }
        #region OLDCODE
        //    using (XBLChart p = new XBLChart(ContentType.Arcade, DownloadType.Game, sort, locale))
        //    {
        //        var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
        //        ViewBag.Language = locale;
        //        ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, p.CType.GetDescription());

        //        return View("Feed", p.ListaRegional);
        //    } 
        #endregion
    }

    public ActionResult GamesOnDemand(string sort, string locale)
    {
        using (XBLChart p = new XBLChart(ContentType.GamesOnDemand, DownloadType.Game, sort, locale))
        {
            var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
            ViewBag.Language = locale;
            ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, p.CType.GetDescription());

            return View("Feed", p.ListaRegional);
        }
    }

    public ActionResult IndieGames(string sort, string locale)
    {
        using (XBLChart p = new XBLChart(ContentType.IndieGames, DownloadType.Game, sort, locale))
        {
            var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
            ViewBag.Language = locale;
            ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, p.CType.GetDescription());

            return View("Feed", p.ListaRegional);
        }
    }

    public ActionResult GameDemos(string sort, string locale)
    {
        using (XBLChart p = new XBLChart(ContentType.GameDemos, DownloadType.GameDemo, sort, locale))
        {
            var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
            ViewBag.Language = locale;
            ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, p.CType.GetDescription());

            return View("Feed", p.ListaRegional);
        }
    }

    public ActionResult GameAddons(string sort, string locale)
    {
        using (XBLChart p = new XBLChart(ContentType.GameAddons, DownloadType.GameAddon, sort, locale))
        {
            var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
            ViewBag.Language = locale;
            ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, p.CType.GetDescription());

            return View("Feed", p.ListaRegional);
        }
    }

    public ActionResult GameVideos(string sort, string locale)
    {
        using (XBLChart p = new XBLChart(ContentType.GameVideos, DownloadType.GameVideo, sort, locale))
        {
            var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
            ViewBag.Language = locale;
            ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, p.CType.GetDescription());

            return View("Feed", p.ListaRegional);
        }
    }

    public ActionResult ThemesAndGamerPic(string sort, string locale)
    {
        using (XBLChart p = new XBLChart(ContentType.ThemesAndGamerPic, DownloadType.ThemesAndGamerPic, sort, locale))
        {
            var countrycode = String.IsNullOrEmpty(locale) ? String.Empty : String.Format("{0} - ", locale.Split('-')[1].ToUpper());
            ViewBag.Language = locale;
            ViewBag.FeedTitle = String.Format("{0}{1}", countrycode, p.CType.GetDescription());

            return View("Feed", p.ListaRegional);
        }
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
} 
```

**UPDATE** 将 Index 操作更改为 Config 并且它可以工作。似乎问题出在默认的隐式“索引”上，因为显式 /Feed/Index 也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:21:54.210

也许您的路线需要添加以下路线？

```
routes.MapRoute(
  "Feed",
  "{controller}/{action}/{id}",
  new { controller = "Feed", action = "Index", id = UrlParameter.Optional }
); 
```

# php - PHP文档中的参数，方括号？

> ID：14419858
> 
> 赞同：4
> 
> 时间：2013-01-19T23:06:09.783
> 
> 标签：php, function

例如这个函数...

```
int preg_match_all ( string $pattern , string $subject [, array &$matches [, int $flags = PREG_PATTERN_ORDER [, int $offset = 0 ]]] ) 
```

它需要字符串`$pattern`和`$subject`. 然而，什么是`[`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T23:07:14.060

这就是函数文档如何指示可选参数的方式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T23:11:58.833

这是来自 Unix 系统的[使用消息](http://en.wikipedia.org/wiki/Usage_message)的旧约定：

> 在类 Unix 平台上，使用消息往往遵循用户熟悉的相同常用模式。它们通常以“用法：”（因此可能是名称）、命令开头，然后是参数列表。为了表示可选参数，方括号是常用的，也可以用于对必须一起指定的参数进行分组。专有参数可以通过在组内用竖线分隔来表示。
> 
> 这是一个基于 NetBSD 源代码样式指南的完整示例：
> 
> 用法：程序 [-aDde] [-f | -g] [-n 数字] [-b b_arg | -c c_arg] req1 req2 [opt1 [opt2]]
> 
> 这表明“程序”应该被调用：
> 
> *   没有操作数的选项：a、D、d、e（其中任何一个都可以省略）。请注意，在这种情况下，某些参数区分大小写
> *   独占选项：f、g（用竖线表示）
> *   带有操作数的选项：n
> *   具有操作数的独占选项：b、c
> *   所需参数：req1、req2
> *   可选参数 opt1，可以与 opt2 一起使用，也可以不与 opt2 一起使用（通过使用另一组方括号在组内标记为可选）
> *   可选参数 opt2，需要 opt1

# android - 从xml文件创建drawable

> ID：14419862
> 
> 赞同：2
> 
> 时间：2013-01-19T23:06:56.487
> 
> 标签：android, dictionary, layout, drawable

我正在使用地图并尝试从我的布局文件中创建标记作为可绘制对象。我需要更改标记视图取决于点的类型，因此我将第一个图像声明为静态，第二个图像声明为动态（动态更改），但它不起作用。

我的布局文件

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  <ImageView
    android:id="@+id/marker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/marker" >
  </ImageView>

  <ImageView
    android:id="@+id/category"
    android:layout_width="10dp"
    android:layout_height="10dp"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/category_for_children" />
</RelativeLayout> 
```

我的代码：

```
Resources res = getResources();
try {
  marker = Drawable.createFromXml(res, res.getXml(R.layout.marker_on_map));
} catch (NotFoundException e) {
  e.printStackTrace();
} catch (XmlPullParserException e) {
  e.printStackTrace();
} catch (IOException e) {
  e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T01:45:31.403

`Drawable.createFromXml`不适用于加载`Layouts`或`View`绘制！请参阅此用法示例：

[http://spearhend.blogspot.com/2012/04/load-android-drawable-from-xml.html](http://spearhend.blogspot.com/2012/04/load-android-drawable-from-xml.html)

# c# - 减少代码行数

> ID：14419863
> 
> 赞同：3
> 
> 时间：2013-01-19T23:07:00.420
> 
> 标签：c#, winforms, textbox

有没有办法压缩这段代码？这样做是在 100 毫秒后计时器滴答作响并发布下一个字母。有没有更小的代码版本？

我只想让它一次输入一个字符。

```
private void timer1_Tick(object sender, EventArgs e)
    {
        if (textBox2.Text == "Hmm... You right there?")
        {
            textBox2.Text = "Hmm... You right there??";
            timer1.Stop();
        }
        if (textBox2.Text == "Hmm... You right there")
        {
            textBox2.Text = "Hmm... You right there?";
        }
        if (textBox2.Text == "Hmm... You right ther")
        {
            textBox2.Text = "Hmm... You right there";
        }
        if (textBox2.Text == "Hmm... You right the")
        {
            textBox2.Text = "Hmm... You right ther";
        }
        if (textBox2.Text == "Hmm... You right th")
        {
            textBox2.Text = "Hmm... You right the";
        }
        if (textBox2.Text == "Hmm... You right t")
        {
            textBox2.Text = "Hmm... You right th";
        }
        if (textBox2.Text == "Hmm... You right ")
        {
            textBox2.Text = "Hmm... You right t";
        }
        if (textBox2.Text == "Hmm... You right")
        {
            textBox2.Text = "Hmm... You right ";
        }
        if (textBox2.Text == "Hmm... You righ")
        {
            textBox2.Text = "Hmm... You right";
        }
        if (textBox2.Text == "Hmm... You rig")
        {
            textBox2.Text = "Hmm... You righ";
        }
        if (textBox2.Text == "Hmm... You ri")
        {
            textBox2.Text = "Hmm... You rig";
        }
        if (textBox2.Text == "Hmm... You r")
        {
            textBox2.Text = "Hmm... You ri";
        }
        if (textBox2.Text == "Hmm... You ")
        {
            textBox2.Text = "Hmm... You r";
        }
        if (textBox2.Text == "Hmm... You")
        {
            textBox2.Text = "Hmm... You ";
        }
        if (textBox2.Text == "Hmm... Yo")
        {
            textBox2.Text = "Hmm... You";
        }
        if (textBox2.Text == "Hmm... Y")
        {
            textBox2.Text = "Hmm... Yo";
        }
        if (textBox2.Text == "Hmm... ")
        {
            textBox2.Text = "Hmm... Y";
        }
        if (textBox2.Text == "Hmm...")
        {
            textBox2.Text = "Hmm... ";
        }
        if (textBox2.Text == "Hmm..")
        {
            textBox2.Text = "Hmm...";
        }
        if (textBox2.Text == "Hmm.")
        {
            textBox2.Text = "Hmm..";
        }
        if (textBox2.Text == "Hmm")
        {
            textBox2.Text = "Hmm.";
        }
        if (textBox2.Text == "Hm")
        {
            textBox2.Text = "Hmm";
        }
        if (textBox2.Text == "H")
        {
            textBox2.Text = "Hm";
        }
        if (textBox2.Text == "")
        {
            textBox2.Text = "H";
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T23:12:02.970

```
string fullText = "Hmm... You right there??";
int currentPos = 0;

private void timer1_Tick(object sender, EventArgs e)
{
    currentPos++;
    textBox2.Text = fullText.Substring(0, currentPos);

    if (currentPos == fullText.Length)
        timer1.Stop();
} 
```

*（注意，未经测试）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:15:35.117

```
string all = "Hmm... You right there??";
if (textBox1.Text.Length < all.Length)
    textBox1.Text += all[textBox1.Text.Length];
else
    timer1.Stop(); 
```

# android - Android区分点击和拖动dispatchTouchEvent

> ID：14419865
> 
> 赞同：2
> 
> 时间：2013-01-19T23:07:20.460
> 
> 标签：android

我目前正在使用[dispatchTouchEvent](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29)来获取触摸事件，是否有一种简单的方法可以区分单击和“拖动”样式手势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:45:59.520

`DispatchTouchEvent`用`MotionEvent`参数调用。`getAction`内的方法`MotionEvent`可以返回

*   **ACTION_DOWN**
*   **ACTION_MOVE**
*   **ACTION_UP**
*   **ACTION_CANCEL**

然后在**ACTION_DOWN**标志上设置 isClick。如果有**ACTION_MOVE**清除 isClick 标志。

```
switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        isClick = true;
        break;
    case MotionEvent.ACTION_CANCEL:
    case MotionEvent.ACTION_UP:
        if (isClick) {
            //TODO Click action
        }
        break;
    case MotionEvent.ACTION_MOVE:
        isClick = false;
        break;
    default:
        break;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-29T01:10:03.790

设置阈值限制。当您在小范围内移动指针时，将其识别为单击或移动

# c - 使用虚拟内核时，pthread 不会提高性能

> ID：14419868
> 
> 赞同：0
> 
> 时间：2013-01-19T23:08:11.127
> 
> 标签：c, linux, multithreading, pthreads

我第一次玩 pthreads，在我的机器上运行时发现了一些奇怪的东西。

我有一个带有 2 个物理内核和 4 个虚拟内核的 Intel i5。

使用 2 个线程运行我的程序时，我的性能大约提高了一倍，但是使用 4 个线程运行时，我获得的性能与两个线程相同。为什么会这样？

2 个线程的结果：真实 0m9.335s 用户 0m18.233s sys 0m0.132s

4 个线程的结果：真实 0m9.427s 用户 0m34.130s sys 0m0.180s

编辑：代码是完全可并行化的，线程独立运行，没有任何共享资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:14:14.680

因为您实际上只有 2 个内核。[超线程](http://en.wikipedia.org/wiki/Hyper-threading)不会神奇地为您创建另外 2 个内核。超线程可以在 CPU 上运行 4 个线程，但不能同时运行。它仍然会在两个物理内核上分配线程，并在执行管道中来回切换线程。

您可能期望的性能提升是最好的 30%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:15:45.793

请记住，超线程基本上是一种将 CPU 上的备用执行单元重用于单独的执行线程的方法。您仍在使用两个核心的马力，它只是分成四种方式。

如果您的代码经过优化以充分利用大多数可用的 EU，那么一旦它在两个物理内核上运行，就没有多余的资源了，因此超线程内核不能做得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T23:21:55.300

使用多线程时的性能增益很难确定。当然，超线程在性能上也“少于一个额外的核心”。

除此之外，您可能会遇到内存吞吐量问题，或者您的代码正在争用锁等，因为您拥有更多锁 - 即使您自己的代码无锁并不意味着例如 I/O 或您调用的某些函数完全能够并行运行 - 有时存在“隐藏”共享资源。

但最有可能的是，您的处理器不能再快了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T20:13:32.743

这篇从超线程 (HT) 首次引入时开始的旧文章提供了很多关于其工作原理的详细信息（尽管我确信在过去 10 年中已经做出了许多改进）。[http://www.intel.com/technology/itj/2002/volume06issue01/vol6iss1_hyper_threading_technology.pdf](http://www.intel.com/technology/itj/2002/volume06issue01/vol6iss1_hyper_threading_technology.pdf)：

> 每个逻辑处理器都维护着一套完整的架构状态。架构状态由寄存器组成，包括通用寄存器、控制寄存器、高级可编程中断控制器 (APIC) 寄存器和一些机器状态寄存器。从软件的角度来看，一旦架构状态被复制，处理器看起来就是两个处理器。存储架构状态的晶体管数量仅占总数的极小部分。

但是，下面这句话显示了 HT 可能在哪里出现瓶颈：

> 逻辑处理器几乎共享物理处理器上的所有其他资源，例如高速缓存、执行单元、分支预测器、控制逻辑和总线。

如果线程执行都保持一个或多个共享资源（例如执行单元或总线）100% 忙碌，那么超线程不会提高吞吐量。由于基准测试经常使用系统的某个方面（有意或无意），因此这些共享处理器资源中的一个最终会成为瓶颈并阻止 HT 显示出优势也就不足为奇了。

# android - 如何自定义 renderscript 根函数上使用的参数？

> ID：14419870
> 
> 赞同：0
> 
> 时间：2013-01-19T23:08:26.597
> 
> 标签：android, image-processing, image-rotation, renderscript

## 背景

我是 renderscript 的新手，我想尝试一些实验（但小实验，而不是我们在 SDK 中找到的复杂实验），所以我想了一个练习来尝试，这是基于上一个[问题我的](https://stackoverflow.com/questions/14398670/android-rotating-a-bitmap-using-jni-ndk)（使用NDK）。

## 我想做的事

简而言之，我想将位图数据传递给renderscript，然后我希望它将数据复制到另一个位图，其尺寸与前一个位图相反，这样第二个位图将是第一个位图的旋转.

举例说明：从此位图（宽度：2，高度：4）：

```
01
23 
45
67 
```

我希望它旋转（逆时针 90 度）到：

```
1357
0246 
```

## 问题

我注意到，当我尝试更改根函数的签名时，Eclipse 给了我关于它的错误。

即使制作新功能也会产生新的错误。我什至尝试过在 Google 的博客[（此处](http://android-developers.blogspot.co.il/2011/03/renderscript.html)）上编写的相同代码，但我不知道他是如何创建他使用的函数的，以及为什么我无法更改过滤器函数以具有输入和输出位图数组。

为了自定义发送到 renderscript 的参数并使用其中的数据，我该怎么做？

可以不使用“过滤器”或“根”功能（API 11 及更高版本）吗？我该怎么做才能更灵活地了解我可以在那里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:05:49.327

你在这里问了一堆不同的问题，所以我将按顺序回答。1）您要旋转非方形位图。不幸的是，Renderscript 的位图模型不允许您轻松做到这一点。这样做的原因是输入和输出分配必须具有相同的形状（即相同数量的维度和这些维度的值，即使类型不同）。为了得到你想要的效果，你应该使用一个根函数，它只有一个新形状的输出分配（即输入列 X 输入行）。您可以创建一个 rs_allocation 全局变量来保存您的输入位图（然后您可以在 Java 端创建/绑定）。然后内核只需将输出单元设置为 rsGetElementAt(globalInAlloc, y, x) 的结果。

2) 如果您使用 API 11，则无法调整 root() 函数的签名（您可以将 NULL 分配作为输入传递，如果不使用它们，则在 Java 端输出）。在这些较旧的 API 级别上，您也不能为每个源文件创建超过 1 个内核，因此您被迫只有一个“root()”函数。如果您想为每个源文件使用更多内核，请考虑针对更高的 API 级别。

# scala - Spring-data-neo4j 和与 Scala 的兼容性

> ID：14419872
> 
> 赞同：0
> 
> 时间：2013-01-19T23:08:54.593
> 
> 标签：scala, neo4j, spring-data, spring-data-neo4j

我怀疑**Spring-data-neo4j 2.1.0-BUILD-SNAPSHOT与某些版本的****Scala**并不真正兼容。

我使用 scala 2.10.0 并使用 Play！也是基于 scala 2.10.0 的 web 应用程序。

在运行涉及由 Spring 自动装配的 Neo4jTemplate 的测试时，我收到此错误：

```
 Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean 
    with name 'mappingInfrastructure' defined in class 
    org.springframework.data.neo4j.config.Neo4jConfiguration: Invocation of init method failed; 
    nested exception is java.lang.NoSuchMethodError:     
scala.collection.JavaConverters$.mapAsScalaMapConverter(Ljava/util/Map;)Lscala/collection/JavaConverters$AsScala 
```

是否存在修复或将安排修复？

# android - NullPointerException 在 Android 中使用 execSQL(cmd) 方法

> ID：14419873
> 
> 赞同：0
> 
> 时间：2013-01-19T23:09:03.193
> 
> 标签：android, sqlite, nullpointerexception, actionbarsherlock, android-context

一段时间以来，我不断收到我正在编写的 Android 应用程序的错误。（我是 Android 新手，相对于 Java 而言。）当我觉得我已经通过创建一个简单的表并向其中添加数据来覆盖我的所有基础时，我无法弄清楚我何时收到此错误。对于我的应用程序中的每个其他表，我都没有问题。但是，我的“设置”数据库一直给我带来麻烦。（使用 Android 的 Preferences 类不是一个选项。）

这是我使用 Google API 8 测试 AVD 的**堆栈跟踪**。

```
01-19 16:51:43.848: W/ActivityThread(388): Application com.lakesidebaptist.lakesidelife is waiting for the debugger on port 8100...
01-19 16:51:43.897: I/System.out(388): Sending WAIT chunk
01-19 16:51:44.107: I/dalvikvm(388): Debugger is active
01-19 16:51:44.107: I/System.out(388): Debugger has connected
01-19 16:51:44.107: I/System.out(388): waiting for debugger to settle...
01-19 16:51:44.307: I/System.out(388): waiting for debugger to settle...
01-19 16:51:44.507: I/System.out(388): waiting for debugger to settle...
01-19 16:51:44.738: I/System.out(388): waiting for debugger to settle...
01-19 16:51:44.937: I/System.out(388): waiting for debugger to settle...
01-19 16:51:45.137: I/System.out(388): waiting for debugger to settle...
01-19 16:51:45.337: I/System.out(388): waiting for debugger to settle...
01-19 16:51:45.537: I/System.out(388): waiting for debugger to settle...
01-19 16:51:45.737: I/System.out(388): debugger has settled (1321)
01-19 16:51:46.867: I/dalvikvm(388): Could not find method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.onHoverEvent, referenced from method com.actionbarsherlock.internal.widget.ActionBarContainer.onHoverEvent
01-19 16:51:46.867: W/dalvikvm(388): VFY: unable to resolve virtual method 5075: Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.onHoverEvent (Landroid/view/MotionEvent;)Z
01-19 16:51:46.867: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x0000
01-19 16:51:46.878: D/dalvikvm(388): VFY: dead code 0x0003-0004 in Lcom/actionbarsherlock/internal/widget/ActionBarContainer;.onHoverEvent (Landroid/view/MotionEvent;)Z
01-19 16:51:46.897: I/dalvikvm(388): Could not find method android.widget.FrameLayout.getAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.getAlpha
01-19 16:51:46.897: W/dalvikvm(388): VFY: unable to resolve virtual method 3801: Landroid/widget/FrameLayout;.getAlpha ()F
01-19 16:51:46.897: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000b
01-19 16:51:46.897: D/dalvikvm(388): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.getAlpha ()F
01-19 16:51:46.897: I/dalvikvm(388): Could not find method android.widget.FrameLayout.getTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.getTranslationY
01-19 16:51:46.897: W/dalvikvm(388): VFY: unable to resolve virtual method 3802: Landroid/widget/FrameLayout;.getTranslationY ()F
01-19 16:51:46.897: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000b
01-19 16:51:46.897: D/dalvikvm(388): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.getTranslationY ()F
01-19 16:51:46.897: I/dalvikvm(388): Could not find method android.widget.FrameLayout.setAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.setAlpha
01-19 16:51:46.897: W/dalvikvm(388): VFY: unable to resolve virtual method 3805: Landroid/widget/FrameLayout;.setAlpha (F)V
01-19 16:51:46.897: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000a
01-19 16:51:46.897: D/dalvikvm(388): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.setAlpha (F)V
01-19 16:51:46.897: I/dalvikvm(388): Could not find method android.widget.FrameLayout.setTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.setTranslationY
01-19 16:51:46.897: W/dalvikvm(388): VFY: unable to resolve virtual method 3813: Landroid/widget/FrameLayout;.setTranslationY (F)V
01-19 16:51:46.897: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000a
01-19 16:51:46.907: D/dalvikvm(388): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.setTranslationY (F)V
01-19 16:51:46.947: I/dalvikvm(388): Could not find method android.content.pm.PackageManager.getActivityLogo, referenced from method com.actionbarsherlock.internal.widget.ActionBarView.<init>
01-19 16:51:46.947: W/dalvikvm(388): VFY: unable to resolve virtual method 326: Landroid/content/pm/PackageManager;.getActivityLogo (Landroid/content/ComponentName;)Landroid/graphics/drawable/Drawable;
01-19 16:51:46.947: D/dalvikvm(388): VFY: replacing opcode 0x6e at 0x01d1
01-19 16:51:46.947: I/dalvikvm(388): Could not find method android.content.pm.ApplicationInfo.loadLogo, referenced from method com.actionbarsherlock.internal.widget.ActionBarView.<init>
01-19 16:51:46.947: W/dalvikvm(388): VFY: unable to resolve virtual method 322: Landroid/content/pm/ApplicationInfo;.loadLogo (Landroid/content/pm/PackageManager;)Landroid/graphics/drawable/Drawable;
01-19 16:51:46.947: D/dalvikvm(388): VFY: replacing opcode 0x6e at 0x01df
01-19 16:51:46.947: D/dalvikvm(388): VFY: dead code 0x01d4-01d8 in Lcom/actionbarsherlock/internal/widget/ActionBarView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;)V
01-19 16:51:46.957: D/dalvikvm(388): VFY: dead code 0x01e2-01e8 in Lcom/actionbarsherlock/internal/widget/ActionBarView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;)V
01-19 16:51:47.047: I/dalvikvm(388): Could not find method android.view.ViewGroup.getAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.getAlpha
01-19 16:51:47.047: W/dalvikvm(388): VFY: unable to resolve virtual method 3546: Landroid/view/ViewGroup;.getAlpha ()F
01-19 16:51:47.047: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000b
01-19 16:51:47.047: D/dalvikvm(388): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.getAlpha ()F
01-19 16:51:47.047: I/dalvikvm(388): Could not find method android.view.ViewGroup.getTranslationX, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.getTranslationX
01-19 16:51:47.047: W/dalvikvm(388): VFY: unable to resolve virtual method 3556: Landroid/view/ViewGroup;.getTranslationX ()F
01-19 16:51:47.047: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000b
01-19 16:51:47.057: D/dalvikvm(388): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.getTranslationX ()F
01-19 16:51:47.057: I/dalvikvm(388): Could not find method android.view.ViewGroup.getTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.getTranslationY
01-19 16:51:47.057: W/dalvikvm(388): VFY: unable to resolve virtual method 3557: Landroid/view/ViewGroup;.getTranslationY ()F
01-19 16:51:47.057: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000b
01-19 16:51:47.057: D/dalvikvm(388): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.getTranslationY ()F
01-19 16:51:47.057: I/dalvikvm(388): Could not find method android.view.ViewGroup.setAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.setAlpha
01-19 16:51:47.057: W/dalvikvm(388): VFY: unable to resolve virtual method 3572: Landroid/view/ViewGroup;.setAlpha (F)V
01-19 16:51:47.057: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000a
01-19 16:51:47.057: D/dalvikvm(388): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.setAlpha (F)V
01-19 16:51:47.057: I/dalvikvm(388): Could not find method android.view.ViewGroup.setTranslationX, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.setTranslationX
01-19 16:51:47.057: W/dalvikvm(388): VFY: unable to resolve virtual method 3576: Landroid/view/ViewGroup;.setTranslationX (F)V
01-19 16:51:47.057: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000a
01-19 16:51:47.057: D/dalvikvm(388): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.setTranslationX (F)V
01-19 16:51:47.067: I/dalvikvm(388): Could not find method android.view.ViewGroup.setTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.setTranslationY
01-19 16:51:47.067: W/dalvikvm(388): VFY: unable to resolve virtual method 3577: Landroid/view/ViewGroup;.setTranslationY (F)V
01-19 16:51:47.067: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x000a
01-19 16:51:47.067: D/dalvikvm(388): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.setTranslationY (F)V
01-19 16:51:47.127: I/dalvikvm(388): Could not find method com.actionbarsherlock.internal.widget.ActionBarView$HomeView.onHoverEvent, referenced from method com.actionbarsherlock.internal.widget.ActionBarView$HomeView.dispatchHoverEvent
01-19 16:51:47.127: W/dalvikvm(388): VFY: unable to resolve virtual method 5936: Lcom/actionbarsherlock/internal/widget/ActionBarView$HomeView;.onHoverEvent (Landroid/view/MotionEvent;)Z
01-19 16:51:47.127: D/dalvikvm(388): VFY: replacing opcode 0x6e at 0x0000
01-19 16:51:47.127: D/dalvikvm(388): VFY: dead code 0x0003-0004 in Lcom/actionbarsherlock/internal/widget/ActionBarView$HomeView;.dispatchHoverEvent (Landroid/view/MotionEvent;)Z
01-19 16:51:47.137: I/dalvikvm(388): Could not find method android.widget.FrameLayout.onPopulateAccessibilityEvent, referenced from method com.actionbarsherlock.internal.widget.ActionBarView$HomeView.onPopulateAccessibilityEvent
01-19 16:51:47.137: W/dalvikvm(388): VFY: unable to resolve virtual method 3804: Landroid/widget/FrameLayout;.onPopulateAccessibilityEvent (Landroid/view/accessibility/AccessibilityEvent;)V
01-19 16:51:47.137: D/dalvikvm(388): VFY: replacing opcode 0x6f at 0x0006
01-19 16:51:47.537: D/AndroidRuntime(388): Shutting down VM
01-19 16:51:47.537: W/dalvikvm(388): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-19 16:51:47.597: E/AndroidRuntime(388): FATAL EXCEPTION: main
01-19 16:51:47.597: E/AndroidRuntime(388): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lakesidebaptist.lakesidelife/com.lakesidebaptist.lakesidelife.MainActivity}: java.lang.NullPointerException
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.os.Looper.loop(Looper.java:123)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-19 16:51:47.597: E/AndroidRuntime(388):  at java.lang.reflect.Method.invokeNative(Native Method)
01-19 16:51:47.597: E/AndroidRuntime(388):  at java.lang.reflect.Method.invoke(Method.java:521)
01-19 16:51:47.597: E/AndroidRuntime(388):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-19 16:51:47.597: E/AndroidRuntime(388):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-19 16:51:47.597: E/AndroidRuntime(388):  at dalvik.system.NativeStart.main(Native Method)
01-19 16:51:47.597: E/AndroidRuntime(388): Caused by: java.lang.NullPointerException
01-19 16:51:47.597: E/AndroidRuntime(388):  at com.lakesidebaptist.lakesidelife.update.database.dbAdapter.doOnFirstRun(dbAdapter.java:118)
01-19 16:51:47.597: E/AndroidRuntime(388):  at com.lakesidebaptist.lakesidelife.update.database.dbAdapter$DatabaseHelper.onCreate(dbAdapter.java:139)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
01-19 16:51:47.597: E/AndroidRuntime(388):  at com.lakesidebaptist.lakesidelife.update.database.dbAdapter.open(dbAdapter.java:38)
01-19 16:51:47.597: E/AndroidRuntime(388):  at com.lakesidebaptist.lakesidelife.MainActivity.onCreate(MainActivity.java:54)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-19 16:51:47.597: E/AndroidRuntime(388):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-19 16:51:47.597: E/AndroidRuntime(388):  ... 11 more 
```

据我了解，日志中的 ABS 内容与实际问题无关。

**MainActivity.class**

```
 package com.lakesidebaptist.lakesidelife;

import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;
import com.lakesidebaptist.lakesidelife.ui.PagerAdapter;
import com.lakesidebaptist.lakesidelife.update.Updater;
import com.lakesidebaptist.lakesidelife.update.UpdaterTask;
import com.lakesidebaptist.lakesidelife.update.database.dbAdapter;

public class MainActivity extends SherlockFragmentActivity implements
        ActionBar.TabListener {

    // The context used for the Updater class
    public static Context context;

    PagerAdapter pagerAdapter;

    /*
     * I'm not entirely sure what this does, but it's key in implementing the
     * tab/swiping navigation. See documentation here:
     * http://developer.android.com
     * /reference/android/support/v4/view/ViewPager.html
     */
    ViewPager viewPager;

    // The AsyncTask class Updater
    public static Updater updater;

    private static ProgressDialog pd = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        context = this;

        // Perform initial update
        dbAdapter dba = new dbAdapter(this);
        dba.open();

        String doesDBexist = dba.getSetting("firstRun");

        if(doesDBexist == null) {
            dba.doOnFirstRun();
        }

        if (dba.getSetting("firstRun").equals("true")) {

            /*
             * Checks if network connection is available and if so, starts the
             * updater
             */
            NetworkInfo ni = ((ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE))
                    .getActiveNetworkInfo();

            if (ni != null) {
                // Updates if there is a connection
                new UpdaterTask().execute();
                pd = new ProgressDialog(this, ProgressDialog.STYLE_SPINNER)
                        .show(this, "@string/progress_dialog_updating_title",
                                "@string/progress_dialog_updating_body");
                dba.addSetting("firstRun", "false");
            } else {
                // Tells user there's no connection and closes activity
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("@string/no_internet_dialog_title")
                        .setMessage("@string/no_internet_dialog_body")
                        .setCancelable(false)
                        .setPositiveButton("OK",
                                new DialogInterface.OnClickListener() {

                                    @Override
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        finish();
                                    }
                                });
            }
        }

        dba.close();

        // Sets up tabs
        pagerAdapter = new PagerAdapter(getSupportFragmentManager());
        final ActionBar actionBar = getSupportActionBar();
        actionBar.setHomeButtonEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        viewPager = (ViewPager) findViewById(R.id.pager);
        viewPager.setAdapter(pagerAdapter);

        // The method is called when a tab is clicked or the user swipes.
        viewPager
                .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                    }
                });

        // Creates "Life" tab
        actionBar.addTab(actionBar.newTab().setText("Life")
                .setTabListener(this));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater menuInflater = getSupportMenuInflater();
        menuInflater.inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
        case R.id.menu_settings:
            Intent intent = new Intent(this, SettingsActivity.class);
            startActivity(intent);
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }

    // Called when a tab is selected.
    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        viewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

**dbAdapter.class**

```
package com.lakesidebaptist.lakesidelife.update.database;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

/**
 * The database adapter for the application database.
 * 
 * @author andrew
 */
public class dbAdapter {
    private static final String DATABASE_NAME = "lakeside";
    /**
     * This should be changed whenever the format of the application database
     * changes in such a way that the onUpgrade() method must be called.
     */
    private static final int VERSION = 1;

    private DatabaseHelper dbHelper;
    private SQLiteDatabase db;

    private final Context context;

    public dbAdapter(Context context) {
        this.context = context;
    }

    /**
     * Opens the database.
     * 
     * @return
     */
    public dbAdapter open() {
        dbHelper = new DatabaseHelper(context);
        db = dbHelper.getWritableDatabase();
        return this;
    }

    /**
     * Sumbits query to database. Note this function does NOT return anything.
     * You must use the read() function to read from the database.
     * 
     * @param command
     */
    public void query(String command) {
        db.execSQL(command);
    }

    /**
     * This function should be used to read from a database. Notice "table" is
     * the only required parameter.
                + setting + "', '" + value + "');";
        query(command);
    }

    public void changeSetting(String setting, String value) {
        String command = "UPDATE 'settings' SET 'value'='" + value + "' WHERE '" + setting + "'='" + value + "';";
        query(command);
    }

    public String getSetting(String setting) {
        Cursor cursor = db.rawQuery(
                "SELECT 'value' FROM 'settings' WHERE 'setting'='" + setting
                        + "';", null);
        cursor.moveToFirst();
        return cursor.getString(cursor.getColumnIndex("value"));
    }

    public void doOnFirstRun() {
        db.execSQL("CREATE TABLE IF NOT EXISTS 'settings' ('setting' text, 'value' text);");
        addSetting("firstRun", "true");
        addSetting("updateServiceTimout", "60");
        addSetting("updateTimeUnit", "minute");
    }

    /**
     * I don't normally use nested classes due to my OCD, but I caved with this,
     * because all the online examples did it, and I didn't have time to figure
     * out how to make this class in its own file.
     * 
     * @author andrew
     * 
     */
    public class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            doOnFirstRun();
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:12:04.660

您没有初始化`db`（即它仍然指`null`代），这`NullPointerException`就是抛出 a 的原因。

# c# - 从 16 到 32 的颜色转换，反之亦然

> ID：14419875
> 
> 赞同：1
> 
> 时间：2013-01-19T23:09:14.893
> 
> 标签：c#, colors, rgb

我正在开发一个游戏客户端，其中纹理颜色存储为 int 值。但是，有时我必须使用 16 位颜色来绘制一些纹理……所以我想知道如何将 32 位颜色转换为 16 位颜色，反之亦然……最好避免像 Color.FromArgb() 和类似的托管函数。我更喜欢通过字节移位尽可能快地完成这些操作。你还知道如何获取 32 位颜色的灰度值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:15:03.627

```
 public static Int32 16To32(UInt16 color)
    {
        Int32 red = (Int32)(((color >> 0xA) & 0x1F) * 8.225806f);
        Int32 green = (Int32)(((color >> 0x5) & 0x1F) * 8.225806f);
        Int32 blue = (Int32)((color & 0x1F) * 8.225806f);

        if (red < 0)
            red = 0;
        else if (red > 0xFF)
            red = 0xFF;

        if (green < 0)
            green = 0;
        else if (green > 0xFF)
            green = 255;

        if (blue < 0)
            blue = 0;
        else if (blue > 0xFF)
            blue = 0xFF;

        return ((red << 0x10) | (green << 0x8) | blue);
    }

    public static UInt16 32To16(Int32 color)
    {
        Int32 red = ((((color >> 0x10) & 0xFF) * 0x1F) + 0x7F) / 0xFF;
        Int32 green = ((((color >> 0x8) & 0xFF) * 0x1F) + 0x7F) / 0xFF;
        Int32 blue = (((color & 0xFF) * 0x1F) + 0x7F) / 0xFF;

        return (UInt16)(0x8000 | (red << 0xA) | (green << 0x5) | blue);
    } 
```

对于涉及灰度的问题......您可以尝试以下功能，但我只是在没有测试的情况下编写了它，所以我不能保证它会完美运行：

```
 public static Int32 Grayscale(Int32 color)
    {
        Single red = ((color >> 0xA) & 0x1F) * 8.225806f;
        Single green = ((color >> 0x5) & 0x1F) * 8.225806f;
        Single blue = (color & 0x1F) * 8.225806f;

        Int32 grayscale = (Int32)(((red * 0.299f) + (green * 0.587f) + (blue * 0.114f)) * 0.1215686f);

        if (grayscale < 0)
            grayscale = 0;
        else if (grayscale > 0x1F)
            grayscale = 0x1F;

        return grayscale;
    } 
```

# sharepoint-2010 - 集成 Sharepoint 2010、ADFS 2.0 和 ThinkTecture IdentityServer

> ID：14419876
> 
> 赞同：0
> 
> 时间：2013-01-19T23:09:16.533
> 
> 标签：sharepoint-2010, adfs2.0, saml-2.0, claims, thinktecture-ident-server

我有以下情况：

*   Sharepoint 2010 与基于声明的身份验证 Web 应用程序。
*   ADFS 2.0 已将声明提供程序信任配置到 ThinkTecture IdentityServer。
*   已将 ADFS 2.0 配置为依赖方的 ThinkTecture IdentityServer。
*   Sharepoint 2010 配置了指向 ADFS 2.0 的 SPTrustedIdentityTokenIssuer。

现在，当我登录到 Sharepoint 时，当我选择身份提供程序时，我被重定向到 ADFS 2.0 Home Realm 页面。然后我被重定向到 ThinkTecture IdentityServer。然后我使用来自 IdentityServer 的凭据进行登录，然后我被重定向回 ADFS，然后重定向到 Sharepoint。问题是，共享点显示错误消息。我正在从 sharepoint 添加日志记录：

**通过登录提供程序进行身份验证。验证请求安全令牌。**

**受信任的登录提供程序“SAML2 提供程序”未发送配置的输入身份声明类型“http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress”**

**SPSecurityTokenService.Issue() 失败：System.ServiceModel.FaultException：受信任的登录提供程序未提供此场接受的令牌。
在 Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo.ValidateTrustedLoginRequest()**

**拒绝访问：需要身份验证。**

我发现，从 Identity Server 返回到 ADFS 的令牌包含电子邮件地址声明，但从 ADFS 返回到 SP 的令牌不包含。这很奇怪，因为我已将 ADFS 配置为支持电子邮件地址通过所有声明（在声明提供者对身份服务器的信任中）。我需要在其他地方设置 adfs 吗？我是 adfs 的新手。

我想要实现的是通过 ADFS 将我的请求转发到 IdentityProvider（在本例中为 ThinkTecture IdentityServer）并从 IdentityProvider 取回令牌。ThinkTecture IdentityServer 只是在我的真实环境中的测试环境中，它将被 Oracle Identity Federation 取代。

目标问题是将 Sharepoint 2010 与 Oracle Identity Federation 集成。但问题是，Sharepoint 不支持 OIF 将作为专有端点绑定提供的 SAML 2 协议。因此，我尝试使用 ADFS（作为类似于代理的某种思维）来破解它，它将在一侧与基于 SAML 1.1 的 Sharepoint 进行通信，在另一侧与基于 SAML 2 的 OIF 进行通信。

这是 IdP 元数据的以下摘录：

```
<md:IDPSSODescriptor protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">... 
```

所以我没有选择使用 WS-Federation。

如果这是实现所需行为的好方法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:39:28.873

所以你的路径是 SP -> ADFS -> IdentityServer？

问题是电子邮件地址没有被传递。因此，您必须设置 IdentityServer 以生成电子邮件地址声明，并且您必须设置 ADFS 以传递所有声明。然后将 SP 配置为接受电子邮件地址作为声明（使用 SP Powershell 命令）。

添加：您需要为 ADFS 中的电子邮件声明创建传递声明规则 - 包括声明提供者信任和依赖方信任。

OIF 支持 WS-Federation - 请参阅[ORACLE IDENTITY FEDERATION 11g R2](http://www.oracle.com/technetwork/middleware/id-mgmt/identity-federation-ds-133353.pdf) - 因此将 OIF 与 SP 联合没有问题。

# editor - 用于 NetLogo 的 Sublime Text 2（或其他）语法荧光笔

> ID：14419886
> 
> 赞同：1
> 
> 时间：2013-01-19T23:10:37.333
> 
> 标签：editor, syntax-highlighting, sublimetext2, netlogo

有谁知道 NetLogo 的语法荧光笔，最理想的是 Sublime Text 2？我宁愿不直接在 NetLogo 中编写我的代码，而是更喜欢使用我更习惯的编辑器，但我似乎无法为它找到语法荧光笔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:57:54.880

PackageControl.io 上有[NetLogo 语法](https://packagecontrol.io/packages/NetLogo%20Syntax)。

[此外，正如您在NetLogo 资源页面](http://ccl.northwestern.edu/netlogo/resources.shtml)上看到的那样，有[一个用于 VIM](http://voo-du.net/media/dump/nlogo.vim)和[一个用于 BBEdit](http://protist.biology.washington.edu/netlogo/bbedit-CLM/)。[Pygments](http://sourceforge.net/projects/netlogo-pygment/)还有一个插件。

如果您想尝试自己创建或改进另一个，这个[NetLogo wiki 页面](https://github.com/NetLogo/NetLogo/wiki/Syntax-highlighting)可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T19:51:13.017

有一个用于记事本++的浮动。我前段时间下载了它，但我现在似乎找不到适合你的链接。有人在 yahoo 组中发布了它，它是一种用户定义的语言，您必须将其导入 Notepad ++。我希望我有你的链接，很抱歉我不能提供更多帮助。

# iphone - 浮动/滑动 UIViewController

> ID：14419893
> 
> 赞同：1
> 
> 时间：2013-01-19T23:10:54.740
> 
> 标签：iphone, ios, xcode, uiviewcontroller, autolayout

我正在尝试为基本上具有的 iPad 创建一个界面

*   3 个 UIViewControllers，三个都紧挨着
*   另一个**浮动**视图控制器位于其他三个视图控制器的“**上方”。**使用滑动手势，它会将视图控制器滑到另一侧.. 将视图控制器暴露在其下方。
*   它是在一个名为 iQuran HD for iPad 的应用程序中完成的。

我不知道从哪里开始，显然我必须使用容器 API，但除此之外我很困惑，

有任何想法吗？

# java - 完成清单后的 jar 垃圾邮件控制台

> ID：14419894
> 
> 赞同：-2
> 
> 时间：2013-01-19T23:11:05.617
> 
> 标签：java, manifest

我的包中有主类，我有清单：

```
Manifest-Version: 1.0
Main-Class: PortalGraMax
\n - its a new line here :-) 
```

**为什么用'java -jar test.jar'运行它会产生垃圾邮件并且没有按应有的方式执行？： http:** [//i50.tinypic.com/j7446q.png](http://i50.tinypic.com/j7446q.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:32:56.833

鉴于第二个屏幕截图，清单中的类名似乎是错误的。它应该是：

```
Main-Class: szymon.GraPortal.PortalGraMax 
```

（请注意，您的包名因包含大写字母而违反了 Java 命名约定，但这是另一回事。）

我本以为您会收到错误消息，例如：

```
Error: Could not find or load main class PortalGraMax 
```

请注意您当前的清单...

# c++ - C++，fstream 对象作为引用传递给函数，常量？

> ID：14419897
> 
> 赞同：4
> 
> 时间：2013-01-19T23:11:30.363
> 
> 标签：c++, function, constants, pass-by-reference, fstream

我知道一般来说，对数据的引用应该在函数中作为常量隔离，以便函数无法更改它，对于仅用于输入的 fstream 对象也是如此吗？

如...

```
void doFoo(fstream &fileName)
{
  fileName.open("data.txt", ios::in);
} 
```

如果它是可取的，它是否遵循与大多数其他事物相同的逻辑？

如...

```
void doFoo(const fstream &fileName)
{
  fileName.open("data.txt", ios::in);
} 
```

也对输出流感到好奇

我只是想知道这是否重要，如果重要，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T23:19:09.347

文件的恒定性不会转化为用于访问文件的对象的常量属性。即使只是读取文件，您也必须修改内部缓冲区、当前读取位置等。这同样适用于输出，所以基本上 const 流是没有用的。

顺便说一句：如果您想明确一个函数只从流中读取，请将其传递给`std::istream&`. 首先，“i”中的“i”`istream`合理地确保您不会写信给它。其次，缺少的“f”也`fstream`允许与 stringstreams 或像 cin 这样的流一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T23:17:21.127

如果将对象（例如`fstream`实例）作为 const 引用传递，则只能`const`在其上调用成员函数，例如：

```
// In some class declaration
void aConstMember(int a) const; 
```

那是因为这样的函数不会改变对象的状态，所以对象可以是`const`. 非 const 成员函数可能会修改成员变量，因此对象将不再是 const。现在，如果您查看 的参考手册`fstream`，您会发现`open()`成员函数不是 const 的。所以第二个代码示例不会编译。

一般来说：传递类类型的参数，`const &`除非它们将在函数中被修改。打开流当然*是*一种修改。所以只需通过非常量引用传递它。

# python - 奇怪的 Python 代码结果

> ID：14419898
> 
> 赞同：2
> 
> 时间：2013-01-19T22:57:04.053
> 
> 标签：python

谁能告诉我为什么下面的代码会产生这样的结果？

```
def weird(s):
    print s

    for ii in range(len(s)):
        for jj in range(ii, len(s)+1):
            print ii, jj

    return

if __name__=="__main__":
   ss="acaacb"
   weird(ss) 
```

结果：

```
acaacb
0 0
0 1
0 2
0 3
0 4
0 5
0 6 
```

*ii*的值是否应该遍历 0 到 5？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T23:10:47.427

不，您`return`在外`for`循环内放置了一条语句。在第一次迭代结束时，您退出函数。这就是`return`语句的作用；无论您当前正在执行什么循环构造，它都会结束函数。

删除`return`语句，循环将一直运行到`i = 5`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T03:32:46.063

查看您的原始代码粘贴，您的缩进似乎有些奇怪，可能是由于混合了制表符和空格（很难确定，因为有时空格无法以与开始时相同的状态粘贴到 SO 中）。查看每一行：

```
'\n'
'\n'
'    def weird(s):\n'
'        print s\n'
'        \n'
'        for ii in range(len(s)):\n'
'            for jj in range(ii, len(s)+1):\n'
'                print ii, jj\n'
'                \n'
'        return\n'
'\n'
'    if __name__=="__main__":\n'
'\t   ss="acaacb"\n'
'\t   weird(ss)\n' 
```

空格问题可能会导致奇怪的错误，其中代码实际上并不像您想象的那样缩进。你可以通过运行你的程序来测试这个理论

```
python -tt your_program_name.py 
```

然后切换到使用四个空格而不是制表符。

# php - 从生日日期列表到每个年龄的总用户数组

> ID：14419901
> 
> 赞同：2
> 
> 时间：2013-01-19T23:12:00.067
> 
> 标签：php, mysql, sql

我想了解实现这一目标的最有效方法：

我有一个 MySQL 表，其中包含我的用户信息，包括生日 (YYYY/MM/DD)。我的目标是检索一个数组（php），其中包含从 10 到 60 岁的每个年龄的用户总数。我可以只查询我的所有用户，将生日传递给我编写的从*生日到年龄*的php 函数，然后用总数填充一个数组。但我想知道是否有一种方法可以构建一个为我完成这项工作的 sql 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:26:40.550

您应该能够对行进行分组：

```
SELECT
    FLOOR(DATEDIFF(NOW(), `birthday`)/365) AS 'Age',
    COUNT(*)
FROM `users`
WHERE FLOOR(DATEDIFF(NOW(), `birthday`)/365) BETWEEN 10 AND 60
AND `id` IN (1, 3, 5, 12, 29)
GROUP BY FLOOR(DATEDIFF(NOW(), `birthday`)/365)
ORDER BY FLOOR(DATEDIFF(NOW(), `birthday`)/365) ASC 
```

结果不会包含没有用户的年龄，但我不确定你为什么需要它。

**更新** - 添加了一个 id 过滤器 - 修复了日期计算（哎呀！） - 命名新列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:21:49.813

```
SELECT * FROM tableName 
         WHERE dateOfBirth >= (CURRENT_DATE - INTERVAL 60 YEAR)   
         AND dateOfBirth <= ( CURRENT_DATE - INTERVAL 10 YEAR ) 
```

希望我不会受到数据库专家的抨击...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T23:19:31.657

您将需要使用 MySql 的[DATEDIFF()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)。

```
SELECT USER, DATEOFBIRTH FROM USERTABLE WHERE DATEDIFF(DATEOFBIRTH,NOW()) < 60; 
```

# android - 系统停止应用程序后启动画面挂起

> ID：14419906
> 
> 赞同：0
> 
> 时间：2013-01-19T23:12:35.090
> 
> 标签：android, android-intent

清单文件是

```
 android:icon="@drawable/app_logo"
    android:label="@string/app_name" android:debuggable="false">
     <activity
        android:name=".SplashActivity"
        android:label="@string/title_activity_main"
        android:launchMode="standard" 
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

启动画面代码是

```
public class SplashActivity  extends MusicActivity {
 private final int SPLASH_DISPLAY_LENGTH = 7000;

/** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.splash);

    new Handler().postDelayed(new Runnable(){
     @Override
     public void run() {
         /* Create an Intent that will start the Menu-Activity. */
         Intent mainIntent = new Intent(SplashActivity.this,MenuActivity.class);
         startActivity(mainIntent);
     }
 }, SPLASH_DISPLAY_LENGTH); 
```

}

当您使用“home”键离开应用程序时，我会从正在运行的活动中触发它（它是一个音频播放器，这是您可以退出的主要活动）

```
 @Override
protected void onPause() {
    super.onPause();
    if (mp != null){
        mp.pause();
        if (isFinishing()){
        mp.pause();
        }
    }
} 
```

当我重新进入应用程序只是几分钟，一切都很完美，音频恢复到原来的位置等等 - 但是 - 如果我离开设备大约一个小时左右，然后返回并从启动器，它冻结在“启动画面”上，没有错误消息，没有强制关闭，它只是坐在那里。

我应该检查什么？谢谢

# android-layout - Android 值：维度值的优先级（如果在存储桶中不明确）

> ID：14419912
> 
> 赞同：1
> 
> 时间：2013-01-19T23:13:23.760
> 
> 标签：android-layout, android-xml, android-screen-support

我的问题最好用一个例子来问。假设您有一个横向的 10 英寸 Android 平板电脑。您尚未在 values-sw720dp-land 中为其存储桶指定特定值，但您在 values-sw720dp 和 values-sw600dp-land 中都有值它会使用哪个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:25:26.080

原文（不正确）：我只是做了一个实验来找出答案。它将使用 values-sw600dp-land。我认为这可能是有道理的，但我会在实验之前把钱花在替代品上。

编辑：不，以上是错误的。正如我最初的想法，它使用 values-sw720dp。我在 Eclipse 中打开了三个尺寸文件，并且对我正在查看的文件感到困惑！:-P

# r - 大矩阵中的子集慢

> ID：14419914
> 
> 赞同：4
> 
> 时间：2013-01-19T23:14:06.007
> 
> 标签：r, matrix, subset

我有一个长度为 5,000,000 的数字向量

```
>head(coordvec)
[1] 47286545 47286546 47286547 47286548 47286549 472865 
```

和一个 3 x 1,400,000 的数字矩阵

```
>head(subscores)
        V1       V2     V3
1 47286730 47286725  0.830
2 47286740 47286791  0.065
3 47286750 47286806 -0.165
4 47288371 47288427  0.760
5 47288841 47288890  0.285
6 47288896 47288945  0.225 
```

我想要完成的是，对于 coordvec 中的每个数字，找到 V1 和 V2 包含 coordvec 中的数字的子分数中的行的 V3 平均值。为此，我采用以下方法：

```
results<-numeric(length(coordvec))
for(i in 1:length(coordvec)){
    select_rows <- subscores[, 1] < coordvec[i] & subscores[, 2] > coordvec[i]
scores_subset <- subscores[select_rows, 3]
results[m]<-mean(scores_subset)
} 
```

这非常慢，需要几天才能完成。有更快的方法吗？

谢谢，

担

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T01:27:20.003

我认为这个问题有两个具有挑战性的部分。首先是寻找重叠。我会使用[Bioconductor](http://bioconductor.org/packages/2.11/bioc/html/IRanges.html)`IRanges`的包（在基本包中也可能有用）`?findInterval`

```
library(IRanges) 
```

创建表示坐标向量的宽度为 1 的范围，以及表示分数的范围集；为方便起见，我对坐标向量进行排序，假设重复的坐标可以被同等对待

```
coord <- sort(sample(.Machine$integer.max, 5000000))
starts <- sample(.Machine$integer.max, 1200000)
scores <- runif(length(starts))

q <- IRanges(coord, width=1)
s <- IRanges(starts, starts + 100L) 
```

在这里我们找到哪些`query`重叠`subject`

```
system.time({
    olaps <- findOverlaps(q, s)
}) 
```

这在我的笔记本电脑上大约需要 7 秒。有不同类型的重叠（请参阅 参考资料`?findOverlaps`），因此这一步可能需要一些改进。结果是一对索引查询和重叠主题的向量。

```
> olaps
Hits of length 281909
queryLength: 5000000
subjectLength: 1200000
       queryHits subjectHits 
        <integer>   <integer> 
 1             19      685913 
 2             35      929424 
 3             46     1130191 
 4             52       37417 
```

我认为这是第一个复杂部分的结尾，找到 281909 重叠。（我不认为其他地方提供的 data.table 答案解决了这个问题，尽管我可能弄错了......）

下一个具有挑战性的部分是计算大量均值。内置方式类似于

```
olaps0 <- head(olaps, 10000)
system.time({
    res0 <- tapply(scores[subjectHits(olaps0)], queryHits(olaps0), mean)
}) 
```

这在我的计算机上大约需要 3.25 秒，并且似乎是线性缩放的，所以 280k 重叠可能需要 90 秒。但我认为我们可以使用`data.table`. 原坐标`start(v)[queryHits(olaps)]`为

```
require(data.table)
dt <- data.table(coord=start(q)[queryHits(olaps)],
                 score=scores[subjectHits(olaps)])
res1 <- dt[,mean(score), by=coord]$V1 
```

所有 280k 重叠大约需要 2.5 秒。

通过识别查询命中是有序的，可以加快速度。我们想要计算每次查询命中的平均值。我们首先创建一个变量来指示每个查询命中运行的结束

```
idx <- c(queryHits(olaps)[-1] != queryHits(olaps)[-length(olaps)], TRUE) 
```

然后计算每次跑步结束时的累积分数，每次跑步的长度，以及跑步结束时和开始时累积分数之间的差值

```
scoreHits <- cumsum(scores[subjectHits(olaps)])[idx]
n <- diff(c(0L, seq_along(idx)[idx]))
xt <- diff(c(0L, scoreHits)) 
```

最后，平均值是

```
res2 <- xt / n 
```

所有数据大约需要 0.6 秒，并且与 data.table 结果相同（尽管比？）

```
> identical(res1, res2)
[1] TRUE 
```

均值对应的原始坐标为

```
start(q)[ queryHits(olaps)[idx] ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T00:00:22.560

这样的事情可能会更快：

```
require(data.table)
subscores <- as.data.table(subscores)

subscores[, cond := V1 < coordvec & V2 > coordvec]
subscores[list(cond)[[1]], mean(V3)] 
```

`list(cond)[[1]]`因为：“当 i 是单个变量名时，它不被视为列名的表达式，而是在调用范围内进行评估。” 来源：`?data.table`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T23:51:11.630

由于您的答案不容易重现，即使是，您也没有一个`subscores`符合您的布尔条件，我不确定这是否完全符合您的要求，但您可以使用其中一个`apply`系列和函数。

```
myfun <- function(x) {
  y <- subscores[, 1] < x & subscores[, 2] > x
  mean(subscores[y, 3])
}

sapply(coordvec, myfun) 
```

你也可以看看`mclapply`。如果你有足够的内存，这可能会显着加快速度。但是，您也可以查看`foreach`具有类似结果的包。通过分配而不是增长它，你已经得到了你的`for loop`“正确” `results`，但实际上，你正在做**很多**比较。很难加快速度。

# php - 包含 100 万个项目的 PHP 站点地图

> ID：14419919
> 
> 赞同：-1
> 
> 时间：2013-01-19T23:14:26.210
> 
> 标签：php, arrays, sitemap

希望有人可以帮助解决这个问题。

我有多个包含数百万个项目的表，我想用这些数据创建一个站点地图。

我被建议使用 array_chunk($dataArray, 50000);

然后 foreach( $dataArray ad $data){ 做 .... }

我遇到的问题是包含一百万个项目的数组可能会导致一些内存问题。我还希望每天使用 cronjob 更新我的站点地图。大多数主机对 cronjob 可以运行的时间都有限制。考虑到这一点，我想知道以下内容。

1）这是管理站点地图的有效方法吗？2) 是否有更有效的方式来频繁地创建/更新大型数据站点地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:20:04.703

Google 站点地图的最大大小为 10MB 或 50k 个项目，这就是为什么建议您将其分开的原因。

与其使用`array_chunk`，为什么不一次从 MySQL 获取 50,000 个项目？这将避免内存限制。

cron 作业的时间限制通常可以通过使用来覆盖`[set_time_limit][1]`- 但在我看来，如果您有一百万页并且您仍然在施加严格限制的主机上，您可能会考虑转向更严肃的产品。

您是否知道，要制作一百万个链接站点地图，您需要 20 个站点地图（每个 50k）和一个站点地图索引？

[http://en.wikipedia.org/wiki/Sitemap_index](http://en.wikipedia.org/wiki/Sitemap_index)

# python - 在字典中存储 lambda

> ID：14419925
> 
> 赞同：29
> 
> 时间：2013-01-19T23:15:20.890
> 
> 标签：python, dictionary, lambda

我一直在尝试创建一个字典，其中每个键都有一个字符串，每个值都有一个 lambda 函数。我不确定我哪里出错了，但我怀疑这要么是我首先尝试将 lambda 存储在字典中，要么是我的 lambda 正在使用快捷操作符。

代码：

```
dict = {
    'Applied_poison_rating_bonus': 
        (lambda target, magnitude: target.equipmentPoisonRatingBonus += magnitude)
} 
```

引发的错误是`SyntaxError: invalid syntax`指向我的`+=`. lambdas 中是否不允许使用快捷操作符，或者我是否比我想象的更偏离轨道？

为了理智起见，我省略了数百个非常相似的对（这不仅仅是一本小字典。）

编辑：

看来我的问题是尝试在 lambda 表达式中分配*任何内容。*但是，我要解决的问题是如何获得一个只知道该字典的键的方法才能更改在我的（损坏的）代码中定义的字段？

对 eval() 的某种调用会有所帮助吗？

EDIT_FINAL：

functools.partial() 方法被推荐到问题的这个扩展部分，我相信在研究它之后，我会发现它足以解决我的问题。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-19T23:16:24.247

您不能在表达式中使用赋值，并且 a`lambda`只接受表达式。

您可以将 lambdas 存储在字典中，否则：

```
dict = {'Applied_poison_rating_bonus' : (lambda target, magnitude: target.equipmentPoisonRatingBonus + magnitude)} 
```

上面`lambda`当然只返回结果，它不会`target.equimentPoisonRatingBonus`就地改变。

# c++ - 尝试在 Visual Studio 2012 中编译时出现符号加载错误

> ID：14419932
> 
> 赞同：-2
> 
> 时间：2013-01-19T23:15:47.607
> 
> 标签：c++, debugging, visual-studio-2012, compiler-errors

我正在尝试使用 Visual Studio 2012 编译一个简单的 Hello World C++ 程序，但遇到了一堆与未加载符号相关的错误。

```
'Hello World.exe' (Win32): Loaded 'C:\Users\Raphael\Documents\Visual Studio 2012\Projects\Hello World\Debug\Hello World.exe'. Symbols loaded.
'Hello World.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Symbols loaded.
'Hello World.exe' (Win32): Loaded 'C:\Windows\SysWOW64\kernel32.dll'. Symbols loaded.
'Hello World.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KernelBase.dll'. Symbols loaded.
'Hello World.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcr110d.dll'. Symbols loaded.
'Hello World.exe' (Win32): Loaded 'C:\Windows\SysWOW64\apphelp.dll'. Symbols loaded.
'Hello World.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\apphelp.dll'
The program '[3668] Hello World.exe' has exited with code 0 (0x0). 
```

我检查了本地硬盘驱动器上的位置，并且每个 .dll 文件都驻留在该文件夹中，所以我不确定为什么它无法加载它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:19:01.423

*这里没有什么与未*加载的符号有关：

```
'Hello World.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Symbols loaded. 
```

Visual Studio 将在调试器下运行您的程序。它加载调试符号...

```
'Hello World.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\apphelp.dll'
The program '[3668] Hello World.exe' has exited with code 0 (0x0). 
```

...成功启动您的程序（这意味着它已成功编译），并且程序以代码 0 退出。

# mysql - 减少 MySQL 进程的数量

> ID：14419933
> 
> 赞同：1
> 
> 时间：2013-01-19T23:15:59.210
> 
> 标签：mysql, process

我需要尝试了解 MySQL 进程/连接是如何工作的。我用谷歌搜索并没有看到任何外行术语，所以我在这里问。这是情况。

我们的主机让我们对“太多的 MySQL 进程”感到悲痛。我们在共享服务器上。我们被允许使用 0.2 的服务器 mySQL 进程——他们声称这是 50 个连接——他们说我们使用的是 0.56。

来自技术支持代表：

> “MySQL procs 数（平均） - 0.59 意味着您使用了共享服务器上可用 MySQL 连接总数的 0.59%。可接受的值为 0.20，即 50 个连接。”

这是我们正在运行的：

```
Zen Cart:           1.5.1  35K products. Auto updating of 1-20
                           products every 10 hours via cron.  
PHP version         5.3.16  
MySQL version       5.1.62-cll  
Architecture        i686  
Operating system    linux 
```

我们通常在网站上每天有大约 5000 次点击，即使我在 Google 网站管理员工具中将抓取速度设置为最低，Google bot 也喜欢访问。

我希望有人可以根据这个主机在说什么向我解释 MySQL 进程。每次我问他们时，我都会得到一个模糊不清的模糊答案。每次访问者访问站点时是否都会创建一个新的 MySQL 进程？这似乎不对。

根据技术，我们当时使用了 150 个连接。

编辑：这是 zencart 中的连接功能

```
 function connect($zf_host, $zf_user, $zf_password, $zf_database, $zf_pconnect = 'false', $zp_real = false) {
$this->database = $zf_database;
$this->user = $zf_user;
$this->host = $zf_host;
$this->password = $zf_password;
$this->pConnect = $zf_pconnect;
$this->real = $zp_real;
if (!function_exists('mysql_connect')) die ('Call to undefined function: mysql_connect().  Please install the MySQL Connector for PHP');
$connectionRetry = 10;
while (!isset($this->link) || ($this->link == FALSE && $connectionRetry !=0) )
{
  $this->link = @mysql_connect($zf_host, $zf_user, $zf_password, true);
  $connectionRetry--;
}
if ($this->link) {
  if (@mysql_select_db($zf_database, $this->link)) {
    if (defined('DB_CHARSET') && version_compare(@mysql_get_server_info(), '4.1.0', '>=')) {
      @mysql_query("SET NAMES '" . DB_CHARSET . "'", $this->link);
      if (function_exists('mysql_set_charset')) {
        @mysql_set_charset(DB_CHARSET, $this->link);
      } else {
        @mysql_query("SET CHARACTER SET '" . DB_CHARSET . "'", $this->link);
      }
    }
    $this->db_connected = true;
    if (getenv('TZ') && !defined('DISABLE_MYSQL_TZ_SET')) @mysql_query("SET time_zone = '" . substr_replace(date("O"),":",-2,0) . "'", $this->link);
    return true;
  } else {
    $this->set_error(mysql_errno(),mysql_error(), $zp_real);
    return false;
  }
} else {
  $this->set_error(mysql_errno(),mysql_error(), $zp_real);
  return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:49:24.653

我想知道这是否是连接池的问题。尝试更改此行：

```
$this->link = @mysql_connect($zf_host, $zf_user, $zf_password, true); 
```

对此：

```
$this->link = @mysql_connect($zf_host, $zf_user, $zf_password); 
```

该[手册在这里很有用](http://php.net/manual/en/function.mysql-connect.php)-第四个参数默认为false，但您的代码强制它为true，即使现有连接已经打开，它也会创建一个新连接（这称为*连接池*并节省不必要地创建新连接，即节省时间和内存）。

不过我要提出一个警告：在第三方系统中修改核心代码总是需要小心谨慎。*他们选择的行为可能*是有原因的，尽管评论的方式并不多。可能值得通过他们的支持渠道提出一个问题，看看它为什么会这样工作，以及他们是否会考虑改变它。

# windows-8 - 构建错误：找不到 SDK“Microsoft.WinJS.Version=0.6”

> ID：14419938
> 
> 赞同：0
> 
> 时间：2013-01-19T23:16:29.043
> 
> 标签：windows-8, build

我正在尝试使用适用于 Windows 8 的 Visual Studio Express 2012 构建示例 Win8 应用程序。此示例发布在 Win8 和 VS2012 最终版本之前。我已将“//Microsoft.WinJS.0.6/...”的所有标注更改为“//Microsoft.WinJS.1.0/...”，但我仍然收到此构建错误：找不到 SDK“Microsoft. WinJS.Version=0.6"，在 Microsoft.Common.Targets 文件中。错误列表显示此文件位于 C:\Windows\Microsoft.NET\Framework\v4.0.30319\，但那里没有这样的文件。

我从头开始编写的其他 JS 应用程序版本可以正常工作。如何修复这个旧的示例应用程序？

# c - 当还使用 PROT_READ 时，mmap MAP_SHARED 和 MAP_PRIVATE 之间有区别吗？

> ID：14419940
> 
> 赞同：18
> 
> 时间：2013-01-19T23:16:57.073
> 
> 标签：c, linux, linux-kernel, mmap

如果我创建`mmap(2)`一个`prot`参数为`PROT_READ`only 的文件，并且支持它的文件也是只读的并且不会更改，那么 和 之间是否存在任何性能差异（或根本差异`MAP_SHARED`）`MAP_PRIVATE`？内核会在两者之间做一些不同的事情吗？

（文档仅提及“更新”方面的行为差异，但因为它`PROT_READ`不可能有更新。我想知道是否还有其他差异？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T23:23:20.707

在 下`MAP_PRIVATE`，Linux 联机帮助页表示未指定在 mmap() 调用之后对文件所做的更改是否在映射区域中可见。情况并非如此`MAP_SHARED`。因此，如果您需要映射的内容与文件的内容一起更新，您最好使用`MAP_SHARED`. 如果底层文件本身是只读的并且无法更改，那么这当然不适用。

如果`PROT_READ`使用 ，我看不出`MAP_PRIVATE`和之间应该有什么不同`MAP_SHARED`。事实上，尽管有上述关于未指定行为的警告，但我的猜测（我没有测试过）将是在实践中两者之间根本没有区别`PROT_READ`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T00:15:40.200

系统`mmap`调用最终调用`do_mmap_pgoff`setup 来调用`mmap_region`来完成实际工作。

它通过标志`VM_SHARED`来指示它是共享还是私有映射`vm_flags`到`mmap_region`

里面有`do_mmap_pgoff`：

```
if (file)
{
    switch (flags & MAP_TYPE)
    {
    case MAP_SHARED:

        if ((prot&PROT_WRITE) && !(file->f_mode&FMODE_WRITE))
            return -EACCES; /* error */

        ...

        vm_flags |= VM_SHARED | VM_MAYSHARE;
        if (!(file->f_mode & FMODE_WRITE))
            vm_flags &= ~(VM_MAYWRITE | VM_SHARED);

        /* fall through */
    case MAP_PRIVATE:

            ...

    break;

    ...
    }

    ...
} 
```

这表示如果有文件支持并且映射是`MAP_SHARED`并且文件是只读的，则关闭`VM_SHARED`共享标志。

但是`VM_MAYSHARE`仍然设置，因此可以用来改变行为。

# c++ - 如果我从 getter 创建迭代器，程序将中止

> ID：14419944
> 
> 赞同：0
> 
> 时间：2013-01-19T23:17:16.747
> 
> 标签：c++, iterator, getter

这是我不明白的一种奇怪行为。

我有一个带有列表的 a 类，上面有一个吸气剂：

```
class A
{
  private:
   std::list<OtherClass *> l;
  public:
   std::list<OtherClass *> getL()
   {
     return l;
   }
} 
```

然后，如果我做类似的事情：

```
A inst;
std::list<OtherClass *>::iterator itB = inst.getL().begin();
std::list<OtherClass *>::iterator itE = inst.getL().end();
for (; itB != itE; ++itB) // Instant ABORT ! 
```

但如果我这样做：

```
A inst;
std::list<OtherClass *> l = inst.getL();
std::list<OtherClass *>::iterator itB = l.begin();
std::list<OtherClass *>::iterator itE = l.end();
for (; itB != itE; ++itB) // It works now ! 
```

有人可以向我解释为什么会这样吗？为什么我要通过这样的临时变量才能不中止？先感谢您 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T23:21:55.863

虽然所有其他答案都建议将**可修改的引用**作为返回值，但我会将它们设为**const**：

```
const std::list<OtherClass *> &getL() const; 
```

此外，我将函数本身设为 const，这意味着它不会修改对象本身。因此，您有一个**正确的*getter 方法***（它既不应该修改对象也不应该返回可修改的引用）。

您可能想要引入*可以*修改属性的此类 getter 函数的第二个版本（如果我们不想隐藏一些在该属性更改时需要执行的代码，例如更新一些相关的东西）：

```
std::list<OtherClass *> &getL(); 
```

但是，如前所述，在某些情况下，此版本不是您想要的。如果您必须在 setter 方法中执行某些操作，您不想公开该属性的可修改引用。如上所示，调用者必须调用 getter，修改值并调用 setter。但是，对于列表、向量、地图等大数据结构，这可能会很慢，因此您可能需要引入单元素设置器，例如：`setLAt(int index, OtherClass *value);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T23:46:10.740

到目前为止所有的答案都告诉你如何正确地做到这一点，但我想我会给你一些更多的细节，为什么你的代码不起作用。因此，正如其他人所指出的那样，您的“getter”正在按值返回列表。这是（主要是）C++特有的东西：程序员必须明确指定是要通过值还是通过引用传递对象。其他编程语言，例如 Java，将（几乎）总是通过引用传递。假设您分配了一个这样的变量：

```
MyClass a;
MyClass b = a; 
```

在许多语言中，赋值意味着：`b`引用指向`a`. 然后，您将能够调用 上的方法`b`，并且它的行为就像它一样`a`。

另一方面，在 C++ 中，这意味着：“创建第二个对象`b`，然后将所有`a`的状态复制到`b`（忽略 MyClass 具有复制构造函数的可能性，这与本解释无关）。现在对于列表，这个意味着每个元素都将被复制到一个新创建的列表中！（除了其他含义之外，这可能是一个性能问题）。

另一方面，如果您告诉编译器引用 a：

```
MyClass& b = a; 
```

那么这`b`确实会表现得好像它是一个。不会复制任何状态，改变`b`会改变`a`。

好的，现在回到您的代码示例。在第一个版本中，您有以下行：

```
// Creates an invalid iterator!
std::list<OtherClass *>::iterator itB = inst.getL().begin(); 
```

这实际上是一堆不同的东西。调用将创建一个新列表并将's 列表成员的`inst.getL()`所有内容复制到其中。`inst`然后，它将获得该副本的迭代器。之后，副本本身被销毁，迭代器将失效。为什么？因为您没有将列表的副本分配给任何东西。`new`在 C++ 中，超出范围的堆栈分配对象（即不是使用创建的）将被破坏。简单地说，一旦对象不再可以通过其名称访问，就会发生“超出范围”：

```
{ // Begin scope
    MyClass o; 
    // Inside the braces, it's possible to refer to o:
    o.doSomething();
} // End scope
o.doSomething() // Will be an error, as o is not "known" anymore 
```

如果您丢弃函数的返回值，也会发生这种情况，例如编写：

```
inst.getL(); 
```

这将创建您的列表的副本，然后再次将其销毁。

现在，为什么您的第二个示例有效？因为您将列表的副本分配给临时变量，所以它们保持在范围内：

```
std::list<OtherClass *> l = inst.getL(); 
```

来自“getter”调用的临时对象被存储到`l`（暂时忽略赋值运算符、RVO 等），并且获得的所有迭代器`l`现在都将有效，直到`l`超出范围。

```
std::list<OtherClass *>::iterator itB = l.begin(); // valid 
```

所以这行得通，尽管可能不像您预期​​的那样：迭代器在您的列表副本上运行，而不是在实际数据上运行。有时这可能是您想要的 - 但在您的情况下，您需要其他答案所建议的参考。

希望这有助于为您澄清一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T23:19:11.567

更改您的 getter 以返回对基础列表的*引用。*

```
std::list<OtherClass *> &getL()
                        ^ 
```

如果没有与号，它会在您每次调用它时返回列表的*副本。*因此，`itB`最终`itE`成为来自不同列表的迭代器。如果这还不够糟糕，那么这两个列表是临时的，在`for`循环开始时已经被销毁了！

如果你使用它来匹配这个，你`l`也应该让它成为一个引用变量。

```
std::list<OtherClass *> &l = inst.getL(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T23:19:27.773

尝试更新：

```
std::list<OtherClass *> getL() 
```

到

```
std::list<OtherClass *>& getL() 
```

记下您的`inst.getL().begin();`并`inst.getL().end();`每次返回一份新的列表副本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T23:19:30.117

因为每次调用时都会创建`getL()`一个新`list`值，并将返回值中的信息复制到其中。

```
std::list<OtherClass *>::iterator itE = inst.getL().end(); 
```

还需要注意的是，当你这样调用它时，你最终会得到一个`list`在行尾破坏的临时对象。使迭代器无效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-19T23:19:54.573

getter 返回列表的*副本*。列表在行尾死亡，迭代器无效。

您可能的意思是返回对现有列表的*引用：*

```
std::list<OtherClass *> & getL() { return l; }
//                     ^^^ 
```

# objective-c - 在 Mac OS X 10.7+ 中从自定义系统范围的钥匙串中检索钥匙

> ID：14419945
> 
> 赞同：4
> 
> 时间：2013-01-19T23:17:18.210
> 
> 标签：objective-c, macos, security, keychain

我正在为 OSX Lion 及更高版本开发应用程序。该应用程序有一个根守护进程。我使用 /Library/Keychains 中的“SecKeychainCreate”创建了一个系统范围的钥匙串，它只能由守护程序访问，并希望在该钥匙串中存储通用密钥。任何人都可以帮助我以编程方式从此钥匙串中检索通用密钥吗？要将密钥添加到钥匙串，我使用了“SecKeychainItemCreateFromContent”函数，因为它接受 SecKeychainRef 参数并将 kSecPublicKeyItemClass 作为第一个参数传递。这是我的代码：

```
char *itemLabel = "Generic public key";

//Setting up the attribute vector (each attribute consists of {tag, length, pointer}):
SecKeychainAttribute attrs[] = {kSecLabelItemAttr, strlen(itemLabel), itemLabel};

SecKeychainAttributeList attributes = { sizeof(attrs)/sizeof(attrs[0]), attrs };

//pubKey is the key (NSData) that I want to store, while tempKeyChain is my keychain
status = SecKeychainItemCreateFromContent(kSecPublicKeyItemClass, &attributes,   [pubKey length],(__bridge const void *)pubKey, tempKeyChain, NULL, NULL);

if (status != noErr) 
{
    NSString *error = (__bridge NSString *)SecCopyErrorMessageString(status, NULL); 
    NSLog(@"Error in adding item to keychain : %@",error);
    return errSecUnimplemented;
} 
```

现在，要检索密钥，有两个选项 - 在 OS X 10.7 中已弃用的“SecKeychainSearchCreateFromAttributes”，因此无用，或“SecItemCopyMatching”。前者接受 SecKeychainRef 参数，而后者不接受。因此，我使用“SecKeychainSetSearchList”手动设置我的搜索列表以包含 tempKeyChain，然后使用“SecItemCopyMatching”。这是代码：

```
OSStatus status;

SecKeychainRef defaultKeychain = nil;
SecKeychainCopyDefault(&defaultKeychain);

NSArray *searchList = [NSArray arrayWithObjects:(__bridge id)defaultKeychain,tempKeyChain, nil];

OSStatus result = SecKeychainSetSearchList((__bridge CFArrayRef)searchList);

if (result != noErr) 
{
    NSString *error = (__bridge NSString *)SecCopyErrorMessageString(result, NULL); 
    NSLog(@"Error : %@",error);
    return errSecUnimplemented;
}

NSMutableDictionary *query = [[NSMutableDictionary alloc] init];

[query setObject:kSecClassKey forKey:(id)kSecClass];
[query setObject:@"Generic public key" forKey:kSecAttrLabel];

CFTypeRef items;

status = SecItemCopyMatching((__bridge CFDictionaryRef)query, &items);

return status; 
```

即使我的钥匙串与默认搜索列表一起添加到搜索列表中，此代码始终给出“未找到项目”的状态。

我将非常感谢任何关于为什么会发生这种情况的指示，或者任何其他更好的方法来存储和检索自定义钥匙串中的钥匙。

PS - 我不想存储密码，只存储密钥（公钥和私钥）。谁能指导我一些代码或提供一个解释相同的小代码片段？谢谢。

# iphone - iOS 平台 (Xcode) 上的方程和公式的 OCR

> ID：14419947
> 
> 赞同：7
> 
> 时间：2013-01-19T23:17:21.820
> 
> 标签：iphone, xcode, math, tesseract, equation

我目前正在开发一个应用程序，它使用支持 iOS 的设备相机来识别照片中的方程式，然后将这些方程式与库或数据库中的正确方程式进行匹配——基本上是一个方程式扫描仪。例如，您可以扫描不确定性原理或薛定谔方程的图像，iOS 设备将能够告知用户其名称和某些反馈。

我想知道如何使用 Xcode 来实现这一点，我正在考虑使用诸如 Tesseract OCR 或 OpenCV 之类的开源框架，但我不确定如何将这些应用于方程式。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:15:05.057

这就是为什么这是超级雄心勃勃的原因。OCR 所做的基本上是获取一组有限的点，并尝试将其与一个非常小的集合中的多个成员中的一个进行匹配。你所说的更多是在成语而不是字符层面。例如，如果我将贝叶斯规则表示为一个等式，我有类似的东西：

```
P(A|B) = P(B|A)P(A)/P(B) 
```

即使它成功识别了这些字符中的每一个，您也必须拥有它，然后将方程中的特征修补为方程族。更不用说，这只是贝叶斯法则的一种表现形式。还有其他使用 Sigma 表示法（LaPlace 的变体），有些使用日志，因此它们不必使用特殊情况 0。

顺便说一句，这可以用贝叶斯来完成。以下是对此的一些想法：

1.  首先，您必须将方程视为分类，并且必须根据一组特征来描述它们，例如，Sigma 符号的存在或日志的应用。
2.  然后，系统将通过显示您希望它识别的所有方程式进行训练，大概每个方程式的几个变体（如上）。然后这些分类将具有特征分布。
3.  最后，当显示一个新方程时，系统必须找到这些特征中的每一个，然后遍历分类并计算方程与给定分类匹配的总体概率。

这就是 90% 的垃圾邮件引擎是如何完成的，但在那里，它们只有两种分类：垃圾邮件和非垃圾邮件，并且特征表示非常简单：只是不同文档类型中单词出现的比率。

有趣的问题，肯定没有简单的答案。

# android - 安卓应用中的幻灯片共享

> ID：14419949
> 
> 赞同：0
> 
> 时间：2013-01-19T23:18:01.143
> 
> 标签：android, embed, android-webview, slideshow

我是 Android 新手，我正在研究将幻灯片共享幻灯片（以及其他内容）包含/嵌入到 Android 应用程序中的可能性。

这个想法是从用户那里接收资源的 URL，例如：

“http://es.slideshare.net/slideshow/embed_code/16060200?rel=0”

并在应用程序的某些部分显示与其他内容（文本或其他内容）混合的幻灯片

我一直在搜索，我看到的唯一选择（我坚持我对这个真的很陌生......）将为该活动制作一个 webview......但是...... webview 只有全屏吗？它可以只是活动的一部分吗？

我希望我能让自己被理解……否则，让我们试着把它弄清楚，然后问我你可能需要什么来理解这个问题；）

非常感谢您，

米格尔

PS：我可以接受其他系统而不是幻灯片共享，我想要的是嵌入幻灯片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:48:31.720

听起来你需要的是 a `WebView`，就像你说的那样。它们也可以是非全屏的。不确定这有多大帮助，但这里有一个来自开发网站的关于 WebView 的教程：

[在 WebView 中构建 Web 应用程序](http://developer.android.com/guide/webapps/webview.html)

# c - 在 C 中读取单个字符

> ID：14419954
> 
> 赞同：14
> 
> 时间：2013-01-19T23:18:32.447
> 
> 标签：c, scanf

我正在尝试从控制台读取一个字符（在 while 循环内）。但它不止一次阅读。

输入：

```
a 
```

输出：

```
char : a  char : char : ' 
```

代码：

```
while(..)
{
    char in;
    scanf("%c",&in);
} 
```

我怎样才能只读“a”？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-19T23:20:20.917

```
scanf("%c",&in); 
```

留下一个换行符，在下一次迭代中使用。

将其更改为：

```
scanf(" %c",&in); // Notice the whitespace in the format string 
```

它告诉 scanf 忽略空格。

或者

```
scanf(" %c",&in);
getchar(); // To consume the newline 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T23:29:29.000

要仅读取一个字符，请改用[getchar](http://rabbit.eng.miami.edu/class/een218/getchar.html)：

```
int c = getchar();
if (c != EOF)
  printf("%c\n", c); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T09:15:12.673

在您可以在之后`scanf("%c",&in);`添加换行符以吸收多余的字符`\n``%c`

```
scanf("%c\n",&in); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-04T09:16:43.647

你总是可以使用`char a = fgetc (stdin);`. 非常规，但就像`getchar()`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-20T03:02:40.597

你可以这样做。

```
char *ar;
int i=0;
char c;
while((c=getchar()!=EOF)
   ar[i++]=c;
ar[i]='\0'; 
```

这样，您创建了一个字符串，但实际上它是一个 char 数组。

# ios - 搜索 UITableView 单元格时忽略特殊字符的 UISearchBar

> ID：14419955
> 
> 赞同：1
> 
> 时间：2013-01-19T23:18:40.363
> 
> 标签：ios, objective-c, xcode, uisearchbar

感谢那些在 SO 上的帮助，我有一个很棒的 UISearchBar 来过滤我的 UITableView。我还想添加一项功能。

我希望 UISearchBar 过滤器忽略撇号、逗号、破折号等特殊字符......并允许在用户键入“Jims Event”时仍然出现带有“Jim's Event”或“Jims-Event”等文本的单元格.

```
for (NSDictionary *item in listItems)
{

if ([scope isEqualToString:@"All"] || [[item objectForKey:@"type"]  
isEqualToString:scope] || scope == nil)
{
    NSStringCompareOptions opts = (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch);
    NSRange resultRange = [[item objectForKey:@"name"] rangeOfString:searchText
                                                     options:opts];
    if (resultRange.location != NSNotFound) {
    [filteredListItems addObject:item];
    }
}
} 
```

有人有想法么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:29:21.137

这个有点棘手。想到的第一个解决方案是从搜索和项目字符串中删除您故意不想匹配的任何字符，然后进行比较。您可以使用[NSCharacterSet](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html)实例进行过滤：

```
// Use this method to filter all instances of unwanted characters from `str`
- (NSString *)string:(NSString *)str filteringCharactersInSet:(NSCharacterSet *)set {
    return [[str componentsSeparatedByCharactersInSet:set]
            componentsJoinedByString:@""];
}

// Then, in your search function....
NSCharacterSet *unwantedCharacters = [[NSCharacterSet alphanumericCharacterSet] 
                                      invertedSet];
NSString *strippedItemName = [self string:[item objectForKey:@"name"] 
                 filteringCharactersInSet:unwantedCharacters];
NSString *strippedSearch = [self string:searchText
               filteringCharactersInSet:unwantedCharacters]; 
```

获得剥离的字符串后，您可以使用`strippedItemName`in place of`[item objectForKey:@"name"]`和`strippedSearch`in place of 进行搜索`searchText`。

在您的示例中，这将：

*   将搜索字符串“Jims Event”翻译成“JimsEvent”（去掉空格）
*   将项目“Jim's Event”翻译成“JimsEvent”（去掉撇号和空格）
*   匹配两者，因为它们是相同的字符串

您可能会考虑在循环遍历项目名称之前将搜索文本中不需要的字符剥离一次，而不是在循环的每次迭代中重做相同的工作。您还可以通过使用其他集合过滤更多或更少的字符`alphanumericCharacterSet`- 更多信息请查看类参考。

**编辑：**我们需要使用自定义函数来删除给定集中的所有字符。仅使用字符串*末尾*[`-[NSString stringByTrimmingCharactersInSet:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-CJBJFBGC)的过滤器，而不是字符串中的任何地方。我们通过将原始字符串拆分为不需要的字符（在此过程中删除它们），然后使用空字符串重新连接组件来解决此问题。

# java - 从 TCP 连接读取字节数组时服务器抛出 OutOfMemory 异常

> ID：14419959
> 
> 赞同：0
> 
> 时间：2013-01-19T23:19:10.600
> 
> 标签：java, tcp, out-of-memory, server-push

我仍在使用我的推送服务器！我已经使用 javax.crypto.cipher 成功实现了加密。这需要我读/写字节到套接字的流。我可以发送和接收就好了。加密有效。但是，当无线传输没有任何内容时，服务器会抛出 OutOfMemoryException。readBytes 函数是：

```
public static byte[] readBytes() throws IOException {
    int len = dis.readInt();
    byte[] data = new byte[len];
    if (len > 0) {
        dis.readFully(data);
    }
    return data;
} 
```

调用它的代码是：

```
 public String read() {
            byte[] encrypted,decrypted = null;
            try {
                    encrypted = readBytes();
                    if (encrypted.equals(new Byte[] {0})) return "";
                    if (encrypted.equals(null)) return null;
                    cipher.init(Cipher.DECRYPT_MODE, key);
                    decrypted = cipher.doFinal(encrypted);
            } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }
            String afterEncryption = new String(decrypted);
            return afterEncryption;
    } 
```

并且 read() 在 while 循环中被调用：

```
while (true&loggedin&((inputLine=read())!=null)) { 
```

抛出的异常是：

```
Exception in thread "ServerThread" java.lang.OutOfMemoryError: Java heap space
    at ServerThread.readBytes(ServerThread.java:277)
    at ServerThread.read(ServerThread.java:245)
    at ServerThread.run(ServerThread.java:108) 
```

第 277 行是声明字节数组的行。发送字节数组的函数是：

```
 public static void sendBytes(byte[] myByteArray, int start, int len) throws IOException {
    if (len < 0)
        throw new IllegalArgumentException("Negative length not allowed");
    if (start < 0 || start >= myByteArray.length)
        throw new IndexOutOfBoundsException("Out of bounds: " + start);
    if (len > 0) {
        dos.writeInt(len);
        dos.write(myByteArray, start, len);
    }
} 
```

sendBytes 仅在 read() 停止阻塞时运行。这就是循环设计的工作方式。

如果这段代码看起来很熟悉，那是因为我在堆栈溢出时发现了它！

握手完美无缺，但是一旦它停止发送东西，大约五秒钟后我就得到了异常。

谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:10:04.647

您几乎肯定会在您的协议中失去同步并且读取数据，就好像它是一个长度字一样。在发送和接收它们并匹配它们时跟踪您的长度字和字节数组长度。

你真的应该考虑使用 CipherInputStream 和 CipherOutputStream ：它们为你做了很多繁重的工作。甚至是 SSL。

# ruby-on-rails - 在 Rails 中确定日期范围时得到 nil:NilClass

> ID：14419961
> 
> 赞同：0
> 
> 时间：2013-01-19T23:19:20.240
> 
> 标签：ruby-on-rails, ruby, date, scoping

我有点傻眼 - 为 nil:NilClass 错误得到一个“未定义的方法“每个”。

我在模型中创建了一个非常简单的范围

```
 def self.just_added
      where('created_at > ?', Time.now-7.days.ago).order("created_at desc").first(4)
  end 
```

在我看来是一个循环

```
<% @just_added_jobs.each do |job| %>
    <%= link_to job.name, job %>         
<% end %> 
```

不知道发生了什么 - 我很确定我已经创建了一个像以前一样工作的范围。

另外 - 我还计划对日期进行一些更复杂的范围界定 - 我有几个日期字段作为模型的一部分（即循环浏览即将到期的作业，过期）。我在哪里可以阅读更多关于范围界定日期的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:59:11.603

1.  您显示的类方法的结果永远不会`nil`如此，因此我们必须得出结论，您没有`@just_added_jobs`在控制器中进行设置。

2.  `created_at > Time.now-7.days.ago`没有意义，你可能是说`created_at > 7.days.ago`

3.  调用`first(n)`作用域是个坏主意，因为结果不再是作用域而是数组。你需要`limit(n)`.

# windows - Windows 配置上的 Heroku 工具带：添加导致路径损坏

> ID：14419967
> 
> 赞同：0
> 
> 时间：2013-01-19T23:19:49.770
> 
> 标签：windows, heroku, heroku-toolbelt

尝试使用 windows 上的 heroku 工具带在我的 heroku rails 应用程序上设置 LD_LIBRARY_PATH 错误地替换了发送到应用程序的路径。

在 Windows 上使用 heroku toolbelt 运行以下命令：

```
heroku config:add LD_LIBRARY_PATH=/usr/local/lib:/usr/lib:/lib:/app/vendor/phantomjs/lib

Setting config vars and restarting... done, v164
LD_LIBRARY_PATH: C:\dev\Git\local\lib;C:\dev\Git\lib;C:\dev\Git\lib;C:\dev\Git\app\vendor\phantomjs\lib 
```

似乎工具带会自动将“/usr”替换为“C:\dev\Git\”（我的系统上安装了 msysgit）。显然，这会破坏我的 heroku 应用程序，因为这些路径在服务器上没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:39:34.897

这实际上不是 Heroku 工具带的问题，它是[msys 记录的行为](http://www.mingw.org/wiki/Posix_path_conversion)（我假设您在 msysgit 中运行它）。您可以在不同的 shell（例如 Powershell）中运行命令，也可以在路径的开头使用“//”，如下所示：

```
heroku config:add LD_LIBRARY_PATH=//usr/local/lib://usr/lib:/lib://app/vendor/phantomjs/lib 
```

在 Linux 上使用该路径时，这不会导致问题。

# java - 调用 List.remove(index) 时出现 java.lang.UnsupportedOperationException

> ID：14419970
> 
> 赞同：3
> 
> 时间：2013-01-19T23:20:06.940
> 
> 标签：java, arrays, list, exception, arraylist

> **可能重复：**
> [为什么我在尝试从列表中删除时得到 UnsupportedOperationException？](https://stackoverflow.com/questions/2965747/why-i-get-unsupportedoperationexception-when-trying-to-remove-from-the-list)

当我调用 List.remove(index) 或 list.remove(element) 时，它会引发 java.lang.UnsupportedOperationException。唯一相关的错误代码是：

```
17:08:10 [SEVERE]       at java.util.AbstractList.remove(Unknown Source) 
```

这是一个例子：

```
String line = "cmd /say This is a test";
String[] segments = line.split(" ");
String cmd = segments[0];
List rest = Arrays.asList(segments);
rest.remove(0); // This line raises the exception 
```

有谁知道为什么会这样？在我的实际代码中，我检查了索引 0 处的元素要删除。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T23:22:03.923

来自[`Arrays.asList()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)的 JavaDoc：

> 返回由指定数组支持的固定大小的列表。（将返回的列表“写入”到数组的更改。）

所以代替固定大小的列表：

```
List rest = Arrays.asList(segments); 
```

创建一个新的可变大小列表：

```
List<String> rest = new ArrayList<String>(Arrays.asList(segments)); 
```

# javascript - 如果我的内容不长于视口，那么我希望扩展一个 div 以填补空白，以便标题可以在屏幕外

> ID：14419971
> 
> 赞同：1
> 
> 时间：2013-01-19T23:20:20.077
> 
> 标签：javascript, html, css

如果我的内容不长于视口，那么我希望扩展一个 div 以填补空白，以便标题可以在屏幕外我会解释得更好

我有站点 x，它是一个带有菜单的标题，然后是内容 - 所有这些都滚动 - 底部有一个固定的 div - 25px 高，所以我在我的 30px 内容的底部添加了一个 div - 这允许底部 -大多数内容在滚动到底部时可见

所有页面都有一个通过书签重定向到#sectionB - 到菜单 - 因此隐藏大约 300 像素高度的标题横幅 - 在大多数页面上，这意味着内容仍然会溢出视口 - 在一个或两个页面上，内容不够长，所以书签重定向只能覆盖标题横幅的 200 或 100 像素

一个明显的解决方法是使底部 div 更大，但这会破坏大多数页面的干净效果

[http://www.tpfwales.com/preview/home.html#sectionB](http://www.tpfwales.com/preview/home.html#sectionB) 是一个较长的页面
[http://www.tpfwales.com/preview/info.html#sectionB](http://www.tpfwales.com/preview/info.html#sectionB)是一个问题页面

有没有办法让javascript找出视口大小，将其与内容大小进行比较，如果内容大小小于视口大小-将内容底部的div-cbase的值从30px更改到剩余空间加上标题横幅的高度

很抱歉在我对问题的描述中有点混乱。

所以我们有一个标题、菜单、子菜单、内容、追逐——所有这些都可以滚动，然后是永久固定在底部的页脚。当菜单向下的内容长于视口时，30px 的 cbase 是完美的 - 当菜单向下的内容不长于视口时，我希望 cbase 是高度或视口减去菜单向下的内容。如果可能的话，这将在页面调整时进行调整。

# scheme - 有条件的程序设计计算销售税的功能？

> ID：14419973
> 
> 赞同：0
> 
> 时间：2013-01-19T23:20:26.777
> 
> 标签：scheme, racket

我正在尝试设计一个计算销售税的函数。因此，它将消耗销售价格以及小数或小数的税率，并产生最终价格。所以如果我给 20% 和 105%（1.05），我会得到 21。

（定义（销售ab）（* ab））

我把小数部分记下来了，但我怎么让它做小数部分呢？

比如如果我给出 20 和 5/100，我将如何计算 21？我需要它来识别分数......如果这有任何意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:26:42.937

这是你需要的吗？

```
(define (sales a b)
  (if (exact? b)
      (* a (add1 b))
      (* a b))) 
```

它按预期工作：

```
(sales 20 1.05)
=> 21

(sales 20 5/100)
=> 21 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T23:23:06.547

您不必“识别”分数：所有算术函数都已经为您完成了。

```
% racket 
Welcome to Racket v5.3.1.
> (* 20 (+ 1 5/100))
21 
```

# c++ - “警告：比较总是正确的”

> ID：14419976
> 
> 赞同：7
> 
> 时间：2013-01-19T23:20:39.297
> 
> 标签：c++, templates, comparison

GCC（4.7.2）`-Wextra`发出以下警告/错误信号（我已`-Werror`启用）：

> 由于数据类型的范围有限，比较总是正确的 [-Wtype-limits]

对于以下代码[[在线尝试](http://stacked-crooked.com/view?id=aac8b4042417d0f52ff51586eb67492d)]：

```
template <
    typename T,
    std::size_t N,
    bool = static_cast<std::size_t>(std::numeric_limits<T>::max()) < N>
struct validator {
    static constexpr bool validate(T value) {
        return static_cast<std::size_t>(value) < N;
    }
};

template <typename T, std::size_t N>
struct validator<T, N, true> {
    static constexpr bool validate(T) {
        return true;
    }
};

int main() {
    // Works
    static_assert(validator<int, 4>::validate(3), "Invalid");
    // Error :-(
    static_assert(validator<bool, 2>::validate(true), "Invalid");
} 
```

我理解为什么在正常的表达式上下文中会出现警告，例如当我使用以下`validate`函数时：

```
template <typename T, std::size_t N>
bool validate(T value) {
    return static_cast<std::size_t>(value) < N;
} 
```

– 事实上，这就是我首先使用专门模板的原因（请注意，使用了正确的模板专门化，并且我的第一个代码中的错误是由模板参数引发的，而不是在未专门模板的函数内部） . 有没有办法绕过这个警告？如果不是，那不是编译器中的错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T23:36:57.720

这已在 GCC 主干中修复，请参阅[PR 11856](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=11856)

所以等待大约四月下旬并使用 GCC 4.8 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T01:19:58.243

由于我不能等到这个问题得到解决（请参阅乔纳森的回答），我已经使用 GCC`#pragma`扩展有选择地禁用了警告：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wtype-limits"
static_assert(validator<bool, 2>::validate(true), "Invalid");
#pragma GCC diagnostic pop 
```

请注意，不幸的是，即使实际错误发生在模板参数中，这些 pragma 也需要围绕*调用代码。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T17:46:57.560

这是一个解决方法：

```
template <
    typename T,
    std::size_t N,
    bool = static_cast<std::size_t>(std::numeric_limits<T>::max()) < N>
struct validator {
    static constexpr bool validate(T value) {
        return size_t_cast(value) < N;
    }
private:
    static constexpr std::size_t size_t_cast(T value) {
        return value;
    }
};

template <typename T, std::size_t N>
struct validator<T, N, true> {
    static constexpr bool validate(T) {
        return true;
    }
}; 
```

这允许示例在 GCC 4.7.2 中无错误地编译。

# mysql - 为什么我不能远程编辑 mysql 数据库？

> ID：14419981
> 
> 赞同：0
> 
> 时间：2013-01-19T23:21:15.240
> 
> 标签：mysql

所以我最近在 Ubuntu 12.04 上格式化并重置了我的 Lamp 服务器。我一切正常，接受我似乎无法从远程帐户编辑 mysql 上的任何内容，尽管我可以查看它。我知道我已经正确设置了远程访问（因为我可以很好地查看我的数据库），但我无法编辑任何内容。起初我以为这是用户权限错误，但在尝试登录后，我查看了我的权限并确认：

```
mysql> show grants for 'tom'@'%';
GRANT ALL PRIVILEGES ON *.* TO 'tom'@'%' IDENTIFIED BY PASSWORD 'BLAHBLAHMYENCRIPTED PASSWORDISN'TIMPORTANT' WITH GRANT OPTION 
```

我不知道出了什么问题。我已经搜索和搜索，似乎没有其他人有这个问题。

# android - 如何使用 android 的帐户管理器获取多个范围的身份验证令牌

> ID：14419982
> 
> 赞同：3
> 
> 时间：2013-01-19T23:21:19.530
> 
> 标签：android, google-app-engine, oauth, accountmanager, auth-token

我需要从一个 android 应用程序中获取一个 oauth 令牌，这将允许我连接到我的 appengine 应用程序以及能够从用户的帐户发送电子邮件。我遇到的问题是，由于某种原因，实际上没有任何关于可用的身份验证令牌范围的好的文档。

根据我的发现，您可以使用空格分隔符连接身份验证令牌，但我没有运气。 `accountManager.getAuthToken(account, "oauth2:https://mail.google.com/", null, activity, new AuthTokenCallback(), null);` 可以很好地获取电子邮件令牌。

同样 `accountManager.getAuthToken(account, "ah", null, activity, new AuthTokenCallback(), null);` 适用于应用引擎令牌。

但是 `accountManager.getAuthToken(account, "oauth2:https://mail.google.com/ ah", null, activity, new AuthTokenCallback(), null);` 让我陷入错误

`Couldn't sign in, There was a problem communicating with Google servers Try again later`

我怎样才能让这两者像良好的小型 Google 服务一样协同工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T08:39:09.373

问题是您正在尝试将 OAuth 2.0 范围（“ [https://mail.google.com/](https://mail.google.com/) ”）与 ClientLogin 范围（“ah”）混合，我认为这不受支持。

当您想要一个具有多个权限级别的令牌时，您可以将它们与您所说的空格分隔符连接起来。对于 OAuth 2 范围，它是这样完成的：`oauth2:{space separated list of scopes}`.

当您提供范围`oauth2:https://mail.google.com/ ah`时，假定两个范围都是 OAuth 2 范围。但由于“啊”不是有效的 OAuth 2 范围，Google 服务器不会接受它，而是会给出您看到的错误。

我不知道 App Engine 的任何 OAuth 2 范围，[2011 年](https://stackoverflow.com/questions/6034609/do-the-google-app-engine-oauth-endpoints-support-oauth-2-0)和[2012](https://stackoverflow.com/questions/10400428/can-i-use-androids-accountmanager-for-getting-oauth-access-token-for-appengine)年 Stackoverflow 上的两个较早的问题表明它还不支持 OAuth 2。

# ios - 将参数传递给方法，用于访问 CoreData 属性

> ID：14419983
> 
> 赞同：0
> 
> 时间：2013-01-19T23:21:22.757
> 
> 标签：ios, core-data, methods, parameters, arguments

我已经自定义了 CoreDataBooks 示例应用程序，并且正在添加一整套布尔值。本质上，我正在把它变成一个餐厅应用程序，所以我想为“晚餐”“海鲜”“鸡尾酒”“儿童友好”等内容设置布尔值。

在我的 Detailview 控制器中，我选择了一个项目（书），并且可以更改 CoreData 中的 Bool 值——对于一个名为海鲜的属性，如下所示——

```
 self.book.seafood = NO; 
```

或者

```
 self.book.seafood = YES; 
```

这些值每个都使用自己的按钮进行切换（实际上看起来像我的应用程序中的复选框）

但是，因为可能有 60 或 80 个布尔值，并且我想稍后添加更多，所以我想编写一个函数，我可以将其用于所有使用标签或传递参数的布尔值。我想写这样的东西，但我觉得我错过了一步。它显然不会让我将参数传递给 self.book.button：

```
 -(IBAction) switchValue:(*UIButton)button{

      tmpBool = self.book.button

     if (tempBool == YES) {
            self.book.button = NO;

            UIImage *buttonImage = [UIImage imageNamed:@"checkOff.png"];
            [self.button setImage:buttonImage forState:UIControlStateNormal];

            NSLog(@"nwSwitched to NO");
        }
        else{

            self.book.button = YES;

            UIImage *buttonImage = [UIImage imageNamed:@"checkOn.png"];
            [self.button setImage:buttonImage forState:UIControlStateNormal];

            NSLog(@"nwSwitched to YES");
        } 
```

就目前而言，我可以让它工作的唯一方法是使用大量的 if/thens 或 switch，但我知道必须有一种更优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:20:11.650

正如卡尔所说，这是一种不雅的方法。我改为切换，现在将所有标签保存在一个名为“标签”的 CoreData 属性中。要添加和减去它们，我只需添加到字符串或找到替换为 @" "，以删除它们。然后我可以稍后搜索它们。

为了管理一长串标签并轻松添加标签，我使用了 PickerView，它是使用 NSMutableArray 设置的，我存储在 NSUserDefaults 中。（当你重新加载它时，你必须制作一个可变副本。）

是的，您可以在 CoreData 中保留标签列表，但这对我来说似乎更容易。

# javascript - 升级到 jquery 后 jquery 选择器失败

> ID：14419986
> 
> 赞同：0
> 
> 时间：2013-01-19T23:21:29.357
> 
> 标签：javascript, jquery, select

我有以下 javascipt 行来选择网格中的 tr：

```
$('#gridtable tr:gt(0):[name!="blank"]').click(function () { 
```

这一直很好，直到我将我的 jquery 版本升级到最新版本，现在这一行会产生这个错误：

*语法错误，无法识别的表达式：#gridtable tr:gt(0):[name!="blank"] jquery.min.js:2*

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:23:12.587

您的选择器中有一个额外的冒号：

```
$('#gridtable tr:gt(0):[name!="blank"]')
//                    ^ Remove this 
```

* * *

我建议您改用真正的 CSS 选择器，因为它*要*快得多：

```
$('#gridtable tr[name!="blank"]:not(:first-child)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T23:23:45.293

奇怪的是为什么以前版本的 jQuery 没有引发同样的错误。您的选择器有问题。如果您正在寻找具有`name != "blank"`内部`<tr>`元素（不是第一行）的元素，请使用：

```
$("#gridtable tr:gt(0) [name!='blank']") 
```

如果`<tr>`元素也应该有过滤器，`name != "blank"`那么使用：

```
$("#gridtable tr[name!='blank']:gt(0)") 
```

[所以属性选择器](http://api.jquery.com/attribute-not-equal-selector/)`:`不需要冒号。

# c# - 保存字典 > 使用 LINQ 将数据转换为 XML 文件

> ID：14419991
> 
> 赞同：-1
> 
> 时间：2013-01-19T23:21:57.603
> 
> 标签：c#, .net, xml, linq

我想将`Dictionary<int, List<Object>>`数据写入 XML 文件。我尝试了以下代码：

```
Dictionary<int, List<Author>> _empdata = new Dictionary<int, List<Author>>();
List<Author> _author1 = new List<Author> { new Author() { id = 1, name = "Tom", age = 25 } };
List<Author> _author2 = new List<Author> { new Author() { id = 2, name = "Jerry", age = 15 } };

_empdata.Add(1, _author1);
_empdata.Add(2, _author2);

string fileName = "Author_" + string.Format("{0:yyyy-MM-dd_hh-mm-ss-tt}", DateTime.Now);
string filePath = Path.Combine(Directory.GetCurrentDirectory(), fileName) + ".xml";

            XElement elem = new XElement("StackOverflow");
            foreach (KeyValuePair<int,List<Author>> pair in _empdata)
            {
                elem = new XElement("AUTHORDATA",
                from item in pair.Value
                select new XElement("AUTHOR",
                       new XElement("ID", item.id),
                       new XElement("NAME", item.name),
                       new XElement("AGE", item.age)
                       ));
            }
            elem.Save(filePath); 
```

我的预期输出是：

```
<AUTHORDATA>
  <AUTHOR>
    <ID>1</ID>
    <NAME>Tom</NAME>
    <AGE>25</AGE>
  </AUTHOR>
  <AUTHOR>
    <ID>2</ID>
    <NAME>Jerry</NAME>
    <AGE>15</AGE>
  </AUTHOR>
</AUTHORDATA> 
```

但是，我在 XML 文件中得到以下记录：

```
 <AUTHORDATA>
   <AUTHOR>
      <ID>2</ID>
      <NAME>Jerry</NAME>
      <AGE>15</AGE>
    </AUTHOR>
 </AUTHORDATA> 
```

每次只在 XML 文件中写入最后一个 List 记录。我怎样才能解决这个问题 ？注意：XML 文件的格式如上。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:24:20.240

[编辑] Awww 抱歉，我误解了您的要求：

```
XElement ad = new XElement("AUTHORDATA");
XElement elem = new XElement("StackOverflow", ad);

foreach (KeyValuePair<int, List<Author>> pair in _empdata)
{
    ad.Add(new XElement("AUTHORDATA",
        from item in pair.Value
        select new XElement("AUTHOR",
               new XElement("ID", item.id),
               new XElement("NAME", item.name),
               new XElement("AGE", item.age)
    ));
}

elem.Save(filePath); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:36:06.567

您需要将循环中创建的节点添加到`AUTHORDATA`节点：

```
var authorData = new XElement("AUTHORDATA");
var root = new XElement("StackOverflow", authorData);
foreach (KeyValuePair<int,List<Author>> pair in _empdata)
{
    authorData.Add(
        from item in pair.Value
        select new XElement("AUTHOR",
            new XElement("ID", item.id),
            new XElement("NAME", item.name),
            new XElement("AGE", item.age)
        ));
}

root.Save(filePath); 
```