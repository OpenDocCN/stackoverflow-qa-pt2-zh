# StackOverflow 问答 15525000-15525999

# event-handling - JavaFX：如何使节点部分鼠标透明？

> ID：15525001
> 
> 赞同：7
> 
> 时间：2013-03-20T13:30:36.207
> 
> 标签：event-handling, mouseevent, javafx-2, transparency

# 简化问题：

使位于另一个节点“B”之上的一个节点“A”对 MouseEvents 是半透明的，因此事件将到达底层节点“B”。两个节点大小相同，但节点“A”有一个半透明的背景图像，因此节点“B”的一半是可见的。

# 真正的问题：

我有一个标签菜单。每个选项卡都可以拖动展开相应的菜单层。因此，每个选项卡层都是一个具有部分透明背景（基本上是多边形）的窗格，其中透明部分对 MouseEvents 也应该是透明的。

插图（我还不能发布，请参见链接：[选项卡插图](http://imgur.com/LaM6TAu)，深绿色线是绿色窗格的边框）显示了基本原理：想象一下只有选项卡是可见的，并且可以将图层本身拉到查看其内容的权利。

所以问题是，如何在不使整个节点透明的情况下使节点的一个区域对 MouseEvents 透明？

感谢您的帮助！

### 更新：

为了澄清这个简单的问题，这里是相应的代码：

```
//Create parent group
Group root = new Group();

//Create linear gradient, so one side is transparent
Stop[] stops = new Stop[] { new Stop(0, Color.rgb(0, 255, 0, 0.0)), new Stop(1, Color.rgb(0, 255, 0, 1.0))};
LinearGradient lg1 = new LinearGradient(0, 0, 1, 0, true, CycleMethod.NO_CYCLE, stops);

//Create the rectangles
Rectangle A = new Rectangle(100, 50, lg1);
Rectangle B = new Rectangle(100,50, Color.RED);

//Add eventHandlers
A.setOnMouseClicked(new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEvent e) {
        System.out.println("Clicked A");
    }
});
B.setOnMouseClicked(new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEvent e) {
        System.out.println("Clicked B");
    }
});
root.getChildren().addAll(B, A);

//Add to Scene.. 
```

希望这可以帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T21:07:46.997

考虑该`pickOnBounds`属性，它*可能*对您的情况有所帮助，但如果没有看到您的代码尝试因简化问题而失败，我不清楚。

[node.setPickOnBounds(true)](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setPickOnBounds%28boolean%29)

> 如果 pickOnBounds 为真，则通过与该节点的边界相交来计算拾取，否则通过与该节点的几何形状相交来计算拾取。

下面的代码演示了如何通过创建一个由包含透明像素的`ImageView`for覆盖的正方形来使用它。`Image`如果`pickOnBounds`ImageView设置为true，那么即使点击图片中的透明像素，ImageView也会收到mouseClick事件。如果`pickOnBounds`ImageView设置为false，那么即使点击图片中的透明像素，ImageView也不会处理点击，点击事件会被图片后面的节点接收。

![鼠标挑](../Images/7cafe7b5da7d5dbfa51e7a52f337a32e.png)

```
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.*;
import javafx.scene.paint.*;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

public class PickOnBoundsDemo extends Application {
  public static void main(String[] args) { Application.launch(args); }
  @Override public void start(Stage stage) {
    final Rectangle back  = new Rectangle(128, 128);
    back.setFill(Color.FORESTGREEN);
    final ImageView front = new ImageView("http://icons.iconarchive.com/icons/aha-soft/free-large-boss/128/Wizard-icon.png");
    // icon: Linkware (Backlink to http://www.aha-soft.com required)

    final StackPane pickArea = new StackPane();
    pickArea.getChildren().addAll(
      back, 
      front
    );

    final ToggleButton pickTypeSelection = new ToggleButton("Pick On Bounds");
    final Label pickResult = new Label();

    Bindings.bindBidirectional(front.pickOnBoundsProperty(), pickTypeSelection.selectedProperty());

    front.setOnMouseClicked(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent t) {
        pickResult.setText("Front clicked");
      }
    });

    back.setOnMouseClicked(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent t) {
        pickResult.setText("Back clicked");
      }
    });

    VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().setAll(
      pickArea,
      new Label("Click inside the above area to test mouse picking."),
      pickTypeSelection,
      pickResult
    );
    layout.setAlignment(Pos.CENTER);

    stage.setScene(new Scene(layout));
    stage.show();
  }
} 
```

# java - 动态搜索表单给定数量的输入值与集合

> ID：15525005
> 
> 赞同：0
> 
> 时间：2013-03-20T13:30:51.257
> 
> 标签：java

我的表单包含 6 个字段：fName、lName、mName、age、sex、sal

我们不能指望用户会完成所有的输入。有时他只完成 3 个输入，有时 4 个，有时只完成 1 个，有时全部，我们无法预测。

我有一个具有所有 6 个属性值的员工 bean。

我想使用来自用户的所有给定输入来搜索这个员工 bean。这意味着我需要动态识别用于比较的 getter。如果用户只给出了 3 个输入，那么我只需要使用各自的 getter 进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:38:40.007

您可以使用反射。例如，如果您的用户提供了年龄和性别，您应该调用它们`getAge()`并将`getSex()`它们与给定值进行比较。要编写 getter 名称，请使用如下代码：

`String getterName = "get" + fieldName.substring(0, 1).toUpperCase() + fieldName.substring(1);`

现在你可以调用它了：

`String value = String.valueOf(Person.getCalss().getMethod(getterName).invoke(person));`

现在只需将其与给定值进行比较。

您还可以使用为您简化 bean 访问的库。例如来自 jakarta 项目的[BeanUtils 。](http://commons.apache.org/proper/commons-beanutils/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:38:03.703

您可以使用 Hamcrest Matchers 之类的东西。例如：

```
String MATCH_ANY = "matchany83102176193580";

...

if (mName.equals(search.mName) || mName.equals(MATCH_ANY)) 
```

# android - 如何同时使用 Actionbar Tabs 和 Actionbar Spinner？

> ID：15525010
> 
> 赞同：1
> 
> 时间：2013-03-20T13:31:02.277
> 
> 标签：android, android-layout, android-spinner, android-tabs

我想实现将下载数据并将其设置为 ActionBar 选项卡的应用程序。我已经实现了它，但我还有一件事要做。我尝试添加操作栏列表，比如这个[，](http://s019.radikal.ru/i629/1303/c4/235b72c6d0ff.png)但是android不允许同时使用选项卡和列表:(按下列表中的一项后，应用程序应该下载相应的数据并将其放入我的应用程序。（[示例](https://lh6.ggpht.com/jZa9O5rEm_GW1UdjTig-Vo9tlaHXIzbET2s2HllWd3RAgh8Ot5C6pxG8hrVKv80VVED4)）那我该怎么做？有什么方法可以在操作栏中安装微调器吗？如果是，请提供示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:44:18.603

**我可以这样做：**

```
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

navigation 是**tabs**，但 ActionBar 有一个自定义视图。

```
bar.setCustomView(R.layout.custom_actionbar);
bar.setDisplayShowCustomEnabled(true); 
```

`custom_actionbar`包含`spinner`. _

# xaml - windows phone 8 的默认控件模板

> ID：15525012
> 
> 赞同：1
> 
> 时间：2013-03-20T13:31:12.007
> 
> 标签：xaml, windows-phone-8

我想对我的 windows phone 8 应用程序中某些控件的默认控件模板进行一些小修改。问题是我找不到这些默认模板。有谁知道在哪里可以找到它们？

我正在寻找类似的东西，[但这](http://msdn.microsoft.com/en-us/library/aa970773%28v=vs.100%29.aspx)是针对 WPF 而不是 WP8。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-03T15:36:29.017

您可以在此处找到包含所有默认控件模板的文件：

**C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Design\System.Windows.xaml**

编辑：此外，如果您搜索[“样式和模板” ，Windows Store Dev Center 会列出很多](http://social.msdn.microsoft.com/Search/en-US/windows/apps?query=styles%20and%20templates&Refinement=180&emptyWatermark=true&searchButtonTooltip=Search&ac=4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:41:10.123

我不知道 WP8 有这样的列表，但是，您可以使用 Blend 或 Visual Studio 来编辑控件当前模板的副本，方法是右键单击控件，然后选择**Edit Style**、**Edit Template**或**Edit Additional Templates**视情况而定. 在子菜单中，您可以选择**Edit a Copy...**这将显示一个窗口，允许您创建默认（或当前模板/stlye，如果您已经修改它）的副本并对其进行自定义。

# c# - 事件根本没有被触发

> ID：15525016
> 
> 赞同：1
> 
> 时间：2013-03-20T13:31:19.473
> 
> 标签：c#, .net, wpf, windows, events

我有一个 ComboBox，有许多 ComboBoxItems。当用户将鼠标悬停在 ComboBoxItem 上时，我想触发一个事件。这是我到目前为止尝试过的代码，但是事件没有触发 - 即当我放置断点时，没有输入事件。

```
private void cmbValue_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            ComboBox cmb = sender as ComboBox;
            cmb.Items.Clear();

            //Iterates through all virtual tables
            foreach (TableContainer table in listOpenUnjoinedTables)
            {
                ComboBoxItem item = new ComboBoxItem();
                item.MouseEnter += item_MouseEnter;

                if (table.IsVirtual == false)
                {
                    item.Content = "[" + table.TableDescription + "]";
                }
                else
                {
                    item.Content = "[" + table.View.Name + "]";
                }

                item.Tag = table;
                cmb.Items.Add(item);
            }
        }

 private void item_MouseEnter(object sender, MouseEventArgs e)
        {
            ComboBoxItem item = sender as ComboBoxItem;

            //Do task
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:43:26.907

您是否不小心删除了 Designer.cs 上的事件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:44:30.623

试试 GotFocus 活动。即使用户使用键盘选择一个项目，这也会触发。我相信这就是你在这里真正想要的:)

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        var comboBoxItem1 = new ComboBoxItem();
        var comboBoxItem2 = new ComboBoxItem();

        comboBoxItem1.Content = new Button() { Content = "button1" };
        comboBoxItem1.GotFocus += (sender, args) => lbl1.Content = "1111";
        comboBoxItem2.Content = "222222";
        comboBoxItem2.GotFocus += (sender, args) => lbl1.Content = "2222";

        comboBox1.Items.Add(comboBoxItem1);
        comboBox1.Items.Add(comboBoxItem2);
    }
} 
```

![在此处输入图像描述](../Images/9d454d2e639e1cfff91de39514c6b431.png)

![在此处输入图像描述](../Images/233f3a1fd82cdb07262b04c681b29da4.png)

# web-services - HTTP 响应标头 - 应用程序版本

> ID：15525022
> 
> 赞同：7
> 
> 时间：2013-03-20T13:31:35.063
> 
> 标签：web-services, http, rest, soap

我试图想出一种方法来使用 HTTP 来响应消息来公开 Web 服务（REST 和 SOAP 接口）的特定内部版本号。

为了清楚起见，我并不想控制客户端正在使用哪个版本的应用程序，因为这是由流量管理器和服务注册表处理的（也已经讨论过很多），我只想稍后能够调试哪个版本已使用或正在使用，例如，检查流量管理器是否提供正确的版本。

我花了很长时间查看 HTTP 规范，无法决定是否使用`Pragma`

```
Pragma: application-version=1.0.0-SNAPSHOT 
```

使用额外的`Server`标题

```
Server: Apache-Coyote/1.1
Server: MyService-1.0.0-SNAPSHOT 
```

用一个`Via`

```
Via: MyService-1.0.0-SNAPSHOT 
```

或客户标题

```
X-ApplicationVersion: 1.0.0-SNAPSHOT 
```

在我看来，使用 a`Via`或 a`Server`在语义上是不正确的，但使用`X-`标头有被代理丢弃的风险，但`Pragma`不受约束，因此如果想以编程方式使用它，则更难以解析。

我也有一种感觉，多个`Server`标头不会被尊重，但是没有办法用我正在使用的容器（JBoss）指定多个值。

这有什么先例吗？
有人有任何提示吗？
我应该闭嘴并使用一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:50:09.763

> 在我看来，使用 Via 或 Server 在语义上是不正确的，但使用 X-header 有被代理丢弃的风险

我不会太担心 X 标头被丢弃。以 ebay 查找服务为例

[http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=harry%20potter](http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=harry%20potter)

响应包含此标头。

```
X-EBAY-SOA-SERVICE-VERSION: 1.12.0 
```

我已经看到为此目的使用了很多 X 标头。

# php - 表单 $_POST 错误，动态字段

> ID：15525023
> 
> 赞同：0
> 
> 时间：2013-03-20T13:31:38.020
> 
> 标签：php, jquery, html

我有一个我无法弄清楚的错误......

Om 我的网页有一个表单，用户可以向其中添加一些新的输入字段。如果用户正在提交表单，那么当 php 文件正在处理它们时，可选字段是空的，为什么？

HTML：

```
 <form method="post" action="newRequest.php">
            <input type="text" name="title" />
            <input type="hidden" name="fname" value="0" />
            <input type="checkbox" name="fname" value="1"/>
            <input type="hidden" name="ename" value="0" />
            <input type="checkbox" name="ename" value="1" />
            <input type="hidden" name="seat" value="0" />
            <input type="checkbox" name="seat" value="1" />
            <input type="hidden" name="fields" value="0" />
            <input type="text" id="fields" name="fields" />
            <input type="submit" />
        </form> 
```

PHP：

```
if (strlen($_POST[title]) > 2) {
    $toDb[title] = $_POST[title];
} else {
    error('title');
}

$toDb[fname] = $_POST[fname];
$toDb[ename] = $_POST[ename];
$toDb[seat] = $_POST[seat];

if ($_POST[fields] > 0) {
    $i = 0;
    while ($i < $_POST[fields]) {
        $toDb[optional][$i] = $_POST[optional-$i];
        $i++;
    }
    $toDb[optional] = serialize($toDb[optional]);
} else {
    $toDb[optional] = 0;
}
newEvent($toDb,$dbh); 
```

正在添加动态字段的 JQuery：

```
$(document).ready(function() {
    $('#fields').focusout(function(){

        var fields = $('#fields').val();
        var i = 0;

        while(i < fields) {
            $('#fields').after("Valfritt fält "+(i+1)+":<input type='text' name='optional"+i+"' />");
            i++;
        }

    })
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:38:14.207

您应该引用数组索引。它应该是

```
 $toDb['optional'][$i] = $_POST['optional'.$i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:38:18.503

您在 $_POST 中缺少逗号

```
$toDb['fname'] = $_POST['fname'];
$toDb['ename'] = $_POST['ename'];
$toDb['seat'] = $_POST['seat']; 
```

这是您修改后的代码

```
if (strlen($_POST['title']) > 2) {
    $toDb['title'] = $_POST['title'];
} else {
    error('title');
}

$toDb['fname'] = $_POST['fname'];
$toDb['ename'] = $_POST['ename'];
$toDb['seat'] = $_POST['seat'];

if (count($_POST) > 0) {
    $i = 0;
    while ($i < count($_POST)) {
        $toDb['optional'][$i] = $_POST['optional-'.$i];
        $i++;
    }
    $toDb['optional'] = serialize($toDb['optional']);
} else {
    $toDb['optional'] = 0;
}
newEvent($toDb,$dbh); 
```

还使用 count() 检查 $_POST 的值是否 > 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:33:48.330

我遇到了同样的问题，我使用 Javascript 解决了它，如下所示：

[每次按下按钮时添加一个新的文本字段](https://stackoverflow.com/questions/11268232/add-a-new-text-field-every-time-a-button-is-pressed/15213197#15213197)

# java - 在 JSF 表中显示对象的数组列表

> ID：15525025
> 
> 赞同：1
> 
> 时间：2013-03-20T13:31:40.907
> 
> 标签：java, jsf, jpa, jsf-2

我想将对象的 ArrayList 显示到 JSF 表中：

我创建了这个对象：

```
public List<TData> td = new ArrayList<TData>();

    public class TData {

        private long id;
        private String key;
        private String language;
        private String translation;

        public TData(){};

        public TData(long id, String key, String language, String translation) {
            // super();
            this.id = id;
            this.key = key;
            this.language = language;
            this.translation = translation;
        }

        public long getId() {
            return id;
        }

        public void setId(long id) {
            this.id = id;
        }

        public String getKey() {
            return key;
        }

        public void setKey(String key) {
            this.key = key;
        }

        public String getLanguage() {
            return language;
        }

        public void setLanguage(String language) {
            this.language = language;
        }

        public String getTranslation() {
            return translation;
        }

        public void setTranslation(String translation) {
            this.translation = translation;
        }

    }

    public List<TData> getDataObj() {
        return td;
    }

    @PostConstruct
    public void loadData() {

        String query = "SELECT c FROM TranslationTestEntitie c";
        List<Object> result =  dao.jpqlQuery(query, 1, 0);

        for(int i =0; i < result.size(); i++){
            TranslationTestEntitie test = (TranslationTestEntitie) result.get(i);
            td.add((TData) result.get(i));

        }

    } 
```

然后我使用这个数据表来显示结果；

```
<h:dataTable value="#{languageBeanTest.dataObj}" var="o">

        <h:column>
            <f:facet name="header">Id</f:facet>
                    #{o.id}
                </h:column>

        <h:column>
            <f:facet name="header">key</f:facet>
                    #{o.key}
                </h:column>

        <h:column>
            <f:facet name="header">language</f:facet>
                    #{o.language}
                </h:column>

        <h:column>
            <f:facet name="header">translation</f:facet>
                    #{o.translation}
                </h:column>

    </h:dataTable> 
```

我收到此错误：

```
java.lang.ClassCastException: callflow.cfdbc_common.entities.TranslationTestEntitie cannot be cast to callflow.ccadmin.beans.LanguageBeanTest$TData 
```

我从数据库中得到了对象列表的结果。如何将这些对象显示到 JSF 页面中？

PS这是实体的源代码

```
@Entity
@Table(name = "Translations")
public class TranslationTestEntitie extends AbstractEntityWithId {

    private static final long serialVersionUID = 2029240552230401080L;

    @Column(name = "id", insertable=false, updatable=false)
    private long id;
    @Column(name = "key", insertable=false, updatable=false)
    private String key;
    @Column(name = "language", insertable=false, updatable=false)

    private String language;
    @Column(name = "translation", insertable=false, updatable=false)
    private String translation;

    public TranslationTestEntitie() {
    }

    // Getters and setters
    public Long getId() {
        return id;
    }

    //@Transient    Field will not be saved in database
    public void setId(long id) {
        this.id = id;
    }

    public String getKey() {
        return key;
    }

    public void setKey(String key) {
        this.key = key;
    }

    public String getLanguage() {
        return language;
    }

    public void setLanguage(String language) {
        this.language = language;
    }

    public String getTranslation() {
        return translation;
    }

    public void setTranslation(String translation) {
        this.translation = translation;
    }

} 
```

我想 JPA 返回的 Object 将与 TData 相同，因为我具有相同的对象属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:35:29.103

显然，返回的对象是 TranslationTestEntity 类型，而不是 TData。您需要编写代码来将 TranslationTestEntity 转换为 TData 类型的对象。

```
TranslationTestEntitie test = (TranslationTestEntitie) result.get(i);
TData newTData = new TData(test.getId(), test.getKey(), test.getLanguage(),  test.getTranslation());
td.add(newTData); 
```

如果它仍然具有相同的字段，为什么不能使用 TranslationTestEntitie 本身？

```
List<TranslationTestEntitie> td=  new ArrayList<TranslationTestEntitie>();

for(int i =0; i < result.size(); i++){
        TranslationTestEntitie test = (TranslationTestEntitie) result.get(i);
        td.add(test);
} 
```

# oracle - 采用 null 的 case 语句

> ID：15525033
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:31:57.980
> 
> 标签：oracle, oracle-sqldeveloper

所以我现在有我的查询，它读取 HD0/HD1/HD2/HD3/HD4 但遇到了一个问题，如果我有一个空值，我会得到重复的 // ei。hd0///hd3/ 任何想法

```
Hd0
||'/'||
Case
When table.hd1 <>00
then HD1_ABR 
end
||'/'||
case
When hd2 <>00
then HD2_name
end
||'/'||
case
When hd3 <>00
then HD3_name
end
||'/'||
case
When hd4 <>00
then HD4_name
end) as Name, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:48:57.420

如果我理解正确，您可以将您的案例更改为

```
rtrim(Hd0
||'/'||
Case
When table.hd1 <>00
then HD1_ABR ||'/'
end
||
case
When hd2 <>00
then HD2_name||'/'
end
||
case
When hd3 <>00
then HD3_name||'/'
end
||
case
When hd4 <>00
then HD4_name
end, '/') as Name, 
```

# python - 对每对字段执行计算

> ID：15525040
> 
> 赞同：1
> 
> 时间：2013-03-20T13:32:31.170
> 
> 标签：python, perl, bash, awk, calculated-columns

对于遗传分析，我正在尝试将 2-probability file (10gb) 转换为 3-probabilities file 。基本上我必须在每 2 个其他实例之后插入第三列，这第三列可以计算为 1-（第一个实例 + 第二个实例）。你会怎么做？

从：

```
0.800   0.200   0.000   0.200   0.800   0.200
0.000   0.900   0.000   0.900   0.000   0.900
0.900   0.010   0.900   0.010   0.770   0.010 
```

（该文件包含许多列和行）

到

```
0.800   0.200   0.000   0.000   0.200   0.800   0.800   0.200   0.000
0.000   0.900   0.100   0.000   0.900   0.100   0.000   0.900   0.100
0.900   0.010   0.090   0.900   0.010   0.090   0.770   0.010   0.220 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:45:10.513

在`awk`：

```
awk '{for(i=1;i<=NF;i+=2)$(i+1)=$(i+1)OFS sprintf("%.3f",1-$(i+1)-$i)}1' OFS='\t' file
0.800   0.200   0.000   0.000   0.200   0.800   0.800   0.200   0.000
0.000   0.900   0.100   0.000   0.900   0.100   0.000   0.900   0.100
0.900   0.010   0.090   0.900   0.010   0.090   0.770   0.010   0.220 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:47:30.543

```
#! /usr/bin/env perl

use strict;
use warnings;

*ARGV = *DATA;  # for demo only

while (<>) {
  chomp;

  my @fields = split;
  my @output;
  while (@fields >= 2) {
    my($x,$y) = splice @fields, 0, 2;

    push @output, $x, $y, sprintf "%.3f", 1.0 - ($x + $y);
  }

  print join(" " x 3, @output, @fields), "\n";
}

__DATA__
0.800   0.200   0.000   0.200   0.800   0.200
0.000   0.900   0.000   0.900   0.000   0.900
0.900   0.010   0.900   0.010   0.770   0.010 
```

输出：

```
0.800 0.200 0.000 0.000 0.200 0.800 0.800 0.200 0.000
0.000 0.900 0.100 0.000 0.900 0.100 0.000 0.900 0.100
0.900 0.010 0.090 0.900 0.010 0.090 0.770 0.010 0.220
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:56:14.467

```
#!/usr/bin/perl
use strict; use warnings;

my $template = join "\t", ("%.3f")x3;

while (<>) {
  my @fields = split;
  @fields % 2 == 0 or die "Uneven number of fields";
  while (my ($x, $y) = splice @fields, 0, 2) {
    printf $template, $x, $y, 1 - ($x + $y);
    print  @fields ? "\t" : "\n";
  }
} 
```

用法：`perl script.pl <input >output-file`。

# c++ - streambuf 获取流位置

> ID：15525041
> 
> 赞同：5
> 
> 时间：2013-03-20T13:32:33.803
> 
> 标签：c++, stl, stream, streambuf

我将 C++`streambuf`类用于编译器项目，需要一种方便的方法来获取流中的当前位置。

有两个成员函数`streambuf::pubseekpos`和一个`streambuf::pubseekoff`, 来修改位置，我对没有`streambuf::pubgetpos`成员函数（或类似的东西）来阅读它感到很困惑。

似乎有两种可能的解决方法：

1.  我可以将当​​前位置保存在一个单独的变量中，并在我从流中读取字符时手动修改它。

2.  我可以调用`streambuf::pubseekoff(0, ios_base::cur)`，它返回新的流位置。

对于这样一个微不足道的任务，第二个选项似乎有用但效率低下且不美观。有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:55:37.370

`streambuf`没有用于读取位置的单独界面。但是，`istream`并`ostream`做（`tellg`和`tellp`分别）。

有趣的是，流[使用您的选项 2](http://en.cppreference.com/w/cpp/io/basic_istream/tellg)来获取他们的位置，所以这很好。

# ios - 来自客户的带有 .p12 的 iOS 临时分发

> ID：15525042
> 
> 赞同：2
> 
> 时间：2013-03-20T13:32:34.113
> 
> 标签：ios, xcode, provisioning-profile

我有一个应用程序开发并使用我们公司的资料和分发证书。我刚刚从我们将要分发到的公司收到了 .p12，并且正在尝试使用他们的证书重建应用程序。但是，当我选择“存档”时，我收到

“未找到包含任何钥匙串签名证书的未过期配置文件”

我相信我在这里遗漏了一些东西，但谷歌和我无法弄清楚。我需要包含该证书的新配置文件吗？如果是这样，我该如何上传.p12？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:45:13.903

检查你的钥匙串，分发证书有钥匙。如果没有，则安装正确的证书。

![在此处输入图像描述](../Images/f68316c76a29ffeed44b6947b5ad5ecb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:03:04.240

使用 p12，您可以让您的计算机为外部公司发布版本，但您现在需要的是与该应用程序关联的配置文件（如果您有应用程序内购买或推送通知，它将是特定的，否则它将是默认开发人员个人资料）和那个 .p12

![在此处输入图像描述](../Images/77513ba70af923b5ec6ae00b001b640d.png)

# php - Franchise 字体中缺少磅符号导致其损坏

> ID：15525043
> 
> 赞同：1
> 
> 时间：2013-03-20T13:32:35.823
> 
> 标签：php, wordpress, fonts, webfonts

我有一个 Wordpress 构建的博客，我正在为 .entry-title H1s使用字体 Franchise ( [http://www.dafont.com/franchise.font )。](http://www.dafont.com/franchise.font)

Franchise 没有英镑符号，因此每当用户在标题中添加一个英镑符号时，它就会中断。它显示 Franchise 直到井号，然后剩余的字符在 Arial 中出现。有人知道我能做些什么来解决这个问题吗？我不介意英镑符号使用不同的字体，但我不确定如何让它忽略它并让剩余的字符在英镑符号之后仍然在特许经营中？

可以在此处找到该问题的示例 - [http://www.legalcheek.com/page/2/?s=%C2%A3](http://www.legalcheek.com/page/2/?s=%C2%A3)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:10:12.900

您可能想要更改字体

> font-family 属性指定字体列表，从最高优先级到最低优先级。字体选择不会简单地停留在用户系统上列表中命名的第一个字体上。相反，字体选择是一次一个字符完成的，因此如果可用字体没有可以显示所需字符的字形，则尝试稍后可用的字体。但是，这在 Internet Explorer 中不起作用。

参考：[https ://developer.mozilla.org/en-US/docs/CSS/font-family](https://developer.mozilla.org/en-US/docs/CSS/font-family)

# php - DOMDocument::loadXML() 用于部分 XML

> ID：15525045
> 
> 赞同：1
> 
> 时间：2013-03-20T13:32:38.120
> 
> 标签：php, xml, templates, domdocument, xml-declaration

像这些简单的 XML 模板：

结构.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<document>
<book>first book</book>
<book>second book</book>
((other_books))
</document> 
```

book_element.xml ：

```
<book>((name))</book> 
```

而这个测试：

```
 <?php
Header("Content-type: text/xml; charset=UTF-8");
class XMLTemplate extends DOMDocument
{
    private $_content_storage;
    private $_filepath;
    private $_tags;

    public function XMLTemplate( $sFilePath )
    {
        if( !file_exists( $sFilePath ) ) throw new Exception("file not found");

        $this->_filepath = $sFilePath;
        $this->_tags = [];
        $this->_content_storage = file_get_contents( $this->_filepath );
    }

    public function Get()
    {
        $this->merge();
        $this->loadXML( $this->_content_storage );
        return $this->saveXML();
    }

    public function SetTag( $sTagName, $sReplacement )
    {
        $this->_tags[ $sTagName ] = $sReplacement;  
    }

    private function merge()
    {
        foreach( $this->_tags as $k=>$v)
        {
            $this->_content_storage = preg_replace(
                "/\({2}". $k ."\){2}/i",
                $v,
                $this->_content_storage
            );
        }
        $this->_content_storage = preg_replace(
            "/\({2}[a-z0-9_\-]+\){2}/i",
            "",
            $this->_content_storage
        );
    }
}

$aBooks = [
    "troisième livre",
    "quatrième livre"   
];

$Books = "";

foreach( $aBooks as $bookName )
{
    $XMLBook = new XMLTemplate("book_element.xml");
    $XMLBook->SetTag( "name", $bookName );
    $Books .= $XMLBook->Get();
}

$XMLTemplate = new XMLTemplate("test.xml");

$XMLTemplate->SetTag("other_books", $Books);
echo $XMLTemplate->Get();
?> 
```

给我错误：

> 警告：DOMDocument::loadXML(): XML 声明只允许在实体中文档的开头，行：5

因为 loadXML() 方法会自动将声明添加到内容中，但我需要像上面一样在最终模板中注入部分 xml。如何禁用这种烦人的自动添加并让我使用我的声明？或者另一个想法来解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:19:46.577

如果您不喜欢该错误并且想要在没有 XML 声明的情况下保存要合并的文档，只需保存文档元素而不是整个文档。

请参阅以下示例代码 ( [online-demo](http://eval.in/13155) ) 中的两种变体：

```
$doc = new DOMDocument();
$doc->loadXML('<root><child/></root>');

echo "The whole doc:\n\n";
echo $doc->saveXML();

echo "\n\nThe root element only:\n\n";
echo $doc->saveXML($doc->documentElement); 
```

输出如下：

```
The whole doc:

<?xml version="1.0"?>
<root><child/></root>

The root element only:

<root><child/></root> 
```

这可能已经对您有所帮助。此外，还有一个用于 libxml 的常量，据说可用于控制是否输出 XML 声明。但我从未使用过它：

> `LIBXML_NOXMLDECL`（整数）
> 
> 保存文档时删除 XML 声明
> 
> ***注意：***仅在 Libxml >= 2.6.21 中可用

*来自： http:* [//php.net/libxml.constants](http://php.net/libxml.constants)

有关其他选项，请参阅链接，您将来可能希望使用其中一个。

# pharo - 禁止令牌解析额外的空格

> ID：15525049
> 
> 赞同：2
> 
> 时间：2013-03-20T13:32:50.463
> 
> 标签：pharo, petitparser

现在的想法是这样的：在Java中`octalIntegerLiteral`我有一个规则

```
octalNumeral, (integerTypeSuffix optional) 
```

但我想得到一个数字作为令牌，所以我使用了：

```
octalNumeral javaToken, (integerTypeSuffix optional) 
```

问题是它开始解析字符串，例如：`0777 L`. 这可以很容易解决，还是我应该处理它是子类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:12:35.693

似乎同时`#javaToken`做两件事：修剪空白和创建标记。将此行为拆分为两个单独的解析器，您可以单独使用它们。`#javaToken`为了保持旧代码正常工作，您可以从新的基本解析器重新定义为：

```
PPParser>>#javaToken
    ^ self javaPlainToken javaWhitespace 
```

然后您的号码解析器将如下所示：

```
(octalNumber javaPlainToken , integerTypeSuffix optional) javaWhitespace 
```

# c++ - 具有多态性的“可怕钻石”

> ID：15525052
> 
> 赞同：1
> 
> 时间：2013-03-20T13:32:51.727
> 
> 标签：c++, virtual

我有以下代码：

```
class Base
{
    public:
        virtual void doSomething() = 0;
};

class BaseImpl : public virtual Base
{
    public:
       virtual void doSomething() {
       // something
       }
};

class BaseDerived: public virtual Base
{
    public:
       virtual void doSomething2() = 0;
};

class BaseDerivedImpl: public BaseImpl, public BaseDerived
{
    public:
       virtual void doSomething2(){
       // sonething2
       }
}; 
```

然后我有

```
Base* b = new BaseImpl();
b->doSomething();          // fatal error at this line (not in the method, but in the method invocation) 
```

问题是它甚至没有进入函数。

使用这种层次结构有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:53:13.360

由于OP忽略了评论，让我在这里回答这个问题：

> 使用这种层次结构有问题吗？

不，没有什么是错的。这是解决“可怕的钻石”问题的标准方法（实际上并不是那么可怕）。

然而，钻石在这个例子中甚至没有发挥作用：

```
Base* b = new BaseImpl(); 
```

`BaseImpl`直接派生自，`Base`因此您具有标准的单继承。您的代码的行为与 if 相同，`BaseDerived`并且`BaseDerivedImpl`根本没有定义。您可以将它们注释掉，应用程序仍然会崩溃。

然后你调用`doSomething`这个实例，它就会崩溃。的实现`doSomething`如下：

```
// something 
```

因此，我的结论是会`// something`导致崩溃，但如果没有看到该方法的实现，就无法判断。

# node.js - 如何使用 node-curl 发布数据？

> ID：15525057
> 
> 赞同：4
> 
> 时间：2013-03-20T13:32:59.020
> 
> 标签：node.js, post, curl, npm

我对使用 node.js 的 LINUX 非常陌生。这只是我的第二天。我将[node-curl](https://github.com/jiangmiao/node-curl)用于 curl 请求。在下面的链接中，我找到了 Get 请求的示例。谁能给我一个使用 node-curl 的 Post 请求示例。

[https://github.com/jiangmiao/node-curl/blob/master/examples/low-level.js](https://github.com/jiangmiao/node-curl/blob/master/examples/low-level.js)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:07:26.340

您需要使用`setopt`才能为 cURL 请求指定 POST 选项。您应该首先考虑的选项是`CURLOPT_POST`和`CURLOPT_POSTFIELDS`。从链接自的[libcurl 文档](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)`node-curl`：

> **CURLOPT_POST**
> 
> 设置为 1 的参数告诉库执行常规 HTTP 发布。这也将使库使用“Content-Type: application/x-www-form-urlencoded”标头。（这是迄今为止最常用的 POST 方法）。
> 
> 使用 CURLOPT_POSTFIELDS 或 CURLOPT_COPYPOSTFIELDS 选项之一指定要发布的数据，使用 CURLOPT_POSTFIELDSIZE 或 CURLOPT_POSTFIELDSIZE_LARGE 设置数据大小。
> 
> 或者，您可以使用 CURLOPT_READFUNCTION 和 CURLOPT_READDATA 选项向 POST 提供数据，但是您必须确保不要将 CURLOPT_POSTFIELDS 设置为除 NULL 之外的任何值。当通过回调提供数据时，您必须使用分块传输编码传输它，或者您必须使用 CURLOPT_POSTFIELDSIZE 或 CURLOPT_POSTFIELDSIZE_LARGE 选项设置数据的大小。要启用分块编码，您只需传入适当的 Transfer-Encoding 标头，请参阅 post-callback.c 示例。
> 
> **CURLOPT_POSTFIELDS**
> 
> ... [this] 应该是在 HTTP POST 操作中发布的完整数据。您必须确保按照您希望服务器接收数据的方式格式化数据。libcurl 不会为您转换或编码它。大多数 Web 服务器将假定此数据是 url 编码的。
> 
> 这个 POST 是一个普通的 application/x-www-form-urlencoded 类型（使用该选项时 libcurl 会默认设置该 Content-Type），这是 HTML 表单最常用的一种。另请参阅 CURLOPT_POST。使用 CURLOPT_POSTFIELDS 意味着 CURLOPT_POST。
> 
> 如果要执行零字节 POST，则需要将 CURLOPT_POSTFIELDSIZE 显式设置为零，因为只需将 CURLOPT_POSTFIELDS 设置为 NULL 或 "" 就可以有效地禁用指定字符串的发送。libcurl 将改为假设您将使用读取回调发送 POST 数据！

* * *

有了这些信息，您应该能够将以下选项添加到低级示例以使其发出 POST 请求：

```
var fieldsStr = '{}';
curl.setopt('CURLOPT_POST', 1); // true?
curl.setopt('CURLOPT_POSTFIELDS', fieldsStr); 
```

您将需要调整 的内容`fieldsStr`以匹配服务器期望的格式。根据文档，您可能还需要对数据进行 url 编码 - 这应该像`encodeURIComponent`根据[这篇文章](https://stackoverflow.com/questions/6554039/how-do-i-url-encode-something-in-node-js)使用一样简单。

# .net - 在 BLL 中组织对象

> ID：15525065
> 
> 赞同：0
> 
> 时间：2013-03-20T13:33:16.860
> 
> 标签：.net, interface, bll

在业务对象层中组织对象的最常用方法是什么？

例如，我使用了一个采用这种方法的 BLL：

*   公用文件夹 - 包含静态实用程序文件
*   接口文件夹 - 所有接口
*   Dal - 数据访问对象
*   服务 - 访问服务的对象
*   项目根 - 包含业务对象

我还看到了业务对象中混合的接口，以及在模型和库文件夹中有对象的 BLL 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:36:08.380

不过，最好将它们安排在逻辑组中。您的业​​务逻辑可能有许多部分，并且与特定部分相关的文件应该在同一部分中。

例如折扣，你可能有一个可以计算折扣的服务，同时你可能有产生折扣信息的对象。最好将它们全部放在一个文件夹中。

# php - PDO 或 MSSQL_connect - 在 PHP 5.3 中

> ID：15525067
> 
> 赞同：0
> 
> 时间：2013-03-20T13:33:25.810
> 
> 标签：php, sql, pdo

我正在开发一个由 MYSQL 和 Linux Php 5.3 运行的网站——我需要使用它以及远程 MSSQL 数据库。

我读到 PDO 这是连接到 MSSQL 的方式。虽然似乎有 PDO 和更熟悉的 mssql_connect 解决方案。我对 PDO 或 mssql_connect 几乎没有经验。

在 PHP 文档中，我发现：

Mssql_connect - 熟悉的表达式：

```
 <?php
 // Create a link to MSSQL
 $link = mssql_connect('KALLESPC\SQLEXPRESS', 'sa', 'phpfi');

 // Select the database 'php'
 mssql_select_db('php', $link);
 ?> 
```

PDO - 我以前没有尝试过 - 需要驱动程序！（？）：

```
 <?php
 /* Connect to an ODBC database using driver invocation */
 $dsn = 'mysql:dbname=testdb;host=127.0.0.1';
 $user = 'dbuser';
 $password = 'dbpass';

 try {
 $dbh = new PDO($dsn, $user, $password);
 } catch (PDOException $e) {
 echo 'Connection failed: ' . $e->getMessage();
 }
 ?> 
```

那么选择什么以及为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:19:08.013

MSSQL 与 PDO 的连接：

```
$db_handle = new PDO("sqlsrv:server=$server; Database=$database", $user, $pass); 
```

MySQL 与 PDO 的连接：

```
$db_handle = new PDO("mysql:host=$server;dbname=$database", $user, $pass); 
```

没看出来你的困惑是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:38:36.137

虽然我还没有尝试过。所以我不能确定它是否有效。PHP 手册说使用 pdo::dblib [http://php.net/manual/en/ref.pdo-dblib.php](http://php.net/manual/en/ref.pdo-dblib.php)

Microsoft 确实有自己的驱动程序集，但您必须在 Windows 机器上才能使用它们。[http://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

# java - Java 创建不可删除的文件

> ID：15525070
> 
> 赞同：1
> 
> 时间：2013-03-20T13:33:42.233
> 
> 标签：java, file

有什么方法可以在java中创建一个不能删除的文件。我用谷歌搜索了它并找到了涉及 cmd 的进程。但是，我需要一种可以在任何平台上完成的纯“java”方式。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:16:45.593

谢谢您的帮助。我终于做对了。我使用以下代码拒绝用户访问

```
public static void main() throws IOException
{
    Path file = Paths.get("c:/b.txt");
    AclFileAttributeView aclAttr = Files.getFileAttributeView(file, AclFileAttributeView.class);
    //System.out.println();

    UserPrincipalLookupService upls = file.getFileSystem().getUserPrincipalLookupService();
    UserPrincipal user = upls.lookupPrincipalByName(System.getProperty("user.name"));
    AclEntry.Builder builder = AclEntry.newBuilder();       
    builder.setPermissions(EnumSet.of(AclEntryPermission.APPEND_DATA, AclEntryPermission.DELETE, AclEntryPermission.DELETE_CHILD, AclEntryPermission.EXECUTE, AclEntryPermission.READ_ACL, AclEntryPermission.READ_ATTRIBUTES, AclEntryPermission.READ_DATA, AclEntryPermission.READ_NAMED_ATTRS, AclEntryPermission.SYNCHRONIZE, AclEntryPermission.WRITE_ACL, AclEntryPermission.WRITE_ATTRIBUTES, AclEntryPermission.WRITE_DATA, AclEntryPermission.WRITE_NAMED_ATTRS, AclEntryPermission.WRITE_OWNER));
    builder.setPrincipal(user);
    builder.setType(AclEntryType.DENY);
    aclAttr.setAcl(Collections.singletonList(builder.build()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:47:17.020

如果您想创建一个不会被意外覆盖的文件，请查看对此的各种答案：[如何以编程方式更改文件权限？](https://stackoverflow.com/questions/664432/how-do-i-programmatically-change-file-permissions)

如果您想创建一个当前程序根本无法删除的文件（但特权程序可以），则可以通过在父目录上适当地设置权限，或者可能使用 SELinux 强制访问控制技巧。

如果您想创建一个真正不可删除的文件，那么您就不走运了。我不知道有任何操作系统支持创建永远无法删除的文件。这将是一个“反特征”。

* * *

我也同意@Teifi 的评论。在用户的机器上创建一个永远无法删除的文件是不可接受的……除非由系统管理员完成，或者得到系统管理员的授权。我也会称任何这样做的软件都是“恶意的”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:39:10.563

尝试方法 setPosixFilePermissions() 并将所有用户类的权限设置为只读。参考这个 - [http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setPosixFilePermissions%28java.nio.file.Path,%20java.util.Set%29](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setPosixFilePermissions%28java.nio.file.Path,%20java.util.Set%29)

# excel - 如何在 Google 地球中创建 kml 以对地址进行地理编码？

> ID：15525071
> 
> 赞同：2
> 
> 时间：2013-03-20T13:33:42.590
> 
> 标签：excel, geocoding, kml, google-earth, vba

如果您有一个包含地址信息的 .csv 文件，您可以将其拖放到 Google 地球（以下称为 GE）上，然后会出现一个向导，以便您可以分配字段，然后 GE 将开始对位置进行地理编码并为每个地址创建点（纬度和经度）。然后，您可以将地理编码文件导出为 kml 并获取每个点的纬度/经度。但是，此过程有 2500 行的限制。

我听说可以创建一个 kml（或者可能是一个 xml）文件并将其拉入 GE 以启动地理编码过程，并且这种方法没有行限制。有人可以帮我弄清楚如何做到这一点吗？我尝试了以下代码，它确实成功导入 GE，但没有创建任何点。

我知道一些谷歌地图 API 可以做类似的事情，并且每天有 100,000 行的行限制用于商业用途，但我真的很想让这个过程与 GE 合作。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
    <name>GEImport1.csv</name>
    <Schema name="GEImport1" id="S_GEImport1_S">
        <SimpleField type="string" name="Adress"><displayName>&lt;b&gt;Adress&lt;/b&gt;</displayName>
</SimpleField>
    </Schema>
    <Style id="hlightPointStyle">
        <IconStyle>
            <Icon>
                <href>http://maps.google.com/mapfiles/kml/shapes/placemark_circle_highlight.png</href>
            </Icon>
        </IconStyle>
        <BalloonStyle>
            <text><![CDATA[<table border="0">
  <tr><td><b>Adress</b></td><td>$[GEImport1/Adress]</td></tr>
</table>
]]></text>
        </BalloonStyle>
    </Style>
    <Style id="normPointStyle">
        <IconStyle>
            <Icon>
                <href>http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png</href>
            </Icon>
        </IconStyle>
        <BalloonStyle>
            <text><![CDATA[<table border="0">
  <tr><td><b>Adress</b></td><td>$[GEImport1/Adress]</td></tr>
</table>
]]></text>
        </BalloonStyle>
    </Style>
    <StyleMap id="pointStyleMap">
        <Pair>
            <key>normal</key>
            <styleUrl>#normPointStyle</styleUrl>
        </Pair>
        <Pair>
            <key>highlight</key>
            <styleUrl>#hlightPointStyle</styleUrl>
        </Pair>
    </StyleMap>
    <Folder id="layer 0">
        <name>GEImport1</name>
        <visibility>0</visibility>
        <Placemark>
            <visibility>0</visibility>
            <styleUrl>#pointStyleMap</styleUrl>
            <ExtendedData>
                <SchemaData schemaUrl="#S_GEImport1_S">
                    <SimpleData name="Adress">6212 GATUN CT Port ST Lucie, FL</SimpleData>
                </SchemaData>
            </ExtendedData>
        </Placemark>
        <Placemark>
            <visibility>0</visibility>
            <styleUrl>#pointStyleMap</styleUrl>
            <ExtendedData>
                <SchemaData schemaUrl="#S_GEImport1_S">
                    <SimpleData name="Adress">6213 DIANA CT Port ST Lucie, FL</SimpleData>
                </SchemaData>
            </ExtendedData>
        </Placemark>
        <Placemark>
            <visibility>0</visibility>
            <styleUrl>#pointStyleMap</styleUrl>
            <ExtendedData>
                <SchemaData schemaUrl="#S_GEImport1_S">
                    <SimpleData name="Adress">6213 DUKE CIR Port ST Lucie, FL</SimpleData>
                </SchemaData>
            </ExtendedData>
        </Placemark>
    </Folder>
</Document>
</kml> 
```

**编辑：最终结果**
JasonM1 的解决方案效果很好！我最终得到了以下格式的 kml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
    <Document>
<name>AddressImport</name>
    <Style id="normPointStyle">
        <IconStyle>
            <Icon>
                <href>http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png</href>
            </Icon>
        </IconStyle>
        <BalloonStyle>
            <text><![CDATA[<table border="0">
          <tr><td><b>Address</b></td><td>$[address]</td></tr>
          </table>]]>
      </text>
        </BalloonStyle>
    </Style>
    <StyleMap id="pointStyleMap">
        <Pair>
            <key>normal</key>
            <styleUrl>#normPointStyle</styleUrl>
        </Pair>
    </StyleMap>
    <Folder id="layer 0">
        <name>AddressImport</name>
        <visibility>1</visibility>
        <Placemark>
            <visibility>1</visibility>
            <address>9994 CHADWICK DR Port ST Lucie, FL</address>
            <styleUrl>#pointStyleMap</styleUrl>
        </Placemark>
        <Placemark>
            <visibility>1</visibility>
            <address>9995 AMBROSE WAY Port ST Lucie, FL</address>
            <styleUrl>#pointStyleMap</styleUrl>
        </Placemark>
        <Placemark>
            <visibility>1</visibility>
            <address>9997 STONEGATE DR Port ST Lucie, FL</address>
            <styleUrl>#pointStyleMap</styleUrl>
        </Placemark>
    </Folder>
</Document>
</kml> 
```

此外，我使用以下 Excel VBA 代码自动创建 kml 文件：

```
Sub CreateCSV_FSO()
    Dim objFSO
    Dim objTF
    Dim ws As Worksheet
    Dim lRow As Long
    Dim lCol As Long
    Dim strTmp As String
    Dim lFnum As Long
    Dim sFilePath As String
    Dim i As Long
    Dim x As Integer 'used to represent the column that contains the address
    sFilePath = ActiveWorkbook.Path & "\AddressImport.kml"

    Set objFSO = CreateObject("scripting.filesystemobject")
    Set objTF = objFSO.createtextfile(sFilePath, True, False)

    'Header information
    objTF.writeline "<?xml version=""1.0"" encoding=""UTF-8""?>"
    objTF.writeline "<kml xmlns=""http://www.opengis.net/kml/2.2"" xmlns:gx=""http://www.google.com/kml/ext/2.2"" xmlns:kml=""http://www.opengis.net/kml/2.2"" xmlns:atom=""http://www.w3.org/2005/Atom"">"
    objTF.writeline "    <Document>"
    objTF.writeline "<name>AddressImport</name>"
    objTF.writeline "    <Style id=""normPointStyle"">"
    objTF.writeline "        <IconStyle>"
    objTF.writeline "            <Icon>"
    objTF.writeline "                <href>http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png</href>"
    objTF.writeline "            </Icon>"
    objTF.writeline "        </IconStyle>"
    objTF.writeline "        <BalloonStyle>"
    objTF.writeline "            <text><![CDATA[<table border=""0"">"
    objTF.writeline "          <tr><td><b>Address</b></td><td>$[address]</td></tr>"
    objTF.writeline "          </table>]]>"
    objTF.writeline "      </text>"
    objTF.writeline "        </BalloonStyle>"
    objTF.writeline "    </Style>"
    objTF.writeline "    <StyleMap id=""pointStyleMap"">"
    objTF.writeline "        <Pair>"
    objTF.writeline "            <key>normal</key>"
    objTF.writeline "            <styleUrl>#normPointStyle</styleUrl>"
    objTF.writeline "        </Pair>"
    objTF.writeline "    </StyleMap>"
    objTF.writeline "    <Folder id=""layer 0"">"
    objTF.writeline "        <name>AddressImport</name>"
    objTF.writeline "        <visibility>1</visibility>"

    'input the number representative of the column that contains the address
    x = 7 'a=1,b=2,c=3,d=4.....etc.
    i = 2
    While Cells(i, x) <> ""

        strTmp = ""
        strTmp = Cells(i, x)
        strTmp = Replace(strTmp, "&", "and")

        objTF.writeline "        <Placemark>"
        objTF.writeline "            <visibility>1</visibility>"
        objTF.writeline "            <address>" & strTmp & "</address>"
        objTF.writeline "            <styleUrl>#pointStyleMap</styleUrl>"
        objTF.writeline "        </Placemark>"

        strTmp = Cells(i, x)
        i = i + 1
    Wend

    objTF.writeline "    </Folder>"
    objTF.writeline "</Document>"
    objTF.writeline "</kml>"

    objTF.Close
    Set objFSO = Nothing
    MsgBox "Done!", vbOKOnly

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:04:09.073

使用 KML 中的 < [address](https://developers.google.com/kml/documentation/kmlreference#address) > 元素，Google 地球会在其中自动为您对地址进行地理编码。

```
<Placemark>
    <visibility>0</visibility>
    <address>6213 DUKE CIR Port ST Lucie, FL</address>
    <styleUrl>#pointStyleMap</styleUrl>             
</Placemark> 
```

您可以使用`<address>`标签来指定点的位置，而不是使用纬度和经度坐标。（但是，如果`<Point>`提供了 a ，则它优先于`<address>`。）

此外，您不再需要 Schema 和*Adress* SchemaData 元素，而是可以直接内联BalloonStyle 文本中的*$[address]字段：*

```
<BalloonStyle>
      <text><![CDATA[<table border="0">
          <tr><td><b>Adress</b></td><td>$[address]</td></tr>
          </table>]]>
      </text>
</BalloonStyle> 
```

在 Google Earth 中加载 KML 文件并保存后，您会注意到 Google Earth 会将其更改为以下内容并填写坐标：

```
<Placemark>
    <address>6213 DUKE CIR Port ST Lucie, FL</address>
    <styleUrl>#pointStyleMap</styleUrl>
    <MultiGeometry>
        <Point>
            <coordinates>-80.36086,27.366379,0</coordinates>
        </Point>
        <LinearRing>
            <coordinates>
                -80.36086,27.366379,0 -80.36086,27.366379,0 -80.36086,27.366379,0 -80.36086,27.366379,0 -80.36086,27.366379,0 
            </coordinates>
        </LinearRing>
    </MultiGeometry>
</Placemark> 
```

# ruby-on-rails - 在 Mac(OS X 10.8.3) 上安装 rails 时出现 LoadError

> ID：15525081
> 
> 赞同：2
> 
> 时间：2013-03-20T13:34:22.703
> 
> 标签：ruby-on-rails, rubygems

开始学习 Rails 但在 Mac 上安装 Rails 时遇到问题。我目前的版本是 OS X 10.8.3，问题如下：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:230:in `activate': can't activate rack (~> 1.4.5, runtime) for ["actionpack-3.2.13", "railties-3.2.13"], already activated rack-1.5.2 for ["rack-ssl-1.3.3", "railties-3.2.13"] (Gem::LoadError)
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:246:in `activate'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `each'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `activate'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:246:in `activate'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `each'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `activate'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:1056:in `gem'
    from /usr/bin/rails:18 
```

如何解决这个问题并正确运行rails？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:05:19.207

您将安装不支持 Ruby 1.8 的 Rails 3.2.13。

“Rails 3.2 是最后一个支持 Ruby 1.8 的版本。不支持 Ruby 1.8.6 及更早版本，1.9.1 版本也不支持。” -- [http://rubyonrails.org/download](http://rubyonrails.org/download)

我建议你花点时间学习 RVM，而不是直接解决这个问题。然后使用 RVM 安装正确版本的 Ruby 和 Rails。

# javascript - 使用 Jquery 更新 div 字符串内容

> ID：15525085
> 
> 赞同：2
> 
> 时间：2013-03-20T13:34:33.530
> 
> 标签：javascript, jquery

我有一个只存在于内存中的 div，它可能包含零个或多个图像。我正在尝试使用 JQuery find 更改 thouse 图像的 src，问题是即使我管理器设置每个 img 的 src，div 的内容仍然保持不变。

```
 function contentWithReplacedImages(divContent){
    console.log(divContent);//I get <div class='editable singleColumnElement'><p>asdasd ad a dasd ad<br/></p><p><img/> <br/></p></div>
    $(divContent).find("img").each(function(index){
        $(this).attr({
            'src':"imgSrc"
        });
        console.log($(this).attr('src'));//I get "imgSrc"
    });

    console.log(divContent); //divContent remains unchanged.

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:43:48.367

您已更改`$(divContent)`（jQuery 对象），但最后您正在检查原始内容`divContent`（html 字符串）。

由于`divContent`它实际上不是 DOM 的一部分，因此您不会将更改保存在任何地方。

尝试设置一个新变量：

```
function contentWithReplacedImages(divContent) {
     var $temp = $(divContent); // jQuery object
     $temp.find("img").each(function (i,el) {
         $(el).attr({
             'src': "imgSrc.jpg"
         }); // $temp is modified in place
     });    
     console.log($temp.html()); // displays the modified string 
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:43:34.460

这会创建一个新元素...

```
$(divContent) 
```

然后，您可以在该新元素中找到图像并更改 src 属性。你在任何时候都没有改变`divContent`自己。

尝试这个...

```
function contentWithReplacedImages(divContent){
    console.log(divContent);
    var $divContent = $(divContent);
    $divContent.find("img").each(function(index){
        $(this).attr({
            'src':"imgSrc"
        });
        console.log($(this).attr('src'));
    });
    divContent = $divContent.html();
    console.log(divContent);
}

contentWithReplacedImages("<div class='editable singleColumnElement'><p>asdasd ad a dasd ad<br/></p><p><img/> <br/></p></div>"); 
```

# iphone - UITableViewCell 可扩展崩溃

> ID：15525089
> 
> 赞同：0
> 
> 时间：2013-03-20T13:34:52.423
> 
> 标签：iphone, uitableview, ios6

我面临一个关于可扩展 tableviewcell 的问题。当我尝试展开 tableviewcell 时它崩溃了。我不明白应用程序在哪里崩溃。请建议我一些解决方案。请帮我。

我的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   if (appDelegate.array_proj == (id)[NSNull null])
        return 0;
    else
        return [appDelegate.array_proj count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if ([expandedSections containsIndex:section])
    {
        if ([appDelegate.array_task count]==0)
        {
            return 0;
        }
        else
        {
            NSLog(@"array task count: %d",[appDelegate.array_task count]);
            return [appDelegate.array_task count];
        }
    }
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell ==nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.backgroundColor = [UIColor clearColor];
    cell.textLabel.textColor = [UIColor colorWithRed:53.0/255 green:53.0/255 blue:53.0/255 alpha:1.0];

    UIImageView *backgroundView = [[UIImageView alloc] initWithFrame:CGRectZero];
    cell.backgroundView = backgroundView;
    backgroundView.image = [UIImage imageNamed:@"prjctcell_bg.png"];

    if (!indexPath.row)
    {
        objePro = [appDelegate.array_proj objectAtIndex:indexPath.section];

        cell.textLabel.text = objePro.projctname;
        appDelegate.intForPid=objePro.pojctid;

        if ([expandedSections containsIndex:indexPath.section])
        {
            cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor blackColor] type:DTCustomColoredAccessoryTypeUp];
        }
        else
        {
            cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor blackColor] type:DTCustomColoredAccessoryTypeDown];
        }
    }
    else
    {
        if (appDelegate.array_task != (id)[NSNull null])
        {
            objePro = [appDelegate.array_proj objectAtIndex:appDelegate.storeAppDelegateIndex];
            objeTask = [appDelegate.array_task objectAtIndex:indexPath.section];

            cell.textLabel.text = objeTask.taskname;
            cell.backgroundView = nil;
            cell.accessoryView = nil;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
    }
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canCollapseSection:(NSInteger)section
{
    return YES;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    objePro = [appDelegate.array_proj objectAtIndex:indexPath.section];
    appDelegate.intForPid=objePro.pojctid;

   [appDelegate selectTask:appDelegate.intForPid];

    if (!indexPath.row)
    {
        [tblView beginUpdates];

        //only first row toggles expand/collapse
        [tblView deselectRowAtIndexPath:indexPath animated:YES];

        NSInteger sections = indexPath.section;
        BOOL currentlyExpanded = [expandedSections containsIndex:sections];
        NSInteger rows;

        NSMutableArray *tmpArray = [NSMutableArray array];
        if (currentlyExpanded)
        {
            rows = [self tableView:tblView numberOfRowsInSection:sections];
            [expandedSections removeIndex:sections];
        }
        else
        {
            [expandedSections addIndex:sections];
            rows = [self tableView:tblView numberOfRowsInSection:sections];
        }
        for (int i=1; i<rows; i++)
        {
            NSIndexPath *tmpIndexPath = [NSIndexPath indexPathForRow:i inSection:sections];
            [tmpArray addObject:tmpIndexPath];
        }
        UITableViewCell *cell = [tblView cellForRowAtIndexPath:indexPath];

        if (currentlyExpanded)
        {

            [tblView deleteRowsAtIndexPaths:tmpArray withRowAnimation:UITableViewRowAnimationTop];
            cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor blackColor] type:DTCustomColoredAccessoryTypeDown];
        }
        else
        {
            [tblView insertRowsAtIndexPaths:tmpArray withRowAnimation:UITableViewRowAnimationTop];
            cell.accessoryView =  [DTCustomColoredAccessory accessoryWithColor:[UIColor blackColor] type:DTCustomColoredAccessoryTypeUp];
        }
        [tblView endUpdates];
    }
} 
```

它给出了错误：-[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:1070 2013-03-20 19:14:00.102 Daily Achiever[2886:c07] 中的断言失败***由于应用程序终止未捕获的异常“NSInternalInconsistencyException”，原因：“无效更新：第 1 节中的行数无效。更新后现有节中包含的行数 (3) 必须等于更新前该节中包含的行数(1)，加上或减去从该节插入或删除的行数（0 插入，0 删除），加上或减去移入或移出该节的行数（0 移入，0 移出）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:57:24.060

您的问题出在以下代码行中：

```
 [tblView deleteRowsAtIndexPaths:tmpArray withRowAnimation:UITableViewRowAnimationTop]; 
```

和

```
 [tblView insertRowsAtIndexPaths:tmpArray withRowAnimation:UITableViewRowAnimationTop]; 
```

您发布的崩溃是由于第一个。在这些行中，您尝试从表中插入/删除行，但您的`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`方法没有相应地改变。

每当您从表中添加/删除单元格时，您似乎想要从`appDelegate.array_task`数组中添加/删除项目（因为这是您确定行数的数组）。

作为旁注，该行：

```
 if ([appDelegate.array_task count]==0) { 
    return 0;
 } 
```

没有做任何事情，因为你有这意味着无论如何`else return [appDelegate.array_task count]`都会返回 0 。`[appDelegate.array_task count]==0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:38:14.140

添加部分时使用此代码

```
NSArray *insertIndexPaths = [NSArray arrayWithObjects:
                             [NSIndexPath indexPathForRow:2 inSection:0],
                             [NSIndexPath indexPathForRow:3 inSection:0],
                             nil]; 
```

用于插入行

```
[tableView insertRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationRight]; 
```

如果你要添加两个部分

```
 [tableView insertSections:[NSIndexSet indexSetWithIndex:indexPath.section + 1] withRowAnimation:UITableViewRowAnimationAutomatic];
   [tableView insertSections:[NSIndexSet indexSetWithIndex:indexPath.section + 2] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

同样的方式删除部分

```
[tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:YES];
    [tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section - 1] withRowAnimation:YES]; 
```

行删除

```
 [tableView deleteRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationRight]; 
```

# android - 片段内的 ViewPager 无法显示所有片段，拖曳片段工作且一个片段为空白

> ID：15525095
> 
> 赞同：1
> 
> 时间：2013-03-20T13:35:05.593
> 
> 标签：android, android-fragments, android-viewpager, fragmenttransaction

```
 @Override
    public int getCount() {
        return mFragments.size();
    }

    @Override
    public Fragment getItem(int arg0) {
        return mFragments.get(arg0);
    }
}

    InfoPageFragment(ArrayList<String> entities, int type) {
        Log.i("Entity:", String.valueOf(type));
        this.entities = entities;
        infotype = type;
        keys = new ArrayList<String>(entities.size());
    }

    private ArrayList<Map<String, Object>> getData() {
        String[] info = null;
        Map<String, Object> infomap = null;
        ArrayList<Map<String, Object>> listviewdata = new ArrayList<Map<String, Object>>();
        Log.i("Data", String.valueOf(infotype));
        for (int i = 0; i < entities.size(); i++) {
            info = entities.get(i).split(String.valueOf('\u0216'));
            if (info.length != 3) {
                continue;
            }
            infomap = new LinkedHashMap<String, Object>();
            infomap.put("txt_infodata", info[1]);
            infomap.put("txt_infodate", info[2]);
            listviewdata.add(infomap);
            keys.add(info[0]);
        }
        return listviewdata;
    }

    private void initListView(View view) {
        ListView lst_info = (ListView) view.findViewById(R.id.lst_infolist);
        lst_info.setAdapter(new SimpleAdapter(view.getContext(), getData(),
                R.layout.listitem_info, new String[] { "txt_infodata",
                        "txt_infodate" }, new int[] { R.id.txt_infodata,
                        R.id.txt_infodate }));
        lst_info.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                String dir = null;
                switch (infotype) {
                case 0:
                    dir = mApp.getFile(mApp.Pag_News);
                    break;
                case 1:
                    dir = mApp.getFile(mApp.Pag_Rule);
                    break;
                case 2:
                    dir = mApp.getFile(mApp.Pag_Download);
                    break;
                }
                Intent it = new Intent(Intent.ACTION_VIEW, Uri.parse(dir
                        + keys.get(arg2)));
                arg1.getContext().startActivity(it);
            }

        });
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_newslist, container,
                false);
        initListView(view);
        return view;
    }
}

    public void presentFragment(int id) {
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    Fragment fragment = initFragment(id);
    ft.replace(R.id.fragment_container, fragment);
    ft.commit();
    preSelected = id;
} 
```

结构是 Fragment[ViewPager[3 Fragment]] 当我第一次启动 viewpager（里面有 3 个片段）时，它可以完美地工作，但是当我将另一个片段替换为它并替换它时，片段 1 和片段 3可以复习，但是片段 2 是空白的！！！我是android开发的新手，为这个问题疯狂了很长时间！！！

我是安卓开发的新手

# file - JSF primefaces 编辑器加载文件

> ID：15525099
> 
> 赞同：0
> 
> 时间：2013-03-20T13:35:13.117
> 
> 标签：file, jsf, primefaces, editor

我正在使用 jsf primefaces 编辑器，我想为它加载一个文本文件的值。 [http://www.primefaces.org/showcase/ui/editor.jsf](http://www.primefaces.org/showcase/ui/editor.jsf)

请问我可以知道这是否可能？

# c# - 使用 SharePoint Web 服务进行身份验证

> ID：15525102
> 
> 赞同：2
> 
> 时间：2013-03-20T13:35:19.913
> 
> 标签：c#, asp.net, web-services, sharepoint

我正在尝试从 asp.net 应用程序调用 GetListItems。

```
System.Net.NetworkCredential userDefined = new System.Net.NetworkCredential("username","password","domain");
XmlDocument xmlDoc = new System.Xml.XmlDocument();
XmlNode ndQuery = xmlDoc.CreateNode(XmlNodeType.Element, "Query", "");
XmlNode ndViewFields = xmlDoc.CreateNode(XmlNodeType.Element, "ViewFields", "");
XmlNode ndQueryOptions = xmlDoc.CreateNode(XmlNodeType.Element, "QueryOptions", "");
ndQueryOptions.InnerXml = "";
ndViewFields.InnerXml = "";

WebReference.Lists lists = new WebReference.Lists();

lists.Credentials = userDefined;
XmlNode responseNode = lists.GetListItems("My List Name", null, ndQuery, ndViewFields, null, ndQueryOptions, null); 
```

我收到一个错误：

```
the request failed with http status 401 unauthorized 
```

我搜索了 SO 并尝试了我发现的内容：

```
WebReference.UseDefaultCredentials = true; 
```

和

```
WebReference.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

和

```
<identity impersonate="true"  userName="mydomain\username" password="password" /> 
```

我尝试过的所有操作都会收到相同的错误消息。有人知道我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:24:17.997

如果您的共享点使用浏览器身份验证，则需要预身份验证

```
svc.PreAuthenticate = true;
svc.Credentials = new System.Net.NetworkCredential(username, password); 
```

[http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/ac38e0da-c828-48b8-aa3f-fb22f30ce581](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/ac38e0da-c828-48b8-aa3f-fb22f30ce581)

如果它的形式是 auth，或者 NTLM 以外的任何东西，那么会有更多的混乱 - 虽然到目前为止，我总是用 403 回应

# html - CSS 条件语句

> ID：15525103
> 
> 赞同：1
> 
> 时间：2013-03-20T13:35:26.390
> 
> 标签：html, css

我知道这对于 css 条件格式是可能的：

```
<!--[if !IE]>
   link/css style goes here
<![endif]--> 
```

但是那里有可能有一个 OR 语句吗？如：

```
<!--[if !IE or !Opera]>
    link/css style goes here
<![endif]--> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:40:33.730

条件注释是 IE 特有的功能，Opera 等会忽略它。

它们确实支持“或”，但是以这样的管道形式；

```
<!-- [if (IE 6)|(IE 7)]>
    this is only seen by IE 6 and 7
<![endif]--> 
```

[来源：msdn](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

*编辑*

正如所评论的，在可能的情况下编写跨浏览器兼容的 CSS 确实更可取，并且仅将条件注释用作最后的手段。为了让生活更轻松，请务必避免使用[怪癖模式](http://en.wikipedia.org/wiki/Quirks_mode)并使用特征检测而不是用户代理嗅探。查看对后者有帮助的[modernizr库。](http://modernizr.com/)

# api - 有没有办法利用 Hadoop 工具来管理对外部源的并行 REST API 调用？

> ID：15525107
> 
> 赞同：0
> 
> 时间：2013-03-20T13:35:29.657
> 
> 标签：api, graph, hadoop, amazon-sqs

我正在编写创建大型图形数据库的软件。该软件需要访问数十个不同的 REST API，总共有数百万个请求。然后数据将由 Hadoop 集群处理。这些 API 中的每一个都有速率限制，该限制因请求/秒、每个窗口、每天和每个用户（通常通过 OAuth）而异。

有人对我如何使用 Map 函数或其他 Hadoop 生态系统工具来管理这些查询有任何建议吗？目标是利用 Hadoop 中的并行处理。

由于速率限制不同，在等待第一个限制重置时切换到不同的 API 查询通常是有意义的。例如，一个 API 调用在图中创建节点，另一个 API 调用丰富了该节点的数据。我可以让系统退出并丰富新节点的数据，同时等待第一个 API 限制重置。

我曾尝试在 EC2 上使用 SQS 队列来管理各种 API 限制和状态（为每个 API 调用创建一个队列），但发现它非常慢。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:49:40.953

看起来我的场景的最佳选择是使用 Storm，或者特别是 Trident 抽象。它为我的工作负载管理和流程管理提供了最大的灵活性

# batch-file - 从 pentaho 中的批处理文件运行多个作业

> ID：15525110
> 
> 赞同：1
> 
> 时间：2013-03-20T13:35:47.817
> 
> 标签：batch-file, pentaho, jobs, kettle

我想问一下除了IDE之外是否有更有效的方式来运行多个转换（70个转换）？以 IDE 的方式来做这件事是可以的，但是不得不单击所有选项卡和隐藏的选项卡确实变得乏味。

我所做的是尝试使用 pan.bat 命令并将其放入 bat 文件中。bat 文件如下所示：

```
cd <to dest of kitchen.bat>

pan.bat <mytransformation 1>
pan.bat <mytransformation 2>
pan.bat <mytransformation 3>
pan.bat <mytransformation 4> 
```

但它只适用于第一次转换，然后退出。我做错了什么还是我必须从脚本运行多个转换

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:09:26.020

这就是工作的用途。创建一个（或多个）作业来运行这些转换并使用厨房而不是平底锅执行。

如果您愿意，也可以动态执行 KTR。即执行给定文件夹等中的所有 KTR。

通过作业运行也应该稍微快一些，因为您不是每次都启动和停止整个 VM。（这是惊人的昂贵）

此外，通过作业运行可以让您控制错误处理、并行化和排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:45:08.287

从另一个调用批处理文件时，您必须使用该`call`命令，否则（如您所见）它将控制权永久转移到新的批处理文件。

```
call pan.bat <mytransformation 1>
call pan.bat <mytransformation 2>
call pan.bat <mytransformation 3>
call pan.bat <mytransformation 4> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:56:50.067

试试这个：

```
pan.bat "mytransformation 1" 
```

.. 或者：

```
start /b "" "pan.bat" "mytransformation 1" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T10:34:38.763

您可以将所有转换组合为一个或 2 个作业，然后调用该作业，这是一种在单个作业中调用所有转换的高效方式。

默认情况下，在 pentaho 中，作业是运行顺序模式，如果你想运行并行模式，你可以很容易地

# android - getSupportFragmentManager().findFragmentById() 返回 null

> ID：15525111
> 
> 赞同：28
> 
> 时间：2013-03-20T13:35:50.023
> 
> 标签：android, android-fragments

我正在尝试在 android 中实现片段通信，就像 android 指南[http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity中的那样](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

但是我的应用程序崩溃了，因为 getSupportFragmentManager().findFragmentById() 返回 null。我的实施有什么问题。

代码如下：

该程序只是通过从第一个fragmnet单击按钮将输入文本从一个片段发送到另一个片段textView区域。我有一个activity_main.xml和两个片段布局（两个单独的xml文件而不是activity_main.xml中的一部分）

Frag1.java

```
public class Frag1 extends Fragment {
public Frag1(){

}

buttonClickListener buttonListener;

@Override
public void onAttach(Activity activity) {
super.onAttach(activity);
try {
    buttonListener = (buttonClickListener) getActivity();
} catch (ClassCastException e) {
    throw new ClassCastException(activity.toString() + " must implement OnButtonPressListener");
}
}

View myFragmentView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    myFragmentView = inflater.inflate(R.layout.frag1, container, false);

    //SetValue Button
    Button setValueButton = (Button) myFragmentView.findViewById(R.id.setValueButton);
    setValueButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            buttonListener.onButtonPressed("Message received");
        }
    });

    return myFragmentView;
} 
```

}

Frag2.java

```
public class Frag2 extends Fragment {

View myFragmentView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
 myFragmentView = inflater.inflate(R.layout.frag2, container, false);
    return myFragmentView;
}

void setMessage(String msg){
    TextView txt=(TextView)myFragmentView.findViewById(R.id.textView1);
    txt.setText(msg);
}
} 
```

buttonClickListener.java

```
public interface buttonClickListener {
public void onButtonPressed(String msg);
} 
```

MainActivity.java

```
public class MainActivity extends FragmentActivity implements
    ActionBar.TabListener, buttonClickListener {
SectionsPagerAdapter mSectionsPagerAdapter;
@Override
public void onButtonPressed(String msg) {
    // TODO Auto-generated method stub
    Frag2 fragmentObj=(Frag2) getSupportFragmentManager().findFragmentById(R.layout.frag2);

    fragmentObj.setMessage(msg);
} 
```

请告诉我我哪里出错了？

编辑：我正在使用由 Android Plug-in eclipse IDE 生成的模板创建片段。所以片段是使用**android.support.v4.app.Fragment创建的**

```
@Override
    public Fragment getItem(int position) {
        Fragment fragment = null;
        switch(position)
        {
        case 0:
            return new Frag1();
        case 1: 
            return new Frag2();
        }
        return fragment;
    } 
```

代码库保留在这里以供参考 [https://skydrive.live.com/redir?resid=D37E0F56FEC9B499!259](https://skydrive.live.com/redir?resid=D37E0F56FEC9B499!259)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-04-29T13:02:59.400

试试这个它对我[有用如何使用 ViewPager 将 Google Maps V2 放在片段上](https://stackoverflow.com/questions/19353255/how-to-put-google-maps-v2-on-a-fragment-using-viewpager)

```
<fragment
            android:id="@+id/map"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            class="com.google.android.gms.maps.SupportMapFragment" />

GoogleMap mGoogleMap = ((SupportMapFragment) getChildFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-20T14:03:34.813

您应该通过调用添加片段**Frag2**

```
getSupportFragmentManager().beginTransaction().add(R.id.frag2_view, new Frag2(), "tag").commit(); 
```

在您的**MainActivity**中，`R.id.frag2_view`main_layout 中定义的布局在哪里。

要获得该片段，您应该调用

```
Frag2 obj = (Frag2)getSupportFragmentManager().findFragmentById(R.id.frag2_view); 
```

传递用于在 main_layout 中添加片段的布局**ID 。**

希望能帮助到你。

编辑：

由于您使用 ViewPager，因此您应该使用**R.id.pager**作为 ID。我刚刚尝试了您的示例并且它有效。

```
Frag2 fragmentObj=(Frag2) getSupportFragmentManager().findFragmentById(R.id.pager); 
```

编辑2：

尽管它有效，但我并不认为这是正确的方法，因为 R.id.pager 它来自 ViewPager 并且你找不到**frag4**或**frag5**。

请忽略我的回答。我不确定如何使用 ViewPager 来做到这一点，抱歉。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-27T00:36:22.840

我遇到了类似的问题，这是解决方案。要获取对 viewpager 中正确片段的引用，只需调用：

```
getSupportFragmentManager().findFragmentByTag(tag); 
```

您可以使用以下语法构建它的标记参数：`"android:switcher:pager_id:index"`，其中`pager_id`是 XML 布局中 ViewPager 的 id ，索引是您的片段在`ViewPager`从零开始的位置。在此处查看原始回复： [https ://stackoverflow.com/a/7393477/2423274](https://stackoverflow.com/a/7393477/2423274)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-05T22:58:32.430

为这个问题找到了**正确的解决方案。**

希望更多的人看到这一点。

```
Frag2 fragmentObj=(Frag2) mSectionsPagerAdapter.getItem(2); 
```

您应该使用您的适配器（您填充片段的地方）作为获取片段参考的来源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-07T15:23:58.027

我用它从片段适配器中获取子片段......

```
Fragment parent = MainActivity.this.getSupportFragmentManager().findFragmentById(R.id.main_container);
        if (parent instanceof PagerFragment) {
            // do something with parent
            Fragment child = ((PagerFragment) f).adapter.getItem(childPosition);
        } 
```

# nginx - Nginx上游负载平衡：自动重试502？

> ID：15525112
> 
> 赞同：4
> 
> 时间：2013-03-20T13:35:53.207
> 
> 标签：nginx, reverse-proxy

如果我对多个上游反向代理进行 nginx 负载平衡，并且其中一个出现故障，我的用户会收到 502，还是 nginx 会负责重新路由到启动的上游？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:40:02.570

从[文档](http://wiki.nginx.org/HttpUpstreamModule#upstream)

> 如果尝试与服务器一起工作时发生错误，则请求将被传输到以下服务器，然后直到服务器的所有工作人员都没有被测试。如果成功的应答没有从所有服务器获取成功，则返回给客户端最后一个服务器的工作结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-10T04:27:36.960

具体你想要

```
proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504; 
```

我把我的放在“http”块中，所以它是我的几个服务的默认设置。不幸的是 500-504 不是 nginx 的默认值。

# javascript - 如何使用正则表达式验证用户名

> ID：15525114
> 
> 赞同：-3
> 
> 时间：2013-03-20T13:35:54.777
> 
> 标签：javascript, regex, validation

我想`user_name`使用带有 Javascript 函数的 REGEX 验证该字段我希望`user_name`填写以下要求

*   `user_name`必须以字母开头
*   `user_name`can 只能包含字母、数字、下划线和句点 (.)
*   `user_name`不能包含空格
*   `user_name`不能超过 25 个字符

如何根据上述要求制作 REGEX 表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:40:37.603

你可以试试：

```
 /^[a-z][a-z0-9_\.]{0,24}$/i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:38:21.533

试试这个正则表达式：

```
/^[a-z][\w\.]{0,24}$/i 
```

*   `\w`火柴`[a-z0-9_]`
*   该`/i`标志使匹配不区分大小写

请不要错过阅读[此评论](https://stackoverflow.com/questions/15525114/how-can-i-validate-user-name-using-regex/15525168#comment21990554_15525114)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:45:47.720

用于`[A-z]`第一个字符。它涵盖了大写和小写字母。

您可以使用`[A-z0-9_.]{24}`其他 24 个字符。

`/[A-z][A-z0-9_\.]{24}/`应该这样做。

# ios - 如何检测任意字符串中的电子邮件地址

> ID：15525117
> 
> 赞同：1
> 
> 时间：2013-03-20T13:36:01.483
> 
> 标签：ios, email, nsdatadetector

我正在使用以下代码来检测字符串中的电子邮件。除了处理具有纯数字前缀的电子邮件（例如“536264846@gmail.com”）外，它工作正常。是否有可能克服苹果的这个错误？任何帮助将不胜感激！

```
NSString *string = @"536264846@gmail.com";
NSError *error = NULL;
NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeLink error:&error];
NSArray *matches = [detector matchesInString:string
                                     options:0
                                       range:NSMakeRange(0, [string length])];    
for (NSTextCheckingResult *match in matches) {
    if ([match.URL.scheme isEqualToString:@"mailto"]) {
        NSString *email = [match.URL.absoluteString substringFromIndex:match.URL.scheme.length + 1];
        NSLog(@"email :%@",email);

    }else{
        NSLog(@"[match URL] :%@",[match URL]);
    }

} 
```

**编辑**：日志结果是：[匹配 URL]：[http ://gmail.com](http://gmail.com)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:32:11.830

我过去做了什么：

*   对输入进行标记，例如，使用空格分隔标记（因为大多数其他常见的分隔符在电子邮件中可能是有效的）。但是，如果没有锚定正则表达式，这可能不是必需的 - 但不确定如果没有“^”和“$”锚（我添加到网站上显示的内容）它将如何工作。

*   请记住，地址可能采用“字符串”的形式，也可能只是地址

*   在每个标记中，查找“@”，因为它可能是您拥有的电子邮件地址的最佳指示

*   [通过此电子邮件检测器比较站点](http://fightingforalostcause.net/misc/2006/compare-email-regex.php)上显示的正则表达式运行令牌（我在测试中发现，截至 2013 年 3 月 21[日标记为 #1](http://svn.php.net/viewvc/php/php-src/trunk/ext/filter/logical_filters.c?view=markup)的那个效果最好）

我所做的是将正则表达式放在一个文本文件中，所以我不需要转义它：

> ^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,}) (?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@) (?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01- \x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F])) *\x22))(?:.(?: (?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\ x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))* \x22))) *@(?:(?:(? !.* [^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+) *.){1,126 }){1,}(?:(?:[az][a-z0-9]* )|(?:(?:xn--)[a-z0-9]+))(?:-[a -z0-9]+) *)|(?:[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]) {1,4}){7})|(?:(?!(?:.*[a-f0-9][:]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){ 0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?))) |(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)| (?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9 ]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0 ,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{ 2})|(?:[1-9]?[0-9]))(?:.(?:(?:25[0-5])|(?:2[0-4][0- 9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))]))$

定义了一个 ivar：

```
NSRegularExpression *reg 
```

创建正则表达式：

```
NSString *fullPath = [[NSBundle mainBundle] pathForResource:@"EMailRegExp" ofType:@"txt"];
NSString *pattern = [NSString stringWithContentsOfFile:fullPath encoding:NSUTF8StringEncoding error:NULL];
NSError *error = nil;
reg = [NSRegularExpression regularExpressionWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:&error];
assert(reg && !error); 
```

然后写了一个方法来做比较：

```
- (BOOL)isValidEmail:(NSString *)string
{
    NSTextCheckingResult *match = [reg firstMatchInString:string options:0 range:NSMakeRange(0, [string length])];
    return match ? YES : NO;
} 
```

编辑：我已经把上面的变成了[github上的一个项目](https://github.com/dhoerl/EmailAddressFinder)

EDIT2：对于一个替代的、不那么严格但更快的方法，请参阅这个[问题的评论部分](https://stackoverflow.com/a/15551458/1633251)

# c# - 空图像鼠标点击

> ID：15525120
> 
> 赞同：1
> 
> 时间：2013-03-20T13:36:11.667
> 
> 标签：c#, wpf, image, mouseclick-event

我正在使用 WPF 在 C# 的网格布局中放置一个图像。我想为它设置一个鼠标单击事件，但如果未设置图像源，则永远不会触发该事件。有没有办法改变它？无论是否设置了图像源，我都希望事件触发。

```
<Image Focusable="True" IsEnabled="True" Grid.Row="1" Grid.Column="0"
MouseLeftButtonDown="Image_MouseLeftButtonDown" MouseDown="Image_MouseDown" Stretch="Fill" /> 
```

除非设置了属性 Source，否则永远不会触发鼠标事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:53:28.417

将您`Image`放入 a`Grid`并在 Grid 上注册事件

```
<Grid Grid.Row="1" Background="White" Grid.Column="0" MouseLeftButtonDown="Image_MouseLeftButtonDown" MouseDown="Image_MouseDown">
  <Image Focusable="True" IsEnabled="True" Stretch="Fill" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:35:58.640

```
<Grid>
    <Image Height="150" HorizontalAlignment="Left" Margin="218,18,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="200" Source="/WpfApplication1;component/Images/2012-12-14-1535%20%281%29.jpg" MouseLeftButtonDown="image1_MouseLeftButtonDown" />
    <Rectangle Height="150" HorizontalAlignment="Left" Margin="218,18,0,0" Name="rectangle1" Stroke="Black" VerticalAlignment="Top" Width="200" />
 </Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:04:54.840

```
 <Grid>
 <Image Height="150" HorizontalAlignment="Left" Margin="218,18,0,0" Name="image1"   Stretch="Fill" VerticalAlignment="Top" Width="200" Source="path" MouseLeftButtonDown="image1_MouseLeftButtonDown" />
 </Grid> 
```

# html - 连续 4 张图片，如何在每张图片下居中特定文本？

> ID：15525123
> 
> 赞同：0
> 
> 时间：2013-03-20T13:36:13.573
> 
> 标签：html, css, image, text, center

我对CSS一无所知。这个问题（[如何直接在图像下方对齐文本？](https://stackoverflow.com/questions/1225130/how-can-i-align-text-directly-beneath-an-image)）几乎正是我所需要的。我有 4 张图片，我希望它们并排放置，并带有与该图片下的每个特定图片对应的文本。我从来没有使用过 CSS，所以我在 HTML 中设置了图像，直到使用我发布的问题链接中的说明，每个图像的文本都不在该图像下，但图像没有连续对齐直接对面，这是我不明白该怎么做。

这是我的编码：

```
<div class="container">
    <div class="img-with-text">
        <img src="images/CarlCall.png" border="0" alt="Carl Call"   width="177" height="229" style="border: 2px solid black;" />
        <p>Carl Call<br />(931)268-2040<br /><a href="mailto:carlcall@centergrovecoc.com">Email Carl Call</a>  </p>
    </div>
    <div class="img-with-text">
        <img src="images/sg.png" border="0" alt="Sjon Gentry" width="177" height="229" style="border: 2px solid black;" />
        <p>Sjon Gentry<br />(931)268-3273<br /><a href="mailto:sjongentry@centergrovecoc.com">Email Sjon Gentry</a></p>
    </div>
    <div class="img-with-text">
        <img src="images/jm.png" border="0" alt="John Mabery" width="177" height="229" style="border: 2px solid black;" />
        <p>John Mabery<br />(931)268-0651<br /><a href="mailto:johnmabery@centergrovecoc.com">Email John Mabery</a> </p>
    </div>
    <div class="img-with-text">
        <img src="images/tr.png" border="0" alt="Ted Ragland" width="177" height="229" style="border: 2px solid black;" />
        <p>Ted Ragland<br />(931)268-9387</p>
    </div>
</div>
<p> </p> 
```

任何帮助将不胜感激！我们教会的这个网站有点让我去做，但我还没有学习 CSS，所以我迷失了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:51:12.427

尝试这个：

```
 <style type="text/css">
    .img-with-text { float: left; text-align: center}
    </style>

<!-- Your code -->
    <div class="container">
    <div class="img-with-text"><img src="images/CarlCall.png" border="0" alt="Carl Call"   width="177" height="229" style="border: 2px solid black;" />
    <p>Carl Call<br />(931)268-2040<br /><a href="mailto:carlcall@centergrovecoc.com">Email Carl Call</a>  </p>
    </div>
    <div class="img-with-text"><img src="images/sg.png" border="0" alt="Sjon Gentry" width="177" height="229" style="border: 2px solid black;" />
    <p>Sjon Gentry<br />(931)268-3273<br /><a href="mailto:sjongentry@centergrovecoc.com">Email Sjon Gentry</a></p>
    </div>
    <div class="img-with-text"><img src="images/jm.png" border="0" alt="John Mabery" width="177" height="229" style="border: 2px solid black;" />
    <p>John Mabery<br />(931)268-0651<br /><a href="mailto:johnmabery@centergrovecoc.com">Email John Mabery</a> </p>
    </div>
    <div class="img-with-text"><img src="images/tr.png" border="0" alt="Ted Ragland" width="177" height="229" style="border: 2px solid black;" />
    <p>Ted Ragland<br />(931)268-9387</p>
    </div>
    </div>

<!-- End of your code -->
    <p style="clear: both">Something more here </p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:43:46.837

试试 -[**演示**](http://jsfiddle.net/EuaMk/)

```
.img-with-text {
    float: left;
    margin-right: 1em;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:44:01.523

尝试`text-align: center`在您的 css 中设置 class `.img-with-text`，并可能将图像显示为块。像这样的东西：

```
.img-with-text { float: left; text-align: center; }
.img-with-text img { display: block; } 
```

# javascript - 使用 Javascript 处理具有多个复选框的表单

> ID：15525130
> 
> 赞同：0
> 
> 时间：2013-03-20T13:36:32.437
> 
> 标签：javascript, html, forms, loops, checkbox

基本上，我有一个包含多个选项的表单，每个选项都会过滤结果，直到你有一个特定的结果，它使用 javascript 来做到这一点。

我的问题是我在表单中有一个带有多个复选框的部分，我想要做的是检查每个复选框是否被选中并在它们被选中时显示一些数据。但是可以检查不止一个。

我**不能**使用任何类型的框架，所以请不要建议，我**不想要任何大块代码（只有解释清楚的代码）**，我需要向我解释这个，然后我可以编写自己的代码（这样我可以学习），我只是不知道该怎么做。

所需的 Javascript 的任何解释都会有所帮助。

编辑：这是我到目前为止的代码：

```
function jobs() {
    var shownursing = document.getElementById('nursing-block');

    if (document.getElementsByName("nursing")[0].checked) {
        console.log("hi")
        shownursing.style.display = 'block';
        return true;
    } else { 
        console.log("no")
        shownursing.style.display = 'none';
        return false;
    }
}

jobs(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:27:50.140

基本上，您希望在选中复选框时产生一些功能，对吗？您最好的选择是编写一个函数（或一组函数）以在选中复选框时调用。该函数将决定响应复选框显示什么。

我认为您需要与已有代码的主要区别在于您需要将函数调用附加到被选中的复选框的操作上。要在不使用 jQuery 或任何其他框架的情况下以这种方式附加函数，您可以在复选框的 html 中包含 onClick 属性：

```
<input type="checkbox" id="ch1" onclick="jobs();" /> 
```

或者，如果您希望在单击按钮时执行该功能，则可以将其附加到该`onclick`按钮的 。或者，如果您希望它在页面加载时执行，您可以通过在函数外部包含以下代码来执行此操作：

```
window.onload=jobs; 
```

您还可以结合使用上述方法，在页面加载和单击复选框或按钮时执行该功能。

在中，您可以通过访问 DOM 元素并获取属性`jobs()`来检查复选框的值。`.checked`请注意，为每个复选框设置一个单独的 id 并以这种方式进行检查是更好的做法（从长远来看，与使用由以下结果生成的数组相比，您的错误要少得多`document.getElementsByName()`：

```
if (document.getElementById("ch1").checked)
{
   //take actions related to this checkbox being checked
} 
```

由于您有多个复选框要检查，因此您将有几个这样的 if 语句（假设它们是独立的）。如果需要将它们作为一个单元进行处理（即选中两个复选框所做的事情与单独选中每个复选框所做的组合不同），那么您可以在这些`if`语句中设置一些控制变量，然后在end 控制最终执行。

# ios - 如何为推送通知安装 ssl 证书？

> ID：15525133
> 
> 赞同：0
> 
> 时间：2013-03-20T13:36:47.567
> 
> 标签：ios, certificate, push-notification

我的 ios 应用程序推送通知系统存在问题：它在开发中完美运行，但在生产中无法运行。现在我有一个疑问。在这里[https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html) 我读到 pem 证书必须“安装”在服务器上。

在开发时，我只将开发 .pem 复制到发送推送通知的 php 脚本的同一目录中，并让脚本使用它。在生产中（我的应用程序在应用程序商店中运行）我必须以某种方式在服务器上“安装”分发 .pem？

注意：为了验证一切都以正确的方式进行，我这样做：

```
 $fp = stream_socket_client('ssl://gateway.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);
 if(!$fp){
     print "All ok!";
 } 
```

和

```
 $msg = chr(0) . pack("n",32) . pack('H*', str_replace(' ', '', $deviceToken)) . pack        ("n",strlen($payload)) . $payload;
    print "sending message :" . $payload . "n to device:".$deviceToken."</br>";
    $result=fwrite($fp, $msg);
    if (!$result)
        print "All ok!":
} 
```

即使在生产中，两者也没有出现任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:26:49.020

您只需在服务器上复制您的 ssl 证书并从脚本中引用它即可安装它。

我的问题是，在包含我的设备令牌（将通知发送到）的数据库中，我的开发设备生成了一些设备令牌。如果您将开发令牌发送到生产苹果服务器，它会终止连接，避免您在同一连接上发送任何其他通知。非常感谢苹果服务器！

# c# - 在 GridView 中使用对子对象的引用

> ID：15525134
> 
> 赞同：0
> 
> 时间：2013-03-20T13:36:47.730
> 
> 标签：c#, asp.net, gridview

我的 ASPX 页面上有一个 GridView 控件。在我尝试从我的对象列表中获取某个属性之前，它工作正常。

我在列表中插入这样的对象：

```
var test = new List<DataTest>
{
    new DataTest
        {
            Name = "A name",
            Bla = new Bla()
        }
} 
```

该类`Bla`如下所示：

```
public class Bla
{
    public string Blaat = "aaa";
} 
```

但似乎我无法`Blaat`在 GridView 中获取该属性，如下所示：

```
<asp:BoundField DataField="Bla.Blaat" HeaderText="Name" /> 
```

但是，我可以`Name`毫无问题地输出：

```
<asp:BoundField DataField="Name" HeaderText="Name" /> 
```

这是否意味着我只能使用*直接*在对象中定义的`DataTest`属性？所以没有引用*任何子*对象，比如`Bla.Blaat`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:43:47.870

您需要使用 TemplateField：

```
<asp:TemplateField HeaderText="Name" SortExpression="Name">
        <ItemTemplate>
            <asp:Label runat="server" ID="lblName" Text='<%# Server.HtmlEncode(Convert.ToString(Eval("Bla.Blaat"))) %>' />
        </ItemTemplate>
</asp:TemplateField> 
```

您还可以在代码隐藏中设置值。

# python - python monty < python 等为什么？

> ID：15525140
> 
> 赞同：-4
> 
> 时间：2013-03-20T13:37:06.233
> 
> 标签：python

```
>>> "Monty" < "Python" 
True 
>>> "Z" < "a" 
True 
>>> "Monty" < "Montague" 
False 
```

这有什么规矩？是字母的数量还是什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:37:45.610

它是按字典顺序排序的。所以“a”<“b”。

如果您使用该`ord()`函数，您可以看到“Z”的值低于“a”

```
>>> ord('Z')
90
>>> ord('a')
97 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:41:02.327

Python 字符串、元组和列表使用[Lexicographical order](http://en.wikipedia.org/wiki/Lexicographical_order)进行比较。

元组示例：

```
>>> (1,2) < (2,1)
True
>>> (1,2) < (1,2,-5)
True 
```

想法很简单：逐个元素比较（对于字符串，逐个字符），直到有差异或一个更短。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:12:54.203

Be careful not to confuse this order with the locale sensitive collation sequence. For example:

```
>>> import locale
>>> locale.strcoll("Z","a")
-1
>>> "Z" < "a"
True 
```

Probably what you expect, `locale.strcoll` returns -1 if the first string is less than the second, +1 if the first string is greater than the second (0 if they are equal).

But:

```
>>> locale.setlocale(locale.LC_ALL,"")
'English_United Kingdom.1252'
>>> locale.strcoll("Z","a")
1
>>> "Z" < "a"
True 
```

The locale can change the collation sequence, but (here) not with ordinary comparisons. The English collation sequence goes aAbBcC...xXyYzZ (applies to other "en" locales). For example:

```
>>> ml=["a","b","c","A","B","C"]
>>> sorted(ml)
['A', 'B', 'C', 'a', 'b', 'c']
>>> sorted(ml,key=locale.strxfrm)
['a', 'A', 'b', 'B', 'c', 'C']
>>> 
```

With non-ASCII characters, consider:

```
>>> locale.strcoll("é","f")
-1
>>> "é" < "f"
False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:39:24.757

按照字母在 ASCII 范围内定义的顺序进行词法排序，因此：

```
A ... Za ... z 
```

这就是为什么`'Z' < 'a'`是真的。

比较两个字符串时，比较每个字符，如果一个大于另一个，则字符串更大，如果相等，则移动到下一个字符。如果到达其中一个字符串的末尾，而另一个字符串仍然有字符，则最长的字符串更大，否则它们相等。

# r - 在 R 数据表中检索局部最大值的值 - 已经有列号

> ID：15525146
> 
> 赞同：0
> 
> 时间：2013-03-20T13:37:16.483
> 
> 标签：r, mathematical-optimization

使用这个问题的解决方案：[寻找局部最大值和最小值](https://stackoverflow.com/questions/6836409/finding-local-maxima-and-minima)我已经能够从我的数据表中检索似乎是列号列表的局部最大值。我还需要从表中检索该峰值的值。最好我会返回一个矩阵或等价物，其中每行包含局部峰值而不是位置，因为我已经有了位置

所以说使用向量 ex_data <-c(1,3,2,2,1,3,5,4,2,1) 我想得到一个向量说 (3,5)。我已经有下面的代码：

```
local_max <- function(x) {
which(diff(sign(diff(x)))==-2)+1}
local_max(ex_data) 
```

产生向量 (2,7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:57:31.423

这简单。只需使用索引向量进行子集化。

```
ex_data[local_max(ex_data)] 
```

# playframework-2.0 - DrawerTest 找不到符号变量仪表板

> ID：15525150
> 
> 赞同：2
> 
> 时间：2013-03-20T13:37:28.103
> 
> 标签：playframework-2.0

我尝试在[http://www.playframework.com/documentation/2.1.0/JavaGuide6](http://www.playframework.com/documentation/2.1.0/JavaGuide6)上关注 play 2.1 教程，但我被困在这行代码上

```
@Test
public void newProject() throws Exception {
    drawer.group("Personal").newProject();
    dashboard.await().until(drawer.group("Personal").hasProject("New project"));
    dashboard.await().until(drawer.group("Personal").project("New project").isInEdit());
} 
```

我将此代码放在 test/views/DrawerTest.java 上，但在运行 play test 时出现此错误：

```
zentasks/test/views/DrawerTest.java:32: cannot find symbol
[error] symbol  : variable dashboard
[error] location: class views.DrawerTest
[error]         dashboard.await().until(drawer.group("Personal").hasProject("New project")); 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T05:34:23.793

您可以尝试像这样更改您的`DrawerTest`课程：

```
public Drawer drawer;
public Dashboard dashboard; // <------ Add this

@Before
public void setUp() {
    start();
    Login login = browser.createPage(Login.class);
    login.go();
    login.login("bob@example.com", "secret");
    dashboard = browser.createPage(Dashboard.class); // <------ Add this
    drawer = dashboard.drawer(); // <------ Change this
} 
```

# magento - Magento Bundle Product - 选择产品的变体

> ID：15525152
> 
> 赞同：0
> 
> 时间：2013-03-20T13:37:35.993
> 
> 标签：magento, bundle, set, product, variants

在捆绑产品中添加多个选择集时遇到问题。

我有一个捆绑产品名称 Tunic Veto，它有两个可供客户选择的套装变体 - 第一个、第二个或两者

套装 1：束腰外衣尺寸。S - 3szt。束腰外衣尺寸。XL - 2szt。

套装 2：束腰外衣尺寸 S - 10szt。束腰外衣尺寸。M - 5szt。

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:39:30.003

您应该创建单独的简单产品，这些产品链接到您所指的捆绑产品。

在 Magento 后端，您可以选择您的 Bundle 产品，然后使用 Bundle Items 菜单添加客户可以选择的 Simple 产品。在此页面上，您可以使用您选择的输入字段（多选、下拉、单选或复选框）创建选项和所属选项。创建选项后，可以添加相应的简单产品。

通常一个下拉菜单就可以了，因为客户很可能只会选择一种尺寸。但是，在您的问题中，您正在谈论多项选择，因此您应该选择哪种方法。

希望这可以帮助。

# android - 触摸不同选项卡 2 次时发生 Android 崩溃

> ID：15525153
> 
> 赞同：2
> 
> 时间：2013-03-20T13:37:37.193
> 
> 标签：android, android-tabactivity

我认为我的标题不足以解释我的 android 何时会崩溃。我的应用程序上有 3 个选项卡小部件。这意味着我有 3 个活动（accountMainThread.java、TodayExpenseList.java 和 settingThread）适应每个选项卡小部件。这是我的标签活动代码。

```
 TabSpec mainSpec = addNewTab(tab1,android.R.drawable.ic_menu_upload);           
    Intent mainIntent = new Intent(AccountTabActivity.this,accountMainThread.class);
    mainSpec.setContent(mainIntent);            
    tabHost.addTab(mainSpec);           

    TabSpec todayExpenseListSpec = addNewTab(tab2,android.R.drawable.ic_menu_today);                
    Intent todayExpenseListIntent = new Intent(AccountTabActivity.this,TodayExpenseList.class);         
    todayExpenseListSpec.setContent(todayExpenseListIntent);
    tabHost.addTab(todayExpenseListSpec);       

    TabSpec settingSpec = addNewTab(tab3,android.R.drawable.ic_menu_manage);
    Intent settingIntent = new Intent(AccountTabActivity.this,settingThread.class);
    settingSpec.setContent(settingIntent);
    tabHost.addTab(settingSpec); 
```

这只是我工作的一部分。好吧，我的应用程序将从第一个选项卡（accountMainThread）开始，并且应用程序工作正常。然后，我选择第二个标签（todayExpenseList），还是一样，没有错。然后，我标签第三个标签（settingThread），仍然一样，没有错。问题是当我为下一个选项卡选择任何选项卡时，无论是第一个选项卡还是第二个选项卡或第三个选项卡，我的应用程序都崩溃了。我希望我的解释足够理解。

这是我完整的 tabActivity 代码

```
public class AccountTabActivity extends TabActivity {

private String[] idItem;  
private static connectionDatabase dbConnect;
private static SQLLiteAdapter mDbHelper;
private static int totalTodayExpense = 0;
private static String tab1 = "Send Expense";
private static String tab2 = "Today Expense";
private static String tab3 = "Setting";
private static TabHost tabHost;
private static int dataProcessed = 0;
private static RelativeLayout startupLayout;
private static ProgressBar startupProgress;
private static TextView startupText;
private int progressValues[] = {0,50,70,90,98,100};
private String startupSequences[] = {
        "Initializing",
        "Connecting database",
        "Initializing array list",
        "Retrieving data",
        "Synchronizing data with server",
        "Setting up UI thread"
};

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    //-----------------------------------------------

    setContentView(R.layout.android_tab_activity);
    startupLayout = (RelativeLayout)findViewById(R.id.startup_layout);
    startupProgress = (ProgressBar)findViewById(R.id.startup_progressbar);
    startupText = (TextView)findViewById(R.id.startup_textview);        
    tabHost = getTabHost(); /*  
    tabHost.setOnTabChangedListener(new OnTabChangeListener(){

        @Override
        public void onTabChanged(String tabId) {
            //setTabColor(tabHost);

        }

    });
    */

    new readyTabActivity().execute();   
    dataProcessed = 1;
}

public void setTabColor(TabHost tabhost){

    for(int i=0;i<tabhost.getTabWidget().getChildCount();i++){
        tabhost.getTabWidget().getChildAt(i).setBackgroundResource(R.drawable.not_select);
    }

    tabhost.getTabWidget().getChildAt(tabhost.getCurrentTab())
        .setBackgroundResource(R.drawable.selected);
}

private class readyTabActivity extends AsyncTask<String,Integer,Void>{

    private int connectedFlag = 0;
    private JSONArray jsonArray;
    private int dataHavenSyncYet = 0;
    private SQLLiteAdapter mDbHelper;

    @Override
    protected void onPreExecute(){
        startupProgress.setProgress(progressValues[0]);
    }

    protected Void doInBackground(String... url){

        try{
            dbConnect = new connectionDatabase();

            mDbHelper = new SQLLiteAdapter(AccountTabActivity.this);
            mDbHelper.open();
            publishProgress(1);
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            publishProgress(1);
            JSONObject jsonObject = dbConnect.HttpRequest(dbConnect.url_readData, "get",params);
            publishProgress(2);

            if(jsonObject.getBoolean("list")){
                connectedFlag = 1;      
                jsonArray = (JSONArray)jsonObject.get("list");
            }else{
                connectedFlag = 0;
            }

            publishProgress(3); 

        }catch(Exception e){
            connectedFlag = 0;              
            Log.e("Icreate", "error on database : " + e.toString());
        }

        return null;
    }   

    @Override
    protected void onPostExecute(Void result)
    {

        startupLayout.setVisibility(View.GONE);

        ////////////////////////////////////////////////////////////////
        // main Thread

        TabSpec mainSpec = addNewTab(tab1,android.R.drawable.ic_menu_upload);           
        Intent mainIntent = new Intent(AccountTabActivity.this,accountMainThread.class);
        mainSpec.setContent(mainIntent);
        mainIntent.putExtra("CONNECT", connectedFlag);
        tabHost.addTab(mainSpec);           

        TabSpec todayExpenseListSpec = addNewTab(tab2,android.R.drawable.ic_menu_today);            

        Intent todayExpenseListIntent = new Intent(AccountTabActivity.this,TodayExpenseList.class);         
        todayExpenseListSpec.setContent(todayExpenseListIntent);
            todayExpenseListIntent.putExtra("CONNECT", connectedFlag);          
        tabHost.addTab(todayExpenseListSpec);       

        ////////////////////////////////////////////////////////////////
        // setting Thread

        TabSpec settingSpec = addNewTab(tab3,android.R.drawable.ic_menu_manage);
        Intent settingIntent = new Intent(AccountTabActivity.this,settingThread.class);
        ArrayList<Map<String,String>> arraySTList = 
                (ArrayList<Map<String,String>>)buildSettingThreadData();
        settingIntent.putExtra("CONNECT", connectedFlag);
        settingIntent.putExtra("array_st_list", arraySTList);

        settingSpec.setContent(settingIntent);
        tabHost.addTab(settingSpec);

        /////////////////////////////////////////////////////
        // add tab to tabHost       

    }       

    @Override
    protected void onProgressUpdate(Integer... values){
        startupProgress.setProgress(progressValues[values[0]]);
        startupText.setText(""+startupSequences[values[0]]);

    }

    private TabSpec addNewTab(String title, int drawable){
        TabHost.TabSpec mainSpec = tabHost.newTabSpec(title);
        View tabIndicator = LayoutInflater.from(AccountTabActivity.this).inflate(R.layout.tab_indicator,getTabWidget(),false);
        TextView title_text = (TextView)tabIndicator.findViewById(R.id.title);
        title_text.setText(title);
        ImageView icon = (ImageView)tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawable);
        mainSpec.setIndicator(tabIndicator);

        return mainSpec; 
    }

    private ArrayList<Map<String, String>> buildSettingThreadData(){
        ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
        list.add(putSTData("Database State",dbConnect.connectionState));
        list.add(putSTData("URL Retrieve Data",dbConnect.url_readData));
        list.add(putSTData("URL Insert Data",dbConnect.url_insertData));
        list.add(putSTData("URL Delete Data",dbConnect.url_deleteData));
        list.add(putSTData("Creator","Lik Wee"));
        return list;
    }

    private HashMap<String, String> putSTData(String title, String content) {
        HashMap<String, String> item = new HashMap<String, String>();
        item.put("title", title);
        item.put("content", content);           
        return item;
    }           
}

} 
```

这是我崩溃后的日志（我在应用程序崩溃之前删除了部分）

```
03-20 13:08:16.742: E/ActivityThread(661): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cefa88 that was originally bound here
03-20 13:08:16.742: E/ActivityThread(661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cefa88 that was originally bound here
03-20 13:08:16.742: E/ActivityThread(661):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-20 13:08:16.742: E/ActivityThread(661):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-20 13:08:16.742: E/ActivityThread(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-20 13:08:16.742: E/ActivityThread(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-20 13:08:16.742: E/ActivityThread(661):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-20 13:08:16.742: E/ActivityThread(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-20 13:08:16.742: E/ActivityThread(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-20 13:08:16.742: E/ActivityThread(661):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-20 13:08:16.742: E/ActivityThread(661):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-20 13:08:16.742: E/ActivityThread(661):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-20 13:08:16.742: E/ActivityThread(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-20 13:08:16.742: E/ActivityThread(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-20 13:08:16.742: E/ActivityThread(661):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-20 13:08:16.742: E/ActivityThread(661):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-20 13:08:16.742: E/ActivityThread(661):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-20 13:08:16.742: E/ActivityThread(661):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-20 13:08:16.742: E/ActivityThread(661):  at java.lang.Thread.run(Thread.java:856)
03-20 13:08:16.753: E/StrictMode(661): null
03-20 13:08:16.753: E/StrictMode(661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cefa88 that was originally bound here
03-20 13:08:16.753: E/StrictMode(661):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-20 13:08:16.753: E/StrictMode(661):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-20 13:08:16.753: E/StrictMode(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-20 13:08:16.753: E/StrictMode(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-20 13:08:16.753: E/StrictMode(661):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-20 13:08:16.753: E/StrictMode(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-20 13:08:16.753: E/StrictMode(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-20 13:08:16.753: E/StrictMode(661):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-20 13:08:16.753: E/StrictMode(661):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-20 13:08:16.753: E/StrictMode(661):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-20 13:08:16.753: E/StrictMode(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-20 13:08:16.753: E/StrictMode(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-20 13:08:16.753: E/StrictMode(661):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-20 13:08:16.753: E/StrictMode(661):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-20 13:08:16.753: E/StrictMode(661):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-20 13:08:16.753: E/StrictMode(661):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-20 13:08:16.753: E/StrictMode(661):  at java.lang.Thread.run(Thread.java:856)
03-20 13:08:16.762: E/ActivityThread(661): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d2af40 that was originally bound here
03-20 13:08:16.762: E/ActivityThread(661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d2af40 that was originally bound here
03-20 13:08:16.762: E/ActivityThread(661):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-20 13:08:16.762: E/ActivityThread(661):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-20 13:08:16.762: E/ActivityThread(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-20 13:08:16.762: E/ActivityThread(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-20 13:08:16.762: E/ActivityThread(661):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-20 13:08:16.762: E/ActivityThread(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-20 13:08:16.762: E/ActivityThread(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-20 13:08:16.762: E/ActivityThread(661):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-20 13:08:16.762: E/ActivityThread(661):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-20 13:08:16.762: E/ActivityThread(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-20 13:08:16.762: E/ActivityThread(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-20 13:08:16.762: E/ActivityThread(661):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-20 13:08:16.762: E/ActivityThread(661):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-20 13:08:16.762: E/ActivityThread(661):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-20 13:08:16.762: E/ActivityThread(661):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-20 13:08:16.762: E/ActivityThread(661):  at java.lang.Thread.run(Thread.java:856)
03-20 13:08:16.772: E/StrictMode(661): null
03-20 13:08:16.772: E/StrictMode(661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d2af40 that was originally bound here
03-20 13:08:16.772: E/StrictMode(661):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-20 13:08:16.772: E/StrictMode(661):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-20 13:08:16.772: E/StrictMode(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-20 13:08:16.772: E/StrictMode(661):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-20 13:08:16.772: E/StrictMode(661):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-20 13:08:16.772: E/StrictMode(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-20 13:08:16.772: E/StrictMode(661):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-20 13:08:16.772: E/StrictMode(661):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-20 13:08:16.772: E/StrictMode(661):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-20 13:08:16.772: E/StrictMode(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-20 13:08:16.772: E/StrictMode(661):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-20 13:08:16.772: E/StrictMode(661):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-20 13:08:16.772: E/StrictMode(661):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-20 13:08:16.772: E/StrictMode(661):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-20 13:08:16.772: E/StrictMode(661):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-20 13:08:16.772: E/StrictMode(661):  at java.lang.Thread.run(Thread.java:856) 
```

如果需要，我将提供任何解释和代码。我已经处理这个问题一天了。我真的希望有人能帮我解决它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:23:48.453

感谢任何花时间帮助解决这个问题的人。我发现了我的问题。在 TodayExpenseList.java 中，关于 onPause 生命周期方法。我试图关闭使我的应用程序崩溃的 SQLlite 数据库。在我在 onPause 方法上删除 SQLlite 数据库 close() 方法后，一切都变得很好。

# java - 如何在 Java（REST）应用程序中对用户进行身份验证？

> ID：15525154
> 
> 赞同：3
> 
> 时间：2013-03-20T13:37:40.287
> 
> 标签：java, web-services, rest, authentication, web

我有一些 java 服务器应用程序和一些 WEB 界面（jQuery）。对于 REST 服务，我使用 Jersey 实现。我可以轻松地从 WEB 页面将 JSON 发送到服务器，反之亦然。

**我的 REST 服务示例：**

```
@Path("/users")
public class User {

 @POST
 @Path("/login")
 @Consumes(MediaType.APPLICATION_JSON)
 public Response authUser(User user) {
   //code
 }
} 
```

但是有一个问题。我如何验证用户？例如，我有一些私有资源：当用户未登录时，他看不到它的资源/网页，但是当他登录时（输入正确的名称和密码），他可以看到它的资源。

我没有使用 sping 应用程序。我用谷歌搜索了很多时间，但没有找到简单的示例，然后我尝试阅读 Jose 的 Sandoval 书“RESTful Java Web Services”，在“安全”部分中有很多有用的信息，但没有示例。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:44:21.483

我相信有不同的方法可以解决这个问题。一种方法是，当用户进行身份验证时，您向他发送一个令牌（一段时间后过期），然后他在后续调用中将该令牌传回。

将令牌保存到文件或数据库中。在来自客户端的后续请求中，比较令牌时间戳和值。

一旦该令牌过期，他必须重新进行身份验证。

# php - 按所选语言重写 index.php URL

> ID：15525157
> 
> 赞同：1
> 
> 时间：2013-03-20T13:37:50.767
> 
> 标签：php, .htaccess, mod-rewrite

我刚刚在这里搜索了很多并用谷歌搜索了这个实现，但我无法弄清楚。

我的意思是：我有一个包含 3 种语言的作品集网站（单页）。每次我点击一个标志（IT、EN、FR）时，它都会加载一个 php 文件。在其中有许多基于所选语言的翻译句子/单词。

**问题：
最终的 url 是这样的：（`localhost/site/index.php?lang=en`如果你点击英文 lang）。
我想像这样重写它：`localhost/site/en`

如何编写 htaccess 文件？**

我只是按照这个提示->[使用 PHP 模拟文件结构](https://stackoverflow.com/questions/3144976/simulate-file-structure-with-php/3145037#3145037)。

和这个：

```
RewriteEngine on
RewriteRule ^en/(.*)\.html$ /$1.php?language=english [L,QSA] 
```

我无法弄清楚为什么不起作用。

其他详细信息：
- wamp 服务器
- mod_rewrite 已激活
- 单页站点 (jquery)
- firefox

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:49:11.383

你的 .htaccess 想要成为这样的东西：

```
IndexIgnore */*

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php 
```

将任何对不存在的文件的请求定向到您的 index.php。

然后在 PHP 中检查 URL 并根据需要提供：

```
$uri = $_SERVER["REQUEST_URI"];
$uriParts = explode("/", $uri);
$language = end($uriParts);

if ($language == "en) {
.... 
```

如果它与预期的语言不匹配，则值得抛出 404。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T19:13:08.500

这将起作用

```
RewriteRule ^(.*).html index.php?lang=$1 [L] 
```

您的网址将是`localhost/site/en.html`

# java - 使用 Maven 覆盖进行热部署

> ID：15525165
> 
> 赞同：4
> 
> 时间：2013-03-20T13:38:14.360
> 
> 标签：java, maven, netbeans, hotdeploy

因此，我正在尝试使用 netbeans 进行热部署以在我的 maven 项目上工作。我有两个战争包。一个我称之为“web”，另一个我称之为“custom-web”。我在“web”之上覆盖（使用 maven 覆盖插件）“custom-web”。我有几个“自定义网络”项目，每个客户都有一个。所以 maven 覆盖非常适合我的需求。

问题是我真的非常想在两个项目上热部署类和静态文件（.js、.css）。但是热部署仅适用于“自定义网络”项目，如果我修改“网络”上的类或静态文件，除非我手动重建“网络”并重新部署整个更改，否则更改不会反映在服务器上申请可能需要 3 到 5 分钟，严重阻碍了我的发展。

我在调试模式下使用带有“保存时部署”选项和“应用代码更改”的 Netbeans。两者都不适用于“网络”文件/类。

我正在寻找解决方案。我的自定义 Web 项目主要有静态文件，但它也可以有类。它不一定需要使用叠加层，但我想不出任何其他方法可以在不使用叠加层的情况下将两个项目正确添加在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:11:29.327

不确定这是否是一个选项，但在这种情况下使用 Jetty 效果很好。使用`jetty:run`目标，您可以将 Jetty 指向要监视的源目录（跨项目），Jetty 将始终从那里提供文件。

在您的情况下，您将 Jetty`scanTargets`指向您的源目录，Jetty 将从那里提供文件。

有关配置选项和示例，请参阅[http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html#jetty-run-goal 。](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html#jetty-run-goal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:32:08.190

Maven 配置文件（[http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)）也许是一个解决方案。您可以使用具有开发配置和“保存时部署”内容的“网络”项目创建一个“开发”项目。

在 netbeans 中，您可以使用配置文件映射配置：[http ://wiki.netbeans.org/MavenBestPractices#Configurations](http://wiki.netbeans.org/MavenBestPractices#Configurations)

最后，为您的自定义项目和 CI 服务器使用覆盖选项。

# ajax - 在多个部分中插入来自 ajax 调用的 html

> ID：15525166
> 
> 赞同：0
> 
> 时间：2013-03-20T13:38:16.713
> 
> 标签：ajax, html

我对返回 html 的函数进行了 ajax 调用。

```
$.ajax({
        url: url,
        type:'POST',
        dataType: 'html',
        success: function(output){
                $("#prikaz_oglasov").html(output);
            } 
            ,error: function (xhr, status) {
                alert('error: ' + status);

            } 
       }); 
```

我将 html 插入具有特定 ID 的 div 中。现在，当 onclick 事件发生时，我想接收两块 html 代码并将其插入两个不同的 div 中。我当然可以进行两次 ajax 调用，但似乎效率不高。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:43:59.010

我认为您的选择是让服务器返回一个看起来像的 JSON 响应

```
{
  chunk1: 'some html',
  chunk2: 'some html'
} 
```

然后有类似的东西

```
...
dataType: 'json',
success: function(output){
  $("#prikaz_oglasov").html(output.chunk1);
  $("#prikaz_oglasov2").html(output.chunk2);
} 
... 
```

或者尝试使用正则表达式将传入的 html 拆分为两个块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:02:01.133

我宁愿发送 2 个单独的请求，特别是如果这个 HTML 是静态的。更简洁的代码更好。

# java - BigDecimal 没有做添加操作

> ID：15525170
> 
> 赞同：4
> 
> 时间：2013-03-20T13:38:21.893
> 
> 标签：java, bigdecimal

我有2个`BigDecimal`号码。我正在尝试添加它们。我的代码如下：

```
BigDecimal bd1 = new BigDecimal(10);
BigDecimal bd2 = new BigDecimal(10);

bd1.add(bd2); 
```

在这里，我期待 bd1 20 的值，但它一次又一次地显示 10。它没有被添加。如果我做错了什么，请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T13:38:56.007

`BigDecimal`值是不可变的，您需要将值分配给结果`add`：

```
bd1 = bd1.add(bd2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:40:20.317

**BigDecimal 是不可变的。**每个操作都返回一个包含操作结果的新实例。

阅读[有关 BigDecimal 的 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)可以帮助您更好地理解。

如果要将 bd1 和 bd2 的总和存储在 bd1 中，则必须这样做

```
bd1 = bd1.add(bd2); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T13:44:51.970

雷默斯是对的。您需要将值分配给结果，如下所示：

```
bd1 = bd1.add(bd2); 
```

如果您想了解有关不可变的详细信息，可以参考以下链接：

[不可变是什么意思？](https://stackoverflow.com/questions/279507/what-is-meant-by-immutable)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T13:43:11.110

试试这个：

```
BigDecimal bd1 = new BigDecimal(10);
BigDecimal bd2 = new BigDecimal(10);
bd1 = bd1.add(bd2);
System.out.println(bd1); /*Prints 20*/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T13:39:56.497

您需要将结果存储在一个新变量中：

```
BigDecimal bd3 = bd1.add(bd2); 
```

# nginx - 处理请求时 Nginx 上游重新配置

> ID：15525171
> 
> 赞同：1
> 
> 时间：2013-03-20T13:38:22.453
> 
> 标签：nginx, reverse-proxy

如果我`nginx reload`在更新配置后调用以从上游列表中删除反向代理，那么反向代理当前正在处理的请求会发生什么情况，它们会无误地提供给用户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:54:17.683

参考：[http ://wiki.nginx.org/CommandLine#Stopping_or_Restarting_Nginx](http://wiki.nginx.org/CommandLine#Stopping_or_Restarting_Nginx)

HUP 是当您尝试重新加载配置文件时发送到 nginx 的信号。Nginx 将启动新的工作进程并优雅地摊牌旧的。所以是的，当前请求仍然没有任何错误。

> HUP 配置重新加载 使用新配置启动新的工作进程 优雅地关闭旧的工作进程

# ruby - 平均一个大数组？

> ID：15525175
> 
> 赞同：2
> 
> 时间：2013-03-20T13:38:33.240
> 
> 标签：ruby, arrays, postgresql, average

我得到了最终相当于大量数字的内容（从数据库中提取）。

所以，它可能看起来像：`[1,3,1,2,1,3,1,2,3,1,2,3,1,3,1,3,1,1,3,2,3,3,3,3,1,1,1,1,3,2,1]`

除了它可能是 50,000 个数字而不是几十个。最小的数字永远是`1`，最大的数字是`3`。

我需要做的是找到某种滚动平均值，以便可以在可管理的折线图中显示数据。

那么也许平均每5-10个数据点的数量？只是不确定处理此类事情的最佳方法是什么。

注意：不希望获得单一平均值。我希望将整个数组提炼成更多的平均点。因此，一个包含 1000 个点的数据集可能会分解为 10 个平均数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:42:42.313

```
1.9.3p327 :001 > a = [1,3,1,2,1,3,1,2,3,1,2,3,1,3,1,3,1,1,3,2,3,3,3,3,1,1,1,1,3,2,1]
 => [1, 3, 1, 2, 1, 3, 1, 2, 3, 1, 2, 3, 1, 3, 1, 3, 1, 1, 3, 2, 3, 3, 3, 3, 1, 1, 1, 1, 3, 2, 1]
1.9.3p327 :002 > a.each_cons(10).map { |subarray| subarray.reduce(0.0, :+) / subarray.size }
 => [1.8, 1.9, 1.9, 1.9, 2.0, 2.0, 2.0, 2.0, 1.9, 1.9, 2.0, 2.1, 2.1, 2.3, 2.3, 2.3, 2.1, 2.1, 2.1, 2.1, 2.1, 1.9] 
```

但是，这在性能方面并不好。它是 O(NM)，其中 N 是数组的大小，M 是窗口的大小（在本例中为 10）。

UPD：或者您可以使用`each_slice`，如果您需要显着“减少”数组大小：

```
1.9.3p327 :002 > a.each_slice(10).map { |subarray| subarray.reduce(0.0, :+) / subarray.size }
 => [1.8, 2.0, 2.1, 1.0] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T15:43:39.620

该切片平均值可以通过数据库选择直接获取。您的数据库引擎几乎可以肯定进行分组和平均计算至少比 ruby​​ 快一个数量级，此外，您将通过线路从数据库传输到程序的数据要少得多，并显着减少在您的程序中实例化的对象数量ruby 程序来表示结果集。

因此，如果您的原始查询看起来像这样（在 Postgresql 中）：

```
select value from mytable; 
```

您可以修改它以产生每十个项目的平均值，如下所示：

```
select avg(value) as chunk_avg, row/10 as chunk
from 
  (select value, row_number() over () - 1 as row
   from mytable) x
group by chunk
order by chunk; 
```

[SqlFiddle](http://sqlfiddle.com/#!12/314c3/6)

如果您不希望结果中出现块编号，则可以将其包装在另一个仅包含 projects 的外部 select 中`chunk_avg`，或者从子句中删除`chunk`字段并在and子句中`select`逐字替换`chunk`为 with 。`row/10``group by``order by`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:43:32.943

平均值的平均值**与**整体平均值不同。除非您不要求很高的精度，或者不需要平均值的子集，否则我不推荐它。

# php - PHP Google Play 订阅 API

> ID：15525181
> 
> 赞同：1
> 
> 时间：2013-03-20T13:38:48.707
> 
> 标签：php, google-play, subscription

我正在尝试使用 PHP 获取 Google Play API 订阅详细信息并使用以下 url 获取购买数据：

```
https://www.googleapis.com/androidpublisher/v1/applications/[PACKAGE]/subscriptions/[SKU]/purchases/[PURCHASE_TOKEN]?access_token=[ACCESS_TOKEN] 
```

我收到以下错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "androidpublisher",
    "reason": "developerDoesNotOwnApplication",
    "message": "This developer account does not own the application."
   }
  ],
  "code": 401,
  "message": "This developer account does not own the application."
 }
} 
```

请帮我整理一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T07:24:12.473

仅提供 URL 并不能帮助您获取任何应用程序的数据。你怎么能这么想。？是不是很不安全。？您必须获得适当的数据，您至少可以通过这些数据证明应用程序的所有权。

# java - 简单的java游戏：填充由移动光标绘制的图形

> ID：15525186
> 
> 赞同：2
> 
> 时间：2013-03-20T13:39:11.547
> 
> 标签：java, 2d-games, flood-fill, point-in-polygon

所以我正在做一个介绍 Java 课程的项目，似乎我选择了一些超出我能力范围的东西。:P
任何帮助将不胜感激。这就是我遇到的问题：

> 您有一个由玩家控制的光标（向前或转动 90°），它会留下一条彩色线。如果您设法越过自己的线并关闭任何形状的多边形（尽管只有直角），它的表面会将颜色变为您的线的颜色。

我可以检测到这种情况何时出现，但我有点迷失了如何实际填充刚刚关闭的正确多边形。我似乎无法想象一种算法可以涵盖任何可能的情况。

我查看了*扫描线填充*算法，但我认为当地图中已经填充了一些多边形时，它就会开始出现问题。如果我有办法在多边形内找到一个点，*Floodfill*算法将是完美的，但是，由于有许多不同的可能性，我想不出一个通用的规则。

我正在使用一个 2x2 整数数组，其中每种颜色都由一个数字表示。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:55:28.360

如果您可以检测到这种情况，那么这可以通过非常简单的方式解决。问题是选择哪个点作为洪水填充的起点。简单的答案是：*尝试所有这些*。当然，仅从与光标所在位置相邻的点开始是有意义的。在这种情况下，您最多需要检查 8 个点。更好的是——如果当前点形成一个多边形，其中至少有 2 个肯定已经画好了。

所以你有8个点要检查。从这些点中的每一个开始启动洪水填充 8 次。

您可能应该记住两件事：

1.  您应该尝试在您的字段的克隆版本中填充该区域，以便在 Floodfill 找不到多边形时能够返回。

2.  第二次和以后启动floodfill，您应该重复使用这个克隆版本的字段，看看它是否在那里被填充。这将允许您最多检查每个点一次，这将使您的 8 个 Floodfill 几乎与 1 个 Floodfill 一样快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:19:16.703

检查这个问题，使用 Graphics2 和 Polygon 填充任意多边形：[java swing : Polygon fill color problem](https://stackoverflow.com/questions/3369556/java-swing-polygon-fill-color-problem)

找出一个点是在多边形内部还是外部：[http ://en.wikipedia.org/wiki/Point_in_polygon](http://en.wikipedia.org/wiki/Point_in_polygon)

确保使用双缓冲。如果您设置单个像素并且不使用双缓冲，则组件可能会在设置每个像素后重绘。

# c# - 重载泛型方法

> ID：15525190
> 
> 赞同：22
> 
> 时间：2013-03-20T13:39:15.350
> 
> 标签：c#, generics, overloading

在调用用于存储对象的通用方法时，有时需要以不同方式处理特定类型。我知道你不能基于约束重载，但任何其他选择似乎都存在自己的问题。

```
public bool Save<T>(T entity) where T : class
{ ... some storage logic ... } 
```

我想做的是如下所示：

```
public bool Save<SpecificClass>(T entity)
{ ... special logic ... } 
```

过去，我们的团队创建了“一次性”方法来保存这些类，如下所示：

```
public bool SaveSpecificClass(SpecificClass sc)
{ ... special logic ... } 
```

但是，如果您不知道该功能的存在，并且您尝试使用通用（保存），那么您可能会遇到许多“一次性”应该解决的问题。如果一个新的开发人员出现，看到泛型的问题，并决定用*他自己*的一次性函数来解决它，这可能会变得更糟。

所以...

解决这个看似常见的问题有哪些选择？

我已经看过并使用了 UnitOfWork，现在这似乎是真正解决问题的*唯一*选择 - 但似乎用大锤攻击苍蝇。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T13:44:15.277

你可以这样做：

```
public bool Save<T>(T entity) where T : class
{ ... some storage logic ... }

public bool Save(SpecificClass entity)
{ ... special logic ... } 
```

例如：

```
public class SpecificClass
{
}

public class Specializer
{
    public bool GenericCalled;
    public bool SpecializedCalled;

    public bool Save<T>(T entity) where T : class
    {
        GenericCalled = true;
        return true;
    }

    public bool Save(SpecificClass entity)
    {
        SpecializedCalled = true;
        return true;
    }
}

public class Tests
{
    [Test]
    public void TestSpecialization()
    {
        var x = new Specializer();
        x.Save(new SpecificClass());
        Assert.IsTrue(x.SpecializedCalled);
        Assert.IsFalse(x.GenericCalled);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T14:15:08.867

好吧，基本上 C# 不允许模板特化，除非通过这样的继承：

```
interface IFoo<T> { }
class Bar { }

class FooBar : IFoo<Bar> { } 
```

至少它在编译时不支持这一点。但是，您可以使用 RTTI 来完成您想要实现的目标：

```
public bool Save<T>(T entity)
{
    // Check if "entity" is of type "SpecificClass"
    if (entity is SpecificClass)
    {
        // Entity can be safely casted to "SpecificClass"
        return SaveSpecificClass((SpecificClass)entity);
    }

    // ... other cases ...
} 
```

该[`is`表达式](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.110%29.aspx)对于执行运行时类型检查非常方便。它的工作原理类似于以下代码：

```
if (entity.GetType() == typeof(SpecificClass))
    // ... 
```

**编辑**：未知类型使用以下模式很常见：

```
if (entity is Foo)
    return DoSomethingWithFoo((Foo)entity);
else if (entity is Bar)
    return DoSomethingWithBar((Bar)entity);
else
    throw new NotSupportedException(
        String.Format("\"{0}\" is not a supported type for this method.", entity.GetType())); 
```

**编辑2**：正如其他答案建议*重载*该方法时，`SpecializedClass`如果您使用多态性，您需要小心。如果您正在为存储库使用接口（这实际上是设计存储库模式的一种好方法），那么在某些情况下，重载会导致您调用错误的方法 get 的情况，无论您是否将对象传递`SpecializedClass`给界面：

```
interface IRepository
{
    bool Save<T>(T entity)
        where T : class;
}

class FooRepository : IRepository
{
    bool Save<T>(T entity)
    {
    }

    bool Save(Foo entity)
    {
    }
} 
```

如果您直接`FooRepository.Save`使用以下实例调用，则此方法有效`Foo`：

```
var repository = new FooRepository();
repository.Save(new Foo()); 
```

但是，如果您正在调用接口（例如，如果您正在使用模式来实现存储库创建），这将不起作用：

```
IRepository repository = GetRepository<FooRepository>();
repository.Save(new Foo());  // Attention! Call's FooRepository.Save<Foo>(Foo entity) instead of FooRepository.Save(Foo entity)! 
```

使用 RTTI 只有一种`Save`方法，你会没事的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T19:30:02.693

因为涉及泛型的函数和运算符重载是在编译时而不是运行时绑定的，如果代码有两种方法：

```
public bool Save<T>(T entity) ...
public bool Save(SomeClass entity) ... 
```

那么尝试调用`Save(Foo)`where `Foo`is a variable of some generic type 的代码将始终调用前一个重载，即使泛型类型恰好是`SomeClass`. 我解决这个问题的建议是`ISaver<in T>`用非泛型方法定义一个泛型接口`DoSave(T param)`。让提供`Save`方法的类为它可以处理的类型实现所有适当的泛型接口。然后让对象的`Save<T>`方法尝试强制`this`转换为`ISaver<T>`. 如果转换成功，则使用结果`ISaver<T>`; 否则执行通用保存。如果类类型声明列出了它可以保存的类型的所有适当接口，这种方法会将`Save`调用分派给适当的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T13:44:47.977

为什么为您的方法使用不同的名称？

请参阅以下内容：

```
 public class Entity
    {
    }

    public class SpecificEntity : Entity
    {
    }

    public class Program
    {
        public static void Save<T>(T entity)
            where T : class
        {
            Console.WriteLine(entity.GetType().FullName);
        }

        public static void Save(SpecificEntity entity)
        {
            Console.WriteLine(entity.GetType().FullName);
        }

        private static void Main(string[] args)
        {
            Save(new Entity());          // ConsoleApplication13.Entity
            Save(new SpecificEntity());  // ConsoleApplication13.SpecificEntity

            Console.ReadKey();
        }
    } 
```

# android - Activity 更改时更新 Android 中的 Database-Context？

> ID：15525191
> 
> 赞同：-4
> 
> 时间：2013-03-20T13:39:17.397
> 
> 标签：android, sqlite, android-context

dD 当我访问具有多个活动的数据库时，我需要更新上下文吗？

我的应用程序是这样工作的：`Activities <=> DataSource <=> DBHelper`

My DataSource 具有打开和关闭方法，可从 DBHelper 检索或释放数据库。

活动在和中调用`open()`DataSource 。我是否需要传递 Activity 的上下文并创建一个新的数据库，如下所示：`onCreate()``onResume()``close()``onPause()`

```
public void open(Context context) {
    if(!context.equals(this.context)) 
        dbHelper = new DBHelper(context);
    db = dbHelper.getWritableDatabase();
} 
```

还是没有必要？

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2015-06-15T15:27:44.377

@Hoan Nguyen 写道：

> 不，你不必。

# tridion - 没有确切元数据字段的组件的 Tridion 查询

> ID：15525194
> 
> 赞同：3
> 
> 时间：2013-03-20T13:39:26.010
> 
> 标签：tridion, tridion-content-delivery

我有一个基于架构的组件，该架构具有非强制性元数据字段 ExtendedType。我可以查询具有特定值的此字段的组件：

```
new CustomMetaValueCriteria(new CustomMetaKeyCriteria("ExtendedType"), "Highlight", Criteria.Equal))) 
```

我需要查询没有填写此字段的组件。我该如何查询。

在 SQL 中，我可以写下一个：

```
select * from t where t.ExtendedType IS NULL 
```

如何使用 Trdion Query 做到这一点？通常我需要实现如下查询：

```
select * from t where t.ExtendedType = "Highlight" OR t.ExtendedType IS NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:29:40.900

您可能可以使用 NotInCriteria 实现此目的，如下所示：

```
new NotInCriteria
(
    new CustomMetaValueCriteria
    (
        new CustomMetaKeyCriteria("ExtendedType"), "%", Criteria.Like
    )
) 
```

我没有测试过，这只是一个想法。即使它有效，请务必检查它是否也能正常运行！

PS：下次请到 tridion.stackexchange.com 论坛提问 Tridion 相关问题！

# ios - 禁用 PSPDFKit 缩略图

> ID：15525198
> 
> 赞同：2
> 
> 时间：2013-03-20T13:39:42.947
> 
> 标签：ios, objective-c, thumbnails, pspdfkit

我正在尝试禁用PSPDFKit 附带的缩略图[查看图像，我不确定它到底叫什么，所以我很难在代码中找到它。](http://i.stack.imgur.com/3TvVC.png)以前使用过这个库的任何人都知道这个缩略图来自哪里，它叫什么，或者有任何可能有帮助的东西！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:14:14.830

**要在 PSPDFKit 中禁用 PDF 的 ScrobbleBar（缩略图预览）和位置叠加（页码：），**
您必须执行以下操作

```
PSPDFViewController *pdfController = [[PSPDFViewController alloc] initWithDocument:yourMagazine];

pdfController.scrobbleBarEnabled = NO; // Disable the Bottom Scrobble Bar
pdfController.pageLabelEnabled = NO; // Disables the bottom document site position overlay. 
```

# c++ - 常量和指针

> ID：15525206
> 
> 赞同：1
> 
> 时间：2013-03-20T13:40:03.027
> 
> 标签：c++, pointers, constants

这将是一个冗长的帖子，所以我提前道歉..但试图在上下文中提出多个问题：

所以，我一直在努力学习 C++，而且我已经相当容易地学会了一切，但我养成了一个习惯，即尝试以“略有不同的方式”在教程旁边做一些事情，以确保我理解我正在学习的东西的功能。

关于常量及其与指针的关系，我似乎遇到了心理障碍。

在上一节中，我认为我对引用、取消引用（以及 * 用于取消引用和指针时的区别）有了相当深入的了解，然后编写了以下代码：

```
int a[5];
int * p;

p = a;

cout << "Select the value for the first item at address(" << &a[0] << ")" << nl;
cin >> *p;
p++;
cout << "Select the value for the second item at address(" << &a[1] << ")" << nl;
cin >> *p;
p++;
cout << "Select the value for the third item at address(" << &a[2] << ")" << nl;
cin >> *p;
p++;
cout << "Select the value for the fourth item at address(" << &a[3] << ")" << nl;
cin >> *p;
p++;
cout << "Select the value for the fifth item at address(" << &a[4] << ")" << nl;
cin >> *p;

for (int n=0;n<5;n++)
    cout << a[n] << "(" << &a[n] << ")" << nl; 
```

现在，我意识到这不一定是最“优化”的解决方案，但它确实有效，我能够“写入”到我存储在内存中的数组中，并显示更改。它很整洁，就像我说的那样……我想我对这些东西的工作原理有了很好的理解。

..然后，我点击了下一节，它使用了这个例子：

```
const char * terry = "hello"; 
```

教我，我引用：“在数组的情况下，编译器允许我们希望在声明指针的同时用常量初始化指针指向的内容”（这是在cplusplus.com[教程](http://www.cplusplus.com/doc/tutorial/pointers/)）。

无论如何，直截了当：为了尝试熟悉它和上一节，我尝试编写：

```
const char * p = "Hello.";

for (int n=0;n<5;n++)
    cout << p[n] << "(" << &p[n] << ")" << nl;
    cout << nl; 
```

..这不起作用。我基本上尝试复制我以前的代码（尽管没有写入方面），以便能够读取这个常量数组中每个字符的 RAM 位置，并且我尝试了指针、引用、取消引用等的所有可能组合。 .但我只是打印了整个“你好”。带有 &p 的数组。

到底是如何获得常量数组的引用的？我想我理解我正在创建一个数组并立即将其分配到内存，然后将指针（p）分配给第一个块（“H”）的位置的基本前提..但我似乎不能打印块。我能够得到第一个块的位置来打印（不记得我曾经这样做的代码）并将它绑定到 for 循环中，但即便如此..它总是打印的位置第一个块，即使被分配到 [n] 计数之后。

我不知道我在这里缺少什么，或者我是否只是想达到“头顶”，但也许我只是不了解创建数组的用法/要点而无法定位内存分配其中的每个项目..

不过，这让我想到了下一个问题。如何获得 char 变量的内存位置，无论是否为常量？我也遇到了这段代码的问题：

```
char const a = 100;
int * b = &a;

cout << a << nl << *b << nl;
cout << nl; 
```

显然，这不起作用..因为我不能将 b 分配给 a 的位置，因为它们是不同的变量.. 显然制作一个 char 指针是愚蠢的，因为它只会打印混乱/空字符而不是位置（显然，我检查了这个......不仅仅是假设）。

我希望我只是错过了一个使用选项，它可能比我目前所处的位置“更先进”.. 但如果我不是，我不太明白能够访问该块的意义任何类型的变量/常量的位置，如果由于所使用类型的限制而无法访问所有变量/常量。

这个问题也限制了第三个引用代码：事实上我不能只分配一个变量来保存 &p 值，因为它本身必须是一个字符才能兼容..这是没有意义的，因为 char 可以'不持有八位数的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:44:09.650

在

```
const char * p = "Hello.";

[...]   cout << &p[n]   [...] 
```

`&p[n]`是一个指向 的指针`char`，并且`cout::operator<<`有一个重载，它接受一个指向 char 的指针并打印一个以 null 结尾的字符串，这可能就是你感到困惑的原因。

# c++ - char*（包含空值）到 std::string 知道长度

> ID：15525208
> 
> 赞同：0
> 
> 时间：2013-03-20T13:40:11.290
> 
> 标签：c++, string, null, char

我正在从事一个必须传输序列化数据的项目。使用[boost](http://www.boost.org "促进")框架对数据进行序列化，然后存储到 stringstream 中，最后存储到 std::string 中。为了传输数据，数据（存储为 char*，给定！）和字符串的长度都被存储并且可以在目的地被提取。但是，在尝试提取数据时，我只得到空字符串。到目前为止我尝试过的方法是：

```
C[i]=*new std::string(content, getDataChunk(), content.getDataLength()); 
```

或者

```
C[i].append(content.getDataChunk(), content.getDataLength()); 
```

而 std::string *C=new std::string[K], i < K.

```
char* p = content.getDataChunk(); 
        int l = content.getDataLength();
        for (int j = 0; j < l; j++) {
            C[i].insert(j, p[j], 1);
        } 
```

（这在一开始就引发了一个异常 - 我猜是因为 NULL 值！？）

显然， strcpy() 将不起作用，因为它使用 char* 作为再次以 NULL 结尾的目标......

你们中有人知道如何解决这个问题吗？我希望我不是在问每天都被问到的东西，但是在大量的答案中，很难消除这个机会；）

非常感谢您的任何提示-TIA！

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:43:49.913

为什么不只是做

```
C[i] = std::string(content.getDataChunk(), content.getDataLength()); 
```

它会做正确的事，复制完整的字符串，即使它已经嵌入`'\0'`了字符。

# php - 使用计数而不是 mysql_num_rows？

> ID：15525212
> 
> 赞同：0
> 
> 时间：2013-03-20T13:40:16.617
> 
> 标签：php, mysql, sql

有什么区别（性能方面）

```
$var = mysql_query("select * from tbl where id='something'");

$count = mysql_num_rows($var);

if($count > 1){

    do something

} 
```

和

```
$var = mysql_query("select count(*) from tbl where id='somthing'"); 
```

PS：我知道 mysql_* 已被弃用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:43:34.513

第一个版本返回整个结果集。如果您的表很宽，这可能是一个很大的数据量。如果 上有索引`id`，仍然需要读取原始数据来填充值。

第二个版本只返回计数。如果 上有索引`id`，那么它将使用索引，不需要从数据页中读取任何数据。

如果您只想要计数而不想要数据，那么第二个版本更清晰，应该表现更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:45:26.673

`select *`要求 mysql 从该表中获取所有数据（给定条件）并将其提供给您，这不是一个非常可优化的操作，并且会导致大量数据被组织并通过套接字发送到 PHP。

既然你没有对这些数据做任何事情，你就要求 mysql 白做大量的数据处理。

相反，仅询问 mysql`count()`符合条件的行数不会导致它尝试向您发送所有数据，并且会导致更快的查询，特别是如果该`id`字段已被索引。

总的来说，如果您的 php 应用程序仍然很简单，但仍然是一种很好的做法，那么这可能被视为一种微优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:54:09.080

选择 * 从 tbl_university_master;

返回 2785 行

执行时间：0.071 秒

传输时间：7.032 秒

总时间：8.004 秒

* * *

从 tbl_university 中选择计数（*）；

1 行返回

执行时间：0.038 秒

传输时间：0秒

总时间：0.039 秒

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T13:43:27.477

我会使用第二个原因有两个：

*   如您所述，不推荐使用 mysql_*
*   如果您的表很大，那么您将在 $var 中放入大量数据只是为了计算它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:49:24.310

`select * from tbl where id='something'`从具有 ID 条件的表中选择所有数据。

该`COUNT()`函数返回与指定条件匹配的行数。

如需更多阅读、练习和演示，请访问 **=>>>** [w3schools](http://www.w3schools.com/sql/sql_func_count.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T13:47:21.163

我认为使用

```
$var = mysql_query("select count(*) from tbl where id='somthing'"); 
```

效率更高，因为您没有根据从 MySQL 返回的行数分配内存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T13:43:30.890

第一个收集所有数据并计算结果集中的行数，这是性能密集型的。后者只是快速计数，速度更快。

但是，如果您需要数据和计数，则执行第一个查询并使用`mysql_num_rows`（或 PDO 中的类似内容）比执行另一个查询来进行计数更明智。

事实上， mysql_* 将被弃用。但同样适用于使用 MySQLi 或 PDO 时。

# javascript - 带有淘汰赛js的递归模板

> ID：15525216
> 
> 赞同：34
> 
> 时间：2013-03-20T13:40:34.423
> 
> 标签：javascript, html, templates, knockout.js

是否可以仅使用淘汰赛js创建递归模板？

我有一个淘汰对象：

```
function FormElementNode(children, text, value) {
   var self = this;
   self.children = ko.observableArray(children);
   self.text = ko.observable(text);
   self.value = ko.observable(value);
} 
```

children 是 FormElementNode 的数组。

我想在层次结构列表节点中递归地绘制它和它的子节点：

```
<ul>
   <li>Parent text value:
      Children: 
      <ul>
         <li>Child1 text value</li>
         <li>Child2 text value</li>
   </li> 
```

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-20T14:00:09.680

是的，KnockOut 支持递归模板，因此您可以在模板中引用和呈现相同的模板。

您的示例 html 如下所示：

```
<script id="formElementNodeTemplate" type="text/html">
<ul>
    <li>Parent <span data-bind="text: text"></span> 
               <span data-bind="text: value"></span>
        <br/>
        Children:
        <!-- ko template: { name: 'formElementNodeTemplate',  
                            foreach: children } -->
        <!-- /ko -->        
     </li>
   </ul>
</script>    

<div data-bind="template: { name: 'formElementNodeTemplate', data: $data }">
</div> 
```

演示[JSFiddle。](http://jsfiddle.net/KtbXb/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-08-30T06:41:59.503

我认为，我有一个**更好的解决方案**，**没有树根**（或者我猜是多个树根）。请看一下：

[http://jsfiddle.net/nonsense66/Bzekr/](http://jsfiddle.net/nonsense66/Bzekr/)

**模板：**

```
<script id="treeElement" type="text/html">
    <li>
        <span data-bind="text: name"></span>
        <ul data-bind="template: { name: 'treeElement', foreach: children }">
        </ul>
     </li>
</script>    

<ul data-bind="template: { name: 'treeElement', foreach: $data.treeRoot }"></ul> 
```

**Javascript：**

```
var viewModel = {
    treeRoot: ko.observableArray()
};

var TreeElement = function(name, children) {
   var self = this;
   self.children = ko.observableArray(children);
   self.name = ko.observable(name);
}

var tree = [
    new TreeElement("Russia", [
        new TreeElement("Moscow")
    ]),
    new TreeElement("United States", 
    [
        new TreeElement("New York", [ 
            new TreeElement("Harlem"),
            new TreeElement("Central Park")
        ]) 
    ])
];

viewModel.treeRoot(tree);

ko.applyBindings(viewModel); 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-06T16:24:30.183

这篇文章对我帮助很大。我一直在寻找使用淘汰赛的新方法。我只是想添加一个有用的修改，它完全符合 nemesv 仅使用 ko.mapping 插件提出的建议。

```
//Nested javascript object:
var formElementNode = {
    children: [{
        children: [],
        text: 'Child1',
        value: 'Value1'
    }, {
        children: [{
            children: [{
                children: [],
                text: 'Child2.1.1',
                value: 'Value2.1.1'
            }],
            text: 'Child2.1',
            value: 'Value2.1'
        }],
        text: 'Child2',
        value: 'Value2'
    }, {
        children: [],
        text: 'Child3',
            value: 'Value3'
    }],
    text: 'Main',
    value: 'MainValue'
};

//Use ko.mapping to generate viewModel:
var viewModel = ko.mapping.fromJS(formElementNode);
ko.applyBindings(viewModel); 
```

如本[jsFiddle 所示](http://jsfiddle.net/bradleytrager/dqetk/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-28T05:41:06.117

### 递归自定义绑定

另一种解决方案，在阅读模板速度较慢后，我正在考虑使用递归绑定。

`<ul data-bind="nestMe: name"></ul>`

```
ko.bindingHandlers.nestMe = {
    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {

    },
    update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        var observable = valueAccessor() || { };
        var unwrapped = ko.unwrap(observable);

        ko.utils.setHtml(element, '<li>'+unwrapped+'<ul data-bind="foreach: children"><li data-bind="nestMe: name" /></ul></li>');

    }
};

var rootModel = function(name, children) {
    this.name = ko.observable(name);
    this.children = ko.observableArray(children);
};

var basemodel = new rootModel('test');
basemodel.children.push(new rootModel('aaa',[new rootModel('111'),new rootModel('222')]));
basemodel.children.push(new rootModel('bbb'));
basemodel.children.push(new rootModel('ccc',[new rootModel('333'),new rootModel('444')]));

ko.applyBindings(basemodel); 
```

在递归之前有机会使用数据应该会派上用场。

[JSFiddle](http://jsfiddle.net/MrYellow/DAg34/7/)

# perl - 使用 Net::SFTP::Foreign 下载 Perl sftp

> ID：15525225
> 
> 赞同：1
> 
> 时间：2013-03-20T13:41:04.030
> 
> 标签：perl

我是初学者。我编写了一个 perl 脚本，它执行以下操作

- 在当前日期之前在“/x01/abcd/abc_logs/abcd_Logs”下创建一个目录，如果尚未创建，格式为“YYYYMMDD”。即：如果脚本在“2013 年 1 月 1 日”运行，则将在上述路径下创建目录“20130101”。因此，每当需要检查日志时，始终查找当前日期的目录。

-检查日志文件是否已经在同一天早些时候下载，如果没有，日志将被下载到今天的目录。

我很难想出一个解决方案来在共享中没有文件时打印一条消息。这当然是当用户指定共享中不存在的 2 个或更多文件时。我知道发生这种情况是因为“sub get_LOGS”中有一个“die”语句。当我指定的所有文件都没有碰巧在共享中时，我似乎无法理解如何返回消息。

该脚本的用法如下

./abc_logs ....<文件(n)>

以下是脚本。

```
my $LOGS_LOCAL_PATH = "/x02/abc/abcba2/";
chomp $LOGS_LOCAL_PATH;
my $LOGS_REM_PATH = "/x01/INT/abc/vabc2/";
chomp $LOGS_REM_PATH;
my $TODAY = `date +%Y%m%d`;
chomp $TODAY;
my @GETLOOP = @ARGV;
    unless ($#ARGV >= 0) {
        print "\nUsage: gtp_logs.pl <file1> <file2> <file3>.....<file(n)>\n\n";
        exit;
    }
        system("clear");
    unless ( -d "$LOGS_LOCAL_PATH"."$TODAY") {
        print "Directory \"$TODAY\" doesn't exist. So creating the directory..!\n";
        print "OK..Done.....!\n\n";
        system("mkdir $LOGS_LOCAL_PATH/$TODAY");
        }
    else {
        print "Directory already exists. Logs will be downloaded to ==>     \"$LOGS_LOCAL_PATH$TODAY\".....!\n\n";
    }

               # if_DOWNLOADED($LOGS_LOCAL_PATH,$TODAY,@GETLOOP);

    chdir("$LOGS_LOCAL_PATH"."$TODAY") || die "cannot cd to  ($!)";
    foreach my $GETL (@GETLOOP) {
    my $is_downloaded = if_DOWNLOADED($LOGS_LOCAL_PATH,$TODAY,$GETL);
    if(!$is_downloaded)
    {
        get_LOGS("172.25.70.221","abc","abc2","/x01/INT/abc",$GETL);
        print "File \"$GETL\" downloaded to ==>          \"$LOGS_LOCAL_PATH$TODAY\"\n\n";
    }
    else
    {
        print "File \"$GETL\" has already been Downloaded to ==>          \"$LOGS_LOCAL_PATH$TODAY\"\n\n";
    }

    }

 sub get_LOGS {
    my $LOG_HOST  = shift;
    my $REM_USER  = shift;
    my $REM_PASSW = shift;
    my $REM_PATH  = shift;
    my $REM_FILE  = shift;

        print "Connecting to the sftp share! Please wait....!\n";
        my $sftp = Net::SFTP::Foreign->new($LOG_HOST, user => $REM_USER, password => $REM_PASSW);
        $sftp->setcwd($REM_PATH) or die "unable to change cwd: " . $sftp->error;
        print "OK. On the share! Downloading the file \"$REM_FILE\"...................!\n\n\n\n";
        $sftp->error and die "Problem connecting to the share...!!!! " . $sftp->error;
        $sftp->get($REM_FILE) or die "File does not seem to be present on the remote share. Please re-request..!!!" . $sftp->error;
        return $REM_FILE;
}

sub if_DOWNLOADED {
    my $DWD_FILE_PATH = shift;
    my $DWD_DIR       = shift;
    my $DWD_FILE      = shift;
    if (-e "$DWD_FILE_PATH/$DWD_DIR/$DWD_FILE")
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

请问有人可以帮我找到解决这个问题的方法吗？请尝试使用相同的脚本并进行修改。

/V

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:16:30.250

对您的代码的一些评论：

*   使用 strict 和 warnings 以便及早发现大量错误。

*   阅读一些关于风格的书（即 Damian Conway 的 Perl Best Practices）。但无论如何，在命名变量、子例程和所有内容以及它们的大小写时都要尽量保持一致。

*   当您必须在多个地方使用某个计算值时，请尝试计算一次并将其保存在变量中。

*   不要将子程序用于琐碎的事情。

*   您不需要调用已定义且末尾`chomp`没有字符的变量。`"\n"`

*   为每个文件传输打开一个新的 SFTP 连接是非常低效的。您可以在开始时只打开一个并将其用于所有传输。

现在，您的脚本的简化版本：

```
#!/usr/bin/perl

use strict;
use warnings;

my $host = "172.25.70.221";
my $user = "abc";
my $password = "abc1234321";

my $LOGS_LOCAL_PATH = "/x02/ABC/abc2";
my $LOGS_REM_PATH = "/x01/INT/abc/vim";
my $TODAY = `date +%Y%m%d`;
chomp $TODAY;
my $TODAY_LOCAL_PATH = "$LOGS_LOCAL_PATH/$TODAY";

my @files = @ARGV;
@files or die "\nUsage: gtp_logs.pl <file1> <file2> <file3>.....<file(n)>\n\n";

system("clear");

if ( -d $TODAY_LOCAL_PATH) {
    print "Directory already exists. Logs will be downloaded to ==>     \"$TODAY_LOCAL_PATH\".....!\n\n";
}
else {
    print "Directory \"$TODAY\" doesn't exist. So creating the directory..!\n";
    mkdir "$TODAY_LOCAL_PATH" or die "unable to create directory: $!\n";
    print "OK..Done.....!\n\n";
}

chdir $TODAY_LOCAL_PATH or die "cannot cd to  ($!)\n";

my $sftp =  Net::SFTP::Foreign->new($host, user => $user, password => $password);
$sftp->error
    and die "Problem connecting to the share...!!!! " . $sftp->error;

my $ok = 0;
my $failed = 0;
foreach my $file (@files) {
    if (-e "$TODAY_LOCAL_PATH/$file") {
        print "File \"$file\" has already been Downloaded to ==>          \"$TODAY_LOCAL_PATH\"\n";
    }
    else {
        if ($sftp->get("$LOGS_REM_PATH/$file")) {
            print "File \"$file\" downloaded to ==>          \"$TODAY_LOCAL_PATH\"\n";
            $ok++;
        }
        else {
            print "Unable to download file \"$file\" : " . $sftp->error . "\n";
            $failed++;
        }
    }
}

print "$ok files have been downloaded, $failed files failed!\n\n"; 
```

# .htaccess - .htaccess 规则，重写 url 中的密钥

> ID：15525227
> 
> 赞同：3
> 
> 时间：2013-03-20T13:41:12.233
> 
> 标签：.htaccess, mod-rewrite

假设我们有一个这样的网址：

```
http://domain.com/?theme_of_site=parameter_value
http://domain.com/?type_of_site=parameter_value 
```

*   **domain.com** - 稳定/静态，始终相同
*   **theme_of_site** & **type_of_site** - 稳定/静态，选择时相同
*   **参数值**- 动态

就像总是有这样的网址：

```
http://domain.com/?theme=parameter_value
http://domain.com/?type=parameter_value 
```

我怎样才能在 .htaccess 中写这个？

* * *

*对于以下讨论：*

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# Start by redirecting the original links from type_of_site= to type=
# Only if the browser's original request contains the strings
RewriteCond %{THE_REQUEST} theme_of_site=([^&]+)
RewriteCond %{THE_REQUEST} type_of_site=([^&]+)
RewriteRule (.*) $1?theme=%1&type=%2 [L,R=301]

RewriteCond %{THE_REQUEST} theme_of_site=([^&]+)
RewriteRule (.*) $1?theme=%1 [L,R=301]

RewriteCond %{THE_REQUEST} type_of_site=([^&]+)    
RewriteRule (.*) $1?type=%1 [L,R=301]

# Then, after performing the initial redirects to change the browser
# URL, rewrite the parameters internally

# Match both present:
RewriteCond %{QUERY_STRING} theme=([^&]+)
RewriteCond %{QUERY_STRING} type=([^&]+)
RewriteRule (.*) $1?theme_of_site=%1&type_of_site=%2 [L]

# Then match each individually
RewriteCond %{QUERY_STRING} theme=([^&]+)
RewriteRule (.*) $1?theme_of_site=%1 [L]

RewriteCond %{QUERY_STRING} type=([^&]+)
RewriteRule (.*) $1?type_of_site=%1 [L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:48:09.890

查询字符串参数需要在`RewriteCond`. 您可以匹配`(theme|type)`并捕获该值，然后在内部使用`(theme|type)_of_site`in a重写它`RewriteRule`。

```
RewriteEngine On
# Match the theme or type paramater in `%1` and capture its value in `%2`
RewriteCond %{QUERY_STRING} (theme|type)=([^&]+)
# Rewrite The parameter name to include _of_site using the values captured above
# for all URLs as captured in $1
RewriteRule (.*) $1?%1_of_site=%2 [L] 
```

上面的简单示例仅在指定*任*一参数时才有效。如果您需要能够同时处理两者，就像`example.com/?type=abc&theme=123`它变得有点复杂一样：

```
# Start by redirecting the original links from type_of_site= to type=
# Only if the browser's original request contains the strings
RewriteCond %{THE_REQUEST} theme_of_site=([^&]+)
RewriteCond %{THE_REQUEST} type_of_site=([^&]+)
RewriteRule (.*) $1?theme=%1&type=%2 [L,R=301]

RewriteCond %{THE_REQUEST} theme_of_site=([^&]+)
RewriteRule (.*) $1?theme=%1 [L,R=301]

RewriteCond %{THE_REQUEST} type_of_site=([^&]+)    
RewriteRule (.*) $1?type=%1 [L,R=301]

# Then, after performing the initial redirects to change the browser
# URL, rewrite the parameters internally

# Match both present:
RewriteCond %{QUERY_STRING} theme=([^&]+)
RewriteCond %{QUERY_STRING} type=([^&]+)
RewriteRule (.*) $1?theme_of_site=%1&type_of_site=%2 [L]

# Then match each individually
RewriteCond %{QUERY_STRING} theme=([^&]+)
RewriteRule (.*) $1?theme_of_site=%1 [L]

RewriteCond %{QUERY_STRING} type=([^&]+)
RewriteRule (.*) $1?type_of_site=%1 [L] 
```

# android - Android Spinner 收音机不见了

> ID：15525230
> 
> 赞同：0
> 
> 时间：2013-03-20T13:41:25.907
> 
> 标签：android, spinner

我用 Spinner 创建了一个布局。我想用单选按钮显示 Spinner。

```
Spinner  Spinner_gender = (Spinner) findViewById(R.id.Spinner_gender);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.spinner_gender,  android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
Spinner_gender.setAdapter(adapter); 
```

有什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:46:48.253

`android.R.layout.simple_spinner_dropdown_item`使用`CheckedTextView`. 如果你绝对想要一个`RadioButton`，你应该提供你自己的包含一个`RadioButton`.

# c++ - C++11：私有成员安全

> ID：15525234
> 
> 赞同：4
> 
> 时间：2013-03-20T13:41:35.407
> 
> 标签：c++, c++11, private, auto

让我们考虑下一个代码：

```
#include <iostream>
#include "mydemangled.hpp"

using namespace std;

struct A
{
private:
    struct B {
       int get() const { return 5; }
    };

public:
   B get() const { return B(); }
};

int main()
{
    A a;
    A::B b = a.get();

    cout << demangled(b) << endl;
    cout << b.get() << endl;
} 
```

编译器（gcc 4.7.2）大喊说这`A::B`是私有的。好的。所以，我改变了代码：

```
int main()
{
   A a;

   cout << demangled(a.get()) << endl;
   cout << a.get().get() << endl;
} 
```

它不会大喊：

```
$ ./a.out
A::B
5 
```

意思是，我不能创建 的实例`A::B`，但我可以使用它。所以，新的变化（我问题的关键）。

```
int main()
{
   A a;
   auto b = a.get();

   cout << demangled(b) << endl;
   cout << b.get() << endl;
} 
```

并输出：

```
$ ./a.out
A::B
5 
```

这里有什么问题，是`A::B`私有的（以及它的构造函数、复制构造函数等等）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:53:25.650

通常，访问控制名称或符号，*而不是*底层实体。访问私人成员的方式有很多，而且一直都有。你不能做的是使用这样一个成员的名字。

在您的示例中，您不使用名称，因此没有问题。

# java - 如果数据库连接检查在引导程序中失败怎么办？

> ID：15525236
> 
> 赞同：3
> 
> 时间：2013-03-20T13:41:41.810
> 
> 标签：java, tomcat, grails, database-connection, bootstrapping

我正在使用 grails 开发应用程序。在引导部分，我正在检查和初始化数据库连接。假设数据库由于某些问题不可用，明智的做法是向管理员发送通知。但是，接下来该怎么办？grails 应用程序应该自动停止还是等待管理员来手动执行？另外，使用grails自动关闭已部署战争的方法是什么？

# c# - 在 Mono 中用于 Android 的 ORM

> ID：15525240
> 
> 赞同：0
> 
> 时间：2013-03-20T13:41:46.513
> 
> 标签：c#, android, orm, mono

我最近开始使用 Mono 进行 Android 开发。以前我在 Java 中做过一些事情并在看到这篇文章后使用了 ORMLite：

[Hibernate 对 Android 应用程序来说是不是太过分了？](https://stackoverflow.com/questions/4257374/is-hibernate-an-overkill-for-an-android-application)

我现在正在寻找一个 C# 替代方案，并找到了以下建议[NHibernate](http://nhforge.org/)的链接。

[支持 Mono 的 ORM？](https://stackoverflow.com/questions/4025004/orm-that-supports-mono)

如果 Hibernate 对 Android 来说太过分了，我猜 NHibernate 也是？任何人都可以建议适用于移动平台的 ORMLite 的 C# 替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:25:59.307

终于在sqlite-net库中找到了答案：

[https://code.google.com/p/sqlite-net/](https://code.google.com/p/sqlite-net/)

只需将几个 .cs 文件添加到您的项目中，它就可以工作（SQLite.cs 和可选的 SQLiteAsync.cs）。必须记住在将文件复制/粘贴到项目后更改命名空间。

# hibernate - 在初始模式创建时自动创建审计表

> ID：15525245
> 
> 赞同：0
> 
> 时间：2013-03-20T13:41:58.080
> 
> 标签：hibernate, hibernate-envers

我正在尝试使用 hibernate 和 envers 并希望使用以下属性在模式中创建初始数据：

```
<property name="hibernate.hbm2ddl.auto" value="create"/>
<property name="hibernate.hbm2ddl.import_files" value="/META-INF/spring/import.sql"/> 
```

Envers 还与此 Spring 应用程序集成，并在初始创建时创建审计表。

```
<property name="org.hibernate.envers.audit_strategy"        value="org.hibernate.envers.strategy.ValidityAuditStrategy"/>
<property name="org.hibernate.envers.audit_strategy_validity_store_revend_timestamp" value="true"/>
<property name="org.hibernate.envers.revision_field_name"      value="revision"/>
<property name="org.hibernate.envers.audit_strategy_validity_end_rev_field_name" value="revision_end"/>
<property name="org.hibernate.envers.revision_type_field_name" value="revision_type"/>
<property name="org.hibernate.envers.audit_strategy_validity_revend_timestamp_field_name" value="revision_end_timestamp"/>
<property name="hibernate.ejb.event.post-insert"                     value="org.hibernate.ejb.event.EJB3PostInsertEventListener,org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.post-update"                     value="org.hibernate.ejb.event.EJB3PostUpdateEventListener,org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.post-delete"                     value="org.hibernate.ejb.event.EJB3PostDeleteEventListener,org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.pre-collection-update"                   value="org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.pre-collection-remove"                   value="org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.post-collection-recreate"                    value="org.hibernate.envers.event.AuditEventListener" /> 
```

我很好奇如何在审计表中为 import.sql 中的所有插入条目创建自动条目。

如果有人这样做，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:07:24.213

上面的评论是正确的。Envers 在对象级别拦截实体操作，因此不会审核任何直接查询（包括例如使用 HQL/JPAQL 进行的批量插入/更新）。

这里的一个解决方案是使用对象来创建初始数据，或者编写一些 SQL 脚本来为每个插入的行创建一个初始修订和一个“插入”审计条目。

# c# - 使用 C#.NET 从多个图像合成

> ID：15525246
> 
> 赞同：1
> 
> 时间：2013-03-20T13:41:58.243
> 
> 标签：c#, .net, graphics, png

我有一个 PictureBox，在上面绘制来自文件的图像，一个在另一个之上（如果你熟悉的话，就像一个 Photoshop 分层概念）。作为 PNG 并且具有不透明度索引，这些图像是图像合成的完美候选者。但我不知道如何做到这一点并保存到文件中。

在下面的代码示例中，我将两个 PNG 图像加载到位图对象中，并将它们绘制在 PictureBox 上。

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    Rectangle DesRec = new Rectangle(0, 0, pictureBox1.Width, pictureBox1.Height);
    Bitmap bmp;
    Rectangle SrcRec;

    bmp = (Bitmap)Image.FromFile(Application.StartupPath + "\\Res\\base.png");
    SrcRec = new Rectangle(0, 0, bmp.Width, bmp.Height);

    e.Graphics.DrawImage(bmp, DesRec, SrcRec, GraphicsUnit.Pixel);

    bmp = (Bitmap)Image.FromFile(Application.StartupPath + "\\Res\\layer1.png");
    SrcRec = new Rectangle(0, 0, bmp.Width, bmp.Height);

    e.Graphics.DrawImage(bmp, DesRec, SrcRec, GraphicsUnit.Pixel);
} 
```

如何将合成保存到一个文件，最好是另一个 PNG 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:50:23.457

我会开始绘制一个中间的内存位图，然后我会保存它（如果真的需要，最终会在你的图片框中绘制）。像这样的东西：

```
var bmp = new Bitmap(pictureBox1.Width, pictureBox1.Height);

using (var graphics = Graphics.FromImage(bmp))
{
    // ...
    graphics.DrawImage(...);
    // ...
}

bmp.Save("c:\\test.png", ImageFormat.Png); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:45:59.963

谢谢你们俩。我决定按照 Efran Cobisi 的建议去做，并更改了程序，以便它首先在内存中进行创作。然后我可以随心所欲地使用它。

我反映更改的新代码如下 -

```
// Image objects to act as layers (which will hold the images to be composed)
Image Layer0 = new Bitmap(Application.StartupPath + "\\Res\\base.png");
Image Layer1 = new Bitmap(Application.StartupPath + "\\Res\\layer1.png");

//Creating the Canvas to draw on (I'll be saving/using this)
Image Canvas = new Bitmap(222, 225);

//Frame to define the dimentions
Rectangle Frame = new Rectangle(0, 0, 222, 225);

//To do drawing and stuffs
Graphics Artist = Graphics.FromImage(Canvas);

//Draw the layers on Canvas
Artist.DrawImage(Layer0, Frame, Frame, GraphicsUnit.Pixel);
Artist.DrawImage(Layer1, Frame, Frame, GraphicsUnit.Pixel);

//Free up resources when required
Artist.dispose();

//Show the Canvas in a PictureBox
pictureBox1.Image = Canvas;

//Save the Canvas image
Canvas.Save("MYIMG.PNG", ImageFormat.Png); 
```

显然，图像 ( `Canvas`) 保存的不透明度指数完好无损。

# cocoa-touch - 取消 URL 请求

> ID：15525247
> 
> 赞同：0
> 
> 时间：2013-03-20T13:41:59.267
> 
> 标签：cocoa-touch, nsurlrequest

我想知道是否有办法取消一个`URLRequest`？

例如，如果用户点击一个按钮，该按钮使用 a`URLRequest`从我的服务器获取数据，但随后改变主意并点击另一个按钮，该按钮使用从服务器返回的不同数据执行新请求。

我正在寻找类似`self cancelPreviousSelector`但为`URLRequest`s 的东西。

一如既往地非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:43:33.777

您可以通过向其发送取消命令来取消任何 NSURLConnection。

`[connection cancel];`

# php - 仅当值不为空时才更新 PHP/MYSQL

> ID：15525248
> 
> 赞同：3
> 
> 时间：2013-03-20T13:42:03.370
> 
> 标签：php, mysql, forms

我正在构建一个表单来更新多列数据。出于我的目的，此代码已部分成功。剩下要做的就是为更新查询包含（如果 IS NOT NULL）。我不知道该怎么做。

换句话说，我只希望在 $_POST 值不为空时执行 UPDATE。

```
<form>
<input type='text' name='input1' />
<input type='text' name='input2' />
<input type='text' name='input3' />
<input type='submit' value='submit' />
</form>

<?php
//db connect

$1=$_POST['input1'];
$2=$_POST['input2'];
$3=$_POST['input3'];

mysql_query("UPDATE table
             SET a = $1
                 b = $2
                 c = $3
             WHERE row = 'row_id");

);

?> 
```

在此先感谢您的帮助。

（为了让您免于额外输入，我的原始代码会转义字符，因此不需要 SQL 注入警告。我也在熟悉“mysqli_query”，因此也无需对此发表评论。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T13:43:46.413

您可以使用`COALESCE`

```
 UPDATE table
         SET a = COALESCE($1, a),
             b = COALESCE($2, b),
             c = COALESCE($3, c)
         WHERE row = '' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-29T20:04:59.507

```
COALESCE 
```

是解决方案。它类似于 Oracle 的 NVL。您可以使用参数在准备好的语句中使用它，如下所示

```
UPDATE
    tbl_cccustomerinfo
SET
    customerAddress = COALESCE(?,customerAddress),
    customerName =  COALESCE(?,customerName),
    description =  COALESCE(?,description)
WHERE
    contactNumber=? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-27T14:45:52.720

**合并**

COALESCE 是最好的选择。

**含义：** COALESCE(a,b) 仅表示*PUT **a**，但如果**a**为 NULL（在您的情况下不是 POSTED/PUT），则将其替换为**b**。*

```
 `mysql_query("UPDATE table
         SET a =COALESCE($1,a)
             b = COALESCE($2,b)
             c = COALESCE($3,c)
         WHERE row = 'row_id")` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T13:44:50.877

```
if(!empty($_POST['input1'])){ ...mysql query.. } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T13:55:01.700

```
<?php
$query="UPDATE table SET"
$query.=(!empty($_POST['input1']))? "a=$1,":"";
$query.=(!empty($_POST['input2']))? "b=$2,":"";
$query.=(!empty($_POST['input3']))? "c=$3,":"";
$query=substr($query,0,-1);
$query.="WHERE row = 'row_id'"
mysql_query($query);
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-29T20:31:40.977

只需制作一个数组即可。像这样：

```
if(empty($_POST['input1']) && empty($_POST['input2']) && empty($_POST['input3'])) {
   return false;
  } else {
   $updates = array();

   if(!empty($_POST['input1'])) 
     $updates[] = 'a='".$_POST['input1']."';

   if(!empty($_POST['input2'])) 
    $updates[] = 'b='".$_POST['input2']."';

   if(!empty($_POST['input3'])) 
    $updates[] = 'c='".$_POST['input3']."';

        $query = "UPDATE table SET".$updates."WHERE row_id=''";
        $sth = $sth->connect->prepare($query);
        $sth->execute();

        ));
   } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T13:56:43.213

试试这个：

```
$updateList = array();
if(!empty($_POST['input1'])) {
    $updateList[] = 'a = '.$_POST['input1'];
}

//Do it for every input...

if(!empty($updateList)) {
    $sql = 'UPDATE table SET '.implode(', ', $updateList).' WHERE row = 1';
} 
```

请注意，我没有转义/引用任何内容，因为您说您知道该怎么做。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-20T13:43:54.637

尝试一个简单的代码

```
$1  =   isset($_POST['input1'])? $_POST['input1'] : 'a';
$2  =   isset($_POST['input2'] ? $_POST['input2'] : 'b';
$3  =   isset($_POST['input3'] ? $_POST['input3'] : 'c';

if(count($_POST) > 0){

    mysql_query("UPDATE table
                 SET a = $1
                     b = $2
                     c = $3
                 WHERE row = 'row_id");

    );
} 
```

# matlab - 图像处理中的数字识别算法/指南

> ID：15525249
> 
> 赞同：0
> 
> 时间：2013-03-20T13:42:04.480
> 
> 标签：matlab, opencv, image-processing, image-recognition, object-recognition

我正在努力学习图像处理，并在这方面为自己设定了一个目标。一个号码识别系统。

因此，我学习了 Alasdair McAndrew 的 An Introduction to Digital Image Processing with Matlab，并了解了诸如边缘检测、阈值、膨胀和腐蚀以及命中和未命中变换等内容。

现在的问题是，我很难想象这些工具将如何帮助我实现目标。

我还有许多其他关于图像处理的书籍，虽然他们都教如何腐蚀或膨胀，但没有人告诉我如果我想识别图像中的对象、数字或字符该怎么做。

这真的很令人沮丧，因为在网上查找可以为这个问题提供非常笼统和广泛的答案。

谁能告诉我如何从我使用这些技术在绘画中制作的图像中识别数字。

如果不是至少可以建议我一本书甚至一个领域，因为在看了很多书之后，我得到的印象是我看错了方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:29:57.260

OCR 的方法太多，可能很难推荐任何具体的方法。但目前有许多免费的 OCR 系统可用，您可以下载其中一些并查看它们如何处理字符识别。我见过的开源项目如下：

gocr [http://jocr.sourceforge.net/](http://jocr.sourceforge.net/)

克拉拉-ocr [http://www.claraocr.org/](http://www.claraocr.org/)

cuneiform [https://launchpad.net/cuneiform-linux](https://launchpad.net/cuneiform-linux)（开源商业 ocr 引擎）

tesseract [http://code.google.com/p/tesseract-ocr/](http://code.google.com/p/tesseract-ocr/)（开源商业 ocr 引擎）。

先进的ocr引擎通常的做法是同时结合几种字符识别方法，然后使用某种投票机制来选择字符的最佳匹配。

通常所有的引擎都是从图像的聚类开始，将文本分割成单个字符。然后运行多个算法以尝试识别每个字符。例如，楔形文字 ocr 引擎使用 a) 特征检测（如字符中的笔画数），这是膨胀/等的地方。东西很有用 b) 将字符图像下采样到 15x15 大小，然后应用像识别器这样的神经网络。c) 针对特定字符的多个临时规则。

我认为，从神经网络或其他分类器（例如线性分类器或支持向量机分类器）开始是尝试并获得快速结果的最佳方法。

所以在你的地方，我将从简单的字符分割算法开始 + 在数字图像数据库上训练简单的神经网络/线性/支持向量机分类器。NIST 提供了手写数字图像的大型数据库。

# windows-phone-7 - 在 XNA 中为特定颜色着色

> ID：15525250
> 
> 赞同：1
> 
> 时间：2013-03-20T13:42:05.233
> 
> 标签：windows-phone-7, xna

我有一个带有白色轮廓的弹出纹理，我希望白色轮廓根据当前主题改变颜色。

不幸的是，`SpriteBatch.Draw()`用我想要的色调调用所有不透明的像素，而我想要的是只着色（在这种情况下）白色像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:24:37.527

使用两个纹理怎么样？一个只包含白色边框（所有其他像素都是透明的），一个包含弹出纹理。然后，您可以使用 将色调应用于边框纹理`SpriteBatch.Draw(borderTex,borderTex.Bounds,tintColor)`，并执行附加`SpriteBatch.Draw(tex,tex.Bounds,Color.White)`以在结果顶部对弹出纹理进行 blit。这样做的好处是您的绘图操作不受 CPU 限制（就像您发布的解决方案一样），因为 SpriteBatch 可以利用您的[GraphicsDevice](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.graphicsdevice.aspx) (GPU)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:12:49.443

So I ended up doing it this way, even though it's not that efficient. Thankfully I do it only once and during the LoadContent().

```
texture = content.Load<Texture2D>("popup");
Color[] colors = new Color[texture.Width * texture.Height];
texture.GetData(colors);
for (int i = 0; i < colors.Length; i++)
{
    if (colors[i] == Color.White)
    {
        colors[i] = PhoneTheme.Current.PhoneAccentColor;
    }
}
texture.SetData(colors); 
```

# perl - 使用 Perl 从 .obj 转换为 .h

> ID：15525256
> 
> 赞同：0
> 
> 时间：2013-03-20T13:42:23.573
> 
> 标签：perl, header-files, object-files, vuforia

我使用搅拌机生成了一个 obj 文件，现在我想将目标文件转换为头文件。我安装了 Perl 和 opj2opengl.pl，但我不知道应该使用哪个命令行以及应该编写哪些命令。一些网站建议写“opj2opengl.pl abc.obj”，但这对我不起作用。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:57:37.410

如果您使用的是 Windows，请尝试安装 Active Perl，然后放到控制台并运行：确保 perl 可执行文件位于环境设置中的路径变量中：

c:\ perl opj2opengl.pl yourobjfile.obj

如果您在 linux 机器上使用 perl，通常 perl 是预先安装的，但您可能必须先升级您的 perl 安装，但大多数时候您不需要。

在 linux 机器上，说 ubuntu.. cd 到包含 perl 脚本 (opj2opengl.pl) 的目录，然后从 bash 运行：

user@localhost> perl opj2opengl.pl yourobjfile.obj

yourobjfile => 您从 3D 工具（例如 photoshop、blender 等）导出的 obj 文件

如果正确完成，您应该从 obj2opengl.h 脚本中获得以下输出：

输入文件：./yourobjfile.obj 输出文件：yourobjfile.h 对象名称：yourobjfile 中心：

## 比例尺：xxxx

顶点：numvertices 面：numfaces 纹理坐标：numtexcoords 法线：numNormals

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T13:36:04.213

您应该将 myFile.obj 添加到您的脚本（obj2opengl.pl）所在的文件夹中。之后，您应该在当前窗口中启动终端，然后键入类似的内容：./obj2opengl.pl myFile.obj。您可以在当前文件夹中找到 myFile.h。这是我的情况：[![在此处输入图像描述](../Images/f049356ddb5acb6609198f9d8ea0d4ac.png)](https://i.stack.imgur.com/IMSBx.jpg)

# c# - C# WP8 从 listPicker 中获取选定的内容

> ID：15525258
> 
> 赞同：0
> 
> 时间：2013-03-20T13:42:27.160
> 
> 标签：c#, windows-phone-8, listpicker

我找不到获取和显示当前所选项目内容的方法，这里是 XAML：

```
<toolkit:ListPicker Name="lp" Header="Network" SelectionChanged="selectionChanged">
            <toolkit:ListPickerItem Content="aaa" />
            <toolkit:ListPickerItem Content="bbb" />
</toolkit:ListPicker> 
```

和其余的代码：

```
private void selectionChanged(object sender, SelectionChangedEventArgs e)
    {
        try
        {
            if (e.RemovedItems != null && e.RemovedItems.Count > 0)
            {
                if (this.lp.SelectedItem != null)
                {
                    var selectedItem = (sender as ListPicker).SelectedItem;
                    int selindex = lp.SelectedIndex; //just for testing
                    MessageBox.Show(selindex.ToString()); //just for testing
                    string text = (lp.SelectedItem as ListBoxItem).Content.ToString();
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

它在“字符串文本...”行给了我这个例外：

> *你调用的对象是空的*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T13:04:44.023

尝试使用下面的代码

```
try
{
   if (e.RemovedItems != null && e.RemovedItems.Count > 0)
   {
        if (this.mode.SelectedItem != null)
        {
             var selectedItem = (sender as ListPicker).SelectedItem as ListPickerItem;
             int selindex = mode.SelectedIndex; //just for testing
             MessageBox.Show(selindex.ToString()); //just for testing
             string text = (selectedItem as ListPickerItem).Content.ToString();
        }
   }
}
catch (Exception ex)
{
       MessageBox.Show(ex.Message);
} 
```

# user-defined-functions - 在 PIG 中执行 UDF 时出错

> ID：15525259
> 
> 赞同：0
> 
> 时间：2013-03-20T13:42:36.823
> 
> 标签：user-defined-functions, apache-pig

我正在尝试使用示例运行我的第一个 UDF

[http://wiki.apache.org/pig/UDFManual](http://wiki.apache.org/pig/UDFManual)。现在我的 FirstUdf.jar,myscript.pig 都在同一个文件夹中

我的 myscript.pig 如下

```
 REGISTER FirstUdf.jar; A = LOAD '/home/vishal/exampleforPIG1' AS
 (exchange: chararray, symbol: chararray, date: int,value:float); 
```

B =FOREACH A GENERATE myudfs.UPPER(symbol);

转储 B；

现在，当我给出以下命令来运行我的脚本时，它给了我以下错误

命令 -

> java -cp FirstUdf.jar home/vishal/FirstUdf.jar -x local myscript.pig

跟随错误——

> ERROR 1000：解析时出错。在第 1 行第 1 列遇到了“java”。

我给出的命令是错误的还是有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:08:20.390

您可以尝试以下方法：

硬编码您拥有的自定义 UDF 的路径：

```
REGISTER '/path/to/FirstUdf.jar';
DEFINE myUDF com.example.MyUDF();
...

Then:
pig -f myscript.pig -x local 
```

...或将其作为命令行参数传递：

```
REGISTER '$UDF_PATH/FirstUdf.jar';
DEFINE myUDF com.example.MyUDF();
...

Then:
pig -f myscript.pig -param UDF_PATH=/path/to -x local 
```

# iphone - 如何为文件夹中的所有文件和文件夹设置 NSURL 资源值

> ID：15525260
> 
> 赞同：2
> 
> 时间：2013-03-20T13:42:37.490
> 
> 标签：iphone, ios, nsurl

我试图通过将其设置为 来阻止整个文件夹及其内容备份到 iCloud，`NSURLIsExcludedFromBackupKey`如`1`指南中[所示](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)。我可以将密钥设置为文件夹的 URL，但是我保存在其中的所有数据都`0`具有`NSURLIsExcludedFromBackupKey`...

这是我的代码：

```
//create the directory:
[[NSFileManager defaultManager] createDirectoryAtPath:path withIntermediateDirectories:NO attributes:nil error:nil];
NSURL *folderURL = [NSURL fileURLWithPath:path isDirectory:YES];

//prevent backup:
NSError *preventBackupError = nil;
BOOL success = [folderURL setResourceValue: [NSNumber numberWithBool: YES]
                                    forKey: NSURLIsExcludedFromBackupKey
                                     error: &preventBackupError];        

//this prints 1 and 1:
NSLog(@"resource values for directory: %@", [folderURL resourceValuesForKeys:@[NSURLIsExcludedFromBackupKey, NSURLIsDirectoryKey] error:nil]); 
```

现在，如果我将文件（在本例中为`config.xml`）保存在 的子目录中`folderURL`，然后执行以下操作：

```
NSURL *fileURL = [NSURL fileURLWithPath:[path stringByAppendingPathComponent:@"config.xml"]];
if ([[NSFileManager defaultManager] fileExistsAtPath:fileURL.path]) {
    NSLog(@"resource values for config file: %@", [configURL resourceValuesForKeys:@[NSURLIsExcludedFromBackupKey] error:nil]);
} 
```

这打印`NSURLIsExcludedFromBackupKey = 0;`

我检查了其他 SO 答案，例如[this one](https://stackoverflow.com/questions/10836134/nsurlisexcludedfrombackupkey-can-not-be-set-correctly)、[this one](https://stackoverflow.com/questions/10866590/prevent-icloud-backup-of-folder)或[this one](https://stackoverflow.com/questions/12928509/cfurlsetresourcepropertyforkey-failed-when-disable-data-backup-on-nsdocumentdire)，我看不出我的语法有任何区别......

所以我的问题是，我是否必须手动将该密钥设置为文件夹中的每个文件？还是我做错了什么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:51:13.087

Cocoa 没有内置的单一方法将属性递归地应用于资源及其后代。我想其中一些原因是为了简化错误处理。但是，这样做非常罕见。

幸运的是，构建自己的非常容易：

1.  将所需的属性应用于有问题的目录资源
2.  询问`NSFileManager`目录枚举器
3.  枚举所有项目（默认情况下，`NSDirectoryEnumerator`将为您下降到所有子目录），也将属性应用于每个项目

不过，您的情况似乎不需要这样做；应用`NSURLIsExcludedFromBackupKey`到目录，并完成它。

# android - Android 解压 PNG，会导致潜在的内存不足错误

> ID：15525263
> 
> 赞同：0
> 
> 时间：2013-03-20T13:42:46.773
> 
> 标签：android, background-image, out-of-memory, memory-consumption

我在我的应用程序中使用一些 png 图像作为活动的背景。这些 png 文件大多是非常小的图像。例如，我正在使用大小为 768x1024 的磁盘，它实际上是 29.6KB 的磁盘。当我在我的三星 Note 1 上运行该应用程序时，我意识到图像实际上消耗了大约 10 分钟。3MB 内存。因此，Android 似乎将 PNG 文件解压缩为完整的 ARGB 位图（768x1024x4 字节）。我认为这可能是 Android 需要重新采样/调整图像大小并将 PNG 文件放入 drawable-nodpi 文件夹的结果，但这会导致相同数量的内存消耗。

那么，在这种情况下我应该怎么做，我能以某种方式阻止这种减压行为吗？我必须为这个项目中的许多活动放置许多不同的图像，所以似乎在某种程度上这会导致内存不足错误。我是 Android 的初学者，我不知道系统如何处理图像资源，所以我可能会在这里遗漏一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T03:27:16.570

尝试将这两行添加到 `in to the application tag`清单中

```
android:hardwareAccelerated="false"
android:largeHeap="true" 
```

但是，如果您正在构建一个内存效率高的应用程序，则不建议使用这些，但这确实有效。

# c++ - 继承和虚函数无法编译（来自 Head First DP）

> ID：15525270
> 
> 赞同：0
> 
> 时间：2013-03-20T13:43:10.187
> 
> 标签：c++, design-patterns

我是设计模式的新手，我正在尝试（Head First Design Patterns）的第一个示例，但我正在尝试用 C++ 对其进行编码。我无法编译我的代码！我不知道为什么。这是我的代码。

```
#include <iostream>
using namespace std;

class QuackBehavior
{
public:
    virtual void quack();
    virtual ~QuackBehavior();
};
class Quack : public QuackBehavior
{
public:
    void quack()
    {
        cout<<"Quacking"<<endl;
    }
};

class MuteQuack : public QuackBehavior
{
public:
    void quack()
    {
        cout<<"<<< Silence >>>"<<endl;
    }
};

class Squeak : public QuackBehavior
{
public:
    void quack()
    {
        cout<<"Squeak"<<endl;
    }
};

class FlyBehavior
{
public:
    virtual void fly();
    virtual ~FlyBehavior();
};

class FlyWithWings : public FlyBehavior
{
public:
    void fly()
    {
        cout<<"I'm flying"<<endl;
    }
};

class FlyNoWay : public FlyBehavior
{
public:
    void fly()
    {
        cout<<"I can't fly"<<endl;
    }
};

class Duck
{
public:
    FlyBehavior *flyBehavior;
    QuackBehavior *quackBehavior;

    void display();
    void performFly()
    {
        flyBehavior->fly();
    }
    void performQuack()
    {
        quackBehavior->quack();
    }

};

class MallardDuck : public Duck
{
public:
    MallardDuck()
    {
        quackBehavior = new Quack();
        flyBehavior = new FlyWithWings();
    }
};

int main()
{

    Duck *mallard = new MallardDuck;

    cout<<"Test"<<endl;

    mallard->performFly();
//  mallard->performQuack();

    return 0;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:15:54.090

您会收到编译错误，因为您没有为 QuackBehavior 类和 FlyBehavior 类中的函数提供默认定义。您可以提供默认实现或使函数纯虚拟。

进行以下两项更改，您的代码应该可以正常编译。

```
class QuackBehavior
{
      public:
          virtual void quack(){}
          virtual ~QuackBehavior(){}
};

class FlyBehavior
{
  public:
      virtual void fly(){}
      virtual ~FlyBehavior(){}
}; 
```

或者

```
class FlyBehavior
{
  public:
      virtual void fly() = 0;
};

class QuackBehavior
{
  public:
      virtual void quack() = 0;
}; 
```

# ssl - 如何在 openssl 命令行中传递自定义证书

> ID：15525273
> 
> 赞同：1
> 
> 时间：2013-03-20T13:43:20.173
> 
> 标签：ssl, openssl, libcurl

我是“openssl”的新手，我之前一直在使用 libcurl。由于我们面临连接问题，如果我们从命令行尝试，我被要求检查 ssl 连接是如何发生的。

我能够获取有关连接到服务器的信息。

由于连接是安全的，因此在我尝试创建连接时需要添加一些自定义证书。

有人可以告诉我如何在连接期间传递自定义证书（我可以将它们存储在哪里以供 openssl 使用？）？

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:05:51.117

您是在谈论自定义 CA 证书还是客户端证书？

您将 ca cert 提供给 s_client 的 -CApath 或 -CAfile 选项，或者如果您正在谈论您想要的客户端证书 -cert（和朋友）。

请参阅[s_client 的手册页](http://www.openssl.org/docs/apps/s_client.html)。

# android - 无法使用 Intent.ACTION_SEND 共享流媒体视频

> ID：15525280
> 
> 赞同：0
> 
> 时间：2013-03-20T13:43:34.303
> 
> 标签：android, android-intent, video-streaming

我正在尝试使用看起来像的代码共享 youtube 视频

```
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("video/*");
share.putExtra(Intent.EXTRA_STREAM, Uri.parse("https://www.youtube.com/watch?v=PW_88sL_2dA"));
startActivity(Intent.createChooser(share, "Share Video")); 
```

但这不会在任何应用程序中共享。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:54:50.447

可能是因为您使用的 URL 指向网页而不是视频。改用这个“ [http://www.youtube.com/embed/PW_88sL_2dA?feature=oembed](http://www.youtube.com/embed/PW_88sL_2dA?feature=oembed) ”并告诉我它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:51:23.660

> 无法将 youtube 视频分享到任何其他应用程序，

您只能将一些包含文件共享给其他应用程序。

> youtube 不允许分享该视频，因为它类似于从 youtube 下载视频，这是非常非法的。块引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T21:21:00.193

我知道答案来得很晚，但我正在寻找解决同样的问题。如何与 Facebook 分享 Youtube 链接？

对我有用的答案是在 Intent.EXTRA_TEXT 中添加视频链接并将类型设置为“text/plain”。

```
public static void startShareActionActivity(Context context,String subject,String text,String videoUrl)
{
    Intent emailIntent = new Intent(Intent.ACTION_SEND);
    emailIntent.setType("text/plain");
    emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
    emailIntent.putExtra(Intent.EXTRA_TEXT, videoUrl);
    emailIntent.putExtra(Intent.EXTRA_TITLE, text);
    context.startActivity(Intent.createChooser(emailIntent, "Select your favourite network"));
} 
```

# svg - 将 SVG 转换为 Raphael 的 js 时出现奇怪的结果

> ID：15525283
> 
> 赞同：0
> 
> 时间：2013-03-20T13:43:36.697
> 
> 标签：svg, raphael, svgweb

我试图将此图像与 Raphael 一起使用：http: [//upload.wikimedia.org/wikipedia/commons/9/9f/Argentina_Buenos_Aires_City_location_map.svg](http://upload.wikimedia.org/wikipedia/commons/9/9f/Argentina_Buenos_Aires_City_location_map.svg)

我将其转换为 js：[http ://toki-woki.net/p/SVG2RaphaelJS/](http://toki-woki.net/p/SVG2RaphaelJS/)

我明白了： ![转换后的图像](../Images/b985ecf81c7333ece1168b111dd89652.png)

知道我能做些什么来解决这个问题吗？当我在每个区域上方的inkscape中添加文本以稍后通过javascript进行更改时，这显然是最糟糕的。

我现在使用 SVGWEB 没有问题 购买我正在尝试另一种选择，因为我无法像我在这里所说的那样使 addeventlistener 在 IE7/8 中工作： [无法使用 SVGweb 在 Internet Explorer 中向 SVG 添加侦听器有什么](https://stackoverflow.com/questions/15119456/cant-add-listener-to-a-svg-in-internet-explorer-using-svgweb) 想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:00:56.440

改用 mapSVG 插件。

使用您的地图演示：http: [//map.karaliki.ru/bu.html](http://map.karaliki.ru/bu.html)（用鼠标滚轮放大） 它也适用于 IE7-8。

插件说明： http: [//map.karaliki.ru](http://map.karaliki.ru)

# ruby-on-rails - 使用 Arel 进行查询

> ID：15525288
> 
> 赞同：2
> 
> 时间：2013-03-20T13:43:46.850
> 
> 标签：ruby-on-rails, arel

我正在使用rails，并且我想使用arel 来执行此sql 查询。

```
"SELECT `people`.* FROM `peoples`  WHERE `peoples`.`home_id` = 289 AND (`people`.`created_at` BETWEEN '2013-03-12' AND '2013-03-15' AND (`people`.`first_name` LIKE '%jane%' OR `people`.`email` LIKE '%jane%'))" 
```

现在，我已经用 arel 解决了查询，但我想避免为必须匹配相同搜索变量的属性重复“matches("%#{search}%")”。

```
a.where(a.arel_table[:created_at].in(date_range).and(a.arel_table[:first_name].matches("%#{search}%").or(a.arel_table[:email].matches("%#{search}%")))) 
```

就像是：

```
a.where(a.arel_table[:created_at].in(date_range).and([:email, :first_name].each {|attr| or.(a.arel_table[:attr].matches("%#{search}%")))) 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:34:39.403

问题是条件看起来像 (((c1 or c2) or c3) or c4) 但似乎 Arel 的“或”概念是二元的。

所以不可能将它们定义为（c1 或 c2 或 c3 或 c4）。

# html - 嵌套表不按高度填充父 td

> ID：15525293
> 
> 赞同：1
> 
> 时间：2013-03-20T13:43:48.697
> 
> 标签：html, css, internet-explorer, markup, html-table

我在 IE9+ 中的标记遇到问题。嵌套`table`不会填充父级`td`。

这是[jsFiddle](http://jsfiddle.net/Crystall/fJ2WS/)。红色表格必须填满剩余的垂直尺寸。

在任何其他浏览器中一切正常。任何帮助表示赞赏。

* * *

**UPD。**刚刚添加了一张图片来显示我在 IE 中看到的内容。

![在此处输入图像描述](../Images/91891cb1ec9b681a54903584221a6790.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:53:21.157

我不认为单独在 CSS 中*完全*填充空间是可能的，但是折叠边框确实有点帮助：

```
table {
    border-collapse:collapse;
} 
```

![例子](../Images/c7ae1640900cd3fe56ae83424d26c576.png)

**编辑：**似乎你已经编辑了你的问题。

如果您的两个表都只有两行，则将元素设置`height`为`td`50% 似乎可以在 IE 中解决问题：

```
table td {
    height:50%;
} 
```

[http://jsfiddle.net/fJ2WS/3/](http://jsfiddle.net/fJ2WS/3/)

# openstack - OpenStack keystoneclient 按名称获取用户

> ID：15525297
> 
> 赞同：2
> 
> 时间：2013-03-20T13:43:53.873
> 
> 标签：openstack, keystone, openstack-horizon

我知道可以通过 id 获取用户，但我可用的只是名称。任何人都知道如何使用 keystone 客户端 v 2.0 按名称获取用户？

```
from keystoneclient.v2_0 import client
keystone = client.Client(username=USER,
                         password=PASS,
                         tenant_name=TENANT_NAME,
                         auth_url=KEYSTONE_URL)
user = keystone.users.get(USER_ID) 
```

**需要类似以下内容***** *** keystone.users.getByName(USER_NAME)**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T00:16:24.287

从 keystoneclient 想出一种方法来做到这一点。有点。

例子：

```
#!/usr/bin/env python

from keystoneclient.v2_0 import client
from keystoneclient import utils

keystone = client.Client(username='admin',
                         password='stack',
                         tenant_name='demo',
                         auth_url='http://192.168.122.236:5000/v2.0/')

def do_user_get(kc, args):
    """Display user details."""
    user = utils.find_resource(kc.users, args)
    utils.print_dict(user._info)

do_user_get (keystone, 'demo') 
```

除了 client.users 之外，还使用 ​​utils

util 中有一些额外的解析函数，您可能想查看。**

# asp.net-mvc - 我似乎无法为模型引用 App_Code 中的类来获取 Web 配置字符串

> ID：15525299
> 
> 赞同：0
> 
> 时间：2013-03-20T13:43:54.607
> 
> 标签：asp.net-mvc, web-config

我正在做一个项目，我们试图将两个数据库的所有引用封装在两个不同的服务器上。我们在 App_Code 内的“实用程序”文件中有这个：

```
 public static string myFirstDBName = System.Configuration.ConfigurationManager.AppSettings["firstDbName"];
        public static string mySecondDBName = System.Configuration.ConfigurationManager.AppSettings["secondDbName"]; 
```

我们可以在任何控制器中引用它没有问题。

但是，当我尝试在模型中引用它时，它看不到它 - 我尝试了 using 语句，但它不起作用。我希望将其从模型中提取出来并将其放入同一个实用程序文件中：

```
private readonly string _myFirstDBName = WebConfigurationManager.AppSettings["firstDBName"];
private readonly string _mySecondDBName = WebConfigurationManager.AppSettings["secondDBName"]; 
```

有人可以告诉我我是否遗漏了什么？或者我们应该把这个实用程序文件放在其他地方吗？提前致谢！

编辑：添加了我的 web.config 值以对应这个问题：

```
<appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="firstDBName" value="db1" />
    <add key="secondDBName" value="db2" />
</appSettings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:46:05.090

尝试 web.Config

```
<configuration>
      <connectionStrings>
            <add name="DBName" connectionString="Data Source=(local);Initial Catalog=DBName;User ID=uid;Password=pwrd;" providerName="System.Data.SqlClient" />
      </connectionStrings>
</configuration> 
```

您还可以在 web.Config 中添加应用设置

```
 <appSettings>
    <add key="KEY" value="VALUE" />
  </appSettings> 
```

关于评论的更新...

举这个例子

```
Model m = new Model();
m.prop = System.Configuration.ConfigurationManager.AppSettings["firstDBName"];
m.prop2 = System.Configuration.ConfigurationManager.AppSettings["secondDBName"];
return View("VIEWNAME", m); 
```

# perl - 使用 Config::Any 和 Config::General 驱动程序插入环境变量

> ID：15525305
> 
> 赞同：0
> 
> 时间：2013-03-20T13:44:04.370
> 
> 标签：perl, configuration

如何使用[Config::General](https://metacpan.org/module/Config%3a%3aGeneral)设置使用[Config::Any](https://metacpan.org/module/Config%3a%3aAny)插入环境变量。这是我从我的[OX](https://metacpan.org/module/OX)应用程序中提取的配置片段，它返回我的`.conf`罚款中指定的数据，除了我无法让它识别环境变量。

```
has config => (
  isa          => 'HashRef',
  is           => 'ro',
  lifecycle    => 'Singleton',
  dependencies => ['config_file'],
  block        => sub {
    my $s = shift;

    my $cfg
        = load_class('Config::Any')->load_files({
            flatten_to_hash => 1,
            use_ext         => 1,
            files           => [ $s->param('config_file') ],
            General         => {
                -InterPolateEnv => 1,
            },
        });

    return $cfg->{ $s->param('config_file') };
  },
); 
```

这是我的配置的几次尝试

```
<db>
   dsn $PERL_FEEDER_DSN
</db>

<db>
   dsn $ENV{PERL_FEEDER_DSN}
</db> 
```

这两个都以包含文字的 dsn 结束`$...`。

我以前做过，但我不知道我是怎么做到的，或者我可能做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:07:10.473

您需要`-InterPolateEnv => 1`结合指定`-InterPolateVars => 1`以便`Config::General::Interpolated`加载。据我了解，它`-InterPolateEnv => 1`本身不会触发该模块的加载。这是该模块理解的选项。

```
#!/usr/bin/env perl

use strict;
use warnings;
use Config::General;

my $conf = new Config::General(
    -ConfigFile      => 'test.conf',
    -InterPolateEnv => 1,
    -InterPolateVars => 1,
);

use YAML;
print Dump { $conf->getall }; 
```

配置文件：

```
<数据库>
   dsn $PERL_FEEDER_DSN
</db>
```

输出：

```
---
D b：
  dsn：测试
```

# youtube-api - 将视频从 tizen 上传到 youtube

> ID：15525308
> 
> 赞同：1
> 
> 时间：2013-03-20T13:44:08.847
> 
> 标签：youtube-api, tizen

我正在尝试将视频表单 tizen 上传到 youtube 帐户。我收到一条错误消息，提示“在请求中未找到文件”。有什么建议可以实施吗？

我正在按照[这里](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading)的程序进行操作。我完成到 3。我桌面上的视频已正确上传。但同样不适用于设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:40:12.220

我不知道您是从 Web 浏览器的上下文中执行上传，还是作为仅发出 HTTP 请求的应用程序执行上传。（我不熟悉 Tizen 平台。）

如果您只是编写一个发出 HTTP 请求的应用程序，那么不要尝试从您的应用程序复制基于浏览器的上传流程。相反，您可以使用[直接上传](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)或[可恢复上传](https://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads)流程。

如果您正在编写一个 Web 应用程序并且它在 Tizen 浏览器中失败并且在桌面浏览器上工作，那么这听起来像是 Tizen 浏览器中的一个错误。

# django - Django - Oracle 后端错误

> ID：15525312
> 
> 赞同：5
> 
> 时间：2013-03-20T13:44:16.480
> 
> 标签：django, oracle, oracle10g, django-orm, cx-oracle

我在 Django 中有以下模型：

```
class Event(models.Model):
    # some fields
    start_date = models.DateField()
    end_date = models.DateField() 
```

我正在使用带有 Django 1.5 和 cx_oracle 5.1.2 的 Oracle 10g 数据库。这里的问题是当我尝试在管理界面中创建一个新对象（从日历中选择日期）时，会引发以下错误：

```
ORA-01843: not a valid month 
```

`syncdb``DATE`在 oracle 中为`start_date`和创建了一个字段`end_date`。这看起来像后端错误还是我做错了什么？

我确实有其他模型，`DateTimeField()`当我保留新对象时它们工作正常，问题看起来与`DateField`它本身有关。

**更新：**我检查了后端实现，并在`backends/oracle/base.py`第 513 到 516 行：

```
cursor.execute(
    "ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI:SS'"
    " NLS_TIMESTAMP_FORMAT = 'YYYY-MM-DD HH24:MI:SS.FF'"
    + (" TIME_ZONE = 'UTC'" if settings.USE_TZ else '')) 
```

执行此语句允许插入语句具有`DATE`字段的文字值。我检查了后端生成的查询，它正在`'2013-03-20'`插入`start_date`and `end_date`。日期匹配`NLS_DATE_FORMAT`，所以理论上应该可以！

**更新**：我相信我的案例[与 cx_oracle 有关](https://stackoverflow.com/questions/15396241/cx-oracle-ora-01843-not-a-valid-month-with-unicode-parameter)。

**更新**：由于我仍然没有明确的答案（尽管我几乎可以肯定是 cx_oracle 导致了这个问题），我把我的`DateField`变成了一个`DateTimeField`可以翻译成 oracle 的`TIMESTAMP`并且工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T11:51:25.243

根据[jtiai](https://stackoverflow.com/users/546062/jtiai)问题[描述](https://stackoverflow.com/a/17269719/565525)，我做了以下解决方法 - 在调用任何有问题的 sql-s（例如 oracle 10.5.0.2 和 11.2.0.1，cx_oracle 5.1.2）之前，再次重置 NLS_DATE_FORMAT/NLS_TIMESTAMP_FORMAT - 在 django/db/backends/oracle 中完成/base.py 在方法中`def execute(...)`：

```
--- base.py 2013-10-31 12:19:24.000000000 +0100
+++ base_new.py 2013-10-31 12:20:32.000000000 +0100
@@ -707,6 +707,18 @@
         query = convert_unicode(query % tuple(args), self.charset)
         self._guess_input_sizes([params])
         try:
+            # BUG-WORKAROUND: ulr1-131031 
+            # https://stackoverflow.com/a/17269719/565525
+            # It's actually a bug in the Oracle 10.5.0.2 and 11.2.0.1\. Bug can be reproduced as following:
+            #     - set NLS_TIMESTAMP_FORMAT in session.
+            #     - Run any implicit or explicit TO_DATE conversion with unicode data.
+            #     - **Next implicit or explicit TO_TIMESTAMP with unicode data will trigger internal reset of timestamp format.**
+            #     - All consecutive TO_TIMESTAMP will fail and TO_CHAR of timestamp will produce invalid output.
+            self.cursor.execute(
+                "ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI:SS'"
+                " NLS_TIMESTAMP_FORMAT = 'YYYY-MM-DD HH24:MI:SS.FF'"
+                + (" TIME_ZONE = 'UTC'" if settings.USE_TZ else ''))
+
             return self.cursor.execute(query, self._param_generator(params))
         except Database.IntegrityError as e:
             six.reraise(utils.IntegrityError, utils.IntegrityError(*tuple(e.args)), sys.exc_info()[2]) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-04T07:01:40.797

错误的原因是您输入了一个日期，但该日期的月份部分不是有效月份。Oracle 针对这个问题给出了解决方案。

**1**`MONTH` - 使用 a或`MON`格式掩码重新输入日期值。月份的有效值为：

```
January
February
March
.......
//and soon 
```

或者

```
Jan
Feb
Mar
.......
//and soon 
```

**2** - 如果上述解决方案失败，请`to_date function`改用。

```
to_date( string1, [ format_mask ], [ nls_language ] ) 
```

# javascript - Javascript/RegEx 在文件名周围添加标签

> ID：15525318
> 
> 赞同：1
> 
> 时间：2013-03-20T13:44:31.197
> 
> 标签：javascript, regex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:12:15.610

快速回答：http: [//jsfiddle.net/dCE9k/1/](http://jsfiddle.net/dCE9k/1/)

我稍微更改了您的代码，请参阅小提琴以获取工作示例。

正则表达式应如下所示：

`/([a-zA-Z]:)?([\/\\])([a-zA-Z0-9\.]\2?)*/ig;`

它关心驱动器号，捕获目录分隔符并在整个文件路径中重用它。允许大写、小写、数字和点作为有效的文件名。

我使用了这个演示 HTML 代码

```
<p>\server\folder</p>
<p>\server\folder\</p>
<p>\server\folder\filename.txt</p>
<p>c:\</p>
<p>c:\folder</p>
<p>c:\folder\</p>
<p>c:\folder\filename.txt</p> 
```

我稍微调整了你的 JS 代码：

```
findAndReplace(document);

function findAndReplace(root) {
    var children = root.childNodes;
    var pattern = /([a-zA-Z]:)?([\/\\])([a-zA-Z0-9\.]\2?)*/ig; // applied new regex
    var node;

    for(var i = 0, l = children.length; i < l; i++) {
        node = children[i];
        if(node.nodeType === 3) { // we have a text node
            if (pattern.test(node.nodeValue)){ // This line changed (maybe not required)
                var newValue = "<b>" + node.nodeValue.match(pattern) + "</b>";
                node.parentElement.innerHTML = newValue; // This line changed
            }
        } else if(node.nodeType === 1) { // Element node
            findAndReplace(node);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:57:34.930

这是一个尝试的模式：

```
var pattern = /([a-z]:)?(\\\w+)+(\\|\.\w{3,4})?/; 
```

解释：

```
([a-z]:)?        -  optionally starts with a drive letter and colon
\\               -  backslash
\w+              -  folder name
(\\\w+)+         -  several subfolders possible
(\\|\.\w{3,4})?  -  optionally ends with a backslash or file extension
                    note that the file name would be caught by (\\\w+)+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:00:26.783

我尝试了您的代码，但它不起作用......即使我更正了正则表达式......

于是就有了解决办法：

```
 <!DOCTYPE html>
    <html>
    <head>
    <title>My Page</title>
    <script>
    function findAndReplace(root) {
        var children = root.childNodes;
        var pattern = /([a-zA-Z]:[\\\/]|[\\\/])(\w+[\\\/])*\w+\.\w{3}/g;
        var node;
        for(var i = 0, l = children.length; i < l; i++) {
            node = children[i];
            if(node.nodeType === 3) { // we have a text node
                if (node.nodeValue.match(pattern)) {
                    var mySpan = document.createElement("span");
                    mySpan.innerHTML = "<b>" + node.nodeValue.match(pattern) + "</b>";
                    node.parentNode.replaceChild(mySpan, node);
                }

            } else if(node.nodeType === 1) { // Element node
                findAndReplace(node);
            }
        }
    }
    </script>
    </head>
    <body onload="javascript:findAndReplace(document);">
    <form name="myform" action="test" method="POST">
    <div align="center"><br>
    <input type="radio" name="group1" value="Milk" /> Milk.txt<br />
    <input type="radio" name="group1" value="Butter" checked /> Butter.txt<br />
    <input type="radio" name="group1" value="Cheese" /> Cheese.tes
    <hr />
    <input type="radio" name="group2" value="Water"/> /bonjour.tsh<br />
    <input type="radio" name="group2" value="Beer" /> Beer.txt<br />
    <input type="radio" name="group2" value="Wine" checked /> /Milk.txt<br />
    </div>
    /Milk.txt
    </form>
    c:/bonjour/Milk.txt<br />
    c:\test.txt
    </body>
    </html> 
```

# javascript - 使用 jQuery 从子元素中选择父元素

> ID：15525319
> 
> 赞同：0
> 
> 时间：2013-03-20T13:44:38.667
> 
> 标签：javascript, jquery, css

我的代码：[http ://codepen.io/anon/pen/ABrDe](http://codepen.io/anon/pen/ABrDe)

当我单击“li”中的“a”元素时，我希望它获得“活动”类和向右的箭头（带有我写给 JS 部分的“跨度”）。“活动”部分没问题，但我对箭头部分感到困惑。我想我应该选择'li'，而不是'a'。但我只给“a”一个“活动”类。如何选择“作为'a'的父级的'li'，该'a'具有'active'类”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:46:33.380

jQuery 选择器：

```
$("a").parent("li").hasClass("active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:47:20.020

使用`parent`方法。

```
$("#resp-list a").click(function () {
     var _this=$(this);
     var parentItem=_this.parent();

    //do whatever you want with the parent.
}); 
```

此外，您可能需要使用`append`方法将跨度添加到 li。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:47:33.297

您使用以下方法检索父对象：

```
var parent = $(this).parent(); 
```

因此，在您的情况下，父 jQuery 对象将使用以下 DOM：

```
<li>
    <a href="#">Test ...</a>
</li> 
```

此外，在一个范围内将 jQuery 包裹在一个对象周围总是一个好主意。因此，当您多次使用选择器时，请将其保存到变量中。

```
var $this = $(this);
var $parent = $this.parent(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:50:56.547

看到这个：[小提琴](http://jsfiddle.net/xtmxq/1/)

```
 $("#resp-list a").click(function () {
     $(this).parent().siblings().find('a').removeClass("active");
     $(this).addClass("active"); 
     $(this).parent().add('<span class="fr arrow-right"></span>');
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:53:37.450

我编辑了你的小提琴，使其表现得如你所愿。

[http://cdpn.io/ABrDe](http://cdpn.io/ABrDe)

```
 $("#resp-list > li").on('click', 'a', function () {
        $("#resp-list > li > a").removeClass('active');
        $(this).addClass("active"); 
        $(this).parent().prepend('<span class="fr arrow-right"></span>');
   }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:16:25.653

看看这个...

[http://jsfiddle.net/qdZxQ/](http://jsfiddle.net/qdZxQ/)

$(document).ready(function(){ $("#resp-list a").click(function () {

```
 $("#resp-list a").removeClass("active");
    $(this).addClass("active"); 
    if($(this).hasClass("active")){
        $("#resp-list a span").remove();
        $(this).append('<span class="fr arrow-right"></span>');
    }
 }); 
```

});

希望这是你所期望的。

# c# - 如何从 Sharepoint Librarly 下载文档并以编程方式在 ASP.NET 中显示？

> ID：15525321
> 
> 赞同：1
> 
> 时间：2013-03-20T13:44:46.747
> 
> 标签：c#, asp.net, sharepoint-2010, download, sharepointdocumentlibrary

我创建了一个名为`"ARTICLES"`SHAREPOINT 的文档库，用于存储文档。现在，我想在 Repeater 中显示文档并单击它必须显示文档的行。并且所有文件都必须下载到应用程序文件夹中。

```
The application is pure asp.net application using c# and not a webpart or other. 
```

帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:25:14.740

尽管它可能不适合您的应用程序（而且它并不完全符合您的要求），但有一种更简单的方法可以实现您所描述的（适用于使用 Windows 身份验证的 Intranet 应用程序）。

它涉及两个部分：

1.  在您的 Web 应用程序中添加一个`IFRAME`指向您的 SharePoint 库（使用默认的 SharePoint Web 界面）。
2.  [可选] 向此库添加自定义母版页，以便您可以隐藏菜单等。

对于许多应用程序来说，这个解决方案就足够了，并且为您节省了编写集成代码（并在每次 SharePoint 更新时重新测试它）将应用程序与 SharePoint 解耦的麻烦。它还确保最终用户可以使用所有 SharePoint 功能，例如直接从 Word 上传更改等。

# javascript - 为什么 MIME 类型通常设置不正确？

> ID：15525326
> 
> 赞同：1
> 
> 时间：2013-03-20T13:44:54.230
> 
> 标签：javascript

Google Chrome 调试控制台报告以下内容

> 资源解释为图像，但使用 MIME 类型 application/octet-stream 传输：“ [http://static7.businessinsider.com/assets/images/faviconBI.ico](http://static7.businessinsider.com/assets/images/faviconBI.ico) ”。

其中有许多都是从其他域提供的。

根据this [SO Post](https://stackoverflow.com/questions/2041571/what-is-the-importance-of-correct-mime-types) ，这可能会导致安全问题。

我可以采取什么措施让这些域正确设置 MIME 类型。

在使用我使用的开源库之前，我遇到过这个问题，并且在我给他发电子邮件后，作者很好地修复了他的 mime 类型

但总的来说，似乎大多数域并不担心正确设置 mime 类型。

我怎样才能减轻这种情况？（我没有时间逐个域地执行此操作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:59:21.793

当您向服务器发出请求时，服务器会使用附加到响应的 MIME 类型进行响应。因此，如果服务器没有正确设置 MIME 类型，那么您将无能为力。

您当然可以编写自己的代理，但这将是一个代理。例如，如果你有一个 URL

```
http://foo.bar/test.js 
```

它返回 MIME 类型`text/html`（应该是`application/javascript`），然后您可以编写一个代理，它将为您获取该 URL，它将设置正确的 MIME 类型并将响应推送到您身边。由于代理将位于不同的域中，因此您必须通过（例如）访问 URL

```
http://proxy/?url=http://foo.bar/test.js 
```

现在，如果您尝试访问现有网页，显然它对您没有帮助，因为它们不会指向代理的 URL。

至于安全问题，是的，在极少数情况下 MIME 类型可能会导致副作用。但老实说，我在现实中从未听说过此类问题。如果您只提供图像，那么根本没有风险。

现在这种代理的性能受到严重影响，因为当然每个请求都必须通过代理。

# java - log4j.properties，放在哪里

> ID：15525328
> 
> 赞同：2
> 
> 时间：2013-03-20T13:44:57.727
> 
> 标签：java, eclipse, log4j

根据 log4j 手册，我应该把 log4j.properties 放到 src 文件夹中。我将此文件复制到我认为会影响 log4j 的所有可能的地方。但是，这不起作用。

TestEM 类包含许多单元测试功能（我使用 testng）。我运行这些测试函数之一，它引用了 feedback.strategy 包中的一个类。

![我的日食项目](../Images/3fdaf1d79b41f8b1d40ef1cac5cc0675.png)

这是 log4j.properties 文件的内容：

```
#log for class1
log4j.category.Demo1=DEBUG, dest1
log4j.appender.dest1=org.apache.log4j.FileAppender
log4j.appender.dest1.File=C:/Users/Asus/workspace/FeedbackProcess/logs/class1.log
log4j.appender.dest1.layout = org.apache.log4j.PatternLayout
log4j.appender.dest1.layout.ConversionPattern= %d %p [%t] (%c) \u2013 %m%n 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:03:58.860

这主要是一个惯例和/或个人喜好的问题。我习惯的是在项目根目录（和旁边）创建另一个源目录（例如或）*，*然后`config`将其放置在那里。这可以通过右键单击新创建的文件夹并选择**Build Path -> Use as Source Folder 来**完成。您也可以选择指定一些包含/排除模式。`resources``src``test``log4j.properties`

 **默认情况下，Log4j**在类路径的根目录中**查找属性文件。通过上述设置，属性文件被复制到输出目录，并且在开发过程中它将位于类路径的根目录中。

在部署的后期，它`log4j.properties`也会被捆绑在 jar/war 文件中。您可能希望通过在运行时在类路径上指定一个备用配置文件夹来覆盖捆绑的属性。（请参阅this other [question](https://stackoverflow.com/questions/6105124/java-classpath-classloading-multiple-versions-of-the-same-jar-project)和有关订单条目的[文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)优先于类路径）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T13:48:55.930

您需要将 log4j.properties 文件放在应用程序类路径中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:35:54.710

也许文件 log4j.properties 被正确读取，问题出在 log4j.properties 文件中的配置上。将此行添加到 log4j.properties 的开头是否有任何区别（假设您的类文件中有一些日志记录语句）

```
log4j.rootLogger=DEBUG, dest1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:53:04.627

将 log4j.properties 放在项目的 WEB-INF\classes 中。

将 log4j-xx.jar 放在 WEB-INF\lib 下 [查看详细信息](https://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it)**

# database-design - 如何在 ER 设计中完成活动/会议成员？

> ID：15525329
> 
> 赞同：0
> 
> 时间：2013-03-20T13:44:58.503
> 
> 标签：database-design, entity-relationship, diagram

我正在尝试为 Android 的学校项目设计 ER 图。该项目是关于考勤跟踪的。

我想我尽我所能创造了它，但我还有一个问题。

对于该项目，我们决定由用户创建一个事件，并且每个事件都会有成员和会议。

我的问题是：

我为每个活动分配了一些成员，然后我想在特定的一天创建一个会议，当然，因为这个会议是关于一个活动的，所以它应该包含该活动的相同成员。我怎样才能做到这一点？

例子：

> Event01（成员 1、成员 2、成员 3）
> 
> 会议1
> 
> 会议2
> 
> 会议3

所有三个会议都应该有相同的成员，因为他们是同一事件但在不同的日期。如何记录每个成员在每次会议中的出席情况？

这是我的ER图：

[![ER图](../Images/fcdde34bad4b0764dd0dce72772ef4dd.png)](https://i.stack.imgur.com/iaKd4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:36:38.677

你必须决定你的业务规则是什么。

如果假定会议的与会者是参加将要举行会议的活动的每个人，那么您可能不希望在和之间*存储*任何链接。根据您的业务规则，该信息将是多余的。`member``event`

如果会议的与会者必须是活动的与会者，而不是*所有*与会者，那么您希望直接存储会议与会者。使用您的架构强制执行此操作的最佳方法是在`meeting`和之间有一个交集`event_member`。

# c# - Microsoft.ACE.OLEDB.12.0 未注册到本地计算机

> ID：15525332
> 
> 赞同：3
> 
> 时间：2013-03-20T13:45:11.267
> 
> 标签：c#, ms-access-2007, visual-studio-2010

```
public partial class EnterData : Form
{
    OleDbConnection myconn=new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Buddiez\Documents\Visual Studio 2010\Projects\working with databse\working with databse\database.accdb");

    public EnterData()
    {
        InitializeComponent();
    }

    private void EnterData_Load(object sender, EventArgs e)
    {
    }
    private void btn_Save_Click(object sender, EventArgs e)
    {

        string connString = string.Format("insert into test_database values('{0}','{1}','{2}','{3}','{4}')", Convert.ToInt32(txtsno.Text), txtName.Text, Convert.ToInt32(txtage.Text), txtBackground.Text, txtAddress.Text);
        OleDbCommand myConn = new OleDbCommand(connString, myconn);
        try
        {
            myconn.Open();
            myConn.ExecuteNonQuery();
            MessageBox.Show("Entry Updated");
            myconn.Dispose();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

我已经将配置管理器配置到任何 CPU，即使我面临同样的问题 Microsoft.ACE.OLEDB.12.0 没有注册到本地机器...指导我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:48:54.607

听起来您需要安装 Microsoft Access Database Engine 2010 Redistributable。这将安装所有必要的依赖项，以便 Access OLEDB 驱动程序正常工作。

[你可以在这里得到它。](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

# sql - 行作为列 sql

> ID：15525333
> 
> 赞同：0
> 
> 时间：2013-03-20T13:45:12.297
> 
> 标签：sql, oracle11g, pivot

我有两张这样的桌子

表格1

```
profile
--------
id
---
1 | XXX
2 | zzz 
```

表 2

```
profile_details
-----------------
id |    K       |   V
---------------------------
1  | first_name | XXX
1  | last_name  | YYY
1  | gender     | female
2  | name       | zzzzz
2  | gender     | male
2  | phone      | 8999xxxx
2  | location   | india
2  | spoken_language | hindi 
```

我使用此查询将行获取为 cols

```
select profiles.id,
max( decode( k, 'first_name', v, NULL )) first_name,
max(decode(k, 'last_name', v, null))as last_name ,
max( decode( k, 'gender', v, NULL)) gender
from profile_details , profiles
where 
profile_details.id = profiles.id 
and
profile_details.id=1
group by profiles.id 
```

来找我

```
id | first_name| last_name | gender
--------------------------------------------
1  |   XXX     |  YYY      | female 
```

这可以将行作为列获取。但是如何更改此查询以动态包含列，因为 K 值可以是任何可能的值。

例如，对于 id 2，它应该是

```
id | name | gender | mobile   |   location  | spoken_language
------------------------------------------------------------------
2  | zzz  | male   | 8999xxxx |   india     | hindi 
```

谢谢 V

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:14:11.417

您在这里拥有的是一个实体-属性-值模式，通常用于在模式中提供灵活性。

不利的一面是，从现在开始，您所做的一切都将是难以言喻的痛苦和困难，包括这个，没有简单的解决方案。

这是关于这个主题的一课：[https ://www.simple-talk.com/opinion/opinion-pieces/bad-carma/](https://www.simple-talk.com/opinion/opinion-pieces/bad-carma/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:29:24.873

您可以使用动态 SQL 来生成要执行的字符串。

在 Oracle 中，我会使用一个过程，我可以传入必要的`id`值，然后返回一个`sys_refcursor`.

该过程将类似于以下内容：

```
CREATE OR REPLACE procedure dynamic_pivot_profile(p_cursor in out sys_refcursor, p_id in number)
as
    sql_query varchar2(1000) := 'select p.id ';

    begin
        for x in (select distinct k from profile_details where id=p_id order by 1)
        loop
            sql_query := sql_query ||
                ' , max(case when pd.k = '''||x.k||''' then pd.v end) as "'||x.k||'"';

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from profile p 
                                                inner join profile_details pd
                                                  on P.ID = pd.id
                                                where PD.ID = '||p_id||'
                                                group by p.id';
        dbms_output.put_line(sql_query);

        open p_cursor for sql_query;
    end;
/ 
```

然后您返回结果，我在 TOAD 中使用以下内容：

```
variable x refcursor
exec dynamic_pivot_profile(:x, 1) -- pass in your id
print x 
```

这将返回您提供的所需结果。

# php - 将 csv 文件中的数据读入 cakephp 数组

> ID：15525338
> 
> 赞同：0
> 
> 时间：2013-03-20T13:45:22.950
> 
> 标签：php, cakephp, fgetcsv

我正在 cakephp 中开发一个应用程序，我想在其中导入 csv 文件并将数据保存到数据库中。

所以我需要一些帮助来将 csv 文件读入一个数组，然后我会做一些验证并将数据插入数据库。

我进行了很多搜索，但找不到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:48:17.777

您应该在自定义模型中使用 CakePHP 已经存在的 csv 数据源。

它在这里 - [https://github.com/cakephp/datasources/blob/master/Model/Datasource/CsvSource.php](https://github.com/cakephp/datasources/blob/master/Model/Datasource/CsvSource.php)

请参阅[此处](http://book.cakephp.org/2.0/en/models/datasources.html)了解如何使用它们。

然后你就可以对它进行正常的`$model->find()`操作了！简单的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:47:40.837

试试看`fgetcsv()`，这里是文档：[fgetcsv()](http://php.net/manual/en/function.fgetcsv.php)

# seo - 谷歌搜索结果显示源代码

> ID：15525342
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:45:29.907
> 
> 标签：seo

当我帮助一位朋友建立她的网站时，我犯了一个错误。在将一些文本代码发送到服务器以测试服务器之前，我忘记上传 robots.txt。当她在 google 中搜索她的 url 时，她可以看到源代码作为第一个结果。

我现在将 robots.txt 上传到服务器上，但旧的源代码仍然存在，尽管我已经完全更改了代码。

我现在可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:30:31.653

下次 Google（或任何其他搜索引擎）抓取您的网站时，它会看到 robots.txt 文件并相应地重新索引（或删除）该网站。如果您现在绝对必须删除该网站，请访问[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734)。

# c++ - SSL_connect 和 SSL_ERROR_SYSCALL

> ID：15525344
> 
> 赞同：2
> 
> 时间：2013-03-20T13:45:35.703
> 
> 标签：c++, ubuntu, openssl

`SSL_connect()`支持 ssl v3 吗？我问这个的原因是，在访问该站点时：

```
https://secure53.onlineaccess1.com 
```

我得到了`SSL_connect(ssl)`<0 和`SSL_get_error()`5 的返回值，ERR_get_error() 为 0。所以最终结果是我发现因为`SSL_get_error()`是 5，

> SSL_ERROR_SYSCALL
> 
> 发生了一些 I/O 错误。OpenSSL 错误队列可能包含有关错误的更多信息。如果错误队列为空（即 ERR_get_error() 返回 0），则可以使用 ret 来查找有关错误的更多信息：如果 ret == 0，则观察到违反协议的 EOF。如果 ret == -1，则底层 BIO 报告 I/O 错误（对于 Unix 系统上的套接字 I/O，请参阅 errno 了解详细信息）。

由于`ERR_get_error()` 返回 0，`it means an EOF was observed that violates the protocol.`

但这是否意味着它不支持 sslv3？

我使用 curl 在命令行中尝试了 url，我不得不强制 v3 让它像这样工作：

```
curl -3 -v https://secure53.onlineaccess1.com 
```

有没有办法解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:49:50.007

我`SSLv23_method()`用来启动连接。但我最好的猜测是服务器不理解 sslv2。由于这种方法`will send out SSLv2 client hello messages and will indicate that it also understands SSLv3 and TLSv1`，服务器不明白我想要什么并关闭了连接`EOF`。

所以我尝试使用`SSLv3_method()`连接到该服务器并且它工作正常。所以我现在正在做的是尝试连接，`SSLv23_method()`如果它因`SSL_ERROR_SYSCALL`for`SSL_get_error()`和`0`for失败`ERR_get_error()`，我只是重置连接并重新开始`SSLv3_method()`。我知道，这不是最好的方法。但它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-16T16:34:45.477

如手册页中所示：

```
SSLv23_method(void), SSLv23_server_method(void), SSLv23_client_method(void)

A TLS/SSL connection established with these methods will understand the SSLv2, SSLv3, and TLSv1
protocol. 
A client will send out SSLv2 client hello messages and will indicate that it also understands     
SSLv3 and TLSv1\. 
A server will understand SSLv2, SSLv3, and TLSv1 client hello messages. 
This is the best choice when compatibility is a concern. 
```

因此，根据您使用的 openSSL 版本，当使用**SSLv23_client_method()**时，客户端将尝试与服务器协商他可以找到的最高协议层。

您的服务器很可能不支持 TLSv1.0 或更高版本。我会尝试以下方法：

```
SSL_CTX *sslCTX = SSL_CTX_new(SSLv23_client_method());
SSL_CTX_set_options(sslCTX, SSL_OP_ALL | SSL_OP_NO_TLSv1_2 | SSL_OP_NO_TLSv1_1 | SSL_OP_NO_TLSv1); 
```

有效地尝试与 SSLv3 协商并可能回退到 SSLv2

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-02T15:01:08.620

> 并且由于 ERR_get_error() 返回 0，这意味着观察到了违反协议的 EOF。

不，它说在这种情况下你应该咨询`ret`（强调我的）：

> SSL_ERROR_SYSCALL
> 
> 发生了一些 I/O 错误。OpenSSL 错误队列可能包含有关错误的更多信息。**如果错误队列为空（即 ERR_get_error() 返回 0），则可以使用 ret 来查找有关错误的更多信息**：如果 ret == 0，则观察到违反协议的 EOF。如果 ret == -1，则底层 BIO 报告 I/O 错误（对于 Unix 系统上的套接字 I/O，请参阅 errno 了解详细信息）。

`ret`被传递给你原始调用的返回码也是`SSL_get_error()`如此。您说您从. 如果它是 -1 并且您在 unix 系统上，您应该咨询以了解发生了什么（强调我的）：`ret``SSL_connect()``SSL_connect()``errno`

> SSL_ERROR_SYSCALL
> 
> 发生了一些 I/O 错误。OpenSSL 错误队列可能包含有关错误的更多信息。如果错误队列为空（即 ERR_get_error() 返回 0），则可以使用 ret 来查找有关错误的更多信息：如果 ret == 0，则观察到违反协议的 EOF。**如果 ret == -1，则底层 BIO 报告 I/O 错误（对于 Unix 系统上的套接字 I/O，请参阅 errno 了解详细信息）**。

# amazon-web-services - 将文件从 S3 下载到 EC2 期间出错

> ID：15525345
> 
> 赞同：2
> 
> 时间：2013-03-20T13:45:35.907
> 
> 标签：amazon-web-services, amazon-s3

当我使用“wget”命令将文件从亚马逊 S3 下载到亚马逊 EC2 实例时，它会给出以下消息并且文件未下载。

如何解决这个问题..？

**命令**：->

```
"wget https://s3.amazonaws.com/docsbucket/intro.doc" 
```

**错误消息**：->

```
"Resolving s3.amazonaws.com... 207.171.163.225
Connecting to s3.amazonaws.com|207.171.163.225|:443... connected.
HTTP request sent, awaiting response... 403 Forbidden
2013-03-20 13:06:00 ERROR 403: Forbidden." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:32:01.043

除非文件是公开的，否则您需要使用密钥进行身份验证才能下载文件。这可能是使用`s3cmd`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:17:26.140

您应该启动具有从 S3 存储桶读取的权限的 EC2 实例。

最简单的方法是使用角色。您只需在 AWS 的 IAM（身份和访问管理）服务中创建一个可以从 S3 读取的角色。然后，您使用此角色启动您的实例。AWS 将负责为实例获取正确的凭证，您可以使用 S3 CLI 工具获取您的 S3 对象。

您可以使用相同的“技巧”来访问其他资源以及对这些资源执行其他操作。

您可以在 AWS 文档中阅读更多相关信息：http: [//docs.aws.amazon.com/IAM/latest/UserGuide/role-usecase-ec2app.html](http://docs.aws.amazon.com/IAM/latest/UserGuide/role-usecase-ec2app.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-12T16:09:41.143

这在我向每个人授予文件的读取权限后起作用 转到权限选项卡->公共访问->单击每个人->然后授予读取权限

# android - 与标签作斗争

> ID：15525346
> 
> 赞同：0
> 
> 时间：2013-03-20T13:45:37.457
> 
> 标签：android, android-tabhost

我正在为我的第一个应用程序在 Android 中使用“TabHost”小部件而苦苦挣扎。

我已将我的 XML 布局定义为：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:layout_marginRight="5dp"
   android:orientation="horizontal"
   tools:context=".fragments.ConditionsDialogFragment" >

<TextView
    android:id="@+id/name_banner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/rounded_corner_button"
    android:text="ddddd"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#ffffff" />

<TextView
    android:id="@+id/name_lbl0"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/name_banner"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="10dp"
    android:text="Display Prompts"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<View
    android:id="@+id/firstDivider"
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:layout_below="@id/name_lbl0"
    android:layout_marginBottom="3dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="3dp"
    android:background="#BFBDBE" />

<TextView
    android:id="@+id/name_lbl1"
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/firstDivider"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="3dp"
    android:gravity="right"
    android:text="Order Placer :"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/cond_c01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/firstDivider"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="3dp"
    android:layout_toRightOf="@+id/name_lbl1"
    android:text="XXXX"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/name_lbl2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/name_lbl1"
    android:layout_below="@+id/name_lbl1"
    android:text="Specimen Taker :"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/cond_c02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/name_lbl1"
    android:layout_marginLeft="10dp"
    android:layout_toRightOf="@+id/name_lbl2"
    android:text="XXXX"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="15dp"
    android:layout_marginRight="10dp"
    android:text="OK" />

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/button1"
    android:layout_alignLeft="@+id/name_lbl1"
    android:layout_below="@+id/cond_c02"
    android:layout_marginTop="6dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost>

</RelativeLayout> 
```

布局在 a 中`DialogFragment`使用，代码如下：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View thisView = inflater.inflate(R.layout.nlmc_conditions, container, false);

    TextView bannerName = (TextView)thisView.findViewById(R.id.name_banner);
    TextView c01 = (TextView)thisView.findViewById(R.id.cond_c01);
    TextView c02 = (TextView)thisView.findViewById(R.id.cond_c02);

    c01.setText(cursor.getString(cursor.getColumnIndex("CHOICEORDERDISPLAY")));
    c02.setText(cursor.getString(cursor.getColumnIndex("CHOICETAKERDISPLAY")));

    TabHost tabHost = (TabHost)thisView.findViewById(android.R.id.tabhost);

    TabSpec ts = tabHost.newTabSpec("tag1");
        ts.setContent(R.id.tab1);
        ts.setIndicator("Tab one");
        tabHost.addTab(ts);

    bannerName.setText(conditions.Specimen + " specimen preconditions");

    return thisView;
} 
```

当它运行时，屏幕不显示并且应用程序失败，日志在这里：

```
 03-20 13:35:48.129: E/AndroidRuntime(17149): FATAL EXCEPTION: main
        03-20 13:35:48.129: E/AndroidRuntime(17149): java.lang.NullPointerException
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:629)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:624)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.widget.TabHost$TabSpec.setContent(TabHost.java:473)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at com.apps4care.nlmcbrowser.fragments.ConditionsDialogFragment.onCreateView(ConditionsDialogFragment.java:69)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.os.Handler.handleCallback(Handler.java:615)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.os.Handler.dispatchMessage(Handler.java:92)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.os.Looper.loop(Looper.java:137)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at android.app.ActivityThread.main(ActivityThread.java:4745)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at java.lang.reflect.Method.invokeNative(Native Method)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at java.lang.reflect.Method.invoke(Method.java:511)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        03-20 13:35:48.129: E/AndroidRuntime(17149):    at dalvik.system.NativeStart.main(Native Method)
        03-20 13:40:48.179: I/Process(17149): Sending signal. PID: 17149 SIG: 9 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:24:19.853

为了他人的利益，我发现了这个问题。

在使用 TabHost 类之前，我忘记添加以下内容。

```
tabHost.setup(); 
```

# c# - 如何将属性添加到 ListBox？

> ID：15525351
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:45:49.343
> 
> 标签：c#, wpf, xaml

VB6 有一个`fileListBox`with`.path`属性，我正在尝试将该属性添加到常规列表框。

```
ListBox myfilelistbox = new ListBox(); 
```

和生成的一个`XAML`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:50:40.690

ListBox 是一个以线性方式显示项目列表的通用控件。您想要做的是显示项目的层次结构，而不是它们的列表。

没有这样的内置控件，您必须自己构建一个或找到其他人已经实现的一些。

检查有关此其他堆栈溢出线程的更多信息[是否有 WPF 控件将在类似资源管理器的视图中显示文件列表？](https://stackoverflow.com/questions/2225466/is-there-a-wpf-control-which-will-show-a-list-of-files-in-an-explorer-like-view).

以下关于 CodeProject 的文章可以帮助您：[A WPF File ListView and ComboBox](http://www.codeproject.com/Articles/167873/A-WPF-File-ListView-and-ComboBox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:44:26.173

我认为您想要的是[附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx)

# c# - 尝试使用 C# 通过 wmi 远程访问

> ID：15525354
> 
> 赞同：1
> 
> 时间：2013-03-20T13:46:05.547
> 
> 标签：c#, .net, wmi, remote-access

我有这段代码：

```
private ManagementScope CreateNewManagementScope(string server)
    {
        string serverString = "\\\\" + server + "\\root\\cimv2";

        ConnectionOptions options = new ConnectionOptions();
        options.Username = "name";
        options.Password = "password";

        ManagementScope scope = new ManagementScope(serverString, options);
        scope.Connect();

        return scope;
    } 
```

使用该代码，我试图通过 WMI 远程访问另一台 PC。密码和用户名 100% 正确（我用 wmic /node:pc /username:name /password:pwd 对其进行了测试，这有效）但我被拒绝访问

> （来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

任何想法我做错了什么？我正在使用 Win 7/C#/.NET 4.0 感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:30:32.310

您可以尝试使用管理员凭据：

```
string serverString = @"\\" + strIPAddress + @"\root\cimv2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:56:18.997

检查其他机器安全事件日志上记录的内容，因为它会为您提供有关访问权限有什么问题的线索。

我很确定您可以在查看 TechNet 文章[“使用 Windows Vista 远程连接到 WMI”](http://msdn.microsoft.com/en-us/library/windows/desktop/aa822854)和相关文章后解决该问题。特别是这部分： [“设置 DCOM 安全性以允许用户远程访问计算机”](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393266#Setting_DCOM_Security_to_Allow_a_User_to_Access_a_Computer_Remotely)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T11:15:07.657

检查[Services+](http://servicesplus.codeplex.com/)（高级 Windows 服务管理器）的代码是否包含您需要的有关 WMI Win32_Service 的所有内容。

要进行故障排除或调试：

1.  确保计算机和服务器在同一个域中
2.  删除您的代码凭据并在您的代码中创建一个 EXE，然后以特权用户身份运行该 EXE。
3.  使用[Services+](http://servicesplus.codeplex.com/)（如上所述）或 Services.msc 连接到服务器。
4.  确保 RPC 服务正在远程服务器上运行。
5.  尝试暂时关闭服务器上的防火墙。

# javascript - 在前一个事件完成之前不执行函数（单击）

> ID：15525355
> 
> 赞同：0
> 
> 时间：2013-03-20T13:46:09.347
> 
> 标签：javascript, jquery

在上一个完成之前不要执行。如果快速单击，则脚本不正确。如果我点击几次，该功能将被执行而不等待完成。它变得凌乱。

```
$(".vid1 .next, .vid2 .next").click(function(){
        $(".type2").find(".crop").find(".left").find("div:last").clone().insertAfter($(".type1").find(".crop").find(".left").find("div:last"));
        $(".type2 .crop .left div:first").animate({marginLeft: '0px'}, 0);
        $(".type1").find(".crop").find(".left").find("div:first").clone().insertBefore($(".type2").find(".crop").find(".left").find("div:first"));
        $(".type2").find(".crop").find(".left").find("div:first").animate({marginLeft: '0px'}, 0);
        $(".type1").find(".crop").find(".left").find("div:first").animate(
            {marginLeft: '0px'}, {
            duration: 500,
            complete: function() { 
            $(".type1").find(".crop").find(".left").find("div:first").remove();
            $(".type1").find(".crop").find(".left").find("div:first").animate({marginLeft: '208px'}, 0);
            }
            }); 
        $(".type2").find(".crop").find(".left").find("div:first").animate(
            {marginLeft: '208px'}, {
            duration: 500,
            complete: function() { 
            $(".type2").find(".crop").find(".left").find("div:last").remove();
            }
            }); 
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:52:28.980

您可以在启动 Click 时将变量初始化为**True**，在 Complete 中将其返回为**False**。

每次他来点击，检查是否为True，然后退出该功能。

```
var isClicking=false;

$(".vid1 .next, .vid2 .next").click(function(){

  if(isClicking)
   return;
   isClicking=true;
        $(".type2").find(".crop").find(".left").find("div:last").clone().insertAfter($(".type1").find(".crop").find(".left").find("div:last"));
        $(".type2 .crop .left div:first").animate({marginLeft: '0px'}, 0);
        $(".type1").find(".crop").find(".left").find("div:first").clone().insertBefore($(".type2").find(".crop").find(".left").find("div:first"));
        $(".type2").find(".crop").find(".left").find("div:first").animate({marginLeft: '0px'}, 0);
        $(".type1").find(".crop").find(".left").find("div:first").animate(
            {marginLeft: '0px'}, {
            duration: 500,
            complete: function() { 
            $(".type1").find(".crop").find(".left").find("div:first").remove();
            $(".type1").find(".crop").find(".left").find("div:first").animate({marginLeft: '208px'}, 0);
            }
            }); 
        $(".type2").find(".crop").find(".left").find("div:first").animate(
            {marginLeft: '208px'}, {
            duration: 500,
            complete: function() { 
            $(".type2").find(".crop").find(".left").find("div:last").remove();
            isClicking=false;
            }
            }); 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:49:57.020

尝试先禁用按钮并在完成后启用按钮。

```
$(".vid1 .next, .vid2 .next").click(function(){
 $(this).attr("disabled", true);   
 $(".type2").find(".crop").find(".left").find("div:last").clone().insertAfter($(".type1").find(".crop").find(".left").find("div:last"));
        $(".type2 .crop .left div:first").animate({marginLeft: '0px'}, 0);
        $(".type1").find(".crop").find(".left").find("div:first").clone().insertBefore($(".type2").find(".crop").find(".left").find("div:first"));
        $(".type2").find(".crop").find(".left").find("div:first").animate({marginLeft: '0px'}, 0);
        $(".type1").find(".crop").find(".left").find("div:first").animate(
            {marginLeft: '0px'}, {
            duration: 500,
            complete: function() { 
            $(".type1").find(".crop").find(".left").find("div:first").remove();
            $(".type1").find(".crop").find(".left").find("div:first").animate({marginLeft: '208px'}, 0);
            }
            }); 
        $(".type2").find(".crop").find(".left").find("div:first").animate(
            {marginLeft: '208px'}, {
            duration: 500,
            complete: function() { 
            $(".type2").find(".crop").find(".left").find("div:last").remove();
            }
            }); 
  $(this).removeAttr("disabled");
    }); 
```

# sql - 将 SQLite 中的后续行与 JOINS 进行比较

> ID：15525358
> 
> 赞同：2
> 
> 时间：2013-03-20T13:46:20.627
> 
> 标签：sql, sqlite, join

我有一个表 MyTable 有一个有序列 A （没有主键）

```
A
____
2
3
4
10
13
14
20 
```

我想将此表与自身进行比较，所以我有类似的东西

```
T1.A  T2.A
________
2     3
3     4
4     10
10    13
13    14
14    20
20    null 
```

T1 和 T2 是 MyTable 的别名。

那么如何在不使用 WITH AS 之类的东西但使用普通 JOIN 的情况下将每一行与下一行进行比较？这是因为 SQLite 没有 WITH-AS 子句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:50:27.467

为此，请使用相关子查询：

```
select t1.a,
       (select t2.A from t t2 where t2.A > t1.A order by t2.A limit 1
       ) as NextA
from t t1 
```

# iis - 这是使用 powershell 获取远程 IIS 服务器上每个站点的物理路径的正确方法吗？

> ID：15525362
> 
> 赞同：1
> 
> 时间：2013-03-20T13:46:27.520
> 
> 标签：iis, powershell

我已经能够从远程服务器获取网站名称、ID 和日志文件位置。查找每个站点根目录的物理路径不太直观，并且在此消息末尾的循环中。这是访问每个站点物理路径的正确方法吗？我需要这个来测量每个站点的磁盘使用情况。

```
[Void][Reflection.Assembly]::LoadWithPartialName("Microsoft.Web.Administration")
$server = [Microsoft.Web.Administration.ServerManager]::OpenRemote($machine)
$sites = $server.Sites #| Select Id, Name, LogFile

IF ( $sites.count -ne 0 ) 
{
    $logRootDir =$sites[0].LogFile.Directory
    write-host "log root dir = $logRootDir" 
}
ELSE 
{
    write-host "there are no IIS websites on this machine"
    Exit
}

foreach ($site in $sites) 
{
    write-host $site.Id $site.Name
    $rootApp = $site.Applications | where { $_.Path -eq "/" }
    $rootVdir = $rootApp.VirtualDirectories | where { $_.Path -eq "/" }
    write-host "root dir = " $rootVdir.PhysicalPath
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:50:42.723

你可以从这个开始：

```
$lf = @{n='LogFile';e={Join-Path ($_.LogFile.Directory -replace '^%SystemDrive%','C:') "W3SVC$($_.Id)"}}
$pp = @{n='PhysicalPath';e={$_.Applications['/'].VirtualDirectories['/'].PhysicalPath}}

$server.Sites | Select Id,Name,$lf,$pp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T15:57:40.723

要将制表符分隔的列表另存为文本文件：

```
New-Item c:\sites.txt -type file -force
[Void][Reflection.Assembly]::LoadWithPartialName("Microsoft.Web.Administration")
$sm = New-Object Microsoft.Web.Administration.ServerManager
foreach($site in $sm.Sites)
{
    $root = $site.Applications | where { $_.Path -eq "/" }
    $rootVdir = $root.VirtualDirectories | where { $_.Path -eq "/" }
    Write-Output ($site.Name + "`t" + $site.State + "`t" + $rootVdir.PhysicalPath + "`t" + $site.Id + "`t" + $site.Bindings + "`t" + $root.ApplicationPoolName) >> c:\sites.txt
} 
```

# java - 将对象传递给另一个 Web 服务

> ID：15525363
> 
> 赞同：0
> 
> 时间：2013-03-20T13:46:28.707
> 
> 标签：java, web-services, rest

我有一个网络服务，我应该从这个网络服务将一个对象传递给另一个服务。我尝试使用 @Pathparam 和 @QueryParam 但我没有在我的服务中获得值。

我传递对象的代码是

```
public void MediatorCmpService() {
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);
    WebResource service = client.resource(getBaseURI()); 
    boolean flag = validateConfig(iFGetResponse);

    if (flag) {
        CustomerData customerData = transformationPayload(iFGetResponse);
        TrilliumxmlProducer tri=new TrilliumxmlProducer(customerData);
    }
    System.out.println(flag);
} 
```

在这里，我将 customerData 对象传递给我的 TrilliumxmlProducer 服务。但是这个对象没有被传递给 TrilliumxmlProducer 服务

TrilliumxmlProducer 的代码是

```
@Path("/generateTrillium")
public class TrilliumxmlProducer {
    // This method is called if XMLis request
    public TrilliumxmlProducer(CustomerData customerData) throws JAXBException {

        getXML(customerData);
        // TODO Auto-generated constructor stub
    }

    @GET
    @Produces({ MediaType.APPLICATION_XML })
    public CustomerData getXML(@QueryParam("customerData") CustomerData customerData) throws JAXBException {
        System.out.println("--------2----------" + customerData.getREQUESTTYPE());

        return customerData;
    }
} 
```

这里我的对象给出了空指针异常。有人能帮我一下吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:00:08.957

您似乎没有在请求中传递 QueryParameter。

PathParam 用于从路径中提取数据，即“endpoint/{id}/help”，然后PathParam“id”将返回“endpoint/”和“/help”之间的任何内容。

QueryParam 用于从 Query 中提取数据，即 "endpoint/help?id=" 然后 QueryParam 将返回您拥有的任何内容，而不是您的请求。

虽然在技术上是合法的，但您应该尽量避免混合和匹配，而只使用其中一种。

**编辑**

另外，虽然我不确定，但我非常有信心你不能/不应该使用对象图来传递你的休息资源。

# c# - 当我使用 Entity Framework 和 CodeFirst 方法将父实体的值设置为 null 时，如何从数据库中删除相关的子实体？

> ID：15525365
> 
> 赞同：2
> 
> 时间：2013-03-20T13:46:28.800
> 
> 标签：c#, entity-framework, code-first, cascading-deletes

例如，我有`Order`并且这个订单的`Reserve`字段有`ICollection<ReserveItem>`. 我现在拥有的是：

**订单类**

```
public class Order
{
    ...
    public Reserve Reserve {get; private set;}

    public void ClearReserve()
    {
        // Reserve.Items = null; or Resrver.Items.Clear()
        Reserve = null;
    }
} 
```

**预备班**

```
public class Reserve
{
     public ICollection<ReserveItems> Items {get; set;}
     public DateTime ExpireDate {get; set;}
} 
```

和**OrderRepository 类**

```
public OrderRepository
{
   ...
   public void ClearOrderReserve(Order order)   
   {
       order.ClearReserve();
       repostiry.InsertOrUpdate(order);
   }
   ...
} 
```

在我的**数据库上下文类**中，我有：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    ...
    modelBuilder.Entity<Reserve>()
                .HasMany(pr => pr.Items)
                .WithRequired()
                .WillCascadeOnDelete();
    ...
} 
```

如何正确删除方法`Order.Reserve`中的字段（将其值设置为`null`）并在删除时启动级联以从数据库`OrderRepository.ClearOrderReserve(Order order)`中删除冗余记录？`ICollection<ReserveItem>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:38:01.643

Setting reserve to null will not delete it. You must delete it through `DbSet<Reserve>`'s `Remove` method.

# bluetooth - 带有句柄消息的 ClassCastException

> ID：15525369
> 
> 赞同：0
> 
> 时间：2013-03-20T13:46:44.507
> 
> 标签：bluetooth, handle, classcastexception

调试蓝牙连接接收字符串等的代码。但是，似乎`ClassCastException`在代码行中得到了

```
String read_Message = (String) msg.obj; 
```

但是，如果我要使用我之前的代码并收集字节并将其放入一个字符串中，则运行但不会在一个字符串中收集所有数据。

我是不是因为我知道我错过了一些东西但看不到它而没有投射一些东西或错过一些东西。

如果需要更多代码，我会放置，其他一切都在工作

谢谢你的帮助

```
 // The Handler that gets information back from the BluetoothService
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) 
        {
            switch (msg.what)
            {
            case MESSAGE_STATE_CHANGE:
//              if (D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
                switch (msg.arg1) 
                {
                case BluetoothService.STATE_CONNECTED:
                    break;
                case BluetoothService.STATE_CONNECTING:
                    //mTitle.setText(R.string.title_connecting);
                    break;
                case BluetoothService.STATE_LISTEN:
                case BluetoothService.STATE_NONE:
                    //mTitle.setText(R.string.title_not_connected);
                    break;
                }
                break;
            case MESSAGE_WRITE:
                //code to be entered here
                break;
            case MESSAGE_READ:
                //Previous code
                //byte[] read_Buf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                //String read_Message = new String(read_Buf, 0, msg.arg1);

                String read_Message = (String) msg.obj;

                if (mSmokeReadingArrayAdapter.isEmpty())
                    mSmokeReadingArrayAdapter.add("");

                mAdapter_Text.set(0, mAdapter_Text.get(0).toString() + read_Message);  

                mSmokeReadingArrayAdapter.notifyDataSetChanged();

                organiseString(read_Message);
                break;
            case MESSAGE_DEVICE_NAME:
                //code to be entered here
                break;
            case MESSAGE_TOAST:
                Toast.makeText(getApplicationContext(), msg.getData().getString(TOAST), Toast.LENGTH_SHORT).show();     // shows 'alert' messages
                break;
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:18:11.353

问题解决了。这与定义为字节数组而不是字符串的蓝牙服务代码有关

# gwt - smartgwt + gin 代码拆分

> ID：15525382
> 
> 赞同：0
> 
> 时间：2013-03-20T13:47:09.910
> 
> 标签：gwt, smartgwt, gwt2, gwt-gin

我正在寻找例如使用 gin 和 smartgwt 的代码拆分...

在我的简单应用程序中，我有 2 个模块`AutoLoadModule`和`WindowModule`. 在我的简单应用程序中，我只需要在单击某个按钮时加载一个窗口。

我的窗口模块包含：

```
@Override
protected void configure() {
    bind(MainWindow.class).in(Singleton.class);

} 
```

我的`MainWindow`：

```
@Singleton
public class MainWindow extends Window implements SessionStatusChangedEvent.Handler {

    private final XmppSession session;

    @Inject
    private MainWindow(XmppSession session) {

        Log.debug("Constructor ImMainWindow... !");

        this.session = session;
        initComponent();
    }
    .................... 
```

在我的`AutoLoadModule`我有绑定`AutoLoad` `asEagerSingleton();`

```
 @Override
    protected void configure() {
    bind(StartButton.class).toProvider(StartChatButtonProvider.class);
        bind(AutoLoader.class).asEagerSingleton();

    } 
```

我的`AutoLoader`班级：

```
@Singleton
public class AutoLoader implements Scheduler.ScheduledCommand {

private final XmppConnection connection;
@Nullable
private final ImStartButton startButton;

    @Inject
    protected AutoLoader(final XmppConnection connection, final XmppSession session,
             final StartButton startButton) {
    this.startButton = startButton;

    Scheduler.get().scheduleDeferred(this);
    }

    @Override
    public final void execute() {
    startButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            Log.debug("StartButton click handler...");
                    //load window in this point but how ? ....
        }
    });
    }
} 
```

当窗口在时，是否可以使用代码拆分加载窗口实例`WindowModule`？在我的示例应用程序中，我只需要使用代码拆分按需加载窗口，并且该窗口必须位于 gin 模块中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:07:48.813

不确定要在哪里拆分代码，但是使用 gin 可以利用`AsyncProviders`并让 git 拆分代码。

```
@Inject
protected AutoLoader(
         final XmppConnection connection, 
         final XmppSession session,
         final StartButton startButton, 
         final AsyncProvider<MainWindow> mainProvider) {

  ...

  @Override
  public final void execute() {
    startButton.addClickHandler(new ClickHandler() {
      @Override
      public void onClick(ClickEvent event) {

        // Here Gin would split the code
        mainProvider.get(new AsyncCallback<MainWindow>() {
          public void onSuccess(MainWindow main) {
           ...
          }
        }

      }
    });
  } 
```

# javascript - 使用隐藏表列中的数据

> ID：15525385
> 
> 赞同：-4
> 
> 时间：2013-03-20T13:47:14.507
> 
> 标签：javascript, sql, visual-studio

如果整个列被隐藏，有没有办法访问表格列中的单元格数据。我使用visual studio制作了我的表格，数据来自oracle。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:51:17.310

好吧，如果您在 .NET 中将一列设置为不可见，它将不会显示在您的 HTML 代码中，因此显然无法在 javascript 中从中获取任何内容（因为您标记了您的问题 javascript 我想这就是您的意思试图达到）。

要么你在.NET中处理这个数据服务器端，要么让列出现在你的HTML中，然后用css隐藏它......

# android - 关于布局

> ID：15525387
> 
> 赞同：0
> 
> 时间：2013-03-20T13:47:15.870
> 
> 标签：android, android-layout

因为我是 Android 新手……我对 Layouts 有一点疑问？在所有布局中哪个布局更好和更可取（如果我的猜测没有错，我认为有 2 个布局相对布局，线性布局）布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:49:01.297

有超过 2 个布局，供需要使用：

FrameLayout ：作为视图框架显示单个对象的布局。

相对布局：使您能够指定子对象相对于彼此（子 A 在子 B 左侧）或相对于父对象（与父对象顶部对齐）的位置。

LinearLayout ：将其子级组织成单个水平或垂直行的布局。如果窗口的长度超过屏幕的长度，它会创建一个滚动条。

TableLayout ：具有任意数量的行和列的表格布局，每个单元格都包含您选择的小部件。行调整大小以适合最大列。单元格边框不可见。

# facebook - Facebook 的 REST API facebook.auth.getsession() 错误 100：参数无效

> ID：15525396
> 
> 赞同：0
> 
> 时间：2013-03-20T13:47:25.543
> 
> 标签：facebook, rest

我搜索了谷歌并找到了很多帖子，但我仍然坚持这一点。

我正在使用 REST 服务器，如下所示：

[https://api.facebook.com/restserver.php?api_key=xxxxxx&auth_token=xxxx&format=JSON&method=facebook.auth.getSession&sig=xxx&v=1.0](https://api.facebook.com/restserver.php?api_key=xxxxxx&auth_token=xxxx&format=JSON&method=facebook.auth.getSession&sig=xxx&v=1.0)

我知道所有值都是正确的，因为当我尝试更改它们时，我得到“签名不正确”错误。

我在这里做错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:26:58.267

改为使用 Graph API。我认为 Rest API 不起作用。

# android - 在父活动的子活动中检测何时按下家

> ID：15525398
> 
> 赞同：0
> 
> 时间：2013-03-20T13:47:27.190
> 
> 标签：android, android-intent

我在 Activity A 有一个文件名列表视图（存储在 sdcard 中的文件）。单击 listView 中的项目时，会触发 ACTION_VIEW 意图。它会显示用户可以打开文件的应用程序列表。当用户选择其中之一时，它会在活动 B 中打开文件。如果用户在查看文件时按下 HOME 按钮，我想删除存储在 SDCard 中的文件。我该怎么做？

我显然不能使用父 Activity 的 OnPause/OnStop 来删除文件，也无法访问通过 Intent 调用的 Activity 的 onPause/onStop。由于它是家庭新闻，我无法从活动 B 调用活动 A 的 onActivityResult。

无论如何在通过意图调用的活动中检测到主页按钮按下？还是有其他方法可以达到所需的结果？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:50:55.237

我认为您无法响应主页按键。这是为了防止应用程序劫持它。请参阅[KeyEvent.KEYCODE_HOME](https://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HOME) - 根据文档，“键代码常量：主页键。此键由框架处理，永远不会传递给应用程序。”

# asp.net-mvc - 如何在 MVC3 Razor 中获取附加的 excel 表的标题值

> ID：15525403
> 
> 赞同：0
> 
> 时间：2013-03-20T13:47:32.353
> 
> 标签：asp.net-mvc, razor

在我的 MVC3 Razor 项目中，我有一个疑问。情况是这样的： 1）我有一个前端，我有一个文件上传和下一页导航按钮。

```
@using (Html.BeginForm("ConvertToUniCode", "Import", FormMethod.Post, new {enctype = "multipart/form-data"})) { 

        <table>
            <tr><td></td><td></td><td></td></tr>
            <tr>
                <td>
                    <label>Choose File:<input id="selectfile" type='file' data-val="true" data-val-required="please select a file" name='file' /></label></td>
                <td>
                    <input type="submit" value="Next" /></td>
                <td></td>
            </tr>

        </table>
       } 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
        public ActionResult ConvertToUniCode(HttpPostedFileBase file)
        {
        //HttpPostedFile file= new HttpPostedFile();
            if(file.ContentLength>0)
            {
                string fileName =Path.GetFileName(file.FileName);
                string fileSavePath = Server.MapPath("~/App_Data/ImportFileHome/"+ fileName);
                file.SaveAs(fileSavePath);
                FileStream fs = new FileStream(fileSavePath, FileMode.Open, FileAccess.Read);

//Here i need to get the header coloumn values.
            }
2) In the Second page i have a DropDownListFor control for binding the header values one by one.
3) Todo that i need to read the excel sheet header coloumn values. 
```

Excel 表是这样的。

```
-------------------------------
  Name   |   Age   | Address |    ==> Coloum Header
-------------------------------
jasper   | 26      |India    | 
```

我需要获取标题值名称、年龄、地址。怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:17:52.723

您可以使用 OLEDB。您可以从使用 DataTable 方法定义此代码的[问题](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/f8bfc7a2-91ef-4558-8ac8-910b2fdfeee8/)中收集此信息：

```
DataTable schemaTable = connection.GetSchema("Columns");
// Each row can then get the column via:
string name = (string)row["COLUMN_NAME"]; 
```

# python - 如何使用 boto 从作业中提取 FreeText 答案

> ID：15525408
> 
> 赞同：2
> 
> 时间：2013-03-20T13:47:45.697
> 
> 标签：python, boto, mechanicalturk

我正在尝试使用 boto 库提取 Amazon Mechanical Turk 的工作人员提交的自由文本答案。

```
assignments = conn.get_assignments(hit_id)
for assignment in assignments:
    worker = assignment.WorkerId
    answer = assignment.Answer 
```

在这里，我希望 answer 是一个工人提交的自由文本字符串（HIT 要求工人提交的唯一内容），但是，上面的代码并没有给我这个。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-10T10:04:09.607

在 boto 中，为了获取您正在寻找的*FreeText*信息，您需要遍历**分配**属性**answers**。除非您提交了多个表单，否则您的表单应该是第一个索引。

此列表的类型为**QuestionFormAnswer**

[这是关于 QuestionFormAnswer http://sourcecodebrowser.com/python-boto/2.3.0/classboto_1_1mturk_1_1connection_1_1_question_form_answer.html](http://sourcecodebrowser.com/python-boto/2.3.0/classboto_1_1mturk_1_1connection_1_1_question_form_answer.html)的 boto 文档

可以看到你真正想要的属性是**qid**和**fields**

这是一些应该更有意义的更新代码。

```
assignments = conn.get_assignments(hit_id)
for assignment in assignments:
    worker_id = assignment.WorkerId
    # Iterate through question forms answers which are our fields
    for question_form_answer in assignment.answers[0]:
        field_id = question_form_answer.qid
        field_value = question_form_answer.fields 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:13:49.550

我认为上面示例中的赋值对象将有一个名为的属性`answers`，它是一个`QuestionFormAnswer`对象列表。这些对象中的每一个都应该有一个名为 的属性`FreeText`。

# web-services - VBA - 到 Sharepoint 上的 Web 访问表的数据字符串连接

> ID：15525410
> 
> 赞同：1
> 
> 时间：2013-03-20T13:47:46.947
> 
> 标签：web-services, excel, vba, sharepoint

我想知道是否可以通过 VBA 连接 SharePoint 2010 和 Excel 2010 上托管的 Access 2010 表来创建数据连接？如果是这样，代码会是什么样子？代码需要在 vba 中用于 excel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:24:51.160

自从我的原始帖子以来，我找到了解决方法，我希望这对其他人有所帮助。这是将 excel 连接到 Access 服务表所需的连接字符串。

```
Sub LinkedSharePointList()

 ActiveSheet.ListObjects.Add SourceType:=xlSrcExternal, _
 Source:=Array("URL HERE", "TABLE NAME HERE", _
 "{GUID HERE}"), LinkSource:=True, Destination:=Range("A1")

End Sub 
```

***请务必注意，您必须将 excel 文件另存为 97-2003 .xls 文件。excel 文件仍将运行宏并保存（尽管在您尝试保存文件时会出现警告，只需选中不要提醒我框）。此外，为了让表更新到您的访问服务表，您需要右键单击表（在 excel 中）-> 表-> 同步到 SharePoint 列表。

我还编写了一个宏来使用按钮控件更新访问服务表，但这里没有包含它。如果您不确定您的 GUID 是什么，则将表从访问服务导入 excel，在数据选项卡-> 连接-> 属性-> 定义和“命令文本：”之后将是 GUID。

# c# - C# Lambda 函数：返回数据

> ID：15525412
> 
> 赞同：15
> 
> 时间：2013-03-20T13:47:50.727
> 
> 标签：c#, .net, delegates, anonymous-function, lambda

我是否遗漏了什么，或者不可能从 lambda 函数返回一个值，例如..

`Object test = () => { return new Object(); };`

或者

`string test = () => { return "hello"; };`

我收到构建错误“无法将 lambda 表达式转换为类型‘字符串’，因为它不是委托类型”。

就像这种语法分配了 lambda 而不是 lambda 的结果，这是我没想到的。我可以通过将函数分配给 Func 并按名称调用它来实现所需的功能，但这是唯一的方法吗？

请不要“为什么需要这样做？” 关于我的例子。

提前致谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-20T13:49:14.713

这是可能的，但您正在尝试将 lambda 分配给`string`. – 您需要*调用*lambda：

```
Func<string> f = () => { return "hello"; };
string test = f(); 
```

错误消息实际上说明了一切：

> 无法将 lambda 表达式转换为类型“字符串”

……这正是这里的问题。

如果你想调用 lambda inline - 但实际上：*为什么*？– 你也可以这样做，你只需要先明确地把它变成一个委托：

```
string test = (new Func<string>(() => { return "hello"; }))(); 
```

# python - 试图制作ASCII图python 3

> ID：15525416
> 
> 赞同：2
> 
> 时间：2013-03-20T13:47:59.147
> 
> 标签：python, loops, printing, graph, ascii

我正在尝试使用 python 循环制作一个 ASCII 图。目标是让用户输入输入（公式）[x+1] 等并打印出图形。图形的域和范围仅从 -10 到 +10。

我设法让它工作，但仅适用于公式 (-x+1)，即我的代码中的 (x+1)。

我知道问题是因为我的循环从顶部开始打印它，所以我必须更改它以便它以负方向打印循环，但我被困在如何将我的图形组合成嵌套循环以便打印它out 正确，然后替换函数输出的对应位置。

我现在在想，也许我应该让它打印出'*'线，然后是它周围的图表，但我认为这更复杂。

如果你需要，我可以给你更多信息。

任何建设性的想法将不胜感激。

这是我的代码，让我知道你的想法。

```
height=20
w=10
x=0
for a in range(0,11):
    ps= ((" " * w)+('|')+(" " * w))
    ps=list(ps)
    ps[x]="*"
    x=x+1
    pp="".join(ps)
    print(pp)

rs=(('-'*10)+('+')+('-'*10))
rs=list(rs)
rs[x]="*"
rr="".join(rs)
print(rr)

for a in range(0,10):
    ws = ((" " * w)+('|')+(" " * w))
    ws=list(ws)
    y=x+1
    ws[y]="*"
    x=x+1
    wp="".join(ws)
    print(wp) 
```

这是下面的输出：

```
*         |          
 *        |          
  *       |          
   *      |          
    *     |          
     *    |          
      *   |          
       *  |          
        * |          
         *|          
          *          
----------+*---------
          | *        
          |  *       
          |   *      
          |    *     
          |     *    
          |      *   
          |       *  
          |        * 
          |         * 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:07:52.890

这是解决问题的另一种方法：

1.  创建一个二维数组，每个元素都是一个字符
2.  预先填写背景图线
3.  循环遍历每个 x 位置，并计算四舍五入的 y 位置
4.  将位置插入`*`到您的二维数组中
5.  最后将整个二维数组打印为一组线

对于 5，这是一个方便的 python 代码片段 -`''.join(myArray)`

您会注意到，这种解决方法将数据结果的计算与实际输出分开。这通常是在简单程序中分离逻辑的好方法：

1.  处理、过滤、清理和组织您的程序输入数据
2.  对输入进行数据处理
3.  制定、格式化和输出处理后的数据

如果您通过这三个通用/“元”步骤组织您的程序，它可以帮助更多地组织您的代码并使其更易于理解。

# internet-explorer - RadCombobox 在 IE 上的每次回发时触发 SelectedIndexChanged

> ID：15525421
> 
> 赞同：2
> 
> 时间：2013-03-20T13:48:08.757
> 
> 标签：internet-explorer, telerik, telerik-combobox

所以，我的问题是，我有一个从代码隐藏中填充的 RadCombobox。但根据选择的记录，它会在每次回发时触发 SelectedIndexChanged。

在测试了我的 Combobox 中的每个项目后，我发现了这个：

我的组合有这些项目：

1.  富
2.  酒吧
3.  富吧

如果我选择“Foo Bar”，我就会遇到这个问题，并且 SelectedIndexChanged 会随处触发。这是因为来自我的数据库的空格字符是字符 160（不间断空格，\u00A0）而不是通常的字符 32。根据这篇博文（[http://www.adamkoch.com/2009 /07/25/white-space-and-character-160/](http://www.adamkoch.com/2009/07/25/white-space-and-character-160/)），IE 以不同的方式处理它们。如果在加载我的项目后，我将 160 字符替换为 32，一切正常。

我的问题是：有人遇到过这个问题吗？这是一个错误吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:52:22.323

我有同样的问题。我的解决方法是检查 SelectedIndexChanged 事件中的 OldValue 和 Value：

```
 protected void dd_SelectedIndexChanged(object o, Telerik.Web.UI.RadComboBoxSelectedIndexChangedEventArgs e)
    {
        if (e.OldValue != e.Value)
        {
            //value changed
        }
    } 
```

# datepicker - Kendo Ui DatePicker 无法在 IE 中选择日期

> ID：15525423
> 
> 赞同：2
> 
> 时间：2013-03-20T13:48:10.433
> 
> 标签：datepicker, internet-explorer-9, kendo-ui, ie8-compatibility-mode

有没有人在 IE9 兼容模式下对剑道 DatePicker 有问题？除了底部的当前日期外，我无法从日历中选择日期。我发现了这篇文章，[jQuery UI datepicker IE problem](https://stackoverflow.com/questions/3700233/jquery-ui-datepicker-ie-problem)，但它没有提供任何关于该问题的线索。这篇文章[http://www.kendoui.c](http://www.kendoui.com/forums/ui/date-time-pickers/datepicker-use-ie9-compatibility-mode-ie7-or-ie8-day-not-selected.aspx) ​​om/forums/ui/date-time-pickers/datepicker-use-ie9-compatibility-mode-ie7-or-ie8-day-not-selected.aspx也解决了问题，但问题仍然存在。我目前正在运行 Kendo UI Web 2013.1.319 Open Source。通常，在 Firefox、Chrome 和其他现代浏览器中，一切都按预期工作。感谢您提供的任何帮助。

# matplotlib - 如何解决 python 多处理 matplotlib savefig() 问题？

> ID：15525431
> 
> 赞同：5
> 
> 时间：2013-03-20T13:48:32.557
> 
> 标签：matplotlib, multiprocessing

我想通过多处理模块为许多图形加速 matplotlib.savefig()，并尝试对并行和序列之间的性能进行基准测试。

以下是代码：

```
# -*- coding: utf-8 -*-
"""
Compare the time of matplotlib savefig() in parallel and sequence
"""

import numpy as np
import matplotlib.pyplot as plt
import multiprocessing
import time

def gen_fig_list(n):
    ''' generate a list to contain n demo scatter figure object '''
    plt.ioff()
    fig_list = []
    for i in range(n):
        plt.figure();
        dt = np.random.randn(5, 4);
        fig = plt.scatter(dt[:,0], dt[:,1], s=abs(dt[:,2]*1000), c=abs(dt[:,3]*100)).get_figure()
        fig.FM_figname = "img"+str(i)
        fig_list.append(fig)
    plt.ion()
    return fig_list

def savefig_worker(fig, img_type, folder):
    file_name = folder+"\\"+fig.FM_figname+"."+img_type
    fig.savefig(file_name, format=img_type, dpi=fig.dpi)
    return file_name

def parallel_savefig(fig_list, folder):
    proclist = []
    for fig in fig_list:
        print fig.FM_figname,
        p = multiprocessing.Process(target=savefig_worker, args=(fig, 'png', folder)) # cause error
        proclist.append(p)
        p.start()

    for i in proclist:
        i.join()

if __name__ == '__main__':
    folder_1, folder_2 = 'Z:\\A1', 'Z:\\A2'
    fig_list = gen_fig_list(10)

    t1 = time.time()
    parallel_savefig(fig_list,folder_1)
    t2 = time.time()
    print '\nMulprocessing time    : %0.3f'%((t2-t1))

    t3 = time.time()
    for fig in fig_list:
        savefig_worker(fig, 'png', folder_2)
    t4 = time.time()
    print 'Non_Mulprocessing time: %0.3f'%((t4-t3)) 
```

我遇到`"This application has requested the Runtime to terminate it in an unusual way. Please contact the application's support team for more information."`了由`p = multiprocessing.Process(target=savefig_worker, args=(fig, 'png', folder))`.

为什么 ？以及如何解决？

（Windows XP + Python：2.6.1 + Numpy：1.6.2 + Matplotlib：1.2.0）

**编辑：（在 python 2.7.3 上添加错误消息）**

在 python 2.7.3 的 IDLE 上运行时，它会给出以下错误消息：

```
>>> 
img0

Traceback (most recent call last):
  File "C:\Documents and Settings\Administrator\desktop\mulsavefig_pilot.py", line 61, in <module>
    proc.start()
  File "d:\Python27\lib\multiprocessing\process.py", line 130, in start

  File "d:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "d:\Python27\lib\pickle.py", line 748, in save_global
    (obj, module, name))
PicklingError: Can't pickle <function notify_axes_change at 0x029F5030>: it's not found as matplotlib.backends.backend_qt4.notify_axes_change 
```

**编辑：（我的解决方案演示）**

受[Matplotlib 启发：在多个线程中同时绘图](https://stackoverflow.com/questions/4659680/matplotlib-simultaneous-plotting-in-multiple-threads/4662511#4662511)

```
# -*- coding: utf-8 -*-
"""
Compare the time of matplotlib savefig() in parallel and sequence
"""

import numpy as np
import matplotlib.pyplot as plt
import multiprocessing
import time

def gen_data(fig_qty, bubble_qty):
    ''' generate data for fig drawing '''
    dt = np.random.randn(fig_qty, bubble_qty, 4)
    return dt

def parallel_savefig(draw_data, folder):
    ''' prepare data and pass to worker '''

    pool = multiprocessing.Pool()

    fig_qty = len(draw_data)
    fig_para = zip(range(fig_qty), draw_data, [folder]*fig_qty)

    pool.map(fig_draw_save_worker, fig_para)
    return None

def fig_draw_save_worker(args):
    seq, dt, folder = args
    plt.figure()
    fig = plt.scatter(dt[:,0], dt[:,1], s=abs(dt[:,2]*1000), c=abs(dt[:,3]*100), alpha=0.7).get_figure()
    plt.title('Plot of a scatter of %i' % seq)
    fig.savefig(folder+"\\"+'fig_%02i.png' % seq)
    plt.close()
    return None

if __name__ == '__main__':
    folder_1, folder_2 = 'A1', 'A2'
    fig_qty, bubble_qty =  500, 100
    draw_data = gen_data(fig_qty, bubble_qty)

    print 'Mulprocessing  ...   ',
    t1 = time.time()
    parallel_savefig(draw_data, folder_1)
    t2 = time.time()
    print 'Time : %0.3f'%((t2-t1))

    print 'Non_Mulprocessing .. ', 
    t3 = time.time()
    for para in zip(range(fig_qty), draw_data, [folder_2]*fig_qty):
        fig_draw_save_worker(para)
    t4 = time.time()
    print 'Time : %0.3f'%((t4-t3))

    print 'Speed Up: %0.1fx'%(((t4-t3)/(t2-t1))) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-13T22:34:19.983

您可以尝试将所有 matplotlib 代码（包括导入）移动到一个函数中。

1.  确保您的代码顶部没有 import matplotlib 或 import matplotlib.pyplot as plt。

2.  创建一个执行所有 matplotlib 的函数，包括导入。

例子：

```
import numpy as np
from multiprocessing import pool

def graphing_function(graph_data):
    import matplotlib.pyplot as plt
    plt.figure()
    plt.hist(graph_data.data)
    plt.savefig(graph_data.filename)
    plt.close()
    return

pool = Pool(4)
pool.map(graphing_function, data_list) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:28:54.323

这并不是一个真正的错误，而是更多的限制。

解释在错误消息的最后一行：

```
PicklingError: Can't pickle <function notify_axes_change at 0x029F5030>: it's not found as matplotlib.backends.backend_qt4.notify_axes_change 
```

它告诉您图形对象的元素不能被腌制，这就是`MultiProcess`在进程之间传递数据的方式。对象在主要过程中被腌制，作为腌制运输，然后在另一侧重新构建。即使您解决*了这个*确切的问题（可能通过使用不同的后端，或剥离有问题的功能（这可能会以其他方式破坏事情））我很确定 , 或对象的核心部分`Figure`不能`Axes`被`Canvas`腌制。

正如@bigbug 所指出的，如何解决这个限制的一个例子，[Matplotlib: 同时在多个线程中绘图](https://stackoverflow.com/questions/4659680/matplotlib-simultaneous-plotting-in-multiple-threads/4662511#4662511)。基本思想是将*整个*绘图例程推送到子流程，因此您只推送`numpy`数组和可能跨流程边界的一些配置信息。

# c# - 将制表符分隔的文件读入表格

> ID：15525432
> 
> 赞同：2
> 
> 时间：2013-03-20T13:48:34.497
> 
> 标签：c#, asp.net, datatable, csv

`DataTable`我们使用以下代码将制表符分隔的文件读入 a 。

```
//read the uploaded file...
    var records = File.ReadAllLines(Server.MapPath("~/UploadFiles/") + Session.SessionID + "/orderEDI.txt").ToList();
    //load the data into the temporary table...
    records.ForEach(record => loadTable.Rows.Add(record.Split((char)9))); 
```

如果文件中的选项卡不超过 DataTable 中的列，则此方法工作得很好。

我正在寻找是否有办法限制它从文件中读取的列数。或有关此问题的任何其他建议。它必须至少读取 10 列（理想情况下，只有 10 列）

`DataTable`在此负载发生之前，我构建并添加列。不添加列并仅将文件加载到`DataTable`然后按列索引而不是名称读取表会更好吗？

真的不知道该走哪条路，并希望得到一些有经验的意见。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:49:39.053

既然 split 会产生一个数组，为什么不直接使用 Take(10) 呢？

```
//read the uploaded file...
    var records = File.ReadAllLines(Server.MapPath("~/UploadFiles/") + Session.SessionID + "/orderEDI.txt").ToList();
    //load the data into the temporary table...
    records.ForEach(record => loadTable.Rows.Add((record.Split((char)9)).Take(10)));
```

# javascript - 网页使用phantomjs lib捕获并保存到图像

> ID：15525436
> 
> 赞同：0
> 
> 时间：2013-03-20T13:48:55.780
> 
> 标签：javascript, image, converter, webpage, capture

我正在搜索谷歌以获取任何可以捕获任何网站或 URL 图像的 js lib。我开始知道 phantomjs 库可以做到这一点。在这里，我有一个小代码，它捕获并将 github 主页转换为 png 图像

如果有人熟悉 phantomjs 那么请告诉我这一行的含义是什么

```
var page = require('webpage').create(); 
```

在这里我可以给出任何名称而不是网页吗？

如果我需要捕获任何网页的一部分，那么我该如何在这个库的帮助下做到这一点。任何人都可以指导我。

```
var page = require('webpage').create();
page.open('http://github.com/', function () {
    page.render('github.png');
    phantom.exit();
}); 
```

[https://github.com/ariya/phantomjs/wiki](https://github.com/ariya/phantomjs/wiki)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:44:01.580

这是一个用于抓取图像的简单 phantomjs 脚本：

```
var page = require('webpage').create(),
system = require('system'),
address, output, size;

address = "http://google.com";
output = "your_image.png";
page.viewportSize = { width: 900, height: 600 };

page.open(address, function (status) {
    if (status !== 'success') {
        console.log('Unable to load the address!');
        phantom.exit();
    } else {
        window.setTimeout(function () {
            page.render(output);
            console.log('done');
            phantom.exit();
        }, 10000);
    }
}) 
```

在哪里..

'address' 是您的网址字符串。

'output' 是您的文件名字符串。

此外，“宽度”和“高度”是要捕获的网站区域的尺寸（如果您想要整个页面，请将其注释掉）

要从命令行运行它，将上面的内容保存为 'script_name.js 并触发幻象，使 js 文件成为第一个参数。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T18:06:34.037

你问的那一行：

```
var page = require('webpage').create(); 
```

据我所知，该行做了 3 件事：它添加了一个模块`require('webpage')`，然后在 PhantomJS 中创建一个 WebPage 对象`.create()`，然后将该对象分配给`var = page`

名称“网页”告诉它要添加哪个模块。

[http://phantomjs.org/api/webpage/](http://phantomjs.org/api/webpage/)

我也需要一种方法来`page.render()`捕获网页的一个部分，但我没有看到一种简单的方法来做到这一点。最好通过 ID 选择一个页面元素，然后根据它的大小呈现该元素。他们真的应该为下一个版本的 PhantomJS 添加它。

目前，我唯一的解决方法是在我的 URL 中添加一个锚标记，`http://example.com/page.html#element`以使页面滚动到我想要的元素，然后设置一个接近我需要的大小的宽度和高度。

我最近发现我可以在渲染之前对页面进行一些操作，所以我想尝试使用这种技术来隐藏除我想要捕获的元素之外的所有其他元素。我还没有尝试过，但也许我会取得一些成功。请参阅此页面并查看它们的使用方式`querySelector()`：[https ://github.com/ariya/phantomjs/blob/master/examples/technews.js](https://github.com/ariya/phantomjs/blob/master/examples/technews.js)

# android - 批量更新 500 多个联系人

> ID：15525440
> 
> 赞同：7
> 
> 时间：2013-03-20T13:49:02.340
> 
> 标签：android

我正在开发一个需要更新许多联系人的应用程序，我收到以下错误。

> android.content.OperationApplicationException：屈服点之间的内容提供者操作过多。每个屈服点的最大操作数为 500

我尝试将联系人分成更小的块进行更新，但我仍然遇到同样的错误。好消息是，现在更新了一些联系人（之前更新了 0 个联系人）。非常感谢任何可以帮助我的建议。

```
 Uri uri = ContactsContract.Data.CONTENT_URI;
    String selectionUpdate = ContactsContract.CommonDataKinds.Phone._ID + " = ? AND " + ContactsContract.Contacts.Data.MIMETYPE + " = ? ";

    int i = 0;
    int numRowsUpdated = 0;
    int batchsize = 100;
    for (EntityPhone ep : eps) { 
        if (ep.isUpdateNumber()) {

            //update only when checkbox is ticked
            ops.add(ContentProviderOperation.newUpdate(uri)
                    .withSelection(selectionUpdate, new String[]{ep.getPhoneId(), ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE})
                    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, ep.getPhoneNumberNew())
                    .build());

            i++;
            if (i % batchsize == 0) {

                i = 0;
                ContentProviderResult[] count = contentResolver.applyBatch(ContactsContract.AUTHORITY, ops);

                if (count != null) {
                    numRowsUpdated += count.length;
                    Log.i(TAG, "batch update success" + count.length);
                } else {

                    Log.w(TAG, "batch update failed");
                }
            }
        }
    }

    if (i != 0) {
        ContentProviderResult[] count = contentResolver.applyBatch(ContactsContract.AUTHORITY, ops);
    } 
```

我看过过去的问题，但它们大多与插入有关，而不是更新。

*   [使用 applyBatch 插入数千个联系人条目很慢](https://stackoverflow.com/questions/5596354/insertion-of-thousands-of-contact-entries-using-applybatch-is-slow)
*   [创建大量联系人的最快方法是什么？](https://stackoverflow.com/questions/10736441/whats-the-fastest-way-to-create-large-numbers-of-contacts)

我想一次更新这么多记录的原因是因为我的应用程序是一个“联系人号码格式化程序”，它允许用户轻松标准化手机中的所有电话号码。我无法控制用户想要在一个批次中更新多少记录。（[https://play.google.com/store/apps/details?id=angel.phoneformat](https://play.google.com/store/apps/details?id=angel.phoneformat)）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T06:43:44.453

您没有为`ops`. 在对 的后续调用期间`applyBatch`，您也将先前应用的操作传回。第一次`ops`包含 100 个元素，然后是 200 个，最终在达到 500 个时失败。更改为

```
if (i % batchsize == 0) {
    contentResolver.applyBatch(ContactsContract.AUTHORITY, ops);
    ops = new ArrayList<ContentProviderOperation>(100);
} 
```

# asp.net - asp.net webservice中的自动完成文本框

> ID：15525446
> 
> 赞同：0
> 
> 时间：2013-03-20T13:49:32.867
> 
> 标签：asp.net

我使用母版页和脚本打开一个弹出窗口。这个弹出窗口有一个文本框。我在文本框中添加了一个 ajax 自动完成扩展器。它运行并获取值，我检查断点，但它不会在文本框中显示自动值。我怎么解决这个问题？

我的代码：

```
<ajaxToolkit:autocompleteextender ID="aceSearch" runat="server" TargetControlID="itemnametext" BehaviorID="AutoCompleteEx" MinimumPrefixLength="1" EnableCaching="true" CompletionSetCount="5" CompletionInterval="100" ServiceMethod="GetCompletionList" ServicePath="CloudlistService.asmx"> 

</ajaxToolkit:autocompleteextender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:02:03.120

我认为这与`z-index`弹出窗口和自动完成有关。

自动完成必须有一个高度`z-index`

您可以通过`CompletionListCssClass`自动完成的属性来实现

# android - 使用 Tomcat 服务器托管 android 和 Web 应用程序打开了太多连接

> ID：15525448
> 
> 赞同：0
> 
> 时间：2013-03-20T13:49:33.610
> 
> 标签：android, spring, tomcat, servlets

我的 Tomcat 服务器 v7.0 上运行了一个 Web 应用程序。现在我正在创建一个 android 应用程序，它将连接到 MySQL 数据库。为此，我将向该服务器发送请求，该服务器将从数据库获取数据到 Android 应用程序。

现在，我想让你考虑一下这种情况：如果我有 1000 个用户连接到我的网页，并且有超过 1000 个用户从 MySQL 数据库获取数据（正如我所说，服务器将处于 MySQL 和 Android 之间的通信中间） )，我的 Tomcat 服务器会打开 2000 个连接吗？我知道服务器很难同时接收到如此多的连接，但我想知道的是：一旦请求完成，Tomcat 服务器会关闭连接吗？

我不知道回答这个问题是否有用，但我在web应用程序中使用spring MVC框架，在Android应用程序中使用Android spring。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:12:36.373

That is what JDBC connection pools are for. Take a look at the documentation on [how to configure them](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)

# c++ - 成员函数参数列表中的名称查找

> ID：15525449
> 
> 赞同：2
> 
> 时间：2013-03-20T13:49:40.057
> 
> 标签：c++, name-lookup

```
typedef int abc;

class Some{
   public:
      abc foo(){...}
      typedef double abc;
}; 
```

在上面的代码中，我得到一个错误：

```
error: changes meaning of 'abc' from 'typedef int abc' 
```

因为在**c++ Primer,fifth edtion**一书中，它说：

> 类定义分两个阶段处理：
> 
> 1.首先编译成员**声明。**
> 
> 2.函数体只有在看到**整个**类之后才编译。

但是在这里的代码中：

```
typedef int abc;

class Some{
     public:
        int foo(abc){...}
        typedef double abc;
}; 
```

我`abc`在参数列表中设置。但我没有得到那种错误，编译器工作得很好。为什么后面的代码不会给我任何类似于前者的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T23:26:43.997

我不认为有任何理由。此错误不需要诊断（根据标准 C++），因此当您的代码中有此错误时，行为实际上是未定义的。

你的编译器只是没有检查这个错误的参数列表，但很可能已经完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:52:14.367

您需要对其进行限定`Some::abc`：

```
typedef int abc;

class Some{
   public:
      Some::abc foo(){...}
      typedef double abc;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T22:38:20.910

第一个示例给出错误的原因是名称查找没有考虑返回类型。但是，当在调用它的表达式中生成实际的函数体时，编译器将使用`Some::abc`并找到差异。

```
typedef int abc;

class Some{
   public:
      abc foo() { return abc(); }  // during lookup/resolution, "abc" is known to be int, return type is not considered
      typedef double abc;
};

int main() 
{ 
    Some s; 
    int x = s.foo(); // kaboom, return type is double.
} 
```

在您的第二个示例中，类型重新定义无关紧要，因为在名称查找期间，`abc`已知它是一个 int，因为尚未看到内部 typedef 的定义。在调用点实例化函数期间没有任何后果，因为返回类型也是 int。根本没有不匹配。

```
typedef int abc;

class Some{
   public:
      int foo(abc) { return int(); }  // during lookup/resolution, "abc" is known to be int
      typedef double abc;             // this will not have been seen yet in the previous line
};

int main() 
{ 
    Some s; 
    int x = 0;
    s.foo(x); // OK, x is of type int
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T07:35:13.233

在 MinGW 中，如果成员函数的返回类型显示为 typedef 声明定义的别名类型。不允许改变其含义。您要求的名称查找规则仍然像 Lippman 的 C++ Primer 第 447 页中介绍的一样有效——类成员声明的名称查找。

1.  考虑使用名称之前出现的类成员的声明。
2.  如果步骤 1 中的查找不成功，则考虑出现在定义类的范围内以及出现在类定义本身之前的声明。

# arrays - 如何从数组中删除元素的特定区域

> ID：15525450
> 
> 赞同：0
> 
> 时间：2013-03-20T13:49:42.553
> 
> 标签：arrays, perl, unix, matching, area

我想从我的数组中删除特定范围的元素。
我有一个txt文件：

```
Rbody ...
333
444
555
666
END

Shell ...
Node ...

Rbody ...
333
444
555
666
END 
```

我想做的是从我的文件中删除以“Rbody”开头的元素，直到“END”这个词。

```
#while (<INC>) {
#   if (!/^RBODY/)
#   {
#       push(@alllines,$_);
#   }
#} 
```

只删除带有单词 Rbody 的行...我想我需要一些循环。：/

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:23:43.510

这有点深奥，但这是[“触发器”运算符](http://search.cpan.org/~rjbs/perl-5.16.3/pod/perlop.pod#Range_Operators)的一个很好的用例：

```
while (<INC>) {
    push @alllines, $_ unless /^Rbody/ .. /^END/;
} 
```

表达式`/^Rbody/ .. /^END/`返回 false 直到`$_`匹配正则表达式`/^Rbody/`。然后它返回 true 直到它匹配`/^END/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:03:56.723

尝试使用两个循环。外部循环正常读取行。如果找到类似 的行`/^Rbody/i`，那么它将使用内部循环跳过所有内容，直到看到“END”：

```
while( defined(my $line = <INC>) ){
   chomp( $line );
   if( $line =~ /^Rbody/i ){
       while( defined($line = <INC>) ){
           chomp( $line );
           last if $line eq "END";
       }
   } else {
       push( @alllines, $line );
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:10:03.097

不幸的是，似乎没有任何版本有效：

第一个版本打印每一行，其他两个不提供输出。

我的文字如下所示：

```
RBODY /
sdsd
sdsdsd
sdsd
        END

SHELL /  9171781 9001914 9073136 9073137 9073118 9073115                         
SHELL /  9171782 9001914 9073117 9073120 9073119 9073116                         
SHELL /  9171783 9001914 9073118 9073121 9073120 9073117                         
SHELL /  9171784 9001914 9073137 9073138 9073121 9073118                         
SHELL /  9171785 9001914 9073120 9073123 9073122 9073119                         
SHELL /  9171786 9001914 9073121 9073124 9073123 9073120                         
# [SDM:HISTORY:VERSION] = "History_Variante_DGS"
#
# S01__B70D_revo: *Autor: revo
#                 *Datum: 11.12.12
#                 *Basis: -------
#                 - automatischer Positionierungsprozess
#                 - verwendetes Dummysessionfile: Sessiondummy____au481_______LFaH3_sitzpos_S01__B70D_revo.ses
#                 - verwendetes Gurtsessionfile : Sessiongurt_____au481_______LFaH3_sitzpos_S01__Basi_revo.ses
#                 - verwendetes Sitzsessionfile : Sessionsitz_____au481__0____LFaH3_sitzpos_S01__B001_revo_k14m.ses
#
# 
```

到目前为止的代码：

```
#!/usr/bin/perl
#
#print "Bitte geben sie das Dummy Include an:\n";
#chop($dummyfile = <>);
#print "\n";
#print "Bitte geben sie das Basis Include an:\n";
#chop($basisfile = <>);
#print "\n";

$dummyfile = 'Dummy_mu5070b___mvs2g__1_cb21_k19_m04F_bsd_w3_bfrei__krmi_040_.inc';
$newinc = "dummy_include.inc";
open(INC, $dummyfile);
open(NEWINC, ">$newinc");

.... missing regex

print @alllines; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:45:02.877

只需使用一个状态变量来跟踪是否应该打印当前行。

```
use strict;
use warnings;

my $print = 1;

while (<DATA>) {
  if ($print) {
    $print = 0 if /^Rbody/i;
    print if $print;
  }
  elsif (/^END$/) {
    $print = 1;
  }
} 
```

# c# - 匹配由 C# 正则表达式中的任何字符分隔的两个单词的连接子字符串（以任何顺序）

> ID：15525451
> 
> 赞同：0
> 
> 时间：2013-03-20T13:49:50.110
> 
> 标签：c#, regex

有两个字符串作为参数`(s1, s2)`，我应该能够设置一个`new Regex(my_regular_expression(s1, s2))`. 例如 s1="abcd", s2="xyz" 我想匹配字符串：

> regex.IsMatched(x)==true，其中 x 是下列之一：

```
abcd.xyz
abcd-xyz
xyzabcd
dxy
yzab
z a
dx
cd
but not limited to 
```

但是`regex.IsMatched(y)==false`，其中 y 是以下之一：

```
aabcd.xyzv
abd.xyz
xycd
but not limited to 
```

在 s1 和 s2 之间不能有任何东西或任何字符。s1的任何右子字符串（参见函数）与 s2`string.right(string str,int length)`的左子字符串（参见函数`string.left(string str,int length)`）或 s2 的任何右子字符串与 s1 的左子字符串连接。

请在正则表达式中使用 s1 和 s2 而不是 abcd、xyz。s1/s2 可以包含特殊字符。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:21:08.450

我相信`Combined`会给你你想要的表达。它有以下限制。

*   它目前允许*任何*字符组合两半（示例中的`.`or `-`），即使它是一个字母。
*   `SuffixPart`不支持不适合单个 UTF-16 代码点的 Unicode 字符。如果您需要处理这种极端情况，[这里有一个有关 Java 代码的相关问题](https://stackoverflow.com/questions/7476535/how-to-get-a-reversed-string-unicode-safe/7476639#7476639)。
*   就此而言，`PrefixPart`它也不支持不是单个 UTF-16 代码点的 Unicode 字符，但该方法并没有“那么糟糕”地被破坏。

这是代码：

```
public static string PrefixPart(string str)
{
    return
        string.Join("(?:", str.Select(i => Regex.Escape(i.ToString())))
        + string.Join(")?", Enumerable.Repeat(string.Empty, str.Length));
}

public static string SuffixPart(string str)
{
    return PrefixPart(new string(str.Reverse().ToArray()));
}

public static string Combined(string str1, string str2)
{
    string left = SuffixPart(str1) + ".?" + PrefixPart(str2);
    string right = SuffixPart(str2) + ".?" + PrefixPart(str1);
    return string.Format("^{0}|{1}$", left, right);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:53:46.787

我会做

```
"/" + s1 + ".?" + s2 + "|" + s2 + ".?" + s1 + "/" 
```

这将评估为（在您的示例中）：

```
/abcd.?xyz|xyz.?abcd/ 
```

这两种模式都需要以零或任何字符之一分隔的顺序。

# sql - 统计访问查询中出现的最大值

> ID：15525455
> 
> 赞同：0
> 
> 时间：2013-03-20T13:50:06.017
> 
> 标签：sql, ms-access

以下是两个相关表

```
CREATE TABLE SCHOOL
(School_ID char(3), School_Name char(15), School_Address char(15), School_City char(15), School_State char(2), School_Zip char(5), School_Type char(15));
CREATE TABLE STUDENT
(School_ID char(3), St_LastName char(15), St_FirstName char(15), St_DOB char(15), St_SS# char(15), St_Address char(15),St_City char(15), St_State char(2),st_Zip char(5), st_phone char(15)); 
```

我试图在访问中编写查询：**显示最多学生的学校 ID** 但我的查询显示学生姓名与最大 School_ID 而不是出现次数。请帮助我

查询如下：

```
SELECT STUDENT.School_ID, SCHOOL.School_Name, STUDENT.St_LastName, STUDENT.St_FirstName
FROM (SELECT MAX(STUDENT.School_ID) as max
FROM SCHOOL INNER JOIN STUDENT ON (SCHOOL.School_ID = STUDENT.School_ID) AND (SCHOOL.School_ID = STUDENT.School_ID)
)  AS Overallcount, SCHOOL INNER JOIN STUDENT ON (SCHOOL.School_ID = STUDENT.School_ID) AND (SCHOOL.School_ID = STUDENT.School_ID)
WHERE (((STUDENT.School_ID)=([Overallcount].[max]))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:53:33.140

最简单的方法是进行聚合并使用`top`and `order by`：

```
select top   1    school_id
from student
group by school_id
order by COUNT(*) desc 
```

# c# - c# 将字符串转换为日期类型

> ID：15525456
> 
> 赞同：4
> 
> 时间：2013-03-20T13:50:06.930
> 
> 标签：c#, asp.net

我有这个字符串：

```
string date = "Sun, 17 Mar 2013 12:40:23 +0000"; 
```

并尝试转换为日期类型，但是当我尝试转换时，我不断收到格式不正确的错误。

```
DateTime dt = Convert.ToDateTime(date); 
```

然后尝试将其转换为以下格式：

```
dt.ToString("dd")
dt.ToString("MMMM")
dt.ToString("yyyy") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:55:44.337

您可以使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)进行转换。

试试下面的代码：

```
var date = "Sun, 17 Mar 2013 12:40:23 +0000";
var dt = DateTime.ParseExact(date, "ddd, dd MMM yyyy hh:mm:ss zzz", CultureInfo.InvariantCulture);

Console.WriteLine(dt.ToString("dd"));
Console.WriteLine(dt.ToString("MMMM"));
Console.WriteLine(dt.ToString("yyyy")); 
```

输出：

```
17
March
2013 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:52:06.227

尝试`DateTime.TryParse()`或`DateTime.Parse()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T13:52:49.823

尝试改用[DateTime.Parse](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)。

`var dt = DateTime.Parse(date);`

我还建议您使用[DateTime.TryParse](http://DateTime.TryParse)解析日期，以确保日期始终采用有效格式。

```
DateTime result;
if (DateTime.TryParse(date, out result))
{
    Console.WriteLine(result.ToString("dd"));
    Console.WriteLine(result.ToString("MMMM"));
    Console.WriteLine(result.ToString("yyyy"));
}
else
{
    Console.WriteLine("Error parsing date.");
} 
```

如果您仍然遇到问题，您可能需要为 DateTime 提供[CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)。这允许您指定解析器使用的确切文化，以确保计算机区域设置不会导致任何问题。

```
DateTime.Parse(date, new CultureInfo("en-US"));     // Specific culture
DateTime.Parse(date, CultureInfo.InvariantCulture); // Culture-insensitive

// Culture-insensitive TryParse
if (DateTime.TryParse(date, out result, CultureInfo.InvariantCulture)) 
{...} 
```

正常的 DateTime 使用操作系统设置的区域性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T14:06:37.697

您可以使用`DateTime.Parse`with `CultureInfo.InvariantCulture`which 忽略您当前的文化，从而避免可能的本地化问题。

```
DateTime dt = DateTime.Parse(date, CultureInfo.InvariantCulture); 
```

`CultureInfo.InvariantCulture`类似于英语文化并适用于您的字符串。

[**演示**](http://ideone.com/rUszoQ)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T13:53:34.670

你检查过[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)方法吗？如果向下滚动，您会注意到最后一个示例实际上是“Fri, 15 May 2009 20:10:57 GMT”，类似于您的请求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T13:56:58.303

您可以使用[`DateTime.Parse()`](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)类似的方法；

```
string date = "Sun, 17 Mar 2013 12:40:23 +0000";
DateTime dt = DateTime.Parse(date, CultureInfo.InvariantCulture);
Console.WriteLine(dt.ToString("dd"));
Console.WriteLine(dt.ToString("MMMM"));
Console.WriteLine(dt.ToString("yyyy")); 
```

输出将是；

```
17
March
2013 
```

这是一个[`DEMO`](http://ideone.com/GzAbBg).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-18T05:42:30.243

公共字符串 dateConvertion(string da) { string sDate = da; sDate = sDate.Replace("-", "/"); sDate = sDate.Replace(".", "/");

```
 string format = "dd/MM/yyyy";
    DateTime dDate;
    if (DateTime.TryParse(sDate, out dDate))
    {

        //if (DateTime.TryParseExact(sDate, format, CultureInfo.InvariantCulture, DateTimeStyles.None, out dDate))
        //{

        sDate = dDate.ToString("MM/dd/yyyy");
        sDate = sDate.Replace("-", "/");
        sDate = sDate.Replace(".", "/");

    }
    return sDate;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-20T14:38:35.877

好吧..如果您需要数字格式的结果，请尝试如下所示

```
 string date = "Sun, 17 Mar 2013 12:40:23 +0000";
 DateTime dt = Convert.ToDateTime(date);
 var day = dt.Day;
 var month = dt.Month;
 var year = dt.Year;
 var time = dt.ToShortTimeString();
 var hour = dt.Hour;
 var minute = dt.Minute;
 var second = dt.Second; 
```

变量将返回准确的数字形式。注意：小时将被描述为 24 小时格式

# linux - 在寄存器中传输 64 位 Linux 上的参数

> ID：15525459
> 
> 赞同：1
> 
> 时间：2013-03-20T13:50:22.420
> 
> 标签：linux, performance, optimization, x86-64, cpu-registers

我了解 64 位 Linux 允许通过寄存器传递前六个整数函数参数和前八个浮点函数参数。

如果我有七个整数参数要传递，有什么方法可以让我在不牺牲性能的情况下将未使用的浮点寄存器之一用于第七个整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:08:05.110

如果您正在编写自己的汇编代码，则可以以任何您想要的方式使用寄存器（好吧，也许不是那么自由，但您可以自由地忽略 ABI，排序）。但是，如果您正在与按照标准 ABI 编写的库代码（或系统调用，或从更高级别语言编译的程序的一部分，或...）进行交互，您将必须遵循形成/使用符合 ABI 的接口的代码部分。

# git - git p4 提交：补丁不适用

> ID：15525463
> 
> 赞同：7
> 
> 时间：2013-03-20T13:50:27.287
> 
> 标签：git, perforce, git-p4

最近我一直在使用 git-p4 遇到问题。

我目前的工作流程是：

```
git checkout -b some_feature
# do some work and commit to some_feature branch
git checkout master
git merge --no-ff some_feature
git p4 rebase
git p4 submit 
```

并非总是如此，但偶尔在执行时`git p4 submit`，更改实际上并不适用，而是我看到：

```
error: some_file.extension: patch does not apply 
```

做一些研究，我尝试在 master 上进行硬重置并在没有`--no-ff`标志的情况下再次合并，但这似乎没有帮助。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-09-10T02:17:22.480

我今天遇到了这个问题。就我而言，问题是因为我的文本编辑器 (Visual Studio) 正在向它接触的每个文件添加一个[Unicode BOM 。](http://unicode.org/faq/utf_bom.html#BOM)同时，Perforce 服务器设置为从每个文件中去除 Unicode BOM，防止 Unicode BOM 出现在 Perforce 中。这最终导致我`git p4 submit`失败并显示以下消息：

```
error: patch failed: path/to/file.csproj:1
error: path/to/file.csproj: patch does not apply 
```

# 最终解决方案

我在**~/.gitconfig**文件中添加了以下过滤器定义：

```
[filter "utf8-autobom"]
        clean = sed -b -e '1!b' -e 's/^\\xEF\\xBB\\xBF//'
        smudge = sed -b -e '1!b' -e 's/\\(^\\|^\\xEF\\xBB\\xBF\\)/\\xEF\\xBB\\xBF/' 
```

然后我`utf8-autobom`通过在**.gitattributes**中添加以下行将过滤器应用于有问题的文件：

```
*.csproj filter=utf8-autobom 
```

然后我强迫 Git 将过滤器应用到它的索引：

```
rm .git/index
git reset 
```

然后我将编辑后的文件提交给 Git，并像往常一样将我的提交提交给 Perforce：

```
git add .
git commit --amend
git p4 submit 
```

# 这个怎么运作

过滤器定义基于以下`sed`命令，其中“abc”是相应 Unicode BOM 字节序列的占位符：

```
# Remove 'abc' from beginning of file, if present
sed -b -e '1!b' -e 's/^abc//'

# Add 'abc' to beginning of file, if not present
sed -b -e '1!b' -e 's/\(^\|^abc\)/abc/' 
```

对于 UTF-8 BOM，我们使用字节序列`EF BB BF`而不是“abc”。

过滤器通过运行命令在提交时删除 BOM `clean`，并通过运行命令在结帐时添加 BOM `smudge`。这会将 BOM 保留在工作树文件中，但会阻止 BOM 提交给 Git，或提交给 Perforce。

*（有关和的详细信息，请参阅[gitattributes 文档](https://git-scm.com/docs/gitattributes#__code_filter_code)。）`clean``smudge`*

# 诊断问题

我认为错误信息很有趣：

```
error: patch failed: path/to/file.csproj:1
error: path/to/file.csproj: patch does not apply 
```

它说补丁在第 1 行失败，即使我的提交没有编辑文件的第 1 行。

为了看看发生了什么，我跑了`git diff p4/master HEAD`。差异表明我的提交`<U+FEFF>`在文件开头添加了一个奇怪的字符。我怀疑它与文件编码有关，所以我使用 Notepad++ 在我的 Git 工作树中打开文件。然后我在我的 Perforce 工作区中打开了相应的文件。Notepad++ 在我的 Git 工作树中显示编码为“UTF-8-BOM”，在我的 Perforce 工作区中显示为“UTF-8”。*（Linux 和 Cygwin 用户：使用该`file <path-to-file>`命令显示有关文件编码的信息。）*

谷歌搜索“UTF-8-BOM”让我走上了正确的道路。

# 注意

安装此过滤器后，某些 Git 操作会变慢。

# 小费

`smudge`如果您的工作树中不需要 BOM，则可以删除过滤器的部分。这将加快一些 Git 操作（如`git checkout`）。删除该`smudge`行后，过滤器定义为：

```
[filter "utf8-autobom"]
        clean = sed -b -e '1!b' -e 's/^\\xEF\\xBB\\xBF//' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-08T20:42:27.973

我遇到了同样的问题，我认为根本原因是行尾。你可以尝试运行类似`dos2unix`修复它的东西，或者设置这个配置：

```
git config --global core.autocrlf true 
```

有时，文件模式可能会导致问题。这个配置可以修复它（如果你不关心文件模式）：

```
git config core.filemode false 
```

# c# - 自定义 Windows 登录

> ID：15525468
> 
> 赞同：3
> 
> 时间：2013-03-20T13:50:39.673
> 
> 标签：c#, windows, windows-8, windows-authentication, biometrics

是否可以使用 c# 自定义 Windows 操作系统登录，例如 Lenovo veriface。我想覆盖默认登录 Windows 8

[http://en.wikipedia.org/wiki/VeriFace](http://en.wikipedia.org/wiki/VeriFace)

所有可用的库和任何示例，以及如何在登录屏幕/锁定屏幕上显示自定义表单。

# android - 在android中单击按钮更改应用程序语言

> ID：15525480
> 
> 赞同：0
> 
> 时间：2013-03-20T13:51:02.640
> 
> 标签：android, android-layout, android-widget, android-listview, android-linearlayout

我的应用程序使用两种语言运行，即英语和西班牙语，为此我维护两个文件夹的值，即 values 和 values-sp。

当我点击整个应用程序更改为所选语言时，我的 SettingsActivity 中有一个按钮，因为我已经编写了附加代码。

我的问题是，当我单击按钮并按下后退按钮时，应用程序会显示黑屏一段时间，然后才会出现。

在简历的每个活动中，我都会再次调用 onCreate 以刷新视图。即使我这样做了，黑屏还是出现了。

任何人都可以帮助我摆脱这种情况。

提前致谢。

我的代码是

```
english.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) 
                {
                       languagePopup.dismiss();
                       Locale locale2 = new Locale("en"); 
                       Locale.setDefault(locale2);
                       Configuration config2 = new Configuration();
                       config2.locale = locale2;
                       getBaseContext().getResources().updateConfiguration(config2, getBaseContext().getResources().getDisplayMetrics());
                       changLanguae();
                       if(language.equalsIgnoreCase("English"))
                           Constants.isLanguageChanged=false;
                       else
                           Constants.isLanguageChanged = true;

                }
            });
            spanish.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v)
                {
                       languagePopup.dismiss();
                       Locale locale2 = new Locale("es"); 
                       Locale.setDefault(locale2);
                       Configuration config2 = new Configuration();
                       config2.locale = locale2;
                       getBaseContext().getResources().updateConfiguration(config2, getBaseContext().getResources().getDisplayMetrics());
                       changLanguae();
                       if(language.equalsIgnoreCase("Spanish"))
                           Constants.isLanguageChanged=false;
                       else
                           Constants.isLanguageChanged = true;

                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:00:13.377

创建一个复制视图值设置部分的方法，并在 onResume() 上使用此方法。无需在 onResume() 中编写整个 onCreate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T06:23:45.230

为应用程序更改语言的一种更好的方法是让用户从设备设置中更改语言和输入设置，并让设备和应用程序通过从您创建的该语言的文件夹中呈现 UI 来适当地处理此更改。[Android Localization](http://www.icanlocalize.com/site/tutorials/android-application-localization-tutorial/)就是一个例子。

# php - 在 PHP、Window Dos 中启用调试模式

> ID：15525481
> 
> 赞同：2
> 
> 时间：2013-03-20T13:51:07.053
> 
> 标签：php, windows, command-line

在 Windows 命令行中。

如何在 ftp 命令中启用调试，

PHP中的第二个问题如何启用调试模式，

下面是简单的 ftp 脚本，

如何获取 FTP 的逐步脚本执行跟踪。

我猜php中有调试模式，请告知该模式，

```
<?php
$file = 'somefile.txt';
$remote_file = 'readme.txt';

// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// upload a file
if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) {
 echo "successfully uploaded $file\n";
} else {
 echo "There was a problem while uploading $file\n";
}

// close the connection
ftp_close($conn_id);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T10:14:36.673

run your php script in the terminal to get step by step script execution trace, use:

```
/usr/local/php/bin/php filename.php 
```

=)

# jquery - 计算 3 个元素的高度并找到最大的

> ID：15525482
> 
> 赞同：0
> 
> 时间：2013-03-20T13:51:09.220
> 
> 标签：jquery

再会

我想计算 3 个元素的外高并返回最大的一个，因为它们的大小可以在任何给定时间变化......

这是我所拥有的：

```
var a = $('#latestInner').outerHeight();
var b = $('#make').outerHeight();
var c = $('#models').outerHeight();

if (a > b, c) {
    a = x;
}
else if (b > a, c) {
    b = x;
}
else if (c > a, b) {
    c = x;
} 
```

我将如何进行？我知道我可能可以使用数组，但不知道如何..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:54:06.797

使用 [`Math.max`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/max)：

> 返回零个或多个数字中的最大值。

```
Math.max([value1[,value2[, ...]]]) 
```

使用 jquery 你可以这样做：

```
var max = Math.max.apply(null, $.map($('#latestInner, #make, #models'), function(n){ 
    return $(n).outerHeight(); 
})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:56:48.413

您可以使用每种方法计算最大值：

```
var max = 0;
$('#latestInner, #make, #models').each(function() {
    max = Math.max(max, $(this).outerHeight());
}); 
```

[http://jsfiddle.net/uwsJH/](http://jsfiddle.net/uwsJH/)

如果您需要将 div 的高度更新为相同，您可以立即进行设置：

```
var max = 0;
$('#latestInner, #make, #models').each(function() {
    max = Math.max(max, $(this).outerHeight());
})
.height(max); 
```

[http://jsfiddle.net/uwsJH/1/](http://jsfiddle.net/uwsJH/1/)

# java - 如何在服务器启动期间使代码在集群上运行一次，并且也可以在非集群环境中运行

> ID：15525483
> 
> 赞同：0
> 
> 时间：2013-03-20T13:51:11.640
> 
> 标签：java, weblogic11g

背景：我需要的是一种在集群环境中服务器启动期间仅订阅外部系统一次的方法。到目前为止，我们使用 ApplicationLifecycleListener 来运行订阅。在我们的代码中，我们试图找到一个获胜者节点来进行订阅，但由于某种原因它不起作用，所有 4 个节点都在发送他们的请求。（代码是在 Weblogic 8.1 上编写的） 现在，在我们迁移到 weblogic 11g 之后，我发现了一个可以解决问题的 SingletonService。不幸的是，我们不能使用它，因为当我们在本地开发应用程序时，我们会在非集群环境中对其进行测试，而单例服务无法在其上运行。

我的问题：有没有办法在应用程序启动后注册 SingletonService ，例如。在 ApplicationLifecycleListener 中发现我们在集群上？如果没有，您对如何解决我们的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:35:02.893

您可以使用启动类并将其仅针对一台机器而不是全部 4 台机器吗？您需要将启动类添加到服务器的类路径中。您可以在“环境”下的 weblogic 控制台中查看启动/关闭类。

这是一个简短的示例：[http ://buttso.blogspot.com/2009/09/weblogic-server-startup-and-shutdown.html](http://buttso.blogspot.com/2009/09/weblogic-server-startup-and-shutdown.html)

# linux - 在linux（debian）下使用ant构建时无法在as3文件中嵌入图像

> ID：15525486
> 
> 赞同：1
> 
> 时间：2013-03-20T13:51:13.380
> 
> 标签：linux, actionscript-3, ant, embed, mxmlc

我在as3中嵌入了一个png，在windows上都很好，使用FB4.6或Ant。但是在 linux(debian) 下使用 Ant 构建时，我得到了这个错误。图片路径为`/var/lib/jenkins/workspace/q5/dev_Flash/code/Copper/src/assets/c001_up.png`. 项目名称是`/var/lib/jenkins/workspace/q5/dev_Flash/code/Copper`。

```
[mxmlc] /var/lib/jenkins/workspace/q5/dev_Flash/code/Copper/src/com/copper/ui/skin/DefaultAssets.as(10): col: 3: Error: unable to resolve 'assets/c001_up.png' for transcoding
[mxmlc] 
[mxmlc]         [Embed(source = "assets/c001_up.png")]
[mxmlc]   ^
[mxmlc] 
[mxmlc] /var/lib/jenkins/workspace/q5/dev_Flash/code/Copper/src/com/copper/ui/skin/DefaultAssets.as(10): col: 3: Error: Unable to transcode assets/c001_up.png. 
```

像这样的as3文件

```
package com.copper.ui.skin {

/**
 * 
 * @author marzwu
 *
 */
public class DefaultAssets extends Assets {
    [Embed(source = "assets/c001_up.png")]
    private var Button_Up:Class; 
```

我的蚂蚁文件是：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

Q5客户端制造</p>

```
<!-- 配置属性 -->
<property file="build.properties" />

<property environment="env" />
<property name="FLEX_HOME" value="${env.FLEX_HOME}" />

<taskdef resource="flexTasks.tasks" classpath="${FLEX_HOME}/ant/lib/flexTasks.jar" />

<target name="compile">
    <echo message="${basedir}/../src" />
    <compc output="../bin/copper.swc" debug="false" incremental="true">
        <!-- 指定Comman项目的源码目录 -->
        <source-path path-element="${basedir}/../src" />
        <!-- 指定编译的文件列表 -->
        <include-sources dir="${basedir}/../src">
                <include name="**/*.as" />
        </include-sources>
        <!-- 将Flex SDK 作为外部库进行引用 -->
        <compiler.external-library-path dir="${FLEX_HOME}/frameworks">
            <include name="**/*.swc" />
        </compiler.external-library-path>
        <!-- 添加项目中的SWC包,请注意这里是外部 -->
        <compiler.external-library-path dir="../libs">
            <include name="**/*.swc" />
        </compiler.external-library-path>

        <define name="CONFIG::Debug" value="true" />
        <define name="CONFIG::Release" value="false" />

        <jvmarg value="-Xmx2048m"/>
        <jvmarg value="-Xms512m"/>
        <jvmarg value="-XX:MaxPermSize=512m"/>
    </compc>
    <!-- 删除缓存文件 -->
    <delete>
        <fileset dir="../bin" includes="*.cache" />
    </delete>
    <echo message="complier Flex Library Project finished!" />
</target>

<target name="deploy">
    <antcall target="compile" />
    <!--antcall target="copy_to_bin" /-->
    <echo>前往查看结果：http://10.0.1.69/q5d/</echo>
    <echo message="执行发布" />
</target> 
```

我使用 jenkins 构建我的 as3 项目。困扰了我很多天。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:34:09.410

糟糕，编译器无法解析路径，因为我没有注意到“c001_up.png”之间的“u”是大写字母。Windows 对字母大小写不敏感，但 linux 是。我的错，谢谢你的时间。

# android - Android 总是抛出 ClassCastException

> ID：15525488
> 
> 赞同：1
> 
> 时间：2013-03-20T13:51:21.810
> 
> 标签：android, ant

我从命令行构建了我的 android 项目并使用`ant debug install`. 但是在我将一个名为[Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)的外部项目导入到我的项目后，我的项目在运行时变得异常。有时，在我在 xml 布局文件中添加新 id 或删除 id 后，我的编译运行良好，但是当应用程序开始运行时，它会抛出一个`ClassCastException`.
当它发生时，我只能用`ant clean && ant debug install`它来修复它。但是重新编译一个洞项目需要双倍的时间，我不希望编译一个项目一分钟或更长时间。那么我可以做一些技巧来使这个错误不再发生吗？

堆栈跟踪：

```
E/AndroidRuntime(21226): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zhangdan.preferential/com.zhangdan.preferential.RecommendActivity}: java.lang.ClassCastException: android.widget.TextView cannot be cast to com.handmark.pulltorefresh.library.PullToRefreshListView
E/AndroidRuntime(21226):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
E/AndroidRuntime(21226):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
E/AndroidRuntime(21226):    at android.app.ActivityThread.access$600(ActivityThread.java:142)
E/AndroidRuntime(21226):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
E/AndroidRuntime(21226):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(21226):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(21226):    at android.app.ActivityThread.main(ActivityThread.java:4931)
E/AndroidRuntime(21226):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(21226):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(21226):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
E/AndroidRuntime(21226):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
E/AndroidRuntime(21226):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(21226): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to com.handmark.pulltorefresh.library.PullToRefreshListView
E/AndroidRuntime(21226):    at com.zhangdan.preferential.RecommendActivity.findViews(RecommendActivity.java:65)
E/AndroidRuntime(21226):    at com.zhangdan.preferential.RecommendActivity.onCreate(RecommendActivity.java:58)
E/AndroidRuntime(21226):    at android.app.Activity.performCreate(Activity.java:5008)
E/AndroidRuntime(21226):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
E/AndroidRuntime(21226):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2139)
E/AndroidRuntime(21226):    ... 11 more
W/ActivityManager(  380): 
```

推荐Activity.java：

```
 64     private void findViews() { 
 65         mFakeListView = (PullToRefreshListView)findViewById(R.id.refreshable_list); 
 66         mListView = mFakeListView.getRefreshableView(); 
 67     } 
```

xml:

```
 1 <?xml version="1.0" encoding="utf-8"?>
  2 <com.handmark.pulltorefresh.library.PullToRefreshListView 
  3     xmlns:android="http://schemas.android.com/apk/res/android"
  4     xmlns:ptr="http://schemas.android.com/apk/res-auto"
  5     android:id="@+id/refreshable_list"
  6     android:layout_width="fill_parent"
  7     android:layout_height="fill_parent"
  8     android:cacheColorHint="#00000000"
  9     android:fadingEdge="none"
 10     android:listSelector="@android:color/transparent"
 11     android:divider="@null"
 12     android:paddingTop="5dip"
 13     android:paddingBottom="5dip"
 14     android:scrollbarStyle="outsideOverlay"
 15     ptr:ptrMode="both" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:34:02.960

似乎正在发生的事情是，每当您在项目中添加/删除布局 ID 时，该`ant debug install`命令不会以某种方式正确重建所有受影响的代码，并导致使用另一个小部件的 ID 来代替 的正确值`R.id.refreshable_list`，其中turn 在您的应用程序启动时导致 ClassCastException。

以下是我的建议：

*   检查您的所有文件/文件夹是否都有有效日期（也许其中任何一个都已过时？）

*   将您的构建工具更新到最新版本（Android SDK、ant 等）。

*   你用的是什么IDE？检查它是否启用了自动构建，这可能会以某种方式干扰您的命令行构建。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:01:43.603

> 当它发生时，我只能使用 ant clean && ant debug install 来修复它。但是重新编译一个洞项目需要双倍的时间，我不希望编译一个项目一分钟或更长时间。

运行`ant clean debug install`可能比单独运行这些操作要快一些。

您也可以尝试修改您的 Ant 脚本以删除您的`R.class`文件中的文件`bin/classes/`，而不是使用该`clean`命令。除了刚才的快速测试之外，我还没有尝试过这个，因为通常这对于一个合理大小的项目和一个体面的开发机器来说不是问题。然而，Joe 回答的核心是最后编译的`R.class`文件与要生成的`R.java`文件不同步，并且无论出于何种原因，Ant 的依赖机制并不总是能够解决这个问题。自己删除`R.class`文件（例如，`find bin/classes -name R.class | xargs rm`在 Linux 上）可以让您避免`clean`并不得不重新构建所有被`clean`清除的内容，但它会强制重新编译`R.java`类。而且，在*非常*轻度测试，这似乎工作，只要生成的构建 APK 工作。俗话说，你的里程可能会有所不同。

请注意，如果您使用的是 Android 库项目——例如 Pull-to-Refresh，将会有多个`R.class`文件（一个用于您的应用，一个用于每个库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:43:09.723

有时看不到资源的错误。您应该确保您的 xml 文件中没有任何错误。（com.handmark.pulltorefresh.library.PullToRefreshListView 是正确的包吗？）

之后可以试试

1）删除您的 R 类 2）清理项目 3）修复项目属性 4）重建。

# python - 两个数组的高效匹配（KDTree如何使用）

> ID：15525493
> 
> 赞同：2
> 
> 时间：2013-03-20T13:52:10.690
> 
> 标签：python, numpy, pandas, scipy, kdtree

我有两个二维数组，`obs1`并且`obs2`. 它们代表两个独立的测量系列，并且都具有*dim0 = 2*和稍有不同的*dim1*，例如`obs1.shape = (2, 250000)`和`obs2.shape = (2, 250050)`。`obs1[0]`和`obs2[0]`表示时间，`obs1[1]`和`obs2[1]`表示一些空间坐标。两个数组都（或多或少）按时间排序。两个测量系列之间的时间和坐标*应该*相同，但实际上并非如此。此外，并非每个测量`obs1`值都有相应的值，`obs2`反之亦然。另一个问题是时间可能会有轻微的偏移。

我正在寻找一种有效的算法来将最佳匹配值`obs2`与`obs1`. 目前，我这样做：

```
define dt = some_maximum_time_difference
define dx = 3
j = 0
i = 0
matchresults = np.empty(obs1.shape[1])
for j in obs1.shape[1]:
    while obs1[0, j] - obs2[0, j] < dt:
        i += 1
    matchresults[j] = i - dx + argmin(abs(obs1[1, i] - obs2[1, i-dx:i+dx+1])) 
```

这会产生良好的结果。但是，它非常慢，循环运行。

我将非常感谢有关如何在速度方面改进此算法的想法，例如使用 KDtree 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T12:51:26.513

在这种情况下使用`cKDTree`如下所示：

```
from scipy.spatial import cKDTree

obs2 = array with shape (2, m)
obs1 = array with shape (2, n)

kdt = cKDTree(obs2.T)
dist, indices = kdt.query(obs1.T) 
```

where将包含与 中的每个观察相对应`indices`的列索引。请注意，我必须转置和.`obs2``obs1``obs1``obs2`

# sql - 将小时数添加到日期时间值的语法是什么？

> ID：15525496
> 
> 赞同：-5
> 
> 时间：2013-03-20T13:52:22.680
> 
> 标签：sql, sql-server-2008, date

我有一个这样的触发器：

```
CREATE TRIGGER trCreatedDate ON [LasMTest]

FOR INSERT 

AS

UPDATE [LasMTest] SET [LasMTest].Created=getdate()

FROM [LasMTest] INNER JOIN Inserted ON [LasMTest].[ID]= Inserted.[ID]

GO 
```

将 8 小时添加到当前日期时间的语法是什么`[LasMTest].Created=getdate()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:55:13.743

DATEADD 将帮助您完成此操作，如下所示：

```
[LasMTest].Created = DATEADD(hh, 8, GETDATE()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:57:58.093

为什么你需要一个触发器来执行这个操作？最好使用默认约束。您甚至可以在其中使用 dateadd() ：

```
create table _TEst (
z int, 
x datetime default dateadd(hour,3,getdate() )
)
insert into _TEst(z) select 1 as z
select * from _test 
```

# service - Web 服务/客户端事务属性

> ID：15525498
> 
> 赞同：0
> 
> 时间：2013-03-20T13:52:28.927
> 
> 标签：service, web, client, transactionloganalysis

我开发了一个基于 SOAP 的 Web 服务以及一个使用 xml 或 JSON 格式的 REST 风格的 Web 服务。我使用 java 来实现 Web 服务。

您可以推荐任何软件来测试客户端和 Web 服务之间的事务时间、文件传输时间等吗？

我正在寻找选择 SOAP 或 REST 的处理原因。

有没有可以用来模拟多个客户端的模拟器？如果我创建自己的客户端应用程序，是否有某种方法可以在没有模拟器的情况下检测交易时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:04:32.623

如果您的要求是只测试处理所需的时间，我建议您不要使用模拟器或第三方工具，而是只需记录消息即可。

在您的应用程序中使用 log4j 日志记录，记录收到的请求、完成的请求以及应用程序所需的总时间。它应该可以正常工作并为您提供结果。

# python - 机器人框架中的while循环（定期检查桌面应用程序中的状态栏）

> ID：15525499
> 
> 赞同：0
> 
> 时间：2013-03-20T13:52:34.017
> 
> 标签：python, python-2.7, autoit, robotframework

Robotframework中的while循环是否有替代方案？我需要在桌面应用程序的状态栏中检查进度状态。为了检查我正在使用 AutoitLibrary 并从进度标签中读取消息。

我的临时解决方案是使用递归关键字调用。但是，当进度比平时花费更多时间时，测试用例会失败并显示最大递归调用消息。所以，我需要某种while循环。如何在没有递归的情况下实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:11:39.400

您可以使用[等待关键字成功](http://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Wait%20Until%20Keyword%20Succeeds)关键字来执行这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-31T10:01:35.537

每当你说`periodical`，想`AdlibRegister`：

```
AdlibRegister("ReadProgressStatus", 3000) ; to stop it: AdlibUnRegister("ReadProgressStatus")
While True
    ; alternatively: do your "normal" Job
    Sleep(1000)
    ConsoleWrite("working..." & @CRLF)
WEnd

Func ReadProgressStatus()
    ; read Status bar etc...
    ConsoleWrite("checking status" & @CRLF)
EndFunc   ;==>ReadProgressStatus 
```

# devexpress - 将大表加载到 DataSet 时出现 OutOfMemoryException

> ID：15525501
> 
> 赞同：0
> 
> 时间：2013-03-20T13:52:37.743
> 
> 标签：devexpress, out-of-memory, gridcontrol, large-data

我想从包含 2M 条记录的 SQL Server 表中检索数据。我正在使用 Devexpress GridControl 并尝试了这样的简单代码：

```
 DataTable dt = new DataTable();
   String sqlString = "select * from LARGETABLE left join TABLEB on LARGETABLE.ID=TABLEB.PARENTID";
   SqlDataAdapter da = new SqlDataAdapter(sqlString, sqlConnection);
   da.Fill(dt);
   bindingSource1.DataSource = dt; 
```

...

```
 gridControl1.DataSource = bindingSource1 
```

执行 da.Fill(dt) 行时，一段时间后会引发**OutOfMemoryException错误。**

Microsoft Server Studio 确实可以毫无问题地加载表格，并在网格中显示所有 2M+ 行。是否可以在c#中构建这样的数据浏览器并加载大型数据集而不会耗尽内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:15:34.007

我相信通过和'DataTable'绑定`2M`记录`BindingSource`不是一个好主意。由于您使用的是 DevExpress 网格控件，我建议您使用他们的**[服务器数据绑定模式](http://help.devexpress.com/#WindowsForms/CustomDocument8398)**（同步或异步）。[您可以在“常规绑定模式与常规服务器模式与即时反馈模式](http://help.devexpress.com/#WindowsForms/CustomDocument2991)”一文中阅读有关此概念的更多信息。
要从服务器模式开始，请使用以下方法文章： [服务器模式：使用“LINQ to SQL 类”绑定到数据源](http://help.devexpress.com/#WindowsForms/CustomDocument4057)

# html - 使用css仅选择表格中的第一行

> ID：15525503
> 
> 赞同：5
> 
> 时间：2013-03-20T13:52:44.133
> 
> 标签：html, css, css-selectors, html-table

我在一个 HTML 页面中有许多表，其中一些只使用`tr & td`其他的正在使用他们可以使用的一切：`thead, tbody, tfoot, tr, th & td`.

因为有些问题我们使用 CSS 规则来制作表格的顶部和左侧边框，并且每个`td`都有自己的右侧和底部边框。

因为这个特殊的东西我们需要`td`在所有四个角上都得到 's 并绕过它们的特定角。

如何执行只能选择表中第一行的单个规则？

到目前为止，我正在使用此规则：

```
table.unit tr:first-child td:first-child, table.units thead tr:first-child th:first-child {
  border-top-left-radius: 10px;
}
table.unit tr:first-child td:last-child, table.units thead tr:first-child th:last-child {
  border-top-right-radius: 10px;
} 
```

在这个 jsfiddle 你可以看到我的问题：（[http://jsfiddle.net/NicosKaralis/DamGK/](http://jsfiddle.net/NicosKaralis/DamGK/)）

*   有没有办法同时解决这两个实现？
*   如果有，我该怎么做？
*   如果没有，你能帮我找出最好的方法吗？

PS：我可以改变表格的元素，但它会在第三方库中进行更多的重构，所以我们不想改变它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:52:56.867

## 我觉得你说得太具体了

**更新**：原始答案没有直接的子选择器来防止子选择器元素传播给孙子等。

我相信[这个小提琴](http://jsfiddle.net/DamGK/11/embedded/result/)显示了你想要的。它只是使用此代码来选择表格元素的角，无论配置如何：

```
/* This works for everything */
.unit > :first-child > :first-child > :first-child, /* Top left */
.unit > :first-child > :first-child > :last-child,  /* Top right */
.unit > :last-child > :last-child > :first-child,  /* Bottom left */
.unit > :last-child > :last-child > :last-child    /* Bottom right */
{
    background: red;
} 
```

当然，`table.unit`如果你的`.unit`类被放在除了 a 之外的其他元素上，你可以使用它`table`来缩小选择范围，但关键是让子选择器保持模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:12:01.480

您不必更改表的结构。它们符合 HTML 标准，并且有一个解决方案使用干净的 CSS 来获得您询问的效果。在表格包装元素上使用`:first-child`and ，并允许您仅获取整个表格角落的单元格。这是详细信息。`:last-child``thread``tbody``tfoot`

选择`*`器只是选择所有元素。但这`>`意味着仅将效果应用于直接子级。因此，我们获取上面列出的所有表格包装元素。没有更深层次的`table`类似孩子`tr`或`td`受到影响。

为了同时包含`th`and `td`，我们再次使用`*`with`>`来获取表行的所有直接子元素，无论它们是`th`or `td`。相反，您可以类似地为两者定义选择器。

```
.unit > *:first-child > tr:first-child > *:first-child,
.unit > *:first-child > tr:first-child > *:last-child,
.unit > *:last-child  > tr:last-child  > *:first-child,
.unit > *:last-child  > tr:last-child  > *:last-child {
    background: red;
} 
```

我根据您在问题中提供的代码制作了一个[工作演示。](http://jsfiddle.net/DamGK/10/)

无论如何，你还没有告诉我们你需要这个做什么，并且可能有更好的方法来实现它。例如，如果您想提供圆角，您可以将效果应用于`table`包装 div 的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:01:43.987

您可以像这样处理以下情况：

```
tr td:first-child, tr th:first child {some styles}
thead + tbody tr td:first-child {revert the above styles} 
```

但是，我不知道您将如何处理 tfoot 的相同情况。您可能需要使用脚本。

# vb.net - 通过 FtpWebRequest 上传文件远程服务器返回错误 227 进入被动模式

> ID：15525505
> 
> 赞同：2
> 
> 时间：2013-03-20T13:52:48.963
> 
> 标签：vb.net, upload, ftp, ftpwebrequest

我正在从我的数据库中读取数据并将其重新格式化为一个逗号分隔的 CSV 文件，我需要将该文件上传到 FTP 服务器。

此过程读取包含逗号分隔格式数据的字符串的 Byte 数组，并将其上传到服务器：

```
Private Sub uploadToServer(ByVal data() As Byte, ByVal filename As String)
    Try
        Dim ftpr As FtpWebRequest = _
            DirectCast(WebRequest.Create(String.Format("ftp://ftp.this.com/{0}", filename)), FtpWebRequest)
        ftpr.Credentials = New NetworkCredential("thisUser", "somePassword0rOther")
        ftpr.Method = WebRequestMethods.Ftp.UploadFile

        Using stream As Stream = ftpr.GetRequestStream()
            stream.Write(data, 0, data.Length)
        End Using
    Catch ex As Exception
        el.WriteEntry(String.Format("Error uploading file: {1}", vbNewLine & ex.Message))
    End Try
End Sub 
```

至少，这就是它应该做的……以及它昨天所做的。但现在，我不断在异常中返回它：

> 远程服务器返回错误：227 Entering Passive Mode

我在尝试使用 FileZilla 连接到同一台服务器时遇到了同样的错误，这让我认为问题出在服务器上。

我不打算在这里解决服务器问题，但我确实需要确认此代码没有任何问题。然后我可以去 serverfault 并在那里查询任何可能的服务器问题。

所以......这段代码有什么问题吗？

**编辑**
测试访问我发现的 FTP 的其他方式：

*   通过 RDP 将 FTP 访问到服务器本身（Windows Server 2008 R2）可以工作
*   FileZilla 回归`Connection timed out. Failed to retrieve directory listing`

*   通过 Windows 资源管理器连接返回`An error occurred opening that folder on the FTP Server. Make sure you have permission to access that folder. Details: The operation timed out`. 当办公室中的任何人尝试通过 FTP 访问服务器时，也会发生同样的情况。

我很确定这也是我的应用程序中正在发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:58:15.957

根据[NCFtp 的文档](http://www.ncftp.com/ncftpd/doc/misc/ftp_and_firewalls.html)，这是请求服务器进入被动模式时的适当响应。我认为您可能会在不应该的情况下将响应解释为错误。

另外，根据[维基百科的 FTP 返回码条目](http://en.wikipedia.org/wiki/List_of_FTP_server_return_codes)，所有以 2xx 开头的响应都是肯定响应；它们表明成功。具体来说，`227`表示成功过渡到被动模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T09:20:40.593

**227 进入被动模式是对 FTP PASV 命令的有效响应。我不确定为什么我们会将此作为异常抛出。**可能是你的防火墙。

此外，您还没有正确构建您的 FTP，请查看我的 FTP 类：它非常简单。

```
Public Class FTP
        '-------------------------[BroCode]--------------------------
        '----------------------------FTP-----------------------------
        Private _credentials As System.Net.NetworkCredential
        Sub New(ByVal _FTPUser As String, ByVal _FTPPass As String)
            setCredentials(_FTPUser, _FTPPass)
        End Sub
        Public Sub UploadFile(ByVal _FileName As String, ByVal _UploadPath As String)
            Dim _FileInfo As New System.IO.FileInfo(_FileName)
            Dim _FtpWebRequest As System.Net.FtpWebRequest = CType(System.Net.FtpWebRequest.Create(New Uri(_UploadPath)), System.Net.FtpWebRequest)
            _FtpWebRequest.Credentials = _credentials
            _FtpWebRequest.KeepAlive = False
            _FtpWebRequest.Timeout = 20000
            _FtpWebRequest.Method = System.Net.WebRequestMethods.Ftp.UploadFile
            _FtpWebRequest.UseBinary = True
            _FtpWebRequest.ContentLength = _FileInfo.Length
            Dim buffLength As Integer = 2048
            Dim buff(buffLength - 1) As Byte
            Dim _FileStream As System.IO.FileStream = _FileInfo.OpenRead()
            Try
                Dim _Stream As System.IO.Stream = _FtpWebRequest.GetRequestStream()
                Dim contentLen As Integer = _FileStream.Read(buff, 0, buffLength)
                Do While contentLen <> 0
                    _Stream.Write(buff, 0, contentLen)
                    contentLen = _FileStream.Read(buff, 0, buffLength)
                Loop
                _Stream.Close()
                _Stream.Dispose()
                _FileStream.Close()
                _FileStream.Dispose()
            Catch ex As Exception
                MessageBox.Show(ex.Message, "Upload Error: ", MessageBoxButtons.OK, MessageBoxIcon.Error)
            End Try
        End Sub
        Public Sub DownloadFile(ByVal _FileName As String, ByVal _ftpDownloadPath As String)
            Try
                Dim _request As System.Net.FtpWebRequest = System.Net.WebRequest.Create(_ftpDownloadPath)
                _request.KeepAlive = False
                _request.Method = System.Net.WebRequestMethods.Ftp.DownloadFile
                _request.Credentials = _credentials
                Dim _response As System.Net.FtpWebResponse = _request.GetResponse()
                Dim responseStream As System.IO.Stream = _response.GetResponseStream()
                Dim fs As New System.IO.FileStream(_FileName, System.IO.FileMode.Create)
                responseStream.CopyTo(fs)
                responseStream.Close()
                _response.Close()
            Catch ex As Exception
                MessageBox.Show(ex.Message, "Download Error: ", MessageBoxButtons.OK, MessageBoxIcon.Error)
            End Try
        End Sub
        Public Function GetDirectory(ByVal _ftpPath As String) As List(Of String)
            Dim ret As New List(Of String)
            Try
                Dim _request As System.Net.FtpWebRequest = System.Net.WebRequest.Create(_ftpPath)
                _request.KeepAlive = False
                _request.Method = System.Net.WebRequestMethods.Ftp.ListDirectoryDetails
                _request.Credentials = _credentials
                Dim _response As System.Net.FtpWebResponse = _request.GetResponse()
                Dim responseStream As System.IO.Stream = _response.GetResponseStream()
                Dim _reader As System.IO.StreamReader = New System.IO.StreamReader(responseStream)
                Dim FileData As String = _reader.ReadToEnd
                Dim Lines() As String = FileData.Split(New String() {Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries)
                For Each l As String In Lines
                    ret.Add(l)
                Next
                _reader.Close()
                _response.Close()
            Catch ex As Exception
                MessageBox.Show(ex.Message, "Directory Fetch Error: ", MessageBoxButtons.OK, MessageBoxIcon.Error)
            End Try
            Return ret
        End Function

        Private Sub setCredentials(ByVal _FTPUser As String, ByVal _FTPPass As String)
            _credentials = New System.Net.NetworkCredential(_FTPUser, _FTPPass)
        End Sub
    End Class 
```

初始化：

```
Dim ftp As New FORM.FTP("username", "password")

ftp.UploadFile("c:\file.jpeg", "ftp://domain/file.jpeg")

ftp.DownloadFile("c:\file.jpeg", "ftp://ftp://domain/file.jpeg")

Dim directory As List(Of String) = ftp.GetDirectory("ftp://ftp.domain.net/")
        ListBox1.Items.Clear()
        For Each item As String In directory
            ListBox1.Items.Add(item)
        Next 
```

# javascript - 循环遍历多维数组

> ID：15525507
> 
> 赞同：1
> 
> 时间：2013-03-20T13:52:50.833
> 
> 标签：javascript

我怎样才能遍历下面的多维数组？

我正在创建这样的数组：

```
var _cQueue = [[]]; 
```

并添加这样的项目：

```
var valueToPush = new Array();
valueToPush['unique_email@gmail.com'] = '1234567';
_cQueue.push(valueToPush); 
```

我想遍历添加的所有不同的电子邮件地址，然后是与该电子邮件关联的每个随机字符串

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T13:55:08.837

首先，您不应该通过键向数组添加元素，而是向对象添加元素。这意味着您的全局对象应构建为：

```
var _cQueue = [];
var valueToPush = {}; // this isn't an array but a js object used as map
valueToPush['unique_email@gmail.com'] = '1234567';
_cQueue.push(valueToPush); 
```

然后，您使用两种循环进行迭代：

```
for (var i=0; i<_cQueue.length; i++) { // iterate on the array
   var obj = _cQueue[i];
   for (var key in obj) { // iterate on object properties
      var value = obj[key];
      console.log(value);
   }
} 
```

请参阅 MDN 的出色[使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

* * *

如果要查找与 id 关联的电子邮件，可以做两件事：

1）循环直到找到它：

```
function find(id) {
    for (var i=0; i<_cQueue.length; i++) { // iterate on the array
       var obj = _cQueue[i];
       for (var key in obj) { // iterate on object properties
          var value = obj[key];
          if (value==id) return key;
       }
    }
} 
```

2) 将所有 id 放入地图中，以便更快地找到它：

```
 var bigMap = {};
   for (var i=0; i<_cQueue.length; i++) { // iterate on the array
       var obj = _cQueue[i];
       for (var key in obj) { // iterate on object properties
          bigMap[obj[key]] = key; // maps the id to the email
       }
    }
    function find(id) {
        return bigMap[id];
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T13:58:23.090

对两个级别都使用 for-in：

```
for(var val in _cQueue){
var obj = _cQueue[val];
   for(var val1 in obj){
    alert('key(email):' + val1 + '\nValue:' + obj[val1]);
   }
} 
```

# android - 获取操作项位置

> ID：15525512
> 
> 赞同：0
> 
> 时间：2013-03-20T13:53:02.360
> 
> 标签：android, android-actionbar

我想在我的应用程序中有一个教程，它将弹出描述如何与界面/菜单交互的窗口。

有没有办法在代码中确定哪些操作项是可见的以及它们的位置。我希望弹出窗口指向它们。

还有一种简单的方法可以确定是否有溢出按钮？我想我可能不得不检查硬件菜单按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:26:35.390

好吧，我会被诅咒的，尽管 MenuItem 没有从 View 继承，但在引擎盖下的某个地方它是一个视图，它的 id 可以像任何其他视图一样传递给 findViewById()。

获得视图后，您可以使用 getLocationOnScreen()

前任：

```
View menuItem = findViewById(R.id.menuItem );
int[] location = new int[2];
menuItem.getLocationOnScreen(location); 
```

显然，考虑到行动项目的不可靠可见性，您必须对此小心。

这是我的菜单解决方法：

```
boolean hasMenu = false;
if (Utils.hasIceCreamSandwich())
    hasMenu = ViewConfiguration.get(this).hasPermanentMenuKey();
else
    hasMenu = Build.VERSION.SDK_INT <= 10; 
```

# iphone - 我们如何检查用户或iOS杀死的ios应用程序

> ID：15525513
> 
> 赞同：10
> 
> 时间：2013-03-20T13:53:03.317
> 
> 标签：iphone, ios, background-process

如果应用程序在后台完成约 10 分钟，它将处于暂停模式。可以通过以下两种方式杀死应用程序：

1.  iOS 可以杀死应用程序：在这种情况下，“applicationWillTerminate”会调用。

2.  用户可以使用多任务 UI 明确终止应用程序。（通过双击主页按钮并按下 -（红色）按钮）

在第二种情况下，我们如何让该应用程序被用户杀死？

我检查了以下问题，但没有取得丰硕的结果： [App被用户杀死](https://stackoverflow.com/questions/7343404/how-to-know-whether-app-is-terminated-by-user-or-ios-after-10min-background)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T14:13:17.030

如果您的应用程序处于挂起状态，那么`applicationWillTerminate`无论谁杀死了应用程序 iOS 或用户，都不会被调用。

只有当您的应用程序处于后台并且它被杀死（由 iOS 或用户）时，您`applicationWillTerminate`才会调用“后台”一词意味着它在后台运行而不是处于挂起状态。

只需阅读[此参考](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623111-applicationwillterminate)

> applicationWillTerminate：——让您知道您的应用程序正在被终止。如果您的应用程序被暂停，则不会调用此方法。

这是各种状态的表 ![在此处输入图像描述](../Images/3989ed30a15419552eda21908925a1fa.png)

> 背景 - 应用程序在后台并执行代码。大多数应用程序在被暂停的过程中会短暂进入此状态。但是，请求额外执行时间的应用程序可能会在此状态下保持一段时间。此外，直接在后台启动的应用程序会进入此状态而不是非活动状态。有关如何在后台执行代码的信息，请参阅后台执行。

# tsql - m:n 关系中的 select 语句

> ID：15525515
> 
> 赞同：0
> 
> 时间：2013-03-20T13:53:07.043
> 
> 标签：tsql, select, many-to-many

我有三张桌子：

USER
用户
名 fname
lname

GROUP
groupid
说明

USER_GROUP
usergroupid
userid
groupid

我需要获取用户表的名字和姓氏。给出的是组描述。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:58:37.120

尝试这个：

```
SELECT USER.*
FROM USER 
  INNER JOIN USER_GROUP ON USER.userid = USER_GROUP.userid
  INNER JOIN [GROUP] ON USER_[GROUP].groupid = [GROUP].groupid
WHERE [GROUP].description = 'Blah blah' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:59:50.273

怎么样

```
 Select FName, LName
   From user u
   Where Exists 
       (Select * From user_Group ug
            join group g On g.GroupId = ug.groupId
        Where ug.userId = u.UserId
            anf g.description = @GroupDescription) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:55:10.110

```
SELECT  a.Fname,
        a.LName,
        c.Description
FROM    [USER] a
        INNER JOIN [USER_GROUP] b
            ON a.userID = b.userID
        INNER JOIN [GROUP] c
            ON b.groupid = c.groupID
WHERE   c.Description = 'description_here' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# forms - 如何形成：无需单击按钮即可发布到 PayPal

> ID：15525516
> 
> 赞同：0
> 
> 时间：2013-03-20T13:53:12.097
> 
> 标签：forms, paypal, webclient

我需要发布到我的网页，以便在发送到 PayPal 之前验证数据库。在我的客户单击我的 PayPal 按钮后，我运行我的 sql，如果有效，我需要路由（发布？）到 PayPal，而无需单击其他按钮。有人告诉我尝试 WebClient，但我没有从沙盒中得到任何响应

```
WebClient wc = new WebClient();
wc.Headers.Add("cmd","_s-xclick");
wc.Headers.Add("hosted_button_id","_s-69D4DYUL2V32W");
byte[] arr = wc.DownloadData("https://www.paypal.com/cgi-bin/webscr"); 
```

您能告诉我无需单击额外按钮即可路由到 payPal 的最简单方法以及如何捕获来自 payPal 的响应？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:49:05.233

完成验证后，您可以让系统执行自动重定向/标头重定向，您可以在其中发布到 PayPal URL，并将变量附加到 URL。

# ios - MKMapView 在更改其 boundingMapRect 后未正确更新覆盖

> ID：15525526
> 
> 赞同：4
> 
> 时间：2013-03-20T13:53:27.153
> 
> 标签：ios, objective-c, mkmapview

下面是非常简单的自定义叠加对象：

```
@interface Overlay : NSObject <MKOverlay>
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, assign) MKMapRect boundingMapRect;
@end

@implementation Overlay
- (id)init {
    self = [super init];
    if (self) {
        _coordinate = CLLocationCoordinate2DMake(37.78577, -122.40645);
        _boundingMapRect.origin = MKMapPointForCoordinate(_coordinate);
        _boundingMapRect.size = MKMapSizeMake(200, 200);
    }
    return self;
}
@end 
```

OverlayView 也很简单：

```
@implementation OverlayView
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context
{
    Overlay* overlay = (Overlay*)[self overlay];
    CGRect r = [self rectForMapRect:overlay.boundingMapRect];

    CGContextSetStrokeColorWithColor(context, [[UIColor redColor] CGColor]);
    CGContextSetLineWidth(context, 10);
    CGContextStrokeEllipseInRect(context, r);
}
@end 
```

并且它的`boundingMapRect`属性在按钮单击时更新：

```
-(IBAction)onUpdateOverlayBtn:(id)sender
{
    _overlay.boundingMapRect = MKMapRectInset(_overlay.boundingMapRect, -3000, -3000);
    [_overlayView setNeedsDisplayInMapRect:_overlay.boundingMapRect];
} 
```

放大MKMapView时出现问题（右侧）：

![截屏](../Images/e26439f8a784e68f3c088b761acfc848.png)

[在 bitbucket 上测试 Xcode 项目](https://bitbucket.org/onegray/mkoverlaytest)

# wicket - 在页面中获取特定的 Wicket 组件

> ID：15525528
> 
> 赞同：7
> 
> 时间：2013-03-20T13:53:29.157
> 
> 标签：wicket, wicket-1.5

在页面中查找特定（已知的 wicket id）Wicket 组件关于较少努力性能的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T18:28:21.720

您的选择是：

*   在特定路径搜索组件的组件的[get()方法。](http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/Component.html#get%28java.lang.String%29)
*   MarkupContainer 上的一个[iterator() ，它有他所有的孩子。](http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/MarkupContainer.html#iterator%28%29)
*   使用包含MarkupContainer的所有子孙的[visitChildren() 。](http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/MarkupContainer.html#visitChildren%28%29)`visitChildren()`返回[ComponentHierachyIterator](http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/util/iterator/ComponentHierarchyIterator.html)，它又具有一个方法，该方法具有一个方法[filterById()](http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/util/iterator/ComponentHierarchyIterator.html#filterById%28java.lang.String%29)，该方法返回另一个`ComponentHierachyIterator`过滤后的组件。

# jquery - 移动菜单在响应式布局中不起作用

> ID：15525531
> 
> 赞同：0
> 
> 时间：2013-03-20T13:53:32.080
> 
> 标签：jquery, css, responsive-design

你们昨天帮我解决了我的响应式滑块问题，这太棒了！

一旦开始工作，其他东西就会由于某种原因停止工作。减小窗口大小以将主菜单栏移动到精简的移动菜单时，点击或单击时不起作用。菜单在活动时会向下滚动，但现在什么都没有。

在这里想弄清楚这个问题有点疯狂，并希望我能得到更多的关注。

再次，提前非常感谢！！

这是网址：http: [//4grain.bmdigitalgroup.com/](http://4grain.bmdigitalgroup.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:56:38.527

我在控制台中收到此错误：

```
TypeError: 'undefined' is not a function (evaluating 'this.$el.on(this.on,function(e){if($(this).prop("tagName")==="A"){e.preventDefault()}e.stopPropagation();scope.trigger(scope.triggered)})') 
```

我会检查 tagName 属性。

# jquery - 如何通过单击jQuery中的子按钮来隐藏父元素

> ID：15525532
> 
> 赞同：1
> 
> 时间：2013-03-20T13:53:33.047
> 
> 标签：jquery, show-hide, jquery-events

我有以下 HTML 代码，我想用类 editfield 和 editfieldlink 链接隐藏 div，并用类值显示 div。我尝试遵循 jQuery 代码，但它对我不起作用，但如果我像这样隐藏父级，这很好用：`$(this).closest('div.editfield').parent().hide();`

```
<tr class="row-fluid settingsrow">
                <td class="span2">
                    <strong>Name</strong>
                </td>

                <td class="span8">
                <div class="value">ALI ASAD</div>
                <div class="editfield">
                    <form class="form-vertical">         
                        <div class="control-group">
                            <label class="control-label">First Name</label>
                            <div class="controls">
                                <input type="text" name="firstname" id="firstname" placeholder="Ali">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Last Name</label>
                            <div class="controls">
                                <input type="text" name="lastname" placeholder="Asad">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <button type="submit" class="btn btn-primary btn-mini">Save Changes</button>
                                <button class="btn btn-inverse btn-mini cancelactionsettings">Cancel</button>
                            </div>
                        </div>
                    </form> 
                </div>
                </td>
                <td class="span1"><a href="#" class="editfieldlink" style="text-decoration:none"><small>Edit</small></a></td>
            </tr> 
```

我的 JavaScript 是这样的：

```
$(document).ready(function(e) 
    {
    $('#settingseditor .cancelactionsettings').click(function(event)
    {
        event.preventDefault();

        $(this).closest('div.editfield').hide();
        $(this).closest('div.value').show();
        $(this).closest('a.editfieldlink').hide();

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:58:57.720

试试父母（）。

```
$('#settingseditor .cancelactionsettings').click(function(event)
{
  event.preventDefault();

  $(this).parents('div.editfield').hide();
  $(this).parents('div.editfield').prev().show();
  $(this).parents('td.span8').next().find('a.editfieldlink');

}); 
```

**注意：我在您的代码中没有找到`#settingseditor`....如果 incase ，您正在尝试使用多选器，那么您忘记了`,`操作员...**

```
$('#settingseditor , .cancelactionsettings').click(...
 //---------------^^^^--- here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:09:46.437

你只是没有正确遍历

```
$(document).ready(function (e) {
    $('#settingseditor .cancelactionsettings').click(function (event) {
        event.preventDefault();
        $(this).closest('div.editfield').hide();
        $(this).closest('div.editfield').prev('.value').show(); // .value is a prev sibling of div.editfield
        $(this).closest('td').next().find('a.editfieldlink').hide();// anchor is in the next sibling td
    });
}); 
```

[小提琴](http://jsfiddle.net/6EfMj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:59:33.257

不确定带有 id 的元素在哪里`#settingseditor`，但如果我只是在寻找`.cancelactionsettings`元素，它对我有用

```
$('#settingseditor, .cancelactionsettings').click(function(event)
{
   ...
} 
```

[jsFiddle](http://jsfiddle.net/78zKZ/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:00:18.497

您的选择器与任何元素都不匹配；将此更改`$('#settingseditor .cancelactionsettings')`为`$('.cancelactionsettings')`.

请参阅此[小提琴](http://jsfiddle.net/XBpAN/)以获取工作示例

# c++ - 弱链接的实际应用是什么？

> ID：15525537
> 
> 赞同：29
> 
> 时间：2013-03-20T13:53:41.173
> 
> 标签：c++, c, linker

使用特殊的编译器命令可以将符号声明为*weak*。[根据维基百科](https://en.wikipedia.org/wiki/Weak_symbol)：

> 弱符号是目标文件或动态库中的符号定义，可能会被其他符号定义覆盖

在哪些场景或哪些应用中需要弱符号？什么是典型的用例？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T14:10:52.680

在嵌入式开发中，例如，当您有一个中断指针向量时，能够使用弱链接为您不感兴趣的中断获取默认处理程序非常方便。

这通过定义一个空处理程序（一次），然后为您需要的每个中断指针引入一个新的正确命名的符号，该符号与默认处理程序弱链接。

然后用这些符号填充向量，这些符号都指向相同的实际代码，直到您决定使用相同（正确）名称实现其中一个，然后您的代码“压倒”弱链接，导致指向您的指针要安装在中断表中的代码。

这通常在 C 和汇编的某种混合中实现，但使用 C 伪代码，我们可能会有类似的东西：

```
static void placeholder_isr(void)
{
}

/* Introduce properly-named function pointers, with weak linking.
 * NOTE: This syntax is completely fictional as far as I know.
*/
void (*timer1_isr)() = placeholder_isr __attribute("weak linking");
void (*timer2_isr)() = placeholder_isr __attribute("weak linking");
void (*usart1_isr)() = placeholder_isr __attribute("weak linking");
void (*usart2_isr)() = placeholder_isr __attribute("weak linking");
void (*dma1_isr)() = placeholder_isr __attribute("weak linking");
void (*dma1_isr)() = placeholder_isr __attribute("weak linking");

/* Declare the table of interrupt handlers. */
static void (*isr_table)[] = {
  timer1_isr,
  timer2_isr,
  usart1_isr,
  usart2_isr,
  dma1_isr,
  dma2_isr,
} __attribute("isr vector"); /* Attribute to place it where it needs to go. */ 
```

然后您可以在需要时实现自己的功能：

```
void timer1_isr(void)
{
  /* Handler ISR from timer1\. */
} 
```

无需更改任何其他内容，它“就可以工作”。当然，只要您的名字是上述“支持代码”所期望的名字。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-20T14:37:58.893

弱链接的一种用途是实现 C++ 标准中的*可替换*函数。即：

```
void *operator new(std::size_t);
void *operator new(std::size_t, std::nothrow_t const &) noexcept;
void *operator new[](std::size_t);
void *operator new[](std::size_t, const std::nothrow_t&) noexcept;
void operator delete(void *) noexcept;
void operator delete(void *, std::nothrow_t const &) noexcept;
void operator delete[](void *) noexcept;
void operator delete[](void *, std::nothrow_t const &) noexcept; 
```

这些是实现必须提供的功能，但是如果程序实现了它们，那么程序的实现将替换或覆盖实现的版本。这很容易通过弱链接实现。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-20T14:22:26.533

典型的日常用例是内联和模板函数。

例如，使用以下代码编译时的这部分代码`g++ -shared -fPIC`：

```
extern void a();

inline void foo() { a(); }

void bar() { foo(); }
void baz() { foo(); } 
```

将符号 bar 和 baz 标记为 T（正常），`nm`而 foo 将标记为 W - 弱。

（即`mn -C ./a.out`）

理由：

内联函数和模板可以在标题中定义，并且通常在源的不同部分定义多次，最后只有一个保持活动状态。

如果它没有被标记为弱，它将是多个“foo”符号的冲突，或者编译器将无法禁用内联

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-20T14:11:47.253

> [weak](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Function-Attributes.html)属性导致声明作为弱符号而不是全局符号发出。这主要用于定义可以在用户代码中覆盖的库函数，尽管它也可以与非函数声明一起使用。ELF 目标支持弱符号，使用 GNU 汇编器和链接器时也支持 a.out 目标。

[弱属性示例](http://www.cs.virginia.edu/~wh5a/blog/The%20weak%20attribute%20of%20gcc.html)：

***弱.c***

```
extern void foo() __attribute__((weak));

int main() {
if (foo) foo();
} 
```

***foo.c***

```
void foo() {
printf("in foo.\n");
} 
```

***强.c***

```
extern void foo() ;

int main() {
if (foo) foo();
} 
```

***编译***

```
$ cc weak.c // Compiles OK
$ cc strong.c // undefined reference to `foo' 
```

> 当“foo”被声明为弱时，它的定义可以省略，或者被不同的库替换，具有一种“链接时绑定”的特点。链接器将为未定义的弱符号填充 0。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-20T14:19:00.377

当您希望能够覆盖代码的另一部分中的函数定义时，通常会使用弱链接。这在指定例如默认错误处理程序的库中通常是这种情况，如果您使用该库，您可以使用自定义函数覆盖该处理程序。

# macos - 如何将属性绑定到外部控制器？

> ID：15525539
> 
> 赞同：0
> 
> 时间：2013-03-20T13:53:45.507
> 
> 标签：macos, cocoa, interface-builder, cocoa-bindings

我使用 SDK 10.6 和 Xcode 4.2。

我想将“属性”绑定到“在我的笔尖之外”存在的控制器。我该怎么办：

*   使用界面生成器？
*   没有它 ？

更准确地说，我想将`enabled`a 的属性绑定`NSButton`到“在我的 nib 之外”存在的 arrayController 上。在界面生成器中，我可以绑定属性的唯一对象是占位符或对象。但 ：

*   我无法更改占位符。
*   如果我的 NIB 有一个 arrayController，它将在我的 NIB 加载时创建。

为什么我会出现这种情况？因为：arrayController 在我的 NIB 中；但该按钮位于另一个 NIB 中。这第二个 NIB 是我的主视图的子视图。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:25:10.193

我想我找到了答案。

一些符号：

*   `MySubiewController`并且`MySubiewController.xib`是我想要执行一些绑定的几个对象。它们必须被视为子视图。
*   在我程序的其他地方，“上面”，我已经有一个`myMainArrayController`. 它是一个`ArrayController`，与我的数据链接，并“在我的主视图中创建”。

现在：答案。

*   首先，例如通过 的`init`方法`MySubiewController`，将您的变量存储`myMainArrayController`在某个变量中（在您的程序中使用它之前，您必须在 , 中将此变量公开`.h`为`@property`（更好））。让我们给这个变量起相同的名字（你可以给任何名字）。例如 ：

    ```
     - (id)initWithNibName:(NSString *)nibNameOrNil 
                   bundle:(NSBundle *)nibBundleOrNil 
      withArrayController:(NSArrayController *)anArrayController
    {
        NSLog(@"Creation of an instance of MySubiewController");

        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            myMainArrayController = anArrayController ;
        }

        return self;
    } 
    ```

    这是您将告诉您的“子视图”谁`arrayController`已经存在的地方。

*   `File's Owner`用然后做你的绑定`self.myMainArrayController`。

*   就是这样！！！它应该工作！

# c++ - 理论 c++ OO 策略代码

> ID：15525541
> 
> 赞同：0
> 
> 时间：2013-03-20T13:53:45.717
> 
> 标签：c++, optimization, theory

假设我有一段代码：

```
A1 a;
A2 b;
a= function1_A();
b= function2_A(); 
```

然后我想以另一种方式做到这一点：

```
B1 a;
B2 b;
a= function1_B();
b= function2_B(); 
```

我做了一个策略设计模式来拥有两者并决定我想要的一个。但问题是代码是相同的，所有的 A 现在都是 B。当然，它所做的可能完全不同，但这超出了范围。

有没有办法设计代码以防止这种重复？

如果只是函数，我知道我可以使用抽象超类来完成它并拥有它

```
a=function1_SUPER(); 
```

然后每个都有正确的实现，例如：

```
function1_SUPER(){ function1_A();} 
```

但这仍然会产生很多代码。Plus 不适用于将 A1 更改为 B1 之类的类名称，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:19:21.070

我认为您必须使用模板。例如：

```
#include <iostream>

template <class C1, class C2> class MyClass
{
public:
    C1 *function1()
    {
        return new C1();
    };

    C2 *function2()
    {
       return new C2();
    };
};

int main()
{
    MyClass<int, double> intDoubleClass;

    int *a1 = intDoubleClass.function1();
    double *a2 = intDoubleClass.function2(); 

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:23:24.877

我将在我看到的两个部分中组合问题：首先，按类型（A1，A2 与 B1，B2）进行区分，其次，通过变量的初始化进行区分。既然你说，代码都是一样的，但类型不是模板。所以我的第一次尝试是：

```
template <class X1, class X2>
struct MyStrategy {
  void foo()
  {
    X1 a = /* create appropiate X1 */;
    X2 b = /* create appropiate X2 */;
    // code that is the same for both except for the types...
  }
}; 
```

当然，该函数将具有参数和/或返回类型，但您明白了要点。

现在到第二部分，我在评论中留下的部分：值的初始化。我会通过某种基于策略的设计来实现这一点。第一张草图：

```
template <class X1, class X2>
struct X1X2Creator;

template <> 
struct X1X2Creator<A1, A2> {
  A1 createX1() { return function1_A(); }
  A2 createX2() { return function2_A(); }
};

template <> 
struct X1X2Creator<B1, B2> {
  B1 createX1() { return function1_B(); }
  B2 createX2() { return function2_B(); }
};

template <class X1, class X2>
struct MyStrategy : X1X2Creator<X1, X2> {
  void foo()
  {
    X1 a = this->createX1();
    X2 b = this->createX2();
    // code that is the same for both except for the types...
  }
}; 
```

`this->createX1()`请注意，由于它们的依赖名称，您必须通过 调用创建函数，否则编译器应该会抱怨。您也可以明确限定函数 ( `X1X2Creator<X1, X2>::createX1()`)。

您可以根据需要改进该设计，例如不使用继承，而是实例化 X1X2Creator 并调用函数或将它们设为静态。如果您想使用更多不同类型的组合，请为每种类型使用一个创建策略：

```
template <class X1, class X2>
struct MyStrategy {
  void foo()
  {
    X1 a = CreationPolicy<X1>::create();
    X2 b = CreationPolicy<X2>::create();
    // code that is the same for both except for the types...
  }
}; 
```

如果您希望能够对相同类型使用不同的策略，请提供策略类作为模板参数：

```
template <class X1, class X2, 
  class X1Creator = CreationPolicy<X1>,
  class X2Creator = CreationPolicy<X2>>
struct MyStrategy {
  void foo()
  {
    X1 a = X1Creator::create();
    X2 b = X2Creator::create();
    // code that is the same for both except for the types...
  }
}; 
```

高温高压

# html - 如何在内容下方制作全屏 DIV？

> ID：15525544
> 
> 赞同：0
> 
> 时间：2013-03-20T13:53:50.140
> 
> 标签：html, responsive-design, fullscreen

我一直在研究这个并且空手而归。我什至在努力寻找这个。我正在寻找一个全屏和响应式的 DIV 元素。当他们单击向下箭头或向下滚动时，就会出现内容。你能帮我吗？

[http://ivang-design.com/venus1/light/index.html](http://ivang-design.com/venus1/light/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:09:22.563

如果您实际上是要创建“长滚动页面”，请查看：[scrollorama](http://johnpolacek.github.com/scrollorama/)

# c# - 使 dll 更改表单属性

> ID：15525551
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:54:13.893
> 
> 标签：c#, dll

我有一个使用以下方法的dll：

```
 public void SetFormProperties(){
      frm.Size = new Size(20,20);
      ...
  } 
```

该方法将设置各种属性并将事件附加到表单。传递表单的最佳方法是什么，以便该方法可以访问属性，以便当表单出现时，它会立即继承方法设置的属性？

编辑：对不起，我没有把我的问题说清楚。我可以这样做，以便我将 SetFormProperties() 添加到 form_Load() 事件中并使其应用属性而不传递表单引用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:57:17.763

除非这是一个技巧问题，否则您可以`frm`在创建实例后将其传递：

```
public void SetFormProperties(Form frm){
    frm.Size = new Size(20,20);
    ...
} 
```

所以当你创建它时：

```
var frm = new Form1();
SetFormProperties(frm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:59:49.490

您提供的代码示例将不起作用。您需要返回新大小或传入对表单对象的引用。

```
 public void SetFormProperties(Form form){
      fprm.Size = new Size(20,20);
  }

SetFormPropertoes(form); 
```

或者

```
 public Size GetFormSize(){
      return new Size(20,20);
  }

from.Size = GetFormSize(); 
```

# javascript - Javascript 函数在 Firefox 中不触发

> ID：15525552
> 
> 赞同：0
> 
> 时间：2013-03-20T13:54:15.953
> 
> 标签：javascript, asp.net, firefox

我在 Firefox 中遇到了一个奇怪的问题：当用户单击某些文本时，我使用 javascript 打开一个弹出窗口，并且似乎我的 Javascript 函数根本没有触发。它在 IE、Chrome 和 Opera 中完美运行，但在 Firefox 中没有任何反应。我删除了缓存，但我仍然无法弄清楚为什么我没有得到响应。更没有错误被抛出。如何使用 Firebug 调试此代码？任何可能的想法为什么它会这样？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:59:50.867

试试这个教程。我希望它有帮助：[debug-javascript-with-firebug](http://thecodecentral.com/2007/08/01/debug-javascript-with-firebug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:52:51.513

谢谢你们所有的答案。最后我弄清楚了为什么它的行为很奇怪。我试图在鼠标单击坐标处打开弹出窗口，但似乎 Firefox 对 window.event.x 和 window.event.y 没有任何想法，我不得不改用 event.clientX 和 event.clientY。不幸的是，这些是作为我的 javascript 函数的参数传递的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:56:56.357

要回答您的问题，是的，您可以使用 FireFox 插件[Firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)调试代码。Firebug 下的控制台很可能会告诉您原因。

# java - 如何从java程序通过防火墙

> ID：15525553
> 
> 赞同：1
> 
> 时间：2013-03-20T13:54:17.927
> 
> 标签：java, firewall, telnet, jsch

好的，这是我的问题。

我正在本地工作站上工作。我在防火墙后面有一些机器，我需要从 java 代码登录到这台机器。为此，我想使用 JSch 库。如果我将这台机器的 ip 地址输入到网络浏览器，我将被重定向到防火墙登录页面，当我输入我的凭据时，我可以使用 ssh 使用以下代码登录到这台机器：

```
public void authenticate(String ip, String user, String password) {
    JSch jsch=new JSch();
    try {
        Session session = jsch.getSession(user, ip, 22);
        session.setPassword(password);
        session.setUserInfo(new UserInfoImpl(password));
        session.connect();
        System.out.println("Yes!!");
        session.disconnect();
    } catch (JSchException e) {
        e.printStackTrace();
    }
}

private class UserInfoImpl implements UserInfo{

    private String password;
    public UserInfoImpl(String password){
        this.password = password;
    }

    @Override
    public String getPassphrase() { return null;}
    @Override
    public String getPassword() {return password;}
    @Override
    public boolean promptPassphrase(String arg0) {return true;}
    @Override
    public boolean promptPassword(String arg0) {return true;}
    @Override
    public boolean promptYesNo(String arg0) {return true;}
    @Override
    public void showMessage(String arg0) {}

} 
```

但是我的程序也应该自动登录到防火墙。如果我在 Windows 命令行中使用 telnet（端口 23）而不是 ssh（端口 22），则可以从那里登录到此防火墙。

是否可以从 Java 代码（使用 JSch 或其他一些 Java 库）登录到此防火墙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:15:09.437

盲目地连接到端口 22 可能不会将您定向到防火墙的网页，因此 JSch 不会为您处理。连接时，您将引发异常。抓住这一点，然后您可以使用正常的 http 调用端口 80 触发防火墙重定向，然后获取重定向，解析结果并使用正确的表单数据发送 HTTP POST。

如果防火墙形式和地址始终相同，您可以在尝试连接到 SSH 之前直接发送 POST。

您可以为此使用标准类，请参阅 [Java - 通过 POST 方法轻松发送 HTTP 参数](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:19:44.680

令人惊讶的是，一旦您登录到您的代理，您就可以访问远程机器的 22 端口，但无论如何......

JSch 不会帮助您，但您可以使用能够处理正确代理身份验证机制的 HTTP 客户端轻松模拟 Web 浏览器在 java 中的操作。

从 Java 6 开始，提供的 URLConnection 可以处理 NTLM（除了 SOCKS 和 HTTP 代理）。无论如何，我建议使用[HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html) 4.2.x，它将提供更多选项和灵活性来帮助您调试任何问题。

# java - 如果我粘贴一些行，BufferedReader 无法识别行。如何输入行？

> ID：15525554
> 
> 赞同：-2
> 
> 时间：2013-03-20T13:54:20.517
> 
> 标签：java

我正在解决一个名为“NEWSPAPER”的 UVA 问题，我必须在其中输入几行。我粘贴了一些行，但 BufferedReader 只识别第一行，这就是我从 UVA 收到编译错误消息的原因。我这样做了：

```
String sentence = null;

try 
{
    sentence = br.readLine();
} 
catch(IOException io) 
{
    System.out.println("Found exception!");
    System.exit(1);
} 
```

这`br`是一种`BufferedReader`类型。现在，我该如何解决这个问题？UVA 问题编号是 -11340 - 报纸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:56:45.723

如果你想读到文件结尾，试试这个。

```
while((sentence=br.readLine())!= null){
    // Do something
} 
```

**句子 = br.readLine();**

上面的代码将按预期读取一行。

[BufferedReader#readLine()](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)

> 读取一行文本。一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。

# camping - 我可以告诉 render *not* 使用布局吗？

> ID：15525556
> 
> 赞同：0
> 
> 时间：2013-03-20T13:54:23.487
> 
> 标签：camping

如果我想要一个特殊的视图，比如嵌入到一个 中`iframe`，我可以将一些东西传递给该`render`方法以使其避免用布局包装我的视图，还是使用特定的布局来进行包装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:19:31.620

当然：

```
render :foobar, :layout => false 
```

# html - HTML5 Canvas 适合窗口

> ID：15525560
> 
> 赞同：11
> 
> 时间：2013-03-20T13:54:47.437
> 
> 标签：html, canvas, size

当我这样做时，我试图让我的画布适合页面：

```
ctx.canvas.width = window.innerWidth;
ctx.canvas.height = window.innerHeight; 
```

它在水平和垂直方向上都在添加滚动条。它的大小大约是滚动条的大小，甚至在它们出现之前就被考虑了（只是一个猜测）这是发生了什么，我将如何让它适合没有滚动条的页面。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T15:03:46.333

将画布位置设置为`absolute`。还要确保在包含元素中没有设置填充或边距。

这是我在所有全屏画布演示中使用的。

```
body, html {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
}
canvas {
    position:absolute;
} 
```

**[全屏演示](http://cdpn.io/Khqio)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-29T15:31:34.337

画布默认设置为`display: inline-block`. 将其更改为`display: block`

```
body {
    margin: 0;
    padding: 0;
}
canvas {
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T09:53:12.103

这对我有用

```
function resize() {

    var canvas = document.getElementById('game');
    var canvasRatio = canvas.height / canvas.width;
    var windowRatio = window.innerHeight / window.innerWidth;
    var width;
    var height;

    if (windowRatio < canvasRatio) {
        height = window.innerHeight;
        width = height / canvasRatio;
    } else {
        width = window.innerWidth;
        height = width * canvasRatio;
    }

    canvas.style.width = width + 'px';
    canvas.style.height = height + 'px';
};

window.addEventListener('resize', resize, false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-01T10:14:50.697

我有同样的问题，我通过删除`border`.

# ajax - Dojo data-dojo-type 属性不适用于 struts 2 形式

> ID：15525561
> 
> 赞同：1
> 
> 时间：2013-03-20T13:54:48.283
> 
> 标签：ajax, struts2, dojo

我已经从 dojo 1.5 升级到 dojo 1.8.1。不幸的是，struts 形式没有按预期工作。这是我的html：

```
<s:form id="formId" action="my.action"
        cssClass="floatForm" theme="css_xhtml"
        data-dojo-type="MyForm" targets="target"> 
```

MyForm 是继承自 dijit/form/Form 的自定义类型。这种类型永远不会调用 postCreate 方法。基本上它就像没有 data-dojo-type 属性一样工作。但是，如果我将 data-dojo-type 更改为 dojoType 或 <s:form 以简单地 <form 一切都按预期工作。

我正在使用 struts 2.3.4 和 dojo 1.8.1。

谁能说我做错了什么？为什么使用 struts 形式忽略 data-dojo-type？谢谢！

# ruby-on-rails - Ruby 日期范围包括特定日期

> ID：15525562
> 
> 赞同：1
> 
> 时间：2013-03-20T13:54:48.317
> 
> 标签：ruby-on-rails, ruby, date

如果我有两个日期，即。

```
checkin = Date.parse('params[:checkin])
checkout = Date.parse('params[:checkout]) 
```

我如何检查这两个日期之间是否有星期一？

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:02:26.673

```
 (checkin..checkout).any?(&:monday?) 
```

另外，我不确定 Range#any 是否？是否实例化一个数组。~~以防万一，最好添加额外的检查以避免高内存消耗~~（*请参阅下面的更新*）：

```
 checkout - checkin > 7 || (checkin..checkout).any?(&:monday?) 
```

并确保签入是<=结帐。

UPD：我刚刚仔细检查过。没有必要检查是否`checkout - checkin`大于某事。`Range#any?`足够聪明，不会在内部创建数组（至少在 ruby​​ 1.9.3 中）：

```
1.9.3p327 :004 > checkin, checkout = Date.new, Date.new + 9000.years
=> [Mon, 01 Jan -4712, Sun, 01 Jan 4288]

1.9.3p327 :005 > `ps -o vsize= #{$$}`.strip.to_i
 => 3161660   # memory usage of the current process 

1.9.3p327 :006 > (checkin..checkout).any?(&:monday?)
 => true
1.9.3p327 :007 > `ps -o vsize= #{$$}`.strip.to_i
 => 3161660   # memory usage of the current process stays the same

1.9.3p327 :008 > (checkin..checkout).to_a.any?(&:monday?) # force .to_a
 => true
1.9.3p327 :009 > `ps -o vsize= #{$$}`.strip.to_i
 => 3421680   # memory usage increases and also the previous line was very slow 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:20:44.773

这个答案是 awsum, `(checkin..checkout).any?(&:monday?)`,

但你也可以这样做，

```
(checkin..checkout).cover?(Date.today) # you can give date to it. 
```

仅供参考，@DNNX 和 Aleks，当我们在 DateRange 上应用它时，我们必须将 Date 作为一个参数来覆盖。

# html - 粗体悬停时的文本移动

> ID：15525564
> 
> 赞同：1
> 
> 时间：2013-03-20T13:54:55.867
> 
> 标签：html, css, html-table

我有这样的简单表格：

```
<table border="1">
<tr>
    <td>title1</td>
    <td>title2</td>
    <td>title3</td>
</tr>
<tr>
   <td><a href="#">item1_1</a></td>
   <td><a href="#">item1_1</a></td>
   <td><a href="#">item1_1</a></td>
</tr>
<tr>
    <td><a href="#">item1_1</a></td>
    <td><a href="#">item1_1</a></td>
    <td><a href="#">item1_1</a></td>
</tr>
<tr>
    <td><a href="#">item1_1</a></td>
    <td><a href="#">item1_1</a></td>
    <td><a href="#">item1_1</a></td>
</tr>
</table> 
```

结合我的 CSS，结果将是：http: [//jsfiddle.net/yzsfH/](http://jsfiddle.net/yzsfH/)

如您所见，当鼠标悬停在表格上时，表格内的超链接会“移动”。当然，这种运动是一种不需要的效果，我想摆脱它。我对它进行了一些搜索，但找不到任何令人满意的东西。

有人可以解释一下，为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:58:19.803

正确的方法是给当前悬停的链接赋予不同的颜色，而不是使用粗体属性来突出显示元素 - 这样，您就不会遇到这些问题！

只需删除粗体属性并将颜色更改为不同的颜色，如下所示：

```
a:hover 
{ 
  text-decoration:none; 
  color:#000000;
} 
```

请记住，将某些内容加粗会使渲染的尺寸更大，这是通常首选的方法。

**这是一个有效的 jsFiddle** - [http://jsfiddle.net/yzsfH/5/](http://jsfiddle.net/yzsfH/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:00:53.777

您可能知道，宽度在增加，因为文本大小在增加。（**粗体字**）

因此，将以下属性赋予`a`标签将解决问题。

```
a{
  display:block;
  width:55px;  /* give fixed width here */
} 
```

给定宽度`td`是[浪费](https://stackoverflow.com/q/15426183/1577396)，因为如果其中的内容增加，那么`td`即使分配了固定宽度，宽度也会增加。

[**工作小提琴**](http://jsfiddle.net/yzsfH/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:57:18.327

发生这种情况是因为粗体字体比普通字体宽。尝试使您的文本居中并使单元格稍微宽一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:57:25.957

更粗的文本=更大的文本...这不是一个错误，这是一个明显的功能尝试强制您的 td 的宽度（当然使用 CSS），以便它们的宽度不依赖于其中文本的宽度...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:58:03.907

当文本变为粗体时，宽度会增加。因为单元格环绕文本，并且文本现在更宽，所以单元格变得更宽以适应这一点。解决方法是使用较浅的字体，在悬停时使其变暗。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-27T09:22:13.983

解决这个问题给出修复宽度：50px；

# java - 以下的 TDD 方法

> ID：15525566
> 
> 赞同：-2
> 
> 时间：2013-03-20T13:55:04.133
> 
> 标签：java, tdd

您可以为下面的枚举类编写多少个测试。我正在寻找以下 O/P。

给出以下命令

```
java fileName HORIZON_BOX, HORIZON_BOX_WITH_CC,HORIZON_BOX_WITH_CC

1 HORIZON_BOX: 20.00
2 HORIZON_BOX_WITH_CC @ 30.00 : 60.00
GRAND TOTAL : 80.00 
```

您解决此问题的最佳解决方案是什么？

```
public enum Product {

    HORIZON_BOX(30.00),
    HORIZON_BOX_WITH_CC(50.00),
    HORIZON_BOX_WITH_CC_2_TB(100.00),
    HORIZON_MULTIROOM(75.00),
    HUB(20.00);

    private double price;

    private Product(double price) {
        this.price = price;
    }

    public double getPrice() {
        return price;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:06:08.637

我认为对这个枚举有意义的唯一测试是创建每个值的实例并检查 getPrice() 方法是否返回预期价格。

关于你用枚举做的算术：这是一个不同的问题，如果没有看到你这样做的实际来源和你的要求，就无法回答。设计单元测试时通常的思考过程是：

*   根据我的规范，什么是正常用例？
*   哪些罕见的边缘情况可能难以处理或需要特殊逻辑（如最小或最大允许值）？
*   规范之外的哪些用例会导致错误？
*   是否测试了所有可能的代码路径？

顺便说一句：您不应该使用 double 来表示货币价值。您应该使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)，因为它允许您指定小数位数和舍入策略。正常的双重算术不遵循金融交易中惯用的四舍五入规则。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/285680/representing-monetary-values-in-java)。

# svg - 直径=奇数的SVG圆

> ID：15525571
> 
> 赞同：0
> 
> 时间：2013-03-20T13:55:18.343
> 
> 标签：svg, geometry

我想画一个直径为奇数（7px）的圆，所以我可以画一条 1px 的直线穿过圆心。

```
<svg width="600" height="600"> 
    <circle cx="30" cy="30" r="3.5" fill="red" />
</svg> 
```

奇怪的是，无论`r`值是多少，直径总是均匀的。

![svg 圆，奇数直径值](../Images/e45288610327cc21114bbe9af8db694f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:54:20.793

移动`cx`和`cy`坐标`.5`：

```
<svg width="600" height="600"> 
    <circle cx="30.5" cy="30.5" r="3.5" fill="red" />
</svg> 
```

# algorithm - 哪些特定应用程序将使用此排序方案

> ID：15525572
> 
> 赞同：0
> 
> 时间：2013-03-20T13:55:21.550
> 
> 标签：algorithm, sorting

我有以下排序场景：

给定一个包含未排序数据的输入数组：1、5、2、6、9

a) 按降序排列，即 9、6、5、2、1

b) 将当前排序列表的最大值 9 发送到输出

c) 修改一些其余的值，即5变成10，1变成3

d) 将排序列表的其余部分更新为 10、6、3、2

e) 从 b) 重复直到所有未访问的值都发送到输出（这些值可能在每次发送后更新）

有谁知道什么样的应用程序或特定问题可以使用这种情况？最好的算法是使用两个链表来交换索引而不是插入和删除大量更新的数据吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:05:35.093

这听起来像是某种优先级队列。给定时间的最高优先级得到处理，从而从队列中删除。其他元素可能会获得优先级更改，因此在队列中前后移动。

假设列表很大（因此甚至值得考虑性能）并且更新元素的数量与元素总数相比相当小，我建议使用快速排序，所有未更改的元素都被视为已排序和已更改按算法规定插入的元素。

如果元素的大小相关，而不仅仅是数字，则独立于算法，您可能想要对它们的引用或指针进行排序，而不是实际元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:16:58.327

What you are looking for is called `Heap` ([http://en.wikipedia.org/wiki/Heap_(data_structure)](http://en.wikipedia.org/wiki/Heap_(data_structure))), which has its implementation in C++/STL as `priority_queue` and also there are functions `push_heap`, `pop_heap` ([http://www.cplusplus.com/reference/algorithm/push_heap/](http://www.cplusplus.com/reference/algorithm/push_heap/)) which work on array.

When using heap complexity of insertion/deletion/update is **O(logN)**, and getting maximum element is **O(1)** so it fits best to your needs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:04:52.020

您可以将优先级队列与其他操作一起使用：密钥修改。它可以用于[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)的实现。例如，在 Robert Sedgewick 的书“C++/C/Java 中的算法”中描述了这种具有底层二进制堆的数据结构

# javascript - Couch DB _attachment 作为响应出现，无法在代码中访问它

> ID：15525573
> 
> 赞同：0
> 
> 时间：2013-03-20T13:55:23.867
> 
> 标签：javascript, couchdb

我有一个沙发应用程序。我有一个名为 include_docs 的视图。在我可以看到来自服务器的响应的网络选项卡中，我可以看到`_attachment`充满数据的对象。但是当我 console.log`data`在回调它显示`null`。中的所有其他对象`doc`都保持原样。只是`_attachment`有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:46:58.617

如果您查看[InLine Attachments](http://wiki.apache.org/couchdb/HTTP_Document_API#Inline_Attachments "内联附件")，您会看到文档的`_attachments`元素将在文档中返回`doc.stub === true`。您需要单独请求您想要的附件`GET /database/attachment_doc/foo.txt`（来自他们的示例）。

# ruby-on-rails - 如何在 Rails 2.3.5/Ruby 1.8.7 上部署 web 服务以支持并发请求

> ID：15525574
> 
> 赞同：0
> 
> 时间：2013-03-20T13:55:25.053
> 
> 标签：ruby-on-rails, ruby, web-services, passenger, mongrel

我有一个使用 datanoise-actionwebservice (2.3.2) 实现我的 SOAP webservice API 的控制器。我根本没有将 Rail 用作 Web 应用程序或网站来提供任何静态内容 - 它纯粹作为 Web 服务运行，来自控制器代码的直接基于 Mysql.real_connect 的查询。这更多是因为我对如何使用 Rails 的模型部分缺乏更深入的了解，但更实际的是因为查询非常复杂且更易于编码。

此 Web 服务进一步对其他遗留服务进行 SOAP Web 服务调用，并回复基于 Windows 的 Web 服务客户端应用程序。

挑战在于，到目前为止，我使用默认的 mongrel 服务器来处理跨多个终端对我的 API 的多次调用，但显然需要将 mongrel 重新部署为集群或使用其他设置（例如乘客）来提高对客户端的响应时间。我找不到一个简单的 HOWTO 来实现这种或类似的方法 - 大多数都指向用作网站/webapp，其中对 apache 等的需求更多地用于提供静态内容和 CSS 等，以及 ruby​​ 部分。

谁能指出我可以设置集群以同时处理多个 Web 服务调用并在控制器中处理和响应的资源。Rails 是否会自动为每个 Web 服务请求实例化一个控制器，以便并行完成？还是我们需要使用可用的库重写？

非常感谢任何帮助/建议。我不能重写任何东西——它需要在 Rails2.3.5/Ruby1.8.7 中——升级不是一种选择，因为这已经在生产中工作了，而且 datanoise 本身似乎不像我所用的 1.8.7+ 或 Rails 3可以看到。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:24:36.530

从根本上说，您需要运行多个 Mongrel。

杂种进程将成为您的后端服务器，您将需要运行前端负载平衡代理。

问题是，纯 Ruby 单线程 Mongrel 的优点是易于设置。一旦您超越了易于设置的领域，您不妨处理运行Passenger 的复杂性。乘客将在内部进行负载平衡。

如果是我，我会从源代码编译 nginx 或 tengine，因为它不包括开箱即用的乘客。这就像在配置脚本中添加一个参数一样简单。

```
# gem install rake rack passenger --no-rdoc --no-ri
# exit
$ ./configure --add-module=`passenger-config --root`/ext/nginx
$ make 
```

# php - 验证多维数组

> ID：15525578
> 
> 赞同：0
> 
> 时间：2013-03-20T13:55:30.410
> 
> 标签：php, arrays, multidimensional-array

正如问题所说，我需要验证一个多维数组，所以你知道这是我第一次实际使用数组，所以它可能是一个非常糟糕的脚本，但它可以工作，这就是我目前所追求的。好的，它正在工作我在这个数组中显示了两个会话，当我删除其中一个会话时，我收到了这个错误

“注意：未定义的索引：在第 30 行的 C:\inetpub\wwwroot\dropdown\test.php 中弹出”

我想我知道如何解决它，但我实际上并不知道如何实现它。这是我在谈论我所追求的

```
$myarray (

IF isset session cityname

add the value to my array

ELSE

add a blank value in its place (or just remove it from the array altogether)

IF isset session pop

add the value to my array

ELSE

add a blank value in its place (or just remove it from the array altogether)

echo myarray 
```

请注意 cityname 是强制性的，而 pop 不是

这基本上就是我想要实现的目标，但我没有丝毫实际去做的方法，这是我当前的代码

```
if(isset($_SESSION['cityname'])){
        $myarray = array(array($_SESSION['cityname']),
                         array($_SESSION['pop'])
                        );
        foreach($myarray as $key=>$value){
            echo $myarray[$key][0];
        } 
```

任何帮助都非常感谢我在过去几周因这个问题失去了很多头发！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:20:26.153

该通知告诉您，您使用`$_SESSION['pop']`的是从未设置过的。实际上，在您的代码中，您刚刚检查过，`$_SESSION['cityname']`但随后您将其添加`$_SESSION['pop']`到数组中。

编辑如果你想`$_SESSION['pop']`成为可选的并且你想摆脱那个通知，只需检查是否`$_SESSION['pop']`设置：

```
if(isset($_SESSION['cityname'])){
    $myarray = array(array($_SESSION['cityname']));
    if(isset($_SESSION['pop'])) { $myarray[] = array($_SESSION['pop']); }
    foreach($myarray as $key=>$value){
        echo $myarray[$key][0];
    } 
```

# c# - PrintDocument / PrintPreviewDialog 没有任何东西绘制或打印

> ID：15525579
> 
> 赞同：1
> 
> 时间：2013-03-20T13:55:34.630
> 
> 标签：c#, .net, winforms, printing

我正在玩 PrintDocument 和 PrintPreviewDialog 类来学习它们，但我似乎无法让文档在发送到打印机时打印任何内容，而且在 PrintPreviewDialog 中也没有任何内容，甚至没有白色的空白页，它是全是灰色的。我尝试过更改边距、绘制位置、绘制巨型矩形等，但没有任何显示。我对 GDI+ 不是很熟悉，所以我确信我遗漏了一些东西，但我找不到什么。

这是我正在使用的相关代码：

```
//Print
private void menuPrint_click(Object source, EventArgs e)
{
    printDocumentPage = 0;

    printDocument1.PrintPage += new System.Drawing.Printing.PrintPageEventHandler(printDocument1_PrintPage);
    printDocument1.BeginPrint += new System.Drawing.Printing.PrintEventHandler(printDocument1_BeginPrint);

    printPreviewDialog1.Document = printDocument1;
    printPreviewDialog1.ShowDialog();
}

private void printDocument1_BeginPrint(object sender, System.Drawing.Printing.PrintEventArgs e)
{
    // Save our print action so we know if we are printing 
    // a preview or a real document.
    printAction = e.PrintAction;

    // Set some preferences, our method should print a box with any 
    // combination of these properties being true/false.
    printDocument1.OriginAtMargins = false;

    if (printAction != PrintAction.PrintToPreview)
    {
        PrintDialog printDlg = new PrintDialog();
        printDocument1.DocumentName = "Print Document Simple Text";
        printDlg.Document = printDocument1;

        // Show printer dialog
        if (printDlg.ShowDialog() == DialogResult.OK)
        {
            printDocument1.PrinterSettings = printDlg.PrinterSettings;
        }
        else
        {
            e.Cancel = true;
        }
    }
}

void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{
    Graphics g = e.Graphics;

    RectangleF marginBounds = e.MarginBounds;

    RectangleF printableArea = e.PageSettings.PrintableArea;

    //if (printAction == PrintAction.PrintToPreview)
        //g.TranslateTransform(printableArea.X, printableArea.Y);

    int availableWidth = (int)Math.Floor(printDocument1.OriginAtMargins ? marginBounds.Width : (e.PageSettings.Landscape ? printableArea.Height : printableArea.Width));
    int availableHeight = (int)Math.Floor(printDocument1.OriginAtMargins ? marginBounds.Height : (e.PageSettings.Landscape ? printableArea.Width : printableArea.Height));

    //g.DrawRectangle(Pens.Red, 0, 0, availableWidth - 1, availableHeight - 1);

    // Doesnt work either
    //g.DrawRectangle(Pens.Red, 0, 0, 100, 100);

    System.Drawing.Font myFont = new System.Drawing.Font("Courier New", 10, FontStyle.Underline, GraphicsUnit.Pixel);

    float lineHeight = myFont.GetHeight(g);
    float yLineTop = e.MarginBounds.Top;

    if (printDocumentPage >= m_report.PageCount)
    {
        e.HasMorePages = false;
        return;
    }

    otPage page = m_report.pageAt((int)printDocumentPage);

    for (int i = 0; i < page.LineCount ; i++)
    {
        otLine line = page.lineAt(i);

        g.DrawString(line.getPrintLine(true), myFont, Brushes.Black, e.MarginBounds, StringFormat.GenericTypographic);

        yLineTop += lineHeight;
    }

    printDocumentPage++;

    if (printDocumentPage < m_report.PageCount)
    {
        e.HasMorePages = true;
        return;
    }

    e.HasMorePages = false;
} 
```

PrintPreviewDialog 出现，两个事件处理程序都运行，它正确循环并绘制每一行，但对话框上没有绘制任何内容，当发送到打印机时，它打印空页。PrintPreviewDialog 都是灰色的，没有白页或任何东西，并且在所有级别上缩放什么都不做。

**编辑：** 摆脱我当前的页面/行处理，只是尝试绘制单个字符串、任何字符串或矩形，*什么*都不起作用。

这是打印预览屏幕的屏幕截图。更改缩放/页面也无济于事：![在此处输入图像描述](../Images/03706da0fd27d5a3830d17848f39e014.png)

**编辑2：**

[我从http://www.c-sharpcorner.com/uploadfile/mahesh/printpreviewcontrol-in-c-sharp/](http://www.c-sharpcorner.com/uploadfile/mahesh/printpreviewcontrol-in-c-sharp/)下载了这个非常简单的示例项目，我认为它可以按预期工作。开箱即用，这也是同样的事情。仅显示灰色屏幕（以及表单上的按钮）。printpreviewcontrol 中根本没有打印任何内容。

可能是什么问题呢？

**编辑3：**

我在另一台开发机器上测试了它，它工作正常。为什么它不能在我的电脑上运行？另一台计算机是 64 位的，而这是 32 位的，但使用相同的设置构建。会不会是我的 .NET 框架搞砸了？

**编辑4：**

很抱歉所有的编辑。我发现如果我切换我的默认打印机，它可以完美地工作。与 e.MarginBounds 有关。

# .net - 返回名称用户机器.net

> ID：15525584
> 
> 赞同：1
> 
> 时间：2013-03-20T13:55:57.643
> 
> 标签：.net, visual-studio, windows-server-2008

我有一个问题，我使用 Visual 2010 框架 3.5 我的项目内置于 Windows Server 2008 中。

问题代码：

```
System.Security.Principal.WindowsIdentity user = System.Security.Principal.WindowsIdentity.GetCurrent();
string variableUsuario = user.Name.ToUpper(); 
```

使用我的本地主机或视觉中的此代码，我想获取机器用户名，但它不起作用。在服务器中，返回此文本：

```
.IIS APPPOOL\PROYECTOSIGEV 
```

PROYECTOSIGEV 是项目的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:58:44.440

这是因为 IIS 上的应用程序池是在该标识下运行的。如果您需要获取 Windows 用户名，则需要在应用程序池上启用[Windows 身份验证。](http://technet.microsoft.com/en-us/library/cc754628%28v=WS.10%29.aspx)***注意：***通过在 IIS 上启用 Windows 身份验证，您无需更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:00:46.457

我用过；

*   系统.环境.用户名
*   HttpContext.Current.User.Identity.Name.ToLower（新 System.Globalization.CultureInfo（“en-US”，False））

# ios - 检测对子层元素的触摸

> ID：15525586
> 
> 赞同：1
> 
> 时间：2013-03-20T13:56:00.500
> 
> 标签：ios, objective-c, uiview, uicontrol, cashapelayer

我将 MyCustomView 视图作为 UIControl 类的子类。我在我的视图上画这样的东西：

```
 CAShapeLayer *line = [CAShapeLayer layer];
   ....
   [self.layer addSublayer:line]; 
```

无论如何检测“线”上的触摸并做一些工作？例如移动“线”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:06:06.850

您可以尝试将手势识别器添加到您的 UIView 中，然后调用

```
 - (CALayer *)hitTest:(CGPoint)thePoint 
```

在您的视图层上找到您击中的层，例如；

```
 CALayer* layerThatWasTapped = [line.layer hitTest:[gestureRecognizer locationInView:line]]; 
```

# javascript - 使用 javascript 重定向保持自然搜索和直接加载统计信息

> ID：15525588
> 
> 赞同：0
> 
> 时间：2013-03-20T13:56:05.303
> 
> 标签：javascript, seo, http-referer, web-analytics

在我们的网站上，我们将所有流量驱动到我们的桌面网站所在的 www 子域。我们还进行了设备检测，以将移动设备和平板电脑分别重定向到移动 (m.) 子域和平板电脑 (tablet.) 子域。

由于技术限制，我们无法从服务器端使用 301，因为我们非常依赖边缘缓存。出于这个原因，我们部署了一个简化的设备检测，它进行服务器端往返并返回一个包含基本浏览器/设备数据的 json 包，如果用户应该被重定向，则返回 true/false。

如果基于此信息应该重定向用户，则进行另一个 ajax 调用来解析重定向 URI。然后使用 javascript 使用 window.location.href=[resolved uri] 处理重定向

结果是所有直接加载和自然搜索都丢失了，被 www 取代。子域引用。有没有办法在不改变底层架构的情况下绕过这个问题？即前端方法？

谢谢！

# php - 将数组添加到现有数组而不调用新键

> ID：15525596
> 
> 赞同：7
> 
> 时间：2013-03-20T13:56:31.257
> 
> 标签：php, arrays

我正在构建一个 3 页的提交表单，我非常希望将所有 $_POST 结果存储在单个会话变量中。

因此，第 1 页首先设置数组并添加第一批发布数据：

```
$_SESSION['results'] = array();
$_SESSION['results'] = $_POST // first lot of post data 
```

这很好用并返回一个数组，如：

```
Array
(
  [name] => bob
  [address] => 1 foobar way
  [age] => 100
) 
```

因此，当我从第 2 页获得结果时，我只想将它们附加到现有数组而不调用新数组+键

```
array_push($_SESSION['results'], $_POST); //second lot of post data 
```

要得到这样的东西：

```
Array
(
  [name] => bob
  [address] => 1 foobar way
  [age] => 100
  [job] => rubbish php dev
  [salary] => 1000
) 
```

但相反，我得到：

```
Array
(
  [name] => bob
  [address] => 1 foobar way
  [age] => 100
  [0] => Array
    (
      [job] => rubbish php dev
      [salary] => 1000
    )
) 
```

更烦人的是，我确信在我调整代码之前我已经正常工作了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T14:03:45.933

您还可以使用[`+`运算符](http://www.php.net/manual/en/language.operators.array.php)：

```
$combined = $_SESSION['results'] + $_POST; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T13:58:04.007

[array_merge()](http://php.net/manual/en/function.array-merge.php)是您所追求的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:58:42.673

`array_merge()`是你的答案见[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:00:53.340

你必须使用`array_merge()`，看看这个：[array_merge()](http://php.net/manual/en/function.array-merge.php)

# java - 结束后连续运行java线程

> ID：15525597
> 
> 赞同：1
> 
> 时间：2013-03-20T13:56:31.760
> 
> 标签：java, multithreading

我有一个作为线程运行的类，我想在它完成执行后再次运行，并且可能保持同一类的两三个线程同时运行（即，如果一个线程完成执行但两个正在运行，只有一个再次运行，依此类推）。

我试过的代码是这样的：

```
ExecutorService pool = Executors.newFixedThreadPool( 3 );
while( true )
    pool.submit( new MyThread() ); 
```

关于如何实现这一点的任何反馈？

更新：MyThread 类实际上是 MyRunnable！

非常感谢，弗拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:09:33.300

尝试

```
 final ExecutorService pool = Executors.newFixedThreadPool(3);
    pool.submit(new Runnable() {
        public void run() {
            System.out.println("running1");
            pool.submit(this);
        }
    });

    pool.submit(new Runnable() {
        public void run() {
            System.out.println("running2");
            pool.submit(this);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:13:58.017

使用[`ExecutorCompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)：

```
ExecutorService executor = Executors.newFixedThreadPool(3);
CompletionService<Void> compService = new ExecutorCompletionService<Void>(executor);

for(int i = 0; i < 3; i++) compService.submit(new Task(), null);

while(true)
{
    compService.take(); // wait until one of the threads finishes its task
    compService.submit(new Task(), null);
} 
```

# javascript - 同一视图中地图和图表的剑道 UI 中的数据拉伸真/假

> ID：15525606
> 
> 赞同：4
> 
> 时间：2013-03-20T13:56:57.230
> 
> 标签：javascript, html, kendo-ui

我们正在为 IOS 应用程序使用剑道 UI。

我在`data-stretch`.

我有一个`data-role="view" with data-stretch="true"`。

在那个视图中，我有 2 个`DIV`标签，

`id="googleMap"`显示谷歌地图的第一个分区

2nd Div`id="dashboard"`显示 2 个图表和 2 个表格格式数据。

如果我使用`data-stretch="true"`，则仪表板`DIV`无法显示默认滚动，因为数据的高度大于 Apple 平板电脑。

如果我使用`data-stretch="false"`然后在 googleMap DIV 中创建问题并且它无法显示谷歌地图。

我的代码是：

```
<div id="divmap" data-role="view" data-title="Expenditures" data-layout="Operationlayout" data-before-show="cleanview" data-show="OperationMenuList" data-stretch="false" data-init="ChartLoading">
   <div id="googleMap">
   </div>           
   <div id="dashboard">
       <div id="Fleet">
          <table width="100%" cellpadding="0" cellspacing="0">....</table>
      </div>
   </div>
</div> 
```

我该如何解决我的问题`data-stretch`？

我已经使用如下方式设置数据拉伸表单 java 脚本的值，

```
var view = $("#divmap").data("kendoMobileView");
view.stretch = false; 
```

但它不起作用。

如何`data-stretch true/false`从 javascript 动态设置？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:23:47.237

移动视图拉伸配置选项无法在运行时设置（在视图初始化之后），因为触摸滚动器小部件根据其值进行初始化。您可以考虑在仪表板 div 上实例化一个[触摸滚动](http://demos.kendoui.com/mobile/scroller/index.html#/)条，同时保持数据拉伸视图选项设置为 true。像这样的东西：

```
<div id="dashboard" data-role="scroller" height="100%">
   <div id="Fleet">
      <table width="100%" cellpadding="0" cellspacing="0">....</table>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:16:38.980

您可以使用 JQuery 在标签上设置属性...

查询：

```
$("#divmap").attr("data-stretch","true"); 
```

请记住，“数据拉伸”是 DIV 的单个属性，而不是数据源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T10:27:03.313

我刚刚在我的“视图”中使用了以下属性，其中包含一个用于地图的 div 和另一个用于其他内容的 div。

```
data-use-native-scrolling="true" 
```

它解决了我的问题

# java - Java中的OpenCV，为什么我不能使用Mat.CvType.CV_8UC1？

> ID：15525608
> 
> 赞同：5
> 
> 时间：2013-03-20T13:56:58.673
> 
> 标签：java, opencv, dll, syntax-error

如果我尝试编写该代码 Mat.CvType.CV_8UC1 我得到错误 CvType cannot be resolve or is not a field。我错过了什么？我想我已经在项目属性中添加了正确的库和 DLL，因为其他一切似乎都在工作。我需要找到那些 CV_8UC1 CV_8UC2 等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-21T07:46:00.300

你可以尝试使用`CvType.CV_8UC1`insted of`Mat.CvType.CV_8UC1`

# c++ - 获取 main() 函数的地址是否违法？

> ID：15525613
> 
> 赞同：7
> 
> 时间：2013-03-20T13:57:17.683
> 
> 标签：c++, function, main

根据[这个答案](https://stackoverflow.com/a/2128727/57428) *，使用函数 main() 是非法*的（第 3.6.1.3 节），如果函数的名称出现在可能评估的表达式中（第 3.2 节） ，则*使用该函数。*

假设我有这个代码：

```
printf( "%p", &main ); 
```

其中函数的名称`main()`出现在表达式中`&main`。

上面的代码会是非法的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:02:40.240

是的。正如您所引用的，标准说您不能使用 `main`.

还要注意函数的地址*不*匹配`"%p"`。对应的参数*必须*有 type `void*`; 任何其他类型（可能除外`char*`）都是非法的，并导致未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:02:23.377

由于`main`未“使用”（您没有对其进行评估），因此根据您提供的链接它应该是合法的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-20T14:16:12.860

It's not usual to use pointer to `main()` or the address of `main()` but..

Anyway, it is allowed since, as every function (and any symbol, e.g. variable) it has its own address. And the address of main() may be needed - especially when you write code for embedded systems and you play with dynamic loading of the code or run-time inspection. Or there are a bootloader and actual running firmware.

Often `main()` is an entry point to the dynamically loaded code (e.g from FLASH to RAM) and thus it is referenced (called directly or assigned to the relevant pointer) in bootloader.

Refer to MicroC-OS/II or VxWorks - both use `main()` in this way

# c++ - Xcode的奇怪登录

> ID：15525621
> 
> 赞同：0
> 
> 时间：2013-03-20T13:57:29.293
> 
> 标签：c++, ios, objective-c, xcode, logging

它是几天前开始的，我不记得之后是什么。当我尝试在设备上测试我的项目时，我的日志以此开头（当我在 iOS 模拟器上运行项目时，它不会出现）：

```
13:44:01.760 INFO  | cap lib: logger inited [iPhoneSenderHookLib.mm:512]
13:44:01.761 INFO  | my uid: 501 [iPhoneSenderHookLib.mm:513]
13:44:01.787 INFO  | chown ret:-1 [iPhoneSenderHookLib.mm:515]
13:44:01.805 INFO  | chmod ret:-1 [iPhoneSenderHookLib.mm:517]
13:44:01.806 NOTICE| identifier=1e546890 [iPhoneSenderHookLib.mm:539]
13:44:01.806 NOTICE| my bundle id is 111 [iPhoneSenderHookLib.mm:541] 
```

现在，当我尝试运行它时，每个新项目都会向我显示此日志。看起来它会在 2 到 4 秒之间冻结我的应用程序，但我不确定，因为我现在制作了一些高负载的应用程序原型。看起来像一些链接到我的项目或脚本的 C++ 库，但我没有 C++ 文件，它是纯 obj-c 项目。我从头开始的项目，没有链接任何 3rd 方库，我没有在 Xcode 中列出任何脚本。会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:45:08.547

答案很简单。有人在此设备上越狱。更新iOS（并适当删除越狱）后奇怪的日志消失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:10:22.363

看起来它来自第 512 行的 iPhoneSenderHookLib.mm。您是否将此文件添加到您的项目中？

# xml - xslt 匹配除特定节点之外的所有节点

> ID：15525629
> 
> 赞同：2
> 
> 时间：2013-03-20T13:57:42.907
> 
> 标签：xml, xslt

我想匹配我的xml中的所有节点，除了一个即docbody。就像是

```
<xsl:template match="@*|node()[not(docBody)]" name="identity">
<xsl:copy>
  <xsl:apply-templates select="@*|node()">
</xsl:copy>
</xsl:template> 
```

我如何实现这一点，我尝试了上面的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:13:24.423

Match all but this one (adding `self::`) and overwrite the default template for `docBody` (without it the contents of `docBody` would still be printed):

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

<xsl:template match="@*|node()[not(self::docBody)]" name="identity">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<!-- overwrite the default template -->
<xsl:template match="docBody">
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T14:11:42.160

您的匹配条件说“任何没有`docBody`元素*子*节点的节点”，这与不是`docBody`元素*本身*不同。你要这个：

```
<xsl:template match="@*|node()[not(self::docBody)]" name="identity"> 
```

尽管您应该只使用两个模板：

```
<xsl:template match="docBody"/>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:09:49.783

是的，您只需要这样做：

```
<xsl:template match="@*|node()[not(self::docBody)]" name="identity">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()">
  </xsl:copy>
</xsl:template> 
```

# c++ - C++ 2D 多边形碰撞检测

> ID：15525632
> 
> 赞同：1
> 
> 时间：2013-03-20T13:57:49.173
> 
> 标签：c++, collision-detection

我正在尝试使用图形包构建的两个矩形来实现 2D 碰撞检测。不幸的是，我开始认为我不理解编写处理此问题的函数所需的逻辑。

下面是我绘制一个小精灵和几个其他矩形的代码。我的精灵随着键盘输入移动。

我用过几本书，也尝试过 Nehe 等网站，虽然它们是非常好的教程，但它们似乎只直接处理 3D 碰撞。

有人可以向我展示一种使用上面的矩形实现碰撞检测的有效方法吗？我知道您需要比较每个对象的坐标。我只是不确定如何跟踪物体的位置，检查碰撞并在碰撞时停止移动。

我正在自学，现在似乎已经停止了好几天。我完全没有想法，搜索的谷歌页面比我想记住的要多。我很抱歉我的天真。

我将不胜感激任何建设性的意见和示例代码。谢谢你。

```
 void drawSprite (RECT rect){
    glBegin(GL_QUADS);
        glColor3f(0.2f, 0.2f, 0.2f);
            glVertex3f(rect.x, rect.y, 0.0);
        glColor3f(1.0f, 1.0f, 1.0f);
            glVertex3f(rect.x, rect.y+rect.h, 0.0);
        glColor3f(0.2f, 0.2f, 0.2f);
            glVertex3f(rect.x+rect.w, rect.y+rect.h, 0.0);
        glColor3f(1.0f, 1.0f, 1.0f);
            glVertex3f(rect.x+rect.w, rect.y, 0.0);
    glEnd();
}

void drawPlatform (RECT rect){
    glBegin(GL_QUADS);
        glColor3f(0.2f,0.2f,0.0f);
            glVertex3f(rect.x, rect.y, 0.0);
        glColor3f(1.0f,1.0f,0.0f);
            glVertex3f(rect.x, rect.y+rect.h, 0.0);
        glColor3f(0.2f, 0.2f, 0.0f);
            glVertex3f(rect.x+rect.w, rect.y+rect.h, 0.0);
        glColor3f(1.0f, 1.0f, 0.0f);
            glVertex3f(rect.x+rect.w, rect.y, 0.0);
    glEnd();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T11:16:11.083

您可以在绘制之前将此碰撞功能与 AABB 结构（AABB 代表对齐轴边界框）一起使用。

AABB.c

```
AABB* box_new(float x, float y, float w, float h, int solid)
{
    AABB* box = 0;
    box = (AABB*)malloc(sizeof(AABB*));

    box->x = (x) ? x : 0.0f;
    box->y = (y) ? y : 0.0f;
    box->width = (w) ? w : 1.0f;
    box->height = (h) ? h : 1.0f;

    return(box);
}

void box_free(AABB *box)
{
    if(box) { free(box); }
}

int collide(AABB *box, AABB *target)
{
    if
    (
        box->x > target->x + target->width &&
        box->x + box->width < target->x &&
        box->y > target->y + target->height &&
        box->y + box->height < target->y
    )
    {
        return(0);
    }
    return(1);
} 
```

AABB.h

```
#include <stdio.h>
#include <stdlib.h>

typedef struct AABB AABB;
struct AABB
{
    float x;
    float y;
    float width;
    float height;
    int solid;
};

AABB* box_new(float x, float y, float w, float h, int solid);
void box_free(AABB *box);
int collide(AABB *box, AABB *target); 
```

我希望它会有所帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:03:30.367

通过检测*碰撞*，您不会走得那么远，因为您将遇到浮点精度问题。您可以做的是检测矩形之间的*重叠*，如果发生这种重叠，则碰撞已经发生，因此您可以将矩形相互碰撞。

此外，您需要将引擎拆分为两种状态：

1.  矩形被输入移动
2.  检测到重叠，如果发现，矩形将相互移开
3.  显示场景

至于检测两个矩形是否重叠，请参见这个问题：

[确定两个矩形是否相互重叠？](https://stackoverflow.com/questions/306316/determine-if-two-rectangles-overlap-each-other)

# mysql - MySQL NOT IN 不起作用

> ID：15525636
> 
> 赞同：3
> 
> 时间：2013-03-20T13:57:59.797
> 
> 标签：mysql, sql

我有这个 MySQL 查询：

```
select e.* 
from emails as e 
where e.error <> 1 
AND e.login NOT IN ( select email_login from accounts ) 
```

但它返回 0 行。

```
select e.* 
from emails as e 
where e.error <> 1 
AND e.id NOT IN (select email_id from accounts ) 
```

工作正常。

email_login 是`varchar(255)`id 是`int(11)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:46:25.913

根据要求，我的评论作为答案。

我的大脑说“区分大小写”，我的手指`IS NOT NULL`自动添加到子查询中。我的聪明手指绕过了比较中的 NOT NULL 问题:-)。

这是您的工作查询：

```
SELECT e.* from emails AS e 
WHERE e.error <> 1 
AND UPPER(e.login) NOT IN 
(SELECTUPPER(email_login) FROM accounts WHERE email_login IS NOT NULL) 
```

这次我的手指也将 UPPER() 添加到该字符串比较中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:05:35.177

```
 SELECT e.* 
     FROM emails e 
     LEFT
     JOIN accounts a
       ON a.email_login = e.login
    WHERE e.error <> 1
      AND a.email_login IS NULL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:07:06.637

尝试使用`NOT EXISTS`而不是 NOT IN

像那样：

```
select e.* 
from emails as e 
where e.error <> 1 
AND e.login NOT EXISTS (select email_login from accounts ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:11:20.617

我猜 e.login 或 email_login 有一个`CHAR`类型而不是`VARCHAR`. 因此，该字段用空格填充。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:15:28.407

这可能是因为 e.login 为 NULL，当比较 NULL 值（如您的情况为 NOT IN）时，它总是返回 false（请参阅[文档：运算符 NOT LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_not-like)也适用于 NOT IN）。

您可以使用[COALESCE()](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)来检查这一点：

> 返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。

所以在你的情况下：

```
 SELECT e.* 
 FROM emails AS e 
 WHERE e.error <> 1 
 AND COALESCE(e.login,'') NOT IN (select email_login from accounts) 
```

如果这不起作用，请尝试根据应该如何精确比较 LIKE 运算符或修剪值以避免由于前导或尾随空格而导致的差异

**使用 %LIKE%**：

```
 SELECT e.* 
 FROM emails AS e 
 WHERE e.error <> 1 
 AND NOT EXISTS (SELECT email_login 
                 FROM accounts 
                 WHERE email_login LIKE CONCAT('%', e.login ,'%')) 
```

*请注意，% 匹配任意数量的字符，包括零个字符*

**要匹配确切的登录名**：

```
 SELECT e.* 
 FROM emails AS e 
 WHERE e.error <> 1 
 AND NOT EXISTS (SELECT email_login 
                 FROM accounts 
                 WHERE UPPER(TRIM(email_login)) = UPPER(TRIM(e.login))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:48:51.440

```
SELECT * 
FROM emails e 
WHERE e.error <> 1
AND NOT EXISTS (
 SELECT * FROM accounts a
 WHERE a.email_login = e.login
 )
; 
```

# c# - 将管道参数发送到 C# 应用程序

> ID：15525641
> 
> 赞同：4
> 
> 时间：2013-03-20T13:58:06.947
> 
> 标签：c#, windows, pipe, windows-server-2012

我需要构建一个接受管道作为输入的简单控制台应用程序。我们正在运行 Windows Server 2012。数据来自另一个将“管道”输入到该应用程序的应用程序。我从 Linux 的角度了解管道，但从 Windows 的角度来看不太了解它们。

我最好的猜测是我需要像这样向我的应用程序发送输入：C:\app.exe < test.txt

当使用 '<' 字符时，我目前的理解是它将 test.txt 转换为流并传入一个指针。

我的问题是，谁能给我一个如何接收流指针的例子，或者在我的应用程序中与窗口中的管道等效的东西，以便我可以读取输入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:08:02.243

当您使用应用程序时，标准输入`<`和`>`输出流（屏幕/键盘界面）被文件流替换。

您可以使用常规`Console.Read`和`Console.ReadLine`命令从指令指定的流中读取`<`，或者使用`Console.In`which is a `TextReader`.

类似地`Console.Write`，and`Console.WriteLine`可用于写入`>`指令指定的输出流，或者`Console.Out`是`TextWriter`.

`|`例如，如果使用管道指令，`myapp.exe | sort`则第一个程序的输出流进入下一个程序的输入流。

# sql - 按季度返回日期范围？

> ID：15525644
> 
> 赞同：0
> 
> 时间：2013-03-20T13:58:12.047
> 
> 标签：sql

我正在寻找一个可以返回一系列四分之一长的日期范围的查询。

例如，如果输入是 2013 年 2 月 1 日和 2014 年 3 月 31 日，那么输出将如下所示：

```
start     end
2/1/2013  4/30/2013
5/1/2013  7/31/2013
8/1/2013  10/31/2013
11/1/2013 1/31/2014
2/1/2014  3/31/2014 
```

请注意，最后一个季度只有 2 个月。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:34:43.237

只是想补充一点，这是我在谷歌搜索后所做的。我正在考虑一些更有效的方法，但我认为这足以满足我的目的。第一部分是填充日期表，第二部分是计算季度范围。

```
DECLARE @StartDate SMALLDATETIME
DECLARE @EndDate SMALLDATETIME

SET @StartDate = '1/1/2011'
SET @EndDate = '12/31/2011'

-- creates a date table, not needed if there is one already
DECLARE @date TABLE ( [date] SMALLDATETIME )

DECLARE @offset INT
SET @offset = 0

WHILE ( @offset < DATEDIFF(dd, @StartDate, DATEADD(dd, 1, @EndDate)) ) 
    BEGIN
        INSERT  INTO @date ( [date] )
    VALUES  ( DATEADD(dd, @offset, @StartDate) )
    SELECT  @offset = @offset + 1
END ;

WITH    dateCTE
      AS ( SELECT   ROW_NUMBER() OVER ( ORDER BY [date] ASC ) AS qID ,
                    [date] AS qStart ,
                    CASE WHEN DATEADD(dd, -1, DATEADD(q, 1, [date])) > @EndDate
                         THEN @EndDate
                         ELSE DATEADD(dd, -1, DATEADD(q, 1, [date]))
                    END AS qEnd
           FROM     @date
           WHERE    [date] = @StartDate
                    OR ( DATEDIFF(mm, @StartDate, [date]) % 3 = 0
                         AND DATEPART(dd, [date]) = DATEPART(dd,
                                                          @StartDate)
                       )
         ) 
```

# matlab - Matlab - 矩阵除以零 - 零和 NaN

> ID：15525646
> 
> 赞同：0
> 
> 时间：2013-03-20T13:58:13.220
> 
> 标签：matlab, matrix, bsxfun

我正在尝试将精度矩阵 sigmaT 转换为协方差矩阵。我尝试了两种方法：

```
covMat = zeros(size(sigmaT));
for i=1:t
    covMat(:, :, i) = eye(D)/sigmaT(:,:,i);
end 
```

和

```
covMat = bsxfun(@rdivide, eye(D), sigmaT); 
```

sigmaT 中的某些元素为零，因此会发生除以零。第一种基于循环的解决方案将发生被 0 除的元素保留为 0，第二种方法将元素设置为 NaN。

我的问题是：为什么它们的行为不同，我怎样才能将第二种单行方法更改为基于循环的方法？我相信后一种解决方案在大型矩阵上应该明显更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:11:14.287

您的基于循环的方法是执行矩阵除法，即每次迭代的结果是矩阵的逆`sigmaT(:,:,i)`。`./`您可以使用运算符（而不是）调整循环以执行每个元素的数学运算`/`。

您`bsxfun`基于的方法是执行每个元素的划分，即每个单独的元素都被倒置。无法对`bsxfun`3D 数组中包含的每个 2D 矩阵执行矩阵运算。

这些答案非常不同。您应该使用适合您的问题的任何方法。两者之间的性能差异可能相对较小。

# android - Android listview 项目颜色变化

> ID：15525650
> 
> 赞同：0
> 
> 时间：2013-03-20T13:58:31.450
> 
> 标签：android

我有以下使用充气机的列表适配器，我尝试在此处添加颜色更改，但它会更改每个项目，而不仅仅是单击的项目。

```
private class ListAdapter extends ArrayAdapter<jsonData>{

    private List<jsonData> jList;

    public ListAdapter(Context context, int resource,List<jsonData> jList) {
        super(context, resource, jList);
        this.jList = jList;
    }
         public View getView(int position, View convertView, ViewGroup parent) {
                View v = convertView;

                if (v == null) {
                    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.listviewact_layout, null);
                            v.setBackgroundResource(R.layout.list_selector);
                }

                jsonData jd = jList.get(position);

                if (jd != null) {             
                    TextView name = (TextView) v.findViewById(R.id.memberName);
                    TextView dateJoined = (TextView) v.findViewById(R.id.dateJoined);
                    if (name != null) {
                        name.setText("Member Name: " + jd.name);
                    }
                    if (dateJoined != null) {
                        dateJoined.setText("Joined: " + getNewDate(jd.joined));
                    }
                }

                return v;
            } 
```

我也能够获得项目位置，除了颜色之外，大部分都可以正常工作。我也尝试为选择器添加资源文件，但我得到了相同的结果。

更新：这似乎有效。当我滚动项目颜色时，我有一个小故障。

```
 public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {          

            if(selectedItemPosition != position){
                //Resets old item to original color
                parent.getChildAt(selectedItemPosition).setBackgroundColor(Color.BLACK);
                view.setBackgroundColor(Color.BLUE);                    
                selectedItemPosition = position;
            }               
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:08:26.560

`android:listSelector`不用于`android:background`将选择器 xml 文件添加到您的列表视图

```
 <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:listSelector="@drawable/list_selector">
        </ListView> 
```

试试这个选择器 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_enabled="true" 
 android:state_pressed="true" android:drawable="@color/android:blue" />
<item android:state_enabled="true"
 android:state_focused="true" android:drawable="@color/android:transparent" />
<item
 android:drawable="@color/android:black" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:01:40.887

```
view.setbackground();

Changes the background of entire list .since your view points to that list not a field in that list.
try this

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@color/black" /> <!-- focused -->
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@color/black" /> <!-- focused and pressed-->
    <item android:state_pressed="true" android:drawable="@color/green" /> <!-- pressed -->
    <item android:drawable="@color/black" /> <!-- default -->
</selector> 
```

# c# - 使用反射模仿 C# 数组初始值设定项行为

> ID：15525651
> 
> 赞同：4
> 
> 时间：2013-03-20T13:58:32.323
> 
> 标签：c#, arrays, cil, reflection.emit

使用 ILDasm 对一些 C# 代码进行逆向工程，我发现编译器使用该`System.Runtime.CompilerServices.RuntimeHelper.InitializeArray`方法来初始化包含几个原始类型常量值的数组。

看起来它为每个数组大小（以字节为单位）创建了一个特殊的结构，并用`[StructLayout]`属性标记它。这很简单。但是有一个包含实际数据的类型的字段。我如何创建一个这样的字段`Reflection.Emit`并用任意字节填充它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:41:03.020

我认为您为此使用[ModuleBuilder.DefineInitializedData](http://msdn.microsoft.com/en-us/library/system.reflection.emit.modulebuilder.defineinitializeddata.aspx)。

# highcharts - 来自ajax的highchart系列推送

> ID：15525658
> 
> 赞同：0
> 
> 时间：2013-03-20T13:58:55.787
> 
> 标签：highcharts

我尝试绘制日期和值，这是我的代码：

```
function getDaily(vsatid){
$.ajax({
     type: "POST",
     url: "daily_graph.php",
     data: "id=" + vsatid,
     success: function(obj1){
     options.series[0].data = obj1.date;
     options.series[1].data = obj1.ebno;
     }
var chart = new Highcharts.Chart(options);  
});} 
```

谁能告诉我我想如何推动这个系列，这样我就可以得到 x 作为日期时间和 y 作为值。下面是我使用 json_encode 从 mysql 数据库解析到 json 的数据。

> [{"date":"1363700566","ebno":8.04},{"date":"1363701638","ebno":8.02},{"date":"1363705226","ebno":7.93},{ "日期":"1363709087","ebno":7.65},{"日期":"1363712661","ebno":7.69},{"日期":"1363716221","ebno":7.44},{"日期":"1363719708","ebno":7.19},{"date":"1363723254","ebno":6.97},{"date":"1363726853","ebno":6.99},{"date": "1363730481","ebno":7.04},{"date":"1363734045","ebno":6.92},{"date":"1363737697","ebno":7.07},{"date":"1363741201 ","ebno":7.27},{"日期":"1363744878","ebno":7.35},{"date":"1363748625","ebno":7.48},{"date":"1363752211","ebno":0},{"date":"1363755741" ,"ebno":7.69},{"date":"1363759347","ebno":7.76},{"date":"1363762894","ebno":7.83},{"date":"1363766640"," ebno":7.82},{"date":"1363770121","ebno":7.82},{"date":"1363773789","ebno":7.69},{"date":"1363777209","ebno" :6.78},{"日期":"1363780874","ebno":8.15}]"1363755741","ebno":7.69},{"date":"1363759347","ebno":7.76},{"date":"1363762894","ebno":7.83},{"date":"1363766640 ","ebno":7.82},{"date":"1363770121","ebno":7.82},{"date":"1363773789","ebno":7.69},{"date":"1363777209", "ebno":6.78},{"日期":"1363780874","ebno":8.15}]"1363755741","ebno":7.69},{"date":"1363759347","ebno":7.76},{"date":"1363762894","ebno":7.83},{"date":"1363766640 ","ebno":7.82},{"date":"1363770121","ebno":7.82},{"date":"1363773789","ebno":7.69},{"date":"1363777209", "ebno":6.78},{"日期":"1363780874","ebno":8.15}]{“日期”：“1363777209”，“ebno”：6.78}，{“日期”：“1363780874”，“ebno”：8.15}]{“日期”：“1363777209”，“ebno”：6.78}，{“日期”：“1363780874”，“ebno”：8.15}]

所有答案都将不胜感激..关于马鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:28:53.137

每个数据点应定义为：

```
Var mydata = [[1363700566000,8.04], [1363701638,8.02] ] 
```

或者，您可以使用此表单指定更多点选项：

```
Var my data = [{x:1363700566000,y:8.04}, {x:1363701638,y:8.02} ] 
```

请注意，日期以毫秒为单位，因此您需要将您的日期乘以 1000。

```
Options.series[0].data = mydata 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:17:05.927

```
try
chart.series[0].addPoint(obj1.date);
chart.series[1].addpoint(obj1.ebno)

//     options.series[0].data = obj1.date;
//     options.series[1].data = obj1.ebno;

by using two series u will get 2 diff x values for two diff series
if u want to get x,y val for same series 

parse the obj1 to json . or 
add

               type:"GET",
                   url: "delete",
            //       dataType:"json",
                       data:chart.series[0].data,

try
 $.each(obj1,function(index,object){
 chart.series[0].addPoint(object);
 });                
  // will iterate all the objects and add it to series

where obj1 should contain
[{"x":"1363700566","y":8.04} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:52:22.423

您的日期应该是时间戳，因此您应该使用 parseFloat() 函数将字符串转换为数字，然后乘以 1000 以实现适当的 JavaScript 时间戳格式。

# xcode - 不支持推送导航控制器错误消息

> ID：15525661
> 
> 赞同：4
> 
> 时间：2013-03-20T13:59:14.303
> 
> 标签：xcode, uinavigationcontroller, uitableview, segue

我正在开发一个应用程序，用户可以在其中添加产品，然后将这些产品显示在 TableView 中。我创建了一个带有静态单元格和两个部分的 TableViewController，我想将第二部分中的单元格与另一个 TableViewController 挂钩。

我从对象库中拖动 TableViewController，将其嵌入到导航控制器中，并从单元格到 NavigationController 进行了推送，但是当我尝试运行应用程序时，我在输出窗口中收到以下错误消息：

**2013-03-20 09:55:32.981 斯塔姆[725:c07]****由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“不支持推送导航控制器”* ****第一掷调用堆栈：（0x1d04012 0x11e8e7e 0x22a5b0 0x22a098 0x585da3 0x577ad9 0x577b54 0x1df899 0x1dfb3d 0xbe6e83 0x1cc3376 0x1cc2e06 0x1caaa82 0x1ca9f44 0x1ca9e1b 0x1f3c7e3 0x1f3c668 0x13065c 0x2a6d 0x2995）的libc ++ abi.dylib：终止叫做抛出一个异常*****

 ***这是我的故事板的[屏幕截图](http://i.imgur.com/gSf13MM.png)。

非常感谢你！

花岗岩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:22:14.053

你`UINavigationController`来错地方了。它应该在`UITableViewController`.

您可以`UITableViewController`从故事板中选择，然后从菜单中选择：编辑器 > 嵌入 > 导航控制器。

您可以从参考指南中获取有关导航堆栈的更多信息。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)***

# html - CSS 媒体查询未重置

> ID：15525664
> 
> 赞同：2
> 
> 时间：2013-03-20T13:59:22.877
> 
> 标签：html, css, media-queries

我在我的网站上使用 3 个媒体查询：

```
@media only screen and (max-width: 959px) 
@media only screen and (max-width: 767px)       
@media only screen and (max-width: 479px) 
```

当您拖动浏览器窗口时，一切都会重新调整大小，但是当您再次将其拖回时，导航不会回到应有的位置 - 其他一切都会恢复正常。

网站在[这里](http://creatrixtest.com/manfood/)。

我是否缺少使导航返回其起始位置的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T06:39:22.743

尝试制作一个最小和最大选择器，例如

```
@media only screen and (min-height : 0px) and (max-height: 600px) {
/* bla bla bla */ 
} 
```

# c# - Vbscript 问题：在包装类的帮助下执行 vbscript

> ID：15525668
> 
> 赞同：0
> 
> 时间：2013-03-20T13:59:33.760
> 
> 标签：c#, vbscript, wrapper, pdfbox

我创建了一个包装类来使用 PDFBox 访问 PDF FORMS，通过使用包装我试图用 VBScript 执行它。

这是我启用 COM 的包装类（类库）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using org.apache.pdfbox.pdmodel;
using org.apache.pdfbox.util;
using org.apache.pdfbox.pdmodel.interactive.form;

namespace PDF.API
{
    public class PDFDocument
    {
        private PDDocument PD;

        public void load(string PDFPath)
        {
            PD = PDDocument.load(PDFPath);
        }

        public PDDocumentCatalog getDocumentCatalog()
        {
            return PD.getDocumentCatalog();
        }

        public void save(string PDF_Path)
        {
            PD.save(PDF_Path);
        }

        public void close()
        {
            PD.close();
        }
    } 
```

这是我的 vbscript

```
Set TestPDF = CreateObject("PDF.API.PDFDocument")
Set test  = PDFDocument.load("D:\\PDF_FORMS\\sample_form.pdf")
Set PDDocumentCatalog = test.getDocumentCatalog()
Set PDAcroForm = PDDocumentCatalog.getAcroForm()

Set PDFField = PDAcroForm.getField("Forenames")
PDField.setValue("VBSCRIPT")
test.save("D:\\PDF_FORMS\\a.pdf")
test.close() 
```

现在它抛出了我需要的对象`PDDocument`

无法解决此问题，请任何人帮助我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T21:26:41.007

正如 Ansgar Wiechers 和 Aphoria 已经提到的，你`Load`是你的`PDFDocument`类的一个方法，为了简化你自己，你可以在 .vbs 中使用与变量名相同的名称，即：

```
Set PDFDocument = CreateObject("PDF.API.PDFDocument") 
```

我看到的下一个问题是你的`Load`方法是一个`void`（不是返回值），所以语法应该是这样的：

```
PDFDocument.load "D:\path\to\file_a.pdf"
Set PDDocumentCatalog = PDFDocument.getDocumentCatalog()
' ... '
PDFDocument.save "D:\path\to\file_b.pdf"
PDFDocument.close 
```

而且我最近没有接触过 C#，但据我所知，你需要一个构造函数。

```
namespace PDF.API
{
    public class PDFDocument
    {
        private PDDocument PD;

        public PDFDocument()
        { //class constructor
        }

        public void load(string PDFPath)
        {
            PD = PDDocument.load(PDFPath);
        }
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:11:38.583

我认为您需要更改`PDFDocument.load...`为`TestPDF.load...`.

```
Set TestPDF = CreateObject("PDF.API.PDFDocument")
Set test  = TestPDF.load("D:\\PDF_FORMS\\sample_form.pdf") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:14:26.887

```
Set TestPDF = CreateObject("PDF.API.PDFDocument")
Set test  = PDDocument.load("D:\\PDF_FORMS\\sample_form.pdf") 
```

您在`PDDocument`没有先实例化的情况下使用它。您可能打算这样做：

```
Set test  = TestPDF.load("D:\\PDF_FORMS\\sample_form.pdf") 
```

作为旁注：我建议您在课堂上转义反斜杠。在 VBScript 中，通常不需要转义路径中的反斜杠（尽管有 WMI），因此如果您以不同的方式处理它可能会使您的用户感到困惑。

# php - 动态创建的行在 for 循环后不显示

> ID：15525669
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:59:35.423
> 
> 标签：php, html, for-loop, html-table

我有一个表单，可以让用户订阅时事通讯，如下所示：

![在此处输入图像描述](../Images/c031ed36fbb1186c27df9cd69e9ceeb8.png)

它的代码是这样的：

```
<?php 
$i = 0;  
while($objResult1 = mysql_fetch_array($objQuery1))  
 {  
$i++;  
?>  
<tr>  
   <td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid[]" value="<?=$objResult1["ID"];?>"> </div></td>
   <td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub[]" value="10"> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub[]" value="90"> </div></td>
</tr>  
<?php  
 }  
?> 
```

$objQuery1：

```
$strSQL1        = "SELECT ID, Titel FROM Mail";
$objQuery1  = mysql_query($strSQL1); 
```

这种形式就像这样工作得很好，问题是我想将输入更改为收音机。为此，我将其编辑为以下内容：

```
<?php 
$i = 0;  
while($objResult1 = mysql_fetch_array($objQuery1))  
{  
$i++;  
?>  
<?php for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++) : ?>
<tr>  
   <td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid[]" value="<?=$objResult1["ID"];?>"> </div></td>
   <td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
   <td><div align="center"><input type="radio" name="sub[<?php echo $i; ?>]" value="10"> </div></td>  
   <td><div align="center"><input type="radio" name="sub[<?php echo $i; ?>]" value="90">  </div></td>
</tr>
<?php endfor; ?>
    <?php  
}  
?> 
```

这样做的问题是，现在不再显示 ID 为 1 的第一行。有谁知道出了什么问题？^^ 这可能是一个非常简单的解决方案，但我似乎无法找到它。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:01:57.307

当您调用 时`$objResult1 = mysql_fetch_array($objQuery1)`，您会从结果集中获取一行。因此，当您执行此操作时，紧随其后：

```
<?php for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++): ?> 
```

您正在获取结果集的第二行，这就是您在`$objResult1`. 在您的代码中，您永远不会使用第一个结果集。

如果您必须保留此设计，我的建议是使用`do{} while();`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:01:31.400

改变这个：

```
<?php for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++) : ?> 
```

到

```
<?php for ($j = 0; $objResult1 = mysql_fetch_array($objQuery1); $j++) : ?> 
```

以及循环内的内容

您在外部和内部循环中使用 $i 混淆了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:02:33.837

你不需要for循环。只需将复选框更改为 while 循环中的单选按钮即可。

编辑：

```
<?php 
$i = 1;  

while($objResult1 = mysql_fetch_array($objQuery1)) {  
    $i++;  
?>  
<tr>  
    <td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid[]" value="<?=$objResult1["ID"];?>"> </div></td>
    <td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
    <td><div align="center"><input type="radio" name="sub[<?php echo $i; ?>]" value="10"> </div></td>  
    <td><div align="center"><input type="radio" name="sub[<?php echo $i; ?>]" value="90"> </div></td>
</tr>  
<?php  
}  
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:04:12.587

您嵌套了两个循环：while 和 for。两者似乎都做同样的工作（即：从结果集中获取行）。所以基本上你的第一个`while`“消耗”你的第一行。你应该摆脱它。

# c - 高效计算 2 的幂

> ID：15525670
> 
> 赞同：6
> 
> 时间：2013-03-20T13:59:38.640
> 
> 标签：c, performance, math, optimization

我需要计算`k`为 2 的最小幂，即 >= 整数值，`n`（`n`始终 > 0）

目前我正在使用：

```
#define log2(x) log(x)/log(2)
#define round(x) (int)(x+0.5)

k = round(pow(2,(ceil(log2(n))))); 
```

这是一个性能关键的功能

有没有一种计算效率更高的计算方法`k`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T14:04:06.160

```
/* returns greatest power of 2 less than or equal to x, branch-free */
/* Source: Hacker's Delight, First Edition. */
int
flp2(int x)
{
    x = x | (x>>1);
    x = x | (x>>2);
    x = x | (x>>4);
    x = x | (x>>8);
    x = x | (x>>16);
    return x - (x>>1);
} 
```

研究它并看看它是如何工作的很有趣。我认为让您确定您看到的哪种解决方案最适合您的情况的唯一方法是在文本夹具中使用所有这些解决方案并对其进行分析，看看哪种解决方案最适合您的目的。

由于没有分支，相对于其他一些，这可能在性能方面相当不错，但您应该直接对其进行测试以确定。

如果您想要两个大于或等于 X 的最小幂，您可以使用稍微不同的解决方案：

```
unsigned
clp2(unsigned x)
{
    x = x -1;
    x = x | (x >> 1);
    x = x | (x >> 2);
    x = x | (x >> 4);
    x = x | (x >> 8);
    x = x | (x >> 16);
    return x + 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:04:12.187

```
lim = 123;
n = 1;
while( ( n = n << 1 ) <= lim ); 
```

将你的数字乘以 2，直到它大于 lim。

左移 1 将值乘以 2。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T14:05:35.437

是的，您可以通过简单地获取相关数字并使用位移来确定 2 的幂来计算这一点。
右移将数字中的所有位移到右侧，丢弃最右边的位（最不重要） 数字。它相当于执行一个整数除以 2。左移一个值将所有位向左移动，删除左端移位的位，并在右端添加零，有效地将值乘以 2。所以如果您计算在数字达到零之前需要右移多少次，您已经计算出以 2 为底的对数的整数部分。然后通过多次左移值 1 来使用它来创建结果。

```
 int CalculateK(int val)
  {
      int cnt = 0;
      while(val > 0)
      {
           cnt++;
           val = val >> 1;
      }
      return 1 << cnt;
  } 
```

编辑：或者，更简单一点：您不必计算计数

```
 int CalculateK(int val)
  {
      int res = 1;
      while(res <= val) res <<= 1;
      return res ;
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T14:17:54.957

```
int calculate_least_covering_power_of_two(int x)
{
  int k = 1;
  while( k < x ) k = k << 1;
  return k;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T14:02:47.903

```
k = 1 << (int)(ceil(log2(n))); 
```

您可以利用二进制数字表示 2 的幂的事实（1 是 1，10 是 2，100 是 4，等等）。将 1 左移 2 的指数会得到相同的值，但速度要快得多。

虽然如果你能以某种方式避免 ceil(log2(n)) 你会看到更大的性能提升。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T14:21:24.543

资料来源：hackersdelight.org

```
/* altered to: power of 2 which is greater than an integer value */

unsigned clp2(unsigned x) {
   x = x | (x >> 1);
   x = x | (x >> 2);
   x = x | (x >> 4);
   x = x | (x >> 8);
   x = x | (x >>16);
   return x + 1;
} 
```

请记住，您需要添加：

```
x = x | (x >> 32); 
```

对于 64 位数字。

# java - 在主函数中使用私有类中的变量

> ID：15525672
> 
> 赞同：0
> 
> 时间：2013-03-20T13:59:44.487
> 
> 标签：java, function, hashmap

我有一个带有 2 个变量的私有类，我需要在我的主函数的 for 循环中使用它们来输出。我不知道如何使用这两个变量。

这是我的主要功能中的一个 for 循环

```
for(String str : uaCount.keySet())
    {
        String [] arr = str.split("|", 2);
        String s1 = arr[0];
        String s2 = arr[1];

        //what I want to do here is something like :
            // average = keySet.sumTime / keySet.occurences;

        System.out.println(s1 + "--->" + s2 + "Average = " + average + "seconds" );
    } 
```

这是我的私人功能

```
private class NumberHolder
{
    public int occurences;
    public int sumTime;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:03:32.627

您的字段发生和 sumTime 是公共的，因此您可以直接从 NumberHolder 类外部访问它们，但是它们不是静态的，因此您需要该类的实例：

```
NumberHolder nh = new NumberHolder();
nh.occurances = 20;
nh.sumTime = 30;

//etc... 
```

由于该类是私有的，因此只能从包含类中访问它：

```
public class ContainingClass {

     private class OtherClass { //can be seen from ContainingClass but nowhere else
         public int otherField; 
     }
} 
```

# regex - 如何使用 sed 删除带空格的行？

> ID：15525676
> 
> 赞同：2
> 
> 时间：2013-03-20T13:59:53.487
> 
> 标签：regex, linux, shell

我想删除以`<Field name="LastDate"`xml 文件开头的行。

这个空间似乎在这里制造了问题`sed -i /^<Field name="LastDate"/d test.xml`。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:02:22.337

您需要引用脚本*（单引号，因为文本已经包含双引号）*：

```
$ sed -i '/^<Field name="LastDate"/d' test.xml 
```

# ios6 - IOS 中的按钮操作问题

> ID：15525677
> 
> 赞同：0
> 
> 时间：2013-03-20T13:59:57.237
> 
> 标签：ios6

这是我使用的代码。

在视图控制器 A 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setFrame:CGRectMake(50, 50, 70, 40)];
    [button setTitle:@"Next View" forState:UIControlStateNormal];
    [button addTarget:self action:@selector(nextView) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];
}

-(void) nextView
{
    SecondviewController *secondView = [[SecondviewController alloc] init];

    [self.view addSubview:secondView.view];
} 
```

在视图控制器 B 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setFrame:CGRectMake(50, 50, 70, 40)];
    [button setTitle:@"Previous View" forState:UIControlStateNormal];
    [button addTarget:self action:@selector(previousView) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];
}

-(void) previousView
{

    [self.view removeFromSuperview];
} 
```

**问题**：当我单击视图控制器 B 中的按钮时，它没有切换回视图控制器 A...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:16:00.747

您需要在堆栈中呈现或推送视图控制器，而不是将第二个子视图添加到第一个子视图。您只是简单地将其添加为子视图。

```
 SecondviewController *secondView = [[SecondviewController alloc] init];
 [self presentViewController:secondView animated:NO completion:nil]; 
```

在第二个视图控制器中，当您关闭它时，您可以简单地从堆栈中关闭/弹出它。

```
 [self dismissViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:07:33.250

您不是在切换 viewController，而是从 viewController B 获取视图并将其作为子视图添加到 viewController A。

这里：

```
 SecondviewController *secondView = [[SecondviewController alloc] init];
    [self.view addSubview:secondView.view]; 
```

您需要导航到新的视图*控制器*......例如用这个替换它

```
 SecondviewController *secondViewController = [[SecondviewController alloc] init];       
    [self presentViewController:secondViewController animated:YES completion:NIL]; 
```

（最好在命名控制器时包含“控制器”以避免与他们的视图混淆）

然后返回，您需要关闭呈现的视图控制器......

在 ViewControllerB 中替换这个：

```
 [self.view removeFromSuperview]; 
```

和

```
[[self presentingViewController] dismissViewControllerAnimated:YES completion:NIL]; 
```

这是从呈现的 viewController - viewController B - 向呈现的 viewController 发送一条消息， viewControllerA 执行实际的解除。

# python - 如果我在使用 boto 在 AWS EC2 中创建密钥对时忘记保存它，如何重新创建 .pem 文件

> ID：15525678
> 
> 赞同：0
> 
> 时间：2013-03-20T13:59:57.693
> 
> 标签：python, amazon-web-services, amazon-ec2, boto, key-pair

我这样做了：

```
try:
    ec2.get_all_key_pairs(keynames=[key_name])[0]
    print 'Key pair %s exist'%key_name
except ec2.ResponseError, e:
    if e.code == 'InvalidKeyPair.NotFound':
        print 'Creating key_pair %s'%key_name
        key = ec2.create_key_pair(key_name)
    else:
        raise 
```

正如你所看到的，我创建了一个 key_pair，但忘记保存它=（比我启动实例并意识到我的计算机上没有 .pem 文件，有什么方法可以重新创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-06T08:41:27.447

*   将此实例的根磁盘挂载到其他（测试）实例。
*   转到*文件夹/home/ec2-user（或其他）/.ssh*目录。
*   您应该在本地系统上有任何私钥文件，
*   然后从该新私钥文件中创建/导出 openssh 公钥并用*​​ authorized_keys*替换 PublicKey 文件（更改权限、所有权等）
*   卸载旧实例磁盘然后启动实例。
*   现在尝试连接新的 ppk 文件。

祝你好运。。

# html - HTML5，jquery 移动应用程序部署为独立应用程序

> ID：15525680
> 
> 赞同：0
> 
> 时间：2013-03-20T14:00:03.510
> 
> 标签：html, jquery-mobile

我已经阅读了一些关于此的论坛和文章，但无法得到明确的答案。

我需要构建一个可以在任何平台/设备上运行的移动应用程序。看起来 HTML5 + jquery 是最好的选择，但我需要应用程序执行以下操作：

1.  该应用程序必须在任何平台（Windows Phone、iOS、Android 等）上运行。
2.  它必须作为一个独立的应用程序工作。这意味着它必须在没有互联网连接的情况下工作。
3.  因为它是独立的，所以我需要设备上的本地数据库。该数据库可以嵌入到应用程序中。我在想 SQL CE。
4.  设备上的本地数据库必须能够同步到 SQL Server 数据库。
5.  该应用程序需要与设备的功能（如相机或 GPS 设备）进行交互。

是否可以构建这样的移动应用程序？

我正在使用 ASP.net MVC 4 进行开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T00:16:17.283

如果您想使用 HTML5 和 JQuery，那么 PhoneGap/Cordova 框架最适合您。

Phonegap 是一个跨平台框架，可让您使用标准 javascript API 访问 GPS 和相机等设备功能。

1.  该应用程序必须在任何平台（Windows Phone、iOS、Android 等）上运行。
    *   Phonegap 与所有这些以及包括黑莓在内的更多兼容。完整列表请参见此处：[http://phonegap.com/about/feature/](http://phonegap.com/about/feature/)
2.  它必须作为一个独立的应用程序工作。这意味着它必须在没有互联网连接的情况下工作。
    *   PhoneGap 在每个设备的 webview 中作为本机应用程序运行。它不需要访问数据连接即可运行
3.  因为它是独立的，所以我需要设备上的本地数据库。该数据库可以嵌入到应用程序中。我在想 SQL CE。
    *   PhoneGap 不能像标准原生应用程序那样运行自己的 SQL 数据库，但它可以使用 Web 标准 Web Storage 和 Web SQL。尽管这种方法确实有局限性。在此处阅读有关此内容的更多信息：[http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#Storage](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#Storage)
4.  设备上的本地数据库必须能够同步到 SQL Server 数据库。
    *   这将由您来设计和实施，但绝对可以完成
5.  该应用程序需要与设备的功能（如相机或 GPS 设备）进行交互。
    *   PhoneGap 支持的大多数设备功能。有关完整支持列表，请参见上面的链接。

如果缺少完整的 SQL 数据库支持对您来说是个问题，那么有像 Titanium Appcelerator 这样的框架可以为您构建一个完全原生的跨平台应用程序，它可能更适合您的情况。 [http://www.appcelerator.com/platform/titanium-platform/](http://www.appcelerator.com/platform/titanium-platform/)

但是如果你使用 HTML 和 JQuery 来跨平台，那么 PhoneGap 是你最好的选择。

**编辑：** PhoneGap 也有一些插件可以运行标准的 SQLite DB，但这需要在每个平台上进行额外的工作。您开发的每个平台都需要一个兼容的插件。 [http://brodyspark.blogspot.com.au/2012/12/cordovaphonegap-sqlite-plugins-offer.html](http://brodyspark.blogspot.com.au/2012/12/cordovaphonegap-sqlite-plugins-offer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T08:19:13.423

使用**PhoneGap**： http: [//phonegap.com/](http://phonegap.com/)

或**Apache Cordova**：[http ://cordova.apache.org/](http://cordova.apache.org/)

或**英特尔 XDK**：http: [//xdk-software.intel.com/](http://xdk-software.intel.com/)

# json - AngularJS：如何获取 JSON 对象的键

> ID：15525685
> 
> 赞同：49
> 
> 时间：2013-03-20T14:00:16.440
> 
> 标签：json, angularjs

我不确定这是否与 AngularJS 有任何关系，是否仅与 JSON 相关。

无论如何，让我们说我们有以下 JSON：

```
$scope.dataSets = {
    "names": ["Horace", "Slughorn", "Severus", "Snape"],
    "genders": ["Male", "Female"]
} 
```

现在，我使用 ng-repeat 指令来打印上面的内容，如下所示：

```
<div ng-repeat="data in dataSets>
    //Continue readig to know what I am expcting here
</div> 
```

我期望在`<div></div>`标签中打印“姓名”和“性别”。也就是说，我希望打印 JSON 的密钥。我不知道键是什么，因为它们可能是任何东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-20T14:13:36.807

正如文档所述：

> *(key, value) in expression – 其中 key 和 value 可以是任何用户定义的标识符，而 expression 是提供要枚举的集合的范围表达式。*

```
<div ng-repeat="(key, data) in dataSets">
  {{key}}
</div> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-14T08:34:16.423

**用于从AngularJs**中的控制器内部访问**Json**键值对。

 **```
for(var keyName in $scope.dataSets){        
     var key=keyName ;
     var value= $scope.dataSets[keyName ];

  alert(key)
  alert(JSON.stringify(value));

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-23T13:44:41.970

如果 dataSets 是一个数组而不是一个对象，您首先需要对数组项进行 ng-repeat，然后是键或值。

```
<div ng-repeat="item in dataSets">
   <div ng-repeat="(key, value) in item">
   {{key}}
   {{value}}
   </div>
</div> 
```

只是我的 2 美分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-29T12:48:48.140

对于 dataSets 中的每个 dataSet，打印键，然后遍历各个项目：

```
<div ng-repeat="(key, dataSet) in dataSets">
   <div>{{key}}</div>
   <div ng-repeat="value in dataSet">   
        {{value}}
   </div>
</div> 
```

{{dataset}} 也可以一次性显示，数组将显示为逗号分隔的值列表。**

# linux - 如何在 jhbuild 上安装库？

> ID：15525688
> 
> 赞同：1
> 
> 时间：2013-03-20T14:00:18.713
> 
> 标签：linux, gnome, jhbuild

我想开始使用jhbuild。它创建了一个独立的系统来编译不稳定的包并尝试它们。但我不清楚如何向其中添加缺少的库。

脚步：

```
$ sudo apt-get install jhbuild
$ mkdir -p /opt/gnome
$ chown `whoami`.`whoami` /opt/gnome
$ mkdir ~/checkout/gnome
$ jhbuild bootstrap

... all correct ...

$ jhbuild sysdeps --install

... problems ...

Required packages:
 Packages too old:
 (none)
No match with system package
 soundtouch (soundtouch-1.4.pc, required=0)
 libicu (icu-i18n.pc, required=4)
 libunistring
 yajl
 device-mapper
... 
```

[我在这里](https://live.gnome.org/JhbuildDependencies/Ubuntu)阅读了一些关于安装 libicu的内容，但它没有解释在哪里签出以及如何编译。

我努力了

```
$ svn checkout http://source.icu-project.org/repos/icu/icu/tags/release-4-8/
$ cd release-4-8/source
$ ./autogen.sh --prefix=/opt/gnome
$ make
$ make install 
```

没有运气。

我的系统是64位的。我说因为我已经做了[这个](https://stackoverflow.com/a/14933206/848072)黑客

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:25:08.400

如果您有 64 位系统并且 jhbuild 正在安装到 /opt/gnome，那么您需要设置 libdir 以将库安装到 /opt/gnome/lib64

添加`--libdir=/opt/gnome/lib64`到 autogen.sh 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T03:36:22.123

你可以运行 sudo-apt get install libicu。sysdeps 是系统依赖项，因此它们不需要安装在 JHBuild checkout 中，只需安装在您的系统上即可。

您可能会发现此 wiki 页面很有帮助：[https ://wiki.gnome.org/HowDoI/Jhbuild](https://wiki.gnome.org/HowDoI/Jhbuild)

# javascript - js幻灯片切换不起作用

> ID：15525690
> 
> 赞同：0
> 
> 时间：2013-03-20T14:00:24.707
> 
> 标签：javascript, slidetoggle

我是 js 新手，所以这可能是初学者的问题。

对于我的移动网站，我希望菜单在单击顶部的菜单图标时显示为 slideToggle。

这是我的 HTML：

```
<html>
<head>
<meta charset='utf-8'> 
<link rel="stylesheet" href="styles2.css">
<script src="script.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
<title>CSI - Home</title>
</head>
<body>

<a href="index.html"><img src="img/logo.png" alt="logo"/></a>
<div class="menu_icon"><img src="img/menu_icon.png" alt="menu_icon"/></div>

<div class="nav">
    <nav>
        <ul>
            <li><a href="home.html"><img src="img/home.png" alt="home"/>Home_</a></li>
            <li><a href="story.html"><img src="img/paper.png" alt="paper"/>Story_</a></li>
            <li><a href="course.html"><img src="img/glass.png" alt="glass"/>Course_</a></li>
            <li><a href="archive.html"><img src="img/archive.png" alt="archive"/>Archive_</a></li>
            <li><a href="facebook.html"><img src="img/facebook.png" alt="facebook"/>Discuss with Facebook_</a></li>
            <li><a href="twitter.html"><img src="img/twitter.png" alt="twitter"/>Discuss with Twitter_</a></li>
        </ul>
    </nav>
</div>

</body>
</html> 
```

这是我的javascript：

```
$(document).ready(function(){   
    $(".menu_icon").on("click", function(){
        $('.nav').slideToggle();
    }); 
```

单击 .menu_icon 类/图像时，我希望 .nav 与 slideToggle 一起显示。

谁能帮帮我？提前致谢！});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:14:23.997

假设这`<script src="script.js"></script>`是 jquery 库，看起来你忘了关闭`$(document).ready`

```
$(document).ready(function(){   
    $(".menu_icon").on("click", function(){
        $('.nav').slideToggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:08:27.363

您忘记添加 jQuery（正如 Jeff Shaver 注意到的那样）：添加

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

在你的脑海中加载 jQuery 库。

此外，您忘记在代码末尾关闭`$(document).ready(function(){`with （请参阅**trajce**答案）。`});`

 **请参阅此[小提琴](http://jsfiddle.net/gy5KN/)以获取工作示例。**

# javascript - 在基于 REST 的 Web 应用程序中保留继承的概念

> ID：15525695
> 
> 赞同：3
> 
> 时间：2013-03-20T14:00:41.723
> 
> 标签：javascript, rest, inheritance

我们正在构建一个新的单页前端来替换我们网络应用程序的旧静态 html 前端（带有一些 jquery）。这样做时，我们遇到了一个关于我们从 api 返回的对象类型的问题。

当从我们的 PHP 后端将数据导出为 JSON 时，我们包含一个额外的字段，我们在其中放置对象在导出之前的类型。我们可以使用它来处理我们请求的资源的不同子类。

然而，有时我们也想区分父类。考虑以下场景：

继承树：

```
Animal
    Mammal
        Human
        Dog
        ...
    Reptile
        Crocodile
        Snake
        ... 
```

获取/动物/

```
[
    {"_type": "Human", "id": 1, "food": "Ice Cream"},
    {"_type": "Human", "id": 2, "food": "Steak"},
    {"_type": "Human", "id": 3, "food": "Peanut Butter"},
    {"_type": "Dog", "id": 4, "food": "Horse Poop"}
    {"_type": "Crocodile", "id": 5, "food": "Humans"}
] 
```

当我有某个 UI 想要显示所有动物但例如突出显示所有哺乳动物时，我遇到了问题，因为我失去了哪些动物是哺乳动物的知识。

我们提出的最简单的解决方案是在从后端导出对象时包含继承链。可能是这样的：

```
{
    "_type": "Human",
    "id": 10,
    "food": "Ice Cream",
    "_parentClasses": "Animal.Mammal.Human"
} 
```

虽然我不认为这是一个特别好的解决方案，但它很容易实现和使用，而且看起来很健壮。

您认为这是一个好/好的/坏主意吗？您是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:15:08.937

在我看来，导致你心痛的正是你的输出对象变平。也许 GET/Animals 应该返回类似于以下的内容：

```
[
    {"Mammals": {   
        {"_type": "Human", "id": 1, "food": "Ice Cream"},
        {"_type": "Human", "id": 2, "food": "Steak"},
        {"_type": "Human", "id": 3, "food": "Peanut Butter"},
        {"_type": "Dog", "id": 4, "food": "Horse Poop"}
    },
    {"Reptiles": {
        {"_type": "Crocodile", "id": 5, "food": "Humans"}
    }
] 
```

如果您可以在输出时保留对象的结构，那么当您将该复杂对象发送回服务器时，您的结构应该保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:21:42.857

有很多选择。这是我没见过的一个：

使您`_type`的数组而不是字符串，第一项包含当前类和其余父类。

```
{
    "_type": ["Human","Mammal","Animal"],
    "id": 10,
    "food": "Ice Cream"
} 
```

这应该很容易在 PHP 端实现：

```
$_type = array_keys(class_parents($this));
array_unshift($_type, get_class($this)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:12:12.310

许多好的答案，这是您可能想要考虑的另一种选择。

您只需将子类以 JSON 格式发送给客户端，然后客户端会查找其基类是什么。它将一些复杂性从服务器端转移到客户端，并保持 JSON 消息干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:10:05.270

我可以看到几种可能实现这一目标的方法。您可以开发您的 REST 服务器以接受 URI，例如：

```
/animals/mammal/humans 
/animals/mammal/dog
/animals/reptile/crocodile 
```

或者，只需返回上面所述的对象类型。根据类型构建对象。

```
<?php
    $object = null;     

    switch($_type){
      case 'human':
          $object = new Human();
      break;

      case 'dog':
          $object = new Dog();
      break;

      case 'crocodile':
        $object = new Crocodile();
      break;
    }
?> 
```

关于如何解决这个问题的两分钱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:11:28.027

不确定这是否真的可以作为答案（或者甚至该问题可以作为问题！），但几年前我在时间管理器上使用了类似的过程；继承路径以类似的方式完成。我发现它比一些基本上会导致更多工作的替代方案更容易和更直观。

为了简单起见，我还打破了 OOP 的正常规则，不仅允许父母认识孩子，而且让孩子认识父母。它确实为代码增加了一点，但它是可行的，并且再次使整个过程不那么痛苦。

# c# - 实体框架 5 无法在属性上使用忽略方法

> ID：15525696
> 
> 赞同：2
> 
> 时间：2013-03-20T14:00:45.720
> 
> 标签：c#, ef-code-first, entity-framework-5

我几乎用尽了这个错误的所有解决方法：http: [//entityframework.codeplex.com/workitem/481](http://entityframework.codeplex.com/workitem/481)

请有人指出我正确的方向。我做了以下事情：

步骤 1：从所有实体和基类的属性中删除 NotMapped 属性。我的解决方案中根本没有 NotMapped 属性。

第 2 步：对所有实体上的所有属性使用 OnModelCreating 方法中的忽略方法（说真的，这花了我几天时间，因为我拥有的实体数量众多）

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
      modelBuilder.Entity<MyEntity>().Ignore(p => p.MyProperty);
} 
```

但是，当我运行时，出现以下错误：

“您不能对类型 'Namespace.MyEntity' 的属性 'MyProperty' 使用 Ignore 方法，因为此类型继承自映射此属性的类型 'MyBaseEntity'。要从模型中排除此属性，请使用 NotMappedAttribute 或 Ignore 方法基础类型。”

我还需要做什么？它绝对没有映射，因为我在模型构建器中忽略了它！！！正确的！？

帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T18:39:15.247

*（[首先从 EF5 代码重新发布 - 您不能在属性上使用 Ignore 方法](https://stackoverflow.com/questions/16726950/ef5-code-first-you-cannot-use-ignore-method-on-the-property/20889506#20889506)）*

就我而言，在现有数据库上使用 Code First *(EF6)*`ID`时，我创建了一些基类来处理常见的属性，例如.

*（注：下面是`OnModelCreating(DbModelBuilder mb)`方法里面的）*

然后我需要完全忽略*基类*：

```
mb.Ignore(new[] {
    typeof(BaseClassA),
    typeof(BaseClassB)
}); 
```

然后，有点违反直觉，我需要注册基本模型属性：

```
mb.Entity<BaseClassA>().HasKey(m => m.ID);
mb.Entity<BaseClassB>().Whatever... 
```

我的派生类之一需要忽略其中一个基本属性（称为*NormalNotIgnored*）。我用过`EntityTypeConfiguration`，但我认为你可以用普通的 Fluent 做同样的事情：

```
mb.Entity<DerivedClassB1>().Ignore(m => m.NormallyNotIgnored); 
```

这至少已经编译/迁移（`-IgnoreChanges`在迁移中，因为表已经存在）并解决了有问题的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T23:30:29.017

我知道这个问题很老，但我在任何地方都找不到我的场景的明确说明。

我只是在不会创建数据库的配置和创建数据库但不会保存实体的配置模型之间来回切换！

当然，您现在报告的例外是最令人恼火的例外之一！

您可能有*发现*问题。我需要查看更多您的模型，以帮助您确定问题出在哪里。

“Namespace.MyEntity”是什么样的？它是否参与了 ​​TPT 继承映射策略？

如果是这样，您是否与其他 TPT 实体有任何 1|1 关系（<--不太可能）或 1|* 关系？

我在这里完全是在猜测，但这需要反复试验才能弄清楚，所以我会发布它以帮助任何搜索您的错误和 [-- TPT | 每种类型的表 | 必填 | 关系 | 家长 | 儿童 | 共享 | 基地 | 抽象的 - ]

在我的场景中，当我需要 modelBuilder.Entity().HasRequired(x => x.TPT_Derived_Parent_Class).WithOptional(); 我被迫让 TPT_Derived_Child_Class 从一个单独的项目基类继承而不是 TPT_Derived_Parent_Class

我发现，在我的解决方案中，当您的 TPT 派生类具有引用从不同 TPT 父类派生的类的不可空字段时，Code First 以正确的顺序*发现*实体非常重要

当我将 TPT 用于派生（二级）基类和派生自第二级基类之间需要外键关系。

例如，这对我不起作用：

```
public abstract ProjectBaseClass : IProjectBase
{
      [Key]
      public int ProjectClassesId {get;set;}
}

[Table("TPT_BaseClass1")]
public abstract TPT_Specialized_Base_Class1 : ProjectBaseClass
{
      //...specialized stuff in here
}
[Table("TPT_BaseClass2")]    
public abstract TPT_Specialized_Base_Class2: ProjectBaseClass
{
     //...specialized stuff in here
}

[Table("ConcreteChild")]
public TPT_Child_Concrete_Class : TPT_Specialized_Base_Class1
{
      public int TPT_Parent_Concrete_Class_KeyId {get;set;};

      [ForeignKey("TPT_Parent_Concrete_Class_KeyId ")]
      TPT_Parent_Concrete_Class ParentSpecializedClass {get;set;};

}

[Table("ConcreteParent")]
public TPT_Parent_Concrete_Class : TPT_Specialized_Base_Class2
{
      //optional relationship 
      public int? TPT_Child_Concrete_Class_KeyId {get;set;};

      [ForeignKey("TPT_Child_Concrete_Class_KeyId")]
      TPT_Child_Concrete_Class ChildSpecializedClass {get;set;};

}

public projectContext: DbContext
{
     public DbSet<TPT_Specialized_Base_Class1> 
     public DbSet<TPT_Specialized_Base_Class2> 

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
    // There is no configuration I could find that would make the model above work!

    // However, if you make each TPT_Specialized_Base_Class inherit from different
    // ProjectBaseClass like:
    public ProjectBaseClass1 : IProjectBase
    public ProjectBaseClass2 : IProjectBase

    public TPT_Specialized_Base_Class1 : ProjectBaseClass1 {...}
    // and 
    public TPT_Specialized_Base_Class2 : ProjectBaseClass2 {...}

    // or, more sensible... 
    public TPT_Specialized_Base_Class1 : IProjectBase
    // and 
    public TPT_Specialized_Base_Class2 : IProjectBase

    // then you can do the following, making sure you *discover* the child TPT base 
    // class first

    modelBuilder.Entity<TPT_Specialized_Base_Class1>() //this one is inherited by the derived class that has the *required* reference to a TPT derived parent
         .Ignore(x => x.PropertyNamedInErrorMessage);

    modelBuilder.Entity<TPT_Specialized_Base_Class2>();
         .Ignore(x => x.PropertyNamedInErrorMessage);

    // when I flipped the order of the classes above, it could not determine the 
    // principal end of the relationship, had a invalid multiplicity, or just wouldn't 
    // save...can't really remember what it was crying about...

    modelBuilder.Entity<TPT_Child_Concrete_Class>()
     .HasRequired(x => x.TPT_Parent_Concrete_Class ).WithOptional(); 
          & ProjectBaseClass2
    }
} 
```

# google-sheets - 对单元格求和，直到当前单元格的另一列的值相同

> ID：15525699
> 
> 赞同：1
> 
> 时间：2013-03-20T14:00:48.640
> 
> 标签：google-sheets, sum, google-sheets-formula

我需要对列中的所有值求和，直到当前单元格，其中不同列中的值相同。

例子：

```
------------------------------------------------------
| FIRST   | SECOND   | SUM                            |
------------------------------------------------------
| VALUE A | NUMBER 1 | NUMBER 1                       |
------------------------------------------------------
| VALUE A | NUMBER 2 | NUMBER 1 + NUMBER 2            |
------------------------------------------------------
| VALUE B | NUMBER 3 | NUMBER 3                       |
-------------------------------------------------------
| VALUE B | NUMBER 4 | NUMBER 3 + NUMBER 4            |
-------------------------------------------------------
| VALUE B | NUMBER 5 | NUMBER 3 + NUMBER 4 + NUMBER 5 |
------------------------------------------------------- 
```

第一列是字符串，第二列是数字，第一列是结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:52:52.650

编写一个 if 语句来执行此操作。比较当前行和前行之间第一列的值，如果它们的值相同，则将前一个总和和当前值相加，否则总和成为当前值。

在代码中，这将是 C3 中的公式

```
 =if(exact(A3,A2),C2+B3,B3) 
```

# c# - ComboBoxItem MouseEnter 事件未触发

> ID：15525704
> 
> 赞同：6
> 
> 时间：2013-03-20T14:00:56.523
> 
> 标签：c#, .net, wpf, windows, events

我有以下示例代码。奇怪的是，MouseMove 事件可以正常触发，但是当替换为 时`MouseEnter`，当鼠标移到`ComboBoxItem`. 知道如何解决这个问题吗？我实际上需要在用户将鼠标悬停在 a 上时发生一个事件`ComboBoxItem`，以及在悬停离开项目时发生另一个事件。

```
var comboBoxItem1 = new ComboBoxItem();
var comboBoxItem2 = new ComboBoxItem();
cmb.Items.Add(comboBoxItem1);
cmb.Items.Add(comboBoxItem2);

comboBoxItem1.Content = "1";

comboBoxItem1.MouseMove += (s, args) =>
{
    MessageBox.Show("1");
};

comboBoxItem2.Content = "2";
comboBoxItem2.MouseMove += (s, args) =>
{
    MessageBox.Show("2");
}; 
```

**编辑：**

```
 StackPanel spCondition = new StackPanel();
                spCondition.Orientation = Orientation.Horizontal;

                ComboBox cmbValue1 = new ComboBox();
                cmbValue1.IsTextSearchEnabled = false;
                cmbValue1.IsEditable = true;
                cmbValue1.Width = 70;
                cmbValue1.LostFocus += cmbValue_LostFocus;
                cmbValue1.PreviewMouseLeftButtonDown += cmbValue_MouseLeftButtonDown;
                cmbValue1.SelectionChanged += cmbValue_SelectionChanged;

                Border border = new Border();
                border.Child = cmbValue1;

                spCondition.Children.Add(border);   

private void cmbValue_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        ComboBox cmb = sender as ComboBox;
        cmb.Items.Clear();

        //Iterates through all virtual tables
        foreach (TableContainer table in parentTable.ParentVisualQueryBuilder.ListOpenUnjoinedTables)
        {
            ComboBoxItem item = new ComboBoxItem();
            item.MouseMove += item_MouseMove;

            if (table.IsVirtual == false)
            {
                item.Content = "[" + table.TableDescription + "]";
            }
            else
            {
                item.Content = "[" + table.View.Name + "]";
            }

            item.Tag = table;
            cmb.Items.Add(item);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:08:01.443

我确定您正在删除此代码中 ComboBox 中的项目：

```
private void cmbValue_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        ComboBox cmb = sender as ComboBox;
        cmb.Items.Clear();

        //Iterates through all virtual tables
        foreach (TableContainer table in parentTable.ParentVisualQueryBuilder.ListOpenUnjoinedTables)
        {
            ComboBoxItem item = new ComboBoxItem();
            item.MouseMove += item_MouseMove;

            if (table.IsVirtual == false)
            {
                item.Content = "[" + table.TableDescription + "]";
            }
            else
            {
                item.Content = "[" + table.View.Name + "]";
            }

            item.Tag = table;
            cmb.Items.Add(item);
        }
    } 
```

请尝试评论此代码并运行。

更新：

您可以使用以下代码将项目添加到comoBox：

```
var comboBoxItem1 = new ComboBoxItem();
var comboBoxItem2 = new ComboBoxItem();
cmb.Items.Add(comboBoxItem1);
cmb.Items.Add(comboBoxItem2);

comboBoxItem1.Content = "1";

comboBoxItem1.MouseMove += (s, args) =>
{
    MessageBox.Show("1");
};

comboBoxItem2.Content = "2";
comboBoxItem2.MouseMove += (s, args) =>
{
    MessageBox.Show("2");
}; 
```

使用此代码更改它。

```
var comboBoxItem1 = new Label();//or use textBolck
var comboBoxItem2 = new Label();//or use textBolck
combo.Items.Add(comboBoxItem1);
combo.Items.Add(comboBoxItem2);

comboBoxItem1.Content = "1";

comboBoxItem1.MouseEnter += (s, args) =>
{
     MessageBox.Show("1");
};

comboBoxItem2.Content = "2";
comboBoxItem2.MouseEnter += (s, args) =>
{
     MessageBox.Show("2");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:56:33.380

尝试使用 PreviewMouseEnter 事件。因为我猜有一些元素会窃取事件，所以使用隧道事件应该会有所帮助。

# android - Android布局wrap_content填满父

> ID：15525705
> 
> 赞同：1
> 
> 时间：2013-03-20T14:01:00.497
> 
> 标签：android, android-layout

我有这样的布局：它应该有一个底部有一个容器的地图视图，这个容器有一个广告和两个按钮，带有黄色背景。相反，我看到的只是屏幕上充满广告的容器和屏幕底部的两个按钮。

xml 的根目录：（不知何故，它没有在 stackoverflow 上显示根目录）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent" >
</RelativeLayout> 
```

XML:

```
<RelativeLayout
    android:id="@+id/bottomcontainer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="@color/yellow" >

    <LinearLayout
        android:id="@+id/action"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_margin="0dp"
        android:gravity="center_horizontal"
        android:orientation="horizontal"
        android:padding="0dp" >

        <Button
            android:id="@+id/bt_map"
            style="@style/ButtonLeft"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginBottom="8dp"
            android:layout_marginTop="8dp"
            android:enabled="false"
            android:gravity="center"
            android:minWidth="100dp"
            android:padding="8dp"
            android:text="Map" />

        <Button
            android:id="@+id/list"
            style="@style/ButtonRight"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginBottom="8dp"
            android:layout_marginTop="8dp"
            android:gravity="center"
            android:minWidth="100dp"
            android:padding="8dp"
            android:text="List" />
    </LinearLayout>

    <com.google.ads.AdView
        android:id="@+id/adview"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_above="@id/action"
        ads:adSize="BANNER"
        ads:adUnitId="unitId"
        ads:loadAdOnCreate="true" />
</RelativeLayout>

<com.google.android.gms.maps.MapView
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:apiKey="apikey"
    android:clickable="true"
    map:uiZoomControls="false"
    android:layout_above="@id/bottomcontainer" >
</com.google.android.gms.maps.MapView>

<ImageButton
    android:id="@+id/bt_location"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_margin="10dp"
    android:src="@android:drawable/ic_menu_mylocation" />

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/yellow"
    android:layout_above="@id/bottomcontainer"
    android:visibility="gone" >
</ListView> 
```

# file - 从文本文件中读取一个值并将其保存为另一个文件

> ID：15525709
> 
> 赞同：0
> 
> 时间：2013-03-20T14:01:05.560
> 
> 标签：file

我想为我的项目创建一个现金备忘录。

现在我有一个小问题。

如何从文本文件中读取特定值，然后将值保存在另一个文本文件中。

例子：

在`data.txt`文件中有一些值。

```
Item Name  : m-01

Item Brand : One Man

Item size  : XXL

Item Price : 1000

Item vat   : 15% 
```

这些是保存在`data.txt`

现在我的程序将询问商品名称以及何时写入商品名称（例如：m-01）它将只取值 1000（价格）和 15（增值税），然后将它们保存在一个新的 txt 文件中`data2.txt`

我怎样才能做到这一点？

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T12:29:33.943

您可以在这里简单地使用几个 bash 命令：

```
$ egrep 'Item vat|Item Price' data.txt | cut -f2 -d:
 1000
 15% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T11:46:23.933

```
public class WriteOrderNumberFile {

       private static void copyFile(String sourceFileName, String
    destinationFileName, String orderNr) {

          // orderNr = "LEC##0000000073";
          BufferedReader br = null;
          PrintWriter pw = null;

          try {
             br = new BufferedReader(new FileReader(sourceFileName));
             pw = new PrintWriter(new FileWriter(destinationFileName));
             String token;
             String line;
             Scanner inFile;
             while ((line = br.readLine()) != null) {
                inFile = new Scanner(line);

                while (inFile.hasNext()) {
                   token = inFile.next();
                   if (token.equals(orderNr)) {
                      System.out.println(token);
                      pw.println(line);
                      while ((line = br.readLine()) != null) {
                         inFile = new Scanner(line);
                         while (inFile.hasNext()) {
                            token = inFile.next();
                            if (token.equals("Run")) {
                               br.close();
                               pw.close();
                               return;
                            }
                         }
                         pw.println(line);
                      }

                   }

                }

             }

             br.close();
             pw.close();
          } catch (Exception e) {
             e.printStackTrace();
          }    }

       public static void main(String[] args) {
          String sourceFileName = "D:\\Test Folder\\source.txt";
          String destinationFileName = "D:\\Test Folder\\destination.txt";
          String orderNr = "LEC##0000000064";
          copyFile(sourceFileName, destinationFileName, orderNr);    }

    } 
```

# android - 当Android应用程序从后台进入前台时如何获取回调？

> ID：15525711
> 
> 赞同：3
> 
> 时间：2013-03-20T14:01:19.643
> 
> 标签：android, android-activity, background

如何在android中知道应用程序状态背景到前台？

我从一个 Baseactivity 调用扩展了我的活动，而 Baseactivity 类扩展了 android Activity。我将代码 appcomeForeground() 放入 onRestart() 上的基本活动中，但是当我们将活动导航到前台应用程序时也会调用它。

请建议仅在应用程序进入前台时才能回电的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:11:38.653

在 Baseactivity 中维护一个布尔变量，

IE：

```
 private boolean  isForeground; 
```

make的内部`onResume()`和 `Baseactivity`make的`isForeground = true` 内部`onPause()`方法`Baseactivity``isForeground = false`

并且每当您想知道状态时，请检查该布尔变量并相应地应用您的进一步逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:12:35.717

要检查您的应用程序是否在前台后台，您可以执行以下操作。

声明一个将维护状态的类

```
public class ApplicationState {
    public static boolean isActivityVisible() {
        return activityVisible;
    }

    public static void activityResumed() {
        activityVisible = true;
    }

    public static void activityPaused() {
        activityVisible = false;
    }

    private volatile static boolean activityVisible;
} 
```

在`onResume`您的应用程序调用的每个活动的方法中

```
ApplicationState.activityResumed() 
```

并在`onPause`您的应用程序调用的每个活动的方法中

```
ApplicationState.activityPaused() 
```

现在，您可以随时通过调用来检查应用程序的前台/后台状态

```
ApplicationState.isActivityVisible() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:09:26.940

没有框架提供的方法可以做到这一点。我在这里描述了我自己的解决方案：[https ://stackoverflow.com/a/14734761/1207921](https://stackoverflow.com/a/14734761/1207921)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:29:42.683

另一种解决方法是调用`putExtra`允许用户在应用程序的活动之间导航的意图。如果`onRestart`/`onResume`没有收到此 Extra，则该应用程序刚刚进入前台。

# javascript - 当我设置 let 0px 时，jquery animate 无法正常工作

> ID：15525714
> 
> 赞同：0
> 
> 时间：2013-03-20T14:01:35.280
> 
> 标签：javascript, jquery, jquery-animate

下面是实际滑动 div 的代码，从右向左滑动工作正常，但是当我从左向右滑动时。它给了一些震动。因为

```
<div style="overflow:hidden;height:100px;width:100px;overflow:hidden;">
    <div class="cont" style="position:relative;width:205px;left:0px;top:0px">
      <div class="x" id="x_1" style="float:left;width:100px;height:100px;background-color:red;"></div>
      <div class="x" id="x_2" style="float:left;width:100px;height:100px;background-color:blue;"></div>
    </div>
</div>
<input type="button" value="clik me1" data-info="1" id="click1"/>
<input type="button" value="clik me2" data-info="2" id="click2"/>
<script>
    $("#click1,#click2").bind('click',function(){
     var id = $(this).data("info");
     if(id == 2) {
        $(".cont").animate({left:'-100px'},500,'linear');
     } else {
        $(".cont").animate({left:'0px'},4000,'linear');  
        //above line actually not animating from -100px to 0px , its animating to -100px to -109px and then its animating to 0px. I want to know why its happening. 
     }
    });
</script> 
```

在下面的网址中，您可以找到脚本

我的 chrome 浏览器有问题。它不是一个有效的错误 [http://jsbin.com/ukakah/2/edit](http://jsbin.com/ukakah/2/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:09:29.827

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:11:10.743

[http://jsbin.com/ukakah/5/edit](http://jsbin.com/ukakah/5/edit)

```
$("#click1, #click2").on('click', function() {
    var animTo = this.id=='click1' ? 0 : 100 ;
    $(".cont").stop().animate({left: -animTo },500,'linear');    
}); 
```

很好地`.stop()`防止动画堆积，并且使用三元运算符，这就是您所需要的。（不需要`data`。）

# ruby-on-rails - 删除错误的模型文件后出错

> ID：15525716
> 
> 赞同：0
> 
> 时间：2013-03-20T14:01:42.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我尝试创建新的 GroupLink 时出现此错误

## 控制器代码：

```
def new
  @group_links=GroupLink.new
  respond_to do |format|
  format.html { render(:template=> 'group_links/new_link_details', :layout =>      
  '/layouts/sponsored_group_manage_sub_menu') }
  end
end

 def create
   @group_link=GroupLink.new(params[:group_link])
   @group_link.group_id=params[:group_id]
    if @group_link.save
    flash[:notice] = "A new booth link was created!"
     else
    flash[:errors] = @group_link.errors
   end
   redirect_to group_group_links_path(@group)
  end 
```

## 模型关系是一对多的关联：

```
 class GroupLink < ActiveRecord::Base
    belongs_to :group
    validates_presence_of :url
    validates_presence_of :text

 def link
   self.url
 end

 def text
  self.text
 end
end

 class Group < ActiveRecord::Base
    has_many :group_links, :dependent => :destroy
 end 
```

## 路由文件有以下内容：

```
resources :groups do
 member do
  get :get_group_links
 end

 resources :group_links
 ...
end 
```

## 视图文件如下：

```
 <% content_for(:page_title, "Create a New Booth Link") -%>
  <% form_for(:group_link,:url => group_group_links_path, :html => {:id => 
    "new_group_link", :method => :post}) do |f| %>
  <fieldset>
 <h6>New Booth Link</h6>
  <label for="group_link_url">URL</label><br />
  <%= f.text_field :url, :size => 32, :placeholder => "URL for the booth link" %><br    
      /><br />
  <label for="group_link_text">Text</label><br />
  <%= f.text_field :text, :size => 32, :placeholder => "The text for this booth 
     link" %><br/><br />
     <div class="buttons">
 <%= f.submit "Create Booth Link", :class => "button large" %>
    </div>
    </fieldset>
 <% end %> 
```

当我错误地将模型创建为 group_links 而不是 group_link 时，问题就开始了。所以我回滚了迁移并销毁了模型并使用正确的名称重新创建了它。在我进行此更改后，它开始抛出此错误（它正在使用 group_links 模型正确创建新的组链接，但正如预期的那样，路由 wnet haywire 所以我决定更改它）

请帮忙，我只是无法弄清楚问题是什么......

以下是完整的堆栈跟踪：

> ```
> app/models/group_link.rb:12:in `text'
> app/models/group_link.rb:12:in `text' activemodel (3.0.20) lib/active_model/errors.rb:224:in `read_attribute_for_validation' 
> ```
> 
> activemodel (3.0.20) lib/active_model/errors.rb:224:in `send' activemodel (3.0.20) lib/active_model/errors.rb:224:in`add_on_blank' activemodel (3.0.20) lib/active_model/errors.rb:223:in `each' activemodel (3.0.20) lib/active_model/errors.rb:223:in`add_on_blank' activemodel (3.0.20) lib/active_model/validations/ Presence.rb:9:in `validate' activesupport (3.0.20) lib/active_support/callbacks.rb:315:in`send' activesupport (3.0.20) lib/active_support/callbacks.rb:315:in `_callback_before_7973' activesupport (3.0.20) lib/active_support/callbacks.rb:420:in` _run_validate_callbacks' activemodel (3.0.20) lib/active_model/validations.rb:212:in `run_validations!' activemodel (3.0.20) lib/active_model/validations/callbacks.rb:67:in` run_validations!' activesupport (3.0.20) lib/active_support/callbacks.rb:419:in `_run_validation_callbacks' activemodel (3.0.20) lib/active_model/validations/callbacks.rb:67:in` run_validations!' activemodel (3.0.20) lib/active_model/validations.rb:179:`valid?' activerecord (3.0.20) lib/active_record/validations.rb:55:in`有效吗？activerecord (3.0.20) lib/active_record/validations.rb:75:in `perform_validations' activerecord (3.0.20) lib/active_record/validations.rb:43:in`save' activerecord (3.0.20) lib/active_record/attribute_methods/dirty.rb:21:in`save' activerecord (3.0.20) lib/active_record/transactions.rb:240:in`保存'activerecord (3.0.20) lib/active_record/transactions.rb:292:in `with_transaction_returning_status' activerecord (3.0.20) lib/active_record/connection_adapters/abstract/database_statements.rb:139:in` transaction' activerecord (3.0.20) lib/active_record/transactions.rb:207:in `transaction_without_trace_ActiveRecord_self_name_transaction' newrelic_rpm (3.3.4.1) lib/new_relic/agent/method_tracer.rb:491:in` transaction' newrelic_rpm (3.3.4.1) lib/new_relic/ agent/method_tracer.rb:242:in `trace_execution_scoped' newrelic_rpm (3.3.4.1) lib/new_relic/agent/method_tracer.rb:486:in` transaction' activerecord (3.0.20) lib/active_record/transactions.rb:290:in `with_transaction_returning_status' activerecord (3.0.20) lib/active_record/transactions.rb:240:in`save' activerecord (3.0.20) lib/active_record/transactions.rb:251:in `rollback_active_record_state!' activerecord (3.0.20) lib/active_record/transactions.rb:239:in`save' app /controllers/group_links_controller.rb:23:in `create' actionpack (3.0.20) lib/action_controller/metal/implicit_render.rb:4:in` send_action' actionpack (3.0.20) lib/action_controller/metal/implicit_render.rb:4:in `send_action' actionpack (3.0.20) lib/abstract_controller/base.rb:150:in` process_action' actionpack (3.0.20) lib/action_controller/metal/rendering.rb:11 :in `process_action' actionpack (3.0.20) lib/abstract_controller/callbacks.rb:18:in` process_action' activesupport (3.0.20) lib/active_support/callbacks.rb:511:in `_run__584584438__process_action__43712543__callbacks' activesupport (3.0.20) lib/active_support/callbacks.rb:410:in`发送'activesupport (3.0.20) lib/active_support/callbacks.rb:410:in `_run_process_action_callbacks' activesupport (3.0.20) lib/active_support/callbacks.rb:94:in`发送'activesupport (3.0.20) lib/active_support/callbacks.rb:94:in `run_callbacks' actionpack (3.0.20) lib/abstract_controller/callbacks.rb:17:in`process_action' actionpack (3.0.20) lib/action_controller/ metal/rescue.rb:17:in `process_action' actionpack (3.0.20) lib/action_controller/metal/instrumentation.rb:30:in`process_action' activesupport (3.0.20) lib/active_support/notifications.rb:52:in `instrument' activesupport (3.0.20) lib/active_support/notifications/instrumenter.rb:21:in`instrument' activesupport (3.0.20) lib/active_support/notifications.rb:52:in `instrument' actionpack (3.0.20) lib/action_controller/metal/instrumentation.rb:29:in`process_action' newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:34:in `process_action' newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:255:in` perform_action_with_newrelic_trace'newrelic_rpm (3.3.4.1) lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped' newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:250:in` perform_action_with_newrelic_trace'newrelic_rpm (3.3.4.1 ) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:33： 在`process_action' actionpack (3.0.20) lib/abstract_controller/base.rb:119:in`process' actionpack (3.0.20) lib/abstract_controller/rendering.rb:41:in `process' actionpack (3.0.20) lib/action_controller/metal.rb:138:in`dispatch' actionpack (3.0.20) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch' actionpack (3.0.20) lib/action_controller/metal.rb:178:in` action' actionpack (3.0.20) lib/ action_dispatch/routing/route_set.rb:68:in `call' actionpack (3.0.20) lib/action_dispatch/routing/route_set.rb:68:in`dispatch' actionpack (3.0.20) lib/action_dispatch/routing/route_set.rb:33:in `call' rack-mount (0.6.14) lib/rack/mount/route_set.rb:148:in`call' rack-mount (0.6.14) lib/rack/mount/code_generation。 rb:93:in `recognize' rack-mount (0.6.14) lib/rack/mount/code_generation.rb:131:in`optimize_each' rack-mount (0.6.14) lib/rack/mount/code_generation.rb:92:in `recognize' rack-mount (0.6.14) lib/rack/mount/route_set.rb:139:in`call' actionpack (3.0.20) lib/action_dispatch/routing/route_set.rb:499:in `call' newrelic_rpm (3.3.4.1) lib/new_relic/rack/browser_monitoring.rb:23:in`call 'newrelic_rpm (3.3.4.1) lib/new_relic/rack/developer_mode.rb:24:in call'warden `call' sass (3.2.5) lib/sass/./sass/plugin/rack.rb:54:in`(1.0.6) lib/warden/manager.rb:35:in `call' warden (1.0.6) lib/warden/manager.rb:34:in`catch'warden (1.0.6) lib/warden /经理。RB：34：在`call' actionpack (3.0.20) lib/action_dispatch/middleware/best_standards_support.rb:17:in`call' actionpack (3.0.20) lib/action_dispatch/middleware/head.rb:14:in `call' rack (1.2.7) lib/rack/methodoverride.rb:24:in`call' actionpack (3.0.20) lib/action_dispatch/middleware/params_parser.rb:21:in `call' actionpack (3.0.20) lib/action_dispatch/middleware/flash.rb:182:in` call' actionpack (3.0.20) lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call' actionpack (3.0.20) lib/action_dispatch/middleware/cookies.rb:302:in` call'activerecord (3.0.20) lib/active_record/query_cache.rb:32:in `call' activerecord (3.0.20) lib/active_record/connection_adapters/abstract/query_cache.rb:28:in` cache' activerecord (3.0.20) lib/active_record/query_cache.rb: 12:in `cache' activerecord (3.0.20) lib/active_record/query_cache.rb:31:in` call' activerecord (3.0.20) lib/active_record/connection_adapters/abstract/connection_pool.rb:354:in `call' actionpack (3.0.20) lib/action_dispatch/middleware/callbacks.rb:46:in`call' activesupport (3.0.20) lib/active_support/callbacks.rb:416:in `_run_call_callbacks' actionpack (3.0.20) lib/action_dispatch/middleware/callbacks.rb:44:in` call' rack (1.2 .7) lib/rack/sendfile.rb:106:in `call' actionpack (3.0.20) lib/action_dispatch/middleware/remote_ip.rb:48:in`call' actionpack (3.0.20) lib/action_dispatch/middleware/show_exceptions.rb:47:in`call' railties (3.0.20) lib/rails/rack/logger.rb:13:in`call' rack (1.2.7) lib/rack/runtime.rb:17:in `call' activesupport (3.0.20) lib/active_support/cache/strategy/local_cache.rb:72:in`call' rack (1.2.7) lib/rack/lock.rb:13:in `call' rack (1.2.7) lib/rack/lock.rb:13:in`synchronize' rack (1.2.7) lib/rack/ lock.rb:13:in `call' actionpack (3.0.20) lib/action_dispatch/middleware/static.rb:30:in`call' railties (3.0.20) lib/rails/application.rb:168:in `call' railties (3.0.20) lib/rails/application.rb:77:in`send' railties (3.0.20) lib/rails/application.rb:77:in `method_missing' railties (3.0.20) lib/rails/rack/log_tailer.rb:14:in`call' rack (1.2 .7) lib/rack/content_length.rb:13:in `call' rack (1.2.7) lib/rack/handler/webrick.rb:52:in`service' /home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/httpserver.rb:104:in `service' /home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/httpserver.rb:65:in` run '/home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:173:in `start_thread' /home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:162:in` start'/home/vasu/.rvm/rubies/ruby-1.8。 7-p371/lib/ruby/1.8/webrick/server.rb:162:in `start_thread' /home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:95:in` start' /home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb :92:在 `each' /home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:92:in` 开始'/home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:23:in `start' /home/vasu/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:82:in` start' rack (1.2.7) lib/rack/handler/webrick .rb:13:in `run' rack (1.2.7) lib/rack/server.rb:217:in`start' railties (3.0.20) lib/rails/commands/server.rb:65:in `start' railties (3.0.20) lib/rails/commands.rb:30 railties (3.0.20) lib/rails/commands.rb:27:in` tap' railties (3.0.20) lib/rails/commands.rb:27 script/rails:6:在“需要”脚本/rails:6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:06:35.633

我看到的问题是方法`GroupLink`

```
 def text
  self.text
 end 
```

您正在定义`text`只是调用自身的方法。尝试删除此方法。

# iphone - 为什么 performSelector: 使我的应用程序崩溃？

> ID：15525720
> 
> 赞同：1
> 
> 时间：2013-03-20T14:01:49.040
> 
> 标签：iphone, ios, objective-c

我的应用程序中有这个方法：

```
[self performSelector:@selector(resetAdView:toView:) withObject:currentDelegate_ afterDelay:10]; 
```

它调用另一个方法并将对象也发送到该方法....

每次我打开一个新`UIViewcontroller`的向视图添加广告时，我都会调用此方法。在我创建一个新的`UIViewController`->调用这个方法（这`currentdelegate`是新的`UIViewController`）并在视图控制器中按回之后，我在 10 秒后得到这个错误：

```
Thread 1 : EXC_BAD_ACCESS(code=1,address=0xd0000008) 
```

知道有什么问题吗？为什么我得到这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:07:53.083

这是因为您的视图控制器在您按下时被释放。
如果您使用的是 ARC，则将其设为 ivar，这样它就不会被释放。如果您使用的是非 ARC 环境，请保留该视图控制器对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:15:25.540

你没有给我们足够的信息来帮助你，所以我会给你一个通用的建议：添加一个异常断点，如果这不能给你足够的信息，the. 打开僵尸，如果这还不够，打开 malloc 日志记录...如果这还不够，那么您将需要了解有关您的开发环境的更多信息。

# objective-c - 如何将 NSMutableArray 数组放入字符串

> ID：15525724
> 
> 赞同：0
> 
> 时间：2013-03-20T14:01:58.953
> 
> 标签：objective-c, arrays

我有一个 NSMutableArray，其中包含需要转换为 NSString 的数据。

```
 data = [NSMutableArray array];

   Content string to write out to text file. 
   NSString *content = [NSString stringWithFormat:@" Log \nDevice Id Number: %@ \n=====Data    received from device %@====\n    Moves:     Miles:  \n \n \n \n====Data sent to Portal %@====\n    Moves:     Miles:  \n \n \n \n====Data received to  %@====\n    Response \n\n  ",serialNumber, dateString, dateString, dateString];

       [self setStatus:@"Syncing data..."];
self.userInfo = [self.cloud Authenticate:[self serialNumber]];

if ( self.deviceInfo )
{
    data = [self.device GetData:&error];
    if ( !data )
    {
        [self displayErrorMessage:error];
        data = [NSMutableArray array];
    }

    // Getting sync data
    NSString *path = [@"~" stringByExpandingTildeInPath] ;
    path=[path stringByAppendingString:@"/Documents/Movband Reports/"];

    NSString *fileName = [NSString stringWithFormat:@"%@/movbandData.txt",path];
    NSString *content=[data componentsJoinedByString:@"-"]; // Sync data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:03:44.313

如果您的数据（数组）有字符串，并且想通过一些字符/字符串使用附加它

```
NSString *content=[data componentsJoinedByString:@"-"]; 
```

或者，您可以遍历`data`并继续附加某些条件（您知道，哪个索引具有什么值）

```
NSMutableString *content=[NSMutableString new];
for(NSInteger i=0; i<data.count; i++){
     switch(i){
         case 0:[content appendString:@"Device Id Number: %@"];
                break;
          case 1:[content appendString:@"=====Data    received from device %@"];
                break;
          case 2:[content appendString:@"Moves:     Miles:  \n \n \n \n====Data sent to Portal"];
                break;
          case 3:[content appendString:@" Moves:     Miles:  \n \n \n \n====Data received to  %@"];
                break;
     }
     [content appendString:data[i];
} 
```

# java - 打破嵌套循环和主循环

> ID：15525727
> 
> 赞同：8
> 
> 时间：2013-03-20T14:02:02.803
> 
> 标签：java, for-loop, while-loop

我有以下代码：

```
int x = 100; //Or some other value

while(x > 0) {

    for(int i = 5; i > 0; i++) {

        x = x-2;

        if(x == 0)
            break;

        }

} 
```

但是，这只会破坏 for 循环。我怎样才能让它打破 for 和 while 循环？

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:03:01.713

您可以使用带标签的中断，它将执行重定向到标签标记的块*之后*：

```
OUTER:
while(x > 0) {
    for(int i = 5; i > 0; i++) {
        x = x-2;
        if(x == 0)
            break OUTER;
    }
} 
```

尽管在那种特定情况下，一个简单的`break`方法会起作用，因为如果`x == 0`while 也会退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:06:30.123

```
bool done=false;
while(!done && x > 0) {
    for(int i = 5;!done &&  i > 0 ; i++) {
        x = x-2;
        if(x == 0){
            done=true;
            break ;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:03:46.300

看这个[例子](http://www.java-examples.com/java-break-statement-label-example)

```
Outer:
    for(int intOuter=0; intOuter < intArray.length ; intOuter++)
    {
      Inner:
      for(int intInner=0; intInner < intArray[intOuter].length; intInner++)
      {
        if(intArray[intOuter][intInner] == 30)
        {
          blnFound = true;
          break Outer;
        }  

      }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:12:29.903

尽量避免中断，总是有另一种方法来编写你的循环，所以你不需要它，如果其他人必须修改你的代码，它会更“漂亮”并且更容易理解。在您的示例中，while 循环是不必要的，但可以向您展示它是如何可能的：

```
while(x > 0) {

  for(int i = 5; i > 0 && x!=0; i++) {

    x = x-2;

  }

} 
```

如果 x 等于 0，则将离开 for 循环。然后将验证您的 while 条件：x 小于 0（为零），因此您的 while 循环也将停止执行。

# exception - 异常和日志分析框架或软件

> ID：15525737
> 
> 赞同：0
> 
> 时间：2013-03-20T14:02:24.447
> 
> 标签：exception, logging, analysis

我们有 ASP.NET 应用程序和支持大量流量的生产中的 Web 服务。它将大量服务调用和异常记录到 MS Sql 服务器。

我们要分析日志和异常，以下是一些用例。

1.  从日志中监控调用 3rd 方服务的成功和失败。
2.  从日志中生成图形数据。例如，AirPrice 在一个月内成功了 1300 次。
    AirBooking 在一个月内失败了 200 次。
    上述统计数据在一段时间内的比较。

3.  异常统计
    ：某些类型的例外增加百分比。
    湾。某些类型的异常激增
    c. 在可选择的时间段内某些类型的异常的发生率。

是否有任何现成的工具或框架可用于分析此类日志。还是我需要自己编写这样的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T22:04:22.377

NewRelic（应用程序性能监控服务）非常好，虽然不便宜 - 请在[http://newrelic.com/](http://newrelic.com/)上查看，他们有免费版本。

Loggly 是一个简单的日志记录服务，具有强大而强大的仪表板，用于分析您的日志，并且价格随使用而调整。

# html - CSS3 滚动/滑动动画

> ID：15525747
> 
> 赞同：1
> 
> 时间：2013-03-20T14:02:48.760
> 
> 标签：html, css, css-transitions

我想为自己构建一个动画，如果用户从顶部滚动到按钮，则某些东西会从左向右移动。我还希望做一个滑动后显示一些内容的滑块。我的灵感来自这一方面：

[http://towncentrecarparks.com/tccp/infographic/index.php](http://towncentrecarparks.com/tccp/infographic/index.php)

感谢您的示例/教程。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-08-19T15:10:45.767

我简要介绍并管理了您发现的信息图 - 开发人员很高兴得知您发现它很有趣！

我们的开发人员实际上将在未来几周/几个月内在我们的[新博客](http://parall.ax)Parallax上发布一些方便的教程，展示如何创建此类工作。

干杯亚历克斯

# c# - 可移植类库：导航到 xaml 页面

> ID：15525749
> 
> 赞同：1
> 
> 时间：2013-03-20T14:02:51.207
> 
> 标签：c#, xaml, mvvm, navigation, portable-class-library

我有一个带有 3 个项目的可移植类库。

*   适用于 Windows Phone 和 Windows 平板电脑的通用类项目
*   Windows Phone 项目
*   适用于 Windows 平板电脑的项目

在我的常见项目中，我有一个文件夹模型和一个文件夹视图模型。在我的 Windows Phone 项目中，我有一个文件夹视图。

是否可以从公共项目中的 de viewmodel 文件夹中的类导航到 Windows Phone 项目的视图文件夹中的 xaml 页面？

`NavigationService.Navigate();`在这里不起作用，我找不到任何 nuget 包来包含它。

所以我的问题是：

*   还有另一种导航到 xaml 页面的方法吗？
*   或者是否有一个nuget包可以添加到`NavigationService`公共项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:23:02.750

该`NavigationService`课程在 PCL 中不可用。[您可以通过查看MSDN 上的文档](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.aspx)并单击“其他版本”下拉菜单来确认这一点。

你应该使用事件。说，您的 viewmodel 类可能有一个名为 的事件`NavigationRequested`，您引发而不是调用`NavigationService.Navigate()`，并且您的视图通过以下方式订阅该事件：

```
ViewModel.NavigationRequested += (s, e) => NavigationService.Navigate(GetUrlFor(e.PageId)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:18:30.220

我已经将[http://azerdark.wordpress.com/2010/04/23/multi-page-application-in-wpf/](http://azerdark.wordpress.com/2010/04/23/multi-page-application-in-wpf/)用于几个具有多页的项目，它可能对你也有用，希望它有帮助.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:18:06.877

这是一个示例，它几乎准确地显示了如何执行此操作：[共享代码：添加 NavigationService](http://code.msdn.microsoft.com/windowsapps/Sharing-CodeAdding-a4c4beb8)

以下是有关使用可移植类库的更一般信息的一些来源：

*   博客文章：[如何使便携式类库为您工作](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)
*   BUILD 演示：[使用可移植类库创建跨平台应用程序](http://channel9.msdn.com/Events/Build/2012/3-004)
*   社区示例和更多信息的链接：[pcl.codeplex.com](http://pcl.codeplex.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T21:21:15.307

在 MvvmCross 中，我们通过导航到 ViewModel 而不是 View 来执行这种类型的导航。

以这种方式工作，框架拦截 ViewModel 导航并以特定于平台的方式对其进行解释 - 例如：

*   在 WindowsPhone 上，它使用 Xaml url
*   在 WindowsStore 上它使用导航服务
*   在 Android 上它使用 Intents

对于您自己的框架，您应该能够产生类似的抽象 - 只需让 ViewModel 启动到抽象的导航，然后让特定于平台的代码处理每种情况下的细节。

# java - 我应该如何构建一个必须使用 Spring 和 JPA 的模块化企业应用程序？

> ID：15525756
> 
> 赞同：2
> 
> 时间：2013-03-20T14:03:25.843
> 
> 标签：java, spring, web, module, osgi

我计划构建一个基于 Java 的系统来处理不同的业务流程，其中每一个都是系统中的特定模块。大多数模块将依赖其他一些模块来处理其特定的业务流程。换句话说，顶层模块会消耗底层模块提供的某种基础服务。有些模块会从一开始就开发，但有些模块会在以后添加到系统中。接下来，一些模块将公开 RESTful 接口来处理外部输入/输出。

为了处理这一切，OSGi 似乎是合适的，但是对于所有不同的“发行版”（Equinox、Felix 等）学习起来有点困难，我担心使用 Spring 框架和其他第 3 方的易用性每个模块中的库（从 Spring 3.2 开始，不同的 jars 可能不会随 OSGi 清单一起提供）。

最重要的是，我想要一个中央门户网站来管理所有捆绑包，因此每个新捆绑包都会有一个新的管理部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T21:30:53.343

这就是我们为 Spring 开发 osgi-less 模块化的原因[https://github.com/griddynamics/banshun](https://github.com/griddynamics/banshun)感谢您的反馈！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:12:42.320

Why do you need OSGi? Why not use a Web Server like Tomcat, and deploy your application as a war? You can deploy it on multiple servers in a cluster, and your application can scale on and on.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:58:02.950

与其使用 spring，不如使用 OSGi Blueprint，它可以让您“轻松”地从 Spring 过渡到 OSGi。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:30:00.250

为什么需要春天？它变得令人难以置信的耦合。由于 OSGi 应用程序往往是由通过服务通信的小组件构建的，因此它的复杂性非常无用；取消了 Spring 布线模型的大部分优点，该模型假设它是中心的。

很难配置是一个奇怪的说法，OSGi 是出色的配置支持。它只是与你习惯的不同。

# c# - 在以前在应用程序资源中定义的新窗口中覆盖边框样式（可能是错误？）

> ID：15525759
> 
> 赞同：2
> 
> 时间：2013-03-20T14:03:34.070
> 
> 标签：c#, wpf, xaml

我为一些我不太理解的行为编写了一个小测试用例。如果有人可以为我解决这个问题，我会最感兴趣。

我在 App.xaml 中有，

```
<Application x:Class="WpfApplication1.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">
  <Application.Resources>
    <Style TargetType="Border">
      <Setter Property="BorderBrush"
          Value="Crimson" />
    </Style>
  </Application.Resources>
</Application> 
```

我想删除以下窗口的样式，因此我重新定义了样式，如下所示：-

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

  <ListView>
    <ListView.Resources>
      <Style TargetType="Border" />
     </ListView.Resources>
     <ListView.View>
       <GridView>
         <GridViewColumn Header="test1" />
         <GridViewColumn Header="test2" />
       </GridView>
     </ListView.View>
  </ListView>
</Window> 
```

我的印象是，如果我要重新定义样式，如上所述，这将覆盖我放入应用程序资源中的内容。我已经测试过设置边框画笔无济于事，即使这不是必需的。

下面是我假设没有边框样式的窗口的屏幕截图：-

![测试用例窗口](../Images/b93298fa37c1bf748b2d5e61debbf7ef.png)

**注意**它似乎在设计器中看起来不错，但在运行时却不行。此外，这适用于除边框外的其他目标类型（使用 TextBlock 和其他一些控件进行测试）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:00:10.163

您是否尝试过以您在 ListView 资源中声明的样式为 BorderBrush 添加设置器？

# jsf - Primefaces selectBooleanCheckbox未显示在正确的位置

> ID：15525764
> 
> 赞同：2
> 
> 时间：2013-03-20T14:03:52.947
> 
> 标签：jsf, primefaces

我有一个对话框，它将显示一个带有 2 个复选框的弹出窗口，第一个被选中，第二个未被选中，如下代码所示：

```
<h:panelGrid columns="2" columnClasses="label-container,field-container">
    <p:selectBooleanCheckbox value="true" />
    <h:outputText value="EDIT SHEETS" />

    <p:selectBooleanCheckbox value="false" />
    <h:outputText value="EDIT OTHERS" />
</h:panelGrid> 
```

但是第一个钩子符号不在复选框中心。如果我无论在哪里单击，符号都会突然出现在正确的位置。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T14:47:15.953

您应该使用 value="#{true}" 而不是 value="true"

```
<h:panelGrid columns="2" columnClasses="label-container,field-container">
<p:selectBooleanCheckbox value="#{true}" />
<h:outputText value="EDIT SHEETS" />

<p:selectBooleanCheckbox value="#{false}" />
<h:outputText value="EDIT OTHERS" /> 
```

# ruby-on-rails - PG::Error on running rails 应用程序

> ID：15525765
> 
> 赞同：0
> 
> 时间：2013-03-20T14:03:55.973
> 
> 标签：ruby-on-rails, ruby, rails-postgresql, pg

我已经在我的 Windows 7（专业 - 服务包 1）机器上安装了 PostgreSQL（使用 postgresql-9.1.8-2-windows-x64.exe）

我现在尝试运行我的 rails 项目（通过 Webrick 端口 3000），但不幸的是我收到以下错误： ![在此处输入图像描述](../Images/f00584603a52980246e9757703d00b6c.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T13:37:11.933

连接被拒绝意味着您在尝试连接时收到了 ICMP 错误。Windows 不支持 UNIX 域套接字，因此您的连接是通过 TCP/IP 进行的。

要解决此问题，请尝试以下步骤：

1.  psql 在有问题的服务器上。如果失败，请确保 PostgreSQL 正在运行等。

2.  来自运行 webrick 的服务器的 pgAdmin。如果失败，请确保 PostgreSQL 正在运行，并且防火墙已禁用。

3.  禁用防火墙，检查防火墙日志、事件查看器、服务状态等。尝试关闭防火墙（包括 Windows 防火墙）。测试。

# c++ - 变量类型混乱

> ID：15525768
> 
> 赞同：1
> 
> 时间：2013-03-20T14:04:05.553
> 
> 标签：c++, optimization, arduino

为什么我在下面的代码中没有得到正常的结果？

```
void Motors::setCycleDutyA(int percentage) {
    Serial.println(percentage);
    Serial.println(pwmCycleDutyA);
    float x=percentage/100;
    Serial.print(x);
    pwmCycleDutyA = int(255*x);
    Serial.println(pwmCycleDutyA);
} 
```

当我调用函数时：

```
Motors::setCycleDutyA(45); 
```

我得到这些结果：

> 45 255 0.000
> 
> 45 0 0.000
> 
> 45 0 0.000

我想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:05:00.887

这里：

```
float x=percentage/100; 
```

您正在执行**整数除法**（因为两个操作数都是整数）。这意味着`0`每次的结果都会`percentage`小于`100`。这解释了你得到的结果。

将其更改为：

```
float x=percentage/static_cast<float>(100); 
```

或者：

```
float x=percentage/100.f; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T14:06:04.910

问题是，类型`float x = percentage / 100`在哪里。这意味着 的两个参数都是整数，因此执行整数除法。然后，将结果转换为.`percentage``int``/``float`

你要这个：

```
float x = percentage / 100.f; 
```

或者只是将类型更改`percentage`为`float`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:27:12.447

对于这种情况，我倾向于避免使用浮点数。像这样控制电机的代码通常在不直接支持浮点的小型微控制器上运行，因此浮点计算通常在软件中模拟，这很慢并且可能会添加相当多的额外代码。

因此，我会尝试考虑这是否可以用整数数学来完成。看序列：

```
float x=percentage/100;
pwmCycleDutyA = int(255*x); 
```

这基本上相当于：

```
pwbCycleDutyA = percentage * 2.55; 
```

出于很多目的，将其视为 就足够了`percentage * 2.5`，这在整数数学中很容易呈现：

```
pwbCycleDutyA = (percentage * 5) / 2; 
```

这将我们可以生成的值的范围缩小到 0..250 而不是 0..255 - 但请记住，由于百分比以 开头`int`，因此在任何情况下我们都只能生成 100 个离散值，因此这种情况很少见可能会产生很大的差异（如果有的话）。

但是，如果您确定乘数确实需要为 2.55 而不是 2.5，您也可以这样做。最明显的是简单地重新排列你的方程——而不是除以 100 然后乘以 255，先乘以 255，然后除以 100：

```
pwbCycleDutyA = (percentage * 255) / 100; 
```

在重新排列这样的等式时要记住的主要事情是确保防止溢出。假设`percentage`永远不会超过 100，但我们还是很安全的——中间结果永远不会超过`25500`，这很容易适应带符号的 16 位 int（C 允许的最小值）。

# scala - 使用 Mockito 和 Scalatest 进行参数匹配

> ID：15525773
> 
> 赞同：0
> 
> 时间：2013-03-20T14:04:14.923
> 
> 标签：scala, junit, mockito, scalatest

我正在尝试将 mockito 与 scalatest 一起使用，但是我的 mock 总是返回 null。它是一个简单的测试，但是对 post 的调用没有返回我期望的对象（someObj3），而是返回 null。任何想法发生了什么？在 Scala 中是否还有一个等效的 API 可以让我在创建期望时传递特定类或类型的任何参数？

```
@Test def mockTestt = {
 var mock:Someclass = Mockito.mock(classOf[Someclass]);
 systemUnderTest.setSomeClass(mock)

 when(mock.post(someObj1,someObj2))
        .thenReturn(someObj3) 

 var status:String = systemUnderTest.isOpen(someObj1, someObj2)
 Assert.assertTrue(status.equalsIgnoreCase("Enabled")) 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:09:03.013

可能模拟本身不是`null`，而是您没有存根或模拟您在创建后使用的模拟的成员。

如果您可以切换到 Specs2，您会发现它为 Mockito 提供的 DSL 更容易处理。您仍然需要存根/模拟模拟的所有嵌套/附属成员，但如果这样做，您的代码将少得多嘈杂和冗长。

# sql - SQL 否定查询

> ID：15525774
> 
> 赞同：2
> 
> 时间：2013-03-20T14:04:16.900
> 
> 标签：sql

我有三个表，我正在展示相同的简化版本

**客户_dim**

```
[Cust_id] [Cust_Name] 
```

**产品_dim**

```
[Prod_id] [Prod_Name] 
```

**Orders_fact**

```
[ord_id] [Cust_id] [Prod_id] 
```

我想要所有购买了每件产品的客户（甚至一个都没有丢失）

我想要一个更优雅的查询，而不是简单地将每个客户组的计数等同于`prod_dim`

即我不想要以下类型的查询（因为这是一个面试问题，也有一些优雅的点）

```
select cust_name 
from customers c, 
   (select cust_id, count(prod_id) cnt 
    from order_fact 
    group by cust_id where cnt = (select count(prod_id) from prod_dim)) t1
where c.cust_id = t1.cust_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:21:04.930

否`count`或`group by`版本：

```
SELECT Cust_Name FROM Customer_dim WHERE Cust_Id NOT IN (
    SELECT c.Cust_Id FROM Product_dim p
    CROSS JOIN Customer_dim c 
    LEFT JOIN Orders_fact o ON o.Prod_Id = p.Prod_Id AND c.Cust_Id = o.Cust_Id
    WHERE Ord_Id IS NULL
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:10:48.947

如果你为你的查询使用了正确的语法，那么它可能会在面试中走得更远。这是应该工作的查询版本：

```
select c.cust_name 
from customers c join
     (select ofa.cust_id 
      from order_fact ofa
      group by ofa.cust_id 
      having cnt = (select count(distinct prod_id) from prod_dim)
     ) ccnt
     on c.cust_id = ccnt.cust_id 
```

注意`having`子句的使用，`count(distinct)`而不是`count()`，正确的连接语法和合理的别名。

# css - 背景图像在页脚后停止

> ID：15525775
> 
> 赞同：0
> 
> 时间：2013-03-20T14:04:19.273
> 
> 标签：css, image, background, footer, repeat

嗨，我在网站上需要帮助。背景图像在页脚处停止，这意味着在长页面上，我在下面看到一个丑陋的部分，而不是在下面继续背景。我尝试使用 padding-bottom 但是然后我在不需要它的页面上得到填充，

由于主页较长，因此没有问题并且网站在页脚上反弹。

舞台网站阿迪 - [http://stage.microscooterstore.co.uk/mss/](http://stage.microscooterstore.co.uk/mss/)

问题页面示例：[http ://stage.microscooterstore.co.uk/mss/checkout/cart/](http://stage.microscooterstore.co.uk/mss/checkout/cart/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:06:08.817

给你的`<html/>`,`<body/>`和`.ma-wrapper`a `height`：`100%`

```
html, body {
    height: 100%;
}
.ma-wrapper {
    min-height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:09:15.703

您的容器`.ma-wrapper`没有延伸到页面底部。

```
.ma-wrapper {
  height: 100%;
} 
```

# sql - 如何优化 SELECT MaxDate

> ID：15525776
> 
> 赞同：1
> 
> 时间：2013-03-20T14:04:19.790
> 
> 标签：sql, sql-server, database, performance, sql-server-2008

我有一个查询要从 tableA 中选择一些与 tableB 中的某些行匹配的数据。尽管它的工作原理很慢，但返回几百行大约需要 20 分钟。这是查询，希望您有一些建议可以改进或更改。

我正在使用 SQL Server 2008

```
DECLARE @MaxDate DATETIME

SELECT @MaxDate = MAX(TimeStamp) -- I know it's not the best column name
FROM tableA
WHERE CodeName IN
(SELECT Tag FROM TableB 
WHERE POSITION = 'UP' AND PLACE = 'Shelf') 

IF @MaxDate > '2011-08-08'
BEGIN

 SELECT @MaxDate = MAX(TimeStamp) -- I know it's not the best column name
FROM tableA
WHERE CodeName IN
(SELECT Tag FROM TableB 
WHERE POSITION = 'UP' AND PLACE = 'Shelf')AND TimeStamp >= '2008-12-24' AND TimeStamp < '2010-12-24'

END
ELSE 
PRINT 'Date out of range' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:09:02.700

子查询看起来很可疑，您冒着对 tableA 中的每一行进行表扫描的风险。您也只需要一个查询，并且无论如何都不应该将变量重用于其他东西。

确保代号、标签、位置和标签已正确编入索引。如果“up”/“shelf”标签不是很常见，你应该可以通过 tableA 的 table seek 逃脱。

```
 SELECT
        @MaxDate  = MAX(TimeStamp),
        @MaxDate2 = MAX(                
            CASE WHEN 
                TimeStamp >= '2008-12-24' AND
                TimeStamp < '2010-12-24'
                THEN TimeStamp END)
    FROM
        tableA A
    JOIN
        Tag T ON 
            T.CodeName=A.Tag 
    WHERE   
        T.POSITION = 'UP' AND
        T.PLACE = 'Shelf' 
```

并对结果做一些适当的事情

```
IF @MaxDate > '2011-08-08'
BEGIN
    SELECT @MaxDate2
END
ELSE 
PRINT 'Date out of range' 
```

# java - 从字符串中提取 2 个整数

> ID：15525777
> 
> 赞同：3
> 
> 时间：2013-03-20T14:04:19.827
> 
> 标签：java, string, split, integer, substring

```
String weapon = "pistol . <1/10>";
Result:
int clip = 1;
int ammo = 1; 
```

字符串格式 = (WEAPON) 。<(CLIP)/(AMMO)>
我需要 Clip 和 Ammo 值。

那么我如何提取字符串的这两个值。我可以用“/”分割它，因为它仍然会面对：“gun <1”和“10>”
提前谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T14:13:11.200

您可以像这样删除非数字字符：

```
String s = "pistol . <1/10>";
String[] numbers = s.replaceAll("^\\D+","").split("\\D+"); 
```

现在`numbers[0]`是`1`和`numbers[1]`是`10`。

*   `s.replaceAll("^\\D+","")`删除字符串开头的非数字字符，所以现在是新字符串`"1/10>"`
*   `.split("\\D+")`拆分非数字字符（在本例中为`/`and `>`）并忽略尾随的空字符串（如果有）

* * *

或者，如果格式始终与您在问题中提到的完全一样，您可以查找该特定模式：

```
private final static Pattern CLIP_AMMO = Pattern.compile(".*<(\\d+)/(\\d+)>.*");

String s = "pistol . <1/10>";
Matcher m = CLIP_AMMO.matcher(s);
if (m.matches()) {
    String clip = m.group(1); //1
    String ammo = m.group(2); //10
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:09:15.873

```
String weapon = "pistol . <1/10>";

String str = weapon.substring(weapon.indexOf("<")+1,weapon.indexOf(">")); // str = "<1/10>"

int clip = Integer.parseInt(str.substring(0,str.indexOf("/"))); // clip = 1

int ammo = Integer.parseInt(str.substring(str.indexOf("/")+1)); // ammo = 10 
```

剪辑 = 1

弹药 = 10

完毕..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:15:32.640

你也可以试试这个...

**从字符串 "(WEAPON) . <(CLIP)/(AMMO)>" 中提取值 WEAPON、CLIP 和 AMMO**

```
String str = "(WEAPON) . <(CLIP)/(AMMO)>";
Pattern pattern = Pattern.compile("\\((.*?)\\)");
Matcher matcher = pattern.matcher(str);
while(matcher.find()) {
   System.out.println(matcher.group(1));
} 
```

**从字符串“pistol . <1/10>”中提取值 1、10：**

```
List<String[]> numbers = new ArrayList<String[]>();
String str = "pistol . <1/10>";
Pattern pattern = Pattern.compile("\\<(.*?)\\>");
Matcher matcher = pattern.matcher(str);
while(matcher.find()) {
   numbers.add(matcher.group(1).split("/"));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:20:04.137

```
String weapon = "pistol . <1/10>";
Pattern p = Pattern.compile("\\d+");
Matcher m = p.matcher(weapon); 
List<Integer> numbers = new ArrayList<Integer>();
while (m.find()) {
    numbers.add(Integer.parseInt(m.group()));
}
System.out.println("CLIP: " + numbers.get(0));
System.out.println("AMMO: " + numbers.get(1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:07:53.050

然后你分别用“<”（枪<1）和“>”（10>）分割结果子串

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:18:38.630

你可以尝试这样的事情。

```
public static void main(String[] args) {
    String weapon = "pistol . <1/10>";
    String test = "";

    Pattern pattern = Pattern.compile("<.*?>");
    Matcher matcher = pattern.matcher(weapon);

    if (matcher.find())
        test = matcher.group(0);

    test = test.replace("<", "").replace(">", "");
    String[] result = test.split("/");

    int clip = Integer.parseInt(result[0]);
    int ammo = Integer.parseInt(result[1]);
    System.out.println("Clip value is -->" + clip + "\n"
            + "Ammo value is -->" + ammo);
} 
```

输出：

```
Clip value is -->1
Ammo value is -->10 
```

# asp.net - 在 Web 表单中检查错误

> ID：15525779
> 
> 赞同：0
> 
> 时间：2013-03-20T14:04:20.767
> 
> 标签：asp.net

有没有地方可以看到错误检查的例子。我有一个带有多个控件的 Web 表单。其中两个控件对于更新数据库和网格视图中的报告至关重要。

我不是在寻找极其复杂的检查，只是在向数据库提交更新之前阻止用户。例如，我有一个日历，用户需要在其中选择一个日期。如果他们未能选择日期，我不想处理更新，而是返回一个警告，例如“你疯了吗，输入日期！”

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:08:22.107

Asp.net 带有一组验证控件，可用于在将输入传递到服务器之前验证客户端的输入。

在您的情况下，您可能需要一个**[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)**

例如：

```
<asp:TextBox runat="server" ID="tbInput" />
<asp:RequiredFieldValidator ControlToValidate="tbInput" ValidationGroup="A" ErrorMessage="This is a mandatory field" runat="server" id="RequiredFieldValidator11" />
<asp:Button runat="server" ValidationGroup="A" Text="Submit"/> 
```

注意使用`ValidationGroup`和`ControlToValidate`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:08:24.513

所有你需要检查的是

**必填字段验证器类** （在提交表单时未填写字段时使用） [http://msdn.microsoft.com/en-IN/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx](http://msdn.microsoft.com/en-IN/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)

**正则表达式验证器类** （用于检查您输入的内容是否正确，对于 ins，当在电子邮件字段下提供电话时） [http://msdn.microsoft.com/en-us/library/system.web.ui .webcontrols.regularexpressionvalidator.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)

**验证摘要类** （将上述两个类中的所有错误声明消息带到屏幕上。对于 ins，Email 不能留空，电话号码不能包含字母，...） [http://msdn.microsoft.com/en-我们/图书馆/system.web.ui.webcontrols.validationssummary.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationsummary.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:08:26.110

只需对照“无”或任何控件的默认值检查控件的返回值。

类似（伪代码）：

```
if(value is nothing) {
   // print 'Are you nuts? Select a date'
}else{
   // store it in the database 
```

如果您想了解更多信息，请向我们展示您的一些代码。（编辑你的答案）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:08:58.673

看看[CustomerValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)，例如：

```
<asp:CustomValidator runat="server"
    ID="DateRangeValidator" 
    ControlToValidate="DateTextBox"
    OnServerValidate="DateRangeValidator_Validate" 
    ErrorMessage="ERROR MESSAGE" /> 
```

然后`DateRangeValidator_Validate`在服务器端实现，添加相关的日期验证逻辑。

您还可以查看[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)，但这还不够，因为这不会阻止用户[尝试输入无法插入的日期，例如 SQL Server](https://stackoverflow.com/questions/3310569/what-is-the-significance-of-1-1-1753-in-sql-server) - 01/01/1066

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:09:20.120

您正在寻找必填字段验证器：[http](http://www.4guysfromrolla.com/webtech/090200-1.2.shtml) ://www.4guysfromrolla.com/webtech/090200-1.2.shtml 示例：

```
<asp:RequiredFieldValidator runat="server"
  id="ValidatorName"
  ControlToValidate="ctrlToValidate"
  ErrorMessage="Message to display for invalid data..."
  display="Dynamic" /> 
```

# ruby - Rails 错误服务资产

> ID：15525791
> 
> 赞同：0
> 
> 时间：2013-03-20T14:04:47.400
> 
> 标签：ruby, ruby-on-rails-3.1, ruby-on-rails-3.2, webrick

我正在将一个大型站点从 Rails 2 迁移到 Rails 3。当我尝试获取资产时，使用时出现以下错误`Webrick`：

```
Started GET "/assets/key.png" for 127.0.0.1 at 2013-03-20 11:00:06 -0300
Served asset /key.png - 200 OK (15ms)
[2013-03-20 11:00:08] ERROR NoMethodError: undefined method `each' for nil:NilClass
    /usr/local/rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.5/lib/rack/handler/webrick.rb:71:in `service'
    /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
    /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
    /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我检查了机架源代码，问题出在文件 webrick.rb 的以下行（正文为 nil）：

```
body.each { |part|
        res.body << part
      } 
```

使用`Thin`我得到一个类似的错误：

```
Started GET "/assets/key.png" for 127.0.0.1 at 2013-03-20 11:34:31 -0300
Served asset /key.png - 200 OK (33ms)
!! Rack application returned nil body. Probably you wanted it to be an empty string?
!! Unexpected error while processing request: undefined method `each' for nil:NilClass 
```

在浏览器中：

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

我一直在努力解决这个错误。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:09:30.477

我发现了问题。

这与内存缓存有关。我没有安装它。

我刚刚评论了以下行：

config.cache_store = :mem_cache_store

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T19:25:12.863

实际上，它与缺少的 memcache 服务器有关。就我而言，我发现 Heroku 还发布了设置快速小型 memcached 服务器的说明，以便在本地复制您的生产环境。

# mysql - 如何写一个sql来获取这个动态表中的记录？

> ID：15525800
> 
> 赞同：-4
> 
> 时间：2013-03-20T14:05:22.250
> 
> 标签：mysql, sql

我有一个表来存储动态属性

结构是这样的：

```
id    itemid  value
----  ------  ------
1     1       A
2     2       B
3     3       C
4     1       B
5     2       C 
```

所以当我传递多值参数时

*   传值`A B`结果 itemid`1`
*   传值`B`结果 itemid`1 2`
*   传值`B C`结果`2`

这个sql怎么写？顺便说一句，我使用 mysql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:58:11.367

假设`(itemid, value)`有一个`UNIQUE`约束：

```
SELECT itemid
FROM tableX
WHERE value IN ('A', 'B')       -- the list
GROUP BY itemid
HAVING COUNT(*) = 2 ;           -- the size of the list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:15:32.847

您应该能够使用[SQL INTERSECT](http://www.techonthenet.com/sql/intersect.php)查询获得您正在寻找的行为。这是一个简短的例子。

SELECT itemid FROM mytable WHERE value = 'A' INTERSECT SELECT itemid FROM mytable WHERE value = 'B'

# bash - Bash - 调整终端大小时如何运行功能？

> ID：15525802
> 
> 赞同：-2
> 
> 时间：2013-03-20T14:05:22.840
> 
> 标签：bash

`fce_exitus`调整终端大小时如何运行？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T14:54:05.253

您可以使用`PROMPT_COMMAND`. 将以下内容放入您的`.bashrc`文件中：

```
check_terminal_size () {
    if [[ "$LINES $COLUMNS" != "$previous_lines $previous_columns" ]]; then
        fce_exitus
    fi
    previous_lines=$LINES
    previous_columns=$COLUMNS
}

PROMPT_COMMAND="check_terminal_size; $PROMPT_COMMAND" 
```

由于`bash`更新`LINES`和`COLUMNS`接收时`SIGWINCH`，您还可以捕获该信号而不是使用`PROMPT_COMMAND`. 但是，例如，如果您通过拖动窗口框架来调整大小，您的 shell 可能会`SIGWINCH`在单个终端调整大小期间接收多次。所以设置的替代方法`PROMPT_COMMAND`是

```
trap 'check_terminal_size' WINCH 
```

# red5 - Red5 安装在 Ubuntu 12.04 LTS 上。但是 oflaDemo 不起作用

> ID：15525805
> 
> 赞同：1
> 
> 时间：2013-03-20T14:05:32.290
> 
> 标签：red5

我已经在 Ubuntu 12.04 上安装了 red5 服务器。我下载了 Red5-0.9.1，运行 red5.sh，索引页正常工作。演示 SOSample ( BallControl.html ) 也可以正常工作。

但是，laDemo 的演示失败了。好像没有安装Java Spring Framework？日志如下：

```
[INFO] [Launcher:/oflaDemo] org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4ab84c: defining beans [placeholderConfig,web.context,web.scope,web.handler,demoService.service,org.springframework.scripting.support.ScriptFactoryPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@37165f
Exception in thread "Launcher:/oflaDemo" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.scripting.support.ScriptFactoryPostProcessor#0' defined in ServletContext resource [/WEB-INF/red5-web.xml]: Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/aop/Advice
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:946)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:890)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:479)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:671)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:401)
    at org.red5.server.tomcat.TomcatLoader$1.run(TomcatLoader.java:594)
Caused by: java.lang.NoClassDefFoundError: org/aopalliance/aop/Advice
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2416)
    at java.lang.Class.getConstructor0(Class.java:2726)
    at java.lang.Class.getDeclaredConstructor(Class.java:2004)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:64)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:938)
    ... 10 more
Caused by: java.lang.ClassNotFoundException: org.aopalliance.aop.Advice
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 16 more 
```

有人以前见过这个错误吗？我不知道我现在应该安装哪个软件包。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:53:32.257

好像漏掉了一些jar文件

您能在 [red5 服务器路径]/lib 或您的应用程序库中找到两个 jar，例如：“spring-aop-xxxjar”和“aopalliance-xxjar”吗？

或者您可以尝试将“RED5_HOME”添加到您的环境变量中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:51:52.633

最后我运行了red5-1.0.0，它工作正常。我为 Red5-0.9.1 尝试了很多方法，都失败了..

# xml - XQuery 不同的 XML 标记

> ID：15525811
> 
> 赞同：2
> 
> 时间：2013-03-20T14:05:42.787
> 
> 标签：xml, xpath, xquery

我正在尝试创建一个 XQuery 来生成与 no 一起使用的 xml 标记的以下详细信息。发生的

Book- 3 发生 Article-2 发生会议 - 1 发生

这可能吗？我一直在尝试，但它不起作用

```
<test>
   <book>
        <year>1992</year>
   ....
   </book>
   <article>
        <year>1992</year>
   ....
   </article>
   <conference>
        <year>1992</year>
   ....
   </conference>
   <article>
        <year>1992</year>
   ....
   </article>
   <book>
        <year>1992</year>
   ....
   </book>
   <book>
        <year>1992</year>
   ....
   </book>
</test> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:51:24.767

**使用这个纯粹而简单的 XPath 2.0 表达式**：

```
for $name in distinct-values(/*/*/name())
 return
   ($name, count(index-of(/*/*/name(),$name)),'&#xA;') 
```

**当根据提供的 XML 文档评估此表达式时：**

```
<test>
   <book>
        <year>1992</year>
   ....
   </book>
   <article>
        <year>1992</year>
   ....
   </article>
   <conference>
        <year>1992</year>
   ....
   </conference>
   <article>
        <year>1992</year>
   ....
   </article>
   <book>
        <year>1992</year>
   ....
   </book>
   <book>
        <year>1992</year>
   ....
   </book>
</test> 
```

**产生了想要的正确结果：**

```
 book 3
 article 2 
 conference 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:21:06.700

`group by`如果您正在使用的 XQuery 不支持该语法，那么下面的方法应该可以工作：

```
for $dn in distinct-values(for $x in (/test/*) 
                           return local-name($x))
let $count := count(/test/*[local-name() = $dn])
order by $count descending
return ($dn, "-", $count, "occurrence(s) ") 
```

结果是：

```
book - 3 occurrence(s) article - 2 occurrence(s) conference - 1 occurrence(s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:57:05.093

据我了解。这是一个“XQuery 3”解决方案：

```
for $x in (/test/*) 
    let $eltName := local-name($x)
    group by $eltName 
return ($eltName, "-",count($x), "occurrence(s) /") 
```

对于提供的 XML，结果是：

```
conference - 1 occurrence(s) / book - 3 occurrence(s) / article - 2 occurrence(s) / 
```

# postgresql - 在 postgres 中添加类型双精度的检查约束

> ID：15525816
> 
> 赞同：0
> 
> 时间：2013-03-20T14:05:57.813
> 
> 标签：postgresql, char, string-length, double-precision

我在一列中有双精度类型的坐标。我想检查小数点前（小数点前）的长度（必须为 7）。数字最多可以有 4 位小数。

我的第一个想法：

```
CHECK (char_length(point_gauss::double precision::char)=... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:25:33.557

对于浮点，请记住这些是二进制浮点类型，因此十进制精度是一个有问题的概念。你的第一直觉应该是这样的：

```
 CHECK(point_gauss BETWEEN -9999.999 AND 9999.999) 
```

但是，如果您需要特定的以 10 为底的精度，最好的方法是从 double 更改为 numeric 并改用它：

```
 point_gauss NUMERIC(7,3),.... 
```

# python - 100*100 个元素的交集以及对更好数据结构的任何建议？

> ID：15525817
> 
> 赞同：1
> 
> 时间：2013-03-20T14:05:59.640
> 
> 标签：python, dictionary, bigdata

好吧，问题来了！
我创建了一个像这样的字典

```
a={'t1':[{seta1},{seta2},{seta3},{seta4}],
   't2':[{setb1},{setb2},{setb3},{setb4}],
    .
    .
    .
   't100':[{setz1},{setz2},{setz3},{setz4}]} 
```

其中 't1','t2',....,'t100' 是时间戳，{set1},{set2},{set3},{set4} 是在这些时间戳上不相交的集群集。

现在我想跨时间戳找到每个集合与其他集合的交集。即，假设

```
b={}   # is my resulting dictionary 
```

最初 b 是空的，所以 'b' 包含整个 a['t1'] 和键 't1'

```
b['t1']=a['t1'] #isn't this a deep copy? cos i replicating the values. Is there a way to achieve a shallow copy? thought of using .copy() and .update() method but couldn't figure out any possible way. 
```

随着迭代的进行，我找到交叉点并按如下方式更新结果字典。

```
k=[i&j for i in a[key1] for j in b[key2]]

#if intersections between a and b are empty sets, then i will create 'key1' in b and put the corresponding value of key1 in b
#if key1 is already present in b, then i will append the a[key1] value into b[key1] and remove the corresponding value from a[key1]

#if the intersections are found, and the length of each intersection is >2, i will do something like this
b[key2+','+key1] not in b.keys(): 
  b[key2+','+key1]=[] #b[t1,t2]=non-empty intersections whose length is >2
b[key2+','+key1]=k #where k holds the intersection and the empty sets and intersections with length one are removed before this stage 
```

假设我有每个 seta1、seta2、seta3 等。每个元素都有 100 个元素，
那么寻找交叉点不是很密集吗？(100*100) 有什么有效的方法可以轻松找到交叉点？如何降低强度？我相信我在某处读到过最坏的交叉路口情况是

```
 O(len(s)*len(t)) 
```

把它们加起来：

*   以更简单的方式找到交叉点？numpy 的 intersect1d 比这更好吗？
*   是否有更好的计算数据结构？（我认为堆是选择，但在每次插入后，堆树应该重新排列以获得“父母支配属性”。还有其他建议吗？）
*   实现从一个字典到另一个字典的特定键值对的浅拷贝。

任何帮助将不胜感激。！:) 多谢多谢！:) :)

# visual-studio-2012 - VS2012 和 SQL Server Express

> ID：15525818
> 
> 赞同：1
> 
> 时间：2013-03-20T14:06:04.017
> 
> 标签：visual-studio-2012, sql-server-2012-express, sql-server-2008-express

我了解到 VS2012 附带了一个名为 LocalDb 的 SQL Server Express 版本，它的工作方式与通常的 SQL Server Express 有点不同，后者作为服务工作。

如果我有兴趣将数据库作为服务使用，我可以同时安装 VS2012 和 SQL Server Express 2008 附带的新的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:07:16.140

我认为你有一点错误。它没有本地数据库，它带有一个内置的 GUI 来访问 SQL Server（任何版本）。您可以使用您喜欢的任何数据库（多个数据库）并使用 Visual Studio 版本的 SSMS 连接到 SQL Server。

所以，是的，你可以在你的机器上安装多个版本的 SQL Server。我目前有2005 express、2008 developer edition、2012 developer edition和express。

# ios - RestKit 0.20.0 rc1 - 使用字符串数组创建请求帖子

> ID：15525823
> 
> 赞同：0
> 
> 时间：2013-03-20T14:06:08.107
> 
> 标签：ios, ios6, request, restkit

有没有办法在请求中创建字符串数组？我确实找到了一些响应解决方案，但其中大多数是 restkit 0.10.x 或者我不理解它们。（例如[，通过 ID 数组映射 RestKit 中的关系不起作用](https://stackoverflow.com/questions/13054112/mapping-relationships-in-restkit-through-an-array-of-ids-doesnt-work)）

这是我的设置：我使用带有核心数据和托管对象的 iOS 6。我的要求应该是

```
{
 "attribute":["some text", "some more text", "and one more text"],
 "relationship":[some object data],
 "string":"some text"
} 
```

该实体称为“doRequest”。“关系”是与其他托管对象的关系，“字符串”是一个属性。我想将“属性”作为属性，但无法将“属性”设置为字符串数组。因此，“属性”是与具有属性“文本”的实体“子属性”的一对多关系。

我的休息套件映射：RKObjectMapping *subAttributeMapping = [RKObjectMapping requestMapping]; [subAttributeMapping addAttributeMappingsFromArray:@[@"text"]];

```
RKObjectMapping *doRequestMapping = [RKObjectMapping requestMapping];
[doRequestMapping addAttributeMappingsFromDictionary:@{
 @"string": @"string"}];

[doRequestMapping addRelationshipMappingWithSourceKeyPath:@"attribute" mapping:subAttributeMapping];
[doRequestMapping addRelationshipMappingWithSourceKeyPath:@"relationship" mapping:relationshipMapping];

RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:doRequestMapping objectClass:[DoRequest class] rootKeyPath:nil];

[objectManager addRequestDescriptor:requestDescriptor]; 
```

Restkit 映射如下：

```
{
 "attribute":[{"text":"some text"}, {"text":"some more text"}, {"text":"and one more text"}],
 "relationship":[some object data],
 "string":"some text"
} 
```

但这不是我需要的。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:14:48.747

因此，我通过仅使用对象而不使用核心数据来修复它。我的对象现在有一个新属性`NSArray *attributeArray`来让 restkit 创建一个字符串数组。

我的 DoRequest.h：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface DoRequest : NSManagedObject

@property (nonatomic, retain) NSString * string;
@property (nonatomic, retain) NSSet * relationship;
@property (nonatomic, retain) NSSet *attribute;
@property (nonatomic, retain) NSArray *attributeArray;
@end

@interface DoRequest (CoreDataGeneratedAccessors)

- (void)addRelationshipObject:(RelationshipReference *)value;
- (void)removeRelationshipObject:(RelationshipReference *)value;
- (void)addRelationship:(NSSet *)values;
- (void)removeRelationship:(NSSet *)values;

- (void)addAttributeObject:(NSManagedObject *)value;
- (void)removeAttributeObject:(NSManagedObject *)value;
- (void)addAttribute:(NSSet *)values;
- (void)removeAttribute:(NSSet *)values;

@end 
```

我的 DoRequest.m：

```
#import "DoRequest.h"
#import "RelationshipReference.h"
#import "Attribute.h"

@implementation DoRequest

@dynamic string;
@dynamic relationship;
@dynamic attribute;
@dynamic attributeArray;

- (NSArray *)attributeArray
{
    NSMutableArray *array = [[NSMutableArray alloc] init];

    for (Attribute.h *object in self.attribute) {
        [array addObject:object.attributeName];
    }

    return [array copy];
}

@end 
```

我的对象映射器看起来像：

```
RKObjectMapping *doRequestMapping = [RKObjectMapping requestMapping];
[doRequestMapping addAttributeMappingsFromDictionary:@{
 @"string": @"string",
 @"attributeArray": @"attribute"}];

[doRequestMapping addRelationshipMappingWithSourceKeyPath:@"relationship" mapping:[self relationshipReferenceObjectMapping]];

RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:doRequestMapping objectClass:[DoQueryRequest class] rootKeyPath:nil];

[objectManager addRequestDescriptor:requestDescriptor]; 
```

# openstack - 是否可以使用 keystoneclient 在 OpenStack 中获取用户关联的租户列表？

> ID：15525827
> 
> 赞同：3
> 
> 时间：2013-03-20T14:06:16.720
> 
> 标签：openstack, keystone

有人知道获取用户租户列表的方法吗？我知道我可以获取租户的用户，并且可以获取所有租户的列表，因此从技术上讲，我可以遍历所有租户并查找特定用户，但这似乎是一种繁琐的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-22T08:57:40.277

不知道 keystone-client 但可以使用 keystone API 的第 3 版：

> > 获取 /v3/users/['USER_ID']/projects

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T01:11:01.460

使用 user3067622 的建议，从 Keystone 获取我的 Auth Token 后，以下语法有效：

```
curl -v http://your.cloud.com:35357/v3/users/<user_UUID>/projects -X GET \
-H 'Content-type: application/json' \
-H 'Accept: application/json' \
-H "X-Auth-Token: 27427040f887440c80ed6a697b294c47" | python -m json.tool | grep name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T01:03:46.583

这不是由 CLI 或 API 实现的。您可以列出**令牌**可以访问的所有租户，但不能按用户 ID 列出租户。

Keystone 将用户与租户和**角色**相关联。所以基本上我们应该能够列出用户的所有角色，从而获得所有租户。但在实践中，您不能：

Keystone 客户端确实有一个`user-role-list`子命令，但`tenant-id`它是强制性的，如以下示例所示：

```
$ keystone --token <...> --endpoint http://<...> user-role-list
'Client' object has no attribute 'auth_tenant_id'

$ keystone --token <...> --endpoint http://<...> user-role-list --user-id 0ab2b35d609d4994aa3100b13bcf9cb8
'Client' object has no attribute 'auth_tenant_id'

$ keystone --token <...> --endpoint http://<...> user-role-list --user-id 0ab2b35d609d4994aa3100b13bcf9cb8 --tenant-id 74ece217e4f543c5bd1387786fd9173c
+----------------------------------+-------+----------------------------------+----------------------------------+
|                id                |  name |             user_id              |            tenant_id             |
+----------------------------------+-------+----------------------------------+----------------------------------+
| 3ddf15ce213e4fa08f4d5769db4ee30b | admin | 0ab2b35d609d4994aa3100b13bcf9cb8 | 74ece217e4f543c5bd1387786fd9173c |
+----------------------------------+-------+----------------------------------+----------------------------------+ 
```

Rest API 也是如此：

/users/{user_id}/roles 在端口 35357 上返回 HTTP 501（在端口 5000 上返回 HTTP 404）：

```
$ curl -H "X-Auth-Token:..." http://localhost:35357/v2.0/users/aa1a4faf337544f8a29eb033fa895eef/roles | jq '.'
{
  "error": {
    "title": "Not Implemented",
    "code": 501,
    "message": "User roles not supported: tenant ID required"
  }
} 
```

如果您指定租户 ID，则它可以工作：

```
$ curl -H "X-Auth-Token:..." http://localhost:35357/v2.0/tenants/8e0c523848e645be829c779bb9307290/users/aa1a4faf337544f8a29eb033fa895eef/roles | jq '.'
{
  "roles": [
    {
      "id": "9fe2ff9ee4384b1894a90878d3e92bab",
      "name": "_member_",
      "description": "Default role for project membership",
      "enabled": "True"
    },
    {
      "name": "admin",
      "id": "3ddf15ce213e4fa08f4d5769db4ee30b"
    }
  ]
} 
```

出于完整性目的，您可以使用 Rest API通过**令牌**获取租户：

```
$ curl -H "X-Auth-Token:<token here>" http://localhost:5000/v2.0/tenants/ | jq '.'
{
  "tenants": [
    {
      "name": "Altair",
      "id": "51b8b30d4e574899b8fef6d819fda389",
      "enabled": true,
      "description": ""
    },
    {
      "name": "Aldebaran",
      "id": "92b1315b07f44afdaec920a868685b28",
      "enabled": true,
      "description": ""
    }
  ],
  "tenants_links": []
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-20T22:30:49.043

并不真地。但是您可以直接从 keystone API 中获取。

例子：

```
 from keystoneclient.v2_0 import client
    from keystoneclient.v2_0 import tokens

    # keystone = client.Client(username=username, password=password, tenant_name=tenant_name, auth_url=auth_url)
    keystone = client.Client(username=username, password=password, auth_url=auth_url)
    token = keystone.auth_token
    headers = {'X-Auth-Token': token }
    tenant_url = auth_url
    tenant_url += '/tenants'
    r = requests.get(tenant_url, headers=headers)
    tenants_raw = r.raw.read(900000)
    tenant_data = json.loads(tenants_raw)
    success = 0 
```

# java - 如何在休眠中使用 Enum 注释 EnumMap 作为值？

> ID：15525828
> 
> 赞同：3
> 
> 时间：2013-03-20T14:06:22.413
> 
> 标签：java, enums, hashmap, hibernate-annotations

我在一个包含属性映射的类中使用 Hibernate 注释，这些属性基本上是`<name, value>`成对的。属性名称在 a 中定义`PROPERTY enum`，每个属性都有一组允许值，也定义为 a `enum`。由于每个属性都有自己`enum`定义的值，因此属性映射定义为

```
Map<PROPERTY, Enum> properties = new EnumMap<PROPERTY, Enum> (PROPERTY.class); 
```

我在映射`Enum`值时遇到问题。这个定义：

```
@ElementCollection
@MapKeyEnumerated(EnumType.STRING)
@MapKeyColumn(name="name")
@Column(name="value")
@Enumerated(EnumType.STRING)
Map<PROPERTY, Enum> properties = new EnumMap<PROPERTY, Enum> (PROPERTY.class); 
```

生成以下 DDL：

```
create table EnumMapTest (
    id bigint not null auto_increment,
    primary key (id)
) ENGINE=InnoDB;

create table EnumMapTest_properties (
    EnumMapTest_id bigint not null,
    value tinyblob,
    name varchar(255) not null,
    primary key (EnumMapTest_id, name)
) ENGINE=InnoDB; 
```

如您所见， Enum 类被映射为`tinyblob`，这在数据库中是完全不可读的。

如果我用混凝土定义地图`enum`

```
enum VALUE {ONE, TWO, THREE};

@ElementCollection
@MapKeyEnumerated(EnumType.STRING)
@MapKeyColumn(name="name")
@Column(name="value")
@Enumerated(EnumType.STRING)
Map<PROPERTY, VALUE> properties = new EnumMap<PROPERTY, VALUE> (PROPERTY.class); 
```

映射很好：

```
create table EnumMapTest_properties (
    EnumMapTest_id bigint not null,
    value varchar(255),
    name varchar(255) not null,
    primary key (EnumMapTest_id, name)
) ENGINE=InnoDB; 
```

所以问题是`Enum`类本身的映射。

有没有办法在不创建自定义类型的情况下将 Enum 映射到可读的东西（最好是字符串）？

我希望我们仍处于 Hibernate 3.6.10 的事实不会对我们不利。

TIA 提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:19:11.927

如果你没有指定任何类型，hibernate 会使用序列化来保存它。这就是为什么它会生成一个 tinyblob。

在您的情况下，我建议您制作一个字符串 Map ( `Map<PROPERTY, String>`)，因为您只使用 Enum 值。您必须手动将枚举转换为字符串（枚举类名称和枚举名称的组合），但它是可读的。

# php - php中的gzcompress和gzuncompress

> ID：15525830
> 
> 赞同：0
> 
> 时间：2013-03-20T14:06:25.487
> 
> 标签：php

我使用`gzcompress()`在 php 中传递的值，例如：

```
$value=gzcompress("hello");

myphp.php?q=$value; 
```

然后我`gzuncompress()`在`myphp.php`：

```
$q=$_GET["q"];
gzuncompress($q); 
```

但我收到这个警告：

```
gzuncompress(): data error 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:10:04.503

您需要 urlencode() 压缩数据。您不能简单地将本质上看起来随机的二进制垃圾放入这样的 url。压缩数据中至少有一个字符是 URL 元字符的可能性很高**，**例如`+`，在解码时会被破坏为`' '`（空格）字符。所以，

```
$value = urlencode(gzcompress('hello')); 
```

PHP 会在填充 $_GET 时自动为你做 url 解码，所以解码端会很简单

```
$q = gzuncompress($_GET['q']) 
```

和以前一样。

# javascript - 电子邮件的 Google App Script MailApp.sendEmail() 配额或时间限制？

> ID：15525836
> 
> 赞同：0
> 
> 时间：2013-03-20T14:06:44.473
> 
> 标签：javascript, google-apps-script

我正在编写基于 Google 表单提交结果的代码，该代码可以通过电子邮件向 1 到 15 个不同的电子邮件地址发送表单提交的结果。

我遇到的问题是 - 只有我的电子邮件队列中的第一封电子邮件正在发送。我不知道其他人会发生什么——如果他们失败了，他们就会完全默默地失败，但他们肯定不会出现在他们应该出现的人的收件箱中。

下面是一些相关代码：这是向电子邮件地址字符串数组中的每个人发送个性化电子邮件的循环

```
// sendArray is an array of email strings
// receiptArray is an array of recipient email address strings
while(sendArray.length != 0) {
    MailApp.sendEmail(receiptArray.pop(), "Subject line", sendArray.pop());
} 
```

正如标题所暗示的那样，我认为电子邮件发送之间存在一些配额或定义的时间限制，我不知道，但我在 Google 的文档中找不到任何痕迹。有什么想法可以让我获得不仅仅是发送的第一封电子邮件吗？

**澄清**

我还没有尝试过另一种类型的循环，但我正在使用 getRemainingDailyQuota 查看我的配额，它只是为我发送的一封电子邮件“收费”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:48:24.907

配额[显示在这里](https://docs.google.com/macros/dashboard)，我不确定你是否达到了限制，我有一个脚本可以在一次运行中发送大量邮件（超过 800 封）而不会出现问题。

您是否尝试过另一种类型的循环？内容是`sendQueue`什么？它是否在您的脚本中的其他地方进行了修改？

# python - 压缩 json 以存储在 redis 或 memcache 等基于内存的存储中的最佳方法是哪种？

> ID：15525837
> 
> 赞同：22
> 
> 时间：2013-03-20T14:06:46.753
> 
> 标签：python, json, redis, msgpack

要求：具有 2-3 级嵌套的 Python 对象，其中包含整数、字符串、列表和字典等基本数据类型。（没有日期等），需要在 redis 中针对密钥存储为 json。将 json 压缩为字符串以降低内存占用的最佳方法是什么。目标对象不是很大，平均有 1000 个小元素，转换为 JSON 后大约有 15000 个字符。

例如。

```
>>> my_dict
{'details': {'1': {'age': 13, 'name': 'dhruv'}, '2': {'age': 15, 'name': 'Matt'}}, 'members': ['1', '2']}
>>> json.dumps(my_dict)
'{"details": {"1": {"age": 13, "name": "dhruv"}, "2": {"age": 15, "name": "Matt"}}, "members": ["1", "2"]}'
### SOME BASIC COMPACTION ###
>>> json.dumps(my_dict, separators=(',',':'))
'{"details":{"1":{"age":13,"name":"dhruv"},"2":{"age":15,"name":"Matt"}},"members":["1","2"]}' 
```

1/有没有其他更好的方法来压缩json以节省redis中的内存（也确保之后的轻量级解码）。

2/ msgpack [http://msgpack.org/] 的候选人有多好？

3/ 我也应该考虑泡菜之类的选择吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T16:34:26.497

我们只是`gzip`用作压缩机。

```
import gzip
import cStringIO

def decompressStringToFile(value, outputFile):
  """
  decompress the given string value (which must be valid compressed gzip
  data) and write the result in the given open file.
  """
  stream = cStringIO.StringIO(value)
  decompressor = gzip.GzipFile(fileobj=stream, mode='r')
  while True:  # until EOF
    chunk = decompressor.read(8192)
    if not chunk:
      decompressor.close()
      outputFile.close()
      return 
    outputFile.write(chunk)

def compressFileToString(inputFile):
  """
  read the given open file, compress the data and return it as string.
  """
  stream = cStringIO.StringIO()
  compressor = gzip.GzipFile(fileobj=stream, mode='w')
  while True:  # until EOF
    chunk = inputFile.read(8192)
    if not chunk:  # EOF?
      compressor.close()
      return stream.getvalue()
    compressor.write(chunk) 
```

如您所想，在我们的用例中，我们将结果存储为文件。要仅使用内存中的字符串，您也可以使用`cStringIO.StringIO()`对象作为文件的替换。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-08-26T21:31:40.200

根据上面@Alfe 的[回答](https://stackoverflow.com/a/15529390/4794841)，这是一个将内容保存在内存中的版本（用于网络 I/O 任务）。我还进行了一些更改以支持 Python 3。

```
import gzip
from io import StringIO, BytesIO

def decompressBytesToString(inputBytes):
  """
  decompress the given byte array (which must be valid 
  compressed gzip data) and return the decoded text (utf-8).
  """
  bio = BytesIO()
  stream = BytesIO(inputBytes)
  decompressor = gzip.GzipFile(fileobj=stream, mode='r')
  while True:  # until EOF
    chunk = decompressor.read(8192)
    if not chunk:
      decompressor.close()
      bio.seek(0)
      return bio.read().decode("utf-8")
    bio.write(chunk)
  return None

def compressStringToBytes(inputString):
  """
  read the given string, encode it in utf-8,
  compress the data and return it as a byte array.
  """
  bio = BytesIO()
  bio.write(inputString.encode("utf-8"))
  bio.seek(0)
  stream = BytesIO()
  compressor = gzip.GzipFile(fileobj=stream, mode='w')
  while True:  # until EOF
    chunk = bio.read(8192)
    if not chunk:  # EOF?
      compressor.close()
      return stream.getvalue()
    compressor.write(chunk) 
```

要测试压缩尝试：

```
inputString="asdf" * 1000
len(inputString)
len(compressStringToBytes(inputString))
decompressBytesToString(compressStringToBytes(inputString)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-09T19:24:32.193

我在不同的二进制格式（MessagePack、BSON、Ion、Smile CBOR）和压缩算法（Brotli、Gzip、XZ、Zstandard、bzip2）之间做了一些广泛的比较。

对于我用于测试的 JSON 数据，将数据保留为 JSON 并使用 Brotli 压缩是最好的解决方案。Brotli 具有不同的压缩级别，因此如果您要长时间保留数据，那么使用高级别压缩是值得的。如果您不坚持很长时间，那么较低级别的压缩或使用 Zstandard 可能是最有效的。

Gzip 很简单，但几乎可以肯定会有更快的替代方案，或提供更好的压缩，或两者兼而有之。

您可以在此处阅读我们调查的全部详细信息：[博客文章](https://www.lucidchart.com/techblog/2019/12/06/json-compression-alternative-binary-formats-and-compression-methods/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-06T11:23:04.620

如果您希望它更快，[请尝试 lz4](https://github.com/lz4/lz4)。如果您希望它更好地压缩，[请选择 lzma](https://docs.python.org/3/library/lzma.html)。

> 有没有其他更好的方法来压缩 json 以节省 redis 中的内存（也确保之后的轻量级解码）？
> 
> [msgpack [ http://msgpack.org/]](http://msgpack.org/])的候选人有多好？

Msgpack 速度相对较快，内存占用也较小。但是[ujson](https://pypi.python.org/pypi/ujson)通常对我来说更快。您应该在数据上比较它们，测量压缩和解压缩率以及压缩率。

> 我也应该考虑泡菜之类的选择吗？

考虑泡菜（特别是cPickle）和元帅。他们很快。但请记住，它们不安全或可扩展，您需要为速度付出额外的责任。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-21T09:50:35.390

一种简单的“后处理”方法是构建一个“短键名”映射并在存储之前通过该映射运行生成的 json，并在反序列化为对象之前再次（反转）。例如：

```
Before: {"details":{"1":{"age":13,"name":"dhruv"},"2":{"age":15,"name":"Matt"}},"members":["1","2"]}
Map: details:d, age:a, name:n, members:m
Result: {"d":{"1":{"a":13,"n":"dhruv"},"2":{"a":15,"n":"Matt"}},"m":["1","2"]} 
```

只需通过json并在通往数据库的路上替换key->value，在通往应用程序的路上替换value->key。

您还可以 gzip 以获得额外的好处（但在那之后不会是字符串）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:10:39.620

另一种可能性是使用 MongoDB 的存储格式[BSON](http://bsonspec.org/)。

您可以在该站点的实现页面中找到两个 python 实现。

编辑：为什么不保存字典，并在检索时转换为 json？

# python - 如何在 Python 中递归尝试不同的 SSH 密码？

> ID：15525838
> 
> 赞同：3
> 
> 时间：2013-03-20T14:06:46.963
> 
> 标签：python

我们在这里为测试服务器使用了多组预定义密码——我想尝试一个可移植的 Python SSH 库（如下面的一个——spur.py）并让它连续尝试每一个——但是当它成功连接时显然会停止或者如果它不能 - 向我询问密码。我正在对我认为的异常处理进行某种递归。

```
def ssh_connection(user, host):
    try:
        shell = spur.SshShell(
            hostname=host,
            port=findport(host),
            username=user,
            password="abc123",
            private_key_file= expanduser("~") + "/.ssh/id_rsa",
            missing_host_key=spur.ssh.MissingHostKey.accept
            )
        shell.run(["true"])
        return shell
    except spur.ssh.ConnectionError as error:
        print error
        raise 
```

来自 Java 世界，我会检查对象是否为 null 并遍历列表直到结束，然后要求输入密码。我看不到如何在 Python 中执行此操作...这是我为列表部分找到的示例：

```
passwords = ['abc123', 'abc456',  'abc789']
for password in passwords:        # Second Example
   print 'trying password :', password 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:43:07.133

正如乔在评论中提到的，你可以做类似的事情：

```
def ssh_connection(user, host, passwords):
    err = None
    for password in passwords:
        try:
            shell = spur.SshShell(
                hostname=host,
                port=findport(host),
                username=user,
                password=password,
                private_key_file= expanduser("~") + "/.ssh/id_rsa",
                missing_host_key=spur.ssh.MissingHostKey.accept
            )
            shell.run(["true"])
            return shell
        except spur.ssh.ConnectionError as error:
            err = error
    if err:
        raise error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:18:20.163

我上面的评论被破坏了，所以这里是 @Joe Doherty 建议与 Ifthikan 的代码一起使用 - 谢谢！

```
def loop_ssh_connection(user, host):
        shell = None
        passw = ['abc123', 'abc456',  'abc789']
        while shell is None:
            shell = ssh_connection(user, host, passw)
        result = shell.run(["ls", "-l"])
        print result.output # prints ouput

def ssh_connection(user, host, passw):
    err = None
    for password in passw:
        try:
            shell = spur.SshShell(
                hostname=host,
                port=findport(host),
                username=user,
                password=password,
                private_key_file= expanduser("~") + "/.ssh/id_rsa",
                missing_host_key=spur.ssh.MissingHostKey.accept
            )
            shell.run(["true"])
            return shell
        except spur.ssh.ConnectionError as error:
            err = error
    if err:
        raise error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:54:44.860

我会把它分成两个不同的功能：

```
def ssh_connection(user, host, password):
    """
    try to connect to user:password@host
    return None if failed
    """

    try:
        shell = spur.SshShell(
            hostname=host,
            port=findport(host),
            username=user,
            password=password,
            private_key_file=expanduser("~") + "/.ssh/id_rsa",
            missing_host_key=spur.ssh.MissingHostKey.accept
            )
        shell.run(["true"])
        return shell
    except spur.ssh.ConnectionError as error:
        print error
        return

def try_connection(user, host, passwords):
    """
    try all password in passwords to connect to host
    if all failed, ask for password via stdin
    """
    for password in passwords:
        conn = ssh_connection(user, host, password)
        if not conn is None:
            break
    else:
        # we never hit the break: ask for passwd
        password = ""
        while conn is None:
            print "please insert password for %s@%s (empty for exit)" % (user,host)
            password = raw_input("passwd:") # todo : insert Term seq for hide passwd and then restor
            if password == "":
                sys.exit(1)
            conn = ssh_connection(user, host, password)
    return conn 
```

# google-maps - google maps API v3，标记图标有透明填充，我如何定位它计算这个填充？

> ID：15525848
> 
> 赞同：1
> 
> 时间：2013-03-20T14:07:19.500
> 
> 标签：google-maps, google-maps-api-3

我为谷歌地图使用自定义标记图标。我的问题很简单，我准备的透明 png 在底部有额外的 23px 空白空间 - 这是为一些 Photoshop 发光效果完成的，但实际的标记点从底部 23px 开始。

我如何考虑到这一点，以便标记落在正确的位置？我需要像 margin-bottom:-23px; 这样的东西 但使用 javascript。

困难的方法是以 latlong 度量计算 23px，而不是调整标记位置。但这会非常丑陋...

有任何想法吗？

到目前为止，我有这个：

```
var marker_icon = new google.maps.MarkerImage('<?php echo get_bloginfo("template_url"); ?>/images/marker.png', new google.maps.Point(10,10));
                                var marker = new google.maps.Marker({
                                  position: latlngPos,
                                  map: map,
                                  icon: marker_icon
                                }); 
```

但是由于我将 icon: 更改为变量，所以我再也看不到标记了。控制台什么也没告诉我。

图片是这样的：

![在此处输入图像描述](../Images/596b1e4256bfc35eb5ef6a7896b90c17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:19:05.680

请参阅有关如何定义[自定义图标的文档](https://developers.google.com/maps/documentation/javascript/reference#Icon)

> 锚| 点 | 与地图上标记的位置相对应的锚定图像的位置。默认情况下，锚点位于图像底部的中心点。
> 
> 网址 | 字符串 | 图片或精灵表的 URL。google.maps.MarkerShape 对象规范

它是从图像的左上角 (0, 0) 计算的。但是你没有提供尺寸。

[开发人员指南（示例）](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)

你的图片是 59px × 72px 所以我认为锚点应该是 72-23: new google.maps.Point(30,49);

```
var marker_icon = {
   url: <your url>,
   size: new google.maps.Size(59,72),
   origin: new google.maps.Point(0,0),
   anchor: new google.maps.Point(30,49)
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:59:58.353

解决方案是这样做：

```
var marker_icon = {
                                      url: '<?php echo get_bloginfo("template_url"); ?>/images/marker.png',
                                      size: new google.maps.Size(59,72),
                                      origin: new google.maps.Point(0,0),
                                      anchor: new google.maps.Point(29,58)
                                    }; 
```

感谢 geocodezip 的指导。

# c# - Azure git 部署在引用的 .config 文件上失败

> ID：15525849
> 
> 赞同：1
> 
> 时间：2013-03-20T14:07:26.153
> 
> 标签：c#, asp.net-mvc, git, azure

我正在尝试使用 git 将一个简单的 mvc 4 项目部署到 windows azure。如果我直接发布它就可以了。问题基本上出在我的 web.config 文件中，我引用 MailSettings.config 文件来发送电子邮件，如下所示：

```
<system.net>
  <mailSettings>
    <smtp configSource="MailSettings.config"/>
  </mailSettings>
</system.net> 
```

我忽略了 git 存储库中的 MailSettings.config 文件，因为它包含敏感信息。因此，找不到该文件是有道理的，我需要以其他方式提供它。我得到的具体错误是：

```
Copying file MailSettings.config to C:\DWASFiles\Sites\testsite\Temp\05e169ef-8e7e-4246-9197-373cf66c3575\MailSettings.config failed. Could not find file 'MailSettings.config' 
```

有没有一种简单的方法来处理这种情况？我可以通过 FTP 单独上传文件，但是如何在 azure 中设置 git 部署以跳过文件？git 部署是一个不错的功能。我很感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:20:21.457

如果该文件不在您的 git 存储库中，您需要从您的 csproj 文件中删除对它的引用，否则它将无法构建。然后，您可以通过 FTP 将文件上传到 wwwroot 文件夹中，以便在运行时使用。

# ios - 使用 CCCrypt 解密返回缓冲区长度错误的 kCCSuccess

> ID：15525855
> 
> 赞同：5
> 
> 时间：2013-03-20T14:07:42.103
> 
> 标签：ios, encryption, commoncrypto

我有一个加密的数据流（AES 128、CBC、PKCS7），我试图在它到达时对其进行解密。有时我会收到一个长度为 334 的数据包，然后我会尝试对其进行解密。当我在 iPhone 5 上执行此操作时，它会返回`kCCBufferTooSmall`（对于非 mod 16 数据来说这是预期的）。但是，当我在 iPhone 3GS 上使用相同的东西时，它会返回`kCCSuccess`并给我一个部分解密的流（它给我的 333 的最后十个字节左右是伪造的 - 空终止符和随机数据）。

两台设备都是 iOS 6.1.2。该应用程序使用设置为最新 SDK (6.1) 的基本 SDK 构建，部署目标为 iOS 5.0。

我创建了以下测试用例，它也出现了这个问题：

```
+ (void)decryptionTest {
    NSData *data = [NSMutableData dataWithLength:334]; // 334 % 16 = 14
    NSData *key = [NSMutableData dataWithLength:kCCKeySizeAES128];
    NSData *iv = [NSMutableData dataWithLength:kCCBlockSizeAES128];
    size_t outLength = 0;
    NSMutableData *cipherData = [NSMutableData dataWithLength:data.length];

    CCCryptorStatus result = CCCrypt(kCCDecrypt,
                                     kCCAlgorithmAES128,
                                     kCCOptionPKCS7Padding,
                                     key.bytes,
                                     key.length,
                                     iv.bytes,
                                     data.bytes,
                                     data.length,
                                     cipherData.mutableBytes,
                                     cipherData.length,
                                     &outLength);

    NSLog(@"result = %d", result);
} 
```

为什么我`kCCSuccess`会因为不匹配块大小而失败？

# c++ - 在 luabind 中返回指向派生对象的指针时出现泄漏或“未注册的类”问题

> ID：15525861
> 
> 赞同：1
> 
> 时间：2013-03-20T14:07:54.630
> 
> 标签：c++, smart-pointers, luabind

我通过 luabind 将我的应用程序的内部暴露给 Lua，在 C++ 中我有`Container`一个`shared_ptr<Item>`抽象`Item`基类。派生类包括`ItemA`和`ItemB`。

为了将这些暴露给 luabind，我使用了几个包装类（因为我希望 Container 在脚本界面中具有不同的编辑机制）。我希望能够在 Lua 脚本中枚举容器中的项目，如下所示：

```
container=app.container
for i,event in ipairs(container.items) do 
  print(tostring(event))
end 
```

我遇到的问题是我可以通过返回原始指针来公开此功能`ItemWrappers`，但这会导致内存泄漏，因为`ItemWrapper`从未调用析构函数。如果我尝试将 luabind 中的包装器声明为[文档中描述的](http://www.rasterbar.com/products/luabind/docs.html#smart-pointers)智能指针，那么当我尝试将智能指针作为 lua 对象返回时，这会引发**“尝试使用未注册的类”异常。**

包装器定义如下：

```
class ContainerWrapper {
public:
   ContainerWrapper(Container& c) : container(c) {};
   Container&  c;  // reference to the actual container
};

class ItemWrapper {
public:
  virtual ~ItemWrapper() {};
  ItemWrapper(int itemIndex_) : itemIndex(itemIndex_) {};
  int   itemIndex;  // items are addressed by index
};

class ItemAWrapper : public ItemWrapper {
public:
  ItemAWrapper(int itemIndex_) : ItemWrapper(itemIndex_) {};
}; 
```

luabind 注册看起来像这样：（如果我不使用智能指针）

```
class_<ItemWrapper>("Item") ,
class_<ItemAWrapper, ItemWrapper>("ItemA") 
```

如果我这样做，就像这样：

```
class_<ItemWrapper, std::tr1::shared_ptr<ItemWrapper> >("Item") ,
class_<ItemAWrapper, ItemWrapper, std::tr1::shared_ptr<ItemWrapper> >("ItemA") 
```

暴露`items`成员的函数`Container`返回一个 lua 表：

```
luabind::object Container::getItemsAsTable(lua_State* L)
{
  luabind::object table=luabind::newtable(L);
  for (int i=0; i<items.size(); i++) {
    table[i+1]= new ItemAWrapper(); // or function to return pointer/smart pointer
  }
  return table;
 } 
```

这是在表中设置值的正确方法吗？如果我传递一个智能指针，它是生成异常的赋值，但是如果我传递一个原始指针，那么它似乎没有在内部将它分配给一个智能指针并且对象被泄露。进行垃圾收集也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:28:59.767

Lua 已经是多态的了。所以你的`getItemsAsTable`函数不需要`new`这些`ItemWrapper`对象。只要坚持价值观。像这样：`table[i+1] = ItemAWrapper()`。除非有什么事情*需要*使用指针（比如更改 Lua 表应该反映在 C++ 中），否则不要打扰。只需使用一个值。

# iphone - UIScrollView + UIPageControl + UIButton

> ID：15525864
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:08:00.517
> 
> 标签：iphone, ios, uiview, uiscrollview, uipagecontrol

你如何制作像割绳子游戏一样的菜单。下图：

![在此处输入图像描述](../Images/36fef8ea22624c1d04b0853f5fdda159.png)

我能够使三个图像水平滑动，但未能将其作为按钮。虽然我不需要它像游戏一样花哨，但只是一个简单的按钮。

我是否需要在 UIScrollView 中使用其各自的按钮堆叠三个不同的视图？我倾向于以编程方式进行。

代码： http: [//pastebin.com/ikrJ1U7w](http://pastebin.com/ikrJ1U7w)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:39:06.523

它实际上是一个`UIScrollView`包含`UIButton`自定义类型并且上面有图像的内容。下面是`UIPageIndicator`.

您可以按如下方式创建它，但也可以搜索

*   如何以`UIButton`编程方式创建以添加到滚动视图

在您的视图控制器中，

在`viewDidLoad`scrollView 中添加按钮。

```
 UIScrollView *scrollView = // initalize & set frame as per ur req
    scrollView.userInteractionEnabled = YES;
    scrollView.pagingEnabled = YES;

    float x = 0.0;
    float y = 0.0, width = 320.0;

    float height;

    for (int j = 0; j <= numberofpagesYouwant; j++)
    {
        CGRect frame;

        UIButton *button = // Create a button at here;

        frame = CGRectMake(x, y, width, height); // Use this as your button frame

        [scrollView addSubview:button];

        [button release];

        x = x + width;
    }

     scrollView.contentSize = CGSizeMake(numberOfPagesYouHave * 320, heightOfYourScrollView);
}

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;

    if(page != activityIndicator.currentPage)
    {
        NSLog(@"now page change:%d",page);
        [self changePageIndicator:page];   
    }
}

-(void)changePageIndicator:(int)index
{
    activityIndicator.currentPage = index;
}

- (void)setNumberOfPages:(int)numPages1
{
    activityIndicator.numberOfPages = numPages1;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T14:10:10.333

是的，我很确定这只是放置在某种滚动视图之上的几个按钮。（很可能以编程方式完成）。

# html - 不要将 CSS 样式应用于子元素

> ID：15525867
> 
> 赞同：6
> 
> 时间：2013-03-20T14:08:11.370
> 
> 标签：html, css, css-selectors

我们有

```
<div class="xTable">
 <table>
  <tr>
   <td>
    <div class="xTable">
     <table>
      <tr>
       <td>
        <div class="xTable">
         <table>...</table>
        </div>
       </td>
      </tr>
     </table>    
    </div>
   </td>
  </tr>
 </table>
</div> 
```

如何将自定义 css 样式应用于**2nd div**，仅应用于 2nd div 而不是 1 或 3 或更深？

没有办法添加额外的类或 IDS！Html 是动态生成的，无法管理。

我会用

```
.xTable table .xTable 
```

但这意味着第三个和更深的 div 将受到影响。

没有身份证！请仅使用 CSS 选择器。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:20:17.800

为了完全满足此默认标记和*正确*添加`tbody`尚未指定的浏览器的浏览器，您需要使用：

```
body > .xTable > table > tr > td > .xTable,
body > .xTable > table > tbody > tr > td > .xTable {
    ...
} 
```

[JSFiddle 示例](http://jsfiddle.net/H6dpe/)。

这假设您的第一个`<div class="xTable">`没有其他父母`<body>`。如果不是这种情况，请替换`body`为您的父母。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:18:26.970

使用`:not`选择器排除父级然后拥有一长串子组合器可能会完成这项工作：

```
:not(table) > .xTable > table > tr > td > .xTable 
```

不过，您可能需要将隐式 tbody 元素混入其中。

一个更好的解决方案可能是：

```
.xTable .xTable {
    foo: bar;
}

.xTable .xTable .xTable {
    foo: Whatever it would have been if the previous selector didn't match
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T14:10:54.503

我可能只会给第二个 div 一个额外的 css 类。

`<div class="xTable second-xTable-div"></div>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:19:08.237

那么这不只是：

```
body > .xTable table tr td.xTable {STYLES} 
```

？？？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T14:19:44.807

正如您所说，您不能添加@Rob 提供的类名，那么我认为只有一种方法可以使用 javascript 或 jquery。下面我提供了使用 jQuery 的解决方案。

```
$('.xTable:eq(1)').css('backgroundColor','green'); //Selects the second .xTable class div 
```

[在这里](http://api.jquery.com/eq-selector/)查看更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:16:07.820

When you use `someelement someotherelement` it is not important how much deep you go in the first element. But you can add a `>` between them to select only the `someotherelement` that is exactly the child of `someelement` like this: `someelement > someotherelement` and it will not select childs of childs of the first selector.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T14:17:19.457

推荐课堂组合。例如`<div class="table level-2" />`

# windows-phone-8 - 使用 Windows Phone 工具包 DatePicker 控件的自定义日期选取器控件中的问题

> ID：15525869
> 
> 赞同：1
> 
> 时间：2013-03-20T14:08:18.467
> 
> 标签：windows-phone-8

我设计了一个自定义日期选择器控件，使用`Toolkit Datepicker Control`.

我现在有一个要求：

我想在控件中设置显示`date start`和设置`displayenddate` ，但在工具包日期选择器中找不到任何属性来输入此类日期时间范围，

谁能知道如何在我的自定义控件中实现这一点？

# jquery - 如何使用 jQuery 切换两个跨度？

> ID：15525875
> 
> 赞同：0
> 
> 时间：2013-03-20T14:08:29.700
> 
> 标签：jquery, html

我有 11 个 dt 由我无法访问的 php 脚本生成。下面的例子。

```
<dt>
<span class="Required FormFieldRequired" style="visibility: visible">*</span> 
    <span class="FormFieldLabel">Email Address:</span>
</dt> 
```

我需要必需的跨度及其所有内容来*遵循*FormFieldLabel 跨度。必需的跨度文本永远不会改变，标签内容会改变。

`$('span.FormFieldLabel').insertBefore( 'span.Required.FormFieldRequired' );`不起作用，它会重复所有内容并弄乱表格。

阅读建议使用 text() 函数，但不建议我应该如何应用它。

我基本上想把'A before B'变成'B before A'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:14:28.157

我假设您有多个`dt`要执行此操作的位置。所以你需要这样做：

```
$('span.FormFieldLabel').each(function() {
    $(this).insertBefore( $(this).closest('dt').find('span.Required.FormFieldRequired') );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:15:15.120

这个怎么样：

```
$('span.FormFieldLabel').each(function() {
  $(this).insertBefore($(this).prev());
}); 
```

[演示](http://jsfiddle.net/VUhsu/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:12:51.537

Does this get you what you want?

```
$('.Required').remove().insertAfter('.FormFieldLabel') 
```

Live example: [http://jsfiddle.net/V6HQb/](http://jsfiddle.net/V6HQb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:13:00.340

```
var html = '<span class="Required FormFieldRequired" style="visibility: visible">*      </span>';
$("Required").remove();
$(dt).append(html); 
```

# php - SQLite PDO :memory: 将数据库保存到文件

> ID：15525877
> 
> 赞同：4
> 
> 时间：2013-03-20T14:08:33.577
> 
> 标签：php, file, sqlite, memory, pdo

我正在以这种方式在 PHP 数据库中使用 SQLite：

```
$db = new PDO('sqlite:products.sqlite'); 
```

我要做很多 INSERT 查询，但看起来这些操作会稍微减慢这个过程。我知道我可以将数据库存储在内存中：

```
$dbmem = new PDO('sqlite::memory:'); 
```

但在该过程结束时，我想将 db 存储在磁盘上。我找不到办法做到这一点。这可能吗？如何？谢谢

# notifications - TeamCity 7.1 Jabber 通知未送达收件人

> ID：15525878
> 
> 赞同：1
> 
> 时间：2013-03-20T14:08:34.800
> 
> 标签：notifications, xmpp, teamcity

我正在尝试让 TeamCity v7.1 通过 Jabber 通知我有关构建事件的信息。我在工作的服务器上安装了 TeamCity，并且在我的台式机上设置了 OpenFire XMPP 服务器。为了完成这幅图，我在桌面上运行了一个 Pidgin 客户端来监听消息。

我已经将 TeamCity 配置为通过我称为“teamcity”的 OpenFire 用户连接到 OpenFire 服务器，当我“测试连接”时，我被告知连接正常。当我测试我发送给我称为“pidgin”的 OpenFire 用户的连接时。

问题是从 TeamCity 发送的 Jabber 消息永远不会到达“pidgin”用户。TeamCity 没有给出任何问题的迹象，我在 TC 通知日志中也没有看到任何问题的迹象。几乎没有任何来自构建事件的通知传递给“pidgin”用户的方式（相当有信心我已经正确设置了 Jabber 通知规则）。

知道为什么会这样或者我接下来应该尝试什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:25:22.360

我很确定我已经通过在 TeamCity 中指定“完整”XMPP 用户名解决了我的问题。在我的示例中：pidgin@urisopenfire（其中 uriopenfire 是我的 OpenFire 服务器实例的名称）。

当我在测试连接时以及在我的 TC 项目的 Jabber 通知程序设置中使用此完整表单时，我确实收到了来自 TeamCity 的通知进入我的 Pidgin 客户端。

奇怪的是，在 TeamCity 的全局 Jabber 通知设置中设置“teamcity”用户时不需要这个完整的表单。

# python - 使用 Python 和 PyKML 修改地图图层

> ID：15525880
> 
> 赞同：3
> 
> 时间：2013-03-20T14:08:39.200
> 
> 标签：python, scapy, google-earth, pykml

我正在开始我的第一个主要 Python/Python Scapy 项目，我需要一些指导。我找到了 PyKML 和 Google Earth COM API 之类的资源，但我不知道哪个最适合实现我的想法......

我基本上想通过使用外部 Python 脚本来修改 Google 地球中 KML 中的点。我想要的最终状态是在 Google 地球上显示更改的实时流式传输源。我的程序的流程/周期就像......

***加载具有多个点的 Google 地球 KML

数据由我的 Python 脚本接收，Python 脚本会更改点的可见性值，Google 地球会显示打开和关闭的点

***冲洗并重复...

我想这样做，而不必每次进行更改时都重新打开 KML，我希望它的效果是实时更新的。有点像我电脑上本地的实时提要。

我的问题是：PyKML 有能力做到这一点还是我完全偏离了轨道？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:43:45.020

PyKML 可以帮助您做到这一点。它允许您创建任意 KML 文档，因此您可以弄清楚如何在 KML 中执行的任何操作都可以使用 PyKML 自动化。以下是有关如何解决此问题的一些想法：

1.  使用 Python 脚本、PyKML 和 cron 作业定期刷新存储在 Web 服务器上的静态 KML 文件。使用[KML 网络链接](https://developers.google.com/kml/documentation/kml_tut#network_links)元素让 Google 地球定期（例如每 5 秒）重新加载 KML 文件内容。
2.  如果您有很多内容，但其中很少发生变化，请实施[KML 更新方法](https://developers.google.com/kml/documentation/updates)来增量修改数据。

# performance - 许多其他 if 语句，这会减慢网站速度吗？

> ID：15525882
> 
> 赞同：0
> 
> 时间：2013-03-20T14:08:42.650
> 
> 标签：performance, if-statement

```
<?php if (in_category('44')) : ?>
//case
<?php elseif (in_category('26')) : ?>
//case
+50 elseif and case
<?php else : ?>
//case
<?php endif; ?> 
```

我还有大约 50 个其他如果声明为我的类别拉不同的横幅，其中大约 50 个很好，或者这会导致什么？我不能创建不同的单个帖子模板，因为我有大约 1k 个帖子，我不能再手动编辑它们了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:22:32.027

首先，确保 in_category 是最优的。例如，如果这会进行复杂的查找，请查看是否可以执行一次。之后，一系列级联的 else..if 不会比 case 语句更糟糕。通过对案例进行排序来优化它，使最可能的案例位于顶部，最不可能的案例位于底部。然后，如果某些测试比其他测试更昂贵，请将最昂贵的测试放在底部。如果这些目标相互冲突，请尽力而为。

# forms - knockout.js 选择元素绑定在后续表单提交中失去价值

> ID：15525884
> 
> 赞同：0
> 
> 时间：2013-03-20T14:08:49.890
> 
> 标签：forms, select, knockout.js, viewmodel, element

我有一个从 JSON 调用中填充的淘汰视图模型。在表单中的选择元素中，我有一组选项（也来自视图模型）和值，部分`observableArray`. 问题仅在于 select 元素，而不在于 input 元素——提交表单时，只有在 select 中分配的值包含正确的值。因此，从 JSON 成功加载并以表单形式呈现但保持不变的那些将作为选项数组中的第一个值发送回服务器。

HTML 表单：

```
<form>
    <table >
        <thead>
            ...
        </thead>
        <tbody data-bind='foreach: ScaledCostEntries'>
            <tr>
                <td><input data-bind='value: StartDateString' class="startdate" type="text"/></td>
                <td><select data-bind='value: InvoiceType, options: $root.InvoiceTypes'></select></td>                    
                <td><a href='#' data-bind='click: $root.removeCost'>Delete</a></td>
            </tr>
        </tbody>

    </table>
    <button data-bind='click: addCost'>Add New Row</button>
    <button data-bind='click: save' >Update</button>
</form> 
```

在上面的这段代码中，问题在于 InvoiceType，它是 viewmodels `ScaledCostEntries`observableArray 的一部分。（此外，如果我交换值和选项的顺序，则不会在选择元素中放置选定的值）。

和JS：

```
<script type="text/javascript">
    $(function () {
        var scaledCostModel = function () {
            var self = this;

            self.ScaledCostEntries = ko.observableArray([]);
            self.InvoiceTypes = ko.observableArray([]);

            self.addCost = function () {
                self.ScaledCostEntries.push({                    
                    StartDateString: ko.observable(),
                    InvoiceType: ko.observable()
                });
            };

            self.removeCost = function (cost) {
                cost.IsDeleted = true;
                self.ScaledCostEntries.destroy(cost);
            };

            self.save = function (form) {
                jQuery.ajax({
                    url: '@Request.Url.PathAndQuery',
                    type: "POST",
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    data: ko.toJSON(self.ScaledCostEntries)                    
                });
            };
        };

        jQuery.getJSON('@Request.Url.PathAndQuery', function (data) {
            ko.mapping.fromJS(data, {}, viewModel);
        });

        var viewModel = new scaledCostModel();

        ko.applyBindings(viewModel);
    });
</script> 
```

因此，总而言之，问题在于 viewmodel 的属性绑定到选择元素。When the select is left unchanged (not reselected), the viewmodel will have it's value as the first item from the options ( `InvoiceTypes`) array, when posting to server. 最后，我可能忘记了一些微不足道的事情，这是我第一次更认真的 knockout.js 尝试。

注意：`InvoiceType`是 的一部分`ScaledCostEntries`，即`observableArray`. `InvoiceTypes`是`observableArray`。`InvoiceTypes`和,都`ScaledCostEntries`来自 JSON 并被`ScaledCostEntries`发回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:37:00.983

我的假设是，这是由于`ScaledCostEntries`表单提交时服务器上的处理方式所致。

我之前遇到过这个问题（跨各种服务器端框架），当时我有一个主模型，其中包含正在添加和删除的依赖模型列表，并且针对主模型完成了表单提交以更新所有内容。

问题是在表单提交过程中，当请求中的值被映射到服务器端模型时，空白值被认为是“没有变化”而不是“删除这个”。这适用于直接在模型上的属性，但不适用于依赖模型的列表。

我发现有几种方法可以解决这个问题：使用 Ajax 删除底层模型并在视图中按下“删除”或“删除”按钮时更新与主模型的关系；或者每次都显式发送整个模型列表，并为每个表单提交显式删除并重建服务器上的列表。每种方法都适用于不同的情况，并且可能还有其他方法也可以很好地工作。

# android - 如何防止片段在活动重新创建时触发 onCreate&onCreateView

> ID：15525887
> 
> 赞同：3
> 
> 时间：2013-03-20T14:09:04.317
> 
> 标签：android, android-fragments, android-activity, android-lifecycle, activity-lifecycle

所以我有活动 A、B、C 应用流程是 A->B->C

A,B 与登录功能相关联，仅启动一次即可登录。整个应用程序位于 C Activity 中。当用户使用 C 时，A、B 还活着。一切正常。

现在..

我杀死了应用程序的PID。然后从任务管理器中选择它。

A 未启动，B 未启动，C->onCreate(not null) 触发。

我可以通过检查是否存在 A 或 B 的实例来检测这种情况。所以现在我知道这种特殊情况已经发生，我想重新启动应用程序 -> 到活动 A，所以它是一个全新的启动。

问题是在 onCraete(not null) 中重新启动应用程序

在活动 CI 中的 onCreate(not null) 中执行以下操作：

```
if (A==null or B==null)
finish;
return; 
```

然后在活动 B 中也是如此。这有效，C 和 B 完成，A 弹出..但与此同时......

在调用 C onDestroy 之前触发片段 onCreate && onCreateView。因为我在活动 C 中有很多片段，所以这会导致应用程序崩溃。

所以，我的问题是。在这种情况下，有没有办法在活动 C onCreate （非空）（甚至在 C onCreate; 清单之外？）中强制应用程序重新启动，以便不调用片段 onCreate 和 onCreateView？

PS：我已经在清单中尝试了 clearTaskonLaunch ，但是即使我只是暂停/恢复屏幕，这也会强制应用程序重新启动。

任何的意见都将会有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-12T20:31:11.360

我有一个非常相似的场景。似乎向`null`基类发送值可以`OnCreate`防止片段重新加载。这是我的基本 Activity 类的代码片段（它在 C# Xamarin.Android 中，但很简单易懂）：

```
 protected override void OnCreate(Bundle savedInstanceState)
    {
        if (IsInvalidAppState()) {
            GoToLoginActivity();
            base.OnCreate(null);
        } else {
            base.OnCreate(savedInstanceState);
        }
    }

    private void GoToLoginActivity()
    {
        var intent = new Intent(Application.Context, typeof(LoginActivity));
        intent.SetFlags(ActivityFlags.ClearTop | ActivityFlags.NewTask | ActivityFlags.ClearTask);
        StartActivity(intent);
    }

    private bool IsInvalidAppState()
    {
        // Figure out if everything is initialized correctly
    } 
```

# php - 根据另一个字段获得一个字段的不同mysql结果

> ID：15525892
> 
> 赞同：1
> 
> 时间：2013-03-20T14:09:16.470
> 
> 标签：php, mysql, distinct

我有这个代码：

```
select count(distinct affiliate_orders_id) as count
, sum(affiliate_value) as total
, sum(affiliate_payment) as payment 
from " . TABLE_AFFILIATE_SALES . " a 
    left join " . TABLE_ORDERS . " o on (a.affiliate_orders_id = o.orders_id)
where a.affiliate_orders_id = o.orders_id 
and o.orders_status >= " . AFFILIATE_PAYMENT_ORDER_MIN_STATUS . "
        ";

  $affiliate_sales_query= tep_db_query($affiliate_sales_raw);
  $affiliate_sales= tep_db_fetch_array($affiliate_sales_query); 
```

因此，$affiliate_sales['total'] = 128000 实际上应该是 32000，因为有多个affiliate_values 和affiliate_orders_id。affilaite_values 一些具有相同的值，因此它们不能不同。affilaite_orders_id 具有所有唯一值，但有多个行并且需要不同。然后，affiliate_values 必须根据affiliate_orders_id 的不同行求和以获得准确的总和。

我正在尝试获取所有affiliate_values 的总和，以确定表中有多少不同的affiliate_orders_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:33:53.900

根据您的更新，我认为这将为您提供所需的内容。您需要使用子查询

```
SELECT COUNT(a) COUNT, SUM(av) total, SUM(ap) aptotal
FROM (
    SELECT affiliate_orders_id a, affiliate_value av, SUM(affiliate_payment) AS ap
from " . TABLE_AFFILIATE_SALES . " a 
    left join " . TABLE_ORDERS . " o on (a.affiliate_orders_id = o.orders_id
    GROUP BY affiliate_orders_id, affiliate_value)
where a.affiliate_orders_id = o.orders_id 
and o.orders_status >= " . AFFILIATE_PAYMENT_ORDER_MIN_STATUS . ") a 
```

现在这导致了一个更大的问题。您是否缺少表中的连接条件？通常，您不应该在查询中返回重复的日期，因此我建议您首先仔细检查您的查询是否正确加入。

# javascript - Onblur 阻塞

ID：15525895

赞同：0

时间：2013-03-20T14:09:22.447

标签：javascript, onclick, onblur

# ios - RaptureXML 解析某个 rss 提要时出现问题

> ID：15525916
> 
> 赞同：0
> 
> 时间：2013-03-20T14:10:13.430
> 
> 标签：ios, xml, xcode, xml-parsing, string-parsing

我正在尝试解析一个流行的德国新闻网站（[taz.de](http://www.taz.de/!p3270;rss/)）的某个 rss 提要。不幸的是，他们的描述标签不仅包含纯文本，还包含任何内容，包括图片、链接等。

```
<description>
    <![CDATA[<a href="http://www.taz.de/10-Jahre-nach-dem-Irakkrieg/!113046/"><img align="left" style="margin-right:5px;" src="/uploads/images/152x76/18032013_Bush_Irakkrieg_rtr.jpg" border="0" width="152" height="76" /></a>Das Land ist von einem funktionierenden Rechtsstaat weit entfernt. Zehn Jahre nach dem Irakkrieg zeigt sich eine niederschmetternde Bilanz. <a href="http://www.taz.de/10-Jahre-nach-dem-Irakkrieg/!113046/">mehr...</a>]]>
</description> 
```

我唯一感兴趣的是文本`Das Land ist von einem funktionierenden Rechtsstaat weit entfernt. Zehn Jahre nach dem Irakkrieg zeigt sich eine niederschmetternde Bilanz.`我将如何以有效的方式做到这一点（没有可怕的字符串操作）？由于没有属性名称，我想我搞砸了？我正在使用 RaptureXML，但如果有更好的库来解决这个问题，我会切换 xml 解析器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:03:17.547

恐怕比这更糟：“CDATA”部分意味着描述（模周围的空格）是**文字字符串**

```
<a href="http://www.taz.de/10-Jahre-nach-dem-Irakkrieg/!113046/"><img align="left" style="margin-right:5px;" src="/uploads/images/152x76/18032013_Bush_Irakkrieg_rtr.jpg" border="0" width="152" height="76" /></a>Das Land ist von einem funktionierenden Rechtsstaat weit entfernt. Zehn Jahre nach dem Irakkrieg zeigt sich eine niederschmetternde Bilanz. <a href="http://www.taz.de/10-Jahre-nach-dem-Irakkrieg/!113046/">mehr...</a> 
```

即你的片段相当于

```
<description>
    &lt;a href="http://www.taz.de/10-Jahre-nach-dem-Irakkrieg/!113046/"&gt;&lt;img align="left" style="margin-right:5px;" src="/uploads/images/152x76/18032013_Bush_Irakkrieg_rtr.jpg" border="0" width="152" height="76" /&gt;&lt;/a&gt;Das Land ist von einem funktionierenden Rechtsstaat weit entfernt. Zehn Jahre nach dem Irakkrieg zeigt sich eine niederschmetternde Bilanz. &lt;a href="http://www.taz.de/10-Jahre-nach-dem-Irakkrieg/!113046/"&gt;mehr...&lt;/a&gt;
</description> 
```

符合标准的 XML 解析器**无法**为您提供您正在寻找的文本。你有两个选择：

*   将字符串包装在 eg 中`<foo>...</foo>`，将*其*传递给 XML 解析器，然后提取根元素的所有文本子元素。
*   将字符串包装成类似 的`<html><title></title><body>...</body></html>`内容，通过 HTML 解析器（或任何 tag-soup-du-jour 解析器）传递，然后提取 body 元素的所有文本子元素。

我想知道如果描述包含 taz.de 是否会中断`]]>`...

# php - php, mysql - 将结果组合成多维关联数组

> ID：15525920
> 
> 赞同：2
> 
> 时间：2013-03-20T14:10:25.427
> 
> 标签：php, mysql, arrays, multidimensional-array, associative-array

我有以下 MySQL 数据库：

```
 | id         | sessionId   | time                |
    |------------|-------------|---------------------|
    | 54         |           4 | 2013-03-23 09:00:00 |
    | 55         |           4 | 2013-03-23 09:15:00 |
    | 56         |           5 | 2013-04-20 01:00:00 |
    | 57         |           5 | 2013-04-20 15:15:00 |
    | 58         |           5 | 2013-04-20 19:15:00 | 
```

我试图这样返回一个数组：

```
 Array
    (
        [0] => Array
            (
                [sessionId] => 4
                [time] => Array
                    (
                        [0] => 2013-03-23 09:00:00
                        [1] => 2013-03-23 09:15:00
                    )

            )

        [1] => Array
            (
                [sessionId] => 5
                [time] => Array
                    (
                        [0] => 2013-04-20 01:00:00
                        [1] => 2013-04-20 15:15:00
                        [2] => 2013-04-20 19:15:00
                    )

            )

    ) 
```

到目前为止运行此查询

```
 $result = mysql_query("SELECT * FROM `Exercise_Lists_New` WHERE `patientId` = 381");
    $row = mysql_fetch_assoc($result);
    while($row = mysql_fetch_array($result)){
        $sessionIds[] = array("sessionId" =>$row['sessionId'], "time" => array($row['time']));
    }
    print_r($sessionIds,true); 
```

给我以下

```
 Array
        (
            [0] => Array
                (
                    [sessionId] => 4
                    [time] => Array
                        (
                            [0] => 2013-03-23 09:00:00
                        )

                )

            [1] => Array
                (
                    [sessionId] => 4
                    [time] => Array
                        (
                            [0] => 2013-03-23 09:15:00
                        )

                )

            [2] => Array
                (
                    [sessionId] => 5
                    [time] => Array
                        (
                            [0] => 2013-04-20 01:00:00
                        )

                )

            [3] => Array
                (
                    [sessionId] => 5
                    [time] => Array
                        (
                            [0] => 2013-04-20 15:15:00
                        )

                )

            [4] => Array
                (
                    [sessionId] => 5
                    [time] => Array
                        (
                            [0] => 2013-04-20 19:15:00
                        )

                )

        ) 
```

所以我想将所有共享相同“sessionId”的“时间”组合在一起。使用 php.ini 执行此操作的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:12:19.277

```
SELECT
    sessionId,
    GROUP_CONCAT(time) AS `Times`
FROM mytable
GROUP BY    sessionId 
```

您可以为此使用 mysql 的 group_concat。这将为您提供逗号分隔字段的结果，您可以使用 php 展开该字段以获取数组。

输出 ：

```
| sessionId   | time                                                           |
|-------------|--------------------------------------------------------------- |
|           4 | 2013-03-23 09:00:00 , 2013-03-23 09:15:00                      |
|           5 | 2013-04-20 01:00:00 , 2013-04-20 15:15:00 , 2013-04-20 19:15:00| 
```

编辑：

```
$query  =   "   SELECT
                    sessionId,
                    GROUP_CONCAT(time) AS `Times`
                FROM mytable
                GROUP BY    sessionId";

$result = mysqli_query($query);
$row = mysqli_fetch_assoc($result);
$result_array   =   array();
$i=0;
while($row = mysql_fetch_array($result)){
    $result_array[$i]['sessionId']  = $row['sessionId'];
    $result_array[$i]['time']       = explode(',',$row['Times']);
    $i++;
}
print_r($result_array,true); 
```

结果

```
Array
    (
        [0] => Array
            (
                [sessionId] => 4
                [time] => Array
                    (
                        [0] => 2013-03-23 09:00:00
                        [1] => 2013-03-23 09:15:00
                    )

            )
        [1] => Array
            (
                [sessionId] => 5
                [time] => Array
                    (
                        [0] => 2013-04-20 01:00:00
                        [1] => 2013-04-20 15:15:00
                        [2] => 2013-04-20 19:15:00
                    )

            )
    ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:14:30.837

只需尝试：

```
while($row = mysql_fetch_array($result)){
    if ( !isset($sessionIds[$row['sessionId']]) ) {
        $sessionIds[$row['sessionId']] = array(
            'sessionId' => $row['sessionId'],
            'time'      => array()
        );
    }
    $sessionIds[$row['sessionId']]['time'][] = $row['time'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:12:56.313

从该数组中剥离一层，并使用 sessionID 作为键，例如

```
$sessionIDs = array();
while($row = mysql_fetch_array($result)){
    $sessionIds[$row['sessionID']][] = $row['time'];
} 
```

这会给你类似的东西：

```
$arr = array(
     'id' => array(time1, time2, time3, ...),
     'id' => arraY(...)
     etc..
); 
```

请注意，您在代码中丢失了一行，因为您在循环外进行调用，然后立即用 foreach 循环中的 fetch 调用`fetch()`覆盖它。`$row`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:16:07.780

试试这个

```
<?php

$result = mysql_query("SELECT * FROM `Exercise_Lists_New` WHERE `patientId` = 381");
$row = mysql_fetch_assoc($result);
while($row = mysql_fetch_array($result)){    
    $sessionIds[$row['sessionId']]['sessionId'] = $row['sessionId'];
    $sessionIds[$row['sessionId']]['time'][] = $row['time'];
}

print_r($sessionIds):

Array
   (
       [4] => Array
           (
               [sessionId] => 4
               [time] => Array
                   (
                       [0] => 2013-03-23 09:00:00
                       [1] => 2013-03-23 09:15:00
                   )

           )

       [5] => Array
           (
               [sessionId] => 5
               [time] => Array
                   (
                       [0] => 2013-04-20 01:00:00
                       [1] => 2013-04-20 15:15:00
                       [2] => 2013-04-20 19:15:00
                   )
           )

   ) 
```

# excel - 删除 Worksheet_Change 中的行时出现运行时错误

> ID：15525922
> 
> 赞同：1
> 
> 时间：2013-03-20T14:10:28.200
> 
> 标签：excel, vba

我对这段代码有疑问：

```
Private Sub Worksheet_Change(ByVal Target As Range)
     If Target Is Nothing Then Exit Sub
     MsgBox Target.Value 
End Sub 
```

在我向某个单元格输入文本后，我会看到一个消息框，但是如果我尝试删除刚刚输入文本的行，则会收到错误消息：

> 运行时错误“13”：类型不匹配

我该如何解决这个错误？为什么条件没有抓住它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:26:08.097

结果，当您删除行时，整行都是`target`您的过程中的对象。因此，您的宏无法返回该行的值。

程序员通常做的是在您的消息框之前检查的附加条件：

```
If Target.Count =1 Then
    'your messagebox here
End If 
```

# javascript - 为什么我不能从 2 个函数内部调用该函数？

> ID：15525926
> 
> 赞同：0
> 
> 时间：2013-03-20T14:10:48.607
> 
> 标签：javascript, jquery, function

[这](http://jsfiddle.net/P87q3/)是我的代码：

```
inserisciMarker();

function scorriAllaLista(param) {
    alert(param);
}

function inserisciMarker() {
    markerClick = function () {
        $('#example').attr("onclick", "scorriAllaLista('hello'); return false;");
    };

    markerClick();
} 
```

点击链接，`Uncaught ReferenceError: scorriAllaLista is not defined`

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T14:11:56.450

这不是使用 jQuery 绑定事件处理程序的方式。

代替

```
$('#example').attr("onclick", "scorriAllaLista('hello'); return false;"); 
```

和

```
$('#example').click(function(){
    scorriAllaLista('hello');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:26:14.723

如果你真的必须这样做，你可以将方法添加到全局`window`对象中，类似于这样：

```
window.scorriAllaLista = function(param) {
    alert(param);
} 
```

* * *

[**DEMO**](http://jsfiddle.net/UUHNS/) - 添加方法到`window`

* * *

正如您已经在使用的那样`return false`，您可能会摆脱已经停止传播并阻止默认行为的情况。`href="#"``return false;`

# class - CKEditor 类被剥离

> ID：15525930
> 
> 赞同：1
> 
> 时间：2013-03-20T14:10:54.633
> 
> 标签：class, ckeditor

我有一个自定义插件，它添加了一个附加类的链接。当我使用 Source 按钮查看它时，它会显示该类并看起来应该如此。但是，当我返回 WYSYWIG 视图然后再次查看源代码时，该类已被删除。

知道如何阻止这种情况发生吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:26:24.443

检查[这篇博文](http://ckeditor.com/blog/Integrating-Plugins-with-Advanced-Content-Filter)。

在 CKEditor 4.1 RC 中，我们引入了 ACF - 高级内容过滤器。您需要将您的插件与其集成，否则由它创建的特殊内容将被剥离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T17:22:03.733

对于 CKEditor4 和简单`config.js`修改，禁用“默认过滤器”：请参阅[这个新问题/答案](https://stackoverflow.com/q/18386864/287948)。

* * *

（复制）

在`config.js`你可以添加类似的东西，

```
 CKEDITOR.config.allowedContent=true; 
```

请参阅“高级内容过滤器”（[ACF](http://ckeditor.com/blog/CKEditor-4.1-Released)）以及[如何启用/禁用它](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-allowedContent)。

# asp.net-mvc - ASP.NET MVC：无需指定操作即可生成 url 的 Html 助手

> ID：15525935
> 
> 赞同：1
> 
> 时间：2013-03-20T14:11:07.513
> 
> 标签：asp.net-mvc, url

*ASP.NET MVC 中有没有一种方法可以在不*指定操作的情况下生成带有 Html.helper 的 url （从而将其路由到默认操作）？

基本上我想要一个输出 {lang}/controller 的 url，即：~/EN/Home

但是 MVC 中的每个 html-helper 似乎都需要指定特定的控制器操作，甚至

```
<a href="@Url.Action(null, @Resources.Home">Click here</a> 
```

输出 EN/Home/PartialViewName 而不仅仅是 EN/Home.... （我在部分视图上生成它）

更新 1：

显然，“索引”动作没有出现在生成的网址中，即：

```
@Html.ActionLink("Click here", "Index", @Resources.Home) 
```

输出 /EN/Home

但是如果要添加参数，不幸的是问题仍然存在。以下非输出正确的 url（即 EN/Home/3）

```
@Html.ActionLink("Click here", "Index", @Resources.Home, new { id = home.Id }, null)

<a href="@Url.Action(null, @Resources.Home)/@home.Id">Click here</a> 
```

更新 2：

现在像这样解决它：

```
@Html.ActionLink("Click here", "Index", string.Format(Resources.Home + "/" + home.Id)) 
```

但这不能是解决此问题的唯一/正确解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T10:39:08.820

像下面这样为 home/{id} 添加路由怎么样？

> ```
>  routes.MapRoute(
>             name: "HomeID",
>             url: "home/{id}",
>             defaults: new { controller = "Home", action = "Index", id = 0 }); 
> ```

然后，当您创建 URL 时，它将为您提供 /home/32（如果生成的 ID 为 32）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T10:52:50.680

如何创建您自己的帮助程序来生成您想要的 URL。它甚至可以是对 URL.Action 的 mvc 实现的简单调用，然后将操作名称替换为您想要的名称。

# python - 我怎样才能团结起来只找到一次我的单一测试方法？

> ID：15525936
> 
> 赞同：1
> 
> 时间：2013-03-20T14:11:07.777
> 
> 标签：python, unit-testing

我有一个具有以下双重继承的python unitest 脚本`TestCase`：

```
import unittest
class Upper(unittest.TestCase):
    def test_dummy(self):
        pass

class Lower(Upper):
    pass

if __name__ == '__main__':
   unittest.main() 
```

这个想法是定义一个具有测试方法实现的上层类，并从这个类（在不同的子目录中）派生，其中包含一些额外的设置功能。最后，有一个衍生出`upper.py`许多不同的东西。`test_lower.py`测试方法仅在`upper.py`.

鉴于上面的示例，我现在 `python test_example.py`只看到 python 正在尝试运行 2 个测试！该脚本只包含一个测试，那么为什么 unittest 执行两个测试呢？

我假设 unittest`Lower`以某种方式在其中找到一个测试并在其中找到一个测试`Upper`，但我只想执行在其中找到的测试`Lower`（因为附加和必需的设置功能）。我怎样才能做到这一点？

**上下文**在实际情况下，这两个类定义在两个不同的文件中，位于两个目录中。也许这有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:15:48.673

Unittest 库遍历 TestCase 子类属性，查找以`test_`. 在`Lower`测试用例的情况下，它从其父级继承一个方法，因此它被执行两次——一次在`Upper`测试用例内，第二次在`Lower`类内。如果两个测试用例都打算运行，我看到的唯一解决方案是对`test_dummy`另一个子类进行取出测试`Upper`

如果您希望在父类中运行测试，但在其某些子类中跳过，请尝试以下操作：

```
import unittest
class Upper(unittest.TestCase):
    def test_dummy(self):
        pass

class Lower(Upper):
    def test_dummy(self):
        return  # skip test

    @unittest.skip  # or this - but ugly
    def test_dummy(self):
        return  # skip test

if __name__ == '__main__':
   unittest.main() 
```

更新：

我想现在我明白了你想要什么：你希望测试方法只在子类中运行。然后我建议您继承`Upper`from`object`和子类 - from`Upper`和`TestCase`：

```
import unittest

class Upper(object):

    def test_dummy(self):
        self.assertTrue(True)

class Lower(unittest.TestCase, Upper):

    pass

if __name__ == '__main__':
    unittest.main() 
```

跑步：

```
python test2.py -v
test_dummy (__main__.Lower) ... ok

----------------------------------------------------------------------
Ran 1 test in 0.000s

OK 
```

# c++ - 如何从嵌套的 STL 容器中删除

> ID：15525940
> 
> 赞同：0
> 
> 时间：2013-03-20T14:11:14.893
> 
> 标签：c++, memory, memory-leaks

这是为了家庭作业。我的程序运行正常，但我无法摆脱内存泄漏。

我有一个类对象。

我有一个类 objectPtr，它有一个指向对象类的指针。

我有...

```
typedef set<objectPtr> ObjectSet; 
```

我的对象是这样存储的：

```
map<string, ObjectSet*>    myMap; 
```

当我尝试遍历数据结构时，删除对象（这就是我认为我正在做的事情......）我导致我的代码崩溃。

```
for(map<string, ObjectSet*>::const_iterator it = myMap.begin(); it != myMap.end(); ++it) {
    for(ObjectSet::const_iterator e = it->second->begin(); e != it->second->end(); ++e)  
        delete e->getPtr();
} 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:02:47.223

您可以在`objectPtr`. 一般概念是为类定义一个析构函数，该析构函数`objectPtr`在存储的指针上调用 delete `object`。然后，您只需要围绕地图进行一个循环即可删除指向`ObjectSet`. 因为`objectPtr`存储为实例（而不是指向实例的指针），所以它的析构函数将在被销毁时自动调用`ObjectSet`。

此外，因为您在 for 循环中调用 delete，所以您可能需要非常量前向迭代器。

这是一个例子：

```
class object
{
   // ... interface details ...
};

class objectPtr
{
public:
   objectPtr(object* p) :
      ptr(p)
   {}

   ~objectPtr()
   {
      if (ptr)
         delete ptr;
   }

public:
   // ... interface details ...

private:
   object* ptr;
};

typedef set<objectPtr> ObjectSet;

map< string, ObjectSet* > myMap;

for(map< string, ObjectSet* >::iterator it = myMap.begin(); it != myMap.end(); ++it)
{
   ObjectSet* setPtr = it->second;
   if (setPtr)
      delete setPtr; // ObjectSet will call 'delete' for each instance of 
                     // objectPtr, which through RAII, will automatically
                     // delete the referenced instance of object
} 
```

# c++ - 在圆上查找点

> ID：15525941
> 
> 赞同：4
> 
> 时间：2013-03-20T14:11:19.837
> 
> 标签：c++, algorithm, geometry

我们正在用 C++ 编码，有半个圆圈，从某个点开始（例如`(0,-310)`）并在某个点结束`(0,310)`。我们有半径，我们有方程`X^2 + Y^2 = r^2`。现在我们正在尝试计算这个圆线上的一些（比如 10+）点。

因此，我们试图创建一个增量来计算这些点之间的 Y/X 值，使用上面显示的等式来确保计算的所有点都在圆的线上。

一旦我们有了这些点，我们就会尝试将它们放入几个复杂的方程中，以计算要绘制此形状的机器人手臂的角度。这并不是真正的优先事项，但我认为我应该在问题中包含我们的总体目标。

如何创建一个增量来计算我们两个起点之间的半圆线上的所有坐标？
然后将这些值代入上面代码中的方程，计算机械臂的角度。在不单独计算每个点的情况下寻找一种方法，即创建一个可以一次性完成的增量。

[这](http://imagehost.spark-media.ru/i4/22F8BA8E-744C-E120-0A89-F8E7AD5376A7.png)就是我们的目标，以粗体计算点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:19:11.277

圆的点可以使用以下公式确定：

```
x = radius * cos(angle)  
y = radius * sin(angle) 
```

您必须确定要绘制的圆的部分、部分或圆弧，并确定起始角度和结束角度。

否则，请在 SO 和网络上搜索“arc drawing algorithm c++”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:17:09.843

点需要均匀分布吗？如果没有，那么您可以直接使用您的公式：

```
// assume half-circle centered at (0,0) and radius=310
double r = 310.0;
int n = 10;
for( int i=0; i<n; i++ )
{
   double x = i*r/n;
   double y = sqrt( r*r - x*x );
   // both (x,y) and (x,-y) are points on the half-circle
} 
```

一旦这个工作正常，您还可以使用 x 值的分布来近似圆周围的均匀间距。

如果你的圆没有以中心为中心，`(0,0)`那么只需偏移`(x,y)`由实际中心计算的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:20:20.277

您可以通过将方程式更改为 Theta （角度）来做到这一点：
**X = X0 + Cos(Theta)*r
Y = Y0 + Sin(Theta)*r**
而在您的情况下为 (X0,Y0) = ( 0,0), r = 310 和 Theta 范围在 -180 - 180 之间（如果你的 cos 和 sin 以度为单位）或 -Phi - Phi 之间（如果 cos 和 sin 以半径为单位）。

现在，如果您想要 10 点，您需要获取您的 Theta 范围，并将其拆分为 10 并为每个值计算 X、Y。

# java - Glassfish Server 3.1.2 不是从 Netbeans 7.3 开始的

> ID：15525943
> 
> 赞同：0
> 
> 时间：2013-03-20T14:11:20.770
> 
> 标签：java, netbeans, glassfish

我是 Java EE 的新手，并试图让 Webapp 的容器安全管理器工作。

我正在使用：

GlassFish 3.1.2 Netbeans 7.3 Windows 8

在我的 GlassFish 管理控制台上检查安全管理器后，我无法再启动 GlassFish 服务器。

我总是得到这个：

```
access denied ("java.lang.RuntimePermission" "getenv.GlassFish_Platform"). 
```

但是，我可以从控制台启动它。当我这样做时，我可以看到管理控制台并且我的 jdbcRealm 不再存在。

我尝试按照其他一些问题中的说明在 domain.xml 中找到要删除的 jvm 选项，但我没有设置它。

我确实尝试以管理员身份运行 Netbeans，但也没有运气......

任何提示任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:59:43.460

解决了 Netbeans 将 Glassfish 安装在一个文件夹中，但在另一个路径上创建了自己的配置文件夹。

C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1\config\domain.xml

我正在编辑该文件，但我需要的是：

C:\Users\Andres\AppData\Roaming\NetBeans\7.3\config\GF3\domain1\config\domain.xm‌​l

所以删除了安全 jvm 选项，现在它又可以工作了！

# angularjs - 页面冻结和 $resource

> ID：15525950
> 
> 赞同：1
> 
> 时间：2013-03-20T14:11:41.507
> 
> 标签：angularjs

因此，当我的页面加载时，angular 会调用一个服务来填充三个数组。此服务使用 $resource 从后端获取数据 (JSON)。问题是，当数据正在加载时，整个页面会冻结一秒钟并且微调器是静态的。我的理解是 $resource 和 $http 都是异步的，当它们处于活动状态时页面不应该冻结。我已经尝试过本文建议的承诺模式方法，[但](http://www.benlesh.com/2013/02/angularjs-creating-service-with-http.html)没有运气。有什么建议吗？提前致谢！

**编辑：**添加代码

```
mobiModule.factory('DataSrv', function($q, $http) {
    return {
        getData: function(url) {
            var defered = $q.defer();

            //make the call
            $http.get(url).success(function(data){
                console.dir(data);
                defered.resolve(data);
            }).error(function(){
                console.log('HTTP error');
                defered.reject();
            });

            return defered.promise;
        }
    }
});   

$scope.phones = Phones.query(); //using $resource('phones.json') 
```

或者

```
$scope.phones = DataSrv.getData('phones.json'); //using the service defined above 
```

# sql - 如何使用 Like 运算符参数化查询

> ID：15525952
> 
> 赞同：0
> 
> 时间：2013-03-20T14:11:42.240
> 
> 标签：sql, sql-server-2008, tsql

我正在尝试使用以下查询检索一些数据，并且我想对其进行参数化。

```
select Col A,Col B,Col C,Col D
From TableA
where (COL A like '01%' or COL A like '02%') 
```

我正在使用以下查询，但没有得到输出。

```
declare @p1 varchar ='01%',
        @p2 varchar ='02%'
select Col A,Col B,Col C,Col D
From TableA
where (COL A like @p1 or COL A like @p2) 
```

请建议如何使用 sql server 2008r2 参数化上述查询的更好方法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:16:25.027

The problem is that you did not specify a length for your parameters, and they are being resolved as `varchar(1)`. You could see this with debugging 101, e.g.

```
DECLARE @p1 VARCHAR = '01%';
SELECT p1 = @p1, lenp1 = DATALENGTH(@p1); 
```

Result:

```
p1   lenp1
---- -----
0    1 
```

Try:

```
DECLARE @p1 VARCHAR(32) = '01%',
        @p2 VARCHAR(32) = '02%';
... 
```

Please be explicit instead of lazy. Also use semi-colons to terminate statements.

*   [Bad habits to kick : declaring VARCHAR without (length)](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)
*   [Ladies and gentlemen, start your semi-colons!](https://sqlblog.org/2009/09/03/ladies-and-gentlemen-start-your-semi-colons)

# sql - SQL 和 VB.NET：使用文本框中的数据进行 SELECT 查询

> ID：15525955
> 
> 赞同：2
> 
> 时间：2013-03-20T14:11:46.560
> 
> 标签：sql, vb.net, radio-button

我正在尝试创建一个搜索，其中 SQL 查询取决于一个单选按钮和一个文本框。

```
SELECT * FROM [Sales] WHERE (text in radio button) = (text in textbox) 
```

我该如何实施？

下面是我的完整代码。

```
Protected Sub btnSearch_Click(sender As Object, e As ImageClickEventArgs) Handles btnSearch.Click
    If radClient.Checked = True Then
        Dim connection As New OleDb.OleDbConnection
        Dim provider As String
        Dim source As String
        provider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
        source = "Data Source=|DataDirectory|DeltaOneMDB.mdb"
        connection.ConnectionString = provider & source
        GridView1.Visible = False
        connection.Open()
        SqlDataSource3.SelectCommand = "SELECT * FROM Sales WHERE ClientID = '" & txtSearch.Text & "'"
        connection.Close()
    ElseIf radItem.Checked = True Then
        Dim connection As New OleDb.OleDbConnection
        Dim provider As String
        Dim source As String
        provider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
        source = "Data Source=|DataDirectory|DeltaOneMDB.mdb"
        connection.ConnectionString = provider & source
        GridView1.Visible = False
        connection.Open()
        SqlDataSource3.SelectCommand = "SELECT * FROM Sales WHERE ItemID = '" & txtSearch.Text & "'"
        connection.Close()
    ElseIf radUser.Checked = True Then
        Dim connection As New OleDb.OleDbConnection
        Dim provider As String
        Dim source As String
        provider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
        source = "Data Source=|DataDirectory|DeltaOneMDB.mdb"
        connection.ConnectionString = provider & source
        GridView1.Visible = False
        connection.Open()
        SqlDataSource3.SelectCommand = "SELECT * FROM Sales WHERE UserID = '" & txtSearch.Text & "'"
        connection.Close()
    ElseIf radUser.Checked = False And radClient.Checked = False And radItem.Checked = False Then
        ErrorLabel.Text = "Error: You have not chosen a search criteria."
    End If
End Sub 
```

表格、文本框和单选按钮都在同一个表单上。我正在使用 Microsoft Visual Studio 2012 for Web，并尝试更改表单上 GridView 对象的数据源。但是，我不断收到错误消息：

***ConnectionString 属性尚未初始化。***

很抱歉没有早点给出我的代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:57:41.327

查看您的代码，我看到很多不必要的行。我想给你一个例子，说明我认为你可以做些什么来简化你的代码。首先，删除 SqlDataSource 不需要的代码（我假设您已经打开了与数据库的连接，但是这可以在单击条目时完成一次。其次，在每个开关中准备要执行的命令和参数（名称和值）传递给该命令最后更新您的 SqlDataSource 并重新绑定所有内容

```
Protected Sub btnSearch_Click(sender As Object, e As ImageClickEventArgs) Handles btnSearch.Click
    Dim sqlQuery As String
    Dim prm as String
    Dim prmValue as String

    prmValue = txtSearch.Text
    If radClient.Checked = True Then
        sqlQuery = "SELECT * FROM Sales WHERE ClientID = @clientID"
        prm = "@clientID"
    ElseIf radItem.Checked = True Then
        sqlQuery = "SELECT * FROM Sales WHERE ItemID = @itemID"
        prm = "@itemID"
    ElseIf radUser.Checked = True Then
        sqlQuery = "SELECT * FROM Sales WHERE UserID = @userID"
        prm = "@userID"
    ElseIf radUser.Checked = False And radClient.Checked = False And radItem.Checked = False Then
        ErrorLabel.Text = "Error: You have not chosen a search criteria."
        return
    End If
    SqlDataSource3.SelectCommand = sqlQuery
    SqlDataSource3.SelectParameters.Add(prm, prmValue)
    SqlDataSource3.DataBind()
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:48:30.087

使用 SQLDatasource 时，您不必指定 Connections，它管理自己的连接。

你需要做的是：

1.  根据单选按钮状态更新 Select 语句
2.  调用数据源数据绑定函数`SqlDataSource3.DataBind()`

此外，更好的方法是使用允许空值的存储过程。更适合 SQL 注入（对您的数据库的威胁）

```
SELECT * FROM Sales WHERE (@ClientID IS NULL OR ClientID = @ClientID)
AND (@ItemID IS NULL OR ItemID = @ItemID )
AND (@UserIDIS NULL OR UserID= @UserID) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-11T10:01:24.307

互联网上到处都是可怕的解决方案。这可能是世界上最简单的。

```
PrintWriter out=response.getWriter();
        out.print("&lt;html>");
        out.print("&lt;body>");
        out.print("&lt;form>");
        out.print("&lt;textarea rows='5' columns='500' name='t1'>&lt;/textarea>");
        //out.print("&lt;input type='text' name='t2'>");
        //out.print("c&lt;input type='checkbox' value='c' name='t1'>");
        //out.print("d&lt;input type='checkbox' value='d' name='t1'>");
        out.print("&lt;input type='submit' value='execute' name='b1'>");
    //  out.print("&lt;input type='submit' value='show' name='b1'>");
        //out.print("&lt;input type='submit' value='query' name='b1'>");

        String a,c;
        a=request.getParameter("t1");
        //b=request.getParameter("t2");
        c=request.getParameter("b1");
        if(c!=null)
            {
            try {
                Class.forName("com.mysql.jdbc.Driver");
                Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/saransh","root","");
                Statement st=con.createStatement();

                if(a.startsWith("delete"))
                {
                    out.print("<br>");
                    out.print("delete query execution...");         

                    //st.executeUpdate("insert into student2(name,address) values('"+a+"',"+b+"')") ;
                    st.executeUpdate(a);
            }

                else if(a.startsWith("select"))
                {   out.print("<br>");
                    out.print("select query execution...");         
                    ResultSet rs=st.executeQuery(a);
                    ResultSetMetaData m1=rs.getMetaData();
                    out.print("<br>");
                    for(int i=1;i<=m1.getColumnCount();i++)
                    {String x1=m1.getColumnLabel(i);
                    out.print("   "+x1);}
                    out.print("<br>");//name of label               
                    while(rs.next())
                {   String s0=rs.getString("Stu_roll");
                    String s1=rs.getString("name");
                    String s2=rs.getString("address");

                out.print(s0+"   "+s1+"   "+s2);
                    out.print("<br>");  
                    }}

                else if(a.startsWith("insert"))
                {   out.print("<br>");
                out.print("insert query execution...");         

                    st.executeUpdate(a);
                }

                else if(a.startsWith("drop"))
                {   out.print("<br>");
                out.print("drop query execution...");           

                    st.executeUpdate(a);
                }
                } catch (Exception e) {

                out.print(e);
                // TODO: handle exception
            }
            }

        out.print("&lt;/form>");
        out.print("&lt;/body>");
        out.print("&lt;/html>"); 
```

删除注释行。唯一的问题是查询区分大小写。您可以弄清楚使用什么字符串操作使其“忽略大小写”。

# joomla - 自定义 Joomla 网址的最佳方式是什么？

> ID：15525957
> 
> 赞同：0
> 
> 时间：2013-03-20T14:11:50.147
> 
> 标签：joomla, joomla2.5, joomla-component

我有一个很大的 joomla 网站，我想将其链接自定义为尽可能 SEF。我需要每个单独的文章和自定义组件项的别名。从服务器负载和干净的 xml 生成的站点地图的角度来看，是在每个组件中使用 router.php 类还是为每个组件分配一个隐藏菜单项更好？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:25:55.707

据我了解您的问题，我想建议您使用[sh404SEF](http://extensions.joomla.org/extensions/site-management/sef/10134)。它将 Joomla URL 重写为用户友好的格式（SEF URL 或 URL 重写）：

**例如：**

`mysite.com/index.php?option=com_content&Itemid=69&id=34...`变成

`mysite.com/en/sh404SEF-and-url-rewriting/list-of-available-plugins.html`.

它也是一个安全组件。每个页面的页面标题和元标记管理器。有或没有 .htaccess 文件。Joomfish 兼容。高速缓存系统和非常小的数据库查询开销。

或者正如您所说，您也可以在每个组件中使用 router.php 类来制作 sef url。希望这会帮助你。

# arrays - Perl，模式匹配数组中的每个元素（$line）

> ID：15525958
> 
> 赞同：0
> 
> 时间：2013-03-20T14:11:50.920
> 
> 标签：arrays, perl, design-patterns, matching

我认为我有一个足够简单的问题，我最近运行了一个脚本，该脚本从数组中每个元素的字符串中提取特定信息。我以前写过这个，它运行良好，但是当现在尝试它的非常简单的版本时，它不会只提供相同的响应未初始化值参数的数据！由于我以前的代码有效，我感到非常沮丧。我显然在做一些愚蠢的事情，并希望得到一些帮助！

```
#!/usr/bin/env perl

use strict;
use warnings;

my@histone;
my$line;
my$idea;
my$file="demo_site.txt";

open(IN, "<$file")||die"\ncannot be opend\n";

@histone=<IN>;
print @histone;

foreach $line(@histone)
       {
           $line=~ m/([a-zA-Z0-9]+)\t[0-9]+\t[0-9]+\t/;

           print$1."\n";
           print$2."\n";
           print$3."\n";

       } 
```

infile "demo_site.txt" 采用制表符分隔的 .txt 文件格式：

```
chr9        1234       5678     .     200      .      14.0      -1 
```

该文件有多个如上所述的行，我希望提取前三项数据，因此输出如下所示。

```
chr9
1234
5678 
```

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:15:37.260

你真的不需要正则表达式，因为它是制表符分隔的。

```
foreach $line(@histone)
       {
           @line_data = split(/\t/,$line)

           print $line_data[0]."\n";
           print $line_data[1]."\n";
           print $line_data[2]."\n";

       } 
```

编辑：
如果要将值分配给特定的命名变量，请将其分配到临时数组中。

```
($varA, $varB, $varC .... ) = split(/\t/,$line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:55:44.947

这里的实际问题是您正在尝试打印 , 和 的值`$1`，`$2`但是`$3`您的正则表达式中只有一组捕获括号，因此只能`$1`获取一个值。`$2`并且`$3`将保持未定义，因此当您尝试打印它们时会给您该错误。

解决方案是再添加两组捕获括号。我希望你想要这样的东西：

```
$line=~ m/([a-zA-Z0-9]+)\t([0-9]+)\t([0-9]+)\t/; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:30:03.523

让我们假设，这`file.txt`有你想要的：（`file.txt eq demo_site.txt`）

```
chr9        1234       5678     .     200      .      14.0      -1 
```

你可以使用简单的东西：

```
perl -ane '$" = "\n"; print "@F[0..2]"' file.txt 1>output.txt 
```

Perl 中的单行代码非常强大。而且您不需要为简单的任务编写脚本；）

有时只需打开终端；）

PS：

这不是很好的单线，我知道，但它做它必须做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:55:11.940

如果我可以自我推销，您可以使用[Tie::Array::CSV](https://metacpan.org/module/Tie%3a%3aArray%3a%3aCSV)将文件作为 Perl arrayrefs 数组提供直接读写访问权限。

```
use strict;
use warnings;
use Tie::Array::CSV;
tie my @file, 'Tie::Array::CSV', 'demo_site.txt', sep_char => "\t";

print $file[0][0]; # first line before first tab
$file[2][1] = 10; # set the third line between the first and second tabs 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:33:41.530

$line=~ m/([a-zA-Z0-9]+)\t[0-9]+\t[0-9]+\t/)

首先，parens 是不平衡的。

其次，我还没有检查过这个，但你不需要为每次捕获设置一组括号吗？

第三，正如 misplacedme 所说， split() 绝对是要走的路。;)

# apache - 将特定主机重写到本地主机上的目录

> ID：15525959
> 
> 赞同：0
> 
> 时间：2013-03-20T14:11:52.420
> 
> 标签：apache, .htaccess

我目前正在尝试将本地配置的域重定向到其目录。使用 htaccess 实现此目的的最佳方法是什么？

目前'localhost'重定向到/Library/WebServer/Documents/（mac OSX），我想在这个目录中创建一个htaccess文件，它将所有域引导到它的目录。

我正在寻找的示例 htaccess 代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?example.com/$ 
RewriteRule ^(.*)$ /Library/WebServer/Documents/example.com/$1 [L] 
```

我希望有人可以帮助我，认为有一个简单的解决方法！

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:33:09.490

`.htaccess`这是单独不可能的。您需要访问主服务器配置文件或至少修改相应的虚拟主机部分。

如果可以修改主配置文件，则可以添加任意数量的[虚拟主机](http://httpd.apache.org/docs/current/vhosts/examples.html)。

如果您只允许调整虚拟主机，则必须向虚拟主机添加与[`ServerAlias`](http://httpd.apache.org/docs/current/mod/core.html#serveralias)域一样多的条目。

然后您可以为各个域添加重写规则

```
RewriteEngine On

# prevent endless loop
RewriteCond %{ENV:REDIRECT_STATUS} .
RewriteRule ^ - [L]

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com/$ 
RewriteRule ^.*$ /Library/WebServer/Documents/example.com/$0 [L]

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com/$ 
RewriteRule ^.*$ /Library/WebServer/Documents/domain.com/$0 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:24:51.367

尝试这个

```
# get the server name from the Host: header
UseCanonicalName Off

# include the server name in the filenames used to satisfy requests
VirtualDocumentRoot /var/www/vhosts/%0/httpdocs

<Location /var/www/vhosts>
    AllowOverride All
    Options +FollowSymLinks
</Location> 
```

然后，您可以尝试以下示例：

**example.com**将显示 /var/www/vhosts/example.com/httpdocs

**example2.com**将显示 /var/www/vhosts/example2.com/httpdocs

请记住将域添加到您的主机文件中。

[资源](http://httpd.apache.org/docs/2.2/vhosts/mass.html)

# android - 虽然方向是垂直的，但只有一个字段连续显示

> ID：15525961
> 
> 赞同：0
> 
> 时间：2013-03-20T14:12:07.323
> 
> 标签：android, android-layout, android-orientation

我正在为我的应用程序使用垂直方向。但我想在单行中显示多个字段。可能吗？我想在单行而不是单列中显示按钮。

![图像中的按钮在单列中的 1 后放置 1。 我需要它在单行。](../Images/e0aa5eae2166d32288d0e26249a95ff3.png)

```
<Button
android:id="@+id/bMultiply"
android:layout_width="wrap_content"
android:layout_height="0dp"
android:layout_weight="1"
android:onClick="addMultiply"
android:text="@string/bMultiply" /> 
```

activity_Calc_main.xml 中的按钮配置示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:15:19.260

你可以尝试这样的事情：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                 android:orientation="vertical">

    <TextView ....
    <TextView   .....

    <LinearLayout 
        android:orientation="horizontal" >

    <Button ...
    <Button ...
    <Button ...
    <Button ...

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:18:56.243

执行以下操作

```
<LinearLayout
     android:orientation="vertical" >
     // add other elements on top of the buttons
     <LinearLayout
         android:orientation="horizontal" >
         //add buttons here

     </LinearLayout>

     // add other elements on bottom of the buttons
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:19:45.597

```
<LinearLayout ...
    android:orientation="vertical">
 <EditText...../>
 <EditText...../>
 <LinearLayout ...
    android:orientation="horizontal"> <-----

    <Button.../>
    <Button.../>
    <Button.../>
    <Button.../>

 </LinearLayout>

</LinearLayout> 
```

# c# - 正确使用范围 using

> ID：15525962
> 
> 赞同：3
> 
> 时间：2013-03-20T14:12:07.947
> 
> 标签：c#, scope, using-statement

我与一位同事就*using*语句的适当范围发生争执。这是有问题的方法。

```
public Guid IsServerReachable()
{
  try
  {
    WhoAmIResponse whoAmI;
    using (OrganizationServiceProxy service = GetService())
      whoAmI = service.Execute(new WhoAmIRequest()) as WhoAmIResponse;
    return whoAmI.UserId;
  }
  catch { return Guid.Empty; }
} 
```

我们中的一个人声称*using*语句应该包含*whyAmI*的声明，而另一个人则认为只有*服务*实例需要被使用化。我没有说哪个是我的理论，但一个显然是错误的。哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:19:29.320

两者都是正确的。我倾向于这样写：

```
public Guid IsServerReachable()
{
    try
    {
        using (OrganizationServiceProxy service = GetService())
        {
            WhoAmIResponse whoAmI = service.Execute(new WhoAmIRequest()) as WhoAmIResponse;
            return whoAmI.UserId;
        }
    }
    catch { return Guid.Empty; }
} 
```

这对是否被处理没有任何影响`whoAmI`——唯一被自动处理的是`service`.

如果`WhoAmIResponse`也是`IDisposable`，您必须编写以下内容才能自动释放两者：

```
 using (OrganizationServiceProxy service = GetService())
    using (WhoAmIResponse whoAmI = service.Execute(new WhoAmIRequest()) as WhoAmIResponse)
        return whoAmI.UserId; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T14:53:43.097

由于`whoAmI`在这种情况下，声明在性能/范围方面并没有任何区别。真正归结为是否应该将 的属性访问权限`whoAmI.UserId`也包含在`using`. 从 IL 的角度来看，两者之间唯一的*功能*区别`OrganizationalServiceProxy.Dispose`是调用方法的顺序和`WhoAmIResponse.UserId`访问的时间。

（编辑：我认为如何`try/catch`处理返回默认值并没有任何真正的问题，而且这似乎不是问题的一部分，所以这也被省略了）

在您发布的代码中（简化以使 IL 更清晰）：

```
public Guid IsServerReachableOutsideUsingScope()
{
    WhoAmIResponse whoAmI;
    using(var service = new Service())
        whoAmI = service.Execute();
    return whoAmI.UserId;
} 
```

在 IL 中的结果：

```
IL_0000:  newobj      UserQuery+Service..ctor
IL_0005:  stloc.1     // service
IL_0006:  ldloc.1     // service
IL_0007:  callvirt    UserQuery+Service.Execute
IL_000C:  stloc.0     // whoAmI
IL_000D:  leave.s     IL_0019
IL_000F:  ldloc.1     // service
IL_0010:  brfalse.s   IL_0018
IL_0012:  ldloc.1     // service
IL_0013:  callvirt    System.IDisposable.Dispose
IL_0018:  endfinally  
IL_0019:  ldloc.0     // whoAmI
IL_001A:  callvirt    UserQuery+WhoAmIResponse.get_UserId
IL_001F:  ret 
```

而在 using 块中声明所有内容：

```
public Guid IsServerReachableWithinUsingScope()
{
    using(var service = new Service())
    {
        WhoAmIResponse whoAmI = service.Execute();
        return whoAmI.UserId;
    }
} 
```

产生 IL：

```
IL_0000:  newobj      UserQuery+Service..ctor
IL_0005:  stloc.0     // service
IL_0006:  ldloc.0     // service
IL_0007:  callvirt    UserQuery+Service.Execute
IL_000C:  stloc.1     // whoAmI
IL_000D:  ldloc.1     // whoAmI
IL_000E:  callvirt    UserQuery+WhoAmIResponse.get_UserId
IL_0013:  stloc.2     // CS$1$0000
IL_0014:  leave.s     IL_0020
IL_0016:  ldloc.0     // service
IL_0017:  brfalse.s   IL_001F
IL_0019:  ldloc.0     // service
IL_001A:  callvirt    System.IDisposable.Dispose
IL_001F:  endfinally  
IL_0020:  ldloc.2     // CS$1$0000
IL_0021:  ret 
```

如果在访问属性之前*不*处理您的服务很*重要*（例如在 NHibernate 延迟加载的集合的上下文中），那么顺序肯定很重要。如果没关系，那么最大的问题应该是你和你的团队最关心什么。如果你不介意混合和匹配调用，所以有些有大括号，有些没有，那么继续你所拥有的。*`using`*

 **`WhoAmIResponse.UserId`如果访问有副作用，*可能*需要考虑的是异常处理的顺序。*如果*对您的服务的`Dispose`调用引发异常，在您的原始代码 ( `IsServerReachableOutsideUsingScope`) 中，它将永远不会访问您的属性，因此永远不会执行其副作用。在第二个代码块 ( `IsServerReachableWithinUsingScope`) 中，它将访问并执行使用该`UserId`属性的副作用，*然后*运行`Dispose`抛出异常。*

 *这些是相当罕见的情况（编辑：应该注意，获取访问的副作用和`Dispose()`抛出异常都被认为是不好的做法），我建议*如果*是这种情况，那么您应该考虑这些以确保正确性。如果这些不是问题（没有副作用并且不关心访问/处置的顺序），那么从长远来看，使用您和您的团队认为更易于维护/可读的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:15:51.120

该`using`语句必须包含在语句终止时应该被释放的对象的声明。只要`OrganizationServiceProxy`实现`IDisposable`和`WhoAmIResponse`不实现，您的代码就是正确的。

如有疑问，将 using 块重写为 try-finally 块通常很有用：

```
OrganizationServiceProxy service = GetService();
try {
   whoAmI = service.Execute(new WhoAmIRequest()) as WhoAmIResponse;
} finally {
    service.Dispose();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:20:12.427

任何`using`语句的范围尽可能小是最佳实践。只要您返回的对象`OrganizationServiceProxy`在运行该`Dispose`方法时没有被丢弃，指示的范围是完全可以接受的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:16:53.950

```
using (OrganizationServiceProxy service = GetService())
    whoAmI = service.Execute(new WhoAmIRequest()) as WhoAmIResponse; 
```

将相当于：

```
OrganizationServiceProxy service = GetService();
try
{
    whoAmI = service.Execute(new WhoAmIRequest()) as WhoAmIResponse;
}
finally
{
    if (myRes!= null)
        // Call the object's Dispose method.
        ((IDisposable)service).Dispose();
} 
```**

# c# - LINQ, Lambda, confused

> ID：15525970
> 
> 赞同：0
> 
> 时间：2013-03-20T14:12:22.473
> 
> 标签：c#, linq, lambda

Can anybody explain why I don't see the (my) expected output for the WriteLine? I can see it when I'm debugging it in VS and refresh the 'result' to see its content in my Local window inside VS. THX

```
Func<Category, bool> del = (Category cat) => { 
    System.Console.WriteLine(cat.CategoryName);
    return cat.CategoryID > 1; 
};

NorthwindEntities nw = new NorthwindEntities();

var result = nw.Categories.Where<Category>(del);

Console.Read(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:17:27.657

LINQ 结构是惰性求值的，这意味着在从枚举中请求项目之前不会调用您的 lambda 函数（即使这样，也不一定是一次全部）。这应该会导致值输出到控制台：

```
var result = nw.Categories.Where<Category>(del).ToList(); 
```

请注意此处的含义：如果您这样做，值将输出到控制台*两次*：

```
var result = nw.Categories.Where<Category>(del);
var otherVariable = result.ToList();
foreach(var item in result)
{
   // do something
} 
```

这是您应该避免在 LINQ 查询中涉及具有副作用的代码的一个很好的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:16:53.250

You need to do something with `results` in order for your lambda to exeucute. Try this:

```
var result = nw.Categories.Where<Category>(del);
foreach(var r in result)
{
} 
```

As you enumerate over `result` your lambda will be called.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:17:35.950

也许您需要具体化查询。You`result`是，因此委托仅在实际枚举`IEnumerable`时才会归档。`result`

尝试这个：`var result = nw.Categories.Where<Category>(del).ToList();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:20:05.087

这是由于`lazy evaluation`. 该函数实际上尚未执行，因此在您自己枚举或执行以下操作之前不会枚举它：

```
Category[] categories = nw.Categories.Where<Category>(del).ToArray(); 
```

调用它会调用评估。您可以在网上阅读有关此内容的信息，但[这里](http://www.softwire.com/blog/2012/08/13/dont-be-too-lazy-linqs-lazy-evaluation-gotchas/)有一篇文章可以开始。

# java - 正则表达式匹配 IP 范围？

> ID：15525974
> 
> 赞同：0
> 
> 时间：2013-03-20T14:12:34.800
> 
> 标签：java, regex

有人可以帮助我使用正则表达式来匹配一系列 IP。它应该匹配如下内容：

```
"203.0.113.0-203.0.113.255" 
```

我尝试了以下方法，但仅匹配单个 IP：

```
((?:\\d{1,3}\\.){3}\\d{1,3})(?:/((?:(?:\\d{1,3}\\. ){3}\\d{1,3})|\\d{1,2}))？

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:16:31.750

您可以将字符串拆分为 2 个组件

```
String[] splitResult = ipRange.split("-"); 
```

然后对每个子字符串使用此模式

```
string pattern = @"\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b" 
```

您的模式实际上不起作用，因为每个 IP 部分最多只能达到 255

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:18:47.100

如果您有匹配单个 IP 的正则表达式，那么只需添加`-`并重复您的正则表达式

```
String singleIPRegex = "yourRegex";
String rangeRegex = singleIPRegex + "-" + singleIPRegex;

if (someString.matches(rangeRegex)){
    //do your stuff
} 
```

也可以作为 singleIPRegex 使用

```
(([01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}([01]?\\d{1,2}|2[0-4]\\d|25[0-5]) 
```

部分

```
([01]?\\d{1,2}|2[0-4]\\d|25[0-5]) 
```

将接受：

*   `[01]?\\d{1,2}`-> 范围 0-199，包括以 0 或 00 开头的数字，例如 01、001
*   `2[0-4]\\d`-> 范围 200-249
*   `25[0-5]`-> 范围 250-255

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:21:43.093

试试这个 ：`((?:\d{1,3}\.){3}\d{1,3})(?:/((?:(?:\d{1,3}\.){3}\d{1,3})|\d{1,2})){2}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:32:01.780

试试这个：

```
String data = "This http://example.com is a sentence 203.0.113.0-203.0.113.255 https://secure.whatever.org that contains 2 URLs.";

    Pattern pattern = Pattern.compile("\\s((\\d{1,4}\\.?){4}-(\\d{1,4}\\.?){4})\\s");
    Matcher matcher = pattern.matcher(data);

    while (matcher.find()) {
        System.out.println(matcher.group(1));
    } 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-12T07:32:05.893

[您可以在此页面https://www.analyticsmarket.com/freetools/ipregex/](https://www.analyticsmarket.com/freetools/ipregex/)中为 IP 范围生成正则表达式

对于您的情况，生成的正则表达式`^203\.0\.113\.([1-9]?\d|[12]\d\d)$`适用于范围内的 IP 地址`203.0.113.0 to 203.0.113.255`

# arduino - how to stop time delay function

> ID：15525981
> 
> 赞同：1
> 
> 时间：2013-03-20T14:12:49.803
> 
> 标签：arduino

I want to stop time delay function when ultrasonic sensor value is < 5cm. I cant use interrupt for this because ultrasonic sensor send digital signal. Here my code. here time delay function is, forward(); delay(4000); Actually I want to stop this forward function if sonar reading is <5cm before 4000ms

Any one have a idea what I have to do?

```
void loop {
    if(angleDegrees -10 <headingDegrees && angleDegrees +10 >headingDegrees  ) {
        forward();
        delay(4000);
    }
    if(safeZone>cm) {
        Stop();
    }
    else {
        search();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:47:13.463

例如，您可以循环运行 40 次，每次都检查超声波传感器读数。例如：

```
void loop {
if(angleDegrees -10 <headingDegrees && angleDegrees +10 >headingDegrees  ) {
    forward();
    for(int times=0; times<40; times++) //runs 40 times
    { 
        search(); //Check the sensor
        if(cm<safeZone)
        {
            Stop();
            break; //This exits the for loop
        }
        delay(100); //Waits for 100 ms
    }
} 
```

# ruby-on-rails - 当路由列在 Rake Routes 的输出中时获取 ActionController::RoutingError

> ID：15525994
> 
> 赞同：0
> 
> 时间：2013-03-20T14:13:12.000
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有模型`Drill`和`Exercise`. 练习属于演习，我有 routes.rb 与：

```
resources :drills do
    resources :exercises do
end 
```

因此，从 rake 路由中看到以下输出也就不足为奇了：

```
drill_exercises GET    /drills/:drill_id/exercises(.:format)                                      exercises#index
                              POST   /drills/:drill_id/exercises(.:format)                                      exercises#create
           new_drill_exercise GET    /drills/:drill_id/exercises/new(.:format)                                  exercises#new
          edit_drill_exercise GET    /drills/:drill_id/exercises/:id/edit(.:format)                             exercises#edit
               drill_exercise GET    /drills/:drill_id/exercises/:id(.:format)                                  exercises#show
                              PUT    /drills/:drill_id/exercises/:id(.:format)                                  exercises#update
                              DELETE /drills/:drill_id/exercises/:id(.:format)                                  exercises#destroy 
```

令人惊讶的是，这行代码：

```
<%= link_to t('.new', :default => t("helpers.links.prompt")),
      new_drill_exercise_path,
      :class => 'btn btn-primary', :remote => true %> 
```

导致此错误：

```
ActionController::RoutingError at /drills/6/edit 
```

没有路线匹配 {:action=>"new", :controller=>"exercises"}

尽管当我在 IRB 中调用 controller.methods 时，我得到的结果之一是`:new_drill_exercise_path`

那么……这是怎么回事？

更多信息：

练习控制器.rb

```
class ExercisesController < InheritedResources::Base
  def new
    @drill = Drill.find(params[:id])
    @exercise = Exercise.new
    respond_to do |format|
      format.html { redirect_to(:action => 'edit')  }
      format.js 
    end 
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:16:21.480

您缺少`drill_id`路径所需的内容。尝试：

```
new_drill_exercise_path(@drill) 
```

或者：

```
new_drill_exercise_path(params[:id]) # assumes this is inside `DrillsController#show` or similar 
```