# StackOverflow 问答 15461000-15461999

# java - 一次只打开一个 JInternalFrame

> ID：15461002
> 
> 赞同：0
> 
> 时间：2013-03-17T13:00:56.737
> 
> 标签：java, swing, jinternalframe, jdesktoppane

我创建了一个带有多个 JInternalFrames 的 Swing 应用程序，当鼠标单击时，这些 JInternalFrames 会被添加到 JDesktopPane 中。我只希望 DesktopPane 上出现相同内部框架的一个实例。当用户打开框架时，我不希望同一个框架出现两次..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:25:47.307

解决您的问题的简单方法是创建一个`HashMap<String,JInternalFrame>`. 将是`key`它的标题，`JInternalFrame`也是当前打开的那个。当第一次打开内部框架时，保存( ) 对。禁用所有窗口的关闭按钮，使用户无法处理显示的窗口。将键注册到每个对象，以便当按下键盘按钮时，当前显示在 .Now上最小化。现在当您单击打开相同的内部框架时，检查 是否存在于其中。如果存在，则检索该`value``object``JInternalframe``key,value``HashMap``JInternalFrame``JInternalFrame``esc``JInternalFrame``esc``JInternalFrame``DesktopPane``menu item``title``JInternalFrame``HashMap``key``value``key`并通过变量引用它`JInternalFrame`，然后在`DesktopPane`. 如果`title`that 中不存在对应的条目，则`HashMap`创建一个新`JInternalFrame`对象，在 中为相同的条目创建`HasMap`并显示它。

> ***注意：**我在此处发布的任何内容都是针对以下情况的解决方案：您可以拥有多种类型，`JInternalFrame`每种类型都具有独特的不同`functionality`，并且您只想保留其中`instance`的一种`JInternalFrame`。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:37:51.157

这是可能的示例代码。希望这有帮助。在 JdesktopPane 所在的主应用程序中调用内部框架的菜单操作。

```
 private void YourJinternalFrameMenuItemActionPerformed(java.awt.event.ActionEvent evt) {                                                 

    YourJinternalFrame nw = YourJinternalFrame.getInstance();
    nw.pack();
    //usefull part for you.. if open shows, if not creates new one 
    if (nw.isVisible()) {
    } else {
        desktopPane.add(nw);
        nw.setVisible(true);
    }
    try {

        nw.setMaximum(true);
    } catch (PropertyVetoException ex) {
        Logger.getLogger(MainApplication.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

把它放在你的 YourJinternalFrame 里面

```
private static YourJinternalFrame myInstance;

public static YourJinternalFrame getInstance() {
    if (myInstance == null) {
    myInstance = new YourJinternalFrame();
    }
return myInstance; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:17:36.667

试试这个简单的代码：

```
YourJinternalFrame nw = new YourJinternalFrame();

private void YourJinternalFrameMenuItemActionPerformed(java.awt.event.ActionEvent evt) {                                                  
    if(!nw.isVisible()){
        YourJDesktopPane.add(nw);
        nw.setVisible(true);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T03:17:45.633

试试这个简单的代码，将类变量 chk 设置为 0，然后调用 jframe 方法 componentremoved 在这个 set chk =0 再次，如果你调用你的内部框架 set chk =1 并在调用 internal 时比较 chk 无论它是零还是不是全部

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-18T04:03:57.703

我寻求了不同的解决方案：

```
final JInternalFrame[] frames = desktopPane.getAllFrames();

if( !Arrays.asList(frames).contains(loginFrame) ) {
    loginFrame = new LoginFrame();
    desktopPane.add(loginFrame);
    loginFrame.setVisible(true);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-04T00:06:29.723

这对我有用（检查类名）：

```
final JInternalFrame[] frames = desktopPane.getAllFrames();
LoginFrame loginFrame = new LoginFrame();

if( !Arrays.asList(frames).toString().contains("LoginFrame") ) {
    desktopPane.add(loginFrame);
    loginFrame.setVisible(true);
    loginFrame.validate();
} 
```

# javascript - SDK GridRefresh 调用抛出异常

> ID：15461003
> 
> 赞同：2
> 
> 时间：2013-03-17T13:00:58.077
> 
> 标签：javascript, dynamics-crm-2011

我将尽我所能解释这一点，请随时根据需要要求澄清。

使用 IE10、CRM Online 和 RU12。

我正在玩子网格并让它们刷新。考虑下面的脚本，我从 MSDN 批发了它（并包装在一个 try/catch 块中）

```
function start() {
    try {
        var controls = Xrm.Page.ui.controls.get(isSubGrid);

        if (controls.length > 0) {

            var subGridNames = "";
            for (var i in controls) {
                controls[i].refresh();
                subGridNames += (" - " + controls[i].getName() + "\n");
            }
            alert("The following subgrids were refreshed: \n" + subGridNames);
        }
        else {
            alert("There are no subgrid controls on the current form.");
        }
    }
    catch (ex) {
        alert(ex);
    }
}

function isSubGrid (control)
{
    return control.getControlType() == "subgrid";
} 
```

那里没有什么特别的 - 获取所有类型的控件`subgrid`（这会按预期返回 10 个元素）并调用`refresh()`它们。

然而，这在第一次调用时始终失败`refresh()`。

异常细节相当简单

```
TypeError: Unable to get property 'Refresh' of undefined or null reference 
```

这表明`control[i]`此时在循环中调用时为空

```
for (var i in controls) {
    controls[i].refresh();//error thrown here - suggests controls[i] is null
    subGridNames += (" - " + controls[i].getName() + "\n");
} 
```

但是我可以看到它不为空（并且具有`refresh`预期的方法）。

![在此处输入图像描述](../Images/76997bb486b886bf9a08e6491d73309b.png)

我可以通过使用使它工作`setInterval`

```
function waitAndThenRefresh(gridname) {
    var grid = Xrm.Page.ui.controls.get(gridname);
    var intervalId = setInterval(function () {
        if (grid === null || grid._control === null || grid._control._element === null) {
            return;
        }
        if (grid._control._element.readyState === 'complete') {
            window.clearInterval(intervalId);
            if (grid != null) {
                grid.refresh();
            }
        }
    }, 1000);
} 
```

但这非常可怕，更不用说没有解释 SDK 调用不能按预期工作。

所以我想问题是：有没有其他人看到这个问题？或者你可以在另一个实例上复制它吗？我错过了什么吗？SDK 中没有任何内容表明您需要将调用推迟`refresh`到内部控件`readyState`为`complete`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:39:26.977

The code block you are using,

```
for (var i in controls) {
    controls[i].refresh();
    subGridNames += (" - " + controls[i].getName() + "\n");
} 
```

should be replaced with the following:

```
for (var i in controls) {
    i.refresh();
    subGridNames += (" - " + i.getName() + "\n");
} 
```

or:

```
for (var i = 0; i < controls.length; i++) {
    controls[i].refresh();
    subGridNames += (" - " + controls[i].getName() + "\n");
} 
```

You are getting the exception because `controls[i]` is undefined in your case, `i` being the control (the element of the array `controls`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:53:59.037

我问了我的一个 CRM 伙伴。他说这个问题取决于新的刷新引擎。据他说，这是一个错误，但不是真的。如果我做对了，刷新已经过重新设计以适应新的永久保存功能。

# c++ - 未定义的值，调试器，为什么？

> ID：15461011
> 
> 赞同：-1
> 
> 时间：2013-03-17T13:01:27.507
> 
> 标签：c++, debugging, resources

好的，首先我不是 cpp 专家，也不是调试器的大用户，但是......在我的程序开始时，我有这样的东西

```
 unsigned long totSize;
    unsigned int partSize,lastPartSize;
    unsigned short nbRessources;
    const char* folder = "TYPE";

    getSizesRessource(folder, nbRessources, partSize, lastPartSize);
    totSize = (nbRessources*partSize)+lastPartSize; 
```

我不会谈论这段代码，我认为这并不重要。问题是这样的：调试器显示文件夹或未定义值的奇怪值，totSize 相同，但我确信 getSizesRessource 运行良好，其他变量是正确的所以为什么调试器不显示正确的值或未定义的值，即使我分配清楚吗？即使我将“1”分配给 totSize 它仍然在调试器中未定义 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:03:42.440

```
 unsigned long totSize;
    unsigned int partSize,lastPartSize;
    unsigned short nbRessources; 
```

假设代码片段是函数的本地代码。以上只是在技术上声明了具有未初始化值的变量，它们持有**Indeterminate 值**。正如 Indeteminate 的名字所暗示的，这些值实际上可以是任何东西。

如果您正在使用该函数`getSizesRessource`来填充这些变量，那么您的变量应该通过引用该函数来传递，否则该函数会修改正在传递的变量的副本，并且这些更改不会反映在函数之外。

# asp.net-mvc - MVC：如何使用淘汰赛绑定从控制器返回的 serailsed 对象到下拉列表

> ID：15461013
> 
> 赞同：1
> 
> 时间：2013-03-17T13:01:59.723
> 
> 标签：asp.net-mvc

我是 MVC 和淘汰赛的新手。请参考以下代码

控制器代码：

```
public string getJSON()
    {
        Product _objProduct = new Product();
        DataTable _objDT = _objProduct.getProduct();
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        List<Dictionary<string, object>> rows = 
        new List<Dictionary<string, object>>();
        Dictionary<string, object> row = null;

        foreach (DataRow dr in _objDT.Rows)
        {
            row = new Dictionary<string, object>();
            foreach (DataColumn col in _objDT.Columns)
            {
                row.Add(col.ColumnName, dr[col]);
            }
            rows.Add(row);
        }
        return serializer.Serialize(rows);
    } 
```

查看代码

```
<script>
$(document).ready(function () {
    $('#divheader').append("<h2>Please place an order</h2>");
    $.ajax({
        type: "Post",
        url: "/Order/getJSON",
        data: {},
        success: function (data) {

            function ReservationsViewModel() {
                var self = this;
                self.product = data;

                self.addOrder = function () {
                    alert('in');
                    self.order.push(new orderReservation());
                }
            }
            ko.applyBindings(new ReservationsViewModel());
        }
    });
}); 
```

```
<table>
<thead>
    <tr>
        <th>Product Name</th>
        <th>Quantity/Unit</th>
        <th>Unit Price</th>
        <th>Quanitity</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            <select id="ddlProduct"></select>
        </td>
        <td><label></label></td>
        <td><label></label></td>
    </tr>
</tbody> 
```

我尝试了以下操作： `<select id="ddlProduct" data-bind="options: ProductName"></select>` 并且我的数据包含以下格式

```
[{"ProductID":1,"ProductName":Monitor},......] 
```

它给出错误：Microsoft JScript 运行时错误：无法解析绑定。消息：[对象错误]；绑定值：选项：ProductName

任何想法，我要去哪里错了？

谁能告诉我如何使用敲除将 ajax 调用返回的数据绑定到 ddlProduct。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:34:41.633

假设您的服务器端脚本返回表单的有效 JSON：

```
[{"ProductID":1,"ProductName":Monitor},......] 
```

你可以[`options binding`](http://knockoutjs.com/documentation/options-binding.html)在你的下拉列表中使用：

```
<select id="ddlProduct" data-bind="options: products, optionsValue: 'ProductID', optionsText: 'ProductName'"></select> 
```

进而：

```
<script type="text/javascript">
    $(function () {
        $.ajax({
            type: 'POST',
            url: '@Url.Action("GetJSON", "Order")',
            success: function (data) {
                ko.applyBindings({ products: data });
            }
        });
    });
</script> 
```

此外，您的控制器操作似乎一团糟。我会尝试改进一下：

```
public ActionResult GetJSON()
{
    var products = new Product()
        .getProduct()
        .AsEnumerable()
        .Select(row => new
        {
            ProductId = row.Field<int>("ProductId"),
            ProductName = row.Field<string>("ProductName")
        })
        .ToList();
    return Json(products);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:35:40.867

你绑定到`ReservationsViewModel`，它没有`ProductName`。它有`product`，这似乎实际上是一系列产品。这似乎是您想要将您的选项绑定到（数组）的内容。

查看[文档中的](http://knockoutjs.com/documentation/options-binding.html)示例 3 。您正在绑定到一个对象列表，因此您需要结合使用 options 和 optionsText 来说明 name 属性是 ProductName。

所以是这样的：`data-bind="options: product, optionsText: 'ProductName'"`

# jquery - div溢出的问题

> ID：15461014
> 
> 赞同：0
> 
> 时间：2013-03-17T13:02:00.110
> 
> 标签：jquery, html

我有一个我不知道如何解决的问题，我希望这里的一些聪明人能给出答案。我有一个由 jquery 幻灯片效果控制的“联系表单”，仅当用户将鼠标悬停在图标上时才会出现。该效果使表单在包含表单的 div 的整个宽度内滑入和滑出浏览器的右侧边框。默认情况下，表单是隐藏的。到目前为止，我已经修复了该 div 并且一切工作正常，但后来我意识到它在我向下滚动时跟随页面，这是我不想要的。然后我将 div 设为绝对值，将其保留在原位，但因为我隐藏了右边距为 -250 的 div，它会将页面向右推这么多，在底部添加一个滚动条过程。

关于如何防止 div 向下滑动的任何想法，但同时如果向右溢出则停止？我想我可能需要另一个脚本来阻止固定 div 向下滑动，但这只是一个想法。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:47:57.223

给表格一个权利：0；这将始终保持表单与右边缘对齐并且不会溢出..

```
<div id="container">
   <div id="trigger">Show Form</div>
   <div id="form">
        Form Contents go here
   </div> 
```

```
#container{
   position: relative;
}
#form{
  display:none;
  position: absolute;
  right: 0;
  top:0;
  width: 250px; 
  height: 100px; /* for demo */
  background: #999; /* for demo */
}
#form.visible{
   display: block;
}

$(document).ready( function() {
  $("#trigger").click(function() {
     $("#form").addClass("visible");
  });
}); 
```

[http://jsfiddle.net/medmu/2/](http://jsfiddle.net/medmu/2/)

# ios - UIModalPresentationFormSheet 调整大小和人机界面指南

> ID：15461018
> 
> 赞同：0
> 
> 时间：2013-03-17T13:02:22.480
> 
> 标签：ios, objective-c, xcode, human-interface

我只是想知道是否可以调整呈现的视图控制器的大小（或移动），例如具有 UIModalPresentationFormSheet 样式的视图控制器，或者这是否违反 Apple 人机界面指南。

如 HIG 文档中所述，“表单。具有 540 x 620 点的固定尺寸并位于屏幕中心”、“当键盘在横向可见时，表单视图向上移动到状态栏下方”和“这种风格有利于从用户那里收集结构化信息”。

那么，如果我使用另一个维度，我在键盘显示时选择另一种行为，或者如果我使用完全不同的范例来收集结构化信息，是否会违反 HIG？（例如，甚至不使用两个不同的视图控制器来收集和显示信息）

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:21:35.433

简短的回答不，在这种情况下你没有违反 hig 。你可以改变这种行为，你也应该接受苹果指南。

# python - 用另一个列表中的值顺序替换列表值

> ID：15461022
> 
> 赞同：-1
> 
> 时间：2013-03-17T13:02:35.807
> 
> 标签：python, list

假设我有一个清单：

```
my_list = ["A", "B", "C", "X", "X", "X"] 
```

并且我想用另一个列表中的值替换 X 值，或者在我的情况下为 2D 列表（此列表生成的重复数等于列表中“X”的数量）：

```
combinations = list(itertools.product('LE', repeat= 3)) 
```

所以

```
combinations = [('L', 'L', 'L'), ('L', 'L', 'E'), ('L', 'E', 'L'), ('L', 'E', 'E'), ('E', 'L', 'L'), ('E', 'L', 'E'), ('E', 'E', 'L'), ('E', 'E', 'E')] 
```

我的问题是如何`my_list`用组合中的值替换“X”值，以便第一个结果`["A", "B", "C", "L", "L", "L"]`和第二个结果`["A", "B", "C", "L", "L", "E"]`等。最好我想将它们放入一个二维列表中，然后我可以打印。

编辑：为了澄清，`my_list`将是未知的，“X”值可能以未知的方式分散。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:10:44.893

我可能会使用：

```
def mergefill(to_fill, fill_char, fill_from):
    for filler in fill_from:
        it = iter(filler)
        yield [c if c != fill_char else next(it) for c in to_fill] 
```

这使

```
>>> my_list = ["A", "B", "C", "X", "X", "X"]
>>> list(mergefill(my_list, 'X', product('LE', repeat=3)))
[['A', 'B', 'C', 'L', 'L', 'L'], ['A', 'B', 'C', 'L', 'L', 'E'], ['A', 'B', 'C', 'L', 'E', 'L'], ['A', 'B', 'C', 'L', 'E', 'E'], ['A', 'B', 'C', 'E', 'L', 'L'], ['A', 'B', 'C', 'E', 'L', 'E'], ['A', 'B', 'C', 'E', 'E', 'L'], ['A', 'B', 'C', 'E', 'E', 'E']] 
```

它还处理填充字符不连续的情况：

```
>>> my_list = ["A", "X", "B", "X"]
>>> list(mergefill(my_list, 'X', product('LE', repeat=2)))
[['A', 'L', 'B', 'L'], ['A', 'L', 'B', 'E'], ['A', 'E', 'B', 'L'], ['A', 'E', 'B', 'E']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:06:50.987

尝试这个：

```
my_list = ['A', 'B', 'C', 'X', 'X', 'X']
new_list = [my_list[:3] + list(c) for c in itertools.product('LE',repeat=3)]
[['A', 'B', 'C', 'L', 'L', 'L'],                                                
 ['A', 'B', 'C', 'L', 'L', 'E'],                                                
 ['A', 'B', 'C', 'L', 'E', 'L'],                                                
 ['A', 'B', 'C', 'L', 'E', 'E'],                                                
 ['A', 'B', 'C', 'E', 'L', 'L'],                                                
 ['A', 'B', 'C', 'E', 'L', 'E'],                                                
 ['A', 'B', 'C', 'E', 'E', 'L'],                                                
 ['A', 'B', 'C', 'E', 'E', 'E']] 
```

要获取 my_list 中“X”的数量：

```
count = len(filter(lambda v: v == 'X',my_list)) 
```

# html - 霓虹灯标志 CSS 动画

> ID：15461024
> 
> 赞同：0
> 
> 时间：2013-03-17T13:02:46.087
> 
> 标签：html, css, animation

我想创建一个标志的霓虹灯标志，用于网站和电子邮件签名。

我有几个问题希望有好心人能帮助我。

1.  对于电子邮件签名，我认为动画 gif 是最好的——只是为了安全？但是，我可以使用 html 模板——但我不确定网站版本上使用的 CSS 动画是否会在一个（或多个）电子邮件客户端中正确呈现？

2.  我发现了这个在标记中使用键入字母的 CSS 动画霓虹灯广告示例。[http://www.broken-links.com/tests/animations/](http://www.broken-links.com/tests/animations/)

我想知道这种相同的 CSS 动画技术是否适用于平面图像？CSS 如何知道字母的边缘在哪里？使用这种技术，透明 png 会正常工作吗？如果有帮助，我将图像作为基于像素或矢量的图像？

这是我想要创建的霓虹灯标志和快速模型样式的屏幕截图。

提前致谢！

![娃娃标志](../Images/9f58a643c1d96833c0d92a99d117efdd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:06:43.350

您链接的示例仅使用文本。它使用`@font-face`规则加载自定义字体，然后为字体的颜色设置动画。它的颜色是平的。

你试图做的事情涉及更多。最简单的解决方案可能是将每个字母分成自己的图像，然后您可以为`opacity`属性设置动画。这可能是您所希望的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:57:40.057

im not sure if i understand you well.. but this will apply a drop-shadow to a transparent image as applied on the neon text..

```
-webkit-filter: drop-shadow(0px 0px 8px rgba(0,0,0,0.5));

filter: url(/assets/svg/shadow.svg#drop-shadow);

-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=135, Color='rgba(0,0,0,0.3)')";

filter: progid:DXImageTransform.Microsoft.S 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T00:38:06.293

这个链接还解释了很多关于阴影和框阴影的信息——由于浏览器的支持，这不是我的项目所需要的，但可能对搜索这个阴影 CSS 技巧的其他人有用。

[http://demosthenes.info/blog/598/boxshadow-property-vs-dropshadow-filter-a-complete-comparison](http://demosthenes.info/blog/598/boxshadow-property-vs-dropshadow-filter-a-complete-comparison)

# matlab - 如何在 Matlab 中求解具有“n”个变量（二次多项式）的“n”（非线性）方程组？

> ID：15461026
> 
> 赞同：2
> 
> 时间：2013-03-17T13:03:08.147
> 
> 标签：matlab

是否可以在 Matlab 中求解具有“n”个变量（2 级或 1 级）的“n”（非线性）方程组？

你能给我举个例子吗？

我尝试使用`fsolve`函数，但出现下一个错误：

`??? Error using ==> feval Undefined function or method 'ecuaciones' for input arguments of type 'double'.`

[fsolve 示例](http://www.youtube.com/watch?v=yN4gMygK8Uw)

编辑：

我有一个名为“ecuaciones.m”的文件，其中包含以下内容：

```
function [f]=ecuaciones(x)

f(1)=x(1) + x(2) + x(3) + 2*x(4) -1,905;
f(2)=2*x(3) + 3*x(4) + x(5) + x(6) - 3,922;
f(3)=x(1) + 2*x(2) + x(4) + x(5) + x(6) - 1,961;
f(4)=1,961*x(3) + x(3)*x(5) - x(2)*x(3) - 0,02834*(x(5)^2);
f(5)=9,32845*(x(3)^2) - x(4)*x(6);
f(6)=61,4723*x(1)*x(6) - x(2)*x(5);

J = zeros (n,n);

J =

[ 1, 1, 1, 2, 0, 0]
[ 0, 0, 0, 0, 0, 0]
[ 0, 0, 2, 3, 1, 1]
[ 1, 2, 0, 1, 1, 1]
[ 0, -x3, x5 - x2 + 1961/1000, 0, x3 - (1417*x5)/25000, 0]
[ 0, 0, (2625725246496519*x3)/140737488355328, -x6, 0, -x4]
[ (8651457105425229*x6)/140737488355328, -x5, 0, 0, -x2, (8651457105425229*x1)/140737488355328]; 
```

然后，在 Matlab 控制台中，我尝试：

```
>> x0=[1,1,1,1,1,1];
>> [x,feval,flag]=fsolve('ecuaciones',x0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:46:37.373

使用函数句柄

```
 >> x = fsolve( @ecuaciones, x0 ); 
```

您需要确保`ecuaciones.m`在 matlab 的路径中。

**更新：**
为了更好地收敛，您可能还想计算雅可比行列式。
在您的情况下，雅可比矩阵是一个`n`by`n`矩阵，它是wrt在该点`J(l,k)`的偏导数。 您需要修改以返回**两个**输出，第一个是，第二个是`f(l)``x(k)`**`x`**
`ecuaciones.m`**`f``J`**

 **```
function [f J] = ecuaciones( x )

f(1)=x(1) + x(2) + x(3) + 2*x(4) -1,905;
f(2)=2*x(3) + 3*x(4) + x(5) + x(6) - 3,922;
f(3)=x(1) + 2*x(2) + x(4) + x(5) + x(6) - 1,961;
f(4)=1,961*x(3) + x(3)*x(5) - x(2)*x(3) - 0,02834*(x(5)^2);
f(5)=9,32845*(x(3)^2) - x(4)*x(6);
f(6)=61,4723*x(1)*x(6) - x(2)*x(5);

J = [...
      1, 1, 1, 2, 0, 0;...
      0, 0, 0, 0, 0, 0;...
      0, 0, 2, 3, 1, 1;...
      1, 2, 0, 1, 1, 1;...
      0, -x3, x5 - x2 + 1961/1000, 0, x3 - (1417*x5)/25000, 0;...
      0, 0, (2625725246496519*x3)/140737488355328, -x6, 0, -x4;...
      (8651457105425229*x6)/140737488355328, -x5, 0, 0, -x2, (8651457105425229*x1)/140737488355328]; 
```

你可以打电话`fsolve`

```
>> x = fsolve( @ecuaciones, x0, struct('Jacobian','on') ); 
```**

# ruby-on-rails - Rails 3 提交时的空字段显示多条错误消息

> ID：15461028
> 
> 赞同：0
> 
> 时间：2013-03-17T13:03:10.160
> 
> 标签：ruby-on-rails

我是 Rails 新手，目前正在学习验证，所以我创建了一个表单，其中我有一个名为 no（类型整数）的字段，在验证模型中我做了这样的事情：

```
validates :no,
        :presence => true,
        :uniqueness => true,
        :numericality => { :only_integer => true, :greater_than_or_equal_to => 1, :less_than_or_equal_to => 99999 } 
```

现在，当没有输入任何内容时，会显示两条错误消息

1]Noを入力してください。 -> 请输入号码。2]Noは数値で入力してください。 -> 请只输入整数。

对不起，因为我的操作系统是日文的，所以日本的东西；-)

我需要的是，当“否”字段为空时，它应该只显示该空的 error_message。当前，当字段为空时，它会同时显示存在和数字的 error_message。

如果这是一个非常基本的问题，我很抱歉，我已经尝试寻找答案，但我似乎找不到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:08:41.203

将您的数字验证更改为仅在该字段存在时才有效。

```
validates :no,
  :presence => true,
  :uniqueness => { :if => :no_is_present? },
  :numericality => {
    :only_integer => true,
    :greater_than_or_equal_to => 1,
    :less_than_or_equal_to => 99999,
    :if => :no_is_present?
  }

def no_is_present?
  no.present?
end 
```

# php - 将发布的值数组与php中的函数数组匹配

> ID：15461031
> 
> 赞同：1
> 
> 时间：2013-03-17T13:03:37.377
> 
> 标签：php, arrays, forms, post, checkbox

我有一个基本的逻辑问题。我的目标是从表单中取出选定的复选框，将它们作为数组提交，然后将值与函数数组匹配。我试图找到一种将所选输入与函数数组相匹配的方法，这样我就不会以 if {} elseif{} 语句的页面结束，以涵盖越来越多的选项。

这是我如何设置包含一组复选框的网络表单的示例。我正在使用“[]”将选定的值作为数组传递。

网络表格：

```
<input type="checkbox" name="action[]" value="open" checked>open</input>
<input type="checkbox" name="action[]" value="close">close</input>
<input type="checkbox" name="action[]" value="lift">lift</input>
<input type="checkbox" name="action[]" value="drop">drop</input>
<input type="checkbox" name="action[]" value="destroy">destroy</input>
<input type="checkbox" name="action[]" value="create">create</input> 
```

php后处理程序

```
$o = open();
$c = create();
$l = lift();
$d = drop();
$de = destroy();
$cr = create();

$mysvcs = array($o, $c, $l, $d, $de, $cr);

//stuck here
$action = $_POST['action'];
$postsvc = implode(",", $action );  

$req = strstr($mysvcs, $postsvc);

?> 
```

我觉得我可能会以完全错误的方式解决这个问题，并希望社区提供任何指导。

非常感谢

-澳洲恶魔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:25:39.200

如果要执行检查的功能，以下代码应该可以工作：

```
function open() {} //your open declaration 
function close() {} //your close declaration 
function lift() {} //your lift declaration 
//all other declarations

foreach($_POST['action'] as $a){
    $a();//execute matching function 
} 
```

# c# - 在 C# 中通过 OpenXML 在 Word 文件中定义具有 RTL 方向的段落

> ID：15461035
> 
> 赞同：4
> 
> 时间：2013-03-17T13:04:14.603
> 
> 标签：c#, ms-word, openxml, openxml-sdk

如何在 C# 中使用 OpenXML 为 word 中的段落设置从右到左的方向？我使用下面的代码来定义它，但它们不会做任何改变：

```
 RunProperties rPr = new RunProperties();

 Style style = new Style();
 style.StyleId = "my_style";
 style.Append(new Justification() { Val = JustificationValues.Right });
 style.Append(new TextDirection() { Val = TextDirectionValues.TopToBottomRightToLeft });
 style.Append(rPr); 
```

最后，我将为我的段落设置这种样式：

```
...
heading_pPr.ParagraphStyleId = new ParagraphStyleId() { Val = "my_style" }; 
```

但是在输出文件中没有看到任何变化。

我找到了一些帖子，但他们根本没有帮助我，比如：

[更改word文件中的文本方向](http://social.msdn.microsoft.com/Forums/en-US/oxmlsdk/thread/9900a3da-5d68-4d7a-a5f6-f45c473a73f9/)

如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:12:24.740

使用`BiDi`该类将段落的文本方向设置为 RTL。以下代码示例在 word 文档中搜索第一段，并使用`BiDi`类将文本方向设置为 RTL：

```
using (WordprocessingDocument doc =
   WordprocessingDocument.Open(@"test.docx", true))
{
  Paragraph p = doc.MainDocumentPart.Document.Body.ChildElements.First<Paragraph>();

  if(p == null)
  {
    Console.Out.WriteLine("Paragraph not found.");
    return;
  }

  ParagraphProperties pp = p.ChildElements.First<ParagraphProperties>();

  if (pp == null)
  {
    pp = new ParagraphProperties();
    p.InsertBefore(pp, p.First());
  }

  BiDi bidi = new BiDi();
  pp.Append(bidi);

} 
```

Microsoft Word 中的双向文本还有几个方面。 *SanjayKumarM*写了一篇关于如何在 Microsoft Word 中处理从右到左的文本内容的文章。有关更多信息，请参阅[此](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2007/04/09/rtl-text.aspx)链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-29T03:05:35.250

这段代码对我有用，可以设置从右到左的方向

```
var run = new Run(new Text("Some text"));
var paragraph = new DocumentFormat.OpenXml.Wordprocessing.Paragraph(run);
paragraph.ParagraphProperties = new ParagraphProperties()
{
    BiDi = new BiDi(),
    TextDirection = new TextDirection()
    {
        Val = TextDirectionValues.TopToBottomRightToLeft
    }
}; 
```

# spring - JVM崩溃后的Spring Batch

> ID：15461040
> 
> 赞同：8
> 
> 时间：2013-03-17T13:04:57.160
> 
> 标签：spring, spring-batch

JVM崩溃后如何重新启动作业？

当我的 JVM 崩溃或系统出现故障时，我正在运行许多在 Spring Batch 框架中实现的作业。失败后如何重新启动这些作业？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-28T20:30:45.860

您需要在重新启动它们之前将“正在运行”的作业标记为失败，如下所示：

```
List<String> jobs = jobExplorer.getJobNames();
for (String job : jobs) {
    Set<JobExecution> runningJobs = jobExplorer.findRunningJobExecutions(job);

    for (JobExecution runningJob : runningJobs) {
        try {
            runningJob.setStatus(BatchStatus.FAILED);
            runningJob.setEndTime(new Date());
            jobRepository.update(runningJob);
            jobOperator.restart(runningJob.getId());
        } catch (Exception e) {
            LOG.error(e.getMessage(), e);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T21:19:20.113

基本上，您可以执行以下操作：

1.  `JobExplorer`在应用程序上下文中配置工厂 bean：

2.  `JobOperator`在您的应用程序上下文中配置bean

3.  在 jobExplorer 中查询不同的作业名称：`jobExplorer.getJobNames()`

4.  对于步骤 (3) 中的每个作业，在 jobExplorer 中查询未完成的作业： `jobExplorer.findRunningJobExecutions(String jobName)`

5.  对于`JobExecution`步骤 (4) 中的每个调用：`jobOperator.restart(jobExecution.getJobId())`

6.  确保在启动序列期间调用此过程，然后再启动任何其他作业

从技术上讲，可以`findRunningJobExecutions()`通过覆盖来合并步骤 3+4 `JobExecutionDao`，但当前的 API 不支持它。

有关上述 Spring bean 配置的帮助，请参阅[参考文档](http://static.springsource.org/spring-batch/reference/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-16T18:29:33.323

这是 JVM 崩溃后重新启动作业的完整解决方案。

1.  通过设置 restarable="true" 使作业可重新启动

> 工作 id="jobName" xmlns="http://www.springframework.org/schema/batch" restartable="true"

2\. 重新启动作业的代码

```
import java.util.Date;
import java.util.List;
import org.apache.commons.collections.CollectionUtils;
import org.springframework.batch.core.BatchStatus;
import org.springframework.batch.core.ExitStatus;
import org.springframework.batch.core.JobExecution;
import org.springframework.batch.core.JobInstance;
import org.springframework.batch.core.explore.JobExplorer;
import org.springframework.batch.core.launch.JobLauncher;
import org.springframework.batch.core.launch.JobOperator;
import org.springframework.batch.core.repository.JobRepository;
import org.springframework.beans.factory.annotation.Autowired;

public class ResartJob {

    @Autowired
    private JobExplorer jobExplorer;
    @Autowired
    JobRepository jobRepository;
    @Autowired
    private JobLauncher jobLauncher;
    @Autowired 
    JobOperator jobOperator;

    public void restart(){
        try {
            List<JobInstance> jobInstances = jobExplorer.getJobInstances("jobName",0,1);// this will get one latest job from the database
            if(CollectionUtils.isNotEmpty(jobInstances)){
               JobInstance jobInstance =  jobInstances.get(0);
               List<JobExecution> jobExecutions = jobExplorer.getJobExecutions(jobInstance);
               if(CollectionUtils.isNotEmpty(jobExecutions)){
                   for(JobExecution execution: jobExecutions){
                       // If the job status is STARTED then update the status to FAILED and restart the job using JobOperator.java
                       if(execution.getStatus().equals(BatchStatus.STARTED)){ 
                           execution.setEndTime(new Date());
                           execution.setStatus(BatchStatus.FAILED);                               
                           execution.setExitStatus(ExitStatus.FAILED);                               
                           jobRepository.update(execution);
                           jobOperator.restart(execution.getId());
                       }
                   }
               }
            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }
    }
} 
```

3.

```
<bean id="jobRepository" class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean" p:dataSource-ref="dataSource" p:transactionManager-ref="transactionManager" p:lobHandler-ref="oracleLobHandler"/>

<bean id="oracleLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler"/>

<bean id="jobExplorer" class="org.springframework.batch.core.explore.support.JobExplorerFactoryBean" p:dataSource-ref="dataSource" />

<bean id="jobRegistry" class="org.springframework.batch.core.configuration.support.MapJobRegistry" />

<bean id="jobLauncher" class="org.springframework.batch.core.launch.support.SimpleJobLauncher">
        <property name="jobRepository" ref="jobRepository" />
        <property name="taskExecutor" ref="jobLauncherTaskExecutor" />
</bean>
<task:executor id="jobLauncherTaskExecutor" pool-size="6" rejection-policy="ABORT" />

<bean id="jobOperator" class="org.springframework.batch.core.launch.support.SimpleJobOperator" p:jobLauncher-ref="jobLauncher" p:jobExplorer-re`enter code here`f="jobExplorer" p:jobRepository-ref="jobRepository" p:jobRegistry-ref="jobRegistry"/> 
```

# c++ - 如何在我的 vs2010 项目中使用 wxformbuilder 生成的 c++ 文件

> ID：15461041
> 
> 赞同：0
> 
> 时间：2013-03-17T13:04:57.923
> 
> 标签：c++, wxwidgets

我只是学习 wxwidget 编程。我用谷歌搜索，只找到一些关于如何使用 wxformbuilder 的 XRC 字段用于 vc++ 2010 项目的材料。但似乎最新的 wxbuilder 不再提供 xrc 文件导出。

任何人都可以有一些使用从 wxFormBuilder i vs2010 c++ 项目生成的 UI 的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T01:34:23.277

我也是 wx 的新手。AFAIK wxFormBuilder 可以直接生成 cpp/h 文件，这意味着您不必在 VS2010 中使用 xrc 文件（因为 UI 也基于 cpp/h）。只需按`F8`，然后找到生成的代码。

# wpf - WPF 菜单和多点触控

> ID：15461042
> 
> 赞同：0
> 
> 时间：2013-03-17T13:05:00.233
> 
> 标签：wpf

我有一个菜单，它的实现方式是，当按下菜单项时，会打开一个包含它的子项的弹出窗口。
使用触摸屏运行时，偶尔用户会用手指同时触摸 2 个菜单项 - 这会导致其中一个菜单项具有触摸捕获，直到另一个窗口获得焦点才会释放，从而使应用程序看起来卡住了。

我怎样才能防止这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:31:24.133

您可以使用包含委托的队列：

触发命令时，将委托添加到队列中。然后抓住队列的第一个代表，然后刷新它。现在您只有 1 个“命令”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:55:05.750

我找到了问题的原因：用于显示子菜单项的弹出窗口将 StaysOpen 设置为 false。
这会导致 Popup 捕获输入，因此一旦在其边界之外进行单击，它就可以知道何时关闭自己。将其 StaysOpen 属性设置为 True 解决了这个问题。

# oop - 什么时候可以在支持多态的 OO 语言中切换语句？

> ID：15461049
> 
> 赞同：2
> 
> 时间：2013-03-17T13:05:25.853
> 
> 标签：oop, design-patterns, switch-statement

可以说我有这样的方法：

```
public void sketch(Shape shape){
 switch(shape.getType){
   case CIRCLE: 
      Circle circle = (Circle)shape;
      circle.drawCircle();
      break;
   case RECTANGLE: 
      Rectangle rectangle= (Rectangle)shape;
      rectangle.drawRectanle();
      break;  

  }
} 
```

上面的代码可以很容易地通过一个`Shape`知道如何绘制自己的接口来重构。然后具体的类喜欢`Circle`并将`Rectangle`实现`draw()`. 然后，上面的客户端代码如下所示（比前面的代码片段更具可读性和整洁性）：

```
public void sketch(Shape shape){
   shape.draw();   
} 
```

所以我的问题是关于*switch*在支持*多态*的 OO 语言中的用法。它*总是*被认为是反模式吗？有没有什么情况下*开关*可以成为救生员？

# c# - PDFSharp：使用自动换行测量长文本的高度

> ID：15461052
> 
> 赞同：6
> 
> 时间：2013-03-17T13:06:15.027
> 
> 标签：c#, pdf, pdf-generation, pdfsharp

PDFSharp 支持在绘制长文本部分时自动换行：

```
textFormatter.DrawString(text, font, XBrushes.Black, new XRect(x, y, textAreaWidth, 1000), XStringFormats.TopLeft); 
```

如果文本长于 ，这将换行`textAreaWidth`。

如何获取刚刚绘制的文本的高度？

我试过了`gfx.MeasureString()`，但没有支持指定最大宽度的重载。`gfx.MeasureString()`返回不换行的文本大小。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-11T09:53:26.193

PdfSharp 的这个扩展对我来说不太适用。不知道为什么，但我的身高一直比预期的要高（几乎是所需身高的两倍）。所以我决定为 XGraphics 对象编写一个扩展方法，我可以在其中指定一个 maxWidth 并在内部计算软换行符。该代码使用`XGraphics.MeasureString(string, XFont)`内联文本的默认宽度并与文本中的单词聚合来计算换行符。计算软换行符的代码如下所示：

```
/// <summary>
/// Calculate the number of soft line breaks
/// </summary>
private static int GetSplittedLineCount(this XGraphics gfx, string content, XFont font, double maxWidth)
{
    //handy function for creating list of string
    Func<string, IList<string>> listFor = val => new List<string> { val };
    // string.IsNullOrEmpty is too long :p
    Func <string, bool> nOe = str => string.IsNullOrEmpty(str);
    // return a space for an empty string (sIe = Space if Empty)
    Func<string, string> sIe = str => nOe(str) ? " " : str;
    // check if we can fit a text in the maxWidth
    Func<string, string, bool> canFitText = (t1, t2) => gfx.MeasureString($"{(nOe(t1) ? "" : $"{t1} ")}{sIe(t2)}", font).Width <= maxWidth;

    Func<IList<string>, string, IList<string>> appendtoLast =
            (list, val) => list.Take(list.Count - 1)
                               .Concat(listFor($"{(nOe(list.Last()) ? "" : $"{list.Last()} ")}{sIe(val)}"))
                               .ToList();

    var splitted = content.Split(' ');

    var lines = splitted.Aggregate(listFor(""),
            (lfeed, next) => canFitText(lfeed.Last(), next) ? appendtoLast(lfeed, next) : lfeed.Concat(listFor(next)).ToList(),
            list => list.Count());

    return lines;
} 
```

有关完整代码，请参阅以下要点：[https ://gist.github.com/erichillah/d198f4a1c9e8f7df0739b955b245512a](https://gist.github.com/erichillah/d198f4a1c9e8f7df0739b955b245512a)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T14:09:45.933

The XTextFormatter class (source code included with PDFsharp) is meant to get you started. Modify it if it doesn't suit your needs.

Since XTextFormatter keeps the Y position internally, it would be a rather simple change to return the height of the text that was just drawn.

Instead of modifying XTextFormatter, consider using MigraDoc Foundation (also included) instead.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T14:59:39.037

我发现 PdfSharp 的这个扩展可以解决这个问题：

[http://developer.th-soft.com/developer/2015/07/17/pdfsharp-improving-the-xtextformatter-class-measuring-the-height-of-the-text/](http://developer.th-soft.com/developer/2015/07/17/pdfsharp-improving-the-xtextformatter-class-measuring-the-height-of-the-text/)

您可以在此处克隆或分叉相关代码：

[https://github.com/yolpsoftware/PdfSharp/tree/measure-text-height](https://github.com/yolpsoftware/PdfSharp/tree/measure-text-height)

# java - 在 Glassfish 上使用 @EJB 注释和 Maven 的应用程序客户端

> ID：15461053
> 
> 赞同：2
> 
> 时间：2013-03-17T13:06:20.743
> 
> 标签：java, maven, glassfish, ejb, application-client

NetBeans 站点中有一个示例[如何](http://netbeans.org/kb/docs/javaee/entappclient.html)使用简单项目（没有 Maven）创建应用程序客户端。需要 4 个项目（EJB、EAR、Lib、程序）。本教程很简单，而且效果很好。

我想问一下如何对 Maven 做同样的事情？我无法正确获取所有依赖项，因此当我尝试调用 EJB 方法时，它给了我`NullPointerException`. 谁能告诉我需要完成的关键步骤（最好使用 NetBeans）？因为我很困惑，关于需要创建多少项目？我知道，我需要应用程序项目、EAR 和 EJB 项目，仅此而已？这些项目 pom.xml 文件中需要编写哪些特殊配置？

**编辑1：**

我不想显式 JNDI 我希望能够使用 @EJB 注释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:39:56.643

以下是步骤：

1.  使用 New Project 菜单的 Maven 文件夹创建用于保存接口类的 Java 类库。选择 Maven 文件夹下的 Java 应用程序。
2.  按照 NB 的教程创建企业应用程序。唯一的区别是你必须使用新项目菜单的Maven文件夹
3.  构建类库
4.  确保类库是企业应用程序中的依赖项。
5.  运行企业应用程序。NB 将其部署到 GF 服务器
6.  使用 Maven 的文件夹创建应用程序客户端。不要在此处使用*插入代码*NB 的功能来注入无状态 EJB，因为它会崩溃（至少在我的版本中：NB 7.2）。相反，只需复制并粘贴教程中显示的代码。您不需要任何部署/ejb 描述符。
7.  修改应用程序客户端的 POM 以使用 maven-assembly-plugin 获取具有依赖项的 jar。如果不执行此步骤，部署将失败，因为 GF 无法加载接口类。将以下行添加到`plugins`选项卡（根据需要更改主类）：

    ```
     <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <archive>
                    <manifest>
                        <mainClass>com.entapp.entappclient.Main</mainClass>
                    </manifest>
                </archive>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id> 
                    <phase>package</phase> 
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
    ```

8.  用NB构建应用客户端项目

9.  使用 GF 的应用程序客户端命令运行应用程序客户端：`appclient -jar EntAppClient-1.0-SNAPSHOT-jar-with-dependencies.jar`

有用的链接：[Java EE 埋藏的宝藏：](http://blogs.steeplesoft.com/2011/02/java-ees-buried-treasure-the-application-client-container/) Jason Lee的应用程序客户端容器

**重要的提示**

为了将客户端部署到其他 JVM [，您必须在每台客户端计算机上安装 appclient](http://docs.oracle.com/cd/E18930_01/html/821-2433/package-appclient-1m.html)并设置 target-server 属性。appclient 似乎有一个非常复杂的结构，你不能简单地通过添加这些行来生成它（加上 EclipseLink 持久性工件）：

```
<dependency>
    <groupId>org.glassfish.appclient</groupId>
    <artifactId>gf-client</artifactId>
    <version>3.1.1</version>
    <type>pom</type>
    <scope>compile</scope>
</dependency> 
```

将这些工件添加到客户端可以完美编译，但 jar 不起作用。这是可以理解的，因为缺少 sun-acc.xml 文件（该文件是必需的，因为包含 target-server 属性）。**因此，我认为唯一的方法是`package-appclient`按照链接文档使用脚本**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:38:13.233

有一个有用的[EJB 常见问题解答](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html)，其中提到了如何使用`@EJB`来访问远程 EJB `ejb-ref`，`sun-web.xml`或者现在它是`glassfish-web.xml`如下链接：-

[如果我有多个 Appserver 实例正在运行并且我想访问它们之间的远程 EJB 组件怎么办？](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#cross-appserverremoteref)

如果您想比较`ejb-ref`和`ejb-local-ref`，您可以[在 @EJB 和 ejb-ref/ejb-local-ref 之间的关系是什么？](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#EJB_ejb-ref_ejb_local_ref)

我希望这可能会有所帮助。

# android - android创建公共文件

> ID：15461055
> 
> 赞同：0
> 
> 时间：2013-03-17T13:06:34.510
> 
> 标签：android, logging, android-file

我想将 logcat 输出到`logs.log`文件。它工作正常，我可以使用 Android 中的应用程序 FileManager 打开它。但是如果我将手机连接到计算机，我将无法访问它。如何使文件在计算机中可见？

```
try {
   File filename = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)+"/logs.log"); 
   filename.createNewFile(); 
   String cmd = "logcat -d -f "+filename.getAbsolutePath();
   Runtime.getRuntime().exec(cmd);
}   catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:35:12.820

您可以使用以下命令将日志文件从设备复制到计算机

```
adb pull /sdcard/logs.log {your_computer_dir} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:57:32.100

关键是当设备连接到 PC 并且安装了 sdcard 时，设备无法使用外部存储（sdcard）。这是文档报价：

> 警告：如果用户在计算机上安装外部存储或移除媒体，外部存储可能会变得不可用，并且您保存到外部存储的文件不会强制执行安全性。所有应用程序都可以读取和写入放置在外部存储上的文件，并且用户可以删除它们。

[http://developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

但是您可以直接从 PC 上安装的 sdcard 中获取这些文件。

# magento - 在 magento head.phtml 中回显产品属性

> ID：15461061
> 
> 赞同：4
> 
> 时间：2013-03-17T13:07:11.970
> 
> 标签：magento, magento-1.7, canonical-link

我正在尝试通过使用自定义属性在 Magento 中为产品设置我自己的自定义规范链接，但我无法让该属性在 head.phtml 文件中回显。这就是我到目前为止所拥有的。请问有人可以帮忙吗？

```
<?php if (Mage::registry('current_product')) : ?>
<?php $customcanonical = Mage::registry(‘current_product’)->getData(‘canonical_link’); ?>
<link rel="canonical" content="<?php echo $customcanonical ?>" />
<?php endif; ?> 
```

其中 canonical_link 是我的自定义属性

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T13:54:55.533

尝试这样的事情：

```
<?php if ($_product = Mage::registry('current_product')) : ?>
<?php $customcanonical = $_product->getData('canonical_link'); ?>
<?php if ($customcanonical): ?>
<link rel="canonical" content="<?php echo $customcanonical ?>" />
<?php endif; ?>
<?php endif; ?> 
```

还要确保您的“canonical_link”属性在当前使用的属性集中，并且为您正在查看的当前产品分配了值。如果此属性或产品是新的（或者使用平面目录！），请确保您也重新索引在暂存环境或本地为您的站点提供的功能。）

# javascript - 改变一行中的值取决于另一行的值

> ID：15461062
> 
> 赞同：0
> 
> 时间：2013-03-17T13:07:37.717
> 
> 标签：javascript, jquery, dom, html-table

您如何更改行中的值以根据另一行的值更新负载？

例如，在我的表中，我有一个名为**Room Allocation**的列和另一个名为**Action**的列。如果行值**Room Allocation**列设置为 Pending ，那么我希望**Action**下特定行的按钮是**Edit**和**Cancel**，但如果是其他任何东西（即**不是 Pending**），那么按钮应该是**Edit**和**Decline**。

我怎样才能使用 jQuery 来做到这一点？下面是我的代码，我在[这里](http://jsfiddle.net/VbPzB/)包含了一个小提琴：

```
<table id="home_tbl">
    <thead>
      <tr>
        <th>Module Code</th>
        <th>Day</th>
        <th>Start Period</th>
        <th>Length</th>
        <th>Room Preference</th>
        <th>Room Allocation</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>

    <!-- dummy data starts here -->

      <tr>
        <td>COA101</td>
        <td>Tuesday</td>
        <td>11:00</td>
        <td>2 hours</td>
        <td>B.1.11</td>
        <td>Pending</td>
        <td><button class="cupid-green">Edit</button>
          &nbsp;
          <button class="cupid-green">Cancel</button></td>
      </tr>
            <tr>
        <td>COA201</td>
        <td>Monday</td>
        <td>10:00</td>
        <td>1 hours</td>
        <td>J001</td>
        <td>J001</td>
        <td><button class="cupid-green">Edit</button>
          &nbsp;
          <button class="cupid-green">Cancel</button></td>
      </tr>

      <!-- dummy data ends here -->

    </tbody>
  </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:22:08.870

我将如何处理它取决于几件事：1）“编辑”和“拒绝”之间的区别是什么，以及 2）观众是谁。

首先，我假设“编辑”和“拒绝”是单独的操作/URL 端点？也就是说 - 区别在于按钮的作用，而不仅仅是标签是什么？

接下来，如果您的受众是受信任的（例如，使用内部工具的员工），您可以在标记中包含所有三个按钮，并根据“待定”状态显示或隐藏它们。这是更简单的选择，但如果您不信任您的观众，它就不会起作用。

如果您不信任他们，则永远不应显示按钮来执行错误操作 - 如果用户禁用了 javascript（或故意禁用它），他们将能够发送他们的房间/预订的“拒绝”请求不应该。在这种情况下，您应该在服务器上创建表，而不是使用 javascript/jQuery。

如果你让我知道这些信息，我可以给你一些例子来说明如何做任何一个选项！

## 为受信任的观众回答：

好的 - 以下是如何根据状态列显示/隐藏各种按钮。我们将使用 CSS 和后代选择器来进行显示/隐藏，这使得 javascript 非常简单：

这是每一行所需的 HTML：

```
<tr class="booking">
  <td>COA101</td>
  <td>Tuesday</td>
  <td>11:00</td>
  <td>2 hours</td>
  <td>B.1.11</td>
  <td class="status">Pending</td>
  <td class="action">
    <button class="edit cupid-green">Edit</button>
    <button class="decline cupid-green">Decline</button>
    <button class="cancel cupid-green">Cancel</button>
  </td>
</tr> 
```

和CSS：

```
/* Don't show the cancel button for normal rows, or the decline button for pending rows */
tr.booking button.cancel,
td.booking.pending button.decline {
  display: none;
}
/* When the row is pending, show the cancel button */
tr.booking.pending button.cancel{
  display: inline-block;
} 
```

最后，jQuery/JS：

```
$(function(){
  var bookingRows = $('table tr.booking'); //Find all the booking rows

  bookingRows.each(function(){
    var row = $(this); //Stash a reference to the row

    //If you can add a class of 'pending' to the status <td>, this becomes even cleaner and nicer...
    if (row.find('td.status').text().toLowerCase() == 'pending') { //Check the contents of the status column
      row.addClass('pending'); //Add a class to the row so the CSS can do its thing...
    }
  });
}); 
```

老实说，如果您可以在服务器端进行任何更改（我希望您可以这样做，以便按照我的示例使 JS 更容易），您也可以让服务器首先使用正确的按钮创建行地方。是否有理由需要在客户端上使用 JS 完成此操作？

如果您需要更多细节或遇到困难，请告诉我 - 我尚未测试此代码，但它应该没有问题。

# android - 保存异构列表视图的更好解决方案是什么？

> ID：15461064
> 
> 赞同：0
> 
> 时间：2013-03-17T13:07:39.357
> 
> 标签：android, listview, adapter, heterogeneous

我有一个用于异构项目列表的适配器，所有`Action`类型。

## ActionAdapter.java

```
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ActionAdapter extends ArrayAdapter<Action> {
    Context context; 
    int layoutResourceId;    
    ArrayList<Action> actions = null;

    public ActionAdapter(Context context, int layoutResourceId, ArrayList<Action> actions) {
        super(context, layoutResourceId, actions);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.actions = actions;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ActionHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(actions.get(position).getViewId(), parent, false);

            holder = new ActionHolder();
            holder.title = (TextView)row.findViewById(R.id.action_title);

            row.setTag(holder);
        }
        else
        {
            holder = (ActionHolder)row.getTag();
        }

        Action action = actions.get(position);
        holder.title.setText(action.getTitle());

        return row;
    }

    static class ActionHolder
    {
        TextView title;
    }
} 
```

动作是一个抽象类，因此`actions.get(position).getViewId()`我得到了该动作的适当布局，每个人都有不同的字段（文本视图、编辑文本等）。

我让用户动态添加/删除操作，并且我希望在屏幕旋转等上保留列表。我发现我可以`android:configChanges="orientation|screenSize"`在清单中添加，但[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)说它应该是最后的手段。

最好的方法是什么？我的意思是，我应该将该标签保留在清单中还是更好，即在数据库中绑定列表？在后一种情况下，我该如何处理具有不同字段的操作？

*而且，永久*保存列表的更强大的方法是什么？例如，我希望用户可以将此类操作列表保存为模板以供将来使用

**如果您认为我可以以更好的方式做某事（例如扩展 BaseAdapter 而不是 ArrayAdapter），请解释原因，我对更改持开放态度**

# php - Yii Captcha 小部件中的日文字符？

> ID：15461066
> 
> 赞同：5
> 
> 时间：2013-03-17T13:07:56.207
> 
> 标签：php, security, yii, captcha, multibyte

在 Yii 中开发一个日本论坛网络应用程序。问题是我们开始收到一些英语垃圾邮件，因为验证码是英文字符，任何能阅读它的人基本上都可以发送垃圾邮件。我想要日文汉字的验证码，它是多字节字符串类型。以前有人在 Yii 中做过多字节验证吗？任何建议或链接都​​会有所帮助。

**如果我可以预先定义显示的字符，那也很酷，但这是奖励。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:11:02.027

我找到了解决方案（至少对于日语用途）。查看 Yii 老手[softark](http://www.yiiframework.com/user/13986/)的超棒 CCaptcha 扩展***jcaptcha***：[http ://www.yiiframework.com/extension/jcaptcha/](http://www.yiiframework.com/extension/jcaptcha/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:20:02.463

你可以试试这个扩展：

[https://subversion.assembla.com/svn/ghd/trunk/protected/extensions/captchaExtended/CaptchaExtendedAction.php](https://subversion.assembla.com/svn/ghd/trunk/protected/extensions/captchaExtended/CaptchaExtendedAction.php)

# mysql - 当我在 where 中使用 rand 时，为什么我的 mysql 回答“不使用密钥”

> ID：15461067
> 
> 赞同：2
> 
> 时间：2013-03-17T13:08:33.127
> 
> 标签：mysql

我有一张有 4,000,000 条记录的表。创建表： (user_id int, partner_id int, PRIMARY_KEY ( user_id )) engine=InnoDB; 我想测试`select`100 条记录的性能。然后，我测试了以下内容：

```
mysql> explain select user_id from MY_TABLE use index (PRIMARY)  where user_id IN ( 1 );
+----+-------------+----------+-------+---------------+---------+---------+-------+------+-------------+
| id | select_type | table    | type  | possible_keys | key     | key_len | ref   | rows | Extra       |
+----+-------------+----------+-------+---------------+---------+---------+-------+------+-------------+
|  1 | PRIMARY     | MY_TABLE | const | PRIMARY       | PRIMARY | 4       | const |    1 | Using index |
+----+-------------+----------+-------+---------------+---------+---------+-------+------+-------------+
1 row in set, 1 warning (0.00 sec) 
```

还行吧。但是，这个查询是由 mysql 缓冲的。所以，这个测试在第一次测试之后没有。

然后，我想到了一个通过随机值选择的sql。我测试了以下内容：

```
mysql> explain select user_id from MY_TABLE use index (PRIMARY)  where user_id IN ( select ceil( rand() ) );
+----+-------------+----------+-------+---------------+---------+---------+------+---------+--------------------------+
| id | select_type | table    | type  | possible_keys | key     | key_len | ref  | rows    | Extra                    |
+----+-------------+----------+-------+---------------+---------+---------+------+---------+--------------------------+
|  1 | PRIMARY     | MY_TABLE | index | NULL          | PRIMARY | 4       | NULL | 3998727 | Using where; Using index |
+----+-------------+----------+-------+---------------+---------+---------+------+---------+--------------------------+ 
```

但是，很糟糕。 `Explain`表明 possible_keys 为 NULL。因此，计划了全索引扫描，实际上，它比之前的速度太慢了。

然后，我想请你教我如何用索引查找写随机值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:03:09.170

在 SQL 中使用`rand()`通常是使查询变慢的可靠方法。这里的一个共同主题是人们使用它`ORDER BY`来获得随机序列。它很慢，因为它不仅会丢弃索引，而且还会读取整个表。

但是，在您的情况下，函数调用在子查询中的事实应该允许外部查询仍然使用其索引。事实上，这似乎并不奇怪（所以我给了这个问题+1 票）。

我的理论是，也许 MySQL 的优化器弄错了——它看到了内部查询中的函数，并错误地决定它不能使用索引。

我唯一可以建议解决的方法是使用`force index`推动 MySQL 使用您想要的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:42:35.770

[请参阅rand()](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_rand)的定义。

如果我理解正确，您正在尝试从数据库中获取随机记录。如果是这种情况，再次从 rand() 定义：

> ORDER BY RAND() 结合 LIMIT 对于从一组行中选择随机样本很有用：
> 
> `SELECT * FROM table1, table2 WHERE a=b AND c<d -> ORDER BY RAND() LIMIT 1000;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:54:49.333

这是 MySQL 优化器的一个限制，它不能告诉子查询只返回一个值，它必须假设子查询返回具有不可预测值的多行，甚至可能是 user_id 的*所有*值。因此它决定只进行索引扫描。

这是一个解决方法：

```
mysql> explain select user_id from MY_TABLE use index (PRIMARY)  
where user_id = ( select ceil( rand() ) ); 
```

请注意，MySQL 的 RAND() 函数返回 range 中的值`0 <= v < 1.0`。如果你 CEIL() 它，你可能会得到值 1。因此你几乎总是会得到 user_id=1 的行。如果您的表中没有这样的行，您将得到一个空集结果。您当然不会在所有用户中随机选择一个用户。

要解决这个问题，您必须将 rand() 乘以不同的 user_id 值的数量。这带来了您可能存在差距的问题，因此随机选择的值不会与任何现有的 user_id 匹配。

* * *

回复您的评论：

当您进行索引扫描时，您总是会看到可能的键为 NULL（即“类型”是“索引”）。

我在一个类似的表上尝试了你的解释查询，看来优化器无法确定子查询是一个常量表达式。您可以通过计算应用程序代码中的随机数，然后在查询中将结果用作常量值来解决此限制：

```
select user_id from MY_TABLE use index (PRIMARY)  
where user_id = $random; 
```

# c - 为什么我的双向链表的元素没有正确显示？

> ID：15461070
> 
> 赞同：0
> 
> 时间：2013-03-17T13:08:41.200
> 
> 标签：c, pointers, void-pointers, doubly-linked-list

以下程序接收表单的输入字符串，`ins "name_to_insert" birthdate`并应将此信息插入到双向链表中。每次插入后都会显示列表的内容以及元素的数量。元素的数量正在正确显示，但不是名称和出生日期，*而是 2686707*被显示 n 次（n = 列表中的元素数量）。

我怀疑我的打印函数*printList()*有问题，但我不知道是什么问题。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "DLList.h"

typedef struct dataStructure
{
    int birthday;
    char *name;
} dataStructure;

int main()
{
    ListT *l=createList();
    char op[4], nameTemp[30], *name, s[50];
    int date;
    while (scanf("%[^\n]%*c", s)==1)
    {
        sscanf(s, "%s", op);
        if (strcmp(op, "ins")==0)
        {
            sscanf(s, "%*s %[^0-9]%d", nameTemp, &date);
            name=nameTemp+1; // Remove opening quotation mark
            name[strlen(name)-2]='\0'; // Remove closing quotation mark
                NodeT *p=createNode();
                p->data=(dataStructure*)malloc(sizeof(dataStructure));
                ((dataStructure*)p->data)->birthday=date;
                ((dataStructure*)p->data)->name=name;
                insertLastNode(l, p);
                printf("List length: %d\n", l->length);
                printList(l);
        }
    }
    return 0;
}

void printList(ListT *l)
{
    NodeT *p=l->first;
    while (p)
    {
        printf("%d %s\n", (((dataStructure*)p->data)->birthday, (dataStructure*)p->data)->name);
        p=p->next;
    }
    printf("--\n");
} 
```

**DLList.h**的内容：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct nodetype
{
    struct nodetype *prev, *next;
    void *data;
} NodeT;

typedef struct
{
    int length;
    NodeT *first, *last;
} ListT;

NodeT *createNode();
ListT *createList();
void insertLastNode(ListT *l, NodeT *p); 
```

**DLList.c**的内容：

```
#include "DLList.h"

NodeT *createNode()
{
    NodeT *p=(NodeT*)malloc(sizeof(NodeT));
    p->next=p->prev=NULL;
    return p;
}

ListT *createList()
{
    ListT *l=(ListT*)malloc(sizeof(ListT));
    l->first=l->last=NULL;
    l->length=0;
    return l;
}

void insertLastNode(ListT *l, NodeT *p)
{
    if (l->first==NULL)
    {
        l->first=l->last=p;
        p->prev=p->next=NULL;
        l->length++;
    }
    else
    {
        p->prev=l->last;
        p->next=NULL;
        l->last->next=p;
        l->last=p;
        l->length++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:22:47.590

在您的程序中，您将指针分配给`name`如下：

```
((dataStructure*)p->data)->name=name; 
```

此名称源自`sscanf`以下内容：

```
sscanf(s, "%*s %[^0-9]%d", nameTemp, &date);
name=nameTemp+1; // Remove opening quotation mark
name[strlen(name)-2]='\0'; // Remove closing quotation mark 
```

这意味着对于循环的每次运行，您都在读取相同的`nameTemp`或`name`数组并将其存储到链表中。对于循环的每次运行，您可能必须分配一个单独的空间来存储`name`并分配给您的节点。

**编辑1：**

当您创建一个新节点时，还有一个类型转换问题。`p->data`是`void *`类型，在代码中，我相信，新分配的内存被类型转换`dataStructure *`如下

```
p->data=(dataStructure*)malloc(sizeof(dataStructure)); 
```

您还可以更改您的数据结构定义如下

```
typedef struct dataStructure
{
    int birthday;
    char name[64]; // Change from pointer to an array
} dataStructure; 
```

并修改循环中的逻辑以复制名称，如下所示：

```
p->data=(dataStructure*)malloc(sizeof(dataStructure));
((dataStructure*)p->data)->birthday=date;
strcpy(((dataStructure*)p->data)->name, name); // Modified from pointer assignment to strcpy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:52:13.793

代码中有两个错误。

**第一：** 代替

```
((dataStructure*)p->data)->name=name; 
```

做

```
((dataStructure*)p->data)->name = (char*)malloc(strlen(name)+1);
strcpy(((dataStructure*)p->data)->name, name); 
```

以避免内存泄漏。

**第二** 在 printList 函数中，括号有误。执行以下操作：

```
printf("%d %s\n", ((dataStructure*)p->data)->birthday, ((dataStructure*)p->data)->name); 
```

其他一切都有效。这是我在测试程序时得到的输出。 ![在此处输入图像描述](../Images/036adcb74376d1d3999f774748c8e52c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:30:52.787

在调试器中运行它以准确查看您的函数在做什么。例如，如果您从 Unix 命令行运行，请使用`-g`标志编译，然后在`gdb`. 在困扰您的函数的开头设置断点。谷歌诸如“gdb 备忘单”之类的详细信息，这很容易。

# javascript - 适用于 Android 的经典 Eclipse 中的 javascript 调试器

> ID：15461073
> 
> 赞同：1
> 
> 时间：2013-03-17T13:09:31.147
> 
> 标签：javascript, android

是否有任何完美的工具可以在 Android 的经典 Eclipse 中调试 javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:38:11.520

已经尝试过适用于 android 的 jsHybugger？[https://www.jsHybugger.com](https://www.jsHybugger.com)

# android - onListItemClick 活动扩展 ListActivity

> ID：15461077
> 
> 赞同：0
> 
> 时间：2013-03-17T13:09:52.953
> 
> 标签：android, listview

我尝试了一个列表视图，但是当我单击一个元素时，我没有吐司

```
public class MarkersListActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String[] titles = new String[] {"Titre 1", "Titre 2", "Titre 3", "Titre 4"};
        String[] des = new String[] {"des 1", "des 2", "des 3", "des 4"};

        setListAdapter( new MarkerListArrayAdapter(this, titles, des));

}

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

    //get selected items
    String selectedValue = (String) getListAdapter().getItem(position);
    Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

    }

} 
```

标记列表阵列适配器

```
public class MarkerListArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] titleText;
private final String[] descriptionText;

public MarkerListArrayAdapter(Context context, String[] titles, String[] description) {
    super(context, R.layout.marker_list_layout, titles);
    this.context = context;
    this.titleText = titles;
    this.descriptionText = description;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.marker_list_layout, parent, false);
    TextView title = (TextView) rowView.findViewById(R.id.title);
    TextView description = (TextView) rowView.findViewById(R.id.description);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.image);

    title.setText(titleText[position]);
    description.setText(descriptionText[position]);

    imageView.setBackgroundColor(Color.argb(255,255,0,0));

    return rowView;
}
} 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="5dp" >

<ImageView
    android:id="@+id/image"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="5dp"
    android:src="@drawable/transparent" >
</ImageView>

<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="30sp" >
    </TextView>

    <TextView
        android:id="@+id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="15sp" />

</LinearLayout>

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:12:31.503

你应该使用：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
```

代替方法。

让你`Activity`：`implements AdapterView.OnItemClickListener`

然后在`onCreate`添加这个命令：

```
list.setOnItemClickListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:16:39.473

你还没有调用**super** of `onListItemClick()`... 执行以下操作：

```
protected void onListItemClick(ListView l, View v, int position, long id){ 
    super.onListItemClick(l, v, position, id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-26T07:58:25.587

您必须在 MarkersListActivity 类中设置 setContentView(R.layout.activity_main) 方法，并且您的列表视图**ID**应为“@android:id/list”

添加此布局**activity_main**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:paddingLeft="8dp"
     android:paddingRight="8dp">

 <ListView android:id="@android:id/list" //Important this one.
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#00FF00"
           android:layout_weight="1"
           android:drawSelectorOnTop="false"/>

 </LinearLayout> 
```

查看 listactivity 的官方文档 [https://developer.android.com/reference/android/app/ListActivity.html](https://developer.android.com/reference/android/app/ListActivity.html)

# c++ - 必须在构造函数基/成员中初始化？

> ID：15461081
> 
> 赞同：5
> 
> 时间：2013-03-17T13:10:04.653
> 
> 标签：c++, constructor

我有这个：

```
class SistemPornire
{
Motor& m;
Electromotor& e;
public:
SistemPornire(Motor&,Electromotor&);
} 
```

其中 Motor 和 Electromotor 是另外两个类。我尝试为此类定义构造函数，如下所示：

```
SistemPornire::SistemPornire(Motor& M,Electromotor& E)
{
this->m = M;
this->e = E;
} 
```

但它给了我 'SistemPornire::m' ：必须在构造函数基/成员初始化列表中初始化和 'SistemPornire::e' ：必须在构造函数基/成员初始化列表中初始化

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T13:11:10.340

您必须使用[**初始化列表**](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)，因为引用必须始终在创建时进行初始化：

```
SistemPornire::SistemPornire(Motor& M,Electromotor& E) : m(M), e(E) { }
//                                                     ^^^^^^^^^^^^ 
```

如果这不是必需的，则构造函数的主体可以在这些引用绑定到对象之前访问它们。然而，在 C++ 中，引用必须始终绑定到一个对象。

初始化列表中的初始化总是保证在构造函数的主体执行之前（以及在所有基类子对象的构造之后）执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:11:22.147

引用必须在成员初始化器列表中初始化：

```
SistemPornire::SistemPornire(Motor& M, Electromotor& E) : m(M), e(E) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:11:48.387

试试这个：

```
SistemPornire::SistemPornire(Motor& M,Electromotor& E)
: m(M)
, e(E)
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:13:25.797

初始化列表是一组在构造函数主体之前执行的初始化。在这种情况下，您可以这样使用它们：

```
SistemPornire::SistemPornire(Motor& M,Electromotor& E)
:
    m(M),
    e(E)
{} 
```

这将`m`使用`M`和初始化`e`。`E`

鼓励所有成员初始化的初始化器列表，并且对于必须初始化的成员*（*例如引用）是必需的。与例如指针相反，它将具有默认的垃圾值。这是合法的，尽管您在实际使用指针时会调用未定义的行为。

总是必须初始化引用的原因是，它们总是保证引用一个有效的对象（例如，指针可以自由地指向它们想要的任何垃圾，包括默认的垃圾值）。这种强制性初始化的另一个结果是以下代码：

```
int someInt;
int& someReference; //Compile-time error: someReference must be intialized
someReference = someInt; //Too little, too late 
```

正确的代码当然是：

```
int someInt;
int& someReference = someInt; //OK, someReference has been initialized 
```

# android - 在 android 对话框生成器中创建微调器适配器

> ID：15461082
> 
> 赞同：0
> 
> 时间：2013-03-17T13:10:12.377
> 
> 标签：android, android-spinner, android-alertdialog

我的警报对话框构建器中的微调器有问题，它在编译时没有显示任何错误，我还调用`alertdialog.show()`方法来显示我的自定义对话框，但它无法填充我的微调器项目。这是我的代码

```
public Dialog add_pop_up()
{
    AlertDialog.Builder builder = new AlertDialog.Builder(UgJadwal.this);
    LayoutInflater inflater = UgJadwal.this.getLayoutInflater();
    builder.setView(inflater.inflate(R.layout.addpopup, null));
    builder.setIcon(R.drawable.add);
    builder.setTitle("Add new schedule");

    builder.setPositiveButton(R.string.add, new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int id)
        {
            day = (Spinner)findViewById(R.id.day);
            subject = (EditText)findViewById(R.id.subject);
            time = (EditText)findViewById(R.id.time);
            location = (Spinner)findViewById(R.id.location);
            lecture = (EditText)findViewById(R.id.lecture);
            ArrayAdapter<CharSequence> adapterDay = ArrayAdapter.createFromResource(UgJadwal.this, R.array.day, android.R.layout.simple_spinner_item);
            adapterDay.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            day.setAdapter(adapterDay);
            Toast.makeText(getApplicationContext(), "Added Successfully!", Toast.LENGTH_SHORT).show();
        }
    });
    builder.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int id)
        {
            //
        }
    });
    return builder.create();
} 
```

日志猫：

```
03-17 20:14:59.030: E/AndroidRuntime(9889): FATAL EXCEPTION: main
03-17 20:14:59.030: E/AndroidRuntime(9889): java.lang.NullPointerException
03-17 20:14:59.030: E/AndroidRuntime(9889):     at com.rk.ug_simplify.UgJadwal$3.onClick(UgJadwal.java:195)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at android.os.Looper.loop(Looper.java:123)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at java.lang.reflect.Method.invokeNative(Native Method)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at java.lang.reflect.Method.invoke(Method.java:521)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-17 20:14:59.030: E/AndroidRuntime(9889):     at dalvik.system.NativeStart.main(Native Method) 
```

更新！以上是我的 logcat，但该错误指向自定义对话框的另一个上下文。有人知道我的错误吗？感谢您的帮助，谢谢！

更新 2！！添加视图

```
public Dialog add_pop_up()
{
    AlertDialog.Builder builder = new AlertDialog.Builder(UgJadwal.this);
    LayoutInflater inflater = UgJadwal.this.getLayoutInflater();
    final View dialogview = inflater.inflate(R.layout.addpopup, null);
    builder.setView(dialogview);
    builder.setIcon(R.drawable.add);
    builder.setTitle("Add new schedule");

    builder.setPositiveButton(R.string.add, new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int id)
        {
            day = (Spinner)dialogview.findViewById(R.id.day);
            subject = (EditText)dialogview.findViewById(R.id.subject);
            time = (EditText)dialogview.findViewById(R.id.time);
            location = (Spinner)dialogview.findViewById(R.id.location);
            lecture = (EditText)dialogview.findViewById(R.id.lecture);

            ArrayAdapter<CharSequence> adapterDay = ArrayAdapter.createFromResource(UgJadwal.this, R.array.day, android.R.layout.simple_spinner_item);
            adapterDay.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            day.setAdapter(adapterDay);
            String sub = subject.getText().toString();
            Toast.makeText(UgJadwal.this, "Success " + sub, Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:22:00.370

如果 Spinner 在 `Dialog`布局内，那么您将需要使用 Dialog Layout 实例来访问它。将您的代码更改为：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(UgJadwal.this);
    LayoutInflater inflater = UgJadwal.this.getLayoutInflater();

    // inflate layout to View 
    View dialogview = inflater.inflate(R.layout.dialog_layout, null);

    builder.setView(dialogview);  //<< set view for Dialog

    //....your code here....

    builder.setPositiveButton(R.string.add, new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int id)
        {
          day = (Spinner)dialogview.findViewById(R.id.day); //<< access Spinner

          // do same for other Views to access it from dialogview
          // your code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-02T10:33:20.090

```
public void Getradius() {
    // Set up download interaction. Display a dialog
    // when the user clicks download button and require
    // a user-provided region name
    android.app.AlertDialog.Builder builder = new android.app.AlertDialog.Builder(class.this);

    final Spinner min_zoom=new Spinner(class.this);
    final Spinner max_zoom=new Spinner(class.this);

    ArrayAdapter min = new ArrayAdapter(this, R.layout.spinner_item_register, minzoom_values);
    min.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    min_zoom.setAdapter(min);

    // Build the dialog box
    builder.setTitle("Set Radius")
            .setView(min_zoom)
            .setPositiveButton("GET COURSE LIST", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            })
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
    // Display the dialog
    builder.show();
} 
```

# java - 构建器模式：首选哪个变体？

> ID：15461083
> 
> 赞同：7
> 
> 时间：2013-03-17T13:10:20.197
> 
> 标签：java, effective-java, builder-pattern

我正在阅读 Effective Java 书，并为我的未来参考创建笔记，我遇到了 Builder Pattern。

好吧，我了解它是什么以及它应该如何使用。在此过程中，我创建了构建器模式的两个示例变体。

我需要帮助来列出差异和各自的优势吗？好吧，我当然注意到，`Example 1`公开的方法更少，限制更少，更通用，允许更灵活地使用。

请指出我错过的其他事情？

**示例 1**

```
package item2;

/**
 * @author Sudhakar Duraiswamy
 *
 */
public  class Vehicle {

    private String type;
    private int wheels;

    interface Builder<T>{
        public  T build();
    }

    public static class CarBuilder implements Builder<Vehicle>{
        private String type;
        private int wheels;     

        CarBuilder createVehicle(){
            this.type= "Car";
            return this;
        }

        CarBuilder addWheels(int wheels){
            this.wheels = wheels;
            return this;
        }

        public Vehicle build(){
            Vehicle v = new Vehicle();
            v.type = type;
            v.wheels = wheels;
            return v;
        }               
    }

    public static class TruckBuilder implements Builder<Vehicle>{       
        private String type;
        private int wheels; 

        TruckBuilder createVehicle(){           
            this.type= "Truck";
            return this;
        }

        TruckBuilder addWheels(int wheels){
            this.wheels = wheels;
            return this;
        }

        public Vehicle build(){
            Vehicle v = new Vehicle();
            v.type = type;
            v.wheels = wheels;
            return v;
        }
    }   

    public Vehicle(){

    }

    public static void main(String[] args) {
        //This builds a car with 4 wheels
        Vehicle car = new Vehicle.CarBuilder().createVehicle().addWheels(4).build();

        //THis builds a Truck with 10 wheels
        Vehicle truck = new Vehicle.TruckBuilder().createVehicle().addWheels(10).build();

    }
} 
```

**示例 2**

```
package item2;
/**
 * @author Sudhakar Duraiswamy
 *
 */
public  class Vehicle2 {

    private String type;
    private int wheels;

    interface Builder<T>{
        public  T build();      
        public String getType();
        public int getWheels() ;
    }

    public static class CarBuilder implements Builder<Vehicle2>{
        private String type;
        private int wheels;     

        public String getType() {
            return type;
        }
        public int getWheels() {
            return wheels;
        }

        CarBuilder createVehicle(){
            this.type= "Car";
            return this;
        }

        CarBuilder addWheels(int wheels){
            this.wheels = wheels;
            return this;
        }

        public Vehicle2 build(){        
            return new Vehicle2(this);
        }               
    }

    public static class TruckBuilder implements Builder<Vehicle2>{      
        private String type;
        private int wheels; 

        public String getType() {
            return type;
        }

        public int getWheels() {
            return wheels;
        }

        TruckBuilder createVehicle(){           
            this.type= "Truck";
            return this;
        }

        TruckBuilder addWheels(int wheels){
            this.wheels = wheels;
            return this;
        }

        public Vehicle2 build(){
            return new Vehicle2(this);
        }
    }

public Vehicle2(Builder<? extends Vehicle2> builder){
    Vehicle2 v = new Vehicle2();
    v.type = builder.getType();
    v.wheels = builder.getWheels();
}

    public Vehicle2(){
    }

    public static void main(String[] args) {            
        //This builds a car with 4 wheels
        Vehicle2 car = new Vehicle2.CarBuilder().createVehicle().addWheels(4).build();

        //THis builds a Truck with 10 wheels
        Vehicle2 truck = new Vehicle2.TruckBuilder().createVehicle().addWheels(10).build();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T13:36:13.317

以上都不是。

第一个不允许构建不可变的 Vehicle，这通常是使用 Builder 模式的原因。

第二个示例是第一个示例的变体，它允许使用其他 getter 方法从构建器获取信息。但是这些方法并没有在任何地方使用，除了在 Vehicle 构造函数中，它可以直接访问构建器字段。我看不出添加它们的意义。

我发现有两件更重要的事情需要改进：

1.  这两种构建器类型做的事情完全相同。不需要两种类型。一个就足够了。
2.  该`createVehicle()`方法的作用应该由构建器构造函数完成。如果你构建一个CarBuilder，显然是在构建一辆汽车，所以在构建器构建的时候就应该设置好车辆的类型。我会这样写：

.

```
public final class Vehicle {

    private final String type;
    private final int wheels;

    private Vehicle(Builder builder) {
        this.type = builder.type;
        this.wheels = builder.wheels;
    }

    public static Builder carBuilder() {
        return new Builder("car");
    }

    public static Builder truckBuilder() {
        return new Builder("truck");
    }

    public static class Builder {
        private final String type;
        private int wheels;

        private Builder(String type) {
            this.type = type;
        }

        public Builder addWheels(int wheels){
            this.wheels = wheels;
            return this;
        }

        public Vehicle build() {
            return new Vehicle(this);
        }               
    }

    public static void main(String[] args) {
        Vehicle car = Vehicle.carBuilder().addWheels(4).build();
        Vehicle truck = Vehicle.truckBuilder().addWheels(10).build();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T13:35:44.020

还有第三种变体，代码更少：

除了拥有自己的实例字段外，构建器还可以改变`Vehicle`. 内部类可以编写其外部类的私有成员：

```
class Vehicle {
  private int wheels;

  private Vehicle() {}

  public static class Builder {
    private boolean building = true;
    private Vehicle vehicle = new Vehicle();

    public Builder buildWheels(int wheels) {
      if(!this.building) throw new IllegalStateException();
      this.vehicle.wheels = wheels;
      return this;
    }

    public Vehicle build() {
      this.building = false;
      return this.vehicle;
    }
  }
} 
```

由于字段是私有的，并且您只允许构建*一次*（`building`标志），因此即使字段不再是，构建`Vehicle`的实例仍然对消费者*不可变*`final`（不再具有[*realio-trulio 不变性*，请参阅 Eric 的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)，该文章位于 C# 但概念类似）。

您需要更加小心，因为在对象构造期间不必初始化非最终字段（由编译器强制执行），并且您必须`building`仔细检查状态。但是，您确实保存了所有实例字段的完整副本。通常，如果您有一组相当大的实例变量，这些实例变量是用很少的方法构建的，其中每个方法一次构建几个字段，这很有用。

我知道这并没有指出您的方法的任何优点或缺点。但是，如果您不需要字段，这种方法可以节省大量额外的代码`final`。

# haskell - 如何在 Windows 7 中配置 cabal？

> ID：15461085
> 
> 赞同：9
> 
> 时间：2013-03-17T13:10:39.807
> 
> 标签：haskell, cabal

我已经在 Windows 7 中安装了 Haskell Platform 2012。我在控制台中写了`cabal update`一条消息，说有一个新版本的 cabal。我写`cabal install cabal-install`。安装完成后，它告诉我 cabal 已安装在 C:\username\AppData\Roaming\cabal 中。因此，当我`cabal update`再次这样做时，我会收到相同的信息，即我必须安装新版本的 cabal。我试图从配置文件中更改 cabal 目录，但 cabal 忽略了配置文件。Haskell 只在 Unix 上工作吗？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T15:03:26.943

问题是`cabal`Haskell 平台附带的可执行文件被拾取，而不是您安装的那个。

您需要[编辑`PATH`环境变量](http://support.microsoft.com/kb/310519)的值并将其放在`%AppData%\cabal\bin`之前`%PROGRAMFILES%\Haskell Platform\...\bin`，以便赋予它更高的优先级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-14T18:47:46.577

错误消息不完整。将 cabal-install 全局安装为：

```
cabal install cabal-install --global 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T13:45:15.800

您需要将`C:\username\AppData\Roaming\cabal`（或任何现在具有`cabal`可执行文件的目录 - 使用例如`dir`或您喜欢的文件管理器来验证您是否拥有正确的位置）到您的`%PATH%`环境变量并重新启动您的命令提示符。

# c++ - 在eclipse中调试c++中的一个bug

> ID：15461088
> 
> 赞同：2
> 
> 时间：2013-03-17T13:10:47.953
> 
> 标签：c++

您好，我在 XO.h 中的 Eclipse 中使用了 c++

```
class Master
{
private:
char board[3][3];

public:
Master();
void change_board(int choice[1],char color);
void start_play(Maximizer,Minimizer);
void end(char winner);
char winner();
void play(Maximizer,Minimizer);

};

class Maximizer{};
class Minimizer{}; 
```

在 Xo.cpp

```
void Master::start_play(Maximizer x ,Minimizer o)
{play(x,o);
 } 
```

但是 Eclipse 会生成一个“原型为`void Master::start_play(Maximizer, Minimizer)' does not match any in class Master`”的错误，请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:29:51.390

我认为问题在于`Maximizer`and的原型声明时and`Minimizer`还不是已知类型。向上移动到的定义之上。`start_play``play``class Maximizer{};``class Minimizer{};``Master`

```
class Maximizer{};
class Minimizer{};

class Master
{
private:
    char board[3][3];

public:
    Master();
    void change_board(int choice[1],char color);

    //above declaration of Maximizer and Minimizer required
    void start_play(Maximizer,Minimizer);

    void end(char winner);
    char winner();

    //above declaration of Maximizer and Minimizer required
    void play(Maximizer,Minimizer);

}; 
```

就目前而言，原型`Master`与您以后的函数定义不匹配，因为在声明原型时，`Maximizer`它们`Minimizer`还不是已知类型，而在定义函数时，它们是。

# scrapy - 如何在 Scrapy 中正确使用 item_loader？Item_loader 类无法正常工作

> ID：15461089
> 
> 赞同：0
> 
> 时间：2013-03-17T13:10:50.993
> 
> 标签：scrapy

我通过元属性将scrapy项目传递给回调函数，如下所示：

```
def parse_VendorDetails(self, response):
    loader = XPathItemLoader(response.meta['item'], response=response)

    print loader.get_collected_values('testField') <-- returns empty value
    print response.meta['item']['testField'] <-- return expected value 
```

第一个打印输出一个空列表。第二次打印按预期返回值。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:42:00.247

目前在[*ItemLoaders*](https://github.com/scrapy/scrapy/pull/208#issuecomment-11469555)[中存在一个错误](https://github.com/scrapy/scrapy/pull/208#issuecomment-11469555)*，`get_output_value()`并且`get_collected_values()`忽略`item`参数并仅查看`ItemLoader._values`因此这些方法中存在一些不一致的行为，因为`load_item()`未返回加载的数据 via：*

 *```
>>> from scrapy.contrib.loader import ItemLoader
>>> il = ItemLoader(response=response, item=dict(foo=1))
>>> il.add_value('bar', 3)
>>> il._values
defaultdict(<type 'list'>, {'bar': [3]})

>>> il.item
{'foo': 1}

>>> il.get_output_value('foo')
[]

>>> il.get_output_value('bar')
[3]

>>> il.get_collected_values('foo')
[]

>>> il.get_collected_values('bar')
[3] 
```

您可以安装[建议的补丁](https://github.com/stav/scrapy/commit/415048237ce4ec2712bf4bc5653424ca070a3f7c)或不使用`get_collected_values`. 如果你安装了补丁，你可以使用`values`这个补丁的参数，我们会体验到一个更理智的结果：

```
>>> from scrapy.contrib.loader import ItemLoader
>>> il = ItemLoader(response=response, item={}, values=dict(foo=1))
>>> il.add_value('bar', 3)
>>> il._values
defaultdict(<type 'list'>, {'foo': [1], 'bar': [3]})

>>> il.item
{}

>>> il.get_output_value('foo')
[1]

>>> il.get_output_value('bar')
[3]

>>> il.get_collected_values('foo')
[1]

>>> il.get_collected_values('bar')
[3] 
```*

# php - Silex 路由 .htaccess webroot

> ID：15461091
> 
> 赞同：4
> 
> 时间：2013-03-17T13:11:19.020
> 
> 标签：php, .htaccess, routing, silex

我正在使用 Silex“微框架”来为我的应用程序进行路由。我目前被困在如何用 .htaccess 重写 url。

标准 Silex 网址：`localhost/myapp/web/index.php/hello/name`

我希望它看起来像：`localhost/myapp/hello/name`

使用以下 .htaccess 代码，我可以省略该`/index.php/`部分。但我仍然必须使用该`/web/`部分。

```
RewriteEngine On
RewriteCond %{THE_REQUEST} /myapp/web/index.php/
RewriteRule ^/myapp/web/index.php/(.*) /myapp/$1 [R=301,L]
RewriteCond %{REQUEST_URI} !/myapp/web/index.php/
RewriteRule ^(.*)$ /myapp/web/index.php/$1 [L] 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-19T14:53:30.243

我现在遇到了同样的问题，解决方案是将 .htaccess 内容更改为：

```
FallbackResource /index.php 
```

所以在你的情况下

```
FallbackResource /web/index.php 
```

这对我有用，我希望有人会发现它有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T02:16:33.527

来自：[http ://silex.sensiolabs.org/doc/web_servers.html](http://silex.sensiolabs.org/doc/web_servers.html)

```
<IfModule mod_rewrite.c>
    Options -MultiViews    
    RewriteEngine On
    RewriteBase /web
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [QSA,L]
</IfModule> 
```

正确的做法是设置您的`DocumentRoot`to `/path/to/your/app/web`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T08:56:13.013

我有一个类似的问题，解决了以下

```
<IfModule mod_rewrite.c>
 Options -MultiViews
 RewriteEngine On
 RewriteBase /web
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)? index.php/$1 [QSA,L]
 RewriteRule ^/?$ /web/ [R=301]
</IfModule> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:03:57.157

这样的事情应该可以解决问题：

```
RewriteEngine On
RewriteBase /

RewriteRule ^myapp/web/index.php/  /myapp/                 [R=301,L]
RewriteRule ^myapp/                /myapp/web/index.php/   [L] 
```

# magento - Magento 404 在所有移动浏览器中，但正常没问题

> ID：15461094
> 
> 赞同：-1
> 
> 时间：2013-03-17T13:11:32.440
> 
> 标签：magento, mobile, browser, http-status-code-404

我们有一个 Magento CE 1.7.0.2。版本，在 explorer、chrome、firefox 上完美运行。但是所有的移动浏览器都会给出一个 404 page not found 错误（magento 布局），我无法解决这个问题。有没有人看到这个？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:06:00.003

#

## 移动用户代理重定向

```
#RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
#RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
#RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302] 
```

#

检查这些行是否在您的 .htaccess 文件中未注释。

同样在配置中为移动主题定义了哪些值。

# android - 水平滚动的 TextView 显示跨 android 版本的行为不一致

> ID：15461100
> 
> 赞同：4
> 
> 时间：2013-03-17T13:12:15.140
> 
> 标签：android, textview, arabic, scrollable

我有一个文本视图，其中包含单行阿拉伯语（从右到左）文本。文本内容随时间增加，最后（最左侧）部分应始终出现。水平滚动条最初设置为向右，并随着文本的增加自动向左滚动。

以下代码在 2.3 Android 手机上运行良好。这来自 layout.xml

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="none"
    android:fadingEdge="horizontal"
    android:gravity="right"
    android:scrollHorizontally="true"
    android:scrollbars="horizontal"
    android:singleLine="true"
    android:text="@string/txt_start"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

我在 Activity 的 onCreate() 方法中有这个

```
tv = (TextView) findViewById(R.id.textView1);
tv.setMovementMethod(new ScrollingMovementMethod()); 
```

问题是具有 android 4.0+ 的手机上的文本视图行为不一致。水平滚动条最初没有放在右边，所以 TextView 最初是空白的！如果我尝试滚动空白 textView，则会显示文本。添加额外文本时，滚动条不会滚动以显示新文本，但如果我手动滚动文本，它会出现。

我搜索了stackoverflow，并尝试添加以下属性但没有成功。

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:52:40.190

这些解决方案都不适用于我想用`android:gravity="right"`. 有帮助的简单解决方法是将 TextView 重力保持在左侧，但将其与相对布局容器内的右侧对齐：

```
<RelativeLayout
  android:orientation="horizontal"
  android:layout_width="match_parent"
  android:layout_height="wrap_content">
  <AutoScrollingTextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:gravity="left"
    android:singleLine="true"
    android:ellipsize="none">
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:07:12.747

试试这个例子，它应该可以工作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <TextView
         android:id="@+id/myText"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="@string/myscroll"
         android:ellipsize="marquee"
         android:singleLine="true"
         android:scrollHorizontally="true"
         android:marqueeRepeatLimit="10"
>
</LinearLayout> 
```

**注意**：测试选框时，不要在 Eclipse 内部的设计视图中进行测试，在 emulator\device 上尝试。

另外，如果您想在代码中添加**滚动效果**：

```
TextView tView = (TextView) findViewById(R.id.myText);
tView.stSelected(true); 
```

要使**选取框滚动在选取框末尾不停顿**：

```
android:marqueeRepeatLimit=”marquee_forever” 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:06:18.360

发现不推荐使用重力左/右，开发人员应该使用开始/结束。对于要滚动的文本，需要将“wrap_content”设置为其宽度，此外还需要将 textDirection 设置为 RTL。由于未知原因，textDirection 没有以编程方式工作，而是在 xml 中工作。

此代码适用于所有 API 版本的 android。

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="end"
        android:textDirection="rtl"
        android:scrollHorizontally="true"
        android:scrollbars="horizontal"
        android:singleLine="true"
        android:ellipsize="none"
        android:text="@string/txt_start"
        android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

# css - Shopify 用户注册表单的自定义字段

> ID：15461101
> 
> 赞同：3
> 
> 时间：2013-03-17T13:12:23.643
> 
> 标签：css, meta-tags, shopify, liquid, liquid-layout

我找不到任何有关如何为用户注册论坛添加自定义字段的文档，所以我尝试了一些方法但没有奏效：

```
<div class="single-full-width customer">
    <div class="login">
        {% form 'create_customer' %}
            {% if form.errors %}
                {% for field in form.errors %}
                    <p class="input-error-wrapper"><span>{{field}} {{ form.errors.messages[field] }}</span></p>
                {% endfor %}
            {% endif %}
            <p>
                <label>First Name:</label>
                <input type="text" value="" name="customer[first_name]" class="input-text-1" />
            </p>
            <p>
                <label>Last Name:</label>
                <input type="text" value="" name="customer[last_name]" class="input-text-1" />
            </p>
            <p>
                <label>Email Address:</label>
                <input type="text" value="" name="customer[email]" class="input-text-1" />
            </p>

            <p>
                <label>Password:</label>
                <input type="password" value="" name="customer[password]" class="input-text-1" />
            </p>

            <p>
                <label>Pet Name:</label>
                <input type="text" value="" name="customer[pet_name]" class="input-text-1" />

                <input type="radio" name="customer[pet]" value="cat">Cat
                <input type="radio" name="customer[pet]" value="dog">Dog
            </p>

            <p class="sign-in">
                <label></label>
                <a href="#" class="button-1 custom-font-1 trans-1 form-submit-btn"><span>Register</span></a>
                <b>or <a href="{{ shop.url }}">Return to store</a></b>
            </p>
        {% endform %}
    </div> 
```

我添加的字段是文本输入 - 宠物名称和 Cat/Dog 的单选框。我使用了一个测试帐户，但输出是没有保存任何内容。我已经使用 {{ customer.pet_name }} 尝试获取保存的值，但没有得到任何回报。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:59:36.073

将您的宠物名称保存在标签或便条中，因为它们是为客户而存在的。pet_name 显然不是客户字段。

```
<p>
  <label>Pet Name:</label>
  <input type="text" value="" name="customer[note]" class="input-text-1" />
  <input type="radio" name="customer[tags]" value="cat">Cat
  <input type="radio" name="customer[tags]" value="dog">Dog
</p> 
```

# javascript - 矩阵包含无效字符

> ID：15461104
> 
> 赞同：0
> 
> 时间：2013-03-17T13:13:04.127
> 
> 标签：javascript, canvas

我刚刚[**在 HN 上看到了这个矩阵，不到 600 个字节**](https://news.ycombinator.com/item?id=5388444)

这是完整的来源：

```
<body style=margin:0 onload="for(s=window.screen,w=q.width=s.width,
    h=q.height=s.height,m=Math.random,p=[],i=0;i<256;p[i++]=1);
    setInterval('9Style=\'rgba(0,0,0,.05)\'9Rect(0,0,w,h)9Style=\'#0F0\';
    p.map(function(v,i){9Text(String.fromCharCode(3e4+m()*33),i*10,v);
    p[i]=v>758+m()*1e4?0:v+10})'.split(9).join(';q.getContext(\'2d\').fill'),33)">
    <canvas id=q> 
```

我的问题是变量的赋值如何以数字开头：`setInterval('9Style=\'rgba(0,0,0,.05...)`我认为js变量不能以数字开头。这不应该是无效的 lhs（左侧）分配吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T13:20:00.397

你是对的，标识符不能以数字开头。如果您仔细观察， 将`9`替换为`;q.getContext('2d').fill`。

`p`循环分解为设置变量并创建一个包含 256秒的数组`1`：

```
s = window.screen,
w = q.width = s.width,
h = q.height = s.height,
m = Math.random,
p = [];
for (i = 0; i < 256; p[i++] = 1); 
```

余：

```
setInterval(
    '9Style=\'rgba(0,0,0,.05)\'9Rect(0,0,w,h)9Style=\'#0F0\';p.map(function(v,i){9Text(String.fromCharCode(3e4+m()*33),i*10,v);p[i]=v>758+m()*1e4?0:v+10})'
    .split(9).join(';q.getContext(\'2d\').fill')
, 33) 
```

这变成：

```
setInterval(";q.getContext('2d').fillStyle='rgba(0,0,0,.05)';q.getContext('2d').fillRect(0,0,w,h);q.getContext('2d').fillStyle='#0F0';p.map(function(v,i){;q.getContext('2d').fillText(String.fromCharCode(3e4+m()*33),i*10,v);p[i]=v>758+m()*1e4?0:v+10})", 33); 
```

将此代码放入[http://jsbeautifier.org/](http://jsbeautifier.org/)给出：

```
;
q.getContext('2d').fillStyle = 'rgba(0,0,0,.05)';
q.getContext('2d').fillRect(0, 0, w, h);
q.getContext('2d').fillStyle = '#0F0';
p.map(function (v, i) {;
    q.getContext('2d').fillText(String.fromCharCode(3e4 + m() * 33), i * 10, v);
    p[i] = v > 758 + m() * 1e4 ? 0 : v + 10
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:20:29.380

它不以数字开头。它只是一个字符串，被拆分：

`'9Style ....'.split(9).join(...`

# c# - 访问数据库时对象名无效异常

> ID：15461105
> 
> 赞同：0
> 
> 时间：2013-03-17T13:13:22.133
> 
> 标签：c#, asp.net, sql

我有`domain`服务器`database`。当我`aspx`通过服务器运行页面时，它给了我异常。

```
Invalid object name 'dbo.Employees'. 
```

在我的数据库员工表中，名称**不以 dbo 开头**。它以`sky.Employees`. 我认为这可能是问题所在。

背后的aspx代码：

```
skyfi_PeopleEntities context = new skyfi_PeopleEntities();
            GridView1.DataSource = (from c in context.Employees
                                    select c).ToList();
            GridView1.DataBind(); 
```

在这段代码中，我认为 ADO.NET EF 可以与默认**dbo 一起使用。**姓名。例外可能来自这里。是否可以从默认的**dbo.** 到**天空。**在当前的设置中`skyfi_PeopleEntities`。我应该怎么做才能解决这个异常问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:05:04.807

我认为这是由于无效的连接字符串，我建议您也尝试使用简单名称调用表。

sky.Employees 或 dbo.Employees 不是错误的原因。

你能向我们展示你的连接字符串吗？此外，还尝试使用简单名称（MyTable1）调用表而不是尝试 sky.Employees

谢谢

# html - 当第一个子元素很强时删除文本缩进

> ID：15461106
> 
> 赞同：2
> 
> 时间：2013-03-17T13:13:24.913
> 
> 标签：html, css

我有一个问题，这有点让我发疯。我有一个文章容器，里面有几个段落。第一段包含一个首字下沉。**第一段**不使用文本缩进，但后面的每一段**都**使用。

**当我在 h3 标题之后**开始一个新段落时，我不想要任何文本缩进。好的，我可以让它工作（例如蓝色文本）。

我的问题是，当我开始一个带有标题的新段落（强后跟一个中断）时，这一行将使用段落的文本缩进，我**不**希望它这样做。我必须在段落内（应该）有强标签，而不是在外面。

我正在考虑一种方法来选择所有以强标签开头的段落。我**不想**使用任何 javascript 来解决这个问题。**我想更改段落的文本缩进，而不是强文本的位置**。

我在这里做了一个[jsFiddle](http://jsfiddle.net/J5C86/1/)。我尝试过这样的事情：

```
p>strong {
    color:#f0f;
    text-indent: 0 !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:25:43.810

您可以为标签添加负边距`strong`，但我假设您需要一个特定的类。

```
strong.subhead {
    margin-left: -3em;
} 
```

工作示例：http: [//jsfiddle.net/J5C86/2/](http://jsfiddle.net/J5C86/2/)

但是，这也是假设您不希望与强标记关联的段落缩进。如果您正在寻找要缩进的子标题下的段落，则需要在`br`.

```
span.subhead-indent {
    margin-left: 3em;
} 
```

示例：http: [//jsfiddle.net/J5C86/4/](http://jsfiddle.net/J5C86/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:29:31.077

要扩展我对您的问题的评论：

如果有一个你不能使用的原因`<h4>`——这将是更合适的标签——你可以简单地为你的`<strong>`元素添加一个负边距：

```
p > strong:first-child {
    margin-left:-3em;
} 
```

[JSFiddle 示例](http://jsfiddle.net/J5C86/7/)。

否则，请`<h4>`改用：

```
<h4>Strong sub header</h4>
<p>Aliquam semper placerat urna...</p>

h3+p, h4+p {
    text-indent:0;
    margin-top: 0;
    padding-top: 0;
}

h3+p {
    color:#00f;
} 
```

[JSFiddle 示例与`<h4>`](http://jsfiddle.net/J5C86/5/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:37:56.890

这个对我有用。用这个：

```
p>strong {
  text-indent: 0 !important;
  color: #f0f;
  display: block;
} 
```

完成此操作后，删除 p>strong 末尾的 br 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:44:21.340

**[演示](http://jsfiddle.net/J5C86/9/)** 我看到了你的问题，发现你没有在`h3`标签中包含你的段落，所以用你的强段落定义你的css，例如。

```
<p class="no-indent"><strong>Strong Sub Header</strong></p> 
```

定义你的CSS这必须工作。

# paypal - 无法登录贝宝沙箱

> ID：15461110
> 
> 赞同：16
> 
> 时间：2013-03-17T13:13:30.370
> 
> 标签：paypal

我正在尝试使用 paypal 沙盒中的业务测试帐户登录，它不断重定向到此 URL [https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_login-submit](https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_login-submit) 并且页面包含一行说“请登录以使用 PayPal 沙盒功能”，其中“PayPal 沙盒”是指向 developer.paypal.com 的锚点，当我点击它时，我会转到我已经使用实时贝宝帐户登录的开发者网站.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-17T18:50:13.720

这是您访问测试帐户页面的方式：

1.  前往[developer.paypal.com](http://developer.paypal.com)
2.  转到[应用程序](https://developer.paypal.com/webapps/developer/applications)
3.  单击[沙盒帐户](https://developer.paypal.com/webapps/developer/applications/accounts)
4.  选择使用 PayPal 登录（使用您的常规帐户 - 而不是沙盒帐户）
5.  （可选）重定向到帐户页面后，从您以前的 Sandbox 帐户导入旧帐户
6.  单击您要登录的帐户
7.  选择“沙盒站点”
8.  使用您的测试帐户登录该站点

希望能帮助到你

# php - 从父数组中获取依赖关系

> ID：15461119
> 
> 赞同：0
> 
> 时间：2013-03-17T13:14:43.900
> 
> 标签：php, arrays, multidimensional-array, iteration, parent-child

我有两个数组：

1.  用于打印的数组，每一项是表格的一行

    ```
    array(
      [1] => array(
        [data] = array(
          [parent] = NULL,
          [depth] = 1
        );
      );

      [2] => array(
        [data] = array(
          [parent] = 1,
          [depth] = 2
        );
      );

      [3] => array(
        [data] = array(
          [parent] = 1,
          [depth] = 2
        );
      );

      [4] => array(
        [data] = array(
          [parent] = 2,
          [depth] = 3
        );
      );

      [5] => array(
        [data] = array(
          [parent] = NULL,
          [depth] = 1
        );
      );

      [6] => array(
        [data] = array(
          [parent] = 5,
          [depth] = 2
        );
      );
    ); 
    ```

2.  按维度排序的数组

    ```
    array(
      [1] => array(
        [data] = array(
          [parent] = NULL,
          [depth] = 1
        );
        [children] => array(
          [2] => array(
            [data] = array(
              [parent] = 1,
              [depth] = 2
            );
            [children] => array(
              [4] => array(
                [data] = array(
                  [parent] = 2,
                  [depth] = 3
                );
              );
            );
          );

          [3] => array(
            [data] = array(
              [parent] = 1,
              [depth] = 2
            );
          );
        );
      );
      [5] => array(
        [data] = array(
          [parent] = NULL,
          [depth] = 1
        );
        [children] => array(
          [6] => array(
            [data] = array(
              [parent] = 5,
              [depth] = 2
            );
          );
        );
      );
    ); 
    ```

我想获得这个数组（从 whitch 没关系）：

```
 array(
      [1] => array(
        [1] = array(
          [parent] = NULL,
          [depth] = 1
        );
      );

      [2] => array(
        [1] = array(
          [parent] = NULL,
          [depth] = 1
        );
        [2] = array(
          [parent] = 1,
          [depth] = 2
        );
      );

      [3] => array(
        [1] = array(
          [parent] = NULL,
          [depth] = 1
        );
        [2] = array(
          [parent] = 1,
          [depth] = 2
        );
      );

      [4] => array(
        [1] = array(
          [parent] = NULL,
          [depth] = 1
        );
        [2] = array(
          [parent] = 1,
          [depth] = 2
        );
        [3] = array(
          [parent] = 2,
          [depth] = 3
        );
      );

      [5] => array(
        [1] = array(
          [parent] = NULL,
          [depth] = 1
        );
      );

      [6] => array(
        [1] = array(
          [parent] = NULL,
          [depth] = 1
        );
        [2] = array(
          [parent] = 5,
          [depth] = 2
        );
      );
    ); 
```

**这是一个数组，我可以通过它的 id 看到每个父母。有人知道吗？**

# php - 以字符串形式发送 HTML 标签

> ID：15461120
> 
> 赞同：1
> 
> 时间：2013-03-17T13:14:52.097
> 
> 标签：php, html

我有一个包含 HTML 标签作为字符串的变量。

```
<table border="1">
    <tr>
        <td width="20">No.</td>
        <td>Name</td>
    </tr>
    <tr>
        <td>1.</td>
        <td>Someone</td>
    </tr>
</table> 
```

比如说，那个变量名是**$html_table**。我想将该变量发送到 TCPDF 函数，这就是为什么我不能对特殊字符进行编码，因为它需要 TCPDF 正确呈现，我的尝试是像这样链接到同一页面。

```
<a href="./index.php?printpdf=$html_table">Print PDF</a> 
```

然后一些代码充当处理程序。

```
if (isset($_GET['printpdf'])) {
    print_page($_GET['printpdf']);
} 
```

如您所知，它根本不起作用。即使来自 $html_table 的内容也不能完美地显示在地址栏上，有什么办法可以解决这个问题吗？

提前致谢。

**编辑（解决方案）**

只需使用像@Jay Bhatt 说的会话变量。

```
$_SESSION['printpdf'] = $html_table; 
```

我将它指向同一页面并有一些处理程序

```
if (isset($_SESSION['printpdf'])) {
    print_pdf($_SESSION['printpdf']);
} 
```

**print_pdf()**是我制作的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:21:28.277

尝试`urlencode`和`urldecode`功能。如果您长时间尝试，`characters`您可以发送的数量也有限制。这样您就不必担心字符编码。`url``html``using session variables`

# irc - 检查 var 之间

> ID：15461126
> 
> 赞同：1
> 
> 时间：2013-03-17T13:15:27.147
> 
> 标签：irc, mirc

```
if (%var == 1 or 2 or 3 or 4 or 5) { } 
```

那么你想要检查变量的值是否在 mirc 中的 1-5 之间？

我可以这样做：

```
if (%var == 1) {  }
if (%var == 2) {  }
if (%var == 3) {  }
if (%var == 4) {  }
if (%var == 5) {  } 
```

**但是有没有更短的方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:05:00.887

惯用的答案是：

```
if (%var isnum 1-5) {

} 
```

# mercurial - 更改列表中的 PyCharm 幻像文件

> ID：15461129
> 
> 赞同：1
> 
> 时间：2013-03-17T13:15:55.140
> 
> 标签：mercurial, pycharm, changelist

我喜欢 PyCharm（和 IntelliJ）。然而，在 Max OSX 的 PyCharm 中，使用 Mercurial VCS，我在工作时会在我的变更列表中得到我所谓的“幻像文件”。我不知道它们为什么会出现，也不知道如何阻止它们出现。“幻像文件”是指实际存在但以绿色字体显示的文件，Show Diff 将它们显示为左侧有一个空文件，右侧有完整文件。有时它们是自上次提交以来我实际更改的文件，有时不是。如果我更改了文件，该文件会在更改列表中出现两次，一次是绿色字体的幻影文件，另一次是蓝色字体，其中 Show Diff 显示实际更新。

# c# - 使用“纯”xaml 布局，是否可以告诉容器不要调整其大小？

> ID：15461132
> 
> 赞同：0
> 
> 时间：2013-03-17T13:16:26.593
> 
> 标签：c#, wpf, xaml, layout

我有一个非常广泛的 XAML 控件。它会影响其父级的大小，因此我不希望它改变布局。我不介意控件是否会被剪裁，或者其他什么 - 但我想要以下内容：

1.  我希望控件是其父级的宽度，并且
2.  我不希望它以其他方式影响其父级的宽度。

我知道我可以通过将 Width 绑定到我感兴趣的父控件的 ActualWidth 来实现这一点。但是，是否有一些面板或其他东西会从其父控件中获取其大小而忽略它的子控件。

因为这是在具有星形列的 Grid 内，所以将其放在 ScrollViewer 内无济于事 - ScrollViewer 仍会增长以填充网格。

在下面的示例中，我希望按钮控制中间列的宽度，文本块最多占用 Button 的空间量：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Button Content="asdsadsad" Grid.Row="1" Grid.Column="1"/>
    <TextBlock IsHitTestVisible="True" Opacity="0" Grid.Row="1" Grid.Column="1" Text="sdfsdfdsfdfhfkjahslkjfhsafhsakjhflkjsahflkjsahdflkjhsadfsdfkgljdsfkgjfdsjgdshf" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:36:58.247

您可以将 TextBlock 放在 Canvas 中，然后将画布剪辑到其边界：

```
 <Canvas Grid.Row="1" Grid.Column="1" ClipToBounds="True">
        <TextBlock IsHitTestVisible="True" Opacity="0.5" Text="sdfsdfdsfdfhfkjahslkjfhsafhsakjhflkjsahflkjsahdflkjhsadfsdfkgljdsfkgjfdsjgdshf" />
    </Canvas> 
```

如果这就是你的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:08:31.577

我看到你已经接受了另一个答案，但如果你只是指文本块，你不能只使用 TextTrimming 吗？

如果不是这种情况，一个简单的 Panel 子类会比画布更好，因为您可以在确定所需大小时显式忽略孩子的大小。你仍然需要测量孩子。在 MeasureOverride 中确定面板的大小时，您只需忽略它们的“DesiredSize”。然后在 ArangeOverride 中，它将遵循您在 MeasureOverride 中指定的最大尺寸。

这样做的好处是文本框或任何与此相关的控件仍然可以像孩子一样正确调整大小和布局，但它们永远不会影响面板的大小。

这是您需要的 MeasureOverride 代码。然后在 ArrangeOverride 中，您只需根据需要布置子项，决定在您认为合适的情况下考虑剪裁或约束到面板。（自定义面板是我最喜欢的 WPF 之一。）

```
protected override Size MeasureOverride(Size availableSize)
{
    // You still measure the children.  You just don't use them when determining the size of the panel.
    foreach(FrameworkElement childElement in this.Children)
    {
        if(childElement.Visibility != Visibility.Collapsed)
            childElement.Measure(availableSize);
    }

    return new Size(
        Double.IsPositiveInfinity(availableSize.Width)  ? 0 : availableSize.Width,
        Double.IsPositiveInfinity(availableSize.Height) ? 0 : availableSize.Height);
} 
```

# ruby-on-rails - 根据可能更改的变量验证字段

> ID：15461134
> 
> 赞同：0
> 
> 时间：2013-03-17T13:16:27.583
> 
> 标签：ruby-on-rails, validation, date, activerecord

我正在尝试验证必须在一定范围内的出生日期字段：

```
validates :year_of_birth, :inclusion => { :in => 1900..Date.today.year - 5 } 
```

尽管在这种情况下它不会造成这么大的问题，但我意识到这仅在每次重新加载模型并因此再次计算当前年份的开发中才有效。

在生产时，我将如何避免这种情况，例如，在年初时，范围的右端与前一年保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:20:55.017

在这种情况下，我建议您进行自定义验证。

```
validate :validates_year_of_birth

def validates_year_of_birth
  five_years_ago = 5.years.ago.year
  if year_or_birth && (year_of_birth < 1990 || year_of_birth > five_years_ago)
    errors.add :year_of_birth, "should be between 1990 and #{five_years_ago}"
  end
end 
```

或者您可以在 proc 中通过验证

```
validates :year_of_birth, :inclusion => { :in => proc { 1900..5.years.ago.year } } 
```

# python - 在迭代字典时动态设置类属性（模型字段）

> ID：15461135
> 
> 赞同：0
> 
> 时间：2013-03-17T13:16:30.470
> 
> 标签：python, django, django-models, python-2.7

我试图根据字典中包含的键、值对动态定义模型的字段。

我尝试了两种方法：

字典是：

```
NOTIFICATION_TYPES = {
    'friend_request_received': 0,
    'friend_request_accepted': 1,
    # eccetera
} 
```

非常错误的（生成异常，因为 self 没有定义）：

```
class EmailNotification(models.Model):
    """
    User Email Notification Model
    Takes care of tracking the user's email notification preferences
    """
    user = models.OneToOneField(User, verbose_name=_('user'))

    for key, value in NOTIFICATION_TYPES.items():
        setattr(self, key, models.BooleanField(_('notify new matches'), default=True))

    class Meta:
        db_table = 'profile_email_notification' 
```

显然错误较少但不创建模型字段：

```
class EmailNotification(models.Model):
    """
    User Email Notification Model
    Takes care of tracking the user's email notification preferences
    """
    user = models.OneToOneField(User, verbose_name=_('user'))

    def __init__(self, *args, **kwargs):

        for key, value in NOTIFICATION_TYPES.items():
            setattr(self.__class__, key, models.BooleanField(_(key), default=True))

        super(EmailNotification, self).__init__(*args, **kwargs)

    class Meta:
        db_table = 'profile_email_notification' 
```

有可能做我想做的事吗？我确定是！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:22:59.180

在定义类*之后*，您需要设置这些额外的属性：

```
class EmailNotification(models.Model):
    """
    User Email Notification Model
    Takes care of tracking the user's email notification preferences
    """
    user = models.OneToOneField(User, verbose_name=_('user'))

    class Meta:
        db_table = 'profile_email_notification'

for key, value in NOTIFICATION_TYPES.items():
    setattr(EmailNotification, key, models.BooleanField(_('notify new matches'), default=True)) 
```

您可以使用[类装饰器](http://www.python.org/dev/peps/pep-3129/)将 for 循环包装到应用于该类的函数中：

```
def add_notification(cls):
    for key, value in NOTIFICATION_TYPES.items():
        setattr(cls, key, models.BooleanField(_('notify new matches'), default=True))
    return cls

@add_notification
class EmailNotification:
    # ... 
```

我有点担心 Django 元类处理想要处理这些字段，并且您可能需要添加额外的调用以使`EmailNotification._meta`结构知道您添加的其他字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:24:50.723

您可以使用类装饰器：

```
def add_notification(cls):
    for key in NOTIFICATION_TYPES:
        setattr(cls, key, models.BooleanField(_('notify new matches'), default=True))
    return cls

@add_notification
class EmailNotification(models.Model):
    """
    User Email Notification Model
    Takes care of tracking the user's email notification preferences
    """
    user = models.OneToOneField(User, verbose_name=_('user'))

    class Meta:
        db_table = 'profile_email_notification' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T09:03:08.473

感谢答案中的建议，但缺少一个关键的概念。

必须做两件事：

```
setattr(myclass, key, field)
myclass.add_to_class(key, field) 
```

这里的工作解决方案：

[https://github.com/nemesisdesign/nodeshot/blob/7798f81d558791499039afab1c860483fe30dd77/nodeshot/community/notifications/models/user_settings.py#L6](https://github.com/nemesisdesign/nodeshot/blob/7798f81d558791499039afab1c860483fe30dd77/nodeshot/community/notifications/models/user_settings.py#L6)

# java - java中mongodb游标（DBCursor）的罕见行为，即使已经到达最后一个元素

> ID：15461138
> 
> 赞同：4
> 
> 时间：2013-03-17T13:16:48.187
> 
> 标签：java, mongodb, cursor

我有一个名为 MyCollection 的集合，它在 mongodb 的 bd MyDB 中包含 200 个元素

```
> use MyDB
switched to db MyDB 
> db.MyCollection.count()
200 
```

我得到了一种非常罕见的行为，即使以不同的方式加载光标并对其进行迭代，这是我的代码：

```
DBCollection collection = getCollection("MyBD", "MyCollection");
DBCursor cursor = collection.find();
//DBCursor cursor = collection.find().limit(200); 
System.out.println("Cursor length: "+cursor.length());
Iterator<DBObject> itrc = cursor.iterator();
//while(cursor.hasNext()){
while (itrc.hasNext()) {
    //DBObject obj = (DBObject)cursor.next();
    DBObject obj = (DBObject)itrc.next();
    //BSONObject obj2 = (BSONObject)obj.get("scores");
    Integer intg = (Integer) obj.get("_id");
    System.out.println("_id:"+intg.toString());

    // operations remove and insert  on the collection
    // that affect the cursor behavior
    BasicDBList bl = (BasicDBList) obj.get("fieldArray");
    BasicDBObject bdo = new BasicDBObject();
    bdo.put("fieldArray", bl);
    Integer intid = (Integer) obj.get("_id");
    bdo.put("_id", intid);
    String str = (String) obj.get("fieldString");
    bdo.put("fieldString", str);
    collection.remove(obj);
    obj=null;
    collection.insert(bdo);

    if(intg.intValue()==199){
        System.out.println("Reached: "+intg.intValue());
    }   
} 
```

这是输出：

```
Cursor length: 200
_id:0 _id:1 _id:2 _id:3 _id:4 _id:5 _id:6 _id:7 _id:8 _id:9 _id:10 _id:11 _id:12 _id:13 _id:14 _id:15 _id:16 _id:17 _id:18 _id:19 _id:20 _id:21 _id:22 _id:23 _id:24 _id:25 _id:26 _id:27 _id:28 _id:29 _id:30 _id:31 _id:32 _id:33 _id:34 _id:35 _id:36 _id:37 _id:38 _id:39 _id:40 _id:41 _id:42 _id:43 _id:44 _id:45 _id:46 _id:47 _id:48 _id:49 _id:50 _id:51 _id:52 _id:53 _id:54 _id:55 _id:56 _id:57 _id:58 _id:59 _id:60 _id:61 _id:62 _id:63 _id:64 _id:65 _id:66 _id:67 _id:68 _id:69 _id:113 _id:101 _id:102 _id:103 _id:104 _id:105 _id:106 _id:107 _id:108 _id:109 _id:110 _id:111 _id:112 _id:114 _id:115 _id:116 _id:117 _id:118 _id:119 _id:120 _id:121 _id:122 _id:123 _id:124 _id:125 _id:126 _id:127 _id:128 _id:129 _id:130 _id:131 _id:132 _id:133 _id:134 _id:135 _id:136 _id:137 _id:138 _id:139 _id:140 _id:141 _id:142 _id:143 _id:144 _id:145 _id:146 _id:147 _id:148 _id:149 _id:150 _id:151 _id:152 _id:153 _id:154 _id:155 _id:156 _id:157 _id:158 _id:159 _id:160 _id:161 _id:162 _id:163 _id:164 _id:165 _id:166 _id:167 _id:168 _id:169 _id:170 _id:171 _id:172 _id:173 _id:174 _id:175 _id:176 _id:177 _id:178 _id:179 _id:180 _id:181 _id:182 _id:183 _id:184 _id:185 _id:186 _id:187 _id:188 _id:189 _id:190 _id:191 _id:192 _id:193 _id:194 _id:195 _id:196 _id:197 _id:198 _id:199
***************************
Reached: 199
***************************
 _id:70 _id:71 _id:72 _id:73 _id:74 _id:75 _id:76 _id:77 _id:78 _id:79 _id:80 _id:81 _id:82 _id:83 _id:84 _id:85 _id:86 _id:87 _id:88 _id:89 _id:90 _id:91 _id:92 _id:93 _id:94 _id:95 _id:96 _id:97 _id:98 _id:99 _id:100_id:96 _id:97 _id:98 _id:99 _id:100 
```

可以看到，一旦达到 200 个元素的限制（元素 _id:199），它会跳转到 _id:70 的元素，然后重复 31 次额外的迭代，直到达到元素 _id:100，而不是在正确的时间将是 200 次迭代。

替代方案：一个在代码中注释（使用光标的方法：hasNext()），另一个正在运行（使用迭代器）都具有相同的输出。

如果我删除集合上的操作部分（在我的情况下是删除/插入），那么罕见的行为就不会发生。

这是预期的输出：

```
Cursor length: 200
_id:0 _id:1 _id:2 _id:3 _id:4 _id:5 _id:6 _id:7 _id:8 _id:9 _id:10 _id:11 _id:12 _id:13 _id:14 _id:15 _id:16 _id:17 _id:18 _id:19 _id:20 _id:21 _id:22 _id:23 _id:24 _id:25 _id:26 _id:27 _id:28 _id:29 _id:30 _id:31 _id:32 _id:33 _id:34 _id:35 _id:36 _id:37 _id:38 _id:39 _id:40 _id:41 _id:42 _id:43 _id:44 _id:45 _id:46 _id:47 _id:48 _id:49 _id:50 _id:51 _id:52 _id:53 _id:54 _id:55 _id:56 _id:57 _id:58 _id:59 _id:60 _id:61 _id:62 _id:63 _id:64 _id:65 _id:66 _id:67 _id:68 _id:69 _id:113 _id:101 _id:102 _id:103 _id:104 _id:105 _id:106 _id:107 _id:108 _id:109 _id:110 _id:111 _id:112 _id:114 _id:115 _id:116 _id:117 _id:118 _id:119 _id:120 _id:121 _id:122 _id:123 _id:124 _id:125 _id:126 _id:127 _id:128 _id:129 _id:130 _id:131 _id:132 _id:133 _id:134 _id:135 _id:136 _id:137 _id:138 _id:139 _id:140 _id:141 _id:142 _id:143 _id:144 _id:145 _id:146 _id:147 _id:148 _id:149 _id:150 _id:151 _id:152 _id:153 _id:154 _id:155 _id:156 _id:157 _id:158 _id:159 _id:160 _id:161 _id:162 _id:163 _id:164 _id:165 _id:166 _id:167 _id:168 _id:169 _id:170 _id:171 _id:172 _id:173 _id:174 _id:175 _id:176 _id:177 _id:178 _id:179 _id:180 _id:181 _id:182 _id:183 _id:184 _id:185 _id:186 _id:187 _id:188 _id:189 _id:190 _id:191 _id:192 _id:193 _id:194 _id:195 _id:196 _id:197 _id:198 _id:199
***************************
Reached: 199
*************************** 
```

我发现了一个[类似的 SO question](https://stackoverflow.com/q/12145579/833336)，但我不清楚：

*   操作删除/插入如何以我之前公开的方式影响光标行为？
*   如何使用快照选项？
*   提前考虑，如果我需要使用有序集合怎么办？

顺便说一句，如果我使用没有迭代器的选项，如下所示：

```
while(cursor.hasNext()){
    DBObject obj = (DBObject)cursor.next(); 
```

*   为什么我必须删除下一行？

    System.out.println("光标长度："+cursor.length());

为了避免下一个异常：

```
Exception in thread "main" java.lang.IllegalArgumentException: can't switch cursor access methods
    at com.mongodb.DBCursor._checkType(DBCursor.java:412)
    at com.mongodb.DBCursor.hasNext(DBCursor.java:483)
    at tasks.UpdateRemoveHW.main(Test.java:56) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-15T04:47:21.193

只需抛出异常 IllegalArgumentException，然后您会发现使用 DBCursor.length() 已经将光标转换为数组。因此，在使用 hasext() 之后，接下来是非法的。如果您想更好地使用 hasext() 或 next() 在迭代之前删除 length() 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T01:37:30.063

我不确定您在问题的第一部分中的罕见行为发生了什么，但是通常在迭代任何数据结构时修改它是不安全的，除非通过 Iterator.remove() 方法。

* * *

您问题的最后一部分由[DBCursor API 文档](http://api.mongodb.org/java/current/com/mongodb/DBCursor.html)顶部的以下**警告**间接回答：

> **警告**：在 DBCursor 上调用 toArray 或 length 将不可撤销地将其转换为数组。这意味着，如果游标正在迭代超过一千万个结果（它是从数据库中延迟获取的），那么内存中就会突然出现一千万个元素的数组。在转换为数组之前，请确保使用 skip() 和 limit() 有合理数量的结果。

如果您阅读了引发**IllegalArgumentException的 DBCursor 的**[源代码（第 483 行）](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/com/mongodb/DBCursor.java#L483)，您可以看到任何对 DBCursor.length() 的调用都会将光标变成一个数组，之后对 DBCursor.next() 或 DBCursor 的所有调用.hasNext() 变得非法。

 **我认为这种行为肯定违反了[最小意外原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。数组仍然可以有迭代器，所以如果内部数据结构被隐藏并且迭代器方法继续工作会更好。此外，调用 DBCursor.length() 不必从数据库中获取任何记录，我认为它的行为应该类似于 DBCursor.count() 但以某种方式考虑到 limit() 和 skip() 然后缓存结果。**

# c++ - std::default_random_engine 生成介于 0.0 和 1.0 之间的值

> ID：15461140
> 
> 赞同：15
> 
> 时间：2013-03-17T13:16:54.137
> 
> 标签：c++, c++11, std

我希望能够生成 0.0 到 1.0 之间的随机值

我试过用

```
std::default_random_engine generator;
std::uniform_real_distribution<float> distribution(0.0, 1.0);

float myrand = distribution(generator); 
```

在循环中生成随机值总是给我这些值：

```
0.000022

0.085032

0.601353

0.891611

0.967956

0.189690

0.514976

0.398008

0.262906

0.743512

0.089548 
```

我该怎么做才能真正获得随机值？如果我总是得到相同的，似乎并不那么随机。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T13:24:09.400

```
// 1-st variant: using time() function for seed random distribution
std::default_random_engine generator(time(0));
std::uniform_real_distribution<double> distribution(first, last);
return distribution(generator); 
```

如果打开多个程序，使用相同的随机数生成器，它们都将输出相同的结果，因为它们具有相同的种子值，即时间。

这个问题通过使用随机设备解决，在下面的代码中：

```
// 2-nd variant: 
std::uniform_real_distribution<double> distribution(first, last);
std::random_device rd;
std::default_random_engine generator(rd());
return distribution(generator); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-17T13:21:23.580

如果您指的是每次执行程序都会得到相同的结果，那是因为您需要基于一些自然随机值（例如用户输入的某个数字，或者自计算机已打开，或自 1970 年 1 月 1 日起等）：

```
#include <random>

std::default_random_engine generator;
generator.seed( /* ... */ );
//              ^^^^^^^^^    
//              Provide some naturally random value here

std::uniform_real_distribution<float> distribution(0.0, 1.0);

float myrand = distribution(generator); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-30T15:14:38.010

我找到了另一个很好的解决方案......

```
double Generate(const double from, const double to)
{
    std::random_device rd;

    return std::bind(
        std::uniform_real_distribution<>{from, to},
        std::default_random_engine{ rd() })();
} 
```

# google-chrome-extension - Chrome 扩展：操作数据 URI 内容的权限

> ID：15461142
> 
> 赞同：10
> 
> 时间：2013-03-17T13:16:58.353
> 
> 标签：google-chrome-extension

我正在开发一个需要将脚本注入数据的 Chrome 扩展：-URI 页面。

尝试执行 javascript 时出现异常：

```
Error during tabs.executeScript: Cannot access contents of url "data:text/html;charset=utf-8, … ". Extension manifest must request permission to access this host. 
```

但哪种许可对我有用？我试过`data:*`, `<all_urls>`, `*://*/*`- 这些都不起作用。此外，`activeTab`许可并没有起到作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-15T18:40:31.610

当前，扩展程序无法在数据 URI 上工作是[一个 chromium 错误。](https://chromium-review.googlesource.com/c/chromium/src/+/919984)一个修复程序正在解决这个问题，希望能在 Chrome 66 中登陆。

# python - 单元格pyqt中的小部件对齐

> ID：15461143
> 
> 赞同：3
> 
> 时间：2013-03-17T13:17:01.207
> 
> 标签：python, python-2.7, pyqt, qtablewidget

我正在使用 PyQT4 和 Python 2.7 开发一些工具，但遇到了一个小问题。我在小部件中存储了 3 个按钮，并且该小部件在表格的单元格中（QTableWidget）。所以我的问题是我无法将小部件与单元格顶部对齐，并且工具不会将行高调整为在小部件最小/固定高度中定义。

这是使用 resizeRowToContents 方法现在的样子。

![是）我有的](../Images/91a91b5ea767073505079c9b73ce1c05.png)

我想要这样的东西

![我想要的是](../Images/99060b9e26c783d8fe0cd931f68a8e94.png)

我用固定的行高做了类似的事情，但这不是我想要的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:37:49.913

我以非常简单的方式解决了这个问题。首先，我将布局的边距更改为 0 像素（后来我将其更改为 3 像素以进行填充），这使我的对齐方式与左上角完全对齐。下一步是为每一行设置最小大小，我通过以下行进行设置：

```
self.verticalHeader().setMinimumSectionSize(30) 
```

在构造函数中添加。

之后，我收到了我想要的东西：

1.  顶部和底部有一些填充的小部件
2.  不固定行的大小，因此项目中的多行文本也是允许的

# eclipse - 使用 javacv 的异常“找不到依赖库”

> ID：15461146
> 
> 赞同：3
> 
> 时间：2013-03-17T13:17:12.630
> 
> 标签：eclipse, opencv, javacv

我尝试使用 JavaCV 在 eclipse 中实现一个程序。这是示例代码，

```
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*;
public class JavaCVProj01 
         {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        IplImage img = cvLoadImage("Paris.jpeg");
        cvShowImage("Paris",img);
        cvSmooth(img,img,CV_GAUSSIAN,13);
        cvShowImage("BlurImage",img);

        cvWaitKey();
        cvReleaseImage(img);

    }

} 
```

当我运行程序时出现异常

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\Users\Bhavana\AppData\Local\Temp\javacpp34629596157210\jniopencv_core.dll: Can't find dependent libraries
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(Unknown Source)
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.load0(Unknown Source)
    at java.lang.System.load(Unknown Source)
    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:566)
    at com.googlecode.javacpp.Loader.load(Loader.java:489)
    at com.googlecode.javacpp.Loader.load(Loader.java:431)
    at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:136)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.googlecode.javacpp.Loader.load(Loader.java:453)
    at com.googlecode.javacv.cpp.opencv_imgproc.<clinit>(opencv_imgproc.java:97)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.googlecode.javacpp.Loader.load(Loader.java:453)
    at com.googlecode.javacv.cpp.opencv_highgui.<clinit>(opencv_highgui.java:85)
    at demo.main(demo.java:13)
Caused by: java.lang.UnsatisfiedLinkError: no opencv_core244 in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:593)
    at com.googlecode.javacpp.Loader.load(Loader.java:481)
    ... 11 more 
```

我也为环境变量提供了正确的路径。我还从 javacv-bin 添加了外部 Jar 文件。我给出的路径是 CLASSPATH D:\opencv\build\x86\vc10\lib D:\opencv\build\common\tbb\ia32\vc10 D:\opencv\build\x86\vc10\staticlib

路径 D:\opencv\build\common\tbb\ia32\vc10 D:\opencv\build\x86\vc10\bin

我该怎么办？我还需要添加哪些依赖库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:44:28.987

如果您的 OpenCV 版本与 JavaCV-Bin 不兼容，则会发生这些错误。

例如：

*   OpenCV 2.4.0 和 JAVA-BIN 0.2 = 不兼容

*   OpenCV 2.4.3 和 JAVA-BIN 0.3 = 兼容

* * *

确保安装后重新启动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T07:23:05.553

只需将 opencv 目录复制到 C:\ 驱动器即可解决此问题。与正确设置所有路径相比，这可能是最简单的方法。JavaCV 文档中的某处提到了这一点（现在找不到）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T23:03:31.057

我回答的问题几乎[一样。](https://stackoverflow.com/a/15753228/2233860)

您应该将路径添加`opencv_java244.dll`到`%PATH%`环境变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:07:44.213

您的 PATH 不应如下所示：

```
D:\opencv\build\common\tbb\ia32\vc10 D:\opencv\build\x86\vc10\bin 
```

但像这样：

```
"D:\opencv\build\common\tbb\ia32\vc10";"D:\opencv\build\x86\vc10\bin" 
```

（注意分号而不是空格）

同样适用于 CLASSPATH ！

# scala - 简单构建工具 (SBT) 包 WAR

> ID：15461147
> 
> 赞同：2
> 
> 时间：2013-03-17T13:17:13.177
> 
> 标签：scala, jar, war, sbt

我有一个多项目配置。其中一个项目需要构建为战争文件以供将来部署。我使用这个 sbt 插件：[https](https://github.com/JamesEarlDouglas/xsbt-web-plugin) ://github.com/JamesEarlDouglas/xsbt-web-plugin来构建战争。但是我需要它包含依赖项目作为罐子。

在 Maven 中，我将其他模块作为依赖项包含在我的 WAR 模块中，它们最终出现在 WAR:lib 目录中。似乎 sbt-web-plugin 默认行为是不包含它们

我的意思是：这是我的 parent.scala 文件的一部分

```
lazy val dataPopulator = Project(
"data-populator",
    file("data-populator"),
    settings = buildSettings ++ Seq (libraryDependencies ++= dataPopulatorDeps)) 

lazy val warProject = Project(id = "rest-ws",
    base = file("rest-ws"),
    settings = buildSettings ++ Seq (libraryDependencies)) dependsOn(dataPopulator) 
```

上面的*dataPopulator*项目打包时会创建一个jar。上面的*warProject*项目在它的目录 rest-ws/build.sbt 中有一个特定的*build.sbt ：*

```
seq(webSettings :_*)

name := "main-ws"

libraryDependencies += "org.mortbay.jetty" % "jetty" % "6.1.22" % "container" 
```

当我运行 package 命令（由 web 插件添加）时，它会创建一个战争，问题是这个战争不包括*dataPopulator jar*，而它在编译时依赖它。

有人建议如何将某些模块中生成的 jar 工件包含到另一个打包为 war 的项目中吗？

# java - 在主机服务器上设置域的根应用程序

> ID：15461148
> 
> 赞同：1
> 
> 时间：2013-03-17T13:17:26.283
> 
> 标签：java, tomcat, web-applications, tomcat6

我正在努力将我的应用程序设置为默认值。它运行在由托管公司托管的私有 jvm 上，我尝试将其重命名为 ROOT，并且可以通过 mydomain/index.html 访问它。所以现在我需要让它在没有`index.html`.

最需要注意的是这个app没有部署在tomcat/webapps/中。它部署在 tomcat/domain/mydomain/ 中。这就是我的主机设置并将目录映射到 conf/server.xml 文件中的给定域的方式。

我尝试了几种方法，但都没有运气，自周一以来，主机支持也让我四处奔波，有时会破坏我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:28:20.190

查看`<welcome-file-list>`可以在您的`web.xml`. 可以在这里找到一个很好的解释：[http ://wiki.metawerx.net/wiki/Web.xml.WelcomeFileList](http://wiki.metawerx.net/wiki/Web.xml.WelcomeFileList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:40:59.050

您需要在 conf/Catalina/localhost 目录中添加 ROOT.xml 文件来设置域的根应用程序。有关更多信息，请参阅此链接。[Tomcat 6：如何更改 ROOT 应用程序](https://stackoverflow.com/questions/715506/tomcat-6-how-to-change-the-root-application)

# javascript - 从 JQuery 元素获取 html DOM 元素

> ID：15461149
> 
> 赞同：0
> 
> 时间：2013-03-17T13:17:26.740
> 
> 标签：javascript, jquery

下面的代码给了我 JQuery 对象，其中包括与之关联的 JQuery 函数。

```
var element = $("#element"); 
```

但是我怎样才能从上面的 JQuery 对象中获取 HTML DOM 元素呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:19:01.643

从 jQuery 对象中获取第一项

```
var element = $("#element")[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:18:41.400

您可以使用[get (link to API)](http://api.jquery.com/get/)。

```
 element.get() 
```

它将返回一个数组。

# ruby-on-rails - 初始化类错误 - Rails

> ID：15461150
> 
> 赞同：0
> 
> 时间：2013-03-17T13:17:35.887
> 
> 标签：ruby-on-rails, class, initialization

我有这组课：

```
class Campaign < ActiveRecord::Base

  belongs_to :user
  validates_presence_of :title, :description

   def initialize
     validates_format_of_many([:title, :description])
   end

  def validates_format_of_many(inputs)
    if (!inputs.nil?)
      inputs.each do |input|
        validates_format_of input => /^[.]/, :allow_nil => false, :allow_blank => false
        puts YAML::dump('test1')
      end
    else
      puts YAML::dump('test2')
    end
  end
end 
```

问题是我收到一些错误信息`undefined method`包括？对于 nil:NilClass` 并在堆栈中

```
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/attribute_methods.rb:257:in `method_missing'
/var/www/gitorious/app/models/campaign.rb:13:in `validates_format_of_many'
/var/www/gitorious/app/models/campaign.rb:12:in `each'
/var/www/gitorious/app/models/campaign.rb:12:in `validates_format_of_many'
/var/www/gitorious/app/models/campaign.rb:7:in `initialize'
/var/www/gitorious/app/controllers/campaigns_controller.rb:28:in `new'
/var/www/gitorious/app/controllers/campaigns_controller.rb:28:in `new' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:34:03.177

首先如果你覆盖了initialize，你应该调用super，这将允许super_class执行它的初始化任务

```
def initialize
  validates_format_of_many([:title, :description])
  super
end 
```

但建议 AR 使用回调。检查[http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

例子：

```
class Campaign < ActiveRecord::Base

  belongs_to :user
  validates_presence_of :title, :description

  after_initialize { validates_format_of_many([:title, :description]) }

  def validates_format_of_many(inputs)
    if (!inputs.nil?)
      inputs.each do |input|
        validates_format_of input => /^[.]/, :allow_nil => false, :allow_blank => false
        puts YAML::dump('test1')
      end
    else
      puts YAML::dump('test2')
    end
  end
end 
```

`Campaign.new`但要小心，因为在创建新记录以及`Campaign.find ...`从数据库加载记录时会调用 validates_format_of_many

# c# - 没有 gui 的 WCF 服务应用程序将保持活动状态

> ID：15461152
> 
> 赞同：1
> 
> 时间：2013-03-17T13:17:57.270
> 
> 标签：c#, wcf

[WCF 新手]
我有一个基本的客户端-服务器 WCF 项目。
我的服务是“无 gui”应用程序，这意味着我创建了 winform 应用程序，删除了 Form1.cs 和启动 gui 的行。
该服务运行正常，我正在使用 servicehost.open ..
我的问题是它是“串行”（同步），所以一秒钟后应用程序存在。
我怎样才能让应用程序保持活力并倾听主机？
我需要停止该过程，然后在我想结束它时进行 host.close 。谢谢

这是服务代码：

```
class Program
{
    public static Uri BaseAddress;
    [STAThread]
    static void Main(string[] args)
    {

        string baseAddressStr = "http://localhost:7000/someservice";
        BaseAddress = new Uri(baseAddressStr);
        using (ServiceHost host = new ServiceHost(typeof(MyClass)BaseAddress))
        {
            ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
            smb.HttpGetEnabled = true;
            smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
            host.Description.Behaviors.Add(smb);

            host.Open();
            host.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:31:06.257

我认为您不想在无窗口 WinForms 应用程序中托管 WCF 服务。如果您希望它无限期地保持打开状态，则可以在 Windows 服务中托管 WCF 服务。[在这里](http://msdn.microsoft.com/en-us/library/ms733069.aspx)，您有一个基本示例。

好处应该是显而易见的：

1.  即使没有用户登录也可以运行。
2.  不需要解决方法来保持应用程序打开。

此外，您应该考虑将 WCF 配置（如基地址、服务行为）外部化到应用程序配置文件中。您不希望每次配置中的某些（任何）更改时都重新构建和重新部署您的服务，这可能因开发、测试、验收和生产环境而异。

# cordova - PhoneGap、XCode 和 .app 文件

> ID：15461153
> 
> 赞同：0
> 
> 时间：2013-03-17T13:18:00.223
> 
> 标签：cordova, phonegap-plugins

一位客户希望我修改在 PhoneGap 中开发的 iPhone 应用程序。他给我发了 .app 文件。使用包信息，我看到所有制作 .app 的文件

我为 XCode 安装了 phonegap 插件。

我的问题是如何在 Xcode 中导入 .app 文件，还是应该在 Xcode 之外使用 HTML 编辑器对其进行修改，然后使用 Xcode 为 IOS 构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:51:28.710

在 app 文件中找到 www 文件夹并将其导入到 phonegap 项目中。

# javascript - 快速查看信息的简单 jquery 插件

> ID：15461154
> 
> 赞同：0
> 
> 时间：2013-03-17T13:18:03.477
> 
> 标签：javascript, jquery, html

是否有任何好的 JavaScript/jQuery 插件可以“快速查看”点击信息？

我希望它简单，所以当您单击快速查看链接时，它只会将其显示为模态表单

理想情况下，只需为所述链接提供一个类，其余的由 JavaScript/jQuery 完成。

类似于 ( [http://us.norton.com/downloads/](http://us.norton.com/downloads/) ) 快速查看按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:29:59.113

[qtip 插件](http://craigsworks.com/projects/qtip)也可能派上用场

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:23:29.023

我认为诺顿正在使用 colorbox.. [http://www.jacklmoore.com/colorbox/](http://www.jacklmoore.com/colorbox/) colorbox 是一个 jQuery 灯箱.. 您可以使用 CSS 对其进行自定义.. 它可以处理内联内容以及通过进行 ajax 调用来获取数据

# python - 在代理服务器下使用 mwclient

> ID：15461156
> 
> 赞同：1
> 
> 时间：2013-03-17T13:18:24.243
> 
> 标签：python, proxy

我在代理服务器下使用 net

```
 self.wp = site if site else mwclient.Site(self.url) 
```

当遇到上面的行时，会显示以下错误

```
 File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\client.py", line 92, in __init__
    self.site_init()
  File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\client.py", line 100, in site_init
    siprop = 'general|namespaces', uiprop = 'groups|rights')
  File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\client.py", line 165, in api
    info = self.raw_api(action, **kwargs)
  File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\client.py", line 248, in raw_api
    json_data = self.raw_call('api', data).read()
  File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\client.py", line 223, in raw_call
    url, data = data, headers = headers)
  File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\http.py", line 225, in post
    return self.find_connection(host).post(host,
  File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\http.py", line 218, in find_connection
    conn = cls(host, self)
  File "C:\Python27\lib\site-packages\mwclient-0.6.5-py2.7.egg\mwclient\http.py", line 62, in __init__
    self._conn.connect()
  File "C:\Python27\lib\httplib.py", line 757, in connect
    self.timeout, self.source_address)
  File "C:\Python27\lib\socket.py", line 571, in create_connection
    raise err
error: [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 
```

我尝试按照以下步骤使用 urllib2 设置代理，但没有帮助

```
>>> import urllib2
>>> auth = 'http://xxxxx:xxxx@10.1.9.30:8080'
>>> handler = urllib2.ProxyHandler({'http':auth})
>>> opener = urllib2.build_opener(handler)
>>> urllib2.install_opener(opener) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:36:20.487

这有点老了，但我昨天遇到了同样的问题，我在这里发布了解决方案，因为它可能对其他人有所帮助。

我设法通过更改文件 mwclinet/http.py 来解决它。基本上我检查环境变量是否`http_proxy`存在并通过代理而不是直接连接。

在课堂`class HTTPPersistentConnection(object):`上我添加了一个变量`usesProxy = False`。在第 61 行附近，我替换`self._conn = self.http_class(host)`为：

```
 http_proxy_env = os.environ.get('http_proxy')
    if http_proxy_env is not None:
      try:
        # proxy
        http_proxy_url = urlparse.urlparse(http_proxy_env)
        http_proxy_host,http_proxy_port = http_proxy_url.netloc.split(':')
        self._conn = self.http_class(http_proxy_host,int(http_proxy_port))
        self.usesProxy=True;
      except:
        self._conn = self.http_class(host)
    else: 
      self._conn = self.http_class(host) 
```

然后我替换了接下来出现的 2 次：`self._conn.request(method, path, ....)`。在第 94 行：

```
 if self.usesProxy is False:
    self._conn.request(method, path, headers = headers)
  else:
    self._conn.request(method, "http://"+host+path, headers = headers) 
```

在第 107 行通过：

```
if self.usesProxy is False:
  self._conn.request(method, path, data, headers)
else:
  self._conn.request(method, "http://"+host+path, data, headers) 
```

它应该做的工作！

# matlab - 从命令行调用本地函数

> ID：15461157
> 
> 赞同：8
> 
> 时间：2013-03-17T13:18:30.293
> 
> 标签：matlab, scope, function-pointers

我在 m 文件中定义了一个[本地函数。](http://www.mathworks.com/help/matlab/matlab_prog/local-functions.html)例如：

```
% begining of public_function.m file
function fh = public_function( )
%
% do some computation...

fh = @local_function; % return function handle to local function defined below

function y = local_function( x )
% 
% a local function inside public_function.m file
% 

% some manipulation on x
y = x;

% end of public_function.m file NOTE THAT local_function is NOT nested 
```

现在，我想`local_function`从命令行（而不是从`public_function`）调用。我能够使用从以下返回的函数句柄来做到这一点`public_function`：

```
>> fh = public_function(); % got handle to local_function
>> y = fh( x ); % calling the local function from command line :-) 
```

我的问题：
有没有其他方法（除了显式传递函数句柄）从命令行（或其他 m 文件/函数）调用本地函数？

更准确地说，我想要一种方法来访问文件中的任何本地函数（前提是我知道它的名称）。所以，如果我有`public_function.m`文件（和函数）并且我*知道*它`local_function`是该文件的本地文件，有没有办法`local_function`从命令行访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T16:10:48.360

[官方文档](http://www.mathworks.com/help/matlab/matlab_prog/local-functions.html)说：

> ...您不能从命令行或其他文件中的函数调用本地函数。

据此，您必须将其句柄传递给调用者，以便允许在其 m 文件之外间接调用它。我相信没有记录在案的明智方式来访问本地功能。

奇怪的是，你仍然可以这样做`help`：

```
help public_function>local_function 
```

# flash - MAGENTO - 我应该在哪里放置 SWF 文件？

> ID：15461161
> 
> 赞同：0
> 
> 时间：2013-03-17T13:19:04.317
> 
> 标签：flash, magento, module, directory

我有一个 swf 文件来在前端录制和播放视频。我应该把它放在哪里？在`media/`或`skin/frontend/base/default/media/`或任何其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:51:44.753

这是一个最佳实践问题，但如果您愿意，它应该可以从任何地方访问。通常，与特定主题相关的文件将放在 skin/ 文件夹中（在适当的主题名称下 - 例如：skin/frontend/base/mytheme/），整个站点使用的一般媒体文件将放在 media 中。您甚至可以在您的媒体文件夹中创建一个 swf/ 文件夹并将其放入其中！

# c#-4.0 - 循环未完成，对于数据行

> ID：15461162
> 
> 赞同：1
> 
> 时间：2013-03-17T13:19:11.987
> 
> 标签：c#-4.0, for-loop

我有这个代码：

```
for (int i = 0; i < dataTable.Rows.Count; i++)
{
     tempdatatable.Clear();
     var tempRow = dataTable.Rows[i];
     temp = dataTable.Rows[i][0].ToString();
     for (int j = 0; j < dataTable.Rows.Count; j++)
     {
          DataRow rows = dataTable.Rows[j];
          if (temp == rows[0].ToString())
          {
               tempdatatable.Rows.Add(tempRow[0], tempRow[1]);
               dataTable.Rows.Remove(rows);      //Update happen here
          }
          tempdatatable.DefaultView.Sort = "gscitations DESC";

          dataGridView1.DataSource = tempdatatable;
      }
 } 
```

我的问题是，里面不是缺少行吗？我的意思是当循环开始时`i=0`，然后我删除内部循环中的行，所以`i`也是增量的并且行也被删除，如果我是对的，循环将遍历一半的迭代，因为循环限制是由计数方法处理的，我是正确的？如果是？我该如何解决？

# android - 在 Android 中使用 Adob e 从 URL 查看 PDF

> ID：15461165
> 
> 赞同：2
> 
> 时间：2013-03-17T13:19:20.133
> 
> 标签：android, url, pdf

我只是在学习Android代码，遇到了一个问题，希望大家能提供帮助。我想从我的应用程序的 URL 显示 PDF 文件，我已经使用 webView 方法显示 PDF 但是在我的手机上安装了 Adob​​e Reader 和 Polaris Office 我只是想知道我是否可以加载 URL 并实现要使用已安装的软件显示的 PDF？我的 webView 代码如下：

```
WebView web = (WebView) findViewById(R.id.webView);
web.getSettings().setJavaScriptEnabled(true);
String pdf = "http://www.example-site.co.uk/pdf";
web.loadUrl("http://docs.google.com/gview?embedded=true&url=" + pdf); 
```

我在这里搜索了几个帖子都无济于事，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:25:37.380

搜索“pdf view intent”会发现类似的东西：[How to render PDF in Android](https://stackoverflow.com/questions/2883355/how-to-render-pdf-in-android/)

如果这没有帮助，您应该尝试实现 IntentChooser 或直接询问您的两个应用程序的开发人员他们正在听哪个意图。

# c# - Activator.CreateInstance() 特定类类型实例

> ID：15461169
> 
> 赞同：0
> 
> 时间：2013-03-17T13:19:40.137
> 
> 标签：c#, class, types, activator

这个问题是对[这个](https://stackoverflow.com/questions/15451697/get-a-class-without-a-lot-of-if-statements)先前提出的问题的补充。

**我应该初始化的子类和将是列表类型的基类**

```
abstract public class baseClass
{
    public baseClass()
    {
    }
}

public class child1 : baseClass
{
    public child1() : base
    {
    }
}

public class child2 : baseClass
{
    public child2() : base
    {
    }
} 
```

**我的枚举和经理类**

```
public enum ClassType
{
    child1,
    child2
}

public class Manager
{
    private List<baseClass> _children;

    public void Initialise(ClassType type)
    {
        var temp = Activator.CreateInstance(null, type.ToString()); 
        //null = assembly which means this assembly
        _children.Add(temp);
    }
} 
```

经理类已更新为我上一个问题的建议答案。然而还是有问题。在上述情况下，我收到错误：TypeLoadException 未处理：无法从程序集“Something”加载类型“child2”我该如何更改？我确实尝试了其他一些选择但没有成功。（有些会导致创建类，但添加时会导致 nullReferenceException）。

**编辑 ：**

好的，我将代码更改为：

```
string assemblyName = System.Reflection.Assembly.GetExecutingAssembly().GetName().Name;
Type objType = Type.GetType(string.Format("{0}.{1},{0}", assemblyName, type.ToString()));
var temp = (baseClass)Activator.CreateInstance(objType, 1);
// 1 is the parameter I need to add to the constructor.
_children.Add(temp); 
```

现在我创建了正确的类，但是当我将类添加到列表时我得到了 NullReferenceException :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:22:47.077

可能它没有找到类型，因为这些类可能是命名空间的。

我的意思是 typename`child2`可能不仅仅是 be`child2`而是 be `SomeNamespace.child2`。

**除了**这似乎是一个非常疯狂的模式，我建议`baseClass`在构造函数中使用 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:35:38.293

所提供的代码甚至不会按预期编译或工作，因为： `Activator.CreateInstance`返回`System.Runtime.Remoting.ObjectHandle`而不是实际创建的类型。当然，您需要将其转换为`baseClass`.
除此之外，您需要在使用此方法时提供名称空间，如 Danilel 所建议的那样。

# google-apps-script - 将图片上传到 Google 电子表格

> ID：15461170
> 
> 赞同：5
> 
> 时间：2013-03-17T13:19:40.227
> 
> 标签：google-apps-script, google-docs, google-docs-api

我正在做一个摄影比赛，参赛者应该使用谷歌注册表格注册，并上传他的照片。我在互联网上搜索了一个可以插入到表单中以使用 Google 表单上传文件的 Google 脚本，但找不到任何东西。它是否可行以及如何做，即使有其他想法可以做这样的事情，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T10:00:55.197

这是一个可能的工作流程**建议**，其中包括一个表单、一个带有回复的电子表格和一个带有包含图像的文档。

表格[在这里是可测试的](https://script.google.com/macros/s/AKfycbx1_5TIf3ndWudgLGPqs5-AHa-HUBe5qv5PWuInKzm52xHlq5l1/exec)

电子表格[可在此处查看](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dGFsUWNpb08zVWx5YjFRckloZ0NFZGc&usp=sharing)

该文档[可在此处查看](https://docs.google.com/document/d/1E6yoROb52QjICsEbGVXIBdz8KhdFU_5gimWlJUbu8DI/edit?usp=sharing)

# **见编辑 2**

*注意事项：*

1.  *现在它只适用于小图像，我必须找到一个解决方案。*（见编辑）
2.  *电子表格中的图像插入不起作用，我现在评论了这一行......*

这是完整的代码，仍然是一个草案，但我认为如果我们找到上述问题的解决方案，它可以完全实现。

**编辑：图像的大小实际上无关紧要，我成功地处理了比页面大小大 4 倍但采用 PNG 格式的图像——在这种情况下，** ***.png****似乎要可靠得多，这毕竟是个好消息！顺便说一句，我可以无所谓地使用 blob、图像文件或所谓的缩略图（与原始文件的大小相同；-），我总是得到相同的结果。***我想我将不得不在另一篇文章中发布一个问题：-D=**

 **```
var submissionSSKey = '0AnqSFd3iikE3dGFsUWNpb08zVWx5YjFRckloZ0NFZGc';
var docurl = 'https://docs.google.com/document/d/1E6yoROb52QjICsEbGVXIBdz8KhdFU_5gimWlJUbu8DI/'
var listitems = ['Select a category','Portrait','Landscape','Nude','Night shots','Nature','Various']
var Panelstyle = {'background':'#dddddd','padding':'40px','borderStyle':'ridge','borderWidth':'15PX','borderColor':'#aaaaaa'}

function doGet() {
  var app = UiApp.createApplication().setTitle('Photography contest').setStyleAttribute('padding','50PX');
  var panel = app.createFormPanel().setStyleAttributes(Panelstyle).setPixelSize(400, 200);
  var title = app.createHTML('<B>Photography contest</B>').setStyleAttribute('color','grey').setStyleAttribute('fontSize','25PX');
  var grid = app.createGrid(6,2).setId('grid');
  var list1 = app.createListBox().setName('list1');
   for(var i in listitems){list1.addItem(listitems[i])}    
  var Textbox1 = app.createTextBox().setWidth('150px').setName('TB1');
  var email = app.createTextBox().setWidth('150px').setName('mail');
  var upLoad = app.createFileUpload().setName('uploadedFile');
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('Please fill in all fields').setStyleAttribute('background','#bbbbbb').setStyleAttribute('fontSize','20px');
  //file upload
  var cliHandler2 = app.createClientHandler()
  .validateLength(Textbox1, 1, 40).validateNotMatches(list1,'Select a category').validateEmail(email).validateNotMatches(upLoad, 'FileUpload')
  .forTargets(submitButton).setEnabled(true)
  .forTargets(warning).setHTML('Now you can submit your form').setStyleAttribute('background','#99FF99').setStyleAttribute('fontSize','12px');

  //Grid layout of items on form
  grid.setWidget(0, 1, title)
      .setText(1, 0, 'Category')
      .setWidget(1, 1, list1.addClickHandler(cliHandler2))
      .setText(2, 0, 'Name')
      .setWidget(2, 1, Textbox1.addClickHandler(cliHandler2))
      .setText(3, 0, 'Email')
      .setWidget(3, 1, email)
      .setText(4, 0, 'File Upload')
      .setWidget(4, 1, upLoad.addChangeHandler(cliHandler2))
      .setWidget(5, 0, submitButton)
      .setWidget(5, 1, warning);

  var cliHandler = app.createClientHandler().forTargets(warning).setHTML('<B>PLEASE WAIT WHILE THE FILE IS UPLOADING<B>').setStyleAttribute('background','yellow');
  submitButton.addClickHandler(cliHandler).setEnabled(false);  
  panel.add(grid);
  app.add(panel);
  return app;
}

function doPost(e) {
  var app = UiApp.getActiveApplication();
  var ListVal = e.parameter.list1;
  var textVal = e.parameter.TB1;
  var Email = e.parameter.mail;
  var fileBlob = e.parameter.uploadedFile;
  var img = DocsList.createFile(fileBlob);
  try{
  var folder = DocsList.getFolder('photos');
  }catch(e){DocsList.createFolder('photos');var folder = DocsList.getFolder('photos')}
  img.addToFolder(folder);
  img.removeFromFolder(DocsList.getRootFolder())
  var sheet = SpreadsheetApp.openById(submissionSSKey).getSheetByName('Sheet1');
  var lastRow = sheet.getLastRow();
//  var image = sheet.insertImage(img.getUrl(), 4, lastRow+1)
  var targetRange = sheet.getRange(lastRow+1, 1, 1, 4).setValues([[ListVal,textVal,Email,img.getUrl()]]);
  var GDoc = DocumentApp.openByUrl(docurl)
  GDoc.appendTable([['Category : '+ListVal,'Name : '+textVal,'Email : '+Email]])
  var par = GDoc.appendParagraph('IMAGE PREVIEW')
  par.insertInlineImage(1, img.getThumbnail())
  GDoc.appendHorizontalRule();
  GDoc.saveAndClose();
  app.add(app.createLabel('Thank you for submitting'));
  return app
} 
```

* * *

**编辑 2：**我找到了（几乎）所有问题的解决方案......这是为文档预览提供自动图像缩放的新代码（仅 doPost 部分）。支持 Jpg、png 或任何其他常用图像格式...并显示初始大小 + 重量。我更新了在线测试表格。

电子表格问题目前没有解决方案，请参阅[issue 145](https://code.google.com/p/google-apps-script-issues/issues/detail?id=145)，因此我只使用了指向图像文件的链接，但这个链接没有[问题 1239](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1239)中所述的预览，但现在可以使用的文档是一个很好且可用的解决方法（在我的观点 ：-）。

```
function doPost(e) {
  var app = UiApp.getActiveApplication();
  var ListVal = e.parameter.list1;
  var textVal = e.parameter.TB1;
  var Email = e.parameter.mail;
  var fileBlob = e.parameter.uploadedFile;
  var blob = fileBlob.setContentTypeFromExtension()
  var img = DocsList.createFile(blob);
  try{
  var folder = DocsList.getFolder('photos');
  }catch(e){DocsList.createFolder('photos');var folder = DocsList.getFolder('photos')}
  img.addToFolder(folder);
  img.removeFromFolder(DocsList.getRootFolder());
  var weight = parseInt(img.getSize()/1000);
  var sheet = SpreadsheetApp.openById(submissionSSKey).getSheetByName('Sheet1');
  var lastRow = sheet.getLastRow();
  var targetRange = sheet.getRange(lastRow+1, 1, 1, 4).setValues([[ListVal,textVal,Email,img.getUrl()]]);
  var GDoc = DocumentApp.openByUrl(docurl)
  GDoc.appendTable([['Category : '+ListVal,'Name : '+textVal,'Email : '+Email]])
  var inlineI = GDoc.appendImage(img);
  var width = inlineI.getWidth();
  var newW = width;
  var height = inlineI.getHeight();
  var newH = height;
  var ratio = width/height
  Logger.log('w='+width+'h='+height+' ratio='+ratio);
  if(width>640){
  newW = 640;
  newH = parseInt(newW/ratio);
  }
  inlineI.setWidth(newW).setHeight(newH)
  GDoc.appendParagraph('IMAGE size : '+width+' x '+height+' (eventually) resized to '+newW+' x '+newH+' for PREVIEW ('+weight+' kB)   ');
  GDoc.appendHorizontalRule();
  GDoc.saveAndClose();
  app.add(app.createLabel('Thank you for submitting'));
  return app
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:29:30.830

试试这个

```
function insertImage() {
  // Retrieve an image from the web.
  var resp = UrlFetchApp.fetch("http://www.google.com/intl/en_com/images/srpr/logo2w.png");

  // Create a document.
  var doc = DocumentApp.openById("");

  // Append the image to the first paragraph.
  doc.getChild(0).asParagraph().appendInlineImage(resp);
} 
```

此链接也可能对您有所帮助:)

[http://code.google.com/googleapps/appsscript/class_documentapp_listitem.html#appendInlineImage](http://code.google.com/googleapps/appsscript/class_documentapp_listitem.html#appendInlineImage)

快乐编码！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-02T19:34:03.023

感谢 jfreake 最近的帖子，我最终解决了所有问题，包括在电子表格本身中显示图像。这是我在单独的答案中发布的最终代码，以确保舒适性和可读性。

```
var submissionSSKey = '0AnqSFd3iikE3dGFsUWNpb08zVWx5YjFRckloZ0NFZGc';
var docurl = 'https://docs.google.com/document/d/1E6yoROb52QjICsEbGVXIBdz8KhdFU_5gimWlJUbu8DI/'
var listitems = ['Select a category','Portrait','Landscape','Nude','Night shots','Nature','Various']
var Panelstyle = {'background':'#dddddd','padding':'40px','borderStyle':'solid','borderWidth':'10PX','borderColor':'#bbbbbb'}

function doGet() {
  var app = UiApp.createApplication().setTitle('Photography contest').setStyleAttribute('padding','50PX');
  var panel = app.createFormPanel().setStyleAttributes(Panelstyle).setPixelSize(400, 200);
  var title = app.createHTML('<B>Photography contest</B>').setStyleAttribute('color','grey').setStyleAttribute('fontSize','25PX');
  var grid = app.createGrid(6,2).setId('grid');
  var list1 = app.createListBox().setName('list1').setWidth('130');
   for(var i in listitems){list1.addItem(listitems[i])}    
  var Textbox1 = app.createTextBox().setWidth('150px').setName('TB1');
  var email = app.createTextBox().setWidth('150px').setName('mail');
  var upLoad = app.createFileUpload().setName('uploadedFile');
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('Please fill in all fields').setStyleAttribute('background','#bbbbbb').setStyleAttribute('fontSize','18px');
  //file upload
  var cliHandler2 = app.createClientHandler()
  .validateLength(Textbox1, 1, 40).validateNotMatches(list1,'Select a category').validateEmail(email).validateNotMatches(upLoad, 'FileUpload')
  .forTargets(submitButton).setEnabled(true)
  .forTargets(warning).setHTML('Now you can submit your form').setStyleAttribute('background','#99FF99').setStyleAttribute('fontSize','12px');

  //Grid layout of items on form
  grid.setWidget(0, 1, title)
      .setText(1, 0, 'Category')
      .setWidget(1, 1, list1.addClickHandler(cliHandler2))
      .setText(2, 0, 'Name')
      .setWidget(2, 1, Textbox1.addClickHandler(cliHandler2))
      .setText(3, 0, 'Email')
      .setWidget(3, 1, email)
      .setText(4, 0, 'Image File')
      .setWidget(4, 1, upLoad.addChangeHandler(cliHandler2))
      .setWidget(5, 0, submitButton)
      .setWidget(5, 1, warning);

  var cliHandler = app.createClientHandler().forTargets(warning).setHTML('<B>PLEASE WAIT WHILE THE FILE IS UPLOADING<B>').setStyleAttribute('background','yellow');
  submitButton.addClickHandler(cliHandler).setEnabled(false);  
  panel.add(grid);
  app.add(panel);
  return app;
}

function doPost(e) {
  var app = UiApp.getActiveApplication();
  var ListVal = e.parameter.list1;
  var textVal = e.parameter.TB1;
  var Email = e.parameter.mail;
  var fileBlob = e.parameter.uploadedFile;
  var blob = fileBlob.setContentTypeFromExtension()
  var img = DocsList.createFile(blob);
  try{
  var folder = DocsList.getFolder('photos');
  }catch(e){DocsList.createFolder('photos');var folder = DocsList.getFolder('photos')}
  img.addToFolder(folder);
  img.removeFromFolder(DocsList.getRootFolder());
  var weight = parseInt(img.getSize()/1000);
  var sheet = SpreadsheetApp.openById(submissionSSKey).getSheetByName('Sheet1');
  var lastRow = sheet.getLastRow();
  var targetRange = sheet.getRange(lastRow+1, 1, 1, 4).setValues([[ListVal,textVal,Email,"https://drive.google.com/uc?export=view&id="+img.getId()]]);
  var imageInsert = sheet.getRange(lastRow+1, 5).setFormula('=image("https://drive.google.com/uc?export=view&id='+img.getId()+'")');
  sheet.setRowHeight(lastRow+1, 80);
  var GDoc = DocumentApp.openByUrl(docurl)
  GDoc.appendTable([['Category : '+ListVal,'Name : '+textVal,'Email : '+Email]])
  var inlineI = GDoc.appendImage(img);
  var width = inlineI.getWidth();
  var newW = width;
  var height = inlineI.getHeight();
  var newH = height;
  var ratio = width/height;
  Logger.log('w='+width+'h='+height+' ratio='+ratio);
  if(width>640){
  newW = 640;
  newH = parseInt(newW/ratio);
  }
  inlineI.setWidth(newW).setHeight(newH)
  GDoc.appendParagraph('IMAGE size : '+width+' x '+height+' (eventually) resized to '+newW+' x '+newH+' for PREVIEW ('+weight+' kB)   ');
  GDoc.appendHorizontalRule();
  GDoc.saveAndClose();
  app.add(app.createLabel('Thank you for submitting'));
  return app
} 
```

链接是一样的：[app](https://script.google.com/macros/s/AKfycbx1_5TIf3ndWudgLGPqs5-AHa-HUBe5qv5PWuInKzm52xHlq5l1/exec) [SS](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dGFsUWNpb08zVWx5YjFRckloZ0NFZGc&usp=drive_web#gid=0) [doc](https://docs.google.com/document/d/1E6yoROb52QjICsEbGVXIBdz8KhdFU_5gimWlJUbu8DI/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-02T18:25:03.573

要获得指向电子表格中图像的直接链接，请使用该`getID`函数而不是`getUrl`并将 URL 添加到`Gdrive`.

**改变这个：**

```
var targetRange = sheet.getRange(lastRow+1, 1, 1, 4)
    .setValues([[ListVal,textVal,Email,img.getUrl()]]); 
```

**对此：**

```
var targetRange = sheet.getRange(lastRow+1, 1, 1, 4)
   .setValues([[ListVal,textVal,Email,"https://drive.google.com/uc?export=view&id="+img.getId()]]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-26T19:05:35.663

**在**_ ~~_~~ _ ~~_~~ _谷歌文档，人们在表格中上传了他们的图片和姓名。我不使用电子表格。这是代码：

```
 function doGet(e) {
var app = UiApp.createApplication().setTitle('Trombi');
var panel = app.createFormPanel();
var grid = app.createGrid(3,2).setId('registrationGrid');
var nameLabel = app.createLabel('Name');
var nameTextbox = app.createTextBox().setWidth('150px').setName('Name');
var submitButton = app.createSubmitButton('<B>send</B>'); 
var warning = app.createHTML('<B>Please wait<B>').setStyleAttribute('background','yellow').setVisible(false)
//file upload
var upLoadTypeLabel = app.createLabel('File to Upload');
var upLoad = (app.createFileUpload().setName('thefile'));
//Grid layout of items on form
grid.setWidget(0, 0, nameLabel)
    .setWidget(0, 1, nameTextbox)
    .setWidget(1, 0, upLoadTypeLabel)
    .setWidget(1, 1, upLoad)
    .setWidget(2, 0, submitButton)
    .setWidget(2, 1, warning)
var cliHandler = app.createClientHandler().forTargets(warning).setVisible(true)
submitButton.addClickHandler(cliHandler);  
panel.add(grid);
app.add(panel);
return app;}

function doPost(e) {
var app = UiApp.getActiveApplication();  
var Name = e.parameter.Name;
//app.getElementById('info').setVisible(true).setStyleAttribute('color','red');
 // data returned is a blob for FileUpload widget
var fileBlob = e.parameter.thefile;  
var doc = DriveApp.createFile(fileBlob).setName(Name); 
var doc = DocumentApp.openById('your key');
var body = doc.getBody();
var inlineI = body.appendImage(fileBlob);
  var width = inlineI.getWidth();
  var newW = width;
  var height = inlineI.getHeight();
  var newH = height;
  var ratio = width/height;
  Logger.log('w='+width+'h='+height+' ratio='+ratio);
  if(width>200){
  newW = 200;
  newH = parseInt(newW/ratio);
  }
  inlineI.setWidth(newW).setHeight(newH)
  body.appendParagraph(Name);
  body.appendHorizontalRule();
doc.saveAndClose();
app.add(app.createLabel('success')); 
return app
 }
```**

# php - 正则表达式不起作用

> ID：15461172
> 
> 赞同：0
> 
> 时间：2013-03-17T13:19:54.600
> 
> 标签：php, regex

我不是编码员，但我正在尝试为这样的事情制作一个正则表达式：

```
http://www.somedomain.com/340999 
```

我已经完成了所有这些，并且在我的 xenforo 插件中可以正常工作

```
http://[\w\.]*?somedomain\.[a-z]+/(\w+)
/http:\/\/(www\.)?somedomain\.com\/[0-9]/
http://[\w\.]*?somedomain\.[a-z]+/(?P<sval1>[\w-]+)
http://[a-z\.]*?somedomain\.[a-z]+/(\d+) 
```

错误是

```
Server Error
preg_match() [function.preg-match]: No ending delimiter '#' found 
```

也许代码有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:39:26.197

尝试[preg-replace](http://php.net/manual/en/function.preg-replace.php) instad：

```
$search = '/(http:\/\/)?(www\.)?(somedomain\.com)(|\/[0-9]+)/i';
$replacement = '-consored-';
echo preg_replace($search, $replacement, $input); 
```

即使没有*http*前缀或*www，上面的正则表达式也会捕获所有链接。*.

# sql - SQL 查询查找上个月售出的最贵汽车

> ID：15461174
> 
> 赞同：1
> 
> 时间：2013-03-17T13:20:02.937
> 
> 标签：sql, ms-access

我在 SQL 中查询时遇到问题。我需要生成的查询是输出上个月销售的最昂贵汽车的详细信息。

到目前为止，我的 SQL 代码如下：

```
SELECT CarMake, MAX(CFSSellingPrice) AS ['PriceOfCar']
FROM CarForSale
WHERE CFSSoldDate BETWEEN CVDATE('01/02/2013') AND CVDATE('01/03/2013')
GROUP BY CarMake; 
```

我遇到的问题是它输出了不止一辆汽车，并且也没有正确生产过去一个月中最昂贵的汽车。

即使有人能指出我正确的方向，任何帮助都将不胜感激。

感谢您的时间，

艾琳：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:25:50.270

您的查询包含[`cvdate()`](http://office.microsoft.com/en-001/access-help/type-conversion-functions-HA001229018.aspx)，所以我猜您正在使用 MS Access。如果是这样，您可以使用`top 1`查找最昂贵的汽车出售：

```
SELECT  top 1 CarMake
,       CFSSellingPrice
FROM    CarForSale
WHERE   CFSSoldDate BETWEEN CVDATE('01/02/2013') AND CVDATE('01/03/2013')
order by 
        CFSSellingPrice desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:30:22.420

以下对我有用（使用 format() 对您的汽车和销售进行分组，并在 WHERE 子句中使用子查询）

具有能够跨越数月的额外好处。

```
SELECT 
  format(cfs.CFSSoldDate,"yyyy mm") AS SoldMonth
, cfs.CarMake
, MAX(CFSSellingPrice) AS PriceOfCar

FROM CarsForSale AS cfs

WHERE 
 cfs.CFSSoldDate BETWEEN #1/1/2013# AND #3/31/2013# 
 AND cfs.CFSSellingPrice = (SELECT 
     max(c.CFSSellingPrice) FROM CarsForSale AS c 
     WHERE format(c.CFSSoldDate, "yyyy mm") = format(cfs.CFSSoldDate, "yyyy mm"))

GROUP BY 
    format(cfs.CFSSoldDate, "yyyy mm"), cfs.CarMake 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:27:21.410

使用`Top`关键字

```
SELECT Top 1 CarMake, MAX(CFSSellingPrice) AS ['PriceOfCar']
    FROM CarForSale
    WHERE CFSSoldDate BETWEEN CVDATE('01/02/2013') AND CVDATE('01/03/2013')
    GROUP BY CarMake; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:27:46.313

试试下面

```
SELECT CarMake, MAX(CFSSellingPrice) AS ['PriceOfCar']
FROM CarForSale
WHERE CFSSoldDate BETWEEN CVDATE('01/02/2013') AND CVDATE('01/03/2013'); 
```

不要使用`group by`关键字...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T13:38:45.473

此查询将为您提供所有记录，例如，如果有汽车制造商转向具有相同的销售价格并且这是价格范围内的最高价格。

```
SELECT  CarMake, CFSSellingPrice
FROM    CarForSale
WHERE   CFSSellingPrice =
        (
            SELECT  TOP 1 CFSSellingPrice
            FROM    CarForSale
            WHERE   CFSSoldDate BETWEEN CVDATE('01/02/2013') AND 
                    CVDATE('01/03/2013')
            ORDER   BY CFSSellingPrice
        ) 
```

# c++ - OpenMP 和内存带宽限制

> ID：15461178
> 
> 赞同：0
> 
> 时间：2013-03-17T13:20:21.630
> 
> 标签：c++, parallel-processing, openmp, memory-bandwidth

编辑：我的第一个代码示例是错误的。用更简单的固定。

我为大型向量和矩阵之间的代数运算实现了一个 C++ 库。我发现在 x86-x64 CPU 上，OpenMP 并行向量加法、点积等并不比单线程快。并行操作比单线程快 -1% - 6%。这是因为内存带宽限制（我认为）。

所以，问题是，这样的代码是否有真正的性能优势：

```
void DenseMatrix::identity()
{
    assert(height == width);
    size_t i = 0;
    #pragma omp parallel for if (height > OPENMP_BREAK2)
    for(unsigned int y = 0; y < height; y++)
        for(unsigned int x = 0; x < width; x++, i++)
            elements[i] = x == y ? 1 : 0;
} 
```

在此示例中，使用 OpenMP 没有严重的缺陷。但是，如果我正在使用稀疏向量和稀疏矩阵处理 OpenMP，例如，我不能使用 *.push_back()，在这种情况下，问题变得很严重。（稀疏向量的元素不像密集向量那样连续，因此并行编程有一个缺点，因为结果元素可以随时到达 - 而不是从低到高的索引）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:49:19.863

I don't think this is a problem of memory bandwidth. I see clearly a problem on `r`: `r` is accessed from multiple threads, which causes both *data races* and *false sharing*. False sharing can dramatically hurt your performance.

I'm wondering whether you can get even the correct answer, because there are data races on `r`. Did you get the correct answer?

However, the solution would be very simple. The operation conducted on `r` is *reduction*, which can be easily achieved by `reduction` clause of OpenMP.

*   [http://msdn.microsoft.com/en-us/library/88b1k8y5(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/88b1k8y5(v=vs.80).aspx)

Try to simply append `reduction(+ : r)` after `#pragma omp parallel`.

(Note: Additions on `double` are not commutative and associative. You may see some precision errors, or some differences with the result of the serial code.)

# php - PHP变量到数组

> ID：15461179
> 
> 赞同：2
> 
> 时间：2013-03-17T13:20:28.500
> 
> 标签：php

我经常看到或不得不将一堆变量转换成这样的数组：

```
$array = array("description"=>$description, "title"=>$title, "page"=>$page, "author"=>$author); 
```

基本上，所有数组键都与传入的变量的名称匹配。有没有办法引用变量名，以便可以像这样将其传递到数组中：

```
$array[varName($description)] = $description; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T13:27:31.673

您可以使用[`compact` *^([docs])*](http://www.php.net/manual/en/function.compact.php)：

```
$array = compact('description', 'title', 'page', 'author'); 
```

每个参数都是一个变量名，它将创建一个数组，其中键是名称，值是具有该名称的变量的值。

不过，这与您的方法相反。

# c# - 如何在不改变其宽度和高度的情况下将图像文件调整为要求的文件大小？

> ID：15461183
> 
> 赞同：1
> 
> 时间：2013-03-17T13:20:34.130
> 
> 标签：c#, .net

如何将图像文件大小更改为所需大小？就像一张 800KB 的图片变成 100KB 的？

我有一个 3MB 尺寸的图像：（2560 X 1600），300 dpi 和 24 位深度。我只是在 Bitmap 中读取它，将其分辨率更改为 150 dpi 并用新名称保存，并认为可能会将其减少到几乎一半原始文件，但新文件保持相同大小，并且 dpi SetResolution 不会产生任何效果。

```
Bitmap image = Bitmap.FromFile("myPic.jpeg");
image.SetResolution(96, 96);
image.Save("newPic.jpeg"); 
```

然后我使用了这段代码

```
// Reads Image
Bitmap image = Bitmap.FromFile("myPic.jpeg");

// Sets canvas with new dpi but same dimensions and color depth
Bitmap canvas = new Bitmap(image.Width, image.Height, PixelFormat.Format24bppRgb);
canvas.SetResolution(150, 150);

// Draw image on canvas through graphics
Graphics graphics = Graphics.FromImage(canvas);
graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
graphics.DrawImage(image, new Rectangle(0, 0, image.Width, image.Height),
            new Rectangle(0, 0, image.Width, image.Height), GraphicsUnit.Pixel);

// Saved Image
bitmap.Save("newPic.jpeg"); 
```

此处 dpi 已更改为新文件，但文件大小跳至 7.84MB

错在哪里？dpi 对文件大小有影响吗？

谢谢您的考虑。祝好运

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:30:54.403

分辨率（ppi / dpi）对文件大小没有影响。它只是关于图像在物理尺寸上应该有多大的信息，即如何将像素大小转换为英寸。

当您使用不同的分辨率重新保存图像时，文件将完全相同，除了这两个值。

当您创建一个新位图并将图像绘制到该位图上时，新位图对象没有与之关联的文件类型，因此当您在未指定文件类型的情况下保存它时，它将被保存为 PNG 图像而不是 JPEG .

在不更改像素尺寸的情况下更改文件大小的方法是更改​​ JPEG 文件的压缩级别。

[MSDN：如何：设置 JPEG 压缩级别](http://msdn.microsoft.com/en-us/library/bb882583.aspx)

# c# - cmd 与 Visual Studio

> ID：15461186
> 
> 赞同：1
> 
> 时间：2013-03-17T13:20:54.433
> 
> 标签：c#, visual-studio, cmd, data-access-layer

我目前正在使用 c# 开发 windows 应用程序，目前我遇到了一个问题。我开始在 notepad++ 中创建 Windows 应用程序，因为我无法使用 VS。我正在使用 cmd 来编译代码。我将补充一点，我有一个 *.dll 文件，该文件由应用程序使用。现在我正在尝试将我的代码移动到 VS。我创建了新的解决方案，并使用添加现有项目来包含我的代码文件。我还添加了对 *.dal 文件的引用。我还在 MainForm.cs 文件中添加了 using namespace 语句。现在我遇到了问题，因为当我尝试去编译代码时，我得到了错误：

```
 The type or namespace name 'DataAccessLayer' could not be found
 (are you missing a using directive or an assembly reference?) 
```

我想知道我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:30:05.363

原帖[在这里](http://xinyustudio.wordpress.com/?s=namespace)。

在项目属性中，将Dotnet框架从2.0、3.0或3.5改为4，编译运行！![在此处输入图像描述](../Images/c6a7eda48513c3b835e1e8fc6fe2761f.png)

# python - 计算两个列表中字母对匹配的组合？

> ID：15461188
> 
> 赞同：0
> 
> 时间：2013-03-17T13:21:11.097
> 
> 标签：python, string, python-2.7, comparison

我是编程新手，在这里找不到似乎正在回答这个确切问题的问答（尽管 Python 上有很多，并且列表中的单词和字母匹配）。

我有两个这样的列表：

```
 list1 = ["INTJ","ENTJ","ESTJ"]
  list2 = ["INTP","ESFJ","ISTJ"] 
```

共有 16 种可能的字母对组合。我已经设法计算出有多少完全匹配的字母对，例如 I/E（第一个）、S/N（第二个）、T/F（第三个）和 P/J（第四个）。

我如何跟踪有多少精确的 3 字母、2 字母和 1 字母匹配？以下是三字母匹配变体的示例：

```
 ISTP and ISTJ (I + S + T)
 INFP and INTP (I + N + P) 
```

我从用户@thkang 那里得到了帮助，计算了这样的字母对匹配的数量，但我不知道如何重新排列这个代码来跟踪匹配的组合。我是否必须以其他方式存储匹配项才能完成此操作？

```
matches = {0:0, 1:0, 2:0, 3:0}

for item1, item2 in zip(list1, list2):
   for i in xrange(4):
      if item1[i]==item2[i]: 
      matches[i] += 1

total_letters_compared = #length of a list * 4
total_correct_matches = #sum(matches.values())
nth_letter_pair_matches = #matchs[n-1] 
```

这是我编写的代码，但我开始明白它只是普通的糟糕代码。有人可以帮我解决这个问题吗？

```
matches = {0:0, 1:0, 2:0, 3:0}
four_letter_matches = 0
three_letter_matches = 0
two_letter_matches = 0

for item1, item2 in zip(actual, typealyzer):
if item1[0:2] == item2[0:2]\
or item1[0], item1[1], item1[3] == item2[0], item2[1], item2[3]\
or item1[1], item1[2], item1[3] == item2[1], item2[2], item2[3]\
or item1[0], item1[2], item1[3] == item2[0], item2[2], item2[3]:
    three_letter_matches = three_letter_matches + 1 

    elif item1[0:1] == item2[0:1]\
or item1[0], item1[1] == item2[0], item2[1]\
or item1[0], item1[2] == item2[0], item2[2]\
or item1[0], item1[3] == item2[0], item2[3]\
or item1[1], item1[2] == item2[1], item2[2]\
or item1[1], item1[3] == item2[1], item2[3]:
    #and so forth...
        two_letter_matches = two_letter_matches + 1 

    #I think I can get the one-letter matches by matches[1] or matches[2] or matches[3] or matches[4] 
for i in xrange(4):
    if item1[i]==item2[i]: 
        matches[i] += 1 
```

我希望能够以某种方式分别打印出三个、两个和一个字母的匹配项

```
print str(three_letter_matches)
print str(two_letter_matches)
print str(one_letter_matches) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:44:52.683

如果我正确理解了您的问题，那么您可以跟踪所有匹配的组合，如下所示：

```
list1 = ['INTJ','ENTJ','ESTJ']
list2 = ['INTP', 'ESFJ', 'ISTJ']
import collections
import itertools
matches = collections.defaultdict(list)
for item1,item2 in itertools.product(list1,list2):
    match = ''
    for i in xrange(4):
        if item1[i] == item2[i]:
            match += item1[i]
    if len(match):
        matches[match].append((item1,item2)) 
```

`matches`最终为：

```
{'ITJ': [('INTJ', 'ISTJ')], 
 'EJ': [('ENTJ', 'ESFJ')], 
 'INT': [('INTJ', 'INTP')], 
 'J': [('INTJ', 'ESFJ')], 
 'STJ': [('ESTJ', 'ISTJ')], 
 'TJ': [('ENTJ', 'ISTJ')], 
 'T': [('ESTJ', 'INTP')], 
 'NT': [('ENTJ', 'INTP')], 
 'ESJ': [('ESTJ', 'ESFJ')]} 
```

如果您只想计算给定匹配项的出现次数，您可以修改代码如下：

```
list1 = ['INTJ','ENTJ','ESTJ']
list2 = ['INTP', 'ESFJ', 'ISTJ']
import collections
import itertools
matches = collections.defaultdict(lambda: 0)
for item1,item2 in itertools.product(list1,list2):
    match = ''
    for i in xrange(4):
        if item1[i] == item2[i]:
            match += item1[i]
    if len(match):
        matches[match] += 1 
```

这使：

```
{'ITJ': 1, 'EJ': 1, 'INT': 1, 'J': 1, 'STJ': 1, 'TJ': 1, 'T': 1, 'NT': 1, 'ESJ': 1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:45:24.170

```
import itertools as IT
import collections

list1 = ["INTJ","ENTJ","ESTJ"]
list2 = ["INTP","ESFJ","ISTJ"]

matches = collections.Counter()
for item1, item2 in zip(list1, list2):
    for n in range(1,4):
        for idx in IT.combinations(range(4), n):
            if all(item1[i] == item2[i] for i in idx):
                print(item1, item2, idx)
                matches[n] += 1

print(matches) 
```

产量

```
% test.py
('INTJ', 'INTP', (0,))
('INTJ', 'INTP', (1,))
('INTJ', 'INTP', (2,))
('INTJ', 'INTP', (0, 1))
('INTJ', 'INTP', (0, 2))
('INTJ', 'INTP', (1, 2))
('INTJ', 'INTP', (0, 1, 2))
('ENTJ', 'ESFJ', (0,))
('ENTJ', 'ESFJ', (3,))
('ENTJ', 'ESFJ', (0, 3))
('ESTJ', 'ISTJ', (1,))
('ESTJ', 'ISTJ', (2,))
('ESTJ', 'ISTJ', (3,))
('ESTJ', 'ISTJ', (1, 2))
('ESTJ', 'ISTJ', (1, 3))
('ESTJ', 'ISTJ', (2, 3))
('ESTJ', 'ISTJ', (1, 2, 3))
Counter({1: 8, 2: 7, 3: 2}) 
```

我包含了一个额外的打印语句，以显示找到的匹配项。

```
('ESTJ', 'ISTJ', (2, 3)) 
```

表示这两个列表在索引 2 和 3 处匹配——即字母 T 和 J。

```
Counter({1: 8, 2: 7, 3: 2}) 
```

表示有 8 个 1 字母匹配、7 个 2 字母匹配和 2 个 3 字母匹配。

# java - Java Android 错误：“Toast 类型中的方法 makeText(Context, CharSequence, int) 不适用于参数

> ID：15461195
> 
> 赞同：-2
> 
> 时间：2013-03-17T13:21:29.387
> 
> 标签：java, android, eclipse, android-activity, toast

我正在编写一个 java 应用程序，将数据（用户名）从第一个活动传递到显示它的另一个活动。然后，用户输入要传递回第一个活动的电子邮件地址，我试图将返回的电子邮件数据显示为 toast，但不断收到错误“Toast 类型中的方法 makeText(Context, CharSequence, int) 不适用对于参数（上下文、字符串、字符串、int）”

我在我的其他应用程序中使用过 toasts 并且以前从未遇到过这个问题，所以我显然错过了一些东西。我是 java android 编程新手，所以任何建议都会有所帮助

下面是处理返回数据并尝试将其显示为 toast 的代码部分

谁能建议我为什么会收到此错误以及如何解决？

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
      if (data.hasExtra("Choice")) {

         Toast.makeText(ExplicitOne.this, "Choice sent back:", tvDataRet,      
Toast.LENGTH_SHORT).show();
         return;
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:22:46.027

像这样使用。

连接字符串，然后传入第二个参数。这是 Toast 类的静态方法，具有三个参数。

```
Toast.makeText(ExplicitOne.this, "Choice sent back:" +  tvDataRet, Toast.LENGTH_SHORT).show(); 
```

# jquery - jquery 获取 id 并附加 .html & toggleClass

> ID：15461202
> 
> 赞同：2
> 
> 时间：2013-03-17T13:22:04.303
> 
> 标签：jquery, load, find, append

我是 jquery 的新手，很乐意在这方面得到一些提示。我有几个链接，我想将它们的内容加载到我的#content div。我不使用href，所以我想加载id并附加.html（例如：第一个链接得到了id="link1"。点击时我想将link1.html加载到#content div。）。此外，我想将点击链接的类别从非活动切换为活动，并找到上一个活动链接并将其更改为非活动。

所以这就是我尝试的：

```
$(".link").click(function() {
    var linkHref = $(this).attr("id");
    var loadHref = linkHref.append(linkHref + ".html");
    $("#content").load(loadHref);
    $("#nav").find(".active").toggleClass("active inactive");
    $(this).children("a").toggleClass("inactive active");
}); 
```

的HTML：

```
<ul id="nav">
    <li><a href="#" id="link1" class="active link">Link 1</a></li>
    <li><a href="#" id="link2" class="inactive link">Link 2</a></li>
    <li><a href="#" id="link3" class="inactive link">Link 3</a></li>
</ul> 
```

输出：什么都没有发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:26:55.903

`append`是 jQuery 对象的一个​​方法，`attr`返回一个没有方法的字符串（一个字符串对象）`append`，如果你想连接字符串，你应该使用`+`操作符。另请注意，您已将处理程序绑定到`a`元素而不是`li`元素，因此无需使用`children`.

```
var linkHref = $(this).attr("id") + '.html'; 
```

```
$(".link").click(function(e) {
    // Prevent the default action of the event
    e.preventDefault();
    var linkHref = this.id + '.html';
    $("#content").load(linkHref);
    $("#nav a.active").toggleClass('inactive active');
    $(this).addClass("active").removeClass('inactive');
}); 
```

# passwords - 在 ASP.net MVC 模型中，有没有办法在属性设置器中操作数据？

> ID：15461207
> 
> 赞同：0
> 
> 时间：2013-03-17T13:22:36.983
> 
> 标签：passwords, asp.net-membership, password-encryption, federated-identity

这篇文章有点问我需要什么但不是很好......[如何加密密码](https://stackoverflow.com/questions/2888921/how-to-encrypt-password-in-asp-net-mvc)

本质上我有一个模型“用户”

```
Public Class User

    Public Property ID As Integer

    Public Property NickName As String

    Public Property EmailAddress As String

    Public Property Password As String

End Class 
```

我希望能够做这样的事情......

```
Public Class User

    Public Property ID As Integer

    Public Property NickName As String

    Public Property EmailAddress As String

    Public Property Password As String
        Get
            Return Password
        End Get
        Set(value As String)
            Password = DoMyHashing(value)
        End Set
    End Property

End Class 
```

有没有办法简单地做到这一点？

**编辑**：我已经开始使用使用联合身份系统的 BrockAllen.MembershipReboot。在我看来，它比会员提供者要好得多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:07:22.537

安全性不应该*掉以轻心*，最好不要重新发明。*简单*并不一定意味着*安全*。因此，您可以使用现有的会员提供程序，它已经为您实现了安全性，并且只在数据库中存储了密码的散列版本。

如果您不想使用会员提供程序，而是自己实现密码哈希，[`good guide`](http://crackstation.net/hashing-security.htm)那么您可能会考虑在开始编码之前先了解一下。

这是生成密码哈希的安全方法：

> 存储密码
> 
> 1.  使用 CSPRNG 生成长随机盐。
> 2.  将盐添加到密码中，并使用标准加密散列函数（例如 SHA256）对其进行散列。
> 3.  将盐和哈希都保存在用户的数据库记录中。
> 
> 验证密码
> 
> 1.  从数据库中检索用户的盐和哈希。
> 2.  将盐添加到给定密码并使用相同的散列函数对其进行散列。
> 3.  将给定密码的哈希值与数据库中的哈希值进行比较。如果它们匹配，则密码正确。否则，密码不正确。

# asynchronous - 请求/响应中的一对一和一对多是什么意思？

> ID：15461214
> 
> 赞同：0
> 
> 时间：2013-03-17T13:23:04.160
> 
> 标签：asynchronous, language-agnostic, client-server

我是初学者，这是我第一次在数据库世界之外听到这个词。那么这在这里意味着什么：

> 在这种情况下，是的。**当请求和响应之间存在一对一关系**时，生成器很好，但是当这里 看到的存在**一对多的**扇出（或在 Tornado 其他地方看到的 streaming_callbacks 出现的类似情况）时，我认为它是只使用回调比尝试将所有内容都放入生成器更干净。

你能提供一些使用一对一和一对多的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:07:13.450

它是关于数据库关系，一个条目如何与另一个或许多其他条目相关联。

例如，您有一个用户表和一个设置表。

一位用户与一项设置条目相关。那是一对一的。

与表用户和表文章相同的想法：

一位用户写了许多文章。那是一对多。

您可以尝试阅读以下内容：

[http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/)

我希望它有所帮助。

# c - 动态内存分配和 sprintf

> ID：15461217
> 
> 赞同：1
> 
> 时间：2013-03-17T13:23:32.973
> 
> 标签：c

在编写以下代码时，我应该得到一个错误。数组大小为零（我认为这是非法的），此外 sprintf 正在将“abc”打印到尚未分配任何内存但我得到的输出为“abc”。我不明白为什么？

```
#include<stdio.h>
#include<string.h>
int main()
  {
    char a[0];
    sprintf(a,"%s","abc");
    printf("%s\n",a);
    return 0;
  } 
```

当我将数组大小设置为 1、2、3 时，我得到了正确的输出，而当显式使用 a 作为指针，即使用 char *a( 这是预期的）。有人可以解释内部工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T13:25:16.837

不，没有合理的解释。通过使用小于要打印的字符串的数组，您的程序会调用未定义的行为。这意味着实际上**任何事情都可能发生，**包括一切似乎都运行良好的事实。未定义的行为并不意味着程序**必须**崩溃，而是意味着它**可能会**崩溃。

# ruby-on-rails - Ruby on Rails，脚本/延迟作业开始。没发生什么事

> ID：15461219
> 
> 赞同：3
> 
> 时间：2013-03-17T13:23:40.757
> 
> 标签：ruby-on-rails, delayed-job

我正在使用以下宝石：

```
gem 'daemons', "=1.0.10"
gem 'delayed_job_active_record' 
```

并使用以下命令延迟该方法：

after_create :perform_analysis handle_asynchronously :perform_analysis, :run_at => Proc.new { 1.minutes.from_now }

脚本/延迟作业：

```
#!/usr/bin/env ruby

require File.expand_path(File.join(File.dirname(__FILE__), '..', 'config', 'environment'))
require 'delayed/command'
Delayed::Command.new(ARGV).daemonize 
```

所以，我用通常的 rails s 启动应用程序（在 tmp/pids 中出现一个文件 server.pid）。上传一些东西，所以调用 create 方法。一些数据被插入到delayed_jobs 表中。我关闭停止运行服务器（在 tmp/pids 中什么都不存在！）。

然后我写入命令行：

```
RAILS_ENV=production script/delayed_job start 
```

响应：在 tmp/pids 中出现了delayed_job.pid，终端什么也没显示，所以我运行：

```
 kik@kik-VirtualBox:~/Desktop/tors15.01$ RAILS_ENV=production script/delayed_job status
pid-file for killed process 8695 found (/home/kik/Desktop/tors15.01/tmp/pids/delayed_job.pid), deleting.
delayed_job: no instances running 
```

并再次尝试我的运气：

```
kik@kik-VirtualBox:~/Desktop/tors15.01$ RAILS_ENV=production script/delayed_job start
kik@kik-VirtualBox:~/Desktop/tors15.01$ RAILS_ENV=production script/delayed_job run
pid-file for killed process 8718 found (/home/kik/Desktop/tors15.01/tmp/pids/delayed_job.pid), deleting.
SQLite3::SQLException: no such table: delayed_jobs: UPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'delayed_job host:kik-VirtualBox pid:8724') 
```

当我调整`rake jobs:work`它正在工作

这是什么原因导致我在哪里做错了？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T13:37:24.670

您确定要将 rails 环境设置为生产环境吗？

```
script/delayed_job start 
```

或者

```
RAILS_ENV=development script/delayed_job start 
```

# windows - 如何使用 Batch 在注册表中存储一个简单的变量？

> ID：15461220
> 
> 赞同：0
> 
> 时间：2013-03-17T13:23:47.900
> 
> 标签：windows, batch-file

我有一个非常简单的问题：

我想在注册表中存储两个用户输入的变量字符串，以便稍后在批处理再次运行时访问它。我已经在谷歌上搜索了一段时间，似乎无法找到答案。

只要在下次执行时可用，它就可以存储在任何注册表中。

以下是需要发生的事情的流程：

```
:: Check if variable_a/b is available in reg, else ask user....?
SET /p variable_a="Enter a string: "
SET /p variable_b="Enter a string: "

:: Store both vars somehow....?

echo My variables:
echo variable_a
echo variable_b 
```

你能帮我解决这个简单的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:29:44.333

```
setx variable_a "%variable_a%"
setx variable_b "%variable_b%" 
```

将简单地存储变量 - 这样在同一会话中的任何未来 CMD.EXE 调用都会将变量/值加载到环境中。

添加`/m`以保存下次和将来的登录（不存储用于此登录会话）

```
setx variable_a "" 
```

删除 - 相同的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:54:40.010

basetx 并非在所有 Windows 版本中都可用。

另外，我更喜欢将变量存储在文件中，而不是注册表中

```
if not exist somepath\myvar.bat (
 SET /p varA="Enter a string: " 
 SET /p varB="Enter b string: "
 echo REM this is my permanent store >somepath\myvar.bat
 echo set variable_a=%varA% >> somepath\myvar.bat
 echo set variable_b=%varB% >> somepath\myvar.bat
)
call somepath\myvar.bat 
```

# python - 使用布局对象 AppendedText 更改 django-crispy-forms 中仅一个字段的小部件

> ID：15461225
> 
> 赞同：4
> 
> 时间：2013-03-17T13:24:21.957
> 
> 标签：python, django, django-crispy-forms

我正在使用[django-crispy-forms在](http://django-crispy-forms.readthedocs.org/)[django](https://www.djangoproject.com/)中呈现模型的形式。django-crispy-forms 已经很好地与[Twitter Bootstrap](http://twitter.github.com/bootstrap/)集成，并为小部件定义了一个布局对象`AppendedText`：

![附加文本小部件](../Images/baae0ac29c78e76c38eb97c136707c07.png)

我的 django 中有以下模型`models.py`

```
class Historia(models.Model):
    persona         = models.ForeignKey('Persona', 
                                  blank=False, 
                                  null=True,
                                  related_name='historias')
    fecha           = models.DateTimeField(unique=True, 
                                auto_now_add=True)
    motivo          = models.TextField()
    peso            = models.DecimalField(blank=True,
                                   max_digits=5, decimal_places=2)
    talla           = models.IntegerField(blank=True)
    tension         = models.CharField(max_length=15)
    pulso           = models.IntegerField()
    diagnostico     = models.TextField()
    tratamiento     = models.TextField()
    pendiente       = models.TextField(blank=True) 
```

`modelform`我在中定义以下内容`forms.py`：

```
class HistoriaForm(django.forms.ModelForm):
    class Meta:
        model = models.Historia

    def __init__(self, *args, **kwargs):
        super(HistoriaForm, self).__init__(*args, **kwargs)

        self.helper = FormHelper(self)
        self.helper.form_class = 'form-horizontal'
        self.helper.form_tag = True
        self.helper.form_id = 'nueva_historia_form'
        self.helper.form_action = 'nueva_historia'

        self.helper.form_show_errors = True
        self.helper.error_text_inline = False

        self.helper.add_input(Submit('crear', 'Crear')) 
```

我的问题是如何更改`peso`字段的小部件而无需创建新的`widget`子类，因为`django-crispy-forms`已经定义了一个布局对象。另请注意，我不想枚举所有其他字段以便这样做：

```
self.helper.layout = Layout(
            Fieldset(
                'Legend',
                'nombre',
                'apellido',
                AppendedText('peso', 'kg')
            ),
            ButtonHolder(
                Submit('submit', 'Submit', css_class='button white')
            )
        ) 
```

因为如果我决定在我的模型中添加标准小部件已经非常有用的新字段，我将不得不继续编辑帮助程序布局。

**编辑：**我还看到了在帮助器中访问布局的方法，`self.helper.layout[0] = AppendedText('peso', 'kg')`但我不知道我想更改的字段的索引，如果我能写会更好`self.helper.layout['peso'] = AppendedText('peso', 'kg')`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:10:32.883

django-crispy-forms 确实有用于这些事情的 API：http: [//django-crispy-forms.readthedocs.org/en/latest/dynamic_layouts.html](http://django-crispy-forms.readthedocs.org/en/latest/dynamic_layouts.html)

你可以简单地做：

```
form.helper['peso'].wrap(AppendedText, "kg") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T14:40:33.510

好的，这对我有用，而不必过于冗长并保持简单。在该`__init__`方法中，只需执行以下操作：

```
for i, field in enumerate(self.helper.layout):
    if field == 'peso':
        self.helper.layout[i] = AppendedText('peso', 'kg') 
```

如果您要查找的字段位于`layout`对象的第一级层次结构中，则此方法非常有效，否则您必须更具体地了解您要查找的内容。例如，如果您的字段位于`DIV`容器中，您将首先必须检查是否`field.__class__ == DIV`然后反省该`DIV`字段，这并不像看起来那么容易。

`layout`但是，如果有对象的 API 来支持过滤器查询，那就太好了

# php - MySQL 表/查询设计 - 一项的倍数，多条评论

> ID：15461234
> 
> 赞同：2
> 
> 时间：2013-03-17T13:25:14.957
> 
> 标签：php, mysql, sql

我有一个显示图像的网站，每页最多 30 个。

用户可以对图像发表评论，如果有评论，这些评论或至少前几个评论会出现在图像下方。

我有一个链接到我服务器上的文件夹的图像参考表。

例如

```
image_id // image id
user_id // user who added
image_url // ref to image 
```

然后是所有评论的单独表格

```
comment_id
image_id // link to images table
comm_poster_id // id of user who posted comment 
```

现在，问题是将这些信息一起调用的最佳方式是什么？理想情况下在一个选择

我真的不能在每个图像下进行 ajax 调用，因为这将是每页 30 db 调用，这会杀死它，那么替代/最佳方法是什么？

澄清一下`select`，只有一张图片，但一张图片当然可以有多个评论

希望我已经提供了足够的信息

**编辑**为了澄清，问题是将所有这些信息整理在一起以进行显示的最佳方法是什么 - 我是否可以运行一个查询，将页面上的所有图像都拉入页面上，如果图像存在，也可以以某种方式拉入图像的评论。

至于我希望数据看起来如何......我不知道。这是我第一次做这样的事情，所以如果可能的话需要指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:50:21.230

好的，我不是 php 专家，但我让你开始了解 sql 方面的内容。我可以帮助你使用 php，但这里还有其他人比我更精通它。

我为你启动了这个 sqlFiddle，去看看，你可以修改查询来得到你想要的。

[http://sqlfiddle.com/#!2/79ecf/1/0](http://sqlfiddle.com/#!2/79ecf/1/0)

从 php 方面来看，在您知道要如何显示数据之前，很难说出您的查询需要是什么样子。我暂时选择了这个：

```
select *
from images i
inner join comments c on i.image_id=c.image_id; 
```

这是一个非常简单的查询，您可能最终需要添加它。

我假设您使用 mysql，因为大多数使用 php 的人选择 mysql。据我了解，有两种连接方式，mysqli 和 pdo。PDO 似乎正在成为首选方法，但我对此一无所知。以下是两者的参考。只是不要使用 mysql_query()，它已被弃用，所以不要费心学习它的任何部分。

```
PDO: http://dev.mysql.com/doc/refman/5.6/en/apis-php-pdo-mysql.html
MYSQLI: http://php.net/manual/en/mysqli.query.php 
```

其中任何一个都应该提供足够的教程来向您展示如何查询数据库，然后遍历结果以获取数据。然后由您决定如何在页面上显示它。

希望这足以为您指明正确的方向。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:04:57.757

您最简单的方法是将两个表连接在一起，首先按图像排序，然后按评论子排序。

```
SELECT i.*, c.comment_id, c.comm_poster_id 
FROM images i LEFT JOIN comments c ON i.image_id=c.image_id
WHERE {whatever where clause selects your set of 30 images}
ORDER BY i.image_id, c.comm_poster_id 
```

使用 LEFT JOIN 或没有评论的图像将不会显示。

# facebook - 多个应用程序用于一个目的。非法的？

> ID：15461241
> 
> 赞同：0
> 
> 时间：2013-03-17T13:26:00.150
> 
> 标签：facebook, web-crawler

为同一目的拥有多个 Facebook 应用程序是否违法？我正在为分布式 Facebook 爬网的计算机科学学士学位做论文，所以将论文建立在不合法的东西上将是一场灾难。

免责声明：论文仅用于科学目的，其想法是开发尝试现有的并开发新的调度方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:39:51.487

As per my knowledge, there is no any rule for what purpose app is made for. You can use for same or different purposes. (otherwise same type of games couldn't on facebook).

What do you mean by same purpose? I don't think facebook is checking for what purpose app is used unless anyone have reported it.

# c - 调试一个简单的 C 程序

> ID：15461242
> 
> 赞同：-1
> 
> 时间：2013-03-17T13:26:05.440
> 
> 标签：c

我是 C 新手。对于以下程序，问题是：无论我输入什么整数，输出都是 1。你能告诉我问题出在哪里吗？

```
#include <stdio.h>

int main(void)
{
    int n;
    n = scanf("%d", &n);
    printf("%d\n", n);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:26:57.413

因为您正在打印`scanf()`. scanf() 返回成功扫描的值的数量。

换行：

```
n = scanf("%d", &n); 
```

至：

```
 scanf("%d", &n); 
```

或者，如果您想验证输入是否成功，请使用不同的变量：

```
if (scanf("%d", &n)! = 1 ) {
   /* Input failure */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:27:07.897

`scanf`返回读取的有效值的数量。在您的示例中，首先将读取的值`n`进一步替换`scanf`为始终`1`在当前实现中的返回值，只要您输入有效的整数作为输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T13:28:35.493

`scanf()`返回成功读取的项目数。因此，如果将其分配给`n`，`n`则将包含 1 （以防整数被读取而没有错误）。

总而言之：将您的代码更改为

```
scanf("%d", &n); 
```

并阅读一本关于 C 的好书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:37:41.317

你的错误在

> n = scanf("%d", &n);

把它改成

> `scanf("%d", &n);`

那应该没问题

# mysql - 时间和日期字段与 ID 字段不同步

> ID：15461243
> 
> 赞同：2
> 
> 时间：2013-03-17T13:26:06.590
> 
> 标签：mysql, sql, group-concat

我表中的数据

```
 item
item_id  name
1        ball
2        cap
3        bat

    order
order_id  date         time
1         06/01/2013   15:12
2         12/01/2013   11:10
3         06/01/2013   23:10
4         23/01/2013   10:55

    orderform
order_id item_id quantity
1        1       2
1        3       4
2        1       1
3        2       3
3        1       2
3        3       1
4        1       2 
```

目前我正在使用以下 sql 查询：

```
 SELECT
  order_id, 
  group_concat(txt) AS txt,
  date,
  time
FROM (
    SELECT 
      orderform.order_id AS order_id,
      order.date AS date,
      order.time AS time,
      CONCAT(orderform.quantity, ' x ',item.name) AS txt
    FROM order orderform
    LEFT JOIN item ON orderform.item_id = item.item_id
) AS baseview
GROUP BY order_id 
```

我明白了，日期和时间与 id 不同步。

```
order_id  name                      date         time
1         2 x ball,4 x bat          06/01/2013   15:12
2         ball                      06/01/2013   23:10
3         3 x cap,2 x ball,bat      06/01/2013   15:12
4         2 x ball                  06/01/2013   15:12 
```

它应该看起来像这样。我应该在此查询中为时间和日期做另一个子选择吗？感谢帮助。

```
 order_id  name             date         time
1         2 x ball,4 x bat          06/01/2013   15:12
2         ball                      12/01/2013   11:10
3         3 x cap,2 x ball,bat      06/01/2013   23:10
4         2 x ball                  23/01/2013   10:55 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:31:52.477

实际上，即使不使用子查询，您也可以获得所需的结果。

```
SELECT  a.order_ID,
        GROUP_CONCAT(CONCAT(b.quantity, ' x ',c.name) SEPARATOR ', ') ItemName,
        MAX(a.date) date,
        MAX(a.time) time
FROM    `order` a
        INNER JOIN orderform b
            ON a.order_id  = b.order_id 
        INNER JOIN item c
            ON b.item_id = c.item_id 
GROUP   BY a.order_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/33f0b/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:37:24.983

您的查询缺少条件如何`order`以及`orderform`应该组合在一起。

```
SELECT
  order_id, 
  group_concat(txt) AS txt,
  date,
  time
FROM (
    SELECT 
      orderform.order_id AS order_id,
      `order`.date AS date,
      `order`.time AS time,
      CONCAT(orderform.quantity, ' x ',item.name) AS txt
    FROM `order`, orderform
    LEFT JOIN item ON orderform.item_id = item.item_id
    WHERE orderform.order_id = `order`.order_id
) AS baseview
GROUP BY order_id 
```

工作示例：[http ://sqlfiddle.com/#!2/66706/6](http://sqlfiddle.com/#!2/66706/6)

# javascript - 如何在 HTML5 Javascript sqlite 上插入表格之前检查数据是否已经存在？

> ID：15461250
> 
> 赞同：1
> 
> 时间：2013-03-17T13:27:01.710
> 
> 标签：javascript, html, sqlite

我正在开发一个 Web 应用程序，它使用 HTML5/Javascript sqlite 抓取网站 RSS 提要并将其保存到数据库中。

这是我的代码

```
function createPosts(title,author,content,contentSnippet,publishedDate,img_destaque){
        var oldPost = checkIfExists(publishedDate);
        console.log(oldPost);
        if(!oldPost){
            var query = "insert into mytable (titulo, data, autor, img_destaque,descricao,postagem) VALUES (?, ?, ?, ?, ?, ?);";
            try {
                localDB.transaction(function(transaction){
                    transaction.executeSql(query, [title, publishedDate, author, img_destaque, contentSnippet, content], function(transaction, results){
                        if (!results.rowsAffected) {
                            updateStatus("Error, not data inserted");
                        }
                        else {
                            updateStatus("Data inserted, id: " + results.insertId);
                        }
                    }, errorHandler);
                });
            } 
            catch (e) {
                updateStatus("Error: " + e + ".");
            }
        }
        else{
            updateStatus("Error: Post already exists");
        }

} 
```

这是函数 checkIfExists

```
function checkIfExists(publishedDate){
    var query = "SELECT * FROM mytable;";
    var returnStatus;
    try {
        localDB.transaction(function(transaction){
            transaction.executeSql(query, [], function(transaction, results){
                for (var i = 0; i < results.rows.length; i++) {
                    var row = results.rows.item(i);
                    if(publishedDate === row.data){
                        console.log(publishedDate+' '+row.data);
                        returnStatus = true;
                    }
                }
                if(i == results.rows.length){
                    returnStatus = false;
                }
            }, function(transaction, result){
                    returnStatus = true;
            }, function(transaction, error){
                updateStatus("Erro: " + error.code + "<br>Mensagem: " + error.message);
                    returnStatus = true;
            });

        });
    } 
    catch (e) {
        updateStatus("Error: SELECT não realizado " + e + ".");
        returnStatus = true;
    }
    finally{
        console.log(returnStatus);
        return returnStatus;
    }
} 
```

但它不起作用 oldPost 总是返回“未定义”，并且通过我的控制台日志记录，我看到 localDB.transaction 在函数返回“oldPost”变量值之后被处理。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:13:20.240

如何重构`checkifExists`以获取两个回调并在 sql 中使用 where 子句，而不是在 javascript 中进行搜索所以

```
function checkIfExists(publishedDate,callbacktrue,callbackfalse){
    var query = "SELECT * FROM mytable WHERE data=?;";
    try {
        localDB.transaction(function(transaction){
            transaction.executeSql(query, [publishedDate], function(transaction, results){
                if(results.rows.length > 0){
                    callbacktrue();
                } else {
                    callbackfalse();
                }
            }, function(transaction, result){
                    callbacktrue();
            }, function(transaction, error){
                updateStatus("Erro: " + error.code + "<br>Mensagem: " + error.message);
                    callbacktrue();
            });

        });
    } 
    catch (e) {
        updateStatus("Error: SELECT não realizado " + e + ".");
        callbacktrue();
    }
}
function createPosts(title,author,content,contentSnippet,publishedDate,img_destaque){
    checkIfExists(publishedDate,function(){
            updateStatus("Error: Post already exists");
        },function(){
            var query = "insert into mytable (titulo, data, autor, img_destaque,descricao,postagem) VALUES (?, ?, ?, ?, ?, ?);";
            try {
                localDB.transaction(function(transaction){
                    transaction.executeSql(query, [title, publishedDate, author, img_destaque, contentSnippet, content], function(transaction, results){
                        if (!results.rowsAffected) {
                            updateStatus("Error, not data inserted");
                        }
                        else {
                            updateStatus("Data inserted, id: " + results.insertId);
                        }
                    }, errorHandler);
                });
            } 
            catch (e) {
                updateStatus("Error: " + e + ".");
            }
    });               
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T09:35:47.043

可以使用：

```
<input type="text" name="name" class="text_cs">
<span class="result"></span> </br>
Data:<span class="data-id">123,43,52,15</span> 
```

和 javascript：

```
$('.text_cs').on('change', function(){
var pid = $(this).val();
var table = $('.data-id');
if(table.html().split(",").indexOf(pid) != -1) {
   $('.result').html("ID exist");
}
   else {
       $('.result').html("Not exist");
   } 
```

});

# css - 所有 rails 表单在 span3 div 中都显示为左对齐

> ID：15461258
> 
> 赞同：0
> 
> 时间：2013-03-17T13:27:39.210
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我正在使用 twitter 引导程序，应用程序中的所有输入字段/表单看起来都在 span3 左对齐 div 中。如何解决此问题并具有默认输入宽度？

我在另一个 Rails 应用程序上使用了引导程序，但从未出现此错误。有任何想法吗？

例如，以下代码呈现大约 200 像素宽而不是 500 像素的输入。

_新消息

```
<div class="input-append" style="width: 500px " >
<%= form_for [@booking, @booking.messages.build], :remote => true do |f| %>
    <%= f.text_field :body, placeholder: "Compose Message" %>
<%= f.submit "+", class: "btn inline" %>
<% end %>
</div> 
```

预订.html.erb

```
<div class="bookinginfo">
<div class="well booking">  
<h3>Private Msssages</h3>
<hr />
<div id="ajaxmessagesform">
    <span><%= render 'messages/new_message' %></span>
</div>
</div>
</div 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:47:05.363

**解决了**

添加了以下CSS：

```
input, textarea, select, .uneditable-input {
    border: 1px solid #bbb;
    width: 100%;
    padding: 10px;
    min-height: 40px;
    margin-bottom: 15px;
} 
```

# mysql - 在 MySQL 中合并两个具有不同 WHERE 的 SELECT

> ID：15461259
> 
> 赞同：0
> 
> 时间：2013-03-17T13:27:43.670
> 
> 标签：mysql

有没有办法合并这两个查询？

```
SELECT * FROM OFF WHERE New = 0 AND Saw = 1 AND El = 0
SELECT * FROM OFF WHERE New = 1 AND Saw = 0 AND El = 0 
```

如果我使用这个查询：

```
SELECT * FROM OFF WHERE New = 0 AND Saw = 1 AND El = 0 AND New = 1 AND Saw = 0 AND El = 0 
```

我显然有其他预期的结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:29:09.870

`OR`在对这些条件进行分组时使用，

```
SELECT * 
FROM   `OFF`
WHERE  (New = 0 AND Saw = 1 AND El = 0) OR 
       (New = 1 AND Saw = 0 AND El = 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:30:13.413

您始终可以使用 UNION 合并任意两个查询

```
(SELECT * FROM OFF WHERE New = 0 AND Saw = 1 AND El = 0)
UNION
(SELECT * FROM OFF WHERE New = 1 AND Saw = 0 AND El = 0) 
```

# java - 堆栈跟踪：weka.core.WekaException：weka.classifiers.functions.SMO：没有足够的带有类标签的训练实例（必需：1，提供：0）！

> ID：15461261
> 
> 赞同：0
> 
> 时间：2013-03-17T13:28:06.997
> 
> 标签：java, weka

当我尝试打印实例数时，它显示为 0（零）。但是当我使用 Weka API 手动选择 ARFF 文件时，我的训练数据中有 565 个实例。我想找出错误所在。谢谢你。

```
private static void build_model() {
            // TODO Auto-generated method stub
            try{

            // load data    
            ArffLoader loader = new ArffLoader();
            loader.setFile(new File("D:\\MAIN PROJECT\\data.arff"));
            Instances structure = loader.getStructure();
            structure.setClassIndex(structure.numAttributes() - 1);
            System.out.println("Attributes : "+structure.numAttributes());
            System.out.println("Instances : "+structure.numInstances());

            // train SMO
            System.out.println("Before creating smo object");
            SMO smo = new SMO();
            System.out.println("SMO object created");
            smo.buildClassifier(structure);
            System.out.println("Classifier build");
            Instance current;
            while ((current = loader.getNextInstance(structure)) != null){
                smo.buildClassifier((Instances) current);
            }
            System.out.println(smo);
            System.out.println("\nModel build successfully");
            }
            catch(Exception e){
                System.out.println("\nstack trace : " + e);
            }

        } 
```

输出 ：

属性：1154 实例：0 在创建 smo 对象之前创建 SMO 对象

堆栈跟踪：weka.core.WekaException：weka.classifiers.functions.SMO：没有足够的带有类标签的训练实例（必需：1，提供：0）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:04:23.097

尝试使用`getDataSet()`而不是`getStructure()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:11:37.697

这是完美的工作。

```
private static void build_model() {
        // TODO Auto-generated method stub
        try{

        // load data    
        ArffLoader loader = new ArffLoader();
        loader.setFile(new File("D:\\MAIN PROJECT\\data.arff"));
        Instances structure = loader.getDataSet();
        structure.setClassIndex(structure.numAttributes() - 1);
        System.out.println("Attributes : "+structure.numAttributes());
        System.out.println("Instances : "+structure.numInstances());

        // train SMO
        System.out.println("Before creating smo object");
        SMO smo = new SMO();
        System.out.println("SMO object created");
        smo.buildClassifier(structure);
        System.out.println("Classifier build");
        System.out.println(smo);
        System.out.println("\nModel build successfully");
        }
        catch(Exception e){
            System.out.println("\nstack trace : " + e);
        }

    } 
```

# c# - 使用gridview asp.net分页时索引超出范围

> ID：15461267
> 
> 赞同：2
> 
> 时间：2013-03-17T13:28:52.617
> 
> 标签：c#, gridview

```
int index = -1;
foreach (GridViewRow gvrow in lstHoliday.Rows)
{
    index = (int)lstHoliday.DataKeys[gvrow.RowIndex].Value;
    bool result = ((CheckBox)gvrow.FindControl("Selector")).Checked;
} 
```

**在这里得到一个错误：**

```
index = (int)lstHoliday.DataKeys[gvrow.RowIndex].Value;

Index was out of range. Must be non-negative and less than the size of the collection. Parameter name: index 
```

我在这里做错了什么？

![在此处输入图像描述](../Images/61e0511e1fcd72a8537d2d1ae076c5bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:47:03.257

需要提到标记上的`DataKeyNames`属性。`GridView`上面没有提到导致错误的原因。

更多关于[DataKeyNames](http://www.codeproject.com/Articles/23833/DataKeyNames)

# c# - `as` 关键字是否带回了类的所有成员？

> ID：15461276
> 
> 赞同：2
> 
> 时间：2013-03-17T13:29:40.260
> 
> 标签：c#, interface, as-keyword

我一直在做一些测试，遇到了一些奇怪的事情。说我有这个界面

```
interface IRobot
    {
         int Fuel { get; }
    } 
```

如您所见，它是只读的。所以现在我要创建一个实现它的类

```
 class FighterBot : IRobot
    {

        public int Fuel { get; set; }
    } 
```

现在您可以阅读并设置它。所以让我们做一些测试：

```
 FighterBot fighterBot;
        IRobot robot;
        IRobot robot2;
        int Fuel;
public Form1()
        {
            InitializeComponent();
            fighterBot = new FighterBot();
            robot = new FighterBot();
        } 
```

首先我这样做：

```
 Fuel = fighterBot.Fuel;// Can get it
            fighterBot.Fuel = 10; //Can set it 
```

这是意料之中的，然后我这样做了：

```
 Fuel = robot.Fuel; //Can get it
            robot.Fuel = 10; //Doesn't work, is read only 
```

也值得期待。但是当我这样做时：

```
robot2 = robot as FighterBot;
            Fuel = robot2.Fuel; //Can get it
            robot2.Fuel = 10;//Doesn't work, is read only 
```

为什么它不起作用？不是把robot2当成FighterBot吗？因此，它不应该能够设置燃料吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:36:39.850

即使您通过“as”语句进行转换`robot`，`FighterBot`您也将结果存储在类型变量中，`IRobot`因此`Fuel`仍然是只读的。

您需要将转换结果存储在类型变量中`FighterBot`：

```
var robot3 = robot as FighterBot; 
```

然后它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:40:17.523

```
interface IRobot
{
     int Fuel { get; }
}

robot2 = robot as FighterBot;
Fuel = robot2.Fuel;

// robot2 is STILL stored as IRobot, so the interface allowed 
// to communicate with this object will be restricted by 
// IRobot, no matter what object you put in (as long as it implements IRobot)
robot2.Fuel = 10; // evidently, won't compile. 
```

更多上下文：

```
IRobot r = new FighterBot();
// you can only call method // properties that are described in IRobot 
```

如果您想与对象交互并设置属性，请使用为其设计的界面。

```
FigherBot r = new FighterBot();
r.Fuel = 10; 
```

# c# - 使用 CLI 将 C# 双精度数组传递给 C++ 函数

> ID：15461280
> 
> 赞同：5
> 
> 时间：2013-03-17T13:29:58.940
> 
> 标签：c#, c++, arrays, pointers, c++-cli

### 是的，需要的东西听起来很简单，但事实证明这是一个真正的痛苦。

我有一些**C#**中的 GUI 代码（注意我以前从未使用过 C#，但熟悉语法）并且我有**C++**代码，它使用**CLI**与之交互。

在 C# 中，我想创建一个双精度数组，并将其发送到我的 C++ 代码。我使用下面的代码作为传递数组的方法，并且这是孤立地遵守的。

因此，从 C# 中，我将一个 double[] 数组传递给该函数。

```
public ref class KernelWrapper
{
public: 
    static void ImageNoiseFilter(System::IntPtr imageData, int imageWidth, int imageHeight, array<double>^ values); 
```

我应该使用什么参数类型从 C++ 端检索这个数组？

我试过了：

```
 MyFunction(double values[]){}
 MyFunction(double* values){}
 MyFunction(array<double>^ values){} 
```

但没有编译，通常最后一个带有“数组不是模板”的消息，并且

```
Error   1   error C2664: 'RunImageNoiseFilterKernel' : cannot convert parameter 4 from 'cli::array<Type> ^' to 'double *' 
```

任何关于如何实现这一点的提示将不胜感激。

* * *

## 为了可读性，我在这里更新代码

# .cpp 文件：

```
void Bangor::KernelWrapper::ImageNoiseFilter(System::IntPtr imageData, int imageWidth,    int imageHeight, pin_ptr<double> pval){
    RunImageNoiseFilterKernel((Format24bppRgb*)((int)imageData), imageWidth, imageHeight); //If parameter would work, 4th argument would also be passed into this.
} 
```

# C#代码：

```
 double[] randomValues = new double[ARRAY_LENGTH]; //Array of random numbers
    KernelWrapper.ImageNoiseFilter(ptr, image.Width, image.Height, randomValues); 
```

# 错误是：

```
Error   1   error C3824: 'cli::pin_ptr<Type>': this type cannot appear in this context (function parameter, return type, or a static member)
Error   3   The best overloaded method match for 'Bangor.KernelWrapper.ImageNoiseFilter(System.IntPtr, int, int, double*)' has some invalid arguments   
Error   4   Argument 4: cannot convert from 'double[]' to 'double*' 
```

希望这能澄清一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:51:17.450

您应该使用[pin_ptr<> 类](http://msdn.microsoft.com/en-us/library/vstudio/1dz8byfh%28v=vs.100%29.aspx)将托管数组转换为 double*。它固定数组，因此当您的本机函数正在执行和访问数组数据时，垃圾收集器无法移动它。

```
#include <vcclr.h>                 // Declares cli::pin_ptr<>
using namespace cli;
#pragma managed(push, off)
#  include "unmanagedstuff.h"      // Declaration of MyFunction here
#pragma managed(pop)

...

        pin_ptr<double> pvalues = &values[0];
        MyFunction(pvalues, values->Length); 
```

假设 MyFunction() 肯定也需要知道数组的大小，所以我添加了一个额外的参数来传递数组的大小。不这样做是致命的，您的本机代码可能会破坏托管堆的完整性。请注意，数组只会在*pvalues*在范围内时保持固定，因此 MyFunction() 不存储传递的指针很*重要*。如果是这种情况，那么您*必须*复制数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:14:30.720

## 好的，所以大多数尝试对我来说都失败了；可能是因为我做错了：P，但这是一个可行的解决方案。

### 进口：

```
using System.Runtime.InteropServices;
using System.Windows.Forms;
using System.Linq; 
```

### 在 C# 文件中，我创建了一个数组，如下所示：

```
 float[] randomValues = new float[ARRAY_LENGTH]; //Array of random numbers
    GCHandle handle = GCHandle.Alloc(randomValues, GCHandleType.Pinned);
    var randPtr = handle.AddrOfPinnedObject();
    KernelWrapper.ImageNoiseFilter(ptr, image.Width, image.Height, randPtr); 
```

### ImageNoiseFilter 的定义是：

```
static void ImageNoiseFilter(System::IntPtr imageData, int imageWidth, int imageHeight, System::IntPtr randValPtr); 
```

### 为了在需要浮点指针的 C++ 函数中获得，我这样做：

```
void KernelWrapper::ImageNoiseFilter(System::IntPtr imageData, int imageWidth, int imageHeight, System::IntPtr randValues){
    RunImageNoiseFilterKernel((Format24bppRgb*)((int)imageData), imageWidth, imageHeight, (float*) ((int) randValues));
} 
```

所有这一切似乎都很好:)，我不知道这种方法有多好或安全，所以任何阅读本文的人都不应该假设它是“正确”的方法，它只是有效。

# c# - Context.User.Identity.Name 在 MVC 4 中返回 null

> ID：15461282
> 
> 赞同：1
> 
> 时间：2013-03-17T13:30:05.113
> 
> 标签：c#, asp.net-mvc-4

我正在像下面这样设置表单身份验证cookie

`FormsAuthentication.SetAuthCookie("test", true);`

当我检查它是否设置它返回null...

```
Context.User.Identity.Name 
```

任何想法为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T14:02:22.550

设置表单身份验证 cookie 后，您应该始终重定向：

```
public ActionResult SomeAction()
{
    FormsAuthentication.SetAuthCookie("test", true);    
    return RedirectToAction("FooBar");
} 
```

只有在您重定向到的后续操作中，您才会`User.Identity.Name`正确初始化。原因很简单：`User.Identity.Name`属性是从请求 cookie（又名传入 cookie）初始化的，而`FormsAuthentication.SetAuthCookie`将表单身份验证设置为响应（又名发出 cookie），以便在后续请求中，此 cookie 将在请求中发送.

# r - 更改锁定包内函数的默认值

> ID：15461285
> 
> 赞同：3
> 
> 时间：2013-03-17T13:30:15.137
> 
> 标签：r

我正在开发我的第一个包，它针对的是 R 新手，因此我试图尽量减少使用该包所需的 R 技能数量。因此，我想要一个函数来更改我包中其他函数的默认值。但是我收到以下错误“无法将绑定添加到锁定的环境”，这意味着包的环境被锁定，我不允许更改其函数的默认值。

这是一个引发类似错误的示例：

```
library(ggplot2)
assign(formals(geom_point)$position, "somethingelse", pos="package:ggplot2") 
```

当我尝试 assignInNamespace 时，我得到： bindingIsLocked(x, ns) 中的错误：“身份”没有绑定

```
assignInNamespace(formals(geom_point)$position,"somethingelse", pos = "package:ggplot2") 
```

这是我希望实现的一个例子。

```
default <- function(x=c("A", "B", "C")){
       x
       }
default()

change.default <- function(x){
formals(default)$x <<- x        # Notice the global assign
}

change.default(1:3)
default() 
```

我知道这远非推荐的方法，但我愿意偷工减料以改善包的学习曲线。有没有办法做到这一点？

此问题已被标记为[Setting Function Defaults R on a Project Specific Basis](https://stackoverflow.com/questions/9073912/setting-function-defaults-r-on-a-project-specific-basis)的副本。这是一种不同的情况，因为这个问题涉及如何允许用户在交互式会话中更改函数的默认值 - 而不是如何实际执行。使用 options() 函数无法解决旧问题，因此这是一个不同的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T13:59:44.123

我认为实现您想要的通俗方式是 via`option`和包实际上是这样做的，例如`lattice`（尽管它们使用特殊选项）或`ascii`.

此外，这在基础 R 中也是如此，例如著名且臭名昭著的`stringsAsFactors`.

如果你看`?read.table`或`?data.frame`你得到：`stringsAsFactors = default.stringsAsFactors()`。检查显示：

```
> default.stringsAsFactors
function () 
{
    val <- getOption("stringsAsFactors")
    if (is.null(val)) 
        val <- TRUE
    if (!is.logical(val) || is.na(val) || length(val) != 1L) 
        stop("options(\"stringsAsFactors\") not set to TRUE or FALSE")
    val
}
<bytecode: 0x000000000b068478>
<environment: namespace:base> 
```

这里的相关部分是`getOption("stringsAsFactors")`产生：

```
> getOption("stringsAsFactors")
[1] TRUE 
```

改变它是这样实现的：

```
> options(stringsAsFactors = FALSE)
> getOption("stringsAsFactors")
[1] FALSE 
```

要执行您想要的操作，您的包需要设置一个选项，并且该函数将其值从选项中获取。然后另一个函数可以更改选项：

```
options(foo=c("A", "B", "C"))

default <- function(x=getOption("foo")){
    x
}
default()

change.default <- function(x){
    options(foo=x)
}

change.default(1:3)
default() 
```

如果你希望你的包在加载时设置选项，你`.onAttach`需要`.onLoad`在`zzz.R`. 例如，我的[`afex`](http://cran.r-project.org/web/packages/afex/index.html)包会执行此操作并更改默认对比度。在您的情况下，它可能如下所示：

```
.onAttach <- function(libname, pkgname) {
    options(foo=c("A", "B", "C"))
} 
```

`ascii`通过`.onLoad`（我不记得确切的区别是什么，但[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)会有所帮助）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T13:41:32.820

优选地，函数具有以下内容：

1.  输入参数
2.  用这些参数做某事的函数体
3.  输出参数

因此，在您想要更改函数行为的情况下，以最佳方式更改输入参数。例如，请参阅我对另一篇文章的[回答。](https://stackoverflow.com/questions/12598242/global-variables-in-packages-in-r/12598625#12598625)

您还可以使用 an`option`来保存一些全局设置（例如，要使用哪种字体，存储您使用的包的路径），请参阅上面链接的问题中@James 的答案。但是要谨慎使用这些东西，因为它会使代码难以阅读。我将主要使用它们只读，即设置一次（由包或用户）并且不允许函数更改它们。

不可读性源于这样一个事实，即函数的行为不仅由本地决定（即由直接使用它的代码），而且还由远处的设置决定。这使得仅通过查看调用它的代码很难确定函数的作用，但是您必须深入挖掘更多代码才能完全理解正在发生的事情。此外，如果其他函数改变了这些选项，这使得预测给定函数将做什么变得更加困难，因为它取决于函数的历史。我之前对只读选项的建议又回到了这里，如果这些是只读的，一些关于可读性的问题就会减少。

# python - 如果 stdout/stderr 中没有活动，如何杀死子进程

> ID：15461287
> 
> 赞同：1
> 
> 时间：2013-03-17T13:30:36.723
> 
> 标签：python, subprocess

我正在从 python 脚本（当前使用`os.system`）运行程序。但是，有时程序会在某个时间点挂起，如果在某个时间间隔后没有任何内容写入 stdout 或 stderr，我想杀死它。程序的简单超时是行不通的，因为此代码通常运行很长时间（数小时到数天），有时它在还有很长的路要走之前就挂起。

似乎这`subprocess.Popen`是要走的路，但我还没有找到一个很好的例子来说明如何做到这一点。我还想将 stdout/stderr 写入文件。

基于一些例子，我正在考虑这样的事情：

```
p = Popen(args, bufsize=0, executable=None, stdin=None, stdout=None, stderr=None)

while True:
    line = p.stdout.readline()
    outfile.write(line)
    # save current time or something, compare to time of
    # previous loop, if larger than timeout, kill process 
```

但是我不确定如何实现时间循环，以及如何确保`while`当进程最终自行终止（并且不会挂起）时不会永远运行。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:17:31.503

为了完整起见，这是我最终使用的代码，使用了建议的`signal.alarm`：

```
import time
import shlex
import subprocess

logfile = open(log, 'w', 1)
# cmd is command to run
args = shlex.split(cmd)   # tokenise args list
p = subprocess.Popen(args, shell=False, bufsize=0, stdin=None,
                     stdout=subprocess.PIPE, stderr=subprocess.STDOUT)

def _handler(signum, frame):
    print('Timeout of %s min reached, stopping execution' % timeout)
    p.kill()
    time.sleep(30)  # to ensure no ghost process is left running
    raise RuntimeError('Timeout')

signal.signal(signal.SIGALRM, _handler)
try:
    while True:
        signal.alarm(int(timeout))
        inline = p.stdout.readline()
        if not inline:
            break
        logfile.write(inline)
        signal.alarm(0)
except RuntimeError:
    logfile.close()
    return 0

p.communicate()   # wait for process to finish, get return code
logfile.close()
return p.returncode 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T14:13:02.540

尝试`signal.alarm`在收到每一行后设置一个计时器，然后`SIGALRM`通过检查自上一行以来是否经过了太多时间来处理。

# javascript - zingchart中的自定义地图

> ID：15461293
> 
> 赞同：2
> 
> 时间：2013-03-17T13:31:29.057
> 
> 标签：javascript, html, charts, maps

我正在使用[Zingchart](http://www.zingchart.com)库向我的网站添加地图和图表。

对于地图，库中包含一些预定义的地图。有没有办法定义我自己的地图？我正在寻找一种方法来输入我想要的多边形坐标及其名称，然后它们会被加载。

我也尝试通过查看源代码来了解它们是如何完成的，但是我有缩小版本，并且不太直观地弄清楚如何修改它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:13:46.487

Zingchart[地图模块文档](http://www.zingchart.com/reference/modules-maps.html)包括一些国家地图作为演示。正如您所说，这些是库附带的预定义地图。如果您加载其中一张地图（在他们的文档页面上）并右键单击，他们的自定义上下文菜单应该显示“查看源代码”选项以及其他导出选项。在结果窗口中，您将看到**Parsed JSON**选项卡。这个 JSON 对象定义了地图。例如，阿根廷地图定义的摘录如下所示：

```
...
{
    "type":"poly",
    "id":"NQ",
    "points":[[183,180],
            [183,181],
            [184,182],
            [185,182],
            [185,183],
            [185,184],
            [186,185],
            [186,185],
 ... 
```

为了定义你自己的地图，你只需要镜像这个结构。首先克隆任何包含的地图并用您自己的值替换`points`.

希望有帮助。

# wcf-data-services - o具有自定义提供程序的数据

> ID：15461294
> 
> 赞同：0
> 
> 时间：2013-03-17T13:31:30.920
> 
> 标签：wcf-data-services, odata

我有一个现有的服务器框架（WCF 服务），我需要升级到“oData”格式。我从“oData”站点下载了一些 oData 示例： [http ://www.odata.org/ecosystem](http://www.odata.org/ecosystem)

我想避免使用“实体框架”，因为它需要重写我的大量代码，所以我选择了“自定义提供程序”解决方案。在我看到的所有示例中，有些东西让我感到奇怪：

WCF 方法的调用调用“CreateDataSource()”方法（附加代码），该方法为每次调用从头开始初始化整个数据模型。在这个演示版本中，重新加载 6 个业务实体实例，然后过滤它们并不是什么大问题，但在现实生活中：我会有数百个表，每个表包含 1000-1000000 行。

我应该如何避免每次将整个数据库加载到内存中？我可能遗漏了一些东西，否则这项技术将没有用处。

```
 protected override DSPContext CreateDataSource()
    {
        DSPContext context = new DSPContext();

        ResourceSet productsSet, categoriesSet;
        this.Metadata.TryResolveResourceSet("Products", out productsSet);
        this.Metadata.TryResolveResourceSet("Categories", out categoriesSet);
        IList<DSPResource> products = context.GetResourceSetEntities(productsSet.Name);
        IList<DSPResource> categories = context.GetResourceSetEntities(categoriesSet.Name);

        var categoryFood = new DSPResource(categoriesSet.ResourceType);
        categoryFood.SetValue("ID", 0);
        categoryFood.SetValue("Name", "Food");
        categoryFood.SetValue("Products", new List<DSPResource>());
        categories.Add(categoryFood);

        var categoryBeverages = new DSPResource(categoriesSet.ResourceType);
        categoryBeverages.SetValue("ID", 1);
        categoryBeverages.SetValue("Name", "Beverages");
        categoryBeverages.SetValue("Products", new List<DSPResource>());
        categories.Add(categoryBeverages);

        var categoryElectronics = new DSPResource(categoriesSet.ResourceType);
        categoryElectronics.SetValue("ID", 2);
        categoryElectronics.SetValue("Name", "Electronics");
        categoryElectronics.SetValue("Products", new List<DSPResource>());
        categories.Add(categoryElectronics);

        var productBread = new DSPResource(productsSet.ResourceType);
        productBread.SetValue("ID", 0);
        productBread.SetValue("Name", "Bread");
        productBread.SetValue("Description", "Whole grain bread");
        productBread.SetValue("ReleaseDate", new DateTime(1992, 1, 1));
        productBread.SetValue("DiscontinueDate", null);
        productBread.SetValue("Rating", 4);
        productBread.SetValue("Category", categoryFood);
        productBread.SetValue("BackupCategoryID", 2);
        productBread.SetValue("RelatedProductID", 1);
        products.Add(productBread);

        var productMilk = new DSPResource(productsSet.ResourceType);
        productMilk.SetValue("ID", 1);
        productMilk.SetValue("Name", "Milk");
        productMilk.SetValue("Description", "Low fat milk");
        productMilk.SetValue("ReleaseDate", new DateTime(1995, 10, 21));
        productMilk.SetValue("DiscontinueDate", null);
        productMilk.SetValue("Rating", 3);
        productMilk.SetValue("Category", categoryBeverages);
        productMilk.SetValue("BackupCategoryID", 2);
        productMilk.SetValue("RelatedProductID", 2);
        products.Add(productMilk);

        var productWine = new DSPResource(productsSet.ResourceType);
        productWine.SetValue("ID", 2);
        productWine.SetValue("Name", "Wine");
        productWine.SetValue("Description", "Red wine, year 2003");
        productWine.SetValue("ReleaseDate", new DateTime(2003, 11, 24));
        productWine.SetValue("DiscontinueDate", new DateTime(2008, 3, 1));
        productWine.SetValue("Rating", 5);
        productWine.SetValue("Category", categoryBeverages);
        productWine.SetValue("BackupCategoryID", 4);
        productWine.SetValue("RelatedProductID", 3);
        products.Add(productWine);

        ((List<DSPResource>)categoryFood.GetValue("Products")).Add(productBread);
        ((List<DSPResource>)categoryBeverages.GetValue("Products")).Add(productMilk);
        ((List<DSPResource>)categoryBeverages.GetValue("Products")).Add(productWine);

        return context; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:04:29.667

这些只是样本。现实世界的解决方案会将数据存储在某个“存储”中，并在该存储上实现 IQueryable。由于该实现通常包含大量代码，并且与示例意图没有直接关系，因此未包含在示例中。

所以回答你的问题：

*   您需要在您使用的商店上实现 IQueryable。如果这是一个数据库，那么您需要一些 ORM（如 EF）将数据库映射到 CLR 空间。该 ORM 通常还提供 IQueryable 实现。除了 EF，还有 NHibernate 或 LINQ to SQL。

*   您需要编写示例中所示的自定义提供程序代码（实现 IDataServiceMetadataProvider、IDataServiceQueryProvider 等接口），并从 GetQueryRootForResourceSet（示例使用 LINQ to Object 的 IQueryable 实现）返回商店的 IQueryable。

请注意，自定义提供程序需要做很多工作。如果您可以使用像 NHibernate 或 LINQ to SQL 这样的 ORM，则使用反射提供程序会更快，并且可能仍然有效。

# c# - 隔离非托管代码中的访问冲突

> ID：15461296
> 
> 赞同：0
> 
> 时间：2013-03-17T13:31:49.737
> 
> 标签：c#, clr, tesseract

我有一个 C# 程序 (WPF)，我在其中使用 Tessnet OCR 库 (v2) 偶尔执行一些非必要的 OCR 任务。我听说该库有一些泄漏，有时程序会因访问冲突而崩溃（尝试读取或写入受保护的内存）。我想知道是否有任何方法可以“隔离” OCR 对象或调用，以便我可以简单地捕获异常并重新创建对象而无需终止程序，甚至可能释放它浪费的任何内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:32:37.683

您可以将[`HandleProcessCorruptedStateExceptions`](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.handleprocesscorruptedstateexceptionsattribute.aspx)属性添加到引发访问冲突的方法。这个属性：

> 使托管代码能够处理指示损坏的进程状态的异常。

有关更多信息，请阅读[处理损坏状态异常一](http://msdn.microsoft.com/en-us/magazine/dd419661.aspx)文。

# opengl - 使用旧的 OpenGL 功能对多个四边形应用单独的旋转

> ID：15461299
> 
> 赞同：3
> 
> 时间：2013-03-17T13:32:02.153
> 
> 标签：opengl

我想渲染一个具有一定旋转的四边形，此外，这个四边形在其下方呈现“叶子”四边形，类似于二叉树结构。除了父母的轮换之外，每个孩子都有自己的轮换应用。换句话说，如果根四边形旋转，整个树也随之旋转，但每个子树也可以单独旋转。所以我的递归渲染函数看起来有点像这样......

```
RenderNode(Node current_node){
    glRotate(current_node->rotation);
    glBegin(GL_QUADS);
      // supply 4 vertices and texture mapping
    glEnd();

    RenderNode(current_node->leftChild);
    RenderNode(current_node->rightChild);
} 
```

现在我希望我的子节点与其父节点相比旋转略有不同，但不幸的是情况并非如此。在单帧期间调用 glRotate() 的次数越多，旋转动画就越快​​，但所有板块都保持在同一平面上。似乎直到最后都没有渲染任何四边形，并且将最新的变换矩阵应用于所有四边形。作为一项测试，我尝试在每次转换之前放置 glPushMatrix()，在每次调用 glEnd() 之后放置 glPopMatrix()，这完全停止了所有板的旋转。

有人可以告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:42:49.070

由于递归，有点骇人听闻，但这是我能想到的最好的基本情况：

尝试这个：

```
RenderNode(Node current_node, GLfloat parentRotation){
    if(current_node->leftChild != null) RenderNode(current_node->leftChild, parentRotation + current_node->rotation);
    if(current_node->rightChild != null) RenderNode(current_node->rightChild, parentRotation + current_node->rotation);
    glLoadIdentity();
    glRotate(current_node->rotation);
    glBegin(GL_QUADS);
      // supply 4 vertices and texture mapping
    glEnd();
} 
```

这样您就不必弹出或推送任何矩阵，它只会重置为每个实际几何渲染的单位矩阵。`glLoadIdentity()`如果要渲染其他任何内容，请记住在渲染网格后再次调用。

# c - 如何在c上读取输入输入

> ID：15461301
> 
> 赞同：1
> 
> 时间：2013-03-17T13:32:40.437
> 
> 标签：c

该功能将由菜单调用。

```
void exponentiation()
{

  int i, result = 0, first, second;

  printf("\n%s\n%s\n\n%s",
         "1) Exponentiation",
         "------------------",
         "Enter 1st integer: ");
  scanf("%d", &first);

  printf("Enter 2nd integer: ");
  scanf("%d", &second);

  printf("%d raised to %d equals %d\n", first, second, result);
  main();
} 
```

从这个函数我需要读取用户输入，如果用户输入是“输入”而没有任何整数，它应该返回到调用 main() 的菜单。

我已经尝试获取输入。例如：

```
if(first == '\n')

{main();} 
```

或者

```
if(first == 10) /**which is 10 is ASCII code for enter**/

{main()} 
```

两种方式都不起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T13:34:02.867

> 两种方式都不起作用，任何建议

该函数`scanf`返回它成功扫描的项目数。你应该检查它的回报，如果它不符合你的期望，就回去。

* * *

你也应该知道**`%d`忽略空格**。因此，如果用户在没有输入整数的情况下点击返回，`scanf`只需跳过它并等待其他内容。

如果您坚持不以这种方式忽略空格，则应避免`scanf`并使用其他输入法，例如`fgets`. 逐行获取用户的输入并使用`sscanf`,`strtoul`并`strtok`理解它。

# java - Java UI 生成器导致大量延迟？

> ID：15461304
> 
> 赞同：-1
> 
> 时间：2013-03-17T13:33:00.573
> 
> 标签：java, eclipse, performance, swing, netbeans

我在 Java GUI 方面很糟糕，并使用生成器为我制作了大部分 GUI。我在 Netbeans 中制作了它，然后将其复制到 Eclipse。它在启动时比我功能强大的计算机延迟了大约 5 秒，尽管我已经尝试过计时它和其他东西，但我不知道为什么。我不想责怪生成器，但它 100% 来自那个 UI 代码。

我非常感谢有人帮助我找出导致它的原因，并总体上改进了丑陋的 UI 代码。其他代码未完成，这只是接口部分。

请注意，您可以删除我的所有代码，甚至是 gridLayout，它仍然会滞后，如果我将其编译为 .jar 并使用 -classpath 参数进行编译，它具有相同的滞后

```
package ...

imports ...

public class x extends javax.swing.JFrame {

    public x() {

        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        Point centrePoint = new Point(screenSize.width / 2, screenSize.height / 2);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setResizable(false);

        schMon = new javax.swing.JLabel();
        schTue = new javax.swing.JLabel();
        schWed = new javax.swing.JLabel();
        schThu = new javax.swing.JLabel();
        schFri = new javax.swing.JLabel();
        schSat = new javax.swing.JLabel();
        schSun = new javax.swing.JLabel();
        timeLabel = new javax.swing.JLabel();
        schedulePanel = new javax.swing.JPanel();
        holdingPanel = new javax.swing.JPanel();
        isEnabled = new javax.swing.JCheckBox();
        dropboxPath = new javax.swing.JTextField();
        fileButton = new javax.swing.JButton();
        saveButton = new javax.swing.JButton();
        resetButton = new javax.swing.JButton();
        sep2 = new javax.swing.JSeparator();
        sep = new javax.swing.JSeparator();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        schMon.setText("Monday");
        schTue.setText("Tuesday");
        schWed.setText("Wednesday       ");
        schThu.setText("Thursday");
        schFri.setText("Friday");
        schSat.setText("Saturday");
        schSun.setText("Sunday");
        Font font = new Font("Calibri", Font.BOLD, 13);
        timeLabel.setFont(font);
        timeLabel.setText("");
        schedulePanel.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
        schedulePanel.setLayout(new GridLayout(7, 24, -1, -1));

        schedulePanel.addMouseListener(new MouseAdapter() { 
              public void mousePressed(MouseEvent mouseEvent) { 
                  //JPanel clickedPanel = (JPanel) getComponentAt(mouseEvent.getPoint());
                 // System.out.println(clickedPanel.getName().toString());
              } 
            }); 

        ArrayList<ArrayList<JPanel>> times = new ArrayList<ArrayList<JPanel>>();
        for (int day = 0; day < 7; day++) {
            times.add(new ArrayList<JPanel>());
            for (int hour = 0; hour < 24; hour++) {
                times.get(day).add(new JPanel());
                JPanel current = times.get(day).get(hour);
                current.setSize(42, 42);
                current.setBorder(BorderFactory.createLineBorder(Color.black));
                current.setMaximumSize(current.getSize());
                current.setBackground(Color.LIGHT_GRAY);
                schedulePanel.add(current);
            }
        }

        holdingPanel.setPreferredSize(new java.awt.Dimension(2, 100));

        isEnabled.setText("Enable Scheduler");

        dropboxPath.setText("Path to your Dropbox.exe");
        dropboxPath.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });

        fileButton.setText("Find");
        fileButton.setPreferredSize(new java.awt.Dimension(60, 22));

        saveButton.setText("Save");

        resetButton.setText("Reset");
        resetButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        sep2.setOrientation(javax.swing.SwingConstants.VERTICAL);

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(
                holdingPanel);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(Alignment.LEADING)
                .addGroup(jPanel2Layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(isEnabled)
                    .addPreferredGap(ComponentPlacement.UNRELATED)
                    .addComponent(dropboxPath, GroupLayout.PREFERRED_SIZE, 480, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.RELATED)
                    .addComponent(fileButton, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(sep2, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addGap(58)
                    .addComponent(saveButton)
                    .addPreferredGap(ComponentPlacement.RELATED)
                    .addComponent(resetButton)
                    .addGap(2))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(Alignment.TRAILING)
                .addGroup(jPanel2Layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(jPanel2Layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(isEnabled, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(sep2, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(dropboxPath, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(fileButton, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(saveButton, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(resetButton, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addContainerGap())
        );
        holdingPanel.setLayout(jPanel2Layout);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(
                getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                        layout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                .addComponent(sep)
                                                .addComponent(
                                                        holdingPanel,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        630, Short.MAX_VALUE)
                                                .addGroup(
                                                        layout.createSequentialGroup()
                                                                .addGroup(
                                                                        layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(
                                                                                        schSat)
                                                                                .addComponent(
                                                                                        schSun)
                                                                                .addComponent(
                                                                                        timeLabel)
                                                                                .addComponent(
                                                                                        schMon)
                                                                                .addComponent(
                                                                                        schTue)
                                                                                .addComponent(
                                                                                        schWed)
                                                                                .addComponent(
                                                                                        schThu)
                                                                                .addComponent(
                                                                                        schFri))
                                                                .addPreferredGap(
                                                                        javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                .addComponent(
                                                                        schedulePanel,
                                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                        Short.MAX_VALUE)))
                                .addContainerGap()));

        layout.setVerticalGroup(layout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                        layout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(
                                                        layout.createSequentialGroup()
                                                                .addGap(10)
                                                                .addComponent(
                                                                        schMon)
                                                                .addGap(30)
                                                                .addComponent(
                                                                        schTue)
                                                                .addGap(30)
                                                                .addComponent(
                                                                        schWed)
                                                                .addGap(30)
                                                                .addComponent(
                                                                        schThu)
                                                                .addGap(30)
                                                                .addComponent(
                                                                        schFri)
                                                                .addGap(30)
                                                                .addComponent(
                                                                        schSat)
                                                                .addGap(30)
                                                                .addComponent(
                                                                        schSun)
                                                                .addGap(12)
                                                                .addComponent(
                                                                        timeLabel)
                                                                .addGap(0,
                                                                        0,
                                                                        Short.MAX_VALUE))
                                                .addComponent(
                                                        schedulePanel,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        Short.MAX_VALUE))
                                .addGap(10, 10, 10)
                                .addComponent(sep,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(1, 1, 1)
                                .addComponent(holdingPanel,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        45,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)));

        pack();
        Point newLocation = new Point(centrePoint.x - (this.getWidth() / 2), centrePoint.y - (this.getHeight() / 2));
        setLocation(newLocation);
    }

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {
    }

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
    }

    public static void main(String args[]) {
        try {
            javax.swing.UIManager.setLookAndFeel(javax.swing.UIManager
                    .getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(x.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(x.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(x.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(x.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        }

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new x().setVisible(true);
            }
        });
    }

    private javax.swing.JButton fileButton;
    private javax.swing.JButton saveButton;
    private javax.swing.JButton resetButton;
    private javax.swing.JCheckBox isEnabled;
    private javax.swing.JLabel schMon;
    private javax.swing.JLabel schTue;
    private javax.swing.JLabel schWed;
    private javax.swing.JLabel schThu;
    private javax.swing.JLabel schFri;
    private javax.swing.JLabel schSat;
    private javax.swing.JLabel schSun;
    private javax.swing.JLabel timeLabel;
    private javax.swing.JPanel holdingPanel;
    private javax.swing.JSeparator sep;
    private javax.swing.JSeparator sep2;
    private javax.swing.JTextField dropboxPath;
    private javax.swing.JPanel schedulePanel;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:15:52.830

如果延迟是在 WindowBuilder 打开设计页面（解析）期间，则延迟是正常的。

![在此处输入图像描述](../Images/27c7c7fd41d5b0a867934d7e2f3f9883.png)

# python - 为什么我的同步作业代码不起作用

> ID：15461305
> 
> 赞同：0
> 
> 时间：2013-03-17T13:33:03.820
> 
> 标签：python, multithreading

我在下面的代码段中编写了每 2 秒启动一次功能。但是，它似乎不起作用。为什么？

```
from threading import Timer

class A :
    value = None
    def AX(self):
        value = 12
        obj = B()
        Timer(1,obj.BY, [self.value]).start()
class B:
    def BY(self,value):
        print "refreshed :", value

if __name__=='__main__':
    obj = A()
    obj.AX() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:35:35.323

您还需要*设置* `value`on `self`，或使用局部变量作为参数：

```
def AX(self):
    self.value = 12
    obj = B()
    Timer(1, obj.BY, [self.value]).start() 
```

或者：

```
def AX(self):
    value = 12
    obj = B()
    Timer(1, obj.BY, [value]).start() 
```

这打印：

```
>>> A().AX()
>>> refreshed : 12 
```

请注意，该`Timer()`实例只会调用`obj.BY` *一次*，它不会重复调用该函数。

您需要在每次`BY`调用时重置计时器：

```
class B:
    def BY(self,value):
        print "refreshed :", value
        Timer(2, self.BY, [value]).start() 
```

这将创建一个循环。如果您需要该循环在某个时候终止，则需要单独测试该条件，在`BY`：

```
class B:
    somecondition = False

    def BY(self,value):
        print "refreshed :", value
        if self.somecondition:
            return  # do not set the timer again
        Timer(2, self.BY, [value]).start() 
```

# asp.net-mvc-4 - 集成 Ninject 时遇到问题

> ID：15461306
> 
> 赞同：0
> 
> 时间：2013-03-17T13:33:08.423
> 
> 标签：asp.net-mvc-4, dependency-injection, inversion-of-control, ninject, repository-pattern

这个快把我逼疯了。我已经阅读了 Ninject 文档，我已经阅读了 Ninject MVC 扩展的文档，我已经不知道我已经阅读了多少相关的 SO 问题，而且我不知道我的代码的问题出在哪里。

我正在 ASP.NET MVC 4 中构建一个 webapp，并且我正在使用 Ninject 来绑定存储库接口。文档说，如果您使用 NuGet 添加 Ninject（我这样做了），那么它会为您连接所有内容，因此您不需要让您的应用程序继承自`NinjectHttpApplication`（所以我没有），您只需要添加您的绑定在`NinjectWebCommon.RegisterServices()`，（我有）。我有一个`IRepository<T>`, 和一个`Repository<T>`. 用户存储库有一些额外的登录和注册方法，因此有一个单独`UserRepository`的实现`IRepository<User>`. 因此，我的绑定看起来像这样：

```
kernel.Bind(typeof(IRepository<>)).To(typeof(BaseRepository<>)).InRequestScope();
kernel.Bind(typeof(IRepository<User>)).To(typeof(UserRepository)).InRequestScope(); 
```

文档和一些 SO 问题还提到，如果您通过 NuGet（我做了）添加了 Ninject，那么它会为您整理控制器工厂，您不需要实现自己的 Ninject-y 控制器工厂（所以我没有）。我的控制器继承自 a `BaseController`，它有一个构造函数，它接受一组`IRepository`兼容的存储库。现在，根据我的阅读，当我尝试使用控制器时，Ninject 应该识别`IRepositoriy`参数并提供它们。它没有。即使我将`[Inject]`属性放在构造函数上，它仍然会被忽略 - 而是调用无参数构造函数。如果我删除无参数构造函数，我会收到一个编译错误，抱怨没有。

我错过了什么？如何让 Ninject 提供我的存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:54:07.107

奇怪，我无法重现您描述的问题。

脚步：

1.  使用 Internet 模板创建新的 ASP.NET MVC 4 应用程序
2.  安装`Ninject.MVC3`NuGet
3.  定义一些类：

    ```
    public interface IRepository<T>
    {
    }

    public abstract class BaseRepository<T> : IRepository<T>
    {
    }

    public class User
    {
    }

    public class UserRepository : BaseRepository<User>
    {
    }

    public abstract class BaseController<T>: Controller
    {
        protected BaseController(IRepository<T> repository)
        {
            this.Repository = repository;
        }

        protected IRepository<T> Repository { get; private set; }
    }

    public class HomeController : BaseController<User>
    {
        public HomeController(IRepository<User> repository): base(repository)
        {
        }

        public ActionResult Index()
        {
            return Content(this.Repository.GetType().ToString());
        }
    } 
    ```

4.  并将它们连接起来`~/App_Start/NinjectWebCommon.cs`：

    ```
    private static void RegisterServices(IKernel kernel)
    {
        kernel
            .Bind(typeof(IRepository<User>))
            .To(typeof(UserRepository))
            .InRequestScope();
    } 
    ```

5.  运行应用程序并将存储库的正确实例注入 HomeContorller。

# ussd - 接收短信时触发 USSD 菜单

> ID：15461307
> 
> 赞同：1
> 
> 时间：2013-03-17T13:33:21.510
> 
> 标签：ussd

有没有办法在从用户手机接收短信时发送 USSD 菜单？

当我在谷歌搜索时，我得到了以下参考

[https://github.com/Mobicents/ussdgateway](https://github.com/Mobicents/ussdgateway)

我的问题是

我是否需要从移动运营商那里购买任何 api 来发送 USSD 菜单？或者 mobicents 的软件足以提供 USSD 菜单。我知道当我拨打任何 USSD 代码（如 *123#）来获取 USSD 菜单时需要网络运营商的支持。在这里，我计划在接收来自用户手机的短信时发送 USSD 菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T08:39:48.007

You will need an USSD Gateway (i.e: above mobicents ussdgw) to interrogate with the HLRs of mobile operators.

In your case, the USSDGW must have USSD terminating features to push push ussd menu to mobile phone.

The procedure shall be:
1\. Receive the sms, then you know the MSISDN and sms content which help to know which service was required.
2\. Based on MSIDN, you will retrieve the mobile's IMSI from network
3\. Push ussd menu to mobile IMSI network.

The ussdgw will do steps 2,3 for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:54:52.637

[Stack Overflow](https://stackoverflow.com/questions/4366659/how-to-do-interactive-sms)上已经提出并回答了类似的问题。尽管该解决方案适用于 C#，但它也可以轻松地复制到其他平台上。

[在这篇文章](https://stackoverflow.com/questions/2902729/java-ussd-menu-tree-generation-how-to)中也可以找到一些帮助。

如果您可以提供更多信息，例如目标地理位置、服务类型 - 那么您可能会得到更好的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T11:36:55.090

许多 n/w 组件出现在画面中。

1.  您应该有 SMSC 可以接收来自用户的 SMS。
2.  将获取此 SMS 然后想要发送 USSD 菜单的应用程序
3.  能够进行 USSD 推送的 USSD 网关。
4.  收到 SMS 后的应用程序将拥有用户的 MSC、IMSI、MSISDN，因此使用 USSD 网关推送相同的 USSD 菜单。

# ios - 如何使用框架和颜色自动绘制 UIImage？

> ID：15461309
> 
> 赞同：0
> 
> 时间：2013-03-17T13:33:38.327
> 
> 标签：ios, uiimage, core-image

我尝试使用框架和颜色创建 UIImage，但不知道正确的方法是什么。

```
UIImage *aImage = [UIImage imageWithCIImage:[CIImage imageWithColor:[CIColor colorWithCGColor:[UIColor redColor].CGColor]]]; 
```

上面的行是正确的吗？如何创建图像大小？请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T13:36:14.253

做一个`UIImage`类别。

如`UIImage(Color)`

```
+ (UIImage *)imageWithColor:(UIColor *)color andSize:(CGSize)size
{
    UIGraphicsBeginImageContextWithOptions(size, YES, 0);

    [color set];
    UIBezierPath * path = [UIBezierPath bezierPathWithRect:CGRectMake(0, 0, size.width, size.height)];
    [path fill];

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext ();
    UIGraphicsEndImageContext();

    return image;
} 
```

**如何使用 ：**

```
#import "UIImage + Color"

UIImage *image = [UIImage imageWithColor:[UIColor redColor] andSize:yourSize]; 
```

# android - 色调到 rgb 谷歌地图标记

> ID：15461313
> 
> 赞同：4
> 
> 时间：2013-03-17T13:34:03.210
> 
> 标签：android, rgb, google-maps-android-api-2

我用色调颜色创建我的谷歌地图标记

[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/BitmapDescriptorFactory#defaultMarker(float)](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/BitmapDescriptorFactory#defaultMarker(float))

标记的色调。值必须大于或等于 0 且小于 360。

有没有办法将这种色调女巫转换为 rgb 颜色？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T06:57:14.363

试试这个代码：

```
float hue = 180.0f;
int color = Color.HSVToColor(new float[] { hue, 1.0f, 1.0f }); 
```

更多信息：

```
/**
 * Convert HSV components to an ARGB color. Alpha set to 0xFF.
 *     hsv[0] is Hue [0 .. 360)
 *     hsv[1] is Saturation [0...1]
 *     hsv[2] is Value [0...1]
 * If hsv values are out of range, they are pinned.
 * @param hsv  3 element array which holds the input HSV components.
 * @return the resulting argb color
*/
public static int HSVToColor(float hsv[]) { 
```

# java - 如何在 Java 中发出 http 部分 GET 请求

> ID：15461314
> 
> 赞同：0
> 
> 时间：2013-03-17T13:34:03.820
> 
> 标签：java, http, get, partial

我正在尝试发出部分 GET 请求，我希望得到 206 响应，但我仍然得到 200 OK。我怎样才能让它用 206 响应？

这是我写的代码：

```
HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();

int start = Integer.parseInt(args[1]);
int end = Integer.parseInt(args[2]);

urlConn.setRequestMethod("GET");
urlConn.setRequestProperty("Range", "bytes=" + start + "-" + end);

if (urlConn.getResponseCode() != HttpURLConnection.HTTP_PARTIAL)
    System.out.println ("File cannot be downloaded.");          
else    
{                                   
    String filepath = url.getPath();
    String filename = filepath.substring (filepath.lastIndexOf('/') + 1);

    BufferedInputStream in = new BufferedInputStream (urlConn.getInputStream());
    BufferedOutputStream out = new BufferedOutputStream (new FileOutputStream (filename));

    int temp;    
    while ((temp = in.read()) != -1)
    {
        out.write ((char)temp);
    }

    out.flush();
    out.close();

    System.out.println ("File downloaded successfully.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:39:06.777

> 我怎样才能让它用 206 响应？

您不能强制服务器尊重您的`Range`标头。HTTP 1.1 规范[说](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)：

> "*服务器可以忽略 Range 标头。* "

* * *

你评论：

> 我知道服务器不会忽略它。至少不应该

显然，服务器 >>IS<< 忽略了标题。或者，您请求的范围包括整个文档。

# c# - c# ReaderWriterLockSlim 在调用 ExitReadLock 的中断线程后损坏

> ID：15461315
> 
> 赞同：2
> 
> 时间：2013-03-17T13:34:17.563
> 
> 标签：c#, readerwriterlockslim

我遇到了 ReaderWriterLockSlim 在一系列法律行动后似乎被破坏的场景。

流程是：

1.  线程 1 需要写入器 lock1
2.  线程 2 尝试获取读卡器 lock1 - 块
3.  线程 2 被中断，调用 lock1.ExitReadLock 线程 2 没有获得锁。似乎应该抛出异常。
4.  线程 1 退出 lock1 的写入者锁
5.  任何试图获取 lock1.EnterReadLock 的线程都将永远阻塞

在上面的第 3 阶段之后，调试器显示 lock1.CurrentReadCount 已损坏 - 似乎已溢出到 0x7FFFFFF。

我想知道是否有人遇到过这种情况，或者我可能遗漏了一些东西。

重现它的代码：

```
[TestMethod]
public void ReproTest()
{
    var rwlock = new ReaderWriterLockSlim();
    rwlock.EnterWriteLock();

    bool taken = false;
    var reader = new Thread(() =>
    {
        try
        {
            rwlock.EnterReadLock();
            s_logger.Info("Enter");

        }
        catch (ThreadInterruptedException)
        {
            rwlock.ExitReadLock();
        }
    });
    reader.Name = "Reader";
    reader.Start();
    Thread.Sleep(1000);

    reader.Interrupt();

    Thread.Sleep(1000);

    rwlock.ExitWriteLock();

    while (!taken)
    {
        taken = rwlock.TryEnterReadLock(1000);
    }

    Thread.Sleep(1000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:59:46.377

读者永远不会进入读锁。它等待写入被释放。当它被中断时，即使您从未进入过，您也会尝试退出，导致读取计数低于 0 我想:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:40:26.033

这看起来像是框架中的一个错误（在 v3.5 和 v4.0 上测试过）。`ExitReadLock()`应该抛出一个，但在这种`SynchronizationLockException`情况下不会。实际上，您可以通过以下方式更简单地触发一个非常相似的问题：

```
rwlock.EnterReadLock();
rwlock.ExitReadLock();
// This should throw a SynchronizationLockException but doesn't
rwlock.ExitReadLock();
// At this point, rwlock.CurrentReaderCount = 0x0fffffff 
```

（事实上​​，如果在之前进入锁的任何线程上`ExitReadLock()`没有匹配就调用它会破坏锁。）`EnterReadLock()`

仅当`ReaderWriterLockSlim`使用无参数构造函数或使用`LockRecursionPolicy.NoRecursion`. 如果用创建`LockRecursionPolicy.SupportsRecursion`，它不会被不匹配的破坏`ExitReadLock()`。

如果您希望读取器线程在等待进入锁定时被中断，我建议将读取器线程方法更改为：

```
var reader = new Thread(() =>
{
    var entered = false;
    try
    {
        rwlock.EnterReadLock();
        entered = true;
        s_logger.Info("Enter");
    }
    finally
    {
        if (entered) rwlock.ExitReadLock();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:18:09.240

修复@Lasse 和@Jeremy 指出的代码：

```
static public void ReproTest()
{
    var rwlock = new ReaderWriterLockSlim();
    rwlock.EnterWriteLock();
    s_logger.Info("0:Enter");

    bool taken1 = false;
    var reader = new Thread(() =>
    {
        try
        {
            rwlock.EnterReadLock();
            s_logger.Info("1:Enter");
            // only set to true if taken
            taken1 = true;
        }
        catch (ThreadInterruptedException)
        {
            // only release if taken
            if (taken1)
                rwlock.ExitReadLock();
            taken1 = false;
        }
    });
    reader.Name = "Reader";
    reader.Start();
    Thread.Sleep(1000);

    reader.Interrupt();

    Thread.Sleep(1000);

    rwlock.ExitWriteLock();

    // 2nd taken variable here only so we can see state of taken1
    bool taken2 = taken1;
    while (!taken2)
    {
        taken2 = rwlock.TryEnterReadLock(1000);
        s_logger.Info("2:Enter");
    }

    Thread.Sleep(1000);
} 
```

运行时，调试输出正确显示写入锁被占用，第一个读取锁未占用，第二个读取锁被占用：

```
0:Enter
A first chance exception of type 'System.Threading.ThreadInterruptedException' occurred in mscorlib.dll
The thread 'Reader' (0x1358) has exited with code 0 (0x0).
2:Enter 
```

# haskell - int 类型转换

> ID：15461316
> 
> 赞同：6
> 
> 时间：2013-03-17T13:34:21.353
> 
> 标签：haskell, types, type-conversion

1）如何从一种`Int`类型转换为一种`Num`类型？

之前已经提出过类似的问题，答案是（就像在 Haskell wiki 上一样）是使用`fromIntegral`. `fromIntegral`返回一个`Num`类型，所以我必须将其转换为我想要的格式。

我需要采取 a`Word16`并将其转换为 a`Int64`所以我正在执行以下操作

```
let valueLength = (fromIntegral(tagLength) :: Int64) 
```

哪里`tagLength`有类型`Word16`

这种方法正确吗？

2）你如何安全地处理类型转换？

来自我相信 Integers 的 Java 背景，我`Short`可以 使用 a作为 an但不能反过来。在 Haskell 虽然如果我写`Int``Long``short``int`

```
256 :: Word8 
```

其中`ghci`返回 0。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T14:13:29.133

> 我需要使用 Word16 并将其转换为 Int64，因此我正在执行以下操作：
> 
> ```
> let valueLength = (fromIntegral(tagLength) :: Int64) 
> ```
> 
> 这种方法正确吗？

让我们问GHC！

```
Prelude Data.Word Data.Int> :t fromIntegral :: Word16 -> Int64
fromIntegral :: Word16 -> Int64 :: Word16 -> Int64 
```

看起来不错。

> 你如何安全地处理类型转换？

Haskell 没有类型转换。完全没有。所有“转换”都必须通过编写一个从一种类型“转换”到另一种类型的函数来完成。

> 如果我写`256 :: Word8`在`ghci`它返回`0`。

数字文字是多态的。对于没有小数点的事物，`fromInteger`隐式使用：

```
Prelude> :t 256
256 :: Num a => a
Prelude> :t fromInteger
fromInteger :: Num a => Integer -> a
Prelude> fromInteger (256 :: Integer) :: Word8
0 
```

如果单态类型的数字文字超出该类型的范围，可能会出现警告或其他内容；也许您应该在 GHC 的错误跟踪器上提交功能请求。

# html - 背景图片

> ID：15461317
> 
> 赞同：28
> 
> 时间：2013-03-17T13:34:22.833
> 
> 标签：html, css, image

我在设置背景图像时遇到了一点问题`<button>`。

这是我在网站上获得的 html：

```
 <button id="rock" onClick="choose(1)">Rock</button> 
```

这是CSS：

```
button {
   font-size: 18px;
   border: 2px solid #AD235E;
   border-radius: 100px;
   width: 150px;
   height: 150px;
}

button #rock {
   background: url(img/rock.png) no-repeat;
} 
```

我不知道为什么按钮的背景仍然是白色的。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-06-19T12:45:13.483

令人惊讶的是，没有答案解决或提到这里的实际问题。

CSS 选择器说“给我一个在元素**中**`button #rock`带有 id的元素”，如下所示：`rock` **`<button>`**

 **```
<button>
    <span id="rock">This element is going to be affected.</span>
</button> 
```

但是你想要的是一个**带有**id的`<button>`元素。并且选择器将是（注意*button*和*#rock*之间缺少空格）。**`rock``button#rock`**

 ****正如@Greg 已经提到的那样：`#rock`已经足够具体以定位按钮并且可以单独使用。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-17T13:40:53.540

出于某种奇怪的原因，按钮的宽度和高度已被重置。您还需要在 ID 选择器中指定它们：

```
#rock {
    width: 150px;
    height: 150px;
    background-image: url(http://th07.deviantart.net/fs70/150/i/2013/012/c/6/rock_01_png___by_alzstock-d5r84up.png);
    background-repeat: no-repeat;
} 
```

[现场测试用例](http://jsfiddle.net/NnXex/1/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-17T13:52:26.933

您需要在按钮中调用 CLASS

```
<button class="tim" id="rock" onClick="choose(1)">Rock</button>

<style>
.tim{
font-size: 18px;
border: 2px solid #AD235E;
border-radius: 100px;
width: 150px;
height: 150px; background-image: url(images/Sun.jpg);
}
</style> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T13:42:19.777

用#rock替换按钮#rock

不需要额外的选择器范围。您正在使用尽可能具体的 id。

JsBin 示例：http: [//jsbin.com/idobar/1/edit](http://jsbin.com/idobar/1/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T13:37:28.497

尝试将您的 CSS 更改为此

```
button #rock {
    background: url('img/rock.png') no-repeat;
} 
```

...只要图像在那个地方

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T13:42:10.927

删除 #rock 之前的“按钮”：

```
button #rock {
    background: url(img/rock.png) no-repeat;
} 
```

在 Google Chrome 中为我工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-23T17:50:50.003

要摆脱白色，您必须将背景颜色设置为透明：

```
button {
  font-size: 18px;
  border: 2px solid #AD235E;
  border-radius: 100px;
  width: 150px;
  height: 150px;
  background-color: transparent; /* like this */
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-31T16:51:55.617

你绝对需要一个按钮标签元素吗？因为您可以改用 input type="button" 元素。

然后只需链接这个 CSS：

```
 input[type="button"]{
  width:150px;
  height:150px;
  /*just this*/ background-image: url(https://images.freeimages.com/images/large-previews/48d/marguerite-1372118.jpg);
  background-position: center;
  background-repeat: no-repeat;
  background-size: 150px 150px;
}
```

```
<input type="button"/>
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-11-24T08:50:33.337

试试这个方法

```
<button> 
    <img height="100%" src="images/s.png"/>
</button> 
```******

# ruby - NoMethodError：未定义的方法'-@'

> ID：15461319
> 
> 赞同：0
> 
> 时间：2013-03-17T13:34:32.197
> 
> 标签：ruby, sinatra, ruby-2.0

这是我的 Sinatra 代码

```
 def self.sort_by_date_or_price(items, sort_by, sort_direction)
    if sort_by == :price
      items.sort_by{|x| sort_direction == :asc ? x.item.current_price : -x.item.current_price}
    elsif sort_by == :date
      items.sort_by{|x| sort_direction == :asc ? x.created_date : -x.created_date}
    end
  end 
```

当我将此方法称为 #`sort_by_date_or_price(items, :date, :desc)`它返回错误 `NoMethodError: undefined method '-@' for 2013-02-05 02:43:48 +0200:Time`

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:41:26.363

```
class Person
end
#=> nil
ram = Person.new()
#=> #<Person:0x2103888>
-ram
NoMethodError: undefined method `-@' for #<Person:0x2103888>
        from (irb):4
        from C:/Ruby200/bin/irb:12:in `<main>' 
```

现在看看我是如何在下面修复它的：

```
class Person
  def -@
   p "-#{self}"
  end
end
#=> nil
ram = Person.new()
#=> #<Person:0x1f46628>
-ram
#=>"-#<Person:0x1f46628>"
=> "-#<Person:0x1f46628>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:03:31.267

问题是`unary -`运算符 in 未在[Time](http://ruby-doc.org/core-2.0/Time.html)使用的类中定义`created_date`。您应该将其转换为整数：

```
items.sort_by{|x| sort_direction == :asc ? x.created_date.to_i : -x.created_date.to_i} 
```

也可以这样写

```
items.sort_by{|x| x.created_date.to_i * (sort_direction == :asc ? 1 : -1)} 
```

# django - 什么是服务器异步响应？

> ID：15461325
> 
> 赞同：8
> 
> 时间：2013-03-17T13:35:02.240
> 
> 标签：django, asynchronous

我正在阅读有关实时网络的信息，并且注意到一句话`allow Django to do async responses`。到目前为止，我所理解的是，可以通过使用 Ajax 从同一侧发出多个 Http 请求来实现客户端的并行性，但对于服务器来说，这些只是单独的请求，每个请求都在自己的线程中处理。

我如何看待它的工作：

1.  客户端发送两个请求
2.  服务器接收它们并在自己的线程中解决它们，然后返回给客户端

什么是异步服务器的概念示例？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T14:12:34.473

HTTP 是一种阻塞、同步的协议。这意味着客户端必须等待服务器的响应才能继续。服务器*阻止*客户端做任何事情；因为客户端必须等待响应通过。浏览器收到响应后，断开连接，然后打开另一个连接，重复该过程，直到获取页面的所有元素以进行显示。

这是网络的状态，也是 HTTP 协议的本质。

Ajax 只是创建了一个*后台*进程来执行浏览器会执行的操作——它仍然处于阻塞状态，但最终效果是用户仍然可以与客户端交互。浏览器正在显示某些内容并且没有被有效地“阻止”。

“实时”网络允许您拥有一个非阻塞、异步的开放式套接字。异步意味着您不必等待响应返回 - 客户端不会被阻塞。您可以发送多个请求，然后当服务器完成它们时，它会回复。您不必“等待”。

您每天使用的许多东西都是异步的：

1.  任何聊天应用程序 - 例如 IRC、facebook messenger、whatapp 等。
2.  与一个非常健谈的朋友的电话交谈（通常，您会等待听到对方的回应，但有些人只是说话和说话......）。
3.  任何正在流式传输的内容，例如 YouTube。

将其简单地视为“一方不必等待再次开始传输”。

在 Web 中，实时是通过绕过 HTTP 的限制来实现的。这就是[WebSockets](http://en.wikipedia.org/wiki/WebSocket)和[服务器发送事件 (SES)](http://en.wikipedia.org/wiki/Server-sent_events)的用武之地。

第一种是通过 TCP 打开全双工（即可以同时发送和接收）通道的标准方式。

第二个（SES）仍然作为 HTML5 的一部分进行标准化，但它允许服务器将通知推送到客户端，而不是客户端必须轮询服务器以获取事件。因此，不是您发送检查更新的请求，而是服务器会在有更新时告诉您——比如“不要给我打电话，我会打电话给你”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T13:59:54.843

这是一个如何工作的概念图，您可以看到服务器端（HTTP Server）正在回答来自 DIV 的异步请求，因此每个答案都可以看作是一个异步答案。

由于答案来自能够以异步方式服务的服务器，因此该服务器可以是体贴的异步服务器。

![顺序图](../Images/6b526f12dd8ded8899e372ff3d55ee07.png)

顺便说一句，[文章/图表](http://www.codeproject.com/Articles/44486/Web-Page-Loading-in-Steps-ASP-NET-Solution)来自 .NET 场景，AJAX 行为是通用的，这就是它在一般视图上的工作方式。

# jquery - 使用 ajax/jquery、codeigniter 将数据从视图传递到控制器

> ID：15461329
> 
> 赞同：0
> 
> 时间：2013-03-17T13:35:18.530
> 
> 标签：jquery, codeigniter

我只想使用 ajax 将数据传递给控制器​​，这是通过视图中的下拉菜单选择的。这是我的尝试[http://pastebin.com/KnLqW8Pc](http://pastebin.com/KnLqW8Pc)。

```
 //// controller ///////    
<?php         
    class Ilce extends CI_Controller{         
            public  $ilceid;         
            public function __construct()
            {
                    parent::__construct();
                    $this->load->model('ilce_model');
            }

            public function index()
            {      
                    $this->load->helper(array('form'));
                    $data['ilce'] = $this->ilce_model->ilce_getir();

                    $this->load->view('ilce', $data);
                    /*
    hello, i want to print here to data which will select in view and passed by jsfunc file ( ajax ) to here again...
    */       

            }               
    }

/////////////////////////////////view/////////////////////////////////
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <link rel="stylesheet" type="text/css" href="style/reset.css"/>
    <link rel="stylesheet" type="text/css" href="style/page.css"/>
    <link rel="shortcut icon" href="img/3burcak.ico"  />
        <script type="text/javascript" src="<?php echo base_url();?>js/jquery.js"></script>
        <script type="text/javascript" src="<?php echo base_url();?>js/jfunc.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>3Burçak Ltd.Şti.</title>

    </head>
    <?php echo  form_open('ilce/index')?>

    <select id="ilce" name="ilce">
    <option value="">Select Town</option>
    <?php foreach ($ilce as $x):?>
    <option value="<?php echo $x['id']?>"><?php echo $x['ad']?></option>
    <?php endforeach?>
    </select>
    <select id="semt">
    <option value="">Please select Town first.</option>
    </select>

////////////////////////////////////////////////////////jsfunc 
```

$(文档).ready(函数(){

```
 /* il ilce arama*/
    $("#ilce").change(
        function(){
           if($("#ilce").val()!="-1"){
              var ilceid=$("#ilce").val();
               $.post('ilce/index',{"ilceid":ilceid},function(output){
                    $('#semt').remove();
                    $('#semt').append(output);

               });

           }
        });

        /* il ilce arama bitti*/

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:41:04.803

You're not going to be able to load a view like that from an AJAX call. Make a separate function to return the data to the view then your append will work.

jQuery

```
$("#ilce").change(
     function(){
        if($("#ilce").val()!="-1"){
            var ilceid=$("#ilce").val();
            $.post('ilce/ajax_return_data',{"ilceid":ilceid},function(output){
                    $('#semt').remove();
                    $('#semt').append(output);

               });

       }
    }); 
```

Controller

```
function ajax_return_data()
{
    $this->load->helper(array('form'));
    $data['ilce'] = $this->ilce_model->ilce_getir();
    print json_encode(array('output'=>$data['ilce']));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:01:36.820

我的朋友，您发布的代码格式太差，无法理解，但据我了解，您希望将查看信息传递给 ajax 请求。如果是这种情况，那么执行此操作的方法将页面调用为您的 ajax 请求，在本例中为“Ilce”，该请求位于控制器内部。这里说你正在请求索引页面，所以加载一个视图，例如 $this->load->view('xyz', $data); 这将使您获得所需的结果。

您还可以查看本教程，该教程详细介绍了如何使用 Code Igniter 和 jQuery Ajax 获取 ajax 数据：http: [//amitavroy.com/justread/content/articles/getting-ajax-data-using-views-codeigniter](http://amitavroy.com/justread/content/articles/getting-ajax-data-using-views-codeigniter)

希望这有帮助

# wordpress - 如何从 wordpress 的更新配置文件选项中获取密码字符串？

> ID：15461334
> 
> 赞同：0
> 
> 时间：2013-03-17T13:35:41.590
> 
> 标签：wordpress

当某些用户从 wordpress 的个人资料页面更改密码时，我想获取密码字符串（而不是哈希）。我怎样才能获得价值？任何想法？我正在尝试将 wordpress 与外部数据库集成，因此每次用户在 wordpress 网站上更新密码时它都会更新密码。外部站点上的密码哈希结构不同，因此我需要配置文件更新页面中的密码字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T17:50:14.540

```
add_action( 'check_passwords','profilescreen', 10, 3);

function profilescreen($user,$pass1,$pass2){
//Do something here
} 
```

# xcode - 为 iCloud 更新 App ID

> ID：15461341
> 
> 赞同：0
> 
> 时间：2013-03-17T13:36:29.357
> 
> 标签：xcode, app-store, provisioning

在为 iCloud 添加之前，我看到了一个与我类似的问题；然而，这个问题似乎并不真正符合我的想法（但是，可能是错的，如果我错了，请道歉）。

文档 ( [http://bit.ly/YhKXkX](http://bit.ly/YhKXkX) ) 中的最后一部分标题为：更新您的应用程序以包括 APNS、iCloud、应用内购买或游戏中心需要一个显式应用程序 ID - 意味着可以采用当前通用/通配符 App ID 并更改为显式 App ID。但是，文档没有明确说明这样做是否会导致该应用程序被视为商店中的*新应用程序；*或者，具有不同捆绑标识符的同一应用程序。

例如，如果我有 App ID：ABCDEFG.* - 并且商店中的应用程序使用 ABCDEFG 作为其捆绑标识符 - 我可以：

1.  创建 ABCDEF.explicit.app.ID 的 App ID*和*
2.  用新的显式 ID 替换我的项目中的包标识符*和*
3.  将应用程序作为曾经具有 ABCDEFG 捆绑 ID 的同一应用程序提交到应用程序商店？

前段时间更改捆绑标识符的记忆说，“不。一旦您提交到商店，您必须每次使用相同的捆绑 ID，应用程序才能被视为商店中的同一个应用程序” - 但希望验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:30:20.767

在应用程序的目标 -> 摘要 -> Bundle Identifier 下，您将看到应用程序 ID。这不能是通配符应用 ID。它必须是唯一的 ID。

以下是您应该执行的操作： 1\. 创建一个与您的 Bundle Identifier 相同的新应用 ID 2\. 为该应用 ID 启用 iCloud 3\. 使用该应用 ID 创建一个新的配置文件 4\. 在构建设置下，确保您更改您的代码签名到您创建的新配置文件。

您现在可以再次上传您的应用程序，它不会被视为新应用程序。

# visual-studio-2010 - Nsight 未命中 __device__ 断点

> ID：15461343
> 
> 赞同：1
> 
> 时间：2013-03-17T13:36:36.733
> 
> 标签：visual-studio-2010, cuda, nsight

我正在使用 Visual Studio 2010、NVIDIA Nsight 2.2.0 和 CUDA 5.0。

在 Nsight 的调试模式下，我可以在**全局**函数处停止，但不能在**设备**函数处停止。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:55:50.867

我相信这个选项将在下一个 Nsight 版本（3.0）中可用。您可以尝试申请 NVIDIA 的注册开发者计划并下载 Nsight (3.0 RC1) 的最新 beta 版本：

> 2013 年 1 月 30 日更新：新的和即将推出的 Nsight™ Visual Studio 版本 3.0 的候选版本 1 版本现已在抢先体验页面的 Nsight™ Visual Studio 版本注册开发人员计划下提供（需要登录）。我们鼓励所有用户尝试这个新版本，它正式支持 OpenGL 帧调试和分析、GLSL GPU 着色器调试、本地单 GPU 着色器调试、Tesla® K20 和 CUDA 5.0® 中的新 Kepler GK110 架构。

请参阅 NVIDIA 开发者论坛上的这篇文章：[https : **//devtalk.nvidia.com/default/topic/528463/cannot-break-in-or-step-into-cuda-device-functions/**](https://devtalk.nvidia.com/default/topic/528463/cannot-break-in-or-step-into-cuda-__device__-functions/)

# android - Google Play 服务和第 2 版 Google Maps Android API，授权失败

> ID：15461345
> 
> 赞同：1
> 
> 时间：2013-03-17T13:36:40.197
> 
> 标签：android, google-maps

我正在尝试使用 Google Play 服务（修订版 5）和 Google Maps Android API 的第 2 版构建一个 Android 应用程序。

我仔细阅读了以下文件：

[http://developer.android.com/google/play-services/maps.html](http://developer.android.com/google/play-services/maps.html) [https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)

为了确定，我只是从以下位置复制了示例应用程序：~/android-sdk-linux/extras/google/google_play_services/samples

在这段代码中，我只是更改了 manifest 中的 developerper 密钥和 targetSdkVersion (16 -> 17)：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mapdemo"
    android:versionCode="2"
    android:versionName="2.1.0" >

<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<!-- Copied from Google Maps Library/AndroidManifest.xml. -->
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<!-- External storage for caching. -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<!-- My Location -->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<!-- Maps API needs OpenGL ES 2.0\. -->
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />
<!-- End of copy. -->
<application
    android:hardwareAccelerated="true"
    android:allowBackup="false"
    android:icon="@drawable/ic_launcher"
    android:label="@string/demo_title" >
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="XXXXXXXXXXXmyXkeyXXXXXXXXXXXXX" />

    <activity android:name=".MainActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".BasicMapActivity"
        android:label="@string/basic_map" />
    <activity
        android:name=".CameraDemoActivity"
        android:label="@string/camera_demo" />
    <activity
        android:name=".CircleDemoActivity"
        android:label="@string/circle_demo" />
    <activity
        android:name=".EventsDemoActivity"
        android:label="@string/events_demo" />
    <activity
        android:name=".GroundOverlayDemoActivity"
        android:label="@string/groundoverlay_demo" />
    <activity
        android:name=".LayersDemoActivity"
        android:label="@string/layers_demo" />
    <activity
        android:name=".LocationSourceDemoActivity"
        android:label="@string/locationsource_demo" />
    <activity
        android:name=".MarkerDemoActivity"
        android:label="@string/marker_demo" />
    <activity
        android:name=".OptionsDemoActivity"
        android:label="@string/options_demo" />
    <activity
        android:name=".PolygonDemoActivity"
        android:label="@string/polygon_demo" />
    <activity
        android:name=".PolylineDemoActivity"
        android:label="@string/polyline_demo" />
    <activity
        android:name=".ProgrammaticDemoActivity"
        android:label="@string/programmatic_demo" />
    <activity
        android:name=".TileOverlayDemoActivity"
        android:label="@string/tile_overlay_demo" />
    <activity
        android:name=".UiSettingsDemoActivity"
        android:label="@string/uisettings_demo" />
    <activity
        android:name=".RawMapViewDemoActivity"
        android:label="@string/raw_mapview_demo" />
    <activity
        android:name=".RetainMapActivity"
        android:label="@string/retain_map" />
    <activity
        android:name=".MultiMapDemoActivity"
        android:label="@string/multi_map_demo" />
</application> 
```

Google Play 库项目已在项目属性中正确设置。

我没有修改 proguard.cfg 标准文件。

在我的带有 android 4.1.2 的 Motorola Xoom 上启动“Google Maps API Demos”，然后单击“基本地图”，返回一个没有任何地图的空白屏幕。

我的 logcat 包含：

```
03-17 14:07:13.450: E/Google Maps Android API(17988): Authorization failure. 
```

在我的 API 控制台中，“Google Maps Android API v2”已打开。

我为 Android 应用程序创建了一个密钥，我的控制台显示：

```
Key for Android apps (with certificates)
API key:    XXXXXXXXXXXmyXkeyXXXXXXXXXXXXX
Android apps:   XXXXXXXXXXXmyXSHA1XXXXXXXXXXXXX;com.example.mapdemo
Activated on:   Mar 17, 2013 4:28 AM
Activated by:    you 
```

你明白什么是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:15:21.313

我找到了答案：如果我以签名的 apk 导出我的应用程序，将其推送到平板电脑并安装它，我就能正确地看到地图。感谢您的回答。

要调试应用程序，您需要使用调试证书指纹生成密钥，如下所述： [https ://developers.google.com/maps/documentation/android/start#displaying_certificate_information](https://developers.google.com/maps/documentation/android/start#displaying_certificate_information)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T16:47:59.317

我刚遇到这个问题，贴[在这里](https://stackoverflow.com/questions/20220262/google-map-sdk-map-set-up-authorization-failure-ensure-that-the-following-cor)。为了能够从 IDE 启动，请将调试/开发 SHA1 指纹与您从自己的密钥库创建的生产指纹一起添加到 API 控制台。

只需从命令行运行`keytool -list -v -keystore <keystoreName>.keystore`（`debug.keystore`在`~/.android`目录中）和`<yourKeystore>.keystore`（在您签署 .apks 时使用）

这将为您提供两个 SHA1 指纹，将它们都添加到`Google Maps Android API v2`Google Cloud Console 中，现在您有一个用于开发，一个用于实时。

# internationalization - 西班牙语和巴西葡萄牙语的子域名

> ID：15461347
> 
> 赞同：0
> 
> 时间：2013-03-17T13:37:18.670
> 
> 标签：internationalization, subdomain

我正在准备葡萄牙语和西班牙语服务的本地化版本。葡萄牙语的唯一目标受众是巴西，而西班牙语没有县偏好（但是，是的，主要原因是拉丁美洲和南美洲）。

所以我想为这些语言创建子域。

我的第一个想法是只使用 ISO 语言代码：

*   pt.domain.com
*   es.domain.com

但是巴西有pt-br代码语言，所以我想到了

*   pt-br.domain.com

然后我想——不是

*   brazil.domain.com

更用户友好？然后——不是

*   西班牙语.domain.com

那么更好。？或者可能

*   espanol.domain.com

会是最精确的吗？

任何想法都会受到赞赏，尤其是从 SEO 的角度来看。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:05:40.597

首先，要很好地决定是否要按国家、地区或语言创建子域。尽管一个国家和一种语言之间的区别非常简单，但人们出于某种原因经常混淆它们。尽早做出这个决定并保持一致，以后会为自己省去很多麻烦。

另外，您确定区分巴西葡萄牙语和其他品种对您很重要吗？你的目标是葡萄牙人吗？即使你这样做了，为他们做不同的翻译重要吗？西班牙语也有区域品种——欧洲品种不同于拉丁美洲品种，不同的拉丁美洲国家之间也存在差异。尽管存在差异，但所有地区的演讲者通常都可以理解这两种变体。您需要询问熟悉这些语言的人，这对您来说有多重要。如果它不重要，只需为每种语言制作一个版本。

国家或语言的 ISO 代码可能更好：它们更短，您不必担心使用哪个名称 - “espanol”或“spanish”。反正应该没多大关系。

我不是 SEO 专家，但常识告诉我们，有用的内容对于 SEO 来说应该比域名重要得多。

# c - 如何比较C中的套接字地址？

> ID：15461350
> 
> 赞同：18
> 
> 时间：2013-03-17T13:37:27.610
> 
> 标签：c, sockets

`struct sockaddr`我的意思是，当我检查两个是否`struct sockaddr`具有相同的 IP 地址和端口号时，我应该比较哪些字段？那么`sockaddr_in`呢？

我可以投到`sockaddr_in`，`sockaddr`并将其与真实的比较`sockaddr`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T13:44:47.217

首先，您需要检查系列（IPv4、IPv6 或其他）。然后您可以将每个 sockaddr 转换为适当的“派生”类型，例如 sockaddr_in。看看苹果是怎么做的：[http ://www.opensource.apple.com/source/postfix/postfix-197/postfix/src/util/sock_addr.c](http://www.opensource.apple.com/source/postfix/postfix-197/postfix/src/util/sock_addr.c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-15T23:02:58.877

首先，当你处理*values*时，你需要使用`struct sockaddr_storage`，因为`struct sockaddr`它只对指针安全，否则你会遇到大小和对齐问题。

其次，`struct sockaddr`是在 C 中传递的“基类”。第一个成员是`sa_family_t sa_family;`（尽管这`struct`比结构成员早在不同的命名空间中，每个“子类”都使用一个唯一的前缀（我遇到过至少 40 个子类））。

第三 - 虽然您可能认为每个`struct`定义都是可靠的，但事实证明，类的大小因内核/库版本而异。所以，你*总是*必须通过`sizeof()`实际`struct sockaddr_FOO`以避免垃圾。例如，旧版本的`struct sockaddr_in6`没有`sin6_scope_id`成员。

您可能应该将其包装在一个`struct`sanity 中（并提供各种帮助函数）：

```
struct SocketAddress
{
    struct sockaddr_storage addr;
    socklen_t addr_len;
}; 
```

然后，您的比较代码将如下所示：

```
// returns < 0 if (left < right)
// returns > 0 if (left > right)
// returns 0 if (left == right)
// Note that in general, "less" and "greater" are not particularly
// meaningful, but this does provide a strict weak ordering since
// you probably need one.
int socket_cmp(struct SocketAddress *left, struct SocketAddress *right)
{
    socklen_t min_addr_len = left->addr_len < right->addr_len ? left->addr_len : right->addr_len;
    // If head matches, longer is greater.
    int default_rv = right->addr_len - left->addr_len;
    int rv = memcmp(left, right, min_addr_len);
    return rv ? rv : default_rv;
} 
```

可是等等！虽然如果你小心，上面的代码就足够了，但小心仍然需要很多细节。例如：

*   是否所有套接字地址都将在您的程序的一次运行中生成，还是会从某些外部介质中读取其中一些地址？对于后一种情况，您需要规范化`sin6_scope_id`.

*   您是否必须在同一个程序中同时处理 IPv4 和 IPv4-on-IPv6 地址（映射为`ffff::1.2.3.4`）？最简单的方法是在程序中专门处理 IPv6，因为相关函数也接受 IPv4 地址。为了获得最佳可移植性，请务必*禁用*（使用`setsockopt`）该`IPV6_V6ONLY`标志。或者，您可以启用该标志以帮助确保 IPv6 地址永远不会包含 IPv4 地址。（请注意，查找`localhost`不同 - 但这是*所有*域查找的普遍问题，可能返回多个结果）。

*   您需要确保所有结构填充都归零。

# android - 在android中禁用过去的时间选择器

> ID：15461353
> 
> 赞同：0
> 
> 时间：2013-03-17T13:37:45.110
> 
> 标签：android, android-timepicker

如何在 Android 的时间选择器中禁用过去时间？我已经创建了时间选择器，那么现在如何禁用 Android 时间选择器中的过去时间？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-03-17T13:45:41.590

尝试这样的事情

```
@Override
protected Dialog onCreateDialog(int id) {
    Calendar c = Calendar.getInstance();
    int cyear = c.get(Calendar.YEAR);
    int cmonth = c.get(Calendar.MONTH);
    int cday = c.get(Calendar.DAY_OF_MONTH);
    switch (id) {
        case DATE_DIALOG_ID:
        //start changes...
        DatePickerDialog dialog = new DatePickerDialog(this, mDateSetListener, cyear, cmonth, cday);
        dialog.getDatePicker().setMinDate(new Date());
        return dialog;
        //end changes...
    }
    return null;
} 
```

# c# - c# 中用于读取节点和值的 XML 代码

> ID：15461358
> 
> 赞同：0
> 
> 时间：2013-03-17T13:38:19.637
> 
> 标签：c#, xml

我必须比较 XML 中的两个文件，其中我需要显示文件之间“不匹配模式”的内容，无论是节点名称还是节点值的差异。

到目前为止我写的代码是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.XPath;

namespace ConsoleApplication1
{
   public class Program
    {
        public Program()
        {

            XmlDocument _mxml1 = new XmlDocument();

            _mxml1.Load(@"C:\Users\Rahul\Documents\xml work\abcd.xml");

            XmlDocument _mxml2 = new XmlDocument();

            _mxml2.Load(@"C:\Users\Rahul\Documents\xml work\efg.xml");

            XmlElement _melement1 = _mxml1.DocumentElement;

            XmlElement _melement2 = _mxml2.DocumentElement;

            XPathNavigator nav1 = _mxml1.CreateNavigator();

            XPathNavigator nav2 = _mxml2.CreateNavigator();

            if (_melement1.HasChildNodes && _melement2.HasChildNodes && _melement1.ChildNodes.Count == _melement2.ChildNodes.Count)
            {

                XmlNodeList _node1 = _melement1.ChildNodes;

                XmlNodeList _node2 = _melement2.ChildNodes;

                foreach (XmlNode _n1 in _node1)
                {

                    foreach (XmlNode _n2 in _node2)
                    {

                        int count = _n1.ChildNodes.Count;

                        int count2 = _n2.ChildNodes.Count;

                        if (_n1.Name.ToString() == _n2.Name.ToString())
                        {

                            int res = _n1.OuterXml.CompareTo(_n2.OuterXml);

                            if (res == 1)
                            {

                                Console.WriteLine("All the child names match for the case ");

                            }

                            if (_n1.InnerText.ToString() != _n2.InnerText.ToString())
                            {

                                Console.WriteLine("Values of some child doesnot match");

                                // here we need to traverse through child nodes of both xmls to find out the change in file..

                            }

                            if (_n1.InnerXml.ToString() == _n2.InnerXml.ToString())
                            {

                                Console.WriteLine("Records match completly");

                            }

                        }

                        else
                        {

                            Console.WriteLine("XML_1 " + "     " + "" + "XML_2  \n" + _n1.Name + " " + _n2.Name);

                        }

                    }

                }

            }

        }
        static void Main(string[] args)
        {
            Program obj = new Program();
        }
    }
} 
```

现在的问题是如果节点的值存在差异，如何找到两个文件中不同的字符串部分......

# php - else 部分不显示来自 php 的内容

> ID：15461360
> 
> 赞同：1
> 
> 时间：2013-03-17T13:38:28.283
> 
> 标签：php, html

```
<?php
$regs=$_GET["regs"];
$schm=$_GET["schm"];

//echo $regs;

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("adjpoly", $con);

$sql="SELECT * FROM student WHERE Register = '".$regs."'";

//echo $sql;

$result = mysql_query($sql);

$sql1="SELECT `Semester`,`Subject`,`Internal`,`External`,`Total`,`Result`,`Arrear` FROM semester".$schm." where Register ='".$regs."'";

//echo $sql1;
$result1 = mysql_query($sql1);

while($row = mysql_fetch_array($result))
{
    if($row==NULL)
    {
        echo '<b style="background-color:#000000">Invalid Number.</b>';
    }
    else
    {
echo "<table style='border:1px solid black;border-collapse:collapse;' width='70%'>
<tr><td style='border:1px solid black;font-weight:bold;background-color:#E2E2E2;font:Tahoma; font-size:13pt' align='right' width='20%'>Name</td>
<td style='border:1px solid black;font-weight:bold;color:#0000CC;background-color:#E2E2E2;font:Tahoma; font-size:13pt'>" . $row['Name']."(". $row['Register']. ")"."</td>
</tr>
<tr><td style='border:1px solid black;font-weight:bold;background-color:#E2E2E2;font:Tahoma; font-size:13pt' align='right' width='20%'>Institution Code</td>
 <td style='border:1px solid black;font-weight:bold;color:#0000CC;background-color:#E2E2E2;font:Tahoma; font-size:13pt'>" . $row['Icode'] . "</td>
</tr>
<tr><td style='border:1px solid black;font-weight:bold;background-color:#E2E2E2;font:Tahoma; font-size:13pt' align='right' width='20%'>Course</td>
<td style='border:1px solid black;font-weight:bold;color:#0000CC;background-color:#E2E2E2;font:Tahoma; font-size:13pt'>" . $row['Course'] ."(FULLTIME)"."(". $row['CCode']. ")". "</td>
</tr>
<tr><td style='border:1px solid black;font-weight:bold;background-color:#E2E2E2;font:Tahoma; font-size:13pt' align='right' width='20%'>Scheme</td>
 <td style='border:1px solid black;font-weight:bold;color:#0000CC;background-color:#E2E2E2;font:Tahoma; font-size:13pt'>" . $row['Scheme'] . "</td>
</tr>";
echo "</table>";

echo "<B> Result : P - Pass   F - Fail   A - Absent </B>";
echo "<table style='border:1px solid black;border-collapse:collapse;' width='70%'>
<tr>
<th style='background-color:#0099CC;color:white;font-size:14pt'>Semester</th>
<th style='background-color:#0099CC;color:white;font-size:14pt'>Subject</th>
<th style='background-color:#0099CC;color:white;font-size:14pt'>Internal Mark</th>
<th style='background-color:#0099CC;color:white;font-size:14pt'>External Mark</th>
<th style='background-color:#0099CC;color:white;font-size:14pt'>Total Mark</th>
<th style='background-color:#0099CC;color:white;font-size:14pt'>Result</th>
</tr>";

while($row = mysql_fetch_array($result1))
  {
  echo "<tr align='center'>";
  echo "<td bgcolor='#E2E2E2' style='border: 1px solid black;font:Tahoma; font-size:14pt'>" . $row['Semester'] . "</td>";
  echo "<td bgcolor='#E2E2E2' style='border: 1px solid black;font:Tahoma; font-size:14pt'>" . $row['Subject'] . "</td>";
  echo "<td bgcolor='#E2E2E2' style='border: 1px solid black;font:Tahoma; font-size:14pt'>" . $row['Internal'] . "</td>";
  echo "<td bgcolor='#E2E2E2' style='border: 1px solid black;font:Tahoma; font-size:14pt'>" . $row['External'] . "</td>";
  echo "<td bgcolor='#E2E2E2' style='border: 1px solid black;font:Tahoma; font-size:14pt'>" . $row['Total'] . "</td>";
  echo "<td bgcolor='#E2E2E2' style='border: 1px solid black;font:Tahoma; font-size:14pt'>" . $row['Result'] . "</td>";
  echo "</tr>";
    $arr = $row['Arrear'];
  }
  echo "<tr align='center' bgcolor='#E2E2E2'><td width='100%' colspan='6' style='border: 1px solid black;'>&nbsp;</td></tr>";
  echo "<tr align='center' bgcolor='#D7DFE3'><td width='100%' align='center' colspan='6' style='border: 1px solid black;'>Arrear:" .$arr . "</td></tr>";
  echo "</table>"; 
    }
}
mysql_close($con);
?> 
```

上面的 php 代码用于根据用户输入显示从 mysql 数据库中检索的内容。

通过使用 if 语句，验证给定的输入是否存在于表中。基于以下示例的语法。

```
if($row==NULL)
{
  echo "Invalid Input.";  // while run, the echo statement not displaying.
}
else
{
o/p part..   //while run, response proper o/p
} 
```

谁能帮我。请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:59:32.757

我得到了正确的输出。非常感谢你...

```
$row=mysql_fetch_array($result);  // here the query executed

if($row!=NULL)    // here checking row not equal to null value.
{

Displaying part...

}
else      // here if the row is NULL; it will print the following echo statement.
{
echo "Invalid input.";
} 
```

# python - 如何在 Windows 7/8 中使用 pygtk？

> ID：15461364
> 
> 赞同：0
> 
> 时间：2013-03-17T13:39:18.553
> 
> 标签：python, windows, python-2.7, pygtk

如何在 Windows 7/8 上使用 pygtk？我可以使用 pygtk 为 Windows 应用程序编写 GUI 吗？有linux os的教程，但没有windows的教程，如果有人可以分享会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:48:51.593

从[PyGTK 网站](http://www.pygtk.org/)：

> PyGTK 应用程序是真正的**多平台**，它们能够在 Linux、Windows、MacOS X 和其他平台上运行，无需修改。

您提到的 Linux 教程中提供的所有代码和示例也应该在 Windows 7/8 上运行（假设您已安装 GTK 库 - 您可以从[此处](http://ftp.gnome.org/pub/GNOME/binaries/win32/pygtk/2.24/)获得适用于 Windows 的一体化捆绑包）。

# timer - 我的 Visual Studio 2012 Ultimate 工具箱中不包含计时器

> ID：15461371
> 
> 赞同：1
> 
> 时间：2013-03-17T13:40:04.597
> 
> 标签：timer, toolbox

我正在制作一个 Windows 8 应用程序，我需要计时器，但工具箱中没有计时器。如果您能帮我解决这个我在互联网上找不到解决方案的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:57:15.300

Windows 8 应用程序没有计时器。（来源：[微软开发中心](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/48b09080-e46a-4a40-977e-12b426369ff0/)）

链接提供了一些如何替换它的解决方案。也许它会为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T05:00:22.360

在我的 Visual Basic Premium 2012 副本中，我还认为没有计时器。但是，我发现在**“通用控件选项卡”**中，您只需点击上方选项卡**“所有 Windows 窗体”**即可。在那里你会找到计时器：只需向下滚动:)

# d3.js - 根据过滤的 D3.js 数据禁用/启用下拉列表选项

> ID：15461374
> 
> 赞同：0
> 
> 时间：2013-03-17T13:40:08.007
> 
> 标签：d3.js

我有两个使用 PHP 从数据库中动态填充的下拉列表。它们包含指定列的所有值，例如，一个包含 parameterType 的所有值，另一个包含 dateTimeTaken 的所有值。

当数据被过滤并且其中一些选项可能不再适用时，有什么方法可以禁用这些选项中的任何一个 - 基本上我在问是否可以在数据时更新动态填充的下拉列表，如果可以，如何能完成吗？

**更新：**

我的数据格式如下：

```
 [{"dateTimeTaken":"2013-01-01 14:05:14",
   "reading":"0.90000",
   "parameterType":"Flouride",
   "inspectionPoint_id":"2"}.... 
```

我尝试使用以下代码执行此操作 - 但没有做任何事情？

```
 d3.json("HistoricData.php", function(error,data) 
 {
 var filtered_data = data.filter(function(d) { return d.inspectionPoint_id == i;})  
     filtered_data.forEach(function(d) {
     d.dateTimeTaken = parseDate(d.dateTimeTaken);
     d.reading = +d.reading;
     d.parameterType = d.parameterType;
     d.inspectionPoint_id = +d.inspectionPoint_id;      
 });

 var check = d3.select("selectparameter")//select dropdown list

 check.selectAll("option").each(checkOption);//select all options

 //for any of the options that don't match the parameterType's 
 //from the filtered dataset set display to none     
 var checkOption = function (d, e) {
 if(e !== d.values(d.parameterType)){
    return d3.select(this).attr("display", "none");
}
 }; 
```

**更新 2**

```
 d3.select("#selectparameter")
    .append("select")
    .selectAll("option")
    .data(filtered_data)
    .enter().append("option")
    .text(function(d) { return d.parameterType; }) 
```

![在此处输入图像描述](../Images/ded9006bfdd2a01ab90b83e32e7bd6d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:21:31.667

您可以使用通常的数据绑定/更新模式（参见例如[本教程](http://mbostock.github.com/d3/tutorial/circle.html)）来更新您的选项。

第一次调用（当你绑定数据时）看起来像

```
check.selectAll("option").data(data)
     .enter().append("option")
     ... 
```

要更新，请使用类似的东西

```
var newOptions = check.selectAll("option").data(filtered_data);
newOptions.enter().append("option")
          ...
newOptions.exit().attr("display", "none");
newOptions.attr("display", "block"); 
```

请注意，默认情况下 d3 通过相应数组中的索引匹配数据，在这种情况下这可能不是您想要的。您可以使用可选的第二个参数来提供函数，例如

```
check.selectAll("option").data(filtered_data, function(d) { return d.inspectionPoint_id; }); 
```

# javascript - 检查 localStorage 中是否存在变量的值

> ID：15461377
> 
> 赞同：3
> 
> 时间：2013-03-17T13:40:36.987
> 
> 标签：javascript, json, html, local-storage

我有这个 if 语句，如果变量值不等于 localStorage 值，则执行代码。

```
for(i=0;i<tweets.length;i++){

   tweetID = tweets[i][0].id_str;

   if(tweetID != localStorage['tweet_id']){
       alert("new tweet"); 
       localStorage['tweet_id'] = tweetID;
       console.log(localStorage['tweet_id']);
   }
} 
```

我的问题是它总是进入 if 语句，表明该值永远不等于 localStorage 值。此代码第一次运行时，它总是会进入 if 语句，因为“tweet_id”localStorage 项未定义。一旦它进入它应该将“tweetID”值写入 localStorage 值，正如您在我的代码中看到的那样。页面每 30 秒刷新一次，如果没有新的推文，这些值应该匹配并且不会进入 if 语句。

不是这种情况。我究竟做错了什么？

从使用 console.log 开始，这些值在它第一次进入 if 语句后匹配，因此除非 tweetID 的值发生变化，否则它不应该再次进入那里。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:44:15.097

尝试：

```
if(tweeting !=JSON.parse(localStorage['tweet_text'])) 
```

或者：

```
if(JSON.stringify(tweeting) != localStorage['tweet_text']) 
```

您正在将一个对象与 JSON 进行比较，它永远不会相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:40:23.940

由于数据处于“for”循环中，因此 SINGLE 本地存储项的值将被每个粗花呢 ID 覆盖，直到循环结束。这意味着 localStorage 项的最终值将始终是 for 循环中的最后一条推文 ID。因此，这两个值永远不会匹配，导致它总是进入“if”语句。

感谢@hodaya 的回答，JSON 对象的值在与 localStorage 项目进行比较之前也必须转换为字符串。这是因为 localStorage 仅将值存储为字符串。从@hodaya的回答中给出的例子；'JSON.stringify' 用于将数组转换为 JSON 字符串，而 'JSON.parse' 用于将 JSON 字符串转换回数组。资料来源：[微软](http://msdn.microsoft.com/en-us/library/ie/cc836466%28v=vs.94%29.aspx)。因此，这些答案都没有自行解决问题。

回答：

JSON 对象的值必须转换为字符串。必须包含一个计数器，以使新的 localStorage 项对于“for”循环中的每次迭代都是唯一的。

```
r=0;

for(i=0;i<tweets.length;i++){

    //must have a counter added to each localStorage item to make it unique.                                   
    r+=1;

    //transforming the JSON id_str into a JavaScript object.
    tweetID = jQuery.parseJSON(tweets[i][0].id_str);

    //tweetID is now an integer value

    //converting it to a string ready for localStorage.
    tweetIdString = tweetID.toString();

    if(tweetIdString != localStorage['tweet_id' + r]){ 

      alert("new tweet");
      localStorage['tweet_id' + r] = tweetIdString;  
      console.log(localStorage['tweet_id' + r]);
   }
} 
```

嘿，快！

# c# - 获取我的实际 DNS

> ID：15461379
> 
> 赞同：2
> 
> 时间：2013-03-17T13:40:45.417
> 
> 标签：c#, dns

我有这个改变DNS的功能：

```
/**
 * Change dns
 * 
 * @param bool
 */

private void changeDns(bool develop)
{
    ManagementClass mClass = new ManagementClass("Win32_NetworkAdapterConfiguration");
    ManagementObjectCollection mObjCol = mClass.GetInstances();

    foreach (ManagementObject mObj in mObjCol)
    {
        if ((bool) mObj["IPEnabled"])
        {
            ManagementBaseObject mboDNS = mObj.GetMethodParameters("SetDNSServerSearchOrder");

            if (mboDNS != null)
            {
                if (develop == true)
                {
                    // Set dns
                    mboDNS["DNSServerSearchOrder"] = this.dnsServer;

                    // Log info
                    foreach (String dns in this.dnsServer) {

                        this.addLog(dns, "DNS servers change to:", Color.Green);

                    }
                }
                else
                {
                    // Set dns
                    mboDNS["DNSServerSearchOrder"] = null;

                    // Log info
                    this.addLog("DHCP", "DNS servers change to:", Color.Green);
                }

                // Change dns
                mObj.InvokeMethod("SetDNSServerSearchOrder", mboDNS, null);
            }
        }
    }
} 
```

但现在我需要另一种方式。win32如何获取dns？

[我从 MSDN](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipinterfaceproperties.dnsaddresses.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)尝试了这段代码，但它返回了大约 10 个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:53:59.473

答案是：

```
 NetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces();
    foreach (NetworkInterface ni in nics)
    {
        if (ni.OperationalStatus == OperationalStatus.Up)
        {
            IPAddressCollection ips = ni.GetIPProperties().DnsAddresses;
            foreach (System.Net.IPAddress ip in ips)
            {
                MessageBox.Show(ip.ToString());
            }
        }
    } 
```

# cucumber - Cucumber 支持在 Aptana Studio 3.3.2 中不起作用

> ID：15461381
> 
> 赞同：1
> 
> 时间：2013-03-17T13:40:54.093
> 
> 标签：cucumber, aptana

我最近开始在我的 Rails 项目中使用 Cucumber，我注意到在 Aptana Studio 中有两件事情是 bot 工作的。

1.  似乎没有编辑器支持 .feature 文件来提供语法着色。当我转到 Preferences->General->File Associations 时，我可以为 .feature 创建一个关联，但没有 Cucumber 的内部编辑器将它与之关联。

2.  所有命令都在 Commands->Cucumber 下禁用，例如 Feature/Scenario 等。

黄瓜卢布安装在与其他正在工作的卢布（ruby、sass 等）相同的文件夹中。是否有安装或配置启用或我必须做的事情才能在我的 Rails 项目中激活 Cucumber。

请注意，黄瓜轨是我项目的 Gemfile 中已安装的 gem。

所以，总而言之... 1) 我如何让编辑器识别 Cucumber 语法 2) 我需要做什么才能在 Aptana Studio 中使用 Cucumber 命令？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T20:22:47.673

将其（默认情况下）与文本编辑器 (Studio) 关联并启用命令。

如果这对你有用，请回复。

问候安德烈。

# spring - Spring MVC 验证

> ID：15461385
> 
> 赞同：0
> 
> 时间：2013-03-17T13:41:02.087
> 
> 标签：spring, validation, jakarta-ee, servlets, spring-mvc

我在 [这里] 提供了一个问题：[Spring MVC 表单验证](https://stackoverflow.com/questions/15448481/spring-mvc-form-validation/15459247?noredirect=1#comment21876600_15459247)，但不幸的是我无法完全解决问题！
我的问题是，当我向表单（选择元素）提交错误的值时，就会出现 Spring 的默认错误：

> 无法将 java.lang.String 类型的属性值转换为属性状态所需的类型 tm.sys.validator.AgentState；嵌套异常是 org.springframework.core.convert.ConversionFailedException: 无法从 type java.lang.String 转换为 type @javax.validation.constraints.NotNull tm.sys.validator.AgentState for value ACTIVE3; 嵌套异常是 java.lang.IllegalArgumentException: No enum constant tm.sys.validator.AgentState.ACTIVE3

我如何制作我的自定义处理程序消息，因为这个消息太奇怪了，我的客户可能会滥用它。

请注意，我也使用了一些验证器，并且我还检查了 BindingResult 方法，但我找不到一个设置器来覆盖消息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:48:10.323

通过使用 typeMismatch 我解决了这个问题：这是我用来理解 typeMismatch 概念的示例：[http ://www.raistudies.com/spring/spring-mvc/form-processing-spring-mvc-3-annotation](http://www.raistudies.com/spring/spring-mvc/form-processing-spring-mvc-3-annotation)

# javascript - 变量属性的继承

> ID：15461394
> 
> 赞同：2
> 
> 时间：2013-03-17T13:41:57.037
> 
> 标签：javascript, inheritance

来自 codeacademy 的练习：

```
function Penguin(name) {
    this.name = "Pingy";
    this.numLegs = 2;
}

// create your Emperor class here and make it inherit from Penguin
function Emperor (name){
    this.name = name;
}
Emperor.prototype = new Penguin();
var emp = new Emperor("Empy"); 
```

所以我`Emperor`从 继承属性`Penguin`，现在我知道那`emp.numLegs`将是 2。

阅读评论后，我编辑了问题：如您所见，我在创建时给了一个名称`emp`，并且`emp.name`确实是我的新 emp 的名称，即“Empy”。但是`name`继承自 Penguin 类的构造函数呢？它去哪儿了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T14:03:44.857

Codecademy 是初学者学习 JavaScript 的好方法。学习任何编程语言都需要练习，而 Codecademy 让你练习。

但是，有时您需要超越实践的范围并学习一些理论。阅读以下答案。它很好地解释了 JavaScript 中的原型继承：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

现在您有一个`Penguin`构造函数，如下所示：

```
function Penguin(name) {
    this.name = name;
    this.numLegs = 2;
} 
```

然后你创建一个`Emperor`继承自的构造函数`Penguin`：

```
function Emperor(name) {
    this.name = name;
}

Emperor.prototype = new Penguin(); 
```

请注意，您正在创建一个实例`Penguin`并将其分配给`Emperor.prototype`. 因此：

1.  `Emperor.prototype.name = undefined`- 这是因为您没有将任何内容传递`name`给`Penguin`构造函数。如果我写了，`Emperor.prototype = new Penguin("Empy")`那`Emperor.prototype.name`就是`"Empy"`。
2.  `Emperor.prototype.numLegs = 2`- 明显地。

现在，当您按如下方式创建新的时`Emperor`，您需要为构造函数命名（请记住，您是作为名称继承的）`undefined`。`Penguin`因此：

```
var emp = new Emperor("Empy"); 
```

**那是老派的方法。**

如今，JavaScript 程序员使用`Object.create`并`call`从另一个构造函数继承。让我用一个例子来解释：

```
function Emperor(name) {
    Penguin.call(this, name);
}

Emperor.prototype = Object.create(Penguin.prototype);
Emperor.prototype.constructor = Emperor; 
```

与老式方法相比，这种方法有几个优点：

1.  我们继承了using的原型成员，而不是创建`Penguin`using的新实例`new Penguin()`并且不向其传递任何参数。这还可以防止在派生构造函数被实际调用之前对基构造函数进行不必要的初始化。`Penguin``Object.create(Penguin.prototype)`
2.  我们没有再次编写`this.name = name`派生构造函数，而是使用`Penguin.call(this, name)`它为我们调用基构造函数。这种模式称为 mixin，如果需要在运行时初始化基本构造函数或需要维护自己的状态信息，则该模式非常有用。

请注意，我们还添加了一个附加语句`Emperor.prototype.constructor = Emperor`。这是因为`prototype`它是一个非常特殊的属性，存在于所有函数中。它指向一个具有非常特殊`constructor`属性的对象，该属性指向函数本身。通过设置`Emperor.prototype`别的东西，我们失去了这个属性。因此我们再次设置它。

这两个示例中的净效果是相同的。然而，对于更复杂的代码，使用新方法要好得多。快乐学习 JavaScript。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T13:45:30.597

我假设您想知道为什么必须在构造函数中和构造函数内部提供`name`参数。`Emperor``this.name = name;`

JavaScript 中的原型继承非常简单，没有隐藏的魔法。`Emperor`您在和之间提供的唯一连接`Penguin`是在这一行：

```
Emperor.prototype = new Penguin(); 
```

`Emperor.prototype`现在是 的一个实例`Penguin`，但它可以是**任何对象**。该*函数* `Emperor`对该函数一无所知`Penguin`，因此它不会神奇地调用`Penguin`。

当你用 调用函数 ( `Func`) 时`new`，它所做的只是创建一个新的空对象，其原型是函数`prototype`属性 ( `Func.prototype`)。该对象将成为`this`构造函数内部的值，如果没有返回其他对象，将隐式返回。

> 但是从 Penguin 类构造函数继承的名称呢？它去哪儿了？

它是每个实例的属性的一个属性，`Emperor.prototype`并被每个`Emperor`实例的`name`属性所遮蔽。

看看[我的回答](https://stackoverflow.com/questions/15040955/javascript-oop-and-prototypes-with-multiple-level-inheritance/15041274#15041274)，我在这里创建了一些很好的 ASCII 图表来解释实例和它们的原型之间的关系。

* * *

**注意：** `Emperor.prototype = new Penguin();`实际上不是建立继承的好方法。如果`Penguin` *需要* 参数会发生什么？什么会通过？

此时你其实并不想创建 的新实例`Penguin`，只想将`Penguin`'挂接`prototype`到原型链中。您可以通过以下方式轻松做到这一点`Object.create`：

```
Emperor.prototype = Object.create(Penguin.prototype);
Emperor.prototype.constructor = Emperor; 
```

但随后新`Emperor`对象将不再具有`numLegs`属性。这就是为什么您必须`Penguin`在每个新`Emperor`实例上调用 ，就像在其他语言中一样`super()`：

```
function Emperor (name){
    Penguin.call(this, name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T13:52:21.130

调用时`new Penguin()`，此方法将创建一个对象并返回该对象的原型。

在进行原型继承时，您唯一要做的就是`Penguin`首先创建一个新对象并将这些值放入`Emperor`. 现在，当您创建一个新`Emperor`对象时，原型已经设置为`Penguin`. 要覆盖这些，您需要在新的构造函数中再次设置它们。

JavaScript 中的继承与其他语言非常不同。

代码示例：

```
function Penguin(name) {
    this.name = name;
    this.legs = 2;
}

function Emperor(name) {
    this.name = name;
}
Emperor.prototype = new Penguin();
/**
 * The prototype of Emperor now contains:
 * 
       {
           "name": undefined,
           "legs": 2
       }
 * 
 * Because you didn't add an argument to the constructor of `Penguin`
 */

var e = new Emperor('foo');
// The name property will get overriden with 'foo' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T13:53:32.967

该`Penguin`对象在创建时也需要将名称传递给`name`参数。因此，当您创建类型的新对象时，`Penguin`您必须传递名称。同样，由于`Emperor`继承自`Penguin`对象，因此您必须在构造函数中传递值，以便如果您希望执行与基类中发生的处理不同的处理，`Penguin`您可以在子类构造函数中定义它。但`Emperor`可以是任何类型的对象对象，因为它没有关于定义的信息`Penguin`。

如果在“Emperor”类的定义中删除该行

```
 this.name = name; 
```

然后你可以在构造函数中传递任何变量，仍然得到超级构造函数中定义的值“Pingy”

如果您添加该行

```
 Penguin.call(this, name) ;// As to call super class instance 
```

然后你得到正确传递给新对象的值`numLegs`as 2

# python - makedirs() 后对其他应用程序的权限被拒绝

> ID：15461404
> 
> 赞同：0
> 
> 时间：2013-03-17T13:42:40.060
> 
> 标签：python, python-2.7

当我在创建这样的文件夹的服务器上运行 Python 应用程序时

```
 if not os.path.exists(destinationPath):
        os.makedirs(destinationPath, 777) 
```

我有一个客户端应用程序（也在 Python 中）使用[Paramiko 模块](http://www.lag.net/paramiko/)通过 SFTP 将文件上传到服务器。如果需要，客户端还会像这样在服务器上创建文件夹

```
 makeCommand = 'mkdir -p "' + remotePath + '"'
        ssh.exec_command(makeCommand) 
```

这很好用。我遇到的问题是，如果服务器应用程序创建一个文件夹，则客户端无权访问该文件夹（无法上传到该文件夹​​或创建子文件夹）。我收到以下错误

```
 line 104, in upload
ftMan.sftp.put(localFile, remoteFile)
File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 565, in put
File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 245, in open
File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 635, in _request
File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 682, in _read_response
File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 710, in _convert_status
IOError: [Errno 13] Permission denied 
```

如何让每个应用程序创建另一个也可以使用的文件夹？我已经尝试设置权限（如您在上面服务器的第一段代码中所见），但这似乎不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:35:19.363

[我在这里](https://stackoverflow.com/questions/5231901/permission-problems-when-creating-a-dir-with-os-makedirs-python)发现了一个类似的问题，结果发现在某些系统上模式参数`os.makedirs()`被忽略了。你需要使用`os.chmod`来解决这个问题。对于创建的文件夹，我现在正在做

```
 for dirpath, dirnames, filenames in os.walk(theDirectory):
        os.chmod(dirpath, 0777) 
```

偶尔更改已创建文件夹中的所有权限。这已经解决了问题，客户端应用程序可以与服务器应用程序创建的文件夹进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:47:42.223

的文档`os.makedirs`说：

> 默认模式为 0777（八进制）。

您正在传递 777，这是一个完全不同的数字，因为没有前导 0 来表示八进制。您可能根本不应该通过该模式，并让它使用默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T00:50:18.677

听起来您忘记设置[umask](http://en.wikipedia.org/wiki/Umask)。试试这个：

`os.umask(0)`

*在*您拨打任何涉及模式的电话之前。

# java - 将 Floyd-Warshall 限制为路径长度 k

> ID：15461405
> 
> 赞同：1
> 
> 时间：2013-03-17T13:42:40.910
> 
> 标签：java, algorithm, graph-algorithm, floyd-warshall

我正在实施[Floyd-Warshall 算法](http://algowiki.net/wiki/index.php?title=Floyd-Warshall%27s_algorithm)。

我有大约 50 个节点的完整图，我想找到所有节点之间的最大路径。算法返回的路径可以是任何长度 1< x<50，我需要这个长度最多为 3-4 条边长，我该如何更改算法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T00:02:41.097

令`w(i,j)`为从*i*到*j*的权重。然后你可以计算

```
def shortest(w1, w2):
  w12 = a new V x V matrix
  for i in V:
    for j in V:
      w12(i, j) = w1(i, j)
      for k in V:
        if w12(i, j) > w1(i, k) + w2(k, j):
          w12(i, j) = w1(i, k) + w2(k, j)
  return w12

w2 = shortest(w, w)
w3 = shortest(w2, w)
w4 = shortest(w2, w2) 
```

最后，`w4`将包含每对从开始到结束的距离，最多使用 4 条边，对于`w3`. 请注意，您可以`w4`在不`w3`先计算的情况下进行计算。使用这种形式的二值化，即计算和组合所有的二次方矩阵，您可以实现 O(n³ log k) 的时间复杂度，即最大路径长度仅为对数。

维基百科有一篇关于上述算法的短文。它的标题是“<a href="https://en.wikipedia.org/wiki/Min-plus_matrix_multiplication" rel="nofollow">min-plus 矩阵乘法”。也许与该术语或替代术语“距离乘积”相关的一些参考资料将导致有关可能实现的更多信息。例如，有一篇论文《<a href="http://www.research.ibm.com/trl/people/yanagis/papers/RT0932.pdf" rel="nofollow">faster funny matrix multiplication for the all -pairs shortest paths problem”，其中讨论了这个问题，给出了一些算法，并考虑了 SIMD 的实现。

# ios - 制作一种将通用图层添加到场景的方法

> ID：15461408
> 
> 赞同：-1
> 
> 时间：2013-03-17T13:42:59.237
> 
> 标签：ios, background, cocos2d-iphone, scroll

我为我的游戏制作了背景，每个背景都在各自的图层类中。我还创建了每个不同层的枚举。我想制作一种方法，允许我为场景创建背景层（一般）的实例。这背后的想法是我希望能够拥有背景实例，这样我就可以滚动浏览不同的类型。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:47:51.470

你的意思是有一个用于构建图层或场景的工厂类？如果这不是你的意思，试着更好地表达你的问题，因为不是很清楚

SceneFactory 可以有类似的东西

```
- (CCScene *) sceneOfType:(enum SceneType) type {
   switch(type){
       case type1:
           return [[Scene1 alloc] init];
       case type2:
           return [[Scene2 alloc] init];
   }           
} 
```

# php - 一些想法如何个性化 Wordpress 文章内容区域，如本博客中所述？

> ID：15461412
> 
> 赞同：-1
> 
> 时间：2013-03-17T13:43:10.530
> 
> 标签：php, wordpress, wordpress-theming

我是 WordPress 世界的新手，我来自 Joomla，拥有完全不同的内容管理逻辑......

我想创建一个与此类似的博客（这是使用 WP 制作的）：

[http://viralpatel.net/blogs/](http://viralpatel.net/blogs/)

我的疑问与文章预览在主页中的显示方式有关：如您所见，文章在模板的两列中呈现（这不是问题......我可以使用浮动 CSS 属性使用两个对齐的 div）但我没有不知道如何将文章预览显示为此博客。

对于每篇文章我需要显示的主页：

1.  文章的标题。
2.  简短介绍（文章正文采用固定数量的单词或字符）
3.  一个图片拇指（如果它存在于文章中，例如文章的第一张图片）

使用 Joomla，我可以将实现此功能的模块放入模板的内容区域，但我认为要理解这一点，使用 Word Press，我必须使用一些 PHP 行来实现此演示逻辑

你知道怎么做吗？

Tnx 这么多

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:42:39.460

如果您不熟悉该平台，通常您会找到一个与您想要完成的目标相匹配的主题。这是我为您的网站选择的方向的一个快速示例。

[http://wordpress.org/extend/themes/pure-line](http://wordpress.org/extend/themes/pure-line)

[http://wordpress.org/extend/themes/magazine-basic](http://wordpress.org/extend/themes/magazine-basic)

[http://wordpress.org/extend/themes/sampression-lite](http://wordpress.org/extend/themes/sampression-lite)

从这一点开始，您只需要查看帖子的传输方式和显示方式即可。有许多循环可以帮助完成您想要的事情，这里是 wordpress 编码部分的参考链接，也称为 codex：[http ://codex.wordpress.org/](http://codex.wordpress.org/)

我会使用的一些项目组合是

图片

获取附件图片：[http ://codex.wordpress.org/Function_Reference/wp_get_attachment_image](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image)

帖子 - 标题

获取帖子：[http ://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

“简短介绍”

获取摘录：[http ://codex.wordpress.org/Excerpt](http://codex.wordpress.org/Excerpt)

# python - 如何在2个线程之间共享一个变量

> ID：15461413
> 
> 赞同：12
> 
> 时间：2013-03-17T13:43:31.167
> 
> 标签：python, multithreading, variables, thread-safety

^(在 Windows 上使用 Python 2.7.3。)

如何`num`在线程之间共享变量，以便在`num`平方后打印？

我意识到我需要了解线程是如何工作的，但是文档没有太多，我也没有在这里找到任何东西。
那么，有人可以解释线程如何工作以及如何在 2 个线程之间共享变量吗？

我的代码（继续打印`2`）

```
import threading
def func1(num):
    while num < 100000000:
        num =  num**2
def func2(num):
    while num < 100000000:
        print num,
num = 2
thread1 = threading.Thread(target=func1,args=(num,))
thread2 = threading.Thread(target=func2,args=(num,))
print 'setup'
thread1.start()
thread2.start() 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-17T13:58:12.550

这个问题的一般答案是队列：

```
import threading, queue

def func1(num, q):
    while num < 100000000:
        num =  num**2
        q.put(num)

def func2(num, q):
    while num < 100000000:
        num = q.get()
        print num,

num = 2
q = queue.Queue()
thread1 = threading.Thread(target=func1,args=(num,q))
thread2 = threading.Thread(target=func2,args=(num,q))
print 'setup'
thread1.start()
thread2.start() 
```

印刷

```
=== pu@pumbair:~/StackOverflow:507 > ./tst.py
setup
4 16 256 65536 4294967296 
```

请注意，在此（和您的）代码中，num 是 func1 和 func2 中的局部变量，它们彼此没有任何关系，只是它们接收全局变量 num 的初始值。所以这里*不*共享 num 。相反，一个线程将其 num 的值放入队列，另一个线程将此值绑定到同名的本地（因此不同）变量。但它当然可以使用任何名称。

# php - 如何将 PHP 数组分配给 jQuery 数组？

> ID：15461417
> 
> 赞同：19
> 
> 时间：2013-03-17T13:44:05.317
> 
> 标签：php, javascript, jquery, arrays

我无法弄清楚如何将`PHP`数组分配给`jQuery`数组？

我想做如下的事情：

```
var jQueryArray = <?php $phpArray; ?>; 
```

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-17T13:45:56.437

使用[json 编码](http://php.net/manual/en/function.json-encode.php)。

> json_encode — 返回值的 JSON 表示

**例子：**

```
var arrayFromPHP = <?php echo json_encode($arr); ?>; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-17T13:45:54.867

您需要使用[json_encode](http://php.net/manual/en/function.json-encode.php)

```
var jQueryArray = <?php echo json_encode($phpArray); ?>; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-17T13:45:57.887

您可以使用以下[`json_encode`](http://php.net/manual/en/function.json-encode.php)功能：

```
var jQueryArray = <?php echo json_encode($phpArray); ?>; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-17T13:46:06.740

您可以使用 json_encode

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);
?> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-17T13:58:40.603

不要忘记 PHP json_encode 只适用于 UTF8 编码的文本......

```
$jsonString = json_encode(array_map(utf8_encode, $rawArray)); 
```

would be a more universal solution I think, but I'm a bit tired so 'scuse any coding gaffs ...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-17T13:47:49.433

它不会是一个 JQuery 数组，它是一个 javascript 数组（只是为了澄清，因为听起来你可能是一个菜鸟）。将您的 JS 数组设置为：

```
<?php echo json_encode($phpArray);?> 
```

请参阅 php json_encode 文档： [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-17T13:48:52.497

您可以在 HTML 文件中使用 Json 或使用 foreach

```
<?php foreach($phpArray as $key => $val): ?>
      jQueryArray[<?php echo $key; ?>] = <?php echo $val; ?>
<?php endforeach; ?> 
```

# java - apache wink getjson 无法获取 json 对象

> ID：15461420
> 
> 赞同：0
> 
> 时间：2013-03-17T13:44:32.797
> 
> 标签：java, apache, rest, jax-rs, apache-wink

我用 wink 写了一个简单的 RESTful Web 服务，其中有一个返回 JSONARRAY 的接口。我可以通过直接在浏览器中输入地址来获取json。然后，我开发了一个html页面，使用jquery的$.getJSON来调用web服务，但是在调试中我看到调用了服务方法，但是客户端页面无法获取json数据，怎么会呢？这是服务器上的方法：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public JSONArray getAllBook(){

    JSONArray result = new JSONArray();

    Collection<Book> books = BookStore.getInstance().getBooks();

    for(Book book : books){
        try{
                result.put(BookStore.createJSONObject(book));

        }catch(JSONException e){
            e.printStackTrace();
        }
    }

    return result;
} 
```

这是js代码：

```
var url = "http://localhost:8080/WinkExBookLib/rest/book";
$.getJSON(url,function(data){
alter("aaa");
alter(data);
}); 
```

# python - Python：对日期时间范围间隔的操作

> ID：15461429
> 
> 赞同：0
> 
> 时间：2013-03-17T13:45:15.053
> 
> 标签：python, datetime

我有以下形式的时间数据：[ (from , to) , (.. , ..) , ..]

`[('16:35', '16:10'), ('18:45', '18:15'), ('19:14', '12:15'), ('10:36', '00:10'), ('21:08', '13:40'), ('22:20', '06:10'), ('03:20', '16:40'), ('23:56', '12:10'), ('00:16', '21:30'),`

我需要执行操作，例如如果时间范围在 > 23:00 和时间 < 01:15 的范围内，那么我需要标记它。就像，在 (21:00, 23:33) 的情况下，它应该标记。而且，在 (02:00, 06:00) 的情况下，它不应该标记。午夜场景也应该得到照顾。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:03:31.163

我会编写一个函数来检查给定的元组是否在您的范围内，然后使用列表理解，例如

`flagged = [x for x in myList if inMyRange(x)]`

获取所有标记范围的列表。或者对理解本身中的标记项执行操作

`operated = [myOperation(x) for x in myList if inMyRange(x)]`

# c++ - 未能释放 Direct3D 设备“或”对应的上下文

> ID：15461445
> 
> 赞同：4
> 
> 时间：2013-03-17T13:46:25.833
> 
> 标签：c++, com, directx, direct3d

是的，它实际上是**“或”**。我会解释的。我正在为自己开发帮助类，比如 DirectXToolKit。为了管理 COM，我正在使用**Microsoft::WRL::ComPtr< *T* >** *(wrl.h)*。

```
struct Renderer
{
    ComPtr<ID3D11Device> m_Device;
    ComPtr<ID3D11DeviceContext> m_ImmContext;
} 
```

当所有资源都被销毁时，上面结构的实例也应该被销毁，但是在调用 dtor 之后，我在**Microsoft::WRL::ComPtr< *T* >**尝试释放设备时触发了错误或上下文。

我已经实现了手动释放 m_Device 和 m_ImmContext 的 dtor，但不幸的是，我尝试释放的最后一个成员总是在函数中遇到问题

```
unsigned long InternalRelease() throw()
{
    unsigned long ref = 0;
    T* temp = ptr_;

    if (temp != nullptr)
    {
        ptr_ = nullptr;
        ref = temp->Release();
    }

    return ref;
} 
```

这里

```
ref = temp->Release(); 
```

当我首先成功释放设备时，上下文会触发错误，反之亦然（！是的，当其中一个成功释放时，第二个成员的销毁失败）。已经有像我这样的问题（[销毁 directx 设备和交换链](https://stackoverflow.com/questions/12538287/destroy-directx-device-and-swap-chain)），但是窗口和交换链已经被销毁，就像其他 dx 资源一样。不知道为什么会这样。有任何想法吗？

对不起我不完美的英语：3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:03:28.827

我已经解决了这个问题。问题是我对**std::shared_ptr**的理解不够好（实际上是函数**std::make_shared （**[关于共享指针及其分配](http://en.cppreference.com/w/cpp/memory/shared_ptr)））：

我创建了如下指针：

```
Obj *ObjPtr = new Obj(); 
```

然后只是：

```
SomeOtherState.SharedObj = std::make_shared<Obj>(*ObjPtr); 
```

之后并没有销毁**ObjPtr**。*在SomeOtherState被销毁后，* **ObjPtr**指向的数据仍在内存中（据我所知，如果我使用了 std::shared_ptr ctor，问题应该也消失了）。

 *很可能是因为这个内存泄漏，但我改变了另一件事：**CoUninitialize**调用是在最后一个 COM 指针被销毁之前进行的，但来自[MSDN：CoUninitialize](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688715%28v=vs.85%29.aspx)很重要（实际上来自第一段）：

> 关闭当前线程上的 COM 库，卸载线程加载的所有 DLL，释放线程维护的任何其他资源，并强制关闭线程上的所有 RPC 连接。

所以我已经相应地替换了**CoInitialize**和**CoUninitialize**并且问题已经消失了。如果有人遇到同样的麻烦，这可能是一个解决方案（我所做的第一个和第二个更改中的一个或两个）。

*我可能应该为我的问题添加“com”标签*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:20:14.683

当您获得 ImmediateContext 时，问题可能出在某个地方。根据文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff476529%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476529%28v=vs.85%29.aspx)

```
The GetImmediateContext method increments the reference count of the immediate
context by one. Therefore, you must call Release on the returned interface pointer
when you are done with it to avoid a memory leak. 
```

所以我>>>猜<<<您忘记在某处释放上下文，因此设备发布随后失败。

顺便说一句：还要确保资源总是以相反的顺序释放。*

# javascript - 使用自有服务器在 Ebay 上进行 Google Analytics（分析）

> ID：15461446
> 
> 赞同：1
> 
> 时间：2013-03-17T13:46:33.240
> 
> 标签：javascript, google-analytics, customization

我有一家 ebay 商店，我想使用 Google 分析来跟踪所有内容。我还有一个网站可以充当这两种服务之间的桥梁，因为我知道 ebay 不允许使用任何类型的 javascript。是否足以在我的网站上放置图像，通过分析对其进行跟踪，并从 ebay 拍卖页面链接图像？或者你有更好的解决方案吗？我不想使用第三方付费服务，因为它们对我的需求来说太过分了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:18:02.767

您可以在网站上包含对 google 跟踪图像的引用（请参阅[http://code.google.com/p/google-analytics-js/](http://code.google.com/p/google-analytics-js/)），但除非您可以自定义图像请求的参数，否则您将丢失一些分析功能。

如果您确实有第二台服务器，那么您可以通过 img src 在您的 eBay 站点上添加对远程托管 javascript 的引用 - 然后 javascript 可以像上面的分析示例中那样运行，并将单个像素图像返回到您的 eBay 页面

这不会是一个完整的解决方案，因为页面中没有 JS，一些分析功能将无法将数据提供回服务，但是（提供 eBay 的“清理”）允许图像标签上的 js 源至少会获得并发用户和位置等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T00:21:56.647

如果您在自己的服务器上运行 PHP，则可以使用 PHP hack。有一个将标题设置为图像类型的 PHP 脚本：`header('Content-type:image/png');`. 该 PHP 脚本将提供可用于 img 标记的图像，但您也可以使用 PHP 处理一些简单的访问分析。您的 img 将如下所示：

`<img src='http://www.yoursite.com/trickyimage.php' />`

# jquery - SyntaxError: 在属性列表 jquery 之后缺少 }

> ID：15461451
> 
> 赞同：-2
> 
> 时间：2013-03-17T13:47:10.103
> 
> 标签：jquery

我的 jQuery 代码之前运行良好。但是现在它**在属性列表 jquery 之后给出错误 SyntaxError: missing }**

我在 SO 上看到了很多问题，并多次检查了我的代码，但无法找到错误，所以请帮助我在以下代码中找到错误。

```
 $("#savedata").click(function () {
     var var1 = $('#email').val();
     var var2 = $('#password').val();
     var var3 = $('#name').val();
     var var4 = $('#organization').val();
     $.ajax({
         type: "POST",
         url: "savedata",
         data: {
             var1: var1,
             var2: var2,
             var3: var3,
             var4: var4
         },
         success: function (resp) {
             alert('Registration Successful');
         }
     });

     return false;
 }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T13:50:19.190

所以，你有很多错字。

正确的语法是：

```
 $("#savedata").click(function () {
     var var1 = $('#email').val();
     var var2 = $('#password').val();
     var var3 = $('#name').val();
     var var4 = $('#organization').val();
     $.ajax({
         type: "POST",
         url: "savedata",
         data: {
             var1: var1,
             var2: var2,
             var3: var3,
             var4: var4
         },
         success: function (resp) {
             alert('Registration Successful');
         }
     });

     return false;
 }); 
```

# python - 为什么 PYTHONPATH 被忽略？

> ID：15461452
> 
> 赞同：1
> 
> 时间：2013-03-17T13:47:18.093
> 
> 标签：python

我将 PYTHONPATH 设置为包含一些 .py 文件的目录。

当我进入 python 并键入“导入文件”时，找不到该文件（它说“没有名为 wsj10 的模块”）。

但是，如果我 cd 到该目录，并重复相同的过程，则找到该文件。

我只是不确定为什么 PYTHONPATH 被忽略了。我遵循了某些软件安装说明中的确切说明，所以我知道我在做正确的事情。

在任何情况下 PYTHONPATH 将被忽略或导入不起作用？

谢谢。

在下面的评论之后，这是一个成绩单：

1.  将 file1.tgz 解压到 file1/。file1.tgz 包含一个名为 file1.py 的库/文件。

2.  在外壳中输入：

    ```
    export PYTHONPATH=`pwd`/file1/:./ 
    ```

3.  `echo $PYTHONPATH`显示变量已设置。

4.  运行python并输入“import file1”

我得到错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named file1 
```

如果我先执行“cd file1”然后导入 file1，它会识别文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T13:47:35.980

> 在任何情况下 PYTHONPATH 将被忽略或导入不起作用？

是的。我已经在我的 /home/me/.bashrc 中设置了 PYTHONPATH 并且在终端上一切正常，但是当带有 mod_wsgi 的 Apache 启动我的 python 脚本时，它在 sysem 或专用用户下运行，它对我的​​ .bashrc 一无所知。

对于这种特殊情况，我只是使用 apache config 为 apache 设置 python 路径（WSGIPythonPath 选项）。

# iphone - 如何检查在Objective C中初始化的对象是什么类

> ID：15461453
> 
> 赞同：0
> 
> 时间：2013-03-17T13:47:25.173
> 
> 标签：iphone, ios, objective-c, xcode, nsobject

是否可以检查并获取初始化对象的类的名称？

示例：我有 A 类。我使用`[[ABOBject alloc] init];`实例方法创建了对象 ABObject。

如何找出创建实例 ABObject 的类，即此处的“A”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:06:54.290

对象可以在类的上下文之外创建，因此将其作为内置语言功能是没有意义的。

如果您必须这样做，解决它的一种方法是在实例化任何此类对象后立即使用该`objc_setAssociatedObjects()`函数。`objc/runtime.h`就像是：

```
ABObject *object = [[ABObject alloc] init];
objc_setAssociatedObject(object, @"InstantiatingClassKey", [self class], OBJC_ASSOCIATION_ASSIGN); 
```

然后你可以得到它`objc_getAssociatedObject(object, @"InstantiatingClassKey")`。

我认为你最好重新评估你的设计，因为这不会特别容易维护。即使将其提取到一个类别中`NSObject`以删除重复的代码，您仍然需要额外的步骤来记住对象之间的奇怪关系。

此外，正如 Martin R. 在评论中指出的那样，我正在采用快捷方式并将字符串文字作为函数的关键参数传递，实际上您希望遵循使用某些静态或全局地址的做法多变的。

# neo4j - Web界面neo4j嵌入式远程不工作

> ID：15461454
> 
> 赞同：1
> 
> 时间：2013-03-17T13:47:38.987
> 
> 标签：neo4j, remote-access, spring-data, web-admin

我在远程 Linux 服务器上以嵌入式模式运行 Neo4j ...除了能够连接到 Web 界面 /host:7474/webadmin/ 之外，一切都运行良好

使用 Neo4j 1.8.2 主要稳定版

相关POM工件：

```
 <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j</artifactId>
        <version>2.2.0.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>slf4j-log4j12</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
            <exclusion>
                <artifactId>slf4j-api</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>
 <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <version>1.8.2</version>
        <exclusions>
            <exclusion>
                <artifactId>logback-classic</artifactId>
                <groupId>ch.qos.logback</groupId>
            </exclusion>
            <exclusion>
                <artifactId>servlet-api</artifactId>
                <groupId>org.mortbay.jetty</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <version>1.8.2</version>
        <exclusions>
            <exclusion>
                <artifactId>logback-classic</artifactId>
                <groupId>ch.qos.logback</groupId>
            </exclusion>
        </exclusions>
        <classifier>static-web</classifier>
    </dependency> 
```

Neo4j 配置 XML 文件：

```
<context:annotation-config />
<context:spring-configured />

<bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase">
    <constructor-arg value="#{props['neo4j.location']}" />

    <constructor-arg>
        <map>
            <entry key="enable_remote_shell" value="true" />
        </map>
    </constructor-arg>
</bean>

<neo4j:config graphDatabaseService="graphDatabaseService" />
<bean id="serverWrapper" class="org.neo4j.server.WrappingNeoServerBootstrapper"
    init-method="start" destroy-method="stop">
    <constructor-arg ref="graphDatabaseService" />
</bean>

<tx:annotation-driven mode="aspectj"
    transaction-manager="transactionManager" />

<neo4j:repositories base-package="com.writelife.server.graph.repository"
    repository-impl-postfix="CustomImpl" /> 
```

neo4j-server.properties 文件：

```
# location of the database directory 
org.neo4j.server.database.location=data/graph.db

org.neo4j.server.webserver.address=0.0.0.0

org.neo4j.server.webserver.port=7474

# Turn https-support on/off
org.neo4j.server.webserver.https.enabled=true

# https port (for all data, administrative, and UI access)
org.neo4j.server.webserver.https.port=7473

# Certificate location (auto generated if the file does not exist)
org.neo4j.server.webserver.https.cert.location=conf/ssl/snakeoil.cert

# Private key location (auto generated if the file does not exist)
org.neo4j.server.webserver.https.key.location=conf/ssl/snakeoil.key

org.neo4j.server.webserver.https.keystore.location=data/keystore

org.neo4j.server.webadmin.rrdb.location=data/rrd

org.neo4j.server.webadmin.data.uri=/db/data/

# REST endpoint of the administration API (used by Webadmin)
org.neo4j.server.webadmin.management.uri=/db/manage/

# Low-level graph engine tuning file
org.neo4j.server.db.tuning.properties=conf/neo4j.properties

org.neo4j.server.http.log.enabled=false 

org.neo4j.server.http.log.config=conf/neo4j-http-logging.xml 
```

文件系统上的数据库位置：

**/opt/neo4j-community-1.8.2/data/graph.db**

有人可以解释一下我做错了什么吗？我如何在该咨询中监控 Web 界面？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:24:44.907

您是否按照此处的说明进行操作？

[http://docs.neo4j.org/chunked/stable/server-embedded.html](http://docs.neo4j.org/chunked/stable/server-embedded.html)

我认为没有使用 neo4j-server.properties。您传递给图形数据库的属性仅用于数据库，而不用于最重要的 web-ui / http-server。

我认为您可以将它们传递给`WrappingNeoServerBootstrapper`

似乎正在使用[Server-Configurator](http://docs.neo4j.org/chunked/stable/server-embedded.html#_providing_custom_configuration)。还有一个基于属性文件的服务器配置器，它在其构造函数中将文件作为对象`PropertyFileConfigurator`传递。`neo4j-server.properties``File`

我认为您的 Maven 配置也错过了静态资源。

```
<dependencies>
  <dependency>
    <groupId>org.neo4j.app</groupId>
    <artifactId>neo4j-server</artifactId>
    <version>1.8.1</version>
  </dependency>
  <dependency>
    <groupId>org.neo4j.app</groupId>
    <artifactId>neo4j-server</artifactId>
    <classifier>static-web</classifier>
    <version>1.8.1</version>
  </dependency>
</dependencies>
<repositories>
  <repository>
    <id>neo4j-snapshot-repository</id>
    <name>Neo4j Maven 2 snapshot repository</name>
    <url>http://m2.neo4j.org/content/repositories/snapshots/</url>
    <releases>
      <enabled>false</enabled>
    </releases>
    <snapshots>
      <enabled>true</enabled>
    </snapshots>
  </repository>
</repositories> 
```

# mysql - 通过局域网共享Mysql数据库时关闭windows防火墙？

> ID：15461455
> 
> 赞同：1
> 
> 时间：2013-03-17T13:47:39.867
> 
> 标签：mysql, connection, lan

如果没有关闭防火墙：

ping IP 后会出现请求超时，但关闭防火墙后会回复。

为什么？

我正在将 Mysql 与 Java 一起使用，这个问题与 java 无关，但也许 java 程序员在共享数据库时遇到了类似的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:57:35.820

您的防火墙将阻止对端口 3306（MySQL 的默认端口）的访问。要让它在不关闭防火墙的情况下工作，您必须配置防火墙以允许连接到端口 3306（其他任何在您的 .config 中配置的端口`my.cnf`）通过。

# android - 从服务获取静态整数

> ID：15461461
> 
> 赞同：0
> 
> 时间：2013-03-17T13:47:54.160
> 
> 标签：android

我有活动和服务，我想获得对服务整数的引用，它会在服务中不时更新。我的问题是，在我的活动中，我只得到了第一个声明的整数值（例如 0）。

我的主要目标是在每次启动程序时了解服务的更新值。

主要活动：

```
if(Service.doesCounter>0){
                        //do something
                //in this state Service.doesCounter always is 0(checked by log)
        } 
```

服务：

```
public static int doesCounter=0; // declared after class as class memeber
//code where I start my method does();

.....
public void does(){
        doesCounter++;
        Log.e("cccccc","Service Counter "+doesCounter); // everything ok, value is changing as suppose to.
} 
```

**编辑**

我的共享首选项类：

```
public class AppPreferences extends PreferenceActivity {
      @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    private static final String APP_SHARED_PREFS = "com.aydabtu.BroadcastSMS_preferences"; //  Name of the file -.xml
         private SharedPreferences appSharedPrefs;
         private Editor prefsEditor;

         public AppPreferences(Context context)
         {
             this.appSharedPrefs = context.getSharedPreferences(APP_SHARED_PREFS, Activity.MODE_PRIVATE);
             this.prefsEditor = appSharedPrefs.edit();
         }

         public boolean getAnything() {
             return appSharedPrefs.getBoolean("Anything", false);

         }

         public void setAnything(Boolean text) {
             prefsEditor.putBoolean("Anything", text);
             prefsEditor.commit();
         } 
```

然后从主要活动：

```
public class MainActivity extends Activity {
    protected AppPreferences appPrefs;
appPrefs = new AppPreferences(getApplicationContext());
appPrefs.setAnything(fasle); 
```

然后从服务：

```
appPrefs = new AppPreferences(getApplicationContext()); 
```

当发生这种情况时，所有之前所做的更改都会被重置，如何让服务和 MainActivity 使用相同的首选项？也许我可以以某种方式使 AppPrefs 类静态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:03:59.600

在 android 中使用静态类字段被认为是一种不好的做法。您的应用程序的资源可能会被操作系统撤销，并且您的应用程序的另一个进程可能会在用户返回时重新初始化。在这种情况下，您将丢失 dosCounter 更新。我不知道是否是这种情况（它应该在您的应用程序处于前台的常见场景中工作，**除非您在另一个进程中运行您的服务**（使用标志[isolatedProcess](http://developer.android.com/guide/topics/manifest/service-element.html#isolated)）。

实现“android 方式”的最简单方法是将dosCounter 存储在SharedPreferences 中。

实现这一目标的一种方法是使用这样的静态类：

```
public class PrefUtils {
private final static String NUM_DOES = "NumDoes";

public static int getNumDoes(Context c)
{
    int mode = Activity.MODE_PRIVATE;
    SharedPreferences mySharedPreferences = c.getSharedPreferences(PREF_NAME, mode);        
    return mySharedPreferences.getInt(NUM_DOES, 0);
}

public static void setNumDoes(int numDoes , Context c)
{
    int mode = Activity.MODE_PRIVATE;
    SharedPreferences mySharedPreferences = c.getSharedPreferences(PREF_NAME, mode);        
    SharedPreferences.Editor editor = mySharedPreferences.edit();   
    editor.putInt(NUM_DOES, numDoes);
    editor.commit();

} 
```

你完成了。只需调用 PrefUtils.getNumDoes / setNumDoes

# ssh - 最佳方法端口转发/隧道

> ID：15461465
> 
> 赞同：0
> 
> 时间：2013-03-17T13:48:12.443
> 
> 标签：ssh, portforwarding

我想在两台机器之间使用服务器（没有静态 IP）。我知道的唯一 IP 是服务器的 IP 地址。我想构建/使用一个系统来侦听服务器内的 2 个不同端口，并且从 localhost:portA 接收到的任何内容都发送到 localhost:portB ，反之亦然。因此，两台机器（带有 java 应用程序）都可以通过中间的服务器进行通信。

请问什么是最好的解决方案。我正在使用 linux 系统，我想使用 SSH java API (hudson / ganymed-ssh-2) 来构建端口转发服务器应用程序。

一些问题： 1）确定传输到缓冲区读取的数据大小或不将其转发到其他端口。2）读/写字节的速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:54:21.073

您可以使用该[`ssh`](http://www.freebsd.org/cgi/man.cgi?query=ssh)程序。具体看一下`-L`and`-R`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:59:52.623

如果您可以使用 ssh 协议，则可以隧道本地或远程端口（这需要服务器端的支持）。您还可以考虑使用 OpenSSH VPN（查看[ssh](http://unixhelp.ed.ac.uk/CGI/man-cgi?ssh%201) -w 选项，这将创建一个真正的 VPN（需要 TUN/TAP 设备）。）。

# android - 由于活动被破坏，如何在长时间任务后与活动通信

> ID：15461466
> 
> 赞同：0
> 
> 时间：2013-03-17T13:48:30.327
> 
> 标签：android, android-activity, android-fragments

我创建了具有登录功能的简单应用程序。我创建了单独的任务，用于登录到名为的服务器`LoginTask`和一个名为的侦听器类`LoginListener`。

```
public interface LoginListener {
    public void onLoginComplete();
    public void onLoginFailure(String msg);
}

public class LoginTask extends AsyncTask<String, Void, Boolean>{
    private final LoginListener listener;
    private final Context c;
    private String msg;

    public LoginTask(final Context c, final LoginListener listener) {
        this.c = c;
        this.listener = listener;
    }

    @Override
    protected Boolean doInBackground(String... args) {
        // loging in to server
        //return true if success
    }

    @Override
    protected void onPostExecute(Boolean status) {
        if(!status){
            if(listener != null) listener.onLoginFailure(msg);
                return;
        }       

        // the problem is here, listener is null, because activity/fragment destroyed
        if(listener != null) listener.onLoginComplete();
    }
} 
```

我`LoginTask`从`LoginFragment`. `LoginFragment`工具`LoginListener`。_

```
public class LoginFragment extends Fragment implements LoginListener{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.frg_login, container, false);
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        doInitView();
    };

    private void doInitView(){
        Button loginButton = (Button) getActivity().findViewById(R.id.login_btn);
        Button regButton = (Button) getActivity().findViewById(R.id.toreg_btn);

        ButtonListener listener = new ButtonListener();
        loginButton.setOnClickListener(listener);
        regButton.setOnClickListener(listener);
    }

    private void doLogin(){
        Activity activity = getActivity();
        EditText emailText = (EditText)activity.findViewById(R.id.login_email);
        EditText pwdText = (EditText)activity.findViewById(R.id.login_pwd);

        String email = emailText.getText().toString().trim();
        String pwd = pwdText.getText().toString().trim();

        if(StringUtil.isAnyNull(email, pwd)){
            Popup.showMsg(getActivity(), "Silahkan lengkapi data", Popup.SHORT);
            return;
        }

        savedEmail = email;
        savedPwd = pwd;
        String url = getActivity().getResources().getString(R.string.url_login);
        Popup.showLoading(getActivity(), "Login", "Please wait...");
        LoginTask task = new LoginTask(getActivity(), this);
        task.execute(url, email, pwd);
    }

    private final class ButtonListener implements OnClickListener{

        @Override
        public void onClick(View v) {
            switch(v.getId()){
            case R.id.login_btn:
                doLogin();
                break;
            case R.id.toreg_btn:
                doToRegister();
                break;
            case R.id.demo_btn:
                doDemo();
                break;
            }
        }        
    }

    @Override
    public void onLoginComplete() {
        // getActivity() is null
        ((MainActivity)getActivity()).gotoMain();
    }

    @Override
    public void onLoginFailure(String msg) {

    }    
} 
```

由于登录任务需要时间，有时设备灯会在任务完成之前关闭，因此活动被破坏。这导致任务调用监听器（片段）失败。如何解决这个问题呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:03:00.740

`AsyncTask`应该用于需要更长时间并将结果返回到当前活动的任务。但是，它不适用于真正长时间运行的任务，也不适用于即使活动已被破坏也想要评估其结果的情况。

你可以考虑在`Service`这里使用。在任何情况下，您都不应该再进行更新，`onPostExecute()`因为活动上下文可能会消失（请参阅*Doctoror Drive*的帖子）。

有了该服务，您可以向系统发送一个`Intent`或一个`Broadcast`事件。然后在该意图活动/广播接收器中进行进一步处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:55:38.387

您可以在 LoginActivity 的 onDestroy() 中取消异步任务。

覆盖异步任务的 onCancelled()。当活动被销毁时，将调用 onCancelled() 而不是 onPostExecute()

在这里您可以避免对 LoginActivity 的回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:08:52.200

您应该使用`Service`或`IntentService`。因为`AsyncTask`不记录任何变量或上下文`Activity`。当您完成登录任务启动`PendingIntent`或`startActivity(intent)`. 这可能是 Android 的最佳实践。这样你永远不会得到异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:51:43.453

在 onLoginComplete 和 onLoginFailure 检查片段是否仍然附加到活动。如果没有，什么也不做。

```
@Override
public void onLoginComplete() {

    if (isAdded() && !isRemoving() && !isDetached()) {
        ((MainActivity)getActivity()).gotoMain();
    }
} 
```

# visual-c++ - 如何在windows中使用共享内存

> ID：15461478
> 
> 赞同：1
> 
> 时间：2013-03-17T13:49:13.090
> 
> 标签：visual-c++

考虑一下，我有两个 Windows 独立 GUI 应用程序。每当我在第一个 GUI 中按下命令按钮时，其他 GUI 应捕获按钮的状态，并应在其中的文本框中显示 ON 或 OFF。如何使用共享内存来做到这一点。

PS：我使用的是 VC++ 2008。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T13:53:09.160

看看：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)

在过程 1 中：

`CreateFileMapping()`：它将使用最后一个参数中提供的名称创建共享内存块，如果它不存在并返回一个句柄（您可以称它为指针），如果成功。

`MapViewOfFile()`：它在进程地址空间中映射（包括）这个共享块并返回一个句柄（同样你可以说一个指针）。

只有使用 MapViewOfFile() 返回的指针，您才能访问该共享块。

在过程 2 中：

`OpenFileMapping()`: 如果通过 CreateFileMapping() 成功创建共享内存块，则可以使用相同的名称（用于创建共享内存块的名称）。

`UnmapViewOfFile()`：它将取消映射（您可以从该进程地址空间中删除共享内存块）。当您使用完共享内存（即访问、修改等）后，请调用此函数。

`Closehandle()`：最后要从进程中分离共享内存块，使用参数调用它，句柄由 OpenFileMapping() 或 CreateFileMapping() 返回。

# php - 将 queryBuilder 结果转换为关联数组

> ID：15461479
> 
> 赞同：1
> 
> 时间：2013-03-17T13:49:50.757
> 
> 标签：php, symfony, doctrine-orm, query-builder

我正在寻找方法，如何将查询生成器结果转换为关联数组。但我需要的是包含来自另一个表的关系数据。如果我使用 getArrayResult() 方法，它会给我一个数组，但没有外键。我需要嵌套数组中包含的外键以及关联数据库表的数据。 **编辑：** 这是我的代码：

```
$qb = $this->_em->createQueryBuilder();
$qb->select('p');
$qb->from('XXX\MyBundle\Entity\Entity1', 'p');

$qb->leftJoin('p.FK1','u');
$qb->andWhere('u.Attr1 = :attr1');
$qb->setParameter('attr1', $appId);
$qb->andWhere('u.Attr2 IS NULL');
$qb->leftJoin('u.FK2', 'v');
$qb->andWhere('v.Attr3 = :attr3');
$qb->andWhere('v.Attr4 IS NULL');
$qb->setParameter('attr3', $userId);

$result = $qb->getQuery()->getArrayResult(); 
```

由于 SOAP，我需要这种转换。它不能将复杂对象作为实体的嵌套对象返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:24:57.417

首先，您需要在 Entity1Repository.php 中编写此函数

由于您使用的是 createQueryBuilder() 方法，因此您不需要使用 select 和 from 方法。在您的示例中，您正在编写连接，但您并没有要求查询返回这些连接。

试试这个代码：

```
<?php

namespace XXX\\MyBundle\Entity;

use Doctrine\ORM\EntityRepository;

class Entity1Repository extends EntityRepository
{
    public function getEntityWithJoins()
    {
        return $this
            ->createQueryBuilder('p')
            ->addSelect('u')
            ->addSelect('v')
            ->leftJoin('p.FK1','u')
            ->andWhere('u.Attr1 = :attr1')
            ->setParameter('attr1', $appId)
            ->andWhere('u.Attr2 IS NULL')
            ->leftJoin('u.FK2', 'v')
            ->andWhere('v.Attr3 = :attr3')
            ->andWhere('v.Attr4 IS NULL')
            ->setParameter('attr3', $userId);
            ->getQuery()
            ->getArrayResult();
    }
} 
```

# security - Adore-Ng rootkit 如何加载到内核中

> ID：15461485
> 
> 赞同：1
> 
> 时间：2013-03-17T13:50:44.290
> 
> 标签：security, linux-kernel, kernel-module

我正在检测内核级别的 rootkit，并选择了 Adore-Ng 作为我的第一个测试 rootkit。在了解了这个 rootkit 如何在 Linux 内核（2.4、2.6 版本）中隐藏自己和其他进程之后，我现在想知道它是如何加载到内核中的。

具体来说，我想知道是否

**1\. 它调用 Linux 内核中任何已经存在的 API**或

**2\. 它是否有任何硬编码的汇编指令，一旦它被编译，它就会被加载到内核中？**

我浏览了 Adore-Ng 的源代码，但在这个方向上找不到任何东西，只能看到它是如何实现隐藏的目标的。

谁能告诉/建议我如何找到它的加载行为？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T19:25:14.400

Adore rootkit 的核心是一个恶意模块，因此要将其加载到内核中，您首先需要 root 访问权限，然后运行 ​​insmod（或 modinfo）。另一种加载 Adore 的方法是感染受信任的内核模块，如 Phrack 卷 0x0b，问题 0x3d 中所述。它不会像前一种方式那样隐秘，因为不会调用清洁器模块。由于您浏览了源代码，我相信一旦 Adore 模块感染了合法模块，您就有能力修改源代码以调用清洁模块。（确保你也没有留下任何模块感染的痕迹；清洁工不会把它捡起来）。任何称职的管理员都会使用签名模块，所以不要指望这些方法可以在 2.6 主线之后的生产内核上工作。

# javascript - 将自己复杂的表单项添加到 drupal 表单中

> ID：15461487
> 
> 赞同：0
> 
> 时间：2013-03-17T13:51:21.027
> 
> 标签：javascript, forms, drupal

在 Drupal 中，我们可以使用 hook_form_alter 在表单中添加额外的项目。

但是如果我有一些表单项，使用 Drupal 表单 API 来表达它们是非常困难的。如何将它们添加到表单中？

我有一个复杂的嵌套选择，从类别到类型、到项目控制的复选框，还包括 JavaScript 来控制它们的显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:18:19.000

定义自己的元素。drupal 示例模块中就是一个例子。

# python - Django 测试使用新 ID 创建表单

> ID：15461488
> 
> 赞同：0
> 
> 时间：2013-03-17T13:51:21.230
> 
> 标签：python, django

我刚刚将我所有的 AJAX 验证代码移至 Django Forms。我需要一些帮助来更新我的测试。我基本上有一些测试数据，声明为常量，用于所有套件。然后，我在整个测试过程中反复使用此数据。

作为设置的一部分，我创建了一些用户并登录了我需要的用户：

```
def setUp(self):
    self.client = Client()
    create_user(username='staff', email='staff@staff.com',
                password='staff', staff=True)
    create_user(username='agent', email='agent@agent.com',
                password='agent', staff=False)
    ShiftType.objects.create(type_id='SI', description='Sales Inbox')
    self.client.login(username='staff', password='staff') 
```

拆解会删除此数据（或曾经删除过的数据）：

```
def tearDown(self):
    # Clean up the DB
    self.client.logout()
    ShiftType.objects.all().delete()
    User.objects.all().delete()
    Event.objects.all().delete()
    RecurrentEvent.objects.all().delete() 
```

这工作正常，但现在表单无法验证，因为用户给出的表单值 id 每次都会递增。例如：

```
 ERROR: <ul class="errorlist"><li>employee_id<ul class="errorlist"><li>Select a valid choice. That choice is not one of the available choices.</li></ul></li></ul> 
```

打印表单可以让我看到 ID 每次都在递增。

即使我删除了所有员工，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:33:29.057

我会考虑使用文本固定装置，而不是每次都创建和删除数据。这在 Django 中很容易做到。在您的 tests.py 中，它看起来像这样

```
class BlogTest(TestCase):
    fixtures = ['core/fixtures/test.json'] 
```

当您执行此操作时，django 将为您构建一个测试数据库，将夹具加载到其中，运行您的测试，然后在测试完成后删除数据库。如果您甚至想使用不同的数据库引擎（我们这样做是为了让我们的测试使用 sqlite，因为它很快），您可以将类似的内容放入您的 settings.py

这将使 ID 每次都相同，这将解决您的问题。

# struts2 - 使用ajax从列表中删除用户并仅使用struts 2刷新列表

> ID：15461490
> 
> 赞同：4
> 
> 时间：2013-03-17T13:51:41.410
> 
> 标签：struts2, struts2-jquery

我的清单是这样的：-

```
UserName   action
=================
abcd       delete
1234       delete 
```

我的jsp代码是这样的： -

```
<table>
    <tr>
        <th>UserName</th>
        <th>Action</th>
    </tr>
    <s:iterator value="list">
        <tr>
            <td><s:property value="name" /></td>
            <td><a href="<s:url action='deleteUser'/>">delete</a></td>
        </tr>
    </s:iterator>
</table> 
```

如何使用 ajax 调用从列表中删除用户并刷新列表的操作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T13:41:45.363

对于一个简单的 ajax 刷新功能，我会这样

第一个 div 包含这样的列表

```
<div id="results">
<s:include page="ListUser.jsp">
</div> 
```

ListUser.jsp 将包含我要刷新和显示的用户列表

```
<table>
    <tr>
        <th>UserName</th>
        <th>Action</th>
    </tr>
    <s:iterator value="list">
        <tr>
            <td><s:property value="name" /></td>
            <td><a class=""linkDelete" href="<s:url action='deleteUser'/>">delete</a></td>
        </tr>
    </s:iterator>
</table> 
```

一个简单的 jquery ajax 请求看起来像这样

```
$("a.linkDelete").click(function(e) {
  //this line will prevent the default form submission on click of link
  e.preventDefault();
  //fire the ajax request on this object referring to the clicked anchor link element
  $(this).ajax({
  url: "DeleteAction.action",
  cache: false
}).done(function( html ) {
  $("#results").append(html);
});
}); 
```

DeleteAction.action 是 struts.xml 看起来像这样

```
<action name="DeleteAction" method="deleteUser">
<result>/WEB-INF/jsp/ListUser.jsp</result>
</action> 
```

如果您还有其他操作也有结果链接可将您带到结果页面，那么以下将是 struts.xml 中的另一个条目

```
<action name="ResultAction" method="goToResultPage">
<result>/WEB-INF/jsp/Result.jsp</result>
</action> 
```

您的 Result.jsp 将包含带有 id 结果的 div。

干杯:)

# cakephp - Cakephp 表单 - 有没有办法使字段只读（在视图中）

> ID：15461501
> 
> 赞同：5
> 
> 时间：2013-03-17T13:52:33.150
> 
> 标签：cakephp

我有一个 Cakephp 1.3 表单，允许用户编辑配置文件数据。但是表格中的一些信息需要只读（有时）。

是我在只读情况下回显和格式化字段内容的唯一选择，还是 Cake 表单中有一个允许只读字段的标志。理想情况下，只读字段会像其他界面一样灰显。

```
 echo $this->Form->create('User', array('url' => array('controller' => 'User', 'action'=>'editUser')));

    echo $this->Form->input('id', array('type'=>'hidden'));

If (!isset($IsAdmin)) {
    // Only display username - read only! Add code here
    echo $this->Form->input('username', array('label' => __d('users', 'User',true)));
} else {
    // Admins can edit user names
    echo $this->Form->input('username', array('label' => __d('users', 'User',true)));
}           

 ... more fields here

    echo $this->Form->end(__d('users', 'Submit',true)); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-17T14:10:16.913

您可以在选项数组中添加一个“禁用”键，*但*要意识到这只是表单的前端/表示，人们将能够覆盖输入字段的“禁用”属性并修改其值。

为防止保存不需要的更改，您需要在使用模型保存数据时指定“fieldList”

输出禁用的表单域；

```
echo $this->Form->input('fieldname', array('type'=>'hidden', 'disabled' => 'disabled')); 
```

然后，在保存数据时，指定一个字段列表（文档：[http](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#saving-your-data) ://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#saving-your-data ）

```
$this->MyModel->save($this->data, true, array('field1', 'field2')); 
```

字段列表应包括允许用户更新的所有字段

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-15T23:29:39.200

disabled 属性很好，但实际上，输入字段具有“只读”属性。听起来您希望该字段仍向用户显示，因此使用“隐藏”并不能真正解决您想要做的事情。

所以另一种选择（实际上是专门解决您对“只读”的要求）：

```
echo $this->Form->input('fieldname', array('readonly' => 'readonly')); 
```

我发现使用 disabled 可以防止触发 jquery 点击触发器，而 readonly 仍然会触发，例如使用引导日期选择器文本字段

这是 WC3 的链接： http: [//www.w3schools.com/tags/att_input_readonly.asp](http://www.w3schools.com/tags/att_input_readonly.asp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-27T07:50:34.263

如果您真的想让一个字段只读为什么要使用表单字段，只需回显该值，就可以使用简单的 javascript 或 firebug 轻松更改表单字段的禁用或只读属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-22T10:41:34.920

好的，在尝试了几种方法之后，这就是我喜欢的。

1）使用只读（当您处于更新模式时，禁用将在点击“保存”后删除该值，这很糟糕）：

```
echo $this->Form->input('email', array('readonly' => 'readonly')); 
```

2）为了防止通过浏览器插件删除“只读”时更新，您可以将其添加到模型的 beforeSave 中：

```
if(isset($this->data[$this->alias]['id'])) // id is only set if we update
{
    unset($this->data[$this->alias]['email']);
} 
```

字段列表不舒服。当我实际上只想排除一个字段时，为什么要添加所有字段？

取消设置将阻止 CakePHP 在数据库中更新它。当然，在使用（无效）更新的电子邮件地址点击保存后，此更新将在表单中显示一次。但是由于用户已经操作了 HTML 表单并且由于数据库字段保持不变，这应该无关紧要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T14:03:22.063

你可以做以下两件事之一：

1.  使字段隐藏

（前任。`echo $this->Form->input ('username, array ('type' => 'hidden'));`

2.  在提交表单之前或可能在 beforeSave 中将用户名的值重置为其原始值。

# java - Maven 3.0.5 和 IntelliJ 12 构建两个 jar 文件

> ID：15461503
> 
> 赞同：0
> 
> 时间：2013-03-17T13:52:43.760
> 
> 标签：java, jar, intellij-idea, maven-3

我正在使用带有 IntelliJ 12 的 Maven 3.0.5，并且我的 pom 文件设置为构建一个具有依赖项的 jar。现在效果很好，但我的问题是这个。如何告诉 pom 文件只构建一个 jar？现在我得到一个带有依赖项的 jar，这是我想要的，但我也得到了另一个没有依赖项的 jar，我最终只是手动删除了它。我在这里检查：[http](http://maven.apache.org/pom.html) ://maven.apache.org/pom.html ，即使我没有指定它，包装似乎也会默认构建一个 jar，并且在我的 pom 部分中，我告诉 Maven 构建另一个jar 文件。我可以在我的 pom 中更改什么以仅构建一个具有依赖项的 jar？

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.xyz.program.test</groupId>
    <artifactId>xyz-program-test</artifactId>
    <packaging>jar</packaging>
    <version>1.2</version>
    <dependencies>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>2.31.0</version>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-firefox-driver</artifactId>
            <version>2.31.0</version>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-htmlunit-driver</artifactId>
            <version>2.31.0</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>
    </dependencies>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.seleniumhq.selenium</groupId>
                <artifactId>selenium-firefox-driver</artifactId>
                <version>2.31.0</version>
                <exclusions>
                    <exclusion>
                        <groupId>org.seleniumhq.selenium</groupId>
                        <artifactId>selenium-remote-driver</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-plugin-plugin</artifactId>
                <version>3.0</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>com.setup.test.Setup</mainClass>
                        </manifest>
                    </archive>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
                <executions>
                    <execution>
                        <id>make-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

为格式化道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:11:23.760

正如您链接到的[pom 参考页面中所写：](http://maven.apache.org/pom.html)

> 聚合（或多模块）
> 
> 具有模块的项目称为多模块或聚合器项目。模块是这个 POM 列出的项目，并作为一个组执行。一个 pom 打包的项目可以通过将一组项目列为模块来聚合它们的构建，这些模块是这些项目的相对目录。

为了有一个“pom打包项目”标记你的根项目 - 注意`pom`包装：

```
<groupId>com.xyz.program.test</groupId>
<artifactId>xyz-program-test</artifactId>
<packaging>pom</packaging> 
```

# java - request.getParameter 字符串表现为对象

> ID：15461504
> 
> 赞同：0
> 
> 时间：2013-03-17T13:52:55.983
> 
> 标签：java, jsp, request

在我的 jsp 中，我使用了一个表单：

```
 <input type="hidden" name="question" value="${question.feedback}"> 
```

当我在下一个 servlet 中检索此值时：

```
 String question= request.getParameter("question"); 
```

我打印它（仅用于测试用例）

```
System.out.println(question.toString()); 
```

我得到一个问题对象的所有属性的输出？

但是因为我用它来调用它`request.getParameter`是一个字符串，我不能投射它。但我会说它是一个对象。

我不能强制转换，也不能在我的 JSP 中的属性上设置它。有没有办法将它作为我的 servlet 中的对象而不将它放在 sessionscope 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:57:08.133

您的表单只会提交对 Question 对象属性的调用`toString()`结果`feedback`。

如果您想从表单提交中获取问题的所有属性，那么您应该为每个问题属性添加一个隐藏字段，或者找到一种方法将问题转换为字符串，反之亦然并使用单个隐藏场地。

或者您应该将问题存储在服务器的某个位置（在会话中或数据库中）并从那里重新加载。

# php - 自定义 PHP 扩展的问题

> ID：15461510
> 
> 赞同：1
> 
> 时间：2013-03-17T13:53:17.930
> 
> 标签：php, c, apache, arduino

几个月前，我用 C 语言为 Arduino 微控制器构建了一个串行连接库。我在想，如果我可以为这个库编写一个 PHP 包装器，那该有多棒。

我编写了一个 PHP 扩展，其中只有一个名为“acm_get_door()”的函数，它应该返回 -1、0 或 1，具体取决于我的 Arduino 上某个引脚的状态。如果它返回 -1，则表示未设置连接。

因此，在加载自定义扩展并更改我的两个 php.ini 文件并重新启动其他所有内容后，我通过 CLI 运行了此测试：

> $ php -r '回声 acm_get_door();'

它返回一个“1”。我很兴奋，所以我玩了一下电路，看看我能不能得到一个“0”。好吧，我做到了，我认为我的扩展程序运行良好。

然后我转到我的测试网络服务器（同一台计算机）中的一个 .php 文件并尝试运行该函数。我得到了一个'-1'的结果。扩展确实加载了，但我似乎无法启动与 Arduino 的连接。

我想知道这是否可能是关于访问某些文件的权限问题。该函数需要访问一个名为“/dev/ttyACM0”的文件，它可以在 CLI 版本中访问。我的 Apache Web 服务器可能没有访问该文件的权限，如果是这样，我将如何调整内容以便它访问？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:46:35.057

可能该组有权读取/写入设备。

因此，请使用 查找设备的组所有者`ls -l /dev/tty/ACM0`。然后，使用以下命令将自己添加到组中：

```
sudo adduser <me> <the_group> 
```

（其中**me**是您的用户名，**the_group**是设备组）

您可能需要注销/登录才能获得更改的组权限的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:13:06.220

好的，感谢 John Jesus，我只需要更改文件 /dev/ttyACM0 的权限。

它设置为 660，666 似乎可以工作（尽管这可能是个坏主意）。

# python - 我的清单发生了什么？

> ID：15461511
> 
> 赞同：0
> 
> 时间：2013-03-17T13:53:24.807
> 
> 标签：python, list, class

我有课点

```
class Dot:   
  def __init__(self, x, y):
    self.x=x
    self.y=y 
```

我有类集群

```
class Cluster:
    ic=0
    List=[Dot]
    colour=0
    def __init__(self, Dot):
      self.List[self.ic]=Dot 
      self.ic=self.ic+1
    def includeDot(self, Dot):
      self.List[self.ic]=Dot 
      self.ic=self.ic+1 
```

其中包括点列表（列表）。

我有类 ClusterMaker 在哪里是集群列表（和一些其他程序，但这对于这个问题并不重要）

```
class ClusterMaker:
    total=0
    i=0
    CList=[Cluster]  
    def addCluster(self,Cluster):
         self.CList.append(Cluster) 
```

最后，我的表单上有一个按钮，它开始创建点和集群

```
def onChoose(self):            
       # ClMaker=ClusterMaker()   
       self.total=self.ent.get().strip() #how many dots we haver
       self.CM=ClusterMaker()
       i=0    
       while (i < int(self.total)):
          dot=Dot(randint(0, 575), randint(0,670))
          clst=Cluster(dot)
          clst.colour= randrange(100, 999, 15)  
          self.CM.addCluster(clst)
          box.showerror('j', str(str(self.CM.CList[i].List[0].x)+str(clst.List[0].x)))
          this box shows us x coord of every dot in our cluster list
          self.canvas.create_oval(clst.List[0].x, clst.List[0].y, clst.List[0].x+10, clst.List[0].y+10, fill=str("#"+str(clst.colour)))
          i=i+1 
       b=0
       while(b<6):
          box.showerror('j', str(self.CM.CList[b].List[0].x))
          and this box shows us x coords too
          b=b+1 
```

但是我的列表中发生了什么？为什么当我第二次要求显示 x 坐标时，它为所有集群中的所有点显示相同的 x 坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:08:30.997

类属性被实例化一次并在实例之间共享。您必须在以下位置创建新列表`__init__`：

```
def __init__(self, Dot):
    self.List = [Dot]
    self.List[self.ic]=Dot 
    self.ic=self.ic+1 
```

# python - 让 PyRun_InteractiveLoop() 在 linux 上从另一个 pty 获取输入/输出

> ID：15461516
> 
> 赞同：5
> 
> 时间：2013-03-17T13:54:38.160
> 
> 标签：python, linux, pty

在一个 C 程序中，我想运行一个 Python 交互式循环，该循环从一个伪终端（例如 pts/4）获取输入并将其输出到与启动 C 程序的终端（例如 pts/1）不同的伪终端（例如 pts/4） .

运行交互式循环的基本方法是：

```
PyRun_InteractiveLoop(stdin, "<stdin>"); 
```

然而，这并不能解决问题，因为它使用的是启动程序的伪终端 (pts/1)，而不是 pts/4。

一个有效的解决方案是：

```
int fd = open("/dev/pts/4", O_RDWR);
dup2(fd, 0);
dup2(fd, 1);
dup2(fd, 2);
PyRun_InteractiveLoop(stdin, "<stdin>"); 
```

此解决方案的缺点是它使文件描述符 0 1 2 无法与启动程序的伪终端进行通信。虽然这些描述符可以事先复制，但有些函数坚持使用 0 1 2 并且不能使用复制的 fds。

理想情况下，我们希望交互式循环不依赖 fds 0 1 2，并像这样在 /dev/pts/4 上运行：

```
FILE *pts = fopen("/dev/pts/4", "rw");
PyRun_InteractiveLoop(pts, "/dev/pts/4"); 
```

不幸的是，这并没有按预期工作，并且与使用标准输入具有相同的效果，标准输入默认使用启动程序的伪终端。

所以问题是双重的：

*   如果 PyRun_InteractiveLoop() 只能在 stdin / fds 0 1 2 上运行，为什么它根本不需要任何参数？
*   如果它实际上可以在 stdin / fds 0 1 2 以外的其他东西上工作，特别是在用户定义的伪终端上，应该如何调用它来做到这一点？

# qt - x86 Qt 应用程序在 Mac OS 10.7 (Lion) 上崩溃

> ID：15461518
> 
> 赞同：1
> 
> 时间：2013-03-17T13:54:47.257
> 
> 标签：qt, crash, x86, osx-lion

构建一个针对 Lion 和 Mountain Lion 的 Qt 应用程序。构建服务器位于 Mountain Lion 上。我有一个 32 位依赖项，所以我从源代码编译了 Qt 4.8.4 和`-arch x86`. 该应用程序在 Mountain Lion 上运行良好，但在 Lion 上启动时崩溃。

这是堆栈跟踪的顶部：

```
1   QtGui    0x00c6a3e3 QMacPasteboardMime::~QMacPasteboardMime() + 2443
2   QtGui    0x00b904e4 QApplicationPrivate::initializeWidgetPaletteHash() + 6394
3   QtGui    0x00b91420 QApplicationPrivate::initializeWidgetPaletteHash() + 10294
4   QtGui    0x00c051d0 QApplicationPrivate::construct() + 222
5   QtGui    0x00c06052 QApplication::QApplication(int&, char**, int) + 100 
```

删除 32 位依赖项并使用预构建 Qt 4.8.4 发行版进行构建解决了该问题。有人看到这个 Qt 构建配置有问题吗？

```
./configure \
    -debug-and-release \
    -developer-build \
    -opensource \
    -platform macx-g++ \
    -nomake examples \
    -nomake demos \
    -arch x86 
```

我也尝试了`macx-llvm`具有相同结果的 make 规范。任何反馈表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:27:01.253

为什么不使用自制软件或官方二进制文件？两者都适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T15:08:41.977

在构建与 Lion 兼容的 32 位 QT 应用程序时，我遇到了同样的行为。我设法通过将 Qt 配置为使用 10.7 的旧 SDK 来解决这个问题，基本上使构建与 Lion 向后兼容。

首先，我通过 Apple Developer Center 从旧 Xcode 版本中获得了 MacOSX10.7.sdk 作为一部分。最新的 Lion 嵌入在 Xcode 4.3.3 ( `xcode_4.3.3_for_lion.dmg`) 的 DMG 中，只需安装 DMG 并将它们从您当前的 Xcode 复制`/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs`到更通用的`/Developer/SDKs/MacOSX10.7.sdk`

然后，我使用额外的 sdk 参数配置 QT（在我的情况下为 4.8.6）以匹配 SDK 的目标位置。

`-sdk /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T11:58:17.613

在为 win32 平台构建 Qt 库 4.8.6 时，我遇到了类似的问题。经过长时间的调查，我确定了Qt bug 27219的解决方案，“这个崩溃可以通过设置解决：export DYLD_FORCE_FLAT_NAMESPACE=1”。请参阅：“ [https://bugreports.qt-project.org/browse/QTBUG-27219?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://bugreports.qt-project.org/browse/QTBUG-27219?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel) ”

有关实现细节，请参阅：“ [http://0xced.blogspot.ro/2006/07/dealing-with-outdated-open-source-libs.html](http://0xced.blogspot.ro/2006/07/dealing-with-outdated-open-source-libs.html) ”您必须更新到 Info.plist 文件以强制使用平面命名空间设置 DYLD_FORCE_FLAT_NAMESPACE 环境变量。这是通过在 Info.plist 文件中添加以下键来实现的：

```
<key>LSEnvironment</key>
<dict>
<key>DYLD_FORCE_FLAT_NAMESPACE</key>
<string>YES</string>
</dict> 
```

# javascript - 在可聚焦元素上编写箭头键导航的指南？

> ID：15461520
> 
> 赞同：0
> 
> 时间：2013-03-17T13:54:55.553
> 
> 标签：javascript, html, navigation, arrow-keys

我想让我页面上的链接和输入元素具有可通过箭头键导航的焦点。如果我只考虑向上/向下箭头键，这很容易，它们与 tab/shift+tab 的模式相同。

只需找到下一个元素并关注它。

谁能建议一种巧妙的方法来处理用户想要在最近的元素上左右移动的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:33:54.987

我认为最好的方法是定义一个自定义的 arrow_nav 排序索引，如下所示：

```
screen.addInput({ name:'height', arrow_nav_index:1 });
screen.addInput({ name:'weight', arrow_nav_index:2 });
screen.addInput({ name:'eye color', arrow_nav_index:3 });
screen.addInput({ name:'hair color', arrow_nav_index:4 });
screen.addInput({ name:'star sign', arrow_nav_index:5 });
screen.addInput({ name:'think star signs are bullshit?', arrow_nav_index:6 }); 
```

然后我们可以在 (1,2,3) 和 (4,5,6) 之间垂直箭头而不改变列。我们也可以在 (1,4), (2,5), (3,6) 之间水平箭头，而不改变行。

这是基本的想法。我认为这样做是作为自定义地图。或者简单地通过为输入列指定列高来自动化它，然后隐式地为每个输入提供添加顺序的索引，这将使箭头导航成为现实。

万岁。

# ios - 将数据从本地持久存储区播种到 iCloud 存储区时管理关系

> ID：15461525
> 
> 赞同：1
> 
> 时间：2013-03-17T13:55:24.757
> 
> 标签：ios, core-data, icloud

我正在尝试将现有数据从本地商店播种到启用 iCloud 的商店。当我尝试从本地托管对象访问关系对象时，会引发以下异常，

```
> illegal attempt to establish a relationship between objects in
> different contexts 
```

这就是我想要做的..

```
 NSEntityDescription *entity = [recurringExpense entity];
   RecurringExpense *newRecExpense = [[RecurringExpense alloc]initWithEntity:entity insertIntoManagedObjectContext:moc];
   newRecExpense.category = recurringExpense.category;
   [moc assignObject:newRecExpense toPersistentStore:store]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:38:56.413

您似乎遇到了一个问题，原因是在其中一个对象的托管对象上下文之外或跨线程/队列边界创建关系。

根据 Apple 文档，“您必须在将要使用它的线程上创建托管上下文。” 此外，关系两边的对象需要在同一个 NSManagedObjectContext 中引用。

来自苹果：

在此处查看核心数据并发：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)

以下 Stack Overflow 答案提供了更多详细信息：[https ://stackoverflow.com/a/1554935/1294009](https://stackoverflow.com/a/1554935/1294009)

# java - 如何识别哪种类型的服装数组列表包含对象？

> ID：15461529
> 
> 赞同：2
> 
> 时间：2013-03-17T13:55:43.240
> 
> 标签：java, android, object, arraylist

我有一个服务器（Java）/客户端（Android）应用程序，在服务器端，根据请求，我通过 ObjectOutputStream 发送 3 种类型的对象。

对象类型如下：

在java服务器端：

```
//My serializable classA
MySerializableClassA classA = MySerializableClassA(A, B, C);
out.WriteObject(classA);

//Arraylist of my serializable classB
ArrayList<MySerializableClassB> classB = new ArrayList<MySerializableClassB>();
classB.add(new MySerializableClassB(E, F, G, H));
out.writeObject(classB);

//Arraylist of my serializable classC
ArrayList<MySerializableClassC> classC = new ArrayList<MySerializableClassC>();
classC.add(new MySerializableClassC(Y, X, Z));
out.writeObject(classC); 
```

在 Android 客户端：

```
Object obj
private MySerializableClassA classA;
private ArrayList<MySerializableClassB> arrayClassB;
private ArrayList<MySerializableClassC> arrayClassC;

//Here i get the object received, i store it in a Object
in = new ObjectInputStream(_socket.getInputStream());
obj = in.readObject();

//And I check of which class is an instance
if(obj instanceof MySerializableClassA){
    classA = (MySerializableClassA)obj;
    //Do a specific action
} 
```

问题从这里开始，因为从 Object 到 ArrayList 的转换未选中，

```
//I check if object is instanceof ArrayList...
else if(obj instanceof ArrayList){
    //and here a need to identify the type of the object inside the arraylist , so... 
    if(the object inside is an instanceof MySerializableClassB){
        arrayClassB = (ArrayList<MySerializableClassB>)obj;
        //Do a specific action
    }
    else if(the object inside is an instanceof MySerializableClassC){ 
        arrayClassC = (ArrayList<MySerializableClassC>)obj;
        //Do a specific action
    }
} 
```

所以我的问题是：有什么方法可以确定哪种类型的 costum arraylist 包含我的对象？或者在这种情况下确定什么类型的对象包含我的数组列表？

此外，我可以选择将 classB 和 classC 合并到一个班级中......但如果我能做到我上面要求的，会更好。

欢迎任何帮助或建议其他方式来做我想做的事，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:29:01.110

您面临的问题称为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。在运行时，无法辨别`List<A>`. `List<B>`您可以通过使用以下方法将列表包装到对象中来解决它

```
Class<T> getItemType(); 
```

或创建两个不同的 ArrayList 子类，然后使用[`getActualTypeArguments()`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/ParameterizedType.html#getActualTypeArguments%28%29). 第二种选择会很奇怪。

如果您的用例允许，最简单的方法是遍历列表并决定每个项目。检查是否会为每个项目产生相同的结果并不重要。

将列表包装到携带项目类型的对象中会向流中添加一些元数据。如果您想避免创建该包装器，您可以在每个列表之前手动将类型写入流，从而定义自定义协议。如果你走那条路，请考虑[protobuf](http://code.google.com/p/protobuf/)或类似的东西。

# ios - 使用 UIBezierPath 绘制饼图

> ID：15461530
> 
> 赞同：4
> 
> 时间：2013-03-17T13:55:48.963
> 
> 标签：ios, objective-c, core-graphics, drawrect, uibezierpath

我正在尝试使用 UIBezierPath 绘制 PieChart，而且我非常接近这样做，但是，我遇到了一个问题，正如您在随附的屏幕截图中看到的那样， ![截图2](../Images/0bd8330209779e9e924e52ddc6a2a1ab.png) 这是我正在使用的代码：

```
-(void)drawRect:(CGRect)rect
{
    CGRect bounds = self.bounds;
    CGPoint center = CGPointMake((bounds.size.width/2.0), (bounds.size.height/2.0));

    NSManagedObject *gameObject = [SCGameManager sharedInstance].gameObject;
    int playerNumber = 0;
    int totalOfPlayers = [(NSSet*)[gameObject valueForKey:@"playerColors"] count];
    float anglePerPlayer = M_PI*2 / totalOfPlayers;
    for (NSManagedObject *aPlayerColor in [gameObject valueForKey:@"playerColors"]){
        //Draw the progress
        CGFloat startAngle = anglePerPlayer * playerNumber;
        CGFloat endAngle = startAngle + anglePerPlayer;
        UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:center radius:self.frame.    size.width/2 startAngle:startAngle endAngle:endAngle clockwise:YES];

        UIColor *playerColor = [SCConstants getUIColorForPlayer:[[aPlayerColor valueForKey:@"colorIndex"] intValue]];
        [playerColor set];
        [path fill];
        playerNumber++;
    }
} 
```

显然，我只需要将我的路径移动到圆心，然后将其关闭，但是当我添加以下代码行时：

```
[path addLineToPoint:self.center];
[path closePath]; 
```

它画了一些奇怪的东西： ![截图1](../Images/cd4309e865b76eecb8c0e32d35863ca2.png)

你知道我的代码出了什么问题吗？我根本不是贝塞尔专家，所以欢迎任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T14:03:31.740

看起来您正在使用的中心点是问题所在。事实上，如果你查看`center`UIView 属性的文档，你会发现：

> 中心在其父视图的坐标系中指定，并以点为单位进行测量。

您希望在其自己的坐标系中指定视图的中心点，而不是其父视图的中心点。您已经在此处以自己的坐标确定了视图的中心：

```
CGPoint center = CGPointMake((bounds.size.width/2.0), (bounds.size.height/2.0)); 
```

因此，只需将您用作中心点的点从`self.center`更改为`center`，如下所示：

```
[path addLineToPoint:center]; 
```

# file - Safari 扩展中的多余文件

> ID：15461534
> 
> 赞同：1
> 
> 时间：2013-03-17T13:55:55.210
> 
> 标签：file, safari, safari-extension

我目前正在开发一个向网站添加样式表和一些小脚本的 Safari 扩展。其中一个脚本必须插入到 html 中，所以我运行了另一个脚本......

```
var myScriptElement = document.createElement('script');
myScriptElement.type = 'text/javascript';
myScriptElement.src = 'http://mysite.com/myscript.js';
document.querySelector('head').appendChild(myScriptElement); 
```

...这将其添加到头部：

```
<script type="text/javascript" src="http://mysite.com/myscript.js"></script> 
```

我遇到的问题是脚本是从我的站点而不是扩展文件夹加载的。那么我必须插入什么作为源才能访问扩展文件夹？我无法使用标准的开始和结束脚本扩展功能插入脚本。

我在 javascripting 方面真的很糟糕，所以如果你们中的某个人可以帮助我，我将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:37:20.673

您可以使用`safari.extension.baseURI`获取扩展文件夹的路径。所以在你注入的脚本中使用这样的东西：

```
var myScriptElement = document.createElement('script');
myScriptElement.type = 'text/javascript';
myScriptElement.src = safari.extension.baseURI+'myscript.js';
document.querySelector('head').appendChild(myScriptElement); 
```

值得注意的是，注入的脚本也被注入到页面上的每个 iframe 中，因此根据您正在执行的操作，您可能希望确保上述内容仅是 run `if (window == window.top)`。

# php - 使用空数组作为参数执行

> ID：15461535
> 
> 赞同：1
> 
> 时间：2013-03-17T13:55:55.970
> 
> 标签：php, pdo

我是关于 的读者`PDO`，我想知道这两种方法之间的区别是什么：

```
public function query($sql)
    {
        $req = $this->db->prepare($sql);
        $req->execute();
        return $req->fetchAll(PDO::FETCH_OBJ);
    }

public function query($sql, $data  = array())
    {
        $req = $this->db->prepare($sql);
        $req->execute($data);
        return $req->fetchAll(PDO::FETCH_OBJ);
    } 
```

在第二种方法中，`execute`有一个空数组作为参数，而第一种没有，使用一个空数组作为参数的作用是`execute`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:57:39.050

您可以在数组中添加参数绑定，而不是事先使用 bindParam() 函数。

例如你想通过 id 选择一些东西

```
 $stmt = $dbh->prepare("SELECT * FROM `something` WHERE `id` = ?");
    $stmt->execute(array($id)); 
```

是相同的

```
 $stmt = $dbh->prepare("SELECT * FROM `something` WHERE `id` = ?");
    $stmt->bindParam(1, $id, PDO::PARAM_INT, 11);
    $stmt->execute(); 
```

虽然对于 bindParam 函数，您可以更好地检查，检查[PHP Manual PDO::excute()](http://php.net/manual/en/pdostatement.execute.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:59:23.993

默认情况下，该数组仅为空。您可以在该数组中传递值，它们将被适当地插入到您的 SQL 语句中（即 - 数组键 => 字段名称）。

在函数参数中定义一个空数组表明这是一个*可选*参数，您不必强制传递它 - 只有当它相关时。例如，执行 INSERT 命令时。如果您不向`$data`参数传递任何值，则它的默认值将只是一个空数组。

使用默认参数的示例 -

```
function saySomething($text="Hello World!"){
  echo $text;
}

saySomething(); // will echo out the default "Hello World!"
saySomething("Goodbye World!"); // will echo out "Goodbye World!" as specified. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:07:10.227

第一个允许您运行不带参数的查询。
第二个允许您使用参数或不使用参数运行查询：

```
$data = $db->query("SELECT * FROM table"); 
$data = $db->query("SELECT * FROM table WHERE id=?",array($id)); 
```

两者都有效。

# plone - 克隆和 systemctl

> ID：15461536
> 
> 赞同：1
> 
> 时间：2013-03-17T13:55:57.240
> 
> 标签：plone, systemd

我尝试将 Plone 与基于 systemctl 的启动集成（在 openSUSE 12.3 上）

作为第一次尝试，我有一个非常简单的 plone.service 文件

```
[Unit]
Description=Plone content management system
After=network.target

[Service]
Type=simple
ExecStart=/srv/plone/zeocluster/bin/plonectl start

[Install]
WantedBy=multi-user.target 
```

检查 systemclt status plone 我看到进程已启动，但它们立即再次消失。我也试过Type=Daemon，但结果是一样的。有什么提示是我的错误吗？

该服务实际上成功地找到/执行了 plonectl 脚本，只是进程很快死亡

```
linux-wezo:/etc/systemd/system # systemctl start plone.service
linux-wezo:/etc/systemd/system # systemctl status plone.service
plone.service - Plone content management system
          Loaded: loaded (/etc/systemd/system/plone.service; disabled)
          Active: inactive (dead) since Mon, 2013-03-18 22:00:50 CET; 1s ago
         Process: 25494 ExecStart=/srv/plone/zeocluster/bin/plonectl start (code=exited, status=0/SUCCESS)
          CGroup: name=systemd:/system/plone.service

Mar 18 22:00:42 linux-wezo.site systemd[1]: Starting Plone content management system...
Mar 18 22:00:42 linux-wezo.site systemd[1]: Started Plone content management system.
Mar 18 22:00:43 linux-wezo.site plonectl[25494]: zeoserver: .
Mar 18 22:00:43 linux-wezo.site plonectl[25494]: daemon process started, pid=25502
Mar 18 22:00:46 linux-wezo.site plonectl[25494]: client1: .
Mar 18 22:00:46 linux-wezo.site plonectl[25494]: daemon process started, pid=25507
Mar 18 22:00:49 linux-wezo.site plonectl[25494]: client2: .
Mar 18 22:00:49 linux-wezo.site plonectl[25494]: daemon process started, pid=25522 
```

我确实有一个 SysV 风格的初始化脚本，它通过 systemctl 工作，但我认为拥有一个服务文件会很棒，因为它应该比各种浮动的初始化脚本更通用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:02:23.420

问题是程序 plonectl 不是守护程序，它是启动 Zope 的包装脚本。您需要将类型更改为分叉，并可能告诉 systemd 在哪里可以找到 PID 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-29T19:02:08.920

Plonectl fork 守护进程。在 plone.service 中试试这个：

```
[Unit]
Description=Plone content management system
After=network.target
ConditionPathExists=/srv/plone/zeocluster/bin/plonectl

[Service]
Type=forking
ExecStart=/srv/plone/zeocluster/bin/plonectl start
ExecStop=/srv/plone/zeocluster/bin/plonectl stop
ExecReload=/srv/plone/zeocluster/bin/plonectl restart

[Install]
WantedBy=multi-user.target 
```

# c++ - 一个类可以有多线程功能吗？

> ID：15461537
> 
> 赞同：-4
> 
> 时间：2013-03-17T13:56:03.963
> 
> 标签：c++, multithreading, winapi

我写了一个可以在另一个线程中做一些工作的类：

```
 class SkeData
    {
    public:
        SkeData(INuiSensor* pSensor);
        ~SkeData();
        HANDLE StartSaveSkeData_Frames(int nFrames = 1);
        HANDLE StartSaveSkeData2File_Frames(HANDLE hFile,int nFrames = 1);
            [...]

    private:
          //Two thread functions
        static DWORD WINAPI AddFrames(LPVOID lpParam);
        static DWORD WINAPI AddFrames2File(LPVOID lpParam);
            [...]
    };

    HANDLE SkeData::StartSaveSkeData_Frames(int nFrames)
    {
        [...]
        m_hThread = CreateThread(NULL, 0, AddFrames, this, 0, NULL);
        return m_hThread;
    }

    HANDLE SkeData::StartSaveSkeData2File_Frames(HANDLE hFile,int nFrames)
    {
        [...]
        m_hThread = CreateThread(NULL, 0, AddFrames2File, this, 0, NULL);
        return m_hThread;
    }

    DWORD WINAPI SkeData::AddFrames(LPVOID lpParam)
    {
        SkeData *This = (SkeData *)lpParam;
        return This->Thread_AddFrames();
    }

    DWORD WINAPI SkeData::AddFrames2File(LPVOID lpParam)
    {
        SkeData *This = (SkeData *)lpParam;
        return This->Thread_AddFrames2File();
    }

When I built the program solution in VS2010, linking error came up like this:
SkeData.obj : error LNK2019: unresolved external symbol "private: unsigned long __thiscall SkeData::Thread_AddFrames2File(void)" (?Thread_AddFrames2File@SkeData@@AAEKXZ) referenced in function "private: static unsigned long __stdcall SkeData::AddFrames2File(void *)" (?AddFrames2File@SkeData@@CGKPAX@Z)
1>E:\***\DataCollection.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED. 
```

但是，当我删除其中一个线程函数时，它可以成功构建。因此，我猜错误的原因是关于线程函数的。但是我还是不明白为什么不能在我的课堂上再增加一个线程函数？？？

我希望任何人都可以给出更多的解释。

谢谢！

更多：对不起，当我粘贴我的代码时出现问题。我确实实现了两个线程函数......如果我没有，错误不会是这样的，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:59:31.283

从链接错误来看，您可能从未定义过 function `AddFrames2File`。由于您正在使用该函数，因此链接器（基本上是编译器中负责将所有代码组合在一起的部分）会抱怨它找不到该函数的定义。

函数的声明就是声明它的原型。也就是说，它是返回类型、名称和参数，就像您在类声明中所做的那样。

```
static DWORD WINAPI AddFrames2File(LPVOID lpParam); //lpParam can be ommited 
```

从现在开始，您可以使用此函数，因为您的编译器知道应该如何调用它。（请注意，`lpParam`可以省略，编译器不需要知道如何调用该函数）但是，您仍然需要在某个地方*定义*您的函数以实际将代码与该函数相关联。像这样：

```
static DWORD WINAPI SkeData::AddFrames2File(LPVOID lpParam)
{
    //Actual code here
    std::cout << "This function is now defined!" << std::endl;
} 
```

请注意，我`SkeData::`用来告诉编译器我正在定义什么函数。如果我不这样做，函数定义将被视为在全局命名空间（或您当前正在工作的任何命名空间）中定义一个新函数。

# wcf - 是否可以配置 WCF 服务客户端以引发自定义 FaultException？

> ID：15461540
> 
> 赞同：1
> 
> 时间：2013-03-17T13:56:28.903
> 
> 标签：wcf, error-handling, wcfserviceclient

我想知道是否可以将 WCF 服务客户端配置为在抛出错误时使用自定义类型而不是 FaultException。自定义类型将从 FaultException 继承，但也有一些关于错误的额外详细信息。

我想使用自定义 FaultException 的原因是我可以存储 SOAP 标头中的 GUID，否则会丢失。

我知道我可以手动捕获并重新抛出服务客户端返回的任何错误，但这很脆弱。我无法保证未来的开发人员也会这样做。

我考虑过对生成的服务客户端类进行子类化并将错误处理放在那里，但是只要目标服务发生变化，就会产生大量工作。

那么，是否可以配置 WCF 服务客户端为故障抛出自定义的 FaultException 类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:34:26.377

您可以创建自己的 IErrorHandler 实现：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)

覆盖 ProvideFault，然后将常规异常（包括普通 FaultException）转换为您自己的基于自定义的`FaultException<T>`，其中 T 是您自己的类型，您可以定义它以包含自定义属性。

之后，您必须将 IErrorHandler 的实现注册为服务行为，无论是在代码中还是在 web/app 配置中。

# cuda - CUDA 5 与 CUDA 4 兼容

> ID：15461541
> 
> 赞同：2
> 
> 时间：2013-03-17T13:56:39.547
> 
> 标签：cuda

CUDA 5 最近发布了，直到现在我一直在使用 CUDA 4。所以我想知道如果我安装了 CUDA 5，我在 CUDA 4 中编写的代码是否仍然可以运行？

它是完全兼容还是部分兼容？[像gpuocelot](http://code.google.com/p/gpuocelot/)这样需要 CUDA 4 的开源项目是否也可以与 CUDA 5 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-27T23:28:58.287

CUDA 4 和 CUDA 5 之间没有 100% 的兼容性。

仅举一个例子，在 CUDA 5 中，[不再允许](http://developer.download.nvidia.com/compute/cuda/5_0/rel/docs/CUDA_Toolkit_Release_Notes_And_Errata.txt)使用字符串来指示设备符号，这在 CUDA 4 中的某些 API 函数中是可能的。相反，应直接使用符号。

还指出示例代码的结构发生了显着变化，如果您使用示例代码的元素，这可能会影响您的代码。然而，在我看来，这不是一个真正的兼容性问题。

将 cuda 代码从 CUDA 4 移动到 CUDA 5 所需的更改可能很小（如果有的话）。

模拟器通常依赖于 CUDA 运行时的未发布特性，并且通常只适用于特定的 CUDA 版本。检查您选择的模拟器是否有关于所需运行时的任何声明。

# 7zip - 如何识别 7zip 存档中的反项目？

> ID：15461542
> 
> 赞同：0
> 
> 时间：2013-03-17T13:56:53.293
> 
> 标签：7zip, sharpcompress

我正在使用 SharpCompress 解压缩 7zip 存档。`IArchive`created by`ArchiveFactory.Open`返回一个，`IEnumerable<IArchiveEntry>`但`IArchiveEntry`不包含任何指示条目是否为反项的内容。

有没有办法识别反项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:39:02.313

我将此添加到项目的问题跟踪器中。

[http://sharpcompress.codeplex.com/workitem/33](http://sharpcompress.codeplex.com/workitem/33)

# php - 在编辑表单中选择列表

> ID：15461543
> 
> 赞同：0
> 
> 时间：2013-03-17T13:56:59.177
> 
> 标签：php, html, mysql, list, select

我有这段代码从Mysql的“类别”字段中收集类别，它是一个部分编辑表单，我希望在列表填充后选择之前选择的类别，代码是：

```
 <td align="right">Category</td>
     <td>
         <?php
        // Write out our query.
        $query = "SELECT id,cat_name,parent FROM categories WHERE parent='0'";
        // Execute it, or return the error message if there's a problem.
        $result = mysql_query($query) or die(mysql_error());
        $dropdown = "<select name='category'>";
        while($row = mysql_fetch_assoc($result)) {
        $dropdown .= "\r\n<option value='{$row['id']}'>{$row['cat_name']}</option>";
        }
        $dropdown .= "\r\n</select>";
        echo $dropdown;
        ?>
        </td> 
```

我不知道该怎么做？我知道我应该在我想选择的选项上输入“已选择”，但是在我填写完列表后如何选择它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:59:46.427

您可以通过这种方式使用索引选项卡`$tab["key"]`，您可以轻松找到所需的行并对其进行编辑。

编辑：您的信息不是很清楚，但我认为这是您想要做的。否则，请澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:05:11.037

在您的代码中，您没有检查用户之前选择的内容。你可以这样做：

```
$selected = '';
if($row['id']==$userSelectedOption) $selected = ' selected="selected"';
$dropdown .= "\r\n<option value='{$row['id']}'{$selected}>{$row['cat_name']}</option>"; 
```

在上面的示例中，我们有一个名为的变量`$userSelectedOption`，它表示用户已经选择的值。我们还假设它是一个类别的 ID。在您的`while`循环中，您将使用上面的 3 行而不是您的 1 行。当这呈现出列表时，所选项目将是任何匹配项`$userSelectedOption`

# android - 在android中使用两个文本观察器时获取stackoverflow

> ID：15461551
> 
> 赞同：0
> 
> 时间：2013-03-17T13:57:44.450
> 
> 标签：android

我有个问题。我有两个 Edittexts 我有一个日期。我`addTextChangeListener`用来检查文本的变化。这是代码：

```
tvDateFrom.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        Date dateFromPicker = null;
        if(listOfSBPData!=null)
            try {
                dateFromPicker = sdf.parse(tvDateFrom.getText().toString());
                String dt = tvDateFrom.getText().toString();
                SimpleDateFormat dateFormat = new SimpleDateFormat( "dd-MM-yyyy" );
                Calendar cal = Calendar.getInstance();
                cal.setTime( dateFormat.parse( tvDateFrom.getText().toString() ) );
                cal.add( Calendar.DATE, 7 );
                  int  year = cal.get(Calendar.YEAR);
                  int  month = cal.get(Calendar.MONTH);
                  int day = cal.get(Calendar.DAY_OF_MONTH);
                    tvDateTo.setText(""+day+"-"+(month+1)+"-"+year);
                    addSBPSeries();
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
});

tvDateTo.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        Date dateFromPicker = null;
        if(listOfSBPData!=null)
            try {
                dateFromPicker = sdf.parse(tvDateTo.getText().toString());
                String dt = tvDateTo.getText().toString();
                SimpleDateFormat dateFormat = new SimpleDateFormat( "dd-MM-yyyy" );
                Calendar cal = Calendar.getInstance();
                cal.setTime( dateFormat.parse( tvDateTo.getText().toString() ) );
                cal.add( Calendar.DATE, 7 );
                  int  year = cal.get(Calendar.YEAR);
                  int  month = cal.get(Calendar.MONTH);
                  int day = cal.get(Calendar.DAY_OF_MONTH);
                    tvDateFrom.setText(""+day+"-"+(month+1)+"-"+year);
                    addSBPSeries();
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}); 
```

当我在 tvDateFrom 中更改日期时，我会从 tvDateTo 编辑视图添加一周的日期。当我将日期添加到 tvDateTo 时，我会从日期中减去一周。当我只有一个文本观察器时，一切正常。例如：当我只为 tvDateFrom 设置 textChangeListener 时，一切正常，但是当我第二次添加 textchangelistener 时出现错误：

```
03-17 14:55:04.440: E/AndroidRuntime(25190): FATAL EXCEPTION: main
03-17 14:55:04.440: E/AndroidRuntime(25190): java.lang.StackOverflowError
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.graphics.Paint.getTextRunAdvances(Paint.java:1681)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.text.MeasuredText.addStyleRun(MeasuredText.java:170)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.text.MeasuredText.addStyleRun(MeasuredText.java:210)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.text.StaticLayout.generate(StaticLayout.java:283)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.text.DynamicLayout.reflow(DynamicLayout.java:298)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.text.DynamicLayout.<init>(DynamicLayout.java:174)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.makeSingleLayout(TextView.java:6613)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.makeNewLayout(TextView.java:6495)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.checkForRelayout(TextView.java:7064)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3479)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$20.onTextChanged(AmmsMeasurementsChart.java:572)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$21.onTextChanged(AmmsMeasurementsChart.java:611)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$20.onTextChanged(AmmsMeasurementsChart.java:572)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$21.onTextChanged(AmmsMeasurementsChart.java:611)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$20.onTextChanged(AmmsMeasurementsChart.java:572)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$21.onTextChanged(AmmsMeasurementsChart.java:611)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$20.onTextChanged(AmmsMeasurementsChart.java:572)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$21.onTextChanged(AmmsMeasurementsChart.java:611)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnTextChanged(TextView.java:8155)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3482)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3335)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.EditText.setText(EditText.java:90)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.setText(TextView.java:3310)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at MeasurementsChart$20.onTextChanged(AmmsMeasurementsChart.java:572)
03-17 14:55:04.440: E/AndroidRuntime(25190):    at android.widget.TextView.sendOnText 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:01:00.863

在这里试试我的答案：

[https://stackoverflow.com/a/7222993/557179](https://stackoverflow.com/a/7222993/557179)

根据您的需要进行调整。

希望能帮助到你。

# python - 在python中使用日期时间检查分钟值

> ID：15461552
> 
> 赞同：0
> 
> 时间：2013-03-17T13:57:53.533
> 
> 标签：python, datetime

假设我有一个 start_date

```
start_date = datetime.time(7, 55, 56) 
```

我创建了一个时间表：

```
timelist = []
for y in range(0, 24, 1):
    for x in range(0, 60, 5):
        start = datetime.time(y, x)
        timelist.append(start)

timelist = [datetime.time(0, 0), 
            datetime.time(0, 10), 
            datetime.time(0, 20), 
            datetime.time(0, 30), 
            datetime.time(0, 40), 
            datetime.time(0, 50), 
            datetime.time(1, 0),
            ...] 
```

`x.hour`退货`[0, 1, 2, ..., 23]` `x.minute`退货`[0, 10, 20, 30, 40, 50]`

然后我想创建一个字典`{ [time: 00:00:00, value: 0], [time: 00:10:00, value=0], ... }`

现在时间是 x。并且该值是通过检查开始时间何时创建的：

例如：

```
start_date = 07:55:56 → at 07:50:00 value = 1
start_date = 08:03:22 → at 08:00:00 value = 1
start_date = 08:18:00 → at 08:10:00 value = 1 
```

否则值为 0

我需要帮助创建用于检查分钟的 if 语句。

到目前为止，我有：

```
for x in timelist:
    if x.hour == start_date.hour:
        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:58:28.467

有点难以理解在问什么。

您想知道 start_date 属于哪个时间间隔吗？

如果是这样：

```
timelist = []
for y in range(0, 24, 1):
    for x in range(0, 60, 10):     
        # should be ten? 
        start = datetime.time(y, x)
        timelist.append(start)

timedict = {}
for start in timelist:
    timedict[start] = 0
# is it the dictionary looking for?

start_date = datetime.time(7, 55, 56)

for i in range(len(timelist)):
    if timelist[i] <= start_date:
        if i == len(timelist)-1 or start_date < timelist[i+1]
            timedict[timelist[i]] += 1  # or = 1, depend on your usage 
```

# java - 使用 RandomAccessFile 在中间插入文本之后会删除一些文本

> ID：15461555
> 
> 赞同：2
> 
> 时间：2013-03-17T13:58:13.893
> 
> 标签：java, java-io

我的示例代码

```
 String line = null;
    RandomAccessFile file = new RandomAccessFile("D:/mahtew.txt", "rw");
    System.out.println(file.getFilePointer());
    while((line = file.readLine()) != null){
        System.out.println(line);
        System.out.println(file.getFilePointer());

        if(line.contains("Text to be appended with")){
            file.seek(file.getFilePointer());
            file.write(" new text has been appended".getBytes());
            break;
        }
    }
    file.close(); 
```

demo.txt 执行前

```
one two three
Text to be appended with
five six seven
eight nine ten 
```

demo.txt 执行后

```
one two three
Text to be appended with
 new text has been appendedten 
```

我还尝试使用 setLength 在添加新文本之前更改文件的长度。但仍有一些文本正在从输出文件中修剪。任何帮助将不胜感激

谢谢马修

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:07:21.263

[`RandomAccessFile`](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)

> 随机访问文件的行为类似于存储在文件系统中的大型字节数组。

事实上，它并不关心在写操作的情况下移动数组元素（只有*指针*是先进的）。这样的操作会覆盖现有值：

> 输出操作从文件指针开始写入字节，并将文件指针前进到写入的字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:06:52.907

了解当您使用 RAF 写入时，您会覆盖以前保存在文件指针位置的数据。如果要将文本插入文件，我建议您不要使用 RAF，而只需*使用*`ArrayList<String>`包含在 BufferedReader 中的 FileReader 或包含在一个 Scanner，更改内存中保存的字符串或 StringBuilder，然后使用包装在 PrintWriter 中的 FileWriter 将更改后的数据写入新文件。

例如，

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class AppendLine {
   private static final String FILE_PATH = "src/tetris/mahtew.txt";
   private static final String MARKER_LINE = "Text to be appended with";
   private static final String TEXT_TO_ADD = "new text has been appended";

   public static void main(String[] args) {
      List<String> fileLines = new ArrayList<String>();
      Scanner scanner = null;
      try {
         scanner = new Scanner(new File(FILE_PATH));
         while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            fileLines.add(line);
            if (line.trim().equalsIgnoreCase(MARKER_LINE)) {
               fileLines.add(TEXT_TO_ADD);
            }
         }

      } catch (FileNotFoundException e) {
         e.printStackTrace();
      } finally {
         if (scanner != null) {
            scanner.close();
         }
      }

      PrintWriter pw = null;
      try {
         pw = new PrintWriter(new File(FILE_PATH));
         for (String line : fileLines) {
            pw.println(line);
         }
      } catch (FileNotFoundException e) {
         e.printStackTrace();
      } finally {
         if (pw != null) {
            pw.close();
         }
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:11:27.750

当您寻找文件的字节位置并写入数据时，字节将被覆盖。

这就是为什么你会得到这样的输出。

想象一下按下插入键在记事本中编辑某些内容。它将替换而不是在两者之间插入新数据。这里也发生了同样的事情。

编辑：

如果您想编辑文件内容，您实际上应该按照 Eel 的建议进行操作。

或者您可以获取文件的其余部分并将其添加到修改后的数据中并写入文件以避免丢失，但这会很快变得丑陋和复杂。更不用说性能惩罚了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-28T02:35:35.260

您可以在 Java 中使用 RandomAccessFile 在一个条件下实现此目的：必须固定每行的大小，否则，当写回新字符串时，它可能会覆盖下一行中的字符串。

因此，在我的示例中，我将行长设置为 100，并在创建文件并写回文件时使用空格字符串填充。

因此，为了允许更新，您需要将行的长度设置为略大于该文件中行的最长长度。

```
public class RandomAccessFileUtil {
public static final long RECORD_LENGTH = 100;
public static final String EMPTY_STRING = " ";
public static final String CRLF = "\n";

public static final String PATHNAME = "/home/mjiang/JM/mahtew.txt";

/**
 *  one two three
    Text to be appended with
    five six seven
    eight nine ten
 * 
 * 
 * @param args
 * @throws IOException
 */
public static void main(String[] args) throws IOException
{
    String starPrefix = "Text to be appended with";
    String replacedString = "new text has been appended";

    RandomAccessFile file = new RandomAccessFile(new File(PATHNAME), "rw");

    String line = "";
    while((line = file.readLine()) != null)
    {
        if(line.startsWith(starPrefix))
        {
            file.seek(file.getFilePointer() - RECORD_LENGTH - 1);
            file.writeBytes(replacedString);
        }

    }
}

public static void createFile() throws IOException
{
    RandomAccessFile file = new RandomAccessFile(new File(PATHNAME), "rw");

    String line1 = "one two three";
    String line2 = "Text to be appended with";
    String line3 = "five six seven";
    String line4 = "eight nine ten";

    file.writeBytes(paddingRight(line1));
    file.writeBytes(CRLF);
    file.writeBytes(paddingRight(line2));
    file.writeBytes(CRLF);
    file.writeBytes(paddingRight(line3));
    file.writeBytes(CRLF);
    file.writeBytes(paddingRight(line4));
    file.writeBytes(CRLF);

    file.close();

    System.out.println(String.format("File is created in [%s]", PATHNAME));
}

public static String paddingRight(String source)
{
    StringBuilder result = new StringBuilder(100);
    if(source != null)
    {
        result.append(source);
        for (int i = 0; i < RECORD_LENGTH - source.length(); i++)
        {
            result.append(EMPTY_STRING);
        }
    }

    return result.toString();
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-27T04:06:43.690

如果被替换的字符串太长，则与输入匹配的行之后的字符串将被替换。看来您必须读取文件，修改它并写回旧文件或新文件。当然，您可以选择使用多线程编程和 Java 7 的新 IO 特性来提高性能。

# c - cpack 找不到库，此目录中不存在目标

> ID：15461556
> 
> 赞同：11
> 
> 时间：2013-03-17T13:58:38.807
> 
> 标签：c, cmake, cpack

```
EDIT =================== 
```

apr-1 是 apache 可移植运行时，我自己下载并编译它来创建共享库（所以它不是由 cmake 制作的）。在目标系统上运行 CPack 后，我需要链接到这个库。

我的开发项目目录：

```
read_config/bin
           /libs
           /include
           /src
           /build 
```

对于我的 CMakeLists.txt，一切安装正常，但现在我遇到了链接问题，因为它找不到库的新位置。

我已经删除了，`LINK_DIRECTORIES(${PROJECT_SOURCE_DIR}/libs)`因为我现在不需要这个，因为我正在使用`FIND_LIBRARY`.

并添加了以下内容：

```
# Find the library in the libs folder
FIND_LIBRARY(APR_LIBS NAMES "apr-1" PATHS ${PROJECT_SOURCE_DIR}/libs)
# Print out the path to see if its correct
MESSAGE(${APR_LIBS})
# Link the library with the executable
TARGET_LINK_LIBRARIES(cfg ${APR_LIBS})

# Install the libs folder
INSTALL(DIRECTORY ${PROJECT_SOURCE_DIR}/libs/
    DESTINATION libs)

# Install the executable in the bin folder
INSTALL(TARGETS cfg 
    RUNTIME DESTINATION bin) 
```

一切都安装好了，但是当我检查可执行文件以查看它链接到的库时找不到它，`apr-1`因为它看起来在错误的位置。

```
libapr-1.so.0 => not found 
```

这是因为我已将安装包解压缩到与编译位置不同的新位置。从编译的目录中我得到了这个，它运行正常：

```
libapr-1.so.0 => /home/devel/projects/read_config/libs/libapr-1.so.0 (0xf7746000) 
```

我安装后我在目标安装机器上有这个目录结构，所以可执行文件将链接到新`libs/apr-1`库：

```
target directory/
      /bin
      /libs/apr-1 
```

非常感谢您提供任何进一步的建议，

```
======================================== 
```

gcc (GCC) 4.7.2 cmake 版本 2.8.9 Fedora 17

你好，

我收到以下错误：

```
CMake Error at src/CMakeLists.txt:14 (INSTALL):
  install TARGETS given target "apr-1" which does not exist in this
  directory. 
```

我有以下目录：

```
read_config/
       /build - out of source build
       /CMakeLists.txt
       /include - apr include files
       /libs - apr libraries
       /src - project source files *.h *.c CMakeLists.txt 
```

在我的根 CMakeLists.txt 中，我有以下内容：

```
# Name of project and compiler to use
PROJECT(read_cfg C)

# Set compiler flags
IF(CMAKE_COMPILER_IS_GNUCC)
    MESSAGE(STATUS "COMPILER IS GNUCC")
    SET(CMAKE_C_FLAGS "-Wall -Wextra -m32 -Wunreachable-code -ggdb -O0 -D_DEBUG -D_LARGEFILE64_SOURCE")
ENDIF(CMAKE_COMPILER_IS_GNUCC)

# Where the include files can be found
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/read_config/include)

# Where the libraries can be found
LINK_DIRECTORIES(${CMAKE_SOURCE_DIR}/read_config/libs)

ADD_SUBDIRECTORY(src) 
```

在我的 src 目录中，我有以下 CMakeLists.txt

```
# Create the executable and link the libraries into it
ADD_EXECUTABLE(cfg test_config.c)

# Place executable in bin directory
SET(EXECUTABLE_OUTPUT_PATH ${CMAKE_SOURCE_DIR}/bin)

# Add libraries
IF(CMAKE_COMPILER_IS_GNUCC)
  MESSAGE(STATUS "Linking cfg library")
  TARGET_LINK_LIBRARIES(cfg apr-1)
ENDIF(CMAKE_COMPILER_IS_GNUCC)

INSTALL(TARGETS cfg 
    RUNTIME 
    DESTINATION bin)
INSTALL(TARGETS apr-1 
    ARCHIVE 
    DESTINATION lib)

SET(CPACK_PACKAGE_NAME "rd_cfg")
SET(CPACK_PACKAGE_VENDOR "sun.com")
SET(CPACK_PACKAGE_DESCRIPTION_SUMMARY "rd_cfg - CPack read_config installation")
SET(CPACK_PACKAGE_VERSION "1.0.0")
SET(CPACK_PACKAGE_VERSION_MAJOR "1")
SET(CPACK_PACKAGE_VERSION_MINOR "0")
SET(CPACK_PACKAGE_VERSION_PATCH "0")
SET(CPACK_PACKAGE_INSTALL_DIRECTORY "Read_config_install_dir")

INCLUDE(CPack) 
```

问题是这里的这一行：

```
INSTALL(TARGETS apr-1 
    ARCHIVE 
    DESTINATION lib) 
```

我尝试过以下操作

```
INSTALL(TARGETS ${CMAKE_SOURCE_DIR}/libs/apr-1 
    ARCHIVE 
    DESTINATION lib) 
```

但它仍然无法找到图书馆。

并且还使用这样的路径：

```
INSTALL(TARGETS src/libs 
    ARCHIVE 
    DESTINATION lib) 
```

我希望能够像这样将目录放在那里，这样我就不必指定每个库，而只需像这样的目录：

```
INSTALL(TARGETS ${CMAKE_SOURCE_DIR}/libs 
    ARCHIVE 
    DESTINATION lib) 
```

因此它可以找到该目录中的所有库。我有大约5个。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T08:20:55.227

该错误似乎是由于调用了与通过 .txt 定义`install`的不同的 CMakeLists.txt 。`apr-1``add_library`

我猜你是`add_library(apr-1 ...)`在你的根 CMakeLists.txt 中做的，这意味着你需要调用`install(TARGETS apr-1 ARCHIVE DESTINATION lib)`.

请注意错误消息“...此目录中不存在”。不是指文件系统意义上的实际目录，而是指通过`add_subdirectory`命令产生的名义目录。

### 编辑

根据您的评论，问题似乎`apr-1`不是实际的 CMake 目标，而只是一个库。

在这种情况下，`install`命令不能是`TARGETS`版本，它必须是`install(FILES...)`or `install(DIRECTORY...)`。这可能意味着您必须使用 eg 定位库`find_library`才能获得完整路径。

### 进一步编辑

这进一步的问题是由于没有设置正确的 RPATH 标志。您需要在调用**之前**将以下行添加到 src/CMakeLists.txt中`ADD_EXECUTABLE`：

```
SET(CMAKE_SKIP_BUILD_RPATH FALSE)
SET(CMAKE_BUILD_WITH_INSTALL_RPATH FALSE) 
SET(CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/libs")
SET(CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)
LIST(FIND CMAKE_PLATFORM_IMPLICIT_LINK_DIRECTORIES "${CMAKE_INSTALL_PREFIX}/libs" isSystemDir)
IF("${isSystemDir}" STREQUAL "-1")
   SET(CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/libs")
ENDIF("${isSystemDir}" STREQUAL "-1") 
```

有关这些 CMake 变量的完整说明，请参阅有关[RPATH 处理的 CMake Wiki](http://www.cmake.org/Wiki/CMake_RPATH_handling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T07:13:48.623

尝试将此添加到您的 CMakeLists.txt

```
set(CMAKE_INSTALL_RPATH $LIBRARY_OUTPUT_PATH) 
```

# c# - 对 Windows Phone 8 应用程序中的相同图标文件感到困惑

> ID：15461559
> 
> 赞同：2
> 
> 时间：2013-03-17T13:58:44.317
> 
> 标签：c#, .net, language-agnostic, visual-studio-2012, windows-phone-8

为什么 Visual Studio 中有 2 个相同的图标？

如果您键入：

`<shell:ApplicationBarIconButton Text="new document" IconUri="" />`然后打开属性窗格并打开 ApplicationBarIconButton 元素的组合框，您会注意到此组合框有一个`add`按钮和一个`new`按钮图标。当您查看这两个图标时 - 它们是相同的。

但为什么？

我知道，在上下文中，new 和 add 都可以具有不同的含义/执行不同的操作：

例如，New 可以创建一个新文档，同时`add`可以将某些内容/添加某些内容到当前打开的文档中。

但是，如果这是推理 - 那么两个图标应该是不同的，因为这可能会导致混淆，因为应用程序栏图标的默认状态设置为不可见图标的文本，除非您点击`...`右下角的屏幕。因此，如果我在 ApplicationBar 菜单中有一个添加和一个新按钮，而在默认状态下，这可能会非常混乱，并且会迫使用户打开菜单只是为了查看哪个按钮是哪个。这违背了隐藏菜单栏文本的目的，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T22:31:19.283

我尽量不花费大量宝贵的开发时间来试图找出为什么微软决定在开发环境中实现一个默认图像而不是另一个图像的所有原因。作为开发人员，我有责任准确地选择我希望程序的外观和感觉。

SDK 附带了许多标准图标可供选择。

> C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Icons\

此外，这里是人们如何创建自己的自定义应用程序栏的方法。另一种按钮图标方法是继续使用按钮的标准`add.png`图像，如果确实需要在同一个应用程序栏上具有两种类型的操作，则使用按钮的图像。`New``check.png``Add`

```
public partial class MyPage : PhoneApplicationPage
{
    public MyPage()
    {
        InitializeComponent();

        BuildApplicationBar();
    }

    private void BuildApplicationBar()
    {
        // Set the page's ApplicationBar to a new instance of ApplicationBar.    
        ApplicationBar = new ApplicationBar();

        ApplicationBar.Mode = ApplicationBarMode.Default;
        ApplicationBar.IsVisible = true;
        ApplicationBar.Opacity = 1.0;
        ApplicationBar.IsMenuEnabled = true;

        // Create new buttons
        ApplicationBarIconButton AppBarAddButton = new ApplicationBarIconButton(new Uri("/Assets/check.png", UriKind.Relative));
        AppBarAddButton.Text = "Add";
        AppBarAddButton.Click += new EventHandler(AppBarAddButton_Click);
        ApplicationBar.Buttons.Add(AppBarAddButton);

        ApplicationBarIconButton AppBarNewButton = new ApplicationBarIconButton(new Uri("/Assets/add.png", UriKind.Relative));
        AppBarNewButton.Text = "New";
        AppBarNewButton.Click += new EventHandler(AppBarNewButton_Click);
        ApplicationBar.Buttons.Add(AppBarNewButton);
    }

    private async void AppBarAddButton_Click(object sender, EventArgs e)
    {
        //TODO: Do something for the add click action
    }

    private async void AppBarNewButton_Click(object sender, EventArgs e)
    {
        //TODO: Do something for the new click action
    }
} 
```

# php - 将带有 httprequest 的 POST 发送到 php

> ID：15461561
> 
> 赞同：1
> 
> 时间：2013-03-17T13:59:12.837
> 
> 标签：php, javascript, xmlhttprequest

我想用 http 请求和 php 向 xml 文件发送一个随机数。但我真的不知道如何添加生成的数字的值并将其添加到帖子中。

这就是我到目前为止所拥有的。

```
var x=document.getElementsByClassName("demo");
x[x.length-1].innerHTML=Math.floor((Math.random()*1000000)+1);
// Generates a random number and print it on the last demo class

var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
  //  document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("GET","/project3/php/update.php",true); //Calls the php update file
xmlhttp.send(); 
```

PHP 文件

```
<?php 
       $dom = new DOMDocument();
       $dom->load('../stickers.xml');
       $stickers = $dom->documentElement;
       $xpath = new DOMXPath($dom);
       $result = $xpath->query('/stickers/sticker[id="$POST"]/id'); //Not sure.
       $result->item(0)->nodeValue .= 'hi';
       echo $dom->saveXML();
       $dom->save('../stickers.xml');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:17:20.630

该`get`方法将参数作为 URL 中的查询字符串发送，而`post`查询字符串在 http 标头中发送：

```
xmlhttp.open("POST","/project3/php/update.php",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("random="+x[x.length-1].innerHTML); 
```

在 PHP 方面，posts 变量被添加到全局关联数组中，如下所示：

```
<?php echo $_POST['random']; 
```

# iphone - 当用户摇动 iPhone 时如何显示警报？（即使用户不使用该应用程序也应该可以工作）

> ID：15461567
> 
> 赞同：1
> 
> 时间：2013-03-17T13:59:46.173
> 
> 标签：iphone, ios, core-motion

当用户摇动 iphone 时，我想在我的应用程序中触发一个方法（显示警报）。即使用户不使用该应用程序，这也应该有效。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:03:39.317

如果您的应用程序没有在前台运行，您将无法访问加速度计。你不能做你打算用iOS做的事情，至少除非你越狱否则不能。

# python - python重载运算符

> ID：15461574
> 
> 赞同：8
> 
> 时间：2013-03-17T14:00:19.250
> 
> 标签：python, operator-overloading, string-length

我需要实现一个 DNA 类，它具有一个序列，该序列由字母表中的一串字符（'A、C、G、T'）组成，我需要重载一些运算符，如小于、大于等。

这是我的代码：

```
class DNA:
    def __init__(self, sequence):
        self.seq = sequence

    def __lt__(self, other):
        return (self.seq < other)

    def __le__(self, other):
        return(self.seq <= other)

    def __gt__(self, other):
        return(self.seq > other)

    def __ge__(self, other):
        return(len(self.seq) >= len(other))

    def __eq__(self, other):
        return (len(self.seq) == len(other))

    def __ne__(self, other):
        return not(self.__eq__(self, other)) 
```

* * *

```
dna_1=DNA('ACCGT')
dna_2=DNA('AGT')
print(dna_1 > dna_2) 
```

**问题：**

当我`print(dna_1>dna_2)`返回`False`而不是`True`......为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-17T14:01:54.427

您可能想比较`seq`s：

```
def __lt__(self, other):
    return self.seq < other.seq

etc. 
```

不与，与。`self`_ _ _`seq``other``self``seq``other``seq`

`other`这是另一个DNA。

如果您需要比较长度：

```
def __lt__(self, other):
    return len(self.seq) < len(other.seq)

etc. 
```

# jquery - 如何在 jquery 1.9 中切换具有多个目标的队列效果？

> ID：15461575
> 
> 赞同：1
> 
> 时间：2013-03-17T14:00:49.477
> 
> 标签：jquery, jquery-animate, toggle, fade, jquery-1.9

我创建了一个函数来为一个 div 设置动画，然后在单击时淡化另一个。当我再次单击时，动画将反向运行。该功能有效，但动画部分在没有动画的情况下跳转到其指定点，并且仅在反向运行时才跳转。

我相信左边距是在淡入淡出之前设置的，所以在淡入淡出完成后跳到设定点，但我不知道如何解决这个问题。

**我的问题**

如何在单击按钮时运行淡入淡出，然后是具有两个不同目标的动画。然后在切换单击以反向运行。jQuery 1.9

```
var toggle = false;
$('#btn1, #btn2').click(function(){
    $('#CtrCol').animate({marginLeft: toggle ? 251 : 0},{complete: function(){
        $('#LftCol').fadeToggle();
    }}); 
    toggle = ! toggle;
}); 
```

**我的解决方案**

```
var flag = 0;
$('#btn1, #btn2').click(function() {
    if (flag == 0) {
        $('#LftCol').fadeOut({complete: function(){
            $('#CtrCol').animate({marginLeft: 0});
        }});
        flag = 1
    }
    else if (flag == 1) {
        $('#CtrCol').animate({marginLeft: 251},{complete: function(){
            $('#LftCol').fadeIn();
        }});
        flag = 0
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:05:36.497

您可以设置一个标志以了解动画的运行方向并在 .click 函数中检查它

```
if (flag == "right") // run right anim
  flag = "left"
else // run left anim
  flag = "right" 
```

编辑：保留回调

# c# - Silverlight 从后面的代码更改值

> ID：15461580
> 
> 赞同：0
> 
> 时间：2013-03-17T14:01:21.050
> 
> 标签：c#, silverlight

```
<Canvas x:Name="c1" Canvas.Left="10" Canvas.Top="10">
</Canvas> 
```

我如何`Canvas.Left="10"`从后面的代码中更改值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:16:59.467

使用类似下面的东西：

```
Canvas.SetLeft(c1, 25); 
```

# java - 受保护的访问修饰符

> ID：15461582
> 
> 赞同：2
> 
> 时间：2013-03-17T14:01:44.757
> 
> 标签：java, variables, protected

我有以下两段代码：

```
/**
 * 
 */
package com.akshu.multithreading;

/**
 * @author akshu
 *
 */
public class MyThread extends Thread {
    protected  int b;   

    private int a;
    @Override
    public void run() {

        super.run();

        System.out.println("int a:"+a);
    }

}

-----------

package com.akshu.utility;

import com.akshu.multithreading.MyThread;

public class MyUtility extends MyThread{

    public static void main(String args[])
    {
        MyThread th1 = new MyThread();
        int d =th1.b;  // line1
        System.out.println("int d"+d);
    }

} 
```

通过上面的代码文件，我试图了解受保护的访问修饰符的目的。在文件 MyUtility 中，我试图引用 MyThread 类的变量 b。但它给了我以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The field MyThread.b is not visibilty. 
```

我担心变量 b 应该可以从子类访问，因为我已经扩展了 Mythread。但它给了我编译时错误。此外，当我在我的超类中将此变量声明为静态时，我能够直接访问它。那么当我尝试通过实例访问时，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:06:02.560

您无法从实例访问受保护的属性。您只能在继承类中访问它们。在这一行——

```
MyThread  th1  = new MyThread (); int  d  = th1 . b ; 
```

您实际上是在尝试从实例访问受保护的属性 `th1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T14:07:33.400

方法 main 不是 MyThread 的明确部分 - 如果您要实现另一个函数，例如 prtintB()，您可以使用带有“.”的直接访问。操作员。要从 main 访问它，您必须编写一个 getter 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T14:09:59.710

来自[Kathy Sierra 的](https://rads.stackoverflow.com/amzn/click/com/0071591060)巨著，解释了对`protected`范围的误解：

> 但是对于包外的子类可以访问超类（父）成员意味着什么？这意味着子类继承了成员。但是，这并不意味着包外的子类可以使用对超类实例的引用来访问该成员。换句话说，受保护=继承。受保护并不意味着子类可以将受保护的超类成员视为公共的。因此，如果 subclass-outside-the-package 获得了对超类的引用（例如，通过在子类的代码中的某处创建超类的实例），则子类不能使用超类引用上的点运算符来访问受保护的成员。对于包外的子类，受保护的成员也可能是默认的（甚至是私有的），**子类只能通过继承看到受保护的成员。**

因此，在您的情况下，您尝试使用引用来访问父类包之外的受保护成员：

```
MyThread th1 = new MyThread();
int d =th1.b;  //b cannot be reached ! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T16:16:26.677

Java 语言规范第 6.6.2.1 节将告诉你真相：

> 如果访问是通过字段访问表达式`E.Id`，where`E`是 Primary 表达式，或通过方法调用表达式`E.Id(. . .)`，where`E`是 Primary 表达式，则当且仅当类型`E`is`S`或 的子类时，才允许访问`S`。

这里`MyThread`是`C`，`MyUtility`是`S`，b 是`Id`。因此，在 MyUtility iontance 中，您不能使用对实例 pf 的引用`MyThread`来访问其`b`

# c# - 2D 图形库（请不要使用 XNA）

> ID：15461584
> 
> 赞同：23
> 
> 时间：2013-03-17T14:01:59.550
> 
> 标签：c#, graphics, 2d

由于微软正在放弃 XNA（是的，我知道人们仍然可以非常成功地使用它，但它在仅仅存在很短的一段时间后就没有被开发出来的事实说明了很多）。什么是用于简单 2D 开发的最佳 C# 图形库（类似于 Allegro、SFML、SDL 等）？最好的意思是那些正在积极开发，拥有活跃社区，并希望有一些像样的教程的人。

我尝试寻找答案，但无论如何，总是出现 XNA（也许是出于某种原因......）

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T14:04:43.987

[OpenTK](http://www.opentk.com/)或[TaoFramework](http://sourceforge.net/projects/taoframework/)。

有很多教程。其中之一可以在[这里](http://xinyustudio.wordpress.com/2008/12/01/using-opengl-in-c-taoframework/)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T14:25:04.063

我喜欢的框架：

*   对于 openGL - [OpenTK](http://www.opentk.com/)
*   DirectX - [SlimDX](http://slimdx.org/)

对于您列出的库，有一个 SDL [SDL.NET的包装器](http://sourceforge.net/projects/cs-sdl/)

重新添加评论中删除的内容（为什么？答案不是 XNA，而是 XNA 的开源实现）

此外，如果您熟悉 XNA，您可以使用[MonoGame](http://www.monogame.net/) - 正在积极开发中的 XNA 实现。Playstation Mobile 和 Raspberry PI 支持正在开发中。

# javascript - jqGrid：从 json-string 重新加载数据

> ID：15461597
> 
> 赞同：0
> 
> 时间：2013-03-17T14:03:33.417
> 
> 标签：javascript, jqgrid

我知道，SO 上存在几个类似的问题，但尽管如此，我还是创建了这个问题，因为：
- 我仍然不明白 :)
- 我想创建一个可能会更完整地涵盖问题的主题。

我以简化的方式重建了我的生产设置，它可以通过下面的链接获得。简而言之 - 我有简单的 jqGrid，它使用`jsonstring`as`dataType`和`datastr`JSON 数据。然后通过触发这个：

```
$("#grid").setGridParam({'datastr': myNewData}).trigger('reloadGrid'); 
```

我试图在网格中重新加载数据，但它不起作用。我错过了什么？

ps
对我来说也很重要，该网格具有定义为的摘要行`userdata`。

## [下载设置](http://www.sendspace.com/file/hgh7rv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:17:54.723

很少需要使用其他`datatype`值作为`"local"`,`"json"`或. 其他的大多数用法可以很容易地替换为树的主要数据类型。如果使用,或者在加载数据后将**变为（例如参见源代码**[行](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L1888)）。所以如果你真的需要使用，你可以通过使用来修复重新加载`"jsonp"``"xml"``datatype``"jsonstring"``"xmlstring"``"clientSide"``datatype`**`"local"`**`datatype: "jsonstring"`

```
$("#grid").setGridParam({
    datastr: myNewData,
    datatype: "jsonstring" // !!! reset datatype
}).trigger("reloadGrid"); 
```

此外，我可以看到您使用`pager: false`了 jqGrid 选项。这是错误的选择。如果您不需要使用本地数据分页，我建议您

1.  不包括和`pager`选项。默认值`pager: ""`已经OK。
2.  包含`rowNum`具有足够大值的参数，例如`rowNum: 10000`. 默认值为`rowNum`20。因此，如果您不想仅显示输入数据的前 20 行，则应增加`rowNum`.

最后一条建议：您应该在包含整数值的列中包含`sorttype: "integer"`（参见[文档）。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)如果用户单击列标题，它将修复数据排序。您也应该考虑使用列模板（请参阅[旧答案](https://stackoverflow.com/a/6047856/315935)）。

# arrays - MATLAB可以将函数应用于对象数组吗

> ID：15461598
> 
> 赞同：2
> 
> 时间：2013-03-17T14:03:38.240
> 
> 标签：arrays, oop, class, function, matlab

我有一个对象数组，都是同一个类。是否可以一次将函数（在类的方法部分中定义）应用于数组中的所有对象？例如，类定义是：

```
classdef myClass
        properties
            x=0;
        end

        methods
            function obj=plus1(obj)
                obj.x=obj.x+1;
            end
        end

    end 
```

现在我可以创建一个 myClass 类的对象 A：

```
A=myClass; 
```

并应用方法 plus1：

```
A=A.plus1; 
```

但是，如果我创建同一类的对象数组：

```
A(1,10)=myClass; 
```

是否可以一次将“plus1”应用于 A 的 10 个对象？

就像是：

```
A(:)=A(:).plus1; 
```

多谢你们 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:50:16.973

您可以使用`arrayfun`

```
>> A = arrayfun( @(x) x.plus1, A ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:10:26.417

只要该方法`plus1`是为对象数组定义的，它就可以工作：

```
 methods
        function obj=plus1(objList)
            for obj = objList(:)'
               obj.x=obj.x+1;
            end
        end
    end 
```

现在你可以调用`A = plus1(A)`or `A=A.plus1`even if`A`是一个对象数组。

# javascript - 如何使用 socket.io 触发消息？

> ID：15461600
> 
> 赞同：3
> 
> 时间：2013-03-17T14:03:43.143
> 
> 标签：javascript, html, node.js, socket.io

如何使用 html5 中的按钮发送消息？

这是我的代码：

服务器：

```
var io = require('socket.io').listen(72);

io.on('connection', function(client){
    client.send('{"success": 1}');
    client.on('message', function(data) {
        console.log('Client:', data); 
    }); 
    client.on('disconnect', function() {
        console.log('Goodbye');
    }); 
}); 
```

客户：

```
<!DOCTYPE html>
<html>

<head>
<script src="http://192.168.0.102:72/socket.io/socket.io.js"></script>
<script>
var socket = io.connect('http://192.168.0.102:72');
function doit(){
  socket.on('message', function(data) {
    socket.send("hi there");
   });
}
</script>

</head>

<body>
    <button name="Klickme" type="button" onclick="doit();">On!</button>
    <button id="off" type="button" onclick="close();">Off!</button>
</body>

</html> 
```

我的客户端/服务器上没有错误，但我也没有收到消息。有人可以给我一个提示吗？谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:07:18.940

`on`当你想监听从服务器发送的事件时使用，如果你想发送消息，你应该使用`emit`：

```
socket.emit('message', { my: 'data' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:13:01.193

`message`当您单击按钮时（在它发送之前），您的客户端等待来自服务器`hi there`。但是一旦页面加载并且客户端连接到服务器，服务器就会发送消息。那是服务器发送的唯一消息。所以客户端一直在等待来自服务器的消息。改成`doit()`这个

```
function doit(){
    socket.send("hi there");
} 
```

# apache - Nginx Apache 重启连接超时

> ID：15461606
> 
> 赞同：0
> 
> 时间：2013-03-17T14:04:17.850
> 
> 标签：apache, nginx, restart

基本上，Nginx 位于服务器的前端，在 80 端口上运行，Apache 在 8080 端口上运行，Nginx 通过代理将所有传入流量传递给 apache。问题是，如果我要重新启动 apache Web 服务器或将其关闭，Nginx 不会重试连接或显示离线页面，它只会不断加载和加载，直到超时。

有谁知道我如何让 Nginx 在 apache 重新启动或脱机时重试连接或显示脱机页面？

我确实遇到过这个，但它没有帮助而且不稳定[https://serverfault.com/questions/259665/nginx-proxy-retry-while-backend-is-restarting](https://serverfault.com/questions/259665/nginx-proxy-retry-while-backend-is-restarting)

# php - php：try-catch 未捕获所有异常

> ID：15461611
> 
> 赞同：69
> 
> 时间：2013-03-17T14:05:02.453
> 
> 标签：php, exception, try-catch

我正在尝试执行以下操作：

```
try {
    // just an example
    $time      = 'wrong datatype';
    $timestamp = date("Y-m-d H:i:s", $time);
} catch (Exception $e) {
    return false;
}
// database activity here 
```

简而言之：我初始化了一些要放入数据库的变量。如果由于某种原因初始化失败 - 例如因为 $time 不是预期的格式 - 我希望该方法返回 false 并且不将错误数据输入数据库。

但是，像这样的错误不会被“catch”语句捕获，而是被全局错误处理程序捕获。然后脚本继续。

有没有解决的办法？我只是认为这样做会更干净，而不是手动对每个变量进行类型检查，考虑到在 99% 的所有情况下都没有发生任何不好的事情，这似乎是无效的。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2018-08-06T03:18:51.770

```
try {
  // call a success/error/progress handler
} catch (\Throwable $e) { // For PHP 7
  // handle $e
} catch (\Exception $e) { // For PHP 5
  // handle $e
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-03-17T14:10:17.827

## 解决方案#1

使用[ErrorException](http://php.net/manual/en/class.errorexception.php)将错误转化为异常来处理：

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}
set_error_handler("exception_error_handler"); 
```

## 解决方案#2

```
try {
    // just an example
    $time      = 'wrong datatype';
    if (false === $timestamp = date("Y-m-d H:i:s", $time)) {
        throw new Exception('date error');
    }
} catch (Exception $e) {
    return false;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-10-17T09:12:49.283

我发现的更短：

```
set_error_handler(function($errno, $errstr, $errfile, $errline ){
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}); 
```

使所有错误成为可捕获的实例`ErrorException`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-04T16:53:49.750

可以`catch(Throwable $e)`用来捕获所有异常和错误，如下所示：

```
catch ( Throwable $e){
    $msg = $e->getMessage();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-28T07:58:30.047

也可以为`$e`catch 中的参数定义多种类型：

```
try {
    // just an example
    $time      = 'wrong datatype';
    $timestamp = date("Y-m-d H:i:s", $time);
} catch (Exception|TypeError $e) {
    return false;
} 
```

# c# - 用 c# 连接天蓝色数据库

> ID：15461615
> 
> 赞同：1
> 
> 时间：2013-03-17T14:05:30.587
> 
> 标签：c#, visual-studio-2010, azure-sql-database

我在 Azure 门户中有一个需要使用 Visual Studio 访问的数据库。我已经在服务器资源管理器中设置了数据连接，但由于这是我第一次使用 C# 数据库，我不知道如何连接到数据库。

```
 string connectionString = ConsoleApplication4.Properties.Settings.Default.ConnectionString;

 SqlConnection Conn = new SqlConnection(Connection_String); 
```

但是我在尝试连接它时看到了错误。我正在尝试设置已添加的数据连接，但我不知道如何设置。

# python - Python 中使用请求的 Post 方法

> ID：15461616
> 
> 赞同：1
> 
> 时间：2013-03-17T14:05:36.307
> 
> 标签：python, html, post, request, python-requests

我有一个简单的表单，它接受文本并通过 post 方法调用一个 php 文件 abc.php：

```
<form method='post' action="abc.php">
<input type="textarea" name="text">
<input type="submit">
</form> 
```

abc.php 的内容

```
<?php
$msg=$_POST["text"];
print $msg;
?> 
```

我编写了一个 python 脚本，用于使用 requests 库发布消息，如下所示：

```
import requests
keys={'text':'lol rofl'}
r=requests.post("http://127.0.0.1/abc.php/POST",params=keys)
print r.url
print r.text 
```

我得到以下输出（错误）：

```
 http://localhost/abc.php/POST?text=lol+rofl

<b>notice</b>:undefined index;text in C:/xampp/htdocs/abc.php on line 2 
```

**注意**：从浏览器运行时，form 和 abc.php 可以完美运行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T14:15:10.287

使用的正确参数是`data`：

[http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests](http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests)

```
Typically, you want to send some form-encoded data — much like an HTML form.
To do this, simply pass a dictionary to the data argument.
Your dictionary of data will automatically be form-encoded
when the request is made:

>>> payload = {'key1': 'value1', 'key2': 'value2'}
>>> r = requests.post("http://httpbin.org/post", data=payload) 
```

# usps - Usps 运输标签尺寸

> ID：15461619
> 
> 赞同：1
> 
> 时间：2013-03-17T14:05:55.043
> 
> 标签：usps

根据主题所说，有人知道国内和国际运输的运输标签的尺寸吗？我读过标签在 8.5x11" 不干胶纸上打印为 4x6"。4x6" 是运输标签的标准吗？

谢谢你和更多的力量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:08:50.123

AFAIK，没有强制使用的标准标签尺寸。我使用了几种尺寸组合。我主要使用 Avery 标签并在其上打印。您可以打开 MS Word，转到信封/标签或类似选项，它会为您提供各种标签大小的列表。

# java - plusOut 代码 java

> ID：15461626
> 
> 赞同：1
> 
> 时间：2013-03-17T14:06:15.337
> 
> 标签：java

我正在尝试编写一个将给出此输出的代码：

```
plusOut("12xy34", "xy") → "++xy++" 
```

它返回一个字符串，其中原始字符已被 + 替换，除了第二个字符串出现在第一个字符串中的位置，但我的代码有问题。这里是：

```
public String plusOut(String str, String word) {
  String newString = "";
  for (int i=0; i<str.length()-1; i++) {
    if (str.substring(i, word.length()).equals(word)) {
      newString = newString + str.substring(i, word.length());
    }
    else {
      newString = newString + "+";
    }
  }
  return newString;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:21:27.830

您的代码中存在一些错误，请参阅注释。

```
public String plusOut(String str, String word) {
    String newString = "";
    // iterate up to length() to catch the last char if word.length() is 1
    for (int i = 0; i < str.length(); i++) {
        // use min() to avoid an IndexOutOfRange
        String sub = str.substring(i, Math.min(i+word.length(), str.length()));
        if (sub.equals(word)) {
            newString = newString + sub;
            // skip remaining characters of word
            i += sub.length()-1;
        }
        else {
            newString = newString + "+";
        }
    }
    return newString;
} 
```

除此之外，我会使用 a`StringBuilder`而不是`+`运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:22:09.263

您真的应该告诉我们您当前的代码面临哪些具体问题。无论如何，我会这样做：

*   拆分`str`所有出现的`word`以形成`String[]`.
*   循环遍历该数组并附加一些`'+'`字符以`newString`对应于您所在数组的任何元素的长度。
*   在同一个循环迭代中，追加`word`到`newString`，除非您当然位于数组的最后一个元素上。

这就是我的意思：

```
public static String plusOut(String str, String word) {
    StringBuilder newString = new StringBuilder(str.length());
    String[] split = str.split(word);

    for (int i = 0; i < split.length; i++) {
        for (int j = 0; j < split[i].length(); j++)
            newString.append('+');

        if (i != split.length - 1)
            newString.append(word);
    }

    return newString.toString();
} 
```

哦，还有一个提示：尽量避免在循环中重复附加到字符串。如果需要，请使用 a`StringBuilder`代替。

* * *

```
System.out.println(plusOut("12xy34", "xy")); 
```

```
++xy++

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:21:37.483

我能想到的最好和最简单的方法是使用正则表达式并进行replaceAll。

一般的想法是让第二个字符用它构建一个正则表达式，并用正则表达式和替换字符替换所有。

```
public String plusOut(String str, String word) {

String regEx="[^"+Pattern.quote(word)+"]";

str.replaceAll(regEx,"+");

} 
```

请注意， Pattern.quote() 将确保您的单词不会弄乱正则表达式。

我没有尝试代码，但它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:21:48.467

这将为您做到这一点。

```
public String plusOut(String str, String word) {

    if(!str.contains(word)){
        System.out.println("Word not found in string!");
        return "Ut-oh!";
    }
    int indexOfStart = str.indexOf(word);

    StringBuilder sb = new StringBuilder();
    for(int i = 0; i<indexOfStart; i++){
        sb.append('+');
    }

    sb.append(word);

    for(int i=indexOfStart+word.length(); i < str.length(); i++){
        sb.append('+');
    }

    return sb.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T14:27:25.577

试试这个 ：

```
public static String plusOut(String word, String find) {
    StringBuilder newStr = new StringBuilder();
    int start = word.indexOf(find);
    if (start > -1) {
        for (int i = 0; i < start; i++) {
            newStr.append("+");
        }
        newStr.append(find);
        for (int i = 0; i < word.length() - (start + find.length()); i++) {
            newStr.append("+");
        }
    }
    return newStr;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T14:34:39.227

这么多答案！好吧，这也是我的：

```
public static String plusOut(String str, String word) {
    String output = "";
    int index = str.indexOf(word); // if -1 is returned, replace all chars
    for (int i= 0; i < str.length(); i++) {
        if(i == index)
        {
            output += word;
            i += word.length() -1; // because i++ will still occurr
            continue;
        }
        output += "+";
    }
    return output;
} 
```

并在 main 中测试代码：

```
/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    String test = "somethinghello12345.1!#";
    System.out.println(test + " -> " + plusOut(test, "hello"));

    test = "somethinghello12345.1!#";
    System.out.println(test + " -> " + plusOut(test, "not gonna work"));
} 
```

将产生输出：

```
somethinghello12345.1!# -> +++++++++hello+++++++++
somethinghello12345.1!# -> +++++++++++++++++++++++ 
```

# mysql - 如何过滤表

> ID：15461627
> 
> 赞同：1
> 
> 时间：2013-03-17T14:06:19.563
> 
> 标签：mysql, sql

我有一个`table - Network_Users`包含`users`. 我正在尝试设计一个查询，允许我选择所有具有彼此链接的用户。所以每个`userId-relatedUserId`关系也是一个relatedUserId-userId 关系。

用户用户
ID

Network_Users
userId
relatedUserId

谁能提出一个好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:08:21.043

```
select *
from    network_users  a, 
        network_users  b
where   a.userid    =   b.relateduserid
and     b.userid    =   a.relateduserid 
```

为古老的连接语法道歉 - 对于自连接，我发现这更清楚了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:49:33.260

如果您想选择图表中的所有关系，您可以使用此代码

```
WITH REU AS
(
  Select 
    NU.UserId ,
    NU.RUserId ,
    UserIdMap = Convert(varchar(max), NU.UserId) + '->' + Convert(varchar(max),     NU.RUserId)
  From NetworkUser As NU 
  --Where 
    --( NU.RUserId Not In ( Select NUSub.UserId From NetworkUser As NUSub   ) ) -- Find     Last Nodes 

    Union All

  Select 
NU.UserId ,
NU.RUserId ,
UserIdMap = Convert(varchar(max) , NU.UserId ) + '->' + REU.UserIdMap 
  From NetworkUser As NU 
 Inner Join REU On 
                ( NU.RUserId = REU.UserId )
                And
                ( CHARINDEX( Convert(varchar(max) , NU.UserId ) ,   REU.UserIdMap ) <= 0 ) -- Stop Loop
) 
SELECT * 
  FROM REU

Go

GO

/****** Object:  Table [dbo].[NetworkUser]    Script Date: 3/17/2013 8:09:41 AM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[NetworkUser](
[UserId] [int] NOT NULL,
[RUserId] [int] NOT NULL,
     CONSTRAINT [PK_NetworkUser] PRIMARY KEY CLUSTERED 
    (
[UserId] ASC,
[RUserId] ASC
   )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF,         ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
    ) ON [PRIMARY]

GO

/****** Object:  Table [dbo].[Users]    Script Date: 3/17/2013 8:09:46 AM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Users](
    [UserId] [int] NOT NULL,
[Name] [nvarchar](50) NULL,
 CONSTRAINT [PK_Users] PRIMARY KEY CLUSTERED 
(
[UserId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

你可以得到这样的结果

> 4->8

6->8

7->8

1->7->8

3->7->8

6->7->8

5->6->7->8

2->5->6->7->8

4->5->6->7->8

3->4->5->6->7->8

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T04:27:26.037

如果您想找到双重关系，请使用它

```
Select 
*
From NetworkUser As N1
Inner Join NetworkUser As N2 On 
      ( N1.UserId = N2.RUserId And N1.RUserId = N2.UserId ) 
```

# php - codeigniter 中的模型返回值

> ID：15461632
> 
> 赞同：2
> 
> 时间：2013-03-17T14:07:03.687
> 
> 标签：php, codeigniter

我将模型的返回值存储在`$result`：

```
$result = $this->absensi_m->absensi(); 
```

根据我在`absensi()`函数中返回的内容， 的值`$result`将是以下之一：

*   错误的
*   'sudah absen' （字符串）
*   1（表示成功）

然后我尝试查看`$result`使用的值`echo $result;`，它返回**1**

但是，当我尝试`$result`用于某些验证时，我遇到了一个奇怪的错误：

```
 if($result == FALSE)
            $data['result'] = 'Anda Belum Terdaftar, Silahkan Daftar Dahulu :D';
        else if($result == 'sudah absen')
            $data['result'] = 'Anda Sudah Absen Hari Ini :D';
        else 
            $data['result'] = 'Selamat Datang, '.$this->input->post('txtNama').'! ^^'; 
```

尽管 的值为 `$result`1 **，**但第二个 if( `$result == 'sudah absen'`) 始终返回**TRUE**。

这是怎么回事？谢谢：D

这是`absensi()`我模型中的功能：

```
public function absensi() {
        $nama = $this->input->post('txtNama');
        $tanggal = date('Y-m-d', now());

        $this->db->select('umat_id');
        $terdaftar = $this->db->get_where('msumat', array('nama' => $nama));

        $row = $terdaftar->row_array();
        $sudah_absen = $this->db->get_where('msabsensi', array('umat_id' => $row['umat_id'], 'absensi_tanggal' => $tanggal));

        if($terdaftar->num_rows() != 0 && $sudah_absen->num_rows() == 0)
        {
            $data_umat = array(
            'umat_id' => $row['umat_id'],
            'status' => 'H',
            'absensi_tanggal' => date('Y-m-d')
            );

            return $this->db->insert('msabsensi', $data_umat);
        }
        else if($sudah_absen->num_rows() != 0)
            return 'sudah absen';
        else
            return FALSE;
    } 
```

**回答：** 我会在这里回答，因为您可能会对很多评论/对话感到困惑。

我通过使用`var_dump()`and意识到发生了什么`echo`（**感谢下面的两个答案**）：

```
$result = $this->absensi_m->absensi();
var_dump($result);
echo $result; 
```

`var_dump()`返回`bool(true)`时返回 1。这`echo`意味着发生此问题是因为我认为该`$result`值为 1（整数），而实际值为 TRUE（布尔）。

结论是：使用 TRUE(bool) 值回显变量将导致 1(integer)，因此请使用`var_dump()`代替`echo`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T14:16:01.447

首先你不能返回：

```
return $this->db->insert('msabsensi', $data_umat); 
```

做这个：

```
 $this->db->insert('msabsensi', $data_umat);
 return ...-> 1 or true or what you need 
```

那么你应该这样做：

```
if(!$result){
            $data['result'] = 'Anda Belum Terdaftar, Silahkan Daftar Dahulu :D';
        }
    if($result == 'sudah absen'){
            $data['result'] = 'Anda Sudah Absen Hari Ini :D';
         }
       if($result && $result !== 'sudah absen'){
            $data['result'] = 'Selamat Datang, '.$this->input->post('txtNama').'! ^^';
          } 
```

然后用于`var_dump();`检查结果是什么：

```
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T14:15:53.753

你确定这正在发生吗？你确定`$result=1`吗？

我觉得很难相信。这是您的代码的[小提琴](http://sandbox.onlinephpfunctions.com/code/e9efb3fdeec4d44b266ed0b179a2eec8c1247ff8)输出

你的函数`true`不返回`1`

您应该添加`else if($result === 'sudah absen')`以严格检查结果。

# sql-server - 无法获取 Crystal 报告 8.5 报告以在 Windows 8 下为 VB6 项目运行

> ID：15461639
> 
> 赞同：0
> 
> 时间：2013-03-17T14:07:30.787
> 
> 标签：sql-server, windows-8, vb6, crystal-reports, crystal-reports-8.5

我在visual basic 6中有一个相当大的代码库。数据库服务器是sql server 2000。对于报表，我们使用的是Crystal Reports 8.5。经过大量的谷歌搜索，我已经成功地安装了先决条件，包括 Visual Basic 运行时 + sp6 组件和 Windows 8 上的所有其他内容。与在 Windows 8 上安装 Visual Basic 组件的唯一区别在于，我必须取消选中 Data Access->Ado、RDS 和 Ole Db Providers 的安装。现在我的水晶报表没有从我的程序内部打开，水晶报表 8.5 报表设计器。我得到的错误是“无法打开 SQL Server”。有没有人有办法解决吗？如何手动安装 ADO、RDS 和 OLEDB 提供程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:48:28.743

请参阅此处：[为 SQL Server 安装 OLE DB 提供程序和](http://msdn.microsoft.com/en-us/library/aa198252%28v=sql.80%29.aspx)[本页](http://www.microsoft.com/en-us/download/details.aspx?id=15748) 中间，其中 ASOLEDB9.msi 包（32 位和 64 位版本）。这些包将安装 sqloledb 提供程序。

# c++ - 修改编译后的exe描述

> ID：15461642
> 
> 赞同：1
> 
> 时间：2013-03-17T14:07:43.453
> 
> 标签：c++, winapi, versioninfo, fileversioninfo

我想修改已编译 exe 的版本信息以更改描述。

我自己看了一点，发现我需要使用 UpdateRessource 函数，我做到了这一点。

```
LPBYTE lpBuffer = new BYTE[200];
UpdateResource(filehandle, 
    RT_VERSION, 
    MAKEINTRESOURCE(1), 
    MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), 
    (LPVOID) lpBuffer, 
    sizeof(lpBuffer) 
```

我不太清楚的部分是lpBuffer。我只想更改包含文件描述的资源部分。

我的猜测是我必须从 exe 加载旧版本并对其进行一些修改，但我不太确定它的结构。

# forms - 表单提交并不总是有效

> ID：15461643
> 
> 赞同：1
> 
> 时间：2013-03-17T14:08:18.103
> 
> 标签：forms, codeigniter, submission

我试图在这里找出问题，但我不明白为什么它不起作用。我有一个编辑表单，99% 的时间都可以提交，但对于某些记录却没有。这是表单上的一些代码：

```
<?php echo form_open('administration/categories/edit_offer_content_success')?>
<table cellpadding="6" cellspacing="0" class="admin-panel table_style">
<tr>
<th><b>Edit Offer</b><?php echo form_hidden('id',$offer->id)?></th>
</tr>
<tr>
<td>Name:<br /><?php echo form_input(array('name' => 'name', 'value' => $offer->name, 'size' => '100'))?></td>
</tr>  
<tr>
  <td align="center" valign="middle" height="20"><?php echo form_submit('','Save')?></td>
</tr>
</table>
<?php echo form_close()?> 
```

当您单击保存按钮时，它应该转到 edit_offer_contents 功能，但在某些记录上，它会转到站点的索引页面。我删除了该函数中的所有代码并将其设置为加载调试页面，而不是希望追踪错误发生的位置，但是在不会保存的记录上，它仍然会转到站点的索引页面，所以它看起来它没有使用该功能，但我不明白为什么。据我所知，没有任何验证，我现在正用头撞墙

```
function edit_offer_content_success()
{
    $this->output->enable_profiler(TRUE);
$this->load->view('admin/debug');
//  redirect ('administration/categories/edit_offer/'.$id,'refresh');
} 
```

如果有人有任何想法，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:42:28.237

我想您将其中一列设置为数据库中的唯一键，有时尝试将这些列的值更新为某些现有值。

# android - 从 Android 中的 JSON 对象获取 BLOB

> ID：15461646
> 
> 赞同：2
> 
> 时间：2013-03-17T14:08:30.217
> 
> 标签：android, json, blob

我想从 php 读取数据，并使用 JSON Object 来获取数据。我想从数据库中获取的数据之一是 BLOB。我自己尝试了以下代码。

```
products = new JSONArray(getJSONUrl(url));
// looping through product
for (int i = 0; i < products.length(); i++) {
    JSONObject jsonObj = products.getJSONObject(i);
    try {
        placeName = jsonObj.getString(String.valueOf(TAG_PlaceName));
        placeDesc = jsonObj.getString(TAG_PlaceDesc);
        Blob blob = (Blob) jsonObj.get(TAG_placeIcon);
        byte[] byteBlob = blob.getBytes(0, (int) blob.length());
        Bitmap bmp = BitmapFactory.decodeByteArray(byteBlob, 0, byteBlob.length);
        rowItems.add(new RowItem(placeName, placeDesc, bmp));
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

*   RowItem 是我保存数据的类。

谁能指出我的代码有什么问题。我试图环顾四周，但仍然找不到解决方案。

顺便说一下，当我尝试运行该应用程序时，UI 似乎没有任何问题。只是我用来显示数据的列表视图似乎没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-23T03:35:46.223

使用此代码

```
 @Override
        protected Bitmap doInBackground(String... params) {
            String id = params[0];
            String add = "http://user localhost/ImageUpload/getImage.php?id="+id;
            URL url = null;
            Bitmap image = null;
            try {
                url = new URL(add);
                image = BitmapFactory.decodeStream(url.openConnection().getInputStream());
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return image;
        } 
```

# mysql - phpMyAdmin 中的 MySQL“#2006 - MySQL 服务器已消失”

> ID：15461648
> 
> 赞同：1
> 
> 时间：2013-03-17T14:08:37.440
> 
> 标签：mysql, phpmyadmin, debian

**问题**

我的 MySQL 数据库适用于我的 Web 应用程序。但是，当我尝试使用 phpMyAdmin 打开数据库时，我收到以下错误消息：

```
#2006 - MySQL server has gone away 
```

并且 phpMyAdmin 断开连接回到登录屏幕。其他数据库工作正常。我`ax_allowed_packet`的设置为 16。我也尝试了 64，但没有用。

这个错误最终也发生了。数据库大小约为 3 MB，因此不是很大。

**二手软件**

*   Debian 挤压 x64
*   MySQL（当前版本）
*   phpMyAdmin（当前版本）

**问题**

如何修复此错误以便再次在 phpMyAdmin 中查看和编辑我的数据库？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-02T00:21:52.573

我终于找到了。

显然，升级到 MySQL 5.6 后出现了一些不兼容问题。

为了检查并修复此类问题，您需要进行 MySQL 升级。

只需在终端上运行以下命令：

```
mysql_upgrade -u root -p 
```

输入您的密码，然后等待升级完成。

这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T14:40:20.423

我的声誉不够高，所以我无法发表评论，所以我会在这里，mysql_upgrade -u root -p 为我工作我遇到了同样的问题，升级 mysql 后，一切正常。我可以使用 phpmyadmin 登录数据库，但是当我尝试添加用户时它失败了，给 MySQL “#2006 - MySQL 服务器已消失”，请注意，在运行 mysql_upgrade -u root 之前，我还先用 yum update phpmyadmin 更新了 phpmyadmin -p。现在一切正常，谢谢！

# wcf - Windows 8 Metro RSA 加密：AsymmetricKeyAlgorithmProvider ImportPublicKey 失败

> ID：15461649
> 
> 赞同：4
> 
> 时间：2013-03-17T14:08:42.700
> 
> 标签：wcf, microsoft-metro, rsa, public-key-encryption

我试图在 Win 8 Metro 应用程序和 RESTful WCF 服务之间传递一些加密数据。最初，Metro 应用程序请求一个公钥，WCF 服务将其作为原始流返回，以避免任何讨厌的格式问题。Base 64 编码的公钥在 Metro 应用程序中被解码为字节数组。这是问题发生的地方。当我尝试调用 AsymmetricKeyAlgorithmProvider.ImportPublicKey 时，我收到错误“ASN1 bad tag value met”。

我正在使用 RSA PKCS1 进行加密。以下是相关代码：

**WCF 服务**

```
 string keyName = "This is passed in via a parameter";
     var key = !CngKey.Exists(keyName) ? CngKey.Create(CngAlgorithm2.Rsa, keyName) : CngKey.Open(keyName);

     // Create the RSA container to get keys and then dispose
     using (var rsaCng = new RSACng(key) { EncryptionPaddingMode = AsymmetricPaddingMode.Pkcs1, KeySize = 2048 })
     {
        byte[] publicBlob = rsaCng.Key.Export(CngKeyBlobFormat.GenericPublicBlob);
        publicKey = Convert.ToBase64String(publicBlob);
     } 
```

**地铁应用**

```
 public static string Encrypt(IBuffer dataBuffer, string publicKeyString)
  {
     var asymmAlg = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaPkcs1);
     // The next line fails with ASN1 bad tag value met
     var publicKey = asymmAlg.ImportPublicKey(CryptographicBuffer.DecodeFromBase64String(publicKeyString), CryptographicPublicKeyBlobType.Pkcs1RsaPublicKey);

     var encryptedData = CryptographicEngine.Encrypt(publicKey, dataBuffer, null);
     return CryptographicBuffer.EncodeToBase64String(encryptedData);
  } 
```

**编辑1：下面的更多信息**

从 WCF 服务的 2048 位密钥对导出公钥会产生 283 位长度的密钥 blob，而从 Metro 应用程序导出相同类型的公钥只有 270 位。当我导入 Metro 生成的公钥时，它会成功。知道为什么 WCF 服务的公钥上有 13 个额外的位吗？我认为那些额外的 13 位导致失败。

这是生成较短公钥 blob 的 Metro 代码：

```
var provider = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaPkcs1);
CryptographicKey standardKeyPair = provider.CreateKeyPair(2048);
byte[] standardKey = standardKeyPair.ExportPublicKey(CryptographicPublicKeyBlobType.Pkcs1RsaPublicKey).ToArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T14:23:34.097

很晚了，但也许它会帮助你或节省别人的时间......

在导入期间更改 blob 类型的类型。这真的很奇怪，但我在试验后取得了成功。

您在 WCF 中的代码可能会保持原样。

仅更改 Metro 代码：

```
public static string Encrypt(IBuffer dataBuffer, string publicKeyString)
{
    var asymmAlg = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaPkcs1);
    // The next line fails with ASN1 bad tag value met
    var publicKey = asymmAlg.ImportPublicKey(CryptographicBuffer.DecodeFromBase64String(publicKeyString), CryptographicPublicKeyBlobType.BCryptPublicKey);

    var encryptedData = CryptographicEngine.Encrypt(publicKey, dataBuffer, null);
    return CryptographicBuffer.EncodeToBase64String(encryptedData);
} 
```

所以这里唯一的变化是`BCryptPublicKey`在导入期间。然后它工作。但不要问我为什么:-)。

# ios - 在xCode中动态调试变量？

> ID：15461651
> 
> 赞同：2
> 
> 时间：2013-03-17T14:08:50.733
> 
> 标签：ios, xcode, macos, debugging, variables

我需要做什么才能让变量在 XCode 中显示它们的值？

我在自动窗格中没有它，当我将鼠标悬停在它上面时它也没有显示。这是为什么？

我可以去 Add Expression 有时它会正确显示它，我也可以做 NSLog 并记录它，但这在 2013 年看起来真的很荒谬。

我正在使用 XCode 4.6。我做错了什么，还是这个基本功能不存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:12:16.187

您可以使用内容窗格中的局部变量部分在调试时查看变量值：

![在此处输入图像描述](../Images/593cc42f9a89e36b2f334bf200f8c603.png)

您可以使用`shift`++`command`来`Y`切换上面的窗格。

有关在 xCode 中调试的更多信息，请查看以下[链接](http://developer.apple.com/library/mac/#recipes/xcode_help-debugger/articles/about_debug_area.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T00:52:13.737

在控制台中使用命令“po”（代表打印对象），例如 po [self myVariable]

这将为您提供比内容窗格中这个半无用的变量树更多的信息。

提示：
1) 确保您的构建配置设置为调试，否则您无法调试局部变量。
2) 有时您需要调试结构和原语，在这种情况下使用 'p' 而不是 'po'
3) 您可以使用点表示法 (po self.myVariable)，但对于某些数据类型，这似乎不起作用。我相信这取决于您的 xcode 版本

# php - 通过ajax将数组传递给php页面

> ID：15461657
> 
> 赞同：0
> 
> 时间：2013-03-17T14:09:39.023
> 
> 标签：php, ajax

我需要使用 AJAX 将数组传递给 php 页面。这个输入元素数组被发送到另一个页面：

```
<input type="text" name="txtCoursesNamewith[]" id="txtCoursesNamewith" size="117" > 
```

这就是我准备发送的方式：

```
var txtCoursesNamewith = $.serialize($('#txtCoursesNamewith').val()); 
```

但是在运行脚本时出现此错误：

> 类型错误：$.serialize 不是函数

如何使用 AJAX 发送数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T09:57:18.567

我面临同样的问题，我只是使用这样的代码。但首先请插入一个隐藏字段并设置文本框 ID，如下所示：

```
<input type="hidden" name="txt_count" id="txt_count" value="3" />
<input type="text" name="txtCoursesNamewith[]" id="txtCoursesNamewith1" size="117" >
<input type="text" name="txtCoursesNamewith[]" id="txtCoursesNamewith2" size="117" >
<input type="text" name="txtCoursesNamewith[]" id="txtCoursesNamewith3" size="117" >

<script type="text/javascript">
var txt_count= $('#txt_count').val();
for (i=1; i<=txt_count; i++){
   queryString += "&txtCoursesNamewith%5B%5D=" + $('#txtCoursesNamewith'+i).val();
}
</script> 
```

最后我们可以将`queryString`变量传递给ajax，然后就可以打印数组了。

```
<?php
echo "<pre>";
print_r($_GET); // or print_r($_POST);    
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:27:18.033

您不需要使用`.val()`，因为`.serialize()`适用于字段本身，而不是值。（因为它需要从字段中获取名称和值）

您也可以`serialize()`直接调用 jQuery 对象，而不是使用 jQuery 对象作为参数。像这样做：

```
var txtCoursesNamewith = $('#txtCoursesNamewith').serialize(); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:04:47.823

```
var textBoxes;   
$('input[name="txtCoursesNamewith[]"]').each(function() {
textBoxes+=$(this).val()+"|||";
}); 
```

现在`textBoxes`有了**|||文本字段的所有值** 分离并传递给 php 脚本并使用`explode()`函数来拆分每个输入值。它可以帮助你吗

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:14:57.293

因为 $.serialize($('#txtCoursesNamewith').val()) 是字符串而不是 jQuery 对象，所以它没有序列化功能。

如果要序列化输入（及其值），请使用 $('#txtCoursesNamewith').serialize();

```
$.ajax({
type: 'POST', 
url: your url,
data: $('#'+form_id).serialize(), 
  success: function(data) {
    $('#debug').html(data);
  }
}); 
```

然后在 php

```
<?php
  print_r($_POST);
?> 
```

# sql - 选择父子记录

> ID：15461661
> 
> 赞同：5
> 
> 时间：2013-03-17T14:09:55.117
> 
> 标签：sql, sql-server, sql-server-2008

如何选择公司及其子公司的所有员工？

使用 SQL Server 2008

**员工**

```
Id | Name | CompanyId 
```

**公司**

```
Id | Name | ParentCompanyId 
```

例子：

1 微软 0

2 微软印度 1

3 微软西班牙 1

我有以下查询，它只提供来自微软的员工，而不是来自微软印度和西班牙的员工。

```
SELECT Id, Name FROM Employee WHERE CompanyId=1 
```

我不擅长 SQL。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T14:22:57.810

使用 CTE 构建公司层次结构，然后将其连接回员工表：

```
with CompanyHierarchy as
(
  select Id
  from Company
  where Id = 1
  union all
  select c.Id
  from Company c
    inner join CompanyHierarchy ch on c.ParentCompanyId = ch.Id
)
select e.*
from CompanyHierarchy ch
  inner join Employees e on ch.Id = e.CompanyId 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/ed304/1)。

`CompanyId`如果要参数化语句，还可以将变量替换为CTE 的锚部分：

```
with CompanyHierarchy as
(
  select Id
  from Company
  where Id = @CompanyId
  union all
  select c.Id
  from Company c
    inner join CompanyHierarchy ch on c.ParentCompanyId = ch.Id
)
select e.*
from CompanyHierarchy ch
  inner join Employees e on ch.Id = e.CompanyId 
```

[SQL Fiddle with demo](http://sqlfiddle.com/#!3/b27245/2)，现在增加了层次结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-07T05:09:32.110

```
SELECT 
   employee.name,
   company.id 
FROM employee
INNER JOIN company 
On employee.companyId= company.id
WHERE company.id IN (1,2,3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:13:53.740

这对于查询是正确的，因为您只询问公司 ID 为 1 的记录。

您必须编写类似这样的查询。

```
SELECT Id, Name FROM Employee WHERE CompanyId in (SELECT Id FROM Company) 
```

现在我已经尝试了上述方法，它可以完成您给定的查询所需的操作。但是对于基于 Comapny/ParentCompany 的期望结果，请尝试以下查询。

```
SELECT e.Id, e.Names FROM Employee e WHERE e.CompanyId = 1 
    or e.CompanyId in (SELECT c.Id FROM Company c where c.ParentCompanyId = 1) 
```

希望这可以帮助。

# java - 从子/子/继承类中获取基类/父类/超类

> ID：15461667
> 
> 赞同：2
> 
> 时间：2013-03-17T14:10:23.110
> 
> 标签：java, sockets, serialization

我正在尝试通过套接字发送对象列表。

列表中的对象包含一个不可序列化的对象，因此无法发送，但是它的基类是完全可序列化的并包含我需要的所有字段。

所以我想做的是将列表转换为基类的列表。我认为这样做的唯一方法如下：

```
// subClassList is an ArrayList<SubClass>
ArrayList<BaseClass> baseClassList = new ArrayList<BaseClass>();
for(SubClass subClass: subClassList) {
    // cast to the base class
    baseClassList.add((BaseClass)subClass);
} 
```

然而，这不起作用，因为我仍然得到相同的 NotSerializableException 异常。通过调试代码我可以看到新列表仍然是子类的列表，即使它已经被强制转换。

有没有办法实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:14:45.450

转换引用不会改变实际对象的类型：

```
String foo = "hello";
Object bar = (Object) foo;
System.out.println(bar); // Hello
System.out.println(bar.getClass()); // java.lang.String 
```

如果你只想*有*一个基类的实例，你可以在基类中创建一个构造函数，它只是在给定一个基类的实例的情况下创建一个新的基类实例，*而不*尝试执行任何类型的深拷贝：

```
public BaseClass(BaseClass other) {
    this.x = other.x;
    this.y = other.y;
    this.z = other.z;
    // etc
} 
```

然后在您显示的代码中：

```
baseClass.add(new BaseClass(subClass)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:16:44.403

您的方法不起作用，因为即使您可以使用超类变量来引用子类对象，对象本身也是子类类型。

最好的方法是序列化子类，或者从子类中提取数据并将它们写入新创建的超类。只需有一个静态实用程序方法即可将转换构建到子类中......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:17:03.733

强制转换不会改变对象的类型。如果对象具有这种其他类型，它允许获取该对象的另一种类型的引用。向上转型从来都不是必需的。您可以使用

```
String s = "hello";
Object o = s; // no cast needed 
```

向下转换是必要的，并且仅当对象具有您将其转换为的类型时才会起作用：

```
Object o = "hello";
Object o2 = Integer.valueOf(5);
String s = (String) o; // OK because o is a String
String s2 = (String) o2; // ClassCastException, because o2 is not a String. 
```

所以，你的代码相当于

```
ArrayList<BaseClass> baseClassList = new ArrayList<BaseClass>();
for(SubClass subClass: subClassList) {
    // cast to the base class
    baseClassList.add(subClass);
} 
```

您必须使用复制构造函数创建新类型的新对象：

```
ArrayList<BaseClass> baseClassList = new ArrayList<BaseClass>();
for(SubClass subClass: subClassList) {
    // cast to the base class
    baseClassList.add(new BaseClass(subClass));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T00:12:49.990

你的问题体现了一个矛盾的术语。如果基类是可序列化的，那么它的所有派生类也是。如果您的派生类包含对不可序列化对象的引用，只需将它们设为瞬态即可。

# php - 如何在php中取消选择数据库

> ID：15461668
> 
> 赞同：0
> 
> 时间：2013-03-17T14:10:29.793
> 
> 标签：php, mysql

这是代码，我选择数据库以允许用户使用所有主题名称创建他们的数据库作为已创建数据库中的表。我在另一个数据库中创建新数据库表单时遇到问题。为此，我必须取消选择第一个选定的数据库。有人可以帮助我吗？提前致谢。

```
 <?php

    session_start();

    $con=mysql_connect("localhost","root","");

    $dept=$_SESSION['dept'];

    mysql_select_db("$dept",$con);

// getting all data from create html page

    $year=$_POST["adyear"];

    $table=$_POST["year"];

    $sem=$_POST["sem"];

    $databasename=$_POST["tablename"];

    $table1=$_POST["sub1name"];

    $table2=$_POST["sub2name"];

    $table3=$_POST["sub3name"];

    $table4=$_POST["sub4name"];

    $table5=$_POST["sub5name"];

    $table6=$_POST["sub6name"];

    if($year==""||$table1==""||$table2==""||$table3==""||$table4==""||$table5==""||$table6=="")

{

    echo"<script language=javascript>alert('oops..! you cannot leave subject field empty')</script>";

    echo"<META http-equiv='refresh'; content='0; URL=create.php'>";

}

    else

    {

    $sql="create database $dabasename";
        $s=mysql_query($sql);
        if($s)
        {

        $sql="insert into $table(".$year.",".$sem.",".$databasename.")";
            mysql_close();
            $con=mysql_connect("localhost","root","");
            mysql_select_db("$databasename",$con);
`       $sql="create table $table1(REGNO int, NAME varchar(50),Ist_Internal `int,II_Internal int,AVG int,ATTENACE int,FINAL_MARK int)";``

            mysql_query($sql);

            $sql="create table $table2(REGNO int, NAME varchar(50),Ist_Internal int,II_Internal int,AVG int,ATTENACE int,FINAL_MARK int)";

            mysql_query($sql);

    `       $sql="create table $table3(REGNO int, NAME varchar(50),Ist_Internal `int,II_Internal int,AVG int,ATTENACE int,FINAL_MARK int)";

            mysql_query($sql);

            $sql="create table $table4(REGNO int, NAME varchar(50),Ist_Internal int,II_Internal int,AVG int,ATTENACE int,FINAL_MARK int)";

            mysql_query($sql);

            $sql="create table $table5(REGNO int, NAME varchar(50),Ist_Internal int,II_Internal int,AVG int,ATTENACE int,FINAL_MARK int)";

            mysql_query($sql);

            $sql="create table $table6(REGNO int, NAME varchar(50),Ist_Internal int,II_Internal int,AVG int,ATTENACE int,FINAL_MARK int)";

            mysql_query($sql);

            echo"<script language=javascript>alert('table created now you can enter the student details')</script>";

            echo"<META http-equiv='refresh'; content='0; URL=menu.php'>";
        }

    else

    {

        echo"<script language=javascript>alert('oops...! table name already present. Give different tablename')</script>";

    echo"<META http-equiv='refresh'; content='0; URL=create.php'>";
        }

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:18:46.183

您对应用程序架构的想法是错误的。

应该只有**一个**数据库和**一**组表，都包含用户ID以区分特定用户的数据。

**这是唯一的方法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:12:47.530

关闭第一个数据库-：

```
 mysql_close($con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:13:33.177

用于[`mysql_create_db`](http://www.php.net/manual/en/function.mysql-create-db.php)创建新数据库，然后通过调用切换到它[`mysql_select_db`](http://www.php.net/manual/en/function.mysql-select-db.php)。

具体来说：

```
if(mysql_create_db($dabasename,$con))
{    
    mysql_select_db($dabasename,$con);
    $sql="insert into $table(".$year.",".$sem.",".$databasename.")"; 
```

# iphone - 将对象转换为类型作为参数传递的类

> ID：15461669
> 
> 赞同：0
> 
> 时间：2013-03-17T14:10:31.790
> 
> 标签：iphone, objective-c

我想做的是：

```
- (UIView *)getView:(UIView *)recycledView withClass:(Class)myClass
{
     myClass *currentItem = (myClass*)recycledView;
     ....
} 
```

我调用这个函数如下：

```
[self getView:myView withClass:[SpecialView class]]; 
```

出现编译错误，如果有可能实现这一点有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T15:34:03.187

强制转换是仅编译操作。您不能在运行时强制转换。在运行时，您可以使用`isKindOfClass:`来确定类。

通常，动态转换的需要表明您的代码中存在设计问题。具体来说，您没有正确利用继承或多态性。

对于这种情况，您可以添加：

```
+ (UIView*)recyleView:(UIView*)recycledView; 
```

作为所有`SpecialView`类的方法（或者它可能是抽象的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:20:18.107

对不起，你做不到。您能做的最好的事情就是强制转换为 myClass 的声明类型。强制转换不会修改对象，它们只是声明现有对象的已知（检查后）类型。

并且转换为动态类型没有任何优势，因为基于转换发生的所有编译器和 JVM 检查都是静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:19:08.340

转换发生在编译期间，因此尝试转换为在运行时确定的类型（如在 Objective-C 方法调用中）是不可能的。

# html - 匿名表格单元格的范围：Gecko 或 Webkit 对吗？

> ID：15461670
> 
> 赞同：3
> 
> 时间：2013-03-17T14:10:36.490
> 
> 标签：html, css, dom, webkit, gecko

考虑以下 HTML 标记：

```
<ul>
    <li>Short</li>
    <li>LOOOOOOOOOOOOOOOOOOONG</li>
</ul>

<table>    
    <tr>
        <td>Short</td>
    </tr>
    <tr>
        <td>LOOOOOOOOOOOOOOOOOOONG</td>
    </tr>
</table> 
```

风格与：

```
ul {
    display: table;
    margin: 0;
    padding: 0;
}

li {
    display: table-row;
}

td:hover, 
li:hover {
    background-color: gainsboro;
} 
```

您将得到两个相似的表格，每个表格都有一个短单元格和一个长单元格。根据[http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes](http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes) ，第一个表格的单元格是匿名单元格。在 Firefox 或 Chrome 中显示时，第二个表的行为相同。当您将鼠标悬停在表格行上时，其背景变为灰色。`ul`Firefox 对使用该标记的 CSS 表显示相同的行为。

然而，在 Chrome 中，第一个列表条目（CSS 表格模型中的表格行）的范围不包括使短条目与长条目一样长所需的填充，因此当您将鼠标悬停在填充上时，没有任何变化灰色的。（当您添加第二列时，行为甚至不会改变，`<ul>`元素将通过填充发光，因此`<li>`元素的范围将是两个单独的框。

您可以在以下 jsfiddle 中使用它：http: [//jsfiddle.net/wvg8n/](http://jsfiddle.net/wvg8n/)

我想知道 Firefox 或 Chrome 是否就在这里。我强烈怀疑 Chrome，或者更确切地说是 Webkit 引擎是一个有问题的引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T12:24:20.927

这是 chrome 浏览器中 display:table-row 属性的问题，您可以使用像 div 这样的块元素来完成。

```
<ul>
    <li><div>Short</div></li>
    <li><div>LOOOOOOOOOOOOOOOOOOONG</div></li>
</ul>

<table>    
    <tr>
        <td>Short<</td>
    </tr>
    <tr>
        <td>LOOOOOOOOOOOOOOOOOOONG</td>
    </tr>
</table> 
```

# debugging - 将 OpenOCD 连接到 BeagleBone，无法识别 ftdi 设备

> ID：15461671
> 
> 赞同：1
> 
> 时间：2013-03-17T14:10:38.983
> 
> 标签：debugging, jtag, ftdi, openocd

我正在尝试通过 Windows 7 x64 上的板载 FTDI JTAG 仿真器将 openOCD 连接到 BeagleBone。我已经安装了 BeagleBone 附带的 ftdi 驱动程序 64 位。当我将 BBone 连接到 Windows 时，USB 串行转换器 A 和 B 与 COM 端口一起显示。

设备管理器的硬件 ID 显示为：

```
USB\VID_0403&PID_6010 
```

我已经下载了带有 32 位和 64 位二进制文​​件和 ti_beaglebone.cfg 脚本的 openOCD 0.6.1，并且 VID PID 与上述匹配。

我试过执行：

```
openocd-x64-0.6.1.exe -f board/ti_beaglebone.cfg 
```

但它根本不识别 FTDI 并显示以下行：

```
Open On-Chip Debugger 0.6.1 (2012-10-07-10:39)
Licensed under GNU GPL v2
For bug reports, read
        http://openocd.sourceforge.net/doc/doxygen/bugs.html
Info : only one transport option; autoselect 'jtag'
adapter speed: 16000 kHz
trst_and_srst separate srst_gates_jtag trst_push_pull srst_open_drain
Warn : unable to open ftdi device (trying more): device not found
Error: unable to open ftdi device: device not found
in procedure 'init' 
```

我已经尝试过 OpenOCD 的 32 位和 64 位二进制文​​件，但没有运气。

任何帮助，将不胜感激

谢谢

# java - Gcm android应用程序触发同一设备的多个注册

> ID：15461673
> 
> 赞同：1
> 
> 时间：2013-03-17T14:11:08.320
> 
> 标签：java, google-cloud-messaging

我的 GCM 应用程序为同一设备生成多个注册。我已经搜索过这个，但找不到任何解决方案。

这是我的主要活动::

```
public void onCreate(Bundle savedInstanceState) {
    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) {
      GCMRegistrar.register(this, "952039800261");
    } else {
      Log.v(TAG, "Already registered");

    }} 
```

这是我的 onRegistered() 方法::

```
protected void onRegistered(Context arg0, final String regId) {

Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
// sets the app name in the intent
registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
registrationIntent.putExtra("sender", senderId);
startService(registrationIntent);

   // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.ludlowcastle.co.in/moksha/register.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("regId", regId));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    } 
```

我的服务器上有大约 5K 个相同设备的注册 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:25:48.090

您正在无限循环中注册。

我不使用`GCMRegistrar`该类，但我很确定它`GCMRegistrar.register(this, "952039800261");`与这些行相同：

```
Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
// sets the app name in the intent
registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
registrationIntent.putExtra("sender", senderId);
startService(registrationIntent); 
```

在我的应用程序中，这 4 行在`onCreate`我的主要活动的方法中，而不是在`GCMRegistrar`调用中。

当`onRegistered`被调用时，这意味着注册已经成功并且你有一个注册id。由于您在此方法中要求重新注册，因此会向 Google 发送新的注册请求，然后在下次注册成功时再次调用此方法。我不确定您是否在每次通话中获得不同的注册 ID，或者您是否获得相同的注册 ID，但只需从中删除提到的 4 行即可`onRegistered`解决您的问题。

# java - NullPointerException 无限发生

> ID：15461675
> 
> 赞同：-2
> 
> 时间：2013-03-17T14:11:25.170
> 
> 标签：java

我想显示从数据库到输出文本字段的记录列表。我从数据库中获取记录的方法有问题。它在托管 bean 类的构造函数中调用时导致无限循环。这是代码。

托管 bean 类的构造函数：

```
public InterViewDto() throws SQLException {

        User u = getCurrentUser();
        InterviewDao d = new InterviewDao();
        List<InterViewDto> dao1 = d.getCall(u.getEmailAddress());
        setDto(dao1);

    } 
```

从数据库中获取记录的方法：

```
public List<InterViewDto> getCall(String email) throws SQLException {
        System.out.print("fyc");
         List<InterViewDto> list = new ArrayList<InterViewDto>();

        String job = null;
        boolean exists = false;

        Connection c = null;
        try {

            c = openConnection();

            String query_check = "SELECT *  FROM interviewcall WHERE useremail = '"+email+"' ";
            Statement st = c.createStatement();
            ResultSet rs = st.executeQuery(query_check);

            while (rs.next()) {

                InterViewDto dto = new InterViewDto();
                dto.setDate( rs.getDate("time"));
                dto.setJobtitle( rs.getString("jobtitle"));
                dto.setJobtitle( rs.getString("useremail"));
                list.add(dto);
                System.out.print(list.get(0).getJobtitle());

            }       rs.close();

        } catch (Exception e) {
            System.out.println(e);

        } finally {
            c.close();
        }
        return list;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:35:37.397

你有一个循环依赖。您的 DTO 构造函数会访问数据库，这反过来会创建一个新的 DTO 来表示从数据库加载的数据，该数据会进入数据库并来回移动，直到您溢出调用堆栈。

很简单，您合并了两种互补的设计方法。

您的 InterViewDto 构造函数从 DAO 加载数据，或者 DAO 构造一个新的 InterViewDto 对象。选择一个或另一个。

在我看来，DAO 创建 DTO 对象更有意义。如果为了方便起见，您希望 DTO 委托给 DAO，请考虑使用静态方法。

```
public class InterViewDto {
    public InterViewDto() {
    }

    ...

    public static fromCurrentUser() {
        return new InterviewDao().getCall(getCurrentUser().getEmailAddress());
    }
} 
```

然后将您的构造函数更改为空。

# c# - WPF 将 ListViewItem（不是我创建的类）添加到列表视图

> ID：15461680
> 
> 赞同：0
> 
> 时间：2013-03-17T14:12:00.887
> 
> 标签：c#, wpf, listview, colors, background

直到现在，我使用添加项目到我的列表视图

```
lstView.Items.Add(new MyData("Val", 1)); 
```

问题是我不能简单地使用 items[i].Background 更改该项目的样式（例如背景）。

我尝试让 MyData 继承 ListViewItem 但绑定不起作用。

我的绑定：

```
<GridViewColumn Header="my var" DisplayMemberBinding="{Binding Path=Name}" /> 
```

正如我所说的，当我将项目添加为我自己的类时，事情行有效，但当我的类继承 listviewitem 时却不行。我还尝试使用我的班级的 DataContext 添加一个 listviewitem ，但没有成功。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:45:15.640

WPF 具有[数据模板](http://msdn.microsoft.com/en-us/library/ms742521.aspx)的概念，可将可视化与基础数据分开。[`ItemTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)ListView（与任何其他 ItemsControl 一样）通过属性为其项目提供数据模板。您可以在[样式化和模板化 ItemsControl](http://msdn.microsoft.com/en-us/library/ms742521.aspx#DataTemplating_ItemsControl)中阅读有关内容。

鉴于这个简单的 DataItem 类

```
public class DataItem
{
    public string ItemText { get; set; }
    public Brush ItemBackground { get; set; }
} 
```

该类的一个非常简单的 DataTemplate 可能只包含一个 Border 和一个 TextBlock 控件：

```
<ListView Name="listView">
    <ListView.ItemTemplate>
        <DataTemplate>
            <Border Background="{Binding ItemBackground}">
                <TextBlock Margin="4" Text="{Binding ItemText}"/>
            </Border>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

在带有 GridView 的 ListView 中，您可以指定[`CellTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridviewcolumn.celltemplate.aspx)GridViewColumn 而不是`ItemTemplate`：

```
<ListView Name="listView">
    <ListView.View>
        <GridView>
            <GridViewColumn>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Border Background="{Binding ItemBackground}">
                            <TextBlock Margin="4" Text="{Binding ItemText}"/>
                        </Border>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

现在您可以像这样简单地将 DataItems 添加到 ListView 中：

```
listView.Items.Add(new DataItem { ItemText = "Item 1", ItemBackground = Brushes.AliceBlue });
listView.Items.Add(new DataItem { ItemText = "Item 2", ItemBackground = Brushes.LemonChiffon });
listView.Items.Add(new DataItem { ItemText = "Item 3", ItemBackground = Brushes.LightCoral }); 
```

为了使 UI 对 DataItem 对象的更改做出反应，DataItem 类必须实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms133020.aspx)。

```
public class DataItem : INotifyPropertyChanged
{
    ...
} 
```

为了更好地分离数据和 UI，您不会直接将项目添加到`Items`ListView 的集合中，而是将[`ItemsSource`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性绑定到 type 的属性`ObservableCollection<DataItem>`：

```
<ListView ItemsSource="{Binding DataItems}">
    ...
</ListView> 
```

[您可以在数据绑定概述/绑定到集合](http://msdn.microsoft.com/en-us/library/ms752347.aspx#binding_to_collections)中阅读有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:15:09.600

您可以使用数据绑定，并且对于每个项目，将 BackColor 等属性关联到项目，将项目绑定（到 ObservableCollection），如果要更改颜色，只需调用 item.BackColor=...，这样就可以了！

# python - 有没有办法绕过 Python 中的命名空间/模块名称？

> ID：15461682
> 
> 赞同：1
> 
> 时间：2013-03-17T14:12:08.827
> 
> 标签：python, module, namespaces, styles

如果你有一个类似的模块`module`，你可以绕过它并在不使用模块的情况下使用内部可用的功能吗？

我导入了模块，但编译器仍然抱怨不必查找`function`. 我还是得用`module.function()`。

它有更多的功能，所以我不想一一重新定义它们，而是`module`尽可能避免打字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T14:19:00.017

在 Python 中导入只是将东西添加到您的命名空间。`import foo`如何限定导入的名称是和之间的区别`from foo import bar`。

在第一种情况下，您只需导入模块名称`foo`，这就是您可以访问其中任何内容的方式，这就是您需要这样做的原因`foo.bar()`。第二种情况，您*只* `bar`显式导入，现在您可以这样称呼它：`bar()`.

`from foo import *`将所有*可导入*名称（在特殊变量中定义的名称[`__all__`](https://stackoverflow.com/questions/44834/can-someone-explain-all-in-python)）导入当前命名空间。虽然可行，但不推荐这样做，因为您最终可能会意外覆盖现有名称。

```
foo = 42
from bar import * # bar contains a `foo`
print foo # whatever is from `bar` 
```

最佳做法是导入您需要的任何内容：

`from foo import a,b,c,d,e,f,g`

或者你可以给名字起别名

`import foo as imported_foo`

底线——尽量避免`from foo import *`。

# asp.net - 根据部分视图中的视图数据更改 BeginForm 操作？

> ID：15461695
> 
> 赞同：0
> 
> 时间：2013-03-17T14:13:10.183
> 
> 标签：asp.net, asp.net-mvc, razor, view, partial-views

我有一个在同一页面上多次存在的部分视图。这被添加到视图中：

```
@Html.Partial("PersonalTagPartial", Model.PT, new ViewDataDictionary{{"TagTypeControl", 1}} )

@Html.Partial("PersonalTagPartial", Model.PT, new ViewDataDictionary{{"TagTypeControl", 0}} ) 
```

然后在部分视图中，我得到了这样的提交表单：

```
@using (Html.BeginForm("AddPersonalTag", "Post", FormMethod.Post, new { id = "frmAddPersonalTags" })){ 
```

当 TagTypeControl 设置为 0 时，如何将 AddPersonalTag 更改为 RemovePersonalTag？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:19:53.423

试试这样：

```
@using (Html.BeginForm((ViewBag.TagTypeControl == "1" ? "AddPersonalTag" : "RemovePersonalTag"), "Post", FormMethod.Post, new { id = "frmAddPersonalTags" }))
{
    ...
} 
```

但您也可以直接将动作名称传递给部分：

```
@Html.Partial("PersonalTagPartial", Model.PT, new ViewDataDictionary { { "SubmitTo", "AddPersonalTag" } })
@Html.Partial("PersonalTagPartial", Model.PT, new ViewDataDictionary { { "SubmitTo", "RemovePersonalTag" } }) 
```

然后在部分内部：

```
@using (Html.BeginForm(ViewBag.SubmitTo, "Post", FormMethod.Post, new { id = "frmAddPersonalTags" }))
{
    ...
} 
```

# java - 为 Web 服务构建代理 servlet

> ID：15461704
> 
> 赞同：0
> 
> 时间：2013-03-17T14:13:58.607
> 
> 标签：java, web-services, proxy

我需要在 Web 服务客户端和驻留在不同平台上的服务本身之间创建一个代理。目的是在将请求传递给实际服务之前对某些 XML 节点进行一些验证。如果验证成功，客户端将像今天一样收到答案，而不会注意到代理的存在。

它将运行的平台是一个 java 服务器，所以我的第一个想法是构建一个 servlet 来完成这项任务。明天我将开始运行一些测试代码，但我会很感激任何关于如何事先实现它的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:15:47.170

这是基于 JAX-WS 提供程序的代理/网关的伪代码：

```
@WebServiceProvider
public class ServiceGateway implements Provider<SOAPMessage> {
    private static final QName SERVICE_NAME = new QName("http://ws.com",
            "Service");
    private static final QName PORT_NAME = new QName("http://ws.com", "Port");
    private static final String FAULT_MESSAGE = "fault.message";
    private static final Service service = Service.create(SERVICE_NAME);

    @Override
    public SOAPMessage invoke(SOAPMessage inboundMessage) {
        Dispatch<SOAPMessage> dispatch = service.createDispatch(PORT_NAME,
                SOAPMessage.class, Mode.MESSAGE);
        dispatch.getRequestContext().put(
                BindingProvider.ENDPOINT_ADDRESS_PROPERTY,
                "http://real.destination.address");
        // Handler is required to pass SOAPFault messages
        @SuppressWarnings("rawtypes")
        List<Handler> handlers = new ArrayList<Handler>(dispatch.getBinding()
                .getHandlerChain());
        handlers.add(new SOAPHandler<SOAPMessageContext>() {
            @Override
            public void close(MessageContext context) {
            }

            @Override
            public boolean handleFault(SOAPMessageContext context) {
                context.put(FAULT_MESSAGE, context.getMessage());
                context.setScope(FAULT_MESSAGE, Scope.APPLICATION);
                return true;
            }

            @Override
            public boolean handleMessage(SOAPMessageContext context) {
                return true;
            }

            @Override
            public Set<QName> getHeaders() {
                return null;
            }
        });
        dispatch.getBinding().setHandlerChain(handlers);

        try {
            return dispatch.invoke(inboundMessage);
        } catch (SOAPFaultException exception) {
            return (SOAPMessage) dispatch.getResponseContext().get(
                    FAULT_MESSAGE);
        }
    }
} 
```

# eclipse - 将eclipse从一台ubuntu（linux）机器复制/传输到另一台机器

> ID：15461716
> 
> 赞同：2
> 
> 时间：2013-03-17T14:15:03.790
> 
> 标签：eclipse, ubuntu-12.04

我在我的一台 ubuntu 机器上下载了 eclipse。现在我想在我的另一台 ubuntu 机器上使用 eclipse。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T16:28:50.550

在您安装了 eclipse 的计算机上：

备份包含 eclipse 的文件夹（通常在 /opt 文件夹中）

> sudo cp -r /opt/eclipse /folder/to/backup/eclipse

在你想要安装 eclipse 的那个：

1.  将eclipse复制到opt文件夹

> sudo cp -r /backup/eclipse /opt/eclipse

1.  为所有文件添加读取权限

> chmod -R +r /opt/eclipse

1.  将可执行位添加到 Eclipse 二进制文件

> chmod +x /opt/eclipse/eclipse

1.  向 /usr/bin 添加一个可执行条目

> 须藤触摸/usr/bin/eclipse
> 
> sudo chmod +x /usr/bin 日食

1.  使用您喜欢的编辑器编辑创建的文件。

> sudo gedit -w /usr/bin/eclipse

并粘贴以下内容：

```
#!/bin/sh
export ECLIPSE_HOME="/opt/eclipse" 
$ECLIPSE_HOME/eclipse $* 
```

此时您应该可以从命令行运行`eclipse`，如果要添加桌面条目，请研究如何在桌面环境中执行此操作。

# java - 循环语句的freemarker模板

> ID：15461721
> 
> 赞同：13
> 
> 时间：2013-03-17T14:15:17.103
> 
> 标签：java, freemarker

我想在 freemarker 模板中创建 for 语句。我正在阅读如何[http://freemarker.sourceforge.net/](http://freemarker.sourceforge.net/)但只有列表。我如何为语句或 foreach 创建。

```
parameter.put("size", size); 
```

我想在 freemarker 模板中创建语句，例如

```
for (int number = 1; number <= size; number++) { 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-17T14:26:15.030

从 Freemarker 手册中，您可以执行以下操作：

```
<#assign x=3>
<#list 1..x as i>
  ${i}
</#list> 
```

**编辑：**当心，如果`x`为 0（或更少），它将倒数。所以你最想要`1 ..< x`的，不包括`x`（这需要 FreeMarker 2.3.22）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T14:25:18.077

您可以使用`list`指令：

```
<ul>
<#list 1..2 as index>
    <li>${index}</li>
</#list>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-09T13:07:41.560

这里大小=2

```
<#list 0..2 as x>
<#if x gt 0>
${x}
</#if>
</#list> 
```

输出：

1

2

如果大小为零，它将不会打印任何内容。

# java - 通过用户输入画线

> ID：15461722
> 
> 赞同：0
> 
> 时间：2013-03-17T14:15:18.697
> 
> 标签：java, swing, drawing, paint

我是摇摆绘画的新手。我已经阅读了教程，但我没有得到它。当我尝试使用这些值绘制线条时，我已经在 J​​Dialogs 中从用户那里获取输入并将它们解析为整数值，但没有任何反应。请帮忙。有人告诉我使用opengl绑定JOGL是这样的吗？这是代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
class DrawingPanel extends JPanel{
int x0,y0,x1,y1;
DrawingPanel(int ix,int iy,int fx,int fy){
    setLayout(new GridBagLayout());
    x0=ix;
    y0=iy;
    x1=fx;
    y1=fy;
}
public void paintComponent(Graphics g){

    g.drawLine(x0,y0,x1,y1);
}
}
class DDA implements ActionListener{
JFrame j;
JDialog jd;
JButton ok,can;
JTextField ix,iy,fx,fy;
int x0,y0,xf,yf;
DDA(){
    j=new JFrame("DDA Algorithm");
    j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    j.setLocationByPlatform(true);
    j.setLayout(new GridBagLayout());
    j.setExtendedState(Frame.MAXIMIZED_BOTH);
    //j.setSize(500, 500);
    createandrun();
    DrawingPanel ob=new DrawingPanel(x0,y0,xf,yf);

    GridBagConstraints c=new GridBagConstraints();
    c.anchor=GridBagConstraints.PAGE_START;
    j.add(ob,c);
    //j.add(jd);
    j.setResizable(false);
    j.setVisible(true);
    //j.pack();
}
public void createandrun(){
JLabel lx,ly,rx,ry;

jd=new JDialog((Frame)null,"Input Box",true);
//jd.setSize(250, 250);
jd.setLocationRelativeTo(j);
jd.setLayout(new GridBagLayout());
GridBagConstraints c=new GridBagConstraints();

lx=new JLabel("X0 : ");
ly=new JLabel("Y0 : ");
rx=new JLabel("X1 : ");
ry=new JLabel("Y1 : ");
ix=new JTextField(10);
iy=new JTextField(10);
fx=new JTextField(10);
fy=new JTextField(10);
ok=new JButton("OK");
can=new JButton("Cancel");

c.anchor=GridBagConstraints.PAGE_START;
c.insets=new Insets(5,5,0,5);
c.gridx=c.gridy=0;
jd.add(lx,c);
c.gridx=1;
jd.add(ix,c);
c.gridx=0;
c.gridy=1;
jd.add(ly,c);
c.gridx=1;
jd.add(iy,c);
c.gridx=0;
c.gridy=2;
jd.add(rx,c);
c.gridx=1;
jd.add(fx,c);
c.gridx=0;
c.gridy=3;
jd.add(ry,c);
c.gridx=1;
jd.add(fy,c);
c.gridx=0;
c.gridy=4;
c.insets=new Insets(10,5,5,5);
jd.add(ok,c);
c.gridx=1;
//c.fill=GridBagConstraints.HORIZONTAL;
jd.add(can,c);
ok.addActionListener(this);
can.addActionListener(this);

jd.pack();
jd.setVisible(true);
}
public void actionPerformed(ActionEvent e) {
    if(e.getSource()==can){
        jd.dispose();
    }
    if(e.getSource()==ok){
        try{
            x0=Integer.parseInt(ix.getText());
            y0=Integer.parseInt(iy.getText());
            xf=Integer.parseInt(fx.getText());
            yf=Integer.parseInt(fy.getText());
            }
            catch(NumberFormatException ex){
                JOptionPane.showMessageDialog(ok,"Please only numbers!","Invalid Input", JOptionPane.INFORMATION_MESSAGE);
            }
        jd.dispose();
    }
}

public static void main(String s[]){
    SwingUtilities.invokeLater(new Runnable(){
        public void run(){
            new DDA();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:43:06.613

没有显示任何内容，因为`GridBagConstraints`没有`JFrame`设置任何`fill`或`weight`属性，因此不要`DrawingPanel`根据需要展开。你可以这样做：

```
c.fill = GridBagConstraints.BOTH;
c.weightx = 1;
c.weighty = 1; 
```

或者，您可以简单地使用默认值`BorderLayout`并`JFrame`添加面板：

```
j.add(ob); 
```

*旁注：*调用绘制子组件`super.paintComponent(g)`时不要忘记调用。`paintComponent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:23:30.860

为了使它起作用，您必须执行一些特定操作：

`paint`在你的`class DDA`而不是定义方法`paintComponent`

```
public void paint(Graphics g){
    g.drawLine(x0, y0, x1, y1);
} 
```

`DrawingPanel`将object的实例化移动`ob`到`actionPerformed` `method`in`DDA`类中，完成布局定义。一个错误是您在构造函数方法中调用构造`DrawingPanel`函数`DDA`，甚至在加载之前`x0, y0, xf, yf`，这些变量是您用作行参数的变量，因此在方法末尾包含类似这样的内容`actionPerformed` ：

```
DrawingPanel ob = new DrawingPanel(x0, y0, xf, yf);
GridBagConstraints c = new GridBagConstraints();
c.anchor = GridBagConstraints.PAGE_START;
c.fill = GridBagConstraints.BOTH;
c.weightx = 1;
c.weighty = 1;
j.add(ob, c);
j.setResizable(false);
j.setVisible(true); 
```

在 before 块之后调用in in对象的`paint`方法，如下所示：`DrawingPanel``actionPerformed``DDA`

```
ob.repaint(); 
```

# cordova - windows phone 有 phonegap 问题

> ID：15461723
> 
> 赞同：1
> 
> 时间：2013-03-17T14:15:20.900
> 
> 标签：cordova

我有在 windows phone 7 下工作的[phonegap应用程序，但我有 2 个问题。](http://phonegap.com/)

1.  轮子不转动。

    [在此处查看图片](http://s22.postimage.org/azvg4k7bl/3_17_2013_3_56_06_PM.png)

2.  当我点击任何按钮时，会出现一个像这样的灰色方块。

    [在此处查看图片](http://s23.postimage.org/4i7y7b7kr/3_17_2013_3_57_19_PM.png)

你能帮我解决这个问题吗？

这是代码：

```
<head>
 <style type="text/css">
    .BBImagesStyle
    {
        height: 85px;
        width: 85px;
    }
 </style>
</head>
<div id="WheelDiv" style="display: block; width: 100%; height: 100%; background-color: transparent; padding: 0; margin: 0;">

 <script language="javascript" type="text/javascript">
     $(document).ready(function () {

        var ua = navigator.userAgent; //Grab USER AGENT STRING
        var checker = { webOS: ua.match(/webOS/), iphone: ua.match(/iPhone/), ipad: ua.match(/iPad/), ipod: ua.match(/iPod/), blackberry: ua.match(/BlackBerry/), android: ua.match(/Android/), symbian: ua.match(/Symbian/) };

        if (checker.blackberry) {
            setTimeout(' BB();', 500);
        } else {
            var HalfscreenHeight = $(window).height();

            $("#WheelContentDiv").height(HalfscreenHeight);
            if ($(window).height() <= 620) {

                $("#WheelContentDiv").CloudCarousel(
            {
                xPos: 165,
                yPos: 75,
                yRadius: 100,
                bringToFront: false,
                minScale: 0.5,
                clickActionOnLowerIconOnly: false

            });

                var HalfscreenHeightQua = "";
                if ($(window).height() < 600) {
                    HalfscreenHeightQua = $(window).height() * 0.05;
                } else {
                    HalfscreenHeightQua = $(window).height() * 0.15;
                }

                $("#WheelContentDiv").css("padding-top", HalfscreenHeightQua + "px");
                $("#Taw3DLogo").css("padding-top", "100px");

                document.getElementById("Wheel_MedicalServices").src = "../TawuniyaMobileWeb/Images/Wheel/Wheel_MedicalServices.png";
                document.getElementById("Wheel_Tracking").src = "../TawuniyaMobileWeb/Images/Wheel/Wheel_Tracking.png";
                document.getElementById("Wheel_ContactUS").src = "../TawuniyaMobileWeb/Images/Wheel/Wheel_ContactUs.png";
                document.getElementById("Wheel_Products").src = "../TawuniyaMobileWeb/Images/Wheel/Wheel_Products.png";
                document.getElementById("Wheel_Offers").src = "../TawuniyaMobileWeb/Images/Wheel/Wheel_Offers.png";
                document.getElementById("Wheel_Locations").src = "../TawuniyaMobileWeb/Images/Wheel/Wheel_Locations.png";

            } else {

                var h = $(window).height() / 5;
                var w = $(window).width() / 2.5;
                $("#middleLogoImg").css("width", w / 2 + "px");
                $("#Taw3DLogo").css("padding-left", w / 3.2 + "px");
                $("#WheelContentDiv").CloudCarousel(
            {
                xPos: 165,
                yPos: 65,
                yRadius: h,
                xRadius: w,
                bringToFront: false,
                minScale: 0.5,
                clickActionOnLowerIconOnly: false

            });

                var HalfscreenHeight_ = $(window).height() * 0.2;
                $("#WheelContentDiv").css("padding-top", HalfscreenHeight_ + "px");

                document.getElementById("Wheel_MedicalServices").src = "Images/Wheel/Wheel_MedicalServices@2.png";
                document.getElementById("Wheel_Tracking").src = "Images/Wheel/Wheel_Tracking@2.png";
                document.getElementById("Wheel_ContactUS").src = "Images/Wheel/Wheel_ContactUs@2.png";
                document.getElementById("Wheel_Products").src = "Images/Wheel/Wheel_Products@2.png";
                document.getElementById("Wheel_Offers").src = "Images/Wheel/Wheel_Offers@2.png";
                document.getElementById("Wheel_Locations").src = "Images/Wheel/Wheel_Locations@2.png";

                $("#Taw3DLogo").css("padding-top", "180px");
                $("#Wheel_Tawuniya").css("overflow", "hidden");
                $("#WheelContentDiv").css("overflow", "");

            }
            DisableWindowScroll();
            $("#ALLPageContent").css("background-image", "url(../TawuniyaMobileWeb/Images/HomeScreenBackground.png)");
            var leftno = Math.max(0, (($(window).width() - $("#WheelContentDiv").outerWidth()) / 2) + $(window).scrollLeft()) - 20 + "px";
            $("#WheelContentDiv").css("left", leftno);
            //  alert(450);
        }
        try {
            var isWindowsPhone = /windows phone/i.test(navigator.userAgent.toLowerCase());
            if (isWindowsPhone) {
                window.external.notify("noScroll");
                setTimeout('WP2();', 1500);
            }
        } catch (e) { alert(e); }

        ModifyHeaderOnBlur(false);
        try {
            if (navigator.geolocation) {
                //navigator.geolocation.getCurrentPosition(LocationsSuccess, LocationError);
            } else {
                alert('geolocation not supported');
            }
        } catch (e) {

        }
    });
</script>
<div id="WheelContentDiv" style="width: 330px; background-color: transparent; position: fixed;">
    <div id="Taw3DLogo" style="z-index: 1000000; padding-left: 110px;">
        <img id="middleLogoImg" src="../ePortal5Core/Libs/jQuery/Ext/professorcloud_carousel/Taw3DLogo.png"
            width="110" style="visibility: hidden;" />
    </div>
    <center>
        <img style="visibility: hidden;" id="Wheel_MedicalServices" class="cloudcarousel"
            alt="" onclick="MoveToPortalCustomize('Login_Tawuniya', this);OpenMedicalServiceWidgets='True';DisableWindowScroll();Check_remember();">
        <img style="visibility: hidden;" id="Wheel_Tracking" class="cloudcarousel" alt=""
            onclick="MoveToPortalCustomize('Tracking_PreLogin', this);">
        <img style="visibility: hidden;" id="Wheel_ContactUS" class="cloudcarousel" alt=""
            onclick="MoveToPortalCustomize('ContactUS_PreLogin', this);">
        <img style="visibility: hidden;" id="Wheel_Products" class="cloudcarousel" alt=""
            onclick="MoveToPortalCustomize('Products', this);">
        <img style="visibility: hidden;" id="Wheel_Offers" class="cloudcarousel" alt="" onclick="MoveToPortalCustomize('Promotions', this);">
        <img style="visibility: hidden;" id="Wheel_Locations" class="cloudcarousel" alt=""
            onclick="MoveToPortalCustomize('Locations', this);">
    </center>
</div>
<div id="WheelContentDivBB" style="width: 100%; background-color: transparent; height: 100%;
    display: none;">
    <center>
        <table id="BBWheelTable" style="z-index: 1000000; width: 100%; height: 100%; margin-left: 0px;">
            <tr>
                <td>
                    <img id="Wheel_MedicalServicesBB" class="BBImagesStyle" src="../TawuniyaMobileWeb/Images/Wheel_MedicalServices.png"
                        alt="" onclick="MoveToPortalCustomize('Login_Tawuniya', this);OpenMedicalServiceWidgets='True';DisableWindowScroll();Check_remember();">
                </td>
                <td>
                    <img id="Wheel_TrackingBB" class="BBImagesStyle" src="../TawuniyaMobileWeb/Images/Wheel_Tracking.png"
                        alt="" onclick="MoveToPortalCustomize('Tracking_PreLogin', this);">
                </td>
                <td>
                    <img id="Wheel_ContactUSBB" class="BBImagesStyle" src="../TawuniyaMobileWeb/Images/Wheel_ContactUs.png"
                        alt="" onclick="MoveToPortalCustomize('ContactUS_PreLogin', this);">
                </td>
            </tr>
            <tr>
                <td>
                    <img id="Wheel_ProductsBB" class="BBImagesStyle" src="../TawuniyaMobileWeb/Images/Wheel_Products.png"
                        alt="" onclick="MoveToPortalCustomize('Products', this);">
                </td>
                <td>
                    <img id="Wheel_OffersBB" class="BBImagesStyle" src="../TawuniyaMobileWeb/Images/Wheel_Offers.png"
                        alt="" onclick="MoveToPortalCustomize('Promotions', this);">
                </td>
                <td>
                    <img id="Wheel_LocationsBB" class="BBImagesStyle" src="../TawuniyaMobileWeb/Images/Wheel_Locations.png"
                        alt="" onclick="MoveToPortalCustomize('Locations', this);">
                </td>
            </tr>
        </table>
    </center>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:39:18.293

对于 #1

我不确定轮播的实现，但如果它基于 mousemove（WP7 浏览器不支持开箱即用），那么请确保您使用的是最新的 Cordova for WP 7.5 版本，它为 mousemove 事件添加了一些特殊的 polyfill。也可以在index.html头文件中加入如下代码，确保没有js错误

```
<script type="text/javascript">
    window.console = {
        log: function (str) { window.external.Notify(str); }
    };

    // output errors to console log
    window.onerror = function (e) {
        console.log("window.onerror ::" + JSON.stringify(e));
    };

    console.log("Installed console !");
</script> 
```

对于 #2

[Windows Phone 7 浏览器 - 单击链接时关闭灰色阴影](https://stackoverflow.com/questions/6378008/windows-phone-7-browser-turn-off-the-gray-shading-when-links-are-clicked)

[https://github.com/triceam/WinPhone-NoGrayBox/](https://github.com/triceam/WinPhone-NoGrayBox/)

# c# - C#：从 foreach 循环中每 5 分钟调用一次方法

> ID：15461724
> 
> 赞同：1
> 
> 时间：2013-03-17T14:15:42.307
> 
> 标签：c#, .net, multithreading, timer

我的控制台应用程序正在从文本文件中读取大量数据，这些数据将保存到数据库中。为此，我将数据存储到 DataTable 中，并且我想每 5 分钟将此 DataTable 转储到 DB 中（如果我想一次转储整个数据，那么我必须用整个数据集填充 DataTable，在那种情况下，我得到了 OutOfMemoryException）。

```
public void ProcessData()
{
    string[] files=File.ReadAllLines(path)
    foreach(var item in files)
    {
        DataRow dtRow= dataTable.NewRow();
        dtRow["ID"]= .... //some code here;
        dtRow["Name"]= .... //some code here;
        dtRow["Age"]= .... //some code here;

        var timer = new Timer(v => SaveData(), null, 0, 5*60*1000);
    }
}

public void SaveData(string tableName, DataTable dataTable )
{
    //Some code Here
    //After dumping data to DB, clear DataTable
    dataTable.Rows.Clear();
} 
```

我在这里想要的是，代码将继续填充 DataTable，并且每 5 分钟它会调用 SaveData() 方法。这将继续运行，直到处理完所有文件。

但是，我已经看到，当调用 SaveData() 方法时，它会执行 4-5 次。有时，它每 5 分钟调用一次机器人。

我不知道如何在这里进行。如何解决这个问题？可以在这里使用任何其他方法吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T14:20:18.230

是否必须使用 ReadAllLines 完全读取每个文本文件，这将消耗大量内存。为什么不从文件中读取 x 行，保存到数据库，然后继续直到到达文件末尾？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T15:23:43.320

您最大的问题是`Timer`在 foreach 中实例化新实例。`Timer`每次 foreach 调用中的新对象意味着多个线程`SaveData`同时调用，这意味着`dataTable`在清除行之前可能（并且很可能）同时处理并保存到数据库中多次，从而将大部分文件复制到数据库中。

在我按要求提供问题的解决方案之前，我想指出以 5 分钟间隔保存数据具有明显的代码气味。正如已经指出的那样，我会建议一些基于某些数据大小而不是任意时间间隔来加载和保存数据的方法。也就是说，我将继续解决您的问题，假设您必须进行 5 分钟的间隔保存是有原因的。

首先，我们需要`Timer`正确设置我们的，你会注意到我在 foreach 循环之外创建的。 [`Timer`](http://msdn.microsoft.com/en-us/library/2x96zfy7%28v=vs.100%29.aspx)继续按间隔运行，而不仅仅是等待和执行一次。

其次，我们必须采取措施确保中间数据存储上的线程安全数据完整性（在您的情况下，您使用`DataTable`，但我使用的`List`是自定义类，因为`DataTable`对于我们想要做的事情来说成本太高）。[您会注意到](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)我通过在更新我们的`List`.

数据处理类的更新：

```
private bool isComplete = false;
private object DataStoreLock = new object();
private List<MyCustomClass> myDataStore;
private Timer myTimer;

public void ProcessData()
{
    myTimer = new Timer(SaveData, null, TimeSpan.Zero, TimeSpan.FromMinutes(5.0));
    foreach (var item in File.ReadLines(path))
    {
        var myData = new MyCustomClass()
            {
                ID = 0, // Some code here
                Name = "Some code here",
                Age = 0 // Some code here
            };
        lock (DataStoreLock)
        {
            myDataStore.Add(myData);
        }
    }
    isComplete = true;
}

public void SaveData(object arg)
{
    // Our first step is to check if timed work is done.
    if (isComplete)
    {
        myTimer.Dispose();
        myTimer = null;
    }
    // Our next step is to create a local instance of the data store to work on, which
    // allows ProcessData to continue populating while our DB actions are being performed.
    List<MyCustomClass> lDataStore;
    lock (DataStoreLock)
    {
        lDataStore = myDataStore;
        myDataStore = new List<MyCustomClass>();
    }
    //Some code DB code here.
} 
```

**编辑：**我已将枚举更改为通过`ReadLines`而不是`ReadAllLines`. [`ReadLines`阅读MSDN 上方法](http://msdn.microsoft.com/en-us/library/dd383503.aspx)下的备注。`ReadAllLines`将是一个阻塞调用，while`ReadLines`将允许在读取文件时处理枚举。我无法想象`foreach`如果文件已经全部读入内存，您将运行超过 5 分钟的场景。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T15:05:14.183

以下是有关如何实现代码的建议以及其他答案的建议：

```
 public void ProcessData()
    {
        int i = 1;
        foreach(var item in File.ReadLines(path)) //This line has been edited
        {
            DataRow dtRow= dataTable.NewRow();
            dtRow["ID"]= .... //some code here;
            dtRow["Name"]= .... //some code here;
            dtRow["Age"]= .... //some code here;
            if (i%25 == 0) //you can change the 25 here to something else
            {
                SaveData(/* table name */, /* dataTable */);
            }
            i++;
        }
        SaveData(/* table name */, /* dataTable */);
    }

    public void SaveData(string tableName, DataTable dataTable )
    {
        //Some code Here
        //After dumping data to DB, clear DataTable
        dataTable.Rows.Clear();
    } 
```

# javascript - 等待 GET 完成时的 Javascript setInterval

> ID：15461727
> 
> 赞同：0
> 
> 时间：2013-03-17T14:15:54.953
> 
> 标签：javascript, jquery, setinterval

您好我正在尝试刷新页面中的文本，该文本通知服务器端计算的状态，同时它们正在完成。计算从获取请求开始，并且只有在获取尚未完成时才必须进行刷新。我试图通过在 setInterval 中获取服务器上文本文件的内容并在 GET 完成后关闭该设置间隔来做到这一点。我的问题是，当我查看正在发生的事情时，一开始我只看到一个对文本文件的请求，然后什么也没有。我希望每 200 毫秒从我的代码中看到一个请求。我附上js代码并提前感谢你。onclick 启动的函数是 disps(name);

```
function instant(nn) {
    $.get("./track.txt", function (data) {
        $('[name|="' + nn + '"]').html('');
        $('[name|="' + nn + '"]').html(data);
        /*$('[name|="'+ nn +'"]').first().html('');
        $('[name|="'+ nn +'"]').first().append('<img src="loading.gif">');*/
    });
}

function disps(nn) {
    aa = $('[name|=input_data]').val();
    /* $('[name|="'+ nn +'"]').html('');
    $('[name|="'+ nn +'"]').html('Analysed');
    $('[name|="'+ nn +'"]').first().html('');
    $('[name|="'+ nn +'"]').first().append('<img src="loading.gif">'); */
    var refreshId = setInterval(instant(nn), 200);
    $.get("./loop.php?query=" + aa, function (data) {
        /* $('[name|="'+ nn +'"]').find('img').remove().end(); */
        instant2(nn, refreshId);
        $('[name|="' + nn + '"]').first().append(data);
    });
}

function instant2(nn, refreshIntervalId) {
    clearInterval(refreshIntervalId);
    $('[name|="' + nn + '"]').html('');
    $('[name|="' + nn + '"]').first().html('');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:18:48.147

```
setInterval(instant(nn) 
```

`instant(nn)` **立即**调用，就像任何其他函数调用一样。
然后它将返回值传递给`setInterval()`，就像任何其他函数调用一样。

这不是你想要做的。

相反，您想传递一个调用的函数`instant()`：

```
function() { instant(nn); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:20:18.117

激活函数并将结果值传递给 setInteval 的经典错误，而不是传递函数本身。

由于您想将参数传递给函数，而 setInterval 不会为您执行此操作，因此您需要一个闭包 - 这很简单 - 包装`instant`在一个匿名函数中：

```
setInteval(function() { instant(nn); }, 200); 
```

# java - Google App Engine Maven 插件：无法启动 devserver

> ID：15461729
> 
> 赞同：0
> 
> 时间：2013-03-17T14:15:57.540
> 
> 标签：java, google-app-engine, maven

我正在尝试迁移我的 Eclipse GAE 项目以使用 Maven 和 Google App Engine Maven 插件。

一切似乎都设置正确，测试全部通过，但是当我尝试运行 devserver 时，我得到以下输出：

[https://gist.github.com/sanity/5181682](https://gist.github.com/sanity/5181682)

您可以在此处查看源代码，包括我的 pom.xml 文件：[https ://github.com/sanity/LastCalc/tree/maven-conversion](https://github.com/sanity/LastCalc/tree/maven-conversion)

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:24:11.290

我认为这是 Java 版本问题。当前插件通过查找 ${JAVA_HOME} 来检测 java 可执行文件，您的 JAVA_HOME 指向哪里？另请参阅来源：[https ://code.google.com/p/appengine-maven-plugin/source/browse/src/main/java/com/google/appengine/DevAppServerRunner.java](https://code.google.com/p/appengine-maven-plugin/source/browse/src/main/java/com/google/appengine/DevAppServerRunner.java)

# java - 被调用方法为空，初学者jGrasp

> ID：15461732
> 
> 赞同：0
> 
> 时间：2013-03-17T14:16:08.663
> 
> 标签：java, object, methods, instance, jgrasp

```
public class AppleOrchard
{
    public static void main(String [] args)
    {
        System.out.println("Rick...");
        BushelBasket rick = new BushelBasket(0);
        rick.print();
        rick.pick(11);
        rick.pick(22);
        rick.print();
        rick.eat(4);
        rick.print();
        rick.spill();
        rick.print();

        System.out.println("Newt...");
        BushelBasket newt = new BushelBasket(100);
        newt.print();

        System.out.println( newt.isEmpty() );
        System.out.println( newt.isFull() );
        System.out.println( newt.getApples() );
        System.out.println( newt.roomLeftInBasket() );

        System.out.println("Michele...");
        BushelBasket michele = new BushelBasket(0);
        System.out.println( michele.isEmpty() );
        System.out.println( michele.isFull() );
        michele.pick(25);
        System.out.println( michele.isEmpty() );
        System.out.println( michele.isFull() );
        michele.pick(100);
        System.out.println( michele.isEmpty() );
        System.out.println( michele.isFull() );

        System.out.println("Herman...");
        BushelBasket herman = new BushelBasket(-5);  // should default to 0
        herman.print();

        System.out.println("Jon...");
        BushelBasket jon = new BushelBasket(300);  // should default to 125
        jon.print();

        System.out.println("Ron...");
        BushelBasket ron = new BushelBasket(20);  // starts with 20
        ron.print();
        ron.eat(50);  // can only eat down to zero apples
        ron.print();  // should see zero apples
        ron.eat(10);  // back to 10
        ron.pick(1000);  // basket can only hold 125 apples
        ron.print();  // should print 125

        System.out.println("Gary...");
        BushelBasket gary = new BushelBasket();  // should default to 0
        gary.print();
    }
} 
```

* * *

```
class BushelBasket
{
    int apples;

    BushelBasket(int apples)
    {   
        if(apples>125)
            this.apples = 125;
        else if(apples < 0)
            this.apples = 0;
        else
            this.apples = apples;
    }

    public void spill()
    {
        apples = 0;
    }

    public void pick(int x)
    {
        apples = apples + x;
            if (apples < 0)
                apples = 0;
            else if(apples > 125)
                apples = 125;
    }

    public void eat(int x)
    {
        apples = apples - x;
            if (apples < 0)
                apples = 0;
            else if(apples > 125)
                apples = 125;
    }

    public int getApples()
    {
        return this.apples;  
    }

    public void print()
    {
        int x = getApples();
        System.out.println("This bushel basket has " + x + " apples in it.");
    }

    public boolean isEmpty()
    {
        if (apples == 0)
        {   
            return true;
        }

        else 
        {
            return false;
        }
    }

    public boolean isFull()
    {
        int full = 125;

        if (apples >= full)
        {   
            return true;
        }

        else 
        {
            return false;
        }

    }

    public int roomLeftInBasket()
    {
        int room = 125 - apples;
        return room;                
    }
} 
```

好的，所以一切正常，我的输出与它的假设相匹配，但只有当我注释掉我无法弄清楚的这两行时。

```
BushelBasket gary = new BushelBasket();
gary.print(); 
```

当我尝试编译时，这两行导致错误，我真的不明白如何修复它。它给出的错误是“错误：类 BushelBasket 中的构造函数 BushelBasket 不能应用于给定类型；” 我有点理解，因为在调用该方法的所有其他时间它都有一个调用它的数字，但不知道如果没有该怎么办。此外，如果在调用该方法时它没有任何对象，则它的假设默认为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:23:42.067

在 Java 中，如果方法或构造函数接受 1 个参数，则必须传递 1 个参数。

您的 BushelBasket 构造函数将 int 作为参数，因此您必须使用 int 作为参数调用它。

您可以添加另一个构造函数，该构造函数会将字段保留为其默认值：

```
int apples;

BushelBasket(int apples) {
    ...
}

BushelBasket() {
    // do nothing, so apples will be 0.
} 
```

或者你可以定义另一个不带参数的构造函数，它会调用带有 int 参数的构造函数并将其传递给 0：

```
int apples;

BushelBasket(int apples) {
    ...
}

BushelBasket() {
    this(0); // calls the other BushelBasket constructor.
} 
```

# xml - 如何从 shell 执行 XPath 单行程序？

> ID：15461737
> 
> 赞同：215
> 
> 时间：2013-03-17T14:16:47.200
> 
> 标签：xml, shell, xpath, cross-platform

是否有适用于 Ubuntu 和/或 CentOS 的软件包，它有一个命令行工具，可以像执行 XPath 单行一样`foo //element@attribute filename.xml`或`foo //element@attribute < filename.xml`逐行返回结果？

我正在寻找可以让我开箱即用的东西，不需要包装器或其他改编`apt-get install foo`。`yum install foo`

以下是一些接近的例子：

诺科切里。如果我编写这个包装器，我可以按上述方式调用包装器：

```
#!/usr/bin/ruby

require 'nokogiri'

Nokogiri::XML(STDIN).xpath(ARGV[0]).each do |row|
  puts row
end 
```

XML::XPath。可以使用这个包装器：

```
#!/usr/bin/perl

use strict;
use warnings;
use XML::XPath;

my $root = XML::XPath->new(ioref => 'STDIN');
for my $node ($root->find($ARGV[0])->get_nodelist) {
  print($node->getData, "\n");
} 
```

`xpath`from XML::XPath 返回太多噪音，`-- NODE --`并且`attribute = "value"`.

`xml_grep`from XML::Twig 不能处理不返回元素的表达式，因此不能在没有进一步处理的情况下用于提取属性值。

编辑：

`echo cat //element/@attribute | xmllint --shell filename.xml`返回类似于 的噪声`xpath`。

`xmllint --xpath //element/@attribute filename.xml`返回`attribute = "value"`。

`xmllint --xpath 'string(//element/@attribute)' filename.xml`返回我想要的，但仅适用于第一场比赛。

对于几乎满足该问题的另一个解决方案，这里是一个 XSLT，可用于评估任意 XPath 表达式（需要 XSLT 处理器中的 dyn:evaluate 支持）：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
    xmlns:dyn="http://exslt.org/dynamic" extension-element-prefixes="dyn">
  <xsl:output omit-xml-declaration="yes" indent="no" method="text"/>
  <xsl:template match="/">
    <xsl:for-each select="dyn:evaluate($pattern)">
      <xsl:value-of select="dyn:evaluate($value)"/>
      <xsl:value-of select="'&#10;'"/>
    </xsl:for-each> 
  </xsl:template>
</xsl:stylesheet> 
```

运行`xsltproc --stringparam pattern //element/@attribute --stringparam value . arbitrary-xpath.xslt filename.xml`。

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2013-03-17T14:19:46.490

你应该试试这些工具：

*   `xmlstarlet`: 可以编辑、选择、变换... 默认没有安装，xpath1
*   `xmllint`：通常默认安装`libxml2-utils`，xpath1（检查我的[包装器](https://github.com/sputnick-dev/xmllint)以`--xpath`打开非常旧的版本和换行符分隔的输出（v < 2.9.9）
*   `xpath`: 通过 perl 的模块安装`XML::XPath`，xpath1
*   `xml_grep`：通过 perl 的模块安装`XML::Twig`，xpath1（有限的 xpath 使用）
*   `xidel`: xpath3
*   `saxon-lint`：我自己的项目，包装 @Michael Kay 的 Saxon-HE Java 库，xpath3

`xmllint`自带`libxml2-utils`（可与`--shell`开关交互shell）

`xmlstarlet`是`xmlstarlet`。

`xpath`自带perl的模块[`XML::Xpath`](https://metacpan.org/pod/XML::XPath)

`xml_grep`自带perl的模块[`XML::Twig`](https://metacpan.org/pod/XML::XPath)

`xidel`是`xidel`

`saxon-lint`使用[SaxonHE 9.6](http://sourceforge.net/projects/saxon/) , [XPath 3.x](http://www.w3.org/TR/xpath-functions-30) (+retro 兼容性)

前任 ：

```
xmllint --xpath '//element/@attribute' file.xml
xmlstarlet sel -t -v "//element/@attribute" file.xml
xpath -q -e '//element/@attribute' file.xml
xidel -se '//element/@attribute' file.xml
saxon-lint --xpath '//element/@attribute' file.xml 
```

*   [xmlstarlet 页面](http://xmlstar.sourceforge.net/)
*   [人 xmllint](http://xmlsoft.org/xmllint.html)
*   [xpath 页面](https://metacpan.org/pod/XML::XPath)
*   [xml_grep](http://search.cpan.org/dist/XML-Twig/)
*   [西德尔](http://videlibri.sourceforge.net/xidel.html)
*   [撒克逊林特](https://github.com/sputnick-dev/saxon-lint)

.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-17T15:08:48.880

你也可以试试我的[Xidel](http://videlibri.sourceforge.net/xidel.html)。它不在存储库中的包中，但您可以从网页下载它（它没有依赖项）。

它具有用于此任务的简单语法：

```
xidel filename.xml -e '//element/@attribute' 
```

它是支持 XPath 2 的少数工具之一。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-18T07:05:58.277

一个很可能已经安装在系统上的软件包是`python-lxml`. 如果是这样，则无需安装任何额外的软件包即可：

```
python -c "from lxml.etree import parse; from sys import stdin; print('\n'.join(parse(stdin).xpath('//element/@attribute')))" 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-17T16:28:28.710

Saxon 不仅对 XPath 2.0 这样做，而且对 XQuery 1.0 和（在商业版本中）3.0 也这样做。它不是作为 Linux 软件包提供的，而是作为 jar 文件提供的。语法（您可以轻松地将其包装在一个简单的脚本中）是

```
java net.sf.saxon.Query -s:source.xml -qs://element/attribute 
```

**2020 更新**

Saxon 10.0 包括 Gizmo 工具，可以从命令行交互或批量使用。例如

```
java net.sf.saxon.Gizmo -s:source.xml
/>show //element/@attribute
/>quit 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-05-13T17:50:33.010

在我搜索查询 maven pom.xml 文件时，我遇到了这个问题。但是我有以下限制：

*   必须跨平台运行。
*   必须存在于所有主要的 linux 发行版上，无需任何额外的模块安装
*   必须处理复杂的 xml 文件，例如 maven pom.xml 文件
*   简单的语法

我已经尝试了上述许多方法但没有成功：

*   python lxml.etree 不是标准 python 发行版的一部分
*   xml.etree 是但不能很好地处理复杂的 maven pom.xml 文件，还没有深入挖掘
*   python xml.etree 不处理 maven pom.xml 文件，原因不明
*   xmllint 也不起作用，核心转储经常在 ubuntu 12.04 “xmllint：使用 libxml 版本 20708”

我遇到的稳定、简短且可在许多平台上工作且成熟的解决方案是 ruby​​ 中内置的 rexml lib：

```
ruby -r rexml/document -e 'include REXML; 
     puts XPath.first(Document.new($stdin), "/project/version/text()")' < pom.xml 
```

启发我找到这篇文章的是以下文章：

*   [Ruby/XML、XSLT 和 XPath 教程](http://www.tutorialspoint.com/ruby/ruby_xml_xslt.htm)
*   [IBM：Ruby on Rails 和 XML](http://www6.software.ibm.com/developerworks/education/x-rubyonrailsxml/x-rubyonrailsxml-a4.pdf)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-17T14:34:46.000

您可能还对[xsh](http://p3rl.org/XML::XSH2)感兴趣。它具有交互模式，您可以在其中对文档进行任何您喜欢的操作：

```
open 1.xml ;
ls //element/@id ;
for //p[@class="first"] echo text() ; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-02-17T01:44:21.817

[clacke 的回答](https://stackoverflow.com/a/15471368/441757)很好，但我认为只有当您的源代码是格式良好的 XML 而不是普通的 HTML 时才有效。

所以要对普通的 Web 内容做同样的事情——HTML 文档不一定是格式良好的 XML：

```
echo "<p>foo<div>bar</div><p>baz" | python -c "from sys import stdin; \
from lxml import html; \
print '\n'.join(html.tostring(node) for node in html.parse(stdin).xpath('//p'))" 
```

并且改为使用 html5lib（以确保您获得与 Web 浏览器相同的解析行为——因为与浏览器解析器一样，html5lib 符合 HTML 规范中的解析要求）。

```
echo "<p>foo<div>bar</div><p>baz" | python -c "from sys import stdin; \
import html5lib; from lxml import html; \
doc = html5lib.parse(stdin, treebuilder='lxml', namespaceHTMLElements=False); \
print '\n'.join(html.tostring(node) for node in doc.xpath('//p')) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-03-20T23:53:24.977

与 Mike 和 clacke 的答案类似，这里是 python one-liner（使用 python >= 2.5）从 pom.xml 文件中获取构建版本，它绕过了 pom.xml 文件通常没有 dtd 或默认命名空间，所以在 libxml 中看起来格式不正确：

```
python -c "import xml.etree.ElementTree as ET; \
  print(ET.parse(open('pom.xml')).getroot().find('\
  {http://maven.apache.org/POM/4.0.0}version').text)" 
```

在 Mac 和 Linux 上测试，不需要安装任何额外的软件包。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-05T16:37:31.380

除了[XML::XSH](https://metacpan.org/pod/XML%3a%3aXSH)和[XML::XSH2 之外](https://metacpan.org/pod/XML%3a%3aXSH2)，还有一些类似`grep`- 的实用程序很像[`App::xml_grep2`](https://metacpan.org/release/App-xml_grep2)and [`XML::Twig`](https://metacpan.org/pod/XML%3a%3aTwig)（包括`xml_grep`而不是`xml_grep2`）。`Makefile`在处理大型或大量 XML 文件以实现快速单线或目标 时，这些可能非常有用。当您想要比您提供的更多处理时，使用脚本方法特别`XML::Twig`好。`perl``$SHELL``xmllint` `xstlproc`

应用程序名称中的编号方案表明“2”版本是本质上相同工具的更新/更新版本，可能需要其他模块（或`perl`本身）的更新版本。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-12-23T07:29:57.510

值得一提的是 nokogiri 本身附带了一个命令行工具，该工具应与`gem install nokogiri`.

您可能会发现[这篇博文很有用](https://robm.me.uk/ruby/2014/01/06/nokogiri-command-line.html)。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-11-07T19:48:26.630

我已经尝试了几个命令行 XPath 实用程序，当我意识到我花了太多时间在谷歌上搜索并弄清楚它们是如何工作的，所以我用 Python 编写了最简单的 XPath 解析器，它可以满足我的需要。

如果 XPath 表达式计算为字符串，则下面的脚本显示字符串值，如果结果是节点，则显示整个 XML 子节点：

```
#!/usr/bin/env python
import sys
from lxml import etree

tree = etree.parse(sys.argv[1])
xpath = sys.argv[2]

for e in tree.xpath(xpath):

    if isinstance(e, str):
        print(e)
    else:
        print((e.text and e.text.strip()) or etree.tostring(e)) 
```

它使用`lxml`- 一个用 C 语言编写的快速 XML 解析器，它不包含在标准 python 库中。安装它`pip install lxml`。在 Linux/OSX 上可能需要前缀`sudo`.

用法：

```
python xmlcat.py file.xml "//mynode" 
```

lxml 也可以接受一个 URL 作为输入：

```
python xmlcat.py http://example.com/file.xml "//mynode" 
```

提取附件节点下的 url 属性，即`<enclosure url="http:...""..>)`：

```
python xmlcat.py xmlcat.py file.xml "//enclosure/@url" 
```

### 谷歌浏览器中的 Xpath

作为一个不相关的附注：如果您想对网页的标记运行 XPath 表达式，那么您可以直接从 Chrome 开发工具中执行：右键单击 Chrome 中的页面 > 选择检查，然后在开发工具中控制台将您的 XPath 表达式粘贴为`$x("//spam/eggs")`.

获取此页面上的所有作者：

```
$x("//*[@class='user-details']/a/text()") 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-15T11:21:17.020

这是一个 xmlstarlet 用例，用于从嵌套元素 elem1、elem2 中提取数据到此类 XML 中的一行文本（还展示了如何处理命名空间）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<mydoctype xmlns="http://xml-namespace-uri" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xml-namespace-uri http://xsd-uri" format="20171221A" date="2018-05-15">

  <elem1 time="0.586" length="10.586">
      <elem2 value="cue-in" type="outro" />
  </elem1>

</mydoctype> 
```

输出将是

```
0.586 10.586 cue-in outro 
```

在这个片段中，-m 匹配嵌套的 elem2，-v 输出属性值（带有表达式和相对寻址），-o 文字文本，-n 添加一个换行符：

```
xml sel -N ns="http://xml-namespace-uri" -t -m '//ns:elem1/ns:elem2' \
 -v ../@time -o " " -v '../@time + ../@length' -o " " -v @value -o " " -v @type -n file.xml 
```

如果需要来自 elem1 的更多属性，可以这样做（也显示 concat() 函数）：

```
xml sel -N ns="http://xml-namespace-uri" -t -m '//ns:elem1/ns:elem2/..' \
 -v 'concat(@time, " ", @time + @length, " ", ns:elem2/@value, " ", ns:elem2/@type)' -n file.xml 
```

请注意命名空间（ns，用 -N 声明）的（IMO 不必要的）复杂性，这让我几乎放弃了 xpath 和 xmlstarlet，并编写了一个快速的 ad-hoc 转换器。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-08-22T17:27:42.013

我的 Python 脚本[xgrep.py](https://hg.sr.ht/~nolda/xgrep)正是这样做的。为了搜索files`attribute`中元素的所有属性，您可以按如下方式运行它：`element``filename.xml ...`

```
xgrep.py "//element/@attribute" filename.xml ... 
```

有各种用于控制输出的开关，例如`-c`计数匹配、`-i`缩进匹配部分以及`-l`仅输出文件名。

该脚本不能作为 Debian 或 Ubuntu 软件包使用，但它的所有依赖项都是可用的。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-06-29T08:34:48.870

安装[BaseX](http://basex.org/)数据库，然后像这样使用它的[“独立命令行模式”](https://docs.basex.org/wiki/Command-Line_Client)：

`basex -i - //element@attribute < filename.xml`

或者

`basex -i filename.xml //element@attribute`

查询语言实际上是 XQuery (3.0)，而不是 XPath，但由于 XQuery 是 XPath 的超集，您可以使用 XPath 查询而无需注意。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-04-20T00:06:40.007

由于这个项目显然是相当新的，请查看[https://github.com/jeffbr13/xq](https://github.com/jeffbr13/xq)，似乎是一个包装器`lxml`，但这就是你真正需要的（并在其他答案中使用 lxml 发布了临时解决方案）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-03-17T22:19:52.043

我对用于 HTML XPath 查询的 Python 单行代码不满意，所以我自己编写了代码。假设您安装了`python-lxml`包或运行`pip install --user lxml`：

```
function htmlxpath() { python -c 'for x in __import__("lxml.html").html.fromstring(__import__("sys").stdin.read()).xpath(__import__("sys").argv[1]): print(x)' $1 } 
```

一旦你有了它，你可以像在这个例子中一样使用它：

```
> curl -s https://slashdot.org | htmlxpath '//title/text()'
Slashdot: News for nerds, stuff that matters 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-02-04T21:02:56.007

很抱歉成为战斗中的另一个声音。我尝试了这个线程中的所有工具，发现它们都不能满足我的需求，所以我自己写了。你可以在这里找到它：[https ://github.com/charmparticle/xpe](https://github.com/charmparticle/xpe)

它已上传到 pypi，因此您可以使用 pip3 轻松安装它，如下所示：

```
sudo pip3 install xpe 
```

安装后，您可以使用它来针对各种输入运行 xpath 表达式，其灵活性与在 selenium 或 javascript 中使用 xpath 所获得的灵活性相同。是的，你可以使用 xpaths 来对抗 HTML。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-10T17:41:56.990

## 即使在顶部存在命名空间声明时也可以使用的解决方案：

如果 xml 在顶部声明了命名空间，则答案中提出的大多数命令都不能开箱即用。考虑一下：

输入xml：

```
<elem1 xmlns="urn:x" xmlns:prefix="urn:y">
    <elem2 attr1="false" attr2="value2">
        elem2 value
    </elem2>
    <elem2 attr1="true" attr2="value2.1">
        elem2.1 value
    </elem2>    
    <prefix:elem3>
        elem3 value
    </prefix:elem3>        
</elem1> 
```

**不工作：**

```
xmlstarlet sel -t -v "/elem1" input.xml
# nothing printed
xmllint -xpath "/elem1" input.xml
# XPath set is empty 
```

**解决方案：**

```
# Requires >=java11 to run like below

# Prints the contents and self of "elem1"
java ExtractXpath.java "/elem1" input.xml

# Prints the value of the attribute: "value2.1"
java ExtractXpath.java "/elem1/elem2/@attr2" input.xml

# Prints the values inside elemt3: "elem3 value"
java ExtractXpath.java "/elem1/elem3/text()" input.xml 
```

提取Xpath.java：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.StringWriter;
import java.util.Iterator;

import javax.xml.XMLConstants;
import javax.xml.namespace.NamespaceContext;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class ExtractXpath {

    public static void main(String[] args) throws Exception {
        assertThat(args.length==2, "Wrong number of args");
        String xpath = args[0];
        File file = new File(args[1]);

        assertThat(file.isFile(), file.getAbsolutePath()+" is not a file.");
        FileInputStream fileIS = new FileInputStream(file);
        DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = builderFactory.newDocumentBuilder();
        Document xmlDocument = builder.parse(fileIS);
        XPath xPath = XPathFactory.newInstance().newXPath();
        String expression = xpath;
        NodeList nodeList = (NodeList) xPath.compile(expression).evaluate(xmlDocument, XPathConstants.NODESET);

        for (int i = 0; i < nodeList.getLength(); i++) {
            System.out.println("==MATCH_START==\n" + convertNodeToString(nodeList.item(i)) + "\n==MATCH_END==");
        }        
    }

    private static String convertNodeToString(Node node) throws TransformerConfigurationException, TransformerException {
            short nType = node.getNodeType();
        switch (nType) {
            case Node.ATTRIBUTE_NODE , Node.TEXT_NODE -> {
                return node.getNodeValue();
            }
            case Node.ELEMENT_NODE -> {
                StringWriter writer = new StringWriter();
                Transformer trans = TransformerFactory.newInstance().newTransformer();
                trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
                trans.setOutputProperty(OutputKeys.INDENT, "yes");
                trans.transform(new DOMSource(node), new StreamResult(writer));
                return writer.toString();
            }
            default -> {
                System.err.println("WARNING: FIXME: Node type:"+nType+" could possibly be handled in a better way.");
                return node.getNodeValue();
            }

        }
    }

    private static void assertThat(boolean b, String msg) {
        if(!b){
            System.err.println(msg+"\n\nUSAGE: program xpath xmlFile");
            System.exit(-1);
        }
    }
}

@SuppressWarnings("unchecked")
class NamespaceResolver implements NamespaceContext {
    //Store the source document to search the namespaces
    private final Document sourceDocument;
    public NamespaceResolver(Document document) {
        sourceDocument = document;
    }

    //The lookup for the namespace uris is delegated to the stored document.
    @Override
    public String getNamespaceURI(String prefix) {
        if (prefix.equals(XMLConstants.DEFAULT_NS_PREFIX)) {
            return sourceDocument.lookupNamespaceURI(null);
        } else {
            return sourceDocument.lookupNamespaceURI(prefix);
        }
    }

    @Override
    public String getPrefix(String namespaceURI) {
        return sourceDocument.lookupPrefix(namespaceURI);
    }

    @SuppressWarnings("rawtypes")
    @Override
    public Iterator getPrefixes(String namespaceURI) {
        return null;
    }
} 
```

为简单起见：

`xpath-extract`命令：

```
#!/bin/bash
java ExtractXpath.java "$1" "$2" 
```

# android - 调用扩展 asynctask 以运行它的类时出错

> ID：15461739
> 
> 赞同：0
> 
> 时间：2013-03-17T14:16:58.180
> 
> 标签：android, json, android-asynctask

我正在使用扩展 AsyncTask 的类，但在执行该类的行出现错误

我想不通

这是包含我的主类和扩展 AsyncTask 的类的类

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import com.example.androidhive.library.JSONParser;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

                public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.topics_list);

            // Hashmap for ListView
            TopicsList = new ArrayList<HashMap<String, String>>();

            **// Loading products in Background Thread
            new LoadAllTopics().execute();**

            // Get listview
            ListView lv = getListView();

            // on seleting single product
            // launching Edit Product Screen
            lv.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                // getting values from selected ListItem
                String tid = ((TextView) view.findViewById(R.id.tid)).getText()
                    .toString();

            /**
            * Background Async Task to Load all product by making HTTP Request
            * */
            class LoadAllTopics extends AsyncTask<String, String, String> {

            /**
             * Before starting background thread Show Progress Dialog
             * */
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(Topics_list.this);
                pDialog.setMessage("Loading products. Please wait...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }

            /**
             * getting All products from url
             * */
            protected String doInBackground(String... args) {
                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                // getting JSON string from URL
                JSONObject json = jParser.makeHttpRequest (url_all_topics, "GET", params);

                // Check your log cat for JSON reponse
                Log.d("All topics: ", json.toString());

                try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    topics = json.getJSONArray(TAG_TOPICS);

                    // looping through All Products
                    for (int i = 0; i < topics.length(); i++) {
                    JSONObject c = topics.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_TOPICSID);
                    String topict = c.getString(TAG_TOPICTITLE);
                    String username = c.getString(TAG_TOPICAUTHOR);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_TOPICSID, id);
                    map.put(TAG_TOPICTITLE, topict);
                    map.put(TAG_TOPICAUTHOR, username);

                    // adding HashList to ArrayList
                    TopicsList.add(map);
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                   /* Intent i = new Intent(getApplicationContext(),
                        NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);*/
                }
                } catch (JSONException e) {
                e.printStackTrace();
                }

                return null;
            }

            /**
             * After completing background task Dismiss the progress dialog
             * **/
            protected void onPostExecute(String file_url) {
                // dismiss the dialog after getting all products
                pDialog.dismiss();
                // updating UI from Background Thread
                runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                       Topics_list.this, TopicsList,
                        R.layout.list_item, new String[] { TAG_TOPICSID,TAG_TOPICTITLE,
                            TAG_TOPICAUTHOR},
                        new int[] { R.id.tid, R.id.name });
                    // updating listview
                    setListAdapter(adapter);
                }
                });

            }

            }
            } });}} 
```

错误在粗线处

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:17:37.810

在 Java 中，您需要在类中编写方法。将 onCreate 放在 Class 中。

```
public class MainActivity extends Activity {
   public void onCreate(Bundle savedInstanceState) {
           .....
         lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // getting values from selected ListItem
            String tid = ((TextView) view.findViewById(R.id.tid)).getText()
                .toString();
            }
         });
          .........
   }

   private class LoadAllTopics extends AsyncTask<String, String, String> {

        .....
   }
} 
```

# android - 无法使用 JavaCV 在 Android 中实现 SURF

> ID：15461748
> 
> 赞同：0
> 
> 时间：2013-03-17T14:17:38.727
> 
> 标签：android, javacv, surf

我正在尝试开发一个简单的 Android 应用程序，它将使用`PreviewCallback`. `ObjectFinder`然后使用JavaCV 项目中提供的进行 SURF 特征检测和提取。但是我不断收到异常。同样的程序可以在我的电脑上运行。

这可能是由于 SURF 是一种专利算法，这会导致问题。

因此，有人可以在 JavaCV 中为我提供一个替代方案。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:11:37.550

我也尝试过使用 ObjectFinder。但在尝试失败后，我发现[了这段代码](https://javacv.googlecode.com/git-history/02385ce192fb82f1668386e55ff71ed8d6f88ae3/src/main/java/com/googlecode/javacv/ObjectFinder.java)。经过一点纠正后，它在 android 中对我有用。

**Basil**是对的，但是有许多新功能可以找到图像[（freak、orb、brisk...）](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:03:19.147

你的假设是正确的。SURF/SIFT 是一项专利，它已从最新的 opencv SDK 中删除。作为替代方案，您可以尝试使用相同的[androidobjectrecognition](https://code.google.com/p/androidobjectrecognition/) 方法。您可以从以下位置查看其来源：[https ://code.google.com/p/androidobjectrecognition/source/checkout](https://code.google.com/p/androidobjectrecognition/source/checkout)

# c# - WPF ListBox - 在 GroupStyle 中使用 ItemTemplate

> ID：15461753
> 
> 赞同：1
> 
> 时间：2013-03-17T14:18:01.970
> 
> 标签：c#, wpf, listbox, grouping, itemtemplate

我正在尝试制作一个分组列表框。首先我做了一个ItemTemplate。现在我正在尝试对数据进行分组，但我不知道如何使用该 ItemTemplate。有人可以帮我一点吗？

我当前的列表框 xaml

```
 <ListBox x:Name="kontakty" ItemsSource="{Binding kontakt}">
        <ListBox.GroupStyle>
            <GroupStyle HeaderStringFormat="Group">
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Path=Name}" Foreground="Red"/>
                                        <ComboBox ItemsSource="{Binding Path=Items}" DisplayMemberPath="Name"/>
                                    </StackPanel>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </ListBox.GroupStyle>
        <ListBox.ItemTemplate>
            //...............//
        </ListBox.ItemTemplate>
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:12:09.673

解决方案是将带有此 ItemTemplate 的 ItemControl 添加到 GroupStyle。

# php - 使用 MYSQLi 检查用户名在数据库中是否存在/激活

> ID：15461765
> 
> 赞同：0
> 
> 时间：2013-03-17T14:19:00.843
> 
> 标签：php, mysql, database, mysqli

```
$username = mysqli_real_escape_string($_POST['username']);

$result = mysqli_query($connect, "SELECT * FROM account WHERE username='".$username."' AND activate='0'");

while($row = mysqli_fetch_assoc($result)) {
    echo 'Account not activated.';
} 
```

我是 MYSQLi 的新手，如果用户输入错误的用户名并且未激活，我需要有关如何显示错误的帮助。到目前为止，我得到了上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:27:33.047

试试这个

```
 $username = mysqli_real_escape_string($_POST['username']);

  $result = mysqli_query($connect, "SELECT * FROM account WHERE username='".$username."' AND activate='0'");

  if ($result->num_rows) {
echo "you are activated !!";
                          } 

   else
  {
  // do what u like here if not activated
    } 
```

# javascript - 在指定位置插入元素

> ID：15461767
> 
> 赞同：1
> 
> 时间：2013-03-17T14:19:18.073
> 
> 标签：javascript, dom, tinymce

有没有办法在 tinyMCE 中的指定偏移处插入内容？我需要在运行时在文档中的某个位置插入一个元素。

**编辑：**更具体地说，我需要从一个客户端获取光标位置，将其发送到服务器并将其广播给其他客户端，以便在他们的屏幕上绘制自定义光标并且他们知道其他客户端正在写入的位置。我被卡住的部分是如何插入我想要的包含插入符号的节点 | 在一个偏移量。我想出了如何获得插入符号偏移量以及如何发送它。唯一的问题是似乎没有方法可以在如下位置插入节点： insertNode(element, position) 或类似的东西。

这是我现在拥有的代码：

```
hub.client.broadcastPosition = function (position) {
    range = ed.selection.getRng();

    var newNode = ed.getDoc().createElement("span");
    newNode.id = "caret";
    newNode.setAttribute("class", "all-carets");

    var element = ed.getDoc().getElementById("caret");

    if (element != null) {
        element.parentNode.removeChild(element);
    }

    newNode.innerHTML = "|";
    newNode.style.color = "black";

    range.setStart(range.startContainer, position);
    range.setEnd(range.startContainer, position);

    range.insertNode(newNode, position);
}; 
```

我通过服务器发送位置：

```
var s = ed.selection.getSel();
    if (s) {
        if (s.anchorNode && s.anchorNode.nodeType == 3) {
            caretPosInElement = s.anchorOffset;

            hub.server.sendPos(caretPosInElement);
        }
} 
```

在客户端，即在broadcastPosition 函数中，我需要在我从服务器发送的位置插入带有id caret 的span 节点。因此我需要别的东西而不是那个范围。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:43:28.223

如何选择要插入内容的实际位置，然后使用`mceInsertContent`execCommand：

```
ed.execCommand('mceInsertContent', false, '<span class="marker">my_node_content</span>'); 
```

# ios - UIControl 子类 setHighlighted 未被调用

> ID：15461768
> 
> 赞同：1
> 
> 时间：2013-03-17T14:19:19.393
> 
> 标签：ios, subclass, highlight, uicontrol

我将 UIControl 子类化以创建自己的类。我正在尝试覆盖`setHighligheted:`，但由于某种原因它没有被调用......我已经仔细检查过，我的子视图都没有`userInteractionEnabled = NO`. 还有其他我应该覆盖的方法吗？

谢谢！

这是一些示例代码：

```
#import "Booking.h"

@interface BookingCloud : UIControl

// Booking
@property(nonatomic, strong) Booking *booking;

// BackgroundView
@property (strong, nonatomic) IBOutlet UIView *backgroundView; 
```

以及实施

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setUpSubViews];
    }
    return self;
}

- (void)setUpSubViews {
    [[NSBundle mainBundle] loadNibNamed:@"BookingCloud" owner:self options:nil];
    [self addSubview:backgroundView];
    self.frame = backgroundView.frame;
    self.layer.cornerRadius = 10;
    self.layer.masksToBounds = YES;
}

- (void)setHighlighted:(BOOL)highlighted {
    [super setHighlighted:highlighted];
    if (highlighted) {
          backgroundView.backgroundColor = [[Utils colorWithHexString:[[ConfigurationManager instance] UIConfigValueForKey:@"background_color"]] colorWithAlphaComponent:0.8];
    } else {
          backgroundView.backgroundColor = [[Utils colorWithHexString:[[ConfigurationManager instance] UIConfigValueForKey:@"background_color"]] colorWithAlphaComponent:1];
    }

} 
```

# python - 蟒蛇熊猫。分组依据并删除时间戳

> ID：15461771
> 
> 赞同：2
> 
> 时间：2013-03-17T14:19:33.687
> 
> 标签：python, pandas

我有以下熊猫数据框。我需要按 B 列和 A 列进行分组并删除时间戳。所以..在下面......应该有一个总结了A的记录。我如何在熊猫中这样做？

```
 A  B
2013-03-15 17:00:00            1  134
2013-03-15 18:00:00          810  134
2013-03-15 19:00:00         1797  134
2013-03-15 20:00:00          813  134
2013-03-15 21:00:00         1323  134
2013-03-16 05:00:00           98  134
2013-03-16 06:00:00          515  134
2013-03-16 10:00:00          377  134
2013-03-16 11:00:00         1798  134
2013-03-16 12:00:00          985  134
2013-03-17 08:00:00          258  134 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:27:53.430

这可以通过简单的 groupby 操作来完成：

```
import io
import pandas as pd

content='''\
date time                               A  B
2013-03-15 17:00:00            1  134
2013-03-15 18:00:00          810  134
2013-03-15 19:00:00         1797  134
2013-03-15 20:00:00          813  135
2013-03-15 21:00:00         1323  134
2013-03-16 05:00:00           98  134
2013-03-16 06:00:00          515  135
2013-03-16 10:00:00          377  134
2013-03-16 11:00:00         1798  136
2013-03-16 12:00:00          985  136
2013-03-17 08:00:00          258  137'''

df = pd.read_table(io.BytesIO(content), sep='\s+',
                   parse_dates=[[0, 1]], header=0,
                   index_col=0)

print(df.groupby(['B']).sum()) 
```

产量

```
 A
B        
134  4406
135  1328
136  2783
137   258 
```

中的一些值`B`已更改以显示更有趣的 groupby 操作。

# apache - 两台带有 mod_proxy 的服务器，第二台服务器主机是本地 ip 并在 url 中显示 /proxy/？

> ID：15461773
> 
> 赞同：2
> 
> 时间：2013-03-17T14:19:39.017
> 
> 标签：apache, reverse-proxy, mod-proxy, vhosts

我在与我在家庭网络上运行的第二台服务器的会话方面遇到了一些问题。我这样做是出于一种爱好，并在它们正式上线之前开发新的应用程序。

我有一个指向我的 ip 的域并成功解析到服务器 1，但是在配置 mod_proxy 以将特定域发送到服务器 2 之后，我收到了一些不需要的错误和结果。我希望第二台服务器充当普通服务器并通过第一台服务器，因为我当前的路由器只能将端口 80 发送到一个本地 ip 而不能过滤它。

我的第二台服务器有 a.mydomain.com，它可以正常解析，但是当我尝试在第二台服务器上使用 Web 应用程序时，出现以下错误

```
Warning: You are now accessing Mydomain from http://10.0.1.38/, but Mydomain has been configured to run at this address: http://a.mydomain.com/ 
```

我可以解决这个问题吗？

此外，当尝试通过 a.mydomain.com/phpmyadmin 访问 phpmyadmin 时，它会在登录后更改为 a.mydomain.com/proxy/phpmyadmin，我可以更改它以使其基本无缝且不添加 /proxy。

这是我的服务器 1 的虚拟主机配置

```
<VirtualHost *:80>
DocumentRoot /var/www/html
ServerName www.server1domain.net
</VirtualHost>

<VirtualHost *:80>
ProxyPreserveHost On
ServerName a.mydomain.com
       <Proxy *>
        Order deny,allow
        Allow from all
       </Proxy>
ProxyPass / http://10.0.1.38/
ProxyPassReverse / http://10.0.1.38/
</VirtualHost> 
```

这是服务器 2 的虚拟主机配置

```
<VirtualHost *:80>
    ServerAdmin admin@mydomain.com
    DocumentRoot /var/www/mydomaincom
    ServerName a.mydomain.com
</VirtualHost> 
```

我正在运行 Centos 6.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:26:53.800

好吧，我终于想通了，有些东西现在有点明显，但这适用于处于类似情况的其他人。

所以早些时候在我的 http.conf 我有这个

```
<IfModule mod_proxy.c>
   ProxyRequests Off
   <Proxy *>
      Order deny,allow
      Allow from all
   </Proxy>

# destination directory

   ProxyPass /proxy http://10.0.1.38
   ProxyPassReverse /proxy http://10.0.1.38
</IfModule> 
```

这似乎有两个问题，它似乎添加了 /proxy/ 目录并且也是错误的，因为 ip 没有尾部斜杠，因此我将其更改为

```
<IfModule mod_proxy.c>
   ProxyRequests Off
   <Proxy *>
      Order deny,allow
      Allow from all
   </Proxy>
</IfModule> 
```

我的第一台服务器的 http.conf vhost 配置现在看起来像这样

```
<VirtualHost *:80>

ProxyPreserveHost On

ProxyPass / http://10.0.1.38/

ServerName a.mydomain.com
</VirtualHost> 
```

如果你忘记了 ip 后面的斜杠，你很可能会遇到 502 错误：Could not resolve dns

第二台服务器虚拟主机配置如下所示

```
<VirtualHost *:80>
    ServerAdmin admin@mydomain.com
    DocumentRoot /var/www/mydomain
    ServerName a.mydomain.com
</VirtualHost> 
```

希望能帮助其他有类似问题的人。

# android - 模拟器上的处理时间是否比真实设备上的多？（android，eclipse）

> ID：15461775
> 
> 赞同：0
> 
> 时间：2013-03-17T14:19:48.270
> 
> 标签：android, eclipse, optimization, emulation

我正在制作一个安卓应用程序。当我在具有 512 MiB RAM 的模拟器上运行它时，一个简单的活动需要 3 秒才能完成。这个时间在真实设备上会更低吗，因为 3 秒太长了！如果它会更低，那么由什么因素（估计会做）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:23:58.107

这真的取决于你在做什么，但根据经验，设备比模拟器快得多。

模拟器很慢，因为整个 ARM 进程架构是通过软件模拟的，这在 Android 系统和计算机处理器之间增加了一个（大）额外层。

尝试使用 x86 intel 映像之一来获得更接近设备速度的更快模拟器。

但是，没有模拟器可以为您提供与设备相同的速度。

# c++ - C++ TCP 客户端 - 接受浮点数和数学运算符

> ID：15461777
> 
> 赞同：0
> 
> 时间：2013-03-17T14:19:51.650
> 
> 标签：c++

这就是我需要帮助完成的事情：提示用户并接受一个浮点数，提示用户并接受一个数学运算符（+，-*，/），提示用户并接受另一个浮点数。这是我的客户代码。我有一个服务器代码，我需要该程序将数据发送到该代码进行处理，然后显示结果。如果需要，我可以发布我的服务器代码。请帮忙！

```
#include <iostream>
using namespace std;

#include <stdio.h>
#include <string.h>
#include <winsock.h>

// Function prototype
void StreamClient(char *szServer, short nPort);

// Helper macro for displaying errors
#define PRINTERROR(s)   \
        fprintf(stderr,"\n%s: %d\n", s, WSAGetLastError())

////////////////////////////////////////////////////////////

void main(int argc, char **argv)
{
    WORD wVersionRequested = MAKEWORD(1,1);
    WSADATA wsaData;
    int nRet;
    short nPort;

    //
    // Check for the host and port arguments
    //
    if (argc != 3)
    {
        fprintf(stderr,"\nSyntax: TCPTimeClient ServerName PortNumber\n");
        return;
    }

    nPort = atoi(argv[2]);

    //
    // Initialize WinSock and check the version
    //
    nRet = WSAStartup(wVersionRequested, &wsaData);
    if (wsaData.wVersion != wVersionRequested)
    {   
        fprintf(stderr,"\n Wrong version\n");
        return;
    }

    //
    // Go do all the stuff a datagram client does
    //
    StreamClient(argv[1], nPort);

    //
    // Release WinSock resources
    //
    WSACleanup();
}

////////////////////////////////////////////////////////////

void StreamClient(char *szServer, short nPort)
{
    int nRet;                       // return code
    char szBuf[256];                // client buffer area 
    char szSvr[256];                // server name

    LPHOSTENT lpHostEntry;          // host data structure
    SOCKET  theSocket;              // client socket
    SOCKADDR_IN saClient;           // socket address structure

    //
    // Get local machine name
    //
    nRet = gethostname(szSvr, sizeof(szSvr));

    //
    // Check for errors
    //
    if (nRet == SOCKET_ERROR)
    {
        PRINTERROR("gethostname()");
        return;
    }

    // 
    // Display an informational message
    //
    printf("Datagram Client [%s] sending to server [%s] on port %d...\n",
                                szSvr, szServer, nPort);

    //
    // Find the server
    //
    lpHostEntry = gethostbyname(szServer);
    if (lpHostEntry == NULL)
    {
        PRINTERROR("gethostbyname()");
        return;
    }

    //
    // Create a TCP/IP datagram socket
    //
    theSocket = socket(AF_INET,         // Address family
                       SOCK_STREAM,     // Socket type
                       0);              // Protocol

    //
    // Check for errors
    //
    if (theSocket == INVALID_SOCKET)
    {
        PRINTERROR("socket()");
        return;
    }

    //
    // Fill in the address structure of the server
    //
    saClient.sin_family = AF_INET;
    saClient.sin_addr = *((LPIN_ADDR)*lpHostEntry->h_addr_list);
                                        // ^ Client's address
    saClient.sin_port = htons(nPort);   // Port number from command line

    //
    // Connect to the server
    //
    nRet = connect(theSocket, 
            (struct sockaddr *)&saClient, 
            sizeof(saClient));

    //
    // Check for errors
    //
    if(nRet == SOCKET_ERROR)
    {
      PRINTERROR("Connect()");
      return;
    }

    //
    // Prepare some data to send to the server
    //
    sprintf(szBuf, "From the Client [%s]", szSvr);

    //
    // Send data to the server
    //
    nRet = send(theSocket,                  // Socket
                  szBuf,                    // Data buffer
                  (int)strlen(szBuf),       // Length of data
                  0);                       // Flags

    //
    // Check for errors
    //
    if (nRet == SOCKET_ERROR)
    {
        PRINTERROR("send()");
        closesocket(theSocket);
        return;
    }

    //
    // Zero out the incoming data buffer
    //
    memset(szBuf, 0, sizeof(szBuf));

    //
    // Wait for the reply
    //
    nRet = recv(theSocket,                  // Socket
                szBuf,                      // Receive buffer
                sizeof(szBuf),              // Length of receive buffer
                0);                         // Flags

    //
    // Check for errors
    //
    if (nRet == SOCKET_ERROR)
    {
        PRINTERROR("recv()");
        closesocket(theSocket);
        return;
    }

    //
    // Display the data that was received
    //
    printf("\n%s", szBuf);

    //
    // Close the socket
    //
    closesocket(theSocket);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:03:28.163

您的网络代码看起来不错，尽管我不是这方面的专家。提示用户输入非常容易。由于您在问题中使用了 C 风格的 I/O，因此我也会使用 C 风格的 I/O，即使您的问题被标记为`C++`.

要将输出写入控制台，请使用`printf`：

```
printf("\nPlease enter a floating point number: "); 
```

（`\n`将输出换行符。）

要从控制台读取输出，请使用`scanf`：

```
float number1;
scanf("%f", &number1); 
```

这里的字符串`"%f"`表示我们正在读取一个浮点数。第二个参数是一个指向浮点数的指针，我们要在其中存储我们的答案。有关 的更多信息`scanf`，请参阅[cplusplus-reference](http://cplusplus.com/reference/cstdio/scanf/)。

您可以以类似的方式提示其他输入。完整代码：

```
printf("\nPlease enter a floating point number: ");
float number1;
scanf("%f", &number1);

printf("\nPlease enter a mathematical operator (+,-,*,/): ");
char mathOperator;
scanf("%c", &mathOperator);
if( mathOperator != '+' && mathOperator!= '-' && mathOperator!= '*' && mathOperator!= '/' )
{
    //your error handling here
}

printf("\nPlease enter a floating point number: ");
float number2;
scanf("%f", &number2);

printf("\nCalculating %f %c %f...", &number1, &mathOperator, &number2);

//now send data to server 
```

在 的最新示例中`printf`，您还可以看到可以以类似于读取它们的方式将值写入输出，并且可以在单个命令中具有多个值。有关 的更多信息`printf`，请参阅[cplusplus-reference](http://cplusplus.com/reference/cstdio/printf/)。

# javascript - 创建和交互式流程图的最佳 javascript 库

> ID：15461780
> 
> 赞同：14
> 
> 时间：2013-03-17T14:20:14.003
> 
> 标签：javascript, charts, raphael, flow

我想创建一个由 div 元素组成的交互式“问题解决”类型流程图。

我想做一些与纽约时报在这个例子中所做的非常相似的事情......

[http://www.nytimes.com/interactive/2012/06/14/us/how-the-supreme-court-could-rule-on-the-health-care-law.html?ref=us](http://www.nytimes.com/interactive/2012/06/14/us/how-the-supreme-court-could-rule-on-the-health-care-law.html?ref=us)

有人建议拉斐尔，所以我一直在学习一些，这太棒了。

还有其他值得考虑的图书馆吗？

此外，如果 Raphael 适合这项任务，它是一个广泛使用的库吗？如果我要学习新技能 学习流行代码符合我的最大兴趣，这样我就可以将它重新应用到我得到的不同工作中，而不是一些我永远不会使用或没有人希望我再次使用的奇异东西。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T14:32:40.043

如果您想深入研究数据可视化，请考虑[使用 D3JS 。](http://d3js.org/)网站上有大量很好的示例和教程。

PS：据我所知，创建 Mike Bostock 当前为纽约时报工作；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T21:05:57.850

对于像 NYTimes 示例这样简单的事情，没有什么能阻止您使用箭头和[jquery .slideDown()](http://docs.jquery.com/Effects/slideDown#speedcallback)的一些图像来完成它。它肯定会比使用更大的矢量库更轻，而且它可以在像 salt 一样古老的浏览器中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:59:53.510

我同意[Raphael](http://raphaeljs.com/) js 库很强大。我也可以建议看看[ExtJs 4](http://dev.sencha.com/deploy/ext-4.0.0/examples/#sample-3) - 它也有很酷的例子（当然，如果你需要它的其他东西，不仅仅是图表）......

# android - 动画在 4.2 中工作正常，但在 2.3 中出现错误

> ID：15461782
> 
> 赞同：2
> 
> 时间：2013-03-17T14:20:15.957
> 
> 标签：android, android-layout, android-animation

这可能有点长，但我会在解释时非常清楚。

我正在开发一个应用程序，它基本上由一个布局组成，有两个相对布局。当您单击两个布局中的任何一个时，第二个布局会根据其实际可见性进行扩展或缩小。

这是布局：

![在此处输入图像描述](../Images/5952a87020d7b83d11101001c6278245.png)

这是侦听任何单击“main”或“child”以展开/收缩的代码：

```
 public void toggleAmagar(View v){
        View parent = (View) v.getParent();
        View child = parent.findViewById(R.id.child);
        Log.d("debugging","toggle amagar. Child visibility is :"+child.getVisibility()+". Clickable? Child: "+child.isClickable()+". Parent: "+v.isClickable());
        ExpandAnimation expandAni = new ExpandAnimation(child, 500);
        child.startAnimation(expandAni);
    } 
```

这是动画类：

```
public class ExpandAnimation extends Animation {
private View mAnimatedView;
private LayoutParams mViewLayoutParams;
private int mMarginStart, mMarginEnd;
private boolean mIsVisibleAfter = false;
private boolean mWasEndedAlready = false;

public ExpandAnimation(View view, int duration) {
    setDuration(duration);
    mAnimatedView = view;
    mViewLayoutParams = (LayoutParams) view.getLayoutParams();
    // decide to show or hide the view
    mIsVisibleAfter = (view.getVisibility() == View.VISIBLE);

    mMarginStart = mViewLayoutParams.bottomMargin;
    mMarginEnd = (mMarginStart == 0 ? (0- view.getHeight()) : 0);
    view.setVisibility(View.VISIBLE);
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
    super.applyTransformation(interpolatedTime, t);
    Log.d("debugging","aplicant. Visible = "+this.mAnimatedView.getVisibility());
    mAnimatedView.setClickable(false);
    if (this.hasEnded()){
        mAnimatedView.setClickable(true);
        View pare = (View) mAnimatedView.getParent();
        View germa = (View) pare.findViewById(R.id.main);
        germa.setClickable(true);
    } else {
        mAnimatedView.setClickable(false);
        View pare = (View) mAnimatedView.getParent();
        View germa = (View) pare.findViewById(R.id.main);
        germa.setClickable(false);
    }
    if (interpolatedTime < 1.0f) {

        // Calculating the new bottom margin, and setting it
        mViewLayoutParams.bottomMargin = mMarginStart
                + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

        // Invalidating the layout, making us seeing the changes we made
        mAnimatedView.requestLayout();

    // Making sure we didn't run the ending before (it happens!)
    } else if (!mWasEndedAlready) {
        mViewLayoutParams.bottomMargin = mMarginEnd;
        mAnimatedView.requestLayout();

        if (mIsVisibleAfter) {
            mAnimatedView.setVisibility(View.GONE);

        }
        mWasEndedAlready = true;
    }
} 
```

这是在 Android 2.3 中发生的情况： ![在此处输入图像描述](../Images/c1049396238266cb0851e281af3d964e.png)

这些是生成的日志：

**日志一：**

```
03-17 13:57:17.509: D/debugging(403): toggle amagar. Child visibility is :0\. Clickable? Child: true. Parent: true
03-17 13:57:17.521: D/debugging(403): aplicant. Visible = 0
03-17 13:57:17.549: D/debugging(403): aplicant. Visible = 0
03-17 13:57:17.619: D/debugging(403): aplicant. Visible = 0
03-17 13:57:17.699: D/debugging(403): aplicant. Visible = 0
03-17 13:57:17.789: D/debugging(403): aplicant. Visible = 0
03-17 13:57:17.929: D/debugging(403): aplicant. Visible = 0
03-17 13:57:18.119: D/debugging(403): aplicant. Visible = 0
03-17 13:57:18.189: D/debugging(403): aplicant. Visible = 8 
```

**日志 B**

```
03-17 13:57:45.439: D/debugging(403): toggle amagar. Child visibility is :8\. Clickable? Child: true. Parent: true 
```

现在我也在做同样的事情，但在 4.2 中（4.0.4 真实设备的工作方式相同）： ![在此处输入图像描述](../Images/ace007de128fcfab95c1772bef332ea2.png)

这些是日志：

**日志一：**

```
03-17 14:13:06.104: D/debugging(815): toggle amagar. Child visibility is :0\. Clickable? Child: true. Parent: true
03-17 14:13:06.192: D/debugging(815): aplicant. Visible = 0
03-17 14:13:06.212: D/debugging(815): aplicant. Visible = 0
03-17 14:13:06.475: D/debugging(815): aplicant. Visible = 0
03-17 14:13:06.692: D/debugging(815): aplicant. Visible = 0
03-17 14:13:06.792: D/debugging(815): aplicant. Visible = 8 
```

**日志 B：**

```
03-17 14:13:08.923: D/debugging(815): toggle amagar. Child visibility is :8\. Clickable? Child: true. Parent: true
03-17 14:13:09.013: D/debugging(815): aplicant. Visible = 0
03-17 14:13:09.022: D/debugging(815): aplicant. Visible = 0
03-17 14:13:09.232: D/debugging(815): aplicant. Visible = 0
03-17 14:13:09.442: D/debugging(815): aplicant. Visible = 0
03-17 14:13:09.666: D/debugging(815): aplicant. Visible = 0
03-17 14:13:09.803: D/debugging(815): aplicant. Visible = 0 
```

如您所见，唯一的区别是第二次点击没有在 2.3 设备上应用动画。

我已经在具有 2.3 和其他 4.0.4 的真实设备上对其进行了测试，并且它也在发生。这些是虚拟化的。

如果您需要更多信息，请询问我。

哦，顺便说一下，Animation 类中的 setClickable() 技巧是为了防止用户双击动画和布局，以防万一你想知道它。

谢谢你。

塞尔吉

**编辑** 尝试了几个 SDK：

*   2.2 -> 错误
*   2.3 -> 错误
*   4.2 -> 好的
*   4.0 -> 好的

**编辑 19/03**

更新：仍在发生，我不知道为什么。如果没有人找到答案，明天我将继续调试......谢谢。

# javascript - 通过 ajax 将 Javascript 变量传递给 PHP

> ID：15461786
> 
> 赞同：14
> 
> 时间：2013-03-17T14:20:20.187
> 
> 标签：javascript, php, jquery, ajax

我正在尝试将一个变量从我的 javascript 代码传递到服务器端 PHP 代码。我知道这必须通过我相信我已经正确完成的ajax调用来完成，但是访问我从我的ajax传递到我的php的变量是当我遇到麻烦时，因为我是php的新手。这是我到目前为止的代码：

```
$(document).ready(function() {

            $(".clickable").click(function() {
                var userID = $(this).attr('id');
                //alert($(this).attr('id'));
                $.ajax({
                    type: "POST",
                    url: 'logtime.php',
                    data: "userID=" + userID,
                    success: function(data)
                    {
                        alert("success!");
                    }
                });
            });
        });

<?php //logtime.php
$uid = isset($_POST['userID']);
//rest of code that uses $uid
?> 
```

我正在尝试将我的 javascript 变量“userID”传递给 php ($userID)，但是我在路上的某个地方出错了。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-17T14:24:36.310

将这样的数据传递给 ajax 调用（[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）：

```
data: { userID : userID } 
```

在你的 PHP 中这样做：

```
if(isset($_POST['userID']))
{
    $uid = $_POST['userID'];

    // Do whatever you want with the $uid
} 
```

`isset()`函数的目的是检查给定变量是否存在，而不是获取它的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T14:29:56.840

由于您没有使用 JSON 作为 AJAX 调用的数据类型，因此我假设您无法访问该值，因为您提供的 PHP 只会是真或假。`isset`是一个检查某物是否存在并具有值的功能，而不是访问该值。

将您的 PHP 更改为：

```
$uid = (isset($_POST['userID'])) ? $_POST['userID'] : 0; 
```

上面的行将检查 post 变量是否存在。如果它确实存在，它将设置`$uid`为等于发布的值。如果不存在，则设置`$uid`为 0。

稍后在您的代码中，您可以检查 的值`$uid`并做出相应的反应

```
if($uid==0) {
    echo 'User ID not found';
} 
```

这将使您的代码更具可读性，并遵循我认为在 PHP 中处理数据的最佳实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:26:04.563

要测试 POST 变量是否有一个名为 'userID' 的元素，最好使用 array_key_exists .. 它实际上测试数组键的存在而不是其值是否已设置 .. 一个微妙且可能只是语义上的差异，但是它确实提高了可读性。

现在，您的 $uid 被设置为布尔值，具体取决于是否设置了 $__POST['userID'] ...如果我记得您可能想尝试...

```
$uid = (array_key_exists('userID', $_POST)?$_POST['userID']:'guest'; 
```

然后您可以使用可识别的“访客”用户并使您的代码更具可读性:)

另一点 reisset() 即使它不太可能适用于这种情况，但如果你不想以后被抓到，还是值得记住的……数组元素可以合法地设置为 NULL……即它可以存在，但尚未填充，这可能是一个有效的、可接受的和可测试的条件。但 ：

```
a = array('one'=>1, 'two'=>null, 'three'=>3);
isset(a['one']) == true
isset(a['two']) == false

array_key_exists(a['one']) == true
array_key_exists(a['two']) == true 
```

Bw 确定您知道要为哪个目的使用哪个功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:23:43.883

或者，尝试删除“数据”并将 URL 设为“logtime.php?userID="+userId

我更喜欢布赖恩的回答，这个答案只是因为您试图在“数据”中使用 URL 参数语法，我想演示在哪里可以正确使用该语法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-20T07:33:07.780

```
$(document).ready(function() {
            $(".clickable").click(function() {
                var userID = $(this).attr('id'); // you can add here your personal ID
                //alert($(this).attr('id'));
                $.ajax({
                    type: "POST",
                    url: 'logtime.php',
                    data : {
                        action : 'my_action',
                        userID : userID 
                    },
                    success: function(data)
                    {
                        alert("success!");
                        console.log(data);
                    }
                });
            });
        });

 $uid = (isset($_POST['userID'])) ? $_POST['userID'] : 'ID not found';
 echo $uid; 
```

**$uid**添加你的函数

注意：如果不支持**$**则在 $ 定义的地方添加**jQuery**

# android - 如何在 Worklight 中更改 Android 应用程序图标

> ID：15461788
> 
> 赞同：0
> 
> 时间：2013-03-17T14:20:29.737
> 
> 标签：android, ibm-mobilefirst

我[在此论坛主题](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=448663)中阅读了有关如何在 Worklight 中更改应用程序图标的说明，但它不起作用。我收到以下错误：

> .../android-sdk-linux/platform-tools/aapt: /lib/libz.so.1: 没有可用的版本信息（/home/vernid/data/Development/WorkLight/android-sdk-linux/platform 需要-工具/aapt）
> 
> .../android/native/AndroidManifest.xml:28：错误：错误：不允许使用字符串类型（在 'icon' 处，值为 'icon.png'）。

有什么想法或例子吗？

非常感谢， 多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:08:21.050

应用程序图标位于可绘制文件夹下。例如，在 Worklight 项目中查看：yourAppName\android\native\res\drawable-*\icon.png。这是您要替换的图标。

要替换应用程序图标：

1.  打开 nativeResources 文件夹：yourAppName\android\nativeResource\res
2.  其中的每个可绘制文件夹代表不同的屏幕密度；您需要为您在应用程序中支持的每个密度*放置不同的 icon.png 文件
3.  放置镜像后，构建和部署
4.  在模拟器或设备中启动，您现在应该会看到新图标

有关 Android 中屏幕密度的更多信息，[请参阅它的在线文档](http://developer.android.com/guide/practices/screens_support.html)。

# ruby-on-rails-3 - rails 3嵌套资源“新”路径正在切换

> ID：15461794
> 
> 赞同：0
> 
> 时间：2013-03-17T14:21:26.467
> 
> 标签：ruby-on-rails-3, spree, nested-resources

我不太明白为什么会发生这种情况，也许你们中的某个人会……就这样吧。

我创建了一个嵌套资源：

```
resources :order do
  resources :ordered_vehicles
end 
```

我添加了一个`link_to`动作`new`并传递了`order.id`类似`new_order_ordered_vehicle_path(order.id)`的内容，因此页面加载得很好。问题是在我按下按钮提交选择之后。他将路径从 切换`http://localhost:3000/order/3/ordered_vehicles/new`到`http://localhost:3000/order/R076027535/ordered_vehicles`并显示错误`Couldn't find Order with id=R076027535`……看图。

此方法在控制器中引发错误

```
private
  def find_order
    @order = Order.find(params[:order_id])
  end 
```

这是一个`before_filter`.

`new.html.haml`文件看起来像这样

```
= form_for [@order, @ordered_vehicle], html: { multipart: true } do |f|
  = @order.number
  %br= @order.id
    = f.fields_for :vehicles do |car|
      .... #some fields here
      = car.submit "Save your choice" 
```

他`id`找不到的是，`@order.number`但我不明白为什么要切换。

编辑：为了彻底，我将添加控制器方法：

```
def new
  @ordered_vehicle = @order.ordered_vehicles.build(params.slice(:order_id, :vehicle_id))
end

def create
  binding.pry
  @ordered_vehicle = @order.ordered_vehicles.build(params.slice(:order_id, :vehicle_id))
  if @ordered_vehicle.save
    flash[:notice] = "Save successful."
    redirect_to account_path
  end
end 
```

POST 请求（我希望这是一个，对所有这些东西来说仍然是新的）：

```
"action_dispatch.request.formats"=>[text/html]},
 @request_method="POST", @filtered_parameters={"utf8"=>"✓", "authenticity_token"=>
 "Ar4vy8pqCSpA2ch0qG0qiJXAJUbNALYxm/FbuKbdzCc=", "ordered_vehicle"=>
 {"vehicles"=>   {"maker_id"=>"", "model_id"=>"", "year"=>"", "body"=>"", "capacity"=>"", "id"=>"1"}},
 "commit"=>"Save your choice", "action"=>"create",
 "controller"=>"spree/ordered_vehicles", "order_id"=>"R076027535"}, @method="POST",
 @fullpath="/order/R076027535/ordered_vehicles"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:14:11.877

按要求 ;）

好吧，事实证明`Spree`这是我目前正在调整的一个问题（我知道我没有明确提到它，但不想发布太多信息）。

底线：

在`Order`模型中，该方法`to_param`被覆盖以将列传`number`递给`params`. 没有再次覆盖它，只是将其留在那里并进行了改编。在我的`find_order`方法中，我写道：

```
 def find_order
    @order = Order.find_by_number(params[:order_id])
  end 
```

另外我已经将订单号存储在表中，我相信没有这个问题，但无法明确记住。无论如何，感谢您的帮助。

PS对不起，一团糟

# android - android共享偏好灵活性

> ID：15461798
> 
> 赞同：0
> 
> 时间：2013-03-17T14:21:34.093
> 
> 标签：android, json, sharedpreferences

有没有办法从 SharedPreferences 中读取一个整数值作为字符串，反之亦然？就像您将 json 值保存为整数一样，您可以将其读取为字符串。通过这种方式，您可以避免在需要显示时将 int 解析为字符串，例如在 TextView 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:40:22.230

**SharedPreferences** uses xml to store data and the xml file looks exactely like this:

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
  <int name="key1" value="0" />
  <boolean name="key2" value="true" />
  <string name="key3">example String</string>
 </map> 
```

So android uses the `key` to find the xml node that has the value and uses the **node type** to verify the value against the request. and throws `ClassCastException` if they didn't match. in JSON such verification doesn't exist, the parser would try to parse the value and throws a `JSONException` 'if you are using org.json objects'.

but if you want to achieve JSON behavior and still store your data easily, you can wrap it in a JSONObject then serialize it to String and store it. and when retrieve it parse it as JSONObject again and then read the values from it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:46:05.087

你可以编写一个帮助类来为你做这件事。例如：

```
import android.content.Context;
import android.content.SharedPreferences;

/** Preferences (prefs) manager. */
public class Prefs
{
    public static final String MUSIC_KEY = "music_key";
    public static final String VOLUME_KEY = "volume_key";
    public static final String USER_ID_KEY = "user_id_key";
    public static final String FIRST_HELP_KEY = "first_help_key";
    public static final String SECOND_HELP_KEY = "second_help_key";
    public static final String CHALLENGE_HELP_KEY = "challenge_help_key";
    public static final String PREMIUM_KEY = "premium_key";
    public static final String GAMES_PLAYED_WHEN_STATS_SENT_KEY = "stats_games_played_key";

    private static final String FILENAME = "preferences";
    private static final SharedPreferences prefs = Const.context.getSharedPreferences(FILENAME, Context.MODE_PRIVATE);

    public static boolean getBoolean(String key, boolean defValue)
    {
        return prefs.getBoolean(key, defValue);
    }

    public static float getFloat(String key, float defValue)
    {
        return prefs.getFloat(key, defValue);
    }

    public static int getInt(String key, int defValue)
    {
        return prefs.getInt(key, defValue);
    }

    public static long getLong(String key, long defValue)
    {
        return prefs.getLong(key, defValue);
    }

    public static String getString(String key, String defValue)
    {
        return prefs.getString(key, defValue);
    }

    public static void putObject(String key, Object value)
    {
        final SharedPreferences.Editor editor = prefs.edit();
        if (value instanceof Boolean)
        {
            editor.putBoolean(key, (Boolean) value);
        }
        else if (value instanceof Float)
        {
            editor.putFloat(key, (Float) value);
        }
        else if (value instanceof Integer)
        {
            editor.putInt(key, (Integer) value);
        }
        else if (value instanceof Long)
        {
            editor.putLong(key, (Long) value);
        }
        else if (value instanceof String)
        {
            editor.putString(key, (String) value);
        }
        else
        {
            throw new IllegalArgumentException(value + " can't be inserted into SharedPreferences");
        }
        editor.commit();
    }

} 
```

稍后，当你想读取一个整数值时，你可以这样做：

```
final int lastSentGamesCounter = Prefs.getInt(Prefs.GAMES_PLAYED_WHEN_STATS_SENT_KEY, 0); 
```

写作：

```
Prefs.putObject(Prefs.GAMES_PLAYED_WHEN_STATS_SENT_KEY, 10); 
```

# sql - Oracle Sql 将日期列匹配到 sysdate 错误

> ID：15461803
> 
> 赞同：0
> 
> 时间：2013-03-17T14:21:52.693
> 
> 标签：sql, oracle, select, sysdate

我正在尝试匹配来自不同表的列，使用`SYSDATE`. 输出实际上是在所有行上使用今天的日期填充日期列，而不是仅在其中实际包含今天日期的一行。

```
SELECT building.building_code, 
    building.building_name, 
    room_booking.booking_date
FROM building,
     room_booking,
     dual
WHERE to_date(booking_date) = trunc(sysdate) 
```

输出是：

```
BUILDING_CODE BUILDING_NAME   BOOKING_DATE
------------- --------------- ------------
A             ARCADIA         <17-mar-13>  
B             BELIZE          <17-mar-13>  
C             CAMDEN          <17-mar-13>  
D             DENVER          <17-mar-13>  
E             EXETER          <17-mar-13>  
F             FORT PORTAL     <17-mar-13>  
G             GRAMPIAN        <17-mar-13>  
H             HELVITICA       <17-mar-13>  
I             INVICTA         <17-mar-13>  
J             JULIET          <17-mar-13>  

10 rows selected 
```

结果中应该只有一行，因为只有 1 行包含今天的日期。我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:24:42.560

这是因为您没有加入表格`room_booking`，并且`building`在其上生成笛卡尔积。

```
SELECT 
    b.building_code, 
    b.building_name, 
    r.booking_date
FROM building b
        JOIN room_booking   r /* missing join condition here: ON r.building_code = b.building_code */
WHERE 
    TO_DATE(r.booking_date) = TRUNC(SYSDATE) 
```

# php - 将数组从帖子设置为公共数组

> ID：15461806
> 
> 赞同：1
> 
> 时间：2013-03-17T14:21:57.780
> 
> 标签：php, jquery, http-post, json

我的脚本有问题

问题是，如果我有一个通过 post 获得的 json 数组，并且我想将它设置为公共数组，以便我可以在我的函数之外使用它。这是我的代码。

html代码：

```
<input name="myValue"> 
```

jQuery代码：

```
var myArray = newArray(); 

$(document).ready(function(){

   $('input[name="myValue"]').foucusout(function(){
     var postValue = $(this).val();
     $.post('myPhp.php',{post:postValue},function(data){

      var JsonArray = $.parseJSON(data);
          myArray = JsonArray;
     };

}): 
```

PHP代码；

```
<?

if(isset($_POST["post"])){

$myVal = $_POST["post"];

$db = mysql_query("SELECT * FROM parts WHERE code = '$myVal'");
$result = mysql_fetch_array($db);

echo json_encode($result); 
}    
?> 
```

这不是设置 myArray。我究竟做错了什么？

*编辑*

jQuery代码：

```
var myArray = new Array();
$(document).ready(function(e) {

   $('input[name=myValue]').focusout(function(e) {
        var myPost = $(this).val();
        $.post('myPhp.php',{part:myPost},function(data){
                myArray = $.parseJSON(data);
                alert(myArray[2]);
            });
    });

    $('button[name=getArrayValue]').on("click",function(){
            alert(myArray[3]);
        });
}); 
```

HTML 代码

```
<input name="myValue">
<button name="getArrayValue">Get</button> 
```

当我关注输入字段时，我从数组中获得第二个值的警报，当我按下按钮时，我从第三个数组位置获得值。所以它现在正在工作。

感谢每个机构的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:31:46.497

在查询数据库之前，您不会连接到数据库。如果您没有连接到数据库，查询如何选择某些内容？

在您的查询之前添加：

```
$username = //your DB username
$password = //your DB password

mysql_connect("localhost", $username, $password); 
```

您确实应该使用不推荐使用的 API，例如 PDO 或 MySQLi。

**编辑：**

这很简单：AJAX 调用是异步的，因此在运行 focusout 处理程序后设置数组。这是焦点输出时发生的情况：

1.  焦点处理程序被调用
2.  您告诉 jQuery 进行 AJAX 调用并提供一个函数，该函数应在 AJAX 请求完成时运行。
3.  focusout 处理程序完成并尝试提醒**尚未设置的数组**。
4.  AJAX 请求完成，jQuery 调用您提供的函数。
5.  **然后在您的焦点处理程序之后很久设置数组。**

# ios - iOS查看PPT带动画

> ID：15461809
> 
> 赞同：1
> 
> 时间：2013-03-17T14:22:23.770
> 
> 标签：ios, xcode, animation, uiwebview, powerpoint

有没有办法在不丢失动画的情况下查看 PPT 文件？我知道`UIWebView`显示PPT但它剥离了动画，还有其他框架吗？

# html - 带有滚动条的 HTML 画布

> ID：15461811
> 
> 赞同：16
> 
> 时间：2013-03-17T14:23:01.243
> 
> 标签：html, css, canvas, scrollbar

我在宽度不等的画布上绘制图表。每个画布都可以有自己的滚动条吗？我试图将所有画布放在一个 div 中并指定一个最大宽度，但它不起作用。是否有可能所有画布在页面上的可见宽度为 500 像素，并且每个画布都有其滚动条来查看画布的整个宽度。

谢谢你。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-17T14:34:36.817

指定画布的总宽度，然后将其包装在一个 div 中。将 div 设置为`overflow: scroll`500px 宽度。然后，您应该有滚动条，允许您滚动并查看画布的隐藏部分。对所有画布重复此操作。

```
<div style="max-height: 256px;max-width:256px;overflow: scroll;">
          <canvas width="512px" height="512px"></canvas>
</div> 
```

# jvm - java二进制类格式规范的变化

> ID：15461812
> 
> 赞同：1
> 
> 时间：2013-03-17T14:23:04.803
> 
> 标签：jvm, bytecode

互联网上是否有这些年来在 jvm 字节码（或类格式）规范中发生变化的列表？

例如，我知道自类文件版本 49.0 和 51.0 以来，类中添加了许多新属性。而且该`ldc*`指令支持自 49.0 以来的更多参数。是否有此类更改的完整列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:20:03.600

您可以比较不同版本的 JVM 规范。

不幸的是，我不知道有什么地方可以清楚地列出所有差异，但是您可以通过查看[这里来](http://docs.oracle.com/javase/specs/)了解一下。对于版本 1.5 和 1.6，更改以红色突出显示。

我认为添加的主要内容是支持 Java 语言中的新特性的可选属性——注解、枚举、内部类、泛型等。51.0 还添加了所有与调用动态相关的东西。50.0 添加了在 51.0 中强制执行的 StackMapTable。此外，50.0 删除了 jsr/ret 指令。

IIRC`ldc`可以加载从 50.0 开始的 Class 常量和从 51.0 开始的 MethodType 常量

# c#-4.0 - 创建抽象类的新实例

> ID：15461814
> 
> 赞同：0
> 
> 时间：2013-03-17T14:23:13.103
> 
> 标签：c#-4.0

我有抽象类

```
public abstract class BaseEntityDate<T> where T : class
    {
void ExecFunction ( T[] I )
{
}

} 
```

下一个抽象类使用这个

```
public abstract class BaseBOList<T> : T where T : class
    {
public void SomeFunction ( T[] VarObj )
{
BaseEntityDate<T> ObjectData = Activator.CreateInstance<BaseEntityDate<T>>();

ObjectData.ExecFunction ( VarObj );

}
}

public class MyClass
{
} 
```

然后创建继承类

```
public class NyInhClass : BaseBOList<MyClass>
{
}

MyClass[] ArrayMyClass = new MyClass[]() { new MyClass() };

NyInhClass  TestOb = new NyInhClass ();

TestOb.SomeFunction ( ArrayMyClass ); 
```

也是下一个使用示例

```
public class MyClass2
    {
    } 
```

然后创建继承类

```
public class NyInhClass2 : BaseBOList<MyClass2>
{
}

MyClass2[] ArrayMyClass2 = new MyClass2[]() { new MyClass2() };

NyInhClas2s  TestOb = new NyInhClass2 ();

TestOb.SomeFunction ( ArrayMyClass2 ); 
```

等等

Accuared 异常“无法创建抽象类”

可以帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:25:42.270

试试这样：

```
object ExecuteBaseEntityDate ( T _Var )
{
    return Activator.CreateInstance(typeof(T));
} 
```

在此示例中，我们使用的`Activator.CreateInstance`重载不是通用的，而是在运行时动态获取类型参数。

# python - 使用matplotlib通过python中的数据列表分别绘制直方图

> ID：15461819
> 
> 赞同：1
> 
> 时间：2013-03-17T14:24:09.633
> 
> 标签：python, matplotlib

我有一个嵌套列表，我需要将其数据绘制在不同的直方图上。

```
 ...
    ...
    numbers = [[float(line[1]) for line in chr ] for chr in result]
    plt.hist(numbers)
    plt.show() 
```

这样做，输出是一个唯一的数字，每个 bin 中有不同直方图的条形（例如，第一个 bin 包含每个直方图的第一个条形）而不是我想要的是有单独的直方图。我试图做一个for循环：

```
 for w in numbers:
       plt.hist(w)
       plt.show() 
```

但是这样做我每次只能获得一个直方图，并且只有当我关闭前一个时，我才能看到下一个。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:36:57.967

使用[子图](http://matplotlib.org/users/pyplot_tutorial.html#working-with-multiple-figures-and-axes)。选择`n_rows`和`n_columns`这样您就可以制作`len(numbers)`子图。`i`从 1 开始，而不是 0。

```
i = 1
for w in numbers:
    plt.subplot(n_rows, n_columns, i)
    i += 1
    plt.hist(w)
plt.show() 
```

通过`plt.show()`退出 for 循环，图形仅在屏幕上绘制一次，无需关闭早期的不完整版本。

# google-app-engine - 使用谷歌云端点 JS api 客户端的反序列化错误

> ID：15461820
> 
> 赞同：4
> 
> 时间：2013-03-17T14:24:17.700
> 
> 标签：google-app-engine, google-cloud-endpoints

我已经设置了一个带有端点的本地应用引擎。使用 CURL 我成功地测试了端点，如下所示：

```
C:\Program Files>curl.exe --header "Content-Type: application/json" -X POST -d "{g:\"test\",u:1,l:{x:1,y:1}}" http://localhost:8888/_ah/api/myapp/v1/move 
```

我得到的回应是预期的：

```
{
    "g" : "test",
    "u" : 1,
    "l" : {
        "x" : 1,
        "y" : 1
    }
} 
```

当我去我的 JS 客户端并尝试做同样的事情时，奇怪的事情开始发生。显然，当从 Javascript 调用端点时，嵌套元素“l”无法反序列化。我不知道这是为什么？

这是我在控制台中收到的错误消息：

```
500 (Can not deserialize instance of java.lang.String out of START_OBJECT token  at [Source: N/A; line: -1, column: -1]) 
```

这是调用我的端点的 JS 函数。

```
function init() {
    var myapp = 'http://localhost:8888/_ah/api';
    gapi.client.load('myapp', 'v1', function() {
        var payload = {g:"Test",u:0,l:{x:4,y:4}};
        gapi.client.myapp.unit.move(payload).execute(function(resp) {
            console.log(resp);
        });
    }, myapp);
} 
```

发送到服务器的有效载荷是：

```
[{"jsonrpc":"2.0","id":"gapiRpc","method":"myapp.unit.move","params":{"g":"Test","u":0,"l":{"x":4,"y":4}},"apiVersion":"v1"}] 
```

当我`l:{x:4,y:4}`从有效负载中删除时，我的端点被调用就好了。

似乎我做错了什么，但是什么？

另请参阅 [在 Google javascript api 客户端中导致 json 序列化错误的自有实体](https://stackoverflow.com/questions/15193944/owned-entity-causing-json-serialization-error-in-google-javascript-api-client)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:14:42.107

# Python：

这似乎是 Java 后端的一个问题，对于 Python 端点，我实现了一个 API，该 API 使用一个调用的类`Total`来保存数据：

```
from protorpc import messages

class LeftRight(messages.Message):
    x = messages.IntegerField(1)
    y = messages.IntegerField(2)

class Total(messages.Message):
    g = messages.StringField(1)
    u = messages.IntegerField(2)
    l = messages.MessageField(LeftRight, 3) 
```

然后有一个虚拟端点，它只返回`Total`它收到的对象

```
...
@endpoints.method(Total, Total,
                  path='total', http_method='POST',
                  name='total.total')
def total(self, request):
    return request 
```

它使用与您包含的基本相同的 Javascript 完美运行。

我将它合并到我在 fork中创建的[分支中的示例应用程序中。](https://github.com/dhermes/appengine-endpoints-tictactoe-python/commit/3379df39e4dade254e89b50331a83023199b3989)详情请参阅[提交](https://github.com/dhermes/appengine-endpoints-tictactoe-python/commits/stackoverflow-15461820)。注意：我进行了后续[提交](https://github.com/dhermes/appengine-endpoints-tictactoe-python/commit/257e3474de3d58c70572d450b87997681a878a9c)以摆脱 Auth/https，因此它在`dev_appserver`.

# 爪哇：

待定

# matlab - matlab中的diff函数

> ID：15461832
> 
> 赞同：0
> 
> 时间：2013-03-17T14:25:35.843
> 
> 标签：matlab

我知道`diff`计算离散导数，或者说向量的连续分量之间的差异。

不是我定义一个变量

```
x=-4:1/10:4;
y=diff(diff(x)); 
```

为什么我会得到`1.e-15*`一排非零的向量？Matlab 通过以某种方式显示它是诚实的，在计算`x=-4:1/10:4;`时它已经四舍五入了一些数字，虽然我`y=(diff(x));`只执行并且即使它显示所有数字都相同，但它以某种方式表明在它的核心中它们没有存储为相同的数量（因为它四舍五入关闭 -4+0.1 或 -3.9 以外的某个数量 ???)。现在，我如何获得标准输出？当它实际上是零时，我如何得到 0，就像在这种情况下一样，而无论它可能是什么样子`1*e-...`，当它实际上是非零时，我如何得到非零？

*请注意*，如果这是不可能的，`diff(x,2)`当 diff 实际上为零时，我如何计算 real/actual 或至少准确的符号和零？并获得函数的真正离散导数，`cosine`而不是一些误导性的值？

我需要使用 diff 计算拐点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:46:46.380

简而言之，这是因为浮点精度，它在 MATLAB 中由[`eps`](http://www.mathworks.com/help/matlab/ref/eps.html)(*即*epsilon) 给出。你得到的任何结果都将如此准确，而不是更多。关于您的问题，您可以通过舍入所有元素或将几乎为零的元素归零来美化结果。例如，要将所有小于 10ε 的元素设置为零：

```
y = diff(x, 2);
y(abs(y) < 10 * eps) = 0; 
```

有关详细信息，请参阅重复问题的答案。

# java - 如何获取给定查询的网络点击数？

> ID：15461837
> 
> 赞同：0
> 
> 时间：2013-03-17T14:25:49.897
> 
> 标签：java, google-app-engine, web-applications, information-retrieval

我正在做一个基于信息检索的项目，因为我想知道网络上给定查询的网络点击量。是否有可能从谷歌获得网络点击量？如果是这样，任何人都可以告诉我如何使用 java 程序获得网络点击量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:31:05.467

看看[谷歌趋势](http://www.google.com/trends/)。您可以找出特定查询的趋势并将结果下载为 CSV。

# html - CSS3：为什么这个过渡不起作用，我该如何解决？

> ID：15461843
> 
> 赞同：0
> 
> 时间：2013-03-17T14:26:23.503
> 
> 标签：html, css, css-transitions, transition

所以，基本上，我正在为我的一个小项目制作导航，但它不起作用。

[链接到损坏的代码](http://codus.tk/)

我只把代码放在“代码”链接上，所以忽略其他的。

问题是：当您将鼠标悬停在代码链接上时，会出现“测试：3”文本。代码链接和“Test :3”都在一个表中，每个都有自己的 TD。当您将鼠标悬停在表格所在的父元素上时，我使用 Javascript 将“Test :3”TD 更改为正确的类。所有这些工作都非常好，只是我想要“Test 的宽度： 3" TD有一个过渡。我试图添加这个，但它只是不工作。

如果有人可以看看，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:29:11.893

CSS 过渡应该用于`<tr>`标签，而不是`<td>`

# c# - 在 Form2.Disposed 事件上更改 Form1.Checkbox 状态

> ID：15461845
> 
> 赞同：0
> 
> 时间：2013-03-17T14:26:39.577
> 
> 标签：c#, windows-forms-designer

几个小时以来，我一直在寻找这个特定问题的解决方案。所以你们这些 Stackoverflow 的好心人是我最后的选择

这是我到目前为止所做的

* * *

这是在 Form2.cs

```
public partial class Form2 : Form
{
    Form1 newForm1;

    public Form2()
    {
        InitializeComponent();

    }
     private void Form2_Disposed(object sender, EventArgs e)
    {
      newForm1 = new Form1();
      newForm1.CheckBox1_Checked = false;
    } 
```

* * *

这是在 Form2.Designer.cs

```
partial class Form2
{
   ....
 private void InitializeComponent()
    {
      ....
      this.Disposed += new System.EventHandler(this.Form2_Disposed);
      ....
    }
   ....
} 
```

* * *

这是在 Form1.cs 中

```
public partial class Form1 : Form
{
  ....
  public bool CheckBox1_Checked
  {
      get { return checkBox1.Checked; }
      set { checkBox1.Checked = value; }
  }
  ....
} 
```

因此，当我关闭 Form2（使用 X）时，程序会通过 Disposed 事件，但不会更改 Checkbox 状态。

我还尝试将 Form1.Checkbox1 控件公开并直接访问它（我的意思是不使用访问器，但仍然没有运气。

我怀疑 newForm1 是 Form1 的副本。但我不知道如何判断“newForm1”就是“Form1”对象

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:32:23.173

```
public partial class Form1 : Form
{
    public static Form1Instance;
    ...

    Form1.OnLoad(...)
    {
        Form1Instance=this;
    }
}

//now call using static variable
Form1.Form1Instance.CheckBox1_Checked=true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:40:42.357

如果 Form1 已经打开，您可以这样做：（而不是使用 Dispose 使用关闭事件）Form1.cs

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            _Form1 = this;
        }
        public static Form1 _Form1;

        public CheckBox chk { get { return checkBox1; } }

        private void button1_Click(object sender, EventArgs e)
        {
            Form2 gg = new Form2();
            gg.ShowDialog();
        }

    } 
```

Form2.cs

```
public partial class Form2 : Form
    {

        public Form2()
        {
            InitializeComponent();
            this.FormClosed += new FormClosedEventHandler(Form2_FormClosed);
        }

        void Form2_FormClosed(object sender, FormClosedEventArgs e)
        {
            Form1._Form1.chk.Checked = false;
        }

    } 
```

# java - 测试未通过此 java 代码

> ID：15461846
> 
> 赞同：0
> 
> 时间：2013-03-17T14:26:53.687
> 
> 标签：java

我正在编写代码，只要字符串中有一个“.xyz”，它就会返回false，但是如果有一个没有句点的xyz，它就会返回true。大多数测试都通过了，除了这个：

```
xyzThere("abc.xyzxyz") 
```

有没有办法修复这个测试，让它也通过？我的代码如下。

```
public boolean xyzThere(String str) {
  for (int i = 0; i < str.length() - 2; i++) {
    if (str.charAt(i) == '.') {
      if (str.substring(i+1, i+4).equals("xyz")) {
        return false;
      }
    }
    else if (str.substring(i, i+3).equals("xyz")) {
      return true;
    }
  }
  return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:33:37.593

我会使用正则表达式。如果您担心性能，请在方法之外创建模式。写吧

```
private boolean xyzThere(String string) {
    return string.matches("xyz.*|.*[^.]xyz.*");
} 
```

你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:34:04.283

我假设您想要返回包含“.xyz”`false`的任何内容，**除非它还包含**“xyz”。`String`

 **为此，您首先检查“.xyz”——如果它不存在，那么我们就完成了。如果它在那里，则删除所有“.xyz”并简单地检查“xyz”

```
public static void main(String[] args) {
    System.out.println(hasXyz("abc"));
    System.out.println(hasXyz("abc.xyz"));
    System.out.println(hasXyz("abcxyz"));
    System.out.println(hasXyz("abc.xyzxyz"));

}

public static boolean hasXyz(final String in) {
    if(in.contains(".xyz")) {
        final String s = in.replaceAll("\\.xyz", "");
        return s.contains("xyz");
    }
    return true;
} 
```

输出：

```
true
false
true
true 
```**

# javascript - 全局变量的值发生了变化，javascript

> ID：15461853
> 
> 赞同：0
> 
> 时间：2013-03-17T14:27:40.770
> 
> 标签：javascript, jquery, variables

我有这个代码片段，我不知道为什么变量的值会改变。

```
while (increment > 0) {
        for (i = increment; i < n; i++) {
            var unsorted = list;
            console.log(unsorted + " -> unsorted" + i);
            var temp = list[i];
            var j = i;
            while (j >= increment && list[j - increment] > temp) {
                list[j] = list[j - increment];
                j -= increment;
            }
            list[j] = temp;
            console.log(unsorted + " -> must not change" + i);
            console.log(list + "-> must not be the same below");
        }
 } 
```

当我再次记录变量`unsorted`时，值已更改？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T14:29:48.770

你只有一个数组。

`var unsorted = list`创建指向**同一**数组实例的第二个引用。

相反，您可以调用`list.slice()`，它返回数组的（浅）副本。

# entity-framework - 我可以在构建和部署过程中测试实体框架 down() 迁移吗？

> ID：15461854
> 
> 赞同：2
> 
> 时间：2013-03-17T14:27:43.587
> 
> 标签：entity-framework, build-process, build-automation, entity-framework-migrations

我使用基于实体框架代码的迁移。我的工作流程的简化版本是......

针对本地数据库，对模型进行更改，在本地测试向上和向下迁移，将代码提交到 repo。然后，我的构建服务器从存储库中提取、构建、测试和部署等，然后我针对质量数据库自动运行任何新迁移。这很好用，但是我也想让我的构建服务器测试我的向下迁移。

我想实现一些目标，也许在部署新的二进制文件并运行向上迁移之后，我运行我的集成测试以确保它们通过，然后运行向下迁移并部署我最后一个已知的良好二进制文件并再次运行我的集成测试。

如果该部署通过，那么我就知道我的向下迁移工作正常，也许更重要的是，我可以创建一个单击脚本来将我的应用程序降级到以前的版本。从理论上讲，我可以将部署一直退回到第一次部署。

那么有谁知道我如何指示我的二进制文件为它在部署时运行的任何向上迁移运行 down() 迁移？

# php - 使用 CodeIgniter 的 Jquery Ajax 调用

> ID：15461857
> 
> 赞同：2
> 
> 时间：2013-03-17T14:28:11.190
> 
> 标签：php, codeigniter, jquery

我正在尝试为我的页面上的两个表设置一种自动更新的方式，或者如果我“异步”错误地纠正我。我也需要第二次更新。我也在使用 CodeIgnighter MVC 框架，至于我的表，我使用的是 DataTables。我的 Jquery 如下：

```
<script>
        function updatewaiting(){
        $('.display').load('https://www.finaidtest.com/index.php/studentqueue_controller/data');
        }
        setInterval( "updatewaiting()", 1000 );

    </script> 
```

我的表格如下：

```
<table id='waiting' class='display'>
        <thead>
        <tr>
            <th>ID</th>
            <th>A Number</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Time Waiting</th>
            <th>Reason for visit</th>
            <th>Comments</th>
            <th>Aid Year</th>
            <th>Staff Comments</th>
            <th>Options</th>
        </tr>
        </thead>
        <tbody>

        <?php
        $options = array("" => "", 'start' => 'Start Session', 'stop' => 'Student Not Present', 'abandon' => 'End Session',);
        foreach ($waiting as $row) {
            ?>
            <tr>
                <td><?php echo htmlspecialchars($row['id'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo anchor('studentqueue_controller/history/' . urlencode($row['anum']) . '', htmlspecialchars($row['anum'], ENT_QUOTES, 'UTF-8'), 'target="_blank"'); ?></td>
                <td><?php echo htmlspecialchars($row['first'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row['last'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row['SECOND'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row['reason'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row['studentcomments'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row['aidyear'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row['counselorcomments'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td>
                <?php echo form_open('studentqueue_controller/counselorscreen/' . urlencode($row['id']) . ''); ?>
                <?php echo form_dropdown('options', $options, ""); ?>
                <?php echo form_submit('submit', 'Submit'); ?>
                <?php echo form_close(); ?>
                </td>
            </tr>

            <?php }
        ?>
        </tbody>
    </table>

<table id='beingseen' class='display'>
        <thead>
        <tr>
            <th>ID</th>
            <th>A Number</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Sign In Time</th>
            <th>Staff Member</th>
            <th>Start Time</th>
            <th>Options</th>
        </tr>
        </thead>
        <tbody>
        <?php $options1 = array("" => "", 'continue' => 'Continue Session', 'terminate' => 'Terminate Session',);
        foreach ($beingseen as $row1) {
            ?>
            <tr>
                <td><?php echo htmlspecialchars($row1['id'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row1['anum'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row1['first'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row1['last'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row1['signintime'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row1['fname'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td><?php echo htmlspecialchars($row1['starttime'], ENT_QUOTES, 'UTF-8'); ?></td>
                <td>
                <?php echo form_open('studentqueue_controller/counselorscreen/' . urlencode($row1['id']) . ''); ?>
                <?php echo form_dropdown('options', $options1, ""); ?>
                <?php echo form_submit('submit', 'Submit'); ?>
    <?php echo form_close(); ?>
                </td>
                </td>
            </tr>
<?php } ?>

        </tbody>
    </table> 
```

Jquery 函数在我的控制器中调用我的 data() 方法，所做的只是查询数据库：

```
function data(){
    $this->load->model('queue_model');

    $data['waiting'] = $this->queue_model->waiting();
    $data['beingseen'] = $this->queue_model->beingseen();
    } 
```

我很困惑为什么当我查看我的网络选项卡时我看到了 ajax 调用，但我没有在网络选项卡中看到响应。

只是一个更新日期：

```
Array ( [waiting] => Array ( [0] => Array ( [id] => 176 [0] => 176 [anum] => A00163047 [1] => A00163047 [first] => rix [2] => rix [last] => aja [3] => aja [SECOND] => 62:47:39 [4] => 62:47:39 [reason] => Award Status [5] => Award Status [studentcomments] => [6] => [aidyear] => 13-14 [7] => 13-14 [counselorcomments] => [8] => ) [1] => Array ( [id] => 179 [0] => 179 [anum] => A00163047 [1] => A00163047 [first] => rix [2] => rix [last] => aja [3] => aja [SECOND] => 00:22:29 [4] => 00:22:29 [reason] => Award Status [5] => Award Status [studentcomments] => [6] => [aidyear] => 13-14 [7] => 13-14 [counselorcomments] => [8] => ) [2] => Array ( [id] => 178 [0] => 178 [anum] => A12345678 [1] => A12345678 [first] => ririri [2] => ririri [last] => ririir [3] => ririir [SECOND] => 00:24:21 [4] => 00:24:21 [reason] => Award Status [5] => Award Status [studentcomments] => [6] => [aidyear] => 13-14 [7] => 13-14 [counselorcomments] => [8] => ) [3] => Array ( [id] => 177 [0] => 177 [anum] => A99999999 [1] => A99999999 [first] => rux [2] => rux [last] => ajaj [3] => ajaj [SECOND] => 00:29:20 [4] => 00:29:20 [reason] => Award Status [5] => Award Status [studentcomments] => [6] => [aidyear] => 13-14 [7] => 13-14 [counselorcomments] => [8] => ) ) [beingseen] => ) 
```

我的数据功能实际上是将数据返回给控制器。我刚刚对我的数据做了一个 print_r 。然而，返回的数据数组被放入表本身，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:35:54.323

在您的情况下，您应该使用 javascript 加载视图并打印它`load()`，因此请使用：

```
function data(){
        $this->load->model('queue_model');

        $data['waiting'] = $this->queue_model->waiting();
        $data['beingseen'] = $this->queue_model->beingseen();

        echo $this->load->view('myview',$data,true);
    } 
```

并且您的视图将在您指定的位置输出`$(_element).load();`

只是为了确保您了解 load() jquery 方法：

当你这样做时，`$('div#element').load('myfile.php');`你就是`outputtting the returning data from myfile.php` `into the <div id="element"></div> html`元素

# sql - Access 2010：加入三个表，未知错误

> ID：15461858
> 
> 赞同：5
> 
> 时间：2013-03-17T14:28:21.020
> 
> 标签：sql, ms-access

我正在尝试在 SQL 查询中加入 MS Access 2010 中的三个表。

```
SELECT Track.trackName, TrackIsGenre.genre, ContainsTracks.albums
FROM Track 
INNER JOIN TrackIsGenre ON  Track.trackName = TrackIsGenre.track
INNER JOIN ConstainsTracks ON Track.trackName = ContainsTracks.tracks
WHERE genre = "Rock"
ORDER BY trackName ASC; 
```

我搜索了网络，据我所知，应该是这样。我可以加入两个表没问题。我得到的错误是：“查询表达式中的语法错误（缺少运算符）”，它突出显示了两个 INNER JOIN。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T14:31:04.457

在您第一次加入时添加一个括号，（*这在 MOST RDBMS 上是可选的*）

```
SELECT  Track.trackName, TrackIsGenre.genre, ContainsTracks.albums
FROM    (Track INNER JOIN TrackIsGenre ON  Track.trackName = TrackIsGenre.track)
        INNER JOIN ConstainsTracks ON Track.trackName = ContainsTracks.tracks
WHERE   genre = "Rock"
ORDER   BY trackName ASC; 
```

# visual-c++ - 使用链接结构实现 STACK 类

> ID：15461860
> 
> 赞同：1
> 
> 时间：2013-03-17T14:28:26.200
> 
> 标签：visual-c++

我想使用链接结构实现一个 STACK 类来存储有关学生的以下信息：i。ii. 学生的注册号 学生姓名

我想编写客户端代码，这样根据学生的注册人数，然后我想只保留秋季学期入学的学生记录，并弹出春季学期入学的所有学生记录。春季入学的学生注册号从f开始，如f010123，春季入学的学生注册号从s开始。我知道使用数组实现堆栈但不使用链表。我想知道堆栈类中将包含哪些类型的数据成员以及推送和弹出函数中的参数是什么。我不知道名称和注册如何. 将在一个链表中一起实现。我只需要帮助来理解它的基本思想。然后我将自己继续执行此代码。谁能帮我解决这个问题？？提前致谢

# xml - 解析 iOS 的 xml 图像

> ID：15461864
> 
> 赞同：1
> 
> 时间：2013-03-17T14:28:53.813
> 
> 标签：xml, parsing

我正在寻找一个多星期的功能代码来读取图像链接 xml。能帮助我会很棒，因为我真的需要

你能帮我吗？

戴维

# iphone - 切换到另一个选项卡时保持标题视图不变

> ID：15461865
> 
> 赞同：0
> 
> 时间：2013-03-17T14:28:58.950
> 
> 标签：iphone, ios

我有一个 UITabBarController。现在我想在它上面添加一个视图，并在用户切换到另一个选项卡时使视图保持不变。我尝试创建一个 UIViewController，并将 UITabBarController 添加为子视图，但是当我切换到另一个选项卡时它崩溃了。

有什么好的方法吗？谢谢你的帮助。

![我的应用会是什么样子](../Images/db8e00ce755972e2f0c77930352cc027.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:37:49.863

当然有。您要做的是制作一个视图控制器，它将容纳始终可见的视图，并在其顶部添加标签栏控制器。如果您使用故事板，则可以使用容器视图轻松完成。只需将对象库中的容器拖放到您创建的视图控制器上，根据需要调整大小，然后链接其 viewDidLoad segue 以嵌入标签栏控制器。

[http://dl.dropbox.com/u/91385349/tabInView.zip](http://dl.dropbox.com/u/91385349/tabInView.zip)

# java - 使用 JDBC 在 localhost 中连接 oracle 11G 时出错

> ID：15461866
> 
> 赞同：1
> 
> 时间：2013-03-17T14:29:00.203
> 
> 标签：java, jdbc

```
import java.sql.*;

public class one {

    public static void main(String[] args)

    {
            Connection conn=null;
        Statement stmt=null;

        try
        {
        Class.forName("oracle.jdbc.driver.OracleDriver");
            conn=DriverManager.getConnection("jdbc:oracle:thin:@//localhost:1521/ecom","system","manager");
        stmt=conn.createStatement();
        String str="insert into country values(3,'bangladesh');";
        int k=stmt.executeUpdate(str);
        System.out.println(k);
            }
        catch(Exception e)
        {
            e.printStackTrace();

        }

    }
    } 
```

我添加到类路径中的唯一 jar 文件是`ojdbc6.jar`连接是否需要任何其他 jar`oracle 11g(11.2.0.1.0)`我使用 eclipse 作为 IDE

这是错误

```
java.sql.SQLException: The Network Adapter could not establish the connection
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at one.main(one.java:17)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
    at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
    at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
    at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
    at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
    at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
    ... 7 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocket`Impl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:35:12.613

1) 请确保数据库主机名、端口号或数据库实例名正确。2）确保 TNSListener 已经启动（运行 lsnrctl start）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T14:13:13.963

连接字符串格式错误。应该是 "jdbc:oracle:thin://@localhost:1521/ecom" 注意 // 和 @ 的转置。

# c++ - 使用空的着色器程序绘制是否有效？

> ID：15461877
> 
> 赞同：0
> 
> 时间：2013-03-17T14:30:17.460
> 
> 标签：c++, opengl, rendering, glsl, shader

在我的游戏中，有一个渲染模块可以处理着色器、帧缓冲区和绘图。现在我想分别封装这三个任务的逻辑。这个想法是我将渲染模块分成三个模块。我这样做是为了降低代码复杂性并轻松实现实时着色器重新加载，但对我的问题并不重要。

绘图模块将创建空的着色器对象，`glCreateProgram()`并将它们与源文件的路径一起全局存储。着色器模块将检查它们并通过加载源文件、编译和链接来创建实际的着色器。

但是在这个概念中，可能会出现渲染模块已经想要绘制但着色器模块没有创建实际着色器的情况。所以我的问题是，使用空着色器程序绘制是否有效？发生这种情况时屏幕会变黑对我来说是完全可以接受的。创建着色器应该很快就准备好了，所以延迟可能不明显。

使用空的着色器程序绘制是否有效？否则，我该如何实现其他地方加载的着色器的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:35:47.743

文档中的两个相关行：

*   [glAttachShader](http://www.opengl.org/sdk/docs/man/xhtml/glAttachShader.xml)

> 无论着色器对象是否附加到程序对象，可以对着色器对象执行的所有操作都是有效的。在源代码被加载到着色器对象之前或在着色器对象被编译之前，允许将着色器对象附加到程序对象。

*   [glUseProgram](http://www.opengl.org/sdk/docs/man/xhtml/glUseProgram.xml)

> 如果*program*为零，则当前渲染状态指的是无效的程序对象，并且着色器执行的结果是未定义的。但是，这不是错误。如果程序不包含 GL_FRAGMENT_SHADER 类型的着色器对象，则会在顶点上安装可执行文件，可能还会安装几何处理器，但片段着色器执行的结果将是未定义的。

所以似乎可以做到这一点，但你可能不会在所有机器上得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:41:01.280

你如何定义“有效”和“空”？

如果程序对象的最后一个链接不成功（或者如果它没有最后一个链接），那么调用`glUseProgram`它就是一个`GL_INVALID_OPERATION`错误。这也意味着`glUseProgram`会失败，所以当前的程序不会改变。因此，所有[`glUniform`调用](http://www.opengl.org/wiki/GlUniform)都将引用该程序而不是新程序；如果该程序为零，则会出现更多`GL_INVALID_OPERATION`错误。

如果没有当前程序（即程序为 0），则尝试渲染将产生未定义的行为。

未定义的行为对您的需求“有效”吗？如果您不打算向用户显示该帧（通过不调用交换缓冲区），那么您渲染的内容将无关紧要。OpenGL 错误队列中的所有这些错误对您“有效”吗？

# c# - 用户控件的有序列表（有添加和删除）

> ID：15461889
> 
> 赞同：5
> 
> 时间：2013-03-17T14:31:35.130
> 
> 标签：c#, winforms, user-controls, event-handling

**一些上下文**

我正在创建一个允许用户创建基本货架布置的应用程序，我希望创建一个界面，该界面代表按顺序（从左到右）彼此相邻的货架块（一组货架）并允许用户编辑他们的详细信息。每个区块都会有一系列细节，例如它的顺序、名称、宽度、高度和架子的数量。

**要求**

我希望界面具有（最多 20 个）用户控件的水平滚动列表。每个用户控件将代表一个块的详细信息，并具有用于编辑这些详细信息的基本形式。

用户应该能够按下用户控件中的一个按钮，该按钮将其删除并重新排序其他块，并将块添加到列表的末尾。

**我的问题**

如何维护这些“搁板”用户控件的有序列表，并让表单处理任何控件中删除按钮的按下，这会导致它被删除并重新排序列表？任何帮助都会很棒。

**截屏**

我刚刚开始对界面进行编程，所以我只能提供一个我希望界面看起来像的快速模型：

![在此处输入图像描述](../Images/148ccfe81a4ef4484e80d054a21874eb.png)

尽管它是基本的，但我希望它能让您对我正在寻找的东西有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:06:00.970

您可以使用[BindingList](http://msdn.microsoft.com/en-us/library/ms132679.aspx)来存储您的块。BindingList 将通知 UI 控件（例如 ListBox）数据已更改，例如正在删除的块。UI 将通过从 ListBox 中删除块来反映这一点。如果您熟悉 WPF/Silverlight 数据绑定，这与列表类似但不完全相同`ObservableCollection`（如果您的目标`.NET 4`是能够澄清这一点）。

或者，您可以使用[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)而不是直接使用`BindingList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:36:31.497

如何在您的表单上放置一个隐藏的网格控件。
然后，您只需使用所需数据向网格添加/删除行，一切都会保持井然有序。这里的一个优点是，出于调试目的，您始终可以使网格可见以快速查看所有数据。

# neo4j - dr who 示例数据库中未填充索引

> ID：15461893
> 
> 赞同：0
> 
> 时间：2013-03-17T14:32:03.227
> 
> 标签：neo4j

我从这里下载了 dr who neo4j 示例数据库

[http://www.neo4j.org/develop/example_data](http://www.neo4j.org/develop/example_data)

我可以遍历/查询节点、关系和属性。但索引似乎是空的。

例如，这些密码查询不返回任何行。

```
"START doctor = node:characters(character='Doctor') RETURN doctor"
"START doctor = node:characters('*:*') RETURN doctor"
"START actors = node:actors('*:*') RETURN actors" 
```

我将如何建立字符索引？是吗：

```
Iterate all nodes
When node contains character property add it to index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:54:34.500

我上传了一个固定的数据集，zip 文件不包含索引子目录。

这些索引是在 drwho 教程的 java 代码中手动构建的。

shell 中有一个 index 命令，它也是可编写脚本的，但索引正确的节点并不容易。

我可能会使用 javascript 集成`eval`并创建索引，迭代所有节点并根据属性将节点添加到适当的索引。

或者

我会使用 cypher 输出索引节点所需的 shell 命令。

就像是

```
start n=node(*) where has(n.character) return "cd -a "+id(n)+" & index -i characters character "; 
```

您必须从表格边框中删除“I”并将 & 替换为 &&。

# android - Android批量设置ImageButton Visibility

> ID：15461894
> 
> 赞同：0
> 
> 时间：2013-03-17T14:32:04.160
> 
> 标签：android, view, visibility, imagebutton, batch-processing

我想在应用启动时隐藏所有图像 ImageButton；

我怎样才能存档呢？这是代码：

```
ImageButton imgBtn[];

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);
                hideBtn();
}

private void hideBtn(){
        for (int i = 0; i < 3; i++) {
            imgBtn[i] = (ImageButton) findViewById("R.id.myBTN"+[i]);
            imgBtn[i].setVisibility(View.GONE);
        }
} 
```

**更新** 我改变了 hideBtn 方法然后我在测试时强制关闭

```
 -159   private void hideBtn(){
 -160       for (int i = 0; i < 3; i++) {
 -161           int id = getResources().getIdentifier("myBTN"+i,"id", "com.my.app");
 -162           imgBtn[i] = (ImageButton)findViewById(id);
 -163           imgBtn[i].setVisibility(View.GONE);
 -164       }
 -165   } 
```

崩溃日志猫报告：

```
03-18 16:46:05.125: E/AndroidRuntime(19463):    at dalvik.system.NativeStart.main(Native Method)
03-18 16:46:05.125: E/AndroidRuntime(19463): Caused by: java.lang.NullPointerException
03-18 16:46:05.125: E/AndroidRuntime(19463):    at com.my.app.Main.hideBtn(Main.java:162)
03-18 16:46:05.125: E/AndroidRuntime(19463):    at com.my.app.Main.onCreate(Main.java:61)
03-18 16:46:05.125: E/AndroidRuntime(19463):    at android.app.Activity.performCreate(Activity.java:5108)
03-18 16:46:05.125: E/AndroidRuntime(19463):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-18 16:46:05.125: E/AndroidRuntime(19463):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2266)
03-18 16:46:05.125: E/AndroidRuntime(19463):    ... 11 more 
```

更新：这是 xml 代码：

```
<ImageButton
        android:id="@+id/myBTN1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="@drawable/button" />

<ImageButton
        android:id="@+id/myBTN2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/myBTN1"
        android:layout_below="@+id/myBTN1"
        android:layout_marginTop="12dp"
        android:background="@drawable/button" />

<ImageButton
        android:id="@+id/myBTN3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/myBTN2"
        android:layout_below="@+id/myBTN2"
        android:layout_marginTop="12dp"
        android:background="@drawable/button" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:39:55.740

`findViewById` needs the argument of type int but you are passing type of string. You need to get the resource id first.

you can use getIdentifier method of resource class to get the id, check this [getIdentifier](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

do like this

```
int id=getResources().getIdentifier("myBTN"+[i], "id", "com.mypackage.myapp"); 
```

then

```
imgBtn[i] = (ImageButton) findViewById(id); 
```

# java - 使用 GSON 反序列化具有特定对象的通用容器

> ID：15461896
> 
> 赞同：2
> 
> 时间：2013-03-17T14:32:20.747
> 
> 标签：java, android, gson

我有一个 Web 服务，它为每个请求返回相同的通用容器以及一些基本信息。例如，请求用户列表会给我以下响应：

```
{
   "error":false,
   "message":"Message goes here",
   "items":[
      {
         "id":1,
         "name":"Test User 1"
      },
      {
         "id":2,
         "name":"Test User 2"
      }
   ]
} 
```

当请求不同的资源时，只有项目列表会有所不同：

```
{
   "error":false,
   "message":"Message goes here",
   "items":[
      {
         "id":3,
         "artist":"Artist 1",
         "year":2001
      },
      {
         "id":4,
         "artist":"Artist 2",
         "year":1980
      }
   ]
} 
```

在我的客户端中，我想使用 GSON 将响应映射到 java 对象上：

```
public class ArtistRestResponse {
    private boolean error;
    private String message = "";
    private Artist[] items;     
} 
```

但是，为了重构公共字段并阻止我为每个资源创建类，创建一个通用类型的`RestResponse<T>`类将是一个合乎逻辑的步骤：

```
public class RestResponse<T> {
   private boolean error;
   private String message = "";
   private T[] items;           
} 
```

问题是无法使用`RestResponse<Artist> = new Gson().fromJson(json, RestResponse<Artist>.class);`。有什么方法可以使用这种结构，还是有更好的方法来处理服务器响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:40:02.360

你应该`TypeToken`在这里使用。

```
final TypeToken<RestResponse<Artist>> token = new TypeToken<RestResponse<Artist>>() {};
final Type type = token.getType();
final Gson gson = new Gson();

final RestResponse<Artist> response = gson.fromJson(json, type); 
```

# vagrant - 将变量传递给 vagrant 中的 shell 脚本配置器

> ID：15461898
> 
> 赞同：28
> 
> 时间：2013-03-17T14:32:36.097
> 
> 标签：vagrant, parameter-passing, provisioning

我正在使用一个简单的 shell 脚本来为 vagrant 设置提供软件，如此[处所示](http://docs.vagrantup.com/v2/provisioning/shell.html)。

但是无法想出一种方法来获取传递给 vagrant 的命令行参数并将它们发送到外部 shell 脚本。谷歌透露这是作为一项功能添加的，但我找不到任何涵盖它的文档或示例。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-24T20:15:58.473

你是对的。传递参数的方法是使用`:args`参数。

```
config.vm.provision :shell, :path => "bootstrap.sh", :args => "'first arg' second" 
```

`first arg`请注意，仅当您想在传递的参数中包含空格时才需要单引号。也就是说，上面的代码相当于在终端中输入以下内容：

```
$ bootstrap.sh 'first arg' second 
```

在脚本中 $1 指的是字符串“first arg”，而 $2 指的是字符串“second”。

可以在此处找到关于此的 v2 文档：http: [//docs.vagrantup.com/v2/provisioning/shell.html](http://docs.vagrantup.com/v2/provisioning/shell.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-08T20:00:10.883

确实，它不适用于变量！正确的语法是：

```
var1= "192.168.50.4"
var2 = "my_server"
config.vm.provision :shell, :path => 'setup.sh', :args => [var1, var2] 
```

然后，在 shell setup.sh 中：

```
echo "### $1 - $2"

> ### 192.168.50.4 - my_server 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-16T00:50:57.000

这是从环境中传递变量的替代方法：

```
config.vm.provision "shell" do |s|
    s.binary = true # Replace Windows line endings with Unix line endings.
    s.inline = %Q(/usr/bin/env    \
      TRACE=#{ENV['TRACE']}       \
      VERBOSE=#{ENV['VERBOSE']}   \
      FORCE=#{ENV['FORCE']}       \
      bash my_script.sh)
end 
```

示例用法：

```
TRACE=1 VERBOSE=1 vagrant up 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-07T10:23:38.147

为了添加显式参数，我成功地使用了这个：

```
config.vm.provision "shell", path: "provision.sh", :args => "--arg1 somearg --arg2 anotherarg" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-16T00:47:29.213

[根据我在旧版本的文档页面](http://docs-v1.vagrantup.com/v1/docs/provisioners/shell.html)中找到的一些信息回答我自己的问题：

```
config.vm.provision :shell, :path => "bootstrap.sh", :args => "'abc'" 
```

-- @user1391445

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-11T09:26:22.777

在新版本中您可以使用数组：

`config.vm.provision :shell, :path => "bootstrap.sh", :args:["first", "second"]`

# cakephp - 翻译网址 cakephp

> ID：15461902
> 
> 赞同：1
> 
> 时间：2013-03-17T14:32:55.470
> 
> 标签：cakephp, localization, internationalization

我正在 CakePHP 中创建一个页面，我正在尝试翻译 url。我想要的是翻译控制器名称所以说我有这个 url`domain/da/product`然后它应该把它翻译成丹麦语所以它变成了`domain/da/produkt`。

我在 AppHelper 中编写了自己的 url 方法，但在访问模型进行翻译时遇到问题。当我从助手搜索访问模型时，人们反对这样做。

那么什么是正确的方法来做到这一点。当用户使用链接时，我需要查找我将其翻译回的位置`domain/da/product`。

这是 Apphelper 代码

```
App::uses('Helper', 'View');
App::import("Model", "ControllerTranslation");

class AppHelper extends Helper {

public function url($url = null, $full = false) {

      $Model = new ControllerTranslation();           
      $lang = Configure::read('Config.language');
      $controller = $Model->find("first",array("conditions"=> array("ControllerTranslation.translation = "=> $url['controller'],"ControllerTranslation.language" => $lang)));
      if (count($controller))
      {
            $url['controller'] = $controller["ControllerTranslation"]["translation"];
      }        
    return parent::url($url, $full);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:48:22.417

如果您想要具有 translation = $url['controller'] 和 language = $lang 的 url，那么您应该使用语法：

```
$controller = $Model->find("first",
  array("conditions"=>   
    array(
           "ControllerTranslation.translation" => $url['controller'],                 
           "ControllerTranslation.language" => $lang
         )
       )
  ); 
```

# javascript - 要存储在 cookie 中的 javascript 函数值

> ID：15461903
> 
> 赞同：0
> 
> 时间：2013-03-17T14:32:58.450
> 
> 标签：javascript, html

```
<script type="text/javascript">
function changeStyle(title) {
var lnks = document.getElementsByTagName('link');
for (var i = lnks.length - 1; i >= 0; i--) {
if (lnks[i].getAttribute('rel').indexOf('style')> -1 && lnks[i].getAttribute('title')) {
lnks[i].disabled = true;
if (lnks[i].getAttribute('title') == title) lnks[i].disabled = false;
}}}
function getActiveStyleSheet() {
var i, a;
 for(i=0; (a = document.getElementsByTagName("link")); i++) {
  if(a.getAttribute("rel").indexOf("style") != -1
  && a.getAttribute("title")
  && !a.disabled) return a.getAttribute("title");
  }
  return null;
} 
</script> 
```

我有上面的代码，我需要有关如何使用 getActiveStyleSheet 函数来存储在 cookie 或 html5 localstorage 中的帮助，我可以在每个窗口中调用它来显示用户的样式偏好。如果有人能提供帮助，我真的不知道我将如何实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:03:49.373

您可以像这样在 localStorage 中设置一些数据：

`localStorage.setItem(key, value)`

如果要将`getActiveStyleSheet`调用结果存储在 localStorage 中，可以这样做：

```
// set the active stylesheet in localstorage
localStorage.setItem('activeStylesheet', getActiveStyleSheet())

// retrieve the data from localStorage
localStorage.getItem('activeStylesheet') 
```

你可以用 cookie 做类似的事情。以下是有关如何编写 cookie 的一些文档：[https ://developer.mozilla.org/en-US/docs/DOM/document.cookie#Writing_a_cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie#Writing_a_cookie)

还有一些关于 localStorage 的进一步阅读：[https ://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)

# java - 从 JSP 读取 CSV 文件

> ID：15461908
> 
> 赞同：0
> 
> 时间：2013-03-17T14:33:47.513
> 
> 标签：java, javascript, mysql, jsp, csv

我编写了一个小型登录 java 程序，它使用 servlet 和 JSP 使用 MVC 模式允许我注册和登录帐户（如果我们可以调用它们）到我的本地 mySQL 数据库。我正在使用会话在 servlet 和 JSP 之间传递值，并且我有一个关于 servlet 的 if 语句列表，这些语句用作无效输入的验证。现在，当我的应用程序执行时，会发生这种情况：

*   Sign_Up.jsp 打开并显示用户名和密码字段，下方有一个提交按钮。它还在左上角显示了一个指向 Log_In.jsp 的链接。如果您输入符合要求的用户名和密码，则会在数据库中创建一个帐户，并将您重定向到只显示几行文本的 Welcome.JSP。（我没有检查天气输入的密码和用户名是唯一的atm，因此数据库的用户表中有重复条目）

*   如果单击 Sign_UP.jsp 顶部的链接，您将被重定向到 Log_In.jsp。在这里您需要输入您的凭据，如果它们存在于数据库中，您将被重定向到 Welcome.jsp，否则您会被告知它们是无效的并且您需要再次输入它们。

----------------------这就是我现在想做的事------ --------------------------------

验证帐户并将其重定向到 Welcome.jsp 后，我希望该页面显示一个“选择文件”按钮，单击该按钮后，您可以浏览计算机中的文件。从那里我应该能够选择一个可以解析并输入数据库的 .csv 文件。也许 .csv 将包含一些简单的东西：

```
Username , Password

UserTest1, 123
UserTest2, 234
UserTest3, 567
UserTest4, 890 
```

所以这些是我关于整个过程的问题：

*   是否可以在 JSP 中使用 JS 来完成我的任务？
*   在 JSP 中使用 JS 来做这件事是个好主意吗？
*   如果我要构建一个更复杂的网站，是否建议在 JSP 中使用 html、css 和 jQuery 代码构建它？

整个想法是建立一个网站，只允许管理员输入一个包含物品价格列表的 .csv 文件，该文件将被网站抓取并上传到数据库中，作为回报，它将显示新的物品库存对于某个产品。我知道我还远未完成，但这只是一个开始。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:43:28.697

1.  您不需要 JavaScript 来上传文件
2.  我看不出它会有什么帮助。只需使用文件类型的输入
3.  您当然可以使用 JavaScript，无论您在服务器端使用什么来生成 HTML 页面。但是，在 HTML 页面中嵌入 JavaScript 代码是一种不好的做法。您应该尽量将 JS 代码外部化为 .js 文件。

关于您问题的标题和正文的一些注释：

*   读取 CSV 文件是控制器的工作，而不是视图的工作
*   使用会话将对象从 servlet 控制器传递到视图不是您应该做的。您应该使用请求来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:40:08.500

You can't read files with JS because it doesn't have permission to access the filesystem.

You will have to upload the file into the server and get the parsing done from there.

There are tons of examples for JSP file uploading in the net.

Most complex websites employ the technologies/libraries you have listed so the answer is yes use them and it will increase usability and look and feel.

# algorithm - 同一算法的不同上界和下界

> ID：15461910
> 
> 赞同：0
> 
> 时间：2013-03-17T14:33:55.830
> 
> 标签：algorithm, analysis, asymptotic-complexity

所以我刚开始学习算法的渐近界
问题：如果我们发现算法的下界和上界不同，关于函数的θ我们能说什么？（比如 omega(n) 和 O(n^2)）。或者更确切地说，对于这种算法的紧密性，我们能说些什么？

我读的书说 Theta 是函数的相同上限和下限。在这种情况下呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:51:03.443

在那种情况下，我认为你不能说什么。

的定义`Θ(f(n))`是：

> 一个函数是`Θ(f(n))`当且仅当它是`Ω(f(n))`and `O(f(n))`。

对于某些表现出这些行为的病理功能，例如在`n`和之间振荡`n^2`，它不会被定义。

例子：

```
f(x) = n if n is odd
       n^2 if n is even 
```

您的界限`Ω(n)`会`O(n^2)`很严格，但`Θ(f(n))`没有为任何功能定义。

另请参阅：[Θ(n) 和 O(n) 有什么区别？](https://stackoverflow.com/questions/471199/what-is-the-difference-between-n-and-on)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:16:17.413

只是为了一点实用性，一种不`Θ(f(n))`适用的算法是`f(n)`插入排序。它运行是`Ω(n)`因为对于已经排序的列表，您在每个步骤中只需要一个插入操作，但它在`O(n^2)`一般情况下运行。构造振荡或不连续的函数通常用于教学目的，但根据我的经验，这种函数很少出现在实际算法中，如果有的话。

关于紧密度，我只听说过在这种情况下参考为算法提出的上限和下限。再次关于插入排序的示例，从某种意义上说，给定的界限是严格的，即存在实际上可以在时间上线性地完成的问题实例（下限）和其他不会执行的问题实例时间小于其大小的二次方。有效但对插入排序不严格的边界是`Ω(1)`因为您无法在恒定时间内对任意大小的列表进行`O(n^3)`排序，并且因为您始终可以`n`在严格的时间内对元素列表进行排序`O(n^2)`，这要少一个数量级，所以你当然可以做到`O(n^3)`. bounds 的目的是让我们大致了解我们可以预期算法的性能，以便我们了解我们的解决方案的效率；紧边界是最可取的，因为它们都给我们提供了粗略的想法，并且从某种意义上说，这种想法是最优的，因为在极端情况下（有时也是一般情况），我们实际上需要边界允许的所有复杂性。

平均案例复杂度没有限制；它“仅”描述了算法“在大多数情况下”的效率；以[快速排序](http://en.wikipedia.org/wiki/Quicksort#Average-case_analysis_using_discrete_probability)为例，它的最佳情况复杂度为`Ω(n)`，最坏情况复杂度为`O(n^2)`，平均情况复杂度为`O(n log n)`。这告诉我们，对于几乎所有情况，快速排序与一般情况下的排序一样快（即平均情况复杂度），而在某些情况下它解决的问题比这更快（最佳情况复杂度 -> 下限）和还有一些需要快速排序才能解决的问题的实例（最坏情况复杂性 -> 上限）。

# c++ - 如何创建正确的makefile

> ID：15461915
> 
> 赞同：1
> 
> 时间：2013-03-17T14:34:09.983
> 
> 标签：c++, makefile

我的makefile有问题。我的项目树如下所示：

*   生成文件/生成文件
*   来源/ main.cpp
*   包括/first.hpp，

我有以下makefile：

```
program.o: main.o

      g++ -o program main.o

main.o: /home/project/source/main.cpp, /home/project/include/first.hpp

      g++ -c /home/project/source/main.cpp /home/project/include/first.hpp 
```

我如何创建没有路径的makefile？我的意思是这样的：

```
program.o: main.o

       g++ -o program main.o

main.o: main.cpp, first.hpp

     g++ -c main.cpp first.hpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:07:46.367

[Make 教程：如何编写 Makefile](https://sites.google.com/site/michaelsafyan/software-engineering/how-to-write-a-makefile)

这是我编写的一个[通用makefile ，它处理依赖项生成。](http://pastebin.com/PCk0gNtE)它适用于 C，但可以轻松转换为 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:04:14.453

Make 非常聪明，并且已经有许多内置规则。 [了解](http://www.gnu.org/software/make/manual/make.html)这些规则和预定义的宏，如 CXX、CFLAGS、LDFLAGS 等。以下是构建程序的最简单 Makefile：

```
program: main.o
    $(CXX) $(LDFLAGS) -o $@ $<
main.o: main.cpp first.hpp 
```

# ios - beginBackgroundTaskWithExpirationHandler 不会过期

> ID：15461924
> 
> 赞同：1
> 
> 时间：2013-03-17T14:35:04.537
> 
> 标签：ios, objective-c, ipad, ios5

在连接时，我在用户连接结束时添加了这段代码：

```
 UIBackgroundTaskIdentifier myLongTask;
    myLongTask = [[UIApplication sharedApplication]
                  beginBackgroundTaskWithExpirationHandler:^{
                      //   If you're worried about exceeding 10 minutes, handle it here
                  }];

    CFRunLoopRun();
    [[UIApplication sharedApplication] endBackgroundTask:myLongTask]; 
```

我还在构建设置中设置，应用程序需要wifi。这是一个使用套接字的基本客户端。

在我锁定 iPad 之前，互联网就死了。现在我希望它在 iPad 锁定后还能保持 10 分钟，但由于某种原因，它只能无限期地保持至今。在我锁定手机并回来解锁并且我的连接仍在流式聊天后，我测量了互联网已超过 30 分钟。

我担心这可能不是应用商店接受的合法应用行为，尽管我没有设置任何我读到的关于这是一个 VOIP 应用的特殊设置。我刚刚使用了 beginBackgroundTaskWithExpirationHandler，并且应用程序需要互联网。如果确实应用程序从未真正休眠，我还担心长期电池影响，尽管我连接的服务器会在空闲 60 分钟时断开您的连接，因此它不会无限期保持连接，但如果这个循环总是存在，它仍然是一个问题即使在断开连接后也可以运行，它可以使用电池。例如，如果用户离开应用程序并且超过一周没有回来并且 iPad 刚刚锁定一周会使用加速电池怎么办？我的测试没有

有什么建议么？有人知道为什么应用程序在屏幕锁定 10 分钟后不会休眠吗？

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:37:41.093

操作系统可能会杀死您，也可能不会。10 分钟更像是一个“指导方针”，但操作系统可能会提前或推迟杀死你。

但 CFRunloopRun 几乎会无限运行（只要任何源连接或停止）。确保它结束，否则你永远不会结束 bg 任务。

不禁止但不酷！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:05:27.580

这是设置后台任务请求的一种非常奇怪的方式。`CFRunLoopRun()`以这种方式手动调用也是不寻常的。您在主循环上执行此操作的事实表明您没有使用标准`UIApplicationMain()`函数。如果没有，那么您可能没有正确设置应用程序，并且行为可能不稳定。您是否尝试过以正常方式使用后台任务：

*   `beginBackgroundTaskWithExpirationHandler:`
*   即使程序进入后台，也可以执行您想要运行的特定任务
*   `endBackgroundTask:`当该任务完成时

你这样做的方式，`endBackgroundTask:`可能永远不会被调用。

* * *

编辑：如果您的目标是在进入后台后允许您运行，只要操作系统愿意让您运行（大约 10 分钟），然后调用`beginBackgroundTaskWithExpirationHandler:`. `applicationWillEnterBackground:`您不需要对运行循环进行任何特殊使用。您只需要告诉操作系统您希望继续运行，直到它阻止您。

# python - 我不明白为什么我在 Python 中得到“x 未定义”

> ID：15461926
> 
> 赞同：0
> 
> 时间：2013-03-17T14:35:10.903
> 
> 标签：python, python-2.7

我刚开始用 Python 编程，我得到*x 没有定义*，但我不知道为什么它说考虑到我认为它是定义的。

```
def menu():
    x = 0
    while x != 1 or 2:
        print "menu"
        print "1)login"
        print "2)under dev"
        x = raw_input('select menu option')
        if x == 1 or 2:
            break
menu()
if x=='1':
    print "enter username:"
y = raw_input()
if y=="username":
    print "enter password:"
z = raw_input()
if z=="password":
    print "password accepted"
elif x=='2':
    print "under development"
elif y or z == False:
    print "username or password incorrect" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T14:38:30.270

`x` is a *local* variable in the `menu()` function, it doesn't exist outside of `menu()`.

You could return it from `menu()` then store the value in a new `x` in your code:

```
def menu():
    x = None
    while x not in ('1', '2'):
        print "menu"
        print "1)login"
        print "2)under dev"
        x = raw_input('select menu option')
    return x

x = menu() 
```

Note that I fixed several problems with your code in `menu()` as well.

*   `raw_input()` returns a string, but you test if `x` is integer 1 or 2 instead. I changed the code to test for the strings `'1'` and `'2'` instead.

*   Don't use `x != 1 or 2`, that does *not* mean what you think it means. It tests if `x != 1` is True, and if not, it tests if `2` is True. `2` is *always* `True` because all non-zero numbers are considered True in a boolean context.

    I replaced that with a `x not in ('1', '2')` test.

*   There is no need to test `x` inside the loop again and execute a `break`; the `while` loop will just exit on its own without that test.

*   It doesn't really matter what `x` is set to at the start of `menu()`, as long as it is not `'1'` or `'2'`. `None` is a good choice to signal that it is 'empty'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:37:55.440

The variable `x` is defined in the `menu` function. It is this a local variable, and only accessible from the body of the function. This answer has good explanation of [Python scoping rules](https://stackoverflow.com/a/292502/5353).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:27:25.927

如果您仍然对使用全局变量和局部变量感到困惑，请查看[此网站](http://www.python-course.eu/global_vs_local_variables.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:35:12.630

您的问题是由于[此处](https://stackoverflow.com/a/292502/1931274)（及以下）
所述的 Python 范围： LEGB 规则。

*   **当地**的。
    在函数中以任何方式分配的名称，而不是在该函数中声明为全局的。
*   **封闭**函数局部变量。在任何和所有封闭函数（或）
    的本地范围内命名，从内到外。`def``lambda`
*   **全局**（模块）。
    在模块文件的顶层分配的名称，或在文件内的 def 中声明的全局名称。
*   **内置**（Python）。
    内置名称模块中预先分配的名称：`open, range, SyntaxError`等

因此，您的变量`x`是**本地**`main()`变量。因此，要将变量移出**局部**范围，您也可以将全局变量移出局部范围。

您的代码似乎有各种逻辑错误（和一些错误`NameError`）。我试图理解并已将您的代码更改/改革为可行的方法。

```
def menu():
    global x
    while x not in ('1','2'): # 1
        print "   Menu"
        print "1) Login"
        print "2) Under dev"
        x = raw_input('Select menu option: ') # 2
        if x in ('1','2'): # 1
            break
x = ''
menu()
# 3
if x == '1':
    y = raw_input("enter username: ") # 2
    z = raw_input("enter password: ") # 2
    if y != 'username' or z != 'password': # 4
        print "username or password incorrect"
    else: # 5
        print 'You will be logged in'
elif x == '2':
    print "Under development" 
```

除了语法上的变化，让我们看看逻辑部分的变化。（评论中的数字指的是详细说明变化的地方。）

1.  `raw_input`返回一个字符串。所以，它永远不会是`1`或`2`（整数）。
    此外，`x != 1 or 2`将评估为，`True`因为它等同于 Python，`(x != 1) or (2)`并且在 Python 中`2`始终具有一个`True`值。
2.  `raw_input`将提示作为参数，在获取输入之前显示
3.  简而言之，您的 ifs 和 elifs 的结构不正确。
4.  `y or z == False`被评估为`(y) or (z = False)`And `z`is never `False`，因为它是一个字符串。
    所以，如果`y`is not `''`，那么 this 被评估为 True，但这不像你想要的东西（看起来）..
5.  如果 if（和所有elifs `else`）条件是`False`.
    在这里，我们给出了正在开发的消息。

[更多即将到来]

# javascript - 使用 javascript 将 HTML 代码添加到 div

> ID：15461929
> 
> 赞同：0
> 
> 时间：2013-03-17T14:35:28.047
> 
> 标签：javascript, html

我有一个 div：

```
<div id="bottom">
</div> 
```

现在我想在那里创建表，将 Js 数组中的东西放在哪里。我试过这个：

```
document.getElementById('bottom').innerHTML("Text"); 
```

但它不起作用：/

> 未捕获的类型错误：对象# 的属性“innerHTML”不是函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:37:03.710

`innerHTML` is a property and no method. Use it like this:

```
document.getElementById('bottom').innerHTML = "Text"; 
```

More [information at MDN](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:38:27.410

I believe you don't need any methods as innerHTML is a property and u can use it as below

```
document.getElementById('bottom').innerHTML = "Text"; 
```

happy coding :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:39:16.660

You have this error becouse of `innerHTML` should be assigned to `htmlString`. Something like this:

```
document.getElementById('bottom').innerHTML = '<table><tr><td>Text</td></tr></table>'; 
```

# class - 类作为参数

> ID：15461931
> 
> 赞同：0
> 
> 时间：2013-03-17T14:35:50.183
> 
> 标签：class, mono, gtk, monodevelop, gtk#

我目前正在尝试实现一个记录器。

```
public class Logfile
{
    public static Logfile getLogfile(class _classTogetLoggerFor)
    {

    }
} 
```

主要思想是，每个类都有自己的记录器，可以单独设置日志级别等选项。但是上面的代码不起作用，那么如何在 Mono (c#) 中将 Class 设置为参数。

感谢您的帮助 ;）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:46:37.207

您可以使用`Type`：

```
public static Logfile getLogfile(Type _typeToGetLoggerFor) 
```

进而：

```
var logger = Logfile.getLogfile(typeof(SomeClass)); // or just call GetType() 
```

# git - 如果有人知道我的 Github 用户名和电子邮件，他们可以提交或推送我的项目文件吗？

> ID：15461933
> 
> 赞同：3
> 
> 时间：2013-03-17T14:35:56.517
> 
> 标签：git, github, git-svn

我是 Git 新手。我打开了 Github 帐户，创建了一个公共存储库，并设置了用户名和电子邮件，如 Github 的教程所示。因此，如果有人知道我的用户名和电子邮件，他们可以提交或推送我的公共存储库中的文件吗？如何保护文件？SVN 具有用于提交文件的用户名密码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T15:02:44.523

不，如果您执行以下几件事之一，则有人只能提交到您的存储库：

*   给他们你的 ssh 密钥或 GitHub 密码。这是一个非常糟糕的主意，***永远不***应该这样做。
*   将他们的 ssh 公钥添加到您的 GitHub 帐户。这将允许他们推送到您的任何 GitHub 存储库，直到您删除该密钥。比以前更好的选择，但仍然需要仔细考虑后才能做。
*   将该人的 GitHub 帐户添加为您的存储库的协作者。这将是允许其他人将更改推送到您的存储库的推荐方式。

但是，对于任何公共存储库，任何人都可以在 Web 界面中查看文件或克隆存储库。此外，任何 GitHub 帐户都可以分叉存储库并发送拉取请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:17:45.227

您所做的设置是让 github 将您的提交识别为您的。但是为了将提交实际推送到您的存储库，此人将需要访问您的 github 密码或访问您的 ssh 私钥。

没有这些，没有人可以推送到您的存储库。

这也意味着，任何人都可以使用您的电子邮件和用户名提交并推送到他们有权访问的存储库。你也可以这样做。

# javascript - 排序表视图钛机器人

> ID：15461935
> 
> 赞同：0
> 
> 时间：2013-03-17T14:36:05.483
> 
> 标签：javascript, android, sorting, titanium, tableview

我正在尝试在将 json 提要插入表格视图之前对其进行排序。我有一个在 iOS 上运行良好的方法，但是当我尝试在 android 上实现相同的代码时，它只会排序一次。

我需要为应用程序对数据进行至少两次排序。

```
Ti.App.addEventListener('get.stands', function(d) {

        jsonArray = JSON.parse(d.responseText);

        var hockey = jsonArray;

        //alert('Hockey Standings');
        //Ti.API.info('My data is..' + hockey);

        function sortBy(prop) {
            return function(a, b) {
                if (a[prop] > b[prop]) {
                    return -1;
                } else if (a[prop] < b[prop]) {
                    return 1;
                }
                return 0;
            }
            //hockey.sort(sortBy('conference'));
            //hockey.sort(sortBy('points'));
        }

        var data = [];

        hockey.sort(sortBy('points'));
        hockey.sort(sortBy('division'));
        hockey.sort(sortBy('conterence'));
        //myPoints.sort(function(a,b){return a - b;});
        var addRow = function(obj) {
            var teamPoint = parseInt(obj.points);
            var row = Ti.UI.createTableViewRow({
                backgroundColor : '#fff',
                //hasChild : true,
                height : '50dp',
                width : Ti.UI.SIZE
            });

            var myTeam = Ti.UI.createLabel({
                color : '#000',
                font : {
                    fontSize : 16,
                    fontWeight : 'bold'
                },
                height : Ti.UI.SIZE,
                highlightedColor : '#fff',
                left : '55dp',
                top : '0dp',
                text : obj.team,
                width : Ti.UI.SIZE
            });

            var teamPoints = Ti.UI.createLabel({
                color : '#666',
                font : {
                    fontSize : 14
                },
                height : Ti.UI.SIZE,
                highlightedColor : '#ddd',
                left : '55dp',
                top : '20dp',
                text : 'Points: ' + teamPoint.toFixed(0),
                //top: 5,
                width : Ti.UI.SIZE
            });

            var teamImage = Ti.UI.createImageView({
                    image : 'http://www.corliosity.com/json/' + obj.img,
                    left : '0dp',
                    top : '0dp',
                    height: 50,
                    width: 50
            });
                if (obj.conference)
                {
                    row.add(myTeam);
                }
                if (obj.team)
                {
                    row.add(myTeam);
                    row.add(teamPoints);
                    row.add(teamImage); 
                }
            return row;
        };
        var intItem = 0, intItems = hockey.length, strLastDivision = '', row;

        for ( intItem = 0; intItem < intItems; intItem = intItem + 1) {
            var bgcolor = (intItem % 2) ? '#fff' : "#ccc";

            row = addRow(hockey[intItem]);
            if (strLastDivision !== hockey[intItem].division) {
                strLastDivision = hockey[intItem].division;
                row.header = hockey[intItem].division;
            }

            data.push(row);
            row.setBackgroundColor(bgcolor);
        };

        var tbl = Ti.UI.createTableView({
            data : data,
            height : Ti.UI.FILL,
            //minRowHeight: 80,
            //search: search,
            //style : Ti.UI.iPhone.TableViewStyle.GROUPED,
            width : Ti.UI.FILL
        });

        win.add(tbl);

    }); 
```

JSON 代码将如下所示

```
[{"team":"team1", "points":"18", "division":"west","conference":"west"}, {"team":"team2","points":"23","division":"south","conference":"east"}] 
```

提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:22:51.143

```
[{"team":"team1", "points":"18", "division":"west","conference":"west"}, {"team":"team2","points":"23","division":"south","conference":"east"}] 
```

如果这是真正的 JSON 响应，那么您的数字似乎是作为字符串传递的。如果这是正确的，您应该确保比较数字（我不太熟悉 Titanium for Android 的 JS 翻译，也许 Titanium 正在尝试比较字符串。JS 行为有时在 iOS 和 Android 上有所不同）。请参阅`parseInt`或`parseFloat`功能。[下面是一些例子](http://www.javascripter.net/faq/convert2.htm)。

```
function sortBy(prop) {
    return function(a, b) {
        if (parseInt(a[prop]) > parseInt(b[prop])) {
            return -1;
        } else if (parseInt(a[prop]) < parseInt(b[prop])) {
            return 1;
        }
        return 0;
    }
} 
```

# c++ - 在 O(n) 搜索中使用 i+1 是否安全？

> ID：15461937
> 
> 赞同：0
> 
> 时间：2013-03-17T14:36:16.163
> 
> 标签：c++, c

我问自己是否可以安全地`i+1`检查下一个数字是否与当前数字相同......示例：

```
int search(int el, int* a, int n) {

if(a == NULL && n<0)
{
    return NULL;
}

for(int i=0; i<n; i++)
{
    if((a[i] == el )&& (a[i+1] != el)) // here I check next element
    {
        return i; // if I find it, return a position.
    }
}

return -1; // else return -1
} 
```

如果我们有一个长度为的数组`4`，那么`a[i+1]`将传递一个数组长度，但程序仍然可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:38:16.473

No, accessing elements out of bounds is **Undefined Behavior**.

Your program may "seem" to work, but you cannot expect anything out of it. It could work on your machine, and crash on another one. Or it could work on all machines *now*, but not tomorrow. You should check if the index is out-of-bounds before using the subscript operator.

You may consider changing your cycle so that it never accesses out-of-bounds elements:

```
for (int i = 0; i < n - 1; i++)
//                  ^^^^^ 
```

Then, you would have to take care of the last element in the array separately, as a special case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:39:26.273

That's not correct, when `i` reaches its last value (`n-1`) you check the value of a nonexistent element (the C standard allows you to have a pointer to one-after-last element, but not to dereference it).

You can fix your code like this:

```
 if((a[i] == el ) && ((i == n-1) || (a[i+1] != el))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:40:16.697

If `n` is the last element in the array, then `i + 1` is safe in this case. If `n` is the number of elements in the array, `i + 1` may appear to work most of the time, but it is *not* safe.

In that case, you're accessing an element outside the bounds of the array, which may do anything from giving you incorrect results to crashing your program. Most of the time it will appear to work, though, making the problem very hard to debug when it happens.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:46:57.307

我不清楚你在问什么。即使数组访问成本高昂，访问两者`a[i]`并`a[i+1]`保持 O(N) 复杂度。您*不能*做的是添加基于的复杂性`i`（例如从 0 到 的附加循环`i`），或修改`i`（例如根据某些条件递减它）。

正如其他人已经指出的那样，问题在于最后一个元素与一个不存在的数据进行比较：要么你会得到一个错误和可能的崩溃，要么程序*看起来*正在运行——实际上*大部分*时间都在运行- 直到那个未知且可能是随机的最后一个项目将触发比较并产生意外结果的时间。

您应该检查数组大小是否至少为 1（无论如何这应该是一种特殊情况，不能对单个元素运行比较！），然后只循环到`n-1`. 或者您可以将先前的值保存在临时变量中；根据平台的不同，这将是一个（可能快得多的）寄存器，或者是一个（可能慢得多的）堆栈位置。在大多数情况下，我只是陈述我与下一个元素进行比较的意图，就像您所做的那样，然后让编译器对其进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T15:10:09.757

不。

```
int main(void)
{
    char pumpkin[8];
    int a[4];
    int i, p;

    a[0] = 3760;
    a[1] = 100001;
    a[2] = 595959;
    a[3] = 1886221680;

    pumpkin[0] = 'p';
    pumpkin[1] = 'u';
    pumpkin[2] = 'm';
    pumpkin[3] = 'p';

    for (i = 0; i < 4; i++) {
        p = search(a[i], a, 4);

        if (p >= 0)
            printf("Found it at position %d: %d.\n", p, a[i]);
        else
            printf("Value not found.\n");
    }

    return 0;
} 
```

在我的机器上：

```
$ gcc -std=c11 -o boundserror boundserror.c
$ ./boundserror 
Found it at position 0: 3760.
Found it at position 1: 100001.
Found it at position 2: 595959.
Value not found. 
```

发生了什么 ？编译器将值 1886221680 写入 a[3] 和 a[4] 如果存在的话。关于在您的机器上运行的程序：阅读关于我的机器概念上的作品。

[http://www.codinghorror.com/blog/2007/03/the-works-on-my-machine-certification-program.html](http://www.codinghorror.com/blog/2007/03/the-works-on-my-machine-certification-program.html)

# sql - 雇用的总功能计算时间

> ID：15461941
> 
> 赞同：1
> 
> 时间：2013-03-17T14:36:40.613
> 
> 标签：sql, join, oracle11g, aggregate-functions

我正在使用 HR 表模式，其中有一个练习说明：

对于`job_history`多次雇用的员工，可以包含多个条目。创建一个查询以检索多次雇用的员工列表。包括列`EMPLOYEE_ID`、`LAST_NAME`和`FIRST_NAME`聚合`"Times Hired"`。

到目前为止我所做的是：

```
select e.employee_id, e.last_name, e.first_name,
       count (start_date) as Times_Hired
from job_history jH, employees e
WHERE e.employee_id=jH.employee_id
group by e.employee_id, e.last_name, e.first_name; 
```

现在，我的问题是：

*   整个事情应该是一个子查询吗？
*   哪些列连接表`job_history`和`employees`？

因为当我运行它时，它只显示几个员工。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:54:28.883

您可以（并且应该）使用显式 ANSI JOIN 语法重写查询以使其清晰：

```
SELECT **employee_id**, e.last_name, e.first_name,
       count (*) AS Times_Hired
FROM   employees   e 
JOIN   job_history j **USING (employee_id)**
GROUP  BY **employee_id**, e.last_name, e.first_name
HAVING count (*) > 1;
```

~~我还使用 a`LEFT [OUTER] JOIN`在结果中包含`job_history`（还）没有任何行的员工。~~
这无关紧要，因为您只对员工感兴趣..

> 比被雇用不止一次

我用`HAVING count (*) > 1`.

至于你的第二个问题：显然，`employee_id`是 ..

> 连接表`job_history`和`employees`？

由于我们在 () 上加入的列名`employee_id`在两个表中都是相同的，因此我将其简化为[与`USING`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10002.htm#CHDIJFDJ).

而且我使用`count(*)`而不是`count (start_date)`，因为它尚未声明是否`start_date`可以`NULL`，在这种情况下它不会添加到计数中。

至于您的第一个问题：不，您在这里不需要子查询。

### 替代`JOIN`语法`ON`

```
SELECT **e.**employee_id, e.last_name, e.first_name,
       count (*) AS Times_Hired
FROM   employees   e 
JOIN   job_history j **ON j.employee_id = e.employee_id**
GROUP  BY **e.**employee_id, e.last_name, e.first_name
HAVING count (*) > 1;
```

在[**SQLfiddle**](http://sqlfiddle.com/#!4/d5553c/1)中进行了测试。

# sass - SASS 中是否有“this”功能？

> ID：15461942
> 
> 赞同：1
> 
> 时间：2013-03-17T14:36:49.517
> 
> 标签：sass

我正在SASS（准确地说是scss）中构建一个网格混合，只是想知道是否有类似@this 的东西可用。@this 将引用正在设置样式的元素。

像这样：

```
@mixin grid(args n stuff) {
    float: left;
    & + @this {
        float; right;
    }
}

div.grid {
    @include grid;
} 
```

这将产生：

```
div.grid {
    float: left;
}

div.grid + div.grid {
    float: right;
} 
```

如果这是可能的，那就太棒了。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:29:36.513

那将是`&`：

```
@mixin grid() {
    float: left;
    & + & {
        float: right;
    }
}

div.grid {
    @include grid;
} 
```

输出：

```
div.grid {
  float: left;
}

div.grid + div.grid {
  float: right;
} 
```

# php - 在嵌套的div中递归输出一个php数组？

> ID：15461945
> 
> 赞同：0
> 
> 时间：2013-03-17T14:37:00.010
> 
> 标签：php, arrays

我有一个具有如下数据结构的数组

```
$array = array(
   'someKey' => array(
       'id' => 1,
       'string' => 'some key',
       'someKey2' => array(
            'id' => 1,
            'string' => 'some key two',
            'someKeyThree' => array(
                 'id' => 1,
                 'string' => 'some key three',
            ,
       ),
   ),
   'someOtherKey' => array(

   ),
); 
```

我想做的是将每个数组作为嵌套`div p`结构，

```
<div>
    <p>someKey</p> // key of first array value
    <div>
          <p>someKey2</p>
          <div>
                 <p>SomeKeyThree</p>
          </div>
    </div>
</div> 
```

我试过使用`new RecursiveIteratorIterator(new RecursiveArrayIterator($this->getData(), RecursiveIteratorIterator::CHILD_FIRST));`

并使用它，但我在结束标签时遇到了麻烦，因为`div`永远不会正确。同样，一旦`iterator`到达没有数组进入的数组底部，我希望它完全停止迭代。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:52:18.493

您必须递归调用函数。

```
function printUl($arr){
$output = "<ul>";
foreach ($arr as $key => $val){
  if (is_array($val)){
    $output .= printUl($val);
    continue;
  }
  else{
  $output .= "<li>".$val."</li>"

  }
$output .= "</ul>";
return $output;
}
} 
```

# c# - 如何在asp.net中实现动态url重写

> ID：15461950
> 
> 赞同：-2
> 
> 时间：2013-03-17T14:37:31.940
> 
> 标签：c#, asp.net, url, url-rewriting

我正在使用 VS 2010。**我创建了一个网站**，我想在其中进行 url 重写。

我有我的所有文件，即管理员和用户文件夹中的 aspx 文件。

在我的应用程序中，管理员创建用户，然后如果用户`www.domian.com\[username]\`在地址栏中键入，那么这应该会导致我的应用程序中的用户文件夹

我想要这种类型的 url 重写。

```
www.domain.com\\[Dynamic user]\login.aspx 
```

请建议我这是否可以实现。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:10:26.110

查看这些文章，了解如何使用 UrlRoutingModule：

*   [http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)
*   [http://www.codeproject.com/Articles/77199/URL-Routing-with-ASP-NET-4-0](http://www.codeproject.com/Articles/77199/URL-Routing-with-ASP-NET-4-0)

您可以使用命名空间中定义的内置路由来使用控制器[`System.Web.Routing`](http://msdn.microsoft.com/en-us/library/cc490435.aspx)，也可以构建自己的`IRouteHandler : IHttpHandler`实现类。

基本上，它们也被定义的第一个地方是处理事件`Global.asax`的派生`System.Web.HttpApplication`类。`Application_Start`

```
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    RouteTable.Routes.MapPageRoute("routeName",
    "{controller}/{action}", "~/Store/View.aspx");
} 
```

因为`IRouteHandler`是 wrapping `IHttpHandler.ProcessRequest`，所以路由发生在`Application_BeginRequest`事件之后。

如果你不想使用`System.Web.Routing`命名空间，使用`UrlRoutingModule`and `IRouteHandler`，你只有`IHttpHandler`s like `StaticFileHandler`or `System.Web.Page`(ASP.NET WebForm 'aspx' IHttpHandler)。

至少您可以创建一个简单的 ASP.NET WebHandler`.ashx`文件（最简单的 IHttpHandler）。

所以你说实施...

值得注意的是，旧 .NET 框架和 IIS < 7 上的 ASP.NET*无法重写任何内容*。阅读“IIS ASP.NET 集成管道”。

也许您的问题的最佳答案可能是“不具建设性”、“重复”或简单地说*使用搜索*，*谷歌*并说“asp.net url routing stackoverflow”。

# actionscript-3 - Dynamic text field in Frames not changing text in actionscript 3

> ID：15461954
> 
> 赞同：0
> 
> 时间：2013-03-17T14:37:53.870
> 
> 标签：actionscript-3, flash, adobe

Dynamic Text field not updating in actionscript when in 2nd Frame

I am having a movie clip with two frames. In 2nd frame there is a movie clip which has a text field. My goal is to on some event I will move to the frame that has the movie clip with text field.

I am trying to update the text field with a code something like:-

```
public function updateTxtFld(e:Event)
{
    //My goal is to on some event show the movie clip with the text field 
    questBG.gotoAndStop("glow");
    arrowText.text = "some text"; //arrowTextt has been assigned with the correct text field
} 
```

After some time I again move back to the frame which has no movie clip thus hiding the movie clip

```
public function hide()
{

    questBG.gotoAndStop("idle");
} 
```

The text field does not get updated from the actionscript even though trace(arrowText.text) shows the updated value.

Now if I remove frames from the movie clip & modify the updateTxtFld() like

```
public function updateTxtFld(e:Event)
{
    (questBG.getChildByName('arrowBG') as Sprite).visible = true;
    arrowText.text = "some text"; //arrowTextt has been assigned with the correct text field
} 
```

Then it works fine with the text getting updated in the text field. It seems there seems to be some problem in updating dynamic text field in frames. I have also verified that text embedding is fine in both the cases

I have created the flas using CS Professional 5.5 & I am trying to change the text field using actionscript running in Flex Builder 4.7\. Let me know if anyone need the fla (both working & non-working version).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:53:13.730

尝试

```
questBG.gotoAndStop("glow");
trace (questBG.arrowText);
questBG.arrowText.text = "some text"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:47:17.643

不确定您是否自己解决了这个问题，但最好的方法是在两个框架中都有文本字段，但只需在您想要显示或通过更改文本字段的可见性或 alpha 隐藏它，或类似于您所说的。

# networking - DR 故障对 OSPF 中数据流量的影响

> ID：15461956
> 
> 赞同：-1
> 
> 时间：2013-03-17T14:38:02.927
> 
> 标签：networking, routing, ospf

我在某处读到，当 OSPF 网络的 DR 发生故障时，数据流量的转发会中断。为什么会这样？据我了解，由 DR 发起的网络 LSA 仍然存在于 AS 中，这将描述连接到网络的路由器，并且仍应允许将数据流量转发到该网络。那为什么DR故障会中断数据流量呢？任何 OSPF 专家都可以帮助解决这个疑问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:16:11.903

OSPF 可以非常快速地检测到拓扑中的变化，例如链路故障，并在几秒钟内收敛到一个新的无环路路由结构。[ospf](http://en.wikipedia.org/wiki/Open_Shortest_Path_First)

如果您在广播网络上丢失了 DR，则在选出新的 DR 之前，其余路由器之间将无法通信，如果您没有任何 BDR，这可能需要几分钟。通过已经有了 BDR，这减少了“缺乏可见性时间”的协议。

由于只有 1 个 DR，一条链路可能会发生故障，并且 ospf 在几分钟内不会发现此故障，直到选出一个新的 DR，即使存在备份路由，流量也可能会被不必要地阻塞几分钟ospf.

这取决于您的配置是什么，即您是否只有 1 个 DR（& 没有 BDR）拓扑。否则，如 OSPF 文档中所述，它会从链路故障中快速恢复。

不是OSPF专家，但是（可以推断）OSPF也有局限性，在某些拓扑中，也可能失败（即数据流量可以中断），但这不是一般情况。

# wordpress - 显示子类别单页wordpress

> ID：15461957
> 
> 赞同：0
> 
> 时间：2013-03-17T14:38:06.570
> 
> 标签：wordpress

现在这真的让我很烦，我在互联网上的任何地方都找不到真正有效的答案。

您需要熟悉 Wordpress 才能理解。

在我的网站上，基本上我有一个显示单个帖子的单页主题。单个帖子具有多个父类别和子类别。

我可以使用显示所有类别

```
the_category(' '); 
```

该帖子使用已注册的自定义分类法，`wpecbd`我试图仅显示该帖子的 CHILD 类别。任何人都可以帮忙吗？

* * *

如果您需要更好的理解，基本上每个帖子都是企业目录中的一个列表。

类别格式为

```
-A
-- Air Conditioning
-- Child
-- Child
-B
-- Builders
-- Child
-- Child
-C
-- Child
-- Child 
```

帖子可以有多个类别，例如`Air Conditioning`和分别`Builders`属于`A`和`B`。我只想显示孩子，因为我对显示父母 (A/B) 没有兴趣。

**我不想使用`wp_list_categories()`它们，因为我希望它们内联显示**

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:52:11.860

Show Children Only of Category 显示按 ID 排序的类别链接 (sort_column=id)，不显示每个类别的帖子数 (optioncount=0)，仅显示子类别标题 (use_desc_for_title=0)，仅针对 Category 的子项ID 8 (child_of=8)。

```
<?php wp_list_cats('sort_column=id&optioncount=0&use_desc_for_title=0&child_of=8'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T00:51:59.517

我通过删除在添加到数据库之前将父类别和子类别合并在一起的 array_merge() 来克服这个问题。

现在我不需要担心显示父类别。

# c# - 错误 CS1501：方法“NewDeck”没有重载采用“0”参数（CS1501）

> ID：15461959
> 
> 赞同：1
> 
> 时间：2013-03-17T14:38:14.483
> 
> 标签：c#

我正在尝试创建一个函数，该函数将创建一组可以随机输入到列表中的卡片，但是尽管研究了解决方案，但当我调用我的函数时，我无法弄清楚我需要在括号中放置什么，当我返回它的变量。

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BlackJackGameX
{
    public class Deck
    {
        Random rNumber = new Random();

        List<Card> Cards;
        List<Card> ShuffledDeck;

        public int iValue1 = 11;
        public int iValue2 = 2;
        public int iValue3 = 3;
        public int iValue4 = 4;
        public int iValue5 = 5;
        public int iValue6 = 6;
        public int iValue7 = 7;
        public int iValue8 = 8;
        public int iValue9 = 9;
        public int iValue10 = 10;
        public int iValue11 = 10;
        public int iValue12 = 10;
        public int iValue13 = 10; 
```

我不知道我需要在 NewDeck 括号中添加什么。

```
 public Deck()
        {
            Cards = NewDeck();
        }

        public void Shuffle()
        {

            for (int i = 0; i <= 51; ++i) 
            {
                int c = rNumber.Next (1, 53);

                ShuffledDeck.Add(Cards[c]);
            }
        }

        private List<Card> NewDeck(Suit CardSuit, FaceValue CardValue, int iValue)
        {
            var AllSuits = new Suit[]
            {
                Suit.Spades,
                Suit.Hearts,
                Suit.Clubs,
                Suit.Diamonds
            };

            var AllFaces = new FaceValue[]
            {
                FaceValue.Ace,
                FaceValue.Two,
                FaceValue.Three,
                FaceValue.Four,
                FaceValue.Five,
                FaceValue.Six,
                FaceValue.Seven,
                FaceValue.Eight,
                FaceValue.Nine,
                FaceValue.Ten,
                FaceValue.Jack,
                FaceValue.Queen,
                FaceValue.King
            };

            var AllValues = new int[]
            {
                iValue1,
                iValue2,
                iValue3,
                iValue4,
                iValue5,
                iValue6,
                iValue7,
                iValue8,
                iValue9,
                iValue10,
                iValue11,
                iValue12,
                iValue13
            };

            for (int i = 0; i <= 3; i++) 
            {
                for (int j = 0; j <= 12; j++) 
                {
                    Card newCard = new Card(AllSuits[i], AllFaces[j], AllValues[j]);
                }
            } 
```

我不知道我需要在 NewDeck 括号中添加什么

```
 return NewDeck ();
        }

        public void Print()
        {
            Console.WriteLine(ShuffledDeck[1].CardValue);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:41:54.633

由于相关方法的签名是：

```
private List<Card> NewDeck(Suit CardSuit, FaceValue CardValue, int iValue) 
```

您将需要传入如下值：

```
return NewDeck(Suit.Spades, FaceValue.Ace, iValue1); 
```

正如 Oren 所说，在 NewDeck 方法中您不使用这些值。拥有这样的签名也应该没问题：

```
private List<Card> NewDeck() 
```

# java - How to write a database to a text file in android

> ID：15461962
> 
> 赞同：6
> 
> 时间：2013-03-17T14:38:19.813
> 
> 标签：java, android, sqlite

I am working on a Spying application for my college project purpose. For that i have logged the Calls, Location and SMS of the device and stored them in a database. Now i want to export the contents of the database to a text file.. I tried the below code.

```
private void readAndWriteCallsData() {

    File dataBaseFile = getDatabasePath("DATABASE"); 

    File callDataFile = new File(Environment.getDataDirectory()+"/data/com.example.myapp/databases/"+"DATABASE");

    try {

        BufferedReader dbFileReader = new BufferedReader(new FileReader(callDataFile));

        String eachLine;

        while((eachLine = dbFileReader.readLine()) != null)
        {

                Callslog.append(eachLine);
                Callslog.append("\n");

        }

    } catch (IOException e) {

        e.printStackTrace();
    }

} 
```

But that is not working... Please help me...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:14:54.693

您可以通过 Base64 将数据库文件从二进制流编码为字符流，然后在需要时对文本进行解码。

首先找到一个Base64库。您可以使用[http://sourceforge.net/projects/iharder/files/base64/](http://sourceforge.net/projects/iharder/files/base64/)。只有一个文件“Base64.java”。

代码示例：

```
private void readAndWriteCallsData() {
    File callDataFile = new File(Environment.getDataDirectory()+"/data/com.example.myapp/databases/"+"DATABASE");
    try {
        FileInputStream fis = new FileInputStream(callDataFile);
        try{
            byte[] buf = new byte[512];
            int len;
            while((len = fis.read(buf)) > 0){
                String text = Base64.encodeBytes(buf, 0, len); // encode binary to text
                Callslog.append(text);
                Callslog.append("\n");
            }
        }finally{
            fis.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

要恢复它，代码如下：

```
private void revertCallsData() {
    File encodedCallDataFile; // get reference to the encoded text file
    try {
        BufferedReader br = new BufferedReader(new FileReader(encodedCallDataFile));
        try{
            String line;
            while((line = br.readLine()) != null){
                byte[] bin = Base64.decode(line); // decode each line to binary, you can get the original database file
            }
        }finally{
            br.close();
        }

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T12:02:04.677

好的，经过大量的尝试和尝试，我终于找到了解决方案，这是代码，我将功能保存在一个按钮中。

```
final String SAMPLE_DB_NAME = "MyDBName.db";//database name
save.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                    File sd = Environment.getExternalStorageDirectory();
                    File data = Environment.getDataDirectory();
                    FileChannel source=null;
                    FileChannel destination=null;
                    String currentDBPath = "/data/"+ "your package name" +"/databases/"+SAMPLE_DB_NAME;
                    String backupDBPath = SAMPLE_DB_NAME;
                    File currentDB = new File(data, currentDBPath);
                    File backupDB = new File(sd, backupDBPath);
                    try {
                        source = new FileInputStream(currentDB).getChannel();
                        destination = new FileOutputStream(backupDB).getChannel();
                        destination.transferFrom(source, 0, source.size());
                        source.close();
                        destination.close();
                        Toast.makeText(getApplicationContext(),"Your database has been exported",
                                Toast.LENGTH_LONG).show();
                    } catch(IOException e) {
                        e.printStackTrace();
                    }

            }

        }); 
```

**数据库将保存在 /storage/emulated/0/**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-31T23:37:16.367

我建议导出为结构化文件格式，例如 JSON 或 CSV。这是我的 JSON 导出器方法。也许它有帮助

```
private static final String LOG_FOLDER = "/ExportFolder";
private static final String FILE_NAME = "export_file.json";

public static void exportMeasurementsJSON(Handler mHandler) {

    sendToastMessage("Export to JSON started", mHandler);

    File folder = new File(Environment.getExternalStorageDirectory()
            + LOG_FOLDER);
    if (!folder.exists())
        folder.mkdir();

    final String filename = folder.toString() + "/"
            + getLogFileName(".json");

    try {
        FileWriter fw = new FileWriter(filename, false /* append */);

        // get the db
        SomeDateSource db = PIApplication.getDB();

        // Google Gson for serializing Java Objects into JSON
        Gson mGson = new GsonBuilder().create();

        Cursor c = db.getAllRows();
        if (c != null) {
            while (c.moveToNext()) {
                fw.append(mGson.toJson(new DBEntry(c
                        .getString(1), c.getString(2), c
                        .getDouble(3), c.getLong(4))));
                fw.append('\n');
            }
            c.close();
        }
        fw.close();
        sendToastMessage("Export finished", mHandler);

    } catch (Exception e) {
        sendToastMessage("Something went wrong", mHandler);
        e.printStackTrace();
    }   
} 
```

如果您有兴趣，我还可以添加我的 CSV 导出器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-26T12:37:14.730

您的问题不是很清楚（您是要尝试将文件复制到其他位置还是从中导出实际**数据**？）

如果您只想复制文件，可以使用以下方法复制 db 文件：

```
public static void copyFile(String sourceFileFullPath, String destFileFullPath) throws IOException
{
    String copyFileCommand = "dd if=" + sourceFileFullPath + " of=" + destFileFullPath;
    Runtime.getRuntime().exec(copyFileCommand);
} 
```

只需使用您的数据库文件路径 ( `/data/data/package_name/databases/database_name`) as`sourceFileFullPath`和目标文件路径 as调用该方法`destFileFullPath`。然后，您可以使用诸如[`SQLite Expert`](http://www.sqliteexpert.com/)查看 PC/笔记本电脑上的数据库内容之类的工具。

如果您的意图是从数据库中导出**数据**并将其存储在文本文件（CSV 文件或任何类似文件）中，那么您不应该读取数据库文件内容，而是使用[`SQLiteDatabase`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)该类将[`query`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query(java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String))每个表内容放入 a[`Cursor`](http://developer.android.com/reference/android/database/Cursor.html)并进行迭代它将每个光标行写入文本文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-30T05:42:23.313

您可以将整个数据库导出到您的 sdcard 文件夹中，然后使用 SQLite 管理器打开并查看它的内容。

此处提供了一个示例：[http ://www.techrepublic.com/blog/software-engineer/export-sqlite-data-from-your-android-device/](http://www.techrepublic.com/blog/software-engineer/export-sqlite-data-from-your-android-device/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-28T10:49:59.260

以下是在 SD 卡中写入数据库的完整方法：

```
/** 
     * Copy the app db file into the sd card
     */
    private void backupDatabase(Context context) throws IOException {
        //Open your local db as the input stream
        String inFileName = "/data/data/yourappPackageName/databases/yourDBName.db";
// OR use- context.getFilesDir().getPath()+"/databases/yourDBName.db";//
        File dbFile = new File(inFileName);
        FileInputStream fis = new FileInputStream(dbFile);

        String outFileName = Environment.getExternalStorageDirectory()+"/"+SQLiteDataHelper.DB_NAME;
        //Open the empty db as the output stream
        OutputStream output = new FileOutputStream(outFileName);
        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = fis.read(buffer))>0){
            output.write(buffer, 0, length);
        }
        //Close the streams
        output.flush();
        output.close();
        fis.close();
    } 
```

希望它会帮助你。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-17T18:15:17.943

如果您知道数据库并获取所有表并从这些表中检索信息，那么一种方法可以做到这一点（我假设它的过程很长，但很简单）。因为，我们谈论的是 sqlite DB，所以我认为它会很小。

```
SELECT * FROM dbname.sqlite_master WHERE type='table'; 
```

# javascript - javascript中的正则表达式

> ID：15461965
> 
> 赞同：0
> 
> 时间：2013-03-17T14:38:33.253
> 
> 标签：javascript, html, boolean, logic, boolean-logic

嗨，我是 javascript 新手，我有以下功能：

```
function checkform() {
    var theForm = document.getElementById('login_form');
    var regName = /^[a-zA-Z ]+$/;
    var firstname = theForm.firstname.value;

    if (
        (firstname == "" || theForm.firstname.value.length > 30 ) &&
        (regName.test(firstName) == false)
    ) {
        alert("That is not a valid first name!");
        theForm.firstname.focus();
        return false;
    }
} 
```

它的工作原理是检查数据是否为空且不大于 30。我的问题是当前允许用户输入与我的正则表达式不匹配的数据，即数字数据。我看不出逻辑有任何问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:42:37.383

在您的条件语句中尝试这样做：

```
if ((firstname == "" || theForm.firstname.value.length > 30 ) || (regName.test(firstname) == false)) {
    // ...
} 
```

我已将“&&”（和）运算符更改为“||” （或），因为您不需要检查两个条件（空或长于 30 且不匹配正则表达式），而只需检查其中任何一个条件（空或长于 30 或不匹配正则表达式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:42:27.650

尝试一下

```
 var regName = /^[a-zA-Z ]{3,30}$/;
 if (!regName.test(firstName)){ //make an error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:50:10.827

```
<input id="txtChar" onkeypress="return isNumberKey(event)" 
       type="text" name="txtChar">

   function isNumberKey(evt)
   {
      var charCode = (evt.which) ? evt.which : event.keyCode;
      if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57) || event.value > 30)
         return false;

      return true;
   } 
```

# ruby - Ruby中字符串运算符+和<<的区别

> ID：15461966
> 
> 赞同：5
> 
> 时间：2013-03-17T14:38:34.000
> 
> 标签：ruby

我是 Ruby 和这个网站的新手。

下面两个函数是不同的，一个改变函数外的变量，一个不改变。

```
def m1 (x)
  x << "4"
end

def m2 (x)
  x = x + "4"
end

str="123"

m2(str)   #str remains unchanged 123

m1(str)   #str is changed to 1234 
```

我想确保我正确理解这一点 -

当调用 m1 时，对 str 的引用被复制并传递给将其视为 x 的函数。运算符 << 更改引用原始 str 的 x ，因此此操作会更改 str 。

当调用 m2 时，对 str 的引用被复制并传递给将其视为 x 的函数。运算符 + 创建一个新字符串，赋值 x = x + "4" 只是将 x 重定向到新字符串，而原始 str 变量保持不变。

对？

谢谢

![方法声明和调用](../Images/21cabd0acbea8f408c5ce73c3bd21155.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T14:41:46.953

> > [`String#+`](http://www.ruby-doc.org/core-2.0/String.html#method-i-2B):: `str + other_str → new_str`Concatenation - 返回一个包含`other_str`连接到的新字符串`str`。
> > 
> > [`String#<<`](http://www.ruby-doc.org/core-2.0/String.html#method-i-3C-3C):: `str << integer → str`: Append - 将给定对象连接到`str`.

`<<`不创建新对象，就像`+`那样。

```
a = "str"
#=> "str"
a.object_id
#=> 14469636
b = a << "ing"
#=> "string"
a.object_id
#=> 14469636
b.object_id
#=> 14469636

a=  "str"
#=> "str"
b = a + "ing"
#=> "string"
a.object_id
#=> 16666584
b.object_id
#=> 17528916 
```

***编辑***

从你的评论中，明白了你的意思。见下文：

```
def m1 (x)
 x << "4"
end
#=> nil
def m2 (x)
 x = x + "4"
end
#=> nil

str="123"
#=> "123"

m2(str)
#=> "1234"

str
#=> "123" 
```

当您在方法内部传递值时，此处`str`没有更改`m2()`，所有更改都根据上述调用在方法中进行。因此下面`str`没有显示该更改。要查看更改，您必须按如下方式调用它。

```
str = m2(str)
#=> "1234"

str
#=> "1234" 
```

**或者**

您可以执行以下操作：- 我传递了参考地址`str`但没有传递值。

```
str = "abc"
#=> "abc"
str.object_id
#=> 16250484
ObjectSpace._id2ref(16250484)
#=> "abc"
def m1 (x)
ObjectSpace._id2ref(x) << "4"
end
#=> nil
m1(16250484)
#=> "abc4"
str
#=> "abc4" 
```

希望它有意义:)

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:00:43.540

`<<`连接运算符对字符串具有破坏性。这意味着它将操纵它所作用的变量，而不仅仅是返回表达式的结果。

例子：

```
str = "abc"
puts str + "d" # "abcd"

puts str # "abc"

puts str << "d" # "abcd"

puts str # "abcd" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:58:09.790

> 下面两个函数是不同的，一个改变函数外的变量，一个不改变。

这是错误的。*这*两种方法（它们是方法，顺便说一句，不是函数，Ruby 没有函数；存在根本区别）都不会改变`str`变量。`m1`修改变量*指向*的对象，但这与修改变量*本身*完全不同。

# css - 溢出：隐藏在 div 和 body 上，不同的行为

> ID：15461967
> 
> 赞同：6
> 
> 时间：2013-03-17T14:38:44.990
> 
> 标签：css, html, overflow

鉴于此html：

```
<body>
  <div id="a"></div>
  <div id="b"></div>
</body> 
```

我想`#b`填充其容器块的所有剩余垂直空间，我从这个开始：

```
body {
  height: 500px;
  width: 500px;
  overflow: hidden;
}

#a {
  height: 100px;
  width: 100px;
}

#b {
  height: 100%;
  width: 100%;
} 
```

100% 高度也是如此`#b`，这意味着它正在采用其父容器块的高度，即`500px`，问题是`overflow: hidden;`似乎不起作用，`#b`没有被剪裁。

另一方面，如果我用另一个具有与上述相同属性的 div 进行包装`#a`，我将得到所需的结果：`#b``body`

```
#wrap {
  height: 500px;
  width: 500px;
  overflow: hidden;
}

#a {
  height: 100px;
  width: 100px;
}

#b {
  height: 100%;
  width: 100%;
} 
```

当然用这个html：

```
<body>
<div id="wrap">
<div id="a"></div>
<div id="b"></div>
</div>
</body> 
```

我的问题是为什么`div`并且`body`似乎具有相同属性的不同行为？有没有办法在没有包装的情况下获得相同的效果？

为了说明这个问题，我创建了两个 jsFiddles：

带有body标签的jsFiddle作为包装器：http: [//jsfiddle.net/3AMtG/](http://jsfiddle.net/3AMtG/)

带有 div 标签作为包装器的 jsFiddle：http: [//jsfiddle.net/2QWn3/](http://jsfiddle.net/2QWn3/)

两个具有相同属性的 jsFiddle 会产生不同的结果。这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T15:02:27.170

该`overflow`属性具有特定于 HTML`html`和`body`元素的某些特殊行为，这些行为在[CSS2.1 规范](http://www.w3.org/TR/CSS21/visufx.html)中进行了描述。这些特殊情况是为了适应在正常情况下更改整个页面上的溢出设置，因此作者只需将其设置为`html`或`body`，但不能同时设置。

在这种情况下，当您应用于`overflow: hidden`时`body`，它实际上会影响视口而不是`body`（您可以通过调整预览窗格的大小使其更短来看到这一点——预览窗格本身不会出现滚动条）。`#b`即使你给它一个小于和之`#a`和的固定高度，这也会导致身体正常溢出`#b`。换句话说，就好像你从来没有把它放在身体上一样。

但是，如果您设置为on`overflow`以外的其他值，这会导致视口使用给定的值而不是，从而使声明不受影响并允许其行为方式与包装器相同：`visible``html``html``body``body`

```
html {
  overflow: auto;
}

body {
  height: 500px;
  width: 500px;
  overflow: hidden;
} 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/3AMtG/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:03:03.347

body 和 div 完全不同。在我的日常工作中，我喜欢这样构建我的代码。

```
<div class='xxx-ctn'>
  <div class='xxx-inner'>
    <div class='data-wrapper'>
      [p|ul|ol|h1-h6|article|section].....
    </div>
  </div>
</div> 
```

好吧，我想念你的创立，但我认为这是一个很好的编码习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:44:05.903

body 元素被认为是主要的父元素，在浏览器窗口中显示的其他元素驻留在其中，因此 width 和 height 属性不适用于它。根据最佳实践，最好创建一个 div 容器，如您在第二个示例中所做的 #wrapper。

# iphone - Testing on a physical device

> ID：15461970
> 
> 赞同：1
> 
> 时间：2013-03-17T14:39:04.867
> 
> 标签：iphone, ios, objective-c, xcode

I am having a problem with XCode and the ability to test an app on a physical device. I am running XCode v. 4.5.2 and my iPhone is OS 6.1\. When I try to test on the physical device I get the following error:

"No provisioned iOS devices are available with a compatible iOS version. Connect an iOS device with a recent enough version of iOS to run your application or choose an iOS simulator as the destination."

The deployment target for the app is 6.0\. I don't know what else to check. Can anybody offer advice?

Thx!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:42:31.403

You need to upgrade to Xcode 4.6, which supports iOS 6.1 and above

[https://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html](https://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html)

# ruby-on-rails - Devise - Trying to display the user who made a post

> ID：15461972
> 
> 赞同：1
> 
> 时间：2013-03-17T14:39:11.333
> 
> 标签：ruby-on-rails, post, model, devise, controller

I'm creating this rails app, In the app I have the functionality to make an account, then post a status. I have made it so I can display the status on the screen, but how do i display the name of the person who made the post? I am using devise and have setup :username

My View

```
<% if user_signed_in? %>
  <h1 id="welcome" class="nuvo">Welcome <%= current_user.username %>!</h1>
<% else %>
  <h1 id="welcome" class="nuvo">Log-In to make some posts!</h1>
<% end%>

<div class="follow-row">
  <div class="titan-users nuvo"><h2>TITAN Users</h2></div>
</div>

<div class="statuses">
  <% if user_signed_in? %><div class="status-form"><%= render 'form' %></div><% end %>
  <% @posts.each do |post| %>
    <div class="post">
      <div class="tstamp"><strong>Posted <%= time_ago_in_words(post.created_at) %> ago by <%= current_user.username %></strong></div>
      <div class="status"><%= post.status %></div>
    </div>
  <% end %>
</div> 
```

My Post Controller

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all(:order => "created_at DESC")
    @post = Post.new

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    redirect_to posts_path
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

My user model

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username

  has_many :post
  # attr_accessible :title, :body
end 
```

My Post model

```
class Post < ActiveRecord::Base
  attr_accessible :status, :author

  belongs_to :user

  validates :status, :presence => true
end 
```

So, does anyone have any ideas how in the view instead displaying, 'current_user.username' can I display the name of the person who posted it?

So, for CodeIt this is the error I get

```
undefined method `username' for nil:NilClass
Extracted source (around line #17):

14:   <% if user_signed_in? %><div class="status-form"><%= render 'form' %></div><% end %>
15:   <% @posts.each do |post| %>
16:     <div class="post">
17:       <div class="tstamp"><strong>Posted <%= time_ago_in_words(post.created_at) %> ago by <%= post.user.username %></strong></div>
18:       <div class="status"><%= post.status %></div>
19:     </div>
20:   <% end %>
20:   <% end %>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:50:58.650

你有`post`belongs_to `user`。所以你可以使用：

```
 post.user.username  #In your @posts loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:20:38.663

在控制器中的 create 方法中，我没有看到您将 user_id 传递给它，因此可能是用户 dint 设置到 post 模型中。

也许您可以在表单中放置一个 hidden_​​field_tag，并将您的 user_id 作为参数传递。然后，在您的控制器中，执行类似 @post.user_id = params[:user_id] 的操作

然后，在您看来，您可以访问 user_id 并从 user_id 中找到用户名

# javascript - Angularjs calling instantiated resource methods with different url

> ID：15461974
> 
> 赞同：0
> 
> 时间：2013-03-17T14:39:25.650
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-service, angular-resource

I am trying to make resource calls to multiple endpoints with the same instantiated object. Methods that use a prototype resource method do change the endpoint, but the @id fails to extract. id is for sure a property on the object, if i do a regular model.$get, it works. I appreciate any help, i'm hoping the comments in the code will better help explain.

```
admin.controller('ModelController', ['$scope', 'Model', function($scope, Model) {

    // first call to instantiate the models with the default resource url
    Model.query(
        {},
        function(resp) {
            $scope.models = resp.results;
        }
    );

    // this event is emited from a directive
    // data is a object from the models collection
    $scope.$on('modelClick', function(event, data) {

        // without this, event fires twice, i am not sure why.
        event.stopPropagation();

        // creates model with resource prototype
        // the hope is then to be able to do $get or $save on $scope.model
        $scope.model = new Model(data);

        // call below will work normal, pulls the id out of the object
        // and sends it with the request to the default url
        $scope.model.$get();

        // this method changes the resource url to the correct one
        // but id=undefined is put on the query string
        // i have debugged the resource api and when this gets called
        // the object is being sent to the $parse method and the id is available
        $scope.model.getInfo();

        // updates the view
        $scope.$apply('model');
    });

}]);

admin.factory( 'Model', ['$resource', function($resource) {

    // default resource url
    var Model = $resource('/:url', {id: '@id', url: 'initial/path'}, {});

    // method to call a different endpoint, but with same id from instantiated object
    Model.prototype.getInfo = function(params, success, error) {
        var response = this.$get(
            {url: 'info/path'}
        );
        return response;
    };

    return Model;

}]); 
```

Any help with why $scope.model.getInfo() calls /info/path?id=undefined would be greatly appreciated. Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:53:57.397

我不确定，如果这会工作，但你可以试试这个，

```
Model.prototype.getInfo = function(params, success, error) {
       var id = this.id; // if id is not a direct member of 'this'. Please inspect the 'this' for any getter method to get the member variables.
        var response = this.$get(
            {url: 'info/path', 'id':id}
        );
        return response;
    }; 
```

将此代码放在评论部分可能真的很难，因此添加为答案。

# php - How to get the integer from sql database?

> ID：15461977
> 
> 赞同：1
> 
> 时间：2013-03-17T14:39:45.460
> 
> 标签：php, sql

I have a database with 2 columns, one of type int and other of type varchar.

When i try to get tha name with id=1 for example, the query works fine:

```
$name = mysql_query("SELECT Name FROM stations_id WHERE id=1");
$a = mysql_fetch_array($name);
echo $a['Name']; 
```

I try to do the opposite but i cant get the integer value. For example:

```
$id = mysql_query("SELECT id FROM stations_id WHERE Name='Mike'");
$a = mysql_fetch_array($id);
echo $a['id']; 
```

I want to get the type as an integer so i can use it in a function. Can somebody help me plz?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:57:17.897

也许您的表中没有“迈克”作为名字

尝试：

```
$id = mysql_query("SELECT id FROM stations_id WHERE Name like '%Mike%'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:44:00.747

如果您绝对需要整数，则必须`$a['id']`自己转换为整数。然而，这很少是必要的。如果您`$a['id']`在整数上下文中使用（例如在算术运算中），它将自动转换为整数。

# python - 使用 python 创建文本文件

> ID：15461993
> 
> 赞同：0
> 
> 时间：2013-03-17T14:41:08.830
> 
> 标签：python, file

我有一个格式的列表：

```
a=["C/C++","Java","Python"] 
```

我正在尝试使用 python 为列表中的每个元素创建一个文本文件，如下所示：

```
for i in a:
    temp=i+".txt"
    with open(temp,"w") as outfile:
          outfile.write("some value") 
```

但是，当它试图将其解释为目录时，我遇到了“C/C++”表单中的元素的问题。

```
 Traceback (most recent call last):
   File "<stdin>", line 3, in <module>
 IOError: [Errno 2] No such file or directory: 'C/C++.txt' 
```

我该如何克服这个？

注意 - 如果列表元素中不包含“/”，那么代码会为这些元素创建文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T14:53:02.750

那么问题是相当简单的。
![文件名不能包含以下任何字符：/:*?<>|](../Images/fcf7262d6e591f9b29cae6e52032484b.png)

因此，只需将名称更改为有效的名称，例如`C-C++`

# visio - Visio 2013：如何减少内置 UML 类形状的宽度？

> ID：15461994
> 
> 赞同：7
> 
> 时间：2013-03-17T14:41:20.987
> 
> 标签：visio, office-2013

我用 Visio 2013 绘制了“UML 静态结构”类型的类图。现在我想减小图中类形状的宽度。我删除了开发人员工具部分中的尺寸保护，并尝试在相应的形状表中设置宽度，但没有任何效果。
有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-11-20T10:47:17.903

在 Visio 2013 中，您可以使用控制点（黄点）更改类宽度，只需拖动它： ![在此处输入图像描述](../Images/7fa03fae6bd5e0e11452e3f2d7e9387d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-29T13:27:07.440

类形状由一组对象组成。您应该将鼠标拖到它上面，不仅要选择外部形状，还要选择其中的所有元素，例如 ClassName 文本和任何可能存在的成员等。现在，如果您删除了前面提到的大小保护，这将适用到所有元素，然后您可以使用“大小和位置”任务窗格更改大小。（功能区 --> 视图 --> 显示 --> 任务窗格）

# python - Python 请求与 PyCurl 性能

> ID：15461995
> 
> 赞同：56
> 
> 时间：2013-03-17T14:41:25.757
> 
> 标签：python, performance, benchmarking, python-requests, pycurl

Requests 库与 PyCurl 的性能相比如何？

我的理解是 Requests 是 urllib 的 python 包装器，而 PyCurl 是原生 libcurl 的 python 包装器，所以 PyCurl 应该获得更好的性能，但不确定多少。

我找不到任何比较基准。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2015-10-02T03:01:31.927

**[我为你写了一个完整的基准测试](https://github.com/svanoort/python-client-benchmarks)**，使用由 gUnicorn/meinheld + nginx 支持的一个简单的 Flask 应用程序（用于性能和 HTTPS），并查看完成 10,000 个请求需要多长时间。测试在 AWS 中在一对未加载的 c4.large 实例上运行，并且服务器实例不受 CPU 限制。

**TL;DR 总结：**如果你在做很多网络，使用 PyCurl，否则使用请求。PyCurl 完成小请求的速度是请求的 2 到 3 倍，直到您达到大请求的带宽限制（此处约为 520 MBit 或 65 MB/s），并且使用的 CPU 功率减少了 3 倍到 10 倍。这些图比较了连接池行为相同的情况；默认情况下，PyCurl 使用连接池和 DNS 缓存，而请求不使用，因此简单的实现将慢 10 倍。

[![组合图-RPS](../Images/274ed61b25feaff3a47c0d410527625b.png)](https://i.stack.imgur.com/be4Xs.png) [![CPU 时间按请求大小详细](../Images/7a9f05123d2923fff32f8b02abd3dcc3.png)](https://i.stack.imgur.com/TD3ok.png)

[![只是 HTTP 吞吐量](../Images/716f0dd87bc64b13c938b2d57407b6bd.png)](https://i.stack.imgur.com/nPend.png) [![只是 HTTP RPS](../Images/2e0a53e0cc3ca069dd75f5796c85eadf.png)](https://i.stack.imgur.com/1w1qd.png)

**请注意，由于涉及的数量级，双对数图仅用于下图** [![HTTP & HTTPS 吞吐量](../Images/78a5772e3be4a8658c59ef2f1d1a989b.png)](https://i.stack.imgur.com/KmqkF.png) [![HTTP & HTTPS RPS](../Images/2336491ff5955a43f15467ba4121d5e0.png)](https://i.stack.imgur.com/bSKul.png)

*   pycurl 在重用连接时需要大约 73 CPU 微秒来发出请求
*   requests在重用连接时发出请求大约需要**526 CPU 微秒**
*   pycurl 大约需要 165 CPU 微秒来*打开一个新连接*并发出请求（没有连接重用），或者大约 92 微秒来打开
*   requests 大约需要**1078** CPU 微秒来*打开一个新连接*并发出请求（没有连接重用），或者大约 552 微秒来打开

[完整结果在链接](https://github.com/svanoort/python-client-benchmarks)中，以及基准方法和系统配置。

**警告：**虽然我努力确保以科学的方式收集结果，但它只测试一种系统类型和一种操作系统，以及有限的性能子集，尤其是 HTTPS 选项。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-17T14:59:57.353

首先也是最重要的，它是建立在[库](http://urllib3.readthedocs.org/en/latest/)`requests`之上的，stdlib或库根本不被使用。[`urllib3`](http://urllib3.readthedocs.org/en/latest/)`urllib``urllib2`

`requests`与`pycurl`性能相比没有什么意义。`pycurl`可能会使用 C 代码进行工作，但与所有网络编程一样，您的执行速度很大程度上取决于将您的机器与目标服务器分开的网络。此外，目标服务器可能响应缓慢。

最后，`requests`使用更友好的 API，您会发现使用更友好的 API 会提高工作效率。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-06T20:11:11.923

似乎有一个新的孩子： - pycurl 的请求接口。

谢谢你的基准 - 很好 - 我喜欢 curl，它似乎能够做的比 http 多一点。

[https://github.com/dcoles/pycurl-requests](https://github.com/dcoles/pycurl-requests)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-30T01:59:05.990

专注于尺寸 -

1.  在我的带有 8GB RAM 和 512GB SSD 的 Mac Book Air 上，对于以每秒 3 KB 的速度传入的 100MB 文件（来自互联网和 wifi），pycurl、curl 和请求库的 get 函数（无论是分块还是流式传输）都是基本上一样。

2.  在具有 4GB RAM 的较小[四核 Intel Linux](https://www.reddit.com/r/chinapcs/comments/6ksrsi/chuwi_hibox_smart_mini_pc_4g_64g_quad_core_intel/)机器上，通过 localhost（来自同一机器上的 Apache），对于 1GB 文件，curl 和 pycurl 比“请求”库快 2.5 倍。对于请求，分块和流式传输一起提供 10% 的提升（块大小超过 50,000）。

我以为我将不得不为 pycurl 交换请求，但不是这样，因为我正在制作的应用程序不会让客户端和服务器关闭。

# java - 时间表错误

> ID：15461997
> 
> 赞同：0
> 
> 时间：2013-03-17T14:41:29.080
> 
> 标签：java, time, timer, scheduled-tasks

请看下面的代码

```
public class Test {

    public Test()
    {
        Timer timer = new Timer();
        timer.schedule(new TimerTask(){
        public void run()
        {
            System.out.println("Updated");
        }
        }, System.currentTimeMillis(),1000);

    }

    public static void main(String[]args)
    {
        new Test();
    }

} 
```

在这里，你可以看到它没有打印任何东西！也就是说，时间没有安排！这是为什么？我想安排任务每秒钟发生一次。请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T14:45:27.333

你告诉`Timer`在执行你的`TimerTask`. 这可以持续到 42 年。你应该使用[`Timer.schedule(yourTask, 0, 1000)`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T14:45:45.237

尝试执行此代码：

```
import java.util.Timer;
import java.util.TimerTask;

public class Test {

    public Test()
    {
        Timer timer = new Timer();
        timer.schedule(new TimerTask(){
        public void run()
        {
            System.out.println("Updated");
        }
        }, 0,1000);

    }

    public static void main(String[]args)
    {
        new Test();
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T14:47:52.357

看一下[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)，有两种方法：

```
schedule(TimerTask task, Date firstTime, long period) 
schedule(TimerTask task, long delay, long period) 
```

您正在传递，`(TimerTask, long, long)`因此正在调用第二个 - 即安排任务以毫秒为单位第一次运行，`System.currentTimeMillis()`此后每秒运行一次。因此，您的任务将首次在 运行`Thu Jun 01 06:45:28 BST 2056`，以找出答案：

```
public static void main(String[] args) {        
    System.out.println(new Date(2*System.currentTimeMillis()));
} 
```

您需要使用零调用该方法：

```
 Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        public void run() {
            System.out.println("Updated");
        }
    }, 0, 1000); 
```

这意味着安排任务在零毫秒内第一次运行，之后每秒运行一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:54:10.180

您已将延迟设置为以毫秒为单位的当前时间（这将是一个很长的时间:)）。您可能打算这样做：

```
public class Test {

    public Test()
    {
        Timer timer = new Timer();
        timer.schedule(new TimerTask(){
            public void run()
            {
                System.out.println("Updated");
            }
        }, new Date(System.currentTimeMillis()),1000); //<--- Notice a date is being constructed

    }

    public static void main(String[]args)
    {
        new Test();
    }

} 
```

您将 firstTime 设置为当前日期的位置。

# html - Aptana 中的快速标签编辑器快捷键

> ID：15461998
> 
> 赞同：5
> 
> 时间：2013-03-17T14:41:37.207
> 
> 标签：html, keyboard-shortcuts, aptana, dreamweaver, aptana3

在dreamweaver中，我们有Ctrl+T用于快速标签编辑器，换句话说，我们可以选择部分文本，然后按Ctrl+T，然后我们可以选择一个标签，dreamweaver会自动将开始标签和结束标签添加到选定区域，

Aptana 中有这样的快捷键吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T08:36:39.460

`Ctrl+Shift+W`将使用您可以更改的打开和关闭标签包装选定的文本

# bash - sed变量替换不起作用

> ID：15461999
> 
> 赞同：1
> 
> 时间：2013-03-17T14:41:42.390
> 
> 标签：bash, unix, sed

这个问题已经让我陷入困境了，我已经搜索了很多，似乎没有其他解决方案适合我......

```
sed "s|{{/each}}| -->\n $photostr |" $1 
```

所以我试图结束评论，并拍打我的照片串。这是 $photostr 是什么

```
 <a data-gallery="gallery" href="The_Great_Wave.jpg"  title=" The Great Wave off Kanagawa"> <img src="bar" alt=" The Great Wave off Kanagawa"/></a>
 <a data-gallery="gallery" href="Mt_Fuji.jpg"  title=" Mount Fuji (the highest mountain in Japan)"> <img src="bar" alt=" Mount Fuji (the highest mountain in Japan)"/></a>
 <a data-gallery="gallery" href="Beach.jpg"  title=" Waves Crashing on the Beach"> <img src="bar" alt=" Waves Crashing on the Beach"/></a>
 <a data-gallery="gallery" href="Elephant.jpg"  title=" An Elephant in the Serengeti"> <img src="bar" alt=" An Elephant in the Serengeti"/></a>
 <a data-gallery="gallery" href="Milky_Way.jpg"  title=" The Milky Way Galaxy (contains our Solar System)"> <img src="bar" alt=" The Milky Way Galaxy (contains our Solar System)"/></a>
 <a data-gallery="gallery" href="Poppies.jpg"  title=" Poppies in Bloom"> <img src="bar" alt=" Poppies in Bloom"/></a> 
```

所以它充满了元字符，所以我使用管道作为分隔符，但我得到了这个错误......

```
sed: -e expression #1, char 70: unterminated `s' command 
```

对于输入，$1 是一个包含 html 和一些 {{metatag}} 的文件，需要适当的替换来制作一个工作网页。我关心的一点，

`</a> {{/each}} </div>`

应该变成...

`</a> --> <a data-gallery="gallery" href="The_Great_Wave.jpg" title=" The Great Wave off Kanagawa"> <img src="bar" alt=" The Great Wave off Kanagawa"/></a> <a data-gallery="gallery" href="Mt_Fuji.jpg" title=" Mount Fuji (the highest mountain in Japan)"> <img src="bar" alt=" Mount Fuji (the highest mountain in Japan)"/></a> <a data-gallery="gallery" href="Beach.jpg" title=" Waves Crashing on the Beach"> <img src="bar" alt=" Waves Crashing on the Beach"/></a> <a data-gallery="gallery" href="Elephant.jpg" title=" An Elephant in the Serengeti"> <img src="bar" alt=" An Elephant in the Serengeti"/></a> <a data-gallery="gallery" href="Milky_Way.jpg" title=" The Milky Way Galaxy (contains our Solar System)"> <img src="bar" alt=" The Milky Way Galaxy (contains our Solar System)"/></a> <a data-gallery="gallery" href="Poppies.jpg" title=" Poppies in Bloom"> <img src="bar" alt=" Poppies in Bloom"/></a>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:38:47.363

`\n`像使用它之前一样对变量值中的换行符进行编码：

```
photostr=$(sed ':a;N;$!ba;s/\n/\\n/g' <<< "$photostr")
sed "s|{{/each}}| -->\n $photostr |" $1 
```