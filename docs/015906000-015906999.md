# StackOverflow 问答 15906000-15906999

# java - JTable 选择监听器

> ID：15906001
> 
> 赞同：6
> 
> 时间：2013-04-09T15:24:19.210
> 
> 标签：java, swing, jtable, jtextarea

我有一个在小程序中显示表格的代码，由两列组成：-

1.  图像图标
2.  描述

这是我的代码：

```
 import javax.swing.table.*;

    public class TableIcon extends JFrame
     {
    public TableIcon()
    {
    ImageIcon aboutIcon = new ImageIcon("about16.gif");
    ImageIcon addIcon = new ImageIcon("add16.gif");
    ImageIcon copyIcon = new ImageIcon("copy16.gif");

    String[] columnNames = {"Picture", "Description"};
    Object[][] data =
    {
        {aboutIcon, "About"},
        {addIcon, "Add"},
        {copyIcon, "Copy"},
    };

    DefaultTableModel model = new DefaultTableModel(data, columnNames);
    JTable table = new JTable( model )
    {
        //  Returning the Class of each column will allow different
        //  renderers to be used based on Class
        public Class getColumnClass(int column)
        {
            return getValueAt(0, column).getClass();
        }
    };
    table.setPreferredScrollableViewportSize(table.getPreferredSize());

    JScrollPane scrollPane = new JScrollPane( table );
    getContentPane().add( scrollPane );
}

public static void main(String[] args)
{
    TableIcon frame = new TableIcon();
    frame.setDefaultCloseOperation( EXIT_ON_CLOSE );
    frame.pack();
    frame.setVisible(true);
  }

} 
```

现在我想知道的是如何在我的表格上实现选择侦听器或鼠标侦听器事件，以便它应该从我的表格中选择一个特定的图像并显示在文本区域或文本字段上（我的表格包含图像文件的路径）？

我可以在表格和框架上的表格上添加文本字段吗？如果需要，请随时询问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-29T11:21:32.110

在我的代码中，我有一个设置单选模式的表格；就我而言，[如何编写列表选择侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)（使用从 getMinSelectionIndex 到 getMaxSelectionIndex 的 for 循环）中描述的侦听器没有用，因为释放鼠标按钮我确定我只选择了一行。

所以我解决了如下：

```
....

int iSelectedIndex =-1;

....

JTable jtable = new JTable(tableModel); // tableModel defined elsewhere
jtable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

ListSelectionModel selectionModel = jtable.getSelectionModel();

selectionModel.addListSelectionListener(new ListSelectionListener() {
    public void valueChanged(ListSelectionEvent e) {
        handleSelectionEvent(e);
    }
});

....

protected void handleSelectionEvent(ListSelectionEvent e) {
    if (e.getValueIsAdjusting())
        return;

    // e.getSource() returns an object like this
    // javax.swing.DefaultListSelectionModel 1052752867 ={11}
    // where 11 is the index of selected element when mouse button is released

    String strSource= e.getSource().toString();
    int start = strSource.indexOf("{")+1,
        stop  = strSource.length()-1;
    iSelectedIndex = Integer.parseInt(strSource.substring(start, stop));
} 
```

我认为这个解决方案不需要在开始和停止之间进行 for 循环来检查选择了哪个元素，当表格处于单选模式时更合适

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-25T08:48:53.263

这个怎么样？

```
 protected void handleSelectionEvent(ListSelectionEvent e) {
            if (e.getValueIsAdjusting())
                return;

            final DefaultListSelectionModel target = (DefaultListSelectionModel)e.getSource();
            iSelectedIndex = target.getAnchorSelectionIndex();
        } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T16:06:27.090

阅读 Swing 教程中有关[如何编写列表选择侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)的部分。

您不能将文本字段添加到表格，但可以将文本字段和表格添加到同一框架。

# ruby-on-rails - 引导我采取不同行动的路线

> ID：15906003
> 
> 赞同：1
> 
> 时间：2013-04-09T15:24:30.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hyperlink, routing

我有一个路线文件夹

```
resources :groups 
```

在我`GroupsController`这里有一些动作

```
def new
  @group = Group.new
end

def update
end

def show
  @groups = Group.find(params[:id])
end 
```

当我运行 rake 路线时，我看到

```
new_group GET    /groups/new(.:format)    groups#new 
```

所以现在在我的html页面中

```
a.btn.btn-primary href="/groups/new" 
```

有趣的是，每当我点击链接时，它都会告诉我

```
No route matches {:action=>"show", :controller=>"groups"} 
```

实际上，我确实有 show 动作的路线匹配。我还检查并没有任何过滤器将我重定向到我的`GroupsController`. 我不知道为什么它会重定向我显示。出了什么问题，我该如何解决？我一定遗漏了一些明显的东西。

更新

如果我像这样从资源方法中删除显示操作

```
resources :groups, except: [:show] 
```

然后它告诉我它找不到`update`动作。

# 解决了

我发现在我的`new.html`页面中有一个调用`group_path`，而实际上它应该`groups_path`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:11:56.503

我发现在我的 new.html 页面中有一个调用`group_path`，而实际上它应该调用`groups_path`。

# javascript - 为什么这个“这个+兄弟”调用失败？

> ID：15906004
> 
> 赞同：0
> 
> 时间：2013-04-09T15:24:32.027
> 
> 标签：javascript, jquery, html, css

我在 jQuery 中认为应该是一个简单的同级选择器时遇到了一些问题。

该问题不会产生错误消息，当然，它只是无法正确选择。在文档（就绪）函数（）中，我有以下简单的代码来首先隐藏所有弹出窗口，然后等待一个人单击将显示同级弹出窗口的图像：

```
//hide all the charm pop ups
$(".charm_pop").hide();
$(".charm > img").click(function() {
    $("this + .charm_pop").show();
}) 
```

我的 HTML 是由 Django`for`循环生成的，因此这个简单的图像/弹出组合标记将有很多次迭代：

```
{% for ch in charms %}
    <div class="charm">
        <img src="{{ MEDIA_URL }}images/charms/{{ ch.image }}" alt="{{ ch.name }}" />
        <div class="charm_pop">
             <p id="charm_name">{{ ch.name }}</p>
         <p id="charm_desc">{{ ch.description }}</p>
         <p id="charm_price">${{ ch.price }}</p>
         <form method="post" action="." class="cart">{% csrf_token %}
               <p>**some inputs and what not</p>
         </form>
        </div>
    </div>
{% endfor %} 
```

正如你所看到的，我只是等待一个图像被点击，当它被点击时，我选择它的兄弟并显示相应的弹出窗口。然而，当我单击图像时，什么也没有发生。如果我`$("this + .charm_pop").show();`用`$(".charm_pop").show();`它替换确实显示了所有弹出窗口，所以点击功能正在工作，选择器只是不稳定。

我是否误解了`this`在这种情况下的工作方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:26:41.383

在编写 jQuery 选择器时，字符串`"this"`仅表示“一个 HTML 元素`<this>`”，因此`$("this + .charm_pop")`肯定行不通。

将对象的字符串表示与其他内容连接在这里也没有意义，因此`$(this + " .charm_pop")`也不起作用。

您应该使用适当的遍历函数，从`$(this)`：

```
$(this).next(".charm_pop").show(); 
```

从单击的图像到其兄弟有许多不同的方法`.charm_pop`，但`.next()`最快并且在语义上与`+`您尝试使用的相邻兄弟选择器相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T15:26:40.640

您的代码基本上是使用 + css 选择器

```
$("this + .charm_pop").show(); 
```

`element+.class`上面写着“选择紧跟在元素之后的所有 .class *元素*

在您的情况下，它正在寻找一个名为`this`. 我怀疑你有任何标签名称为`<this>`.

您的代码必须是

```
$(this).siblings(".charm_pop").show(); 
```

或者

```
$(this).next(".charm_pop").show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:27:22.980

你可以这样做 ：

```
$(this).find(".charm_pop").show(); 
```

# ruby-on-rails - 使用思考狮身人面像获取列的最大值和最小值

> ID：15906005
> 
> 赞同：0
> 
> 时间：2013-04-09T15:24:32.367
> 
> 标签：ruby-on-rails, thinking-sphinx

我正在使用 Rails 并思考狮身人面像。我有一个模型产品索引如下（仅显示相关信息）

```
define_index do
   indexes :name, :as => :name, :sortable => true
   indexes color, :facet => true
   ...
   indexes price, :as => :range, :facet => true
   has created_at, price, root_category_id
   ...
end 
```

我需要的是获得当前搜索的最高价格的产品。我试过类似的东西

```
 Product.search('', :select => 'MAX(price)') 
```

但它让我一团糟。

```
>> Product.search_for_ids( :select => 'MAX(price)')
Sphinx Query (3.0ms)  
Sphinx  Found 732 results
Product Load (0.4ms)  SELECT MAX(price) FROM `products` WHERE `products`.`id` IN (388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 401, 402, 403, 404, 405, 406, 407, 408)
=> [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil] 
```

我真的不明白它为什么要执行那个奇怪的查询，为什么要在哪里添加它以及为什么要返回一个数组。

问候，佛朗哥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:29:34.727

简短的回答：Sphinx 不能返回聚合数据——它总是返回文档记录（在这种情况下是产品）。对于这种类型的查询，您必须使用 ActiveRecord/SQL。

至于为什么您的尝试返回奇数值：使用 Thinking Sphinx v2 及更早版本，`:select`当 Sphinx 结果转换为 ActiveRecord 选项（您可以看到的 SQL 调用）时，该选项将传递给底层的 ActiveRecord 调用。您已从 SELECT 子句中删除了主键，因此 Thinking Sphinx 无法将 Sphinx 结果与 Product 实例匹配，因此每个失败的匹配都返回 nil。

# c++ - 来自 Boost.Random 的多线程 RNG

> ID：15906007
> 
> 赞同：0
> 
> 时间：2013-04-09T15:24:33.757
> 
> 标签：c++, boost, random, openmp

我正在尝试将多线程包含在我的程序中，该程序显示在线程的末尾。我在使用 RNG 的部分时遇到了一些困难`boost/random`。我正在使用 OpenMP 进行多线程处理。我可以理解 Boost 的变量生成器不支持安全多线程，但我正在努力寻找解决方法，到目前为止还没有运气。请注意，该函数`norm`稍后会在我的程序中使用，但这次是在单个线程上。我提到这一点，因为它可能会排除一些解决方案（或者可能不会）..

**到目前为止我自己的方法**：我`#pragma omp critical`在生成数字之前尝试过使用安全防护，但在这种情况下，多线程不会提高计算速度（我已经比较了时间......）

我特意发布了我的问题的最简单版本，因此如果需要，可以说明解决方案。即使我使用的是 OpenMP，我也愿意切换到 Boost.Thread，如果在那里更容易实现，我会看到一些进展。

**编辑**我已经阅读了多个地方，为每个线程创建一个 RNG 实例是一种选择，但我很高兴看到如何在实践中做到这一点。

感谢您提前参与。

```
#include <iostream>
#include <boost/random.hpp>
#include <boost/random/normal_distribution.hpp>
#include <time.h>

using namespace std;

int main()
{
    boost::mt19937 engine(static_cast<unsigned int>(0));
    boost::normal_distribution<double> dis(0.0, 1.0);
    boost::variate_generator< boost::mt19937, boost::normal_distribution<double> > norm(engine, dis);

    unsigned long long app=0;
    unsigned long long i;
    #pragma omp parallel for private(i) reduction(+:app)
    for(i=0; i<1234567890; i++)
    {
        double temp = norm();
        if(temp < 0.5) app++;
    }
    cout << app << endl;
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:29:05.693

您可以在生成变量之前获取互斥锁或其他东西，然后释放它，如下所示：

```
std::mutex mu;
#pragma omp parallel for
for (int i=0;i<123456789;i++) {
  double temp;
  { std::lock_guard<std::mutex> lk(mu);
    temp = norm();
  }
  if (temp < 0.5) app++;
} 
```

更明智的选择是为每个线程设置一个 RNG。我确信这可以通过 OpenMP 实现，但我不知道如何。

# crash - 没有 SystemOutOfMemoryException

> ID：15906010
> 
> 赞同：0
> 
> 时间：2013-04-09T15:24:49.360
> 
> 标签：crash, windows-phone-8, out-of-memory

我的应用程序在 512mb 手机模拟器上运行时突然崩溃（可重现）（只有 920 来测试）。没有任何异常，它只是变黑了。然后我在应用程序上运行分析工具，发现内存在应用程序崩溃时达到了极限。应用程序退出并显示错误代码。我发现的最近一个是 0x887a0005，但我很确定不久前我看到了另一个。可悲的是，我在任何地方都没有那个。

我使用 CreateBackground 选项将来自网络的大约 600 个图像加载到 BitmapImages 中，并处理 ImageOpened 事件。

我不是寻求帮助来管理问题本身，我会找到解决它的方法。我只是想知道为什么应用程序没有抛出任何异常，而是崩溃了。任何想法她

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:58:37.963

这是预期的行为。根据内存不足时正在执行的代码段，可能会引发内存不足异常 - 如果该特定 .NET 类或底层类可以引发内存不足异常。但操作系统不会等待这种情况发生，通常只会终止您的应用程序。它不会向您的应用程序发送“终止”或“内存不足”信号，它只是杀死它。

# ruby - 如何检索内容的 HTML？

> ID：15906013
> 
> 赞同：0
> 
> 时间：2013-04-09T15:24:59.967
> 
> 标签：ruby, rubygems, html-parsing, mechanize, helpers

我正在尝试编写将采用用户输入 URL 并将该页面的 HTML 内容打印到屏幕的代码。目标是最终创建一个脚本来组织页面上的所有文本。

我将如何编辑下面的代码来完成对 HTML 的检索？

```
require 'rubygems'
require 'mechanize'

agent = Mechanize.new

page = agent.get('http://google.com').search("p.posted")
print "" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:56:51.980

听起来你想要这个`.body`方法：

`puts page.body`

# matlab - 使用matlab进行球坐标的传热

> ID：15906018
> 
> 赞同：1
> 
> 时间：2013-04-09T15:25:19.300
> 
> 标签：matlab, transfer, heat

我想为一个半球应用热传递（热传导和对流）。它是球坐标中的瞬态均匀传热。没有热量产生。半球的边界条件是在Tinitial = 20度室温时开始的。外部环境温度为-30度。你可以想象半球是一种固体材料。此外，它是一个非线性模型，因为热导率在材料冻结后会发生变化，这会改变温度分布。

我想在一定时间内找到这种固体的温度曲线，直到中心温度达到-30度。

在这种情况下，温度取决于 3 个参数：T(r,theta,t)。半径、角度和时间。

1/α(∂T(r,θ,t))/∂t =1/r^2*∂/∂r(r^2(∂T(r,θ,t))/∂r)+ 1/ (r^2*sinθ)∂/∂θ(sinθ(∂T(r,θ,t))/∂θ)

我使用 matlab 应用了有限差分法，但是程序不会为半球的内部节点计算任何东西，而只是给我初始温度值（这里告诉了）。您可以看到我用于内部节点的一些脚本。

```
% initial conditions
Tair    =   -30.0;               % Temperature of air
Tin     =    21; 

% setting initial values for grid
for i=1:(nodes)
    for j=1:(nodes)
Told(i,j)     =   Tin;
Tnew(i,j)     =   Tin;
frozen(i)   =   0;                      
latent(i)   =   Qs*mass(i)*Water/dt;    
k(i)        =   0.5;                    
cp(i)       =   cw;                     
W(i)        =   Water;                  
l(i)        =   0;                      
S(i)        =   1-Water;                
     end
end

%Simulation conditions
J       =    9;              % No. of space steps   
nodes   =   J+1;             % Number of nodes along radius or theta direction
dt      =0.1;

t       =   0;               % time index on start
tmax    =   7000;            % Time simmulation is supposed to run

R       =  d/2;

dr      =  (d/2)/J;         %  space steps in r direction

 y   =        pi/2;        % (theta) for hemisphere
dy      =  (pi/2)/J;       % space steps in Theta direction

    % Top surface condition for hemisphere
      i=nodes; 
        for j=1:1:(nodes-1) 

       Qcd_ot(i,j) = ((k(i)+ k(i-1))/2)*A(i-1)*(( Told(i,j)-Told(i-1,j))/(dr)); % heat conduction out of nod 

        Qcv(i,j) = h*(Tair-Told(i,j))*A(i); % heat transfer through convectioin on surface 

        Tnew(i,j) = ((Qcv(i,j)-Qcd_ot(i,j))/(mass(i)*cp(i))/2)*dt + Told(i,j); 
          end             %end of for loop 

  % Temperature profile for inner nodes

  for i=2:1:(nodes-1)     
    for j=2:1:(nodes-1)  

Qcd_in(i,j)=   ((k(i)+ k(i+1))/2)*A(i) *((2/R)*(( Told(i+1,j)-Told(i,j))/(2*dr)) + ((Told(i+1,j)-2*Told(i,j)+Told(i-1,j))/(dr^2)) + ((cot(y)/(R^2))*((Told(i,j+1)-Told(i,j))/(2*dy))) + (1/(R^2))*(Told(i,j+1)-2*Told(i,j)+ Told(i,j-1))/(dy^2));
Qcd_out(i,j)=  ((k(i)+ k(i-1))/2)*A(i-1)*((2/R)*(( Told(i,j)-Told(i-1,j))/(2*dr)) +((Told(i+1,j)-2*Told(i,j)+Told(i-1,j))/(dr^2)) + ((cot(y)/(R^2))*((Told(i,j)-Told(i,j-1))/(2*dy))) + (1/(R^2))*(Told(i,j+1)-2*Told(i,j)+ Told(i,j-1))/(dy^2));

Tnew(i,j)     =   (Qcd_in(i,j)-Qcd_out(i,j))/(mass(i)*cp(i)))*dt + Told(i,j);
    end           
end               

   %bottom of the hemisphere solid
  Tnew(:,nodes)=-30;

 Told=Tnew;
 t=t+dt; 
```

**编辑** *谢谢，现在脚本正在运行和计算。我可以看到模型系统的温度曲线。

但是，我想为此半球温度曲线绘制 2D 或 3D 图。另外，如果可能的话，我想在特定时间运行温度变化动画。我用于模拟和编写文件的代码是

```
 t=0;

    tmax=7000;
    ...................
    .....................
    ss=0;   % index for printouts

     %start simulation
     while t<tmax
   ss=ss+1;
  .............
  .................
   ................
    if ss==2000
    dlmwrite('d:\Results_for_model.txt',Tnew,'-append');
    ss=0;
    end

    end   % end of while loop 
```

你有什么建议吗？因为在文本文件中，对于 Tnew(i,j) 值，每 10 行后，模型计算下一个 dt 值。因此，结果数据看起来像一团糟，每 10 行后，它会给出下一次值结果。

有没有办法根据特定的行和列来协调编写这个结果（因为否则需要一次又一次地组织大量的数据）？

我想在 3d 图中绘制这个温度分布图，在这种情况下是半球，我有 Tnew（r，theta，t），但我对如何表示这个温度分布图以显示在半球图中感到困惑。我想听听您对此的建议。提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:35:40.257

准确地说，MATLAB 为该`for loop`构造定义的正确语法是

```
for index = values
    program statements
    ...
end 
```

where`values`具有以下形式之一：

`initval:endval`

`initval:step:endval`

`valArray`

您的代码被解析为`initval:endval`= `9:2`，这意味着循环运行 0 次，导致没有计算。

# eucalyptus - 如何解决 Eucalyptus 中的证书问题？

> ID：15906020
> 
> 赞同：0
> 
> 时间：2013-04-09T15:25:22.830
> 
> 标签：eucalyptus

我最近在 Ubuntu 10.04 上安装了 eucalyptus。一切正常，直到我进入用户界面。每当我尝试进入商店选项卡时​​，我都会收到以下错误：

```
Error 60: server certificate verification failed. CAfile: /etc/ssl/certs/ca-certificates.crt CRLfile: none 
```

我一直在做一些研究并尝试更新证书，对 /usr/lib/python2.7/dist-packages/imagestore/lib/fetch.py​​ 进行更改，但这些解决方案都没有奏效。

我真的被卡住了，不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:47:41.903

我无法帮助解决 Ubuntu 上的问题，我怀疑所涉及的 Euca 版本已经过时了。如果您愿意在 CentOS 上工作，那么您有两个不错的选择

1.  FastStart - 这是一个很棒的 Eucalyptus 和 CentOS 捆绑包。我用它在每次发布后启动一个新的云，包括 3.3 的预发布。到新云的总时间大约是 35 分钟。 [http://www.eucalyptus.com/download/faststart](http://www.eucalyptus.com/download/faststart)

2.  包下载 - 这是您的标准安装方法，如果您尝试构建大型云，这是唯一的选择。 [http://www.eucalyptus.com/download/eucalyptus](http://www.eucalyptus.com/download/eucalyptus)

顺便说一句 - 如果您正在寻找构建大型云，我还建议您查看参考架构。这些是基于大量真实客户环境的 Eucalyptus 部署蓝图。[http://eucalyptus.com/eucalyptus-cloud/reference-architectures](http://eucalyptus.com/eucalyptus-cloud/reference-architectures)

如果您还有其他问题，希望我们在 IRC 上见到您。这是 freenode 上的#eucalyptus 频道：[http ://webchat.freenode.net/?channels=eucalyptus](http://webchat.freenode.net/?channels=eucalyptus)

希望这可以帮助

# android - 如何从 android 应用程序内部运行已安装的 .apk 文件？

> ID：15906025
> 
> 赞同：0
> 
> 时间：2013-04-09T15:25:31.363
> 
> 标签：android, path, uri, apk

我需要知道如何从我的应用程序中打开 .apk 文件。据我所知，Android OS 上没有任何文件资源管理器，因此我应该为此使用下载并安装的程序。我希望问题是可以理解的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:30:03.080

`android.intent.action.ACTION_VIEW`您可以使用操作和指向文件的数据 URI创建 Intent 。

这应该会打开一个对话框，要求用户安装文件（并警告他们它需要的权限）。

但是 - 您无权自己直接安装 APK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:33:01.667

如果你的意思是在下载后安装 apk 文件，你可以使用这个意图：

```
Intent installIntent= new Intent(Intent.ACTION_VIEW);
installIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
installIntent.setDataAndType(Uri.parse("file://" + apkFilePath),"application/vnd.android.package-archive");
startActivity(installIntent); 
```

# sql - 我可以将更新与内部联接一起使用吗？

> ID：15906028
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:25:39.747
> 
> 标签：sql, sql-server, join, sql-update, c#-5.0

我想对 我的命令所在的表的**任何记录和所有记录使用更新：**`column1 <> column2`

```
update table1 set name = (select name from table2
                           where code1 <> code2 and table1.id=table2.id) 
```

可能吗？

是否可以在更新命令中使用内连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:27:22.377

您可以简单地加入两个表，

```
UPDATE  a
SET     a.Name = b.Name
FROM    Table1 a
        INNER JOIN Table2 b
            ON a.ID = b.id
WHERE   a.Code1 <> a.Code2 
```

# vim - 如何在vim中显示搜索的所有结果

> ID：15906029
> 
> 赞同：4
> 
> 时间：2013-04-09T15:25:41.823
> 
> 标签：vim

使用 notepad++ 搜索字符串时，会打开新窗口并显示查找结果。我想在 vim 中使用这个功能。谷歌搜索后，我发现了一些建议：

```
vimgrep /<pattern>/ %
copen 
```

可以创建执行这两个命令的映射。模式应该是当前单词：可能是 vim 中的 cword 关键字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:31:34.143

我建议使用 lvimgrep（这样你就可以使用 quickfix ：make）

```
:nnoremap <F6> :lvimgrep /\M\<<C-R><C-W>\m\>/ **/*.[ch]pp **/Makefile | lopen<CR> 
```

另外，如果您*只想*在当前文件中查找：

```
:g/<pattern>/ 
```

将在每个匹配的行上调用“打印”（默认命令）。

```
:v//               " non-matching lines
:g//-1             " lines preceding the matching line
:g//-1,+1          " lines around the matching line 
```

等等

:global 更有用：

```
 :g/foo/ join       " join all lines containing foo 
```

等等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T15:48:39.763

这个要求其实很简单。但是要获得用户输入的模式，您需要一个函数。

```
function! FindAll()
    call inputsave()
    let p = input('Enter pattern:')
    call inputrestore()
    execute 'vimgrep "'.p.'" % |copen'
endfunction 
```

如果你想有一个映射，添加这一行：

```
nnoremap <F8> :call FindAll()<cr> 
```

但正如我在你的问题下评论的那样。`%`可能不适用于未命名的缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:47:40.657

这两个命令可以缩短和链接：`:vim foo %|co`. 您可以像这样拉出光标下的单词：`:vim <C-r><C-w> %|co`.

这是一个快速的普通模式映射，您可以使用它在 quickfix 窗口中列出光标下所有出现的单词：

```
nnoremap <F6> :vimgrep /<C-r><C-w>/j % <bar> cwindow<cr> 
```

* * *

您还可以使用`:il[ist] foo`显示所有出现的列表`foo`或`[I`为光标下的单词显示相同的列表。

当列表显示时，使用`:{line number}`跳转到相应的行。

# jquery - 如何在 wysihtml5 中切换/删除类

> ID：15906030
> 
> 赞同：1
> 
> 时间：2013-04-09T15:25:46.527
> 
> 标签：jquery, html, wysihtml5

添加新类时，我需要能够从跨度中删除上一个类。

下面是添加跨度和通过按钮传递的类的自定义函数。

```
wysihtml5.commands.custom_underline = {
  exec: function(composer, command, className) {
    return wysihtml5.commands.formatInline.exec(composer, command, "span", className, new RegExp(className, "g"));
  },
  state: function(composer, command, className) {
    return wysihtml5.commands.formatInline.state(composer, command, "span", className, new RegExp(className, "g"));
  }
}; 
```

以下是按钮：

```
<a data-wysihtml5-command="custom_underline" data-wysihtml5-command-value="u grey">Grey</a>
<a data-wysihtml5-command="custom_underline" data-wysihtml5-command-value="u dark_grey">Dark Grey</a>
<a data-wysihtml5-command="custom_underline" data-wysihtml5-command-value="u black">Black</a> 
```

如果我同时单击灰色和深灰色按钮，则会生成以下代码：

```
<span class="u grey u dark_grey">Some text</span> 
```

在添加新的类之前，我需要找到一些方法来删除以前的类。

# r - 应该使用哪种数据结构，可以以自定义方式附加？

> ID：15906031
> 
> 赞同：4
> 
> 时间：2013-04-09T15:25:50.553
> 
> 标签：r

我必须从与多个实验相关的文件中加载数据，然后处理它们以生成绘图。每个实验生成多个文件。与实验 1 相关的文件的名称为“Experiment1”，然后按其包含的数据类型添加后缀，即“Experiment1-per0”、“Experiment1-per50”、“Experiment1-per100”。

这些后缀对于所有实验都是固定的。所以要加载文件，我只想给出实验名称，然后在 R-script 中附加后缀。因此，对于我要给出的每个实验名称“ExperimentX”，我将通过附加后缀来加载三个单独的数据文件（即“ExperimentX-per0”、“ExperimentX-per50”、“ExperimentX-per100”）

**我无法弄清楚，我应该在哪个数据结构中存储初始实验名称，然后是后缀名称。**

示例文件（Experiment1-per50）：

```
# the last column also shows the type of data i.e postfix of file

Obj TGiven  TUsed   TOGiven TOServed    per50

16570   8   7   12  6   per50

18430   8   8   12  9   per50

16890   8   7   12  9   per50 
```

目前，我手动输入每个文件名，这需要很多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:46:27.173

如果每个实验都有相同的后缀集，您可以分别存储实验名称和后缀名称列表。然后，使用嵌套循环，您可以使用该`paste`函数将实验名称和后缀名称组合起来以获取文件名。

您的代码可能如下所示：

```
experiments = c("Experiment1","Experiment2","Experiment3")
suffixes = c("per0","per50","per100")

for (experiment in experiments) {
  for (suffix in suffixes) {
    filename <- paste(experiment, suffix, sep="-")
    df <- read.table(filename)
    df$experiment <- experiment
    # Do something with the dataframe here
  }
} 
```

或者，如果您只想要给定`experiments`和`suffixes`列表中所有文件名的向量，这会将它们组合起来：

```
as.vector(sapply(experiments, paste, suffixes, sep="-")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:16:40.917

# 如果所有列都不同

如果实验之间的列不同，我会将实验包装在列表中，如下所示：

```
library(plyr);
experiments <- c("Experiment1","Experiment2","Experiment3");
suffixes <- c("per0","per50","per100");

# if you want to go ahead and get the data
data <- llply( experiments, function(experiment) {
    llply( suffixes, function(suffix) {
        fn <- str_c(experiment,'_',suffix,'.csv'); # make filename
        # later, try to read fn, now just return
        return(fn);
    })
}) 
```

然后，您可以迭代以`data`进行进一步处理。`llply`是`plyr`包装的一部分。它遍历一个列表（第一个`l`in `llply`）并返回一个列表（第二个`l`）。

# 如果所有列都相同

```
library(plyr);
experiments <- c("Experiment1","Experiment2","Experiment3");
suffixes <- c("per0","per50","per100");

data <- ldply( experiments, function(experiment) {
    ldply( suffixes, function(suffix) {
        data.frame(
           experiment = experiment,
           suffix= suffix,
           fn = str_c(exper.name,'_',suffix,'.csv'))
    })
}) 
```

这会将所有数据读取为单个`data.frame`，然后您可以根据需要对其进行解析（例如，使用`plyr`and/or `subset`）。

# typo3 - 如何从typo3导出xml或json

> ID：15906032
> 
> 赞同：0
> 
> 时间：2013-04-09T15:25:51.280
> 
> 标签：typo3

我需要将内容从typo3 网站导出到网络应用程序。我正在考虑使用 xml 或 json。但我还没有弄清楚该怎么做。

我是typo3开发的新手。所以我想知道是否有人建议如何做到这一点。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:21:05.547

这在很大程度上取决于您的要求；）

作为起点，您可以使用新的页面类型并禁用所有标题代码以生成 XML，例如

```
xml = PAGE
xml {
    typeNum = 123
    config {
        disableAllHeaderCode = 1
        xhtml_cleaning = none
        admPanel = 0
        metaCharset = utf-8 
        additionalHeaders = Content-Type:text/xml;charset=utf-8
    }
    10 = COA
    10 {
        wrap = <?xml version="1.0" encoding="UTF-8" standalone="yes" ?><your_root_tag>|</your_root_tag>
        # add code here to generate xml content
        10 = ...
    }
} 
```

如果您浏览到[http://example.com/index.php?type=123](http://example.com/index.php?type=123)，您将获得 XML 内容。

但是如果事情变得更复杂，编写一个扩展可能是更好的方法。

# c# - 单击图片框时打开一个新表单

> ID：15906033
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:25:52.293
> 
> 标签：c#, picturebox

当用户单击图片框时，我需要在 WinForm 中打开一个新表单（以重定向到信息“窗口”）。

![这是图片框](https://i.stack.imgur.com/Ae3Dx.png)

无论如何，不​​知道如何解决这个问题......所以任何答案/想法都会非常感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:28:12.753

将事件处理程序附加到 PictureBox Clicked 事件并在那里打开您的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:31:22.697

转到图片框的事件处理程序，搜索点击事件并双击它。您现在将收到这样的事件：

```
private void picturebox_click(object sender, EventArgs e)
{

} 
```

下一步是将您的代码添加到其中。

```
private void picturebox_click(object sender, EventArgs e)
{
    YourFormName yourForm = new YourFormName ();
    yourForm.ShowDialog();
} 
```

瞧，你完成了。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T20:56:58.317

你可以这样做，也可以在你的空虚下：

```
new FormNameHere().Show(); 
```

# html - WebRTC 后备

> ID：15906036
> 
> 赞同：3
> 
> 时间：2013-04-09T15:26:07.793
> 
> 标签：html, flash, video-streaming, webrtc

我正在尝试选择正确的方式从浏览器组织会议视频聊天。它应该可以在 iPad/iPhone/Chrome/etc（有时使用 WebRTC，有时不使用 Flash）和 IE/Firefox/etc（有时使用 Flash，有时不使用 WebRTC）上工作。

它是从 Flash 使用 WebRTC 的已知工作解决方案，还是我需要在服务器端组织这样的后备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:35:34.697

Flash 不支持 WebRTC，并且没有第三方库可以做到这一点。您可以尝试找到 WebRTC <-> RTMP 网关来连接您的应用程序。如果没有这样的网关，您仍然可以使用 2 个网关：WebRTC <-> SIP <-> RTMP。

# jquery - 多个提交按钮突然停止发布到服务器上 IE 中的控制器

> ID：15906039
> 
> 赞同：1
> 
> 时间：2013-04-09T15:26:18.083
> 
> 标签：jquery, html, asp.net-mvc

我的视图中有一些提交按钮，并注意到在添加另一个提交按钮后，多个提交按钮已停止发布到控制器。我找不到可以为我指明正确方向的错误消息。

值为 create 的提交按钮工作正常，其值为“Upload”和“Upload Buffer”的提交按钮已停止工作。他们似乎根本没有击中控制器动作。在 Firefox 甚至 Safari 中一切正常。我记得添加的唯一新东西是带有滑块访问的日期时间选择器控制器。这可能会影响提交按钮吗？

**看法**

```
@model RunLog.Domain.Entities.RunLogEntry
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/runLogEntry.js")" type="text/javascript"></script>

<fieldset>
    <legend>Enter a new Run Log Entry</legend>
    @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
    {
        <div id="main">
            @Html.Partial("_RunLogEntryPartialView", Model)
        </div>
    }
</fieldset>
<script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script> 
```

**局部视图**

```
@model RunLog.Domain.Entities.RunLogEntry
<script src="@Url.Content("~/Scripts/runDates.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/errorCode.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/testexception.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/datetime.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-timepicker-addon.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/css/Site.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript">

    var runDatesUrl = '@Url.Action("LogFileConfirmation", "RunLogEntry")';
    var runlogListErrorsUrl = '@Url.Action("ListErrorCodes", "RunLogEntry")';

    function displayDate(e) {
        $('#runDatestreeview :checked').removeAttr('checked');
    }

</script>
@Html.ValidationSummary(true)
<div class="exception">@(ViewBag.ErrorMessage)</div>
<div class="bodyContent">
    <span class="leftContent">Load List File (Select): </span><span class="rightContent">
        <input type="file" name="file" id="file1" style="width: 500px" />
    </span>
</div>
@if (Model.LoadListStoredFileName != null)
{
    <div class="bodyContent">
        <span class="leftContent">Attached Load List: </span><span class="rightContent">
            @Html.ActionLink(Model.LoadListFileName, "Download", new { @file = Model.LoadListStoredFileName })
        </span>
    </div>
}
<div class="bodyContent">
    <span class="leftContent">Output File (Select): </span><span class="rightContent">
        <input type="file" name="file" id="file2" style="width: 500px" />
    </span>
</div>
@if (Model.OutputStoredFileName != null)
{
    <div class="bodyContent">
        <span class="leftContent">Attached Output: </span><span class="rightContent">
            @Html.ActionLink(Model.OutputFileName, "Download", new { @file = Model.OutputStoredFileName })
        </span>
    </div>
}
<div class="bodyContent">
    <span class="leftContent">Log/Zip File: </span><span class="rightContent">
        <input type="file" name="file" id="file3" style="width: 500px" />
    </span>
</div>
@if (Model.AttachedLogFileName != null)
{
    <div class="bodyContent">
        <span class="leftContent">Attached Log File(s): </span><span class="rightContent">
            @Html.ActionLink(Model.LogFileName, "Download", new { @file = Model.LogFileStoredName })
        </span>
    </div>
}
<div class="bodyContent">
    <span class="leftContent">Import Files: </span>
    <button type="submit" id="btn_uploadbuffer" name="submit" value="UploadBuffer" class="art-button"
        style="width: 100px">
        Upload Buffer</button>
    <button type="submit" id="btn_upload" name="submit" value="Upload" class="art-button"
        style="width: 100px">
        Upload Normal</button>
    <button type="submit" id="btn_remove" name="submit" value="Remove" class="art-button"
        style="width: 100px">
        Remove Files</button>
</div>
@*<input name="inputName" type="hidden" id="hiddenInput" value="x" />*@
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Operator")
    </span><span class="rightContent">
        @Html.DropDownList("OperatorID", String.Empty)
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Run ID")
    </span><span class="rightContent">[Generated] </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Run Start Date / Time")
    </span><span class="rightContent">
        @Html.EditorFor(model => model.RunDate)
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("System")
    </span><span class="rightContent">
        @Html.DropDownList("SystemID", String.Empty)
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Run Type")
    </span><span class="rightContent">
        @Html.DropDownList("RunTypeID", String.Empty)
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Run Description")
    </span><span class="rightContent">
        @Html.TextAreaFor(model => model.RunDescription, new { style = "width: 600px; height=30px" })
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Assay Performance Issues")
    </span><span class="rightContent">
        @Html.DropDownList("AssayPerformanceIssues1", ListHelpers.YesNoList())
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Tests/Cycles Requested")
    </span><span class="rightContent">
        @Html.EditorFor(model => model.SPTestsRequested)
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Tests/Cycles Completed")
    </span><span class="rightContent">
        @Html.EditorFor(model => model.SPTestsCompleted)
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Run Status")
    </span><span class="rightContent">
        @Html.DropDownList("RunStatusID", String.Empty)
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Assay")
    </span><span class="rightContent">
        @Html.ListBoxFor(model => model.SelectedAssayIDs, new MultiSelectList(RunLog.Domain.Lists.GlobalList.AssayListItems(), "ID", "Name", Model.SelectedAssayIDs))
    </span>
</div>
<div class="bodyContent">
    @if (Model.RunDatesDisplay != null && Model.RunDatesDisplay.Count() > 0)
    {
        <span class="leftContent">
            @Html.Label("Run Dates")
        </span><span class="rightContent"><span id="RunDatesChildDialogLink" class="treeViewLink">
            Click here to Select/View Run Dates</span>
            <br />
            <span id="RunDatesDisplayy" style="cursor: pointer; text-decoration: underline;">
            </span></span>
    }
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Error Code")
    </span><span class="rightContent"><span id="ChildDialogLink" class="treeViewLink">Click
        here to Select Error Codes</span>
        <br />
        <span id="ErrorCodeDisplay" style="cursor: pointer; text-decoration: underline;">@(Model.ErrorDescription)</span>
        @Html.HiddenFor(model => model.ErrorDescription)
    </span>
</div>
<div id="treeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px; display: none;">
    <div id="errorCodes">
        @*  @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")*@
        @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), Model.ErrorCodes, "error")
    </div>
    <div id="inputReps" style="display: none;">
    </div>
</div>
<div class="bodyContent">
    @if (Model.TestExceptionDisplay != null && Model.TestExceptionDisplay.Count() > 0)
    {
        <span class="leftContent">
            @Html.Label("Test Exceptions")
        </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">
            Click here to View Test Exceptions</span>
            <br />
            <span id="TestExceptionDisplayy"></span></span>
    }
</div>
<div id="testExceptiontreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px; display: none;">
    <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
        <thead>
            <tr>
                <th>
                    Exception
                </th>
                <th>
                    Frequency
                </th>
                <th>
                    Comment
                </th>
                <th>
                    Replicate Range
                </th>
            </tr>
        </thead>
        <tbody>
            @if (Model.TestExceptionDisplay != null)
            {
                @Html.EditorFor(x => x.TestExceptionDisplay)
            }
        </tbody>
    </table>
</div>
<div id="runDatestreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 400px; height: 450px; display: none;">
    <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
        <thead>
            <tr>
                <th>
                    Run Dates
                </th>
                <th>
                    Frequency
                </th>
                <th>
                    Min Replicate
                </th>
                <th>
                    Max Replicate
                </th>
            </tr>
        </thead>
        <tbody>
            @Html.EditorFor(x => x.RunDatesDisplay)
        </tbody>
    </table>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Service Entry Request")
    </span><span class="rightContent">
        @Html.DropDownList("ServiceRequest", ListHelpers.YesNoList())
    </span>
</div>
<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Problem Description")
    </span><span class="rightContent">
        @Html.TextArea("ProblemDescription", new { style = "width: 600px; height: 30px" })
    </span>
</div>
@if (Model.UserRole == "Admin" || Model.UserRole == "SuperUser")
{
    <div class="bodyContent">
        <span class="leftContent">
            @Html.Label("Active")
        </span><span class="rightContent">
            @Html.CheckBoxFor(model => model.Active)
        </span>
    </div>
}
else
{
    @Html.HiddenFor(model => model.Active)
}
<p>
    <input id="LogType" type="hidden" value="Run" />
    <input id="ID" type="hidden" value="0" />
    @if (Model.ExitCode == "1")
    {
        @Html.Hidden("ExitCode", Model.ExitCode)
    }
    else
    {
        <input id="ExitCode" type="hidden" value='0' />
    }
    @if (Model.LogFileModal == "1")
    {
        <input id="LogModals" type="hidden" value='0' />
    }
    else
    {
        <input id="LogModal" type="hidden" value='1' />
    }
</p>
@Html.HiddenFor(model => model.MaxReplicateId)
@Html.HiddenFor(model => model.MinReplicateId)
@Html.HiddenFor(model => model.OutputFileName)
@Html.HiddenFor(model => model.OutputStoredFileName)
@Html.HiddenFor(model => model.LoadListFileName)
@Html.HiddenFor(model => model.LoadListStoredFileName)
@Html.HiddenFor(model => model.LogFileName)
@Html.HiddenFor(model => model.LogFileStoredName)
@Html.HiddenFor(model => model.AttachedLogFileName)
@Html.HiddenFor(model => model.AttachedMultipleLogFileNames)
@Html.HiddenFor(model => model.MinTestCompletionDate)
@Html.HiddenFor(model => model.MaxTestCompletionDate)
@Html.HiddenFor(model => model.RunLogMode)
@Html.HiddenFor(model => model.UserRole)
@Html.HiddenFor(model => model.Active)
@Html.HiddenFor(model => model.ParseType)
<div class="bodyContent">
    <span class="leftContent"></span><span class="rightContent">
        <button id="btn_create" name="submit" class="art-button" type="submit" value="Create">
            Create</button></span>
</div> 
```

**控制器动作**

```
[HttpPost]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create(RunLogEntry runLogEntry, String ServiceRequest, string Hour, string Minute, string AMPM,
                                 string submit, IEnumerable<HttpPostedFileBase> file, String AssayPerformanceIssues1, List<string> Replicates)
    { 
```

# java - Java AES/CFB8/NoPadding 加密和字符集

> ID：15906041
> 
> 赞同：3
> 
> 时间：2013-04-09T15:26:25.680
> 
> 标签：java, encryption, character-encoding, aes

我正在尝试`Strings`在 Java 和 PHP 中进行加密和解密，所以我`AES/CFB8/NoPadding`在双方都使用了该工作。

现在`Cryptor`，只要我将字符集设置为拉丁语，我的作品就可以很好地使用拉丁字符。但是当我将它设置为 UTF-8（这是我在我的数据库中使用的）时，加密没有正确完成。

这是输出：

```
/*
* Latin (ISO-8859-1) output:
* Original: MiiiMüäöMeeʞ
* Encoded: rQ¶[ÉÐRíD
* Decoded: MiiiMüäöMee?
* 
* UTF-8 output:
* Original: MiiiMüäöMeeʞ
* Encoded: rQ�[�
* Decoded: Mii0SS1])_�EǇI�S�;�W��W?*
*/ 
```

由于“ʞ”不是拉丁字符，我知道它不能正确加密。但是为什么 UTF-8 不起作用呢？

```
public class Cryptor {

    private Cipher cipher;
    private String secretKey = "1234567890qwertz";
    private String iv = "1234567890qwertz";

    private SecretKey keySpec;
    private IvParameterSpec ivSpec;
    private Charset CHARSET = Charset.forName("ISO-8859-1"); // ISO-8859-1 vs. UTF-8

    public Cryptor() throws CryptingException {

        keySpec = new SecretKeySpec(secretKey.getBytes(CHARSET), "AES");
        ivSpec = new IvParameterSpec(iv.getBytes(CHARSET));
        try {
            cipher = Cipher.getInstance("AES/CFB8/NoPadding");
        } catch (NoSuchAlgorithmException e) {
            throw new SecurityException(e);
        } catch (NoSuchPaddingException e) {
            throw new SecurityException(e);
        }
    }

    public String decrypt(String input) throws CryptingException {

        try {
            cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
            return new String(cipher.doFinal(input.getBytes(CHARSET)), CHARSET).trim();
        } catch (IllegalBlockSizeException e) {
            throw new SecurityException(e);
        } catch (BadPaddingException e) {
            throw new SecurityException(e);
        } catch (InvalidKeyException e) {
            throw new SecurityException(e);
        } catch (InvalidAlgorithmParameterException e) {
            throw new SecurityException(e);
        }
    }

    public String encrypt(String input) throws CryptingException {
        try {
            cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec);
            return new String(cipher.doFinal(input.getBytes(CHARSET)), CHARSET).trim();
        } catch (InvalidKeyException e) {
            throw new SecurityException(e);
        } catch (InvalidAlgorithmParameterException e) {
            throw new SecurityException(e);
        } catch (IllegalBlockSizeException e) {
            throw new SecurityException(e);
        } catch (BadPaddingException e) {
            throw new SecurityException(e);
        }
    }

    public static void main(String Args[]) {

        try {
            Cryptor c = new Cryptor();
            String original = "MiiiMüäöMeeʞ";
            System.out.println("Original: " + original);
            String encrypted = c.encrypt("MiiiMüäöMeeʞ");
            System.out.println("Encoded: " + encrypted);
            System.out.println("Decoded: " + c.decrypt(encrypted));

        } catch (CryptingException e) {
            e.printStackTrace();
        }
    }

    class CryptingException extends RuntimeException {

        private static final long serialVersionUID = 7123322995084333687L;

        public CryptingException() {
            super();
        }

        public CryptingException(String message) {
            super(message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T15:34:27.483

我认为将加密字节转换为 a`String`是一个坏主意。字节对任何编码都无效，它们是随机的。

您需要将结果编码`byte[]`为 base64 以获得一致的结果。见`sun.misc.BASE64Encoder`/ `sun.misc.BASE64Decoder`。

[这](https://stackoverflow.com/questions/469695/decode-base64-data-in-java)是一个将 base64 解码为 a 的示例`String`，`byte[]`反向过程非常相似。

您可以声明解码器/编码器和类的顶部：

```
private final BASE64Decoder base64Decoder = new BASE64Decoder();
private final BASE64Encoder base64Encoder = new BASE64Encoder(); 
```

然后在你的`decypt`方法中你需要调用

```
return new String(cipher.doFinal(base64Decoder.decodeBuffer(input)), CHARSET); 
```

在你的`encrypt`方法中

```
return base64Encoder.encode(cipher.doFinal(input.getBytes(CHARSET))); 
```

使用 UTF-8 输出：

```
Original: MiiiMüäöMeeʞ
Encoded: clEUtlv2ALXsKYw4ivOfwQ==
Decoded: MiiiMüäöMeeʞ 
```

附带说明的是，从*严格意义上讲*，使用包并不是一种好的做法，`sun.*`因为它们不是 Java 规范的一部分，因此可能会随着版本的不同而改变/消失。

[这](http://www.asgarli.net/2011/03/replacing-sunmiscbase64encoder-and.html)是一篇关于迁移到 Apache Commons Codec 实现的小文章。
这也是Guava API 中的[一个类似的](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/BaseEncoding.html)类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:06:01.210

非常感谢这个答案，它真的帮助了我很多。

这是我用来加密和解密 JAVA 和 PHP 中的 JSON 内容的工作代码：

**JAVA**

```
/**
 * Is used for encrypting and decrypting Strings and JSONObjects. <br>
 * The JSON Objects can then be sent to a PHP script where they can be encrypted and decrypted with the same algorithm. 
 * @throws CryptingException
 */
public class Cryptor {

    private Cipher cipher;
    private String secretKey = "1234567890qwertz";
    private String iv = "1234567890qwertz";
    private final String CIPHER_MODE = "AES/CFB8/NoPadding";

    private SecretKey keySpec;
    private IvParameterSpec ivSpec;
    private Charset CHARSET = Charset.forName("UTF8");

    public Cryptor() throws CryptingException {
        keySpec = new SecretKeySpec(secretKey.getBytes(CHARSET), "AES");
        ivSpec = new IvParameterSpec(iv.getBytes(CHARSET));
        try {
            cipher = Cipher.getInstance(CIPHER_MODE);
        } catch (NoSuchAlgorithmException e) {
            throw new SecurityException(e);
        } catch (NoSuchPaddingException e) {
            throw new SecurityException(e);
        }
    }

    /**
     * @param input A "AES/CFB8/NoPadding" encrypted String
     * @return The decrypted String
     * @throws CryptingException
     */
    public String decrypt(String input) throws CryptingException {
        try {
            cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
            return new String(cipher.doFinal(DatatypeConverter.parseBase64Binary(input))); 
        } catch (IllegalBlockSizeException e) {
            throw new SecurityException(e);
        } catch (BadPaddingException e) {
            throw new SecurityException(e);
        } catch (InvalidKeyException e) {
            throw new SecurityException(e);
        } catch (InvalidAlgorithmParameterException e) {
            throw new SecurityException(e);
        }
    }

    /**
     * @param input Any String to be encrypted
     * @return An "AES/CFB8/NoPadding" encrypted String
     * @throws CryptingException
     */
    public String encrypt(String input) throws CryptingException {
        try {
            cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec);
            return DatatypeConverter.printBase64Binary(cipher.doFinal(input.getBytes(CHARSET))).trim();
        } catch (InvalidKeyException e) {
            throw new SecurityException(e);
        } catch (InvalidAlgorithmParameterException e) {
            throw new SecurityException(e);
        } catch (IllegalBlockSizeException e) {
            throw new SecurityException(e);
        } catch (BadPaddingException e) {
            throw new SecurityException(e);
        }
    }

    /**
     * Encrypts the keys and values of a JSONObject with Cryptor.encrypt(String input)
     * @param o The JSONObject to be encrypted
     * @return A JSONObject with encrypted keys and values
     */
    public JSONObject jsonObjectEncrypt(JSONObject o) {
        Iterator<?> keys = o.keys();
        JSONObject returnObject = new JSONObject();
        while( keys.hasNext() ){
            String key = (String)keys.next();
            returnObject.put(this.encrypt(key), this.encrypt(o.getString(key)));
        }
        return returnObject;
    }

    /**
     * Decrypts the keys and values of a JSONObject with Cryptor.decrypt(String input)
     * @param o The JSONObject to be decrypted
     * @return A JSONObject with decrypted keys and values
     */
    public JSONObject jsonObjectDecrypt(JSONObject o) {
        Iterator<?> keys = o.keys();
        JSONObject returnObject = new JSONObject();
        while(keys.hasNext()){
            String key = (String)keys.next();
            if(key != null && !key.equals("")) {
                returnObject.put(this.decrypt(key), this.decrypt(o.getString(key)));
            }
        }
        return returnObject;
    }

    /**
     * Encrypts keys and values of every JSONObject in a JSONArray
     * @param a The JSONArray to be encrypted
     * @return A JSONArray with encrypted keys and values
     */
    public JSONArray jsonArrayEncrypt(JSONArray a) {
        JSONArray returnArray = new JSONArray();

        for(int i = 0; i < a.length(); i++) {
            returnArray.put(this.jsonObjectEncrypt((JSONObject)a.get(i)));
        }
        return returnArray;
    }

    /**
     * Decrypts keys and values of every JSONObject in a JSONArray
     * @param a The JSONArray to be decrypted
     * @return A JSONArray with decrypted keys and values
     */
    public JSONArray jsonArrayDecrypt(JSONArray a) {
        JSONArray returnArray = new JSONArray();

        for(int i = 0; i < a.length(); i++) {
            returnArray.put(this.jsonObjectDecrypt((JSONObject)a.get(i)));
        }
        return returnArray;
    }

    public static void main(String Args[]) {
        try {
            Cryptor c = new Cryptor();
            String original = "MiiiMüäöMeeʞ";
            System.out.println("Original: " + original);
            String encrypted = c.encrypt(original);
            System.out.println("Encoded: " + encrypted);
            System.out.println("Decoded: " + c.decrypt(encrypted));

            JSONArray arr = new JSONArray("[{\"id\"=\" 1 ʞ3 \"},{\"id\"=\"4\"}]");

            System.out.println(c.jsonArrayDecrypt(c.jsonArrayEncrypt(arr)).getJSONObject(0).getString("id"));

        } catch (CryptingException e) {
            e.printStackTrace();
        }
    }
} 
```

**PHP**

```
<html>
    <meta charset='utf-8'> 
    <?php
    $cryptor = new Cryptor();
    echo $cryptor->decrypt($cryptor->encrypt("MiiiMüäöMeeʞ"));

    class Cryptor {
        //Use same as in java Cryptor
        private $iv = '1234567890qwertz';
        private $secretKey = '1234567890qwertz'; 

        function encrypt($input) {
            return base64_encode(
            mcrypt_encrypt( 
                MCRYPT_RIJNDAEL_128,
                $this->secretKey,
                $input,  
                MCRYPT_MODE_CFB,
                $this->iv
            )
            );
        }

        function decrypt($input) {
          return mcrypt_decrypt(
            MCRYPT_RIJNDAEL_128, 
            $this->secretKey, 
            base64_decode($input), 
            MCRYPT_MODE_CFB, 
            $this->iv
          );
        }

        function arrayDecrypt($array) {
            $returnArray = array();

            foreach($array as $key=>$value) {
                $newKey = $this->decrypt($key);
                $returnArray[$newKey] = $this->decrypt($value);
            }       

            return $returnArray;
        }

        function arrayEncrypt($array) {
            $returnArray = array();

            foreach($array as $key=>$value) {
                $returnArray[$this->encrypt($key)] = $this->encrypt($value);
            }       

            return $returnArray;
        }
    }
    ?>
</html> 
```

# android - 资产文件夹中的图像 - 将图像设置为 imageView 时出现内存不足异常

> ID：15906042
> 
> 赞同：0
> 
> 时间：2013-04-09T15:26:29.620
> 
> 标签：android, android-imageview, out-of-memory, android-assets

我有简单的代码（将图像从资产文件夹添加到 imageView）：

```
InputStream path = getAssets().open("z1_1.jpg");
Bitmap bit = BitmapFactory.decodeStream(path);
imageView.setImageBitmap(bit); 
```

当此代码执行时，它会抛出错误：

```
FATAL EXCEPTION: main
01-10 05:24:32.492: E/AndroidRuntime(2303): java.lang.OutOfMemoryError 
```

任何建议问题出在哪里？

# javascript - Foundation Orbit 未初始化

> ID：15906044
> 
> 赞同：4
> 
> 时间：2013-04-09T15:26:37.910
> 
> 标签：javascript, orbit

我正在使用 Foundation 4 框架。我一直试图将 Orbit 幻灯片包含到我的网站中，但我似乎无法让它工作。

所以我按照[Foundation 文档](http://foundation.zurb.com/docs/components/orbit.html)中的步骤进行操作。我已经包含了所有必要的脚本

```
<script type="text/javascript" src="js/vendor/custom.modernizr.js"></script>
<script type="text/javascript" src="js/foundation.min.js"></script>
<script type="text/javascript" src="js/foundation/foundation.orbit.js"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script>
       $(document).foundation();
</script> 
```

然后我尝试添加一个简单的幻灯片

```
<ul data-orbit>
       <li>
              Test1
       </li>
       <li>
              Test2
       </li>
       <li>
              Test3
       </li>
</ul> 
```

但是，我得到的不是生成幻灯片，而是一个未编号的列表。我三次检查以确保我没有拼错任何东西。[这](http://i.imgur.com/X58nYK3.png)是我得到的一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T20:51:39.867

根据我的经验，基金会的脚本有点乱，所以尝试执行以下操作：

1.  将modernizr放在里面 `<head>`
2.  在标签`<body>`之前的末尾引用以下js ：`</body>`

    ```
    <script>
      document.write('<script src=' +
      ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
      '.js><\/script>')
    </script>
    <script src="js/foundation.min.js"></script>
    <script>
        $(document).foundation(); 
    </script> 
    ```

这样，您在现代浏览器中加载 Zepto，在旧浏览器中加载 jquery，然后加载 Foundation，然后告诉文档获取格式。不需要加载轨道 js，因为它在 Foundation 的最小版本中。

该代码记录在[http://foundation.zurb.com/docs/javascript.html](http://foundation.zurb.com/docs/javascript.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T17:57:47.090

我也有这个问题。

ezabaw 使用的**prot修复对我有用。**

此功能需要 orbit.js。

卡萨

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T11:00:28.583

丹和 TCASA 是对的。不要忘记`foundation.orbit.js`。这是必不可少的。

所以把它放在`</body>`结束标签之前：

```
<script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
  '.js><\/script>')
</script>
<script src="js/foundation.js"></script>
<script src="js/foundation.orbit.js"></script>   // <-- Don't forget this one
<script>
    $(document).foundation();
</script> 
```

确保路径也正确。我将 Foundation 与 Compass 结合使用，因此我的路径是：js/foundation/foundation.js 和 js/foundation/foundation.orbit.js。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-19T14:16:45.800

有一个更简单的方法。Slider 需要在页面完全加载后初始化。

对我来说，在其他答案中遵循所有上述步骤之后，以下工作

```
<script>
    $(document).ready(function() {   $(document).foundation(
    //add custom options to orbit
     'orbit', {
     animation: 'slide',
     timer_speed: 1000,
     pause_on_hover: true,
     animation_speed: 500,
     navigation_arrows: true,
     bullets: true

    );});
</script> 
```

可以在此处找到其他自定义选项[Link to Foundation Docs](http://foundation.zurb.com/docs/components/orbit.html)

一个工作示例在[这里](http://www.foundation-to-contao.de/)（帮助我解决了这个问题）

# php - Doctrine2 Paginator 获得总结果

> ID：15906051
> 
> 赞同：22
> 
> 时间：2013-04-09T15:26:54.380
> 
> 标签：php, doctrine-orm, pagination

我马上会说，我读了这个问题[Doctrine2 Paginator](https://stackoverflow.com/questions/10106695/doctrine2-paginator)，但它没有给我足够的关于我的问题标题的信息。

当我使用 Doctrine1 时，我得到了这样的代码的结果，例如：

```
$list = $this->query
    ->addSelect( 'SQL_CALC_FOUND_ROWS *' )
    ->offset( ( $this->currentPage - 1 ) * $this->perPage )
    ->limit( $this->perPage )
    ->execute( array(), \Doctrine_Core::HYDRATE_ARRAY_SHALLOW );

$totalRecords     = SqlCalcFoundRowsEventListener::getFoundRowsCount();
$this->totalPages = ceil( $totalRecords / $this->perPage ); 
```

这很棒。

现在，当使用 Doctrine2 时，我对如何获取与当前页面的有限结果具有相同查询的记录总数感到困惑。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-11T09:53:23.860

分页器的用法如下：

```
$paginator  = new \Doctrine\ORM\Tools\Pagination\Paginator($query);

$totalItems = count($paginator);
$pagesCount = ceil($totalItems / $pageSize);

// now get one page's items:
$paginator
    ->getQuery()
    ->setFirstResult($pageSize * ($currentPage-1)) // set the offset
    ->setMaxResults($pageSize); // set the limit

foreach ($paginator as $pageItem) {
    echo "<li>" . $pageItem->getName() . "</li>";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-16T00:00:17.667

或其他一些循环：

```
 for ($i=0; $i < $pagesCount; $i++) {
        if ($currentPage == ($i+1)) {
            $pagination1 .= '<li class="active"><a href="'.\URL::current().'?pagina='.($i+1).'" title="">'.($i+1).'</a></li>';
        }else{
            $pagination1 .= '<li><a href="'.\URL::current().'?pagina='.($i+1).'">'.($i+1).'</a></li>';
        }   
    } 
```

# android - 如何在 Android 上正确缩进 XML？

> ID：15906054
> 
> 赞同：0
> 
> 时间：2013-04-09T15:27:03.820
> 
> 标签：android, xml, indentation

基于 StackOverflow 上的几个示例，我有以下用于缩进 XML 的代码。我有一个源 xml 文件`String`。然而，输出没有缩进，但它也没有给出任何错误。在调试器中检查输出，并且不包含任何可能被错误呈现并因此被忽略的字符，如空格或制表符。

```
String input = "xmldata";
Source xmlInput = new StreamSource(new StringReader(input));

StringWriter stringWriter = new StringWriter();
StreamResult xmlOutput = new StreamResult(stringWriter);
TransformerFactory transformerFactory = TransformerFactory.newInstance();

Transformer transformer = transformerFactory.newTransformer();

transformer.setOutputProperty(OutputKeys.ENCODING, "utf-8");
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
transformer.transform(xmlInput, xmlOutput);
return stringWriter.toString(); 
```

我也尝试设置`indent-amount`为`"2"`，但是应用程序会抱怨未知属性。可能这在Android中没有实现。

我在这里做错了吗？是否有其他选项可以从源 xml 字符串生成缩进的 xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:57:25.783

你可以尝试这样的事情：

```
String input = "xmldata";
InputSource is = new InputSource(new StringReader(input));
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
Document doc = dbf.newDocumentBuilder().parse(is);
System.out.println(prettyPrint(doc));

public static final String prettyPrint(Node xml) throws TransformerConfigurationException, TransformerFactoryConfigurationError, TransformerException {
    StringWriter stringWriter = new StringWriter();
    StreamResult out = new StreamResult(stringWriter);

    Transformer tf = TransformerFactory.newInstance().newTransformer();
    tf.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
    tf.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    tf.setOutputProperty(OutputKeys.INDENT, "yes");
    tf.transform(new DOMSource(xml), out);
    return out.getWriter().toString();
} 
```

# ajax - Ajax 从成功函数中检索数据

> ID：15906058
> 
> 赞同：1
> 
> 时间：2013-04-09T15:27:13.173
> 
> 标签：ajax, forms, jquery

我正在通过 Ajax 提交表单，并且我想在提交表单时将项目名称添加到列表项中。除了在成功函数中提取所需的信息外，一切正常。正在发布数据[项目][项目名称]。如何在成功函数中获取项目名称？现在“数据”正在列表中显示。我的表单中只有一个文本框。

```
<script type="text/javascript">
    $(document).ready(function () {     
        var frm = $('#ProjectAddForm');
        frm.submit(function() {
            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                data: frm.serialize(),
                success: function(data) {
                    $('#ProjectProjectName').val('');
                    $('#ProjectList').prepend("<li style='color: green;'>data</li>");

                }
            })
        });
        return false;               
    });
</script> 
```

HTML：

```
<ul id="ProjectList">
            <?php foreach ($projects as $project): ?>                       
                <li><?php echo $project['Project']['project_name']; ?></li>
            <?php endforeach; ?>
            <?php unset($project); ?>
        </ul>

<form accept-charset="utf-8" method="post" onsubmit="event.returnValue = false; return false;" id="ProjectAddForm" action="/callLog/projects/add"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:40:18.550

我需要在请求中添加一个 dataType: 'json'。

```
<script type="text/javascript">
    $(document).ready(function () {     
        var frm = $('#ProjectAddForm');
        frm.submit(function() {
            $.ajax({
                type: frm.attr('method'),                   
                url: "<?php echo $this->Html->Url(array('controller' => 'projects', 'action' => 'add.json')); ?>",
                data: frm.serialize(),
                dataType: 'json',
                success: function(data) {
                    $('#ProjectProjectName').val('');
                    $('#ProjectList').prepend("<li class='icon-remove', style='color: green;'>" + data.projectName + "</li>");
                    $('#modalProject').modal('hide');
                }
            })
        });
        return false;               
    });
</script> 
```

# ios - 从导航栏 locationButton 更新所有视图中的当前位置

> ID：15906066
> 
> 赞同：0
> 
> 时间：2013-04-09T15:27:36.870
> 
> 标签：ios, core-location, cllocationmanager, nsnotificationcenter, appdelegate

我有一个自定义导航栏，带有一个在每个视图中都可见的 locateButton

![在此处输入图像描述](https://i.stack.imgur.com/03E8p.png)

当用户点击 locateButton 时，我想在每个视图上更新 lat 和 long。我使用以下代码一次在一个视图中工作。

```
ViewController.m

- (UIBarButtonItem *)locateButton {
    [locationButton addTarget:self action:@selector(locationPressed:) forControlEvents:UIControlEventTouchUpInside];       
} 

- (IBAction)locationPressed:(id)sender {
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];
}

#pragma mark - CLLocationManagerDelegate

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError: %@", error);
    UIAlertView *errorAlert = [[UIAlertView alloc]
                               initWithTitle:@"Error" message:@"Failed to Get Your Location" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"didUpdateToLocation: %@", newLocation);
    CLLocation *currentLocation = newLocation;

    if (currentLocation != nil) {
        latLabel.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.longitude];
        longLabel.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.latitude];
    }

    // Stop Location Manager
    [locationManager stopUpdatingLocation];

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            addressLabel.text = [NSString stringWithFormat:@"%@, %@",
                                 placemark.locality,
                                 placemark.administrativeArea];
            addressLabel.numberOfLines = 0;

        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ]; 
```

我正在尝试添加一个单例来完成此操作。

在位置.h

```
//  Location.h

#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface Location : NSObject <CLLocationManagerDelegate>

@property (nonatomic, strong) CLLocationManager* locationManager;

+ (Location*)sharedSingleton;

@end 
```

然后在 Location.M

```
//  Location.m

#import "Location.h"

@implementation Location

@synthesize locationManager;

- (id)init {
    self = [super init];

    if(self) {
        self.locationManager = [CLLocationManager new];
        [self.locationManager setDelegate:self];
        [self.locationManager setDistanceFilter:kCLDistanceFilterNone];
        [self.locationManager setHeadingFilter:kCLHeadingFilterNone];
        [self.locationManager startUpdatingLocation];
        self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
        //do any more customization to your location manager
    }

    return self;
}

+ (Location*)sharedSingleton {
    static Location* sharedSingleton;
    if(!sharedSingleton) {
        @synchronized(sharedSingleton) {
            sharedSingleton = [Location new];
        }
    }

    return sharedSingleton;
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"didUpdateToLocation: %@", newLocation);
    [locationManager stopUpdatingLocation];

} 
```

@结尾

如何让我`- (IBAction)locationPressed:(id)sender`在另一个视图`HomeViewController.m`中调用这个 locationManager 方法并更新单例值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:08:32.893

您可能会考虑将单例作为您的位置经理和位置经理代表。有一堆关于创建像这样的单例的stackoverflow问题：[iOS 5中的单例？](https://stackoverflow.com/questions/8796529/singleton-in-ios-5).

然后，当您的用户单击该按钮时，您的单例类将被调用并更新，其他视图将查看同一个单例以获取其位置信息。

# gwt - GWT UIBinder 中的动态嵌套无序列表

> ID：15906068
> 
> 赞同：3
> 
> 时间：2013-04-09T15:27:37.570
> 
> 标签：gwt, uibinder

我正在尝试在 GWT UIBinder 中实现一个简单的基于 CSS 的菜单，但是我在某个特定部分遇到了一些困难。

该菜单有两个主要级别的项目：“新会话”和“当前会话”。当用户单击“新会话”时，应将一个新列表项添加到“当前会话”下的子列表中。

这是菜单的纯 HTML 版本：

```
<div id="cssmenu">
    <ul>
        <li>New Session</li>
        <li class="has-sub">Current Sessions
          <ul>
             <li>Session 1</li>
             <li>Session 2</li>
          </ul>
       </li>
    </ul>
</div> 
```

基本格式在 UIBinder 中实现起来非常简单，但动态子列表给我带来了困难。

这是我想出的基本 UIBinder 模板：

XML：

```
<!-- Menu.ui.xml -->
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder' xmlns:g='urn:import:com.google.gwt.user.client.ui'>
    <g:HTMLPanel id="cssmenu" ui:field="menuDiv">
        <ul>
            <li ui:field="newSessionItem">New Session</li>
            <li class="has-sub" ui:field="currentSessionItem">
                Current Sessions
                <ul id="currentSessionSublist" ui:field="currentSessionSublistItem">
                    <li>Session 1</li>
                    <li>Session 2</li>
                </ul>
            </li>
        </ul>
    </g:HTMLPanel>
</ui:UiBinder> 
```

爪哇：

```
// Menu.java
public class Menu extends UIObject {
    interface MenuBinder extends UiBinder<DivElement, Menu> {}
    private static MenuBinder uiBinder = GWT.create(MenuBinder.class);

    @UiField HTMLPanel menuDiv;
    @UiField LIElement newSessionItem;
    @UiField LIElement currentSessionItem;
    @UiField UListElement currentSessionSublistItem;

    public Menu() {
        setElement(uiBinder.createAndBindUi(this));
    }

    @UiHandler("newSessionItem")
    void handleClick(ClickEvent e) {
        addCurrentSession();
    }

    private void addCurrentSession() {
        // dynamic LI should be added here
    }
} 
```

我不确定如何在`addCurrentSession()`. 我尝试添加一个可编译为`<li>`元素的自定义小部件，但无法使用`RootPanel.get("currentSessionSublist").add(item)`. 我在某处读到，虽然可以将 HTML 和小部件嵌套在 HTMLPanel 中，但小部件不能嵌套在 HTML 中。如果是这种情况，我将如何将项目添加到子列表中？我希望采用小部件路线，以便以后可以添加以编程方式删除特定列表项的功能。

我不想使用 GWT 的 Menu、MenuItem 等，因为它们会编译成表格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-20T14:54:05.607

试试这个动态添加一个项目到列表（有序/无序）：

```
final LIElement listItem = Document.get().createLIElement();
listItem.setInnerText("your text"); // or setInnerHTML("...")
this.currentSessionSublistItem.appendChild(listItem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:37:08.473

关键是要通过`HTMLPanel`：

```
menuDiv.add(item, currentSessionSublistItem); 
```

# jquery - 选择点击事件的第三列

> ID：15906069
> 
> 赞同：0
> 
> 时间：2013-04-09T15:27:38.207
> 
> 标签：jquery

我有一个数据表，它在前两个列中呈现两个图像按钮

```
<tr>
  <td>Button 1
  <td>Button 2
</tr>
<tr>
  <td>Value<td/> 
```

我正在尝试使用以下方法捕获相应点击的值：

```
 $('[id$=releaseMessage]').click(function () {
                alert($('td:eq(2)', this).html());
            });

            $('[id$=deleteMessage]').click(function () {
                alert($('td:eq(2)', this).html());
            }); 
```

每行的值都不同，所以我可以使用这样的东西：

```
 tr:eq(0) td:first-child 
```

因为这将始终返回第一个 td 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:48:15.253

一些东西：

*   `IDs` ***必须***是独一无二的！改用类。

*   由于两个点击事件都做同样的事情，所以在选择器中组合这两个类（使用逗号）。 `$('.releaseMessage, .deleteMessage').click()`.

*   旁注：我建议使用[`console.log()`](https://stackoverflow.com/questions/4743730/what-is-console-log-and-how-do-i-use-it)而不是`alert()`.

JAVASCRIPT：

```
$(document).ready(function(){
    $('.releaseMessage, .deleteMessage').click(function(){
        alert($(this).closest('tr').children().eq(2).html());
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/tcyuF/3/](http://jsfiddle.net/dirtyd77/tcyuF/3/)

* * *

解释：

`$(this)`指被点击的元素（在这种情况下是锚点，`a`）
[`.closest()`](http://api.jquery.com/closest/)找到最接近`tr`
[`.children()`](http://api.jquery.com/children/)的获取子`tr`
[`.eq()`](http://api.jquery.com/eq/)元素标识元素的位置（使用索引）

希望这会有所帮助，如果您有任何问题，请告诉我！

# oracle11g - 使用 Oracle 和 Report Studio 构建数据分析报告

> ID：15906071
> 
> 赞同：1
> 
> 时间：2013-04-09T15:27:44.947
> 
> 标签：oracle11g, cognos

我在这个网站上使用了一段时间的信息，现在有一个大型项目，我需要你的一些专业知识。我在 Oracle 11g 环境中工作，并且还拥有 Cognos Report Studio 10.1

我正在构建一个多选项卡报表，显示一个部门的出站订单分析。我创建了一个包含大约 30 列数据的自定义表。从这里开始，每天必须在桌子上执行超过 150 次计算。这些计算的一个例子是
1) 今天收到了多少订单？
2) 今天收到的订单，有多少是当天发货的？
3) 有多少订单被搁置？

核心表上基本上有 100 个 4-5 行查询。我考虑过创建第二个表并使用 WITH 子句，在过程中执行计算并插入表中。

为了解决这个问题，是否有人编写了执行大量计算的程序/包，是否有任何可以建议的链接/网页？我的搜索没有让我找到任何创建这种性质的报告的例子，我想确保我的方法尽可能有效。提前感谢您提供任何信息/资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:13:59.973

表和存储过程是个好主意。一些注意事项：您是否每天都归档这些事实。

即，您希望能够查找 5 天前暂停的订单，还是 150 个问题中的所有数据仅与当前日期相关？

您可以有一个包含 150 列的表格，每个问题对应一个列。如果您正在归档数据并且每天需要一条记录，这可能是有意义的。

另一种方法是创建一个只有两个或三个字段的订单事实表：

```
Fact_Name        VARCHAR2(30)
Order_Fact       NUMBER(10,2)
Last_Update_Date DATE 
```

您的 oracle 存储过程将一次查询和更新一个事实：

```
insert into ORDER_FACTS
select "ORDERS_RECEIVED" fact_name, count(*) order_fact, sysdate
from   ORDER_TABLE
where  rcv_date = trunc(sysdate);

commit; 
```

如果您只想为每个事实保留一个记录，则可以进行更新。

如果您的某些问题的答案不是数字，您可能需要为 VARCHAR2 类型的事实保留一个单独的表。

如果你喜欢这个解决方案的声音，我明天可以设置一个示例程序。

编辑：

由于您要存储 30 天的数据，我将在 Date 详细信息级别创建表，并有 1 列来存储每个结果。在我的示例中，我只包含了 3 列，以便您了解这个想法。首先，创建表来保存您的订单事实。

```
create table order_facts
( DT               DATE,
  ORD_RCV          NUMBER,
  SAME_DAY_SHIPPED NUMBER,
  ON_HOLD          NUMBER); 
```

我建议 DT 字段单独存储日期。这将使该表更容易与您的日历表连接，如果它们基于星型模式中带有日历的表，您可以使用它轻松地将这些事实连接到其他报告。

接下来，创建更新它们的过程：

```
CREATE OR REPLACE PROCEDURE CALC_ORDER_FACTS ( iDate date := trunc(sysdate), iPurgeDays number := 0)
IS
  ddate DATE;
  dummy DATE;
/*
      Calc_order_facts
      Date          Author  Note
      04/11/2013    XXX     Created this procedure

  Param iDate (optional, default trunc(sysdate)
    Specify Date to calculate order facts for

  Param iPurgeDays number (optional, default 0)
    Specify how many days to retain data.  Data older than iPurgeDays will be deleted.
    If 0, purging is disabled.

*/

BEGIN
    ddate := iDate;

    IF iPurgeDays > 0 THEN
        dbms_output.put_line('Purging data more than ' || to_char(iPurgeDays) || ' days old.');
        begin
            delete ORDER_FACTS
            where DT < trunc(ddate-iPurgeDays);
            commit;
        EXCEPTION
         WHEN NO_DATA_FOUND THEN
            dbms_output.put_line('Purge found no data.');
         WHEN OTHERS THEN
            -- Consider logging the error and then re-raise
            dbms_output.put_line('Purged failed, rollling back...');            
            rollback;
        END;
    END IF;

    -- If date does not already exist in table, insert it
    begin
        select dt
        into dummy
        from order_facts
        where dt = ddate;
    EXCEPTION
     WHEN NO_DATA_FOUND THEN
        insert into order_facts 
        values (ddate, null, null, null);
        commit;
    END;

    -- ORD_RCV
    -- Calculate Orders received
    update order_facts
    set ord_rcv = 
        (select count(*) ord_rcv
         from ORDER_TABLE
         where rcv_date = ddate)
    where dt = ddate;
    commit;

    -- SAME_DAY_SHIPPED
    -- Calculate Orders received and shipped on ddate
    update order_facts
    set same_day_shipped = 
          (select count(*) same_day_shipped
           from order_table
           where rcv_dt = ddate
           and ship_dt = ddate)
    where dt = ddate;
    commit;

    -- ON_HOLD
    -- Total orders on_hold
    -- This method applies if you are only concerned with total on hold
    update order_facts
    set on_hold = 
          (select count(*) ON_HOLD
           from order_table
           where status = 'HOLD')
    where dt = ddate;
    commit;

END CALC_ORDER_FACTS; 
```

# python - 打印在 python 中解析的所有行的百分比

> ID：15906072
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:27:46.767
> 
> 标签：python

`stdin`在从 a 或通常从 a读取行的脚本中，`tail -f`stdout 是这些行以特定格式的打印，这是代码：

```
#!/usr/bin/python
import sys

if __name__ == "__main__":
    for line in sys.stdin:
         print line 
```

我只需要打印这些行读取的百分比，例如随机的 70% 并丢弃其他 30%。

如何打印这些行的随机百分比（比如说 70%）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:54:51.910

你可以这样做：

```
#!/usr/bin/python

import sys
import random

if __name__ == "__main__":
    for line in sys.stdin:
        if random.random() < 0.70:
            print line 
```

这将打印大约 70% 的行。您拥有的行数越多，它就越接近 70%。

# c# - 在 C# 中更改标签的颜色

> ID：15906090
> 
> 赞同：9
> 
> 时间：2013-04-09T15:28:26.367
> 
> 标签：c#, .net, chat

我正在使用 C# 在聊天程序中工作，我需要为每个用户提供不同的颜色，=>所以我需要一个函数来改变 C# 中的书写颜色

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-09T15:30:34.437

我将假设这是一个 WinForms 问题（感觉就像，基于它是一个“程序”而不是一个网站/应用程序）。在这种情况下，您可以简单地执行以下操作来更改标签的文本颜色：

```
myLabel.ForeColor = System.Drawing.Color.Red; 
```

或您选择的任何其他颜色。如果您想更具体，可以使用如下 RGB 值：

```
myLabel.ForeColor = Color.FromArgb(0, 0, 0);//(R, G, B) (0, 0, 0 = black) 
```

* * *

可以通过多种方式为不同的用户提供不同的颜色。例如，您可以允许每个用户指定自己的 RGB 值颜色，将它们存储在某处，然后在用户“连接”时加载它们。

另一种方法可能是只使用 2 种颜色 - 一种用于当前用户（运行应用程序），另一种颜色用于其他所有人。这将帮助用户快速识别他们自己的消息高于其他消息。

第三种方法可能是随机生成颜色 - 但是您可能会得到在您的背景下无法很好显示的冲突值，因此我建议不要采用这种方法。您可以有一个预定义的“可接受”颜色列表，然后为每个加入的用户从该列表中弹出一个。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T15:36:05.993

你可以试试这个`Color.FromArgb`：

```
Random rnd = new Random();
lbl.ForeColor = Color.FromArgb(rnd.Next(255), rnd.Next(255), rnd.Next(255)); 
```

# wordpress - Wordpress 插件分类 URL 404 错误

> ID：15906093
> 
> 赞同：0
> 
> 时间：2013-04-09T15:28:36.247
> 
> 标签：wordpress, http-status-code-404, taxonomy

我正在为一个项目创建一个插件，该插件有一个名为“列表”的自定义分类，这是我注册它的方式：

```
add_action('init', function(){
register_taxonomy( 'listings', 'listings', array(
        'hierarchical' => true,
        'show_ui' => true,
        'query_var' => true,
        'labels' => array(
            'name' => _x( 'Listings', 'taxonomy general name' ),
            'singular_name' => _x( 'Listings', 'taxonomy singular name' ),
            'search_items' =>  __( 'Search Listings' ),
            'all_items' => __( 'All Listings' ),
            'parent_item' => __( 'Parent Listings' ),
            'parent_item_colon' => __( 'Parent Listings:' ),
            'edit_item' => __( 'Edit Listings' ),
            'update_item' => __( 'Update Listings' ),
            'add_new_item' => __( 'Add New Listings' ),
            'new_item_name' => __( 'New Listings Name' ),
            'menu_name' => __( 'Listings Categories' ),
        ),
        'rewrite' => array(
            'slug'          => 'listings',
            'with_front'    => true
        )
    )); 
}); 
```

当我尝试访问 URL“ `http://myprojecturl/listings/some-category`”时，我收到 404 错误。发生了什么？我对wordpress真的很陌生。

# sublimetext2 - 在 Sublime Text 2 中使用大写作为单词分隔符

> ID：15906097
> 
> 赞同：16
> 
> 时间：2013-04-09T15:28:40.117
> 
> 标签：sublimetext2

我不知道如何在 Sublime Text 2 中使用大写字母作为单词分隔符。

我想要的是以下行为：在我喜欢的某些 C++ IDE 中，当光标位于 thisIsAComposedWord 之类的单词中时使用 ctrl+left/right 会将光标移动到单词中的下一个大写字母（或单词的开头/结尾） .

Sublime 文本中有一些称为“单词分隔符”的东西似乎可以做到这一点，它在默认首选项文件中以他的方式出现：

```
// Characters that are considered to separate words
"word_separators": "./\\()\"'-:,.;<>~!@#$%^&*|+=[]{}`~?", 
```

那么我可以在该列表中插入大写字母吗？谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-08-23T05:22:30.670

您可以使用以下键绑定通过“子词”移动：

```
{ "keys": ["alt+left"], "command": "move", "args": {"by": "subwords", "forward": false} },
{ "keys": ["alt+right"], "command": "move", "args": {"by": "subword_ends", "forward": true} }, 
```

这可以识别 camelCase 和 under_score。

您还可以通过 Word 移动

```
{ "keys": ["ctrl+left"], "command": "move", "args": {"by": "words", "forward": false} },
{ "keys": ["ctrl+right"], "command": "move", "args": {"by": "word_ends", "forward": true} } 
```

这可以识别设置文件中指定的“单词分隔符”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:42:53.067

我在 Linux（Ubuntu）中使用 Sublime Text，这对我有用：

默认情况下，在您的 Settings-User 中添加“单词分隔符”的相同内容（即您提出的问题）。然后，在字符串中添加大写字母 [AZ] 的正则表达式。结果是：

```
{
   "word_separators": "./\\()\"'-:,.;<>~!@#$%^&*|+=[]{}`~?[A-Z]"
} 
```

为了移动到 Word 中的下一个大写字母，我使用 Alt + 左/右箭头。

编辑：

正则表达式不起作用。答案无效。

# javascript - 在内容可编辑的 div 中选择文本，这是 jquery 可拖动的

> ID：15906098
> 
> 赞同：1
> 
> 时间：2013-04-09T15:28:40.133
> 
> 标签：javascript, jquery, html, jquery-draggable

我有一个 contenteditable div，它是另一个 div 的子级，它使用 jquery 制成可拖动元素。

```
<div id="draggable">
  <div id = "editable" contenteditable="true"/>
</div>

$('#draggable').draggable({revert:true}); 
```

我面临的问题是没有禁用任何默认鼠标操作，例如选择文本等。此外，如果我尝试选择一些文本，它只会拖动整个 div。我试过这样的事情：

```
$('#editable').mousemove(function(event){
  event.stopPropogation();
}) 
```

但这只是防止任何鼠标拖动动作。它还可以防止文本选择。我们如何才能使子内容的所有内容编辑鼠标操作都可编辑，同时将可拖动内容保持在父项上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:33:17.170

尝试这样的事情：

```
var draggableDiv = $('#draggable').draggable();

$('#editable', draggableDiv).mousedown(function(ev) {
     draggableDiv.draggable('disable');
}).mouseup(function(ev) {
     draggableDiv.draggable('enable');
}); 
```

**[小提琴](http://jsfiddle.net/cSMYG/1/)**

# c# - 无法让 Silverlight HierarchicalDataTemplate 显示独立存储文件夹

> ID：15906101
> 
> 赞同：0
> 
> 时间：2013-04-09T15:28:46.993
> 
> 标签：c#, silverlight-4.0, treeview, hierarchicaldatatemplate

这是我第一次涉足分层数据并且遇到了一些问题。

在 Silverlight 4 中，我试图获取要在 TreeView 中显示的隔离存储文件夹列表。什么都没有显示。我的 Treeview 是完全空白的。我错过了什么？我正在获取数据，这是正确的。

任何帮助，将不胜感激。

XAML

```
 <sdk:TreeView x:Name="FolderTreeView" Grid.Column="0" Margin="0,0,3,0" ItemsSource="{Binding _Folders}">
            <sdk:TreeView.ItemTemplate>
                <sdk:HierarchicalDataTemplate ItemsSource="{Binding Path=Folders}">
                    <TextBlock Margin="0" Text="{Binding Name, Mode=OneWay}"/>
                </sdk:HierarchicalDataTemplate>
            </sdk:TreeView.ItemTemplate>
        </sdk:TreeView> 
```

CS

```
internal class Folder
{
    public Folder() { Folders = new List<Folder>(); }
    public string Name { get; set; }
    public List<Folder> Folders { get; set; }
}

private List<Folder>  _Folders = new List<Folder>();
public OpenFileDialog()
{
    InitializeComponent();

    ifs = IsolatedStorageFile.GetUserStoreForApplication();
    var folder = new Folder
    {
        Name = "Root",
        Folders = (from c in ifs.GetDirectoryNames()
            select new Folder
            {
                Name = c,
                Folders = LoadFolders(c)
            }).ToList()
    };
    _Folders.Add(folder);
    FolderTreeView.DataContext = new { _Folders };
}

private List<Folder>LoadFolders(string folderName)
{
    if(folderName == null)
        return null;
    return (from c in ifs.GetDirectoryNames(folderName + "\\*.*")
        select new Folder
        {
            Name = c,
            Folders = LoadFolders(c)
        }).ToList();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:56:18.613

一些东西

```
<sdk:TreeView x:Name="FolderTreeView" Grid.Column="0" Margin="0,0,3,0" 
              ItemsSource="{Binding _Folders}"> 
```

你不能绑定到私人成员。

您需要使用 ObservableCollections 而不是列表。绑定管理器有效地侦听由 ObservableCollection 触发的 CollectionChanged 事件并通知绑定的控件。

您需要在属性设置器中实现 INotifyPropertyChanged 并引发 PropertyChanged 通知。

最后，您是否为 Treeview 设置了 DataContext？

此外，在您的输出调试窗口中查看与绑定相关的错误。

编辑，好的尝试：

```
FolderTreeView.DataContext =  this; 
```

并将 _Folders 包装在一个属性中

```
public ObservableCollection <Folder> Folders
    {
    get
       {
       return _Folders;
       }
    set
       {
       _Folders = value;
       OnPropertyChanged("Folders");
       }
   } 
```

将您的绑定更改为

```
<sdk:TreeView x:Name="FolderTreeView" Grid.Column="0" Margin="0,0,3,0" 
              ItemsSource="{Binding Folders}"> 
```

我已经改变了很多东西，

```
 public class Folder : INotifyPropertyChanged
        {

        public Folder(string folderName) 
            {
            Name = folderName;
            Folders = new ObservableCollection<Folder>();
            var _ifs = IsolatedStorageFile.GetUserStoreForApplication();

            if (folderName != null)
                {
                Folders = new ObservableCollection<Folder>(
                        (from c in _ifs.GetDirectoryNames(folderName + "\\*.*")
                         select new Folder(folderName + "\\" + c)
                   ));
                }
            else
                {
                Folders = new ObservableCollection<Folder>(
                       (from c in _ifs.GetDirectoryNames()
                        select new Folder(folderName + "\\" + c)
                  ));
                }
            }

        public string Name { get; set; }

        private ObservableCollection<Folder> _Folders; 
        public ObservableCollection<Folder> Folders 
            {
            get { return _Folders; }
            set { _Folders = value; OnPropertyChanged("RootFolder"); }
            }

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string propertyName)
            {
            if (PropertyChanged != null)
                {
                PropertyChanged(this,
                    new PropertyChangedEventArgs(propertyName));
                }
            }
        #endregion
    }

public partial class OpenFileDialog : UserControl
    {      
    public OpenFileDialog()
        {
        InitializeComponent();

        RootFolder = new Folder (null);
        RootFolders = new ObservableCollection<Folder>();
        RootFolders.Add(RootFolder);

        FolderTreeView.DataContext = this;
        }

    private Folder _RootFolder;
    public Folder RootFolder
        {
        get { return _RootFolder; }
        set { _RootFolder = value; }
        }

    private ObservableCollection<Folder> _RootFolders;
    public ObservableCollection<Folder> RootFolders
        {
        get { return _RootFolders; }
        set { _RootFolders = value; }
        }

    } 
```

xml

```
 <sdk:TreeView x:Name="FolderTreeView"  Margin="0,0,3,0" ItemsSource="{Binding RootFolders}">
    <sdk:TreeView.ItemTemplate>
        <sdk:HierarchicalDataTemplate ItemsSource="{Binding Path=Folders}">
            <StackPanel>
            <TextBlock Margin="0" Text="{Binding Name, Mode=OneWay}"/>
            </StackPanel>
        </sdk:HierarchicalDataTemplate>
    </sdk:TreeView.ItemTemplate>
</sdk:TreeView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:47:23.190

好的...问题解决了。虽然不明白为什么。

我将 ChildWindow 设置为内部范围而不是公共范围，因为我不希望在 Silverlight 类库的外部查看窗口本身。如果有人能回答为什么这会停止分层数据绑定而不是标准数据绑定，我想知道。

# android - Android：接近警报更新纬度经度

> ID：15906102
> 
> 赞同：0
> 
> 时间：2013-04-09T15:28:47.100
> 
> 标签：android, proximity

我已在一项活动中注册接近警报，并希望更新另一项活动的坐标。我怎么做？我已经尝试`unregisterProximity`在第一个活动中创建一个方法，但它不允许我将其设为静态。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:29:48.800

将坐标从一个活动传递到另一个活动，或`locationManager.removeProximityAlert(proximityIntent)`在创建时使用相同的接近度意图

发布代码并添加更多信息，因为您的问题不是很清楚

# android - Android 上的 Chrome 像素比关闭？

> ID：15906103
> 
> 赞同：0
> 
> 时间：2013-04-09T15:28:55.430
> 
> 标签：android, google-chrome, density-independent-pixel, pixel-ratio

我已经`em`在我所有的移动 CSS 中实现了 '，我只是`font-size`在标签上设置了一次，基于`body`( ratio: 1)、(ratio: 1.5) 或(ratio: 2) 等，但是当我打开我在 Android 上的 Chrome 中的网站，它在 CSS 中捕获了 1.5 的比率（对于此设备是正确的），但所有内容都比 Dolphin 或股票浏览器中的大 1.5 倍。`device-pixel-ratio``16px``24px``32px`

知道那里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:10:49.653

这是 Chrome for Android 取消对`target-densitydpi`. 这对我来说似乎是一个相当迟钝的决定，但事实就是如此。最有效的解决方案是手动检测 Chrome/Android 25+ 版本并将我的缩放级别更改为`1/devicePixelRatio`.

# java - 生成缩略图（预览

> ID：15906111
> 
> 赞同：6
> 
> 时间：2013-04-09T15:29:12.337
> 
> 标签：java

我正在拼命寻找能够为大量文件类型生成缩略图的 Java 库。像 Office Suite 文档、Open Office 文档、PDF、图像等...缩略图必须是可读的。

据我了解，.net 具有调用 windows 的钩子来执行此操作，但代码必须是平台独立的（因此是 java）

我找到了一些用于生成图像缩略图的库，一些用于 Word 文档，但没有什么看起来很好。我正在寻找一个用于生成缩略图的库是否存在？

# android - 收听 Google 语音短信

> ID：15906113
> 
> 赞同：2
> 
> 时间：2013-04-09T15:29:18.900
> 
> 标签：android, google-voice

我一直在尝试编写一个简单的 Android 应用程序，它使用过滤器“android.provider.Telephony.SMS_RECEIVED”来监听广播。这适用于设备使用默认消息应用程序接收 SMS，但通过 Google Voice 应用程序接收的 SMS 不会广播此意图的情况。此外，谷歌语音没有将消息转发到默认消息应用程序的选项，同时也从语音应用程序发布通知（在我看来，这是优越的）。

我应该倾听另一种意图吗？还有其他人成功拦截了 Google Voice 消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-11T00:56:06.903

你可以随时查询[https://clients4.google.com/voice/request/unread](https://clients4.google.com/voice/request/unread)我猜。这很混乱，但我猜你会知道什么时候有新消息。

谷歌语音很烦人，因为它没有 api，而且界面实际上没有功能，所以这可能是你能得到的最好的。

# wpf - 如何强制图像在 WPF 中保持纵横比？

> ID：15906117
> 
> 赞同：16
> 
> 时间：2013-04-09T15:29:31.293
> 
> 标签：wpf, image, xaml

我在 WPF 窗口中有一个图像。当我调整窗口大小时，图像会随之调整大小。调整图像大小时是否可以保留纵横比，因此如果窗口太窄，它看起来不会被压扁？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-09T15:39:54.687

将[`Image.Stretch`](https://msdn.microsoft.com/en-us/library/ms605067.aspx)属性设置为`Uniform`

```
<Image Stretch="Uniform" ....etc /> 
```

# c - 防止坏的和需要的递归

> ID：15906118
> 
> 赞同：2
> 
> 时间：2013-04-09T15:29:32.357
> 
> 标签：c, recursion, embedded, state

我这里有个问题：

```
void DrawState(){
    char statevar[1000] = {0};
    //bla bla bla
    something = showmenu(); // or showscreen() or showinput() 
    if(something){ 
       // change state
       state = new_state;
    }else{
       // return to previous state
       state = return_state;
    }
    // draw new state here.
    DrawState();
} 
```

我需要这个函数在状态改变时运行。但是当我这样递归地写时，它会消耗太多的内存，最终导致系统崩溃。当我不这样做时，我不知道如何从外部调用自己。

有人有什么想法吗？

**编辑：**这是一个在管理器软件上运行的库，如插件。后台作业也需要与此实现一起使用。也许我应该在某个事件上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:46:42.007

听起来你想要的本身并不涉及递归，而只是一个回调。

当您需要在代码中的某些内容发生更改时运行某些代码时，您希望实现[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。一个简单的 C 实现可能使用函数指针来保存将在更新监视的数据时运行的函数。

例如，您可以分离更新功能：

```
void DrawState() {
    // ... 
} 
```

然后，您可以维护一个指向它的指针

```
int (*updateDraw)() = DrawState 
```

然后做...

```
if (updated) {
  // when updated
  updateDraw()
} 
```

# jakarta-ee - 无状态 EJB 线程问题

> ID：15906120
> 
> 赞同：1
> 
> 时间：2013-04-09T15:29:38.203
> 
> 标签：jakarta-ee, thread-safety, ejb, pool

考虑以下两个 EJB：

```
@Stateless
public class MyBean1 {

    pulic void method1() {
        //method implementation comes here
    }

    pulic void method2() {
        //method implementation comes here
    } 
}

@Stateless
public class MyBean2 {

    @EJB
    MyBean1 myBean1;

    public void businessMethod() {
        myBean1.method1();
        myBean1.method2();
    }
} 
```

容器是否保证在 MyBean1 的**同一个实例**上调用这两个方法（并且在该实例上的两个方法调用之间不调用其他方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:54:45.310

您无法判断是否可以访问同一实例。容器决定这一点。

即使您“认为”它是同一个实例（例如`@EJB MyBean1`您的代码中的一个），这些调用也可能会遇到不同的`MyBean`实例。

您的 EJB 的其他业务方法可能会在您的`myBean1.method1()`和调用之间被`myBean1.method2()`调用。例如，这可能是对不同组件的 EJB 的调用。

但是，这应该不会让您很感兴趣，因为您使用的是无状态 EJB - 即您不应该在 EJB 中存储任何状态。
因此，无论您获得相同或不同的 EJB 实例，还是某些其他组件将在您的调用之间调用相同类型的 EJB 上的业务方法，都不应该担心。

# windows - Windows 和 Mac OS X 之间的字体大小

> ID：15906124
> 
> 赞同：1
> 
> 时间：2013-04-09T15:29:48.753
> 
> 标签：windows, macos

我在一个项目上工作，我想知道为什么 Windows 和 Mac OS X 在网络上的字体大小（宽度）存在差异。我发现 Mac 上的所有浏览器都具有相同的大小，但在 Windows 中却不同从浏览器到花药。我很沮丧，等着你来这里。我现在的问题是为什么它们之间的宽度存在差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:05:08.467

可能的原因有很多：

1.  不同的字体。很少有 Mac 字体与 Windows 上的字体相同。（不清楚您是否希望 Windows 结果与 Mac 结果匹配，或者只是希望它们在 Windows 上保持一致。）

2.  不同的默认尺寸。大多数浏览器都有字体和大小的默认值，它们可能并不完全相同。

3.  字体大小的不同解释。当你说你想要（例如）一个 10 磅的字体时，它的含义并不完全明确。有真点（1/72.27 英寸），但更常见的是计算机点（1/72 英寸）。你想要字符单元格的高度吗？有没有内部领导？还是您的意思是实际的字符高度或仅仅是字体的上升？不同的浏览器可能会选择以不同的方式解释大小。

4.  不同的分辨率。浏览器可能会以不同的方式处理不同的屏幕分辨率。Windows 有一个“逻辑英寸”的概念，它通常比显示器上的真实英寸大。但是用户可以自定义多大。一些浏览器可能会忽略逻辑英寸并使用设备的实际 DPI（或者至少他们认为 DPI 是什么——操作系统可能实际上并不知道）。

5.  不同的渲染技术。无论您使用提示、抗锯齿、亚像素渲染（例如，ClearType）还是这些的某种组合，都会稍微影响文本的宽度（即使每个人都同意确切的字体和确切的垂直大小）。

6.  不同的尺度。大多数浏览器都提供缩放功能，并且它们可能在不同浏览器上没有默认为相同的值。另请注意，当您更改比例时，文本宽度通常不会线性缩放（参见#5）。

这些问题中的任何一个都可能导致文本宽度的差异（可以级联成不同的自动换行选项），使页面在不同浏览器和机器之间看起来不同。在许多情况下，您可能会遇到阻碍一致性的这些问题的组合。

解决方案是将布局设计为灵活。不要通过硬编码（例如 a 的大小）来创建对字体大小的隐式依赖，并期望文本始终适合。通常，选择与文本大小相关的大小，并为实际文本大小的变化做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:42:26.143

存在差异，因为没有标准规定网页呈现的文本大小。因此，浏览器供应商可以自由地以他们希望的任何大小呈现文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T22:26:15.587

我在处理需要一致呈现的 HTML 广告时遇到了这个问题。在这种情况下，即使相差几个像素的元素也会使设计看起来很业余。

获得更准确的跨平台结果的一种方法是指定像素值而不是点或 em。无论设备分辨率如何，此类文本都将以相同的大小呈现，并且在放大和缩小时仍会正确缩放。即使在 Retina/HD 显示器上，因为 CSS 像素不一定与设备像素相同。

此外，强制使用网络字体或非常常见的字体，以及显式设置抗锯齿方法，将使您更接近像素完美的结果。我发现下面的代码无论环境如何都能呈现几乎相同的效果。

```
html, body {
    font-family: Arial, sans-serif;
    font-size: 13px;
    -webkit-font-smoothing: antialiased;
    font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
} 
```

# objective-c - object_getClass(obj) 和 [obj class] 给出不同的结果

> ID：15906130
> 
> 赞同：6
> 
> 时间：2013-04-09T15:30:09.277
> 
> 标签：objective-c, cocoa-touch, objective-c-runtime

调用 object_getClass(obj) 和 [obj class] 时，我得到两个不同的对象实例。知道为什么吗？

```
Class cls = object_getClass(obj);
Class cls2 = [obj class];

(lldb) po cls
$0 = 0x0003ca00 Test
(lldb) po cls2
$1 = 0x0003ca14 Test
(lldb) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T16:11:32.933

我怀疑 obj 尽管有名字，但它是一个类。例子：

```
Class obj = [NSObject class];
Class cls = object_getClass(obj);
Class cls2 = [obj class];
NSLog(@"%p",cls);  // 0x7fff75f56840
NSLog(@"%p",cls2); // 0x7fff75f56868 
```

原因是Class对象的类是同一个类，而`object_getClass`一个Class的类是元类（类的类）。这是有道理的，因为 Class 是元类的实例，并且根据文档`object_getClass`返回“<em>对象是实例的类对象”。LLDB 中的输出将是：

```
(lldb) p cls
(Class) $0 = NSObject
(lldb) p cls2
(Class) $1 = NSObject
(lldb) po cls
$2 = 0x01273bd4 NSObject
(lldb) po cls2
$3 = 0x01273bc0 NSObject 
```

如果替换`Class obj = [NSObject class];`为`NSObject *obj = [NSObject new];`，打印 cls 和 cls2 时的结果将相同。那是，

```
 NSObject *obj = [NSObject new];
    Class cls = object_getClass(obj);
    Class cls2 = [obj class];
    NSLog(@"%p",cls);  // 0x7fff75f56840
    NSLog(@"%p",cls2); // 0x7fff75f56840 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-27T12:32:15.963

上一个答案是正确的，但不是针对提问者的答案。

对于一个实例（不是一个类），“object_getClass(obj)”和“[obj class]”变得不同的唯一原因是“isa-swizzling”或其他一些改变实例的“isa”指针的swizzling。

当您将“KVO”添加到实例时，该实例是 isa-swizzled。参见[Key-Value Observing 实现细节](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOImplementation.html)

ReactiveCocoa 等其他一些库也会更改实例的“isa”指针。[（在ReactiveCocoa 的来源中](https://github.com/ReactiveCocoa/ReactiveObjC/blob/master/ReactiveObjC/NSObject%2BRACSelectorSignal.m)搜索“RACSwizzleClass” ）

另见此博客（中文）：[Class-swizzling、Isa-swizzling 和 KVO](http://zhidong.rochu.cn/blog/2016/03/07/class-swizzling/)

# batch-file - 如何只在没有任何行尾的文件中批量写入 char =？

> ID：15906131
> 
> 赞同：2
> 
> 时间：2013-04-09T15:30:17.153
> 
> 标签：batch-file, cmd

如何创建一个带有 = 的文件，仅此而已（如果您使用 XVI.exe 打开文件，您会发现只有 3D (hexa) 字符。没有 CR 或没有 LF 字符）。

在没有行尾的情况下回显的常用方法是

```
set /p ==<nul 
```

但它不适用于 set，因为 = 被视为特殊字符。

我也尝试过使用carret，但它也不起作用。

```
set /p =^=<nul
set /p =^^=<nul
set /p =^^^=<nul
set /p =^^^^=<nul 
```

回答前请记住：文件中只有一个字符，=，有挑战！！！

谢谢，

零度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:12:42.250

尝试这个：

```
@echo off
setlocal EnableDelayedExpansion
call :createSub
> txt.tmp (echo(=!sub!)
copy txt.tmp /a txt.txt /b > nul
del txt.tmp
exit /b

:createSub
copy nul sub.tmp /a > nul
for /F %%a in (sub.tmp) DO (
   set "sub=%%a"
)
del sub.tmp
exit /b 
```

`=`在`txt.txt`.

（[来源](http://www.dostips.com/forum/viewtopic.php?p=23564#p23564)）

# c++ - boost::regex 与 UTF-8 不区分大小写匹配（例如，大写与小写变音符号）

> ID：15906136
> 
> 赞同：3
> 
> 时间：2013-04-09T15:30:38.423
> 
> 标签：c++, regex, boost, utf-8

在使用支持 Unicode (ICU) 的国际组件构建 boost::regex 版本 1.52 库后，具有不区分大小写匹配的正则表达式似乎无法按预期处理大写和小写的德语变音符号字符。

```
static const std::string pattern("^.*" "\303\226" ".*$");
static const std::string   test1("SCH" "\303\226" "NE");
static const std::string   test2("sch" "\303\266" "ne");
static const boost::regex exp(pattern, boost::regex::icase);
const char *result = (boost::regex_match(test1, exp)) ? "Match" : "NoMatch";
std::cout << "Testing \"" << test1 << "\" against pattern \"" << pattern 
    << "\" : " << result << std::endl;
result = (boost::regex_match(test2, exp)) ? "Match" : "NoMatch";
std::cout << "Testing \"" << test2 << "\" against pattern \"" << pattern 
    << "\" : " << result << std::endl; 
```

产量：

```
Testing "SCHÖNE" against pattern "^.*Ö.*$" : Match
Testing "schöne" against pattern "^.*Ö.*$" : NoMatch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:16:34.940

[使用 Unicode 和 ICU 字符串类型](http://www.boost.org/libs/regex/doc/html/boost_regex/ref/non_std_strings/icu.html)。

[LWS 上的示例](http://liveworkspace.org/code/308asr%240)。

```
#include <iostream>
#include <boost/regex.hpp>
#include <boost/regex/icu.hpp>
int main()
{
   static const std::string pattern("^.*" "\303\226" ".*$");
   static const std::string   test1("SCH" "\303\226" "NE");
   static const std::string   test2("sch" "\303\266" "ne");
   static const boost::u32regex exp=boost::make_u32regex(pattern, boost::regex::icase);
   const char *result = (boost::u32regex_match(test1, exp)) ? "Match" : "NoMatch";
   std::cout << "Testing \"" << test1 << "\" against pattern \"" << pattern 
      << "\" : " << result << std::endl;
   result = (boost::u32regex_match(test2, exp)) ? "Match" : "NoMatch";
   std::cout << "Testing \"" << test2 << "\" against pattern \"" << pattern 
      << "\" : " << result << std::endl;
} 
```

# vb.net - 自动化登录

> ID：15906139
> 
> 赞同：1
> 
> 时间：2013-04-09T15:30:51.300
> 
> 标签：vb.net

有很多关于自动登录的表格，但我似乎找不到适合我的表格。我正在使用 MVS 2010，如果有任何重复，这是一个尝试访问 Web 浏览器的控制台应用程序。这是我的两个相关潜艇。

```
' Navigates to the given URL if it is valid. 
Private Sub Navigate(ByVal address As String)
    If String.IsNullOrEmpty(address) Then Return

    If address.Equals("about:blank") Then Return

    If Not address.StartsWith("http://") And Not address.StartsWith("https://") Then
        address = "http://" & address
    End If

    Try
        webBrowser1.Navigate(New Uri(address))
    Catch ex As System.UriFormatException
        Return
    End Try
End Sub

Private Sub WebBrowser1_DocumentCompleted() Handles webBrowser1.DocumentCompleted

    While webBrowser1.IsBusy
        System.Threading.Thread.Sleep(30)
    End While

    If Not webBrowser1.IsBusy Then
        For Each ele As HtmlElement In webBrowser1.Document.All
            If ele.GetAttribute("ctl00$ContentPlaceHolder1$LoginButton").ToLower = "Login" Then
                ele.InvokeMember("click")
            End If
        Next
    End If
End Sub 
```

正如您可能看到的那样，它从来没有点击过文档完成，但它从来没有启动过新的网络浏览器。如果我将代码更改为以下代码，则会打开一个新的 Web 浏览器，但不会单击该按钮。

```
 webBrowser1.Navigate(New Uri(address), true) 
```

有什么建议么？

# ruby-on-rails - 安装 gem 后导入资产文件时出错

> ID：15906140
> 
> 赞同：0
> 
> 时间：2013-04-09T15:30:51.467
> 
> 标签：ruby-on-rails, ruby, scripting, gem, datatables

每次我安装一个新的 gem 并且我们必须包含一个新的脚本或一个新的 CSS 时，它根本不起作用。

我将 gem 放在 Gemfile 中，运行`bundle install`，一切正常，gem 已安装。然后下一步是将脚本添加到 application.js，如下所示：`//= require dataTables/jquery.dataTables`。

但它从来没有用过，我总是收到一条消息，比如`couldn't find file 'dataTables/jquery.dataTables'`（在我的情况下，尝试设置数据表 gem）。

在 gen install 和添加脚本之间有什么我做的不对，或者我必须做一个未指定的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:41:30.860

正如 Deefour 在评论中所说，我只需重新启动服务器，所有内容都已正确包含。谢谢！

# mysql - MySQL 从多个表中选择到单个表中

> ID：15906141
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:30:58.110
> 
> 标签：mysql, database, insert

我有 3 张桌子。

表 A：
TA_ID
TA_NAME

表 B：
TB_ID
TB_NAME
TA_ID

表 C：
TC_ID
TC_NAME
TA_ID
TB_ID

我想在表 C 中插入一个名称，同时从表 A 中获取 id，从表 B 中获取 id，检查这些 TA_ID 和 TB_ID 是否匹配，然后插入。我将如何做到这一点，我可以获得一个很好的例子的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:35:10.033

听起来你想要的是一个 INSERT ... SELECT 语句。互联网上有很多示例，首先要开始的是：[http ://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

# c++ - 为什么 64 位 GCC 在分配数组时会警告将 const int 转换为 long unsigned int？

> ID：15906142
> 
> 赞同：8
> 
> 时间：2013-04-09T15:31:10.077
> 
> 标签：c++, arrays, gcc, 64-bit

我有一个文件 test.cpp，如下所示：

```
void f(const int n) {
  unsigned char *a=new unsigned char[n];
  delete[] a;
}

int main() {
  f(4);
  return 0;
} 
```

`-Wsign-conversion`在带有标志的 64 位 GCC 中编译它会产生警告：

```
test.cpp:2:39: warning: conversion to ‘long unsigned int’ from ‘const int’ may change the sign of the result [-Wsign-conversion] 
```

（第 2 行`new`是被调用的行）。对我来说，GCC 应该给出关于分配数组的警告似乎很奇怪，但以下事情甚至更奇怪：

1.  用 替换有问题的行`unsigned char *a=new unsigned char[(long unsigned int)n];`并不能消除警告，使用`static_cast<long unsigned int>()`.
2.  `f`如果用签名定义，则不会产生警告`void f(T n)`，其中`T`是

    1.  任何大小的任何非常量、有符号或无符号整数类型，或
    2.  有符号的 64 位整数类型。

    但是，当`T`任何 const 有符号整数类型小于 64 位时，它会产生警告。

记住我在 64 位（Linux）机器上，为什么符号转换警告`n`在这种情况下关心常量和大小，为什么类型转换不能解决问题？

*注意 1：我想在另一个编译器下测试它，但 Comeau 站点已关闭，我无法访问任何其他编译器，所以我无法判断这是符合标准的行为，还是 GCC 错误。*

*注意 2：test.cpp 是我拥有的“真实”C++ 文件中问题的一个最小示例，其中我摆脱警告的最佳方法是用以下内容包围有问题的行：*

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"
// ...
#pragma GCC diagnostic pop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T13:54:04.367

我对细节有点怀疑，但在我看来，问题实际上在于符号*扩展*（因为 size_t 很可能是您系统上的无符号长整数）。考虑以下代码：

```
#include <stdio.h>
void f(const int n) {
      unsigned long int b = static_cast<long unsigned int>(n);
      printf ("0x%llx == %lld\n", b, b);
}

int main() {
      unsigned long int c = 1;
      c <<= 31;
      printf ("0x%llx == %lld \n", c, c);
      f(c);
      return 0;
} 
```

它打印：

```
0x80000000 == 2147483648
0xffffffff80000000 == -2147483648 
```

请注意，我故意选择了一个表示负数的值作为整数，而不是长整数。第一次打印实际上应该是 0x0000000080000000。如果我选择一个简单的 -1，它仍然会被符号扩展为 -1，但这个给出了完全不同的东西。

当然，如果你明确地将它转换为无符号，你也会得到其他东西，但我的猜测是编译器更担心你更可能错过的隐式转换（在这种情况下上转换为 64 位）（ “*更多*位可能会出现什么问题？”）

另一个提示是上转换问题困扰着我们（如果不是，我很乐意听到另一种解释）：

```
int main() {
    int n = 1;
    const long int a = static_cast<long int> (n);
    const int b = static_cast<int> (n);
    char* ap = new char [a];
    char* bp = new char [b];
} 
```

这仅在 b 上抱怨

```
test.cpp: In function ?int main()?:
test.cpp:8:27: warning: conversion to ?long unsigned int? from ?const int? may change the sign of the result [-Wsign-conversion]
     char* bp = new char [b]; 
```

所以我们已经排除了函数参数传递是罪魁祸首的选项

现在，如果我可以进一步推测，也许该警告是特定于内存分配的（请注意，您不会从简单地将 n 转换为 long 得到它），因为编译器会想要在给定恒定大小的情况下做一些分配魔法。想象一下当它看到你正在尝试做的事情时的震惊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:24:34.777

const int 是有符号值，您正在将有符号值转换为无符号值。所以编译器会生成一个警告，在某些情况下，这种转换可能会导致错误的计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T05:54:46.450

问题在于函数的签名 - 当您将**常量文字 4**传递给相应参数声明为**const int**的函数时，编译器会进行隐式转换。

您可以尝试将参数类型替换为**const unsigned int**以消除警告消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T08:37:14.167

编译器会发出警告，因为在转换为无符号值时符号可能会发生变化。

> 1\. 用 unsigned char *a=new unsigned char[(long unsigned int)n]; 替换有问题的行 没有摆脱警告，也没有使用 static_cast()。

符号转换的问题仍然存在，您只是明确表示。我的猜测是，编译器仍然不够明确，无法相信你。它仍然认为您宣布*签署*`n`是有原因的！ *`const int`*

 *> 2\. 如果 f 是用签名 void f(T n) 定义的，则不会产生警告，其中 T 是
> 
> > 1\. 任何大小的任何非常量、有符号或无符号整数类型

如果`n`是非常量，则在函数开头和转换之间*可能*存在代码，以确保 n 为正数，例如`n = (long unsigned int)(n);`. 在这种情况下，编译器似乎给了你怀疑的好处，因此不会发出警告。当它*被*声明为 const 时，编译器肯定知道它正在处理 an`int`并发出警告。

我承认，我的解释听起来不像 g++ 通常会做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-24T17:52:52.573

TL;DR：如果它代表某物的大小，请将其设为`std::size_t`.

问题是 array`new`将 type 的值作为其大小参数`std::size_t`，标准保证它是无符号整数类型，编译器对转换为 的抱怨证明了这一点`long unsigned int`。那就是发生有符号-无符号转换的地方，解决问题的（IMO）正确方法是简单地给出`n`函数`f`类型的参数`std::size_t`。这至少在 GCC 4.6 for x86_64 GNU/Linux 中抑制了警告。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-15T08:45:51.763

我想，这与处理整数文字的方式有关：当你写

```
int myArray[10]; 
```

数字 10 被转换为有符号整数，编译器不应该出于明显的原因抱怨这一点。所以，我猜，有符号整数的类型检查会出现异常。当您使用 const int 时，gcc 似乎认为这是一种不适用整数异常的不同类型，因此会发出警告。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-03T03:42:52.577

好吧，它为你转换，但它警告你它正在进行的转换会改变它正在改变的值的符号，否则你可能会自动丢失一些值，并且错误可能会导致它只是说你正在将一个 int 转换为一个 unsigned int 这可能如果我将 int 传递给数组边界运算符，则正常更改符号的值，它不会像您这样发出警告

尝试打开您打开的转换标志，看看它是否仍然这样做，该标志是导致警告的原因，因为它是进行转换的东西

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-09T12:51:20.727

`std::size_t`通常用于数组索引和循环计数。使用其他类型（例如 unsigned int）进行数组索引的程序可能会在索引超出`UINT_MAX`或依赖于 32 位模运算时在 64 位系统上失败。[单击此处阅读有关 std::size_t 和 64 位系统的更多信息](https://en.cppreference.com/w/cpp/types/size_t)*

# ios - 为什么这种方法只在有人键入一个字符时才有效？

> ID：15906143
> 
> 赞同：1
> 
> 时间：2013-04-09T15:31:15.177
> 
> 标签：ios, objective-c, uisearchbar

当有人在搜索栏上键入并关闭键盘时，我试图隐藏标签。以下代码仅在有人键入一个字符时才有效。如果您键入多个字符，它不会在键盘关闭时隐藏标签。可能是我缺少的一个小细节。任何帮助将不胜感激。

```
 -(void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
  {
label.hidden=YES;  
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:08:58.093

我假设你还没有在这里实现它——你需要确保你也实现了这个`searchBarSearchButtonClicked`方法。

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar 
{ 
    [searchBar resignFirstResponder];
} 
```

# wijmo - wijgrid中的自定义数据加载、排序、分页

> ID：15906147
> 
> 赞同：0
> 
> 时间：2013-04-09T15:31:29.643
> 
> 标签：wijmo, wijgrid

我有一个 wijgrid，我需要实现自定义分页和排序（阅读：服务器端分页和排序），但我需要使用我们的自定义客户端库加载数据。它处理我们的服务器端代码所期望的各种身份验证和 XSS 过程。

因此，查看自定义分页示例，我有点需要结合“动态数据”示例，我可以在其中提供自己的`loading`函数和“远程数据”示例。正如我所看到的，动态数据的问题在于它期望`loading`函数通过设置 dataSource.data 属性与数据来结束。就我而言，我不能这样做，因为我需要等待 ajax 调用完成，然后处理返回的数据。

这是一种可能性，还是我完全走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:40:05.600

看看下面的链接，它显示了数据的自定义过滤：[http://wijmo.com/wijgrid-custom-filtering/](http://wijmo.com/wijgrid-custom-filtering/) 它使用 wijdatasource 小部件从服务器检索数据。您可以使用它的 'loaded' 事件来处理返回的数据。

# javascript - 向上舍入到最近的

> ID：15906148
> 
> 赞同：6
> 
> 时间：2013-04-09T15:31:31.013
> 
> 标签：javascript

如果数字是37，我希望它四舍五入到40，如果数字是1086，我希望它四舍五入到2000。如果数字是453992，我希望它四舍五入到500000。

我真的不知道如何更笼统地描述这个，对不起，但基本上，最高位的数字应该总是四舍五入到最接近的数字，其余的都变成零。我知道如何正常地四舍五入，我只是不知道如何干净地处理位数之间的变化。

谢谢，

编辑：我删除了 4 到 10 轮，因为那一轮似乎不适合其余的，而且它不是真的必要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T15:40:56.923

假设所有值都是正整数：

```
function roundUp(x){

    var y = Math.pow(10, x.toString().length-1);

    x = (x/y);
    x = Math.ceil(x);
    x = x*y;
    return x;
} 
```

***现场演示：http:** [//jsfiddle.net/fP7Z6/](http://jsfiddle.net/fP7Z6/)*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T15:48:01.263

我会使用以下功能

```
function specialRoundUp(num) {
    var factor = Math.pow(10, Math.floor(Math.log(num) / Math.LN10));
    return factor * Math.ceil(num/factor);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-21T10:10:39.027

我的*花哨*版本**可以正确处理小数和负数**，并按照 OP 的要求正确四舍五入到**最接近的 10 次方：**

```
roundToNearestPow(value) {
    var digits = Math.ceil(Math.log10(Math.abs(value) + 1));
    var pow = Math.pow(10, digits - 1);

    return Math.round(value / pow) * pow;
}

// roundToNearestPow(-1499.12345) => 1000
// roundToNearestPow( 1500.12345) => 2000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:37:21.530

获取原数的长度：

```
var num;
var count = num.toString().length; 
```

获取第一个数字：

```
var first = num.toString().substring(0, 1); 
```

然后只需先 ++ 并添加 count-1 个零

**来自评论**

确保 number 不是 10 的乘积：

```
if((num % 10) != 0)
{
    //do all above in this closure
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T15:50:11.080

我读起来像`nearest integer, which is production of an integer and some power of 10`

你可以通过

```
var myCeil = function(num){
  var power = Math.log(num,10) * Math.LOG10E;
  var head = Math.floor(power);
  var rest = power - orig;
  return Math.ceil(Math.pow(10,next))*Math.pow(10,orig);
}
i = [37, 1086, 453992];
console.log( i.map(myCeil) );
// -> [ 40, 2000, 500000 ] 
```

这也适用于非整数输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-03T07:30:37.673

如果你想四舍五入到 10 的最近幂，试试这个（javascript）

```
function Round2NearestPowerOf10(x) {
    x = Math.round(x);
    var strLen = x.toString().length;
    var y = x / Math.pow(10, strLen);
    var rst = Math.pow(10, strLen - 1 + Math.round(y));
    return rst < 10 ? 10 : rst;
} 
```

结果将四舍五入到 10,100,1000 等。

# javascript - 使用jQuery单击相应按钮时如何淡入多个隐藏的div？

> ID：15906149
> 
> 赞同：0
> 
> 时间：2013-04-09T15:31:32.940
> 
> 标签：javascript, jquery, fadein

我有一系列由 PHP 脚本生成的 Web 按钮。每当用户单击其中一个按钮时，我都希望相应的隐藏使用 jQuery 淡入。

这是我的 HTML 代码

> ```
> <div id="confirmation-apple" style="display:none;">
>     Do you really want to delete this apple?
> </div>
> <input type="button" id="confirmdelete-pear" value="Delete" />
> <div id="confirmation-pear" style="display:none;">
>     Do you really want to delete this pear?
> </div> 
> ```

这是我的 javscript 代码

```
$(document).ready(
    function() {
        $("#confirmdelete-apple").click(function() {
            $("#confirmation-apple").fadeToggle();
        });
    });
$(document).ready(
    function() {
        $("#confirmdelete-pear").click(function() {
            $("#confirmation-pear").fadeToggle();
        });
    }); 
```

[它们可以完美地工作，如我创建的 Fiddle](http://jsfiddle.net/C58HN/2/)所示，但是由于按钮是由 PHP 脚本自动生成的（即我可以有未定义数量的按钮），我正在寻找一种方法来自动化 javascript 代码，以便每个按钮 id ="confirmation- **aCertainString** " 触发相应 div id="confirmdelete- **aCertainString** " 的淡入。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:34:49.163

我认为您首先需要在[jsfiddle](http://jsfiddle.net/mido_rizk007/qjzEF/)中使用类似的东西来选择以“confirmdelete-”开头的任何 id，然后在添加点击事件之后，我们可以从其 id 属性中剪切所需的名称，如“apple”，然后将其添加到“confirmation-”以淡化它：

```
$(document).ready(
    function() {
        $('[id^="confirmdelete-"]').click(function() {
            $('#confirmation-'+$(this).attr('id').replace('confirmdelete-','')).fadeToggle();
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:36:02.503

您可以选择带有`input[type="button"]`或的按钮`input[value="Delete"]`（更具体地说）。或者例如为按钮分配一个类`delete`并使用`$('.delete')`单击事件。

然后[`next`](http://api.jquery.com/next/)用来获取对应的div。所以你甚至不需要**aCertainString**部分。

```
$(document).ready( function() {
        $('input[type="button"]').click(function() {
            $(this).next().fadeToggle();
        });
}); 
```

看看[小提琴](http://jsfiddle.net/C58HN/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:47:23.487

在按钮中使用 FAKE 类，

```
<input id="btnDelete1" type="button" class="btnDelete" value="Delete"> 
```

通过假类选择按钮，然后为每个按钮设置单击事件和淡化 div，但您的 div 的 id 必须像这样 SomeName + ButtonId。

```
<input type="button" id="confirmdelete-pear" value="Delete" class="btnDelete"/>
<div id="confirmation-confirmdelete-pear" style="display:none;">
    Do you really want to delete this pear?
</div> 
```

显示 div 的方式是这样的：

```
$(document).ready(function(){
    $(".btnDelete").each(function(){}).click(function(){
        $("#confirmation-" + this.id.toString()).fadeToggle();
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:06:44.457

没有任何 id 的另一种方法是使用容器类，例如`div.fruit-container`

html

```
<div class="fruit-container">
    <div>Do you really want to delete this apple?</div>
    <button>Delete</button>
</div>

<div class="fruit-container">
    <div>Do you really want to delete this orange?</div>
    <button>Delete</button>
</div>

<div class="fruit-container">
    <div>Do you really want to delete this pear?</div>
    <button>Delete</button>
</div> 
```

jQuery

```
$('div.fruit-container').find('button').on('click', function() {
   $(this).parent().find('div').fadeToggle();
}); 
```

[http://jsfiddle.net/gavinbruce/CWsu7/](http://jsfiddle.net/gavinbruce/CWsu7/)

# c# - C# 替换字符串

> ID：15906152
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:31:38.187
> 
> 标签：c#, string, replace, return

我正在尝试运行此代码来替换字符串，但是当我这样做时，它会给我一个错误提示

`Error 1 A local variable named 'typeval' cannot be declared in this scope because it would give a different meaning to 'typeval', which is already used in a 'parent or current' scope to denote something else`

**这是代码**

```
public static string Replace(string typeval)
{
    string newType = "";
    string typeval = "";

    if (typeval.Equals("User Service Request"))
    {
        newType = typeval.Replace("User Service Request", "incident");
    }
    else if (typeval.Equals("User Service Restoration"))
    {
        newType = typeval.Replace("User Service Restoration", "u_request");
    }

    return newType;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:33:01.910

您已经定义了`typeval once`. 您不能再次声明它。

消除`string typeval == ""`

您还应该设置`typval.Replace`为`typval`and not `newType`。否则，您将始终返回一个空字符串。

最后，您不需要这些`if`陈述。您可以轻松地将函数简化为如下所示。

```
public static string Replace(string typeval)
{
    typeval = typeval.Replace("User Service Request", "incident");
    typeval = typeval.Replace("User Service Restoration", "u_request");

    return typeval;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:33:17.863

你有两个类型。一个在参数中，一个在函数中。重命名其中之一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:33:21.117

您正在声明一个与方法参数同名的本地变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:33:38.387

您有两个名为“typeval”的变量，因此会出现编译错误。

# indexing - Pandas 试验重复索引

> ID：15906153
> 
> 赞同：0
> 
> 时间：2013-04-09T15:31:43.973
> 
> 标签：indexing, dataframe, pandas

我有一个数据集，其中图片展示了 3 次，并且每次展示都进行了测量。预期我想对每张图片的值进行标准化（基于 3 次重复 - 所以 3 个数字）并在类别上运行 ANOVA：第一次演示、第二次演示、第三次演示（适用于所有图片）。然而，在我开始之前，我必须重新组织我的数据，以便我可以轻松访问数据 - 基于图片名称和重复次数。

我想转换一个看起来像这样的熊猫数据框：

```
viola.jpg          0.61  1.968234      1
vlasta.jpg         0.79  1.836025      2
zelmira.jpg        0.76  1.955471      3
viola.jpg          0.71  1.968234      4
vlasta.jpg         0.89  1.836025      5
zelmira.jpg        0.76  1.955471      6
viola.jpg          0.31  1.968234      7
vlasta.jpg         0.79  1.836025      8
zelmira.jpg        0.26  1.955471      9 
```

对于一个看起来像这样的：

```
viola.jpg   1   0.61    1.968234        1
            2   0.71    1.968234        4
            3   0.31    1.968234        7
vlasta.jpg  1   0.79    1.836025        2
            2   0.89    1.836025        5
            3   0.79    1.836025        8
zelmira.jpg 1   0.76    1.955471        3
            2   0.76    1.955471        6
            3   0.26    1.955471        9 
```

我曾尝试以各种组合使用 df.groupby()、df.pivot 和 df.stack()，但显然他们甚至没有模糊地做我正在寻找的事情 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:46:45.427

如果你有一个 DataFrame `df`，你可以将你的`image name`和`measurement id`字段设置为索引然后排序。这将按照您的意愿对数据进行排序。

```
df2 = df.set_index("pic_name", "meas_id").sort() 
```

`groupby`并且`pivot`适用于对数据组执行聚合，或者当您需要对各个组执行特定操作时。 `stack`并`unstack`帮助重塑您的数据，但将索引移动到 cols，反之亦然。

# iphone - 设置触摸按钮时的背景图像

> ID：15906155
> 
> 赞同：0
> 
> 时间：2013-04-09T15:31:47.097
> 
> 标签：iphone, ios, objective-c

单击按钮时，我正在更改背景图像。这仅停留在突出显示的状态。单击按钮后，我想保留该绿色/红色背景图像。

如何在下面的代码中执行此操作？对不起，我是新手...

```
- (void)setCorrectAndWrongAnswerBackgroundImagesForOptions
{
int correctAns = [[currentQuestionDict objectForKey:kQuizAnswer] intValue];
int i;
int count = [_optionsButtonsArray count];
for (i=0; i<count; i++) 
{
    UIButton* optionButton = [_optionsButtonsArray objectAtIndex:i];
    NSString* optionBgImageName = [NSString stringWithFormat:@"optionBg_default%d",(i+1)];
    NSString* optionBgRedImageName = [NSString stringWithFormat:@"optionBg_red%d",(i+1)];
    NSString* optionBgGreenImageName = [NSString stringWithFormat:@"optionBg_green%d",(i+1)];

    if (optionButton.tag == correctAns) 
    {
        [optionButton setBackgroundImage:[UIImage imageNamed:[HAUtilities resourceNameForString:optionBgImageName]] forState:UIControlStateNormal];

        [optionButton setBackgroundImage:[UIImage imageNamed:[HAUtilities resourceNameForString:optionBgGreenImageName]] forState:UIControlStateHighlighted];

    }
    else {
        [optionButton setBackgroundImage:[UIImage imageNamed:[HAUtilities resourceNameForString:optionBgImageName]] forState:UIControlStateNormal];
        [optionButton setBackgroundImage:[UIImage imageNamed:[HAUtilities resourceNameForString:optionBgRedImageName]] forState:UIControlStateHighlighted];

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:39:50.707

在您的故事板中，当按钮被选中时，在右侧栏中，它们是一个带有“突出显示”选项的下拉菜单。单击此按钮并设置您希望按钮在突出显示（选择）时具有的属性，例如不同的背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:38:52.807

你可以在 optionButton 选择器中做这样的事情

```
dispatch_async(dispatch_get_main_queue(), ^{
    [sender setHighlighted:YES];
}); 
```

这将使 optionButton 突出显示状态保持不变，直到您`NO`再次将其设置为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:39:08.693

您想在正常状态下更改颜色，此时您正在更改突出显示的状态。

更改您的代码如下：

```
- (void)setCorrectAndWrongAnswerBackgroundImagesForOptions
{
int correctAns = [[currentQuestionDict objectForKey:kQuizAnswer] intValue];
int i;
int count = [_optionsButtonsArray count];
for (i=0; i<count; i++) 
{
    UIButton* optionButton = [_optionsButtonsArray objectAtIndex:i];
    NSString* optionBgImageName = [NSString stringWithFormat:@"optionBg_default%d",(i+1)];
    NSString* optionBgRedImageName = [NSString stringWithFormat:@"optionBg_red%d",(i+1)];
    NSString* optionBgGreenImageName = [NSString stringWithFormat:@"optionBg_green%d",(i+1)];

    if (optionButton.tag == correctAns) 
    {
        [optionButton setBackgroundImage:[UIImage imageNamed:[HAUtilities resourceNameForString:optionBgGreenImageName]] forState:UIControlStateNormal];

    }
    else {

        [optionButton setBackgroundImage:[UIImage imageNamed:[HAUtilities resourceNameForString:optionBgRedImageName]] forState:UIControlStateNormal]; 

    }
}

} 
```

# z3 - 告诉Z3中松弛变量和原始变量之间的区别

> ID：15906161
> 
> 赞同：2
> 
> 时间：2013-04-09T15:31:59.817
> 
> 标签：z3

我正在尝试创建一种新的剪辑来替代 Z3 中实施的 gomory 剪辑。我设计了我的剪辑以使用用户输入的原始约束。不幸的是，我发现约束的 Z3 预处理添加了松弛变量并改变了约束的结构。我可以调整我的算法以使用 Z3 约束结构和松弛变量，但算法的关键部分需要知道哪些变量是松弛变量，哪些是原始变量。我在 Z3 源代码中找不到任何东西来帮助我做到这一点。我也尝试在网上搜索解决方案，但找不到任何东西。

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:38:27.717

`mk_gomory_cut(row const & r)`在文件中的方法中`src/smt/theory_arith_int.h`，`r`是Simplex 表的一行。此外，基变量`x_i`是整数，但它被分配了一个非整数值。

迭代器`it`用于遍历行条目。每个条目本质上是一对`a_ij`和`x_j`，其中`a_ij`是数字并且`x_j`是（理论）变量。

Theory_arith 是文件中定义的求解器的插件`src/smt/smt_context.h`。该求解器结合了许多理论插件，例如 theory_arith。它维护从表达式到理论变量的映射。此映射存储在一个名为 的对象中`enode`。

该方法`get_enode(v)`检索与理论变量关联的 enode `v`。此外，`get_enode(v)->get_owner()`返回与理论变量关联的表达式`v`。

现在，假设我们要测试一个理论变量`v`是否是松弛的。首先，我们可以使用以下方法检索关联的表达式：

```
 app * t = to_app(get_enode(v)->get_owner()) 
```

我使用了，`to_app`因为理论插件只处理基本术语（即它们不包含自由变量）。如果一个复合算术项（例如或），则该变量`v`是一个松弛变量。也就是说，*slack*本质上是复合算术项的“名称”。我们可以使用以下方法进行测试：`t``(+ a b)``(* a b c)`

 *```
 t->get_family_id() == get_id() 
```

如果此表达式的计算结果为`true`，则`t`是一个复合算术项，因此`v`是一个松弛项。

备注：`get_id()`是一种方法`theory_arith`。实际上，每个理论插件都有这个方法。*

# java - JAXB：如何解组由多个标签或属性值组成的 Java 对象

> ID：15906165
> 
> 赞同：2
> 
> 时间：2013-04-09T15:32:01.413
> 
> 标签：java, xml-parsing, guava, jaxb2

我正在从 SAX 解析器转换为 JAXB - 无法弄清楚如何将多个标记/属性值解组为单个（可比较的）Java POJO。

我有这样的xml文件：

```
<item validFrom="1950" validUntil="1980">
    <description>some text</description>
</item> 
```

“validFrom”和“validUntil”值应该组成一个有效的“MutableRange”POJO（见下面的定义）。

我需要将其解组为的 Java Item 定义是：

```
@XmlRootElement
@XmlAccessorType(XmlAcccessType.FIELD)
public class Item {
    // ??? need help mapping this to be composed from "validFrom", "validUntil" attributes
    private MutableRange validRange;

    @XmlElement
    private String description;
}

// assume all other boilerplate code exists
public class MutableRange {
    private int lowerBound;
    private int upperBound;
} 
```

我尝试使用适配器，但它没有同时捕获：“from”和“until”值，以便我创建 MutableRange 实例。我尝试使用`@XmlMixed`没有成功。

JAXB 规定的方法是什么？

一旦解决了这个问题，我将`MutableRange`使用 ( `XmlAdapter`) 进行扩展以作为包装器来创建 guava 的不可变 Range 对象，并将其映射`validRange`到`@XmlJavaTypeAdapter(MutableRange.class)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:57:59.467

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以使用 MOXy 的`@XmlPath`扩展来映射此用例：

```
@XmlRootElement
@XmlAccessorType(XmlAcccessType.FIELD)
public class Item {
    @org.eclipse.persistence.oxm.annotations.XmlPath(".")
    private MutableRange validRange;

    @XmlElement
    private String description;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:31:04.793

我会使用一些简单的东西：

```
public interface MutableRange() {
    public int getLowerBound();
    public int getUpperBound();
    public void setLowerBound(int lowerBound);
    public void setUpperBound(int upperBound);
}

@XmlRootElement(name = "item")
@XmlAccessorType(XmlAccessType.NONE)
public class Item {
    @XmlAttribute(name = "validFrom")
    private int validFrom;
    @XmlAttribute(name = "validUntil")
    private int validUntil;
    @XmlElement(name = "description")
    private String description;

    public MutableRange getValidRange() {
        return new MutableRange() {
            public int getLowerBound() { return validFrom; }
            public int getUpperBound() { return validUntil; }
            public void setLowerBound(int lowerBound) { validFrom = lowerBound; }
            public void setUpperBound(int upperBound) { validUntil = upperBound; }
        }
    }

    public String getDescription() {
       return description;
    }
} 
```

# jquery - jquery循环不工作

> ID：15906171
> 
> 赞同：1
> 
> 时间：2013-04-09T15:32:18.760
> 
> 标签：jquery

为什么会这样：

```
var m = 1;
jQuery('#div_sel'+m).click(function() { 
    jQuery('input[id="sel'+m+'"]').val('blahblah'); 
}); 
```

但不是这个：

```
var m = 1; 
while (m < 8) {
    jQuery('#div_sel'+m).click(function() { 
        jQuery('input[id="sel'+m+'"]').val('blahblah');
    });
    m += 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:35:12.177

因为 m 的全局值将设置为`8`循环结束和触发事件时，您的`div`选择器将是`input[id="sel'+8+'"]'`

您可以使用[带有通配符的属性选择器](http://api.jquery.com/attribute-starts-with-selector/)来绑定事件。您可以`id`通过删除`div_sel`from`id`并使用索引来制作输入的 id 并使用[id selector](http://api.jquery.com/id-selector/)来获取索引。

```
jQuery('id^=div_sel]').click(function() { 
     index = this.id.replace('div_sel', '');
     jQuery('#sel'+ index).val('blahblah');
}); 
```

# sql - SSRS 中的查询-如何将一个表加入到另一个仅匹配列中间的数据

> ID：15906174
> 
> 赞同：1
> 
> 时间：2013-04-09T15:32:35.347
> 
> 标签：sql, ssrs-2008, reporting-services

我正在尝试根据匹配的合同编号加入表格，但是第一个表格在数字前有“合同”一词，在数字后有一堆空格。我似乎不知道如何在查询中执行此操作，并且我还尝试使用表达式来执行此操作（我能够做到，但我无法正确放置过滤器以仅显示匹配的行）。请帮忙！

我正在尝试将我的账单表（表名“RM20101”）中的合同号（列名“TRXDSCRN”）加入我的服务表（表名“SV00500”）中的相同合同号（列名“Contract_Number”） . TRXDSCRN 列需要某种过滤器来从数据的开头删除“合同”一词，匹配接下来的 10 个字母和数字（即合同编号），然后删除后面的任何空格。

如果您需要我遗漏的任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:44:08.580

**编辑：**它应该是 MS SQL 的 SUBSTRING。SUBSTR 是 MySQL。对困惑感到抱歉。

* * *

如果我理解正确，我认为您指的是：

```
SELECT * FROM RM20101 as RM20101
LEFT JOIN SV00500 as SV00500
ON SUBSTR(RM20101.TRXDSCRN,9,10) = SV00500.Contract_Number 
```

解释一下，您真正​​需要的是 SUBSTR() 部分。这就是说，取列 RM20101.TRXDSCRN，*从*第 9 个位置开始，在 10 个字符后*结束。*你从第 9 个位置开始的原因是因为“合同”有 8 个字符长。当然，您在 10 个字符后结束，因为合同是 10 个字符，如您所说。

如果您对此有任何疑问或它不能完全满足您的所有需求，请告诉我。

# php - 将json转换为数组并比较差异

> ID：15906176
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:32:39.760
> 
> 标签：php, arrays, json, api

我正在尝试从这两个 json 中获取返回的结果并比较差异以仅显示唯一值。我尝试了许多其他方法，但似乎没有任何效果。这段代码给了我参数 #1 不是一个数组...对我在这里缺少的有什么帮助吗？

```
<?php
$json = file_get_contents("http://ebird.org/ws1.1/data/obs/region/recent?rtype=subnational1&r=US-AZ&back=7&fmt=json");
$json2 = file_get_contents("http://ebird.org/ws1.1/data/obs/region/recent?rtype=subnational1&r=US-NV&back=7&fmt=json");

$array1 = json_decode($json, TRUE);
$array2 = json_decode($json2, TRUE);

$result = array_diff($array1, $array2);

echo $result ;

?> 
```

现在结果是“数组”，但我知道存在差异......有没有办法只比较返回的 json 数据中的一个字段......在这个例子中是 com-name？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:36:54.183

您的变量是字符串（网址）而不是 JSON。您正在尝试 json_decode 一个网址！

此外，如果我访问 url，我会得到 XML ...不是 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:33:35.397

1.  您需要使用[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)从这些 URL 获取数据。
2.  您需要`true`作为第二个参数传递[`json_decode`](http://www.php.net/manual/en/function.json-decode.php)以将结果作为数组获取：

.

```
$xml  = file_get_contents('http://ebird.org/ws1.1/data/obs/region/recent?rtype=subnational1&r=US-AZ&back=7&format=json');
$xml2 = file_get_contents('http://ebird.org/ws1.1/data/obs/region/recent?rtype=subnational1&r=US-NV&back=7&format=json');

$array1 = json_decode($xml, true);
$array2 = json_decode($xml2, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:44:49.693

您所做的实际上是尝试将**URL ADDRESSES**解码为 JSON 格式，而不是在这些特定 url 地址中找到的内容。为了对内容而不是 URL 本身进行 JSON 解码，您可以使用以下代码：

```
$content = file_get_contents($xml); //get the content that is found in the url that $xml holds
$json = json_decode($content);  //now json decode the content , and not the url itself 
```

我希望它能帮助你理解你做错了什么。使用 file_get_contents() 和 json_decode() 函数很容易，首先你必须计划你的代码应该做什么。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:45:12.670

正如上面的海报所说，您将需要实际检索文件。只需调用 json_decode 就会尝试解码 JSON 字符串，这根本不是您想要实现的目标。

# if-statement - 批处理文件：检查程序、重新启动或什么都不做

> ID：15906180
> 
> 赞同：1
> 
> 时间：2013-04-09T15:32:53.723
> 
> 标签：if-statement, batch-file, application-restart, tasklist, taskkill

我在这方面有点挣扎。脚本的想法应该是：

如果程序 1 正在运行 关闭它然后打开它 如果没有运行 什么都不做

这将在XP和win7机器上使用

这就是我所拥有的，但我不知道如何合并 if 语句，或者即使我所拥有的是远程正确的：

```
tasklist /fi "imagename eq KDS.exe" taskkill /f /im "KDS.exe"  start "" "C:\Path\KDS.exe" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:59:20.300

我会做第`taskkill`一个，并检查它的返回值以确定它是否成功。如果是这样，则重新启动该过程。

```
taskkill /f /im "kds.exe" && (
    start "" "C:\Path\KDS.exe"
) 
```

灵感来源： [批量杀死一个流程并报告成功](https://stackoverflow.com/questions/1896262/killing-a-process-in-batch-and-reporting-on-success)

# sql - LINQ 中的类型转换错误

> ID：15906184
> 
> 赞同：1
> 
> 时间：2013-04-09T15:33:03.137
> 
> 标签：sql, linq, stored-procedures

我正在尝试仅使用 LinqPad 将存储的 Proc 转换为 LINQ。我在 Linq 中有以下代码

```
var myVar = (from st in Student
             where st.name == "abcd"
             select st).Take(10);

if (myVar.Any())
{
 // some statements
}
else
{
  myVar = (from emp in Employee
           where emp.name == "abcd"
           select emp).Take(10);   
} 
```

但它在 else 块中的选择行出现以下错误

```
Cannot implicitly convert type 'System.Linq.IQueryable<AnonymousType#1>' to 'System.Linq.IQueryable<AnonymousType#2>' 
```

谁能知道发生了什么？如何解决？如何在 Linq 中显式转换类型？

两个表中的列不同。而且我没有使用任何框架，如实体框架等。我只有应用程序的数据库，我正在尝试将所有存储过程转换为 LINQ。在存储过程中，两个值都被捕获在同一个变量中，这就是为什么我需要它们在同一个变量中。那么在这种情况下有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:35:34.350

您的查询返回不同的对象，因此您不能将它们分配给同一个变量。

您可以指定要从两个查询中获取哪些属性，如果它们相同，它可以工作：

```
var myVar = (from st in Student
             where st.name == "abcd"
             select new
             {
                 st.name,
                 st.age
             }).Take(10);

if (myVar.Any())
{
 // some statements
}
else
{
  myVar = (from emp in Employee
           where emp.name == "abcd"
             select new
             {
                 emp.name,
                 emp.age
             }).Take(10);
} 
```

# c# - C#、HTTPClient - IfMatch 格式要求？

> ID：15906198
> 
> 赞同：2
> 
> 时间：2013-04-09T15:33:36.070
> 
> 标签：c#, couchdb, httpclient

我将`System.Net.Http.HttpClient`.Net 4.5 中的内容与 CouchDb 结合使用。

我有`revision`一个文件是：`3-789d4d2b33bf4505f8f23fd4a1025a4e`.

问题是我无法让它与`If-Match`请求上的标头标志一起使用。

```
var req = new HttpRequestMessage(HttpMethod.Delete, url);
req.Headers.IfMatch.Add(
    new EntityTagHeaderValue("3-789d4d2b33bf4505f8f23fd4a1025a4e")); 
```

`EntityTagHeaderValue`导致格式异常：

> “值'3-789d4d2b33bf4505f8f23fd4a1025a4e'的格式无效。”

我试图通过: 使用纯字符串添加它`req.Headers.Add(string, string)`，但仍然没有运气。

我发现的工作解决方案是：

```
req.Headers.TryAddWithoutValidation("If-Match", rev); 
```

问题是，对`If-Match`标头有什么要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-27T13:35:28.297

该标记必须是[HTTP 规范第 3.11 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.11)`entity-tag`中定义的 a，而后者又将其定义为 a （参见[HTTP 规范第 2.2 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2)），前面可选地表示“弱”标记。粗略地说，这意味着它几乎可以是任何文本，但必须用双引号括起来。（如果存在，前缀出现在开始引号之前。）引号内的文本可以是除控制字符或“之外的任何内容。（如果前面有 a ，则允许出现 a ）。`quoted-string``W/``W/``"``\`

如果 HTTP 服务器报告 ETag，`3-789d4d2b33bf4505f8f23fd4a1025a4e`那么它违反了规范。它应该真的是这样的`"3-789d4d2b33bf4505f8f23fd4a1025a4e"`。

也就是说，实体标签缺少引号似乎很常见。显然`HttpClient`在执行规则方面有点不寻常，如果您必须处理违反规则的服务器，这会有点麻烦。

请注意，规范中有一个错误。已发布的 HTTP 1.1 规范允许带引号的字符串以反斜杠结尾，例如，`"foo\"`甚至只是`"\"`. 然而，这不是本意。目的是反斜杠后面总是跟着另一个字符，并且结束引号的区别在于前面没有 a `\`，这是最后两个示例违反的。请参阅[此错误报告](http://trac.tools.ietf.org/wg/httpbis/trac/ticket/31)。它已在 HTTP 1.1 规范的下一版本的当前草案中得到修复（HTTP bis，似乎是 Web 标准的方式，现在将在任何十年发布）。因此，尽管这两个字符串在今天在技术上是合法的，但实现者最好避免这种事情。

# mysql - 创建多级关联导轨

> ID：15906202
> 
> 赞同：0
> 
> 时间：2013-04-09T15:33:41.590
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

我正在尝试开发一个工作板样式的网络应用程序。

在我目前的模型中：

```
entrepreneur has_many :opportunities
opportunity belongs_to :entrepreneur 
```

所以基本上机会模型是用户（企业家）在他/她的公司创建工作职位的表格。我正在考虑添加另一个级别的关联，称为应用程序，对于每个机会，您都会有多个候选人申请。

所以建议的模型将是

```
entrepreneur has_many :opportunities
opportunity has_many :applications 
```

对于这是否适合我提议的应用程序的架构，我将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:16:53.153

你的逻辑是有道理的。您可能需要考虑将模型名称从 Entrepreneur 更改为 Company，因为它确实是有可用工作的公司。但假设您坚持使用 Entrepreneur，最终，您将拥有：

```
entrepreneur has_many :opportunities

opportunity belongs_to :entrepreneur
opportunity has_many :applications 
```

这正是你提出的！

# linux - 为 Centos 6 编译 libgssapi_krb5.a 静态库

> ID：15906203
> 
> 赞同：0
> 
> 时间：2013-04-09T15:33:44.843
> 
> 标签：linux, centos6

我们的软件取决于与该库静态链接的可用性。我们的研究表明它不再作为 centos6 中的 yum 包提供。我们如何编译这个以及其他用于 krb5 的静态库？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:00:08.213

[从http://web.mit.edu/kerberos/dist/index.html](http://web.mit.edu/kerberos/dist/index.html)下载 krb5 源码到`/usr2/krb5testing/krb5-1.11.1`，然后执行

```
cd /usr2/krb5testing/krb5-1.11.1
./configure CFLAGS=-m32 LDFLAGS=-m32 --prefix=/usr2/krb5testing/krb5-1.11.1/binary --build=i686-redhat-linux --enable-static --disable-shared 
make
cd lib
cp libgssapi_krb5.a /usr/lib/.
cp libkrb5.a /usr/lib/.
cp libk5crypto.a /usr/lib/. 
```

# html - 我网站上的目标页面正在被谷歌取消索引

> ID：15906204
> 
> 赞同：0
> 
> 时间：2013-04-09T15:33:49.053
> 
> 标签：html, seo, meta, noindex

我们建立链接的每个目标页面都被取消索引

会不会是这个标签（虽然我以为它一直都在）

还是我正在建立的链接？我说的这个网站是 1800lawfirm.com

```
<meta name="robots" content="noindex,follow"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:20:33.053

带有 noindex 指令的 robots 标签告诉搜索引擎**不要**将该页面包含在索引中。您应该删除机器人标签以允许页面排名。

# android - 绘制带圆角的 LinearLayout

> ID：15906206
> 
> 赞同：12
> 
> 时间：2013-04-09T15:33:54.310
> 
> 标签：android, android-canvas

我正在尝试实现一个用圆角绘制自身的 LinearLayout 子类。根据我的研究，我设置`setWillNotDraw(false)`并重写`onDraw()`以在画布中绘制一个圆角矩形：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    int sc = canvas.saveLayer(0, 0, getWidth(), getHeight(), drawPaint, Canvas.MATRIX_SAVE_FLAG | Canvas.CLIP_SAVE_FLAG | Canvas.HAS_ALPHA_LAYER_SAVE_FLAG
            | Canvas.FULL_COLOR_LAYER_SAVE_FLAG | Canvas.CLIP_TO_LAYER_SAVE_FLAG);
    canvas.drawRoundRect(bounds, mCornerRadius, mCornerRadius, roundPaint);
    canvas.restoreToCount(sc);
} 
```

在哪里：

```
drawPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
drawPaint.setColor(0xffffffff);
drawPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));

roundPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
roundPaint.setColor(0xffffffff); 
```

`DST_IN`这里似乎是正确的选项（根据 APIDemos 示例），但是应该透明的区域（圆形区域）改为黑色背景，并且孩子的角落仍然可见。这是带有 Android 4.2.2 的 Galaxy Nexus 上的结果：

![例子](https://i.stack.imgur.com/V92Js.png)

有什么提示吗？

编辑：这是我想要实现的目标，对 photoshopping 的粗糙表示抱歉:)

![在此处输入图像描述](https://i.stack.imgur.com/cZfNv.png)

编辑 2：我向 GitHub 添加了一个示例可运行项目：[https ://github.com/venator85/RoundClippingLayout](https://github.com/venator85/RoundClippingLayout)

谢谢 ;）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T20:33:03.267

不太一样：Romain Guy 做了一篇关于使用位图着色器裁剪图像边角的博文。不确定是否要扩展相同的内容。

[http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T08:31:53.207

尝试这个，

布局：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout 
        android:id="@+id/linearLayout"
        android:layout_width="300dp"
        android:gravity="center"
        android:layout_height="300dp"
        android:layout_centerInParent="true"
        android:background="@drawable/rounded_edge">
        <TextView
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="foo" />
    </LinearLayout>
</RelativeLayout> 
```

形状（可绘制）：-rounded_edge.xml

```
<shape 
        xmlns:android="http://schemas.android.com/apk/res/android">
            <solid 
                android:color="@android:color/darker_gray">
            </solid>
            <stroke 
                 android:width="0dp" 
                 android:color="#424242">
            </stroke>
            <corners 
                 android:topLeftRadius="100dip"
                 android:topRightRadius="100dip"
                 android:bottomLeftRadius="100dip"
                 android:bottomRightRadius="100dip">
            </corners>
        </shape> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T07:22:35.703

我可以实现这样的圆角LinearLayout。

![在此处输入图像描述](https://i.stack.imgur.com/uNeF8.png)

*步骤*：

**1.**创建自定义布局

```
public class RoundedLayout extends LinearLayout {
    private RectF rect;
    private Paint paint;

    public RoundedLayout(Context context) {
        super(context);
        init();
    }
    public RoundedLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        rect = new RectF(0.0f, 0.0f, getWidth(), getHeight());
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setColor(Color.parseColor("#7EB5D6"));
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);           
        canvas.drawRoundRect(rect, 20, 20, paint);
    }
} 
```

**2.**像这样在主布局中使用它

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#336699" >

    <com.example.rounded.RoundedLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:padding="30dp"
        android:background="@android:color/transparent" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="foo" />

    </com.example.rounded.RoundedLayout>    

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-19T21:04:39.033

尝试这个 ！！取自这篇[文章](https://stackoverflow.com/a/1683195/771342)

将以下内容添加到文件中（例如 customshape.xml），然后将其放入（res/drawable/customshape.xml）

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
 android:shape="rectangle"> 
 <gradient 
     android:startColor="#SomeGradientBeginColor"
     android:endColor="#SomeGradientEndColor" 
     android:angle="270"/> 

<corners 
     android:bottomRightRadius="7dp" 
     android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp" 
     android:topRightRadius="7dp"/> 
</shape> 
```

完成创建此文件后，只需通过以下方式之一设置背景：

通过代码：

```
yourObject.setBackgroundResource(R.drawable.customshape); 
```

或者通过 XML，只需将以下属性添加到容器（例如：LinearLayout 或任何字段）：

```
android:background="@drawable/customshape" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T17:42:40.133

怎么样...

```
myLayout.setBackgroundResource(R.drawable.my_rounded_drawable); 
```

然后...

my_rounded_drawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <solid android:color="#FFFFFFFF" />
            <stroke android:width="1dip" android:color="#FF000000" />
            <corners android:radius="10dp" />
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T00:37:08.730

与其尝试削减布局的边角，不如在其顶部放置一个 Drawable 作为与背景颜色相匹配的框架？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-02T18:29:16.603

[编辑：看起来这将添加到 L: [https://developer.android.com/preview/material/views-shadows.html#clip](https://developer.android.com/preview/material/views-shadows.html#clip)，它允许您将视图剪辑为矩形、圆形、或圆形矩形drawable。]

我自己尝试了很长时间，并得到了[这个答案](https://stackoverflow.com/a/3845118/665632)，表明这是不可能的，因为 View 类是基于 Rect 类的。我刚刚检查了来源，从评论看来情况仍然如此。

摩托罗拉将在今年夏天晚些时候发布 Moto 360（圆面 Android Wear 手表），因此可能会有框架更新，允许使用矩形以外的其他形状的视图。

# python - python字典中的索引超出范围

> ID：15906207
> 
> 赞同：1
> 
> 时间：2013-04-09T15:33:55.127
> 
> 标签：python

我试图实现一个字典，其中键是一个数字 <=10^9，值是一个数字列表。

```
 a=[] 
 for i in xrange(n):
     h,j = raw_input().split() 
     b=int(h)
     l=int(j)

     a[b].append(l) 
```

它给了我一个列表索引超出范围错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:39:07.910

你可以在[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)这里使用：

```
In [15]: from collections import defaultdict

In [16]: dic=defaultdict(list)

In [17]: for _ in xrange(4):
   ....:     h,j=map(int,raw_input().split())
   ....:     dic[h].append(j)
   ....:     
1 10
1 20
2 30
3 5

In [18]: dic
Out[18]: defaultdict(<type 'list'>, {1: [10, 20], 2: [30], 3: [5]}) 
```

或使用简单的 dict 并使用`dict.setdefault`：

```
In [19]: dic={}  #use {} for declaring a new dict

In [20]: for _ in xrange(4):
   ....:     h,j=map(int,raw_input().split())
   ....:     dic.setdefault(h,[]).append(j)
   ....:     
1 10
1 20
2 30
3 5

In [21]: dic
Out[21]: {1: [10, 20], 2: [30], 3: [5]} 
```

对字典进行排序：

字典不能排序，但我们可以得到一个排序`key,value`对的列表，或者只是`keys`或只是`values`使用`sorted`：

```
In [25]: dic={1: [10, 30], 2: [30], 3: [5,50]}

In [26]: sorted(dic.items(),key=lambda x:sum(x[1])) #sort based on sum of lists
Out[26]: [(2, [30]), (1, [10, 30]), (3, [5, 50])] 
```

现在您可以使用 ，`orderedDict`从之前的列表中创建一个`collections.OrderedDict`，因为它保留了插入键的顺序：

```
In [27]: from collections import OrderedDict

In [30]: od=OrderedDict(sorted(dic.items(),key=lambda x:sum(x[1])))

In [31]: od
Out[31]: OrderedDict([(2, [30]), (1, [10, 30]), (3, [5, 50])]) 
```

# opencv - 在openCV中定位鼠标错误

> ID：15906208
> 
> 赞同：0
> 
> 时间：2013-04-09T15:33:55.717
> 
> 标签：opencv

当我在大图像上单击鼠标时，鼠标位置错误。当我在大图像上单击鼠标时如何获得位置。但我不喜欢使用 cv_window_keepratio

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:46:29.537

如果您的图像大于显示分辨率，则需要**重新缩放**图像以使其适合窗口，否则您将在尝试访问显示器之外的像素时遇到问题。

[简单的算术](https://stackoverflow.com/a/5385402/176769)可以将 X、Y 坐标从一种分辨率转换为另一种分辨率，例如 800x600 到 1280x720。

# ruby-on-rails - 在 rails 中，label 和 label_tag 有什么区别？

> ID：15906215
> 
> 赞同：3
> 
> 时间：2013-04-09T15:34:12.967
> 
> 标签：ruby-on-rails, tags, label, helpers

我注意到在我的 Rails 视图中，一些视图使用（助手？）名为 xxx 而其他地方使用名为 xxx_tag 的视图？

谁能概述两者之间的区别以及我如何知道在特定情况下使用哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:43:06.560

`label`（和等价物）可以在表单构建器（调用时产生的对象`form_for`）上调用，因此可以知道表单关注的模型实例，将通过`for`属性自动将其链接到适当的输入，并且可以使用 I18n 翻译.

`label_tag`（和等价物）不绑定到表单，并且用于在更基本的级别生成标签 HTML 标记。它没有那么聪明，你必须给它你想要的所有属性，但有时这就是你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T11:09:36.200

`f.label`当您在使用创建的表单对象中`form_for(...) do |f|`并想要引用模型属性时使用。如果您的应用程序是 i18n-ed，Rails 将使用翻译来显示属性名称。

`label_tag`当您不在表单对象中时使用。（或者您在表单对象中，但想为非模型属性创建一个虚拟标签。）

所有的表单输入都有这两种变体，带和不带`_tag`后缀，比如`select`and`select_tag`等

# cpu-cache - 刷新 CPU 缓存时缓存跨度的作用

> ID：15906217
> 
> 赞同：4
> 
> 时间：2013-04-09T15:34:18.843
> 
> 标签：cpu-cache

我知道 CPU 缓存的步幅值可以等于或大于缓存行大小，但我不明白为什么需要步幅值？

1.  CPU 缓存何时会具有大于缓存行大小的步幅值？

2.  什么时候实际使用步幅值？是在冲水的时候吗？

我已经搜索了很多关于 CPU 缓存步幅的更多信息，但找不到太多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T06:40:50.280

**跨度**是内存访问模式的属性，与缓存硬件无关。

例如，内存访问模式`R(0), R(2), R(4),..`有 stride `2`，其中`R`表示`read`，括号中的数字是内存中字节的地址。一个模式`R(0), R(15), R(30)`... 的步幅为 15。

高速缓存的总内存容量被分成大小相等的行。高速缓存**行大小**是高速缓存中单个行的大小（以字节为单位）。这*是*缓存硬件的参数。

现在，相对于高速缓存行大小的步长长度会影响高速缓存的性能。如果步幅远小于行大小，则许多连续访问将转到高速缓存中的同一行。如果步幅大于缓存行大小，则连续访问将转到不同的缓存行。如果访问总数是固定的，则前一种情况通常比后一种情况快得多。要了解原因，请尝试搜索 cpu 缓存的组织方式。

# excel - Excel 公式查找公式下方 1 个单元格和参考右侧 3 个单元格

> ID：15906218
> 
> 赞同：0
> 
> 时间：2013-04-09T15:34:20.323
> 
> 标签：excel

只需要一个公式，我可以在不同的工作表上使用它来查找 A1 (John) 中的值并返回 C2 (33) 中的值。谢谢你们。

![电子表格](https://i.stack.imgur.com/Y7XC8.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:48:59.443

这是你的公式：

*   `A6`是查找（约翰或彼得）
*   `A1:A4`是我们查找查找的范围（约翰或彼得）
*   `A1:C4`是我们寻找值的范围（33 或 7）

    =索引（A1：C4，匹配（A6，A1：A4,0）+1,3）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:46:20.387

试试这个：`=OFFSET(A1; MATCH("Peter";A1:A6;0); 2)`

找到正确的`MATCH`行号，然后`OFFSET`使用该行号和右侧的 2 列。

# c# - 新子代在实体框架 4 中插入现有父代

> ID：15906219
> 
> 赞同：1
> 
> 时间：2013-04-09T15:34:21.310
> 
> 标签：c#, entity-framework, entity-framework-4, silverlight-5.0

当我尝试将新的子关系添加到现有父对象时，*实体会尝试将父对象插入为**new**，而不是将其更新为**modified***。我收到一条错误消息，说它试图***插入重复的密钥***。

这真的难倒我，直到我用新关系更新模型（通过从数据库更新，而不是先代码），它才表现得像这样。相同上下文中的其他表，具有相同的多对多模式**不会导致此错误！**

我发现如果我将我的子对象添加到上下文中，仔细设置 ID 值，而不是导航属性，它会保存得很好。*但是修复过程不会将子对象添加到导航集合*中，这会导致其他地方出现逻辑问题。

我的模型有这样的多对多关系：

option -< optionUnit >- 单位

Option 和 Unit 对象都**存在**并**加载**到上下文中。

通常我会制作桥接表并设置如下导航属性：

```
bridge = new OptionUnit()
{
    OptionUnitId = Guid.NewGuid(),
    Unit = SelectedUnit,
    Option = SelectedOption,
};
//Context.OptionUnits.Add(bridge); //added to context via the navigation properties 
```

但是当我这样做时，实体试图将 SelectedOption 插入为新的（即使它的实体状态在保存时被修改，而不是新的或分离的）。

为了解决这个问题，我不得不制作桥并设置唯一的 ID。保存时我没有收到错误，但它不会像我期望的那样通过修复自动添加到 SelectedOption.OptionUnits 中。如果我手动将它添加到集合中，我会再次收到保存错误。

```
bridge = new OptionUnit()
{
    OptionUnitId = Guid.NewGuid(),
    //Unit = SelectedUnit,
    UnitId = SelectedUnit.UnitId,
    //Option = SelectedOption,
    OptionId = SelectedOption.OptionId,
};
Context.OptionUnits.Add(bridge); 
```

这似乎只发生在选项实体上的关系上。optionUnit >- Unit 之间的其他关系没有问题并且按预期工作。

似乎关系有问题，但我不确定在哪里看。我需要知道是什么导致了这种行为，如何解决它，以及如何防止它在未来发生......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:16:40.883

令人难以置信的是，Julie Lerman 刚刚发表了一篇关于这个确切问题及其发生原因的令人惊叹的 MSDN 文章。你可以在[这里](http://msdn.microsoft.com/en-us/magazine/dn166926.aspx)找到这篇文章。

用朱莉自己的话来说：

> 发生这种情况的原因是，当您使用 DbSet.Add 方法时，不仅根实体的状态被标记为“已添加”，而且图中上下文之前不知道的所有内容也被标记为已添加。即使开发人员可能知道该对象有一个现有的 Id 值，Entity Framework 还是尊重其 EntityState (Added) 并为该对象创建一个插入数据库命令，而不考虑现有的 Id。

因此，简而言之，当您说 时`Context.OptionUnits.Add(bridge);`，它还认为您也在尝试向其添加 Option 和 Unit 对象。相反，您需要使用 FK（正如她所提到的）然后添加它。

我认为这就是您在第二次尝试中尝试做的事情，但我想知道您如何检查它是否在`SelectedOption.OptionUnits`. 保存后是否要立即检查？在这种情况下，它不会显示，因为当它被实体框架拉取时，该值被缓存在内存中。之后您需要再次尝试调出该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:18:42.773

我发现了这个问题。添加子项后，我会运行一些逻辑来更新一些总数。问题是我使用了 RaiseDataMemberChanged("sum") 而不是 RaisePropertyChanged("sum")。RaiseDataMemberChanged() 必须将实体中的某些内容标记为已修改，这导致了这个问题。感谢 IronMan84 的所有帮助。

# java - 带有泛型和 Mockito 的 ClassCastException

> ID：15906220
> 
> 赞同：2
> 
> 时间：2013-04-09T15:34:22.830
> 
> 标签：java, generics, mockito, classcastexception

我有这个使用 JDK6、Junit3 和 Mockito 1.8.5 的案例（名称已更改以使其易于理解）：

```
public abstract class AbstractProcessorTest<P extends AbstractProcessor<T>, T extends AbstractProcess> {

@Mock(answer = CALLS_REAL_METHODS)
protected P processor;

@Mock(answer = RETURN_DEEP_STUBS)
protected T process;

public void setUp(){
 Mockito.initMocks(this);
 // some common configurations
 processor.setProcess(process);
 ...
}

}

public class ProcessorTest extends AbstractProcessorTest<Processor, ProcessAlpha>{    

@Mock
private Service service;

@Override
public void setUp(){
   super.setUp();
   doReturn(service).when(processor).getService();
}

public void testAMethod(){          
   processor.process();
}

} 
```

当我执行 testAMethod() 测试用例时，我得到了这个异常：

```
java.lang.ClassCastException: org.xyz.AbstractProcessor$$EnhancerByMockitoWithCGLIB$$c948b334 cannot be cast to org.xyz.ProcessorA 
```

当我检查这个方法调用时，它说在类中找不到这个方法。另一个奇怪的事情是我在 AbstractProcessor.setUp() 中调用方法时没有遇到任何异常（但在 ProcessorTest.setUp() 中失败）

这在我创建 AbstractProcessorTest 类之前没有发生，所以我相信这是一些与泛型和 Mockito 代理这些对象的方式相关的东西，我需要改变我的策略。

希望这已经足够清楚了。先感谢您，

塞巴斯.-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:47:08.243

所以我以前的问题与实际问题无关。尽管答案仍然成立，但当使用深度存根答案的模拟返回模拟时，就会发生这种异常。

那么真正的问题是什么，它仍然是由泛型和类型擦除引起的。你有两个不同的类：

考试：

```
public class ProcessorTest extends AbstractProcessorTest<Processor, ProcessAlpha> 
```

和测试的父母：

```
public abstract class AbstractProcessorTest<P extends AbstractProcessor<T>, T extends AbstractProcess> {

@Mock(answer = ...)
protected P processor; 
```

1.  所以编译器会首先编译`AbstractProcessorTest`，这样做时它会看到 P 实际上是一个`AbstractProcessor`，它会以这种方式编译类。
2.  然后编译器将编译`ProcessorTest`并看到`P`将解析为`Processor`，但它不会修改`AbstractProcessorTest`，因为它已经编译。它仍然会考虑`P`中所有可能的情况`ProcessorTest`，因此它的字节码可能包含可能的强制转换操作码。
3.  当您运行它时，基于字段实例化模拟的当前 Mockito 代码将看到字段`P processor`的类型`AbstractProcessor`而不是`Processor`您修复的类型`ProcessorTest`。当然，它会相应地创建模拟。
4.  在该`ProcessorTest.setUp`方法中提出了 CCE，因为由于该字段的通用性质，编译器肯定引入了静默强制转换操作码`processor`。

此外，将模拟配置为调用真实方法看起来很奇怪，这可能会导致许多问题，因为模拟没有使用状态进行初始化。也许您想改用间谍？

希望有帮助。

* * *

**以前的答案实际上并没有回答真正的问题。但仍可能证明对 Mockito 深存根有帮助**

是的，当前发布的版本（1.9.5）中的 Mockito 不支持具有深度存根的泛型（[参见 issue 230](https://code.google.com/p/mockito/issues/detail?id=230)），因为**Java 实现了具有类型擦除的泛型**。因此，您只会找到上界，无论是它`Object`还是擦除后已知的其他类型。

> 泛型更像是编译器的东西而不是运行时的东西。搜索谷歌，了解为什么 java 人长期以来都喜欢物化泛型。Neal Gafter 在 2006 年写了一篇关于它的文章 [http://gafter.blogspot.fr/2006/11/reified-generics-for-java.html](http://gafter.blogspot.fr/2006/11/reified-generics-for-java.html)，但还有其他有趣的读物。

**已编辑 vvvvvvvv 2015-01**

但是，编译器在某些特定情况下嵌入了一些有关泛型的数据，在您的示例中，使用此类声明`public class ProcessorTest extends AbstractProcessorTest<Processor, ProcessAlpha>`可以读取这两种类型。~~使用*笨重*且缓慢的反射 API。该代码存在于 Mockito 代码大师中，应该可以在您的示例中运行，但由于其他问题仍未发布。~~

由于 Mockito 1.10.x Mockito 更加了解泛型，即如果像此声明这样的模拟类型嵌入了类型或边界，它将使用它们，如果方法具有边界，它将使用它们。

这意味着这样的代码无需额外的存根即可工作，即 mockito 将发现嵌入字节码中的边界并在可能的情况下模拟它们（不是最终的也不是原始的）：

```
interface UberList<U> extends List<U extends Uber> {
    U firstUber();
    <D extends Driver> D driver();
}

uberList = mock(UberList.class, RETURNS_DEEP_STUB);

Uber u1 = uberList.iterator().next();
Uber u1 = uberList.firstUber();
Driver d = uberList.driver(); 
```

**已编辑^^^^^^^^**

当然运行时声明仍然无法被发现。例如在`List<Processor> pList;`泛型`Processor`类型中信息将被*删除*。编译器在编译时找到的唯一可用信息`List`。在不显示有关如何完成的太多细节的情况下，该类型信息将被解析`Object`为泛型类型信息`E`上限将由`Object`编译器解析（这是一个隐式上限，就像您不必编写一样`extends Object`）。

因此，与此同时，您可以转换为想要的类型，根本不使用深度存根答案，或者如果您喜欢冒险，您可以使用更新的深度存根答案为自己编译一个未发布的 Mockito 版本。

希望有帮助。

# sql - Intersystems Caché 是否具有“中间”功能？

> ID：15906225
> 
> 赞同：2
> 
> 时间：2013-04-09T15:34:32.557
> 
> 标签：sql, intersystems-cache

我想知道 Intersystems Caché 数据库上是否有[“中间”](http://www.w3schools.com/sql/sql_func_mid.asp)功能。我正在尝试使用它来解决这里的问题，我需要从第 8 个字符中读取任意大小的字符串，并且收到以下错误：

```
 Error: General error
    SQLState:  S1000
    ErrorCode: 0 
```

谢谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:42:37.897

您正在寻找 $EXTRACT。

[您可以在此处](http://docs.intersystems.com/cache20122/csp/docbook/DocBook.UI.Page.cls?KEY=RSQL_d_extract)找到文档。

# java - Websphere 7 上的 EJB @Stateless 和 @WebService

> ID：15906226
> 
> 赞同：4
> 
> 时间：2013-04-09T15:34:32.650
> 
> 标签：java, jax-ws, ejb-3.0, websphere-7

我到处寻找，试图弄清楚如何将无状态会话 bean 转换为 JAX-WS Web 服务（我使用的是 WAS 7、Websphere Integration Developer、EJB 3）。不是 Jax-RPC。我正式厌倦了与 WID 附带的向导乱搞。由于某种原因，它根本不允许我这样做......我尝试从 Java bean 创建一个 JAX-WS Web 服务，换句话说，我创建了一个 Java 类并在那个东西上运行向导，它创建了一个全新的项目...

是否有一个教程可以让我知道创建此 Web 服务所需的知识，而无需使用向导？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:28:37.247

来自 The Java EE 5 Tutorial try [A Web Service Example：helloservice - The Java EE 5 Tutorial](http://docs.oracle.com/javaee/5/tutorial/doc/bnbor.html)。

其他：

*   [EJB 和 Web 服务：两全其美](http://veithen.github.io/2009/11/15/ejb-and-web-services.html)
*   [Java EE 6/7: The Lean Parts](http://www.youtube.com/watch?v=vvtuFLz2prk)，JavaOne 会议
*   [样本 > Web 服务](http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp?topic=/com.ibm.etools.webservice.was.samples.ejb.doc/topics/wsejb_sample.html)，来自 IBM

* * *

## 例子

我写了一个小示例应用程序。

### 项目结构

```
`-- HelloEAR
|   |-- .project
|   `-- .settings
|       |-- org.eclipse.wst.common.component
|       |-- org.eclipse.wst.common.project.facet.core.xml
`-- HelloEJB
|   `-- .apt_generated
|   |   `-- org
|   |       `-- paulvargas
|   |           `-- ejb
|   |               `-- jaxws
|   |                   |-- SayHello.java
|   |                   |-- SayHelloResponse.java
|   |-- .classpath
|   |-- .factorypath
|   |-- .project
|   `-- .settings
|   |   |-- org.eclipse.jdt.apt.core.prefs
|   |   |-- org.eclipse.jdt.core.prefs
|   |   |-- org.eclipse.wst.common.component
|   |   |-- org.eclipse.wst.common.project.facet.core.xml
|   `-- ejbModule
|   |   `-- META-INF
|   |   |   |-- ibm-webservices-bnd.xmi
|   |   `-- org
|   |   |   `-- paulvargas
|   |   |       `-- ejb
|   |   |           |-- HelloBean.class
|   |   |           |-- HelloBean.java
|   |   |           |-- HelloLocal.class
|   |   |           |-- HelloLocal.java
|   |   |           |-- HelloRemote.class
|   |   |           |-- HelloRemote.java
|   |   |           `-- jaxws
|   |   |               |-- SayHello.class
|   |   |               |-- SayHelloResponse.class
`-- HelloWeb
|   `-- .apt_generated
|   |-- .classpath
|   |-- .factorypath
|   |-- .project
|   `-- .settings
|   |   |-- .jsdtscope
|   |   |-- org.eclipse.jdt.apt.core.prefs
|   |   |-- org.eclipse.jdt.core.prefs
|   |   |-- org.eclipse.wst.common.component
|   |   |-- org.eclipse.wst.common.project.facet.core.xml
|   |   |-- org.eclipse.wst.jsdt.ui.superType.container
|   |   |-- org.eclipse.wst.jsdt.ui.superType.name
|   `-- src
|   `-- WebContent
|   |   `-- WEB-INF
|   |       `-- classes
|   |       `-- lib
|   |       |-- web.xml 
```

![在此处输入图像描述](https://i.stack.imgur.com/0TJpv.png)

### HelloBean.java

```
package org.paulvargas.ejb;

import javax.ejb.Stateless;
import javax.jws.WebService;

@Stateless
@WebService
public class HelloBean implements HelloRemote, HelloLocal {
    public String sayHello(String name) {
        return "Hello, " + name + ".";
    }
} 
```

### HelloRemote.java

```
package org.paulvargas.ejb;

import javax.ejb.Remote;

@Remote
public interface HelloRemote {
    String sayHello(String name);
} 
```

### HelloLocal.java

```
package org.paulvargas.ejb;

import javax.ejb.Local;

@Local
public interface HelloLocal {
    String sayHello(String name);
} 
```

### ibm-webservices-bnd.xmi

```
<?xml version="1.0" encoding="UTF-8"?>
<com.ibm.etools.webservice.wsbnd:WSBinding
    xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI"
    xmlns:com.ibm.etools.webservice.wsbnd="http://www.ibm.com/websphere/appserver/schemas/5.0.2/wsbnd.xmi">
    <routerModules transport="http" name="HelloWeb.war" />
</com.ibm.etools.webservice.wsbnd:WSBinding> 
```

### web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>HelloWeb</display-name>
    <servlet>
        <servlet-name>org.paulvargas.ejb.HelloBean</servlet-name>
        <servlet-class>com.ibm.ws.websvcs.transport.http.WASAxis2Servlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>org.paulvargas.ejb.HelloBean</servlet-name>
        <url-pattern>/HelloBeanService</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

文件`SayHello.java`和`SayHelloResponse.java`由 IDE 自动生成。您可以在中看到已部署的 WSDL 文件`http://localhost:9080/HelloWeb/HelloBeanService/HelloBeanService.wsdl`

# sql-server - sql server 目录视图帮助生成存储过程？

> ID：15906227
> 
> 赞同：1
> 
> 时间：2013-04-09T15:34:34.033
> 
> 标签：sql-server, stored-procedures, ssms

我们可以使用`sql-server's`目录视图轻松地生成/重新创建表。我可以运行查询

```
select * from INFORMATION_SCHEMA.TABLES -- Get all the table names 
```

找到这样的专栏..

```
select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = 'Publishers' -- Get the cols for publisher table 
```

我可以像这样查询 in`sys.objects`和/或 in`sys.foreign_keys`以获取有关表、所有列、它们是否可以为空以及其他所有内容（等）的完整信息`primary key`，`check constraints`并且鉴于这些信息，我可以轻松地重新创建该表，整体（包括约束和一切）。这听起来可能是个坏主意，也许还有其他方法可以做到这一点，但这不是一个好习惯与否的问题。我想知道的是，是否有一个包含完整信息的目录`stored procedure(s)`？

说我有这样的过程

```
ALTER PROCEDURE [dbo].[proc_Author]
    -- Add the parameters for the stored procedure here
    @Flag INT = 1,
    @AuthorName NVARCHAR(50) = '',
    @AuthorId int = 0,
    @Address NVARCHAR(50) = ''
AS
BEGIN

    IF (@Flag = 1)
    -- INSERTS INTO TABLE DATA --
        BEGIN
            INSERT INTO Authors VALUES (@AuthorName, @Address);

        END

    ELSE IF (@Flag = 2)
        -- DELETES THE AUTHOR --
        BEGIN
            DELETE FROM Authors
            Where AuthorID = @AuthorId
        END

    END 
```

有什么方法可以让我查询`system catalog`并知道我的结构`Proc_Author`以便我可以重建它？我知道我可以查询`sys.procedures`，但它只显示琐碎的细节，我也跑了

```
select * from INFORMATION_SCHEMA.PARAMETERS
select * from sys.parameters 
```

`proc`尽管他们确实给了我有关我的 proc 正在使用的参数的信息，但如果一个人想从信息中构建它是不够的。所以，我错过了什么？`catalog views`如果可以，是否可以从 获得构建所需的所有信息？然后是哪一个？如果不是，那么在执行 a 之后，`stored proc`语句 (或其他什么) 实际存储在磁盘中的哪个位置？当我打开我的并右键单击并选择一个过程时，它会在一个新的查询窗口中打开它，因此它打开时，它必须从某个地方查看以了解它的结构是什么？我怎样才能获得它？`select``insert``SSMS``Modify``proc``disk/catalog views``proc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:47:42.700

试试看这里：

```
select * from sys.all_sql_modules 
```

您还可以像这样获取存储过程的脚本：

```
select object_definition(object_id('[dbo].[proc_Author]')) 
```

使用这些时，请检查您在 Management Studio 中返回文本的选项：

> 工具 -> 选项 -> 查询结果 -> SQL Server -> 结果转文本 -> 每列显示的最大字符数

返回的文本数量是有限制的。您可能需要将其 BCP 输出到一个文件以查看整个内容。

# java - java CLASSPATH 环境变量上的 jar 被忽略

> ID：15906233
> 
> 赞同：1
> 
> 时间：2013-04-09T15:34:52.513
> 
> 标签：java, bash, classpath

在我的 ~/.bashrc 中，我通过以下方式导出我的 java CLASSPATH：

```
CLASSPATH=$CLASSPATH:/home/user/java/libs/apache-ant-1.9.0/lib/*:/home/user/java/MyProject/libs/* 
```

文件夹“/home/user/java/MyProject/libs/”包含以下 jar：

```
colt.jar    mysql-connector-java-5.1.22-bin.jar
concurrent.jar  postgresql-8.4-703.jdbc4.jar 
```

当我尝试编译一个导入 colt.jar 部分的项目类时，我收到一条错误消息：

```
/src$ javac visualization/VisualizeCorrelationMatrix.java 
visualization/VisualizeCorrelationMatrix.java:16: cannot access cern.colt.matrix.impl.SparseDoubleMatrix2D
class file for cern.colt.matrix.impl.SparseDoubleMatrix2D not found
        int N = cm.columns();
                  ^ 
```

但是当按照以下方式编译它时，它可以正常工作：

```
/src$ javac -cp ".:/home/user/java/MyProject/libs/*" visualization/VisualizeCorrelationMatrix.java 
```

我检查了 CLASSPATH 变量和 manuel optino -cp 中的路径是否 100% 相同。echo $CLASSPATH 也返回正确的路径。

为什么我仍然会收到此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:46:37.617

您需要`export`在您的行中添加新的类路径变量`bashrc`：

```
export CLASSPATH=$CLASSPATH:/home/user/java/libs/apache-ant-1.9.0/lib/*:/home/user/java/MyProject/libs/* 
```

此外，如果您正在编译 java 的 shell 是在您更改 bashrc 文件之前创建的，那么您需要使用`source ~/.bashrc`.

# ios - IAP - 如果内容下载失败或收据无效，如何取消购买的交易？

> ID：15906236
> 
> 赞同：6
> 
> 时间：2013-04-09T15:34:56.247
> 
> 标签：ios, in-app-purchase

我正在尝试用 IAP 找出一些东西。

在文档中，我看到只有在为用户成功下载购买的内容后，我才需要调用完成交易：

> 您的应用程序应该调用 finishTransaction: 只有在它成功处理了事务并解锁了用户购买的功能之后。

我有这种情况-

1.  用户购买内容。
2.  购买完成后，我会将收据发送到我的服务器上进行验证。
3.  如果没有问题，我正在将内容下载给用户。

**但是**，如果我收到无效收据怎么办？我应该打电话给 finishTransaction 吗？或者干脆删除交易？

其他情况是下载失败，用户离开应用程序一段时间。有没有办法取消购买，让他稍后重新开始？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:43:15.697

*   如果验证失败，您应该调用 finishsTransaction 但不提供内容并告知用户出现问题。

*   您无法取消购买，一旦您收到收据即表示购买已完成。您必须编写自己的机制，以便在可能的情况下重试下载。

# php - Lithium PHP DocumentSet 缓存

> ID：15906238
> 
> 赞同：0
> 
> 时间：2013-04-09T15:35:00.633
> 
> 标签：php, caching, memcached, lithium

我正在尝试缓存查询（DocumentSet）的结果，以期提高我的客户应用程序的性能。

因此，在查找之前，应用程序将检查是否存在适当的缓存键，如果存在，则提供该键而不是访问数据库。

在我看来，这似乎很简单，但是在实施后，我得到的只是超时。

应用程序似乎无法将 DocumentSet 对象存储到缓存中？

很可能我错过了一些明显的东西......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:39:06.830

所以，我无法解释原因，但我无法缓存文档集。

相反，我被迫缓存文档集->to('array')。然后，在从缓存中读取时，通过传递模型模式和缓存数组创建一个新的 DocumentSet 对象，并将其返回。

似乎工作得相当好，如果没有我希望的那么优雅。

# jquery - Seaside + jQuery 变量检查 onBlur

> ID：15906240
> 
> 赞同：1
> 
> 时间：2013-04-09T15:35:01.003
> 
> 标签：jquery, smalltalk, seaside

如何将变量检查编码到 Seaside jQuery onSuccess: 脚本中？

我有一个应用程序，其输入字段会触发值更改，然后重新呈现视图。它可以很好地根据显示的值提供域数据的生动反馈。

如果有未决的更改，该视图会显示“保存”和“取消”按钮。如果用户在输入字段后立即单击任一按钮，则输入字段的 onBlur: 脚本会阻止按钮操作发生。推荐的解决方案（[由于文本框 onblur 事件中的警报框导致按钮单击事件丢失](https://stackoverflow.com/questions/3245350/button-click-event-lost-due-to-the-alert-box-in-text-box-onblur-event)）是使用按钮的 'onmousedown' 事件来设置 onBlur 脚本检查的全局变量。

通过我的测试代码，我可以看到设置了全局“saveCancelButtonClicked”，但我不知道如何检查该值以防止呈现步骤。

```
html button 
  onMouseDown: 'saveCancelButtonClicked = 1;'; 
  ...

html textInput
 onBlur: ((
  html jQuery ajax 
      callback: [:stringValue | self checkValue: stringValue] 
          value: html jQuery this value)
      onSuccess: (
        (html jQuery id: 'selectedComponent') load html: [:renderer | 
          renderer script: 'console.log(saveCancelButtonClicked); '.
          self renderSelectedComponentOn: renderer]) )] 
```

如果按下保存按钮，我可以看到 console.log 显示“1”。那么如何检查该值并跳过“self renderSelectedComponentOn:”步骤？

在 javascript 中很容易做到（微不足道的 if 语句），但我在 Seaside 中没有找到示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:41:55.090

Joachim Tuchel 在 Seaside 邮件列表中回答了这个问题：

```
onSuccess: (
    (JSStream on: 'saveCancelButtonClicked == 0') then: (
        (html jQuery id: 'portalSelectedComponent') load html: [:renderer | 
```

...呈现保存和取消按钮的方法包含...

```
 html script: 'saveCancelButtonClicked = 0;' . 
```

...保存和取消按钮都实现...

```
 onMouseDown: 'saveCancelButtonClicked = 1;'; 
```

...按我的意愿工作：更新输入字段后按“保存”或“取消”按钮会在第一次单击时触发回调。失去焦点会正常触发输入字段 onBlur 动作。

# mysql - Symfony2 / Doctrine2 - 获取 sql 最小、最大日期值

> ID：15906241
> 
> 赞同：2
> 
> 时间：2013-04-09T15:35:02.043
> 
> 标签：mysql, symfony, doctrine-orm, max, min

我的问题是，当我想获得 2013-04-08、2013-04-07 和 2013-04-06 之间的最大值或最小值时，最小值和最大值的响应始终为 2013-04-08

我的脚本：

```
$max_date =     $em ->createQuery("SELECT MAX(p.date) FROM TrackingMarqueBundle:PointdeventeOperateursSaisie p")
                        ->getSingleScalarResult();
    $min_date =     $em ->createQuery("SELECT MIN(p.date) FROM TrackingMarqueBundle:PointdeventeOperateursSaisie p")
                        ->getSingleScalarResult(); 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-15T13:12:40.290

也许

```
$em ->createQuery("SELECT MAX(p.date) max_date,MIN(p.date) min_date FROM TrackingMarqueBundle:PointdeventeOperateursSaisie p")->getArrayResult(); 
```

我有这个代码可以正常工作

```
doctrine/orm                         v2.5.10 
```

# javascript - Three.js OBJLoader .obj 模型不投射阴影

> ID：15906248
> 
> 赞同：2
> 
> 时间：2013-04-09T15:35:17.020
> 
> 标签：javascript, three.js, webgl

我正在做一个项目，我希望允许从 OBJLoader.js 加载的 .OBJ 模型从聚光灯下投射阴影。灯光会从其他普通对象投射阴影，但 .OBJ 似乎不会投射阴影。

该问题的一个可能症状如下：当这些普通对象在单击地板时创建时，它们被输入到数组 Objects[] 中，这反过来又使它们可以单击以将对象添加到自身之上。.OBJ 模型也被添加到这个数组中，但是我不能点击它来在它上面添加模型；好像光线投射器没有检测到它。

我将包含所有代码，因为问题可能出在无法预料的地方。

[这里](http://www.powertrooper.com/3D/demos/issues/OBJShadows)有一个工作链接

[http://www.powertrooper.com/3D/demos/issues/OBJShadows](http://www.powertrooper.com/3D/demos/issues/OBJShadows)

尝试单击地板以查看其他对象如何投射阴影。

有人有想法么？杜布先生？你在外面吗？:)

ps：我不知道为什么在我的浏览器中，我留下的链接指向一个名为“4safe.in”的恶意软件站点。尝试复制并粘贴我猜的链接...

以防万一-这是一段代码，其中包含可能导致问题的大部分内容。

```
 renderer.shadowMapEnabled = true;///////////////////////////////////////////// RENDERER /// <------------Renderer and lights set up to cast shadows
    light.castShadow = true;
    light.shadowDarkness = 1;
    renderer.shadowMapSoft = true;
    floor.receiveShadow = true;

    var texture = new THREE.Texture();
    var loader = new THREE.ImageLoader();
    loader.addEventListener( 'load', function ( event ) {

        texture.image = event.content;
        texture.needsUpdate = true;

    } );
    loader.load( 'modeltest/ash_uvgrid01.jpg' );

    // model

    var loader = new THREE.OBJLoader();
    loader.addEventListener( 'load', function ( event ) {

        var newModel = event.content;

         newModel.traverse( function ( child ) {

             if ( child instanceof THREE.Mesh ) {

                 child.material.map = texture;

            }

         } );

        newModel.position.set (200,30,0);
        newModel.castShadow = true;///////////////////////////// <------ This doesn't seem to be working.
        scene.add( newModel );
        objects.push( newModel );/////////////////////////////// <------ The other HINT: because of this, the raycaster SHOULD allow us to click the model and create a new block. But we can't.

    });

    loader.load( 'modeltest/male02.obj' ); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T19:46:08.310

对象的每个子网格都必须`castShadow`设置为`true`.

```
newModel.traverse( function ( child ) {

    if ( child instanceof THREE.Mesh ) {

        child.material.map = texture;
        child.castShadow = true;

    }

} ); 
```

要`raycaster.intersectObjects()`使用您的对象，您需要将递归标志设置为`true`.

```
var intersects = raycaster.intersectObjects( objects, true ); 
```

三.js r.57

# ios - 如何使用 Frank 自动化生成代码覆盖率文件 - 本地（没有 Jenkins/Hudson）

> ID：15906253
> 
> 赞同：1
> 
> 时间：2013-04-09T15:35:22.867
> 
> 标签：ios, cucumber, code-coverage, ui-automation, frank

我看过各种描述如何使用无头应用程序运行方法在 Jenkins/Hudson 上运行 Frank 自动化的文章。但是是否有可能在本地运行 Frank Automation 并生成覆盖文件（gcno、gcda？）

如何让测试 App 优雅退出 Frank 并获得 gcno 和 gcda ？

# php - 带有 WRITEFUNCTION 回调的并行 cURL 请求

> ID：15906261
> 
> 赞同：2
> 
> 时间：2013-04-09T15:35:32.210
> 
> 标签：php, curl, php-closures

我正在尝试按照以下帖子中的建议限制我的 cURL 响应：[Retrieve partial web page](https://stackoverflow.com/questions/1538952/retrieve-partial-web-page) and [PHP CURLOPT_WRITEFUNCTION doesn't seem to be working](https://stackoverflow.com/questions/7126841/php-curlopt-writefunction-doesnt-appear-to-be-working)。这个想法是将响应限制为回调函数中指定的 4000 个字符。

我编写了以下函数，但我已经知道它没有意义，因为回调函数定义中的参数在循环中不会像在函数调用中那样变化。在实际调用函数时，$key 的值是固定的，所以我对该索引的引用不会改变。

似乎每个循环都需要一个新的闭包函数，每个循环都需要引用自己的 $full_length 变量。但是，我不明白这怎么可能。为了做到这一点，似乎我必须以某种方式引用闭包对象才能指定特定的 $full_length 变量。

任何帮助，将不胜感激。谢谢。

```
function get_headers($urls){
    $curly = array();
    $result = array();
    $mh = curl_multi_init();
    $obj = $this;
    foreach ($urls as $key => $url) {
        $this->full_length[$key] = 0;
        $callback = function ($ch, $string) use ($obj, $key){
                    $length = strlen($string);
                    $obj->full_length[$key] += $length;
                    if($obj->full_length[$key] >= 4000){
                        return -1;
                    }
                    return $length;
                };
        $curly[$key] = curl_init
        curl_setopt($curly[$key], CURLOPT_URL,            $url);
        curl_setopt($curly[$key], CURLOPT_HEADER,         0);
        curl_setopt($curly[$key], CURLOPT_WRITEFUNCTION, $callback);
        curl_setopt($curly[$key], CURLOPT_RETURNTRANSFER, 1);
        curl_multi_add_handle($mh, $curly[$key]);
    }
    $running = null;
    do {
        curl_multi_exec($mh, $running);
    } while($running > 0);
    foreach($curly as $key => $cnt) {
        $content = curl_multi_getcontent($cnt);
        curl_multi_remove_handle($mh, $cnt);
        if (strlen($content) > 0){
            $result[$key] = $content;
        } else {
            curl_multi_close($mh);
            return FALSE;
        }
    }
    curl_multi_close($mh);
    return $result;
} 
```

编辑：

我发现一个帖子完全符合我的要求，但它在 javascript: [closure inside a for loop - 以循环变量作为参数的回调](https://stackoverflow.com/questions/6978911/closure-inside-a-for-loop-callback-with-loop-variable-as-parameter)。我编写了以下函数来尝试在 PHP 中做同样的事情：

```
function get_write_function($key){
    $this->full_length[$key] = 0;
    $obj = $this;
    $funky = function ($ch, $str) use ($obj, $key){
        $length = strlen($str);
        $obj->full_length[$key] += $length;
        if($obj->full_length[$key] >= 4000){
            return -1;
        }
        return $length;
    };
    return $funky;
} 
```

代码运行没有错误，但它仍然没有达到我想要的效果。关闭我的 cURL 句柄后，我转储了 $full_length 数组，它只显示：

```
array([0] => 0, [1] => 0) 
```

这表明它们是由 get_write_function 初始化的（因为我没有在类声明中初始化任何东西），但是这些值之后从未更新过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:55:08.590

我终于弄明白了。最大的问题是 cURL 忽略了 WRITEFUNCTION 直到我将它作为指定的最后一个选项，正如我在此处发布的那样：[cURL WRITEFUNCTION not Being Called](https://stackoverflow.com/questions/15937055/curl-writefunction-not-being-called)。我实际上不需要返回传输，因为我将输出写入类变量。这是必要的，因为当回调返回 -1 时，不会返回任何内容。以下代码效果很好：

```
var $full_length = array();
var $result = array();

function get_headers($urls){
    $curly = array();
    $mh = curl_multi_init();
    foreach ($urls as $key => $url) {
        $callback = $this->get_write_function($key);
        $curly[$key] = curl_init
        curl_setopt($curly[$key], CURLOPT_URL,            $url);
        curl_setopt($curly[$key], CURLOPT_HEADER,         0);
        curl_setopt($curly[$key], CURLOPT_WRITEFUNCTION, $callback);
        curl_multi_add_handle($mh, $curly[$key]);
    }
    $running = null;
    do {
        curl_multi_exec($mh, $running);
    } while($running > 0);
    foreach($curly as $key => $cnt) {
        curl_multi_remove_handle($mh, $cnt);
    }
    curl_multi_close($mh);
    return $this->result;
}

function get_write_function($key){
    $this->full_length[$key] = 0;
    $this->result[$key] = '';
    $obj = $this;
    $funky = function ($ch, $str) use ($obj, $key){
        $obj->result[$key] .= $str;
        $length = strlen($str);
        $obj->full_length[$key] += $length;
        if($obj->full_length[$key] >= 4000){
            return -1;
        }
        return $length;
    };
    return $funky;
} 
```

# c++ - 获取 std::list 的前 N 个元素？

> ID：15906269
> 
> 赞同：3
> 
> 时间：2013-04-09T15:35:53.303
> 
> 标签：c++, visual-c++-2010, stdlist

如果 N >= 列表大小（并且也处理 N = 0），获取作为 std::list 的前 N ​​个元素或整个列表的新列表的正确且安全的方法是什么？

**更新**

其实我不一定需要新的列表，我只是想在后续代码中对列表的子集进行操作。我认为创建一个新列表是一种合理的方法（注意列表大小通常小于 50）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T15:40:11.650

```
std::list<int> a;
size_t n = 13;
auto end = std::next(a.begin(), std::min(n, a.size())); 
```

创建一个包含第一个列表的前 n 个元素的新列表：

```
std::list<int> b(a.begin(), end); 
```

或填充现有列表：

```
std::list<int> b;
std::copy(a.begin(), end, std::back_inserter(b)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T15:41:05.487

```
template<typename T>
std::list<T> first_n(const std::list<T> &in, std::size_t n) {
    return std::list<T> out{in.begin(),
      std::next(in.begin(), std::min(in.size(), n))};
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T15:38:57.577

```
// list<int> input;
list<int> output;
for (list<int>::const_iterator i = input.begin(); i != input.end() && N > 0; ++i, --N)
    output.push_back(*i); 
```

# c# - 将非数字char转换为int？

> ID：15906273
> 
> 赞同：4
> 
> 时间：2013-04-09T15:36:06.667
> 
> 标签：c#

我今天遇到了这行代码：

`int c = (int)'c';`

我不知道您可以将 a`char`转换为`int`. 所以我测试了一下，发现 a=97, b=98, c=99, d=100 等等...

为什么是'a' 97？这些数字与什么有关？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T15:39:05.980

其他人（到目前为止）都提到了 ASCII。这是一个非常有限的观点 - 它适用于`'a'`，但不适用于任何带有重音等的东西 - 可以很容易地用 表示`char`。

A`char`只是一个无符号的 16 位整数，它是一个[UTF-16](http://en.wikipedia.org/wiki/UTF-16) *代码单元*。*通常*这相当于一个 Unicode 字符，但并非总是如此——有时单个完整字符需要多个代码单元。有关更多详细信息，请参阅文档[`System.Char`](http://msdn.microsoft.com/en-us/library/system.char.aspx)。

`char`从to的隐式转换`int`（您不需要在代码中进行强制转换）只是以自然、无损的方式将该 16 位无符号整数转换为 32 位有符号整数 - 就像您有一个`ushort`.

请注意，ASCII 中的每个有效字符在 UTF-16 中具有相同的值，这就是为什么当示例只是来自 ASCII 集中的示例时，这两者经常被混淆。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T15:36:53.140

`97`是 letter 的 UTF-16 编码单元值`a`。

基本上这个数字与给定字符的 UTF-16 代码单元有关。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T15:37:12.920

这些是[代表字符的 ASCII 值](http://en.wikipedia.org/wiki/ASCII)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T15:37:14.083

它们是字符代码，通常称为 ASCII 值。

但是，从技术上讲，字符代码不是 ASCII。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T15:37:49.510

它们是对应 ascii 的十进制表示： [http](http://www.asciitable.com/index/asciifull.gif) ://www.asciitable.com/index/asciifull.gif 所以“a”是 97

# javascript - 两列网站大小调整

> ID：15906274
> 
> 赞同：-4
> 
> 时间：2013-04-09T15:36:16.917
> 
> 标签：javascript, jquery, html, css

你如何创建一个两列，其中一个 div 在翻转时占据整个屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:12:48.463

这是一个非常快速的示例，说明如何在 jquery 中完成此操作，如果只是为了给您一些方向：
[jsfiddle](http://jsfiddle.net/W7jxc/3/)

**HTML**

```
<div id="wrapper">
    <div class="col one"></div>
    <div class="col two"></div>
</div> 
```

**JS**

```
$(function() {
    // Mouse over div
    $(".col").mouseenter(function() {
        // If it's the second div, we want to move it left while making it bigger
        if($(this).hasClass("two")) {
            // we use .stop to stop all current animations
            // Also we add an active class to put it on top
            $(this).stop().addClass("active").animate({"left": "0px", "width": "98%"}, 500);
        }
        // otherwise we dont care, just make it bigger
        else {
             // Also we add an active class to put it on top
            $(this).stop().addClass("active").animate({"width":"98%"}, 500);
        }
    });
    // Mouse off div
    $(".col").mouseleave(function() {
        // If it's the second div, we want to move it back to 45% while making it smaller
        if($(this).hasClass("two")) {
            $(this).stop().animate({"left": "50%", "width":"45%"}, 500).removeClass("active");
        }
        else {
             $(this).stop().animate({"width":"45%"}, 500).removeClass("active");
        }
    });
}); 
```

# text - 需要在 vbscript 中将文本文件从 UTF8 转换为 Unicode

> ID：15906280
> 
> 赞同：4
> 
> 时间：2013-04-09T15:36:29.907
> 
> 标签：text, unicode, encoding, utf-8, vbscript

我在一个文件夹中有一堆文本文件，我需要将编码更改为 Unicode，而不是手动打开文件并将它们保存为 Unicode，我想要一个脚本来执行此操作。

这些文件目前采用 UTF-8 编码，我极其有限的脚本能力无法弄清楚这一点。我发现下面的代码可以从 ANSI 转换为 Unicode，当我使用此代码时，它确实将其转换为 Unicode，但它会弄乱字符，因此转换实际上不起作用。有什么想法吗？提前致谢。

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set oFolder = fso.GetFolder("C:\test")
Set oFiles = oFolder.files

For each file in oFiles
If Right(file.Name, 3) = "txt" Then
Set ANSIFile = fso.OpenTextFile(file.path, 1, False, False)
ANSIContent = ANSIFile.ReadAll
Set UNICODEFile = fso.OpenTextFile(file.path, 2, False, True)
UNICODEFile.Write ANSIContent
End If
Next 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T17:10:38.860

不幸的是，VBScript 本身不支持这种转换。但是，您可以使用[`ADODB.Stream`](http://msdn.microsoft.com/en-us/library/ms677486)对象：

```
Set stream = CreateObject("ADODB.Stream")
stream.Open
stream.Type = 2 'text
stream.Charset = "utf-8"
stream.LoadFromFile "C:\input.txt"
text = stream.ReadText
stream.Close

Set fso = CreateObject("Scripting.FileSystemObject")
Set f = fso.OpenTextFile("C:\output.txt", 2, True, True)
f.Write text
f.Close 
```

或者更精简一点：

```
Set fso = CreateObject("Scripting.FileSystemObject")

Set stream = CreateObject("ADODB.Stream")
stream.Open
stream.Type = 2 'text
stream.Charset = "utf-8"
stream.LoadFromFile "C:\input.txt"
fso.OpenTextFile("C:\output.txt", 2, True, True).Write stream.ReadText
stream.Close 
```

如果要替换现有文件，则必须使用第一个版本并使用相同的文件进行输入和输出。使用这样的循环遍历文件夹中的所有文件：

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set stream = CreateObject("ADODB.Stream")

For Each f In fso.GetFolder("C:\source\folder").Files
  stream.Open
  stream.Type = 2 'text
  stream.Charset = "utf-8"
  stream.LoadFromFile f.Path
  text = stream.ReadText
  stream.Close

  fso.OpenTextFile(f.Path, 2, True, True).Write text
Next 
```

# facebook - facebook App ID 和 App Secret 是否特定于使用 facebook connect 的每个用户

> ID：15906283
> 
> 赞同：1
> 
> 时间：2013-04-09T15:36:38.217
> 
> 标签：facebook, servlets, jsf-2

大家好，我在使用 facebook connect 时遇到问题，我正在使用这些 API 让用户使用他们的 facebook 帐户登录到我的 Web 应用程序，作为上一步，我从[developer.facebook](https://developers.facebook.com/)获得了 App ID 和 APP Secret ，问题是登录不会验证任何帐户，除了我在制作 App ID 和 App 机密时使用的帐户，请帮助我理解这些问题

注意：我使用这些[教程](http://www.adfkickstart.com/facebook-user-authentication-in-java-web-application)将我的 Web 应用程序与 facebook connect 集成

为了更清楚，这是开始 jsf 页面（源代码在我的帖子中提到的链接中可用）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core">
<h:head>
</h:head>
<h:body>
    <h1>Login Page</h1>
    <h:form id="loginForm">
        <p:button value="Facebook Connect" href="#{loginPageCode.facebookUrlAuth}" />
        <br/><br/>
        <h:outputText value="#{loginPageCode.userFromSession}"></h:outputText>
    </h:form>
</h:body> 
```

这是托管bean：

```
@ManagedBean(name = "loginPageCode")
@SessionScoped
public class LoginPageCode implements Serializable {
private static final long serialVersionUID = -1611162265998907599L;

public String getFacebookUrlAuth() {
    HttpSession session = (HttpSession) FacesContext.getCurrentInstance()
            .getExternalContext().getSession(false);
    String sessionId = session.getId();
    String appId = "3827326728372872";
    String redirectUrl  = "http://localhost:8080/Test/index.sec";
    String returnValue = "https://www.facebook.com/dialog/oauth?client_id="
            + appId + "&redirect_uri=" + redirectUrl
            + "&scope=email,user_birthday&state=" + sessionId;
    System.out.println("Return Value---->"+returnValue);
    return returnValue;
}

public String getUserFromSession() {
    HttpSession session = (HttpSession) FacesContext.getCurrentInstance()
            .getExternalContext().getSession(false);
    String userName = (String) session.getAttribute("FACEBOOK_USER");
    System.out.println("FACEBOOK_USER-->"+userName);
    if (userName != null) {
        return "Hello " + userName;
    } else {
        return "";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:40:19.527

要回答您标题中的问题 -
不，任何用户的应用程序 ID 和密码都是相同的。

这里的问题（我假设）是您的应用程序处于沙盒模式。禁用该模式，一切都应该工作。

沙盒模式用于应用程序开发过程中，只有应用程序设置的“角色”部分中列出的用户才能访问应用程序。

# c - 使用 GCC 在另一个目录中的静态库和头文件

> ID：15906286
> 
> 赞同：1
> 
> 时间：2013-04-09T15:36:47.160
> 
> 标签：c, gcc, header-files, include-path

我在[这里](http://segfault.in/2008/04/how-to-create-static-libraries-with-gcc/)看如何使用 GCC 做静态库，解释很清楚（尽管我不得不重写阶乘函数）：我有一个函数（fact.c），函数的头文件（fact.h ) 和 main 函数 (main.c)，它们都在我的主目录中。

**事实.h**

```
int fact (int); 
```

**事实.c**

```
int
fact (int f) {
  if ( f == 0 )
    return 1;
else
    return (f * fact ( f - 1 ));
} 
```

**主程序**

```
#include <stdio.h>
#include "fact.h"
int main(int argc, char *argv[])
{
        printf("%d\n", fact(3));
        return 0;
} 
```

所以我必须首先生成目标文件（阶段1）......

```
$ gcc -c fact.c -o fact.o 
```

...然后生成静态库（第 2 阶段）...

```
$ ar rcs libfact.a fact.o 
```

...稍后进行静态库链接过程（第 3 阶段）...

```
$ gcc -static main.c -L. -lfact -o fact 
```

...最后运行程序（第 4 阶段和最终阶段）

```
$ ./fact 
```

我的问题如下。假设我的程序太大了，我别无选择，只能将头文件放在头文件目录 (/include/fact.h) 中，而静态库也将放在另一个目录 (/lib/libfact.a) 中。在这种情况下，该程序的编译和/或代码将如何变化？

**编辑/问题已解决**：首先，main.c 已更正，以便在另一个名为 include 的目录中包含标题。请记住，在这种情况下，两个 .c 文件都在主目录中。

**主程序**

```
#include <stdio.h>
#include "include/fact.h"
int main(int argc, char *argv[])
{
        printf("%d\n", fact(3));
        return 0;
} 
```

其次，要在另一个目录中生成静态库（第 2 阶段），这就是我所做的：

```
$ ar rcs lib/libfact.a fact.o 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:41:56.363

这是你的答案，

$ gcc -static main.c -L。-lfact -o 事实

-L 将目录添加到要搜索的目录列表中 -l

它在您提供的链接中。如果您正确放置搜索方向和低搜索范围，则不会有问题。否则它不会编译代码。因为代码不知道标题在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:56:20.867

您可以添加 -I 以指定包含路径。

```
gcc -I/include fact.c

gcc -I/include -static main.c -L/lib -lfact -o fact_main 
```

# git - 使用 git 切换到其他分支和 master 不再列在分支中

> ID：15906300
> 
> 赞同：2
> 
> 时间：2013-04-09T15:37:26.370
> 
> 标签：git, aptana

我刚刚在 cfbuilder 2.0.1 中安装了 aptana。连接到我们在 github 上的现有 git 存储库，一切看起来都很棒。所有现有的分支机构都在名单上。我切换到 master 的另一个分支，一切看起来仍然很好。

当我去切换回master时，它不在分支列表中。我最终在命令提示符下切换。cfbuilder 中仍然没有 master 分支。我重新启动了 cfbuilder，它现在说我在 master 分支上。

所以这看起来不像是正常的 git 操作。我错过了什么吗？

谢谢

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:36:52.017

另外-您确定没有其他提交者意外删除了主分支本身吗？afaik，git 中没有任何内容表明总会有一个 master 分支 - 您可以创建一个 git repo，其中默认分支称为“xyz”，例如。

# android - 如何将可绘制对象设置为 TextView 的文本？

> ID：15906301
> 
> 赞同：2
> 
> 时间：2013-04-09T15:37:35.797
> 
> 标签：android, text, textview, android-drawable

简短的问题：

假设我有一个 TextView，并且我希望文本本身（不是背景）将有一个可绘制设置（而不仅仅是纯色），我应该怎么做？

我发现的唯一解决方案是[这个](https://stackoverflow.com/a/13085545/878126)，但它仅适用于渐变色，我希望能够使用任何可绘制对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:34:38.153

好的，我想我已经找到了一个可能的解决方案，但我对此有一些注意事项：

1.  它不适用于任何可绘制对象。它用于位图，因此您需要以某种方式将其转换为位图。

2.  它要求您知道 textView 的大小（您可以将[其](https://stackoverflow.com/a/10433386/878126)用于此目的）

3.  它要求您有足够的内存来存储与 textView 大小相同的缩放位图。

4.  不知道如何使它按字符或按行工作。

这是代码：

```
public static void setBitmapOnTextView(final TextView tv, final Bitmap bitmap) {
    final TileMode tile_mode = TileMode.CLAMP;
    final int height = tv.getHeight();
    final int width = tv.getWidth();
    final Bitmap temp = Bitmap.createScaledBitmap(bitmap, width, height, true);
    final BitmapShader bitmapShader = new BitmapShader(temp, tile_mode, tile_mode);
    tv.getPaint().setShader(bitmapShader);
} 
```

我希望有一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:50:32.410

**编辑：**

我不相信可以更改文本上使用的实际笔画，您可能拥有的最接近的最佳选择是使用不同的字体。

在 android 中，您可以使用任何 *.ttf 字体“绘制”任何文本。

为此，您必须将文件包含在您的资产文件夹中并从代码中调用（也许有一种使用 XML 的方法，但我不知道如何）：

```
TypeFace mFont = TypeFace.createFromAsset(mContext.getAssets(), "my_font.ttf");
mTextView.setTypeFace(mFont); 
```

我认为那是您将在文本上获得不同笔触的结尾。

**原答案：**

TextView 具有以下属性：

```
Drawable Top
Drawable Bottom
Drawable Left
Drawable Right 
```

您在 XML 上设置的。或者你可以打电话

```
setCompoundDrawables(left, top, right, bottom) 
```

从代码！

# jakarta-ee - JPQL 查询和 JPA 持久性上下文中的批量更新是什么？

> ID：15906305
> 
> 赞同：0
> 
> 时间：2013-04-09T15:37:42.350
> 
> 标签：jakarta-ee, jpa, sql-update, jpql, second-level-cache

JPA 2.0 规范 (JSR 317) 说：

```
The persistence context is not synchronized with the result of the bulk update or delete. 
```

究竟**什么是**批量*更新*？

在我看来，“批量更新”和“定期更新”之间存在 [或者更确切地说*应该是*] 区别。我想相信批量更新是更新多个实体的更新。因此，应该有一个不被归类为“批量”的更新，一种只针对一个实体的更新操作。在这种情况下，该操作是否更新一级缓存非常重要。

该规范从未解决此问题，也从未对“批量更新”这一表述给出明确的定义。我也找不到关于该主题的任何其他来源。我尽力测试了一个应用程序管理的本地资源实体管理器（使用 EclipseLink 2.3.2.v20111125-r10461）并且可以确认持久性上下文确实已经过时，即使我们执行只针对一个单一实体的更新查询. JPA 提供者也没有调用我附加到测试类的实体侦听器。

在阅读 JPA 2.0 规范后，我假设这仅适用于“批量更新”，即更新针对受影响行大于 1 的多个实体的查询。但考虑到前面描述的测试结果，我开始认为没有“定期更新”之类的东西，所有更新查询*都是*“批量更新”。

如果这是真的，那么故事的寓意就是只在我们执行`EntityManager#find`、`EntityManager#merge`和`EntityManager#remove`JPQL 选择查询（`Query#getResultList`和`Query#getSingleResult`）时才插入缓存的内容。但是，如果我们执行了 JPQL 更新或删除查询（），我们**不应该推缓存。**`Query#executeUpdate`为了 Java EE 新手的利益，应该添加其他应用程序进程和直接数据库调用 (JDBC) 也可以使缓存无效。不管这是否属实，还有一件事我无法理解：

**这种设计背后**的基本原理是什么，为什么 JPA 提供者不应该同步持久性上下文和/或他的二级缓存？我的第一个猜测是性能原因，但话又说回来，我不知道。

有知道的给我吧！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:31:22.443

“BULK UPDATE”显然是使用诸如“ `UPDATE MyEntity SET field1 = val1 WHERE field2 < 345`”之类的查询的更新（就像 BULK DELETE 是一个 DELETE 查询一样）。正常更新是您使用 setter 直接更新托管实体的字段。

基本原理：批量更新的全部意义在于不必将对象加载到内存中，或者确定是否已经管理了任何受影响的对象。您可能会发现大多数 JPA 实现会在执行 BULK UPDATE 时将可能受影响的对象逐出 L2 缓存。

# android - android setOnItemLongClickListener 与 textIsSelectable 属性冲突设置为 true

> ID：15906307
> 
> 赞同：1
> 
> 时间：2013-04-09T15:37:46.030
> 
> 标签：android, conflict, behavior

嗨，所有 Android 专家：

我有一个使用 TextView 的列表视图项目布局，它设置为 **android:textIsSelectable="true"**

在我的活动中，我设置了列表项，长按打开操作菜单：

```
listView.setOnItemLongClickListener(new OnItemLongClickListener() {
            // Called when the user long-clicks on someView
            @Override
            public boolean onItemLongClick(AdapterView<?> parent,
                    View view, int position, long id) {
                if (mActionMode != null) {
                    return false;
                }

                selectedLeaveId = position;

                // Start the CAB using the ActionMode.Callback defined above
                mActionMode = MyActivity.this
                        .startActionMode(mActionModeCallback);
                view.setSelected(true);
                return true;
            }
        }); 
```

在运行时，如果我长按列表项的文本，我会首先获得顶部的操作菜单。然后我再次长按文本，我得到顶部的文本选择菜单。

我正在考虑将 set textisselectable 设置为 false，然后再添加一个实际菜单项来打开选择文本菜单，但这听起来是一个奇怪的解决方案......

有没有办法解决这个冲突，或者这实际上是一个糟糕的实现，这两种行为不能共存？

提前致谢

# python - 如何在python中嗅探HTTP数据包？

> ID：15906308
> 
> 赞同：17
> 
> 时间：2013-04-09T15:37:45.847
> 
> 标签：python, http, sniffer

我想通过python（version2.6 ..这可能吗？我可以用scapy或没有其他外部模块来嗅探我计算机中的所有HTTP数据包吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T17:14:41.340

[Scrapy](http://scrapy.org/)仅用于从网页或类似的结构化文档中提取数据。

要实际读取来自 NIC 的数据包，您最好的性能选择可能是使用具有 python 绑定的 C/C++ API。

例如 WireShark 有一个[Python API](http://wiki.wireshark.org/Python)。

[Pcapy](http://corelabs.coresecurity.com/index.php?module=Wiki&action=view&type=tool&name=Pcapy)是一个使用 libpcap 进行数据包捕获的模块。

[LibPCAP](http://www.tcpdump.org/index.html)是为 TCPDUMP 编写的数据包捕获库，也用于 WireShark。

另一种选择是尝试 d​​pkt python 模块。这是一篇不错[的文章](http://www.commercialventvac.com/dpkt.html)。这是一个使用 dpkt 和 pcap 来嗅探 HTTP 数据包的[示例。](https://stackoverflow.com/questions/7155050/capture-tcp-packets-with-python)

**编辑**：哎呀，我误读了 scapy。谢谢根！

正如您所提到的，[Scapy](http://www.secdev.org/projects/scapy/doc/introduction.html)是另一个使用 LibPCAP 的 python 模块。本[文档](http://www.secdev.org/projects/scapy/doc/usage.html#sniffing)有一个嗅探示例。

如果您在 Python 2.7 上运行时遇到问题，请查看这篇[文章](https://stackoverflow.com/questions/5447461/running-scapy-on-windows-with-python-v2-7-enthought-python-distribution-7)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-17T21:25:21.880

[https://github.com/KimiNewt/pyshark](https://github.com/KimiNewt/pyshark)

Python 包装器`tshark`

用法：

```
>>> capture = pyshark.LiveCapture(interface='eth0')
>>> capture.sniff(timeout=50)
>>> capture
<LiveCapture (5 packets)>
>>> capture[3]
<UDP/HTTP Packet>

for packet in capture.sniff_continuously(packet_count=5):
    print 'Just arrived:', packet 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T01:28:29.780

**pypcap** , [https://code.google.com/p/pypcap/](https://code.google.com/p/pypcap/) libpcap 的简化的面向对象的 Python 扩展模块 - 当前的 tcpdump.org 版本，一些 BSD 操作系统附带的旧版本，以及 WinPcap 端口Windows。这是一个 Windows 版本。如果你使用#nix，只需安装**pcap**和**dpkt**模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-08T12:23:41.423

FTR，Scapy 将从 2.4.3 开始支持 HTTP 数据包： [https ://scapy.readthedocs.io/en/latest/layers/http.html](https://scapy.readthedocs.io/en/latest/layers/http.html)

```
>>> HTTPRequest().show()
###[ HTTP Request ]###
  Method= 'GET'
  Path= '/'
  Http_Version= 'HTTP/1.1'
  A_IM= None
  Accept= None
  Accept_Charset= None
  Accept_Datetime= None
  Accept_Encoding= None
  [...] 
```

嗅探演示：

```
from scapy.layers.http import * # read the doc
from scapy.sendrecv import sniff
sniff(lfilter=lambda x: HTTP in x, prn=lambda x: x.summary()) 
```

# jquery - 仅在向上滚动时 Jquery 粘性导航

> ID：15906309
> 
> 赞同：6
> 
> 时间：2013-04-09T15:37:46.900
> 
> 标签：jquery, html, css

请查看此 JPG 以供参考：

![在此处输入图像描述](https://i.stack.imgur.com/58Uh3.jpg)

我有一个出现在页面顶部的导航栏。我正在寻找的行为是：当您向上滚动时，相同的导航栏会淡入并固定在屏幕顶部。

我在这里使用的代码有效，除了我不确定如何设置一个规则，一旦您向上滚动到其默认位置，就可以阻止导航粘在屏幕顶部。目前，使用下面的代码，导航保持固定在顶部，即使您向上滚动到页面顶部。

```
function () {
var previousScroll = 0;

$(window).scroll(function(){
   var currentScroll = $(this).scrollTop();
   if (currentScroll > previousScroll){
        $('#header').fadeOut();
   } else {
        $('#header').fadeIn();
        $('#header').addClass('fixed');
   }
   previousScroll = currentScroll;
}); 
```

我的CSS是：

```
.fixed {
    position: fixed;
    top: 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:54:32.953

您必须声明一个额外的变量来记录`#header`元素的原始垂直偏移量。由于该值会在滚动事件触发时发生变化（因为固定位置会将偏移量重置为 0），我们将其声明为比滚动事件高一级：

```
$(document).ready(function() {
    var previousScroll = 0,
        headerOrgOffset = $('#header').offset().top;

    $(window).scroll(function() {
        var currentScroll = $(this).scrollTop();
        if(currentScroll > headerOrgOffset) {
            if (currentScroll > previousScroll) {
                $('#header').fadeOut();
            } else {
                $('#header').fadeIn();
                $('#header').addClass('fixed');
            }
        } else {
             $('#header').removeClass('fixed');   
        }
        previousScroll = currentScroll;
    });

}); 
```

在此处查看概念证明小提琴 - [http://jsfiddle.net/teddyrised/6zGx6/](http://jsfiddle.net/teddyrised/6zGx6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:48:31.640

尝试这个。您可能`#header` `width`还需要根据您的结构 更改

```
var hdr = $('#header'); 

var off = {top: 150} //hdr.offset();

$(window).scroll(function(){
    if($(this).scrollTop() >= off.top)
        hdr.fadeIn('fast').css({position :'fixed', top: 0, left: 0});
    else
        hdr.fadeOut('fast')
}) 
```

# sql - 从字符串动态 sql 转换日期和/或时间时转换失败

> ID：15906310
> 
> 赞同：2
> 
> 时间：2013-04-09T15:37:47.207
> 
> 标签：sql, sql-server-2008, dynamic

我正在运行一些动态 SQL，当我手动写入变量时它运行良好，但是一旦我将它们从手动写入的变量更改为实际变量，就会出现上面的错误。

代码是：

```
set @query = 'SELECT eng, ' + @colsNull + ' 
        from 
        (
            select eng, [count], cast(weekof as date) weekof
            from dbo.RPT_ENG_WEEK (''1 jan 2013'', ''9 apr 2013'', ''1 jan 2013'', ''9 apr 2013'')
        ) x
        pivot 
        (
            sum([count])
            for weekof in (' + @cols + ')
        ) p ' 
```

哪个工作正常，但是一旦我将其更改为

```
set @query = 'SELECT eng, ' + @colsNull + ' 
        from 
        (
            select eng, [count], cast(weekof as date) weekof
            from dbo.RPT_ENG_WEEK ('+@from+', '+@to+', '+@start+', '+@end+')
        ) x
        pivot 
        (
            sum([count])
            for weekof in (' + @cols + ')
        ) p ' 
```

我得到了错误。我也试过

```
set @query = 'SELECT eng, ' + @colsNull + ' 
        from 
        (
            select eng, [count], cast(weekof as date) weekof
            from dbo.RPT_ENG_WEEK ((select CONVERT(DATE'+@from+',105)), (select CONVERT(DATE'+@to+',105)), (select CONVERT(DATE'+@start+',105)), (select CONVERT(DATE'+@end+',105)))
        ) x
        pivot 
        (
            sum([count])
            for weekof in (' + @cols + ')
        ) p ' 
```

但无济于事！

也试过

```
from dbo.RPT_ENG_WEEK ((select CONVERT(DATE'''+@from+''',105)), (select CONVERT(DATE'''+@to+''',105)), (select CONVERT(DATE'''+@start+''',105)), (select CONVERT(DATE'''+@end+''',105))) 
```

和

```
from dbo.RPT_ENG_WEEK ('''+@from+''', '''+@to+''', '''+@start+''', '''+@end+''') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:43:26.183

如果`@from`是这样的字符串：`1 jan 2013`那么

如果您更改此位会发生什么：

```
from dbo.RPT_ENG_WEEK ('+@from+', '+@to+', '+@start+', '+@end+') 
```

对此：

```
from dbo.RPT_ENG_WEEK ('''+@from+''', '''+@to+''', '''+@start+''', '''+@end+''') 
```

这是每个位置的三个单引号。

如果@from 是`DATETIME`您需要的格式，`'d mmm yyyy'`那么您可以在每个日期尝试这个：

```
CONVERT(VARCHAR, @from, 106) 
```

所以整个事情最终是这样的：

```
set @query = 'SELECT eng, ' + @colsNull + ' 
        from 
        (
            select eng, [count], cast(weekof as date) weekof
            from dbo.RPT_ENG_WEEK (''' + CONVERT(VARCHAR, @from, 106) + ''', ''' + CONVERT(VARCHAR, @to, 106) + ''', ''' + CONVERT(VARCHAR, @start, 106) + ''')
        ) x
        pivot 
        (
            sum([count])
            for weekof in (' + @cols + ')
        ) p ' 
```

# java - 无法理解为什么程序在到达代码中的这一部分时会崩溃

> ID：15906315
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:38:09.323
> 
> 标签：java, android, eclipse, opengl-es, imagebutton

似乎在到达“startBtn”时崩溃

我目前在 Eclipse 中使用带有 Android SDK 的 Java，非常感谢您的帮助

下面是 MainMenu 类的代码：

```
package com.pandagame;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.util.Log;

public class MainMenu extends Activity 
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        Log.d("MainMenu", "onCreate");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        /** Fire up background music */
        Log.d("MainMenu", "Fire up music");
        Engine.musicThread = new Thread()
        {   
            public void run()
            {
                Intent bgmusic = new
                Intent(getApplicationContext(), Music.class);
                startService(bgmusic);
                Engine.context = getApplicationContext();
            }
        };
        Log.d("MainMenu", "Engine.MusicThread");
        Engine.musicThread.start();
        Log.d("MainMenu", "new Engine");
        final Engine engine = new Engine();
        /** Set menu button options */
        Log.d("MainMenu", "Set Menu button options");
        ImageButton startBtn = (ImageButton)findViewById(R.drawable.start);
        Log.d("MainMenu", "Step 1");
        ImageButton exitBtn = (ImageButton)findViewById(R.drawable.exit);
        Log.d("MainMenu", "Step 2");
        startBtn.getBackground().setAlpha(Engine.MENU_BUTTON_ALPHA);
        Log.d("MainMenu", "Step 3");
        startBtn.setHapticFeedbackEnabled(Engine.HAPTIC_BUTTON_FEEDBACK);
        Log.d("MainMenu", "Step 4");
        exitBtn.getBackground().setAlpha(Engine.MENU_BUTTON_ALPHA);
        Log.d("MainMenu", "Step 5");
        exitBtn.setHapticFeedbackEnabled(Engine.HAPTIC_BUTTON_FEEDBACK);
        Log.d("MainMenu", "Step 6");
        startBtn.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {
                Log.d("MainMenu", "onClick");
                /** Start Game!!!! */
                Intent game = new Intent(getApplicationContext(),Game.class);
                MainMenu.this.startActivity(game);

            }
        });

        exitBtn.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {
                boolean clean = false;
                engine.onExit(v);
                if (clean)
                {
                    int pid= android.os.Process.myPid();
                    android.os.Process.killProcess(pid);
                }
            }
        });

    }
} 
```

其他课程包括：

```
Background.java
Game.java
Engine.java
Music.java
PandaActivity.java
Screen.java 
```

“开始”和“退出”都是位于 res/drawable 文件夹中的 .png 文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:44:33.077

您正在尝试使用可绘制 id 引用 ImageButtons

IE

```
 ImageButton startBtn = (ImageButton)findViewById(R.drawable.start); 
```

`findViewById` 需要视图的 id 来引用它。

你应该使用

```
 ImageButton startBtn = (ImageButton)findViewById(R.id.start); 
```

# c# - MVC4 将模型链接到 SimpleAuthentication 类

> ID：15906319
> 
> 赞同：0
> 
> 时间：2013-04-09T15:38:17.477
> 
> 标签：c#, asp.net-mvc-4

在 MVC4 的大量教程中，我从未看到它们将经过身份验证的用户链接到包含属于该用户的数据的表。我在这件事上看得很高，也看得很低，结果都是空的。

以 Note 表为例，每个用户都会在数据库中存储一个 Note。如何获取我的简单课程并将经过身份验证的用户链接到它？下面是我觉得没有结果的情况。

```
 public class Note
    {
        public int NoteId { get; set; }
        [ForeignKey("UserId")]
        public virtual UserProfile CreatedBy { get; set; } 
        public string Description { get; set; }
    } 
```

任何人都有一个很好的教程链接，或者可以解释我应该如何将经过身份验证的用户（使用 simpleauthentication）链接到 ASP.net MVC4 中的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:49:55.437

将您的实体更改为：

```
public class Note
{
    [Key]
    [ForeignKey("UserProfile"), DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int UserId{ get; set; }

    public virtual UserProfile UserProfile { get; set; }

    public string Description { get; set; }
} 
```

然后，在您的 Note 控制器或您创建 Notes 的任何控制器中：

```
 [Authorize]//Place this on each action or controller class so that can can get User's information
    [HttpGet]
    public ActionResult Create()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Create(CreateViewModel model)
    {
        if (ModelState.IsValid)
        {
            var db = new EfDb();                
            try
            {                   
                var userProfile = db.UserProfiles.Local.SingleOrDefault(u => u.UserName == User.Identity.Name)
                                ?? db.UserProfiles.SingleOrDefault(u => u.UserName == User.Identity.Name);
                if (userProfile != null)
                {
                    var note= new Note
                                        {
                                           UserProfile = userProfile,
                                           Description = model.Description 
                                        };                        
                    db.Notes.Add(note);
                    db.SaveChanges();
                    return RedirectToAction("About", "Home");
                }
            }
            catch (Exception)
            {
                ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
                throw;
            }
        }            
        return View(model);
    } 
```

# c# - Nvelocity 字符串到双重对话

> ID：15906321
> 
> 赞同：0
> 
> 时间：2013-04-09T15:38:24.930
> 
> 标签：c#, asp.net, velocity, nvelocity

大家好，我正在使用 Nvelocity 库，我遇到了一些问题，所以我有 57,45 号，我无法将其转换为双倍 $Convert.ToDouble($Value) 返回 0。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:47:09.837

我的代码看起来像这样

```
#foreach($gridRow in $gridData)
 #set($tmpPrice = $gridRow.get_Item("Price").replace(",", "."))
 #set($sumPrice = $sumPrice + $convert.toDouble($tmpPrice))
#end 
```

# entity-framework - MVC4 存储过程返回结果，但 MVC 显示查找字段值为空

> ID：15906324
> 
> 赞同：1
> 
> 时间：2013-04-09T15:38:33.260
> 
> 标签：entity-framework, stored-procedures, asp.net-mvc-4

我的 proc 返回所有结果，但 MVC 显示查找为空。

我有一个视图，其中 for 循环的“网格”如下所示：

```
@foreach (var item in Model) {
    <tr>
        <td>@Html.ActionLink(item.Headline, "ViewDetails", "Advisory", new { id=item.AdvisoryId }, "")</td>
        <td>@item.AdvisoryStartDate.ToShortDateString()</td>
        <td>@item.AdvisoryType.AdvisoryType</td>
        <td>@item.AdvisoryProvider.AdvisoryProvider</td>
        <td>@item.AdvisoryCategory.AdvisoryCategory</td>         
    </tr>
} 
```

最后三个字段是查找。我最初用这个控制器调用填充了它：

```
var advisories = db.Advisories.Include(i => i.AdvisoryType)
            .Include(i => i.AdvisoryProvider)
            .Include(i => i.AdvisoryCategory)
            .OrderByDescending(i => i.AdvisoryStartDate);
        ViewData["Advisories"] = advisories; 
```

但是我现在已经用这个 proc 调用替换了它（因为我需要获取用户还没有看到的“建议”，所以它比上面的更复杂，基本上是“获取所有”；我还需要查询按 UserID 进行数据库，而 MVC 只有 User.Identity.Name）：

```
var results = db.Database.SqlQuery<Advisory>("EXEC [ponzi].[uspUserAdvisories] {0}",  User.Identity.Name).ToList();
ViewData["Advisories"] = results; 
```

我知道 proc 返回所有结果（当我在 SQL Server 中运行它时），但在 MVC 中，当我将鼠标悬停在“结果”上时，会填写 AdvisoryCategoryID 但 AdvisoryCategory 为空。与其他两个查找相同。我认为这是因为 AdvisoryCategoryID 在我的 Advisory 模型中，但 AdvisoryCategory 来自 AdvisoryCategory 模型。

以下是咨询模型的相关部分：

```
[Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int AdvisoryId { get; set; }

    public virtual int AdvisoryTypeID { get; set; }
    public virtual AdvisoryTypes AdvisoryType { get; set; }

    public virtual AdvisoryProviders AdvisoryProvider { get; set; }
    public virtual int AdvisoryProviderID { get; set; }

    public virtual AdvisoryCategories AdvisoryCategory { get; set; }
    public virtual int AdvisoryCategoryID { get; set; } 
```

如何让这三个查找字段显示 proc 返回的数据？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:27:15.847

我认为这是关于`eager loading of navigation properties`（`AdvisoryCategory`等），如果我正确理解你想要做什么......

> 如果您尝试加载`navigation properties`- 从您的 SQL 查询 SP - 我认为这行不通。这是`Include`上面普通 linq 语句的一部分——它会生成一个更复杂的 SQL 来加入其他表的属性等。它越多就越复杂。

这不适用于代码优先，即使它需要特殊的“技术”才能使其匹配。

请在此处查看此链接以确认[来自 Entity Framework SP 的 Eager Load](https://stackoverflow.com/questions/13115845/eager-load-from-entity-framework-sp/13118282#13118282)

您可以尝试将其设置为`lazy loading`默认值（虚拟等） - 并希望它会在首次访问时加载。也尝试不同的[加载方法](https://stackoverflow.com/a/9138508/417747)。

**或者只是明确地按需加载**- 请参阅[此链接](http://msdn.microsoft.com/en-US/data/jj574232)和`Explicitly Loading`。

* * *

[从实体框架 SP](https://stackoverflow.com/questions/13115845/eager-load-from-entity-framework-sp/13118282#13118282)
[http://msdn.microsoft.com/en-US/data/jj574232](http://msdn.microsoft.com/en-US/data/jj574232)
[急切加载使用 DbContext.Database.SqlQuery 在 EntityFramework 中急切加载](https://stackoverflow.com/questions/9136923/eager-loading-in-entityframework-with-dbcontext-database-sqlquery/9138508#9138508)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:28:46.067

我找到了一个解决方案：ViewModels。这里新的 AdvisoriesViewModel 的相关部分（替换我的 Advisories 模型）：

```
 public int AdvisoryTypeID { get; set; }
    public string AdvisoryType { get; set; }

    public string AdvisoryProvider { get; set; }
    public int AdvisoryProviderID { get; set; }

    public string AdvisoryCategory { get; set; }
    public int AdvisoryCategoryID { get; set; } 
```

现在我用这条线调用我的过程，用“AdvisoryViewModel”替换了“Advisory”：

```
var advisories = db.Database.SqlQuery<AdvisoryViewModel>("EXEC [ponzi].[uspUserAdvisories] {0}", User.Identity.Name).ToList(); 
```

由于返回的数据集具有具有相同字段的模型，并且不依赖于另一个模型，因此它可以工作。

# javascript - 将命名空间转换为字符串

> ID：15906328
> 
> 赞同：1
> 
> 时间：2013-04-09T15:38:48.697
> 
> 标签：javascript, javascript-namespaces

我使用显示模块模式，并有一个命名空间`Foo.Bar.Baz`。

如何将其转换为字符串`"Foo.Bar.Baz"`？

（如果我这样做`mynamespace.toString()`，它会产生`"[object Object]"`而不是所需的字符串。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:47:10.400

使用非常简化的[Revealing 模块模式](https://stackoverflow.com/questions/5647258/how-to-use-revealing-module-pattern-in-javascript)：

```
var revealed = function(){
   var a = [1,2,3];
   function abc(){
     return (a[0]*a[1])+a[2];
   }

   return {
      name: 'revealed',
      abcfn: abc
   }
}(); 
```

`toString`您可以在显示的对象中包含覆盖：

```
var revealed = function(){
   var a = [1,2,3];
   function abc(){
     return (a[0]*a[1])+a[2];
   }

   return {
      name: 'revealed',
      abcfn: abc,
      toString = function(){ return "revealed"; }
   }
}(); 
```

然后可以`revealed.toString()`按照您第一次尝试的方式调用它。如果您显示的对象包含子对象（命名空间），那么每个单独`toString`的实现都可以调用子对象`toString`并与点（或任何合适的）连接。

# emacs - 根据主要模式更改 Emacs Mode-Line 颜色

> ID：15906332
> 
> 赞同：6
> 
> 时间：2013-04-09T15:38:53.813
> 
> 标签：emacs, elisp, emacs-faces, modeline

我想看看是否有办法根据主模式更改模式链接前景色和背景色，

我正在考虑在

```
(add-hook 'after-change-major-mode-hook 
```

但是，我没有进行这种改变的所有 emacs lisp 经验。这是逻辑：

```
switch major-mode:
case "emacs-lisp-mode":
  (set-face-foreground 'mode-line "ivory")
  (set-face-background 'mode-line "DarkOrange2")
case "ruby-mode":
  (set-face-foreground 'mode-line "white")
  (set-face-background 'mode-line "red")
...
default:
  (set-face-foreground 'mode-line "black")
  (set-face-background 'mode-line "white")
end switch 
```

提前谢谢了！。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T00:55:13.970

你可能想要这样的东西：

```
(add-hook 'emacs-lisp-mode-hook
          (lambda ()
            (face-remap-add-relative
             'mode-line '((:foreground "ivory" :background "DarkOrange2") mode-line)))) 
```

您可能还想对面部使用面部重映射`mode-line-inactive`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T17:21:02.213

你所说的“逻辑”是这样的：

```
(add-hook 'after-change-major-mode-hook 'my-set-mode-line-colors)
(defvar my-mode-line-colors
  '((emacs-lisp-mode :foreground "ivory" :background "DarkOrange2")
    (ruby-mode :foreground "white" :background "red")))
(defun my-set-mode-line-colors ()
  (face-remap-add-relative
   'mode-line (list (or (cdr (assq major-mode my-mode-line-colors))
                        '(:foreground "black" :background "white"))
                    'mode-line))) 
```

或者，您可以按照 Stefan 的建议从特定于模式的钩子中执行此操作。

# git - 分支后提交时的交互式变基

> ID：15906335
> 
> 赞同：1
> 
> 时间：2013-04-09T15:38:58.023
> 
> 标签：git, git-interactive-rebase

我的 git 存储库中有以下（简化的）场景：

```
A-B-C-F
     \
      D-E 
```

提交 F 是对 C 的修复，这需要成为单个提交。我尝试在“主”分支上使用交互式变基`git rebase -i HEAD~2`，但这会导致以下结果：

```
A-B-CF
   \
    C-D-E 
```

而我希望它是这样的：

```
A-B-CF
      \
       D-E 
```

任何人都知道如何实现这一目标？我还没有推送任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:36:24.937

这就是我最终的结果。初始场景：

```
A-B-C-F (develop)
     \
      D-E (feature) 
```

基于 develop 的交互式变基，将`git checkout develop; git rebase -i HEAD~2`F 压缩为 C：

```
A-B-CF (develop)
   \
    C-D-E (feature) 
```

基于特征的交互式变基`git checkout feature; git rebase -i HEAD~3`，删除 C：

```
A-B-CF (develop)
   \
    D-E (feature) 
```

最后是在特性分支上的正常变基`git rebase CF-hash`，移动分支的开头：

```
A-B-CF (develop)
      \
       D-E (feature) 
```

不确定这是否是最好的方法，但它似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:36:41.237

为了清楚起见，我将在这里添加一些细节。

```
A-B-C-F    (master)
     \
      D-E  (featureA) 
```

我将分支名称归因于这些，因为在谈论变基时会令人困惑。名称无关紧要，我假设当您说“主要”时，您的意思是顶行，我称之为大师。

您的问题实际上相当复杂，因为您已经`C`与另一个分支“共享”了提交。现在您要修改该提交 - 这意味着您需要更改整个 featureA 分支的历史记录。

一个公平的警告。如果您与任何其他开发人员发布了这些分支，包括`C`、`F`、`D`或`E`，那么在您重新设置基准时，它们将遇到严重问题。

```
git checkout master
git rebase -i HEAD~2 
```

如您所知，您只需要将最后一次提交修复或压缩到之前的提交即可。现在您实际上将拥有这个。（假设符号“CF”代表组合的 C 和 F 提交。

```
A-B-CF   (master)
   \
    C-D-E  (featureA) 
```

发生这种情况是因为`C`不再在`master`，而是在`featureA`。这两个分支最近的共同祖先是`B`。现在，您需要了解`C`我们的`featureA`. 因此，之后的所有 SHA1 提交`C`也将更改。

现在你需要检查 featureA 和 rebase master。

```
git checkout featureA
git rebase -i master 
```

在交互式变基期间，您需要确保删除代表`C`提交的行。如果你这样做正确，你会得到这个。

```
A-B-CF   (master)
     \
      D-E  (featureA) 
```

**边注**

如果您`C`在变基期间没有正确删除该提交，您将得到以下结果。

```
A-B-CF   (master)
     \
      C-D-E  (featureA) 
```

# java - 跨版本和平台的一致随机数

> ID：15906336
> 
> 赞同：2
> 
> 时间：2013-04-09T15:38:58.127
> 
> 标签：java, android, random, random-seed

我需要/想要获得用于密码生成的随机（嗯，不完全）数字。

**我做什么**：目前我正在使用[SecureRandom](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)生成它们。
我正在获取对象

```
SecureRandom sec = SecureRandom.getInstance("SHA1PRNG", "SUN"); 
```

然后像这样播种

```
sec.setSeed(seed); 
```

**目标**：一种（最好是快速）创建随机数的方法，它在加密上至少与 SHA1PRNG SecureRandom 实现一样安全。这些在 JRE 和 Android 的不同版本上需要相同。

编辑：种子是从用户输入生成的。

**问题**：`SecureRandom.getInstance("SHA1PRNG", "SUN");`它会像这样失败： `java.security.NoSuchProviderException: SUN`. 省略`, "SUN"`会产生随机数，但这些与*默认*(JRE 7) 数字不同。

**问题**：我怎样才能实现我的**目标**？

**您不希望它是可预测**的：我想要，因为我需要可预测性，以便相同的先决条件产生相同的输出。如果它们不一样，*那么很难*~~做到~~ 用户对应用程序的期望。

 *编辑：通过可预测我的意思是，当知道一个字节（或一百个）时，你不应该能够预测下一个字节，但是当你知道种子时，你应该能够预测第一个字节（以及所有其他字节）。也许另一个词是**可重现**的。

如果有人知道更直观的方法，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:46:48.710

我最终将 Sha1Prng 从太阳源中分离出来，这保证了所有版本的 Java 和 android 的可重复性。我需要删除一些重要的方法来确保与 android 的兼容性，因为 android 无法访问 nio 类......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:41:57.767

我建议使用[UUID.randomUUID()](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)，然后使用 getLeastSignificantBits() 和 getMostSignificantBits() 将其拆分为 long

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:56:27.423

如果你想要可预测的，它们不是随机的。这打破了您对“安全”的“目标”要求，并演变为两台服务器之间的简单共享秘密。

您可以通过使用素数的特征来获得看起来有点随机但可预测的东西，其中您通过从 I（某个特定整数）开始构建一组整数并添加第一个素数，然后与第二个素数取模。（事实上​​，第一个和第二个数字必须是相对质数——这意味着它们没有共同的质因数——不算 1，以防你称其为因数。

如果你重复加法和取模的过程，你会得到一组可以重复复制的数字，它们是按顺序排列的素数，你总是会得到相同的结果。

最后，如果第一个质数相对于第二个质数较大，则人类不容易预测该序列并且看起来有点随机。

例如，第一个素数 = 7，第二个素数 = 5（请注意，这显示了它是如何工作的，但在现实生活中没有用）

从 2 开始。加 7 得到 9。模 5 得到 4。4 加 7 = 11。模 5 = 1。

序列是 2、4、1、3、0，然后重复。

现在在现实生活中生成看似随机的数字。相对质数是 91193 和 65536。（我选择了第二个，因为它是 2 的幂，所以所有模值都可以放入 16 位。）

```
int first = 91193;
int modByLogicalAnd = 0xFFFF;

int nonRandomNumber = 2345; // Use something else
for (int i = 0; i < 1000 ; ++i) {
    nonRandomNumber += first;
    nonRandomNumber &= modByLogicalAnd;
    // print it here
} 
```

每次迭代都会生成 2 个字节的随机数。如果您需要更大的随机“字符串”，您可以将其中几个打包到缓冲区中。

而且它们**是可重复的**。你的用户可以选择起点，你可以使用任何你想要的素数（或者，事实上，任何没有 2 作为因子的数字）。

*顺便说一句*- 使用 2 的幂作为第二个数字使其更可预测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:18:34.297

忽略使用某些物理输入（随机时钟位、电噪声等）的 RNG，所有软件 RNG 在相同的起始条件下都是可预测的。毕竟，它们是（希望）确定性的计算机程序。

有一些算法故意包含物理输入（例如，通过偶尔对计算机时钟进行采样）以试图防止可预测性，但这些是（据我所知）例外。

因此，任何“常规”RNG，给定相同的种子并按照相同的规范实现，都应该产生相同的“随机”数字序列。（这就是为什么计算机 RNG 更恰当地称为“*伪随机*数生成器”的原因。）

RNG 可以用以前使用的种子播种并复制“已知”数字序列这一事实并不会使 RNG 的安全性低于以某种方式阻止你播种的 RNG（尽管它*可能*不如间隔重新播种的花哨算法）。这样做的能力——一次又一次地重现相同的序列不仅在测试中非常有用，它在加密和其他安全应用中也有一些“现实生活”的应用。（事实上​​，加密算法本质上只是一个可重现的随机数生成器。）*

# c# - 当 AutoGenerateColumns for nullable bool 时 WPF DataGrid 强制绑定 DataGridCheckBoxColumn

> ID：15906339
> 
> 赞同：3
> 
> 时间：2013-04-09T15:39:08.167
> 
> 标签：c#, .net, wpf, datagrid

我们有很多`DataGrid`动态数据绑定，所以我们总是使用`AutoGenerateColumns=True`. 对于`bool`列生成一个`DataGridCheckBoxColumn`但是对于可为空的布尔值（`bool?`在 C# 中）生成默认值`DataGridTextColumn`。有没有办法强制`DataGrid`自动生成一个`DataGridCheckBoxColumn`可空的布尔值？不喜欢依赖于实现的黑客攻击。例如在`AutoGeneratingColumn`事件中也接受一些代码隐藏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T16:23:49.963

您应该注册到 AutoGeneratingColumn 事件并根据列类型更改生成的列，如下所示：

```
 private void dataGrid1_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        if (e.PropertyType == typeof(bool?))
        {
             DataGridCheckBoxColumn  checkBoxColumn=new DataGridCheckBoxColumn();
            checkBoxColumn.Header = e.Column.Header;
            checkBoxColumn.Binding = new Binding(e.PropertyName);
            checkBoxColumn.IsThreeState = true;

            // Replace the auto-generated column with the checkBoxColumn.
            e.Column = checkBoxColumn;
           }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:40:14.720

您必须尝试一下-我不在VS附近-但是您应该可以使用它来轻松解决它...

> **看看我的另**一篇文章......
> [当 AutoGenerateColumns 设置为 True 时，如何停止在 DataGrid 中生成特定列？](https://stackoverflow.com/questions/15830214/how-to-stop-a-specific-column-to-be-generated-in-datagrid-when-the-autogeneratec/15833577#15833577)

使用该“方法”来`bind`执行您的命令
（全部是 MVVM - 您只需要一个`AutoGenerateColumnEvent`附加属性。

然后在您的命令处理中，就像我在那里所做的那样 - 替换列 - 就像已经建议的那样。

1）使用`Attach`提供的类，添加命名空间等。

2）在你的 XAML 中......

```
<DataGrid 
    local:Attach.AutoGenerateColumnEvent="{Binding AutoGeneratingColumnCommand}" AutoGenerateColumns="True" /> 
```

3）在你的视图模型中......

```
RelayCommand _autoGeneratingColumnCommand;
public RelayCommand AutoGeneratingColumnCommand 
{ 
    get 
    { 
        return _autoGeneratingColumnCommand ?? (_autoGeneratingColumnCommand = new RelayCommand(param => 
        { 
            var e = param as DataGridAutoGeneratingColumnEventArgs;
            var type = ((PropertyDescriptor)e.PropertyDescriptor).PropertyType;
            if (type == typeof(bool?))
                e.Column = new DataGridCheckBoxColumn();
        }, 
        param => true)); 
    } 
} 
```

**注意：对于更通用的解决方案...**

> **您可以使用`PropertyDescriptor`**来获取属性类型-并根据它做出通用决定-我认为这几乎是您所需要的，但我还没有尝试过。所以你必须尝试一下。

# c# - 对控制器的多部分数据请求

> ID：15906342
> 
> 赞同：0
> 
> 时间：2013-04-09T15:39:15.260
> 
> 标签：c#, controller, multipartform-data

我有在文件系统上创建文件的控制器，在请求中附加了文件。在开发过程中，我通过提琴手请求作曲家测试了我的控制器工作，其中提供了将文件上传到请求选项。如何使用单元测试测试我的控制器工作？我的意思是称我的控制器是这样的

```
[TestClass]
public class DocumentsControllerTest
{
    [TestMethod]
    public void DocumentsTest()
    {
       var documentsController = new DocumentsController();
       documentsController.post(12323, "somedata"); <--here in params i send some data
    }
} 
```

在 post 方法参数中，我发送了一些额外的数据（有关文档所有者的信息）。如何在此代码中发送文件（就像我通过提琴手所做的那样）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:07:39.257

你必须嘲笑它​​。例如，您可以使用最小起订量。有[一篇关于它的好文章](http://blog.csainty.com/2009/01/aspnet-mvc-unit-test-file-upload-with.html)

# c++ - 从 NFD 到 NFC 的 OSX 和 C++ unicode 转换

> ID：15906344
> 
> 赞同：2
> 
> 时间：2013-04-09T15:39:24.683
> 
> 标签：c++, unicode, utf-8, normalization, unicode-normalization

我从 OSX 文件系统获得的 NFD Unicode 字符串有问题。

这就是我在 OSX "A\xcc\x88" 上的 "Ä"-Umlaut 得到的，这也是我所期望的 "\xc3\x84"。在 Windows 下执行相同的功能（简单的 boost 文件系统操作，列出目录）。

搜索了一会，我发现Apple的NFD编码为UTF-8和世界其他地方的NFC。我尝试通过 NSStrings 或 boost::locale::normalize 进行转换，但没有成功。

有谁知道在 C++ 中执行此操作的方法（如有必要，我可以通过 obj-c 使用 Cocoa）？

之后我想将原始 unicode 字符串作为 std::string （使用 unicode 编码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:31:43.343

这是获得预组合形式的解决方案。

```
std::string precomposeFilename(const std::string& name)
{
   CFStringRef cfStringRef = CFStringCreateWithCString(kCFAllocatorDefault, name.c_str(), kCFStringEncodingUTF8);
   CFMutableStringRef cfMutable = CFStringCreateMutableCopy(NULL, 0, cfStringRef);

   CFStringNormalize(cfMutable,kCFStringNormalizationFormC);

   char c_str[255 + 1];
   CFStringGetCString(cfMutable, c_str, sizeof(c_str)-1, kCFStringEncodingUTF8);

   CFRelease(cfStringRef);
   CFRelease(cfMutable);

   return std::string(c_str);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:02:38.810

NSString 有 - (NSString *)precomposedStringWithCanonicalMapping 函数，还有一些其他的，看起来他们会帮助你。

# c# - ScrollViewer 垂直偏移的动画

> ID：15906346
> 
> 赞同：0
> 
> 时间：2013-04-09T15:39:41.930
> 
> 标签：c#, wpf, animation, offset, scrollviewer

我想为 ScrollViewer 的垂直滚动设置动画。据我了解，这是获得此活动的唯一方法

```
private void viewer_ScrollChanged (object sender, ScrollChangedEventArgs e) 
```

并在处理程序内启动动画。但在这种情况下，处理程序将在动画的每一步被调用。如何将动画过程与此类 PageUp 区分开来？

也许有更好的方法来覆盖垂直偏移的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:05:18.793

不幸的是，您可能必须为此创建一个自定义控件。

幸运的是，这里已经完成[了](http://matthiasshapiro.com/2009/05/06/how-to-create-an-animated-scrollviewer-or-listbox-in-wpf/)。我已经尝试过（很久以前）并且它有效。哦，我看到有/有现成的DLL可以从页面下载，所以你不必从头开始创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:59:35.940

不完全清楚你要做什么 - 但我猜你只想在用户用鼠标移动滚动条时制作动画 - 那么如何在 ScrollViewer 上处理 MouseDown （记录位置是什么）并处理MouseUp，如果有滚动做你的动画？

我认为在这种情况下使用 mouseup/down 很好，因为您不希望动画用于一般滚动？

# css - 如何删除 HTML 电子邮件中图像上方的空白？

> ID：15906348
> 
> 赞同：0
> 
> 时间：2013-04-09T15:39:49.847
> 
> 标签：css, image, html-table, html-email, removing-whitespace

我已经搜索了网络和这个景象并尝试了所有可能的解决方案，但仍然无法弄清楚为什么 Outlook 2007-2013 在我的图像上方创建一个白色条带。

这是完整电子邮件的链接：[http ://www3.districtadministration.com/mailing/Templates/da-webinar-archives.html](http://www3.districtadministration.com/mailing/Templates/da-webinar-archives.html)

这是我的代码：

```
<table id="webinars" cellpadding="0" cellspacing="0" width="100%" style="border:1px solid #e6e6e6;">
    <tr style="background-color:#f2f2f2;border-bottom:#e6e6e6;">
        <td class="items" style="font-family:Helvetica, Arial, sans-serif;font-size:14px;color:#333333;line-height:20px;padding:10px;">
        <a href="[WEBINAR TITLE #1]" target="_blank" style="color:#333333;"><strong>Enter webinar title here</strong></a><br />
        Sponsored by add sponsor
        </td>

        <td width="145" align="left" class="watchnow" style="padding-left:10px;"><a href="[WEBINAR TITLE #1]" target="_blank"><img src="http://www3.districtadministration.com/mailing/webinar13/images/btn_watchnow.jpg" alt="[button] Watch Now" width="125" height="35" border="0" /></a>
        </td>
    </tr>

    <tr style="border-bottom:#e6e6e6;">
        <td class="items" style="font-family:Helvetica, Arial, sans-serif;font-size:14px;color:#333333;line-height:20px;padding:10px;">
        <a href="[WEBINAR TITLE #2]" target="_blank" style="color:#333333;"><strong>Enter webinar title here</strong></a><br />
        Sponsored by add sponsor
        </td>

        <td width="145" align="left" class="watchnow" style="padding-left:10px;"><a href="[WEBINAR TITLE #2]" target="_blank"><img src="http://www3.districtadministration.com/mailing/webinar13/images/btn_watchnow.jpg" alt="[button] Watch Now" width="125" height="35" border="0" /></a>
        </td>
    </tr>

    <tr style="background-color:#f2f2f2;border-bottom:#e6e6e6;">
        <td class="items" style="font-family:Helvetica, Arial, sans-serif;font-size:14px;color:#333333;line-height:20px;padding:10px;">
        <a href="[WEBINAR TITLE #3]" target="_blank" style="color:#333333;"><strong>Enter webinar title here</strong></a><br />
        Sponsored by add sponsor
        </td>

        <td width="145" align="left" class="watchnow" style="padding-left:10px;"><a href="[WEBINAR TITLE #3]" target="_blank"><img src="http://www3.districtadministration.com/mailing/webinar13/images/btn_watchnow.jpg" alt="[button] Watch Now" width="125" height="35" border="0" /></a>
        </td>
    </tr>

    <tr style="border-bottom:#e6e6e6;">
        <td class="items" style="font-family:Helvetica, Arial, sans-serif;font-size:14px;color:#333333;line-height:20px;padding:10px;">
        <a href="[WEBINAR TITLE #4]" target="_blank" style="color:#333333;"><strong>Enter webinar title here</strong></a><br />
        Sponsored by add sponsor
        </td>

        <td width="145" align="left" class="watchnow" style="padding-left:10px;"><a href="[WEBINAR TITLE #4]" target="_blank"><img src="http://www3.districtadministration.com/mailing/webinar13/images/btn_watchnow.jpg" alt="[button] Watch Now" width="125" height="35" border="0" /></a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:34:59.577

我相信您需要为每个图像添加 display:block 。

旧代码： `<img src="http://www3.districtadministration.com/mailing/webinar13/images/btn_watchnow.jpg" alt="[button] Watch Now" width="125" height="35" border="0" />`

新代码： `<img src="http://www3.districtadministration.com/mailing/webinar13/images/btn_watchnow.jpg" alt="[button] Watch Now" width="125" height="35" border="0" style="display:block;" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T17:08:20.387

```
<img alt="Image Description Goes Here" border="0" src="http://www.your-image-url-goes-here.jpg" 
width="600" height="176" style="padding:0px; display: block; line-height: 0px; font-size: 0px; border:0px;" 
align="top"> 
```

您需要在其中包含`... align="top" ...`代码。这会强制图像在顶部对齐。通过将所有其他代码维度设置为`0px`它指定空白为`0px`. 此外，`display:block`在删除空白方面也非常重要，因此浏览器知道如何显示图片的布局和格式。

我测试了这段代码，它删除了 Gmail、AOL、Yahoo、Hotmail 和我的远程 Outlook 电子邮件帐户中的空白。希望这会有所帮助！

# c - 运行程序出错 - C

> ID：15906350
> 
> 赞同：-5
> 
> 时间：2013-04-09T15:39:51.113
> 
> 标签：c, function, pointers

运行程序的错误在哪里？我知道这两个函数中循环FOR的行有问题。

我用调试器运行，我不知道为什么会出现错误。

崩溃是：program2.exe 中 0x00E214E5 处的未处理异常：0xC0000005：访问冲突写入位置 0x00E25865。

然后程序停止。

我的代码：

```
#include <stdio.h>

char *what1 (char s[], char t[], int n);
int what2 (char str[], char c);

int main ()
{

    printf("%s\n", what1("hello", "world", 2));
    printf("%d\n", what2 ("fkbf", 'o'));

    return 0;
}

char *what1 (char s[], char t[], int n)
{
    char *p=s;
    while (*s++);
    for (--s; n-- && (*s=*t); s++, t++);
    *s='\0';
    return p;
}

int what2 (char str[], char c)
{
    char *ptr;
    for (ptr=str; *ptr;)
        if ((*str=*ptr++)!=c)
            str++;
    *str ='\0';
    return ptr-str;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:46:34.907

两者`what1()`和`what2()`都在修改作为文字传递的字符串，这是未定义的行为，因为此类字符串可以存储在只读内存中。

# perl - Image::Imlib2 对 CpanTesters 的依赖

> ID：15906351
> 
> 赞同：1
> 
> 时间：2013-04-09T15:39:51.587
> 
> 标签：perl, cpan

我的模块[EBook::MOBI::Image](https://metacpan.org/module/EBook%3a%3aMOBI%3a%3aImage)的 CpanTesters 出现了很多错误 （这只是[EBook::MOBI](https://metacpan.org/module/EBook%3a%3aMOBI)的一些附加内容。像这样，我将主模块中的图形依赖项远离那些不需要的人无论如何）。除 GNU/Linux 的测试外，所有测试均失败：

[http://www.cpantesters.org/distro/E/EBook-MOBI-Image.html#EBook-MOBI-Image-0.11](http://www.cpantesters.org/distro/E/EBook-MOBI-Image.html#EBook-MOBI-Image-0.11)

由于我只有 GNU/Linux 并且总体上缺乏一些经验，所以我在这里寻求一些帮助。测试结果似乎表明，[Image::Imlib2的依赖存在问题](https://metacpan.org/module/Image%3a%3aImlib2)

[http://www.cpantesters.org/cpan/report/2306795e-99db-11e2-8c80-50d7c5c10595](http://www.cpantesters.org/cpan/report/2306795e-99db-11e2-8c80-50d7c5c10595)

那里说我应该小心，Image::Imlib2 在“Makefile.PL”中，但正如你所见：

[https://metacpan.org/source/BORISD/EBook-MOBI-Image-0.11/Makefile.PL#L24](https://metacpan.org/source/BORISD/EBook-MOBI-Image-0.11/Makefile.PL#L24)

Image::Imlib2 本身没有这个问题。测试通过所有系统：

[http://www.cpantesters.org/distro/I/Image-Imlib2.html#Image-Imlib2-2.03](http://www.cpantesters.org/distro/I/Image-Imlib2.html#Image-Imlib2-2.03)

有人可以在这里提示什么是错的吗？代码托管在这里：

[https://github.com/borisdaeppen/EBook-MOBI-Image](https://github.com/borisdaeppen/EBook-MOBI-Image)

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:00:10.657

当我尝试使用以下`cpan`命令安装此模块（在 Cygwin 上）时：

1.  cpan 认识到我需要`Image::Imlib2`模块 ( `warning: prerequisite Image::Imlib2 0 not found`)

2.  cpan 下载并尝试构建`Image::Imlib2`

3.  构建`Image::Imlib2`失败 ( `you must install the imlib2 library before you can install Image::Imlib2 ... Make has some problems, won't install`)

4.  cpan 继续构建`EBook::MOBI::Image`( `... Continuing, but chances to succeed are limited`)

5.  当然，`Ebook::MOBI::Image`失败的测试

中的`PREREQ_PM => ...`指令`Makefile.PL`告诉 cpan 努力满足先决条件，但如您所见，即使先决条件安装失败，它也会继续构建。该`PREREQ_PM`指令对于 CPAN 上的大多数模块来说已经足够好了，但对于需要 cpan 无法自行安装的外部库的模块来说却不是这样。

我认为在这种情况下，您想要的是让 cpan 测试人员在您无法加载`Image::Imlib2`模块的情况下摆脱困境，而这样做的地方早在`Makefile.PL`.

```
if (!eval "require Image::Imlib2") {
    print "This distribution requires Image::Imlib2!\n";
    exit 0;
} 
```

对于不能或不会安装的系统`Image::Imlib2`，退出`Makefile.PL`将导致测试人员报告结果`N/A`而不是`FAIL`。

# visual-studio - Web.config 从 Web.Release.Config 中删除 ConnectionStrings 节点

> ID：15906355
> 
> 赞同：1
> 
> 时间：2013-04-09T15:39:54.657
> 
> 标签：visual-studio, xslt, web-config

我在我的 Web.config 中有这个，以便我的服务将在本地运行：

```
 <connectionStrings>

    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=IPADD;Initial Catalog=DB;Persist Security Info=True;User ID=UN;Password=PW" />
  </connectionStrings> 
```

我在这里需要这个，因为 Web.Debug.Config 不起作用。因此，当我发布时，我想删除此字符串，因为它实际上是从父 Web.config 继承的

```
 <connectionStrings>
    <remove name="DefaultConnection"/>

  </connectionStrings> 
```

这似乎不起作用......（它会引发`The entry 'DefaultConnection' has already been added.`错误）

我怎样才能删除它？XSLT？

Ps 我不能使用`clear/`，因为它删除了到 Membership 提供程序的 Machine.Config 数据库连接字符串，也会引发不同的错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:38:44.983

把下面的代码：

```
<connectionStrings>
      <add name="LocalizationDB" 
        xdt:Transform="Remove" xdt:Locator="Match(name)"/>
</connectionStrings> 
```

但是当你从 Visual Studio 发布时要小心。当您查看输出视图时。它应该写给你类似的东西：

```
Transformed Web.config using Web.Release.config into obj\Debug\TransformWebConfig\transformed\Web.config.
Copying all files to temporary location below for package/publish: 
```

但是，如果您有活动的“调试”，您将拥有`Web.Debug.config`而不是`Web.Release.config`

# html - 为什么悬停时这个背景会超出图像？

> ID：15906356
> 
> 赞同：1
> 
> 时间：2013-04-09T15:39:55.653
> 
> 标签：html, css, image, header, hover

我正在尝试在相当复杂的布局上创建悬停效果。悬停效果有效，但是在悬停时，背景（或覆盖）会超出图像（我希望它与图像一样大）。

有谁知道这是为什么以及如何解决它？

HTML

```
<article>
    <div class="img-crop">
        <a href="#" class="title-anchor"><h2>Title</h2></a>
        <a href="#"><img src="http://bit.ly/gUKbAE" /></a>
    </div>
</article> 
```

CSS

```
* {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
}

article {
    overflow: hidden;
}

.title-anchor {
    display: inline-block;
    position: absolute;
    overflow: hidden;
    z-index: 1;
    width: 100%;
    height: 100%;
}

.img-crop:hover .title-anchor {
    background: rgba(0,0,0,0.5);
}

.img-crop {
    display: inline-block;
    position: relative;
    overflow: hidden;
    max-width: 100%;
    margin: 0;
    padding: 0;
}

h2 {
    color: rgba(0,0,0,0);
    margin: 0;
    padding: 0;
    z-index: 2;
    line-height: 0;
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    text-align: center;
}

.img-crop:hover h2 {
    color: black;
} 
```

它也在这里：http: [//jsfiddle.net/kmjRu/39/](http://jsfiddle.net/kmjRu/39/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:43:00.100

只需添加

```
img {
display: block;
} 
```

[http://jsfiddle.net/kmjRu/41/](http://jsfiddle.net/kmjRu/41/)

默认情况下，图像被[替换为内联元素](https://stackoverflow.com/questions/2402761/img-elements-block-level-element-or-inline-element)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:45:37.587

您需要在通用 css 上添加它：

```
img { border: 0; vertical-align: top;} 
```

...

[http://jsfiddle.net/Riskbreaker/kmjRu/43/](http://jsfiddle.net/Riskbreaker/kmjRu/43/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:45:45.957

定义 .img-crop:hover 的高度与 .img-crop img 相同。例如

```
.img-crop:hover {
    background: rgba(0,0,0,0.5);
    height: 100px;
}
.img-crop img{height: 100px;} 
```

# image - PIL中的ImageFilter如何在使用内核或掩码过滤后对0到255之间的像素值进行归一化

> ID：15906368
> 
> 赞同：3
> 
> 时间：2013-04-09T15:40:31.330
> 
> 标签：image, image-processing, python-2.7, python-imaging-library

PIL中的ImageFilter如何在使用内核或掩码过滤后将像素值（不是内核）归一化在0到255之间？（特别是零和内核，如：（-1,-1,-1,0,0,0,1 ,1,1))

```
我的代码是这样的：
导入图片
导入图像过滤器
Horiz = ImageFilter.Kernel((3, 3), (-1,-2,-1,0,0,0,1,2,1), scale=None, offset=0) #sobel mask
im_fltd = myimage.filter（水平）

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:58:02.433

答案在[文档](http://www.pythonware.com/library/pil/handbook/imagefilter.htm)中`Kernel`：

> 如果给出了 scale 参数，则将内核应用于每个像素的结果除以 scale 值。**默认值为内核权重的总和。**

**编辑：**我做了一些实验，发现当比例为零时会发生什么，因为除以零不会很好。任何结果值都`<= 0`变为255。`0``> 0`

在你的情况下，我建议使用比例`1`和偏移量`128`。

PS您可以`scale`通过查看[源代码](http://svn.effbot.org/public/tags/pil-1.1.4/PIL/ImageFilter.py)来验证参数的计算：

```
 if scale is None:
        # default scale is sum of kernel
        scale = reduce(lambda a,b: a+b, kernel) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:22:38.983

Mark 的上述回答陈述了他的理论，即当零和内核与比例参数 0 或 None 或未通过/提及时会发生什么。现在讨论 PIL 在应用内核、缩放和偏移后如何处理计算的像素值，这些值不在 [0,255] 范围内。我关于它如何标准化计算的像素值的理论是它只是简单地做：任何结果值 <= 0 变为 0，任何 > 255 变为 255。

# iis - IIS 7 权限

> ID：15906372
> 
> 赞同：0
> 
> 时间：2013-04-09T15:40:35.173
> 
> 标签：iis, tfs

我在一个 aspx 网站中有这样的代码和平：

```
var tfs = new TeamFoundationServer(tfsurl
                              , new tworkCredential("", "")
                              , new UICredentialsProvider());
tfs.EnsureAuthenticated(); 
```

当我通过 Visual Studio 在本地机器上运行它时，我得到一个 Windows 登录表单。但是当我在服务器上上传网站时，表格没有出现。我被告知有一些权限，但我找不到它们。

我正在使用 IIS 7 和 Windows Server 2008

谢谢！

# python - Python 在张量值体积数据上嵌套 for 循环

> ID：15906373
> 
> 赞同：1
> 
> 时间：2013-04-09T15:40:37.903
> 
> 标签：python, loops, nested, itk

使用 ITK python 包装，我正在读取一个张量值的卷。在每个张量上，我执行如下操作：

```
image      = reader.Execute()
dimensions = image.GetSize()

for z in range ( 0, dimensions[2] ):
  for y in range ( 0, dimensions[1] ):
    for x in range ( 0, dimensions[0] ):      
      image[x,y,z] = function( image[x,y,z] ) 
```

显然，嵌套的 for 循环使用 Python 很慢。但是，我似乎无法使用地图或列表理解来解决这个问题。请注意，该函数是在 9 个值的列表上执行的，这些值表示 3x3 张量。

有人对如何提高性能有建议吗？也许是结果列表的展平操作和手动索引？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:47:19.057

您可以使用`itertools.product`，但在假设它实际上更快之前我会先分析一下：

```
import itertools

xs = range(0, dimensions[0])
ys = range(0, dimensions[1])
zs = range(0, dimensions[2])

coords = itertools.product(xs, ys, zs)

for v in coords:
    image[v[0], v[1], v[2]] = function(image[v[0], v[1], v[2]]) 
```

我的猜测是，遗憾的是，Python 中图像像素上的任何循环都会非常缓慢，您需要使用成像库以某种方式表达您的操作而无需循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T08:55:05.870

经过一些实验，我现在在可读性和速度之间进行权衡。map 函数提供了一个简洁的解决方案，尽管它仍然相当慢。部分地，我的问题在：[Numpy: Beginner nditer中得到了解决](https://stackoverflow.com/questions/14188807/numpy-beginner-nditer)

这是我当前的版本：

```
reader     = sitk.ImageFileReader()
reader.SetFileName ( tensorVolumePath )  

image      = reader.Execute()
dimes      = image.GetSize()
origin     = image.GetOrigin()    

values     = sitk.GetArrayFromImage( image )
valuesFlat = values.reshape(dims[0]*dims[1]*dims[2], 3, 3)  

arrayInv   = np.array(map(np.linalg.inv, valuesFlat))  

imageInv = sitk.GetImageFromArray( valuesFlat.reshape(dims[0], dims[1], dims[2], -1) )
imageInv.SetOrigin(origin)

writer = sitk.ImageFileWriter()
writer.SetFileName ( tensorVolumeInversePath )
writer.Execute ( imageInv ); 
```

# javascript - innerHTML 显示函数，而不是函数的返回值

> ID：15906375
> 
> 赞同：1
> 
> 时间：2013-04-09T15:40:45.573
> 
> 标签：javascript, variable-assignment, anonymous-function

试图干掉我写的一些旧的 javascript。

**测试（）**

```
function test() {
    var output = function() {
        return ajaxPost("test.php", "testvar=bananas");
    }
    document.getElementById("main").innerHTML = output;
} 
```

**ajaxPost()**

```
function ajaxPost(file,stuff) {
    var xmlhttp;
    var actionFile = file;
    var ajaxVars = stuff;

    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            return xmlhttp.responseText;
        } else {
            // Waiting...
        }
    }

    xmlhttp.open("POST", actionFile, true);

    //Send the proper header information along with the request
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

    xmlhttp.send(ajaxVars);
} 
```

我收到的输出是这样的：

```
<div id="main">
    function () { return ajaxPost("test.php", "testvar=bananas"); }
</div> 
```

我无法弄清楚为什么它将函数粘贴在 div 中，而不是函数应该实际执行的操作。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:42:09.440

你必须通过添加来执行函数`()`，否则你会收到函数体！

```
function test() {
    var output = function() {
        return ajaxPost("test.php", "testvar=bananas");
    }
    document.getElementById("main").innerHTML = output();
} 
```

此外，您尝试从此处的 AJAX 调用返回一个值

```
 return xmlhttp.responseText; 
```

这不会起作用，因为在异步调用中没有任何东西可以捕获返回的值！您应该调用某种使用返回值的回调。

* * *

**编辑**

这将是一种类似于您的代码的回调方法：

```
function test( data ) {
    document.getElementById("main").innerHTML = data;
}

function ajaxPost(file,stuff,cb) {

    // ...

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            cb( xmlhttp.responseText );
        } else {
            // Waiting...
        }
    }
    // ...
}

// make the actual call
ajaxPost("test.php", "testvar=bananas", test); 
```

# java - 如何让 Java 复选框打开一个窗口？

> ID：15906376
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:40:46.413
> 
> 标签：java, window

我做了一个复选框，所以当你点击它时，它会打开另一个带有更多复选框的窗口。您将如何使这些复选框打开另一个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:00:19.710

您是否尝试过将 actionlistener 添加到您的 checkBox 组件？

很难看出你到底想要达到什么目标。但从你写的内容来看，应该不止于此。

对于初学者，您可以尝试本教程：

[http://www.java2s.com/Code/JavaAPI/javax.swing/JCheckBoxaddActionListenerActionListenerlis.htm](http://www.java2s.com/Code/JavaAPI/javax.swing/JCheckBoxaddActionListenerActionListenerlis.htm)

# android - Android 第一个应用程序/小部件 - Log Cat

> ID：15906377
> 
> 赞同：0
> 
> 时间：2013-04-09T15:40:55.157
> 
> 标签：android, widget

昨天我开始在 Eclipse 到 Android 编程，我做了简单的程序（Hello world！） - 它正在工作，但今天我正在尝试做简单的小部件......你能帮我看看吗？这适用于 ADK 和我的手机，但是：应用程序 Hello Widget（进程 com.example.widget）已意外停止。强制关闭。

我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.widget"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme"
    android:name=".zachodnik"
    android:label="@string/app_name">
    <receiver android:name=".zachodnik" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data android:name="android.appwidget.provider" android:resource="@xml/zachodnik_widget_provider" />
    </receiver>
</application>

</manifest> 
```

我的课“zachodnik.java”

```
package com.example.widget;

import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.widget.RemoteViews;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;
import static java.lang.Math.*;

public class zachodnik extends AppWidgetProvider {
private AppWidgetManager appWidgetManager;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        Timer timer = new Timer();          
        timer.scheduleAtFixedRate(new ZachodyWschody(context, appWidgetManager),100, 10000);

    }

    private class ZachodyWschody extends TimerTask{

        RemoteViews remoteViews;
        ComponentName thisWidget;
        AppWidgetManager appWidgetManager;            
        private double Wsch, Zach;

        public ZachodyWschody(Context context,AppWidgetManager appWidgetManager){
            this.appWidgetManager = appWidgetManager;
            remoteViews = new RemoteViews(context.getPackageName(), R.layout.activity_main);
            thisWidget = new ComponentName(context, zachodnik.class);                
        }

        public void algorytm(){

            Date data = new Date();

            int R =2009;// data.getYear();
            int M = 10; //data.getMonth();
            int D = 21;//data.getDay();

            double Long = 19; //dane dla Krakowa
            double Lat = 50;
            double Req = -0.833;
            double PI = 3.1415;

            double J = 367*R-(int)(7*(R+(int)((M+9)/12))/4)+(int)(275*M/9)+D-730531.5;
            double Cent = J/36525;
            double L = (4.8949504201433+628.331969753199*Cent) % 6.28318530718; //modulo
            double G = (6.2400408+628.3019501*Cent) % 6.28318530718;
            double O = 0.409093-0.0002269*Cent;
            double F = 0.033423 * sin(G) + 0.00034907 * sin(2*G);
            double E = 0.0430398 * sin(2*(L+F)) - 0.00092502 * sin(4*(L+F)) - F;
            double A = asin(sin(O) * sin(L+F));
            double C = (sin(0.017453293*Req)-sin(0.017453293*Lat)*sin(A)) / (cos(0.017453293*Lat)*cos(A));

            Wsch = (PI - (E+0.017453293*Long+1*acos(C)))*57.29577951/15;
            Zach = (PI - (E+0.017453293*Long+(-1)*acos(C)))*57.29577951/15;

        }

        @Override
        public void run(){
            algorytm();
            int godzWsch =  (int)Wsch;               
            int godzZach = (int)Zach;

            double minWsch = 60*(Wsch-godzWsch);
            double minZach = 60*(Zach-godzZach);

            godzWsch = godzWsch + 2; //przesuniec dla naszej strefy czasowej
            godzZach = godzZach + 2;

            String wsch = String.valueOf(godzWsch+":"+(int)minWsch);
            CharSequence w = (CharSequence)wsch;
            String zach = String.valueOf(godzZach+":"+(int)minZach);
            CharSequence z = (CharSequence)zach;

            remoteViews.setTextViewText(R.id.widget_textview, "Wschód: " + w + "\nZachód:" +  z );
            appWidgetManager.updateAppWidget(thisWidget, remoteViews);

        }
    }
} 
```

“zachodnik_widget_provider.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="72dip"
    android:minHeight="36dip"
    android:updatePeriodMillis="10000"
    android:initialLayout="@layout/activity_main"
/> 
```

“字符串.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="action_settings">Settings</string>
    <string name="widget_text">Hello Widget!</string>
    <string name="app_name">Widget Zachodnik</string>
</resources> 
```

此小部件应提供有关日出和日落的信息。

这是[来自 LogCat 的错误](http://img21.imageshack.us/img21/6209/93354257.jpg)（imageshack JPG）

预先感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:00:24.553

乍一看，您似乎已将您的`zachodnik`类定义为`AndroidManifest.xml`.

这是为扩展类保留的`android.app.Application` 当您启动应用程序时，应用程序加载器无法实例化您的类，因为它需要一个 Application 对象而不是 AppWidgetProvider，因此您会得到 ClassCastException。

在您从标签`AndroidManifest.xml`中删除 android:name=".zachodnik" 行`application`

另一件事，请注意 Java 中的命名约定。例如，类名应该以大写字母开头。

# php - 主ID onchange时如何显示数据库中的详细信息

> ID：15906381
> 
> 赞同：0
> 
> 时间：2013-04-09T15:40:59.393
> 
> 标签：php, javascript

我在 mysql 中有一个包含 courseid 和 coursename 的表。我设法使用 php 用表中的 courseid 填充下拉菜单。现在我想在每次用户在下拉列表中选择 courseid 时显示 coursename，例如当他们选择 cd123 系统将显示“多媒体”（来自 db 的信息基于 courseid）。谢谢

```
<body>
<select id="coursecodeID"> 
<?php
include ('config.inc');
$sql = "SELECT * FROM coursetest";
$rs = mysql_query($sql);
echo "<option>-Please select-</option>"; 
while($row = mysql_fetch_array($rs))
{ 
echo "<option value=\"".$row['courseid']."\">".$row['courseid']."</option>\n  ";
}
?> 
</select>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:44:07.150

`$row['coursename']`像这样简单地使用

```
echo "<option value=\"".$row['courseid']."\">".$row['coursename']."</option>\n"; 
```

这是一个非常基本的问题，因此我建议您阅读更多教程/书籍/您认为有用的任何内容。

您应该知道这些`mysql_*`功能已[弃用](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)，这意味着它们不会被进一步开发。所以在新代码中建议使用[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)或[MySQLi](http://www.php.net/manual/en/book.mysqli.php)。

您是否希望文本显示在下拉列表之外的某个位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:46:00.307

好吧，您只需要执行一个通过 courseID 获取课程名称的 SELECT 语句

示例：select coursename from coursetest where courseid=(这里放选择的索引)

这就是它

有问题尽管问我

# objective-c - 设置标题并将按钮添加到导航控制器

> ID：15906382
> 
> 赞同：0
> 
> 时间：2013-04-09T15:41:00.097
> 
> 标签：objective-c

我创建了一个导航控制器，但我无法为导航栏设置标题或添加按钮。如何做到这一点？这是文件 AppDelegate.m 中应用程序 DidFinishLauchingOption 的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:view];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    self.view = [[ViewController alloc] init];
    self.window.rootViewController = self.view;
    [self.window addSubview:navController.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:59:48.723

您需要将`rootViewController`窗口对象的属性设置为导航控制器，而不是您的 `ViewController. 这应该为您指明正确的方向：

```
@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Create and configure a window
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];

    // Create a view controller
    UIViewController *viewController = [[ViewController alloc] init];

    // Create a navigation controller and set its root view controller to the instance of `ViewController`
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];

    // Add the navigation controller to the window
    self.window.rootViewController = navController;

    [self.window makeKeyAndVisible];

    return YES;
}

// ...

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Set the view controller's title
    self.title = NSLocalizedString(@"View Controller", @"");

    // Add a navigation bar button
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(refreshButtonPressed:)];
}

- (void)refreshButtonPressed:(id)sender
{
    // Do something when the refresh button is pressed.
}

// ...

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:02:00.243

要创建初始设置，请使用视图控制器创建导航控制器并将其设置为应用程序委托窗口的根视图控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //create window
    [self setWindow:[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]];

    //create and set root view controller
    [[self window] setRootViewController:[[UINavigationController alloc] initWithRootViewController:[[RootViewController alloc] init]]];

    //make window key and visible
    [self.window makeKeyAndVisible];

    //bail
    return YES;
} 
```

然后在您的视图控制器中，设置标题并添加您的导航项：

```
- (void)viewWillAppear:(BOOL)animated
{
    //call parent implementation
    [super viewWillAppear:animated];

    //set view controller title
    [self setTitle:@"Root View Controller"];

    //add navigation bar button
    [[self navigationItem] setRightBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:@"Button Title" style:UIBarButtonItemStyleBordered target:self action:@selector(handleBarButtonItemEvents:)]];
} 
```

并通过以下方式监听按钮事件：

```
- (void)handleBarButtonItemEvents:(id)sender
{
    //
} 
```

# c# - 在 csv 文件的列中搜索值

> ID：15906383
> 
> 赞同：0
> 
> 时间：2013-04-09T15:41:05.447
> 
> 标签：c#, io

我有一个包含 2 列的 csv 文件，`ID`并且`Flag`. 有很多`Flag`值，但有一些表示坏事——错误、失败等。我需要做的很简单——搜索`Flag`列以查看这些值中是否有任何值在“坏标志”组中。

我有以下代码可以满足我的需要-检查标志文件是否存在，遍历每一行，将其拆分，然后检查当前行是否具有标志元素，然后检查标志是否在我的错误组中-如果我什至发现一个我已经完成了：

```
private bool CheckFlagStatus( string directory )
{
    // Bad flags
    const int Flag1 = 1;
    const int Flag2 = 5; 
    const int Flag3 = 6;
    const int Flag4 = 42;
    const int Flag5 = 61;

    bool isGood = true;
    string flagFilePath= Path.Combine( directory, "flags.csv" );
    if ( File.Exists( flagFilePath) )
    {
        using ( StreamReader reader = new StreamReader( flagFilePath) )
        {
            string line;
            while ( !string.IsNullOrEmpty( line = reader.ReadLine() ) )
            {
                var splitval = line.Split(',');
                if ( splitval.Length == 2 )
                {
                    var flagString = splitval[1];
                    int flag;
                    bool parsed = Int32.TryParse( flagString, out flag );
                    if ( parsed )
                    {
                        if ( flag == Flag1 || flag == Flag2 || flag == Flag3
                            || flag == Flag4 || flag == Flag5 )
                        {
                            isGood = false;
                            break;
                        }
                    }
                }
            }
        }
    }
    return isGood;
} 
```

虽然这可行，但这是一种非常线性的蛮力方法。虽然完美的带有 20 行的 flags.csv 文件，但如果有一百万行会发生什么？我想知道关于如何使它更优雅或优化它的一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:52:58.793

这已经优化了。如果有一百万行会花费更长的时间，但性能是线性的，这比大多数算法要好得多。您可以使您的代码更优雅，但这只是样式问题，与您实际在做什么或它的优化程度无关。请记住，优化的代码通常更冗长。

通过执行类似于`File.ReadLines`然后拆分新行然后拆分`,`然后循环列表仅查看奇数索引的操作，您的代码可能会更优雅（行更少），但性能不会更好。事实上，情况可能会更糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:58:22.170

您的代码没问题，检查每一行都必须是这样，我只是尝试通过使用 LINQ 和`Readlines`方法使您的代码更具可读性：

```
private bool CheckFlagStatus(string directory)
{
    badFlags = new[] { 1, 5, 6, 42, 61};
    string flagFilePath = Path.Combine(directory, "flags.csv" );

    if (File.Exists(flagFilePath))
    {
        var lines = File.ReadLines(flagFilePath)
                        .Where(line => !string.IsNullOrEmpty(line));

        foreach (var line in lines)
        {
            var splitval = line.Split(',');
            if (splitval.Length == 2)
            {
                var flagString = splitval.Last();
                int flag;

                if (int.TryParse(flagString, out flag))
                {
                    if (badFlags.Contains(flag)) return false;
                }
            }
        }    
    }
    return true;
} 
```

# asp.net - 如何在asp.net中为气泡图添加标签

> ID：15906388
> 
> 赞同：0
> 
> 时间：2013-04-09T15:41:15.160
> 
> 标签：asp.net, vb.net, bubble-chart

有谁知道如何在 vb.net 中为气泡图添加标签？

我可以轻松添加气泡和大小，但我不知道如何添加标签。以详细代码为例

```
 Dim xValues As Double() = {10.62, 75.54, 60.45}
    Dim yValues As Double() = {650.62, 50.54, 600.45}
    Dim size As Integer() = {10, 20, 30}
    Dim names As String() = {"a", "b", "c"}

    Chart5.Series("Series1").ChartType = SeriesChartType.Bubble
    Chart5.Series("Series1").Points.DataBindXY(xValues, yValues, size, names)
    Chart5.Series("Series1").MarkerStyle = MarkerStyle.Circle 
```

任何帮助/想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:03:27.717

只是为了澄清我最初的问题和对 Vishy 的回应，我一直在寻找气泡标签。

我用这段代码找到了解决方案

```
 For i = 0 To 2
            Chart5.Series("Series1").Points(i).Label = names(i)
    Next 
```

希望这可以帮助某人

问候，

# nav - 导航菜单：使用单个居中图像，两侧有 2 个菜单链接

> ID：15906389
> 
> 赞同：1
> 
> 时间：2013-04-09T15:41:19.907
> 
> 标签：nav

好的，我正在尝试修改我的导航菜单。我想要这样的网站：

[http://aleksfaure.com/](http://aleksfaure.com/)

他有一个图像（徽标），两侧有 2 个菜单链接。我尝试了几种不同的方法，包括仅使用我的徽标作为顶部居中的图像，位于菜单之间。没有骰子。

* * *

这是我当前导航菜单中的相关 HTML 和 CSS。在这方面，我仍然是一个中级初学者。

* * *

HTML

```
<nav role="navigation">

<ul id="nav">

<li><a href="#" class="mainnav">Home</a></li>

<li><a href="#" class="mainnav">About Me</a></li>

<ul id="nav-right" style="float:right;">

<li><a href="#" class="mainnav">Portfolio</a></li>

<li><a href="#" class="mainnav">Contact</a></li> </ul>

</ul></nav> 
```

CSS

```
#header nav {
    position: relative;
    width: 700px;
    height: 163px;
    display: block;
    margin: 0 auto;
    text-align: center;
}

#header nav ul li {
        float: left; list-style: none;
}

ul#nav li a {

    display: block; 
    width: 100px; 
    height: 100px;
    padding: 50px 0 0 0; 
    margin: 0 10px 0 10px;
    font-family: 'MuseoSlab-500', Helvetica, sans-serif; 
    font-size: 16px;
    text-transform: uppercase;
    color: #000; 
    text-shadow: 0 2px 1px #bbbaba; 
    text-decoration: none;

}
    ul#nav li a.mainnav:hover {

        color: #13cad1; 
        text-shadow: 0 2px 1px #fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:20:23.517

您不需要使用两个单独的列表。将整个菜单（包括您的图像）视为一个列表。为您的 HTML 考虑这样的事情：

```
<div>
<ul id="nav">
  <li><a href="#">Home</a></li>
  <li><a href="#">About Me</a></li>
  <li><img src="images/yourLogo.png"></li>
  <li><a href="#">Portfolio</a></li>
  <li><a href="#">Contact</a></li>
</ul>
</div> 
```

并确保你有你的

*   样式设置为浮动：左；

    ```
    #nav li { float: left; list-style: none;} 
    ```

    然后，只需将整个 div 居中在页面上，并根据需要设置链接样式。

    单独说明：在您的代码中，您缺少第一个无序列表的结束标记。

    导航元素的支持不是很广泛，因此根据您的受众，您可能需要使用 div。

# git - git-svn 忽略大的二进制文件

> ID：15906391
> 
> 赞同：6
> 
> 时间：2013-04-09T15:41:22.647
> 
> 标签：git, svn, git-svn

我正在使用一个大型 svn 存储库（30,000 多个修订版）。我正在使用 git-svn，但成功有限。

我的主要问题是 svn 存储库包含对大型二进制文件 (~30MB) 的频繁更新。我不关心这些文件的历史，但我关心这些文件的当前版本。

如果自我上次 svn rebase 以来对大型二进制文件进行了多次更新（这很常见），则 git svn rebase 运行速度非常慢。我的 git 数据库也增长得很快。我正在寻求解决这两个关键问题。

理想情况下，我想做的是完全忽略 svn 中的这些大文件，然后运行一个只获取最新版本的脚本，然后我会用我的 .gitignore 阻止它。不过，我对其他选择非常开放。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T10:30:56.090

`--ignore-paths`您可以使用以下选项忽略某些文件`git svn`：

```
 --ignore-paths=<regex>
               This allows one to specify a Perl regular expression that will
               cause skipping of all matching paths from checkout from SVN.
               The --ignore-paths option should match for every fetch
               (including automatic fetches due to clone, dcommit, rebase,
               etc) on a given repository.

                   config key: svn-remote.<name>.ignore-paths

               If the ignore-paths config key is set and the command line
               option is also given, both regular expressions will be used.

               Examples:

               Skip "doc*" directory for every fetch

                       --ignore-paths="^doc"

               Skip "branches" and "tags" of first level directories

                       --ignore-paths="^[^/]+/(?:branches|tags)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-21T19:45:08.693

> git svn 选项 --ignore-paths=

在将 svn 存储库转换为 git 时排除不需要的二进制文件很有用

如果您知道二进制文件的文件扩展名，那么您可以编写一个正则表达式来排除它们，例如，

> .jar 文件：--ignore-paths=".*.jar$"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:39:44.887

据我所知，我认为使用 git-svn 不可能这样做，因为 git-svn 获取整个 svn 信息并将其转换为 git。检查你的包文件，你会发现它是一个巨大的文件。

我要做的是将巨大的文件/文件夹添加到 .gitignore 中，这样它根本不会处理它们。

一个不错的解决方案在这里发布：http: [//alblue.bandlem.com/2011/11/git-tip-of-week-git-bigjobbies.html](http://alblue.bandlem.com/2011/11/git-tip-of-week-git-bigjobbies.html)

# facebook - 没有内置对象类型审查的文档（请参阅 video.rates 操作）或 news.read ？

> ID：15906393
> 
> 赞同：1
> 
> 时间：2013-04-09T15:41:28.490
> 
> 标签：facebook, facebook-opengraph, built-in

在 FB 文档（[https://developers.facebook.com/docs/reference/opengraph/object-type](https://developers.facebook.com/docs/reference/opengraph/object-type)）上，我看不到内置对象“Review”，但该对象用于操作“视频” .rates' => [http://developers.facebook.com/docs/reference/opengraph/action-type/video.rates](http://developers.facebook.com/docs/reference/opengraph/action-type/video.rates)

那么，这个内置对象存在与否？

其他问题：我想在用户阅读评论时触发操作。（如 og 内置动作 news.read）。但是，问题：内置动作 news.read 在哪里？（请参阅文档：developers.facebook.com/docs/reference/opengraph/action-type）Facebook 已停用此操作？我可以用它来发布“阅读评论”还是我必须做出自己的“阅读”动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:53:17.137

同样的问题！他们已经删除了 news.reads 操作，所以我不确定我们是否已经被允许进行自定义读取操作。以前不允许这样做。此外，当您尝试使用 news.reads 时，该操作不会出现在时间线上，只会出现在您的活动日志中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:47:58.440

是的，内置对象“评论”目前确实存在，但考虑到 facebook 进行更改的频率，我不知道它还能使用多久。[（顺便说一句，在Developer Roadmap](https://developers.facebook.com/roadmap/)中没有关于它被弃用或删除的警告）。

但是如果你真的想使用它，这里有一个示例（你可以在[图形资源管理](http://developers.facebook.com/tools/explorer)器中尝试一下）

```
https://graph.facebook.com/me/video.rates?
access_token=ACCESS_TOKEN&
method=POST&
rating:value=3.1415926535&
rating:scale=42&
rating:normalized_value=3.1415926535&
review=http://samples.ogp.me/467235199955838 
```

这里的评论是对[自托管评论对象](http://developers.facebook.com/docs/opengraph/using-objects/)的引用（用外行的话来说：它是包含评论对象元标记的页面），但我认为如果对象由[Object API](http://developers.facebook.com/docs/opengraph/using-object-api/)创建，它可以是对象 id 。但要记住的一件事是，评论对象必须具有`og:object`对其视频或电影对象 (url) 的元标记引用。（就我个人而言，我也保留`review:target`对相同网址的引用，以防万一。）

至于第二个问题，我认为你做不到。Facebook 将其视为内容消费，不会允许您的自定义操作通过审核。只有当用户在您的网站上明确执行了某些操作时，您才能发布故事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T14:09:51.003

将此命名空间 xmlns:review="http://ogp.me/ns/review#" 添加到页面上的 html 标记，并通过此链接查看所有参数[http://graph.facebook.com/schema/og/审查](http://graph.facebook.com/schema/og/review)

# wcf - 如果我在 AddObject 上添加数据，如何返回 ID？

> ID：15906397
> 
> 赞同：2
> 
> 时间：2013-04-09T15:41:38.477
> 
> 标签：wcf, entity-framework, wcf-data-services, odata

我正在使用 WCF 数据服务客户端并尝试将对象添加到我的数据上下文 (EntityFramework)。对象已添加，但之后我无法使用该 ID。有没有可能触发SaveChanges方法后，对象直接获取到自动生成的id？

```
Order order=new Order();
order.name="test";
context.AddObject("Order", order);
if (await context.SaveChanges()) //Extension method on my context to save changes async
{
  System.Diagnostics.Debug.WriteLine(order.id); //output: 0
} 
```

我的扩展方法如下所示：

```
public partial class MyEntities
{
  public async Task<bool> SaveChanges()
  {
    var queryTask = Task.Factory.FromAsync(this.BeginSaveChanges(null,null), asResult =>
    {
        return(asResult.IsCompleted);
    });
    return await queryTask;
  }
} 
```

我也尝试扩展该`AddObject`方法，但此方法也返回 0 值：

```
 internal async void AddObject<TResult>(object entity) where TResult : IExtend
    {
        base.AddObject(entity.ToString().Split('.').Last(), entity);
        if (await this.SaveChanges())
        {
            System.Diagnostics.Debug.WriteLine(((TResult)entity).id); //output: 0
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:05:44.243

如果您可以使用 OData V3，那么您可以`DataServiceContext.AddAndUpdateResponsePreference`将`IncludeContent`. 这会向服务器发送一个首选标头，并且服务器将在对 POST 请求的响应中包含该实体。客户端然后解析它并将值应用于客户端对象。完成后，新生成的 ID 应该在客户端 OM 中可见`SaveChanges`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:15:27.713

我错过了这个`EndSaveChanges`功能。当我将扩展功能更改为此时，对象 ID 会更新。

```
 public async Task<DataServiceResponse> SaveChanges()
    {
        var queryTask = Task.Factory.FromAsync(this.BeginSaveChanges(null,null), asResult =>
        {
            var result = this.EndSaveChanges(asResult);
            return result;
        });
        return await queryTask;
    } 
```

# mule - 在功能测试期间未注册安全提供程序

> ID：15906399
> 
> 赞同：1
> 
> 时间：2013-04-09T15:41:48.127
> 
> 标签：mule, esb

我们在 Mule 上部署的 RestFul Web 服务中使用基本身份验证，安全性由内置的 Spring Security 提供支持。我们正在使用 Mule 3.3.0。

我们将 mflow 分成 2 个不同的部分 - main.xml 和 connector.xml。原因是在运行功能测试时，我们传递了另一个 mflow connector-test.xml 而不是 connector.xml，其中所有端点（如 AMQ 等）都被存根。但是对于 Rest，我们仍然使用正确的端点。在我们的 Mule 功能测试中，我们使用 apache commons httpclient 对这些端点进行安静的 WS 调用，等待响应，然后检查它是否通过了测试。

相同的功能在 mule 独立版中运行良好 - 即 rest webservice 部署良好，我们可以发出 http rest 请求 - 它获得基本身份验证，然后返回响应。但是，在功能测试期间进行身份验证时，它会失败并显示消息

```
Exception stack is:
1\. There is no Security Provider reqistered called "org.mule.security.DefaultMuleAuthentication" (org.mule.api.security.SecurityProviderNotFoundException)
  org.mule.security.MuleSecurityManager:107 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/security/SecurityProviderNotFoundException.html)
********************************************************************************
Root Exception stack trace:
org.mule.api.security.SecurityProviderNotFoundException: There is no Security Provider reqistered called "org.mule.security.DefaultMuleAuthentication"
      at org.mule.security.MuleSecurityManager.authenticate(MuleSecurityManager.java:107)
      at org.mule.transport.http.filters.HttpBasicAuthenticationFilter.authenticateInbound(HttpBasicAuthenticationFilter.java:134)
      at org.mule.security.AbstractEndpointSecurityFilter.authenticate(AbstractEndpointSecurityFilter.java:58)
      at org.mule.security.AbstractAuthenticationFilter.doFilter(AbstractAuthenticationFilter.java:56)
      at org.mule.security.AbstractEndpointSecurityFilter.doFilter(AbstractEndpointSecurityFilter.java:49)
      at org.mule.processor.SecurityFilterMessageProcessor.process(SecurityFilterMessageProcessor.java:52)
      at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
      at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
      at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
      at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
      at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
      at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
      at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
      at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
      at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
      at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
      at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
      at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
      at org.mule.transport.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:192)
      at org.mule.transport.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:174)
      at org.mule.transport.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:166)
      at org.mule.transport.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:153)
      at org.mule.transport.http.HttpMessageReceiver$HttpWorker$1.process(HttpMessageReceiver.java:310)
      at org.mule.transport.http.HttpMessageReceiver$HttpWorker$1.process(HttpMessageReceiver.java:305)
      at org.mule.execution.ExecuteCallbackInterceptor.execute(ExecuteCallbackInterceptor.java:20)
      at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:34)
      at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:18)
      at org.mule.execution.BeginAndResolveTransactionInterceptor.execute(BeginAndResolveTransactionInterceptor.java:58)
      at org.mule.execution.ResolvePreviousTransactionInterceptor.execute(ResolvePreviousTransactionInterceptor.java:48)
      at org.mule.execution.SuspendXaTransactionInterceptor.execute(SuspendXaTransactionInterceptor.java:54)
      at org.mule.execution.ValidateTransactionalStateInterceptor.execute(ValidateTransactionalStateInterceptor.java:44)
      at org.mule.execution.IsolateCurrentTransactionInterceptor.execute(IsolateCurrentTransactionInterceptor.java:44)
      at org.mule.execution.ExternalTransactionInterceptor.execute(ExternalTransactionInterceptor.java:52)
      at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:32)
      at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:17)
      at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:113)
      at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:34)
      at org.mule.transport.http.HttpMessageReceiver$HttpWorker.doRequest(HttpMessageReceiver.java:304)
      at org.mule.transport.http.HttpMessageReceiver$HttpWorker.processRequest(HttpMessageReceiver.java:250)
      at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:163)
      at org.mule.work.WorkerContext.run(WorkerContext.java:311)
      at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
      at java.lang.Thread.run(Thread.java:662) 
```

**知道为什么安全提供者没有注册吗？**

这里是设置..

**main.xml 的内容**

```
 <flow name="RestFlow" doc:name="RestFlow">
    <inbound-endpoint ref="restEndPoint" mimeType="text/xml">
            <mule-ss:http-security-filter realm="easervices-realm" />
        </inbound-endpoint>

            <jersey:resources doc:name="REST">
 <component>
            <spring-object bean="createCompany"/>            
        </component>
        <component>
            <spring-object bean="activateNumbers"/>            
        </component>
 </jersey:resources>
</flow>
    ........ 
```

如您所见，安全位被注入到上面的 RestFlow 中。其余的安全设置在 connector.xml(live) 或 connector-test.xml(test) 中完成

**connector-test.xml 的内容**- 在内存中部署以运行功能测试时需要注意的点 Rest 端点部署在端口 8098 上，但这与安全性无关

```
<spring:beans>
      <spring:import resource="classpath:spring/external-service-config-stub.xml" />

      <ss:authentication-manager alias="authenticationManager">
            <ss:authentication-provider>
                  <ss:password-encoder hash="sha" />
                  <ss:user-service id="userService">
                        <ss:user name="adminportal" password="0314795e56347590b54b7da2afba3456fgcd4968"
                              authorities="ROLE_ADMIN" />
                  </ss:user-service>

            </ss:authentication-provider>
      </ss:authentication-manager>
      <ss:global-method-security
            pre-post-annotations="enabled" jsr250-annotations="enabled" />
      </spring:beans>

<http:endpoint exchange-pattern="request-response" host="localhost"
            port="8098" path="mypath" name="restEndPoint" doc:name="HTTP" />
<mule-ss:security-manager>
            <mule-ss:delegate-security-provider
                  name="memory-provider" delegate-ref="authenticationManager" />
      </mule-ss:security-manager> 
```

**connector.xml 的内容**- 在 mule-standalone 中部署时的注意点 Rest 暴露在端口 8088 上，并且注入了真正的 Spring 服务（尽管它们与安全性无关）

```
<spring:beans>
    <spring:import resource="classpath:spring/external-service-config.xml" />

    <ss:authentication-manager alias="authenticationManager">
         <ss:authentication-provider>
                  <ss:password-encoder hash="sha" />
                  <ss:user-service id="userService">
                        <ss:user name="adminportal" password="0314795e56347590b54b7da2afba3456fgcd4968"
                              authorities="ROLE_ADMIN" />
                  </ss:user-service>

            </ss:authentication-provider>
    </ss:authentication-manager>
    <ss:global-method-security
        pre-post-annotations="enabled" jsr250-annotations="enabled" />

    <context:property-placeholder location="classpath:config/mule-config.properties" />
    </spring:beans>

<http:endpoint exchange-pattern="request-response" host="localhost"
        port="8088" path="mypath" name="restEndPoint" mimeType="text/xml"
        doc:name="HTTP" />
<mule-ss:security-manager>
        <mule-ss:delegate-security-provider
            name="memory-provider" delegate-ref="authenticationManager" />
    </mule-ss:security-manager> 
```

**在我们的功能测试代码中调用代码，在运行测试时发出 http 休息请求。**

```
httpClient.getState().setCredentials(
                new AuthScope("localhost", 8098, "easervices-realm"),
                new UsernamePasswordCredentials("adminportal",
                        "thepassword"));
        httpClient.getParams().setAuthenticationPreemptive(true);
        httpClient.getParams().setParameter(AuthPolicy.AUTH_SCHEME_PRIORITY,
                Collections.singleton(AuthPolicy.BASIC));
        final PostMethod meth = new PostMethod("http://localhost:8098/horizon"
                + url);
        meth.setDoAuthentication(true);
        meth.setRequestEntity(new StringRequestEntity(xml, "text/xml",
                "ISO-8859-1"));
        // meth.addRequestHeader("Content-Type", "text/xml");

        httpClient.executeMethod(meth); 
```

请帮忙。connector.xml 中使用了相同的安全设置，当应用程序部署在独立的 mule 3.3.0 中时，它可以正常部署并且基本身份验证也很好。不知何故，安全提供者在运行 Mule 功能测试时没有注册，其中 mule 服务器在内存中启动，并且应用程序部署为使用测试配置进行测试。

# java - MySQL 保存/加载问题

> ID：15906407
> 
> 赞同：0
> 
> 时间：2013-04-09T15:42:05.797
> 
> 标签：java, mysql, database

好的，所以我有一个程序，可以在其中将新玩家添加到数据库中，并将用户加载到列表中。问题是当我删除一个用户，然后去添加一个新用户时，新玩家被添加到旧用户所在的位置。基本上是因为那个位置现在是免费的，我使用：

```
rs.moveToInsertRow(); 
```

有没有一种方法可以在添加新玩家时“始终”添加到数据库的末尾。就像您从表中删除一行以使数据库压缩以使其没有间隙一样？

这是代码：

公共静态无效保存（）{尝试{

```
String Name = "#####";
     String Pass= "#####";
    String Host = "######";
        Connection con = DriverManager.getConnection(String.format(
    "jdbc:mysql://%s:%s/%s", Host, "####", "####"),
    Name, Pass);
      Statement stmt = con.createStatement (ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);

    String sql = "SELECT * FROM Accounts";
        ResultSet rs = stmt.executeQuery(sql);

     rs.moveToInsertRow( );

        String userName= TestForm.UsernameTextField.getText(); //make this equal to whats in textfield
        String password= TestForm.PasswordTextField.getText(); //make this equal to whats in textfield

        String insertQuery="insert into Accounts (`Username`,`Password`) values ('"+userName+"','"+password+"');";
        stmt.executeUpdate(insertQuery);

     stmt.close();
     rs.close();
}

catch(Exception e)
{
    System.out.println("ERROR");
    e.printStackTrace();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:26:24.623

要解决此问题，请添加一列 'id' 。那一栏应该是`auto increment`。也让你`Username`与众不同。

# jenkins - 从主到从的工作/指令是如何在 Jenkins 中传输的？

> ID：15906409
> 
> 赞同：3
> 
> 时间：2013-04-09T15:42:09.570
> 
> 标签：jenkins, hudson, master, slave

我试图理解詹金斯中主从之间交流的极端意思。从主机到从机的作业/指令是如何传输的？

我知道建立了 TCP/IP 双向链接。

是否有任何文件详细解释（不仅仅是整体）主从之间的通信方式？另外，源代码中的哪些包是在通信中涉及的？

到目前为止我知道它，
getTCPslaveAgentListener getSlaveagentPort() SetSlaveAgentPort CheckTaskLisnter

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:51:06.117

Jenkins 使用一个名为[remoting](https://github.com/jenkinsci/remoting)的库，它负责建立通道、发送闭包并在远程机器上自动加载所需的 Java 类。

[这里](http://hudson-ci.org/docs/HudsonArch-Remoting.pdf)有一些关于它如何工作的文档（PDF）。

# c# - 在 Sitecore 中设置 Created By 值

> ID：15906413
> 
> 赞同：7
> 
> 时间：2013-04-09T15:42:18.230
> 
> 标签：c#, .net, content-management-system, sitecore

有什么方法可以从后面的代码中设置**Sitecore**`Created By`中的值或`Created Date`项目字段？

 **谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T15:47:04.617

只需使用项目的字段更新它，例如：

```
using (new Sitecore.SecurityModel.SecurityDisabler())
{
    item.Editing.BeginEdit();
    item[Sitecore.FieldIDs.Created] = Sitecore.DateUtil.ToIsoDate(DateTime.Now);
    item.Editing.EndEdit();
} 
```**

# java - 用java下载网站源代码 - Livedata

> ID：15906416
> 
> 赞同：0
> 
> 时间：2013-04-09T15:42:27.847
> 
> 标签：java, javascript, html, download

我想从带有 Java 的网站下载源代码 (html)。我在这里（stackoverflow.com）看到了很多解决方案，但我需要一个特殊的解决方案。我想做源代码，其中将在网站打开时下载实时数据。我会用javascript说些什么！加载所有这些数据后，有没有办法下载源代码？

# java - CORBA：服务器作为客户端

> ID：15906418
> 
> 赞同：1
> 
> 时间：2013-04-09T15:42:40.003
> 
> 标签：java, distributed-computing, corba, idl

我一直在环顾四周，也找不到作为客户端实现的 CORBA 服务器的示例。我知道您可以让客户端连接到服务器以调用方法，但是有没有办法从客户端服务调用方法。我正在考虑将客户端的接口也作为服务器。任何我可以找到示例或示例的建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:51:09.463

是的，你可以这样做。事实上，这样做并没有什么特别之处。CORBA ORB 允许应用程序同时充当“客户端”和“服务器”角色。

这里有一个简单的例子：http: [//www.inf.ed.ac.uk/teaching/courses/ds/programs/CORBA/Ciao.html](http://www.inf.ed.ac.uk/teaching/courses/ds/programs/CORBA/Ciao.html)

这实现了一个回调，客户端将一个对象传递给服务器，并在服务器向客户端进行回调时接收信息……有效地颠倒了交互中的角色。

# javascript - 嵌套在 if 语句中的函数

> ID：15906420
> 
> 赞同：3
> 
> 时间：2013-04-09T15:42:42.777
> 
> 标签：javascript, function, if-statement, location, match

如果有人可以帮助我，我对以下代码有疑问，我将不胜感激。基本上，我在调用 url 的页面上的几个页面上有几个链接。目前，`/freeten/`即使在窗口中打开了外部页面，它也只在代码部分中调用函数。

```
if(location.href.match('/extraten/')) {

    console.log(window.location.href);

    function downloadXM() {
        if(location.href.match('/en/')) {
            window.location.href = "http://core77.com/";
        }

        if(location.href.match('/fr/')) {
            window.location.href = "http://www.notcot.org/";
        }

        if(location.href.match('/de/')) {
            window.location.href = "http://www.spd.org/";
        }

        if(location.href.match('/it/')) {
            window.location.href = "http://sxsw.com/";
        }

    }
}

if(location.href.match('/freeten/')) {

    function downloadXM() {

        if(location.href.match('/en/')) {
            window.location.href = "http://www.wired.com/";
        }

        if(location.href.match('/fr/')) {
            window.location.href = "http://www.bbc.co.uk/";
        }

        if(location.href.match('/de/')) {
            window.location.href = "http://edition.cnn.com/";
        }

        if(location.href.match('/it/')) {
            window.location.href = "http://www.sky.com/";
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:49:37.783

不要以这种方式声明函数，而是尝试这样做：

```
var myFunc;

if (something) {
    myFunc = function () { ... }
} else if (something) {
    myFunc = function () { ... }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:53:31.153

最简单的改变就是这个。不优雅但可扩展的新手

```
function downloadXM()  {
  window.console && console.log(window.location.href); // helping IE 

  if (location.href.match('/extraten/')){     

    if (location.href.match('/en/')){    
      window.location.href= "http://core77.com/";
    }

    if (location.href.match('/fr/')) {  
      window.location.href= "http://www.notcot.org/";
    }

    if (location.href.match('/de/')) { 
      window.location.href= "http://www.spd.org/";
    }

    if (location.href.match('/it/')) { 
       window.location.href= "http://sxsw.com/";
    }    
  }

 else if (location.href.match('/freeten/')){     

    if (location.href.match('/en/')){    
        window.location.href= "http://www.wired.com/";
    }

    if (location.href.match('/fr/')) {  
        window.location.href= "http://www.bbc.co.uk/";
    }

    if (location.href.match('/de/')) { 
        window.location.href= "http://edition.cnn.com/";
    }

    if (location.href.match('/it/')) { 
        window.location.href= "http://www.sky.com/";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:46:56.693

Javascript 将函数声明提升到函数顶部，因此您的第一个声明`downloadXM()`被第二个覆盖`downloadXM()`。Javascript 没有任何块作用域，就像您尝试使用 if 语句所做的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:58:11.583

另一个项目，您正在使用`.match(<RegExp>)`，它实际上为您正在使用的 RegExp 模式返回字符串中所有匹配项的数组。在这种情况下，您可能想要使用的是`<RegExp>.test()`，它返回`true`或返回`false`RegExp 模式是否在字符串值中匹配。

使用您的代码中的一个示例：

```
if (location.href.match('/extraten/')) { 
```

. . . 会成为：

```
if (/extraten/.test(location.href.match)) { 
```

**编辑**- 我并不是说这是导致您的问题的原因，但是当我使用`match()`. 将其切换为使用`test()`解决了这些问题。

# java - 如何在不先输入名称的情况下继续循环直到用户点击“输入”

> ID：15906422
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:42:44.673
> 
> 标签：java

```
import java.util.Scanner;
class lab5c
{
public static void main (String args[])
{
String name;
Scanner input=new Scanner(System.in);
System.out.print("Enter a name: ");
name=input.nextLine();

if (name.startsWith( "Liyana" ) || name.startsWith( "Batrisyia" ) || name.startsWith( "Arfa" )  )
System.out.println( "Ms. "+name );
else
System.out.println( "Mr. "+name );

}
} 
```

如何继续循环程序，直到用户在没有先输入名称的情况下点击“输入”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:47:35.947

```
while(name.isEmpty()){
    System.out.print("Enter a name: ");
name=input.nextLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:49:59.110

你也可以试试

```
while ((name = input.nextLine()).length() > 0)  
{  
   . . .   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:45:37.187

您可以检查字符串是否为空，如下所示：

```
public static void main (String args[]){
    String name = "default";
    Scanner input = new Scanner(System.in);
    System.out.print("Enter a name: ");
    while(!name.isEmpty()){
        name=input.nextLine();

        if (name.startsWith( "Liyana" ) || name.startsWith( "Batrisyia" ) || name.startsWith( "Arfa" )  ){
            System.out.println( "Ms. "+name );
        }else{
            System.out.println( "Mr. "+name );
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:46:41.630

您可以检查 name.length() <= 0 是否可以退出。

# c# - 如何从通用对象列表继承

> ID：15906424
> 
> 赞同：0
> 
> 时间：2013-04-09T15:42:45.413
> 
> 标签：c#, generics, inheritance

我收到错误**Using the generic type `GetOption<EnumT>`requires 1 type argument**。错误来自我继承的第一行`List<GetOption>`

我正在尝试建立一个继承结构，我可以在其中对基础对象进行所有处理，并将细节保存在子对象中。子对象的数量为 N。基础对象需要在实例化时被告知子类型。

最父类将从 List 继承，因此我可以在最父对象中具有列表的功能，以添加将在实例化时通知其类型的通用子级。

这是我到目前为止所拥有的：

**前两个类是基类**

```
public abstract class GetOptions : List<GetOption>
{
    public enum FilterDirections
    {
        Ascending,
        Descending
    }

    private FilterDirections _filterDirection;

    public FilterDirections FilterDirection
    {
        get { return _filterDirection; }
        set { _filterDirection = value; }
    }

    public GetOptions()
    {
        FilterDirection = FilterDirections.Ascending;
    }
}

public abstract class GetOption<EnumT>
{
    private EnumT _column;

    public EnumT Column
    {
        get { return _column; }
        set { _column = value; }
    }

    public GetOption()
    {

    }
} 
```

**最后两个类是示例子类**

```
public class PersonTypeLookupGetOptions : GetOptions
{
    public PersonTypeLookupGetOptions() : base() { }
}

public class PersonTypeLookupGetOption : GetOption<PersonTypeLookup.PersonTypeLookupFields>
{

} 
```

我将如何完成我想做的事情？

**编辑：**

我要做的是在我从子对象中继承的列表中定义对象的类型。

通过我第一个问题下的评论，我能够找到我需要的解决方案。类定义如下：

```
public abstract class GetOptions<ChildT, EnumT> : List<ChildT> where ChildT : GetOption<EnumT>

public abstract class GetOption<EnumT>

public class PersonTypeLookupGetOptions : GetOptions<PersonTypeLookupGetOption, PersonTypeLookup.PersonTypeLookupFields>

public class PersonTypeLookupGetOption : GetOption<PersonTypeLookup.PersonTypeLookupFields> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:47:27.117

目前尚不清楚您要做什么，但可能对您有所帮助的一件事是将泛型参数传播到集合类型：

```
public abstract class GetOptions<EnumT> : List<GetOption<EnumT>> 
```

> 最父类将从 List 继承，因此我可以在最父对象中具有列表的功能，以添加将在运行时通知其类型的通用子级

请注意，泛型是在*编译时*绑定的，而不是在运行时绑定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:48:07.747

虽然我不知道您的更大问题的解决方案，但我相当确定您的错误是由于您`List<GetOption>`在编译器期望时使用了`List<GetOption<EnumT>>`. 话虽这么说，我真的不明白你要在这里做什么......

编辑：似乎你只是想`GetOption`成为一个没有`<EnumT>`部分的类，然后你想从`List<GetOption>`. 因此，将基类更改为`GetOption`而不是`GetOption<EnumT>`可能会解决您的问题。

# sql - 为什么我的插入语句出现错误？

> ID：15906426
> 
> 赞同：1
> 
> 时间：2013-04-09T15:42:50.803
> 
> 标签：sql, sql-server, sql-server-2008, sql-insert

我在插入语句中不断收到关于逗号的错误。关于为什么会这样的任何想法。

这是错误消息：

> 消息 102，级别 15，状态 1，第 3 行
> ',' 附近的语法不正确。

和`INSERT INTO...SELECT`声明

```
insert into custflag (cust_no, flag)
  select 
      customer.cust_no 
  from 
      customer, dupaddr 
  where 
      customer.cust_no = dupaddr.cust_no, select cast(flag as int) 
                                           from flag 
                                           where flag_desc = 'Dup Customer' 
```

这是我查询的完整代码。

```
SET IDENTITY_INSERT flag ON
insert into flag (flag,flag_desc,available)
values ((select Max(flag) from flag) + 1, 'Dup Customer', 1)

create view dupaddr as 
select distinct c1.cust_no, c1.firstname, c1.lastname, c1.company, c1.predir + ' ' + c1.streetno + ' ' + c1.streetnm + ' ' + c1.suffix + ' ' + c1.postdir as fff ,c1.address2
from customer c1,customer c2 
where c1.cust_no <> c2.cust_no
and c1.firstname = c2.firstname 
and c1.lastname = c2.lastname 
and c1.company = c2.company
and c1.predir + ' ' + c1.streetno + ' ' + c1.streetnm + ' ' + c1.suffix + ' ' +   c1.postdir = c2.predir + ' ' + c2.streetno + ' ' + c2.streetnm + ' ' + c2.suffix + ' ' + c2.postdir 
and c1.address2 = c2.address2

insert into custflag (cust_no,flag)
select customer.cust_no from customer, dupaddr where customer.cust_no = dupaddr.cust_no , select cast(flag as int) from flag where flag_desc = 'Dup Customer' 
```

想通了，我将标志添加到视图中，并且能够简化插入语句。谢谢你们每一个人的帮助！

```
SET IDENTITY_INSERT flag ON
insert into flag (flag,flag_desc,available)
values ((select Max(flag) from flag) + 1, 'Dup Customer', 1)

create view dupaddr as 
select distinct c1.cust_no, 
c1.firstname, 
c1.lastname, 
c1.company, 
c1.predir + ' ' + c1.streetno + ' ' + c1.streetnm + ' ' + c1.suffix + ' ' +   c1.postdir as fff ,
c1.address2, 
(SELECT cast(flag as int) FROM flag  WHERE flag_desc = 'Dup Customer') as flag
from customer c1,customer c2 
where c1.cust_no <> c2.cust_no
and c1.firstname = c2.firstname 
and c1.lastname = c2.lastname 
and c1.company = c2.company
and c1.predir + ' ' + c1.streetno + ' ' + c1.streetnm + ' ' + c1.suffix + ' ' +  c1.postdir = c2.predir + ' ' + c2.streetno + ' ' + c2.streetnm + ' ' + c2.suffix + ' ' + c2.postdir 
and c1.address2 = c2.address2

insert into custflag (cust_no,flag)
select dupaddr.cust_no, dupaddr.flag from dupaddr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:02:54.440

你可以试试这个

```
insert into custflag (cust_no, flag)
  select 
      customer.cust_no, (select cast(flag as int) 
                                           from flag 
                                           where flag_desc = 'Dup Customer') 
  from 
      customer, dupaddr 
  where 
      customer.cust_no = dupaddr.cust_no 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:59:22.050

正如我所评论的 - 不知何故，你的代码有点令人困惑......不清楚这三个表`customer`是如何相关的`dupaddr`-`flag`它们应该正确连接，以便您可以从单个语句中获取`cust_no`and 。`Flag``SELECT`

我根本看不出`Flag`与其他表格有什么关系——坦率地说，我不明白为什么你甚至需要`dupaddr`这里的表格......

所以尝试这样的事情：

```
insert into custflag (cust_no, flag)
  select 
      customer.cust_no,
      (select cast(flag as int) from flag where flag_desc = 'Dup Customer')
  from 
      customer
  inner join
      dupaddr on customer.cust_no = dupaddr.cust_no  -- why do you need this??? 
```

或者因为这`flag`似乎与任何被选择的行都没有关系，你也可以在你的声明之前抓住**这个**：

```
declare @flag INT
select @flag = cast(flag as int) from flag where flag_desc = 'Dup Customer'

insert into custflag (cust_no, flag)
  select 
      customer.cust_no, @flag
  from 
      customer
  inner join
      dupaddr on customer.cust_no = dupaddr.cust_no  -- why do you need this??? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:46:52.037

为了让您查询工作，这是等效的代码，

```
INSERT  INTO custFlag(cust_no, flag)
SELECT  a.cust_no, c.flag
FROM    customer a
        INNER JOIN dupaddr b
            ON a.cust_no = b.cust_no
        INNER JOIN
        (
            SELECT  cust_no, cast(flag as int) flag
            FROM    flag 
            WHERE   flag_desc = 'Dup Customer'
        ) c ON a.cust_no = c.cust_no 
```

~~*但我怀疑`CROSS JOIN`不是你想要的，你能告诉我 table`flag`与`customer`and有什么关系`dupaddr`吗？*~~

# android - 使用 AsyncTask 将数据插入数据库

> ID：15906437
> 
> 赞同：2
> 
> 时间：2013-04-09T15:43:24.337
> 
> 标签：android, android-asynctask, sqliteopenhelper

安卓 2.3.3

我是使用 AsyncTask 的新手，所以，我的实现可能正确也可能不正确。我必须使用 AsyncTask 将数据插入数据库。

问题是没有错误/异常，但没有创建数据库。我不知道问题是否与数据库或异步任务有关。所以我提供下面的代码。请看一看。

数据库文件 :::

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class Database_SpeedDial extends SQLiteOpenHelper{

    static String name = "speeddial_contacts";
    static int version = 1;

    SQLiteDatabase db;

    public Database_SpeedDial(Context context) {
        super(context, name, null, version);
        // TODO Auto-generated constructor stub

        db = getWritableDatabase();     
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE IF NOT EXISTS contacts(count INTEGER, image_url TEXT, name TEXT, number TEXT, bool INTEGER)");     
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

    public void insert_row(int count, String image_url, String name, String number, int bool) {
        // TODO Auto-generated method stub

        db.execSQL("INSERT INTO contacts VALUES('"+ count +"', '"+ image_url +"', '"+ name +"', '"+ number +"', '"+ bool +"')");
    }

} 
```

这是我的java代码:::

```
public class Class_Add_Contact extends Activity implements OnClickListener {

Database_SpeedDial dbObj;

@Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {
        case R.id.btn_addcontact_add:

            System.out.println("Inside onClick");

            // Using AsyncTask
            // alImage, alContactName ,.... are ArrayList<String>
            InsertData id = new InsertData(alImage, alContactName, alPhoneNumber, alBoolean); 
            id.execute();
            System.out.println("Finished Inserting");

            break;

        case R.id.btn_addcontact_cancel:

            System.out.println("Cancel button clicked");

            break;

        default:
            break;
        }

    }

private class InsertData extends AsyncTask<Void, Void, Void>{

        ArrayList<String> alImage_insertdata;
        ArrayList<String> alContactName_insertdata;
        ArrayList<String> alPhoneNumber_insertdata;
        ArrayList<Boolean> alBoolean_insertdata;

        public InsertData(ArrayList<String> alImage, ArrayList<String> alContactName, 
                ArrayList<String> alPhoneNumber, ArrayList<Boolean> alBoolean)
        {
            alImage_insertdata = alImage;
            alContactName_insertdata = alContactName;
            alPhoneNumber_insertdata = alPhoneNumber;
            alBoolean_insertdata = alBoolean;
        }

        @Override
        protected void onPreExecute() { 

            System.out.println("Inside onPreExecute");
        }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub

            System.out.println("Inside doInBackground");

                    //dbObj = new Database_SpeedDial(this) -> I used this in onCreate()
                    // of the main class but didn't work, so shifted it here...
                    // This doesn't matter i guess...

            dbObj = new Database_SpeedDial(Class_Add_Contact.this);

            for(int i=0; i< alBoolean_insertdata.size();i++)
            {
                if(alBoolean.get(i))
                {
                    dbObj.insert_row(i+1, alImage_insertdata.get(i).toString(), 
                            alContactName_insertdata.get(i).toString(), 
                            alPhoneNumber_insertdata.get(i).toString(), 
                            1);
                }
                else
                {
                    dbObj.insert_row(i+1, alImage_insertdata.get(i).toString(), 
                            alContactName_insertdata.get(i).toString(), 
                            alPhoneNumber_insertdata.get(i).toString(),
                            0);
                }
            }

            return null;
        }   

        @Override
        protected void onPostExecute(Void res) {

            System.out.println("Inside onPostExecute");

        }

    }

} 
```

图片来自 DDMS :::

![在此处输入图像描述](https://i.stack.imgur.com/qNKD9.png)

代码执行没有任何问题，但没有创建数据库。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:04:50.943

您不能将列命名为“计数”。那是一个保留关键字。

## 编辑

好的，显然不是。但它应该是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:52:16.503

您拥有 CREATE TABLE 语句的 onCreate() 方法**将**在您的数据库上的第一个事务后触发。因此，首先运行插入语句，然后检查您的数据库是否已创建。

# django - django form save方法从1.4升级到1.5

> ID：15906441
> 
> 赞同：1
> 
> 时间：2013-04-09T15:43:28.417
> 
> 标签：django, django-1.5

我的表单中有一个有效的保存方法，一旦我升级它就表现得很奇怪，我似乎无法调试问题的根源

我有一个从 ModelForm 继承的简单表单，在其中我覆盖了 save 方法以保存一些外部属性

下面是我的代码

```
class UserProfileForm(ExtendedMetaModelForm):
    """
    UserProfileForm

    """
    _genders = (
        ('M', _('Male')),
        ('F', _('Female')),
        )

    birthday            = forms.DateField(
        widget=extras.SelectDateWidget(attrs={'class' : 'span1'},years=(range(1930, datetime.now().year-14))),
        label   =   _('Birthday'),
        required=   False,
        error_messages  = {
            'required' : _('Birthday is required.')
        }

    )
    gender            = forms.CharField(
        label   =   _('Gender'),
        widget  =   forms.Select(choices=_genders)
    )
    bio             = forms.CharField(required=False, widget=forms.Textarea(attrs={'rows' : '4'}))

    class Meta:
        model = User
        fields = ('first_name', 'last_name', 'bio', 'birthday', 'gender', 'email',)

    def __init__(self, *args, **kwargs):
        super(UserProfileForm, self).__init__(*args, **kwargs)

        if self.instance:
            self.fields['email'].widget.attrs['readonly'] = True
            self.fields['birthday'].initial = self.instance.get_profile().birthday
            self.fields['bio'].initial = self.instance.get_profile().bio

        for i in self.fields:
            if isinstance(self.fields[i], forms.CharField):
                self.fields[i].widget.attrs["class"]       = 'input-xlarge'

    def save(self, *args, **kw):
        super(UserProfileForm, self).save(*args, **kw)
        self.instance.get_profile().bio           = self.cleaned_data.get('bio')
        self.instance.get_profile().birthday      = self.cleaned_data.get('birthday')
        self.instance.get_profile().save() 
```

以上工作正常，现在。在初始化表单时，它会从配置文件中检索 bio、birthday 的初始值。

但是，在保存时它会继续前进而没有任何动作。我的个人资料模型非常基本，保存方法没有改变它使用models.Model的原始操作

任何人都可以就为什么会发生这种情况提出建议吗？

PS没有返回错误，它只是没有保存任何东西

**更新（添加了 ExtendedMetaModelForm 类）：**

```
class ExtendedMetaModelForm(forms.ModelForm):
    """
    Allow the setting of any field attributes via the Meta class.
    """
    def __init__(self, *args, **kwargs):
        """
        Iterate over fields, set attributes from Meta.field_args.
        """
        super(ExtendedMetaModelForm, self).__init__(*args, **kwargs)
        if hasattr(self.Meta, "field_args"):
            # Look at the field_args Meta class attribute to get
            # any (additional) attributes we should set for a field.
            field_args = self.Meta.field_args
            # Iterate over all fields...
            for fname, field in self.fields.items():
                # Check if we have something for that field in field_args
                fargs = field_args.get(fname)
                if fargs:
                    # Iterate over all attributes for a field that we
                    # have specified in field_args
                    for attr_name, attr_val in fargs.items():
                        if attr_name.startswith("+"):
                            merge_attempt = True
                            attr_name = attr_name[1:]
                        else:
                            merge_attempt = False
                        orig_attr_val = getattr(field, attr_name, None)
                        if orig_attr_val and merge_attempt and\
                           type(orig_attr_val) == dict and\
                           type(attr_val) == dict:
                            # Merge dictionaries together
                            orig_attr_val.update(attr_val)
                        else:
                            # Replace existing attribute
                            setattr(field, attr_name, attr_val) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:08:18.177

在 1.5中，由于引入了[自定义用户模型](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#auth-custom-user)`AUTH_PROFILE_MODULE`而`get_profile`被[弃用](https://docs.djangoproject.com/en/1.5/releases/1.5/#auth-profile-module)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:19:02.063

正如@Ngenator 指出的那样，您正在使用已弃用的函数。您可以尝试[创建自定义](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#auth-custom-user) `User`模型

在`settings.py`

```
AUTH_USER_MODEL = 'myapp.MyUser' 
```

`myapp.MyUser`使用您指定的属性创建一个新用户

```
class MyUser(AbstractBaseUser):

    bio = TextField()
    birthday = DateField() 
```

你需要摆脱`get_profile()`你的形式。

```
def save(self, *args, **kw):

    self.instance.bio           = self.cleaned_data.get('bio')
    self.instance.birthday      = self.cleaned_data.get('birthday')

    super(UserProfileForm, self).save(*args, **kw) 
```

注意 - 这可能会破坏您的许多数据库结构并需要进行重大升级！你真的需要 django 1.5 吗？

# rotation - 来自vector3的角度y和z

> ID：15906442
> 
> 赞同：0
> 
> 时间：2013-04-09T15:43:29.057
> 
> 标签：rotation, three.js

如何仅获取rotation.y & rotation.z (rotation.x = 0) 以对vector3 进行对象查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:58:18.513

我这样解决了：（基于这篇文章：[3D Vector (X, Y, Z) 看看 Vector](https://stackoverflow.com/questions/8208789/3d-vector-x-y-z-look-at-vector/8208951#8208951)）

```
var  vec3 =  new THREE.Vector3(100, 0, 50);

var  xzdistance = Math.sqrt(vec3.x * vec3.x + vec3.z * vec3.z);

var  rotationY =  Math.atan2(vec3.x, vec3.z)  + Math.PI /2;
var  rotationZ = -Math.atan2(vec3.y, xzdistance); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:04:02.667

Object3D（Mesh）扩展有一个`lookAt()`功能，Matrix4也是如此。

看看[样本](http://threejs.org/examples/misc_lookat.html)

![看样片](https://i.stack.imgur.com/0wio7.png)

# python - 将“字典列表”中的唯一键作为标题写入 csv，并使用 Python 在每个标题下写入相关值

> ID：15906443
> 
> 赞同：2
> 
> 时间：2013-04-09T15:43:29.823
> 
> 标签：python

我有一个字典列表；

```
information = [{'Edu':'School','Age':'40','Height':'5.11','DOB':'08091972','Name':'Jack'},
 {'Edu':'College','Age':'30','Height':'4.11','DOB':'05041982','Name':'Alex','Pro':'Teacher'},
 {'Name':'Elizabeth','Nickname':'Lizzy','DOB':'01012005'}] 
```

我想把它写到一个csv中。

![在此处输入图像描述](https://i.stack.imgur.com/oWxz4.png)

到目前为止，我已经能够像这样将唯一的标头写入 csv...

```
unique_headers = []

for info in information:
    unique_headers.append(s.keys()) # append keys to a list - but this would take ages right? certainly not pythonic

ordered_fieldnames = set(flatten(unique_headers))

with open('profile.csv','wb') as fou:
    dw = csv.DictWriter(fou, delimiter=',', fieldnames=ordered_fieldnames)
    dw.writeheader() # unique headers are written 
```

现在，如何将记录写入相关标题下的 csv 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:02:41.417

你快到了：

```
...
dw.writeheader()
dw.writerows(information) 
```

# file - 将 .CSV 文件转换为 weka 的 ARFF 文件

> ID：15906444
> 
> 赞同：0
> 
> 时间：2013-04-09T15:43:33.807
> 
> 标签：file, csv

我有 64MB 的 csv 文件格式，包含 423,463 个实例和 42 个属性。我想用 WEKA 对其进行建模我试图在 weka 本身的帮助下转换为 arff 但它无法转换。我试图在这个网站[http://slavnik.fe.uni-lj.si/markot/csv2arff/csv2arff.php?do=instructions](http://slavnik.fe.uni-lj.si/markot/csv2arff/csv2arff.php?do=instructions)的帮助下在线转换， 但它不能。再一次，我尝试通过 phpMyAdmin 导入将 CSV 文件导入 MySQL 但它说

有人可以建议我如何将我的 csv 文件转换为 arff 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:55:57.243

将 CSV 文件导入 WEKA 并将数据另存为 ARFF 文件应该可以工作。如果 64MB 文件太大，导致出现问题，您可以尝试将文件拆分为较小的文件或选择数据子集进行初始分析。

# ant - Apache Ant - 隐藏/安全执行任务参数

> ID：15906447
> 
> 赞同：0
> 
> 时间：2013-04-09T15:43:40.037
> 
> 标签：ant

我想使用详细选项执行 Ant，但我不希望传递给[Exec任务的](http://ant.apache.org/manual/Tasks/exec.html)[参数](http://ant.apache.org/manual/using.html#arg)在敏感的情况下显示（即用户/密码）。

一个示例是与数据库的连接：

```
<exec executable="/bin/sh" failonerror="true">
    <arg line="/opt/blah/blah/bin/frmcmp_batch.sh Module=blah Userid=username/mypassword@blah Module_Type=blah"/>
</exec> 
```

我不希望参数（特别是“Userid=username/mypassword@blah”出现在日志中）。

隐藏/保护论点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:29:00.847

保护密码的最佳方法是不使用一个 :-) 以下答案描述了如何设置 SSH 密钥：

*   [Ant，从远程机器下载文件集](https://stackoverflow.com/questions/12191713/ant-download-fileset-from-remote-machine/12206460#12206460)

ANT [sshexec](http://ant.apache.org/manual/Tasks/sshexec.html)命令支持“keyfile”属性。

# 更新

啊，脚本 sudo 可能是一种皇家痛苦。

以下是过去对我有用的解决方案。

1.  将用户配置为不需要密码。请参阅“sudoers”文件。在我们的设置中，我们将此特殊访问权限授予管理员用户组中的用户。（请参阅[Ant build.xml 需要用户输入，但 Eclipse 没有 tty](https://stackoverflow.com/questions/2518508/ant-build-xml-requires-user-input-but-eclipse-has-no-tty/2518535#2518535)）
2.  使用 SSH :-) 登录到本地机器是自动化进程的一种非常有效的方式。使我们能够使用 SSH 密钥来控制访问并可以限制用户运行的命令（通过 authorized_keys 文件的鲜为人知的功能）
3.  使用像[rundeck](http://rundeck.org/)这样的自动化工具。它对内置的 sudo 提供了有用的支持。密码可以配置为在运行时 (GUI) 指定但不保存在任何地方的选项。有一个命令行和 REST API 可用于调用作业。这个解决方案可能是最没用的，但我提到它是因为它是一个非常有用的自动化操作任务的工具。

您似乎担心出现在日志文件中的密码？我的固定是永远不要写下我的密码或在脚本中硬编码它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:43:40.037

目前我正在使用以下解决方法（在[此处](https://stackoverflow.com/questions/5462732/make-ant-quiet-without-the-q-flag)描述）来隐藏“mypassword”，但我想知道是否有更优雅的解决方案？

构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project default="test">

    <target name="test" depends="">
        <echo message="Testing..."/>

        <echo message="Turning verbose off... you should NOT see the arguments..."/>

        <script language="javascript">
            var logger = project.getBuildListeners().firstElement();
            // 2 works to turn off verbose
            logger.setMessageOutputLevel(2);
        </script>

        <exec dir="." executable="cmd">
            <arg line="/c dummy.bat mypassword"/>
        </exec>

        <echo message="Turning verbose on... you should see the arguments..."/>

        <script language="javascript">
            var logger = project.getBuildListeners().firstElement();
            // 3 works to turn verbose back on
            logger.setMessageOutputLevel(3);
        </script>

        <exec dir="." executable="cmd">
            <arg line="/c dummy.bat mypassword"/>
        </exec>

    </target>
</project> 
```

假人.bat

```
@echo off
echo dummy 
```

输出

```
test:
     [echo] Testing...
     [echo] Turning verbose off... you should NOT see the arguments...
     [exec] dummy
     [echo] Turning verbose on... you should see the arguments...
     [exec] Current OS is Windows XP
     [exec] Executing 'cmd' with arguments:
     [exec] '/c'
     [exec] 'dummy.bat'
     [exec] 'mypassword'
     [exec]
     [exec] The ' characters around the executable and arguments are
     [exec] not part of the command.
     [exec] dummy 
```

# jquery - Ajax GET HTML 为图像返回未定义的“src”

> ID：15906449
> 
> 赞同：0
> 
> 时间：2013-04-09T15:43:54.023
> 
> 标签：jquery, ajax, html-table, src, targeting

我以前使用过这个并且定位 div 没有问题，但这次我的目标是隐藏在一个已经在 Intranet 站点上很长时间的表中的图像。我终于找到了它的代码，并在名为`$('.targetTable')`. 现在我正在尝试从表格中提取某些元素以显示在我的新页面上的 div 中。下面是从表格中提取 HTML 的代码：

```
$(document).ready(function(){

$mission = $('#targetDiv');

$.ajax({
  url: "http://example.com/values/values.cfm?val=commitment",
  cache: false
}).done(function( html ) {
    $div = $('table.targetTable', html);

    $img = $div.children('tr:eq(3)').children('td').find('img').attr('src');

    $mission.append('<img src="'+$img+'" />');

});

}); 
```

这是由 AJAX 调用提取的表：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>commitment</title>
</head>
<body>

<table border="0" style="border: 1px solid gray;" cellspacing="0" class="targetTable">
    <tr style="background-color: #FFDDBB;">
        <td align="center" style="padding: 8px;">

            <img src="../mp_images/values/commitment_med.jpg" width="600" height="439">
        </td>
    </tr>

    <tr style="background-color: #FFDDBB;"> 
        <td valign="top" style="padding: 8px;">     
                <div style="text-align:center; letter-spacing: 4px; font-size: 140%; font-weight: bold; margin-bottom: 30px;">COMMITMENT</div>

                <div style="font-family:Georgia, 'Times New Roman', Times, serif; font-size: 100%">
                We recognize Commitment as a fundamental cornerstone underpinning our everyday activities.  Our commitment is a steadfast devotion to our people, our licensees, and to the public to responsibly carry out the mission of the agency, unwavering from the highest standards of safety, excellence, and professionalism.
                </div>
        </td>

    </tr>

    <tr style="background-color: #FFDDBB;">
        <td style="border-bottom: 1px solid gray;">&nbsp;

        </td>
    </tr>

    <tr bgcolor="white">
        <td align="center" colspan="3" style="padding: 8px;">
            <a href="../values/values.cfm?val=Commitment" ><img src="../mp_images/values/commitment_small.jpg" border="0" /></a>
            <a href="../values/values.cfm?val=Cooperation"><img src="../mp_images/values/cooperation_small.jpg"  border="0" /></a>
            <a href="../values/values.cfm?val=Excellence"><img src="../mp_images/values/excellence_small.jpg"  border="0" /></a>
            <a href="../values/values.cfm?val=Integrity"><img src="../mp_images/values/integrity_small.jpg" border="0" /></a>
            <a href="../values/values.cfm?val=Openness"><img src="../mp_images/values/openness_small.jpg" border="0" /></a>
            <a href="../values/values.cfm?val=Respect"><img src="../mp_images/values/respect_small.jpg" border="0" /></a>
            <a href="../values/values.cfm?val=Service"><img src="../mp_images/values/service_small.jpg" border="0" /></a>
            <a href="../values/values.cfm?val=Mission"><img src="../mp_images/values/Mission_small.jpg" border="0" /></a>
            <a href="../values/values.cfm?val=Vision"><img src="../mp_images/values/Vision_small.jpg" border="0" /></a>
        </td>
</tr>

</table>
</body>
</html> 
```

现在，每次我以 img src 为目标时，它都会以未定义的形式返回。我的目标是错误的还是其他类似 doctype 或 CFM 兼容性的东西？同样出于某种原因，我无法弄清楚 Chrome 会引发错误。它告诉我，我的 AJAX 已将 HTML 中的所有相对路径转换为绝对路径，但绝对路径指向我的页面而不是旧页面和图像位置。如果有人能弄清楚这一点，我会给你指出我之前问过这个问题的页面，你会得到一个双重复选标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:47:10.050

表格是 body 的直接子元素，当 body 被删除（它将是）时，表格将成为顶级元素。改变

```
$div = $('table.targetTable', html); 
```

到

```
$div = $(html).filter('table.targetTable'); 
```

并为避免其他问题，请使用：

```
$div = $($.parseHTML(html)).filter('table.targetTable'); 
```

# javascript - 关于将动态数据输入到 html 页面的表单的建议

> ID：15906450
> 
> 赞同：1
> 
> 时间：2013-04-09T15:43:54.557
> 
> 标签：javascript, html, asp.net, forms

我有一个项目，我必须在监视器上输出一些安全信息。我让它工作得很好，但其中的日期是动态的，我需要一个表格来让任何人都可以轻松更改信息。这是其中一页的代码。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>First Aid Days</title>
    <style type="text/css">
        /*circle image */
        #imgFirstaid { position: absolute; top: 10px; left: 110px; z-index: 0; } 

        /* large xx of days in the center of the circle */
        #strFirstaid{ width: 579px; height: 579px; text-align: center; margin-top: 125px; position: absolute; top: 25px; left: 115px; z-index: 0; font-family: calibri; font-weight: bold; font-size: 250px; color: #403152;  } 

        /* small date at the bottom of the circle */
        #txtFirstaid{ width: 579px; height: 579px; text-align: center; margin-top: 365px; position: absolute; top: 25px; left: 115px; z-index: 0; font-family: calibri; font-size: 28px; color: #403152;  }
    </style>
    <script>

    function GetFirstaid(){

    var then = new Date(2013, 2, 27), // month is zero based, i.e. jan = 0 (yyyy, m, dd)
        now = new Date;               // no arguments -> current date
    // 24 hours, 60 minutes, 60 seconds, 1000 milliseconds
    out=Math.abs((now - then) / (1000 * 60 * 60 * 24)); // round the amount of days
    rou=Math.round(out)
    document.getElementById('strFirstaid').innerHTML=rou;
    }
    window.onload=function(){GetFirstaid();}//call when everything has loaded

    </script>
</head>

<body>
    <div id="imgFirstaid"><img src="../images/lg-f.png" /></div>
    <div id="strFirstaid"></div>
    <div id="txtFirstaid">_____________________ <br />03/27/2013</div> <!-- enter the date as normal -->
</body>
</html> 
```

就像我说的，现在的输出效果很好，但我想知道我是否可以用这个 html 绑定一个表单，或者我是否需要重新开始并使用一些 ASP 或 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:40:53.133

有两种方法可以做到这一点。一个（就像你提到的）是通过表格；另一种是使用“提示”javascript方法询问日期。

**这是方法一（带表单）::** 像这样在 body 标签之前输入表单 -

```
 <form action="">
      Enter date: <input type="text" name="then" value="" />
      <input type="submit" value="Submit" />
    </form> 
```

正如你所看到的，这个表单基本上会调用同一个页面本身并附加表单参数。因此，如果您输入一个日期，比如“4/27/2013”​​，然后按 ENTER，您最终会被重定向到同一页面，但这次它最后会显示 ?then=4%2F27%2F2013。

现在，您只需要在 GetFirstaid 方法中解析它即可。因此，不要在“then”变量中使用硬编码日期，而是这样做 -

```
 var thenStr = window.location.search.substr(6);
        var thenDtArr = thenStr.split("%2F");
        var then = new Date(thenDtArr[2], thenDtArr[0], thenDtArr[1]); 
```

您应该（显然）进行所有错误处理和数字格式检查；为了使讨论简单，我避免了这种情况。

**这是方法二（带提示方法）：：** 在这种方法中，您不需要表单。您只需点击页面，它所做的第一件事就是提示您输入日期。所以你所需要的就是在你的 GetFirstaid 方法中（在方法的开头） -

```
 thenStr = prompt("Please Enter a date:");
        var then = null;
        if (thenStr != null && thenStr != "") {
          var thenDtArr = thenStr.split("/");
          then = new Date(thenDtArr[2], thenDtArr[0], thenDtArr[1]);
        } 
```

我要做的另一件事是更新“txtFirstaid”字段以反映用户输入的日期。所以，就在你渲染 strFirstaid 的地方，再添加一行来更新 txtFirstaid，就像这样 -

```
 document.getElementById('strFirstaid').innerHTML=rou;
    document.getElementById('txtFirstaid').innerHTML = "_____________________ <br />"+thenDtArr[0]+"/"+thenDtArr[1]+"/"+thenDtArr[2]; 
```

希望这可以帮助。

# c# - 更新 mdb 数据库表

> ID：15906455
> 
> 赞同：1
> 
> 时间：2013-04-09T15:44:07.300
> 
> 标签：c#, .net, sql, ms-access

我正在使用 .NET Web 窗体和`.mdb`数据库作为数据源构建一个简单的站点。

问题是：我有一个工作后台槽，我可以创建、修改和删除一个新页面。

虽然我可以创建和删除，但编辑功能不起作用。

我意识到问题可能出在查询中，因为代码在其他功能上运行良好。

这是查询：

```
UPDATE pages 
SET title=\"" + pa.title + "\" content =\"" + pa.content + "\" 
WHERE id=" + pa.id 
```

我不是很喜欢 SQL，是我做错了什么吗？

先感谢您

编辑 N°2。目前，查询无法正常工作，基本上，某些内容和标题中有撇号，当我更新该特定页面时，它不会更新。我尝试使用 Regex.Escape 但添加大量 \ 会造成混乱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:49:33.717

好吧，您的更新查询在字段之间缺少逗号，但这只是冰山一角

```
UPDATE pages SET title=" + pa.title + ", content =" + pa.content + " WHERE id=" + pa.id 
```

您以这种方式编写的查询会面临很大的安全问题。它被称为[Sql 注入](https://stackoverflow.com/questions/332365/how-does-this-sql-injection-work)

我将显示一个伪代码，因为我没有您的实际代码示例

```
string queryText = "UPDATE pages SET title=@title, content=@content WHERE id=@id"

using(SqlConnection cn = new SqlConnection(connection_string))
using(SqlCommand cmd = new SqlCommand(queryText, cn)
{
    cmd.Parameters.AddWithValue("@title", pa.title);
    cmd.Parameters.AddWithValue("@content", pa.content);
    cmd.Parameters.AddWithValue("@id", pa.id);
    cmd.ExecuteNonQuery();
} 
```

以这种方式工作，您可以避免 Sql 注入、解析值中的单引号以及由于未处理连接而导致系统资源泄漏的问题。

请参阅[使用语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=VS.80%29.aspx)
[的参数化查询](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:52:33.157

```
@"UPDATE pages 
  SET title= '" + pa.title + @"', 
      content = '" + pa.content + @"' 
  WHERE id= " + pa.id 
```

# maps - Windows phone 8 模拟器不显示地图

> ID：15906459
> 
> 赞同：0
> 
> 时间：2013-04-09T15:44:17.597
> 
> 标签：maps, windows-phone-8, windows-phone-8-emulator

我正在使用 Windows Phone 8 模拟器进行应用程序测试。
我有一个带有地图控件的屏幕，但该控件只显示蓝色背景（以及用于使地图控件居中的红点）。我已经检查了 ID_CAP_MAP 和 ID_CAP_LOCATION。另外，我已经阅读了[这个](http://michalstawarz.pl/2013/01/26/windows-phone-8-emulator-maps-display/)解决方案，但我仍然得到那个蓝屏。此外，我对[THIS POST](http://igrali.com/2012/07/30/windows-phone-location-tool-in-emulator-down-no-problem/)所说的注册表值进行了更改，但没有任何更改。

我在公司的代理服务器后面，我可以使用模拟器打开网页。此外，当我单击模拟器上的 V 形按钮 (>>) 并单击位置选项卡时，我可以清楚地看到地图，但是当我运行我的应用程序时，我在应该是地图的空间上唯一看到的是蓝色背景屏幕。

有谁知道可能导致问题的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:12:47.750

显然，Windows Phone 8 Emulator 存在代理问题。
一旦我“杀死”代理，地图就会显示在屏幕上，当我使用代理返回时，它就消失了。

# css - 为什么浮动输入元素会改变其高度？

> ID：15906461
> 
> 赞同：6
> 
> 时间：2013-04-09T15:44:21.823
> 
> 标签：css, css-float, height

基本上我希望跨度和输入元素占用相同数量的垂直空间，以便正确对齐两个框中的文本。当不浮动元素时，我可以很容易地实现这一点。但是一旦我添加了一个浮点属性，一些额外的像素就会添加到输入元素的高度。我终其一生都无法理解为什么会这样。

我该如何解决？

此问题存在于 iOS 6 上的 Safari 和桌面上的 Chrome。也发生在 Firefox 中，但效果有些不同。

我创建了这个显示我的问题的[小提琴。](http://jsfiddle.net/oligofren/cYaa2/3/)

```
<input class='float' value="some text" id='input2'/>
<span class='float' id='text2'>some text</span><br />

input, span {
    font-family: Helvetica;
    font-weight: bold;
    font-size: 15px;
    line-height: 15px;
    padding: 0px;
    border: 0px;
}

input {
    text-align: right;
}

.float {
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:56:55.323

两件事情。浮动输入似乎给它一个 2px 的边距，你可以很容易地删除它。如果你这样做并删除 line-height 属性，那么一切似乎都在这两个方面排列。

[http://jsfiddle.net/cYaa2/4/](http://jsfiddle.net/cYaa2/4/)

```
input, span {
    font-family: Helvetica;
    font-weight: bold;
    font-size: 15px;
    padding: 0px;
    border: 0px;
}

input {
    text-align: right;
}

.float {
    float: right;
}

input.float {
    margin:0px;
} 
```

# vb.net - 使用 InstallShield 部署文档级自定义或使用 ClickOnce 将文件部署到指定文件夹

> ID：15906464
> 
> 赞同：0
> 
> 时间：2013-04-09T15:44:23.630
> 
> 标签：vb.net, visual-studio-2012, vsto, clickonce, installshield

我正在开发用于 excel 和文档级别自定义的 VSTO 加载项。它们将在有多个用户（每个用户大约 10 个）的计算机上使用。有意地，我们确实希望服务器文件夹上的公共数据库和报告文件，而不是我们希望所有 10 个用户都能够访问本地数据库和报告（本地到计算机）。现在我通过两步安装来做到这一点。

首先，InstallShield 项目将所有 ClickOnce 文件、默认模板和数据库文件解压缩为`c:\LIMSersTestUnit`. “完成后运行应用程序”从 ClickOnce 文件运行 SetUp.exe。我没有遇到用户使用问题，可能是因为所有内容都是从主文档级别定制中启动的。IE 我用过这种方法，让多个用户登录并成功使用该程序。我的问题是，在部署它时，依靠用户来成功地做到这一点很麻烦。我的第一个尝试是将所有内容都包含在一个 zip 文件中，并告诉他们将其解压缩到正确的目录中，但那是一场灾难。

如果可能的话，我想把它组合成一个安装。[我知道VSTO 项目](http://msdn.microsoft.com/en-us/library/kzy0fky2%28v=vs.80%29.aspx)中可以包含一个文件文件夹，但这被放入用户特定的文件夹中。我无法弄清楚如何相对于 root 更改此输出路径。我仍在为此做很多谷歌搜索，但我什至不确定这是否可能。

另一方面，我无法让 InstallShield 正确安装文档级自定义。我一直试图在网上找到一个这样的例子，但到目前为止我失败了。我已尝试将 ClickOnce 出版物中的清单以及 VSTO 项目的主要输出包括在内，但我无处可去。我目前正在检查由 ClickOnce 安装创建的注册表和文件，以尝试克隆它。它在安全方面的作用比我意识到的要多得多。我尝试将 Excel 加载项的注册表路径更改为[HKEY_LOCAL_MACHINE](https://stackoverflow.com/questions/6647522/vsto-outlook-2007-deployment-for-all-userr)下，但到目前为止还没有帮助。

所以我提炼的问题是：我可以使用 ClickOnce 将文件部署到基于根路径的文件夹吗？如果有怎么办？是否有明显的方法或示例说明如何使用 InstallShield 部署 VSTO？我找到[了这个](http://msdn.microsoft.com/en-us/vsto/ff937654.aspx)，但我无法让它工作。不过，我仍在为此努力。如果有人知道更好的指南，请告诉我。

# c# - 在 GridView 中显示静态图像？

> ID：15906466
> 
> 赞同：0
> 
> 时间：2013-04-09T15:44:32.857
> 
> 标签：c#, asp.net

我想在 GridView 中显示静态图像。我有以下内容：

```
<asp:GridView runat="Server" AutoGenerateColumns="false">
<Columns>
  <asp:ImageField DataImageURLField="./images/myimage.png"/>
  <asp:HyperLinkField DataTextField="link" DataNavigateUrlFields="linkid" DataNaviateUrlFormatString="~/index.asp?q={0}" />
</Columns>
</asp:GridView> 
```

导致错误：

*在所选数据源上找不到名为“./images/myimage.png”的字段或属性。*

基本上我在每个超链接的左侧显示相同的图像。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:51:43.310

只需使用`TemplateField`内部`GridView`

```
<Columns>
<asp:TemplateField HeaderText="Image">
    <ItemTemplate>
            <asp:image ID="img" runat="server" ImageUrl="~/images/myimage.png" />
    </ItemTemplate>
</asp:TemplateField>
</Columns> 
```

# knockout.js - 使用 requirejs 和 typescript 未定义淘汰赛 ko

> ID：15906470
> 
> 赞同：2
> 
> 时间：2013-04-09T15:44:48.060
> 
> 标签：knockout.js, requirejs, typescript

我的打字稿文件生成以下输出，但我得到一个 ko 在我的 AppViewModel 中未定义。欢迎任何关于我如何解决这个问题的指示。带有打字稿的视觉工作室解决方案在这里：[https ://github.com/s093294/typescript-knockout](https://github.com/s093294/typescript-knockout)

### /Scripts/App/config.js

```
require.config({
    baseUrl: '/Scripts/App/',
    paths: {
        'jQuery': '/scripts/jquery-1.9.1',
        'knockout': '/scripts/knockout-2.2.1.debug',
        'AppViewModel': '/Scripts/ViewModels/AppViewModel'
    },
    urlArgs: "bust=" + (new Date()).getTime(),
    shim: {
        jQuery: {
            exports: '$'
        },
        'knockout': {
            deps: [
                "jQuery"
            ],
            exports: 'ko'
        },
        'AppViewModel': {
            deps: [
                'knockout'
            ]
        }
    }
});
require([
    'AppViewModel'
], function (avm) {
    var viewmodel = new avm.AppViewModel();
    ko.applyBindings(viewmodel);
    alert('hello world - SUCCESS');
}); 
```

### /脚本/视图模型

```
define(["require", "exports", "knockout"], function(require, exports) { // I would like ko to be in the function handle, but typescript cant do this. But it should be in the global scope also right?
    var AppViewModel = (function () {
        function AppViewModel() {
            this.title = ko.observable();
            this.title('My Sample');
        }
        AppViewModel.prototype.setTitle = function (title) {
            this.title(title);
        };
        return AppViewModel;
    })();
    exports.AppViewModel = AppViewModel;    
}) 
```

### 索引.html

```
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />    
    <title>Home</title>
</head>
<body>
    Did you get a hello world?
    <div data-bind="text: title"></div>

    <script data-main="/Scripts/App/config" type="text/javascript" src="~/scripts/require.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:08:44.383

我通过以下方式破解了它，但如果人们能找到更好的方法，我希望得到任何评论。

```
require(['knockout','AppViewModel'], (koo,avm) => {
    (<any>window).ko = koo;
    var viewmodel = new avm.AppViewModel();
    ko.applyBindings(viewmodel);
    alert('hello world - SUCCESS');

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:09:53.600

尝试先加载淘汰赛，看起来您的视图模型是一个已编译的 TypeScript 模块。手动加载淘汰赛而不是依赖项可能会给您更多的控制权。

```
require([
    'knockout',
    'AppViewModel'
], function (ko, avm) {
    var viewmodel = new avm.AppViewModel();
    ko.applyBindings(viewmodel);
    alert('hello world - SUCCESS');
}); 
```

还要确保将淘汰赛作为 AppViewModel 的一个部门删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:54:13.063

抱歉，对于我的原始答案，但您是否尝试过将 config.js 文件中的 /Scripts/ 引用大写？

# ruby - 如果父 ruby 脚本被杀死，则由 IO.popen 自动启动终止进程

> ID：15906473
> 
> 赞同：3
> 
> 时间：2013-04-09T15:44:52.403
> 
> 标签：ruby, io, pipe, popen

我正在尝试从 Windows 中的 ruby​​ 脚本运行 ffmpeg。

```
def execute_ffmpeg(command)
  IO.popen(command){|io|
    io.each{|line|
      # Show Progress
    }
  }
end
command_ffmpeg = "ffmpeg -y -i input.avi -vb 1000k -ab 96k output.mp4 2>&1"
execute_ffmpeg(command_ffmpeg) 
```

如果我等到编码完成，它工作正常。但是如果我终止 ruby​​ 脚本，ffmpeg 的进程仍然是后台。

当父 ruby​​ 进程终止时，如何终止 ffmpeg 进程？

我在 Windows 7 中使用 ruby​​ 1.9.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:10:31.720

让子进程与父进程共享管道。在子进程中有一个线程调用 IO.select 。如果管道关闭，您就知道父进程已死。有关实施，请参阅[https://github.com/vaneyckt/Adeona/blob/master/lib/adeona.rb](https://github.com/vaneyckt/Adeona/blob/master/lib/adeona.rb)。

编辑：刚刚注意到您使用的是 Windows 7。不确定我的方法是否适用于 Windows。

# mysql - 寻找一种优雅的方式将精心挑选的对象从一个数据库复制到另一个数据库

> ID：15906475
> 
> 赞同：1
> 
> 时间：2013-04-09T15:44:54.953
> 
> 标签：mysql, ruby-on-rails, database-connection

我正在对被破坏的特定对象进行数据库恢复。大约有一百个。有没有一种优雅的方式来执行此操作？

理想情况下，我喜欢执行诸如 : 之类的命令`Object.where(attribute: 'condition')`，然后复制控制台输出，并能够将控制台输出到另一个数据库并从该输出中创建我的所有对象。

有什么推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:00:30.710

如果您只是处理普通数据，您可以尝试以下三种方法之一。

**导出/导入 CSV**

纯数据库方法是从各种表中选择导出文件，以便稍后在另一端重新加载。

例如：

```
SELECT ... FROM ... INTO OUTFILE 'export.csv' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED  BY '"' LINES TERMINATED BY '\n' 
```

这将创建一个 CSV 格式的导出文件，您可以稍后在其他系统上重新加载：

```
LOAD DATA INFILE 'export.csv' INTO TABLE ... FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED  BY '"' LINES TERMINATED BY '\n' 
```

这需要直接访问您的 MySQL 服务器，但如果成功，它会非常快。`BINARY`或`BLOB`类型字段不适用于 CSV，因为它们与分隔符冲突。

**导出/导入 YAML**

每个模型都能够将自己输出为序列化的 YAML。您基本上可以在一端转储您需要的所有对象，然后在另一端重新加载。

```
File.open('dump.yml', 'w') do |f|
  f.write(Object.where(:attribute => 'condition').all.to_yaml)
end 
```

您可以在另一端重新加载这些：

```
File.open('dump.yml') do |f|
  Object.transaction do
    YAML.load(f).each do |attributes|
      Object.create!(attributes)
    end
  end
end 
```

该`Object.transaction`部分意味着要么添加所有记录，要么不添加任何记录，因此如果出现错误，您可以更正它并再次运行脚本而不会发生冲突。

**SQL 转储/恢复**

该`mysqldump`命令采用`--where`可用于过滤记录的参数：

```
mysqldump database table --no-create-db --no-create-info --where `attribute='condition'` > table.sql 
```

这应该只有`INSERT`语句，但请检查以确保。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:02:29.227

您可以将备份数据库添加到您的`database.yml`，从中读取对象，切换回主数据库并重新创建丢失的对象。就像是：

```
ActiveRecord::Base.establish_connection(:backup_database)

objects = Object.where(attribute: 'condition')

ActiveRecord::Base.establish_connection(:master_database)

objects.each { |object| Object.create! object.attributes } 
```

# vb.net - 执行一个应用程序并等待它被加载

> ID：15906479
> 
> 赞同：0
> 
> 时间：2013-04-09T15:44:58.260
> 
> 标签：vb.net, visual-studio, handle, window-handles

我正在寻找一种方法来执行 Steam（Steam.exe）并等待它被加载（不退出）。

我认为一个好主意是列出所有子句柄并在标题句柄中搜索一个字符串，因为当蒸汽加载存在一个名为“Friends”的窗口句柄时，但这对我来说很难（API）所以可能存在等待程序加载的简单方法...

我将要做什么的例子：

```
' First process
Process.start("Process 1.exe")

' Here will goes an efficient method to wait for application is loaded,
' not sleeping X seconds measuring the loading time or any of that.

' Second process
' Depends on first process fully loaded.
' If first process is not fully loaded (libraries and that) then this process can't run.
Process.start("Processs 2.exe") 
```

> 更新：

主要问题是如何等待 X 进程被加载，但关于 Steam.exe 我也注意到，当 Steam 被加载时，我会尝试读取/打开一些 regkeys：

[http://img267.imageshack.us/img267/6599/prtscrcapture4u.jpg](http://img267.imageshack.us/img267/6599/prtscrcapture4u.jpg)

也许我可以用代码做一些事情来监控其中一个 RegKeys 是否被访问？

像这样的东西？：

```
Dim RegKey = "HKLM\...blablabla"
Process.start("steam.exe")

While not Regkey.IsAccessed 
  ' Do nothing and wait
Loop

Process.start("Second process.exe") 
```

> 更新 2：

我正在尝试通过引用 Amegon 的解决方案来制作一个函数，但我没有完成代码，因为我在一行中遇到了错误：

```
Memory = hprocess.PrivateMemorySize64 
```

![在此处输入图像描述](https://i.stack.imgur.com/KlkOO.jpg)

但是，当我尝试启动“大”应用程序（需要大量时间加载的应用程序，如 Photoshop）时，我只会收到错误消息，而“小”应用程序运行良好。

如果有人可以帮助我简化/改进 Amegon 的解决方案以制作通用函数并纠正内存溢出错误...谢谢！

这是我的代码：

```
' This is the sub that launchs the unfinished function:
Private Sub Launch_Game()
    'Wait_For_Application_To_Load("C:\Games\Steam.exe", "-applaunch 0")
    Wait_For_Application_To_Load("C:\Program Files\Adobe Photoshop CS6 (64 Bit)\Photoshop.exe")
End Sub

Private Function Wait_For_Application_To_Load(ByVal APP_Path As String, Optional ByVal APP_Arguments As String = Nothing)
    Dim File = My.Computer.FileSystem.GetFileInfo(APP_Path)
    Process.Start(APP_Path, APP_Arguments)
    Timer_CheckCPU.Tag = File.Name.Substring(0, File.Name.Length - 4) ' Photoshop
    Timer_CheckCPU.Enabled = True
End Function

Private Declare Function ReadProcessMemory Lib "kernel32" (ByVal hProcess As Integer, ByVal lpBaseAddress As Integer, ByVal lpBuffer As Integer, ByVal nSize As Integer, ByRef lpNumberOfBytesWritten As Integer) As Integer
Private WithEvents Timer_CheckCPU As New Timer

Dim Memory_Value_Changed As Boolean
Dim CPU_Changed As Boolean
Dim CPU_Time As Boolean
Dim Running_Time As Boolean
Private _desiredTime_ms As Integer = 1500

Private Sub Timer_CheckCPU_Tick(sender As Object, ev As EventArgs) Handles Timer_CheckCPU.Tick
    Timer_CheckCPU.Enabled = False
    Dim pProcess() As Process = System.Diagnostics.Process.GetProcessesByName(Timer_CheckCPU.Tag)
    Dim hprocess As Process = pProcess(0)
    If hprocess Is Nothing Then
        Running = False
        Timer_CheckCPU.Enabled = True
        Return
    End If
    Running = True

    ' Here is the error:
    Memory = hprocess.PrivateMemorySize64
    ' MsgBox(hprocess.PrivateMemorySize64.ToString)

    CPUTotal = hprocess.TotalProcessorTime.TotalMilliseconds

    If AllConditionsGood() Then
        If Not (_countdown.IsRunning) Then
            _countdown.Reset()
            _countdown.Start()
        End If
        Dim _elapsed As Integer = _countdown.ElapsedMilliseconds
        If _elapsed >= _desiredTime_ms Then
            Me.TopMost = True
            MsgBox("process loaded")
            Return
        End If
    Else
        _countdown.Reset()
    End If
    Timer_CheckCPU.Enabled = True
End Sub

Private Function AllConditionsGood() As Boolean
    If CPU_Time Then Return False
    If Memory_Value_Changed Then Return False
    If Running_Time Then Return False
    Return True
End Function

Private _countdown As New Stopwatch

Private _Running As Boolean = False
Public WriteOnly Property Running() As Boolean
    Set(ByVal value As Boolean)
        _Running = value
        If value Then
            Running_Time = False
        Else
            Running_Time = True
        End If
    End Set
End Property

Private _CPUTotal As Integer
Public WriteOnly Property CPUTotal() As Integer
    Set(ByVal value As Integer)
        CPU = value - _CPUTotal 'used cputime since last check
        _CPUTotal = value
    End Set
End Property

Private _CPU As Integer
Public WriteOnly Property CPU() As Integer
    Set(ByVal value As Integer)
        If value = 0 Then
            CPU_Time = False
        Else
            CPU_Time = True
        End If
        _CPU = value
    End Set
End Property

Private _Memory As Integer
Public WriteOnly Property Memory() As Integer
    Set(ByVal value As Integer)
        MemoryDiff = Math.Abs(value - _Memory)
        _Memory = value
    End Set
End Property

Private _MemoryDiff As Integer
Public WriteOnly Property MemoryDiff() As Integer
    Set(ByVal value As Integer)
        If value = _MemoryDiff Then
            Memory_Value_Changed = False
        Else
            Memory_Value_Changed = True
        End If
        _MemoryDiff = value
    End Set
End Property 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:42:55.310

该`WaitForInputIdle`方法一直等到应用程序启动并等待输入

```
Dim psi As New ProcessStartInfo("fileName", "arguments")
Dim p As New Process
p.StartInfo = psi
p.Start()
p.WaitForInputIdle() 
```

* * *

注意：这不适用于服务应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:51:20.007

**更新**我已经构建了一个示例程序来显示这个内存和 cpu 观察

要运行它，请创建一个新项目 windows 窗体应用程序，然后打开代码部分并插入以下代码。- 无需添加任何控件，我在代码中手动添加了它们。我能够在 win8 prof x64- 上使用 VS 2012 Ultimate 成功运行代码：

```
Option Strict On
Imports System.Runtime.InteropServices

Public Class Form1
    Private WithEvents btnStart As New Button
    Private WithEvents tmrCheckCPU As New Timer

    Private tbRunning As New TextBox
    Private tbCPU As New TextBox
    Private tbMemory As New TextBox
    Private tbTime As New TextBox

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Me.Size = New Size(400, 400)
        With btnStart
            '.Text = "Start DxDiag"
            .Text = "Start Photoshop"
            Me.Controls.Add(btnStart)
            .Location = New Point(50, 50)
            .Size = New Size(200, 50)
        End With
        With tmrCheckCPU
            .Interval = 100
            .Enabled = False
        End With
        With tbRunning
            Me.Controls.Add(tbRunning)
            .Location = New Point(50, 110)
            .Size = New Size(100, 40)
        End With
        With tbCPU
            Me.Controls.Add(tbCPU)
            .Location = New Point(50, 150)
            .Size = New Size(100, 40)
        End With
        With tbMemory
            Me.Controls.Add(tbMemory)
            .Location = New Point(50, 200)
            .Size = New Size(100, 40)
        End With
        With tbTime
            Me.Controls.Add(tbTime)
            .Location = New Point(50, 250)
            .Size = New Size(100, 40)
        End With
    End Sub

    Private Sub btnStart_Clicked(sender As Object, ev As EventArgs) Handles btnStart.Click
        'start Process
        'Process.Start("dxdiag.exe", "/whql:on")
        Process.Start("C:\Program Files\Adobe\Adobe Photoshop CS6 (64 Bit)\Photoshop.exe")
        'start watching Timer
        tmrCheckCPU.Enabled = True
    End Sub

    Private Function FindProcess(MainWindowTitle As String) As System.Diagnostics.Process
        For Each ele As System.Diagnostics.Process In Process.GetProcesses
            If ele.MainWindowTitle = MainWindowTitle Then Return ele
        Next
        Return Nothing
    End Function

    Private Sub tmrCheckCPU_Tick(sender As Object, ev As EventArgs) Handles tmrCheckCPU.Tick
        tmrCheckCPU.Enabled = False
        'Dim name As String = "DirectX Diagnostic Tool"
        Dim name As String = "Adobe Photoshop CS6 Extended"
        Dim hprocess As Process = FindProcess(name)
        If hprocess Is Nothing Then
            Running = False
            tmrCheckCPU.Enabled = True
            Return
        End If
        Running = True
        Memory = hprocess.PrivateMemorySize64
        CPUTotal = hprocess.TotalProcessorTime.TotalMilliseconds

        If AllConditionsGood() Then
            If Not (_countdown.IsRunning) Then
                _countdown.Reset()
                _countdown.Start()
            End If
            Dim _elapsed As Long = _countdown.ElapsedMilliseconds
            If _elapsed >= _desiredTime_ms Then
                tbTime.Text = _desiredTime_ms.ToString
                tbTime.BackColor = Color.LightGreen
                Me.TopMost = True
                Me.Focus()
                MsgBox("process loaded")
                Return
            Else
                tbTime.Text = _elapsed.ToString
                tbTime.BackColor = Color.LightGreen
            End If
        Else
            _countdown.Reset()
        End If
        tmrCheckCPU.Enabled = True
    End Sub

    Private _desiredTime_ms As Integer = 1500

    Private Function AllConditionsGood() As Boolean
        If tbCPU.BackColor <> Color.LightGreen Then Return False
        If tbMemory.BackColor <> Color.LightGreen Then Return False
        If tbRunning.BackColor <> Color.LightGreen Then Return False
        Return True
    End Function

    Private _countdown As New Stopwatch

    Private _Running As Boolean = False
    Public WriteOnly Property Running() As Boolean
        Set(ByVal value As Boolean)
            _Running = value
            If value Then
                tbRunning.Text = "Running"
                tbRunning.BackColor = Color.LightGreen
            Else
                tbRunning.Text = "Not Running"
                tbRunning.BackColor = Color.LightPink
            End If
        End Set
    End Property

    Private _CPUTotal As Double
    Public WriteOnly Property CPUTotal() As Double
        Set(ByVal value As Double)
            CPU = value - _CPUTotal 'used cputime since last check
            _CPUTotal = value
        End Set
    End Property

    Private _CPU As Double
    Public WriteOnly Property CPU() As Double
        Set(ByVal value As Double)
            If value = 0 Then
                tbCPU.BackColor = Color.LightGreen
            Else
                tbCPU.BackColor = Color.LightPink
            End If
            _CPU = value
            tbCPU.Text = value.ToString
        End Set
    End Property

    Private _Memory As Long
    Public WriteOnly Property Memory() As Long
        Set(ByVal value As Long)
            MemoryDiff = Math.Abs(value - _Memory)
            _Memory = value
        End Set
    End Property

    Private _MemoryDiff As Long
    Public WriteOnly Property MemoryDiff() As Long
        Set(ByVal value As Long)
            If value = _MemoryDiff Then
                tbMemory.BackColor = Color.LightGreen
            Else
                tbMemory.BackColor = Color.LightPink
            End If
            _MemoryDiff = value
            tbMemory.Text = value.ToString
        End Set
    End Property

End Class 
```

如果单击该按钮，它将启动 dxdiag 并在文本框中显示内存的变化和总 cpu 时间的差异（与上次相比）。如果满足所有条件（正在运行，cpu 总时间没有变化，内存没有变化），那么秒表将计数到 1500，然后消息框会显示“完成”

写的很脏，但我猜你理解了主要核心（如何找到正确的进程，没有任何dll声明方法），找到后如何读取该进程的一些信息，以及以什么方式应用条件。

等待时间是为了确保一秒钟的纯硬盘加载时间不会造成加载完成的错误印象（可能没有内存或 CPU 变化）。

风险在于.. 如果一个页面会自动出现并显示内容/广告，那么可能是 cpu 一直在使用。因此您只能检查内存更改或您可以从流程中访问的任何其他值。

**更新**更正的代码（修复了错误的数据类型）。现在 Option strict 没有抱怨我的代码:)

# .net - NHibernate Linq 查询中的通用参数

> ID：15906483
> 
> 赞同：1
> 
> 时间：2013-04-09T15:45:11.297
> 
> 标签：.net, linq, nhibernate, generics, linq-to-nhibernate

有什么方法可以比较 linq 查询中的泛型类型以使用 NHibernate 转换为 SQL？

像这样的东西：

```
public abstract class DataProviderBase<TDAO, TId>
{
    protected ISession Session;

    public virtual TDAO GetById(TId id)
    {
        var allItems = GetAllQuery();  // gives me query, usually Session.Query<TDAO>();
        var res = allItems.SingleOrDefault(item => item.Id == id);
            // !!! Operator '==' cannot be applied to operands of type 'TId' and 'TId'
        return res;
    }

    protected virtual IQueryable<TDAO> GetAllQuery()
    {
        var query = Session.Query<TDAO>();
        return query;
    }
} 
```

我知道我可以使用`Session.Get<TDAO>(id);`，但这不是我想要的。`GetAllQuery()`是一种虚拟方法，我希望能够覆盖它。

*   **NHibernate**版本：3.3.3.4000
*   **NHibernate.Linq**版本：1.0

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:03:46.047

您可以动态地创建谓词。例如：

```
var parameter = Expression.Parameter(typeof (TDAO));
var predicate = Expression.Lambda<Func<TDAO, bool>>(
    Expression.Equal(Expression.Property(parameter, "Id"),
                     Expression.Constant(id)),
    parameter);
var res = allItems.SingleOrDefault(predicate); 
```

# adobe - 什么时候解析“var”？

> ID：15906488
> 
> 赞同：2
> 
> 时间：2013-04-09T15:45:19.273
> 
> 标签：adobe, adobe-indesign, extendscript, adobe-javascript

有时`var`会影响之前的代码，有时不会。举个例子：

base.jsx：

```
$.global.a = 1;
$.writeln("a: " + a);
var a = 2; 
```

运行此打印`a: 1`。运行`$.evalFile("base.jsx");`也打印`a: 1`。然而，运行

```
(function() {
    $.evalFile("base.jsx");
})(); 
```

打印`a: undefined`。

为什么？这背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:23:56.483

经过一堆测试，我想通了。

我知道 JavaScript 的作用域是函数级的，但我假设文件也有自己的作用域。我错了。

跑步

```
$.global.a = 1;
var a = 2;
$.writeln("$.global.a: " + $.global.a); 
```

将打印`$.global.a: 2`。这意味着`$.global.a`和`var a`在这个上下文中完全一样，文件的范围实际上是全局范围。

鉴于 base.jsx 仍然

```
$.global.a = 1;
$.writeln("a: " + a);
var a = 2; 
```

运行代码

```
(function() {
    $.evalFile("base.jsx");
    $.writeln("a: " + a);
    $.writeln("$.global.a: " + $.global.a);
})(); 
```

将 base.jsx 的范围更改为此函数而不是全局对象。突然`$.global.a`和`var a`指的是两个不同的对象。结果将是：

```
a: undefined
a: 2
$.global.a: 1 
```

所以问题从来就`var`不是有时被提前解析，有时不是。问题是文件除了全局之外没有其他范围。

# mysql - 解决 SQL 替换通配符

> ID：15906491
> 
> 赞同：1
> 
> 时间：2013-04-09T15:45:31.227
> 
> 标签：mysql, replace, wildcard

我知道我不能通过 phpMyAdmin 在 MySQL 替换查询中使用通配符。但是，我需要某种解决方法。我对想法非常开放。下面是瘦身：

我在 MySQL 数据库中有大约 2,000 个页面需要更新图像 URL。有些是本地的，有些是热链接的。每个都不同，URL 长度不同，页面上的图像和新图像对于每个页面 ID 号都是唯一的，并且每个都出现在页面中的不同位置。

我基本上需要做以下事情：

```
UPDATE pages SET body = replace(body, 'src=\"%\"', 'src=\"http://newdomain/newimage.jpg\"') WHERE id="{page_number}" 
```

但我知道该`'src=\"%\"'`组件不会跳动。

所以我在你的集体知识的脚下想出一些方法来获取`src="%"`并用一个设置的 URL 替换它以获取一个设置的页面 ID 号。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:22:19.570

如果每页只有一张图片，一个快速的解决方案是这样的：

```
UPDATE pages
SET
  body = CONCAT(
    SUBSTRING_INDEX(body, 'src="', 1),
    'src=\"http://newdomain/newimage.jpg\"',
    SUBSTRING(
      SUBSTRING_INDEX(body, 'src="', -1)
      FROM LOCATE('"', SUBSTRING_INDEX(body, 'src="', -1))+1)
    )
WHERE
  id="{page_number}" AND
  body NOT LIKE '%<img%<img%'; 
```

第一个SUBSTRING_INDEX 提取左边的body 部分`src="`，最后两个嵌套的SUBSTRING_INDEX 提取第一个`"`next右边的body 部分`src="`。

最后一次检查是一项非常脏的检查，以确保字符串中只存在一个图像。在某些情况下它可能会失败，但它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:54:05.227

我的建议是使用您的替换字符串构建一个表格，如下所示：

```
page_id     replace
1           src="..." 
```

然后你可以像这样在 JOIN 中更新

```
UPDATE pages AS p
INNER JOIN replace AS r
  ON p.page_id = r.page_id
SET p.body = REPLACE(p.body, CONCAT('src="', SUBSTRING_INDEX(SUBSTRING_INDEX(p.body, 'src="', -1), '"', 1), '"', r.replace); 
```

这将用相同格式的新值替换最后出现的任何`src="..."`格式，因此这将适用于具有单个 src 值的所有记录。

# matlab - 将曲线添加到 Matlab 图

> ID：15906492
> 
> 赞同：2
> 
> 时间：2013-04-09T15:45:34.817
> 
> 标签：matlab, plot

我编写了一个程序，它可以获取大量数据并生成图形。如果我可以在现有图形上绘制曲线并将它们的值加在一起以形成一条曲线，那将非常方便并节省大量时间。举个简单的例子，假设我有以下代码，

```
x = [0 1 2 3 4 5];
y = [0 1 2 3 4 5];
z = [4 6 2 8 7 9];

figure
plot(x,y,x,z) 
```

此代码将生成一个带有两条曲线的图形。在不修改代码或重新运行程序的情况下，只使用图形选项，我想将曲线 y + z 添加到绘图中。这可能吗？谢谢。

我不想添加该功能的原因是绘图代码隐藏在 8 个循环中，这些循环调用来自文件名字符串的 4D 单元数组的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:54:22.877

如果你在图中使用了`x`,`y`和`z`变量，你可以在图中添加新行

```
hold on
plot(x,y+z)
hold off 
```

如果您没有直接拥有它们（例如，它们是在函数中生成的，您总是可以从带有线对象属性的图形`XData`中获取它们。`YData`

```
hline = findobj(gca,'type','line');
x = get(hline,'XData');
y = get(hline,'YData');
X = x{1}; % let's assume that all lines have the same x values.
Y = sum(cell2mat(y));

hold on
plot(X,Y)
hold off 
```

# c# - 在 WindowsCE 上从非托管 C++ 应用程序调用 C# Dll

> ID：15906493
> 
> 赞同：1
> 
> 时间：2013-04-09T15:45:35.947
> 
> 标签：c#, c++, compact-framework, windows-ce, unmanaged

我有一个支持 C++ 插件的现成产品。我想知道是否可以从非托管 C++ dll 调用 C# Dll，以便我可以在我熟悉的 C# 中完成繁重的工作，并且只需使用 C++ 插件从 C# Dll 调用和返回值。

我使用的是使用 .net 紧凑框架的 WindowsCE，这意味着使用 /CLI 标志编译 C++ 不是一个选项。

谁能向我解释我该怎么做。我不是 C++ 开发人员，但如果我给出一个简单的例子，我相信我可以解决它。

我已经在网上寻找了一些简单的东西，比如一个 hello world 应用程序，但可以找到任何东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:41:23.753

请参阅：[在 .NET Compact Framework 2.0 中托管 ActiveX 控件](http://msdn.microsoft.com/en-us/library/aa446515.aspx)

> .NET Compact Framework 2.0 中的 COM 支持与其桌面计算机对应物相比仍然有些有限。例如，不支持外部激活。您不能在托管代码中编写独立的 COM 组件；如果可能的话，COM 组件可以在常规的、非托管的 Win32 进程中实例化。因为托管代码需要公共语言运行时 (CLR) 才能执行，所以此类设置需要 Win32 进程来承载 CLR。因为 CLR 托管不是 .NET Compact Framework 2.0 的功能之一，所以整个外部激活模型不可用。

# wordpress - 我想在上传之前为自定义帖子类型验证上传的图片

> ID：15906496
> 
> 赞同：1
> 
> 时间：2013-04-09T15:45:40.633
> 
> 标签：wordpress, upload

我想在将图像上传到服务器之前检查它。我需要检查它是否具有最小宽度和高度、300dpi 和只有 jpg。

我正在使用下一个函数来调用上传过程，除了它在每次上传时调用，而不是针对某种帖子类型。

```
add_filter('wp_handle_upload_prefilter','tc_handle_upload_prefilter');

function mf_handle_upload_prefilter($file)
{
  // do checks and return error if fails

  return $file;
} 
```

有谁知道如何做到这一点？我可以使用我可以使用的 $file 参数的额外值吗？还是有其他方法可以做到这一点？

附言。我必须在上传之前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:53:59.243

解决方案：

```
add_filter('wp_handle_upload_prefilter','tc_handle_upload_prefilter');

function mf_handle_upload_prefilter($file)
{
  if(get_post_type($_REQUEST['post_id']) == 'post_type')
  {
     // do checks
  }

  return $file;
} 
```

# python - Python列表：将每个第n个值与第（n + 1）个交换

> ID：15906497
> 
> 赞同：1
> 
> 时间：2013-04-09T15:45:43.720
> 
> 标签：python, list

做这个的最好方式是什么：

```
>>> replace2([1, 2, 3, 4, 5, 6])
[2, 1, 4, 3, 6, 5] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T15:48:20.823

```
def replace2inplace(lst):
    lst[1::2], lst[::2] = lst[::2], lst[1::2] 
```

**这使用切片分配和切片步长来就地**交换列表中的每一对：

```
>>> somelst = [1, 2, 3, 4, 5, 6]
>>> replace2inplace(somelst)
>>> somelst
[2, 1, 4, 3, 6, 5] 
```

否则你可以使用一些`itertools`技巧：

```
from itertools import izip, chain

def replace2copy(lst):
    lst1, lst2 = tee(iter(lst), 2)
    return list(chain.from_iterable(izip(lst[1::2], lst[::2]))) 
```

这使：

```
>>> replace2([1, 2, 3, 4, 5, 6])
[2, 1, 4, 3, 6, 5] 
```

`list()`调用可选；如果您只需要遍历结果，则生成器就足够了：

```
from itertools import izip, chain, islice, tee

def replace2gen(lst):
    lst1, lst2 = tee(iter(lst))
    return chain.from_iterable(izip(islice(lst1, 1, None, 2), islice(lst2, None, None, 2)))

for i in replace2gen([1, 2, 3, 4, 5, 6]):
    print i 
```

where`replace2gen()`也可以采用任意迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:50:54.427

异地版本：

```
def replace2(lst):
    return [x for pair in zip(lst[1::2], lst[::2]) for x in pair] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:54:45.673

我的选择：

```
x = range(1,7)
res = [e for e in itertools.chain(*zip(x[1::2],x[0::2]))] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:08:43.327

```
>>> a = [1, 2, 3, 4, 5, 6]
>>> sum([[x+1,x] for x in a if x&1 == True],[])
[2, 1, 4, 3, 6, 5] 
```

**编辑：**要求进一步解释：

代码逐步遍历列表中的每个元素`a`，如果元素是奇数 ( `x&1 == True`)，它会将那个元素和下一个元素以相反的顺序 ( ) 放入列表中`[x+1,x]`。

`sum(...,[])`如果没有我们将拥有的功能

```
[[2, 1], [4, 3], [6, 5]] 
```

该`sum(...,[])`函数删除给出的内部方括号

```
[2, 1, 4, 3, 6, 5] 
```

这可以通过使用列表的索引而不是它的值来更普遍地完成：

```
>>> a = [1, 2, 3, 4, 5, 6]
>>> sum([[a[x],a[x-1]] for x in range(len(a)) if x&1 == True],[])
[2, 1, 4, 3, 6, 5] 
```

但是，如果列表的长度不是偶数，这将删除列表的最后一个元素。

# java - 在 slick2d 中设置 delta 的最大值和最小值

> ID：15906500
> 
> 赞同：0
> 
> 时间：2013-04-09T15:45:48.127
> 
> 标签：java, slick2d

虽然在我的游戏中看起来很有趣，但我有一些基本的 rts 移动，您可以在其中单击鼠标右键，然后单位会移动到那里。但有时当我运行游戏时，单位的移动速度比平时慢得多，但代码中没有任何变化（其他时候单位移动得更快）。当我打开更多程序时，速度会恢复正常，但如果我只是运行 Netbeans，我的动作会非常慢。

我感觉它与更新的增量值（不太确定）有关，但由于我是 slick2d 的新手，我不知道从哪里开始解决问题。

所以我的问题是，我可以限制 delta 值，使其不能更新太慢或太快，并且 delta 甚至是我的问题吗？

[http://pastebin.com/fRndGE2p](http://pastebin.com/fRndGE2p) //主类

[http://pastebin.com/KJ8W3134](http://pastebin.com/KJ8W3134) //PlayerStats

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:10:42.223

我现在明白了。你没有打开垂直同步。
*注意：垂直同步将帧速率限制为显示器刷新率（通常为 60fps）。* 哦，最大/最小更新间隔以*毫秒*为单位。

**所以下面的例子让游戏变得非常迟钝：**

```
app.setVSync(true);                     // Turn VSync
app.setMaximumLogicUpdateInterval(200); // Max. 200 miliseconds can pass
app.setMinimumLogicUpdateInterval(100); // Min. 100 miliseconds must pass 
```

所以我认为你必须围绕数字进行调整以使其达到最佳状态。

*但是，这不是你需要的：D* 我看到了：

```
player_X = player_X + velocityX;
player_Y = player_Y + velocityY; 
```

所以这是你的代码，用来更新玩家的位置。您必须使用增量编号。

```
 public void update(GameContainer gc, int delta) 
```

如您所见，delta 是一个预定义的整数。增量包含两次更新之间经过的时间。因此，在此之后，您应该将所有内容与 delta 相乘。

**检查这个：**

```
player_X += velocityX * delta;
player_Y += velocityY * delta;

// The '+=' means player_X = player_X + something (if you did not know) 
```

*注意：如果玩家在更改后移动缓慢，则只需将其乘以如下数字：*

```
player_X += velocityX * delta * 1.5f;
player_Y += velocityY * delta * 1.5f; 
```

***例子：***

> [Runnable Jar](https://www.dropbox.com/s/bjbcfb44zt9bbvi/test.jar)
> [MainComponent.java](http://pastebin.com/RMqzXVvZ)
> [GameState.java](http://pastebin.com/PYFmL32D)

这是一个自制的快速简单的例子。试试看，尝尝源代码：D
哦，这个距离计算方法让玩家颤抖。

# php - CakePHP 如何从模型中设置消息？

> ID：15906503
> 
> 赞同：3
> 
> 时间：2013-04-09T15:45:55.270
> 
> 标签：php, cakephp, cakephp-2.2

我正在尝试从方法中的模型发送特定消息`beforeSave()`。Flash 消息不起作用。我可以从 Controller 发送此消息并使用一些参数，但我不是这个最佳解决方案。使用`print`也不好。

所以我的问题是如何从模型向控制器/视图发送任何消息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-13T14:53:13.133

您必须冒泡一条错误消息，试试这个

在您的模型中：

```
public function beforeSave($options = array()){
    if($not_ok){
        $this->error = __('My error message');
        return false;
    }
    return true;
} 
```

在您的控制器中：

```
public function add(){
    $save = $this->Modelname->save($this->request->data);
    if(!$save){
        $this->Session->setFlash($this->Modelname->error);
        $this->redirect($this->referer());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:55:01.500

那么 Session->setFlash() 显然不起作用，因为它是 Session 组件的一部分，但是 Session 组件使用静态单例类 CakeSession，它有方法 CakeSession::write() 你所要做的就是传递数组来写入将生成与 Session::setFlash() 具有相同结构的方法，因此当您在视图中使用 Session::flash() 时，您将获得与来自控制器的 setFlash() 相同的结果。

供参考：http : [//api.cakephp.org/2.2/class-CakeSession.html](http://api.cakephp.org/2.2/class-CakeSession.html)

来自评论的片段，放置在模型方法中。

```
App::uses('CakeSession','Model/Datasource');            
            CakeSession::write('Message', array(
                'flash' => array(
                    'message' => 'your message here',
                    'element' => 'default',
                    'params' => null,
                ),
            )); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T19:49:06.443

通过执行以下操作，您将能够随时在模型中设置闪光灯，而不必担心在控制器中再次声明它们，因为它们会在页面呈现之前在您的应用程序控制器中自动设置。

在 AppController 中：

```
public function beforeRender() {
  parent::beforeRender();
  $this->generateFlashes();
}

public function generateFlashes() {
  $flashTypes = array('alert', 'error', 'info', 'success', 'warning');
  $model = $this->modelClass;

  foreach($flashTypes as $type) {
    if(!empty($this->$model->$type)) {
      $message = '<strong>' . ucfirst($type) . ':</strong> ' . $this->$model->$type;
      $this->Flash->error($message, array('escape' => false));
    }
  }
} 
```

在模型中：

```
public function beforeSave($options = array()){
  if($not_ok){
    $this->error = __('My error message');
    return false;
  }
  return true;
} 
```

在控制器中：

```
public function add(){
  // $this->modelClass will use whatever the actual model class is for this
  // controller without having to type it out or replace the word modelClass
  $save = $this->{$this->modelClass}->save($this->request->data);
  if(!save){
    // no need to set flash because it will get created in AppController beforeRender()
    $this->redirect($this->referer());
  }
} 
```

# android - Android 环境变量

> ID：15906504
> 
> 赞同：0
> 
> 时间：2013-04-09T15:45:59.660
> 
> 标签：android, build, continuous-integration, environment

我正在开发一个对远程服务器进行 api 调用的 Android 应用程序。当我开发时，我指向我的本地服务器。此外，我还有一个持续集成服务器，它也在本地运行 Web 应用程序。我怎样才能设法配置不同的 url，所以每次我提交到 CI 服务器时，我都不需要更改 url。我试过 localhost 但它不起作用，因为 localhost 是模拟器本身。

编辑 1：我设法找到 10.0.2.2 指向我的机器本地主机，但这仅适用于模拟器。任何针对真实设备的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:13:54.977

您可以解决的一种方法是在代码中使用带有标志的单独配置文件，该标志指示您的应用程序是处于本地模式，还是从 CI 服务器构建的。默认情况下，此文件始终设置为“CI 服务器模式”，您可以在本地覆盖它（但从未真正签入此文件）。

您所有的服务调用，都可以分为两部分。一部分是端点，另一部分是这些端点上的实际动作/操作。

一个大 URL = 'END-POINT' + URL 的其余部分

完成此拆分后，您需要做的就是根据我之前描述的标志值修改此拆分 URL 的第一部分。

# tibco-ems - TIBCO EMS - 导出模式时出错 - java.lang.ClassNotFoundException：com.tibco.tibems.tibemsd.internal.db.DataStoreConnectionCustomizer

> ID：15906506
> 
> 赞同：0
> 
> 时间：2013-04-09T15:46:02.567
> 
> 标签：tibco-ems

我正在尝试使用 MySql 来存储 TIBCO EMS 7.0 消息。以下是我的配置： -

**商店-db.conf**

```
[$sys.failsafe]type=dbstore
dbstore_driver_url=jdbc:mysql://localhost:3306/Research
dbstore_driver_username=root
dbstore_driver_password=12345 
```

**tibemsd-db.conf**

```
 dbstore_classpath      
 = ../../../../tibcojre/1.6.0/lib/ext/hibernate-core-4.1.9.Final.jar:../../../../t ibcojre/1.6.0/lib/ext/c3p0-0.9.2.1.jar:../../bin/antlr-2.7.6.jar:../../bin/asm-a ttrs.jar:../../bin/asm.jar:../../bin/cglib-2.1.3.jar:../../bin/commons-collectio ns-2.1.1.jar:../../bin/commons-logging-1.0.4.jar:../../bin/dom4j-1.6.1.jar:../.. /bin/ehcache-1.2.3.jar:../../bin/jta.jar:C:/temp/mysql-connector-java-5.1.23-bin .jar 
```

dbstore_driver_name = com.mysql.jdbc.Driver dbstore_driver_dialect = org.hibernate.dialect.MySQLDialect jre_library = C:/tibco/tibcojre/1.6.0/bin/server/jvm.dll

我确保可以使用给定的用户名和密码连接到 MySql，并且 dbstore_classpath 中提到的文件确实存在于它们指定的路径中。

当我尝试使用以下内容将架构导出到数据库时：-

```
java -jar  c:\tibco\ems\7.0\bin\tibemsd_util.jar -tibemsdconf  c:\tibco\ems\7.0\samples\config\tibemsd-db.conf -createall  -export 
```

我收到以下错误。有人能指出我正确的方向吗：-

> 2013 年 4 月 8 日下午 2:11:10 com.mchange.v2.c3p0.C3P0Registry getConnectionCustomizer 警告：无法创建类名为“com.tibco.tibems.tibemsd.internal.db.DataStoreConnectionCustomizer”的 ConnectionCustomizer。 **> java.lang.ClassNotFoundException: com.tibco.tibems.tibemsd.internal.db.DataStoreConnectionCustomizer** 在 java.net.URLClassLoader$1.run(URLClassLoader.java:202) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:190) 在 sun.misc.Launcher$ ExtClassLoader.findClass(Launcher.java:229) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:306) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247) 在 java.lang.Class.forName0(Native方法）在 java.lang.Class.forName(Class.java:169) 在 com.mchange.v2.c3p0.C3P0Registry.getConnectionCustomizer(C3P0Registry.java:193) 在 com.mchange.v2.c3p0.impl.C3P0PooledConnectionPoolManager.getConnectionCustomize r(C3P0PooledConnectionPoolManager.java:749) 在 com.mchange.v2.c3p0.impl.C3P0PooledConnectionPoolManager。在 com.mchange.v2.c3p0.impl.C3P0PooledConnectionPoolManager.getPool(C3P0PooledConn ectionPoolManager.java:331) 处创建PooledConnection 池(C3P0PooledConnectionPoolManager.java:863) :348) 在 com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:140) 在 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider.getConne ction(C3P0ConnectionProvider.java:79) 在org.hibernate.tool.hbm2ddl.ManagedProviderConnectionHelper.prepare(ManagedProviderConnectionHelper.java:55) 在 org.hibernate.tool.hbm2ddl.DatabaseExporter.(DatabaseExporter.java:52) 在 org.hibernate.tool.hbm2ddl.SchemaExport.execute(架构导出。java:367) 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:304) 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293) 在 com.tibco.tibems.tibemsd .internal.db.CreateStoreCallable.processStore(CreateSto reCallable.java:329) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:42) 在 com.tibco.tibems.tibemsd.internal .db.CreateStoreCallable.call(CreateStoreCallab le.java:33) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597)hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:304) 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable。 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:42) com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call( CreateStoreCallab le.java:33) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25)在 java.lang.reflect.Method.invoke(Method.java:597)hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:304) 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable。 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:42) com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call( CreateStoreCallab le.java:33) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25)在 java.lang.reflect.Method.invoke(Method.java:597)java:304) 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.processStore(CreateSto reCallable.java:329) 在 com。 tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:42) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:33) 在 sun.reflect。 NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25) 在 java.lang.reflect.Method.invoke(Method .java:597)java:304) 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.processStore(CreateSto reCallable.java:329) 在 com。 tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:42) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:33) 在 sun.reflect。 NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25) 在 java.lang.reflect.Method.invoke(Method .java:597)tibco.tibems.tibemsd.internal.db.CreateStoreCallable.processStore(CreateSto reCallable.java:329) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:42) 在 com.tibco。 tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:33) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25) 在 java.lang.reflect.Method.invoke(Method.java:597)tibco.tibems.tibemsd.internal.db.CreateStoreCallable.processStore(CreateSto reCallable.java:329) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:42) 在 com.tibco。 tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:33) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25) 在 java.lang.reflect.Method.invoke(Method.java:597)42) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:33) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25) 在 java.lang.reflect.Method.invoke(Method.java:597)42) 在 com.tibco.tibems.tibemsd.internal.db.CreateStoreCallable.call(CreateStoreCallab le.java:33) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:25) 在 java.lang.reflect.Method.invoke(Method.java:597)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-17T16:40:40.120

不知道你是否还有这个问题。如果需要，请在此处添加。

将文件包含`$EMS_HOME/bin/tibemsd_dbstore.jar`到**类路径中**

```
 jar -tvf tibemsd_dbstore.jar | grep DataStoreConnectionCustomizer
  1729 Sat Jul 28 11:32:34 PDT 2012 com/tibco/tibems/tibemsd/internal/db/DataStoreConnectionCustomizer.class 
```

# android - Android 版 Chrome 浏览器不再支持 -webkit-overflow-scrolling？有替代方案吗？

> ID：15906508
> 
> 赞同：22
> 
> 时间：2013-04-09T15:46:08.090
> 
> 标签：android, google-chrome, webkit, scroll, overflow

我在 Nexus 7 平板电脑上更新到最新版本的 Android 版 Chrome 并...

```
-webkit-overflow-scrolling: touch 
```

...不再起作用。此外，以下计算结果为 false：

```
!!('WebkitOverflowScrolling' in document.documentElement.style) 
```

是否从最新版本的 Android 版 Chrome 中删除了对溢出滚动的支持？是否有我可以在最新版本中使用的等效或类似的替代动量滚动机制（不是 iScroll 等）？

同样，我在设备上的 Play 商店中搜索了 Chrome Beta，但它没有出现在搜索结果中。也许 Nexus 7 平板电脑不提供测试版？

非常感谢您对此事的任何帮助。谷歌似乎已经从他们的浏览器中删除了这个功能，这非常令人沮丧......

***编辑：***

**详细版本信息：**

运行 Android 版本 4.2.2 的 Nexus 7 平板电脑

```
-webkit-overflow-scrolling: touch; 
```

和

```
!!('WebkitOverflowScrolling' in document.documentElement.style) 
```

*   在 Chrome 版本 18.0.1025469 上工作并评估为 true
*   在 Chrome 版本 26.0.1410.58 上不起作用并评估为 false

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-06T23:10:49.400

尝试添加`z-index: 0`到元素`overflow: scroll`以创建一个堆栈上下文，它为 Chrome 提供使用快速滚动代码路径的提示。

**背景：**

更新到最新版本的 Android 版 Chrome 后，我目前遇到了这个问题。这也让我更加复杂的是，由于这一变化，当前对该功能的[Modernizr 测试现在返回 false，因此我的 CSS 样式没有被应用。](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css/overflow-scrolling.js)

挖掘我发现了另一个[讨论](http://code.google.com/p/chromium/issues/detail?id=128325#c23)溢出滚动触摸支持的问题：

> 天人在调试 162363 时观察到 -webkit-overflow-touch 是一个继承属性。因此，`z-index: 0`使用该属性设置所有非隐藏元素的行为会在其下方创建层叠上下文。（此行为，在 ENABLE_ACCELERATED_OVERFLOW_SCROLLING 之后，目前仅在 Android 上启用。） **明显的解决方法是`z-index: 0`仅设置“溢出：滚动”元素。**

因此，如果您遇到滚动无法按预期工作的问题，那么似乎可以`z-index: 0`使用 overflow: scroll 添加到元素中，那么这可能会有所帮助。然而，这对我不起作用，尽管滚动部分有效（在我修改了 Modernizr css-overflow-scrolling 测试以针对此版本的 Chrome 返回 true 之后）滚动的动量效应不存在。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-09T16:29:01.653

从这个 URL = [https://code.google.com/p/chromium/issues/detail?id=175670&q=overflow-scrolling&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS% 20修改](https://code.google.com/p/chromium/issues/detail?id=175670&q=overflow-scrolling&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified)

' 不，我认为这确实是由 172481 触发的。**我们删除了 -webkit-overflow-scrolling，希望不再需要它，因为我们会在需要时自动选择快速滚动。问题是它没有在这里发生。**

您提到的那些 SP 更改可能不会影响此问题，因为它们不会出现在非公司帐户上，对吗？我认为 corp 一切正常，但我会检查一下。'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T06:27:07.957

一个对我有用的肮脏解决方案（需要 Hammer js）：

```
 Hammer($('body')[0]).on("dragup", function(ev) {
            window.scrollBy(0,ev.gesture.distance);
        });
         Hammer($('body')[0]).on("dragdown", function(ev) {
            window.scrollBy(0,-ev.gesture.distance);
        }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-27T10:29:52.633

我们在 Android（平板电脑和移动设备）上的 Chrome 40.0 上遇到了滚动问题，我们仅使用 css 解决方案进行了修复。也许它不干净但对我们有用：

```
 @media screen and (max-width: 1024px)
html, body {
    z-index: 0 !important;
    overflow: scroll !important;
    }
} 
```

# c++ - 单例模式和 std::unique_ptr

> ID：15906509
> 
> 赞同：7
> 
> 时间：2013-04-09T15:46:10.043
> 
> 标签：c++, singleton, unique-ptr

`std::unique_ptr`唯一地控制它指向的对象，因此不使用引用计数。单例确保只能使用引用计数创建一个对象。

那么会`std::unique_ptr`和单例一样执行吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T15:49:10.170

单例只确保一个类型的**一个实例**。

A`unique_ptr`确保**只有一个智能指针指向**任何实例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T15:51:18.187

> 那么 std::unique_ptr 的性能是否与单例相同？

不，假设我们有一个旨在成为单例的 Foo 类。使用典型的单例模式，没有办法构造多个 Foo。

有一种`std::unique_ptr<Foo>`方法将有一个指向 Foo 特定实例的指针，但这不会阻止创建 Foo 的其他实例（使用其他`unique_ptr`s 或使用指向局部变量的原始指针）。因此 Foo 不会是单身人士。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T15:51:20.850

`std::unique_ptr`通过仅提供移动构造函数而不提供复制构造函数或赋值运算符来实现单一所有权语义。

这根本不是单例的情况，因为您可以有多个`unique_ptrs`引用相同类型的不同实例。单例不允许您直接构造类型，但提供了管理唯一实例的访问器。

此外，德鲁断言

> “一个 unique_ptr 确保只有一个智能指针指向任何实例。”

是假的。如果你只是这样做：

```
T* nt = new T;
std::unique_ptr<T> up1(nt);
std::unique_ptr<T> up2(nt); 
```

那么你有两个拥有相同资源的唯一指针 - 你只会在运行时注意到问题，而不是编译时。当然，这是对 的错误使用`unique_ptr`，但这强化了 a`unique_ptr`并不能保证任何事情，它只是一个指针容器，从它自己的角度来看拥有唯一的所有权，并且通过它的 api，很难意外地创建临时副本。

此外，您可以让其他（智能）指针类型指向相同的原始指针/资源，独立于任何`unique_ptr`. 完全取决于使用代码来定义其资源和智能指针实例的所有权和生命周期策略

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:50:00.610

如果我错了，请纠正我，但据我所知，singelton 是一个只能有一个实例的类。那是完全不同的。所以不行。

# testcase - 如何在将测试用例导入 TFS 2010 期间找出问题所在

> ID：15906510
> 
> 赞同：1
> 
> 时间：2013-04-09T15:46:17.067
> 
> 标签：testcase

我正在将测试用例从 xml 文件导入到 TFS2010 并得到一个异常。但是没有关于绝对不正确的信息。

```
"Work item 0 is invalid and cannot be saved. Exception: 'TF237124: Work Item is not ready to save'." 
```

如何确定从 xml 导入的数据有什么问题？

```
using System.Text.RegularExpressions;
  using System.Xml;
  using Microsoft.TeamFoundation.Server;
  using Microsoft.TeamFoundation.WorkItemTracking.Client;
  using System;
  using System.Linq;

  internal class Program
  {
    // Input File
    private static TestLink testLink = new TestLink("E:\\dev\\TestLinkToTfs\\testsuites.xml");

    // Target TFS server
    private static Tfs tfs = new Tfs("http://host:8080/tfs/Test", "Test");

    private static void Main(string[] args)
    {
        var testLinkTestCase = testLink.GetTestCases().Take(1).ToList();
        var steps = testLinkTestCase.Descendants("step");
        var testCase = tfs.Project.TestCases.Create(tfs.Project.WitProject.WorkItemTypes["Test Case"]);
        testCase.Title = testLinkTestCase.Attribute("name").Value;

        var summary = testLinkTestCase.Descendants("summary").ToList();
        var issueId = TestLink.GetLinkedIssueId(summary);

        var regEx = new Regex(@"[^a-zA-Z0-9 -]");
        var grandParentName = regEx.Replace(testLinkTestCase.Parent.Parent.Attribute("name").Value, string.Empty);
        var parentName = regEx.Replace(testLinkTestCase.Parent.Attribute("name").Value, string.Empty);

        var area = string.Format(@"Test\Test Cases\{0}\{1}", grandParentName, parentName);

        testCase.CustomFields["Assigned To"].Value = string.Empty;
        testCase.Area = area;

        Tfs.AddSteps(steps, testCase);

        testCase.Save();
      }

      Console.ReadKey();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:27:17.237

当 Work Item id 为 0 时，表示这是动态创建的，并且某些字段值无效。你应该试试这个方法

```
workitem.validate(); 
```

在您保存工作项然后尝试调试您的代码之前。这将告诉您包含无效数据的确切字段。如果您发布用于此目的的代码和 xml，我可能会更有帮助。

# css - 如何使内部 DIV 宽度占设置为自动的外部 div 宽度的百分比

> ID：15906521
> 
> 赞同：0
> 
> 时间：2013-04-09T15:46:39.903
> 
> 标签：css, resize, image-resizing, fluid-layout, window-resize

Wapper 包含一个外部 DIV（包含 IMG 的组 DIV）和 3 个内部 DIV（覆盖）。我需要相对于它的容器定位和调整覆盖 DIV 的大小。问题是容器的宽度设置为自动；所以当我将DIVa设置为宽度时，外部DIV的宽度设置为自动，这样当用户调整窗口大小时，它也会相应地调整大小。

这是一个 JFIDDLE 版本：http: [//jsfiddle.net/6XsVB/](http://jsfiddle.net/6XsVB/)

```
This is what I get: (it's using the % of the main wrapper. Not the parent DIV)
    +-------------------------------------------------------------------------+
    |  +--------------------------------------------------------+             |
    |  | Group DIV. Height:100%; Width:auto; (contains IMG)     |             |
    |  | +---------------++------------------------------++-----|------------+| This is
    |  | |               ||                              ||     |            || the main 
    |  | |               ||                              ||     |            || wrapper
    |  | |    overlay1   ||          overlay2            ||    overlay3      || DIV 
    |  | |               ||                              ||     |            || Width:1200px 
    |  | |     DIV a     ||            DIV b             ||     |DIV c       || Height:70%  
    |  | |               ||                              ||     |            ||   
    |  | |   Width:20%;  ||        Width:50%;            ||   Width:30%;     || The width of 
    |  | |  Height:100%  ||        Height:100%;          ||   Height:100%;   || this wrapper 
    |  | |               ||                              ||     |            || will change 
    |  | |               ||                              ||     |            || depending on
    |  | |               ||                              ||     |            || the amt of 
    |  | |               ||                              ||     |            || groups used
    |  | +---------------++------------------------------++-----|------------+| inside it 
    |  +--------------------------------------------------------+             | manually.  
    +-------------------------------------------------------------------------+

This is the goal:
    +--------------------------------------------------------------------------+
    |  +--------------------------------------------------------+              |
    |  | Group DIV. Height:100%; Width:auto; (contains IMG)     |              |
    |  | +-----------++------------------------++-------------+ | This is      |
    |  | |           ||                        ||             | | the main     |
    |  | |           ||                        ||             | | wrapper      |
    |  | |  overlay1 ||       overlay2         ||  overlay3   | | DIV          |
    |  | |           ||                        ||             | | Width:1200px |
    |  | |   DIV a   ||         DIV b          ||    DIV c    | | Height:70%   |
    |  | |           ||                        ||             | |              |
    |  | | Width:20%;||     Width:50%;         || Width:30%;  | | The width of |
    |  | |Height:100%||     Height:100%;       || Height:100%;| | this wrapper |
    |  | |           ||                        ||             | | will change  |
    |  | |           ||                        ||             | | depending on |
    |  | |           ||                        ||             | | the amt of   |
    |  | |           ||                        ||             | | groups used  |
    |  | +-----------++------------------------++-------------+ | inside it    |
    |  +--------------------------------------------------------+ manually.    |
    +--------------------------------------------------------------------------+ 
```

注意：当浏览器窗口调整大小时，我需要将宽度设置为自动 bc 图像需要调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:14:52.073

我仍然不确定你的问题是什么。我认为您是在说您希望`group`该类与图像的宽度相同。如果这是真的，那么我认为你必须使用 javascript 来做到这一点。问题是没有办法使用 CSS 来计算图像的比例。在您的情况下，您需要根据高度确定宽度是多少。

例如，您的图像宽高比为 5/3。如果高度为 430 像素，则取 430 并乘以 3/5 得到 258 像素的宽度。然后您将手动将宽度设置`.group`为 258px。

# javascript - Salesforce：URL 重写器和 JScript 远程处理：解析 json 响应的异常：“意外令牌 <”。登录？

> ID：15906526
> 
> 赞同：1
> 
> 时间：2013-04-09T15:46:49.650
> 
> 标签：javascript, url-rewriting, salesforce, remoting, visualforce

当我使用 JavaScript 远程处理并在我的 Force.com 站点上打开 URLReWriter 时出现错误。在关闭 URL 重写器的情况下使用 JavaScript 远程处理时不会发生该错误。

错误如下

解析 json 响应时出现异常错误：“意外的令牌 <”。登录？

我很困惑为什么会发生这种情况。如果我没有在我的 URL 重写器（或 visualforce 页面）中登录的检查，为什么会发生这种情况？

有没有人遇到过类似的事情？我注意到以下[https://salesforce.stackexchange.com/questions/4112/possible-oauth-remote-action-bug](https://salesforce.stackexchange.com/questions/4112/possible-oauth-remote-action-bug)但在我的情况下，我没有在我的网站上对我创建的测试页面使用身份验证，我是想知道为什么它提到“登录”。

URLRewriters 和 JavaScript Remoting 目前是否可能不能一起工作？

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:09:17.643

1.  您可以尝试在服务器端调试它吗？将“your_site_name Guest User”添加到调试日志并尝试该操作。如果幸运的话，您会看到出现问题（在远程操作中？在重写器中？），我怀疑这个未捕获的问题会导致重定向到维护页面（将是 HTML，而不是 JSON）......
2.  如果没有 - 使用 Firebug 或类似工具详细检查请求和响应？或者`event.status`？
3.  它可能与权限有关吗？[http://www.salesforce.com/us/developer/docs/pages/Content/pages_js_remoting.htm](http://www.salesforce.com/us/developer/docs/pages/Content/pages_js_remoting.htm)或者如果您要返回 html - 我认为您应该有`{escape:true}`？
4.  它发生在任何浏览器中吗？也许某些东西不喜欢由 URL 重写器引起的重定向。我见过一些案例（虽然不是 Salesforce），防病毒软件有时会在某些网站的末尾添加一些奇怪的 javascript，并且必须将它们列入白名单......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:32:04.063

当页面从远程操作功能接收状态消息时，也可能由于解析器错误而发生错误。

例如，我尝试了带有附件的远程操作

```
@RemoteAction

public attachment attach(String body){
 attachment a=new attachment();
 a.body=body;
 a.name='a.png'

 insert a;

return a;

 } 
```

在上面的代码中，我收到错误，因为 SFDC 不解析附件对象。所以如果有解析器错误，我们会收到此消息。

作为一种解决方法，我将其作为包装器发送。因此，我建议调查远程操作的返回参数并将其包装为解决方法。

希望这可以帮助

# magento - Magento 重写核心模型资源集合

> ID：15906533
> 
> 赞同：8
> 
> 时间：2013-04-09T15:47:03.727
> 
> 标签：magento, rewrite

我试图重写 Mage_Review_Model_Resource_Review_Summary_Collection。模块被激活。折叠结构与核心审查中的相同。

问题应该在xml中。

我的xml是：

```
<?xml version="1.0"?>
<config>
<modules>
    <LM_Review>
        <version>0.1.0</version>
    </LM_Review>
</modules>

<frontend>
    <routers>
        <review>
            <args>
                <modules>
                    <lm_review before="Mage_Review">LM_Review</lm_review>
                </modules>
            </args>
        </review>
    </routers>

    <layout>
        <updates>
            <lm_review>
                <file>lm/review.xml</file>
            </lm_review>
        </updates>
    </layout>

    <translate>
        <modules>
            <LM_Review>
                <files>
                    <default>LM_Review.csv</default>
                </files>
            </LM_Review>
        </modules>
    </translate>
</frontend>

<global>
    <models>
        <review_resource>
            <rewrite>
                <review_summary_collection>LM_Review_Model_Resource_Review_Summary_Collection</review_summary_collection>
            </rewrite>
        </review_resource>
    </models>
</global>
</config> 
```

etc/modules 中的 LM_All.xml

```
<LM_Review>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Review />
            </depends>
</LM_Review> 
```

app/code/local/LM/Review/Model/Resource/Review/Summary/Collection.php 中的 Collection.php

```
class LM_Review_Model_Resource_Review_Summary_Collection extends Mage_Review_Model_Resource_Review_Summary_Collection {

   public function addStoreFilter($storeId) {
      die('test');
   }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:17:53.117

您的 XML 是正确的。有了上面的 XML，如果你调用工厂方法

```
Mage::getResourceModel('review/review_summary_collection') 
```

Magento 将尝试实例化一个

```
LM_Review_Model_Resource_Review_Summary_Collection 
```

这意味着

1.  Magento 看不到您的模块（没有`app/etc/module`文件，或文件处于非活动状态，或文件指向错误的代码池）

2.  `LM/Review/Model/Resource/Review/Summary/Collection.php`您的代码池中没有文件

3.  中定义的类`Collection.php`不是`LM_Review_Model_Resource_Review_Summary_Collection`

4.  中定义的类`Collection.php`不扩展`Mage_Review_Model_Resource_Review_Summary_Collection`

5.  检查类名和路径名的拼写和大写/小写。这对 Magento 很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T09:11:08.523

我发现了问题。它需要将资源模型添加到 xml 而不仅仅是重写它。

```
<global>
    <models>
        <review>
            <resourceModel>review_resource</resourceModel>
        </review>
        <review_resource>
            <rewrite>
                <review_summary_collection>LM_Review_Model_Resource_Review_Summary_Collection</review_summary_collection>
            </rewrite>
        </review_resource>
    </models>
</global> 
```

# sql - 从第二个表中获取最后一条记录

> ID：15906534
> 
> 赞同：0
> 
> 时间：2013-04-09T15:47:04.210
> 
> 标签：sql, oracle

我是 Oracle SQL 的新手，所以请耐心等待。

我有两张桌子：

```
Contaiers:
===========
eq_nbr,
size,
date

Gate Transactions (gate_tran):
==================
eq_nbr,
date,
trucker_id 
```

每个容器有很多门事务，所以我需要特定 eq_nbr 的最后一条记录。

我在想类似的东西：

```
select ct.eq_nbr, ct.size, ct.date,
  (select trucker_id last over (partition by gt.eq_nbr) from gate_tran gt where 
    gt.eq_nbr = ct.eq_nbr)
from
  containers ct 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:54:13.407

```
select *
  from (select ct.eq_nbr, ct.size, gt.date, gt.trucker_id,
               row_number() over (partition by ct.eq_nbr order by gt.date desc ) rn
          from containers ct
               inner join gate_tran gt on gt.eq_nbr = ct.eq_nbr)
 where rn = 1; 
```

将获得每个 eq_nbr 的最新日期。例如[http://sqlfiddle.com/#!4/5f52f/1](http://sqlfiddle.com/#!4/5f52f/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:57:31.803

嗨，您总是可以使用最近添加的日期。您可以这样做：

select ct.eq_nbr,ct.size,ct.date from gate_tran gt 内部连接容器 ct where gt.eq_nbr = ct.eq_nbr and date=(select max(date) from gate_tran)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:54:22.667

```
select
  eq_nbr, ct.size, ct.date,
  max(gt.date) as last_date,
  min(trucker_id) keep (dense_rank first order by gt.date desc) as last_trucker_id
from
  containers ct
  join gate_trans gt using(eq_nbr) 
group by eq_nbr, ct.size, ct.date 
```

[感谢DazzaL](http://sqlfiddle.com/#!4/68e83/1)
准备了一个计划 :-)

# cmd - psexec 给系统找不到指定的文件

> ID：15906536
> 
> 赞同：4
> 
> 时间：2013-04-09T15:47:08.250
> 
> 标签：cmd, remote-desktop, psexec

我正在尝试从我的 win7 CMD（作为管理员）运行它：

```
psexec IpAddress -u domain\user -p pword c:\Autobatch\ClientJobSender.exe http://reportserver.net:8070/JobExecutor.asmx c:\AutoBatch\backup\trigger.xml 
```

但我收到“系统找不到指定的文件”错误。

我也试过这样：

```
psexec IpAddress -u domain\user -p pword c:\Autobatch\ClientJobSender.exe http://reportserver.net:8070/JobExecutor.asmx c:\AutoBatch\backup\trigger.xml 
```

但获取未知用户或密码错误。

奇怪的是，我可以通过具有相同 IP 地址和用户/密码的远程桌面进行连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T10:35:07.000

确保服务器具有以下设置：

```
a) Admin share is enabled: run services.msc and check the Service "Server" is enabled
b) Add the key for the share in the registry and restart:
reg add "HKLM\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters" /v AutoShareServer /t REG_DWORD /d 1 
```

然后使用：

```
psexec \\IpAddress -u domain\user -p pword -w "c:\Autobatch" "ClientJobSender.exe http://reportserver.net:8070/JobExecutor.asmx c:\AutoBatch\backup\trigger.xml" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T17:50:32.017

实际上，我看不出您的 2 个命令行之间有什么区别。但是，第一个命令的错误是因为您的语法不正确。你必须使用

```
PsExec \\a.b.c.d ... 
```

代替

```
PsExec a.b.c.d ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-27T02:18:50.857

我通过提升本地批处理文件以管理员权限执行它来工作，也就是说，终端窗口以管理员权限运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-08T10:09:49.287

如果您尝试使用自动化服务，您可以在本地计算机（或您设置计划的计算机上）使用 ClientJobSender.exe。只需将 ClientJobSender.exe 和相关配置文件从安装包复制到调度程序服务器并在本地引用。

# c# - 将通用属性附加到 ASP.NET MVC 中的所有视图

> ID：15906540
> 
> 赞同：0
> 
> 时间：2013-04-09T15:47:10.597
> 
> 标签：c#, asp.net-mvc

我已经实现了授权过滤器来检查用户是否可以访问视图。除此之外，还有一个只读属性需要附加到应用程序中的视图。

是 context.Items 将只读属性存储在授权过滤器中以在控制器中检索它的唯一方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:52:19.370

要访问所有视图中的属性，您可以从[WebViewPage](http://msdn.microsoft.com/en-us/library/system.web.mvc.webviewpage%28v=vs.98%29.aspx)继承并在视图 web.config 中引用它。

要访问所有控制器中的属性，请使用您想要的逻辑构建一个基本控制器并继承所有应用程序控制器中的基本控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:48:31.053

如果您至少使用 MVC3，那么您可以使用`ViewBag`：

```
filterContext.Controller.ViewBag.MyVariable = "some data"; 
```

# python - 来自python的OpenCV中的随机树

> ID：15906543
> 
> 赞同：3
> 
> 时间：2013-04-09T15:47:17.667
> 
> 标签：python, opencv

根据文档（开放 CV 版本 2.4），我可以使用 python 中的随机树集合（[http://docs.opencv.org/modules/ml/doc/random_trees.html](http://docs.opencv.org/modules/ml/doc/random_trees.html)）

导入 cv2 后，我可以看到变量 cv2.RTree，但它没有任何方法或属性（例如 train 方法）。

包裹在哪里以及如何使用它（如果有的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T14:27:10.580

您绝对可以在 python 中使用来自 OpenCV 的随机树。cv2.RTree 是构造函数，所以你基本上只需要这样说：

```
forest = cv2.RTree(...) 
```

哪里 ... 是你的论点。当您只想使用默认参数运行时，您可以省略这些。无论如何，*森林*对象现在允许您进行训练和预测。如果您查看帮助文档，请使用

```
help(cv2.RTree) 
```

你会看到它说：

```
RTrees() -> <RTrees object> 
```

并且 help(RTrees()) 给出：

```
class RTrees(StatModel)
 |  Method resolution order:
 |      RTrees
 |      StatModel
 |      __builtin__.object
 |  
 |  Methods defined here:
 |  
 |  __repr__(...)
 |      x.__repr__() <==> repr(x)
 |  
 |  clear(...)
 |      clear() -> None
 |  
 |  getVarImportance(...)
 |      getVarImportance() -> retval
 |  
 |  predict(...)
 |      predict(sample[, missing]) -> retval
 |  
 .... 
```

我知道阅读 cv2 python 文档通常很困难，但最终你会掌握它的窍门。基本上，该文档只是告诉您 RTrees() 将构造对象，并且一旦构造，您将获得一个具有您正在寻找的方法的对象。所以，回到具体的例子，一旦你创建了森林，你可以调用：

```
forest.train(...)
forest.predict(...) 
```

使用您的数据矩阵。如果您需要个别方法的帮助，您现在可以询问以下内容：

```
help(forest.train) 
```

虽然，cv2 帮助文档在 python 中通常有点迟钝。如果您还没有使用它，我建议您使用 ipython ( [http://ipython.org](http://ipython.org) )，因为它使试用过程变得非常简单。

祝你好运。

# windows-7 - 无法在 Windows 7 上启动 JBoss 5.1 GA

> ID：15906545
> 
> 赞同：0
> 
> 时间：2013-04-09T15:47:22.430
> 
> 标签：windows-7, jboss5.x

我不知道我在这里做错了什么。

![在此处输入图像描述](https://i.stack.imgur.com/nLRaf.png)

```
C:\Program Files\JBOSS\jboss-5.1.0.GA\bin>run.bat
Calling C:\Program Files\JBOSS\jboss-5.1.0.GA\bin\run.conf.bat
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: C:\Program Files\JBOSS\jboss-5.1.0.GA

  JAVA: C:\Program Files\Java\jdk1.6.0_34\bin\java

  JAVA_OPTS: -Dprogram.name=run.bat -Xms128M -Xmx512M -XX:MaxPermSize=256M -Dsun
.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Dorg
.jboss.resolver.warning=true -server

  CLASSPATH: C:\Program Files\JBOSS\jboss-5.1.0.GA\bin\run.jar

===============================================================================

log4j:ERROR Failed to create directory structure: C:\Program Files\JBOSS\jboss-5
.1.0.GA\server\default\log
log4j:ERROR setFile(null,false) call failed.
java.io.FileNotFoundException: C:\Program Files\JBOSS\jboss-5.1.0.GA\server\defa
ult\log\boot.log (The system cannot find the path specified)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:116)
        at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:2
56)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.j
ava:132)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.j
ava:96)
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigura
tor.java:654)
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigura
tor.java:612)
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyC
onfigurator.java:509)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurato
r.java:415)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurato
r.java:441)
        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionCon
verter.java:470)
        at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
        at org.jboss.logging.log4j.Log4jLoggerPlugin.init(Log4jLoggerPlugin.java
:70)
        at org.jboss.logging.Logger.getDelegatePlugin(Logger.java:603)
        at org.jboss.logging.Logger.<init>(Logger.java:119)
        at org.jboss.logging.Logger.getLogger(Logger.java:567)
        at org.jboss.bootstrap.AbstractServerImpl.doInit(AbstractServerImpl.java
:204)
        at org.jboss.bootstrap.AbstractServerImpl.init(AbstractServerImpl.java:1
73)
        at org.jboss.bootstrap.AbstractServerImpl.init(AbstractServerImpl.java:1
43)
        at org.jboss.Main.boot(Main.java:218)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
11:42:08,937 INFO  [ServerImpl] Starting JBoss (Microcontainer)...
11:42:08,938 INFO  [ServerImpl] Release ID: JBoss [The Oracle] 5.1.0.GA (build:
SVNTag=JBoss_5_1_0_GA date=200905221634)
11:42:08,939 INFO  [ServerImpl] Bootstrap URL: null
11:42:08,939 INFO  [ServerImpl] Home Dir: C:\Program Files\JBOSS\jboss-5.1.0.GA
11:42:08,940 INFO  [ServerImpl] Home URL: file:/C:/Program%20Files/JBOSS/jboss-5
.1.0.GA/
11:42:08,940 INFO  [ServerImpl] Library URL: file:/C:/Program%20Files/JBOSS/jbos
s-5.1.0.GA/lib/
11:42:08,942 INFO  [ServerImpl] Patch URL: null
11:42:08,942 INFO  [ServerImpl] Common Base URL: file:/C:/Program%20Files/JBOSS/
jboss-5.1.0.GA/common/
11:42:08,943 INFO  [ServerImpl] Common Library URL: file:/C:/Program%20Files/JBO
SS/jboss-5.1.0.GA/common/lib/
11:42:08,944 INFO  [ServerImpl] Server Name: default
11:42:08,944 INFO  [ServerImpl] Server Base Dir: C:\Program Files\JBOSS\jboss-5.
1.0.GA\server
11:42:08,945 INFO  [ServerImpl] Server Base URL: file:/C:/Program%20Files/JBOSS/
jboss-5.1.0.GA/server/
11:42:08,946 INFO  [ServerImpl] Server Config URL: file:/C:/Program%20Files/JBOS
S/jboss-5.1.0.GA/server/default/conf/
11:42:08,946 INFO  [ServerImpl] Server Home Dir: C:\Program Files\JBOSS\jboss-5.
1.0.GA\server\default
11:42:08,947 INFO  [ServerImpl] Server Home URL: file:/C:/Program%20Files/JBOSS/
jboss-5.1.0.GA/server/default/
11:42:08,947 INFO  [ServerImpl] Server Data Dir: C:\Program Files\JBOSS\jboss-5.
1.0.GA\server\default\data
11:42:08,948 INFO  [ServerImpl] Server Library URL: file:/C:/Program%20Files/JBO
SS/jboss-5.1.0.GA/server/default/lib/
11:42:08,949 INFO  [ServerImpl] Server Log Dir: C:\Program Files\JBOSS\jboss-5.1
.0.GA\server\default\log
11:42:08,949 INFO  [ServerImpl] Server Native Dir: C:\Program Files\JBOSS\jboss-
5.1.0.GA\server\default\tmp\native
11:42:08,950 INFO  [ServerImpl] Server Temp Dir: C:\Program Files\JBOSS\jboss-5.
1.0.GA\server\default\tmp
11:42:08,951 INFO  [ServerImpl] Server Temp Deploy Dir: C:\Program Files\JBOSS\j
boss-5.1.0.GA\server\default\tmp\deploy
11:42:09,548 INFO  [ServerImpl] Starting Microcontainer, bootstrapURL=file:/C:/P
rogram%20Files/JBOSS/jboss-5.1.0.GA/server/default/conf/bootstrap.xml
11:42:10,125 INFO  [VFSCacheFactory] Initializing VFSCache [org.jboss.virtual.pl
ugins.cache.CombinedVFSCache]
11:42:10,129 INFO  [VFSCacheFactory] Using VFSCache [CombinedVFSCache[real-cache
: null]]
11:42:10,409 INFO  [CopyMechanism] VFS temp dir: C:\Program Files\JBOSS\jboss-5.
1.0.GA\server\default\tmp
11:42:10,411 INFO  [ZipEntryContext] VFS force nested jars copy-mode is enabled.

11:42:10,667 ERROR [AbstractKernelController] Error installing to Create: name=A
spectManager state=Configured
java.io.FileNotFoundException: Failed to create tmpClassesDir: C:\Program Files\
JBOSS\jboss-5.1.0.GA\server\default\tmp\aopdynclasses
        at org.jboss.aop.asintegration.core.AspectManagerServiceDelegate.create(
AspectManagerServiceDelegate.java:237)
        at org.jboss.aop.deployers.AbstractAspectManager.create(AbstractAspectMa
nager.java:89)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(Reflec
tionUtils.java:59)
        at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(
ReflectMethodInfoImpl.java:150)
        at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethod
JoinPoint.java:66)
        at org.jboss.kernel.plugins.dependency.KernelControllerContextAction$Joi
npointDispatchWrapper.execute(KernelControllerContextAction.java:241)
        at org.jboss.kernel.plugins.dependency.ExecutionWrapper.execute(Executio
nWrapper.java:47)
        at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dis
patchExecutionWrapper(KernelControllerContextAction.java:109)
        at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dis
patchJoinPoint(KernelControllerContextAction.java:70)
        at org.jboss.kernel.plugins.dependency.LifecycleAction.installActionInte
rnal(LifecycleAction.java:221)
        at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction
(InstallsAwareAction.java:54)
        at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction
(InstallsAwareAction.java:42)
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.sim
pleInstallAction(SimpleControllerContextAction.java:62)
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.ins
tall(AccessControllerContextAction.java:71)
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install
(AbstractControllerContextActions.java:51)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:774)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:540)
        at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deployBean
(AbstractKernelDeployer.java:319)
        at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deployBean
s(AbstractKernelDeployer.java:297)
        at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deploy(Abs
tractKernelDeployer.java:130)
        at org.jboss.kernel.plugins.deployment.BasicKernelDeployer.deploy(BasicK
ernelDeployer.java:76)
        at org.jboss.bootstrap.microcontainer.TempBasicXMLDeployer.deploy(TempBa
sicXMLDeployer.java:91)
        at org.jboss.bootstrap.microcontainer.TempBasicXMLDeployer.deploy(TempBa
sicXMLDeployer.java:161)
        at org.jboss.bootstrap.microcontainer.ServerImpl.doStart(ServerImpl.java
:138)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:
450)
        at org.jboss.Main.boot(Main.java:221)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
11:42:11,350 INFO  [ServerInfo] Java version: 1.6.0_34,Sun Microsystems Inc.
11:42:11,350 INFO  [ServerInfo] Java Runtime: Java(TM) SE Runtime Environment (b
uild 1.6.0_34-b04)
11:42:11,351 INFO  [ServerInfo] Java VM: Java HotSpot(TM) 64-Bit Server VM 20.9-
b04,Sun Microsystems Inc.
11:42:11,352 INFO  [ServerInfo] OS-System: Windows 7 6.1,amd64
11:42:11,353 INFO  [ServerInfo] VM arguments: -Dprogram.name=run.bat -Xms128M -X
mx512M -XX:MaxPermSize=256M -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dg
c.server.gcInterval=3600000 -Dorg.jboss.resolver.warning=true -Djava.endorsed.di
rs=C:\Program Files\JBOSS\jboss-5.1.0.GA\lib\endorsed
11:42:11,384 INFO  [JMXKernel] Legacy JMX core initialized
Failed to boot JBoss:
java.lang.IllegalStateException: Incompletely deployed:

DEPLOYMENTS IN ERROR:
  Deployment "AspectManager" is in error due to: java.io.FileNotFoundException:
Failed to create tmpClassesDir: C:\Program Files\JBOSS\jboss-5.1.0.GA\server\def
ault\tmp\aopdynclasses

DEPLOYMENTS MISSING DEPENDENCIES:
  Deployment "JMXStartStopAdvice$AspectBinding" is missing the following depende
ncies:
    Dependency "AspectManager" (should be in state "Installed", but is actually
in state "**ERROR**")
  Deployment "BeansDeploymentAopMetaDataDeployer" is missing the following depen
dencies:
    Dependency "AspectManager" (should be in state "Installed", but is actually
in state "**ERROR**")
    Dependency "jboss.kernel:service=Kernel" (should be in state "Installed", bu
t is actually in state "**ERROR**")
  Deployment "AOPDeploymentAopMetaDataDeployer" is missing the following depende
ncies:
    Dependency "AspectManager" (should be in state "Installed", but is actually
in state "**ERROR**")
    Dependency "jboss.kernel:service=Kernel" (should be in state "Installed", bu
t is actually in state "**ERROR**")
  Deployment "AOPClassLoaderDeployer" is missing the following dependencies:
    Dependency "AspectManager" (should be in state "Installed", but is actually
in state "**ERROR**")
  Deployment "JMXRegistrationAdvice$AspectBinding" is missing the following depe
ndencies:
    Dependency "AspectManager" (should be in state "Installed", but is actually
in state "**ERROR**")
  Deployment "AspectManagerJMXRegistrar" is missing the following dependencies:
    Dependency "AspectManager" (should be in state "Installed", but is actually
in state "**ERROR**")
  Deployment "JMXCreateDestroyAdvice$AspectBinding" is missing the following dep
endencies:
    Dependency "AspectManager" (should be in state "Installed", but is actually
in state "**ERROR**")

        at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.internalVa
lidate(AbstractKernelDeployer.java:278)
        at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.validate(A
bstractKernelDeployer.java:174)
        at org.jboss.bootstrap.microcontainer.ServerImpl.doStart(ServerImpl.java
:142)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:
450)
        at org.jboss.Main.boot(Main.java:221)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
11:42:13,576 INFO  [ServerImpl] Runtime shutdown hook called, forceHalt: true
11:42:13,582 INFO  [ServerImpl] Shutdown complete
Shutdown complete
Halting VM
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T07:10:50.743

看起来像 JRE 和操作系统版本的某些特定组合发生的错误（请参阅[https://jira.jboss.org/jira/browse/JBAS-6981](https://jira.jboss.org/jira/browse/JBAS-6981)）。基本上，JBoss config 是依靠反射以一定的顺序返回构造函数，在某些情况下这个顺序是不同的，导致异常。重新安装时是否更改了 JRE 版本，例如从 1.6.0_17 到 _18？

无论如何，解决方法在 JIRA 问题和这里都有描述。您需要更改 conf/bootstrap/profile.xml 的内容。查找 AttachmentStore 的定义，并更改构造函数行以使其启动：

原始版本没有 class="java.io.File" 属性。

JBoss 的人相当草率，但你去吧。希望能帮助到你。

[（从错误启动 jboss 服务器](https://stackoverflow.com/questions/2489106/error-starting-jboss-server)复制）

# python - 如何处理 AllServersUnavailable 异常

> ID：15906550
> 
> 赞同：2
> 
> 时间：2013-04-09T15:47:46.210
> 
> 标签：python, cassandra, pycassa

我想对单个节点上的 Cassandra 实例（v1.1.10）进行简单的写入操作。我只是想看看它如何处理持续写入，以及它是否能跟上写入速度。

```
pool = ConnectionPool('testdb')
test_cf = ColumnFamily(pool,'test')
test2_cf = ColumnFamily(pool,'test2')
test3_cf = ColumnFamily(pool,'test3')
test_batch = test_cf.batch(queue_size=1000)
test2_batch = test2_cf.batch(queue_size=1000)
test3_batch = test3_cf.batch(queue_size=1000)

chars=string.ascii_uppercase
counter = 0
while True:
    counter += 1
    uid = uuid.uuid1()
    junk = ''.join(random.choice(chars) for x in range(50))
    test_batch.insert(uid, {'junk':junk})
    test2_batch.insert(uid, {'junk':junk})
    test3_batch.insert(uid, {'junk':junk})
    sys.stdout.write(str(counter)+'\n')

pool.dispose() 
```

长时间写入后（当计数器约为 10M+ 时），代码不断崩溃，并显示以下消息

`pycassa.pool.AllServersUnavailable: An attempt was made to connect to each of the servers twice, but none of the attempts succeeded. The last failure was timeout: timed out`

我设置了`queue_size=100`这没有帮助。`cqlsh -3`此外，在脚本崩溃并出现以下错误后，我启动了控制台以截断表格：

`Unable to complete request: one or more nodes were unavailable.`

Tailing`/var/log/cassandra/system.log`没有给出错误信号，但有关于 Compaction、FlushWriter 等的 INFO。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T08:54:31.243

我也遇到过这个问题——正如@tyler-hobbs 在他的评论中所建议的那样，节点可能已经超载（这是给我的）。我使用的一个简单修复方法是后退并让节点赶上。我已经重写了你上面的循环来捕捉错误，睡一会儿再试一次。我已经在一个单节点集群上运行了这个，它很有效——暂停（一分钟）并定期退出（连续不超过 5 次）。使用此脚本不会丢失任何数据，除非错误连续抛出五次（在这种情况下，您可能希望失败而不是返回循环）。

```
while True:
  counter += 1
  uid = uuid.uuid1()
  junk = ''.join(random.choice(chars) for x in range(50))
  tryCount = 5 # 5 is probably unnecessarily high
  while tryCount > 0:
    try:
      test_batch.insert(uid, {'junk':junk})
      test2_batch.insert(uid, {'junk':junk})
      test3_batch.insert(uid, {'junk':junk})
      tryCount = -1
    except pycassa.pool.AllServersUnavailable as e:
      print "Trying to insert [" + str(uid) + "] but got error " + str(e) + " (attempt " + str(tryCount) + "). Backing off for a minute to let Cassandra settle down"
      time.sleep(60) # A delay of 60s is probably unnecessarily high
      tryCount = tryCount - 1
  sys.stdout.write(str(counter)+'\n') 
```

我在[这里添加了一个完整的要点](https://gist.github.com/lorcan/6548266)

# mongodb - 具有 AND 子句的 MongoDb 查询 OR 子句

> ID：15906555
> 
> 赞同：1
> 
> 时间：2013-04-09T15:48:01.730
> 
> 标签：mongodb, mongodb-php, mongodb-query

是否可以编写包含 AND 子句的 OR 子句。

例如，我需要对字段 field1、field2、field3 和 field4 编写查询。

```
Query should be field1 or field2 or (filed3 and field4) 
```

.

有人可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:02:48.497

下面是一个简单的查询示例，如果 field1 > 1 OR field2 > 1 OR fields 3 和 4 > 1，则该查询将匹配：

```
{
   "$or" : [
             { "field1" : {"$gte" : 1} },
             { "field2" : {"$gte" : 1} },
             { 
               "$and" : [
                           { "field3" : {"$gte" : 1} },
                           { "field3" : {"$gte" : 1} }
                         ]
             }
           ]
} 
```

只需将子查询切换到您的需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T17:50:20.360

嗯，更简单的方法是：

```
{
   "$or" : [
             { "field1" : {"$gte" : 1} },
             { "field2" : {"$gte" : 1} },
             { "field3" : {"$gte" : 1}, "field4" : {"$gte" : 1} }
           ]
} 
```

这是因为单个`$or`子句中的数组元素实际上是`$and`. 这将比使用以`$and`不同方式评估的显式具有更高的性能。

# bash - 如何在 awk 脚本中将一列转换为日期格式？

> ID：15906557
> 
> 赞同：3
> 
> 时间：2013-04-09T15:48:07.810
> 
> 标签：bash, date, awk

```
cat test.txt | 
 awk 'BEGIN { FS = "\t" } ;{ print  $44=strftime("%d %b %Y",$44)  "\t" $44 }' 
```

我收到了：

```
 31 12 1969      2012-09-27 
```

但我已经预料到：

```
 27 Sep 2012      2012-09-27 
```

错误在哪里？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:55:45.910

如果您真的想使用 awk 内置函数转换格式，此示例可能会对您有所帮助：

```
kent$  echo "2012-09-27" |awk '{t=$0;gsub("-"," ",t);print strftime("%d %b %Y", mktime(t" 00 00 00"))}' 
27 Sep 2012 
```

阅读手册页中以下功能的描述：

```
 mktime(datespec)
 strftime([format [, timestamp[, utc-flag]]]) 
```

**编辑**尝试修复你的旧命令，但没有输入文件，无法测试它......

```
 awk 'BEGIN {FS=OFS="\t"}{t=$44;gsub("-"," ",t); print strftime("%d %b %Y", mktime(t" 00 00 00")),$44}' test.txt 
```

# design-patterns - 为什么装饰器是一种结构性而非行为性的设计模式？

> ID：15906563
> 
> 赞同：11
> 
> 时间：2013-04-09T15:48:21.693
> 
> 标签：design-patterns, conceptual

我认为自己对 GoF 设计模式有中级知识。但是，在将这些模式分类为结构模式和行为模式时，我感到困惑。我对创建模式没有任何困惑。

来自维基百科 - 装饰器模式 -*在面向对象的编程中，装饰器模式是一种设计模式，它允许将**行为**静态或动态添加到单个对象，而不会影响同一类中其他对象的行为。*

从上面的定义可以清楚地看出它是关于行为的，那么

1.  为什么装饰器是结构模式？
2.  结构模式的标准是什么？
3.  行为模式的标准是什么？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T16:21:51.537

行为模式是关于不同对象之间的通信：诸如调解者、观察者、责任链（甚至访问者，这被描述为“将算法与其操作的对象结构分离”）。它们指定单独的对象如何交互。

结构模式是关于组合和分层抽象的方法，它们是适配器、桥接和组合之类的东西。装饰器是一种组合功能的技术，因此它与结构模式一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:52:19.080

如果您在报价方面需要答案：行为的变化是由于**结构**修改。
即你“装饰”一个对象（通过你的类的特定结构）来实现所需的行为（通过委托）

# c# - 使用元数据和/或反射来生成 ASP.NET 工具提示？

> ID：15906570
> 
> 赞同：0
> 
> 时间：2013-04-09T15:48:41.573
> 
> 标签：c#, asp.net, reflection, tooltip, metadata

使用 C#/ASP.NET，我想知道是否有一种方法可以使用元数据轻松生成标签和文本框的工具提示。我找到了很多关于如何在 ASP.NET MVC 中执行此操作的资源，但不是普通的 ASP.NET。我尝试过使用各种`Display`属性`Description`，但没有成功。有没有一种简单的方法来自动化这个？

例如，当鼠标悬停在生成的网页上的`asp:Label`或`asp:TextBox`对应的或对应时，我想使用如下代码显示“发送应用程序的日期”。`DateSent`

```
public class ProjectMetadata
{
    [Required(ErrorMessage = "Enter a date")]
    [Description("Date that the application was sent")]
    public object DateSent { get; set; }

    [Required(ErrorMessage = "Enter a description")]
    [StringLength(256, ErrorMessage="Description must be 256 characters or less")]
    public object Description { get; set; }
}

[MetadataType(typeof(ProjectMetadata))]
public partial class Project
{
    public DateTime DateSent { get; set; }
    public string Description { get; set; }
} 
```

**编辑** 请注意，目前我让 ASP.NET 完成所有在页面上生成控件的工作（在代码隐藏中没有做任何事情）：

```
<asp:TextBox ID="tbDateSent" runat="server" Text='<%# Bind("DateSent", "{0:d}") %>'/>

<asp:Label ID="LabelDateSent" runat="server" Text='<%# Eval("DateSent", "{0:d}") %>'/> 
```

也许这是我需要添加的地方：`ToolTip='<%# SomeExpressionHere %>'`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:54:44.737

您如何填充您的 .NET 控件？我猜是这样的：

```
Project project = GetProject();

// TextboxProjectName is your TextBox on your Page / UserControl

TextboxProjectDescription.Text = project.Description; 
TextboxProjectDescription.Attributes["data-tooltip"] = project.DateSent.ToShortDateString(); // Or whatever format you want 
```

然后你会有这个标记：

```
<input type="text" data-tooltip="Your date string" /> 
```

然后，您可以简单地使用 jQuery Tooltip 库来提示找到 data("tooltip") 的所有 HTML 元素。

**编辑**

尝试这个：

```
[MetadataType(typeof(ProjectMetadata))]
public partial class Project
{
    public DateTime DateSent { get; set; }
    public string Description { get; set; }
    public string TooltipText 
    { 
       get {
           return "Date: " + DateSent.ToShortDateString(); // whatever tooltip you want
       }
       set {}
    }
} 
```

然后你可以按照要求做：

```
<asp:TextBox ID="tbDateSent" runat="server" Text='<%# Bind("DateSent", "{0:d}") %>'
ToolTip='<%# Bind("TooltipText") %>' /> 
```

# php - 网站到 POS 打印机

> ID：15906572
> 
> 赞同：2
> 
> 时间：2013-04-09T15:48:43.153
> 
> 标签：php, web-services, web-applications, printing, point-of-sale

我正在寻找 POS 打印的解决方案。

场景是：

一家餐厅目前有一个 POS 系统启动并运行，他们从店内的 iPad 上接受订单，并有一个网络设置来处理订单并在厨房的热敏打印机上自动打印出来（很酷，对吧？）。无论如何，这家餐厅还有一个在线订购网站（用 PHP 编写），必须通过电子邮件手动检查。餐厅希望他们的在线系统自动将每个订单发送到打印机。

我必须补充一点，我没有参与他们网站的开发或他们的内部订购系统。我以前没有使用 PHP 到 POS 系统 - 有可能吗？将数据从网站表单自动发送到 POS 打印机的替代解决方案有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:52:35.370

php 网站上的 Web 服务，带有用于处理或未处理的状态标志。每 x 分钟从内部应用程序/内部应用程序查询 Web 服务（1 可能就足够了）列出所有未处理的订单并在检索到时将它们标记为已处理（黑客但就足够了）

c#/java/c++ 等将最好避免基于 Web 的问题，无法访问本地打印机接口/队列应用程序只需从 Web 服务取回结果集并格式化/打印它。

相当简单的大约 20 行 php 或许不到 100k 的 c# 就可以很好地完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:00:06.960

我会少考虑打印机，多考虑如何与他们使用的 POS 软件交互。找出制造商、产品名称和版本号（如果可以的话）。然后与该制造商联系，看看他们是否有可以连接的 SDK 或 API。

当涉及到实际将其连接到网站时，我不会直接从您的 PHP 页面调用他们的 POS 系统。即使可能，这种紧密耦合也意味着如果 POS 系统脱机或无法访问，则该网站将被破坏。

相反，使用数据库或排队系统来存储来自网站的订单。编写一小部分中间件（例如守护程序或服务），这些中间件将从数据库或队列中读取，并使用其 SDK 或 API 向 POS 系统提供订单。

从长远来看，保持这些系统解耦将为您节省大量时间和金钱。没有它，您肯定会遇到可伸缩性问题。

想一想——如果你确实直接写信给打印机，如果两个订单同时进来会发生什么？两张订单的数据是否会出现乱码？一个订单会失败而另一个订单通过吗？这比您想象的更有可能，因为餐厅在高峰时段往往很忙。去问那些在周日超级碗披萨外卖店工作的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:59:43.970

如果 Tablet 应用程序真的是通过 WIFI 连接到已配置的网络打印机，并且打印机只是网络连接的，并且没有其他 PC，那么这意味着您还有更多工作要做。您可以采取几种方法。无论哪种方式，您都必须在现场拥有一台 PC。如果您可以从网络浏览器打印到本地网络上的网络打印机，那么您就有了一个简单的方法。如果您设置具有 Web 应用程序访问权限的 PC，则可以在本地网络上配置相同的网络打印机，然后只需创建一个带有样式表 media=print 的 html 页面，该页面会适当地格式化订单，然后单击按钮时调用 javascript print应该这样做。这需要PC登录到网站，以及管理订单并单击打印以使用标准方法将订单数据发送到打印机的人员。第二种方法是识别打印机制造商，下载打印机型号的 POS 驱动程序并编写一个类来处理获取、排队和向打印机发放发票，然后创建一个计划作业，将订单写入打印机，类似到服务。这也需要现场的 PC，但不需要人员监控订单和打印队列。第二种方法将花费客户更多的资金来开发。然后创建一个计划作业，将订单写入打印机，类似于服务。这也需要现场的 PC，但不需要人员监控订单和打印队列。第二种方法将花费客户更多的资金来开发。然后创建一个计划作业，将订单写入打印机，类似于服务。这也需要现场的 PC，但不需要人员监控订单和打印队列。第二种方法将花费客户更多的资金来开发。

# scala - 如何修改数组中的每个值？

> ID：15906575
> 
> 赞同：2
> 
> 时间：2013-04-09T15:49:03.403
> 
> 标签：scala

我想更改多维数组中的所有值，但收到“重新分配给 val”错误。

斯卡拉代码：

```
var cal = Array.ofDim[Double](300, 10000000);
cal.foreach(x => {
    x.foreach({o => o = 5.1} //here it'll be more complicated code 
)}); 
```

有没有人知道如何重新分配 Array 中的值？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T16:12:54.370

`transform`在[可变序列](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.Seq)上有就地修改批量操作。

```
for (y <- 0 until cal.length) {
  cal(y).transform(x => 5.1)
} 
```

你也可以这样做：

```
for (y <- 0 until cal.length) {
  val row = cal(y)
  for (x <- 0 until row.length) {
    row(x) = 5.1
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:07:26.453

我不确定这是否是最好的方法，但它有效：

```
 val cal = Array.ofDim[Double](300, 10000000) 
  (0 until cal.length).foreach(rowIndex => {
     val row = cal(rowIndex)
     (0 until row.length).foreach(colIndex => {
        row(colIndex) = 5.1 //here it'll be more complicated code
     })
  }) 
```

您收到错误的原因是您试图将值分配给`o`.`o => o = 5.1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:07:05.113

由于您的使用`var`，您可以简单地

```
var cal = Array.ofDim[Double](300, 10000000);
cal = cal.map{
  a=>a.map{
    o=> 1.5 \\complex calculations 
  }
} 
```

**注意：**这不是惯用的 scala 甚至不是功能性的，但它确实有效。

# c++ - 将接口的一部分委托给 C++ 中的子类？

> ID：15906579
> 
> 赞同：5
> 
> 时间：2013-04-09T15:49:11.407
> 
> 标签：c++

我的代码中有一个相对复杂的接口，并且想将部分实现委托给另一个类，而无需在实现中编写大量转发函数。请参阅此简化的示例代码：

```
#include <stdio.h>

struct Interface {
    virtual void foo() = 0;
    virtual void bar() = 0;
    virtual ~Interface() {}
};

struct Delegate {
    virtual void foo()
    { printf("foo\n"); }
};

struct Impl : public Interface, private Delegate {
    // delegate foo to Delegate
    using Delegate::foo;

    void bar()
    { printf("bar\n"); }
};

int main() {
    Interface* i = new Impl();
    i->foo();
    i->bar();
    delete i;
    return 0;
} 
```

现在 G++ 抱怨*foo*没有在 Impl 中实现。然而，Impl 中有一个非常好的函数*foo*，它只是取自另一个父类。为什么编译器不能正确填写 vtable？

（注意：我知道在这个特定的示例中，Delegate 可以从 Interface 派生。我想了解是否可以委托功能而不必从接口派生委托。）

# visual-studio-2010 - 如何在 Visual Studio 2010 上配置 gtk

> ID：15906580
> 
> 赞同：21
> 
> 时间：2013-04-09T15:49:15.753
> 
> 标签：visual-studio-2010, visual-c++, configuration, gtk

我曾尝试在 Visual Studio 上配置 gtk+，但无法正常工作。，谁能建议我一个合适的解决方案，如如何在 Visual Studio 2010 上安装 gtk

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-07-16T23:16:35.120

我让 GTK+ 与 VS2010 一起工作，所以如果你也想让它工作，准备好享受一些乐趣，因为这需要几分钟。

首先，下载最新的[Windows All-In-One bundle](http://www.gtk.org/download/win32.php)。[我在这里](http://ftp.gnome.org/pub/gnome/binaries/win32/gtk+/2.24/gtk+-bundle_2.24.10-20120208_win32.zip)使用的 GTK 2.24 包的可选直接下载链接。直接链接是 32 位版本。我没有测试 64 位版本，因为它仍然被列为*实验性版本。*

下载捆绑包后，将其解压缩到类似`C:\gtk`或在我的情况下`D:\gtk`

接下来，我们将为 GTK 文件夹创建一个系统环境变量。打开命令提示符并写入：`setx GTKDIR {Path to your GTK folder} /m`在我的情况下是`setx GTKDIR D:\gtk /m`

我们还将添加 GTK+ 构建的应用程序在 Windows 上运行所需的 .dll 文件到我们的系统 PATH 中。为了让事情变得非常简单，我建议您使用[PathEditor](http://www.softpedia.com/get/System/System-Miscellaneous/Path-Editor.shtml)编辑您的系统 PATH 。现在将 GDK 二进制文件夹的路径添加到系统 PATH 中，在我的例子中是 D:\gtk\bin。通过在命令提示符中键入**PATH**来确认 GTK bin 文件夹已添加到 PATH 。

现在我们继续使用 Visual Studio 2010 并创建一个新项目。

```
File
  ->New
    ->Project
    Visual C++
      ->Win32
        ->Win32 Console Application 
```

然后出现应用程序向导。

单击选择：

```
Windows Application

Empty Project 
```

单击完成继续。

在我们添加任何源文件之前，右键单击**解决方案资源管理器**中的项目名称，然后单击**属性**。现在转到**Configuration Properties**，然后转到**VC++ Directories**。我们现在需要将 GTK 中的包含和库文件添加到**Include Directories**和**Library Directories**。

您的**包含目录中应该有以下内容**

```
$(GTKDIR)\lib\gtk-2.0\include
$(GTKDIR)\lib\glib-2.0\include
$(GTKDIR)\include 
```

和**图书馆目录**：

```
$(GTKDIR)\lib 
```

当我们仍在项目属性视图中时，单击**链接器**，然后单击**系统**。在右侧查找**SubSystem**并单击下拉框。选择**Windows /SUBSYSTEM:WINDOWS**

接下来，我们必须为编译器和链接器生成标志。幸运的是，GTK+ 附带了一个名为**pkg-config**的漂亮小工具，我们将使用它来自动为我们生成这些标志。pkg-config 工具可以在 GTK 的 bin 文件夹中找到。在我的情况下，这是**D:\gtk\bin**或**%GTKDIR%\bin**使用我们之前定义的系统变量。只需使用命令提示符导航到 bin 文件夹（创建的文本文件将在那里输出）并运行以下命令：

```
pkg-config --cflags gtk+-2.0 --msvc-syntax > compilerflags.txt 
```

这将创建我们需要的编译器标志并将它们存储在一个文本文件中。我的编译器标志结果（我已删除标志**-mms-bitfields**，这是我们不需要的仅 gcc 标志）：

```
-ID:/gtk/include/gtk-2.0 -ID:/gtk/lib/gtk-2.0/include -ID:/gtk/include/atk-1.0 -ID:/gtk/include/cairo -ID:/gtk/include/gdk-pixbuf-2.0 -ID:/gtk/include/pango-1.0 -ID:/gtk/include/glib-2.0 -ID:/gtk/lib/glib-2.0/include -ID:/gtk/include -ID:/gtk/include/freetype2 -ID:/gtk/include/libpng14 
```

我们将对链接器标志做同样的事情：

```
pkg-config --libs gtk+-2.0 --msvc-syntax > linkerflags.txt 
```

我的链接器标志结果：

```
/libpath:D:/gtk/lib gtk-win32-2.0.lib gdk-win32-2.0.lib atk-1.0.lib gio-2.0.lib pangowin32-1.0.lib gdi32.lib pangocairo-1.0.lib gdk_pixbuf-2.0.lib pango-1.0.lib cairo.lib gobject-2.0.lib gmodule-2.0.lib gthread-2.0.lib glib-2.0.lib intl.lib 
```

生成所有需要的标志后，我们需要将它们添加到我们的项目中。再次，右键单击项目名称，然后单击**Properties**。现在转到`C/C++`并单击`Command Line`。**在右侧，您应该会看到一个名为Additional Options**的空框。**将compilerflags.txt**内容复制并粘贴到此框中。

完成上述操作后，单击**Linker**，然后单击**Command Line**。再次，只需将**linkerflags.txt**文件的内容复制并粘贴到**Additional Options**框中。当我们在这里时，添加最后一个链接器标志**/ENTRY:mainCRTStartup**这个标志告诉 Visual Studio 我们想要使用标准的 main() 而不是 Microsoft 的 _tmain() 作为我们的主程序入口点。

最后，在 Source Files 文件夹中，创建并添加一个新的 .cpp 文件，其中包含以下内容：

```
#include <gtk-2.0\gtk\gtk.h>

int main(int argc, char* argv[])
{
    gtk_init(&argc, &argv);

    GtkWidget* window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_widget_set_usize(window, 300, 200);

    g_signal_connect(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);   
    gtk_window_set_title(GTK_WINDOW(window), "GTK+ with VS2010");

    gtk_widget_show(window);     

    gtk_main();   
    return 0;
} 
```

现在一切都应该准备好编译、链接和运行了。如果一切顺利，您应该会看到以下内容：![在此处输入图像描述](https://i.stack.imgur.com/vHlDz.jpg)

那很有趣，对吧？:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T20:26:41.890

如果您在像[这样](https://wiki.gnome.org/Projects/GTK+/Win32/MSVCCompilationOfGTKStack)的指南的帮助下在 Windows 上构建 GTK+ 堆栈，那么您将无法享受使用预编译二进制文件的乐趣。

在这种情况下，我建议采用以下方法。

1.  下载预编译的二进制文件 - 这有两个优点。

    *   这附带了 pkg-config.exe 实用程序，您可以将其用于已编译的源代码。
    *   这还包含 pkgconfig 文件夹，其中包含大量 .pc 文件，这些文件可以适应已编译的源代码。
2.  以调试/发布模式编译软件包——这是自己编译的主要优点——并系统地分别在 include、lib 和 bin 文件夹中安排头文件、libs 和 dlls/exe。

3.  将 pkgconfig 文件夹从 precompiled_gtk_source\bin 复制到 compiler_gtk_source\bin 并设置 PKG_CONFIG_PATH 变量的路径以将 compiler_gtk_source\bin\pkgconfig 添加到其中。

4.  现在，考虑到自己编译 gtk 时生成的库名称和预编译包中对应的库名称可能不同，您可能需要在 compiler_gtk_source\bin\pkgconfig*.pc 文件中进行必要的更改。我会在这里采用自上而下的方法（我们很快就会看到优势）。从上到下，我的意思是最终产品将是首先要编辑的产品。

    例如，在这种情况下，gtk+ 是最终产品，我将首先配置这个包的 .pc。程序如下：

    *   首先看创建的dll的名称。就我而言，它是 gtk-3.0。如果预编译二进制文件附带的 .pc 文件有另一个名称，则适当更改名称 - 在我的例子中是 gtk-3.0.pc。（这应该是所有其他 .pc 文件的情况。）
    *   在文本编辑器中打开 gtk-3.0.pc，您将看到如下内容。

**gtk-3.0.pc 文件：**

```
 prefix=c:/gtk_compilation/vs12/win32
    exec_prefix=${prefix}
    libdir=${exec_prefix}/lib
    includedir=${prefix}/include
    targets=win32

    Name: GTK+
    Description: GTK+ Graphical UI Library
    Version: 3.18.2
    Requires: gdk-3.0 atk-1.0 cairo cairo-gobject gdk_pixbuf-2.0 gio-2.0
    Requires.private: atk
    Libs: -L${libdir} -lgtk-3 
    Cflags: -I${includedir}/gtk-3.0 -mms-bitfields 
```

上面的一个是我的自定义文件。如果您不知道每一行的作用，您可以查看[pkg-config help](http://people.freedesktop.org/~dbn/pkg-config-guide.html)。然而，Require 选项需要特别提及。这是您放置依赖 dll 的地方 - 再次确保 dll 的名称与您在 bin 文件夹中的名称完全匹配。

5.  我们需要递归地更改**Require**语句之后包含的 dll 的 .pc 文件，如果缺少任何 .pcs 或名称不匹配，您可以进行适当的更改。到目前为止，您应该已经了解了自上而下方法的优势。它可以帮助我们系统地整理依赖 .pc 文件，直到我们将它们全部整理出来。现在，运行以下命令以查看是否正常。

6.  最后运行 pkg-config 命令，如下所示：

    `pkg-config --cflags gtk-3.0 --msvc-syntax > compilerflags.txt` `pkg-config --libs gtk+-2.0 --msvc-syntax > linkerflags.txt`

我只是将结果重定向到一个名为 compilerflags.txt & linkerflags.txt 的文本文件，以便您可以随时通过*剪切、复制和粘贴*来使用它们。当然，您应该只保留编译器特定的标志。

希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:34:17.367

看看这个[GTK+ 与 Visual Studio 2008 教程](http://www.tarnyko.net/en/?q=node/22)。

# java - 符号在 Eclipse 调试模式下渲染良好，但打印不正确

> ID：15906583
> 
> 赞同：0
> 
> 时间：2013-04-09T15:49:26.300
> 
> 标签：java, eclipse, excel, character-encoding

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:33:13.747

I've solved the issue for the € symbol, and many others, but it's still displaying the £ sign ~~a black hexagon with a central question mark~~ [Replacement Character](http://en.wikipedia.org/wiki/Replacement_character#Replacement_character).

I solved the issue with the € by setting the console output of eclipse to UTF-8.

`Project MenuBar -> Properties -> ResourceTab -> Text File Encoding ->Other ComboBox -> UTF-8`

# r - R中的日期时间转换，带小数秒

> ID：15906584
> 
> 赞同：6
> 
> 时间：2013-04-09T15:49:26.933
> 
> 标签：r, date, time

如何转换字符串

```
t <- c("00:00:0.00", "00:00:0.34") 
```

成一个数字？尝试了几种方法 - 但没有一个奏效..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T16:38:04.230

基本思想是将字符串转换为有效`POSIX*t`对象，然后将其转换为`numeric`值：

```
## Set a couple of printing options
options(digits = 12)
options(digits.secs = 3)

## Convert from character to POSIXlt to numeric
(a <- strptime(t, format="%H:%M:%OS", tz="GMT"))
# [1] "2013-04-09 00:00:00.00 GMT" "2013-04-09 00:00:00.34 GMT"
(b <- as.numeric(a))
# [1] 1365465600.00 1365465600.34 
```

请注意，当从 numeric 转换回 时`POSIX*t`，会出现浮点问题，这些问题会改变这些对象的打印方式。（[有关该问题的更多讨论，请参见此处。](https://stackoverflow.com/questions/7726034/how-r-formats-posixct-with-fractional-seconds)）

```
## It _looks_ like you've lost 1/100 second on the second time object
(c <- as.POSIXct(as.numeric(b), origin = "1970-01-01", tz="GMT"))
# [1] "2013-04-09 00:00:00.00 GMT" "2013-04-09 00:00:00.33 GMT"

## Here's a workaround for nicer printing.
as.POSIXct(as.numeric(b+1e-6), origin = "1970-01-01", tz="GMT")
# [1] "2013-04-09 00:00:00.00 GMT" "2013-04-09 00:00:00.34 GMT" 
```

# python - 在 python 中使用 numpy 出现“形状不匹配”错误

> ID：15906591
> 
> 赞同：2
> 
> 时间：2013-04-09T15:49:39.823
> 
> 标签：python, numpy

我正在尝试生成一个由 0 和 1 组成的随机数组，但出现错误：形状不匹配：无法将对象广播到单个形状。该错误似乎发生在该行中`randints = np.random.binomial(1,p,(n,n))`。这是功能：

```
import numpy as np

def rand(n,p):
    '''Generates a random array subject to parameters p and N.'''

    # Create an array using a random binomial with one trial and specified
    # parameters.
    randints = np.random.binomial(1,p,(n,n))

    # Use nested while loops to go through each element of the array
    # and assign True to 1 and False to 0.
    i = 0
    j = 0
    rand = np.empty(shape = (n,n),dtype = bool)
    while i < n:
        while j < n:
            if randints[i][j] == 0:
                rand[i][j] = False
            if randints[i][j] == 1:
                rand[i][j] = True
            j = j+1
        i = i +1
        j = 0

    # Return the new array.
    return rand

print rand 
```

当我自己运行它时，它会返回`<function rand at 0x1d00170>`. 这是什么意思？我应该如何将它转换为可以在其他函数中使用的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:04:49.873

你不必经历这一切，

```
 randints = np.random.binomial(1,p,(n,n)) 
```

产生你的数组`0`和`1`值，

```
 rand_true_false = randints == 1 
```

将产生另一个数组，只是将`1`s 替换为s`True`和`0`s替换为`False`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:21:18.713

显然，@danodonovan 的答案是最 Pythonic 的，但如果你真的想要更类似于循环代码的东西。这是一个更简单地修复名称冲突和循环的示例。

```
import numpy as np

def my_rand(n,p):
    '''Generates a random array subject to parameters p and N.'''

    # Create an array using a random binomial with one trial and specified
    # parameters.

    randInts = np.random.binomial(1,p,(n,n))

    # Use nested while loops to go through each element of the array
    # and assign True to 1 and False to 0.

    randBool = np.empty(shape = (n,n),dtype = bool)
    for i in range(n):
        for j in range(n):
             if randInts[i][j] == 0:
                randBool[i][j] = False
             else:
                randBool[i][j] = True

    return randBool

newRand = my_rand(5,0.3)
print(newRand) 
```

# php - 应用旋转时使用 php magickwand 和 imagemagick 丢失 png 的透明度

> ID：15906592
> 
> 赞同：0
> 
> 时间：2013-04-09T15:49:39.973
> 
> 标签：php, imagemagick, magickwand

嗨，我正在从运行 MagickWand 0.1.8 和 ImageMagick 6.2.9 的 Windows 环境中移植一个脚本，其中透明度与 MagickRotateImage 配合得很好。

新环境是 linux 运行 MagickWand 1.0.8 和 ImageMagick 6.5.4-7，透明度会丢失，一旦我的徽标图像旋转，它就会显示为黑色作为背景。

从我在网上找到的内容来看，PixelSetColor($bg,"none") 似乎不适用于较新的版本，因此是黑色的。最终，我需要知道用什么替换 PixelSetColor($bg,"none") 。我只是没有图像创作的背景，所以在这方面有点挣扎。

首先，我的 php 运行此函数，该函数生成从 url 获取的本地 60x60 版本的 600x600 png 图像。

```
function makeThumb($fileContents){
    GLOBAL $localImgPath1;
    GLOBAL $localImgPath2;
    $wand = NewMagickWand();
    $lg = MagickReadImageBlob($wand,$fileContents);
    $lg_w = MagickGetImageWidth($wand);
    $lg_h = MagickGetImageHeight($wand);
    $max = max($lg_h,$lg_w);
    $scale_factor = 60/$max;
    MagickResizeImage($wand,$lg_w*$scale_factor,$lg_h*$scale_factor, MW_GaussianFilter, .7);
    MagickWriteImage($wand, $localImgPath1);
    if($localImgPath2!="")
        MagickWriteImage($wand, $localImgPath2);
    $resized_w = MagickGetImageWidth($wand);
    $resized_h = MagickGetImageHeight($wand);
    DestroyMagickWand($wand);
} 
```

然后，我用它来读取本地写入的 png 图像并旋转它：

```
$logo = NewMagickWand();
$bg = NewPixelWand();
PixelSetColor($bg,"none");
MagickReadImage($logo, $localImgPath1);
MagickRotateImage($logo, $bg, $r);
header('Content-Type: image/PNG');
MagickEchoImageBlob($logo);
DestroyPixelWand($bg);
DestroyMagickWand($logo); 
```

我尝试过添加以下内容：

```
$transparent = NewPixelWand("#FFFFFF");
PixelSetAlpha($transparent, 0);
//and then making the rotate call:
MagickRotateImage($logo, $transparent, $r); 
```

还尝试添加 MagickSetImageAlphaChannel($logo, MW_SetAlphaChannel); 在旋转步骤之前。看到一些帖子提到该方法，但可能这不是使用它的正确方法。没有把握。

在将具有设置字体的文本字符串绘制到图像上的脚本中，我也遇到了同样的问题。即使在应用旋转之前，黑色也会立即显示在那里，因此希望字体脚本可以使用对徽标脚本的相同修复。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:15:16.050

问题出在 ImageMagick 6.5.4-7 上。一定是一个有问题的版本。升级到 6.8.4-10 及更高版本的代码工作正常，PixelSetColor($bg,"none") 适用于透明度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:25:39.073

对于透明背景，您可以选择四个值。依次尝试：

```
"none", "transparent", "#00000000", or "rgba(0, 0, 0, 0.0)" 
```

# c# - 在 ExecuteReader 中增加复选框编号

> ID：15906595
> 
> 赞同：0
> 
> 时间：2013-04-09T15:49:50.740
> 
> 标签：c#, checkbox

我需要将查询结果放入三个复选框的文本字段中。我基本上需要它来做到这一点：

```
QuesChk0.Text = "Question 4 Here"
QuesChk1.Text = "Question 3 Here"
QuesChk2.Text = "Question 1 Here" 
```

做 QuesChk0.Text = prs[0].ToString(); 会给我第一个问题，但不是其他两个。我不知道如何动态增加复选框名称后的数字（QuesChk0 <---）。

```
 System.Data.OleDb.OleDbConnection pcn;
        System.Data.OleDb.OleDbCommand pcm;
        System.Data.OleDb.OleDbDataReader prs;

        pcn = new System.Data.OleDb.OleDbConnection("");
        pcm = new System.Data.OleDb.OleDbCommand();
        pcn.Open();

        pcm.Connection = pcn;

        var tableSql = String.Format(@"SELECT TOP 3 Question FROM Questions ORDER BY NEWID()");

        pcm.CommandText = tableSql;
        prs = pcm.ExecuteReader();

        var rowcount = 0;
        while (prs.Read())
        {
            QuesChk0.Text = prs[0].ToString();
            rowcount++;
        }
        prs.Close();
        pcn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:06:31.137

这将有望工作：

首先，您按照需要显示的顺序创建一组复选框：

```
CheckBox[] chks = new CheckBox[] { QuesChk0, QuesChk1, QuesChk2 }; 
```

然后像这样设置文本：

```
while (prs.Read())
{
    chks[rowcount].Text = prs[0].ToString();
    rowcount++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:54:42.627

```
this.Controls[string.Format("QuesChk{0}", rowcount)].Text = prs[rowcount].ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:13:42.880

参考@Alina给出的解决方案，你可以试试

```
(this.FindControl(string.Format("QuesChk{0}", rowcount)) as CheckBox).Text = prs[rowcount].ToString(); 
```

# java - Java 对带有最终变量的 if 语句有多聪明

> ID：15906596
> 
> 赞同：5
> 
> 时间：2013-04-09T15:49:53.270
> 
> 标签：java, debugging, if-statement, final

我想写一些故障排除代码，我可以很容易地从我的程序以后的非调试版本中删除它们。我想出了：

```
final static boolean debug_on=true;
...
if (debug_on) { system.out.println() or logger.log(...) } 
```

如果 debug==false，Java 是否足够聪明，可以从最终字节码中删除 if 语句？

是否有更好的做法来实现将调试代码排除在程序最终版本之外的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:57:13.847

请参阅[Java 语言规范第 14.21 章的结尾。Unreachable Statements](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21) 的描述`if(false)`：

> ```
> if (false) { x=3; } 
> ```
> 
> 不会导致编译时错误。优化编译器可能会意识到该语句`x=3;`将永远不会被执行，并且可能会选择从生成的类文件中省略该语句的代码，但在`x=3;`此处指定的技术意义上，该语句不被视为“不可访问”。
> 
> 这种不同处理的基本原理是允许程序员定义“标志变量”，例如：
> 
> ```
> static final boolean DEBUG = false; 
> ```
> 
> 然后编写代码，例如：
> 
> ```
> if (DEBUG) { x=3; } 
> ```
> 
> 这个想法是应该可以将 DEBUG 的值从 false 更改为 true 或从 true 更改为 false，然后正确编译代码，而不需要对程序文本进行其他更改。

**tl;博士;** 这取决于编译器是否在字节码中省略了 if 中的语句。

# java - 将素数存储在数组中的最有效方法是什么

> ID：15906600
> 
> 赞同：-4
> 
> 时间：2013-04-09T15:49:59.483
> 
> 标签：java, algorithm

我想使用有效的算法将主数存储在一个最多 n=100000 的数组中。我正在使用基本方法来存储质数，但它需要更多时间。

```
 void primeArray(){
        int primes[100000],flag=0,k=2; 
        primes[0]=2;
        primes[1]=3;
        for(int i=5;i<n;i=i+2){
                for(int j=2;j<i/2;j++){
                    if(i%j==0){
                    flag=1;
                    break;
                   }
                }

            if(flag==0){
                primes[k]=i;
                k++;
            }

            flag=0;
       }   
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:14:58.613

我假设您已经知道如何计算素数并且正在寻找一种紧凑的方式来存储它们。

如果“最有效”是指“压缩到尽可能小的空间”，那么有一种方法可以将素数存储在位数组中，该方法的位数大约是在位数组中存储真/假标志的一半。

诀窍是除了 2、3 和 5 之外的所有素数都是 30x 加上 1、7、11、13、17、19、23 或 29 的形式。因此，您可以将 1 到 30 的素数存储在一个字节中（忽略2, 3, 5)，然后是单个字节中从 31 到 60 的素数，然后是从 61 到 90 的素数，依此类推。您将不得不分别处理 2、3 和 5。

让我们以 67 为例。使用整数除法计算 67 / 30 = 2，因此您将查看素数指示字节数组的索引 2 处的字节。然后 67 - 30 * 2 = 7，这是字节的第二位，所以你看那里，找到一个 1，并得出结论 67 是素数。

使用这种方法，您可以将少于一百万的素数存储在 33,334 字节中。有关更多信息，请查看[我的博客](http://programmingpraxis.com/2010/03/26/the-next-prime/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:49:54.020

There are `9592` primes below 100000\. All numbers below 100000 can be represented in `17 bits` (as 2 ^ 17 is 131072). Furthermore, all primes but the prime `2` are odd, and therefor would have a 0 in the last bit - we can therefor represent each prime below 100000 in `16 bits` or `2 bytes`. So, make an array of double bytes with the 9591 odd primes and a special rule about the prime `2`. This gives `19182 bytes` of data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:10:47.047

作为数组中的每个整数都有 32 位。

所以你可以按照这个

```
if(isPrime(n))
a[n/32]=a[n/32]|(1<<(n%32)); 
```

这样，您将第 n 位设置为 1 ，这意味着 n 是素数。只要你可以存储

更多的素数和更少的内存，您可以使用来自有效素数检查的阿特金筛子。

[http://en.wikipedia.org/wiki/Sieve_of_Atkin](http://en.wikipedia.org/wiki/Sieve_of_Atkin)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:52:15.783

使用[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)甚至[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)之类的集合。由于主要数字必须是唯一的，因此 Set 应该是显而易见的选择。

例如：`Set<Long> set = new HashSet<Long>();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T15:58:03.937

```
// initialize list
ArrayList primes = new ArrayList();

// add another number
primes.add(newPrime);

// convert to primitive array  
primes.toArray(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T15:58:36.983

2 和 3 也是素数：你想包括它们。

您可以通过使第二个循环迭代 while`O(n^2)`来提高算法的复杂性。`O(n^{3/2})``j * j <= i`

或者您可以使用[Erastosthenes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)，这将是`O(n log log n)`。

# javascript - 结算表格问题

> ID：15906603
> 
> 赞同：1
> 
> 时间：2013-04-09T15:50:08.987
> 
> 标签：javascript, jquery, forms, reset

我在使用 Javascript/jQuery 清除表单时遇到问题

这是我的表单的定义方式-所有标签都已关闭，它们应该按应有的顺序排列

```
<form id="eventpostform" name="eventpostform" method="post" action="post">
    <table cellspacing="5px" style="margin-top: 10px;" width="100%" cellpadding="0" cellspacing="0">
        <tr>
            <td width="180px">Event Name:</td>
            <td width="210px"><a class="param_submit" style="width:86px;padding:6px 5px;margin-left:16px;" alt="" onclick="clearform();">Clear Form</a></td> 
```

我尝试了以下但没有运气：

```
$('#eventpostform').clearForm();
$('#eventpostform').resetForm();
$('#eventpostform').reset();
document.getElementById("eventpostform").reset(); 
```

前 2 个什么都不做，其他两个显示错误`"Uncaught TypeError: Cannot call method 'reset' of null"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:52:08.573

您可以在表单对象上使用重置方法而不是表单中的控件来清除。您将不得不清除单个 html 元素但他们的方法，例如清除文本框，您可以将其值设置为`''`或某个值。

重置表单中的所有控件

```
document.getElementById("eventpostform").reset(); 
```

清除个人控制

```
document.getElementById("textboxId").value = ''; 
```

使用 jQuery

```
$('#id').val(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:53:00.263

试试这个：

```
$('#eventpostform')[0].reset(); 
```

# python - numpy 更高效的子矩阵

> ID：15906607
> 
> 赞同：3
> 
> 时间：2013-04-09T15:50:20.613
> 
> 标签：python, numpy

目前我正在使用下面的代码来获取删除第 i 行和第 j 列的子矩阵，但是在分析我的代码之后，它似乎是我代码中的主要瓶颈之一。有没有更有效的方法？

```
def submatrix(A, i, j):
    logger.debug('submatrix(%r, %r, %r)', A, i, j)
    B = empty(shape=tuple(x - 1 for x in A.shape), dtype=int)
    B[:i, :j] = A[:i, :j]
    B[i:, :j] = A[i+1:, :j]
    B[:i, j:] = A[:i, j+1:]
    B[i:, j:] = A[i+1:, j+1:]
    return B

         25015049 function calls (24599369 primitive calls) in 44.587 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
  3983040   15.541    0.000   20.719    0.000 defmatrix.py:301(__getitem__)
   415680   10.216    0.000   33.069    0.000 hill.py:127(submatrix)
 415686/6    3.232    0.000   44.578    7.430 hill.py:112(det) 
```

编辑：Jaime 提供了一种使用正则逆和行列式来近似模逆的好方法，但是对于大基数（在我的情况下为模 256），不准确性足以使整个事情变得毫无意义。主要时间接收器似乎实际上是**numpy**中的 getitem ，但我相信这是由以下几行引起的：

```
 B[:i, :j] = A[:i, :j]
    B[i:, :j] = A[i+1:, :j]
    B[:i, j:] = A[:i, j+1:]
    B[i:, j:] = A[i+1:, j+1:] 
```

瓶颈可能不是在内存中复制矩阵，而是矩阵条目访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:39:14.490

无论您如何处理子矩阵，使用行列式计算矩阵的逆是一种非常缓慢的方法。让我们举一个愚蠢的例子：

```
a = np.array([[3, 0, 2],
              [2, 0, -2],
              [0, 1, 1]]) 
```

您可以快速计算逆：

```
>>> np.linalg.inv(a)
array([[ 0.2,  0.2,  0\. ],
       [-0.2,  0.3,  1\. ],
       [ 0.2, -0.3, -0\. ]]) 
```

但是要计算模逆，您需要将其作为整数矩阵除以整数因子。该整数因子当然是决定因素，因此您可以执行以下操作：

```
>>> np.linalg.inv(a) * np.linalg.det(a)
array([[  2.,   2.,   0.],
       [ -2.,   3.,  10.],
       [  2.,  -3.,  -0.]]) 
```

的倒数`a`是这个整数矩阵，除以 的行列式`a`。作为一个函数，你可以这样做：

```
def extended_euclidean_algorithm(a, b) :
    """
    Computes a solution to a x + b y = gcd(a,b), as well as gcd(a,b),
    using the extended Euclidean algorithm.
    """
    if b == 0 :
        return 1, 0, a
    else :
        x, y, gcd = extended_euclidean_algorithm(b, a % b)
        return y, x - y * (a // b), gcd

def mmi(a, m) :
    """
    Computes the modular multiplicative inverse of a modulo m, using the
    extended Euclidean algorithm.
    """
    x, y, gcd = extended_euclidean_algorithm(a, m)
    if gcd == 1 :
        return x % m
    else :
        return None

def modular_inv(a, m):
    det_a = np.linalg.det(a)
    inv_a = np.linalg.inv(a) * det_a
    det_a = np.rint(det_a).astype(int)
    inv_a = np.rint(inv_a).astype(int)
    return ((inv_a % m) * mmi(det_a, m)) % m 
```

现在：

```
>>> a = np.random.randint(10, size=(10, 10))
>>> b = modular_inv(a, 7)
>>> a.dot(b) % 7
array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 1]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:02:51.177

据我所知，`submatrix`只需删除第`i`th 行和`j`第 th 列。你可以这样做`np.delete`

```
i = 3
j = 4
a = np.arange(100).reshape(10,10)
b = np.delete(np.delete(a, i, 0), j, 1) 
```

但是，对于@Jaime 引用的理由，这实际上更慢`:-/`

```
timeit submatrix(a, i, j)
#10000 loops, best of 3: 23.2 us per loop

timeit subdel(a, i, j)
#10000 loops, best of 3: 42.6 us per loop 
```

但我暂时把它留在这里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:59:03.547

嗯...您只是在复制矩阵，因此可能很难加快速度，但是您可以尝试的一件事是验证 A 是否位于连续的内存块中，这可以加快 C 代码的访问速度。看看[numpy.ascontiguousarray()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ascontiguousarray.html)。

# jquery - jquery keypress/keydown 调用函数

> ID：15906608
> 
> 赞同：0
> 
> 时间：2013-04-09T15:50:23.203
> 
> 标签：jquery, html, input, keypress, keydown

我之前的问题：

[这](https://stackoverflow.com/questions/15819713/jquery-store-input-value-into-empty-array-element)

sweetamylase 发布了她的小提琴[http://jsfiddle.net/amyamy86/jSyfy/](http://jsfiddle.net/amyamy86/jSyfy/)，这很棒并且非常接近我想要实现的目标，但是我无法获得它，因此按下回车将触发与单击按钮相同的操作.

我尝试了这个和其他变体

```
$("input").keypress(function(event) {
    if (event.which == 13) {
        event.preventDefault();
       FoodDispaly();
    }
}); 
```

但还没有让它工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:01:00.823

就个人而言，我一直遇到按键问题。请改用 keyup。我已经修改了在你的第一篇文章中链接到你的小提琴来处理 keyup：

```
$("#inputFoodChoice").keyup(function (e) {
                var code = (e.keyCode ? e.keyCode : e.which);
                if (code == 13) { //Enter keycode
                    e.preventDefault();
                    checkInputValue(e);
                }
}); 
```

[http://jsfiddle.net/jSyfy/1/](http://jsfiddle.net/jSyfy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:52:50.647

要解决您的问题，请在按钮单击处理程序之后添加以下内容：

```
$("#inputFoodChoice").keyup(function(event) {
    if (event.which == 13) {
        checkInputValue();
    }
}); 
```

见小提琴：http: [//jsfiddle.net/jSyfy/2/](http://jsfiddle.net/jSyfy/2/)

# javascript - 如何从 jQuery XY pad 访问 x 和 y 值

> ID：15906610
> 
> 赞同：0
> 
> 时间：2013-04-09T15:50:29.183
> 
> 标签：javascript, jquery

我正在使用这个名为 jQuery Control 的 jQuery 库。[https://github.com/aterrien/jQuery-Kontrol](https://github.com/aterrien/jQuery-Kontrol) XY 垫给了我这样的值：

```
Object {x: 112, y: 77} 
```

我如何分别访问 x 和 y 并将它们用于不同的参数。这是完整的代码：http: [//jsfiddle.net/ehsanziya/Hs5ff/2/](http://jsfiddle.net/ehsanziya/Hs5ff/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:53:59.740

```
var obj = JSON.parse($(".xy").val());
console.log(obj.x); // 112
console.log(obj.y); // 77 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:59:10.720

```
'change' : function(x){
        gain.gain.value = 1;
        console.log(x, x.x, x.y);   

} 
```

在代码中，`x`是一个具有`x`和`y`属性的对象。`x.x`您可以使用和访问各个值`x.y`。

# android - 未设置 ListView 行布局高度

> ID：15906615
> 
> 赞同：0
> 
> 时间：2013-04-09T15:50:33.133
> 
> 标签：android, android-layout, listview

我希望我的行高 50dp，但由于某种原因它只会`wrap_content`.

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:background="@drawable/master_selector" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="25dp"
        android:layout_gravity="center_vertical"
        android:layout_marginTop="3dp"
        android:contentDescription="Category" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="5dp"
        android:text="@+id/label"
        android:textColor="#ebebeb"
        android:textSize="25sp" >
    </TextView>

</LinearLayout> 
```

我无法弄清楚为什么 50dp 没有效果？它在常规 ListView 上

编辑：截图：

如您所见，这些行靠得很近。文本只有 25sp（在常规文本大小上）。

![在此处输入图像描述](https://i.stack.imgur.com/yrAcN.jpg)

编辑：将`TextView`高度更改为并`50dp`修复它。`gravity``center_vertical`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:53:14.747

在某些实现中，膨胀视图的布局值很容易被遗忘（通常是因为它们添加了指定的 LayoutParam 对象，如 中的情况`ListView`）。

您可以通过将其中一个孩子的高度添加为 50dp 来解决此问题，这将正确显示。

# c++ - 有人可以解释 c++11 中的 ref() 与 & 以及何时使用它们吗？

> ID：15906617
> 
> 赞同：1
> 
> 时间：2013-04-09T15:50:33.190
> 
> 标签：c++, c++11, reference, std

我阅读了有关它的文档，但如果有人能用更简单的英语解释一下，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:50:40.310

普通的 C++ 引用`&`是一个奇怪的公民，因为它可以被初始化但不能重新分配。例如：

```
int a, &ra = a;
int b, &rb = b;
ra = rb; // actually does a = b 
```

而普通指针是一个行为良好的公民，它可以被初始化和重新分配。

因此，它`ref()`创建[`reference_wrapper`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)了一个普通指针的包装器。这个包装器可以用一个引用来初始化，它会自动转换为普通的引用`&`，例如：

```
int a;
auto ra = std::ref(a); 
int b;
auto rb = std::ref(b);
ra = rb; // now ra contains a pointer to b
int& rb2 = ra; // automatically converts to reference 
```

它主要用于使用 lambda 或`std::bind`表达式的函数式编程。`std::bind`复制绑定的参数，所以如果你想将函数参数绑定到引用`reference_wrapper`就很方便了。例如：

```
void foo(int);

int i = 1;
auto f = std::bind(foo, i); // makes a copy of i
i = 2;
f(); // calls foo(1)

auto g = std::bind(foo, std::ref(i));
i = 3;
g(); // calls foo(3); 
```

# c - 进程地址空间中.so和a.out文件的多个副本

> ID：15906619
> 
> 赞同：3
> 
> 时间：2013-04-09T15:50:34.243
> 
> 标签：c, linux

我看到了 stack 、 heap 和 shared library 的地址范围从哪里开始。我看到共享库（我创建的）和 a.out 的 2 个值。ld 和 libc 的 3 个值。rest 是匿名的和堆栈区域的起始地址。

```
kg>pmap 24545
24545:   ./a.out

003d3000      4K r-x--    [ anon ]
004d9000      4K r-x--  /home/trng3/sh/POC/libfile_sys.so
004da000      4K rwx--  /home/trng3/sh/POC/libfile_sys.so
08048000      4K r-x--  /home/trng3/sh/POC/a.out
08049000      4K rwx--  /home/trng3/sh/POC/a.out
46f46000    100K r-x--  /lib/ld-2.5.so
46f5f000      4K r-x--  /lib/ld-2.5.so
46f60000      4K rwx--  /lib/ld-2.5.so
46f68000   1244K r-x--  /lib/libc-2.5.so
4709f000      8K r-x--  /lib/libc-2.5.so
470a1000      4K rwx--  /lib/libc-2.5.so
470a2000     12K rwx--    [ anon ]
b7f8a000      4K rw---    [ anon ]
b7fa1000      4K rw-s-  /dev/zero (deleted)
b7fa2000      8K rw---    [ anon ]
bfc0f000     84K rw---    [ stack ] 
```

为什么我们有 2 个副本而不是 1 个。一个是来自磁盘，另一个是当前在内存中。在内存中拥有相同数据的两个副本的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:52:14.493

它们不是多个副本，它们只是具有不同权限的不同段。查看可执行文件：

```
08048000 4K rx--/home/trng3/sh/POC/a.out
08049000 4K rwx--/home/trng3/sh/POC/a.out

```

可以看到第一个映射有`r-x`权限，第二个映射有`rwx`权限。通常，第二个映射将具有`rw`权限，但可能您的处理器无法设置非执行权限，或者该功能已关闭，可能程序是使用可执行数据段编译的，或者处理器可能没有所需的粒度。

我认为没有 PAE 的 i386 对 NX 位的粒度非常粗略，所以这可以解释为什么数据段是可执行的但堆栈不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:54:26.877

```
46f46000    100K r-x--  /lib/ld-2.5.so    
46f5f000      4K r-x--  /lib/ld-2.5.so 
```

46f5f000 - 46f46000 = 25 * 4k = 100k。它是文件的最后一段。我仍然无法解释原因，但我发现了这一点。

# r - R中摘要（模型）输出中的小数位数

> ID：15906620
> 
> 赞同：5
> 
> 时间：2013-04-09T13:04:59.317
> 
> 标签：r

当我使用 package.json 时，我试图从模型摘要输出中获得超过 2 位小数`nnet`。我阅读了有关此的其他线程，但这些解决方案似乎都不适合我。我试过：

```
options(digits=10)
summary(model)

 b->h1 i1->h1 i2->h1 i3->h1 i4->h1 i5->h1 
  0.94  -2.67   0.83  -1.06  -2.51  -0.69 
 b->o1 h1->o1 
  1.14  -3.41 
 b->o2 h1->o2 
 -0.62   3.92 
```

我也试过：

```
summary(model,digits=10)

 b->h1 i1->h1 i2->h1 i3->h1 i4->h1 i5->h1 
  0.94  -2.67   0.83  -1.06  -2.51  -0.69 
 b->o1 h1->o1 
  1.14  -3.41 
 b->o2 h1->o2 
 -0.62   3.92 
```

这些解决方案都不适合我。我必须`caputure.output`在汇总输出后使用如果我输出整个模型或使用`coefnames`我可以获得超过 2 个小数位，但如果我使用`caputre.output`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:28:39.137

只需使用

```
summary(model)$wts 
```

这将为您提供具有最大小数点的权重。

如果您想要其他值，例如残差等，请参阅手册，我附上相关部分的屏幕截图：

![描述](https://i.stack.imgur.com/VTSfG.png)

只需写`summary(model)`然后`$`然后例如`wts`获得权重或例如残差以获得残差

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T23:26:34.923

summary 返回的对象的打印方法很可能是两位小数的来源。作为第一次尝试，尝试

```
print(summary(model),digits=10)   ## or whatever other number of digits 
```

如果这不起作用，请尝试在此答案中进行的那种调查：

[如何将 chisq.test 的十进制数字设为四个数字？](https://stackoverflow.com/questions/15606080/how-to-make-decimal-digits-of-chisq-test-four-numbers/15607327#15607327)

# hibernate - Apcahe Camel：如何让路由参与Hibernate Transaction？

> ID：15906622
> 
> 赞同：1
> 
> 时间：2013-04-09T15:50:44.963
> 
> 标签：hibernate, apache-camel

骆驼路线是否可以参与休眠事务？在休眠事务的中间，我想使用 Camel 的文件组件创建一个文件。但是如果交易失败，我想删除创建的文件。
骆驼路线有没有办法知道休眠事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:02:35.827

[路由确实可以通过hibernate](http://camel.apache.org/hibernate-example.html)参与事务。请注意，只有[事务端点](http://camel.apache.org/transactional-client.html)可以参与事务 - 如果需要在事务中覆盖多个资源，则需要使用一些符合 JTA 的事务管理器，例如 Java EE 服务器。即休眠事务管理器将只处理休眠bean（2.11 中的端点）等。

你当然可以在你的路由中定义一个错误处理程序，如果文件存在，它会删除它。但它不会是“事务性的”，因为没有回滚/提交的概念。您无法保证文件真的被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:49:05.820

您还可以使用完成来触发自定义逻辑 onFailure / onCompletion。然后，如果事务失败，您可以删除该文件。 [http://camel.apache.org/oncompletion.html](http://camel.apache.org/oncompletion.html)

但是错误处理程序也可以工作。

# html - 将 facebook 洞察用于 facebook 应用程序和 like-box 代码

> ID：15906626
> 
> 赞同：0
> 
> 时间：2013-04-09T15:50:54.613
> 
> 标签：html, facebook, facebook-apps, facebook-social-plugins, facebook-likebox

我有一个单页网站，上面有一个类似框。类似框是为 facebook 页面（我拥有管理员权限）设置的，并且工作正常。但是，这些见解并未记录在类似框引用的应用程序中。

为了设置点赞框，我创建了一个 facebook 应用程序，并相信（可能是错误的）这样做我会在应用程序中看到一些与点赞框相关的信息。但是我没有得到任何见解。我想我错过了一些相当明显的东西，所以让我向您展示我的代码：

```
<html lang="en" xmlns:fb="http://ogp.me/ns/fb#">

<head>
    <!-- Facebook Metatags -->
    <meta property="og:image" content="http://www.mysite.com/test/logo.jpg"/>
    <meta property="og:type" content="website"/>
    <meta property="og:site_name" content="Test Site"/>
    <meta property="og:url" content="http://www.mysite.com/test/index.html"/>
    <meta property="og:title" content="Test Video"/>
    <meta property="fb:app_id" content="***myAppID***" /> 
</head>

<body>

<div id="fb-root"></div>
<script>

window.fbAsyncInit = function() {

FB.init({
    appId  : ***myAppID***,
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true  // parse XFBML
});

//A couple of facebook events that I am tracking using google analytics go here - this works wonderfully by the way :-)

}; 

(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=***myAppID***";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<fb:like-box href="http://www.facebook.com/myPage" width="300" data-height="60" show_faces="false" stream="false" header="false"></fb:like-box>

</body>

</html> 
```

在 facebook 应用程序的设置中：

*   我已禁用沙盒模式

*   应用程序域：mysite.com

*   选择您的应用如何与 Facebook 集成：带有 Facebook 登录的网站，URL：[http ://www.mysite.com/test/index.html](http://www.mysite.com/test/index.html)

我看到 facebook SDK 使用了 myAppID 两次（肯定不是 100% 正确），但我找不到任何文档来说明正确的用法是什么——所以我只包含了两者！

那么我没有做些什么，或者根本不可能在外部 URL 上的类似框上获得 Facebook 见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:57:48.093

网站的洞察力只会为您提供您定义的网站。所以它只会收集与网站相关的类似框的数据，而不是 Facebook 页面

*   [http://www.mysite.com](http://www.mysite.com)和
*   [http://www.facebook.com/myPage](http://www.facebook.com/myPage)

不会聚集在相同的见解下。要查找您的页面的见解，请转到您的页面见解。

# html - 调整浏览器窗口大小时如何滚动固定的div

> ID：15906627
> 
> 赞同：0
> 
> 时间：2013-04-09T15:50:55.237
> 
> 标签：html, css

我创建了一个`position: fixed` `div`必须始终位于顶部的`width: 900px`，现在我遇到了以下问题，当我将浏览器窗口的大小调整到比`900px`我`div`的裁剪最小的大小时，我什至无法滚动它，因为滚动条没有出现。我该如何解决？

代码如下： `<body> <div class= "bar"><div class="inner_div"></div></div> </body>`

现在的CSS

`.bar { position: fixed; height: 60px; width: 900px; border: 2px solid; }`

```
.inner_div {position: absolute; right: 5px; top: 2px; border: 2px solid;  width: 100px; height: 15px;} 
```

尝试此代码，您会看到如果您的浏览器窗口小于 900 像素，则该栏将被裁剪，并且无法滚动它并查看 inner_div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:39:22.007

我很确定有些浏览器只使用非固定元素来确定内容的宽度。在页面底部添加类似这样的内容应该可以让您获得滚动条`<div style="width:900px;"></div>`

之前我没有提到间距 div 不能为空或者必须有高度，所以添加一个不间断的空格或者 1px 的高度会让它填满宽度。

完整代码示例：http: [//jsfiddle.net/8LnBr/](http://jsfiddle.net/8LnBr/)

```
<style>
.bar { position: fixed; height: 60px; width: 900px; border: 2px solid; }
.inner_div {position: absolute; right: 5px; top: 2px; border: 2px solid;  width: 100px; height: 15px;}
.spanner{width:900px; height:1px;}
</style>
<body>
 <div class= "bar">
  <div class="inner_div"></div>
 </div>
 <div class="spanner"></div>
</body> 
```

# java - java file.renameTo() 在 unix 中失败

> ID：15906629
> 
> 赞同：3
> 
> 时间：2013-04-09T15:51:00.930
> 
> 标签：java, unix, java-6, file-rename

我有一个处理文件内容的 java 应用程序，然后我需要将它移动到另一个位置。

这就是我读取文件的方式：

```
 String filePath = new String("foo.bar");
    String fileContents = new String("");
    char[] myBuffer = new char[chunkSize];
    int bytesRead = 0;
    BufferedReader in;
    try {
        FileReader fr = new FileReader(filePath);
        in = new BufferedReader(fr);
        try {
            while ((bytesRead = in.read(myBuffer,0,chunkSize)) != -1)
            {
                //System.out.println("Read " + bytesRead + " bytes. They were: " + new String(myBuffer));
                fileContents+= new String(myBuffer).substring(0, bytesRead);
            }
            // close the stream as I don't need it anymore. (If I don't close it, then java would hold the file open thus preventing the subsequent move of the file)
            in.close();
            fr.close();
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        return null;
    } 
```

当我关闭输入流和文件阅读器时，应该关闭文件。

然后在此之后我尝试将文件移动到另一个目录，`File.renameTo(newFileName);`但这失败了（在unix下！，在windows下它工作正常）

移动失败后，我测试是否可以创建一个名为的文件`newFileName`以及是否可以删除原始文件。新文件将被创建，而原始文件无法删除。有趣的是，我可以在应用程序运行时从命令行删除原始文件（在失败之后）。

知道为什么会这样或任何替代方案吗？

更多详细信息：我在 unix 下工作，出于遗留原因，我一定会使用 java 1.6（因此我无法恢复到从 java 1.7 开始支持的 Files.move()）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:55:55.393

我发现我的 java 应用程序有什么问题。

基本上，我使用自定义从目录中提取文件列表`FileFilter`。这给了我一个数组 `File[] foundFiles`。之后我要做的是使用问题中的代码片段在 while 循环中读取每个文件。出于某种原因读取文件后，我`File`使用数组中的第 i 个文件作为构造函数的参数创建了一个新对象

```
File file = new File(foundFiles[i].getName()); // File to be moved 
```

然后我试图重命名这个。

现在由于某种原因，它可以在 Windows 下工作，而不能在 unix 下工作（我认为文件以某种方式被`foundFiles[i]`对象锁定）。

事实上，如果我打印这些行的结果

```
System.out.println("I can read foundFiles[i]: " +foundFiles[i].canRead());// DEBUG
System.out.println("I can write foundFiles[i]: " +foundFiles[i].canWrite());// DEBUG
System.out.println("I can read file : " +file.canRead());// DEBUG
System.out.println("I can write file : " +file.canWrite());// DEBUG 
```

我明白了

```
I can read foundFiles[i]: True
I can write foundFiles[i]: True
I can read file: False
I can write file: False 
```

`renameTo()`直接在对象上使用就足以`foundFiles[i]`使其正常工作。

希望这会有所帮助，但我不知道为什么第一个版本可以在 windows 下运行，而不是在 unix 下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T10:10:54.760

让我们分析一下上面的观察......

```
I can read foundFiles[i]: True
I can write foundFiles[i]: True
I can read file: False
I can write file: False 
```

结果是正常的，因为***文件***对象是通过***new File(foundFiles[i].getName()) 生成***的，但是***getName***方法只提供了文件名，没有文件路径！

通过***new File(foundFiles[i].getParent() + File.separator + foundFiles[i].getName())***创建文件，结果将是：

```
I can read foundFiles[i]: True
I can write foundFiles[i]: True
I can read file: True
I can write file: True 
```

# coffeescript - 处理咖啡脚本中的 Http 错误

> ID：15906635
> 
> 赞同：0
> 
> 时间：2013-04-09T15:51:14.347
> 
> 标签：coffeescript

我正在尝试在 coffeescript 中处理一个 http 请求，但如果服务器关闭，应用程序就会因下面的错误而死掉，而且我找不到正确的解决方案。

代码：

```
 http.get "http://localhost:8080/health", (res) ->
        status =  res.statusCode
        value = if status == 200 then 1 else 0
        console.log value
        server.push_metric metricPrefix , value
        res.on 'error', () ->
          colsone.log "Tomcat Disconected" 
```

错误：

```
events.js:71
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: connect ECONNREFUSED
    at errnoException (net.js:770:11)
    at Object.afterConnect [as oncomplete] (net.js:761:19) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:19:36.800

我认为您必须在单独的事件处理程序中主动侦听错误。现在，您正在将一个事件处理程序附加到响应 ( `res`)，但它需要附加到请求对象本身。请参阅[文档](http://nodejs.org/api/http.html#http_http_get_options_callback)。

```
req = http.get "http://localhost:8080/health", (res) ->
  status = res.statusCode
  value = if status == 200 then 1 else 0
  console.log value
  server.push_metric metricPrefix , value

req.on 'error', ->
  console.log "Tomcat Disconected" 
```

此外，您当前的错误处理程序中有一个错字：`colsone.log`

# windows - VBA - 未定义用户定义类型

> ID：15906642
> 
> 赞同：2
> 
> 时间：2013-04-09T15:51:26.537
> 
> 标签：windows, vba

我正在尝试更新 VBA 模块以使用`System.Windows.Forms.FolderBrowserDialog`该类。我声明我的对象如下：

```
Dim MyFolderBrowser As New System.Windows.Forms.FolderBrowserDialog 
```

运行这个给了我错误`User-defined type not defined`。我认为编译器不知道该类，所以我尝试去`Tools > References`并添加`Systems_Windows_Forms`，但我仍然遇到同样的错误。有谁知道我在这里想念什么？我是否也需要在我的代码中引用该库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:02:14.747

`System.Windows.Forms.FolderBrowserDialog`对我来说看起来像东西`.Net`，而不是VBA。

您可以`Application.FileDialog`在 Access VBA 中使用。此示例使用后期绑定并允许用户从浏览对话框中选择文件夹。

```
Const msoFileDialogFolderPicker As Long = 4
Dim objFileDialog As Object ' FileDialog
Set objFileDialog = Application.FileDialog(msoFileDialogFolderPicker)

With objFileDialog 
    .AllowMultiSelect = False
    If .Show Then
        Debug.Print .SelectedItems(1)
    End If
End With 
```

如果您更喜欢使用早期绑定，请设置对*Microsoft Office [版本] 对象库*的引用。然后你可以像这样声明对象......

```
Dim objFileDialog As FileDialog 
```

而且您不需要定义常量，因此如果使用早期绑定，请丢弃此行...

```
Const msoFileDialogFolderPicker As Long = 4 
```

# php - 如何使用 PHP 在客户端驱动器上创建文件

> ID：15906646
> 
> 赞同：-5
> 
> 时间：2013-04-09T15:51:37.310
> 
> 标签：php

我想要在加载网站时在主机上上传的代码，然后在客户端驱动器 c:\ 上创建一个文件，我将按钮代码放在本地主机上是正确的，但是当我将此代码放在 public_html 上的主机创建文件上时，我想创建文件在客户端 C:\ Drive 上类似一个病毒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:53:33.440

这是不可能的。用户需要手动下载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:10:28.510

PHP 在服务器上运行，而不是在客户端机器上。换句话说，PHP 永远不会影响客户端机器。

# sql-server - 您可以从事务中打印消息吗？

> ID：15906648
> 
> 赞同：3
> 
> 时间：2013-04-09T15:51:46.563
> 
> 标签：sql-server, tsql

嗨，我正在尝试使用`PRINT`或非致命的 RAISEERROR 在我的事务运行时打印消息，但在事务结束之前它们不会打印。有没有办法从交易中实际打印消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:55:52.643

我想你会发现它的缓冲阻止了消息的打印。

尝试：

```
raiserror ('hello', 0, 0) with nowait 
```

# javascript - 如何使用括号将参数传递给 Angular js 函数。

> ID：15906651
> 
> 赞同：29
> 
> 时间：2013-04-09T15:51:56.190
> 
> 标签：javascript, angularjs

我想做这样的事情：

```
<a ng-click="doSomething({{value}})" > 
```

js

```
$scope.doSomething = function(a){
 console.log(a);
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-09T15:58:25.683

您需要做的就是：

```
<a ng-click="doSomething(value)" > 
```

# c - C中二进制搜索中的分段错误

> ID：15906652
> 
> 赞同：1
> 
> 时间：2013-04-09T15:51:56.733
> 
> 标签：c, binary-search

我正在尝试编写一个程序来扫描一个输入文件，该文件包含数组中的字母数、排序的字母列表、要搜索的字母数、要搜索的字母列表。它以示例文件中显示的格式显示搜索结果。

我在运行时收到一条分段错误错误消息，其中包含我在下面包含的代码。现在，在这篇文章因未包含正确数量的代码而受到负面反馈之前，我真的不知道这个分段错误的错误在哪里。我在 Pastebin 上包含了相关文件：

### [主程序](http://pastebin.com/aXR8g1kH)

```
#include <stdio.h>
#include <stdlib.h>
#include "Proto.h"

int main()
{
    /* Accepts number of elements from user */
    scanf("%d", &elements);

    /* Creates dynamic array */
    array = (char *) calloc(elements, sizeof(char));

    /* Copies sorted values to the dynamic array */
    for(i = 0; i < elements; i++)
    {
        scanf("%s", &array[i]);
    }

    /* Accepts number of elements to search */
    scanf("%d", &search);

    /* Searches for elements in sorted array one at a time */
    for(i = 1; i <= search; i++)
    {
        /* Accepts value to search */
        scanf("%s", &value);

        /* Resets counter to 0 */
        count = 0;

        /* Finds location of element in the sorted list using binary search */
        location = binarySearch(array, value, 0, (elements-1));

        /* Checks if element is present in the sorted list */
        if (location == -1)
        {
            printf("%4s not found!\n", value);
        }

        else
        {
            printf("%4s found at %4d iteration during iteration %4d\n", value, location, count);
        }
    }
    free(array);
} 
```

### [二进制搜索.c](http://pastebin.com/THKGAzi8)

```
#include <stdio.h>
#include "Proto.h"

int binarySearch(char * nums, char svalue, int start, int end)
{
    middle = (start + end) / 2;

    /* Target found */
    if (nums[middle] == svalue)
    {
        return middle;
    }

    /* Target not in list */
    else if( start == end )
    {
        return -1;
    }

    /* Search to the left */
    else if( nums[middle] > svalue )
    {
        count++;
        return binarySearch( nums, svalue, start, (middle-1) );
    }

    /* Search to the right */
    else if( nums[middle] < svalue )
    {
        count++;
        return binarySearch( nums, svalue, (middle+1), end );
    }
} 
```

### [原型.h](http://pastebin.com/iEpn1wLP)

```
#ifndef _PROTO_H
#define _PROTO_H

char * array;
int elements, search, location, count, middle, i;
char value;
int binarySearch(char *, char, int, int);

#endif 
```

### [样本输入/输出](http://pastebin.com/i2nWjwnZ)

```
Sample Input file:
6
a d n o x y
3
n x z

Sample Output file:
  n found at    2 during iteration    0\. 
  x found at    4 during iteration    1.
  z not found! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:59:54.677

我没有检查整个代码，但我在你的`main.c`

你的代码

```
 /* Creates dynamic array */
    array = (char *) calloc(elements, sizeof(char));

    /* Copies sorted values to the dynamic array */
    for(i = 0; i < elements; i++)
    {
            scanf("%s", &array[i]);
    } 
```

是错的。你`array`应该是双指针`char **array`

```
 /* Creates dynamic array */
    array = calloc(elements, sizeof(char*));

    /* Copies sorted values to the dynamic array */
    for(i = 0; i < elements; i++)
    {
            scanf("%ms", &array[i]);
    } 
```

尝试划分您的代码并找出导致问题的部分并用一小部分代码获得收益，这将有助于找出解决方案

# websphere - 如何在 AIX/UNIX 机器上获取 xmlaccess 端口号？

> ID：15906656
> 
> 赞同：0
> 
> 时间：2013-04-09T15:52:10.470
> 
> 标签：websphere

我正在尝试在安装了 WebSphere Portal 6.0 的 AIX / UNIX 框上查找 xmlaccess 端口号以及配置位置，您能否提供一个我可以使用的脚本，因为我有多个框和实例可供搜索？

尝试以下但没有成功：我尝试使用 find 命令，但结果和警告太多，因为我没有管理员权限，我不断收到大量结果，如下所示，

find: 0652-081 cannot change directory to :: 文件访问权限不允许指定的动作。

当您收到大量警告时，要彻底执行此操作非常乏味且耗时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:57:40.700

您可以尝试以下方法，让我知道您的相处方式，

$ grep -e "XmlAccessPort=" `find / -name wpconfig.properties 2>/dev/null`

提示：如果您知道 Portal 安装的位置，您可以微调上述查找脚本。

示例输出：/WebSphere/PortalServer/config/wpconfig.properties:XmlAccessPort=60644

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:00:18.240

在典型安装中，它应该与 Portal 运行在同一个端口上。对于 Portal 7，通常是 10039。不过，我还没有使用版本 6 添加更多内容。

# ruby-on-rails-3 - 如果时间范围的条件

> ID：15906657
> 
> 赞同：0
> 
> 时间：2013-04-09T15:52:14.640
> 
> 标签：ruby-on-rails-3

我想在我的 rails 应用程序中根据订单交货时间更改订单金额。为此，我像这样修改了我的 order_controller：

```
 class OrdersController < ApplicationController
  before_filter :authenticate_user!
  def process_order
    @order = current_order
    if (@order.delievery_time[(4i), (5i)].between?('22:00', '00:30')) 
      @order.total = @order.total + @@mnc 
    end 
  end
  end 
```

在这里，当用户提交 2200 小时到 0030 小时之间的交货时间时，“总计”字段应为（总计 = 总计 + 50）。并且应该提交这个总值。

但是给出“[(4i), (5i)] 上的语法错误”错误。

正如我在错误日志中看到的，它显示如下：

```
 "delievery_time(1i)"=>"2013",
 "delievery_time(2i)"=>"4",
 "delievery_time(3i)"=>"9",
 "delievery_time(4i)"=>"23",
 "delievery_time(5i)"=>"00", 
```

我只对最后两个值感兴趣。如何得到这份工作？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:53:19.237

假设 delivery_time 是类的`Time`（或兼容的东西，如 Rails `TimeWithZone`），你可以像这样访问小时和分钟：

```
delivery_time = Time.new(2013, 4, 9, 23, 00)

puts delivery_time.hour   #=> 23
puts delivery_time.min    #=> 0 
```

# jquery - 如何在同一域的 iframe 内使用 jquery click

> ID：15906662
> 
> 赞同：1
> 
> 时间：2013-04-09T15:52:17.470
> 
> 标签：jquery, iframe, click

我的父页面使用 Jquery。

我正在将 iframe 加载到调用另一个页面的父页面上。iframe 页面位于同一域中。

iframe 页面本身没有与之关联的 jQuery。

但我想在这个 iframe 页面内的按钮上使用 jQuery 的 click 方法。

如何从父页面 .js 文件执行此操作？...没有将 jQuery 源文件附加到 iframe 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:58:46.340

尝试使用该方法`.contents()`，然后`.find()`到达您的元素，如下所示：

```
$('iframe').contents().find('#yourbutton').click(function(){
    //Do whatever you need
}); 
```

当然，您必须将选择器更改为更具体

# windows - 如何在RichTextColumns中垂直放置两个RichTextBlock（Overflow）

> ID：15906668
> 
> 赞同：0
> 
> 时间：2013-04-09T15:52:27.587
> 
> 标签：windows, xaml, windows-8, winrt-xaml, richtextblock

如前所述，我想将两个 RichTextBlocks 垂直放置。我的意图是手动编写第一个 RichTextBlock 的段落，并且我希望第二个 RichTextBlock（其内容以编程方式给出）在第一个之后立即开始，我希望这种情况发生，以便第二个 RichTextBlock 将垂直溢出到下一栏。

下面的代码片段只是为了让您可以看到我正在使用的对象，并且没有任何逻辑意义。

```
<ScrollViewer 
        Grid.Column="1"
        Grid.Row="1" 
        Grid.RowSpan="2"
        HorizontalScrollMode="Auto"
        HorizontalScrollBarVisibility="Auto"
        VerticalScrollMode="Disabled"
        VerticalScrollBarVisibility="Disabled"
        Padding="20">

            <RichTextBlock>
                <Paragraph><Run></Run></Paragraph>
            <RichTextBlock />

            <common:RichTextColumns>
                <common:RichTextColumns.ColumnTemplate>
                    <DataTemplate>
                        <RichTextBlockOverflow Margin="80,0,0,0" Width="560">
                            <RichTextBlockOverflow.RenderTransform>
                                <TranslateTransform X="-1" Y="4"/>
                            </RichTextBlockOverflow.RenderTransform>
                        </RichTextBlockOverflow>
                    </DataTemplate>
                </common:RichTextColumns.ColumnTemplate>
                <RichTextBlock
                             htmlToXaml:Properties.Html="{Binding HtmlText}"
                             Name="RichTextBlockMy"
                             Margin="10,0,0,0"
                             Style="{StaticResource ItemRichTextStyle}"
                             Width="560"/>
            </common:RichTextColumns>
    </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:48:24.507

我想这就是你想要的。

XAML

```
<ScrollViewer 
    HorizontalScrollMode="Auto"
    HorizontalScrollBarVisibility="Auto"
    VerticalScrollMode="Disabled"
    VerticalScrollBarVisibility="Disabled"
    Padding="20">
    <StackPanel Orientation="Horizontal">

        <RichTextBlock>
            <Paragraph>
                <Run Text="This is fixed RichTextBlock, after this it's RichTextBlock with RichTextColumns" FontSize="20"/>
                <LineBreak />
                <Run Text="{Binding FirstRtbText}" />
                <LineBreak />
                <Run Text="End of fixed RichTextBlock" FontSize="20" />
            </Paragraph>
            </RichTextBlock>

            <common:RichTextColumns>
            <common:RichTextColumns.ColumnTemplate>
                <DataTemplate>
                    <RichTextBlockOverflow Margin="80,0,0,0" Width="560">
                        <RichTextBlockOverflow.RenderTransform>
                            <TranslateTransform X="-1" Y="4"/>
                        </RichTextBlockOverflow.RenderTransform>
                    </RichTextBlockOverflow>
                </DataTemplate>
            </common:RichTextColumns.ColumnTemplate>
            <RichTextBlock 
                     common:Properties.Html="{Binding HtmlText}"
                     Name="RichTextBlockMy"
                     Margin="10,0,0,0"
                     Style="{StaticResource ItemRichTextStyle}"
                     Width="560"/>
        </common:RichTextColumns>
    </StackPanel>
</ScrollViewer> 
```

C＃

```
 public string HtmlText { get; set; }
    public string FirstRtbText { get; set; }
    public MainPage()
    {
        this.InitializeComponent();
        FirstRtbText = @"<h1>Header One</h1>

<p>Lorem ipsum <em>emphasised text</em> dolor sit amet, <strong>strong text</strong> 
consectetur adipisicing elit, <abbr title="""">abbreviated text</abbr> sed do eiusmod tempor 
<acronym title="""">acronym text</acronym> incididunt ut labore et dolore magna aliqua. Ut 
<q>quoted text</q> enim ad minim veniam, quis nostrud exercitation <a href=""/"">link text</a> 
ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute <del>deleted text</del> 
<ins>inserted text</ins> irure dolor in reprehenderit in voluptate velit esse cillum 
dolore eu fugiat nulla pariatur. Excepteur sint occaecat <code>code text</code> cupidatat 
non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<blockquote>
<p>Blockquote. Velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat 
cupidatat non proident, sunt in culpa qui officia</p>
</blockquote>";

            HtmlText = @"<h1>Header One</h1>

<p>Lorem ipsum <em>emphasised text</em> dolor sit amet, <strong>strong text</strong> 
consectetur adipisicing elit, <abbr title="""">abbreviated text</abbr> sed do eiusmod tempor 
<acronym title="""">acronym text</acronym> incididunt ut labore et dolore magna aliqua. Ut 
<q>quoted text</q> enim ad minim veniam, quis nostrud exercitation <a href=""/"">link text</a> 
ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute <del>deleted text</del> 
<ins>inserted text</ins> irure dolor in reprehenderit in voluptate velit esse cillum 
dolore eu fugiat nulla pariatur. Excepteur sint occaecat <code>code text</code> cupidatat 
non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<blockquote>
<p>Blockquote. Velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat 
cupidatat non proident, sunt in culpa qui officia</p>
</blockquote>

<p><cite><a href=""/"">Cite author with link text</a></cite>, 2008</p>

<h2>Header 2</h2>

<p>Extended paragraph. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod 
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in 
reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<ol>
<li>Ordered list</li>
<li>Item 2 Consectetur adipisicing elit</li>
<li>Item 3 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor 
incididunt ut labore et dolore magna aliqua</li>
<li>Item 4</li>
<li>Item 5</li>
</ol>

<p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla 
pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit 
anim id est laborum.</p>

<h3>Header 3</h3>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt 
ut labore et dolore magna aliqua.</p>

<ul>
<li>Unordered list</li>
<li>Consectetur adipisicing elit</li>
<li>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt 
ut labore et dolore magna aliqua</li>
<li>Item</li>
<li>Item</li>
<li>Item</li>
</ul>

<p>Lorem ipsum dolor sit amet,consectetur adipisicing elit, sed do eiusmod tempor incididunt 
ut labore et dolore magna aliqua.</p>

<pre><code>pre and code pair{
display:block;
line-height:1.833em;
border-top:0.083em solid #200;
}</code></pre>

<p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla 
pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit 
anim id est laborum.</p>

<h4>Header 4</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt 
ut labore et dolore magna aliqua.</p>

<dl>
<dt>Definition list</dt>
<dd>Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea 
commodo consequat.</dd>
<dt>Lorem ipsum dolor sit amet</dt>
<dd>Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea 
commodo consequat.</dd>
<dt>Lorem ipsum dolor sit amet</dt>
<dd>Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea 
commodo consequat.</dd>
<dt>Lorem ipsum dolor sit amet</dt>
<dd>Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea 
commodo consequat.</dd>
</dl>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt 
ut labore et dolore magna aliqua.</p>

<table summary=""Table summary"">
<caption>Table Caption</caption>
<thead>
<tr>
<th>Header</th><th>Header</th><th>Header</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content</td><td>1</td><td>a</td>
</tr>
<tr>
<td>Content</td><td>2</td><td>b</td>
</tr>
<tr>
<td>Content</td><td>3</td><td>c</td>
</tr>
<tr>
<td>Content</td><td>4</td><td>d</td>
</tr>
<tr>
<td>Content</td><td>5</td><td>e</td>
</tr>
<tr>
<td>Content</td><td>6</td><td>f</td>
</tr>
</tbody>
</table>

<address>Author text</address>
";

            this.DataContext = this;
        } 
```

# ember.js - 将 JSON 对象加载到 Ember 数据中，例如在加载时将 JSON 嵌入页面并填充存储

> ID：15906669
> 
> 赞同：12
> 
> 时间：2013-04-09T15:52:27.587
> 
> 标签：ember.js, ember-data

我的应用程序将初始数据嵌入到 html 中，以便 Ember 在初始化时不需要发送额外的 http 请求。我正在使用最新的 Ember 数据，但无法成功获取 JSON 对象，这与 Active Model Serializer 在保存或创建记录时返回的相同，并将其加载到存储中。

我目前正在尝试这些方法但没有成功：

在一条路线中 -

```
this.get('store').load(App.Post, data) 
```

和

```
this.get('store').loadMany(App.Post, data) 
```

我还使用 Pusher 向我发送更新对象的 JSON（由 Active Model Serializer 生成），并且我的路由中的回调当前看起来像这样。

```
refresh: function(data) {
  var json = data
  var store = this.get('store')
  var type = App.Post
  var id = data.reply.id
  Ember.run(this, function(){
    store.adapterForType(App.Post).didFindRecord(store, type, json, id);
  });
} 
```

有没有人成功做到这一点？我知道 Discourse 没有使用 Ember Data，所以他们的解决方案是不同的。我真的很感激在这件事上的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T16:49:42.060

这些问题都在别处讨论过。我将为您提供其他讨论的指示，以便您可以在人们改进当前答案时跟随对话：

*   如需手动加载数据，请参阅[此 StackOverflow 帖子](https://stackoverflow.com/questions/15907029/load-a-model-manually-with-emberdata)。
*   要更新服务器上已更改的数据，请参阅[此 Discussion.emberjs.com 帖子](http://discuss.emberjs.com/t/will-ember-data-support-full-real-time-updates/883)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-27T21:23:50.050

```
actions: {
  save() {
    let json = this.get('json');
    json.id = '123123'; // id is required in order to use store.push
    let store = this.get('store');
    this.set('myModel', store.push(store.normalize('myModel', json)));
  }
} 
```

# android - html没有出现在Android上

> ID：15906671
> 
> 赞同：1
> 
> 时间：2013-04-09T15:52:30.073
> 
> 标签：android, css, html

我有一个具有以下 css 的元素。

```
background: #ccc;
position: fixed;
width: 100%;
top: 0;
z-index: 99; 
```

我已经在 android 2.3 上测试了该网站，它工作正常，但是当我在运行 4.0 的设备上加载它时，该元素没有显示。我已经使用 Adob​​e Edge Inspect（以前称为 Adob​​e Shadow）对其进行了检查，并将`background`属性更改为`background:initial`，我尝试用其他任何内容覆盖它，但检查员将返回到`background:initial`.

有什么我可以做的来修复它还是这只是一个设备错误？（它可以在移动 chrome 上正确加载）

**编辑：**它只发生在一页，主页

**编辑 2：**这是有问题的 html 菜单

```
 <h1 class="logo"><a href="" rel="nofollow"><img title="" src="" alt=""/></a></h1>

    <div class="social">
        <ul>
            <li class="rss" title="RSS"><a href="">RSS</a></li>
            <li class="twitter" title="Twitter"><a href="">Twitter</a></li>
            <li class="facebook" title="Facebook"><a href="">Facebook</a></li>
            <li>
                <form action="" class="searchform" method="get">
                    <div class="searchform">
                        <label for="s" class="skip"></label>
                        <input type="text" id="s" value="" name="s" class="watermark" placeholder="search"  />
                        <input type="submit" value="Search" class="searchsubmit" />
                    </div>
                </form>
            </li>
        </ul>
    </div>
</div> <!-- end #inner-header -->

<div class="navigation-container" id="main-navigation">
    <nav role="navigation">
        <ul id="menu-nav" class="">
            <li id="menu-item-8" class=""><a href=""</li>
            <li id="menu-item-17747" class=""><a href=""></a></li>
            <li id="menu-item-7" class=" menu-item-7"><a href=""></a></li>
            <li id="menu-item-6" class=""><a href=""></a></li>
            <li id="menu-item-5" class=""><a href=""></a></li>
        </ul>
        <div class="social">
            <ul>
                <li>
                    <form action="" class="searchform" method="get">
                        <div class="searchform">
                            <label for="s" class="skip"></label>
                            <input type="text" id="s" value="" name="s" class="watermark" placeholder="search"  />
                            <input type="submit" value="Search" class="searchsubmit" />
                        </div>
                    </form>
                </li>
                <li class="facebook" title="Facebook"><a href="">Facebook</a></li>
                <li class="twitter" title="Twitter"><a href="">Twitter</a></li>
                <li class="rss" title="RSS"><a href="">RSS</a></li>
            </ul>
        </div>
    </nav>
</div> 
```

正如您可能注意到的，也可能没有注意到，这是 wordpress 主题的一部分，它位于页眉中，因此每个页面都有完全相同的页眉。出于某种原因，这只会在主页上中断。另一个注意事项，我已经删除了很多识别信息，所以链接没有网址，其他东西也丢失了，但所有元素都在那里

# python - 将 BIRT 与 Python Django 集成时遇到问题

> ID：15906675
> 
> 赞同：3
> 
> 时间：2013-04-09T15:52:43.447
> 
> 标签：python, django, django-views, birt

我正在尝试将 BIRT 与 Python Django 集成。我在 Django 中创建了一个表单，允许用户将参数输入到报告中。提交表单后，视图获取参数并创建请求并将其发送到 BIRT Tomcat 服务器。现在我正在尝试呈现来自服务器的响应。这是我的看法：

```
def birt_report(request, report_id, report_url=None, template='report_parameters.html'):
    if request.method == 'POST':
        form = ReportParametersForm(request.POST)
        if form.is_valid():
            report_params = form.save()
            form_id = report_params.id
            url = "http://<hostname>/BIRT-Viewer/frameset?__report=" + report_url + ".rptdesign"
            url += "&param_id=" + str(form_id)
            r = requests.get(url)
            return HttpResponse(content=str(r.content),status=200,content_type='text/html; charset=utf-8')
    else:
        form = ReportParametersForm()
        return render(request,template, {
            'form': form,
            'report_url': report_url,
            'report_id': report_id,
        }) 
```

一切正常，直到我尝试渲染 BIRT 服务器发回给我的内容。我得到了默认的 BIRT Web 应用工具栏。但是，页面的报告部分是空白的。这是它的样子：

![BIRT报告](https://i.stack.imgur.com/4FFsZ.png)

该报告在我的 Eclipse Report Designer 预览中正确生成。如何让报告在这里呈现？谢谢！

编辑：

我查看了页面加载时发生的情况，并在我的 Javascript 控制台中收到此错误：

```
POST http://<hostname>/<Django_URL>/__sessionId=20130410_103510_658?__sessionId=20130410_103510_658 404 (NOT FOUND)
    prototype.js:656
Ajax.Request.Object.extend.request
    prototype.js:656
Ajax.Request.Object.extend.initialize
    prototype.js:631
(anonymous function)
    prototype.js:24
BirtCommunicationManager.connect
    BirtCommunicationManager.js:58
BirtEventDispatcher.sendEvent
    BirtEventDispatcher.js:179
BirtEventDispatcher.broadcastEvent
    BirtEventDispatcher.js:141
Object.extend.__init_pag
e    BirtNavigationBar.js:243
init
    <hostname>:1604
onload
    <hostname>:91 
```

当我通过 BIRT 随附的 BIRT Viewer webapp 访问报告时，Javascript 文件 [b]prototype.js:656[/b] 使用以下 URL：

```
http://<hostname>/BIRT-Viewer/frameset?__report=<report_name>.rptdesign&param_id=1&__sessionId=20130410_103510_658 
```

代替：

```
http://<hostname>/<Django_URL>/__sessionId=20130410_103510_658?__sessionId=20130410_103510_658 
```

# .net - 在客户端使用 SSL 和自托管 WebAPI

> ID：15906676
> 
> 赞同：2
> 
> 时间：2013-04-09T15:52:47.620
> 
> 标签：.net, ssl, asp.net-web-api

我必须在本地网络上做一个对等应用程序，基本上是一个发布文件的服务，而本地网络上的另一个应用程序使用它。

我的想法是在服务中使用 WebAPI 并希望使用 SSL。用户将在本地安装这两个应用程序。这是一个可行的解决方案吗？如果是这样，我找到[了这篇文章](http://pfelix.wordpress.com/2012/02/26/enabling-https-with-self-hosted-asp-net-web-api/)，但不知道如何获得证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T05:39:52.567

Yes - it's a feasible solution.

Here's a quick overview of what's going on behind the scenes when you've got SSL (or TLS) in the mix: [http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html](http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html)

Specifically, you'll get two benefits from using HTTPS: - Encryption - Trust (as in, IF you've got certificates that identify each end-point, then you'll be able to be 'sure' that your client apps are connecting to each other and not, presumably, some 'sneak' on a laptop in the lobby/etc.)

The problem, then, is just finding some decent docs on how to get this all set up (and determining WHERE you're going to get your certs from (if they're self-signed (i.e., without your own/corporate signing authority or without a trusted 3rd party authority), then you can LOSE the trust benefit listed above).

In terms of docs, the following resource seem to be quite decent (though I've only GLANCED at it):

*   [http://woloski.com/2012/08/04/securing-aspnet-webapi-with-clientcerts/](http://woloski.com/2012/08/04/securing-aspnet-webapi-with-clientcerts/)

And, it appears that Matias has even created a Nuget package that should make this all tons easier to set up: [http://nuget.org/packages/Auth10.AspNet.WebApi.ClientCert/](http://nuget.org/packages/Auth10.AspNet.WebApi.ClientCert/)

(I need to check that out myself - as I've only glanced at it.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T00:47:34.857

我把这个放在这里供参考；您的 certhash 问题的具体答案如下：

[（这篇）](https://pfelix.wordpress.com/2012/02/26/enabling-https-with-self-hosted-asp-net-web-api/)文章比较详细地描述了如何在客户端/自托管 .net 应用程序上设置 HTTPS。

我可以使用我正在处理的在 Windows 服务下运行的自托管项目的变体跳过第 1 步，但如果您使用在用户下运行的控制台或其他应用程序，则绝对需要这样做。

如果您在 VB.NET 中工作，您的 MyHttpsSelfHostConfiguration 类将如下所示：

```
Imports System.ServiceModel.Channels
Imports System.Web.Http.SelfHost
Imports System.Web.Http.SelfHost.Channels

Public Class MyHttpsSelfHostConfiguration
    Inherits HttpSelfHostConfiguration
    Public Sub New(baseAddress As String)
        MyBase.New(baseAddress)
    End Sub
    Public Sub New(baseAddress As Uri)
        MyBase.New(baseAddress)
    End Sub
    Protected Overrides Function OnConfigureBinding(httpBinding As HttpBinding) As BindingParameterCollection
        httpBinding.Security.Mode = HttpBindingSecurityMode.Transport
        Return MyBase.OnConfigureBinding(httpBinding)
    End Function

End Class 
```

此外，如果您选择在 Windows 服务而不是标准应用程序下运行它（此处供参考），您需要将'server As New HttpSelfHostServer(config)' 调暗，而不是使用 Using 子句，**如**Windows 服务会立即处理 Using （或者我在别处读过）。

如果您选择的 REST 客户端（用于测试）未连接，请尝试在浏览器中指向您的服务方法（如果可能），因为浏览器会在尝试通过 https 通信时告诉您安装的证书是否存在问题。

我也很难获得证书。

您可以通过以下步骤执行此操作：

1.  打开“MMC”
2.  文件 > 添加管理单元 > 证书（计算机帐户/本地计算机）> 确定
3.  打开证书管理单元 > 个人 > 证书，并找到具有服务器身份验证的预期目的的证书（在预期目的列中）
4.  双击此证书。
5.  转到详细信息选项卡，然后找到指纹键
6.  复制此键的值。将其粘贴到**记事本++**中。
7.  转到**编码**菜单，然后选择**转换为 ANSI**。这将显示一个隐藏字符“？” 在开始时，您必须删除。清除此数字中的空格，然后您可以将其用于您的证书哈希。

如果您在上述证书列表中没有证书，您可以通过以下步骤轻松创建一个（自签名）：

1.  打开 IIS 管理器
2.  在 IIS 管理器中打开您的服务器
3.  打开“服务器证书”页面
4.  在右侧的“操作”下，选择“创建自签名证书”

# java - 写/读字节的数据结构

> ID：15906681
> 
> 赞同：2
> 
> 时间：2013-04-09T15:52:59.860
> 
> 标签：java, java-io

我一直遇到我想要一些结构的情况，比如说缓冲区大小为 4096，我可以

1.  将字节写入
2.  从中读取字节
3.  将读取重置为上一次读取
4.  最重要的是，当数据窗口接近字节数组的末尾时，不必处理复制内容！！！（这很像一个循环缓冲区，基本上带有环绕或其他东西）

ByteBuffer 似乎和 byte[] 一样令人心痛，因为你在这两个上写入和读取它，数组的开头开始清空。我几乎只想要一个 List 或其他东西的结构......我只想为我管理它（或者我可能必须编写自己的结构）。我认为带有标记和重置的某种 InputStream 会很好，因此我可以在读取之前进行标记，然后在缓冲区中没有足够数据的情况下重置。

这在几乎所有异步编程中都非常有用，其中数据进入并且您可能有足够的解析或可能没有足够的解析并且您填充缓冲区，尝试读取和解析并且需要重置直到您有更多数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:03:21.610

`ByteBuffer`似乎完全适合这一点，`ByteBuffer.compact()`当您想将剩余的缓冲区移回开始时，这确实是您想要使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:59:34.843

您也许可以使用[这个循环字节缓冲区](http://ostermiller.org/utils/CircularBuffer.html)- 使用 getAvailable() 方法而不是读取然后重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:07:02.243

嗯，我刚发现这个非 GPL 的……apache 许可证看起来像……

[https://svn.apache.org/repos/asf/etch/releases/release-1.0.0/util/src/main/java/etch/util/CircularByteBuffer.java](https://svn.apache.org/repos/asf/etch/releases/release-1.0.0/util/src/main/java/etch/util/CircularByteBuffer.java)

有人用这个吗？我没问题。

# list - dojo：根据列表中的选择显示或隐藏 div

> ID：15906685
> 
> 赞同：0
> 
> 时间：2013-04-09T15:53:10.747
> 
> 标签：list, dojo, hide, show

有没有一种简单的方法可以使用 dojo 完成此操作（jQuery 对我来说更容易，但我必须使用 dojo）：我有一个简单的无序列表。我不希望 dojo 为列表设置样式（如果我使用一些小部件可能会这样）。当我单击列表上的链接时，我想显示与该链接关联的 div。然后，如果我单击列表中的另一个链接，第一个 div 会隐藏并显示。

```
<div id="content">
<h2>Header</h2>
 <ul>
 <li><a href="#sub_content1">Link 1</a></li>
 <li><a href="#sub_content2">Link 2</a></li>
 <li><a href="#sub_content3">Link 3</a></li>
 </ul>

<div id="sub_content1" style="display:none;">
<h3>Sub Content Header 1</h3>
<p>Lorem ipsum veritas britas conflictum civa</p>
</div>

<div id="sub_content2" style="display:none;">
<h3>Sub Content Header 2</h3>
<p>Lorem ipsum mobius ceti</p>
</div>

<div id="sub_content3" style="display:none;">
<h3>Sub Content Header 3</h3>
<p>Lorem ipsum citrus pecto</p>
    <ul>
    <li>Lemons</li>
    <li>Limes</li>
    </ul>
</div>

  </div><!-- end of #content --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:47:11.047

所以实际上你正在创建自己的标签容器？如果你真的想自己做，你可能需要这样的东西：

```
require(["dojo/ready", "dojo/on", "dojo/dom-attr", "dojo/dom-style", "dojo/query", "dojo/NodeList-dom"], function(ready, on, domAttr, domStyle, query) {
    ready(function() {
        query("ul li a").forEach(function(node) {
            query(domAttr.get(node, "href")).forEach(function(node) {
                domStyle.set(node, "display", "none");    
            });

            on(node, "click", function(e) {
                query("ul li a").forEach(function(node) {
                    if (node == e.target) {
                        query(domAttr.get(node, "href")).forEach(function(node) {
                            domStyle.set(node, "display", "block");    
                        });
                    } else {
                        query(domAttr.get(node, "href")).forEach(function(node) {
                            domStyle.set(node, "display", "none");    
                        });
                    }
                });
            });
        });
    });
}); 
```

我不确定您对 Dojo 有多熟悉，但它使用一个查询来循环列表中的所有链接（使用`dojo/query`and`dojo/NodeList-dom`模块）（您应该提供一个类名或类似的东西以使其更容易）。然后，对于每个链接，它会检索与它对应的 div 并将其隐藏，它还将一个 click 事件处理程序连接到它（使用`dojo/on`模块）。

当有人单击该链接时，它将（再次）循环所有链接，但这次它这样做是为了确定哪个节点是目标节点，哪个不是（因此它可以隐藏/显示相应的 div）。

我制作了一个[JSFiddle](http://jsfiddle.net/r3KVq/1/)来向您展示这一点。如果仍有不清楚的地方，您应该首先尝试查看 Dojo 的[参考指南](http://dojotoolkit.org/reference-guide/1.8/)，因为它确实展示了大多数模块的最常见用途。

但由于这种行为与 TabContainer 非常相似，我建议您查看[TabContainer 参考指南](http://dojotoolkit.org/reference-guide/1.8/dijit/layout/TabContainer.html)。

# r - 随机替换R中现有矩阵中的值

> ID：15906689
> 
> 赞同：3
> 
> 时间：2013-04-09T15:53:17.583
> 
> 标签：r

我有一个现有矩阵，我想以随机统一的方式用 NA 替换一些现有值。

我尝试使用以下内容，但它只替换了 392 个值`NA`，而不是我预期的 452。我究竟做错了什么？

```
N <- 452

ind1 <- (runif(N,2,length(macro_complet$Sod)))

macro_complet$Sod[ind1] <- NA

summary(macro_complet$Sod)
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max.     NA's 
  0.3222   0.9138   1.0790   1.1360   1.3010   2.8610 392.0000 
```

我的数据看起来像这样

```
> str(macro_complet)
'data.frame':   1504 obs. of  26 variables:
 $ Sod                     : num  8.6 13.1 12 13.8 12.9 10 7 14.8 11.3 4.9 ...
 $ Azo                     : num  2 1.7 2.2 1.9 1.89 1.61 1.72 2.1 1.63 2 ...
 $ Cal                     : num  26 28.1 24 28.5 24.5 24 17.4 26.6 24.8 10.5 ...
 $ Bic                     : num  72 82 81 84 77 68 66 81 70 37.8 ...
 $ DBO                     : num  3 2.2 3 2.7 3.3 3 3.2 2.9 2.8 2 ...
 $ AzoK                    : num  0.7 0.7 0.9 0.8 0.7 0.7 0.7 0.9 0.7 0.7 ...
 $ Orho                    : num  0.3 0.2 0.31 0.19 0.19 0.2 0.16 0.24 0.2 0.01 ...
 $ Ammo                    : num  0.12 0.16 0.15 0.13 0.19 0.22 0.19 0.16 0.17 0.08 ...
 $ Carb                    : num  0.3 0.3 2 0.3 0.3 0.3 0.3 0.3 0.3 0.5 ...
 $ Ox                      : num  10.2 9.7 9.8 9.6 9.7 9.1 9.1 8.1 9.7 10.6 ...
 $ Mag                     : num  5.5 6.5 6.3 7 6.4 5.1 6 6.7 5.7 2 ...
 $ Nit                     : num  4.2 4.7 5.7 4.6 4.2 3.5 4.9 4.5 4.2 2.8 ...
 $ Matsu                   : num  17 9 24 15 17 19 20 19 13 3.9 ...
 $ Tp                      : num  10.5 9.7 11.9 12 12.9 11.2 12.8 13.7 11.5 10.6 ...
 $ Co                      : num  3 3.45 3.3 3.54 2.7 2.7 3.3 3.49 2.8 1.8 ...
 $ Ch                      : num  17 24 22 28 25 19 13 28 23 6.4 ...
 $ Cu                      : num  25 15 20 20 15 20 15 15 20 15 ...
 $ Po                      : num  3.5 3.8 4 3.6 3.8 3.7 3 4.2 3.7 0.4 ...
 $ Ph                      : num  0.2 0.17 0.2 0.14 0.18 0.2 0.17 0.17 0.17 0.01 ...
 $ Cnd                     : int  226 275 285 295 272 225 267 283 251 61 ...
 $ Txs                     : num  93 88 89 86 87 88 84 80 91 94 ...
 $ Niti                    : num  0.06 0.09 0.07 0.06 0.08 0.07 0.08 0.11 0.1 0.01 ...
 $ Dt                      : num  9 9.7 9 10.2 8 8 7 9.4 8.5 3 ...
 $ H                       : num  7.6 7.7 7.6 7.7 7.55 7.4 7.3 7.5 7.5 7.6 ...
 $ Dco                     : int  17 12 15 13 15 20 16 14 12 7 ...
 $ Sf                      : num  22 20.5 18 22.2 22.1 21 11.6 21.7 21.9 6.8 ... 
```

* * *

我也尝试仅对单个变量执行此操作，但得到了相同的结果。

我使用将我的数据框转换为矩阵

```
as.matrix(n1) 
```

然后我只为一个变量替换了一些值

```
N <- 300

ind <- (runif(N,1,length(n1$Sodium)))

n1$Sodium[ind] <- NA 
```

然而，使用`summary()`我观察到只有 262 个值被替换，而不是预期的 300 个。我究竟做错了什么？

```
summary(n1$Sodium)
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max.     NA's 
  0.3222   0.8976   1.0790   1.1320   1.3010   2.8610 262.0000 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:56:45.820

试试这个。这将在不替换的情况下均匀地对您的矩阵进行采样（因此不会选择相同的值并替换两次）。如果您想要其他分布，您可以使用`prob`参数修改权重（请参阅 参考资料`?sample`）

```
vec <- matrix(1:25, nrow = 5)
vec[sample(1:length(vec), 4, replace = FALSE)] <- NA

vec
     [,1] [,2] [,3] [,4] [,5]
[1,]   NA    6   NA   16   NA
[2,]   NA    7   12   17   22
[3,]    3    8   13   18   23
[4,]    4    9   14   19   24
[5,]    5   10   15   20   25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T16:59:38.117

您必须`runif`在正确的位置申请，即 vec 的索引。（您现在拥有它的方式是，您要求从和`R`之间的均匀分布中抽取随机数，这当然没有意义，因此它会返回s）`NA``NA``NaN`

请尝试：

```
 N  <-  5                                   # the number of random values to replace
      inds <- round ( runif(N, 1, length(vec)) )   # draw random values from [1, length(vec)]
 vec[inds] <- NA                                   # use the random values as indicies to vec, for which to replace 
```

请注意，没有*必要*使用`round(.)`since将接受数字，但默认情况***下***`[[`它们都会被四舍五入，这比统一的 dist 略小。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-02T21:03:58.047

我们可以使用

```
vec[sample(seq_along(vec), 4, replace = FALSE)] <- NA 
```*

# php - 使用三元运算符 php 在 foreach 之前改进 is_array 语句

> ID：15906690
> 
> 赞同：0
> 
> 时间：2013-04-09T15:53:18.280
> 
> 标签：php, arrays, foreach, ternary-operator

我有

```
if ( is_array($this->input->post("tolerance")) )
   foreach($this->input->post("tolerance")  as $tolerance) 
           $tolerances      .= $tolerance . " " ;
else
    $tolerances = 'Not defined'; 
```

我想缩短代码，因为我们都知道我们在获取数组值之前验证它是否是一个数组

那么缩短这个的正确方法是什么？

```
is_array($this->input->post("tolerance")) ? foreach($this->input->post("tolerance") as tolerance)  $tolerances .= $tolerance . " " : $tolerances = 'Not defined'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:54:34.763

在保留`foreach`. 三元运算符不应该像这样使用。它用于表达式，而不是语句。

好例子：

```
$foo = xyz() ? 'foo' : 'bar'; 
```

不好的例子：

```
xyz() ? foo() : bar(); 
```

更糟糕的例子（语法错误）：

```
is_array($foo) ? foreach($foo as $bar) ... 
```

* * *

缩短代码的唯一正确方法是使用临时变量而`implode`不是循环：

```
$tolerance = $this->input->post('tolerance');
$tolerance = is_array($tolerance) ? implode(' ', $tolerance) : 'Not defined'; 
```

在这种情况下，三元运算符非常好，因为现在您在 then/else 部分中只有一个表达式，而不是语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:56:25.207

尝试使用`implode()`，如下所示：

```
$tolerances = is_array($this->input->post("tolerance")) ? implode(' ', $this->input->post("tolerance")) : 'Not defined' ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:20:47.733

我想不出任何好的方法来做到这一点，但要刻薄，做一个：

```
/* @ == ignore expected warning, $r == assign on testing */
$tolerances = ($r = @implode(' ', $this->input->post("tolerance")) ) ? $r : 'Not defined'; 
```

我知道，大多数人认为这是不好的做法。

另一种选择，使用 foreach：

```
$tolerances = is_array($arr=$this->input->post("tolerance")) ? call_user_func(function($p) { foreach($p as $t) $ts .= $t . " "; return $ts;}, $arr) : 'Not defined'; 
```

只是遵循“不良做法”的哲学：如果可能，那就是它的意思。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:00:12.867

```
$tolerances = ( is_array($this->input->post("tolerance")) == false ) ? "Not defined" : implode(" ", implode($this->input->post("tolerance"))) ; 
```

# c++ - 解析用户定义的格式？

> ID：15906691
> 
> 赞同：1
> 
> 时间：2013-04-09T15:53:29.507
> 
> 标签：c++, parsing, boost

我喜欢[`Boost property_tree`](http://www.boost.org/doc/libs/1_41_0/doc/html/property_tree.html)解析某些类型文件的方式。但我的文件有点不同

```
/*--------------------------------*- C++ -*----------------------------------*\
| WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW |
\*---------------------------------------------------------------------------*/
INFORMATION
{
    version     2.0;
    format      ascii;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

school
{
    "(boys|girls)"
    {
        hair red;
        legs short;
        nose long;
        mood good;
    }

    workers
    {
        hair green;
        legs long;
        nose abnormal;
        mood bad;
    }
}

// ************************************************************************* // 
```

我希望它可以这样使用

```
string myMood = pt.get<std::string>("school.boys.mood");
cout<< "\tmyMood is = " << myMood << endl; 
```

这是非常干净和直接的。

但目前看来 boost ptree INFO 解析器无法处理注释和`"(boys|girls)"`类型。

有什么解决办法吗？

# java - 行被另一个事务更新或删除，或者未保存的值映射不正确

> ID：15906698
> 
> 赞同：0
> 
> 时间：2013-04-09T15:53:41.420
> 
> 标签：java, hibernate

我正在处理休眠查询

数据库有大学（父母）和用户（孩子）..用户已经存储在数据库中。

用户有孩子的地址、联系人

交易A：

在这里，数据将与大学和用户一起从数据库中获取，然后更新大学。

当用户从一所大学更改为另一所大学时...事务 A 将通过获取大学表来更新大学并进行如下更新。在这种情况下，只有大学 ID 将由父母（即大学）在用户表中更新

```
user.setCollege(college);
saveorupdate(college) 
```

事务 B：

保存或更新一位父母（用户）和他们的孩子到数据库中..（用户有地址，联系人）..分别用地址和联系人更新用户..

仅使用事务 B 就可以正常工作..

与事务A，然后完成事务A，然后与B开始新事务......

这里是说 Row 已经被另一笔交易更新为联系人

# c - 将值传递给另一个 c 文件

> ID：15906703
> 
> 赞同：1
> 
> 时间：2013-04-09T15:54:00.000
> 
> 标签：c, variables, return-value

我有一个`A.c`包含一些`char*`变量的文件`str1`。我有一个`B.c`文件，其中包含一些`f()`函数，对`char*`变量进行一些转换。

我的观点是：如何传递`str`to的值`B.c`，然后计算新的字符串`f()`，然后将新的字符串值发回给`A.c`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:56:08.250

例如：

```
// file: A.c

char* str1; 
```

和

```
// file: B.c

extern char* str1;

void f(void)
{
  str1 = "blah";
} 
```

# c# - 如何使用 LINQ 根据子项和比较器之间的交叉值过滤和操作结果？

> ID：15906704
> 
> 赞同：1
> 
> 时间：2013-04-09T15:54:04.760
> 
> 标签：c#, linq, linq-to-entities

感谢您的关注！

# 背景

我正在用 C# 编写并使用 LINQ 查询实体以获取报告。在这份报告中，我有一组基本上如下所示的实体：

```
Customer{
       Name: "Bob",
       ProductsPurchased: ArrayOfChildEntities[{
             ProductId: 1,
             ProductTypeId: 5,
             ProductName: "FooBuzz"
          },
          {...},
          {...}]
} 
```

`ProductsPurchased`是包含产品类型 ID 的子实体数组。假设我传入了用户从视图中的过滤器列表中选择的类型 ID 数组：

`var ProductTypesToShow = [1, 3, 5];`

因此，对于每个返回的客户，我只想显示他们购买的类型为`1`、`3`或的产品`5`。 *如果客户从未购买过至少一种类型为 、 或 的产品`1`，`3`则应`5`从结果集中删除整个客户对象。*

# 我试过的

我试过使用这样的东西：

```
var customers = db.Customers.Where(c => c.ProductsPurchased.Select(p => ProductTypesToShow.Contains(p.ProductTypeId)); 
```

但这失败了。我也尝试了各种版本，`Intersect`但`Any`不幸的是它们都因某种原因而失败，或者它们无法完成我需要的所有事情：

1.  仅选择购买类型为 、 或 的产品`1`的`3`客户`5`。

2.  在这些客户中，删除任何不属于 、 或 类型的产品`1`，`3`然后`5`再将数据发送回视图。

最后，我写了一个`foreach`怪物，它迭代在初始查询中找到的所有客户，然后迭代他们的产品以按产品类型进行过滤，但这慢得让人无法接受（每个查询大约需要 3 分钟！！）。

我觉得我必须在这里遗漏一些明显的东西。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:01:31.083

很难说它是否适用于 LINQ to Entities，但我会尝试那个：

```
var results = (from c in customers
               select new 
                   {
                       Name = c.Name,
                       Products = c.ProductsPurchased.Where(p => ProductTypesToShow.Contains(p.ProductTypeId))
                   } into c2
               where c2.Products.Any()
               select new
                   {
                       Name = c2.Name,
                       Products = c2.Products.ToArray()
                   }).ToArray(); 
```

它应该返回一个具有 2 个属性的匿名类型数组：`Name`和`Products`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:09:41.677

这就是我在 LinqToSql 中的做法。我不确定 LinqToEntities 是否支持包含。

```
List<int> ProductTypesToShow = new List<int>() {1,3,5};

IQueryable<Product> productQuery = dc.Products
  .Where(p => ProductTypesToShow.Contains(p.ProductTypeId));  //deferred

var customerProductQuery =
  from c in dc.Customers
  join p in productQuery on c.CustomerID equals p.CustomerID into g //groupjoin!
  where g.Any()
  select new {Customer = c, Products = g.ToList()}; //customers with their products. deferred

List<Customer> result = new List<Customer>();

foreach(var pair in customerProductQuery)  //query executed
{  //manual result shaping
  Customer resultItem = pair.Customer;
  resultItem.Products = pair.Products;
  result.Add(resultItem);
}

return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:09:13.117

```
var results = customers
.Where(cust=>cust.ProductsPurchased.Any(ProductsToShow.Contains))
.Select(cust=>new{
           cust.Name,
           Purchases=cust.ProductsPurchased.Where(ProductsToShow.Contains)
    }); 
```

# php - 如何处理未定义的常量错误

> ID：15906723
> 
> 赞同：0
> 
> 时间：2013-04-09T15:54:52.853
> 
> 标签：php, mysql

我不知道如何处理我的代码中出现的这个错误

```
Notice: Use of undefined constant result2 - assumed 'result2' in C:\xampp\htdocs\how are things\admin panel\register3.php on line 62 
```

第 62 行的代码是

```
 $result2 = mysql_query("INSERT INTO users (id ,username, user_level, type, first_name, last_name, email, password, phone_number) VALUES('','$username', '2', 'a','$first_name', '$last_name', '$email','$password','$phone_number') ") or die(mysql_error()); 
```

这是找到它的代码

```
if (empty($error)){
     $result = mysql_query("SELECT * FROM users WHERE email='$email' OR username='$username' ") or die(mysql_error());
     $result2 = mysql_query("INSERT INTO users (id ,username, user_level, type, first_name, last_name, email, password, phone_number) VALUES('','$username', '2', 'a','$first_name', '$last_name', '$email','$password','$phone_number') ") or die(mysql_error());
     if(!result2){
        die('Could not insert into the database: '.mysql_error());
     }

    } else{
    $error_message = '<span class="error">';
    foreach($error as $key => $Values){
    $error_message.= "$Values";

    }
    $error_message.="</span><br/><br/>";

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:56:47.130

```
if(!result2){ 
```

你错过了那里的美元。请使用IDE编码，这样可以避免此类错误

# .net - .NET 2.0 应用程序 - 最大可移植性需要哪个框架？

> ID：15906726
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:55:07.317
> 
> 标签：.net, visual-studio-2012, .net-2.0, installshield

我正在继续开发为 .NET 2.0 编写的 C# 代码库。我做的第一件事是升级到 Visual Studio 2012，结果发现这需要将我的安装项目升级到 Flexera Software 的 InstallShield Spring 2012。它产生的令人头疼的问题之一是它支持的 .NET Framework 列表：最低的是 3.5，而 2.0 足以满足我的应用程序。

我不打算在我的代码中使用任何 2.0 后的 .NET 功能。我确实想提供可以在尽可能广泛的机器上工作的安装程序。

我可以假设任何可以安装我的应用程序的人都已经安装了 3.5 SP1 或者安装它没有问题吗？

如果没有，即如果有不可忽略的潜在用户类别可以安装和运行我的 .NET 2.0 应用程序，但不能或不会安装 .NET 3.5 Framework，我怎样才能最好地支持这些用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:53:42.627

这里有几个问题在起作用....

如果您不想放弃 Visual Studio 部署项目，但他们在自己的解决方案中并继续使用 VS2010 来维护它们。或者您可以切换到 InstallShield Limited edition 或 Windows Installer XML

.NET 2.0 是一个不错的标准化框架，但要意识到在 Window 7 或 Windows 8 机器上可能没有安装它。最简单的解决方案是针对 .NET 2.0 进行编译，但使用 app.config 指定激活策略以使其能够在 .NET 4.0/4.5 (CLR 4.0) 上运行。

# jquery - Jquery UI - 创建重复的 DOM 元素然后添加和删除类

> ID：15906727
> 
> 赞同：2
> 
> 时间：2013-04-09T15:55:12.477
> 
> 标签：jquery, jquery-ui

我正在开发一个小部件，在汽车行业被称为压扁的青蛙。它基本上是一辆扁平汽车的图像，带有显示损坏位置的图标。我有一个 HTML 图像图标列表，我希望在用户单击时复制这些图标，因此该 HTML 图标的副本将放置在容器 div 中，然后可以将其拖到汽车图像上的位置损坏位置。

一旦创建了副本并且是父容器 div 的子项，我想添加**“可拖动”**类以便可以拖动它，然后删除**“青蛙键”**类，这样它就不会创建此副本的另一个副本点击时。

问题是我在点击元素后努力删除**“frog-key”类......**

这是我的代码...

```
 <!-- Script -->
<script type="text/javascript">

    $(function () {
        $(".draggable").draggable();
    });

    $(document).ready(function () {

        // when an element is clicked, a duplicate is created that can be dragged.
        // where it is placed is where the coordinates will be saved

        $(".frog-key").click(function () {

            var copy = $(this).clone(true);

            // add a unique ID
            copy.attr("id", copy.attr("data-type") + "-1");

            // remove class frog-key as we dont want a duplicate of this copy
            copy.removeClass("frog-key");

            // add the class draggable  - so it can be dragged - jquery UI
            copy.addClass("draggable");

            // add this copy to the container div
            $("#squashed-frog-container").append(copy);

        });

    })
</script> 
```

HTML

```
<div id="squashed-frog" class="large">
<div id="squashed-frog-container">
    <img id="squashed-frog-art" src="/Content/Design/img/ART_squashed_frog_large.png">
</div>
<ul class="unstyled" id="squashed-frog-key">
    <li><span class="pointer sprite frog-key dent" data-type="Dent_Bodyshop"></span>Dent <small>(Bodyshop)</small></li>
    <li><span class="pointer sprite frog-key dent-repair" data-type="Dent_SmartRepair"></span>Dent <small>(Smart Repair)</small></li>
    <li><span class="pointer sprite frog-key scratch" data-type="Scratch_Bodyshop"></span>Scratch <small>(Bodyshop)</small></li>
    <li><span class="pointer sprite frog-key scratch-repair" data-type="Scratch_SmartRepair"></span>Scratch <small>(Smart Repair)</small></li>
    <li><span class="pointer sprite frog-key chip" data-type="Scratch_Chip"></span>Chip</li>
    <li><span class="pointer sprite frog-key multi-chip" data-type="Multiple_Chips"></span>Multiple Chips</li>
    <li><span class="pointer sprite frog-key paint" data-type="Paint_OffColour"></span>Paint <small>(Off Colour)</small></li>
    <li><span class="pointer sprite frog-key paint-repair" data-type="Paint_PreviousRepair"></span>Paint <small>(Previous Repair)</small></li>
    <li><span class="pointer sprite frog-key paint-fallout" data-type="Paint_Fallout"></span>Paint <small>(Fallout)</small></li>
    <li><span class="pointer sprite frog-key rust" data-type="Rust"></span>Rust</li>
    <li><span class="pointer sprite frog-key wheel-Scuff" data-type="Wheel_Scuff"></span>Wheel Scuff</li>
    <li><span class="pointer sprite frog-key sidewall" data-type="Sidewall_Damage"></span>Sidewall Damage</li>
    <li><span class="pointer sprite frog-key broken" data-type="Broken"></span>Broken</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:25:39.797

你只是错过了一行（另外我不得不在点击事件中重新初始化可拖动 - 但这可能是小提琴的错）：

```
copy.unbind("click");
$(".draggable").draggable(); 
```

当您克隆元素时，它保留了它的点击事件。.frog-key 实际上已按计划删除，但不是每次都评估；页面加载后，事件将附加到元素及其克隆上，并一直保持到具体未绑定为止。

我希望这有帮助。

# android - 如何使用 kSOAP 从 Android 向 .NET 发送/接收自定义对象？

> ID：15906729
> 
> 赞同：0
> 
> 时间：2013-04-09T15:55:23.203
> 
> 标签：android, .net, web-services, deserialization, ksoap

所以，我是移动开发和互操作性的新手。我正在开发一个 Android 应用程序，该应用程序将联系人对象发送到运行 .NET Web 服务（通过 kSOAP）的删除服务器。但是服务器中有一个 500 错误，我真的不知道如何映射它，因为它是远程运行的，而且我的主机计划不允许我远程调试。相信是在ASP.NET Web Service中对Java对象的解释有误，不知道是否需要反序列化该对象以及如何做。我希望有经验的开发人员可以帮助我。我已经使用了原始对象（字符串、int 和其他对象），它就像一个魅力，但我真的更喜欢使用我的模型。

Android 应用程序 - Web 服务的调用：

```
 public int webServiceMethodRegisterUser(String... paramss)
{
    String resultData;
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        Contact c = new Contact(paramss[0], paramss[1]);
        c._email = paramss[0];
        c._password = paramss[1];
        c._cellphonesim = paramss[2];
        c._simoperator = paramss[3];
        PropertyInfo pi = new PropertyInfo();
        pi.setName("contact");
        pi.setValue(c);
        pi.setType(c.getClass());
        request.addProperty(pi);
        //request.addProperty("useremail", paramss[0]);
        //request.addProperty("userpass", paramss[1]);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);
        envelope.addMapping(NAMESPACE, "Contact" , new Contact().getClass());
        //Marshal floatMarshal = new Marshal();
        //floatMarshal.register(envelope);
        //Marshal oi = new ();

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object result=(Object)envelope.getResponse();
      //To get the data.
        resultData= result.toString();
        publishProgress(resultData);
        return Integer.parseInt(resultData);
    } catch (Exception e) {
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e1) {  
            throw new RuntimeException(e1.toString());

          }  
        throw new RuntimeException(e.toString());
    }
} 
```

Java 中的自定义对象

```
package com.example.ivi;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Hashtable;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.MarshalDate;
import org.ksoap2.serialization.PropertyInfo;

 public class Contact implements KvmSerializable {

// private variables
int _id;
String _email;
String _password;
String _simoperator;
String _cellphonesim;
String _sn_facebook;
String _sn_linkedin;
String _sn_googleplus;
String _sn_orkut;
String _sn_twitter;
Date _last_refresh;
Date _register_date;

public Contact(int id, String email, String password, String simoperator,
        String cellphonesim, String facebook, String linkedin,
        String googleplus, String orkut, String twitter, Date refreshuser,
        Date userregister) {
    _id = id;
    _email = email;
    _password = password;
    _simoperator = simoperator;
    _cellphonesim = cellphonesim;
    _sn_facebook = facebook;
    _sn_linkedin = linkedin;
    _sn_googleplus = googleplus;
    _sn_orkut = orkut;
    _sn_twitter = twitter;
    _last_refresh = refreshuser;
    _register_date = userregister;
}

public Contact() {
}

// constructor
public Contact(int id, String email, String password) {
    this._id = id;
    this._email = email;
    this._password = password;
}

// constructor
public Contact(String email, String password) {
    this._email = email;
    this._password = password;
}

@Override
public Object getProperty(int arg0) {
    switch (arg0) {
    case 0:
        return _id;
    case 1:
        return _email;
    case 2:
        return _password;
    case 3:
        return _simoperator;
    case 4:
        return _cellphonesim;
    case 5:
        return _sn_facebook;
    case 6:
        return _sn_linkedin;
    case 7:
        return _sn_googleplus;
    case 8:
        return _sn_orkut;
    case 9:
        return _sn_twitter;
    case 10:
        return _last_refresh;
    case 11:
        return _register_date;
    }
    return null;
}

@Override
public int getPropertyCount() {
    // TODO Auto-generated method stub
    return 12;
}

@Override
public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch (index) {
    case 0:
        info.type = PropertyInfo.INTEGER_CLASS;
        info.name = "UserId";
        break;
    case 1:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserEmail";
        break;
    case 2:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserPassword";
        break;
    case 3:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserSimOperator";
        break;
    case 4:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserCellPhoneSim";
        break;
    case 5:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserFacebook";
        break;
    case 6:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserLinkedin";
        break;
    case 7:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserGoogleplus";
        break;
    case 8:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserOrkut";
        break;
    case 9:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "UserTwitter";
        break;
    case 10:
        info.type = MarshalDate.DATE_CLASS;
        ;
        info.name = "UserLastRefresh";
        break;
    case 11:
        info.type = MarshalDate.DATE_CLASS;
        ;
        info.name = "UserRegisterDate";
        break;
    }
}

@Override
public void setProperty(int index, Object value) {
    SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yyyy");
    switch (index) {
    case 0:
        _id = Integer.parseInt(value.toString());
        break;
    case 1:
        _email = value.toString();
        break;
    case 2:
        _password = value.toString();
        break;
    case 3:
        _simoperator = value.toString();
        break;
    case 4:
        _cellphonesim = value.toString();
        break;
    case 5:
        _sn_facebook = value.toString();
        break;
    case 6:
        _sn_linkedin = value.toString();
        break;
    case 7:
        _sn_googleplus = value.toString();
        break;
    case 8:
        _sn_orkut = value.toString();
        break;
    case 9:
        _sn_twitter = value.toString();
        break;
    case 10:
        try {
            _last_refresh = formatter.parse(value.toString());
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    case 11:
        try {
            _register_date = formatter.parse(value.toString());
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    }
}
 } 
```

. 网络服务

```
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Serialization;

 namespace WebServiceIvi
{

[WebService(Namespace = "http://www.ividomain.somee.com/Service1")]
[WebServiceBinding(ConformsTo = WsiProfiles.None)]
[System.ComponentModel.ToolboxItem(false)]

public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public int registerUser(Contact contato)
    {
        string connString = CONNECTION_STRING;
        SqlConnection con = new SqlConnection(connString);
        SqlCommand cmdSQL = con.CreateCommand();
        try
        {
            con.Open();
            cmdSQL.CommandText = String.Format("INSERT INTO [databaseivi].[dbo].[UsersIvi]  ([Useremail],[Userpass],[Userxml],[Usersince]) VALUES('{0}','{1}',null ,getDate())", contato.UserEmail, contato.UserPassword);
            int result = cmdSQL.ExecuteNonQuery();
            con.Close();

            return result;
        }
        catch (SqlException e)
        {
            foreach (SqlError error in e.Errors)
            {
                return error.Number;
            }
            return 0;
        }     
    }
}
} 
```

C# 中的自定义对象：

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;

 namespace WebServiceIvi
{
public class Contact
{
    public Contact(int id, String email, String password, String simoperator, String     cellphonesim, String facebook, String linkedin, String googleplus, String orkut, String twitter, DateTime refreshuser, DateTime userregister )
    {
        _id = id;
         _email = email;
         _password = password;
         _simoperator = simoperator;
         _cellphonesim = cellphonesim;
         _sn_facebook = facebook;
         _sn_linkedin = linkedin;
         _sn_googleplus = googleplus;
         _sn_orkut = orkut;
         _sn_twitter = twitter;
        _last_refresh = refreshuser;
        _register_date = userregister;
    }

    public Contact()
    {
    }

    int _id;
    String _email;
    String _password;
    String _simoperator;
    String _cellphonesim;
    String _sn_facebook;
    String _sn_linkedin;
    String _sn_googleplus;
    String _sn_orkut;
    String _sn_twitter;
    DateTime _last_refresh;
    DateTime _register_date;

    public int UserId
    {
        set { _id = value; }
        get
        {
            if (_id <= 0) return _id;
            else return 0;
        }
    }
    public string UserEmail
    {
        set { _email = value; }
        get
        {
            if (_email != null) return _email.ToString();
            else return string.Empty;
        }
    }
    public string UserPassword
    {
        set { _password = value; }
        get
        {
            if (_password != null) return _password.ToString();
            else return string.Empty;
        }
    }
    public string UserSimOperator
    {
        set { _simoperator = value; }
        get
        {
            if (_simoperator != null) return _simoperator.ToString();
            else return string.Empty;
        }
    }
    public string UserCellPhoneSim
    {
        set { _cellphonesim = value; }
        get
        {
            if (_cellphonesim != null) return _cellphonesim.ToString();
            else return string.Empty;
        }
    }
    public string UserFacebook
    {
        set { _sn_facebook = value; }
        get
        {
            if (_sn_facebook != null) return _sn_facebook.ToString();
            else return string.Empty;
        }
    }
    public string UserLinkedin
    {
        set { _sn_linkedin = value; }
        get
        {
            if (_sn_linkedin != null) return _sn_linkedin.ToString();
            else return string.Empty;
        }
    }
    public string UserGoogleplus
    {
        set { _sn_googleplus = value; }
        get
        {
            if (_sn_googleplus != null) return _sn_googleplus.ToString();
            else return string.Empty;
        }
    }
    public string UserOrkut
    {
        set { _sn_orkut = value; }
        get
        {
            if (_sn_orkut != null) return _sn_orkut.ToString();
            else return string.Empty;
        }
    }
    public string UserTwitter
    {
        set { _sn_twitter = value; }
        get
        {
            if (_sn_twitter != null) return _sn_twitter.ToString();
            else return string.Empty;
        }
    }
    public DateTime UserLastRefresh
    {
        set { _last_refresh = value; }
        get
        {
            if (_last_refresh != null) return DateTime.Parse(_last_refresh.ToString());
            else return DateTime.MinValue;
        }
    }
    public DateTime UserRegisterDate
    {
        set { _register_date = value; }
        get
        {
            if (_register_date != null) return DateTime.Parse(_register_date.ToString());
            else return DateTime.MinValue;
        }
    }
}
} 
```

SOAP 请求 XML：

```
 POST /Service1.asmx HTTP/1.1
  Host: localhost
  Content-Type: text/xml; charset=utf-8
  Content-Length: length
  SOAPAction: "http://www.ividomain.somee.com/Service1/registerUser"

 <?xml version="1.0" encoding="utf-8"?>
 <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
   <registerUser xmlns="http://www.ividomain.somee.com/Service1">
    <contato>
    <UserId>int</UserId>
    <UserEmail>string</UserEmail>
    <UserPassword>string</UserPassword>
    <UserSimOperator>string</UserSimOperator>
    <UserCellPhoneSim>string</UserCellPhoneSim>
    <UserFacebook>string</UserFacebook>
    <UserLinkedin>string</UserLinkedin>
    <UserGoogleplus>string</UserGoogleplus>
    <UserOrkut>string</UserOrkut>
    <UserTwitter>string</UserTwitter>
    <UserLastRefresh>dateTime</UserLastRefresh>
    <UserRegisterDate>dateTime</UserRegisterDate>
  </contato>
 </registerUser>
 </soap:Body>
 </soap:Envelope> 
```

我已经被困了一段时间，没有在.NET中找到任何java模型的实现和反序列化。我希望有人在那里帮助我！=D

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-14T16:42:34.743

ThiagoMello，我几天前遇到了这个错误，并从这个站点生成 java 类来解决它：

[http://www.wsdl2code.com/Pages/Home.aspx](http://www.wsdl2code.com/Pages/Home.aspx)

有了这些类，我的代码可以正常工作！试试看。

希望这可以帮助。

琼。

# mysql - 显示以前缀开头的 MySQL 表？

> ID：15906730
> 
> 赞同：14
> 
> 时间：2013-04-09T15:55:23.743
> 
> 标签：mysql

我正在尝试按名称以前缀开头的 MySQL 表`"someprefix_"`，但我得到了错误的 (?) 结果。
我试图执行`SHOW COLUMNS LIKE 'someprefix_%'`，但问题是，我也有带前缀`"someprefix2_"`的表，这些表也在结果中返回。

有没有办法从结果中排除具有相似前缀的表？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-09T15:58:05.213

`%`要列出所有带有某个前缀的表，应使用“任意数量的符号”通配符 ( )。

`_`也是一个通配符，代表任何单个符号，因此它应该被转义。

因此，给定您的前缀是`someprefix_`，那么

```
SHOW TABLES LIKE 'someprefix\_%' 
```

会工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:59:27.783

```
SHOW [FULL] TABLES [{FROM | IN} db_name]
[LIKE 'pattern' | WHERE expr] 
```

# php - InnoDB 中批量插入的顺序插入 id

> ID：15906731
> 
> 赞同：1
> 
> 时间：2013-04-09T15:55:31.217
> 
> 标签：php, mysql, pdo, innodb

谁能确认 MYSQL 中的 InnoDB 数据库在使用 PDO（PHP）在单个插入语句中插入多行时会按顺序生成 AI ID？

我正在开发一个项目，用户可以上传一个 excel 文档，该文档通过 excel 文件中的行插入到数据库中。这些文档可以是一行到 ~10,000 个。为了速度，我希望能够将它们插入块中，如果不是全部在一个查询中。

从我读过的内容来看，使用最后一个插入 id 减去插入次数来获取插入的 id 块似乎是安全的。

有没有人有过这不是 100% 安全的经验，或者关于这个主题的任何信息。

如果它有帮助，我将大致如何插入它（我会以 500 个为一组）

*简化插入示例：*

```
for ($i=0; $i < count($rowData['Name']); $i++) {
    $insetPlaceHolders[":name$i"]=$rowData['Name'][$i];
    $insetPlaceHolders[":email$i"]=$rowData['Email'][$i];
    $insetPlaceHolders[":password$i"]=$rowData['Password'][$i];
    $insetPlaceHolders[":employeeId$i"]=$rowData['EmployeeId'][$i];
    $insetPlaceHolders[":startDate$i"]=$formData['StartDate'][$i];
    $appendQuery[]="(:name$i,:email$i,:password$i,:employeeId$i,:startDate$i, {$_SESSION['companyId']})";
}
$appendQuery=implode(',',$appendQuery);
$sth = $this->dbh->prepare("INSERT INTO employees (name, email, password, custom_id, hire_date, company_id) VALUES $appendQuery");
$sth->execute($insetPlaceHolders); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:01:08.367

这不是执行此操作的正确方法。

你会想要两张桌子。一张表保存有关文档的元数据，一张表保存文档的行信息。

然后，您将在元数据表中插入一条记录，并检索为您生成的 id 的值。

然后，您将插入您的详细记录，包括元数据 ID 作为对文档的引用。然后，id 是否连续并不重要。这就是关系数据库存储此类信息的方式。

您的架构将代表如下内容：

```
create table metadata (
    metadataid int autoincrement primary key,
    filename varchar(50) not null,
    ...
);

create table details (
    detailid int autoincrement primary key,
    metadataid int not null references metadata(metadataid),
    ...
); 
```

# routing - AngularJS - 如何只更改一个 routeParam 并重定向？

> ID：15906733
> 
> 赞同：3
> 
> 时间：2013-04-09T15:55:38.357
> 
> 标签：routing, angularjs

我有一条看起来像这样的路线：

```
/Route/:Param1/:Param2/:Param3 
```

在我的控制器中，我想修改其中一条路由，然后重定向到该路由。所以如果我的路线是这样的：

```
/Breakfast/:Eggs/:Bacon/:Cereal 
```

我想轻松路由到：

```
/Breakfast/:Eggs/:Waffles/:Cereal 
```

无需手动重建路线。有没有办法让我做这样的事情：

```
$routeParams.Param2 = "Waffles";
$location.path($route); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T13:40:23.510

实际上，按照我上面的评论，这里是工作示例：http: [//jsbin.com/owiful/1/edit](http://jsbin.com/owiful/1/edit)。当然，服务代码需要一些检查，但它现在可以正常工作。

# visual-studio-2010 - MSTest 在测试中找不到更新

> ID：15906735
> 
> 赞同：0
> 
> 时间：2013-04-09T15:55:49.693
> 
> 标签：visual-studio-2010, unit-testing, mstest

我有一个使用 MSTest 的 Visual Studio 2010 测试解决方案。将来我将为不同的组件添加多个测试项目。最近，当我添加一个新的测试项目时（自从原来的测试项目以来，我第一次在解决方案中添加了一个测试项目），我注意到一个奇怪的问题。每当我在新项目中添加新测试或修改现有测试并尝试执行“重建解决方案”时，Visual Studio 都会显示“重建所有成功”，但更改不会反映在测试结果中。

我可以通过重建特定项目来使更改生效，但是很奇怪，重建全部在我添加的项目中没有生效。

我可以看出更改没有生效，因为我使用上述方法构建了一个工作测试，然后在测试中添加了一行抛出异常，做了一个“重建解决方案”，然后看着测试仍然通过。

这不是一个主要问题，但很高兴知道如何解决它，因为我将在很长一段时间内以这种模式进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:38:23.220

当我弄清楚这一点时，我觉得自己像个傻瓜。

在配置管理器中，我忘记检查添加项目的构建框，所以当我全部重建时，解决方案不知道要构建它。

# java - 使用 CentOS 6 安装 highcharts 服务器

> ID：15906739
> 
> 赞同：1
> 
> 时间：2013-04-09T15:55:59.877
> 
> 标签：java, tomcat, installation, highcharts, centos

我很难找到一个好的教程来创建一个 highcharts 服务器。他们的安装页面似乎没有所需的内容。

[http://docs.highcharts.com/#installation](http://docs.highcharts.com/#installation)

这个 github 页面看起来更接近我所需要的，但我对 Tomcat 很陌生，并且在关注它时遇到了麻烦

[https://github.com/highslide-software/highcharts.com/tree/master/exporting-server/java](https://github.com/highslide-software/highcharts.com/tree/master/exporting-server/java)

到目前为止我所拥有的：

```
 #!/bin/bash

 #allow access for tomcat
 /sbin/iptables -I INPUT -p tcp -m tcp --dport 8080 -j ACCEPT
 echo "[OK]"
 echo -n "Saving new rules"
 (/etc/init.d/iptables save &&  echo "[OK]") || echo "[FAILED]"
 service iptables restart

 yum -y install tomcat6*
 yum -y install java-1.7.0-openjdk java-1.7.0-openjdk-devel
 service tomcat6 start
 chkconfig --levels 35 tomcat6 on

 wget http://download.nextag.com/apache/maven/maven-3/3.0.5/binaries/apache-maven-3.0.5-bin.tar.gz
 tar -xzvf apache-maven-3.0.5-bin.tar.gz
 mv apache-maven-3.0.5/ /usr/local/
 echo 'export PATH=/usr/local/apache-maven-3.0.5/bin:$PATH' >> /etc/profile.d/maven.sh

 yum -y install freetype freetype-devel
 yum -y install fontconfig fontconfig-devel

 wget https://phantomjs.googlecode.com/files/phantomjs-1.9.0-linux-x86_64.tar.bz2
 tar -xjvf phantomjs-1.9.0-linux-x86_64.tar.bz2

 yum -y install ant-* ant-apache* ant-commons-logging
 yum -y install git

 git clone https://github.com/highslide-software/highcharts.com.git
 cd highcharts.com
 ant assemble
 ant lint
 ant build 
```

我想我需要编译highcharts，然后将它移动到tomcat目录/var/lib/tomcat6/webapps。但是当我运行 ant build 时出现错误

```
 # ant build
 Buildfile: build.xml

 set.properties:

 clean:
     [mkdir] Created dir: /root/highcharts.com/build/dist/js/adapters
     [mkdir] Created dir: /root/highcharts.com/build/dist/js/modules
     [mkdir] Created dir: /root/highcharts.com/build/dist/highcharts/gfx
     [mkdir] Created dir: /root/highcharts.com/build/dist/highcharts/js/adapters
     [mkdir] Created dir: /root/highcharts.com/build/dist/highcharts/js/modules
     [mkdir] Created dir: /root/highcharts.com/build/dist/highstock/gfx
     [mkdir] Created dir: /root/highcharts.com/build/dist/highstock/js/adapters
     [mkdir] Created dir: /root/highcharts.com/build/dist/highstock/js/modules
     [mkdir] Created dir: /root/highcharts.com/build/tests
     [mkdir] Created dir: /root/highcharts.com/build/coverage-report

 assemble:

 check-crlf:

 do-lint:

 lint:

 minify:

 compile:

 BUILD FAILED
 /root/highcharts.com/build.xml:378: The following error occurred while executing this line:
 /root/highcharts.com/build.xml:336: java.lang.ClassNotFoundException: org.apache.bsf.engines.javascript.JavaScriptEngine

 Total time: 9 seconds 
```

但老实说，我什至不确定我是否以正确的方式处理这件事。我在正确的轨道上吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T18:19:02.857

看起来我完全错误地处理了这个问题。我不需要安装 tomcat、java 或其他任何东西。我安装了字体、phantomjs 和 highcharts，并且可以通过 apache 发送 Web 请求来生成图表。

这是我的设置脚本：

```
 #!/bin/bash
    /sbin/iptables -I INPUT -p tcp -m tcp --dport 80 -j ACCEPT
    echo "[OK]"
    echo -n "Saving new rules"
    (/etc/init.d/iptables save &&  echo "[OK]") || echo "[FAILED]"
    service iptables restart
    service httpd start
    chkconfig --levels 35 httpd on

    yum -y install urw-fonts

    wget -O /root/phantomjs-1.9.0-linux-x86_64.tar.bz2
    https://phantomjs.googlecode.com/files/phantomjs-1.9.0-linux-x86_64.tar.bz2
    tar -C /root/ -xjvf /root/initial_install/phantomjs-1.9.0-linux-x86_64.tar.bz2
    cp /root/phantomjs-1.9.0-linux-x86_64/bin/phantomjs /usr/local/bin/

    cd /var/www/html
    wget http://www.highcharts.com/downloads/zips/Highcharts-3.0.1.zip
    unzip Highcharts-3.0.1.zip
    mkdir /var/www/html/exporting-server/phantomjs/tmp
    chmod 777 /var/www/html/exporting-server/phantomjs/tmp

    perl -pi -e 's/phantomjs\/highcharts-convert.js/\/var\/www\/html\/exporting-server\/phantomjs\/highcharts-convert.js/g' /var/www/html/exporting-server/php/php-phantomjs/index.php
    perl -pi -e "s/phantomjs\/tmp/\/var\/www\/html\/exporting-server\/phantomjs\/tmp/g" /var/www/html/exporting-server/php/php-phantomjs/index.php

    perl -pi -e "s/highstock.js/\/var\/www\/html\/exporting-server\/java\/highcharts-export\/src\/main\/webapp\/WEB-INF\/phantomjs\/highstock.js/g" /var/www/html/exporting-server/phantomjs/highcharts-convert.js
    perl -pi -e "s/highstock-more.js/\/var\/www\/html\/js\/highcharts-more.js/g" /var/www/html/exporting-server/phantomjs/highcharts-convert.js
    perl -pi -e "s/jquery-1.8.2.min.js/\/var\/www\/html\/exporting-server\/java\/highcharts-export\/src\/main\/webapp\/WEB-INF\/phantomjs\/jquery-1.8.2.min.js/g" /var/www/html/exporting-server/phantomjs/highcharts-convert.js 
```

这是可以生成图表的示例 PHP：

（填写 /exporting-server/php/php-phantomjs/demo.html 中的 $hc_options 和 $hc_svg）

```
 <?php
    $url = 'http://highcharts-server/exporting-server/php/php-phantomjs/index.php';
    $filename = 'test.png';

    $hc_options = <<<EOF
    EOF;
    $hc_svg = <<<EOF
    EOF; 
    $hc_type = 'image/png';
    $hc_width = '600';
    $hc_scale = '';
    $hc_product = 'highcharts';
    $hc_callback = "function(){alert('hallo from highcharts')}";

    $post_data = array('options'=>$hc_options,'svg'=>$hc_svg,'type'=>$hc_type,'width'=>$hc_width,'scale'=>$hc_scale,'product'=>$hc_product,'callback'=>$hc_callback);
    $curl_data = http_build_query($post_data);

    $options[CURLOPT_RETURNTRANSFER] = true; // return web page
    $options[CURLOPT_HEADER] = false; // don't return headers 
    $options[CURLOPT_FOLLOWLOCATION] = true; // follow redirects
    $options[CURLOPT_ENCODING] = ""; // handle all encodings
    $options[CURLOPT_USERAGENT] = "ap testing highcharts"; // who am i
    $options[CURLOPT_AUTOREFERER] = true; // set referer on redirect
    $options[CURLOPT_CONNECTTIMEOUT] = 10; // timeout on connect
    $options[CURLOPT_TIMEOUT] = 20; // timeout on response
    $options[CURLOPT_MAXREDIRS] = 10; // stop after 10 redirects

    $options[CURLOPT_POST] = 1; // i am sending post data
    $options[CURLOPT_POSTFIELDS] = $curl_data; // the post data in get format (e.g. name=Bob&age=12

    $options[CURLOPT_SSL_VERIFYHOST] = 0;
    $options[CURLOPT_SSL_VERIFYPEER] = false; 

    #$options[CURLOPT_VERBOSE] = 1; // outputs the web page

    $ch      = curl_init($url); 
    curl_setopt_array($ch,$options);

    $content = curl_exec($ch); 
    $err     = curl_errno($ch);
    $errmsg  = curl_error($ch) ;
    $header  = curl_getinfo($ch);
    curl_close($ch);

    file_put_contents($filename, $content);
    ?> 
```

# code-signing - 如何在虚拟机上使用 EV 代码签名证书来签署 MSI

> ID：15906740
> 
> 赞同：24
> 
> 时间：2013-04-09T15:56:00.640
> 
> 标签：code-signing, code-signing-certificate

我们最近从 DigiCert 购买了 EV 代码签名证书来签署我们的 MSI 以绕过 Windows SmartScreen 警告消息。问题是证书被传递到不允许导出私钥的 USB 令牌。我们的构建环境位于托管 VM 上，因此我们无法将 USB 令牌插入主机 VM。

有人有在托管 VM 上使用 EV 代码签名证书的解决方案吗？是否所有证书供应商都将此类证书交付给硬件令牌？您如何使用这种类型的证书在虚拟环境中对 MSI 进行代码签名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-07-07T14:18:50.330

SafeNet 客户端附带的加密提供程序正在使用 SmardCardAPI (winscard.dll) 访问 USB 令牌。因为智能卡也用于身份验证/登录目的，所以 RDP 堆栈将始终重定向对 RDP 客户端计算机的任何访问。

[https://docs.microsoft.com/en-us/windows/security/identity-protection/smart-cards/smart-card-and-remote-desktop-services](https://docs.microsoft.com/en-us/windows/security/identity-protection/smart-cards/smart-card-and-remote-desktop-services)

对于像代码签名这样的场景，这种行为可能非常麻烦。我们使用专用的虚拟机进行签名，每个有权访问该机器的开发人员都应该能够执行签名过程。对于 COVID-19 和所有在家工作的开发人员，使用本地 USB 端口的想法是不可行的。我们的 USB-Token 连接到专用机器上。每次您通过 RDP 连接到这台机器时，加密狗都无法再访问，因为 SmartCardAPI 将重定向访问。

然而，这个问题有一个解决方案：SmartCard 堆栈使用 API-Calls

ProcessIdToSessionId

WinStationGetCurrentSessionCapabilities

确定当前进程是否在 RDP 会话中运行。通过将 DLL 注入 signtool 并使用 Detours 框架，您可以挂钩这些 API 调用并报告本地会话，因此 SmardCardAPI 将访问连接到远程虚拟机的加密狗。

[https://github.com/microsoft/Detours](https://github.com/microsoft/Detours)

迂回的功能非常简单（代码简化为重要的东西，所以你可以理解）

```
DWORD WINAPI ProcessIdToSessionIdLocal(DWORD dwProcessId, DWORD *pSessionId)
{
  OutputDebugString("Detoured ProcessIdToSessionId\r\n");
  if (pSessionId)
     pSessionId = 0;
  return TRUE;
}

BOOL WINAPI WinStationGetCurrentSessionCapabilitiesLocal(DWORD flags, DWORD *pOutBuffer)
{
   BOOL bResult;

   OutputDebugString("Detoured WinStationGetCurrentSessionCapabilities\r\n");
   bResult = TrueGetCurStationCapabilities(flags,pOutBuffer);
   if (bResult)
      *pOutBuffer = 0;
   return bResult;
}

BOOL WINAPI DllMain (haDLL, dwReason, lpReserved)
    HANDLE haDLL;
    DWORD dwReason;
    LPVOID lpReserved;
{
    LONG error;
    TCHAR cBuffer[160];

    wsprintf(cBuffer,"DllMain Entry %08x\r\n",dwReason);
    OutputDebugString(cBuffer);
    if (DetourIsHelperProcess()) {
        return TRUE;
    }

    if (dwReason == DLL_PROCESS_ATTACH) {
        OutputDebugString("Starting Detour API Calls \r\n");
        hStaDLL = LoadLibrary("WINSTA.DLL");
        TrueGetCurStationCapabilities = GetProcAddress(hStaDLL,"WinStationGetCurrentSessionCapabilities");

        DetourRestoreAfterWith();
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourAttach((PVOID*)&TrueProcessIdToSessionId, ProcessIdToSessionIdLocal);
        DetourAttach((PVOID*)&TrueGetCurStationCapabilities, WinStationGetCurrentSessionCapabilitiesLocal);
        error = DetourTransactionCommit();

        if (error == NO_ERROR) {
        OutputDebugString("Successfully Detoured API Calls \r\n");

        }
        else {
            return FALSE;
        }
    }
    else if (dwReason == DLL_PROCESS_DETACH) {
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourDetach((PVOID*)&TrueProcessIdToSessionId, ProcessIdToSessionIdLocal);
        DetourDetach((PVOID*)&TrueGetCurStationCapabilities, WinStationGetCurrentSessionCapabilitiesLocal);
        error = DetourTransactionCommit();
        FreeLibrary(hStaDLL);
    }
    return TRUE;
} 
```

将 DLL 注入到 signtool 中也很容易：只需在 IMPORTs 部分添加一个新条目，该条目将加载带有迂回函数的 DLL。这可以使用名为“Lord PE”的工具（用于 32 位可执行文件）来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-30T16:51:02.577

我对我们的完全没有问题。我们在不到 15 分钟的时间内从 PFX（文件）支持的标准代码签名证书切换到了 USB 令牌支持的 EV 代码签名证书。

我只需将 USB 令牌设备设置为连接到 VMWare 中的*客户端*操作系统（请参阅设备客户端操作系统窗口右下方的图标），安装必要的设备驱动程序，将选项设置为每个会话仅需要密码解锁一次，然后很好去。

至于如何签名，您就像使用任何其他证书一样签名。如果操作系统的证书存储中没有其他适用的代码签名证书，*那么您甚至不必指定证书的位置*。

我担心我们会遇到麻烦，但没有。所以，我认为你不会，也不知道你为什么会遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-11T05:58:01.000

对于遇到此问题的其他人，我们使用 VNC 服务器连接到上面有令牌的 VM。它不适用于仅 RDP 的 VNC。

显然，VNC 就像拥有对盒子的控制台访问权限（就 EV 加密狗而言）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T18:27:02.180

EV 代码签名证书需要使用特殊硬件来存储私钥。这就是使它们比标准证书更昂贵和更安全的部分原因。我的建议是使用 signtool.exe 作为构建后步骤在主机上签署可执行文件。

普通代码签名证书没有硬件要求，但它们不像 EV 证书那样“SmartScreen Filter Friendly”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-08T07:52:32.897

包括 VMware 在内的一些虚拟化软件允许重定向 USB 设备。

# java - 什么定义了我的项目的“战争性”？

> ID：15906742
> 
> 赞同：4
> 
> 时间：2013-04-09T15:56:07.193
> 
> 标签：java, maven

我正在执行目标：`tomcat:deploy`. 没有错误，但它没有将我的项目部署到tomcat中。我注意到这条消息：

```
[INFO] Skipping non-war project 
```

什么定义了我的项目的“战争性”？如何使我的 Eclipse 项目成为战争项目？

这是我的插件设置：

```
 <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.1</version>
    </plugin> 
```

我有这样的结构：

```
src > main > java 
src > main > webapp > WEB-INF > web.xml 
```

这个适用于`maven:war plugin`. 我可以用这种结构发动战争。

我的最终目标是取消战争建设部分，并能够使用一个 Maven 命令将我的项目部署到 tomcat。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T15:59:19.373

也许您在以下内容中缺少“包装”元素`pom.xml`：

```
 <packaging>war</packaging> 
```

如果您不包含一个，则默认包装为“jar”。

# java - 从 Windows 批处理文件中将文件名输入到 jar 中

> ID：15906744
> 
> 赞同：0
> 
> 时间：2013-04-09T15:56:08.880
> 
> 标签：java, batch-file, batch-processing

从批处理文件执行后，我想将文件输入到我的 jar 中。

我编写了以下批处理代码。

```
@echo off

 set path=%PATH%;C:\Program Files\Java\jre7\bin

 java -jar E:\ER\er_v.3.3.17.jar 
```

上面的代码工作正常。但是，在执行 jar 文件后，我需要提供另一个文件才能成功运行。

我想要这样的东西

```
@echo off

 set path=%PATH%;C:\Program Files\Java\jre7\bin

 java -jar E:\ER\er_v.3.3.17.jar

 echo E:\Run.xml 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:01:40.213

干得好。我对此进行了测试，并且可以正常工作。

```
@echo off
setlocal

:: if java.exe is not in %path%
for %%I in (java.exe) do if "%%~$PATH:I" equ "" (
    set "PATH=%PATH%;C:\Program Files\Java\jre7\bin;C:\Program Files (x86)\Java\jre7\bin"
)

echo E:\Run.xml| java -jar E:\ER\er_v.3.3.17.jar 
```

这会将“E:\Run.xml”传递给`java -jar etc`.

# mysql - if语句的mysql语法问题

> ID：15906748
> 
> 赞同：1
> 
> 时间：2013-04-09T15:56:20.477
> 
> 标签：mysql, phpmyadmin, syntax-error

我在 if 语句附近遇到了这种语法的问题，我不断检查附近的 mysql 语法

```
== 'purp1' and product_price==53, 13, 0) as ShipWeight 
```

这就是我想要完成的。有任何想法吗？

```
select wp_cart66_order_items.order_id as Order_ID,
   wp_cart66_orders.trans_id as Order_Number,
   wp_cart66_orders.bill_first_name as Bill_First_Name,   
   wp_cart66_orders.bill_last_name as Bill_Last_Name,
   wp_cart66_orders.ship_first_name as Ship_First_Name,
   wp_cart66_orders.ship_last_name as Ship_Last_Name,
   wp_cart66_orders.ship_address as Ship_Address1,
   wp_cart66_orders.ship_address2 as Ship_Address2,
   wp_cart66_orders.ship_city as Ship_City,
   wp_cart66_orders.ship_state as Ship_State,
   wp_cart66_orders.ship_zip as Ship_zip,
   wp_cart66_order_items.item_number as Item_Number,
   wp_cart66_order_items.product_price as Price,
   wp_cart66_order_items.Description as OrderItemsDescription,
if(item_number == 'purp1' and product_price==53, 13, 0) as ShipWeight
from wp_cart66_orders 
inner join wp_cart66_order_items
    on wp_cart66_orders.id=wp_cart66_order_items.order_id 
where wp_cart66_orders.ordered_on between "2013-04-01 00:00:00" and "2013-04-02 23:59:59" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:57:31.027

在浏览文档时，我找不到 mysql 是否支持`==`，请尝试将其更改为`=`

```
if(item_number = 'purp1' and product_price=53, 13, 0) as ShipWeight 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/10343)

**更新 1**

采用`CASE()`

```
CASE 
    WHEN item_number = 'marley1' and product_price='12.00' THEN 2
    WHEN item_number = 'samp1' and product_price='19.50' THEN 4
    ELSE 0
END ShipWeight 
```

# c++ - 将静态成员的范围限制为 n 个特定类

> ID：15906751
> 
> 赞同：0
> 
> 时间：2013-04-09T15:56:22.947
> 
> 标签：c++, visual-c++, c++11, c++builder

如何将静态成员的范围限制为特定类？例如，如果我创建 A 类的 a1 对象和 A 类的 a2 对象，我希望这些对象（使用 A 创建的 a1、a2）可以为其静态成员具有不同的值，但它们对应的派生类具有相同的值。

```
 class A{
    public:
           A(int member){
               A::mMember=member;}
           void set(int member){
               A::mMember=member;}
           int get(){
               return A::mMember;}
        protected:
           static int mMember;
    };

    int A::mMember;

    class B:public A{
    public:
        B(int member):A(member){};
    };

    class C:public A{

        C(int member):A(member){};

    };

    int main()
    {   

      A * a1= new A(1);
         std::cout<<"a1: "<< a1->get()<<std::endl;
         B * b1= new B(2);
         std::cout<<"a1: "<< a1->get()<<std::endl;

         // How to make a1 continue be a1=2 and a2 = 5\. I mean how to limit a static member     
         //to  only its derivated class
         A * a2 = new A(5);
         std::cout<<"a1: "<< a1->get()<<std::endl;
         std::cout<<"a2: "<< a2->get()<<std::endl;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:37:45.147

静态成员的全部意义在于它是“一个无处不在”[并非没有限制，但出于这个问题的目的，我们忽略它]。

在您的示例代码中，您似乎想`b1 = B(2)`更改 A 值，但`a2`要为`mMember`. 使用静态成员是不可能的。

对我来说，你真正想要的似乎是一个工厂函数，它知道什么时候需要一个新对象，什么时候不需要，并在相关的构造函数中传递对该对象的引用，或者某种存储（通过A) 中的静态成员函数。

在第一种情况下，看起来有点像这样：

```
class A
{
    public:
       A(int member, int &ref_member) : mref_member = ref_member
       {
           A::mMember=member;
       }
       void set(int member)
       {
           A::mMember=member;
       }
       int get(){
           return A::mMember;
       }
    protected:
       static int mMember;
};

int A::mMember;

class B : public A
{
    public:
        B(int member, int &ref_member) : A(member,ref_member)
        {
        };
};

A* maker(int v, bool needs_new_ref, char type)
{
     static int *ref = NULL;
     if (needs_new_ref || !ref)
     {
        ref = new int;
     } 
     switch(type)
     {
         case 'A':
             return new A(v, ref);
             break;
         case 'B':
             return new B(v, ref);
             break;
     }
 } 
```

第二种选择涉及这样的功能：

```
 int& ref(int id)
 {
    static map<int, int> refs;
    return refs[id];
 } 
```

然后`ref(id)`在您需要参考时致电。你需要想办法为这个生成“id”。

根据您想要实现的具体目标，可能还有很多其他解决方案。我很确定你的问题是一个 XY 问题——你在问如何做 Y，因为你认为这是实现 X 的正确方法。

# windows-8 - 在 Windows Store App 中播放 .m3u8 文件

> ID：15906755
> 
> 赞同：0
> 
> 时间：2013-04-09T15:56:40.993
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我可以在 Windows Store App 中使用 MediaElement 和 Microsoft Smooth Streaming 客户端 SDK 播放 HLS 平滑流文件（扩展名为 .ism/maniest）

但是，将 MediaElement 的源设置为 .m3u8 文件时，不会播放视频。

是否可以在 Windows Store App 中播放 .m3u8 文件？

问候，

SRS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:08:12.407

Windows Store App 似乎不支持 .m3u8 文件。

[支持的音频和视频格式（Windows 应用商店应用程序）](http://msdn.microsoft.com/en-in/library/windows/apps/hh986969.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T09:34:29.713

平台不支持 HLS (m3u8)。但是您有以下选择：

1.  创建您自己的媒体源提供商
2.  [3ivx](http://www.3ivx.com/)，一个同时支持 Windows 商店应用程序和 Windows Phone 8 的库，但它们确实很贵（对我来说，每个应用程序的报价是 7500 澳元）
3.  [Apptelic HLS](http://www.apptelic.com/) ‏，一个适用于 Windows 8 和 windows Phone 的商业库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T11:17:13.790

我已经为此工作了几个月，唯一有效的解决方案就是这个

[http://phonesm.codeplex.com/releases/view/119845](http://phonesm.codeplex.com/releases/view/119845)

我知道它说的是电话，但它确实支持 Windows 8.1 商店应用程序，而且 HLS 是在 Windows 8 应用程序中解决的噩梦，这个选项是开源的，很容易实现希望它可以帮助你

# css - CSS - 身体位置：绝对错误？

> ID：15906759
> 
> 赞同：0
> 
> 时间：2013-04-09T15:56:48.380
> 
> 标签：css

好的，所以我一直在搞乱 css 试图让事情变得恰到好处。事先我的脚本基本上是：

```
html, body {
height:100%;
}
body {
margin:0px;
padding:0px;
} 
```

所以我添加了 position:absolute; 在身体上，它没有做我想要的，所以我把它去掉了。这就是我所做的。从那时起，网站顶部有一个边距/填充，而事先没有。它现在发生在所有浏览器中，所以它必须是服务器端的，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:31:56.427

这是你的问题：

```
.container, container2 {
...
} 
```

你看到了吗？*container2* ...应该是**.container2**

建议你使用这个：http: [//validator.w3.org/](http://validator.w3.org/)

快乐编码！

# javascript - location.reload() 阻止 POST 成功

> ID：15906760
> 
> 赞同：0
> 
> 时间：2013-04-09T15:56:50.630
> 
> 标签：javascript, post

我在由 HTML 按钮的 onClick 属性调用的函数中有以下代码。

它应该做的是 POST 到 .jsp，成功时写入控制台，然后重新加载页面。然而，发生的事情是消息被写入控制台（即调用成功条件），页面重新加载，但 .jsp 没有运行（我在调试中，它甚至没有注册任何东西）。

有趣的是，注释掉 location.reload() 或者简单地在它上面放置一个断点可以让事情正常工作。

为什么会这样？

```
$.ajax({
    type: "POST",
    url: "Move.jsp",
    data: { action: 'move',
        nodeID: nodeID
    },
    success: console.log("Moved " + nodeID)
});
location.reload(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:01:43.557

AJAX 中的 A 代表“异步”。您的`$.ajax()`调用基本上在后台运行并且不会干扰您的其他代码，因此`location.reload()`无论是否发送了 POST 请求，都会立即执行。

此外，`console.log()`应该在匿名函数内部才能正确执行。

您可以使其同步（这将锁定浏览器，直到请求完成）：

```
$.ajax({
    type: "POST",
    url: "Move.jsp",
    async: false,
    data: {
        action: 'move',
        nodeID: nodeID
    }
});

console.log("Moved " + nodeID);
location.reload(); 
```

或将您的移动`location.reload()`到回调中：

```
$.ajax({
    type: "POST",
    url: "Move.jsp",
    data: {
        action: 'move',
        nodeID: nodeID
    },
    success: function() {
        console.log("Moved " + nodeID);
        location.reload();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:59:45.473

在 ajax 调用有机会发布之前刷新页面。

**将您的重新加载移动到成功处理程序中：**

```
$.ajax({
    type: "POST",
    url: "Move.jsp",
    data: {
        action: 'move',
        nodeID: nodeID
    },
    success: function() {
        console.log("Moved " + nodeID);
        location.reload();
    }
}); 
```

# android - 如何强制 ListView 显示单个项目

> ID：15906765
> 
> 赞同：1
> 
> 时间：2013-04-09T15:56:59.070
> 
> 标签：android, user-interface, android-listview, custom-controls

我正在尝试制作像这张图片一样的控件。它将位于我活动的左侧，而 fill_parent 位于高度。

我希望顶部和底部部分转到下一个/上一个项目。我在想一个带有分隔符的 ListView 可能能够做到这一点，但我遇到的主要问题是 ListView 一次只显示 1 个项目。如果我必须将 ListView 放在两个具有自己渐变的单独视图之间并处理我可以移动的 ListView。

但是我如何一次将 ListView 限制为 1？看起来很简单，但我无法弄清楚。我也可能已经锁定使用 ListView 并且忽略了一个更简单的替代方案。

![列表视图图像](https://i.stack.imgur.com/UTXVf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:29:31.723

您可能想看看 Android Gallery 类：http: [//developer.android.com/reference/android/widget/Gallery.html](http://developer.android.com/reference/android/widget/Gallery.html)

我用它来以与您在此处描述的方式相似的方式显示各种视频。尽管我的布局是水平的，并且用户通过在图像之间拖动来滚动。

尽管如此，我认为这将是一个更好的方法，然后尝试让 ListView 为您工作。我当然没有玩过 Gallery 类提供的每个选项。

**编辑：** 由于画廊类已被弃用，替代方案似乎是 ViewFlipper：

[http://developer.android.com/reference/android/widget/ViewFlipper.html](http://developer.android.com/reference/android/widget/ViewFlipper.html)

# python - Python 中的 datetime.astimezone 行为不一致

> ID：15906766
> 
> 赞同：0
> 
> 时间：2013-04-09T15:57:00.860
> 
> 标签：python, datetime, pytz

我的用例只是将日期作为 UTC 存储在数据库中，并在计划和查看计划时间时为用户在美国/中部时间计划实现预期结果。以下不一致的行为让我有些头疼，并且在执行某些更新时，预定的日期偏离了一个小时。

是什么导致以下不一致的行为？我可以指望我在尝试在最后两行中达到理智时观察到的行为吗？有没有更好的方法，即。我没有正确使用日期时间吗？坦率地说，我有点困惑，所以任何帮助表示赞赏！

```
# Instantiate a datetime in December and April and make them timezone aware
decutc = datetime.datetime(2013, 12, 12, 12, 12, 12).replace(tzinfo=pytz.UTC)
aprutc = datetime.datetime(2013, 4, 12, 12, 12, 12,).replace(tzinfo=pytz.UTC)

# Convert both to US/Central, April is STD and December is DST as expected
# NOTE is STD
decutc.astimezone(pytz.timezone('US/Central'))
Out[164]: datetime.datetime(2013, 12, 12, 6, 12, 12, tzinfo=<DstTzInfo 'US/Central' CST-1 day, 18:00:00 STD>)
# NOTE is DST
aprutc.astimezone(pytz.timezone('US/Central'))
Out[165]: datetime.datetime(2013, 4, 12, 7, 12, 12, tzinfo=<DstTzInfo 'US/Central' CDT-1 day, 19:00:00 DST>)
# Move an aware datetime to another month with a different daylight savings time
# NOTE This one DOES NOT change from STD to DST
decutc.astimezone(pytz.timezone('US/Central')).replace(month=4).astimezone(
    pytz.timezone('US/Central'))
Out[166]: datetime.datetime(2013, 4, 12, 6, 12, 12, tzinfo=<DstTzInfo 'US/Central' CST-1 day, 18:00:00 STD>)
# NOTE This one DOES change from DST to STD
aprutc.astimezone(pytz.timezone('US/Central')).replace(month=12).astimezone(
    pytz.timezone('US/Central'))
Out[167]: datetime.datetime(2013, 12, 12, 6, 12, 12, tzinfo=<DstTzInfo 'US/Central' CST-1 day, 18:00:00 STD>) 
```

为了实现一致的行为，我最终做了以下事情：

```
# NOTE correctly goes from STD to DST
decutc.astimezone(pytz.timezone('US/Central')).replace(month=4).astimezone(
    pytz.timezone('US/Central')).astimezone(pytz.UTC).astimezone(pytz.timezone('US/Central'))
Out[172]: datetime.datetime(2013, 4, 12, 7, 12, 12, tzinfo=<DstTzInfo 'US/Central' CDT-1 day, 19:00:00 DST>)

# NOTE correctly goes from DST to STD
aprutc.astimezone(pytz.timezone('US/Central')).replace(month=12).astimezone(
    pytz.timezone('US/Central')).astimezone(pytz.UTC).astimezone(pytz.timezone('US/Central'))
Out[170]: datetime.datetime(2013, 12, 12, 6, 12, 12, tzinfo=<DstTzInfo 'US/Central' CST-1 day, 18:00:00 STD>) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:13:57.290

通常我可以指望 Python 和 Python 库在开箱即用时保持一致:)，但`pytz`选择提供“规范化”功能，我们作为开发人员在进行时区转换时需要注意这一点。问题在于问题不一致，它迫使我们（开发人员）自己决定如何处理所有的疯狂，导致库作者无法为我们做出决定。

[http://pytz.sourceforge.net/#localized-times-and-date-arithmetic](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)似乎是**必须阅读**的。

> 请注意，此库与用于 tzinfo 实现的文档化 Python API 不同；如果您想创建本地挂钟时间，您需要使用本文档中记录的 localize() 方法。此外，如果您对跨越 DST 边界的本地时间执行日期算术，则结果可能位于不正确的时区（即，从 2002-10-27 1:00 EST 减去 1 分钟，您会得到 2002-10-27 0： 59 EST 而不是正确的 2002-10-27 1:59 EDT）。提供了一个 normalize() 方法来纠正这个问题。不幸的是，如果不修改 Python 日期时间实现，就无法解决这些问题。

这是非常不合常规的，因为有不止一种方法可以做有效的事情。IE。对于 UTC`normalize`并且`localize`不是必需的，我们可以观察到工作正常，直到我们在使用其他时区时真正跨越 DST - STD 边界，但在这种情况下，我不确定替代方案会更好（破坏使用标准日期时间 API）。我当然更喜欢堆栈跟踪，而不是默默地糟糕的 astimezone 转换。

我真的把错误归咎于`datetime`文档：

[http://docs.python.org/2/library/datetime.html#datetime.datetime.astimezone](http://docs.python.org/2/library/datetime.html#datetime.datetime.astimezone)

其中提到了 pytz 并且这是获取一些 tzinfo 对象的地方，但没有提到**您最好阅读他们的文档**以获取警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:20:48.353

我能够重现您的结果并获得不一致的行为。为了使其保持一致，我所要做的就是删除`.astimezone(pytz.timezone('US/Central'))`您添加到转换调用上的调用。这样做之后，结果是一致的，即从 STD 到 DST**不会**改变，反之亦然。

换句话说，改变：

```
decutc.astimezone(pytz.timezone('US/Central')).replace(month=4).astimezone(
    pytz.timezone('US/Central'))
aprutc.astimezone(pytz.timezone('US/Central')).replace(month=12).astimezone(
    pytz.timezone('US/Central')) 
```

呼吁只是：

```
decutc.astimezone(pytz.timezone('US/Central')).replace(month=4)
aprutc.astimezone(pytz.timezone('US/Central')).replace(month=12) 
```

**更新**
要在更改日期时获得正确且一致的 STD <--> DST 转换，只需将调用放在调用`.astimezone(pytz.timezone('US/Central')`之后*，*`.replace()`如下所示：

```
decutc.replace(month=4).astimezone(pytz.timezone('US/Central'))
aprutc.replace(month=12).astimezone(pytz.timezone('US/Central')) 
```

如果您考虑一下，这是有道理的，因为发生的事情是首先更改 UTC 日期时间的月份（[不遵守夏令时](http://en.wikipedia.org/wiki/Coordinated_Universal_Time#Daylight_saving)），然后将中间结果转换为一个时区。

因此，总而言之，我建议您将所有日期时间存储在 UTC 中，在该时区进行所有操作，并且仅在绝对必要时转换为特定的本地时间。

# javascript - 如何使这个 if 语句起作用？

> ID：15906767
> 
> 赞同：0
> 
> 时间：2013-04-09T15:57:07.753
> 
> 标签：javascript, jquery, function

我已经为我正在努力的代码制作了一个简化的示例（参见演示）。我首先有一个函数来计算`<p>`包装器 div 内部的行数。根据数量（1、2 或 3 行），包装器 div 应该获得一个额外的类名。

这些是我无法解决的错误：

*   该函数在运行后停止（如您在日志记录中所见）：

    ```
    if (getRows('.item p') === 1) {
    } 
    ```

*   当我在该函数中记录结果时，我得到了 Window 对象，我需要特定的 div 来添加类，以便可以正确定位我的绝对链接

所以结果是绝对链接应该根据行数定位。

是的，我知道这段代码可以用不同的方式编写（就像只是将绝对链接放在我的 p.. 下）但它是 CMS 呈现它的方式，这将是最简单的解决方法.. 如果您想查看结果你可以在第一个项目 div 上添加 item_1，在第二个项目上添加 item_2，依此类推。

演示：http: [//jsfiddle.net/pndJx/](http://jsfiddle.net/pndJx/)

```
if (getRows('.item p') === 1) {
console.log('1 line');
console.log(this);
}

if (getRows('.item p') === 2) {
console.log('2 lines');
}

if (getRows('.item p') === 3) {
console.log('3 lines');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:00:30.663

以这种方式编写您的代码

```
$('.item p').each(function() {
   var $this = $(this),
       rows  = getRows($this);

   console.log('%d lines', rows);

   /* add class */
   $this.parent().addClass('item_' + rows);

}); 
```

小提琴示例：http: [//jsfiddle.net/jSevE/](http://jsfiddle.net/jSevE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:02:46.253

您应该使用每个语句：http: [//jsfiddle.net/astynax777/pndJx/1/](http://jsfiddle.net/astynax777/pndJx/1/)

```
$('.item p').each(function() {
    var rows = getRows(this);
    switch (rows)
    {
        case 1:
            console.log('1 line');
            break;
        case 2:
            console.log('2 lines');
            break;
        case 3:
            console.log('3 lines');
            break;
    };
});

function getRows(selector) {
    var height = $(selector).height();
    var font_size = $(selector).css('font-size');
    var scale = 1.50
    var line_height = Math.floor(parseInt(font_size) * scale);
    var rows = height / line_height;
    return Math.round(rows);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:00:52.730

听起来您想为每个`<div>`单独运行该逻辑。如果是这种情况，那么我建议这样做：

```
function getRows(selector, context) {
    var height = $(selector, context).height();
    var font_size = $(selector, context).css('font-size');
    var scale = 1.50
    var line_height = Math.floor(parseInt(font_size) * scale);
    var rows = height / line_height;
    return Math.round(rows);
}

$('div.item').each(function () {
    if (getRows('.item p', this) === 1) {
        // if ".item p" equals 1 then add class "item_1" to item div
        console.log('1 line');
        console.log(this); //if i log this i get window (the document), but I need to get the specific div to add the class..
    }

    //console gives back result '1 line' since true and does not continue..

    if (getRows('.item p', this) === 2) {
        // if ".item p" equals 2 then add class "item_1" to item div
        console.log('2 lines');
    }

    if (getRows('.item p', this) === 3) {
        // if ".item p" equals 3 then add class "item_1" to item div
        console.log('3 lines');
    }
}); 
```

在传递给的匿名函数的上下文中`.each()` `this`是指该特定`<div>`元素，而不是`window`.

# c++ - 从 Xcode 中的 C++ 程序读取 .txt 文件

> ID：15906768
> 
> 赞同：3
> 
> 时间：2013-04-09T15:57:13.213
> 
> 标签：c++, xcode, file-io

我一直在努力让我的 C++ 程序从 Xcode 读取我的 .txt 文件。我什至尝试将 .txt 文件放在我的 Xcode C++ 程序的同一目录中，但它不会成功读取。我正在尝试用文件中的所有核苷酸填充 dnaData 数组，所以我只需读取一次，然后我就可以对该数组进行操作。下面只是我处理文件的代码的一部分。整个程序的想法是编写一个程序，该程序读取包含 DNA 序列的输入文件（dna.txt），以各种方式分析输入，并输出包含各种结果的多个文件。输入文件中核苷酸的最大数量（见表 1）将为 50,000。请问有什么建议吗？

```
#include <fstream>
#include <cstdlib>
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

const int MAX_DNA = 50000;

// Global DNA array. Once read from a file, it is
// stored here for any subsequent function to use
char dnaData[MAX_DNA];

int readFromDNAFile(string fileName)
{
int returnValue = 0;

ifstream inStream;
inStream.open(fileName.c_str());

    if (inStream.fail())
    {
        cout << "Input file opening failed.\n";
        exit(1);
    }

    if (inStream.good())
    {
        char nucleotide;
        int counter = 0;
        while ( inStream >> nucleotide )
        {
            dnaData[counter] = nucleotide;
            counter++;
        }
        returnValue = counter;
    }

    inStream.close();
    return returnValue;
    cout << "Read file completed" << endl;

} // end of readFromDNAfile function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:13:24.897

我怀疑这里的问题不在于 C++ 代码，而在于文件位置。在 Xcode 中，二进制程序构建在 Executables 位置。您必须设置构建阶段以将输入文件复制到可执行文件位置。请参阅此[Apple 文档](http://developer.apple.com/library/mac/#recipes/xcode_help-project_editor/Articles/CreatingaCopyFilesBuildPhase.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:17:18.560

我做了一些你最近尝试做的事情，`vector`就像这样：

```
vector<string> v;
// Open the file
ifstream myfile("file.txt");
if(myfile.is_open()){
    string name;
    // Whilst there are lines left in the file
    while(getline(myfile, name)){
        // Add the name to the vector
        v.push_back(name);
    }
} 
```

上面读取存储在文件每一行的名称并将它们添加到向量的末尾。因此，如果我的文件是 5 个名称，则会发生以下情况：

```
// Start of file
Name1    // Becomes added to index 0 in the vector
Name2    // Becomes added to index 1 in the vector
Name3    // Becomes added to index 2 in the vector
Name4    // Becomes added to index 3 in the vector
Name5    // Becomes added to index 4 in the vector
// End of file 
```

试试看，看看它是如何为你工作的。

即使你不采用上面显示的方式，我仍然建议使用[std::vector](http://www.cplusplus.com/reference/vector/vector/)，因为向量通常更容易使用，在这种情况下没有理由不使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:24:50.667

如果每一行包含一个字符，那么这意味着您还将结束行字符 ('\n') 读入 DNA 阵列。在这种情况下，您可以这样做：

```
while ( inStream >> nucleotide )
{
        if(nucleotide  == '\n')
        {
              continue;
        }
        dnaData[counter] = nucleotide;
        counter++;
} 
```

# css - css div 边距移动整个 div 而不是内容

> ID：15906772
> 
> 赞同：0
> 
> 时间：2013-04-09T15:57:23.060
> 
> 标签：css, html, margin

我有：

HTML

```
<div id="container"><div id="left"><div class="box">blahblah</div></div></div> 
```

CSS

```
.box  {
    height: 200px;
    width: 300px;
    margin: 50px;
    background:url(box.png) no-repeat } 
#container{
    width:100%;
}
#left{
    float:left;
    width: 260px;
    height: 600px;
} 
```

当我添加`margin: 25px;`到 .box 类时，它会在页面上移动整个框 div。我应该怎么做才能在 div (.box) 中保留内容 (blahblah)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:59:30.177

您必须考虑 CSS 使用“盒子模型”这一事实

[http://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

边距用于外部空间限制，而填充用于内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:59:40.817

如果我理解您的问题，您只是在寻找`padding: 25px;`- 这会在框尺寸内或内容框*周围*和边框边缘内*增加空间*

 *这是一个简单的模型来帮助可视化盒子模型：

[http://img199.imageshack.us/img199/4949/boxdim.png](http://img199.imageshack.us/img199/4949/boxdim.png)

查看CSS 2.1 规范中的**Box Model部分：http:** [//www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)了解更多信息*

# java - 使用 soundcloud api 按地理过滤器搜索

> ID：15906773
> 
> 赞同：4
> 
> 时间：2013-04-09T15:57:28.777
> 
> 标签：java, android, jquery, soundcloud

当尝试基于“地理”过滤器搜索曲目时，我总是得到零结果。根据文档，您可以使用 ***** 作为通配符来搜索服务器响应中每个轨道的“标签列表”中存在的纬度/经度范围。我们在发出 POST 请求时使用“标签”过滤器。

例如

```
HttpResponse response = api.get("/tracks?tags=geo:lat%3D52.0*", null); 
```

返回零结果。

我还尝试省略 'geo:' 命名空间引用，尝试了 lat/lon 字符串的各种变体，例如**'lat=52.0' 'geo:lat=52.0*'**。尝试了 urlencoded 和非 urlencoded 值，似乎没有任何效果。

如果我只是这样做

```
HttpResponse response = api.get("/tracks?tags=geo:", null); 
```

这将带回在标记列表中引用了地理位置的结果，因此数据库中肯定有经过地理标记的轨道！我已将这些 geo: 位置之一从随机轨道复制到 api 请求的 POST 参数中，但它没有找到轨道。

据我所知，还有一个人在一个月前使用 JQuery [Soundcloud api 在 SO 上提交了这个问题：Geo Tag search not working](https://stackoverflow.com/questions/15233098/soundcloud-api-geo-tag-search-not-working)

任何帮助将不胜感激。

（仅供参考，我在上面使用的代码中的 null 参数只是传递 post 参数的另一种选择，您可以选择使用 NameValuePair 对象，我也尝试过这种方式，但没有成功 [在地理过滤器上搜索时]）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-13T12:14:07.207

这应该工作

```
HttpResponse response = api.get("/tracks?geo:lat%3D52.0*", null); 
```

# c# - 如何使用 using 语句在母版页和内容页上使用数据库连接

> ID：15906774
> 
> 赞同：0
> 
> 时间：2013-04-09T15:57:29.947
> 
> 标签：c#, database, connection

我知道我需要使用 using 语句来使用数据库连接，以确保它会自动关闭而无需担心。

但是我正在使用一个母版页和一个内容页，它们都需要从数据库中检索数据，并且都有自己的 using 语句。因此，对于每个请求，我仍在使用两个数据库连接。如何防止这种情况发生？我想只为每个请求使用一个数据库连接。

还有一个特殊情况：我也使用缓存，所以在某些情况下根本不需要数据库连接，因为数据是从缓存中检索的。那么我希望根本不创建数据库连接......

我找不到任何实用的解决方案或示例。任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:03:45.297

如果`MasterType`在内容页面中使用该指令，它可以访问 MasterPage 中的公共变量，包括连接对象。

[http://msdn.microsoft.com/en-us/library/ms228274%28v=vs.80%29.aspx/css](http://msdn.microsoft.com/en-us/library/ms228274%28v=vs.80%29.aspx/css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:04:05.317

这取决于您的应用程序的体系结构，但假设母版页拥有内容页面，您应该简单地将连接传递给内容页面方法。例如

```
 //in master page pseudo code
 public void UpdateRecord(string updateField)
 {
       using (myConnection = new connection())
       {
            //master page does something with db
            try
            {
                  ContentPage.GetContent(myConnection);
            }
            catch
            {
                 // handle expected errors
                 // fail on other ones
            }
       }
 } 
```

# c++ - 将函数对象指针传递给函数接受指向 std::function 的指针

> ID：15906777
> 
> 赞同：1
> 
> 时间：2013-04-09T15:57:33.273
> 
> 标签：c++, templates, c++11, std-function

我想将不同类型但签名相同的函子传递给方法。因此我得出结论，应该使用 std::function 。但是由于这个方法还应该存储对函数对象的引用，所以我想传递一个 shared_ptr 来代替（用于生命周期管理）。下面的代码适用于 B 类（b.run(...)），但无法为 A 类编译（a.run(...) 中断）。当传递一个指针而不是函数对象本身时，这个转换问题的原因是什么？我该如何规避它？

```
#include <functional>
#include <memory>

class MyFunctor
{
public:
    void operator()(const float &f)
    {}
};

template<class FunSig>
class A
{
public:
    void run(std::shared_ptr<std::function<FunSig> > f_ptr)
    {
         // store f_ptr in a vector
    }
};

template<class FunSig>
class B
{
public:
    void run(std::function<FunSig> f)
    {}
};

int main()
{
    MyFunctor mf1;
    std::shared_ptr<MyFunctor> mf2_ptr(new MyFunctor);

    A<void (const float &)> a;
    B<void (const float &)> b;

    a.run(mf2_ptr);        // this breaks!
    b.run(mf1);            // this works
} 
```

编译器错误：

```
error: no matching function for call to ‘A<void(const float&)>::run(std::shared_ptr<MyFunctor>&)’
note: candidate is:
note: void A<FunSig>::run(std::shared_ptr<std::function<FunSig> >) [with FunSig = void(const float&)]
note:   no known conversion for argument 1 from ‘std::shared_ptr<MyFunctor>’ to ‘std::shared_ptr<std::function<void(const float&)> > 
```

现在我发现如果 MyFunctor 从 std::function 继承，a.run(...) 可以编译：

```
class MyFunctor : public std::function<void (const float &)> 
```

为什么现在可以使用？如果函子中不需要更改代码，我会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:10:11.560

你的问题相当于问为什么这不起作用：

```
struct Integer
{
    int value;
};

std::shared_ptr<int> p(new int(1));

std::shared_ptr<Integer> p2 = p; 
```

它不起作用，因为它们不是同一类型。仅仅因为您可以将 a 存储`MyFunctor`在 a`std::function<void(const float&)>`中并不意味着指向一个的指针可以转换为指向另一个的指针。

你要：

```
auto mf2_ptr = std::make_shared<std::function<void (const float &)>>( MyFunctor() );
a.run(mf2_ptr); 
```

> 现在我发现如果 MyFunctor 从 std::function 继承，a.run(...) 可以编译：

它可以编译，因为现在您可以转换`shared_ptr<MyFunctor>`为`shared_ptr<function<void(const float&)>>`，但它不能正常工作。 `std::function::operator()()`不是虚拟的，所以如果你调用这个函数，它会调用基类' `operator()`，但是基类不指向任何东西并且会抛出`std::bad_cast`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:43:33.103

我不太明白为什么要引用 std::function 对象。除非您真的想要共享引用语义（例如，其他人修改正在使用的函数对象的能力），否则只需直接存储 std::function 对象。

# java - 如何使用 JavaScript 从端点获取数据？

> ID：15906781
> 
> 赞同：1
> 
> 时间：2013-04-09T15:57:46.300
> 
> 标签：java, javascript, jsp, rest, get

有一些数据存储在端点（url）。该文件是一个 .jsp 文件。

以下是数据。

```
{"successful":"true","rows":[{"zip":"56431","user_id":"35","name":"test"}]} 
```

如何从该端点获取数据？www.test.com/test.jsp

即这样的东西

```
var data = get("www.test.com/test.jsp"); 
var jsonObj = JSON.parse(data); 
```

ETC..

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:49:40.490

我希望这段代码可以帮助你，

```
var data = '{"successful":"true","rows":[{"zip":"56431","user_id":"35","name":"test"}]}'
var jsonObj = JSON.parse(data);
var userID = jsonObj.rows[0].user_id;

var name = jsonObj.rows[0].name

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:40:57.093

```
var obj = JSON.parse(string);//Were string is your data string 
```

有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)答案。

我不知道你所说的端点是什么意思，但我希望你没有从 URL 中解析数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:57:36.103

[jQuery](http://jquery.org)使这变得简单：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
function callEndpoint() {
    $.getJSON('/endpoint.jsp', function(data) {
        $('#output').append(data.rows[0].user_id);
    });
}
callEndpoint();
</script>
<body>
<div id="output"></div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T19:12:07.997

如果您正在寻找 AJAX 解决方案，您可以使用此功能。它可以通过 URL 发送变量并从源 url 接收响应。

```
function get_(url, func)
{
 var http;
 try { http = new XMLHttpRequest(); } catch (e) { try { http = new ActiveXObject(\"Msxml2.XMLHTTP\"); } catch (e) { try { http = new ActiveXObject(\"Microsoft.XMLHTTP\"); } catch (e) { alert(\"Your browser broke!\"); return false; } } }

 http.open(\"GET\", url, true);
 http.onreadystatechange = function() { if(http.readyState == 4) { func(http); } }
 http.send(null);
} 
```

要使用它，下面是一个按钮如何触发调用并指定响应处理函数的示例：

HTML

```
<button onClick='get_("source_url.jsp", showResponse);'> Show the response </button> 
```

JAVASCRIPT

```
function showResponse(h) { alert(h.responseText); } 
```

需要明确的是，get_ 函数的第二个参数是对函数的引用。无论您在使用 get_ 函数时指定什么函数，它都会传递一个包含 .responseText 属性的参数，该属性是 source_url 文件的输出。

我一直使用这个功能，尽管我有另一个版本可以与我的 PHP 服务器一起使用来验证用户身份，这样就不会出现未经授权的从服务器加载/保存信息的情况。

# javascript - 了解一下 ember/ember-data 对象的生命周期怎么样。或者调试 Ember.js 和 Ember-Data 的提示/提示？

> ID：15906784
> 
> 赞同：6
> 
> 时间：2013-04-09T15:58:01.887
> 
> 标签：javascript, model-view-controller, asynchronous, ember.js

我不是在寻找如何调试 javascript。我对手头的工具非常熟悉，虽然不熟悉 Firefox 的新调试，因为他们构建了自己的“萤火虫”。

我真的只是在寻找一种简单的方法来读取堆栈跟踪，因为对象/函数很容易被传递以通过 Ember 自己的调用机制运行。很容易忘记正在调用的函数以及它所附加的 this 的绑定。有没有人在调试 ember 的堆栈时想到任何技巧或肺炎？

*更新：* 这不是异步调试的问题[http://www.html5rocks.com/en/tutorials/developertools/async-call-stack/](http://www.html5rocks.com/en/tutorials/developertools/async-call-stack/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:44:41.090

首先，您将要使用 ember 的调试版本，而不是缩小的生产版本。这将在控制台中为您提供更好的 ember 信息。

其次，对我有很大帮助的事情是在我的路由、视图和控制器的所有事件中添加调试。

我的主 App 类上有一个名为 debugMode 的属性，然后是一个日志函数。

```
window.App = Ember.Application.create({

    debugMode: false,

    log: function(message, location, data) {
      if (this.debugMode) {
        if (data != null) {
          if (typeof data === 'object') {
            data = Ember.inspect(data);
          }
          console.log('DEBUG: ' + this.appName + ' : ' + location + ' : ' + message);
          return console.log('DEBUG: ' + this.appName + ' : (continued) data: ' + data);
        } else {
          return console.log('DEBUG: ' + this.appName + ' : ' + location + ' : ' + message);
        }
    }
} 
```

日志函数接收消息、位置，然后是可选的相关数据。

因此，下面是两个日志记录示例：

1.  记录一个函数，并传入数据

    ```
    App.ProfileController = Ember.ObjectController.extend({

      setProfile: function() {
        App.log("setting current user's profile", 'App.ProfileController.setProfile', App.currentUser);
      //do other stuff with the profile
      }
    }) 
    ```

2.  记录控制器/视图/路由的初始化

    ```
    App.EventController = Ember.ObjectController.extend({
      init: function() {
        this._super();
        App.log('initializing event controller', 'App.EventController.init');
        return this.set('isLoading', false);
      }
    }) 
    ```

然后，您将获得很好的控制台信息，以尝试诊断问题发生的位置，如下所示：

```
DEBUG: My App Name : App.ApplicationController : application controller initializing
DEBUG: My App Name : App.ApplicationRoute.setupController : setupController called
DEBUG: My App Name : (continued) data: {target: <App.Router:ember249>, namespace: App, container: [object Object], _debugContainerKey: 
DEBUG: My App Name : App.accountController.setCurrentUser : setting applications currentUser object
DEBUG: My App Name : (continued) data: {"id":3,"username":"bob","firstName":"Bob","lastName":"W","updatedAt":"2013-04-16T06:29:39.731Z"}
DEBUG: My App Name : App.EventController.init : initializing event controller
DEBUG: My App Name : App.EventRoute.setupController : setupController called
DEBUG: My App Name : (continued) data: {target: <App.Router:ember249>, namespace: App, container: [object Object], _debugContainerKey: controller:event, _childContainers: [object Object], isLoading: false} 
```

最后，使用调试

```
debugger; 
```

在视图/路由/控制器内部

和

```
{{debugger}} 
```

在你的模板里面

并从控制台或内联使用

```
Ember.inspect(YOUR_OBJECT); 
```

查看 ember 信息。

# visual-studio-2012 - 通过 Visual Studio 撤消挂起的更改会因大量更改而挂起

> ID：15906785
> 
> 赞同：30
> 
> 时间：2013-04-09T15:58:02.067
> 
> 标签：visual-studio-2012, tfs

我正在使用带有 tfs 的 vs2012。当我尝试撤消整个解决方案的大变更集时，整个事情都挂了。我采用的解决方法是逐个项目地做这个项目。有一个更好的方法吗？

我会将 tfs 重新映射到一个新目录，但是所有这些结帐仍然需要撤消。欢迎遇到并解决此问题的人提出任何建议。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-09T21:13:15.317

[`tf undo`](http://msdn.microsoft.com/en-us/library/c72skhw4)来自 VS2012 的开发人员命令提示的速度比 IDE 稍快。

例如：`tf undo $/YourTeamProject /recursive`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:35:26.930

它没有做太多 - 它向`Undo`服务器发送请求并作为响应接收要放在磁盘上的数据。如果您与服务器的连接速度较慢或代理速度较慢（可能是病毒扫描程序？），那么这会显着减慢速度。

如果您发现这种情况经常发生，您最好的做法是在服务器上升级到 TFS 2012，在客户端上升级到 Visual Studio 2012，然后确保您使用的是本地工作区。在这种情况下，您无需联系服务器来撤消。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-10T14:03:51.460

我发现有时 VS 会尝试显示*“你确定吗”* 弹出消息，这隐藏在屏幕外的某个地方。
有时按下`Escape`or`Enter`会越过隐藏的消息并释放冻结。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-19T06:26:07.113

我确实注意到，当我们使用多个屏幕（多个监视器）时，VS 在执行“撤消挂起的更改”时会挂起。只使用一个来解决这个错误。

# jquery - 如何使用 HTML5 和 JQuery 创建下拉导航菜单

> ID：15906790
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:58:11.443
> 
> 标签：jquery, html

正如标题所说，我想用 HTML5 和 JQuery 创建下拉导航菜单，但我不知道该怎么做，任何建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:59:21.197

试试这个教程，应该可以

[http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-a-drop-down-nav-menu-with-html5-css3-and-jquery/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-a-drop-down-nav-menu-with-html5-css3-and-jquery/)

# ruby-on-rails - 使用 Paperclip 从上传或外部 URL 设置个人资料图片

> ID：15906792
> 
> 赞同：0
> 
> 时间：2013-04-09T15:58:12.073
> 
> 标签：ruby-on-rails, ruby, paperclip

我想让我的用户通过以下方式设置他们的个人资料图片：

*   在文本框中提供远程 URL，我将使用该文本框将图像抓取到 S3 存储桶中
*   `file_field`使用 SimpleForm 的方法上传文件

我很想知道允许用户从同一个表单中完成这两项操作的最简洁的方法。我做了一些实验，但还没有想出什么特别令人满意的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:45:25.380

以下是一个很好的指南，它提供了如何通过 url 进行上传的总体思路。它非常古老，但它对需要做什么提供了一个很好的总体思路。

[http://trevorturk.com/2008/12/11/easy-upload-via-url-with-paperclip/](http://trevorturk.com/2008/12/11/easy-upload-via-url-with-paperclip/)

完成上述操作后，首先我将禁用 url 和上传字段。然后我只有一些 javascript 和一个按钮，在选择 url 或上传时通过删除禁用属性来禁用相应的字段。

# java - 是否可以使用 Java 在文件上设置自定义元数据？

> ID：15906793
> 
> 赞同：9
> 
> 时间：2013-04-09T15:58:15.263
> 
> 标签：java, file

是否可以在 File 实例上获取和设置自定义元数据？我想将通过我的系统处理的文件用作某种非常简单的数据库，其中每个文件都应包含其他自定义元数据，例如发件人的电子邮件、一些时间戳等。

它适用于内部系统，因此安全性不是问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T16:24:52.737

在 java 7 中，您可以使用[`Path`](http://docs.oracle.com/javase/tutorial/essential/io/fileAttr.html)类和`UserDefinedFileAttributeView`.

这是从那里获取的示例：

可以使用以下代码片段将文件的 MIME 类型存储为用户定义的属性：

```
Path file = ...;
UserDefinedFileAttributeView view = Files
    .getFileAttributeView(file, UserDefinedFileAttributeView.class);
view.write("user.mimetype",
           Charset.defaultCharset().encode("text/html"); 
```

要读取 MIME 类型属性，您可以使用以下代码片段：

```
Path file = ...;
UserDefinedFileAttributeView view = Files
.getFileAttributeView(file,UserDefinedFileAttributeView.class);
String name = "user.mimetype";
ByteBuffer buf = ByteBuffer.allocate(view.size(name));
view.read(name, buf);
buf.flip();
String value = Charset.defaultCharset().decode(buf).toString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-06T20:42:37.870

您应该始终检查文件系统是否支持`UserDefinedFileAttributeView`您要设置的特定文件您可以简单地调用它

```
Files.getFileStore(Paths.get(path_to_file))).supportsFileAttributeView(UserDefinedFileAttributeView.class); 
```

根据我的经验，`UserDefinedFileAttributeView`FAT* 和 HFS+（对于 MAC）文件系统不支持

# java - 使用 javamail 从我的 gmail 中读取所有新消息

> ID：15906799
> 
> 赞同：2
> 
> 时间：2013-04-09T15:58:26.297
> 
> 标签：java, email, jframe, jakarta-mail, jtextarea

我有一个包含 GUI 的应用程序，它使用 Javamail。当我打开这个时`Jframe`，我必须看到发送到我的邮件的消息`jTextArea`。

问题是当我编写代码时，它只显示发送的最后一条消息。

如何在收件箱中显示所有新邮件？

这是我的代码：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

Properties props = new Properties();

props.put("mail.pop3.host", "pop.gmail.com");

props.put("mail.pop3.user", "mymail@gmail.com");

props.put("mail.pop3.socketFactory", 995);

props.put("mail.pop3.socketFactory.class", "javax.net.ssl.SSLSocketFactory");

props.put("mail.pop3.port", 995);

Session session = Session.getDefaultInstance(props, new Authenticator() {
    @Override
    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication("mymail@gmail.com", "mypassword");

    }
});

try {
    Store store = session.getStore("pop3");

    store.connect("pop.gmail.com", "mymail@gmail.com", "mypaswword");

    Folder fldr = store.getFolder("INBOX");

    fldr.open(Folder.READ_ONLY);

    Message[] msg = fldr.getMessages();

    Address[] address;

    for (int i = 0; i < msg.length; i++) {

        jTextArea1.setText("SentDate : " + msg[i].getSentDate() + "\n" + "From : " + msg[i].getFrom()[0] + "\n" + "Subject : " + msg[i].getSubject() + "\n" + "Message : " + "\n" + msg[i].getContent().toString());

    }

    fldr.close(true);

    store.close();

} catch (Exception e) {
    System.out.println(e);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:18:07.257

`jTextArea1`您在此处的消息循环中重复将 的文本设置为相同的内容：

```
for (int i = 0; i < msg.length; i++) {

    jTextArea1.setText("SentDate : " + msg[i].getSentDate() + "\n" + "From : " + msg[i].getFrom()[0] + "\n" + "Subject : " + msg[i].getSubject() + "\n" + "Message : " + "\n" + msg[i].getContent().toString());

} 
```

您应该使用所有消息构建一个`StringBuilder`，然后设置`jTextArea1`

```
final StringBuilder sb = new StringBuilder();
for (int i = 0; i < msg.length; i++) {

    sb.append("SentDate : " + msg[i].getSentDate() + "\n" + "From : " + msg[i].getFrom()[0] + "\n" + "Subject : " + msg[i].getSubject() + "\n" + "Message : " + "\n" + msg[i].getContent().toString());

}
jTextArea1.setText(sb.toString()); 
```

然后，您可以通过使用增强的 for 循环和`append`使用`StringBuilder`.

```
final StringBuilder sb = new StringBuilder();
for (Message message : msg) {

    sb.append("SentDate : ").
            append(message.getSentDate()).
            append("\n").
            append("From : ").
            append(message.getFrom()[0]).
            append("\n").append("Subject : ").
            append(message.getSubject()).
            append("\n").
            append("Message : ").
            append("\n").
            append(message.getContent().toString());

}
jTextArea1.setText(sb.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T19:57:46.823

```
final StringBuilder sb = new StringBuilder();
for (Message message : msg) {

    sb.append("SentDate : ").
        append(message.getSentDate()).
        append("\n").
        append("From : ").
        append(message.getFrom()[0]).
        append("\n").append("Subject : ").
        append(message.getSubject()).
        append("\n").
        append("Message : ").
        append("\n").
        append(message.getContent().toString());

}
jTextArea1.setText(sb.toString()); 
```

# c - yyaccept 后恢复 yyparse

> ID：15906800
> 
> 赞同：0
> 
> 时间：2013-04-09T15:58:32.443
> 
> 标签：c, bison

朋友们，我正在解析一个 bibtex 文件，在一个文件中有多个 bibtex 条目，例如

```
@Book{a1,
    Title="ASR",
    Publisher="oxf",
    Author = {a {\"m}ook, Rudra Banerjee},
    Year="2010",
    Address="UK",
    Edition="1",
}
@Article{a2,
    Author="Rudra Banerjee",
    Title="Fe{\"Ni}Mo",
    Publisher="P{\"R}B",
    Number="12",
    Pages="36690",
    Year="2011",
    Address="UK",
    Edition="1",
} 
```

现在，我希望 yyparse 在每个条目后返回，因此，我的解析器是：

```
%union
{
    char    *sval;
};
%token <sval> VALUE
%token <sval> KEY
%token OBRACE
%token EBRACE
%token QUOTE
%token SEMICOLON 

%start Input
%%
Input: 
     /* empty */ 
     | Input Entry ;  /* input is zero or more entires */
Entry: 
     '@' KEY '{' KEY ','{ 
              g_hash_table_insert(table, g_strdup("TYPE"), g_strdup($2));
                  g_hash_table_insert(table, g_strdup("ID"), g_strdup($4));
          g_printf("%s:%s\n","KEY=>",g_hash_table_lookup(table,"TYPE"));
//                  g_printf("%s: %s\n", $2, $4);
              } 
     KeyVals '}'
     {YYACCEPT;}
     ;
KeyVals: 
       /* empty */ 
       | KeyVals KeyVal ; /* zero or more keyvals */
KeyVal: 
      KEY '=' VALUE ',' { g_hash_table_insert(table, g_strdup($1), g_strdup($3));
//                          g_printf("%s: %s\n", $1, $3);
                           g_printf("%s:%s\n",$1,g_hash_table_lookup(table,$1));
              };

%% 
```

在主程序中，它被称为：

```
do{
   yyparse();
  } 
```

问题是，它被正确解析，但只有第一个条目；即它没有从 YYACCEPT 中恢复。如何让代码在 yyaccept 之后再次调用 yyparse？

这几乎与[如何说服 Bison 解析文件的一部分？](https://stackoverflow.com/questions/11564563/how-do-i-convince-bison-to-parse-part-of-a-file)但我没能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:27:34.177

您应该启用`%debug`跟踪以检查正在发生的事情。此外，鉴于您正在尝试做的事情，您可能应该尝试推送解析器（[http://www.gnu.org/software/bison/manual/html_node/Push-Decl.html](http://www.gnu.org/software/bison/manual/html_node/Push-Decl.html)）。

# android - 在适用于 Android 应用程序的 Samsung Glaxy NoteII 中以纵向屏幕模式预览图像问题

> ID：15906801
> 
> 赞同：0
> 
> 时间：2013-04-09T15:58:33.243
> 
> 标签：android, camera, preview

我在预览捕获的图片时遇到问题。

我已经设置了 ImageView 来预览 xml 文件中的图像。拍摄照片后，我会保存或丢弃拍摄图像的预览。

只有当我以横向屏幕模式拍摄照片并在 Android 清单文件中将方向声明为 android:screenOrientation="portrait" 时，我才能在 ImageView 中预览拍摄的照片。我可以在纵向视图的图像视图中预览图像！屏幕截图：横向屏幕模式： ![预览前](https://i.stack.imgur.com/sBgxR.png)

![预习](https://i.stack.imgur.com/2Knkf.png)

但是，一旦以纵向屏幕模式捕获照片，单击“保存”按钮后，它不会在 ImageView 上显示任何预览。

截屏： ![预览前](https://i.stack.imgur.com/VmqmI.png) ![预览时](https://i.stack.imgur.com/FogbW.png)

我正在使用三星 Glaxy Note II。

我试过这段代码：

```
public  Bitmap decodeFile(String path) {//you can provide file path here 
    int orientation;
    try {
        if (path == null) {
            return null;
        }
        // decode image size 
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 0;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
        scale++;
        }
        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        Bitmap bm = BitmapFactory.decodeFile(path, o2);
        Bitmap bitmap = bm;

        ExifInterface exif = new ExifInterface(path);

        orientation = exif
                .getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

        Log.e("ExifInteface .........", "rotation ="+orientation);

       //exif.setAttribute(ExifInterface.ORIENTATION_ROTATE_90, 90);

        Log.e("orientation", "" + orientation);
        Matrix m = new Matrix();

        if ((orientation == ExifInterface.ORIENTATION_ROTATE_180)) {
            m.postRotate(180);
       //m.postScale((float) bm.getWidth(), (float) bm.getHeight());
            // if(m.preRotate(90)){
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                    bm.getHeight(), m, true);
            return bitmap;
        } else if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
            m.postRotate(90); 
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                    bm.getHeight(), m, true);
            return bitmap;
        }
        else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
            m.postRotate(270);
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                    bm.getHeight(), m, true);
            return bitmap;
        } 
        return bitmap;
    } catch (Exception e) {
        return null;
    }

} 
```

我的 xml 文件显示预览和执行其他功能：

```
<ImageView
android:id="@+id/ivReturnedPics"
 android:layout_width="168dp"
android:layout_height="168dp" 
android:layout_gravity="center"
android:src="@drawable/testsh"
android:padding="3dp" /> 
```

**我正在使用代码：** decodeFile(filePath); ivv.setImageBitmap(bmp);

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:23:07.270

这对我来说很好，来自 Facebook 的 Hack Book

```
public static Bitmap scaleImage(final Context context, final Uri photoUri)
        throws IOException {
    InputStream is = context.getContentResolver().openInputStream(photoUri);
    final BitmapFactory.Options dbo = new BitmapFactory.Options();
    dbo.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(is, null, dbo);
    is.close();
    int rotatedWidth, rotatedHeight;
    final int orientation = getOrientation(context, photoUri);
    if (orientation == 90 || orientation == 270) {
        rotatedWidth = dbo.outHeight;
        rotatedHeight = dbo.outWidth;
    } else {
        rotatedWidth = dbo.outWidth;
        rotatedHeight = dbo.outHeight;
    }
    Bitmap srcBitmap;
    is = context.getContentResolver().openInputStream(photoUri);
    if (rotatedWidth > MAX_IMAGE_DIMENSION
            || rotatedHeight > MAX_IMAGE_DIMENSION) {
        final float widthRatio = ((float) rotatedWidth)
                / ((float) MAX_IMAGE_DIMENSION);
        final float heightRatio = ((float) rotatedHeight)
                / ((float) MAX_IMAGE_DIMENSION);
        final float maxRatio = Math.max(widthRatio, heightRatio);
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = (int) maxRatio;
        srcBitmap = BitmapFactory.decodeStream(is, null, options);
    } else {
        srcBitmap = BitmapFactory.decodeStream(is);
    }
    is.close();
    if (orientation > 0) {
        final Matrix matrix = new Matrix();
        matrix.postRotate(orientation);

        srcBitmap = Bitmap.createBitmap(srcBitmap, 0, 0,
                srcBitmap.getWidth(), srcBitmap.getHeight(), matrix, true);
    }
    final String type = context.getContentResolver().getType(photoUri);
    final ByteArrayOutputStream baos = new ByteArrayOutputStream();
    if (type.equals("image/png")) {
        srcBitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
    } else if (type.equals("image/jpg") || type.equals("image/jpeg")) {
        srcBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    }
    final byte[] bMapArray = baos.toByteArray();
    baos.close();
    return BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length);
}
public static int getOrientation(final Context context, final Uri photoUri) {
    /* it's on the external media. */
    final Cursor cursor = context.getContentResolver().query(photoUri,
            new String[] { MediaStore.Images.ImageColumns.ORIENTATION },
            null, null, null);
    if (cursor.getCount() != 1) {
        return -1;
    }
    cursor.moveToFirst();
    return cursor.getInt(0);
} 
```

在你`onActivityResult`刚刚的电话`scaleImage(this,YOU_URI);`和`imageView.setImageBitmap(Your_Bitmap);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:26:01.387

第一的：

```
 Intent cameraIntent = new Intent(
                            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
```

二是辛勤工作。`onActivityResult`

```
 (requestCode == CAMERA_PIC_REQUEST) {
                    imageFileUri = intent.getData();
                    bmp = (Bitmap) intent.getExtras().get("data"); 
                    view.setImageBitmap(bmp);       
                    view.setImageBitmap(bmp);// its weird i know but it wont work if not like this :D   

                  if (imageFileUri != null) {  
                        imageFileUri = intent.getData();
                        bmp = (Bitmap) intent.getExtras().get("data"); 
                        view.setImageBitmap(bmp);       
                      } 
                  else {  
                       // Describe the columns you'd like to have returned.  
                       // Selecting from the Thumbnails location gives you both the  
                       // Thumbnail Image ID, as well as the original image ID  
                      String[] projection = {  
                      MediaStore.Images.Thumbnails._ID, // The columns we wANT  
                      MediaStore.Images.Thumbnails.IMAGE_ID,  
                      MediaStore.Images.Thumbnails.KIND,  
                      MediaStore.Images.Thumbnails.DATA };  
                       String selection = MediaStore.Images.Thumbnails.KIND + "=" + // Select  
                                    // only        // mini's  
                         MediaStore.Images.Thumbnails.MINI_KIND;  
                          String sort = MediaStore.Images.Thumbnails._ID + " DESC";  
                          // At the moment, this is a bit of a hack, as I'm returning  
                       // ALL images, and just taking the latest one. There is a  
                       // better way to narrow this down I think with a WHERE  
                       // clause which is currently the selection variable  
                          Cursor myCursor = this.managedQuery(  
                       MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,  
                       projection, selection, null, sort);  
                       long imageId = 0l;  
                       long thumbnailImageId = 0l;  
                       @SuppressWarnings("unused")
                    String thumbnailPath = "";  
                       try {  
                         myCursor.moveToFirst();  
                         imageId = myCursor.getLong(myCursor   .getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));  
                             thumbnailImageId = myCursor.getLong(myCursor   .getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));  
                         thumbnailPath = myCursor  
                      .getString(myCursor    .getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));  
                       } finally {  
                         myCursor.close();  
                      }  
                      // Create new Cursor to obtain the file Path for the large  
                      // image  
                      String[] largeFileProjection = {  
                             MediaStore.Images.ImageColumns._ID,  
                       MediaStore.Images.ImageColumns.DATA };  
                      String largeFileSort = MediaStore.Images.ImageColumns._ID  
                         + " DESC";  
                      myCursor = this.managedQuery(  
                       MediaStore.Images.Media.EXTERNAL_CONTENT_URI,  
                       largeFileProjection, null, null, largeFileSort);  
                       @SuppressWarnings("unused")
                    String largeImagePath = "";  
                      try {  
                        myCursor.moveToFirst();  
                           // This will actually give yo uthe file path location of  
                        // the image.  
                        largeImagePath = myCursor  
                       .getString(myCursor  
                      .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));  
                      } finally {  
                      myCursor.close();  
                      }  
                      // These are the two URI's you'll be interested in. They  
                      // give you a handle to the actual images  
                      Uri uriLargeImage = Uri.withAppendedPath(  
                      MediaStore.Images.Media.EXTERNAL_CONTENT_URI,  
                      String.valueOf(imageId));  
                      @SuppressWarnings("unused")
                    Uri uriThumbnailImage = Uri.withAppendedPath(  
                      MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,  
                       String.valueOf(thumbnailImageId));  
                      imageFileUri = uriLargeImage;  
                      }  
                      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T09:07:11.183

它看起来像 Note 2 设备的错误。最新的 Note 3 没有这个 bug。

谢谢你们的贡献。

# php - 如何获取 magento 后端配置 xml 数据？

> ID：15906809
> 
> 赞同：5
> 
> 时间：2013-04-09T15:58:57.257
> 
> 标签：php, magento, config

我的模块中有一个 system.xml，它以此开头：

```
<config>
    <sections>
        <dev>
            <groups>
                <my_module>
                    <label>... 
```

我想从不同的模块获取这个标签的值。我该怎么做？我的第一个想法是`Mage::getConfig('sections/dev/groups/my_module/label')`，但这不起作用 -`<sections>`配置区域似乎无法访问。我也不知道magento在哪里加载这个值，它必须在某个时候做，否则它就无法显示它。

要完全清楚：我不是要获取存储在 core_config_data 表中的配置数据值，这没问题。我希望能够获得与之相关的其他属性——比如组标签或字段的排序顺序，为此我需要能够读取`<sections>`配置区域。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:07:59.480

这些`system.xml`文件永远不会与全局配置合并。它们仅在 Magento 构建用户界面时加载

```
System -> Configuration 
```

后端管理应用程序的部分。除此之外，该应用程序对它们没有用处。

如果要获取标签，则需要自己加载完整`system.xml`配置。像这样的东西应该工作。

```
//load and merge `system.xml` files
$config = Mage::getConfig()->loadModulesConfiguration('system.xml');        

//grab entire <sections/> node
var_dump($config->getNode('sections')->asXml());        

//grab label from a specific option group as a string
var_dump((string)$config->getNode('sections/dev/groups/restrict/label')); 
```

正如在这个线程的另一个答案中提到的，还有一个`adminhtml/config`模型类将一些这种逻辑包装在一个`getSection`方法中，所以你可以做这样的事情。

```
Mage::getSingleton('adminhtml/config')->getSection('dev')->groups->my_module->label 
```

如果你看一下源码`getSection`

```
#File: app/code/core/Mage/Adminhtml/Model/Config.php
public function getSections($sectionCode=null, $websiteCode=null, $storeCode=null)
{
    if (empty($this->_sections)) {
        $this->_initSectionsAndTabs();
    }

    return $this->_sections;
} 
```

并按照调用堆栈一直到`_initSectionsAndTabs`

```
#File: app/code/core/Mage/Adminhtml/Model/Config.php
protected function _initSectionsAndTabs()
{
    $config = Mage::getConfig()->loadModulesConfiguration('system.xml')
        ->applyExtends();

    Mage::dispatchEvent('adminhtml_init_system_config', array('config' => $config));
    $this->_sections = $config->getNode('sections');
    $this->_tabs = $config->getNode('tabs');
} 
```

你会看到这个包装方法最终调用了`loadModulesConfiguration`方法本身。[您可以在此处阅读有关配置中的一些旧元编程](http://alanstorm.com/magento_config_declared_modules_tutorial)`applyExtends`的附加信息，这是[配置加载的更长系列](http://alanstorm.com/category/magento#magento_config)的一部分。（自链接，对于 StackOverflow 的答案来说太长了）。

我个人不会使用它从配置中获取值的原因是当您进行此调用时调度的事件

```
Mage::dispatchEvent('adminhtml_init_system_config', array('config' => $config)); 
```

此事件可能会触发您系统中的代码，假设您正在后端管理控制台区域中加载系统配置系统。如果您**只想**阅读 XML 树。只需自己加载并读取值似乎是要走的路。当然，您的用例可能会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:13:28.933

通常情况下，我在发布问题后立即找到答案......

这是获取sections/dev/my_module/label的方法：

```
Mage::getSingleton('adminhtml/config')->getSection('dev')->groups->my_module->label 
```

如您所见，您需要使用`Mage::getSingleton('adminhtml/config')->getSection('dev')`来获取后端配置（您也可以使用`->getSections()`来获取所有要迭代的部分）。这将返回一个 Mage_Core_Model_Config_Element 对象，它是对象树的根，可访问，如图所示。只需在任何阶段执行 print_r，您就会看到树的其余部分，它们的 print_r 格式类似于数组，尽管它不是。

# c# - C# 资源文件

> ID：15906810
> 
> 赞同：0
> 
> 时间：2013-04-09T15:59:00.330
> 
> 标签：c#, .net, localization, resx

我的资源存储在它们自己的程序集中，并且我在我的 Web 应用程序中引用了该程序集。我能够以两种不同的方式访问资源——通过编译的常量或使用 ResourceManager。

`var method1 = Prototype.Localization.CustomerRecord.BillingId;`

或者

```
var resx = new ResourceManager(typeof (Prototype.Localization.CustomerRecord));
var method2 = resx.GetString("BillingId"); 
```

使用第一种方法似乎很容易（但这通常意味着当事情变得更复杂时它会回来咬我），那么第二种方法的优点或缺点是什么？第一种方法会不会给我带来麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:47:01.083

> 那么第二种方法的优点或缺点是什么？

第二种方法是 resx 编译器在幕后所做的。IMO 第二个总是更糟，因为你有一个字符串（然后它可能会分离，直到运行时你才会知道），因此你将缺乏编译时检查和设计时支持。

> 第一种方法会不会给我带来麻烦？

不，至少不会超过其他任何事情（因为当您在运行时首次编译 HTML 页面时，您会在 HTML 页面中发现错误）。

所以我可能会问：如果第一种方法更短更容易，那么有什么好的理由使用第二种方法吗？我的回答是“不”（而且你可以混合它们，以防你需要它来做特殊的事情）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:10:15.553

是的，我同意阿德里亚诺的观点，因为那些“魔术”弦，第二个更糟。

第一种方法你有更多的优势，包括编译时检查，因为你引用了一个类和一个属性，如果这个属性不存在你会得到一个错误，智能感知是另一个。

另一个优点是，如果您决定放弃内置的资源管理器，您可以用您自己的命名空间等替换生成的类（资源类），并使用您自己的内部逻辑。

IMO，我会坚持第一个。

# c# - 未找到 C# ASP.NET 和 javascript onclientclick 函数

> ID：15906813
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:59:03.907
> 
> 标签：c#, javascript, asp.net

我有一个链接按钮和 JavaScript 设置，像这样

```
<asp:LinkButton ID="lnkbutton" 
                CssClass="Button" 
                OnClientClick="javascript:PlayVideo();" 
                runat="server">Play Video</asp:LinkButton>

<script type="text/javascript">
    funtion PlayVideo(){
        $('#ctl00_EFlyerCPH_EFlyerPart_ytapiplayer2').show();
        $('#ctl00_EFlyerCPH_EFlyerPart_imageID').hide();
    }
</script> 
```

但是当我点击我的按钮时，我收到一条错误消息

PlayVideo 未定义...我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:02:47.243

当你有：

```
funtion PlayVideo(){ 
```

`function`拼写错误。它应该是：

```
function PlayVideo(){ 
```

# javascript - 关于在 JavaScript 中揭示模块模式

> ID：15906814
> 
> 赞同：0
> 
> 时间：2013-04-09T15:59:10.763
> 
> 标签：javascript, design-patterns

我目前正在使用 jQM、Highcharts 和 HTML5 构建一个移动 Web 应用程序。

为了维护 JavaScript 代码，我决定将 Revealing 模块模式应用于代码。

这是我的代码。

```
var MobileWebV1 = function () {

    function _buildPanelMenu(pageId, isNormalMenu) {
    }

    function _buildHeaderBar(pageId, isNormalMenu) {
    }

    return {
        buildPanelMenu: _buildPanelMenu,
        buildHeaderBar: _buildHeaderBar
    };
}(); 
```

我想知道是否可以添加另一个层次结构来对对象中的方法进行分类。

我想添加**“UserInterface”**和“ **Util”。**在这种情况下，我可以这样调用方法：**MobileWebV1.UserInterface.buildPanelMenu('pageHome', false);**

我试图修改我的对象，但我仍然坚持当前的问题。

如果您知道答案，请分享您的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:29:44.577

只需嵌套[对象文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)：

```
return {
    Util: {
        …
    },
    UserInterface: {
        buildPanelMenu: _buildPanelMenu,
        buildHeaderBar: _buildHeaderBar
    }
}; 
```

# c# - 在 Silverlight 中反序列化没有声明或命名空间的 XML

> ID：15906817
> 
> 赞同：1
> 
> 时间：2013-04-09T15:59:14.300
> 
> 标签：c#, xml, silverlight

我收到了 XML 数据的提要，我需要将其反序列化为 Silverlight (v5) 应用程序中的对象。数据如下：

```
<AgentState>
  <agentName>jbloggs</agentName>
  <extension>12345</extension>
  <currentlyIn>TestStatus</currentlyIn>
</AgentState> 
```

我在 Silverlight 端创建了一个类，并且试图将这个 XML（您会注意到，它缺少声明和命名空间）放入对象中。

```
StringReader sr = null;
string data = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred);
sr = new StringReader(data);
XmlSerializer xs = new XmlSerializer(typeof (AgentState));
AgentState agent = (AgentState) xs.Deserialize(sr); 
```

..但这会引发错误`an error in xml document (1,2)`，因为它缺少声明。即使手动添加一个虚拟声明也会导致关于缺少命名空间的更多错误。

我发现了有关忽略 XML 中的命名空间/声明的[其他](https://stackoverflow.com/questions/870293/can-i-make-xmlserializer-ignore-the-namespace-on-deserialization)问题，但这些似乎都不适用于 Silverlight。

谁能建议将此 XML 反序列化为对象的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:16:44.240

这似乎有效：

```
 public class AgentState
    {
        public string agentName { get; set; }
        public string extension { get; set; }
        public string currentlyIn { get; set; }
    }

    static void Main(string[] args)
    {
        var s = @"<AgentState>
                    <agentName>jbloggs</agentName>
                    <extension>12345</extension>
                    <currentlyIn>TestStatus</currentlyIn>
                </AgentState>";

        XmlSerializer serializer = new XmlSerializer(typeof(AgentState));
        var ms = new MemoryStream(Encoding.UTF8.GetBytes(s));
        var obj = serializer.Deserialize(ms);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:21:31.797

我想知道将 xml 声明附加到字符串时有什么问题。这似乎工作正常：

```
[System.Xml.Serialization.XmlRootAttribute("AgentState")]
public class AgentState
{
    public string agentName {get; set;}
    public int extension {get; set;}
    public string currentlyIn {get; set;}
}

public void RunSerializer()
{
    System.Xml.Serialization.XmlSerializer agent_serializer =
       new System.Xml.Serialization.XmlSerializer(typeof(AgentState));

    string agent_state_text = File.ReadAllText(@"C:\Temp\AgentState.xml");
    Console.WriteLine(agent_state_text + Environment.NewLine);
    string xml_agent_state = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + agent_state_text;
    Console.WriteLine(xml_agent_state + Environment.NewLine);

    AgentState agent_state = new AgentState();
    using(StringReader tx_reader = new StringReader(xml_agent_state))
    {
        if (tx_reader != null)
        {
            agent_state = (AgentState)agent_serializer.Deserialize(tx_reader);
        }
    }
    Console.WriteLine(agent_state.agentName);
    Console.WriteLine(agent_state.extension);
    Console.WriteLine(agent_state.currentlyIn);
} 
```

输出：

```
<AgentState>
  <agentName>jbloggs</agentName>
  <extension>12345</extension>
  <currentlyIn>TestStatus</currentlyIn>
</AgentState>

<?xml version="1.0" encoding="UTF-8"?>
<AgentState>
  <agentName>jbloggs</agentName>
  <extension>12345</extension>
  <currentlyIn>TestStatus</currentlyIn>
</AgentState>

jbloggs
12345
TestStatus 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:22:04.523

我已经设法使用以下代码使其工作 - 我不相信这是做事的“正确”方式，但它似乎工作：

```
 string data = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred);

 var document = XDocument.Parse(data);
 AgentState agent= (from c in document.Elements()
                        select new AgentState()
                                   {
                                       agentName = c.Element("agentName").Value,
                                       extension = c.Element("extension").Value,
                                       currentlyIn=c.Element("currentlyIn").Value
                                   }).Single(); 
```

谢谢你的建议，它让我走上了正轨。

# java - 向 MapView 添加新叠加时出现 NullPointer 异常

> ID：15906818
> 
> 赞同：0
> 
> 时间：2013-04-09T15:59:16.283
> 
> 标签：java, android

ItemizedOverlay 有以下代码：

```
private class AppointmentsOverlay extends ItemizedOverlay {
    private List<OverlayItem> locations;

    public AppointmentsOverlay(Drawable defaultMarker, List<Address> addresses) {
        super(defaultMarker);
        locations=new ArrayList<OverlayItem>();
        convertAddressesToOverlayItems(addresses);
    }

    private void convertAddressesToOverlayItems(List<Address> addresses) {
        for (Address address:addresses) {
            GeoPoint gp=new GeoPoint((int)(address.getLatitude()*1000000), 
                (int)(address.getLongitude()*1000000));
            locations.add(new OverlayItem(gp, "1", "1"));
        }
    }

    @Override
    protected OverlayItem createItem(int i) {
        return locations.get(i);
    }

    @Override
    public int size() {
        return locations.size();
    }   
} 
```

以及以下用于将此叠加层添加到 MapView 的代码：

```
private void initializeMapWithAppointments(List<Address> addresses) {
    Drawable marker=getResources().getDrawable(R.drawable.marker);
    mMapViewAppointments.getOverlays().add(new AppointmentsOverlay(marker, addresses));
    //mMapViewAppointments.setClickable(false);
} 
```

如果我单击 MapView，则会收到以下异常消息：

```
04-09 19:57:36.948: E/MapActivity(7053): Couldn't get connection factory client
04-09 19:57:41.263: E/AndroidRuntime(7053): FATAL EXCEPTION: main
04-09 19:57:41.263: E/AndroidRuntime(7053): java.lang.NullPointerException
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.google.android.maps.ItemizedOverlay.getItemsAtLocation(ItemizedOverlay.java:617)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.google.android.maps.ItemizedOverlay.getItemAtLocation(ItemizedOverlay.java:586)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.google.android.maps.ItemizedOverlay.handleMotionEvent(ItemizedOverlay.java:498)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.google.android.maps.ItemizedOverlay.onTouchEvent(ItemizedOverlay.java:572)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.google.android.maps.OverlayBundle.onTouchEvent(OverlayBundle.java:63)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:679)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.View.dispatchTouchEvent(View.java:5579)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1720)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1692)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1692)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1692)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1692)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1983)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1442)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.app.Activity.dispatchTouchEvent(Activity.java:2421)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1931)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.View.dispatchPointerEvent(View.java:5759)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2970)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2529)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:869)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2538)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.os.Looper.loop(Looper.java:154)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at android.app.ActivityThread.main(ActivityThread.java:4945)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-09 19:57:41.263: E/AndroidRuntime(7053):     at dalvik.system.NativeStart.main(Native Method) 
```

我不明白这是什么意思，因为我也看不到我的新自定义 ItemizedOverlay。我添加了 api 密钥，但我看到了空的 MapView。请告诉我，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:03:10.520

`populate()`在填充任何数据之前，您需要调用ItemizedOverlay。

```
 public AppointmentsOverlay(Drawable defaultMarker, List<Address> addresses) {
        super(defaultMarker);
        populate(); // Add this
        locations=new ArrayList<OverlayItem>();
        convertAddressesToOverlayItems(addresses);
    } 
```

[如此处](https://stackoverflow.com/a/4445495/1651233)所述

# javascript - 启用过滤器时在高图中放置一个重置过滤器按钮

> ID：15906823
> 
> 赞同：0
> 
> 时间：2013-04-09T15:59:21.370
> 
> 标签：javascript, jquery, highcharts

我的 legendItemClick 中有以下代码：函数（事件）。它将图例过滤转换为“单选按钮”样式格式，一次只能查看一组数据。问题是当您单击一个系列名称时，它不会让您回到让您看到所有点的视图。

有没有办法在启用过滤器时在图例中的某处放置一个显示“重置过滤器”的按钮？

我注意到，当您使用鼠标放大时，会出现一个“重置缩放”按钮，这就是我想要的，除了通过图例启用过滤器时。

```
 var seriesIndex = this.index;
            var series = this.chart.series;

            for (var i = 0; i < series.length; i++)
            {
                if (series[i].index != seriesIndex)
                {
                    series[i].hide();
                } 
                else
                {
                    series[i].show();    
                }
            }
            return false; 
```

我尝试了这段代码，阅读此链接后，[http://highslide.com/forum/viewtopic.php?f=9&t=15416](http://highslide.com/forum/viewtopic.php?f=9&t=15416)

但无法让它工作，也许，我放错了？我把它放在最后，在“scatter”大括号内，它直接在 plotOptions 大括号内。

```
chart.renderer.button('Reset zoom', null, null, chart.resetZoom, {
   zIndex: 20
}).attr({
   align: 'right',
   title: 'Reset zoom level 1:1'
}).add(chart.zoomGroupButton).align({
   align: 'right',
   x: -10,
   y: 10
}, false, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:34:03.663

您可以添加没有任何数据的额外系列`name: "Reset filter"`，然后`legendItemClick`检查是否单击了该系列（只需比较名称）。所以当点击 - 显示所有系列。

# java - 从另一个包中覆盖包中的java类

> ID：15906832
> 
> 赞同：-1
> 
> 时间：2013-04-09T15:59:36.067
> 
> 标签：java, maven, osgi, bundle, apache-felix

继承的包可以覆盖父包中的 java 类吗？我想更改捆绑包中的一个类，因此为此我将使用继承概念来让新捆绑包继承父捆绑包。请让我知道我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:30:02.897

是的，只需使用普通的 Java 继承即可。

包含基类的包需要导出该类所属的包，包含子类的包需要导入相同的包。

# python - 写入标准输入，拒绝访问

> ID：15906833
> 
> 赞同：0
> 
> 时间：2013-04-09T15:59:37.717
> 
> 标签：python, stdin

我正在尝试编写一个启动子进程并写入子进程标准输入的 python 脚本。对输出进行一些测试，然后将更多命令写入标准输入。

我试过了：

```
def get_band():
    print "band" 
    p = subprocess.Popen(["/path/to/program","-c","-"], stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE)

    ran_stdout = p.communicate(input='show status')[0]
    print(ran_stdout) 
```

但是打印语句给出：

```
Unable to connect at 127.0.0.1, Connection refused. 
```

我想知道我这样做是否正确？这是有关我尝试运行的过程的文档。我想使用最后一个选项。

```
Running the tool from the Linux shell allows additional options, depending on the options given to the command. The options are as follows:

-h Displays help about the command

-c <Filename>  Instead of taking typed commands interactively from a user the commands are read from the named file, i.e. in batch mode. When all commands are processed the CLI session ends automatically.

-c - As above but reads command from Linux stdin. This allows commands to be ‘piped’ to the program. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:43:40.217

如果你能告诉我们更多关于那个程序的信息，也许知道这个程序的人可以试着更好地解释它具体是如何工作的。

不过，你所描述的

> 启动一个子进程，并写入子进程标准输入。对输出进行一些测试，然后将更多命令写入标准输入。

与您的代码不匹配。

您的代码将某些内容打印到我们自己的标准输出、显示`band`，然后与子进程进行“一次性”通信。

为了清楚这一点，`p.communicate()`将它获得的所有内容写入子进程，关闭其标准输入并读出它从标准输出和标准错误中获得的任何内容。

因此，它与您的愿望不相容：写，读，再写。

所以你必须自己制作。

如果您编写的块足够小以保证适合管道缓冲区，那很简单：只需编写命令（不要忘记尾随`\n`）并读取。

但请注意！不要阅读比你真正拥有的更多，否则你的阅读可能会阻塞。

因此，使用非阻塞 IO 或`select.select()`.

如果您需要有关其中一个或另一个的更多信息，这里还有其他关于 SO 的答案，涵盖了这些主题。前几天我写了[一篇可能对你有帮助](https://stackoverflow.com/a/15857103/296974)的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:50:46.390

这出于某种原因，在同一行中传递了命令。然后为我想要的每个命令调用此函数。

```
 p = subprocess.Popen(["/path/to/program", '-c', '-', cmd_here],
  stdout=subprocess.PIPE) 
  proc_stdout, proc_stderr = proc.communicate()
  proc.wait()
  #print stuff 
```

# python - Date as Type：类型和确定剩余时间

> ID：15906835
> 
> 赞同：0
> 
> 时间：2013-04-09T15:59:42.343
> 
> 标签：python, date, datetime

我正在使用的 API 返回和 end_date 类型的属性：type。它的格式如下：u'2013-04-15 14:00:00'。我只是想从 end_date 中减去今天 -- datetime.date(2013, 4, 9) -- 以确定剩余时间。我查看了 python Datetime 模块的文档，但我无法弄清楚如何获取 end_date 属性并将其转换为我今天可以用来减去的东西。我在图书馆里遗漏了什么吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:03:45.570

```
date_a = datetime.strptime('2013-04-15 14:00:00','%Y-%m-%d %H:%M:%S')
date_b = datetime.strptime('2013-04-15 14:02:05','%Y-%m-%d %H:%M:%S')

elapsed_time = date_b - date_a 
```

然后：`print elapsed_time.total_seconds()`将返回 125 秒。my`elapsed_time`属于 timedelta 类型。例如 elapsed_time.days 也可以给你天数。

`%Y-%m-%d %H:%M:%S`是给日期解析器的格式。[检查 Python 文档第 8.1.7 段中的 strptime 格式。strftime() 和 strptime() 行为。](http://docs.python.org/2/library/datetime.html)

# javascript - Javascript函数调用范围

> ID：15906836
> 
> 赞同：0
> 
> 时间：2013-04-09T15:59:43.217
> 
> 标签：javascript, function, scope

我有以下（简化的）java 脚本、html 和包含的 java 脚本（js）文件。我的问题是我收到一个错误，即该方法在 syncData 函数调用中不存在。我知道我可以调用同步函数，因为它在 window.Main 的范围内，但是为什么我不能调用包含在 .js 脚本文件中的 syncData 以及如何调用它？

```
$(window).load(function () {
   Main.init();
});

window.Main = {
sync: function () {
    alert("sync");
},
init: function () {
    var self = this;
    self.displayDialog();
},

displayDialog: function () {
    $("#dialog-confirm").dialog({
        resizable: false,
        height: 240,
        width: 500,
        modal: true,
        buttons: {
            "Sync Data": function () {
                $(this).dialog("close");
                Main.sync();
                syncData();
            },
            Cancel: function () {
                $(this).dialog("close");
                alert("Cancel");
            }
        }
    });
}; 
```

HTML：

```
<!DOCTYPE html>
<head>
     <title>Pay Items Amounts</title>
    <script src="Scripts/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.10.2.js" type="text/javascript"></script>
    <!--<script src="Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>-->
    <script src="Scripts/jquery.validate.js" type="text/javascript"></script>
    <script src="Scripts/knockout-2.1.0.js" type="text/javascript"></script>
    <script src="Scripts/modernizr-2.5.3.js" type="text/javascript"></script>
    <script src="Scripts/PayItemAmounts.js" type="text/javascript"></script>
    <script src="Scripts/spin.js" type="text/javascript"></script>
    <script src="Scripts/syncData.js" type="text/javascript"></script>
    <link href="Content/jquery-ui.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <header>
    </header>
    <nav>
    </nav>
    <section class="dialog-confirmation">
        <div id="dialog-confirm" title="Sync Data?" style="display:none">
            <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>
            <label id="dialog-message"></label> </p>
        </div>
    </section>
</body>
</html>

JAVASCRIPT syncData.js FILE:
syncData: function () {
    alert("sync");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:02:37.580

你的语法不正确。

```
function syncData() {
  // whatever
} 
```

我认为您所拥有的应该是语法错误。标签（“syncData：”）没问题，但没用。函数声明缺少名称，因此（我认为）会产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:03:02.707

您无法调用`syncData()`，因为您尚未定义名为`syncData`.

这（因为它不在对象文字定义中）：

```
syncData: function () {
    alert("sync");
} 
```

…是语法错误。

你应该有：

```
function syncData () {
    alert("sync");
} 
```

或者，如果你真的想要一个函数表达式：

```
var syncData = function () {
    alert("sync");
} 
```

# elasticsearch - 使用 elasticsearch 进行地理空间标记聚类

> ID：15906837
> 
> 赞同：5
> 
> 时间：2013-04-09T15:59:45.267
> 
> 标签：elasticsearch, gis

我在具有相关纬度和经度（存储为 geo_point 类型）的弹性搜索索引中有数十万个文档。我希望能够创建一个看起来像这样的地图可视化：http: [//leaflet.github.io/Leaflet.markercluster/example/marker-clustering-realworld.388.html](http://leaflet.github.io/Leaflet.markercluster/example/marker-clustering-realworld.388.html)

所以，我想我想要的是使用边界框（即用户正在查看的地图边界）运行查询并返回此边界框中的集群摘要。在elasticsearch中是否有一个很好的方法来实现这一点？也许是一种新的索引策略？像 geohashes 这样的东西可以工作，但它会将事物聚集成一个矩形网格，而不是上面示例中基于点密度的任意多边形。

* * *

@kumetix - 好问题。我在这里回复您的评论，因为文本太长，无法再发表评论。geohash_precision 设置将指示 geohash 聚合能够返回的最大精度。例如，如果 geohash_precision 设置为 8，我们可以在该字段上运行 geohash 聚合，最高精度为 8。根据[参考](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-geohashgrid-aggregation)，这将返回分组在大约 38.2mx 19m 的 geohash 框中的结果。7 或 8 的精度可能足以准确显示我在上面示例中提到的基于 Web 的热图。

至于 geohash_precision 如何影响集群内部，我猜该设置在 geo_point 中存储了一个长度 <= geohash_precision 的 geohash 字符串。假设我们在自由女神像上有一点：40.6892,-74.0444。用于此的 geohash12 是：dr5r7p4xb2ts。将 geo_point 中的 geohash_precision 设置为 8 将在内部存储字符串：d dr dr5 dr5r dr5r7 dr5r7p dr5r7p4 dr5r7p4x

并且 geohash_precision 为 12 将另外在内部存储字符串： dr5r7p4xb dr5r7p4xb2 dr5r7p4xb2t dr5r7p4xb2ts

导致每个 geo_point 的存储开销增加一点。将 geohash_precision 设置为距离值（1km、1m 等）可能只是将其存储在最接近的 geohash 字符串长度精度值。

注意：如何使用 python 计算 geohashes

```
$ pip install python-geohash
>>> import geohash
>>> geohash.encode(40.6892,-74.0444)
'dr5r7p4xb2ts' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-04T10:58:47.547

在 Elasticsearch 1.0 中，您可以使用新的[Geohash Grid](http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-aggregations-bucket-geohashgrid-aggregation.html)聚合。

> 像 geohashes 这样的东西可以工作，但它会将事物聚集成一个矩形网格，而不是上面示例中基于点密度的任意多边形。

确实如此，但 geohash 网格聚合可以很好地处理稀疏数据，因此您只需要网格上有足够的点，您就可以实现与该地图中的示例非常相似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T09:50:30.573

试试这个：

[https://github.com/triforkams/geohash-facet](https://github.com/triforkams/geohash-facet)

我们一直在用它来做服务器端集群，它非常好。

示例查询：

```
GET /things/thing/_search
{
  "size": 0,
  "query": {
        "filtered": {
            "filter": {
                "geo_bounding_box": {
                    "Location"
                    : {
                        "top_left": {
                            "lat": 45.274886437048941,
                            "lon": -34.453125
                        },
                        "bottom_right": {
                            "lat": -35.317366329237856,
                            "lon": 1.845703125
                        }
                    }
                }
            }
        }
    },
    "facets": {
      "places": {
        "geohash": {
          "field": "Location",
          "factor": 0.85
        }
      }

    }
} 
```

# algorithm - 需要一个算法......不知道这叫什么

> ID：15906839
> 
> 赞同：-2
> 
> 时间：2013-04-09T15:59:46.537
> 
> 标签：algorithm, anagram, string-algorithm

给定一个字符串：“ABCD”，返回具有一个或多个缺失字符的子字符串，保持字符串的顺序。这似乎不是“排列”，但我不确定这个算法是否有名字。我正在使用它来生成单词和单词中单词的字谜。

例子：

A B C D

AB BC CD AC AD << 缺少 BC

ABC BCD ACD ABD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:03:39.913

您正在生成输入字符串字符的有序[幂集](https://en.wikipedia.org/wiki/Power_set)- 意思是，您可以从输入字符串中的字符集中获得的所有子集，保留初始顺序：

```
input  = { A, B, C, D }
output = { {}, {A}, {B}, {C}, {D}, {A, B}, {B, C} {C, D}, {A, C}, {A, D},
           {B, D}, {A, B, C}, {A, B, D}, {A, C, D}, {B, C, D}, {A, B, C, D} } 
```

结果集包含`2^n`元素（具有`n`输入集的大小），您可能希望从结果中删除空集和输入集，但基本上这是您正在寻找的算法。很容易找到任何你想要的语言的[实现](http://rosettacode.org/wiki/Power_set)。

# solr - Solr 4.2.1 SSLinitializationException

> ID：15906842
> 
> 赞同：5
> 
> 时间：2013-04-09T15:59:51.210
> 
> 标签：solr

升级到**Solr 4.2.1**后，将 Solr war 文件部署到 GlassFish 版本 3.1.1 会导致以下错误：

```
 2013-04-09 10:45:06,144 [main] ERROR org.apache.solr.servlet.SolrDispatchFilter - Could not start Solr. Check solr/home property and the logs
    2013-04-09 10:45:06,224 [main] ERROR org.apache.solr.core.SolrCore - null:org.apache.http.conn.ssl.SSLInitializationException: Failure initializing default system SSL context
    at org.apache.http.conn.ssl.SSLSocketFactory.createSystemSSLContext(SSLSocketFactory.java:368)
    at org.apache.http.conn.ssl.SSLSocketFactory.getSystemSocketFactory(SSLSocketFactory.java:204)
    at org.apache.http.impl.conn.SchemeRegistryFactory.createSystemDefault(SchemeRegistryFactory.java:82)
    at org.apache.http.impl.client.SystemDefaultHttpClient.createClientConnectionManager(SystemDefaultHttpClient.java:118)
    at org.apache.http.impl.client.AbstractHttpClient.getConnectionManager(AbstractHttpClient.java:466)
    at org.apache.solr.client.solrj.impl.HttpClientUtil.setMaxConnections(HttpClientUtil.java:179)
Caused by: java.io.IOException: Keystore was tampered with, or password was incorrect
  at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:772)
    at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:55)
    at java.security.KeyStore.load(KeyStore.java:1214)
    at org.apache.http.conn.ssl.SSLSocketFactory.createSystemSSLContext(SSLSocketFactory.java:281)
    at org.apache.http.conn.ssl.SSLSocketFactory.createSystemSSLContext(SSLSocketFactory.java:366)     
    ... 50 more
Caused by: java.security.UnrecoverableKeyException: Password verification failed
    at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:770)
    ... 54 more 
```

似乎人们在使用 Solr 4.2 版时遇到了这个问题，并且错误修复版本 4.2.1 应该修复它（？）。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T09:46:39.297

前几天遇到了同样的问题。通过降级到 solr 4.1.0 解决了这个问题。但是有一个解决方案（通过再次谷歌搜索我个人熟知的搜索词找到它；）只需添加两个 JVM 选项。从 glassfish 开始：

```
asadmin start-domain 
```

并输入：

```
asadmin create-jvm-options -- -Djavax.net.ssl.keyStorePassword=changeit
asadmin create-jvm-options -- -Djavax.net.ssl.trustStorePassword=changeit 
```

不要忘记重新启动 glassfish：

```
asadmin restart-domain 
```

为自己尝试过，效果很好。显然，这只有在您以前从未更改过这些密码的情况下才有效。

# jquery - fadeIn() 先显示后淡出

> ID：15906847
> 
> 赞同：0
> 
> 时间：2013-04-09T16:00:02.483
> 
> 标签：jquery, html, css, mouseevent

我正在做一个固定菜单，它有一个工具提示，当你将鼠标悬停在项目上时，它应该出现一个正在执行 fadeIn() 的图像，但行为很奇怪，它首先出现然后淡入我我不确定这是怎么回事，我给你留下代码，看看是否有人可以解释我正在发生的事情并帮助我，我正在学习，我会非常感激！

HTML

```
<div id="nav-pPal">
  <ul class="nav-Ppal">
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="0" href="#block-intro">01</a>
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="1" href="#block-pq-zolfunza">02</a> 
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="2" href="#block-modulos-zolfunza">03</a>    
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="3" href="#block-seguridad">04</a>
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="4" href="#block-desarrollo">05</a>
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="5" href="#block-nuestra-ubic">06</a>
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="6" href="#block-noticias">07</a>
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="7" href="#block-preguntas">08</a>
    </li>
    <li>
      <div class="tooltip"></div>
      <a class="btns-nav" id="8" href="#block-contacto">09</a>
    </li>
  </ul>
</div> 
```

这是CSS

```
#nav-pPal {
width:30px;
height:auto;
position:fixed;
right:0;
top:30%;
z-index:5;
}

.nav-Ppal li a {
width: 30px;
height: 22px;
padding-top:8px;
text-align:center;
display:block;
text-decoration:none;
color:#FFF;
cursor:pointer;
background-color: #000;
color: #FFF;
opacity: 1;
-moz-opacity: 0.70;
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha"(Opacity=70);
cursor:pointer;
font-family: 'lucida_sans_unicoderegular', Helvetica, Arial, sans-serif;
font-size:11px;
}

.tooltip{
background: black;
display: none;
height: 140px;
position: absolute;
right: 32px;
width: 200px;
transition: all .2s ease;
} 
```

最后是 JQUERY //------------工具提示主菜单 ------------

```
$(".btns-nav").on("mouseover", displayPreview);

function displayPreview(){
    $(this).prev().fadeIn("slow");
    console.log(this);
}

$(".btns-nav").on("mouseleave", hiePreview);

function hidePreview(){
    $(this).prev().fadeOut("slow"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:01:56.823

删除此 CSS 行：

```
transition: all .2s ease; 
```

工作小提琴：http: [//jsfiddle.net/ZTSe4/7/](http://jsfiddle.net/ZTSe4/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:10:50.760

隐藏所有其他工具提示，然后显示悬停的提示：

```
$(".tooltip").hide();
$(this).prev().fadeIn("slow"); 
```

[http://jsfiddle.net/gRPnP/1/](http://jsfiddle.net/gRPnP/1/)

# php - 反序列化时选择实例

> ID：15906851
> 
> 赞同：1
> 
> 时间：2013-04-09T16:00:08.543
> 
> 标签：php, serialization

我正在编写一个类似于 Java 的[Currency](http://docs.oracle.com/javase/7/docs/api/java/util/Currency.html)的 PHP 类：

> 该类的设计使得任何给定货币的 Currency 实例都不会超过一个。因此，没有公共构造函数。您可以使用 getInstance 方法获取 Currency 实例。

使用 PHP 保留实例化对象的静态数组并执行查找`getInstance()`以返回现有实例或在需要时实例化它是相当容易的。

问题来自序列化。即使我实现了[Serializable](http://php.net/manual/en/class.serializable.php)，我也无法选择要返回的实例`unserialize()`，因为此时对象已经实例化，并且因为在 PHP 中您无法覆盖`$this`：

```
class Currency implements Serializable
{
    public function getInstance()
    {
        // ...
    }

    public function serialize()
    {
        // ...
    }

    public function unserialize($data)
    {
        // At this point, the object is already instantiated,
        // so I can't just return self::getInstance(),
        // and can't override $this
    }
} 
```

**是否有任何技术解决方案可以选择在反序列化时返回的实例？**

- 编辑 -

这是我要解决的用例：

```
$euro = Currency::getInstance('EUR');
assert($euro === unserialize(serialize($euro)); 
```

我知道我可以用 构建一个*类似*的对象`unserialize()`，但我想知道是否有可能获得*相同*的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:01:34.687

**td;博士;** 不，您不能在 PHP 中本地执行此操作，因为`unserialize()`它不支持与`readResolve()`Java 相同的功能。

在 Java 中，在反序列化时，会创建对象的新实例，恢复其状态，然后`readResolve()`在类上调用（如果存在）。`readResolve()`获取新创建的反序列化对象，然后将其解析为另一个对象（如果需要），此时解析的对象就是反序列化返回的对象。`readResolve()`如果返回的对象与提供给它的对象不同，则最初创建的新实例将被垃圾回收。

在 PHP 中，在`unserialize()`. 您可以实现一个解决方法，但是，定义您自己的解析方法来模拟`readResolve()`，但您需要在`unserialize()`.

```
class Currency implements Serializable {
    private $currencyCode;
    private static $instances = array();

    private function __construct( $currencyCode) {
        $this->currencyCode = $currencyCode;
    }

    public static function getInstance( $currencyCode) {
        if( !isset( self::$instances[$currencyCode])) {
            self::$instances[$currencyCode] = new Currency( $currencyCode);
        }
        return self::$instances[$currencyCode];
    }

    public function serialize() {
        return serialize( $this->currencyCode);
    }

    public function unserialize( $data) {
        $this->currencyCode = unserialize( $data);
    }

    public static function resolve( $obj) {
        $new = self::getInstance( $obj->currencyCode);
        if( $new !== $obj) {
            unset( $obj);
        }
        return $new;
    }
}

$euro = Currency::getInstance('EUR');
assert($euro === Currency::resolve( unserialize(serialize($euro)))); 
```

Of course, there is nothing stopping somebody from not calling `Currency::resolve()`, and you will then end up with more than one object for the given currency code.

# java - Android：如何通过AsyncTask将数据写入scoket

> ID：15906861
> 
> 赞同：0
> 
> 时间：2013-04-09T16:00:32.070
> 
> 标签：java, android, android-asynctask, irc

我正在为 Android 构建一个简单的 IRC 客户端。

我使用 AsyncTask 连接到 Freenode/IRC-server。

我可以很容易地得到来自 irc-server 的所有响应，

然后我可以根据响应显示对话。

```
public class IrcTask extends AsyncTask<Void, String, Void> {
    public IrcTask(Activity activity, ProgressDialog pdialog, ScrollView sv_channel_output, List<String> join_users, BufferedWriter writer, BufferedReader reader, TextView outputView, String channel, String nick, String login) {
        this.activity = new WeakReference<Activity>(activity);//ChannelActivity
        this.nick = nick;
        this.login = login;
    }
    @Override
    protected Void doInBackground(Void... Sparams)  {
        // Connect directly to the IRC server.
        try {
            // Log on to the server.
            this.writer.get().write("NICK " + nick + "\r\n");
            this.writer.get().write("USER " + login + " 8 * : Freenode for Android App IRC Bot\r\n");
            this.writer.get().flush();

            // Join to the channel.
            this.writer.get().write("JOIN " + channel + "\r\n");
            this.writer.get().flush();

            // Read lines from the server until it tells us we have connected.
            String line = null;
            while ((line = this.reader.get().readLine( )) != null) {
                publishProgress(line);
                if (line.contains("PING ")) {
                    // We must respond to PINGs to avoid being disconnected.
                    this.writer.get().write("PONG " + line.substring(5) + "\r\n");
                    this.writer.get().flush( );
                }
            }
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

在我的 ChannelActvity 上，我有一个 EditView 可以将文本/数据发送到服务器。

我的问题是从服务器读取时将一些写入数据传递给 AsyncTask。

（启动 doInBackground->while.. 后，它会运行，以便将数据发送回我的 ChannelActicity）

我尝试使用“SharedPreferences”将写入数据传递给 IrcServer。

但它不起作用......

像这样...

```
// Read lines from the server until it tells us we have connected.
            String line = null;
            while ((line = this.reader.get().readLine( )) != null) {
                //gets/sets IRC-detils from 'MainActivity'
                pref = this.activity.get().getSharedPreferences("writeToIrcTack", 0);
                if(pref.getString("data", "").length() >0)
                {
                    Log.d("doInBackground->IF-it-gets-data", "pref.getString=="+pref.getString("data", ""));
                    this.writer.get().write("NOTICE "+channel+" " + pref.getString("data", "") + "\r\n");
                    this.writer.get().flush( );
                }
                publishProgress(line); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:04:28.557

如果您使用来自不同活动/服务/意图/...的共享首选项，则应将其与模式 MODE_MULTI_PROCESS（常量值 int = 4）一起使用。如果没有，文件将被锁定，并且只有一个进程可以一次写入！

因此，当您在多进程应用程序中调用共享首选项时，请执行以下操作：

```
SharedPreferences preferences = this.getSharedPreferences("myapp",4); 
```

MODE_MULTI_PROCESS 在 android 2.3 之前的所有版本上都为 ON，但必须严格调用后者！官方文档说：

> 操作模式。使用 0 或 MODE_PRIVATE 进行默认操作，使用 MODE_WORLD_READABLE 和 MODE_WORLD_WRITEABLE 来控制权限。如果多个进程正在改变同一个 SharedPreferences 文件，也可以使用位 MODE_MULTI_PROCESS。MODE_MULTI_PROCESS 在针对 Gingerbread (Android 2.3) 及更低版本的应用程序中始终打开，在更高版本中默认关闭。

# matlab - MATLAB矢量化创建矩阵

> ID：15906862
> 
> 赞同：3
> 
> 时间：2013-04-09T16:00:36.923
> 
> 标签：matlab, vectorization

我想创建一个矩阵

```
[1 2;
 1 3;
 1 4;
 1 5;
 2 3;
 2 4;
 2 5;
 3 4;
 3 5;
 4 5 ] 
```

当大小为 5 时。我的目标是大小大于 100。如何在 MATLAB 中使用 Vertorization 创建这样的矩阵？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T16:12:49.953

您正在寻找二项式系数，因此请使用内置[`nchoosek`](http://www.mathworks.com/help/matlab/ref/nchoosek.html)命令。例如，您问题中的矩阵可以通过以下方式生成：

```
A = nchoosek(1:5, 2) 
```

这导致：

```
A =
     1     2
     1     3
     1     4
     1     5
     2     3
     2     4
     2     5
     3     4
     3     5
     4     5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:09:32.023

一种解决方案：

```
[r,c]=find(tril(ones(N),-1));
result = [c,r]; 
```

作为奖励，您可以使用以下方法获取此类矩阵中的行数

```
nrows = nchoosek(N,2); 
```

# c++ - 从 QAbstractItemModel 子类化时的拖放支持

> ID：15906864
> 
> 赞同：1
> 
> 时间：2013-04-09T16:00:43.167
> 
> 标签：c++, qt, model, drag-and-drop, qabstractitemmodel

我从 子类化`QAbstractItemModel`，将模型放入`QTreeView`，一切都很好。

现在我想支持拖放，所以可以用鼠标改变项目位置。
我将`QTreeView` `dragDrop`模式设置为`DragDrop`, `defDropAction` `MoveAction`,`drag`启用为真。我可以拖动项目，它出现在鼠标附近，但放置时没有任何反应。

我需要哪些方法`QAbstractItemModel`来实现我的模型将支持拖放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:21:15.340

您需要实现[QAbstractItemModel::supportedDropActions()](http://doc.qt.io/qt-4.8/qabstractitemmodel.html#supportedDropActions)和[QAbstractItemModel::supportedDragActions()](http://doc.qt.io/qt-4.8/qabstractitemmodel.html#supportedDragActions)。[文档](http://doc.qt.io/qt-4.8/model-view-programming.html#using-drag-and-drop-with-item-views)也很好地解释了它。

此链接的海报有一些示例代码：http: [//forum.qt.io/topic/9417/solved-supporteddropactions-in-qabstractitemmodel](http://forum.qt.io/topic/9417/solved-supporteddropactions-in-qabstractitemmodel)

# ruby - 如何使用 Youtube Data API V3 获取旧的用户名字段

> ID：15906865
> 
> 赞同：4
> 
> 时间：2013-04-09T16:00:44.087
> 
> 标签：ruby, youtube-api

如类似问题（[如何在 YouTube Data API v3 中获取当前用户的个人资料信息](https://stackoverflow.com/questions/14961246/how-to-get-current-users-profile-information-in-youtube-data-api-v3)）中所述，youtube 用户的用户名（可在 youtube.com/user/{the username} 找到）与其频道标题之间可能存在差异。频道标题可以通过频道/列表资源检索，但是频道标题可能不等于拥有该频道的用户名。这里的问题是，如果用户名是唯一的，频道标题可能不是唯一的，这会在我们的应用程序内部造成很大的混乱（因为我们无法区分用户帐户）。

V3 Data API 中有什么方法可以获取用户名吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T16:02:27.400

[在channel.snippet.title](https://developers.google.com/youtube/v3/docs/channels#snippet.title)下有一个人类可读的显示名称

# sitecore - Sitecore 中的 Lucene 索引损坏 (ArgumentOutOfRangeException)

> ID：15906869
> 
> 赞同：3
> 
> 时间：2013-04-09T16:00:51.507
> 
> 标签：sitecore, lucene.net, sitecore6

我们在 Sitecore 中搜索 Lucene 索引时遇到问题。在一段时间内一切正常，然后，在看似随机的时间之后，我们开始在每次针对索引的搜索中收到以下错误：

```
System.ArgumentOutOfRangeException 
Message: Non-negative number required. 
Parameter name: capacity Source: mscorlib 
  at System.Collections.Hashtable..ctor(Int32 capacity, Single loadFactor)
  at System.Collections.Hashtable.Clone() 
  at SupportClass.WeakHashTable.Clean() 
  at SupportClass.WeakHashTable.CleanIfNeeded() 
  at SupportClass.WeakHashTable.Add(Object key, Object value) 
  at Lucene.Net.Util.CloseableThreadLocal.Set(Object object) 
  at Lucene.Net.Index.TermInfosReader.GetThreadResources() 
  at Lucene.Net.Index.TermInfosReader.Get(Term term, Boolean useCache) 
  at Lucene.Net.Index.SegmentReader.DocFreq(Term t) 
  at Lucene.Net.Index.DirectoryReader.DocFreq(Term t) 
  at Lucene.Net.Search.Similarity.IdfExplain(Term term, Searcher searcher)
  at Lucene.Net.Search.TermQuery.CreateWeight(Searcher searcher) 
  at Lucene.Net.Search.BooleanQuery.BooleanWeight..ctor(BooleanQuery enclosingInstance, Searcher searcher) 
  at Lucene.Net.Search.BooleanQuery.CreateWeight(Searcher searcher) 
  at Lucene.Net.Search.Query.Weight(Searcher searcher) 
  at Lucene.Net.Search.Hits..ctor(Searcher s, Query q, Filter f, Sort o) 
  at Lucene.Net.Search.Searcher.Search(Query query, Sort sort) 
  at scSearchContrib.Searcher.QueryRunner.RunQuery(Query query, Boolean showAllVersions, String sortField, Boolean reverse, Int32 start, Int32 end) 
  at scSearchContrib.Searcher.QueryRunner.GetItems(IEnumerable`1 parameters, Boolean showAllVersions, String sortField, Boolean reverse, Int32 start, Int32 end) at 
```

查看正在调用的 .Net 代码和 Lucene.Net 代码（通过 ILSpy），我看不出这实际上是如何发生的。在哈希表上调用 .Clone() 不应允许传入哈希表容量的负数。

这种情况在我们场中的多台服务器上发生过多次，重新启动 IIS 即可解决此问题。这让我相信发生了某种内存损坏，但我不确定是什么导致了这种情况或如何弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T23:32:03.823

Sitecore 支持针对 Sitecore 6.6 提供了一个解决方法。Lucene.NET 2.9.4 中使用的 WeakHashTable 类显然存在一些令人讨厌的线程安全问题。此问题已在更高版本的 Lucene.NET 中以及通过 Sitecore 7 中的相应升级得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:50:02.707

Try increasing number of worker threads for Sitecore by adding following setting to web.config

```
<setting name="MaxWorkerThreads" value="100"/> 
```

# python - 美丽的汤出错：列表索引超出范围

> ID：15906873
> 
> 赞同：2
> 
> 时间：2013-04-09T16:00:56.757
> 
> 标签：python, beautifulsoup, urllib

我是一个**非常新的 Python 程序员。使用 urllib 和 beautifulsoup 开发网络爬虫。请忽略顶部的 while 循环和 i 的增量，我只是在运行这个测试版本，并且只有一页，但它最终会包括一整套。我的问题是这得到了汤，但会产生错误。我不确定我是否正确收集了表格数据，但我希望这段代码可以忽略链接并将文本写入 .csv 文件。现在我专注于正确地将文本打印到屏幕上。

```
line 17, in <module>
    uspc = col[0].string
IndexError: list index out of range 
```

这是代码：

```
import urllib
from bs4 import BeautifulSoup

i=125
while i==125:
    url = "http://www.uspto.gov/web/patents/classification/cpc/html/us" + str(i) + "tocpc.html"
    print url + '\n'
    i += 1
    data = urllib.urlopen(url).read()
    print data
    #get the table data from dump
    #append to csv file
    soup = BeautifulSoup(data)
    table = soup.find("table", width='80%')
    for row in table.findAll('tr')[1:]:
        col = row.findAll('td')
        uspc = col[0].string
        cpc1 = col[1].string
        cpc2 = col[2].string
        cpc3 = col[3].string
        record = (uspc, cpc1, cpc2, cpc3)
        print "|".join(record) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:39:59.987

最后，我通过更改以下行解决了这个问题：

```
for row in table.findAll('tr')[1:]: 
```

到：

```
for row in table.findAll('tr')[2:]: 
```

错误是因为表的第一行有拆分列

# asp.net - 我可以在 Ajax 服务器控件中封装 WCF 或 Web API 吗？

> ID：15906874
> 
> 赞同：0
> 
> 时间：2013-04-09T16:00:58.573
> 
> 标签：asp.net, wcf, asp.net-web-api, asmx, servercontrols

我对 .NET 中的服务还很陌生，一般来说对 .NET 并没有太多经验，所以请原谅我的无知。

我的任务是实现一个独立的登录控件，它可以在许多应用程序中使用。我做了一些浏览并取得了一些进展，但想知道在我走得太远之前是否有更好的方法。

到目前为止，我有一个 AJAX 服务器控件，其中包括一个通过 AJAX 调用的 .asmx Web 服务。

我担心这个解决方案的安全性，也明白由于 WCF 和 Web API 的兴起，.asmx 不再受欢迎。我试图找到以类似方式使用 WCF 或 Web API 的示例，但没有遇到任何问题。这可能吗？

我也在想，也许更好的方法是让 Web API 服务在控件之外运行，但让控件调用它。

这甚至是管理授权和身份验证的安全方法吗？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:04:26.293

您可以从这里开始：[向客户端脚本公开 WCF 服务](http://msdn.microsoft.com/en-us/library/bb514961%28v=vs.90%29.aspx)

# php - Codeigniter - 重定向

> ID：15906877
> 
> 赞同：1
> 
> 时间：2013-04-09T16:01:09.103
> 
> 标签：php, codeigniter, redirect, codeigniter-url

我在重定向`index`到函数`logotyp`或`tiskoviny`. 当我向浏览器 ( ) 写入时，`localhost/my_page/sluzby/logotyp`它可以工作，但没有 CSS 显示（这是第二个问题）。`URL Helper`是自动加载的。

```
class Sluzby extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->library('uri');
        $this->load->model('sluzby_model');
        $this->load->model('pages');
    }

    public function index()
    {
        redirect('sluzby/logotyp');
    }

    public function logotyp()
    {
        $data['nadpis'] = "SomeText";
        $this->basic_template->view('basic', 'sluzby_view',$data);
    }

    public function tiskoviny()
    {
        $data['nadpis'] = "SomeText";
        $this->basic_template->view('basic', 'sluzby_view',$data);
    }
} 
```

当我想从索引重定向时，浏览器向我显示此错误：

```
<p>Severity: Warning<br>
Message:  Cannot modify header information - headers already sent by (output started at C:\Program Files\VertrigoServ\www\dsvision\application\controllers\sluzby.php:1)<br>
Filename: helpers/url_helper.php<br>
Line Number: 542</p> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:58:22.500

如前所述，确保`<?php`控制器中的开始标记之前没有空格（空格、制表符、换行符等）。如果您有结束`?>`标签，则可以将其删除，因为它通常会导致`redirect`.

* * *

在这种情况下，如果您不关心 URL 中包含函数的名称（这不会更改 URL 以在 URL 中显示您正在调用的函数 ( `logotyp()`)，而`redirect`函数会）/刷新页面，然后你可以直接在你的函数中调用相关`index()`函数：

```
public function index()
{
    $this->logotyp();
} 
```

* * *

对于您的第二个问题（CSS 未加载）；这可能是因为指向其路径的链接不正确。使用`base_url`CodeIgniter 的函数，`URL Helper` 您可以轻松生成正确的路径。我不知道你的 CSS 文件在哪里，但是对于这个例子，我假设，相对于站点根目录，它在这里：`assets/css/style.css`. 只需添加相对于 Web 根目录的路径，如下所示：

```
<link href="<?php echo base_url("assets/css/style.css"); ?>" type="text/css" rel="stylesheet"> 
```

中的[link_tag()](http://ellislab.com/codeigniter/user-guide/helpers/html_helper.html#link_tag)`HTML Helper`也可以帮助生成样式表链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:03:18.500

好像您的控制器中有一些空白空间...确保将其删除并且文件以`<?php`. 您也不能在重定向之前输出任何东西（没有视图，没有回声）......

# android - 为什么Canvas类中的drawBitmap方法会扭曲图像

> ID：15906881
> 
> 赞同：0
> 
> 时间：2013-04-09T16:01:26.980
> 
> 标签：android

为什么 Canvas 类中的 drawBitmap() 方法会扭曲图像？当我使用 ImageView 的 setImageBitmap() 函数在 ImageView 的子类上设置位图时，图像被完美渲染。

现在在 Android 4.x 中有一个错误，这个 setImageBitmap 会导致额外的菜单项出现问题。额外的菜单项（通常超过使用更多...显示的六个菜单项）失去了触摸侦听器。

我有以下代码显示如何使用两种不同的方法渲染图像。

```
/**
 * draws bitmap icons
 */
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    if(bitmap == null){
       bitmap = AppMain.getItemIcon(thisItem);
    }
    //drawBitmap(canvas, bitmap); //distorts image
    drawBitmap(bitmap); //works perfect

}
    //draw using setImageBitmap
private void drawBitmap(Bitmap bitmap){
    if(bitmap != null){
        this.setImageBitmap(bitmap);

        Matrix m = this.getImageMatrix();
        m.setRectToRect(new RectF(0, 0, bitmap.getWidth(), bitmap.getHeight()), 
                        new RectF(0, 0, this.getWidth(), this.getHeight()),
                        Matrix.ScaleToFit.CENTER);

        this.setImageMatrix(m);

    }

}
    //draw using canvas.drawBitmap()
private void drawBitmap(Canvas canvas, Bitmap bitmap){
    if(bitmap != null){
        Matrix m = new Matrix();
        m.setRectToRect(new RectF(0, 0, bitmap.getWidth(), bitmap.getHeight()), 
                        new RectF(0, 0, this.getWidth(), this.getHeight()), 
                        Matrix.ScaleToFit.CENTER);

        canvas.drawBitmap(bitmap, m, null);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:12:41.347

可能只是放大了。默认情况下`ImageView`，使用双线性过滤绘制缩放位图。您可以尝试在调用时启用它`Canvas.drawBitmap`。您需要使用[相应的标志创建新的](http://developer.android.com/reference/android/graphics/Paint.html#FILTER_BITMAP_FLAG)[Paint](http://developer.android.com/reference/android/graphics/Paint.html)对象（但不要在方法中这样做）：`onDraw`

```
Paint mPaint = new Paint(Paint.FILTER_BITMAP_FLAG); 
```

然后将此`Paint`对象提供给`Canvas.drawBitmap`方法：

```
canvas.drawBitmap(bitmap, m, mPaint); 
```

# cygwin - 在 Cygwin 中第二次尝试访问串行端口时访问被拒绝

> ID：15906885
> 
> 赞同：4
> 
> 时间：2013-04-09T16:01:38.653
> 
> 标签：cygwin, arduino

我正在尝试从连接到 Arduino 的 USB 串行端口获取数据。我正在使用 Cygwin，我写

```
cat /dev/ttyS4 
```

在shell中输出数据。

当我停止这个过程时，我得到了

> 拒绝访问

当我尝试再次访问它时。我必须关闭 Cygwin，再次打开它并输入相同的命令以获取 shell 的输出。

我注意到我只能从一个程序中读取串行端口。例如，如果我从 Arduino 软件中的串口读取数据，我无法在 Cygwin 中访问它。

有没有一种方法可以让我在 Cygwin 中多次访问串行端口数据，而不必关闭程序，再次打开它并写入相同的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T22:28:35.137

该语句似乎`cat /dev/ttyS4`会从串行端口回显字符，直到到达文件末尾。只是，从本质上讲，串行端口永远不会到达终点。因此，您需要将输入安排为“结束”。一种方法是让 Arduino 将文件结尾字符 (control-D) 放入输出流中。另一种方法是使用所谓的“heredoc”，您可以通过它告诉它查找要结束的字符串，如[this question](https://stackoverflow.com/questions/2500436/how-does-cat-eof-work-in-bash)中所述。

但是，这仍然存在许多问题。一是，control-C 不会关闭对串行端口的访问似乎是错误的。另一个是，我在我的机器上试过这个，我不能让它产生你问的问题。所以，这就是我所能提供的。

# java - 计算机科学：Java MC

> ID：15906887
> 
> 赞同：0
> 
> 时间：2013-04-09T16:01:42.170
> 
> 标签：java

```
private int[] myStuff;
/** Precondition: myStuff contains int values in no particular order.
  /*/ 
public int mystery(int num)
{
    for (int k = myStuff.length-1; k>=0; k--)
    {
        if (myStuff[k] < num)
        {
           return k;
        }
    }
return -1;
} 
```

以下哪项最能描述执行以下语句后 myStuff 的内容？

```
int m = mystery(n); 
```

答案：位置 m+1 到 myStuff.length-1 中的所有值都大于或等于 n。

谁能解释为什么这个答案是正确的？我不确定它们所说的内容是什么意思，但我得出的结论是 myStuff 没有改变，因为代码不会改变 myStuff 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:32:54.367

前提条件说，**myStuff**包含没有特定顺序的整数值。for 循环初始化为**k**等于**myStuff**的长度减一（因为数组索引从零开始），在**k**大于或等于零时进行迭代，并在每次迭代中从**k中减一。**

如果你看**if语句，当****myStuff[k]**的相应索引处的值小于**n**时，它将返回**k**的当前值；因此，数组索引中大于返回值加一的所有值都必须大于或等于**n**。如果**myStuff**中没有数字整数大于**n**，则返回减一。

 ******我希望这有帮助。

顺便说一句 - 你是对的**mySyuff**的内容没有改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:32:56.903

你是对的，`myStuff`没有改变。但是，他们询问的是数组中的数据、函数的返回值以及函数的参数之间的关系。

该代码执行以下操作：

*   以相反的顺序迭代数组。（for循环）
*   在迭代期间的每个索引处，它检查该索引的值是否与，如果更大`n`则返回当前索引。`n`（如果声明）

那么该方法返回什么？它从 where 末尾返回第一个索引`mystuff[m] < n`。( `mystuff[i] >= num`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:39:43.623

关于**内容**的问题是有效的。它与内容本身是否改变无关。

`k`当有这样的（从`myStuff.length-1`到`0`）`myStuff[k]`小于时`n`，或者`-1`当的**所有**元素`myStuff`大于或等于时，此方法返回一个非负数`n`。

让我们考虑**这两种**情况：

*   m 是非负数 - 这意味着该位置是满足条件**的右**`m`数最后一个，您的答案是正确的**`myStaff[m] < n`**

***   m 是`-1`- 这意味着所有元素都大于等于`m+1`（在这种情况下是`0`） - 因此答案是正确的********

# spring-integration - Spring 集成 - 文件：如何在运行时定义固定速率属性值

> ID：15906893
> 
> 赞同：1
> 
> 时间：2013-04-09T16:02:04.200
> 
> 标签：spring-integration

当前目录和固定速率轮询周期取自属性文件。

```
<file:inbound-channel-adapter id="batchFilesStock" directory="#{configurationService.configuration.getProperty('qlacceleratorcore.batch.impex.stockbasefolder')}"
    filename-regex="^(\d+)\-(.*).csv" comparator="fileOrderComparator" prevent-duplicates="false">
    <int:poller fixed-rate="#{configurationService.configuration.getProperty('pollerperiod')}"/>                            
</file:inbound-channel-adapter> 
```

我喜欢从数据库中获取固定利率值，否则该值应该在运行时可配置。我搜索了许多链接，但无法找出解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:37:14.133

有一个示例应用程序[https://github.com/SpringSource/spring-integration-samples/tree/master/intermediate/dynamic-poller](https://github.com/SpringSource/spring-integration-samples/tree/master/intermediate/dynamic-poller)展示了如何使用具有可配置轮询率的轮询器。

请注意，更改将在下次投票时生效...

“更改轮询周期时，对触发器的更改将在当前速率的 NEXT 轮询之后发生。因此，如果当前轮询周期为 60 秒，而您将其更改为 1 秒，则最多可能需要 60 秒效果，取决于您在轮询周期中进行更改的时间。”

实质上，您创建了一个自定义触发器，该触发器在调度程序调用时返回适当的值`nextExecutionTime()`。

编辑：

下面的评论询问“......如何在多个轮询器中使用自定义触发器”。

好吧，看看`nextExecutionTime()`。请注意，特定轮询器的状态包含在传递给方法 ( `TriggerContext`) 的参数中，该方法用于计算下一次执行时间。

因此，您可以简单地在任意数量的轮询器中重复使用触发器......

```
<bean id="myTrigger" class="..." />

<file:inbound-channel-adapter id="fi1" ... >
    <poller ... trigger="myTrigger" />
</file:inbound-channel-adapter>

<file:inbound-channel-adapter id="fi2" ... >
    <poller ... trigger="myTrigger" />
</file:inbound-channel-adapter> 
```

如果您想要每个不同的速率，那么只需为每个使用不同的触发器（适当配置）。

# vba - 弹出用户表单以选择非空列选择空列

> ID：15906895
> 
> 赞同：1
> 
> 时间：2013-04-09T16:02:07.077
> 
> 标签：vba, excel

我有一个在主工作表中组织的工作簿。每个项目有 3 行。这些项目按行和列分组和子分组。

我已经开发了几个报告选项。这些报告根据主工作表中的特征识别某些项目，并将它们复制到另一个工作表。到目前为止，一切都很好。

我的最终任务看起来很简单，并且基于我开发的先前逻辑。我需要一个提示用户输入列的弹出窗口。根据列输入，我抓取所有非空行（在它们对应的 3 组中）并将它们复制过来。正如我所指出的，这种逻辑以前有效。为了便于阅读，我在组之间留了一个空白行。

我将列输入转换为列号（感谢您和之前的帖子！）。问题是代码正确地复制了组（具有非空白条目），然后一旦离开第一行分组，它就开始复制非空白条目。

我知道这些列中的条目是什么，并且还尝试使用一种关键方法 - 将已知条目转换为 ascii 并检查单元格值。仍然，同样的结果。

我想知道问题是否在于代码驻留在用户表单中？我需要将用户窗体与宏分开吗？columnNumber 是否以某种方式被覆盖（看起来是这样）。可能存在来自以前版本和故障排除的工件（未使用的变量）......

我承认这不是我做过的最优雅的编码，但我的时间不多了（我只剩下几天时间来完成整个项目）。在这里，非常感谢任何建议或帮助。提前谢谢你:)

```
Private Sub Cancel_Click()

UserForm4.Hide

End Sub

Private Sub Go_Click()
    Dim Test As String
    Dim colNumber, columnNumber As Integer
    Dim m As Integer
    Dim ws2 As String
    Dim i, j, k, r As Integer
    Dim BlankRow2
    Dim ColorCode As Integer
    Dim RqtRow As Integer
    Dim Item As Integer
    Dim ColVal, AscCol As String
    Dim Row1Value, Row2Value, Row3Value As Integer

    ' Initialize Variables
    ws1 = "Requirements_Matrix"
    ws2 = "OUTPUT"
    RqtRow = 8
    BlankRow2 = 4
    Item = BlankRow2
    Lastrow1 = Sheets(ws1).Cells(Rows.Count, "A").End(xlUp).Row
    Lastcol1 = Sheets(ws1).Cells(1, Columns.Count).End(xlToLeft).Column
    Lastrow2 = Sheets(ws2).Cells(Rows.Count, "A").End(xlUp).Row
    Lastcol2 = Sheets(ws2).Cells(1, Columns.Count).End(xlToLeft).Column

    Test = UserForm4.WhichTest.Value
    If Test <> "" Then
        colLetter = UCase(Test)
        colNumber = 0
        For m = 1 To Len(colLetter)
            colNumber = colNumber + (Asc(Mid(colLetter, Len(colLetter) - m + 1, 1)) - 64) * 26 ^ (m - 1)
        Next
        columnNumber = colNumber
        If (columnNumber < 24) Or (columnNumber > 136) Then
           UserForm5.Show 'outside test columns - do not have time to execute further error testing...
        Else 'Copy requirements from Requirements_Matrix Sheet to Output Sheet
            With Sheets(ws2)
              Sheets(ws2).Select
              Rows("4:5000").Select
              Selection.Delete Shift:=xlUp
           End With

        Sheets(ws1).Select
           For i = 8 To Lastrow1  'find non-empty cells
              If Sheets(ws1).Cells(i, 3).Interior.ColorIndex = 34 Then
                  Row3Value = Sheets(ws1).Cells(i, 3).Value
              End If

            If Sheets(ws1).Cells(i, 2).Interior.ColorIndex = 44 Then
              Row2Value = Sheets(ws1).Cells(i, 2).Value
            End If

            If Sheets(ws1).Cells(i, 1).Interior.ColorIndex = 37 Then
              Row1Value = Sheets(ws1).Cells(i, 1).Value
            End If

           If Sheets(ws1).Cells(i, 5) = "Requirement" Then 'Requirement Row
              RqtRow = i
           End If

           If (Sheets(ws1).Cells(i, columnNumber).Value <> Empty) And _
           Sheets(ws1).Cells(i, 3).Interior.ColorIndex <> 34 And _
           Sheets(ws1).Cells(i, 2).Interior.ColorIndex <> 44 And _
           Sheets(ws1).Cells(i, 1).Interior.ColorIndex <> 37 Then
               k = RqtRow + 2
               Increment = BlankRow2 + 2
               Sheets(ws1).Select
                 Rows(RqtRow & ":" & k).Select  'select requirement block containing non-blank cell
                 Selection.Copy

                 Sheets(ws2).Select
                 Range(BlankRow2 & ":" & Increment).Select
                 ActiveSheet.Paste
                 ActiveSheet.Cells(BlankRow2, 1).Value = Row1Value
                 ActiveSheet.Cells(BlankRow2, 2).Value = Row2Value
                 ActiveSheet.Cells(BlankRow2, 3).Value = Row3Value

                BlankRow2 = Increment + 2 'leave a blank row between requirements

             End If
         Next

      End If
    Else
       UserForm5.Show
    End If
    UserForm4.WhichTest.Value = Empty
    UserForm4.Hide
End Sub 
```

# jquery - 使用 HTML 元素标题的 Jquery 变量值

> ID：15906896
> 
> 赞同：0
> 
> 时间：2013-04-09T16:02:12.073
> 
> 标签：jquery, html

是否可以将我在 Jquery 变量中的值分配给元素的标题？

例如 var params 将具有值 Assigned、Assignee 等。

如何设置元素的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:03:12.380

您可以使用标题属性

使用 jQuery 对象

```
$('#yourElement').attr('title', varibleval); 
```

使用 javascript DOM 对象

```
$('#yourElement')[0].title = varibleval; 
```

# c# - 如何从列表中显示多选列表

> ID：15906897
> 
> 赞同：4
> 
> 时间：2013-04-09T16:02:12.340
> 
> 标签：c#, .net, razor, asp.net-mvc-4

```
class User() {
   public List<Customer> Customers;
}

class Customer() {
   public long Id;
   public string Name;
} 
```

我填充所选项目

```
User MyUser = new User(); 
MyUser.Customers = db.Customers.Where(...).ToList(); 
```

我以这种方式传递所有项目的列表

```
ViewBag.Customers = db.Customers.OrderBy(c => c.Name).ToList(); 
```

在我的视图中，我想将它显示为一个多选 HTML 元素，其中所有 (ViewBag.Customers) 元素和 (MyUser.Customers) 都被选中。我试过了

```
@model MySCL.Models.User

@Html.ListBoxFor(m => m.Customers, new MultiSelectList(ViewBag.Customers, "Id", "Name"), new {Multiple = "multiple", size = "5" }) 
```

但它只显示完整列表而不选择任何项目。这是最好的做法吗？还有其他更好的方法吗？如果我有一个字符串列表，而不是客户列表，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:24:13.597

[MultiSelectList 构造函数](http://msdn.microsoft.com/en-us/library/dd470158%28v=vs.108%29.aspx)还采用一个 IEnumerable 待选择项目列表，因此如果您将代码更改为：

```
new MultiSelectList(ViewBag.Customers, "Id", "Name", Model.Customers) 
```

然后，该列表应以选择的所有客户项目开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:31:52.170

我通过将第 4 个参数作为 int 或 string 的列表传递来解决，该列表具有对象的唯一键，而不是对象列表。

```
new MultiSelectList(ViewBag.Customers, "Id", "Name", Model.Customers.Select(c => c.Id)) 
```

# java - “类型不匹配：无法从 void 转换为 List " 使用 Comparator 排序时

> ID：15906898
> 
> 赞同：3
> 
> 时间：2013-04-09T16:02:14.700
> 
> 标签：java

我正在尝试对项目列表进行排序，以使“游戏”类别的项目位于列表的底部。

我收到标题中的错误。我究竟做错了什么？

```
public static void write(List<Item> dontExist2) {

        List<Item> dontExist3 = Collections.sort(dontExist2, new Comparator<Item>() {

            @Override
            public int compare(Item o1, Item o2) {
                String cat1 = o1.getCategory();
                String cat2 = o2.getCategory();
                if (cat1.contains("Games")) {
                    return 1;
                }else{
                    return -1;
                }
            }

        }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T16:04:15.877

排序返回 void，它对您作为参数传递的列表 dontExist2 进行排序。调用后，列表将被排序。

# c++ - 构建 Boost C++ WinCE

> ID：15906901
> 
> 赞同：4
> 
> 时间：2013-04-09T16:02:27.563
> 
> 标签：c++, boost, windows-ce

我知道这是类似的问题，但对我没有帮助。我想在 x86 平台上为 Windows CE 6 构建提升。

我已经成功地在发布模式中构建了 STLPort 作为 WINCE 的共享库，我还添加了一些补丁并集成了 OpenCE 时间库并实现了一些缺少的 ANSI C 函数。STLPort 测试没问题（只是 wcout、wcin 和 wcerr in_avail() 函数的问题，我不知道问题出在哪里）。

为了构建 boost，我创建了一个批处理文件并以这种方式更改了 user-config.jam。构建没问题，但似乎我正在为我的 Windows Xp 平台而不是 WinCE 编译。

boost 构建系统非常复杂，我不明白它是如何工作的（文档不是很好，在谷歌上也没有太多）。boost的构建还可以，但我无法运行应用程序。似乎缺少某些 DLL 或 Boos DLL 错误。当我连接调试器时收到的消息是“Nessun processo all'estremita' della PIPE”->“在 PIPE 结束时没有进程”。当我尝试从目标设备启动应用程序时，它不起作用。我错了吗？如何告诉 boost 使用特定配置？

另一个问题是我看不到构建日志。我不知道我到底在建造什么。有没有办法查看实际做了什么？

我调用来构建 boost 的批处理文件（我启动了 Visual Studio 2008 的 shell）：

```
@echo off
cls
bjam --with-chrono --with-date_time --with-thread toolset=msvc-CEPlatformName variant=release threading=multi link=shared runtime-link=shared 
```

这是位于 tools/build/v2 中的 user-config.jam

```
using msvc : CEPlatformName:
    <compileflags>-D_CRT_SECURE_NO_WARNINGS
    <compileflags>-D_CRT_SECURE_NO_DEPRECATE
    <compileflags>-DBOOST_PROTO_MAX_ARITY=10
    <compileflags>-DBOOST_MPL_CFG_NO_PREPROCESSED_HEADERS
    <compileflags>-DBOOST_MPL_LIMIT_METAFUNCTION_ARITY=10
    <compileflags>-D_WIN32_WCE=0x600
    <compileflags>-DUNDER_CE
    <compileflags>-DWINCE
    <compileflags>-Dx86
    <compileflags>-D_x86_
    <compileflags>-D_UNICODE
    <compileflags>-DUNICODE
    <linkflags>/subsystem:windowsce,6.00 
    <linkflags>/MACHINE:X86
    <linkflags>/NODEFAULTLIB:oldnames.lib
    <linkflags>/NODEFAULTLIB:libc.lib
    <linkflags>coredll.lib
    <linkflags>corelibc.lib
    <linkflags>ole32.lib
    <linkflags>oleaut32.lib
    <linkflags>uuid.lib
    <setup>C:/boost_1_53_0/CEPlatformNameConfig.bat.bat
; 

using stlport : 5.2 :
    C:/celib/stlport/stlport :
    C:/celib/stlport/bin 
; 
```

这是用于配置的脚本文件

```
@echo off
echo CONFIGURAZIONE PER LA COMPILAZIONE DI BOOST SU WINCE
echo.

rem ------------------------------------------------------------
set BOOST_DIR=c:\boost_1_53_0\boost
set PLATFORM=CEPlatformName
set TARGETCPU=x86
set OSVERSION=WCE600
set STLPORT_DIR=C:\celib\stlport
set STLPORT_INC=%STLPORT_DIR%\stlport
set STLPORT_LIB=%STLPORT_DIR%\bin\%PLATFORM%
rem ------------------------------------------------------------

if not %1==%&TARGETCPU% goto error

echo Setting Boost directory to %BOOST_DIR%
echo Setting OS Platform to %PLATFORM%
echo Setting target CPU to %TARGETCPU%
echo Setting OS Versione to %OSVERSION%
echo Setting STLPORT_INC to %STLPORT_INC%
echo Setting STLPORT_LIB to %STLPORT_LIB%

rem settin visual studio 2008 variable path
set SDKROOT=C:\Programmi\Windows CE Tools

set PATH=%VSINSTALLDIR%\VC\ce\bin\x86_cex86;%VSINSTALLDIR%\VC\bin;%VSINSTALLDIR%\Common7\IDE;%PATH%
set PLATFORMROOT=%SDKROOT%\%OSVERSION%\%PLATFORM%
set INCLUDE=%STLPORT_INC%;%PLATFORMROOT%\include\;%PLATFORMROOT%\include\%TARGETCPU%;%VCINSTALLDIR%\ce\include;%VCINSTALLDIR%\ce\atlmfc\include;%VSInstallDir%\SmartDevices\SDK\SQL Server\Mobile\v3.0;
set LIB=%STLPORT_LIB%;%PLATFORMROOT%\lib\%TARGETCPU%;%VCINSTALLDIR%\ce\ATLMFC\LIB\%TARGETCPU%;%VCINSTALLDIR%\ce\LIB\%TARGETCPU%

echo PATH at %PATH%
echo.

echo INCLUDE is %INCLUDE%
echo.

echo LIB is %LIB%
echo.

goto exit

:error
echo Invali Target CPU
goto exit

:exit
echo impostazioni avvenute con successo 
```

**编辑**

似乎 user-config.jam 中的 compileflags 没有效果......或者更好的是 user-config.jam 没有效果

**编辑 2** 我发现了一个问题

```
using msvc : CEPlatformName :
        <compileflags>-D WINCE 
```

问题是这个指令没有定义任何东西。我也试过

```
using msvc : CEPlatformName :
        <compileflags>/D_CRT_SECURE_NO_WARNINGS 
```

但结果是一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T02:25:02.963

我发现
我终于在自定义 x86 目标上构建 boost.chrono boost.date_time boost_system 和 boost.thread fow Windows CE 6.0 的问题。

我以这种方式更改了 user-config.jam

```
using msvc : 9.0~CEPlatformName : "C:\...\cl.exe" :
    <compileflags>-D_CRT_SECURE_NO_WARNINGS
    <compileflags>-D_CRT_SECURE_NO_DEPRECATE
    ...
    <setup>CEPlatformNameConfig.bat
; 
```

通过这种方式，bjam 调用正确的批处理文件来配置构建系统。如果未指定编译器，bjam 将调用 vcvarsall.bat 并且编译器标志将被忽略。
现在 bjam 调用是：

```
bjam ... toolset=msvc-9.0~CEPlatformName ... 
```

正确定义 `x86` 和 `_X86_` 也很重要。请注意，`X86` 将导致 STLPort 假定 ANSI C 库文件的目录错误。

但是我在 boost::this_thread::sleep_for() 函数上有一个问题。我知道 boost 使用 TLS 进行此操作，并且我知道 TLS 在 WinCE 中没有完全实现。我可以用 Win32 库的简单 ::Sleep() 替换这个函数。
我只确定 WinCE 具有 `TlsAlloc()`、`TlsFree()`、`TlsGetValue()` 和 `TlsSetValue()` 函数，并且至少有 `TLS_MINIMUM_AVAILABLE` 用于 TLS 的插槽，该插槽至少定义为 64 .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:53:05.020

最后，我能够在调试和发布模式下构建 Boost.Thread Boost.System Boost.Chrono Boost.DateTime Boost.Regex。

问题是根据这个端口（http://stackoverflow.com/questions/16016637/boost-c-and-windows-ce-6-0），WinCe 不支持长名称。DLL 名称可以大于 32 个字符。

同样的名称长度问题导致 this_thread::sleep_for 不起作用。

感谢所有帮助过我的人。

# angularjs - 使用 testacular（现为 karma）在浏览器中调试

> ID：15906903
> 
> 赞同：50
> 
> 时间：2013-04-09T16:02:36.650
> 
> 标签：angularjs, karma-runner

当我破坏单元测试时，我试图找出调试单元测试的最佳方法。通常在以前的测试环境中，我可以只在浏览器中运行测试，然后对测试或代码进行断点，然后查看测试失败的原因。我似乎无法弄清楚如何用睾丸来做到这一点。有没有一种简单的方法来调试单元测试？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-05-24T02:55:35.193

1.  在`karma.conf.js`：

    ```
    browsers = ['Chrome']; 
    ```

2.  在您失败的规范中：

    ```
    it('spec', function() {
        debugger; // This is like setting a breakpoint
        // ...
    }); 
    ```

3.  运行业力。
4.  转到新打开的 Chrome 浏览器，打开控制台并刷新页面。

现在，在 Chrome 的开发者工具源选项卡中，您应该会看到在调试器处停止执行。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-07-14T22:48:57.320

包括“浏览器 = ['Chrome'];” 在您的 karma.config 文件中。

Chrome 打开时，您应该会在顶部看到“Karma - 已连接”，右上角有一个“调试”按钮。

单击此调试按钮，将打开“Karma DEBUG RUNNER”选项卡。然后，只需像往常一样右键单击、检查元素并进行调试。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-11T12:33:06.970

我发现以下调试方法不需要对代码进行任何更改（例如添加“调试器”语句）

在 karma 配置文件中将“singleRun”设置为 false，这样 karma 将在调试端口上侦听，您可以在浏览器中再次运行测试，启动下面给出的 URL 并进行调试：

> 转到捕获的浏览器并单击“调试”按钮（或打开 `http://localhost:9876/debug.html`）并使用网络检查器查看发生了什么。（您可能需要刷新 debug.html 页面才能在 Web 检查器打开后启动。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:15:20.177

在您的控制台中，您应该通知哪个 it() 语句正在中断，以及原因。例如：

```
Todos Add a new todo should add a new todo FAILED
expected todo.length to be 1 but was 0 
```

但是，您可能会发现设置

```
logLevel = LOG_DEBUG; 
```

在您的 karma.conf.js 文件中。

# jsf-2 - 通过我在数据表中的代码更改 commandLink Id

> ID：15906908
> 
> 赞同：1
> 
> 时间：2013-04-09T16:02:41.870
> 
> 标签：jsf-2, datatable

我需要一种方法来管理 DataTable 中 commandlink ID 的创建，问题是当我使用它来删除记录并中断页面的呈现（通过 'ctrl+f5' 重新加载它）时，它会分配相同的 id另一个链接按钮，这会导致删除包含它的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:08:53.847

有问题的问题是合理的，但请求的解决方案不是正确的解决方案，也不容易在 JSF 中实现 - 基本上，您需要自制一个自定义命令链接渲染器，该渲染器专为在数据表中使用而设计，并且能够识别特定实体。

正确的解决方案是[在 POST 之后将重定向发送到同一视图](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

```
public String delete() {
    // ...
    return FacesContext.getCurrentInstance().getViewRoot().getViewId() + "?faces-redirect=true"; // Feel free to hardcode the view ID, though.
} 
```

*（如果您打算沿它显示一些面孔消息，[请使用闪光灯范围](https://stackoverflow.com/questions/12481506/passing-a-facesmessage-to-the-next-page/12485381#12485381)）*

然后，浏览器刷新将导致仅刷新重定向而不是 POST 操作。

另一种方法是通过 ajax 提交。

```
<h:commandLink ...>
    <f:ajax execute="@form" render="@form" />
</h:commandLink> 
```

然后，浏览器刷新只会重新执行最后一个同步请求，这将是打开相关页面的初始 GET 请求。

# java - Java：如何存储对类的所有实例的引用？

> ID：15906909
> 
> 赞同：7
> 
> 时间：2013-04-09T16:02:43.140
> 
> 标签：java, static, garbage-collection

我更习惯 C++。要获取一个类的所有实例的列表（这是一个可以由用户扩展的库类），我通常有一个静态容器，其中包含对此类对象的所有引用：

```
#include <list>
class CPPClass;

class CPPClass {
   public:
   CPPClass() {
      objList.push_back(this);
   }
   ~CPPClass() {
      objList.remove(this);
   }

   private:
   static std::list<CPPClass *> objList;
};

std::list<CPPClass *> CPPClass::objList; 
```

我应该如何在 Java 中做同样的事情？我有几个担忧：

*   有人向我提到可以有多个类加载器，这可能会导致问题
*   java中没有析构函数，那么如何从列表中删除引用？
*   如果没有删除引用，这些对象什么时候被垃圾收集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:10:54.707

首先简单的事情：多个类加载器不会给您带来问题，除非您使用非标准委托模式（使用自定义类加载器）。如果您确实有这样的非标准类加载器，您可能会遇到应用程序的不同部分使用不同版本的`CPPClass`类（每个版本来自不同的 ClassLoader）的情况。这有各种问题（你可以`ClassCastException`从`CPPClass`to获得一个转换`CPPClass`！），但它不应该影响你的静态集合；每个`CPPClass`人都会有自己的独立收藏。

下一件事：不要将对象从构造函数添加到集合中。从构造函数中泄露`this`引用可能会导致内存模型问题。相反，您应该创建一个静态工厂方法来创建对象，然后将其单独添加到静态集合中。当然，该集合也应该是线程安全的。

最后，核心问题。如果每个对象不等于任何其他对象（也就是说，如果您没有覆盖`Object.equals`），您可以使用[Wea​​kHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/WeakHashMap.html)，将对象作为键。如果该类确实 override `equals`，您可以创建[WeakReference](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)的集合，您可以在方便的时候对其进行修剪（插入时、检索列表时等）。WeakReference 不会阻止它引用的对象被 GC —— 它只会在 GC 发生后`null`返回。`get`

但如果我可以稍微编辑一下，像这样的“解决方案”通常暗示对象生命周期定义不明确，它还有其他可维护性问题。如果您的对象实现`Closeable`或对使用它们的代码有类似的方式来声明它已完成它们，那可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:09:50.933

与其存储对对象的引用，不如存储对对象的[WeakReference](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html) - 这样，如果 WeakReference 是唯一保留的引用，垃圾收集器将释放该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:07:57.120

您确实可以使列表静态，只要确保您也正确初始化它。

```
List<CPPClass> objlist;
static {
    objlist = new List<CPPClass>();
} 
```

或者类似的东西应该这样做。

如果您不删除引用，它将永远不会被垃圾收集，因为垃圾收集器将假定该对象仍在使用中。

有一些东西看起来有点像析构函数：方法`finalize`。但是因为这个方法只被垃圾回收器调用，你不能自己使用，所以对你没有用。

# ruby - Ruby !map 不改变对象类型

> ID：15906922
> 
> 赞同：0
> 
> 时间：2013-04-09T16:03:14.613
> 
> 标签：ruby

我一直在研究几个项目欧拉问题以帮助学习编程，并且想知道是否有人可以向我解释这一点。

我有一串数字，我试图找到序列中任何五个中最大的乘积。这是我到目前为止所拥有的：

```
temp = series.split(//).map!{|x| x.to_i}
len = temp.length
maxprod = 1
0.upto(len-4) do |x|
    num = (temp[x] * temp[x+1] * temp[x +2] * temp[x+3] * temp[x+4])

    if num > maxprod
        maxprod = num
    end

end 

puts maxprod 
```

temp[0].class 返回一个 fixnum，但是，当我运行代码时，出现错误“ * : nil can't be coerced into FixNum (TypeError)”

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:05:43.213

这是因为[`map`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-map)返回一个数组。[`map!`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-map-21)返回`nil`。然后，您将`nil`返回`map!`的内容放入`temp`

他们都仍然在结果的每个元素上运行块，但是当您希望将结果放入变量时，`split`您应该始终使用。`map`这是一个很容易绊倒你的微妙之处。

改变

```
temp = series.split(//).map!{|x| x.to_i} 
```

到

```
temp = series.split(//).map{|x| x.to_i} 
```

**奖金：**

您可以使用与`&`号和方法名称作为符号将块传递到`map`.

```
temp = series.split(//).map(&:to_i) 
```

**编辑：**

根据您的评论，在将数组元素相乘时，您仍然会遇到错误。这可能是因为您的`temp`数组没有您认为的那么多元素。尝试使用当前没有任何内容的索引访问数组会导致`nil`.

```
temp = [1]
temp[0] #=> 1
temp[1] #=> nil
temp[0] * temp[1] #=> TypeError: nil can't be coerced into FixNum 
```

你提到使用`temp[1].to_i`解决了这个问题。那是因为`nil`可以转换为整数。

```
nil.to_i #=> 0 
```

I would check the results of `temp` to make sure it contains what you think it contains. You might also want to look into [Enumerable#each_slice](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice) which takes a subset of an array and processes it in a block.

```
nums = %w{08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08}.map(&:to_i)
nums.each_slice(4) {|a| puts a.inject(:*)} 
```

# sql-server - 如何从存储过程启动 SQL Server 作业？

> ID：15906923
> 
> 赞同：15
> 
> 时间：2013-04-09T16:03:15.623
> 
> 标签：sql-server, stored-procedures, sql-server-job

如何创建存储过程来启动 SQL Server 作业？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T16:07:45.713

```
-- Create SQL Server Agent job start stored procedure with input parameter
CREATE PROC uspStartMyJob @MyJobName sysname
AS
DECLARE @ReturnCode tinyint -- 0 (success) or 1 (failure)
EXEC @ReturnCode=msdb.dbo.sp_start_job @job_name=@MyJobName;
RETURN (@ReturnCode)
GO 
```

或不带参数：

```
-- Create stored procedure to start SQL Server Agent job
CREATE PROC StartMyMonthlyInventoryJob
AS
EXEC msdb.dbo.sp_start_job N'Monthly Inventory Processing';
GO
-- Execute t-sql stored procedure
EXEC StartMyMonthlyInventoryJob 
```

编辑仅供参考：如果您不想启动当前正在运行的作业，您可以在启动之前使用它，在您的存储过程中工作：

```
-- Get run status of a job
-- version for SQL Server 2008 T-SQL - Running = 1 = currently executing
 -- use YOUR guid here
DECLARE @job_id uniqueidentifier = '5d00732-69E0-2937-8238-40F54CF36BB1' 
EXEC master.dbo.xp_sqlagent_enum_jobs 1, sa, @job_id 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-09T16:05:46.343

您可以在存储过程中执行*存储*`sp_start_job`过程。

 *见这里：http: [//msdn.microsoft.com/en-us/library/ms186757.aspx](http://msdn.microsoft.com/en-us/library/ms186757.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-21T15:03:26.343

创建您的存储过程并在您的 proc 中运行作业，如下所示：

```
DECLARE @JobId binary(16)
SELECT @JobId = job_id FROM msdb.dbo.sysjobs WHERE (name = 'JobName')

IF (@JobId IS NOT NULL)
BEGIN
    EXEC msdb.dbo.sp_start_job @job_id = @JobId;
END 
```*

# excel - 宏中可用的变量

> ID：15906924
> 
> 赞同：0
> 
> 时间：2013-04-09T16:03:16.000
> 
> 标签：excel, variables, vba

据我所知，识别细胞的类型是什么

Sheet#.Cells(var,position) 或 Range(A1) 是否有任何其他类型的单元格标识。

我也知道如何增加 Sheet#.Cells(var,position) 但如何使用 while 循环和任何其他模式在宏中增加 Range(A1) ？

我正在尝试根据主表中的条件选择值并逐行填充输出表。

当我使用 Sheet#.Cells(var,position) 时，当我得到不一致的数据时，它会混淆位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:43:46.523

我不确定我是否得到了你需要的东西。但是......在Excel中你可以使用这样的东西：

```
Range("E10").Offset(row_move, column_move) 
```

其中`row_move`允许在顶部/底部方向上`column_move`偏移，向左/右方向偏移。要移动上/左方向，您需要使用 <0 的值。

还有其他我个人不喜欢的选项：

```
Range("A" & row) 
```

但是正如您所看到的，在这种情况下更改行位置很容易，而更改列则更难。

# python - 基本 Python 编程，使用随机位置数组计算随机位置落在区域内的概率

> ID：15906930
> 
> 赞同：0
> 
> 时间：2013-04-09T16:03:38.640
> 
> 标签：python, python-2.7

考虑一个 100X100 阵列。

*   在这样的数组中生成一个包含数千个随机位置的数组，例如 (3,75) 和 (56, 34)。
*   计算您的一个随机位置在任何（直）边缘的 15 像素范围内的频率

（我已经完成了上面的这两部分）但我需要帮助：

1.  计算您的随机位置之一落在半径为 50 像素的圆的（任一侧）15 像素内的频率，并将结果写入屏幕，例如，阵列中平均 N% 的位置落在该区域 [N是介于 0 和 100 之间的数字] 请注意，拐角处的坐标在圆的 15 像素范围内，那么它们应该包含在其中（如果它们距离超过 15 像素，那么它们不应该包含在内）。

2.  添加代码，向用户请求您的数组中的位置，然后在该位置落在该区域时提醒他们，例如警告：您选择的位置落在圆的边缘附近。

我该怎么做呢？我已经有了使用此代码的随机位置数组：

```
from pylab import *
import math as m
from numpy import *
from random import randrange
N = 3000
coords_array = array([randrange(100) for _ in range(2 * N)]).reshape(N, 2) 
```

那么我该如何去做第（1）和（2）部分呢？我正在考虑使用布尔表达式（如果，或）来做到这一点，但我完全不确定它是否会起作用，以及它是否会如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:24:39.650

这不是作业问题，是吗？

为了处理圈子业务，我会先检查该点是否在禁区范围内。如果你的圆以 (0,0) 为中心，那么禁区是`35 <= x**2 + y**2 <= 65`

# javascript - 无法在 highcharts 上绘制数据 json 数据

> ID：15906932
> 
> 赞同：1
> 
> 时间：2013-04-09T16:03:41.350
> 
> 标签：javascript, json, highcharts

我正在尝试将 json 数据加载到高图表。我正在使用 $.getJSON 函数从数据库接收 json 数据。这是我从 DB 收到的示例 json，

我的示例 json

[ { "target":"collectd.matrix.oracle.avg_resp_time","datapoints":[[8.0, 1365158480],[null, 1365158490],[null, 1365158500],[null, 1365158510],[null, 1365158520] ,[null,1365158530],[8.0, 1365158540],[null, 1365158550],[null, 1365158560],[null, 1365158570],[null, 1365158580],[null, 1365158590]] } ]

$.getJSON("myURL", createOrderDurationChart); 在 $.getJSON 的成功响应中，我调用了下面的函数，我正在使用 scala 框架。我没有得到代码或 json 的错误。我可以通过在简单的 javascript 中嵌入代码来绘制这个 json，并直接通过 html 作为示例运行。

这是示例代码，

```
function createOrderDurationChart(durationMap){
//var target=durationMap[0].target;
//var jsonstr=durationMap[0].datapoints;
//alert(target);
//alert(jsonstr);
var orderDurationChart = new Highcharts.Chart({
chart: {
renderTo: "order_duration_div",
type: "column",
margin: [10, null, null, null],                          
//marginRight: 10,
zoomType: 'xy',
},
title: {
text: "order duration"
//y: 5  
},
xAxis: {
type: "datetime",
//tickInterval: 60*1000*10
},
yAxis: {
title: {
text: "seconds"
},
startOnTick : false,
endOnTick: false
},
series: [{
name:"avg",
data: (function (){
var data = [], i;
var jsondata = [];
jsondata= durationMap[0].datapoints;
alert(jsondata)
var datapoints=JSON.parse(jsondata);
// var jsonstr=parsejson[0].datapoints;
console.log('jsotn ' + datapoints);
// var mydata = JSON.parse(jsonstr);
// alert(mydata);
//  datapoints = mydata[0].datapoints;
//alert("initial:" + json[0].time + ':' + json[0].value);
for (i = 0; i < datapoints.length; i++) {
data.push({
x:datapoints[i][1],
y:datapoints[i][0]
});
console.log('x: ' + datapoints[i][1] + ', y: ' + datapoints[i][0]);
}
return data;
})
()}]
});
} 
```

json修复后更新代码，

```
function createOrderDurationChart(durationMap){
//var target=durationMap[0].target;
//var jsonstr=durationMap[0].datapoints;
//alert(target);
//alert(jsonstr);
var orderDurationChart = new Highcharts.Chart({
chart: {
renderTo: "order_duration_div",
type: "column",
margin: [10, null, null, null],                          
//marginRight: 10,
zoomType: 'xy',
},
title: {
text: "order duration"
//y: 5  
},
xAxis: {
type: "datetime",
//tickInterval: 60*1000*10
},
yAxis: {
title: {
text: "seconds"
},
startOnTick : false,
endOnTick: false
},
series: [{
name:"avg",
data: (function (){
var data = [], i;
var jsondata = [];
datapoints= durationMap[0].datapoints;    
console.log('jsotn ' + datapoints);      
for (i = 0; i < datapoints.length; i++) {
data.push({
x:datapoints[i][1],
y:datapoints[i][0]
});
console.log('x: ' + datapoints[i][1] + ', y: ' + datapoints[i][0]);
}
return data;
})
()}]
});
} 
```

欢迎提出任何建议。谢谢

# javascript - 使用 .find() 或选择复选框时出现 Bizzare Jquery (Mobile) 错误？

> ID：15906933
> 
> 赞同：1
> 
> 时间：2013-04-09T16:03:42.360
> 
> 标签：javascript, jquery, jquery-mobile, input, checkbox

因此，嗯，在使用 phonegap 制作手机应用程序（并使用 jsconsole.com 进行调试）时，当我尝试访问输入复选框并根据某些情况使用 JQuery“检查”它时遇到了这个奇怪的问题。然而，这个问题比这更神秘......

基本 html 就是这样（在 jqm 页面内），它从 Adnroid Emulator 运行：

```
<div data-role="controlgroup" data-type="horizontal" id="settings_bar">
    <input type="checkbox" name="isAFav" id="isAFav">
    <label for="isAFav">Favourite</label>
    <a href="#" data-role="button" data-icon="delete" data-iconpos="right" onclick="app.delete()">Delete</a>
</div> 
```

当页面加载以显示内容时，我想使用如下所示的函数调整显示的信息：

```
if(isAFav){ // <-local variable from my runtime - it's valid
    try{
        var fav = $('#settings_bar').find("#isAFav");
        fav.attr('checked', 'true');
        fav.button('refresh');
    }catch(Err){
        console.log(err.message());
    }
} 
```

它抛出的神秘错误是这样的：

> 在不能有选择的输入元素上访问 selectionEnd。

完全相同的事情发生在许多人身上：

```
$("#route_settings_bar").children('input');
$('input[name="isAFav"]'); 
```

我不知道到底出了什么问题。我正在使用最新的 Jquery +mobile（分别为 1.9.1 和 1.3.0）。

为了增加混乱，我之前将输入的表单/id 命名为“fav”，当我运行相应的代码时：

```
$('input[name="fav"]');
$("#route_settings_bar").children('input[name="fav"]'); //or this 
```

我们得到这个： ![在此处输入图像描述](https://i.stack.imgur.com/gH2gM.png)

对我来说，这看起来像 JqueryMobile 代码……%&^* 是什么？如果有人有任何提示或建议，请帮助！谢谢！

PS 我现在使用不同的 jsconsole ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:22:53.677

这是使用选中/取消选中复选框/单选按钮`.prop`并使用刷新它的正确方法`.checkboxradio('refresh')`。

```
if(isAFav){ 
 try{
  var fav = $('#settings_bar').find("#isAFav");
   fav.prop('checked', true); // here
   fav.checkboxradio('refresh'); // here
   // OR
   // fav.prop('checked', true).checkboxradio('refresh');
 }catch(Err){
   console.log(err.message());
 }
} 
```

*   **[工作演示](http://jsfiddle.net/Palestinian/3bjmJ/)**
*   **[参考](http://api.jquerymobile.com/checkboxradio/#method-refresh)**

# php - 我如何在 HTML 标签中找到 100% 确定的 JS？

> ID：15906938
> 
> 赞同：1
> 
> 时间：2013-04-09T16:03:45.697
> 
> 标签：php, javascript, html, security, xss

我需要用一些 HTML 标签保存一些数据，所以我不能`strip_tags`用于所有文本，也不能使用`htmlentities`，因为文本必须由标签修改。为了保护其他用户免受 XSS 攻击，我必须从标签内部删除所有 JavaScript。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:13:06.477

如果您需要在数据库中保存 HTML 标记，而后者又想将其打印回浏览器，则使用内置 PHP 函数没有 100% 安全的方法来实现此目的。当没有 html 标签时它很容易，当您只有文本时，您可以使用内置的 PHP 函数来清除文本。

有一些功能可以从文本中清除 XSS，但它们不是 100% 安全的，并且总有一种方法可以让 XSS 被忽视。而且您的正则表达式示例很好，但是如果我使用可以说`< script>alert('xss')</script>`，或者正则表达式可能会错过并且浏览器会执行的其他组合怎么办。

最好的方法是使用[HTML Purifier之类的东西](http://htmlpurifier.org/)

另请注意，有两个级别的安全性，第一个是当事物进入您的数据库时，第二个是当它们离开您的数据库时。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:06:25.700

我建议您使用[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)(with [`loadHTML`](http://www.php.net/manual/en/domdocument.loadhtml.php)) 加载所述 HTML，删除您不想看到的所有类型的标签和每个属性，然后保存 HTML（使用`saveXML`or `saveHTML`）。您可以通过递归迭代文档根的子项，并用它们的内部内容替换您不想要的标签来做到这一点。由于`loadHTML`加载代码的方式与浏览器类似，因此它比使用正则表达式更安全。

**编辑**这是我制作的“净化”功能：

```
<?php

function purifyNode($node, $whitelist)
{
    $children = array();
    // copy childNodes since we're going to iterate over it and modify the collection
    foreach ($node->childNodes as $child)
        $children[] = $child;

    foreach ($children as $child)
    {
        if ($child->nodeType == XML_ELEMENT_NODE)
        {
            purifyNode($child, $whitelist);
            if (!isset($whitelist[strtolower($child->nodeName)]))
            {
                while ($child->childNodes->length > 0)
                    $node->insertBefore($child->firstChild, $child);

                $node->removeChild($child);
            }
            else
            {
                $attributes = $whitelist[strtolower($child->nodeName)];
                // copy attributes since we're going to iterate over it and modify the collection
                $childAttributes = array();
                foreach ($child->attributes as $attribute)
                    $childAttributes[] = $attribute;

                foreach ($childAttributes as $attribute)
                {
                    if (!isset($attributes[$attribute->name]) || !preg_match($attributes[$attribute->name], $attribute->value))
                        $child->removeAttribute($attribute->name);
                }
            }
        }
    }
}

function purifyHTML($html, $whitelist)
{
    $doc = new DOMDocument();
    $doc->loadHTML($html);

    // make sure <html> doesn't have any attributes
    while ($doc->documentElement->hasAttributes())
        $doc->documentElement->removeAttributeNode($doc->documentElement->attributes->item(0));

    purifyNode($doc->documentElement, $whitelist);
    $html = $doc->saveHTML();
    $fragmentStart = strpos($html, '<html>') + 6; // 6 is the length of <html>
    return substr($html, $fragmentStart, -8); // 8 is the length of </html> + 1
}

?> 
```

您将`purifyHTML`使用不安全的 HTML 字符串和预定义的标签和属性白名单进行调用。白名单格式为 'tag' => array('attribute' => 'regex')。白名单中不存在的标签将被剥离，其内容内联在父标签中。白名单中给定标签不存在的属性也将被删除；白名单中存在但与正则表达式不匹配的属性也将被删除。

这是一个例子：

```
<?php

$html = <<<HTML
<p>This is a paragraph.</p>
<p onclick="alert('xss')">This is an evil paragraph.</p>
<p><a href="javascript:evil()">Evil link</a></p>
<p><script>evil()</script></p>
<p>This is an evil image: <img src="error.png" onerror="evil()"/></p>
<p>This is nice <b>bold text</b>.</p>
<p>This is a nice image: <img src="http://example.org/image.png" alt="Nice image"></p>
HTML;

// whitelist format: tag => array(attribute => regex)
$whitelist = array(
    'b' => array(),
    'i' => array(),
    'u' => array(),
    'p' => array(),
    'img' => array('src' => '@\Ahttp://.+\Z@', 'alt' => '@.*@'),
    'a' => array('href' => '@\Ahttp://.+\Z@')
);

$purified = purifyHTML($html, $whitelist);
echo $purified;

?> 
```

结果是：

```
<p>This is a paragraph.</p>
<p>This is an evil paragraph.</p>
<p><a>Evil link</a></p>
<p>evil()</p>
<p>This is an evil image: <img></p>
<p>This is nice <b>bold text</b>.</p>
<p>This is a nice image: <img src="http://example.org/image.png" alt="Nice image"></p> 
```

显然，您不想允许任何`on*`属性，我建议不要`style`因为奇怪的专有属性，例如[`behavior`](http://www.css3.com/css-behavior/). **确保使用与完整字符串**( ) 匹配的正则表达式验证所有 URL 属性`\Aregex\Z`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T16:06:58.733

如果要允许特定标签，则必须解析 HTML。

为此已经有一个不错的库：[HTML Purifier](http://htmlpurifier.org/)（LGPL 下的开源）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:31:57.303

我为此编写了此代码，您可以设置删除的标签和属性列表

```
function RemoveTagAttribute($Dom,$Name){
    $finder = new DomXPath($Dom);
    if(!is_array($Name))$Name=array($Name);
    foreach($Name as $Attribute){
        $Attribute=strtolower($Attribute);
        do{
          $tag=$finder->query("//*[@".$Attribute."]");
          //print_r($tag);
          foreach($tag as $T){
            if($T->hasAttribute($Attribute)){
               $T->removeAttribute($Attribute);
            }
          }
        }while($tag->length>0);  
    }
    return $Dom;

}
function RemoveTag($Dom,$Name){
    if(!is_array($Name))$Name=array($Name);
    foreach($Name as $tagName){
        $tagName=strtolower($tagName);
        do{
          $tag=$Dom->getElementsByTagName($tagName);
          //print_r($tag);
          foreach($tag as $T){
            //
            $T->parentNode->removeChild($T);
          }
        }while($tag->length>0);
    }
    return $Dom;

} 
```

例子：

```
 $dom= new DOMDocument; 
   $HTML = str_replace("&", "&amp;", $HTML);  // disguise &s going IN to loadXML() 
  // $dom->substituteEntities = true;  // collapse &s going OUT to transformToXML() 
   $dom->recover = TRUE;
   @$dom->loadHTML('<?xml encoding="UTF-8">' .$HTML); 
   // dirty fix
   foreach ($dom->childNodes as $item)
    if ($item->nodeType == XML_PI_NODE)
      $dom->removeChild($item); // remove hack
   $dom->encoding = 'UTF-8'; // insert proper
  $dom=RemoveTag($dom,"script");
  $dom=RemoveTagAttribute($dom,array("onmousedown","onclick"));
  echo $dom->saveHTML(); 
```

# r - R中的满秩矩阵

> ID：15906939
> 
> 赞同：0
> 
> 时间：2013-04-09T16:03:45.847
> 
> 标签：r, matrix

我有一个 401*5677 矩阵（比如 G）和一个长度为 5677 的向量（比如索引）我需要得到一个满秩（按块）矩阵 G。

我的矩阵 G 中的块由向量索引定义。例如，如果向量的前 50 个元素等于 1，则表示矩阵的前 50 列属于第 1 组，依此类推。

你知道我怎样才能得到逐块的满秩矩阵吗？这意味着，G 的 401*50“子矩阵”必须是满秩的，同样所有其余的“子矩阵”（每个对应一个组）也必须是满秩的。

我在这个问题上停留了太久！我怎样才能在 R 中做到这一点？

更具体地说，假设：

```
G=matrix(c(1,2,2,4,0,2,2,6,1,2,2,4,5,2,2,3,5,2,2,3),nrow=4) 
index=c(1,1,2,2,2) 
```

即G的前两列是group1，其余3列是第二组。我想编写一个代码来执行以下操作：

1.  找到第 1 组中的依赖列，并使 G 的“子矩阵”对应于第一组，满秩（例如，如果第 1 列和第 2 列是依赖的，则只保留其中一个）

2.  在对应于第二组的 G 矩阵部分做同样的事情。

所以，最后，最终矩阵在每个组内都是满秩的（即最终G中对应于组1的部分是满秩的，最终G对应于组2的部分也是满秩的）。

我还需要知道从 G 中删除了哪些列（如果有的话），以便从索引向量中删除相应的条目。

为了找到在原始数据中使用的算法，我正在使用的是：

```
B=matrix(c(1,2,2,4,0,2,2,6,1,2,2,4,5,2,2,3,5,2,2,3),nrow=4)
s=c(1,1,2,2,2)
unique.s<-unique(s)
k=1
n=nrow(cB)
cB<-cor(B)
for(i in 1:length(unique.s)){
  u=unique.s[i]
  l=length(which(s==u))
  for(r in 1:n){
    for(c in k:k+l-1){
      if(r<c && cB[r,c]==1){
        B[,c]=NA
        s[c]=NA
      }
   }

  }
  k=k+l

}

B.final<-B[,complete.cases(t(B))]
s.final<-s[complete.cases(s)] 
```

我尝试根据相关矩阵查找相关列（如果正确，我现在不这样做）。因此，每次处理一组 B 矩阵时，我都会尝试（没有成功）删除 B 的列，具体取决于它们是否具有等于 1 的相关性。例如，如果 cB[1,2] 为 1，那么我想删除 B[,2] 列。该过程对 B[,1:2] 应用一次，B[,1:2] 是第 1 组的 B 部分，B[,3:5] 是第 2 组的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:38:36.873

## 根据评论编辑

**唯一的修改是`Vec[1:nrow(G)]`**

很难准确说出您的要求，但我相信您正在寻找基于向量中的唯一值的矩阵子集，例如`Vec`，其中元素索引 to`Vec`是行索引`G`。

如果这就是您要查找的内容，那么您可以遍历 Vec 中的唯一值

```
 lapply(unique(Vec), function(Ind) G[which(Vec[1:nrow(G)]==Ind), ])  # which is not needed if length(Vec) == nrow(G) 
```

或者，您可以使用

```
 by(G, Vec[1:nrow(G)], function(x) as.matrix(x, ncol=ncol(G))) 
```

# asp.net-mvc - 编码的 UI 测试生成器不会在 Visual Studio 窗口中记录操作

> ID：15906940
> 
> 赞同：3
> 
> 时间：2013-04-09T16:03:47.913
> 
> 标签：asp.net-mvc, visual-studio, coded-ui-tests

我有一个 MVC Web 应用程序，我想在上面尝试编码的 ui 测试，它听起来很简单。我想说启动 Web 应用程序将是测试的一个非常重要的部分，但 Coded UI 测试生成器不会记录我在 Visual Studio 中执行的任何操作，例如按 F5 或单击运行箭头。

如果我什至无法在测试中启动它，我应该如何测试 Web 应用程序。我真的不能指望每个使用这些测试的人在实际运行测试之前启动应用程序并在窗口中打开它，这看起来很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:02:33.513

Coded UI 是关于测试你的应用程序的 UI，而不是关于测试你可以使用 Visual Studio。（我想在 Visual Studio 中有某种方法可以使用 Coded UI 来测试 Visual Studio 的 UI，但这听起来很复杂。）首先，您使用 Coded UI 来创建应用程序的测试。因此，启动 Coded UI 记录和生成工具。接下来从 Windows**开始**按钮或桌面启动您的应用程序。您应该看到 Coded UI 记录了启动应用程序的步骤。然后记录测试所需的任何其他步骤。完成测试记录后，您应该能够运行测试。

要了解使用 Coded UI 进行测试，我建议您首先尝试使用 Windows Calculator 或 Windows Notepad 创建一些简单的测试。网络上有几个例子和教程，包括视频。参见例如[http://www.youtube.com/watch?v=oEOkMaacx2Q](http://www.youtube.com/watch?v=oEOkMaacx2Q)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T17:50:55.427

I have just come across this because I am looking at the same thing. I am coming from webdriver, and want to try Coded Ui on an MVC app.

My issue is that the coded ui simply needs to start a browser and navigate to a page. That's fine in an environment where the application has been deployed, but at development time it is difficult because you are using IIS Express that starts and stops as you debug the app. In the past I have found ways to automatically start and stop IIS Express and publish my web app during a debug build of my test project. It worked for web driver, I see no reason it will not for coded UI. Take a look at my blog post on the subject. I am about to look at it my self, so may well post another article if I get it working.

[http://www.radicalgeek.co.uk/Post/12/starting-up-iis-express-for-a-specflow-and-selenium-webdriver-test-run](http://www.radicalgeek.co.uk/Post/12/starting-up-iis-express-for-a-specflow-and-selenium-webdriver-test-run)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T03:27:45.710

您能否创建一个批处理文件，该文件首先运行您需要的任何内容，然后是编码的 UI。您可以使用 Windows 任务或自动化脚本自动执行此操作。

# highcharts - 是否可以在运行时将导航器隐藏在 highcharts 中？

> ID：15906941
> 
> 赞同：5
> 
> 时间：2013-04-09T16:03:52.627
> 
> 标签：highcharts, highstock

我正在开发一个 highcharts 项目，我们需要在运行时显示/隐藏导航器，具体取决于屏幕过滤器的值。

我们已经添加/显示/隐藏了各种数据系列 - 但我找不到允许我在运行时动态隐藏导航器的 api 调用？有谁知道这样做的方法 - 我不愿意重新加载整个图表，除非我必须这样做。

谢谢各位！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T09:28:40.837

您可以通过 hide() 函数隐藏所有特定的 SVG 导航器元素。

[http://jsfiddle.net/dJbZT/1](http://jsfiddle.net/dJbZT/1)

```
$('#btn').toggle(function () {
            chart.scroller.xAxis.labelGroup.hide();
            chart.scroller.xAxis.gridGroup.hide();
            chart.scroller.series.hide();
            chart.scroller.scrollbar.hide();
            chart.scroller.scrollbarGroup.hide();
            chart.scroller.navigatorGroup.hide();
            $.each(chart.scroller.elementsToDestroy, function (i, elem) {
                elem.hide();
            })
        }, function () {
            chart.scroller.xAxis.labelGroup.show();
            chart.scroller.xAxis.gridGroup.show();
            chart.scroller.series.show();
            chart.scroller.navigatorGroup.show();
            chart.scroller.scrollbar.show();
            chart.scroller.scrollbarGroup.show();
            $.each(chart.scroller.elementsToDestroy, function (i, elem) {
                elem.show();
            })
        }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-28T12:25:32.883

塞巴斯蒂安的答案*几乎*就在那里，但它实际上并没有调整图表本身的大小，我认为在这种情况下这是一个要求，因为否则导航器的空间将被完全浪费（更不用说大空白看起来很奇怪）。

这是一个更简单的解决方案：**添加一个“剪辑” div `overflow: hidden`，然后将图表容器的高度增加到足以将导航器推出，使其隐藏**。

### 演示

[http://jsfiddle.net/vickychijwani/z4kgsfnp/](http://jsfiddle.net/vickychijwani/z4kgsfnp/)

```
$(function () {

    var delta = 0;

    $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function (data) {
        // Create the chart
        var chart = $('#container').highcharts('StockChart', {

            chart: {
                events: {
                    load: function () {
                        // this is always constant after the chart is loaded
                        delta = this.scroller.navigatorGroup.getBBox().height + 30;
                    }
                }
            },

            rangeSelector: {
                selected: 1
            },

            title: {
                text: 'AAPL Stock Price'
            },

            series: [{
                name: 'AAPL',
                data: data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        }, function (chart) {
            $('#show-hide-nav-btn').click(function () {
                // to hide the navigator, increase chart height; the excess will be clipped by the outer clip div because its CSS is set to overflow: hidden
                var chartHeight = $('.highcharts-container').height();
                $('#container').height(chartHeight + delta);
                $('.highcharts-container').height(chartHeight + delta);

                // manually reflow
                chart.reflow();

                // negate delta for the next click
                delta = -delta;
            });

        });
    });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://code.highcharts.com/stock/highstock.js"></script>

<button id="show-hide-nav-btn">Show / hide navigator</button>

<!-- this div clips the container so the navigator can be hidden from view -->
<div id="clip" style="height: 500px; overflow: hidden;">
    <div id="container" style="height: 500px; min-width: 500px"></div>
</div>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-01T21:37:39.347

似乎这是更新 navigator.enabled 选项的最简单方法：

```
chart.update({navigator: { enabled: false }}) 
```

# jquery - 如何在顶部、底部和两侧（水平和垂直）有标签

> ID：15906942
> 
> 赞同：1
> 
> 时间：2013-04-09T16:03:55.773
> 
> 标签：jquery, html, css, jquery-ui-tabs

我正在尝试使用 jQuery 选项卡（请参阅[tabs](http://jqueryui.com/tabs/#default)）并创建一个带有选项卡的框，包括顶部、底部和两侧。我尝试使用 jQuery 选项卡玩了大约 3 个小时，但我无法弄清楚。

[这](http://postimg.org/image/dwtgqijvh/)是我要创建的选项卡式框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:47:05.020

为什么要使用选项卡，为什么不将它们放在列表中，根据需要设置 ul 和 li 元素的样式，就像在图像中一样，并且只需使用通用切换来显示内容，使用 li 和内容的匹配 id。例如：

```
<ul class="food_thumbs">
<li data-food="apple">apple image</li>
<li data-food="orange">orange image</li>
<li data-food="pear">pear image</li>
</ul>

<ul class="food_content">
<li data-food="apple">apple text</li>
<li data-food="orange">orange text</li>
<li data-food="pear">pear text</li>
</ul> 
```

或类似的东西

# objective-c - Xcode 中的简单 IF 语句

> ID：15906947
> 
> 赞同：-3
> 
> 时间：2013-04-09T16:04:03.453
> 
> 标签：objective-c, if-statement, uilabel, uitextview

我正在使用 ZBar 阅读器 SDK

。H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
// ADD: delegate protocol
< ZBarReaderDelegate >
{
UIImageView *resultImage;
UITextView *resultText;
UILabel *text;
}
@property (nonatomic, retain) IBOutlet UIImageView *resultImage;
@property (nonatomic, retain) IBOutlet UITextView *resultText;
@property (nonatomic, retain) IBOutlet UILabel *text;
- (IBAction) scanButtonTapped;

@end

UITextView *resultText;
IBOutlet UILabel *text; 
```

.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize resultImage, resultText, text;

- (IBAction) scanButtonTapped
{
// ADD: present a barcode reader that scans from the camera feed
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
reader.supportedOrientationsMask = ZBarOrientationMaskAll;

ZBarImageScanner *scanner = reader.scanner;
// TODO: (optional) additional reader configuration here

// EXAMPLE: disable rarely used I2/5 to improve performance
[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];

// present and release the controller
[self presentModalViewController: reader
                        animated: YES];

}

- (void) imagePickerController: (UIImagePickerController*) reader
didFinishPickingMediaWithInfo: (NSDictionary*) info
{
// ADD: get the decode results
id<NSFastEnumeration> results =
[info objectForKey: ZBarReaderControllerResults];
ZBarSymbol *symbol = nil;
for(symbol in results)
    // EXAMPLE: just grab the first barcode
    break;

// EXAMPLE: do something useful with the resulting data
resultText.text = symbol.data;

//Below are the IF Statements...
if ((symbol = @"3307210410801")) {
    text.text = @"FarCry 2";
}
else if ((symbol = @"530917119347")) {
    text.text = @"Call of Duty: Black Ops 2";
}
else if ((symbol = @"5021290053694")) {
    text.text = @"Hitman Absolution";
}
else if ((symbol = @"5026555401739")) {
    text.text = @"Red Dead Redemption";
}

// EXAMPLE: do something useful with the barcode image
resultImage.image =
[info objectForKey: UIImagePickerControllerOriginalImage];

// ADD: dismiss the controller (NB dismiss from the *reader*!)
[reader dismissModalViewControllerAnimated: YES];
}

- (void) dealloc
{
self.resultImage = nil;
self.resultText = nil;
self.text = nil;

}

- (BOOL) shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation) interfaceOrientation
{
return(YES);
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

它的工作原理是，当我的模拟器上的 resultText 显示为 5021290053694 时，“text”显示“Pingu”

我的问题是当出现下一个数字时 Pingu 不会消失，所以当 5026555401739 显示时，“文本”应该显示“死者肖恩”。相反，它仍然是 Pingu。

换句话说，它不会释放首先显示的“文本”。第一个将留在那里，直到我关闭应用程序并重新打开。

希望这很容易理解。:)

先感谢您。

*   缺口

编辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:07:58.473

你不应该像那样直接比较字符串。它将比较引用而不是值。`[symbol isEqualToString:@"3307210410801"]`改为使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:11:39.730

您正在使用`=`which 是一个赋值运算符。

And`==`是一个比较运算符。

但是，要比较您需要的两个对象`isEqualTo:`，如果是字符串，您应该这样做`isEqualToString:`

你的代码应该是：

```
if ([symbol isEqualToString:@"3307210410801"]) {
    text.text = @"LOTR";
}
else if ([symbol isEqualToString: @"530917119347"]) {
    text.text = @"James Bond";
}
else if ([symbol isEqualToString: @"5021290053694"]) {
    text.text = @"Pingu";
}
else if ([symbol isEqualToString: @"5026555401739"]) {
    text.text = @"Shaun of the Dead";
} 
```

# android - 如何从 HTML STRING CONTENT 中获取文本内容并通过各种方式分享？

> ID：15906950
> 
> 赞同：1
> 
> 时间：2013-04-09T16:04:11.643
> 
> 标签：android, html, xml

我在应用程序中使用 HTML STRING CONTENT 作为 WEBVIEW。HTML STRING CONTENT 的代码写成：

```
text = "<html><body>" +
 "<p align=\"justify\">"+ 
getString(R.string.hadesc1)+
"</p>"+<p align=\"justify\">"+
getString(R.string.hadesc2)+"</p>"+
"<p align=\"justify\"><b>"+
getString(R.string.hadesc3)</b>/p>"+
"<p align=\"justify\">"+
getString(R.string.hadesc4)+
"</p>"+"<p align=\"justify\"><b>"
+getString(R.string.hadesc5)+
"</b></p><dl>"+"<dt align=\"justify\"><b><u>"
+getString(R.string.hadesc7)+"</u></b></dt>"+
 "<dd align=\"justify\">"+
 getString(R.string.hadesc8)+"</dd>" 
```

我正在使用它

```
mWebView.loadData(text, "text/html; charset=UTF-8", null);` 
```

但是，我只想分享上述数据中的文本。所以，我编写了这样的代码，

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.setType("text/plain");                
sendIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(text));
startActivity(Intent.createChooser(sendIntent, "Share Via:")); 
```

但是，它只共享电子邮件。我需要通过蓝牙、Facebook、邮件和消息分享。所以，请帮助我需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:45:51.643

好的，我已经与您的代码一起尝试`HTML`了`String`...

似乎`String` `text`无法转换为`HTML`，因此转换“静默”失败，并在 LogCat 中显示警告：

```
04-16 23:44:40.527: W/Bundle(1983): Key android.intent.extra.TEXT expected String but value was a android.text.SpannableString.  The default value <null> was returned.
04-16 23:44:40.527: W/Bundle(1983): Attempt to cast generated internal exception:
04-16 23:44:40.527: W/Bundle(1983): java.lang.ClassCastException: android.text.SpannableString cannot be cast to java.lang.String 
```

该方法`Html.fromHtml(text)`返回 a `SpannableString`，而 this 又不能放在`ShareIntent`.

因此，如果您明确调用`toString()`返回的`Spannable`，它将起作用。

所以这条线应该是这样的：

```
sendIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(text).toString()); 
```

附带说明：您`HTML`的无效，因此它可能根本不会返回任何有用的东西，但现在无论如何都可以发送它。

# google-maps - 是否可以禁用 gMap 默认标记？

> ID：15906953
> 
> 赞同：0
> 
> 时间：2013-04-09T16:04:21.777
> 
> 标签：google-maps, google-maps-api-3

是否可以禁用谷歌地图上的默认标记？

我已经检查了 gmap3.net，这是我用于创建地图的库以及 gMap API 文档站点，但我似乎找不到任何禁用此功能的参考...

如果您看到下面的图像，在任何地图上都有代表地方的小图标，例如公园、学校、商场等……有没有办法阻止这些图标出现？

![我想禁用](https://i.stack.imgur.com/0swP7.png)

# php - php curl不提交表单

> ID：15906955
> 
> 赞同：0
> 
> 时间：2013-04-09T16:04:27.550
> 
> 标签：php

我想制作一个使用 curl 提交表单的 php 脚本。我已经看到了有关此的其他问题，并尝试了其他答案，但我得到了相同的结果

我有一个简单的表单来回显提交的值

```
<form action="form.php" method="GET">
<input type="text" name="name"/>
<input type="submit">
</form>

<?PHP
if (! empty($_GET['name'])){
   echo 'Hello, ' . $_GET['name'];
}
?> 
```

这是卷曲脚本

```
$ch = curl_init();

  curl_setopt($ch, CURLOPT_URL, "http://www.mydom.com/form.php"); 
  curl_setopt($ch, CURLOPT_POST, true);
  curl_setopt($ch, CURLOPT_POSTFIELDS, array(
  'name' => 'Aname',
  'submit' => 'submit'
  ));
  curl_setopt($ch, CURLOPT_HEADER, false);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

  $result = curl_exec($ch);
  echo "$result"; 
```

回显的结果只是没有“你好和提交值”的表单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:06:41.287

这不是因为这条线吗

```
if (! empty($_GET['name'])){
   echo 'Hello, ' . $_GET['name'];
} 
```

您正在向页面发送 POST 请求，但您正在寻找 GET 数据。

编辑被打败了答案>.<

# javascript - 设置 jquery ajax 方法的数据属性以包含具有数组属性的 javascript 对象

> ID：15906957
> 
> 赞同：0
> 
> 时间：2013-04-09T16:04:36.927
> 
> 标签：javascript, json, jquery

我在设置 jquery ajax 方法的 data 属性以包含一个 javascript 对象时遇到问题，该对象具有一个名为 EngineSpecs 的属性。

我想出了这样的东西来测试，但它不起作用：

```
var myObject = new Object();
myObject.EngineSpecs = {};

var data = {
       myObject.EngineSpecs : [{
            EngineID: 100010017,
            Displacement: 7.2,
            Gas: false
            }, {
            EngineID: 300200223,
            Displacement:  3.2,
            Gas: true
       }]
};

$.ajax({
        url: someurl,
        dataType: "json",
        data: myObject 
```

我不断收到如下错误：

Message":"发生错误。","ExceptionMessage":"无法反序列化当前 JSON 对象

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:08:17.973

您正在尝试将其`myObject.EngineSpecs`用作对象属性名称，这是不允许的（因为中间有 .）。改为这样做：

```
var data = {
       myObject: {
            EngineSpecs : [{
              EngineID: 100010017,
              Displacement: 7.2,
              Gas: false
            }, {
              EngineID: 300200223,
              Displacement:  3.2,
              Gas: true
            }]
       }
}; 
```

或者你真正想要的是：

```
 var myObject = {
        EngineSpecs : [{
          EngineID: 100010017,
          Displacement: 7.2,
          Gas: false
        }, {
          EngineID: 300200223,
          Displacement:  3.2,
          Gas: true
        }]
   }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:57:42.143

您的代码有几个问题似乎源于对 js 对象和对象属性缺乏理解。了解这些将在以后为您节省数小时的头痛。

我想指出的第一件事（次要的）是混合您的对象声明。

```
var myObject = new Object();
// is the equivalent of:
var myObject = {}; 
```

与数组类似：

```
var myArray = new Array();
//is the equivalent of:
var myArray = []; 
```

您选择使用哪种模式并不重要（js 社区更喜欢 [] 和 {}），但请确保您与您的方法保持一致。

其次，将对象视为关联数组，即键-> 值对列表。这些键称为对象属性。所以所有对象都应该遵循以下模式：

```
// Note: each object property declaration is comma separated.
var myObject = {
  propertyString: 'this is a string',
  propertyAnotherString: 'this is another string',
  propertyMixedArray: ['item 1', 'item 2', 1, 2, {}],
  // Note above, we have different data types in the array:
  // two strings, two ints and one empty object.
  // This is completely legal in javascript.
  propertyObject: { someProperty: 'and so on...' }
};

// Adding additional properties is OK too.
// Note: this time we use '=' instead of ':' to assign value
myObject.additionalProperty = 'Additional property';

// prints 'this is a string'
console.log(myObject.propertyString);

// also prints 'this is a string'
// I'm treating object as an associative array or hashtable
console.log(myObject['propertyString']);

// also prints 'this is a string'
// we can use variables as well to dynamically access keys.
var keyFromVariable = 'propertyString';
console.log(myObject[keyFromVariable]);

// Couple of other examples.
console.log(myObject.propertyMixedArray[1]); // prints 'item 2'
console.log(myObject.propertyObject.someProperty); // prints 'and so on...'
console.log(myObject.additionalProperty); // prints 'Additional property' 
```

起初这可能会让人不知所措，但随着时间的推移你会习惯它。然而，在编写 javascript 代码时始终将上述想法牢记于心是很重要的。现在我们对对象有了更多的了解，我们可以通过以下方式重写您的代码：

```
var myObject = {
  EngineSpecs: [{
      EngineID: 100010017,
      Displacement: 7.2,
      Gas: false
      }, {
      EngineID: 300200223,
      Displacement:  3.2,
      Gas: true
  }]
};

$.ajax({
  url: 'http://www.someurlhere.com/api.json',
  dataType: "json",
  data: myObject
}); 
```

我希望这有帮助。

# gwt - GWT - 复制和粘贴 ZeroClipboard

> ID：15906961
> 
> 赞同：1
> 
> 时间：2013-04-09T16:04:39.130
> 
> 标签：gwt, clipboard, copy-paste, zeroclipboard

我读[了这个问题](https://stackoverflow.com/questions/1317052/how-to-copy-to-clipboard-with-gwt)。我需要在我的 gwt Web 应用程序中做一个剪贴板系统。

ZeroClipboard 不再在 GoogleCode 上，我已经从 GitHub 下载了它，但是这个指南不起作用。任何人都可以帮助我吗？

这是我的情况：

Home.html（在同一个目录中，我有 ZeroClipboard.js 和 ZeroClipboard.swf）

```
<script type="text/javascript" src="ZeroClipboard.js"></script> 
```

我的页面.java

```
 -
   -
   -
    final Anchor copy = new Anchor("Copy");
    copy.getElement().setId("copyId");
    glueCopy("Hello World");
    add(copy);

  }

 public static native void glueCopy(String text) /*-{
  var clip = new $wnd.ZeroClipboard.Client();
  clip.setText(text);
  clip.glue('copyId');
}-*/; 
```

当我单击锚点时没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:36:47.943

我已经解决了我自己的问题。Flash 安全策略不允许从 localhost 执行。

# c - 反转任何数组的函数 - C

> ID：15906965
> 
> 赞同：0
> 
> 时间：2013-04-09T16:04:51.887
> 
> 标签：c, arrays, pointers

我写了一个反转任何数组的代码，它的意思是从头到尾，但它不适用于 char 的类型。我将如何编写一个恢复任何数组（int、float、char）的代码？例如原始数组为：1,2,3,4,5,6,7,8,9,10 运行后数组为：10,9,8,7,6,5,4,3 ,2,1

我的代码：

```
#include <stdio.h>

#define SIZE 10

void reverseArr ( void *arr, unsigned size);

void main ()
{

    char a[SIZE] = {'a','b','c','d','e', 'f', 'g', 'h', 'i', 'j'};

    reverseArr (a, SIZE);

}

void reverseArr ( void *arr, unsigned size)
{
    int *start, *end, temp;

    start=(int*)arr;
    end=(int*)arr+9;

    while (start<end)
    {
        temp=*start;
        *start=*end;
        *end=temp;
        start++;
        end--;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:06:49.480

您将`void`指针转换为`int`指针。

可能在您的平台上`sizeof(char) < sizeof(int)`。因此，您不会逐个字符地遍历数组。

如果不传递元素的大小，就无法编写这样的通用函数。

```
void reverseArr ( void *arr, unsigned len_array, unsigned size_element)
{
  char* start = (char*) arr;

  ....
  start += size_element;
  ....
} 
```

因为`sizeof(char) == 1`按照设计，您可以使用指向`char`. 只需按照 . 的指示移动正确数量的字符`sizeof(type)`。

```
reverseArr (a, SIZE, sizeof(a[0])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:08:43.830

关键是你需要知道这个数组包含什么类型的元素。前进指针的操作符做了一定的假设——下一个元素位于内存`sizeof(type)`字节中。

如果您想编写通用版本，您应该传递 sizeof 元素并进行适当的指针算术。

# c# - 带别名的 Linq

> ID：15906967
> 
> 赞同：22
> 
> 时间：2013-04-09T16:05:01.570
> 
> 标签：c#, linq, alias

我在 c# 中有以下行：

```
var name = (from x in db.authors
                    where fullName == "Jean Paul Olvera"
                    orderby x.surname
                    select new { x.id_author, fullName= String.Concat(x.name," ", x.surname) }); 
```

我的问题是我想在 where 子句中使用别名，但我不能，'fullName' 显示为未声明。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-09T16:07:16.300

您可以使用`let`创建中间值：

```
var name = (from x in db.authors
            let fullName = x.name + " " + x.surname
            where fullName == "Jean Paul Olvera"
            orderby x.surname
            select new { x.id_author, fullName }); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-09T16:07:30.077

您需要更早地放置投影的那一部分，这很容易使用[`let`子句](http://msdn.microsoft.com/en-us/library/bb383976.aspx)：

```
var name = from x in db.authors
           let fullName = x.name + " " + x.surname
           where fullName == "Jean Paul Olvera"
           orderby x.surname
           select new { x.id_author, fullName }; 
```

请注意，`x.name + " " + x.surname`它将被编译为与 相同的代码`String.Concat(x.name, " ", x.surname)`，但对大多数人来说更具可读性。另请注意，由于您没有在`()`括号之外做任何事情，因此不需要它们。

我*希望*任何优秀的 SQL LINQ 提供程序都应该将此查询转换为明智且高效的 SQL 查询，但您应该自己验证这一点。另一方面，我*通常*建议优先查询单个字段，例如

```
where x.name == "Jean Paul" && x.surname == "Olvera" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-09T16:06:53.873

你还没有创建它。

话虽如此，由于您事先知道名称，因此您应该能够对零件执行查询：

```
var name = from x in db.authors
                where name == "Jean Paul" && surname == "Olvera"
                orderby x.surname
                select new { x.id_author, fullName= String.Concat(x.name," ", x.surname) }; 
```

否则，您可以使用它`let`来执行此操作：

```
var name = from x in db.authors
           let fullName = String.Concat(x.name," ", x.surname)
           where fullName == "Jean Paul Olvera"
           orderby x.surname
           select new { x.id_author, fullName=fullName ) }; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-09T16:08:24.973

方法语法更容易，因为您不受操作顺序的限制：

```
var query = authors.OrderBy(x => x.surname)
    .Select(x => new
    {
        x.id_author,
        fullName = String.Concat(x.name, " ", x.surname)
    })
    .Where(x => x.fullName == "Jean Paul Olvera"); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-08T13:06:19.217

```
linq1DataContext ll = new linq1DataContext();
            if (comboBox1.SelectedIndex == 0)
            {

                var q = from m in ll.personals                            

                        let کد= m.id
                        let نام = m.name

                        select new { 
                                     کد,
                                     نام,
                        };
                dataGridView1.DataSource = q;
            } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-09T16:07:39.593

使用`let`子句：

```
var name = (from x in db.authors
                let fullName = String.Concat(x.name," ", x.surname)
                where fullname = "Jean Paul Olvera"
                orderby x.surname
                select new { x.id_author, fullName }); 
```

# javascript - AngularJS $scope 应该只用于视图需要访问的变量吗？

> ID：15906973
> 
> 赞同：1
> 
> 时间：2013-04-09T16:05:25.600
> 
> 标签：javascript, angularjs

或者换一种方式问，将控制器中需要的所有变量存储在 $scope 中是不好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:59:24.540

在处理控制器数据时，我会在大多数情况下使用以下经验法则：

*   对需要暴露给视图层的数据使用 $scope 变量。
*   使用服务在控制器之间共享数据。
*   对其他所有内容使用私有控制器变量。

# python - 我应该如何在 Flask 中正确使用 CouchDBs 视图

> ID：15906980
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:05:48.430
> 
> 标签：python, flask, couchdb, couchdb-python

我正在使用 Flask 和 CouchDB。我已将文件文档映射到文件对象。

```
class File(Document):
   name = TextField()
   conten = TextField() 
```

在我的 Flask Blueprint 中，我想返回所有文件。我怎么做。我知道我必须编写如下视图：

```
function(doc) {
   if(doc.type == 'file') {
      emit(doc_id, doc)
   }
} 
```

但是我要把这段代码放在哪里呢？在我的`File`对象中？我是否必须将此视图定义添加到`CouchDBManager`？还是应该使用[查询](http://pythonhosted.org/Flask-CouchDB/#flaskext.couchdb.Document.query)功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:18:24.700

请勿使用查询功能，该功能仅用于*临时视图*，即不用于生产用途。相反，您应该创建一个 ViewDefinition 类的对象并将该对象传递给 CouchDBManager.add_viewdef 方法。这在[http://pythonhosted.org/Flask-CouchDB/#writing-views](http://pythonhosted.org/Flask-CouchDB/#writing-views)上有更详细的描述。

或者，您可以直接使用 CouchDB http 接口上传设计文档。由于您只需创建一次视图，这仍然是可行的。实际上，您将打开被褥`http://localhost:5984/_utils`并使用数据库中的视图创建一个设计文档。有关[http://guide.couchdb.org/draft/design.html](http://guide.couchdb.org/draft/design.html)的更多信息。

# prolog - Prolog中非谓词的声明式解释的一些问题

> ID：15906983
> 
> 赞同：1
> 
> 时间：2013-04-09T16:05:56.417
> 
> 标签：prolog

我认为我认为我对Prolog 中非谓词的声明性观点**有些混淆。**

我有我可以通过这种方式简单地实现**非**谓词：

```
not(P) :- P, !, fail;
          true. 
```

其中 P 它是一个谓词，如果 P 它是 TRUE，则 P 是 FALSE，如果 P 它是 false，则 P 是 TRUE。

阅读 Bratko 的书，我可以阅读：

> **如果 Goal 成功，则 not(Goal) 失败，否则 not(Goal) 成功**

好吧，也许我在试图解释这个代码片段时遇到了很多问题，但似乎我认为这超出了声明性范式和逻辑，并进入了某种程序范式

在我看来，这是**if{} else{}**的一种形式，由 cut 和 fail 谓词谓词实现......我是这样读的：

**P 是一个布尔谓词，只能是：TRUE 或 FALSE**

如果 P 为 TRUE，则强制失败（因此 not(P) 为 FALSE）并避免回溯以没有其他响应。

ELSE P 是 FALSE 而不是 P 是 TRUE。

我不知道我的解释是否错误，我是否在推理中遗漏了什么，或者我是否对愚蠢的问题做了很多问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:13:34.993

对于@hardmath 所说的（+1），我没有太多要补充的东西，但我需要更多的话才能说出来，所以这不是评论。

首先，您会看到程序性和声明性之间的硬性二分法，但是还有其他看待事物的方式，而且很多事情都处于中间位置。`\+`是其中之一，因为它具有主要的声明性阅读，但声明性阅读不足的地方与它在机器上执行有关。但是所有的 Prolog 都是在一台机器上执行的，这并不意味着你永远无法进行声明式思考。这不是一个全有或全无的命题。所谓的外逻辑或元谓词`setof/3`等。人。为您提供的结果严格来说不是一阶逻辑，但这并不意味着它们是程序性的，甚至不一定是它们以明显的程序性方式实现的。简而言之：*在宇宙中，除了“程序性”和“声明性”之外，还有更多的东西，而且它并不总是一成不变的*。

其次，您坚持将条件逻辑理解为本质上是程序性的。我认为这是对低级细节的关注。是的，您可以编写带有很多红色剪辑的 Prolog，并且只承认程序性阅读，但只需使用 if/then 逻辑就不需要这样做，也不是从一个到另一个的滑坡。你似乎执着于将“如果 X 则 Y 否则 Z”解读为“首先，你做 X，然后如果成功你做 Y，或者如果失败，然后做 Z”。但是您不必按程序阅读它，实际上您可能不应该这样做。即使对条件进行排序会影响性能，有时还会影响正确性，但您不需要让它为您抹去声明性阅读。毕竟，在任何语言中，这在某种程度上都是正确的，由于停机问题以及我们在机器上执行程序的事实。如果即使在 Prolog 中我们也让它毒化了我们的理解，我们将永远无法摆脱它或实现声明式编程的好处。简而言之：*if/then/else 不需要被理解为本质上是程序性*的。

所以总结一下：放松。:)

# php - 获取上传的文件

> ID：15906985
> 
> 赞同：1
> 
> 时间：2013-04-09T16:06:09.830
> 
> 标签：php, fine-uploader

我想实现删除功能，删除当前上传的文件。

如何获取当前上传的文件？

这是我的 javascript 中的内容：

```
$('.deleteButton').click(function (){ 
             $imagefile = '../uploads/cv.jpg';
            //Make ajax call
            $.ajax({
             type: "POST",
              data:{
                        action: 'deleteButton',
                        imagefile: $imagefile,
                    },
                    url: "php/deleteImage.php"
            });

        }); 
```

我的 PHP 文件：

```
 <?php
        if($_POST["action"]=="deleteButton") {
                 $imagefile = $_REQUEST['imagefile'];
          unlink($imagefile);
    }
  ?> 
```

现在，我不想为 $imagefile 设置静态值，而是要获取上传的文件。

# haskell - 为什么导入列表在 GHC 中不起作用？

> ID：15906987
> 
> 赞同：4
> 
> 时间：2013-04-09T16:06:15.040
> 
> 标签：haskell

以下无法编译：

```
module Main where
  import Text.JSON (JSObject, JSValue)

  main = print "hello world"
  getObject :: JSValue -> JSObject JSValue
  getObject (JSObject x) = x 
```

给出错误：

```
Not in scope: data constructor `JSObject' 
```

但是删除导入列表可以使其编译成功（即使`JSObject`上面已导入）

```
module Main where
  import Text.JSON

  main = print "hello world"
  getObject :: JSValue -> JSObject JSValue
  getObject (JSObject x) = x 
```

为什么 GHC (7.4.2) 忽略我的导入`JSObject`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T16:12:05.640

如果您`import Text.JSON (JSObject)`只编写导入类型，而不是它具有的构造函数。要导入构造函数，请执行`import Text.JSON (JSObject(..))`或代替`..`指定您希望使用的构造函数名称的逗号分隔列表，例如`Text.JSON(JSObject(Cons1, Cons2))`

# trigger.io - 如何使用 Trigger.io 缓存 json 数据？

> ID：15906989
> 
> 赞同：2
> 
> 时间：2013-04-09T16:06:23.853
> 
> 标签：trigger.io

我知道如何缓存它，但我以后如何检索它。文档（[http://docs.trigger.io/en/v1.4/features/cache.html](http://docs.trigger.io/en/v1.4/features/cache.html)）仅提供了一个使用图像的示例，检索您所需要做的就是获取 url。

```
var showCachedLogo = function (file) {
  forge.file.URL(file, function (url) {
    var logo = document.createElement('img');
    logo.src = url;
    document.body.appendChild(logo);
  });
} 
```

除了 json 数据，我将如何做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:38:28.290

您可以使用`forge.file.string`以字符串形式获取已保存文件的内容。您应该能够`JSON.parse`从中解析 JSON 数据。

见[http://docs.trigger.io/en/v1.4/modules/file.html#string](http://docs.trigger.io/en/v1.4/modules/file.html#string)

例如

```
var getJsonData = function (file) {
    forge.file.string(file, function (data) {
        var parsed = JSON.parse(data);
        forge.logging.log(parsed);
    });
} 
```

# objective-c - sizeof() 为包含 GLKVector3、GLKVector4 变量的结构返回错误的大小

> ID：15906996
> 
> 赞同：2
> 
> 时间：2013-04-09T16:06:45.963
> 
> 标签：objective-c, glkit

我不明白它的行为。我认为这是错误的。包含 GLKVectors 的结构会导致问题。这是一个简单的代码。你认为这是一个合适的结果吗？

```
// Test.h
#import <GLKit/GLKit.h>

typedef struct
{
    GLKVector2 v1;
    float f1;
} V2F1;

typedef struct
{
    GLKVector2 v1;
    GLKVector2 v2;
} V2V2;

typedef struct
{
    GLKVector3 v1;
    GLfloat f1;
} V3F1;

typedef struct
{
    GLKVector3 v1;
    GLKVector2 v2;
} V3V2;

typedef struct
{
    GLKVector3 v1;
    GLKVector3 v2;
} V3V3;

typedef struct
{
    GLKVector3 v1;
    GLKVector4 v2;
} V3V4;

typedef struct
{
    GLKVector4 v1;
    GLfloat f1;
} V4F1;

typedef struct
{
    GLKVector4 v1;
    GLKVector2 v2;
} V4V2;

typedef struct
{
    GLKVector4 v1;
    GLKVector3 v2;
} V4V3;

typedef struct
{
    GLKVector4 v1;
    GLKVector4 v2;
} V4V4;

typedef struct
{
    GLKVector4 v1;
    float f1; float f2;
} V4F2;

typedef struct
{
    GLKVector4 v1;
    float f1; float f2; float f3;
} V4F3;

typedef struct
{
    GLKVector4 v1;
    float f1; float f2; float f3; float f4;
} V4F4;

typedef struct
{
    GLKVector4 v1;
    float f1; float f2; float f3; float f4; float f5;
} V4F5;

typedef struct
{
    GLKVector4 v1;
    float f1; float f2; float f3; float f4; float f5; float f6;
} V4F6;

typedef struct
{
    GLKVector4 v1;
    float f1; float f2; float f3; float f4; float f5; float f6; float f7;
} V4F7;

typedef struct
{
    GLKVector4 v1;
    float f1; float f2; float f3; float f4; float f5; float f6; float f7; float f8;
} V4F8;

@interface Test : NSObject
@end

// Test.m
#include "Test.h"
@implementation Test
+ (void)doTest
{
#define ConfirmSize(s_) size == s_ ? @"" : [NSString stringWithFormat:@" (!%d)", s_]
    int size = 0;
    NSLog(@"Size of V2F1 = %d%@", size = sizeof(V2F1), ConfirmSize(12));
    NSLog(@"Size of V2V2 = %d%@", size = sizeof(V2V2), ConfirmSize(16));
    NSLog(@"Size of V3F1 = %d%@", size = sizeof(V3F1), ConfirmSize(16));
    NSLog(@"Size of V3V2 = %d%@", size = sizeof(V3V2), ConfirmSize(20));
    NSLog(@"Size of V3V3 = %d%@", size = sizeof(V3V3), ConfirmSize(24));
    NSLog(@"Size of V3V4 = %d%@", size = sizeof(V3V4), ConfirmSize(28));
    NSLog(@"Size of V4F1 = %d%@", size = sizeof(V4F1), ConfirmSize(20));
    NSLog(@"Size of V4V2 = %d%@", size = sizeof(V4V2), ConfirmSize(24));
    NSLog(@"Size of V4V3 = %d%@", size = sizeof(V4V3), ConfirmSize(28));
    NSLog(@"Size of V4V4 = %d%@", size = sizeof(V4V4), ConfirmSize(32));
    NSLog(@"Size of V4F1 = %d%@", size = sizeof(V4F1), ConfirmSize(20));
    NSLog(@"Size of V4F2 = %d%@", size = sizeof(V4F2), ConfirmSize(24));
    NSLog(@"Size of V4F3 = %d%@", size = sizeof(V4F3), ConfirmSize(28));
    NSLog(@"Size of V4F4 = %d%@", size = sizeof(V4F4), ConfirmSize(32));
    NSLog(@"Size of V4F5 = %d%@", size = sizeof(V4F5), ConfirmSize(36));
    NSLog(@"Size of V4F6 = %d%@", size = sizeof(V4F6), ConfirmSize(40));
    NSLog(@"Size of V4F7 = %d%@", size = sizeof(V4F7), ConfirmSize(44));
    NSLog(@"Size of V4F8 = %d%@", size = sizeof(V4F8), ConfirmSize(48));
}
@end 
```

以下是 [Test doTest] 的结果。

IOS：

```
Size of V2F1 = 16 (!12)
Size of V2V2 = 16
Size of V3F1 = 16
Size of V3V2 = 24 (!20)
Size of V3V3 = 24
Size of V3V4 = 32 (!28)
Size of V4F1 = 32 (!20)
Size of V4V2 = 32 (!24)
Size of V4V3 = 32 (!28)
Size of V4V4 = 32
Size of V4F1 = 32 (!20)
Size of V4F2 = 32 (!24)
Size of V4F3 = 32 (!28)
Size of V4F4 = 32
Size of V4F5 = 48 (!36)
Size of V4F6 = 48 (!40)
Size of V4F7 = 48 (!44)
Size of V4F8 = 48 
```

操作系统：

```
Size of V2F1 = 12
Size of V2V2 = 16
Size of V3F1 = 16
Size of V3V2 = 20
Size of V3V3 = 24
Size of V3V4 = 32 (!28)
Size of V4F1 = 32 (!20)
Size of V4V2 = 32 (!24)
Size of V4V3 = 32 (!28)
Size of V4V4 = 32
Size of V4F1 = 32 (!20)
Size of V4F2 = 32 (!24)
Size of V4F3 = 32 (!28)
Size of V4F4 = 32
Size of V4F5 = 48 (!36)
Size of V4F6 = 48 (!40)
Size of V4F7 = 48 (!44)
Size of V4F8 = 48 
```

我的 Xcode 版本是 4.6.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:10:12.007

填充是特定于实现的 - 如果您需要更多控制，您可以尝试使用`aligned`和`packed` [属性](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html)。

例如：

```
__attribute__((packed)) 
```

请记住，使用这些属性可能会导致[可移植性问题](https://stackoverflow.com/questions/8568432/is-gccs-attribute-packed-pragma-pack-unsafe)。