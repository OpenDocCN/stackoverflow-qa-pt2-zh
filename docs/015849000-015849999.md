# StackOverflow 问答 15849000-15849999

# file-io - TCL：打开文件、提取数据、复制文件并随后对其进行操作

> ID：15849008
> 
> 赞同：0
> 
> 时间：2013-04-06T09:09:42.810
> 
> 标签：file-io, scripting, tcl, text-files

我想打开一个几乎包含以下内容的文本文件：

```
    $  
    *include_path
    小路
    $
    $
    *包括
    测试.txt
    $
    $
    *包括
    test1.txt
    $
    *包括
    test1.txt
    $
    *包括
    test1.txt
    $

```

该脚本应该能够搜索位于模式“include_path”下方的路径，将其保存到变量中并将位于模式“include”下方的所有文本文件复制到特定文件夹。

大写的“INCLUDE”表示文本文件与主文本文件放在同一目录中。小写的“include”表示可以在“include_path”下面的路径的文件夹中找到文本文件。

将所有文本文件复制到新文件夹后，应打开主文本文件，并删除或注释掉“include_path”行以及以下路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:02:58.313

# android - 根据按钮点击移动图像

> ID：15849010
> 
> 赞同：2
> 
> 时间：2013-04-06T09:09:50.727
> 
> 标签：android

我使用了四个按钮（上、下、左、右），我也有图像。当我按下 UP 按钮时，我必须相应地移动图像X,Y 坐标。我不知道 X,Y 坐标。

**这是代码。**

```
public class MainActivity extends Activity implements OnClickListener {

    Button up,left,right,down; 

         ImageView i1;

    protected void onCreate(Bundle savedInstanceState) {

                 super.onCreate(savedInstanceState);

                setContentView(R.layout.activity_main);

            up=(Button)findViewById(R.id.button1);

            left=(Button)findViewById(R.id.button2);

            right=(Button)findViewById(R.id.button3);

            down=(Button)findViewById(R.id.button4);

            i1=(ImageView)findViewById(R.id.imageView1);

            up.setOnClickListener(this);
     }

        public void onClick(View arg0) {

    Toast.makeText(getApplication(),"UP",5000).show();  

        RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) 

        i1.getLayoutParams();

        int x = (int)getRawx();

        int y = (int)getRawY();

        mParams.leftMargin = x-50;

        mParams.topMargin = y-50;

       i1.setLayoutParams(mParams);

    }

} 
```

嗨，我已经更新了下面的代码，请检查它。

包 com.example.motion；

```
public class MainActivity extends Activity implements OnClickListener {

Button up,left,right,down; 
ImageView i1;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    up=(Button)findViewById(R.id.button1);
    left=(Button)findViewById(R.id.button2);
    right=(Button)findViewById(R.id.button3);
    down=(Button)findViewById(R.id.button4);
    i1=(ImageView)findViewById(R.id.imageView1);
    up.setOnClickListener(this);
    down.setOnClickListener(this);
    left.setOnClickListener(this);
    right.setOnClickListener(this);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId())
    {
    case R.id.button1:
        {
        Toast.makeText(getApplication(),"UP",Toast.LENGTH_SHORT).show();    
RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) 
        i1.getLayoutParams();
        mParams.topMargin -= 20;
        i1.setLayoutParams(mParams);
        break;
        }

    case R.id.button4:
           {
        Toast.makeText(getApplication(),"DOWN",Toast.LENGTH_SHORT).show();  

        RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) 
                i1.getLayoutParams();
                mParams.topMargin += 20;
                i1.setLayoutParams(mParams);
                break; 
           }

    case R.id.button2:
               {
        Toast.makeText(getApplication(),"LEFT",Toast.LENGTH_SHORT).show();              
        RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) 
                i1.getLayoutParams();
                mParams.leftMargin -= 20;
                i1.setLayoutParams(mParams);    
                break;  
               }

    case R.id.button3:
               {
        Toast.makeText(getApplication(),"RIGHT",Toast.LENGTH_SHORT).show(); 

        RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) 
            i1.getLayoutParams();
            mParams.leftMargin += 20;
            i1.setLayoutParams(mParams);
            break;
               }

}
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:49:09.037

我认为问题是`(int)getRawx();`，`(int)getRawy();`您在 Activity 上调用此方法，我不太确定您是否真的需要这些值。

你可以试试：

```
mParams.leftMargin += 50; 
```

或者

```
int x = mParams.leftMargin;
mParams.leftMargin = x + 50 
```

# javascript - 如何在没有 JavaScript 跟踪的情况下获取 QR 码？

> ID：15849015
> 
> 赞同：4
> 
> 时间：2013-04-06T09:10:03.977
> 
> 标签：javascript, qr-code

我正在帮助为当地的非营利组织设计一个小型网站，并希望包含一个 QR 码以便于访问。我从“免费”的基于 Web 的服务中生成了一些这样的代码，然后检查了这些代码。所有生成的代码都包含网站，但我也注意到所有的二维码都在代码块的末尾悄悄地附加了对 PageTracker 的 JavaScript 调用。在我读过的所有关于二维码的文章中，没有人讨论过这些基本上不可见的添加。

鉴于没有询问我是否要附加这些功能，我假设 Google Analytics 会为提供 QR 码生成服务的各个站点跟踪这些 QR 码的使用（我在底部包含了一个 JavaScript 示例这个问题。）

我对我的网站用户（和他们的手机）在未经我或他们许可的情况下被第三方跟踪并不感到兴奋。因此，鉴于此，我的问题有两个：1）有没有一种简单的方法可以在没有隐蔽跟踪的情况下获取二维码（即它只是打开我的网站）？-- 如果不是 -- 2) 有什么方法可以让我从生成的 Google Analytics 数据中受益？

谢谢！

```
`<script type="text/javascript">`
`var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");`
`document.write(decodeURIComponent("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));`
`</script>`

`<script type="text/javascript">`
`var pageTracker = _gat._getTracker("UA-788492-5");`
`pageTracker._initData();`
`pageTracker._trackPageview();`
`</script>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:36:23.020

我不认为[ZXing 二维码生成器](http://zxing.appspot.com/generator/)做任何有趣的事情。它是[开源](https://code.google.com/p/zxing/)的，因此您可以检查[生成器源代码](https://code.google.com/p/zxing/source/browse/trunk#trunk%2Fzxing.appspot.com%2Fsrc%2Fcom%2Fgoogle%2Fzxing%2Fweb%2Fgenerator%2Fclient)来检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:00:40.137

我在几个项目中为此使用了谷歌图表，虽然我不能说他们在他们这边做了什么样的日志记录，但它肯定不会在你这边添加任何东西。

只需将其作为图片插入您的网站：[https ://chart.googleapis.com/chart?chs=250x250&cht=qr&chl=Hello%20stackoverflow&choe=UTF-8](https://chart.googleapis.com/chart?chs=250x250&cht=qr&chl=Hello%20stackoverflow&choe=UTF-8)

![带有上述网址的示例图片](https://i.stack.imgur.com/k7kzo.png)

您可以在此处找到有关它的更多信息：[https ://developers.google.com/chart/infographics/docs/qr_codes](https://developers.google.com/chart/infographics/docs/qr_codes)

# angularjs - AngularJS 有关于如何创建简单网格的好的教程吗？

> ID：15849016
> 
> 赞同：2
> 
> 时间：2013-04-06T09:10:04.917
> 
> 标签：angularjs

我使用 Knockout 进行了以下编码：

```
 <form action='/someServerSideHandler'>
            <p>You have asked for <span data-bind='text: citys().length'>&nbsp;</span> city(s)</p>
            <table data-bind='visible: citys().length > 0'>
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th />
                    </tr>
                </thead>
                <tbody data-bind='foreach: citys'>
                    <tr>
                        <td>
                            <input class='required' data-bind='value: CityId' /></td>
                        <td>
                            <input class='required' data-bind='value: Name' /></td>
                        <td>
                            <input class='required' data-bind='value: Description' /></td>
                        <td><a href='#' data-bind='click: $root.removeGift'>Delete</a></td>
                    </tr>
                </tbody>
            </table>

            <button data-bind='click: addCity'>Add City</button>
            <button data-bind='enable: citys().length > 0' type='submit'>Submit</button>
        </form> 
```

我想把它移到 AngularJS，但我不知道从哪里开始。如您所见，这是一个非常简单的网格。这就是我所需要的。我不需要 ng-grid 的复杂性。

有没有人看过任何教程或简单网格的示例，我可以用来帮助我将上述内容转换为 AngularJS 网格？

还有一个小问题。我研究过使用 ng-grid，但让我无法使用它的是它的大小和它需要 jQuery 的事实。有谁知道如果我没有 jQuery 会发生什么，它还能工作吗？还有 ng-grid 的最小尺寸是多少。我刚刚注意到一个下载，比如说 800K ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T10:19:01.060

从 Knockout 转换为 Angular 非常容易。他们在视图中几乎使用相同的概念。

这是相同的 html（如上），但已转换为 Angular。

```
<form action='/someServerSideHandler'>
  <p>You have asked for {{citys.length}} city(s)</p>
  <table ng-show="citys.length > 0">
      <thead>
          <tr>
              <th>Id</th>
              <th>Name</th>
              <th />
          </tr>
      </thead>
      <tbody>
          <tr ng-repeat="city in citys">
              <td>
                  <input class='required' ng-model="city.cityId" /></td>
              <td>
                  <input class='required' ng-model="city.Name" /></td>
              <td>
                  <input class='required' ng-model="city.Description" /></td>
              <td><a href='#' ng-click="removeGift()">Delete</a></td>
          </tr>
      </tbody>
  </table>

  <button ng-click="addCity()">Add City</button>
  <button ng-disable="!citys.length" type='submit'>Submit</button>
</form> 
```

# javascript - IE7+8 的 AJAX readystatechange 监听器

> ID：15849017
> 
> 赞同：11
> 
> 时间：2013-04-06T09:10:16.230
> 
> 标签：javascript, jquery, ajax, internet-explorer-8, internet-explorer-7

```
(function (send) {

     XMLHttpRequest.prototype.send = function () {

         this.addEventListener('readystatechange', function() {

             console.log('readyState changed');

         }, false);

         send.apply(this, arguments);
     };

})(XMLHttpRequest.prototype.send); 
```

这可行，但它似乎正在影响其他框架（如 jQuery）。当我使用上面的代码时，我的 jQuery ajax 调用没有完成（IE7 + IE8）。

有没有办法给事件一个新的别名，这样它就不会引起任何冲突（我只是假设这是问题所在）？

而且我不能使用`this.onreadystatechange`，因为 jQuery 正在覆盖它（参见 Fiddle）。

绑定事件侦听器后，代码似乎会静默失败，因此我无法使用控制台进行调试。

[小提琴](http://jsfiddle.net/L8su2/459/)

[在 ie8 和 ie9 模式下比较，注意 ie8 中的控制台是空的](http://jsfiddle.net/L8su2/459/show)

我需要这个的原因是我想要一个用于另一个框架（GWT）的全局 ajax 处理程序。我现在使用 jQuery 只是为了测试它。

编辑：看起来只有 ie9 支持`addEventListener`. 但是，`attachEvent`在 ie7-8 中的 XHR 对象上似乎不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:34:39.127

我们在 IE8 上遇到了 jquery 失败的类似问题。我假设您正在发出跨域请求。Jquery 通过 XMLHttpRequest 进行 ajax，但 IE8 已将 XMLHttpRequest 对象替换为 XDomainRequest 并且 jquery 人不支持它。因此对于 IE8 ，您将不得不修改代码以使用 XDomainRequest 和 jquery。

查看链接

[为 IE8 使用 jquery ajax](http://graphicmaniacs.com/note/getting-a-cross-domain-json-with-jquery-in-internet-explorer-8-and-later/)

# assembly - 装配 - 使用超过 2 个按钮进行中断？

> ID：15849026
> 
> 赞同：0
> 
> 时间：2013-04-06T09:11:03.670
> 
> 标签：assembly, microcontroller, interrupt, atmega

我正在使用带有 Atmega8535 微控制器的 STK200 板。我使用 INT0 和 INT1 按钮作为外部中断，但为了初始化 INT0，我必须将第 6 位设置为 1，而要初始化 INT1，我必须将第 7 位设置为 1，因此没有更多空间来初始化其他按钮。

我的讲师告诉我，可以使用更多按钮来引起中断，但这超出了我正在学习的那一年（第一年软件工程）所需的知识。

没有中断，我不知道如何处理按钮。所以我需要如何处理按钮或如何使用更多按钮作为中断的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:52:07.477

还有另一种处理按钮的方法（不同于中断），当然中断是最好的，但如果你没有任何外部中断引脚，那么你可以使用它。该方法基本上是关于轮询您连接按钮的引脚。我会把 8051 的 asm 中的代码实现发给你，让你更好地理解它。希望能帮助到你：

;假设您已将按钮连接到 P1.1

```
org 00H
 jb P1.1,$      ;wait for a hold button    
 jnb P1.1,$     ;wait for button to be unhold
 ;perform anything
 end 
```

正如您在代码的第二行中看到的那样，我检查按钮是否被按下（当然假设按钮处于低电平状态），如果没有，那么我就呆在那里，如果它被按下，那么我跳到第 3 行，在那里我等到按钮未按住。如果你不等到 btn 被释放，那么微处理器将执行你想做很多次的 ehat，只需按一下 btn。原因很简单：mP 的频率（可能是 12MHz）要快得多比你手指按下按钮的频率，或者，换句话说：你可以尽可能快地按下按钮，但 mP 总是比你快:)。注意：中断比这更好，原因很简单：它们不必进行轮询。

希望你能理解。

# php - 如何在 php 中调试 mysql_query() 函数

> ID：15849027
> 
> 赞同：2
> 
> 时间：2013-04-06T09:11:22.913
> 
> 标签：php, mysql, login

问候，

我是 PHP 新手。这是我为登录页面编写的一个小型登录脚本。它检查数据库中的用户名和密码。

```
 <?php

$con = mysqli_connect("localhost","root","saw","gehriroute");

if(mysqli_connect_errno())
{
    echo "could not connect to the database";
    exit;
}
else
{
    echo "database runing <br>";
}

$uname = trim($_POST['uname']);
$password = trim($_POST['password']);

echo "username and password are $uname and $password <br>";

$query =  "select count(*) from login where username = '".$uname."' and password = '".$password."' ";

$result = mysqli_query($query,$con);

if(!$result)
{
    echo "query failed";
}

$row = mysqli_fetch_row($result);
$count = $row[0];

if($count > 0 )
{
    echo "yes your are logged in";
}
else
{
    echo "wrong username or password";
}

?> 
```

它没有连接到数据库的问题，但也没有响应。我打赌脚本不会通过 mysql_error() 函数。我尝试使用`mysql_error()`函数对其进行调试，它没有返回任何内容。我可以用来调试和纠正错误的其他东西是什么？

输出：

> ```
> database runing
> username and password are ateev and saw
> query failed 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:18:30.723

为什么不首先通过命令行或工作台运行 SQL？

然后，这将使您能够确保查询有效并且您获得了预期的结果。

**编辑**

此外，如果您阅读[mysqli_query](http://php.net/manual/en/mysqli.query.php)手册页，则该行

```
$result = mysqli_query($query,$con); 
```

是不正确的，应该是

```
$result = mysqli_query($con, $query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:19:03.053

可以试试这个：

```
if (!mysqli_query($link, $query)) { //if the query fails find the error
    echo mysqli_error($link);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T09:32:41.450

让我们试试这段代码。现在可以了。

```
<?php

$con = mysqli_connect("localhost","root","saw","gehriroute");

if(mysqli_connect_errno())
{
    echo "could not connect to the database";
    exit;
}
else
{
    echo "database runing <br>";
}

$uname = trim($_POST['uname']);
$password = trim($_POST['password']);

echo "username and password are $uname and $password <br>";

$query =  "select count(*) from login where username = '".$uname."' and password = '".$password."' ";

$result = mysqli_query($con,$query);   // Connection link should first

//echo "Error: ".mysqli_info();

$count = mysqli_num_rows($result);    // Get Count row like this..

if($count > 0 )
{
    echo "yes your are logged in";
}
else
{
    echo "wrong username or password";
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T09:14:45.217

尝试在您的查询之后添加。这将检查/确定您的查询是成功执行还是返回错误

```
$result = mysqli_query($query,$con);

if(!$result){
  // means your query failed
  // error checking...
   printf("Error: %s\n", mysqli_error($con));
}
else {
   echo 'query executed.';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T09:16:33.887

很可能没有调用 php 脚本。尝试将您的 .php 文件设置为 just`echo 'x';`并查看是否`x`输出。如果不是，那么您调用了错误的脚本并需要指定正确的文件名（例如：*myScript.php*）。

[这是您尝试做的](http://php.net/manual/en/mysqli-result.num-rows.php)一个工作示例。只需替换`SELECT Code, Name FROM Country ORDER BY Name`为您的查询。

快乐编码:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T09:19:58.323

> 回声$查询；出口

复制查询并将其运行到您的查询执行器！

如果有的话，你会得到 SQL 错误

其他明智的查询将成功运行。

# project - 在 Assembla 中将私人付费项目转换为免费私人

> ID：15849030
> 
> 赞同：2
> 
> 时间：2013-04-06T09:11:42.000
> 
> 标签：project, assembla

我在 Assembla 中有一个带有 Starter 计划的私人项目，我如何将此项目转换为免费的私人（非公共）项目？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T17:36:26.440

请转到您空间的“管理员”选项卡并检查是否有直接执行此操作的选项。

如果您将看到该声明`Remove this space from your Starter Package and convert it into a Free Private space`- 只需单击它即可将空间转换为免费/私人。

请注意，在这种情况下，您的所有专业（付费）工具（消息、文件、StandUp、里程碑、工单、Wiki、时间、GitHub、支持、FTP、Webhook、自定义选项卡）都将被删除。

如果您会看到`Remove this space from your Starter Package and convert it into a free public space`- 那么您可以选择仅将空间转换为免费/公共。

在这种情况下，将其转换为免费/私人的唯一选择是备份您空间中的数据（通过您空间的管理 > 资源选项卡或源/SVN 的导入/导出子选项卡和工单工具的设置页面) 然后创建一个新的 Free/Private 空间并在那里导入转储文件。

# wordpress - 使用 htaccess 屏蔽 wp-admin 文件夹

> ID：15849031
> 
> 赞同：2
> 
> 时间：2013-04-06T09:11:49.327
> 
> 标签：wordpress, .htaccess, mod-rewrite

同样的问题：[使用 htaccess 屏蔽文件夹名称](https://stackoverflow.com/questions/3983391/use-htaccess-to-mask-folder-name)

但答案不起作用。我的`.htaccess`文件目前看起来像：

```
# BEGIN WordPress
<IfModule mod_rewrite.c> 
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

RewriteCond %{THE_REQUEST} ^GET\ /wp-admin/
RewriteRule ^wp-admin/(.*)$ dashboard/$1 [R,L]
RewriteRule ^dashboard(.*)$ wp-admin$1 
```

我总是得到：

> **页面未正确重定向**
> 
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

`dashboard`-`wp-admin`似乎相互重定向；我只想显示`mysite.com/dashboard`，但内容必须是`mysite.com/wp-admin`，我使用的是 wordpress 3.5.1。这是可能的，不是吗？我在服务器方面一点也不擅长；所以请帮忙；

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T09:23:22.717

我不确定您为什么在浏览器上收到**“页面未正确重定向”**`/dashboard`错误，但如果该目录实际上不存在，这些请求将通过 index.php（wordpress）进行路由。您应该尝试交换规则的顺序，以便重定向发生*在*路由之前：

```
RewriteBase /
RewriteCond %{THE_REQUEST} ^GET\ /wp-admin/
RewriteRule ^wp-admin/(.*)$ dashboard/$1 [R,L]
RewriteRule ^dashboard(.*)$ wp-admin$1

# BEGIN WordPress
<IfModule mod_rewrite.c> 
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

这样，当您请求时`http://mysite.com/dashboard`，将应用第二条规则而不是`RewriteRule . /index.php`规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:33:07.650

这可能是您的页面未正确重定向的原因：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

尝试`.htaccess`使用以下指令更改您的整体：

```
# BEGIN WordPress
<IfModule mod_rewrite.c> 
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
#Where the
#suspected
#code located
</IfModule>

# END WordPress

#HERE
RewriteRule ^wp-admin/?$ /dashboard [R,L]
RewriteRule ^wp-admin/(.*)/?$ /dashboard/$1 [R,L]
RewriteRule ^dashboard/?$ /wp-admin
RewriteRule ^dashboard/(.*)$ /wp-admin/$1 
```

如果它不起作用，请尝试使用 更改`#HERE`评论`RewriteEngine on`。

# r - 如何在 R 中使用 ascii、html 或 markdown 格式打印表格？

> ID：15849043
> 
> 赞同：7
> 
> 时间：2013-04-06T09:12:44.387
> 
> 标签：r

```
library(xtable)
library(rattle)
set.seed(42)
obs <- sample(1:nrow(weatherAUS), 5)
vars <- 2:7
xtable(weatherAUS[obs, vars]) 
```

我得到以下带有代码的输出，为什么我不能得到格式化的表格？

```
% latex table generated in R 2.15.1 by xtable 1.7-1 package  
% Sat Apr  6 17:02:37 2013  
\begin{table}[ht]  
\centering  
\begin{tabular}{rlrrrrr}  
  \hline  
 & Location & MinTemp & MaxTemp & Rainfall & Evaporation & Sunshine \\   
  \hline  
60992 & Hobart & 5.60 & 13.00 & 7.60 & 1.60 & 3.10 \\   
  62476 & Launceston & 7.40 & 13.50 & 8.80 &  &  \\   
  19077 & Williamtown & 18.30 & 29.10 & 3.20 & 1.00 & 7.00 \\   
  55366 & PerthAirport & 9.80 & 21.90 & 0.00 & 3.60 & 9.80 \\   
  42784 & GoldCoast & 23.40 & 30.40 & 0.00 &  &  \\   
   \hline  
\end{tabular}  
\end{table} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-06T10:06:53.340

你得到的返回`xtable`是非常格式化的，但是因为它是 LaTeX 语法，所以值得通过一个 LaTeX 编译器来运行，比如`pdflatex`. 这将返回一个像这样的pdf文档：

![编译的pdf文件](https://i.stack.imgur.com/jkymw.png)

如果您想要 R 控制台中的格式化表格，即标准的可读版本`print.data.frame`，您可以尝试使用 the `ascii`or my `pander`package。例子：

1.  一个基本的`ascii`调用：

    ```
    > library(ascii)
    > ascii(weatherAUS[obs, vars])
    |=================================================================================== 
    1.1+| h| Location     h| MinTemp h| MaxTemp h| Rainfall h| Evaporation h| Sunshine 
    | 60992 | Hobart       | 5.60    | 13.00   | 7.60     | 1.60        | 3.10     
    | 62476 | Launceston   | 7.40    | 13.50   | 8.80     |             |          
    | 19077 | Williamtown  | 18.30   | 29.10   | 3.20     | 1.00        | 7.00     
    | 55366 | PerthAirport | 9.80    | 21.90   | 0.00     | 3.60        | 9.80     
    | 42784 | GoldCoast    | 23.40   | 30.40   | 0.00     |             |          
    |=================================================================================== 
    ```

2.  调用`ascii`以例如 reStructuredText 格式返回表格：

    ```
    > print(ascii(weatherAUS[obs, vars]), type = "rest")

    +-------+--------------+---------+---------+----------+-------------+----------+
    |       | Location     | MinTemp | MaxTemp | Rainfall | Evaporation | Sunshine |
    +=======+==============+=========+=========+==========+=============+==========+
    | 60992 | Hobart       | 5.60    | 13.00   | 7.60     | 1.60        | 3.10     |
    +-------+--------------+---------+---------+----------+-------------+----------+
    | 62476 | Launceston   | 7.40    | 13.50   | 8.80     |             |          |
    +-------+--------------+---------+---------+----------+-------------+----------+
    | 19077 | Williamtown  | 18.30   | 29.10   | 3.20     | 1.00        | 7.00     |
    +-------+--------------+---------+---------+----------+-------------+----------+
    | 55366 | PerthAirport | 9.80    | 21.90   | 0.00     | 3.60        | 9.80     |
    +-------+--------------+---------+---------+----------+-------------+----------+
    | 42784 | GoldCoast    | 23.40   | 30.40   | 0.00     |             |          |
    +-------+--------------+---------+---------+----------+-------------+----------+ 
    ```

3.  用于以`pander`不同的降价格式返回表格：

    ```
    > library(pander)
    > panderOptions('table.split.table', Inf)
    > pander(weatherAUS[obs, vars])

    --------------------------------------------------------------------------------
      &nbsp;      Location    MinTemp   MaxTemp   Rainfall   Evaporation   Sunshine 
    ----------- ------------ --------- --------- ---------- ------------- ----------
     **60992**     Hobart       5.6      13.0       7.6          1.6         3.1    

     **62476**   Launceston     7.4      13.5       8.8                             

     **19077**  Williamtown    18.3      29.1       3.2          1.0         7.0    

     **55366**  PerthAirport    9.8      21.9       0.0          3.6         9.8    

     **42784**   GoldCoast     23.4      30.4       0.0                             
    -------------------------------------------------------------------------------- 
    ```

4.  或`grid`格式：

    ```
    > pandoc.table(weatherAUS[obs, vars], style = 'grid')

    +-------------+--------------+-----------+-----------+------------+---------------+------------+
    |   &nbsp;    |   Location   |  MinTemp  |  MaxTemp  |  Rainfall  |  Evaporation  |  Sunshine  |
    +=============+==============+===========+===========+============+===============+============+
    |  **60992**  |    Hobart    |    5.6    |   13.0    |    7.6     |      1.6      |    3.1     |
    +-------------+--------------+-----------+-----------+------------+---------------+------------+
    |  **62476**  |  Launceston  |    7.4    |   13.5    |    8.8     |               |            |
    +-------------+--------------+-----------+-----------+------------+---------------+------------+
    |  **19077**  | Williamtown  |   18.3    |   29.1    |    3.2     |      1.0      |    7.0     |
    +-------------+--------------+-----------+-----------+------------+---------------+------------+
    |  **55366**  | PerthAirport |    9.8    |   21.9    |    0.0     |      3.6      |    9.8     |
    +-------------+--------------+-----------+-----------+------------+---------------+------------+
    |  **42784**  |  GoldCoast   |   23.4    |   30.4    |    0.0     |               |            |
    +-------------+--------------+-----------+-----------+------------+---------------+------------+ 
    ```

5.  更多`simple`r 格式：

    ```
    > pandoc.table(weatherAUS[obs, vars], style = 'simple')

      &nbsp;      Location    MinTemp   MaxTemp   Rainfall   Evaporation   Sunshine 
    ----------- ------------ --------- --------- ---------- ------------- ----------
     **60992**     Hobart       5.6      13.0       7.6          1.6         3.1    
     **62476**   Launceston     7.4      13.5       8.8                             
     **19077**  Williamtown    18.3      29.1       3.2          1.0         7.0    
     **55366**  PerthAirport    9.8      21.9       0.0          3.6         9.8    
     **42784**   GoldCoast     23.4      30.4       0.0 
    ```

6.  或者在 PHPMarkdown Extra/管道语法中使用`knitr`：

    ```
    > pandoc.table(weatherAUS[obs, vars], style = 'rmarkdown')

    |   &nbsp;    |   Location   |  MinTemp  |  MaxTemp  |  Rainfall  |  Evaporation  |  Sunshine  |
    |:-----------:|:------------:|:---------:|:---------:|:----------:|:-------------:|:----------:|
    |  **60992**  |    Hobart    |    5.6    |   13.0    |    7.6     |      1.6      |    3.1     |
    |  **62476**  |  Launceston  |    7.4    |   13.5    |    8.8     |               |            |
    |  **19077**  | Williamtown  |   18.3    |   29.1    |    3.2     |      1.0      |    7.0     |
    |  **55366**  | PerthAirport |    9.8    |   21.9    |    0.0     |      3.6      |    9.8     |
    |  **42784**  |  GoldCoast   |   23.4    |   30.4    |    0.0     |               |            | 
    ```

# ruby-on-rails - 如何从现有的 Time.zone 为 Rails 创建 Ruby DateTime？

> ID：15849050
> 
> 赞同：29
> 
> 时间：2013-04-06T09:13:45.370
> 
> 标签：ruby-on-rails, ruby, datetime, ruby-on-rails-3.2, timezone

我让用户在 Ruby on Rails 网站中输入日期。我将日期解析为 DateTime 对象，如下所示：

```
date = DateTime.new(params[:year].to_i, params[:month].to_i, params[:day].to_i, params[:hour].to_i, params[:minute].to_i) 
```

或者

```
date = DateTime.parse(params[:date]) 
```

两个`DateTime`s 都***不会***在我之前设置的用户的时区中，例如：

```
Time.zone = "Pacific Time (US & Canada)" 
```

如何将上述`DateTime`s 解析为正确的时区？我知道该`DateTime.new`方法有时间偏移的第 7 个参数。有没有一种简单的方法可以在给定时间内查找时区的偏移量？或者我应该使用其他的东西`DateTime`吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-11-08T09:57:54.807

尝试：

```
Time.zone = "Pacific Time (US & Canada)"
Time.zone.parse('8-11-2013 23:59:59') #=> Fri, 08 Nov 2013 23:59:59 PST -08:00 
```

或者

```
Time.now.in_time_zone("Pacific Time (US & Canada)") 
```

或者

```
DateTime.now.in_time_zone("Pacific Time (US & Canada)") 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-06-29T04:39:24.723

您可以使用以下代码创建`DateTime`具有所需`TimeZone`.

```
DateTime.new(2013, 6, 29, 10, 15, 30).change(:offset => "+0530") 
```

**更新**：使用~~新~~的 1.9.1 版本的~~Rails~~ Ruby，下面的行就像魔术一样做同样的工作。

```
DateTime.new(2013, 6, 29, 10, 15, 30, "+0530") 
```

文档[在这里](https://apidock.com/ruby/v1_9_1_378/DateTime/new/class)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-04-06T09:29:06.393

`Time.zone.local`如果您之前设置过，您可以使用`Time.zone`：

```
user_time = Time.zone.local(params[:year].to_i, params[:month].to_i, params[:day].to_i, params[:hour].to_i, params[:minute].to_i, 0) 
```

看看[`ActiveSupport::TimeWithZone`](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)文档。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-29T15:04:31.910

`DateTime.new`接受从 ruby​​ 1.9.1 开始的可选**偏移参数（作为第七个）**

我们可以写

```
DateTime.new(2018, 1, 1, 0, 0, 0, Time.zone.formatted_offset) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-18T10:54:28.347

如果您已经有一个名为“datetime”的正确 DateTime 对象，并且您想复制它，您可以简单地调用它的“getutc”，然后使用“in_time_zone”

```
DateTime.new(datetime.getutc.year, datetime.getutc.month, datetime.getutc.day, time.getutc.hour, time.getutc.min).in_time_zone 
```

# ruby-on-rails - 如何使用 Ransack 过滤结果

> ID：15849054
> 
> 赞同：2
> 
> 时间：2013-04-06T09:13:53.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试在我的网站上为搜索功能实施 Ransack。我尝试在 Ransack 上观看 Railscast，并很好地了解了如何实现它。但是我遇到了一个我似乎无法弄清楚的问题。

在我的用户控制器的索引操作中，我有以下代码：

```
def index
   @users = User.same_city_as(current_user)
end 
```

`@users`是一个`ActiveRecord::Relation`对象。`@users`本质上是捕获所有与`current_user`. 在我看来，我能够遍历`@users`并显示与`current_user`. 这一切都很好。现在我希望能够根据用户提供的年龄范围过滤这些结果。根据 Railcasts，我可以这样做：

```
def index
  @search = User.search(params[:q])
  @Users = @search.result
end 
```

但后来我不再有相同的城市范围了。我想要的是默认显示属于同一城市的所有用户`current_user`，然后按年龄过滤这些结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:19:25.613

Ransack 与**范围**一起使用，因此您可以轻松链接自己的范围。

假设`User.same_city_as`返回一个范围（一个`ActiveRecord::Relation`实例），您可以简单地这样做：

```
@search = User.same_city_as(current_user).search(params[:q])
@users = @search.result 
```

并`@search.result`返回一个范围，因此您可以对其应用进一步的修改，例如分页。

使用**[Kaminari](https://github.com/amatsuda/kaminari)**，这可能看起来像：

```
@search = User.same_city_as(current_user).search(params[:q])
@users = @search.result.page(params[:page]) 
```

# android - 从图书馆项目中调用活动

> ID：15849055
> 
> 赞同：0
> 
> 时间：2013-04-06T09:13:54.433
> 
> 标签：android, android-activity, android-library

我有个问题。我已经将一个 Android 项目作为库，我想从一个不同的项目中调用这个库中的一个活动。在不同的项目中，我已经转到属性并选择第一个项目作为库。

图书馆项目有一些包。包含活动的包名称是 com.jwetherell.augmented_reality.activity -> Demo.java

现在在另一个项目中，我想从这个包 com.mdl.cyrestaurants.guide -> MainActivity.java 调用 Demo.java 活动

我试着这样称呼它

```
public void Nearme(View v) {
    startActivity(new Intent("com.jwetherell.augmented_reality.activity.Demo"));
} 
```

但我有问题。我必须在 AndroidManifest 中写一些东西吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:20:51.657

是的，您的活动必须列在清单中。

就像是：

```
<activity android:name="com.jwetherell.augmented_reality.activity.Demo" /> 
```

或者，如果包名称是“com.jwetherell.augmented_reality”，您只需指定：

```
<activity android:name=".activity.Demo" /> 
```

# java - 绘制 JPanel/JComponent

> ID：15849059
> 
> 赞同：0
> 
> 时间：2013-04-06T09:14:21.923
> 
> 标签：java, image, swing, jpanel, paintcomponent

您好，我在面板上绘制图片并将其添加到框架时遇到问题。

```
import java.awt.Graphics;
import java.awt.Image;
import java.util.Random;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
public class CardComponent extends JPanel {
int x;int y;
String[] str = {
           "D:\\Images\\ImageCards\\Clubs_Ace.png",
           "D:\\Images\\ImageCards\\Clubs_King.png",
           "D:\\Images\\ImageCards\\Clubs_Queen.png",
           "D:\\Images\\ImageCards\\Clubs_Jack.png",
           "D:\\Images\\ImageCards\\Clubs_10.png",
           "D:\\Images\\ImageCards\\Clubs_9.png",
           "D:\\Images\\ImageCards\\Clubs_8.png",
           "D:\\Images\\ImageCards\\Clubs_7.png",
           "D:\\Images\\ImageCards\\Clubs_6.png",
           "D:\\Images\\ImageCards\\Clubs_5.png",
           "D:\\Images\\ImageCards\\Clubs_4.png",
           "D:\\Images\\ImageCards\\Clubs_3.png",
           "D:\\Images\\ImageCards\\Clubs_2.png",
           "D:\\Images\\ImageCards\\Diamonds_Ace.png",
           "D:\\Images\\ImageCards\\Diamonds_King.png",
           "D:\\Images\\ImageCards\\Diamonds_Queen.png",
           "D:\\Images\\ImageCards\\Diamonds_Jack.png",
           "D:\\Images\\ImageCards\\Diamonds_10.png",
           "D:\\Images\\ImageCards\\Diamonds_9.png",
           "D:\\Images\\ImageCards\\Diamonds_8.png",
           "D:\\Images\\ImageCards\\Diamonds_7.png",
           "D:\\Images\\ImageCards\\Diamonds_6.png",
           "D:\\Images\\ImageCards\\Diamonds_5.png",
           "D:\\Images\\ImageCards\\Diamonds_4.png",
           "D:\\Images\\ImageCards\\Diamonds_3.png",
           "D:\\Images\\ImageCards\\Diamonds_2.png",
           "D:\\Images\\ImageCards\\Hearts_Ace.png",
           "D:\\Images\\ImageCards\\Hearts_King.png",
           "D:\\Images\\ImageCards\\Hearts_Queen.png",
           "D:\\Images\\ImageCards\\Hearts_Jack.png",
           "D:\\Images\\ImageCards\\Hearts_10.png",
           "D:\\Images\\ImageCards\\Hearts_9.png",
           "D:\\Images\\ImageCards\\Hearts_8.png",
           "D:\\Images\\ImageCards\\Hearts_7.png",
           "D:\\Images\\ImageCards\\Hearts_6.png",
           "D:\\Images\\ImageCards\\Hearts_5.png",
           "D:\\Images\\ImageCards\\Hearts_4.png",
           "D:\\Images\\ImageCards\\Hearts_3.png",
           "D:\\Images\\ImageCards\\Hearts_2.png",
           "D:\\Images\\ImageCards\\Spades_Ace.png",
           "D:\\Images\\ImageCards\\Spades_Ace.png",
           "D:\\Images\\ImageCards\\Spades_King.png",
           "D:\\Images\\ImageCards\\Spades_Queen.png",
           "D:\\Images\\ImageCards\\Spades_Jack.png",
           "D:\\Images\\ImageCards\\Spades_10.png",
           "D:\\Images\\ImageCards\\Spades_9.png",
           "D:\\Images\\ImageCards\\Spades_8.png",
           "D:\\Images\\ImageCards\\Spades_7.png",
           "D:\\Images\\ImageCards\\Spades_6.png",
           "D:\\Images\\ImageCards\\Spades_5.png",
           "D:\\Images\\ImageCards\\Spades_4.png",
           "D:\\Images\\ImageCards\\Spades_3.png",
           "D:\\Images\\ImageCards\\Spades_2.png"      
           };
   Image img;
     public CardComponent(int x,int y) {
         setOpaque(false);
         this.x = x;
         this.y = y;
         setSize(100,150);
         setVisible(true);

     }
     public void paint(Graphics g) {
         super.paint(g);
         Random r = new Random();
         String s = "";
         s = str[r.nextInt(str.length)];
         img = getToolkit().getImage(s);
         g.drawImage(img,this.x , this.y, 100, 150, this);
     }
     public static void main(String[] args) {
         CardComponent cc = new CardComponent(10,150);
         JFrame jfrm = new JFrame();
         jfrm.setSize(100, 150);
         jfrm.setVisible(true);
         jfrm.getContentPane().add(cc);
     }
 } 
```

在类上是主要问题（无法绘制卡片）。我将这个东西添加到主框架（代码下）。我在每个类中添加方法 main 只是为了检查它是否工作正常。导入 java.awt.Button；导入 java.awt.Color；导入 java.awt.event.ActionEvent；导入 java.awt.event.ActionListener；

```
 import javax.swing.JFrame;
  import javax.swing.JLabel;
  import javax.swing.JPanel;
  import javax.swing.JSlider;
  import javax.swing.event.ChangeEvent;
  import javax.swing.event.ChangeListener;

  public class PanelButtons extends JPanel{
Button but1;
Button but2;
    Button but3;
JLabel jlab;
JSlider jsl;
public PanelButtons() {
     setLayout(null);  
     Color c = new Color(0,120,0);
     setSize(700,200);
     setLocation(0,0);
     setOpaque(false);
     but1 = new Button("Check");
     but1.setBackground(Color.CYAN);
     but1.setLocation(660, 350);
     but1.setBounds(683, 650, 70, 40);
     add(but1);
     but2 = new Button("Fold");
     but2.setBackground(Color.CYAN);
     but2.setLocation(660, 350);
     but2.setBounds(753, 650, 70, 40);
     add(but2);
     but3 = new Button("Bet");
     but3.setBackground(Color.CYAN);
     but3.setLocation(660, 350);
     but3.setBounds(823, 650, 70, 40);
     add(but3);
     int money = Player.PremierMoney();
     jsl = new JSlider(0,1000);
     jsl.setMajorTickSpacing(50);
     jsl.setMinorTickSpacing(10);
     jsl.setLabelTable(jsl.createStandardLabels(100));
     jsl.setPaintTicks(true);
     jsl.setPaintLabels(true);
     jsl.setSize(400, 150);
     jsl.setBackground(c);
     jlab = new JLabel("Ваша ставка"+jsl.getValue());
     jsl.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent ce) {
            if(jsl.getValueIsAdjusting()) return;
            jlab.setText("Ваша ставка:"+jsl.getValue());

        }

     });
     jlab.setHorizontalTextPosition(JLabel.CENTER);
     jlab.setVerticalAlignment(JLabel.BOTTOM);
     jsl.setLocation(900,600);
     jlab.setLocation(150,150);
     add(jsl);
     add(jlab);
     but2.addActionListener(new ActionListener() {

         @Override
        public void actionPerformed(ActionEvent e) {
             but1.setEnabled(false);
             but2.setEnabled(false);
             but3.setEnabled(false);

        }
     });
}

public static void main(String[] args) {
    JFrame jfrm = new JFrame("Some frame");
    jfrm.setSize(200, 200);
    PanelButtons pb = new PanelButtons();
    jfrm.setContentPane(pb);
    jfrm.setVisible(true);
    jfrm.setDefaultCloseOperation(jfrm.EXIT_ON_CLOSE);
}
   } 
```

此类描述按钮和滑块。导入 java.awt.Color；导入 javax.swing.JFrame；

```
 public class Images extends JFrame{
   Images() {
      // CardComponent cc = new CardComponent(530,550);
       PanelButtons pb = new PanelButtons();
       Color c = new Color(0,120,0);
    //  cc.setBounds(530, 550, 100, 150);
      setSize(1366,750); 
      setBackground(c);
      setContentPane(pb);
    //  setContentPane(cc);
      setVisible(true);
   }    

   public static void main(String[] args) {
       Images im = new Images();
       im.setResizable(false);
       im.setDefaultCloseOperation(EXIT_ON_CLOSE);
   }
    } 
```

这是我添加面板的主框架。所以主要问题是我在哪里画卡。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:10:21.837

整个程序有很多问题，`null`布局的选择很重要，这会给你带来很多问题。

但是，您面临的重大问题在于您的`paint`方法

```
public void paint(Graphics g) {
    super.paint(g);
    Random r = new Random();
    String s = "";
    s = str[r.nextInt(str.length)];
    System.out.println(s);
    img = getToolkit().getImage(s);
    g.drawImage(img, this.x, this.y, 100, 150, this);
} 
```

这种方法存在三个问题。

1.  你应该压倒一切`paintComponent`，它是一种更安全的执行自定义绘画的方法。
2.  您在每个绘画周期中随机重新生成图像。您必须记住，您的组件可能因多种原因而被绘制，并且大多数超出您的控制范围。这意味着每次绘制组件时，都会加载一个新图像。您应该在构建组件时将单个图像分配给组件并绘制该图像。
3.  传递给您的组件的`Graphics`上下文已被翻译，因此点 0x0 将位于组件的左上角。这意味着，所有的绘画都是相对的。

您的代码执行此操作...

```
g.drawImage(img, this.x, this.y, 100, 150, this); 
```

这意味着，图像将在相对于组件的顶部/左侧位置的 x/y 像素处绘制。相反，您应该在 0x0 位置周围进行绘画。

在您的示例中，您还可以

```
jfrm.setVisible(true);
jfrm.getContentPane().add(cc); 
```

这通常是个坏主意，你应该切换这两个语句，否则看起来像什么都没有画。

您可能会发现值得一读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/)

**用一个简单的例子更新**

此示例旨在演示`paint`方法可以采用的命中数量以及局部坐标空间的概念。

![在此处输入图像描述](https://i.stack.imgur.com/ddlP2.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.GridBagLayout;
import java.awt.Image;
import java.io.File;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Cards {

    public static void main(String[] args) {
        new Cards();
    }

    public Cards() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame jfrm = new JFrame();
                jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                jfrm.setSize(100, 150);
                jfrm.setVisible(true);
                jfrm.add(new TestPane());
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            CardComponent cc = new CardComponent();
            setLayout(new GridBagLayout());
            add(cc);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            FontMetrics fm = g.getFontMetrics();
            // Simply render the location of the component relative to it's parent.
            for (Component comp : getComponents()) {
                String text = comp.getX() + "x" + comp.getY();
                g.drawString(text, comp.getX(), comp.getY() - fm.getHeight() + fm.getAscent());
            }
        }

    }

    public class CardComponent extends JPanel {

        String[] str;
        Image img;
        private int paintCount;

        public CardComponent() {
            File[] files = new File("C:\\Users\\swhitehead\\Documents\\My Dropbox\\MegaTokyo").listFiles();
            str = new String[files.length];
            for (int index = 0; index < files.length; index++) {
                str[index] = files[index].getPath();
            }
            setOpaque(false);
            setVisible(true);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 150);
        }

        @Override
        public Dimension getMinimumSize() {
            return getPreferredSize();
        }

        public void paint(Graphics g) {
            paintCount++;
            System.out.println(paintCount);
            super.paint(g);
            Random r = new Random();
            String s = "";
            s = str[r.nextInt(str.length)];
            img = getToolkit().getImage(s);
            // Drawing image in the top left corner of the component
            g.drawImage(img, 0, 0, 100, 150, this);
            g.setColor(Color.RED);
            g.drawRect(0, 0, getWidth(), getHeight());
            FontMetrics fm = g.getFontMetrics();
            String text = "Local 0x0";
            g.drawString(text, 0, fm.getAscent());
        }
    }
} 
```

在这个例子中，`paintCount`我什至在触摸框架之前就可以达到 3640。

以任何方法加载图像`paint`也是一个坏主意。方法应该`paint`尽快返回，否则会降低程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:39:42.997

我对你的代码有点困惑，我没有看到一个`CardComponent`对象，你必须实例化你的`CardComponent`类的一个对象，然后将它添加到你的`JFrame`或`JFrame`像这样的组件中......

```
Images im = new Images();
PanelButtons pb = new PanelButtons();
CardComponent cc = new CardComponent(x, y);
im.setContentPane(pb);
pb.setLayout(new BorderLayout());
pb.add(cc, BorderLayout.CENTER); 
```

这不是一个有效的程序，但希望你能明白。而且我只是浏览了代码，所以我可能错过了实例化`CardComponent`对象的位置，所以如果您仍然遇到问题，请尝试以这种方式加载图像......

```
public void paint(Graphics g) {
     super.paint(g);
     Random r = new Random();
     String s = "";
     s = str[r.nextInt(str.length)];
     img = ImageIcon(s).getImage();
     g.drawImage(img,this.x , this.y, 100, 150, this);
 } 
```

我刚刚运行了你的代码，我还有一个建议。在`CardComponent`构造函数中使用设置bounds`setBounds(x, y, 100, 150)`方法然后从左上角(0, 0)到右下角(100, 150)或者(getWidth(), getHeight())绘制图像。

希望这会有所帮助，祝你好运。

# android - 如何制作可缩放的线性布局？

> ID：15849060
> 
> 赞同：4
> 
> 时间：2013-04-06T09:14:23.467
> 
> 标签：android, zooming

我有一个想要缩放的 xml 文件。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-06T11:05:46.370

[在你的应用程序中使用这个 jar](http://code.google.com/p/android-zoom-view/downloads/list)

1.为我想要应用缩放功能的视图创建一个新布局 (R.layout.zoomableview)。

2.将它放在ZoomView中。

3.然后将 ZoomView 放置到要显示可缩放视图的主容器中。

```
private ZoomView zoomView;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_zoomable);

View v = ((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.zoomableview, null, false);
v.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

zoomView = new ZoomView(this);
zoomView.addView(v);

main_container = (LinearLayout) findViewById(R.id.main_container);
main_container.addView(zoomView);            } 
```

# jsf - 在某些 java 值 (JSF) 上显示/隐藏一段 html

> ID：15849064
> 
> 赞同：0
> 
> 时间：2013-04-06T09:15:04.127
> 
> 标签：jsf, managed-bean

我正在编写一段代码，如果语句正确，该代码应该显示一些 html。

我有一个包含值的托管 bean。状态是一个枚举 - 我在网上发现它可以被视为一个字符串。但是，它对我不起作用。

```
 <c:if test="#{myBean.item.status == 'OPEN'}" >
         //display this
   </c:if> 
```

显示这个的最佳方式是什么？`c:if`不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T12:20:57.737

在`<c:if>`视图构建期间运行，即 XHTML 文件转换为 JSF 组件树的那一刻，如果要测试的变量仅在视图渲染期间可用，则不会工作，即 JSF 组件树需要生成 HTML 的那一刻. 然后，您需要一个在视图呈现期间运行的 JSF 组件。

如果您打算在视图渲染期间有条件地渲染 JSF 组件片段，那么您应该使用`<ui:fragment>`：

```
<ui:fragment rendered="#{myBean.item.status == 'OPEN'}">
     ...
</ui:fragment> 
```

另一种选择是`<h:panelGroup>`：

```
<h:panelGroup rendered="#{myBean.item.status == 'OPEN'}">
     ...
</h:panelGroup> 
```

只要您不指定任何应该在 HTML 输出中结束的属性，如`id`,`style`等，它也不会向 HTML 输出呈现任何内容。然后它将生成一个 HTML`<span>`元素。这在语义上至少比`<label>`其他回答者错误地建议的 a 好得多。A`<label>`旨在标记关联的 HTML 输入元素，而不是跨越某些标记。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# android - 使用 Bundle 保存和恢复

> ID：15849068
> 
> 赞同：1
> 
> 时间：2013-04-06T09:15:57.360
> 
> 标签：android

我已经通过 Bundle 实现了保存（onSaveInstanceState）和恢复（onCreate）。它在由于方向变化而重新创建活动时起作用，但在其他应用程序要求资源后重新创建活动时不起作用。在这种情况下，事实证明我的捆绑包中的数据键不存在。为什么？我很茫然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:24:12.693

保存`onSaveInstanceState()`和传回的 Bundle`onCreate()`不是持久的，仅用于在应用程序的生命周期内保存配置更改和 Activity 重新创建期间的状态。

如果您的应用程序被破坏，就像这里发生的那样，您将需要将您的值存储在持久的地方，例如`SharedPreferences`

使用`onPause()`和`onResume()`来保存和恢复。

[http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle))

# search - 显示 twitter bootstrap typeahead 插件的自定义页脚

> ID：15849071
> 
> 赞同：3
> 
> 时间：2013-04-06T09:16:08.370
> 
> 标签：search, twitter-bootstrap, customization, typeahead.js

我正在尝试使用 bootstrap 和 typeahead 插件在 twitter 上创建类似搜索功能的东西。

到目前为止，我已经设法通过编译来自 ajax 调用的结果列表并在“荧光笔”函数中引用它来根据类型（人 / 等）以不同的方式显示结果。

我想要做的是为弹出的下拉菜单显示一个自定义页脚，其中包含 twitter 上的结果（“查看所有结果”、“搜索所有人进行测试”等）。

![推特搜索](https://i.stack.imgur.com/LAjUq.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-15T07:53:03.520

```
$('.typeahed').typeahed(null, {
    name: 'suggestions',
    templates: {
        footer: Handlebars.compile('Results for {{ query }}'),
    }
}); 
```

# magento - Magento - 导出产品空白屏幕

> ID：15849080
> 
> 赞同：2
> 
> 时间：2013-04-06T09:16:53.407
> 
> 标签：magento, magento-1.7, product

我正在使用默认配置文件进行 magento 产品导出。当我单击运行配置文件时，我得到一个空白屏幕。我在数据库中有 500 种产品。另外，我不能出口产品库存，但我可以出口客户。我正在使用 magento 1.7 版本。我的`.htaccess`档案。memory_limit 为 128M

```
max_execution_time 18000 
```

请帮忙。我是magento的新手，所以...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:00:22.667

500 表示响应超时，这意味着当服务器超时启动时，magento 没有完成导入。

最大化执行时间并不意味着服务器会等待它。

我建议您从命令行导入，因为它更快并且不会产生超时。如果您没有此选项，请尝试告诉 apache 等待更长时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:31:41.473

请检查 /var/log 中的日志文件和您的 wbeserver 日志文件。他们肯定会告诉你出了什么问题。看起来内存不足，执行时间限制或类似的东西。但是如果不检查日志，我们都必须猜测。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T04:28:01.873

Mage_Catalog_Model_Convert_Parser_Product 类中的这个函数有一个循环 foreach ($entityIds as $i => $entityId) { 所以在此处放置一些 Mage::log() 代码并获取计数器、内存使用量和峰值内存使用量。好像是因为内存或超时，那么至少这个循环会运行几次。如果它的内存问题，那么要么增加内存并重新检查。有时也看到不需要的属性没有从购物车中删除，这也会导致更高的内存消耗。如果它的时间问题增加时间。如果增加时间或内存是一个限制，那么您将不得不一次导出更少的产品。

```
public function unparse()
    {
        $entityIds = $this->getData();

        foreach ($entityIds as $i => $entityId) {
            $product = $this->getProductModel() 
```

# objective-c - CGPDFDocumentCreateWithURL 失败（NSURL 到 CFURLRef 的免费桥接）

> ID：15849081
> 
> 赞同：0
> 
> 时间：2013-04-06T09:17:01.843
> 
> 标签：objective-c, xcode, pdf, core-graphics

我有以下功能：

```
- (void)loadPdfFromPath:(NSString*)path
{   
    NSURL *pathUrl = [NSURL URLWithString:path];

    _pdfDocument = CGPDFDocumentCreateWithURL((CFURLRef)pathUrl);
} 
```

从文档中我相信它会起作用，因为您可以通过[Toll-Free Bridging](https://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html#//apple_ref/doc/uid/TP40010810-CH2)`NSURL*`从一个案例到一个案例。但是，此功能失败，我在日志中得到以下输出：`CFURLRef`

> CFURLCreateDataAndPropertiesFromResource：错误代码 -15。

注意：-15 =`kCFURLImproperArgumentsError`

但是，如果我创建一个实际的`CFURLRef`，它绝对可以正常工作：

```
- (void)loadPdfFromPath:(NSString*)path
{
    CGPDFDocumentRelease(_pdfDocument);

    CFStringRef cgPath = CFStringCreateWithCString(NULL, [path UTF8String], kCFStringEncodingUTF8);

    CFURLRef url = CFURLCreateWithFileSystemPath(NULL, cgPath, kCFURLPOSIXPathStyle, 0);

    _pdfDocument = CGPDFDocumentCreateWithURL(url);

    CFRelease(url);
    CFRelease(cgPath)
} 
```

我错过了什么？我很高兴将第二个函数保留在我的代码中，但我更想知道为什么第一个函数会失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T09:22:36.347

要将文件系统路径转换为 ​​URL，请使用

```
NSURL *pathUrl = [NSURL fileURLWithPath:path]; 
```

`URLWithString`需要一个符合 RFC 2396 的 URL 字符串，例如“http://...”或“file:///...”，包括“scheme”等。

***补充：***实际上`NSURL *pathUrl = [NSURL URLWithString:path];`返回一个有效的对象，所以它*似乎工作*，但从这个 URL 读取（例如`dataWithContentsOfURL`）失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-21T22:20:40.923

您需要将 NSString 转换为 CFStringRef 然后调用 CFURLCreateWithFileSystemPath;

```
CFStringRef aCFString = (__bridge CFStringRef)path;
CFURLRef url = CFURLCreateWithFileSystemPath (NULL, aCFString,  kCFURLPOSIXPathStyle, 0);
NSLog(@"NSURL %@",url); 
```

# php - 更改 Javascript 文件的相对 URL

> ID：15849084
> 
> 赞同：0
> 
> 时间：2013-04-06T09:17:27.067
> 
> 标签：php, javascript, jquery, relative-path

我正在使用 Curl 进行屏幕抓取，如下所示：

```
<?php
$url = "http://www.bbc.com/news/";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);
echo $curl_scraped_page;
?> 
```

然后我在 HTML 页面上回显内容。问题是，当我查看控制台时，由于分配给 javascript 文件的相对 URL，我看到 404 错误。例如，如果 URL 是：`somejavascriptfile.js`在加载页面时添加我的域名，如下所示：`http://mydomain/somejavascriptfile.js`这些路径显然不正确。

那么我该怎么做才能获取 js 文件的实际 URL 呢？如果我可以使用 jQuery (split/replace) 来更改正文中的 URL，但这在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T09:22:02.777

您可以将[`base`](https://developer.mozilla.org/en-US/docs/HTML/Element/base)标签添加到抓取的 HTML。

[使用tidy](http://www.php.net/manual/en/tidy.examples.basic.php)之类的 HTML 解析器打开它，转到 head 部分的开头并附加一个`<base>`标签。基本标签会将所有资源访问重定向到已知位置。

# gwt - 带图像的 GWT TabPanel CSS 样式

> ID：15849086
> 
> 赞同：0
> 
> 时间：2013-04-06T09:17:37.873
> 
> 标签：gwt

我的项目中有一些面板，我无法更改它的默认样式（浅蓝色） - 我想要标签中的图像。我遵循了几个教程，但找不到。

请帮我看看怎么办？

```
TabPanel tabPanel = new TabPanel();

Panel controlPanel = new Panel("Discovery");

tabPanel.add(controlPanel); 
```

...而且我有我的项目 css 和自定义 css。

我们在哪里更改 css 以便修改我们的选项卡面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:53:01.403

[addStyleName](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/UIObject.html#addStyleName%28java.lang.String%29) 和 [setStyleName](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/UIObject.html#setStyleName%28java.lang.String%29) 是您可能正在寻找的方法。[您可以在此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss)找到有关 GWT 中的 CSS 样式的更多一般信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:56:28.327

```
 Panel controlPanel = new Panel("Discovery"); 
```

上面的行真的很吓人。`GWT`你不能像那样实例化[面板类](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Panel.html)，因为面板类在`Abstract`

并采用默认样式

```
TabPanel tabPanel = new TabPanel();
tabPanel.setStylePrimaryName("yourStyle"); 
```

`setStylePrimaryName` 覆盖默认`styles`值。

如果您想为现有的默认样式添加一些额外的 css 类，请使用

```
 tabPanel.addStyleName("myExtraStyles"); 
```

# java - 在我的 servlet 中使用 thymeleaf，找不到 html 模板文件

> ID：15849088
> 
> 赞同：0
> 
> 时间：2013-04-06T09:17:46.003
> 
> 标签：java, servlets, thymeleaf

我正在尝试使用 thymeleaf 读取一个 html 模板，在其中替换一个变量，然后将其作为电子邮件发送。但是我被困在阅读 html 模板文件的部分。

这是我得到的错误：

```
The server encountered an internal error () that prevented it from fulfilling this request.</u></p><p><b>exception</b> <pre>org.thymeleaf.exceptions.TemplateInputException: Error resolving template &quot;invitationemail&quot;, template might not exist or might not be accessible by any of the configured Template Resolvers
    org.thymeleaf.TemplateRepository.getTemplate(TemplateRepository.java:247)
    org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1192)
    org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1148)
    org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1095)
    org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1008)
    org.thymeleaf.TemplateEngine.process(TemplateEngine.java:982)
    yesterscape.ses.SESManagement.sendInvitationEmail(SESManagement.java:69)
    yesterscape.users.InviteUserServlet.doPost(InviteUserServlet.java:68)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

所以我假设这是因为我没有正确设置我的invitationemail.html 文件。

这是读取电子邮件并更改值的代码：

```
ClassLoaderTemplateResolver resolver = new ClassLoaderTemplateResolver();
resolver.setTemplateMode("HTML5");
resolver.setSuffix(".html");
TemplateEngine templateEngine = new TemplateEngine();
templateEngine.setTemplateResolver(resolver);
final Context context = new Context(Locale.US);
context.setVariable("name", nameFrom);
final String htmlVer = templateEngine.process("invitationemail", context); 
```

如您所见，我将后缀设置为 .html，并且在要处理的文件名中我只是输入“invitationemail”。但是还是找不到。

我应该在我的 servlet 体系结构的哪个文件夹中包含invitationemail.html 文件？我认为它应该在 WEB-INF 文件夹中，这是它目前所在的位置，但我仍然没有运气。

感谢您提供任何帮助的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:37:13.313

而不是使用如下的`ClassLoaderTemplateResolver`另一个实现`ITemplateResolver`

```
ServletContextTemplateResolver resolver = new ServletContextTemplateResolver();
resolver.setPrefix("/WEB-INF/template/");
resolver.setSuffix(".html");
resolver.setTemplateMode("HTML5");
// ... etc 
```

并将您的电子邮件模板放入`/WEB-INF/template`文件夹中..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:56:21.080

问题已解决。使用 ClassLoaderTemplateResolver（这是电子邮件内容所需的解析器）时，html 文件应放在以下目录中：

> WEB-INF/类

根据这篇文章回答：http: [//forum.thymeleaf.org/springmail-sample-td3945553.html](http://forum.thymeleaf.org/springmail-sample-td3945553.html)

# python - 从 python 退出时出现“StackHash_0a9e 错误”

> ID：15849090
> 
> 赞同：3
> 
> 时间：2013-04-06T09:17:48.397
> 
> 标签：python, pyqt4

我是python的初学者，我写了一个小程序，当我退出程序时，有时（超过50％的概率）它会显示错误。这是我**退出**程序后才出现的。请你帮我看看是我的代码有问题。

真的感谢。

ps：我在win7 sp1 x64上使用python3.3和pyqt4

**错误：**

```
 问题签名:
 问题事件名称:    BEX
 应用程序名: python.exe
 应用程序版本:    0.0.0.0
 应用程序时间戳:   5150c40a
 故障模块名称:    StackHash_0a9e
 故障模块版本:    0.0.0.0
 故障模块时间戳:   00000000
 异常偏移:  00388100
 异常代码:  c0000005
 异常数据:  00000008
 OS 版本: 6.1.7601.2.1.0.256.1
 区域设置 ID:   2052
 其他信息 1:    0a9e
 其他信息 2:    0a9e372d3b4ad19135b953a78882e789
 其他信息 3:    0a9e
 其他信息 4:    0a9e372d3b4ad19135b953a78882e789 
```

**控制台返回这个：**

进程以退出代码 -1073741819 结束

**主要代码：**

```
import urllib
import http.cookiejar
import time
import sys
from bs4 import BeautifulSoup
from PyQt4 import QtGui
from PyQt4 import QtCore

class BaiduMainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(BaiduMainWindow, self).__init__(parent)
        self.initUI()

    def initUI(self):
        self.centralwidget = BaiduWidget(self)
        self.setCentralWidget(self.centralwidget)
        self.resize(600, 400)
        self.move(QtGui.QApplication.desktop().screen().rect().center() - self.rect().center())
        self.statusBar().showMessage('Ready')

class BaiduWidget(QtGui.QWidget):
    def __init__(self, parent):
        super(BaiduWidget, self).__init__(parent)
        self.initUI()

    def initUI(self):
        lb = QtGui.QLabel('Search Word')
        self.keyWordEdit = QtGui.QLineEdit()
        self.OKButton = QtGui.QPushButton('Search')
        self.containFilter = QtGui.QLineEdit()
        self.exceptFilter = QtGui.QLineEdit()
        self.result = QtGui.QTextBrowser()

        spacerItem = QtGui.QSpacerItem(30, 50)

        grid = QtGui.QGridLayout()
        grid.setSpacing(10)
        grid.addItem(spacerItem, 0, 0)
        grid.addWidget(lb, 1, 0)
        grid.addWidget(self.keyWordEdit, 2, 0)
        grid.addWidget(self.OKButton, 5, 0)
        grid.addItem(spacerItem, 7, 0)
        grid.addWidget(self.result, 0, 1, 8, 1)
        grid.setColumnStretch(1, 4)
        self.setLayout(grid)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    form = BaiduMainWindow()
    form.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:09:29.637

问题是：`spacerItem`已经加了`grid`两次。当你退出程序时，这个对象可能会被 Qt 释放两次。

```
 def initUI(self):
        lb = QtGui.QLabel('Search Word')
        self.keyWordEdit = QtGui.QLineEdit()
        self.OKButton = QtGui.QPushButton('Search')
        self.containFilter = QtGui.QLineEdit()
        self.exceptFilter = QtGui.QLineEdit()
        self.result = QtGui.QTextBrowser()

        spacerItem = QtGui.QSpacerItem(30, 50)

        grid = QtGui.QGridLayout()
        grid.setSpacing(10)
        grid.addItem(**spacerItem**, 0, 0)
        grid.addWidget(lb, 1, 0)
        grid.addWidget(self.keyWordEdit, 2, 0)
        grid.addWidget(self.OKButton, 5, 0)
        grid.addItem(**spacerItem**, 7, 0)
        grid.addWidget(self.result, 0, 1, 8, 1)
        grid.setColumnStretch(1, 4)
        self.setLayout(grid) 
```

您应该使用两个`QSpacerItem`s。

```
 def initUI(self):
        lb = QtGui.QLabel('Search Word')
        self.keyWordEdit = QtGui.QLineEdit()
        self.OKButton = QtGui.QPushButton('Search')
        self.containFilter = QtGui.QLineEdit()
        self.exceptFilter = QtGui.QLineEdit()
        self.result = QtGui.QTextBrowser()

        spacerItem = QtGui.QSpacerItem(30, 50)
        **spacerItem2 = QtGui.QSpacerItem(30, 50)**

        grid = QtGui.QGridLayout()
        grid.setSpacing(10)
        grid.addItem(spacerItem, 0, 0)
        grid.addWidget(lb, 1, 0)
        grid.addWidget(self.keyWordEdit, 2, 0)
        grid.addWidget(self.OKButton, 5, 0)
        grid.addItem(**spacerItem2**, 7, 0)
        grid.addWidget(self.result, 0, 1, 8, 1)
        grid.setColumnStretch(1, 4)
        self.setLayout(grid) 
```

# android - 无法检索访问令牌。状态：twitter android 上的 401ccess 令牌

> ID：15849091
> 
> 赞同：2
> 
> 时间：2013-04-06T09:17:54.910
> 
> 标签：android

我已经从[http://code.google.com/p/socialauth-android/下载了源代码](http://code.google.com/p/socialauth-android/)

它在过去的一个月里完美地工作了。

当我现在检查时，我无法使用推特。它抛出错误。

```
04-06 14:30:12.130: W/System.err(1595): org.brickred.socialauth.exception.SocialAuthException: Unable to retrieve the access token. Status: 401
04-06 14:30:12.130: W/System.err(1595):     at org.brickred.socialauth.util.OAuthConsumer.getAccessToken(OAuthConsumer.java:251)
04-06 14:30:12.130: W/System.err(1595):     at org.brickred.socialauth.oauthstrategy.OAuth1.verifyResponse(OAuth1.java:96)
04-06 14:30:12.130: W/System.err(1595):     at org.brickred.socialauth.oauthstrategy.OAuth1.verifyResponse(OAuth1.java:106)
04-06 14:30:12.130: W/System.err(1595):     at org.brickred.socialauth.provider.TwitterImpl.doVerifyResponse(TwitterImpl.java:174)
04-06 14:30:12.130: W/System.err(1595):     at org.brickred.socialauth.provider.TwitterImpl.verifyResponse(TwitterImpl.java:165)
04-06 14:30:12.130: W/System.err(1595):     at org.brickred.socialauth.SocialAuthManager.connect(SocialAuthManager.java:183)
04-06 14:30:12.130: W/System.err(1595):     at org.brickred.socialauth.android.SocialAuthDialog$SocialAuthWebViewClient$1.run(SocialAuthDialog.java:201)
04-06 14:30:12.130: W/System.err(1595):     at java.lang.Thread.run(Thread.java:1020) 
```

我检查了，回调 url（[https://www.google.co.in/](https://www.google.co.in/)），消费者密钥和权限（读、写和直接消息）

现在我无法访问推特。

问题是什么？为什么无法访问令牌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:37:22.180

* * *

嗨，看看[https://code.google.com/p/socialauth-android/issues/detail?id=46](https://code.google.com/p/socialauth-android/issues/detail?id=46)，它似乎是同一个问题。

Twitter 最近进行了一些尚未反映在 socialauth-android 库中的更改，但 socialauth-android 人员提供了一个新的库 jar（请参阅问题评论）。

# java - 在cmd中从java打印

> ID：15849092
> 
> 赞同：0
> 
> 时间：2013-04-06T09:18:04.720
> 
> 标签：java, jar, cmd

我通过创建一个 jar ( ) 在 Java 中运行我的程序`myProg.jar`，并通过 CMD 运行它：

```
myprog.jar myarguments. 
```

问题是我希望 cmd 等到程序终止，然后打印`System.out.println`我项目中的所有内容。

现在，我运行此命令，程序运行，但它立即在 CMD 中显示我期望我的下一个命令的行，并且不打印或等到我的程序终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:22:39.787

尝试

```
java -jar myprog.jar myarguments. 
```

因为在 Windows 中通过名称调用程序就像双击一样简单地执行它，所以它在后台启动 myprog.jar。运行 JAR 文件的直接方法是调用`java -jar jarfile.jar`.

要阅读有关 JAR 文件工作方式的更多信息，您可以参考Java 教程中的[课程：在 JAR 文件中打包程序。](http://docs.oracle.com/javase/tutorial/deployment/jar/index.html)

# git - Bash shell 脚本错误 sh: [: missing `]'

> ID：15849095
> 
> 赞同：6
> 
> 时间：2013-04-06T09:18:08.530
> 
> 标签：git, bash, shell, unix, bitbucket

**目标：**

我正在尝试创建一个有用的快捷方式来在本地初始化 git repo，同时在 bitbucket 或 github 上创建远程 repo 源。此功能已添加到我`.bashrc`的主目录中的文件中。

**这是 bash 函数（会产生错误）：**

```
function initg() {
 # Defaults to bitbucket API
 local API="https://api.bitbucket.org/1.0/repositories/"
 local DATA="name=$3&description=$4&is_private=true&scm=git"
 local REMOTE="ssh://git@bitbucket.org/$2/$3"

 # Use github if specified
 if [ "$1" == "gh" ]; then
      API="https://api.github.com/user/repos"
      DATA='{"name":"$3", "description": "$4"}'
      REMOTE="git@github.com:$2/$3"
 fi

 if [ -z "$API" ] || [ -z "$DATA" ] || [ -z "$REMOTE" ] || [ -z "$2" ]
 then
      echo "A parameter is missing or incorrect"
 else
      curl -X POST -u $2 ${API} -d ${DATA}
      git init
      git add .
      git commit -m "Created repo"
      git remote add origin $REMOTE
      git push -u origin master
 fi
} 
```

**错误：**

```
username@COMPUTER-NAME /path/to/local/repo
$ initg gh username bash_test desc
sh: [: missing `]'
sh: [: missing `]'
Enter host password for user 'username': 
```

**我的问题：**

首先，我的错误在哪里？其次，我如何改进该脚本的控制流程或结构以实现既定目标？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-08-18T11:55:21.223

我遇到了这种错误，因为我之前没有使用空格 ] 例如：

```
if [ "$#" -ne 2]; then 
```

代替

```
if [ "$#" -ne 2 ]; then 
```

PS：我知道这是一个老问题，但它可能会对某人有所帮助:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T03:20:45.377

我已经多次从 bash 中遇到过这样的废话（一个错误？），而出路是`[ some-condition ]`用`test some-condition`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T12:48:53.473

## 更新/临时答案

好的，严格来说，这不是一个（知情的）答案，但是我已经设法解决了这个问题。

**调试**

`bash -x test.sh`我使用devnull 在原始帖子的评论中建议的命令在单独的专用脚本文件中运行了函数和命令。

这在 shell 中产生了相当多的反馈。在我放弃之前，这是我认为最关键的反馈。

```
username@COMPUTERNAME /d/test
$ bash -x test.sh
+ initg gh username bash_test desc
+ local API=https://api.bitbucket.org/1.0/repositories/
+ local 'DATA=name=bash_test&description=desc&is_private=true&scm=git'
+ local REMOTE=ssh://git@bitbucket.org/username/bash_test
+ '[' gh == gh ']'
+ API=https://api.github.com/user/repos
+ DATA='{"name":"$3", "description": "$4"}'
+ REMOTE=git@github.com:username/bash_test
+ '[' -z https://api.github.com/user/repos ']'
+ '[' -z '{"name":"$3", "description": "$4"}' ']'
+ '[' -z git@github.com:username/bash_test ']'
+ '[' -z username ']'
+ curl -X POST -u username https://api.github.com/user/repos -d '{"name":"$3",' '"description":' '"$4"}'
+ Enter host password for user 'username': 
```

**问题：**

所以问题似乎在于设置了 DATA 的变量表达式（如下）。首先，传递给脚本的参数被引用`$3`并且`$4`不能被插入到单引号字符串中。

```
DATA='{"name":"$3", "description": "$4"}' 
```

此外，逗号和第二个分号后面的空格奇怪地包裹在单引号中，将字符串分成几部分，在结果失败的 curl 调用中可见。

**解析度**

因此，除了使用`[[ ]]`双方括号而不是原始的单数方括号之外，我只是用花括号将每个插值变量包裹起来，`${3}`并修复了在 DATA 变量赋值中使用引号和空格（如下）：

```
DATA="{\"name\":\"${3}\",\"description\":\"${4}\"}" 
```

**发布脚本**

我可以改进这个答案，如果有人可以扩展这个答案，那就太好了。我很困惑为什么`$DATA`curl 调用中使用的变量解析为`'{"name":"$3",' '"description":' '"$4"}'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T13:25:33.837

要提供`DATA`变量，请尝试以下操作：

```
printf -vDATA '{"name":"%s", "description": "%s"}' $3 $4
echo "$DATA" 
```

# javascript - Javascript设置cookie

> ID：15849096
> 
> 赞同：0
> 
> 时间：2013-04-06T09:18:12.017
> 
> 标签：javascript

据说通过 javascript 设置 cookie 不会通过**HTTP 标头**。这背后的原因是什么？为什么 javascript cookie 不通过**HTTP 标头传输**？

```
document.cookie ='ppkcookie1=testcookie'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:20:29.937

如果您修复语法错误（字符串文字~~是~~是，直到问题被编辑，错过了它的结束`'`），然后它确实如此（尽管很明显，直到发出*下一个*HTTP 请求）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:21:34.883

Javascript 设置的 Cookie 在 HTTP 标头中发送，但不是在您设置 cookie 时发送。下次您向服务器发出请求时，它将包含在标头中。

# php - 实现一个支持多种登录方法的用户类

> ID：15849107
> 
> 赞同：2
> 
> 时间：2013-04-06T09:18:46.820
> 
> 标签：php, oop, inheritance

我有一个父类`User`，它有两个子类`User_Instagram`和`User_Email`. 我使用这些类来支持多种登录方法：用户可以选择使用 Instagram、电子邮件或两者都登录（一次使用电子邮件，然后使用 Instagram）。

该类`User_Instagram`包含 Instagram 特定的用户参数（如 InstagramUserId、Bio 等）。该类`User_Email`用于使用电子邮件/密码组合的典型注册。

我试图弄清楚如何以一种 OOP 投诉的方式实现这一点。我需要能够：

1.  `User_Instagram->register($token)`通过调用或注册用户`User_Email->register($email,$password)`
2.  实例化一个`User`类，以便能够访问一般用户信息（如`$userid`）并了解他登录了哪些服务（电子邮件、Instagram 或两者）。

我目前实现的方式有点难以维护——我很确定这是完全错误的（称之为直觉）。

## 当前的班级结构

父类

```
class User {
    protected $userid = NULL;
    protected $loggedInServices = array('instagram'=>0,'email'=>1);
    ...
} 
```

和子类：

```
class User_Instagram extends User {
    private $instagram_userid;
    private $bio;
    private $profile_pic;
    private $token;
    ...

    public function signIn( $token ) { ... }
    public function register( $token ) { ... }
}

class User_Email extends User {
    private $email;
    private $password; # hashed, of course ;)

    public function signIn( $email, $password) { ... }
    public function register( $email, $password, $passport_number) { ... }
} 
```

我最初认为工厂类可能在这里工作，但在那种情况下无法实例化父类。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:37:43.533

为什么要从一个用户类继承来实现一个登录过程。我会把它改成这样的：

```
class User {
    protected $userid = NULL;
    public function setUserId($id) { ... }
    ...
}

class Login_Instagram {
    private $instagram_userid;
    private $bio;
    private $profile_pic;
    private $token;
    ...

    public function __construct(User $user) { ... }
    public function signIn( $token ) { ... $user->setUserId($id); ... }
    public function register( $token ) { ... }
}

class Login_Email {
    private $email;

    public function __construct(User $user) { ... }
    public function signIn( $email, $password) { ... $user->setUserId($id); ... }
    public function register( $email, $password, $passport_number) { ... }
} 
```

要不两次实现构造函数，您可以为此创建一个父类，甚至为该父类中的 setUserId 创建一个父类。但是登录过程不需要在用户类中，尤其是在过程可能不同的情况下。

为什么要将密码哈希存储在对象中？验证用户后，只需设置他的用户 ID，以后就不需要该密码哈希。

# iphone - 在性能、速度、最佳实践等方面删除屏幕上的元素的最佳方法是什么？

> ID：15849111
> 
> 赞同：0
> 
> 时间：2013-04-06T09:19:18.760
> 
> 标签：iphone, ios, performance, alpha

在我的应用程序功能中的许多元素上，它们进出视图（可能在一秒钟内出现几次）

我想要一些建议，关于是否最好从其超级视图中删除视图，或者每次我想要删除/添加它时只需调整 alpha 值（0.0 或 1.0）就可以了。

注意：“更好”可以指性能、速度、最佳实践等。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:51:33.873

如果您不再使用子视图，我建议您将其完全删除。如果它必须重新出现，设置 alpha 值可能会更好。

# python - 如何在使用 execfile 调用的脚本中抑制语句的执行？

> ID：15849113
> 
> 赞同：2
> 
> 时间：2013-04-06T09:19:25.227
> 
> 标签：python, unit-testing

标题中提出的问题可能是[XY-Problem 的](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)一个案例，但我无法找到更简洁的描述。我想通过`execfile(filename)`在每个脚本上运行来测试许多 python 脚本，然后查看它们是否触发断言/抛出异常。到目前为止一切都很好，但他们中的大多数也开始了一个 gui 与一个语句的构造，让我们说`world.show('someString')`。对于自动化测试，我不想看到 gui。如何在不更改脚本本身的情况下抑制 gui？

**编辑：** 关于评论：本质上，我可以这样做：

```
import unittest

class TestExamples(unittest.TestCase):

    def test_firstExample(self):
        execfile('example1.py')

    def test_secondExample(self):
        execfile('example2.py')

    # and many more

if __name__ == '__main__':
    unittest.main() 
```

但是a）有两个以上，我不希望为每个示例编写一个测试函数。我希望他们只是在文件夹中进行测试。这可以通过 unittests 解决`discover`。并且 b)，它们中的大多数以可视化计算结束，就像您使用`matplotlib.pyplot.show()`. 我想抑制这种可视化，而不改变示例本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:22:08.353

这是一个相当简单的选项：假设您有这样的文件`world.py`...

```
def show(text):
    return some_gui_stuff.confirm(text) 
```

...然后创建一个`fakeworld.py`看起来像这样的新文件...

```
def show(text):
    return True 
```

...然后在您的测试脚本中，执行类似...

```
import sys
sys.modules['world'] = __import__('fakeworld')
execfile('example1.py') 
```

`example1.py`尝试时，`import world`它将使用您在测试脚本顶部导入的假版本。

这确实意味着您必须为`world.py`. 如果有很多功能，但只有一两个需要更改，那么制作这样的测试脚本可能会更容易......

```
import world
import fakeworld
world.show = fakeworld.show
execfile('example1.py') 
```

...或者如果`world.show`实际上是唯一的功能，您可能甚至不需要创建`fakeworld.py`- 只需执行类似...

```
import world
world.show = lambda x: True
execfile('example1.py') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:08:52.670

我认为，正确的方法是模拟您正在使用的 GUI（如您问题下方的评论中所述）。

但是“简单的方法”可能是安装[xvfb](http://www.x.org/releases/X11R7.6/doc/man/man1/Xvfb.1.xhtml) - 虚拟帧缓冲 X 服务器（例如对于 Debian，它将是[xfvb](http://packages.debian.org/squeeze/xvfb)包）并使用以下命令运行您的 unittest 脚本：

```
xvfb-run python unittest.py 
```

# java - 骆驼拆分器产生 NotifyBuilder 看到的不正确数量的已完成交换？

> ID：15849116
> 
> 赞同：1
> 
> 时间：2013-04-06T09:19:30.510
> 
> 标签：java, json, apache-camel, splitter, enterprise-integration

我使用骆驼 2.10.3。

假设我有一条如下所示的路线：

```
from("direct:split")
  .routeId("split-ti-analytics-events")
  .split().method(JsonArraySplitter.class,"split")
  .parallelProcessing()
  .log("Received: ${body}")
  .to("stub:direct:somewhere"); 
```

一个测试类在 NotifyBuilder 之后执行此操作以断言我的拆分器正在做它应该做的事情。

```
@Test(description = "Asserts that when we receive a json event that we properly split the " +
            "events if the payload was a json array.")
public void testReceiveTiAnalyticsArrayOfJsonEvents() {
    NotifyBuilder notifier = new NotifyBuilder(context)
      .wereSentTo("stub:direct:somewhere")
      .whenExactlyDone(7)
      .create();
      producerTemplate.sendBody("direct:split", sampleEventsInArrayJsonString);

      assertTrue(notifier.matches(5, TimeUnit.SECONDS));
} 
```

并假设 sampleEventsInArrayJsonString 是一个 json 数组，如下所示：

```
[{},{},{},{},{},{},{}] 
```

该 json 数组中有 7 个对象元素。

测试很快就会失败。但是，测试的输出清楚地显示了“Received: {}”的 7 条日志消息。

现在，这是有趣的部分……如果我在 NotifyBuilder 中设置 .whenExactlyDone(8)，则测试通过。第 8 条信息究竟来自哪里？我只想说这个测试是有效的，并称它为一天，因为我知道它至少从该 json 数组中分离出消息（忽略我没有验证 NotifyBuilder 中的内容的事实），但我担心实际上通过不属于的路由发送了第 8 次交换。NotifyBuilder 看到通过该路线完成的 8 个交换而不是 7 个的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:32:34.800

是的，这是 Camel 中的一个小错误。我已经记录了一张票，并在测试中进行了工作修复 [https://issues.apache.org/jira/browse/CAMEL-6255](https://issues.apache.org/jira/browse/CAMEL-6255)

# jquery - FB.XFBML.parse() 的问题

> ID：15849117
> 
> 赞同：1
> 
> 时间：2013-04-06T09:19:31.380
> 
> 标签：jquery, facebook, load, comments, ready

我正在编写一个与 Facebook 深度集成的网站；通过 js 我调用了一个 php 文件，该文件加载了一个带有一些 FB 评论的外部网页。

```
$('#post{$id1}').load('php/loadPost.php?id={$id1} #single-post');"; 
```

但通常它不会加载应有的评论（我也想知道为什么它不加载，但现在不是重点）。在 .js 文件中有

```
$("#insertHere").on("click", ".well", function(){
     FB.XFBML.parse(this);
}); 
```

这样当我点击该特定帖子时，就会加载 FB 评论；当单个“.well” div 加载时，有没有办法做到这一点？我尝试了 ready() 和 waypoint() 都没有运气。

谢谢！

编辑：我使用 on() 因为所有“好”的 div 都是通过 load() 函数动态创建的，所以你知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:17:05.283

如果有帮助，试试这个：

```
$('#post{$id1}').load('php/loadPost.php?id={$id1} #single-post', function() {
  //alert('Load was performed.');
  FB.XFBML.parse();
}); 
```

# video - Inno Setup - 以相对路径作为初始屏幕的视频文件

> ID：15849118
> 
> 赞同：1
> 
> 时间：2013-04-06T09:19:34.733
> 
> 标签：video, screen, installation, inno-setup, splash-screen

你好亲爱的社区...

我刚刚看到 Inno Setup 的视频闪屏这个主题

[视频文件（带alpha）作为启动画面？](https://stackoverflow.com/questions/11484388/video-file-with-alpha-as-splash-screen)

TLama（Inno Media Player 的作者）提供的示例代码很棒，但它有一个小问题，仅此而已：代码中指向的启动视频文件具有绝对路径，如：d:\Video.avi 所以如果我想发布我的安装程序到其他计算机的绝对路径（如 d:\Video.avi）将不再工作......

因此，我要求作者 (TLama) 修改此脚本并使视频文件飞溅到相对路径，例如：{src} 或 {tmp}。

想问作者的第二个修订是：

我想通过单击窗口的客户区来实现关闭视频播放...在上面的示例代码中不可用...

所以最后我要求 TLama（Inno Media Player 的作者）对以下代码实施两个要求的修订：

```
 [Setup]
AppName=Media Player Project
AppVersion=1.0
DefaultDirName={pf}\Media Player Project

[Files]
Source: "MediaPlayer.dll"; Flags: dontcopy

[Code]
const
  EC_COMPLETE = $01;

type
  TDirectShowEventProc = procedure(EventCode, Param1, Param2: Integer);

function DSPlayMediaFile: Boolean;
  external 'DSPlayMediaFile@files:mediaplayer.dll stdcall';
function DSStopMediaPlay: Boolean;
  external 'DSStopMediaPlay@files:mediaplayer.dll stdcall';
function DSInitializeVideoFile(FileName: WideString; WindowHandle: HWND;
  var Width, Height: Integer; CallbackProc: TDirectShowEventProc): Boolean;
  external 'DSInitializeVideoFile@files:mediaplayer.dll stdcall';

var
  VideoForm: TSetupForm;  

procedure OnMediaPlayerEvent(EventCode, Param1, Param2: Integer); 
begin
  if EventCode = EC_COMPLETE then
    VideoForm.Close;  
end;

procedure OnVideoFormShow(Sender: TObject);
begin
  DSPlayMediaFile;
end;

procedure OnVideoFormClose(Sender: TObject; var Action: TCloseAction);
begin
  DSStopMediaPlay;
end;

procedure InitializeWizard;
var
  Width: Integer;
  Height: Integer;
begin
  VideoForm := CreateCustomForm;
  VideoForm.Caption := 'Popup Video Window';
  VideoForm.BorderStyle := bsNone;
  VideoForm.FormStyle := fsStayOnTop;
  VideoForm.Position := poScreenCenter;
  VideoForm.OnShow := @OnVideoFormShow;
  VideoForm.OnClose := @OnVideoFormClose; 

  if DSInitializeVideoFile('d:\Video.avi', VideoForm.Handle, Width, 
    Height, @OnMediaPlayerEvent)
  then
  begin
    VideoForm.ClientWidth := Width;
    VideoForm.ClientHeight := Height;     
    VideoForm.ShowModal;
  end;    
end;

procedure DeinitializeSetup;
begin
  DSStopMediaPlay;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:39:21.713

`'d:\video.avi'`只需与`ExpandConstant('{tmp}\video.avi')`, 之前调用.交换即可`ExtractTemporaryFile`。

或者，如果您想将视频与设置一起分发（例如在 DVD 上）而不是嵌入其中，请使用`{src}`而不是`{tmp}`，然后跳过`ExtractTemporaryFile`。

到第二个问题。缺少允许将`IVideoWindow`键盘和鼠标消息转发给窗口所有者的消息消耗。在库的更新版本中，消息已发送给所有者，因此请下载最新版本并添加如下代码以通过单击关闭视频窗口：

```
[Code]
procedure OnVideoFormClick(Sender: TObject); 
begin 
  // it's enough to just close the form as it owns the IVideoWindow
  VideoForm.Close;
end;

procedure InitializeWizard;
begin
  VideoForm := CreateCustomForm;
  ...
  VideoForm.OnClick := @OnVideoFormClick;
  ...
end; 
```

# bash - 为什么 sed 不替换所有出现的事件？

> ID：15849119
> 
> 赞同：149
> 
> 时间：2013-04-06T09:19:49.260
> 
> 标签：bash, sed

如果我在 bash 中运行此代码：

```
echo dog dog dos | sed -r 's:dog:log:' 
```

它给出输出：

```
log dog dos 
```

我怎样才能让它替换所有出现的狗？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-04-06T09:23:00.507

您应该添加`g`修饰符，以便 sed 执行模式缓冲区内容的*全局替换：*

```
echo dog dog dos | sed -e 's:dog:log:g' 
```

有关 sed 的精彩文档，请查看[http://www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)。这个*全局*标志在这里解释：http: [//www.grymoire.com/Unix/Sed.html#uh-6](http://www.grymoire.com/Unix/Sed.html#uh-6)

官方文档`GNU sed`位于[http://www.gnu.org/software/sed/manual/](http://www.gnu.org/software/sed/manual/)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-06T09:22:52.807

你必须把 a`g`放在最后，它代表“全球”：

```
echo dog dog dos | sed -r 's:dog:log:g'
                                     ^ 
```

# java - java JFrame中的HTML？

> ID：15849120
> 
> 赞同：0
> 
> 时间：2013-04-06T09:19:49.570
> 
> 标签：java, html, swing, jframe, jeditorpane

我在网上搜索过它，但我发现的唯一解决方案是 JEditorPane ，建议不要使用它，因为它非常弱。除了 JEditorPane 之外，没有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:49:23.980

对 HTML 的`JEditorPane`支持[有限](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/HTMLEditorKit.html)。我会说 use `JWebPane`，但不知何故，该项目似乎停止了。如果您需要便携性，请尝试飞碟：

[http://code.google.com/p/flying-saucer/](http://code.google.com/p/flying-saucer/)

或者如果原生代码没问题，你可以试试 DJ 项目：

[http://djproject.sourceforge.net/ns/](http://djproject.sourceforge.net/ns/)

# python - TypeError：“NoneType”对象不可迭代

> ID：15849123
> 
> 赞同：0
> 
> 时间：2013-04-06T09:20:26.293
> 
> 标签：python, typeerror, non-type

我在 Maya 2012 中收到此错误，不知道如何修复，我试图让 python在搜索文件夹中的其他文件时忽略**初始化文件。**任何建议将不胜感激。

```
Error: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "<maya console>", line 18, in <module>
  File "E:/3D/maya/2012-x64/scripts/RiggingTool/Modules\System\blueprint_UI.py" line 28, in __init__
    self.initialiseModuleTab(tabHeight, tabWidth)
  File "E:/3D/maya/2012-x64/scripts/RiggingTool/Modules\System\blueprint_UI.py", line 50, in initialiseModuleTab
    for module in utils.findAllModules("Modules/Blueprint"):
  File "E:/3D/maya/2012-x64/scripts/RiggingTool/Modules\System\utils.py", line 8, in findAllModules
    for file in allPyFiles:
TypeError: 'NoneType' object is not iterable 
```

**主要代码是**

```
import maya.cmds as cmds

import System.utils as utils
reload(utils)

class Blueprint_UI:
    def __init__(self):
        # Store UI elements in a dictionary
        self.UIElements = {}

        if cmds.window("blueprint_UI_window", exists=True):
            cmds.deleteUI("blueprint_UI_window")

        windowWidth = 400
        windowHeight = 598

        self.UIElements["window"] = cmds.window("blueprint_UI_window", width=windowWidth, height=windowHeight, title="Blueprint Module UI", sizeable=False)

        self.UIElements["topLevelColumn"] = cmds.columnLayout(adjustableColumn=True, columnAlign="center")

        # Setup tabs
        tabHeight = 500
        self.UIElements["tabs"] = cmds.tabLayout(height=tabHeight, innerMarginWidth=5, innerMarginHeight=5)

        tabWidth = cmds.tabLayout(self.UIElements["tabs"], q=True, width=True)
        self.scrollWidth = tabWidth - 40

        self.initialiseModuleTab(tabHeight, tabWidth)

        cmds.tabLayout(self.UIElements["tabs"], edit=True, tabLabelIndex=([1, "Modules"]))

        # Display window
        cmds.showWindow( self.UIElements["window"] )

    def initialiseModuleTab(self, tabHeight, tabWidth):
        scrollHeight = tabHeight # temp value

        self.UIElements["moduleColumn"] = cmds.columnLayout(adj=True, rs=3)

        self.UIElements["moduleFrameLayout"] = cmds.frameLayout(height=scrollHeight, collapsable=False, borderVisible=False, labelVisible=False)

        self.UIElements["moduleList_Scroll"] = cmds.scrollLayout(hst=0)

        self.UIElements["moduleList_column"] = cmds.columnLayout(columnWidth = self.scrollWidth, adj=True, rs=2)

        # First separator
        cmds.separator()

        for module in utils.findAllModules("Modules/Blueprint"):    
            print module 
```

**在文件夹中搜索文件的代码：**

```
def findAllModules(relativeDirectory):
    # Search the relative directory for all available modules
    # Return a list of all module names (excluding the ".py" extension)
    allPyFiles = findAllFiles(relativeDirectory, ".py") 

    returnModules = []

    for file in allPyFiles:
        if file != "__init__":
            returnModules.append(file)

    return returnModules    

def findAllFiles(relativeDirectory, fileExtension):
    # Search the relative directory for all files with the given extension
    # Return a list of all file names, excluding the file extension
    import os

    fileDirectory = os.environ["RIGGING_TOOL_ROOT"] + "/" + relativeDirectory + "/"

    allFiles = os.listdir(fileDirectory)

    # refine all files, listing only those of the specified file extension
    returnFiles = []
    for f in allFiles:
        splitString = str(f).rpartition(fileExtension)

        if not splitString[1] == "" and splitString[2] == "":
            returnFiles.append(splitString[0])

      print returnFiles 
```

当我在 main 中添加此代码时，它会中断

```
 for module in utils.findAllModules("Modules/Blueprint"): 
```

`__init__`如果我添加底部代码，也会在文件搜索代码中出现错误

```
returnModules = []

for file in allPyFiles:
    if file != "__init__":
        returnModules.append(file)

return returnModules 
```

*我不确定我到底是如何得到 NoneType 错误的，因为底部的两个代码对我来说看起来是正确的，有人可以帮忙吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:29:12.160

更改`print returnFiles`为`return returnFiles`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:29:50.937

你没有`returnFiles`从回来`findAllFiles()`，所以它正在返回——这`None`是不可迭代的。

# azure - Azure VM 创建日期

> ID：15849126
> 
> 赞同：4
> 
> 时间：2013-04-06T09:20:44.267
> 
> 标签：azure

是否有任何管理 API 来查找 Azure VM 创建日期？有获取云服务创建日期的托管服务属性 API，但我们无法找到 Azure VM 的创建日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-21T09:33:11.447

1.  您可以在仪表板上看到创建日期包含在磁盘名称中。 [![在此处输入图像描述](https://i.stack.imgur.com/jMgLe.png)](https://i.stack.imgur.com/jMgLe.png)

2.  你也可以使用 Azure Powershell 命令来检索这个：

    ```
    Get-AzureVM -ServiceName myubuntu1 | Get-AzureOSDisk | select MediaLink 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T09:17:41.027

我们可以在 Blob 存储中检索操作系统磁盘文件的创建时间，它相当于虚拟机的创建时间。查看更多[https://social.msdn.microsoft.com/forums/azure/en-US/3da7750a-1a7d-4c62-b58a-a4b427b2520d/get-azure-vm-creationprovision-date](https://social.msdn.microsoft.com/forums/azure/en-US/3da7750a-1a7d-4c62-b58a-a4b427b2520d/get-azure-vm-creationprovision-date)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T19:44:24.730

2016 更新：仍然没有办法以可靠的方式快速获取 VM 创建日期（不，磁盘名称的日期部分不可靠）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-13T20:17:47.810

我最近为这种你可能会觉得有用的东西写了一个函数。

该函数只需要您的租户 ID 和具有正确权限的身份，并将返回您之后的有关 Azure VM 的创建日期、它们所在的资源组、操作系统和 SKU 的数据。

这是功能：

```
Function Get-AZVMCreated {
<#
.SYNOPSIS
Function "Get-AZVMCreated" will connect to a given tenant and parse through the subscriptions and output Azure VM details based on creation date.

.DESCRIPTION
Author: Pwd9000 (Pwd9000@hotmail.co.uk)
PSVersion: 5.1

The user must specify the TenantId when using this function.
The function will request access credentials and connect to the given Tenant.
Granted the identity used has the required access permisson the function will parse through all subscriptions 
and gather data on Azure Vms based on the creation date.

.EXAMPLE
Get-AZVMCreated -TenantId "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

.PARAMETER TenantId
A valid Tenant Id object. e.g: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" <String>
#>

[CmdletBinding()]
param(
    [Parameter(Mandatory = $True,
        ValueFromPipeline = $True,
        HelpMessage = 'Please specify the tenant id? e.g: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"')]
    [string]$TenantId
)

#------------------------------------------------Obtain Credentials for Session------------------------------------------------------------
$Credential = Get-Credential

#---------------------------------------------Get all Subscription Ids for given Tenant----------------------------------------------------
$SubscriptionIds = (Get-AzureRmSubscription -TenantId $TenantId).Id

#-------------------------------------------------Create Empty Table to capture data-------------------------------------------------------
$Table = @()

Foreach ($Subscription in $SubscriptionIds) {
    Write-Host "Checking Subscription: $Subscription. for any Azure VMs and their creation date. This process may take a while. Please wait..." -ForegroundColor Green

    $RMAccount = Add-AzureRmAccount -Credential $Credential -TenantId $TenantId -Subscription $subscription
    Get-AzureRmDisk | Where-Object {$_.TimeCreated -le (Get-Date)} |
            Select-Object Name, ManagedBy, Resourcegroupname, TimeCreated |
            ForEach-Object {
                Try {
                    $ErrName = $_.Name
                    $AzDiskManagedBy = $_.managedby | Split-path -leaf
                    $AzDiskManagedByRG = $_.ResourceGroupName
                    $CreationDate = $_.TimeCreated
                    $OS = (Get-AzurermVM -name $AzDiskManagedBy -ResourceGroup $AzDiskManagedByRG).StorageProfile.ImageReference.Offer
                    $SKU = (Get-AzurermVM -name $AzDiskManagedBy -ResourceGroup $AzDiskManagedByRG).StorageProfile.ImageReference.SKU
                    $Table += [pscustomobject]@{VMName = $AzDiskManagedBy; Created = $CreationDate; ResourceGroup = $AzDiskManagedByRG; OperatingSystem = $OS; SKU = $SKU}
                }
                Catch {
                    Write-Host "Cannot determine machine name associated with disk: [$ErrName]. Skipping drive-check for this item..." -ForegroundColor Yellow
                    Write-Host "Continue Checking Subscription: $Subscription. for any Azure VMs and their creation date. This process may take a while. Please wait..." -ForegroundColor Green
                }
            }
}
$UniqueVMs = $Table | Sort -Unique -Property VMName
$UniqueVMs
Write-Host "" -ForegroundColor Green
Write-Host "Number of disks associated with VMs: $($Table.Count)" -ForegroundColor Green
Write-Host "Number of disks unable to associate with VMs: $($ErrName.Count)" -ForegroundColor Yellow
Write-Host "Number of unique Azure VMs associated with disks: $($UniqueVMs.Count)" -ForegroundColor Green
Write-Host "Script finished.." -ForegroundColor Green
} 
```

然后，您可以调用和使用这样的函数，例如：

```
$TenantId = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
$AZVMsAll = Get-AZVMCreated -TenantId $TenantId | sort-object -property Created
$Win10 = $AZVMsAll | Where-Object {$_.SKU -like "*Windows-10*"} | sort-object -property Created
$Win8 = $AZVMsAll | Where-Object {$_.SKU -like "*Win81*"} | sort-object -property Created
$Win7 = $AZVMsAll | Where-Object {$_.SKU -like "*Win7*"} | sort-object -property Created
$Server2008R2 = $AZVMsAll | Where-Object {$_.SKU -like "*2008-R2*"} | sort-object -property Created
$Server2012R2 = $AZVMsAll | Where-Object {$_.SKU -like "*2012-R2*"} | sort-object -property Created
$Server2016 = $AZVMsAll | Where-Object {$_.SKU -like "*2016*"} | sort-object -property Created
$RHEL = $AZVMsAll | Where-Object {$_.OperatingSystem -like "*RHEL*"} | sort-object -property Created
$Ubuntu = $AZVMsAll | Where-Object {$_.OperatingSystem -like "*Ubuntu*"} | sort-object -property Created
$Centos = $AZVMsAll | Where-Object {$_.OperatingSystem -like "*Centos*"} | sort-object -property Created

$AZVMsAll 
```

在上面的示例中，您还可以使用定义的变量调用其他版本的操作系统，例如对于所有 Win7 机器，您可以调用变量 $Win7 等等等...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-13T17:19:51.137

使用以下 az 命令获取磁盘创建日期...从这个 OS 磁盘创建中，我们可以找到 VM 提供日期：

```
diskquery='[*].{Resourceid:id, name:name, timeCreated:timeCreated}'
az disk list --query "$diskquery" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-06T12:44:15.320

没有办法通过我知道的 Windows Azure API 来获得这个。您是尝试远程获取此值，还是获取它以在实例上使用？

如果您在实例上，您可能会尝试基于 WMI 获取它。它在 PowerShell 中，但您可以适应 C#、VB.NET 或其他可以获取 WMI 信息的脚本语言。

```
[reflection.Assembly]::LoadWithPartialName("system.management")
$wmiSearch = new-object -type System.Management.ManagementObjectSearcher -Arg "Select * from Win32_OperatingSystem"
$data = $wmiSearch.Get()
[System.Management.ManagementDateTimeConverter]::ToDateTime($data.InstallDate) 
```

我在 Azure VM 上进行了尝试，它基本上将 VM 的创建返回给我。不过，您可能希望随着时间的推移测试此结果。此外，这只会让您获得虚拟机实际启动的时间。因此，如果您有一个运行良好的实例 A，那么它的硬盘驱动器出现故障，Fabric 控制器将实例移动到 DC 中的另一个位置并重新启动它，那么安装日期可能就是它的时间感动。这可能正是您正在寻找的，或者可能不取决于您的要求。

# elasticsearch - index.store.fs 是做什么的

> ID：15849127
> 
> 赞同：2
> 
> 时间：2013-04-06T09:20:45.537
> 
> 标签：elasticsearch

我的印象是要使用 mmapfs 存储，我需要做的就是将 index.store.type 设置为 mmapfs，但是我正在阅读这篇文章并看到作者这样做

```
index: 
   store: 
     type: mmapfs 
     fs: 
       mmapfs: 
         enabled: true 
```

所以他基本上做了我所做的然后将 index.store.fs.mmapfs.enabled 设置为 true

我的问题是整个 index.store.fs 部分的作用是什么，我在哪里可以找到有关它的一些文档？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T11:28:17.247

您需要的唯一配置是：

```
index.store.type: mmapfs 
```

我不知道该配置的其余部分是从哪里获取的 - 也许它来自旧版本。

查看配置设置以确保实际支持的最佳位置是代码本身： [https ://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/index/store /IndexStoreModule.java#L57](https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/index/store/IndexStoreModule.java#L57)

关于 mmapfs 的主题，值得阅读此博客条目： [http ://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html](http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html)

# c++ - C ++从字符串中获取数字并进行计算

> ID：15849129
> 
> 赞同：0
> 
> 时间：2013-04-06T09:20:54.780
> 
> 标签：c++, string, count, numbers

我必须编写一个程序，从字符串中获取数字，然后对这些数字求和。

示例：字符串 test="12,20,7"; 结果=50

有人能帮我吗？泰

```
 string stringNumber="12,20,7";   
 vector<int> test;
 vector<int> position;
string help;
int br=0;
int a;
for(int x=0; x<stringNumber.length(); x++)
{
    if(stringNumber.at(x) !=';'){          //save numbers
        help=stringNumber.at(x);
        istringstream istr(help);
        istr>>a;
        test.push_back(a);
        br++;
    }
    if(stringNumber.at(x) ==';'){     //save position of ","
        position.push_back(br);
        br++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:44:54.260

这是一个可能的替代方案，不需要保存分隔符的数字和位置。它也没有使用`std::stringstream`，尽管它可以很容易地重写以使用它而不是`std::atoi()`. 最后，您可以将您喜欢的分隔符作为第二个参数传递给`compute_sum`，默认为`","`：

```
#include <string>
#include <cstdlib>

int compute_sum(std::string const& s, std::string const& delim = ",")
{
    int sum = 0;
    auto pos = s.find(delim);
    decltype(pos) start = 0;
    while (pos != std::string::npos)
    {
        auto sub = s.substr(start, pos - start);
        sum += std::atoi(sub.c_str());

        start = pos + 1;
        pos = s.find(delim, start);
    }

    if (start != pos + 1)
    {
        auto sub = s.substr(start);
        sum += std::atoi(sub.c_str());
    }

    return sum;
} 
```

这是你将如何使用它：

```
#include <iostream>

int main()
{
    std::cout << compute_sum("12,20,7");
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/3SRz1U%24134)。

# websphere-portal - 用于 WebSphere Portal Server 7 的 Lotus Sametime portlet

> ID：15849133
> 
> 赞同：1
> 
> 时间：2013-04-06T09:21:27.310
> 
> 标签：websphere-portal, sametime

我正在尝试将sametime 与websphere 门户服务器7 集成。我想在portlet 中显示sametime 聊天。我搜索了网络，发现“IBM Lotus Sametime 代理服务器升级 WebSphere Portal 7”，但不知道如何继续。甚至在继续之前，是否有人尝试过这个，或者有没有其他更好的方式在 websphere 门户 7 中显示同时聊天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:20:46.727

您必须首先验证是否拥有 Sametime 代理的权利。它不是 Sametime Entry 产品的一部分。无论如何，它是一个服务器组件。如果已安装，则可以与 Portal 7 一起使用，前提是您处于正确的修复级别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T01:45:31.123

这完全取决于您对 Sametime 拥有什么，但如果您有权使用 Sametime 代理服务器，那么您还应该拥有 Sametime 系统控制台。

你有什么版本的 Sametime？这将大大有助于将您指向您需要的东西。

这是 ST 8.5.2.1 吗？还是 ST 9.0？

# java - 将项目添加到最终列表

> ID：15849134
> 
> 赞同：2
> 
> 时间：2013-04-06T09:21:28.233
> 
> 标签：java, android

我有一个最终的字符串列表（它必须是一个最终列表才能在 SetonClickListener 中使用它），当我想将项目添加到这个列表时，它会抛出一个“UnSoppurtedOperationException”

这是日志猫：

```
04-06 09:05:35.585: E/AndroidRuntime(1179): FATAL EXCEPTION: main
04-06 09:05:35.585: E/AndroidRuntime(1179): java.lang.UnsupportedOperationException
04-06 09:05:35.585: E/AndroidRuntime(1179):     at java.util.AbstractList.add(AbstractList.java:404)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at java.util.AbstractList.add(AbstractList.java:425)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at com.example.sale.GroupActivity$MyCustomAdapter$1.onClick(GroupActivity.java:385)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at android.view.View.performClick(View.java:4204)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at android.view.View$PerformClick.run(View.java:17355)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at android.os.Handler.handleCallback(Handler.java:725)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at android.os.Looper.loop(Looper.java:137)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at java.lang.reflect.Method.invokeNative(Native Method)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at java.lang.reflect.Method.invoke(Method.java:511)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-06 09:05:35.585: E/AndroidRuntime(1179):     at dalvik.system.NativeStart.main(Native Method)
04-06 09:05:38.784: I/Process(1179): Sending signal. PID: 1179 SIG: 9
04-06 09:05:39.694: E/Trace(1425): error opening trace file: No such file or directory (2) 
```

这是我的代码：

```
 String name="a";

          String freindsAccepted = groupFreindsAcceptedInside.get(position);

            final List<String> accepted = Arrays.asList(freindsAccepted.split(","));
            final String[] arrayAccepted = accepted.toArray(new String[accepted.size()]);

acceptBtn.setOnClickListener(new View.OnClickListener() {
              @Override
              public void onClick(View arg0) {
                  Thread thread = new Thread()
                  {
                      @Override
                      public void run() {

                          //perform something
                      }
                  };

                  thread.start();

                  accepted.add(name);
                  String[] arrayAcceptedInside = accepted.toArray(new String[accepted.size()]);

                    if(accepted.size()>1) {
                        groupAccepted.setText("Accepted: "+accepted.get(0)+","+ accepted.get(1)+"...see More");
                    }
                    else {
                        groupAccepted.setText("Accepted: "+accepted.get(0));

                    }
              }
          }); 
```

其中第 385 行是：

```
 accepted.add(name); 
```

多谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T09:24:32.163

问题不在于它是最终变量 - 问题在于对象是 的返回值`Arrays.asList`：

```
final List<String> accepted = Arrays.asList(freindsAccepted.split(",")); 
```

从[`Arrays.asList`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)（强调我的）的文档中：

> 返回由指定数组支持的**固定大小的列表。**（将返回的列表“写入”到数组的更改。）

听起来您可能想创建一个新的`ArrayList`（允许添加）：

```
final List<String> accepted = new ArrayList<String>(
    Arrays.asList(freindsAccepted.split(",")); 
```

（顺便说一下，不清楚为什么你有`arrayAccepted`and`arrayAcceptedInside`变量 - 它们只是用于诊断吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:26:24.987

这不是因为变量是 final 的，它是因为 Arrays.asList 返回一个固定大小的列表：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList%28T...%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList%28T...%29)

您可以将其包装在新的 ArrayList 中以解决问题：

```
 final List<String> accepted = new ArrayList(Arrays.asList(freindsAccepted.split(","))); 
```

# sql - 用逗号分割一列

> ID：15849157
> 
> 赞同：0
> 
> 时间：2013-04-06T09:23:27.133
> 
> 标签：sql, oracle

我有返回结果的 oracle 查询

```
Column1  Column2  Column3
  1        -A,D    -DEF
  2        -B,C    -JHI 
```

我怎样才能得到这样的结果

```
Column1 Column2  Column3  Column4
  1       -A       -D      -DEF 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T09:34:17.373

利用`SUBSTRING`函数接收部分字符串和`INSTR`查找逗号位置的函数。

```
select
    column1,
    substring(column2,1,instr(column2,',')-1) as column2a,
    substring(column2,instr(column2,',')+1) as column2b,
    column3
from mytable 
```

示例： [http ://sqlfiddle.com/#!2/ada12/12](http://sqlfiddle.com/#!2/ada12/12)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T09:37:00.810

请试试：

```
select
  Column1, 
  substr(Column2 , 1, instr(Column2, ',')-1) as Column2, 
  substr(Column2 , instr(Column2, ',')+1) as Column3, 
  Column3 as Column4 
from(
      select  1 as Column1, '-A,D' as Column2, '-DEF' as Column3 from dual
)x 
```

# database - 使用关系代数编写以下查询

> ID：15849160
> 
> 赞同：-2
> 
> 时间：2013-04-06T09:23:41.700
> 
> 标签：database, relational-database, relational-algebra

我正在尝试使用关系代数编写以下查询：

```
"Find the names of sailors who reserved a red or a green boat" 
```

这是我的解决方案： ![在此处输入图像描述](https://i.stack.imgur.com/rVkzL.jpg)

但是这本书给出了以下解决方案： ![在此处输入图像描述](https://i.stack.imgur.com/gGEvB.jpg)

书中给出的另一个等效解决方案： ![在此处输入图像描述](https://i.stack.imgur.com/PGsGa.jpg)

最后是相关表格： ![在此处输入图像描述](https://i.stack.imgur.com/nRxxG.jpg)

我的问题是，我们不能在选择运算符中使用“或”符号（V）吗？我的解决方案错了吗？为什么我们需要重命名运算符？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:26:08.690

我在我的 phpmyadmin 中测试了这段代码，它必须可以工作

**选择所有保留的水手，而船只已经创建；**

```
SELECT * FROM sailors INNER JOIN reserves ON reserves.sid = sailors.sid LEFT JOIN boats ON reserves.bid = boats.bid 
```

**具体选择（颜色：红色）；**

使用 WHERE color = 'red'

```
SELECT * FROM sailors INNER JOIN reserves ON reserves.sid = sailors.sid LEFT JOIN boats ON reserves.bid = boats.bid WHERE color = 'red' 
```

**多选（颜色：红色和蓝色）；**

使用 WHERE color = 'red'**或**'blue'

```
SELECT * FROM sailors INNER JOIN reserves ON reserves.sid = sailors.sid LEFT JOIN boats ON reserves.bid = boats.bid WHERE color = 'red' or 'blue' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:17:17.313

还有更多证据表明不存在“关系代数”之类的东西。

至于限制：

您的书/老师似乎遵循限制条件只能是“非常基本”的原则。在某种意义上，如[http://en.wikipedia.org/wiki/Selection_%28relational_algebra%29](http://en.wikipedia.org/wiki/Selection_%28relational_algebra%29)上的 wiki 文章（至少引用了一个属性，一个其他属性或常量值，仅涉及一个比较运算符，没有其他运算符调用允许，例如 SIN(angle attr) 或 MONTH(datetime attr) 或 ...)。

但是这种限制（在限制条件下）是不必要的。[http://en.wikipedia.org/wiki/Relational_algebra#Selection_.28.CF.83.29](http://en.wikipedia.org/wiki/Relational_algebra#Selection_.28.CF.83.29)上关于关系代数的 wiki 文章明确表示“......是一个由......和逻辑运算符 AND 组成的命题公式，或不 ...”。

至于重命名：

关系代数中的 RENAME 运算符用于生成与输入不同的关系值，仅在于某些**属性**具有“更改名称”。

您的书/老师显然使用称为“重命名”的运算符为某些指定的**关系表达式**（在您的示例中为 UNION）**分配名称。**那甚至不是代数运算！

 **（虽然在语言设计中为用户设计一种“命名表达式”的可能性是一个有效且有用的想法，但他随后可以仅使用指定的名称进行引用，这是**语言设计的问题，而不是关系代数的问题**！ )**

# list - 如何拥有第二个元素是列表的对？

> ID：15849161
> 
> 赞同：1
> 
> 时间：2013-04-06T09:23:52.930
> 
> 标签：list, scheme

我想要一对，其第二个元素*可以*是符号或列表。例如，`'(x . y)`并且`'(x . (a b c d))`在我的上下文中都是有效的对。如果第二个元素只是一个符号，我可以得到一对`cons`，但如果它是一个列表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:26:39.293

然后你仍然使用`cons`方案打印机只是在打印这些对而不是其他对时更好。这是他们看起来不同的唯一原因。

```
> (define x '(1 2 3))
> (car (cons 0 x))
  0
> (cdr (cons 0 x))
  (1 2 3) 
```

方案列表实际上只是由这个公式递归定义的

1.  列表是一对数据和一个列表
2.  `'()`是一个列表。（真的这完全是武断的，可以是任何东西，`'()`只是一个非常强大的传统）

![这是一张漂亮的照片。](https://i.stack.imgur.com/YGDtn.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:26:01.360

你仍然可以用`cons`它来做。

```
(cons 'x '(a b c d))   ; => (x a b c d) 
```

# javascript - 如果浏览器一定大小，删除 jQuery 效果？

> ID：15849170
> 
> 赞同：3
> 
> 时间：2013-04-06T09:24:46.143
> 
> 标签：javascript, jquery, browser, responsive-design

我正在构建一个响应式布局并使用一些 jQuery 插件，例如选项卡、下拉菜单、滚动到顶部等，我正在努力解决的一件事是，一旦浏览器处于最小位置，如何消除 jQuery 的魔力?

目前它在较小的视图中看起来很糟糕，所以如果您不介意，我只是在寻找一些指针或代码示例。

例如，如果有一个 jQuery IF 浏览器视点是 =< 320px 那么不要运行等？

在发帖之前我先做了一些研究，希望专家可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:30:58.700

一种方法是尝试将宽度条件包装在[**$(window).resize**](http://api.jquery.com/resize/)事件中：

```
$(document).ready(function(){
   $(window).resize(function() {
      if ($(window).width() <= 320) {
         // Leave empty
      }
      else {
        // Rest of your jQuery code can go here
      }
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:33:00.253

```
$(window).resize(function(){
    var h = $(window).height();
    var w = $(window).width();

    if(w <= 320) {
         // Run your script
    }
}); 
```

但我建议您使用 CSS3[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来构建响应式网页设计。

> 媒体查询由媒体类型和至少一个表达式组成，该表达式通过使用媒体特征（例如宽度、高度和颜色）来限制样式表的范围。在 CSS3 中添加的媒体查询让内容的呈现可以针对特定范围的输出设备进行定制，而无需更改内容本身。

例如：

```
@media only screen and (max-width : 320px) {
    /* Your styles here */
} 
```

# iphone - 左侧单点触控 iphone 上带有圆角的 UIImage

> ID：15849173
> 
> 赞同：2
> 
> 时间：2013-04-06T09:25:11.893
> 
> 标签：iphone, uitableview, xamarin.ios, uiimageview

我想为我的表格视图创建一个单元格，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/zsj9a.png)

如您所见，在这个单元格中，我有一个 UIImage，它的左侧有一些圆角半径。我使用此代码将cornerradius添加到我的UIImage：

```
 ThumbnailImg .Layer .CornerRadius = 7.0f;
ThumbnailImg .Layer .MasksToBounds = true ; 
```

但我不知道如何为 uiimage 的 let 设置半径。

我猜的另一个解决方案是更改 uiimageview，使其左角与单元格的角匹配（我在每个部分中使用分组表宽度 1 行），因此边框将自动创建。但是对于这种方式，我也不知道我应该做什么：-s。

我也为objective-c找到了这个解决方案。任何人都可以帮助在 monotouch iphone 上使用它吗？

[https://stackoverflow.com/a/4930166](https://stackoverflow.com/a/4930166)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:12:42.433

子类`UIImageView`以允许它通过`UIBezierPath`.

示例`UIView`：

```
public class UIViewCustomRounded: UIView
{
    // Inspired by:
    // https://stackoverflow.com/questions/4847163/round-two-corners-in-uiview
    // https://stackoverflow.com/questions/2264083/rounded-uiview-using-calayers-only-some-corners-how/
    public UIViewCustomRounded (): base()
    {
    }

    /// <summary>
    /// Sets the corners.
    /// </summary>
    /// <param name="corners">Corners.</param>
    /// <param name="cornerRadius">Corner radius.</param>
    public void SetCorners(UIRectCorner corners, float cornerRadius)
    {
        var maskLayer = new CAShapeLayer();
        maskLayer.Frame = Bounds;
        var roundedPath = UIBezierPath.FromRoundedRect(maskLayer.Bounds, corners, new SizeF(cornerRadius, cornerRadius));
//          maskLayer.FillColor = UIColor.White.CGColor;
//          maskLayer.BackgroundColor = UIColor.Clear.CGColor;
        maskLayer.Path = roundedPath.CGPath;

        //Don't add masks to layers already in the hierarchy!
        Layer.Mask = maskLayer;
    }
} 
```

用法：

```
var a = new UIViewCustomRounded()
// Don't forget to set frame and add it as subview
a.SetCorners(UIRectCorner.BottomLeft | UIRectCorner.BottomRight, 10); 
```

只要`UIImageView`是 的子类`UIView`，它也应该适用`UIImageView`。

[参考答案](https://stackoverflow.com/a/4936555/548395)。

# java - 处理无法映射到 SOA 中的一个前端页面的错误

> ID：15849174
> 
> 赞同：0
> 
> 时间：2013-04-06T09:25:14.737
> 
> 标签：java, web-services, soa

我目前正在研究 SOA 中的前端解决方案，并且在保存域对象时遇到了麻烦。

后端给了我相当大的域对象，它们也被保存为一个整体。另一端的前端将这些数据拆分为多个页面和子页面。

**在分享我的实际问题之前，我想提供一些背景信息：**

我们系统中的大多数任务都是自动化的，使用流程引擎、与 Web 服务对话和规则引擎。只有当输入数据不正确时才需要前端，以便人们需要更正它。前端的输入由 web 服务保存，当用户认为一切正确时，他将域对象传递回流程引擎。

**即将出现的问题的简单示例**

域对象（基本上是根实体）

*   显示在页面 A 上的实体 1（以及来自根实体的一些字段）
*   实体 2 显示在页面 B

该**过程识别每个实体中的错误并标记它们**。给用户一个任务，前端加载域对象，显示页面 A。用户更正字段，当他移动到页面 B 时，应该保存输入，这样他已经完成的工作不会丢失。

**问题：**

负责保存域对象的 web 服务将抛出 ValidationException 因为**实体 2 仍然有错误**。您可能想知道最初是如何保存不正确的数据的？好吧，Web 服务公开了两种保存服务，一种称为“自动”，一种称为“手动”。操作 automaticSave 允许无效数据，因为流程引擎为返回的每个错误创建标记。manualSave 当前不允许出错。

**我正在寻找如何解决这个问题的建议。**

我认为这应该是 SOA 中一个相当普遍的问题。如果我错了，请纠正我:-)

一种方法是前端中的数据仅存储在会话中，用户必须修复所有错误才能持续存在，但在可用性方面我认为这不是最好的主意。

另一个想法可能是在后端进行部分验证，但这为输入错误数据打开了大门

我的最后一个想法是将流程引擎标记的错误传递给 manualSave，以便 web 服务知道*“嘿，这个字段之前有错误，所以当只有这个无效时我不会抛出 ValidationException”*

我期待着你的想法。

**[更新]** 在初始答案之后，我更新了域对象的结构。似乎这个问题可以扩展到*“如何设计一个好的网络服务”* :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:47:52.083

我认为这里有几个问题。我看到的第一个问题是在您的 Web 服务上有两个不同的操作，用于您试图坚持的聚合。聚合是指将域对象保存在一个事务中（作为一个整体）。最终你的问题是你没有为你试图自动保存的实体强制执行你的不变量。自动保存和手动保存没有区别——您仍在保存。在一个操作中，您说可以忽略否则会使实体无效的属性，而在另一个操作中，您实际上是在强制执行不变量，如果您不包含此数据，它就不是有效的域对象。

我只能假设您这样做是为了获得域对象的部分持久性，以便您可以容纳需要 ID 的多页步骤。自动保存操作保留部分域对象并返回一个 ID，因此您可以执行更新操作（手动保存）以确保正确完整地保存实体。

我认为您将实体数据存储在内存中的最初想法是一种更好的方法。我唯一要补充的是，您的服务持续存在的聚合的 ID 是在客户端上创建的，而不是由您的后端系统创建的。

这允许您从一个页面传递到另一个页面并根据需要更新尽可能多的模型（实体 1 和实体 2），以保持有效的聚合实体。每个视图模型都可以有自己的客户端验证，而不会影响另一个（您仍然可以拥有作为备份运行的服务器端验证）。

当您准备好保存域对象（作为一个整体）时，只需将视图模型（实体 1 和 2）映射到它并保存。然后，您可以确定域对象已考虑所有不变量，并且应该无错误地持续存在。鉴于您已经在客户端创建了 ID，因此无需往返。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:46:50.367

Some observations:

*   (Minor) The names **automaticSave** and **manualSave** possibly leak a small amount of implementation details into the interface. These names seem to reflect the behind-the-scenes processing, rather than the client's idea of what is happening.
*   (Major) The same **manual save** is called twice from different contexts (page A and page B). In both cases the client provides Entity1 and Entity2, indicating that 2 entities should be processed each time. This is misleading & inefficient interface design.

I suggest the following:

1.  (Minor) Rename **automaticSave** to either **backgroundSave** or **saveRequest**. It does asynchronous processing (calls the process engine).
2.  (Minor) Rename **manualSave** to **save**. It does synchronous processing (validation, data persistence, error reporting and return response from within the method).
3.  (Major) Add two additional parameters to the **save** operation (and optionally, to the **backgroundSave** operation): **isEntity1Updated** & **isEntity2Updated** both of type boolean. Only perform validation, data persistence and error reporting for each entity if the corresponding flag is true.

Advantages:

*   Promotes flexibility, reusability & maintainability of your save operations - especially the validation of entities. Interface supports synchronous & asynchronous processing of singular & combined entities.
*   (Minor) Tightens up encapsulation by using client-specific terminology.
*   Allows you to follow your desired user workflow - page A corrections, then save entity 1, then page B corrections, then save entity 2
*   Good usability - page A corrections are not discarded just because of an error on page B (or lack of user follow-through to page B)
*   Can still throw ValidationException during manual save - but only for the relevant entity that was just edited
*   (Minor) Minimises network traffic - if an entity is not updated a null can be passed instead of passing a non-updated entity which will be ignored.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T23:08:30.750

嗯，关于如何设计一个好的 SOA 的书籍已经写过，所以我不会在这里讨论它。似乎您处于“完成”模式，在这种情况下，我建议当用户提交页面 A 时，使用“自动保存”保存对象，因为您仍然允许错误。只有当用户的任务完成时，您才会使用“manualSave”。我不会以这种方式设计系统，但如果坚持使用这种方式，这似乎是最合理的方式，因为这符合服务客户的期望和服务合同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:08:12.237

我想帮助你，但我需要了解更多细节。

> 只有当输入数据不正确时才需要前端，以便人们需要更正它。前端的输入由 web 服务保存，当用户认为一切正确时，他将域对象传递回流程引擎。

域对象是什么意思？后端不能返回任何域对象，因为如果系统分层正确，域对象将保留在域层中，并且您正在与 API 层/服务层对话，所以您最多得到的是域对象。你可能看起来一样，但语义完全不同。

所以当你拿到代表一个领域对象的对象时，你说的是实体 1 和实体 2，但它们是什么？什么协议（REST，SOAP）？

您也可以向我们提供网络服务的方法吗，您正在参考验证服务和其他保存服务，所以我只想确保我了解所有内容。

> 一种方法是前端中的数据仅存储在会话中，用户必须修复所有错误才能持续存在，但在可用性方面我认为这不是最好的主意。

到目前为止，根据您的输入，这是唯一的方法，但不要忘记您总是有两个验证阶段，在前端和域中。

谢谢

**更新**

按照我的回复：

> 为了有效地使用 SOA，架构必须满足以下要求： 不同系统和编程语言之间的互操作性，为不同平台上的应用程序之间通过通信协议进行集成提供了基础。这种通信的一个例子取决于消息的概念。跨定义的消息通道使用消息降低了最终应用程序的复杂性，从而允许应用程序的开发人员专注于真正的应用程序功能，而不是通信协议的复杂需求。渴望建立资源联盟。建立和维护到联合数据库系统的数据流。这允许开发新功能以引用每个数据元素的通用业务格式

公平地说，调用 Web 服务的 Web 服务就是 SOA。

# php - 发送请求时xcode不支持的URL

> ID：15849175
> 
> 赞同：0
> 
> 时间：2013-04-06T09:25:22.217
> 
> 标签：php, iphone, xcode, http

我正在尝试向运行 Apache 服务器的计算机发送 GET Http 请求。当我使用 sendSynchronousRequest 从 XCODE 向 XXXX\my_script.php 发送请求时，我得到一个响应 - 不支持的 URL。但是，如果我尝试使用我的浏览器连接到这个地址，它就可以正常工作。

有什么建议么？它不支持包含IP的地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:27:17.973

在您的请求中更改斜杠：`X.X.X.X/my_script.php`

# c++ - 我必须在类的头文件中提及私有方法吗？

> ID：15849176
> 
> 赞同：9
> 
> 时间：2013-04-06T09:25:23.303
> 
> 标签：c++, class, header-files

现在我根本不使用头文件。每个类都完全在一个`.cpp`文件中。但是为了节省编译时间，我现在想使用头文件。我希望 Visual Studio 不会编译那些没有为调试构建而修改的类。

有没有办法在头文件中只提及公共方法和成员。从理论上讲，这对于编译器来说已经足够了。如果另一个文件，比如说`main.cpp`包含类头，就不需要私有方法和成员，是吗？

如何在不重新键入私有方法和成员的名称的情况下使用头文件？我想要的原因是编码效率。当我想为另一个方法使用的类添加一个小帮助函数时，我不想将它的签名也添加到头文件中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T09:29:03.647

> 如果另一个文件，比如 main.cpp 包含类头，则不需要私有方法和成员，是吗？

不，`public`方法和成员不一定足够。例如，如果另一个`.cpp`文件要尝试创建您的类的实例：

```
SomeClass instance; 
```

除其他事项外，编译器将需要知道要为`SomeClass`. 为此，它需要完全了解`SomeClass`的私有数据成员。

您提出问题的方式听起来好像您打算与语言作斗争。我认为这不是一个好方法。我认为最好的方法是按照通常用你选择的语言做事的方式来做事，只有在有特定的、明确理解的需求时才离开。

通常在 C++ 中做事的方式是*整个*类声明放在头文件中，并且定义以某种方式在头文件和相应的`.cpp`文件之间进行拆分。确切的拆分取决于各种技术考虑。例如，模板和内联函数通常必须出现在头文件中。另一方面，将代码放在头文件中会增加依赖关系并可能增加构建时间。

有一些方法可以解决这些问题。然而，由于这涉及额外的复杂性，我认为只有在有明确可识别的需求时才应该这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T09:29:18.713

所有函数*声明*都应该放在头文件中，所有函数*定义*都应该放在 cpp 文件中。将声明放在 cpp 文件中并不是一个好的编码习惯。

但是，当您编写模板或内联函数时，您可以将定义放在标题中。

一旦你在头文件中声明了类，你必须在头文件的类声明中声明它的所有方法和成员，因为你的类**不再在 cpp 文件中声明**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-06T09:35:30.460

我不知道有什么方法可以按照您的要求进行操作，但是还有另一种方法可以提供一些隔离。您可能想看看[pimpl idiom](http://c2.com/cgi/wiki?PimplIdiom)，因为它提供了对私人信息的隔离。这是一些额外的工作，但它可能非常有用，尤其是在大型项目中。

# security - 如何知道计算机对象何时添加到安全组

> ID：15849177
> 
> 赞同：-1
> 
> 时间：2013-04-06T09:25:24.437
> 
> 标签：security, powershell, active-directory

我需要检查我的组织中的一台服务器何时添加到安全组，是指哪个日期或如果可能的话检查谁添加了它？是否有任何我可以检查的 power shell 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:09:48.207

要获得所需的信息，您首先需要确保审核您想要的 AD 更改。尝试在 google 上搜索“Active Directory 审计安全组”，或者直接访问第一个结果：[Auditing Group Membership Changes in Active Directory](http://whatevernetworks.com/?p=21)。

启用它后，对帐户的更改将被审核/记录在域控制器上的安全日志中。现在您可以简单地使用 PowerShell 来搜索它。前任。如果该组是全局安全组，则添加成员的 eventid 为`632`. 因此，要搜索组“FOO”，请使用：

```
Get-EventLog -LogName Security -InstanceId 632 -Message "*FOO*" 
```

这应该（没有使用 atm 验证的测试实验室。）包括谁进行了更改，谁被添加到了哪个组（FOO）以及何时完成。该事件只会显示在请求发送到的域控制器上（！）。

如果您有多个域控制器（如您所愿），则应使用事件订阅将事件收集到中央服务器或工作站。您还可以使用 WMI 订阅在发生类似的新事件时运行脚本。在 SO 或 google 上的简单搜索将向您展示如何做到这一点。

**编辑**如果对我投反对票的人稍后阅读此内容，请您发表评论并说明原因。当你从来没有得到反馈时，很难改进。答案包括解释和解决方案，包括必要的 PowerShell 命令，所以我看不出我做错了什么。

# jquery - 加载时元素的jQuery位置

> ID：15849179
> 
> 赞同：-2
> 
> 时间：2013-04-06T09:25:40.770
> 
> 标签：jquery, css

我正在使用 jQuery 应用一些 CSS 规则来在我的页面上放置多个对象。但是首先加载页面，然后完成 css 规则。

因此，您会看到元素位置错误的页面，然后一切都移动到正确的位置。

有没有办法解决这个问题？

示例：[http](http://mactua.eu/mactua3/index.php?language=nl) ://mactua.eu/mactua3/index.php?language=nl （检查按钮）

PS我知道我的jquery代码是一团糟，但我没有给出太多关于它的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:33:03.490

您可以添加`display:none`到类的 CSS 中`more_button_container`。然后在您的 jquery 代码的末尾，您可以使用：

```
$('.more_button_container').show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:32:49.440

放：

```
body { visibility: hidden; } 
```

在您的 CSS 文件中。然后让您的 jQuery 代码重新定位所有内容并执行以下操作：

```
$("body").css("visibility", "visible"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:55:58.360

我建议您提供一个初始 CSS 文件，它将所有元素移动到第一个位置。想象一下有人打开您的网站，但不允许使用 JavaScript。这将是一团糟。这将解决您的问题。

您可以使用 CSS 放置所有框和按钮，无需 JavaScript。如果要使按钮居中，则需要执行以下操作：[jsFiddle centered a tag](http://jsfiddle.net/maxstoyanov/h58xq/)

要使块元素居中，您只需要此 CSS 代码

```
width: 80px;
margin: 0 auto; 
```

例如，如果它不是像标签这样的块元素，您将需要另外的`display: block;`规则。

# algorithm - 在给定约束的图中找到总的不同路径

> ID：15849182
> 
> 赞同：0
> 
> 时间：2013-04-06T09:25:51.943
> 
> 标签：algorithm, graph

您将获得一个包含 k+1 个节点的图，其中一个节点标记为原点，数字 N 是所需的路径长度。

假设所有节点彼此相距单位距离。

当您必须从原点开始并在旅程结束时返回原点时，找出可能的不同不同路径的数量。

您可以根据需要多次访问任何 k+1 个节点，以满足结束必须发生在原点的条件。

为问题编写一个算法。将 k 和 N 作为 2 个输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:44:29.150

把它简化为一个系列问题。

假设 M = 4 和 K = 2。{ M 是总路径长度}

所以我们可以有邻接矩阵

![在此处输入图像描述](https://i.stack.imgur.com/SVL3y.gif)

从 A[0][0] 开始和结束的长度为 2 的路径的总数将是该矩阵正方形的左上角元素。这是

![在此处输入图像描述](https://i.stack.imgur.com/3GElI.gif)

因此，通过将其提高到 N 次方，我们将得到答案。通过一些尝试，这是我得到的公式

![在此处输入图像描述](https://i.stack.imgur.com/kVy58.gif)

# prolog - 在序言中解决导致错误？

> ID：15849184
> 
> 赞同：0
> 
> 时间：2013-04-06T09:26:02.673
> 
> 标签：prolog

我尝试使用类似于此链接的代码：

[在 Prolog 中解决文本逻辑难题 - 查找生日和月份](https://stackoverflow.com/questions/12253974/solving-a-textual-logic-puzzle-in-prolog-find-birthday-and-month)

我要解决的问题是这个（电话对话）。 [http://www.cis.upenn.edu/~matuszek/cis554-2012/Assignments/prolog-01-logic-puzzle.html](http://www.cis.upenn.edu/~matuszek/cis554-2012/Assignments/prolog-01-logic-puzzle.html)

我的代码：

```
dated(Date):-
member(Date,[1928,1929,1932,1935]).
exchanged(Exchange):-
member(Exchange,[al,be,pe,sl]).

solve(X):-
X=[[gertie,Exchange1,Date1],
   [herbert,Exchange2,Date2],
   [miriam,Exchange3,Date3],
   [wallace,Exchange4,Date4]],

exchanged(Exchange1), exchanged(Exchange2), exchanged(Exchange3), exchanged(Exchange4),
Exchange1 \== Exchange2, Exchange1 \== Exchange3, Exchange1 \== Exchange4,
Exchange2 \== Exchange1, Exchange2 \== Exchange3, Exchange2 \== Exchange4,
Exchange3 \== Exchange1, Exchange3 \== Exchange2, Exchange3 \== Exchange4,
Exchange4 \== Exchange1, Exchange4 \== Exchange2, Exchange4 \== Exchange3,

dated(Date1), dated(Date2), dated(Date3), dated(Date4),
Date1 \== Date2, Date1 \== Date3, Date1 \== Date4,
Date2 \== Date1, Date2 \== Date3, Date2 \== Date4,
Date3 \== Date1, Date3 \== Date2, Date3 \== Date4,
Date4 \== Date1, Date4 \== Date2, Date4 \== Date3,

%Herbet's first exchange wasn't for BE
Exchange2 \== be,

%The Person whose first exchange was SL wasn't Getie or Herbert
Exchange1 \== sl,
Exchange2 \== sl,

%The person whose first exchange was BE didn't get the phone in 1935
member([_,be, \+1935], X),

%The person who got the first phone in 1932 didn't have an exchange for AL or BE
member([_, \+al, 1932], X),
member([_, \+be, 1932],X),

%The person who got the first phone in 1928 had an exchange for PE
member([_,pe,1929], X),

%Wallace first exchange was AL
Exchange4 == al. 
```

我的问题是这样的：

```
?- solve(X).
 false. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:02:49.780

所以你的问题是，你的`solve`谓词没有找到任何解决方案。这意味着，对于解决方案树中的所有可能路径，找到解决方案的先决条件之一都失败了。

您是否真的尝试搜索它是哪一个？当然不是，否则你会注意到：

```
member([_,be,\+1935],X) 
```

总是失败。为什么？是什么`\+/1`？“如果*目标*不能被证明，`\+ :`*目标就是真实的”。*换句话说，您不能用于匹配。相反，你可以写：*`\+`*

 *```
\+ member([_,be,1935),X). 
```

因此，所有更正：

```
?- solve(X).
X = [[gertie, be, 1928], [herbert, pe, 1929], [miriam, sl, 1932], [wallace, al, 1935]] ;
false. 
```

假设程序的其余部分是正确的。

使用 stackoverflow 作为调试代码的替代方法真的很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:15:37.787

代替

```
exchanged(Exchange1), exchanged(Exchange2), exchanged(Exchange3), exchanged(Exchange4),
Exchange1 \== Exchange2, Exchange1 \== Exchange3, Exchange1 \== Exchange4,
Exchange2 \== Exchange1, Exchange2 \== Exchange3, Exchange2 \== Exchange4,
Exchange3 \== Exchange1, Exchange3 \== Exchange2, Exchange3 \== Exchange4,
Exchange4 \== Exchange1, Exchange4 \== Exchange2, Exchange4 \== Exchange3,

dated(Date1), dated(Date2), dated(Date3), dated(Date4),
Date1 \== Date2, Date1 \== Date3, Date1 \== Date4,
Date2 \== Date1, Date2 \== Date3, Date2 \== Date4,
Date3 \== Date1, Date3 \== Date2, Date3 \== Date4,
Date4 \== Date1, Date4 \== Date2, Date4 \== Date3, 
```

你可以写

```
permutation([al,be,pe,sl], [Exchange1, Exchange2, Exchange3, Exchange4]),
permutation([1928,1929,1932,1935], [Date1, Date2, Date3, Date4]), 
```*

# python - 谷歌应用引擎 - 不工作？

> ID：15849186
> 
> 赞同：-1
> 
> 时间：2013-04-06T09:26:07.980
> 
> 标签：python, google-app-engine

```
class MainPage(webapp2.RequestHandler):
 def get(self):
  self.response.write('test')

app=webapp2.WSGIApplication([('/',MainPage)],
                              debug=True) 
```

这只是一直给我一个错误，我不知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:30:20.053

代码差不多了，只有一个问题。您从 webapp2 继承它，但没有 webapp2。

将此添加到您的代码中：`import webapp2`

# codeigniter - 活动记录和加入特定 ID 行

> ID：15849193
> 
> 赞同：0
> 
> 时间：2013-04-06T09:26:49.653
> 
> 标签：codeigniter, join

这是我的问题：

*   我有一个控制器叫做：事件
*   我有一个视图叫做：inscrits_liste
*   我有一个模型叫做：inscrits_model

我的查询需要处理 2 个表：

表 1 : inscrits
表 2 : etats

第三个表名为：事件

在我的表“etats”中

我有 'etat_id' 和 'etat_lib'

我想从 1“inscrit”中获取详细信息，其中包含指定事件 ID 的“etat”库。

**事件.php**

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Events extends MY_Controller
{

    public function __construct()
    {
        parent::__construct();

        $this->load->model('event_model', 'event_m');             // Modele des évènements
        $this->load->model('inscrits_model', 'inscrits_m');             // Modele des inscrits
        $this->template->title('Gestion des évènements');
        $this->template->data('titre', 'EVENTS');
        $this->is_validated();
    }

    public function index()
    {
        // Preparation du template

        $this->template->data('heading', 'Liste des evènements');
        $this->template->widgets('content', 'events_list');

        try
        {
            // On recupère la liste des events
            $this->template->data('evt', $this->event_m->get_all(array(), array('evenement_title ASC')));

            // On charge le template
            $this->template->load();
        }
        catch (Exception $e)
        {
            echo $e->getCode() . " => " . $e->getMessage();
        }
    }

    public function inscrits($event_id)
    {
        // Preparation du template

        $this->template->data('heading', 'Liste des inscrits');
        $this->template->widgets('content', 'inscrits_liste');

        try
        {
            // On recupère la liste des inscrits
            $this->template->data('inscrits', $this->inscrits_m->inscrits_event($event_id));

            // On charge le template
            $this->template->load();
        }
        catch (Exception $e)
        {
            echo $e->getCode() . " => " . $e->getMessage();
        }
    }

} 
```

**该模型 ：**

```
<?php

class inscrits_model extends MY_Model
{

    protected $table = 'inscrits';
    protected $primary = 'inscrits_id';

    public function inscrits_event($event_id)
    {

        $this->db->select('inscrits_id,inscrits_pseudo,inscrits_nom,inscrits_prenom,inscrits_email,etat_lib');
        $this->db->from('inscrits');
        $this->db->join('etats', 'inscrits.inscrits_etat_id = etats.etat_id', 'inner');
        $this->db->where('inscrits_evenement_id', $event_id);
        $joint = $this->db->get();
        return $joint;
    }

}

/* End of file admin_model.php */
/* Location: ./application/models/admin_model.php */ 
```

问题是使用特定的 event_id 在当前事件的 1 inscrit 上发出请求。

我找不到机制：s

我知道模型进行查询，控制器使用模型将数据发送到视图。但就我而言，在模型中，我想使用视图中一行给出的数据（当前 event_id）。

我迷路了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:43:41.047

这是你的问题

```
 $joint = $this->db->get();
    return $joint;//this is not returning the results :) 
```

你所要做的：

```
 public function inscrits_event($event_id)
    {
$this->db->select('inscrits_id,inscrits_pseudo,inscrits_nom,inscrits_prenom,inscrits_email,etat_lib');
        $this->db->from('inscrits');
        $this->db->join('etats', 'inscrits.inscrits_etat_id = etats.etat_id', 'inner');
        $this->db->where('inscrits_evenement_id', $event_id);
        $joint = $this->db->get();
        return $joint->result();
    } 
```

# c - C 源文件中的可移植文字字符串

> ID：15849196
> 
> 赞同：3
> 
> 时间：2013-04-06T09:27:04.803
> 
> 标签：c, string, utf-8, utf-16

好的，我有这个：

```
AllocConsole();
SetConsoleOutputCP(CP_UTF8);
HANDLE consoleHandle = GetStdHandle(STD_OUTPUT_HANDLE);
WriteConsoleA(consoleHandle, "aΕλληνικά\n", 10, NULL, NULL);
WriteConsoleW(consoleHandle, L"wΕλληνικά\n", 10, NULL, NULL);
printf("aΕλληνικά\n");
wprintf(L"wΕλληνικά\n"); 
```

现在，问题是根据编码文件被保存为这些作品中的一部分。wprintf 从不工作，但我已经知道原因（损坏的 Microsoft stdout 实现，它只接受窄字符）。然而，我和其他三个人有问题。如果我将文件保存为不带签名 (BOM) 的 UTF-8 并使用 MS Visual C++ 编译器，则只有最后一个 printf 有效。如果我想让 ANSI 版本正常工作，我需要将字符（？）计数增加到 18：

```
WriteConsoleA(consoleHandle, "aΕλληνικά\n", 18, NULL, NULL); 
```

我认为，WriteConsoleW 不起作用，因为字符串被保存为 UTF-8 字节序列，即使我明确要求将其存储为带有 L 前缀的宽字符（UTF-16），并且实现很可能期望 UTF-16 编码的字符串不是UTF-8。

如果我将它保存在带有 BOM 的 UTF-8 中（应该如此），那么 WriteConsoleW 开始以某种方式工作（？？？）并且其他一切都停止（我得到 ? 而不是一个字符）。我需要将 WriteConsoleA 中的字符数减少回 10 以保持格式相同（否则我会得到 8 个额外的矩形）。基本上，WTF？

现在，让我们转到 UTF-16（Unicode - 代码页 1200）。仅适用于 WriteConsoleW。WriteConsoleA 中的字符数应为 10 以保持格式精确。

以 UTF-16 Big Endian 模式（Unicode - 代码页 1201）保存不会改变任何内容。再说一次，WTF？存储到文件时不应该反转字符串中的字节顺序吗？

结论是字符串被编译成二进制形式的方式取决于所使用的编码。因此，存储字符串的可移植且独立于编译器的方式是什么？是否有一个预处理器可以在编译之前将一种字符串表示形式转换为另一种表示形式，所以我可以将文件存储在 UTF-8 中，并且只通过将它们包装一些宏来预处理我需要在 UTF-16 中具有的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:55:23.333

据我所知，我认为您在这里至少有一些假设是错误的，或者不是 100% 正确：

> 现在，问题是根据编码文件被保存为这些作品中的一部分。

当然，因为编码决定了如何解释字符串文字。

> wprintf 从不工作，但我已经知道原因（损坏的 Microsoft stdout 实现，它只接受窄字符）。

我从来没有听说过那个，但我很确定这取决于为您的程序设置的语言环境。我有一些工作项目，其中设置了语言环境并且使用德语变音符号等输出很好。

> 如果我将文件保存为不带签名 (BOM) 的 UTF-8 并使用 MS Visual C++ 编译器，则只有最后一个 printf 有效。如果我想让 ANSI 版本正常工作，我需要将字符（？）计数增加到 18：

这是因为 ANSI 版本需要一个 ANSI 字符串，而您传递的是 UTF-8 编码的字符串（基于文件的编码）。输出仍然有效，因为控制台会为您处理 UTF-8 转换 - 您实际上是在此处打印原始 UTF-8。

> 我认为，WriteConsoleW 不起作用，因为字符串被保存为 UTF-8 字节序列，即使我明确要求将其存储为带有 L 前缀的宽字符（UTF-16），并且实现很可能期望 UTF-16 编码的字符串不是UTF-8。

我不这么认为（尽管我不确定为什么它也不起作用）。您是否尝试过设置一些易于查找的字符串并在生成的二进制文件中查找它？我很确定它确实是使用 UTF-16 编码的。我假设由于缺少 BOM，编译器可能会将整个内容解释为一个窄字符串，因此将 UTF-8 内容转换为错误的。

> 如果我将它保存在带有 BOM 的 UTF-8 中（应该如此），那么 WriteConsoleW 开始以某种方式工作（？？？）并且其他一切都停止（我得到 ? 而不是一个字符）。我需要将 WriteConsoleA 中的字符数减少回 10 以保持格式相同（否则我会得到 8 个额外的矩形）。基本上，WTF？

这正是我上面描述的。现在宽字符串被正确编码，因为编译器现在知道文件是 UTF-8，而不是 ANSI（或某些代码页）。窄字符串也被正确转换为正在使用的语言环境。

* * *

总体而言，没有独立于编码的方法可以做到这一点，除非您提前使用正确的代码页和/或 UTF 代码对所有内容进行转义。我只是坚持使用带有 BOM 的 UTF-8，因为我认为所有当前的编译器都能够正确读取和解释文件（除了 Microsoft 的资源编译器；虽然我还没有尝试使用 UTF-8 提供 2012 版本）。

编辑：

**打个比方：**

您实际上是将原始图像保存到文件中，并且您希望它能够正常工作，无论其他程序是否尝试将其读取为灰度、调色板或全彩色图像。这不起作用（尽管差异较小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:52:02.797

答案就[在这里](https://stackoverflow.com/a/11560394/1949288)。

报价：

> 编译器不可能将 UTF-8 和 UTF-16 字符串混合到编译输出中！所以你必须决定一个源代码文件：
> 
> *   要么将 UTF-8 与 BOM 一起使用并仅生成 UTF-16 字符串（即始终使用 L 前缀），
> *   或不带 BOM 的 UTF-8，仅生成 UTF-8 字符串（即从不使用 L 前缀），
> *   不涉及 7 位 ASCII 字符，可以带或不带 L 前缀使用

唯一可移植且独立于编译器的方法是使用 ASCII 字符集和转义序列，因为不能保证任何编译器都会接受 UTF-8 编码文件，并且编译器对这些多字节序列的处理可能会有所不同。

# python - 如何将 zeromq 轮询集成到 pyqt 主循环中？

> ID：15849202
> 
> 赞同：2
> 
> 时间：2013-04-06T09:27:41.010
> 
> 标签：python, qt, pyqt, zeromq, polling

我有一个简单的 PySide 程序（我的第一个 GUI 程序），其中只有两个从 -100 到 100 的滑块。第一个滑块使用 zeromq 将其值发送到硬件控制器。这个控制器驱动一个硬件方向盘，但由于方向盘需要一些时间才能将其位置调整到所需位置，所以我从那个方向盘收到反馈，现在我想将其反映到它下面的第二个滑块中。通过这种方式，第二个滑块“跟随”第一个滑块，以显示方向盘的实际距离：

![在此处输入图像描述](https://i.stack.imgur.com/kVbIX.png)

由于我或多或少地同时接收和发送 zeromq 消息，我需要使用 zeromq 轮询做一些事情。我以前用过，但不是在 pyqt 程序中。所以我有点迷失在哪里或如何在这个程序中加入 zeromq 轮询。

我现在的代码在这里： http: [//pastebin.com/8j5TDpkX](http://pastebin.com/8j5TDpkX)

有人会对在哪里合并 zmq 轮询有某种提示或提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:08:53.427

The old-fashioned way is to use the `ZMQ_FD` option to `zmq_getsockopt(3)` to get an edge-triggered file descriptor that can then be used in other kinds of event loops.

# java - 在没有 trim() 和 replaceAll() 的情况下删除字符串中的连续空格

> ID：15849204
> 
> 赞同：1
> 
> 时间：2013-04-06T09:28:31.890
> 
> 标签：java, string

我必须从给定的字符串中删除前导和尾随空格以及组合连续的空格。例如，

```
String str = "    this is    a   string  containing numerous  whitespaces   "; 
```

我需要将其返回为：

```
"this is a string containing numerous whitespaces"; 
```

但问题是我不能使用`String#trim()`. （这是一个家庭作业，我不允许使用这种方法。）我目前正在尝试通过一个一个地访问每个字符但非常不成功。

我需要一个优化的代码。有人可以帮忙吗？我需要在今天之前完成 :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T09:32:05.047

编辑：在我们被告知无法使用之前发布的答案`replaceAll`。我把它留在这里是因为它可能对其他读者有用，即使它对 OP 没有用。

> 我需要一个优化的代码。

你*真的*需要优化它吗？你确定这是一个瓶颈吗？

这应该这样做：

```
str = str.replaceAll("\\s+", " "); 
```

这是一个正则表达式，表示“用单个空格替换任何连续的空格”。它可能不是最快的，但我会在尝试其他任何东西之前对其进行基准测试。

请注意，这会将*所有*空格替换为空格 - 因此，如果您有制表符或其他空格字符，它们也将替换为空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T09:37:21.667

> 我不允许使用这些方法。我必须用循环和所有来做到这一点。

因此，如果您不能使用更快、更有效的方式，我为您写了一些代码片段：

```
String str = "    this is    a   string  containing numerous  whitespaces   ";
StringBuffer buff = new StringBuffer();
String correctedString = "";
boolean space = false;
for (int i = 0; i < str.length(); i++) {
    char c = str.charAt(i);
    if (c == ' ') {
        if (!space && i > 0) {
            buff.append(c);
        }
        space = true;
    }
    else {
        buff.append(c);
        space = false;
    }
}
String temp = buff.toString();
if (temp.charAt(temp.length() - 1) == ' ') {
    correctedString = temp.substring(0, buff.toString().length() - 1);
    System.out.println(correctedString);
}
System.out.println(buff.toString()) 
```

## 笔记：

但这是“硬编码”的，仅用于“学习”。

更有效的方法是肯定使用@JonSkeet 和@BrunoReis 指出的方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T09:30:54.643

怎么样`str = str.replaceAll(" +", " ").trim();`？

如果您不想使用`trim()`（而且我真的没有理由不使用），请将其替换为：

```
str = str.replaceAll(" +", " ").replaceAll("^ ", "").replaceAll(" $", "");` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T19:16:39.330

在不使用任何内置库函数的情况下删除空格这只是一个具有固定数组大小的简单示例。

```
public class RemWhite{ 
public static void main(String args[]){ 
String s1=" world qwer ";
int count=0;
char q[]=new char[9];
char ch[]=s1.toCharArray();
System.out.println(ch); 

    for(int i=0;i<=ch.length-1;i++)
   {
     int j=ch[i];
     if(j==32)
     {
      continue;
     }
   else
      q[count]=ch[i];
      count++;

      } 
   System.out.println(q); 

  }} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-22T17:23:23.817

去除单次或再次出现的空间。

```
public class RemoveSpace {
    public static void main(String[] args) {

        char space = ' ';
        int ascii = (int) space;

        String str = "    this is    a   string  containing numerous  whitespaces   ";
        char c[] = str.toCharArray();

        for (int i = 0; i < c.length - 1; i++) {
            if (c[i] == ascii) {
                continue;
            } else {
                System.out.print(c[i]);
            }
        }

    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-20T14:20:46.613

如果您不想使用任何内置方法，这就是您所指的

```
private static String trim(String s)
{
    String s1="";boolean nonspace=false;
    for(int i=0;i<s.length();i++)
    {
        if(s.charAt(i)!=' ' || nonspace)
        {
            s1 = s1+s.charAt(i);
            nonspace = true;
        }
    }
    nonspace = false;
    s="";
    for(int i=s1.length()-1;i>=0;i--)
    {
        if(s1.charAt(i)!=' ' || nonspace)
        {
            s = s1.charAt(i)+s;
            nonspace = true;
        }
    }
    return s;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-24T04:16:17.470

```
package removespace;

import java.util.Scanner;

public class RemoveSpace {

    public static void main(String[] args) {

        Scanner scan= new Scanner(System.in);

        System.out.println("Enter the string");

        String str= scan.nextLine();

        String str2=" ";

        char []arr=str.toCharArray();

        int i=0;

        while(i<=arr.length-1)
        {
            if(arr[i]==' ')
            {
                i++;
            }
            else
            {
                str2= str2+arr[i];
                i++;
            }

        }
        System.out.println(str2);

    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-11-05T19:39:32.757

此代码用于删除给定字符串中的空格和重新出现的字母，而不使用 trim()。我们接受来自用户的字符串。我们使用 charAt() 将其分隔为字符，然后将每个字符与 null(' ') 进行比较。如果找到 null 我们跳过它并在 else 部分显示该字符。为了跳过空值，我们将索引 i 增加 1。尝试使用此代码来解决您的问题。

```
String name = " abc "; 
System.out.println(name);
for (int i = 0; i < name.length(); i++) {
    char ch = name.charAt(i);
    if (ch == ' ') {
        i = 2 + i - 2;
    } else {
        System.out.print(name.charAt(i));
    }
} 
```

# php - 如何使用 SimpleXML 解析 XML 的 CDATA HTML 内容？

> ID：15849209
> 
> 赞同：3
> 
> 时间：2013-04-06T09:28:49.843
> 
> 标签：php, html, xml, rss, simplexml

我正在尝试将 Xml 内容显示到表格中，一切正常，但标签中的某些内容我不想显示，我只想要图像而不是

2012 年 11 月日历来自 5.10 测试

就像在 xml 中一样，

```
 <content:encoded><![CDATA[<p>November 2012 calendar from 5.10 The Test</p>
    <p><a class="shutterset_" href='http://trance-gemini.com/wordpress/wp-content/gallery/calendars/laura-bertram-trance-gemini-145-1080.jpg' title='&lt;br&gt;November 2012 calendar from 5.10 The Test&lt;br&gt; &lt;a href=&quot;</a></p>]]>
</content:encoded> 
```

我想显示图像但不是

2012 年 11 月日历来自 5.10 测试

.

```
<?php
// load SimpleXML
$item = new SimpleXMLElement('test1.xml', null, true);

echo <<<EOF
<table border="1px">
        <tr cl>

        </tr>       
EOF;
foreach($item->channel->item as $boo) // loop through our books
{
        echo <<<EOF

         <tr>
            <td rowspan="3">{$boo->children('content', true)->encoded}</td>
            <td>{$boo->title}</td>   
        </tr>

        <tr>
           <td>{$boo->description}</td>
        </tr>

        <tr>
           <td>{boo->comments}</td>
        </tr>
EOF;
}
echo '</table>';
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T12:10:53.770

我曾经回答过它，但我再也找不到答案了。

如果您看一下字符串（简化/美化）：

```
<content:encoded><![CDATA[
    <p>Lorem Ipsom</p>
    <p>
      <a href='laura-bertram-trance-gemini-145-1080.jpg' 
         title='&lt;br&gt;November 2012 calendar from 5.10 The Test&lt;br&gt; &lt;a href=&quot;</a>
    </p>]]>
</content:encoded> 
```

您可以看到您在元素的节点值*内进行了 HTML 编码。*`<content:encoded>`所以首先你需要获取 HTML 值，你已经这样做了：

```
$html = $boo->children('content', true)->encoded; 
```

然后你需要解析里面的HTML `$html`。可以使用 PHP 进行 HTML 解析的库概述如下：

*   [如何使用 PHP 解析和处理 HTML/XML？](https://stackoverflow.com/q/3577641/367456)

如果您决定使用或多或少推荐`DOMDocument`的工作，您只需要获取某个元素的属性值：

*   [PHP DOMDocument获取标签的属性](https://stackoverflow.com/q/1597746/367456)

或者对于您已经使用的它的姊妹库 SimpleXML（因此更推荐使用，请参阅下一节）：

*   [如何使用 SimpleXML 获取属性？](https://stackoverflow.com/q/3410520/367456)

* * *

> 在您的问题的上下文中，以下提示：

您正在使用 SimpleXML。DOMDocument 是一个姊妹库，这意味着您可以在两者之间进行互换，因此您无需学习全新的库。

例如，您可以仅使用 的 HTML 解析功能`DOMDocument`，然后将其导入`SimpleXML`. 这很有用，因为 SimpleXML 不支持 HTML 解析。

这通过[`simplexml_import_dom()`](http://php.net/simplexml_import_dom).

一个简化的分步示例：

```
// get the HTML string out of the feed:
$htmlString = $boo->children('content', true)->encoded;

// create DOMDocument for HTML parsing:
$htmlParser = new DOMDocument();

// load the HTML:
$htmlParser->loadHTML($htmlString);

// import it into simplexml:
$html = simplexml_import_dom($htmlParser); 
```

现在您可以将`$html`其用作表示 HTML 文档的新 SimpleXMLElement。由于您的 HTML 块没有任何`<body>`标签，根据 HTML 规范，它们被放在`<body>`标签内。例如，这将允许您访问示例中第二个元素中`href`第一个元素的属性：#`<a>``<p>`

```
// access the element you're looking for:
$href = $html->body->p[1]->a['href']; 
```

这是上面的完整视图（[在线演示](http://eval.in/15171)）：

```
// get the HTML string out of the feed:
$htmlString = $boo->children('content', true)->encoded;

// create DOMDocument for HTML parsing:
$htmlParser = new DOMDocument();

// your HTML gives parser warnings, keep them internal:
libxml_use_internal_errors(true);

// load the HTML:
$htmlParser->loadHTML($htmlString);

// import it into simplexml:
$html = simplexml_import_dom($htmlParser);

// access the element you're looking for:
$href = $html->body->p[1]->a['href'];

// output it
echo $href, "\n"; 
```

以及它的输出：

```
laura-bertram-trance-gemini-145-1080.jpg 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-06T09:54:46.387

您需要解析图像网址，例如通过`preg_match`和这个正则表达式`'(http://(?:[^']*))'`

# php - 根据 FTP 请求创建文件

> ID：15849220
> 
> 赞同：1
> 
> 时间：2013-04-06T09:30:55.480
> 
> 标签：php, mysql, ftp, sublimetext2

当通过 FTP 请求文件时，是否可以让我的服务器即时创建文件？

例如，我的编程 IDE（在我的例子中是 Sublime Text 2）尝试通过 FTP（SFTP）从服务器下载一个名为“content_123.htm”的文件。发出请求时 content_123.htm 不存在，但我希望服务器在请求时自动创建文件，将我的数据库中 ID 为“123”的页面内容放入该文件中。

有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:55:50.003

它并不完美，但经过一些研究，我发现了一个名为[SublimeHttpRequester](https://github.com/braindamageinc/SublimeHttpRequester "SublimeHttpRequester")的 Sublime 包，它可以通过包安装程序安装。

您必须先粘贴要下载的 URL，选择它，然后获取包以下载它，但它使用 HTTP，因此 .htaccess/PHP 可用于组合一个尚未下载的页面。

我希望会出现一种更简单的方法，但现在应该可以帮助任何人搜索！

# ruby-on-rails - Rails 数组条件查询

> ID：15849224
> 
> 赞同：0
> 
> 时间：2013-04-06T09:31:17.747
> 
> 标签：ruby-on-rails

我编写了以下方法来结合模型及其子模型`References`：`Sections`

```
def combined_references
    ids = []
    ids << self.id
    self.children.each do |child|
      ids << child.id
    end
    Reference.where("section_id = ?", ids)
  end 
```

但`section.combined_references`返回以下错误：

```
Mysql2::Error: Operand should contain 1 column(s): SELECT `references`.* FROM `references`  WHERE (section_id = 3,4) 
```

似乎已经收集了正确的 id 值，我是否错误地构造了查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T09:37:04.617

将最后一行转换为：

```
Reference.where(section_id: ids) 
```

它应该产生：

```
SELECT `references`.* FROM `references`  WHERE section_id IN (3,4) 
```

您可以将代码缩短一行：

```
 ids = []
 ids << self.id 
```

到

```
 ids = [self.id] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T09:37:35.373

这是无效的声明 WHERE (section_id = 3,4) 正确的是

```
WHERE (section_id in (3,4)) 
```

请用：

```
Reference.where(:section_id => ids) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T10:02:15.790

您可以尝试这样的事情：

```
def combined_references
  ids = self.children.map(&:id).push(self.id)
  Reference.where(section_id: ids)
end 
```

您还可以使用以下命令查询数据库：

```
Reference.where("section_id in (?)", ids) 
```

以下是我认为最具可读性的内容：

```
def combined_references
  Reference.where(section_id: self_and_children_ids)
end

private

def self_and_children_ids
  self.children.map(&:id).push(self.id)
end 
```

# android - 安装应用程序时出现 INSTALL_FAILED_UID_CHANGED 错误

> ID：15849239
> 
> 赞同：8
> 
> 时间：2013-04-06T09:34:05.110
> 
> 标签：android

```
[2013-04-06 14:48:32 - SplitPaneLayout-Demo] Android Launch!
[2013-04-06 14:48:32 - SplitPaneLayout-Demo] adb is running normally.
[2013-04-06 14:48:32 - SplitPaneLayout-Demo] Performing com.mobidevelop.widget.Demo activity launch
[2013-04-06 14:48:32 - SplitPaneLayout-Demo] Automatic Target Mode: using device '015d188469381013'
[2013-04-06 14:48:32 - SplitPaneLayout-Demo] Uploading SplitPaneLayout-Demo.apk onto device '015d188469381013'
[2013-04-06 14:48:32 - SplitPaneLayout-Demo] Installing SplitPaneLayout-Demo.apk...

[2013-04-06 14:48:34 - SplitPaneLayout-Demo] Installation error: INSTALL_FAILED_UID_CHANGED
[2013-04-06 14:48:34 - SplitPaneLayout-Demo] Please check logcat output for more details.
[2013-04-06 14:48:34 - SplitPaneLayout-Demo] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-20T05:20:01.463

只需删除设备上的“/data/data/your.package.name”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-13T12:04:01.190

如果您的设备没有植根并且重新启动不起作用，我想如果您只是在调试，更改您的包名称是一个不错的选择。为我工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T10:01:01.150

只需手动卸载您的应用程序，`Setting->Application->Manage Application->Your Application`这是因为使用了某些数据或字符串，因此系统无法删除它，这就是出现此错误的原因。

如果仍然遇到此问题，请关闭您的模拟器，然后通过擦除数据启动您的模拟器。

这是有关此的更多详细信息

[https://stackoverflow.com/a/12662787/760489](https://stackoverflow.com/a/12662787/760489)

[https://stackoverflow.com/a/11444895/760489](https://stackoverflow.com/a/11444895/760489)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-23T23:52:32.993

如果您只是像我一样测试您的应用程序，那么我只是将应用程序名称从 xyz 重命名为 abc，然后再次将其部署到您的移动设备上（我的是 nexus 7 选项卡）然后一切正常！:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-14T13:45:04.817

尝试删除 下的缓存数据`Settings -> Storage`，这将立即清除所有缓存的应用程序数据，但它可以完成工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-03T07:17:50.303

请检查您是否在清单中添加了 android:sharedUserId。如果不需要，请将其删除。那应该可以解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-19T06:27:57.803

重新启动设备并清理项目。当我们卸载应用程序并尝试在不重新启动设备的情况下再次安装它时，有时会发生这种情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-06T13:55:05.087

我在这里遵循了大多数步骤，最终将我正在使用的 gradle 版本更改为

'com.android.tools.build:gradle:1.0.0-rc3'

它奏效了

谢谢

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-26T04:21:46.440

我在使用模拟器时遇到了同样的错误。我只是删除了那个模拟器并制作了一个新的模拟器并将apk安装到新的模拟器中，它就可以工作了。希望它会帮助某人。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-03T21:02:30.850

rm -rf /data/data/your.package.name 对我有用。

您需要成为超级用户。对我来说，由于我在控制台中使用 CyanogenMod 11.0、nexus、“su”让我切换到超级模式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-15T18:13:38.413

发生这种情况是因为您的手机中的 Selendroid 应用程序中仍然保存着旧的 UID。转到应用程序管理器并卸载名为“Selendroid”的应用程序，然后重试。那应该可以解决您的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-24T11:59:33.953

经过大量研究，我可以通过更改 ApplicationId 来解决这个问题。此过程不需要 root 或恢复出厂设置以及擦除 /data 文件夹中的数据。

1.  右键单击项目的根文件夹。
2.  点击“打开模块设置”。
3.  转到风味选项卡。
4.  将 applicationID 更改为您想要的任何包名称。按确定。

归功于此答案[https://stackoverflow.com/a/28336400/4657700](https://stackoverflow.com/a/28336400/4657700)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-10-13T14:35:01.777

对我来说最简单的事情就是创建一个新的模拟器。

# django - Django 中的自定义表单集模板

> ID：15849240
> 
> 赞同：3
> 
> 时间：2013-04-06T09:34:08.563
> 
> 标签：django, django-forms, django-templates, django-views, inline-formset

我为此模型使用了 Django[表单集：](https://docs.djangoproject.com/en/1.5/topics/forms/formsets/)

```
class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author) 
```

表单集是这样定义的：

```
BookFormset = inlineformset_factory(Author, Book, 
    fields=('book_id','book_name', 'publisher_name'), extra=1, 
    can_delete=False) 
```

模板是：

```
{{ formset.non_form_errors.as_ul }}
<table id="formset" class="form">
{% for form in formset.forms %}
  {% if forloop.first %}
  <thead><tr>
    {% for field in form.visible_fields %}
    <th>{{ field.label|capfirst }}
    {% endfor %}
  </tr></thead>
  {% endif %}
  <tr class="{% cycle row1,row2 %}">
  {% for field in form.visible_fields %}
    <td>
    {# Include the hidden fields in the form #}
    {% if forloop.first %}
      {% for hidden in form.hidden_fields %}
      {{ hidden }}
      {% endfor %}
    {% endif %}
      {{ field.errors.as_ul }}
      {{ field }}
    </td>
  {% endfor %}
  </tr>
{% endfor %}    
</table> 
```

这些字段按列显示，但我希望它们按行显示。

上面的代码产生如下输出：

```
Book name   Publisher name

book_field       Publisher_field 
```

我希望输出看起来像这样：

```
Book name   book_field

Publisher name   Publisher_field 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:43:26.790

在您的模板中，您有两个`<tr>`元素，每个元素都包含一个循环`form.visible_fields`，每次迭代都会生成一个`<th>`or `<td>`。

更改这一轮，以便您有一个循环`form.visible_fields`，其每次迭代都包含一个包含 a和 a 的`<tr>`元素。像这样：`<th>``<td>`

```
<table id="formset" class="form">
{% for form in formset.forms %}
  {% for field in form.visible_fields %}
  <tr class="{% cycle row1,row2 %}">
    <th>{{ field.label|capfirst }}</th>
    <td>
    {# Include the hidden fields in the form #}
    {% if forloop.first %}
      {% for hidden in form.hidden_fields %}
      {{ hidden }}
      {% endfor %}
    {% endif %}
      {{ field.errors.as_ul }}
      {{ field }}
    </td>
  </tr>
  {% endfor %}
{% endfor %}    
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T12:34:57.410

上面的示例似乎显示了按列布局，这似乎是表单集呈现自身时的默认布局。

要使其按行排列，请使用以下内容：

```
<table>
    {% for form in formset.forms %}
        {% if forloop.first %}
            <thead>
                {% for field in form.visible_fields %}
                    <th>{{ field.label }}</th>
                {% endfor %}    
            </thead>
            <tbody>
        {% endif %}

        <tr class="{% cycle row1,row2 %}">                        
            {% for field in form.visible_fields %}
                <td>
                    {% if forloop.first %}
                        {% for hidden in form.hidden_fields %}
                            {{ hidden }}
                        {% endfor %}
                    {% endif %}

                    {{ field.errors.as_ul }}
                    {{ field }}
                </td>
            {% endfor %}
        </tr>
        {% if forloop.last %}
            </tbody>
        {% endif %}
    {% endfor %}    
</table> 
```

# matlab - 有效地从另一个matlab中的一个向量中找到一个值：如果为空则错误检查

> ID：15849242
> 
> 赞同：0
> 
> 时间：2013-04-06T09:34:20.930
> 
> 标签：matlab

我有 3 个向量：`npdf,` `tn(:,1)`并且正在逐行`tn(:,2)`查找 in 的值`npdf`：`tn(:,2)`

```
 [npdf(1:20,1), tn(1:20,:)]

    ans =

    8.0000    3.0000    1.0000
   11.0000    2.9167    1.0000
    1.0000    3.3000    1.0000
   11.0000    1.2167    1.0000
    5.0000    2.8167    1.0000
    1.0000    2.4000    1.0000
    2.0000    2.4500    1.0000
    4.0000    0.2500    1.0000
   15.0000    3.7500    1.0000
   15.0000    4.9167    1.0000
    1.0000    2.8167    2.0000
   17.0000    0.2500    2.0000
   15.0000    1.0000    3.0000
    4.0000    3.0000    3.0000
    8.0000    0.5833    3.0000
    1.0000    0.5833    3.0000
    3.0000    5.0000    5.0000
   11.0000    3.7500    6.0000
    8.0000    3.0000    7.0000
   15.0000    2.8000    7.0000

for i=1:length(npdf)
  [LOCA,~]=ismember(tn(:,2),npdf(i,1,1));
  dummy=find(LOCA~=0);
  tpdf(i,1)=tn(randi(length(dummy),1,1),1);
end 
```

每次找到 in 的值时`npdf`，`tn(:,2)`它都会从 中选择一个值`tn(:,1)`。

这就是问题所在：如果它无法从 tn(:,2) 中的 npdf 中找到值，那么我需要在 tn(:,2) 中选择最接近的值（以大小为单位）并继续。要么是最接近的值之间的插值，要么是某种插值。你将如何最有效地做到这一点？

由您自行决定更改代码，对我来说它看起来不是很有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:16:27.080

可以通过`knnsearch`以下方式轻松完成：

```
 [idx,D]=knnsearch(tn(:,2),npdf,'K',size(tn,1));
 for i=1:size(D,1)
    tpdf(i,1)=tn(randi(sum(D(i,:)==min(D(i,:))),1,1),1);
 end 
```

它找到每个值`npdf`到 中所有值的距离`tn`。然后它只考虑最接近的值。`tn(:,1)`然后它根据您的代码选择一个随机索引。

# java - 如何开始一个链表？

> ID：15849243
> 
> 赞同：-3
> 
> 时间：2013-04-06T09:34:21.040
> 
> 标签：java, linked-list, computer-science

在过去的一个小时里，我一直试图弄清楚链接列表是什么，我了解到它包含节点和链接。这个节点实际上是什么？你如何在java中定义一个链表？虽然我读过不同的程序，但我想要最基本的程序，而不使用任何直接函数。如何工作和访问链表？以及如何存储链接和节点？这些是我感到困惑的几个问题。谢谢您，任何部分答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:38:41.560

链表是一个有序列表，其中一个节点引用下一个节点。您的列表应该跟踪当前节点，其中包含对下一个节点的引用。当列表被迭代时，当前节点被切换到它的下一个节点，其中包含对下一个节点的引用。循环从那里继续。

一个简单的谷歌搜索揭示了很多关于 LinkedList 的信息。这个[维基百科页面](http://en.wikipedia.org/wiki/Linked_list)很好地解释了它。

也许节点接口的说明会有所帮助。

```
public interface Node(){

    public Node next();
    public Node prev();
} 
```

使用此接口，您可以创建节点的“链”，因为节点具有对下一个和前一个节点的引用。

**我应该注意我可能误读了您的问题，我以为您想创建自己的实现。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:37:50.373

实现不是您需要担心能够使用列表的事情：

```
 List<String> yourList = new LinkedList<String>();

    yourList.add("item1");
    yourList.add("item2");
    // etc

    // iterating example
    for(String currentNodeElementOrWhatever : yourList) {
       // use this element somehow
       System.out.println(currentNodeElementOrWhatever);
    } 
```

在这种情况下，“item1”和“item2”是节点，它们每个都有到下一个节点的链接，因此 item1 -> item2 和 item2 -> null 因为它是最后一个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:52:11.123

这是 Node.js 的一个类示例。

```
public class Node<T>{
      Node next;
      T value;
} 
```

LinkedList 的伪代码实现示例：

```
Add( val){
    Node newNode = new Node();
    newNode.next = firstNode;
    tailNode.next = newNode;
    newNode.value = val;
}

Get( idx){
    Node currentNode = firstNode;
    while(idx--!= 0)
        currentNode = currentNode.next;
    return currentNode.value;
}

Delete(idx){
   Node nodeToRemove= firstNode;
   while(idx-- > 0)
        nodeToRemove= currentNode.next;
    nodeToRemove.next = null;
} 
```

# vb.net - 如果应用程序包含实现 IDisposable 的对象，则需要 STATHHREAD 属性

> ID：15849244
> 
> 赞同：0
> 
> 时间：2013-04-06T09:34:56.643
> 
> 标签：vb.net

我正在查看许多没有用户界面并且在主线程上方没有 STA 线程 ( [http://msdn.microsoft.com/en-gb/library/system.stathreadattribute.aspx ) 属性的 Windows 窗体应用程序。](http://msdn.microsoft.com/en-gb/library/system.stathreadattribute.aspx)

我还没有创建在这些应用程序中使用的 COM 组件。

我已阅读以下线程：[STAThread 和 multithreading](https://stackoverflow.com/questions/165316/stathread-and-multithreading)。Bruce 说：“公寓线程是一个 COM 概念；如果您不使用 COM，并且您调用的任何 API 都没有使用 COM，则“在幕后”。有没有办法找出类是否使用 COM：“在幕后“？

过去，我只是看看类是否实现了 IDisposable，例如 SQLConnection 实现了 IDisposable，因此它必须包含非托管资源，即 COM 组件。

是否可以肯定地说，如果 Windows 应用程序或控制台应用程序引用了一个实现 IDisposable 的对象，那么主线程应该包含它上面的 STAThread 属性？

# php - PHP mysql 中同一行中的前 5 个数字

> ID：15849248
> 
> 赞同：1
> 
> 时间：2013-04-06T09:35:54.743
> 
> 标签：php, mysql

如何在mysql中的同一行中获得第一个最高的数字，例如我有这一行

我有这个数据库

```
Name Level1 Level2 Level3 Level4 Level5 Level6 Level7 Level8 Level9 Level10 Level11 Level12
armar 80 50 30 60 80 60 90 35 90 66 55 22 
```

好的，我想在 mysql 中获得该行中的前 5 个级别并从高到低排序

示例结果将是：`90 90 80 80 60`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:48:17.423

最好使用 PHP 执行此操作，这将为您提供最佳性能，一旦您使用 PHP 获取行并将行作为数组，

```
$stack = array();
for($i=1;$i<=12;$i++){
    $stack[] = $row["Level".$i];
}
array_reverse(sort($stack)); 
```

现在`$stack[0]`，`$stack[1]`...`$stack[4]`会给你最高的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:46:36.603

PHP 解决方案在这里会更好，但如果你只需要一个 MySQL 查询，你可以使用这个：

```
SELECT
  Name,
  SUBSTRING_INDEX(SUBSTRING_INDEX(Levels, ',', 1), ',', -1) Top1,
  SUBSTRING_INDEX(SUBSTRING_INDEX(Levels, ',', 2), ',', -1) Top2,
  SUBSTRING_INDEX(SUBSTRING_INDEX(Levels, ',', 3), ',', -1) Top3,
  SUBSTRING_INDEX(SUBSTRING_INDEX(Levels, ',', 4), ',', -1) Top4,
  SUBSTRING_INDEX(SUBSTRING_INDEX(Levels, ',', 5), ',', -1) Top5
FROM (
  SELECT Name, GROUP_CONCAT(Level ORDER BY Level DESC) Levels
  FROM (
    SELECT Name, Level1 Level FROM yourtable
    UNION ALL
    SELECT Name, Level2 FROM yourtable
    UNION ALL
    SELECT Name, Level3 FROM yourtable
    UNION ALL
    SELECT Name, Level4 FROM yourtable
    UNION ALL
    SELECT Name, Level5 FROM yourtable
    UNION ALL
    SELECT Name, Level6 FROM yourtable
    UNION ALL
    SELECT Name, Level7 FROM yourtable
    UNION ALL
    SELECT Name, Level8 FROM yourtable
    UNION ALL
    SELECT Name, Level9 FROM yourtable
    UNION ALL
    SELECT Name, Level10 FROM yourtable
    UNION ALL
    SELECT Name, Level11 FROM yourtable
    UNION ALL
    SELECT Name, Level12 FROM yourtable
  ) s
  GROUP BY Name
) s 
```

请[在此处](http://sqlfiddle.com/#!2/22074/1)查看小提琴。

# mysql - Mysql正则表达式寻找链接

> ID：15849249
> 
> 赞同：0
> 
> 时间：2013-04-06T09:35:59.843
> 
> 标签：mysql, regex

如何使此表达式起作用：

```
SELECT post_content 
FROM wp_posts 
WHERE post_content REGEXP 'http:\/\/www.google.com\/\?link=.*_1' 
```

我有一些带有这种风格的链接的帖子，所以我不会得到所有带有这种链接的帖子的列表。

通过这个查询，我得到一个空列表。

桌子：

```
| id | wp_posts | other fields....
| 1  | text <a href="http://www.google.de/?link=test_1">Link</a> text | .... 
```

所以我必须找到帖子ID 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:33:46.190

转义`/`不是必需的，但[您需要使用`\\`转义问号](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)。

> 注意
> 因为 MySQL 在字符串中使用 C 转义语法（例如，“\n”表示换行符），所以您必须将您在 REGEXP 字符串中使用的任何“\”加倍。

此外，在正确的国家/地区搜索 google 是个好主意 :-)

这会起作用的；

```
SELECT post_content 
FROM wp_posts 
WHERE post_content REGEXP 'http://www.google.de/\\?link=.*_1'; 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/894db/11)。

# unix - 如何使用 Unix 命令替换大文件中指定列的内容

> ID：15849253
> 
> 赞同：0
> 
> 时间：2013-04-06T09:36:15.620
> 
> 标签：unix, file-io, sed

我有一个大约 10 GB 的大文件。我想替换它的第 35 列（用 ; 分隔）。因为它是一个巨大的文件，所以不能在编辑器中打开文件。我想在文件的所有行中进行替换。

有人建议我使用 Sed，但我还不习惯。有人可以建议一个可以实现相同功能的 unix 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:39:42.320

```
awk -F';' '{ $35 = "replacement" }' < oldfile > newfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:26:06.423

这可能对您有用（GNU sed）：

```
 sed -i 's/[^;]*/replacement/35' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T17:13:49.407

接受的解决方案对我不起作用。但帮助我找到了这个：

awk '{$35 = "替换"; 打印 $0}' <旧文件> 新文件

对于制表符分隔的文件

# php - Drupal 7 用户模块自定义注册不同角色

> ID：15849256
> 
> 赞同：1
> 
> 时间：2013-04-06T09:36:39.207
> 
> 标签：php, drupal, module, drupal-7, drupal-modules

我需要在 Drupal 7 中自定义用户注册表单。我没有从 Internet 获得任何相关帮助。所以我想我应该在这里问专家。

要求是我有两个角色，分别是“学生”和“老师”。我必须通过自动设置他们的角色来使用默认用户模块进行注册。

现在将有两个链接，一个用于学生注册，另一个用于教师注册。当用户单击学生注册时，我会隐藏默认用户模块的一些字段，这些字段应该由老师填写，因此学生只会看到指定的字段。老师也一样，我隐藏了学生应该填写的字段。

所以基本上使用默认用户模块我必须执行注册过程。

我认为可能的解决方案：

我可以在链接中设置一个变量，说“studetnSignUp?status=student”，对于教师“studetnSignUp?status=teacher”也是如此。现在的问题是我可以在 php 中做到这一点，但在 drupal 中没有熟练的方法。

如果可以使用任何其他方法，请告诉我。因为这对我来说真的很紧急。您的支持将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:47:10.253

您可以结合[Profile2 注册路径查看](http://drupal.org/project/profile2_regpath)[Profile2](http://drupal.org/project/profile2)。它使您能够为每个 Profile2 配置文件类型设置唯一的注册路径。对于每个配置文件类型，您可以定义不同的字段。而且我认为一个有用的功能是它可以通过注册路径分配用户角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T08:14:00.337

我会使用菜单获取传递的参数，然后调用

```
hook_form_alter(&$form, $form_state, $form_id) {
  if ($form_id == 'user_profile_form') {
  // do your processing here
  }
} 
```

改变用户依赖的表单布局，并在表单中指定用户角色，即教师或学生

# android - 运行 robolectric 测试 IntelliJ 的运行时异常

> ID：15849261
> 
> 赞同：1
> 
> 时间：2013-04-06T09:37:04.697
> 
> 标签：android, intellij-idea, robolectric

在 IntelliJ 中运行我的 robolectric 测试时，我得到：

```
Warning: an error occurred while binding shadow class: ShadowGeoPoint
Warning: an error occurred while binding shadow class: ShadowItemizedOverlay
Warning: an error occurred while binding shadow class: ShadowMapController
Warning: an error occurred while binding shadow class: ShadowMapActivity
Warning: an error occurred while binding shadow class: ShadowMapView
Warning: an error occurred while binding shadow class: ShadowOverlayItem
WARNING: Unable to find path to Android SDK

java.lang.RuntimeException: java.lang.NullPointerException
    at com.xtremelabs.robolectric.res.ResourceLoader.init(ResourceLoader.java:158)
    at com.xtremelabs.robolectric.res.ResourceLoader.setLayoutQualifierSearchPath(ResourceLoader.java:599)
    at com.xtremelabs.robolectric.RobolectricTestRunner.setupApplicationState(RobolectricTestRunner.java:367)
    at com.xtremelabs.robolectric.RobolectricTestRunner.internalBeforeTest(RobolectricTestRunner.java:311)
    at com.xtremelabs.robolectric.RobolectricTestRunner.methodBlock(RobolectricTestRunner.java:278)
    at ... 
```

ANDROID_HOME 已设置，但 InteliJ 似乎没有找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:58:14.307

`sdk.dir`通过在`local.properties`项目的根目录中运行以下命令来设置文件：

```
$ android update project -p . 
```

设置`local.properties`文件是适用于大多数 IDE 的解决方案，因为您无需担心传递环境变量。

我从[`Unable to find Android SDK`](http://pivotal.github.io/robolectric/resources.html#unable_to_find_android_sdk). 您还可以尝试其他几个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:33:39.267

*   转到运行配置（运行-> EditConfigurations ..）
*   从左侧选择您的测试（在 JUnit 下）
*   在配置选项卡中，转到环境变量部分并添加一个指向您的 sdk 的环境变量 ANDROID_HOME
*   再次应用、构建和运行测试

注意：您可以在 JUnit 默认设置中添加这个，这样您就不必为每个测试类做

# java - 使用由另一个应用程序构建的数据库文件

> ID：15849266
> 
> 赞同：0
> 
> 时间：2013-04-06T09:37:36.727
> 
> 标签：java, android

所以我正在开发一个在数据库中查找数据的应用程序。为了填充数据库，我构建了一个读取文本并将数据添加到该数据库的应用程序。现在我想将填充的数据库用于另一个应用程序，该应用程序将查找用户和数据库所需的数据。手机上保存的数据库文件在哪里，如何将其添加到另一个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:20:06.140

我认为您应该考虑使用 ContenProvider。内容提供者是将一个进程中的数据与另一个进程中运行的代码连接起来的标准接口，请参见：http: [//developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

# c - 电脑是怎么算的？

> ID：15849267
> 
> 赞同：0
> 
> 时间：2013-04-06T09:37:42.087
> 
> 标签：c, fseek

```
#include<stdio.h>

int main()
{
    FILE* f;
    f=fopen("book.txt","w");
    char* sentence="0123456789";
    fprintf(f,"%s\n",sentence);
    fseek(f,0,SEEK_END);
    int a=ftell(f);
    printf("%d\n",a);
    fclose(f);
    return 0;
} 
```

我有上面的代码，当我运行它时会打印出 12 。为什么不是 11 (0,1,2,3,4,5,6,7,8,9,\0) 而不是 12？

已编辑：(0,1,2,3,4,5,6,7,8,9,\r\n)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T09:43:01.940

在 Windows 系统上，换行符实际上是*两个*字符：回车符和换行符 ( `"\r\n"`)。

所以你有你写出的字符串中的十个字符，加上换行符的两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:43:23.693

[在 Windows 上运行](http://en.wikipedia.org/wiki/Newline#Representations)，也许？在 OS X 和 Linux 上，这为我打印 11。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:44:15.110

如果您在 Windows 系统上，您将打印两个换行符：#13 和 #10 通过添加额外的`\n`. 删除它广告，看看你得到了什么：

```
fprintf(f,"%s",sentence); 
```

# android - 无法从 sd 卡中删除文件

> ID：15849270
> 
> 赞同：0
> 
> 时间：2013-04-06T09:37:53.763
> 
> 标签：android, android-file

我正在尝试从我的 SD 卡中删除文件，但出现此错误

```
04-06 11:36:25.762: W/System.err(4214): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
04-06 11:36:25.782: W/System.err(4214):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
04-06 11:36:25.782: W/System.err(4214):     at java.util.ArrayList.get(ArrayList.java:304)
04-06 11:36:25.782: W/System.err(4214):     at com.myapp.functions.DownloadedAlbumLazyAdapter$1$1.onClick(DownloadedAlbumLazyAdapter.java:96)
04-06 11:36:25.782: W/System.err(4214):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
04-06 11:36:25.792: W/System.err(4214):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 11:36:25.792: W/System.err(4214):     at android.os.Looper.loop(Looper.java:137)
04-06 11:36:25.792: W/System.err(4214):     at android.app.ActivityThread.main(ActivityThread.java:4440)
04-06 11:36:25.792: W/System.err(4214):     at java.lang.reflect.Method.invokeNative(Native Method)
04-06 11:36:25.792: W/System.err(4214):     at java.lang.reflect.Method.invoke(Method.java:511)
04-06 11:36:25.792: W/System.err(4214):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-06 11:36:25.792: W/System.err(4214):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-06 11:36:25.792: W/System.err(4214):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我删除文件的代码：

```
dbHelper = new DatabaseHelper(activity);
                            dbHelper.openDB();
                            try {
                                ArrayList<Songs> downSongs = new ArrayList<Songs>();
                                Log.v("--", downSongs.size()+"");
                                downSongs = dbHelper
                                        .getDownloadedSongsForAlbum(data.get(
                                                position).getTAG_ID());
                                for (int i = 0; i < downSongs.size(); i++) {
                                    File file = new File(downSongs.get(i)
                                            .getSONG_MP3());
                                    Log.v("--", downSongs.get(i).getSONG_MP3());
                                    Log.v("--",file.delete()+"");
                                    dbHelper.removeDownloadedAlbum(data.get(i)
                                            .getTAG_ID());
                                    dbHelper.removeDownloadedSong(downSongs
                                            .get(i).getSONG_MP3());
                                    dbHelper.closeDB(); 
```

以及从 db 获取下载歌曲的功能：

```
public ArrayList<Songs> getDownloadedSongsForAlbum(String albumID){
        Cursor c = database.rawQuery("SELECT * FROM downloaded_songs " + "WHERE "
                + "album_id" + " = '" + albumID + "'", null);
        ArrayList<Songs> songs=new ArrayList<Songs>();
        if (c != null)
            if (c.moveToFirst()) {
                do {
                    String title = c.getString(c.getColumnIndex("title"));
                    String artist = c.getString(c.getColumnIndex("artist"));
                    String mp3 = c.getString(c.getColumnIndex("mp3"));
                    String mp4 = c.getString(c.getColumnIndex("mp4"));
                    String thumb = c.getString(c.getColumnIndex("thumb"));
                    songs.add(new Songs(title, artist, mp3, mp4, "http://mylink.com/cover_image/"+thumb));
                } while (c.moveToNext());
            }
        return songs;
    } 
```

# php - mysql 从时间戳中选择月份

> ID：15849276
> 
> 赞同：0
> 
> 时间：2013-04-06T09:39:00.003
> 
> 标签：php, mysql, codeigniter, date, timestamp

我有一个 mysql 查询，但它还不能正常工作。这个想法是：我有一个月历，所以我从我的数据库中选择当前月份的所有项目。

我选择电视节目剧集，它们在特定日期播出，但第二天就可以播放。我想在我的 cal 中有可用的日期。举一个具体的例子：一集于 2013 年 3 月 31 日播出，并于 2013 年 4 月 1 日播出。本集不会从数据库中选择。我尝试过这样的事情：

```
$this->db->where('MONTH(FROM_UNIXTIME(first_aired+86400))='.$month); 
```

但它没有用。有谁知道解决方案？这是我的完整代码：

```
$this->db->select('*, episodes.overview as overview, episodes.id as ep_id, shows.id as id');
$this->db->from('episodes');
$this->db->join('shows', 'episodes.imdb_id = shows.imdb_id');

$this->db->where('CHAR_LENGTH(episodes.ep_title) > 1');

$this->db->where('MONTH(FROM_UNIXTIME(first_aired))='.$month);
$this->db->where('YEAR(FROM_UNIXTIME(first_aired))='.$year);
$this->db->order_by('episodes.first_aired', 'DESC');

$data = $this->db->get()->result_array(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:53:49.717

使用 MySQL[`DATE_ADD`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)函数：

```
select mydate, date_add(mydate, interval 1 day) from testdata; 
```

因此，如果您想获得第二天的月份，请使用`month(date_add(...))`

```
mysql> select mydate, date_add(mydate, interval 1 day) "next day", month(date_add(mydate, interval 1 day)) "month of next day" from testdata;
+------------+------------+-------------------+
| mydate     | next day   | month of next day |
+------------+------------+-------------------+
| 2013-01-31 | 2013-02-01 |                 2 |
| 2013-01-01 | 2013-01-02 |                 1 |
+------------+------------+-------------------+
2 rows in set (0.00 sec) 
```

因此，对于您的查询，请使用类似`$this->db->where('MONTH(DATE_ADD(first_aired, INTERVAL 1 DAY))='.$month);`. 哦，你可能必须在`FROM_UNIXTIME`这里和那里添加一个。

# hibernate - org.hibernate.MappingException：无法确定类型：java.util.Set，表：USERS，列：[org.hibernate.mapping.Column(invoices)]

> ID：15849278
> 
> 赞同：32
> 
> 时间：2013-04-06T09:39:05.733
> 
> 标签：hibernate, jpa, hibernate-mapping, hibernate-annotations

我有一个问题，Hibernate 无法确定表 USERS 中的 Set 类型。我正在尝试通过一对多关系创建表 INVOICES 的外键。一个用户可以生成多张发票。我的 User.java 如下所示。

```
@Entity
@Table(name="USERS")
public class User {

    @Id
    @Column(name="User_Id",nullable=false)
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Integer user_id;

    @Column(name="NAME")
    private String name;

    @Column(name="Address")
    private String address;

    @Column(name="Designation")
    private String designation;

    private Set<Invoice> invoices;

    /*@OneToMany
    @JoinColumn(name="Rec_Invoice_ID", nullable=false)
    private Set<RecurringInvoice> recurring_invoices;*/ 
```

我正在尝试使用 INVOICE-ID 作为 USERS 表中的外键。我按照这里给出的说明 [休眠：注释一对多（外键）](http://tadtech.blogspot.in/2007/09/hibernate-annotation-one-to-many.html)

```
 @OneToMany
    @JoinColumn(name="INVOICE_ID", nullable=false)
    public Set<Invoice> getInvoices() {
        return invoices;
    }

    public void setInvoices(Set<Invoice> invoices) {
        this.invoices = invoices;
    }

/*   public Set<RecurringInvoice> getRecurring_invoices() {
        return recurring_invoices;
    }

    public void setRecurring_invoices(Set<RecurringInvoice> recurring_invoices) {
        this.recurring_invoices = recurring_invoices;
    }
*/
    // Getters and Setters
    public Integer getUser_id() {
        return user_id;
    }

    public void setUser_id(Integer user_id) {
        this.user_id = user_id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getDesignation() {
        return designation;
    }

    public void setDesignation(String designation) {
        this.designation = designation;
    }

} 
```

我的 Invoice.java 如下所示。

```
@Entity
@Table(name="INVOICES")
public class Invoice {

    private Integer invoice_id;

    @Column(name="Date_Created", nullable=false)
    private Timestamp dateCreated;

    @Column(name="DESCRIPTION")
    private String description;

    @Column(name="Total_Amount")
    private Double totalAmount;

    @Column(name="Tax_Amount")
    private Double taxAmount;

    @Column(name="Due_Date")
    private Timestamp dueDate;

    @Column(name="deleted")
    private boolean deleted;

    private InvoiceItemsDetails invoiceItemsDetails;

    private Client client;

    @OneToOne
    @JoinColumn(name="ID", nullable=false)
    public Client getClient() {
        return client;
    }

    public void setClient(Client client) {
        this.client = client;
    }

    public Date getDueDate() {
        return dueDate;
    }

    public void setDueDate(Timestamp dueDate) {
        this.dueDate = dueDate;
    }

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="INVOICE_ID", nullable=false, insertable=false,updatable=false)
    public Integer getInvoice_id() {
        return invoice_id;
    }

    public void setInvoice_id(Integer invoice_id) {
        this.invoice_id = invoice_id;
    }

    public Date getDateCreated() {
        return dateCreated;
    }

    public void setDateCreated(Timestamp dateCreated) {
        this.dateCreated = dateCreated;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public Double getTotalAmount() {
        return totalAmount;
    }

    public void setTotalAmount(Double totalAmount) {
        this.totalAmount = totalAmount;
    }

    public Double getTaxAmount() {
        return taxAmount;
    }

    public void setTaxAmount(Double taxAmount) {
        this.taxAmount = taxAmount;
    }

    public boolean isDeleted() {
        return deleted;
    }

    public void setDeleted(boolean deleted) {
        this.deleted = deleted;
    }

    @OneToOne
    @JoinColumn(name="Invoice_Item_Detail_id", nullable=false)
    public InvoiceItemsDetails getInvoiceItemsDetails() {
        return invoiceItemsDetails;
    }

    public void setInvoiceItemsDetails(InvoiceItemsDetails invoiceItemsDetails) {
        this.invoiceItemsDetails = invoiceItemsDetails;
    }

} 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-04-06T09:57:21.577

如果我没记错的话，Hibernate 不允许您将注释与字段/getter 一起混合和匹配。如果您的`@Id`注释设置在字段上，则所有映射都应遵循字段。尝试`@OneToMany @JoinColumn(name="INVOICE_ID", nullable=false)`从`getInvoices()`to`private Set<Invoice> invoices;`这个模式也应该应用于你的`Invoice`班级

# php - 提交不会触发 jquery 功能

> ID：15849280
> 
> 赞同：0
> 
> 时间：2013-04-06T09:39:32.117
> 
> 标签：php, jquery, forms

我有这个 JS 脚本，它应该检查表单的所有文件。问题是这个函数没有被调用，我不明白为什么。

```
$j(document).ready(function(){  

function validateEmail(email) {         
    var pattern = "/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/";
    return email.match(pattern);  
} 

$j('#contact_submit').submit(function(e){
    if($j('#contact_name').val() == "") {
        e.preventDefault();
        alert("Devi inserire un nome per inviare l'email");
        return false;
    }
    if($j('#contact_email').val() == "") {
        e.preventDefault();
        alert("Devi inserire un contatto email valido per inviare l'email");
        return false;
    }
    if(validateEmail($j('#contact_email').val()) == null)
    {
        e.preventDefault();
        alert("L'email inserita non è in un formato valido");
        return false;
    }
    if($j('#contact_text').val() == "") {
        e.preventDefault();
        alert("Devi inserire un testo per inviare l'email");
        return false;
    }
    return true;
}); 
```

});

这是表格

```
<form method="post" name="form" action="email.php">
<table width="550" border="0" align="center" cellpadding="4" cellspacing="0">
      <td align="right">Nome*</td>
      <td><input maxlength="50" id="contact_name" name="contact_name"  size="30" /></td>
    </tr>
    <tr>
      <td align="right">Città</td>
      <td><input maxlength="50" id="contact_city" name="contact_city" size="30" /></td>
    </tr>
    <tr>
      <td align="right">N. Telefono</td>
      <td><input maxlength="20" id="contact_tel" name="contact_tel" size="30" /></td>
    </tr>
    <tr>
      <td align="right">E-mail*</td>
      <td><input maxlength="30" id="contact_email" name="contact_email"  size="30" /></td>
    </tr>
    <tr>
      <td align="right">Testo *</td>
      <td><textarea cols="50" id="contact_text" name="contact_text" rows="5" class="tinymce"></textarea></td>
    </tr>
    <tr>
      <td colspan="2" align="center">
      <p>I campi contrassegnati con l'asterisco (*) sono obbligatori</p>
      <p>   <input id="contact_submit" type="submit" value="Invia" />
            <input id="contact_reset" type="reset" value="Annulla" />
        </p></td>
    </tr>
</table>
</form> 
```

只需单击提交按钮，就会调用表单并通过电子邮件发送数据，避免使用 jquery 功能。怎么了？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:41:14.990

将 id 添加到表单而不是按钮。

```
<form id="contact_submit" method="post" name="form" action="email.php"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:41:36.970

它应该是：

```
$("form[name=form]").submit(... 
```

提交事件发生在表单上，​​而不是提交按钮上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:41:19.197

该按钮没有`submit()`处理程序。使用`click()`处理程序。

```
$j('#contact_submit').click(function(e){

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T09:41:25.913

您的表单没有 ID。因此，它不会附加您的提交功能。

提交按钮只有点击事件，没有提交事件。

# ruby-on-rails - 无法使用多态关联收藏用户

> ID：15849286
> 
> 赞同：1
> 
> 时间：2013-04-06T09:39:44.077
> 
> 标签：ruby-on-rails

使用以下系统，**用户**可以以以下格式收藏**样式**：

```
=> #<Favorite id: 59, user_id: 2, favoritable_id: 15, favoritable_type: "Style", created_at: "2013-04-06 08:47:08", updated_at: "2013-04-06 08:47:08"> 
```

我已经构建了系统以使**用户**也可以收藏**用户**，但是由于某种原因，当在**User**`Favorite.create!(:user => user)`上调用时，该行没有创建预期的收藏模型对象，就像在**Style**上调用时一样。相反，我得到如下零点：

 ****```
=> #<Favorite id: 65, user_id: 2, favoritable_id: nil, favoritable_type: nil, created_at: "2013-04-06 09:35:07", updated_at: "2013-04-06 09:35:07"> 
```

* * *

* * *

**问题在上面。详情如下**

* * *

* * *

最喜欢的班级：

```
class Favorite < ActiveRecord::Base
 belongs_to :favoritable, :polymorphic => true
 belongs_to :user
 attr_accessible :user
 validates_presence_of :user
 validates_uniqueness_of :user_id, :scope => [:favoritable_type, :favoritable_id]
end 
```

模型定义，包括最喜欢的模块（见下文）：

```
class User < ActiveRecord::Base
  include Favoritable

class Style < ActiveRecord::Base
  include Favoritable 
```

喜欢的模块：

```
module Favoritable
  extend ActiveSupport::Concern

  included do
    attr_accessible :favorites
    has_many :favorites, :as => :favoritable, :autosave => true
    accepts_nested_attributes_for :favorites

    def add_favorite(user)
      self.favorites << Favorite.create!(:user => user)
      save
    end

    def delete_favorite(user)
      self.favorites.where(:user_id => user.id).each do |favorite|
        favorite.destroy
      end
    end

  end

end 
```

收藏夹控制器：

```
class FavoritesController < ApplicationController

  def fav_user
    @user = User.find(params[:id])
    @user.add_favorite(current_user)
    respond_to do |format|
      format.js { render :action => "update_favorite_disp", :layout => false }
    end
  end

  def delete_fav_user
    @user = User.find(params[:id])
    respond_to do |format|
      if @user.delete_favorite(current_user)
        format.js { render :action => "update_favorite_disp", :layout => false }
      end  
    end
  end 

  def fav_style
    @style = Style.find(params[:id])
    @style.add_favorite(current_user)
    respond_to do |format|
      format.js { render :action => "update_favorite", :layout => false }
    end
  end 

  def delete_fav_style
    @style = Style.find(params[:id])
    respond_to do |format|
      if @style.delete_favorite(current_user)
        format.js { render :action => "update_favorite", :layout => false }
      end  
    end
  end 

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:46:49.890

您需要在 :favoritable 模型中传递`add_favorite`：

```
def add_favorite(user)
  Favorite.create!(:user =>user, :favoritable => self)
save 
```

`delete_favorite`还需要根据`:favoritable_id`, 而不是删除`:user_id`：

```
def delete_favorite(user)
  user.favorites.where(:favoritable_id => self.id).each do |favorite|
    favorite.destroy
  end
end 
```****

# ruby-on-rails - 如何将 Rails 3 应用程序挂载到现有的 Rails 2.3 应用程序

> ID：15849289
> 
> 赞同：1
> 
> 时间：2013-04-06T09:40:07.250
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-2, rails-engines

我有一个 Rails 2.3 应用程序。我的要求很简单，我需要将 Rails 新版本 3.2 安装到我现有的 Rails 2.3 版本。可能吗？我可以为此使用 Rails 引擎吗？最后，我希望我的应用程序的主要部分在 Rails 2.3 中，而在 Rails 3.2 中的一些新部分/功能不更新我的 Rails 2.3 版本。任何人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:57:10.687

A Guide 是 Ryan Bates 的 Rails-casts 的部分截屏系列

```
http://railscasts.com/episodes/225-upgrading-to-rails-3-part-1
http://railscasts.com/episodes/226-upgrading-to-rails-3-part-2
http://railscasts.com/episodes/227-upgrading-to-rails-3-part-3 
```

ASCII 转换：

```
http://asciicasts.com/episodes/225-upgrading-to-rails-3-part-1

http://asciicasts.com/episodes/226-upgrading-to-rails-3-part-2

http://asciicasts.com/episodes/227-upgrading-to-rails-3-part-3 
```

# jqgrid - 单击按钮时在 JQgrid 中重新加载数据不起作用

> ID：15849292
> 
> 赞同：0
> 
> 时间：2013-04-06T09:40:18.103
> 
> 标签：jqgrid

我已经成功地在我的网格中加载了数据。我已启用单元格编辑，单击一个单元格时它将处于编辑模式，并且可以编辑多个单元格。编辑后的数据将在稍后单击自定义更新按钮时存储。单击另一个自定义按钮时，将在网格中添加一个新行，并且在单击前面提到的更新按钮时也将保存该行。

现在的问题是当我尝试使用“重新加载”功能重置编辑的值（即编辑的单元格值和保存前添加的新行）时，网格中没有任何反应。它与编辑的值和空的保持相同新行...

我的代码在这里

```
$scope.init = function() {
        var grid = $("#list");
        var lastSel, dataSel, dataLen;
        var colD, colM, colN, userdata;
        jQuery.ajax({
        async: false,
            type: "GET",
            url:"getData.htm",
            data: "",
            dataType: "json",          
            success: function(result){
                colD = result.colData, 
                colM = result.colModel, 
                colN = result.colNames, 
                userdata = colD.userdata; 
                jQuery("#list").jqGrid({
                    datatype: 'local',
                    data: colD.rootVar,   
                    colModel:colM,

                    sortorder: 'asc',
                    viewrecords: true,
                    resizable: true,
                    gridview: true,                
                    altRows: true,                                  
                    cellEdit:true,
                    footerrow: true,                    
                    scrollbar: true,
                    overflow: scroll,   
                    scrollrows: true,

                    loadonce:true,  

                    autowidth: true,
                    shrinkToFit: false, 

                    editurl: 'clientArray',
                    cellsubmit: 'clientArray', 

                    afterEditCell: function (id,name,val,iRow,iCol){ 

                    },                  
                    afterSaveCell : function(rowid,name,val,iRow,iCol) { 
                         var updtd = jQuery("#list").jqGrid('getCol', name, false, 'sum'); 
                         var objs = [];
                         objs[name] = updtd;
                         jQuery("#list").jqGrid('footerData','set',objs);
                    },                

                    loadComplete: function(data){  
                        jQuery("#list").jqGrid('footerData','set',{'Employer':'Max Guest Count:'});
                        var colnames = jQuery("#list").jqGrid ('getGridParam', 'colModel'); 

                        dataLen = colnames.length;  
                        dataSel = colnames[3]['name'];                  

                        for (var i = 3; i < colnames.length; i++){                      
                            var tot = jQuery("#list").jqGrid('getCol', colnames[i]['name'], false, 'sum');                            
                            var ob = [];
                            ob[colnames[i]['name']] = tot;
                            jQuery("#list").jqGrid('footerData','set',ob);
                        }

                        var ids = grid.getDataIDs();
                        for (var i = 0; i < ids.length; i++) {
                            grid.setRowData ( ids[i], false, {height: 25} );
                        }

                        jQuery ("table.ui-jqgrid-htable", jQuery("#list")).css ("height", 30);                 
                    },                

                    gridComplete: function () {
                            jQuery("#list").jqGrid('setColProp','id',{width:20});
                            jQuery("#list").jqGrid('setColProp','Employer',{width:80});
                            jQuery("#list").jqGrid('setColProp','Sponsor',{width:80});

                            var tabs = $("#tabs");
                            var width = tabs.width();
                            jQuery("#list").jqGrid('setGridWidth', width - 80, true);
                            jQuery("#list").jqGrid('setGridHeight', 270);
                     },         
                });   
            },         
        }); 

        jQuery("#list").jqGrid('setGroupHeaders', {
              useColSpanStyle: true, 
              groupHeaders:[
                {startColumnName: 'id', numberOfColumns: 1, titleText: ''},
                {startColumnName: 'Employer', numberOfColumns: 2, titleText: ''},
                {startColumnName: dataSel, numberOfColumns: dataLen, titleText: '<Strong><font color="white">Here Comes</font></Strong>'}
              ] 
        }); 

        $("#addtn").click(function(){
            var newRowData = {"Id":"","Employer":"","Sponsor":"",col1:"",col2:"",col3:"",col4:"",col5:"",col6:"",col7:"",col8:"",col9:"",col10:"",col11:"",col12:"",col13:"",col14:"",col15:"",col16:"",col17:"",col18:"",col19:"",col20:""};
            jQuery("#list").addRowData(0,newRowData,"first",1);             
            jQuery("#list").editRow(0,true);            
        });

        $("#rstbtn").click(function(){
            $("#list").jqGrid('setGridParam',{datatype:'json', page:1, current:true}).trigger('reloadGrid')
       });          
    };  

I will really appreciate if someone can advice on this.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:59:57.007

可能是因为这一行： `loadonce:true,` 在 jqgrid 定义中。将其设置为 false 并重试。

对于重新加载，请尝试以下代码：

```
 $( '#list' ).trigger( 'reloadGrid', [{ page: 1}] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-13T10:31:43.527

下面的代码对我有用，可以从数组中加载更新的数据。

```
$('#grid').jqGrid('clearGridData');
$("#grid").jqGrid('setGridParam',{data: DataArr, datatype:'local'}).trigger('reloadGrid'); 
```

# apache - .htaccess 编辑时出现错误 500，但加载了 mod_rewrite

> ID：15849296
> 
> 赞同：1
> 
> 时间：2013-04-06T09:40:30.273
> 
> 标签：apache, .htaccess, mod-rewrite, internal-server-error

就标题而言，我的 .htaccess 文件有问题，一切都应该设置好，但是我是否写了一些基本的东西

```
RewriteEngine on 
```

它开始给我很好的 500 内部服务器错误。我在 Apache 服务器 (UNIX) 上的 localhost 上托管

显然，我三重检查了一切是否设置正常，并且最重要的是加载了 mod_rewrite。

感谢您的宝贵帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T11:35:36.070

如果您放入文件中的*每种* 指令类型（即缓存、、、`FilesMatch`等`ErrorDocument`）都发生错误，那么我现在可以想到两个可能的选项：

1.  您文件的编码`.htaccess`与您正在运行的服务器不兼容。尝试将其转换为 ANSI，然后再试一次（Apache 不支持[Byte Order Marks](http://en.wikipedia.org/wiki/Byte-order_mark)，因此您需要将其保存为 ANSI 或 UTF-8，无需 BOM）。如果这不起作用：

2.  `AllowOverride`设置不正确，或根本没有设置。如果您有权访问虚拟主机/目录配置，则需要通过`AllowOverride All`在`<Directory>`容器中添加该行来启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:57:01.247

当您尝试删除代码`RewriteEngine on`并且 URL 重新映射或 URL 重定向仍然运行良好时，您不必将该代码放入您的`.htaccess`文件中，因为您的 HTTP 服务器已配置为重写引擎已打开。但是，如果您尝试删除它并且重写或重定向停止，那么您必须`.htaccess`在问题中包含所有代码。`RewriteEngine on`那么如果它是空的，那么如果你连一个都不会申请，为什么还要转`RewriteRule`呢？

你有没有试过这个：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^notexist.html$ /index.html 
```

如果 URL 重新映射到*/index.html*，请尝试访问*yourdomain.com/notexist.html*。

# bash - 如何在执行前修改每个 bash 命令？

> ID：15849298
> 
> 赞同：5
> 
> 时间：2013-04-06T09:40:40.787
> 
> 标签：bash, shell

有没有办法用脚本/钩子修改在 bash 提示符下输入的每个命令？

在我的理想世界中，脚本会在用户输入命令后但在按下 Enter 键之前触发。它将获取命令字符串作为参数，对其进行修改并将其交给 bash 执行（因此一切都会透明地发生）。

我会将此钩子用于一些无法使用别名完成的特定于公司的替换，但最重要的是，如果可以做到这一点，我很感兴趣。

我知道一些技巧可以在执行最后一个命令（`trap 'function' DEBUG`等等）后对其执行某些操作，因为有很多关于该场景的问题，但这在这里没有帮助。

谢谢和亲切的问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:17:10.487

你想要的是一种命令完成——在我看来。

bash 行编辑背后有很多东西：可绑定的 readline 命令，或命令完成和命令替换。

首先，您可以编写和编译自己的 bash 内置函数： [http ://www.drdobbs.com/shell-corner-bash-dynamically-loadable-b/199​​102950](http://www.drdobbs.com/shell-corner-bash-dynamically-loadable-b/199102950)

接下来，您可以通过人们所说的编辑行或读取行来更改 bash：也许从这里开始：http: [//www.math.utah.edu/docs/info/features_7.html](http://www.math.utah.edu/docs/info/features_7.html)

[http://www.gnu.org/software/bash/manual/html_node/Command-Line-Editing.html](http://www.gnu.org/software/bash/manual/html_node/Command-Line-Editing.html)

# php - 广告列表未在 PHP 中显示

> ID：15849300
> 
> 赞同：0
> 
> 时间：2013-04-06T09:41:09.770
> 
> 标签：php, html, mysql, css

我正在使用 PHP 和 mysql 创建一个网站...在我的代码中，有一个包含广告图像的列表...问题是如果我在 php 的代码中使用这些图像，即如果我的页面是 index.php 并且我通过 wamp 运行，但是如果我将代码放在像 index.html 这样的简单 html 页面中，广告的图像就会显示出来....我触发错误并在 index.php 中发现，ul包含广告以某种方式隐藏...我不知道为什么会出现这种行为...需要您的指导...

查看屏幕截图

对于 index.php [http://zahms.com/awais/image1.png](http://zahms.com/awais/image1.png)

对于 index.html [http://zahms.com/awais/image2.png](http://zahms.com/awais/image2.png)

请注意，有一些奇怪的类被分配给 index.php 中的 li 标记，但这不在我的实际代码中..这是我的该列表的代码....对于 index.php 和索引.html

```
<ul class="Ads">
<li><img src="images/Ad.png" alt="ad1" /></li>
<li><img src="images/Ad.png" alt="ad2" /></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:58:28.040

在您的 index.php 中，您必须将图像的 src 从“images/Ad.png”更改为“Ad.png”

```
<ul class="Ads">
<li><img src="Ad.png" alt="ad1" /></li>
<li><img src="Ad.png" alt="ad2" /></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:50:59.563

要么你没有正确关闭 php 标签，要么你没有正确地回显它：

```
<?php 
echo '<ul class="Ads">
<li><img src="images/Ad.png" alt="ad1" /></li>
<li><img src="images/Ad.png" alt="ad2" /></li>
</ul>';
?> 
```

或者只是没有 php 标签

```
<ul class="Ads">
<li><img src="images/Ad.png" alt="ad1" /></li>
<li><img src="images/Ad.png" alt="ad2" /></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:10:36.103

如果我将图像放在名为“images”的文件夹中并提供正确的路径为“images/Ad.png”，我不知道为什么以及如何图像无法正常工作......我创建了一个名为“uploads”的新文件夹并放入该文件夹中的图像并将该路径提供为'uploads / Ad.png'..所以图像不适用于一个文件夹并且它们使用相同的方法但用于另一个文件夹仍然是一个谜。 .这是代码

```
 <ul class="Ads"> 
  <li><img src="uploads/Ad.png" alt="ad1" /></li>
  <li><img src="uploads/Ad.png" alt="ad2" /></li> 
  </ul> 
```

这是工作人员......如果有人找到原因，请告诉它，以便我下次小心......谢谢

# javascript - 防止页面刷新

> ID：15849307
> 
> 赞同：-1
> 
> 时间：2013-04-06T09:41:44.343
> 
> 标签：javascript, jquery

这是场景：我的表单中有 3 个下拉选项，我已经设置了第一个下拉选项，以便它会转到另一个被选中的页面，但它会影响我的另外两个下拉列表，这样当我选择一个选项时页面刷新...下面是我使用的 java 脚本，因此第一个下拉菜单有效...

```
$(function() {

    $("#submit").hide();

    $("#form1 select").change(function() {
        window.location = $("#form1 select option:selected").val();
    })

}); 
```

有没有一种方法可以让我保留这个 JS，同时在我在剩余的 2 个下拉列表中选择一个选项时防止页面刷新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:43:55.737

提供`<select>`一个 ID 并改用该选择器。此外，您可以省略`option:selected`.

```
$('#id-of-the-select').change(function() {
    window.location = $(this).val();
}); 
```

# ios - 在导航栏上创建居中的 UILabel 并更新该标签？

> ID：15849308
> 
> 赞同：0
> 
> 时间：2013-04-06T09:41:46.300
> 
> 标签：ios, objective-c, uilabel

有没有办法让 UILabel 居中在导航栏的顶部。我希望标签说出一个级别编号并以编程方式对其进行更新，但我不确定如何执行此操作。我也想尽量减少内存。

预先感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:46:17.743

```
self.navigationItem.title = @"The title"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:48:44.347

利用：

```
[self.navigationItem setTitle:@"The title"]; 
```

为了更改标签上的文本。

# opengl-es - 如何在opengl es中缩放和旋转纹理？

> ID：15849310
> 
> 赞同：1
> 
> 时间：2013-04-06T09:42:19.397
> 
> 标签：opengl-es

我正在为我的 iphone 游戏使用 opengl ES。要缩放和旋转我的对象，我这样做： glScalef( scaleX , scaleY ,1); glRotatef(rotationZ, 0.0f, 0.0f, 1.0f)

我正在使用带有 orthof(-1,1,-1,1,-1,1) 的正交屏幕。我的问题是当我旋转对象时，图像会倾斜。我理解为什么会发生这种情况，因为我将 wrt 缩放到屏幕尺寸，所以在旋转它时会改变图像尺寸。我能做些什么来防止它被歪曲。

```
glViewport(0,0, (GLint)screenWidth, (GLint)screenHeight);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();

glOrthof(-1,1,-1,1,-1,1);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glPushMatrix();

glTranslatef(positionX, positionY,0.0f);

glScalef(scaleX , scaleY ,1);

glRotatef(rotationZ, 0.0f, 0.0f, 1.0f); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:03:52.763

使用与屏幕纵横比相匹配的正投影，而不仅仅是发送一堆投影。除非您有一个方形屏幕，否则您的左/右不应与您的顶部/底部相同，否则您会看到倾斜。

# facebook - 非 Facebook 用户的 Facebook 评论

> ID：15849311
> 
> 赞同：1
> 
> 时间：2013-04-06T09:42:20.270
> 
> 标签：facebook, facebook-comments

我正在尝试实现 facebook 评论，我想知道非 facebook 用户是否可以在不使用 facebook 允许的登录提供程序的情况下发表评论？例如，在不登录的情况下以访客身份发表评论。

![在此处输入图像描述](https://i.stack.imgur.com/69dxl.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:58:59.070

对不起，你不能！Facebook 喜欢和评论 Facebook 仅允许 Facebook 允许。[您可以在Facebook 评论文档](https://developers.facebook.com/docs/reference/plugins/comments/)中阅读更多内容

# php - 回显到 div 问题

> ID：15849312
> 
> 赞同：0
> 
> 时间：2013-04-06T09:42:30.877
> 
> 标签：php, html, echo

我正在尝试回显到**div**中，但出现以下错误：

```
 Notice: Undefined index: count on $SESSION['count'] 
```

当 $SESSION['error'] 被触发时，我收到以下错误：

```
 Undefined index: count on $SESSION['error'] 
```

当 $SESSION['count'] 被触发时，我收到与上述类似的错误。

这是PHP中的代码。

```
<?php

        if(isset($_SESSION['error'])){

            } else { 

             foreach($_SESSION['search_output'] as $value){
                $value['links'];
                $value['title'];
                $value['page_body'];

                $title = $value['title'];
                $link = $value['links'];
                $body = $value['page_body'];

                $search_output .= "<a href='".$link."'>".$title."</a> - $body<br><br>";}
    }
    ?>

    <div id="topResult">
        <?php  echo $_SESSION['error']; unset($_SESSION['error']);?> 
        <?php  echo ($_SESSION['count']); unset($_SESSION['count']);?> 
    </div>

    <div id="searchBox"><?php echo $search_output; ?></div> 
```

我不能像`$search_output`变量一样回显结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:51:15.587

采用

```
<?php  if(isset($_SESSION['error'])) {echo $_SESSION['error']; unset($_SESSION['error']);} ?> 
<?php  if(isset($_SESSION['count'])) {echo ($_SESSION['count']); unset($_SESSION['count']);} ?> 
```

# json - AngularJS、$resource 和应用程序缓存

> ID：15849313
> 
> 赞同：1
> 
> 时间：2013-04-06T09:42:32.380
> 
> 标签：json, caching, angularjs, offline

我正在使用角度和弹簧编写应用程序。它必须能够离线工作。在做了一些研究之后，我发现应用程序缓存是最好的方法，因为我需要缓存所有 .css 和 .js 文件。问题是我无法获取 spring 返回并由 $resource 对象要求缓存的数据。当我关闭服务器时，静态数据被缓存，但我在 chrome 的控制台中收到关于他无法检索的 .json 的“GET 错误”。

```
angular.module('MonService', ['ngResource']).
factory('Projet', function($resource){
return $resource('json/accueil');
}); 
```

我尝试过一些方法，例如手动将响应保存在 .json 文件中，然后缓存该文件并将其用作 $resource 的源，但它似乎又长又复杂......

或使用本地存储，例如：

```
var cache, AmettreDansCache;
donne = {};

cache= window.localStorage.getItem('projets');

  if (!cache) {
   AmettreDansCache= $resource('json/accueil');
   window.localStorage.setItem('projets', JSON.stringify(AmettreDansCache));
   return AmettreDansCache
  }
 else{
    return angular.extend(donne, JSON.parse(cache));
 } 
```

我认为这不起作用，无论如何仅使用应用程序缓存的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-28T09:36:18.823

有一个构建在资源之上的模块，它在读取和写入数据时进行缓存。你应该检查一下。它将在客户端浏览器上保留您的数据副本，当保存失败（由于离线）时，它将在本地保存并继续重试保存。

[https://github.com/goodeggs/angular-cached-resource](https://github.com/goodeggs/angular-cached-resource)

还有一篇关于模块的小文章：

[http://bites.goodeggs.com/open_source/angular-cached-resource/](http://bites.goodeggs.com/open_source/angular-cached-resource/)

# architecture - 多区域时的 AWS 架构

> ID：15849331
> 
> 赞同：13
> 
> 时间：2013-04-06T09:44:11.950
> 
> 标签：architecture, amazon-web-services, scalability

最近有人向我介绍了 AWS，我真的很喜欢它。但是，我问自己一些关于多区域架构的问题（这可能很愚蠢）。

假设一个应用程序被欧洲人和亚洲人使用。我的第一个想法是在欧洲添加 EC2 实例，以及用于保存静态数据的 S3 存储桶以及在欧洲添加 SQS 队列和 ElastiCache。这对欧洲人来说会非常快，但对亚洲人来说会慢一些。

为了解决这个问题，我会为静态数据添加 CloudFront，以便为亚洲人快速提供图像。但是，对服务器的请求（Ajax 请求...）仍然会有一些延迟，因此解决方案是在新加坡/东京地区也添加一个 EC2 实例。

但是，出现了新问题：如果将请求分派到东京 EC2 实例，那么它是否需要从存储在欧洲的 SQS 接收消息或访问 ElastiCache 数据 => 再次延迟 + 区域间传输的成本。所以我们也需要在亚洲添加 SQS 和 ElastiCache 吗？

也许我错过了一些东西，跨区域的 AWS 请求非常快，但据我了解，如果我们想要多区域的快速体验，我们基本上需要在每个区域复制所有服务（可能除了 S3，因为我们可以为此使用 CloudFront，如果亚洲的 SQS 作业需要访问欧洲的 S3 资源，我想我们可以忍受延迟）。

无论如何，我理解正确吗？您是否有任何有关如何构建面向多区域的应用程序的资源？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T18:36:49.540

这些根本不是愚蠢的问题！这部分是绝对正确的：

```
Maybe I miss something, and cross-regions AWS requests are super-fast, but from
what I've understood, if we want fast experience for multi-regions, we basically
need to duplicate all services too every regions 
```

跨区域请求会受到光速和区域间网络拓扑的限制。我预计来自亚洲的请求将在大约 1/4 秒的往返时间内到达欧洲应用程序。大多数请求会更快，但您不能保证所有请求都会更快，因此您必须相应地进行设计。如果这还不够快，那么是的，您需要部署到更近的区域并将用户路由到适当的区域。需要往返的次数取决于您的应用程序的体系结构。如果您对 Elasticache 或 SQS 有很多请求，那么这 1/4 秒将很快加起来。如果您可以批量处理请求，那可能是可以容忍的。

要将用户路由到适当的区域，您需要查看[Route 53](http://aws.amazon.com/route53/)，它是 AWS 系列的另一部分。 [此关于 Route 53 的公告](http://aws.typepad.com/aws/2012/03/latency-based-multi-region-routing-now-available-for-aws.html)描述了您需要的区域之间基于延迟的路由。一旦用户被路由到适当的 EC2 实例，您部署到的每个区域都应该被隔离。您将使用 EC2、SQS、Elasticache 和任何其他 AWS 产品配置您的欧洲部署，这些产品均来自欧洲区域 (eu-west-1)。对于您的亚洲部署，您可以将其全部托管在 ap-southeast-1 区域中。一旦 Route 53 将亚洲用户连接到 ap-southeast-1 中的 EC2 实例，对 SQS、Elasticache 等的请求将在同一区域内，因此速度非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:28:58.337

Amazon Web Services 引入的实用程序模型正在帮助您在多个区域部署相同的服务。相同的 CLI 命令/Web 控制台/CloudFormation 脚本在所有区域中以相同的方式运行。因此，在新加坡和欧洲推出类似的服务对您来说并不复杂。不仅如此，您还可以从同一位置管理所有这些 - 云的力量。

它也不会因为您为使用的东西付费而变得更加昂贵，并且如果您在区域之间分配负载，您将获得或多或少相同的成本。例如，如果您需要 10 台服务器来为您的用户提供服务，那么您可以在欧洲拥有 5 台服务器，在新加坡拥有 5 台服务器。超过; [您可以使用auto-scaling](http://aws.amazon.com/autoscaling/)根据负载小时数在不同区域拥有不同数量的服务器。例如，欧洲醒着时欧洲有 8 个服务器，而新加坡晚上只有 2 个服务器，反之亦然。

通过将上述多区域服务（EC2、S3、ElasticCache、RDS...）与 Amazon CloudFront (CDN) 和 Route 53 (DNS) 相结合，您可以创建一个非常可扩展且价格合理的服务，在全球（欧洲）具有出色的延迟、亚洲、北美和南美......）。

# c - 不同的执行顺序导致Pthread程序的性能差异

> ID：15849334
> 
> 赞同：7
> 
> 时间：2013-04-06T09:44:15.380
> 
> 标签：c, multithreading, performance, unix, pthreads

这是我在 stackoverflow 上的第一篇文章，我的母语不是英语。这篇文章给您带来的不便请见谅。可能有点长，期待您的耐心等待。提前致谢！

我有一个 C 语言代码片段。这项工作是计算两个文件中的单词数。我使用 pthreads 来解决这个问题。但我发现**这两个语句的顺序**

> count_words(argv[1]);
> 
> pthread_create(&t1, NULL, count_words, (void *)argv[2]);

影响程序性能，这与我的预期相反。这是代码：

```
#include <stdio.h>
#include <pthread.h>
#include <ctype.h>
#include <stdlib.h>

int total_words;

int main(int argc, char *argv[]) {
    pthread_t t1;
    void *count_words(void *);

    if (argc != 3) {
        printf("usage: %s file1 file2\n", argv[0]);
        exit(1);
    }
    total_words = 0;

    count_words(argv[1]); // program runs faster when executing this first
    pthread_create(&t1, NULL, count_words, (void *)argv[2]);

    pthread_join(t1, NULL);
    printf("%5d: total words\n", total_words);
    return 0;
}

void *count_words(void *f) {
    char *filename = (char *)f;
    FILE *fp;
    int c, prevc = '\0';

    if ((fp = fopen(filename, "r")) == NULL) {
        perror(filename);
        exit(1);
    }
    while ((c = getc(fp)) != EOF) {
        if (!isalnum(c) && isalnum(prevc))
            total_words++;
        prevc = c;
    }
    fclose(fp);
    return NULL;
} 
```

**表现：**

我在命令行上使用“test program_name”运行程序来测试运行速度。输出是：

如果是这样的顺序：

> count_words(argv[1]);
> 
> pthread_create(&t1, NULL, count_words, (void *)argv[2]);

程序运行速度快：真实0.014s

如果是这样：

> pthread_create(&t1, NULL, count_words, (void *)argv[2]);
> 
> count_words(argv[1]);

程序运行缓慢：真实0.026s

**我所期望的：**

在案例 1 中，程序首先运行 count_word()。完成计数作业后，它会继续运行 pthread_create()。届时，新线程将帮助完成计数工作。因此，新线程在原始线程完成作业后执行作业，这是顺序运行而不是并行运行。在情况 2 中，程序在任何计数之前首先运行 pthread_create()，因此之后有两个并行线程进行计数。所以我希望案例 2 比案例 1 快。但我错了。情况 2 较慢。有人可以给我一些有用的信息吗？

**笔记**

请忽略我没有在全局变量 total_words 上设置互斥锁。这不是我关心的部分。该程序仅用于测试。请原谅它的不完美之处。

* * *

**编辑 1**

以下是我阅读一些建议后的补充和改进。

a) 补充：处理器是 Intel® Celeron(R) CPU 420 @ 1.60GHz。一芯。

b）改进：我改进了我的例子，有两个变化：

1）我放大了文件。file1 是 2080651 字节（约 2M），file2 是 file1 的副本。

2) 我修改了 count_words()。到达文件末尾时，使用 fseek() 将 fp 设置为开头并再次计数。重复计数 COUNT 次。定义 COUNT 20。下面是更改后的代码：

```
#define COUNT 20

// other unchanged codes ...

void *count_words(void *f) {
    // other unchanged codes ...
  int i;
  for (i = 0; i < COUNT; i++) {
      while ((c = getc(fp)) != EOF) {
          if (!isalnum(c) && isalnum(prevc))
              total_words++;
          prevc = c;
      }
      fseek(fp, 0, SEEK_SET);
  }
  fclose(fp);
  return NULL;
} 
```

fast_version（count_word() first）和slow_version（pthread_create() first）的输出：

管理员@ubuntu:~$ time ./fast_version file1 file2

12241560：总字数

真正的 0m5.057s

用户 0m4.960s

系统 0m0.048s

管理员@ubuntu:~$ time ./slow_version file1 file2

12241560：总字数

真正的 0m7.636s

用户 0m7.280s

系统 0m0.048s

我尝试了几次“time progname file1 file2”命令。每次运行可能会有十分之一或百分之一秒的差异。但差异并不大。

**编辑 2**

这部分是我根据一些提示做了一些实验后添加的——

> 当您在第一个线程完成执行后启动第二个线程时，没有上下文切换开销。

——用户315052。

实验是我改进了count_word()：

```
void *count_word(void *f) {
// unchanged codes
// ...
    for (i = 0; i < COUNT; i++) {
        while ((c = getc(fp)) != EOF) {
            if (!isalnum(c) && isalnum(prevc))
                total_words++;
            prevc = c;
        }
        fseek(fp, 0, SEEK_SET);
        printf("from %s\n", filename); // This statement is newly added.
    }
// unchanged codes
// ...
} 
```

添加语句 " printf("from %s\n", filename); " ，这样我就可以知道当时哪个文件（或线程）正在运行。快速版的输出是20次“from file1”，然后是20次“from file2”，慢速版是“from file1”和“from file2”混合打印。

看起来快速版本更快，因为没有上下文切换。但事实是，count_word() 完成后，原来的线程并没有死掉，而是创建了一个新线程，等待它终止。新线程运行时是否没有上下文切换？我仔细观察了屏幕，发现“from file2”的打印速度明显比“from file1”慢。为什么？是因为从file2计数时发生了上下文切换吗？

对于慢速版本，我们可以从输出中看到“from file1”和“from file2”的打印速度甚至比“from file2”在快速版本中的打印速度还要慢，因为它的上下文切换在并行计数上花费了更多时间，而在快速版本中，上下文切换并没有那么繁重，因为其中一个线程已经完成了它的工作并且只是在等待。

所以我认为主要原因是快速版本相对于慢速版本具有轻松的上下文切换。但是“打印速度”是我观察到的，可能没有那么严格。所以我不确定。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T10:40:50.030

在评论中，您写道：

> 处理器是 Intel® Celeron(R) CPU 420 @ 1.60GHz。一芯。

由于您只有一个核心，因此您的线程执行无论如何都会被序列化。您的程序具有两个并发运行的线程，因为每个线程都执行阻塞 I/O，因此需要支付线程上下文切换的开销。

当您在第一个线程完成执行后启动第二个线程时，没有上下文切换开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T09:52:54.440

*你是怎么测量的？*

实时并不表示您的程序运行了多长时间。您必须测量用户+系统时间。更重要的是，毫秒级别的有意义的计时在很大程度上取决于计时时钟的粒度。如果它以 60Hz 的频率运行，那么你就有问题了。提出有意义的基准是一**门艺术**……

首先，您应该找到一种方法来循环运行线程，例如 10.000 次并将数字相加。这至少可以让你摆脱毫秒计时问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T09:56:49.277

尝试做同样的测量，但运行你的程序 100 次并计算平均时间，在如此短的时间内，缓存的效果远非可以忽略不计。

# java - Derby：批量导入未设置 AUTO_INCREMENT

> ID：15849336
> 
> 赞同：1
> 
> 时间：2013-04-06T09:44:52.347
> 
> 标签：java, import, jpa-2.0, derby

假设我有以下内容`table`，由`Eclipselink`.

```
CREATE TABLE "ACCOUNT" ("ID" BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), "DTYPE" VARCHAR(31), "EMAIL" VARCHAR(255)); 
```

接下来我将从一个文件中批量导入，其中包含：

```
1,"admin_","myemail@domain.com"
2,"user_","anotheremail@domain.com"
3,"user_","yetanotherone@domain.com" 
```

导入成功，使用`ij tool`from`Apache`和`SYSCS_UTIL.SYCS_IMPORT_TABLE()`.

接下来我将通过`JPA2`. 这导致：

```
Caused by: org.apache.derby.client.am.SqlException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL130406103359120' defined on 'ACCOUNT'. 
```

在不运行导入的情况下，我可以创建一个用户就好了。在我看来，导入没有考虑`AUTO_INCREMENT`表中指定的功能。我不需要更新`AUTO_INCREMENT`到`4`using `ALTER TABLE ACCOUNT AUTO_INCREMENT = 4;`，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:38:10.080

导入后，执行：

```
ALTER TABLE ACCOUNT ALTER COLUMN ID RESTART WITH 4 
```

请参阅此链接：[http ://db.apache.org/derby/docs/10.9/ref/rrefsqlj81859.html#rrefsqlj81859__rrefsqlj37860](http://db.apache.org/derby/docs/10.9/ref/rrefsqlj81859.html#rrefsqlj81859__rrefsqlj37860)

# ios - 如何在 iOS 上将不同行中的字符串写入 .txt 文件

> ID：15849339
> 
> 赞同：0
> 
> 时间：2013-04-06T09:45:03.680
> 
> 标签：ios, objective-c, xcode, string, writetofile

我正在尝试将字符串写入应用程序文档文件夹中的 tt 文件。我可以将字符串写入其中，但是当我将另一个字符串写入文件时，它会覆盖另一个字符串，是否可以将更多字符串写入文本文件，字符串之间有一个空行，很多都是这种格式

细绳

细绳

斯特林

…</p>

我正在使用此代码将字符串写入文本文件，它适用于一个字符串，但不适用于多个字符串。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains
        (NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];

        //make a file name to write the data to using the documents directory:
        NSString *fileName = [NSString stringWithFormat:@"%@/Barcodedata.txt",
                              documentsDirectory];
        //create content - four lines of text
        NSString *content = [NSString stringWithFormat:@"%@",sym.data];
        //save content to the documents directory
        [content writeToFile:fileName
                  atomically:NO
                    encoding:NSStringEncodingConversionAllowLossy
                       error:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:51:50.127

有几种方法可以做到这一点，具体取决于您实现代码的方式。

一种方法是将原始 .txt 文件加载到 NSMutableString 对象中，然后将该新行附加到字符串的末尾并重新写出文件（这不是超级有效，尤其是当您在 1000 之后开始附加时弦、100 弦、50 弦等）

或者您可以使用设置了附加位的低级 C 函数“ `fwrite`” 。`a`

编辑：

由于您想查看代码，因此我的第一个建议如下：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

//make a file name to write the data to using the documents directory:
NSString *fileName = [NSString stringWithFormat:@"%@/Barcodedata.txt", documentsDirectory];
//create content - four lines of text

NSError * error = NULL;
NSStringEncoding encoding;
NSMutableString * content = [[NSMutableString alloc] initWithContentsOfFile: fileName usedEncoding: &encoding error: &error];
if(content == NULL)
{
    // if the file doesn't exist yet, we create a mutable string
    content = [[NSMutableString alloc] init];
}

if(content)
{
    [content appendFormat: @"%@", sym.data];

    //save content to the documents directory
    BOOL success = [content writeToFile:fileName
                            atomically:NO
                              encoding:NSStringEncodingConversionAllowLossy
                                 error:&error];

    if(success == NO)
    {
        NSLog( @"couldn't write out file to %@, error is %@", fileName, [error localizedDescription]);
    }
} 
```

# iphone - 预期标识符？什么？

> ID：15849340
> 
> 赞同：0
> 
> 时间：2013-04-06T09:45:13.160
> 
> 标签：iphone, ios, ipad, block, objective-c-blocks

我在单例上声明了这个属性：

```
@property (nonatomic, copy) void (^onUpdate)(); 
```

在课堂上开始单身后，我有以下几行：

```
[self.singleton.onUpdate = ^{ 
  CGAffineTransform rot = CGAffineTransformMakeRotation(degreesToRadian(angle));
  [UIView animateWithDuration:0.1 animations:^{
      myself.object.transform = rot;
  }];
}]; 
```

我在最后一行出现“预期标识符”错误......什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:46:34.330

您的赋值语句周围有一对无关的括号。消除。

# ios - UIPageViewController 页面透明度

> ID：15849345
> 
> 赞同：1
> 
> 时间：2013-04-06T09:46:25.337
> 
> 标签：ios, objective-c, transparency, opacity, uipageviewcontroller

默认情况下，在使用 UIPageViewController 时，页面有点透明。翻页时可以看到这种半透明度。有什么方法可以使页面实体化，以使页面内容从另一侧不可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:29:59.717

听起来好像您已`doubleSided`设置为 true/yes。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

# .net - .NET const 影响编译的程序集大小

> ID：15849346
> 
> 赞同：4
> 
> 时间：2013-04-06T09:46:27.807
> 
> 标签：.net, compilation, constants

为什么`const`用法在编译时被它们的值替换，但仍然包含在程序集中？至少这是 IL DASM 和 Reflector 所展示的。

目前我正在使用`const`定义许多幻数和字符串，以便更容易地更改代码而不影响运行时性能。

现在我知道这不会影响使用的内存，但它仍然会影响编译的程序集大小，这对于手机应用程序来说至关重要。

另一个缺点是其他人在查看反汇编代码时更容易理解幻数。

我真的很感兴趣为什么编译器（Mono 和 .NET）会这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T09:53:49.060

此行为在[ECMA-335 标准](http://www.ecma-international.org/publications/standards/Ecma-335.htm)中指定（.NET 和 Mono 都是其中的实现）。引用第 II.22.9 节“常量”：

> *请注意，`Constant`信息不会直接影响运行时行为，尽管它通过反射可见（因此可用于实现诸如 提供的功能`System.Enum.ToString`）。编译器在导入元数据时在编译时检查此信息，但常量本身的值（如果使用）会嵌入到编译器发出的 CIL 流中。没有 CIL 指令可以`Constant`在运行时访问该表。*

也就是说，`const`值是“内联的”（可能是因为它们可以，并且出于性能原因），但仍然保存在元数据中，以便编译器和工具可以检查它们。

如果没有为字段的 -ness 发出元数据`const`，则会产生以下后果（可能还有其他后果——这只是两个示例）：

*   编译器或 Reflector 等工具无法再区分常规字段和`const`字段。
*   如果您使用 来检查一个字段`System.Reflection`，您将无法再使用该[`FieldInfo.IsLiteral`属性](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.isliteral.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T10:58:43.523

增加的程序集大小基本上是由于 C# 编译器发出了关于`const`-ness 的额外元数据。

* * *

您希望从这个简短的程序中得到什么输出？

```
class Program
{
    public const int C = 0;
    public       int F = 0;

    static void Main(string[] args)
    {
        foreach (FieldInfo field in typeof(Program).GetFields())
        {
            Console.WriteLine("{0}: IsLiteral = {1}", field.Name, field.IsLiteral);
        }
    }
} 
```

实际输出为：

```
C: IsLiteral = True
F: IsLiteral = False 
```

与 C# 源代码中的声明完全匹配：两个字段，其中一个`const`.

现在假设 C# 编译器决定不发出`Constant`元数据。那么输出将是：

```
C: IsLiteral = False
F: IsLiteral = False 
```

与 C# 源代码相比，这显然是不正确的，因为现在这两个字段都显示为非`const`.

最后，假设 C# 编译器决定根本不发出任何元数据`C`（因为它无论如何“内联”了该字段的值）：

```
F: IsLiteral = False 
```

这也是不正确的，因为反射不再报告 C# 源代码中明显存在的字段的存在。至少对我来说，那将是一个令人大开眼界的好时机。

这些反例应该清楚地说明为什么即使对于`const`字段也发出完整的元数据是一件好事。

# java - 如何获取变量类型？

> ID：15849347
> 
> 赞同：0
> 
> 时间：2013-04-06T09:46:29.363
> 
> 标签：java, android

在我的应用程序中，我有两个文本字段和一个提交。此应用程序计算此文本字段中的整数值。但是，如果我把文字放在那里 - 有错误。我如何检查这个文本字段的 int 以及如果没有整数如何显示消息。我的尝试：

```
EditText num1text=(EditText)findViewById(R.id.num1text);
EditText num2text=(EditText)findViewById(R.id.num2text);        
Float num1=Float.parseFloat(num1text.getText().toString());
Float num2=Float.parseFloat(num2text.getText().toString());

if (num1 instanceof Float && num2 instanceof Float)
{
Float answ = (num1 * num2) / 100;
TextView answer=(TextView)findViewById(R.id.ans);
answer.setText(answ);
}else
answer.setText("Message"); 
```

但是在其他情况下，我的应用程序仍然不会显示我的消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T09:51:12.877

正如其他人评论的那样，您可以在开始转换之前使用正则表达式来检查输入字段的内容。这是一个很好的建议，您应该在使用前清理所有用户输入。

如果你不这样做，或者不能：如果输入不能被转换，`Float.parseFloat()`操作就会抛出。`NumberFormatException`您需要使用`try...catch`构造来避免这种情况。

```
try {
    Float num1=Float.parseFloat(num1text.getText().toString());
    Float num2=Float.parseFloat(num2text.getText().toString());
    Float answ = (num1 * num2) / 100;
    TextView answer=(TextView)findViewById(R.id.ans);
    answer.setText(answ);
} catch (NumberFormatException e) {
    TextView answer=(TextView)findViewById(R.id.ans);
    answer.setText("Message");
} 
```

此外，您可以使用`android:inputType`布局 XML 中的属性将输入限制为仅数字（并获得数字键盘）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:51:58.337

您必须使用正则表达式：

```
if (YourVariable.matches("^[0-9,;]+$")) {
    // Contains only numbers
} else {
    // Contains NOT only numbers
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:50:51.953

如果输入是固定的，您必须始终需要整数/实数（数字）值，那么您可以`inputtype`在 xml 文件`EditText`中将 as 属性设置为数字。

这将软键盘仅在屏幕上显示数字键，因此您可以始终获取数字，而无需检查用户是否输入字符或数字值的类型

例如像这样

```
<EditText android:inputType="number"
.../> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T10:05:22.150

Float.parseFloat(num2text.getText().toString()); 如果不是浮点数，则抛出数字格式异常。捕捉异常。清除字段。显示输入无效的 toast 消息。

```
public class MainActivity extends Activity {
TextView answer;
EditText num1text,num2text;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    num1text=(EditText)findViewById(R.id.editText1);
    num2text=(EditText)findViewById(R.id.editText2);   
    Button b= (Button) findViewById(R.id.button1);
    answer = (TextView) findViewById(R.id.textView2);
    b.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try
            {
            Float num2=Float.parseFloat(num2text.getText().toString());
            Float num1=Float.parseFloat(num1text.getText().toString());
                            //if the numbers are not float throws a numberformat exception
            if (num1 instanceof Float && num2 instanceof Float)
            {
            Float answ = (num1 * num2) / 100;
            answer.setText(Float.toString(answ));
            }else
            answer.setText("Message");
            }
            catch(NumberFormatException e)
            {
                               //catch the exception clear the fields and display toast
                num1text.setText("");
                num2text.setText("");
                Toast.makeText(MainActivity.this, "Invalid Input Type!Check the input", 1000).show();
                e.printStackTrace();
            }

        }

    });

}
} 
```

# iphone - 从动态生成的文本字段中获取 textfield.text 值

> ID：15849351
> 
> 赞同：1
> 
> 时间：2013-04-06T09:46:57.287
> 
> 标签：iphone, ios, objective-c, ios5

我是新手，`Objective C` 我正在生成动态`textfields`并尝试从每个`textfield`按钮按下时获取 .text 值，但我面临的问题是仅获取最后一个值，例如 -`textfield`如果生成 3 个动态`textfeilds`并且我输入值 1,2， 3`textfeilds`分别我想要所有这些值，但目前我只从最后一个获得价值`textfeild`

我正在尝试的代码如下 //此函数生成动态文本字段

```
 - (void)dynamicTextboxes {
            NSString *string = txt1.text;
           int Pointsvalue = [string intValue];
           int x;     
          for (x=0; x < Pointsvalue ; x++)
            {     
               txtFldFrame1 = [[UITextField alloc] initWithFrame:CGRectMake(100,60*x,120,45)];
               txtFldFrame1.borderStyle=UITextBorderStyleRoundedRect;
               txtFldFrame1.keyboardType=UIKeyboardTypeNumberPad;    

                [self.view addSubview:txtFldFrame1];
               ArrPut=[[NSMutableArray alloc]initWithObjects:txtFldFrame1, nil];      
       }

         }

       // function to Acess the values
           NSString *string = txt1.text;
          int Pointsvalue = [string intValue];
          int x;
          for (x=0; x < Pointsvalue ; x++)
          {
              NSString * values=txtFldFrame1.text;
              [ArrPut addObject:values];
                if(txtFldFrame1.text.length>0)
                {

                 ArrClick=[NSMutableArray array];
               [ArrClick addObjectsFromArray:ArrPut];
             }
            }
               NSLog(@"%@",ArrClick); 
```

任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:05:01.167

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self dynamicTextFields];
}
- (void)dynamicTextFields
{
    NSString *string = @"3";
    int Pointsvalue = [string intValue];
    int x;
    for (x=1; x < Pointsvalue ; x++)
    {
        UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(100,60*x,120,45)];
        textField.borderStyle=UITextBorderStyleRoundedRect;
        [textField setDelegate:self];
        textField.keyboardType=UIKeyboardTypeNumberPad;
        textField.tag = x;
        [self.view addSubview:textField];
    }
}

- (IBAction)btnRetrieveTextFeildValues:(id)sender
{
    NSMutableArray *valuesArray = [[NSMutableArray alloc]init];
    NSString *string = @"3";
    int Pointsvalue = [string intValue];
    int x;
    for (x=1; x < Pointsvalue ; x++)
    {
        UITextField *textField = (UITextField *)[self.view viewWithTag:x];
        NSLog(@"Text - -%@",textField.text);
        if ([textField.text length]!=0)
        {
            [valuesArray addObject:textField.text];
        }
    }
    NSLog(@"ValuesArray -- %@",valuesArray);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:50:25.170

```
- (void)dynamicTextboxes
{
    NSString *string = txt1.text;
    int Pointsvalue = [string intValue];
    int x;
    for (x=1; x < =Pointsvalue ; x++)
    {
        txtFldFrame1 = [[UITextField alloc] initWithFrame:CGRectMake(100,60*x,120,45)];
        txtFldFrame1.borderStyle=UITextBorderStyleRoundedRect;
        txtFldFrame1.keyboardType=UIKeyboardTypeNumberPad;
        txtFldFrame1.tag = x;
        [self.view addSubview:txtFldFrame1];
        ArrPut=[[NSMutableArray alloc]initWithObjects:txtFldFrame1, nil];
    }

}

// function to Acess the values
UITextField *txtField = (UITextField *)[self.view viewWithTag:x];
NSString *string = txtField.text;
int Pointsvalue = [string intValue];
int x;
for (x=1; x < Pointsvalue ; x++)
{
    if(txtField.text.length>0)
    {   
        NSString * values=txtField.text;
        [ArrPut addObject:values];
    }
}
NSLog(@"%@",ArrClick); 
```

**嘿，UIView 本身的 tagValue 为 0...所以，从 1 开始循环...现在检查**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:53:12.683

```
NSString *string = txt1.text;
int Pointsvalue = [string intValue];
int x;
  ArrClick=[NSMutableArray array];
for (x=0; x < Pointsvalue ; x++)
{
    NSString * values=txtFldFrame1.text;
    [ArrPut addObject:values];
    UITextField *txtField = (UITextField *)[self.view viewWithTag:x];
    if(txtField.text.length>0)
    {

        [ArrClick addObjectsFromArray:ArrPut];
    }
}
NSLog(@"%@",ArrClick); 
```

# python - 添加列表的每个元素，然后连续打印它们

> ID：15849355
> 
> 赞同：0
> 
> 时间：2013-04-06T09:47:12.670
> 
> 标签：python

我有一个列表名称：

```
my_list = [1,2,3,4,5,6] 
```

我想输出看起来像这样，`1, 3(1+2),6(1+2+3), 10(1+2+3+4), ...` 我怎么能在 python 中做到这一点？感谢您提前回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:50:26.270

在 Python 3.2+ 中，它就像这样简单：

```
>>> from itertools import accumulate
>>> nums = [1,2,3,4,5,6]
>>> list(accumulate(nums))
[1, 3, 6, 10, 15, 21] 
```

[文档](http://docs.python.org/3.4/library/itertools.html#itertools.accumulate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T09:52:21.633

```
total = 0
for i, element in enumerate(my_list):
    total += element
    print "%d (%s)" % (total, '+'.join(my_list[:i+1]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T09:54:09.813

试试这个单行：

```
b = [sum(a[:i+1]) for i, x in enumerate(a)] 
```

这不是超高效（这是轻描淡写的说法），因为你一次又一次地总结整个元素......

要获得更有效的解决方案，您可以执行以下操作：

```
result = []

for i, current in enumerate(a):
    if result:
        last = result[i - 1]
    else:
        last = 0
    result.append(last + current)

print(result)
>> [1, 3, 6, 10, 15, 21] 
```

# css - 使用 CSS 设置 XML 样式时，如何引用包含句点或冒号的标签名称？

> ID：15849357
> 
> 赞同：4
> 
> 时间：2013-04-06T09:47:17.673
> 
> 标签：css, xml, css-selectors

我正在设计一个 XML 文档，其中包含类似`<a.b></a.b>`or的标签`<b:c></b:c>`。当然，如果我编写 CSS 规则，例如

```
a.b {
} 

b:c {
} 
```

它不起作用，因为这些字符将分别被解释为类和伪类。有没有办法用 CSS 引用这些标签名称？（我不想使用[XSL](http://www.w3.org/Style/XSL/) ...）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:13:34.583

如前所述，要引用`.`标签名称中带有 a 的元素，您可以简单地对其进行转义：

```
a\.b 
```

但是对于一个元素*就不能这么*说了，因为在 XML 中有一个特殊的含义，作为命名空间的分隔符。这意味着您拥有的元素实际上是命名[空间](http://www.w3.org/TR/xml-names)中的一个元素，而不是一个名为的元素。¹`b:c``:``c``b` `b:c`

也就是说，有两种正确的方法可以选择该元素。首先，因为正如我提到的元素实际上被称为`c`而不是`b:c`，你可以简单地使用：

```
c 
```

第二种方法，在命名空间冲突的情况下，首先`b`在样式表的开头声明命名空间，使用[`@namespace`](http://www.w3.org/TR/css3-namespace)对应于 XML 文档中的命名空间（文档中的某处应该有`xmlns:b`命名空间引用，否则它将无效):

```
/* Whichever URL corresponds to xmlns:b in your XML document */
@namespace b 'http://ns.example.com/b'; 
```

然后使用[命名空间前缀](http://www.w3.org/TR/selectors/#typenmsp)来选择元素：

```
b|c 
```

* * *

¹ [请记住，我们在这里讨论的是 XML，而不是 HTML 或任何`:`没有特殊含义的任意标记语言。]

# android - 如果我在 android 中使用 sharedpreference，我的数据存储在哪里

> ID：15849365
> 
> 赞同：0
> 
> 时间：2013-04-06T09:48:24.313
> 
> 标签：android

> 我了解了 android 中的 Sharedpreferences 来保存用户名和密码，效果很好，请参考下面的代码，

```
SavePreferences("MEM1", "two");
SavePreferences("MEM2", "one");
SavePreferences("MEM3", "three");
SavePreferences("MEM3", "four");
LoadPreferences();
private void SavePreferences(String key, String value){
    SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
   }

   private void LoadPreferences(){
    SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    String strSavedMem1 = sharedPreferences.getString("MEM1", "");
    String strSavedMem2 = sharedPreferences.getString("MEM2", "");       
   } 
```

> 我怀疑如果我使用 Sharedpreferences，我的给定数据存储在哪里。实际上，如果我使用 Sharedpreferences 会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:29:39.923

共享首选项将存储在位于 /data/data/your.package.name/shared_prefs 的包文件夹内的设备内部存储器中。

您可以自己尝试并使用 shell 中的 ls 命令或 adt 中的文件资源管理器查看存储在那里的所有首选项的列表。

所有这些都以 xml 格式存储。

对于您的示例，将在 /data/data/your.package.name/shared_prefs/MY_SHARED_PREF.xml 中存储一个共享首选项。

**提示** 存储密码时，您应始终在存储前对密码进行加密。阅读[这篇](http://android-developers.blogspot.in/2013/02/using-cryptography-to-store-credentials.html)文章

# java - Akka 是如何实现类似 JMM 的“happens-before”关系的？

> ID：15849366
> 
> 赞同：10
> 
> 时间：2013-04-06T09:48:28.393
> 
> 标签：java, multithreading, akka

在官方的 Akka 文档中，他们否认：

> 为了防止 Actor 的可见性和重新排序问题，Akka 保证以下两个“发生在”规则：
> 
> 演员发送规则：向演员发送消息发生在同一演员接收该消息之前。Actor 后续处理规则：一条消息的处理发生在同一 Actor 处理下一条消息之前。

请参考[文档](http://doc.akka.io/docs/akka/2.1.2/general/jmm.html)以获取详细信息。

我想知道 Akka 是如何做到这一点的。我刚刚浏览了源代码（此时最新），我认为在执行之前应该有一个 Lock `Actor.receive`，但我没有找到任何锁（我认为）。最后，我找到了一条评论`ActorCell.invoke`：

> //内存一致性由邮箱处理（先读邮箱状态再处理消息，再写邮箱状态

是的`Mailbox.status`，我想这就是我要找的。我看到他们`Unsafe`用来访问/更新该`status`字段，但我只是不知道这如何确保内存可见性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T13:49:33.600

有两件事需要考虑：传递消息和正确发布actor的内部状态。

前者是通过邮箱的 MessageQueue 实现实现的，该实现将使用 volatile 写入（对于默认的 ConcurrentLinkedQueue）或锁（对于普通的 LinkedBlockingQueue）来确保入队项目的安全发布。Actor 将通过读取相同的 volatile 字段（在第一种情况下）或获取相同的锁（在第二种情况下）与发送方同步，因此在消息发送之前的所有写入都发生在处理该消息时 Actor 内的任何内容之前.

即使通过您找到的邮箱状态在不同的线程上重新安排了actor的内部状态，也可以安全地存放：处理一批消息（由`throughput`参数定义）后，邮箱设置为“未安排”状态，即一个 volatile 写（实际上`Unsafe.compareAndSetInt()`，它具有相同的语义）。在 Actor 开始处理消息之前，它使用 读取邮箱状态`Unsafe.getIntVolatile`，这与之前的写入同步，因此在最后一批消息期间 Actor 完成的所有写入都发生在该批次期间的所有读取之前。

[您可以在此处](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html)阅读有关操作语义的更多信息，请记住`*Volatile`on 的方法`sun.misc.Unsafe`遵循与 for 相同的规则`Atomic*Reference`。

# iphone - 在 Titan Studio iPhone 中读取 epub 文件

> ID：15849368
> 
> 赞同：3
> 
> 时间：2013-04-06T09:48:29.627
> 
> 标签：iphone, titanium-mobile, epub, filereader

您好我正在使用 Titanium Studio 开发一个 iPHone 应用程序，我想在其中读取 .epub 文件。我用谷歌搜索，找不到任何好的参考。任何人都可以指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T15:55:03.437

使用像 zip 文件这样的 epub，在您的设备中提取 epub 的内容并使用 Appcelerator 中的 webview 读取。

# android - 从没有图像的 Android 应用程序共享到 facebook 的链接

> ID：15849370
> 
> 赞同：1
> 
> 时间：2013-04-06T09:48:45.943
> 
> 标签：android

我正在使用以下代码将图像和 url 发布到 facebook 墙上

```
 private void postToWall() {
    if (facebook != null) {
        if (facebook.isSessionValid()) {
            Bundle b = new Bundle();
            b.putString("picture", "imageurl");

            b.putString("caption", "Testing");
            b.putString("description", "Testing in android");
            b.putString("name", "naveen");

            b.putString("link", "http://funmango.com/");
            try {
                String strRet = "";
                strRet = facebook.request("/me/feed", b, "POST");
                JSONObject json;
                try {
                    json = Util.parseJson(strRet);
                    if (!json.isNull("id")) {
                        Log.i("Facebook", "Image link submitted.");
                    } else {
                        Log.e("Facebook", "Error: " + strRet);
                    }
                } catch (FacebookError e) {
                    Log.e("Facebook", "Error: " + e.getMessage());
                }
            } catch (Exception e) {
                Log.e("Facebook", "Error: " + e.getMessage());
            }
        }
    }
} 
```

但我的要求是，如果没有图片，我只想发布文字并链接到墙上，

提前致谢

# jquery - 使用 ajax 加载嵌入推文

> ID：15849376
> 
> 赞同：1
> 
> 时间：2013-04-06T09:49:06.723
> 
> 标签：jquery, ajax, twitter

所以 twitters 嵌入的推文在我的 wordpress 网站中工作得很好，问题是通过无限滚动加载的帖子不会呈现推文，它们只是显示为块引用。

```
 <blockquote class="twitter-tweet"><p>It’s not often I can announce that I’ve spent an exciting afternoon in a bathhouse, but I did today. A hidden Roman one. Amazing.</p>&mdash; Stephen Fry (@stephenfry) <a href="https://twitter.com/stephenfry/status/320226229569609728">April 5, 2013</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> 
```

这只会呈现为块引用，除非它在初始页面加载时加载。

有没有办法在通过 ajax 加载的帖子中正确渲染推文？

# jquery - 获取 Highcharts 宽度

> ID：15849382
> 
> 赞同：7
> 
> 时间：2013-04-06T09:49:24.347
> 
> 标签：jquery, highcharts, width, tooltip

我想获得当前的图表宽度，我尝试过这样的事情：

```
chart.width 
```

和

```
$(this).parent().width() 
```

图表在哪里

```
chart = new Highcharts.Chart({ ... }) 
```

但是不起作用...

**更多信息**

我想在导出按钮（响应式）的左侧放置一个图像（一个助手）。

目前我有以下代码：

```
$(document).ready(function() {
     chart = new Highcharts.Chart({
        chart: {
            renderTo: 'area1',
            type: 'bar',
            events: {
                load: drawImages,

            }
         ...}
      })
    }) 
```

和

```
function drawImages() {
    var chart = this;
    x = chart.plotRight - 50

    chart.renderer.image('/assets/faq.png', x, 0, 20, 20)

    .attr({
        zIndex: 100,
        title: "My title for displaying a tooltip"
    })
    .css({
        cursor: 'pointer'
    })
    .add();   
    }; 
```

但图像出现在图表的左侧（使用`plotRight`）。

我知道如何获取图形的 div 容器的宽度（“area1”），但我喜欢编写更多面向对象的代码（因为我每页至少有 5 个图形）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T10:54:59.767

在图表对象中，您可以访问 chartWidth 参数，该参数保持图表的宽度。

[http://jsfiddle.net/7xNQL/1/](http://jsfiddle.net/7xNQL/1/)

```
//callback
    function(chart){

                console.log(chart.chartWidth);

            } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-06T10:35:08.677

最后我找到了一个解决方案，使用方法“容器”：

```
$(chart.container).width() 
```

这将返回图表的当前宽度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T10:14:23.830

您可以使用 xAxisextreme.max 并将其转换为像素。类似的东西（未测试）：

```
Chart.xaxis[0].toPixels( chart xaxis[0].getExtremes().max ) 
```

感觉应该有一个更简单的方法，但我想我会使用包含 div 的宽度。也许您可以使用图表选项来获取我想要的包含 div 并从中获取宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-03T14:57:52.837

这是一个老问题，所以我的回答只是为以后检查的人提供更多选择。

如果你想要图表的全宽：

```
this.chart.chartWidth 
```

如果您想要图表 xAxis 宽度，左侧没有可能的标签（检查图像），您有两个选择：

```
this.chart.plotWidth // or
this.chart.xAxis[0].width 
```

[![在此处输入图像描述](https://i.stack.imgur.com/yvqOT.png)](https://i.stack.imgur.com/yvqOT.png)

# c# - c#如何删除循环分配的内存？

> ID：15849383
> 
> 赞同：3
> 
> 时间：2013-04-06T09:50:05.880
> 
> 标签：c#

想象一下这段代码：

```
int i=9999999;
while ( i > 1 )
{
    string UnusedMemory="this is a string that eats some ram" + i.ToString();
    i--;
} 
```

如果仅在运行时才删除未引用的对象`GC.Collect()`，则此代码应分配大量内存，直到发生收集。但它根本没有分配巨大的内存，为什么？是否在 IL 级别实施了某种“删除”？还是`GC.Collect()`自动调用更快？我知道这是一个微不足道的例子，但如果它更复杂并且在该代码块中访问字符串，它无论如何也不会吃很多内存。

编辑：我更改了示例，使字符串始终是唯一的，因此不能“缓存”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T09:52:09.293

字符串常量被“缓存”在字符串池中，因此每次都是相同的字符串。

如果您`String.IsInterned`在字符串上使用该方法，那么它将返回`true`，这意味着它包含在池中。

来自[String.IsInterned](http://msdn.microsoft.com/en-us/library/system.string.isinterned.aspx)：

> 公共语言运行时自动维护一个称为实习池的表，其中包含程序中声明的每个唯一文字字符串常量的单个实例，以及您以编程方式添加的任何唯一 String 实例。
> 
> 实习生池保存字符串存储。如果将文字字符串常量分配给多个变量，则每个变量都设置为引用实习池中的相同常量，而不是引用具有相同值的多个不同 String 实例。

此外，当需要内存或分配了足够的元素时，会自动调用 GC，因此即使没有缓存字符串也不会成为问题。

从[垃圾收集的基础知识](http://msdn.microsoft.com/en-us/library/ee787088.aspx)：

当下列条件之一为真时，就会发生垃圾收集：

*   系统物理内存不足。
*   **托管堆上分配的对象使用的内存超过了可接受的阈值。这意味着已超过托管堆上可接受的内存使用量的阈值。随着流程的运行，此阈值会不断调整。**
*   GC.Collect 方法被调用。在几乎所有情况下，您都不必调用此方法，因为垃圾收集器会持续运行。此方法主要用于特殊情况和测试。

**是否有可能改变这种行为或优化它？** 是的，在某种程度上：[延迟模式](http://msdn.microsoft.com/en-us/library/bb384202.aspx)

这个问题非常相关： [C# memory usage for creating objects in a for loop](https://stackoverflow.com/questions/6794985/c-sharp-memory-usage-for-creating-objects-in-a-for-loop)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T10:09:15.270

当从堆中分配一个对象，并且没有足够的可用空间时，垃圾收集器将运行。如果第一个堆的集合没有释放足够的内存，它将继续在下一级堆上进行集合。只有当所有堆的集合没有释放足够的内存时，它才会从系统中分配更多的内存。

由于您的示例中有很多最近释放的对象，因此第一个堆的集合将始终释放足够的内存。您的循环将多次填充堆。您可以在循环之前和之后打印出来`GC.CollectionCount(0)`，看看它运行了多少次。

# php - php从数据库中获取数据

> ID：15849385
> 
> 赞同：0
> 
> 时间：2013-04-06T09:50:17.437
> 
> 标签：php, sqlite

我正在尝试根据 userId 从数据库中获取特定的详细信息。

问题是，它不是获取数据，而是显示

```
line 2 line 3{"posts":[]}. 
```

我正在使用下面的代码，

```
 <?php 
@ob_start(); 
/* require the user as the parameter */

if(isset($_GET['user']) && intval($_GET['user'])) 
{
print "line 2";
/* soak in the passed variable or set our own */
$number_of_posts = isset($_GET['num']) ? intval($_GET['num']) : 10; //10 is the default
$format = strtolower($_GET['format']) == 'json' ? 'json' : 'xml'; //xml is the default
$user_id = intval($_GET['user']); //no default

print "line 3";

/* connect to the db */
$link = mysql_connect('localhost','username','password') or die('Cannot connect to the DB');
mysql_select_db('database',$link) or die('Cannot select the DB');           

/* grab the posts from the db */
$query = "SELECT * FROM tablename WHERE userId= '".$obj->{'userId'}."'";

$result = mysql_query($query,$link) or die('Errant query:  '.$query);

$posts = array();

if(mysql_num_rows($result)) 
{           
    while($post = mysql_fetch_assoc($result)) 
    {                   
        $posts[] = array('posts' =>$post);
    }
}

/* output in necessary format */
if($format == 'json') 
{
    header('Content-type: application/json');
    echo json_encode(array('posts'=>$posts));
    exit();
}
else 
{
    header('Content-type: text/xml');
    echo '<posts>';
    foreach($posts as $index => $post) 
    {
        if(is_array($post)) 
        {
            foreach($post as $key => $value) 
            {
                echo '<',$key,'>';
                if(is_array($value)) 
                {
                    foreach($value as $tag => $val) 
                    {
                        echo '<',$tag,'>',htmlentities($val),'</',$tag,'>';
                    }
                }
                echo '</',$key,'>';
            }
        }
    }
    echo '</posts>';
}

/* disconnect from the db */
@mysql_close($link);
}
?> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:56:23.713

```
$query = "SELECT * FROM tablename WHERE userId= '".$obj->{'userId'}."'"; 
```

应该：

```
$query = "SELECT * FROM tablename WHERE userId= '".mysql_real_escape_string(userId)."'"; 
```

您的脚本中没有`$obj`变量。

# javascript - js onkeydown 等效于手机

> ID：15849386
> 
> 赞同：0
> 
> 时间：2013-04-06T09:50:24.600
> 
> 标签：javascript, android, iphone, web

我有一个网络应用程序，如果有人按下空格键（onkeydown），就会发生一个动作，对于移动用户（例如android）来说，屏幕上的一个选项卡会是一个很好的等价物吗？我该如何捕捉它？

# google-chrome - 底部的静态 iframe 使网页无法滚动

> ID：15849389
> 
> 赞同：0
> 
> 时间：2013-04-06T09:50:27.863
> 
> 标签：google-chrome, dom, iframe

看看：http: [//jsfiddle.net/BUNVM/1/](http://jsfiddle.net/BUNVM/1/)

```
<body>
    This is a test page<br/>
    (many more lines to make the page scrollable)
    This is bottom of the test page<br/>
    <iframe id="bot_frame" style="width:250px;height:240px;position:fixed;bottom:0px;right:0px;text-align:left;border:0;"></iframe>
    <script type="text/javascript">
    var iframe_content = '<!DOCTYPE html><html><body style="background-color:#ddd">Frame content</body></html>';
    window.onload = function() {
        var iframe = document.getElementById("bot_frame");
        iframe.contentWindow.document.open();
        iframe.contentWindow.document.write(iframe_content);
        iframe.contentWindow.document.close();
    };
    </script>
</body> 
```

它在屏幕的右下角有一个静态 iframe，内容由 document.open() 和 document.write() 和 document.close() 添加到其中。

当您只打开输出帧时，一切都很好：http: [//jsfiddle.net/BUNVM/1/show/](http://jsfiddle.net/BUNVM/1/show/)

但是尝试在 Chrome 的末尾使用“#”访问相同的输出帧：http: [//jsfiddle.net/BUNVM/1/show/#](http://jsfiddle.net/BUNVM/1/show/#)

现在尝试滚动页面，页面卡在底部，无法向上/向下滚动。即使拖动滚动条，按键盘上的箭头键也不起作用。但是，如果您将鼠标放在 iframe 上，然后使用鼠标滚轮/键盘滚动，则滚动会起作用。

我只能在 Ubuntu 12.04 的 Chrome v21.0.1180.89 中进行测试。

请注意，上述情况仅在您使用哈希“#”重新加载页面时发生（仅在已加载的页面中添加“#”不会重新加载页面）。

我想知道造成这种情况的原因和可能的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T12:18:20.757

这是之前报告过的 chrome 中的错误：[https ://code.google.com/p/chromium/issues/detail?id=102816](https://code.google.com/p/chromium/issues/detail?id=102816)

似乎如果您在将鼠标悬停在 iframe 上时尝试滚动将使滚动再次起作用。所以我创建了一个小技巧，即使它很丑也应该让它工作：

```
var offset = document.body.scrollTop || 0;
iframe.contentWindow.document.open();
iframe.contentWindow.document.write(iframe_content);
iframe.contentWindow.document.close();

if(document.location.toString().match(/#(top)?$/)) {
    // Force a scroll on the iframe to make scrolling work again
    iframe.contentWindow.document.body.scrollTop = 0;

    // Scroll back to the original scroll position as document.close will have scrolled to the bottom
    document.body.scrollTop = offset;
} 
```

[http://jsfiddle.net/Tsq7N/](http://jsfiddle.net/Tsq7N/)

[http://jsfiddle.net/Tsq7N/show/#](http://jsfiddle.net/Tsq7N/show/#)

基本上我在 iframe 上伪造了一个滚动，这使得滚动再次成为可能，之后我将文档的 scrollTop 设置回 document.open/write/close 发生之前的状态。

# python - 自引用列表

> ID：15849399
> 
> 赞同：3
> 
> 时间：2013-04-06T09:51:07.330
> 
> 标签：python

假设您执行以下操作：

```
a = [1]
a[0] = a 
```

你最终得到`a`等于`[[...]]`。这里发生了什么？这个隐含定义的无限链是如何`a`引用`a`' 的`[[...]]`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T10:05:50.057

你什么也没看到：

```
>>> a = []
>>> a[:] = [a] * 4
>>> a
[[...], [...], [...], [...]] 
```

如果您对它在 CPython 中的工作方式感兴趣，请参阅[`list_repr`in`listobject.c`](http://hg.python.org/cpython/file/03c65fc349c0/Objects/listobject.c#l361)和类似函数。基本上，任何可能打印自引用对象的函数都会`Py_ReprEnter`在打印之前和`Py_ReprLeave`完成时调用该对象。（请参阅[`object.c`这些函数的定义](http://hg.python.org/cpython/file/03c65fc349c0/Objects/object.c#l2358)。）前者检查对象是否在当前正在打印的对象的线程本地堆栈中找到（如果没有，则推送它）；后者从堆栈中弹出对象。因此，如果 Python 正在打印一个列表并发现该列表在堆栈上，那一定意味着这是一个自引用列表，并且该列表应该缩写，以避免无限循环：

```
 i = Py_ReprEnter((PyObject*)v);
 if (i != 0) {
     return i > 0 ? PyString_FromString("[...]") : NULL;
 }

 // ...

 Py_ReprLeave((PyObject *)v);
 return result; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T09:53:37.090

该列表包含对其自身的引用。这`[[...]]`是打印列表时呈现的方式。

该实现不遗余力地确保它不会以无限递归结束。它通过呈现对已打印为`[...]`.

这使得它也可以与间接自引用一起使用：

```
>>> a = []
>>> b = [a]
>>> a.append(b)
>>> a
[[[...]]]
>>> b
[[[...]]] 
```

如果你真的很好奇，你可以研究 CPython 的源代码。在 Python 2.7.3 中，相关代码位于`Objects/listobject.c`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T09:58:25.430

我们`a == [a]`这里有，所以理论上`a`应该打印为一个包含一个元素的列表，即`a`——即它本身就是一个包含一个元素的列表，它本身就是一个包含一个元素的列表，以此类推。或者在印刷品中：无限数量的`[`，然后是无限数量的`]`。相反，我们得到的事实`[[...]]`只是 Python 试图提供帮助，而不是实际打印无限数量的`[`.

# jquery - jQuery滑块随机滑动

> ID：15849403
> 
> 赞同：0
> 
> 时间：2013-04-06T09:51:12.863
> 
> 标签：jquery, css, width

我基本上是一个 PHP 编码器。现在我正在为一家教育咨询公司设计一个网站，我需要在其中添加一个 jQuery 滑块。我添加的滑块最初具有`width:630px`. 我需要将滑块安装在`width:510px;`. 为此，我将图像和 div 的宽度更改为 510px。现在，当它保持空闲一段时间时，滑块会随机移动（最初它工作正常）。[带有滑块的网站](http://7sisters.in/test/)。请帮助我，因为我有关于 jQuery 的初学者知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:38:28.620

好吧，尝试为 nivo 滑块提供一个高质量的滑块，看看他们提供的演示以了解如何设置或复制 html 格式或查看文档是个好主意。

[http://dev7studios.com/nivo-slider/](http://dev7studios.com/nivo-slider/)

该文档将向您展示如何设置 nivo 滑块和所有可用的 jquery 函数

[http://dev7studios.com/nivo-slider/#/documentation](http://dev7studios.com/nivo-slider/#/documentation)

# ios - 如何将具有重复文件名的目录结构添加到项目中？

> ID：15849405
> 
> 赞同：0
> 
> 时间：2013-04-06T09:51:19.503
> 
> 标签：ios, xcode, nsbundle

我有一个目录可以归结为：

```
/ 
 - character0 -- attribute0 -- image.png
 - character1 -- attribute0 -- image.png 
```

我把它放在 XCode 中，以便定义两个字符。现在我想加载每个 image.png

```
CIImage * cheetah = [CIImage imageWithContentsOfURL:[[NSBundle mainBundle] 
                     URLForResource:@"image" withExtension:@".png"]]; 
```

什么是猎豹？我怎样才能得到`character0`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:23:34.220

如果您只是将两个文件“image.png”添加到您的项目中，那么这两个文件都将被复制到应用程序包的顶级目录中，这样您的应用程序中就只有一个文件“image.png”。

如果将文件夹“character0”、“character1”拖到项目中并选择“为任何添加的文件夹创建文件夹引用”选项，则整个文件夹层次结构将被复制到应用程序包中，您可以分别引用资源例如

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"image"
                                     withExtension:@"png" 
                                      subdirectory:@"character0/attribute0"]; 
```

# java - 使用套接字循环输入流

> ID：15849406
> 
> 赞同：0
> 
> 时间：2013-04-06T09:51:25.123
> 
> 标签：java, inputstream

[Java 通过套接字发送和接收文件 (byte[])](https://stackoverflow.com/questions/9520911/java-sending-and-receiving-file-byte-over-sockets)

提到上面的问题，我只是想问一下我怎样才能把这段代码放在循环中，以便从客户端接收多个图像？？？？我已经尝试过，但它不会在第一次读取后停止在 (count = is.read(bytes)) > 0 处。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:00:38.467

我实际上不确定我是否完全理解您的问题，但我会尽力提供帮助。所以你想拥有无限时间的连接客户端/服务器吗？因此，尝试将服务器客户端和客户端本身都设为线程，然后将线程置于循环中。试试这个样本。

```
connection = new Socket("IP",PORT);
        input = new DataInputStream(connection.getInputStream());
        output = new DataOutputStream(connection.getOutputStream());
        new Thread(new Runnable() {

        public void run(){
            while(true){
            try
            {
                System.out.println(">>" + input.readUTF());
            }
            catch(Exception e){
                try
                {
                    input.close();
                    output.close();
                    connection.close();
                }
                catch(Exception e2)
                {}
             }
            }
        }
        }).start(); 

        Scanner scan = new Scanner(System.in);

        while(true)
        {
            String data = scan.nextLine();
            output.writeUTF(data);
        } 
```

这是客户端的代码。您还必须有接受所有数据并发回信息的客户端服务线程！希望我对您有所帮助，因为我不确定我是否正确理解了这个问题。祝你好运！

# c# - 从另一个表单设置 webbrowser 的导航字符串

> ID：15849407
> 
> 赞同：0
> 
> 时间：2013-04-06T09:51:25.127
> 
> 标签：c#, webbrowser-control

我想设置另一个表单的用户控件中的网络浏览器的导航，我在用户控件中定义了这个函数

```
public string LoadHTML(string htmlfilepath)
{
    return htmlfilepath;
}
private void startpage()
{
    OnThisLoad();
    webBrowser1.Navigate(LoadHTML(""));
} 
```

在主要形式

```
htmlLoadWebbrowser1.LoadHTML(@"D:\H2.htm"); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:14:53.993

我不认为你的 LoadHTML 函数正在做你想做的事

```
public void LoadHTML(string htmlfilepath)
{
    webBrowser1.Navigate(htmlfilepath);
} 
```

如果是这样，那么您的其他功能将中断

```
private void startpage()
{
    OnThisLoad();
    webBrowser1.Navigate("");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:36:10.577

我给你写一个例子：

我认为您有 2 个带有名称的表格`form1`和`form2``usercontrol1`

将控件的`Modifiers`属性设置为。`web-browser``usercontrol1``Public`

如果您的用户控件放置在 form1 上，请将其`Modifiers`属性设置为`Public` 并在第二种形式（表单 2）中执行以下操作：

```
private void Form2_Load(object sender, EventArgs e)
{
    Form1 frm1 = new Form1();
    frm1.Show();
    frm1.userControl11.webBrowser1.Navigate("http://google.com");
} 
```

# azure - 我有一个在 Zend Optimizer 上运行的产品 (Kayoko)，它可以在 Windows Azure 网站上运行吗？

> ID：15849408
> 
> 赞同：-1
> 
> 时间：2013-04-06T09:51:29.490
> 
> 标签：azure, azure-web-app-service, zend-optimizer

我购买了一个名为 Kayoko 的产品，它在 Zend Optimizer 上运行，我在 Windows Azure 网站上的基础设施！Azure 网站说它在 PHP 5.3 和 5.4 上运行！它可以在 Windows Azure 网站上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:32:27.127

如果你说的是[这个](http://wiki.kayako.com/display/DOCS/Server+requirements)。它清楚地表明它需要 PHP 5.3。所以你可以运行它，尊重 PHP 版本。

现在，Zend 优化器运行起来有点棘手，但并非不可能。查看这篇关于如何配置第三方 PHP 扩展的[博客文章。](http://blogs.msdn.com/b/silverlining/archive/2012/09/17/using-custom-php-extensions-in-windows-azure-web-sites.aspx)还有[这个 StackOverflow 问题和我](https://stackoverflow.com/questions/13297801/how-do-i-install-ioncube-on-an-azure-web-site)关于如何运行类似于 ZendOptimizer 的 IonCube 的答案。

请更新您的问题以包含具体的产品名称和适当的链接。

# android - Android Webview 预加载在 Nexus 上不起作用

> ID：15849411
> 
> 赞同：4
> 
> 时间：2013-04-06T09:51:34.160
> 
> 标签：android, performance, android-layout, android-webview, android-websettings

我们正在使用本地 HTML 和 sdcard 中的所有资源加载 Android Webview。由于 HTML 很重（每页大约 1MB），所以我们正在研究预加载策略，这意味着已经将 webview 实例加载到内存中。

在 UI 上，我们有带有一系列 Webview 线性布局的水平滚动视图。

预加载策略适用于除 Nexus7 之外的所有设备。在 Nexus7 上，网页正在加载但无法显示。意味着当我滑动到下一页时，它首先显示空白屏幕，然后显示网页。但对于其他设备，它甚至不显示空白页。

我们已经尝试了所有参数，如硬件加速、DOMCacheEnabled 和其他参数。我们需要避免出现空白屏幕，以便用户滑动到下一页时，他可以直接看到 HTML，而不是先看到空白页然后再看到 HTML。

请建议我们是否可以使用其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T09:30:35.767

我实施了一个类似的解决方案，这就是我的策略；

为必要的页面创建 webviews，添加它们，隐藏它们，监听它们的加载，然后当你的 WebViewClient 告诉你它们完成加载时呈现页面。

我认为让他们显示内容的技巧（有时不显示空白）是

1 将 webviews 添加到布局中

2 调用 View.setVisibility(View.GONE)

3 等待加载

4 View.setVisibility(View.VISIBLE)

# linq - ParseException：没有属性或字段'???' 使用 GroupBy 和 Select 时存在于“DynamicClass”类型中

> ID：15849412
> 
> 赞同：1
> 
> 时间：2013-04-06T09:51:41.890
> 
> 标签：linq, entity-framework, dynamic, poco, dynamic-class

我将 EntityFramework 与[System.Linq.Dynamic](https://nuget.org/packages/System.Linq.Dynamic/)一起使用，并且我定义了 Employee POCO 类，如下所示：

```
public class Employee
{
    public long Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Company Company { get; set; }
    public Country Country { get; set; }
} 
```

我正在使用此代码执行 GroupBy 国家名称：

```
var query = Employees.Include(e => e.Company).Include(e => e.Country);  
var groupByQuery = query.GroupBy("new (Country.Code as GroupByField)", "new (it AS XEmployee, it.Company AS XCompany, it.Country AS XCountry)");
var selectQuery = groupByQuery.Select("new (Key.GroupByField, it as Grouping)");
var grouping = selectQuery.Select("it.Grouping") as IQueryable<IGrouping<DynamicClass, DynamicClass>>;
var objects = grouping.First().AsQueryable() as IQueryable<object>;

// This line gives me : ParseException: No property or field 'XEmployee' exists in type 'DynamicClass'
var employees = objects.Select("it.XEmployee"); 
```

这很奇怪，因为当我从 DynamicClass 中转储所有属性时，XEmployee 是一个有效的公共属性？

```
var firstObject = objects.First();
firstObject.GetType().GetProperties().Dump(); 
```

节目 ![在此处输入图像描述](https://i.stack.imgur.com/FK7nl.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:41:47.453

我创建了一个扩展方法，它从对象获取属性并将其转换为所需的类型。

请参阅此代码以了解扩展方法“选择”

```
public static class DynamicQueryableExtensions
{
   public static IEnumerable<TEntity> Select<TEntity>(this IEnumerable<object> source, string propertyName)
   {
       return source.Select(x => GetPropertyValue<TEntity>(x, propertyName));
   }

   private static T GetPropertyValue<T>(object self, string propertyName)
   {
       var type = self.GetType();
       var propInfo = type.GetProperty(propertyName);

       try
       {
           return propInfo != null ? (T)propInfo.GetValue(self, null) : default(T);
       }
       catch
       {
           return default(T);
       }
   }
} 
```

代码使用如下：

```
// This line will just work fine.
var employees = objects.Select<Employee>("XEmployee");
employees.Dump(); 
```

有关工作示例，请参阅我在 github 上的[KendoGridBinderEx项目。](https://github.com/StefH/KendoGridBinderEx)

# c++ - C++11 - 编译时多态性解决方案

> ID：15849419
> 
> 赞同：4
> 
> 时间：2013-04-06T09:52:16.990
> 
> 标签：c++, c++11, compile-time

假设我正在编写一个跨平台库，我必须以一种针对不同平台有不同行为的方式组织代码，并且这种行为（或定义）是在编译时根据我的库所在的平台选择的正在编译。

`#ifdef`在 C++ 中执行此操作的“通常”方法是在编写方法或类时大量污染代码。

方法的问题在于：

*   源代码看起来真的很难看
*   如果你支持 3 个平台，你的源代码大约是你真正需要的 3 倍，这意味着你的编译器仍然需要解析和分析所有代码才能“看到”`#ifdef`
*   不同的实现之间没有真正的区别，当代码库增长时很难保持，当你只有 3-4 个平台时，它增长得非常快。

由于 C++11 中有很多新功能，我想知道是否有一些改变，以及是否有新的选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T09:55:40.967

您应该使用您的构建系统来执行此操作。您应该为标头提供与平台无关的函数声明和类定义。然后，根据目标平台，构建系统应该编译这些函数和类的适当实现。

例如，让我们考虑创建用于显示图形或 GUI 元素的窗口。如果您不使用库来执行此操作，则必须自己编写跨平台代码。首先，您应该确切地考虑平台无关接口应该是什么。也许你有一个`window`类和一些辅助函数。然后，您可以在头文件中提供该类的定义和辅助函数的声明，并为每个平台提供单独的实现。然后你会有一组这样的文件：

*   `window.h`
*   `window_wayland.cpp`
*   `window_winapi.cpp`
*   `window_x11.cpp`

现在，所有需要使用你的类和函数的文件应该只是`#include <window.h>`. 它们都得到相同的函数声明。但是，您在构建系统的配置中指定`window_x11.cpp`应该在具有 X11 窗口系统`window_wayland.cpp`的系统、具有 Wayland 的系统和`window_winapi`Windows 上编译。这意味着根据您正在构建的平台，您将获得在目标平台上运行的该标头的实现。

这有几个优点：

1.  您已将构建问题（您正在构建的平台）与代码问题分开。
2.  每个平台相关的实现都有自己的文件。
3.  您没有一个文件杂乱无章的预处理器指令和难以遵循的执行路径。

这并不意味着使用定义来选择性地编译代码的不同部分有什么问题。我更喜欢仅使用少量已本地化到平台相关部分的代码来查看这一点。理想情况下，将依赖于平台的代码包装在一个函数中，并让`#ifdef`s 换出实现。

您如何进行这种选择性构建取决于您使用的构建系统。对于 GNU 构建系统，可以使用 automake 实现条件编译。[文档中给出了一些示例](http://www.gnu.org/software/automake/manual/automake.html#Conditional-Sources)。一个简单的例子是：

```
bin_PROGRAMS = hello
if LINUX
hello_SOURCES = hello-linux.c hello-common.c
else
hello_SOURCES = hello-generic.c hello-common.c
endif 
```

使用此配置运行`automake`将生成适当的 makefile。

# linker - 即使 nm 指示此符号存在于共享库中，也未定义对符号的引用 2

> ID：15849422
> 
> 赞同：0
> 
> 时间：2013-04-06T09:52:25.740
> 
> 标签：linker, g++, undefined-reference, dynamic-library

我在这里发现了同样的[问题](https://stackoverflow.com/questions/10456581/undefined-reference-to-symbol-even-when-nm-indicates-that-this-symbol-is-present)，但答案对我没有帮助。

我正在编写测试应用程序以使用 nglib 库。但是当我尝试编译它时，我得到未定义的引用：

```
$ g++ test1.cpp -L. -lnglib
test1.cpp: In function ‘int main()’:
/tmp/cchcKZfx.o:test1.cpp:function main: error: undefined reference to 'Ng_Init()'
/tmp/cchcKZfx.o:test1.cpp:function main: error: undefined reference to 'Ng_NewMesh()'
...
/tmp/cchcKZfx.o:test1.cpp:function main: error: undefined reference to 'Ng_Exit()'
collect2: ld returned 1 exit status 
```

但例如当我在 libnglib.so 中搜索 Ng_Init() 时，我得到了肯定的结果。

```
$ nm -D libnglib.so | grep Ng_Init
000000000008d0d0 T _ZN5nglib7Ng_InitEv 
```

所以我很困惑为什么我会收到未定义的参考错误？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:15:06.683

`_ZN5nglib7Ng_InitEv`demangles`nglib::Ng_Init()`与`Ng_Init()`.

# sql - 在 PostgreSQL 中合并两个 SELECT 查询

> ID：15849423
> 
> 赞同：21
> 
> 时间：2013-04-06T09:52:48.947
> 
> 标签：sql, postgresql, union, common-table-expression

我想将两个选择查询与`UNION`.
如何`SELECT`在第二个中使用第一个的结果`SELECT`？

```
(SELECT carto_id_key FROM table1
    WHERE tag_id = 16)
UNION 
(SELECT * FROM table2
    WHERE carto_id_key = <the carto_id result from above> ) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-06T11:32:26.230

使用[**CTE**](https://www.postgresql.org/docs/current/queries-with.html)在多个`SELECT`.

```
WITH cte AS (SELECT carto_id_key FROM table1 WHERE tag_id = 16)

SELECT carto_id_key
FROM   cte

UNION ALL
SELECT t2.some_other_id_key
FROM   cte
JOIN   table2 t2 ON t2.carto_id_key = ctex.carto_id_key 
```

你很可能想要[`UNION ALL`](https://www.postgresql.org/docs/current/sql-select.html#SQL-UNION)而不是`UNION`. 不排除重复项，并且这样更快。

# php - 如果用户从表中填写所有 3 个显示选定值并且如果填写 2 个指定字段显示所有值，我在表单中有 3 个字段

> ID：15849424
> 
> 赞同：0
> 
> 时间：2013-04-06T09:52:49.347
> 
> 标签：php, sql, select

```
if($_POST['sinitial']=="no")
{
$result = mysqli_query($con,"SELECT * FROM babyname WHERE (iname= '".$_POST['dinitial']."' AND gender= '".$_POST['gender']."' AND ncat= '".$_POST['ncat']."') OR (iname= '".$_POST['dinitial']."' AND gender= '".$_POST['gender']."')");
?> 
```

> 如果用户输入需要初始>（dinitial）以及性别和名称类别（ncat），我正在尝试从表babynames中输出名称。但是，如果用户不希望只有名称>进入特定类别，否则他希望查看从 >dinitial 开始的所有名称，而不是我的查询应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:32:12.883

```
if($_POST['sinitial']=="no")
{
 $condition = "iname= '".$_POST['dinitial']."' AND gender= '".$_POST['gender']."'";
if(isset($_POST['ncat']) && !empty($_POST['ncat'])) 
 $condition .= "AND ncat= '".$_POST['ncat']."'";
$result = mysqli_query($con,"SELECT * FROM babyname WHERE $condition");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:55:52.617

```
else
{

$result = mysqli_query($con,"SELECT * FROM babyname WHERE (iname like '".$_POST['dinitial']."%' AND gender= '".$_POST['gender']."' AND ncat= '".$_POST['ncat']."') OR (iname like  '".$_POST['dinitial']."%' AND gender= '".$_POST['gender']."')");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:06:31.763

让我们试试这种代码方式..

```
if($_POST['sinitial']=="no")
{
  $condition = "iname= '".$_POST['dinitial']."' AND gender= '".$_POST['gender']."'";

  if(!empty($_POST['ncat'])) 
     $condition .= "AND ncat= '".$_POST['ncat']."'";

$result = mysqli_query($con,"SELECT * FROM babyname WHERE $condition");

} 
```

# java - java中不支持的类版本错误？

> ID：15849435
> 
> 赞同：1
> 
> 时间：2013-04-06T09:53:30.123
> 
> 标签：java, android, java-server

我正在尝试使用 Android 将一些响应参数传递给 Java Web 应用程序。我使用 jdk 1.6_32 进行 android 开发和 jdk1.5_06 在服务器端。我试图传递的参数是登录凭据（字符串）和 Base64 编码为字符串的 png 文件。登录凭据被正确传递，但是，当 png 文件被传递时，服务器抛出以下异常：

```
15:08:33,264 ERROR [[ImageRetrieve]] Servlet.service() for servlet ImageRetrieve threw exception
java.lang.UnsupportedClassVersionError: Bad version number in .class file
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1629)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:850)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1299)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
    at com.apd.test.ImageRetrieve.doPost(ImageRetrieve.java:46)
    at com.apd.test.ImageRetrieve.doGet(ImageRetrieve.java:37)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:697)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:595) 
```

我无法弄清楚这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:55:33.357

好像您正在使用一些在服务器上使用 JDK6 编译的类（在 JDK5 上运行）。服务器上的所有类都必须针对 JDK5 进行编译，您的设置才能正常工作。

# html - 如何将一个html文件添加到另一个html文件

> ID：15849438
> 
> 赞同：2
> 
> 时间：2013-04-06T09:53:47.040
> 
> 标签：html

我在一个带有 header.html 的单独文件中有一个标题，我想在我使用的 head 部分之后将它包含到另一个文件 index.html 中

```
<!--#include virtual="header.html"--> 
```

不幸的是它没有运行然后我使用

```
<!--#include virtual="header.shtml"--> 
```

通过将我的文件保存为 header.shtml

所以有人可以给我任何建议吗

谢谢

**注意：我正在使用 smarty 和 PHP，所以使用 appache 服务器**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:31:47.390

*   当您使用**[WAMP](http://en.wikipedia.org/wiki/WAMP)**服务器时，请检查您的服务器**[SSI](http://en.wikipedia.org/wiki/Server_Side_Includes)**（服务器端包含）是​​否已启用。如果没有，请通过编辑配置文件启用它。以下页面包含有关**[在 WAMP 上设置 SSI 的](http://www.roseindia.net/tutorial/php/phpbasics/Setting-Up-SSI-On-Wamp.html)**教程。

*   利用`<!--#include virtual="header.html" -->`

    代替

    `<!--#include virtual="header.html"-->`

    **SSI 上的 Apache 教程规定格式需要在关闭元素的“-->”之前有一个空格字符。**

*   另外，你在哪里添加`<!--#include virtual="header.html" -->`，声明？该语句应在`<html>`标记内。

    ```
    <html>
    <head>
    <title>My Title</title>
    </head>
    <body>

         <!--#include virtual="header.html" -->

     </body>
     </html> 
    ```

*   确保**index.html**和**header.html**文件位于同一目录中。如果不尝试使用相对路径。

*   以下**[页面](http://www.boutell.com/newfaq/creating/include.html)**包含很多关于**包含虚拟** 指令的问题和常见错误。

    ***如果它根本不起作用，那么尝试去*** `<?php include("header.html"); ?>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:25:25.053

> [在 HTML 文件中包含另一个 HTML 文件](https://stackoverflow.com/questions/8988855/include-another-html-file-in-a-html-file)

或者

> (#include 文件="footer.html")

或者

$("#header").load("header.html");

# vim - 'gq' 命令将注释行与非注释行合并

> ID：15849443
> 
> 赞同：2
> 
> 时间：2013-04-06T09:53:58.797
> 
> 标签：vim, comments, latex, format, tex

我现在正在使用 vim 编写 LaTeX 文档，但在使用“gq”命令格式化段落时遇到了问题。例如，如果我有这样的段落：

```
some
text% this is a comment
some
text 
```

“gqap”的结果是：

```
some text% this is a comment some text 
```

我希望它是：

```
some text% this is a comment
some text 
```

但是，如果评论是独立的，“gq”可以正常工作：

```
some
text
% this is a comment
some
text 
```

得到：

```
some text
% this is a comment
some text 
```

我只是不知道这是否是vim的错误，也不知道如何修复它......任何帮助

## 更新：

今天我为 'formatexpr' 写了一个 vim 函数来防止 vim 断行以 "%%" 结尾：

```
function FormatTeX()
    let lnum = v:lnum                             " I found that v:lnum and v:count may change before exiting this function, so I made a copy here
    let lcount = v:count
    let lb = lnum + lcount - 1
    let le = lb
    while lb >= lnum                              " process the file in inverse order, or we have to deal with line number changes
        if match(getline(lb), '%%$') >= 0
            if lb < le
                exec "normal! ".(lb + 1)."GzR"    " the zR here opens all fold, or the result may be wrong 
                exec "normal! gw".le."G"
            endif
            let le = lb - 1
        elseif lb == lnum
            if lcount > 1
                exec "normal! ".lb."GzR"
                exec "normal! gw".le."G"
            else
                return 1                          " when 'formatoptions' has an 'a' flag, this branch is necessary or the cursor will jump unpredictable...
                                                  " according to the source code of vim, if the return value of 'formatexpr' is non-zero, the build-in formatter is used.
            endif
        endif
        let lb = lb - 1
    endwhile
    return 0
endfunction 
```

我希望这个糟糕的例子可以帮助其他面临类似问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:36:29.503

有一个提示`:help format-comments`：

> **Vim 通过行**首的特定字符串识别注释 （忽略空格）。

尽管在使用 格式化时似乎对*三段式注释*`gq`进行了一些特殊处理，但未在行首开始的注释处理得不好。您必须将`gq`格式的范围限制在注释周围的文本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:38:19.347

今天我为 'formatexpr' 写了一个 vim 函数来防止 vim 断行以 "%%" 结尾：

```
function FormatTeX()
    let lnum = v:lnum                             " I found that v:lnum and v:count may change before exiting this function, so I made a copy here
    let lcount = v:count
    let lb = lnum + lcount - 1
    let le = lb
    while lb >= lnum                              " process the file in inverse order, or we have to deal with line number changes
        if match(getline(lb), '%%$') >= 0
            if lb < le
                exec "normal! ".(lb + 1)."GzR"    " the zR here opens all fold, or the result may be wrong 
                exec "normal! gw".le."G"
            endif
            let le = lb - 1
        elseif lb == lnum
            if lcount > 1
                exec "normal! ".lb."GzR"
                exec "normal! gw".le."G"
            else
                return 1                          " when 'formatoptions' has an 'a' flag, this branch is necessary or the cursor will jump unpredictable...
                                                  " according to the source code of vim, if the return value of 'formatexpr' is non-zero, the build-in formatter is used.
            endif
        endif
        let lb = lb - 1
    endwhile
    return 0
endfunction 
```

我希望这个糟糕的例子可以帮助其他面临类似问题的人。

# matlab - 使用 FastICA 对混合图像进行盲信号分离

> ID：15849444
> 
> 赞同：0
> 
> 时间：2013-04-06T09:54:00.030
> 
> 标签：matlab, image-processing, artificial-intelligence, signal-processing

我有一张灰度图像，它是从一组随机混合的图像中获得的。我会使用[FastICA](http://research.ics.aalto.fi/ica/fastica/)算法来检索原始图像，但原始图像的数量是未知的。如何处理这个问题？加载要处理的图像后如何进行？

# azure - 为什么我在访问我的移动服务 URL 时会收到 502？

> ID：15849447
> 
> 赞同：0
> 
> 时间：2013-04-06T09:54:22.227
> 
> 标签：azure, azure-mobile-services

我有一个 Azure 移动服务，它已经在生产中工作了一段时间。我用它来记录我的 Win8 应用程序的崩溃/错误。

该服务的 URL 是： [https ://silveroakapps-allaboutmoney.azure-mobile.net/](https://silveroakapps-allaboutmoney.azure-mobile.net/)

当我在浏览器中点击该 URL 时，我曾经获得一个通用页面，该页面出现在所有 Azure 移动服务中。但是今天，我得到了502。

为了测试我的移动服务或 Azure 帐户是否有任何问题，我创建了另一个服务 - [https://all-about-money.azure-mobile.net/](https://all-about-money.azure-mobile.net/)，它似乎工作正常。

任何想法，出了什么问题以及我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:50:55.703

一些站点发生了中断；这个问题应该已经解决了。

# php - 使用 if else 语句查询具有多个结果的结果

> ID：15849451
> 
> 赞同：0
> 
> 时间：2013-04-06T09:54:34.907
> 
> 标签：php, mysql, if-statement

我目前正在编写一个脚本，该脚本可以只允许 ip 从查询中访问网站。但我目前的问题是我只允许查询的第一个结果通过，第二个结果不是，其余的也不是。

```
require_once("../mysql.php"); 
$ip = $_GET['ip'];
$sql = "SELECT DISTINCT ip FROM servers WHERE status = 1";
$res = mysql_query($sql) or die(mysql_error());
$allow = mysql_fetch_assoc($res);
if ($ip != $allow['server']) {
    echo 'IP is not allowed!';
    die ();
}
$port = $_GET['port']; 
```

在这种情况下我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:59:15.957

你需要一个`for`循环，否则你只会得到查询的最后一行！

```
$allow = mysql_fetch_assoc($res); 
```

应该成为

```
while($allow = mysql_fetch_assoc($res){
     if ($ip != $allow['server']) {
          echo 'IP is not allowed!';
          continue;
      }else
         $port = $_GET['port'];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:00:30.553

您必须使用 while 循环，例如：

```
$ipAllowed = false;
while ($allow = mysql_fetch_assoc($res))
    if ($ip == $allow['server']) {
        echo 'IP is allowed!';
        $ipAllowed = true;
        break;
    }
if (!$ipAllowed) {
    echo 'IP is not allowed!';
    die();
} 
```

或简单地使用（更快的方法）：

```
$sql = "SELECT ip FROM servers WHERE status = 1 AND ip = '".mysql_real_escape_string($ip)."'";
$res = mysql_query($sql) or die(mysql_error());
if (mysql_num_rows($res) === 0) {
    echo 'IP is not allowed!';
    die();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:00:55.717

为什么不在 SQL 查询中检查 IP？

```
require_once("../mysql.php"); 
$ip = $_GET['ip'];
$sql = "SELECT count(*) FROM servers WHERE status = 1 AND IP = '".$ip."'"; 
```

之后，您可以检查 SQL 语句的返回值是否大于“0”。如果为真，则 IP 地址在数据库查询中。否则 ip 不包含在表中。也许转义 $ip 变量以防止 sql 注入很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T10:15:15.403

```
require_once("../mysql.php"); 
$ip = $_GET['ip'];
$sql = "SELECT DISTINCT ip FROM servers WHERE status = 1";
$res = mysql_query($sql) or die(mysql_error());
while($allow = mysql_fetch_assoc($res))
{
    if ($ip != $allow['server']) {
    echo 'IP is not allowed!';
    die ();
    }
    else
    { $port = $_GET['port']; }

} 
```

使用while循环将带来所有价值......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T11:10:04.223

您用于检查 IP 地址的方法似乎根本没有经过优化，您正在为数据库中的所有可用 IP 创建一个 while 循环，然后检查您的字段的单个 IP。

相反，您必须使用特定的 IP 地址或 IP 地址范围过滤查询，因此 SQL 将根据该地址向您发送结果，因此您的应用程序不会使用任何操作资源

你可以这样做，

```
$query = mysql_query("SELECT ipAddress as Record FROM YOURTABLENAME where status=1 and IP =".$ip);

if(mysql_num_rows($query)>0)
{
  //IP found do you logic here.
}
else
{
  //IP not found do you logic here.
} 
```

这将为您节省超过 75% 的可用资源。

希望你现在清楚了。

谢谢。

# arrays - 使用 VBA 构造一个数组，该数组将包含 Excel 文件中每一列的内容

> ID：15849453
> 
> 赞同：1
> 
> 时间：2013-04-06T09:54:43.370
> 
> 标签：arrays, loops, excel, vba

我正在使用一个包含 5 列的 excel 文件，每列都有一个不同的元素。我尝试创建一个 Columns 集合，其中该集合的每个元素将包含来自每列中的行的数据。我从这样的数组开始：

```
Dim Column(1 To 5) As ColumnsInFile
    Column(1) = Worksheets("Sheet1").Range("B2", Range("B2").End(xlDown))
    Column(2) = Worksheets("Sheet2").Range("C2", Range("C2").End(xlDown))
    Column(3) = Worksheets("Sheet3").Range("D2", Range("D2").End(xlDown))
    Column(4) = Worksheets("Sheet4").Range("E2", Range("E2").End(xlDown))
    Column(5) = Worksheets("Sheet5").Range("F2", Range("F2").End(xlDown)) 
```

稍后我想对每一列的内容一一执行一个函数。

我的问题是，我似乎可以为这一切编写一个更简单的代码——而且该代码无法告诉我某些东西没有定义。

我如何循环遍历每一列，以便对于每一列，代码将通过循环获取内容？不是定义 B2，而是更通用的东西，从第一列开始，到下一个，然后是下一个..原因，问题是，如果我有 400 列怎么办..我无法定义它那样的话。。时间太长了。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:18:48.343

要定义您需要使用的变量，`variant`并且名称`column`是范围的属性，不应用作名称：

```
dim cols() as variant, lastrow as long, lastcol as long 

'find last row and column 
lastrow = cells.find("*", range("A1"), , , xlbyrows, xlprevious).row
lastcol = cells.find("*", range("A1"), , , xlbycolumns, xlprevious).column 

'define your columns
cols = range("A2").resize(lastrow - 1, lastcol)

dim c as long, R as Long 
'cycle through columns
for C = 1 To ubound(cols, 2) ' second dimension is columns

    'cycle through rows
    for R = 1 to ubound(cols, 1) ' first array dimension is rows.

        'do somthing with columns and rows
        debug.print cols(R, C)

    next R
next C 
```

[更多阅读。](http://www.cpearson.com/excel/ArraysAndRanges.aspx)

# javascript - 将变量解析为 Jade 标签

> ID：15849456
> 
> 赞同：0
> 
> 时间：2013-04-06T09:55:09.777
> 
> 标签：javascript, html, pug

是否可以将 JS 变量解析为 Jade 标签？我想要实现的基本上是：

```
- var tag, numnodes = X
- if (numnodes == 2) tag=".span2"
- else tag=".span3"
tag
 <do something here> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:06:46.710

使用插值

```
- var tag = true ? "span" : "div";
#{tag}
  blala 
```

# launch4j - launch4j 捆绑 jre 错误

> ID：15849470
> 
> 赞同：1
> 
> 时间：2013-04-06T09:56:12.587
> 
> 标签：launch4j

我第一次使用launch4j，我得到一个编译错误。我已将 jre 文件夹复制到文件夹“C:\Users\8xy2ms\Desktop\smsModel\smsModel”。

这是错误代码：

```
Compiling resources
Generated resource file...
LANGUAGE 0, 1
1 RCDATA BEGIN ".\\jre6\0" END
18 RCDATA BEGIN "1\0" END
21 RCDATA BEGIN "http://java.com/download\0" END
20 RCDATA BEGIN "32\0" END
101 RCDATA BEGIN "An error occurred while starting the application.\0" END
102 RCDATA BEGIN "This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted.\0" END
103 RCDATA BEGIN "This application requires a Java Runtime Environment\0" END
104 RCDATA BEGIN "The registry refers to a nonexistent Java Runtime Environment installation or the runtime is corrupted.\0" END
17 RCDATA BEGIN "true\0" END 
```

这是项目xml

```
<launch4jConfig>
  <dontWrapJar>false</dontWrapJar> 
  <headerType>gui</headerType> 
  <jar>C:\Users\8xy2ms\Desktop\smsModel\smsModel\test2.jar</jar> 
  <outfile>C:\Users\8xy2ms\Desktop\smsModel\smsModel\test.exe</outfile> 
  <errTitle /> 
  <cmdLine /> 
  <chdir /> 
  <priority>normal</priority> 
  <downloadUrl>http://java.com/download</downloadUrl> 
  <supportUrl /> 
  <customProcName>false</customProcName> 
  <stayAlive>false</stayAlive> 
  <manifest /> 
  <icon /> 
  <jre>
  <path>./jre6</path> 
  <minVersion /> 
  <maxVersion /> 
  <jdkPreference>preferJre</jdkPreference> 
  </jre>
  </launch4jConfig> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-10T20:08:41.410

就我而言，我在其中使用了额外的选项。取消它们，它很快就会对你有用。只选择那些是强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T18:14:28.360

我知道这是一个非常古老的问题，但今天发生在我身上，谷歌把我带到了这里......

我的问题是路径分隔符。必须使用 '' 而不是 '/'。所以正确的是：`<path>.\jre6</path>`

# r - ggplot2，如何在 geom_text 中跳过 NA

> ID：15849484
> 
> 赞同：2
> 
> 时间：2013-04-06T09:57:39.297
> 
> 标签：r, ggplot2

我有一个矩阵，它显示了我用于某些线性组合的变量的分类值和相应的 r.squared 值。由于用于线性组合的变量数量在 1 到 4 之间变化，因此存在多个 NA。

我使用 ggplot2 来获得这个输出，这非常接近我想要的： [Rplot1.png](http://postimg.org/image/409ejpam3/)

但是，我不希望显示 NA，并且我无法弄清楚如何`geom_text()`显示所有内容，或者如果我尝试类似的操作给我一个错误，`geom_text(aes(label = sprintf("%1.0f",value[!is.na(value])))`因为在这种情况下长度是错误的。

此外，我希望以不同的精度（2 个小数位）和不同的颜色代码格式化最后一列。

我的数据：

```
col1 <- c(3, 12, 12,  4,  2,  4,  6,  4, 15, 13,  1,  4, 13, 13,  4,  4,  6, 13,  1,  4)
col2 <- c(14, 29, 33, NA,  3, 14, 14, NA, 18, 18,  3, NA, 18, 18,  5, NA, 14, 18,  3, NA)
col3 <- c(22, 33, NA, NA,  6, 23, NA, NA, 25, 25, NA, NA, 24, 25, NA, NA, 21, 25, NA, NA)
col4 <- c(25, NA, NA, NA,  9, NA, NA, NA, 31, NA, NA, NA, 25, NA, NA, NA, 27, NA, NA, NA)
col5 <- c(0.99879174731700204326, 0.99026853951234095064, 0.97577109510739901133, 0.94129388844778405510, 0.99280352772128999117, 0.96836063265002103595, 0.93791976583184200056,
      0.84138009684215697703, 0.98856063354420098399, 0.97136223282556599656, 0.79804189507803902082, 0.64147943288862196987, 0.99825754796980703532, 0.96893762747413503256,
      0.87923096638698294836, 0.78073080902317304464, 0.99370888114350197640, 0.95233511051330899111, 0.80470423703937299376, 0.62955867989309499677)

plotMat2 <- data.frame(cbind(col1,col2,col3,col4,col5),
                            row.names=c("data.max4","data.max3","data.max2","data.max1","data.3QT4","data.3QT3","data.3QT2","data.3QT1","data.median4","data.median3","data.median2",
                              "data.median1","data.mean4","data.mean3","data.mean2","data.mean1","data.1QT4","data.1QT3","data.1QT2","data.1QT1"))
names(plotMat2) <- c("SU" ,  "SU.1", "SU.2", "SU.3", "rsq" ) 
```

我的代码：

```
library(reshape)
cor_dat2 <- melt(as.matrix(plotMat2))
names(cor_dat2) <- c('Var1','Var2','value')
cor_dat2$Var1 <- factor(row.names(plotMat2), levels=rev(row.names(plotMat2)))
cor_dat2$Var2 <- factor(cor_dat2$Var2, levels=colnames(plotMat2))

library(ggplot2)
p <- ggplot(data =  cor_dat2, aes(x = Var2, y = Var1)) +
  geom_tile(aes(fill = value), colour = "black") +
  geom_text(aes(label = sprintf("%1.0f",value))) +
  scale_fill_gradient(low = "white", high = "red")
print(p) 
```

任何帮助表示赞赏，在此先感谢，埃里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T10:17:44.440

只需将其替换为`geom_text`：

```
geom_text(aes(label = ifelse(is.na(value), "", sprintf("%1.0f",value)))) + 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ii21D.png)

# php - 坐标搜索

> ID：15849485
> 
> 赞同：0
> 
> 时间：2013-04-06T09:57:46.907
> 
> 标签：php, mysql, database

现在几乎可以工作了。我可以在表格中得到结果，但由于某种原因，它们并不完全正确。

我搜索坐标 x 100 & y 100

我得到的结果只有 x 1-25 & y 1-25 而不是 x 74-125 & y 74-125

```
<?php

$x = $_POST['x'];
$y = $_POST['y'];

mysql_connect ("localhost","user","pass")  or die (mysql_error());
mysql_select_db ("db");

$res = mysql_query("select * FROM table WHERE (x between $x-25 AND $x+25) AND (y BETWEEN $y-25 AND $y+25)");

 echo "<table border='1' align='center' cellpadding='5'>";
    echo "<tr> <th>City Name</th> <th>X</th> <th>Y</th> </tr>";

    // loop through results of database query, displaying them in the table
    while($row = mysql_fetch_array( $res )) {

            // echo out the contents of each row into a table
echo "<tr>";
echo '<td>' . $row['cityname'] . '</td>';
    echo '<td>' . $row['x'] . '</td>';
echo '<td>' . $row['y'] . '</td>';
    echo "</tr>";
    } 

      // close table>
    echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:11:28.017

试试这个：

```
$query="SELECT * FROM cityname
WHERE (x between".$_POST['search']."-25 AND ".$_POST['search']."+25)
AND (y between".$_POST['search']."-25 AND ".$_POST['search']."+25)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:12:13.800

当我给你这个的时候，请记住，以你现在的方式来做这件事会让你更容易接触到 SQL 注入，并且你应该真正使用 PDO 或类似的方法来准备语句。话虽如此：

```
$x = (intval)$_POST['fld_x'];
$y = (intval)$_POST['fld_y'];

$res = mysql_query("select * FROM my_dbase WHERE (x between $x-25 AND $x+25) AND (y BETWEEN $y-25 AND $y+25)");
$data = array();
while($row = mysql_fetch_assoc($res)) {
    $data[] = $row;
} 
```

然后做你想做的事`$data`

示例[SQL 小提琴](http://sqlfiddle.com/#!2/1734c/1)

**编辑**

为确保数据库连接正确，请在需要时更改/添加以下内容：

```
if(!mysql_select_db ("dbase")) {
    die(mysql_error());
} 
```

后`$res = mysql_query...`放：

```
if(!$res) {
    die("Query Failed: ".mysql_error());
} 
```

**编辑**

根据您目前拥有的完整代码：

您之前将 HTML 显示为：

```
<form action="xysearch.php" method="get">
<label>X Coord
<input type="text" name="fld_x" />
</label>
<label>Y Coord
<input type="text" name=fld_y" />
</label>
<input type="submit" value="Search" />
</form> 
```

PHP将是：

```
<?php

$x = (intval)$_POST['fld_x'];
$y = (intval)$_POST['fld_y'];

mysql_connect ("localhost","user","pass")  or die (mysql_error());
mysql_select_db ("db");

$res = mysql_query("select * FROM table WHERE (x between $x-25 AND $x+25) AND (y BETWEEN $y-25 AND $y+25)");

 echo "<table border='1' align='center' cellpadding='5'>";
 echo "<tr> <th>City Name</th> <th>X</th> <th>Y</th> </tr>";

// loop through results of database query, displaying them in the table
while($row = mysql_fetch_array( $res )) {
    // echo out the contents of each row into a table
    echo "<tr>";
    echo '<td>' . $row['cityname'] . '</td>';
    echo '<td>' . $row['x'] . '</td>';
    echo '<td>' . $row['y'] . '</td>';
    echo "</tr>";
} 

// close table>
echo "</table>";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:22:29.230

您需要使用毕达哥拉斯定理，因为您希望圆的半径为 25

所以查询将是

```
SELECT cityname, x, y FROM my_database
WHERE SQRT((x - centre_x) * (x - centre_x) + (y - centre_y) * (y - centre_y)) <=25 
```

其中 center_x, center_y 是你输入的位置

# mysql - 在 SELECT 语句中用另一个表中的另一个值替换一个值

> ID：15849495
> 
> 赞同：0
> 
> 时间：2013-04-06T09:58:46.553
> 
> 标签：mysql, sql, puppet

我正在尝试提出一条 SQL 语句来打印 Puppet 数据库中所有重复的 [exported-resource] 定义。

```
mysql> SELECT id,restype,host_id,source_file_id FROM resources    
    -> WHERE title IN (SELECT title FROM resources WHERE exported=1 
    -> GROUP BY title HAVING count(title) > 1) ORDER BY title;
+------+------------------------+---------+----------------+
| id   | restype                | host_id | source_file_id |
+------+------------------------+---------+----------------+
|  305 | Nagios::Client::Export |       2 |             18 |
|  333 | Nagios_host            |       2 |             39 |
|  605 | Nagios_hostextinfo     |       6 |              2 |
|  443 | Nagios_hostextinfo     |       2 |             39 |
|  499 | Nagios_host            |       6 |              2 |
|  770 | Nagios::Client::Export |       6 |             18 |
......
...... 
```

哪个工作得很好，但是我如何从*hosts*表中检索/打印*hosts.name*而不是. 我只是无法通过重写上面的 SQL 语句来解决问题。*主机*表如下所示：*`host_id`*

 **```
mysql> SELECT id,name  FROM hosts;
+----+-----------------------------------------+
| id | name                                    |
+----+-----------------------------------------+
|  2 | controller-dns-01.sdas.cloud.com        |
|  6 | controller-monitoring-01.sdas.cloud.com |
|  1 | controller-puppet.sdas.cloud.com        |
| 13 | talend-admin-01.sdas.cloud.com          |
| 15 | talend-jobserver-01.sdas.cloud.com      |
| 14 | talend-jobserver-02.sdas.cloud.com      |
+----+-----------------------------------------+ 
```

*另外，有没有办法只打印主机名*的第一部分（即 only `controller-dns-01`）而不是完整的字符串？非常感谢任何人的任何建议。干杯！！

* * *

**更新：**
这是我的最终命令：以防万一其他人也在寻找一种方法来找出 Puppet Exported resources 重复定义

```
mysql> CREATE INDEX index_resources_on_restypetitle ON resources (restype(12),title(12));
mysql> SELECT r.id, r.restype, r.title, SUBSTRING_INDEX(h.name,'.',1) AS 'host_name',
    -> SUBSTRING_INDEX(s.filename,'puppet/',-1) AS 'file_name', r.line FROM resources r 
    -> LEFT JOIN hosts h ON r.host_id = h.id LEFT JOIN source_files s ON r.source_file_id = s.id 
    -> WHERE MD5(CONCAT(restype,title,host_id)) 
    -> IN (SELECT MD5(CONCAT(restype,title,host_id)) FROM resources 
    -> WHERE exported=1 GROUP BY MD5(CONCAT(restype,title,host_id)) 
    -> HAVING COUNT(MD5(CONCAT(restype,title,host_id))) > 1) ORDER BY title; 
```

该`SUBSTRING_INDEX(s.filename....)`位可能需要根据配置重新调整。非常感谢 thiella 帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:09:15.710

您需要将`resources`表与`hosts`表连接起来，使用 SUBSTRING_INDEX 来显示点左侧的字符串部分：

```
SELECT
  r.id, r.restype, r.host_id, r.source_file_id,
  SUBSTRING_INDEX(h.name, '.', 1)
FROM
  resources r LEFT JOIN hosts h
  ON r.host_id = h.id
WHERE
  r.title IN (SELECT title
            FROM resources
            WHERE export=1 
            GROUP BY title
            HAVING count(title) > 1)
ORDER BY
  r.title; 
```**

# primefaces - p:lineChart - 连续的线，没有点

> ID：15849508
> 
> 赞同：2
> 
> 时间：2013-04-06T10:00:14.807
> 
> 标签：primefaces, jqplot

如何从图表中删除点`p:lineChart`并将图表绘制为实线？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-13T15:19:47.047

对于其他有类似问题的人，我做了：

```
<p:chart type="line" model="#{myController.model}"/> 
```

和：

```
LineChartSeries serie = new LineChartSeries();
serie.setShowMarker(false); 
```

并且工作正常。我正在使用 PrimeFaces 5.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:15:06.737

有一个`showMarkers`属性对我不起作用（我使用的是 PrimeFaces 3.4.2），但我找到了隐藏它们的方法。

这有点hacky，我让它在展示中工作，你只需要用`widget_category`图表的小部件替换。如果您的网络浏览器允许，您甚至可以使用 javascript 控制台从[展示中在线测试它（在 chromium 下测试）：](http://www.primefaces.org/showcase/ui/lineChart.jsf)

```
// loop through the series
for (var i = 0; i < widget_category.cfg.series.length; ++i) {
    // Hide markers
    widget_category.cfg.series[i].showMarker = false;
    // I'm not sure you want this when talking about 'continuous line'
    // but you can make your chart smooth this way :
    widget_category.cfg.series[i].rendererOptions = { smooth: true };
}

// Ask a refresh using the modified configuration object
widget_category.refresh(widget_category.cfg); 
```

# php - 在 jQuery 的 Preg_match_all 中提取数字

> ID：15849510
> 
> 赞同：0
> 
> 时间：2013-04-06T10:00:34.463
> 
> 标签：php, jquery, regex, curl, preg-match-all

只是试图提取表的第二个 td （这是一个数字），即**235**的值。数字的值动态变化。

```
jQuery('.content').append('<tr><td>Volume1</td><td>56</td><td>123</td></tr>');
jQuery('.content').append('<tr><td>Volume2</td><td>235</td><td>789</td></tr>'); 
```

在php中我有这个：

```
if(preg_match_all("/jQuery\(\'.content\'\).append\((\'<tr><td>Volume2</td><td>(.*?)\')\);/", $result)) 
```

当然它不起作用，因为我不知道如何在 html 标签中使用正则表达式。请帮忙

**编辑**：解决方案必须在 php 中，因为 jQuery 使用 curl php 从另一台服务器接收。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:06:20.510

你可以做：

```
$(".content tr:eq(1) td:eq(1)").text(); 
```

演示：http: [//jsfiddle.net/zuhb9/](http://jsfiddle.net/zuhb9/)

如果您有多个课程内容，那么您需要遍历所有内容：

```
$(".content").each(function() {
    console.log($(this).find("tr:eq(1) td:eq(1)").text());
}); 
```

演示：http: [//jsfiddle.net/zuhb9/1/](http://jsfiddle.net/zuhb9/1/)

# php - 使用时间戳保存 contenteditable 中的更改

> ID：15849515
> 
> 赞同：9
> 
> 时间：2013-04-06T10:00:58.827
> 
> 标签：php, mysql, diff, contenteditable

我有一个`<div contenteditable="true" />`用户可以写的，长度几乎是无限的。
div 中的数据在 MySQL 数据库中以时间戳保存。

现在我的目标是在左侧有一个小注释，告诉用户文档的每个部分何时创建（分辨率应该以天为单位）。

现在，问题是：**我怎样才能最好地保存信息（什么部分发生了变化）？**

到目前为止，我考虑了以下选项，它们似乎都可以改进：

1.  每次用户访问文档末尾的站点时，我都会插入一个标志（例如，带有类和存储编辑开始的数据属性的空跨度）。然后在调用保存脚本时将此标志保存到数据库中。这个选项可以很容易地在侧面显示日期 - 我只需将它们放在与空跨度相同的高度，跨度告诉我日期。缺点是：用户可能会意外删除时间戳跨度，并且如果用户长时间不关闭窗口，则不会插入新的时间跨度（这可以通过每 X 分钟插入新的时间戳跨度来避免，因此删除部分是更相关）
2.  每次将数据传递到保存脚本时都尝试进行字符串差异比较，并且仅使用时间戳保存差异。然后，当页面加载时，将所有部分按正确的顺序放在一起，并在 Javascript 中将日期注释放在正确的位置。虽然这对我来说听起来像是很多开销 + 当旧部分被更改时，两个部分可能会合二为一，等等。总而言之，这些选项听起来非常复杂。

非常感谢任何输入/想法/建议！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T08:04:22.717

您要实现的是源代码控制世界中称为“注释”或“责备”的功能（尽管您只需要更新日期而不是日期+作者或简单的作者）。

要正确地做到这一点，您需要一种方法来制作差异（[php-diff](https://github.com/chrisboulton/php-diff)可能会完成这项工作）并获取文本的版本。有几种策略：

*   存储最新版本并仅保留增量（例如统一差异，我的偏好）

*   即时存储所有版本并计算增量

一旦你有了当前版本和 deltas 列表（如果超过几十个 deltas，你绝对可以缩短列表，让用户询问更多是否真的很重要）。您将增量组合在一起，这是注释阶段发生的地方，因为您可以记住每行来自哪个版本。编写其实很简单（从最新开始，补丁中添加的所有行都是最新的，其他需要解释，所以从下一个补丁重新开始，直到你到达你想要处理的最古老的补丁，其余行来自该版本或最早的版本，因此可以使用一些标记为“在或之前”的标志）。

[Google 有一个用于 Javascript 的 diff 库，](http://code.google.com/p/google-diff-match-patch/)因此可以在用户机器上完成所有艰苦的工作。他们在这个库中也有补丁部分。我没有找到注释/责备库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T10:11:20.887

您可以做到这一点的一种方法是为`div`. 每隔一段时间，您可以在此表中添加一个新条目，其中包含内容和时间戳，因此可以跟踪所有编辑修订。然后，要找出更改的内容，您可以简单地比较两个条目以找出添加、保持不变和删除的内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T16:00:01.037

当用户提交信息时，您应该保存此信息。用户想要查看信息的那一刻，应该几乎没有任何计算。

在后端创建两个表。在一个表中，我们称之为“currentdocs”，您始终存储最新版本的数据。当用户加载文档时，所有信息都来自这个表'currentdocs'。在另一个表中，我们称它为“docsintime”，您保存每个新的保存。它有一个指向“currentdocs”表的外键，您可以通过选择具有该外键的最大 id 来找到该表“docsintime”中的最后一行。一个 select 语句可以是这样的：

```
select id from docsintime where cur_key = x order desc limit 1; 
```

在这两个表中，您是否为每个相关部分存储了它已更改的最新时间戳。

保存新文档时，您会在“docsintime”表中获得上次保存的版本。您将所有相关部分与该记录中的数据进行比较。如果没有差异，则将相关部分的时间戳复制到要保存的新记录中。如果它确实不同，那么您是否为该相关部分创建一个新的时间戳。比较之后，您是否将新记录保存在两个表“currentdocs”和“docsintime”中。您更新表“currentdocs”并在表“docsintime”中插入一条新记录。只有使用新文档，您才能在表“currentdocs”中进行插入。对于该文档的下一个请求，您只需从“currentdocs”表中收集信息。这个过程重新开始。

# jquery - JQuery Div mousein/out/click 背景位置损坏

> ID：15849519
> 
> 赞同：1
> 
> 时间：2013-04-06T10:01:14.067
> 
> 标签：jquery

**背景图片：** [https ://tornhq.com/WorkingOn/Images/TextEditor/buttons.png](https://tornhq.com/WorkingOn/Images/TextEditor/buttons.png)

**JSFiddle：http:** [//jsfiddle.net/3RVCy/2/](http://jsfiddle.net/3RVCy/2/)

**查询：**

```
$(document).ready(function () {
    $('#FontSize').mouseover(function () {
        $(this).css({ "background-position": '-14px 0px' });
    });
    $('#FontSize').mouseout(function () {
        $(this).css({ "background-position": '0px 0px' });
    });
    $('#FontSize').click(function () {
        $(this).css({ "background-position": '-28px 0px' });
    });
}); 
```

我正在寻找最简单的方法来设置一个按钮，当你将鼠标悬停在它上面时会显示背景位置：-14px，但是它会恢复为 -0px，点击它会保持在 -28px。目前在我的本地版本上，如果您超出/进入它可以工作，单击可以工作，但是如果您在显示活动样式时将鼠标悬停（单击事件是活动样式），它将再次恢复。

最好的祝福，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:03:12.433

您的 jsFiddle 中没有包含 jQuery

[jsFiddle](http://jsfiddle.net/Tyriar/Qkwq4/)

![在此处输入图像描述](https://i.stack.imgur.com/fuLEL.png)

工作正常：

```
$(document).ready(function () {
    $('#FontSize').mouseover(function () {
        $(this).css({ "background-position": '-14px 0px' });
    });
    $('#FontSize').mouseout(function () {
        $(this).css({ "background-position": '0px 0px' });
    });
    $('#FontSize').click(function () {
        $(this).css({ "background-position": '-28px 0px' });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:07:10.310

如果我理解正确： [演示](http://jsfiddle.net/3RVCy/8/)

```
$('#FontSize').click(function () {
        $('#FontSize').unbind('mouseover');
        $('#FontSize').unbind('mouseout');
        $(this).css({ "background-position": '-28px 0px' });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:17:27.473

如果您希望按钮的行为类似于复选框 - 我将像这样实现它：

[http://jsfiddle.net/3RVCy/7/](http://jsfiddle.net/3RVCy/7/)

```
$(document).ready(function () {
    var state = false; // pressed
    $('#FontSize').mouseover(function () {
        if(!state) {
            $(this).css({ "background-position": '-14px 0px' });
        }
    });
    $('#FontSize').mouseout(function () {
        if(!state) {
            $(this).css({ "background-position": '0px 0px' });
        }
    });
    $('#FontSize').click(function () {
        if(!state) {
            $(this).css({ "background-position": '-28px 0px' });
        }
        else {
            $(this).css({ "background-position": '-14px 0px' });
        }
        state = !state;
    });
}); 
```

# joomla - joomla中的友好路由

> ID：15849520
> 
> 赞同：0
> 
> 时间：2013-04-06T10:01:18.510
> 
> 标签：joomla, joomla2.5

我在 joomla 3.0 中做一个网站，我在后端选择了一个友好的 URi。我也为网站创建了几个组件，访问该组件的路径是这样的。

```
<?php $link =JRoute::_('index.php?option=com_projects&view=proyectos&format=raw&task=proyecto&id='. $item->id);?> 
```

但是当浏览器显示这个路由器时，它不是友好的路由器。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:46:12.967

您需要为您的组件创建一个 router.php 文件，以告诉 joomla 如何构建 sef url，然后在请求 sef url 时对其进行解析。

查看 components/weblinks/router.php 文件以获取示例。

或者，如果您使用 sef 组件，如 joomsef 或 sh404sef，则需要为您的组件创建一个插件。您可以在组件制造商网站上找到有关如何执行此操作的文档。

# python - 如何使用python摆脱文件基名的扩展名

> ID：15849521
> 
> 赞同：12
> 
> 时间：2013-04-06T10:01:31.673
> 
> 标签：python, regex

我在这样的列表中获得了文件的完整路径：

```
a = ['home/robert/Documents/Workspace/datafile.xlsx', 'home/robert/Documents/Workspace/datafile2.xls', 'home/robert/Documents/Workspace/datafile3.xlsx'] 
```

我想要的是只获取没有扩展名的文件名，例如：

```
b = ['datafile', 'datafile2', 'datafile3'] 
```

我尝试过的是：

```
xfn = re.compile(r'(\.xls)+')
for name in a:
    fp, fb = os.path.split(fp)
    ofn = xfn.sub('', name)
    b.append(ofn) 
```

但这会导致：

```
b = ['datafilex', 'datafile2', 'datafile3x'] 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-06T10:06:55.070

1.  您使用的正则表达式是错误的。匹配,等`(\.xls)+`形式的字符串。这就是项目中有剩余的原因。您想要的是，即 a后跟零个或多个任意字符。`.xls``.xls.xls``x``.xlsx``\.xls.*``.xls`

2.  你真的不需要使用正则表达式。[os.path](http://docs.python.org/3/library/os.path.html)中有专门的方法来处理这个问题：[basename](https://docs.python.org/2/library/os.path.html#os.path.basename)和[splitext](https://docs.python.org/2/library/os.path.html#os.path.splitext)。

    ```
    >>> import os.path
    >>> os.path.basename('home/robert/Documents/Workspace/datafile.xlsx')
    'datafile.xlsx'
    >>> os.path.splitext(os.path.basename('home/robert/Documents/Workspace/datafile.xlsx'))[0]
    'datafile' 
    ```

    因此，假设您并不真正关心`.xls`/`.xlsx`后缀，您的代码可以很简单：

    ```
    >>> a = ['home/robert/Documents/Workspace/datafile.xlsx', 'home/robert/Documents/Workspace/datafile2.xls', 'home/robert/Documents/Workspace/datafile3.xlsx']
    >>> [os.path.splitext(os.path.basename(fn))[0] for fn in a]
    ['datafile', 'datafile2', 'datafile3'] 
    ```

    （另请注意[列表理解](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T10:10:17.123

单线：

```
>>> filename = 'file.ext'
>>> '.'.join(filename.split('.')[:-1]) if '.' in filename else filename
'file' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-23T09:25:02.313

这是重复的： [如何从 Python 中的路径获取没有扩展名的文件名？](https://stackoverflow.com/questions/678236/how-to-get-the-filename-without-the-extension-from-a-path-in-python/51475388#51475388)

[https://docs.python.org/3/library/os.path.html](https://docs.python.org/3/library/os.path.html)

在 python 3 pathlib 中，“pathlib 模块提供了高级路径对象。” 所以，

```
>>> from pathlib import Path
>>> p = Path("/a/b/c.txt")
>>> print(p.with_suffix(''))
\a\b\c
>>> print(p.stem)
c 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T10:10:50.723

为什么不直接使用`split`方法？

```
def get_filename(path):
    """ Gets a filename (without extension) from a provided path """

    filename = path.split('/')[-1].split('.')[0]
    return filename

>>> path = '/home/robert/Documents/Workspace/datafile.xlsx'
>>> filename = get_filename(path)
>>> filename
'datafile' 
```

# c# - T4 模板 - 从实现接口的类生成单元测试类

> ID：15849523
> 
> 赞同：2
> 
> 时间：2013-04-06T10:01:37.453
> 
> 标签：c#, unit-testing, templates, visual-studio-2012, t4

我有大量的类都使用相同的接口。这是这段代码第一次进行单元测试，所以我试图想出最好的方法来生成所有这些测试，或者至少是类的结构。

我知道 EF 中使用 T4 模板根据模型生成多个文件。有没有一种方法可以在 T4 模板中指定，我希望它查看所有实现接口的类并为每个类生成一个单元测试类。或者，如果它更容易，所有类都在同一个文件夹中，所以如果我可以将它指向那个文件夹，它可能会很好。

完成后，我可以使用规范填写每个单元测试类的详细信息。我显然必须删除 T4 文件，这样它就不会覆盖我添加到类中的代码，也许也有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T21:32:18.490

看看这篇博文：

[http://t4-editor.tangible-engineering.com/blog/how-to-generate-multiple-output-files-from-a-single-t4-template.html](http://t4-editor.tangible-engineering.com/blog/how-to-generate-multiple-output-files-from-a-single-t4-template.html)

它应该使您能够使用单个 .tt 文件生成多个输出。我（几乎）以与您相同的方式使用它，我基于一个 xml 文件生成一大类方法（3000 行），然后生成另一个包含这些方法的单元测试的文件。具有讽刺意味的是，单元测试指出了我生成的大类中的几个错误，即使也生成了单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:54:49.827

T4 模板始终只生成一份输出，无论是设计时模板的一个输出文件还是运行时模板的一个字符串。因此，模板本身将无法为您生成多个文件。尽管如此，只需少量代码，您就可以多次使用单个运行时模板，根据需要创建多个输出。

我建议创建一个简单的实用程序，与主项目分开，它将包含 T4 运行时模板和代码，例如，检查给定程序集或一堆给定源文件并使用 T4 运行时生成适当的测试框架模板并将其保存到每个感兴趣的类的文件中。我想这取决于所讨论的类的数量，是否值得花一点时间来创建这样的工具。

如果还不够清楚，请告诉我，我将尝试提供示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:21:14.997

我正在一个新项目中做类似的事情，我想使用 T4 模板生成一些代码，这些代码与从特定类继承的所有类有关。（基本上写一个工厂生成器类来为每个派生类创建一个新实例，只给定一个包含类名的字符串，并且在运行时不使用反射收集每个类中的公共属性列表。这样，其他开发人员可以只需将新类添加到项目中，而不必担心将其绑定到我们的框架中。）

我还将源类保存在一个公共子文件夹中。

虽然我才刚刚开始设计模板的工作方式，但模板将在编译代码之前运行，所以我的过程将是：

1.  对于子文件夹中的每个源代码文件：
    1.  将文件加载到内存中。
    2.  使用正则表达式来验证文件中的类是否继承自所需的基类。
    3.  使用正则表达式来提取我需要的数据。
2.  使用我收集的数据（类名、公共属性名）编写输出类

这是[Roslyn](http://msdn.microsoft.com/en-us/vstudio/hh500769.aspx)在分析代码以提取类和属性名称时可能有用的地方，但我暂时不会太花哨。我的方法将我们限制为每个文件一个类，并且只能使用我们正在编写的一种语言，但这是我们可以接受的配置约定。

您可能会发现[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/hh882448.aspx)以及[Oleg Sych 的博客和工具包](http://www.olegsych.com/)很有用。Oleg 的 T4 工具箱包含一个模板，用于从单个 T4 模板生成多个输出文件。

# php - Redirect::to() 清除 Facebook 访问令牌

> ID：15849536
> 
> 赞同：0
> 
> 时间：2013-04-06T10:03:24.767
> 
> 标签：php, facebook, facebook-php-sdk, laravel

我正在使用 laravel 构建一个 Facebook 应用程序，并`Redirect::to('thank_you')`在我的代码中使用在用户提交表单后将他们重定向到感谢页面。

```
function submitForm() {
    //Process input
    //Done, now redirect to thank you page
    Redirect::to('thank_you')
} 
```

但是，在“thank_you”中，Facebook 访问令牌消失了。所以当我需要运行`$facebook->api('/me')`它时会抛出一个异常，说需要一个有效的访问令牌。

它快把我逼疯了！你对我有什么建议吗？

（我目前将访问令牌存储在 $_SESSION['user_token'] 中。但是当用户注销时，这仍然有效，因此用户无法在应用程序中注销其 FB 帐户。​​而客户端没有想要网站上的任何注销按钮）

```
//Fix for invalid access tokens
if(!isset($_REQUEST['code']) && isset($_SESSION['accessToken'])) {
    $this->facebook->setAccessToken($_SESSION['accessToken']);
} 
//if the user has just done facebook login & auth
else if(isset($_REQUEST['code'])) {
    $_SESSION['accessToken'] = $this->facebook->getAccessToken();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:33:09.280

如果应用程序位于 iframe 中（例如 Facebook Canvas 应用程序或 Page Tab 应用程序），那么您需要设置一个 P3P 标头，告诉浏览器允许您从 iframe 访问 cookie。

```
header('P3P: CP="IDC DSP COR CURa ADMa OUR IND PHY ONL COM STA"'); 
```

如果您不这样做，会话 cookie 不会传递到您的应用程序，这将导致您被注销。

（仅当您在 iframe 中时才有意义）

编辑：这是关于 p3p 标头的一个很好的解释[Cookie 阻止/未保存在 Internet Explorer 的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer/389458#389458)

# vim - 控制键的 .vimrc 映射不起作用

> ID：15849537
> 
> 赞同：12
> 
> 时间：2013-04-06T10:03:28.280
> 
> 标签：vim

我的 .vimrc 中有以下映射，用于映射控制键 + 1、2、3.. 用于切换选项卡。我在 ubuntu 11.10 中使用 gnome 终端，控制键映射似乎不起作用。谁能告诉我做错了什么。

VIM - Vi 改进版 7.3.154

```
map <C-S-]> gt
map <C-S-[> gT
map <C-1> 1gt
map <C-2> 2gt
map <C-3> 3gt
map <C-4> 4gt
map <C-5> 5gt
map <C-6> 6gt
map <C-7> 7gt
map <C-8> 8gt
map <C-9> 9gt
map <C-0> :tablast<CR>
syntax on
set shiftwidth=2 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-06T10:36:59.840

首先确保您的终端仿真器（*Gnome Terminal*）不会为了自己的功能而吞下组合键；默认情况下`Ctrl`+ number 切换选项卡。但是恐怕您仍然无法使用所有这些组合...

由于键盘输入在内部处理的方式，不幸的是，这在今天通常是不可能的。某些组合键，如`Ctrl`+ 非字母无法映射，`Ctrl`+ 字母与`Ctrl`+ `Shift`+ 字母无法区分。（除非您的终端为它发送一个不同的*termcap*代码，而大多数人不会。）在插入或命令行模式下，尝试键入组合键。如果没有任何反应/插入，则不能使用该组合键。这也适用于`<Tab>`/ `<C-I>`, `<CR>`/ `<C-M>`/ `<Esc>`/`<C-[>`等（唯一的例外是`<BS>`/ `<C-H>`。）这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持此功能的终端中的控制台 Vim），并提出[了各种建议](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)。

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

# mysql - 按重复排序，先有限制

> ID：15849539
> 
> 赞同：3
> 
> 时间：2013-04-06T10:03:55.040
> 
> 标签：mysql, sql

我已经在这里问过类似的问题[MySQL order by duplicates top first](https://stackoverflow.com/questions/15812870/mysql-order-by-duplicates-top-first)

限制重复怎么样，比如不超过 2 个不同的

我有像这样的领域

```
 id    color
   1     red
   2     green
   3     yellow
   4     green
   5     green
   6     red
   7     red 
```

我想按重复分组，首先是最常见的重复，所以应该这样选择：

```
 id    color
   2     green
   4     green
   1     red
   6     red
   3     yellow 
```

感谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:28:36.097

此查询最多显示每种颜色的两个 id，按重复的数量降序排列：

```
SELECT
  c1.id,
  c1.color
FROM
  colors c1 INNER JOIN (SELECT color, COUNT(*) c FROM colors GROUP BY color) dup
  ON c1.color = dup.color
  LEFT JOIN colors c2
  ON c1.id > c2.id AND c1.color=c2.color
GROUP BY
  c1.color, c1.id
HAVING
  COUNT(c2.id) < 2
ORDER BY
  MAX(dup.c) DESC, c1.color, c1.id 
```

请[在此处](http://sqlfiddle.com/#!2/5329c/8)查看小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:05:38.173

有一个逻辑问题。“Distinct”不起作用，因为查询结果行在“id”和“color”值的组合中是唯一的。仅当您从选择中的列列表中删除 id 列时，它才会起作用。否则使用可以使用像“max/min/avg/count”这样的聚合函数——我更喜欢max/min函数——来获取至少一个id？

如果你想计算颜色，试试这个：

```
Select count(color) as number_of_colors, color FROM table GROUP BY color ORDER BY count(color) DESC 
```

# windows-7 - 使用用户帐户的任务调度程序和 vbs

> ID：15849540
> 
> 赞同：0
> 
> 时间：2013-04-06T10:04:04.550
> 
> 标签：windows-7, vbscript, scheduled-tasks

我正在尝试安排一个 vbs 脚本以常规用户权限运行。该脚本在以用户身份登录时运行良好，但是当我尝试从任务计划程序运行脚本作为“运行用户是否登录”时，它卡在以下行：

设置 IE = CreateObject("InternetExplorer.Application")

我尝试在选中和未选中“以最高权限运行”的情况下运行它。我从任务调度程序运行程序：

```
program/script: "c:\windows\system32\cscript.exe"
arguments: "test.vbs"
start in: c:\ 
```

这是完整的代码：

```
Set fso = WScript.CreateObject("Scripting.Filesystemobject")
set tfo = fso.createTextFile("c:\123.txt")
tfo.writeline("1")
Set IE = CreateObject("InternetExplorer.Application")
tfo.writeline("2")
tfo.close 
```

运行时输出为“仅在用户登录时运行”：

```
1
2 
```

运行时输出“无论用户是否登录都运行”：

```
1 
```

此外，当使用管理员帐户时，该任务将作为“无论用户是否登录都运行”正确运行，但我不能使用管理员帐户作为解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:16:14.307

您需要授予用户“作为批处理作业登录”权限。这可以通过 GUI 完成：

*   开始`gpedit.msc`
*   导航到*计算机配置 → Windows 设置 → 安全设置 → 本地策略 → 用户权限分配*
*   双击“作为批处理作业登录”权限
*   添加用户帐户
*   单击“确定”并关闭`gpedit.msc`

或在命令行上：

```
ntrights +r SeBatchLogonRight -u domain\username 
```

`ntrights.exe`是[Windows Server 2003 Resource Kit Tools](http://www.microsoft.com/en-us/download/details.aspx?id=17657)的一部分，但也适用于 Windows 7。您不必安装整个软件包。相反，您可以使用例如[7-zip](http://7-zip.org/)打开/解`rktools.msi`压缩`rktools.exe`.

**编辑：**既然您已经这样做了，问题可能是脚本无法生成 GUI 应用程序，因为当用户未登录时您没有交互式桌面。尝试在脚本中添加一些调试代码：

```
...
On Error Resume Next
Set IE = CreateObject("InternetExplorer.Application")
If Err Then tfo.writeline Err.Number & vbTab & Err.Description
On Error Goto 0
... 
```

此代码片段的测试运行给了我“权限被拒绝”错误。显然受限用户无法在计划任务中创建 IE 实例。

也就是说，你想用 Internet Explorer 对象实现什么？对于后台任务，使用 an[`XMLHttpRequest`](https://stackoverflow.com/a/14835871/1630171)可能是更好的方法。

# r - 分配的无效生存时间，生存分析；包生存

> ID：15849543
> 
> 赞同：0
> 
> 时间：2013-04-06T10:04:28.570
> 
> 标签：r, sas, survival-analysis

我们想分析新获得的客户在 R 中仍然是客户的时间。数据集在 730 天进行了右删失，我们有 10 个自变量。

模型如下所示：ln(Duration)=X'B+S*e，其中 X 是 10 个自变量的矩阵，B 是系数向量，S 是尺度参数，e 是误差项

我们使用的**数据集**如下： [http ://www.drvkumar.com/books/25/Statistical-Methods-in-Customer-Relationship-Management](http://www.drvkumar.com/books/25/Statistical-Methods-in-Customer-Relationship-Management)

我们使用**survival包及其survreg函数**，输入如下代码：

```
Dur <- survreg(Surv(Duration, Censor) ~ Acq_Expense + Acq_Expense_SQ + Ret_Expense + Ret_Expense_SQ + Crossbuy + Frequency + Frequency_SQ + Industry + Revenue + Employees, dist='weibull', data = daten [daten$Acquisition==1, ])
summary(Dur) 
```

**但结果不正确，**因为使用 SAS 代码会生成另一个输出（已确认是正确的）。

我们尝试生成**一个 Duration 的日志变量，**并在前面描述的模型中实现了新的变量 logDur：

```
> logDur <- log(daten$Duration)
> Dur <- survreg(Surv(logDur, Censor) ~ Acq_Expense + Acq_Expense_SQ + Ret_Expense + Ret_Expense_SQ + Crossbuy + Frequency + Frequency_SQ + Industry + Revenue + Employees, dist='weibull', data = daten [daten$Acquisition==1, ])
> summary(Dur) 
```

但是弹出以下错误信息：Fehler in Surv(logDur, Censor) : Time and status are different lengths

**如果有帮助，这里是 SAS 代码：**

```
proc lifereg data = statcrm.customer_acquisition;
model duration*censor(1) =  acq_expense acq_expense_sq ret_expense ret_expense_sq crossbuy frequency frequency_sq industry revenue employees;
where acquisition = 1; 
output out = statcrm.duration xbeta = xb p = pred sres = resid;
run; quit;

data statcrm.duration1;
set statcrm.duration;
pred_duration = exp(xb+0.138*(log(-log(1-0.5))));
ad = abs(duration - pred_duration); 
ad1 = abs(duration - 333.3165);
run; quit;

proc sql; select mean(duration) from statcrm.duration1 where acquisition = 1 and censor = 0; quit;

proc sql; select mean(ad) as mad, (mean(ad/duration)) as mape, 
mean(ad1) as random_mad, (mean(ad1/duration)) as mape1 
from statcrm.duration1 where acquisition = 1 and censor = 0; quit; 
```

# opencv - 使用边缘检测的畅通路径检测

> ID：15849545
> 
> 赞同：-1
> 
> 时间：2013-04-06T10:04:31.693
> 
> 标签：opencv, image-processing, computer-vision, edge-detection, object-detection

我想创建一个应用程序，用户可以在其中使用 Android 手机检测通畅的路径。我使用高斯滤波器进行平滑，然后使用精明的边缘检测来检测边缘。
我想如果我能找到视频中边缘的集中度，我可以将用户引导到边缘集中度较低的区域，从而形成一条清晰的路径。
有没有办法找到边缘的浓度？我是图像处理的新手，因此将不胜感激。
我使用 OpenCV Android 库来实现。
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:19:42.580

边缘检测过滤器将为您提供显示边缘位置的灰度图像，因此您可以在其上放置另一个平滑/平均过滤器，以了解每个像素附近边缘的集中度。

这是一个相当大的话题，并且有很多更好和更复杂的选择。您可能应该查找有关“图像分割”、“区域检测”并提及纹理或边缘的学术论文、教科书和教程。

此外，考虑边缘不表示路径清晰的情况，例如纯白色墙壁和砖脚路径。

# haskell - 这种使用箭头的快速排序实现有什么问题？

> ID：15849550
> 
> 赞同：11
> 
> 时间：2013-04-06T10:05:08.907
> 
> 标签：haskell, arrows

好的，所以我想用箭头来找点乐子。我试图直接将性感的 Haskell 快速排序转换为使用箭头的实现。但它不能正常工作。

```
import Control.Arrow

qs :: Ord a => [a] -> [a]
qs = isEmpty >>> right (head &&& tail 
                        >>> first ((qs.) . filter . (<) 
                                   &&& (\x -> (x:) . qs . filter (>=x)))
                        >>> first (uncurry (&&&)) 
                        >>> uncurry id 
                        >>> uncurry (++)) 
             >>> extract
  where 
    isEmpty [] = Left []
    isEmpty x  = Right x
    extract (Left x)  = x
    extract (Right x) = x 
```

有人能发现问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T10:55:27.013

第一个过滤器的谓词不正确。

```
(qs.) . filter . (<) 
```

应该

```
(qs.) . filter . (>) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T10:56:34.547

问题是你并没有真正分开`tail`，这两个比较不是互补的。当我们将第一个也写成 lambda 时，这一点变得很明显：

```
first ( (\x -> qs. . filter (x<))
    &&& (\x -> (x:) . qs . filter (>=x)) ) 
```

当你想要的很明显

```
first ( (\x -> qs. . filter (<x))
    &&& (\x -> (x:) . qs . filter (>=x)) ) 
```

或者

```
first ( (qs.) . filter . (>)
    &&& (\x -> (x:) . qs . filter (x<=)) ) 
```

顺便说一句，我更`app`喜欢`uncurry id`.

# jquery - 将循环中的 jquery/ajax 数据作为 HTML 输出到 div

> ID：15849552
> 
> 赞同：0
> 
> 时间：2013-04-06T10:05:36.253
> 
> 标签：jquery, html, ajax, for-loop

我已经从 servlet 中检索了一些数据，现在想要输出为 HTML 到名为“showArticles”的 div，并且每个值都有相同的 html 块。但是，它只输出一个值。所以我有：

```
|Article Title.   |
|Article content. | 
```

我希望有很多这样的 html。先感谢您。

阿贾克斯：

```
$.ajax({
        url : "LoadArticlesByTag",
        dataType : 'json',
        type: 'GET',
        data: {
            b_sub_tag:option_value
        },
        error : function(jqXHR, textStatus, errorThrown) {
            alert(textStatus);
        },
        success : function(data){
           var data1=data[0], data2=data[1];
           for(var i=0;i<data1.length;i++){
            outputToDiv(data1,i);
           }
        }

    });

function outputToDiv(data1,i) {                
            $('#showArticles').html(                
            "<article class='one_quarter'>"+
                "<figure><img src='images/demo/32x32.gif' width='32' height='32' alt=''></figure>"+
                "<strong>"+data1[i]["name"]+"</strong>"+
                "<p>"+data1[i]["content"]+"</p>"+
                "<p class='more'><a href='#'>Read More &raquo;</a></p>"

                );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:07:37.817

很简单，`.html()` *替换*目标选择器的内容。尝试使用`.append()`.

```
$('#showArticles').append(...) 
```

永远记得[检查文档](http://api.jquery.com/html/#html2)以了解当函数没有按您期望的那样工作时它们是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:09:13.193

由于 use ，`#showArticles`您每次调用时都会覆盖内容。如果要保留当前内容，则需要将其添加到开始使用或结束使用。`outputToDiv`[`.html()`](http://api.jquery.com/html/)[`.prepend()`](http://api.jquery.com/prepend/)[`.append()`](http://api.jquery.com/append/)

```
$('#showArticles').append(
     "<article class='one_quarter'>"+
     "<figure><img src='images/demo/32x32.gif' width='32' height='32' alt=''></figure>"+
     "<strong>"+data1[i]["name"]+"</strong>"+
     "<p>"+data1[i]["content"]+"</p>"+
     "<p class='more'><a href='#'>Read More &raquo;</a></p>"); 
```

# android - 变量未在 Android 中 handler.post 的 run 方法中更新

> ID：15849555
> 
> 赞同：3
> 
> 时间：2013-04-06T10:05:54.577
> 
> 标签：android, multithreading, handler, runnable

我创建了一个新线程来处理我的 TCP 管理需求。我这样做是为了在 UI 线程执行各种套接字魔术时保持其处于活动状态。我遇到的问题是 ServerThread 中使用的变量 num 似乎没有在 handler.post() 的 run 方法中更新。它改变了一次，但我的 while(true) 循环中的后续迭代不再改变它的值。但是，在 handler.post() 之外，我注意到它正在正确更改。为了查看 num 的值，我为 logcat 包含了一个日志命令，这就是为什么我知道这是正在发生的事情。问题是，我需要 run() 方法中的变量 num 来更新 UI 线程中的一些内容。

我声明 num 的方式可能有问题。我没有在代码中包含我认为与我的问题无关的大部分内容，所以如果我遗漏了什么，请现在告诉我。这是我对 android java 线程的第一次冒险，所以非常感谢一些帮助。只是今晚精神力耗尽。

```
public class MainActivity extends Activity {
    private int num = 0;
    private Handler handler = new Handler();
    //Other declarations

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
        //Do bunch of things including starting ServerThread
        //and creating a TCP server socket
        }

    public class ServerThread implements Runnable{
       public void run(){
       // ...
       // Do bunch of stuff including waiting for a client to connect
       try{                         
         BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
         while(true){ 
           num = in.read();
           Log.e("MainActivity", "A:" +num);       //<-- WORKS FINE
           if(num == -1) //client socket closed
             break;
           handler.post(new Runnable() {
              @Override
              public void run() {
                 Log.e("MainActivity", "B:" +num); //<-- DOES NOT WORK FINE
                 //Do bunch of stuff here with the variable num 
                 //including updating the UI thread
              }
           }
       }catch(Exception e){
              // ...
       }
    }
} 
```

# file-upload - 在 extjs4 中如何获取和访问上传文件的内容

> ID：15849557
> 
> 赞同：1
> 
> 时间：2013-04-06T10:06:30.260
> 
> 标签：file-upload, extjs4

我正在 extjs4 中研究文件上传功能。我将视图编码为-

```
Ext.define('Balaee.view.kp.dnycontent.Content', 
{
    extend:'Ext.form.Panel',
    requires:[
              'Balaee.view.kp.dnycontent.ContentView'
              ],
    id:'ContentId',
    alias:'widget.Content',
    title:'This day in a history',
    items:[

    {
        xtype: 'fileuploadfield',
        hideLabel: true,
        emptyText: 'Select a file to upload...',
        //inputType: 'file',
        id: 'upfile',
        //name:'file',
    width: 220
}],

   buttons: [{
        xtype : 'button',
        fieldlabel:'upload',
        action:'upload',
        name:'upload',
        text: 'Upload',
        formBind:'true'

    }]
}); 
```

在控制器中获取文件我编写了代码为-

```
getUpload : function() {
        var fileobj = Ext.getCmp('upfile');

        var file10 = Ext.getCmp('ContentId').getEl().down('input[type=file]').dom.files[0];

        var reader = new window.FileReader();
        reader.onload = function(oFREvent) {
            fileobj=oFREvent.target.result;
            console.log(oFREvent.target.result);

        };

        var storeObj=this.getStore('kp.DnycontentStore');
         console.log(storeObj);
         storeObj.load({
         params:{
         data:file
         },
         callback: function(records,operation,success){
           console.log("send");
         },
         scope:this
         })
         console.log(storeObj);

    }
}); 
```

所以上面“ var file10 = Ext.getCmp('ContentId').getEl().down('input[type=file]').dom.files[0];” 行正在检索所有与文件相关的数据 -`"File{size=879394,type="image/jpeg",name="Chrysanthemum.jpg", more...}"` 那么如何获取和访问上传文件的实际内容？请帮我

# scala - 在Scala中调用基于模板类型的方法

> ID：15849559
> 
> 赞同：4
> 
> 时间：2013-04-06T10:06:33.667
> 
> 标签：scala, generics

我试图找出一种从 Scala 调用 Java API 的方法。基本上，有一个`ContentValues`对象有几个方法，比如`getAsString`, `getAsLong`，每个方法都有自己不同的返回类型。

我可以包装`ContentValues`另一个对象，以便我可以添加一个根据 T`get[T]`调用正确方法的方法吗？`getAsXXX`

我试过的（没有用，抱怨含糊的隐式解决方案）：

```
object SContentValuesConversions {

  case class SContentGetter[ScalaType](val check: String => Boolean, val getter: String => ScalaType) {
    def getTyped(key: String): Option[ScalaType] = {
      if (!check(key)) None
      else Some(getter(key))
    }
  }

  implicit def SIntContentValues(cv: ContentValues) =
    SContentGetter((cv containsKey _), (cv getAsInteger _))

  implicit def SLongContentValues(cv: ContentValues) =
    SContentGetter((cv containsKey _), (cv getAsLong _))

  implicit def SStringContentValues(cv: ContentValues) =
    SContentGetter((cv containsKey _), (cv getAsString _))
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T11:17:32.323

`CanBuildFrom`您可以使用与集合特征相同的技术。

我们首先创建一个`Getter`案例类

```
case class Getter[T](getter: (ContentValues, String) => T) {

  def getOpt(contentValues: ContentValues, key: String): Option[T] =
    if (contentValues containsKey key) Some(getter(contentValues, key))
    else None
} 
```

这允许我们创建一个`ContentValues`具有所需方法的包装器。

```
implicit class ContentValuesWrapper(val c: ContentValues) extends AnyVal {
  def getAsOpt[T](key: String)(implicit getter: Getter[T]) =
    getter.getOpt(c, key)
} 
```

现在，为了调用`getAsOpt`方法，`ContentValues`我们需要提供正确类型的`implicit`实例。`Getter`

```
object Getter {
  implicit val intGetter = Getter(_ getAsInteger _)
  implicit val longGetter = Getter(_ getAsLong _)
  implicit val stringGetter = Getter(_ getAsString _)
} 
```

现在您可以在实例上使用该`getAsOpt`方法。`ContentValues`

```
// fake version of ContentValues
val c = 
  new ContentValues {
    val m = Map("a" -> "1", "b" -> "2", "c" -> "3")

    def getAsInteger(k: String): Int = getAsString(k).toInt
    def getAsLong(k: String): Long = getAsString(k).toLong
    def getAsString(k: String): String = m(k)

    def containsKey(k: String): Boolean = m contains k
  }

c.getAsOpt[Int]("a")      //Option[Int] = Some(1)
c.getAsOpt[Long]("b")     //Option[Long] = Some(2)
c.getAsOpt[String]("c")   //Option[String] = Some(3)
c.getAsOpt[Int]("d")      //Option[Int] = None
c.getAsOpt[Long]("e")     //Option[Long] = None
c.getAsOpt[String]("f")   //Option[String] = None 
```

# javascript - 与保证订单迭代javascript建立键值关系的更好方法？

> ID：15849562
> 
> 赞同：0
> 
> 时间：2013-04-06T10:06:57.023
> 
> 标签：javascript, arrays, key, iteration

我正在构建我的一个小项目，并且没有找到其他解决方案来保证具有迭代顺序的键值关系。

到目前为止我想出的是这个，

```
var Plate = function () {

    this.children = [];
    this.childrenKeys = [];
};

var proto = Plate.prototype;

proto.addChild = function (key, child) {

    this.childrenKeys.push(key);
    this.children.push(child);
};

proto.removeChild = function (key) {

    var index = this.childrenKeys.indexOf(key);
    delete(this.children[index]);
};

proto.update = function () {

    this.children.forEach(function (child) {

        child.update();
    });
}; 
```

虽然这确实有效，我可以`Plate`用一个键和一个值添加，我可以用一个键从盘子中删除，但这样做似乎不正确。

我知道我不能使用一个对象，`for...in`因为迭代的顺序是完全不一致的，我不能让它像那样。

这是执行此操作的正确方法，还是有内置的 javascript 方法来执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:13:11.940

为什么不使用包含键和值的对象数组呢？

```
var list = [
    { key: '2', value: 'foo' },
    { key: 'abc', value: 'bar' }
];

// Usage
alert(list[0].key); // '2'
alert(list[0].value); // 'foo' 
```

这是您使用此方法的代码（未经测试）。

```
var Plate = function () {

    this.list = []
};

var proto = Plate.prototype;

proto.addChild = function (key, child) {

    this.list.push({ key: key, child: child });
};

proto.removeChild = function (key) {
    for (var i = 0; i < this.list.length; i++) {
        if (this.list[i].key === key) {
            delete(this.list[i]);
            return;
        }
    }
};

proto.update = function () {

    for (var i = 0; i < this.list.length; i++) {
        this.list[i].child.update();
    }
}; 
```

# python - 如何在python中使用winapi SetWinEventHook？

> ID：15849564
> 
> 赞同：9
> 
> 时间：2013-04-06T10:07:09.863
> 
> 标签：python, winapi

我想获取从特定应用程序弹出的每个新对话框的句柄。
我知道我应该用Windows中的[SetWinEventHook](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373640%28v=vs.85%29.aspx)`user32.dll`设置一个钩子，但我不知道如何在 python 中做到这一点。你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T09:51:20.167

这是一个非常简单的示例，它将打开的每个对话框的窗口文本打印到控制台：

```
import sys
import time
import ctypes
import ctypes.wintypes

EVENT_SYSTEM_DIALOGSTART = 0x0010
WINEVENT_OUTOFCONTEXT = 0x0000

user32 = ctypes.windll.user32
ole32 = ctypes.windll.ole32

ole32.CoInitialize(0)

WinEventProcType = ctypes.WINFUNCTYPE(
    None, 
    ctypes.wintypes.HANDLE,
    ctypes.wintypes.DWORD,
    ctypes.wintypes.HWND,
    ctypes.wintypes.LONG,
    ctypes.wintypes.LONG,
    ctypes.wintypes.DWORD,
    ctypes.wintypes.DWORD
)

def callback(hWinEventHook, event, hwnd, idObject, idChild, dwEventThread, dwmsEventTime):
    length = user32.GetWindowTextLengthA(hwnd)
    buff = ctypes.create_string_buffer(length + 1)
    user32.GetWindowTextA(hwnd, buff, length + 1)
    print buff.value

WinEventProc = WinEventProcType(callback)

user32.SetWinEventHook.restype = ctypes.wintypes.HANDLE
hook = user32.SetWinEventHook(
    EVENT_SYSTEM_DIALOGSTART,
    EVENT_SYSTEM_DIALOGSTART,
    0,
    WinEventProc,
    0,
    0,
    WINEVENT_OUTOFCONTEXT
)
if hook == 0:
    print 'SetWinEventHook failed'
    sys.exit(1)

msg = ctypes.wintypes.MSG()
while user32.GetMessageW(ctypes.byref(msg), 0, 0, 0) != 0:
    user32.TranslateMessageW(msg)
    user32.DispatchMessageW(msg)

user32.UnhookWinEvent(hook)
ole32.CoUninitialize() 
```

# python - PyQt：如何更改 QInputDialog 按钮的文本？

> ID：15849567
> 
> 赞同：0
> 
> 时间：2013-04-06T10:07:38.513
> 
> 标签：python, button, dialog, pyqt

我想更改`QInputDialog`框中按钮（确定、取消）的文本。我怎样才能做到这一点？

我想使用 Python 的 gettext 来进行翻译，而不是 Qt Linguist。

```
# Set maximum file size
def maximumFilesize(self):

    # Get user input
    maxsize, ok = QtGui.QInputDialog.getInt(self, "Maximum file size",
        "Enter maximum file size in bytes:", self.maxsize, 1, 1073741824)

    # If OK was clicked...
    if ok:
        if maxsize <= 0:
            message = "Maximum file size cannot be less than 1."
                QtGui.QMessageBox.critical(self, "Error", message)
                return False

        # Set new maximum file size
        self.maxsize = maxsize 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:08:43.197

`QInputDialog`本身包含方法`setOkButtonText`，但是，您使用的静态方法会创建一个对象`setCancelButtonText`，该对象仅在方法内部可见，您无法访问。`gitInt``QInputDialog``getInt`

我建议创建自己的`InputIntegerDialog(QtGui.QInputDialog)`，您必须在其上手动添加 spinBox 并设置其属性。然后您将能够更改两个按钮上的文本，因为对话框对象在您的控制之下，而不是在 PyQt 中的某个地方创建。

顺便说一句，如果您只想翻译标准按钮，您可能希望看到[这个问题](https://stackoverflow.com/questions/1709528/pyqt-translating-standard-buttons)。

# ruby-on-rails - 使用 Ransack gem 按年龄过滤的未定义方法错误

> ID：15849569
> 
> 赞同：1
> 
> 时间：2013-04-06T10:07:39.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, ransack

我正在尝试使用 ransack 按年龄过滤结果，但 ransack 给了我一个未定义的方法错误。我的数据库中有用户 DOB，在我的用户模型中，我有一个计算用户年龄的年龄方法。它工作得很好，我可以这样称呼用户年龄：

```
@user = User.find(1)
@user.age 
```

现在进行搜查，我的控制器中有以下内容：

```
 def index
   @search = User.search(params[:q])
   @users = @search.result
  end 
```

在我看来，我有：

```
<%= search_form_for @search do |f| %>
    <%= f.label :age_gteq, "Ages:" %> <%= f.text_field :age_gteq %>
    <%= f.label :age_lteq, "to" %> <%= f.text_field :age_lteq %>
    <%=f.submit "Filter", class: "button" %>
<% end %> 
```

这是我得到的错误：

```
undefined method `age_gteq' for Ransack::Search<class: User, base: Grouping <combinator: and>>:Ransack::Search 
```

我相信我会得到同样的错误`age_lteq`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:05:11.180

据我所知，它不起作用，因为目前 Ransack 仅适用于数据库列。最后 Ransack 只是一个复杂的 SQL 查询生成器。

想想这个例子：

```
User.where('age >= ?', 30) 
```

SQL 查询会是什么样子？

```
SELECT * FROM user WHERE age >= 30 
```

即使 Ransack 会在正常的非数据库属性上处理此类条件，SQL 仍然是错误的。（因为没有`age`专栏）

一种解决方案是在表单中使用原始的出生日期列，并使用一些 Javascript 来允许用户输入年龄数字而不是日期。例如通过监听`onsubmit`事件并修改`input`' 的内容。

**2014 年 1 月 8 日更新：**

还有另一种可能使这项工作。将此添加到您的`User`模型中：

```
ransacker :age do
  Arel::Nodes::SqlLiteral.new(
     'DATE_PART('year', AGE(NOW(), date_of_birth_column))') 
  # Beware: PostgreSQL specific SQL!
end 
```

“ransacker”需要返回一个 Arel 节点，该节点稍后将附加到 Ransack 生成的 Arel 节点。

这使您可以`age_eq`像使用常规数据库列一样使用所有其他 Ransack 谓词。

# python - 没有名称但级联的sqlalchemy backref

> ID：15849574
> 
> 赞同：7
> 
> 时间：2013-04-06T10:08:35.440
> 
> 标签：python, sqlalchemy

我们为注册到系统的人提供了一个 User 类。而且我们有大量属于用户的类（和插件添加更多）。所以如果一个用户被删除了，他的东西也应该被删除。这就是我们目前正在做的事情：

```
class User(Base):
    id = Column(Integer, primary_key=True)
class Thing(Base):
    user_id = Column(Integer, ForeignKey(User.id))
    user = relationship(
        User,
        backref=backref("list_of_things",
            cascade="all, delete-orphan")) 
```

这行得通。

假设我们从不使用`User.list_of_things`: 有没有办法把它排除在外？但仍然得到 backref 级联行为？如果我们需要`User.list_of_things`，当然可以添加它。但在那之前，最好把它排除在外。

你可以说“好吧，只要输入一个名字，不要在意”。这就是我们正在做的事情。两件事情：

1.  我们需要为那个东西定义一个命名约定，这样插件的名称就不会在`User`类上与其他插件和/或我们的主要属性发生冲突。
2.  会使事情更容易读/写。

小更新：对于我们手头的问题，一个*未经测试*的解决方案将是一个 mixin，但它不会回答没有名称的 backrefs 的问题：

```
class OwnedbyUserMixin(object):
    @declared_attr
    def user_id(cls):
        return Column(Integer, ForeignKey(User.id),
            nullable=False)

    @declared_attr
    def user(cls):
        return relationship(
            User,
            backref=backref("list_of_" + cls.__tablename__,
                cascade="all, delete-orphan")) 
```

# ios - UIButtons 的 IBOutletCollection 在 vi ewDidLoad 之后为空

> ID：15849575
> 
> 赞同：0
> 
> 时间：2013-04-06T10:08:40.720
> 
> 标签：ios, xcode, ipad, uibutton, iboutletcollection

正如标题中所说，我的 UIButtons 的 IBOutletCollection 在 vi​​ewDidLoad 之后是空的。我以同样的方式创建了一个 UILabels 的 IBOutletCollection，这个工作得很好。知道如何解决这个问题，或者我在哪里犯了错误？

这是代码：

```
@property (strong, nonatomic) IBOutletCollection(UILabel) NSArray *lbl_save;
@property (strong, nonatomic) IBOutletCollection(UILabel) NSArray *lbl_cancel;
@property (strong, nonatomic) IBOutletCollection(UILabel) NSArray *lbl_edit;

@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *btn_changeData;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *btn_save;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *btn_cancel; 
```

按钮放置在 xib 中并正确链接到相应的插座。就像标签一样。 ![网点链接](https://i.stack.imgur.com/1PRT2.png)

我按下其中一个按钮的时间是第一次，我想访问代码中的按钮。

```
for (UIButton *btn in _btn_changeData) {
    btn.hidden = NO;
    btn.userInteractionEnabled = YES;
}
for (UIButton *btn in _btn_save) {
    btn.hidden = YES;
    btn.userInteractionEnabled = NO;
}
for (UIButton *btn in _btn_cancel) {
    btn.hidden = YES;
    btn.userInteractionEnabled = NO;
}
for (UILabel *lbl in _lbl_save) {
    lbl.hidden = YES;
}
for (UILabel *lbl in _lbl_cancel) {
    lbl.hidden = YES;
}
for (UILabel *lbl in _lbl_edit) {
    lbl.hidden = NO;
} 
```

这也是我得到以下异常并意识到我的 Button OUTletcollection 为空的地方。

> -[UIButton countByEnumeratingWithState:objects:count:]：无法识别的选择器发送到实例 0xa8a8850 ![在此处输入图像描述](https://i.stack.imgur.com/hncW1.png)

我既不覆盖 outletcollection，也不更改按钮的属性。只是标签在集合中，而按钮不在。我不知道为什么。

提前谢谢任何帮助。

小牛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:54:25.760

我想到的第一个想法是属性没有正确合成。真的是财产`_btn_changeData`背后的ivar吗？`btn_changeData`

第二个想法是我在调试别人的代码时看到的。当插座连接不正确时，例如，如果控制器引用自身，则可以创建两个控制器实例。显然，只有其中的一个将连接插座。确保仅创建实例。

对于调试，自己实现设置器可能是一个好主意。

编辑：重读后，问题实际上与您在问题中所说的不同。错误信息`-[UIButton countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0xa8a8850`

并不意味着这`_btn_changeData`是一个空数组。这意味着有一个`UIButton`而不是一个数组。话虽如此，您应该检查您是否没有在`_btn_changeData`某处覆盖数据。

# dotnetnuke - Durandal、Breeze 和 DotNetNuke

> ID：15849590
> 
> 赞同：3
> 
> 时间：2013-04-06T10:10:31.597
> 
> 标签：dotnetnuke, breeze, durandal

## 我正在开发一个 SPA 作为 DotNetNuke 模块。一切正常，但我找不到使模块与 Breeze 一起工作的方法。我使用的 DNN 版本是 7.04，我认为是最新的。DNN 使用自己的 WebApi（写在 WebApi 之上），并且模块没有 AppStart 文件夹。

经过一番思考，我添加了这部分

在 DNN 中，您可以像这样添加路由：

```
public class RouteMapper : IServiceRouteMapper
{
    public void RegisterRoutes(IMapRoute mapRouteManager)
    {
        mapRouteManager.MapHttpRoute("MyModuleName", "default", "{controller}/{action}",
        new[] { "MyModule.NameSpace" });
        //Second route....
        //third rout.....
    }
} 
```

另一方面，Breeze 使用 WebActivator.PreApplicationStartMethod 在 AppStart 上注册路由。

在我看来，我需要做的就是为上面的代码添加一个路由，然后将 Breeze 称为另一个 DNN 模块，就像这样

```
mapRouteManager.MapHttpRoute("BreezeApi,"Breeze", "api/{controller}/{action}... 
```

但是根据微风的启动类的评论，微风路由应该插入所有api路由的前面，所以我怀疑它不起作用。有人知道吗？

# javascript - 当我向 div.innerHTML 添加内容时，事件侦听器不起作用

> ID：15849592
> 
> 赞同：0
> 
> 时间：2013-04-06T10:10:49.090
> 
> 标签：javascript, events, html, click

这是我的代码：

```
<html>
<head>
    <script type="text/javascript" language="javascript">
        function load() {
            div1 = document.getElementById('div1');
            div2 = document.getElementById('div2');
            function clicky() {
                alert('1');
            }
            div2.addEventListener('click', clicky);
            //div1.innerHTML += 'ooooooofdsfdsfdsfdsfdsfsdfdsfdsfdsfdsklfdsjfkldsjfkldsjfldsjfkldsjfkldsjfdskl';
        }       
    </script>
</head>
<body onload="load();">
    <div id="div1" style="width : 300px; height : 300px; background-color : red; position : absolute">

        <div id="div2" style="width : 20px; height : 20px; background-color : green; position : absolute; right : 5px; top : 5px;">X</div>

    </div>
</body> 
```

所以，我在 div1 中有 div2。如果评论的字符串真的被评论了，一切正常：点击 div2 会引起警报。但是，如果我将 smth 添加到 div1.innerHTML，事件处理程序将不起作用。哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:14:49.760

你的代码

```
div1.innerHTML += 'ooooooofdsfdsfdsfdsfdsfsdfdsfdsfdsfdsklfdsjfkldsjfkldsjfldsjfkldsjfkldsjfdskl'; 
```

实际上意味着

```
div1.innerHTML = div1.innerHTML + ooooooofdsfdsfdsfdsfdsfsdfdsfdsfdsfdsklfdsjfkldsjfkldsjfldsjfkldsjfkldsjfdskl'; 
```

所以从字面上看，你正在用一个新字符串覆盖 div1 的 innerHTML，这反过来又创建了一个新的 div2 对象。因此，您需要在设置 innerHTML 后添加点击侦听器。

# jquery - 我的 jQuery 函数在 IE 中不起作用？

> ID：15849599
> 
> 赞同：1
> 
> 时间：2013-04-06T10:11:39.217
> 
> 标签：jquery, internet-explorer, function

看起来我的 jQuery 函数在 IE 8 和 9 中不起作用。

我想将 div 与 jQuery 对齐，所以我创建了以下函数：

```
imageAlign = function(){
    var image = $j(this); 
    var imageWidth = image.width();
    var imageMargin = imageWidth / 2;
    image.css("margin-right", -imageMargin);
};
$j('.image-wrap').each(imageAlign); 
```

我使用 $j 作为 jQuery.noConflict(); 因为WordPress。

在 IE 8 和 9 中，该函数仅适用于具有 .image-wrap 类的第一个 div。

如果我使用没有函数的代码，它在所有浏览器中都可以正常工作：

```
var image = $j('.image-wrap'); 
var imageWidth = image.width();
var imageMargin = imageWidth / 2;
image.css("margin-right", -imageMargin); 
```

我究竟做错了什么？

**编辑：**

我的代码在准备好的文档中：

```
jQuery(document).ready(function($j) {
        var $j = jQuery.noConflict();

        <!-- Code -->

}); 
```

**编辑！重要**

我想我问错了问题！通过下面的答案，我发现了其他东西。在 IE 8 和 9 中，.image-wrap div（第一个除外）确实获得了负边距。但是这个负边距权利的价值是不正确的。所以该功能确实有效，但不正确。

很抱歉占用您的时间...无论如何，感谢您的帮助！

# android - 如何使 ListView 中的 TextViews 同时闪烁

> ID：15849600
> 
> 赞同：0
> 
> 时间：2013-04-06T10:11:44.153
> 
> 标签：android, android-listview, android-animation, android-view

我有一个 ListView 在其行中包含 TextViews。在某些行上，我希望 TextView 一起闪烁，我的意思是同时打开/关闭。任何想法如何同步它们？

我的应用程序与 Android 8 API 兼容，所以 ObjectAnimator 不适合我。

在我目前的实现中，我得到了一个奇怪的行为——不仅文本视图闪烁不同步，而且当我滚动时，有时我会看到 TextView 快速闪烁几次，就像动画在 FF 上运行然后稳定在正常速率上一样。

这是我的代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
    Holder holder;
    if (convertView == null) {
        LayoutInflater inflater = getLayoutInflater();
        convertView = inflater.inflate(R.layout.rowt, parent, false);
        holder = new Holder(convertView);
        convertView.setTag(holder);
    } else {
        holder = (Holder) convertView.getTag();
    }

    ListRowUID data = (PollsListRowUID) getItem(position);
    if (data != null) {
        holder.dateTextView.setText(data.Date); 
        if (data.Date.equals(holder.inProgressText)) // turn the animation on/off
            holder.dateTextView.setAnimation(holder.blink);
        else 
            holder.dateTextView.setAnimation(null);
        holder.favoritesTextView.setText("" + data.FavoritesNum);
        holder.favoritesImageView.setImageResource(data.MarkedAsFavorite ? R.drawable.favorite_full_small : R.drawable.favorite_empty_small);
    } 
    return (convertView);
}

private class Holder {

    public Holder(View convertView) {
        dateTextView = (TextView) convertView.findViewById(R.id.dateTextView);
        inProgressText = convertView.getResources().getString(R.string.in_progress); 
        favoritesTextView = (TextView) convertView.findViewById(R.id.favoritesTextView);
        favoritesImageView = (ImageView) convertView.findViewById(R.id.favoritesImageView);

        blink = new AlphaAnimation(0.0f, 1.0f);
        blink.setDuration(500); 
        blink.setStartOffset(20);
        blink.setRepeatMode(Animation.REVERSE);
        blink.setRepeatCount(Animation.INFINITE);

    }

    TextView dateTextView;
    TextView favoritesTextView;
    ImageView favoritesImageView;

    String inProgressText;
    Animation blink;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:28:56.550

使用以下方法使您的 TextView 闪烁

```
private void blink(){
    final Handler handler = new Handler();
    new Thread(new Runnable() {
        @Override
        public void run() {
        int timeToBlink = 1000;    //in milissegunds
        try{Thread.sleep(timeToBlink);}catch (Exception e) {}
            handler.post(new Runnable() {
                @Override
                    public void run() {
                    TextView txt = (TextView) findViewById(R.id.usage);
                    if(txt.getVisibility() == View.VISIBLE){
                        txt.setVisibility(View.INVISIBLE);
                    }else{
                        txt.setVisibility(View.VISIBLE);
                    }
                    blink();
                }
                });
            }
        }).start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:30:41.620

如果您的列表足够小，您可以考虑使用垂直`LinearLayout`并将您的视图添加到其中。

这是保持动画同步的简单方法。

# java - GWT RF：如何在客户端和服务器中共享相同的代码

> ID：15849602
> 
> 赞同：2
> 
> 时间：2013-04-06T10:11:51.797
> 
> 标签：java, gwt, javabeans, requestfactory

我想使用相同的代码在客户端和服务器端对对象进行排序和操作。

但我面临一个问题，因为在客户端我们需要一个代表服务器类的代理接口。

有没有办法在两者中使用相同的接口？我知道 RF 有一种机制，可以在通过线路发送时将 bean 属性从服务器实例复制到客户端实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:54:05.403

使用相同 API 的一种方法是使用代理扩展和域对象实现的接口。

```
// common interfaces
interface Foo { … }
interface Bar<T extends Foo> {
  int getX();
  void setX(int x);

  // setters need to use generics
  List<T> getFoos();
  void setFoos(List<T> foos);

  // with only a getter, things get easier:
  Bar getParent();
}

// domain objects
class RealFoo implements Foo { … }
class RealBar implements Bar<RealFoo> {
  int x;
  List<RealFoo> foos;
  RealBar parent;

  @Override
  public RealBar getParent() { return parent; }

  // other getters and setters
}

// proxy interfaces
@ProxyFor(RealFoo.class)
interface FooProxy extends Foo { … }

@ProxyFor(RealBar.class)
interface BarProxy extends Bar<FooProxy> {
  @Override
  BarProxy getParent();

  // other getters and setters
} 
```

然后，您可以在客户端和服务器端使用`Comparator<Foo>`or `Comparator<Bar>`。

我通常只以这种方式实现*特征*（*方面*，*方面*，以你喜欢的方式调用它们） `HasId`，而不是完整的域对象的 API。然后我可以用来获取任何对象的键，将它们放入地图或比较是否相等，用于显示（客户端上的自定义、发送到客户端的服务器端错误消息等） ,用于排序等。`HasLabel``HasPosition``HasId``HasLabel``Cell``HasPosition`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:23:58.470

RequestFactory 的要点是它*不*使用相同的类型。每个请求上下文描述了调用到达服务器时要执行的一组操作（创建和查找内容，然后应用 setter，然后运行服务方法）。由于调用被描述为只是服务器上真实事物的代理，因此您需要一个“假”模型对象，例如 a `EntityProxy`or`ValueProxy`以确保唯一可以进行的调用是 getter 和 setter - 有时，setter 是不允许的（当从服务器读取对象但在编辑之前）。

如果您的模型很简单，即不包含其他对象，而仅包含字符串、日期和原语，您可以让实体和代理都实现相同的接口。但是，如果模型包含子对象，那么这将更加困难 - 唯一可能的方法是忽略那些 getter 和 setter。否则，您不能覆盖代理类型中的那些方法来指定该嵌套对象的代理版本。

如果您确实想在客户端和服务器上重用相同的类型，请考虑使用 RPC istead。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T22:40:57.680

正如 Thomas 在他的[回答](https://stackoverflow.com/questions/15849602/gwt-rf-how-to-share-the-same-code-in-client-and-server#15852887)中所说，当前 GWT 在客户端和服务器中共享代码的唯一方法是在双方实现相同的接口并在您的共享代码中使用它。

正如您在查询中所说，由于 RF 将属性从服务器复制到客户端，理论上我们可以在双方（更简单的代码）使用相同的接口（代理接口），将 @ValueFor 值设置为指向自身。

让我们看一个例子：

```
 // Shared interface in client and server sides
 @ProxyFor(Foo.class)
 interface Foo extends ValueProxy {
    String getBar();
 }

 // Server side implementation
 class FooImpl implements Foo {
    String getBar(){return "bar";};
 } 
```

作为信息，我们在我们的产品中使用这种方法，因此我们可以销售 2 个后端解决方案（一个基于 GAE，另一个基于 couchdb）。

上面的代码适用于不创建新值的客户端代码，但如果你想创建它们，定义一个值定位器就足够了：

```
 // Say RF which locator to use to create classes in server side
 @ProxyFor(value = Foo.class, locator ALocator.class)
 interface Foo extends ValueProxy {
 }

 public class ALocator extends Locator<Foo, String>  {
   public Foo create(Class<? extends Foo> clazz) {
    return new FooImpl();
   }
   ...
 } 
```

不幸的是，RF 不处理服务器端的接口，请参阅问题： [7509](http://code.google.com/p/google-web-toolkit/issues/detail?id=7509)和[5762](http://code.google.com/p/google-web-toolkit/issues/detail?id=5762)。

但是，正如您在问题评论中看到的那样，已经有一个[解决](https://gwt-code-reviews.appspot.com/1764804/)方案（待审核）。希望它将包含在 GWT 的下一个版本中。

同时，您可以使用这种方法，只需将文件复制到`ResolverServiceLayer.java`您的 src 文件夹中并应用此[补丁](https://gwt-code-reviews.appspot.com/1764804/diff/15003/user/src/com/google/web/bindery/requestfactory/server/ResolverServiceLayer.java)即可。

# css - 如何为一个类定义多个css伪类？

> ID：15849605
> 
> 赞同：-1
> 
> 时间：2013-04-06T10:12:05.297
> 
> 标签：css

.struct a:link, .struct a:visited {color:#5AB4F9;}

这是正确的做法吗？如果没有怎么办？感谢预付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:19:50.733

Id 取决于您要实现的目标：

那将适用于`:link` **OR** `:visited`的元素：

```
.struct a:link, .struct a:visited {color:#5AB4F9;} 
```

而那个同时为`:link` **AND** `:visited`的元素工作：

```
.struct a:link:visited {color:#5AB4F9;} 
```

# css - 自定义光标：url(/img/cursor.gif) 标记为无效属性

> ID：15849606
> 
> 赞同：1
> 
> 时间：2013-04-06T10:12:06.223
> 
> 标签：css, cross-browser, cursor, gif, animated-gif

我正在尝试为我的网站创建一个小横幅，但我发现自己在悬停时无法自定义光标。如果我使用像这样的内置值

```
cursor:waiting 
```

它有效，但如果我将其更改为

```
cursor: url(/img/cursor.gif) 
```

它不再起作用了...我也尝试使用PNG图像，结果是相同的：只是默认光标..我还从w3school复制了属性，但仍然无法使用我的CSS ..（在w3school 它也适用于自定义图像）。在 Chrome 中，如果我检查元素，css 检查器会显示一个黄色三角形 /!\ 表示“无效属性”引用光标：url(/img/cursor.gif)。

路径应该是正确的，我也将 cursor.gif 复制到 CSS 的同一个文件夹中，但仍然不起作用.. 问题出在哪里？提前感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:43:08.493

经过多次修改后，我发现尺寸太大而无法显示。现在它可以工作了，但它不是动画的。搜索是否可以解决另一种文件格式，我发现[了这个](https://stackoverflow.com/questions/9189250/animated-cursor-support-in-web-applications)。看来我的路无处可去..

工作（但不是动画）代码在[这里](http://jsfiddle.net/fcole90/QrReu/1/)。

HTML

```
<div id="amiciCuccioliAd">

    <img class="adTitle" src="http://www.sardegnaannunci.com/amiciCuccioliAd/img/adTitle.png">
    <img class="pets" src="http://www.sardegnaannunci.com/amiciCuccioliAd/img/pets.png">

</div> 
```

CSS

```
#amiciCuccioliAd{
height:140px;
width:250px;
background-color:red;
border:0px;
padding:0px;
margin:0px; 
cursor:url(http://www.sardegnaannunci.com/amiciCuccioliAd/cursor.gif), wait; 
}

/*Questo è per cambiare il cursore sul #amiciCuccioliAd*/
#amiciCuccioliAd:hover { 
cursor:url(http://www.sardegnaannunci.com/amiciCuccioliAd/cursor.gif), wait; 
}

/*Questo casino è per mettere un'immagine al centro!*/
#amiciCuccioliAd > .adTitle{
display:block;
width:237px;
height:35px;
margin-left:auto;
margin-right:auto;
padding-top:5px;
}

#amiciCuccioliAd > .pets{
display:block;
float:left;
padding-left:4px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:29:47.747

我遇到的最好的解决方法就是将其上传到图像主机并使用该网址而不是本地网址。

# .net - 在 HtmlAgilityPack 中加载 html 文件时.net 应用程序内存泄漏

> ID：15849608
> 
> 赞同：3
> 
> 时间：2013-04-06T10:12:13.843
> 
> 标签：.net, windbg

我有很多 html 文件需要通过 HtmlAgilityPack 读取和解析。当运行应用程序时，内存使用量总是会立即增加并且释放内存很慢。当我使用 windbg 工具并检查内存转储时，发现**system.bytes[]**使用了大量内存。

以下是我的伪代码：

**打开一个文件**

```
//read a html file in disk
var stream = OpenFile();//
//de-compress in gzip mode
var de_stream = GZip_Decompress(stream);            
stream.close();
var doc=LoadHtml(de_stream,Encoding.Utf8);
//close a close
de_stream.close(); 
```

**加载一个 html 字符串**

函数 LoadHtml（流，编码）

```
var doc = new HtmlDocument();
using (var sr = new StreamReader(stream, encoding, false,4096))
{
    var html = sr.ReadToEnd();
    doc.LoadHtml(html);
    sr.Close();
} 
```

当我的应用程序运行并打开一百个文件时（文件平均长度为 100K）

```
$dumpheap -stat 
```

![在此处输入图像描述](https://i.stack.imgur.com/RLnGJ.jpg)

```
$dumpheap -mt 56394944 -min 10240 
```

![在此处输入图像描述](https://i.stack.imgur.com/NaJrU.jpg) 我检查了 mt 56394944 中的最后一个对象。

```
!do 3d67a240 
```

![在此处输入图像描述](https://i.stack.imgur.com/UPfXq.jpg)

MT 56394944 中的其他对象也是 html 内容。当我关闭流时，字节数组中的对象仍然保存在内存中吗？

如果我更改上面的代码并删除**LoadHtml**函数调用，一切正常，没有高内存使用，字节数组中没有对象保存在内存中。

```
var stream = OpenFile();
var de_stream = GZip_Decompress(stream);            
stream.close();
//var doc=LoadHtml(de_stream,Encoding.Utf8);remove this call
de_stream.close(); 
```

我需要一些建议，在加载 html 文件时释放字节数组对象。

[编辑] 使用**!gcroot [字节数组地址]**时没有任何输出。

```
....
Object 0x188b0cb8 contains an invalid object reference 0x1e7538f8.
Scan Thread 25 OSTHread f40
Scan Thread 26 OSTHread 8e8
....    
Scan Thread 30 OSTHread 16e0
Object 0x237115f8 contains an invalid object reference 0x24866df8.
.... 
```

[编辑]

我检查了一个GC静态。 ![在此处输入图像描述](https://i.stack.imgur.com/DAABX.jpg)

# javascript - 禁用歌剧地图导航

> ID：15849610
> 
> 赞同：0
> 
> 时间：2013-04-06T10:12:33.757
> 
> 标签：javascript, map, navigation, opera

我有一个页面设置，其中显示了地图（ArcGIS Online）并显示了一个输入框。在 Opera 中，由于某种原因，您无法在输入框中输入某些字符。相反，Opera 在地图上导航`keypress`。例如，当输入字母“a”时，Opera 会将地图移动到左下角。

[带地图的页面在这里](http://tpgrf.nl/testserver/alpha/topotrainer/nederland/)

经过大量搜索后，我唯一能想到的就是调用 keypress 事件并返回 false，如下所示：

> var cancelKeypress = true;
> 
> document.onkeydown = 函数（evt）{ evt = evt || 窗口.事件；cancelKeypress = /^(112|113|65|97)$/.test("" + evt.keyCode); if (cancelKeypress) { return false; } };
> 
> /* 对于 Opera */ document.onkeypress = function(evt) { if (cancelKeypress) { return false; } };

但由于某种原因，这并不能解决问题。其次，我想知道是否没有更好的解决方案可以连接到 Opera 并立即阻止所有地图导航，而不是单独阻止所有地图导航`keypress`。

如果有人能解释 Opera 与其他浏览器相比有何不同之处，我会更高兴，这使得输入框无法使用。希望这些知识会导致答案的解决方案。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:14:21.717

这可能只会详细说明您对问题的描述。你有没有尝试过这样的事情：

*   [preventDefault()](http://api.jquery.com/event.preventDefault/) / [isDefaultPrevented()](http://api.jquery.com/event.isDefaultPrevented/)
*   [stopPropagation()](http://api.jquery.com/event.stopPropagation/) / [isPropagationStopped()](http://api.jquery.com/event.isPropagationStopped/)
*   [stopImmediatePropagation()](http://api.jquery.com/event.stopImmediatePropagation/) / [isImmediatePropagationStopped()](http://api.jquery.com/event.isImmediatePropagationStopped/)

# symfony - Symfony2 防火墙，ROLE_USER 可以访问 /admin

> ID：15849611
> 
> 赞同：2
> 
> 时间：2013-04-06T10:12:34.397
> 
> 标签：symfony, fosuserbundle

Symfony2 中的防火墙有问题。

我的 security.yml 文件中有这些

```
- { path: ^/, role: ROLE_USER }
- { path: ^/admin, role: ROLE_ADMIN }
- { path: ^/users, role: ROLE_ADMIN } 
```

在我的菜单构建器中，我使用 isGranted 并且效果很好，如果我使用我的 ROLE_USER 用户登录，则菜单不会构建管理菜单。

但是，如果我在浏览器中手动键入 /admin，我会得到管理页面。（这发生在生产和开发环境中）

在开发环境的工具栏中，我可以看到用户没有 ROLE_ADMIN 角色

如果我根本不登录，我只会看到登录页面，所以一切都很好

完整的security.yml：[https ://gist.github.com/lsv/2e9dce622fd82d31853c](https://gist.github.com/lsv/2e9dce622fd82d31853c)

完整的 config.yml：[https ://gist.github.com/lsv/ec87592f911262af5417](https://gist.github.com/lsv/ec87592f911262af5417)

我正在使用 FOSUserbundle

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T10:35:25.430

中的条目`access_control` [应该按照从更具体到更一般的顺序](http://symfony.com/doc/master/book/security.html#understanding-how-access-control-works)。因此，就您而言，它们应按以下顺序排列：

```
- { path: ^/admin, roles: ROLE_ADMIN }
- { path: ^/, roles: ROLE_USER } 
```

# javascript - 我怎样才能修剪这个javascript字符串？

> ID：15849614
> 
> 赞同：0
> 
> 时间：2013-04-06T10:12:55.580
> 
> 标签：javascript, jquery

我如何在 javascript/jquery 中修剪这个字符串

```
 £ 0.00 
```

它有左右空格，我可以使用 trim() 函数简单地删除它，但我想删除它 `£`并获得 0.00 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:17:30.723

如果要替换字符串中除数字和句点之外的所有字符，只需使用 RegEx：

```
str = str.replace(/[^\d\.]/ig,""); 
```

`/[^\d\.]/`匹配所有非数字或`.`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T10:15:43.550

它总是一个英镑符号吗？只需更换它。

```
val = val.replace('£', ''); // then trim 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T10:29:48.493

> 变量字符串；
> 
> str = str.trim();
> 
> 或者

```
if (!String.prototype.trim) {

 String.prototype.trim = function() {

  return this.replace(/^\s+|\s+$/g,'');

 }

} 
```

或者

str = str.replace(/^\s+|\s+$/g,'')

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T10:29:48.130

您可以通过使用子字符串和 indexOf 函数来获得它

```
str = str.substring(str.indexOf(" ")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-06T10:57:50.113

试试这个

```
string.replace(/[^\d+(\.\d+)]?/g, '') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-06T10:58:45.513

假设类似：

```
var str = "              £ 0.00             "; 
```

您只需编写“自定义”修剪：

```
var number = str.replace(/^\D+|\D+$/g,""); 
```

它基本上从左到右修剪任何不是数字的东西，当它找到一个数字时它会停止。请注意，您仍然有一个字符串，如果您需要一个实数，您可以使用一元运算符（或`parseFloat`）：

```
var number = +str.replace(/^\D+|\D+$/g,""); 
```

请注意，如果获得的字符串不是有效数字，您将得到`NaN`结果。

# haskell - 我怎样才能使用更多的小把戏守卫？

> ID：15849618
> 
> 赞同：0
> 
> 时间：2013-04-06T10:13:45.813
> 
> 标签：haskell, guard

当我在 ghci 中编译我的代码时，没有问题。它可以正确编译。但是，如果我尝试在拥抱中编译它，我会收到错误“编译代码太复杂”。我认为问题是由于许多`|`条件造成的。

如果我将其更改为使用 if/else，则没有问题。我可以添加 100 次 if/else 语句，但这会非常烦人和烦人。而不是那样，我试图在 20-30 个`|`条件之后放置 if/else 语句，但我无法`|`在 if 语句中工作，如下所示：

```
f x y z     
    | cond1 = e1
    | cond2 = e2
    ...
    if (1)
    then
    | cond30 = e30
    | cond31 = e31
    ...
    else
    | cond61 = e61
    | cond62 = e62 
```

如何以最少的努力修复代码？完整的代码在[hpaste](http://hpaste.org/85300)上，因为它比 StackOverflow 的问题大小限制长。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T13:00:26.880

## 避免重复的守卫

首先，你可以重写

```
function input 
   | this && that && third thing && something else = ...   -- you only actually needed brackets for (head xs) 
   | this && that && third thing && something different = ....
   | this && that && a change && ...  
...
   | notthis && .... 
```

和

```
function input | this = function2 input'
               | notthis = function4 input'

function2 input | that = function3 input''
                | notthat = ... 
```

这应该可以简化您的 200 行`copo`代码，但这仍然是错误的方法。

## 只使用一次函数来处理相同的问题，而不是每次

处理您一次又一次处理的操作的 4 种情况可以用一个函数代替，可能像：

```
operation :: Num a => Char -> a -> a -> a
operation x = case x of
   '+' -> (+)
   '-' -> (-)
   '*' -> (*)
   '/' -> (/)
   _   -> error ("operation: expected an operation (+-*/) but got " ++ [c]) 
```

## 使用列表函数而不是一次测试一个字符

您应该使用一些标准函数来帮助减少所有单个字符检查，从而只获取尽可能多的数字。`takeWhile :: (a -> Bool) -> [a] -> [a]`， 所以

```
takeWhile isDigit "354*243" = "354"
takeWhile isDigit "+245" = "" 
```

并且有相应的`dropWhile`：

```
dropWhile isDigit "354*1111" = "*1111"
dropWhile isDigit "*1111" = "*1111" 
```

所以你的代码最显着的缩短是从 copo 开始

```
copo xs = let 
  numText = takeWhile isDigit xs
  theRest = droWhile isDigit xs 
  num = read numText
  ....
    in answer.... 
```

但是如果你想要两者都有一个捷径`takeWhile`和`dropWhile`，称为`span`，因为`span p xs == (takeWhile p xs, dropWhile p xs)`

```
copo xs = let 
  (numText,theRest) = span isDigit xs
  num = read numText
  ....
    in answer.... 
```

## 使用递归而不是重复代码

你处理`234`然后`234*56`然后`234*56/23`......

您可以将其替换为对 的递归调用`copo`，或生成一棵树。这取决于您是否应该遵守正常的运算符优先级（* 或 / 在 + 或 - 之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:08:12.907

如果你坚持看守，而不是

```
foo a b c d
    | cond1, cond2, cond3 = ...
    | cond1, cond2, cond4 = ...
    | cond5, cond6, cond7 = ...
    | cond5, cond6, cond8 = ... 
```

写

```
foo a b c d
    | cond1, cond2 = case () of
        () | cond3 = ...
           | cond4 = ...
    | cond5, cond6 = case () of
        () | cond7 = ...
           | cond8 = ... 
```

# php - 即使数据库中有满足SELECT语句条件的记录，MySQL也返回NULL

> ID：15849621
> 
> 赞同：0
> 
> 时间：2013-04-06T10:13:58.960
> 
> 标签：php, mysql, sql, coordinates, great-circle

我的数据库有坐标条目。我想获取包含指定半径圆内坐标的条目。因此，我使用[余弦球面定律](http://www.movable-type.co.uk/scripts/latlong-db.html)。但是在所有数据库条目上检查这种情况的成本太高了。因此，我首先获取位于边界框中的坐标（此框包含上面指定的圆圈），然后`spherical law of cosines`在它们上应用 a 。

但问题是即使我有满足条件的条目，MySQL 也会返回 NULL。我分别检查了以上 2 个条件并知道这`spherical law of cosines`可行，但是使用其他条件（边界框）时会出现问题。

这个[链接](http://www.movable-type.co.uk/scripts/latlong-db.html)有我用于这两种情况的代码。

下面是我的代码：

```
 $R = 3959;  // earth's mean radius in mile

        // first-cut bounding box (in degrees)
        $from_Lat = $userTrip->fromLat;  // latitude of centre of bounding circle in degrees
        $from_Lon = $userTrip->fromLon;  // longitude of centre of bounding circle in degrees
        $from_Rad = $userTripLength * 0.25;  // radius of bounding circle in kilometers

        $from_MaxLat = $from_Lat + rad2deg($from_Rad/$R);
        $from_MinLat = $from_Lat - rad2deg($from_Rad/$R);
        // compensate for degrees longitude getting smaller with increasing latitude
        $from_MaxLon = $from_Lon + rad2deg($from_Rad/$R/cos(deg2rad($from_Lat)));
        $from_MinLon = $from_Lon - rad2deg($from_Rad/$R/cos(deg2rad($from_Lat)));

        $to_Lat = $userTrip->toLat;  // latitude of centre of bounding circle in degrees
        $to_Lon = $userTrip->toLon;  // longitude of centre of bounding circle in degrees
        $to_Rad = $userTripLength * 0.50;  // radius of bounding circle in kilometers

        $to_MaxLat = $to_Lat + rad2deg($to_Rad/$R);
        $to_MinLat = $to_Lat - rad2deg($to_Rad/$R);
        // compensate for degrees longitude getting smaller with increasing latitude
        $to_MaxLon = $to_Lon + rad2deg($to_Rad/$R/cos(deg2rad($to_Lat)));
        $to_MinLon = $to_Lon - rad2deg($to_Rad/$R/cos(deg2rad($to_Lat)));

        $sql = "Select userTrip.id, userTrip.fromLat, userTrip.fromLon, userTrip.toLat, userTrip.toLon,
        acos(sin(:from_lat)*sin(radians(userTrip.fromLat)) + cos(:from_lat)*cos(radians(userTrip.fromLat))*cos(radians(userTrip.fromLon) - :from_lon)) * :R AS SourceDistance,
        acos(sin(:to_lat)*sin(radians(userTrip.toLat)) + cos(:to_lat)*cos(radians(userTrip.toLat))*cos(radians(userTrip.toLon) - :to_lon)) * :R AS DestinationDistance
        From (
            Select userTrip.id, userTrip.fromLat, userTrip.fromLon, userTrip.toLat, userTrip.toLon,
                From userTrip
                    Where userTrip.userId != $this->userId
                    AND userTrip.departureTime > '".date('Y-m-d H:i:s')."'
                    AND userTrip.fromLat Between :from_minLat And :from_maxLat
                    AND userTrip.fromLon Between :from_minLon And :from_maxLon
                    AND userTrip.toLat Between :to_minLat And :to_maxLat
                    AND userTrip.toLon Between :to_minLon And :to_maxLon
            )
          Where acos(sin(:from_lat)*sin(radians(userTrip.fromLat)) + cos(:from_lat)*cos(radians(userTrip.fromLat))*cos(radians(userTrip.fromLon) - :from_lon)) * :R < :from_rad
          AND acos(sin(:to_lat)*sin(radians(userTrip.toLat)) + cos(:to_lat)*cos(radians(userTrip.toLat))*cos(radians(userTrip.toLon) - :to_lon)) * :R < :to_rad";

        $params = array(
        'from_lat'    => $from_Lat, 
        'from_lon'    => $from_Lon,
        'from_minLat' => $from_MinLat, 
        'from_minLon' => $from_MinLon, 
        'from_maxLat' => $from_MaxLat, 
        'from_maxLon' => $from_MaxLon, 
        'from_rad'    => $from_Rad,
        'to_lat'    => $to_Lat, 
        'to_lon'    => $to_Lon, 
        'to_minLat' => $to_MinLat, 
        'to_minLon' => $to_MinLon, 
        'to_maxLat' => $to_MaxLat, 
        'to_maxLon' => $to_MaxLon, 
        'to_rad'    => $to_Rad,
        'R'      => $R
      );

       $stmt = $this->dbLink->prepare($sql);
       try
        {
            $stmt->execute($params);
            $matchCandidates = $stmt->fetchAll();
        }
        catch (PDOException $err)
        {
            echo $err->getMessage();
        }

        if ($matchCandidates == null)
            throw new ErrorException("No match candidates found!"); 
```

这总是显示错误“找不到匹配的候选者！”。在 $params 数组中，我最初将纬度和经度转换为弧度（即使这样也不起作用），但经过大量调试后，我相信它们应该以度为单位。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:51:30.780

我发现了这个错误，下面是正确的查询。

```
$sql = "Select id,fromLat,fromLon,toLat,toLon,
    acos(sin(:from_lat)*sin(radians(fromLat)) + cos(:from_lat)*cos(radians(fromLat))*cos(radians(fromLon) - :from_lon)) * :R AS SourceDistance,
    acos(sin(:to_lat)*sin(radians(toLat)) + cos(:to_lat)*cos(radians(toLat))*cos(radians(toLon) - :to_lon)) * :R AS DestinationDistance
    From (
        Select userTrip.id, userTrip.fromLat, userTrip.fromLon, userTrip.toLat, userTrip.toLon,
            From userTrip
                Where userTrip.userId != $this->userId
                AND userTrip.departureTime > '".date('Y-m-d H:i:s')."'
                AND userTrip.fromLat Between :from_minLat And :from_maxLat
                AND userTrip.fromLon Between :from_minLon And :from_maxLon
                AND userTrip.toLat Between :to_minLat And :to_maxLat
                AND userTrip.toLon Between :to_minLon And :to_maxLon
        ) AS InitialResult
      Where acos(sin(:from_lat)*sin(radians(fromLat)) + cos(:from_lat)*cos(radians(fromLat))*cos(radians(fromLon) - :from_lon)) * :R < :from_rad
      AND acos(sin(:to_lat)*sin(radians(toLat)) + cos(:to_lat)*cos(radians(toLat))*cos(radians(toLon) - :to_lon)) * :R < :to_rad"; 
```

1）我必须给内部 SELECT 查询的结果一个别名。`Initialresult`在这种情况下。
2）我不能`userTrip.`在外部 SELECT 中使用，因为它是在 上执行的`InitialResult`，而不是`userTrip`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:23:36.977

```
$myUserId = $this->userId

Select ...
Where userTrip.userId != $myUserId 
```

您`$this->userId`直接在查询中而不转义它。

# wso2 - 我们如何在 Wso2 ESB 中将 XML 转换为 JSON 数组

> ID：15849622
> 
> 赞同：2
> 
> 时间：2013-04-06T10:14:07.463
> 
> 标签：wso2, wso2esb, wso2dss

我正在从 DSS 中检索单行，例如

```
<Body xmlns="http://ws.wso2.org/dataservice">
   <Datalist>
      <username>anil</username>
      <password>anil123</password>
   </Datalist>
</Body> 
```

我在 ESB Payload factory 中使用这一行，同时运行我的 ESB 服务，

我越来越像这样：-

```
{"ResponseJSON":{"Body":{"Datalist":{"username":"anil","password":"anil123"}},"Status":"200","Total":"1.0"}} 
```

但我的输出看起来像 JSON 数组。

```
{
    "ResponseJSON": {
        "Body": {
            "Datalist": [
                {
                    "username": "anil",
                    "password": "anil123"
                }
                        ]
        },
        "Status": "200",
        "Total": "1.0"
    }
} 
```

我们怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T08:31:39.300

您好在您的代理服务序列中添加以下属性。

```
 <property name="messageType" value="application/json" scope="axis2"/> 
```

或者，如果您正在使用 WSO2 ESB 4.7.0。

```
<property name="ContentType" value="application/json" scope="axis2"/> 
```

那么上面的属性就不用写了。它会自动转换成json格式。

尝试在最新的 WS02 ESB 4.7.0 上工作，它正在工作。

如果您需要什么，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T07:38:50.087

我在 WSO2ESB 4.8.0 中也面临同样的问题

但是通过使用 Script-mediator 得到了解决方法。

如果您对此问题有任何其他解决方案，请告诉我。

谢谢

# jquery - 没有工具栏的编辑器

> ID：15849623
> 
> 赞同：1
> 
> 时间：2013-04-06T10:14:20.427
> 
> 标签：jquery, wysiwyg, redactor

我正在使用 jquery 编辑器，一切都很好，但我想让某些部分表现得像就地编辑器。

我了解按钮的工作原理，例如：

```
var buttons = ['formatting', '|', 'bold', 'italic'];

$('#redactor').redactor({buttons: buttons}); 
```

并将按钮设置为：

```
var buttons = []; 
```

所以没有按钮，但是，工具栏仍然显示。

**问题**有没有办法删除工具栏和按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T09:42:48.807

如果您`buttons`使用空数组进行设置，则使用默认设置：

```
['html', '|', 'formatting', '|', 'bold', 'italic', 'deleted', '|',
'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
'image', 'video', 'file', 'table', 'link', '|',
'fontcolor', 'backcolor', '|', 'alignment', '|', 'horizontalrule'] 
```

因此，您可以`toolbar`像这样设置设置：

```
$('#redactor').redactor({
   toolbar: false
}); 
```

如果您希望工具栏从编辑器加载到单独的层中：

```
$('#redactor').redactor({
    toolbarExternal: '#your-toolbar-id'
}); 
```

文档：http: [//imperavi.com/redactor/docs/settings/](http://imperavi.com/redactor/docs/settings/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T20:41:19.180

是的，在`toolbar`酒店的帮助下，这是可能的：

```
$('#redactor').redactor({toolbar: false}); 
```

*参考：http:* [//imperavi.com/redactor/docs/settings/](http://imperavi.com/redactor/docs/settings/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T10:12:23.817

从文档中拖动一个 div 后，我想专注于可编辑的编辑器。如何在编辑器可编辑区域触发焦点功能？

我试过了：

```
$('#'+maskId).draggable({
  containment: '#content',
  drag: function(){
    // ...
  },
  stop: function() {
    $('#'+redactorTextareaId).redactor({
      focus: true
    });
  }
}); 
```

和：

```
$('#'+maskId).draggable({
  containment: '#content',
  drag: function(){
    // ...
  },
  stop: function() {
    $('#'+redactorTextareaId).focus();
  }
}); 
```

# android - In-app billing 中消耗品和非消耗品有什么区别

> ID：15849625
> 
> 赞同：1
> 
> 时间：2013-04-06T10:14:31.693
> 
> 标签：android, in-app-purchase

我开始在我的应用程序中集成 Android In-app Billing V3。我阅读了所有 android 开发者文档。我还有以下疑问吗？

*   消耗品和非消耗品有什么区别？

*   为什么我需要在购买产品后消费它？

*   如果我想销售移动设备，是否需要在开发者控制台产品列表中添加每个移动设备？还是加一部手机就够了，买同款手机IMEI不同的产品？

*   如果所有产品都在我的开发者控制台中销售，那么我是否要添加新产品？

*   我可以在开发者控制台中的每个应用程序中添加的最大产品数量是多少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T07:04:31.763

*   消耗品和非消耗品有什么区别？同一用户可以多次购买消耗品。但非消耗品只能购买一次。

*   为什么我需要在购买产品后消费它？这取决于您的应用创意。例如：- 如果您正在开发游戏并想在有限的时间内添加一些特殊功能，您可以使用消耗品来完成。

*   如果我想销售移动设备，是否需要在开发者控制台产品列表中添加每个移动设备？还是加一部手机就够了，买同款手机IMEI不同的产品？如果我错了，请澄清我你打算卖手机吗？如果是，那么通过应用内购买，您不能出售任何实物。

*   如果所有产品都在我的开发者控制台中销售，那么我是否要添加新产品？不，在开发者控制台中，产品列表就像酒店的菜单卡，显示该应用程序的所有可用产品。

*   我可以在开发者控制台中的每个应用程序中添加的最大产品数量是多少。几乎没有限制。如果您有更多可以在第二个请求中获取的项目，则从应用内 3 作为响应，谷歌将在一个响应中发送 999 个产品 ID。

我认为您对应用内非常陌生，请参阅应用内[教程](http://developer.android.com/training/in-app-billing/index.html)。

# java - 需要用Java加解密，无法使用Base64……我觉得

> ID：15849631
> 
> 赞同：1
> 
> 时间：2013-04-06T10:15:34.843
> 
> 标签：java, eclipse, encryption, base64

我需要将四位数字密码加密和解密到数据库中，但遇到了麻烦。我尝试过使用使用 Base64 的示例，即使在导入包后也找不到类。我究竟做错了什么？我知道下面的类可能是正确的，但是为什么找不到类并创建一个对象。在 Eclipse 中，当我导航到参考库中的 Base64 类时，它会显示“找不到源”。

```
import java.io.IOException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Random;
import org.apache.commons.codec.binary.Base64;

public class PasswordEncryption {

    private static Random random = new Random((new Date()).getTime());

    public static String encrypt(String userId) {  
        Base64() encoder = new Base64();
        byte[] salt = new byte[8];
        random.nextBytes(salt);
        return encoder.encode(salt)+
        encoder.encode(userId.getBytes());
    }

    public static String decrypt(String encryptKey) {
        if (encryptKey.length() > 12) {
            String cipher = encryptKey.substring(12);
            BASE64Decoder decoder = new BASE64Decoder();
            try {
                return new String(decoder.decodeBuffer(cipher));
            } catch (IOException e) {
                //  throw new InvalidImplementationException(
                //    "Failed to perform decryption for key ["+encryptKey+"]",e);
            }
        }         
        return null;
    }
} 
```

如果我没有正确使用这些论坛，请道歉，这是我的第一篇文章。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:22:57.570

我认为您需要下载[Apache Commons Codec](http://commons.apache.org/proper/commons-codec/download_codec.cgi)。下载 jar 后，您需要将其作为库添加到您的 Eclipse 项目中，并位于您的构建路径中。（如果您已经这样做了，我深表歉意。从您的帖子中不清楚。）

完成后，您仍然无法在 Eclipse 中看到源代码，但您的项目在运行时应该可以工作。

# spring - 如何在simplejdbccall spring中多次执行存储过程

> ID：15849632
> 
> 赞同：2
> 
> 时间：2013-04-06T10:15:36.373
> 
> 标签：spring, spring-jdbc

```
 simpleJdbcCall = new SimpleJdbcCall(dataSource);        
 simpleJdbcCall.withProcedureName("sp_login")        
    .addDeclaredRowMapper(parameterName, rowMapper)
    .returningResultSet(parameterName, rowMapper);

    simpleJdbcCall.addDeclaredParameter(new SqlParameter("userid", Types.VARCHAR));
    simpleJdbcCall.addDeclaredParameter(new SqlParameter("username", Types.VARCHAR));
    simpleJdbcCall.addDeclaredParameter(new SqlOutParameter("result", Types.INTEGER));    

  Map<String, Object> result = null;
    for (int i = 1; i <= 100; i++) {

SqlParameterSource in = new MapSqlParameterSource()
    .addValue("userid", ""+i)
    .addValue("username", "user"+i);

        result=simpleJdbcCall.execute(in);              

    } 
```

我想执行程序 100 次。

这是正确的方法吗？
或任何替代执行单个步骤？

# version-control - 如何使用 JSC 在 JScript.NET 中设置输出文件的版本？

> ID：15849634
> 
> 赞同：2
> 
> 时间：2013-04-06T10:15:44.427
> 
> 标签：version-control, version, versioning, jscript

我正在使用 jsc.exe（我没有 Visual Studio）将 JScript.Net 脚本编译成 DLL，并且我希望能够设置版本信息。有没有办法做到这一点？

# angularjs - 为什么要将控制器放在 AngularJS 的指令中？

> ID：15849638
> 
> 赞同：5
> 
> 时间：2013-04-06T10:16:10.677
> 
> 标签：angularjs

我最近看到了这个例子。这是我第一次在指令中看到控制器。这是正常的事情吗。我认为您应该将这两个保留在不同的区域以进​​行可测试性：

```
myModule.directive('myComponent', function(mySharedService) {
    return {
        restrict: 'E',
        controller: function($scope, $attrs, mySharedService) {
            $scope.$on('handleBroadcast', function() {
                $scope.message = 'Directive: ' + mySharedService.message;
            });
        },
        replace: true,
        template: '<input>'
    };
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T12:59:21.193

通常，您会在指令中使用控制器，以便能够在元素上的指令之间共享它们。它允许指令轻松地在它们之间进行通信。

有关其工作原理的详细说明，请参见此处：[http ://egghead.io/video/angularjs-directive-to-directive-communication/](http://egghead.io/video/angularjs-directive-to-directive-communication/)

# c++ - C++ 多态性和向量，将向量的派生类指向向量的基类

> ID：15849639
> 
> 赞同：4
> 
> 时间：2013-04-06T10:16:11.453
> 
> 标签：c++, pointers, vector, polymorphism

说：Apple 是从一个基 Fruit Class 派生的，那么还有一个 ApplePicker 类是从一个 FruitPicker 基类派生的。
ApplePicker 类有`vector<Apple> appleList`，Fruit picker 类有一个指向`vector<Fruit>`ie的指针`vector<fruit>* fruitList`。

我需要能够将向量设置为此指针，以便可以在水果采摘器类中运行抽象方法（因为它们只关心水果成员）。但是当我尝试这样做时，我无法设置它：

```
this->fruitList = &(this->AppleList); 
```

它给了我错误`cannot convert to vector<Apple> to vector<Fruit>`。我尝试了静态转换，它给了我同样的错误。我对非向量基类和派生类做了类似的事情，这很好。

我是 C++ 新手，我正在通过 NDK 在 Android 上使用它。

所以我想要做的事情是不可能的，我必须使用一个指针向量，比如`vector<Fruit*>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T10:20:20.640

想一想：如果`vector<Apple>`可以替代`vector<Fruit>`（换句话说，如果您期望发生的转换实际上是合法的），那么您可以为`vector<Apple>`期望 a 的函数提供 a in 输入`vector<Fruit>`。

期望 a 的函数很`vector<Fruit>`可能将 a 添加`Banana`到该向量中，因为`Banana`是 a `Fruit`（暂时忽略这样一个事实，即如果您的向量存储类型的对象而不是指向此类对象的指针，您将得到*切片*`Fruit`，但这是另一回事） . 如果您将 a 传递`vector<Apple>`给该函数，您将打破 of 的不变量`vector<Apple>`（即它只能包含苹果的事实）。

OOP 中的继承适用于一种类型能够普遍替代另一种类型的情况，并且可以替代的事实`A`并不`B`意味着`V<A>`可以替代`V<B>`。

如果您需要编写适用于这两种向量的通用例程，请使用模板来实现编译时通用性。

# python - 如何使用 GitPython 获取未发布提交的计数？

> ID：15849640
> 
> 赞同：7
> 
> 时间：2013-04-06T10:16:13.253
> 
> 标签：python, git, gitpython

通过`git status`我可以获得有关未发布提交计数的信息：

```
» git status             
# On branch master
# Your branch is ahead of 'origin/master' by 2 commits.
#   (use "git push" to publish your local commits)
#
nothing to commit, working directory clean 
```

我想用 GitPython 获得未发布的提交（或计数）。我找到了我的文档`repo.git.status()`，但这不是我想要的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-07T12:09:41.473

您正在寻找的命令是：

```
repo.iter_commits('BRANCH..BRANCH@{u}') 
```

或者，如果您希望将此作为列表：

```
list(repo.iter_commits('BRANCH..BRANCH@{u}')) 
```

`BRANCH@{u}`语法指的是`BRANCH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-02T01:26:54.247

感谢@Chronial 和@Clare-Macrae 的反馈使用，我这样做了：[`gitPython`](https://gitpython.readthedocs.io/) `==3.1.11`

```
branch = self.repo.active_branch
unpushed_symbol = '⇡' if list(self.repo.iter_commits(f'{branch}@{{u}}..{branch}')) else constants.NOTHING
unpulled_symbol = '⇣' if list(self.repo.iter_commits(f'{branch}..{branch}@{{u}}')) else constants.NOTHING 
```

# r - 如何将稀疏矩阵转换为索引和非零元素值的矩阵

> ID：15849641
> 
> 赞同：14
> 
> 时间：2013-04-06T10:16:14.497
> 
> 标签：r, sparse-matrix

`sparseMatrix`我们可以用或由非零元素的索引和值构造一个稀疏矩阵`spMatrix`。是否有任何函数将稀疏矩阵转换回所有非零元素的索引和值？例如

```
i <- c(1,3,5); j <- c(1,3,4); x <- 1:3
A <- sparseMatrix(i, j, x = x)

B <- sparseToVector(A)
## test case:
identical(B,cbind(i,j,x)) 
```

有什么功能可以做类似的工作`sparseToVector`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T12:13:04.493

您的矩阵`A`采用稀疏压缩格式（类`dgCMatrix`）。您可以通过以下方式将其强制转换为非压缩稀疏格式

```
A.nc <- as (A, "dgTMatrix") 
```

或者，您可以`giveCsparse = TRUE`在`sparseMatrix`通话中指定。

三元组形式`dgTMatrix`基本上包含您在 slot `i`、`j`和中查找的所有内容`x`，`i`并且`j`索引是使用基于 0 的偏移量完成的：

```
> str (A.nc)
Formal class 'dgTMatrix' [package "Matrix"] with 6 slots
  ..@ i       : int [1:3] 0 2 4
  ..@ j       : int [1:3] 0 2 3
  ..@ Dim     : int [1:2] 5 4
  ..@ Dimnames:List of 2
  .. ..$ : NULL
  .. ..$ : NULL
  ..@ x       : num [1:3] 1 2 3
  ..@ factors : list()

> cbind (i = A.nc@i + 1, j = A.nc@j + 1, x = A.nc@x)
     i j x
[1,] 1 1 1
[2,] 3 3 2
[3,] 5 4 3
> all (cbind (i = A.nc@i + 1, j = A.nc@j + 1, x = A.nc@x) == cbind (i, j, x))
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-06T12:41:53.620

```
summary(A)
# 5 x 4 sparse Matrix of class "dgCMatrix", with 3 entries 
#   i j x
# 1 1 1 1
# 2 3 3 2
# 3 5 4 3 
```

您可以轻松地将其传递给`as.data.frame`or `as.matrix`：

* * *

```
sparseToVector <- function(x)as.matrix(summary(x))
B <- sparseToVector(A)
## test case:
identical(B,cbind(i,j,x))
# [1] TRUE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T10:21:45.453

`which`与 一起使用`arr.ind`：

```
idx <- which(A != 0, arr.ind=TRUE)
cbind(idx, A[idx])
#      [,1] [,2] [,3]
# [1,]    1    1    1
# [2,]    3    3    2
# [3,]    5    4    3 
```

# jquery - 在 View 中访问 Controller 返回的 JSON

> ID：15849645
> 
> 赞同：1
> 
> 时间：2013-04-06T10:16:59.963
> 
> 标签：jquery, json, asp.net-mvc-3

我正在尝试将我的 linq 序列化为 JSON。我的问题是 [Json 结果包装在 pre 标签中 - 如何获得它的价值](https://stackoverflow.com/questions/7559461/json-result-wrapped-in-pre-tag-how-to-get-value-of-it)。答案不是我想要的。这是我的代码 **控制器**

```
return Json(regionBoudaries, JsonRequestBehavior.AllowGet); 
```

我看到我的 JSON 字符串写在页面中现在我正在写类似的东西

**看法**

```
$(document).ready(function () {        
    initialize(); 
    process(a_variable);
} 
```

如何设置`a_variable`从控制器返回的 JSon 的值。请帮帮我。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:20:02.907

您可以使用视图模型：

```
public class MyViewModel
{
    public class SomeType RegionBoudaries { get; set; }

    ... some other properties
} 
```

然后让服务于该视图的控制器操作填充视图模型的属性：

```
public ActionResult SomeAction()
{
    var model = new MyViewModel();
    model.RegionBoudaries = ... same stuff as in your other action
    return View(model);
} 
```

然后在相应的强类型视图中：

```
@model MyViewModel
...
<script type="text/javascript">
    $(document).ready(function () {        
        var a_variable = @Html.Raw(Json.Encode(Model.RegionBoudaries));
        initialize(); 
        process(a_variable);
    });
</script> 
```

# c++ - 两个几乎相同的循环中的性能差异

> ID：15849647
> 
> 赞同：1
> 
> 时间：2013-04-06T10:17:05.617
> 
> 标签：c++, visual-studio-2010, performance, optimization

我得到了两个几乎相同的循环，但性能有显着差异，均使用 MSVC2010 在系统 ~2.4 GHZ 和 8GB RAM 上进行测试

下面的循环需要大约 2500 毫秒来执行

```
for (double count = 0; count < ((2.9*4/555+3/9)*109070123123.8); count++)
; 
```

这个循环在不到 1 毫秒的时间内执行

```
for (double count = ((2.9*4/555+3/9)*109070123123.8); count >0; --count)
; 
```

是什么在这里产生了如此巨大的差异？一个得到后增量，另一个使用前增量会导致如此巨大的差异吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:19:09.063

您在没有优化的情况下进行编译，因此比较是徒劳的。（如果您确实进行了优化，那么该代码将被完全删除）。

如果没有优化，计算很可能在第一个循环的每次迭代中执行，而第二个循环仅在第一次初始化时执行一次计算`count`。

尝试将第一个循环更改为

```
auto max = ((2.9*4/555+3/9)*109070123123.8);
for (double count = 0; count < max; count++)
; 
```

然后停止分析调试版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T10:20:31.017

在第一个循环`count < ((2.9*4/555+3/9)*109070123123.8)`中，每次循环计算一次，而第二个循环`count = ((2.9*4/555+3/9)*109070123123.8)`计算一次，每次循环递减。

# asp.net - ASP.Net 中的相对路径

> ID：15849649
> 
> 赞同：1
> 
> 时间：2013-04-06T10:17:17.803
> 
> 标签：asp.net, visual-studio

我正在尝试使用 Visual Studio Express 2012 在 ASP.NET 中设计一个 Web 表单。

我需要从 some 中获取数据`text boxes`，并将其写入`Text file`.

这是一个非常简单的程序，但**我无法设置文件路径**。

此应用程序将发送给其他人，他们必须从他们的计算机上运行该项目。

我想要的文件被调用`Database.txt`，它位于`D:\Project\bin\Database.txt`.

因此，如果他将此文件夹粘贴到他的桌面上，它将变为`C:\Users\Desktop\Project\bin\Database.txt`.

无论项目文件夹在哪里，我都无法设置可以找到此文件的动态路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:26:38.290

使用此代码：

```
public void WriteToFile(String text)
{
    string logFileName = Server.MapPath("~/bin/DataBase.txt");
    using (StreamWriter writer = File.AppendText(logFileName))
    {
        writer.WriteLine(text);
        writer.Flush();
        writer.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:38:21.923

使用 Server.MapPath("/") 获取你的虚拟目录的物理路径

看到这个。发布 server.mappath [Server.MapPath(".")、Server.MapPath("~")、Server.MapPath(@"\")、Server.MapPath("/")。有什么区别？](https://stackoverflow.com/questions/275781/server-mappath-server-mappath-server-mappath-server-mappath)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:23:47.327

您可以做的是将路径放入`web.config`文件并根据要求设置值。

这是一些可以帮助您的示例代码

这将进入您的 web.config。

```
<configuration>
    <appSettings>
        <add key="myFilePath" value="C:\\whatever\\Data\\"/>
    </appSettings>
</configuration> 
```

这就是您阅读它的方式：

```
path = System.Web.Configuration.WebConfigurationManager.AppSettings["myFilePath"].ToString(); 
```

# html - 边距底部添加到顶部

> ID：15849650
> 
> 赞同：0
> 
> 时间：2013-04-06T10:17:26.193
> 
> 标签：html, css

我想在标题 div 的上方和下方创建一个空间，所以我给了它一个 margin-top 和 margin-bottom。但是，margin-bottom 并没有在底部添加空格。相反，它将margin-bottom 添加到顶部，下面的内容正好与之相对。

这实际上是我迄今为止在我体内的所有代码：

```
<body>
    <div class="header">
        <img class="logo" src="Images/logo.png"/>
        <ul class="navigation">
            <li class="Twitter">
                <a href="http://twitter.com/AccountLink">
                    <img src="Images/twitter.png"/>
                </a>
            </li>
        </ul>
    </div>
    <div class="banner"><img src="Images/banner.jpg"/></div>
</body> 
```

我的CSS：

```
ul {
    list-style-type: none;
}

.header {
    width: 800px;
    margin: 0px auto;
    margin-top: 25px;
    margin-bottom: 25px;
}

.header .logo {
    padding-top: 10px;
    float: left;
}

.header .navigation {

    float: right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:06:12.783

```
.header {
    width: 800px;
    margin: 25px auto;
    overflow: hidden;
}

.banner {
    display: inline-block;
    margin: 25px auto;
    width: 100%;
} 
```

浏览器的兼容性表：http: [//caniuse.com/#feat=inline-block](http://caniuse.com/#feat=inline-block)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:30:23.843

您有浮动导航，但您的标题没有指定高度。在导航后使用一些元素清除或应用溢出：隐藏；到你的标题。例如：

```
.header {
    width: 800px;
    margin: 25px auto;
    overflow: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:30:34.653

```
try using padding instead of margin

    padding-top: 25px;
    padding-bottom: 25px;

also add 
.banner{  padding-top:10px;}

or adjust to your needs 
```

# c - 河内塔 - 迭代，使用列表

> ID：15849656
> 
> 赞同：-1
> 
> 时间：2013-04-06T10:17:43.333
> 
> 标签：c, list

我想编写标准的河内塔算法，使用 3 根杆和 n 盘。但我也想学习如何使用列表，所以我想我可以把它结合起来。

我想创建 3 个元素，每个元素代表一个杆。它们中的每一个都有`discs[]`数组，例如，如果一根杆有 5 个圆盘，则数组将包含`[1, 2, 3, 4, 5]`元素。

好的，我实现了结构等，但我的问题是 - 如何实际解决河内塔迭代？

是否可以只在杆上循环，并为每个圆盘检查它可以去哪里，并将其移动到第一个检查位置 - 然后重复循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T10:49:42.420

无需使用列表使您的生活过于复杂。使用数组。

```
#include <stdio.h>

#define DISKS 4 // 10 max
int stacks[3][DISKS];
int sps[3];

void init(int from)
{
  int i;
  sps[2] = sps[1] = sps[0] = 0;
  for (i = 0; i < DISKS; i++)
    stacks[from][i] = DISKS - i; // disk radius
  sps[from] = DISKS;
}

void print(void)
{
  int i, j, k;
  for (i = DISKS - 1; i >= 0; i--)
  {
    for (j = 0; j < 3; j++)
    {
      if (sps[j] > i)
      {
        for (k = 0; k < 10 - stacks[j][i]; k++)
          printf(" ");
        for (k = 0; k < 2 * stacks[j][i]; k++)
          printf("x");
        for (k = 0; k < 10 - stacks[j][i]; k++)
          printf(" ");
      }
      else
      {
        printf("                    "); // 10 * 2
      }
      printf("  ");
    }
    printf("\n");
  }
  printf("_________/\\_________  _________/\\_________  _________/\\_________\n\n");
}

void solve(int to, int from, int cnt)
{
  int other = from ^ to ^ 3;

  if (!cnt) return;

  solve(other, from, cnt - 1);

  stacks[to][sps[to]++] = stacks[from][--sps[from]];
  print();

  solve(to, other, cnt - 1);
}

int main(void)
{
  init(0);
  print();
  solve(2, 0, DISKS);
  return 0;
} 
```

输出（[ideone](http://ideone.com/yb2aFf)）：

```
 xx                                                       
        xxxx                                                      
       xxxxxx                                                     
      xxxxxxxx                                                    
_________/\_________  _________/\_________  _________/\_________

        xxxx                                                      
       xxxxxx                                                     
      xxxxxxxx                 xx                                 
_________/\_________  _________/\_________  _________/\_________

       xxxxxx                                                     
      xxxxxxxx                 xx                   xxxx          
_________/\_________  _________/\_________  _________/\_________

       xxxxxx                                        xx           
      xxxxxxxx                                      xxxx          
_________/\_________  _________/\_________  _________/\_________

                                                     xx           
      xxxxxxxx               xxxxxx                 xxxx          
_________/\_________  _________/\_________  _________/\_________

         xx                                                       
      xxxxxxxx               xxxxxx                 xxxx          
_________/\_________  _________/\_________  _________/\_________

         xx                   xxxx                                
      xxxxxxxx               xxxxxx                               
_________/\_________  _________/\_________  _________/\_________

                               xx                                 
                              xxxx                                
      xxxxxxxx               xxxxxx                               
_________/\_________  _________/\_________  _________/\_________

                               xx                                 
                              xxxx                                
                             xxxxxx               xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________

                              xxxx                   xx           
                             xxxxxx               xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________

                                                     xx           
        xxxx                 xxxxxx               xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________

         xx                                                       
        xxxx                 xxxxxx               xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________

         xx                                        xxxxxx         
        xxxx                                      xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________

                                                   xxxxxx         
        xxxx                   xx                 xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________

                                                    xxxx          
                                                   xxxxxx         
                               xx                 xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________

                                                     xx           
                                                    xxxx          
                                                   xxxxxx         
                                                  xxxxxxxx        
_________/\_________  _________/\_________  _________/\_________ 
```

# rotation - 如何旋转虚拟物体并使孩子总是朝着相机看？

> ID：15849659
> 
> 赞同：1
> 
> 时间：2013-04-06T10:17:56.583
> 
> 标签：rotation, three.js

如何旋转虚拟物体`three.js`并让孩子总是朝着相机看？似乎当虚拟（`3Dobject`）旋转`objectchild.lookAt`（`camera.position`）停止工作时，这可以解决吗？

# dicom - 增强的 SR SOP 类“1.2.840.10008.5.1.4.1.1.88.22”对绘制感兴趣区域很有用

> ID：15849660
> 
> 赞同：0
> 
> 时间：2013-04-06T10:18:05.480
> 
> 标签：dicom

```
SOP Class UID :- "1.2.840.10008.5.1.4.1.1.88.22" of Enhanced SR SOP Class Name 
```

在这个具有来自这些不同标签的各种 dicom 标签的 SR 模态中，我想在 MR 模态上绘制**“感兴趣的区域”（ROI） 。**

这是我的 SR Dicom 文件[SR DICOM](http://www.uploadmb.com/dw.php?id=1365402449)

因此，请帮助我了解我使用哪个 SR 模态标签在 MR 模态上绘制标记，或者我使用哪个参考标签来获取 ROI 和 MR 参考 SOP 实例 UID 与 SR 模态相关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:35:25.130

我最近一直在做大量的乳房 X 线摄影 SR 工作。我发现[大卫克鲁尼的书](http://www.pixelmed.com/srbook.html)非常棒。您可以在他的网站上找到更多信息以及该书的链接。

我试图查看你的文件，但我无法访问它，所以我将告诉你我在乳房 X 线摄影中的 SR 经验。

为了解决乳房 X 光检查中的 SR，我编写了一个工具，该工具现在是 PyDICOM 的一部分，用于了解 SR 文件的结构。我确信其他语言中也有类似的工具。下面是一个示例的屏幕截图。

有关 ROI 的信息存储在 SCOORD 内容项中。更改此项以更改 ROI。我发现了不同类型的 SCOORD 项目，例如`centre`，`outline`因此您需要在更改它们时保持一致。我强调的是投资回报率的轮廓。

![在此处输入图像描述](https://i.stack.imgur.com/n83mI.png)

如果您注意到 SCOORD 上的参考内容标识符的值为 [1,2,1]。这意味着您转到根 (1) 转到第二项 (2)，然后转到引用的系列序列 (1) 中的第一项。那里的 ReferencedSOPInstanceUID 是绘制 SCOORD 的图像。

![在此处输入图像描述](https://i.stack.imgur.com/Q84IA.png)

**编辑 1**

我查看了您的文件，但找不到 SCOORD 内容项。也没有 ReferencedSOPInstances。

# ios - iOS Facebook SDK 3.2.1 提要发布错误

> ID：15849661
> 
> 赞同：1
> 
> 时间：2013-04-06T10:18:15.490
> 
> 标签：ios, facebook-ios-sdk

我正在开发 iOS 应用程序，它有一个简单的 facebook 分享功能，基本上它允许你通过在 feed 中发布来分享这个应用程序的链接。

我以这种方式使用 facebook SDK 3.2.1：

```
NSMutableDictionary *params = 
    [NSMutableDictionary dictionaryWithObjectsAndKeys:
        @"Test tweet", @"name",
        @"Test", @"description",
        @"http://myapplink.com", 
        @"link",
        @"http://myapppicture.com/picture.jpg", 
        @"picture",
        nil];

[FBWebDialogs presentFeedDialogModallyWithSession:nil
    parameters:params
    handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
        if (error) {
            NSLog(@"Error publishing story.");
        } else {
            if (result == FBWebDialogResultDialogNotCompleted) {
                NSLog(@"User canceled story publishing.");
            } else {
                NSLog(@"No error!");
            }
         }
     }]; 
```

问题是：当此代码运行时，它会弹出 facebook 登录对话框，登录后，我在屏幕上看到此错误：“发生错误。请稍后再试”。控制台中没有任何记录，但如果我关闭此对话框，它只会记录“用户取消故事发布”。

应用程序设置非常基本 - 我已经按照 facebook 的要求设置了所有内容：http: [//developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

我的问题是：有人遇到过同样的问题吗？有什么可能的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T18:24:22.377

现在这很简单，我觉得有点愚蠢:) 但无论如何，我希望这会帮助任何遇到同样问题的人。

一般来说，我通过在我的“params”字典中添加一个键值对来解决这个问题 - 键@“app_id”的值@“my_facebook_app_id”。所以正确的字典看起来像：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"11111111", @"app_id",
                               @"Test tweet", @"name",
                               @"Test", @"description",
                               @"http://sometestsite", @"link",
                             @"http://site.com/testimage.jpg", @"picture",
                               nil]; 
```

Facebook SDK 说 app_id 键是“必需的，但大多数 SDK 会自动指定”——即使我通过 MyApp-Info.plist 文件提供了我的 app_id，它似乎不是自动指定的（或者我做错了什么）。

因此，如果您有同样的问题，请尝试添加此 @"app_id" 键 - 这应该会有所帮助。

# javascript - this._waiting 未定义

> ID：15849674
> 
> 赞同：1
> 
> 时间：2013-04-06T10:20:19.707
> 
> 标签：javascript, web-worker

我正在尝试为网络工作者编写一个简单的包装类。当定义的消息之一发送到 webworker 时，LayoutBridge 会分配一张票，该票在处理请求时返回。这样，我应该能够为这些请求运行回调。

我收到以下错误

> 类型错误：this._waiting 未定义

在 _recvMsg 中。

这是代码，几天来我一直在尝试解决这个自制的谜语，但看不到我做错了什么，因为在 LayoutBridge 构造函数和（只是为了确保）中都定义了等待在初始化函数中。

我会在此之后立即发布一个 jsfiddle，但也许有人已经知道答案了。

```
var LayoutBridge = function(){

    this._waiting = {};
    this._initialized = false;

};

LayoutBridge.prototype.init = function(opts){
    if(!this._initialized){
        this._waiting = {};

        this._worker = new Worker('/layout-worker.js');
        this._worker.onmessage = this._recvMsg;
        var ticket = _.uniqueId();

        var waitingCallback = function(){
            this._initiated = true;
        };
        waitingCallback.bind(this);
        this._waiting[ticket] = waitingCallback;

        this._worker.postMessage({cmd: 'init', ticket: ticket});
        this._initialized = true;
    }
};

LayoutBridge.prototype.addVertex = function(callback){
    if(!this._initialized) throw "Initialize LayoutBridge first";

    var ticket = _.uniqueId();
    this._waiting[ticket] = callback;
    this._worker.postMessage({cmd: 'addVertex', ticket: ticket});
};

LayoutBridge.prototype.removeVertex = function(id, callback){
    if(!this._initialized) throw "Initialize LayoutBridge first";

    var ticket = _.uniqueId();
    this._waiting[ticket] = callback;
    this._worker.postMessage({cmd: 'removeVertex', id: id, ticket: ticket});
};

LayoutBridge.prototype.addEdge = function(sourceId, targetId, callback){
    if(!this._initialized) throw "Initialize LayoutBridge first";

    var ticket = _.uniqueId();
    this._waiting[ticket] = callback;
    this._worker.postMessage({cmd: 'addEdge', sourceId: sourceId, targetId: targetId});
};

LayoutBridge.prototype._recvMsg = function(e){
    this._waiting[e.data.ticket](e.data.payload);
    //delete this._waiting[e.data.ticket];
}; 
```

编辑，这里是小提琴：建议包括：http: [//jsfiddle.net/MGSvj/2/](http://jsfiddle.net/MGSvj/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:29:43.490

将你的函数分配给另一个类会改变它的范围。

在这里，您将 this._recvMsg 函数分配给 Worker 类。

```
this._worker.onmessage = this._recvMsg; 
```

因此，在此处的代码中，**这**将是窗口对象或工作对象（不太确定，但绝对不会是 LayoutBridge 对象）。

```
LayoutBridge.prototype._recvMsg = function(e){
    this._waiting[e.data.ticket](e.data.payload);
    //delete this._waiting[e.data.ticket];
}; 
```

要解决此问题，您需要做的就是

```
var oThis = this;
this._worker.onmessage = function (){ oThis._recvMsg }; 
```

此外，根据[https://developer.mozilla.org/en/docs/DOM/Blob](https://developer.mozilla.org/en/docs/DOM/Blob)

Blob 需要一个数组作为参数。

所以你的代码

```
var blob = new Blob($('#layout-worker').html()); 
```

应该

```
var blob = new Blob([$('#layout-worker').html()]); 
```

# jquery - 选择日期后时间选择器弹出窗口未关闭

> ID：15849677
> 
> 赞同：4
> 
> 时间：2013-04-06T10:20:31.243
> 
> 标签：jquery, popup, timepicker

我使用了来自[http://trentrichardson.com的 timepicker 插件](http://trentrichardson.com/examples/timepicker/)

这里我有一个问题，在我选择日期后，Timepicker 弹出窗口没有关闭。

```
<asp:TextBox ID="datetimepicker" runat="server" CssClass="datetimepicker" >
</asp:TextBox> 
```

jQuery

```
$(document).ready(function () {
    $('.datetimepicker').datetimepicker({});
}); 
```

现在它显示如下：

![日期](https://i.stack.imgur.com/5teb4.png)

所以在选择日期时，我希望它关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:15:37.970

Sadly, this plugin prevents adding neat jQuery code for hiding.

It would be something like this:

```
$(document).on("click", ".ui-datepicker a", function() {
    $(this).closest(".ui-datepicker").hide();
}); 
```

But it `prevevents propagation` of click event and invoking other click handlers, so above doesn't work.

The below solution is in a bad style, but it works ([http://jsfiddle.net/cL9Fx/1/](http://jsfiddle.net/cL9Fx/1/)):

```
$(document).ready(function () {
    $('#datetimepicker').datetimepicker({});
    $("#datetimepicker").click(function() {
        $(".ui-datepicker a").each(function(index, elem) {
            $(elem).attr("onclick", "$(this).closest(\".ui-datepicker\").fadeOut(\"fast\");");
        });
    });
}); 
```

# android - 在 android 中按日期排序列表，来自 json 而不是来自 db

> ID：15849681
> 
> 赞同：2
> 
> 时间：2013-04-06T10:20:52.630
> 
> 标签：android

嗨，我正在对来自 web 服务的日期进行排序，即 json，我需要根据创建的日期对其进行排序。正常排序 Collections.sort 不起作用我需要在排序之前格式化日期如何做到这一点

```
CommunicationEngine.post(getApplicationContext(), "sports",
                    mylibraryRequest, new AsyncHttpResponseHandler() {
com.loopj.android.http.AsyncHttpResponseHandler#onStart()

    com.loopj.android.http.AsyncHttpResponseHandler#onSuccess(java.lang.String)

                        @Override

ObjectMapper sportsMapper = new ObjectMapper();## Heading ##try {
                                SportsResponse sportsResponse = sportsMapper.readValue(sportsResponseASString,SportsResponse.class);

if (null != sportsResponse) {
List<Assets> assets = sportsResponse.getAssets();
 (Assets asset : assets) {
//sort list
sort_sportList.add(asset.getTitle()
                                                .trim());
                                        if(asset.getSportType() != null){
                                            sort_sport.add(asset.getSportType().trim());                                        }                                                                           EGLibContent eglibitem = new EGLibContent(
                                                                                                    .getAssetEventDate(),

                                        adapter.getKey("Contents");
                                        adapter.addeglibcontent(eglibitem,ListView); 
```

我通常通过对 collections.sort() 进行排序来使用标题

我想对 getAssetEventDate() 进行排序。从 tthis 函数返回的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:43:12.643

那么您想使用 getAssetEventDate() 对列表进行排序吗？getAssetEventDate 返回一个数字？

```
Collection.sort(assets, new Comparator<Asset>() {

        @Override
        public int compare(Asset lhs, Asset rhs) {
            if (lhs.getAssetEventDate() < rhs.getAssetEventDate() {
                return -1;
            } else if (lhs.getAssetEventDate() > rhs.getAssetEventDate() {
                return 1;
            } else {
                return 0;
            }
        }
} 
```

# mysql - Prestashop 的 MyISAM 或 InnoDB 数据库？

> ID：15849687
> 
> 赞同：1
> 
> 时间：2013-04-06T10:21:26.450
> 
> 标签：mysql, database, innodb, prestashop, myisam

我使用 Prestashop 制作了我的第一个 eshop，但我不确定使用 MyISAM 还是 InnoDB 更好。在 eshop 中最多可以有 3 000 件商品。我认为对于这个问题最重要的是eshop中有多少物品，但如果我没有写一些其他重要信息，请问我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:36:57.833

这个决定取决于读/写比率。MISAM 使用表级级别，因此如果表被锁定，则只能在其上运行一个查询，因此 MISAM 存在严重的性能问题。同样在 5.6 之前的版本中，只有 MISAM 支持 FULLTEXT 搜索。MISAM 的表对于 SELECT 查询来说非常快，而且它占用的磁盘空间更少。

另一方面，INNODB 支持行级锁定，因此可以使用插入进行并发选择。它支持执行 ACID 事务，因此每个语句在崩溃时都是原子的且持久的。

所以我决定将 INNODB 用于 eshop 之类的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:31:26.727

我会使用 InnoDB，因为它支持事务，这对于 eshop 来说可能是必需的。有关更多详细信息，请查看此问题的答案： [MyISAM 与 InnoDB](https://stackoverflow.com/questions/20148/myisam-versus-innodb)

# android - Android - 在我的布局 xml 中膨胀 SimonVT NumberPicker 类时出错

> ID：15849695
> 
> 赞同：8
> 
> 时间：2013-04-06T10:22:09.007
> 
> 标签：android, numberpicker

我已经在这几天了，我正要放弃，所以非常感谢任何帮助！

我一直在尝试在我的 android 应用程序中实现[simonVT numberpicker 。](https://github.com/SimonVT/android-numberpicker)对 android 来说是全新的，因此包括库、引用这个库并编译所有内容本身就是几天的任务。现在我终于完成了所有编译，但在运行时出现以下错误：

```
04-06 10:58:37.126: E/AndroidRuntime(14324): java.lang.RuntimeException: 
Unable to start activity ComponentInfo{com.example.goalminder/com.example.goalminder.AddGoal}:
android.view.InflateException: Binary XML file line #81: 
Error inflating class net.simonvt.numberpicker.NumberPicker 
```

这是我的布局的开头：

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/net.simonvt.numberpicker"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"> 
```

**注意**- 上面的 'xmlns:app' 部分有一个黄色警告标记 - 它没有被使用。我在另一个stackoverflow答案中包含了这个。类似的问题。留下来阻止这个建议。

这是数字选择器的 xml：

```
<net.simonvt.numberpicker.NumberPicker          
    android:id="@+id/dayPicker"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="50dp"
    android:layout_marginRight="10dp"
    android:layout_weight="1"/> 
```

我已按照 Simon 的指示将主题包含在我的主题文件中。我真的不知道该给它取什么名字，所以我称它为“NumberPicker”：

```
<resources>

    <!-- Copy one of these attributes to your own theme (choose either dark or light).
        <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
       <item name="numberPickerStyle">@style/NPWidget.Holo.Light.NumberPicker</item>
    -->
    <style name="NumberPicker" parent="android:Theme">
        <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
    </style>

    <style name="NumberPicker" parent="android:Theme.Light">
        <item name="numberPickerStyle">@style/NPWidget.Holo.Light.NumberPicker</item>
    </style>

</resources> 
```

作为应用程序的子项，我还将以下内容添加到我的 android 清单中：

```
 <activity 
     android:name="net.simonvt.numberpicker.Numberpicker" />
 <activity 
     android:name="net.simonvt.numberpicker.Scroller" /> 
```

我一直在使用stackoverflow，所以我们上面的内容是我所看到的所有推荐的散点枪方法。如前所述，我正在为此苦苦挣扎，并且即将实施标准的丑陋列表。

**注意**- 我使用 Numberpicker 的原生 android 实现来完成所有这些工作。我想使用 Simon VT 的 backport 版本，因为我希望支持 API < 11，其中包括我认为有[39.7% 分布](http://developer.android.com/about/dashboards/index.html)的 Gingerbread 。如果您认为我不需要支持这一点，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T10:43:52.607

您需要为 AndroidManifest.xml 上的活动添加主题：示例：

```
<activity android:name="yourActivity" android:theme="@style/SampleTheme.Light"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-03T07:43:02.493

如果您不想为自己的项目创建主题，您可以对 numberpicker 的源代码执行以下操作，将其设置为使用默认主题 NPWidget_Holo_numberPicker。

将构造函数替换为以下内容

```
public NumberPicker(Context context, AttributeSet attrs) {
    this(context, attrs, R.style.NPWidget_Holo_NumberPicker);
} 
```

然后将 TypedArray attributesArray 的赋值更改为以下内容：

```
 TypedArray attributesArray = context.obtainStyledAttributes(
            attrs, R.styleable.NumberPicker, 0, defStyle); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-13T17:15:13.710

请参阅 Simon 的使用说明：

> 需要向您的主题添加单个属性。检查示例应用程序以了解这是如何完成的。

[`values/theme.xml`](https://github.com/SimonVT/android-numberpicker/blob/master/samples/res/values/themess.xml)：

```
<style name="SampleTheme" parent="android:Theme">
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
</style> 
```

[`values-v11/themes.xml`](https://github.com/SimonVT/android-numberpicker/blob/master/samples/res/values-v11/themes.xml)：

```
<style name="SampleTheme" parent="android:Theme.Holo">
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T07:15:42.160

尝试用 com.your.package.NumberPicker 替换 net.simonvt.numberpicker.NumberPicker。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T21:34:41.783

我遇到了几乎同样的问题，我得到了错误

```
11-18 21:13:18.627: W/ResourceType(13799): No package identifier when getting value for resource number 0x00000000 
```

我终于意识到我必须将样式项添加到我*自己的*样式定义中（如上面的 Paul Lammertsma 所示），因为我只是复制/粘贴 SimonVT 的样式，当然我的应用程序没有使用：

```
<style parent="@android:style/Theme.Holo.NoActionBar.Fullscreen" name="NoActionBar">
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
</style> 
```

然后，在它仍然无法工作之后，我发现我完全错过了一个 theme.xml 文件（我有三个用于不同的 API 级别）。

# bash - 在 UNIX 命令行/shell 脚本上创建网页的静态副本

> ID：15849696
> 
> 赞同：2
> 
> 时间：2013-04-06T10:22:16.683
> 
> 标签：bash, curl, web-crawler, wget, lynx

我需要在 shell 脚本中创建网页的静态副本（包括所有媒体资源，如 CSS、图像和 JS）。此副本应该可以在任何浏览器中离线打开。

一些浏览器具有类似的功能（另存为...网页，完整），它从页面创建文件夹并将外部资源重写为该文件夹中的相对静态资源。

有什么方法可以在 Linux 命令行上对给定的 URL 完成并自动化此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T10:35:41.223

你可以`wget`这样使用：

```
wget --recursive --convert-links --domains=example.org http://www.example.org 
```

此命令将递归下载任何可通过来自 www.example.org 页面的超链接访问的页面，而不是跟随 example.org 域之外的链接。

查看`wget`手册页以获取更多控制递归的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T10:35:30.023

您希望该工具`wget`镜像站点：

```
$ wget -mk http://www.example.com/ 
```

选项：

> -m --镜像
> 
> 打开适合镜像的选项。此选项打开递归和时间戳，设置无限递归深度并保留 FTP 目录列表。它目前相当于 -r -N -l inf --no-remove-listing。
> 
> -k --转换链接
> 
> 下载完成后，将文档中的链接进行转换，使其适合本地查看。这不仅影响可见的超链接，还影响链接到外部内容的文档的任何部分，例如嵌入的图像、到样式表的链接、到非 HTML 内容的超链接等。

# javascript - 如何在每个 ajax 调用上绑定开始和完成事件

> ID：15849698
> 
> 赞同：1
> 
> 时间：2013-04-06T10:22:31.823
> 
> 标签：javascript, ajax

我的问题可能非常基本，但我已经坚持了很长一段时间了。

我有一个应用程序，我需要知道通过接口进行的任何 ajax 调用的开始或完成，无论是 YAHOO.util.connect.asyncRequest 还是 jquery 的 $.ajax() 或简单的 XMLHttpRequest。

我努力了

```
$(document).ajaxComplete(function() {
$( ".log" ).text( "Triggered ajaxComplete handler." );
}) 
```

但我认为它只绑定从 jquery ajax 函数触发的事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:45:59.597

像这个答案一样[为页面上的所有 AJAX 请求添加一个“钩子”，](https://stackoverflow.com/questions/5202296/add-a-hook-to-all-ajax-requests-on-a-page)您可以查看该代码并尝试一下。

javascript 中的代码挂钩每个 ajax 调用（不仅是 jQuery），并让您定义自己的处理程序。

```
function addXMLRequestCallback(callback){
    var oldSend, i;
    if( XMLHttpRequest.callbacks ) {
        // we've already overridden send() so just add the callback
        XMLHttpRequest.callbacks.push( callback );
    } else {
        // create a callback queue
        XMLHttpRequest.callbacks = [callback];
        // store the native send()
        oldSend = XMLHttpRequest.prototype.send;
        // override the native send()
        XMLHttpRequest.prototype.send = function(){
            // process the callback queue
            // the xhr instance is passed into each callback but seems pretty useless
            // you can't tell what its destination is or call abort() without an error
            // so only really good for logging that a request has happened
            // I could be wrong, I hope so...
            // EDIT: I suppose you could override the onreadystatechange handler though
            for( i = 0; i < XMLHttpRequest.callbacks.length; i++ ) {
                XMLHttpRequest.callbacks[i]( this );
            }
            // call the native send()
            oldSend.apply(this, arguments);
        }
    }
}

// e.g.
addXMLRequestCallback( function( xhr ) {
    console.log( xhr.responseText ); // (an empty string)
});
addXMLRequestCallback( function( xhr ) {
    console.dir( xhr ); // have a look if there is anything useful here
}); 
```

# c++ - OpenGL VBO 绘图问题

> ID：15849703
> 
> 赞同：0
> 
> 时间：2013-04-06T10:23:30.780
> 
> 标签：c++, opengl, shader, vbo

我目前正在制作的粒子引擎有问题。使用引擎，您可以在引擎中添加多个发射器，其理念是每个粒子系统都可以发射自己的粒子。

然而，我遇到的问题是，当我添加第二个粒子系统时，第一个粒子系统的绘制似乎受到了影响，我的意思是它根本没有绘制。每个粒子系统的绘制调用都被正确调用。

然而，我认为问题是尽管创建了多个 VBO，但实际上只使用了一个。

我将展示影响 VBO 的函数的重要部分。我的着色器使用统一的位置来存储 WVP 矩阵。我还应该提到每个粒子系统都应该使用自己的着色器程序。

下面是我在创建粒子系统时调用的 initializeBuffers 函数：

```
void ParticleSystem::InitializeBuffers()
{
    glGenVertexArrays(1, &VaoId);   
    glBindVertexArray(VaoId);

    //glGenBuffers(1, &VboId);
    glGenBuffers(1, &PositionBufferId);
    glGenBuffers(1, &IndexBufferId);
    glGenBuffers(1, &WVPId);

    std::list<Particle>::iterator iterator = particles.begin();
    //positions.reserve(5);

    for (std::list<Particle>::iterator iterator = particles.begin(), end = particles.end(); iterator != end; ++iterator) 
    {
        positions.push_back(iterator->GetPosition());
        //verticesToDraw.insert(verticesToDraw.end(), iterator->GetVertices()->begin(), iterator->GetVertices()->end());
        indicesToDraw.insert(indicesToDraw.end(), iterator->GetIndices()->begin(), iterator->GetIndices()->end());
    }

    //glBindBuffer(GL_ARRAY_BUFFER, VboId);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexBufferId);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indicesToDraw[0]) * indicesToDraw.size(), &indicesToDraw[0], GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, WVPId);

    for (unsigned int i = 0; i < 4 ; i++) {
        glEnableVertexAttribArray(WVP_LOCATION + i);
        glVertexAttribPointer(WVP_LOCATION + i, 4, GL_FLOAT, GL_FALSE, sizeof(Matrix4f), (const GLvoid*)(sizeof(GLfloat) * i * 4));
        glVertexAttribDivisor(WVP_LOCATION + i, 1);
    }

    for(std::list<BaseBuildingBlock*>::iterator iterator =  buildingBlocks.begin(), end = buildingBlocks.end(); iterator != end; ++iterator)
    {
        (*iterator)->InitializeBuffer(programId);
    }

    /*
    glBindBuffer(GL_ARRAY_BUFFER, WorldId);

    for (unsigned int i = 0; i < 4 ; i++) {
    glEnableVertexAttribArray(WORLD_LOCATION + i);
    glVertexAttribPointer(WORLD_LOCATION + i, 4, GL_FLOAT, GL_FALSE, sizeof(Matrix4f), (const GLvoid*)(sizeof(GLfloat) * i * 4));
    glVertexAttribDivisor(WORLD_LOCATION + i, 1);
    }
    */
    //return GLCheckError();
} 
```

这是绘制函数和实际绘制实例化元素的代码，wvp 矩阵是由函数早期的粒子系统形成的。

```
void ParticleSystem::Draw(Matrix4f perspectiveCameraMatrix)
{
    // scale TEST
    //GLint gScaleLocation = glGetUniformLocation(program, "gScale");
    //assert(gScaleLocation != 0xFFFFFFFF);
    //glUniform1f(gScaleLocation, scale);

    //Pipeline p;
    //Matrix4f* WVPMatrices = new Matrix4f[particles.size()];
    //Matrix4f* WorldMatrices = new Matrix4f[particles.size()];

    WVPMatrices.clear(); 
    WorldMatrices.clear(); 

    glUseProgram(0);

    glUseProgram(programId);

    //Matrix4f perspectiveMatrix;
    //perspectiveMatrix.BuildPerspProjMat(90,1, 0.01, 200, 100 - 0 /*getWidth() / 32*/, 100 - 0  /*getHeight() / 32*/);

    //********************************************************************************************************
    // Method 1

    // Think I need to next define a camera position.

    if(particles.size() == 0)
    {
        return;
    }

    verticesToDraw.clear();

    Matrix4f scaleMatrix;
    Matrix4f worldMatrix;
    Matrix4f rotateMatrix;
    Matrix4f finalMatrix;

    //ColourId = glGetUniformLocation(programId, "UniformColour");

    int i = 0;

    for (std::list<Particle>::iterator iterator = particles.begin(), end = particles.end(); iterator != end; ++iterator) 
    {

        verticesToDraw = *iterator->GetVertices();
        indicesToDraw = *iterator->GetIndices();
        //positions.push_back(iterator->GetPosition());
        worldMatrix.InitTranslationTransform(iterator->GetPosition().x, iterator->GetPosition().y, iterator->GetPosition().z);
        rotateMatrix.InitRotateTransform(iterator->GetRotation().x, iterator->GetRotation().y, iterator->GetRotation().z);
        scaleMatrix.InitScaleTransform(iterator->GetScale().x, iterator->GetScale().y, iterator->GetScale().z);
        finalMatrix = perspectiveCameraMatrix * worldMatrix * rotateMatrix * scaleMatrix;
        //p.WorldPos(iterator->GetPosition());
        //p.Rotate(iterator->GetRotation());
        WVPMatrices.push_back(finalMatrix.Transpose());

        /*glUniform4f(ColourId, iterator->GetColour().r, iterator->GetColour().g, iterator->GetColour().b,
        iterator->GetColour().a);*/
        //WorldMatrices[i] = p.GetWorldTrans();
        i++;

        //iterator->Draw();
    }

    //glEnableVertexAttribArray(0);

    if(colourOverLifeBuildingBlock != NULL)
    {
        colourOverLifeBuildingBlock->Test();
    }

    glBindBuffer(GL_ARRAY_BUFFER, VboId);
    glBufferData(GL_ARRAY_BUFFER, verticesToDraw.size() * sizeof(verticesToDraw[0]), &verticesToDraw.front(), GL_STATIC_DRAW);
    glEnableVertexAttribArray(POSITION_LOCATION);
    glVertexAttribPointer(POSITION_LOCATION, 3, GL_FLOAT, GL_FALSE, 0, 0);

    int size = particles.size();

    glBindBuffer(GL_ARRAY_BUFFER, WVPId);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Matrix4f) * size, &WVPMatrices.front(), GL_DYNAMIC_DRAW);

    glDrawElementsInstanced(GL_TRIANGLES, indicesToDraw.size(), GL_UNSIGNED_BYTE, 0, particles.size());

    glBindBuffer(GL_ARRAY_BUFFER, 0);

    //glDisableVertexAttribArray(0);
    //glFlush();

} 
```

粒子系统整个标题如下：

```
#include <gl\glew.h>
#include <array>
#include <vector>

class ParticleSystem
{

public:
    ParticleSystem(Vector3 pos, Quaternion rot, float spawnRate, int particlesToSpawn); // Constructs a particle system.
    ~ParticleSystem(); // Destructor.
    void Update(float elapsedTime); // Updates the particle system.
    void Draw(Matrix4f perspectiveMatrix); // Draw the particle system
    void CreateShaders();
    void InitializeBuffers();

    // Long amount of get sets.
    /*float* GetMinLifeTime();
    void SetMinLifeTime(float lt);
    float* GetMaxLifeTime();
    void SetMaxLifeTime(float lt);*/
    int* GetParticlesToSpawnAtATime();
    void SetParticlesToSpawnAtATime(int particlesToSpawn);
    float* GetSpawnRate();
    void SetSpawnRate(float spawnRate);
    Vector3* GetPosition();
    void SetPosition(Vector3 newPosition);
    Quaternion* GetRotation();
    void SetRotation(Quaternion rotation);
    std::list<BaseBuildingBlock*> GetBuildingBlocks();

    VelocityBuildingBlock* GetVelocityBuilding();
    ColourOverLifeBuildingBlock* GetColourOverLifeBuildingBlock();
    LifeTimeBuildingBlock* GetLifeTimeBuildingBlock();
    UniformColourBuildingBlock* GetUniformColourBuildingBlock();
    ScaleBuildingBlock* GetScaleBuildingBlock();
    /*Vector3* GetMinVelocity();
    void SetMinVelocity(Vector3 min);
    Vector3* GetMaxVelocity();
    void SetMaxVelocity(Vector3 maxVelocity);*/
    Vector3 GetMinParticleStartPoint();
    void SetMinParticleStartPoint(Vector3 minParticleStartPoint);
    Vector3 GetMaxParticleStartPoint();
    void SetMaxParticleStartPoint(Vector3 maxParticleStartPoint);
    bool CreateColourOverLifeBuildingBlock();
    bool DeleteColourOverLifeBuildingBlock();
    bool CreateUniformColourBuildingBlock();
    bool DeleteUniformColourBuildingBlock();
    bool CreateScaleBuildingBlock();
    bool DeleteScaleBuildingBlock();

    /*Colour GetStartColour();
    void SetStartColour(Colour startColour);
    Colour GetEndColour();
    void SetEndColour(Colour endColour);*/
    Vector3* GetMinParticleRotationAmountPerFrame();
    void SetMinParticleRotationAmountPerFrame(Vector3 minParticleRotationAmount);
    Vector3* GetMaxParticleRotationAmountPerFrame();
    void SetMaxParticleRotationAmountPerFrame(Vector3 maxParticleRotationAmount);
    void Save(TiXmlElement* element);

private:
    // Spawns a particle.
    void SpawnParticle();

    GLuint VaoId;
    GLuint VboId;
    GLuint IndexBufferId;
    GLuint PositionBufferId;
    GLuint WVPId;
    GLenum programId;

    std::vector<GLfloat> verticesToDraw;
    std::vector<GLubyte> indicesToDraw; 
    std::vector<Vector3> positions;
    std::vector<Matrix4f> WVPMatrices; 
    std::vector<Matrix4f> WorldMatrices; 

    std::list<Particle> particles; // List of particles
    Vector3 position; // position of the emitter
    Quaternion rotation; // rotation of the emitter.
    float spawnRate; // spawnrate of the emitter.
    int particlesToSpawnAtATime; // The amount of particles to spawn at a time.
    float minLifeTime; // The minimum time a particle can live for.
    float maxLifeTime; // The maximum time a particle can live for.
    float timer; // Timer
    ShaderCreator* shaderCreator;

    //Vector3 minVelocity; // The minimum velocity a particle can have.
    //Vector3 maxVelocity; // The maximum velocity a particle can have/

    //std::list<BaseBuildingBlock> buildingBlocks;

    // I'm thinking of eventually making a list of baseBuildingBlocks. 
    std::list<BaseBuildingBlock*> buildingBlocks; 
    VelocityBuildingBlock* velocityBuildingBlock;
    ColourOverLifeBuildingBlock* colourOverLifeBuildingBlock;
    LifeTimeBuildingBlock* lifeTimeBuildingBlock;
    UniformColourBuildingBlock* uniformColourBuildingBlock;
    ScaleBuildingBlock* scaleBuildingBlock;

    Vector3 minParticleStartPoint; // The minimum position a particle can start at.
    Vector3 maxParticleStartPoint; // The maximum position a particle can start at.
    Vector3 minParticleRotationAmountPerFrame; // The minimum amount of rotation that a particle can rotate every frame.
    Vector3 maxParticleRotationAmountPerFrame; // The maximum amount of rotation that a particle can rotate every frame.
    Colour startColour; // StartColour is the colour that a particle will start with.
    Colour endColour; // EndColour is the colour that a particle will end with.

    //TEST
    float scale;

};

#endif 
```

现在我想知道，有什么方法可以切换活动的 VBO 吗？还是我完全走错了路。我使用了着色器调试器，并且两个 VBO 都存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:14:29.547

您需要在每次绘图调用之前正确设置顶点属性 - 即，您必须在每次绘图调用之前调用*glBindBuffer*和*glEnableVertexArray*和*glVertexAttribPointer*。在您发布的代码中，这仅发生在粒子位置上，但不适用于显然包含您的转换矩阵的“WVP_LOCATION”属性（您确实通过*glBufferData*将数据上传到 GPU ，但不设置属性） -这意味着一旦你有多个粒子系统，只有你的第二个粒子系统的变换矩阵才会被访问以进行渲染。

一方面，您在这里尝试做的事情似乎效率很低-您实际上是在每帧将每个粒子的一个变换矩阵推到 GPU 上。根据您想要的粒子数量，这会影响您的性能 - 您应该考虑使用[变换反馈](http://www.opengl.org/wiki/Transform_Feedback)更新粒子的位置等。

编辑：刚刚意识到opengl wiki链接并没有真正解释很多。变换反馈是一种记录顶点着色器输出的方法（或者，如果存在几何/曲面细分着色器，则将记录该输出）。输出变量被写入 VBO - 之后，它们可以像任何其他顶点属性一样用于渲染。整个概念与使用帧缓冲区对象记录片段着色器输出极为相似；它允许完全存在于 GPU 上的粒子系统，使用顶点着色器计算每帧中更新的位置、寿命和其他属性。一个非常好的教程，展示了这种变换反馈的基本设置，可以在[这里找到](http://prideout.net/blog/?tag=opengl-transform-feedback)

# java - Java读取长文本文件很慢

> ID：15849706
> 
> 赞同：10
> 
> 时间：2013-04-06T10:23:38.340
> 
> 标签：java, file-io, bufferedreader, file-read

我有一个 63000 行 (3.5 MB) 长的文本文件（使用 XStream 创建的 XML）。我正在尝试使用缓冲阅读器阅读它：

```
 BufferedReader br = new BufferedReader(new FileReader(file));
                try {
                    String s = "";
                    String tempString;
                    int i = 0;
                    while ((tempString = br.readLine()) != null) {
                        s = s.concat(tempString);
//                        s=s+tempString;
                        i = i + 1;
                        if (i % 1000 == 0) {
                            System.out.println(Integer.toString(i));
                        }
                    }
                    br.close(); 
```

在这里你可以看到我测量阅读速度的尝试。而且非常低。在 10000 行之后读取 1000 行需要几秒钟。我显然做错了什么，但不明白是什么。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T10:33:52.400

@PaulGrime 是对的。每次循环读取一行时，您都在复制字符串。一旦字符串变大（比如 10,000 行大），它就需要做很多工作来进行复制。

试试这个：

```
StringBuilder sb = new StringBuilder();
while (...reading lines..){ 
   ....
   sb.append(tempString);  //should add newline
   ...
}

s = sb.toString(); 
```

注意：请阅读下面 Paul 的回答，了解为什么剥离换行符会使这是读取文件的不好方法。此外，正如问题评论中提到的，XStream 提供了一种读取文件的方法，即使它没有， IOUtils.toString(reader) 也是一种更安全的读取文件的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T10:34:04.183

您可以立即进行一些改进：

*   使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)代替`concat`and `+`。使用`+`and`concat`确实会影响性能，特别是在循环中使用时。
*   减少对磁盘的访问。您可以通过使用[大缓冲区](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#BufferedReader%28java.io.Reader,%20int%29)来做到这一点：

    BufferedReader br = new BufferedReader(new FileReader("someFile.txt"), SIZE);

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T10:40:30.337

即使是小字符串，您也应该使用`StringBuilder`as`String`连接速度**非常**慢。

此外，尝试使用 NIO 而不是`BufferedReader`.

```
public static void main(String[] args) throws IOException {
    final File file = //some file
    try (final FileChannel fileChannel = new RandomAccessFile(file, "r").getChannel()) {
        final StringBuilder stringBuilder = new StringBuilder();
        final ByteBuffer byteBuffer = ByteBuffer.allocate(1024);
        final CharsetDecoder charsetDecoder = Charset.forName("UTF-8").newDecoder();
        while (fileChannel.read(byteBuffer) > 0) {
            byteBuffer.flip();
            stringBuilder.append(charsetDecoder.decode(byteBuffer));
            byteBuffer.clear();
        }
    }
} 
```

如果它仍然太慢，您可以调整缓冲区大小 - 它在很大程度上取决于系统，什么缓冲区大小效果更好。对我来说，缓冲区是 1K 还是 4K 几乎没有什么区别，但在其他系统上，我知道这种变化可以将速度提高一个数量级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T11:25:30.673

除了已经说过的内容之外，根据您对 XML 的使用，您的代码可能不正确，因为它丢弃了行尾。例如，这段代码：

```
package temp.stackoverflow.q15849706;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;

import com.thoughtworks.xstream.XStream;

public class ReadXmlLines {
    public String read1(BufferedReader br) throws IOException {
        try {
            String s = "";
            String tempString;
            int i = 0;
            while ((tempString = br.readLine()) != null) {
                s = s.concat(tempString);
                // s=s+tempString;
                i = i + 1;
                if (i % 1000 == 0) {
                    System.out.println(Integer.toString(i));
                }
            }
            return s;
        } finally {
            br.close();
        }
    }

    public static void main(String[] args) throws IOException {
        ReadXmlLines r = new ReadXmlLines();

        URL url = ReadXmlLines.class.getResource("xml.xml");
        String xmlStr = r.read1(new BufferedReader(new InputStreamReader(url
                .openStream())));

        Object ob = null;

        XStream xs = new XStream();
        xs.alias("root", Root.class);

        // This is incorrectly read/parsed, as the line endings are not
        // preserved.
        System.out.println("----------1");
        System.out.println(xmlStr);
        ob = xs.fromXML(xmlStr);
        System.out.println(ob);

        // This is correctly read/parsed, when passing in the URL directly
        ob = xs.fromXML(url);
        System.out.println("----------2");
        System.out.println(ob);

        // This is correctly read/parsed, when passing in the InputStream
        // directly
        ob = xs.fromXML(url.openStream());
        System.out.println("----------3");
        System.out.println(ob);
    }

    public static class Root {
        public String script;

        public String toString() {
            return script;
        }
    }
} 
```

以及类路径上的这个 xml.xml 文件（与类在同一个包中）：

```
<root>
    <script>
<![CDATA[
// taken from http://www.w3schools.com/xml/xml_cdata.asp
function matchwo(a,b)
{
if (a < b && a < 0) then
  {
  return 1;
  }
else
  {
  return 0;
  }
}
]]>
    </script>
</root> 
```

产生以下输出。前两行显示行尾已被删除，因此使 CDATA 部分中的 Javascript 无效（因为第一个 JS 注释现在注释掉整个 JS，因为 JS 行已被合并）。

```
----------1
<root>    <script><![CDATA[// taken from http://www.w3schools.com/xml/xml_cdata.aspfunction matchwo(a,b){if (a < b && a < 0) then  {  return 1;  }else  {  return 0;  }}]]>    </script></root>
// taken from http://www.w3schools.com/xml/xml_cdata.aspfunction matchwo(a,b){if (a < b && a < 0) then  {  return 1;  }else  {  return 0;  }}    
----------2

// taken from http://www.w3schools.com/xml/xml_cdata.asp
function matchwo(a,b)
{
if (a < b && a < 0) then
  {
  return 1;
  }
else
  {
  return 0;
  }
}
... 
```

# android - 开始没有 .class 的活动

> ID：15849709
> 
> 赞同：2
> 
> 时间：2013-04-06T10:23:59.203
> 
> 标签：android, android-intent, android-activity

我已经搜索了如何从另一个活动开始和活动，我一直在寻找

Intent intent = new Intent(this, ExampleClass.class); 开始活动（意图）；

但我想从一个实例化的活动开始。我有一个包含许多活动的容器，当用户从我的 UI 中选择时，我希望显示一个特定的活动。

所以，例如。

```
class MyExample extends Activity {

MyExample mx = new MyExample(); 
```

那么我现在如何开始这个活动。

我想要的是

```
Intent intent = new Intent(this, mx);
startActivity(intent); 
```

非常感谢一位经验丰富但对 Android 不熟悉的 Java 开发人员的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T16:00:19.327

这是可能的，虽然我还不明白你为什么要这样做。

确保`Activity`在清单中明确声明您想要启动的内容：

```
<activity android:name=".com.example.MyExample" ... /> 
```

然后你可以调用你当前的 Activity ：

```
Intent myIntent = new Intent();
myIntent.setComponent(new ComponentName("com.example", "com.example.MyExample")); 
startActivity(myIntent); 
```

# css - CSS 性能 - 后代选择器与类选择器

> ID：15849710
> 
> 赞同：-3
> 
> 时间：2013-04-06T10:24:24.343
> 
> 标签：css, performance

我在 html 中使用 javascript 动态附加表格，例如 50000 个单元格。

```
<table id="dataTable">
   <tbody>
       <tr>
           <td>data1</td>
           <td>data2</td>
           .....
           <td>data1</td>
       </tr>
       ..........
       <tr>
           <td>data1</td>
           <td>data2</td>
           .....
           <td>data1</td>
       </tr>
    </tbody>
</table> 
```

我用后代选择器为 td 设置样式，

```
#dataTable td{
     text-align:right;
     border:1px solid #adadad;
     padding-right:10px;
} 
```

另一种选择是使用类选择器为每个 td 赋予类。

```
<table id="dataTable">
   <tbody>
       <tr>
           <td class="format">data1</td>
           <td class="format">data2</td>
           .....
           <td class="format">data1</td>
       </tr>
       ..........
       <tr>
           <td class="format">data1</td>
           <td class="format">data2</td>
           .....
           <td class="format">data1</td>
       </tr>
    </tbody>
</table> 
```

在这里，我们使用格式类进行样式设置。

```
.format{
     text-align:right;
     border:1px solid #adadad;
     padding-right:10px;
} 
```

在浏览器中呈现表格时，我遇到了性能问题。这是因为我使用了 DESCENDANT SELECTOR 而不是 CLASS SELECTOR。或者浏览器无法处理大数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:32:42.643

**关于表性能**

主要是由于需要在每次更改时计算和设置动态列大小，表格的呈现速度可能会很慢。

您可以通过为每列指定固定大小来解决此问题，如下所示：

```
#dataTable td {
    width: 100px; /* Set sizes appropriately */
} 
```

这应该使您的表更高效

**关于 CSS 性能**

CSS 首先按最后一个标记进行选择，例如，执行以下选择器：

```
#dataTable td 
```

CSS 将首先选择所有`td`元素，然后检查它们中的每一个是否都是`#dataTable`. 从技术上讲，为每个单元指定一个类更快。

但是，这可能不足以通过使您的整体设计复杂化来支付费用。

我推荐阅读CSS-Tricks 的[Efficiently Rendering CSS](http://css-tricks.com/efficiently-rendering-css/)以更好地了解 CSS 和性能。

# r - 将数据读入向量

> ID：15849712
> 
> 赞同：2
> 
> 时间：2013-04-06T10:24:26.003
> 
> 标签：r

我正在尝试读取[此数据文件](http://s.yunio.com/87HT7f)。

```
x<-read.table("mydata",header=FALSE)
> mode(x)
[1] "list" 
```

我怎样才能把它读成矢量？它可以用 来完成`unlist(x)`，但我想要一个更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:33:25.200

通过`scan`：

```
x <- scan("mydata") 
```

够简单吗？

# wpf - 将路由事件从全景图转移到图块

> ID：15849715
> 
> 赞同：0
> 
> 时间：2013-04-06T10:24:44.113
> 
> 标签：wpf, mahapps.metro

我有一个 Metro Style 的应用程序，其中一个页面包含包含多个图块的“全景图”。

在panorama.cs 中的事件

```
 protected override void OnPreviewMouseDown(MouseButtonEventArgs e)
 {} 
```

和

```
protected override void OnPreviewMouseMove(MouseEventArgs e)
{} 
```

用于从左到右滚动全景图，反之亦然。

在每个“平铺”上，我定义了一个函数

```
private void Tile_MouseDoubleClick(object sender, System.Windows.Input.MouseButtonEventArgs e)
{} 
```

这用于打开另一个表单。

但由于全景事件，不会调用此方法，如果我评论“Panorama.cs”的上述事件，我无法从左到右滚动，反之亦然。如何实现两者。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:53:59.177

After some RnD and hit and trial testing I found this can be done simply. Instead of using "`MouseDoubleClick`" event handler , just use "`PreviewMouseDoubleClick`". :)

# javascript - 如何在 Xcode 中使用 Phonegap 插件？

> ID：15849719
> 
> 赞同：1
> 
> 时间：2013-04-06T10:25:12.050
> 
> 标签：javascript, ios, xcode, phonegap-plugins

特此我有一个插件链接，但我不知道添加插件的正确步骤来解决它。请帮助我采取正确的步骤。添加教程点将不胜感激。

[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:28:48.267

我有一个类似的问题，这个[谷歌群组](https://groups.google.com/forum/?fromgroups#!topic/phonegap/eXzriHzKpmw)线程最终帮助了我。它适用于更高版本的 phonegap / cordova（我怀疑是 2.0 及更高版本），早期版本的调用约定不同，许多线程都引用这些，现在已经过时了。

# vb.net - Windows Phone VB 网络请求

> ID：15849721
> 
> 赞同：0
> 
> 时间：2013-04-06T10:25:25.820
> 
> 标签：vb.net, rest, asynchronous, windows-phone-8, windows-phone

有人知道我如何在 VB.Net 中为 Windows Phone 8 执行异步发布请求吗？

我尝试了很多，但没有任何效果......这个[http://msdn.microsoft.com/de-de/library/system.net.httpwebrequest.begingetrequeststream.aspx](http://msdn.microsoft.com/de-de/library/system.net.httpwebrequest.begingetrequeststream.aspx)也没有工作。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T23:32:02.403

不久前，我不得不自己弄清楚这一点。让我看看我能做些什么来提供帮助。

发布网络请求实际上比链接显示的要简单。这就是我所做的。

首先，我创建一个 MultipartFormDataContent：

```
Dim form as New MultipartFormDataContent() 
```

接下来，我添加每个要发送的字符串，如下所示：

```
form.Add(New StringContent("String to sent"), "name of the string you are sending") 
```

接下来，创建一个 HttpClient：

```
Dim httpClient as HttpClient = new HttpClient() 
```

接下来，我们将创建一个 HttpResponseMessage 并将您的信息发布到您选择的 url：

```
Dim response as HttpResponseMessage = Await httpClient.PostAsync("www.yoururl.com/wherever", form) 
```

然后，我通常需要将响应作为字符串，所以我读取了对字符串的响应：

```
Dim responseString as String = Await response.Content.ReadAsStringAsync() 
```

如果那是您想要的，这将为您提供所需的响应。

这是我使用的方法的示例：

```
Public Async Function GetItems() As Task
    Dim getUrl As String = "https://myapiurl.com/v3/get"
    Dim responseText As String = String.Empty
    Dim detailType As String = "complete"
    Try
        Dim httpClient As HttpClient = New HttpClient()
        Dim form As New MultipartFormDataContent()
        form.Add(New StringContent(roamingSettings.Values("ConsumerKey").ToString()), "consumer_key")
        form.Add(New StringContent(roamingSettings.Values("access_token").ToString()), "access_token")
        form.Add(New StringContent(detailType.ToString()), "detailType")
        Dim response As HttpResponseMessage = Await httpClient.PostAsync(getUrl, form)
        responseText = Await response.Content.ReadAsStringAsync()
    Catch ex As Exception

    End Try

End Function 
```

如果您不使用 Http 客户端库，则需要像这样安装它们：使用 HttpClient 需要做的是在 Visual Studio 中导航，转到 Tools->Library Package Manager->Manage Nuget Packages for这个解决方案。在那里，搜索 HttpClient 的在线部分，并确保在结果上方的列表框中选择了“包含预发布”。（默认设置为“Stable Only”）然后安装ID为Microsoft.Net.Http的包

然后，您需要在使用它的文档的开头添加一个 Import 语句。

让我知道这是否是您想要的。

谢谢， SonofNun

# html - 捕获高分辨率视频/图像 html5

> ID：15849724
> 
> 赞同：13
> 
> 时间：2013-04-06T10:26:05.120
> 
> 标签：html, webcam, getusermedia

我使用 geUserMedia() 从网络摄像头[Intro](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)捕获图像。

我得到的最佳分辨率是**640 X 480**，但我有高清网络摄像头，可以录制**1280 X 720**的视频，拍摄**2592 X 1944**的照片。

如何拍摄高分辨率照片？

这是一个代码示例。它不关心画布大小：

```
<video autoplay id="vid" style="display:none;"></video>
<canvas id="canvas" width="1280" height="720" style="border:1px solid #d3d3d3;"></canvas><br>
<button onclick="snapshot()">Take Picture</button>

<script type="text/javascript">
    var video = document.querySelector("#vid");
    var canvas = document.querySelector('#canvas');
    var ctx = canvas.getContext('2d');
    var localMediaStream = null;

    var onCameraFail = function (e) {
        console.log('Camera did not work.', e);
    };

    function snapshot() {
        if (localMediaStream) {
            ctx.drawImage(video, 0, 0);
        }
    }

    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
    window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia({video:true}, function (stream) {
        video.src = window.URL.createObjectURL(stream);
        localMediaStream = stream;
    }, onCameraFail);

</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-18T21:48:01.067

[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

=> 设置媒体约束（分辨率、高度、宽度）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T19:14:51.963

据我所知，WebRTC 目前仅限于 640x480，无论您拥有什么相机。希望这会很快改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T06:27:55.617

对于像我这样发现自己在这里的任何人，[http://webrtchacks.com/video-constraints-2/](http://webrtchacks.com/video-constraints-2/)上有一个有用的更新。

查看原始问题，请注意，据我了解，使用 WebRTC 拍摄静态照片实际上是从视频源中提取静止帧，因此您将始终受到设备视频分辨率的限制，即使它能够捕捉更高分辨率的静止图像本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-06T03:30:37.113

我使用以下约束来设置一系列分辨率，但快照似乎与视频大小有关

```
var constraints = {
      audio: {deviceId: undefined},
      video: {
           deviceId: vid ? {exact: vid} : undefined
         , width: { min: 1280, max: 1560 }
         , height: { min: 720, max: 1440 }
      }
   };

navigator.mediaDevices.getUserMedia(constraints).then(gotStream).catch(handleError) 
```

# c++ - 指向函数 c++ 的指针

> ID：15849725
> 
> 赞同：3
> 
> 时间：2013-04-06T10:26:21.183
> 
> 标签：c++

伙计们！我正在尝试这样做：

```
int (*filterFunc)(Medicine* criteria, Medicine*);
DynamicVector<Medicine>* filter2(Medicine* criteria, filterFunc f); //error 
```

但我收到一个错误：“filterFunc”不是一种类型

我正在尝试这样做，因为我想要一个通用过滤器，所以我可以这样做：

```
int filterPrice(Pet* pet) {
    if (pet->price > 10 && pet->price < 100) {
        return 0;
    }
    return 1;
}

VectorDinamic* filter2(Pet* criteria, filterFunc f) {
    VectorDinamic* v = getAll(ctr->repo);
    VectorDinamic* rez = creazaVectorDinamic();
    int nrElems = getNrElemente(v);
    int i;
    for (i = 0; i < nrElems; i++) {
        Pet* pet = get(v, i);
        if (!f(criteria, pet)) {
            add(rez, copyPet(pet));
        }
    }
    return rez;
}

VectorDinamic* filterByPrice(float price) {
    Pet* criteria = createPet(1, "", "", price);
    VectorDinamic* rez = filter2(ctr, criteria, filterByPriceGr);
    destroyPet(criteria);
    return rez;
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T10:27:46.737

您忘记了`typedef`, 来声明类型。否则，这个声明只会创建一个类型为 的变量`int(*)(Medicine*,Medicine*)`。

```
 typedef int (*filterFunc)(Medicine* criteria, Medicine*);
//^^^^^^^ 
```

# jquery - 如果我在框 1 中选择选项，如何隐藏选择框 2？

> ID：15849727
> 
> 赞同：0
> 
> 时间：2013-04-06T10:27:01.880
> 
> 标签：jquery, show-hide, html-select

我需要帮助！我想通过更改选择框 1 来隐藏第二个选择框。

如果我`value 1`在选择 1 上选择，选择框 2 是隐藏的。如果我选择`value 2`，则显示选择框 2。

```
<tr class="variantCombobox">
<td class="label Flasche" valign="top">Flasche:</td>
<td>
<select id="variants[1]" name="variants[1]">
<option selected="selected" value="1">Esmeralda 100ml</option>
<option value="16">Esmeralda Geschenke-Set</option>
<option value="2">Picasso 200ml</option>
<option value="17">Picasso Geschenke-Set</option>
<option value="3">Carree 200ml</option>
</select>
</td>
</tr>
<tr class="variantCombobox">
<td class="label Gläser" valign="top">Gläser:</td>
<td>
<select id="variants[3]" name="variants[3]">
<option selected="selected" value="18">Bitte wählen...</option>
<option value="19">Likörglas 1</option>
<option value="20">Likörglas 2</option>
</select>
</td>
</tr>

var selectGlasses = 'tr.variantCombobox td.Flasche';
var selectedPresent = jQuery("[value='1']");
jQuery(selectGlasses).parent().next().hide();
jQuery('select').click(function(){
jQuery('option').find(function(){if ('select').contains(selectedPresent)});
jQuery(selectGlasses).parent().next().hide();
}); 
```

我的 3 个问题是，我的英语非常糟糕，我无法更改选择框的类别或 id，并且我的脚本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:33:17.480

```
selectedVal=$('#variants[1] option:selected').val();

if(selectedVal==1)
$('#variants[3]').hide();

else if(selectedVal==2)
$('#variants[3]').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:45:08.940

实际上，您必须转义元素的 id：

如果是：

```
id="variants[3]" 
```

那么jQuery选择器将是：

```
jQuery("#variants\\[3\\]") 
```

这是一个 jsFiddle 示例：http: [//jsfiddle.net/Kj2rM/](http://jsfiddle.net/Kj2rM/)

```
$(function() {
var selectGlasses = 'tr.variantCombobox td.Flasche';
var selectedPresent = jQuery("[value='1']");
jQuery(selectGlasses).parent().next().hide();
jQuery('select:first').change(function() {
    var selectedVal=jQuery(this).val();
    if(selectedVal==1) {
        $('#variants\\[3\\]').closest("tr").hide();
    }
    else if(selectedVal==2) {
        $('#variants\\[3\\]').closest("tr").show();
    }
});                                     
}); 
```

# ios - 从一个视图控制器到另一个视图控制器时，屏幕没有更新

> ID：15849732
> 
> 赞同：0
> 
> 时间：2013-04-06T10:27:29.450
> 
> 标签：ios, objective-c, segue

我有一个视图控制器（让我们称之为`AViewController`），它有一个背景图像、按钮等。我还有第二个视图控制器（让我们称之为`BViewController`），它有自己的一组按钮。*当我从一个视图控制器转换到另一个视图控制器时，背景图像与第一个视图控制器的 UI 元素一起显示在第二个视图控制器中。*我正在使用segue。我以前遇到过问题。我所做的纠正它是将视图的背景颜色从白色更改为清晰的颜色。但在这种情况下它似乎不起作用。（BViewController 包含用户可以在其中绘制的 UIView。）

# php - 增加 SESSION 数量 PHP

> ID：15849733
> 
> 赞同：0
> 
> 时间：2013-04-06T10:27:30.073
> 
> 标签：php, arrays, session, increment

我正在使用会话来填充一个简单的购物车，但是，`itemAmount`如果.`item_id``session['cart']`

我一直试图在这里增加：`$itemAmount = $eachItem['itemAmount'];`但是，不能让它工作。

这就是我目前所拥有的；

***更新;*** 具有更好命名的代码，我仍然需要帮助来增加cart_item_amount，目前它每次都会创建一个新项目而不是增加cart_item_amount。

```
<?php
if (!isset($_SESSION)) {
  session_start();
}
// create the cart session
if(!isset($_SESSION['cart'])) {
    $_SESSION['cart'] = array();
}
?>
<?php
// if all posts are fine
if(isset($_POST['item_id'])) {

    // set post values
    $post_item_id = $_POST['item_id'];
    $post_item_name = $_POST['item_name'];
    $post_options = $_POST['item_options'];
    $post_item_extras = $_POST['item_extras'];

    // set initial item amount
    $item_total = 1;

    foreach($_SESSION['cart'] as $key => $value) {

        if($value['cart_item_id'] == $post_item_id) {

            $value['cart_item_amount']++;
            $item_total = $value['cart_item_amount'];

        }else{

        }
    }
    // if option selected
    if(isset($post_options)) {

        // split to get two separate values
        list($post_item_cost, $post_option_name) = explode("-", $post_options, 2);

    }

    // loop through extras          
    if(isset($post_item_extras)) {

        foreach($post_item_extras as $key => $value) {

            // split to get two separate values
            list($post_extra_cost, $post_extra_name) = explode("-", $value, 2);

            // create extras array
            $item_extras[] = array(
                'cart_extra_cost' => $post_extra_cost,
                'cart_extra_name' => $post_extra_name
            );

        }
    }

    // add each item to an array
    $cart_row = array(
        'cart_item_id' => $post_item_id,
        'cart_item_name' => $post_item_name,
        'cart_option_name' => $post_option_name,
        'cart_item_cost' => $post_item_cost,
        'cart_item_amount' => $item_total,
        // add the extras array
        'cart_item_extras' => $item_extras 
    );

        // add new row to the session Cart
        $_SESSION['cart'][] = $cart_row;
}
?>

Array
(
    [cart] => Array
        (
            [0] => Array
                (
                    [cart_item_id] => 76
                    [cart_item_name] => Cheese Burger
                    [cart_option_name] => Small
                    [cart_item_cost] => 1.00
                    [cart_item_amount] => 1
                    [cart_item_extras] => 
                )

            [1] => Array
                (
                    [cart_item_id] => 76
                    [cart_item_name] => Cheese Burger
                    [cart_option_name] => Small
                    [cart_item_cost] => 1.00
                    [cart_item_amount] => 2
                    [cart_item_extras] => 
                )

            [2] => Array
                (
                    [cart_item_id] => 76
                    [cart_item_name] => Cheese Burger
                    [cart_option_name] => Small
                    [cart_item_cost] => 1.00
                    [cart_item_amount] => 3
                    [cart_item_extras] => 
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:40:53.877

```
if($eachItem['itemID'] = $_POST['item_id']) { 
```

= 不是比较运算符，请参阅 [http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

应该

```
if($eachItem['itemID'] == $_POST['item_id']) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:06:01.930

简单地使用它就可以了；

```
foreach($_SESSION['cart'] as $key => $value) {

    if($value['cart_item_id'] == $post_item_id) {

         $_SESSION['cart'][$key]['cart_item_amount']++;

         return false;

} 
```

# cakephp - 在非对象上调用成员函数 getEmbedHtml()

> ID：15849734
> 
> 赞同：-1
> 
> 时间：2013-04-06T10:27:31.163
> 
> 标签：cakephp, vimeo

我正在将 Vimeo Player 与我的 cakephp 应用程序集成，它给了我上述错误

```
 Error: Call to a member function getEmbedHtml() on a non-object
 File: C:\wamp\www\ann\app\View\Videos\index.ctp
 Line: 1 
```

这是我的第一行

```
 <?php echo $vimeo->getEmbedHtml('https://www.vimeo.com/44633289', array()); ?> 
```

此链接有效[https://www.vimeo.com/44633289](https://www.vimeo.com/44633289)

这是`Vimeohelper.php`文件

```
<?php 
class VimeoHelper extends AppHelper 
{ 
    /** 
     * Creates Vimeo Embed Code from a given Vimeo Video. 
     * 
     *    @param String $vimeo_id URL or ID of Video on Vimeo.com 
     *    @param Array $usr_options VimeoHelper Options Array (see below) 
     *    @return String HTML output. 
    */ 
    function getEmbedCode($vimeo_id, $usr_options = array()) 
    { 
        // Default options. 
        $options = array 
        ( 
            'width' => 400, 
            'height' => 225, 
            'show_title' => 1, 
            'show_byline' => 1, 
            'show_portrait' => 0, 
            'color' => '00adef', 
        ); 
        $options = array_merge($options, $usr_options); 

        // Extract Vimeo.id from URL. 
        if (substr($vimeo_id, 0, 21) == 'http://www.vimeo.com/') { 
            $vimeo_id = substr($vimeo_id, 21); 
        } 

        $output = array(); 
        $output[] = sprintf('<object width="%s" height="%s">', $options['width'], $options['height']); 
        $output[] = ' <param name="allowfullscreen" value="true" />'; 
        $output[] =    ' <param name="allowscriptaccess" value="always" />'; 
        $output[] =    sprintf(' <param name="movie" value="http://www.vimeo.com/moogaloop.swf?clip_id=%s&server=www.vimeo.com&show_title=%s&show_byline=%s&show_portrait=%s&color=%s&fullscreen=1" />', $vimeo_id, $options['show_title'], $options['show_byline'], $options['show_portrait'], $options['color']);
        $output[] = sprintf(' <embed src="http://www.vimeo.com/moogaloop.swf?clip_id=%s&server=www.vimeo.com&show_title=%s&show_byline=%s&show_portrait=%s&color=%s&fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="%s" height="%s"></embed>', $vimeo_id, $options['show_title'], $options['show_byline'], $options['show_portrait'], $options['color'], $options['width'], $options['height']);
        $output[] = '</object>'; 

        return $this->output(implode($output, "\n")); 
    } 
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:54:43.067

该错误会告诉您您需要知道的一切。您没有正确访问帮助程序。

a）您需要将其包含在您的控制器中`public $helpers`

b）您需要使用`$this-Vimeo`正确的方法名称正确调用它（您不能只是发明自己的名称，因为该方法需要存在！）：

```
<?php echo $this-Vimeo->getEmbedCode(...); ?> 
```

您的代码片段`$vimeo->`适用于完全过时的 cake1.2（不适用于 cake1.3 或 cake2.x）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:30:42.563

您能否提供有关如何初始化 $vimeo 的更多信息？

很可能 $vimeo 初始化不正确，当您在此处访问它时设置为 null。希望这对您的调试有所帮助。

而且看起来 VimeoHelper 中的 getEmbedCode 函数是您想要使用的，而不是 getEmbedHtml。

考虑将函数定义更改为

```
static function getEmbedCode($vimeo_id, $usr_options = array()) 
```

然后您可以稍后通过调用获取嵌入的 url：

```
VimeoHelper::getEmbedCode('https://www.vimeo.com/44633289', array()) 
```

# javascript - 将 xml 文件数据保存在 javascript 变量中

> ID：15849739
> 
> 赞同：0
> 
> 时间：2013-04-06T10:27:54.740
> 
> 标签：javascript, xml, xml-parsing, youtube

我搜索了我的问题，发现了很多我已经使用过的有用的东西。

这是计划：我想将 xml 文件中的数据加载到 javascript 变量中。读取 xml 数据的 DOMParser 函数将其推送到数组中，因此我可以稍后从数组中获取随机元素。

要了解我想要做什么：我想加载随机的 youtube 视频。视频的链接/结尾存储在 xml 文件中，如“d_HvwKtsy_Q”。视频结束后，它应该立即开始下一个。我已经想出了如何在 YT api 中执行此操作。我只需要将 xml 文件加载到变量中，这样我就可以在 extern xml 文件中对其进行编辑。

这是我到目前为止所得到的：

```
// This is my "xml file", but i want to have it in a extern file, so the variable      
stores the extern xml file data like "externXMLfile.xml"

var xml_string ='<answers><answer id="0">o6f9wJ1DWhY</answer><answer    id="1">72Y7M3_NlfI</answer></answers>'

function get_answers_from_xml_string(xml_string) {
// Parse the XML string into a XMLDocument
var doc = window.DOMParser
            ? new DOMParser().parseFromString(xml_string, 'text/xml')    // Standard
            : new ActiveXObject('Microsoft.XMLDOM').loadXML(xml_string); // IE

// Find the answer nodes
var answers_nodes = doc.getElementsByTagName('answer');
var answers = [];

// Loop through them and save their text content into an array
for (var i = 0; i < answers_nodes.length; i++) {
    answers.push(answers_nodes[i].firstChild.data)
}

return answers;
}

//Save the xml elements in an array called answers
var answers = get_answers_from_xml_string(xml_string);

//This is the youtube api stuff, which works fine
    // create youtube player
    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'd_HvwKtsy_Q',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange,

          },
          playerVars: {

                    'controls': 0,
                    'showinfo': 0,
                    'iv_load_policy': 3,
                },
        });
    }

//this function loads a new random video id after the video stops from the array, which stores the xml elements

function getMessage() {
return answers[Math.floor(Math.random() * answers.length)];
}

    function swapVideo() {     
player.stopVideo();
player.loadVideoById(getMessage());

}
// autoplay video
    function onPlayerReady(event) {
        event.target.playVideo();
    }

// when video ends
    function onPlayerStateChange(event) {        
        if(event.data === 0) {          
           swapVideo();
        }
    } 
```

我希望你能理解我的问题我想我几乎想出了一切，除了将 xml_string 变量与 extern xml 文件连接起来

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:48:10.787

像这样的东西可以帮助你

```
 System.IO.StreamReader file = new System.IO.StreamReader(@"c:\YourXML.xml");
    string test = file.ReadToEnd(); 
```

您也可以参考 this [如何将此 XML 保存到 C# 字符串变量？](https://stackoverflow.com/questions/5149730/how-can-i-save-the-this-xml-to-a-c-sharp-string-variable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:05:53.360

终于想通了！感谢 Darshan 提供正确的链接。

[https://stackoverflow.com/a/8680038/1870659](https://stackoverflow.com/a/8680038/1870659)

```
var jqxhr = $.ajax({
type: 'POST',       
url: "freeakshow.xml",
dataType: 'xml',
global: false,
async:false,
success: function(data) {
    return data;
}
}).responseText;

xml_string = jqxhr; 
```

# javascript - 浏览器调整大小的 JavaScript

> ID：15849741
> 
> 赞同：4
> 
> 时间：2013-04-06T10:28:19.017
> 
> 标签：javascript, jquery, css

我在一个页面上有 2 个元素，一个标题和内容区域供人们输入文本。

内容高度是使用 JavaScript 确定的：

```
$('#body').css('min-height', $(window).height() - $('#title').height() - 220); 
```

有没有办法让我在调整窗口大小时，#body 改变它的高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:32:08.200

是的，有可能 - 只需`resize`像这样添加事件处理程序：

```
$(window).resize(function() {
    $('#body').css('min-height', $(window).height() - $('#title').height() - 220);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:15:38.283

试试这个[**演示**](http://jsfiddle.net/subodhghulaxe/bHQV5/2/)

根据需要更改重新调整大小的代码

```
$(window).bind('resize', function () { 
    $('#body').css('min-height', $(window).height() - $('#title').height());
}); 
```

# javascript - 将函数“document.getElementById”更改为“document.getElementsByClassName”并添加淡入/淡出 - JavaScript

> ID：15849748
> 
> 赞同：1
> 
> 时间：2013-04-06T10:29:40.207
> 
> 标签：javascript, jquery, css, fadein, fadeout

我对 JavaScript 的了解非常有限，我希望有人能够帮助我！

我有下面的代码，我试图使代码与 class 而不是 id 一起工作，并在这些函数上添加淡入/淡出效果。我添加了一个类和 id 集，以尽可能清楚地说明我想要做什么。

```
<!DOCTYPE html>
<html>
  <head>
    <style>  
        .sub1, .sub2 {
        float: right;
        background-color: blue;
        width: 250px;
        height: 250px;
        display: none;
        }

        #sub1, #sub2 {
        float: right;
        background-color: red;
        width: 250px;
        height: 250px;
        display: none;
        }

    </style>
    <script language="javascript" type="text/javascript">
    // class
        function SetTabsHidden(tabToHide)
        {
         document.getElementsByClassName('.sub1').style.display = "none";
         document.getElementsByClassName('.sub2').style.display = "none";

        }

        function SetTabsVisible(tabToShow)
        {
         document.getElementsByClassName('.sub1').style.display = "none";
         document.getElementsByClassName('.sub2').style.display = "none";

         document.getElementsByClassName(tabToShow).style.display = "block";

        }

    // id
        function SetTabsHidden(tabToHide)
        {
         document.getElementById('sub1').style.display = "none";
         document.getElementById('sub2').style.display = "none";                         
         $(tabToHide).fadeOut("slow");
        }

        function SetTabsVisible(tabToShow)
        {
         elements = document.getElementById('sub1').style.display = "none";
         elements = document.getElementById('sub2').style.display = "none";

         elements = document.getElementById(tabToShow).style.display = "block";
         $(tabToShow).fadeIn("slow");

        }   

    </script>

  </head>
  <body>
     <div id="main">
    <input type=button name=type value='class1' onclick="SetTabsVisible('.sub1');";>
    <input type=button name=type value='class2' onclick="SetTabsVisible('.sub2');";>
    <input type=button name=type value='id1' onclick="SetTabsVisible('sub1');";>
    <input type=button name=type value='id2' onclick="SetTabsVisible('sub2');";>

    <input type=button name=type value='Hide' onclick="SetTabsHidden();";>

    <div class="sub1" id="sub1"></div>

    <div class="sub2" id="sub2"></div>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:36:46.037

您`getElementsByClassName`将无法使用，因为您不想在类名之前包含句点（您会注意到 byID 不包含＃。同样的想法）只需将其更改为 sub1 或 sub2 或其他任何内容，它就应该开始工作了.

您定义了四个函数，但它们具有相同的名称，这是行不通的。

您必须将它们命名为不同的名称，例如“SetTabsVisibleByClass” ....或者您只能使用两个函数，但传入另一个参数，让它知道您希望它使用的是类还是 id。

* * *

您的示例代码使用 jQuery 进行淡入淡出。如果您打算使用 jQuery，则不需要所有额外的逻辑。它可以为您处理：

`$(".sub1, .sub2").hide()`

或者，如果它们都包含在一起，您可以这样做：

`$(tabToShow).siblings().hide()`

然后你不必记住所有不同的类名。

* * *

如果您不打算使用 jQuery，那么对于褪色，您还可以使用 CSS 过渡。就像是：

```
.sub1, .sub2, .sub3 {
    opacity: 0;
}

.sub1.active, .sub2.active, .sub3.active {
  opacity: 1;
 -webkit-transition: opacity 1s linear;
  -moz-transition: opacity 1s linear;
  -ms-transition: opacity 1s linear;
  -o-transition: opacity 1s linear;
  transition: opacity 1s linear;
} 
```

安南德

`document.getElementById(tabToShow).setAttribute("class", "active")`

当然，这种方法意味着不使用`display: none`，这可能对您很重要。在这种情况下，您可能需要添加[事件侦听](https://stackoverflow.com/questions/2794148/css3-transition-events)器`transitionEnd`以了解何时添加 display: none。

# wpf - 活动设计器库中的共享 WPF 资源

> ID：15849757
> 
> 赞同：1
> 
> 时间：2013-04-06T10:30:04.320
> 
> 标签：wpf, workflow-foundation-4, resourcedictionary, activitydesigner

我正在开发一堆自定义活动设计器，其中包含自定义控件、图像、样式等。设计器 XAML 分布在库项目中的多个子目录中（**不是**WPF 应用程序，因此没有可用的 app.xaml）

我需要一个存储资源的中心位置，就像常规 WPF 应用程序中的 app.xaml 一样。

目前我使用这样的*projectdir* \Properties\lib.xaml 文件：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

<ControlTemplate x:Key="TrafficLight">
 ...
</ControlTemplate>
</ResourceDictionary> 
```

并从我的所有设计器 XAML 中引用它，如下所示：

```
<sap:ActivityDesigner.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/ActDesLib;component/Properties/lib.xaml" />
        </ResourceDictionary.MergedDictionaries> 
```

其中*ActDesLib*是我的程序集的名称。

这确实有效，但看起来有点笨拙。有更好的方法吗？

是否有一些类似于 app.xaml 的“神奇”文件会自动包含在库项目中，而无需向各个 XAML 文件添加任何特殊标记？即使有多个开发人员为不同的设计师工作，这也将使实施一致的风格变得更加容易。

**顺便说一句：**我尝试在 Source=".​​.." 属性中使用相对路径。在 VS2010 的工作流中使用我的活动时，这不起作用，然后找不到资源。使用包含程序集名称的绝对路径，它可以正常工作。但是，VS2010 或重新托管的设计器是否无法自动找到资源字典文件的路径，而我的 XAML 中只有相对引用？

# vb.net - Gecko:登录网站

> ID：15849768
> 
> 赞同：0
> 
> 时间：2013-04-06T10:31:10.263
> 
> 标签：vb.net, gecko

我是网络浏览器控件 geckoFx 的新手。我想使用它登录网页。那么我该如何在 vb.net 中做到这一点

我尝试使用导航方法导航到网页。

```
InitializeComponent()
Xpcom.Initialize("D:\xulrunner")
myBrowser = New GeckoWebBrowser()
myBrowser.Parent = Me
myBrowser.Dock = DockStyle.Fill
myBrowser.Navigate("www.google.com") 
```

但是我怎样才能登录到网站？我试着寻找一些使用壁虎的例子。但我没有得到。那么我在哪里可以获得与使用壁虎相关的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:35:14.040

有许多不同的方法可以做到这一点。导航到页面并完成加载后：

1.  执行一些 javascript 来填写字段并单击提交按钮。

[C# javascript 执行示例](https://bitbucket.org/geckofx/geckofx-18.0/src/ecc807f364a8d23bae9dd9908b35ebbada5aa279/GeckofxUnitTests/GeckoWebBrowserTests.cs?at=default)

1.  使用 C#（或 vb.net）获取所需的 DOM 字段，使用所需的值对其进行修改，然后获取 DOM 提交按钮并调用 click api。

[GetElementById 示例](https://bitbucket.org/geckofx/geckofx-18.0/src/ecc807f364a8d23bae9dd9908b35ebbada5aa279/GeckofxUnitTests/GeckoDocumentTests.cs?at=default)

[具有点击方法的 GeckoInputElement 类](https://bitbucket.org/geckofx/geckofx-18.0/src/ecc807f364a8d23bae9dd9908b35ebbada5aa279/Geckofx-Core/DOM/Html/HTMLInputElement.cs?at=default)

# google-app-engine - 将 GAE SDK 更新到 1.7.6

> ID：15849771
> 
> 赞同：1
> 
> 时间：2013-04-06T10:31:28.957
> 
> 标签：google-app-engine

我有一个在 GAE SDK 1.7.5 中创建和工作的小项目，现在我想更新到 1.7.6 版本，但是我已经阅读了几篇报告更新后出现问题的帖子，例如数据丢失等。 .所以我的问题是：更新真的安全吗？它值得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:23:27.917

1.7.6 是在生产中运行的。您唯一可能丢失的数据是本地测试数据。如果您运行 1.7.6 中包含的 old_dev_appserver.py，那么您将运行与 1.7.5 相同的服务器，并且除非您清除 dev 数据存储，否则通常不会丢失该测试数据。我只能从python的角度说话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:15:23.663

当我从 1.7.5 升级到 1.7.6（在 GAE Java 版本中）时，我丢失了所有本地测试数据。

# java - 安卓。以编程方式添加控件

> ID：15849772
> 
> 赞同：1
> 
> 时间：2013-04-06T10:31:31.077
> 
> 标签：java, android, android-fragments, android-inflate

我有带有控件的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/contact_phones_layout_row"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <EditText
        android:id="@+id/contact_phone"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="3"
        android:inputType="phone" />

    <Spinner
        android:id="@+id/contact_phone_type"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

我想将它膨胀到片段上的另一个布局中。这些控件的数量取决于数组中的值。数组包含控件对象。所以每次 onCreateView 上升时，我都会从数组中填充布局：

```
private void addLine(PhoneLine line) {
        LinearLayout layout = (LinearLayout) mLayout.findViewById(R.id.contact_phones_layout);
        View view = line.getParent();
        ((ViewGroup) view.getParent()).removeView(view);
        layout.addView(view, layout.getChildCount() - 1);
        setButtonVisible(false);
    } 
```

如果 line 为 null 控件以这种方式创建：

```
private void addLine() {
        LinearLayout layout = (LinearLayout) mLayout.findViewById(R.id.contact_phones_layout);
        View view = inflater.inflate(R.layout.contact_phone_line, layout, false);
        EditText phoneEditText = (EditText) view.findViewById(R.id.contact_phone);
        Spinner phoneType = (Spinner) view.findViewById(R.id.contact_phone_type);
        phoneLines.add(new PhoneLine(phoneEditText, phoneType, view));
        layout.addView(view, layout.getChildCount() - 1);
    } 
```

但在那之后，我在所有 EditText/Spinner 控件中得到相同的值，这些值等于数组中的最后一个元素。有什么问题？可能有更纯粹的方式来动态添加控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:09:18.623

我通过在 onResume 上升时添加控件来修复它，而不是 onCreateView。但我仍然不明白为什么 onCreateView 会更改所有值。

# javascript - JavaScript 按唯一性对数组进行排序

> ID：15849774
> 
> 赞同：0
> 
> 时间：2013-04-06T10:31:38.160
> 
> 标签：javascript

我有一系列项目。例如：

```
var classes = ['link', 'block', 'hide', 'link', 'menu', 'block', 'content', 'link', 'footer', 'img', 'img', 'link', 'modal', 'button', 'form', 'input', 'button', 'input', 'link', 'toString', 'valueOf', 'button']; 
```

我需要得到一组独特的项目，按频率排序：

`'link'`item 应该放在第一位，因为数组包含它 5 次。

`'button'`item 应该排在第二位，因为数组包含它 3 次。

ETC

```
["link", "button", "input", "img", "block", "footer", "content", "modal", "menu", "form", "hide", "toString", "valueOf"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:35:07.757

您可以使用 ECMAScript 5 方法轻松获得它：

```
var classes = ['link', 'block', 'hide', 'link', 'menu', 'block', 'content', 'link', 'footer', 'img', 'img', 'link', 'modal', 'button', 'form', 'input', 'button', 'input', 'link', 'toString', 'valueOf', 'button'];

var frequency = classes.reduce(function(data, item) {
    data[item] = -~data[item];
    return data;
}, {});

var uniques = Object.keys(frequency).sort(function(a, b) {
    return frequency[b] - frequency[a];
});

console.log(uniques); 
```

如果您必须支持旧浏览器，您仍然可以使用[shims](https://github.com/kriskowal/es5-shim)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:44:44.633

两步：

1.  `{'item', 'frequency'}`将您的数据排列在一对数组中
2.  使用[array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)函数：

    ```
    var arr = [{'item':'link', 'freq':4},{'item':'button', 'freq':2},{'item':'div', 'freq':5}];

    arr.sort(function(a,b){return b.freq - a.freq}); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T10:51:24.063

[Underscore.js](http://underscorejs.org/)解决方案：

```
var dict = _.reduce(classes, function(memo, class) {
    memo[class] = memo[class] ? memo[class] + 1 : 1
}, {});

var pairs = _.pairs(dict);

var sortedPairs = _.sort(pairs, function(pair) {
    return pair[1];
});

var result = _.map(sortedPairs, function(pair) {
    return pair[0];
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T11:10:56.780

它应该是这样的。

```
 var classes = [ 'link', 'block', 'hide',
                    'link', 'menu', 'block',
                    'content', 'link', 'footer',
                    'img', 'img', 'link', 'modal',
                    'button', 'form', 'input',
                    'button', 'input', 'link',
                    'toString', 'valueOf', 'button'];
    var counter;
    var i=0,z=0,x=0;
    var bool = false;
    while(!bool){
        for(j=1;j<classes.length;j++)
        {
            if(( classes[i] == -1) || (classes[j] == -1))
            {
                i++;j++;
            }
            else if(classes[i] === classes[j])
            {
                classes[j] = -1;
                counter = z + "," + (Number(x)+1);
            }
            x++;
        }
        i++;
        z++;
        if((classes.length-1) == i)
        {
            bool = true;
        }
    } 
```

> **在 End 计数计数器中的第二个变量 (z , "x") 所以在每个**
> **实例 Z 出现将是 x**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-06T11:14:53.600

试试[这个](http://jsfiddle.net/7hmQr/)，

```
var xArray= ["apple","cake","pie","pie","pie","apple"];
var xNew=[];
var temp;

for(var i=0;i<=xArray.length-1;i++)
{
   if( xNew.indexOf(xArray[i]) === -1 )
   {
   xNew.push(xArray[i])    
   }
}

function occuranceOf(xStr)
{
    var xCount =0;
    for(var i=0; i<=xArray.length-1; i++)
    {
        if(xArray[i] === xStr)
            {
        xCount += 1;        
            }                 
    }

    return xCount;
}

for(var i=0;i<=xNew.length-1;i++)
{
    for(var j=i+1; j<=xNew.length-1; j++)
    {
        if(occuranceOf(xNew[i]) < occuranceOf(xNew[j]))
        {
            temp = xNew[i];
            xNew[i] = xNew[j];
            xNew[j] = temp;
        }
    }
}

alert(xNew); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-06T11:15:35.443

怎么样：

```
var classes = ['link', 'block', 'hide', 'link', 'menu', 'block', 'content', 'link', 'footer', 'img', 'img', 'link', 'modal', 'button', 'form', 'input', 'button', 'input', 'link', 'toString', 'valueOf', 'button'],
    frequency = {},
    sortedClasses = [],
    result = [];

for (var i in classes) {
    var name = 'z' + classes[i];
    frequency[name] = frequency[name] ? frequency[name] + 1 : 1;
}

for (var j in frequency) {
    sortedClasses.push([j, frequency[j]]); 
}

sortedClasses.sort(function (a, b) {
    return b[1] - a[1]; 
});

for (var g in sortedClasses) {
    var name = sortedClasses[g][0].substr(1);
    result.push(name);
} 
```

我在类前面加上“z”，因为它们的名字，例如。“的价值”

# php - 使用 cPanel 运行 CentOS 的 VPS 服务器上的 PHP CLI“内存不足”错误

> ID：15849775
> 
> 赞同：10
> 
> 时间：2013-04-06T10:31:41.940
> 
> 标签：php, symfony, centos, command-line-interface, cpanel

我在使用 cPanel 运行 CentOS 的托管虚拟服务器上运行 Symfony2.1。一切运行良好，只是我不能再使用 Symfony CLI 命令。我得到这个：

```
Fatal error: Out of memory (allocated 20185088) (tried to allocate 71 bytes) 
```

错误（例如，当我尝试运行`php app/console cache:clear --env=prod`或其他有用的 Symfony 命令时）。

几个月前，我通过 CLI 使用相同的命令没有任何问题，直到几天前出现此错误。从那以后，我一直无法克服这个错误。

我想指出，这不是与 PHP memory_limit 相关的错误（见下文），是“内存不足”错误，而不是“分配的内存大小”错误。

当添加到 cron 作业时，完全相同的命令可以完美运行（这是我现在使用的临时解决方法），这意味着脚本本身不应该受到指责。

# 到目前为止我试图做的事情：

*   **增加 php.ini 中的 memory_limit**（或直接在命令行上）：我怀疑我遇到的错误类型，这没有效果

*   **搜索**可能覆盖 CLI 的此设置的任何其他 php.ini 文件：没有

*   **使用 free -m监控内存使用情况**：有大量可用内存（这是意料之中的，因为 symfony 命令通过 cron 作业完美运行）

*   试图找出**WHM/cPanel 是否可能有**，例如通过更新，为用户帐户**设置任何内存限制**：我发现在使用被监禁的 SSH shell 时可能会出现这种情况（但事实是，我不是，我正在使用普通的 SSH shell），或者如果启用 Shell Fork Bomb 保护（但不，这在我的服务器上被禁用）

*   **使用 ulimit -a检查**我的服务器/帐户上的 ulimit 设置：有限制，但它们达到 256M，而我的“内存不足”错误表明 PHP CLI 似乎允许不超过 20M

*   检查 .conf 文件中某处是否有任何内存限制，尤其是在**/etc/security/limits.conf**中：没有

*   **检查任何其他可以设置这种内存限制的文件：这次我确实找到了一个，即 /usr/local/cpanel/etc/login_profile/limits.sh**似乎设置了这样的限制（ulimit -n 100 -u 35 -m 20000 -d 20000 -s 8192 -c 20000 -v unlimited 2>/dev/null) => 我想我终于找到了罪魁祸首，因为数字 (20000) 似乎对应，**但编辑这个文件为root 并通过 SSH 再次登录我的帐户再次没有效果**

# 我的问题 ：

我现在已经没有选择了。我联系了我的主人，但他们和我一样一无所知（实际上，他们甚至不知道 Symfony）。有没有人遇到过同样的问题？

如果有任何机会`/usr/local/cpanel/etc/login_profile/limits.sh`让我接近答案，我错过了什么？我是否需要重新启动服务器或重新启动 cPanel，而不仅仅是重新登录我的帐户？

附带说明一下，这是否可能与 WHM/cPanel 更新有关（如前所述，直到几天前，一切都在命令行上正常运行）？

感谢您的帮助，很抱歉这个冗长的问题。

PS：我在 Stack Overflow 上发现了其他类似的问题，但每个问题都是使用我已经尝试过的方法之一解决的。所以我想我遇到了一个不同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:25:08.240

事实证明，在不需要的 cPanel 更新后，我的 SSH 端口已从默认值更改，我无法登录。我以安全模式重新启动 SSH 以登录。

今天，凭直觉，我查看了 SSH 端口`/etc/ssh/sshd-config`，以“正常”模式重新启动 SSH，并使用正确的端口登录：脚本现在运行完美。

所以原因是在安全模式下使用SSH，就是这样。希望这个非常具体的问题对其他人有用：除非绝对需要，否则不要在日常使用中使用 SSH 安全模式。

# android - 辅助线程运行时无法单击 ImageView

> ID：15849776
> 
> 赞同：1
> 
> 时间：2013-04-06T10:31:44.880
> 
> 标签：android

我正在尝试在另一个线程运行时执行不可点击的 ImageView。然后当线程完成时，再次带回 ImageView 可点击。

像这样的东西：

```
@Override
protected void onCreate(Bundle savedInstanceState) {

   ...    
   imageView.setClickeable(false); // or setEnabled = false

   new Thread(){
      public void run(){
         anotherClass.secondClassMethod();
      }
   }.start();

   imageView.setOnTouchListener(new View.OnTouchListener() {            
      @Override
      public boolean onTouch(View v, MotionEvent event) {
         ...
      }
    });
}

private anotherClassCallback callback = new anotherClassCallback(){

   @Override
   public void hasFinished(){
      imageView.setClickable(true); // or setEnabled = true
   }
}; 
```

但它实际上不起作用，因为例如，如果我在线程运行时在 imageView 上单击 3 次，当 hasFinished 方法执行时，它看起来像是保持了我的 3 次单击，然后立即运行了 3 次 onTouch。

有人知道发生了什么吗？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:54:39.257

onTouch 和 onClick 不一样，所以当您设置 onClickable 时，仍然会触发假触摸事件。也许尝试在 setOnClickListener() 中做你正在做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:35:36.837

您应该使用 asynctask 而不是线程。正如下面的答案中提到的，您应该使用 setOnclickListener 而不是 setOntouchListener。

```
new AsyncTask<Void,Void,Void>(){
    onPreExectute(){
         imageView.setClickeable(false);
         imageView.setOnclickListener(null);
    }

    doInBackround(){

    }

    onPostExecute(){
         imageView.setClickeable(true);
         imageView.setOnclickListener(new OnclickListener(){
         onClick(View v){

         }
         });
    }

}.execute(); 
```

# java - 如何以编程方式知道服务器是否正在运行？

> ID：15849784
> 
> 赞同：1
> 
> 时间：2013-04-06T10:32:38.783
> 
> 标签：java, servlets, jboss

我刚刚建立了到本地主机的 url 连接：8080 并使用 JBOSS 服务器检查了 200-209 之间的 http 响应代码。

```
public class Welcome extends HttpServlet {

public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

response.setContentType("text/html");
 PrintWriter pw = response.getWriter();
URL url = new URL("http://localhost:8080");
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.setRequestMethod("GET");
connection.connect();

int code = connection.getResponseCode();
System.out.println("code=="+code);
if (code>=200 && code <= 209){

       pw.println("<h1>Welcome....</h1>");
       pw.println("<p>Service is accessable</p>");

    }
else 

{System.out.println("service is denied");}
    }} 
```

如果 HTTP 响应代码在 200-209 之外或无法建立连接，则必须执行以下步骤：

1）如果 Jboss Service 正在运行，则重新启动。

2）如果 Jboss Service 没有运行，则启动它。

现在在这里我想知道如何以编程方式知道服务器是否正在运行以执行上述两个步骤..请帮助我..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:38:51.160

您应该捕获发生超时（服务器根本没有运行）时上升的 IOException。

像这样的东西：

```
public class Welcome extends HttpServlet {

public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

response.setContentType("text/html");
 PrintWriter pw = response.getWriter();
URL url = new URL("http://localhost:8080");

try {
    HttpURLConnection connection = (HttpURLConnection)url.openConnection();
} catch (IOException ex) {
    // (probably) service is not running 
    // start service
    return;
}

connection.setRequestMethod("GET");
connection.connect();

int code = connection.getResponseCode();
System.out.println("code=="+code);
if (code>=200 && code <= 209){

       pw.println("<h1>Welcome....</h1>");
       pw.println("<p>Service is accessable</p>");

    }
else 

{System.out.println("service is denied");}
    }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:44:17.813

我认为这是已经讨论过的事情。您需要为此捕获异常。你可能想研究这样的[事情](https://stackoverflow.com/questions/285860/how-can-i-programmatically-test-an-http-connection)

# ruby-on-rails - Rails 模型通过两个多态has_many：对象标记的关联

> ID：15849786
> 
> 赞同：6
> 
> 时间：2013-04-06T10:32:41.993
> 
> 标签：ruby-on-rails, activerecord, has-many-through, polymorphic-associations, tagging

我的架构有`Articles`并且`Journals`可以用`Tags`. 这需要`has_many through:`与我的`Tagging`连接表的多态关系关联。

好的，这是简单且有据可查的部分。

我的问题是`Articles`可以同时拥有主标签和子标签。主要标签是我最感兴趣的，但我的模型还需要跟踪这些子标签。子标签只是描述`Article`不太重要的标签，但来自同一个全局池`Tags`。（事实上​​，一个`Article`人的主标签可能是另一个人的子标签）。

实现这一点需要`Article`模型有两个与`Tagging`模型的关联和两个`has_many through:`与`Tags`（即#tags & #sub-tags）的关联

这是我到目前为止所拥有的，虽然有效并没有将主标签和子标签分开。

```
class Article < ActiveRecord::Base
  has_many :taggings, as: :taggable
  has_many :tags, through: :taggings

  has_many :sub_taggings, as: :taggable, class_name: 'Tagging',
           source_type: 'article_sub'
  has_many :sub_tags, through: :sub_taggings, class_name: 'Tag', source: :tag
end

class Tagging < ActiveRecord::Base
  #  id            :integer
  #  taggable_id   :integer
  #  taggable_type :string(255)
  #  tag_id        :integer
  belongs_to :tag
  belongs_to :taggable, :polymorphic => true
end

class Tag < ActiveRecord::Base
  has_many :taggings
end 
```

我知道在那里的某个地方我需要找到正确的组合，`source`但`source_type`我无法解决。

为了完整起见，这是我`article_spec.rb`用来测试的——目前在“不正确的标签”上失败了。

```
describe "referencing tags" do
  before do
    @article.tags << Tag.find_or_create_by_name("test")
    @article.tags << Tag.find_or_create_by_name("abd")
    @article.sub_tags << Tag.find_or_create_by_name("test2")
    @article.sub_tags << Tag.find_or_create_by_name("abd")
  end

  describe "the correct tags" do
    its(:tags) { should include Tag.find_by_name("test") }
    its(:tags) { should include Tag.find_by_name("abd") }
    its(:sub_tags) { should include Tag.find_by_name("abd") }
    its(:sub_tags) { should include Tag.find_by_name("test2") }
  end

  describe "the incorrect tags" do
    its(:tags) { should_not include Tag.find_by_name("test2") }
    its(:sub_tags) { should_not include Tag.find_by_name("test") }
  end
end 
```

提前感谢您为实现这一目标提供的任何帮助。主要问题是我不知道如何告诉 Rails 用于文章中 sub_tags 关联的 source_type。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T00:49:11.223

嗯……又沉默了……？什么给了SO？你好...？布勒？

**不要害怕，这里是答案：**

在研究了[单表继承](http://www.alexreisner.com/code/single-table-inheritance-in-rails)（*不是*答案，而是其他稍微相关问题的有趣技术）之后，我偶然发现了一个关于对同一模型上的多态关联的多重引用的 SO 问题。（感谢 hakunin 的[详细回答](https://stackoverflow.com/a/3078286/59195)，+1。​​）

基本上我们需要显式定义表中`taggable_type`列的内容进行关联，而不是用or ，而是用。`Taggings``sub_taggings``source``source_type``:conditions`

下面显示的`Article`模型现在通过了所有测试：

```
 class Article < ActiveRecord::Base
   has_many :taggings, as: :taggable
   has_many :tags, through: :taggings, uniq: true, dependent: :destroy

   has_many :sub_taggings, as: :taggable, class_name: 'Tagging',
             conditions: {taggable_type: 'article_sub_tag'},
             dependent: :destroy
   has_many :sub_tags, through: :sub_taggings, class_name: 'Tag',
             source: :tag, uniq: true
 end 
```

**更新：**

这是`Tag`在标签上产生功能性反向多态关联的正确模型。反向关联（即 Tag.articles 和 Tag.sub_tagged_articles）通过测试。

```
 class Tag < ActiveRecord::Base
   has_many :articles, through: :taggings, source: :taggable,
             source_type: "Article"
   has_many :sub_tagged_articles, through: :taggings, source: :taggable,
             source_type: "Article_sub_tag", class_name: "Article"
 end 
```

我还扩展并成功测试了架构，以允许使用相同的标记模型和标记连接表对其他模型进行标记和子标记。希望这可以帮助某人。

# android - 如何绘制位图特定点的颜色并使用它来比较颜色代码

> ID：15849789
> 
> 赞同：0
> 
> 时间：2013-04-06T10:32:51.587
> 
> 标签：android

我正在尝试获取特定点的颜色并想将其与面部颜色进行比较，但我无法进行比较。我如何将它与黑白脸的颜色进行比较，因为在黑白脸对于不同的脸有不同的核心代码。请帮我找到脸的颜色，并知道它在哪里是黑白或彩色脸的颜色。我使用 Bitmap.getPixel(x,y); 但无法比较它来知道它是不是黑白脸的颜色。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T18:57:44.493

不确定您的要求 bt 以下是从像素中获取颜色的代码

```

      int 像素 = x.getPixel((int)event.getX(),(int)event.getY());
                int redValue = Color.red(pixel);
                int blueValue = Color.blue(像素);
                int greenValue = Color.green（像素）；
                int c=Color.rgb(redValue, greenValue, blueValue);

```

现在 c 是那个像素的颜色

# r - 如何绘制填充轮廓，z轴是一个因素

> ID：15849790
> 
> 赞同：3
> 
> 时间：2013-04-06T10:32:53.423
> 
> 标签：r, graph, plot

我有一个数据集

```
test<-data.frame(expand.grid(x=seq(0.01,1,0.01), y=seq(0.01,1,0.01)))
test$z<-c(rep(1,2500),rep(2,2500),rep(3,2500),rep(4,2500)) 
```

(x,y) 定义笛卡尔坐标。我想绘制一个填充的等高线图，`xlim=ylim=c(0,1)`颜色为 z（一个具有 4 个级别的因子）。

我可以做 ：

`plot(test$x, test$y, col=test$z, pch=16)`但它看起来并不好。

这个例子看起来很糟糕，但在我的数据中是有道理的。我熟悉，`akima::interp`但`filled.contour()`我不希望任何插值，z 不是连续的，而是一个因素。

您能否为我的数据推荐一个适当且令人愉快的可视化？我更喜欢基本图形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:49:57.967

您可以使用`image`例如：

```
image(outer(seq(0.01,1,0.01),seq(0.01,1,0.01),
            FUN=function(x,y)test$z)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/0Js85.png)

我认为您可以使用`raster`package 更好地处理此类情节。

# python - 从 Python 中的文件中删除反斜杠实例

> ID：15849795
> 
> 赞同：2
> 
> 时间：2013-04-06T10:33:00.223
> 
> 标签：python, instance, backslash

好吧，这听起来像是一个愚蠢的问题，但我无法解决这个问题......

我需要从下载的文件中删除所有反斜杠实例......但是，

```
output.replace("\","") 
```

不起作用。Python 认为 "\"," 是一个字符串，而不是 "\" 一个字符串和 "" 另一个字符串。

如何删除反斜杠？

编辑：新问题......最初，必须处理下载的文件，我使用的是：

```
fn = "result_cache.txt"
f = open(fn)
output = []
for line in f:
    if content in line:
        output.append(line)
f.close()
f = open(fn, "w")
f.writelines(output)
f.close()
output=str(output)
#irrelevant stuff
with open("result_cache.txt", "wt") as out:
    out.write(output.replace("\\n","\n")) 
```

哪个工作正常，将文件的内容减少到只有一行......最后只剩下这个内容：

```
Line of text\
Another line of text\
There\\\'s more text here\
Last line of text 
```

我不能再使用同样的东西，因为它会将每一行转换为列表中的一个值，留下括号和逗号......所以，我需要：

```
out.write(output.replace("\\n","\n"))
out.write(output.replace("\\","")) 
```

在同一行......如何？还是有其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:33:35.810

只需用反斜杠转义反斜杠：

```
output.replace("\\","") 
```

# java - ASM Java BCI，跟踪方法参数值/方法返回值

> ID：15849797
> 
> 赞同：1
> 
> 时间：2013-04-06T10:33:09.450
> 
> 标签：java, assembly

我正在使用 ASM 将一些简单的跟踪指令注入到我的 Java 程序中的方法中，方法输入，方法退出，时间戳等......

这一切都很好。

我现在想扩充它并注入指令来捕获方法参数值和方法返回值，使用 ASM 以一种可以普遍应用于任何方法的方式。

非常感谢任何可以为我指明正确方向的代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-19T02:17:50.700

ASM 参数示例参考（[https://github.com/scouter-project/scouter/blob/master/scouter.agent.java/src/scouter/agent/asm/CapArgsASM.java](https://github.com/scouter-project/scouter/blob/master/scouter.agent.java/src/scouter/agent/asm/CapArgsASM.java)）

```
Type.getArgumentType(desc) // get arguments types. return Type[]
mv.visitVarInsn(Opcodes.ILOAD, index) // load parameter to stack 
```

ASM 返回示例参考（[https://github.com/scouter-project/scouter/blob/master/scouter.agent.java/src/scouter/agent/asm/CapReturnASM.java](https://github.com/scouter-project/scouter/blob/master/scouter.agent.java/src/scouter/agent/asm/CapReturnASM.java)）

```
public void visitInsn(int opcode) {
    if ((opcode >= IRETURN && opcode <= RETURN)) {
        //return value is on the top stack
    }
    mv.visitInsn(opcode);
} 
```

# java - 有没有直接定义二进制数的简单方法？（例如相当于十六进制数的 0x 表示法）

> ID：15849799
> 
> 赞同：0
> 
> 时间：2013-04-06T10:33:15.100
> 
> 标签：java, syntax, binary

如果我有一个数字的十六进制表示，比如 f2，我可以直接将数字存储为 int 使用。

```
int num = 0xf2; 
```

然后，

```
System.out.println(num); 
```

产生输出

```
242 
```

如果我碰巧知道这个数字以 2 为基数表示为 11110010，是否有相应的方法来使用此信息定义一个 int？

如果不是，为什么不呢？直接使用二进制表示是否被认为不优雅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:35:19.940

在 Java 7 中，有[二进制文字](http://docs.oracle.com/javase/7/docs/technotes/language/binary-literals.html)。也就是说，在许多更高级别的应用程序中，直接使用二进制文件很难阅读并且通常是不必要的。

# cakephp - CakePHP 烘焙夹具不关心唯一字段

> ID：15849805
> 
> 赞同：1
> 
> 时间：2013-04-06T10:33:36.547
> 
> 标签：cakephp

一个例子：
我有一个带有“用户名”字段的用户模型
在`$validate`数组中，我为“用户名”设置了“唯一”规则。它有效，没问题。

但是每次我生成夹具时，该字段的自动生成值都不是唯一的。

其他型号也有同样的问题。

知道如何通过“isunique”规则为文件生成唯一值吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:44:22.690

为什么你甚至认为蛋糕/固定装置会这样？它没有！

您的验证规则与您的索引完全无关。使用 validates() 或 save() 时会触发验证。但是您的数据库不必具有那些“唯一”索引即可工作。

如果您真的希望它们也出现在您的固定装置中，您需要在那里手动定义它们（请参阅主键索引以了解如何执行此操作）。

# java - 输入验证（执行 while 循环）

> ID：15849813
> 
> 赞同：-2
> 
> 时间：2013-04-06T10:34:47.473
> 
> 标签：java

我需要确保为提示输入的值在 100,000 到 900,000 之间，这不起作用，有什么想法吗？（顺便说一句，我只是一个初学者）

```
 double advertCost;
    do {
    System.out.println("Please enter the advertising cost: ");
    advertCost = input.nextDouble();

    } while (advertCost =< 100000 || advertCost => 900000); 
```

我得到的错误：令牌“<”上的语法错误，删除此令牌运算符|| 未定义参数类型 int, boolean 标记“=”上的语法错误，删除此标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:36:51.387

您的问题在于您的语法：

```
while (advertCost =< 100000 || advertCost => 900000); 
```

在 Java 中，“小于或等于”运算符就是您所说的那样。小于或等于。你有等于或小于。你的大于也一样。它应该如下所示：

```
while (advertCost >= 100000 || advertCost <= 900000); 
```

此外，你让你的运营商走错了路。您希望`advertCost`大于 100000 且小于 900000，但您的运算符暗示小于 100,000 且大于 900,0000。

**只是关于你的错误的旁白**

通常这些问题可以通过错误消息来理解。我知道它们看起来很神秘，但如果你学会破译它们，就语法错误而言，你真的不需要我们。

`Syntax error on token "<", delete this token The operator || is undefined for the argument type(s) int, boolean Syntax error on token "=", delete this token`

让我们把它分成几个部分：

**第一部分**

*留言*：`Syntax error on token "<", delete this token`

好吧，JRE 刚刚解析了您的代码，并且正在遍历每个[token](http://classof1.com/homework_answers/computer_science/java_tokens/)。这是它到达的第一个无效令牌，因此会生成此消息。但是，如果你删除它，你仍然会有一个无效的 if 语句，所以让我们继续阅读。

**第二部分。**

*留言*：`The operator || is undefined for the argument type(s) int, boolean`

好吧，没有找到可检测的运算符，所以 JRE 必须假设那里没有。当它解析了 IF 语句的一部分时，发现：

```
if(a number || something else). 
```

此时它知道该`||`运算符仅适用于两个布尔值，因此它会引发另一个错误。它这样做是因为它已经知道代码会失败；它不需要检查另一面。

**最后一部分**

*留言*：`Syntax error on token "=", delete this token`

所以JRE继续解析，也找到了你的“=>”。和以前一样，它记录了无效字符并建议您将其删除。如果您确实删除了“=”，那么您实际上拥有这部分 If 语句的有效语法。

**概括**

下次遇到此类错误时，只需尝试分解消息即可。它会告诉您哪些字符是错误的，`<`并且`=`. 它甚至会告诉您如何尝试使用它们。显然它只能猜测，所以你要弄清楚你想要什么以及如何让运行时环境理解这一点！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:36:15.133

比较运算符是`<=`and `>=`，not `=<`and `=>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:36:54.217

```
(advertCost <= 100000 || advertCost >= 900000) 
```

# c# - ComboBox1 到 label1 的入口值

> ID：15849814
> 
> 赞同：0
> 
> 时间：2013-04-06T10:34:51.437
> 
> 标签：c#, .net, combobox, label

所以，我有这段代码将文本写入label1。但是会覆盖原始文本，选择一个新值。作为先前值的另一个条目？label1 应该是这样的：一 - 二 - 三 -...

谢谢

```
 private void OnSelectedIndexChanged(object sender, EventArgs e)
    { 
        string text;
        if (comboBox1.SelectedItem.ToString() == "one")
        {
            text = "one";
            label1.Text = " - " + text;
        }
        else if (comboBox1.SelectedItem.ToString() == "two")
        {
            text = "two";
            label1.Text = " - " + text;
        }
        else if (comboBox1.SelectedItem.ToString() == "three")
        {
            text = "three";
            label1.Text = " - " + text;
        }
        else
        {
            ...
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:36:52.353

您每次都在分配新值，要附加文本，您必须执行以下操作：

```
label1.Text += " - " + text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:38:09.953

我想你想要这样的东西

```
label1.Text = label1.Text + " - " + text; 
```

# hibernate - org.hibernate.MappingException：实体映射中的重复列：发票列：INVOICE_ID

> ID：15849815
> 
> 赞同：0
> 
> 时间：2013-04-06T10:35:05.177
> 
> 标签：hibernate, hibernate-mapping, hibernate-annotations

Hibernate 是说重复列 INVOICE_ID 的映射。但我无法理解这个例外。请帮忙 ！！我的发票类如下：

```
 @Entity
    @Table(name="INVOICES")
    public class Invoice {

        @Id
        @GeneratedValue(strategy=GenerationType.AUTO)
        @Column(name="INVOICE_ID", nullable=false,insertable=false,updatable=false)
        private Integer invoice_id;

        @Column(name="Date_Created", nullable=false)
        private Timestamp dateCreated;

        @Column(name="DESCRIPTION")
        private String description;

        @Column(name="Total_Amount")
        private Double totalAmount;

        @Column(name="Tax_Amount")
        private Double taxAmount;

        @Column(name="Due_Date")
        private Timestamp dueDate;

        @Column(name="deleted")
        private boolean deleted;

        @OneToOne
        @JoinColumn(name="Invoice_Item_Detail_id", nullable=false)
        private InvoiceItemsDetails invoiceItemsDetails;

        @OneToOne
        @JoinColumn(name="ID", nullable=false)
        private Client client;

        public Client getClient() {
            return client;
        }

        public void setClient(Client client) {
            this.client = client;
        }

        public Date getDueDate() {
            return dueDate;
        }

        public void setDueDate(Timestamp dueDate) {
            this.dueDate = dueDate;
        }

    /*  public Integer getInvoice_id() {
            return invoice_id;
        }

        public void setInvoice_id(Integer invoice_id) {
            this.invoice_id = invoice_id;
        }
    */
        public Date getDateCreated() {
            return dateCreated;
        }

        public void setDateCreated(Timestamp dateCreated) {
            this.dateCreated = dateCreated;
        }

        public String getDescription() {
            return description;
        }

        public void setDescription(String description) {
            this.description = description;
        }

        public Double getTotalAmount() {
            return totalAmount;
        }

        public void setTotalAmount(Double totalAmount) {
            this.totalAmount = totalAmount;
        }

        public Double getTaxAmount() {
            return taxAmount;
        }

        public void setTaxAmount(Double taxAmount) {
            this.taxAmount = taxAmount;
        }

        public boolean isDeleted() {
            return deleted;
        }

        public void setDeleted(boolean deleted) {
            this.deleted = deleted;
        }

        public InvoiceItemsDetails getInvoiceItemsDetails() {
            return invoiceItemsDetails;
        }

        public void setInvoiceItemsDetails(InvoiceItemsDetails invoiceItemsDetails) {
            this.invoiceItemsDetails = invoiceItemsDetails;
        }   

    } 
```

我在 USERS 表中使用 INVOICE_ID 作为外键，如下所示：

```
@OneToMany
    @JoinColumn(name="INVOICE_ID", nullable=false)
    public Set<Invoice> getInvoices() {
        return invoices;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:05:18.813

这种映射对我来说毫无意义。

表 INVOICE 的 INVOICE_ID 列（这是它的主键）如何用作 USER.ID 列的外键？

INVOICE 中应该有一个 USER_ID 列，并且该列应该作为您的 OneToMany 关联的 JoinColumn：

```
@OneToMany
@JoinColumn(name="USER_ID", nullable=false)
public Set<Invoice> getInvoices() {
    return invoices;
} 
```

# javascript - 使用复选框+标签组合防止双击错误

> ID：15849817
> 
> 赞同：9
> 
> 时间：2013-04-06T10:35:18.057
> 
> 标签：javascript, jquery, css, forms

**请注意，此问题可能不适用于公众，因为除非您是快速点击者，否则不会发生此问题。（150-200 毫秒/点击）**我发布此问题的原因是因为我的应用程序有一个表单，其中有 20 多个复选框并排在一起，经过广泛研究，我没有发现与此问题相关的问题。

这是一个简化的场景 - 4 个复选框和 4 个标签，每个复选框 id 一个：

```
[CB1] Label 1
[CB2] Label 2
[CB3] Label 3
[CB4] Label 4 
```

假设在每种情况下所有 CB 都未选中。

**预期行为：**

1.  我快速连续点击4个CB，它们都会被选中。（真的）
2.  我快速连续单击 4 个标签，相应的 CB 变为选中状态。（仅适用于 Chrome，但仍不是最佳的）

**Win 7 上案例 2 的实际行为**（单击标签，因为如您所知，标签很大且可样式化，复选框很小且依赖于操作系统）：

1.  （在 Firefox 19 中）CB2 和 CB4 未选中，在列表中向下显示标签 2 和标签 4 的“标签”一词，就像我双击它们一样。
2.  （在 Chrome 26 中）所有 CB 都得到了正确检查，但是在列表中，标签 2 和标签 4 的“标签”一词被突出显示，就好像我双击它们一样。
3.  （在 IE 10 中）CB2 和 CB4 未选中，但没有错误突出显示。

如果点击是在同一个元素上，那么错误的行为可能是合理的。在我们的例子中，这些显然是具有不同 ID 和名称的唯一复选框。所以结果出乎意料。

**所以我的问题是：**

当我快速单击不同的复选框时，有没有办法**禁用触发双击事件**，但仍然通过快速单击检查它们？

我最接近的是以下脚本，有趣的是，它使 Firefox 的行为类似于 Chrome，而 Chrome 的行为类似于 Firefox：

```
jQuery(document).on('dblclick', 'input:checkbox+label', function(event){
    console.log('ugly hack fired');
    $(this).click();
    event.preventDefault();
}) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T11:30:15.380

终于得到了一个适用于所有浏览器的非常丑陋的 hack，希望这能帮助遇到这个问题的其他人：

**使用 css 禁用选择，**因为在 JS 中这样做效率太低：

```
.form_class input[type=checkbox] + label{
    -webkit-user-select:none;
    -khtml-user-select:none;
    -moz-user-select:none;
    -o-user-select:none;
    user-select:none;
} 
```

**防止 JS 中的所有点击**，并手动执行点击应该执行的操作：

```
jQuery(document).on('click', '.form_class input:checkbox+label', function(event){
    // Assuming label comes after checkbox
    $(this).prev('input').prop("checked", function(i, val){
        return !val;
    });
    event.preventDefault();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:39:07.040

这样就可以了——

```
$("input[type='checkbox']").dblclick(function (event)
{
    event.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T11:08:59.390

试试这个：

```
$(document).on('dblclick', 'input:checkbox, label', function (event) {
    event.preventDefault();
    // Your code goes here   
})

OR

$("input:checkbox, label").dblclick(function (event) {
    event.preventDefault();
    // Your code goes here
});

OR

$('input:checkbox').add('label').dblclick(function (event) {
    event.preventDefault();
    // Your code goes here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T05:48:21.410

我也面临着一个类似的问题，让我整晚都在研究如何修复复选框。我还在听“dblclick”事件，以防止在双击复选框时发生任何操作。前任：

```
#(".some_class").on("dblclick",function(event){
event.preventDefault();
}); 
```

但这里的问题是它在操作完成后触发了事件。所以所有的伤害都已经造成了。

有一种非常简单的方法可以解决这个问题，即通过监听事件“更改”而不是监听“点击”。在这种情况下，当状态从选中变为未选中或从未选中变为选中而不是单击或双击时，我们将触发事件。

```
#(".some_class").on("change",function(event){
event.preventDefault();
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-02-24T14:17:46.560

```
$('.checkbox_class').click(function(event){
    if (event.ctrlKey){ event.preventDefault();
//rest of the code 
```

似乎工作

# php - 通过 php 以 json 格式获取 mysql 向量到 Android jsonarray 返回 null

> ID：15849819
> 
> 赞同：0
> 
> 时间：2013-04-06T10:35:21.037
> 
> 标签：php, android, mysql, json, vector

我正在通过 http fetch 解码/解析 JSON，在 android 上我得到空结果，而在浏览器上我得到以下内容，这是有效的 JSON 格式：

```
[
    {
        "KEY": "-2.71208569845,-1.46780473499, ..."
    }
] 
```

其中数组是一个长长的 double 值列表，我在 mysql db 中存储为中等 blob。在android中，无论我尝试什么，我都会得到这个：

```
[{"KEY":""}] 
```

我尝试在 httpget 和 httppost 之间进行更改，并查看了 SO 上的其他帖子并尝试了他们的建议，但无济于事。这是PHP：

```
<snip>
mysql_query('SET CHARACTER SET utf8');
$result=mysql_query("SELECT avgfftspectrum FROM `TremCamTbl` WHERE 
             email='".$_REQUEST['email']."'
             ORDER BY subjectid DESC LIMIT  1");

if (mysql_num_rows($result) > 0) {
    //$response["KEY"] = array(); 
    while ($row = mysql_fetch_assoc($result)) {
        $fftdata[] =  array_map('utf8_encode', $row);
        /*$data = $row["avgfftspectrum"];  I have also tried these two lines
        **array_push($response["KEY"], $data); */
    }
    echo json_encode($fftdata);
} 
<snip> 
```

我的 android HttpPost 或 HttpGet 看起来或多或少像：

```
<snip>
String paramString = URLEncodedUtils.format(nameValuePairs, "utf-8");
HttpPost httpPost  = new HttpPost(WebConstants.getCloudavgfftUrl()+"?"+paramString);
Log.i(TAG, ""+WebConstants.getCloudavgfftUrl()+"?"+paramString);
try {
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    String responseBody = httpClient.execute(httpPost,responseHandler);
    Log.i(TAG, ""+responseBody.length());

    // Parse
    JSONArray jArray = new JSONArray(responseBody);
    Log.i(TAG, ""+jArray.length());
    Log.i(TAG, ""+jArray.toString());
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
<snip> 
```

关于我做错了什么有什么建议吗？

# c++ - C++ 相同的数组 - 不同的输出

> ID：15849821
> 
> 赞同：1
> 
> 时间：2013-04-06T10:35:28.910
> 
> 标签：c++

我正在尝试从文件（myfile.in）中读取二维数组。给出了行和列。

```
myfile>>n>>m; //rows and cols
for(int i = 0; i < n; i++) {
    for(int j =0; j < m; j++) {
    myfile>>tab[i][j];
    cout<<tab[i][j]<<" ";
    }
    cout<<endl;
} 
```

并且屏幕上的输出是应该的（因为它在文件中）：

```
1 0 0 0 1 0 1
0 1 1 1 1 0 0
0 0 1 0 1 1 0
0 1 0 0 1 0 0
0 1 0 0 0 1 1
1 1 1 1 0 0 0
0 1 0 0 0 1 1 
```

之后我尝试单独打印数组。

```
for(int i = 0; i < n; i++) {
    for(int j =0; j < m; j++) {
    cout<<tab[i][j]<<" ";
    }
    cout<<endl;
} 
```

输出是：

```
0 1 0 0 0 1 1
0 1 0 0 0 1 1
0 1 0 0 0 1 1
0 1 0 0 0 1 1
0 1 0 0 0 1 1
0 1 0 0 0 1 1
0 1 0 0 0 1 1 
```

实际上它显示了最后一行，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:41:47.703

根据您的评论，您实际上正在将 tab 初始化为`tab[0][0]`. 我不知道编译器怎么会允许这样做，但重要的是你在**数组边界之外编写，触发[未定义的行为](https://en.wikipedia.org/wiki/Undefined_behavior)**。

在读取 n 和 m*后*尝试动态分配数组：

```
int n, m;
file >> n >> m;

int **tab = new int* [n];
for(size_t i = 0; i < n; ++i)
{
  tab[i] = new int[m];
} 
```

这样，您将始终确保只分配所需的内存。

另外，完成后不要忘记删除数组：

```
for(size_t i = 0; i < n; ++i) delete[] tab[i];
delete[] tab; 
```

如您所见，这种方法往往会增加一些不必要的复杂性。一个优雅的替代方案是使用容器，例如`std::vector<std::vector<int>>`：

```
using namespace std;

vector<vector<int>> tab;

  for(int i = 0; i < n; ++i) {
    vector<int> current_row;
    for(int j = 0; j < m; ++j) {
      int buff;
      file >> buff;
      current_row.push_back(buff);
    }

    tab.push_back(current_row);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:42:29.163

```
int n=0, m=0; int tab[n][m]; 
```

这不是合法的 C++ 有两个原因：

1.  数组的维度必须是常量表达式。`n`而`m`不是。

2.  您正在创建一个大小为 0 的数组。

    > 如果存在常量表达式 (5.19)，[...] 其值应大于零。

您的编译器正在接受它，因为它具有接受这两者的扩展。尽管如此，您的数组的大小为 0，因此它没有元素。您尝试写入的任何内容都将超出数组的范围。

读取`myfile>>n>>m;`不会自动更改数组的大小。您已经将其声明为大小 0。您所做的任何事情都不会改变它。

相反，您最好使用标准库容器，例如 a `std::vector`，它可以在运行时更改大小。考虑：

```
myfile >> n >> m;
std::vector<std::vector<int>> tab(n, std::vector<int>(m)); 
```

`tab`然后，您可以以与上面完全相同的方式使用此对象。

# java - java中的字符串拆分/标记化而不编译正则表达式？

> ID：15849826
> 
> 赞同：0
> 
> 时间：2013-04-06T10:36:00.033
> 
> 标签：java, performance, code-formatting

标准 Java API 中是否存在允许我从`1^2^3^4`1 行中的字符串中获取令牌的简写？我想说要提取的第三个元素“3”。我不想要任何编译正则表达式的东西。将它传递到预编译的正则表达式中很好，但是每次调用方法时都不断地编译正则表达式会伤害 CPU。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:48:13.223

您可以使用预编译的[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)轻松拆分；

```
static Pattern regex = Pattern.compile("\\^");

private static String getEntry(String input, int which)
{
    return regex.split(input)[which];
} 
```

...或者，只需使用直接代码而不是使用正则表达式，因为它不会创建不需要的 String 对象，它应该更快。

```
private static String getEntry(String input, int which)
{
    int left, right = -1;
    do {
        left = right;
        right = input.indexOf('^', right+1);
    }
    while(which-- > 0 && right >= 0);

    if(which != -1)
        return null;

    if(right == -1)
        return input.substring(left+1);

    return input.substring(left+1, right);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:45:55.740

您可以使用 Java 编译正则表达式[`Pattern.compile`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#compile%28java.lang.String%29)，这将产生一个`Pattern`对象。您可以根据需要多次重复使用该对象，而不必每次都重新编译正则表达式。只需将编译后的模式存储在一个变量中，这样您就可以在每次需要时检索它。

如果您定义一个匹配 之间任意数字的模式`^`，您可以`Matcher`使用[`Pattern.matcher()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#matcher%28java.lang.CharSequence%29). 该[`Matcher.group(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28int%29)方法将使您可以访问给定输入中的特定匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T17:59:02.230

有一个 Scanner 类可以让你定义一个分隔符，这样你就可以调用 next() 函数，直到找到你想要的元素。在这种情况下不需要使用正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T10:46:03.543

我想如果您希望完全避免使用正则表达式来解决性能问题，您可以尝试使用[Apache Commons StringUtils split()](https://github.com/apache/commons-lang/blob/trunk/src/main/java/org/apache/commons/lang3/StringUtils.java)进行迭代处理。我没有将它与[Java 标准库 one](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)进行基准测试，但是查看源代码我很难想象会有显着的性能差异。

# file - Word 文件的在线编辑器和使用 GWT 预览文件的方法

> ID：15849829
> 
> 赞同：3
> 
> 时间：2013-04-06T10:36:32.640
> 
> 标签：file, gwt, gxt, preview

我的 GWT 2.4.0 + GXT 2.2.4 + Amazon 项目中有两个要求，

1.  我们仅将 word 文档存储在我们的应用程序中（每个登录名只能访问他的文档）。现在我希望用户可以像 ZOHO writer 那样在线编辑自己的 word 文档。如何在我的应用程序中实现此功能？

2.  我们还存储图像、文本文件、word 文件、PDF 文件和其他文件。我想在用户单击文件时显示这些文件的预览。类似，docs.com。如何实现这一点？

我只需要指导我如何实现这两个要求。任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T12:12:49.473

GWT 为 XML 编辑器提供了 Wrapper 类的代码镜像库，请检查这是用于客户端的

```
public XMLEditorPanel(int height, int width, final String xmlToDisplay) {
        this.xmlToDisplay = xmlToDisplay;
        setHeaderVisible(false);
        setHeight(height);
        setWidth(width);

        config = new CodeMirrorConfiguration();
        config.setLineNumbers(true);
        config.setTextWrapping(false);
        config.setAutoMatchParens(false);

        editor = new CodeMirror(config);

        editor.addInitializeHandler(new InitializeHandler() {
            public void onInitialize(InitializeEvent event) {
                editor.setParser(CodeMirror.PARSER_XML);
                editor.setIndentUnit(2);
                editor.setFocus();
                if (xmlToDisplay != null && xmlToDisplay != "" && xmlToDisplay.length() > 0) {
                    editor.setValue(xmlToDisplay, false);
                } else {
                    editor.setValue(" ", false);
                }
                editor.reindent();
            }
        });

        editor.addValueChangeHandler(new ValueChangeHandler<String>() {

            @Override
            public void onValueChange(ValueChangeEvent<String> event) {
                XMLEditorPanel.this.xmlToDisplay = editor.getValue();
            }
        });

        add(editor);
    } 
```

# google-app-engine - 难以在应用程序引擎和 JPA 上建立一对多关系

> ID：15849830
> 
> 赞同：0
> 
> 时间：2013-04-06T10:36:50.693
> 
> 标签：google-app-engine, google-cloud-datastore, datanucleus, gae-eclipse-plugin

我在书和章节之间有一对多的关系。我能够创建一个书籍对象并成功为其添加章节（我查看数据存储并查看我的创建）。但是，如果我尝试循环浏览这些章节，在取一本书后，我会收到错误消息

```
javax.jdo.JDODetachedFieldAccessException: You have just attempted to access field
"chapters" yet this field was not detached when you detached the object. Either dont
access this field, or detach it when detaching the object. 
```

经过大量研究，我终于找到了一个博客，上面写着just place `@Basic`on the `getChapters`method。当我这样做时，我收到了这个新错误：

```
java.lang.IllegalStateException: Field "Book.chapters" contains a persistable object
that isnt persistent, but the field doesnt allow cascade-persist! 
```

我一直在尝试各种东西，模型的最新外观是

```
@Entity
public class Account {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @OneToMany(mappedBy = "book", cascade = CascadeType.ALL)
    private List<Chapter> chapters = new ArrayList<Chapter>();
}

@Entity
public class Chapter {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @ManyToOne(fetch = FetchType.EAGER)//already tried without annotation and with FetchType.LAZY
    private Book book;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T12:02:30.207

您需要在 Book 属性上声明级联类型，以便 JPA 在对 Chapter 实体执行操作时知道要做什么。

```
@Entity
public class Chapter {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @ManyToOne(cascade = CascadeType.ALL) // you can also add fetch type if needed
    private Book book;
} 
```

[这是所有级联类型的描述](http://docs.oracle.com/javaee/5/api/javax/persistence/CascadeType.html)。

# mongodb - 在 EF 中使用 No-Sql

> ID：15849836
> 
> 赞同：2
> 
> 时间：2013-04-06T10:37:15.543
> 
> 标签：mongodb, entity-framework, ravendb, nosql

我想在我的应用程序中使用 No-Sql 我认为[RavenDb](http://ravendb.net/)和 MongoDb 都不错，但哪个与 EF 集成度更高？有没有使用主题的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:51:54.117

实体框架是为支持关系数据库而构建的。它不支持任何无 sql 或文档数据库。仔细想想，它实际上并没有太大意义，使用对象关系映射器并生成非关系数据库的关系映射有什么意义？

但是，有一些库支持 .Net 可通过 nuget 获得的这两种框架。我相信这些会更适合您的应用程序

# actionscript-3 - 嵌套碰撞八哥as3

> ID：15849838
> 
> 赞同：0
> 
> 时间：2013-04-06T10:37:18.560
> 
> 标签：actionscript-3, collision, intersect

我在我的项目中使用 starling 和 tweenMax 框架。我遇到的麻烦是这样的：

为了沿不同路径制作动画，我使用的是 tweenmax。

有一个 _leaderEnemy 沿着一条路径动画，我正在将其他几个 _shooterEnemy（它们属于同一类）推入其中。

```
public function createEnemies(enemyNo:int, path:Array, offset:int):void
{
    for(var i:uint=1;i<=enemyNo;i++){
        if (i==1){
            _leaderCount++;
            _leaderEnemy = new ShooterEnemy();
            _leaderEnemy.x=600;
            _leaderEnemy.y=300;
            _leaderEnemy.name="_shooterEnemy"+_leaderCount;
            this.addChild(_leaderEnemy);
            leaderEnemyArray.push(_leaderEnemy);
        }
        else
        {
            _leaderCount++;
            _shooterEnemy= new ShooterEnemy();
            _shooterEnemy.x=0;
            _shooterEnemy.y=(offset*(i-1));
            _shooterEnemy.name="_shooterEnemy"+_leaderCount;
            trace("no: "+_shooterEnemy.name);
            leaderEnemyArray.push(_shooterEnemy);
            _leaderEnemy.addChild(_shooterEnemy);
        }
    } 
```

现在我想使用 _leaderEnemy 和其中的 _shooterEnemy 与 _shooterHero 之间的椋鸟来检查碰撞。

运行此数组成功检查与整个组的冲突，即 _leaderEnemy 但不是其中的单个组。

从技术上讲，我应该能够通过以下方式做到这一点：

```
var Track:Object;
for(var i:uint=0;i<leaderEnemyArray.length;i++) {
    Track=leaderEnemyArray[i];      
    if (Track.bounds.intersects(_shooterHero.bounds)){
        Track.rotation=deg2rad(70);             
    }
} 
```

这可能是我正在做的愚蠢的事情。但我一直无法解决这个问题。

对此的任何帮助将不胜感激。

我还有一些其他问题：

1.  我可以在 _shooterEnemy 的班级内检查与 _shooterHero 的碰撞吗？

我努力了：

```
if (this.bounds.intersects(stage.getChildByName("_hero"))){
} 
```

虽然它没有用。

1.  我可以检查一个敌人与舞台上的所有东西的碰撞，以便我可以为他的每个联系人分配单独的功能吗？例如：击中英雄：死；与另一个敌人击中：转身

如果您需要更多信息，我很乐意提供。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T17:16:06.297

> 我可以检查一个敌人与舞台上的所有东西的碰撞，以便我可以为他的每个联系人分配单独的功能吗？例如：击中英雄：死；与另一个敌人击中：转身

当然可以。你应该！这大致是碰撞引擎的工作原理。

> 运行此数组成功检查与整个组的冲突，即 _leaderEnemy 但不是其中的单个组。

没有。它行不通。因为 bounds 属性使用父坐标。这意味着您可以将每个子显示（同一容器）彼此相交。但是您不应该将 A 的子显示与 B 的子显示相交。

除非您将每个边界坐标（本地）转换为全局坐标。

[http://doc.starling-framework.org/core/starling/display/DisplayObject.html#localToGlobal()](http://doc.starling-framework.org/core/starling/display/DisplayObject.html#localToGlobal%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T19:21:35.413

使用 Track.bounds.intersects 是检查碰撞的一种方法。另一个是使用 starling.displayDisplayObject 的 hitTest[方法](http://doc.starling-framework.org/core/starling/display/DisplayObject.html)

您还可以检查通过勾股定理类型计算计算出的英雄和其他敌人的距离。

你在检查敌人吗？如果你有很多敌人，你可能想研究“植绒”算法。Keith Petes 在他的《Advanced Actionscript Animation》一书中很好地涵盖了这个主题。

# c++ - 广义霍夫变换和 OpenCv

> ID：15849840
> 
> 赞同：11
> 
> 时间：2013-04-06T10:37:23.940
> 
> 标签：c++, opencv, hough-transform

我正在寻找通用霍夫变换的 OpenCv 实现，或者至少是 C++ 中的一些东西。尽管我搜索了一段时间，但我无法找到任何有趣的东西。有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T10:50:43.697

我希望这个[广义霍夫变换代码](https://web.archive.org/web/20190215081959/http://www.itriacasa.it:80/generalized-hough-transform/)是您正在寻找的。还有一个非常简单的教程和一些说明。

# java - I18N：常量中需要的常量（Java/GWT）

> ID：15849842
> 
> 赞同：1
> 
> 时间：2013-04-06T10:37:43.390
> 
> 标签：java, gwt, internationalization, constants

我 I18N 的一个应用程序。它的一部分在于对菜单进行 I18N-ing。那没问题。
使用 GWT，我可以使用常量接口。
现在我必须提供应用程序的帮助，其中包括一些涉及菜单的文本。
所以在这些更大的常量中，我需要使用菜单常量。

示例：
我在 I18N 的属性文件中有一个资源：

```
menuPlay = Play ... 
```

现在我想定义另一个资源 = 一些帮助文本：

```
howToPlay = In order to start the game, go to the menu ??<resource menuPlay>?? 
```

在上面的问号中，我想使用资源 menuPlay。

当我想翻译例如法语时，这两个资源将是：

```
menuPlay = Jouer...
howToPlay = Pour démarrer le jeu, aller au menu ??<resource menuPlay>?? 
```

我该怎么做（在 Java / GWT 中）？我的意思是有现成的解决方案（我找不到或想不到）。我不想编写一些特定的解决方案，这些解决方案将基于本地化信息实时结合两者。
这将有助于防止更改 menuPlay 资源时出现不一致：无需费心更改其他资源 howToPlay（忘记的高风险）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:11:13.760

Then you property is like

```
menuPlay = Play ...
howToPlay = In order to start the game, go to the menu {0} 
```

while using

inorder to get `menuPlay` then in java you may using like `resource.menuPlay();`

now inorder to get `howtoPlay`

`resource.howToPlay(resource.menuPlay());` //now `{0}` replaces with `Play`

you can do it for no.of arguments

`howToPlay = In order to start the game, go to the menu {0} {1}` ..etc

[see message patterns](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html)

# android - 获取 Blob 图像并将该图像转换为位图图像

> ID：15849843
> 
> 赞同：8
> 
> 时间：2013-04-06T10:37:46.370
> 
> 标签：android, sqlite, bitmap, bytearray, blob

我正在从数据库中以 blob 格式获取图像。我想将它转换为位图图像。我用来将位图转换为 Blob 的代码放在下面。但是请告诉我如何反转它。？？？

```
ByteArrayOutputStream boas = new ByteArrayOutputStream();  
btmap.compress(Bitmap.CompressFormat.JPEG, 100, boas ); //bm is the bitmap object   
byte[] byteArrayImage = boas .toByteArray(); 
String encodedImage = Base64.encodeToString(byteArrayImage, Base64.DEFAULT); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-06T10:47:56.880

这将起作用

```
byte[] byteArray = DBcursor.getBlob(columnIndex);  

Bitmap bm = BitmapFactory.decodeByteArray(byteArray, 0 ,byteArray.length); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-22T08:15:49.300

你可以使用这个简单的静态函数，它超级容易实现和重用:)

```
public static Bitmap getBitmapFromBytes(byte[] bytes) {
        if (bytes != null) {
            return BitmapFactory.decodeByteArray(bytes, 0 ,bytes.length);
        }
        return null;
 } 
```

# c++ - 使用多个文件时，我在哪里放置预处理器命令？

> ID：15849846
> 
> 赞同：0
> 
> 时间：2013-04-06T10:38:04.970
> 
> 标签：c++, include, c-preprocessor

我正在使用 c++ 为学校做一个项目，该项目将被拆分为多个文件。

```
test_driver.cpp - a file to test the code written
storage.cpp - implementation file for storage class and methods
storage.h - header file for storage
song.cpp - implementation file for song class, songs are the data type being manipulated by storage
song.h - header file for song 
```

我在哪里放我的#includes。存储取决于歌曲数据类型，因为它主要是操纵它们、更改标题和移动它们等。如果这似乎是一个新手问题，我很抱歉，但我真的不知道，也没有找到可靠的答案. 我还想声明一个全局常量在实现文件之间共享，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:15:16.580

My view is that every header file should be possible to include without the programmer having to remember what else to include. This isn't always possible to achieve, but I think it's a good rule to aim at.

In other words, if "storage.h" needs something declared in "song.h", then it should include "song.h" - that way, whoever uses "storage.h" doesn't need to also remember the include of "song.h".

If, say, "storage.h" also uses something from "fstream", then it should include "fstream".

In other words, if you include "storage.h" in a file, that's all you should need to do to use the "storage" class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:51:46.247

试试这个（对于每个 cpp 文件，我列出了你应该在其中包含的 h 文件）：

```
song.cpp
  song.h

storage.cpp
  storage.h
  song.h 
```

或者，如果 storage.h 也依赖于 song.h （即，它使用它的定义），你可以这样做：

```
storage.h
  song.h

storage.cpp
  storage.h 
```

至于常数，你为什么不定义一个

```
constants.h 
```

文件并将其包含在需要的地方？

# ios - 如何添加到保存的 NSUserDefault？

> ID：15849855
> 
> 赞同：0
> 
> 时间：2013-04-06T10:39:06.237
> 
> 标签：ios, objective-c, nsuserdefaults

我正在用 Xcode 制作一个游戏，其中包括每个级别的评分系统。在这里，我有一些通过使用委托获取 NSString (passedValue1) 的代码。

然后我添加代码以在我的 viewDidLoad 中接收值并在 UILabel 中显示我的值

```
-(void)viewDidLoad
    { 

        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib

        // Do any additional setup after loading the view, typically from a nib
        NSString *key=@"labelKey";

        if(passedValue1){
            NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

            NSObject * object = [prefs valueForKey:key];
            if(object != nil){
                NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
                [defults setValue:passedValue1 forKey:key];
                [defults synchronize];
            }
            else{
                NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];

                NSInteger readScore=[[[NSUserDefaults standardUserDefaults] valueForKey:key] integerValue];
                NSInteger newValue=readScore+[passedValue1 integerValue];
                [defults setValue:[NSString stringWithFormat:@"%d",newValue] forKey:key];
                [defults synchronize];

            }
        }
        label.text = [[NSUserDefaults standardUserDefaults]objectForKey:key];
    } 
```

一旦我显示了这个值，我就会使用 NSUserDefault 将它保存到一个标签中。但是，一旦我重玩了我的游戏并获得了另一个得分值，我想将新的 passValue1 值添加到当前保存的值中......

**例如：** 假设我玩了我的关卡，我得到了 10 的得分值。然后保存该值并重新玩我的关卡。然后我想获取保存的值并将其添加到我刚刚得分的值中。所以这就是说我得分的第二个值是 20。然后我希望我的代码将它们加在一起并给我一个 30 的值。任何人都可以帮忙，因为我使用的代码没有正确执行我想要的功能这样做是添加上一个和当前传递的值。

我的代码有什么问题？？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:49:32.073

您不应该使用`valueForKey:`它（这不是您可能认为的那样，请参阅*Key-Value Coding*）。相反，您应该使用`objectForKey:`or 在您的情况下`integerForKey:`。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSInteger value = [defaults integerForKey:key];
value += [passedValue1 integerValue];
[defaults setInteger:value forKey:key];
BOOL success = [defaults synchronize]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:51:35.887

看来你的`if`条件错了，应该是

```
if (object == nil) { // <-- you have object != nil here !
    // save new value
} else {
    // read old value, add something, save new value
} 
```

# java - 带有 javadoc 的 netbeans 生成参数名称为 arg0,arg1,...

> ID：15849857
> 
> 赞同：1
> 
> 时间：2013-04-06T10:39:16.347
> 
> 标签：java, netbeans, javadoc

我只是通过压缩 javadoc html 页面从 javadoc 制作 jar，然后将其导入 netbeans。一切正常，但参数名称就像 arg0,arg1,... 我在 html javadoc 中检查它并且名称正常。

哪里有问题？

# c++ - 从 QMap 中删除所有值

> ID：15849858
> 
> 赞同：12
> 
> 时间：2013-04-06T10:39:21.760
> 
> 标签：c++, qt, pointers, qmap

我有一个 QMap 由指向类对象的指针组成，使用`new`. 我需要删除所有这些指针。使用 QMap 执行此操作的正确方法是什么？我可以这样做：

```
QList<ClassName*> allVals = map.values();
for (QList<ClassName*>::iterator it = allVals.begin(), endIt = allVals.end(); it != endIt; ++it) {
    delete *it;
} 
```

但是有没有更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-06T11:40:28.917

最好的方法是使用[qDeleteAll(...)](http://qt-project.org/doc/qt-4.8/qtalgorithms.html#qDeleteAll)：

```
qDeleteAll( map );  //  deletes all the values stored in "map"
map.clear();        //  removes all items from the map 
```

`qDeleteAll(...)`可以在所有 Qt 的容器上使用。这样您就不必担心循环，也不必担心单独删除项目。

# html - 是否可以在声明后设置项目的类别？

> ID：15849859
> 
> 赞同：0
> 
> 时间：2013-04-06T10:39:28.980
> 
> 标签：html, css

我想将我网站上所有页面共有的所有菜单项放在一个头文件中。问题在于我需要为当前菜单项定义一个类，以便它改变颜色。我在菜单上使用了超级鱼，这是一个非常简单的模型......

```
<nav> 
  <ul class="sf-menu">
     <li id="first-li"><a href="index.php">Home</a></li>
      <li class="current"><a href="page1.php">Page 1</a>
         <ul>
             <li><a href="submenu1.php">Submenu 1</a> </li>
             <li><a href="submenu2.php">Submenu 2</a> 
                 <ul>
                 <li><a href="subsubmenu1.php">SUBSubmenu 1</a> </li>
                 </ul>
             </li>
          </ul>

      </li>
      <li><a href="page2.php">Page 2</a> </li>
       <li><a href="page3.php">Page 3</a></li> 
       <li><a href="page4.php">Page 4</a></li>
   </ul>
 </nav> 
```

是否可以删除 class="current" ，将整个导航移动到头文件，然后只在每个页面上指定当前类？

我的实际菜单代码要大得多，这就是为什么我不希望它在每一页上重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:41:55.473

在您当前的页面脚本中使用它

使用 jquery 的东西..

```
$('.sf-menu li a').click(function() {
        $('.sf-menu li.current').removeClass('current');
        $(this).closest('li').addClass('current');
    }); 
```

在这里找到小提琴.. [http://jsfiddle.net/VudYx/](http://jsfiddle.net/VudYx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:10:18.040

将 class="current" 添加到标头中的 index.php li 中，并在标头中使用以下 jQuery 代码。

```
$(document).ready(function() {
var curUrl = window.location.pathname;
curUrl=curUrl.replace(/\/$/, "");//support urls with or without trailing slash
$( ".sf-menu li" ).each(function(i) {

if(($(this).children().length > 0) && ($(this).children(":first").attr("href").split('/').pop()==curUrl.split('/').pop()))
{
$( ".sf-menu li" ).removeClass("current");
$(this).addClass("current");
}

});  
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:15:37.797

就我个人而言，我会使用 CSS 来实现这一点。

如果每个菜单项`<li>`都有自己的类，并且`<body>`每页都有唯一的 ID，则可以适当地设置当前项的样式，以便：

```
<li class="navHome">Home</li>
<li class="navAbout">About<li> 
```

并且您的主页/关于页面有一个正文标签，例如： `<body id="pgHome">`或`<body id="pgAbout">`

然后就可以直接给当前页面的菜单项设置样式了：

```
#pgHome .navHome,
#pgAbout .navAbout
{
 // styles to highlight this item
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:48:38.317

通过结合所有答案，我得到了它完全按照我想要的方式工作。

首先，我为所有第一层菜单项提供了 ID，我想要突出显示的那些，然后在每个页面上我像这样移动当前类...

```
<script>
$(document).ready(function() {
$( ".sf-menu li" ).removeClass("current");
$( "#menu2" ).addClass("current");  
}); 
</script> 
```

干净，简单且无需点击即可工作，感谢所有回答您的帮助。

# android - Android 防止 SSL 的中间人攻击

> ID：15849862
> 
> 赞同：4
> 
> 时间：2013-04-06T10:40:02.647
> 
> 标签：android, ssl, https, man-in-the-middle

我在我的 Android 应用程序中使用 HTTPS 与我自己的 API 进行通信。当我进行数据包嗅探时，我看不到任何好的信息。但是，当我使用 Fiddler2 之类的软件在我的 Android 上安装受信任的证书时，我可以清楚地看到我所有的 HTTPS 调用，这很危险。

问题与这个人非常接近，但在 Android 而非 iPhone 中： [从 fiddler 隐藏 iOS HTTPS 调用](https://stackoverflow.com/questions/15271728/hiding-ios-https-calls-from-fiddler)

我正在使用 loopj 库进行 https 调用：Android Asynchronous Http Client [http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

我该如何处理这样的漏洞？（我知道如何在概念上处理它，但我需要示例代码）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T11:15:47.323

当用户选择将 Fiddler2 的证书安装为受信任的根证书时，他就选择了危害自己的安全性。我不确定您可以做些什么，因为您的应用程序的 HTTPS 连接将通过 Android 的证书验证系统，该系统会将连接视为有效，因为证书是受信任的。

我会采用的解决方案是将您的 SSL 证书嵌入到您的应用程序中，并告诉您的应用程序它是唯一受信任的证书。它安全且免费，因为您可以控制验证机制，因此您可以附加您自己创建的自签名证书。有关代码示例，请参阅[此博客文章](http://blog.antoine.li/2010/10/22/android-trusting-ssl-certificates/)。

# arrays - excel行获取和填充表

> ID：15849864
> 
> 赞同：0
> 
> 时间：2013-04-06T10:40:12.237
> 
> 标签：arrays, excel, fetch

如果符合条件，是否可以将整行提取到另一张工作表？例如：我有一张不同部门的费用表

```
date           description    amount    department  
01/01/2013     fuel            25         dep1
01/02/2013     fuel            15         dep2
01/02/2013     lunch           18         dep2
01/03/2013     some exp        56         dep3 
```

现在我想要的是让 dep2 的所有“条目”（行）被复制到另一张表上的另一个表中。或者换句话说，由另一个表从该表中获取。请详细解释我是excel新手。谢谢

# java - 关于并发 hashMap 分段和单独锁定

> ID：15849865
> 
> 赞同：0
> 
> 时间：2013-04-06T10:40:27.420
> 
> 标签：java, concurrenthashmap

我正在探索 concurrenthashMap API 并发现`static final int` `DEFAULT_CONCURRENCY_LEVEL = 16;`哪些声明 map 将在内部分为 16 个部分，现在我的问题是，我们知道在并发 hashMap 的情况下，整个 map 对象没有被锁定，而是在一部分上进行了锁定的地图。

有人可以用一张小图片表示地图是如何划分的，以及它是如何在内部被分割破坏的，以及每个线程如何保护它的一部分，请用一张更有用的小图片提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T21:40:28.357

ConcurrentHashMap 有一个“段”数组，其中每个段是一个完全独立的哈希表，受其自己的互斥体保护。调用线程计算给定密钥的哈希码（32 位），然后使用该密钥的前四位来选择要使用的段。

当线程执行 put() 时，它会锁定段的互斥锁。get() 操作有点棘手，因为它首先尝试在*不*锁定互斥锁的情况下获取值。

# session - Spring Security 3.0.5 如何获取应用程序的所有在线用户？

> ID：15849866
> 
> 赞同：1
> 
> 时间：2013-04-06T10:40:30.087
> 
> 标签：session, spring-security

当我为

> org.springframework.security.core.userdetails.UserDetailsS​​ervice

并使用该语句

> sessionRegistry.registerNewSession(user.getUsername(), user);

认证成功后在里面，然后

> sessionRegistry.getAllPrincipals();

列表不为空（但当我从应用程序注销时会话仍保留在列表中），否则此列表将为空。如何在 sessionRegistry 中自动进行会话注册（以及用户注销或会话到期期间的注销）？我的弹簧配置如下：

```
<sec:http auto-config="true" use-expressions="true" access-denied-page="/accessDenied.jsf">
    <sec:form-login login-page="/login.jsf" />
    <sec:session-management session-authentication-strategy-ref="sas" />
</sec:http>

<bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" />

<bean id="scr"
class="org.springframework.security.web.context.HttpSessionSecurityContextRepository" />

<bean id="smf"
class="org.springframework.security.web.session.SessionManagementFilter">
<constructor-arg name="securityContextRepository"
    ref="scr" />
<property name="sessionAuthenticationStrategy"
    ref="sas" />
</bean>

<bean id="sas"
class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
<constructor-arg name="sessionRegistry"
    ref="sessionRegistry" />
<property name="maximumSessions" value="10" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:59:42.750

您很可能忘记[`HttpSessionEventPublisher`在`web.xml`](http://static.springsource.org/spring-security/site/faq/faq.html#faq-session-listener-missing).

另一种可能性是，有问题的委托人还有其他未超时或无效的会话仍然处于活动状态。您的最大会话值为 10。尝试将其设置为“1”以进行测试。

此外，版本 3.0.5 已过时。您应该使用最新版本并及时更新补丁以避免漏洞。

# knockout.js - 为什么将 ko.js 作为脚本标签插入？

> ID：15849871
> 
> 赞同：0
> 
> 时间：2013-04-06T10:40:57.000
> 
> 标签：knockout.js, breeze, single-page-application, durandal

这看起来像 ko.js 正在由 javascript 库动态构建。我在我的项目中找不到它的参考。这个参考来自哪里？

```
 <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="ko" src="App/ko.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:57:38.323

不知道您使用的是什么代码，我会猜测一下：

如果您使用 Code Camper SPA 示例或 Hot Towel 或任何 Durandal 解决方案，请查看 BundleConfig.cs 文件。它包含对示例使用的所有 css 和 js 的引用，包括 knockout.js

如果您正在使用其他东西，则可能在某处优化了 knockout.js 文件。在解决方案中搜索“knockout”一词，您将找到任何引用它的文件。

但是，如果您使用的是 Durandal，则取决于 Knockout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:36:26.270

不确定，但您在寻找[RequireJS](http://requirejs.org/)吗？

> RequireJS 是一个 JavaScript 文件和模块加载器。

# android - Android onPressed 延迟

> ID：15849872
> 
> 赞同：0
> 
> 时间：2013-04-06T10:41:06.503
> 
> 标签：android, android-layout

所以我尝试过使用纯 XML 文件，也尝试过使用 Java 文件中的 onEvent 选项。两者都没有做我想做的事。

我需要将 onPressed 事件添加到 View 对象，以便根据状态更改背景。它确实有效，或者至少它正在改变背景。然而，在我看到的所有 Android 应用程序中，Views onPressed 状态存在某种延迟，因此如果用户按下屏幕并开始滚动，背景不会改变。然而，就我而言，他们总是这样做。因此，每次尝试滚动时，我都会看到 View 对象出现烦人的闪烁。

我该如何做才能使 onPressed 正常工作？

# python - 从命令行向 python 程序传递参数，有什么比 sys.argv 更好的吗？

> ID：15849874
> 
> 赞同：1
> 
> 时间：2013-04-06T10:41:10.720
> 
> 标签：python, function, shell, arguments

我有一个我想从终端运行的 python 脚本，它需要大约 10 个数字参数。到目前为止，我能想到的将参数传递给程序的唯一方法如下：

```
python myscript.py 10,20,30,,40 
```

然后使用 sys.argv 来挑选参数，处理它们并使用它们。问题是，有时中间的某些参数需要为空白，以便程序使用其“默认值”。这意味着目前我需要在参数中使用逗号来指定一个值为空白的值，这很烦人，因为它违反了我在其他程序中看到的标准。

有没有更好的方法来解决这个问题？

干杯，

弥敦道

操作系统：Ubuntu

蟒蛇版本：2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:37:06.367

首先，如果您有一些可以省略的参数，那么这些参数*应该*是*选项*而不是真正的参数。

Python 提供了不止一种解析参数的方法。最好的选择是[`argparse`](http://docs.python.org/dev/library/argparse.html)，它具有大量功能，并且是继续开发的模块。如果您必须支持“旧”版本的 python，那么您可能会对 感兴趣[`optparse`](http://docs.python.org/dev/library/optparse.html)，即使它在 python3.2 中已被弃用。还有一个[`getopt`](http://docs.python.org/dev/library/getopt.html)模仿 C 的 getopt 的模块（不要*使用*它！出于历史原因，它还有更多用于帮助人们使用这些旧式解析）

一个简单的例子`argparse`可能是：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--option-name', action='store', dest='option_name_var')
parser.add_argument('numbers', type=int, nargs='*')

parsed = parser.parse_args()   #parses sys.argv by default
print(parsed.numbers)
print(parsed.option_name_var) 
```

可以用作：

```
$python example.py 1 2 3
[1, 2, 3]
None
$python example.py 1 2 3  --option-name "value"
[1, 2, 3]
value
$python example.py 1 2 3  --option-name 
usage: example.py [-h] [--option-name OPTION_NAME_VAR] [numbers [numbers ...]]
example.py: error: argument --option-name: expected one argument
$python example.py --option-name 
usage: example.py [-h] [--option-name OPTION_NAME_VAR] [numbers [numbers ...]]
example.py: error: argument --option-name: expected one argument
$python example.py --option-name 5
[]
5
$python example.py 1 2 "string"
usage: example.py [-h] [--option-name OPTION_NAME_VAR] [numbers [numbers ...]]
example.py: error: argument numbers: invalid int value: 'string' 
```

请注意数字如何自动转换为整数列表，如果值不是整数或缺少参数等，则会发出错误。

您还有一个默认帮助文本：

```
$python example.py -h
usage: example.py [-h] [--option-name OPTION_NAME_VAR] [numbers [numbers ...]]

positional arguments:
  numbers

optional arguments:
  -h, --help            show this help message and exit
  --option-name OPTION_NAME_VAR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:53:18.823

[http://docs.python.org/2/library/argparse.html](http://docs.python.org/2/library/argparse.html) `argparse`将是您的不错选择。

# asp.net-mvc-4 - Asp.Net MVC 分页列表和传递搜索条件

> ID：15849875
> 
> 赞同：1
> 
> 时间：2013-04-06T10:41:11.600
> 
> 标签：asp.net-mvc-4, pagedlist

我在我的 MVC 页面上使用 Troy Goode 的 PagedList 扩展。通过呈现包含给定记录页面的部分内容，它可以正常工作。

现在我必须实现搜索结果的过滤。我正在使用 AJAX 表单来获取与给定搜索条件匹配的部分包含结果。如果结果少于一页，这很有效。如果过滤结果超出一页，则存在问题。当点击分页链接时，过滤信息消失了，它会导致下一页未过滤信息。

当输入某些内容来过滤搜索结果并且有分页链接时，我可以使用什么机制来传递过滤信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:03:36.653

My PagedList library takes a Func to generate the URL when you call @Html.PagedList(...):

```
page => Url.Action("Index", new { page = page }) 
```

You simply need to customize the parameters you're passing into Url.Action (which is a Microsoft class/method, docs can be found on MSDN).

# php - 根据大写拆分文本块

> ID：15849876
> 
> 赞同：0
> 
> 时间：2013-04-06T10:41:32.877
> 
> 标签：php

我有文本块，其中大写文本是摘要，然后是详细信息。问题是摘要和细节结合在一起，我需要将它们分开。因为如果不同的标题大小我不能使用 substr。

以下是原文

```
 OFF PEAK WEEKS ONLYOnce the property situated in rolling 
```

它应该是

```
 OFF PEAK WEEKS ONLY 
 Once the property situated in rolling 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:46:55.963

```
$rangeBig = range('A', 'Z');
$rangeLittle = range('a', 'z');
for ($i = 1; $i < strlen($text); $i++)
    if (in_array($text[$i-1], $rangeBig) && in_array($text[$i], $rangeLittle)) {
        $text = substr($text, 0, $i - 1)."\n".substr($text, $i - 1);
        break;
    } 
```

假设实际文本以大写字母开头：如果最后一个字符是大写字母而实际是小写字母，则在此处插入新行。

# qt - 将用户数据写入 QTcpSocket

> ID：15849881
> 
> 赞同：0
> 
> 时间：2013-04-06T10:41:59.547
> 
> 标签：qt

如何将用户数据写入 QTcpSocket 并读入

```
QTcpSocket * sock = tcpServer->nextPendingConnection(); 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:45:52.977

Once you get your socket, you can just hook it up via signals/slots to get the data. You will need to save the socket via an instance variable.

Header:

```
QTcpSocket* sock; 
```

Implementation File:

```
YourClass::someMethod {    
    this->sock = tcpServer->nextPendingConnection();
    connect(this->sock, SIGNAL(readyRead()), this, SLOT(startRead()));
}

void YourClass::startRead {
      char buffer[1024] = {0};
      this->sock->read(buffer, client->bytesAvailable());
      cout >> buffer >> endl;
      this->sock->close();
} 
```

# ios - iPad的UIPopoverController“不能用`nil`调用”错误

> ID：15849882
> 
> 赞同：0
> 
> 时间：2013-04-06T10:42:06.290
> 
> 标签：ios, ipad, uipopovercontroller

我正在尝试使 iPhone 应用程序在 iPad 上运行，但 UIPopoverController 出现错误。

```
- (IBAction)photoTapped1 {
if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){
// If in editing state, then display an image picker; if not, create and push a photo view controller.
    if (self.editing) {
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        [self presentViewController:imagePicker animated:YES completion:nil];
        [imagePicker release];
    } else {
        RecipePhotoViewController *recipePhotoViewController = [[RecipePhotoViewController alloc] init];
        recipePhotoViewController.hidesBottomBarWhenPushed = YES;
        recipePhotoViewController.recipe = recipe;
        [self.navigationController pushViewController:recipePhotoViewController animated:YES];
        [recipePhotoViewController release];
    }
}else{
    if (self.editing){
        self.popover = [[UIPopoverController alloc] initWithContentViewController:popover];
        self.popover.delegate =self;
        [popover release];
    }else{
         RecipePhotoViewController *recipePhotoViewController = [[RecipePhotoViewController alloc] init];
         recipePhotoViewController.hidesBottomBarWhenPushed = YES;
         recipePhotoViewController.recipe = recipe;
         [self.navigationController pushViewController:recipePhotoViewController animated:YES];
         [recipePhotoViewController release];
    }}} 
```

我得到的错误是：'NSInvalidArgumentException'，原因：'-[UIPopoverController initWithContentViewController:] 不能用`nil`.'调用。

任何可以帮助我处理此代码的人，我已经在互联网上查看了解决方案和示例，但似乎无法使其工作。

谢谢你。

****___****添加到原始问题****_* ____*****

 ***我在这里添加 recipePhotoViewController，我假设 iPhone 和 iPad 的 ImageView 操作是相同的。

我的.h文件

```
@class Recipe;

@interface RecipePhotoViewController : UIViewController {
@private
    Recipe *recipe;
    UIImageView *imageView;
}

@property(nonatomic, retain) Recipe *recipe;
@property(nonatomic, retain) UIImageView *imageView;

@end 
```

这是我的 .m 文件

```
@implementation RecipePhotoViewController

@synthesize recipe;
@synthesize imageView;

- (void)loadView {
self.title = @"Photo";

imageView = [[UIImageView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
imageView.autoresizingMask = UIViewAutoresizingFlexibleHeight |      UIViewAutoresizingFlexibleWidth;
imageView.contentMode = UIViewContentModeScaleAspectFit;
imageView.backgroundColor = [UIColor blackColor];

self.view = imageView;   }
- (void)viewWillAppear:(BOOL)animated {
imageView.image = [recipe.image valueForKey:@"image"];}
- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation  {
 return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
- (void)dealloc {
[imageView release];
[recipe release];
[super dealloc];
}   @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:47:37.783

您存储在变量中的弹出框的*内容*`popover`显然是`nil`. 我看不到它是在您提供的代码中创建的。

也许您打算将食谱照片控制器呈现为弹出框的内容。在这种情况下，你会做类似的事情

```
RecipePhotoViewController *recipePhotoViewController = [[RecipePhotoViewController alloc] init];
self.popover = [[UIPopoverController alloc] initWithContentViewController:recipePhotoViewController]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:47:58.107

您正在以错误的方式初始化弹出控制器：

```
self.popover = [[UIPopoverController alloc] initWithContentViewController:popover]; 
```

您应该传递要在弹出框内显示的控制器 - 而不是弹出框本身（这是`nil`因为您尚未初始化它）！

也许这对你有用？

```
 UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    self.popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker]; 
```

如果这是正确的，那么您还应该**呈现**刚刚创建的弹出窗口：[– presentPopoverFromRect:inView:permittedArrowDirections:animated:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html#//apple_ref/occ/instm/UIPopoverController/presentPopoverFromRect%3ainView%3apermittedArrowDirections%3aanimated%3a)

——例如：

```
[self.popover presentPopoverFromRect:sender.frame inView:[self view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

`sender`的论点在哪里：

```
- (IBAction)photoTapped1:(id)sender { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:50:18.453

问题出在这行代码中，

```
 self.popover = [[UIPopoverController alloc] initWithContentViewController:popover]; 
```

试试这样

```
 UIViewController* popoverContent = [[UIViewController alloc] init];
            UIView*   popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 400, 320, 260)];
        popoverContent.view = popoverView;
//Add what ever you want popoverView

 self.popover = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
        self.popover.delegate =self; 
```***

# ruby-on-rails - 可视化创建 Rails 模式和关系的工具

> ID：15849884
> 
> 赞同：2
> 
> 时间：2013-04-06T10:42:28.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否有可用于快速创建示例模式结构的工具，然后可以在编码时用作参考。

我知道[railroady](https://github.com/preston/railroady)，从现有的 rails 应用程序创建模式/模型可视化，但是是否有任何工具可以手动创建这些模式和关系。

谢谢。

# html - 减小浏览器宽度时使 div 保持在同一位置？

> ID：15849888
> 
> 赞同：0
> 
> 时间：2013-04-06T10:42:40.860
> 
> 标签：html, position, scrollbar, wrapper

[http://wthdesign.net/test/html/01-homepage.html](http://wthdesign.net/test/html/01-homepage.html)

我创建了一个名为“rightColumn”的 id，当我减小浏览器的宽度时，它会被下推到下一列，如何使 id 使用滚动条保持在其原始位置？

我知道我可以制作一个外包装来阻止“leftColumn”、“middleColumn”和“rightColumn”，但是除了创建外包装之外还有其他解决方案吗？

谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:55:13.490

我检查了您的代码，在我看来，您的 rightColumn div 不像 leftColumn 和 middleColumn 那样位于内容 div 内。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:53:20.937

只需添加到 rightColumn

```
overflow:hidden; 
```

# c# - IRibbonExtensibility->GetCustomUI 从 Connect.cs 以外的类调用

> ID：15849889
> 
> 赞同：0
> 
> 时间：2013-04-06T10:42:47.230
> 
> 标签：c#, outlook-addin, ribbon, extensibility, comaddin

我正在使用 Vs2010 -> 可扩展性-> 共享加载项

连接.cs 文件

```
public class Connect : Object, Extensibility.IDTExtensibility2, IRibbonExtensibility 
{
      public string GetCustomUI(string RibbonID) 
      { 
          return MyResources.customUI; 
      }
} 
```

功能区是使用上面的代码创建的。

我有类 customRibbons.cs

```
public class Create_Custom_Ribbons : IRibbonExtensibility
{
    Outlook.Application applicationObject;
    public Create_Custom_Ribbons(Outlook.Application application)
    {
        try
        {                               
            applicationObject = application;
            GetCustomUI("");
        }
        catch(Exception ex)
        {
            MessageBox.Show(""+ex.StackTrace);
        }
    }
    public string GetCustomUI(string RibbonID)
    {
        return MyResource.customUI;
    }
} 
```

在 Connect.cs 上

```
public void OnStartupComplete(ref System.Array custom)
{
        try
        {
            customRibbons.Create_Custom_Ribbons cu = new 
                customRibbons.Create_Custom_Ribbons(applicationObject);
        }
        catch (Exception ex)
        {
            MessageBox.Show("" + ex.StackTrace);
        }
} 
```

但是丝带没有被创建。请谁能告诉我我做错了什么或任何其他方式来实现这一点。我无法理解它没有被创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:17:56.363

请参阅我在 Office 开发组的回复： http: [//social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/394ac918-f32f-4c7b-9dee-a6d45f1bdf46](http://social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/394ac918-f32f-4c7b-9dee-a6d45f1bdf46)

# java - 如何在偶数或奇数位置向 ArrayList 添加元素？

> ID：15849895
> 
> 赞同：-2
> 
> 时间：2013-04-06T10:43:08.397
> 
> 标签：java

我有两种填充一个 ArrayList 的方法，我希望其中一种方法在偶数位置添加元素，而另一种方法在奇数位置添加元素，以便获得交错的数据列表。

如何在偶数或奇数位置添加元素？

```
for (int i = 0; i < mData.size(); i++) {
     myList.add( ,mData.get(i))
{ 
```

**澄清。我不需要偶数或奇数的列表，我需要从`i`for 循环中的变量中获取下一个偶数或奇数。即`i`只`mdata.size()`在偶数位置存储元素，即使它超过了它的`mData`大小**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:56:56.767

`Lists`是具有动态分配大小的结构，因此很难准确地放置在奇数或偶数位置。您添加元素，大小为 1，添加第二个，大小为 2 等。 **但是**您可以使用“同步”方法以特定顺序将元素添加到列表中。一种方法将首先开始，并将在位置 0、2、4 等处添加元素，而第二种方法将在 1、3、5 等处添加元素。

但我认为这`List`不是适当的结构。如果您想将项目精确地添加到奇数或偶数位置，请选择具有固定大小的结构，即经典数组，填充数组，然后您可以将其转换为动态列表（如果您需要在某处传递/发送完成列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:45:03.197

您可以使用模运算符执行类似的操作

```
 if (i % 2 != 0)
        { 

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:45:11.273

`if(i % 2) == 0`然后`i`是偶数。否则，`i`就很奇怪了。

运算符返回两个数字的`%`余数，例如：

`5 % 2`为 1，但`4 % 2`为 0。

模数可能很慢，在你的情况下`i`是整数，所以你可以这样做：

```
if (x & 1 == 0) {
   Even
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T10:46:39.367

使用以下代码可能会更好：

```
 public static boolean isEven(int i) {
    return (i & 1) == 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-06T10:52:04.753

这 shure 会启动 ConcurrentModificationException，当您通过它的索引遍历它时，您无法修改列表（除非它是同步列表，例如 Fujaba 库提供的列表和其他集合）。我建议您首先克隆列表（克隆，不再引用列表），遍历克隆，使用 Darshan 建议的模运算符，然后从原始列表中删除值。

# php - Facebook 使用图形 API 获取用户关于页面信息的信息

> ID：15849898
> 
> 赞同：0
> 
> 时间：2013-04-06T10:43:14.887
> 
> 标签：php, facebook, facebook-graph-api, web, userinfo

有什么方法可以使用图形 API 在用户关于页面中获取信息？

例如，我们可以通过这里获取用户工作和教育

> [http://www.facebook.com/van.trankhanh.1/about](http://www.facebook.com/van.trankhanh.1/about)

但是如果我们使用这个，没有关于工作和教育的信息

> [https://graph.facebook.com/van.trankhanh.1?access_token=AAAEaY81Vw24BAB96Yf2VNWMm8GdjMctjxGQj3ycrtoi7RhMn4SCOOVGcgtaZCuyHbP3nNyKulleaQ440IvQKHWlub2TZC6TrIWrLGIYgZDZD](https://graph.facebook.com/van.trankhanh.1?access_token=AAAEaY81Vw24BAB96Yf2VNWMm8GdjMctjxGQj3ycrtoi7RhMn4SCOOVGcgtaZCuyHbP3nNyKulleaQ440IvQKHWlub2TZC6TrIWrLGIYgZDZD)

# mysql - Mysql存储过程没有产生预期的结果

> ID：15849899
> 
> 赞同：2
> 
> 时间：2013-04-06T10:43:17.793
> 
> 标签：mysql, stored-procedures

我必须`mysql stored procedure`从一个表中获取值到另一个表。当我调用存储过程时，它运行良好，但问题是，`inserting previous column`如果`current column`值为`null`.

示例：假设第二个员工姓名列为空，因为它在循环中运行，所以它在第二个员工姓名的位置插入第一个员工姓名，但`new table`如果我的列值为空，我希望我的列值为空。`existing table`下面是我的存储过程。

```
CREATE  PROCEDURE `frstprocedure`()
BEGIN
DECLARE emp_name varchar(225);
DECLARE emp_age varchar(225);
DECLARE emp_dept varchar(225);

DECLARE masterCursor CURSOR for select empname,empage,empdept from Employee;
DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done=1;
SET done=0;
OPEN masterCursor;
my_loop: LOOP
FETCH masterCursor into emp_name,emp_age, emp_dept;
IF done THEN
CLOSE masterCursor;
LEAVE my_loop;
END IF;
insert into second_table values(emp_name,emp_age, emp_dept);
END LOOP my_loop;
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:02:50.477

尝试`after insert statement`在存储过程中添加以下行，

```
SET emp_name=null;
SET emp_age=null;
SET emp_dept-null 
```

这将在每次迭代中将所有字段值初始化为 null，因此将存储正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:37:23.420

您也可以`default values`在声明变量时进行设置。请参阅下面的代码

```
DECLARE emp_name varchar(225) default null;
DECLARE emp_age varchar(225) default null;
DECLARE emp_dept varchar(225) default null; 
```

# android - FB 登录（如 pinterest）在单个请求中使用 sdk 3.0 并获得许可 email、basic_info、publish_action

> ID：15849901
> 
> 赞同：1
> 
> 时间：2013-04-06T10:43:22.787
> 
> 标签：android, facebook-graph-api, facebook-login

![在此处输入图像描述](https://i.stack.imgur.com/1PK8j.png)

如果我有上次会话的某些信息（他们上次使用该应用程序），我是否可以使用 Facebook SDK 重新打开 Facebook 会话？

# c++ - 在 Excel 中关闭对 dll 的访问

> ID：15849903
> 
> 赞同：3
> 
> 时间：2013-04-06T10:43:47.053
> 
> 标签：c++, excel, vba, dll

我目前正在使用 C++ 和 Excel 进行项目。我制作了一个 DLL 来在 Excel 中导出 C++ 函数。我的问题是，当我在 Excel 中测试我的函数并想修改我的 DLL 时，我需要退出 Excel，因为它仍在运行 .dll 文件，而 Visual Studio C++ 无法删除以前的 DLL 来制作另一个。

每次关闭并再次启动 Excel 有点烦人，所以我想知道是否有办法在 VBA 脚本完成后关闭对 Dll 的访问。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:19:26.023

您可以使用的一种方法是运行一个单独的 excel 实例并像这样自动打开/关闭 excel ......（这是我在浏览器中输入的伪代码）

```
Sub TestMyDll()
  Dim xl as New Excel.Application
  xl.Workbooks.Open "file"
  xl.Run "MyFunctionCall"
  xl.Workbooks(1).Close False
  xl.Quit
  Set xl = Nothing
End Sub 
```

第二种方法是动态加载和卸载 dll。这可能是我会使用的方法。作为测试，我将 Winhttp.dll 复制到另一个目录并将其命名为 my.dll。不要将 dll 与包含您的代码的工作簿放在同一目录中，否则 excel 可能会加载 dll。

```
Option Explicit

Private Declare Function FreeLibrary Lib "kernel32" (ByVal hLibModule As Long) As Long
Private Declare Function LoadLibrary Lib "kernel32" Alias "LoadLibraryA" (ByVal lpLibFileName As String) As Long

'my.dll is a copy of Winhttp.dll in a directory other than where this workbook is saved.
'Calling this will result in an error unless you call LoadLibrary first
Private Declare Function WinHttpCheckPlatform Lib "my.dll" () As Long

Private Sub Foo()
    Dim lb As Long

    lb = LoadLibrary("C:\Users\David\Downloads\my.dll")

    MsgBox WinHttpCheckPlatform

    'I found I had to do repeated calls to FreeLibrary to force the reference count
    'to zero so the dll would be unloaded.
    Do Until FreeLibrary(lb) = 0
    Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T19:40:46.477

自动打开/关闭 Excel 的另一种方法是使用 IDE 的功能（如果有的话）为您执行此操作。

例如，CVF、IVF 和 CodeBlocks 都提供了启动 Excel 和运行插件/dll（以及实时调试）的工具。

例如，在 CodeBlocks 中转到 Project/Set Program's arguments ... 。这将启动一个对话框。您将带有完整路径的 xls 文件放在 Program Arguments 中（例如 C:\myexceltest.xls），并将 Excel 的路径放在 Host Application 字段中（例如 D:\Apps\MSO\Office10\EXCEL.EXE ... . 或您的 Excel.EXE 所在的任何位置）。

然后只需运行或调试，它就会自动运行。运行时您无法更改 DLL，但是显式关闭 Excel 或从 IDE 关闭 Excel 可以让您返回源代码，进行更改并单击运行或 IDE 中的任何内容，Bob 是您的 Excel 叔叔，您的 .xls 将自动启动。

如果您在源代码中设置了断点，那么在 IDE 中运行 Debug 将允许您实时调试 DLL。

这应该适用于任何语言（例如，这也适用于 Fortran DLL 等）

# jquery - 无限滚动后应用悬停效果

> ID：15849910
> 
> 赞同：0
> 
> 时间：2013-04-06T10:44:47.980
> 
> 标签：jquery, infinite-scroll

我有一个悬停图像功能，由于某种原因不适用于无限滚动加载的新内容。

这是悬停功能：

```
function hover_overlay_article() {

     jQuery('a.thumblink, a.rating').each(function() {

     jQuery(this).hover( function() {
        $selector =  jQuery(this).parent().children('a.thumblink').children('img');
        $selector.stop().animate({opacity : .1}, 250, 'easeOutCubic');
    }, function() {
        $selector.stop().animate({opacity : 1}, 250, 'easeOutCubic');
    });

  });
}

hover_overlay_article(); 
```

这是我的无限卷轴：

```
<script>
  var infinite_scroll = {
  loading: {
img:"/_assets/images/ajax-loader.gif",
msgText: "",
finishedMsg: ""
},
   "nextSelector":"a.next.page-numbers",
   "navSelector":"div.pagination",
   "itemSelector":"div.fullarticle",
   "contentSelector":".articlecontainer"
};

 jQuery( infinite_scroll.contentSelector ).infinitescroll( infinite_scroll );
</script> 
```

有人可以帮我解决这个问题吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:47:41.090

您需要添加`hover_overlay_article()`您的`callback()`功能。尝试这样的事情：

```
<script>
    var infinite_scroll = {
        loading: {
            img:"/_assets/images/ajax-loader.gif",
            msgText: "",
            finishedMsg: ""
        },
        "nextSelector":"a.next.page-numbers",
        "navSelector":"div.pagination",
        "itemSelector":"div.fullarticle",
        "contentSelector":".articlecontainer"
        }, function(arrayOfNewElems) {
            hover_overlay_article();
        });

    jQuery( infinite_scroll.contentSelector ).infinitescroll( infinite_scroll );
</script> 
```

如果它有效，那么您可以尝试更改代码以仅在最新元素上运行您的函数。它现在是第一个元素的方式将再次受到您的 jQuery 方法的影响。这是您可以执行的操作的示例：

```
function(arrayOfNewElems) {
    for(var i=0;i<arrayOfNewElems.length;i++)
    hover_overlay_article(arrayOfNewElems[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:50:25.523

尝试这个：

```
<script>
      var infinite_scroll = {
      loading: {
    img:"/_assets/images/ajax-loader.gif",
    msgText: "",
    finishedMsg: ""
    },
       "nextSelector":"a.next.page-numbers",
       "navSelector":"div.pagination",
       "itemSelector":"div.fullarticle",
       "contentSelector":".articlecontainer"
    }, function(arrayOfNewElems){

        hover_overlay_article();
    });

     jQuery( infinite_scroll.contentSelector ).infinitescroll( infinite_scroll );
    </script> 
```

请注意，这会注册重复事件以悬停在现有元素上。你应该先删除那些，或者用'arrayOfNewElements'做一些事情。

# python - 如何使用 SQLAlchemy 获取列值？

> ID：15849911
> 
> 赞同：4
> 
> 时间：2013-04-06T10:44:48.997
> 
> 标签：python, database, sqlalchemy, flask

我正在使用 Flask+Python 并检查**用户名**（和**电子邮件**）是否已经被使用，我正在使用这个逻辑：

```
@app.route('/register', methods=['GET', 'POST'])
def register():
    form = SignupForm()
    if form.validate_on_submit():
      user = Users.query.filter_by(username=form.username.data).first()
      email = Users.query.filter_by(email=form.email.data).first()
      if form.username.data in user:
        error = 'Username already taken. Choose another'
      elif form.email.data in email:
        error = 'Email already registered. Login or register with another Email'
      else:
          user = Users( 
          form.username.data,
          form.password.data,
          #form.confirm.data ,
          form.email.data,
          1,
          # form.cityaddress.data,
          # form.countryaddress.data,
          #form.accept_tos.data,
      )
      db.session.add(user)
      db.session.commit()
      return redirect(url_for('index')) 
```

但它给出的错误就像`object has no attribute 'username'`

我知道我从 db 获取数据的逻辑不正确。我对 SQLalchemy 知之甚少。

你能建议我如何从表中获取`Username`（和`Email`）列值`Users`，然后检查它们是否相同`form.username.data`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T12:11:30.037

您的查询看起来不错，返回值`first()`将是您的 User 对象的实例，或者`None`如果没有结果：

```
 u = Users.query.filter_by(username=form.username.data).first()
  if u is not None:
      print u.username
      print u.email 
```

因此，鉴于此，您的逻辑如下所示：

```
 user_by_name = Users.query.filter_by(username=form.username.data).first()
  user_by_email = Users.query.filter_by(email=form.email.data).first()
  if user_by_name:
    error = 'Username already taken. Choose another'
  elif user_by_email:
    error = 'Email already registered. Login or register with another Email'
  else:
      #Unique user and email 
```

您也可以在一个查询中执行此操作：

```
 existing = Users.query.filter((Users.username == form.username.data) | (Users.email == form.email.data)).all()
 if existing:
     error = 'User or email taken' 
```

注意使用`filter`而不是`filter_by`- 您不能在`filter_by`. 这是一个快速[工作示例](https://gist.github.com/DazWorrall/5325897)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:06:41.883

你的错误让我很困惑。也就是说，除了测试之外，您的代码看起来还不错。然后我用这个：

```
user = Users.query.filter_by(username=form.username.data).first()
...
if user is not None:
    error("user already found") 
```

# javascript - 响应屏幕宽度的换行列表

> ID：15849917
> 
> 赞同：1
> 
> 时间：2013-04-06T10:45:12.193
> 
> 标签：javascript, jquery, css

我怀疑这是一个 javascript 技巧，但请随时告诉我，有一种纯 CSS 方法可以做到这一点。

我有一个项目列表（在本例中为图片），我想在类似布局的网格中显示这些项目。我的要求很简单：

*   每个项目之间的间距相等
*   “对齐”对齐，即一行的第一个元素粘在左边，最后一个元素粘在右边。
*   ***每行的项目数根据屏幕宽度而变化。***

我尝试了几件事，但每件事都有一些问题：

*   `li.item { padding-right: somepx; } li.item:nth-child { padding-right: 0px; }`
    *   nth-child 需要随着屏幕尺寸的变化而变化。
*   `li.item { padding-left: some/2px; padding-right: some/2px; }`
    *   第一个和最后一个项目不会粘在边缘。

如您所见，我只能实现上述 3 个要求中的 2 个，有什么好的跨浏览器兼容技巧可以启发我吗？

谢谢！

# c# - 将 DataGridView 的 DataSource 设置为 null/false 会删除 DataGridView 的所有默认设置

> ID：15849920
> 
> 赞同：4
> 
> 时间：2013-04-06T10:45:45.987
> 
> 标签：c#, datagridview, .net-3.5

在 DataGridView 中，当我设置`dataGridView.DataSource = null`or时`dataGridView.DataSource = false`，它会删除我设置的所有默认设置（属性）。

不设置时的外观`DataSource`（实际`null`参见`Mark`列`DataGridViewComboBoxColumn`）

[![在此处输入图像描述](https://i.stack.imgur.com/KCsy6.png "点击放大！")](https://i.stack.imgur.com/KCsy6.png "点击放大！")

`DataSource`在 DataGridView中设置`null`或`false`加载项目后：

[![在此处输入图像描述](https://i.stack.imgur.com/uCDLn.png "点击放大！")](https://i.stack.imgur.com/uCDLn.png "点击放大！")

请参阅此处`Id`的列是可见的，默认情况下我将其设置为可见假（来自属性窗口）。该`Mark`列也`DataGridViewTextBoxColumn`从`DataGridViewComboBoxColumn`.

我真正想要的是：我只想清除所有行（换句话说，我想在从数据库中删除记录后将 DataGridView 设置为空白）。像这个：

[![在此处输入图像描述](https://i.stack.imgur.com/ETfjh.png "点击放大！")](https://i.stack.imgur.com/ETfjh.png "点击放大！")

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T12:29:29.470

设置`datagridview.DataSource = null`不会重置/更改列或其属性

如果您有预定义的列（在设计器中），请检查该代码行是否`datagridview.AutoGenerateColumns = False`可以正确执行...

因为如果`datagridview.AutoGenerateColumns = True`更多的列将被添加到 datagridview 的预定义列

# c++ - C ++如何使二维引擎平台独立

> ID：15849921
> 
> 赞同：0
> 
> 时间：2013-04-06T10:45:51.990
> 
> 标签：c++, cross-platform, abstraction, pimpl-idiom

使用跨平台抽象 API 创建一个简单的 2D sprite 引擎 ■ 演示应该是完全跨平台的，并且没有特定于平台的标头 ■ 跨平台代码与平台相关代码完全隔离，因为没有任何包含的痕迹任何平台无关文件中的平台特定标头。

我有这个任务，但我对如何跨平台制作东西感到非常困惑。我已经有一个能够做它必须做的事情的引擎，但我需要它是跨平台的。我主要想知道我可以包含哪些内容（或者，我如何知道某些内容是否使用特定于平台的代码），如果我不能包含某些内容，因为它们是特定于平台的，我不知道如何在没有包括它。根据一位同学的说法，解决方案存在于抽象和 Pimpl 中，但我找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:44:24.370

除了像@ddriver 建议的那样在多平台库之上简单地构建您的 2d 引擎之外，您还可以为像素颜色分配一个大缓冲区并编写代码来渲染所有基元（单个像素、线条、框、圆、椭圆、弧，纹理/位图/图像，文本字符）。一旦您在此缓冲区中完成了帧的渲染，您就可以调用那里的任何库来将此缓冲区显示为屏幕或窗口中的图像。或者，如果您的代码在没有任何支持库的裸硬件上运行，您可以简单地将这个缓冲区复制到显卡的视频缓冲区中。

您的 API 可能如下所示：

```
typedef struct
{
  unsigned BitsPerPixel; // 8,16,32
  unsigned ColorScheme; // something that tells the order of the R, G and B components and how many bits are in each or if there's a palette used instead of RGB
  unsigned Width; // in pixels
  unsigned Height; // in pixels
  size_t Size; // buffer size in bytes
  void* Buf; // pointer to the beginning of the buffer itself
  // extra info
} tBuffer;

int BufferInit(tBuffer* Buf, unsigned BitsPerPixel, unsigned ColorScheme, unsigned Width, unsigned Height)
{
  Buf->BitsPerPixel = BitsPerPixel;
  Buf->ColorScheme = ColorScheme;
  Buf->Width = Width;
  Buf->Height = Height;
  Buf->Size = Buf->Width * Buf->Height * Buf->BitsPerPixel / 8;
  Buf->Buf = malloc(Buf->Size);
  if (Buf->Buf != NULL)
  {
    memset(Buf->Buf, 0, Buf->Size);
    return 1;
  }
  return 0;
}

void BufferDone(tBuffer* Buf)
{
  free(Buf->Buf);
  Buf->Buf = NULL;
}

unsigned FindClosest8BitPaletteIndex(unsigned R, unsigned G, unsigned B)
{
  // find the palette element that's closest to the given R, G and B
  // and return its index
}

unsigned BufferRgbToColor(tBuffer* Buf, unsigned R, unsigned G, unsigned B)
{
  switch (Buf->BitsPerPixel)
  {
  case 8:
    return FindClosest8BitPaletteIndex(R, G, B);
  case 16:
    return ((R & 0x1F) << 11) | ((G & 0x3F) << 6) | (B & 0x1F); // 5-6-5
  case 32:
    return ((R & 0xFF) << 16) | ((G & 0xFF) << 8) | (B & 0xFF); // (8)-8-8-8
  default:
    return 0; // error
  }
}

void BufferSetPixel(tBuffer* Buf, unsigned X, unsigned Y, unsigned Color)
{
  switch (Buf->BitsPerPixel)
  {
  case 8:
    *((unsigned char*)Buf->Buf + Buf->Width * Y + X) = Color;
    break;
  case 16:
    *((unsigned short*)Buf->Buf + Buf->Width * Y + X) = Color;
    break;
  case 32:
    *((unsigned*)Buf->Buf + Buf->Width * Y + X) = Color;
    break;
  }
} 
```

然后你可以像这样使用它：

```
tBuffer buf;
if (BufferInit(&buf, 32, 0, 1024, 768))
{
  BufferSetPixel(&buf, 512, 384, BufferRgbToColor(&buf, 0xFF, 0xFF, 0xFF));
  // make the contents of buf.Buf visible in some way
  BufferDone(&buf);
} 
```

这应该会给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:56:25.420

好吧，如果你想要一个独立于平台的引擎，那么你需要一个可移植的库。

首先是 Qt，它本身提供了 OpenGL 图形的抽象（只是在几个不同的平台上打开一个 OpenGL 上下文可能是底部区域的主要痛苦，但 Qt 使其可移植、灵活并且只需几行代码代码）。它还具有 QML，这是一种开发速度更快的声明性语言。围绕 Qt 构建了许多 2d 和 3d 引擎（查看[V-Play](http://v-play.net/)）。使用 QtQuick2，您可以获得硬件加速图形。您甚至可以在运行时在 2d 对象上键入运行片段和矢量着色器。

然后是 Allegro 和 SDL 之类的库——它们相当便携，尽管对移动平台的支持还处于相当原始的阶段。这些库本身比 Qt 更基础。两者都支持 OpenGL，但它们自己的图形功能微不足道。

还有 JUCE，它提供了一些图形功能，尽管您几乎必须依赖原始 OpenGL，但没有高级抽象。

还有像 MoSync 或 Marmalade 这样的库，它们专注于移动平台，而桌面支持似乎不存在，所以可能不是一个好的选择。

我开始使用 Qt 的原因是因为它是迄今为止最强大、最灵活且独立于所有替代方案的平台。更不用说有很多书籍、大量教程、非常详细的文档和重要的社区。这是我使用和经常推荐的。您甚至可以免费使用它开发商业应用程序，唯一的条件是动态链接。

# r - 如何正确设置直方图？

> ID：15849926
> 
> 赞同：2
> 
> 时间：2013-04-06T10:46:32.207
> 
> 标签：r, histogram

这是我在（2021年更新：链接失效... [http://s.yunio.com/87HT7f](http://s.yunio.com/87HT7f)）中的数据文件，请下载并保存为mydata。

```
y<-scan("mydata")
hist(y,breaks=c(0,60,70,80,90,100),freq=TRUE)
axis(2,at=seq(0,20,length.out=5),labels=c(0,5,10,15,20)) 
```

有两个问题：

```
1.Warning message:  
In plot.histogram(r, freq = freq1, col = col, border = border, angle = angle,  :  
  the AREAS in the plot are wrong -- rather use freq=FALSE 
```

我只想要频率而不是概率，在 y 轴上计数的次数，如何使警告消息消失？

2.运行时

```
axis(2,at=seq(0,20,length.out=5),labels=c(0,5,10,15,20)) 
```

`20`y轴上没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:18:22.020

对于第一个问题，这是一个警告，而不是错误。此警告表示每个条的视觉区域与其实际频率不对应 - 您可以从具有最大面积但频率仅为 5 的第一个条中看到它。

对于第二个问题，您必须在`ylim=c(0,20)`里面设置`hist()`才能看到数字 20，因为 y 轴比 20 短。函数`axis()`只绘制标签，它不会改变轴的长度（最初数字 20 没有空间）。

```
hist(y,breaks=c(0,60,70,80,90,100),freq=TRUE,ylim=c(0,20))
axis(2,at=seq(0,20,length.out=5),labels=c(0,5,10,15,20)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:38:37.387

检查手册`hist`：

> ```
> freq:
>      Defaults to 'TRUE' _if and only if_ 'breaks' are equidistant
>      (and 'probability' is not specified). 
> ```

# ios - 如何回到原来的场景？

> ID：15849928
> 
> 赞同：0
> 
> 时间：2013-04-06T10:46:45.960
> 
> 标签：ios, cocoa-touch, segue

我使用segue从场景A导航到场景B，并想通过触摸按钮返回A。我是否必须创建一个新的 segue 才能返回，还是应该做其他事情？如果我创建一个新的 segue，它会是循环引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:45:02.127

如果您使用模态转场样式，则取决于您转场的方式，那么您必须这样做，

```
[self dismissModalViewControllerAnimated:YES]; 
```

if push style segue

```
[self.navigationController popViewControllerAnimated:YES]; 
```

在您希望使用的按钮的 IBAction 方法中根据您的 segue 样式执行任何操作。

# java - 缓冲阅读器更改

> ID：15849929
> 
> 赞同：0
> 
> 时间：2013-04-06T10:46:51.933
> 
> 标签：java, bufferedreader

嗨，我想用扫描仪替换代码中的 BufferedReader？我写了这段代码，但后来意识到我们不允许使用 bufferedreader。但还没有一个线索，甚至如何去，

```
 public static void Option1Method() throws IOException 
{
 FileWriter aFileWriter = new FileWriter("wordlist.txt", true);
 PrintWriter out = new PrintWriter(aFileWriter);
 String word = JOptionPane.showInputDialog(null, "Enter a word");

 out.println(word);
 out.close();

 aFileWriter.close();

 String inputFile = "wordlist.txt";
 String outputFile = "wordlist.txt";
 FileReader fileReader = new FileReader(inputFile);
 BufferedReader bufferedReader = new BufferedReader(fileReader);
 String inputLine;
 List<String> lineList = new ArrayList<String>();
 while ((inputLine = bufferedReader.readLine()) != null) {
    lineList.add(inputLine);
  }
 fileReader.close();

 Collections.sort(lineList);

 FileWriter fileWriter = new FileWriter(outputFile);
 PrintWriter out1 = new PrintWriter(fileWriter);
 for (String outputLine : lineList) {
     out1.println(outputLine);
 }
 out1.flush();
 out1.close();
 fileWriter.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:21:24.590

看看类的定义[`hasNextLine`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextLine%28%29)和类[`nextLine`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)中的定义`Scanner`。

虽然`new Scanner(fileReader)`可行，但您宁愿将文件名直接传递给`Scanner`的构造函数。

# c# - 如何在 c# 中获取 RadToolBarDropDown 选定项的值

> ID：15849931
> 
> 赞同：1
> 
> 时间：2013-04-06T10:47:00.603
> 
> 标签：c#, asp.net, c#-4.0, telerik

如何`RadToolbarDropDown`在代码隐藏文件中获取所选项目的值。就我而言，我有一个 RadToolBar，我在其中动态创建`RadToolBarDropDown`. 正如我的代码所示，我动态设置了这些下拉值和文本。

```
RadToolBarDropDown dd = new RadToolBarDropDown();
if (ds.HasRows())
        {
            DataTable dt = ds.Tables[0];
            foreach (DataRow row in dt.Rows)
            {
                RadToolBarButton rtb = new RadToolBarButton();
                rtb.Text = row["Description"].ToString();
                rtb.Value = row["ProblemStatusID"].ToString();
                rtb.CommandName = "StatusChange";
                rtb.CommandArgument = row["ProblemStatusID"].ToString();
                dd.Buttons.Add(rtb);
            }
        }
        RadToolBarItem item = dd;
        mlmToolBar.Items.Add(item); 
```

现在，当命令名称“StatusChange”触发时，我想在 cs 中获取所选项目的值。我想获得下拉菜单的点击值。如何获得点击的下拉值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:33:05.330

有两种方法可以处理下拉项的按钮单击事件。您可以在服务器端处理它，也可以在客户端处理它。让我们一一来看：

服务器端：

假设我的页面上有一个 rad 工具栏控件。这是相同的代码：

```
 <telerik:RadToolBar runat="server" ID="rtlMyToolBar" 
OnButtonClick="rtlMyToolBar_ButtonClick" ></telerik:RadToolBar> 
```

请注意，我已经处理了 OnButtonClick 事件。我们接下来会看看它。

从后面的代码中，我添加了一个下拉控件并将按钮添加到下拉列表中。这是相同的代码：

```
RadToolBarDropDown dd = new RadToolBarDropDown("Drop Down - Handled Server Side");

        RadToolBarButton rtb = new RadToolBarButton();
        rtb.Text = "Bold";
        rtb.Value = "Bold";
        rtb.CommandName = "Bold";
        rtb.CommandArgument = "Bold";
        dd.Buttons.Add(rtb);

        rtb = new RadToolBarButton();
        rtb.Text = "Italic";
        rtb.Value = "Italic";
        rtb.CommandName = "Italic";
        rtb.CommandArgument = "Italic";
        dd.Buttons.Add(rtb);

        rtb = new RadToolBarButton();
        rtb.Text = "Underline";
        rtb.Value = "Underline";
        rtb.CommandName = "Underline";
        rtb.CommandArgument = "Underline";
        dd.Buttons.Add(rtb);

        rtlMyToolBar.Items.Add(dd as RadToolBarItem); 
```

现在让我们看一下事件处理程序：

```
protected void rtlMyToolBar_ButtonClick(object sender, RadToolBarEventArgs e)
    {
        var toolBarButton = e.Item as RadToolBarButton;
        string commandName = toolBarButton.CommandName;
        if (commandName == "YourCommandName")
        {
            //Your logic
        }
    } 
```

客户端：

现在让我们看看如何监听客户端的下拉按钮点击。以下是 rad 工具栏的代码片段：

```
 <telerik:RadToolBar runat="server" ID="rtlMyToolBar2"
 OnClientButtonClicked="OnClientButtonClicked"></telerik:RadToolBar> 
```

请注意，现在我正在监听 OnClientButtonClicked 事件。事件处理程序是一个 javascript 函数引用。

这是javascript代码：

```
<script>
            function OnClientButtonClicked(sender, args) {
                $("#status").append("OnClientButtonClicked: " + args.get_item().get_text() + 
                " - Command Name: "  + 
                args.get_item().get_commandName()  + "<br/>");
            }

        </script> 
```

所有 Telerik 控件都有丰富一致的客户端和服务器端 API。

这是上述代码的 GIST 链接：[https ://gist.github.com/lohithgn/5329716](https://gist.github.com/lohithgn/5329716)

这是一个在我们的现场演示站点中展示客户端 api 的示例：http: [//demos.telerik.com/aspnet-ajax/toolbar/examples/clientside/clientevents/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/toolbar/examples/clientside/clientevents/defaultcs.aspx)

这是客户端 API 基础帮助文档： [http ://www.telerik.com/help/aspnet-ajax/toolbar-clientsidetoolbaritem.html](http://www.telerik.com/help/aspnet-ajax/toolbar-clientsidetoolbaritem.html)

谢谢

# ms-access - 如何从 delphi XE2 访问 Microsoft Access 2013 数据库？

> ID：15849933
> 
> 赞同：1
> 
> 时间：2013-04-06T10:47:16.030
> 
> 标签：ms-access, delphi-xe2, dataprovider, office-2013, ms-access-2013

我想知道如何从 Delphi XE 2 连接到 MS Access 2013 数据库？我通常对 MS Access 2010 使用“Provider=Microsoft.ACE.OLEDB.12.0”，但它不再适用于 2013 年？任何的想法 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:48:14.213

我刚刚在具有 64 位 Access_2013 的 Windows_7 机器上测试了以下 VBScript 代码...

```
Option Explicit
Dim con, rst
Set con = CreateObject("ADODB.Connection")
con.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data source=C:\Users\Gord\Desktop\Database1.accdb;"
Set rst = CreateObject("ADODB.Recordset")
rst.Open "SELECT Field1 FROM Table1", con
Wscript.Echo rst("Field1").Value
rst.Close
Set rst = Nothing
con.Close
Set con = Nothing
Wscript.Echo "Done." 
```

...而且效果很好，所以我不相信`Provider=`您引用的字符串*本身*就是问题。您的设置肯定有其他问题。

## 编辑

比较两台 Windows_7 机器，一台使用 64 位 Office_2010，另一台使用 64 位 Office_2013，发现了一个重要区别：

*   具有 64 位 Office_2010 的计算机安装了 32 位和 64 位版本的 Access 数据库引擎 (ACE)。

*   装有 64 位 Office_2013 的机器**只有**64 位版本的 ACE。32 位版本的 ACE 不存在。

重新运行我的 VBScript 测试证实了这一点：

```
C:\__tmp>c:\windows\system32\cscript.exe /nologo oledbTest.vbs
Hello
Done.

C:\__tmp>c:\windows\sysWOW64\cscript.exe /nologo oledbTest.vbs
C:\__tmp\oledbTest.vbs(4, 1) ADODB.Connection: Provider cannot be found. It may not be properly installed. 
```

幸运的是，如果 64 位 Office_2013 的用户有需要使用 .accdb 文件的 32 位应用程序，他们可以从[这里下载并安装 32 位版本的 ACE。](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

对于64位Windows上32位Office_2013的用户，我怀疑情况和32位Office_2010的用户一样：他们只有32位版本的ACE，无法安装64位版本，除非他们首先卸载 32 位 Office。因此，如果您安装了 32 位 Office，并且想要运行需要处理 .accdb 文件的 64 位应用程序，那么我相信您“不走运”。（唉，我无法对此进行测试，因为我只有 64 位 Office_2013 安装可用。）

# objective-c - 二次单击nsresponder，右键单击不起作用

> ID：15849934
> 
> 赞同：2
> 
> 时间：2013-04-06T10:47:30.400
> 
> 标签：objective-c, macos, mouseevent, mouseclick-event, nsresponder

我试图让 NSOutlineView 接受二次点击，但似乎无法弄清楚。我尝试将二次点击从两根手指更改为触控板上的右角和左角，但我仍然没有在鼠标按下事件的大纲视图中得到任何响应。谁能帮我？

更新：

如果我使用它，则会记录二次点击，但它仍然没有出现在 rightMouseDown: 函数中。

```
[NSEvent addLocalMonitorForEventsMatchingMask:NSRightMouseDownMask handler:^(NSEvent* event) {
    NSLog(@"%@", event);
    return (NSEvent *)event;

}]; 
```

更新：

我仍然不知道如何解决这个问题。我的 NSCollectionView 响应 rightMouseUp 但不响应 rightMouseDown。怎么来的？

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T18:52:49.287

覆盖 mouseDown 时遇到类似问题：我需要从 mouseDown 调用 rightMouseDown: 以在两种情况下都具有相同的行为。这在小牛队停止了工作。

相反，当您需要发生这种情况时，最好将事件类型更改为右键单击。也许这会帮助你：

```
- (void)mouseDown:(NSEvent *)event;
{
    [event setValue:@(NSRightMouseDown) forKey:@"type"];
    [self rightMouseDown:event];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T03:59:36.610

苹果文档专门讨论了在响应者链（用于上下文菜单）中更高层处理的 rightMouseDown 并且它特别没有传递到一个子类中。该文档讨论了覆盖 AcceptFirstResponder，但我也无法让它工作。

因此，虽然我无法触发 rightMouseDown 事件，但我能够修改您的代码以伪造它。我没有记录事件，而是让它调用我的 rightMouseDown 事件处理程序。

```
[NSEvent addLocalMonitorForEventsMatchingMask:NSRightMouseDownMask handler:^(NSEvent* event) {
        [self rightMouseDown:event];
        return (NSEvent *)event;
    }]; 
```

希望有人能够比这更好地阐明这个问题，但至少这是一个开始。

# windows-phone-7 - windows phone 7 如何将数组值从一个屏幕传递到另一个屏幕

> ID：15849946
> 
> 赞同：-1
> 
> 时间：2013-04-06T10:48:42.240
> 
> 标签：windows-phone-7, arraylist, navigationservice

///首先我创建了用于存储值的流行类

```
public class Popular
{
   public string   trk_mnetid,trk_title ,   art_mnetid, art_name,   image_url;
} 
```

/// 创建流行播放列表类

```
public partial class PopularPlaylist : PhoneApplicationPage
{

 Popular popobj = new Popular();
    List<Popular> pop = new List<Popular>();

/* call json parsing it  and show only "titles" in List form when i m click on perticular title i need to show details  in next screen which i paser and store in popular popularplaylist class.
i use navigationservice  call new screen
*/

 NavigationService.Navigate(new Uri("/Popular_Module/PopularPlaylist.xaml", System.UriKind.Relative));

} 
```

// 请告诉我如何在下一个屏幕中获取列表数据

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T06:15:39.400

使用查询字符串。传递值：在 MainPage.xaml.cs 添加以下 传递参数的最简单方法就是使用字符串，例如：

```
private void btnNavigate_Click(object sender, RoutedEventArgs e)
{
   string url=String.Format("/Page1.xaml?parameter={0}",popular);
   NavigationService.Navigate(new Uri(url, UriKind.Relative));
} 
```

获取值：在 Page.xaml.cs 添加以下注意：重写 OnNavigatedTo 很重要，之后您可以使用 NavigationContext 获取传递的参数。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
  base.OnNavigatedTo(e);   
  List<string> parameterValue = NavigationContext.QueryString["parameter"];   
} 
```

获取参数值的另一种流行语法是：

```
List<string> parameter = string.Empty;
if (NavigationContext.QueryString.TryGetValue("parameter", out parameter))
{
  //do something with the parameter
} 
```

# c# - 如何在 C# 中动态更改 td 的 colspan？

> ID：15849957
> 
> 赞同：3
> 
> 时间：2013-04-06T10:50:12.760
> 
> 标签：c#, asp.net, repeater

```
 <FooterTemplate>
    <tr style="background-color:Orange;">
    < td width="6%" align="center" id = "tdFooter" runat = "server" colspan = "3">                                   
    </td>
</tr>
</FooterTemplate> 
```

我有一个转发器控件，其中有这个页脚模板。我想要的只是根据一些 if 子句在 itemdatabound 事件（c#）中更改 tdFooter 的 colspan。我该怎么做？

```
if (e.Item.ItemType == ListItemType.Footer)
{
    if(role = 0)
       {
         //tdfooter colspan should be 3
       }
else
      {
        //tdfoote colspan should be 2
      }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T10:55:28.150

我会在 td 标签中添加一个 runat

```
<td runat="server" id="tdControl"> 
```

在 itemdatabound 中：

```
 var td = (HtmlTableCell)e.Item.FindControl("tdControl");
 td.Attributes.Add("colspan", myNumber); 
```

# oauth - 自定义身份验证异常spring oauth

> ID：15849959
> 
> 赞同：1
> 
> 时间：2013-04-06T10:50:24.527
> 
> 标签：oauth, spring-security, jersey

我使用**jersey**作为 RESTFul 网络服务器。(jersey-server 1.8) 与 spring (3.2.0.RELEASE) 和休眠。我的端点使用带有 2 条腿 oAuth 1.0a (spring-security-oauth 1.0.0.M4) 的 spring-security (3.1.3.RELEASE) 进行保护

一切都按预期工作，并且固定工作。在我的 ConsumerDetailsS​​erviceImpl（实现 ConsumerDetailsS​​ervice、UserDetailsS​​ervice、AuthenticationProvider）中，我抛出了不同的异常（现在都是 OAuthException 形式，但我想添加自己的自定义异常）

但是，无论我尝试什么，我都无法按照我想要的方式自定义不同的身份验证和拒绝访问异常，我总是得到默认的 401 页面

我的 API 被同意总是返回一个 json 响应对象，所以我需要捕获这些异常并显示 401 页面，其中包含 json

我的安全.xml

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:security="http://www.springframework.org/schema/security" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oauth="http://www.springframework.org/schema/security/oauth"
xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/security/oauth 
        http://www.springframework.org/schema/security/spring-security-oauth.xsd">

<!-- Authentication beans -->
<bean name="consumerDetailsService" class="com.securitytest.core.services.impl.ConsumerDetailsServiceImpl" />
<bean name="oauthProcessingFilterEntryPoint" class="org.springframework.security.oauth.provider.OAuthProcessingFilterEntryPoint" />
<bean id="oAuthAuthenticationHandler" class="com.securitytest.core.security.CustomOAuthAuthenticationHandler" />

<security:http auto-config="true" use-expressions="true" entry-point-ref="oauthProcessingFilterEntryPoint" >
    <security:intercept-url pattern="/rest/secured/**" access="isAuthenticated()" />
    <security:intercept-url pattern="/rest/unsecured/**" access="permitAll" />
    <security:intercept-url pattern="/rest/**" access="isAuthenticated()" />
    <security:form-login login-page='/login' default-target-url="/home"  authentication-failure-handler-ref="authenticationFailureHandler"/>
    <security:access-denied-handler ref="accessDeniedHandler" />
</security:http>

<bean id="accessDeniedHandler" class="com.securitytest.core.security.CustomoauthAccessDeniedHandler" />
  <!-- this was just a test, it didn't work obviously -->  
<bean id="authenticationFailureHandler"              class="org.springframework.security.web.authentication.ExceptionMappingAuthenticationFailureHandler">
    <property name="exceptionMappings">
        <props>
            <prop key="org.springframework.security.authentication.BadCredentialsException">/login/badCredentials</prop>
            <prop key="org.springframework.security.authentication.CredentialsExpiredException">/login/credentialsExpired</prop>
            <prop key="org.springframework.security.authentication.LockedException">/login/accountLocked</prop>
            <prop key="org.springframework.security.authentication.DisabledException">/login/accountDisabled</prop>
        </props>
    </property>
</bean>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="consumerDetailsService" />
</security:authentication-manager>

<bean id="nonceServices" class="org.springframework.security.oauth.provider.nonce.InMemoryNonceServices" />

<oauth:provider 
        auth-handler-ref="oAuthAuthenticationHandler" 
        consumer-details-service-ref="consumerDetailsService" 
        nonce-services-ref="nonceServices" 
        token-services-ref="tokenServices"
        require10a="true"

        />
<oauth:token-services id="tokenServices" /> 
```

## 我试过的东西

1.  更改 exceptionTranslationFilter -> 文档不允许
2.  添加自定义 access-denied-handler 和 authentication-failure-handler-ref

    ```
    <security:http auto-config="true" use-expressions="true" entry-point-ref="oauthProcessingFilterEntryPoint" >
       <security:intercept-url pattern="/rest/secured/**" access="isAuthenticated()" />
       <security:intercept-url pattern="/rest/unsecured/**" access="permitAll" />
       <security:intercept-url pattern="/rest/**" access="isAuthenticated()" />
       <security:form-login login-page='/login' default-target-url="/home"  authentication-failure-handler-ref="authenticationFailureHandler"/>

       <security:access-denied-handler ref="accessDeniedHandler" />
    </security:http> 
    ```

    -> 这被 spring-security/oauth 公然忽略

3.  在 EXCEPTION_TRANSLATION_FILTER 之后添加自定义过滤器

    ```
    <security:custom-filter after="EXCEPTION_TRANSLATION_FILTER" ref="myFilter" /> 
    ```

    MyFilter 只是实现“javax.servlet.Filter”。-> 它进入doFilter，但我不知道如何处理它（我看不到抛出了哪个异常，如果有的话）。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T13:16:41.967

我回答这个问题已经很晚了，您可能已经解决或转向其他选择。但是，我最近潜入了 Oauth 并遇到了类似的问题并设法解决了它。分享给其他人作为参考。

我使用 Oauth 的 MediaTypeAwareAccessDeniedHandler 和 MediaTypeAwareAuthenticationEntryPoint 进行错误处理。根据文档，它默认为 401 错误页面。但是，从源代码来看，错误响应内容类型取决于请求 Accept-Type。但是要求客户端始终将 Accept-Type 发送为 application/json 就像要求 fox 保护母鸡一样。

好消息是响应类型支持 setter 注入。如此简单的解决方案是覆盖默认值并注入响应属性以始终发送 JSON 响应，而不管 Accept-Type

```
<bean id="accessDeniedHandler" class="org.springframework.security.oauth2.provider.error.MediaTypeAwareAccessDeniedHandle"/>
   <property name="responses">
     <map> 
       <entry key="*/*" value="{error:&quot;%s&quot;}"></entry>
     </map>
   </property>
 </bean> 
```

# javascript - 将 CSS3 动画转换为纯 JavaScript

> ID：15849962
> 
> 赞同：7
> 
> 时间：2013-04-06T10:50:27.093
> 
> 标签：javascript, css, animation, css-animations

我想将一个简单的 CSS3 动画转换为纯 JavaScript（不是在 jQuery 中，因为我认为为这么简单的事情加载整个库有点过头了）。

`bounceInUp`这是关于来自[http://daneden.me/animate/](http://daneden.me/animate/)的动画。示例演示：http: [//jsfiddle.net/ELDf7/](http://jsfiddle.net/ELDf7/)

```
@keyframes bounceInUp {
    0% {
        opacity: 0;
        transform: translateY(2000px);
    }

    60% {
        opacity: 1;
        transform: translateY(-30px);
    }

    80% {
        transform: translateY(10px);
    }

    100% {
        transform: translateY(0);
    }
} 
```

在[http://javascript.info/tutorial/animation](http://javascript.info/tutorial/animation)，有一个关于如何使用 JavaScript 制作动画的教程。但是我数学不是很好，所以我在 PhotoShop 中制作了一个图表来展示动画应该如何在 JavaScript 中运行（大约）：

![阴谋](https://i.stack.imgur.com/OsFU6.png)

[（可以在[此处](http://javascript.info/tutorial/animation#the-plotter)找到其他“增量”的绘图仪）]

是否可以在纯 JavaScript 中从该图中创建一个数学公式，返回动画的“增量”？

我用[反弹功能](http://javascript.info/tutorial/animation#bounce)尝试了一些东西，但它并没有真正起作用。( [http://jsfiddle.net/ELDf7/2/](http://jsfiddle.net/ELDf7/2/) )

**编辑：** 我设法制作了一个很好的数学公式：

![情节 2](https://i.stack.imgur.com/lmIz3.png)

[-Math.cos(2*Math.PI*progress) + Math.pow(progress, 1) * ((1.5 + 1) * progress - 1.5);]

但是现在我遇到了另一个问题，动画从显示一半的图像开始，而不是隐藏整个图像，就像它看起来像 CSS3 动画一样。

有关 JavaScript 动画的现场演示，请参见此处：http: [//jsfiddle.net/ELDf7/14/](http://jsfiddle.net/ELDf7/14/)

有谁知道我可以如何更改它以使图像最初完全隐藏？也许可以创建一个包含图像高度的变量，然后 JavaScript 进行计算，以便动画在图像出现一半之前不会开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:24:56.093

看看这个[更新的演示](http://jsfiddle.net/ZmNEU/7/)是否是朝着正确方向迈出的一步。

**余弦波**

数学公式需要稍微重构一下。逐渐将余弦波缩小到 0 的数学不太有效：

```
return -Math.cos(2.5 * Math.PI * progress) * Math.pow(0.33, progress * 2.5) * 3; 
```

公式 和 的样本值，`bottom`从`progress`0 到 1：

```
progress    formula    bottom
--------    -------    -------
  0.0        -3.0      -150px
  0.2         0.0         0px
  0.4         1.0        50px
  0.6         0.0         0px
  0.8        -0.3       -17px
  1.0         0.0         0px 
```

**开始（）函数**

我添加了一个`start()`函数，该函数在页面首次加载和单击图像时使用。此函数在开始动画之前检查全局变量以确保动画尚未运行。动画结束时重置全局变量。或者，可以取消当前动画并开始新的动画。但它必须是其中之一，以避免同时运行多个动画，这在视觉上看起来很糟糕。

```
<div onclick="start()">...</div>
...
var isAnimationRunning = false;
...
function start(){
    if (isAnimationRunning) return; // Make sure an animation isn't already running
    isAnimationRunning = true;      // Set the global variable
    move(document.getElementById('frame'), bounce, 1200);
}
onload = function() {
    start();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:18:45.777

鉴于您的代码，这只是一个小改动：（[http://jsfiddle.net/ELDf7/17/](http://jsfiddle.net/ELDf7/17/)）

```
step: function(delta) {
  var animationHeight = to + element.scrollHeight
  element.style.bottom = (animationHeight * delta) + "px";    
} 
```

希望这就是你的意思。

# jquery - jQuery - 检查一个函数的结果与另一个函数的结果

> ID：15849963
> 
> 赞同：0
> 
> 时间：2013-04-06T10:50:27.177
> 
> 标签：jquery

我的目标是检查链接列表并在每个链接的 href 中获取 URL 的最后一部分。然后，我检查页面的 URL。

我在一个名为 Projects 的文件夹中有一个页面列表。本质上，如果 URL 是 projects/somepage 并且等于 links href 中的 projects/somepage，我想执行一个操作。

我可以遍历列表并返回列表中的所有href，还可以获取当前页面的URL，但我不知道如何使用这些结果中的每一个来检查它们是否相同。

```
projectURL = $("#projects ul li a");

$(function() {

    function checkProjectURL() {     
        $(url).each(function(){ 
            var href = $(this).attr("href");
            var current = href.substr(href.lastIndexOf('/') + 1)
            //console.log(current);
        }); 
    }

    function checkPageURL() {     
        var url = document.location.href; 
        var currentURL = url.substr(url.lastIndexOf('/') + 1)
        //console.log(currentURL);

    }

    url = projectURL;

    checkProjectURL();
    checkPageURL();     

}); 
```

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:02:27.937

您需要从中返回一个值，`checkPageURL()`以便对其进行比较。然后将其传递给`checkProjectURL()`它，以便它可以执行比较。

```
projectURL = $("#projects ul li a");

$(function() {

    function checkProjectURL(url, pageURL) {     
        url.each(function(){ 
            var href = $(this).attr("href");
            var current = href.substr(href.lastIndexOf('/') + 1)
            //console.log(current);
            if (current == pageURL) {
                // do something
            }
        }); 
    }

    function checkPageURL() {     
        var url = document.location.href; 
        var currentURL = url.substr(url.lastIndexOf('/') + 1)
        //console.log(currentURL);
        return currentURL;

    }

    checkProjectURL(projectURL, checkPageURL());

}); 
```

# php - 如何使用 php、mysql 在有和没有更新图像的情况下更新数据库中的表单数据

> ID：15849965
> 
> 赞同：1
> 
> 时间：2013-04-06T10:50:57.697
> 
> 标签：php, html, mysql

下面的代码是更新数据库中的表单详细信息。只有当图像被更改/上传另一个图像时，它才会更新数据库。如果我们不想上传新图片但需要更新其他表单详细信息，该怎么办？感谢您的解决方案，提前！！！

```
<html>

    <head>
        <title>Update the Contact Record</title>
        <link rel="stylesheet" type="text/css" href="cms_style.css">    
<script>

window.onunload = function(){ window.opener.location.reload(); };

</script>

    </head>

    <body>
        <h2 align="center">Update the Record</h2>

    <?php

        // error_reporting(~E_NOTICE);

            //echo "Test 1 <br>";
            $cid = $_GET['id'];
            $uid = $_GET['uid'];

        /*  echo "<br> value of Con ID is : "; echo $cid;
            echo "<br> value of UID is : "; echo $uid;  */

        if($uid==1) {
            //echo "<br> Test 2 ";
            updateRecord($cid);

        } else if (isset($_GET['id']) ) {
            //echo "<br>Test 3 ";

            $ResumeID = $_GET['id']; 
            $sql="SELECT * from data WHERE ResumeID=$ResumeID";
            $result = mysql_query($sql);
            $Row=mysql_fetch_row($result); 

    ?>  
            <form align="center" action="updateRecord.php?id=<? echo "$Row[0]"?>&uid=1" method="post" enctype="multipart/form-data">
                <table align="center">
                    <input type="hidden" name="resumeid" value="<? echo "$Row[0]"?>">

                <!--    <? echo "<tr> <td> Resume ID </td>   <td>$Row[0]</td> </tr>" ?>  -->                     

                    <div align="center">
                        <tr>       
                            <td> Name of the Candidate</td>
                            <td><input type="text" name="NameoftheCandidate" size="25" value="<? echo "$Row[1]" ?>"></td>
                        </tr>

                        <tr>
                            <td>TelephoneNo</td>
                            <td><input type="text" name="TelephoneNo" size="25" value="<? echo "$Row[2]"?>"></td>
                        </tr>

                        <tr>       
                            <td>Email</td>
                            <td><input type="text" name="Email" size="25" value="<? echo "$Row[3]"?>"></td>
                        </tr>

                        <tr>
                            <td>WEYears</td>
                            <td><input type="text" name="WEYears" size="25" value="<? echo "$Row[4]"?>"></td>
                        </tr>

                        <tr>
                            <td>CurrentLocation</td>
                            <td><input type="text" name="CurrentLocation" size="25" value="<? echo "$Row[5]"?>"></td>
                        </tr>

                        <tr>
                            <td>PreferredLocation</td>
                            <td><input type="text" name="PreferredLocation" size="25" value="<? echo "$Row[6]"?>"></td>
                        </tr>

                        <tr>
                            <td>CurrentEmployer</td>
                            <td><input type="text" name="CurrentEmployer" size="25" value="<? echo "$Row[7]"?>"></td>
                        </tr>

                        <tr>
                            <td>CurrentDesignation</td>
                            <td><input type="text" name="CurrentDesignation" size="25" value="<? echo "$Row[8]"?>"></td>
                        </tr>

                        <tr>
                            <td>AnnualSalary</td>
                            <td><input type="text" name="AnnualSalary" size="25" value="<? echo "$Row[9]"?>"></td>
                        </tr>

                        <tr>
                            <td>UGCourse</td>
                            <td><input type="text" name="UGCourse" size="25" value="<? echo "$Row[10]"?>"></td>
                        </tr>

                        <tr>
                            <td> Image:
                            <? echo $Row[12]; ?> </td>

                        </tr>

                        <tr>

                            <? echo '<td><img src="http://localhost/cmsapp_latest/processimage.php?id=' . $Row[0] . '"></td>';   ?>
                        </tr>

                        <tr>
                        <td><input type="hidden" name="MAX_FILE_SIZE" value="10000000" />Change Image:</td>
                        <td><input name="userfile" type="file" /></td>
                        </tr>

                        <tr>
                            <td align="center"><input type="submit" name="submitvalue" value="UPDATE" ></td>
                            <td align="center"><input type="button" name="cancelvalue" value="CANCEL" onClick="self.close(); return false;"></td>
                        </tr>

                    </div>                              
                </table>
            </form>

    <?php
        } // end of else if

    function updateRecord($cid) {

        $msg = "Intial Value";
        $maxsize = 10000000; //set to approx 10 MB

                        if($_FILES['userfile']['error']== UPLOAD_ERR_OK) {
                            echo "Print uplod error - ";
                            echo UPLOAD_ERR_OK;

                            //check whether file is uploaded with HTTP POST
                            if(is_uploaded_file($_FILES['userfile']['tmp_name']))   {  

                            echo "tEST 02 - ";
                                //checks size of uploaded image on server side
                                if( $_FILES['userfile']['size'] < $maxsize) {  

                                   $finfo = finfo_open(FILEINFO_MIME);

                                   if(strpos(finfo_file($finfo, $_FILES['userfile']['tmp_name']),"image")===0)     {  

                                    echo "tEST 03 - ";

                                        // prepare the image for insertion
                                         $imgData =addslashes(file_get_contents($_FILES['userfile']['tmp_name']));

                                    $sql= "UPDATE data SET NameoftheCandidate=\"$_POST[NameoftheCandidate]\", TelephoneNo='$_POST[TelephoneNo]', Email='$_POST[Email]', WEYears='$_POST[WEYears]',CurrentLocation='$_POST[CurrentLocation]', PreferredLocation='$_POST[PreferredLocation]', CurrentEmployer=\"$_POST[CurrentEmployer]\", CurrentDesignation='$_POST[CurrentDesignation]', AnnualSalary='$_POST[AnnualSalary]', UGCourse=\"$_POST[UGCourse]\", image=\"{$imgData}\", name=\"{$_FILES['userfile']['name']}\" WHERE ResumeID=$_GET[id]";

                                    //echo $sql;

                                    //$result = mysql_query($sql);  

                                    if(mysql_query($sql))

                                     echo "Record updated";

                                    else
                                        echo "Record update failed";

                                    }
                                    else
                                        $msg="<p>Uploaded file is not an image.</p>";

                                }

                                 else {
                                    // if the file is not less than the maximum allowed, print an error
                                    $msg='<div>File exceeds the Maximum File limit</div>
                                    <div>Maximum File limit is '.$maxsize.' bytes</div>
                                    <div>File '.$_FILES['userfile']['name'].' is '.$_FILES['userfile']['size'].
                                    ' bytes</div><hr />';
                                    }
                            }
                            else
                                $msg="File not uploaded successfully.";

                        }
                        else {

                            $msg= file_upload_error_message($_FILES['userfile']['error']);

                        }
                        return $msg;

        } // end of update function

    function file_upload_error_message($error_code) {
        switch ($error_code) {
            case UPLOAD_ERR_INI_SIZE:
                return 'The uploaded file exceeds the upload_max_filesize directive in php.ini';
            case UPLOAD_ERR_FORM_SIZE:
                return 'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form';
            case UPLOAD_ERR_PARTIAL:
                return 'The uploaded file was only partially uploaded';
            case UPLOAD_ERR_NO_FILE:
                return 'No file was uploaded';
            case UPLOAD_ERR_NO_TMP_DIR:
                return 'Missing a temporary folder';
            case UPLOAD_ERR_CANT_WRITE:
                return 'Failed to write file to disk';
            case UPLOAD_ERR_EXTENSION:
                return 'File upload stopped by extension';
            default:
                return 'Unknown upload error';
        }

    } 

    ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:31:46.043

为旧图像创建一个隐藏字段，并在表单中填充数据库中的值。

```
$image=$_FILES["NEW-IMAGE-FIELD"]["name"];

if($image!="") {

           SCRIPT TO UPLOAD NEW IMAGE
                   SCRIPT TO REMOVE OLD IMAGE
        }
    else
    {
        $image = $_REQUEST["HIDDEN-OLD-IMAGE-FIELD"];
    }
    $query = UPDATE DATABASE DETAIL WITH image='$image'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:00:04.753

在您的 php 脚本中包含以下代码

```
if ($_FILES["userfile"]["error"] == 0)
{
//update database code goes here

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:46:21.087

嗨，我已经为此完成了解决方案。只需在 if($_FILES['userfile']['error']== UPLOAD_ERR_OK) 之前添加以下代码

```
 if($_FILES['userfile']['error']== UPLOAD_ERR_NO_FILE)
    {
        //echo UPLOAD_ERR_NO_FILE;

        SQL update query      
        //echo $sql;

        if(mysql_query($sql))

                         echo "Record updated";

                    else
                        echo "Record update failed";

    } 
```

# javascript - 未使用 Javascript 在主题 SELECT 菜单中填充数据

> ID：15849967
> 
> 赞同：1
> 
> 时间：2013-04-06T10:51:06.837
> 
> 标签：javascript, jquery, json, append

我正在使用一些模板创建一个 Web 应用程序，现在我被困在填充“SELECT”选项中。

这里我尝试使用 JavaScript 填充...

但是面临一个问题，当我使用简单的“SELECT”选项时，我可以在选项菜单中看到数据。

但是当我使用主题“选择”菜单时，数据没有填充......

我已经尝试了很多，但无法得到解决方案。

请下载示例项目[下载](https://www.dropbox.com/s/zzi2aypkncwsnjj/Demo.rar)

请帮我解决这个问题...

谢谢并恭祝安康，

迪利普。

# routing - Ember.js 如何嵌套路由？

> ID：15849968
> 
> 赞同：0
> 
> 时间：2013-04-06T10:51:10.807
> 
> 标签：routing, ember.js

抱歉，我是 ember.js 的新手。我真正想做的是为管理部分创建一个基于 ember.js 的应用程序。这个应用程序应该只处理管理部分的 url `http://mydomain.com/admin/`（例如：/admin/photos/、/admin/users），其他的应该像正常的 url 一样工作。我可以用 ember.js 做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:58:24.150

您应该使用 Ember 资源来嵌套路由。因此，对于您的示例，您想要执行以下操作：

```
AppName.Router.map(function() {
  this.resource('admin', function() {
    this.route('photos');
    this.route('users');
  });
}); 
```

以上将创建一个`/admin/photos`和`/admin/users`路由。mokane 链接到 Ember 文档中的正确位置，但为了面向未来，我想将答案放在帖子中，这样即使文档位置发生变化，其他人也可以看到答案。

注意：我想在下面的评论中包括 Ugis Ozols 提出的一个重要观点，即在 Ember 中，资源通常是名词，而路线通常是动词。因此，您通常会有一个资源，例如`/tweet`（这是一个名词），然后是该资源的多个路由，例如`create`,`edit`和`delete`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:11:20.877

是的你可以。查看 ember.js 文档的此部分以获取更多信息：[http ://emberjs.com/guides/routing/defining-your-routes/](http://emberjs.com/guides/routing/defining-your-routes/)

# java - 单元测试多个连续的键盘输入

> ID：15849978
> 
> 赞同：3
> 
> 时间：2013-04-06T10:52:35.863
> 
> 标签：java, unit-testing, junit

我正在尝试对从键盘输入的主要方法进行单元测试。我知道有几个关于测试键盘输入和使用的问题`System.setIn(...)`，但它只适用于我的第一个输入。

我的代码：

```
public class TestApp {
    @Test
    public void testMain() {
        InputStream stdin = System.in;
        try {
            System.setIn(new ByteArrayInputStream("s\r\nx\r\n".getBytes()));

            String args[] = {};
            App.main(args);

            // TODO: verify that the output is what I expected it to be
        }
        catch(IOException e) {
            assertTrue("Unexpected exception thrown: " + e.getMessage(), false);
        }
        finally {
            System.setIn(stdin);
        }
    }
} 
```

我想要实现的是输入“s”，然后输入“x”（两个不同的条目）。

正常使用程序时，按's'后按回车键应输出内容，按'x'后应输出其他内容。主要方法如下所示：

```
class App {
    public static void main(String[] args) throws IOException {
        int choice;
        do {
            choice = getChar();
            switch(choice) {
                case 's':
                    System.out.println("Text for S");
                    break;
                case 'x':
                    System.out.println("Exiting");
                    break;
            }
        } while(choice != 'x');
    }

    public static String getString() throws IOException {
        InputStreamReader isr = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(isr);
        String s = br.readLine();
        return s;
    }

    public static char getChar() throws IOException {
        String s = getString();
        return s.charAt(0);
    }
} 
```

注意：我知道实现它的最佳方法是注入`InputStream`依赖项并使用它而不是`System.in`，但我无法更改代码。这是我有的限制，我不能改变`main()`，`getString()`或者`getChar()`方法。

当我执行测试时，这是输出：

> S 的文本
> 
> java.lang.NullPointerException
> at App.getChar(tree.java:28)
> at App.main(tree.java:7)
> at TestApp.testMain(TestApp.java:15) <23 内部调用>

所以，看起来它获得了第一个输入（'s'），但没有获得第二个输入......

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:39:45.087

该`getString`方法在每次调用时构造一个新`BufferedReader`的，它将在返回`System.in`之前从其缓冲区中读取 8192 个字符。`readLine`这意味着它在第一次调用时读取“s”和“x”，但只使用第一行。然后，在从方法返回时， 将`BufferedReader`被丢弃。在下一次调用时，它会构造一个新实例来查找剩余的字符，但由于`System.in`已经耗尽，因此没有找到。

不言而喻，这是一个错误。

一种可能的解决方法是构造一个 dummy `InputStream`，在初始的 's' 和换行符之后填充到 8k 标记，然后是 'x' 和换行符。

您还可以构建一个更精细`System.in`的模拟和模拟`System.out`，并在检测到对`System.out.println`.

# forms - 非常简单的form_dropdown codeigniter不工作

> ID：15849980
> 
> 赞同：0
> 
> 时间：2013-04-06T10:52:58.233
> 
> 标签：forms, codeigniter

此代码取自 CI 用户指南：

```
$options = array(
                  'small'  => 'Small Shirt',
                  'med'    => 'Medium Shirt',
                  'large'   => 'Large Shirt',
                  'xlarge' => 'Extra Large Shirt',
                );

echo form_dropdown('shirts', $options, 'large');

// Would produce:

<select name="shirts">
<option value="small">Small Shirt</option>
<option value="med">Medium Shirt</option>
<option value="large" selected="selected">Large Shirt</option>
<option value="xlarge">Extra Large Shirt</option>
</select> 
```

从上面的代码来看，这段代码应该没问题（取自`controller`）：

```
$data_search = array('kelas' => 'Kelas', 
                     'nama' => 'Nama',
                     'alamat' => 'Alamat',
                     'bulan' => 'Bulan Lahir'); 
```

在我的 html( `view`) 中：

```
<?php echo form_dropdown('ddl_search', $data_search, 'id="ddl_search"');?> 
```

但事实是它给了我未定义的**变量：data_search 错误**，你能解释一下这里发生了什么吗？谢谢你的时间：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:40:32.577

```
<?php echo form_dropdown('ddl_search', $data_search,'', 'id="ddl_search"');?> 
```

再看一遍，您试图将 id 作为默认值传递，当然这在您的数组中不存在。

订单是这样的

```
form_dropdown('nameOfControl',$dataToPopulateControl,'defaultValueOfControl','additionalParameters'); 
```

你可以把它们放在最后，你不能把它们放在中间。这意味着您可以省略附加参数，不能省略默认值并添加附加参数。因此我的代码中的''在顶部。

您的问题需要更具描述性，在第一次阅读时，我认为未定义的是 data_search，但不是吗？

看到已编辑的问题，您还有一个单独的问题。从控制器向视图传递数据时，您需要一个包含其他数据数组的容器变量。

控制器：

```
$data['data_search'] = array('kelas' => 'Kelas', 
                     'nama' => 'Nama',
                     'alamat' => 'Alamat',
                     'bulan' => 'Bulan Lahir');
$this->load->view('whatever',$data); 
```

如上所述将数据传递给视图将使 $data_search 可用于视图。$data 将单个变量（单个或数组）传递给视图， $data 本身在视图中不可用。

# android - 颜色列表视图

> ID：15849981
> 
> 赞同：0
> 
> 时间：2013-04-06T10:53:10.527
> 
> 标签：android, listview, colors

我正在尝试将数据插入列表视图。我的列表视图由 3 列组成，我想将列表视图中的数据（成绩）与一个数字进行比较。如果它更大，我希望行的颜色为绿色，如果它更小，它将被着色为红色。

所以基本上我希望列表视图改变颜色——每行都用另一种颜色？通过特定的法律。

谢谢你的帮助，玛丽娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:59:08.977

在您`getView()`的适配器方法上，您可以比较数字并根据您的需要更改背景颜色。你可以检查[这个](https://stackoverflow.com/questions/13781849/change-background-color-of-first-item-in-listview?rq=1)链接。

# java - 存储和查看列入白名单的联系人列表

> ID：15849982
> 
> 赞同：0
> 
> 时间：2013-04-06T10:53:11.530
> 
> 标签：java, android

存储联系人列表的简单方法是什么？我不需要存储太多，只需要为每个联系人存储一个唯一标识符。我正在通过 Intent.ACTION_PICK 挑选我的联系人

这可以使用内置联系人组来完成吗？我可以创建一个不可见的组并将联系人添加到该组吗？

一个数据库和一个加载器似乎有点矫枉过正......或者这就是它的完成方式？

联系人列表将在 ListActivity 或 ListFragment 中呈现给用户。整个应用程序几乎是三个视图；白名单，黑名单和选择联系人。过滤每个视图，使任何给定联系人仅出现在一个视图（或列表或组）中。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:32:17.757

现在我正在尝试使用内置联系人组。但是，在我可以用一些代码更新这篇文章之前，我需要解决一些错误。如果在这篇文章发布几周后还没有发生这种情况，请随时给我发消息。

# checkbox - 在 Dataview (extjs) 中获取选定的文件名

> ID：15849985
> 
> 赞同：0
> 
> 时间：2013-04-06T10:53:20.657
> 
> 标签：checkbox, extjs4, extjs4.1, selected, dataview

```
this.items[0].tpl = Ext.create('Ext.XTemplate',
    '{[this.tempValue()]}',
    '<tpl for=".">',
        '<tpl if="this.temp != title">',
            '<h3 class="dataview-title">{title}</h3>',
            '{[this.isTitle(values.title)]}',
        '</tpl>',
    '<div class="download-file">',
    '<input type="checkbox" value="{title}/{filename}"> ',
    '&nbsp;{filename}</div>',
    '</tpl>',
    '<div class="x-clear"></div>',
    {
        isTitle: function (title) {
            this.temp = title;
        },
        tempValue: function () {
            this.temp = '';
        }
    }
); 
```

我打开了一个弹出窗口并使用 Dataview 模板（**extjs-4.1.1**）显示了一些带有复选框的文件名，因为我不知道如何获取**所选文件名**的长度（复选框所选项目）。你能用例子给我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:11:48.563

您需要查询 DOM：

```
dv.el.select('input:checked').each(function(el){
    console.log(el.value);
}); 
```

# php - 从 DOMXPath 查询结果中获取属性值？

> ID：15849988
> 
> 赞同：0
> 
> 时间：2013-04-06T10:53:24.900
> 
> 标签：php, xml, dom, domdocument, domxpath

我正在尝试搜索 XML 文件并返回与给定条件匹配的记录的所有数据。这是我现在拥有的东西，它搜索得很好，但我似乎无法弄清楚如何在同一条记录中获取其他属性的值。

以下是将使用的 XML 文件示例：

```
<routing>
    <route>
        <url>/homepage</url>
        <file>/pages/home.php</file>
    </route>
</routing> 
```

以下是我在文档中查找特定记录的方式。它完美地找到了它们，但是如何从匹配的记录中获取数据？

```
 $qExp = '//route[url="/homepage"]';
    foreach($inst->query($qExp) as $key=>$node) {
        print_r($node);
        // echo $node->file->nodeValue;
        // how would I do this? I can't seem to
        // access specific attributes at all
        // inside of the DOMXPath class
    } 
```

一个 DOMXPath 对象将存储在 中`$node`，但是如何使用该`DOMXPath`对象获取其他属性值？例如，此查询将返回第一个 XML 记录，但我将如何`file`具体获取属性的值？我知道有一个`nodeValue`可用的函数，但它会将所有字段的值一起返回，我无法对哪些部分属于哪些字段进行排序。

在此先感谢您的帮助，这确实困扰着我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T22:50:42.623

对于一个不错且简单的解决方案，请使用`simplexml`：

```
$xml = simplexml_load_string($x); // assuming XML in $x
$result = $xml->xpath("//route[url='/homepage']");

// loop
foreach ($result as $r) echo $r->file,"<br />";

// direct access
echo $result[0]->file,"<br />"; 
```

见现场演示@http [://codepad.viper-7.com/ZRrUPl](http://codepad.viper-7.com/ZRrUPl)

# java - 需要澄清 BODMAS 规则

> ID：15849990
> 
> 赞同：0
> 
> 时间：2013-04-06T10:53:33.647
> 
> 标签：java, c++, c, math

在 BODMAS 规则中，运算的顺序是括号、顺序、除法、乘法加减法。这里除法、乘法、加法和减法遵循递减、递增、递增和递减顺序。BODMAS 规则系列不遵循相同的顺序。并且我的问题是为什么加法之后是减法，而不是减法之后是加法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T11:20:53.413

BODMAS 或 BOMDSA 完全相同，因为乘法/除法和加法/减法具有相同的优先级（实际上，它们应该更正确地写为`B O DM AS`，在各个组中使用您喜欢的任何顺序）；正如相关的[维基百科页面](http://en.wikipedia.org/wiki/Order_of_operations)所说：

> 以这种方式编写这些助记符可能会产生误导，特别是如果用户不知道**乘法和除法具有相同的优先级，加法和减法也是如此**。

换句话说，您缺少的是通常（无论是在“手动”进行数学运算时还是在任何理智的编程语言中）运算符实际上都是按优先级*分类*的，其中乘法和除法具有相同的优先级（以及和和减法）。因此，您的“BODMAS 规则”实际上是：

```
() 
**
* /
+ - 
```

（我`**`用作指数运算符 - 就像在 Python 中一样 - 因为 Java 不提供；另外， () 这里是分组符号，而不是运算符）

同一行上的运算符的优先级由它们在表达式中的顺序和它们的结合性（对于算术运算符来说，是从左到右的，尽管对于幂运算没有很好的定义）。

尽管对于实数上的数学，除非谈论除法（加法和减法是关联的，如果您将减法视为“相反的加法”），否则在编程中它*具有*双重重要性，因为关于 FP 数和整数的数学是往往没有关联。

此外，编程语言提供了更多的运算符，而不是关联/交换，具有不同的关联性和不那么完善的优先规则，因此它们以更精细的方式指定运算符优先级规则是正常的。

例如，参见[Java 的运算符优先级和关联性表](http://www.cis.upenn.edu/~palsetia/java/precedenceTable.html)：它比简单的“BODMAS 规则”复杂得多，不足以正确表达它（因为有很多类，每个类中有更多的运算符，具有不同关联性的类，. ..)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:55:55.320

在 Java 中，减法和加法都是，奇怪的是，加法。减法只是一个负数的加法。

**例如：**

```
int x = 1;
int y = 2;
int z = x - y; // Is actually x + (-y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:02:07.387

好吧，它只是一个术语，在数学中，如果你 + 然后 - 或 - 然后 +，它会给出相同的结果，* 和 / 也是如此。

```
(x - y) = (-y + x) And (x*y)/z = x*(y/z) And x-y*z = x-(y*z) = -(y*z)+x 
```

唯一重要的是，您必须在 +,- 之前计算 *,/ 对应于它们所在的括号。

# ios - ld：对于架构 i386，文件太小

> ID：15849991
> 
> 赞同：2
> 
> 时间：2013-04-06T10:53:42.317
> 
> 标签：ios, objective-c, xcode, opencv

所以我正在尝试创建一个简单的`OpenCV`项目。我`OpenCV`从这里下载：

[http://opencv.org/downloads.html](http://opencv.org/downloads.html)

我已使用以下命令解压缩下载的文件：

```
tar xzvf opencv2.framework 
```

我下载并安装了最新`XCode 4.6`的`Mountain Lion`+ 命令行工具。然后，我创建了一个新的应用程序`GeekOut`，`XCode`并将其链接`OpenCV`到它：

![在此处输入图像描述](https://i.stack.imgur.com/CX2A3.png)

这是我单击运行时得到的：

![在此处输入图像描述](https://i.stack.imgur.com/hv6iD.png)

有任何想法吗？我已经为此苦苦挣扎了几个小时。我已经创建了 6 个新项目，并尝试以不同的方式链接库（拖放，通过在 Build Phases 选项卡下的 Link Binary With Libraries 中单击 + 等）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-30T22:16:37.673

您是否尝试过清理构建（Cmd+K）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T14:35:56.427

问题出在您的架构上。因此将架构更改为 armv7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T13:38:38.590

我有同样的问题。我只是通过将“opencv2”文件从 .../opencv2.framework/Versions/A/ 复制到 .../opencv2.framework/ 来解决它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T19:37:16.960

尝试一个简单的“清理”和“构建”：Cmd + Shift + K

# scheme - 鉴于强大的宏系统，现代 Scheme 中的 `quote` 和 `quasiquote` 是多余的吗？

> ID：15849995
> 
> 赞同：1
> 
> 时间：2013-04-06T10:54:15.243
> 
> 标签：scheme, eval, racket, quotes

Modern Scheme（及其后代如 Racket）具有非常强大的卫生宏系统。在我看来，`quote`他们`quasiquote`在定义（不卫生的）宏（如果我没有弄错的话，Common Lisp 中仍然这样做）到卫生的宏系统方面已经失去了他们的历史地位。实际上在语言报告中，`quote`并且`quasiquote`仅作为构建数据的便捷方式呈现，特别是列表。确实，如果她能忍受乏味的话，没有他们也可以。例如，`(quote (+ 1 2))`可以改写为`(list (quote +) 1 2)`，`(quasiquote (+ (unquote (- 2 1)) 2))`可以改写为`(list (quote +) (- 2 1) 2)`。

现在假设我们在 Scheme 中引入了符号的新原始类型：以大写字母开头的标识符是符号，否则是变量。So`X`表示符号`x`，那么上面的例子可以写成`(list Plus 1 2)`and `(list Plus (- 2 1) 2)`。（让我们假设`Plus`代表符号`+`。）现在我们可以这么说`quote`并且`quasiquote`是多余的吗？还是我错过了什么？

**编辑**：

1.  `eval`在极少数情况下似乎仍然有用：[SCHEME 中的 EVAL](https://stackoverflow.com/questions/1044499/eval-in-scheme)

2.  澄清的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T13:08:50.883

你的问题不清楚。看来您是在问是否有某种技术需要引用，如果这是真的，那么您的 new`$` *就像*一个原始的`'`. 引用括号形式的便利从来都不是绝对必要的，因为您总是可以只使用带引号的符号——但是当您开始谈论更高的表示级别时，这种便利非常重要，其中只有一个原始的符号引用意味着表示会爆炸。要明白我的意思，引文`(+ x 1)`变为`(list '+ 'x 1)`，引文 that 变为`(list 'list (list 'quote '+) (list 'quote 'x) 1)`- 这使得正常的优势`quote`显而易见......

至于`eval`有用：肯定有用。关于宏要实现的主要事情是它们转换静态代码片段——事实上，大多数实现都会将宏扩展为它们编译的一部分，而合理的使用`eval`正是依赖于一些动态生成的输入的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T15:18:44.370

是的，`quote`是多余的，但您不需要大写字母约定。您可以在`quote`后面跟一个标识符（符号）生成一个`string->symbol`带有符号字符串内容的表达式。

```
(quote x) => (string->symbol "x") 
```