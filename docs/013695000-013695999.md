# StackOverflow 问答 13695000-13695999

# verilog - 快速 Verilog HDL 提示（初学者）

> ID：13695000
> 
> 赞同：-1
> 
> 时间：2012-12-04T02:01:25.790
> 
> 标签：verilog, hdl

我是 Verilog HDL 的初学者，并试图从逻辑图中建模一些模块。如果将两条线输入到与非门，然后再输入另一个反相器，那么理论上这只是一个与门吗？由于所需的输出线位于逆变器的另一侧。可不可能是。

```
AND
    g1(F,A,B) 
```

A和B是输入，F是输出。另外，为了将来的知识，我将如何使用 Verilog 实现逆变器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T05:35:17.137

要回答你的第一个问题，是的，一个与非门后跟一个反相器在*逻辑上等同*于一个与门。

关于第二个问题，在 Verilog 中反转信号的正常方法是使用按位取反运算符：`~`

```
wire A;
assign A = ~B;  // A is "not B" 
```

由于您询问的是使用 Verilog 门原语对简单逻辑进行建模，因此我将添加一个用于逆变器的原语，称为`not`.

```
not U1(A, B);  // A is "not B" 
```

[这](http://www.asic-world.com/verilog/gate1.html)是关于 Verilog 门原语的一个很好的参考。

# jquery - Javascript 中的 WinHttpRequest 等效项

> ID：13695004
> 
> 赞同：2
> 
> 时间：2012-12-04T02:02:54.790
> 
> 标签：jquery, ajax, api, vba, winhttprequest

我希望从我的网页中使用 API，目前有一个在 VBA 中工作的有效 VB 示例，并希望可以在 Javascript 中创建等效方法

```
Set http = CreateObject("WinHttp.WinHttpRequest.5.1")
http.Open "POST", "https://api.net.nz/Service.svc", False
http.setProxy 2, "http://proxynz", ""
http.Option(4) = intSslErrorIgnoreFlags
http.Option(6) = False
http.setRequestHeader "Content-Type", "text/xml; charset=utf-8"
http.setRequestHeader "SOAPAction", "urn:WebServices/ISaleService/CreateSale"
http.send (strXML)
Post = http.responsetext 
```

我一直在使用的代码在这里，我认为问题在于 VB 代码中的 http.setProxy 行。

```
$.ajax({
    type: "POST",
    url: "https://api.net.nz/Service.svc",
    dataType: 'xml',
    contentType: "text/xml; charset=\"utf-8\"",
    beforeSend: function (xhr) {
        xhr.setRequestHeader('SOAPAction', 'urn:WebServices/ISaleService/CreateSale');
    },
    data: strXML,
    async: false,
    success: function (data) {alert(data);},
    error: function (xhr, status, error) {$('#results').html(error);alert(error)}
}); 
```

使用上面的代码，我收到一条错误消息说

错误：NETWORK_ERR：XMLHttpRequest 异常 101

**更新** 仍在寻找解决方案。我希望有人知道如何为 $.ajax 请求引用代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:25:10.770

这是因为在浏览器中为 ajax 实现的 SOP。

这是参考：

[当 url 来自不同的服务器时，jQuery.ajax 失败](https://stackoverflow.com/questions/1201429/jquery-ajax-fails-when-url-is-from-different-server)

# python - 谷歌应用引擎xml文件下载

> ID：13695005
> 
> 赞同：1
> 
> 时间：2012-12-04T02:03:06.380
> 
> 标签：python, google-app-engine, download

我为我的 GAE 应用程序编写了一个简单的 requestHandler，它应该创建一个 xml 文本并让用户下载它。

```
class ExportHandler(webapp.RequestHandler):
    def get(self):
        r = "<someTag>tagText<someTag>" # sample xml
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.write(r) 
```

但它在浏览器上显示了一个 xml 文件内容。我应该将 headers['Content-Type'] 分配给其他东西吗？或者有没有更好的方法来实现它？提前致谢。

# javascript - 如何打印这个 javascript 对象？

> ID：13695010
> 
> 赞同：1
> 
> 时间：2012-12-04T02:04:02.510
> 
> 标签：javascript, jquery

我有以下对象数据：

```
var js_images = {
"newborn_set01_01.jpg":{"filename":"newborn_set01_01.jpg","title":"First Pic","description":"First description..."},
"newborn_set01_02.jpg":{"filename":"newborn_set01_02.jpg","title":"Second Pic","description":"Second description"},
"newborn_set01_03.jpg":{"filename":"newborn_set01_03.jpg","title":"Third Pic","description":"Third description"}
}; 
```

我将如何做一些简单的事情，比如创建一个警报来显示描述`newborn_set01_03.jpg`？

这显然不起作用：

```
alert(js_images.newborn_set01_03.jpg.description); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:05:22.413

除了点表示法之外，您还可以使用方括号表示法访问对象成员：

```
alert(js_images["newborn_set01_03.jpg"].description); 
```

文档：[MDN - 会员运营商](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)

# php - 如何创建像phpmyadmin中的表一样的动态表？

> ID：13695011
> 
> 赞同：0
> 
> 时间：2012-12-04T02:04:05.733
> 
> 标签：php, javascript, phpmyadmin, dynamic-tables

我有下面的代码，它在单击时编辑单元格值，但是我希望在用户单击保存按钮时将新值存储在数据库中..请帮助我

```
 <?php include"connect.php"; ?>
    <html>
        <head>
            <title>Edit time records</title>    
            <style>
                table{ text-align:justified;}
                a {text-decoration:none;
                   color:black;
                }
                .replace {display:none;}
            </style>
            <link rel="stylesheet" type="text/css" href="css/allRecordsStyle.css">
        <script type="text/javascript">
    /*<![CDATA[*/
    function INPUT(id){
    var obj=document.getElementById(id),tds=obj.getElementsByTagName('SPAN'),z0=0,ip,html;
    for (;z0<tds.length;z0++){
    tds[z0].onmouseup=function(){ AddInput(this); }
    }
    }

    function AddInput(td){
        var ip=zxcAddField('INPUT','text','');
        ip.value=td.innerHTML;
        ip.ondblclick = function () { removeInput(ip); };
        td.innerHTML='';
        td.appendChild(ip);
        td.onmouseup=null;
    }
    function removeInput(input) {
        var val = input.value;
        var td = input.parentNode;
        td.removeChild(td.lastChild);
        td.innerHTML = val;
        td.onmouseup = function () { AddInput(td); };
    }

    function zxcAddField(nn,type,nme){
    var obj;
    try {
    obj=document.createElement('<'+nn+' name="'+(nme||'')+'" '+(type?'type="'+type+'" ':'')+' >');
    }
    catch(error){
    obj=document.createElement(nn);
    if (type){
    obj.type=type;
    }
    obj.name=nme||'';
    }
    return obj;
    }

    /*]]>*/
    </script>
    <script type="text/javascript">
    /*<![CDATA[*/

    function Init(){
    INPUT('tst');
    }

    if (window.addEventListener){
    window.addEventListener('load',Init, false);
    }
    else if (window.attachEvent){
    window.attachEvent('onload',Init);
    }

    /*]]>*/
    </script>
        </head>
    <body>
    <a href="admin.php">back</a>
    <?php

      echo "<table border=1 id='tst' class='tab'>";
      echo "<tr><th class='data' rowspan='2' ><strong>EMPLOYEE</strong></th>";
      echo "<th class='data' rowspan='2'>DATE</th>
                <th colspan='2'>AM</th>
                <th colspan='2'>PM</th>
                <th colspan='2'>OVERTIME</th></tr>";
      echo "<tr>
        <th>Arrival</th>
        <th>Departure</th>  
        <th>Arrival</th>
        <th>Departure</th>
        <th>In</th>
        <th>Out</th>
    </tr>";

    $query="SELECT 
    employee_detail.employee_code,
    employee_detail.lname,
    employee_detail.fname,
    employee_detail.mname,
    employee_record.date,
    employee_record.am_in,
    employee_record.am_out,
    employee_record.pm_in,
    employee_record.pm_out,
    employee_record.over_in,
    employee_record.over_out
    FROM employee_detail INNER JOIN employee_record ON         employee_record.employee_code=employee_detail.employee_code ORDER BY id DESC ";

$result=mysql_query($query);
$affected=mysql_affected_rows();

    while($affected>=1&&$row=mysql_fetch_array($result))
    {

      echo '<tr><td>';
      echo $row['lname'].",&nbsp";
      echo $row['fname']."&nbsp";
      echo $row['mname']."</td>"; 
      echo '<td>'.$row['date'].'</td>';
      echo '<td><span name="am_in">'.$row['am_in'].'</span></td>';
      echo '<td><span name="am_out">'.$row['am_out'].'</span></td>';
      echo '<td><span name="pm_in">'.$row['pm_in'].'</span></td>';
      echo '<td><span name="pm_out">'.$row['pm_out'].'</span></td>';
      echo '<td><span name="over_in">'.$row['over_in'].'</span></td>';
      echo '<td><span name="over_out">'.$row['over_out'].'</span></td></tr>';
      $affected--;

    }?>
    <input id="save" type="submit" value="Save Changes" onclick=""/>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:59:37.460

我看不懂这个。我已经尝试了 15 分钟。

要保存到数据库，您需要对服务器进行 AJAX 调用，这可能意味着，在您的情况下，您将为此目的制作另一个 php 脚本，或者将您的脚本分成多个文件......

但是你最终会在这个“保存按钮”上附加一个点击事件，然后执行以下操作：

```
var xhr = makeXmlObject();
xhr.onreadystatechange = function () {
  if (xhr.readyState == 4) {
     alert("saved...hopefully...");
  } 
}
xhr.open("POST", "myscript.php", true);
xhr.send("name=cheese"); 
```

您还需要将标题设置为表单编码，并制作其他脚本......并制作 makeXmlObject 函数......但这应该让您走上正轨。

或者你可以使用一个库，其中大部分内容都会为你抽象，所以你的一切都不是那么神秘......这是我前一段时间所做的，现在不记得如何使用直接的 xmlhttprequest 对象......

无论如何，祝你好运。

# sql - 创建或替换函数错误

> ID：13695018
> 
> 赞同：1
> 
> 时间：2012-12-04T02:04:52.763
> 
> 标签：sql, oracle

我正在使用 Oracle SQL Developer：ODMiner 进行文本挖掘。我将数据“WEBLOG”导入到表中。这个博客数据包括用户活动、日期、时间、url 等。我采取的第一步是使用将数据表中的日期和时间转换为表示自 1990 年 1 月 1 日以来 40 分钟的数字的函数。我通过将其除以 2400（40 分钟内的秒数）来做到这一点。主要目的是为会议制定一个时间框架。我使用了以下代码，

```
 CREATE OR REPLACE FUNCTION ssnDate(
    DATE IN VARCHAR2 DEFAULT 03-01-18,
    TIME IN VARCHAR2
    ) RETURN NUMBER
    AS
    BEGIN
       RETURN TRUNC((to_date(DATE||' '||TIME, 'DD-MM-YY HH:MM:SS')- to_date('01-JAN-    1990','DD-MON-YYYY')) * (86400/2400);
    END ssnDate; 
```

这是运行语句后出现在日志中的内容，

```
FUNCTION ssnDate compiled
Warning: execution completed with warning 
```

在此之后，我尝试创建一个 VIEW 以使用之前创建的 ssnDate 转换 DATE 和 TIME，并连接 CS_URI_STEM（这是访问的资源）和 CS_URI_QUERY（这是查询，如果有的话，客户端正在尝试执行）进入一个名为 WEB_LINK 的新字段。

这是使用的代码，

```
 CREATE OR REPLACE VIEW WEBLOG_VIEWS("C_IP", "WEB_LINK", "CS_USER_AGENT", "SESSION")
    AS
    SELECT ssnDate(LOG_DATE, LOG_TIME) AS 'SESSION',
    C_IP,
    CS_USER_AGENT,
    (CS_URI_STEM||'?'||CS_URI_QUERY) AS WEB_LINK
    FROM WEBLOG; 
```

现在从这里我得到以下错误..

```
Error starting at line 1 in command:
CREATE OR REPLACE VIEW WEBLOG_VIEWS("C_IP", "WEB_LINK", "CS_USER_AGENT", "SESSION")
AS
SELECT ssnDate(LOG_DATE, LOG_TIME) AS 'SESSION',
C_IP,
CS_USER_AGENT,
(CS_URI_STEM||'?'||CS_URI_QUERY) AS WEB_LINK
FROM WEBLOG
Error at Command Line:3 Column:38
Error report:
SQL Error: ORA-00923: FROM keyword not found where expected
00923\. 00000 - "FROM keyword not found where expected"
*Cause: 
*Action: 
```

我不知道我哪里出了问题。这是数据准备阶段，需要我在应用建模技术或算法之前准备数据。下一步是根据会话时间对数据进行分组, ip 和每个会话的用户代理以及用户在该会话中访问的 web_links 字段。

对于我出错的地方或任何类型的解决方案，我真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:43:13.977

在这一行中使用双引号：

```
SELECT ssnDate(LOG_DATE, LOG_TIME) AS "SESSION", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:44:21.413

在这个小段代码中你有很多错误和低效率。

第一，

```
P_DATE IN VARCHAR2 DEFAULT 03-01-18 
```

这个默认值是无稽之谈。您实际上是在说默认值为负 16（3 减 1 分 18！）。它应该用单引号

```
P_DATE IN VARCHAR2 DEFAULT '03-01-18' 
```

其次，如果功能那么简单，我建议你把

```
TRUNC((to_date(DATE||' '||TIME, 'DD-MM-YY HH:MM:SS')- to_date('01-JAN-1990','DD-MON-YYYY')) * (86400/2400)) 
```

进入视图本身以避免为返回的每一行切换上下文（SQL->PLSQL）。如果要将其保留为函数，请阅读标量子查询缓存。即使用确定性函数（或在 11g 中使用 result_cache）并将该函数也放入子查询中。

第三，您的视图定义列与实际使用的列不一致。

```
CREATE OR REPLACE VIEW WEBLOG_VIEWS("C_IP", "WEB_LINK", 
  "CS_USER_AGENT", "SESSION")
    AS
    SELECT ssnDate(LOG_DATE, LOG_TIME) AS 'SESSION',
    C_IP,
    CS_USER_AGENT,
    (CS_URI_STEM||'?'||CS_URI_QUERY) AS WEB_LINK 
```

所以 C_IP 真的是“SESSION”，WEB_LINK 真的是 C_IP 等等。

也不要在表/视图中使用 SQL 保留字 (SESSION)。您只是在为自己的背部做一根棒子，因为每次您选择反对此视图时，您都需要输入带有引号的“SESSION”，而不仅仅是会话。

最后，为什么要将日期和时间存储为 CHAR 数据而不是本地 DATE？如果你能改变这一点，从长远来看会好得多。特别是当您使用 YY 格式存储日期时，这比存储为 YYYY 更糟糕！

综上所述，如果您想保留该功能，请将其更改为以下内容：

```
create or replace function ssndate(p_date in varchar2 default '03-01-18',
                                   p_time in varchar2)
return number
$if dbms_db_version.ver_le_10 $then
deterministic
$elsif dbms_db_version.ver_le_11 $then
result_cache
$end
as
begin
  return trunc((to_date(p_date||' '||p_time, 'dd-mm-yy hh24:mi:ss')
          - to_date('01-jan-1990','dd-mon-yyyy')) * (86400/2400));
end ssndate;
/ 
```

如果您使用的是 11g，那么 $ 代码只会放置 RESULT_CACHE，否则会放置 DETERMINISTIC。

并且视图应该包含这个函数作为子查询：

```
create or replace view weblog_views
as
select (select ssndate(log_date, log_time) from dual) as "SESSION",
       c_ip,
       cs_user_agent,
       (cs_uri_stem||'?'||cs_uri_query) as web_link
  from weblog; 
```

# jquery - Jquery for循环导致更新按钮多次触发

> ID：13695026
> 
> 赞同：1
> 
> 时间：2012-12-04T02:06:42.147
> 
> 标签：jquery

我有一些问题，我不确定如何实际解决它，基本上我会提取一个数据并附加到网络中，并为每个数据分配它拥有的 div 按钮，即删除和更新，每次单击都会删除所有并重新附加数据，代码如下

```
function DrawData(){ var txtHd = $('input[id$="hidText1"]').val(); 
if (typeof(txtHd) != "undefined" || txtHd != "") //if have value
{ 
    var sSplit = txtHd.split(sDelimiter);
    var i;
    var div1, div2, div3, div4, div5, row1, comment;
    for (i=0;i<=sSplit.length-1;i++){
        if (sSplit[i].trim() == "") { return true; }
        comment = "";
        iAdd1 = i + 1;
        div1 = "<div class=container><div id=" + sSplit[i] +" class=number>" + iAdd1 + "</div>";
        div2 = "<div class=stage>Level " + iAdd1 + "</div>";
        div3 = "<div class=name>" + sSplit[i] + "</div>";
        div4 = "<div id=rem" + iAdd1 +" class=rem>remove</div>";
        div5 = "<div id=upd" + iAdd1 +" class=upd>update</div>";;
        div6 = "<div class=drfm>Comment: " + comment +  "</div></div>";

        row1 = div1 + div2 + div3 + div4 + div5 + div6;
        $('#dtdr').append(row1);
        $('#errmsg').fadeOut();
        removeValue(); //add remove function
        updateValue(); //add update function into the div
    }
}}

function updateValue(){
$('.upd').on('click', function(){ 
    var cLb=$('input[id$="hidText1"]').val();
    var updName = $(this).parent().find('.name').text();
    var repName = $('input[id$=fl_Approval]').val().trim();

    if (repName == ""){ $('#errmsg').text("Add error: [ Not allow to add empty name ]"); $('#errmsg').fadeIn(); return; } //check empty value
    if (checkArrayDup(repName,cLb) == true){ $('#errmsg').text("Add error: [ Name: "+ repName + " exist in the list ]"); $('#errmsg').fadeIn(); return; } //check duplicate

    updName = updName + sDelimiter;
    repName = repName + sDelimiter;
    var newVal= $('input[id$="hidText1"]').val().replace(updName ,repName);
    $('input[id$="hidText1"]').val(newVal);
    $('.container').remove();
    DrawData();
}); 
```

它工作正常，但现在的问题是，代码效率不高，我不知道如何解决这个问题，for循环在更新按钮上创建了多个点击处理程序，所以每当我点击按钮时，就像它说的那样，我有 5 个数据，第一个数据将触发 5 次点击事件，第二个数据将触发 4 次点击事件，这些将持续到最后一个数据并导致重复数据检查无法正常工作，关于如何解决这个问题的任何想法？对不起我的英语不好，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:13:45.300

使用事件委托对你有用吗？您可以执行以下操作，而不是直接在 .upd div 上分配事件处理程序：

```
$('#dtdr').on('click', '.upd', function(e) { console.log(this); # --> .upd div }); 
```

这会将点击事件委托给应该已经存在的#dtdr div。当有人点击 div 时，它会检查点击是否来自 .upd div 并执行该功能。这样，您就不必在添加行时分配新的事件处理程序。

# python - 比较两个列表并获得数字的差异

> ID：13695027
> 
> 赞同：1
> 
> 时间：2012-12-04T02:06:49.577
> 
> 标签：python, list, numbers, compare

我试图了解获取两个列表的最有效方法，例如

`[u'25.78', u'13.39', u'11.93', u'14.97', u'14.34', u'21.08', u'13.24', u'13.11', u'', u'19.45', u'17.56', u'20.57', u'28.50', u'24.38', u'31.13', u'17.20', u'18.52', u'6.42', u'17.31']`

和

`[u'20.77', u'24.08', u'17.66', u'14.63', u'24.40', u'42.14', u'21.93', u'30.37', u'15.20', u'21.94', u'34.20', u'18.47', u'19.05', u'24.31', u'13.55', u'14.44', u'32.53', u'18.00', u'19.95']`

并获得一个包含以下内容的新列表：

`[u'5.01',u'-10.69',u'-5.73']`等等..

我的大脑只是不理解如何在逻辑上做到这一点。我一直想引用一个`for`循环，但我试图`for`在另一个`for`循环中找到一个循环，这让我很困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T02:09:58.650

*关键是它同时*遍历两个列表。 [`zip`](http://docs.python.org/2/library/functions.html#zip)将配对每个列表中的项目。

给定`listA`和`listB`：

```
[u'%0.2f' % (float(x) - float(y)) for x, y in zip(listA, listB)] 
```

# php - 垂直对齐 div，但保持水平位置不变

> ID：13695028
> 
> 赞同：24
> 
> 时间：2012-12-04T02:06:53.793
> 
> 标签：php, javascript, jquery, mysql

从数据库中，我正在提取具有特定起点和特定终点的 Div 时间线。其中一些重叠，其中一些可以彼此相邻安装。 ![从数据库](../Images/a27aa1553edb5f6cf5dbedb02f17be61.png)

最终，我想将它们滑动在一起，使其尽可能紧凑，如下所示： ![我们想要完成的事情](../Images/ef644c94fd2d3fde3c519bccfe65ae29.png)

我怀疑如何应对这一挑战：通过服务器端 (php) 脚本或使用一些 javascript 浮动脚本。*或者当然是完全不同的方法*

有人能把我推向正确的方向吗？

**编辑:: 重要的是，因为它是一个时间线，所以 div 的水平位置保持不变。因此，将所有 div 浮动到左侧或内联阻止它们是没有选择的:)**

我的数据库设置：

```
id | name | start | end  
1  | a    | 2     | 7  
2  | b    | 5     | 10  
etc 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T17:40:15.563

```
<!DOCTYPE html>
<html>
<!--
  Created using jsbin.com
  Source can be edited via http://jsbin.com/udofoq/26/edit
-->
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
<style id="jsbin-css">div.blue {
    background-color: #a4dcdf;
}

div.orange {
    background-color: #fd9226;
}

div.green {
    background-color: #88b37e;
}

div.yellow {
    background-color: #d8d03f;
}

div.red {
    background-color: #c16558;
}
div.grey {
    background-color: #cdcdcd;
}
div.hours1{
  top: 0px;
  left: 10px;
  width: 100px;//(110-10)
}
div.hours2{
  top: 30px;
  left: 80px;
  width: 50px;
}
div.hours3{
  top: 60px;
  left: 120px;
  width: 50px;
}

div.hours4{
  top: 90px;
  left: 5px;
  width: 70px;
}

div.hours5{
  top: 120px;
  left: 110px;
  width: 30px;
}
div.hours6{
  top: 150px;
  left: 130px;
  width: 70px;
}
div.hours {
  position: absolute;
  height:20px;
  color: white;
  text-align:center;
  border:white;
  -webkit-box-shadow: 3px 3px 6px 2px rgba(00, 00, 00, .2);
  box-shadow: 3px 3px 6px 2px rgba(00, 00, 00, .2);
  font: bold 18px Arial, Helvetica, Geneva, sans-serif;
  line-height:20px;     
}

button{
    position:static;
    margin-top:200px;
}
.collapse,
.overlap1,
.overlap2,
.overlap3,
reset{
    float:left;
}
</style></head>
<body>
  <div class="hours hours1 orange">A</div>
<div class="hours hours2 yellow">B</div>
<div class="hours hours3 blue">C</div>
<div class="hours hours4 green">D</div>
<div class="hours hours5 red">E</div>
<div class="hours hours6 grey">F</div>
<button class="collapse">collapse</button>
<button class="overlap1">sort</button>
<button class="reset">reset</button>

<script>
data1 = [
  [1, 10, 110],
  [2, 80, 130],
  [3, 120, 170],
  [4, 5, 70],
  [5, 110, 140],
  [6, 130, 180]
];

//just added for console output not needed
var divider="";
for (var i = 0; i < 80; i++) {
  divider += "_";
}

console.log(divider);
console.log("ORIGINAL ARRAY DATA1:", data1);

//add a column to keep track of the row, to start set it to  row 1
data1 = $.each(data1, function(index, value) {
  value[3] = 0;
});

console.log(divider);
console.log("ORIGINAL dataA WITH ADDED COLUMN:", data1);

function timelinesort(dataA){

//make a new Array to store the elements in with their new row number
var dataB = dataA.slice(0, 1);

console.log(divider);
console.log("INITIALIZED dataB WITH FIRST ELEMENT FROM dataA:", dataB);

//initialize the counter
var counter = 0;

console.log(divider);
console.log("INITIALIZED ROUNDS COUNTER:", counter);

dataA = $.map(dataA, function(value1, index1) {

//increment counter with 1 
counter++;

console.log(divider);
console.log("INCREMENTED ROUNDS COUNTER:", counter);

  dataA = $.map(dataA, function(value2, index2) {

    //exclude comparing an element with itself
    if(value2 != dataB[0]) {
      //check to see if elements overlap
      if(value2[2] >= dataB[0][1] && value2[1] <= dataB[0][2]) {
        console.log(divider);
        console.log("Round " + counter  + " from dataA: [" + value2 + "] overlaps with " + dataB[0] + " incrementing row counter with 1");
        //increment the value in column 3 (row counter) of the array
        value2[3]++;
        console.log(divider);
        console.log("Now the dataA has changed to this:", dataA);
        console.log("Meanwhile data1 has changed to this:", data1);
      } else {
        //if no overlap occurs check if the element is not already in the dataB array and if not check if it doesn't overlap with the existing elements
        if($.inArray(value2, dataB) == -1) {
          $.each(dataB, function(index3, value3) {
            if(value3[2] >= value2[1] && value3[1] <= value2[2]) {
              console.log(divider);
              console.log("Round " + counter + " from dataA: [" + value2 + "] overlaps with " + value3 + " incrementing row counter with 1");
              dataB.pop();
              //increment the value in column 3 (row counter) of the array
              value2[3]++;
            } else {
              //if no overlap occurs add the value to dataB
              dataB.push(value2);
              console.log(divider);
              console.log("Added [" + value2 + "] to dataB and now dataB has changed to this: ", dataB);
            }
          });
        } else {
          dataB.push(value2);
          console.log("Added [" + value2 + "] to dataB and now dataB has changed to this: ", dataB);
        }
      }
    }
    return [value2];
  });
  dataA = jQuery.grep(dataA, function(item) {
    return jQuery.inArray(item, dataB) < 0;
  });
  if(dataA.length >= 1) {
    dataB.unshift(dataA[0]);
    dataB = dataB.splice(0, 1);
  } else {
    dataA = [];
  }

});

}
//run the function
timelinesort(data1);

console.log(divider);
console.log("Finally the data1 has changed to this:", data1);

$(".collapse").click(function() {
  $.each(data1, function(index, value) {
    $("div.hours" + (index + 1)).animate({
      "top": 0
    }, "slow");
  });

});

$(".overlap1").click(function() {
  $.each(data1, function(index, value) {
    console.log("div.hours" + (index + 1) + ":" + (value[3]) * 26);
    $("div.hours" + (index + 1)).animate({
      "top": (value[3]) * 26
    }, "slow");
  });

});

$(".reset").click(function() {
  $.each(data1, function(index, value) {
    $("div.hours" + (index + 1)).removeAttr('style');
  });

});
</script>
</body>
</html> 
```

我所做的是将所有行折叠到第一行，然后检查哪些行与该行的原始行重叠，如果是这样，在重叠行上增加行号，然后转到下一行并重复该过程，直到所有元素都整齐堆叠。

您仍然需要清理 javascript/jquery 的东西并将其放入一个不错的函数中。但作为概念证明，它似乎有效

**工作示例：**

* * *

[http://jsbin.com/udofoq/26/watch](http://jsbin.com/udofoq/26/watch)

或者

[http://jsfiddle.net/stofke/7VP5U/](http://jsfiddle.net/stofke/7VP5U/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T17:14:30.480

在这里查看我的[小提琴](http://jsfiddle.net/whHXE/29/)。我认为它可以通过无限数量的块满足您的需求。块数据取自 HTML 表。

JS：

```
var data = [],
    rows = [],
    chart = $('.wrapper-inner');

function DataItem(id, name, start, end){
     this.id = id;
     this.name = name;
     this.start = start;
     this.end = end;
}

$('.data tr').each(function() {
    var $this = $(this),
        item = new DataItem( $this.find('td:eq(0)').text(),
                             $this.find('td:eq(1)').text(),
                             $this.find('td:eq(2)').text(),
                             $this.find('td:eq(3)').text() );
        data.push(item);
});

function addRow(){
    var row = {
        el : $('<div class="row"></div>').appendTo(chart),
        positions: []
    };

    rows.push( row );
}

function checkRow(rowId, item){        
    var isRowAvailible = true;

    for (var i = 0; i < +item.end - +item.start; i++){
        if (rows[rowId].positions[+item.start + i]){
            isRowAvailible = false;
            break;
        }
    }

    return isRowAvailible;
}

function markRowPositions(rowId, item){

    for (var i = 0; i < item.end - item.start; i++){
        rows[rowId].positions[+item.start + i] = true;
    }

}

function addItems(){
    for (var i = 0; i < data.length; i++){
        (function(i){
            setTimeout(function() {addItem(data[i])}, 100 * i);
        })(i)
    }
}

function addItem(item){
    var rowToAdd = false,
        itemEl = $('<div class="item"></div>');

    for (var i = 0; i < rows.length; i++){
        if ( checkRow(i, item) ){
            rowToAdd = i;
            break;    
        }
    }

    if (rowToAdd === false){
        addRow();
        rowToAdd = rows.length - 1;
    }

    rows[ rowToAdd ].el.append(itemEl);

        console.log(itemEl.css('opacity'))

    itemEl.css({
        'left': item.start * 30,
        'opacity' : 1,
        'width': ( ( item.end - item.start ) * 30 ) - 2
    });

    markRowPositions(rowToAdd, item);

}

addItems(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T11:59:28.680

这是我能得到的最接近的。它接收一个 json_string，解析它并生成结果。它是完全动态的。元素按照它们在 json 数组中的顺序淡化。

[工作演示](http://jsbin.com/isaqol/14/)

希望这个问题：

HTML：

```
 <div id="divHolder">
    </div>
    <input type="button" onclick="loadChart(json_data1);" value="Load Data 1" />
    <input type="button" onclick="loadChart(json_data2);" value="Load Data 2" />
    <input type="button" onclick="loadChart(json_data3);" value="Load Data 3" /> 
```

JS：

```
var json_data1 = '[{"id":1,"name":"A","start":2,"end":7},{"id":2,"name":"B","start":6,"end":9},{"id":3,"name":"C","start":8,"end":12},{"id":4,"name":"D","start":0,"end":5},{"id":5,"name":"E","start":7,"end":9}]';

var json_data2 = '[{"id":1,"name":"A","start":5,"end":7},{"id":2,"name":"B","start":6,"end":9},{"id":3,"name":"C","start":2,"end":6},{"id":4,"name":"D","start":2,"end":12},{"id":5,"name":"E","start":1,"end":9}, {"id":6,"name":"F","start":7,"end":11}, {"id":7,"name":"G","start":8,"end":12}, {"id":8,"name":"H","start":2,"end":4} ]';

var json_data3 = '[{"id":1,"name":"A","start":8,"end":12},{"id":2,"name":"B","start":4,"end":10},{"id":3,"name":"C","start":2,"end":4},{"id":4,"name":"D","start":0,"end":7},{"id":5,"name":"E","start":7,"end":11}, {"id":6,"name":"F","start":5,"end":7}]';

function loadChart(json_data){
    var data = JSON.parse(json_data);
    var divHolder = $('#divHolder');
    var maxWidth = $(document).width() - 200;
    var maxHeight = $(document).height();
    $(divHolder).empty();
    var maxEnd = 0;
    var minStart = 0;
    var widthUnit = 0;
    $(data).each(function(){
        if(this.end > maxEnd)
            maxEnd = this.end;
        if(this.start < minStart)
            minStart = this.start;
    });
    widthUnit = maxWidth / (maxEnd - minStart) ;
    var maxItemUnit = maxEnd;
    var rows = new Array();
    $(data).each(function(){
        var added = false;
        var currentObj = this;
        var i;
        for(i=0;i<rows.length;i++){
            var toAdd = true;
            //if(widthSum> maxItemUnit              
            var widthSum = 0;
            $(rows[i]).each(function(){
                widthSum += this.end - this.start;
                if(this.end < currentObj.start ||  this.start > currentObj.end){
                    if((widthSum + currentObj.end - currentObj.start) < maxItemUnit) 
                        toAdd = true;
                }                               
                else{
                    toAdd=false;
                    return false;
                }
            });
            if(toAdd){
                rows[i].push(currentObj);
                added = true;
                break;
            }
        }
        if(!added){
            rows[i] = new Array();
            rows[i].push(currentObj);
        }
    });

    $(rows).each(function(){
        var current = this;
        var divMain = $('<div></div>').css('display','block').css('width', maxWidth).css('height', 50)
        $(current).each(function(){
            var div = $('<div></div>');
            div.addClass('item').html('<span class="item-content">'+this.name+'</span>');
            var diff = this.end - this.start;
            div.attr('id', this.id).css('opacity','0').css('left', widthUnit * this.start).width(widthUnit * diff);
            if(diff < (maxItemUnit/3))
                div.addClass('small');
            else if (diff < (maxItemUnit/2))
                div.addClass('medium');
            else
                div.addClass('large');
            divMain.append(div);
        });
        $(divHolder).append(divMain);
    });
    var delayVar = 0;
    $(data).each(function(){
        $('#'+this.id).fadeTo(delayVar, 1);
        delayVar += 300;
    });
} 
```

CSS：

```
.item{
    display:inline-block;
    position:absolute;
    color: #ffffff;
    border: 1px solid white;
}
.item-content{
    margin-left: 50%;
}
.small{
    background-color:#E66C3D;
}
.medium{
    background-color:#DDD634;
}
.large{
    background-color:#3EC043;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T01:36:03.023

您的问题听起来很幼稚，但如果需要以最优化的方式解决，它实际上包含一些复杂的元素。

我可能会做些什么来生成你的显示的快速回答 -

1.  使用提供的将行号添加到表中的函数
2.  使用您的 PHP 代码为每一行生成一个带有 style="display:block" 的 DIV 容器

3.  在行内生成适当大小的 DIV (end-start * scale) style="display:inline-block; float:left; display:relative" 和**(EDIT:)**添加透明 DIV 元素以补偿您需要的空白。（即从0到开始和从结束到下一个DIV的开始）

4.  在 DIV 元素中添加名称字段

`use mySchema; drop procedure if exists tileItems;`

```
DELIMITER $$
CREATE PROCEDURE tileItems ()
BEGIN
DECLARE p_id, p_start, p_end, p_row int;
DECLARE done INT DEFAULT FALSE;
DECLARE cur1 CURSOR FOR SELECT id, start, end FROM tasks order by start, id;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

drop temporary table if exists tiles;

create temporary table tiles (
row int(11) NOT NULL,
id int(11) NOT NULL,
end int(11) NOT NULL
);
-- row field will indicates the row number the task should apear
OPEN cur1;
next_task: LOOP

FETCH cur1 into p_id, p_start, p_end;
  IF (done) THEN
    LEAVE next_task;
  END IF;
select min(row) from (select row, max(end) me from tiles t2 group by row) t1 
  where me < p_start
  into p_row;

-- take care of row numbering  
IF (p_row IS NULL) then
  select max(row) from tiles
    into p_row;
    IF (p_row IS NULL) then
      SET p_row = 0;
    END IF;
    SET p_row=p_row+1;
END IF;

insert into tiles (id, row, end)
  values (p_id,p_row,p_end);

END LOOP;

-- CLOSE cur1;
-- here is your output, on the PHP/.Net code you should loop on the row 
select tasks.*, tiles.row from tasks
inner join tiles
 on tasks.id = tiles.id
order by tiles.row, tasks.start;

END $$
DELIMITER ; 
```

这是我用来检查的表格-

```
CREATE TABLE `tasks` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `start` int(11) NOT NULL,
  `end` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=11 ;

INSERT INTO `tasks` (`id`, `name`, `start`, `end`) VALUES
(1, 'A', 2, 6),
(2, 'B', 5, 7),
(3, 'C', 8, 10),
(4, 'D', 1, 5),
(5, 'E', 6, 7); 
```

关于优化的几句话（我最喜欢的主题之一 :) - 在这段代码中没有优化，这意味着任务将分配给第一个可用行。为了尽量减少行数，它可能（但需要一些时间）创建一个使用[启发式](http://en.wikipedia.org/wiki/Metaheuristic)方法来解决此问题的函数。

输出：

```
id  name    start   end row
4   D   1   5   1
5   E   6   7   1
3   C   8   10  1
1   A   2   6   2
2   B   5   7   3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T17:12:15.143

看看`jQuery.Gantt`插件
[http://taitems.github.com/jQuery.Gantt/](http://taitems.github.com/jQuery.Gantt/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-08T13:13:20.033

试试这个：

```
function collides($block1,$block2) {
  return ( ($block1['start'] >= $block2['start']) and ($block1['start'] <  $block2['end']) ) or
         ( ($block1['end']   >  $block2['start']) and ($block1['end']   <= $block2['end']) ) or
         ( ($block1['start'] <= $block2['start']) and ($block1['end']   => $block2['end']) );   
}

function FitsInRow ($row,$block) {
    $fits=true;
    foreach ($row as $block1) 
        if (collides($block,$block1))
            $fits=false;
    return $fits;
}

$rows=array();

// $blocks like that:
$blocks[0]['start']=0;
$blocks[0]['end']=10;
$blocks[0]['name']='A';
$blocks[0]['color']='#F00';

$blocks[1]['start']=5;
$blocks[1]['end']=20;
$blocks[1]['name']='B';
$blocks[1]['color']='#0F0';
//etc

foreach ($blocks as $block) {
    $i=0;
    while (isset($rows[$i]) && !FitsInRow($block,$rows[$i]))
        $i++;
    $rows[$i][]=$block;
}

echo '<div class="block_outer" style="height: '.(count($rows)*20).'px;">';
foreach ($rows as $nr=>$row)
    foreach ($row as $block)
        echo '<div class="block" style="left:'.$block['start'].'px; width:'.($block['end']-$block['start']).'px; top:'.($nr*20).'px; background-color:'.$block['color'].';">'.$block['name'].'</div>';
echo '</div>'; 
```

使用以下CSS：

```
.block {
  position:absolute;
  height:16px;
  /* ... */
}
.block_outer {
  position:relative;
  width:100%;
  overflow:auto;
} 
```

不过，我还没有测试过。

编辑：我已经更改了名称，因此它适合提到的数据库设置。

另一个编辑：现在我添加了外部 div，因此内部 div 的绝对位置不会破坏页面布局。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T02:19:45.617

你试过`inline`用 CSS 显示它们吗？

```
div.inline {
    display: inline-block;
} 
```

你的 div 在哪里上课`inline`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-04T13:43:48.687

这看起来是一个很好的使用案例：

```
div.hours {
  position: absolute;
  top: 100px;
  left: 155px;
  width: 100px;
} 
```

当然，将 100px、155px、100px 替换为您的值。

或者，您可以尝试使用带有位置：相对和左/宽度值的条形、内部块的标签。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-06T12:03:02.847

没有简单的方法可以做到这一点，您需要使用`position: absolute`并计算事件在页面中的可见位置，例如：一天全天有`10px height`并且`10px width`我们需要在 处添加一个事件`day 1`，然后我们检查是否`line 1 is empty`有一个事件，如果它是空的则`put the event there`，否则`go to the next line and repeat`直到它被分配到一行中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-06T17:34:51.967

您需要查看[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)算法，或者自己实现它们（在 php 或 JavaScript 中），或者尝试找到合适的现成实现。

CSS 属性和表格布局都不会自动完美地解决这个问题。

# tags - 如何从其他方法中写入 textField.tag = 15？

> ID：13695029
> 
> 赞同：1
> 
> 时间：2012-12-04T02:06:56.663
> 
> 标签：tags, xcode4.5

此代码绘制多个文本字段并分配一个标签并将标签编号写入每个字段。如何在标签号为 15 的文本字段中写一个“X”？

```
- (void)viewDidLoad
{
    int z = 0;
    [super viewDidLoad];
    for (int y = 10; y < 300; y = y + 25)
    {
        for (int x = 10; x < 300; x = x + 25)
        {
            textField = [[UITextField alloc] initWithFrame:CGRectMake(x, y, 25, 25)];
            textField.borderStyle = UITextBorderStyleLine;
            textField.textColor = [UIColor blackColor];
            textField.font = [UIFont fontWithName:@"ArialMT" size:16];
            textField.backgroundColor = [UIColor whiteColor];
            textField.autocorrectionType = UITextAutocorrectionTypeNo;
            textField.backgroundColor = [UIColor clearColor];
            textField.textAlignment = NSTextAlignmentCenter;
            textField.enabled = NO;            
            textField.text = [NSString stringWithFormat:@"%d", z];
            [self.view addSubview:textField];
            textField.tag = z++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:10:44.153

您可以通过调用获得正确的文本字段`viewWithTag`：

```
UITextField *myField = (UITextField*)[self.view viewWithTag:15];
// Now that I have my field, I can write some text into it:
myField.text = @"X"; 
```

# objective-c - RestKit：当应用程序在后台运行时进行网络调用

> ID：13695031
> 
> 赞同：3
> 
> 时间：2012-12-04T02:07:30.933
> 
> 标签：objective-c, ios, restkit

当我的应用程序处于后台时，我一直在使用以下过程进行网络调用：

```
RKRequest *rkRequest = [[RKClient sharedClient] post:@"/..." params:paramsJsonified delegate:self];

[rkRequest setUserData:@"..."];

if ([[UIApplication sharedApplication] applicationState] != UIApplicationStateActive){
    [rkRequest sendAsynchronously];
} 
```

同时，后台任务也在运行。到目前为止，这主要是有效的，直到最近我看到我偶尔会在服务器上收到重复的呼叫。

有人可以解释当应用程序在后台时使用 RestKit 的正确方法，并指出我在这里做错了什么。

# regex - 需要匹配来自源的 2 个数字

> ID：13695032
> 
> 赞同：1
> 
> 时间：2012-12-04T02:07:44.333
> 
> 标签：regex, preg-match

我想获得第一个值 8,222,567 以及另一个正则表达式，它将采用第二个值 7,089。这些数字是动态的，因此它们每次都会改变。

第二个值每天从 0 重新开始。

有没有人可以让我这个正则表达式？

```
<p>
    8,222,865 people have bought the game.
</p>
<p>
    In the last 24 hours, 7,087 people bought the game.
</p> 
```

对于第二个正则表达式，我需要匹配**hours**和**people***之间* 的内容。

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:09:43.253

你标记`preg-match`了 ，所以我们假设 PHP 和 PCRE。这很容易使用`([\d,]+)`捕获组：

```
/([\d,]+)\s+people\s+.*24 hours,\s+([\d,]+)\s+people.*/sm 
```

*   `^`= 字符串的开头（注释后删除）
*   `([\d,]+)`组成第一个数字的数字和逗号字符串，在`()`
*   `.+?`数字后面的任何字符的非贪婪集直到...
*   `hours,` : ...字符串小时数，后跟逗号
*   `([\d,]+)`=`()`第二个号码的另一个捕获组
*   `.*`= 直到字符串末尾的所有其他内容。
*   `/sm``s`使`.`匹配换行符的多行修饰符和“dotall”

请注意，这*并不能*验证数字实际上是一个实数，`,`千位分隔符在正确的位置。它只是寻找一串数字和逗号。所以即使是无效的东西`99,,112345,`也会在那个位置匹配。但是，如果您不希望您的输入看起来像那样，并且*确实*希望在字符串的开头出现一个*实*`hours,`数，那么这没什么大不了的。

要匹配一个*有效*的数字，你需要一些更复杂的东西，比如

```
((?:\d{1,3},)(?:\d{3},)*(?:\d{1,3})) 
```

这仍然不完全正确，因为它将匹配 123,456,1。

### PHP中的快速测试：

```
$pattern = '/([\d,]+)\s+people\s+.*24 hours,\s+([\d,]+)\s+people.*/sm';
preg_match($pattern, $string, $matches);

print_r($matches);
Array
(
    [0] => 8,222,865 people have bought the game.
</p>
<p>
    In the last 24 hours, 7,087 people bought the game.
</p>
    [1] => 8,222,865
    [2] => 7,087
) 
```****

# html - CSS 格式化列

> ID：13695037
> 
> 赞同：0
> 
> 时间：2012-12-04T02:08:16.250
> 
> 标签：html, css, multiple-columns

我正在尝试将我的页面组织成 3 列。到目前为止，我已经存在列，但是其中一列被包裹在另外两列之下。

我使用了一张图片，宽度=300，高度=300，每列都有一个简单的标题。

这是我的CSS：

```
<style type="text/css">
        /*4 + 335*3 = 1009px*/
        #wrapper {
                border: 2px solid black;
                width: 1009px;
                margin-left: auto;
                margin-right: auto;
        }
        #header {
                text-align: center;
        }
        /* 325px content + 10px = 335px physical width per column */
        .column {
                float: left;
                width: 325px;
                margin: 5px;
                text-align: center;
                min-height: 250px;
        }

        #middle {
                border-left: 2px solid black;
                border-right: 2px solid black;
                margin-left: 0;
                margin-right: 0;
                padding-left: 10px;
                padding-right: 10px;
        } 
```

我猜测的包装器宽度中的数学一定有问题，但我无法发现错误。让我知道你的想法。

HTML：

```
<div id="wrapper">
  <div id="left" class="column">
    <h2>Tic Tac Toe</h2>
    <a href="tictactoe.php">
      <img src="images/tictactoe.png" alt="Tic-Tac-Toe"
        width="300" height="300"/>
    </a>
  </div>
  <div id="middle" class="column">
    <h2>Puzzle</h2>
    <a href="puzzle.php">
      <img src="images/puzzle.png" alt="Puzzle" 
        width="300" height="300"/>
    </a>
  </div>
  <div id="right" class="column">
    <h2>Rock Paper Scissors</h2>
    <a href="rockpaperscissors.php">
      <img src="images/rock_paper_scissors" alt="Rock Paper Scissors" 
        width="300" height="300"/>
    </a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:22:44.913

您的包装纸不够宽，无法容纳三个正方形。[根据this fiddle](http://jsfiddle.net/T5bu9/)`width`将类中的更改`#wrapper`为1019px

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T02:26:10.283

改变这个：

```
#wrapper {
  border: 2px solid black;
  width: 1019px;
  margin-left: auto;
  margin-right: auto;
} 
```

我个人不再喜欢手动进行布局。请考虑使用[960.gs](http://960.gs/)，或者更好的是[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。

# android - 什么是适用于 iOS/Android 的开源 ffmpeg 播放器？

> ID：13695040
> 
> 赞同：7
> 
> 时间：2012-12-04T02:08:47.140
> 
> 标签：android, ios, ffmpeg

我一直在寻找开源的ffmpeg播放器，我找到了一些。但我认为还有更多。如果您知道，请在评论或答案中添加一行。我正在开发 iOS，但我真的很想进一步了解为 Android 所做的工作

这是我发现的：

1.  Mooncatventures 组 [https://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

2.  KxMoviePlayer（使用 OpenGLES，Core Audio） [https://github.com/kolyvan/kxmovie](https://github.com/kolyvan/kxmovie)

3.  用于 ios 的 FFmpeg（带有 OpenGLES、AudioQueue） [https://github.com/flyhawk007/FFmpeg-for-iOS.git](https://github.com/flyhawk007/FFmpeg-for-iOS.git)

4.  iFrameExtractor [https://github.com/lajos/iFrameExtractor.git](https://github.com/lajos/iFrameExtractor.git)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:30:26.230

[ServeStream](http://sourceforge.net/projects/servestream/) - 适用于 Android 的流媒体播放器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:37:33.500

这是否是堆栈溢出的正确问题值得商榷 对于 IOS，您似乎有一个很好的列表，还有一些其他的，我个人可以解决我们的 mooncatventures 产品，最有可能是 rtspplay，我不是很熟悉kxmovie，它看起来很有希望，但需要设备上的文件。Iframeextractor，仅提取原始帧，仅此而已。

至于 Android，我绝对可以提供建议，因为我们刚刚为客户构建了一个播放器。

我们从 dolphin-player 开始，它是 android 的开源播放器。使用本机而不是自定义播放器，您主要需要的是 sdl 和 JNI 包装器，这是 android 最大的痛点。

本机播放器只是 ffplay，即 ffmpeg 发行版中包含的 sdl linux 播放器。SDL 在 Iphone 上可能很麻烦，但正如我们在 rtspplay 中展示的那样仍然可行，在 Android 上使用 SDL 没有问题，Android OS 的某些部分依赖于它。

您需要修改 ffplay，这可能很困难，但幸运的是我们能够重用很多 ios 编码，同样令人讨厌的部分是 JNI 包装器和 opengl，并且使用 dolphin 播放器作为基础使得这更容易一些。

我们就是这样做的，如果您需要帮助，请随时与我们联系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T02:24:54.773

对于 Java/Android，以下是其中之一：

[JJMPEG](http://code.google.com/p/jjmpeg/)

# matlab - 将元胞数组解析为不同的元胞

> ID：13695044
> 
> 赞同：-1
> 
> 时间：2012-12-04T02:08:53.390
> 
> 标签：matlab

我想解析

```
A,B,4,C,D,E,F
E3,E4,4,RE,RT,EW,TR 
```

它们以 2*1 单元格加载到 Matlab 中。我想将它们放在不同的单元格中，看起来应该像 2*7 单元格。

第一个单元格填充到单元格 1*7 中，第二个单元格填充到下一个类型为 1*7 的单元格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:48:28.540

给定 Matlab 中的一堆 2x1 元胞数组，例如：

```
X1 = {'A'; 'B'};    
X2 = {'4'; 'C'};
X3 = {'D'; 'E'};
X4 = {'F'; 'E3'};
X5 = {'E4'; '4'};
X6 = {'RE'; 'RT'};
X7 = {'EW'; 'TR'}; 
```

然后，您可以使用基本的数组操作来连接它们，提供尺寸匹配：

```
>> X = [X1 X2 X3 X4 X5 X6 X7]

X = 

'A'    '4'    'D'    'F'     'E4'    'RE'    'EW'
'B'    'C'    'E'    'E3'    '4'     'RT'    'TR' 
```

# node.js - 使用 node.js 监视文件夹的更改，并在更改时打印文件路径

> ID：13695046
> 
> 赞同：112
> 
> 时间：2012-12-04T02:09:06.420
> 
> 标签：node.js

我正在尝试编写一个 node.js 脚本来监视文件目录中的更改，然后打印更改的文件。如何修改此脚本以使其监视目录（而不是单个文件），并在更改时打印目录中文件的名称？

```
var fs = require('fs'),
    sys = require('sys');
var file = '/home/anderson/Desktop/fractal.png'; //this watches a file, but I want to watch a directory instead
fs.watchFile(file, function(curr, prev) {
    alert("File was modified."); //is there some way to print the names of the files in the directory as they are modified?
}); 
```

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-12-04T15:06:17.007

试试[Chokidar](https://github.com/paulmillr/chokidar)：

```
var chokidar = require('chokidar');

var watcher = chokidar.watch('file or dir', {ignored: /^\./, persistent: true});

watcher
  .on('add', function(path) {console.log('File', path, 'has been added');})
  .on('change', function(path) {console.log('File', path, 'has been changed');})
  .on('unlink', function(path) {console.log('File', path, 'has been removed');})
  .on('error', function(error) {console.error('Error happened', error);}) 
```

Chokidar 仅使用 fs 解决了一些跨平台问题。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2017-06-16T11:42:00.670

为什么不只使用旧的`fs.watch`？它非常简单。

```
fs.watch('/path/to/folder', (eventType, filename) => {
console.log(eventType);
// could be either 'rename' or 'change'. new file event and delete
// also generally emit 'rename'
console.log(filename);
}) 
```

有关选项参数的更多信息和详细信息，请参阅[Node fs Docs](https://nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-10-23T08:31:14.370

尝试[猎犬](https://github.com/beefsack/node-hound)：

```
hound = require('hound')

// Create a directory tree watcher.
watcher = hound.watch('/tmp')

// Create a file watcher.
watcher = hound.watch('/tmp/file.txt')

// Add callbacks for file and directory events.  The change event only applies
// to files.
watcher.on('create', function(file, stats) {
  console.log(file + ' was created')
})
watcher.on('change', function(file, stats) {
  console.log(file + ' was changed')
})
watcher.on('delete', function(file) {
  console.log(file + ' was deleted')
})

// Unwatch specific files or directories.
watcher.unwatch('/tmp/another_file')

// Unwatch all watched files and directories.
watcher.clear() 
```

一旦文件被更改，它将执行

# php - 在 PHP 中收集 SQL 数据的控制器函数

> ID：13695048
> 
> 赞同：0
> 
> 时间：2012-12-04T02:09:11.240
> 
> 标签：php, templates, scope

我正在使用基于 PHP 的 MVC 框架

在我的控制器中，我具有以下功能：

```
public function listing($tag=null, $page=1)
{
    $this->posts('`online`=1', $tag, $page, '%s/%d/');
    $this->locations('`parent`=1');
} 
```

在同一个文件中，我有 2 个函数从 2 个 MySQL 表中收集数据，其中一个用于位置：

```
private function locations($query)
{   
    // Collect Locations
    $locations = new Locations('WHERE '.$query.' ORDER BY `name` ASC');
    $total_locations = $locations->count();

    // Template
    require Template::render('Posts', 'listing.html');
} 
```

另一个用于帖子：

```
private function posts($query, $tag, $page)
{
    // Collect Posts
    $posts = new Post('WHERE '.$query.' ORDER BY `date` DESC');
    $total_posts = $posts->count();
    $pages = ceil($total_posts/24);

        if($page < 1) $page = 1;
        if($page > $pages) $page = $pages;

        $min = $page - 4;
        $max = $page + 4;

        if($min < 1)
        {
            $max += 1 - $min;
            $min = 1;
        }

        if($max > $pages)
        {
            $min += $pages - $max;          
            if($min < 1) $min = 1;          
            $max = $pages;
        }

        $posts->query('LIMIT '.($page*24-24).',24');

    // Template
    require Template::render('Posts', 'listing.html');
} 
```

在公共函数（列表）中，当第一行是 时`$this->posts...`，它正确显示帖子但不显示位置（它只显示“数组”。

如果我把`$this->locations...`它放在第一位，那么它会正确显示位置而不是帖子。

我不会向您展示更多代码，因为我相信它来自我的写作错误`listing function`

如何显示两个数组？

在我的视图页面上，我显示这样的位置/帖子：

```
<?php while($location = $locations->fetch($i)): ?>
    <p>
         <?php echo $location->title; ?>
    </p>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:17:27.487

我认为问题出在这里

```
require Template::render('Posts', 'listing.html'); 
```

我现在不知道这些参数是什么意思，但我的猜测是第一个是模板中变量的名称，并且对于它们两者，您将其设置为 Posts。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:47:14.657

通过合并2`private functions together`并从`$this->locations('``=1');``public function`

该设计被调用了 2 次，一次是位置，另一次是帖子，因为我调用了模板页面 2 次。

解决方案就是将这两个功能合并在一起！

# wpf - 用于 WPF 控件的 BackgroundProperty 的画笔如何设置边距？

> ID：13695051
> 
> 赞同：0
> 
> 时间：2012-12-04T02:09:42.570
> 
> 标签：wpf, brushes

在 WPF 中，我有`TextBox`一个`BackgroundProperty`设置为自定义画笔的设置。我想给这个画笔从`TextBox`. 画笔的`GlyphRunBrush`作用很像`ImageBrush`，但有一个光栅化字形作为画笔源。

我怎样才能做到这一点？

*例子：* ![在此处输入图像描述](../Images/33dfc44ee378e4d96b2019a2786d2af3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:47:20.377

一种方法是将转换应用于画笔本身，如下所示：

```
<TextBox>
    <TextBox.Background>
        <ImageBrush ImageSource="/MyApp;component/Search.ico"
                    AlignmentX="Right" Stretch="Uniform">
            <ImageBrush.Transform>
                <TransformGroup>
                    <TranslateTransform X="-5"/>
                </TransformGroup>
            </ImageBrush.Transform>
        </ImageBrush>
    </TextBox.Background>
</TextBox> 
```

您也可以尝试更改画笔`Viewport`属性的宽度，但由于您将其对齐在右侧，这可能比它需要的更复杂。

# php - 使用 PHP 从 iOS 应用程序向数据库提交数据时出错

> ID：13695052
> 
> 赞同：1
> 
> 时间：2012-12-04T02:09:45.470
> 
> 标签：php, mysql, ios, database, xcode

当用户选择保存时，我正在尝试将数据上传到 MySQL 数据库中。一切正常，上传完美。唯一不起作用的是如果我选择了应用程序的一部分。起初我以为是因为一次上传的信息太多，数据库无法处理。然后我在做了更多的研究后意识到事实并非如此。经过进一步调查，我能够对错误进行 NSLog 记录，并且每当我尝试保存时都会收到此错误：

```
Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x8191c20 {NSUnderlyingError=0x8490000 "bad URL", NSLocalizedDescription=bad URL} 
```

如果有人可以帮助我并尝试解释此错误的含义，那将非常有帮助。如果单独的解释对我没有帮助，我会发布代码，但首先我想要一个解释，看看我是否能自己解决问题。谢谢！

**编辑**

这就是我在 iOS 端的 URL 中的内容。对我来说似乎是正确的，但我可能会遗漏一些东西：

```
 NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/signUp.php?prod=%@&comp=%@&phone=%@&cat=%@&autos=%@&notes=%@",prod.text,company.text,phone.text,cat.text,date.text,notes.text]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:30:49.737

尝试：

```
NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/signUp.php?prod=%@&comp=%@&phone=%@&cat=%@&autos=%@&notes=%@",prod.text,company.text,phone.text,cat.text,date.text,notes.text];
NSString *escapedURLStr = [strURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:escapedURLStr]; 
```

警告 - 未经测试。

# c# - 如何使用事件来访问表单的控件？

> ID：13695053
> 
> 赞同：0
> 
> 时间：2012-12-04T02:09:53.410
> 
> 标签：c#, winforms, class, events

我正在寻找一个类如何使用事件回调父窗体控件的示例。在这种情况下，事件将发生在类中，而不是父级中。例如，如果您有一个班级，并且班级中发生了需要更新表单文本框的事情。

我通过将表单的文本框作为属性公开然后将表单的实例传递给类来做到这一点，但这似乎只是为了更新文本框而做的很多工作。

我正在尝试自学 C#，所以我是新手。肯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:21:54.667

```
public class Form1 : Form
{
    EventClass eventClassInstance;

    public Form()
    {
        eventClassInstance = new EventClass();
        eventClassInstance.actualEvent += new EventClass.CustomEventHandler(eventHandler);
    }

    private void eventHandler(object sender)
    {
        //Do something
    }
}

public class EventClass
{
    public delegate void CustomEventHandler(object sender);
    public CustomEventHandler actualEvent;// This gets fired somewhere

    public EventClass()
    {

    }
} 
```

这是父类中事件处理程序的一个简单示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:19:17.790

您可能想查看有关发布事件的[MSDN 文章。](http://msdn.microsoft.com/en-US/library/w369ty8x%28v=vs.80%29.aspx)根据您想要传递的信息，您可能需要创建一个自定义 EventArgs 来传递信息，然后创建您的委托和事件。

这是一个在上述 MSDN 链接上大量借用的快速而肮脏的示例，添加了 Timer 以进行快速测试：

**表格1**

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
        Class1 myClass = new Class1();
        myClass.RaiseCustomEvent += new EventHandler<CustomEventArgs>(myClass_RaiseCustomEvent);

    }

    void myClass_RaiseCustomEvent(object sender, CustomEventArgs e)
    {
        this.Text = e.Message;
    }

} 
```

**第一类**

```
using System.Windows.Forms;
namespace WindowsFormsApplication1
{
    class Class1
    { 
        public event EventHandler<CustomEventArgs> RaiseCustomEvent;
        public Class1()
        {
            Timer tmr = new Timer();
            tmr.Tick += new EventHandler(tmr_Tick);
            tmr.Interval = 2000;
            tmr.Start();
        }

        void tmr_Tick(object sender, EventArgs e)
        {
            CustomEventArgs ea = new CustomEventArgs("Hello World");
            RaiseCustomEvent(this, ea);
        }

    }

    public class CustomEventArgs : EventArgs
    {
        public CustomEventArgs(string s)
        {
            msg = s;
        }
        private string msg;
        public string Message
        {
            get { return msg; }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T02:16:54.180

尝试遵循此过程：

1.  在数据类中公开事件
2.  当文本框需要更新时，触发事件
3.  监听父窗体中的事件
4.  在事件处理程序中，更新文本框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T02:56:23.730

不确定您的班级将如何触发其更新操作。因此，让我们考虑一个简单的案例，用户单击一个按钮来调用该类来做某事。您可以将回调从表单传递给类，如下所示：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Class1 class1 = new Class1();
        class1.DoSomething(OnSuccess, OnError);
    }

    private void OnSuccess(string newValue)
    {
        textBox1.Text = newValue;
    }

    private void OnError(Exception ex)
    {
        MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

该类将完成其任务并将更新的值传递给回调，而不知道调用者将如何处理更新的值：

```
public class Class1
{
    public void DoSomething(Action<string> onSuccess, Action<Exception> onError)
    {
        try
        {
            // Logic to really do something...

            if (onSuccess != null)
                onSuccess("updated value");
        }
        catch (Exception ex)
        {
            if (onError != null)
                onError(ex);
        }
    }
} 
```

* * *

如果您已经学习了 lambda 表达式，则可以将调用即时传递回您的类：

```
private void button1_Click(object sender, EventArgs e)
{
    Class1 class1 = new Class1();
    class1.DoSomething(
        newValue => textBox1.Text = newValue,
        ex => MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error));
} 
```

# matlab - 概率密度函数

> ID：13695056
> 
> 赞同：1
> 
> 时间：2012-12-04T02:10:19.053
> 
> 标签：matlab, statistics

我将如何在 MATLAB 中模拟概率密度函数，使得

```
fx(x)={ x/8    0<=x<=4
      {   0     Other 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T04:00:09.470

任意概率密度函数的模拟如下进行：

1) 导出逆累积分布。

2) 从均匀的 [0, 1] 分布模拟。

3) 将均匀的 [0, 1] 数代入逆累积分布。

在你的情况下，你有一个很好的简单概率密度可以使用，这让我怀疑这是一个家庭作业问题。鉴于您尚未发布任何代码表明您已尝试自己解决它，因此我不会只为您写出答案。

相反，您为什么不自己推导逆累积分布呢？首先，您需要获得累积分布。这可以通过找到从负无穷到 x 的概率密度的积分来完成，在您的情况下，这相当于从 0 到 x 的积分。完成此操作后，您需要找到它的倒数。[这里](http://www.purplemath.com/modules/invrsfcn3.htm)的示例应该足以向您展示如何为您的简单案例执行此操作。如果你走得那么远，那么使用`rand(100, 1)`从均匀的 [0, 1] 密度模拟 100 次抽签，然后将这些数字代入逆累积分布。

如果您遇到任何问题，请随时编辑您的问题以添加它们，并对此答案发表评论，我会帮助您。我在接下来的一个小时左右。

干杯。

**更新：**我认为 OP 的作业现在可能已经到期了，所以为了完整性：概率密度的积分，即累积分布，是 f(x) = (1/16) x^2。请注意，当 x = 0 时，f(x) = 0，当 x = 4 时，f(x) = 1。这表明该问题正确地说明了概率密度的域。接下来，f(x) 意味着 g(x) = 4 * x^(1/2) 的逆 CDF。因此：

```
MyInverseCDF = @(x) (4 * sqrt(x));
MySimulatedDraw = MyInverseCDF(rand(100, 1)); 
```

我们可以使用以下方法直观地验证一切是否正常：

```
hist(MySimulatedDraw); 
```

另一件事，这里是另一个相关 SO 问题的链接：[defining-your-own-probability-distribution-function-in-matlab](https://stackoverflow.com/questions/9637703/defining-your-own-probability-distribution-function-in-matlab)

# javascript - JSON循环遍历单个对象

> ID：13695058
> 
> 赞同：0
> 
> 时间：2012-12-04T02:10:39.430
> 
> 标签：javascript, json

如何获取 javascript 数组中的第二个值（日期）？

我是新手，我无法让它工作。

```
{"0":"11-28-2012","4":"11-29-2012","10":"12-03-2012"} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:13:13.050

下面是一个非常简单的循环。您应该检查对象 hasOwnProperty，这对于更复杂的对象很重要。

如果您的对象称为 obj：

```
obj = {"0":"11-28-2012","4":"11-29-2012","10":"12-03-2012"}; 
for (var i in obj) {
    console.log(obj[i]);
} 
```

或者没有循环：

```
obj = {"0":"11-28-2012","4":"11-29-2012","10":"12-03-2012"};
console.log(obj[0]); // displays "11-28-2012" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:18:20.663

在 javascript 中，键的顺序是不确定的。如果你真的想要，你可以使用下划线[值](http://underscorejs.org/#values)函数

```
_.values(obj)[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T02:30:53.790

不太确定想要你想要的。但是如果你想得到 date in `month-date-year`use `split()`。

```
var jsonDate = {"0":"11-28-2012","4":"11-29-2012","10":"12-03-2012"};

console.log(jsonDate["0"].split('-')[1]); //28
console.log(jsonDate["4"].split('-')[1]); //29
console.log(jsonDate["10"].split('-')[1]); //03 
```

# android - Android：如何将应用程序的 UI 限制在其“设置”对话框中？

> ID：13695060
> 
> 赞同：0
> 
> 时间：2012-12-04T02:10:55.560
> 
> 标签：android, mobile, settings, android-4.2-jelly-bean

我是 Android 开发的新手。

我想创建一个 Android 应用程序，其唯一的 UI 区域是应用程序本身的设置区域。是否可以创建这样的应用程序，放弃任何类型的“主”视图，而将用户直接引导到“设置”区域？

如果是这样，如何在应用程序启动时直接在“设置”区域启动用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:14:54.660

您将主要活动声明为您的设置活动。Android 不关心哪个 Activity 是主要的，只要它有一个即可。

这是清单的一部分应该是这样的

```
<activity android:name=".SettingsActivityName" android:label="@string/title_activity_settings">
<intent-filter>
<action android:name="android.intent.action.MAIN"/>
<category android:name="android.intent.category.LAUNCHER"/>
</intent-filter>
</activity> 
```

这会告诉 Android 当用户点击您的应用程序图标时要启动的 Activity 是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:16:08.547

这是很有可能的。

在`manifest`文件中

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

这里 this`Intent Filter`负责启动第一个活动。

```
<intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

如果您只想要设置屏幕。改个名字就行了`activity`

```
android:name=".MainActivity" 
```

和

```
android:name=".yourSettingActivity" 
```

# java - 使用java代码创建derby数据库，表

> ID：13695064
> 
> 赞同：2
> 
> 时间：2012-12-04T02:11:27.373
> 
> 标签：java, derby

我直接在 C:\ 中下载了 derby 并设置了 DERBY_INSTALL 和 CLASSPATH 变量：

```
C:\>set DERBY_INSTALL=C:\Apache\db-derby-10.9.1.0-bin
C:\>set CLASSPATH=%DERBY_INSTALL%\lib\derby.jar;%DERBY_INSTALL%\lib\derbytools.jar;.
C:\> cd %DERBY_INSTALL%\bin
C:\db-derby-10.9.1.0-bin\bin>java org.apache.derby.tools.ij
ij version 10.9
ij> 
```

所以它显示了 ij>，我可以使用命令行 SQL 语句创建一个数据库。但我必须使用 Java 代码创建数据库及其表。所以我下面的源代码，但我不知道在哪里粘贴它以及如何运行它。当我将它粘贴到 db-derby-10.9.1.0-bin>bin 文件夹中并尝试使用“java MainClass komaldb C:\”在该文件夹中运行它时，它显示无法找到或加载主类 MainClass。我不确定我必须从哪里运行 java 程序。

Java 源代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;

public class MainDB {
static Connection conn;

public static void main(String[] args) throws Exception {
if (args.length != 2) {
  System.out.println("Usage: java JavaDBDemo <Name> <Address>");
  System.exit(1);
}
String driver = "org.apache.derby.jdbc.EmbeddedDriver";
String dbName = "AddressBookDB";
String connectionURL = "jdbc:derby:" + dbName + ";create=true";
String createString = "CREATE TABLE ADDRESSBOOKTbl (NAME VARCHAR 32) NOT NULL, 
ADDRESS VARCHAR(50) NOT NULL)";
Class.forName(driver);

conn = DriverManager.getConnection(connectionURL);

Statement stmt = conn.createStatement();
stmt.executeUpdate(createString);

PreparedStatement psInsert = conn
    .prepareStatement("insert into ADDRESSBOOKTbl values (?,?)");

psInsert.setString(1, args[0]);
psInsert.setString(2, args[1]);

psInsert.executeUpdate();

Statement stmt2 = conn.createStatement();
ResultSet rs = stmt2.executeQuery("select * from ADDRESSBOOKTbl");
System.out.println("Addressed present in your Address Book\n\n");
int num = 0;

while (rs.next()) {
  System.out.println(++num + ": Name: " + rs.getString(1) + "\n Address"
      + rs.getString(2));
}
rs.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:28:34.747

似乎您才刚刚开始使用 Java。

使用 Derby 假定您已经非常熟悉 Java 编程的基础知识。

我建议下载并运行一些 Java 教程，例如此处提供的教程：http: [//docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

在您对编写和运行 Java 程序更加熟悉之后，您就可以开始学习 Derby。我建议在此处下载 Derby 教程：http: [//db.apache.org/derby/papers/DerbyTut/index.html](http://db.apache.org/derby/papers/DerbyTut/index.html)

# android - Android ListView 缓冲区

> ID：13695069
> 
> 赞同：1
> 
> 时间：2012-12-04T02:11:58.077
> 
> 标签：android, listview, user-interface, buffer, adapter

我之前的列表实现是一个简单的 LinearLayout，它位于一个 ScrollView 中，里面装满了我的项目。

我切换到 ListView 的 Android 实现以简单地使用 CursorAdapter。一切正常，但有一个问题让我抓狂。

我的项目由一些 TextViews 和一个 ImageView 组成。我从 Internet 或本地 ImageCache 加载图像。但即使使用 ImageCache，我也可以在滚动时看到图像异步加载。图像首先弹出一半。

问题是 ListView 的回收机制动作太快了。我希望 Listview 在距离可见的 200dp 以上创建我的列表项。只是一个简单的预加载机制来确保项目完全加载，直到它们变得可见。但我没有找到任何线索，我可以在 ListView 中添加这个缓冲区的位置和方式。

有人知道类似的实现吗？我是否忽略了文档中的某些内容？

但我很确定这种缓冲区没有谷歌实现。看看人脉应用。没有预加载...

这就是回收站目前的工作方式

![现在如何运作](../Images/9d29be7ecfd0321a12f084e17e2a4dce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:19:52.410

`getView()`您可以期望的最好结果是根据您的子类的调用`CursorAdapter`和请求的位置计算您自己的“前瞻”指数。显然，一旦`getView()`被调用，Android 就会尝试显示该位置的项目。有的话就画出来。如果您不这样做，请将其排队以将其拉入，*然后*开始将下一个 N 项排队，无论您希望提前多深。

# php - PHP in_array() 函数始终为真

> ID：13695072
> 
> 赞同：0
> 
> 时间：2012-12-04T02:12:51.367
> 
> 标签：php, arrays

固定的！- 感谢 Barmar，他的评论将我推向了正确的方向。对于它的价值，修改后的代码如下。我将所有内容都包装在 in_array 条件中，而不是在循环中。感谢您的帮助，我知道我没有提供太多背景信息。

```
 $skufirst = str_split($product_skucart);

        if(!in_array($skufirst[0], $wildcards))
        {

                if($product_skuall != "")
                {
                    $i=0;

                      foreach($product_skuall as $skuall)
                        {
                            if(strstr($product_skucart,$skuall))
                            {   
                                    $bprice=$base_amountall[$i];
                                    $aprice=$additional_chargeall[$i];
                            }
                            $i++;
                        }

                        array_push($wildcards, $skufirst[0]);
                }

                    $base_amt = $bprice;
                    $additional_charge = $aprice;    
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:31:20.380

对于每种产品，您始终检查相同的条件：

```
$skufirst = str_split($product_skucart); 
```

你永远不会碰$product_skucart！

# html - 如何在 HTML5/CSS3 中创建按钮样式（示例）？

> ID：13695073
> 
> 赞同：0
> 
> 时间：2012-12-04T02:12:53.597
> 
> 标签：html, css

[例子](http://themeforest.net/item/stylico-dj-template/full_screen_preview/476481)

在这个网站的左上角有一个按钮列表“主页，传记，唱片...”

当用户选择不同的页面时，“蓝色指针”会随着用户选择的项目一起移动。

我想知道如何实现它？

我想对这个例子做些不同的事情。目前我有一个水平形式的菜单

例如。

项目 A | B项| 项目 C | 项目 D

^

如何使指针“^”移动并转到用户选择的项目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:24:49.487

你有很多 JQuery 插件。

看到这个：

[网站链接](http://www.freshdesignweb.com/jquery-menu.html)

这似乎是一个很好的解决方案：

[例子](http://tympanus.net/codrops/2010/06/28/awesome-cufonized-fly-out-menu/)

演示： [演示](http://tympanus.net/Tutorials/CufonizedFlyOutMenu/)

# knockout.js - 淘汰赛：根据可观察数 组中的属性值设置可见性

> ID：13695076
> 
> 赞同：0
> 
> 时间：2012-12-04T02:13:21.930
> 
> 标签：knockout.js, observable

嗨，我希望能够根据数组的值绑定表中项目的可见性。

我有

```
<input type="text" value="2" data-bind="visible: this.arrayVal[2].name == 'RST'/> 
```

等等，我有 Jquery 来生成数据绑定值。这个对吗？

另外我如何动态初始化值。N 行表的示例，我想将值绑定到 10 行的可观察数组？

所以为了澄清这是我写的，因为我无法控制 html，我正在使用 Jquery 添加数据绑定。

```
function addDataBind(index) {
   var selectItem, textItem;
   selectItem = $("#input" + index + "selectItem");
   textItem = $("#input" + index + "textItem");
   if (selectItem.length && textItem.length) {
        selectItem.attr("data-bind", "value: arrayVal[" + index + "], valueUpdate: 'afterkeydown'"
        textItem.attr("data-bind", "visible: arrayVal[" + index + "] == 'RST'");
   }
} 
```

使用 this.arrayVal()[$index] 在 Firefox 中不起作用，但在 chrome 中起作用。但是使用 this.arrayVal[$index] 可以在 firefox 和 chrome 中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:18:52.200

这里的主要问题之一似乎是您没有正确引用可观察数组，如果`arrayVal`确实是您需要做的可观察数组：

```
<input type="text" value="2" data-bind="visible: this.arrayVal()[2].name == 'RST'"/> 
```

要动态初始化 value 属性，您需要执行以下操作：

```
<div data-bind="foreach: this.arrayVal">
    <input type="text" data-bind="visible: name == 'RST', value: $index"/>
</div> 
```

这消除了直接在视图中引用数组索引的丑陋。

# algorithm - 多项式时间缩减传递性证明

> ID：13695084
> 
> 赞同：0
> 
> 时间：2012-12-04T02:14:08.653
> 
> 标签：algorithm

我只是想看看是否有人可以弄清楚以下语句中“字母”的含义。

“回想一下：对于多项式时间归约 ≤p，L ≤p M 意味着存在一个可计算函数 f：L 的字母表 → M 的字母表，使得 x∈L 当且仅当 f(x)∈M。”

它是多项式归约传递性的证明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:19:11.687

字母表是构成语言（在这种情况下为 L 或 M）的一组符号。

# javascript - jQuery计算字符而不是文本

> ID：13695086
> 
> 赞同：0
> 
> 时间：2012-12-04T02:14:19.610
> 
> 标签：javascript, jquery

如何计算字符而不是文本？我限制了30个字，如何限制30个字符非常感谢。

```
function excerpt(str, nwords) {
    var words = str.split(' ');
    words.splice(nwords, words.length - 1);
    return words.join(' ') + '&hellip;';
}

var $div = $('.container');
$div.each(function() {
    var theExcerpt = excerpt($(this).text(), 30);
    $(this).data('html', $(this).html()).html( theExcerpt );
});

$('span').click(function() {
    var isHidden = $(this).text() == 'Show';
    var $div = $(this).prev();
    var theExcerpt = excerpt($div.text(), 30);
    $div.html( isHidden ? $div.data('html') : theExcerpt);
    $(this).remove();
});​ 
```

这里是片段[http://jsfiddle.net/Nh4K2/](http://jsfiddle.net/Nh4K2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:23:30.767

```
function excerpt(text, len) {
    return text.substring(0, len)+"&hellip;";
} 
```

# c# - 为什么在 `LoadContent` 方法中更改图形设置后会失败？

> ID：13695093
> 
> 赞同：1
> 
> 时间：2012-12-04T02:14:57.703
> 
> 标签：c#, graphics, xna, xna-4.0

如果我在方法中设置图形设置，`Initialize`然后在`Update`方法中设置，如下所示：

```
protected override void Initialize()
{
    graphics.ApplyChanges();
    base.Initialize();
}

protected override void Update(GameTime gameTime)
{
    graphics.ApplyChanges();
    base.Update(gameTime);
} 
```

一切都很好。

但是，当我将代码移动到我的`LoadContent`方法时，如下所示：

```
protected override void LoadContent()
{
    spriteBatch = new SpriteBatch(GraphicsDevice);
    graphics.ApplyChanges();
}

protected override void Update(GameTime gameTime)
{
    graphics.ApplyChanges();
    base.Update(gameTime);
} 
```

我得到一个`InvalidOperationException`：

> 必须在调用 EndScreenDeviceChange 之前调用 BeginScreenDeviceChange

这对我来说没有多大意义，因为我在两者中都在做同样的事情。我的理解是，该`LoadContent`方法只是在该`Initialize`方法之后调用。那些搞砸了的电话之间发生了`GraphicsDeviceManager`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:02:36.947

你弄乱了 XNA 的一些内部管道。通常，XNA 应该连接事件以`GameWindow`在图形设备被创建/销毁时调用这些方法，并正确配对。但是，因为您在不应该在的地方更改图形设备，所以您以某种方式导致它失败。

回答有关您的具体案例的问题：正在发生的事情是在设置这些事件*后*`base.Initialize()`调用。您的呼叫已从事件连接之前转移到之后。`LoadContent` *`ApplyChanges`*

 *这并不重要，因为您的代码版本***都不*正确**。它似乎在第一个版本中工作只是祝你好运。**请参阅[此答案](https://stackoverflow.com/a/11287316/165500)***，其中解释了如何正确*设置和更改图形设备。*

# r - 通用打印函数 roxygen2

> ID：13695095
> 
> 赞同：1
> 
> 时间：2012-12-04T02:15:16.097
> 
> 标签：r, roxygen2

我有一个通用的打印功能，我认为我已经根据通用功能（[LINK](http://cran.r-project.org/doc/manuals/R-exts.html#Generic-functions-and-methods)，诚然我有点难以掌握）和这个问题（[LINK](https://stackoverflow.com/questions/6517222/roxygen-how-to-properly-document-a-s3-method-of-a-generic-in-a-different-packag)）正确设置了它。但是，它仍然会在检查中引发警告。下面是一个模拟函数、打印方法、roxygen 文档和检查中的错误。有关打印功能正在做什么的背景；基本上我希望输出看起来不像是类，但它仍然带有一个类，用于通过后续函数处理该对象。如何使警告消失（并保留打印功能）？

```
FUN <- function(x) {
    class(x) <- "full_matrix"
    x
}

#' Prints a fuul_matrix object
#' 
#' prints a test object
#' 
#' @param full_matrix The full_matrix object
#' @method print full_matrix
#' @S3method print full_matrix
print.full_matrix <- function(full_matrix) {
    x <- full_matrix
    class(x) <- NULL
    print(x)
}

x <- FUN(mtcars)
x
class(x) 
```

警告：

```
* checking S3 generic/method consistency ... WARNING
print:
  function(x, ...)
print.full_matrix:
  function(full_matrix)

print:
  function(x, ...)
print.incomplete_matrix:
  function(incomplete_matrix)

See section 'Generic functions and methods' of the 'Writing R
Extensions' manual. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:24:39.063

从[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html#Generic-functions-and-methods)

> *一个方法必须具有泛型的所有参数，包括 ... 如果泛型有。*

你的方法既没有`x`也没有`...`

# jquery - jquery 函数中的小计（.click 问题？）

> ID：13695096
> 
> 赞同：0
> 
> 时间：2012-12-04T02:15:15.770
> 
> 标签：jquery

当我使用带有单选按钮的 .hasVal 类时，此函数仅对我最后一次单击的值进行小计。有任何想法吗？

更新：这是 jsfiddle 链接：http: [//jsfiddle.net/SUKsM/4/](http://jsfiddle.net/SUKsM/4/)

本质上，我的 HTML 表单有一个带有值的字段集：

```
<fieldset id="breadOptions" class="hidden">
    <legend>Select one</legend>
    <input type="radio" name="breadType" id="breadWhite" class="hasVal" value=".5,260" /> White (260 calories)<br />
    <input type="radio" name="breadType" id="breadWheat" class="hasVal" value=".5,360" /> Wheat (360 calories)<br />
</fieldset>​ 
```

这是脚本：

```
$(function () {
    var basePrice = 3;
    var totalCal = 0;
    var taxRate = .07;
    $('#total').text(basePrice.toFixed(2));
    $('#sub').text(basePrice.toFixed(2));
    $('#cal').text(totalCal);
    $('#tax').text((taxRate * 100).toFixed(2));

    $('.hasVal').click(function () {
        var price = 0;
        var totalCal = 0;
        var tar = event.currentTarget;
        var optArr = tar.value.split(','); //cost,calorie

        price += parseFloat(optArr[0]);
        totalCal += parseInt(optArr[1]);

        $(':checked').each(function () {
            totalPrice = (price + basePrice);
        });

        $('#sub').text(totalPrice.toFixed(2));
        $('#cal').text(totalCal);

        totalTax = totalPrice + (totalPrice * taxRate);
        $('#total').text(totalTax.toFixed(2));
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:52:29.460

您可以对价格和卡路里使用 HTML5 数据属性，如下所示：

```
<input type="radio" ... data-cost=".5" data-cal="260" value="white" /> White (260 calories)
<input type="radio" ... data-cost=".5" data-cal="360" value="wheat" /> Wheat (360 calories) 
```

当您将总价格和卡路里相加时，像这样迭代所有选定的单选按钮，而不仅仅是当前的单选按钮：

```
$('input:radio:checked').each(function() {
    var input = $(this);
    price += parseFloat(input.attr('data-cost'), 10);
    cal += parseInt(input.attr('data-cal'), 10);
}); 
```

这是一个工作示例：http: [//jsfiddle.net/ncCgu/](http://jsfiddle.net/ncCgu/)

如果您不能使用 HTML5 数据属性，以下是一个示例：http: [//jsfiddle.net/z55rd/](http://jsfiddle.net/z55rd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:04:36.173

如果我对您的理解正确，您的投诉是当您单击单选按钮时，您只会显示一个反映您最近单击的值的小计。这是正确的吗？如果您发布`HTML code`您正在使用的其余部分会有所帮助（我假设三明治的成分不仅仅是面包）。

现在，我已将您的代码放入 jsFiddle 中：http: [//jsfiddle.net/devlshone/SUKsM/](http://jsfiddle.net/devlshone/SUKsM/)并进行了一些更改。

一旦您解释了更多内容并提供了更多内容`HTML code`，我将很乐意为您提供进一步的帮助。

# json - FOSRestBundle 在 JSON 中没有键值

> ID：13695097
> 
> 赞同：0
> 
> 时间：2012-12-04T02:15:41.370
> 
> 标签：json, symfony, key-value-coding, fosrestbundle

我已经用我的小型 Symfony2 网站设置了 FOSRestBundle。我创建了一些小的 GET 方法，当我访问 api url 时，我得到了我的 JSON 数据。完美的。但是我正在尝试构建一个 iphone 应用程序，并且我使用 RestKit 来映射/解析 json/... 我遇到的问题是**它必须是 Key-value coding (KVC) JSON data**。

我在我的 ApiController 中使用这个基本代码从我的 Sports 数据库表中检索所有数据：

```
public function getSportsAction() {
    $sports = $this->getDoctrine()
            ->getRepository('MatchTrackerAppBundle:Sports')
            ->findAll();

    $view = View::create()
            ->setStatusCode(200)
            ->setData($sports);

    return $this->get('fos_rest.view_handler')->handle($view);
} 
```

目前**我得到这个输出**：

```
[
    {
        "id": 1,
        "name": "Voetbal"
    },
    {
        "id": 2,
        "name": "Tennis"
    }
] 
```

它没有钥匙！我怎样才能在它前面添加一个键。**我想要的是**：

```
{
    "sports": [
    {
            "id": 1,
            "name": "Voetbal"
        },
        {
            "id": 2,
            "name": "Tennis"
        }
    ]
} 
```

FOSRestBundle 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:45:28.777

在黑暗中拍摄，因为我从未使用过这个捆绑包......但这会起作用吗？

```
$view = View::create()
        ->setStatusCode(200)
        ->setData(  array("sports" => $sports)  ); 
```

# c# - 按名称选择一个类字段，就好像它是一个字典？

> ID：13695098
> 
> 赞同：3
> 
> 时间：2012-12-04T02:15:58.930
> 
> 标签：c#

我有一个函数可以通过选定的字段过滤特定类的对象。我目前这样做的方式是将一个字符串命名为该字段作为函数的参数。理想情况下，我希望能够使用此字符串来选择对象中的字段，类似于字典（例如，此功能存在于 javascript 中）。

所以我在这里有这个功能（减少到相关位）：

```
private List<HangingArtBundle> ConstrainBundlesBy(List<HangingArtBundle> bundles, string valueString, string constraint)
{
    List<HangingArtBundle> retBundles = new List<HangingArtBundle>();
    List<string> values = new List<string>(valueString.Split(new char[] { '|' }));

    foreach (HangingArtBundle bundle in bundles)
    {
        if (values.Contains(ConstrainedField(constraint, bundle)))
        {
            retBundles.Add(bundle);
        }
    }

    return retBundles;
} 
```

我希望能够将`ConstrainedField(constraint, bundle)`部分替换为类的字段名称在`bundle[constraint]`哪里。相反，我必须使用下面的这个函数，这需要我根据需要手动添加字段名称：`constraint``HangingArtBundle`

```
private string ConstrainedField(string field, HangingArtBundle bundle)
{
    if (field.Equals("Category"))
    {
        return bundle.Category;
    }
    else if (field.Equals("AUToolTab"))
    {
        return bundle.AUToolTab;
    }
    else
    {
        return "";
    }
} 
```

如果它有帮助，这里是类（基本上只是一个结构）：

```
public class HangingArtBundle
{
    public string CP { get; set; }
    public string Title { get; set; }
    public string Category { get; set; }
    public string AUToolTab { get; set; }
    public List<HangingArtEntry> Art { get; set; }
} 
```

这可以在 C# 中以一种优雅的方式完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T02:25:39.160

你可以用`System.Reflection`这个

```
 private string GetField(HangingArtBundle hab, string property)
 {
    return (string)hab.GetType().GetProperty(property).GetValue(hab, null);
 } 
```

![在此处输入图像描述](../Images/407b1a59a3dfe2ad2fca93cee9de1290.png)

或者也许是一种让生活更轻松的扩展方法：

```
 public static class Extensions
    {
        public static string GetField(this HangingArtBundle hab, string property)
        {
            if (hab.GetType().GetProperties().Any(p => p.Name.Equals(property)))
            {
                return (string)hab.GetType().GetProperty(property).GetValue(hab, null);
            }
            return string.Empty;
        }
    } 
```

用法：

```
 string result = bundle.GetField("CP"); 
```

# excel - 为什么在计算行百分比时此代码会显示“无法获取数据透视字段属性”

> ID：13695110
> 
> 赞同：3
> 
> 时间：2012-12-04T02:17:33.540
> 
> 标签：excel, vba

```
Sub pivottable()

Dim s As Worksheet
Dim pc As PivotCache
Dim Pt As pivottable
Dim data As Range

    Sheets("PivotTable").Delete

    Set s = Worksheets.Add(after:=Sheets("Grocery Input"))
    s.Name = "PivotTable"
    Set data = Groceries.Range("a1").CurrentRegion
    data.Name = "Food"
    Set s = Sheets("PivotTable")
    Set pc = ThisWorkbook.PivotCaches.Create(xlDatabase, "Food", xlPivotTableVersion12)
    Set Pt = pc.CreatePivotTable("'PivotTable'!r1c1", "PivotTable25", xlPivotTableVersion12)

    s.Select
    Cells(1, 1).Select

Pt.AddDataField s.PivotTables( _
        "PivotTable1").PivotFields("Total Price:"), "Sum of Total Price:", xlSum

    With Pt.PivotFields("Category:")
        .Orientation = xlColumnField
        .Position = 1
    End With
    With Pt.PivotFields("Date:")
        .Orientation = xlRowField
        .Position = 1
    End With
    With Pt.PivotFields("Sum of Total Price:")
        .Calculation = xlPercentOfRow
        .NumberFormat = "0.00%"
    End With

Pt.AddDataField s.PivotTables("PivotTable1").PivotFields("Total Price:"), "Sum of Total Price:2", xlSum

End Sub 
```

# php - CodIgniter：为什么我在发送 ajax 请求时得到 html 响应而不是 json 响应

> ID：13695112
> 
> 赞同：0
> 
> 时间：2012-12-04T02:17:46.803
> 
> 标签：php, ajax, json, codeigniter

我向服务器发送和 ajax 请求，我想接收 json 响应，但我收到 html 响应，这段代码有什么问题？

```
//jquery code

$('select[name=category]').click(function(){
    $.ajax({
    url: "/index.php/category/get_categories",
    type: "post",  
    dataType: "json",
    cache: false,      
    success: function (result) { 
        var arr = jquery.parseJSON(result);
        alert(arr);
        }      
    });
});

//php code

public function get_categories(){
    $data = $this->category_model->get_cats_names_ids();
    echo json_encode($data);
} 
```

响应是一个 html 页面而不是 json 对象，并且不会出现警告框。当我删除 dataType:"json" 时，会出现警告框并包含 html 页面！ **以及“var arr = jquery.parseJSON(result);”之后的任何代码 不起作用，例如。警报（“嗨”）；！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T02:22:25.160

我不知道这是否会完全解决您的问题（可能涉及显示挂钩或其他生成 html 的视图机制），但从这里开始。

规则 1：永远不要从控制器中回显任何内容。调用视图或使用`output::set_output`.

规则 2：始终正确设置您的内容类型。

```
public function get_categories(){
    $data = $this->category_model->get_cats_names_ids();
    $this->output->set_header('Content-type:application/json');
    $this->output->set_output(json_encode($data));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:01:54.467

您的模型中似乎有一些错误，您得到的 HTML 响应是 CI 错误消息。

只是为了调试，在没有 json_encode 的情况下回显 $data，然后通过 URL 直接调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:18:02.137

尝试关注

```
$('select[name=category]').click(function()
{
 $.post( '<?php echo site_url('category/get_categories'); ?>', { 'var': 1 },
       function(response) {
       if(response.success)
    {
         var arr = response.message;
                     alert(arr);
    }       
      },"json");

});

 public function get_categories()
 {
    $data = $this->category_model->get_cats_names_ids();
    echo json_encode(array('success'=>true,'message'=>$data));
    //for testing replace above line with
    // echo json_encode(array('success'=>true,'message'=>'Hello!'));
 } 
```

# c++ - 包含数组的结构数组。不会编译

> ID：13695116
> 
> 赞同：0
> 
> 时间：2012-12-04T02:18:35.710
> 
> 标签：c++, arrays, struct, structure

我在用 C++ 制作结构数组时遇到了麻烦。由于某种原因，这不会编译。错误指向 Fem 结构，但将其归咎于缺少 ';' 并且缺少函数的标题。这个想法是获得一个结构数组，其中每个结构都有一个数组和一个字符串。对此的任何帮助将不胜感激。

```
/* Global headers and namespace */
#include <iostream>
#include <iomanip>
#include <string>
#include <fstream>
#include <cstdlib>
#include <cctype>
using namespace std;

/* ================================================================ */

/* Global named constants */
const int NUM_ANSWERS = 10;
const int NUM_STRUCTS = 15;

/* ================================================================ */

/* Global type definitions */

// Two struct types, Male and Female
struct Male
{

  int maleAnswers [NUM_ANSWERS];
  string name;

};

struct Fem
{

  int femAnswers [NUM_ANSWERS];
  string name;

};

// Arrays of structs
typedef Fem FemList [NUM_STRUCTS];
typedef Male MaleList [NUM_STRUCTS];

/* ================================================================ */

/* global function prototypes */
void OutputHeader ();
void ReadFile (FemList, MaleList);

/* ================================================================ */

int main ()
{

  FemList fList; // Array of Fem structs
  MaleList mList; // Array of Male structs

  void OutputHeader ();
  void ReadFile (fList, mList);

}

void OutputHeader ()
{

  cout << "==================================================================" << endl;
  cout << "Welcome to the Cheap & Ineffective Dating Service of Tallahassee!" << endl << endl;
  cout << "                       eDisHarmony.com" << endl;
  cout << "==================================================================" << endl << endl;
  cout << "<><><> Initial Client Data as Input <><><>" << endl << endl;
  cout << setw(11) << "Sex" << setw(31) << "Answers" << "Name" << endl;
  cout << setw(11) << "---" << setw(24) << "-------------------" << "--------------------" << endl;

}

void ReadFile (fList, mList)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:09:30.893

去掉 main 函数中的“void”，并为函数定义使用类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:21:59.300

```
void ReadFile (fList, mList); 
```

应该

```
void ReadFile (FemList fList, MaleList mList); 
```

和

```
int main ()
{    
  FemList fList; // Array of Fem structs
  MaleList mList; // Array of Male structs

  void OutputHeader ();
  void ReadFile (fList, mList);    
} 
```

应该

```
int main ()
{    
  FemList fList; // Array of Fem structs
  MaleList mList; // Array of Male structs

  OutputHeader ();
  ReadFile (fList, mList);    
} 
```

下面的代码应该可以工作。请注意，我对其进行了一些增强，不确定这是您想要的吗？1\. 为 std 中的标识符提供完整的命名空间 2\. 通过引用 ReadFile 传递参数。您想将文件读入 FemList 和 MaleList，这是您的意图吗？

```
/* Global named constants */
const int NUM_ANSWERS = 10;
const int NUM_STRUCTS = 15;

/* Global type definitions */

// Two struct types, Male and Female
struct Male
{
  int maleAnswers [NUM_ANSWERS];
  std::string name;
};

struct Fem
{
  int femAnswers [NUM_ANSWERS];
  std::string name;
};

// Arrays of structs
typedef Fem FemList [NUM_STRUCTS];
typedef Male MaleList [NUM_STRUCTS];

/* global function prototypes */
void OutputHeader ();
void ReadFile(FemList&, MaleList&);

int main ()
{

  FemList fList; // Array of Fem structs
  MaleList mList; // Array of Male structs

  OutputHeader();
  ReadFile(fList, mList);

}

void OutputHeader ()
{
  std::cout << "==================================================================" << std::endl;
  std::cout << "Welcome to the Cheap & Ineffective Dating Service of Tallahassee!" << std::endl;
  std::cout << "                       eDisHarmony.com" << std::endl;
  std::cout << "==================================================================" << std::endl;
  std::cout << "<><><> Initial Client Data as Input <><><>" << std::endl;
  std::cout << std::setw(11) << "Sex" << std::setw(31) << "Answers" << "Name" << std::endl;
  std::cout << std::setw(11) << "---" << std::setw(24) << "-------------------" << "--------------------" << std::endl;
}

void ReadFile (FemList &fList, MaleList &mList)
{
} 
```

# kinect - kinect xbox 视觉工作室，System.AccesViolationException

> ID：13695117
> 
> 赞同：0
> 
> 时间：2012-12-04T02:18:54.293
> 
> 标签：kinect, kinect-sdk

我刚开始尝试开发 kinect 应用程序。问题是当我尝试从 Kinect SDK 1.0 运行项目示例时，它会显示一个消息对话框。这是消息。

```
An unhandled exception of type 'System.AccessViolationException' occurred in Microsoft.Kinect.dll

Additional information: Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

它发生在 `sensor.Start();` 代码中。

我该如何克服这个问题？

注意：我正在为 Xbox 使用 kinect。

--EDIT-- 更新 SDK 解决问题。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:51:14.203

如果您安装了最新的 SDK，则可能是问题所在。最新版本是 1.6，很多东西都发生了变化。

如果您没有安装最新版本，则应该安装。

[http://www.microsoft.com/en-us/kinectforwindows/](http://www.microsoft.com/en-us/kinectforwindows/)

**不要学习如何使用过时的 SDK 为 Kinect 开发！** 它已经发生了很大的变化，而你试图这样做是对自己的极大伤害。

Microsoft 发布了多个带有 SDK 的示例，这些示例向您展示了入门的光环，等等。使用这些来帮助您学习，而不是为不再受支持的 SDK 编写的东西。

# psi - 如何确保我的 PSI 代码在某个事件之后执行..例如，创建一个新项目

> ID：13695120
> 
> 赞同：0
> 
> 时间：2012-12-04T02:19:15.760
> 
> 标签：psi

我对 PSI 很陌生，我想自动化用户创建项目后发生的任务..基本上，在他点击后，项目-->新建-->（然后为他的项目选择一个模板）

我们如何创建事件处理程序并触发此操作.. 非常感谢！^^ 任何类型的提示/帮助将不胜感激

朱莉娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:34:01.373

使用服务器事件处理程序将在这方面为您提供帮助。您可以使用“ProjectCreated”或“ProjectCreating”事件处理程序。检查以下链接：

[http://msdn.microsoft.com/en-us/library/office/gg615466(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/gg615466(v=office.14).aspx)

# string - 有没有办法判断 GUICtrlCreateInput 中是否有文本？

> ID：13695126
> 
> 赞同：0
> 
> 时间：2012-12-04T02:19:53.403
> 
> 标签：string, user-interface, input, autoit

我正在AUTOIT 中编写一个有很多GUICtrlCreateInputs 的GUI。有没有办法判断用户是否在“GUICtrlCreateInput”中输入了文本

我尝试了 StringCompare 和 StringLen 函数，但它们没有帮助。

我与“”进行“字符串比较”

在我没有在输入中输入任何内容的情况下，StringLen 返回 9，有时返回 10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:32:33.260

```
If StringStripWS(GUICtrlRead($inputCtrl), 8)  "" Then
       ; do something
EndIf
```

# php - 国际化应用的最佳和快速解决方案？

> ID：13695129
> 
> 赞同：0
> 
> 时间：2012-12-04T02:20:21.067
> 
> 标签：php, gettext

我刚刚完成我的脚本，现在我想将此代码翻译成另一种语言，如英语。现在我正在寻找实现这一目标的最佳和最快的方法。许多人谈论 php_gettext 但在 php.net 中，一些人说：

> GNU gettext 库在每个进程上工作，而不是在每个线程的基础上。这意味着在多用户设置（例如 Apache Web 服务器）中，它只能与 prefork MPM（即每个用户一个进程）一起使用。Worker 和其他线程 MPM 将不起作用。
> 
> 另外，很多用户通过设置LANG等系统环境变量来控制GNU gettext。由于明显的竞争条件，这对于 Web 服务器环境来说不是一个好的解决方案。

对于数组，我认为加载这么大的数组并在一页中仅使用 7 或 8 行是浪费资源。但我知道数组速度很快，但数组不够灵活。

您认为是最好的解决方案，如果您引用扩展或学习该解决方案，将不胜感激。

2-这对我来说是一个问题，facebook 使用什么翻译？facebook 使用 zend 框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:13:25.767

还有[php-gettext](https://launchpad.net/php-gettext/)，它有时是比 PHP 中的原生实现更好的选择。

# java - 如何使用多个 wsdl 文件生成一个 services.xml

> ID：13695131
> 
> 赞同：2
> 
> 时间：2012-12-04T02:20:33.110
> 
> 标签：java, soap, wsdl, axis2

我是Axis的新手。目前，一切都适用于一个 wsdl。我们使用axis来创建services.xml。

现在我在不同的命名空间下创建一个新的 wsdl 文件。如何使用这两个 wsdl 文件生成单个 services.xml 文件？

我想要实现的是两个 SOAP 服务都绑定到一个端口。

顺便说一句，我正在使用 ant 来构建项目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:11:08.687

我们使用如下蚂蚁`concat`规则：

```
 <concat destfile="/some/final/services.xml" fixlastline="yes">
        <file file="/first/services.xml" />
        <file file="/second/services.xml" />
        <filterchain><tokenfilter>
            <filetokenizer />
            <replaceregex
                 pattern="&lt;/serviceGroup&gt;.+?&lt;serviceGroup&gt;"
                 flags="gs" />
            <replaceregex
                pattern="first.default.service.class"
                replace="first.actual.service.class" />
            <replaceregex
                pattern="second.default.service.class"
                replace="second.actual.service.class" />
        </tokenfilter></filterchain>
    </concat> 
```

这将源文件（两个`<file...>`元素）连接到目标文件（`destfile`属性）中。该`<filterchain>`部分允许您在连接期间更改文本。这里的第一个从连接两个文件的点中`replaceregex`删除标签。`</servicegroup><servicegroup>`其他`replaceregex`条目可用于更改服务实现类的名称、添加服务生命周期类条目或进行其他更改。

在我们的一些项目中，原始`services.xml`文件存储在 zipfile 或 jarfile 中，而不是直接存储在文件系统中。为此，您将使用`<zipentry...>`元素而不是`<file...>`元素：

```
<zipentry zipfile="/some/jarfile.jar" name="resources/services.xml"/> 
```

# php - 无法获取 Radio 元素的值

> ID：13695132
> 
> 赞同：1
> 
> 时间：2012-12-04T02:21:00.397
> 
> 标签：php, javascript, html, forms, radio-button

我在页面上有一个按钮，当用户按下它时，它会在页面上创建另一个“无线电元素”。但问题是，在提交表单后，我很难用 PHP 检索值。

这是我的 HTML 代码：

```
<input type="radio" checked="checked" id="rad-3" title="member-section" name="use_name[0]" value="Test!" /> 
```

这是我的PHP代码：

```
if ($_POST['use_name[0]'] == 'Test!') {
    echo 'It Worked!' ;
} else {
    echo 'Nope!' ;
} 
```

每当我提交表单时，不！总是被呼应出来。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:22:32.607

PHP 将接收`$_POST['use_name']`一个数组，其中包含`[0]`您在 HTML 中指定的键。所以你想测试：

```
if ($_POST['use_name'][0] == 'Test') {
 // ....
} 
```

调试`print_r($_POST)`以查看数组的结构。

请注意，如果您不需要在 HTML 中发送特定的数组键，您只需将输入命名为`name='use_name[]'`，PHP 会将它们作为数字索引数组接收。如果需要，您可以更具体，也可以使用字符串键：`name='use_name[first_value]'`PHP 将接收字符串键，如`$_POST['use_name']['first_value']`

但是请注意，这*不是*使用单选按钮的典型方式。由于通常只选择一个，除非您列出多个单选按钮（我们看不到您的 HTML），否则`name='use_name[0]`按钮不会被绑定为单选组。它们必须都具有相同的名称，并且不同的数组键会将它们变成不同的无线电组。这更常用于复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:22:40.980

您的 POST 变量是 php 中的一个数组，因此您可以像这样访问它：

```
$_POST['use_name'][0] 
```

# database - RDF 3x Triplestore 基于内存或磁盘

> ID：13695134
> 
> 赞同：0
> 
> 时间：2012-12-04T02:21:25.030
> 
> 标签：database, rdf, triplestore

RDF-3x 三重存储是基于内存还是基于磁盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T00:35:32.210

RobV 提到的论文是

> 诺伊曼、托马斯和格哈德·韦库姆。“<a href="http://www3.in.tum.de/teaching/ws1112/vwis/exercises/Blatt11/rdf3x.pdf" rel="nofollow">RDF-3X：用于 RDF 的 RISC 风格引擎。 ” VLDB Endowment 1.1 (2008) 会议记录：647-659。

如果您熟悉用于实现数据库的一些数据结构，那么它们使用[B+-trees](http://en.wikipedia.org/wiki/B+_tree)的事实强烈建议您使用磁盘而不是内存模型。如果您对这些结构没有太多了解，那么它可能不会那么明显。不过，论文中的几点更直接（强调）：

> 请注意，MonetDB 和 RDF-3X 都可以在不到半小时的时间内导入数据集，并且可以以秒为单位运行查询。**其他语义网方法通常假设 RDF 数据适合主内存，但这里不是这种情况。**因此，下面的所有实验都只考虑 RDF-3X、MonetDB 之上的基于列存储的方法，以及基于 PostgreSQL 的三元组存储。

他们还在运行测试之前清除文件系统缓存。这将对加载查询引擎产生一些影响，但对基于文件系统的数据库的性能影响更大：

> 为了评估 RDF-3X 的性能，我们使用了三个具有不同特征的大型数据集，并将查询运行时间与其他方法进行了比较（下文讨论）。所有实验均在配备 2 Ghz Core 2 Duo 处理器、2 GB 内存并运行 64 位 Linux 2.6.24 内核的戴尔 D620 PC 上进行。**对于冷缓存实验，我们使用 /proc/sys/vm/drop caches 内核接口来删除所有文件系统缓存，然后重新启动各种被测系统。**我们重复所有查询五次（包括删除缓存和系统重新启动）并取最佳结果以避免由操作系统活动引起的伪影。对于热缓存，我们在不丢弃缓存的情况下运行了五次查询，再次获得了最佳运行时间。

注意到 RDF-3X 的性能是由于从磁盘读取较少的结果：

> 当比较冷缓存时间和暖缓存时间时，很明显磁盘 I/O 对整体运行时间有很大影响。由于其高度压缩的索引结构，RDF-3X 只需读取较少的数据[.]

# sql - T-SQL 仅返回状态类别已从先前状态更改的行

> ID：13695135
> 
> 赞同：1
> 
> 时间：2012-12-04T02:21:40.987
> 
> 标签：sql, sql-server, tsql, select

这似乎应该很容易，但我对此束手无策。

我的表与此类似（有更多的列和多个 ID）：

```
EEID (unique)  -  FLSAStatus  -   EffDate
=============     ============    =============
4ABC1        -     A          -    10/01/2010
4ABC1       -      A         -     11/01/2010
4ABC1        -     E          -    11/30/2011
4ABC1       -      O          -    01/01/2012
4ABC1      -       O         -     01/31/2012
4ABC1       -      A          -    11/03/2012
4ABC1       -      A          -    11/13/2012 
```

我想返回的唯一记录是对 FLSA 状态的最新更改——在本例中是 2012 年 11 月 3 日的记录。

我的问题是，由于我的分组，我的查询忽略了“A”状态的第二个实例。我尝试将表格作为 A 和 B 拉入并尝试比较日期和状态，但我不断收到语法错误。

例如：

```
SELECT * from 
(
    select a.eeid, a.flsastatus, a.effdate
    from 
        history a with (nolock), 
        history b with (nolock) 
    where
        a.eeid = b.eeid 
    and a.eeid ='4FM7IK0000K0' 
)
Where 
    a.effdate >= b.beffdate 
and a.flsastatus <> b.flsastatus 
```

显然我是一个初学者 - 帮助！请！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:27:16.680

如果您正在寻找给定（EEID、FLSAStatus）的最新更改，那么您可以

```
SELECT A.* 
FROM 
    history A
    JOIN 
    (
        SELECT EEID, FLSAStatus, MAX(EffDate) 'MaxEffDate'
        FROM
            history
        GROUP BY EEID, FLSAStatus
    ) AS B
    ON 
        A.EEID = B.EEID AND 
        A.FLSAStatus = B.FLSAStatus AND 
        A.EffDate = B.MaxEffDate 
```

但是，如果您对给定 EEID 的最新更改感兴趣，而不必担心 FLSAStatus，请从上述查询中删除 FLSAStatus。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:52:25.320

```
select min(EffDate)
from history t
where not exists
(select 1 from history where t.FLSAStatus <> FLSAStatus and Effdate > t.Effdate
and t.eeid = eeid)
and t.eeid = 4FM7IK0000K0' 
```

# node.js - V8 HeapGraphNode 和 HeapGraphEdge 类型

> ID：13695140
> 
> 赞同：1
> 
> 时间：2012-12-04T02:22:20.770
> 
> 标签：node.js, memory-leaks, v8

我正在为 Node.js 开发一个内存检查工具，并一直在使用`HeapSnapshot`它来收集和遍历对象图。

一些[对象类型](http://izs.me/v8-docs/classv8_1_1HeapGraphNode.html#ab674a58103a51abc56f99edc6a1479ed)很容易理解，例如`kObject`or `kArray`。我正在寻找有关`kHidden`.

根据[V8 设计文档](https://developers.google.com/v8/design)，javascript 对象被赋予隐藏类，以加快属性访问。这些与上述`kHidden`属性有关吗？

# python - 在 django 中导入两个具有相同名称的模块？

> ID：13695143
> 
> 赞同：2
> 
> 时间：2012-12-04T02:22:33.013
> 
> 标签：python, django

在我的 django 应用程序中，我有一个名为项目的应用程序和一个名为 utils 的应用程序。我在项目中还有一个名为 utils 的模块，用于保存项目的辅助函数。

所以我的文件结构看起来像这样

```
...
projects/
    utils/
        globals.py
    views.py
utils/
    tests.py
... 
```

当我尝试从 utils（外部）导入一些东西时遇到了一个问题，而 django 认为我是从 projects.utils 导入的。所以这给了我一个错误

```
# inside projects.views.py
from utils.tests import foo 
```

由于我在projects.utils 中没有tests.py，因此导入给了我一个错误。当然，我知道这一点并试图引用外部工具。

有没有办法在 django 中清楚地引用外部 utils 和 projects.utils 或者我应该将 projects.utils 的名称更改为其他名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:39:13.320

默认情况下，`import utils`直接包含在`projects`包中的模块中的调用将首先尝试相对导入并选择`projects.utils`.

最简单的方法是通过模块顶部的以下编译指示打开绝对导入：

```
from __future__ import absolute_import 
```

这将关闭此隐式相对导入行为（这也使其与 Python 3 匹配），因此`import utils`将始终选择顶级模块。请注意，pragma 只会影响它发生的文件中的导入：如果您希望在多个模块中使用该行为，则需要在每个文件中包含 pragma。

您仍然可以在此模式下执行相对导入，但您必须明确：

```
from . import utils 
```

# ios - Graph API 仅获取国家/地区

> ID：13695144
> 
> 赞同：1
> 
> 时间：2012-12-04T02:22:35.133
> 
> 标签：ios, facebook, facebook-graph-api, oauth

我正在使用图形 API。请求用户位置时，返回一个随机的id和位置，格式为City, Province。

例如，对我来说，它返回：安大略省多伦多。

可以只请求国家吗？我知道我可以使用谷歌的一些地理编码 API 对其进行解码并找出国家，但是否可以直接从 fb 获取

这是我的请求路径：
`NSString *requestPath = @"me/ fields=first_name,last_name,location,gender,birthday,relationship_status,email";`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:35:52.847

国家本身作为一个值只能通过`signed_request`. 所有其他方法都传递用户定义的位置，也就是说，不能保证它反映了他们的**实际**位置。只是需要考虑的事情，具体取决于您计划如何使用该信息。

# ios - FlashBuilder/AIR - 调试应用程序的生产版本

> ID：13695147
> 
> 赞同：1
> 
> 时间：2012-12-04T02:23:13.310
> 
> 标签：ios, apache-flex, air, flash-builder

我有一个为 iOS 部署的应用程序，它是用 FlashBuilder 和 Air 构建的。我有一个用户报告了一个我目前无法重现的错误。他是唯一一个报告这个问题的人。他的设备 iPod Touch 具有最新的 iOS 软件 6。该问题导致应用程序崩溃并锁定 iPod Touch，以至于他必须重新启动设备。

我试图找出是否有任何选项可以帮助我调试他的问题 - 远程调试、日志记录等？

提前感谢您的任何回复。

# android - android面板无法获得焦点

> ID：13695149
> 
> 赞同：1
> 
> 时间：2012-12-04T02:23:34.030
> 
> 标签：android, focus

我有两种布局：A 和 B。

A和B都是RelativeLayout。

它们在 FrameLayout 中。B 隐藏在 A 后面。

当我点击B时，它从A中拉出，我再次点击B，它隐藏了。

**现在的问题是：B拔出来后，为什么不能点击上面的按钮和EditTexts？面板 B 无法获得焦点。**

```
Animation showAnimation = AnimationUtils.loadAnimation(LoginActivity.this, R.anim.login_show);
showAnimation.setFillAfter(true);               
doctorLoginLayout.startAnimation(showAnimation);
doctorLoginLayout.setFocusable(true);               
doctorLoginLayout.requestFocus();
doctorLoginLayout.setClickable(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:09:12.080

我已经知道原因了。我改变了方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:13:22.010

尝试设置一个动画监听器，并在动画结束时写下这些行

```
Animation showAnimation = AnimationUtils.loadAnimation(LoginActivity.this, R.anim.login_show);
showAnimation.setFillAfter(true);    
showAnimation.setAnimationListener(new Animation.AnimationListener() {
            @Override
            public void onAnimationStart(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                 doctorLoginLayout.setFocusable(true);               
                 doctorLoginLayout.requestFocus();
                 doctorLoginLayout.setClickable(true);
            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }
        });
doctorLoginLayout.startAnimation(showAnimation); 
```

但是这条线应该足以实现你想要的：

```
doctorLoginLayout.requestFocus(); 
```

# c++ - 我将如何存储类的成员函数？

> ID：13695154
> 
> 赞同：0
> 
> 时间：2012-12-04T02:24:22.527
> 
> 标签：c++, class, member

我想知道是否可以，传入类实例的指针，获取它的成员函数并将其存储在列表中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:20:23.973

长答案，这是 C++[教程页面中函数指针的教程](http://www.newty.de/fpt/fpt.html)

简短的回答，这是将函数指针存储在数组中的示例。注意未编译。

```
typedef void(*pFunc)(void); //pFunc is an alias for the function pointer type
void foo1(){};
void foo2(){}
int main(){
  pFunc funcs[2] = {&foo1, &foo2}; //hold an array of functions 
} 
```

现在成员函数的语法有点不同：

```
struct Foo{
  void foo1(){}
  void foo2(){}
}

typedef (*Foo::pFunc)(); //pFunc is an alias to member function pointer

int main(){
  pFunc funcs[2] = {&Foo::foo1, &Foo::foo2};
} 
```

你最好的选择是查看我放在这里的链接。它深入研究了语法等等。如果你使用的是新的 C++11，那么你可以使用 std::function，或者如果你有 boost，你可以使用 boost::function。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:42:40.950

简单的方法是使用一些模板魔法和继承：

```
template<class R>
class Base {
public:
   virtual R Execute() const=0;
};

template<class R, class P1, class P2>
class Derived : public Base<R> { 
public:
   void set_params(P1 p1, P2 p2) { m_p1 = p1; m_p2 = p2; }
   R Execute() const { return Map(m_p1,m_p2); }
protected:
   virtual R Map(P1, P2) const=0;
private:
  P1 m_p1;
  P2 m_p2;
};

template<class T, class R, class P1, class P2>
class MemFunc : public Derived<R,P1,P2> {
public:
   MemFunc(T *object, R (T::*fptr)(P1, P2)) : object(object), fptr(fptr) { }
   virtual R Map(P1 p1, P2 p2) const { return (object->*fptr)(p1,p2); }
private:
   T *object;
   R (T::*fptr)(P1,P2);
}; 
```

然后 main() 函数看起来像：

```
int main() {
   std::vector<Base<int>*> vec;
   Object o;
   Derived<int, float,float> *ptr = new MemFunc(&o, &Object::MyFunc);
   ptr->set_params(10.0,20.0);
   vec.push_back(ptr);
   int i = vec[0].Execute();
} 
```

一旦你想要存储一个类的所有成员函数，你需要几个向量：

```
std::vector<Base<int>*> vec_int;
std::vector<Base<float>*> vec_float;
std::vector<Base<MyObject>*> vec_myobject; 
```

# nginx - 如何测试nginx错误？

> ID：13695155
> 
> 赞同：4
> 
> 时间：2012-12-04T02:24:23.230
> 
> 标签：nginx

我正在尝试触发 nginx 错误来测试我的错误页面。这是我尝试过的：

```
server {
    // ...
    root /path/to/site
    error_page 504 502 500 = /html/error/500.html; # absolute path: /path/to/site/html/error/500.html
    return 500;
} 
```

但我不断收到默认的 nginx 错误。测试 html 是不够的，我想确保 nginx 会显示正确的错误页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T17:56:58.540

```
 server {
     root /path/to/site
     error_page 504 502 500 = /html/error/500.html;

     location /get_error {
         return 500;
     }
 } 
```

请参阅文档： http: [//nginx.org/en/docs/http/ngx_http_rewrite_module.html](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html)

# c++ - 如何在其他类中接收 signal() ISR

> ID：13695156
> 
> 赞同：0
> 
> 时间：2012-12-04T02:24:32.557
> 
> 标签：c++, linux, signals

现在我正在开发一个基于终端的应用程序，它利用了一些显示库。我的程序流程是这样的：

```
main.cpp
\ feature1.cpp
|
\feature2.cpp
|
\ feature3.cpp
|
\feature4.cpp 
```

主类处于无限循环中，允许您选择四个功能之一。一旦被选中，它将进入该功能的无限循环，一旦该功能达到其退出状态，该无限循环将终止。退出后，我的程序返回到主循环并允许再次接收输入以选择另一个特征。

我遇到的问题是我在`main.cpp`文件中设置了一个信号来检测终端窗口何时调整大小。如果它低于某个大小，我想做点什么。同样，我想为用户可能使用的每个功能做一些不同的事情。我的信号调用如下所示：

```
signal(SIGWINCH, detectResize); //detectResize(int sig) handles resize 
```

如何使信号目标成为与当前打开的功能相对应的正确功能？最初我尝试在每个调用的类中创建一个方法，`handleResize()`并且每次都会调用该`signal()`函数以将其更改为正确的类。例如：

```
if(feature1 is selected)
{
    signal(SIGWINCH, f1.handleResize);
    feature1 f1(); //start feature 1 loop
} 
```

这不起作用，因为在创建对象之前我无法弄清楚如何传入`f1.handleResize`。我对 C++ 不太熟悉。有没有更好的方法来解决这个问题？如果是 Java，我正在考虑制作一个`Resize`接口（C++ 的类）并让每个功能都实现它。然后我可以通过一些全局变量跟踪正在使用的功能，并`<feature>.handleResize()`从. 像这样的事情是可能的，还是有更优雅的 C++ 方法？`handleResize()``main.cpp`

# string - Lua 字符串替换通配符

> ID：13695158
> 
> 赞同：1
> 
> 时间：2012-12-04T02:24:42.093
> 
> 标签：string, variables, replace, lua, wildcard

我正在尝试使用 Lua 将某个通配符字符串替换为另一个字符串。这可能不清楚，这是我的例子：

如果我有一个目录字符串：

> C:\可能更改的目录名称\另一个更改名称\已知的实体文件夹\workingDir

它最终会是这样的：

> C:\根\工作目录

可以让我替换根目录和当前目录之间的字符串的东西。所以粗体目录字符串将被替换。请记住目录是可变的，这就是为什么它需要有一个通配符来替换。所以基本上我知道2个“锚”字符串，但两者之间的一切都是未知/可变的。

更新：字符串是这样存储的：“c:\\program files (x86)\\”会双反斜杠影响替换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:57:34.073

您可以使用[Lua 模式](http://www.lua.org/pil/20.2.html)..

假设“已知实体文件夹”是一个常数，您可以使用以下模式

```
local str = "C:\\ possible changed dir name \\ another change name \\ known solid folder \\ workingDir"
local toFind = "(C:\\).*(known solid folder)"
local toReplace = "C:\\ ROOT"

str = str:gsub(toFind,toReplace) 
```

`.*`toFind 变量中的 是您的通配符。它给出了 "C:\" 和 "known solid folder" 之间的所有字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:37:40.130

~~`"C:\\ROOT\\workingDir"`如果您知道前缀（“C:\”）和后缀（“\workingDir”），为什么不返回呢？~~

简单替换应该可以，但是当“已知实体文件夹”包含模板中具有特殊含义的字符时，您可能需要小心：

```
function root(path, known_folder)
  local function q(s) return s:gsub('([%(%)%.%%%+%-%*%?%[%^%$%]])','%%%1') end
  return (path:gsub("^(%w:\\).+"..q(known_folder), "%1ROOT"))
end
print(root([[C:\possible...\another change...\known solid folder\workingDir]],
      "known solid folder")) 
```

这打印`C:\ROOT\workingDir`。

# html - IE 问题：悬停时的 HTML 工具提示，需要 doctype

> ID：13695163
> 
> 赞同：1
> 
> 时间：2012-12-04T02:25:23.577
> 
> 标签：html, css, internet-explorer, tooltip, doctype

我有一些简单的 CSS/HTML 用于非常基本的工具提示：

```
 <style type="text/css">
    .tooltip {
        text-decoration: none;
        position: relative;
    }
    .tooltip span {
        margin-left: -999em;
        position: absolute;
    }
    .tooltip:hover span {
        border-radius: 5px 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; 
        box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 5px 5px rgba(0, 0, 0, 0.1); -moz-box-shadow: 5px 5px rgba(0, 0, 0, 0.1);
        position: absolute; left: 1em; top: 2em; z-index: 99;
        margin-left: 0; width: 250px;
    }
    .custom { padding: 0.4em 0.4em 0.4em 0.8em; }
    .info { background: #D5F1FF; border: 3px solid #2BB0D7; }
    </style>

<span class="tooltip">Thing which can be hovered on</a>
<span class="custom info">
Text in tooltip goes here...
</span></span> 
```

显然，这对 Firefox 和 Chrome 都适用，但是当我使用 Internet Explorer 尝试时，工具提示无法加载/工作......

但是，当我将文档类型放在顶部时，例如：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> 
```

它在 Internet Explorer 中运行良好，但我所有的其他布局似乎都坏了，我从未使用过 doctype，原因是从不需要一个。在此之前，所有三个浏览器的布局都很好。

CSS 中是否有可以更改的内容，以便工具提示可以在 Internet Explorer（没有文档类型）或类似的工具提示 CSS 方法中工作？-Pref 不是 javascript。

希望我已经充分解释了我的问题，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T02:46:32.160

好吧，您将需要在您的新布局中使用文档类型。快到2012年底了；这些天几乎需要有一个文档类型。一方面，它确保了浏览器之间的一致性：您可能已经看到，其他浏览器的 quirks 模式类似于它们的标准模式......并且与 IE 自己的 quirks 模式有很大不同。

也就是说，如果您出于某种原因必须遵守 quirks 模式，则*可以*使用 a`<a href>`代替，并且可以在 IE 中正常工作：`<span>``:hover`

```
<a href="#" class="tooltip">Thing which can be hovered on</a> 
```

# mysql - 如何使用codeigniter框架在jquery中读取csv文件

> ID：13695164
> 
> 赞同：1
> 
> 时间：2012-12-04T02:25:23.983
> 
> 标签：mysql, codeigniter, csv

假设这是我的 csv 文件

```
fileempId,lastName,firstName,middleName,street1,street2,city,state,zip,gender,birthDate,ssn,empStatus,joinDate,workStation,location,custom1,workState,salary,payFrequency,FITWStatus,FITWExemptions,DD1Routing,DD1Account,DD1Amount,DD1AmountCode,DD1Checking,DD2Routing,DD2Account,DD2Amount,DD2AmountCode,DD2Checking
1,Dela Cruz,Juano,Santos,,,,,,1,,,Part Time Internship,, asd Division, Makati,one, asd,150,Bi Weekly,Not Applicable,100,,,,,,1234,9876,100,SAVINGS,BLANK
3,Palogan,Ralph,,,,,,,1,11-Mar-11,,Full Time Contract,2-Mar-11, sdf Department, pasay,, ,,,Not Applicable,,,,,,,,,,, 5,San,Goku,,,,hidden leaf,,,1,11-Mar-11,,,,,,,,,,Not Applicable,0,,,,,,,,,, 
```

这是我的表格

```
<label>Choose File:</label><font color="#FF0000">*</font>
<input type="file" name="file" id="file" />
<input type="button" id="importButton" value="Import" name="importButton" /> 
```

如何读取csv中的数据并将其存储到mysql数据库（codeigniter）？有关如何执行此操作的任何示例代码，。

请在下面查看我的代码有什么问题，..，

我的视图页面包含 jquery 和表单，，。

```
<td><label>Choose File:</label><font color="#FF0000">*</font></td>
       <td><input type="file" name="file" id="file" /></td>
         <td><label>Import Type </label><font color="#FF0000">*</font></td>
         <td><select name="importname" id="importname" style="width:130px;">
                 <option value="" selected>--Select--</option>
                 <?php 
                       foreach($fields as $data){
                            print '<option value="'.$data->import_id.'">'.$data->name.'</option>';
                       }
                 ?>
             </select></td> 
```

```
<script type="text/javascript">
    $(function() {
        $("#importData").click(function(e) {
            var file = $('#file').val();
            var type = $('#importname').val();
            $.post("<?php print base_url().'index.php/MyController/readExcel'?>",{file: file, type: type},
                function(data)
                        {
                        if(data!='success')
                        {
                            error_message(data);    

                        }
                        else{
                            alert("Upload Succcessfull!");
                        }
            });

               });
});

</script> 
```

我的控制器

```
function readExcel(){
    $file=$this->input->post('file');
    $type=$this->input->post('type');
    $this->load->library('csvreader');
    $result =   $this->csvreader->parse_file($file);

    $data['csvData'] =  $result;
    $this->load->view('MyViews/showImportFile', $data);  

} 
```

我的图书馆

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class csvreader {

    var $fields;            /** columns names retrieved after parsing */ 
    var $separator = ';';    /** separator used to explode each line */
    var $enclosure = '"';    /** enclosure used to decorate each field */

    var $max_row_size = 4096;    /** maximum row size to be used for decoding */

    function parse_file($p_Filepath) {

        $file = fopen($p_Filepath, 'r');
        $this->fields = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure);
        $keys_values = explode(',',$this->fields[0]);

        $content    =   array();
        $keys   =   $this->escape_string($keys_values);

        $i  =   1;
        while( ($row = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure)) != false ) {            
            if( $row != null ) { // skip empty lines
               $values =   explode(',',$row[0]);
               if(count($keys) == count($values)){
                   $arr    =   array();
                   $new_values =   array();
                   $new_values =   $this->escape_string($values);
                   for($j=0;$j<count($keys);$j++){
                       if($keys[$j] != ""){
                           $arr[$keys[$j]] =   $new_values[$j];
                       }
                   }

                   $content[$i]=   $arr;
                   $i++;
               }
           }
       }
       fclose($file);
       return $content;
   }

   function escape_string($data){
       $result =   array();
       foreach($data as $row){
           $result[]   =   str_replace('"', '',$row);
       }
       return $result;
   } 
```

}

我收到一个错误

遇到 PHP 错误

严重性：警告

消息：fopen（export 1.csv）：无法打开流：没有这样的文件或目录

文件名：库/csvreader.php

有人可以帮我吗！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:01:59.737

我使用这个库将数组转换为其他数据格式，反之亦然。

[CI - 休息服务器](https://github.com/philsturgeon/codeigniter-restserver)

在那里您可以找到库/类格式 (Format.php)，您可以使用它来将 CSV 转换为数组，然后将其保存到您的数据库中。该类还支持其他格式：

*   xml——几乎任何编程语言都可以读取 XML
*   json – 适用于 JavaScript 和越来越多的 PHP 应用程序。
*   csv – 使用电子表格程序打开
*   html – 一个简单的 HTML 表格
*   php – 可以被 eval()'ed 的 PHP 代码的表示
*   serialize – 可以在 PHP 中反序列化的序列化数据

**编辑：**

该库适用于 CSV，每行带有分隔符“\n”，每列带有“，”，您可以像这样使用它：

```
$this->load->library('format');

$string_csv = "YOUR CSV";        
$result = $this->format->factory($string_csv, 'csv')->to_array();

var_dump($result); 
```

就这么简单。但是，正如我上面所说，如果您有另一个分隔符，那么您必须根据需要调整库。这里是将 CSV 转换为数组的主要函数：

```
function _from_csv($string)
{
    $data = array();

    // Splits
    $rows = explode("\n", trim($string));
    $headings = explode(',', array_shift($rows));
    foreach ($rows as $row)
    {
        // The substr removes " from start and end
        $data_fields = explode('","', trim(substr($row, 1, -1)));

        if (count($data_fields) == count($headings))
        {
            $data[] = array_combine($headings, $data_fields);
        }
    }

    return $data;
} 
```

**编辑2：**

我的示例将适用于这种标准的 CSV 格式：

```
Heading1, Heading2, Heading3
"1","John","London"
"2","Brian","Texas" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:04:44.267

根据您实际上要先将 CSV 文件上传到服务器的评论，然后检查 CSV 字段/标题是否与您的数据库表字段之一匹配以插入行，这里是我制作的示例代码：

CSV 阅读器（基于此**[库](http://blog.insicdesigns.com/2009/03/reading-csv-file-in-codeigniter/)**并进行了一些调整）：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
/**
* CSVReader Class
*
* $Id: csvreader.php 147 2007-07-09 23:12:45Z Pierre-Jean $
*
* Allows to retrieve a CSV file content as a two dimensional array.
* The first text line shall contains the column names.
*
* @author        Pierre-Jean Turpeau
* @link        http://www.codeigniter.com/wiki/CSVReader
*/
class CSVReader {

    var $fields;        /** columns names retrieved after parsing */
    var $separator = ',';    /** separator used to explode each line */

    /**
     * Parse a text containing CSV formatted data.
     *
     * @access    public
     * @param    string
     * @return    array
     */
    function parse_text($p_Text) {
        $lines = explode("\n", $p_Text);
        return $this->parse_lines($lines);
    }

    /**
     * Parse a file containing CSV formatted data.
     *
     * @access    public
     * @param    string
     * @return    array
     */
    function parse_file($p_Filepath) {
        $lines = file($p_Filepath);
        return $this->parse_lines($lines);
    }
    /**
     * Parse an array of text lines containing CSV formatted data.
     *
     * @access    public
     * @param    array
     * @return    array
     */
    function parse_lines($p_CSVLines) {    
        $content = FALSE;
        foreach( $p_CSVLines as $line_num => $line ) {                        
            if( $line != '' ) { // skip empty lines
                $line = trim($line);

                $elements = explode($this->separator, $line);

                if( !is_array($content) ) { // the first line contains fields names
                    $this->fields = $elements;
                    $content = array();
                } else {
                    $item = array();
                    foreach( $this->fields as $id => $field ) {
                        if( isset($elements[$id]) ) {
                            $item[$field] = $elements[$id];
                        }
                    }
                    $content[] = $item;
                }
            }
        }
        return $content;
    }

    /**
     * Get fields
     */
    public function get_fields(){
        return $this->fields;
    }
} 
```

在 CI 上执行上传处理程序：

```
public function do_upload()
{
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'csv';
    $config['max_size'] = '100';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload('csvfile'))
    {
        $error = array('error' => $this->upload->display_errors());
        $this->load->view('csv_upload', $error);
    }
    else
    {
        $upload_data = $this->upload->data();

        // start to read the CSV file
        $this->load->library('csvreader');
        $file_path = $upload_data['full_path'];

        $csv_data = $this->csvreader->parse_file($file_path); 
        $csv_fields = $this->csvreader->get_fields();

        // list your database table
        $tables = $this->db->list_tables();
        foreach($tables as $table)
        {
            $fields = $this->db->list_fields($table);

            if($fields == $csv_fields) // match to one of database table
            {
                // insert the record
                foreach($csv_data as $row){                        
                    $this->db->insert($table, $row);
                }
            }
        }

        $data = array(
            'upload_data' => $upload_data,
            'csv_data' => $csv_data,
        );

        $this->load->view('upload_success', $data);
    }
} 
```

**[在此处](https://dl.dropbox.com/u/78566197/ci_.zip)**下载完整示例。您可以在文件夹中找到 CSV 文件的样本`uploads`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T17:20:33.650

我已经尝试过您的 CSVReader 功能。根据我的需要，它给了我完美的结果。我也喜欢您检查 CSV 字段/标题是否与您的数据库表字段之一匹配以插入行的想法。它给出了如下的结果数组。

```
Array
(
    [0] => Array
        (
            [Years] => 1888
            [Make1] => Acura
            [Make2] => Honda
            [Make] => Honda
            [] => Honda
            [Makes] => Toyota
) 
```

我也在这个位置尝试了 CSVReader 库。 [https://github.com/bcit-ci/CodeIgniter/wiki/CSVReader](https://github.com/bcit-ci/CodeIgniter/wiki/CSVReader) 但它给出了结果数组，其值由逗号（，）内爆，如下所示。

```
Array
(
    [0] => Array
        (
            [Years,Make1,Make2,Make,,Makes,Make] => 1888,Acura,Honda,Toyota,Honda,Toyota,Honda
        )
) 
```

现在 SubRed，在您的 CSVReader 函数中，我对 CSV 文件的第一行名称进行了更改，最后带有空格。但在那之后，在 CI 控制器中，当我检查 CSV 文件中是否存在 fields/headers/column_name 时，它​​返回 false/none，因为最后字段中`array_key_exists('column_name',$csvdata)`有空格。`column_name`所以我更新了你的代码。

请参考下面更新的代码，如果有任何建议，请给我。

编辑：- 更改 CSVReader 文件中 parse_lines 函数中的 foreach 循环 =>

```
foreach( $this->fields as $id => $field ) {  
    //echo $id;
    //echo $field;
    //In CSV File, trim(remove both end whitespaces) the first line which contains fields names
    $field = trim($field);
    if( isset($elements[$id]) ) 
    {
        $item[trim($field)] = trim($elements[$id]);//In CSV File, trim all the file data
    }
 } 
```

# python - 可以使用 split() 初始化字典并附加到字典吗？

> ID：13695166
> 
> 赞同：1
> 
> 时间：2012-12-04T02:25:40.953
> 
> 标签：python

在我的项目中，我试图通过一个包含许多字符串的文件并将它们拆分。有多条线路。我希望拆分字符串的每个部分都进入一个字典，但我不确定这是否可能。现在我有：

```
while inFile:
    key, value = inFile.readline().lower().rstrip().rsplit(' ', 1) 
```

我考虑过使用 dict 和 zip，但我认为那是如果你有列表的话..

我的输入文件看起来像这样。'$' 是结束行。例如，我想将“A B”作为键，将“10”作为值。

```
A B 10 $
A C 4$
B D 29$
B E 1 $ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:28:01.947

您应该能够执行以下操作：

```
data = dict(line.lower().rstrip().rsplit(' ', 1) for line in inFile) 
```

这是可行的，因为`dict()`它可以接受可迭代的键/值对，并且只要文件中的每一行至少包含一个空格，`line.lower().rstrip().rsplit(' ', 1)`就会产生一个二元素元组。

请注意，遍历文件对象将为您提供文件中的每一行，因此`for line in inFile:`优先于`while inFile: line = inFile.readline()`.

# wpf - WPF + PRISM 如何在运行时更改区域

> ID：13695170
> 
> 赞同：6
> 
> 时间：2012-12-04T02:26:10.017
> 
> 标签：wpf, prism

我需要根据绑定的 RegionName 加载区域。有点像

```
 <ContentControl cal:RegionManager.RegionName="{Binding CustomRegionName}"
                    Grid.Column="2"/> 
```

所有区域均已正确注册。如果我更改 CustomRegionName 的值，则该区域永远不会改变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:00:56.490

此行为是因为该区域已加载到可视化树中。您能否稍微更改您的应用程序，以便您保留区域名称但将多个视图加载到该区域中。这样您就可以选择区域中哪个视图处于活动状态，并使用 IRegionViewManager 和 IRegion 接口动态更改内容控件的显示，即

```
IRegion region = regionManager.Regions["RegionName"];
object view = container.Resolve<SomeView>();
object view2 = container.Resolve<SomeView2>();

region.Add(view);
region.Add(view2); 
```

然后在你想在其他地方显示特定视图的地方注入 IRegionManager 然后调用

```
region.Activate(whichever view); 
```

# api - Google 从 Google Insights 切换到 Google Trends 后 Excel VB 宏停止工作

> ID：13695172
> 
> 赞同：3
> 
> 时间：2012-12-04T02:26:20.810
> 
> 标签：api, vba, excel

我有一个 Excel VB 宏，可以自动从 Google Insights 下载 CSV 文件，它工作正常，下载 CSV 文件的代码是：

```
OutputFile = "http://google.com/insights/search/overviewReport?q=" _
            & termsAndTickers(counter, 1) & "&cmpt=q&content=1&export=2"

```

但是，在 Google 从 Google Insights 切换到 Google Trends 之后，上面的代码就停止了工作。我已将“见解”更改为“趋势”，但这并没有帮助。

我也在谷歌趋势源代码中搜索，找不到导出链接。有可用的 API 吗？有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:04:25.043

尝试这个：

```
OutputFile = "http://www.google.com/trends/trendsReport?hl=en-US&q=" & searchTerms & "&content=1&export=1" 
```

其中 searchTerms 是空格编码的字符串，例如：pacquiao%20marquez

# vb.net - 使用 VB.NET 在 Powerpoint 中应用第二张幻灯片母版的布局

> ID：13695173
> 
> 赞同：0
> 
> 时间：2012-12-04T02:26:35.420
> 
> 标签：vb.net, layout, powerpoint

我正在创建幻灯片并将一个大（几 MB 大小）图像插入到每个现有的`pptx`. 不过，我想使用另一个演示文稿中的布局。我可以让主人从模板中导入，但是当我使用`.ApplyTemplate("desiredTemplate")`. 但是如何让新幻灯片具有导入的`.ppLayoutTitleOnly`布局而不是 powerpoint 的原始`TitleOnly`布局？

```
 Private Sub PPTGeneratorAL(ByVal imageArr As List(Of String), ByVal alReportName As String)

        Const sTemplate = "C:\temp\script\testtemplate2.potx"

        Dim oApp As PowerPoint.Application
        Dim oPres As PowerPoint.Presentation
        Dim oSlide As PowerPoint.Slide
        Dim scaleFactor As Decimal

        oApp = New PowerPoint.Application()
        oApp.Visible = True
        oApp.WindowState = PowerPoint.PpWindowState.ppWindowMinimized

        oPres = oApp.Presentations.Open(alReportName)
        oPres.Slides.Range(2).Delete()
        oPres.Slides.Range(2).Delete()
        oPres.Slides.Range(2).ApplyTemplate(sTemplate)

      For Each slideImage In imageArr

  'this next line is the one that's not doing what I want
            oSlide = oPres.Slides.Add(3, PowerPoint.PpSlideLayout.ppLayoutTitleOnly)

           'code to add the image to the slide here - this part works

            oSlide = Nothing
      Next slideImage

end sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-13T17:08:39.893

我想出了一个解决方案：

```
oPres.Slides.Range(2).Delete() 
oPres.Slides.Range(2).Delete() 
oPres.Slides.Range.ApplyTemplate(sTemplate) 
oPres.Slides(2).CustomLayout() = oPres.SlideMaster.CustomLayouts(2) 
For Each slideImage In imageArr 
    oSlide=oPres.Slides.Add(3,PowerPoint.PpSlideLayout.ppLayoutTitleOnly) 
    oPres.Slides(3).CustomLayout() = oPres.SlideMaster.CustomLayouts(2) 
    oSlide = Nothing 
Next slideImage 
```

# css - 在 Chrome 中引用页内 SVG

> ID：13695176
> 
> 赞同：0
> 
> 时间：2012-12-04T02:27:09.863
> 
> 标签：css, html, svg

对某人来说很有趣的问题。我正在尝试使用以下标记将 SVG 过滤器应用于页面中加载的图像：

```
<!DOCTYPE html>
<html>
<head>
  <title>Example</title>
  <style type="text/css">
  #exampleImage { 
    filter: url("#grayscale");
  }
  </style>
</head>
<body>
  <img id="exampleImage" src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Bitmap_VS_SVG.svg/300px-Bitmap_VS_SVG.svg.png" />
  <svg xmlns="http://www.w3.org/2000/svg">
    <filter id="grayscale">
      <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>
    </filter>
  </svg>
</body>
</html> 
```

这在 Firefox 中可以正常工作 - 图像显示为灰度 - 但在 webkit（Mac 上的 Chrome 或 Safari）中不行。从我一直在阅读的内容来看，这应该有效。你能看出我遗漏了什么吗？

谢谢！

*   本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:01:21.733

这是您以适用于所有支持 svg 过滤器的浏览器的方式制作的示例：

```
<!DOCTYPE html>
<html>
<head>
  <title>Example</title>
  <style type="text/css">
  #exampleImage { 
    filter: url("#grayscale");
  }
  </style>
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg">
    <filter id="grayscale" x="0" y="0" width="1" height="1">
      <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>
    </filter>
    <image id="exampleImage" xlink:href="http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Bitmap_VS_SVG.svg/300px-Bitmap_VS_SVG.svg.png" width="100%" height="100%"/>
  </svg>
</body>
</html> 
```

Safari 在版本 6 中开始支持过滤器，请参阅对所有浏览器[的支持表。](http://caniuse.com/#feat=svg-filters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:34:39.143

没关系，过滤器：url() 语法对 webkit 不友好，尽管我在其他地方读过。

相反，对于这种特殊情况，您需要使用 CSS 规则：

-webkit-filter：灰度（100%）；

# java - 有缺陷的 2-opt 搜索实现？

> ID：13695179
> 
> 赞同：1
> 
> 时间：2012-12-04T02:27:29.660
> 
> 标签：java, heuristics, traveling-salesman

我正在尝试为 Java 中的 TSP 设计一个 2-opt 本地搜索启发式，但我的算法似乎有缺陷。给定一个最近邻电路作为输入，它以某种方式使电路变得更糟。最近的邻居：http: [//goo.gl/uI5X6](http://goo.gl/uI5X6)；2-opt 十秒后：http: [//goo.gl/5AGJ1](http://goo.gl/5AGJ1)。我的代码如下。我的实施有什么问题？Location[] location 只是“图”的节点列表，每个节点都有纬度和经度以及它与另一个节点之间的距离计算。

```
 public HamiltonianCircuit execute(Location[] locations) {
    long startTime = System.currentTimeMillis();
    while (true) {
        for (int i = 0; i < locations.length; i++) {
            for (int k = 0; k < locations.length; k++) {
                if (System.currentTimeMillis() - startTime >= 10000) {
                    return new HamiltonianCircuit(locations);
                }
                Location a = locations[i];
                Location b = locations[(i + 1) % locations.length];
                Location c = locations[k];
                Location d = locations[(k + 1) % locations.length];
                double distanceab = a.distanceBetween(b);
                double distancecd = c.distanceBetween(d);
                double distanceac = a.distanceBetween(c);
                double distancebd = b.distanceBetween(d);
                double change = (distanceab + distancecd) - 
                    (distanceac + distancebd);
                if (change > 0) {
                    locations[k] = a;
                    locations[i] = c;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T14:52:24.827

2-opt 用边 AC 和 BD 替换边 AB 和 CD，这意味着如果我们有部分电路 0 AB xyz CD 1 开始，我们在完成后想要 0 AC zyx BD 1。
您的代码将生成 0 CB xyz AD 1。

你想交换B和C，还需要把中间的所有东西都颠倒过来。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-05T12:08:38.267

Java 中可能的解决方案可能类似于：（注意：详细）

```
public HamiltonianCircuit execute(){
ArrayList<Vehicle> locations= new ArrayList<Locations>;
//populate array

    for (int i = 1; i < locations.size()-3; i++) {
            Location a = locations.get(i);
            Location b = locations.get(i+1);
            Location c = locations.get(i+2);
            Location d = locations.get(i+3);

            double distanceab = EuclidianDistance.pair(a, b);
            double distancebd = EuclidianDistance.pair(b, d);
            double distanceac = EuclidianDistance.pair(a, c);
            double distancecd = EuclidianDistance.pair(c, d);
            double abcd = distanceab+distancecd;
            double acbd = distanceac+distancebd;

            if(acbd<abcd){
                Collections.swap(locations, i+1, i+2);
                System.out.println("swapped"+vehicles);
            }
    }
    Locations.setDistance(EuclidianDistance.Collection(locations));
    return locations;
} 
```

# android - PIN码屏幕手机差距android

> ID：13695180
> 
> 赞同：3
> 
> 时间：2012-12-04T02:27:36.673
> 
> 标签：android, security, cordova, phonegap-plugins

我已经开始编写我的 phonegap android 应用程序，我需要在我的应用程序中设置一个显示`enter your pin code`应用程序何时启动的功能。这确保没有不知道代码的人使用它。

我的问题：

*   我可以像在 IOS 中那样使用系统密码对话框吗？
*   是否可以包含任何 Phonegap 插件来运行此屏幕？
*   如何在phonegap android中制作这样的屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:48:34.887

这将完成这项工作。在 iPhone 和 Android 上运行良好。[http://www.html5tutorial.info/html5-contact.php](http://www.html5tutorial.info/html5-contact.php)

```
<input type="tel" /> 
```

# python - 将计数器传递给每个 python 日志记录方法

> ID：13695181
> 
> 赞同：2
> 
> 时间：2012-12-04T02:27:45.400
> 
> 标签：python, logging

python logging方法可以设置打印每个事件的时间。但是，如果我使用自己的时间变量运行模拟，可以在记录器中使用它吗？

日志格式化程序似乎没有这个选项。我可以重载每个记录器功能吗？

我想要类似的东西：

```
counter = 5
logging.debug("First Event")
counter += 2
logging.warn("Second Event") 
```

生产

```
DEBUG: 5: First Event
WARNING: 7: Second Event 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T02:33:39.093

您可以使用[`logging.Filter`](http://docs.python.org/2/howto/logging-cookbook.html#using-filters-to-impart-contextual-information)：

```
import logging

class ContextFilter(logging.Filter):
    def filter(self, record):
        record.count = counter
        return True

logging.basicConfig(
    level = logging.DEBUG,
    format = '%(levelname)-8s: %(count)s: %(message)s')
logger = logging.getLogger(__name__)
logger.addFilter(ContextFilter())

counter = 5
logger.debug('First Event')
counter += 2
logger.warning('Second Event') 
```

产量

```
DEBUG   : 5: First Event
WARNING : 7: Second Event 
```

# proxy-server - 代理到代理通信

> ID：13695188
> 
> 赞同：1
> 
> 时间：2012-12-04T02:28:56.983
> 
> 标签：proxy-server, charles-proxy

我们正在使用 Charles Proxy 将请求从一个系统重定向到另一个系统。例如，如果我需要从 to 发送请求`A`，`D`我会通过`B`设置 Charles Proxy 的位置发送它。

现在可以将所有到达 Charles Proxy 的请求转发`B`到另一个 Charles Proxy，该 Charles Proxy 设置在`C`.

`A`（只知道`B`）---> `B`（Charles 代理，需要自动转发到`C`）----> `C`（Charles 代理）-----> `D`（最终目的地）

您能否让我知道我们如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:37:02.130

在 Charles 中，有一个名为[Port Forwarding](http://www.charlesproxy.com/documentation/proxying/port-forwarding/)的功能可以帮助您创建这样的架构

到达`Proxy -> Port Forwarding`并设置第一个实例以通过第二个实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:35:24.013

Charles 中有一个叫做 External proxy setup 的东西可以做到这一点。我们只需要向 Charles 提供外部代理的信息，它会负责转发请求。

# c++ - “未解决的重载函数类型”错误并将运算符作为函数参数传递

> ID：13695189
> 
> 赞同：0
> 
> 时间：2012-12-04T02:29:36.500
> 
> 标签：c++, compiler-errors

我想制作一种可以执行特定任务的方法，并从内部进行简单的计算，例如加法、减法或乘法。如果我错了，请纠正我，似乎我无法直接传递此类操作的运算符，我需要定义一个中间方法（就像我的示例中的一个称为 operator_add ）。我尝试使用以下代码完成我的任务：

```
struct A {
  typedef int T;
  /* (...) */
  struct element {
    /* (...) */
    inline T value() const { /* something simple */ };
    element& comp_assign( const T r, T (*operation)(const T, const T) ) { // line # 40
      T res = operation( value(), r );
      return modif_aux( res );
    } /* (...) */
    inline T operator_add( const T a, const T b ) { return a + b; }
    inline element& operator+=( const T r ) { return comp_assign( r, operator_add ); } // line # 64
  };
}; 
```

但我收到以下错误：

```
A.h:64: error: no matching function for call to ‘A::element::comp_assign(const int&, <unresolved overloaded function type>)’
A.h:40: note: candidates are: A::element& A::element::comp_assign(int, int (*)(int, int)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:35:52.893

`operator_add`是一个成员函数，因此您不能使用普通函数指针来引用它。将其设为静态函数或自由函数可以解决此问题，尽管我建议使用模板，因为它可以使用任何可调用对象：

```
template<typename Operation>
element& comp_assign( const T r, Operation operation) { // line # 40
  T res = operation( value(), r );
  return modif_aux( res );
}

inline element& operator+=( const T r ) { return comp_assign( r, std::plus<T>() ); } 
```

# android - 滚动后如何保持android复选框状态

> ID：13695193
> 
> 赞同：1
> 
> 时间：2012-12-04T02:29:44.430
> 
> 标签：android, scroll, android-cursoradapter, recycle

我已经为此搜索了多个问题，但仍然没有找到实现我正在寻找的方法的方法。我有一个简单的自定义 cursorAdapter，它的形式是

|文本视图复选框|

滚动复选框时，回收时会丢失状态。我曾尝试使用 arrayList 来存储布尔值，但是在检查它们时，它似乎永远不会恢复为真。

```
public class BrowseCardsAdapter extends CursorAdapter {

private LayoutInflater mInflater = null;
private Context mContext;
public DataBaseHelper myDbHelper = null;

public BrowseCardsAdapter(Context context, Cursor cursor) {
super(context, cursor, true);
mInflater = LayoutInflater.from(context);
mContext = context;

myDbHelper = new DataBaseHelper(mContext);

try {
    myDbHelper.openDataBaseForUpdate();
} catch (SQLException sqle) {
    throw sqle;
}
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {

return mInflater.inflate(R.layout.list_cards, parent, false);

}

@Override
public void bindView(final View view, final Context context, final Cursor cursor) {

final CheckBox cb_have     = (CheckBox) view.findViewById(R.id.cb_have);
TextView cardNumber        = (TextView) view.findViewById(R.id.tv_cardnumber);

final String cardNumberText  = cursor.getString(cursor.getColumnIndex("CardNumber"));       
final String have = cursor.getString(cursor.getColumnIndex("Have"));

cardNumber.setText(cardNumberText);

if (have.compareTo("true") == 0)
    cb_have.setChecked(true);
else
    cb_have.setChecked(false);

cb_have.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

    if (cb_have.isChecked()) {
        myDbHelper.addHaveToDatabase(cardNumberText, true);
        cb_have.setChecked(true);   
    }
    else {
        myDbHelper.addHaveToDatabase(cardNumberText, false);
        cb_have.setChecked(false);
    }
    myDbHelper.close();
 }); 
```

}

我将拥有状态存储在数据库中，然后我想检查拥有状态以设置复选框。这样，当用户进入活动时，他们将看到他们之前选择的项目，以及任何新的选择。除了在屏幕外滚动视图会丢失新选择的项目的状态之外，这非常有效。有人可以给我一些关于如何保存状态的指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:33:20.297

尝试回到使用集合。像这样以增量方式写入数据库是不明智的。

这里：

```
 public class BrowseCardsAdapter extends CursorAdapter {

        private LayoutInflater mInflater = null;
        private boolean[] arrCb;

        public BrowseCardsAdapter(Context context, Cursor cursor) {
            super(context, cursor, true);
            mInflater = LayoutInflater.from(context);

            arrCb = new boolean[cursor.getCount()];
            for (int i = 0; i < arrCb.length; i++) {
                arrCb[i] = false;
            }
            // ^otherwise you can loop through the database (in your activity)
            // to fill this array with the correct values and pass it as a parameter
            // it'd look like initCb() below;
        }

/*      private boolean[] initCb() {
            Cursor cursor = myDbHelper.query(query statement);
            boolean[] arr = new boolean[cursor.getCount()];
            int i = 0;  
            while (cursor.moveToNext()) {
                arr[i] = cursor.getString(cursor.getColumnIndex("Have"));
                // ^obviously you'd need to convert your value to boolean however
                i++;
            }
            return arr;
        }*/

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {

            return mInflater.inflate(R.layout.list_cards, parent, false);

        }

        @Override
        public void bindView(final View view, final Context context, final Cursor cursor) {

            final CheckBox cb_have     = (CheckBox) view.findViewById(R.id.cb_have);
            TextView cardNumber        = (TextView) view.findViewById(R.id.tv_cardnumber);

            final String cardNumberText  = cursor.getString(cursor.getColumnIndex("CardNumber"));       
//          final String have = cursor.getString(cursor.getColumnIndex("Have"));

            cardNumber.setText(cardNumberText);

            cb_have.setChecked(arrCb[cursor.getPosition()]);    
            cb_have.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    if (cb_have.isChecked()) {
                        arrCb[cursor.getPosition()] = true;
                    } else {
                        arrCb[cursor.getPosition()] = false;                        
                    }
                }
            });

        }
    } 
```

提供了两种填充集合的方法。至于您的技术，因为您不断地写入数据库，所以您无法使用制作适配器的旧游标来获取您的值。您必须在每行加载时重新实例化游标。当然，这些要求会让你放弃它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T17:09:04.663

将 OnCheckChangeListener 设置为 null 的一种简单方法。

您必须在适配器中添加此代码。

```
yourcheckboxid.setOnCheckChangeListener(null) 
```

# java - Array/ArrayList OutOfBoundsException

> ID：13695194
> 
> 赞同：-1
> 
> 时间：2012-12-04T02:29:46.293
> 
> 标签：java

```
public static void getVegetableFromUser()
{
 String[] veg = SandwichDB.getVegetable();
    HashMap<String, String> getMapVegPrice = SandwichDB.getMapVegPrice();
    int vegSave = Validator.getInt(Scanner, "Select Vegetables [1, 8]: ", 1, 8);
    String v = veg[vegSave-1];
    sandwich.setVegetables(v);
} 
```

好的，所以控制台打印出来

> === 选择三明治蔬菜 ===
> 1 个红洋葱 $0.10
> 2 个橄榄 $0.10
> 3 个泡菜 $0.10
> 4 个生菜 $0.20
> 5 个青椒 $0.25
> 6 个西红柿 $0.30
> 7 个奶酪 $0.49
> 8 退出蔬菜部分
> 选择蔬菜 [1, 8]：

这个想法是能够选择多种蔬菜，直到我选择了 8 种蔬菜，即退出蔬菜部分。我该怎么做呢？使用 else-if 语句？

此外，蔬菜应该是一个数组，而不是一个字符串......就像这一行：`String v = veg[vegSave-1]`.

这是我 SandwichDB.app 上的代码：

```
public static String[] getVegetableInfo()
{
    ArrayList<String> vegsList = new ArrayList<>();

    try (BufferedReader in =
            new BufferedReader(
            new FileReader("vegetable.txt")))
    {
        String line = in.readLine();
        while (line != null)
        {
            String[] elems = line.split("~");
            vegsList.add(elems[0] + " $" + elems[1]);
            line = in.readLine();
        }
        vegsList.add("Quit Vegetable Section");
    }
    catch(IOException e)
    {
        System.out.println(e);
        return null;
    }
    String[] vegetableInfo = vegsList.toArray(new String[]{});
    return vegetableInfo;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:51:57.180

查看其余代码会有所帮助，但根据您发布的内容，我认为您正在获取 arrayOutOfBoundsException ，因为您正在尝试获取有关不存在的蔬菜的信息。在执行此行之前尝试添加“if”以检查是否选择了 8：

```
String v = veg[vegSave-1]; 
```

也许尝试：

```
if(vegSave == 8){
    //TODO: Add code that quits vegetable section
} else {
    String v = veg[vegSave-1];
} 
```

这样，如果选择了 8，程序就不会尝试将 String v 设置为蔬菜。

希望这会有所帮助，我不太确定你到底想要什么。（例如，“蔬菜也应该是一个数组，而不是像这一行 String v = veg[vegSave-1] 这样的字符串。”是一个问题还是一个陈述？）

# mysql - 添加外键约束

> ID：13695204
> 
> 赞同：1
> 
> 时间：2012-12-04T02:31:43.983
> 
> 标签：mysql

找不到任何真正帮助我的问题，所以这是另一个问题。

我正在尝试在表（部门）上设置外键约束并将其链接到表（员工）上的主键，该列在员工上称为（dno），在部门上称为（dnumber）。两个字段都是相同的类型，但我不断得到

```
mysql> alter table department
    -> add foreign key (dnumber)
    -> references employee (dno);
ERROR 1005 (HY000): Can't create table 'dba110.#sql-938_3' (errno: 150) 
```

有什么建议么？

更新：所以我想看看我的 dno 和 dnumber 列是有符号的还是无符号的。

```
mysql> show create table employee;
+----------+-------------------------------------------
-------------------------------------------------------
-------------------------------------------------------
| Table    | Create Table

+----------+-------------------------------------------
-------------------------------------------------------
-------------------------------------------------------
| employee | CREATE TABLE `employee` (
  `Fname` varchar(8) DEFAULT NULL,
  `Minit` varchar(2) DEFAULT NULL,
  `Lname` varchar(8) DEFAULT NULL,
  `SSN` varchar(9) NOT NULL,
  `Bdate` date DEFAULT NULL,
  `Address` varchar(27) DEFAULT NULL,
  `Sex` varchar(1) DEFAULT NULL,
  `Salary` float NOT NULL,
  `Superssn` varchar(9) DEFAULT NULL,
  `Dno` int(1) NOT NULL,
  PRIMARY KEY (`SSN`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+----------+-------------------------------------------
-------------------------------------------------------
-------------------------------------------------------
1 row in set (0.00 sec)

mysql> show create table department;
+------------+-----------------------------------------
-------------------------------------+
| Table      | Create Table
                                     |
+------------+-----------------------------------------
-------------------------------------+
| department | CREATE TABLE `department` (
  `dnumber` int(1) NOT NULL,
  `dname` varchar(15) DEFAULT NULL,
  `mgrssn` varchar(9) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+------------+-----------------------------------------
-------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:05:19.997

是不是正确的表结构应该是，

具有外键 deptID 的员工。

例如

```
alter table employee add foreign key (dnumber) references department (dno); 
```

如果您有能力更改设计，我建议您保留 dept 父级，并将其 id 拉到员工中以确保参考完整性。:-)

**根据OP的评论进行编辑**

PS：在手机上，所以代码片段不会有代码标签。并希望我能给你一个 SQLFIDDLE 中的示例。

脚步：

```
create table department
(dno int not null primary key, 
 dname varchar(15), 
 mgrno int UNSIGNED null)

Insert into department    
(dno, dname, mgrno)    
Values    
(),
(),
()
;

Create table employee
(eid int not null primary key, 
 ename varchar(25), 
 mid int not null, 
did int not null,
foreign key (did) references 
 department (dno))

Insert into employee
(eid, ename, mid, did)
Values
(),
(),
(),
(),
()
; 
```

请尝试上述结构。所以你的主键设置好了，外键设置好了。我只为这两个表添加了大多数主要字段。您可以添加其他列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:34:29.187

可能，其中一个字段是未签名的，另一个是签名的。

[您可以通过SHOW CREATE TABLE](http://dev.mysql.com/doc/refman/5.0/en/show-create-table.html)检查您的列 。

更多信息在这里：[MySQL 错误号 1005 无法创建表 '.\mydb#sql-328_45.frm' (errno: 150)](http://verysimple.com/2006/10/22/mysql-error-number-1005-cant-create-table-mydbsql-328_45frm-errno-150/)

# python - 在 python 中扩展模块功能

> ID：13695206
> 
> 赞同：1
> 
> 时间：2012-12-04T02:32:04.327
> 
> 标签：python, oop, module, composition

我有一系列模块，每个模块都包含一个我想通过组合混合到一个类中的行为。由于这些模块中的每一个都有一些通用和冗余代码，我试图提取一个基本模块，然后我可以将其导入每个模块，在删除样板文件的同时填写自定义代码。我的代码的简化版本如下：

主要.py：

```
import concrete as steak_sauce

class Customer():

    def __init__(self):
        self.allergies = ["onions"]
        self.dish = []

    def register_ingredient (steak_sauce):
        self.dish.append(ingredient)

customer = Customer()

customer.eat_if_not_allergic(steak_sauce) 
```

基础.py：

```
# Base module

menu_item_name = "default"
menu_item_ingredients = []

def is_allergic(customer):
    if menu_item_name in customer.allergies:
        return True
    else:
        add_to_dish(menu_item_name)

def eat_if_not_allergic(customer):
    if not is_allergic(customer):
        eat_it(ingredient) 
```

具体的.py：

```
from base import *

menu_item_name = "steak sauce"
menu_item_ingredients = ["MSG", "Blood"]

def eat_it(customer):
    print "custom logic acting on customer goes here" 
```

当我运行 main.py 时，我得到一个异常：

```
Traceback (most recent call last):
  File "main.py", line 14, in <module>
    customer.add_if_not_allergic(steak_sauce)
  File "main.py", line 10, in add_if_not_allergic
    if not ingredient.is_allergic(customer):
  File "/home/chazu/tests/base.py", line 10, in is_allergic
    add_to_dish(menu_item_name)
NameError: global name 'eat_it' is not defined 
```

我的问题是：有没有一种方法可以扩展模块的功能，或者反过来将多个模块中的通用功能提取到一个基本模块中，而无需大量额外的代码行？什么是pythonic方式？

提前感谢=）

# javascript - 从 onclick 事件中选择 select 语句中的选项

> ID：13695208
> 
> 赞同：1
> 
> 时间：2012-12-04T02:32:14.313
> 
> 标签：javascript, select

我想在选择菜单中选择一个选项，基于从 onclick 调用的 javascript 函数。

看，用户可以选择 Bob 得到多少睫毛，但是如果用户点击按钮，它会从下拉列表中选择“1”。

基本上，我想根据 java 脚本事件设置下拉菜单的默认选项的值。这是我举了一个例子的jsfiddle。我已经尝试了 w3schools.com 存储库中的几乎所有事件，但我几乎放弃了。

```
 How Many lashes would Bob like? 
  <select id="lashes" name="lashes">
  <option value="five">5</option>
  <option value="four">4</option>
  <option value="three">3</option>
  <option value="two">2</option>
  <option value="one">1</option>
  <option value="zero">0</option>
  </select>

  <input type="button" value="Bob actually wants only 1 lashing" onclick="doit()">

​  function doit() {
    document.getElementByID('lashes') = 'one';
  }​ 
```

[http://jsfiddle.net/pietbarber/H8Ctx/](http://jsfiddle.net/pietbarber/H8Ctx/)

此外，如果我可以摆脱它，我不想使用任何 javascript 库，所以没有 jsquery 或其他任何东西。

TL; DR - 我想单击该按钮并在单击该按钮时从下拉菜单中选择“1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:38:02.540

最简单的方法是使用元素的`selectedIndex`属性。`select`

```
function doit() {
  //notice I changed .getElementByID to .getElementById
  document.getElementById('lashes').selectedIndex = 4;
}​ 
```

[**你可以在这里测试它**。](http://jsfiddle.net/H8Ctx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:37:35.070

它应该是

```
 function doit() {
      document.getElementById('lashes').value = 'one';
  }​ 
```

# filemerge - 与 Git difftool 一起使用时的 FileMerge 错误消息

> ID：13695210
> 
> 赞同：16
> 
> 时间：2012-12-04T02:32:27.877
> 
> 标签：filemerge

我使用 FileMerge 作为`difftool`Git 的工具。最近，我开始收到一条奇怪的错误消息：

```
Unable to load platform at path /Applications/Xcode.app/Contents/
   Developer/Platforms/iPhoneOS.platform 
```

FileMerge 仍然可以很好地执行差异（尽管加载需要更长的时间）。知道是什么原因造成的，以及如何解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:06:23.413

在使用 FileMerge 作为 svnX 的差异工具时，我遇到了完全相同的问题。以下命令解决了我的问题：

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/ 
```

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-12T00:15:51.327

为了扩展 user3761183 的答案，经过一番[谷歌搜索](http://hints.macworld.com/article.php?story=20050430105126392)后，我跑了：

```
sudo plutil -convert xml1 /Applications/Xcode.app/Contents/Developer/Platforms/*.platform/Info.plist 
```

这摆脱了所有的`Unable to load platform at path /Applications/Xcode.app/Contents/Developer/Platforms/AppleTVOS.platform`错误。我仍然收到以下错误：

> 无法加载“/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/Library/Xcode/Specifications/Core Build System.xcspec”。原因：错误域=NSCocoaErrorDomain 代码=3840“第 1 行出现意外字符 b”UserInfo={NSDebugDescription=第 1 行出现意外字符 b，kCFPropertyListOldStyleParsingError=错误域=NSCocoaErrorDomain 代码=3840“意外';' 或第 1 行的键后的 '='" UserInfo={NSDebugDescription=Unexpected ';' 或 '=' 在第 1 行的键之后}}。

但我最初也得到了它们，所以如果你不是，那么上面的命令应该可以解决你的问题。

编辑：删除了对此`Install addtional required components`没有任何作用的评论。下一个猜测是按照 Jonathan F 的建议重新安装 XCode。

FWIW我已经试过`sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/`了，但也没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T22:27:56.830

这似乎也是 Mercurial 的一个问题：[Unable to load platform at path](https://stackoverflow.com/questions/12617644/unable-to-load-platform-at-path)

如果你不为 iOS 开发，你可以删除那个文件夹。如果这样做，则必须重新安装 XCode。（除非您能弄清楚如何重新安装该平台）。

我认为您最好重新安装 XCode，因为还有一些其他 SO 问题涉及与平台相关的问题（不是这个具体问题，但本质上类似），这些问题似乎都指向重新安装 XCode：

[XCODE 无法加载平台](https://stackoverflow.com/questions/4178282/xcode-fail-to-load-platform)

和

[Xcode 无法打开：“缺少 Mac OS X 平台”](https://stackoverflow.com/questions/2706642/xcode-wont-open-mac-os-x-platform-is-missing)

....所以开始重新安装并去喝啤酒！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T18:24:16.867

对我来说，将所有 *.platform/Info.plist 从二进制转换为 xml1 解决了这个问题。奇怪的 ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-06T16:25:02.113

关于jim在他的回答中突出显示的与`"Unexpected character b at line 1"`错误相关的问题，我发现错误消息指定的路径中`Core Build System.strings`的`Native Build System.strings`文件即`/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/Library/Xcode/Specifications/`是某种二进制格式。解析器没有预料到这一点，并抱怨打开文件`character b`的单词。也许像在 OP 询问的“平台问题”中那样`bplist`玩会有所帮助。`plutil`我只是用 Xcode 6 dmg 中的版本替换了这两个文件，它们是 ASCII 格式，问题就消失了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-25T14:13:07.947

我为我使用 XCode`$ git mergetool`并且遇到了类似的错误。对我来说，它与 XCode 的组件/模拟器和文档有关。

转到 XCode -> Preferences -> Downloads 并确保您拥有最新的组件和文档。

*我在这里只是因为我更新到 XCode 7 并且由于 Apple Watch 文档以及我的雇主让我们的开发许可证过期而遇到类似的错误......*

# java - 类的数组列表

> ID：13695216
> 
> 赞同：0
> 
> 时间：2012-12-04T02:33:26.417
> 
> 标签：java, class, arraylist

好的，我需要一些语法问题的帮助。我有一个类，我希望它把它放到一个数组列表中，并使用 for 循环填充数组列表。这是我想要的一个例子：

```
 public class w{
    int x;
    int y;
    }
    Arraylist m = new Arraylist();
    for(int i=0; i<n;i++)
  {
          m[i].add(w.x);
          m[i].add(w.y);

  } 
```

是的，代码没有运行它只是我想要它做的一个例子。我不知道语法，我想要一个带有类的数组列表，这些类可以通过给出 i 来检索，并且只能通过那个 'i' 来获取这两个变量；任何帮助将不胜感激。非常感谢您抽出宝贵的时间，很抱歉描述得很糟糕，但我不能更具体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:46:30.077

目前尚不清楚您要完成什么，但也许这足以指导如何`ArrayList`正确使用。我将您的类名从 更改`w`为`W`以匹配通常的 Java 编码约定。

```
public class W {
    int x;
    int y;
    public W(int x, int y) {
        this.x = x;
        this.y = y;
    }
}

ArrayList<W> m = new ArrayList<W>(); // can be 'new ArrayList<>()` in Java 7
m.add(new W(1, 2));
m.add(new W(5,-3));
// etc.

for (int i=0; i<m.size(); i++) {
    W w = m.get(i);
    System.out.println("m[" + i + "]=(" + w.x + "," + w.y + ")");
}

for (W w : m) {
    System.out.println("next W: (" + w.x + "," + w.y + ")");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:38:26.047

您不能使用方括号表示法在 Java 中按索引访问集合。是否以及如何实现取决于特定的集合 API。在 的情况下`List`，有第二个版本的 add 方法，它将索引作为参数。

```
List<Integer> m = new ArrayList<>();
    for(int i=0; i<n;i++)
  {
          m.add(i, w.x);
          m.add(i, w.y);

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T02:41:56.070

An`ArrayList`不是传统意义上的数组；它是一个**对象**。您将不得不尊重如何访问 type 的元素`List`，这[可以通过 Java 7 API 找到。](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

也就是说，您可以使用以下两个选项将值放入其中。

`.add(E element)`它将具有相同泛型类型的对象作为参数，并且

`.addAll(Collection<? extends E> collection)`，它将另一个集合类型作为参数。如果您[`Arrays.asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)尝试将原始数组放入`List`.

最后的一些事情：

*   编写接口而不是具体类型更可取。这样，您不必在意是否需要开始使用 a`LinkedList`而不是`ArrayList`.
*   您应该键入您的列表，否则 Java 会*警告*您未检查的操作。如果您对放入`List`.
*   此外，您将无法在`List`不使用的情况下从 中检索特定字段/函数`instanceof`，因为存储在其中的所有内容都会是`Object`，这是不可取的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T02:46:54.043

你可以这样用..

```
public class w{
    int x;
    int y;
    }
  w ref1=new w();
  w ref2=new w();
    Arraylist<w> m = new Arraylist<w>();  
    m.add(ref1);
    m.add(ref2); 
```

或者你可以做

```
for(some condition)
{
    m.add(new w());
} 
```

# objective-c - 播放 MPMediaItem 视频会自行关闭

> ID：13695218
> 
> 赞同：2
> 
> 时间：2012-12-04T02:34:02.520
> 
> 标签：objective-c, ios, mpmovieplayercontroller, mpmediaitem

我正在尝试编写一个应用程序，该应用程序允许用户从应用程序本身播放其 iTunes 库中的视频（它将是较大应用程序的一小部分）。

我目前正在搜索并使用来自 iTunes 的电视节目数据填充表格。这工作正常。

但是，当我点击单元格并尝试播放与其关联的视频时，媒体播放器会打开，然后立即自行关闭。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"touch!");

    MPMediaItem *v = [videos objectAtIndex:indexPath.row];
    NSURL *url = [v valueForProperty:MPMediaItemPropertyAssetURL];

    MPMoviePlayerViewController *p = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
    [self presentViewController:p animated:YES completion:nil];
} 
```

当我不只过滤电视节目时，它似乎工作正常。

有任何想法吗？

# wordpress - Heroku 推送被拒绝，没有检测到支持 Cedar 的应用程序 wordpress

> ID：13695219
> 
> 赞同：1
> 
> 时间：2012-12-04T02:34:10.687
> 
> 标签：wordpress, heroku

我一直在尝试使用教程 @ [http://decielo.com/articles/350/wordpress-on-heroku-up-and-running将 wordpress 部署到 heroku 应用程序](http://decielo.com/articles/350/wordpress-on-heroku-up-and-running)

一切正常，花花公子，直到...

```
18:25:53-~/code/abc_wordpress$ git push production master
Counting objects: 1080, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (1058/1058), done.
Writing objects: 100% (1080/1080), 4.48 MiB | 174 KiB/s, done.
Total 1080 (delta 66), reused 0 (delta 0)

-----> Heroku receiving push
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:abc_wordpress.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:abc_wordpress.git' 
```

另外，供参考

```
18:25:50-~/code/abc_wordpress$ git remote -v
production  git@heroku.com:abc_wordpress.git (fetch)
production  git@heroku.com:abc_wordpress.git (push) 
```

这也是...

```
18:21:48-~/code/abc_wordpress$ heroku config
=== abc_wordpress Config Vars
CLEARDB_DATABASE_URL: mysql://...
DATABASE_URL:         mysql://... 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T03:49:06.367

我猜你错过了将应用程序移出`wordpress/`和移入 git 存储库根目录的步骤。换句话说，`git ls-files`应该显示`index.php`，而不是`wordpress/index.php`。

[PHP buildpack](https://github.com/heroku/heroku-buildpack-php/blob/master/bin/detect)需要在`index.php`根目录中才能将您的 repo 检测为 PHP 应用程序。

# bash - 使用 getopts grep 文件并将其导出到文件：为什么提到另一个参数？

> ID：13695221
> 
> 赞同：0
> 
> 时间：2012-12-04T02:34:30.923
> 
> 标签：bash, unix, getopts

我使用 getopts 获取 MAC 地址并通过日志文件 grep 该 MAC 地址。它看起来像这样：

```
#!/bin/bash

while getopts ":m:hx:" opt; do
  case $opt in
    m)
        cat /var/log/vmlog/Verimatrix.log | grep $OPTARG | grep VCAS080455
        cat /var/log/vmlog/Verimatrix.log | grep $OPTARG | grep VCAS080285
        cat /var/log/vmlog/Verimatrix.log | grep $OPTARG | grep VCAS080290
      ;;
    h)
        echo "./search_mac.sh -m <mac address> will filter the logs by mac address"
        echo "./search_mac.sh -h will print this message"
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done 
```

我想在使用该选项时将结果导出到文件`-x`：

```
./search_mac.sh -m 00067B6D87F0 -x /home/nico/extract.txt 
```

在这一点上，我不明白如何从 -x 获取论点以进入我的案例的 m) 部分。

一点帮助会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T02:39:57.687

我认为最好的方法是将选项参数的值保存在 shell 变量中，然后在最后运行您的命令：

```
#!/bin/bash

m_arg=
x_arg=

while getopts ":m:hx:" opt; do
  case $opt in
    m) m_arg="$OPTARG" ;;
    x) x_arg="$OPTARG" ;;
    h)
        echo "./search_mac.sh -m <mac address> will filter the logs by mac address"
        echo "./search_mac.sh -h will print this message"
        exit 0
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
  esac
done

if [[ "$x_arg" ]] ; then
    exec > "$x_arg"          # redirect STDOUT to argument of -x
fi

< /var/log/vmlog/Verimatrix.log grep -- "$m_arg" | grep VCAS080455
< /var/log/vmlog/Verimatrix.log grep -- "$m_arg" | grep VCAS080285
< /var/log/vmlog/Verimatrix.log grep -- "$m_arg" | grep VCAS080290 
```

那说。. . 这个选项对我来说似乎没什么用，因为`-x /home/nico/extract.txt`它的含义与`> /home/nico/extract.txt`. 我错过了什么吗？

# objective-c - 使用尚未呈现的实时数据更新视图，ios

> ID：13695223
> 
> 赞同：2
> 
> 时间：2012-12-04T02:34:51.357
> 
> 标签：objective-c, ios, xcode

我不清楚如何处理以下情况……</p>

假设您正在视图控制器 A 中生成一些数据，例如实时进行音频录制。而且您有一个视图控制器 B，当您按下按钮时，它将由 A 呈现。viewcontroller B 所做的是在图表中显示音频数据。无论何时呈现或在其视图加载到屏幕之前，Viewcontroller B 都会随着音频录制的进行而不断更新。

我的要求是，每当用户按下按钮显示数据图表时，图表必须包含历史数据并保持更新。用户还可以在录制期间在两个视图控制器之间来回切换以停止录制（在 A 中）或检查数据图（在 B 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:45:23.867

也许您应该尝试在第一个 (A) 视图控制器上设置一个属性并将其传递给您的第二个 (B) 视图控制器。

FirstViewController.h：

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController

@property (nonatomic, strong) NSData *data;

@end 
```

FirstViewController.m:

```
#import "FirstViewController.h"

@interface FirstViewController()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (IBAction)generateAudioData
{
    self.data = // Your audio data generating code goes here perhaps?
}

- (void)didReceiveMemoryWarning
{
   [super didReceiveMemoryWarning];
}

@end 
```

SecondViewController.h：

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController

@end 
```

SecondViewController.m：

```
#import "FirstViewController.h"
#import "SecondViewController.h"

@interface SecondViewController()

@property (nonatomic, strong) NSData *graphData;

@end

@implementation SecondViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    FirstViewController *audioData = (FirstViewController *)[[UIApplication sharedApplication] delegate];
    self.graphData = audioData.data;
    // Create your graph UIView here and populate it with self.graphData
}

- (void)didReceiveMemoryWarning
{
   [super didReceiveMemoryWarning];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:40:00.563

最好不要将数据存储在视图控制器中。创建存储您需要显示的信息的“模型”层（对象或对象组）。当视图控制器的视图出现或需要刷新时，从模型中获取数据。这样你就不必对控制器的状态做任何复杂的事情；它负责在正确的时间获得所需的东西。

# c# - 具有动态高度的列表框项目（“自动”不起作用）

> ID：13695227
> 
> 赞同：1
> 
> 时间：2012-12-04T02:35:23.913
> 
> 标签：c#, wpf, windows-phone-7

我有一个列表框，我从一些收藏中填写。每个集合项目都有一些信息：静态名称和图片，以及动态内容（文本、照片或照片等）。我想为每个集合项目更改列表框的项目高度。高度取决于内容，如果它只有文本 - 列表框的项目必须具有静态（名称的文本块，图片的图像）和带有文本的文本块，并且文本块的高度必须根据文本改变（如果它是 2-3 个字符串，高度将为最小，如果文本适合 15-20 个字符串 - 文本块的高度必须根据字符串改变），如果集合项包括文本和图像 - 它必须具有静态（名称的文本块，图片的图像），文本的文本块和图像为图像。列表框项目的高度必须取决于文本块大小和图像大小。

此时，我有一个静态项目高度的列表框，并且想要使高度动态。

这是我的列表框项目之一，它有一个 ptoto

```
<local:NewsTemplateSelector.Photo>
    <DataTemplate>
        <Border BorderBrush="Red" BorderThickness="2"  Width="400" Height="auto" Margin="10">
            <StackPanel Orientation="Horizontal" Width="400" Height="auto">
                <Image Source="{Binding SourceImage}" Height="75" Width="75" Margin="0,-225,0,0" />
                <Canvas Width="400">
                    <TextBlock Text="{Binding SourceName}" Foreground="Black" FontSize="25" TextWrapping="Wrap" Height="55" Width="326" d:LayoutOverrides="VerticalAlignment, Height" />
                    <Image  Source="{Binding Photo[0].Big}" Height="auto" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="326" Canvas.Top="69"/>
                </Canvas>
            </StackPanel>
        </Border>
    </DataTemplate>
</local:NewsTemplateSelector.Photo> 
```

这是带有文本的模板

```
<local:NewsTemplateSelector.Texts>
    <DataTemplate>
        <StackPanel Orientation="Horizontal" Background="YellowGreen" Width="400" Height="300" >
            <Image Source="{Binding SourceImage}" Height="75" Width="75" Margin="0,-225,0,0" />
            <Canvas Width="400">
                <TextBlock Text="{Binding SourceName}" FontSize="25" Foreground="Black" TextWrapping="Wrap" Width="326" Height="65" d:LayoutOverrides="VerticalAlignment, Height"  />
                <TextBlock Text="{Binding Texts}"  Foreground="Black" FontSize="25" TextWrapping="Wrap" Height="229" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="326" Canvas.Top="69" />
            </Canvas>

        </StackPanel>
    </DataTemplate>
</local:NewsTemplateSelector.Texts> 
```

我尝试使用自动 - 但项目的高度为 0。如果我在列表框的项目下使用字段颜色为“红色”的边框 - 我会看到每个项目的红色线，而不是项目的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:52:02.577

请参阅本教程，了解如何使用模板选择器。[http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)

# google-api - Facebook SDK + Google SDK：被访问的框架将“document.domain”设置为“facebook.com”

> ID：13695228
> 
> 赞同：5
> 
> 时间：2012-12-04T02:35:29.790
> 
> 标签：google-api, facebook-javascript-sdk, google-plus

我在我的页面上合并了 google javascript 客户端库。我还安装了 Facebook javascript SDK。当我启动 google 身份验证时，它可以很好地进行身份验证，但是当它回调时，我在 chrome 中得到了相同的来源错误。似乎它正在尝试回调 Facebook 帮助框架，而不是 Google 帮助框架。

```
gapi.auth.authorize({client_id: GlobalSettings.google_client_id, scope: scopes, immediate: false, authuser:-1}, this._validateGoogle); 
```

> 不安全的 JavaScript 尝试使用 URL [http://static.ak.facebook.com/connect/xd_arbiter.php?version=17#channel=f141ef255c&origin=http%3A%2F%2Fpicolocal.com&channel_path=%2Fassets%2Fchannel.html访问框架%3Ffb_xd_fragment%23xd_sig%3Df356553d18%26](http://static.ak.facebook.com/connect/xd_arbiter.php?version=17#channel=f141ef255c&origin=http%3A%2F%2Fpicolocal.com&channel_path=%2Fassets%2Fchannel.html%3Ffb_xd_fragment%23xd_sig%3Df356553d18%26) from frame with URL [https://accounts.google.com/o/oauth2/auth?zt=ChR3VkFzQjdTLVM1M214bmQybTlURRIfc2pVUmM4YXkwc0lVdUpKVm5MNDlDYzlxUVliSGRnSQ%E2%88%99APsBz4gAAAAAUL1kGm5n1rNtBr7JzWO79BsCrWR3JQ0F&from_login=0&hl=en&as=fc48d65d9e4aad8&pli=1&authuser=0](https://accounts.google.com/o/oauth2/auth?zt=ChR3VkFzQjdTLVM1M214bmQybTlURRIfc2pVUmM4YXkwc0lVdUpKVm5MNDlDYzlxUVliSGRnSQ%E2%88%99APsBz4gAAAAAUL1kGm5n1rNtBr7JzWO79BsCrWR3JQ0F&from_login=0&hl=en&as=fc48d65d9e4aad8&pli=1&authuser=0) . 请求访问的帧具有“https”协议，被访问的帧具有“http”协议。协议必须匹配。
> 
> 不安全的 JavaScript 尝试使用 URL [http://static.ak.facebook.com/connect/xd_arbiter.php?version=17#channel=f2a52e49dc&origin=http%3A%2F%2Fpicolocal.com&channel_path=%2Fassets%2Fchannel.html访问框架%3Ffb_xd_fragment%23xd_sig%3Df2ce0c29cc%26](http://static.ak.facebook.com/connect/xd_arbiter.php?version=17#channel=f2a52e49dc&origin=http%3A%2F%2Fpicolocal.com&channel_path=%2Fassets%2Fchannel.html%3Ffb_xd_fragment%23xd_sig%3Df2ce0c29cc%26) from frame with URL [https://accounts.google.com/o/oauth2/auth?zt=ChRHWUYwOTVFck5wQUZGM1dfMFI2chIfUWhFRmJaWFlJdzBadUpKVm5MNDlDYzlnc1dISGRnSQ%E2%88%99APsBz4gAAAAAUL1fbOLmx90l39zNA-9tUFG8ghM-l8qG&from_login=0&hl=en&as=78294d299ef41f66&pli=1&authuser= 1](https://accounts.google.com/o/oauth2/auth?zt=ChRHWUYwOTVFck5wQUZGM1dfMFI2chIfUWhFRmJaWFlJdzBadUpKVm5MNDlDYzlnc1dISGRnSQ%E2%88%99APsBz4gAAAAAUL1fbOLmx90l39zNA-9tUFG8ghM-l8qG&from_login=0&hl=en&as=78294d299ef41f66&pli=1&authuser=1) . 请求访问的帧具有“https”协议，被访问的帧具有“http”协议。协议必须匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T22:00:51.283

实际上，在[https://developers.google.com/+/best-practices/facebook](https://developers.google.com/+/best-practices/facebook)上有一个关于如何合并 Facebook SDK 和 Google+ 登录的非常详细的指南。您应该使用[gapi.auth.signIn()](https://developers.google.com/+/web/signin/reference#javascript_api)而不是`gapi.auth.authorize()`.

# python - 视图的 URL 中的 Django 调用函数

> ID：13695229
> 
> 赞同：0
> 
> 时间：2012-12-04T02:35:46.990
> 
> 标签：python, django

我对在 URL 中使用视图的这两种不同语法感到困惑。对于通用视图，我们使用这个

```
views.myview.as_view() 
```

但是如果我需要使用我自己的自定义函数进行查看，那么我需要使用

```
views.myview().myfunction 
```

为什么两者有区别

为什么不`views.myview.myfunction`工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:43:30.930

视图可以写成类或函数。如果您不担心重用代码，那么函数可能更容易。查看[用于编写视图的文档](https://docs.djangoproject.com/en/1.4/topics/http/views/)。然后可以快速查看[基于类的视图的文档](https://docs.djangoproject.com/en/1.4/topics/class-based-views/)。最后检查[URL dispatcher](https://docs.djangoproject.com/en/1.4/topics/http/urls/)的文档。

视图函数是这样写的——

```
def my_view(request, *args, **kwargs):
    ...
    return HttpResponse() 
```

通过将函数传递给 urlpatterns 来调用视图函数，如下所示 -

```
from django.conf.urls import patterns
from views import my_view

urlpatterns = patterns('',
    (r'^my_page/$', my_view)
) 
```

基于类的视图允许您通过继承重用功能。

```
from django.views.generic import DetailView

class MySpecialDetailView(DetailView):
    ...
    # add functionality here 
```

问题是 url 设置需要一个函数，而不是一个类。这就是`as_view()`函数的用武之地。基于类的视图在 url conf 中被调用为 -

```
from django.conf.urls import patterns
from views import MySpecialDetailView

urlpatterns = patterns('',
    (r'^my_special_page/$', MySpecialDetailView.as_view())
) 
```

抱歉，如果我误解了您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:13:00.833

类方法创建一个视图函数，该`as_view()`函数将创建`View`该类的一个新实例，然后将控制权传递给它的`dispatch`方法。因此，您将拥有用于服务每个请求的不同视图实例。

在第二个示例中，您只创建了一个视图实例，并使用绑定方法作为视图函数。这意味着同一个实例用于服务每个请求（这也意味着它可以被两个请求同时使用。这种共享状态对于不阅读您的 urlconf 的人来说并不明显，因此可能会导致错误。

如果您只需要调度到不同的方法，请考虑覆盖`dispatch`. 如果您需要不同位置的视图的不同行为，您可以将关键字参数传递给`as_view`它将作为实例属性使用。`dispatch`

如果您需要在不同请求之间共享某些状态，请考虑在视图类的共享实例上使用比属性更明确的东西。

# c++ - 无法从类函数访问类变量

> ID：13695232
> 
> 赞同：2
> 
> 时间：2012-12-04T02:35:52.180
> 
> 标签：c++, class, non-static

我创建了一个头文件 Persona.h，在 Persona.cc 中我正在初始化类的所有变量和函数，为什么我不能从 Persona.cc 访问变量？

人物角色.h

```
#ifndef STD_LIB_H
#include <iostream>
#endif
#ifndef STD_LIB_H
#include <string>
#endif

class Persona
{
    private:
        std::string Nome;

    public:
        Nasci(std::string);
}; 
```

人物角色.cc

```
#ifndef Persona_h
#include "Persona.h"
#endif

#ifndef STD_LIB_H
#include <string>
#endif

void Persona::Nasci(std::string nome)
{
    // Nome della persona

    Nome = nome;
}; 
```

它给了我一个错误：

```
invalid use of non-static data member 'Persona::Nome' 
```

我不知道该怎么做，你能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:38:04.570

我假设`Nasci`是 的方法`Persona`，因此您的方法定义应如下所示：

```
void Persona::Nasci(std::string nome)
{
    // Nome della persona
    Nome = nome;

    //...rest of the function
} 
```

否则，如果`Nasci`不是`Persona`类类型的方法或友元函数，即使您尝试使用命名空间范围解析，也无法访问`Persona`函数体内类的私有数据成员。

通常，当您看到像您所做的那样在另一个独立函数体内的数据对象或函数上使用命名空间范围解析的代码时，该数据成员或函数是`static`特定类的非私有方法或数据成员，因此对其他非类函数可见。当然，C++ 中的范围解析运算符还有许多其他用途，但只是说在您的情况下，它需要`Nome`成为非私有`static`数据成员以避免编译器错误。当然，`Nome`以这种方式使用不适合您的使用场景，所以您真正想要的是上面您指定`Nasci`为`Persona`.

# iis - 日志中的“时间”字段究竟表示什么？

> ID：13695234
> 
> 赞同：30
> 
> 时间：2012-12-04T02:35:59.547
> 
> 标签：iis, logging, iis-7.5, w3c

我一直在有一些性能问题的服务器上研究 IIS 7.5 中的 W3C 格式日志文件一段时间，在我看来，与[MSDN 文档](http://technet.microsoft.com/en-us/library/cc754702%28WS.10%29.aspx)相反，“时间”字段***不是***

> “请求发生的时间，以协调世界时 (UTC) 表示”

...而是响应完成发送的时间。

我这样说是因为当我在一个受控环境中跟踪用户的页面请求序列时，他们必须及时返回以提交下一个请求，否则他们能够以惊人的速度提交对页面的请求具有大量耗时条目的页面。

例如（为了安全和清晰起见，我正在编辑、缩写和省略）：

```
#Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip sc-status sc-substatus sc-win32-status time-taken
2012-11-28 22:25:17 192.168.0.21 GET /Main.aspx - 80 AWalker 192.168.0.100 200 0 0 764
2012-11-28 22:25:26 192.168.0.21 POST /Main.aspx - 80 AWalker 192.168.0.100 200 0 0 109
2012-11-28 22:25:56 192.168.0.21 GET /_Start.aspx - 80 AWalker 192.168.0.100 302 0 0 28782
2012-11-28 22:26:33 192.168.0.21 GET /Action.aspx - 80 AWalker 192.168.0.100 200 0 0 38032
2012-11-28 22:26:46 192.168.0.21 POST /Action.aspx - 80 AWalker 192.168.0.100 200 0 0 124
2012-11-28 22:27:39 192.168.0.21 GET /Information.aspx - 80 AWalker 192.168.0.100 200 0 0 52509
2012-11-28 22:27:52 192.168.0.21 POST /Information.aspx - 80 AWalker 192.168.0.100 200 0 0 140 
```

如果我将“时间”解释为“*收到的请求*”（开始或结束，但在响应开始之前），那么这看起来是错误的。这就是我的意思：

*   22:25:17 收到 /Main.aspx 的 GET 请求，发送响应需要 764ms，这意味着响应直到 14:25:17.764 才完成。
*   在 14:25:26，收到 /Main.aspx 的 POST。这是上一个响应完成后的八秒。发送此响应花了 109 毫秒，在 14:25:26.109 结束。
*   在 14:25:56，收到了 /_Start.aspx 的 GET。上一个响应完成后将近 30 秒。这似乎是合适的；在单击 _Start.aspx 的链接之前，用户可能已经研究过 Main.aspx。奇怪的是，发送这个 302 重定向响应（28782 毫秒）花了将近 29 秒，在 14:26:24.782 结束。但这就是为什么我要查看日志以找出原因。
*   在 14:26:33，收到了 /Action.aspx 的 GET。上一个响应完成后大约 8 秒。这似乎很合适（8 秒的用户响应时间）。响应耗时 38032 毫秒（太长了，因此进行了调查），并在 14:27:11.032 结束。
*   在 14:26:46，收到了 /Action.aspx 的 POST。**距离上**一个响应完成还有8.2 秒。是的，我完全知道用户不必总是等待页面完全呈现，然后再单击链接以获取下一页或按刷新，但这种情况经常发生，即使对于更短的请求也是如此。响应耗时 124 毫秒，于 14:26:46.124 结束。
*   在 14:27:39，收到了 /Information.aspx 的 GET。这是上一个响应完成后的 52.9 秒。这似乎有点长，因为测试人员被告知要尽可能地打击系统，但这并不是不合适的长。响应耗时 52509 毫秒（几乎正好是 52.9 秒！），在 14:28:31.509 结束。*如果我将时间字段解释为“收到的请求”* *，这是一个非常奇怪的巧合* ***。***
**   在 14:27:52，收到了 /Information.aspx 的 POST。那是上一个响应完成**前的 39.5 秒。***

 *这种模式在日志中一遍又一遍地继续存在。

相反，如果我将“时间”字段解释为“响应完成”，那么我会得到更理智的数字：

*   14:25:16.236左右（14:25:17之前的764ms），/Main.aspx的GET收到了，投递耗时764ms，14:25:17完成响应。
*   大约在 14:25:25.891，收到了 /Main.aspx 的 POST。上一个响应完成后大约 8.9 秒。发送此响应花了 109 毫秒，在 14:25:26 结束。
*   大约在 14:25:27.218，收到了 /_Start.aspx 的 GET。这是上一个响应完成后的 1.2 秒。这对于用户响应来说很快，但对于这些训练有素的测试人员浏览知名菜单来说并不算多。响应耗时 28,782ms（太长了，但这是性能分析的原因），并在 14:25:56 结束。
*   大约在 14:25:54.968，收到了 /Action.aspx 的 GET。这大约是前一个响应完成**前的 1.0 秒。**这可能是一个舍入错误，因为时间字段不捕获毫秒。响应耗时 38032ms，于 14:26:33 结束。
*   大约在 14:26:45.876，收到了 /Action.aspx 的 POST。上一个响应完成后大约 12.9 秒。这对于用户响应时间来说是很正常的。响应耗时 124ms，于 14:26:46 结束。
*   大约在 14:26:46.491，收到了 /Information.aspx 的 GET。这大约是上一个响应完成后的 0.5 秒。这可能是脚本启动的重定向或快速用户。响应耗时 52509ms，于 14:27:39 结束。页面慢。
*   大约在 14:27:51.860，收到了 /Information.aspx 的 POST。这大约是上次响应完成后的 12.9 秒。正常的用户响应时间（巧合的是与之前的 POST 相同）。响应耗时 140 毫秒，于 14:27:52 结束。

“时间”字段表示响应的结束而不是请求的开始对我来说更有意义的另一个原因是：

日志条目以“时间”字段的升序（按时间顺序）物理记录，但它们始终包含“时间”字段，该字段只有在最终交付响应*后才能知道。*

那么到底是哪条路呢？文档有错吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-11-07T00:33:11.403

在此页面上：http: [//blogs.msdn.com/b/mike/archive/2008/11/13/time-vs-time-taken-fields-in-iis-logging.aspx](https://web.archive.org/web/20160304052659/http://blogs.msdn.com/b/mike/archive/2008/11/13/time-vs-time-taken-fields-in-iis-logging.aspx)

它说：

> Time 字段非常简单：它指定日志条目的创建时间。请注意，这与日志条目实际写入日志时并不总是相同，因为某些请求/响应场景可能会发生缓冲。

因此，您认为时间最接近于请求完成的时间是正确的。同一页面继续澄清：

> 如果要计算请求的大致开始时间，可以从 Time 值中减去 Time-Taken 值。*

# objective-c - Objective-C：在选择器中将自身传递给方法的编译器错误

> ID：13695237
> 
> 赞同：1
> 
> 时间：2012-12-04T02:36:06.813
> 
> 标签：objective-c, ios

所以，我试图在另一个对象中调用一个方法，并将调用对象作为调用的一部分传递。可能是我构建它的方式没有意义，但无论如何这是电话：

```
NSTimer *refreshTimer = [NSTimer
                         scheduledTimerWithTimeInterval:[timerDate timeIntervalSinceNow]
                         target:otherObject
                         selector:@selector(methodBeingCalled:self)
                         userInfo:nil
                         repeats:NO]; 
```

并且接收方法具有以下签名：

```
- (void)methodBeingCalled:(id)sender; 
```

当我这样做时，我在调用时收到一个错误，上面写着“错误预期'：'”。这对我来说没有意义，因为我有一个冒号来传递“self”作为参数。

我是否错误地使用了选择器？我应该改用 NSInvocation 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:38:22.550

你不能这样设置参数。选择器只定义签名和函数有多少参数。删除`self`，因为您无法发送。如果你想通过`self`，那就去做吧`userInfo`。`NSTimer`方法中的对象就是`NSTimer`它本身。

PS[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)是您的朋友。它清楚地说明（对于选择器参数）“选择器必须对应于返回 void 并采用单个参数的方法。计时器将自身作为参数传递给该方法。”

# php - 移动网络服务认证

> ID：13695242
> 
> 赞同：1
> 
> 时间：2012-12-04T02:36:36.817
> 
> 标签：php, authentication, service, login, web

我正在用 PHP 构建一个 REST Web 服务，旨在与 iOS 和 android 等移动设备一起使用。基本上，GET 请求用于返回带有请求结果的 JSON 数据，而 POST 和 DELETE 请求用于向服务添加数据。

基本上，我需要实现一个用户登录/身份验证系统，以便当用户请求特定于他们的数据时，比如他们自己的列表，或者他们尝试添加数据，他们需要登录。

我知道我需要使用 SSL 来保护注册和身份验证，但我想避免重新发明东西。我正在寻找这样做的解决方案？任何建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T03:30:29.840

如果您正在构建一个真正的 REST Web 服务，那么您就不能有会话 - 即让用户登录一次，然后服务器会记住会话，并且用户在每次后续调用时都使用该会话。对于 REST 服务，服务器不会记住“状态”。

> 每个状态都可以通过它包含的表示和它提供的一组转换来完全理解，而转换仅限于一组统一的动作以便理解。

（来源：[http](http://tech.groups.yahoo.com/group/rest-discuss/message/5841) ://tech.groups.yahoo.com/group/rest-discuss/message/5841 ）

这实际上使您的工作更轻松，因为对服务器的每次调用都必须带有唯一标识符来验证用户身份。您的选项包括发送用户名/密码组合、密钥和其他参考来识别用户，或者可能两者都发送。因此，当用户“登录”时，您会记住他们的详细信息客户端（即在 web 表单中的 javascript 中，或通过您的应用程序并记住在 iPhone / Android 的本地存储中），然后在每次通话时发送这些详细信息。您可以使用 rest 调用来验证登录详细信息，但它不会返回会话。

所以用伪代码回答：

1.  HTML：用户登录。表单被 Javascript 捕获，并且用户名/密码（或其他密钥）被 javascript 记住，或者
2.  iOS / Android：用户登录。表单被代码困住，记忆在本地存储中
3.  [可选] 将用户名/密码/密钥发送到您的“WhoAmI”网络服务：如果有效，您会收到回复。如果无效，则发送错误。这可以提供即时反馈
4.  对于其他所有调用，您还会将用户名/密码/密钥发送到您的 Web 服务：如果有效，则处理该调用，如果无效，则抛出错误。
5.  （出现错误时，您要求用户提供新凭据）。

PHP 方面很简单：每个调用都将读取：

1.  如果没有用户名/密码/密钥：拒绝呼叫
2.  在数据库中查找用户名/密码/密钥。如果无效：拒绝呼叫
3.  如果有效：处理剩余的通话 - 您拥有用户的详细信息。

显然，您也可以使用不需要身份验证的服务。这可能包括注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:38:11.757

将 Oauth 消费者密钥和秘密捆绑到客户端应用程序。使用 HTTPS 请求的 Oauth 1 授权标头进行签名。现在，使用 oauth 库可以轻松进行签名。

对于网络应用程序，没办法。

# java - 无法解析此字符串然后返回它

> ID：13695244
> 
> 赞同：0
> 
> 时间：2012-12-04T02:36:51.010
> 
> 标签：java

我一直在尝试将这种字符串格式 "X -> i" 解析为 String["X"] 和 String["i"] 一段时间，但还没有让它工作。谁能帮我吗？

我试过了：

```
public String[] parse(){

     String s = "X -> i";

        String[] tokens = s.split(" -> ");

        for (String t : tokens)
          return new String myarray[] {t, t};
        return myarray[];

} 
```

它不会编译，但我无法从逻辑上弄清楚问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:42:41.850

```
public String[] parse(){
    String s = "X -> i";
    String[] tokens = s.split(" -> ");
    return tokens;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:42:21.533

您的编译错误来自您有两个 return 语句的事实。你只需要一个。一旦您修复了此错误（您询问的错误），就必须考虑其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:07:41.933

有几个“逻辑”问题：

1.  您有 2 个返回语句并且没有花括号来分隔循环逻辑。（虽然不是必需的，但它是 java 约定，更好的可读性并减少了看不见的错误的机会。

    ```
    parse() {
        return new String myarray[] {t, t};
        return myarray[];
    } 
    ```

    删除后者。

2.  使用 var name 'myarray' 是多余的，删除它们保留 array [] 声明语法。

3.  您正在使用一种方法。

    最好从方法中提取变量。

    ```
    public static String[] parse(String toParse) {
        return toParse.split(" -> ");
    } 
    ```

从错误看来，您实际上希望以什么格式返回令牌？您是否想要 split 方法生成的实际令牌数组？或者你想要两个数组。这是后者的一些疯狂代码。

```
public String[][] parse(String toParse) {

    // String s = "X -> i";
    String[] tokens = toParse.split(" -> ");
    String[][] temp = new String[tokens.length][];

    int i = 0;
    for (String t : tokens) {
         temp[i++] = new String[] { t, t };
    }
    return temp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T02:40:57.647

它比那简单得多

```
public String[] parse(){

    String s = "X -> i";

    String[] tokens = s.split(" -> ");

    return tokens;
} 
```

# java - Tomcat 和 Struts 2 - 拦截器中的 Active Directory 身份验证

> ID：13695248
> 
> 赞同：2
> 
> 时间：2012-12-04T02:37:39.977
> 
> 标签：java, tomcat, struts2, active-directory, ldap

我在我的 Tomcat 服务器中设置了 LDAP 身份验证，并定义了适用于登录的角色。我想让域上的每个人都可以登录，这都是排序的。

我有一个 struts2 拦截器，它根据数据库检查用户名，以允许 CRUD 操作。我还想检查用户是否在所选的 LDAP 组中，如果是，则允许调用该操作。

如何从 Struts 2 拦截器检查用户的 LDAP 组？

也许有更好的方法来解决这个问题？

# java - 将颜色从 RGB 转换为 YCbCr 包装图像

> ID：13695250
> 
> 赞同：1
> 
> 时间：2012-12-04T02:37:46.047
> 
> 标签：java, image, processing, rgb

我正在创建图像压缩程序，我想将颜色从 RBG 转换为 YCbCr，我没有问题将图像提取为像素并从每个像素获取 RBG 信息，但是，我不知道如何将像素与新的 YCbCr 信息打包在一起以产生新图片。

我编写了代码来处理 RGB 信息并将其重新组合在一起，它看起来像这样：

```
private static int packPixel(int red, int green, int blue) {
   return (red << 16) | (green << 8) | blue;
}

public BufferedImage makeNewBufferedImage(short[][] ImageDataRed, short[][] ImageDataGreen, short[][] ImageDataBlue ) {
   int[] newBufferedImageData = new int[rows * cols];
   int index;
   for (int row = 0; row < rows; row++) {
       for (int col = 0; col < cols; col++) {
           index = (row * cols) + col;
           newBufferedImageData[index] = packPixel(ImageDataRed[row][col], ImageDataGreen[row][col], ImageDataBlue[row][col]);
       }
   } 
```

我知道 YCbCr 拥有更多信息，但我不知道如何将它们打包在一起，也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:39:44.503

[Java Advanced Imaging](http://www.oracle.com/technetwork/java/download-1-0-2-140451.html)似乎支持 YCbCr。

# netbeans - NetBeans IDE 7.2 无法启动

> ID：13695251
> 
> 赞同：4
> 
> 时间：2012-12-04T02:37:46.607
> 
> 标签：netbeans, netbeans-7.2

在安装最新版本的 NetBeans IDE 7.2 之前，我卸载了以前的版本。ide 没有启动。我在 Windows Vista 中看到沙漏几秒钟，然后消失了，没有任何反应。我没有 IDE 可以运行。非常感谢您的帮助。日发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:02:44.593

你下载了什么捆绑的Netbeans？

*   下载“ *OS independend ZIP* ”（在平台）解压缩并运行它，它有效吗？
*   您是否更改了配置文件中的某些内容（**`Netbeans 7.2/etc/`**）
*   看看 NB Logfiles ( **`<user>/AppData/Roaming/NetBeans/var/log`**) - 任何警告/错误？
*   检查是否还有一些设置（**`<user>/AppData/Local/NetBeans`**和**`<user>/AppData/Roaming/NetBeans`**）？如果是，请删除它们（如果需要，请备份）
*   是否有任何错误消息或对话框？

* * *

**编辑：**

接下来你可以尝试：

转到您**`etc`**的 Netbeans 文件夹并打开文件**`netbeans.conf`**（您需要比记事本更好的编辑器，因为该文件有 unix-linebreaks）。寻找这两个设置：

*   `netbeans_default_userdir="${DEFAULT_USERDIR_ROOT}/7.2"`
*   `netbeans_default_cachedir="${DEFAULT_CACHEDIR_ROOT}/7.2"`

将两个路径都更改为**`"${HOME}/userdir"`**/之类的其他路径**`"${HOME}/cache"`**- 但请确保您不要为两者使用一个文件夹（请参阅设置上方的注释）。

现在启动 Netbeans 并检查两个文件夹是否都已创建并包含一些文件。我猜**`${HOME}`**两者都是在**`bin`**.

# css - 使用 CSS 设置 div 的绝对位置

> ID：13695255
> 
> 赞同：0
> 
> 时间：2012-12-04T02:38:22.277
> 
> 标签：css, windows-8

我正在 Windows 8 上创建一个允许水平滚动的应用程序。我想要做的是使 div 相对于应用程序的实际宽度和高度固定，而不是我的屏幕。现在，当我滚动时，div 会滚动，但我希望它保持原样。我认为`position:absolute;`告诉 div 相对于其父级定位，但它没有这样做。我检查以确保父 div 已修复并且它正在使用`float:left;`. 知道发生了什么吗？这是一些代码。

```
#parentDiv {
    height: 720px;
    width: 1366px;
    float: left;
}
#div {
    height: 60%;
    width: 15%;
    top: 200px;
    right: 2.5%;
    position: absolute;
    border-radius: 25px;
    opacity:0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T02:44:46.433

固定您的 div 位置...绝对不会有帮助。

```
position: fixed; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T03:52:03.453

位置：固定为 div。不需要关心 parentDiv

# maven - 将 Ivy 工件映射到 Maven

> ID：13695259
> 
> 赞同：3
> 
> 时间：2012-12-04T02:39:09.173
> 
> 标签：maven, ivy

我们的常春藤回购设置如下所述：http: [//ant.apache.org/ivy/history/latest-milestone/terminology.html](http://ant.apache.org/ivy/history/latest-milestone/terminology.html)

我正在尝试从 Maven 访问它。路径映射到模块没有问题。我们有一个模块 foo，然后 foo 创建工件 foo-api.2.1.0.jar 和 foo.2.1.0.jar（实现）。它的 foo-api.2.1.0.jar 就是问题所在。

我已经尝试过 maven 分类器，但是它想找到 foo.2.1.0-api.jar，而不是 foo-api.2.1.0.jar。

链接中的图表暗示 ivy.xml 或 pom.xml 可以为 mymod-api、mymod-impl 创建示例布局。如何用 pom 做到这一点？

更新：

一个建议是让 maven 工件成为 mymod-api 和 mymod-impl，但这会让 maven 查询 repo：

```
 /com/mycorp/foo-api/2.1.0.0/foo-api.jar
  /com/mycorp/foo/2.1.0.0/foo.jar 
```

而 Ivy 把它们放在：

```
 /com/mycorp/foo/2.1.0.0/foo-api.jar
  /com/mycorp/foo/2.1.0.0/foo.jar 
```

因此，仅使用 Maven 工件就无法发现它们。

更新 2：

我们正在使用 Nexus 存储库管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:07:23.120

如果您使用 Nexus 作为存储库管理器，请查看有关如何配置常春藤构建的答案：

[将公共 maven 存储库与 ivy 一起使用](https://stackoverflow.com/questions/4836011/use-public-maven-repository-with-ivy/4837149#4837149)

# 更新1

从 ivy 向 Nexus 发布文件的描述如下：

[如何使用 ivy 和 nexus 发布 3rdparty 工件](https://stackoverflow.com/questions/5111831/how-to-publish-3rdparty-artifacts-with-ivy-and-nexus/5115447#5115447)

提前道歉，它非常全面，还将解释分类器在 Maven 中的重要性。

# 更新2

发布到 Nexus 时：

```
<ivy:publish resolver="deploy"...>
    <artifacts pattern="${build.dr}/[artifact](-[classifier]).[ext]"/>
</ivy:publish> 
```

确保您使用的是 ibilio 解析器：

```
<ivysettings>
    <settings defaultResolver="central"/>
    <credentials host="somehost" realm="Sonatype Nexus Repository Manager" username="????" passwd="????"/>
    <resolvers>
        <ibiblio name="central" m2compatible="true"/>
        <ibiblio name="deploy" root="http://somehost/nexus/content/repositories/repo" m2compatible="true"/>
    </resolvers>
</ivysettings> 
```

“陷阱”是 m2compatible="true"。由于历史原因，解析器支持更老的 Maven 1 存储库格式（Ibilio 是[Maven Central](http://search.maven.org/)的旧名称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:24:33.193

你不想要分类器，那会照你说的做。您需要的是该工件的工件 ID 为“foo-api”。这不是问题，它按预期工作。

# java - 通过引用与按值 java

> ID：13695268
> 
> 赞同：0
> 
> 时间：2012-12-04T02:40:20.073
> 
> 标签：java, reference, state

我正在尝试解决著名的 8-puzzle，其中一个 3*3 的正方形充满了 1 个空槽和 8 个数字，解决方法是将其恢复到原始状态。

为此，我有一个 arraylist 的“状态”，它存储数字 0~9，代表谜题。

解决方案涉及产生大量可能的移动状态，这意味着我保存了每一个合法的移动以及由此产生的谜题。这是使用下面的方法完成的，但我的 swapAndStore 不会每次都编辑原始传递的数组。相反，当在下面的 genSuccessors() 中调用时，它会在第一个 if 条件下正常工作，然后在第一个 if 的结果上应用下一个 if 条件。我想我通过制作一个名为“oldBoard”的新拼图状态来解决这个问题，以保存原始输入拼图以供将来参考，但这也不起作用。一位朋友告诉我，这可能与参考问题有关，我不能很好地掌握。我知道当 x=0，y=1 时，java 不会进行交换（x，y），因此 x = 1，y=0，但看不到这在这里是如何应用的。建议？

```
 private void swapAndStore(int d1, int d2, ArrayList<State> s)
{
    //int[] cpy = copyBoard(curBoard);
    int[] cpy = new int [curBoard.length];
    System.arraycopy(curBoard,0,cpy,0,curBoard.length);
    int[] oldBoard = new int [curBoard.length];
    System.arraycopy(curBoard,0,oldBoard,0,curBoard.length);
    int temp = cpy[d1];
    cpy[d1] = cpy[d2];
    cpy[d2] = temp;
    s.add((new State(cpy)));
    curBoard = oldBoard;
    System.out.println("swapandstore storing" );
    s.get(s.size()-1).printState();

}

public ArrayList<State> genSuccessors()
{
    ArrayList<State> successors = new ArrayList<State>();
    int hole = getHole();

    // try to generate a state by sliding a tile leftwise into the hole
    // if we CAN slide into the hole
    if (hole != 0 && hole != 3 && hole != 6)
    {
        /*
         * we can slide leftwise into the hole, so generate a new state for
         * this condition and throw it into successors
         */;
        System.out.println("left");
        swapAndStore(hole - 1, hole, successors);
    }

    // try to generate a state by sliding a tile topwise into the hole
    if (hole != 6 && hole != 7 && hole != 8)
    {
        System.out.println("top");
        swapAndStore(hole + 3, hole, successors);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:46:07.333

*Java总是*按值传递。

原语是按值传递的；对象引用按值传递。

这意味着您不能更改引用的值。但是在对象的情况下，你可以改变它们的状态——如果它们是可变的。

所以你可以这样做：

```
package cruft;

import java.io.PrintStream;

/**
 * ArraySwapDemo description here
 * @author Michael
 * @link
 * @since 12/3/12 9:48 PM
 */
public class ArraySwapDemo {

    public static void main(String[] args) {
        System.out.println(String.format("before: %s", arrayToString(args)));
        swapValues(args, 0, args.length-1);
        System.out.println(String.format("after : %s", arrayToString(args)));
    }

    // No checks for proper indexes, but you get the idea.
    private static void swapValues(String[] args, int i, int j) {
        String temp = args[i];
        args[i] = args[j];
        args[j] = temp;
    }

    public static String arrayToString(String [] array) {
        StringBuffer buffer = new StringBuffer(1024);
        buffer.append('{');
        for (int i = 0; i < array.length-1; ++i) {
           buffer.append(array[i]).append(',');
        }
        buffer.append(array[array.length-1]).append('}');
        return buffer.toString();
    }

} 
```

如果我在命令行上用四个字符串运行它 - foo bar baz bat - 我得到这个结果：

```
java cruft.ArraySwapDemo foo bar baz bat
before: {foo,bar,baz,bat}
after : {bat,bar,baz,foo}

Process finished with exit code 0 
```

# perl - “dzil new”停止工作

> ID：13695270
> 
> 赞同：0
> 
> 时间：2012-12-04T02:40:37.317
> 
> 标签：perl, module, cpan, dist-zilla

我正在使用 perlbrew。在 Mac OS X、Debian 和 Ubuntu 机器上在 Perl v5.16.2 和 v5.14.2 下测试。结果总是一样的：

```
stas@Stanislaws-MacBook-Pro:~$ dzil new Some::Module
[DZ] making target dir /Users/stas/Some-Module
[DZ] writing files to /Users/stas/Some-Module
[DZ] guessing dist's main_module is lib/Some/Module.pm
[DZ] no license data in config, no %Rights stash, couldn't make a good guess at license from Pod; giving up
[DZ] no license data in config, no %Rights stash, couldn't make a good guess at license from Pod; giving up at /Users/stas/perl5/perlbrew/perls/perl-5.16.0/lib/site_perl/5.16.1/darwin-2level/Moose/Meta/Method/Delegation.pm line 110.
stas@Stanislaws-MacBook-Pro:~$ find Some-Module/ -ls
14597828    0 drwxr-xr-x   4 stas     staff         136 Dec  4 00:33 Some-Module/
14597832    0 -rw-r--r--   1 stas     staff           0 Dec  4 00:33 Some-Module/dist.ini
14597829    0 drwxr-xr-x   3 stas     staff         102 Dec  4 00:33 Some-Module/lib
14597830    0 drwxr-xr-x   3 stas     staff         102 Dec  4 00:33 Some-Module/lib/Some
14597831    4 -rw-r--r--   1 stas     staff          52 Dec  4 00:33 Some-Module/lib/Some/Module.pm
stas@Stanislaws-MacBook-Pro:~$ cat Some-Module/lib/Some/Module.pm
use strict;
use warnings;
package Some::Module;

1;
stas@Stanislaws-MacBook-Pro:~$ 
```

产生该错误的行来自`lib/Dist/Zilla.pm`v4.300028（CPAN 上的最新版本）：

```
require Software::LicenseUtils;
my @guess = Software::LicenseUtils->guess_license_from_pod(
  $self->main_module->content
);

if (@guess != 1) {
  $self->log_fatal(
    "no license data in config, no %Rights stash,",
    "couldn't make a good guess at license from Pod; giving up"
  );
} 
```

不确定`guess_license_from_pod`方法；毕竟，如果期望**创建样板代码，它怎么可能呢？！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:21:29.490

您需要运行`dzil setup`（或以其他方式`[%Rights]`在 中创建存储`~/.dzil/config.ini`）。它应该看起来像这样：

```
[%Rights]
license_class    = Perl_5
copyright_holder = Your Name Here 
```

# c++ - 编译时出现“发现一个或多个多重定义的符号”错误

> ID：13695271
> 
> 赞同：1
> 
> 时间：2012-12-04T02:40:48.433
> 
> 标签：c++

在构建时，我遇到了这些错误：

> 错误 5 错误 LNK2005：“int __cdecl numGen(void)”(?numGen@@YAHXZ) 已在 main.obj 中定义 错误 6 错误 LNK1169：找到一个或多个多重定义的符号

numGen.cc:

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

int numGen()
{
    int rNum;
    srand(time(NULL)); //--Seeds a random number.
    rNum = 1 + (rand() % 100);

    return rNum;
} 
```

主.cc：

```
#include <iostream>
#include "NumGen.cc"

int main()
{
    std::cout << numGen();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T02:43:28.007

您不应在其他 C++ 文件中包含 C++ 文件。这导致双重定义的符号。相反，您应该创建一个带有前向声明的头文件，将其包含在共享该函数的两个文件中，然后分别编译这些文件：

numGen.h：

```
int numGen(); 
```

包含`numGen.h`在两个`cc`文件中，并删除`#include "NumGen.cc"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T02:50:41.537

通过在您的文件中`#include`ing ，您将导致预处理器创建两个文件，如下所示：`NumGen.cc``main.cc`

`NumGen.cc`：

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

int numGen()
{
    int rNum;
    srand(time(NULL)); //--Seeds a random number.
    rNum = 1 + (rand() % 100);

    return rNum;
} 
```

和`main.cc`：

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

int numGen()
{
    int rNum;
    srand(time(NULL)); //--Seeds a random number.
    rNum = 1 + (rand() % 100);

    return rNum;
}

int main()
{
    std::cout << numGen();
    return 0;
} 
```

因为`#include`预处理器指令只是将您包含的文件的内容插入到您包含它的位置（当然，除非它之前已包含并包含在包含保护中。我还假设您正在同时编译`NumGen.cc`同一`main.cc`命令行，所以很自然你会得到一个多重定义的符号错误，因为函数`numGen`现在在两个文件中都定义和实现了。

您要做的是`numGen`在头文件中前向声明，我们称之为`NumGen.h`：

```
int numGen(); 
```

然后将线`#include "NumGen.h"`放入`NumGen.cc`和中`main.cc`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T02:44:08.077

您包括 cc 文件。仅包含实际标题

# python - 通过 MATLAB 脚本调用 Python

> ID：13695274
> 
> 赞同：1
> 
> 时间：2012-12-04T02:41:09.573
> 
> 标签：python, matlab

我是 Python 新手，我想将我的 matlab 变量传递给 Python。以下代码采用 python 脚本和参数。例如：`python('square.py', '5')`。是否可以通过这个 matlab 脚本将变量传递给 Python？例如：

```
python('square.py', 'value')
function [result status] = python(varargin)

cmdString = '';

% Add input to arguments to operating system command to be executed.
% (If an argument refers to a file on the MATLAB path, use full file path.)
for i = 1:nargin
thisArg = varargin{i};
if isempty(thisArg) || ~ischar(thisArg)
    error('MATLAB:python:InputsMustBeStrings', 'All input arguments must be valid strings.');
end
if i==1
    if exist(thisArg, 'file')==2
        % This is a valid file on the MATLAB path
        if isempty(dir(thisArg))
            % Not complete file specification
            % - file is not in current directory
            % - OR filename specified without extension
            % ==> get full file path
            thisArg = which(thisArg);
        end
    else
        % First input argument is PythonFile - it must be a valid file
        error('MATLAB:python:FileNotFound', 'Unable to find Python file: %s', thisArg);
    end
end

  % Wrap thisArg in double quotes if it contains spaces
  if any(thisArg == ' ')
    thisArg = ['"', thisArg, '"'];
  end

  % Add argument to command string
  cmdString = [cmdString, ' ', thisArg];
end

% Execute Python script
errTxtNoPython = 'Unable to find Python executable.';

if isempty(cmdString)
  error('MATLAB:python:NoPythonCommand', 'No python command specified');
   elseif ispc
  % PC
  pythonCmd = '/usr/bin/python';
  cmdString = ['python', cmdString];
  pythonCmd = ['set PATH=',pythonCmd, ';%PATH%&' cmdString];
  [status, result] = dos(pythonCmd);
else
  % UNIX
  [status ignore] = unix('which python'); %#ok
  if (status == 0)
    cmdString = ['python', cmdString];
    [status, result] = unix(cmdString);
  else
    error('MATLAB:python:NoExecutable', errTxtNoPython);
  end
end

% Check for errors in shell command
if nargout < 2 && status~=0
  error('MATLAB:python:ExecutionError', ...
    'System error: %sCommand executed: %s', result, cmdString);
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:04:08.903

对于少量数字，并根据您的代码，您可以编写一些基于`printf`并基本上将格式化的数字字符串传递给 python 例程的东西。python 例程需要将其解析回数字。

对于较大的垃圾数据，您可以将其写入临时文件（作为 csv 或什至作为带有 的二进制文件`fwrite`）并传递文件名。如果您正在运行 Linux 并且将 /tmp 安装为 tmpfs（如 ram-disk），则将其用作临时存储可以加快进程。

还有一些人在 Python 和 Matlab 之间使用 UNIX 管道。例如[http://danapeerlab.googlecode.com/svn/trunk/freecell/depends/common/python/matlabpipe.py](http://danapeerlab.googlecode.com/svn/trunk/freecell/depends/common/python/matlabpipe.py)

# curl - Curl 在特定端口上返回空白页

> ID：13695280
> 
> 赞同：1
> 
> 时间：2012-12-04T02:42:26.437
> 
> 标签：curl, port

我正在尝试让 curl 输出。它是在该地址输出的基本文本字符串。

我正在执行此代码，但它不起作用，但如果我取出 27017 并加载主域，则可以正常工作：

```
$cookie_file_path = "cookiejar.txt"; 
$fp = fopen("$cookie_file_path","w");
fclose($fp);
$LOGINURL = "http://www.myserver.org:27017";
$agent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; .NET CLR 1.1.4322)";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$LOGINURL);
    curl_setopt($ch, CURLOPT_USERAGENT, $agent);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    $result = curl_exec ($ch);
echo $result; 
```

知道为什么它不起作用吗？任何帮助将不胜感激。不确定它是否相关，但 Web 服务器与在 27017 端口上输出的应用程序在同一台机器上运行。

更新：

```
$cookie_file_path = "cookiejar.txt"; 
$username = "myusername";
$password = "mypassword";
$LOGINURL = "http://www.myserver.org";
$agent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; .NET CLR 1.1.4322)";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$LOGINURL);
    curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
    curl_setopt($ch, CURLOPT_PORT , "27017");
    curl_setopt($ch, CURLOPT_USERAGENT, $agent);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    $result = curl_exec ($ch);

echo $result; 
```

更新 2：

解决。

事实证明，对于这个特定实例，它需要摘要身份验证。

```
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST); 
```

解决了这个问题...

感谢 Barmar 让我意识到它确实需要用户/通行证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:12:50.727

当我单击链接时，系统会要求我输入用户名和密码。您需要使用该`CURLOPT_USERPWD`选项来提供：

```
$username = 'XXX';
$password = 'YYY';

curl_setopt($ch, CURLOPT_USERPWD, "$username:$password"); 
```

这是我这样做时得到的结果：

```
$ curl -s -D/dev/stdout 'http://www.nationalgaming.org:27017'
HTTP/1.1 401 Unauthorized
Content-Length: 0
WWW-Authenticate: Digest qop="auth", realm="www.nationalgaming.org", nonce="1354591712" 
```

这表明该页面需要登录。

# php - PHP函数传递包含文件

> ID：13695282
> 
> 赞同：2
> 
> 时间：2012-12-04T02:42:38.533
> 
> 标签：php, html, css, web

我正在尝试创建一个 loadPlugin(plugin) 函数，该函数将从插件文件夹中获取 php 文件并将其变量/函数加载到站点中。

问题是，众所周知，函数不是全局的，这引发了我的问题。

由于可以包含任何文件，因此我无法将文件中的每个变量都设为全局变量，因为它们可以是随机的和无限的，我想将其设置为可以在页面上的任何位置使用文件中的任何函数。

关于如何做到这一点的任何建议都会很棒。谢谢！

这是我到目前为止所拥有的：

```
function loadPlugin($name,$debug='') {
    if(file_exists("scripts/plugins/".$name)) {
        include("scripts/plugins/".$name);
    } else if(strtolower($debug)=='d') trigger_error($name." does not exists in the plugins folder.", E_USER_ERROR);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:56:38.637

`loadPlugin.php`您可以尝试使用以下代码创建一个名为 的文件，而不是调用该函数：

```
if( file_exists("scripts/plugins/".$name)) include("scripts/plugins/".$name));
elseif( strtolower($debug) == "d") trigger_error("...."); 
```

然后，加载插件：

```
$name = "pluginName"; include("loadPlugin.php"); 
```

您可以根据需要多次包含单个文件，只要它们不尝试重新定义函数即可。所以这基本上就像在全局范围内调用的函数一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:18:09.843

加载具有功能的文件似乎很不稳定。为什么不创建类并采用面向对象的方法？

您可以加载可在整个代码中重用的对象。您甚至可以实现一个接口，该接口将保证在所有插件中存在某些方法和属性，而不管是谁开发它们。

就“全局”而言，我可以想到几种不同的路径，您可以考虑使用会话变量来存储每次加载新页面时填充对象的信息的持久性。甚至将对象本身存储到会话中（这不是最佳实践，但仍然可能）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T03:40:57.067

好吧，我遇到了类似的问题，并决定寻找可重用和可扩展的东西。所以，我只是为了演示科林的答案而为你修剪了它。代码可以改进:)

```
<?php
/**
* Autoloader
* @Usage: 
*       // set autoload paths
*       Loader::setPaths(
*               array("interface_path"=>dirname(__FILE__). "/core"),
*               array("plugin_path"=>"/var/www/awesome-app/plugins"),
*               array("controller_path"=>dirname(__FILE__). "/controllers")
* );
* 
* 
*   // Now, the magic
*       Loader::registerAutoloads();
*/

class Loader{

protected static $interfacePath = '';
protected static $pluginPath = '';
protected static $controllerPath = '';

/**
 * Set paths to autoload classes
 *
 * @param string $application
 * @param string $library
 * @todo this part can be cleaner/smarter with less code.
 *  Replace "" for with constants as default folders to search
 */
public static function setPaths($autoload_paths= null)
{
    if(is_array($autoload_paths)){
        self::$interfacePath = array_key_exists("interface_path", $autload_paths) ? 
                        $autoload_paths["interface_path"] : "";

        self::$interfacePath = array_key_exists("plugin_path", $autload_paths) ? 
                        $autoload_paths["plugin_path"] : "";

        self::$interfacePath = array_key_exists("controller_path", $autload_paths) ? 
                        $autoload_paths["controller_path"] : "";

    }       
}

/**
 * Registers autoload functions
 *
 */
public static function registerAutoloads() {
    spl_autoload_register('Loader::loadInterface');
    spl_autoload_register('Loader::loadPlugin');
    spl_autoload_register('Loader::loadController');
    if ( function_exists('__autoload') ) {
        spl_autoload_register('__autoload');
    }
}

/**
 * Checks if a given file exists and load it
 *
 * @param string $filename
 * @return bool
 */
protected static function check($filename)
{
    if(file_exists($filename)){
         include_once $filename;
        return true;
    }
    return false;        
}

/**
 * Interface Loader
 *
 * @param string $className
 * @return bool
 */
static function loadInterface($className)
{
    return self::check(
        sprintf('%s/%s_interface.php',self::$interfacePath, low($className))
    );
}

/**
 * Plugin Loader
 *
 * @param string $className
 * @return bool
 */
static function loadPlugin($className)
{
    return self::check(
        sprintf('%s/%s_plugin.php',self::$pluginPath,low($className))
    );
}

/**
 * Controller Loader.
 *
 * @param string $className
 * @return bool
 */
static function loadController($className){
    $fileName = camelCaseToUnderscore($className);
    return self::check(
        sprintf('%s/%s_controller.php',self::$controllerPath,$fileName)
        );
   }

 }

  ?> 
```

It uses PHP's autoload functions, so please make sure you have them. To resolve conflicts, i added a small registry class(sort of key/value store for unique variables and functions) that fixed conflicts. It Also improved performance. Might be an overkill for your kind of work, but it helped me since mine was quite a big project.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T02:59:09.627

创建全局数组，例如 $pluginVars 并在插件文件内部存储您想在此数组外部使用的所有变量。

# jquery - 扩展 qtip 或其他选择器插件的属性

> ID：13695285
> 
> 赞同：3
> 
> 时间：2012-12-04T02:43:02.367
> 
> 标签：jquery, plugins, properties, extend, qtip

我正在尝试为 qtip 的多个实例设置一堆默认属性，但它不起作用。有可能还是我做错了什么？

共同属性

```
 var qtipDefaults = {
        show: 'mouseover',
        hide: 'mouseout',
        position: {
            corner: {
                target: 'bottomLeft',
                tooltip: 'topLeft'
            }
        },
        style: {
            name: 'dark'
        }
    }; 
```

实例化 #1

```
 $('#sbt_name').qtip({
        content: 'This is the Name of the Course'
    }).extend(qtipDefaults); 
```

实例化 #2

```
 var sbt_name = $('#sbt_name').qtip({
        content: 'This is the Name of the Course'
    });
    $.extend(sbt_name, qtipDefaults); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:47:49.277

在调用 qtip 插件之前必须准备好 qtip 参数。试试这个：

```
$('#sbt_name').qtip($.extend(true, {}, qtipDefaults, {
    content: 'This is the Name of the Course'
})); 
```

`$.extend()`合并两个或多个对象。`true`参数表示它将进行深度复制。第一个对象是空的，用于保持原始 qtipDefaults 不变。

# mysql - MySQL选择其中字段包含一个字符串但不包含另一个字符串

> ID：13695287
> 
> 赞同：3
> 
> 时间：2012-12-04T02:43:34.207
> 
> 标签：mysql, search

我必须为产品数据库构建一个搜索查询，该数据库包含两个名称相似的产品，其名称类似于以下示例：

“用于...的小部件模拟器和虚拟研讨会”

“用于...的小部件模拟器”

目前，如果有人搜索“Widget Simulator”，他们会在列表中获得两种类型的产品。我正在尝试构建一个类似于“Widget Simulator not:Virtual Seminar”的查询，该查询将省略包含“Virtual Seminar”字样的产品

现有查询如下所示：

```
SELECT COUNT(*) AS `numrows` 
FROM (`content_product`) 
JOIN `content` ON `content`.`content_id` = `content_product`.`content_id` 
WHERE `content`.`version_status_id` = 28 
AND `content`.`status` = 11
AND `name`  LIKE '%widget%simulator%' 
```

我尝试了以下方法，但它不起作用：

```
SELECT COUNT(*) AS `numrows` 
FROM (`content_product`) 
JOIN `content` ON `content`.`content_id` = `content_product`.`content_id` 
WHERE `content`.`version_status_id` = 28 
AND `content`.`status` = 11
AND `name`  LIKE '%widget%simulator%'
AND `name` NOT LIKE '%virtual%seminar%' 
```

这行不通。我想我明白为什么它不起作用，但我在这里或其他地方找不到任何告诉我如何做到这一点的东西。

总而言之，我想显示名称中包含“Widget Simulator”的所有产品，同时省略那些也包含“Virtual Seminar”的产品。

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:08:17.467

只有个人认为我认为您应该使用子查询来使用它，首先删除所有包含虚拟研讨会的产品，然后选择其余包含 Widget Simulator 的产品，如下所示：

```
SELECT COUNT(*) AS `numrows` 
  FROM (`content_product`) 
  JOIN `content` ON `content`.`content_id` = `content_product`.`content_id` 
 WHERE `content`.`version_status_id` = 28 
   AND `content`.`status` = 11
   AND `name`  LIKE '%widget%simulator%'
   AND `content_product.id` NOT IN (
           SELECT `content_product.id` 
             FROM `content_product` 
            WHERE `name` LIKE '%virtual%seminar%'
       ) 
```

# java - 如何使用 Java 写入麦克风输入？

> ID：13695291
> 
> 赞同：2
> 
> 时间：2012-12-04T02:44:19.257
> 
> 标签：java, microphone, javasound

我知道这听起来很奇怪，但是有什么方法可以让系统认为麦克风正在接收输入？我想给麦克风我自己的音频作为输入，但我看不到这样做的方法。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:45:05.800

第一步是打开您的 AudioSystem 并检查各种通道/混音器并找到相关线路。你做过吗？涵盖此内容的教程在这里： [http ://docs.oracle.com/javase/tutorial/sound/accessing.html](http://docs.oracle.com/javase/tutorial/sound/accessing.html)

我刚刚制作了一个音频混音器，但它只混合 wav 文件和剪辑，直至单个输出 SourceDataLine。我自己没有尝试阅读多个麦克输入。但是，如果您可以从源中打开两个 TargetDataLine，从每个缓冲区加载中读取相同数量的样本，将字节转换为可以添加的值，那么混合并不是那么糟糕（可以缩放每个的体积，以便它们不会加起来超过位编码限制）然后将它们转换回 PCM 字节。

# windows-phone-7 - 如何在 Visual Studio 2010 中创建移动 Web 窗体

> ID：13695293
> 
> 赞同：0
> 
> 时间：2012-12-04T02:44:49.503
> 
> 标签：windows-phone-7, web-applications, mobile, windows-mobile

我必须在 Visual Studio 2010 中创建移动网站。但是 Mobile Web Form 的 Visual Studio 中没有模板。我使用默认 Web 表单并使用以下代码::

```
 <mobile:Label ID="lblHeading"  runat="server" EnableViewState="False" StyleReference="StyleHeader" Wrapping="Wrap">
</mobile:Label> 
```

是否有任何其他方式来创建移动 Web 表单和移动网站开发的实际流程..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:05:09.927

我没有`Windows Phone 7`，但我知道您需要下载并安装[Windows Phone 7 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=27570)，然后启动您的 Visual Studio 并选择一个新`Windows Phone 7`项目。

# mysql - 按周分组给出不准确的结果

> ID：13695295
> 
> 赞同：1
> 
> 时间：2012-12-04T02:45:16.900
> 
> 标签：mysql, sql

我试图从一张桌子上获取我所有的销售额，并按每周对它们进行分组，但我得到了错误的周范围。

**表结构**

```
order_id,  sell_price, buy_price, time 
```

**每日销售额**

```
Sell Price   Fees     Buy_Price    Margin   Date
181.98       36.39    78.43        67.154   03-12-2012
65.49        13.08    30.34        22.052   02-12-2012
44.21        8.84     19.45        15.918   29-11-2012
84.46        16.89    32.39        35.178   27-11-2012
106.52       21.30    61.66        23.556   26-11-2012
113.92       22.78    44.74        46.396   25-11-2012
64.74        12.94    26.32        25.472   24-11-2012
16.11        3.22     4.20         8.688    23-11-2012
13.81        2.76     3.62         7.428    22-11-2012 
```

**每周销售额**

```
Sell Price   Fees     Buy_Price    Margin   Date
247.47       49.494   108.77       89.206   03-12-2012
349.11       69.822   158.24       121.048  26-11-2012
94.66        18.932   34.14        41.588   24-11-2012 
```

您可能已经注意到，最后一张表的问题是数字没有加起来，第一行应该是计算结果`3-11-2012 to present`（这意味着边距应该是 67），而第二行应该是计算结果`26-11-12 to 2-11-12`（其中表示边距应在 95 左右）。

我正在使用的查询如下，它可能有什么问题，因为我看不到一个。

**SQL**

```
SELECT 
ROUND(SUM(sell_price),2) AS sell_price, 
ROUND(SUM(buy_price/100*20),2) AS fees, 
ROUND(SUM(buy_price),2) AS buy_price, 
ROUND(SUM(sell_price/100*80 - buy_price),2) AS margin, 
time 
FROM order_items 
GROUP BY WEEK(FROM_UNIXTIME(time)) 
ORDER BY WEEK(FROM_UNIXTIME(time)) DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:18:29.370

太容易了。您的 mysql 实例中的一周从星期日开始。您希望它从星期一开始计算。您需要将第二个参数传递给[WEEK](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)函数。在您的情况下，它将是 1（我认为）。但是，我建议您调整[default_week_format](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_default_week_format)系统变量以匹配您所在国家/地区的区域设置。

# objective-c - 使用 ARC 时将 objc_retain 与 struct 对象一起使用

> ID：13695305
> 
> 赞同：2
> 
> 时间：2012-12-04T02:46:36.857
> 
> 标签：objective-c, struct, automatic-ref-counting

使用 ARC 时，有时我会将单个文件标记为不使用 ARC，因此我可以将 C 结构与对象字段一起使用。而不是这样做，我最近一直在考虑将结构对象字段声明为 __unsafe_retained 然后使用 objc_retain()/objc_release() 函数来保留和释放它们，这样我的类的其余部分就可以使用 ARC 和类库所有的手动ARC都可以隐藏在幕后。有什么理由不这样做吗，我已经对其进行了简单的测试，它似乎可以工作，唯一的问题是我找不到 objc_retain() 和 objc_release() 的头文件。

# cuda - 来自 32 个块的 32 个线程会被安排为一个 warp 吗？

> ID：13695313
> 
> 赞同：5
> 
> 时间：2012-12-04T02:47:11.907
> 
> 标签：cuda

我知道在 CUDA 中，同一块中的 32 个相邻线程将被安排为一个 warp。但我经常发现一些教程 CUDA 代码有多个块，每个块有 1 个线程。在这个模型中，来自 32 个块的 32 个线程会被调度为一个 warp 吗？如果不是，我可以说这个模型不如每个块组织成 32 个线程那么有效吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T03:26:24.750

不，来自不同块的线程不能被安排在同一个 warp 中。如果您只使用单个线程创建线程块网格，那么您肯定无法从机器中获得全部性能。它比每个块有 32 个（或 32 的整数倍）线程效率低。例如，Fermi SM 有 32 个可以使用的经线。如果您正在调度单个线程的块，那么这 32 个通道中只有 1 个通道可以在任何给定时间使用。

线程有一个线程 ID（threadIdx 内置变量），它在单个块中定义（并且仅对）单个块。

C 编程指南的硬件多线程部分给出[了定义单个块中扭曲总数的公式](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#hardware-multithreading)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T06:53:50.170

还要补充一点。CUDA 中的计算**总是**通过 warp 进行的，因此即使您为每个块分配少于 32 个线程（1、2..8、16），计算发生在一个 warp（32 个线程）上，该块的 32 个线程的资源也会停止。

如果您分配 32 个块，每个块有一个线程，那么您正在为 32X32 线程拖延资源。如果可以，请避免这种情况。

# spring - 带有 Spring Security 的混合 OpenId OAuth

> ID：13695316
> 
> 赞同：1
> 
> 时间：2012-12-04T02:47:32.657
> 
> 标签：spring, oauth, openid, hybrid

我正在尝试确定春季是否支持混合 OpenId + OAuth，以及是否有人知道说明其用法的示例或教程。经过多次谷歌搜索，我没有看到任何支持的迹象。

谢谢皮特

# c# - 围绕另一个点旋转一个点

> ID：13695317
> 
> 赞同：22
> 
> 时间：2012-12-04T02:47:41.797
> 
> 标签：c#, rotation, gdi, trigonometry

我的任务是绘制特定的图形。作为这项任务的一部分，我需要将一些点旋转 45 度。

我已经花了 2 天时间试图计算一个公式，但就是无法正确计算。我一直在搜索包括这个特定网站在内的所有地方，我已经非常接近了，但我仍然不在那里。

这里是：我需要画 4 个不同的点

我有一个特定的公式来计算那里的位置，这超出了问题的范围，但这是我得到的结果：

```
int radius = 576;
int diameter = radius * 2;
Point blueA = new Point(561, 273);
Point greenB = new Point(273, 561);
Point yellowC = new Point (849, 561);
Point redD = new Point (561, 849); 
```

![结果](../Images/9164038f6d231698f44606154c912026.png)

现在我需要将这些点旋转 45 度。我使用以下代码来实现它：

```
double rotationAngle = 45;
double rotationRadians = rotationAngle * (Math.PI / 180);
int center = radius;    
result.X = (int)(Math.Cos(rotationRadians) * ((double)result.X - (double)center) - (double)Math.Sin(rotationRadians) * ((double)result.Y - center) + (double)center);
result.Y = (int)(Math.Sin(rotationRadians) * ((double)result.X - (double)center) + (double)Math.Cos(rotationRadians) * ((double)result.Y - center) + (double)center); 
```

但这就是我得到的：

![结果](../Images/5a8ff667a05b612f9b3d7aebba657229.png)

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-04T03:29:13.773

问题是`int center = radius`你正在设置`int radius = 576`。这没有任何意义，因为您肯定正在围绕应该具有 x 和 y 位置的点旋转。

鉴于您正在围绕原点旋转中心`x`，并且`y`两者`0`都不应`576`。

所以，鉴于此，试试这个。

```
/// <summary>
/// Rotates one point around another
/// </summary>
/// <param name="pointToRotate">The point to rotate.</param>
/// <param name="centerPoint">The center point of rotation.</param>
/// <param name="angleInDegrees">The rotation angle in degrees.</param>
/// <returns>Rotated point</returns>
static Point RotatePoint(Point pointToRotate, Point centerPoint, double angleInDegrees)
{
    double angleInRadians = angleInDegrees * (Math.PI / 180);
    double cosTheta = Math.Cos(angleInRadians);
    double sinTheta = Math.Sin(angleInRadians);
    return new Point
    {
        X =
            (int)
            (cosTheta * (pointToRotate.X - centerPoint.X) -
            sinTheta * (pointToRotate.Y - centerPoint.Y) + centerPoint.X),
        Y =
            (int)
            (sinTheta * (pointToRotate.X - centerPoint.X) +
            cosTheta * (pointToRotate.Y - centerPoint.Y) + centerPoint.Y)
    };
} 
```

像这样使用。

```
Point center = new Point(0, 0); 
Point newPoint = RotatePoint(blueA, center, 45); 
```

显然，如果中心点始终是，`0,0`那么您可以相应地简化函数，或者通过默认参数或通过重载方法使中心点成为可选。您可能还希望将一些可重用的数学封装到其他静态方法中。

例如

```
/// <summary>
/// Converts an angle in decimal degress to radians.
/// </summary>
/// <param name="angleInDegrees">The angle in degrees to convert.</param>
/// <returns>Angle in radians</returns>
static double DegreesToRadians(double angleInDegrees)
{
   return angleInDegrees * (Math.PI / 180);
}

/// <summary>
/// Rotates a point around the origin
/// </summary>
/// <param name="pointToRotate">The point to rotate.</param>
/// <param name="angleInDegrees">The rotation angle in degrees.</param>
/// <returns>Rotated point</returns>
static Point RotatePoint(Point pointToRotate, double angleInDegrees)
{
   return RotatePoint(pointToRotate, new Point(0, 0), angleInDegrees);
} 
```

像这样使用。

```
Point newPoint = RotatePoint(blueA, 45); 
```

最后，如果你使用 GDI，你也可以简单地做一个`RotateTransform`. 请参阅：http: [//msdn.microsoft.com/en-us/library/a0z3f662.aspx](http://msdn.microsoft.com/en-us/library/a0z3f662.aspx)

```
Graphics g = this.CreateGraphics();
g.TranslateTransform(blueA);
g.RotateTransform(45); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:40:43.840

你的数学在我看来很奇怪。我认为 dx = r*Cos(theta) 和 dy = r*Sin(theta)。

这是我写的一个小程序，因为这让我很困扰，而且我已经好几年没做数学了。

```
Point center = new Point() { X = 576, Y = 576 };

Point previous = new Point() { X = 849, Y=561 };
double rotation = 45;
double rotationRadians = rotation * (Math.PI / 180);

//get radius based on the previous point and r squared = a squared + b squared
double r = Math.Sqrt(Math.Pow(previous.X - center.X, 2) + Math.Pow(previous.Y - center.Y, 2));
Console.WriteLine("r = " + r.ToString());

//calculate previous angle
double previousAngle = Math.Atan((previous.Y - center.Y) / (previous.X - center.X));
Console.WriteLine("Previous angle: " + previousAngle.ToString());

double newAngle = previousAngle + rotationRadians;

Point newP = new Point();
newP.X = center.X + r * Math.Cos(newAngle);
newP.Y = center.Y + r * Math.Sin(newAngle);

Console.WriteLine("(" + newP.X.ToString() + ", " + newP.Y.ToString() + ")");

Console.ReadLine(); 
```

# java - 二维递归总是返回 0

> ID：13695318
> 
> 赞同：3
> 
> 时间：2012-12-04T02:47:44.190
> 
> 标签：java, data-structures, recursion

好的，这是我的问题的附录[，](https://stackoverflow.com/questions/13662903/2-dimensional-recursion)已得到解答。

不想贬低前一个问题的答案，我决定这应该有自己的问题，以公平对待回答我的第一个问题的 JB Nizet，并因此获得荣誉。

我正在为一个类实现一个二维数据结构。使用的方法是一个“NxN”对象数组。

所以，

```
Cell[][] dataStructure = new Cell[N][N]; 
```

每个单元格都依赖于其左侧单元格的输出以及其上方的单元格来创建自己的输出。将针对 000 到 111 的输入范围测试二维结构。

二维结构示例以及输出如何流入下一个单元格

![在此处输入图像描述](../Images/23b0b4726c68b8d2ab8b99f5228e8c2f.png)

**例子：**

*假设标准 X、Y 方向，我尝试使用以下方法获取右下角单元格的输出：*

```
/**
 * Recursive method that returns the output of a given cell
 * @param row: the row the cell is in (its yPos)
 * @param inputs:
 * @param column: the column the  cell is in (its xPos)
 */
private int[] getOutput(int[] inputs,int yPos, int xPos){
        if (yPos==-1){
              int[] out = new int[2];
              out[0] = 0;  // yPos
              out[1] = inputs[xPos];  //xPos
              return out;
            }
        else if (xPos==-1){
              int[] out = new int[2];
              out[0] = inputs[yPos];  //yPos
              out[1] = 0;  //xPos
              return out;
        }

        int[] leftOutput = getOutput(inputs, yPos, xPos-1);
        int[] topOutput = getOutput(inputs, yPos-1, xPos);

         return currentStructure[yPos][xPos].getResult(leftOutput[1], topOutput[0]);
} 
```

为了简化事情，我现在有一个 getResult 方法，用于二维结构中的单元格，对指定的输入执行逻辑。结果是两个输出的 int[]，每个方向一个。

目前的 getResult 方法是这样编写的：

```
 public int[] getResult(int left, int top)
{
    int[] resultOut = new int[2];
    if (xDirStr.equals("00")){ // AND
        resultOut[0]= left * top;
    }
    if (xDirStr.equals("01")){ // OR
        if (left ==1 || top ==1)
               resultOut[0]= 1;
        else
       resultOut[0] =0;;
    }
    if (xDirStr.equals("10")){ // NOT, USES ONLY NOT X
        if (left ==0)
       resultOut[0]= 1;
        else
        resultOut[0]= 0;
    }
    if (xDirStr.equals("11")){ // XOR
        if ( (left==1 && top==0) || (left==0 && top==1))
            resultOut[0]= 1;
        else
        resultOut[0]= 0;
    }

    if (yDirStr.equals("00")){ // AND
        resultOut[1]= left * top;
    }
    if (yDirStr.equals("01")){ // OR
        if (left ==1 || top ==1)
               resultOut[1]= 1;
        else
        resultOut[1]= 0;
    }
    if (yDirStr.equals("10")) { // NOT, USES ONLY NOT X
        if (left ==0)
        resultOut[1]= 1;
        else
        resultOut[1]= 0;
    }
    if (yDirStr.equals("11")) { // XOR
        if ( (left==1 && top==0) || (left==0 && top==1))
            resultOut[1]= 1;
        else
        resultOut[1]= 0;
    }
        return resultOut;
} 
```

我已逐步调试，但无法解决我的问题。输出与我手动重新创建以验证它的输出不匹配，输出始终为 0。任何有用的提示将不胜感激！

我的具体问题是，为什么 getOutput 总是返回 0？从我看到的调试来看，问题不在我的逻辑应用程序中，我没有在这里包含它。

再次感谢。

=======更新======== 应 BevynQ 的要求提供的 3x3 样本。

每次测试期间，沿左侧和顶部边缘的输入都会发生变化，此示例适用于基本情况 000。** NOT 函数始终返回从左侧输入的值的逻辑 NOT。* 我正在尝试的“输出”检查我的方法以红色圈出。

![000 的 3x3 示例](../Images/b3efe13a7515362195d6b6bd8df4040b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:05:16.357

尤里卡，它是如此简单，以至于我忽略了它并没有抓住它。问题主要与我对变量名的选择不当有关。我修补了可能有错误的数组输出，但解决方案是将返回线更改为：

```
 return currentStructure[xPos][yPos].getResult(leftOutput[1], topOutput[0]); 
```

看到不同？我交换了 xPos 和 yPos。我在调试的过程中理解了一个短暂的闪光时刻，但它的解释又在我的脑海中消失了。它与访问结构有关，首先需要 yPosition，然后是 xPosition……这与我们都知道和喜爱的标准 (xy) 表示法相反。

# python - 当我在联系 Salesforce 时在 Beatbox API 中将 Id 作为 externalIdFieldName 传递时，upsert 引发错误

> ID：13695322
> 
> 赞同：0
> 
> 时间：2012-12-04T02:48:12.147
> 
> 标签：python, api, salesforce

我正在使用 beatbox API 将数据更新/插入到 salesforce 机会对象中。

当我将 Id 作为 externalIDFieldName 传递时，upsert() 会引发 INVALID FIELD 错误。目前我正在使用另一个唯一的外部 ID，它工作正常，但我想使用 salesforce ID。

请阐明我所缺少的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:28:04.293

如果您已经知道记录的 salesforce Id，只需调用 update 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T18:40:45.043

您可以将“Id”指定为外部键。

[请参阅 REST upsert 文档](http://www.salesforce.com/us/developer/docs/api_rest/Content/resources_sobject_upsert.htm)

如果您需要根据 Id 进行更新插入，请使用 SOAP API。

# java - Jboss AS 7 未部署从 rt.jar(1.6.0_20) 给出 Servlet 异常

> ID：13695323
> 
> 赞同：2
> 
> 时间：2012-12-04T02:48:15.060
> 
> 标签：java, web-applications, deployment, jboss, jboss7.x

```
17:34:55,756 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."Hello.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."Hello.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "Hello.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_20]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_20]
Caused by: java.lang.RuntimeException: Error getting reflective information for class com.infotech.hello.web.util.CacheApplicationData with ClassLoader ModuleClassLoader for Module "deployment.Hello.war:main" from Service Module Loader
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.metadata.MethodAnnotationAggregator.runtimeAnnotationInformation(MethodAnnotationAggregator.java:58)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.handleAnnotations(InterceptorAnnotationProcessor.java:85)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:70)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:55)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: java.lang.NoClassDefFoundError: ServletException
    at java.lang.Class.getDeclaredMethods0(Native Method) [rt.jar:1.6.0_20]
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [rt.jar:1.6.0_20]
    at java.lang.Class.getDeclaredMethods(Class.java:1791) [rt.jar:1.6.0_20]
    at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:65) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 10 more
Caused by: java.lang.ClassNotFoundException: ServletException from [Module "deployment.Hello.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 15 more 
```

我不明白这个错误的原因“原因**：java.lang.NoClassDefFoundError: ServletException at java.lang.Class.getDeclaredMethods0(Native Method) [rt.jar:1.6.0_20]** ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:18:43.180

我已经解决了这个错误。我的工作区中存在重复的 servlet api jar。我删除了它们并且 servlet 异常消失了。

感谢您的支持:)

# asp-classic - 如何将访问数据库和基于 asp 的网站转换为 wordpress 或 joomla

> ID：13695326
> 
> 赞同：1
> 
> 时间：2012-12-04T02:48:36.763
> 
> 标签：asp-classic

我的客户有一个用 ASP 设计的旧网站，但该网站没有启动并且位于主网站的子文件夹中。客户希望将此站点及其数据库转换为 wordpress。这可能吗？如果是，最简单的方法是什么？

请注意，由于该网站尚未启动，因此丢失 SEO 没有问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:47:08.027

这是一项过于复杂的任务，无法“轻松”转换。你必须做一些步骤：1）安装wordpress；2) 找到并安装一个与网站当前外观非常匹配的 wordpress 主题；3) 将主题中使用的图片上传到主题文件夹，并根据需要修改主题文件以与当前站点设计完全匹配。4）创建页面和/或帖子以复制当前站点上每个页面的内容（上传任何所需的图像/媒体文件并安装任何所需的插件以正确处理页面内容）。5) 测试网站并解决任何问题。

这些是基础。根据站点和页面设计的复杂程度，它可能会非常复杂。

# c# - 如何发布/更新 winforms 项目而不是在数据库中删除表

> ID：13695327
> 
> 赞同：1
> 
> 时间：2012-12-04T02:49:05.360
> 
> 标签：c#, sql-server, winforms, clickonce, visual-studio-express

我有一个带有 mssql 数据库的 winforms 项目，该数据库存储用户创建的数据，全部在 Visual Studio C# 2010 中创建。我能够发布项目并在本地计算机上单击一次进行部署。该应用程序会自动更新并且运行良好。当我安装较新版本时，它会删除数据库中的所有表数据。我目前在发布时部署的数据库中没有任何数据，但如果将来需要，我想这样做。

有没有办法在视觉工作室中改变这种行为？如果不是，我该如何阻止数据库在更新时删除所有用户数据？

我之前问过这个问题，但是用户认为这是非建设性的。一位用户表示“这看起来更像是设置的问题，它只是覆盖了数据库，与 C# 或 Visual Studio 无关”

有人可以详细说明这个用户的 SETUP 是什么意思吗？

我认为这将是一个非常有建设性的问题，因为这是自动更新 winforms 应用程序的一个非常重要的部分。我已经搜索过，但似乎无法为这个问题使用正确的词。如果这对本网站没有建设性或相关性，至少有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:55:19.557

我认为以前的用户是对的。如果我正确理解您的问题，那么它与版本控制和部署策略有关，而不是 VS 或 C#。

您可以在您的应用程序中构建功能，以检查加载时应用程序的版本以及数据库是否已经存在，然后决定从那里做什么。

一种解决方案可能是使用 SQL 脚本进行部署，这些脚本根据您正在部署的版本或数据库是否存在于之前更新数据库，而不是简单地覆盖它

[可能的答案](https://stackoverflow.com/questions/504909/database-deployment-strategies-sql-server)

[部署策略](http://justatheory.com/computers/databases/simple-sql-change-management.html)

[另一种部署策略](http://blog.andrewrivers.co.uk/2009/07/sql-deployment-strategies.html)esp 策略 #3 - 使用可重新运行的脚本

**编辑**我认为您的问题与您是使用调试还是发布部署无关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:34:35.700

您说在 Visual Studio 中运行应用程序时会发生这种情况。我的猜测是数据库（包含在 VS 项目中）的复制属性设置为“始终复制”。这意味着它会在您构建时将数据库复制到 \bin\ 文件夹，并针对新副本运行。

当您发布时，ClickOnce 会将该数据库放在 ApplicationData 文件夹中。然后，当您发布更新时，它会将数据库向前复制到新版本中的 ApplicationData 文件夹。老实说，我从来不喜欢这样——如果你的用户卸载了应用程序，所有的数据都会丢失。我推荐[这种方法](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/)，它向您展示了如何通过将数据复制到用户配置文件下的 ApplicationData 来更好地控制这种情况。如果您在 VS 中运行该应用程序，这也将起作用，因为它会将其复制到您的配置文件中，然后重复使用同一个数据库。

# sql - oracle 如何删除列名中的空白字符？（或限制他们？）

> ID：13695328
> 
> 赞同：0
> 
> 时间：2012-12-04T02:49:10.137
> 
> 标签：sql, database, oracle, sqlplus

我正在做我的家庭作业，其中涉及为 oracle 编写 sql 代码（我相信版本 11）。

所以我写了正确的选择语句，但格式是不可读的。

我只是不知道如何将空格降低到最长的名称，或者限制绘制的字符数量。

```
ORDER_ID CUSTOMER_ID CUSTOMER_NAME
---------- ----------- ----------------------------------------
CUSTOMER_ADDRESS
--------------------------------------------------------------------------------

CUSTOMER_CITY                  CU
------------------------------ --
       103          81 Sharon's Thrift Shop
5122 Alvin Heights
Austin                         TX

       104          81 Sharon's Thrift Shop 
```

ETC

我理解它，因为我的 VarChar2 很长，但这就是他想要的。（好吧，他说增加了足够的增长空间）

我发现了 set pagessize 和 set lin 之类的东西，我确实让它看起来不错，但是它根本没有绘制列名，或者使它太短并且没有帮助

设置林 20; 回来

```
ORDER_ID
----------
CUSTOMER_ID
-----------
CUSTOMER_NAME
--------------------
CUSTOMER_ADDRESS
--------------------
CUSTOMER_CITY
--------------------
CU
--
        39
         33
Widget Resellers, In
c.
743 Evergreen Terrac
e
Springfield
MO 
```

我不是 100% 确定要搜索什么，而且大多数都与我的问题无关。我对 oracle sql（以及一般的 sql）非常陌生。我认为这很常见，我认为有一个简单的灵魂，但我找不到它。有什么帮助吗？

如果它相关我的选择语句是

```
SELECT orders.order_id, customers* FROM orders,customers; 
```

与任何家庭作业一样，我想了解问题（和灵魂），我不想要答案。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T03:10:17.633

如果您的所有问题都是关于在 sql*plus 中格式化正确的输出，那么它将是

```
column order_id format a8 
column customer_address format a15 
```

等等

[http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm#i1081036](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm#i1081036)

[http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12013.htm#BACHCABF](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12013.htm#BACHCABF)

# java - 同步后Java并发修改异常

> ID：13695331
> 
> 赞同：1
> 
> 时间：2012-12-04T02:49:24.283
> 
> 标签：java, iterator, linked-list, synchronized

我有一个我试图迭代的对象的 LinkedList（使用迭代器），看看它们是否有任何冲突，如果有，请将其从列表中删除。但是，我收到了一个并发修改异常。我把它放在一个同步块中，我还尝试在 try catch 块中捕获错误，似乎都没有帮助，代码在这里：

```
private void updateTP() {
    synchronized (toiletpaper) {
        Iterator<ToiletPaper> iter = toiletpaper.iterator();
        while (iter.hasNext()) {
            ToiletPaper tp = iter.next();
            tp.update(1000, 700);
            if (toilet.overlaps(tp)) {
                System.out.println("tp splash!");
                toiletpaper.remove(tp);
                menu.removeLife();
            }
        }
    }
} 
```

对此问题的任何想法将不胜感激，我浏览了这里和谷歌，他们都说要么捕获异常要么同步它，这似乎都不起作用所以......请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:52:20.497

为避免异常，请[`iter.remove()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)改用。这将通过迭代器实例删除元素，而不是当前调用，后者分别从列表中搜索和删除 - 即并发修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T02:52:33.007

它引发异常，因为您直接使用`toiletpaper.remove(tp);`. 您必须`iter.remove()`在迭代集合时使用它来修改集合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T02:52:44.560

当您这样做时，`toiletpaper.remove(tp)`您会修改您的链接列表（重新链接它），因此您会收到该错误；您的迭代器不再有效。

# knockout.js - 结合 MVVM 和移动 UI 框架与 Breeze 一起使用

> ID：13695333
> 
> 赞同：4
> 
> 时间：2012-12-04T02:49:33.130
> 
> 标签：knockout.js, angularjs, kendo-ui, breeze, knockout-mvvm

我已经使用 Breeze/knockout 组合有一段时间了，总体上非常满意。Twitter Bootstrap 在试验时是一个合适的 UI 占位符，但现在是时候专注于 UI（移动网络应用程序）了，我遇到了一个让我在其他地方寻找的问题（也就是说，除了淘汰赛）。我在淘汰赛中遇到的问题与无法/难以集成现有的 UI 组件/小部件有关。

问题是大多数这些小部件/框架/库（如 jquery mobile）操纵 DOM 以完成它们正在做的事情。这与 Knockout 冲突。

所以我转向了 Angular（我更喜欢它的绑定语法），我再次开始了我的探索。嗯...同样的问题。尽管有人编写了 Angular/Jquery Mobile 适配器，但我不愿意依赖它与新版本的 jquery mobile 保持同步。此外，我使用 jquery mobile 的次数越多，我就越不喜欢它。它似乎更适合移动网站而不是网络应用程序，我发现自己想要更换它的导航路由器等等。有趣的是，与此同时（就在几天前），我注意到最新版本的 Breeze 中的 Angular ToDo 演示。

Angular Breeze 演示让我想到我应该尝试 Breeze 与 Kendo UI，我并不特别关心它的 MVVM 实现，但它的 UI 非常精致。由于没有官方支持，我没有花太多时间在这上面，毫不奇怪，我遇到了问题。

所以，我的问题：

Breeze 会与 Kendo UI MVVM 一起使用吗？如果是，我们谈论的是几天、几周还是几个月？如果没有，关于如何解决实际问题的任何想法可以总结如下：

```
toolsToRapidlyDevelopProfessionalWebApp = [Breeze, MVVM, UI] 
```

`Breeze`: 我知道没有其他方法可以解决上述问题。

`MVVM`：哪种实现将与 Breeze 和可靠的 UI 库（在我的情况下为移动设备）一起使用？

`UI`：哪个专业质量的 UI 库可以与 MVVM 实现一起使用，也可以与 Breeze 一起使用？

顺便说一句，在我寻求答案的过程中，我遇到了以下问题：

[http://feedback.kendoui.c​​om/forums/127393-kendo-ui-feedback/suggestions/3247342-integrate-with-breeze-js](http://feedback.kendoui.com/forums/127393-kendo-ui-feedback/suggestions/3247342-integrate-with-breeze-js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:27:32.907

是的，Breeze 的路线图上有 KendoUI 支持。[正如您在链接中的 Kendo 反馈页面](http://feedback.kendoui.com/forums/127393-kendo-ui-feedback/suggestions/3247342-integrate-with-breeze-js)上看到的那样，我们两家公司正在联系并对此有共同兴趣。

编辑：Telerik 在此处评论 Breeze 并显示与 KendoUI 的初始集成代码： [https ://gist.github.com/derickbailey/258716b0107f9067616a](https://gist.github.com/derickbailey/258716b0107f9067616a)

编辑 2：KendoUI 的 BreezeDataSource 的完整版本现在正在运行： [http ://www.kendoui.c​​om/blogs/teamblog/posts/13-02-21/breeze_js_and_the_kendo_ui_datasource.aspx](http://www.kendoui.com/blogs/teamblog/posts/13-02-21/breeze_js_and_the_kendo_ui_datasource.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:30:26.457

我知道这不是在回答你关于微风/剑道/用户界面的问题，但我想指出一些关于 Angular 的事情，可能还有 Knockout，这可能会帮助你找到答案。

您可以使用 Angular 操作 DOM……我的意思是，这就是 Angular 所做的一切。但你只需要在正确的地方做：指令。您看到的那些连接器库只是实现了从 Angular 连接到 DOM 的指令。您不需要为它们依赖第三方，而且它们易于维护。

不要想太多，其实很简单。指令只是一个“链接”函数，基本上可以完成你的 DOM 工作。它真的很容易使用。

```
angular.diretive("something", function(){
   return {
       restrict: 'EACM', //just tells angular where this can be used
       link: function(scope, element, attrs){ 
           //do DOM stuff here, element works with jQuery if included
           element.someJqueryPlugin();
       }
   }
} 
```

现在，您可以在代码中的任何地方说`<something>`，或者`<div something>`您的指令被调用并正确链接。你甚至可以使用模板、控制器和依赖注入。

# c++ - C ++ dll变量到vb.net exe

> ID：13695339
> 
> 赞同：2
> 
> 时间：2012-12-04T02:50:08.047
> 
> 标签：c++, vb.net, dll, managed

我有一个应用程序，它调用并将参数传递给 C++ dll。我还有一个用 vb.net 编写的单独的可执行文件，我想将 c++ dll 中的参数传递给 vb.net 可执行文件。我已经阅读了很多关于此的内容，但无法弄清楚实现这一目标的最佳方法是什么。

我不一定需要特定的代码，只需朝正确的方向轻推就会有所帮助。

这是 c++ dll，我想要我的 vb.net 应用程序中的状态结构。

```
#include "user.h"
#include <windows.h>
#include <atlstr.h>
#include <conio.h>

/////////////////////////////////////
//card macros
#define RANK(c)         ((c>>4)&0x0f)
#define SUIT(c)         ((c>>0)&0x0f)
#define ISCARDBACK(c)   (c==0xff)
#define ISUNKNOWN(c)    (c==0)
/////////////////////////////////////

////////////////////////////////////
//consecutive states
holdem_state    m_holdem_state[256];
unsigned char   m_ndx;
////////////////////////////////////

p_getsym_t p_get_symbol;

double getsym( int chair, const char* name, bool& iserr ) 
{
   return (*p_get_symbol)(chair,name,iserr);
}

double getsym( const char* name ) 
{
   bool iserr;
   int mychair = (int) getsym(0,"userchair",iserr);
   return getsym(mychair,name,iserr);
}

double process_query( const char* pquery ) 
{
    if (pquery==NULL)
        return 0;

    if (strncmp(pquery,"dll$test",8)==0)
        return getsym("random");

    if (strncmp(pquery,"dll$spend",9)==0)
        return getsym("f$spend");

    if (strncmp(pquery,"dll$recurse",11)==0)
        return getsym("dll$mynumber");

    if (strncmp(pquery,"dll$mynumber",12)==0)
        return 12345.67;

    if (strncmp(pquery,"dll$complex",11)==0)
        return getsym("f$spend/25 * 1.1");

    return 0;
}

double process_state( holdem_state* pstate ) 
{
    if (pstate!=NULL) { m_holdem_state[ (++m_ndx)&0xff ] = *pstate; }

    _cprintf("state: %d\n", m_ndx&0xff);

    return 0;
}

/////////////////////////////////////////////////////
// user.dll entry point
/////////////////////////////////////////////////////
USERDLL_API double process_message (const char* pmessage, const void* param) 
{
    if (pmessage==NULL) { return 0; }
    if (param==NULL) { return 0; }

    if (strcmp(pmessage,"state")==0) 
    { 
        holdem_state *state = (holdem_state*) param;
//      CString s; 
//      s.Format("<%s>\nPOTS: %.2f %.2f %.2f %.2f %.2f %.2f %.2f %.2f %.2f %.2f\nCOMMON: %d %d %d %d %d\n%d %d %d\n<%s> %d %.2f %d", 
//          state->m_title,
//          state->m_pot[0], state->m_pot[1], state->m_pot[2], state->m_pot[3], state->m_pot[4], 
//          state->m_pot[5], state->m_pot[6], state->m_pot[7], state->m_pot[8], state->m_pot[9],
//          state->m_cards[0], state->m_cards[1], state->m_cards[2], state->m_cards[3], state->m_cards[4],
//          state->m_is_playing, state->m_is_posting, state->m_dealer_chair,
//          state->m_player[4].m_name, state->m_player[4].m_name_known, state->m_player[4].m_balance, state->m_player[4].m_balance_known);
//      MessageBox(NULL, s, "state", MB_OK);

        return process_state( (holdem_state*)param ); 
    }

    if (strcmp(pmessage,"query")==0) 
    { 
//      MessageBox(NULL, (LPCSTR) param, "query", MB_OK);
        return process_query( (const char*)param ); 
    }

    if (strcmp(pmessage,"pfgws")==0) 
    {   
//      MessageBox(NULL, "pfgws", "MESSAGE", MB_OK);
        p_get_symbol = (p_getsym_t)param;
        return 0;
    }

    if (strcmp(pmessage,"event")==0 && strcmp((const char *) param, "load")==0) 
    { 
//      MessageBox(NULL, "event-load", "MESSAGE", MB_OK);
    }

    if (strcmp(pmessage,"event")==0 && strcmp((const char *) param, "unload")==0) 
    { 
//      MessageBox(NULL, "event-unload", "MESSAGE", MB_OK);
    }

    return 0;
}
/////////////////////////////////////////////////////

BOOL APIENTRY DllMain(HANDLE hModule, DWORD ul_reason_for_call, LPVOID lpReserved) 
{
    switch (ul_reason_for_call) 
    {
        case DLL_PROCESS_ATTACH:
            AllocConsole();
            break;
        case DLL_THREAD_ATTACH:
            break;
        case DLL_THREAD_DETACH:
            break;
        case DLL_PROCESS_DETACH:
            FreeConsole();
            break;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:12:08.540

```
extern "C" __declspec(dllexport) holdem_state* getHoldemState() { return &m_holdem_state; } 
```

换句话说，您不能直接共享结构。您需要生成一个将返回该值的导出。

# php - Mysqli 从两个不同的表中获取信息

> ID：13695340
> 
> 赞同：1
> 
> 时间：2012-12-04T02:50:08.887
> 
> 标签：php, database, mysqli

我有两个不同的表，一个包含评论，另一个用户信息我的第一个 mysqli_prepare 语句看起来像这样

```
 if($stmt = mysqli_prepare($mysqli, "SELECT text,username,id,likes,dislikes FROM post WHERE school = '$sname' ORDER BY id DESC LIMIT 0,10")) 
```

另一个看起来像这样

```
 if($stmts = mysqli_prepare($mysqli, "SELECT avatar FROM users WHERE username = '$user'")) 
```

基本上我需要结合这两个语句，以便我可以在同一个 while 循环中访问这两个集合，看起来像这样

```
 while(mysqli_stmt_fetch($stmt)) 
```

任何帮助表示感谢提前谢谢你，我会投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:05:14.410

公共字段用户名的 JOIN 操作

```
SELECT post.text,post.username,post.id,post.likes,post.dislikes FROM post 
INNER JOIN users 
ON post.username = users.username
WHERE post.school = '$sname' 
AND users.username = '$user'
ORDER BY post.id DESC LIMIT 0,10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:54:39.413

要使用 SQL 执行此操作，您需要使用[`JOIN`](http://www.tizag.com/mysqlTutorial/mysqljoins.php).

做一些假设，下面是一个例子：

```
SELECT ... FROM post JOIN users ON post.username = users.username WHERE ... 
```

**注意：**另一种方法是将`SELECT`数据分开（如您所愿）并将数据与 PHP*拼接在一起。*有时这比复杂的`JOIN`. 但是，您所拥有的似乎还不错。

# android - 将 LED 切换到 TORCH 模式时会出现什么错误？

> ID：13695341
> 
> 赞同：5
> 
> 时间：2012-12-04T02:50:14.597
> 
> 标签：android, camera

我正在尝试让我的应用打开 LED。每当我运行此代码时，它都会崩溃。应用程序关闭并给出运行时异常：致命异常，java.lang.nullpointerexception。

```
 Camera cam = Camera.open();     
    cam.getParameters().setFlashMode(Parameters.FLASH_MODE_TORCH);
    cam.setParameters(cam.getParameters()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:33:26.457

好吧，首先你的代码即使没有崩溃也不会工作，因为你需要这样的东西：

```
Parameters params = cam.getParameters().setFlashMode(Parameters.FLASH_MODE_TORCH);
cam.setParameters(params); 
```

但是，这并不能解决您的崩溃问题；相反，根据这样的帖子，打开手电筒模式似乎不是一项简单的任务：

*   [在 Android 中使用相机手电筒](https://stackoverflow.com/questions/5503480/use-camera-flashlight-in-android)

在答案中，[这个](https://stackoverflow.com/a/12535804/1270789)似乎涵盖了大多数选项。

# css - 具有绝对定位覆盖的 div 下一个

> ID：13695344
> 
> 赞同：1
> 
> 时间：2012-12-04T02:50:44.533
> 
> 标签：css, position, absolute, overwrite

我有一系列 div，每个 div 有两个跨度。第二个跨度绝对定位为列对齐。问题是如果第二个跨度中的文本足够长以强制第二行，则该行会覆盖序列中的下一个 div。

你可以在[jsfiddle看到它](http://jsfiddle.net/jalexander_ca/swuZ3/1/)

这是一些代码：

```
<code><div id='container'>
<div class='solodiv'><span class='cvyear' >2011</span><span class='cvtext'>
    <em>Item 1</em>Text that's long enough to force a second line which overwrites the next line</span></div>
<div class='solodiv'><span class='cvyear'>2010</span><span class='cvtext'>
    <em>Item 2</em> Item 2 text, shorter</span></div>
<div class='solodiv'><span class='cvyear'>2008 - 2009</span><span class='cvtext'>
    <em>Item 3</em> Item 3 text, one line only</span></div> 
```

和.css：

```
#container {
font-family:sans-serif;
position:absolute;
left:10px;
top:10px;
width:600px,
}
.cvtext {
position:absolute;
left:120px;
width:480px;
} 
```

我知道有很多类似的主题，但我找不到解决方案，除了使用表格。我一定要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:22:07.260

我希望这不是太草率的答案，我可能会遗漏一些东西，但在我看来，你可以设置`.cvyear`和`.cvtext`不`display: table-cell`使用实际的表。这会将您的跨度视为表格单元格。

这是我的[小提琴](http://jsfiddle.net/swuZ3/4/)。

和CSS：

```
#container {
  font-family: sans-serif;
  position: absolute;
  left: 10px;
  top: 10px;
  width: 600px,
}

.cvyear {
  display: table-cell;
  width: 120px;
}

.cvtext {
  display: table-cell;
  width: 480px;
} 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:20:38.537

将您的 CSS 更改为以下内容：

```
#container {
font-family:sans-serif;
position:absolute;
left:10px;
top:10px;
width:600px;
}

.cvtext {
float: left;
width: 480px;
}

.cvyear {
float: left;
width: 120px;
} 
```

[这](http://jsfiddle.net/swuZ3/3/)是一个修改后的 Fiddle，它演示了这个工作。

# python - 单击 btn 打开一个新页面，其中有一个链接

> ID：13695347
> 
> 赞同：0
> 
> 时间：2012-12-04T02:51:52.213
> 
> 标签：python, django, google-app-engine, jinja2

我目前正在研究 Google 应用引擎和 Kay 框架（基于 Django 和 Jinja2 创建）。

这是我的应用程序-> [http://cayotkanawa.appspot.com/display](http://cayotkanawa.appspot.com/display) 您可以看到最后一列中有一些链接。我想用按钮替换它们。如果我单击一个按钮，将打开一个新页面，并且该页面中有链接和信息。

这是html文件的代码。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Top Page - myapp</title>
</head>
<body>

    {% if displaygolf %}
  <div id="displaygolf">
      <table border="1">
          <tr>
              <td>No</td>
              <td>ゴフル場名&lt;/td>
              <td>名義変換料&lt;/td>
              <td>URL</td>
          </tr>
          {% for golfelement in displaygolf %}
          <tr>
              <td></td>
              <td>{{ golfelement.golfname }}</td>
              <td>{{ golfelement.changenamefee }}</td>
              <td>
                  <a href="{{golfelement.url_1net}}">1net | </a> 
                  <a href={{golfelement.url_golfagora}}>Golfagora | </a> 
                  <a href={{golfelement.url_juchi}}>Juchi</a> 

              </td>

          </tr>
          {% endfor %}
      </table>

  </div>
    {% endif %}

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:09:30.933

将按钮元素用作链接的一种快速而肮脏的方法是：

```
<form action="http://example.org" method="GET">
       <button>Link</button>
</form> 
```

这可以验证，但我认为这不是您正在寻找的一个非常好的解决方案。相反，我建议考虑使用 CSS 来设置`<a>`标签的样式，使其看起来像按钮。

[您可以在 Twitter Bootstrap 框架部分的按钮](http://twitter.github.com/bootstrap/base-css.html#buttons)上看到一个示例。它们的样式`<a>`和`<button>`标签看起来相同，如果您要使用 Bootstrap，您所要做的就是将 CSS 类应用于您的链接：

```
<a href="{{golfelement.url_1net}}" class="btn">1net | </a> 
<a href={{golfelement.url_golfagora}} class="btn">Golfagora | </a> 
<a href={{golfelement.url_juchi}} class="btn">Juchi</a> 
```

如果您要创建自己的 CSS 类或使用其他框架，这个概念是相同的。

这个问题实际上与 HTML 和 CSS 有关，它与您使用的其他技术无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:58:54.273

这里与 Django 无关。将链接标签设置为 target="_blank"

```
<a href="{{golfelement.url_1net}}" target="_blank" >1net | </a> 
<a href={{golfelement.url_golfagora}} target="_blank" >Golfagora | </a> 
<a href={{golfelement.url_juchi}} target="_blank" >Juchi</a> 
```

# ios - 在 iOS 状态下的应用内购买问题

> ID：13695353
> 
> 赞同：0
> 
> 时间：2012-12-04T02:52:24.630
> 
> 标签：ios, in-app-purchase

我可以在应用程序购买处于“准备提交”状态时进行测试吗？我通过代码从 iTunes 获取产品。

我已经调用了这个`SKPayment *payment = [SKPayment paymentWithProduct:product];`

但我仍然没有任何回调响应（失败、恢复、完成）。也许它与应用内购买的状态有关。

# php - PHP 中 PBKDF2 的安全性

> ID：13695359
> 
> 赞同：0
> 
> 时间：2012-12-04T02:53:07.657
> 
> 标签：php, security, encryption, pbkdf2

所以我在数据库中存储了一些敏感数据（除其他外还有一些密码），我目前正在使用这个： [https ://github.com/P54l0m5h1k/PBKDF2-implementation-PHP](https://github.com/P54l0m5h1k/PBKDF2-implementation-PHP)

简而言之，它允许我使用密钥加密和解密数据。

例如，使用的密钥未与敏感数据存储在同一台服务器上。如果黑客以某种方式访问​​我的表并查看加密数据，是否有可能在没有密钥的情况下解密其中的任何一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:29:43.123

`PBKDF2`不是加密算法，它代表**Password-Based Key Derivation Function 2**。所以它只允许您根据密码生成安全密钥。所以这取决于您使用的加密算法。它可以是[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)也可以是[3DES](http://en.wikipedia.org/wiki/3DES)。而且，如果您使用任何公知和批准的加密算法，那么这些算法对于此类攻击都是安全的。这就是加密的重点，攻击者需要密钥或密码来破译它。

# mongodb - 如何使用 OR 条件编写 yii mongodb 查询？

> ID：13695362
> 
> 赞同：0
> 
> 时间：2012-12-04T02:53:41.283
> 
> 标签：mongodb

如何在 yii mongodb 中使用`OR`条件编写查询。例如，在 SQL 中，我们可以编写如下查询

```
select * from tablename where fieldname = value1 or fieldname1 = value1 
```

我如何在 yii mongodb 中写这个，因为我必须检查 mongodb 集合的两个字段中是否有特定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:04:33.460

假设您使用的是 YiiMongoDBSuite (YMDS)，缺乏`$or`支持被认为是[该扩展的当前限制](http://www.yiiframework.com/extension/yiimongodbsuite/#hh5)：

> 在当前的化身中，此扩展不适用于“$or”标准运算符。当我们让它工作时，我们将删除这一行并添加一个示例。

不幸的是，YMDS 扩展没有得到积极维护，并且不支持 MongoDB 查询语言中可用的全部功能。

推荐的替代方法是使用官方支持的[MongoDB PHP 驱动程序](http://php.net/manual/en/book.mongo.php)：

```
<?php
    $cursor = $collection->find(
        array(
            '$or' => array(
                "fieldname" => "value1",
                "fieldname1" => "value2"
            )
        )
    );
?> 
```

# php - what is wrong with my curl to romaji.org?

> ID：13695363
> 
> 赞同：1
> 
> 时间：2012-12-04T02:53:59.380
> 
> 标签：php, curl

charset set on the page to curl is Shift_JIS and lang set to jp

```
 function jp_new ($jp_text) 
{
// Begin Curl
$session = curl_init();
//$url1 = "http://nihongo.j-talk.com/index.php";
$url1 = "http://www.romaji.org/index.php";
$parameters = '&text='.urlencode($jp_text).'&save=convert+text+to+Romaji';
$header = array(
"Accept-Language: jp",
"Accept-Charset: Shift_JIS");
// $header[] = "Accept-Language: ja"; 
//$parameters = 'kanji='.urlencode($jp_text).'&converter=spaced&Submit=Translate+Now';
curl_setopt($session, CURLOPT_HTTPHEADER, $header); 
curl_setopt($session, CURLOPT_POSTFIELDS, $parameters);
curl_setopt($session, CURLOPT_CONNECTTIMEOUT, 5);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
curl_setopt($session, CURLOPT_POST, true);
curl_setopt($session, CURLOPT_URL, $url1);
$jp_page = curl_exec($session); 
curl_close($session);

//$pattern = "/romaji'>(.+?)</s";
$pattern = "/color=\"red\">(.+?)</s";
preg_match_all ($pattern, $jp_page, $result_ro);
return $result_ro[1];

} 
```

i get a result but its messed up and not the same result i would get if i submited the form from romaji.com manually. result i get when jptext = "犬猫"　is "kou (kigou)(kigou) shin i"

im sure the preg match only will find one match and its finding it in the right place. but it seems like some sort of encoding problem, but idk really.

a similar curl worked for "http://nihongo.j-talk.com/index.php" (the commented out variables) but it seems they have banned me so i need to adapt it to work for this new url romaji.org

UPDATE: the charset on the romaji.org page is Shift_JIS, and my page is UTF-8 so i tried adding the curlopt header to the curl as in the code example now, the result in the output differed little, one of the words in brackets was removed, result is still messed up.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:53:20.427

If you get different results from browser to script, your aim is to simulate the same data send by the browser. What usually differs are the "headers", including cookies.

**Part 1: trapping the headers**

1.  You can use the netwrok monitoring tools of various browsers (press F12 in Chrome / IE, or install Firebug and find the network monitors). Start logging and check the requests sent. Specifically, look for the headers.
2.  You may find this easier with "[Fiddler](http://www.fiddler2.com/)"
3.  Check for any headers, and any cookies send with the request. If a cookie, you may need to go backwards and work out how hte cookie got there, but for now, you cna hard code it.

**Part 2: sending headers**

In you case, it's probably the "Accept-Charset" and "Accept-Language" headers. You can speify these with

```
$headers = array(
    "Accept-Language: en-us",
    "Accept-Charset: utf-8");
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); 
```

If you need other headers, add to the array. If you need cookies, [follow the documentation](http://php.net/manual/en/function.curl-setopt.php) or google other examples.

NOTE: I notice that you also set "POSTFIELDS" but don' actually specify you're sending a POST. Add the following if you want to send as a POST:

```
curl_setopt($ch, CURLOPT_POST, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:45:25.373

A Simple Conversion would do the trick

```
$jp_text = iconv('UTF-8','Shift_JIS' , $jp_text); 
```

Or

```
$jp_text = mb_convert_encoding($jp_text, "Shift_JIS", "UTF-8"); 
```

If you run

```
header('Content-Type: text/html; charset=utf-8');
$str = "犬猫";
var_dump(jp_new($str)); 
```

Output

```
array (size=1)
  0 => string 'inuneko' (length=7) 
```

[Online Demo](http://codepad.viper-7.com/1xPt5X)

Modified Function

```
header('Content-Type: text/html; charset=utf-8');
$str = "犬猫";
var_dump(jp_new($str));

function jp_new($jp_text) {
    $session = curl_init();
    $url1 = "http://www.romaji.org/index.php";
    //$jp_text = iconv('UTF-8','Shift_JIS' , $jp_text);
    $jp_text = mb_convert_encoding($jp_text, "Shift_JIS", "UTF-8");
    $parameters = '&text=' . urlencode($jp_text) . '&save=convert+text+to+Romaji';
    $header = array(
            "Accept-Language: en-US,en;q=0.8",
            "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3",
            "Referer: http://www.romaji.org/index.php",
            "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11");
    curl_setopt($session, CURLOPT_HTTPHEADER, $header);
    curl_setopt($session, CURLOPT_POSTFIELDS, $parameters);
    curl_setopt($session, CURLOPT_CONNECTTIMEOUT, 5);
    curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($session, CURLOPT_POST, true);
    curl_setopt($session, CURLOPT_URL, $url1);
    $jp_page = curl_exec($session);
    curl_close($session);

    // $pattern = "/romaji'>(.+?)</s";
    $pattern = "/color=\"red\">(.+?)</s";
    preg_match_all($pattern, $jp_page, $result_ro);
    return $result_ro[1];
} 
```

# c# - 同时在两个面板中滚动同一张图片

> ID：13695366
> 
> 赞同：0
> 
> 时间：2012-12-04T02:54:38.977
> 
> 标签：c#, .net, scroll, panel, picturebox

目前我有两个面板，它们以编程方式将 PictureBoxes 添加到其中。这些 PictureBoxes 然后有一个悬停事件，它将焦点设置到其包含的面板。这允许用户在他们结束的面板中上下滚动图片。

但是，该 Panel 的 Scroll 事件不会触发，因此第二个 Panel 无法将其滚动更新为（重复）图像中的同一点。

我该如何让这个事件发生？

# java - jmonkey 旋转和平移

> ID：13695369
> 
> 赞同：4
> 
> 时间：2012-12-04T02:55:15.027
> 
> 标签：java, rotation, jmonkeyengine

我在 JME (JMonkey) 中遇到旋转然后翻译两个框的问题。我搜索了论坛，发现其他语言的一些类似问题，但我不明白答案，这可能是因为我不知道其他语言。我有两个带有 .lookat( [the other box] ) 的盒子，一个旋转，然后是一个本地翻译。在我看来，本地平移应该将盒子朝它所面对的方向移动，但它似乎不是沿着世界轴移动。值得注意的一件事；我对在 3d 中使用矩阵数学一无所知，我发现的一些答案使用矩阵数学来解决问题。我想了解这一点，以便将来避免这个问题。我已将我的代码减少到尽可能小，因此它没有任何不必要的部分。

```
package jme3test.helloworld;
import com.jme3.app.SimpleApplication;
import com.jme3.font.BitmapText;
import com.jme3.material.Material;
import com.jme3.math.Vector3f;
import com.jme3.scene.Geometry;
import com.jme3.scene.shape.Box;
import com.jme3.math.ColorRGBA;
import com.jme3.renderer.RenderManager;
import com.jme3.renderer.ViewPort;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.scene.control.AbstractControl;
import java.util.ResourceBundle.Control;

public class SSF2 extends SimpleApplication {
public Geometry blue = null;
public Geometry red = null;

public static void main(String[] args){
    final SSF2 app = new SSF2();
    app.start();
}

@Override
public void simpleInitApp() {
    // create a blue box at coordinates (1,-1,1)
    Box box1 = new Box( Vector3f.ZERO, 1f,2f,.5f);
    blue =  new Geometry("Box", box1);
    Material mat1 = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
    mat1.setColor("Color", ColorRGBA.Blue);
    blue.setMaterial(mat1);
    blue.move(-5,0,-3);

    // create a red box straight above the blue one at (1,3,1)
    Box box2 = new Box( Vector3f.ZERO, 1f,2f,.5f);
    red = new Geometry("Box", box2);
    Material mat2 = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
    mat2.setColor("Color", ColorRGBA.Red);
    red.setMaterial(mat2);
    red.move(5,0,-3);

    rootNode.attachChild(blue);
    rootNode.attachChild(red);

    blue.lookAt(red.getWorldTranslation(), new Vector3f(0,1,0) );
    red.lookAt(blue.getWorldTranslation(), new Vector3f(0,1,0) );
}

@Override
public void simpleUpdate(float tpf) {
    blue.setLocalTranslation(new Vector3f( (blue.getLocalTranslation().getX() + .02f), (blue.getLocalTranslation().getY())  , (blue.getLocalTranslation().getZ() )));
    red.setLocalTranslation(new Vector3f( (red.getLocalTranslation().getX() + .02f), (red.getLocalTranslation().getY())  , (red.getLocalTranslation().getZ() )));
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:41:11.713

看看这个：

```
@Override
public void simpleUpdate(float tpf) {
    red.rotate(0, 0.001f, 0);

    // For the red (moves in a circle)
    Quaternion rotation = red.getLocalRotation();
    Vector3f front = new Vector3f(0, 0, 0.01f);
    Vector3f heading = rotation.mult(front);
    red.move(heading);

    /// For the blue (follows the red)
    blue.lookAt(red.getWorldTranslation(), Vector3f.UNIT_Y);
    float velocity = 0.01f;
    Vector3f trajectory = red.getWorldTranslation().subtract(blue.getWorldTranslation());
    trajectory = trajectory.normalize();
    Vector3f offset = trajectory.mult(velocity);
    blue.move(offset);
    System.out.print(offset);

} 
```

# mysql - 基于多个条件的mysql外键级联

> ID：13695371
> 
> 赞同：2
> 
> 时间：2012-12-04T02:56:05.200
> 
> 标签：mysql, cascade

说我有以下内容：

```
CREATE TABLE activity_invites(
activity_id int(10),
activity_type varchar(5),
username varchar(50),
status int(1),
FOREIGN KEY(username) REFERENCES users(username) 
      ON DELETE CASCADE ON UPDATE CASCADE
)TYPE=INNODB; 
```

假设使用 event_id = '1' 删除了一个事件（从事件表中删除），我还希望删除此 activity_invites 表中 activity_id = '1' 和 activity_type = 'e' 的任何条目

就像是

```
//somehow reference this only if activity_type = 'e'
FOREIGN KEY(activity_id) REFERENCES events(event_id) 
  ON DELETE CASCADE ON UPDATE CASCADE) 
```

我唯一的选择是为每种类型的邀请创建一个表吗？（一张表用于活动、帖子等。）

# javascript - 使用 JavaScript 查找圆形画布交点

> ID：13695373
> 
> 赞同：1
> 
> 时间：2012-12-04T02:56:19.580
> 
> 标签：javascript, geometry, intersection

我在 a`circle`上画 a `canvas`。我想知道，给定 a 的半径和原点 x/y `circle`，在什么点与边缘`circle`相交（如果有的话） 。`canvas`

这肯定是一个几何问题，但这部分似乎太简单了，无法在其他地方发布。JavaScript 部分完全逃离了我。我什至不完全确定如何开始。

将`canvas`大小不一，但这很容易访问。它的`circle`大小和位置也是动态的，但这些变量很容易获得。任何朝着正确方向的提示或轻推都非常受欢迎。

**附言**

如果有帮助，我正在使用 RaphaelJS 绘制形状。如果有人有画布/现代浏览器的解决方案，我可以自己倒退其余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:12:13.037

使用像[http://www.kevlindev.com/gui/math/intersection/index.htm#Anchor-intersectCircleRectangl-46622这样的 javascript 交集库](http://www.kevlindev.com/gui/math/intersection/index.htm#Anchor-intersectCircleRectangl-46622)

您将定义画布定义的矩形（可能是 0、0、宽度、高度）。

# java - Java PreparedStatement 将 IN 参数设置为 int 数组

> ID：13695375
> 
> 赞同：3
> 
> 时间：2012-12-04T02:56:24.557
> 
> 标签：java, mysql, arrays, jdbc, prepared-statement

> **可能重复：**
> [PreparedStatement IN 子句替代方案？](https://stackoverflow.com/questions/178479/preparedstatement-in-clause-alternatives)

```
SELECT * FROM tableName WHERE id IN ? 
```

我希望将 PreparedStatement 的`IN`参数设置为`int[]`. 例如，查询中`{1, 2, 3, 4}`会变成一个整数数组。`IN (1,2,3,4)`

**是否有一种简单的方法可以使用 PreparedStatement 的方法来实现此功能，或者我必须`IN`通过遍历数组来动态地将参数创建为字符串？**

我想像一个类似的东西，[`#setString(int parameterIndex, String x)`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setString%28int,%20java.lang.String%29)但当然是一个 int 数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:32:40.457

我会推荐 Spring JDBC。看看开始使用它是多么容易：

```
 NamedParameterJdbcTemplate t = new NamedParameterJdbcTemplate(dataSource);
    Map<String, Object> params = new HashMap<String, Object>();
    params.put("ids", Arrays.asList(1, 2));
    List<Map<String, Object>> list = t.queryForList("select * from t1 where id in (:ids)", params); 
```

您将看到 Spring JDBC 的优点不仅在于它。命名参数，无需创建/关闭Connection、PreparedStatement、ResultSet、无检查异常、声明式事务支持等很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:22:08.513

我知道完成此操作的唯一方法是在创建准备好的语句以添加新的 ?s 之前更改查询字符串。然后像往常一样执行绑定。

# objective-c - UIGestureRecognizer 中的 UIView 动画

> ID：13695377
> 
> 赞同：0
> 
> 时间：2012-12-04T02:56:43.270
> 
> 标签：objective-c, uigesturerecognizer, uianimation

我有一个响应点击手势运行几秒钟的动画。在动画运行时，UITapGestureRecognizer 不会响应额外的点击。动画完成后，识别器再次工作。

我试过在里面运行动画

```
dispatch_async(dispatch_get_main_queue(), etc. 
```

但其他水龙头仍然被阻止。如果我尝试在里面运行动画

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), etc. 
```

然后动画根本不显示。我隐约记得在某处读到动画必须在主线程上运行。

关于运行不会阻止后续手势的动画的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:02:41.050

如果您使用 UIView 动画块，则可以使用`+animateWithDuration:delay:options:animations:completion:`该`UIViewAnimationOptionAllowUserInteraction`选项。

此外，您是正确的，必须在主线程上执行动画。

# sql - 如何使用adodb编写sql查询来选择长度超过255个字符的数据

> ID：13695378
> 
> 赞同：3
> 
> 时间：2012-12-04T02:57:03.873
> 
> 标签：sql, vba, excel, adodb

我正在使用 ADODB 连接编写 SQL 语句以在 excel vba 中提取数据。

我的问题是我有一个单元格，其中包含一个长度超过 255 个字符的字符串。

我想知道是否有办法让我继续使用 ADODB 连接来选择超过 255 个字符的数据

这是我使用的功能。

```
Public Function QueryRead(sqlArg As String) As Dictionary

    Dim pConnection As ADODB.Connection
    Set pConnection = New ADODB.Connection

    With pConnection
        .Provider = "Microsoft.Jet.OLEDB.4.0"
        .ConnectionString = "Data Source=" & ActiveWorkbook.FullName & _
        ";Extended Properties=Excel 8.0;"
    '.Provider = "MSDASQL"
    '.ConnectionString = "Driver={Microsoft Excel Driver (*.xls)};" & _
    "DBQ=" & App.Path & "\ExcelSrc.xls; "
        .CursorLocation = adUseClient
        .Open
    End With

    Dim pMap As New ADODB.Recordset

    Dim sql As String
    sql = sqlArg

    Dim resultSet As New Dictionary

    pMap.Open sql, pConnection
    If pMap.RecordCount > 0 Then

        Dim record As Variant

        Dim counter As Integer
        counter = 0

        Do Until pMap.EOF

            Dim resultRecord As Dictionary

            Set resultRecord = New Dictionary

            For Each record In pMap.fields

                resultRecord.Add record.Name, record.value
            Next
            Dim index As String
            index = CStr(counter)
            resultSet.Add index, resultRecord
            counter = counter + 1
            pMap.MoveNext
        Loop

    End If

    pMap.Close
    pConnection.Close

    Set QueryRead = resultSet

End Function 
```

这就是我所说的

```
Set resultSet = model.QueryRead("SELECT * FROM [Database$] WHERE [Level] = 2 AND [Item_No] = '" & itemNo & "'") 
```

我的工作表名为 Database，它有 Level 和 Item_No 等列。

公式列下的单元格之一的字符串长度超过 255 个字符。

请指教。

**更新**

我想强调

a) 提取的单个字段数据超过了 255 个字符的限制。意思是说，“SELECT * FROM”中的*

b) 不是我的输入参数超过 255 个字符

c) 不是我的查询字符串超过 255 个字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:30:34.793

当您使用 Excel 2003 和更早版本的连接字符串时，此[Microsoft 支持文章](http://support.microsoft.com/kb/189897/EN-US)适用。如果数据的前 8 行中没有任何超过 255 个字符的值，则所有值都将被截断为 255 个字符。

一个简单的解决方法可能是确保工作表上的第一个数据行始终包含超过 255 个字符的值 - 您稍后丢弃的虚拟行或您确保在该行中结束的真实数据值。

您可以将扫描的行数调整为最多 16 行，但这并不能真正解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:48:12.597

我建议您使用`ADODB.Command`数据绑定来克服这个问题并避免意外的 SQL 注入。

您必须修改您的函数才能使用它，所以我只向您展示一个类似演示的示例：

```
Dim cmd AS ADODB.Command
Set cmd = New ADODB.Command
cmd.AcitveConnection = pConnection
cmd.Prepared = True
cmd.CommandText = "SELECT * FROM [Database$] WHERE [Level]=2 AND [Item_No]=?"
cmd.Parameters.Append cmd.CreateParameter("item_no",adVarChar,adParamInput,512,itemNo)

Dim pMap as ADODB.Recordset
Set pMap = New ADODB.RecordSet

pMap.open cmd
If pMap.RecordCount > 0 Then
'do stuffs... 
```

您可以[查看 MSDN 以获取有关`CreateParameter`及其参数的详细信息](http://msdn.microsoft.com/en-us/library/ms677209%28VS.85%29.aspx)

没有用 Excel 表测试过，但我曾经在 Classic-ASP for Oracle 中使用过这个方法几个月，所以它应该对你有用。

这种方法的一个缺点是您不能只将一条 SQL 语句作为函数参数传递。您可能必须接受至少两个参数，一个用于 SQL 语句，另一个（可能是 Dictionary 对象）用于等待绑定数据。

# c# - 如何获取描述基本类型数组的类型？

> ID：13695379
> 
> 赞同：5
> 
> 时间：2012-12-04T02:57:05.150
> 
> 标签：c#, .net, reflection, types

我需要为具有指定数量索引的基本类型的数组创建一个**Type实例。**基本上我需要像下面这样的方法，我可以调用......

```
public Type GetArrayOfType(Type baseType, int numOfIndexes)
{
    return /* magic does here */
} 
```

因此调用该函数将给出以下结果......

```
GetTypeArray(typeof(bool), 1) == typeof(bool[])
GetTypeArray(typeof(bool), 2) == typeof(bool[,])
GetTypeArray(typeof(bool), 3) == typeof(bool[,,]) 
```

我能想出的唯一解决方案是以下...

```
public Type GetArrayOfType(Type baseType, int numOfIndexes)
{
    List<int> indexes = new List<int>();
    for(int i=0; i<numOfIndexes; i++)
        indexes.Add(1);

    return Array.CreateInstance(baseType, indexes.ToArray()).GetType();
} 
```

这确实有效，但必须创建所需类型的实例才能调用**GetType()**似乎并不理想。必须有一种方法可以在不创建实例的情况下生成**类型。**或者有吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T03:02:26.450

你可以这样做：

```
public Type GetArrayOfType(Type baseType, int numOfIndexes) {
    return numOfIndexes == 1 ? baseType.MakeArrayType() : baseType.MakeArrayType(numOfIndexes);
} 
```

有一个小技巧：虽然你可以传递*给*`1`，`MakeArrayType(int)`但它产生的类型与返回的类型不同。这是文档的摘录：*`MakeArrayType`*

 *> 公共语言运行时区分向量（即始终从零开始的一维数组）和多维数组。始终只有一维的向量与恰好只有一维的多维数组不同。您不能使用此方法重载来创建向量类型；如果*`rank`*是`1`，则此方法重载返回恰好具有一维的多维数组类型。使用`MakeArrayType()`方法重载来创建向量类型。*

# android - 如何同时提供居中和相对布局

> ID：13695381
> 
> 赞同：0
> 
> 时间：2012-12-04T02:57:28.850
> 
> 标签：android, android-layout

这是我想要实现的布局。所以我知道如何居中和左右对齐，但是当我与 RelativeLayout 结合时，我没有得到想要的结果。除非添加边距/填充，否则 TextViews 都会向左移动。我有 Left-Right-Center 的正确公式，但是当我想在这些文本旁边放置一些文本时，它不起作用。

```
 <ImageView> <TextView>   <ImageView><TextView>     <ImageView><TextView> 
```

这是我的布局（它只包含一个需要大量边距的文本，因为它位于左侧：

```
 <RelativeLayout android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="horizontal">
    <ImageView android:id="@+id/reply_button" android:src="@drawable/icons_reply"
        android:layout_width="60dp" andorid_layout_alignParentLeft="true" android:layout_height="wrap_content" android:paddingRight="5dp"/>
    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Reply"
     android:layout_alignLeft="@+id/reply_button" android:layout_marginLeft="50dip" android:textSize="12sp"/>
    <ImageView android:id="@+id/resend_button" android:src="@drawable/icons_resend"
        android:layout_width="60dp" android:layout_height="wrap_content" android:layout_centerInParent="true" android:paddingRight="5dp"/>
    <ImageView android:id="@+id/select_button"  android:focusableInTouchMode="false" android:focusable="false" android:layout_alignParentRight="true" android:src="@drawable/select_icon"
        android:layout_width="60dp" android:layout_height="wrap_content" android:paddingRight="5dp"/>
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:09:35.690

您不需要`ImageView`在 each 的左侧`TextView`，只需在您的左侧设置一个可绘制的 left coumpound`TextView`并将它们放在 a 中`LinearLayout`：

```
<LinearLayout
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content"
    <TextView
    ...
    android:drawableLeft="@drawable/yourimage"
    android:drawablePadding="3dp" //optional, if you want some padding
    android:gravity="center_vertical" // to center vertically the text and drawable
    weight="1" // use this in a LinearLayout so they will be 
               // uniformly distributed over the space
    ...
    />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:11:51.697

您应该将它们嵌套在其他相对布局中，并将它们放在一个大的线性布局中。

```
<LinearLayout.....>

<RelativeLayout
android:weight=1>
<image>
<Text>
</RelativeLayout>

<RelativeLayout
android:weight=1
>
<image>
<Text>
</RelativeLayout>

<RelativeLayout
android:weight=1>
<image>
<Text>
</RelativeLayout>

</LinearLayout> 
```

# mysql - ERROR 1247 (42S22): Reference 'VITORIAS' not supported (reference to group function)

> ID：13695382
> 
> 赞同：0
> 
> 时间：2012-12-04T02:57:30.410
> 
> 标签：mysql

我无法创建视图。您可以在下面找到我的代码。有人可以帮助我吗？

```
CREATE VIEW V_Campeonato AS SELECT team.tim_cod_inscri_time
        , SUM( CASE WHEN partida.par_gol_mand > partida.par_gol_visi  THEN 1 ELSE 0 END ) AS VITORIAS
        , SUM( CASE WHEN partida.par_gol_mand = partida.par_gol_visi  THEN 1 ELSE 0 END ) AS EMPATES
        , SUM( CASE WHEN partida.par_gol_mand < partida.par_gol_visi  THEN 1 ELSE 0 END ) AS DERROTAS
FROM team 
INNER JOIN partida 
ON team.tim_cod_inscri_time = partida.par_cod_partida
ORDER BY ( VITORIAS * 3 + EMPATES ) DESC; 
```

> ERROR 1247 (42S22): Reference 'VITORIAS' not supported (reference to group function)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:41:26.783

很难完全理解你在这段代码中的目的。但是，这可能是你所追求的：

```
 SELECT SUM(VITORIAS), SUM(EMPATES), SUM(DERROTAS), tim_cod_inscri_time FROM

    (SELECT
    (CASE WHEN partida.par_gol_mand > partida.par_gol_visi THEN 1 ELSE 0 END ) AS VITORIAS , 
    (CASE WHEN partida.par_gol_mand = partida.par_gol_visi THEN 1 ELSE 0 END ) AS EMPATES , 
    (CASE WHEN partida.par_gol_mand < partida.par_gol_visi THEN 1 ELSE 0 END ) AS DERROTAS
    FROM team INNER JOIN partida ON team.tim_cod_inscri_time = partida.par_cod_partida)
    AS teamrecord
    GROUP BY tim_cod_inscri_time
    ORDER BY ( VITORIAS * 3 + EMPATES ) DESC; 
```

我从`SUM`内表中抽出，分别总结了胜利。另外，我给了子查询一个任意的名字，`teamrecord`. 这就是你想要的吗？

# phalcon - pahlcon-devtools 无法在 fc16 x64 上安装

> ID：13695385
> 
> 赞同：1
> 
> 时间：2012-12-04T02:57:50.830
> 
> 标签：phalcon

我从 github 获得 phalcon devtools

```
$ cd /opt/myworkdir
$ git clone https://github.com/phalcon/phalcon-devtools.git
$ cd phalcon-devtools
$ git checkout -b 0.7.0
$ git pull origin 0.7.0
$  . ./phalcon.sh 
```

显示此错误

Phalcon DevTools (0.7.0 BETA 1)

错误：使用不正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:09:13.437

消息“错误：使用不正确”是正常的，这意味着 devtools 期望执行操作，但没有提供其他命令。

尝试

```
phalcon commands 
```

或者

```
phalcon project blog 
```

# jquery - 如何将可选择的 dynatree 输出作为 JSON？

> ID：13695386
> 
> 赞同：2
> 
> 时间：2012-12-04T02:58:00.937
> 
> 标签：jquery, json, model-view-controller, dynatree

我已经创建了一个可选择的 JQuery Dynatree 对象，现在我想要的是两件事：

1.  将 Dynatree 选择结果传递到 JSON 并传递到另一棵树作为预览。
2.  从表单中发布 JSON 格式的数据以调用相关的 Web 服务。

任何建议将被认真考虑。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:10:54.593

您可以从[文档](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)（以及[示例页面](http://wwwendt.de/tech/dynatree/doc/samples.html)）中轻松看到，您可以使用以下方式获取所有选定节点`getSelectedNodes`：

```
$("#tree").dynatree("getSelectedNodes") 
```

这将为您提供所有选定节点的数组，您可以将其传递给您的 JSON 对象，而不会对其进行篡改，作为 JSON 访问数组。

要使用预览，您可以查看**Drag'n'drop 3**示例。

# javascript - 使用 jQuery Menu Widget 作为弹出菜单

> ID：13695388
> 
> 赞同：0
> 
> 时间：2012-12-04T02:58:07.033
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-menu

我正在尝试在我的 Web 窗体应用程序中使用[jQuery 菜单小部件。](http://jqueryui.com/menu/)

我拼凑了一个简单的演示，它的工作方式与上面链接中的示例完全相同。

但我希望菜单是弹出菜单。当用户点击其他地方时，菜单应该会自动关闭。不幸的是，我在 jQuery UI 站点上找不到任何相关信息。

有人可以指出使用 jQuery Menu Widget 作为弹出菜单的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:15:23.007

我假设您想要一个模式窗口，而不是旧式弹出窗口。为什么不在 CSS 中给菜单 div 一个`display: none;`值，然后有一个脚本让它出现呢？在 Jquery 中，它就像这样简单：

```
$("#your_div").fadeIn("slow"); 
```

其中`your_div`是菜单 div 的 id，“slow”是动画的速度。`.fadeOut()`是调用实现相反的功能（您的菜单消失）。

如果您希望菜单在用户单击其他位置时消失，您可以创建一个与屏幕一样大的透明 div，并确保`.fadeout()`通过单击此不可见 div 触发该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T20:19:35.713

我们组装了一个 jQuery UI 按钮和菜单小部件，为我们提供了一个下拉菜单，请参阅[这个 fiddle](http://jsfiddle.net/philippm/QEC8N/)以获取演示和完整代码。

对于 HTML，您需要一个按钮和一个嵌套列表，例如：

```
<button>Please choose...</button>

<ul class="accounts">
    <li> <a href="#">Bank</a>

        <ul>
            <li><a href="#">Lloyds</a>
            </li>
            <li><a href="#">Barclays</a>
            </li>
        </ul>
    </li>
    <li><a href="#">Cash</a>
    </li>
</ul> 
```

CoffeeScript 设置了一个菜单（最初是隐藏的）和用于切换菜单的按钮：

```
select_account_button = $('button')
accounts_menu = $('.accounts')

# turn the button into a dropdown that shows/hides the menu
select_account_button.button
  icons:
    secondary: "ui-icon-triangle-1-s"
.click ->
  accounts_menu.show().position(
    my: "left top"
    at: "left bottom"
    of: this
  )
  $(document).one "click", ->
    accounts_menu.hide()
  false

# set up the menu (hidden initially)
accounts_menu.hide()
.menu
  select: (event, ui) ->
    console.log "selected" 
```

# python - 如何创建行间差异相等的 Numpy 2d 数组？

> ID：13695390
> 
> 赞同：2
> 
> 时间：2012-12-04T02:58:16.057
> 
> 标签：python, arrays, numpy, multidimensional-array

如何创建一个 (48,64) Numpy 数组，如下所示：

```
i,      i,      i, .....,i
i+0.1,  i+0.1,..........,i+0.1
i+0.2,  i+0.2,..........,i+0.2
.
.
.
.
i+6.3,  i+6.3,..........,i+6.3 
```

0.1 是行之间的固定差异。

我用 JoshAdel 的回答完美解决了这个问题，

但是列之间的固定差异如何？即

```
i,i+0.1,i+0.2.....i+6.3
i,i+0.1,i+0.2.....i+6.3
.
.
.
i,i+0.1,i+0.2.....i+6.3 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:22:58.600

```
import numpy as np
i = 10.0
a = np.empty((64,48))
a.fill(i)
a += np.arange(0,6.4,0.1)[:,np.newaxis]

Out[12]: 
array([[ 10\. ,  10\. ,  10\. , ...,  10\. ,  10\. ,  10\. ],
       [ 10.1,  10.1,  10.1, ...,  10.1,  10.1,  10.1],
       [ 10.2,  10.2,  10.2, ...,  10.2,  10.2,  10.2],
       ..., 
       [ 16.1,  16.1,  16.1, ...,  16.1,  16.1,  16.1],
       [ 16.2,  16.2,  16.2, ...,  16.2,  16.2,  16.2],
       [ 16.3,  16.3,  16.3, ...,  16.3,  16.3,  16.3]]) 
```

几点注意事项：

*   Numpy 的形状约定是 (nrow, ncolumn) 所以你需要的形状是 (64,48) 而不是 (48,64) 到你在你的问题中的数组。

*   有多种方法可以做到这一点，但我选择使用 numpy 的[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)符号。

*   您可以更紧凑地编写此代码，但出于说明目的，我将其拆分为单独的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:15:39.537

执行此操作的另一种方法（只是为了好玩）是使用`tile`( [doc)](http://docs.scipy.org/doc/numpy/reference/generated/numpy.tile.html "瓦")

```
c = 10 + np.cumsum(np.ones(64))*.1 - .1
a = np.tile(c,(48,1)).T 
```

# apache - 从命令行在任何目录中启动 apache 服务器

> ID：13695391
> 
> 赞同：27
> 
> 时间：2012-12-04T02:58:18.053
> 
> 标签：apache, command-line-interface, static-files, static-site, staticfilehandler

我希望能够从命令行启动 apache 服务器，输入类似`apache site-folder`或`apache . --port=2000`

这应该读取和使用`.htaccess`文件。

我知道`python -m SimpleHTTPServer`并且它接近我需要的东西，但不完全是。

理想的解决方案：

1.  为 apache 本身贡献一个很棒的命令行界面
2.  编写一个简单的命令行工具来包装/包含 apache（或其他东西）
3.  链接到 apache 的现有 cli 上的文档

我只想打字`command <Directory> --port=8000 --other-options`

命令名称也可以是`pache`

在某些时候，我可能想在生产中使用它。将进程发送到后台应该很容易，然后停止该实例或所有实例，就像[永远一样](https://github.com/nodejitsu/forever)

相关链接：[http ://httpd.apache.org/docs/2.4/programs/httpd.html](http://httpd.apache.org/docs/2.4/programs/httpd.html)

### 还

任何人都应该只有一个命令来安装脚本以立即使用

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T11:46:27.317

apache调试模式（-X）怎么样？

```
apache2 -X -d. -f.htaccess -C"PidFile `mktemp`"  -C"Listen 1025" 
-C"ErrorLog /dev/stdout" -C"DocumentRoot `pwd`" 
```

启动后将其置于后台，您可以使用 Ctrl^Z 然后键入“bg”

使用 FOREGROUND 标志，将其包装在 shell 脚本中：

```
#!/bin/sh
if [ $# -ne 2 ]; then 
    echo "$0 <port> <dir>"
    exit 10 
fi
/usr/sbin/apache2 -DFOREGROUND -d. -f.htaccess -C"PidFile `mktemp`" \ 
-C"Listen $1" -C"ErrorLog /dev/stdout" -C"DocumentRoot $2" -e debug 
```

称它为“pache”，chmod +x，然后你可以运行

```
./pache 1026 /tmp/webroot 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T11:20:35.207

# `http-server`是一个比pache 更好的简单http 服务器，这是我目前使用的！:)

> # 使用 [pache][1]
> 
> 使用 npm 安装 - 这里带有节点：[http ://nodejs.org/](http://nodejs.org/)
> 
> ```
> sudo npm install pache -g 
> ```
> 
> 在当前目录，端口 3000 上运行：
> 
> ```
> pache 
> ```
> 
> 或者指定目录和端口：
> 
> ```
> pache site-directory 2000 
> ```
> 
> [1]：[https ://github.com/devinrhode2/pache](https://github.com/devinrhode2/pache)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T14:01:19.360

这有效：

您的 apache 配置可能指向 /var/www

然后使用：

```
sudo mount -o bind /home/webcreatorperson/mywebsite /var/www 
```

解除绑定使用：

```
sudo umount /var/www 
```

如果你想要几个端口，你可以在 apache 中预先配置端口指向像 /var/www/8000 这样的目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-23T14:31:58.330

为了任何遇到同样问题的人的利益，我想要一些与提到的[pache](https://github.com/devinrhode2/pache)包一样简单的东西，但不依赖于安装 node.js。

我的用例是寻找[Jekyll](http://jekyllrb.com/)中使用的 webrick 服务器的替代品。Webrick 与大多数轻量级的随时随地运行的 http 服务器一样，不支持 .htaccess 文件。

所以我接受了 gpilotino 的回答并将其打包了一下。我已经使用它几个星期了，尽管我确信它可以在完成工作后得到改进。它以脚本和最小的 httpd.conf 文件的形式提供，可以轻松扩展以支持 PHP。

您可以在以下位置找到它：[https ://github.com/julianbrowne/apache-anywhere](https://github.com/julianbrowne/apache-anywhere)

本质上，一旦安装（可选配置调整），您只需运行：

`apache -d document_root_directory -p {port}`

和：

`apache stop {port}`

当你完成时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-12T06:13:08.307

希望你能找到你的解决方案。我讨厌.htaccess。所以我写了这个：

```
#!/bin/bash
cat >._apache2_dir_conf << EOF
Include /etc/apache2/mods-enabled/*.load
Include /etc/apache2/mods-enabled/*.conf
ErrorLog $1/._apache2_dir_error.log
HostnameLookups Off
NameVirtualHost *:$2
ServerName joyeruc
Listen $2
PidFile $1/._apache2_pid
<VirtualHost *:$2>
    ServerAdmin joyer@uc
    DocumentRoot $1
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory $1/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
    </Directory>
    ErrorLog $1/._apache2_dir_error.log
    LogLevel warn
</VirtualHost>

EOF

#apache2 -k $3 -X -f $1/._apache2_dir_conf
apache2 -X -f $1/._apache2_dir_conf 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T19:13:02.680

为什么不使用 Gatling，它可以让你做你想做的事？

[http://www.fefe.de/gatling/](http://www.fefe.de/gatling/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T18:13:59.583

嗯……有趣。

我可以理解为什么您希望能够按需、在不同的端口等上生成一个单独的 apache 实例等等。

即，有时，您只想更改一个实例的配置，或者您希望用户能够自助服务等。

但更重要的是，您希望能够为您的用户提供 Apache 灵活性，而不会破坏其他所有人的 Apache。这是一个庞大的虚拟主机配置文件无法处理的事情。

我在自己的环境中有类似的设置。

无论哪种情况，要在 Mac 上使用自定义设置启动 Apache，我都是这样做的：

文件夹/文件：

~/site/conf/httpd.conf ~/site/logs/ ~/site/public/

httpd.conf 文件的内容：

```
# Can be substituted with an Include statement, which all httpd.conf can pull in.
# Included here for simplicity/single file example.
LoadModule authn_file_module /usr/libexec/apache2/mod_authn_file.so
LoadModule authn_dbm_module /usr/libexec/apache2/mod_authn_dbm.so
LoadModule authn_anon_module /usr/libexec/apache2/mod_authn_anon.so
LoadModule authn_dbd_module /usr/libexec/apache2/mod_authn_dbd.so
LoadModule authn_default_module /usr/libexec/apache2/mod_authn_default.so
LoadModule authz_host_module /usr/libexec/apache2/mod_authz_host.so
LoadModule authz_groupfile_module /usr/libexec/apache2/mod_authz_groupfile.so
LoadModule authz_user_module /usr/libexec/apache2/mod_authz_user.so
LoadModule authz_dbm_module /usr/libexec/apache2/mod_authz_dbm.so
LoadModule authz_owner_module /usr/libexec/apache2/mod_authz_owner.so
LoadModule authz_default_module /usr/libexec/apache2/mod_authz_default.so
LoadModule auth_basic_module /usr/libexec/apache2/mod_auth_basic.so
LoadModule auth_digest_module /usr/libexec/apache2/mod_auth_digest.so
LoadModule cache_module /usr/libexec/apache2/mod_cache.so
LoadModule disk_cache_module /usr/libexec/apache2/mod_disk_cache.so
LoadModule mem_cache_module /usr/libexec/apache2/mod_mem_cache.so
LoadModule dbd_module /usr/libexec/apache2/mod_dbd.so
LoadModule dumpio_module /usr/libexec/apache2/mod_dumpio.so
LoadModule reqtimeout_module /usr/libexec/apache2/mod_reqtimeout.so
LoadModule ext_filter_module /usr/libexec/apache2/mod_ext_filter.so
LoadModule include_module /usr/libexec/apache2/mod_include.so
LoadModule filter_module /usr/libexec/apache2/mod_filter.so
LoadModule substitute_module /usr/libexec/apache2/mod_substitute.so
LoadModule deflate_module /usr/libexec/apache2/mod_deflate.so
LoadModule log_config_module /usr/libexec/apache2/mod_log_config.so
LoadModule log_forensic_module /usr/libexec/apache2/mod_log_forensic.so
LoadModule logio_module /usr/libexec/apache2/mod_logio.so
LoadModule env_module /usr/libexec/apache2/mod_env.so
LoadModule mime_magic_module /usr/libexec/apache2/mod_mime_magic.so
LoadModule cern_meta_module /usr/libexec/apache2/mod_cern_meta.so
LoadModule expires_module /usr/libexec/apache2/mod_expires.so
LoadModule headers_module /usr/libexec/apache2/mod_headers.so
LoadModule ident_module /usr/libexec/apache2/mod_ident.so
LoadModule usertrack_module /usr/libexec/apache2/mod_usertrack.so
LoadModule setenvif_module /usr/libexec/apache2/mod_setenvif.so
LoadModule version_module /usr/libexec/apache2/mod_version.so
LoadModule proxy_module /usr/libexec/apache2/mod_proxy.so
LoadModule proxy_connect_module /usr/libexec/apache2/mod_proxy_connect.so
LoadModule proxy_ftp_module /usr/libexec/apache2/mod_proxy_ftp.so
LoadModule proxy_http_module /usr/libexec/apache2/mod_proxy_http.so
LoadModule proxy_scgi_module /usr/libexec/apache2/mod_proxy_scgi.so
LoadModule proxy_ajp_module /usr/libexec/apache2/mod_proxy_ajp.so
LoadModule proxy_balancer_module /usr/libexec/apache2/mod_proxy_balancer.so
LoadModule ssl_module /usr/libexec/apache2/mod_ssl.so
LoadModule mime_module /usr/libexec/apache2/mod_mime.so
LoadModule dav_module /usr/libexec/apache2/mod_dav.so
LoadModule status_module /usr/libexec/apache2/mod_status.so
LoadModule autoindex_module /usr/libexec/apache2/mod_autoindex.so
LoadModule asis_module /usr/libexec/apache2/mod_asis.so
LoadModule info_module /usr/libexec/apache2/mod_info.so
LoadModule cgi_module /usr/libexec/apache2/mod_cgi.so
LoadModule dav_fs_module /usr/libexec/apache2/mod_dav_fs.so
LoadModule vhost_alias_module /usr/libexec/apache2/mod_vhost_alias.so
LoadModule negotiation_module /usr/libexec/apache2/mod_negotiation.so
LoadModule dir_module /usr/libexec/apache2/mod_dir.so
LoadModule imagemap_module /usr/libexec/apache2/mod_imagemap.so
LoadModule actions_module /usr/libexec/apache2/mod_actions.so
LoadModule speling_module /usr/libexec/apache2/mod_speling.so
LoadModule userdir_module /usr/libexec/apache2/mod_userdir.so
LoadModule alias_module /usr/libexec/apache2/mod_alias.so
LoadModule rewrite_module /usr/libexec/apache2/mod_rewrite.so
LoadModule hfs_apple_module /usr/libexec/apache2/mod_hfs_apple.so

# These can also be turned into an Include. 
PidFile logs/httpd.pid
LockFile logs/httpd.lock

# Can be substituted for a variable in an Include.
Listen 8099
NameVirtualHost *:8099

# Just put this here to stop the startup error. Can be replaced with something else.
ServerName test

Include /etc/apache2/extra/httpd-autoindex.conf
Include /etc/apache2/extra/httpd-default.conf
Include /etc/apache2/extra/httpd-info.conf

<VirtualHost *:8099>
    DocumentRoot /Users/doe/site/public
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>

    ErrorLog logs/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

</VirtualHost> 
```

这利用了 Apache 的系统范围安装。

要启动实例：

```
export PATH=/usr/sbin:$PATH
httpd -f /Users/doe/site/conf/httpd.conf  -d `pwd` -T  -k start 
```

模块、监听的端口、php、pid 和锁定文件位置等的配置可以移动到外部包含，这将由管理员而不是用户控制。然后，您可以为用户提供一个基线模板 httpd.conf 文件，一个简单的启动/停止/重新加载/等。包装器，并让您的所有用户都能够启动自己的网站。

鉴于它是 Mac OS 环境，您需要安装的越少，管理就越简单。

# android - 使用 Android Google Maps Api v2 打开街道地图

> ID：13695393
> 
> 赞同：17
> 
> 时间：2012-12-04T02:58:30.940
> 
> 标签：android, google-maps, openstreetmap, google-maps-mobile, google-maps-android-api-2

是否可以在 Android 上使用带有新的 Google Maps V2 Api 的开放街道地图提供程序？如果是这样，你能提供一个例子或文档吗？我快速查看了文档并找到[了 UrlTileProvider()](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/UrlTileProvider)，所以看起来这是可能的。

奖励：只是使用 MapFragment 类和 OSM 瓦片仍然受 Google Maps TOS 约束吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-12T15:39:40.580

您需要扩展 UrlTileProvider 类，以便您可以定义 OSM 平铺地图的 URL 并添加这样的平铺覆盖：

```
MyUrlTileProvider mTileProvider = new MyUrlTileProvider(256, 256, mUrl);
mMap.addTileOverlay(new TileOverlayOptions().tileProvider(mTileProvider)); 
```

OSM 的 url 定义如下：

```
String mUrl = "http://a.tile.openstreetmap.org/{z}/{x}/{y}.png"; 
```

MyUrlTileProvider 类：

```
public class MyUrlTileProvider extends UrlTileProvider {

private String baseUrl;

public MyUrlTileProvider(int width, int height, String url) {
    super(width, height);
    this.baseUrl = url;
}

@Override
public URL getTileUrl(int x, int y, int zoom) {
    try {
        return new URL(baseUrl.replace("{z}", ""+zoom).replace("{x}",""+x).replace("{y}",""+y));
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
    return null;
}
} 
```

我现在正在尝试使用离线模式从 OSM 获取那些平铺地图，所以如果有人得到快速解决方案，请告诉我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-12T06:02:30.430

使用此方法时，请注意 OSM Tile 使用政策：[http ://wiki.openstreetmap.org/wiki/Tile_usage_policy](http://wiki.openstreetmap.org/wiki/Tile_usage_policy)

特别是“未经事先许可，禁止大量使用（例如分发使用来自 openstreetmap.org 的图块的应用程序）”

# javascript - 如何访问 .ajax() 异步函数中的局部变量

> ID：13695397
> 
> 赞同：3
> 
> 时间：2012-12-04T02:59:05.260
> 
> 标签：javascript, jquery, ajax

我有一个 javascript 函数，如下所示：

```
function reloadToolbar() {
        var ids = ["#gs_foo"];
        var parmName = ["foo"];
        for (i = 0; i < ids.length; i++) {
               $.ajax({url:"myurl?parm="+parmName[i],success:function(result){
                 $(ids[i]).html(result);
               }});       
        }
} 
```

但是，上面的代码不起作用。它不会更新 id `gs_foo`。虽然，下面的代码工作正常，但请注意更改 ( `$("#gs_foo).html(result)`)

```
function reloadToolbar() {
        var ids = ["#gs_foo"];
        var parmName = ["foo"];
        for (i = 0; i < ids.length; i++) {
               $.ajax({url:"myurl?parm="+parmName[i],success:function(result){
                 $("#gs_foo").html(result);
               }});       
        }
} 
```

我怎样才能以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:06:02.247

解决方法是将另一个字段添加到服务器的结果中。

```
$.ajax({url:"myurl?parm="+parmName[i],success:
    function(result){
        var ids= $('.whatever');
        $(ids[result.index]).html(result.body);}
}); 
```

# email - RavenDB 和基于电子邮件的文档 ID

> ID：13695400
> 
> 赞同：0
> 
> 时间：2012-12-04T02:59:21.213
> 
> 标签：email, oauth, document, ravendb

我正在关注 RavenDB Oauth 的示例，这里的标准做法似乎是使用用户名来生成 id 密钥。这将要求用户在注册和登录期间输入用户名。

我希望必须基于电子邮件而不是用户名进行身份验证，但是我遇到了困难，试图弄清楚如何正确实施它。

我已经按如下方式实现了 Oauth

```
 using (IDocumentSession Session = DataDocumentStore.Instance.OpenSession())
            {
                Session.Store(new AuthenticationUser
                {
                    Name = Email,
                    Id = String.Format("Raven/Users/{0}", Email),
                    AllowedDatabases = new[] { "*" }
                }.SetPassword(Password));
                Session.SaveChanges();

                return Session.Load(String.Format("Raven/Users/{0}", Email));
            } 
```

这将允许我们使用以下方法对用户进行身份验证（假设电子邮件和密码是为登录提供的唯一数据）

```
 using (IDocumentSession Session = DataDocumentStore.Instance.OpenSession())
            {
                return Session.Load(String.Format("Raven/Users/{0}", Email)).ValidatePassword(Password);
            } 
```

我发现的问题是，如果我使用电子邮件作为文档 ID 键并且电子邮件更改，则文档 ID 和引用该 ID 的任何文档都需要更改。

但是，如果我使用 RavenDB 生成的 id（即使电子邮件发生变化，它也会保持静态），我无法调用`Session.Load`并且必须使用`Session.Query`它，如果我正确理解文档，它就没有那么优化。

所以问题是，以前有没有人遇到过这个问题，（如果有的话）你能提供一个关于我如何完成这个问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:22:19.943

如果电子邮件可以更改，则不能将其用作 id。您需要先通过 id 进行查询，然后使用从查询中获得的 id 进行其余操作

# php - PHP 健全性检查，条件/比较

> ID：13695403
> 
> 赞同：1
> 
> 时间：2012-12-04T02:59:41.203
> 
> 标签：php, string, comparison, integer

出于对自然万物的热爱，有人可以解释为什么会发生这种情况吗？

```
$code = 0;
echo $code == 'item_low_stock' ? 'equal' : 'not equal';

// RESULT: "equal" 
```

？？？

我的应用程序中的一行代码突然停止正常工作，我没有编辑它周围的任何东西，改变了我的 php 版本，任何东西。当 $code 变量包含 0 时，当我将它与字符串 'item_low_stock' 进行比较时，它会传递为真。

我可以发布原始代码块，但我把它归结为这个比较，这就是我发现的。

哈尔普。

编辑：PHP 版本是 5.3.10。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T03:05:05.137

[文档](http://php.net/manual/en/language.operators.comparison.php)清楚地表明，*在 type juggling 之后*`==`测试两侧的两个值。当转换为整数时，您的字符串变为. 尝试以下操作：*`0`*

 *```
echo (int) 'item_low_stock'; // 0 
```

运行它：[http ://codepad.org/z7LIEumk](http://codepad.org/z7LIEumk)

如果您不想从事类型杂耍，请使用`===`or`!==`代替。这将测试两个值是否*相同*，即相同的值和类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T03:02:12.933

当其中一个操作数是数字时，php 也会将另一个操作数转换为数字。

所以`item_low_stock`转换为数字的字符串是`0`，因此它等于`0`，因此它是`true`

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都[将转换为数字](http://nz1.php.net/manual/en/language.types.string.php#language.types.string.conversion)并以数字方式执行比较。*

# java - J 单元测试问题？

> ID：13695404
> 
> 赞同：0
> 
> 时间：2012-12-04T02:59:48.740
> 
> 标签：java, junit4

这是我需要测试的员工超类的代码。

```
public abstract class Employee {
    protected int id; 
    protected double weeklyPay;

public Employee(int id)
    {
        this.id=id;
    }

public void setId(int id)
    {
        this.id=id;
    }
public int getId() 
    {
        return id;
    }
public String toString() 
    {
        return id+"has a weekly pay of "+weeklyPay;
    }
public double getWeeklyPay() 
    {
        return weeklyPay;
    } 
```

这是ManagerClass的代码

```
public class Manager extends Employee

public Manager(int id, double weeklyPay) 
    {
        super(id);
        super.weeklyPay=weeklyPay;
    }

public String toString() 
    {
        return "Manager " + super.toString();
    } 
```

这是经理 JUnit Test 中不起作用的部分

```
public void testToString() {
        assertEquals("Manager 1has a weekly pay of 42", new Manager(1, 42).toString()); 
```

这是我收到的失败消息 org.junit.ComparisonFailure: expected <...sa week pay of 42[]> but is <...sa week pay of 42[.0]>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:48:13.857

这会起作用：

```
assertEquals("Manager 1has a weekly pay of 42.0", new Manager(1, 42).toString()); 
```

你有每周支付作为`double`你的超级类。所以它打印 42.0 ，而不是 42。

**另一种方式：**

添加另一个构造函数：

```
 public Employee(int id, double wP) {
    this.id = id;
    this.weeklyPay = wP;
    } 
```

然后，来自经理：

```
 public Manager(int id, double weeklyPay) {
    super(id, weeklyPay);
    } 
```

以下打印：**经理 1 的每周工资为 20.0**

```
 @Test
    public void tt() {
    Manager m = new Manager(1, 20);
    System.out.println(m);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T03:21:18.557

因为您的weeklyPay 是双精度的，所以 toString 方法将其打印为 42.0 并且因为您将其与字符串进行比较，所以它不会评估字符串中的 42。

尝试这个：

```
assertEquals("Manager 1has weekly pay of 42.0", new Manager(1, 42).toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:02:55.730

从课程的编写方式来看，我希望这会通过。

```
assertEquals("Manager 1has a weekly pay of 42", new Manager(1, 42).toString()); 
```

# http - 要嵌套到 http url 中的自定义 URI

> ID：13695406
> 
> 赞同：0
> 
> 时间：2012-12-04T03:00:01.843
> 
> 标签：http, uri

我正在制作一个显示 http 应用程序的内容，并且有一堆内容数据源，如普通文件、sqlite db 文件等等。

在我看来，最好创建一个 URI 来轻松识别数据源，就像许多伟大的项目所做的那样（SQLAlchemy、zeromq 等）。如果我只使用像 sourcetype://blah/blah 这样的[经典 URI 格式](http://en.wikipedia.org/wiki/Uniform_resource_identifier)真的没问题，但是如果我需要一些调试 url 来显示数据源的内容（或元数据），调试 url 会因为使用而变得一团糟[http url 限制字符](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)。

所以，我想要：

**A:**一个不错的 URI 模式，它至少可以用绝对文件路径描述 sqlite:///path/to/my/db 之类的东西，并且不要使用 url 转义字符（那么多）

或者

**B：**将 sqlite:///path/to/my/db 转换为在浏览器中显示的一个很好的解决方法

我不期待任何确切的答案，但欢迎任何建议。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:42:41.883

您可以尝试将源 url 分解为它的组件，并将它们作为请求参数提供或在 http url 的路径中编码。

**请求参数**

```
http://me.com/debug?scheme=sqlite&path=/path/to/my/db&netloc=... 
```

**在路径中编码（假设您使用有限的 url 组件）**

```
http://me.com/debug/<scheme>/<netloc>/<path*> 
```

或者

```
http://me.com/debug/sqlite//path/to/my/db 
```

# model-view-controller - 存储库模式 + 工作单元

> ID：13695407
> 
> 赞同：3
> 
> 时间：2012-12-04T03:00:06.397
> 
> 标签：model-view-controller, design-patterns, repository, unit-of-work

将近一年后，我开始了一个新的 mvc 项目，这次是版本 4。我想知道以下存储库模式的实现是否弊大于利。

```
public interface IRepository<T> where T : class
{
    IEnumerable<T> GetAll();

    IQueryable<T> Query(Expression<Func<T, bool>> filter);

    void Add(T entity);

    void Remove(T entity);
}

public interface IUnitOfWork
{
    void Commit();
}

public interface IDbContext : IDisposable
{
    IDbSet<T> Set<T>() where T : class;

    int SaveChanges();
}

public class DbContextAdapter : IDbContext
{
    private readonly DbContext _myRealContext;

    public DbContextAdapter()
    {
        this._myRealContext = new EstafaContext();
    }

    public void Dispose()
    {
        _myRealContext.Dispose();
    }

    public IDbSet<T> Set<T>() where T : class
    {
        return _myRealContext.Set<T>();
    }

    public int SaveChanges()
    {
        return _myRealContext.SaveChanges();
    }
}

public class SqlRepository<T> : IRepository<T> where T : class
{
    private IDbSet<T> _dbSet;

    public SqlRepository(IDbContext dbContext)
    {
        this._dbSet = dbContext.Set<T>();
    }

    public IEnumerable<T> GetAll()
    {
        return this._dbSet.ToList();
    }

    public IQueryable<T> Query(Expression<Func<T, bool>> filter)
    {
        return this._dbSet.Where(filter);
    }

    public void Add(T entity)
    {
        this._dbSet.Add(entity);
    }

    public void Remove(T entity)
    {
        this._dbSet.Remove(entity);
    }
}

public class SqlUnitOfWork : IDisposable, IUnitOfWork
{
    private IDbContext _dbContext;

    private SqlRepository<Cliente> _clientes ;

    public SqlUnitOfWork()
    {
        this._dbContext = new DbContextAdapter();
    }

    public void Dispose()
    {
        if (this._dbContext != null)
        {
            this._dbContext.Dispose();
        }
        GC.SuppressFinalize(this);
    }

    public IRepository<Cliente> Clientes
    {
        get { return _clientes ?? (_clientes = new SqlRepository<Cliente>(_dbContext)); }
    }       

    public void Commit()
    {
        this._dbContext.SaveChanges();
    }
} 
```

这样，我可以通过 SqlUnitOfWork 从一个点管理所有存储库。我在之前的项目中使用过这种设计，效果很好，但我觉得它效率不高，可能是多余的。添加这样一个抽象层值得吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:11:31.510

尽管我的实现并不完全像您所拥有的那样，但对我来说似乎很可靠。

我通常做的唯一其他更改是为每个实体类型存储库定义特定的接口，如下所示：

```
public interface IClienteRepository : IRepository<Cliente>
{
  IEnumerable<Cliente> GetByName(string firstName);
  // etc
} 
```

这样我仍然可以将所有存储库通用地用于我的 CRUD 操作，但我也可以使用相同的存储库来抽象出一些查询逻辑。您的存储库的用户应该只需要知道他们想要什么，而不是如何获得它。

当然，这有点乏味，需要您对存储库进行具体实现以添加额外的功能，但它只是封装了无论如何您都可以通过应用程序在其他地方拥有的查询逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:27:11.213

我不知道它是否有更多的缺点或优点，但多年来，我发现这种类型的存储库模式越来越没用了。除非即时切换数据库或数据源是一种真正的可能性，或者如果您需要一些疯狂的模拟宇宙测试覆盖率，我认为这比它的价值更麻烦。

只是我个人的喜好，但我喜欢我的数据访问方法更明确一点。例如，如果我将模型返回到视图，它们肯定会与我数据库中的表看起来不同。所以我想要一种`GetAllModelX`方法，而不是一种`GetAllDbTableRows`方法。

那么这个转换代码将存放在哪里？在控制器中？另一个将实体转换为模型的数据访问层？甚至有正确或错误的答案吗？可能不是。

我在这里肯定是在扮演魔鬼的拥护者，但根据我的经验，我已经摆脱了这种通用存储库设计，转而支持返回/接受模型并处理所有查询/CRUDding/UnitOfWork 的数据访问层。数据库通常使用 EF。但是话又说回来，我是一个经典的单元测试人员，他不做太多的模拟，而是做更多的集成测试。

# javascript - For循环异步

> ID：13695409
> 
> 赞同：0
> 
> 时间：2012-12-04T03:00:54.283
> 
> 标签：javascript, asynchronous, angularjs

我正在开发一个角度应用程序并且遇到了问题。我对 JS 很陌生，对异步编程也很陌生，所以我猜我错过了一些明显的东西。

问题的要点是我有一个构建数组的 for 循环。然后，我需要在 for 循环完成其业务后立即加入该数组。通常这将是一个明智的选择，但显然在角度上 for 循环异步执行。我需要在 for 循环退出*后强制我的数组连接发生。*

```
if(!data.results[i].is_deleted) {
  var objectsOnCurrentPermission = new Array();
  if(data.results[i].objects) {
    for(var j = 0; j < data.results[i].objects.length; j++) {
      var currentObjectId = data.results[i].objects[j].object_id;
      var currentObjectName;
      var objectData = Object.get({id: currentObjectId}, function(objectData) {
        objectsOnCurrentPermission.push(objectData.name);
        console.log('in loop in get fn');
        console.log(objectsOnCurrentPermission);
      });
    }
    console.log('after loop');
    console.log(objectsOnCurrentPermission);
    var listOfObjectsOnCurrentPermission = objectsOnCurrentPermission.join(', ');
    console.log('str after assignment');
    console.log(listOfObjectsOnCurrentPermission);
    data.results[i]['objects_list'] = listOfObjectsOnCurrentPermission;
} 
```

令我惊讶的是，当我检查我看到的输出时（我添加了 '<' 以提高可读性）

```
after loop permissions.js:246
>Array[1]
permissions.js:247
str after assignment permissions.js:249

permissions.js:250
in loop in fn permissions.js:242
>Array[1] 
```

可以看到 after 循环输出首先执行。据我所知，它第一次输出 Array[1] 时实际上并没有填充该数组 - chrome 只是在事后填充它。“分配后的str”行后面的空白行是我尝试输出显然不起作用的连接的地方。然后最后执行循环中的代码。正如我所提到的，我需要确保在 for 循环完成填充数组之后发生数组连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:53:02.850

根据您的`console.log()`输出，该`Object.get()`函数似乎必须是异步的，这意味着调用它只是开始执行它并在一段时间后完成。据推测，当它完成时，它会调用您传递给它的回调函数。

因此，要完成对最终结果的处理，您需要在最后一次`Object.get()`调用完成时触发最终代码 - 当所有`Object.get()`完成回调都已被调用时。一个简单的计数器来记录剩余的数量是一种简单的方法。

以下是您如何跟踪所有`.get()`方法何时完成然后触发最终代码的基本思想：

```
if(!data.results[i].is_deleted) {
  var objectsOnCurrentPermission = [];
  if(data.results[i].objects) {

    // initialize counter so we know when all async functions are done
    var numRemaining = data.results[i].objects.length;

    for(var j = 0; j < data.results[i].objects.length; j++) {
      var currentObjectId = data.results[i].objects[j].object_id;
      var currentObjectName;
      var objectData = Object.get({id: currentObjectId}, function(objectData) {
        objectsOnCurrentPermission.push(objectData.name);
        console.log('get complete fn called');
        console.log(objectsOnCurrentPermission);
       --numRemaining;
       if (numRemaining === 0) {
          console.log('all get() functions done');
          console.log(objectsOnCurrentPermission);
          var listOfObjectsOnCurrentPermission = objectsOnCurrentPermission.join(', ');
          console.log('str after assignment');
          console.log(listOfObjectsOnCurrentPermission);
          data.results[i]['objects_list'] = listOfObjectsOnCurrentPermission;
       }
      });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:17:51.813

我最终使用 caolan 的异步库来管理我的同步/异步代码需求。特别是 async.parallel 允许我构建中间数组并确保它们在继续之前完成。[https://github.com/caolan/async](https://github.com/caolan/async)

# mysql - 查询以获取在某个时间范围内开始或结束的所有预订？

> ID：13695411
> 
> 赞同：2
> 
> 时间：2012-12-04T03:01:05.843
> 
> 标签：mysql, sql

我相信这是一个非常微不足道的查询（我搜索了 SO 和 Google，但一无所获），SQL 绝对不是我的强项，过去几个小时我一直在喝咖啡……

我正在开发一个简单的预订系统。

我有一张像下面这样的预订表：

```
id | room_id | checkin_date  | checkout_date |
---+---------+---------------+---------------+
1  |    12   | 2012-10-12    |  2013-01-14   |
2  |    9    | 2012-12-08    |  2013-01-10   | 
3  |    4    | 2012-12-19    |  2012-12-26   | 
4  |    6    | 2012-11-12    |  2012-12-30   |  
5  |    3    | 2012-12-11    |  2012-01-11   | 
```

如何获得在特定时间间隔内***结束或开始***的所有预订（数据将用于填充可用性日历）。

很抱歉没有发布我自己的 Sql，但我所有的许多尝试都是徒劳的（而且非常糟糕）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:02:59.597

```
select * from reservations 
where checkin_date between ? and ?
or checkout_date between ? and ? 
```

例如，您需要在占位符中提供开始日期和结束日期

```
select * from reservations 
where checkin_date between '2012-01-01' and '2012-01-66'
or checkout_date between '2012-01-01' and '2012-01-66' 
```

# xml - 有没有办法结合 语义与 语义？

> ID：13695414
> 
> 赞同：4
> 
> 时间：2012-12-04T03:01:33.673
> 
> 标签：xml, xsd, xsd-validation

我有一个类似于以下的文档类型：

```
<foo>
  <settings>
    <!-- Must be present; in any order -->
    <time>abc</time>
    <validRun>true</validRun>
    <!-- Tool may add whatever ones it wants -->
    <somethingNotCheckedFor>abc</somethingNotCheckedFor>
  </settings>
</foo> 
```

下面的文档在语义上与前面的文档相同：

```
<foo>
  <settings>
    <validRun>true</validRun>
    <somethingNotCheckedFor>abc</somethingNotCheckedFor>
    <time>abc</time>
  </settings>
</foo> 
```

但以下内容无效：

```
<foo>
  <settings>
    <validRun>true</validRun>
    <somethingNotCheckedFor>abc</somethingNotCheckedFor>
    <!-- Error: Required element "time" not present -->
  </settings>
</foo> 
```

我尝试了类似以下的方法，但这不起作用，因为`<xs:all>`不允许包含`<xs:any>`：

```
<xs:all>
  <xs:element name="time" />
  <xs:element name="validRun" />
  <xs:any />
</xs:all> 
```

在 W3C Schema 中是否有一些方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:04:58.357

1.  您可以使用 XSD 1.1，它允许通配符出现在所有组中。

2.  如果您需要的元素在命名空间中，并且您可以要求生成器添加的元素不在该命名空间中，那么您可以使用识别您想要的语言的选择和序列编写内容模型（如果您确实只有两个必需的元素，这并不太难；如果你有三个或四个，它会变得很麻烦，如果你有五个以上，你不想在没有编译器的情况下这样做）。您需要的是这样的内容模型：

    ```
    <xs:sequence>
      <xs:any namespace="##other" 
              minOccurs="0" 
              maxOccurs="unbounded"/>
      <xs:choice>
        <xs:sequence>
          <xs:element ref="time"/>
          <xs:any namespace="##other" 
                  minOccurs="0" 
                  maxOccurs="unbounded"/>
          <xs:element ref="validRun"/>
        </xs:sequence>
        <xs:sequence>
          <xs:element ref="validRun"/>
          <xs:any namespace="##other" 
                  minOccurs="0" 
                  maxOccurs="unbounded"/>
          <xs:element ref="time"/>
        </xs:sequence>
      </xs:choice>
      <xs:any namespace="##other" 
              minOccurs="0" 
              maxOccurs="unbounded"/>
    </xs:sequence> 
    ```

3.  您可以`settings`使用仅包含宽松重复通配符的内容模型进行声明，并在应用程序级别检查 (1) 它是否同时包含`time`和`validRun`(2) 这两个孩子是否有效。

其中，如果您可以使用 XSD 1.1 验证器，我认为 XSD 1.1 可能会产生最令人满意的结果。目前，Xerces J 和 Saxon-EE 都支持 XSD 1.1；大多数其他 XSD 工具都没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:13:09.283

我想你知道如何使用`<any/>`元素！即，您不能`<any/>`按字面意思获取元素，但您必须声明可能的元素列表..

我想这将解释`<any/>`您的问题的用法和解决方案！:))

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="foo" type="foo"/>
  <xs:complexType name="foo">
    <xs:sequence>
      <xs:element name="settings" type="settings"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="settings">
      <xs:sequence>
        <xs:any minOccurs="1" maxOccurs="1"/>
        <xs:any minOccurs="1" maxOccurs="1"/>
        <xs:any minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
  </xs:complexType>
  <xs:element name="somethingNotCheckedFor" type="xs:string"/>
  <xs:element name="time" type="xs:string" />
  <xs:element name="validRun" type="xs:boolean" />
  <xs:element name="somethingNotCheckedForTWO" type="xs:string"/>
</xs:schema> 
```

上面的模式不允许除了声明的元素之外的任何其他元素..并且它不允许重复它们，也没有顺序限制！

您可以声明所有可能的元素来代替`<somethingNotCheckedFor/>`!! 就像我已经宣布`<somethingNotCheckedForTWO/>`的那样。

下面列出的 XML 示例通过验证成功！:
1。

```
<?xml version="1.0" encoding="utf-8"?>
<foo>
  <settings>
    <time>abc</time>
    <somethingNotCheckedForTWO>abc</somethingNotCheckedForTWO>
    <validRun>true</validRun>
  </settings>
</foo> 
```

2.

```
<?xml version="1.0" encoding="utf-8"?>
<foo>
  <settings>
    <time>abc</time>
    <validRun>true</validRun>
    <somethingNotCheckedForTWO>abc</somethingNotCheckedForTWO>
  </settings>
</foo> 
```

3.

```
<?xml version="1.0" encoding="utf-8"?>
<foo>
  <settings>
    <somethingNotCheckedFor>abc</somethingNotCheckedFor>
    <time>abc</time>
    <validRun>true</validRun>
  </settings>
</foo> 
```

# objective-c - NSArray Count返回long int？

> ID：13695415
> 
> 赞同：0
> 
> 时间：2012-12-04T03:01:43.013
> 
> 标签：objective-c, xcode, count, nsarray, long-integer

我制作了一个简单的 NSArray，然后从该数组中获取一个随机索引并将其存储为一个 int，但是我收到一个警告说它应该是一个 long int，即使我只希望它返回 0、1 或 2。不是那个这是一个问题，但我不明白为什么。

```
NSArray *randomWordList = [NSArray arrayWithObjects:@"Hello", @"Test", @"Send", nil];  
int randomWordIndex = rand() % [randomWordList count];` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T03:08:10.420

NSArray 的方法`count`返回64 位版本。编译器警告您的原因是因为包含的数字范围小于，所以它警告您可能丢失数据。`NSUInteger``unsigned long``int``long`

只需更改`int randomWordIndex`为`NSUInteger randomWordIndex`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:08:20.043

你可以投它。您必须同意编译器无法知道元素计数，因为数组是动态分配的，因此它只是假定最大值，即 NSUInteger。

# excel - Excel 2007：查找搜索多列的单元格值

> ID：13695417
> 
> 赞同：0
> 
> 时间：2012-12-04T03:01:54.137
> 
> 标签：excel, vlookup

我想开发一个像这样的简单功能

搜索（值、范围、偏移量）

给出下表

```
 A    B    C   

1    10   A    desc for 10a
2    20   B    desc for 20b
3    30   C    desc for 30c 
```

将返回以下内容

```
Search(10; a1:c3; 3) -> desc for 10a
Search(A; a1:c3; 3)  -> desc for 10a

Search(20; a1:c3; 3) -> desc for 20a
Search(B; a1:c3; 3)  -> desc for 20a
Search(desc for 20a; a1:c3; 3)  -> desc for 20a 
```

也就是说，它应该允许我搜索范围内的任何列，而不仅仅是像 VLookup 那样搜索第一个列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:14:31.320

这取决于您的列的可预测性。如果没有显着特征，那么您将遇到困难。但是，如果您可以从搜索字符串中确定哪一列将包含匹配项，那么您就可以了。在您的示例中，数值仅存在于 A 列中，单个字母字符串仅存在于 B 列中，较长的字符串仅存在于 C 列中。在这种情况下，您可以使用以下两个公式：

将搜索值放在 E1 中。在 F1 中：`=IF(ISNUMBER($E1),0,IF(LEN($E1)=1,1,2))`

在 G1 中：`=VLOOKUP($E1,OFFSET($A$1,0,$F1,10,(3-$F1)),(3-$F1),FALSE)`

您当然可以通过将所有 $F1 替换为完整公式来将两者组合成一个公式。为了功能的清晰起见，我在这里将它们分开。

此外，偏移公式中的 10 需要对应于查找范围内的总行数。

# database - 超级键与主键

> ID：13695419
> 
> 赞同：2
> 
> 时间：2012-12-04T03:02:13.120
> 
> 标签：database, key, relational-database, primary-key

当关系仅包含一个功能依赖项时，我在理解关系中的超级键时遇到问题。

当考虑关系 R(A,B,C,D,E) 时，其中 A 是主键并且具有函数依赖关系 A->B，由于只有一个 FD，因此可以将 A 视为关系的超级键吗？或者是否需要扩展函数依赖以包含关系（C、D、E）中未提及的部分以找到超级键？

我很困惑，因为到目前为止我在网上看到的所有材料都包含多个功能依赖关系，所有这些依赖关系都包含关系中的所有属性，所以我不确定如何解释未使用的属性。如果有人可以帮助澄清这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:08:32.337

如果关系模式中唯一明确提到的 FD 是 A ⟶ B，那么就有隐含的、平凡的 FD {A,B,C,D,E} ⟶ {A,B,C,D,E}。鉴于 A ⟶ B，我们可以推断：

*   {A,C,D,E} 是 R 的主键。
*   A ⟶ B 存在部分键依赖关系，因此 R 不在 BCNF 中，关系模式 R 应分解为两个非损失预测：
    *   R1(A,B) 与 A ⟶ B 所以 A 是主键。
    *   R2(A,C,D,E) 是全键（主键是 {A,C,D,E} 的组合）。
    *   并且 R1 ⋈ R2 ≡ R（假设 ⋈ 是连接操作）。

正如[Catcall](https://stackoverflow.com/users/562459/catcall)在评论中所说，提到 A 是 R 的主键。如果 A 是主键，那么每个单例 FD A ⟶ B、A ⟶ C、A ⟶ D 和 A ⟶ E（或者，统称为, A ⟶ {B,C,D,E}) 适用，不需要单独调用 A ⟶ B。如果A是R的主键，则完全不需要分解R；该表确实没有什么有趣的地方，因为给定可用信息（假设没有未说明的非平凡 FD、MVD 或 JD），它被标准化为 5NF。

如果 A 是主键，那么它也是超键，但不是正确的超键。与 A 和一个或多个其他属性的任何属性组合也是超键，并且是适当的超键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:39:37.827

> 在考虑关系 R(A,B,C,D,E) 时，其中 A 是主键并且具有函数依赖关系 A->B，由于只有一个 FD，可以将 A 视为关系的超级键吗？

如果*给定*A 是 R 的主键，那么根据定义你有 FD A->BCDE。这也随之而来

*   A->B
*   A->C
*   A->D
*   A->E

如果 A 是 R 的主键，那么根据定义，A 也是 R 的候选键和超键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-10T09:01:35.127

让我们简单点：这里是**超级键、候选键和主**键的定义

**超级钥匙**

> 超级密钥代表密钥的超集。
> 
> 超级密钥是一组一个或多个属性，它们被集体采用，并且可以唯一地标识所有其他属性。

**候选键**

> 候选键是超级键，没有适当的子集是超级键。
> 
> 换句话说，候选键是最小的超级键。

**首要的关键：**

> 它是数据库设计者选择的一个候选键，用于识别实体集中的实体。
> 
> 主键是**最小的**超级键。在 ER 图中，主键通过在主键属性下划线表示。
> 
> 理想情况下，主键仅由单个属性组成。但是可能有一个由多个属性组成的主键。

# sql - Oracle中两列的连接

> ID：13695421
> 
> 赞同：1
> 
> 时间：2012-12-04T03:02:34.510
> 
> 标签：sql, oracle11g, concatenation

> **可能重复：**
> [Oracle SQL，连接多列+添加文本](https://stackoverflow.com/questions/1619259/oracle-sql-concatenate-multiple-columns-add-text)

我需要编写一个查询，通过以某种格式合并它来获取两列的值。

```
X          Y
-----      -----
10567      1 M
10568      1.5 M
10567      2.5 M 
```

结果应该是格式

```
 "X - Y"
 1)10567 - 1 M
 2)10568 - 1.5 M 
```

任何帮助将非常感激..

# .net - 在 SQL/CLR 中调用 UDT 方法的权限

> ID：13695428
> 
> 赞同：1
> 
> 时间：2012-12-04T03:03:06.200
> 
> 标签：.net, sql-server, sqlclr

我`SQL`使用`SQL/CLR`. `sa`我可以通过但不能由公共用户调用它的方法。

**错误信息是：**

```
System.Data.SqlClient.SqlException: no permission to execute。

System.Data.SqlClient.SqlException: 

in System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)

in System.Data.SqlClient.SqlDataReaderSmi.InternalNextResult(Boolean ignoreNonFatalMessages)

in System.Data.SqlClient.SqlDataReaderSmi.NextResult()

in System.Data.SqlClient.SqlCommand.RunExecuteReaderSmi(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream)

in System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)

in System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

in System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

in System.Data.SqlClient.SqlCommand.ExecuteReader()

in MyAssembly.MyType.Parse(SqlString param) 
```

如何授予公共用户调用方法的权限？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:26:14.920

您的数据库用户是 db_owner 角色的成员吗？别的

尝试这个，

在 SQL Server 管理工作室中

展开数据库 -> 展开安全性 -> 展开用户

然后右键单击您用于连接的数据库用户-> 属性

从右上角的窗格中选择“Securables”。

添加您的对象并从底部面板授予您想要的权限。

# google-app-engine - 在 Python 和 GAE 中：如何跨 HTTP GET 请求永久缓存来自 Datastore 的数据

> ID：13695430
> 
> 赞同：0
> 
> 时间：2012-12-04T03:03:47.557
> 
> 标签：google-app-engine, caching, python-2.7, google-cloud-datastore

我正在使用 GAE 和 Python 开发在线产品。我的模型（即数据存储）中的某些数据在`Context`s 中是恒定的：这意味着对于所有传入的 HTTP`GET`请求，这些数据不会改变。

为了论证起见，假设所述数据必须存在于数据存储中，而不是静态页面（例如 html）。

我将如何设置 Google App Engine 缓存策略，以便在应用程序的生命周期中只查询一次数据存储区——即使产品每天要经历数百万次点击？

免责声明：我是 Python 和 GAE 的新手。

我目前正在研究全局变量，我将使用它来存储所述查询结果。我不仅不知道这将如何工作，还有另一个问题：不同的 HTTP`GET`请求（即 url）用于所述常量数据的不同部分和视图。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:34:06.907

您可能想看看[Memcache API](http://developers.google.com/appengine/docs/python/memcache)。它将允许您基本上做您想做的事 - 缓存查询结果（甚至将结果页面作为 HTML）并在可用时提供它（您可以设置到期时间，但您偶尔也会遇到缓存未命中的情况无论如何都会查询数据存储）。此外，正如@voscausa 所提到的，将您的数据存储 API 从 切换`db`到`ndb`将提供自动缓存以及其他选项以进一步修改缓存行为（[此处](https://developers.google.com/appengine/docs/python/ndb/cache)的文档）。

# java - 我无法对 Java 中的 Math.reverseBytes 做出反应

> ID：13695431
> 
> 赞同：0
> 
> 时间：2012-12-04T03:03:51.257
> 
> 标签：java

我尝试在 Java 中使用 Math.reverseBytes 但给出错误：***对于 Math 类型，方法 reverseBytes() 未定义***

如您所知，它是静态类型。为什么我不能使用它？

```
import java.lang.Integer;

public class Test {
    public static void main(String[] args) {
        int x = Math.reverseBytes();//Eclipse cannot reach this function
    }
} 
```

来自 Java Doc - 一些信息

**反向字节**

```
public static int reverseBytes(int i); 
```

返回通过反转指定 int 值的二进制补码表示中的字节顺序获得的值。

返回： 将指定 int 值中的字节取反后得到的值。

自：1.5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T03:06:34.930

没有“ *Math.reverseBytes* ()”。

Integer.reverseBytes() 或 Short.reverseBytes()，是的。数学 - 没有。

PS：

您绝对应该在 Eclipse 中安装 JavaDoc。就是这样：

*   [如何将 Java API 文档添加到 Eclipse？](https://stackoverflow.com/questions/4600172/how-do-i-add-the-java-api-documentation-to-eclipse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:06:33.937

此方法在 Math 包中不存在。
在你的代码中你已经导入了 java.lang.Integer，你的意思是

> 整数.reverseBytes()

?

# algorithm - 在 175K 节点的图中找出路径

> ID：13695432
> 
> 赞同：3
> 
> 时间：2012-12-04T03:03:51.173
> 
> 标签：algorithm, graph, graph-theory, dijkstra

我在大数据分析中遇到了一个问题，我正在使用 Dijkstras 算法找出具有超过 175K 个节点的图的路径。但问题是我不知道特定源和目的地是否存在路径。我必须为大约 1000 个来源和目的地执行此操作。但是我不能随机选择它们，因为我不确定它们之间是否存在路径。我不确定如何处理。在 MapReduce 环境中执行一次算法在本地需要大约 15 分钟的时间。因此，反复试验不是一种选择。只有我能找到至少 1000 个源和目标是找到循环（？）或强连接组件？这个对吗 ？我希望我的问题很清楚。

我基本上是在寻找说 1000 对源和目的地，它们的路径存在于该大小的图中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T03:10:59.320

我建议随机挑选 1000 个源节点，然后为每个节点运行[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)，直到您访问过`k`节点。然后，选择您要访问的下一个节点并将其设置为该源的目的地。

使用这种方法，您可以确保每个目的地都可以从该来源到达。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T04:14:23.633

我们可以使用像 disjoint-union-set(DUS) 这样的数据结构。我们进行初始化以获得整个图的连通性。如果 a 可以到达 b，它们将位于 DUS 中的同一组中。初始化的复杂度完全取决于图中的边数。查询是关于 O(1) 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T22:18:36.443

这是我建议的算法：

```
findPairsPath ()
{
    define 2D Array SD //holds source-destination nodes
    SD = {}
    pick any node u randomly
    k=0

    while (k<1000)
    {
       DFS (u, k)
       pick any node u randomly not stored in SD 
    }
}

DFS (u, k)
{

    for all nodes v adjacent to u and not stored in SD
     {
       store (u,v) in SD //storing a source and a destination
       k++
       DFS (v,k)

     }

} 
```

# c# - 从单独的类 asp.net MVC 查询数据库

> ID：13695433
> 
> 赞同：0
> 
> 时间：2012-12-04T03:03:57.727
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我是 MVC 概念的新手，并且将数据与控制器逻辑分开。我正在使用 Linq to Sql - 现在我创建了一个新的 DbContext 实例，然后使用它从控制器查询数据库。我必须在我的代码的不同位置做很多相同的查询 - 所以我的问题是 - 我是否能够在我的模型文件夹中创建一个单独的类，在那里创建我的 dbcontext 的新实例，并创建查询的函数db 在类中，将这些函数公开，然后从我想要的任何控制器调用它们？我想这是一个两部分的问题，我能做到吗，这是连接到数据库的首选方式还是我只是在不同的控制器中编写所有单独的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:14:46.357

如果您必须多次执行类似/相同的查询，我建议您[编译您的 LINQ 查询](http://msdn.microsoft.com/en-us/library/bb896297.aspx)（该链接适用于 LINQ to Entities，但与 LINQ to SQL 的想法基本相同）。通过重复调用查询，它具有更好的性能。您可以执行类似于以下代码段的操作：

```
static readonly Func<DbContext, IQueryable<T>> compiledQuery = CompiledQuery.Compile<DbContext, IQueryable<T>>(/*your query goes here*/);
using (DbContext context = new DbContext())
{
    IQueryable<T> results = compiledQuery.Invoke(context);
} 
```

基本上，您可以将这些已编译的查询放入您的`DbContext`类中，然后使用`using`语句调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:08:42.393

这正是你想要做的......你想创建一个存储库（可能在一个单独的项目中），这样分离和重用所有控制器中的所有数据访问代码......搜索“存储库模式”......

# mvvm-light - 带有可移植类库的 MVVM 商店应用程序

> ID：13695435
> 
> 赞同：4
> 
> 时间：2012-12-04T03:04:30.817
> 
> 标签：mvvm-light

我创建了一个 Portable Class Library 并向其中添加了 MVVM Light PCL。

PCL
--Model
----Term.cs

Term.cs 包含对 GalaSoft.MvvmLight 的引用。

我还创建了一个 MVVM Store C# 应用程序。我在上面添加了对 PCL 的引用。但是，当我构建项目时，出现以下错误：

*无法解析程序集或 Windows 元数据文件“GalaSoft.MvvmLight.dll”类型 Universe 无法解析程序集：GalaSoft.MvvmLight，版本=4.0.23.23876，文化=中性，PublicKeyToken=null*

如果我删除模型类（Term.cs），MVVM C#​​ 应用程序是否成功构建？

对于解决此问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:33:40.117

有几件事要预先检查——你使用的是 NuGet >= 2.1 吗？2.2 昨天刚刚发布。

你在使用 NuGet 的 Portable.MVVMLightLibs 包吗？

您的商店应用项目中是否有对 Portable.MVVMLightLibs 的引用？如果您从 ViewModelBase 派生，则使用它的其他项目需要引用包含基本类型的库。这是常规的 .NET，与 PCL 无关。如果您将包添加到您的商店应用程序中，是否可以解决问题？

问候，奥伦

# c# - Http 获取请求 GetResponse 错误

> ID：13695437
> 
> 赞同：5
> 
> 时间：2012-12-04T03:04:38.933
> 
> 标签：c#, get, request, windows-store, webresponse

我试图发送一个获取请求并获取网页的内容。我有这些代码。

```
string url = "www.google.com";

 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
 HttpWebResponse response = (HttpWebResponse)response.GetResponse(); 
```

我从许多网站上找到了这些代码，它是正确的，但“GetResponse”给出了错误。其解释如下。

这是 Visual Studio 2012 的问题吗？`GetResponseStream`当我按 G 时，它找不到 GetResponse 方法，只能找到方法。

我尝试使用 WebClient 类执行此操作，但也找不到 WebClient。这些问题是因为 Visual Studio 2012 而出现的吗？或任何原因？

错误 1“System.Net.HttpWebResponse”不包含“GetResponse”的定义，并且找不到接受“System.Net.HttpWebResponse”类型的第一个参数的扩展方法“GetResponse”（您是否缺少 using 指令或程序集参考？） C:\Users\abidinberkay1\documents\visual studio 2012\Projects\App1\App1\BlankPage1.xaml.cs 45 66 App1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T03:08:16.523

您正在调用“response.GetResponse()”。这是**请求**.GetResponse()。

**更新**：根据您的评论，我将提出一些新代码：

```
private async void btnRequest_Click(object sender, EventArgs e)  // Note: async added
{
    string url = "www.google.com";
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse response = (HttpWebResponse) await request.GetResponseAsync(); // (note: await added, method call changed to GetResponseAsync()

} 
```

我已更新您的代码以使用 C# 5.0 异步和等待模式。这使您可以在编写感觉同步的代码时轻松使用异步方法。为了做到这一点，我在方法声明中添加了**async**关键字，在返回类型之前（在本例中为 void），并且在调用[WebRequest.GetResponseAsync()之前添加了](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getresponseasync.aspx)**await**关键字。

要回答有关如何知道您正在使用的库的问题：在这种情况下，您选择了一个 Windows 应用商店应用程序。你应该特别指出你正在从事什么样的项目——这将帮助我们更快地确定这些事情。

# jquery - Beermapping API Jquery 解析

> ID：13695442
> 
> 赞同：1
> 
> 时间：2012-12-04T03:05:14.867
> 
> 标签：jquery, xml

因此，我尝试使用 jquery 从 url 解析 xml，由于某种原因，我在要附加的 div 中没有得到任何结果。我目前陷入困境，希望能提供任何帮助。谢谢

这是我的 jquery 文件的样子：

```
$(document).ready(function()
 {
  $.ajax({
type: 'GET',
url: 'http://beermapping.com/webservice/locquery/3e16c831988820466c88ab11ed02a47c/rochester',
crossDomain: true,
dataType: "xml",
success: parseXml
  });
});

function parseXml(xml) {
 $(xml).find('location').each(function() {  
      $("#left").append($(this).find("location").text());
  });
 } 
```

# internet-explorer-8 - foreach 中的淘汰赛 css 绑定

> ID：13695444
> 
> 赞同：2
> 
> 时间：2012-12-04T03:05:22.017
> 
> 标签：internet-explorer-8, knockout.js

在`<ul>`foreach 绑定中，我希望淘汰赛为每个`<li>`.

我绑定的对象如下所示：

```
{
    id: 1234,
    class: "foo",
} 
```

我希望淘汰赛将`class`每个项目的属性添加到相应的`<li>`，如下所示：

```
<ul data-bind="foreach: TheList">
    <li data-bind="css: class" />
</ul> 
```

所以我的[有效]输出是这样的：

```
<ul>
    <li class="foo" />
    <li class="bar" />
    <li class="etc" />
</ul> 
```

我无法弄清楚绑定语法。这个我试过了

```
<li data-bind="css: class" /> 
```

它抛出一个错误：

> 无法解析绑定。消息：SyntaxError：语法错误；绑定值：css:class

这个我试过了

```
<li data-bind="css: $data.class" /> 
```

它抛出一个错误：

> 无法解析绑定。消息：语法错误：预期标识符；绑定值：css：$data.class

我用`class`引号括起来以避免js关键字冲突，

```
<li data-bind="css: 'class'" /> 
```

这不会引发错误，但会产生意想不到的结果。我 100% 肯定“修剪”不是`class`集合中任何项目的属性值之一：

```
<li class="trim" data-bind="css: 'class'" __ko__1354588574237="ko3"> 
```

我不知道在这种情况下如何或是否可以使用计算，因为AFAIK我无法将变量（如`$index`或`$data`）传递给计算，因此计算不知道要返回哪个项目`class`。

这种情况下合适的绑定语法是什么，可能吗？

## 解决方案/解决方法

当属性命名为“类”时，这似乎是`css:`IE8 中的绑定问题。如果遇到它，这里有 3 种不同的解决方法：

将字段的名称更改为“类”以外的名称（如果您可以控制源）。

或者，您可以修改列表中的对象，以便可以从不同的名称访问该值，即

```
for (var i = 0; i < TheList.length; i++)
{
    TheList[i].safeName = TheList[i]['class'];
} 
```

或者，您可以使用`attr:`绑定而不是`css:`绑定，这似乎不会遇到同样的问题，并且可以使用称为“类”的成员，只要它们用引号括起来：

```
<li data-bind="attr: { 'class': 'class' } /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:12:17.950

这应该工作：

```
<ul data-bind="foreach: TheList">
    <li data-bind="css: $data['class'], text: $data['class']" />
</ul>​ 
```

我认为您遇到了关键字问题`class`。 [工作 jsfiddle](http://jsfiddle.net/dRBbr/)。

# javascript - jQuery，JavaScript - 如何创建检查表单是否提交的函数

> ID：13695446
> 
> 赞同：1
> 
> 时间：2012-12-04T03:05:53.447
> 
> 标签：javascript, jquery

我有这个代码：

```
if($('input[name=id]').length == 1 && $('input[name=submitted]').length != 1 )
    {
    var id = $('input[name=id]').val(),
    name =  $('input[name=staro_ime]').val();
    img_upload(name, id);
    } 
```

提交表单时，会创建带有**提交名称的隐藏输入字段。**如何检查何时提交表单，然后从上面禁用代码？（此功能在**submit_event**之外）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:23:55.293

只需向表单添加一个提交事件。

```
$('#your_form').on('submit',function() {
  $('#your_form').append("<input type='hidden' id='hidden_form' name='submitted' value='something' />");
} 
```

如果你只想运行一次函数，你可以在你设置的事件之外使用一个变量，或者你可以检查表单中是否存在附加字段。使用变量方法：

```
var formSubmitted = false;
$('#your_form').on('submit',function() {
  if(!formSubmitted) {
    $('#your_form').append("<input type='hidden' id='hidden_form' name='submitted' value='something' />");
    //anything else you want to run one time

    formSubmitted = true;
    $('#your_form').submit();
  } else {
    //submit form
} 
```

# sql - 在活动记录中可以进行此查询吗？

> ID：13695453
> 
> 赞同：0
> 
> 时间：2012-12-04T03:07:54.530
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我有一个用户类，它有一个名为“设备”的列，类型为 VARCHAR(255)。此列主要包含设备类型，例如字符串“iPhone 4S”、“iPod Touch 4G”等...

是否有可能（无需加载所有用户并手动执行）计算出每个设备的总出现次数？

所以它会返回：

```
iPhone:  50
iPad 2: 54
etc.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:45:02.177

你只需这样做：

```
counts = User.count(:group => :device) 
```

这将（或多或少）翻译成这个 SQL：

```
select count(*), device from users group by device 
```

你会得到一个`device`到计数的哈希映射`counts`：

```
{
    'iPhone' => 50,
    'iPad 2' => 54,
    ...
} 
```

# ios - twitter 帖子中的自定义 url 方案不起作用

> ID：13695456
> 
> 赞同：5
> 
> 时间：2012-12-04T03:08:13.960
> 
> 标签：ios, callback, twitter, url-scheme

我是一名 ios 应用程序开发人员。我们已经实现了一个自定义 URL 方案“my_app://section_name”左右，如果在用户的移动浏览器中打开链接，它会将用户重定向到应用程序中的特定部分。

我们希望能够发布这些 URL 并让用户在他们的移动设备上单击它们以打开应用程序，但是它只能单击一次（当您单击关闭时，也许您单击错误然后您想再次单击它但是这没用 ）

我希望这不是一个太愚蠢的问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T18:42:49.450

您应该考虑的一个解决方案是不直接共享 URI 方案，而是在您的 Web 服务器上创建一个页面来处理这个问题。事实上，如果您希望能够与路径共享完整的 URI 方案，您最好构建一个 Web 服务器来动态生成具有 URI 方案重定向的页面。

这是对我们在[Branch](https://branch.io)构建的内容的过度简化表示。这包括一些帮助您入门的代码，尽管 Web 服务器需要一些此处未描述的设置。

1.  而不是 testapp://some.data.here，您将链接到[http://yoursite.com/hosted-redirect/some.data.here](http://yoursite.com/hosted-redirect/some.data.here)。

2.  你的服务器应该监听 /hosted-redirect 路由，在此处获取 some.data.here 并构建以下页面（此处为正文）：

[![代码](../Images/7ce8105cdf3cff1311fa3003dcce6ac8.png)](https://i.stack.imgur.com/Crbfq.png)
[（来源：[derrrick.com](http://derrrick.com/stackoverflow/code.png)）]

因此，您的服务器必须生成并响应此页面，并在任何时候请求[http://yoursite.com/hosted-redirect/some.data.here](http://yoursite.com/hosted-redirect/some.data.here)时填写 some.data.here 。

轻量级节点应用程序可以使用单个文件执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:45:42.063

确保在发布后检查推文正文。

这可能是由于 URL 缩短器造成的，特别是如果推文是从 iOS 5 Twitter 框架发布的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:08:00.847

我对 url 方案有类似的问题。我们可以将它们包含在电子邮件和短信中，它们会突出显示并正常工作。

不幸的是，当我们对推文做同样的事情时，iOS Twitter 客户端无法识别特殊的 URL 方案，因此用户无法点击它来打开我们的应用程序。

相当大的疏忽，我想。其他人有任何喜悦，包括推文中的特殊 URL 方案链接吗？

# asp.net - 来自用户/show.json twitter 请求的 400 错误请求

> ID：13695459
> 
> 赞同：0
> 
> 时间：2012-12-04T03:08:22.597
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, twitter

我正在使用 Twitter OAuth 提供程序登录我的网站。这很好用；我可以登录并获取访问令牌。我想向服务器发出额外的请求以获取一些用户信息。使用 1.1 API，我这样做：

```
var request = HttpWebRequest.Create("https://api.twitter.com/1.1/users/show.json?screen_name=name");
var response = request.GetResponse(); //400 bad request error 
```

同样，我已经成功登录，此时我还没有提出任何成功的请求，所以我没有受到速率限制。知道我的问题是什么吗？

我可以使用 URL: 使之前的 API 正常工作`http://api.twitter.com/1/users/show.json?screen_name=name`。但不是新的 URL。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:49:18.873

根据[响应代码的 Twitter 开发人员文档，](https://dev.twitter.com/docs/error-codes-responses)在这种情况下您会得到 400：

> 请求无效。随附的错误消息将解释原因。这是 1.0 版本限速期间将返回的状态码。在 API v1.1 中，未经身份验证的请求被视为无效，您将收到此响应。

看到你的代码（你的 URL 是正确的并且你使用 1.1 版本的 API）我认为你忘记[授权请求了](https://dev.twitter.com/docs/auth/authorizing-request)。

# opengl - 将 glColorPointer 与 glDrawElements 一起使用不会绘制任何内容

> ID：13695464
> 
> 赞同：0
> 
> 时间：2012-12-04T03:08:38.773
> 
> 标签：opengl

我正在为一个项目制作均匀的颜色球体，但遇到了一个问题。球体运行良好，但是当我尝试使用 glColorPointer 为它们着色时，它们停止出现。当我调用 glGetError 时，OpenGL 没有显示任何错误，所以我不知道为什么会发生这种情况。

生成顶点、颜色等的代码：

```
void SphereObject::setupVertices()
{
    //determine the array sizes
    //vertices per row (+1 for the repeated one at the end) * three for each coordinate
    //times the number of rows
    int arraySize = myNumVertices * 3;
    myNumIndices = (myVerticesPerRow + 1) * myRows * 2;
    myVertices = new GLdouble[arraySize];
    myIndices = new GLuint[myNumIndices];
    myNormals = new GLdouble[arraySize];
    myColors = new GLint[myNumVertices * 4];

    //use spherical coordinates to calculate the vertices
    double phiIncrement = 360 / myVerticesPerRow;
    double thetaIncrement = 180 / (double)myRows;
    int arrayIndex = 0;
    int colorArrayIndex = 0;
    int indicesIndex = 0;
    double x, y, z = 0;

    for(double theta = 0; theta <= 180; theta += thetaIncrement)
    {
        //loop including the repeat for the last vertex
        for(double phi = 0; phi <= 360; phi += phiIncrement)
        {
            //make sure that the last vertex is repeated
            if(360 - phi < phiIncrement)
            {
                x = myRadius * sin(radians(theta)) * cos(radians(0));
                y = myRadius * sin(radians(theta)) * sin(radians(0));
                z = myRadius * cos(radians(theta));
            }
            else
            {
                x = myRadius * sin(radians(theta)) * cos(radians(phi));
                y = myRadius * sin(radians(theta)) * sin(radians(phi));
                z = myRadius * cos(radians(theta));
            }

            myColors[colorArrayIndex] = myColor.getX();
            myColors[colorArrayIndex + 1] = myColor.getY();
            myColors[colorArrayIndex + 2] = myColor.getZ();
            myColors[colorArrayIndex + 3] = 1;

            myVertices[arrayIndex] = x;
            myVertices[arrayIndex + 1] = y;
            myVertices[arrayIndex + 2] = z;

            if(theta <= 180 - thetaIncrement)
            {
                myIndices[indicesIndex] = arrayIndex / 3; 

                myIndices[indicesIndex + 1] = (arrayIndex / 3) + myVerticesPerRow + 1;

                indicesIndex += 2;
            }

            arrayIndex += 3;
            colorArrayIndex += 4;
        }
    }
} 
```

以及实际渲染事物的代码

```
void SphereObject::render()
{
    glPushMatrix();
    glPushClientAttrib(GL_CLIENT_VERTEX_ARRAY_BIT);
    glEnableClientState(GL_COLOR_ARRAY);
    glColorPointer(4, GL_INT, 0, myColors);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_DOUBLE, 0, myVertices);
    glDrawElements(GL_QUAD_STRIP, myNumIndices, GL_UNSIGNED_INT, myIndices);
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
    glPopClientAttrib();
    glPopMatrix();
} 
```

任何和所有的帮助将不胜感激。由于某种原因，我真的很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:03:49.387

当您使用 GL_INT（或任何整数类型）作为颜色指针时，它会将可能的最大整数值线性映射到 1.0f（最大颜色）和 0 到 0.0f（最小颜色）。

因此，除非您的 RGB 和 A 值以数十亿为单位，否则它们可能会显示为完全黑色（或如果启用，则为透明）。我看到你有 alpha = 1，它在转换为浮点数后基本上为零。

# javascript - Javascript / Jquery 使用哪个模板系统？

> ID：13695465
> 
> 赞同：2
> 
> 时间：2012-12-04T03:08:39.157
> 
> 标签：javascript, jquery

几年来，我一直`jQuery.tmpl()`在我的项目中使用模板系统。但是最近我听说这个项目已被弃用/不再开发。

我的问题是，哪个是 jquery 官方认可的最好的模板/视图系统作为 jQuery.tmpl 的替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:12:33.470

使用[模板选择器](http://garann.github.com/template-chooser/)进行选择。

也检查[JSRender](http://borismoore.github.com/jsrender/demos/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:23:06.513

它与 JQuery 无关，但我在一个月前创建了自己的模板解决方案，允许您在 HTML 页面中开发模板（无论如何都应该在其中开发 IMO 'HTML' 模板）。

[https://github.com/jsweeneydev/HTMLTemplate](https://github.com/jsweeneydev/HTMLTemplate)

非常简单，没有依赖关系，并且在向页面添加元素时它不会（嗯，不应该）破坏事件监听器之类的东西。在独立项目上进行测试。

# xcode - Mac OS X 代码签名和可执行文件验证

> ID：13695466
> 
> 赞同：9
> 
> 时间：2012-12-04T03:08:41.890
> 
> 标签：xcode, macos, code-signing, pki

我在一个垂直市场的 Mac 应用程序上工作，该应用程序使用 USB 加密狗来确保用户付费。它的成本足够高，需求也足够大，以至于“黑帽”试图破解加密狗方案，因此应用程序在运行时检查可执行文件和关键资源文件，如果有东西被篡改，程序将无法运行。

随着基于 PKI（公钥基础设施）的代码签名在 Mac 世界中变得越来越普遍，我正在考虑改用它来进行运行时验证，这将产生让 Gatekeeper 满意的良好副作用。

但是，Apple 的兴趣与我的兴趣大不相同。他们的重点是让用户满意，所以如果一个应用程序的签名不正确，Mac OS X 会简单地询问用户是否要运行它。我的重点是阻止破解者，所以如果我的应用程序的签名不正确，我根本不希望它做任何对最终用户有用的事情。

所以我希望我的应用程序能够在运行时使用 Apple 的签名验证它自己的可执行文件和资源。

此外，根据我对提供 Mac OS X 进行验证的库的阅读，它们只是对验证可执行文件的请求给出“是”或“否”的答案。令我震惊的是，这很容易以多种方式受到“黑帽”攻击 - 例如，可以简单地用总是说“是的，这是有效的”的工具替换 Apple 的工具，无论是在系统目录中还是通过更改这些工具的搜索路径。所以我认为将完整的签名验证代码集构建到我的应用程序中可能是一个好主意。

所以我有几个问题：

1.  哪些 PKI 库/API 可用于让应用验证其自己的可执行文件和已使用 Apple 的协同设计系统签名的资源？
2.  这些库有可用的源代码吗？
3.  我对使用 Apple 随 Mac OS X 提供的 PKI 库的安全问题是否有效，或者它们是否比我想象的更安全？
4.  有没有人愿意分享这种事情的经验？还有其他陷阱或提示吗？

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:37:52.223

为了回答上面的 #1 和 #2，Apple 已将其用于创建和验证数字签名的代码开源为 libsecurity_codesigning。因此，开发人员可以将其构建到他们的应用程序中，让它验证自己的签名。

或者，这个库的 MacOS 版本可以由应用程序使用 - 但 API 是私有的，所以这是一个陷阱。在这个链接上有一个[简短的讨论](http://codepimpsdotorg.blogspot.com/2009/03/using-code-signing-in-os-x.html)。

# php - node.js 如何处理故意大（和坏）的 http 请求

> ID：13695468
> 
> 赞同：3
> 
> 时间：2012-12-04T03:08:43.190
> 
> 标签：php, node.js

我正在使用节点进行一些项目，我编写的每一行代码都包含很多关于有人如何破坏我的节点进程的想法。

现在我在想这个：

```
require('http').createServer(function(req, res)) {
    //DEAL WITH REQUEST HERE
  }.listen(port, net); 
```

这是设置服务器和处理请求的标准代码。

假设我想关闭该节点进程，我可以发送带有大量数据的 POST 请求，并且 node.js 将花费大量时间（和带宽）来接收所有这些请求。

有没有办法避免这种情况？

PHP Pros：你通常如何处理这个问题？

有没有办法告诉节点或 php（可能是 apache）忽略来自某些 IP 的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:13:20.193

您可以限制 http 请求的大小。这是您可以使用的中间件。

[https://github.com/senchalabs/connect/blob/master/lib/middleware/limit.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/limit.js)

[http://www.senchalabs.org/connect/middleware-limit.html](http://www.senchalabs.org/connect/middleware-limit.html)

PS[与 node.js 中的最大请求长度重复的可能性](https://stackoverflow.com/questions/8696148/maximum-request-lengths-in-node-js)

要在 node.js 中获取 IP 地址，您可以尝试`request.connection.remoteAddress`.

# actionscript-3 - AS3 AIR 移动（iOS 和 Android）用户界面选项

> ID：13695478
> 
> 赞同：1
> 
> 时间：2012-12-04T03:10:36.060
> 
> 标签：actionscript-3, air

我正在为移动设备开发 AIR 应用程序，并一直在寻找 UI 组件/扩展，但只遇到了仍然有点问题的 Feathers。我想知道是否有人有任何好的资源来实现：

*   下拉/可选列表
*   数据/项目清单
*   输入字段

如果我可以使用本机选项，我会很高兴，但如果不可能的话，我会理解。

# symfony - 我应该如何使用事件侦听器更改参数的值？

> ID：13695484
> 
> 赞同：0
> 
> 时间：2012-12-04T03:11:06.263
> 
> 标签：symfony

非常简短的问题：我想知道更改传递给事件的参数值的最佳方法是否是通过引用传递它？由于某种原因，我有点犹豫要不要这样做，只是觉得这里出了点问题，但不确定是什么。

根据要求的一些示例代码：

```
class CoreEvent extends \Symfony\Component\EventDispatcher\Event
{
    /**
     * @var storing the current page content
     */
    private $content;

    /**
     * sets content
     *
     * @param $content
     */
    public function setContent($content)
    {
        $this->content = $content;
    } 

    /**
     * gets content
     *
     * @return mixed
     */
    public function getContent()
    {
        return $this->content;        
    }

} 
```

设置事件

```
$core_event= new CoreEvent();
$content = "some content";
$core_event->setContent($content); 
```

以下是示例侦听器代码：

```
$this->eventDispatcher->addListener("onPageEnd", array($this, 'onPageEnd')); 
```

调度员：

```
$container->get('event_dispatcher')->dispatch("onPageEnd", $core_event); 
```

现在说如果我希望调度程序调用的函数（假设许多侦听器正在侦听同一事件）能够更改/修改 $content，似乎有两种方法：

1.  第一种方法是更改​​内容，然后使用上面定义的 setContent 将内容设置回事件
2.  第二种方法是通过引用传递内容（我们将不得不修改 setContent 和 getContent abit 来设置和获取内容）

# java - 将自定义对象从 applet 传递到 servlet

> ID：13695487
> 
> 赞同：1
> 
> 时间：2012-12-04T03:11:20.427
> 
> 标签：java, servlets, applet, classnotfoundexception, urlconnection

我有一个 servlet，我想通过`UrlConnection`一些对象。当我测试它时，它工作得很好。当我通过 Java 原生对象（`String`，`File`..）。但是当我尝试传递我自己的`Object`（我自己的类的实例）时，对象通过正确发送到 Servlet`ObjectOutputStream`但是当我想在 servlet 端恢复对象时它不起作用。它会引发找不到我的班级的异常。

我`MyObject`在带有小程序的项目中有类，它被加载并发送到 servlet，然后`MyObject`我的 servlet 包中也有类......那么我必须在哪里放置`MyObject`类来工作呢？

这是我的小程序代码，它`MyObject`通过以下方式将实例发送到 servlet`URLConnection`

```
 URLConnection con = null;
        ObjectOutputStream outputToServlet = null;
        ObjectInputStream inputFromServlet = null;
        MyObject my = new MyObject("200");
//open Url connection
        con = CommunicationAgent.openConnectionWithServlet(CommunicationAgent.setUrlForServletConnection());
        con.setDefaultUseCaches(false);
        con.setDoOutput(true);
        con.setDoInput(true);

// creating ObjectOutputStream
        try {
            outputToServlet = new ObjectOutputStream(con.getOutputStream());
        } catch (IOException ex) {
            Logger.getLogger(SoundAppletSimpleVersion.class.getName()).log(Level.SEVERE, null, ex);
        }

//Send MyObject instance to server      
        try {
            outputToServlet.writeObject(my);

        } catch (IOException ex) {
            Logger.getLogger(SoundAppletSimpleVersion.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

这是来自我的 servlet 的代码，很容易从请求对象中获取流，然后我想将传入的对象复制到 `MyObject`servlet 中的实例。这是一个问题并抛出异常

```
ObjectInputStream input = new ObjectInputStream(request.getInputStream());
        MyObject my = null;
        try {
            my = (MyObject) input.readObject();
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(Servlet.class.getName()).log(Level.SEVERE, null, ex);
            System.out.print("nepovedlo se precist objekt");
        } 
```

Tomcat中抛出异常

```
INFO: Reloading Context with name [/Rozhlas_jsf] is completed
XII 04, 2012 3:43:22 DOP. Servlets.Servlet processRequest
SEVERE: null
java.lang.ClassNotFoundException: SoundApplet.MyObject
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:622)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at Servlets.Servlet.processRequest(Servlet.java:42)
    at Servlets.Servlet.doPost(Servlet.java:120)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

并来自 Javaconsole

```
network: Connecting http://localhost:8084/Rozhlas_jsf/Servlet with proxy=DIRECT
XII 04, 2012 3:44:26 DOP. SoundApplet.SoundAppletSimpleVersion jButton8ActionPerformed
SEVERE: null
java.io.IOException: Server returned HTTP response code: 500 for URL: http://localhost:8084/Rozhlas_jsf/Servlet
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at SoundApplet.SoundAppletSimpleVersion.jButton8ActionPerformed(SoundAppletSimpleVersion.java:708)
    at SoundApplet.SoundAppletSimpleVersion.access$1000(SoundAppletSimpleVersion.java:27)
    at SoundApplet.SoundAppletSimpleVersion$12.actionPerformed(SoundAppletSimpleVersion.java:371)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

Exception in thread "AWT-EventQueue-3" java.lang.NullPointerException
    at SoundApplet.SoundAppletSimpleVersion.jButton8ActionPerformed(SoundAppletSimpleVersion.java:717)
    at SoundApplet.SoundAppletSimpleVersion.access$1000(SoundAppletSimpleVersion.java:27)
    at SoundApplet.SoundAppletSimpleVersion$12.actionPerformed(SoundAppletSimpleVersion.java:371)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

我想问题在于安排我的课程。我必须做什么才能正确工作？我需要`MyObject`将实例接收到 servlet 中，然后在 servlet 中与他一起工作。它适用于原生 Java 对象，为什么 Java 无法`MyObject`在`SoundApplet.MyObject`.

在这种情况下，Java 如何处理类。例如，当发送 FIle 对象时，当我在 servlet Java 中收到它时，使用哪个类。`File`我的 Applet 中的库中的`File`类或带有 servlet 的 project 中的库中的类，或者没关系？我对这个问题真的很困惑，请尝试向我解释并提供帮助。

这是 MyObject 类真正放置在 Web 项目中已编译的 SoundApplet.jar 中的图像。 ![在此处输入图像描述](../Images/54cc2c2c9e2c82a1c388427320db7784.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:22:06.680

来自[Apache Tomcat 5.5 Servlet/JSP 容器：快速入门](http://tomcat.apache.org/tomcat-5.5-doc/class-loader-howto.html)：

> *   ..
> *   对于必须在所有 Web 应用程序之间共享的类和资源，将解压缩的类和资源放在 .下`$CATALINA_BASE/shared/classes`，或将包含这些类和资源的 JAR 文件放在`$CATALINA_BASE/shared/lib`.

因此，如果`SoundApplet.MyObject`在 Jar 中（我推荐），请将其放在`lib`目录中。如果它不在 Jar 中，请将类文件放在`classes/SoundApplet`目录中。顺便说一句，包名应该是`alllowercase`，例如 `soundapplet`。

另请注意，该类需要位于至少**2 个不同的位置**，以供 servlet 和 applet 使用。上面概述了服务器类路径，但小程序（或者更确切地说是 JVM）无法访问这些路径中的任何一个。

# java - Java：多个输出流单个文件

> ID：13695488
> 
> 赞同：1
> 
> 时间：2012-12-04T03:11:30.477
> 
> 标签：java, fileoutputstream

我需要读取多个小文件并将它们附加到一个更大的单个文件中。

```
Base64OutputStream baos = new Base64OutputStream(new FileOutputStream(outputFile, true));

for (String fileLocation : fileLocations) {
InputStream fis = null; 
        try
        {
            fis = new FileInputStream(new File(fileLocation));
            int bytesRead = 0;
            byte[] buf = new byte[65536];
            while ((bytesRead=fis.read(buf)) != -1) {
                if (bytesRead > 0) baos.write(buf, 0, bytesRead);
            }
        }
        catch (Exception e) { 
            logger.error(e.getMessage());
        }
        finally{
            try{
                if(fis != null)
                    fis.close();
            }
            catch(Exception e){
                logger.error(e.getMessage());
            }
        }
} 
```

一切都很标准，但我发现，除非我为每个输入文件打开一个新的 baos（将其包含在循环中），否则 baos 编写的第一个文件之后的所有文件都是错误的（输出不正确）。

问题：

*   有人告诉我，为同一资源来回打开/关闭输出流不是一个好习惯，为什么？
*   为什么使用单个输出流不能提供与多个单独输出流相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:45:41.383

也许问题在于，如果您假设在 base64 中进行编码，则连接多个文件的结果应该与连接每个文件的 base64 编码的结果相同？情况并非如此。base64 将三个连续输入字节的组编码为 4 个 ascii 字符，因此，除非您知道每个文件的大小是三的倍数，否则 base64 编码将产生完全不同的输出。

# asp.net-mvc - ViewBag 和 HTML.Textbox 下的红线对于 Views 中的 helpers

> ID：13695497
> 
> 赞同：0
> 
> 时间：2012-12-04T03:12:37.323
> 
> 标签：asp.net-mvc, asp.net-mvc-4, visual-studio-2012

我已经安装了 MVC4 附带的 Visual Studio 2012，并打开了一个在 MVC3 中完成的项目。

根据我的观点，所有参考：

```
ViewBag.<Property> 
```

显示红色挥手线，说“动态库丢失”，并且

```
HTML.TextBoxFor(m => m.Property)
HTML.HiddenFor(m => m.Property)
etc... 
```

显示错误“无法从使用中推断出参数”。

我在其他不相关的线程中找到了答案，所以我在这里打开这个问题来帮助其他人，因为我没有在谷歌中找到它来寻找主题。下面的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:12:37.323

在 web.config 文件中：

```
<compilation debug="true"> 
```

将其更改为：

```
<compilation debug="true" targetFramework="4.0"> 
```

感谢[Jim](https://stackoverflow.com/users/1102410/jim)在这个[问题上发表了一条小小的评论](https://stackoverflow.com/questions/4969321/the-type-arguments-cannot-be-inferred-from-the-usage-try-specifying-the-type-ar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T16:49:00.930

我花了几个小时尝试解决这个类似的问题。所有@Html 助手下的红线。我在 SOF 和其他网站上阅读的所有内容都不起作用。该网络应用程序将编译并运行良好。

我解决问题的方法是将所有代码上传到我的 Visual Studio Online 环境。删除我本地机器上的项目文件夹/解决方案。关闭 Visual Studio。打开 Visual Studio。连接到团队资源管理器并从源代码管理资源管理器获取最新信息。

最后，在 VS 中转到文件 > 打开 > 项目并打开项目 .sln 文件。

所有红线和 Visual Studio 缓存/临时文件都已清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-29T18:34:18.167

这是答案：

在您的 Web.Config 文件中，确保编译目标框架与 httpRuntime 目标框架版本匹配，例如：

```
<system.web>
    <authentication mode="None"/>
    <compilation debug="true" targetFramework="4.6.1"/>
    <httpRuntime targetFramework="4.6.1"/>
    <httpModules>
      <add name="ApplicationInsightsWebTracking" type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web"/>
    </httpModules>
  </system.web> 
```

# c# - 执行永无止境的任务的正确方法。（计时器与任务）

> ID：13695499
> 
> 赞同：97
> 
> 时间：2012-12-04T03:12:44.080
> 
> 标签：c#, multithreading, timer, task-parallel-library, .net-4.5

因此，只要应用程序正在运行或请求取消，我的应用程序就需要几乎连续地执行一个操作（每次运行之间暂停 10 秒左右）。它需要做的工作可能需要长达 30 秒。

使用 System.Timers.Timer 并使用 AutoReset 确保它在前一个“滴答”完成之前不执行操作是否更好。

或者我应该在 LongRunning 模式下使用带有取消令牌的一般任务，并在其中有一个常规的无限 while 循环，调用在 10 秒 Thread.Sleep 之间进行工作的操作？至于异步/等待模型，我不确定它在这里是否合适，因为我没有任何工作返回值。

```
CancellationTokenSource wtoken;
Task task;

void StopWork()
{
    wtoken.Cancel();

    try 
    {
        task.Wait();
    } catch(AggregateException) { }
}

void StartWork()
{
    wtoken = new CancellationTokenSource();

    task = Task.Factory.StartNew(() =>
    {
        while (true)
        {
            wtoken.Token.ThrowIfCancellationRequested();
            DoWork();
            Thread.Sleep(10000);
        }
    }, wtoken, TaskCreationOptions.LongRunning);
}

void DoWork()
{
    // Some work that takes up to 30 seconds but isn't returning anything.
} 
```

或者只是在使用其 AutoReset 属性时使用一个简单的计时器，然后调用 .Stop() 来取消它？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-04T21:54:58.190

我会为此使用[TPL 数据流](http://nuget.org/packages/Microsoft.Tpl.Dataflow)（因为您使用的是 .NET 4.5 并且它在[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)内部使用）。您可以轻松地创建一个[`ActionBlock<TInput>`](http://msdn.microsoft.com/en-us/library/hh194684.aspx)在处理其操作并等待适当的时间后将项目发布到自身。

首先，创建一个工厂来创建你永无止境的任务：

```
ITargetBlock<DateTimeOffset> CreateNeverEndingTask(
    Action<DateTimeOffset> action, CancellationToken cancellationToken)
{
    // Validate parameters.
    if (action == null) throw new ArgumentNullException("action");

    // Declare the block variable, it needs to be captured.
    ActionBlock<DateTimeOffset> block = null;

    // Create the block, it will call itself, so
    // you need to separate the declaration and
    // the assignment.
    // Async so you can wait easily when the
    // delay comes.
    block = new ActionBlock<DateTimeOffset>(async now => {
        // Perform the action.
        action(now);

        // Wait.
        await Task.Delay(TimeSpan.FromSeconds(10), cancellationToken).
            // Doing this here because synchronization context more than
            // likely *doesn't* need to be captured for the continuation
            // here.  As a matter of fact, that would be downright
            // dangerous.
            ConfigureAwait(false);

        // Post the action back to the block.
        block.Post(DateTimeOffset.Now);
    }, new ExecutionDataflowBlockOptions { 
        CancellationToken = cancellationToken
    });

    // Return the block.
    return block;
} 
```

我选择了`ActionBlock<TInput>`一个[`DateTimeOffset`结构](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx)；你必须传递一个类型参数，它也可以传递一些有用的状态（如果你愿意，你可以改变状态的性质）。

另外，请注意，`ActionBlock<TInput>`默认情况下一次只处理*一项*，因此您可以保证只处理一项操作（这意味着，当它自己调用[扩展方法](http://msdn.microsoft.com/en-us/library/hh194836.aspx)时，您不必处理[重入](http://en.wikipedia.org/wiki/Reentrancy_%28computing%29)）。[`Post`](http://msdn.microsoft.com/en-us/library/hh194836.aspx)

我还将[`CancellationToken`结构](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)传递给了构造函数`ActionBlock<TInput>`和[`Task.Delay`方法](http://msdn.microsoft.com/en-us/library/hh194845.aspx)调用；如果流程被取消，取消将在第一时间发生。

从那里开始，您可以轻松地重构代码以存储由实现的[`ITargetBlock<DateTimeoffset>`接口](http://msdn.microsoft.com/en-us/library/hh194833.aspx)`ActionBlock<TInput>`（这是表示作为消费者的块的更高级别的抽象，并且您希望能够通过调用`Post`扩展方法来触发消费）：

```
CancellationTokenSource wtoken;
ActionBlock<DateTimeOffset> task; 
```

你的`StartWork`方法：

```
void StartWork()
{
    // Create the token source.
    wtoken = new CancellationTokenSource();

    // Set the task.
    task = CreateNeverEndingTask(now => DoWork(), wtoken.Token);

    // Start the task.  Post the time.
    task.Post(DateTimeOffset.Now);
} 
```

然后你的`StopWork`方法：

```
void StopWork()
{
    // CancellationTokenSource implements IDisposable.
    using (wtoken)
    {
        // Cancel.  This will cancel the task.
        wtoken.Cancel();
    }

    // Set everything to null, since the references
    // are on the class level and keeping them around
    // is holding onto invalid state.
    wtoken = null;
    task = null;
} 
```

为什么要在这里使用 TPL 数据流？几个原因：

**关注点分离**

该`CreateNeverEndingTask`方法现在可以说是创建您的“服务”的工厂。您可以控制它何时启动和停止，它是完全独立的。您不必将计时器的状态控制与代码的其他方面交织在一起。您只需创建块、启动它并在完成后停止它。

**更有效地使用线程/任务/资源**

TPL 数据流中块的默认调度程序与 a 相同`Task`，即线程池。通过使用`ActionBlock<TInput>`来处理您的操作以及对 的调用`Task.Delay`，您可以在您实际上没有做任何事情时让出对您正在使用的线程的控制。诚然，当您生成将处理延续的新时，这实际上会导致一些开销`Task`，但这应该很小，考虑到您没有在一个紧密的循环中处理这个（您在调用之间等待十秒钟）。

如果该`DoWork`函数实际上可以被设置为可等待的（即，它返回 a `Task`），那么您可以（可能）通过调整上面的工厂方法以采用 a[`Func<DateTimeOffset, CancellationToken, Task>`](http://msdn.microsoft.com/en-us/library/bb534647.aspx)而不是a 来进一步优化它`Action<DateTimeOffset>`，如下所示：

```
ITargetBlock<DateTimeOffset> CreateNeverEndingTask(
    Func<DateTimeOffset, CancellationToken, Task> action, 
    CancellationToken cancellationToken)
{
    // Validate parameters.
    if (action == null) throw new ArgumentNullException("action");

    // Declare the block variable, it needs to be captured.
    ActionBlock<DateTimeOffset> block = null;

    // Create the block, it will call itself, so
    // you need to separate the declaration and
    // the assignment.
    // Async so you can wait easily when the
    // delay comes.
    block = new ActionBlock<DateTimeOffset>(async now => {
        // Perform the action.  Wait on the result.
        await action(now, cancellationToken).
            // Doing this here because synchronization context more than
            // likely *doesn't* need to be captured for the continuation
            // here.  As a matter of fact, that would be downright
            // dangerous.
            ConfigureAwait(false);

        // Wait.
        await Task.Delay(TimeSpan.FromSeconds(10), cancellationToken).
            // Same as above.
            ConfigureAwait(false);

        // Post the action back to the block.
        block.Post(DateTimeOffset.Now);
    }, new ExecutionDataflowBlockOptions { 
        CancellationToken = cancellationToken
    });

    // Return the block.
    return block;
} 
```

当然，将整个方法编织`CancellationToken`到您的方法（如果它接受一个）将是一个很好的做法，这是在此处完成的。

这意味着您将拥有一个`DoWorkAsync`具有以下签名的方法：

```
Task DoWorkAsync(CancellationToken cancellationToken); 
```

您必须更改（仅稍微更改，并且您不会在此处放弃关注点分离）该`StartWork`方法来解释传递给该`CreateNeverEndingTask`方法的新签名，如下所示：

```
void StartWork()
{
    // Create the token source.
    wtoken = new CancellationTokenSource();

    // Set the task.
    task = CreateNeverEndingTask((now, ct) => DoWorkAsync(ct), wtoken.Token);

    // Start the task.  Post the time.
    task.Post(DateTimeOffset.Now, wtoken.Token);
} 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-12-04T03:33:55.580

我发现新的基于任务的界面对于执行此类操作非常简单——甚至比使用 Timer 类更容易。

您可以对示例进行一些小的调整。代替：

```
task = Task.Factory.StartNew(() =>
{
    while (true)
    {
        wtoken.Token.ThrowIfCancellationRequested();
        DoWork();
        Thread.Sleep(10000);
    }
}, wtoken, TaskCreationOptions.LongRunning); 
```

你可以这样做：

```
task = Task.Run(async () =>  // <- marked async
{
    while (true)
    {
        DoWork();
        await Task.Delay(10000, wtoken.Token); // <- await with cancellation
    }
}, wtoken.Token); 
```

这样，如果在 内部，取消将立即发生`Task.Delay`，而不必等待`Thread.Sleep`完成。

此外，使用`Task.Delay`over`Thread.Sleep`意味着您不会在睡眠期间占用任何不做任何事情的线程。

如果可以的话，您还可以`DoWork()`接受取消令牌，并且取消的响应速度会更快。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-07T00:29:15.800

这是我想出的：

*   继承`NeverEndingTask`并覆盖`ExecutionCore`您想要做的工作的方法。
*   更改`ExecutionLoopDelayMs`允许您调整循环之间的时间，例如，如果您想使用退避算法。
*   `Start/Stop`提供同步接口来启动/停止任务。
*   `LongRunning`意味着您将获得一个专用线程`NeverEndingTask`。
*   `ActionBlock`与上面的基于解决方案不同，此类不会在循环中分配内存。
*   下面的代码是草图，不一定是生产代码:)

：

```
public abstract class NeverEndingTask
{
    // Using a CTS allows NeverEndingTask to "cancel itself"
    private readonly CancellationTokenSource _cts = new CancellationTokenSource();

    protected NeverEndingTask()
    {
         TheNeverEndingTask = new Task(
            () =>
            {
                // Wait to see if we get cancelled...
                while (!_cts.Token.WaitHandle.WaitOne(ExecutionLoopDelayMs))
                {
                    // Otherwise execute our code...
                    ExecutionCore(_cts.Token);
                }
                // If we were cancelled, use the idiomatic way to terminate task
                _cts.Token.ThrowIfCancellationRequested();
            },
            _cts.Token,
            TaskCreationOptions.DenyChildAttach | TaskCreationOptions.LongRunning);

        // Do not forget to observe faulted tasks - for NeverEndingTask faults are probably never desirable
        TheNeverEndingTask.ContinueWith(x =>
        {
            Trace.TraceError(x.Exception.InnerException.Message);
            // Log/Fire Events etc.
        }, TaskContinuationOptions.OnlyOnFaulted);

    }

    protected readonly int ExecutionLoopDelayMs = 0;
    protected Task TheNeverEndingTask;

    public void Start()
    {
       // Should throw if you try to start twice...
       TheNeverEndingTask.Start();
    }

    protected abstract void ExecutionCore(CancellationToken cancellationToken);

    public void Stop()
    {
        // This code should be reentrant...
        _cts.Cancel();
        TheNeverEndingTask.Wait();
    }
} 
```

# javascript - jQuery通过无序列表制作动画

> ID：13695501
> 
> 赞同：1
> 
> 时间：2012-12-04T03:12:45.403
> 
> 标签：javascript, jquery

我有一个无序列表，ul 本身没有设定高度，而 li 没有设定高度。我试图只显示 5 里并用向上/向下箭头循环它们。我遇到的问题是“向上”按钮。对于此示例，我有 6 个项目，在第六次单击“向上”时，它不再隐藏项目，而是简单地添加到它们，从而破坏了滑块的目的。

HTML

```
<div id="container">
            <a href="#" id="up">Up</a>
            <a href="#" id="down">Down</a>
          <ul>
            <li><span>Gun 1</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 2</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 3</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 4</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 5</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 6</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
          </ul>
        </div> 
```

JS

```
$('#container > ul > li:gt(4)').hide();
$('#up').click(function(e){
    var first = $('#container ul li:first');
    first.hide('fast',function(){
    $('#container ul').append(first.show(500));
    $('#container > ul > li:gt(4)').hide();
});
e.preventDefault();
});
$('#down').click(function(e){
    var last = $('#container ul li:last');
    last.hide('fast',function(){
    $('#container ul').prepend(last.show(500));
    $('#container > ul > li:gt(4)').hide();
});
e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:47:28.563

试试这个..实际上`up`你的onclick试图显示第一个li，而不是你需要显示第六个，所以添加了一行以仅显示索引为的那些li`< 5`

```
$('#container > ul > li:gt(4)').hide();
$('#up').click(function(e){
    var first = $('#container ul li:first');
    first.hide('fast',function(){
       $('#container ul').append(first);  //don't show the first one, just append it
       $('#container ul li:lt(5)').show(500); // add this line
       $('#container > ul > li:gt(4)').hide();
    });
    e.preventDefault();
});
$('#down').click(function(e){
    var last = $('#container ul li:last');
    last.hide('fast',function(){
       $('#container ul').prepend(last.show(500));
       $('#container > ul > li:gt(4)').hide();
    });
   e.preventDefault();
}); 
```

# php - 获取php中的html标签

> ID：13695506
> 
> 赞同：1
> 
> 时间：2012-12-04T03:13:21.197
> 
> 标签：php, html, preg-match

我正在寻找 php 中特定元素的标签，我想我可以通过 preg_match 做到这一点，但我不确定。

基本上我有类似的东西：

```
<label>Some Jazz</label> 
```

我想做的是：

*if tag = label 然后做一些事情，否则做其他事情。*

问题是从 html 标签中获取标签部分。我没有找到这个[答案](https://stackoverflow.com/questions/8594165/php-preg-match-how-to-get-html-tag)。欢迎您的想法。

我没有提到我不想要“一些爵士乐”，我想看看标签是否是标签。- 这是参考一些答案，它让我知道标签之间的内容，而不是标签本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:51:21.890

我喜欢使用 Simple HTML DOM 进行解析

```
http://simplehtmldom.sourceforge.net/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:03:03.833

看看是不是：

```
<?php

//External html or you can set this by string
$html = file_get_contents("http://example.com/"); 

//Parse html to object
$doc = new DOMDocument();
@$doc->loadHTML($html); //To prevent some html errors

//Labels
$labels = $doc->getElementsByTagName('label');

//For each label
for ($i = 0; $i < $labels->length; $i++) {

    $label = $labels->item($i);

    //Check label value
    if($label->nodeValue == 'something') {
        //Do something
    }
    else {
        //Do something
    }
}

?> 
```

# magento - magento 页面无法正常显示

> ID：13695508
> 
> 赞同：-1
> 
> 时间：2012-12-04T03:13:51.113
> 
> 标签：magento, layout

我在服务器上安装了默认主题的magento，然后我输入了一个类别和一个产品来看看它是如何工作的，我发现详细页面的布局不正确，上面没有图片，只有纯文本。我更改为其他主题并重新索引/刷新教练，但它们都没有帮助，magento 是全新安装的，除了添加一些主题和产品之外没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:22:05.370

如果不是大问题，我会重新安装。一定是有什么东西出了问题。

# c# - 如何知道哪个插件/工作流/实体更新数据

> ID：13695509
> 
> 赞同：0
> 
> 时间：2012-12-04T03:13:54.203
> 
> 标签：c#, .net, dynamics-crm-2011, dynamics-crm

在我的插件中，我有一个代码来检查执行上下文深度以避免插件更新自身/实体后的无限循环，但在某些情况下，实体正在从其他插件或深度为 2,3 或 4 的工作流更新，并且针对该特定调用，从那个特定的插件我想处理调用并且即使深度大于 1 也不会停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:28:04.280

也许不同的方法可能会更好？我从来不需要`Depth`在我的插件中考虑。我听说其他人和你做同样的事情（检查深度以避免代码运行两次或更多次），但我通常通过在 Pre Operation 阶段对底层实体进行任何更改来避免这种情况。

例如，如果我的代码在机会更新时更改机会的名称，通过将我的代码置于更新的后期操作阶段，我的代码将通过发送单独的`Update`请求来响应用户更改值到平台以应用更改。这个新的`Update`本身导致我的插件再次触发 - 无限循环。

如果我将我的逻辑放在 Pre-Operation 阶段，我会采取不同的做法：用户的更改会触发插件。在用户的更改提交到平台之前，我的代码被调用。这次我可以看一下在to消息`Target`中发送的那个。如果该属性在 中不存在（即它没有更新），那么我可以将一个使用所需值调用的属性附加到该属性中，并且该值将传递到平台。换句话说，我在提交之前将我的值注入到记录中，从而避免发出另一个请求。因此，我的更改不会导致进一步的插件触发。`InputParameters``Update``name``Target``name``Target``Update`

显然，我认为您的情况更复杂，但如果它不符合相同的模式，我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:48:07.243

我首先同意 Greg 上面所说的一切——如果可能的话，重构设计以避免这种情况。

如果这不可能，您将需要使用[IPluginExecutionContext.SharedVariables](http://msdn.microsoft.com/en-us/library/gg328579.aspx)在插件之间进行通信。

在插件开始时检查 SharedVariable，然后根据需要设置/更新它。您将使用的具体设计将根据您需要管理的复杂性而有所不同。我总是使用带有消息和实体 ID 的字符串 - 很容易序列化和反序列化。然后我总是知道我是否已经针对特定记录执行特定消息。

# python-sphinx - 如何防止 sphinx 将 url 设为超链接？

> ID：13695510
> 
> 赞同：12
> 
> 时间：2012-12-04T03:14:14.647
> 
> 标签：python-sphinx, restructuredtext

在我的文档中，我偶尔会使用“垃圾”网址作为示例，并且不希望它们成为无处可去的超链接。是否有任何语法可以使这些 url 不是超链接？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-04T04:42:28.427

有三种方法可以格式化此类 URL，使它们不是超链接。第一种是将示例 URL 与其他代码示例一样处理并将它们括在反引号中，如下所示：

```
open ``http://www.example.com`` in a web browser 
```

第二种是使用Sphinx[`:samp:`](https://www.sphinx-doc.org/en/master/usage/restructuredtext/roles.html#role-samp)角色，像这样：

```
open :samp:`http://www.example.com` in a web browser 
```

该`:samp:`角色使您可以强调可变部分。因此，例如，您可以指示用户选择的端口号，如下所示：

```
open :samp:`http://www.example.com:{port}` in a web browser 
```

并且单词*port*会显得强调并且省略了大括号。

最后一个选项是在示例 URL 前面加上反斜杠，如下所示：

```
open \http://www.example.com in a web browser 
```

URL 将显示为普通文本，而不是链接或具有任何特殊格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-24T23:36:41.767

除了@ddbeck 答案之外，要转义电子邮件地址，请在 @ 前加上斜杠。

```
login\@<hostname> 
```

# ruby-on-rails - 你如何在 Rails 中定义每个用户的路由？

> ID：13695511
> 
> 赞同：0
> 
> 时间：2012-12-04T03:14:24.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在 Rails 中创建每个用户的视图，并试图找出在 routes.rb 中定义它们的最佳方法。假设我想要以下类型的路径名：

```
/users/1/event_list_view
/users/1/event_map_view
/users/1/aggregated_event_view 
```

所以'/users/1/'之后的端点不是资源，它只是控制器中的另一个端点：

```
class UsersController < ApplicationController
  def event_list_view
  end

  def event_map_view
  end

  def aggregated_event_view
  end
end 
```

我尝试了一些不同的东西，目前有以下，但似乎无法让它工作：

```
 resources :users do
      match '/users/:id/event_list_view' => {:action=>"event_list_view", :controller=>"users"}
      match '/users/:id/event_map_view' => {:action=>"event_map_view", :controller=>"users"}
      match '/users/:id/aggregated_event_view' => {:action=>"aggregated_event_view", :controller=>"users"}
  end 
```

让我知道我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:22:54.733

[成员路线](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)应该允许你做你想做的事：

```
resources :users do
  member do
    get 'event_list_view'
    get 'event_map_view' 
    get 'aggregated_event_view' 
  end
end 
```

我不确定您到底想做什么，但也可能值得考虑替代资源安排。如果您尝试显示与用户关联的所有事件，则为`Event`资源（等）定义索引路由并在那里传递用户参数可能更有意义。

# unix - 命令管道进入子shell

> ID：13695512
> 
> 赞同：3
> 
> 时间：2012-12-04T03:14:36.753
> 
> 标签：unix, tee

和有什么区别

```
cat dat | tee >(wc -l ) | some other command 
```

和

```
cat dat | tee file | wc -l 
```

就幕后发生的事情而言？我可以理解第二个，因为 tee 将流分叉到文件中，也分叉到管道中。但我对第一个感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:31:36.347

第一个符号是 Bash 4.x 的[进程替换](https://www.gnu.org/software/bash/manual/bash.html#Process-Substitution)（不在 3.x 中，或者不是在 3.x 的所有版本中）。

就`tee`它而言，它被赋予了一个文件名（例如`/dev/fd/64`），它可以写入到标准输出中；它实际上是管道写入端的文件描述符。就`wc`目前而言，它读取其标准输入（这是连接到`/dev/fd/64`for的管道的读取端`tee`），并将其答案写入调用管道的 shell 的标准输出（而不是其标准输出`tee`下降）管道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:31:21.233

由于 >( 是 bash 的进程替代，第一行说：将文件 'dat' 的内容发送到其他命令中，同时进程 'wc' 运行，其输入或输出连接到管道，该管道也发送 'dat 的内容'

检查 bash 手册页的“进程替换”。

# wordpress - 如何将 plugin_dir_url 更改为另一个文件夹？

> ID：13695513
> 
> 赞同：2
> 
> 时间：2012-12-04T03:14:39.417
> 
> 标签：wordpress

我有这个用于 shorcodes 的 wordpress 插件。我正在尝试在我的主题中实现这一点，而无需安装它。

如何更改上面写着“plugin_dir_url”的这两行代码，以便从我的模板文件夹中获取文件？

```
class SYMPLE_TinyMCE_Buttons {
function __construct() {
    add_action( 'init', array(&$this,'init') );
}
function init() {
    if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages') )
        return;     
    if ( get_user_option('rich_editing') == 'true' ) {  
        add_filter( 'mce_external_plugins', array(&$this, 'add_plugin') );  
        add_filter( 'mce_buttons', array(&$this,'register_button') ); 
        **wp_localize_script( 'jquery', 'sympleShortcodesVars', array('template_url' => plugin_dir_url( __FILE__ ) ) );**
    }  
}  
function add_plugin($plugin_array) {  
   **$plugin_array['symple_shortcodes'] = plugin_dir_url( __FILE__ ) .'js/symple_shortcodes_tinymce.js';**
   return $plugin_array; 
}
function register_button($buttons) {  
   array_push($buttons, "symple_shortcodes_button");
   return $buttons; 
} 
```

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:20:57.730

`get_bloginfo("template_directory")`应该这样做。

法典：[get_bloginfo()](http://codex.wordpress.org/Function_Reference/get_bloginfo)

# php - 循环遍历多维数组的问题

> ID：13695522
> 
> 赞同：2
> 
> 时间：2012-12-04T03:16:04.940
> 
> 标签：php, arrays, loops, multidimensional-array

我在尝试使用 PHP 循环遍历多维数组时遇到问题。当我使用该`print_r()`功能时，这是我的输出：

```
Array ( [0] => Array ( [fname] => [sname] => [address] => [address2] => [city] => [state] => Select State [zip] => [county] => United States [phone] => [fax] => [email] => [use_email] => on ) 
```

我尝试了几种技术，但似乎都没有奏效。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:20:05.783

最简单的就是使用 foreach 语句：

```
foreach($yourarray as $array_element) {
  $address = $array_element['address'];
  $fname   = $array_element['fname'];
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T03:23:55.770

你可以这样做

```
foreach($array as  $value) {
   foreach($value as  $val) {
    echo $val;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T03:24:06.017

你的代码是：

```
$set = array( 0 => array ( 'fname' => '',
                             'sname' => '',
                             'address' => '',
                             'address2' => '',
                             'city' => '',
                             'state' => 'Select State',
                             'zip' => '',
                             'county' => 'United States',
                             'phone' => '',
                             'fax' => '',
                             'email' => '',
                             'use_email' => 'on')
);

$subArray = $set[0]; // <-- key line
foreach($subArray as $k => $v) {
    printf("key: %s, value: %s\n", $k, $v);
} 
```

输出：

```
key: fname, value: 
key: sname, value: 
key: address, value: 
key: address2, value: 
key: city, value: 
key: state, value: Select State
key: zip, value: 
key: county, value: United States
key: phone, value: 
key: fax, value: 
key: email, value: 
key: use_email, value: on 
```

您需要正确访问索引数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T03:19:40.003

看起来在您想要循环的内容之前还有一个维度。试试这个。

```
foreach($array[0] as $key => $value) {
    echo $key, ': ', $value;
} 
```

# asp.net - jQuery Validation - 只显示一条消息

> ID：13695523
> 
> 赞同：0
> 
> 时间：2012-12-04T03:16:22.380
> 
> 标签：asp.net, jquery-validation-engine

使用 jQuery 验证引擎，如何在使用正则表达式时只在提示中显示一条消息？

我在 asp.net 中使用 jQuery 验证引擎

![这就是我添加新正则表达式时看到的](../Images/e6ec90c03bf35956ce475c4278d840b7.png)

我想隐藏“此字段是必需的”消息并显示来自正则表达式的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T12:52:41.220

您可以为该字段提供一些默认值，它不会显示“此字段为必填项”消息。检查示例，[http://www.position-relative.net/creation/formValidator/demos/demoRegExp.html](http://www.position-relative.net/creation/formValidator/demos/demoRegExp.html)

# visual-studio-2010 - 为什么我不能在 Visual Studio 2010 中创建 Excel VSTO 工作簿项目？

> ID：13695526
> 
> 赞同：5
> 
> 时间：2012-12-04T03:16:45.290
> 
> 标签：visual-studio-2010, vsto, excel-2010

我尝试在 Visual Studio 中创建一个 Excel 2010 工作簿项目。我进入 Visual Studio 并选择新项目并选择 Excel 2010 工作簿，然后我只是得到一个弹出窗口，上面写着“无法创建项目”，没有其他信息

![在此处输入图像描述](../Images/faf09eed90e8599d2d0168e1dbaf1d84.png)

为什么 VS 2010 不允许我创建 Excel 工作簿项目有什么建议？（它确实创建了一个 Excel 插件项目）。上面的这个错误信息不是很有帮助。鉴于错误消息不是很有帮助，无论如何都要调试以获得更多信息，从而使这个问题更容易回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:25:43.590

我遇到了类似的错误 - 为了修复它，在 Excel 中我`Options -> Add-ins -> Manage Excel Add-ins -> Automation ->`选择了“Visual Studio Tools for Office Design-Time Adapter for Excel”。然后重新启动 Excel，并且（如果您遇到同样的问题）您应该一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-10T10:17:22.797

我在使用 Visual Studio 2015 和 Office 2016 时遇到了类似的问题。

原来这[是 Office 最新更新中引入的一个错误](https://social.msdn.microsoft.com/Forums/vstudio/en-US/4d327e21-3531-45f6-97dd-93c1baa7aeb0/)。

要[恢复到旧版本](https://support.microsoft.com/en-us/kb/2770432)，请打开管理员命令提示符并键入：

```
cd %programfiles%\Common Files\Microsoft Shared\ClickToRun
officec2rclient.exe /update user updatetoversion=16.0.6965.2063 
```

看：

*   [错误：无法创建项目。（Excel 2016 VSTO 工作簿）](https://social.msdn.microsoft.com/Forums/vstudio/en-US/4d327e21-3531-45f6-97dd-93c1baa7aeb0/)
*   [如何恢复到早期版本的 Office 2013 或 Office 2016 即点即用](https://support.microsoft.com/en-us/kb/2770432)
*   [Office 365 客户端的更新通道版本的版本和内部版本号](https://technet.microsoft.com/en-us/library/mt592918.aspx#BKMK_ByVersion)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T01:39:19.310

以管理员身份运行 Visual Studio。帮助过我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-13T16:28:36.530

VS2013 中的注意事项：这些是 Com-Addins，没有“Addins”，它们是在启动时加载的。不要更改加载项中的任何内容...自动化！

*   卸载 VSTO 2010 (das ist das für Office 2007 / 2010 / 2013 !)
*   重启
*   修复Office 2010
*   重启
*   重新安装 VSTO
*   重启
*   检查，如果有

    *   C:\Users_USERNAME_\AppData\Roaming\Microsoft\Excel\XLSTART\PERSONAL.xslb

    并删除它（重命名 XLSTSTART）

*   开始菜单 -> VS2013 -> VS-Tools -> 开发人员命令提示符 VS2103（不是本机！） - 作为管理员！

    *   可能删除文件夹 c:\user...\documents\VisualStudio
    *   devenv /resetuserdata
    *   开发环境/设置
*   以用户身份打开开发人员命令提示符 VS2103（不是本机！）

    *   可能删除文件夹 c:\user...\documents\VisualStudio
    *   devenv /resetuserdata
    *   devenv /setup devenv /resetsettings

瞧

问候阿克塞尔

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-18T09:51:27.137

做凯文所做的事情是显而易见的，但它并没有单独起到作用。我意识到我有两个 Office 安装。我删了一个英文的。没有帮助。在某处阅读我应该尝试在办公室和 VSTO 上使用相同的语言。卸载了丹麦版的 Office 并重新安装了英文版，现在它就像一个魅力。

# tomcat - 没有tomcat插件的Grails战争

> ID：13695527
> 
> 赞同：2
> 
> 时间：2012-12-04T03:16:50.250
> 
> 标签：tomcat, grails

当我使用 tomcat 2.2.0 构建 grails 2.1.0 应用程序时，我在 Tomcat 7 上部署时在启动时收到以下错误：

> 信息：validateJarFile(/app/app/webapps/ROOT/WEB-INF/lib/tomcat-embed-core-7.0.27.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class 2012 年 12 月 1 日下午 4:01:01 org.apache.catalina.core.NamingContextListenerlifecycleEvent 严重：创建命名上下文失败：javax.naming.NamingException：上下文是只读的

和

> java.lang.NoClassDefFoundError: org/apache/tomcat/PeriodicEventListener at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:634) at java.security.SecureClassLoader.defineClass(SecureClassLoader .java:142) 在 org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818) 在 org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159) 在 org.apache.catalina。 loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647) 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526) 在 org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)在 org.apache.catalina.core.StandardWrapper.load（StandardWrapper.java：1026)

如果我删除爆炸战争中的 tomcat-* jar 文件，应用程序启动没有问题，或者如果我删除了 tomcat 插件，应用程序启动没有问题。理想情况下，我想在没有插件的情况下构建应用程序，但出于开发目的。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:12:14.763

对于初学者，请使用与您正在使用的 Grails 版本相对应的 Tomcat 插件版本。`run-app`真正的问题是插件应该只在和脚本的开发中可用`run-war`，但不应该最终出现在`war`脚本创建的 WAR 文件中。如果您在 application.properties 中有插件，请将其删除（以及那里的任何其他插件）。这会将插件置于`compile`范围内，并将导致它位于 WAR 文件中。

使用插件的正确方法是在以下部分添加`build`范围依赖：`plugins``BuildConfig.groovy`

```
plugins {
   runtime ":hibernate:$grailsVersion"
   build ":tomcat:$grailsVersion"
} 
```

# opengl-es - glTranslatef() 正在移动我的原点和我的精灵

> ID：13695528
> 
> 赞同：0
> 
> 时间：2012-12-04T03:16:55.123
> 
> 标签：opengl-es, translation

这是交易，我正在用 opengl ES 编写一个 2D 框架/游戏引擎。我正在使用 VBO 和正射投影在整个屏幕上绘制精灵排列（作为测试的一部分），一切都进行得很顺利，直到我不得不使用平移和旋转。我遇到的具体问题是，当我在旋转之前使用 glTranslatef() 应用平移时，该函数不仅会移动精灵，还会移动我的原点，从而打乱了我的整个转换。我 100% 确定它是这样工作的，因为我使用 glTranslatef() 将精灵移动到屏幕大小一半的右侧和底部（是的，我的原点在左上角），然后应用恒定旋转并且东西只是围绕屏幕中心沿圆形路径移动（实际上是旋转，但不像我期望的那样。

如果你想要一些代码，我们去：

```
gl.glTranslatef(-(x+width/2), -(y+height/2), -layer);
gl.glRotatef(angle, 0.0f, 0.0f, -1.0f);
gl.glTranslatef(x+width/2, y+height/2, layer); 
```

在这段代码中，x 和 y 是精灵的位置，height 和 width 是精灵的大小，angle 是旋转的角度，layer 只是将精灵组织成几层的一种形式，非常简单，对?

同样，我的问题是 glTranslatef(); 正在移动精灵和原点，我是在做错什么还是对翻译有误解？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:15:16.807

您可能需要使用 glPushMatrix 和 glPopMatrix 因为您在这些平移和旋转之后所做的任何事情都会受到它们的影响

但是您所描述的实际上是它的工作原理，如果您使用翻译，那将成为您的新来源，因为一旦您进行翻译，之后的所有内容都会受到该翻译的影响，这就是您需要推送和弹出的原因，所以你可以去，推 -> 翻译对象和/或旋转 -> 弹出，然后你可以继续你需要做的任何其他翻译，而不会让之前的翻译影响其他一切

一开始有点混乱，但谷歌周围，你会看到如何正确使用它们

[http://www.khronos.org/opengles/sdk/1.1/docs/man/glPushMatrix.xml](http://www.khronos.org/opengles/sdk/1.1/docs/man/glPushMatrix.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:14:13.690

我认为您误解了矩阵在 openGL 中的工作方式。当您执行诸如 glRotatef 和 glTranslatef 之类的矩阵运算时，矩阵会相乘，从而影响基向量。例如，假设我们只绘制一个从 (0,0,0) 开始的点。如果您调用 translate(1,0,0)，则该点将位于 (1,0,0) 中，之后您调用 rotate(90, 0, 0, 1) 并且您的点将位于与之前相同的位置，但旋转。现在最后一个电话是 translate(-1,0,0) 而你的点在 (1,-1,0) （而不是你开始的地方）！

这就是您在“代码片段”中所做的。问题是你没有指定你真正想做的事情，你如何定义你的 verices 也是相对的。如果你想要一个像视图这样的东西，你想要控制一些图像来改变位置和旋转，您可能想要创建一个方形顶点缓冲区，其两个维度（或（-width/2，-height/2）到（width/2，height/2））的值都在 -1 到 1 之间。在这种情况下，对象的基本中心位于 (0,0,0) 中，这可能是您想要旋转它的点（或者我在这里错了吗？）。所以当你想用原点定义物体的位置时，你需要写 translatef(x+width/2,y+height/2,..)。

至于在这种情况下绘制的整个过程：如果您希望原点在（x，y，z），带有（宽度，高度）并旋转（角度）这里是顺序

```
glTranslatef(x,y,z)
glTranslatef(width/2,height/2,0)
glScalef(width/2,height/2, 1) //only if verices defined at (-1,1)
glRotatef(angle, 0, 0, 1) 
```

请注意，在这种情况下，由于您围绕其中心旋转对象，因此其原点将不再位于 (x,y,z) 处。

一般来说，我建议尽可能远离 glRotate、glTranslate 和 glScale。他们往往使事情变得非常讨厌。所以另一种方法是直接从基向量构造一个矩阵：只需很少的数学，您就可以根据原点、宽度、高度和旋转等参数计算“方形视图”的所有 4 个点。这 4 个点是（A-origin ), (B-左下点), (C-右下点), (D-右上点) 你的基向量是 (BA), (DA) 和归一化(dotProduct((BA), (DA)))这 3 个向量可以插入到 GL 矩阵的左上角 3x3 矩阵（女巫是 4x4 或浮点 [16]），它们代表旋转和缩放，所以您需要添加的只是翻译部分（只需谷歌一下这种方法）。

# java - Android 服务线程

> ID：13695532
> 
> 赞同：0
> 
> 时间：2012-12-04T03:18:01.950
> 
> 标签：java, android, multithreading, service, android-asynctask

我有一个服务，我希望在其中执行一系列密集任务（将位图上传到某个服务器）

假设上传功能是

```
uploadImage(Bitmap bitmap); 
```

什么是最好的方法？

起初我是这样做的（记住数组 ImageMakers 可能有十几个元素）：

```
for (MyImageMaker mim : ImageMakers){
      uploadImage(mim.getImage());
} 
```

我的理由是，因为我没有使用 UI 线程，所以我不需要将这一系列密集任务放在另一个线程上。但后来我想也许我应该使用 ThreadPoolExecutor 来加快速度。

```
 ThreadPoolExecutor executor = (ThreadPoolExecutor)Executors.newFixedThreadPool(5);//5 is arbitrary
   for (MyImageMaker mim : ImageMakers){

 executor.execute(new Runnable(){
      public void run(){
        uploadImage(mim.getImage());
     } 
     }   
  } 
```

我的第一个问题是，这是个好主意吗？

然后我想我想在上传最后一张图片后调用其他函数。使用 ThreadPoolExecutor，最好的方法是什么？

不知道最好的方法，我选择了 AsyncTask。

```
 private class MyTask extends AsyncTask<Void,Void,Void>{

      protected Void doInBackground(Void... arg0) {

          for (MyImageMaker mim : ImageMakers){
                    uploadImage(mim.getImage());
             }

    }

    @Override
    protected void onPostExecute(Void v) {
        anotherFunction();//needs to be called after all images uploaded

    }
} 
```

我想知道哪种技术最好。或者，如果有更好的方法可以在服务中执行一系列密集任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:28:19.813

我认为[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)是更好的方法。

```
protected void onHandleIntent(){
    for (MyImageMaker mim : ImageMakers){
        uploadImage(mim.getImage());
    }
} 
```

# grails - Grails 中的两个数据库

> ID：13695536
> 
> 赞同：1
> 
> 时间：2012-12-04T03:18:57.183
> 
> 标签：grails

我想在 grails 项目中使用 2 个数据库，如何定义 2 个数据库以及域类和控制器类如何指向正确的数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:26:20.470

有一个 Grails 插件可以直接使用 Grails 的 GORM 层使用多个数据源：[http ://burtbeckwith.com/blog/?p=70](http://burtbeckwith.com/blog/?p=70)

但从 grails 2.0 开始，您可以在本地进行。[http://www.grails.org/doc/latest/guide/single.html#multipleDatasources](http://www.grails.org/doc/latest/guide/single.html#multipleDatasources)

# javascript - 下载时打开和关闭新标签页

> ID：13695537
> 
> 赞同：14
> 
> 时间：2012-12-04T03:18:58.677
> 
> 标签：javascript, tabs, greasemonkey

在许多网站上（*Dropbox*就是一个很好的例子），当您单击一个文档进行下载时，它会打开一个新窗口/选项卡，然后出现下载提示，并且该选项卡/窗口会立即自行关闭（同时提示保持打开状态） .

如何使用 javascript 复制这种行为？

我认为一种方法是检测该下载提示的外观，然后使用`window.close()`. 但是，我不确定如何检测该特定提示。

跨浏览器解决方案是首选，但任何可以在 Firefox 中工作的东西都非常感谢。

**澄清**

1.  我在 Greasemonkey 脚本中执行此操作
2.  在新选项卡中打开的“链接”不一定是指向文档的直接链接。有时它是一个简单的页面，在后台开始下载。我指的是具有特殊“下载”页面的网站类型......那些说“您的下载将很快开始，如果没有开始，请点击这里”之类的网站。

**更多说明**：关于上述说明 2 中提到的网站类型，我要做的是单击下载链接，在新窗口中加载特定的下载页面，并在启动下载后关闭窗口.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T11:15:52.927

您想要的内容包含三个基本部分：

1.  您必须拦截下载链接。
2.  您必须在单击时将链接发送到新选项卡，而不仅仅是使用`target="_blank"`. 该选项卡必须使用 javascript 打开，以便允许 javascript 在时机成熟时将其关闭。
3.  您的脚本还必须在“弹出”选项卡上运行/处理，以便它可以检测何时关闭弹出窗口。

有关此讨论，**请参阅[jsFiddle 上的此测试页面](http://fiddle.jshell.net/qy3NP/show/)。** 它的结构是这样的：

```
<div id="downloadLinks">
  <ul>
    <li><a class="dwnPageLink" href="http://fiddle.jshell.net/cDTKj/show/">
            Test file, download page at jsFiddle
        </a>
    </li>
    <li><a class="dwnPageLink" href="http://dw.com.com/redir...">
            TextPad (a great text editor), download page at CNET / Download
        </a>
    </li>
  </ul>
</div> 
```

每个`a.dwnPageLink`链接都会打开一个“下载页面”——它会在短暂的延迟后自动开始文件下载。

# 截取下载链接（`a.dwnPageLink`）：

我们像这样拦截链接：

```
$("#downloadLinks a.dwnPageLink").each (interceptLink);

function interceptLink (index, node) {
    var jNode   = $(node);
    jNode.click (openInNewTab);
    jNode.addClass ("intercepted");
} 
```

请注意，我们还添加了一个 CSS 类，以便我们可以快速查看哪些链接受到了影响。
`openInNewTab`下面会详细介绍。它必须同时打开一个选项卡，并且必须停止正常的链接操作。

# 将链接发送到新选项卡：

我们必须使用`window.open()`来处理链接。如果页面不是通过 来打开的`window.open`，我们的脚本将无法关闭它。

请注意，[`GM_openInTab()`](http://wiki.greasespot.net/GM_openInTab)不能使用，因为它不会导致`window.opener`正确设置，否则不提供关闭打开的选项卡的机制。

新选项卡在 中启动`openInNewTab`，如下所示：

```
function openInNewTab (zEvent) {
    //-- Optionally adjust the href here, if needed.
    var targURL     = this.href;
    var newTab      = window.open (targURL, "_blank");

    //--- Stop the link from doing anything else.
    zEvent.preventDefault ();
    zEvent.stopPropagation ();
    return false;
} 
```

# 处理“弹出”选项卡：

无法从启动页面监视文件对话框。所以我们必须将脚本设置为也在“弹出”选项卡上运行。相应地添加`@include`指令。

我们脚本的弹出部分可以通过监视`beforeunload`事件来检测文件对话框。`beforeunload`浏览器将在打开“文件”对话框之前触发该事件（以及在选项卡关闭之前，但我们可以忽略它）。

但是，我们不能在对话框出现时关闭选项卡。这样做也会关闭对话框。所以我们添加了一个小的时间延迟和一个“确认”对话框，以便选项卡将保持打开状态，直到文件对话框关闭。要清除“确认”对话框，只需点击`Enter`额外的时间（或单击“*确定*” ）。

代码如下所示：

```
$(window).bind ("beforeunload",  function (zEvent) {
    //-- Allow time for the file dialog to actually open.
    setTimeout ( function () {
            /*-- Since the time it takes for the user to respond
                to the File dialog can vary radically, use a confirm
                to keep the File dialog open long enough for the user 
                to act.
            */
            var doClose = confirm ("Close this window?");
            if (doClose) {
                window.close ();
            }
        },
        444 // 0.444 seconds
    );
} ); 
```

# 笔记：

1.  由于脚本将在“列表”页面和“下载”页面上运行，我们可以通过检查来判断哪个是哪个`window.opener`。在由 javascript 打开的页面上，这将具有非空值。
2.  这个问题没有询问在后台加载选项卡。可以做到这一点，取得不同程度的成功，但涉及更多。为此提出一个新问题。

# 完整脚本：

此脚本适用于[测试页面](http://fiddle.jshell.net/qy3NP/show/)和[CNET / 下载页面](http://download.cnet.com/TextPad/3000-2352_4-10002673.html)：

```
// ==UserScript==
// @name        _Download page, auto closer
// @namespace   _pc
// ******** Includes for "List pages" that have the links we might click...
// @include     http://YOUR_SERVER.COM/YOUR_LIST-PAGE_PATH/*
// @include     http://jsbin.com/ozofom/*
// @include     http://fiddle.jshell.net/qy3NP/*
// @include     http://download.cnet.com/*
// ******** Includes for "Popup pages" that do the actual downloads...
// @include     http://YOUR_SERVER.COM/YOUR_POPUP-PAGE_PATH/*
// @include     http://fiddle.jshell.net/cDTKj/*
// @include     http://dw.com.com/redir?*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_addStyle
// @grant       GM_openInTab
// ==/UserScript==
/*- Important: The @include or @match directives must for for both the pages
    that list the download links, AND the pages that do the actual downloading.

    The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var bPageNotOpenedByJavascript = window.opener ? false : true;
if (bPageNotOpenedByJavascript) {
    /***** "Normal" page, which might contain links to special download pages.
    */
    //--- Intercept links to the download pages:
    // For our jsFiddle Test page:
    $("#downloadLinks a.dwnPageLink").each (interceptLink);

    // For CNET/Download:
    $("#downloadLinks div.dlLinkWrapper a").each (interceptLink);

    GM_addStyle ( "                                 \
        a.intercepted {                             \
            background:         lime;               \
        }                                           \
    " );
}
else {
    /***** Page opened by JS in either a popup or new tab.
        This was *most likely* done by us, using window.open.
    */
    $(window).bind ("beforeunload",  function (zEvent) {
        //-- Allow time for the file dialog to actually open.
        setTimeout ( function () {
                /*-- Since the time it takes for the user to respond
                    to the File dialog can vary radically, use a confirm
                    to keep the File dialog open long enough for the user
                    to act.
                */
                var doClose = confirm ("Close this window?");
                if (doClose) {
                    window.close ();
                }
            },
            444 // 0.444 seconds
        );
    } );
}

function interceptLink (index, node) {
    var jNode   = $(node);
    jNode.click (openInNewTab);
    jNode.addClass ("intercepted");
}

function openInNewTab (zEvent) {
    //-- Optionally adjust the href here, if needed.
    var targURL     = this.href;
    var newTab      = window.open (targURL, "_blank");

    //--- Stop the link from doing anything else.
    zEvent.preventDefault ();
    zEvent.stopPropagation ();
    return false;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T03:29:26.797

您可以通过设置简单地使用`<a>`标签`target="_blank"`

```
<a href="http://jqueryui.com/resources/download/jquery-ui-1.9.2.custom.zip" target="_blank">Download</a>​ 
```

演示：http: [//jsfiddle.net/g5Gn5/](http://jsfiddle.net/g5Gn5/)

一旦文件对话框出现，它将打开一个新窗口/选项卡并自动关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-10T13:42:13.150

只需使用这个简单的解决方案：

```
<a href="linkToDownloadFile.html" onclick="download('linkToDownloadFile.html'); return false;">

<script>
    function download(link){
      var popout = window.open(link);
      window.setTimeout(function(){
         popout.close();
      }, 2000);
    }
</script> 
```

# java - 使用 FOP 时禁用 Log4j INFO 级日志记录

> ID：13695538
> 
> 赞同：1
> 
> 时间：2012-12-04T03:19:08.157
> 
> 标签：java, logging, log4j, apache-fop

使用 FOP 生成 PDF 文件时，如何删除 INFO 级别的日志记录？我的 log4j.properties 文件中有这个：

log4j.logger.org.apache.fop = 警告

但我仍然为每个创建的 PDF 文件获取这些：

[INFO] 使用 com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser 作为 SAX2 Parser [INFO] 设置字体

有任何想法吗？我查看了@此条目，但它没有回答我的问题： [从 Logger 过滤不需要的 INFO-Messages](https://stackoverflow.com/questions/4781565/filter-unwanted-info-messages-from-logger)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:00:59.747

您确定日志条目是（a）来自 org.apache.fop 中的一个类和（b）来自 log4j 吗？

它可能是来自 FOP 的子包之一（如 batik）的日志输出。

您可以更改 log4j appender 布局以显示来源类别（例如，

```
log4j.appender.stdout.layout.ConversionPattern=%d %5p (%F:%L) - %m%n 
```

)，那你就知道了。

# plugins - 在 CKEditor 3.6 中添加外部插件

> ID：13695545
> 
> 赞同：1
> 
> 时间：2012-12-04T03:20:11.790
> 
> 标签：plugins, ckeditor

我正在尝试在 ckeditor 中添加一个外部插件，但看起来我没有正确注册我的插件并且它没有显示。

1.- 我尝试将其直接添加到 CKEditor 配置文件中，但没有成功。

```
CKEDITOR.editorConfig = function(config) {
config.toolbar = [
['Bold'],['Italic'],['myplugin']
]
}; 
```

2.-尝试在启动CKEditor时将其添加到html文件中，但也没有奏效。

```
var editor = CKEDITOR.replace( 'editor1',
{

removePlugins : 'forms,table,tabletools',
extraPlugins : 'msugetprop,msuforms,msutable,msutabletools,msumobile',

toolbar : 
    [
        ['Cut','Copy','PasteText','Preview'],
        ['Undo','Redo','-','SelectAll'],
    ['MsuForm','MsuGetProp','MsuCheckbox', 'MsuRadio', 'MsuTextField',         'MsuTextarea', 'MsuSelect', 'MsuButton', 'MsuTable', 'MsuHiddenField'],
    '/',
    ['Styles','-','NumberedList','BulletedList','-','CreateDiv'],
                                                                                       ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],
    ['Link','Unlink','Anchor'],
    ['Source','-','About'],
    ['myplugin'],
    ]
}); 
```

3.- 我的插件在 /ckeditor/plugins/myplugin 下，文件名为 plugin.js

```
(function() {
var o = { exec: function(p) {
url = baseUrl + "/GetSomeData";
$.post(url, function(response) {
alert(response)
});
}
};
CKEDITOR.plugins.add('myplugin', {
init: function(editor) {
editor.addCommand('myplugin', o);
editor.ui.addButton('myplugin', {
label: 'myplugin',
icon: this.path + 'myplugin.png',
command: 'myplugin'
});
}
});
})(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:31:43.790

解决了。

忘记在 extraPlugins 下添加“myplugin”。

# java - ArrayList 字符串到一个字符串

> ID：13695547
> 
> 赞同：15
> 
> 时间：2012-12-04T03:20:19.573
> 
> 标签：java, string, arraylist

我有一个字符串数组列表（数组列表中的每个单独元素只是一个没有空格的单词），我想获取每个元素并将每个下一个单词附加到字符串的末尾。

所以说数组列表有

```
 element 0 = "hello"
    element 1 = "world,"
    element 2 = "how"
    element 3 = "are"
    element 4 = "you?" 
```

我想制作一个名为 sentence 的字符串，其中包含“hello world，你好吗？”

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-01-11T17:46:34.147

从 Java 8 开始，这已添加到标准 Java API 中：

**`String.join()`方法：**

```
String joined = String.join("/", "2014", "10", "28" ); // "2014/10/28"

List<String> list = Arrays.asList("foo", "bar", "baz");
joined = String.join(";", list); // "foo;bar;baz" 
```

**`StringJoiner`还添加了：**

```
StringJoiner joiner = new StringJoiner(",");
joiner.add("foo");
joiner.add("bar");
joiner.add("baz");
String joined = joiner.toString(); // "foo,bar,baz" 
```

另外，它是 nullsafe，我很感激。我的意思是，如果在 a中`StringJoiner`遇到 a ，它不会抛出 NPE：`null``List`

```
@Test
public void showNullInStringJoiner() {
    StringJoiner joinedErrors = new StringJoiner("|");
    List<String> errorList = Arrays.asList("asdf", "bdfs", null, "das");
    for (String desc : errorList) {
        joinedErrors.add(desc);
    }

    assertEquals("asdf|bdfs|null|das", joinedErrors.toString());
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-04T04:04:47.643

就像评论中建议的那样，您可以使用`StringBuilder`：

```
StringBuilder listString = new StringBuilder();

for (String s : list)
     listString.append(s).append(" "); 
```

或没有显式循环：

```
list.forEach(s -> listString.append(s).append(" ")); 
```

甚至更优雅的 Java 8 功能：

```
String listString = String.join(" ", list); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-02T17:11:27.840

使用 StringUtils 来解决这个问题。

例如，Apache Commons Lang 提供了 join 方法。

```
StringUtils.join(myList,",")) 
```

它将遍历您的数组或字符串列表并将它们连接起来，使用第二个参数作为分隔符。请记住 - 总有一个图书馆可以让一切变得简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-05T01:30:49.230

**爪哇 8**

```
final String concatString= List.stream()
                .collect(Collectors.joining(" ")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T03:27:53.023

好吧，一个标准的 for 循环应该可以工作：

```
String toPrint = "";
for(int i=0; i<list.size(); i++){
  toPrint += list.get(i)+" ";
}
System.out.println(toPrint); 
```

希望有帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T03:29:59.537

最简单的方法：

```
String ret = "";
for (int i = 0; i < array.size(); i++) {
    ret += array.get(i) + " ";
} 
```

但是如果您的数组很长，则字符串 concat 的性能很差。您应该使用 StringBuilder 类。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-02-18T11:21:50.983

这是简单的方法

字符串值 = TextUtils.join(" ", 示例);

样本是数组列表

# xml - 查找 XML 属性值并将其从一个文件替换到另一个文件

> ID：13695548
> 
> 赞同：2
> 
> 时间：2012-12-04T03:20:20.540
> 
> 标签：xml, xslt

我有 2 个 XML 文件，其中包含有关相同项目的数据，它们保存在客户端和服务器上。与服务器相比，客户端上的某些数据相同，某些属性/子元素不同。

客户端数据如下所示（具有更多与比较无关的属性）：

```
<item id="1" create_dttm="05/28/2010 12:00:00 AM" name="Correct_Name">
        <text1>sample</text1>
        <icon>iconurl</icon>        
</item> 
```

服务器数据如下所示（具有更多属性和可能的​​子元素）：

```
<item type="4" id="1" name="mispelled_name">
</item> 
```

因为项目的匹配是通过我们代码中的 ID 完成的，所以为 server.xml 进行数据输入的人对名称不是很小心，留下了拼写错误或占位符名称。这不会导致错误，但是我更愿意为了安全起见并确保将 server.xml 中的所有拼写错误的条目替换为 client.xml 中的正确名称（这些都经过双重检查并且都是正确的）

是否可以运行一些脚本/代码/xslt 样式表来将 server.xml 中的名称替换为 client.xml 中的名称？

我对样式表不是很熟悉，也不知道从哪里开始编写类似的代码

基本上我希望它看起来像这样：

```
Read client.xml
Read server.xml

For each item in client.xml, read attributes "id" and "name"
find item with same "id" in server.xml
replace "name" in server.xml with value from client.xml for the item with that "id" 
```

感谢您提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:55:12.847

在将 XSLT 应用于 server.xml 时，您可以在此处使用**文档**功能，从第二个文档（在您的情况下为“client.xml”）中查找信息

例如，您可以定义一个变量，以包含client.xml中的所有**项目元素**

```
<xsl:variable name="client" select="document('client.xml')//item" /> 
```

然后，要替换server.xml 中的**@name属性，您可以创建一个模板来匹配这些属性，并改为从 client.xml 输出值。**

```
<xsl:template match="item/@name">
    <xsl:attribute name="name">
        <xsl:value-of select="$client[@id=current()/../@id]/@name" />
    </xsl:attribute>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:param name="clientXml" select="'client.xml'" />

    <xsl:variable name="client" select="document($clientXml)//item" />

    <xsl:template match="item/@name">
        <xsl:attribute name="name">
            <xsl:value-of select="$client[@id=current()/../@id]/@name" />
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 client.xml 和 server.xml 文档时，将输出以下内容

```
<item type="4" id="1" name="Correct_Name"></item> 
```

请注意，我已将“client.xml”文档的名称参数化，因为这将允许您在需要时在不同命名的文档上使用 XSLT。您只需将第二个 XML 文件的名称作为参数传递。

# python - 如何设置变量类型？TypeError：无法连接“str”和“int”对象

> ID：13695551
> 
> 赞同：0
> 
> 时间：2012-12-04T03:21:00.947
> 
> 标签：python, variables, typeerror

我看过很多类似的问题，但找不到答案，所以我希望你们能帮助我。我不断收到该`TypeError`消息，但不知道为什么。任何建议将不胜感激。

```
number = raw_input("Enter a number to be rounded: ")

decimallocation = number.find('.')
right = number[decimallocation:]    
greater = int(number+right+1)
lesser = int(number+right)

if right >= .5:
    print (greater)
else:
    print (lesser) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:24:47.667

错误是这一行：

```
greater = int(number+right+1) 
```

我认为你想要做的是：

```
greater = int(number+right) + 1 
```

另一个可能的错误是检查：

```
right > .5 
```

right 是 a`str`但`.5`不是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:25:35.370

你需要：

```
greater=int(int(number)+int(right)+1)
lesser=int(int(number)+int(right)) 
```

您需要确保添加的所有内容都是 an`int`或 a `str`，您不能将这两种类型加在一起。

# javascript - jQuery 代码块弹出窗口

> ID：13695552
> 
> 赞同：0
> 
> 时间：2012-12-04T03:21:03.270
> 
> 标签：javascript, jquery

这是在线示例[http://jsfiddle.net/bvJnM/](http://jsfiddle.net/bvJnM/) 不知何故，linkedin 配置文件没有弹出。有人可以检查我的代码吗？

```
function excerpt(str, nwords) {
    var words = str.split(' ');
    words.splice(nwords, words.length - 1);
    return words.join(' ') + '&hellip;' + '<span>Show</span>';
}

var $div = $('.container');
$div.each(function() {
    var theExcerpt = excerpt($(this).text(), 30);
    $(this).data('html', $(this).html()).html( theExcerpt);
});

$('span').click(function() {
    var isHidden = $(this).text() == 'Show';
    var $div = $(this).parent();
    var theExcerpt = excerpt($div.text(), 30);
    $div.html( isHidden ? $div.data('html') : theExcerpt);
    $(this).remove();
});​ 
```

HTML

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>

<div class="container">
    Nulla varius diam at sem adipiscing pharetra. Integer eget nulla non purus commodo aliquam. Aenean sed nunc neque. Aliquam eleifend aliquam arcu, ac semper nulla faucibus id. Etiam luctus eleifend tempus. Vestibulum ornare, nisi vitae fermentum luctus, sem lectus rhoncus nibh, auctor iaculis magna turpis nec turpis. Aliquam orci tortor, vulputate at pretium sit amet, blandit eget libero. Sed posuere ultricies mi, sed rhoncus massa ultrices quis. Donec pulvinar vestibulum rhoncus. Donec urna lacus, mollis et convallis at, commodo nec lectus. Maecenas pretium, nunc ac volutpat tempus, dolor orci ultricies massa, eu malesuada urna massa ut orci. Duis eget elit nulla, ornare aliquet nulla. Sed eleifend scelerisque est, eu laoreet lacus ultricies id. Aenean aliquam porttitor augue, quis lacinia augue consequat vitae. Ut venenatis orci massa. Duis dignissim, justo at pellentesque adipiscing, ligula eros mollis tellus, ut accumsan lorem dui eu est.
    <p></p>
<script src="http://platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/MemberProfile" data-format="click" data-id="http://www.linkedin.com/in/reidhoffman"
data-format="inline"  data-text="mynamehere"></script> 
```

扩展linkedIn链接后不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:43:13.923

好吧，让我们尝试一下：

将文本放在`p`选项卡中并对其进行拼接切割。将链接的脚本放在自己的空间中并将其隐藏。然后你显示完整的文本，也显示linkedin div。

```
<div class="container">
    <p>Nulla varius diam at sem adipiscing pharetra. Integer eget nulla non 
         purus commodo aliquam. Aenean sed nunc neque. </p>
<div id="lin">
    <script src="http://platform.linkedin.com/in.js" 
               type="text/javascript"></script>
<script type="IN/MemberProfile" data-format="click" 
                data-id="http://www.linkedin.com/in/reidhoffman"
data-format="inline"  data-text="mynamehere"></script>
</div>
</div> 
```

​我在这里更新了小提琴：[fiddle1](http://jsfiddle.net/amantur/bvJnM/7/)

编辑：工作[小提琴](http://jsfiddle.net/amantur/bvJnM/9/)。`<span>`附加到`<p>`我使用的`$(this).parent().find('p')`. 本来是`$(this).parents('div').find('p')`

# calendar - 使用 c# 在 Outlook 2013 中自定义日历约会预览（弹出）

> ID：13695554
> 
> 赞同：1
> 
> 时间：2012-12-04T03:21:22.193
> 
> 标签：calendar, outlook, vsto, outlook-addin, ribbonx

当您在 Outlook 2013 的日历资源管理器中滚动时，是否有任何方法可以自定义（或替换）显示特定任命详细信息的框。

我正在尝试显示一个附加的自定义属性（格式化），以提供项目状态的视觉队列，而无需在其检查器中打开它并导航到提供 UI 的自定义表单区域。

我已经创建了表单区域，并在非常初级的级别上使用了 RibbonXML，但是看不到使用其中任何一种方法的方法。

提前致谢

# php - 遍历 Php $_POST 并带有许多附加数字的变量

> ID：13695555
> 
> 赞同：1
> 
> 时间：2012-12-04T03:21:29.073
> 
> 标签：php, mysql, post

所以我想知道当我将数据的名称设置为日期、开始、结束时，如何在 php 中从 $_POST 获取变量，以数字表示日期和开始和结束它们的位置。对于使用表单创建变量，创建变量可以正常工作，问题是访问它们时出现以下错误：

> 解析错误：语法错误、意外的 '' (T_ENCAPSED_AND_WHITESPACE)、期望标识符 (T_STRING) 或变量 (T_VARIABLE) 或数字 (T_NUM_STRING)

我的代码：

```
<?php
$club=$_POST['club'];
$name=$_POST['event'];
$text=$_POST['descript'];

$num=$_POST['quantity'];
$user=$_POST['user'];

$flag=$_POST['flag'];

require_once("conf.inc.php");

$host=$CFG->dbHost;
$userDB=$CFG->dbUser;
$pword=$CFG->dbPassword;
$db=$CFG->dbDatabase;

$mysqli = new mysqli($host, $userDB, $pword, $db);
$mysqli->connect($host, $userDB, $pword, $db);
if(!isset($flag)) {
    $mysqli->query("INSERT INTO fi_events VALUES $name, $text, $club");
    $eventResult = $mysqli->query("SELECT ID FROM fi_events WHERE Name=$name, FlavourText=$text, ClubID=$club");
    while(list($event) = $eventResult->fetch_row()) {
        $ID = $event;
    }
}
else {
    $eventID = $_POST['eventID'];
    for($i=0;$i<$num;$i++){
        $mysqli->query("INSERT INTO fi_slots VALUES $eventID, $_POST['slots$i'], 0, $_POST['date$i'], $_POST['start$i'], $_POST['end$i']");
    }
    echo "SLOT CREATION SUCCESSFUL!";
    echo "<form action='viewEvent.php' enctype='text/plain' method='post'>
        <input type='hidden' id='eventID' name='eventID' value= '$ID' />
        <input type='hidden' id='user' name='user' value= '$user' />
        <input type='submit' name='Submit' value='View Your Event'>
        </form>";
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Make Slots</title>
</head>

<body>
<?php
if(!isset($flag)){
    echo ("<form action='makeSlots.php' method='post'>");
        echo "<input type='hidden' id='quantity' name='quantity' value= '$num' />";
        echo "<input type='hidden' id='flag' name='flag' value= '1' />";
        echo "<input type='hidden' id='eventID' name='eventID' value= '$ID' />"
        echo "<input type='hidden' id='user' name='user' value= '$user' />"
    for ($i=0; $i<$num;$i++){
        echo ("Date:&nbsp; <input type='date' id='date$i' name='date$i' />
        <br/>");
        echo ("Time Begin:&nbsp; <input type='text' id='start$i' name='start$i' />
        <br/>");
        echo ("Time End:&nbsp; <input type='text' id='end$i' name='end$i' />
        <br/>");
        echo ("Total Slots:&nbsp; <input type='text' id='slots$i' name='slots$i' />
        <br/>");
    }
    echo ("<input type='submit' name='Submit' value='Enter' />");
    echo("</form>");
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:33:39.193

我认为您需要为此使用串联：

```
$mysqli->query("INSERT INTO fi_slots VALUES $eventID," . $_POST["slots$i"] . ",..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:52:25.363

正确的语法是这样的：

```
"{$_POST['slot' . $i]}" 
```

花括号明确地描述了表达式，因此编译器不会抱怨，它会在其中执行连接。

**重要的**

由于 sql 注入风险，不建议这样做，并且准备好的语句是要走的路：

```
$stmt = $mysqli->prepare("INSERT INTO fi_slots VALUES (?, ?, 0, ?, ?, ?)");

$stmt->bind_param('s', $_POST['slots' . $i]);
// etc.
$stmt->execute(); 
```

# java - Java中泛型方法的绑定不匹配

> ID：13695557
> 
> 赞同：0
> 
> 时间：2012-12-04T03:21:31.350
> 
> 标签：java, generics

我不明白为什么会出现此编译错误

> `element(T)`绑定不匹配：类型的泛型方法`Resource`不适用于参数（`Class<Chassis>`）。推断的类型`Class<Chassis>`不是有界参数的有效替代品`<T extends Resource>`。

使用以下代码：

```
public class Resource {
    protected abstract class has<T extends Resource> {
        public has(T v) {}
    }

    protected <T extends Resource> has element(T v) {
        return new has<T>(v) {};
    }
}

class Car extends Resource {
    has chassis = element(Chassis.class);
}

class Chassis extends Resource {
} 
```

为什么这是无效的？`Chassis`扩展`Resource`，那么为什么不匹配`<T extends Resource>`？

我如何约束 element() 方法以接受 Resource 类对象或任何 Resource 子类对象作为参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T03:23:21.727

`Chassis.class`是 的一个实例`java.lang.Class`，它只扩展`java.lang.Object`.

期望（或其子类之一）的`<T extends Resource>`实际实例。`Resource`

要解决此问题，您可以将方法声明更改为以下内容：

```
protected <T extends Resource> has element(Class<T> v) {
    return new has<T>(v) {};
} 
```

# php - 学习基本的php并在实时项目中工作还是学习核心php更好？

> ID：13695558
> 
> 赞同：4
> 
> 时间：2012-12-04T03:21:36.620
> 
> 标签：php

我的一位自由职业者朋友使用 wordpress，他知道基本的 php，但不会在核心 php 程序中工作。在工作期间，他从 Google 获取示例代码，然后编辑该代码并在他的客户项目中使用。它总是有效的，他说他可以理解大部分语言。因为他工作在c、c++、java、html、css、php的基础级别。他的座右铭是——工作和学习虽然需要很多时间。另一方面，我的另一个朋友从非常基础的学习 php 并想成为核心程序员。他的座右铭是——先学习，然后用更少的时间工作。

我只是很困惑我能做什么。如果在学习了基本的 php 之后谷歌一切皆有可能，那我为什么要非常深入地学习 php。是否所有类型的代码都可以在互联网上使用，自己编写代码是否好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T03:29:53.303

我认为技能水平与薪酬有关。你拥有的技能越好，你就越有价值。更多的人可以从 Internet 上获取一些 PHP 代码，对其进行更改并使其工作。然而，能够为某些问题构建架构合理且可靠的软件解决方案的人要少得多。

这一切都取决于你想要什么，如果你想成为一个顶尖的软件开发者，那么你应该有一个人的态度，并努力不断提高。如果您想购买并通过调整 WordPress 网站赚钱，那很好。很多人在这方面做得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T03:31:13.323

我不确定你期待什么样的答案，但我可以告诉你：

作为一名程序员，我已经工作了 10 多年，而且我仍然每天都在学习每个新项目，尽管谷歌提供了很大的帮助，而且你在那里获得的信息令人难以置信，但它仍然没有取代你自己的知识和编程技能。您可以在谷歌上找到的每个示例仍然需要调整，这就是您需要知道自己在做什么的地方。

我认为重点是：如果你打算制作小型网站，每小时收费 10 美元，并且只做基本的联系、注册和数据表格，那么忘记深入学习 php，你的朋友边学边学是对的。在这种情况下，你应该花时间学习其他非常重要的技能，如数据库、搜索引擎优化、移动兼容性等，这些会给你更大的机会来获得更多的客户和项目。

但是，如果您打算成为一名认真的程序员并在大型项目中工作并收取 3 或 4 倍的费用，那么请忘记小型网站并学习可以应用于任何语言或情况的深度编程逻辑。

归根结底，没有正确或错误的道路，这取决于您自己的目标和需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T03:31:15.863

我现在经常将 Drupal 用于连接到店内 POS 系统的大型电子商务网站。我不可能只从 Google 获取代码来创建这些网站。当然，我可以从文档中“借用”简单的片段；然而，在一个专业的项目中......这不会让你走得太远。

如果您想创建一个不安全的网站，请将 90% 的时间浪费在具有基本知识的人可以立即修复的简单错误上……然后一定要走懒惰的路线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T03:29:11.760

这取决于你的目标。如果您的目标是“学习 PHP”，那么您绝对应该学习如何使用该语言等，这样您就可以自己制作东西，而不必在谷歌上搜索如何去做。

谷歌搜索解决方案也可以，但是，如果您不知道代码是如何运行的，或者不了解它是如何工作的，那么您将无法自行更改它以使其与您正在尝试做的事情一起工作. 这就是理解语言的好处；您可以采用现有代码，并对其进行修改以使其更好或为您工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T03:32:10.877

要应用正确的解决方案，您需要了解它们是如何工作的，以及特定解决方案的限制是什么，才能采用这种解决方案来解决问题。就像你用立方体建造一样——当你还是孩子的时候，你只需要基本的引力规则，但如果你想用同样的立方体建造真正的大塔，你需要了解更多的物理和数学知识，并且可能选择其他建筑单位.

# javascript - 从同一对象内的函数访问对象属性

> ID：13695559
> 
> 赞同：0
> 
> 时间：2012-12-04T03:21:38.397
> 
> 标签：javascript, oop, node.js, express

我在这里尝试做的是从同一个对象的函数中访问`context`属性（或者`context.settings`，更具体地说，） 。`ready`我不确定执行此操作的正确语法是什么。

这是代码：

```
module.exports = {
    context: {
        settings: require('./settings')
    },
    listen: function(callback) {
      listen(context.settings.http.port);
      callback(null);
    },
    ready: function (err) {
      if (err)
      {
        throw err;
      }
      console.log("Ready and listening at http://localhost:" + context.settings.http.port);
    }
}; 
```

只是为了澄清，我指的是这条线`console.log("Ready and listening at http://localhost:" + context.settings.http.port);`

编辑：更多上下文（ha）

我确实尝试过`this.context.settings.http.port`，但我得到 了`TypeError: Cannot read property 'settings' of undefined`。

这是 的内容`settings.js`，只是为了确定...

```
module.exports = { 
  db: {
    host: '127.0.0.1',
    port: 27017,
    name: 'jsblogdemo'
  },
  http: {
    port: 3000
  }
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:42:48.810

另一种可能性是：

```
module.exports = (function() {
    var context = {
        settings: require('./settings')
    },
    listen = function(callback) {
      listen(context.settings.http.port);
      callback(null);
    },
    ready = function (err) {
      if (err)
      {
        throw err;
      }
      console.log("Ready and listening at http://localhost:" + 
                    context.settings.http.port);
    };

    return {
        // context: context, // needed?
        listen: listen,
        ready: ready
    };
}()); 
```

然后这些函数可以本地访问该`context`对象，而不用担心它们是如何被调用的。如果您愿意，该`context`对象可以完全保密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:25:41.097

如果它是一个单一的静态对象，你可以这样做：

```
module.exports.context.settings 
```

如果您想要永久绑定`this`，请使用`.bind()`.

```
module.exports = {
    context: {
        settings: require('./settings')
    }
}
module.exports.listen = function(callback) {
    listen(this.context.settings.http.port);
    callback(null);
}.bind(module.exports);

module.exports.ready = function (err) {
    if (err) {
        throw err;
    }
    console.log("Ready and listening at http://localhost:" + this.context.settings.http.port);
}.bind(module.exports); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:25:05.823

只要方法没有被`call`or绑定到另一个上下文`apply`，`this`就引用当前对象上下文。例如，使用：

```
console.log(this.context.settings.http.port); 
```

打印监听端口。

# vba - VBA - 针对主主题验证幻灯片

> ID：13695568
> 
> 赞同：-1
> 
> 时间：2012-12-04T03:22:41.303
> 
> 标签：vba, powerpoint

我们有一个带有主幻灯片主题的 power point 模板列表，我们将它分发给我们的所有用户，如果他们使用他们使用主题并且他们不更改任何字体、字体大小或颜色，一切都会正常工作。但问题是，如果他们更改字体、字体大小等，我们如何知道用户更改了哪些形状或文本，基本上需要根据主幻灯片主题验证幻灯片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:18:44.383

您的问题的问题在于您没有说明您尝试了什么，或者您在哪里寻找答案。这就是为什么你会吸引反对票的原因。（不是我，顺便说一句，但我以前见过这种情况。）

当您提出问题时，密切关注建议的主题也很重要，这些主题会随着您的输入而更新；我不止一次花时间寻找答案，放弃并准备在这里提出问题，然后在建议的答案中找到了我正在寻找的东西，这意味着我根本不必问。在这种情况下，值得查看建议的答案：

[如何在 Powerpoint 2007 VBA 中检测主题字体？](https://stackoverflow.com/questions/1563086/how-to-detect-theme-fonts-in-powerpoint-2007-vba?rq=1)

这可能不会给你你想要的东西，但会给你一个开始的地方。

# css - 创建响应式照片库

> ID：13695577
> 
> 赞同：1
> 
> 时间：2012-12-04T03:23:24.233
> 
> 标签：css, background-image, responsive-design, photo-gallery

我是网页设计的新手，正在为我的作品建立一个网站。我对如何正确构建这个照片库并将其放置在我需要的位置感到困惑。图库必须完美定位，因为它需要与充当图库图像框架的背景图像对齐。我基于 % 设计了这个，试图最终让它响应四个不同的屏幕尺寸范围。当我测试我到目前为止所拥有的东西时，它会在遇到不同的浏览器时分崩离析。它在dreamweaver的实时视图中运行良好，但是当我在任何浏览器中测试它时，背景图像不会显示，或者图像堆叠在页面的左侧，当我缩小屏幕时它根本没有响应. 我遇到的三个主要问题是 - 我怎样才能让背景图像显示出来并让画廊图像保持原位？当屏幕尺寸发生变化时，如何激活其他 CSS 文件？但是非常感谢任何和所有的帮助。

科林

这是HTML

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1.0 />
<title>Test</title>

<link rel"stylsheet" type="text/css" media="only screen and (min-width:769px;) and (max-width:1088px;)" href="../_css/large.css" />

<link rel"stylsheet" type="text/css" media="only screen and (min-width:449px;) and (max-width:768px;)" href="../_css/medium.css" />

<link rel"stylsheet" type="text/css" media="only screen and (min-width:252px;) and (max-width:448px;)" href="../_css/small.css" />

<link href="../_css/main_full.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="page_container">

        <div class="gallery_container">

                <a href="#"><img id="pos1" src="../_images/galleryimages_full/sunlight_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos2" src="../_images/galleryimages_full/clownflat_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos3" src="../_images/galleryimages_full/goldensun_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos4" src="../_images/galleryimages_full/monstertheatre_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos5" src="../_images/galleryimages_full/home_smallvector.jpg" width="250" height="194" alt="© C.M.B"></a>
                <a href="#"><img id="pos6" src="../_images/galleryimages_full/wishingstargallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos7" src="../_images/galleryimages_full/cozycave_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos8" src="../_images/galleryimages_full/coffeetable_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos9" src="../_images/galleryimages_full/breakaway_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos10" src="../_images/galleryimages_full/happyns_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos11" src="../_images/galleryimages_full/boymeetsgirl_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos12" src="../_images/galleryimages_full/sadbabygallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos13" src="../_images/galleryimages_full/salvation_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos14" src="../_images/galleryimages_full/orangestart_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos15" src="../_images/galleryimages_full/spaceobjectsgallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos16" src="../_images/galleryimages_full/clown_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos17" src="../_images/galleryimages_full/ponycave_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos18" src="../_images/galleryimages_full/pacha_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos19" src="../_images/galleryimages_full/goldstorm_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos20" src="../_images/galleryimages_full/qerogallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>
                <a href="#"><img id="pos21" src="../_images/galleryimages_full/theblues_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>

        </div>

</div>

</body>
</html> 
```

这是主要的 CSS - 其他三个样式表是我尚未构建的媒体查询。

```
@charset "UTF-8";
/* CSS Document */

/* Layout (global rules for fullsize) */

.page_container {
width: 1280px;
height: 3000px;
background-image: url(../_page_components/gallery/gallery_full.jpg);
margin: 0% auto 0% auto;
position: relative;
/*padding-top: 19.541%; 248 pixels*/
}

.gallery_container {
width: 66.7%;  /* 853 pixels */
height: 55.3%; /* 1659 pixels */
/*margin: 19.541% auto 0% auto; - equal to 248px*/
padding: 19.4% 0% 0% 0%;
margin: 0% auto 0% auto;
}

#pos1 {  /* Top Left Corner*/
padding-left: 0.3%;
padding-right: 4.91%;   
padding-bottom: 5.3%;
}

#pos2 {  /* Middle top row */
padding-left: 0.42%;    
padding-bottom: 5.3%;
}

#pos3 {  /* Topr Right Corner */
padding-left: 5.35%;
padding-bottom: 5.3%;
}

#pos4 {  /* The rest of the images/rows follow the same positioning pattern */
padding-left: 0.4%;
padding-right: 4.75%;   
padding-bottom: 5.3%;
}

#pos5 {
padding-left: 0.5%; 
padding-bottom: 5.3%;
}

#pos6 {
padding-left: 5.15%;
padding-bottom: 5.3%;
padding-right: 0.2%;
}

#pos7 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.3%;
}

#pos8 {
padding-left: 0.5%; 
padding-bottom: 5.3%;
}

#pos9 {
padding-left: 5.25%;
padding-bottom: 5.3%;
 }

#pos10 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.3%;
}

#pos11 {
padding-left: 0.5%; 
padding-bottom: 5.3%;
}

#pos12 {
padding-left: 5.25%;
padding-bottom: 5.3%;
}

#pos13 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.4%;
}

#pos14 {
padding-left: 0.5%; 
padding-bottom: 5.4%;
}

#pos15 {
padding-left: 5.25%;
padding-bottom: 5.4%;
}

#pos16 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.6%;
}

#pos17 {
padding-left: 0.5%; 
padding-bottom: 5.6%;
}

#pos18 {
padding-left: 5.25%;
padding-bottom: 5.6%;
}

#pos19 {
padding-left: 0.5%;
padding-right: 4.55%;   

}

#pos20 {
padding-left: 0.5%; 

}

#pos21 {
padding-left: 5.25%;

 } 
```

“大”屏幕的 CSS 媒体查询文件

```
@charset "UTF-8";
/* CSS Document */
/* Layout Large Screens*/

.page_container {
width: 1088px;
height: 2550px;
margin: 0% auto 0% auto;
background-image: url(../_page_components/gallery/gallery_large.jpg);
} 
```

“中等”屏幕的 CSS 媒体查询文件

```
@charset "UTF-8";
/* CSS Document */
/* Layout Medium Screens */

.page_container {
width: 768px;
height: 1800px;
margin: 0% auto 0% auto;
background-image: url(../_page_components/gallery/gallery_medium.jpg);
} 
```

“小”屏幕的 CSS 媒体查询文件

```
@charset "UTF-8";
/* CSS Document */
/* Layout Small Screens */

.page_container {
width: 448px;
height: 1050px;
margin: 0% auto 0% auto;
background-image: url(../_page_components/gallery/gallery_small.jpg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:25:02.360

```
<div id="bgpic">
  <img src="../_page_components/gallery/gallery_full.jpg" width="100%" height="100%" />
</div

<div class="page_container">
</div> 

#bgpic {
position:fixed;
width:100%;
height:100%;
}

#bgpic img {
 width:100%;
 height:100%;
} 
```

# ruby-on-rails - Rails 3.0 .ics feed，适用于苹果产品，但不适用于微软和安卓

> ID：13695578
> 
> 赞同：0
> 
> 时间：2012-12-04T03:23:26.340
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, outlook-2007, icalendar

我有一个简单的日历提要，显示员工何时休假，我可以订阅日历并查看谁休假。这适用于苹果产品（Mac OS X 和 iOS），但不适用于 Outlook 或 Android。我想我可能需要使用 iCal ruby​​ 库之一，但如果不需要，我不希望这样做。Microsoft Outlook 2007 说，在使用链接时，提要不是有效的日历文件：

```
www.nameofwebsite.com/time_off_feed/#ofbranch/time_off_feed.ics 
```

例如：

```
www.nameofwebsite.com/time_off_feed/350/time_off_feed.ics 
```

day_offs_controller.rb

```
def time_off_feed
  @users=User.where("current_branch=?", params[:id])
  respond_to do |format|
    format.ics
  end
end 
```

days_off.ics.erb

```
BEGIN:VCALENDAR
METHOD:PUBLISH
VERSION:2.0
PRODID:-//Website Name/Time-Off//EN
X-WR-CALNAME:Website Name
CALSCALE:GERGORIAN
<% @users.each do |user| %>
<% user.day_offs.each do |day_off| %>
BEGIN:VEVENT
UID:<%=day_off.id%>
SUMMARY:<%= day_off.user.name.titleize %> | <%= day_off.do_type %>
DTSTART:<%= day_off.start_date.strftime("%Y%m%d") %>
<% end_day=day_off.end_date + 1.day %>
DTEND:<%= end_day.strftime("%Y%m%d") %>
END:VEVENT
<%end%>
<% end %>
END:VCALENDAR 
```

我认为路线没有问题，但以防万一。

路线.rb

```
match '/time_off_feed/:id/time_off_feed', to: 'day_offs#time_off_feed', :as => 'time_off_feed_path' 
```

我查看了 ri_cal 和 iCalendar 宝石，但它们似乎有点难以生成视图，但也许它们是值得的。任何帮助或指示将不胜感激。

简化路线的奖励积分:)

谢谢，

杰森

更新：按照以下说明将以下内容添加到视图中以使其正常工作。

```
DTSTAMP:<%=Time.now.strftime("%Y%m%dT%H%M%SZ")%> 
```

在 Outlook 2010 上完美运行，我明天会仔细检查并确保它在 Outlook 2007 上运行。

更新：outlook 2007 没有继续。仍在寻找解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:31:31.260

Outlook 是正确的：您的`VEVENT`组件缺少强制`DTSTAMP`属性。

# jsp - 比较 c:if 中的 scriptlet 变量

> ID：13695581
> 
> 赞同：2
> 
> 时间：2012-12-04T03:23:57.527
> 
> 标签：jsp, jstl

这是一些代码

```
<% String what = (String)session.getAttribute("BANG"); %>
<c:set var="bang" value="Song" /> 
```

我从会话中得到一个字符串，我想将它与 jstl 变量中的字符串进行比较。

我试过一个 if in

```
<% if() { %> some text <% } %> 
```

也试过

```
<c:if test="${va1 == va2}" </c:if> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:46:20.620

对于初学者，建议停止使用*scriptlets*，那些`<% %>`东西。它们不能很好地与 JSTL/EL 一起工作。您应该选择其中一个。由于*Scriptlet*十年来一直被[官方禁止](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)使用，因此停止使用它们是有意义的。

* * *

回到您的具体问题，以下*脚本*

```
<% String what = (String)session.getAttribute("BANG"); %> 
```

可以在EL中完成如下

```
${BANG} 
```

所以，这应该为你做：

```
<c:if test="${BANG == 'Song'}">
    This block will be executed when the session attribute with the name "BANG"
    has the value "Song".
</c:if> 
```

或者，如果你*真的*需要`"Song"`一个变量，那么：

```
<c:set var="bang" value="Song" />
<c:if test="${BANG == bang}">
    This block will be executed when the session attribute with the name "BANG"
    has the same value as the page attribute with the name "bang".
</c:if> 
```

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)
*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

# java - ')' 预期的，非法的表达式开头

> ID：13695584
> 
> 赞同：0
> 
> 时间：2012-12-04T03:24:10.753
> 
> 标签：java

我收到这样的错误：

```
Test. java:8 :')' expected
Test. java: 8: error :illegal start of expression
Test. java:9 :')' expected
Test. java: 9: error :illegal start of expression 
```

第 8 行和第 9 行是：

```
blackjackplayer = checkForBlackJacks(BlackJackHand playerhand);
blackjackdealer = checkForBlackJacks(BlackJackHand dealerhand); 
```

课程是：

```
 public class Test{
        public void playround (){
                int temp = -1;
                playerhand = new BlackJackHand(22);
                dealerhand = new BlackJackHand(22);
                addCards(playerhand, 2);
                addCards(dealerhand, 2);
                blackjackplayer = checkForBlackJacks(BlackJackHand playerhand);
                blackjackdealer = checkForBlackJacks(BlackJackHand dealerhand);
                while(temp!=2&&playerhand.gettotal()<=21){
                    printHands(false, true, true);
                    temp = Prompt.getInt("\nPress 1 to hit, or 2 to stand. ", 1, 2);
                    if (temp==1&&playerhand.gettotal()<=21){
                        addCards(playerhand,1);
                    }
                }
                if (playerhand.gettotal()>21){
                    playerbust = true;
                }
                else{
                    seeWhoWon();
                }
                    //done = true;
        }
        public boolean checkForBlackJacks (BlackJackHand x){
            return (x.gettotal()==21&&x.getmyhand().size()==2);
        }
    } 
```

这只是一个包含错误部分的 java 文件。真正的程序具有所有组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:26:09.433

将值作为方法参数传递时，您必须只包含对象的名称，而不是其类型。

```
blackjackplayer = checkForBlackJacks(playerhand);
blackjackdealer = checkForBlackJacks(dealerhand); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:26:26.337

将行更改为

```
blackjackplayer = checkForBlackJacks(playerhand);
blackjackdealer = checkForBlackJacks(dealerhand); 
```

您只需要传递已经创建的对象名称。无需使用类名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T03:26:27.483

这显然是一个语法错误。方法调用如下所示：

```
blackjackplayer = checkForBlackJacks(playerhand); 
```

不是这个

```
blackjackplayer = checkForBlackJacks(BlackJackHand playerhand); 
```

* * *

如果您查看错误消息的字符位置，它很可能在`playerHand`符号的位置 ... 并且它告诉您它期望 THAT 符号是`')'`. 如果您不理解错误消息，尝试从字面意义上阅读它通常会有所帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T03:26:15.873

你不需要在那些行中说 BlackJackHand playerHand。只需 playerHand 即可。

# python - 在 Python 中打印以逗号开头和结尾？

> ID：13695589
> 
> 赞同：0
> 
> 时间：2012-12-04T03:24:52.843
> 
> 标签：python, eclipse, format

```
#!/usr/bin/python

for line in open("blah.txt"):
if "$" in line:
    print (","line",") 
```

为什么这不起作用？如何在行首和行尾加逗号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:32:54.300

你想要什么并不完全清楚。也许：

```
print ',%s,' % line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T03:33:08.660

试试这个...

```
#!/usr/bin/python

f = open("blah.txt");       # open file
for line in f:              # iterate over lines in file
  line = line.strip()       # strip leading and trailing white space
  print ("," + line + ",")  # print line between commas
f.close() # close file      # close file when done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:36:42.403

我想这就是你要找的：

```
for line in open("blah.txt"):
    if "$" in line:
        print(",{},".format(line.strip())) 
```

# database - 为什么运行我的应用程序会创建多余的会话并断开数据库连接？

> ID：13695593
> 
> 赞同：-1
> 
> 时间：2012-12-04T03:25:18.317
> 
> 标签：database, jsp, servlets, oracle11g

我使用现在托管在生产服务器中的 jsp/servlets 创建了一个数据库应用程序。但是当我对应用程序执行一些任务时，数据库会话数超过 150，然后连接丢失。如果我不重新启动数据库服务器，我将无法使用该应用程序。我正在使用 ORACLE 11g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:49:40.253

问题是缺少正确的数据库连接关闭。当我们在每次迭代中没有关闭数据库连接的情况下进行一些重复的活动时。它增加了与数据库的连接数，并根据每个定义达到最大连接数。为了避免这个问题，我们可以做两件事，

1.  我们可以增加最大会话量。如果您正在增加会话参数，您还应该考虑增加进程和事务参数。这是您可以用来确定其值的公式。

> 进程=x
> 会话=x*1.1+5
> 事务=会话*1.1

为此，请使用以下 sql 脚本

> sql> alter system set processes=500 范围=两者 sid=' *';
> sql> 改变系统设置会话 = 555 范围 = 两个 sid ='* ';
> sql> alter system set transactions=610 范围=两者 sid='*';

1.  另一种方法是您可以将应用程序设计为一次不超过先前定义的数据库连接数。Oracle 会定期自动删除当前未使用的连接。但这需要时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:32:52.327

对于这个问题，你可以做两件事，

1.  您可以使用以下命令超过数据库可以处理的进程数。

    ```
    alter system set sessions = 300 scope = spfile; 
    ```

    为此，您必须以系统用户身份登录数据库。

2.  您可以检查是否所有打开的数据库连接都已关闭。

# android - 在 Android 中使用 MediaPlayer 进行速度控制

> ID：13695606
> 
> 赞同：3
> 
> 时间：2012-12-04T03:26:41.297
> 
> 标签：android, media-player

我想使用 MediaPlayer（不是 SoundPool）来控制播放速度。在这里，我读到 MediaPlayer 不支持速度控制。所以我将编辑 Android 源代码。但我不知道从哪里开始。我应该在哪里编辑？与速度控制有关的文件是什么？

如果有人知道这件事，请给我一些建议。

# box-api - 使用偏移量和限制检索文件夹的项目

> ID：13695608
> 
> 赞同：0
> 
> 时间：2012-12-04T03:27:05.990
> 
> 标签：box-api

我正在尝试使用带有限制参数的文件夹（如下）中的获取项目。 [https://api.box.com/2.0/folders/FOLDER_ID/items?offset=50&limit=50](https://api.box.com/2.0/folders/FOLDER_ID/items?offset=50&limit=50)

所以假设我在文件夹中有 103 个项目，当我使用上面的调用时，我得到了这个（下）。如果我在没有偏移和限制的情况下做同样的事情，则返回的 json 是所有 103 个项目。

{“item_collection”：{“total_count”：103，“条目”：[]}，“page_size”：“50”，“offset”：“50”}

我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:26:41.113

这似乎是一个错误。`offset`对应于 中的**页数，**而不是 中**的项目数**。

我们现在正在努力解决这个问题，希望很快就能解决。

# objective-c - 如何在 NSWindowController 中使用关闭按钮停止模式？

> ID：13695620
> 
> 赞同：4
> 
> 时间：2012-12-04T03:28:19.390
> 
> 标签：objective-c, macos, modal-dialog, nswindowcontroller, nspanel

当用户单击 NSWindowController 中的红色关闭按钮时，我想停止模式。

在 NSWindowController 中，有“确定”和“取消”按钮。

```
- (IBAction)okButtonClicked:(id)sender
{
    [NSApp stopModalWithCode:NSOKButton];
    [self.window close];
}

- (IBAction)cancelButtonClicked:(id)sender
{
    [NSApp stopModalWithCode:NSCancelButton];
    [self.window close];
} 
```

当我单击红色关闭按钮时，窗口将关闭并且模态不会停止。我找到了**windowWillClose:**函数。

```
- (void)windowWillClose:(NSNotification *)notification
{
    if ([NSApp modalWindow] == self.window)
        [NSApp stopModal];
} 
```

然而，

```
if ([NSApp runModalForWindow:myWindowController.window] != NSOKButton)
    return; 
```

即使我单击 OK 按钮，**windowWillClose:**函数也会被调用并且**runModalForWindow:**函数总是返回 NSCancelButton。

作为模态的结果，我可以将成员变量添加到**myWindowController中。**

但我认为会有另一种通用的方法来解决这个问题。

我想采取一种简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T02:25:36.170

也许有点晚了，但我只是发现了这个问题，试图为自己找到答案。这就是官方文档中所说的：`- (BOOL)windowShouldClose:(id)sender`当您通过 [window close] 关闭窗口时，不会调用事件处理程序。它仅在您使用红色关闭按钮或 [window performClose:] 选择器时调用。所以解决方案是在你的 NSWindowController 子类中实现`windowShouldClose:`而不是实现。`windowWillClose:`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T04:25:00.633

你可以这样尝试

```
- (IBAction)okButtonClicked:(id)sender
{
    [NSApp stopModalWithCode:NSOKButton];
    [NSApp endSheet:self.window];
}

- (IBAction)cancelButtonClicked:(id)sender
{
    [NSApp stopModalWithCode:NSCancelButton];
    [NSApp endSheet:self.window];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-05T20:26:17.790

根据 [NSapplication Class Reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/#//apple_ref/occ/instm/NSApplication/endSheet:) ，endSheet: NSApplication 上的方法将在 10.10（Mavericks）中被弃用。Apple 建议使用 NSWindow beginSheet: 和 endSheet: 方法，因此如果您尝试从 NSWindowController 子类中关闭 NSWindowController ，则应使用此代码片段

```
[self.window.sheetParent endSheet:self.window]; 
```

它使用 NSWindow 的***sheetParent***属性调用***endSheet:***并将您的子类的窗口作为参数传递。你也可以使用 NSWindow 的 endSheet: returnCode: 如果你想指定返回码。在 OSX 10.9 / XCode 6.1.1 上测试

# android - 如何通过移动应用程序使用 photoswipe 长按保存图像？

> ID：13695624
> 
> 赞同：2
> 
> 时间：2012-12-04T03:28:54.210
> 
> 标签：android, image, mobile, save, photoswipe

我正在使用 photoswipe 创建一个移动应用程序，并将我的画廊等放在一起。现在我想结合一种方式让用户能够长按图像并获得保存、墙纸等选项。有谁熟悉解决这个问题的最佳方法是什么？

# vb.net - 图片框覆盖 vb.net

> ID：13695627
> 
> 赞同：1
> 
> 时间：2012-12-04T03:29:04.633
> 
> 标签：vb.net, picturebox

我已经编写了以下代码，但是有一个我不想弄清楚的问题。我试图在鼠标单击时在我的图片框中的图像上画一条简单的线。但是，调用了paint方法但没有绘制它，而是在我滚动图片框中的图片时绘制了该点的线..请帮助

```
Private Sub picCurrentimage_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles picCurrentimage.MouseDown
     px = e.X
     py = e.Y
     highlightPic(px, py)
End Sub

Private Sub highlightPic(ByVal x1 As Integer, ByVal y1 As Integer)
        haspoint = True
        picCurrentimage.Invalidate()
        picCurrentimage.Update()
End Sub

Private Sub picCurrentimage_Paint(ByVal sender As System.Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles picCurrentimage.Paint
        If haspoint Then
            Dim g As Graphics = picCurrentimage.CreateGraphics
            Dim r As Rectangle = New Rectangle(px, py, 600, 10) 
            Dim pen As Pen = New Pen(Color.FromArgb(128, 32, 100, 200), 1) 
            Dim b As Brush = New SolidBrush(pen.Color)
            g.FillRectangle(b, r)
        End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:24:50.970

尝试用以下修改替换您的代码：

```
Private Sub highlightPic(ByVal x1 As Integer, ByVal y1 As Integer)
    haspoint = True
    picCurrentimage.Refresh()  'this do both of your lines in one
End Sub

Private Sub picCurrentimage_Paint(ByVal sender As Object, _
                                  ByVal e As PaintEventArgs) _
                                  Handles picCurrentimage.Paint
    If haspoint Then

        Dim g As Graphics = e.Graphics
        Dim r As Rectangle = picCurrentimage.ClientRectangle

        Dim b As Brush = New SolidBrush(Color.FromArgb(128, 32, 100, 200))
        g.FillRectangle(b, r)
        b.Dispose

    End If

End Sub 
```

# c# - Windows 8 应用商店应用中的 Environment.GetCommandLineArgs

> ID：13695628
> 
> 赞同：3
> 
> 时间：2012-12-04T03:29:08.607
> 
> 标签：c#, windows-8, windows-store-apps

我创建了一个全新的 vanilla c# Windows 8 Store 应用程序。在 App() 函数中，我放置了一行代码来收集命令行参数。IDE 抱怨 GetCommandLineArgs() 不是 Environment 的一部分。

```
public App()
{
    this.InitializeComponent();
    this.Suspending += OnSuspending;

    String[] arguments = Environment.GetCommandLineArgs();
} 
```

[Microsoft 网站上的此页面](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)似乎表明 .NET 4.5 支持此功能。是什么赋予了？

（从技术上讲，我可以将 args 收集为 App() 参数，但我不想这样做。其他代码行也调用它，我更愿意让它们“保持原样”。此外，我只是好奇为什么这不起作用，似乎应该。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:04:44.127

您将如何在命令行上将参数传递给 Windows 应用商店应用程序？最接近的模拟可能是[LaunchActivatedEventArgs](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.applicationmodel.activation.launchactivatedeventargs.aspx)，例如，如果您有辅助磁贴（例如波士顿的天气磁贴和檀香山的天气磁贴 - 相同的应用程序，不同的参数）。

查看[如何激活应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/hh465102.aspx)以获取更多详细信息。

**更新以回应托德的第一条评论。**

您正在寻找的是[File Activation](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh779669%28v=win.10%29.aspx)。您可以表明您的文件知道如何处理，例如 .txt 文件。当用户在文件资源管理器中右键单击 .txt 文件时，您的应用程序将显示为“打开方式..”选项。当用户选择您的应用程序作为他/她想要用来处理文件的应用程序时，您的应用程序将启动（或者如果已经运行，则仅激活）并且其[OnFileActivated](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.application.onfileactivated.aspx)事件将触发，您可以通过该事件访问文件被选中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:40:37.343

如果您阅读[Environment Class](http://msdn.microsoft.com/en-us/library/z8te35sa.aspx)的描述，它明确指出该 api 仅适用于以下操作系统

> # 平台
> 
> **Windows 8、Windows Server 2012、Windows 7、Windows Vista SP2、Windows Server 2008（不支持服务器核心角色）、Windows Server 2008 R2（SP1 或更高版本支持服务器核心角色；不支持安腾）**
> 
> .NET Framework 不支持每个平台的所有版本。有关受支持版本的列表，请参阅 .NET Framework 系统要求。

但是，Windows 商店应用程序仅支持标有商店符号的功能。

# Windows 应用商店应用程序的功能

![在此处输入图像描述](../Images/2531f45c266c7a451e03e08f694cbdd0.png)

# 非 WinRT/Windows 商店应用程序的函数

![在此处输入图像描述](../Images/6582e82bebf0702293d4339cd7d74a41.png)

[Windows 商店应用程序拥有Environment.GetCommandLineArgs 方法](http://msdn.microsoft.com/en-us/library/windows/apps/system.environment.getcommandlineargs.aspx)并没有真正意义，因为不能真正将命令行参数传递给 Windows 商店应用程序。

`WinRT/Windows store apps`类中只有 5 个属性和一种方法可用`Environment`。

# 特性

1.  [CurrentManagedThreadId](http://msdn.microsoft.com/en-us/library/system.environment.currentmanagedthreadid.aspx)
2.  [已关机开始](http://msdn.microsoft.com/en-us/library/system.environment.hasshutdownstarted.aspx)
3.  [新队](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)
4.  [处理器计数](http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx)
5.  [滴答计数](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)

# 方法

*   [FailFast（字符串）](http://msdn.microsoft.com/en-us/library/ms131100.aspx)
*   [FailFast（字符串，异常）](http://msdn.microsoft.com/en-us/library/dd289240.aspx)

# python - 从一个列表和偶数长度的列表创建一个元组列表（？）

> ID：13695631
> 
> 赞同：0
> 
> 时间：2012-12-04T03:29:20.877
> 
> 标签：python, list, tuples

鉴于

```
a = ['1', '2']
b = [['a', 'b'], ['c', 'd']] 
```

我怎样才能将这些列表转换成类似的格式`[('1', 'a', 'b'), ('2', 'c', 'd')]`？我试图将它们压缩在一起，但我不想`b`作为一个列表。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:32:46.350

zip 仍然是你的朋友：

```
[tuple([x] + y) for x, y in zip(a, b)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:33:12.170

试试这个：

```
[tuple([x] + y) for x, y in zip(a,b)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T04:04:09.277

我相信不是让它变得复杂，而是一种更简单的方法是展平嵌套的元组/列表

```
>>> a = ['1', '2']
>>> b = [['a', 'b'], ['c', 'd']]
>>> zip(a, *b)
[('1', 'a', 'c'), ('2', 'b', 'd')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T03:54:26.173

如果您不想使用列表推导，您可以这样做：

```
zip(a, *(zip(*b))) 
```

例如：

```
a = ['1', '2']
b = [['a', 'b'], ['c', 'd']]

new_list = zip(a, *(zip(*b))) 
```

结果：

```
>>> new_list
[('1', 'a', 'b'), ('2', 'c', 'd')] 
```

# ruby-on-rails - Linux]设置管理员组的权限

> ID：13695632
> 
> 赞同：0
> 
> 时间：2012-12-04T03:29:25.167
> 
> 标签：ruby-on-rails, ubuntu

我正在尝试设置我的 VPS 来部署我的 Rails 应用程序，并且我经常遇到这些权限被拒绝错误。我认为主要问题是我在管理组中以“部署者”的身份运行，并且不知何故“部署者”没有正确获得其权利。但这个猜测可能是错误的。

```
deployer@max:~$ gem install bundler --no-ri --no-rdoc
Fetching: bundler-1.2.3.gem (100%)
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /var/lib/gems 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:31:48.800

您需要在`gem`命令前加上前缀，`sudo`因为`/var/lib/gems`它归`root`. 您还可以查看[RVM](https://rvm.io/)，它允许*非常*轻松地安装和管理 gems 和 Ruby 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:11:21.840

刚刚使用“sudo”命令来解决这个问题......

# jbutton - 如何通过单击 Jbutton 触发帮助键 F1 动作

> ID：13695634
> 
> 赞同：0
> 
> 时间：2012-12-04T03:29:50.050
> 
> 标签：jbutton

现在我正在处理 JavaHelp 内容。

基本上，第一个解决方案，在您从树形菜单或节点 (JTree) 中选择所选功能后，按下帮助键 (F1) 后，它将根据所选节点弹出特定的 JavaHelp 内容。

现在，我正在尝试添加帮助按钮，用户首先需要从树形菜单或节点中选择功能，然后单击我创建的帮助按钮。它假设与第一个解决方案完全相同，但现在，它不会弹出正确的内容。

如何使帮助按钮触发 F1 键操作？这意味着当我们选择节点时，它已经有一个焦点 n 如果我们按下 F1 键可以直接弹出，帮助按钮可能只是触发 F1 键动作。

我听说过 doClick 功能或键绑定，对此有什么想法吗？

谢谢

问候， 阿兹尼玛

嗨，我尝试实现键绑定以在用户单击帮助按钮时触发 F1 键操作。但我不知道如何设置代码来触发 F1 键动作。这是一些代码：

动作按钮：

```
final String helpIconLocation = new String("/icons/help_new.png");
        iconResource = CustomizedToolbar.class.getResource(helpIconLocation);
        icon = new ImageIcon(iconResource);
        actionButton = new JButton(icon);
        actionButton.setFocusable(false);
        actionButton.addActionListener(new JavaHelpHandler()); 
```

动作监听器：

```
private class JavaHelpHandler implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent arg0) {

            Action javaHelpF1KeyAction = new AbstractAction();
            KeyStroke helpKeyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0);
            MainApp.getMainAppPanel().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(
                    helpKeyStroke, "F1");
            MainApp.getMainAppPanel().getActionMap().put("F1", javaHelpF1KeyAction);

        }

    }

    private class AbstractAction implements ActionListener, Action {

        @Override
        public void actionPerformed(ActionEvent e) {
            // TO display popup javaHelp content
            HelpSystemUtil.getInstance().enableHelpFromFocus(actionButton);
        }

        @Override
        public void addPropertyChangeListener(PropertyChangeListener listener) {
            // TODO Auto-generated method stub

        }

        @Override
        public Object getValue(String key) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public boolean isEnabled() {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public void putValue(String key, Object value) {
            // TODO Auto-generated method stub

        }

        @Override
        public void removePropertyChangeListener(PropertyChangeListener listener) {
            // TODO Auto-generated method stub

        }

        @Override
        public void setEnabled(boolean b) {
            // TODO Auto-generated method stub

        }

    } 
```

如何设置 actionMap 以触发 F1 键操作？真的需要帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:38:39.397

您可以做的最好的方法是创建一个 Key Listener。

[按键监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

有几种方法可以做到这一点。这是一个：

```
    yourComponent.addKeyListener(new KeyAdapter () {
         @覆盖
         公共无效keyPressed（KeyEvent e）{

              如果（e == YOUR_KEY_CODE）{
                   // 做点什么
              }

         }
    });

```

无论如何，F1的键码是112

# c++ - 如何制作 std::weak_ptr 的 c++11 std::unordered_set

> ID：13695640
> 
> 赞同：15
> 
> 时间：2012-12-04T03:30:42.157
> 
> 标签：c++, c++11, std, unordered-set, weak-ptr

我有一套这样的：`set<weak_ptr<Node>, owner_less<weak_ptr<Node> > > setName;`

它工作正常。但我想将其更改为无序集。但是，当我这样做时，我得到了大约六页的错误。任何想法如何做到这一点？

在浏览了所有错误消息页面后，我发现可能有帮助的行。

```
/usr/include/c++/4.7/bits/functional_hash.h:60:7: error: static assertion failed: std::hash is not specialized for this type
/usr/include/c++/4.7/bits/stl_function.h: In instantiation of ‘bool std::equal_to<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = std::weak_ptr<Node>]’: 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-06-18T17:49:24.873

简短而不幸的答案是，虽然`shared_ptr<>`可以安全地用作无序集合或映射中的键，`weak_ptr<>`但不能也不能。再多的诡计也无法保证安全。

这是因为`weak_ptr`的接口不公开对共享控件对象的访问，这是`owner_before()`在有序集合或映射中使用时比较的基础。

虽然锁定指针然后对 进行哈希处理似乎是合理的`shared_ptr`，但事实并非如此。如果最后一个`shared_ptr`超出范围，则哈希值将更改，这将导致下次迭代您的 set 或 map 时出现未定义的行为。这很可能不会被注意到，直到您的代码在客户面前投入生产，您偶尔会遇到意外和莫名其妙的功能损失，但是您的单元测试仍然会完美地通过，让您错误地认为您的测试覆盖率很好，你的代码是可靠的，应该归咎于用户、硬件或网络。

所以，总而言之，如果你要使用`weak_pt`r's 来构建你的非拥有对象缓存（它们非常好），你需要使用 a`std::set<weak_ptr>`并遭受微小的性能损失（尽管实际上这将与性能损失相形见绌由`mutex`保护集合的 引起的）。

如果您真的想使用 a`weak_ptr`作为无序键，您将不得不自己编写（提示：使用共享控制块的地址作为散列函数的基础）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-01T05:48:06.673

我不认为建议的哈希函数是正确的。如果指向对象的所有共享指针都消失了，那么`weak_ptr<X>::lock()`将返回空的 shared_ptr，其哈希值可能为零。所以哈希函数可以在整个时间返回不同的值。

我认为这里正确的解决方案是使用 `boost::unordered_map<X*, boost::weak_ptr<X>>`. 类型`X*`可以很容易地用作散列映射的键，并且`weak_ptr<X>`值使您有机会找出引用的对象是否仍然存在。

要将值存储到此哈希中，您可以使用以下内容：

```
if (boost::shared_ptr<X> p = wp.lock()) {
    // weak_ptr is still valid
    ptrs.insert(std::make_pair(p.get(), p));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:30:15.693

**请阅读下面的[Richard Hodges](https://stackoverflow.com/questions/13695640/how-to-make-a-c11-stdunordered-set-of-stdweak-ptr/30922307#30922307)答案，因为我的答案是不正确的，尽管它是公认的解决方案。**

* * *

由于`unordered_sets`是基于散列的，因此您必须为std::weak_ptr 数据类型提供散列[函数对象。](http://msdn.microsoft.com/en-us/library/aa985932.aspx)

如果您查看 unordered_set 模板参数

```
template<class Key,
    class Hash = std::hash<Key>,
    class Pred = std::equal_to<Key>,
    class Alloc = std::allocator<Key> >
    class unordered_set; 
```

您会注意到 std::unordered_set 为您提供了默认的 std::hash<> 模板参数。但由于 std::hash 只提供[特定数据类型集](http://msdn.microsoft.com/en-us/library/bb982987.aspx)的特化，您可能必须提供自己的。

您引用的错误消息告诉您， std::hash<> 不存在 std::weak_ptr<> 的专门化，因此您必须为此提供自己的散列函数：

```
template<typename T>
struct MyWeakPtrHash : public std::unary_function<std::weak_ptr<T>, size_t> {
   size_t operator()(const std::weak_ptr<T>& wp)
   {
      // Example hash. Beware: As zneak remarked in the comments* to this post,
      // it is very possible that this may lead to undefined behaviour
      // since the hash of a key is assumed to be constant, but will change
      // when the weak_ptr expires
      auto sp = wp.lock();
      return std::hash<decltype(sp)>()(sp);
   }
}; 
```

**编辑：** 您还需要提供一个相等函数，因为没有为 weak_ptr 提供 std::equal_to 。[从Stackoverflow 上的“Equality-compare std::weak_ptr”](https://stackoverflow.com/questions/12301916/equality-compare-stdweak-ptr)采取一种可能的方法：

```
template<typename T>
struct MyWeakPtrEqual : public std::unary_function<std::weak_ptr<T>, bool> {

   bool operator()(const std::weak_ptr<T>& left, const std::weak_ptr<T>& right)
   {
      return !left.owner_before(right) && !right.owner_before(left);
   }
}; 
```

所有这些都为我们提供了以下信息：

```
std::unordered_set<std::weak_ptr<T>,
                   MyWeakPtrHash<T>,
                   MyWeakPtrEqual<T>> wpSet; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-27T21:55:57.137

这里给出了一个可行的解决方案：[如何计算 std::weak_ptr 的哈希值？](https://stackoverflow.com/questions/70131467/how-to-compute-hash-of-stdweak-ptr/70132547#70132547)下面是一个略微扩展的变体，它添加了缺失的细节。与上面给出的早期答案不同，这是有效的，因为哈希是在`shared_ptr`计数降至零之前计算和存储的。

```
namespace foobar
{
// Public inheritance was used to avoid having to
// duplicate the rest of the API. Unfortunately this
// allows object slicing. So, an alternate solution is
// to use private inheritance, and `using` to provide
// the missing API.
template<class T>
struct hashable_weak_ptr : public std::weak_ptr<T>
{
   hashable_weak_ptr(std::shared_ptr<T>const& sp) :
      std::weak_ptr<T>(sp)
   {
      if (!sp) return;
      _hash = std::hash<T*>{}(sp.get());
   }

   std::size_t get_hash() const noexcept { return _hash; }

   // Define operator<() in order to construct operator==()
   // It might be more efficient to store the unhashed
   // pointer, and use that for equality compares...
   friend bool operator<(hashable_weak_ptr const& lhs,
                         hashable_weak_ptr const& rhs)
   {
      return lhs.owner_before(rhs);
   }
   friend bool operator!=(hashable_weak_ptr const& lhs,
                          hashable_weak_ptr const& rhs)
   {
      return lhs<rhs or rhs<lhs;
   }
   friend bool operator==(hashable_weak_ptr const& lhs,
                          hashable_weak_ptr const& rhs)
   {
      return not (lhs != rhs);
   }
   private:
      std::size_t _hash = 0;
};
} // namespace foobar

namespace std
{

// Specializations in std namespace needed
// for above to be usable.
template<class T>
struct owner_less<foobar::hashable_weak_ptr<T>>
{
   bool operator()(const foobar::hashable_weak_ptr<T>& lhs,
                   const foobar::hashable_weak_ptr<T>& rhs) const noexcept
   {
      return lhs.owner_before(rhs);
   }
};

template<class T>
struct hash<foobar::hashable_weak_ptr<T>>
{
   std::size_t operator()(const foobar::hashable_weak_ptr<T>& w) const noexcept
   {
      return w.get_hash();
   }
};
} // namespace std 
```

这里首先提出了这个问题的一个变体：[为什么在 C++0x 中没有为 std::weak_ptr 定义 std::hash？](https://stackoverflow.com/questions/4750504/why-was-stdhash-not-defined-for-stdweak-ptr-in-c0x)解决此问题的最新标准委员会草案在这里：[JTC1 WG21 P1901](http://open-std.org/JTC1/SC22/WG21/docs/papers/2020/p1901r1.html)。

# ruby-on-rails - Mac OS X Mountain Lion “此系统上当前未安装 Rails。”

> ID：13695643
> 
> 赞同：13
> 
> 时间：2012-12-04T03:31:14.997
> 
> 标签：ruby-on-rails, ruby, macos, osx-mountain-lion

我正在全新安装 OS X Mountain Lion。我通过以下方式安装了导轨：

```
sudo gem install rails 
```

一切似乎都安装正确，但是当我键入 rails 命令（rails s、rails -v 等）时，我收到此错误：

```
Rails is not currently installed on this system. To get the latest version, simply type:

    $ sudo gem install rails

You can then rerun your "rails" command. 
```

' ' 的结果`which rails`是`/usr/bin/rails`

我认为这是一个路径问题，也许它是，但我可以看到 /usr/bin 是我的 PATH 的一部分。

有什么帮助吗？谢谢！

更新：我注意到我的另一台 Mac 上的所有东西都运行得很好……我只是不记得我是如何让它以这种方式工作的。如果我运行“which rails”，我会看到它在一个完全不同的地方 /Users/username/.rvm/gems/ruby-1.9.3-p194/bin/rails

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-16T21:18:24.963

如果您使用的是 rbenv，请不要忘记`rbenv rehash`在安装/更新 ruby​​ 之后。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-04T04:05:23.993

使用 RVM [http://rvm.io](http://rvm.io)或 rbenv 安装比 OS X 预装的版本更新的 Rails 版本。

遵循站点[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)上的示例，但基本上：

安装 RVM：$`\curl -L https://get.rvm.io | bash -s stable`

然后您可以 $`rvm list known`查看您可以使用哪些红宝石（手数）。只需 $`rvm install 1.9.3`即可获得最新版本的 Ruby（在撰写本文时为`ruby-1.9.3-p327`）

将该红宝石设置为您的默认 $`rvm --default use 1.9.3`

创建一个默认 gemset 来存储你的 gem $`rvm use 1.9.3@mygemset --create --default`

然后安装 Rails $`gem install rails`会让你得到最新的，今天和打字一样`gem install rails -v 3.2.9`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-04T08:06:18.060

刚遇到这个问题`rbenv`，不知道这是怎么发生的，但发现我的`~/.rbenv/shims/rails`是空的......

所以要解决这个问题：

*   清洁空垫片：`find ~/.rbenv/shims -empty -delete`

*   然后重新生成：（`rbenv rehash` *没有覆盖空的......）*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-16T18:28:50.170

我有同样的问题。

输入后：

```
sudo gem install rails 
```

并正确安装导轨，只需关闭终端窗口并再次打开。然后输入：

```
~ $ rails -v
Rails 4.0.2 
```

因此，重置终端窗口可以解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T04:27:18.837

我认为安装 rvm 会帮助你

```
 rvm get head && rvm reload
  rvm install 1.9.3
  rvm use 1.9.3@current --create --default 
```

最后一行创建了一个名为`current`.

`which gem`现在检查以确保通过在终端中键入 RubyGems 已正确安装。现在更新你的宝石。

```
gem update --system 1.8.24 
```

最后安装导轨。

```
gem install rails -v 3.2.3 
```

我希望这有效，如果您有任何问题，请告诉我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T03:39:45.970

是的，OSX 标配了许多用于 Ruby on Rails 以及 PHP、Mysql 等的优秀软件。但是，有时出于维护目的，最好使用 3rd 方安装程序来获得所需的一切，而无需挖掘 /usr / 目录。

我建议查看[http://railsinstaller.org/](http://railsinstaller.org/)

通过一次简单的安装，您就拥有了 Rails 项目所需的一切，包括人们使用的常用软件，该站点甚至还有教程。我建议走这条路。它可以节省您的时间。此外，它还附带一个简单的卸载程序，如果您对配置不满意，它会将其放入您的应用程序文件夹中以将其删除。享受。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-02T02:04:18.253

实际上，/usr/bin/rails 脚本只是一个

> # Stub rails 命令从 Gems 加载 rails 或在未安装时打印错误。

（引用自脚本来源的评论）

如果安装了 Rails，那么它就会被加载。否则，脚本会抛出您粘贴在问题中的错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-04T06:09:19.867

然而，RVM 的另一个替代品是很棒的 rbenv 工具。

它很容易安装（只是一个简单的`brew install rbenv`）和使用。在我看来，这是在 Mac 上管理红宝石的最佳方式。

但是，如果您的机器上已经安装了 rvm，请考虑通过执行`rvm implode`.

由于在 Rails 开发环境上设置新的 ruby​​ 是大多数新手（包括我刚开始使用 Rails 时的我自己）的常见障碍，因此我在博客文章中汇总了有关如何做到这一点的详细说明，我将链接到以下。希望你会发现它很有用。

[http://blog.parsalabs.com/blog/2013/08/27/setting-up-a-ruby-on-rails-4-development-environment-on-a-clean-mac-os-x-installation/](http://blog.parsalabs.com/blog/2013/08/27/setting-up-a-ruby-on-rails-4-development-environment-on-a-clean-mac-os-x-installation/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-26T07:58:54.537

我遇到了同样的错误并卸载了 rvm，然后我按照此页面上的说明操作[https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04- lts-precise-pangolin-with-rvm](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)

我认为帮助是

```
rvm requirements 
```

在终端上。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-10T20:16:43.803

我们公司使用脚本为每台新机器设置 Rails 开发环境：

我们已经开源了，试试看：[https ://github.com/platform45/let-there-be-light](https://github.com/platform45/let-there-be-light)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-07-02T08:29:21.357

一个新的之后

`gem install rails`

做

`rbenv rehash`

它对我有用。

# html - 堆叠图像以实现无缝加载？

> ID：13695646
> 
> 赞同：2
> 
> 时间：2012-12-04T03:31:22.747
> 
> 标签：html, css, image-processing, image

我想知道在我的网站上加载大型高清图像的最佳方式是什么。

当简单地把它用作背景图像时，会出现延迟，大约 5 秒钟后屏幕上什么都没有，然后才慢慢滑下屏幕。

我有一个想法，可以将多个图像堆叠在一起以提高质量，这样一开始质量会很差，然后当 HD 可用并加载时，它会在质量差的图像上可见。

我想我的问题是，这是我唯一的解决方案吗？有没有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:41:02.647

查看[图像隔行扫描](http://en.wikipedia.org/wiki/Interlacing_(bitmaps))。

据说它可以做你想做的事，尽管我自己没有经验。

这似乎是 Facebook 对我的工作方式。

* * *

[另请参阅下面的评论中janith](https://stackoverflow.com/users/1512306/janith)提供的关于 SO 的此问题：[Load an image via Interlacing - From low to full resolution - HTML](https://stackoverflow.com/questions/10771920/load-an-image-via-interlacing-from-low-to-full-resolution-html)

# android - 在恢复活动时刷新 FragmentStatePagerAdapter 上的图像

> ID：13695649
> 
> 赞同：18
> 
> 时间：2012-12-04T03:31:36.500
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter

我创建了一个`FragmentStatePagerAdapter`用于提供小画廊的活动。但是，当活动恢复时（例如，从其他活动回来后），我无法让它刷新。每次前两张图片都是空白的，只有在我将两张图片滑到一边后，它们才会刷新。我找到的答案都没有（尤其是压倒一切的`getItemPosition()`）

我是这样设置的：

```
mPagerAdapter = new PhotosPagerAdapter(getSupportFragmentManager());
mPager = (ViewPager) findViewById(R.id.photosViewPager);
mPager.setAdapter(mPagerAdapter); 
```

然后我有 FragmentStatePagerAdapter 类：

```
private class PhotosPagerAdapter extends FragmentStatePagerAdapter{

    public PhotosPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return photos.size();   
    }

    @Override
    public Fragment getItem(int position) {
        ImageFragment f = new ImageFragment(position);
        return f;
    }

    @Override
    public int getItemPosition(Object object) {
        throw new RuntimeException();
        //return POSITION_NONE;
    }

} 
```

您可能已经注意到，我在 getItemPosition 中抛出 RuntimeException，因为我想检查它何时被调用。直到我添加一些包含我的图片的列表时才会调用它。然后 ImageFragment 类：

```
public class ImageFragment extends Fragment{

    int position;
    Bitmap mBitmap;
    int width;
    int height;
    ImageView img;

    public ImageFragment(){
    }

    public ImageFragment(int position){
        this.position = position;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        img = new ImageView(container.getContext());
        img.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        width = container.getWidth();
        height = container.getHeight();

        loadBitmap();

        return img;
    }       

    public void loadBitmap(){
        if (img == null){
            return;
        }
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(photos.get(position), options);
        options.inSampleSize = calculateInSampleSize(options, width/2, height/2);
        options.inJustDecodeBounds = false;
        mBitmap = BitmapFactory
                .decodeFile(photos.get(position), options);         

        img.setImageBitmap(mBitmap);
    }

    @Override
    public void onDestroyView() {
        mBitmap.recycle();
        super.onDestroyView();
    }       
} 
```

在我尝试修复它之后代码有点乱......但是：删除`onDestroyView()`不起作用。我已经放置`mPagerAdapter.notifyDataSetChanged()`了几个必须调用的地方（如`onResume()`），但没有结果。我对此有点绝望。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-04T04:12:38.323

处理片段寻呼机适配器可以是 PITA。

以下是一些有用的提示：

[ViewPager PagerAdapter 不更新视图](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)

[动态更新 ViewPager？](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically)

一般来说，这个工作99％的时间......

像这样覆盖 PagerAdapter 中的 getItemPosition：

```
@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
} 
```

有时即使那些不起作用，我必须使用“蛮力”方法并再次重新创建整个视图（从 onCreate 开始）......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-17T21:00:49.293

我遇到了与您类似的问题，经过一些研究，我创建了一个不错的脚本，可以避免重新创建已经存在的片段，但同时允许您更新所有可见/已启动的片段。

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.view.ViewGroup;

import java.util.WeakHashMap;

/**
 * Created by TheCobra on 9/17/15.
 */
public abstract class FragmentAdvanceStatePagerAdapter extends FragmentStatePagerAdapter
{
    private WeakHashMap<Integer, Fragment> mFragments;

    public FragmentAdvanceStatePagerAdapter(FragmentManager fm)
    {
        super(fm);
        mFragments = new WeakHashMap<Integer, Fragment>();
    }

    @Override
    public Fragment getItem(int position)
    {
        Fragment item = getFragmentItem(position);
        mFragments.put(Integer.valueOf(position), item);
        return item;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object)
    {
        super.destroyItem(container, position, object);
        Integer key = Integer.valueOf(position);
        if (mFragments.containsKey(key))
        {
            mFragments.remove(key);
        }
    }

    @Override
    public void notifyDataSetChanged()
    {
        super.notifyDataSetChanged();
        for (Integer position : mFragments.keySet())
        {
            //Make sure we only update fragments that should be seen
            if (position != null && mFragments.get(position) != null && position.intValue() < getCount())
            {
                updateFragmentItem(position, mFragments.get(position));
            }
        }
    }

    @Override
    public int getItemPosition(Object object)
    {
        //If the object is a fragment, check to see if we have it in the hashmap
        if (object instanceof Fragment)
        {
            int position = findFragmentPositionHashMap((Fragment) object);
            //If fragment found in the hashmap check if it should be shown
            if (position >= 0)
            {
                //Return POSITION_NONE if it shouldn't be display
                return (position >= getCount()? POSITION_NONE : position);
            }
        }

        return super.getItemPosition(object);
    }

    /**
     * Find the location of a fragment in the hashmap if it being view
     * @param object the Fragment we want to check for
     * @return the position if found else -1
     */
    protected int findFragmentPositionHashMap(Fragment object)
    {
        for (Integer position : mFragments.keySet())
        {
            if (position != null &&
                mFragments.get(position) != null &&
                mFragments.get(position) == object)
            {
                return position;
            }
        }

        return -1;
    }

    public abstract Fragment getFragmentItem(int position);
    public abstract void updateFragmentItem(int position, Fragment fragment);
} 
```

将该代码复制到文件名“FragmentAdvanceStatePagerAdapter.java”中。现在在您的适配器中，从这个扩展并覆盖“getFragmentItem()”和“updateFragmentItem()”。每当您调用 notifydatachange() 时，将调用 updateFragmentItem() 并创建所有片段。当适配器需要创建新的片段时，会调用 getFragmentItem()。

我希望拯救和帮助很多人:)

祝你好运，编程愉快！！！

PS如果你使用这个类，你的适配器“getItem()”应该是“getFragmentItem()”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T10:42:04.297

`POSITION_NONE`您可以按照我在这里的建议进行操作，而不是再次返回和创建所有片段：[动态更新 ViewPager？](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically/17855730#17855730)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-23T23:04:03.207

永远不要只使用 POSITION_NONE 使用

```
if(fragmentManager.getFragments().contains(object))
    return POSITION_NONE;
else
    return POSITION_UNCHANGED; 
```

避免致命异常：java.lang.IllegalStateException Fragment {} 当前不在 FragmentManager

# android - Android NFC App 不推送 Ndef 消息

> ID：13695653
> 
> 赞同：1
> 
> 时间：2012-12-04T03:31:53.600
> 
> 标签：android, nfc, intentfilter, ndef

我正在创建一个使用 NFC 注册从设备到设备的触摸的 Android 应用程序。我正在使用两个 Nexus 7 进行测试。

理想的用例是让应用程序在一台设备上处于活动状态，而在另一台设备上不处于活动状态。主动设备推送一个带有记录的 NdefMessage，其中包含一些数据供被动设备应用程序处理。被动设备将包含一些数据的记录传递回主动应用程序。

我在清单中设置了以下意图过滤器：

```
 <activity android:name=".MainActivity" android:label="@string/title_activity_main">
        <intent-filter>
          <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
          <data android:mimeType="application/com.killerapprejji.MainActivity"/>
          <data android:mimeType="application/com.*"/>
          <data android:mimeType="application/com.killerapprejji.*"/>
          <data android:mimeType="application/*"/>
          <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
  </activity> 
```

在我的 MainActivity 中，我在 onCreate 中有以下内容来设置 NFC 适配器：

```
mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
PendingIntent pendingIntent = PendingIntent.getActivity(
            this, 0, new Intent(this,
                getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
mNfcPendingIntent = pendingIntent;
    // Intent filters for exchanging over p2p.
if(mNfcAdapter != null){
    IntentFilter ndefDetected = new
                       IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
    IntentFilter ndef = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
    try {
        ndef.addDataType("application/*");    
    }
    catch (MalformedMimeTypeException e) {
        throw new RuntimeException("fail", e);
    }
    this.intentFiltersArray = new IntentFilter[] {ndef, };
    Log.d(this.toString(), "mNfcPendingIntent: ");
    mNdefExchangeFilters = new IntentFilter[] { ndefDetected,defendDetected };

} 
```

我有以下 onNewIntent ：

```
protected void onNewIntent(Intent intent) {
    // NDEF exchange mode
    Log.d("onNewIntent", intent.getAction());
    if (NfcAdapter.ACTION_NDEF_DISCOVERED == (intent.getAction())) {
        NdefMessage[] msgs = getNdefMessages(intent);
        for(int i = 0; i < msgs.length; i++){
            Log.d("onNewIntent", "found new NdefMessage");
        }
     }

    finish();
} 
```

现在，我运行这个电话：

```
public void setIdleMessage(){
    InteractionHistory intHist = InteractionHistory.getInstance();
    NdefMessage attackNdefMessage = null;
    NdefRecord[] ndefRecords = new NdefRecord[10];
    ndefRecords[0] = NdefRecord.createMime("application/com.killerapprejji.NfcHandle", new String("attack,attacker:"
            + intHist.getDisplayName() 
            + ",attackerid:" + "1").getBytes());
    attackNdefMessage = new NdefMessage(ndefRecords[0]);
    // need to come up with a way to end if the above try/catch fails
    mNfcAdapter.setNdefPushMessage(attackNdefMessage, this);
} 
```

期望它设置 NdefPushMessage。每当我将这两个设备放在 NFC 范围内时，我仍然只能获得可选的“Touch to beam”界面。

关于如何获取这些意图的任何想法，或者我的 NdefMessage 是否按预期发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:51:26.337

“Touch to Beam”消息是由 Google 定义的，用于推送您希望在 setNdefPushMessage 上共享的 NDEF 消息，因此在您推送该屏幕之前，不会将任何内容发送到另一台设备。

实际上，您在 Android 中使用的那个 API 称为 Android BEAM

反之，如果一个设备正在推送 NDEF 消息，**它在您停止推送之前无法接收到消息**，因此您必须实现**NDefPushCallback**以捕获您的 NDEF 消息的成功发送，停止推送第一个设备，然后它将能够从其他设备接收新意图（收到 NDEF 消息）

* * *

I recommend you make a test app first using URI mime type, or plain text (something easy) to make sure that your "Share Logic" is OK. When you confirm that, you can rollback to your own mime types

# ios - ios：更改按钮颜色

> ID：13695659
> 
> 赞同：2
> 
> 时间：2012-12-04T03:32:15.263
> 
> 标签：ios, cocoa-touch

我使用以下代码更改了按钮颜色：

```
[self.testButton setBackgroundColor:[UIColor redColor]]; 
```

但我有一个奇怪的按钮：

![在此处输入图像描述](../Images/ed2647c9520ea12af6557c453eb5a7ec.png)

为什么按钮背景颜色没有改变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T03:48:44.887

你可以导入`#import <QuartzCore/QuartzCore.h>`并试试这个，

```
self.testButton = [UIButton buttonWithType:UIButtonTypeCustom];
self.testButton.backgroundColor = [UIColor redColor];
self.testButton.layer.borderColor = [UIColor blackColor].CGColor;
self.testButton.layer.borderWidth = 0.5f;
self.testButton.layer.cornerRadius = 10.0f; 
```

或者，您可以使用一些自定义图像作为此按钮的背景图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:11:40.997

在 .xib 的属性检查器中将按钮类型更改为自定义，然后检查您的代码

```
 [self.testButton setBackgroundColor:[UIColor redColor]]; 
```

# ios - 按下后退按钮时 ios 应用程序屏幕混乱

> ID：13695666
> 
> 赞同：0
> 
> 时间：2012-12-04T03:33:00.750
> 
> 标签：ios, uiscrollview, keyboard, screen, distortion

我有这个滚动视图问题。我的应用程序中有 2 个屏幕，屏幕 A 和屏幕 B。我的第一个屏幕 A 上有 10 个按钮。它们都放在滚动视图上。我在屏幕的右下角也有 2 个 UITextView。当我单击 textivew 输入值时，它会弹出键盘。现在没有关闭/隐藏键盘，我点击了我的应用程序上的一个按钮。这将我带到另一个屏幕，屏幕 B。我有一个文本字段和一个添加按钮。我单击文本字段，然后出现一个键盘。我输入值。单击添加按钮。它将输入的值添加到我在该屏幕上的表格视图中。现在没有关闭/隐藏此屏幕上的键盘以及我点击返回按钮。所以我回到了屏幕 A。但现在屏幕扭曲了。所有字段都向上滚动到屏幕。底部有大约 50-60% 的空白区域。[http://www.techotopia.com/index.php/Writing_iOS_5_Code_to_Hide_the_iPhone_Keyboard](http://www.techotopia.com/index.php/Writing_iOS_5_Code_to_Hide_the_iPhone_Keyboard) 它在早上工作，屏幕 BI 回击，它把我带到屏幕 A 并且没有任何异常屏幕。为什么会发生？执行该链接中的步骤就足够了？或者它不是那么简单，我必须做一些步骤？请帮助。谢谢..

编辑：所以我注意到了一个模式。我在 UItextview 中输入值。单击屏幕 A 上的按钮，移动到屏幕 B。也在这里添加值。单击返回然后返回到屏幕 A，视图都搞砸了。所以我做了这个测试 1.更改 UITextview 值（键盘弹出），只需单击按钮->屏幕 B.在屏幕 B 上什么也不做。回击。屏幕 A 很好。2.点击屏幕A上的按钮而不改变UItextview上的任何东西（没有键盘弹出）。移动到屏幕B.在这里什么都不做，然后回到屏幕A。屏幕A出现并且是完美的。3.点击按钮屏幕A而不改变UITtextview上的任何东西（没有键盘弹出）。移动到屏幕B。在文本字段中输入值。点击添加按钮。回击。回到屏幕A。屏幕A很好。4.更改TextView的值（键盘弹出）。不隐藏/关闭它，点击按钮。屏幕B出现。在文本字段中输入值（键盘弹出）。单击添加按钮。点击返回。回到屏幕 A。屏幕 A 搞砸了。总之，当我更改值/或键盘出现在两个屏幕中时，屏幕 A 被弄乱了。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:06:50.623

[self.view endEditing:YES]; 成功了。我在两个屏幕上都像这样在 viewWillDisappear 中添加了这个。

```
- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
[self.view endEditing:YES];
} 
```

# mysql - Windows 7 MySQL 错误 1067 服务无法启动

> ID：13695680
> 
> 赞同：5
> 
> 时间：2012-12-04T03:34:57.470
> 
> 标签：mysql, service, innodb, mysql-error-1067

这是一个噩梦般的问题。我最初安装了 WAMP，一切正常。我重新启动了我的计算机，并且 MySQL 服务器从那以后就没有工作了。我一直在尝试仅安装 MySQL 并且“SQL 实例配置”冻结，并且在尝试启动服务时收到“错误 1067：进程意外终止”。我已经在网上搜索了几个小时，尝试了所有各种解决方案。这些是我记得看到最多的主要内容。

1.  将安装路径更改为没有空格的安装路径
2.  删除所有 mySQL 文件并重新安装
3.  通过命令提示符启动服务

这是错误文件的副本。我相信这个 InnoDB 的某个地方存在问题，但我似乎无法解决它。

*   121203 22:20:59 [注意] 插件 'FEDERATED' 已禁用。
*   121203 22:20:59 InnoDB：InnoDB 内存堆已禁用
*   121203 22:20:59 InnoDB：互斥锁和 rw_locks 使用 Windows 互锁函数
*   121203 22:20:59 InnoDB：压缩表使用 zlib 1.2.3
*   121203 22:20:59 InnoDB：错误：无法创建临时文件；错误号：2
*   121203 22:20:59 [错误] 插件“InnoDB”初始化函数返回错误。
*   121203 22:20:59 [错误] 插件“InnoDB”注册为存储引擎失败。
*   121203 22:20:59 [错误] 未知/不支持的存储引擎：INNODB
*   121203 22:20:59 [错误] 中止
*   121203 22:20:59 [注意] C:\mysql\bin\mysqld: 关机完成

这似乎是一个普遍的问题，我认为会有更明确的解决方案，但我希望有人能够帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T09:29:54.183

我为我的 Windows Server 2012 安装修复了这个问题，打开 MySQL56 服务的属性对话框，转到登录选项卡，然后单击本地系统帐户单选按钮，然后 MySQL56 服务启动正常。

# iphone - 当 iphone 应用程序同步时，sqlite 数据库是否会移植到 iTunes

> ID：13695685
> 
> 赞同：0
> 
> 时间：2012-12-04T03:36:32.847
> 
> 标签：iphone, objective-c, itunes

我想知道当用户将应用程序与 iTunes 同步时，我的应用程序的 sqlite 数据库是否会转移到桌面，或者我是否需要进行一些编码以确保它会被转移？

请指教。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:07:45.870

您可以通过将`UIFileSharingEnabled`密钥添加到您的`info.plist`.

请检查下图：

![UIFileSharingEnabled](../Images/08ac1c47b8cd1869ea60eea139a252d9.png)

将此密钥添加到 info.plist 后，当您将 iPad 与 iTunes 同步时，文档文件夹中的文档将在 iTunes 中列出，如下所示：

![文件共享iPhone](../Images/bb5783e2b0489a4e10cb9497af076043.png)

这是启动 iTunes 文件共享的一个很好的教程：[**如何集成 iTunes 文件共享**](http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:34:23.097

我们不仅可以在iTunes上备份我们的文件，还可以在icloud中备份我们的文件......

这就是应用程序数据在应用程序更新、ios 升级过程中保持不变的方式......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:58:38.837

只要您将数据文件放在应用程序沙箱内的标准位置，并且您没有明确将该文件标记为不应备份的文件，那么数据文件将被备份到 iCloud 或 iTunes（取决于用户如何设置设备备份）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T04:06:27.397

这取决于您的文件方案，您可以决定哪些信息是必要的，应该备份，哪些不应该，因为它可以很容易地重新创建。

查找**“应将应用程序文件放在何处”**部分

[http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUIde/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW2](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW2)

# c# - 在 C# 沙箱中运行非托管 EXE

> ID：13695690
> 
> 赞同：1
> 
> 时间：2012-12-04T03:37:27.933
> 
> 标签：c#, unmanaged, sandbox, appdomain, managed

我有一个第三方非托管程序作为我的应用程序的一部分。我还有一个托管的 C# 应用程序，它是系统的“入口点”。它确保非托管程序只有在满足某些条件时才能正常运行。

我想让 C# 应用程序在沙箱中运行非托管程序，这样特定文件就不会*直接*从硬盘读取或写入硬盘；相反，C# 应用程序需要对其进行处理，然后将文件提供给第 3 方应用程序或将其保存到磁盘。

我已经研究过使用 C# 的 AppDomain 类，但我相信它只能运行托管代码。我想要完成的工作是否有替代系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:48:36.813

很确定您不能真正在 C# 沙箱中运行非托管程序，除非在 C# 中编写非托管仿真器并在其中运行非托管可执行文件。而且它运行起来很慢而且很难写，所以你可能不想走那条路。

我可以看到这种工作的唯一方法是，如果非托管程序为文件系统调用 C# 包装器。你有非托管程序的源代码吗？

# python - 转换为浮点数而不舍入小数位

> ID：13695692
> 
> 赞同：4
> 
> 时间：2012-12-04T03:37:40.753
> 
> 标签：python, list, floating-point

我有一个列表，其中包含某个数字`'5.74536541'`，我将其转换为浮点数。

我正在使用 Python 3 打印它，`("%0.2f" % (variable))`但它总是打印出 5.75 而不是 5.74。

我知道您在考虑谁在乎，但这是针对货币转换器程序的，我不希望货币向上/向下舍入，但要准确。

我怎样才能让它不四舍五入，但又保持小数点后 2 位？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T03:46:26.590

由于您提到的舍入错误，您不应该使用浮点数作为货币。

您最好的选择是使用[固定精度`decimal`](http://docs.python.org/2/library/decimal.html)，您还可以完全控制舍入和截断的工作方式。从文档：

```
>>> from decimal import *
>>> getcontext()
Context(prec=28, rounding=ROUND_HALF_EVEN, Emin=-999999999, Emax=999999999,
    capitals=1, flags=[], traps=[Overflow, DivisionByZero,
    InvalidOperation])

>>> getcontext().prec = 6
>>> Decimal('3.0')
Decimal('3.0')
>>> Decimal('3.1415926535')
Decimal('3.1415926535')
>>> Decimal('3.1415926535') + Decimal('2.7182818285')
Decimal('5.85987')
>>> getcontext().rounding = ROUND_UP
>>> Decimal('3.1415926535') + Decimal('2.7182818285')
Decimal('5.85988') 
```

`Decimals`您应该在内部以高精度表示所有基于货币的值（在您的情况下，标准精度水平应该没问题 - 不用`prec`管它！）。如果您想向用户打印格式良好的美元和美分值，使用该`locale`模块是一种直接的方法。

打印时要小心，因为您必须将`Decimal`向下量化到正确的显示位置数，否则舍入将不会基于您的`Decimal`上下文！您应该只`quantize`为最终显示或单个最终值执行该步骤 - 所有中间步骤都应使用高精度`Decimal`s 以使任何操作尽可能准确。

```
>>> from decimal import *
>>> import locale
>>> locale.setlocale(locale.LC_ALL, '')
'en_AU.UTF-8'
>>> getcontext().rounding = ROUND_DOWN
>>> TWOPLACES = Decimal(10) ** -2
>>> var = Decimal('5.74536541')
Decimal('5.74536541')
>>> var.quantize(TWOPLACES)
Decimal('5.74')
>>> locale.currency(var.quantize(TWOPLACES))
'$5.74' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T03:46:45.833

如果您正在处理货币和准确性问题，请不要使用`float`，使用`decimal`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T03:46:50.560

浮点值被称为“有用的近似值”。无论你对浮点数做什么——舍入它，截断它，无论如何——如果结果是一个浮点值，*你*就无法决定它的小数点右边有多少位。

*永远不要*对货币使用浮点值。参见`pydoc decimal`，例如。Python 的十进制模块支持十进制定点和十进制浮点运算。

Python 文档[警告舍入浮点数](http://docs.python.org/2/library/functions.html#round)。

> 注意 浮点数的 round() 行为可能令人惊讶：例如，round(2.675, 2) 给出 2.67 而不是预期的 2.68。这不是错误：这是因为大多数小数部分不能完全表示为浮点数。

如果你不小心，你会被[解释器提示符处出现的值误导](http://docs.python.org/2/tutorial/floatingpoint.html#tut-fp-issues)。

> Python 只打印机器存储的二进制近似值的真实十进制值的十进制近似值。

和

> 重要的是要意识到这实际上是一种错觉：机器中的值并不完全是 1/10，您只是将真实机器值的显示四舍五入。一旦您尝试对这些值进行算术运算，这一事实就会变得明显

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T03:49:28.170

带走数字 mod 0.01

IE

```
rounded = number - (number % 0.01) 
```

然后像以前一样打印它。

这就是说，四舍五入**并不**更准确。您是否正在尝试利用舍入错误方案从银行窃取资金？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-04T03:43:58.467

如果数字是字符串，则将字符串截断为小数点后仅 2 个字符，然后将其转换为浮点数。否则将其乘以 10^n，其中 n 是小数点后的位数，然后将浮点数除以 10^n。

# java - 获取 JSF 项目识别的上传文件

> ID：13695693
> 
> 赞同：-1
> 
> 时间：2012-12-04T03:37:50.393
> 
> 标签：java, jsf, jsf-2, primefaces, glassfish

我的问题是针对文件上传后的过程，我的意思是，我正在使用 JSF 2.1 和 Primefaces 将文件上传到我的项目文件夹，但我需要让项目立即识别该文件以便我可以使用它或阅读它以显示上传文件的一种预览，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:54:56.847

取决于您使用的组件。最简单的方法是使用[Single FileUpload](http://www.primefaces.org/showcase/ui/fileUploadSingle.jsf)：

```
<p:fileUpload fileUploadListener="#{fileBean.handleFileUpload}"
                          mode="advanced" 
                          sizeLimit="100000"/> 
```

上传后将调用 handleFileUpload 方法：

```
public void handleFileUpload(FileUploadEvent event) {
    String filename = event.getFile().getFileName();
    String content = new String(event.getFile().getContents());
} 
```

如您所见，`filename`两者`content`都是字符串，上传后很容易显示某种预览。

例如，您可以将 分配给`content`连接到`p:inputTextarea`接口上的另一个 bean 属性。然后通过使用 的`update`属性，`p:fileUpload`您可以更新特定的`p:inputTextarea`.

# left-join - 带有布尔值的 Hive 查询评估为 null

> ID：13695694
> 
> 赞同：2
> 
> 时间：2012-12-04T03:38:13.920
> 
> 标签：left-join, hive

我想要那些没有 b.email mathc 的 a.email 案例。所以在这种情况下 b.email 将为空，但我不确定如何正确编写配置单元查询

`select a.email, b.email from dir1 a left outer join on dir1 b where b.email`一片空白

我期望的输出是

```
abc@aol.com abc@aol.com
bcd@yahoo.com NULL 
```

我只想保留右侧有 NULL 的情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:26:07.010

使用 where b.email IS NULL

```
select a.email, b.email from dir1 a left outer join on dir1 b where b.email is null 
```

# android - 将画布保存为图像

> ID：13695695
> 
> 赞同：2
> 
> 时间：2012-12-04T03:38:14.243
> 
> 标签：android, bitmap, save, android-canvas

我一直在尝试将我的画布保存为 android 中的图像，但我的代码似乎在每次尝试保存时都会继续崩溃。我在互联网上找到了这样做的代码（因为那里似乎有很多），但我似乎无法让它适用于我的代码。

这是我所拥有的：

```
private File APP_FILE_PATH = new File("/sdcard/newpics");
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    paint.setStyle(Paint.Style.FILL);

         Bitmap toDisk = Bitmap.createBitmap(canvas.getWidth(),canvas.getHeight(),Bitmap.Config.ARGB_8888);
         canvas.setBitmap(toDisk);

         try {
            toDisk.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File(APP_FILE_PATH + "/myAwesomeDrawing.png")));
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }            
    } 
```

有什么不好的建议吗？

谢谢

更新：如果有帮助，这是我的 logcat：

```
12-03 22:39:48.593: E/AndroidRuntime(17637): FATAL EXCEPTION: main

12-03 22:39:48.593: E/AndroidRuntime(17637): java.lang.UnsupportedOperationException

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.HardwareCanvas.setBitmap(HardwareCanvas.java:37)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at com.example.myDraw.Draw_View.onDraw(Draw_View.java:56)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.draw(View.java:13707)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12645)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12689)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12583)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12689)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12583)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12689)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12583)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12689)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12583)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12689)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12583)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12689)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12583)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.View.getDisplayList(View.java:12689)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1198)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2173)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.Choreographer.doFrame(Choreographer.java:532)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.os.Handler.handleCallback(Handler.java:725)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.os.Handler.dispatchMessage(Handler.java:92)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.os.Looper.loop(Looper.java:137)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at android.app.ActivityThread.main(ActivityThread.java:5039)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at java.lang.reflect.Method.invokeNative(Native Method)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at java.lang.reflect.Method.invoke(Method.java:511)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)

12-03 22:39:48.593: E/AndroidRuntime(17637):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:59:49.920

看看这段[代码](https://stackoverflow.com/questions/5939987/android-take-screenshot-via-code)希望这是你想要的。

```
View content = findViewById(R.id.layoutroot); 
```

您可以截取所需视图的屏幕截图。R.id.CanvasView 。希望这可以帮助

# c# - 从接口方法获取委托

> ID：13695697
> 
> 赞同：2
> 
> 时间：2012-12-04T03:38:53.650
> 
> 标签：c#, interface, delegates

我有一些代码，它基本上抓住了一个事件处理程序，它处理多个事件，IHandles 上的每个处理方法处理 1 个事件。

```
public interface IHandles { } 

public interface IHandles<T> : IHandles
{
    void Handle(T message);
}

public void SubscribeHandler(IHandles eventHandler)
{
    var genericHandler = typeof(IHandles<>);
    var supportedEventTypes = eventHandler.GetType()
            .GetInterfaces()
            .Where(iface => iface.IsGenericType && iface.GetGenericTypeDefinition() ==                   genericHandler)
            .Select(iface => iface.GetGenericArguments()[0])
            .ToList();
    // Register this handler for each of the handled types.
    foreach (var eventType in supportedEventTypes)
    {
        Subscribe(eventType.GetType(), 
                   Delegate.CreateDelegate(eventType, eventHandler, "Handle")
                  ); 
    }
} 
```

现在第一个工作，但我不确定创建代表部分是否工作以及它是否是最好的方法。是否可以创建一个 Action ？

让 Subscribe 来存储 IHandles 而不是 Delgate 可能会更好，但是能够只注册一次性操作，尤其是用于单元测试，这很好。

```
public IDisposable Subscribe(Type t, Delegate delegate1)
{
    var key = t;

    if (!actions.ContainsKey(key))
         actions.Add(key, new List<Delegate>());

    actions[key].Add(delegate1);

    return new DomainEventRegistrationRemover(delegate { actions[key].Remove(delegate1); });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:52:58.150

无论如何，我将商店实现为 IDictionary，然后从 Action 创建一个 IHandles ..

# java - 本地 JMX 连接

> ID：13695698
> 
> 赞同：1
> 
> 时间：2012-12-04T03:39:08.977
> 
> 标签：java, rmi, jmx

使用对[链接](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/jmx_connections.html)的引用。
我正在尝试制作一个 Explicit local `JMX Connection`。
执行后

```
 java -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=3333 - Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -jar   test.jar command 
```

我正在尝试`JMX`建立联系。但是当我尝试与`localhost`and联系时`port 3333`，

我说错**了** `cannot connect to localhost:3333 using service:jmx:rmi:///jndi/rmi/://localhost:3333/jmxrmi`。
我根据文档进行了尝试，但我无法弄清楚问题所在。
提前致谢！

# c# - 将新的 Quartz.net 作业写入 Xml

> ID：13695699
> 
> 赞同：2
> 
> 时间：2012-12-04T03:39:16.827
> 
> 标签：c#, quartz.net

我计划将 RAMJobStore 用于 Quartz.net。根据我的阅读，我们可以在 Xml 中配置作业，并让 Xml 插件在运行时读取作业并触发它们

但是是否有 API 可以编写新作业或以编程方式将现有更新到 Xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:48:51.720

我不认为你能找到类似的东西，但你可以自己写。这是一个愚蠢的样本。
看看它。它可能会有所帮助：

```
jobschedulingdataSchedule[] jbSchedule = { new jobschedulingdataSchedule() };

jobdetailType[] jobs = {new jobdetailType() { description = "Blah" } };
triggerType[] triggers = {new triggerType() { Item = new simpleTriggerType() { description = "Blah" } } };
jbSchedule[0].job = jobs;
jbSchedule[0].trigger = triggers;

var quartzConfig = new QuartzXmlConfiguration20();
quartzConfig.version = "2.0";
quartzConfig.schedule = jbSchedule;

var quartzJobsXml = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "quartz_jobs.xml");
using (TextWriter textWriter = new StreamWriter(quartzJobsXml))
{
XmlSerializer serializer = new XmlSerializer(typeof(Quartz.Xml.JobSchedulingData20.QuartzXmlConfiguration20));
serializer.Serialize(textWriter, quartzConfig);
} 
```

# php - Apache Auth 配置设置覆盖从 PHP 发出的 auth 标头

> ID：13695708
> 
> 赞同：0
> 
> 时间：2012-12-04T03:40:53.397
> 
> 标签：php, apache, http-headers, authorization

我从 PHP 发出一个 401 标头和一个带有自定义值“应用程序”的 WWW-Authenticate 标头。自定义值阻止浏览器加载 Apache 授权弹出窗口，就像 WWW-Authenticate 标头设置为“基本”一样。这是我的应用程序处理身份验证时所需的行为。这一切都很好，似乎遵循 401 状态代码的意图，比发出 403 标头更好。

当我在 Apache 配置中已经具有 Apache 身份验证设置的服务器上运行此程序时，就会出现问题。401 标头导致 Apache 发送 Apache 配置中指示的 WWW-Authenticate 方法，而不是我从 PHP 发出的 WWW-Authenticate 标头。因此，响应标头变为 Apache 配置中的“基本”，而不是从我的应用程序发出的“应用程序”。这会导致无限的授权循环，并且 Apache auth 弹出窗口不断出现。

我现在对此的解决方案是只发出一个 403 标头，但这样做似乎不正确。403 表示该请求永远不会被授予，即使用户进行了身份验证。

我是否应该不使用 401 标头进行应用程序级登录？似乎它仅用于 HTTP 身份验证。如果不是，403真的适合这个吗？我找遍了整个地方，找不到一个明确的标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:13:11.283

有一个选项可以[取消设置 Apache 标头](http://httpd.apache.org/docs/current/mod/mod_headers.html)（其工作方式与在 PHP 中设置标头不同）。

因此，您可以尝试添加到 .htaccess 以删除 PHP 文件的标头。

```
<FilesMatch "\.(php)$">
Header unset WWW-Authenticate
</FilesMatch> 
```

# iis-6 - IIS6 网站无法远程访问

> ID：13695713
> 
> 赞同：0
> 
> 时间：2012-12-04T03:41:08.287
> 
> 标签：iis-6, windows-2003-webserver

我有一台安装了 IIS6 + .Net 4 的 Windows 2003 服务器。

我创建了一个在 8002 端口上运行的站点。它可以在本地访问，但不能远程访问。我做了以下测试

*   我使用服务器的本地浏览器访问`http://192.168.1.107:8002/WebForm2.aspx`，我可以成功获取页面。
*   我在远程机器上打开了一个浏览器访问`http://192.168.1.107:8002/WebForm2.aspx`，浏览器等待了很长时间，最终显示超时，网页不可用消息。
*   我从客户端机器上试过`telnet 192.168.1.107 8002`，可以建立连接。我相信我已经关闭了 Windows 2003 服务器防火墙，否则端口应该被阻止。
*   我`ping 192.168.1.107`从客户端机器上运行并得到响应。
*   在远程浏览器等待响应时，我关闭了站点（不是 IIS）并且浏览器立即无法使用。它看起来像是连接到该站点的浏览器，但只是有些东西挂在那里。

什么可能导致这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:44:37.470

你的dns设置是什么？ip 是否绑定到此域/主机标头？

重新检查您在 iis 中的设置并检查您的防火墙。

听起来您可以访问服务器，但我只能根据您所说的您已经尝试过的内容来猜测。

我还将确保没有其他任何东西在使用该 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:55:27.917

好吧，奇怪的事情。我在VS2012中创建了站点，忘记将目标框架改回4.0，所以编译为4.5。但是服务器没有安装4.5。

一旦我更改了目标框架，一切都会正常工作。

我只是不明白一件事，为什么它在 4.5 本地工作。

# objective-c - 我们有什么理由不像这样简单地声明 cellForRowAtIndexPath ：

> ID：13695714
> 
> 赞同：0
> 
> 时间：2012-12-04T03:41:13.723
> 
> 标签：objective-c, uitableview, xcode4.5

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell * cell = [self.tableView cellForRowAtIndexPath:indexPath];
    return cell.bounds.size.height;
} 
```

会有什么缺点？

我把它从

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell * cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
    return cell.bounds.size.height;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:54:17.837

通常你会想从表格中获取一个单元格，就像你在第一个代码中所做的那样。但在这种情况下，你不能。如果你尝试，你最终会在 and 之间进行递归`cellForRowAtIndexPath`调用`heightForRowAtIndexPath`。

如果必须从`heightForRowAtIndexPath`方法中获取单元格，则不得向表格询问单元格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:07:20.743

正如 rmaddy 指出的那样，您不能使用第一个版本，因为`-[UITableView cellForRowAtIndexPath:]`会导致表格视图`tableView:heightForRowAtIndexPath:`再次发送给您，从而导致无限递归。

如果您使用的是一组静态单元格，并且为表格的每一行预先分配了一个单元格，那么第二个版本就可以了。

如果您为行动态创建单元格，则第二个版本最终将耗尽您的表格视图的重用队列，然后为每一行创建另一个单元格，因为`tableView:cellForRowAtIndexPath:`返回一个自动释放的对象。在运行循环结束之前，这些单元格都不会被释放，因此除了创建和销毁所有这些单元格的时间成本之外，您还使用与表中的行数成正比的内存。如果你想这样做，并且你有很多行，你可能想使用一个显式的自动释放池：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    @autoreleasepool {
        UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
        return cell.bounds.size.height;
    }
} 
```

# css - HTML Header 与内容不对齐

> ID：13695716
> 
> 赞同：2
> 
> 时间：2012-12-04T03:41:18.580
> 
> 标签：css, html, web, header

网址：http: [//younani.com/finalsite/finalindex.html](http://younani.com/finalsite/finalindex.html)

当浏览器未最大化时，我的标题会对齐。当我最大化它以移动并且未对齐时。我怎样才能对齐它，使它永远不会移动。我希望它与下面的其他内容处于完全相同的位置

CSS：

```
#header {margin-left:50px; align: center;
         }

#container {

     background-color: #FAFAFA;
     color: #003300;
     font-family: Arial, Helvetica, sans-serif; background-position: center; background-size: cover;

}

#h2 {text-align: center;}

#container {
          margin-right:auto;
          margin-left:auto;
          background-image:url('backgroundflower5.jpg');
          min-width:1000px;
          max-width:1000px;
          padding:0px 70px 50px 70px;
          border:1px ridge #000000;
          border-radius:20px;
          -webkit-box-shadow:inset -3px -3px -3px 3px #18cad0;
          -moz-box-shadow:inset -3px -3px 3px 3px #00332B;
          box-shadow:inset -3px -3px 1px .9px black;
            width: 960px;
            margin: 0 auto;
        }

        #container div {

        }

        #header {}

#center2 {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px; width: 494px; border-radius:8px; 
        }

#centerO {float: left;
            margin: 10px 0 10px 20px;

            min-width: 200px; font-family: "Comic Sans MS", cursive, sans-serif; background-color: #FFFFFF;
            width: 494px; border-radius:8px; text-align: left; box-shadow:inset 1px 1px 10px 1px #000000; }

#center {box-shadow:inset 1px 1px 10px 1px #000000;}

        #left,
        #center,
        #right {
            float: left; margin: 10px 0 10px 20px;

            min-width: 200px;
        }

        #center {font-family: "Comic Sans MS", cursive, sans-serif; background-color: #FFFFFF;
            width: 494px; border-radius:8px; text-align: center;
        } 

        .clear {
            clear: both;
        }

#right2 {float: left;
            margin: 10px 0 10px 20px; border: 0px;

            min-width: 200px;}

#right { font-family: Impact, Charcoal, sans-serif; border-radius:8px; background-color: #FFFFFF; box-shadow:inset 1px 1px 10px 1px #000000; text-align: center;}

#left a {font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
        display: block;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #ffffff 0%,
        #2a07ed);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#ffffff),
        to(#2a07ed));
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 30px;
    border: 3px solid #ffffff;
    -moz-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    -webkit-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.2),
        0px 1px 0px rgba(255,255,255,0.3);
}

figure{}

#left a:link { background-color: #E6E6E6; }
#left a:visited { background-color: #E6E6E6; }
#left a:hover {border: 3px inset #333333; }

#left ul { list-style-type: none;
          margin: 0;
          padding-left: 0; }

#footer { text-align: center; font-family: Audimat;
    clear: both; width:38%;
        border-radius: 8px;
        background-color:white;
        text-align:center; margin-right:auto;
        margin-left:auto; box-shadow:inset 1px 1px 10px 1px #000000;} 
```

HTML：

```
<!DOCTYPE html>

<html lang="en">

<head>

   <title>Younani Flower's</title>

   <meta charset="utf-8">

   <link rel="stylesheet" href="final.css" />
</head>

<body>
<div id="header"><img src="header88.png" alt="header" height="200" width="1150" align="left:100px" /></div>
<div id="container" class="clearfix"><!-- Header --> <!-- Left Column -->
<div id="left">
<ul>
<li><a href="finalindex.html">Home</a></li>
<li><a href="gallery.html">Gallery</a></li>
<li><a href="occasions.html">Occasions</a></li>
<li><a href="aboutus.html">About Us</a></li>
<li><a href="contactus.html">Contact Us</a></li>
</ul>
</div>
<!-- Center Column -->
<div id="center">
<p><strong>In-store Specials</strong></p>
<p>Dozen Red Roses: $12.99</p>
<p>Bouquet of TEN different garden flowers: $19.99</p>
<p>Small glass vases: $9.99 <br /> Medium glass vases $14.99 <br /> Large glass vases: $19.99</p>
<p>Buy THREE of the any vases and receive the fourth one FREE!</p>
</div>
<!-- Right Column -->
<div id="right">
<p><span style="text-decoration: underline;"><strong>Birth Month Flowers<strong></strong></strong></span></p>
<p>January Carnation</p>
<p>February Iris</p>
<p>March Daffodil</p>
<p>April Daisy</p>
<p>May Lily</p>
<p>June Rose</p>
<p>July Delphinium</p>
<p>August Dahlia</p>
<p>September Aster</p>
<p>October Calendula</p>
<p>November Chrysanthe</p>
<p>December Poinsettia</p>
</div>
<!-- Footer -->
<div id="footer" class="clear">
<div class="nav"><b><a href="finalindex.html">Home</a>&nbsp;&nbsp; <a href="gallery.html">Gallery</a>&nbsp;&nbsp; <a href="occasions.html">Occasions</a>&nbsp;&nbsp; <a href="aboutus.html">About Us</a>&nbsp;&nbsp; <a href="contactus.html">Contact Us</a>&nbsp;&nbsp;</b></div>
</div>
</div>
<!-- #container -->
<p></p>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T03:49:41.777

您正在使用`margin-left:50px;`use 代替`margin :0 auto;`

```
#header {
    margin: 0 auto;
    width: 1150px;
 } 
```

它做了什么margin-left

![在此处输入图像描述](../Images/4e32761121d53711550d0544feae2c49.png)

所以它会离开浏览器 50px 并且在不同的宽度上它看起来会有所不同所以更好的方法是使用`margin:0 auto;`

边距：0 自动使始终居中

![在此处输入图像描述](../Images/7e0090c46f566fa97efe5bb9d66382e5.png)

![在此处输入图像描述](../Images/4e75ac42664712394c10327463118d90.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T03:48:17.757

**像这样**定义你的`#header` `with`或`margin : 0 auto`

 **```
#header {
    margin: 0 auto;
    width: 1150px;
} 
```

**结果是**

![在此处输入图像描述](../Images/5241d5250ae2c2648a39f3bd4a750c70.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T03:43:18.047

您的内容应该包装在包含所有内容的容器 div 中。如果您正在寻找它，它可以是固定宽度以保持一致性，或者使用其他 css 属性来支持它。**

# java - Java 工作目录

> ID：13695718
> 
> 赞同：1
> 
> 时间：2012-12-04T03:41:40.783
> 
> 标签：java, path, xbox360, jinput

我对编程很陌生，所以这应该很容易。我正在从 eclipse 切换到 netbeans，并且正在尝试将 libjinput-osx.jnilib 添加到我的工作目录中。我有 eclipse 的分步说明，但没有 netbeans。我大约有 2.5 小时和 65 次谷歌搜索，但我仍然找不到这两个基本问题的答案。

1.  java中的[工作目录](http://www.roseindia.net/java/java-get-example/get-CWD.shtml)到底是什么？
2.  如何将 .jnilib 文件添加到 netbeans 中的工作目录？

我的最终目标是获得一个 xbox 控制器来控制我写的蛇游戏。我正在尝试使用 JInput 和[本教程](http://yaolddawg.blogspot.com/2011/08/configure-open-source-controller-jinput.html)。为了在 OSX 上正确编译，我需要将 libjinput-osx.jnilib 放在“工作目录”中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T03:45:54.853

“工作目录”是应用程序在其中工作的位置......神秘吧;）

通常它是应用程序的启动位置，尽管这可以通过标志和其他过程进行修改。

在 Netbeans 中，工作目录通常是项目的根目录（其中包含`src`and`nbproject`文件夹），但这可以通过项目属性进行更改。

在运行时找到工作目录的最简单方法之一（这对测试很有用）是做一些事情，比如......

```
System.out.println(new File(".").getAbsolutePath()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T03:57:24.797

这个问题有两个方面。

当您从命令行运行命令时，“工作目录”是您运行命令时所在的目录。您正在阅读的说明说将本机库放在那里，因为 Java 对本机库的默认搜索路径包括当前目录。或者，您可以`-Djava.library.path=...`在命令中添加一个选项以`java`明确设置搜索路径。

当您从 Eclipse ... 或 NetBeans ... 中运行命令时，IDE 的启动器将设置适当的 JVM 参数以在搜索路径中包含项目的本机库目录。您需要将库放在那个目录中。 [此 wiki 页面](http://wiki.netbeans.org/DevFaqNativeLibraries)解释了您需要为 NetBeans 执行哪些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:49:54.913

看起来您真正想做的是加载本机库。试试这个：

```
public class MainClass {
    static {
        System.loadLibrary( "Your_native_lib_file_name" ); // Note: do not include the file extension!
    }
} 
```

您也可以尝试 -Djava.library.path=/exact/path/to/dir/

从这里复制的答案： [Java 似乎找不到我的本机库](https://stackoverflow.com/questions/3587421/java-cant-seem-to-find-my-native-libraries)

# javascript - 使用 javascript 在客户端机器上动态创建缩略图

> ID：13695720
> 
> 赞同：2
> 
> 时间：2012-12-04T03:41:45.863
> 
> 标签：javascript, image, gallery, thumbnails, exif

我正在处理照片库。使用 php 读取文件并将其推送到客户端计算机上的 jquery 以构建图像库。（效果很好）

我想使用 php exif 函数来获取图像的缩略图来预览照片

我无法使用 php 功能，因为我的主机禁用了 exif 模块。

我找到了很棒的库[php 库](http://www.ozhiker.com/electronics/pjmt/library/Example.php?jpeg_fname=test.jpg)，但我无法按照我的意愿启动它。我只是找不到很好的手册。（我会继续努力，因为这是在测试图像上工作）

我不会为此使用裁剪功能（jquery 或 html），因为我不想从一开始就下载所有图像。我只想加载缩略图，点击它会加载图像本身。

谁能帮我解决这个问题？非常感谢！！！！

阿列克谢 alexela.biz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:48:53.243

您的主机是否禁用了[GD 和图像](http://php.net/manual/en/ref.image.php)功能？

试试这个块： [http ://davidwalsh.name/create-image-thumbnail-php](http://davidwalsh.name/create-image-thumbnail-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:51:32.150

如果要在浏览器中转换图像，则必须将图像下载到浏览器。所以只需设置图像的样式，以便浏览器将其显示为拇指。

例如，如果您的图像是 460 x 460 像素，那么您可以通过将以下样式添加到 img 标签来创建 100x100 像素的缩略图。

```
<img id="my_thumb" src="my/image/source460x460.jpg" style="height: 100px, width: 100px"> 
```

我猜你的javascript看起来像 -

```
var imageElement = document.getElementById('my_thumb'); 
```

基于标准的浏览器

```
imageElement.setAttribute('style', "height: 100px, width: 100px"); 
```

狡猾的IE浏览器

```
imageElement.style.setAttribute('cssText', "height: 100px, width: 100px"); 
```

和jQuery

```
$('#my_thumb').attr('style') = "height: 100px, width: 100px"; 
```

# c - C服务器不接受任何客户端

> ID：13695724
> 
> 赞同：0
> 
> 时间：2012-12-04T03:41:54.443
> 
> 标签：c, networking

这是我的问题：当我启动服务器并尝试使用客户端连接到它时，客户端找不到端点。我几乎可以肯定它不是客户端，因为我可以使用相同的客户端连接到另一台服务器。是的，我为客户端和服务器使用相同的端口号，是的，我使用“127.0.0.1”作为地址。我可以在同一个端口上启动不同的服务器并使用客户端连接到它。我的客户代码贴在最底部。当我运行我的服务器时，它位于它假设的位置，在 socket = acceptSocket(...) 行上，但我的客户端无法连接到它。有没有人看到问题？谢谢阅读！

* * *

这是我为服务器获得的输出：

> 创建新服务器...
> 等待客户端...

这是客户端的输出：

> 启动一个新的客户端连接....
> PORT: 8081
> ADDRESS: 127.0.0.1
> 成功了吗？false
> 连接失败，请尝试重新启动服务器。

* * *

这是我的 server.c 代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include "server.h"

//returns a setup server socket
int setupServer(int port, struct sockaddr_in serv)
{
    memset(&serv, 0, sizeof(serv));    /* zero the struct before filling the fields */
    serv.sin_family = AF_INET;         /* set the type of connection to TCP/IP */
    serv.sin_addr.s_addr = INADDR_ANY; /* set our address to any interface */
    serv.sin_port = htons(port);    /* set the server port number */ 

    return socket(AF_INET, SOCK_STREAM, 0); // returns a setup server socket
}

int startServer(int serverSocket, struct sockaddr_in serv)
{
    bind(serverSocket, (struct sockaddr *)&serv, sizeof(struct sockaddr));
    return listen(serverSocket, 1);
}

int acceptSocket(int serverSocket, struct sockaddr_in serv, struct sockaddr_in client)
{
    unsigned int socksize = sizeof(struct sockaddr_in); // how many memory blocks is socket
    printf("%s %d","Socket sze:::", socksize);
    return accept(serverSocket, (struct sockaddr *)&client, &socksize);
}

void closeServer(int socket)
{
    shutdown(socket, SHUT_RDWR);
    close(socket);
} 
```

这是 server.c (server.h) 的标头：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

#ifndef ServerTools_server_h
#define ServerTools_server_h

int setupServer(int port, struct sockaddr_in serv);
int startServer(int serverSocket, struct sockaddr_in serv);
int acceptSocket(int serverSocket, struct sockaddr_in serv, struct sockaddr_in client);
void closeServer(int socket);

#endif 
```

这是我用来创建服务器并启动它的 main.c：

```
#include <stdio.h>
#include "server.h"

#define PORT 8081

void println(char* c);
int serverSocket;

struct sockaddr_in serverSettings;

int main(int argc, const char * argv[])
{
    println("Creating a new server...");
    serverSocket = setupServer(PORT, serverSettings);

    startServer(serverSocket, serverSettings);

    println("waiting for a client...");

    struct sockaddr_in client;
    int socket = acceptSocket(serverSocket, serverSettings, client);

    printf("%s %d", "socket accepted: ", socket);

    return 0;
}

void println(char* c)
{
    printf("%s%s", c, "\n");
} 
```

* * *

我的客户端代码，用 Java 编写：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

public class Client implements Runnable
{
    public Client()
    {
        System.out.println("Starting up a new client connection....");
        System.out.println("PORT: " + PORT);
        System.out.println("ADDRESS: " + ADDRESS);
        boolean success = connect();
        System.out.println("Success? " + success);
        if(!success)
        {
            System.out.println("Connect failed, try restarting server.");
            System.exit(0);
        }

        System.out.println("Connection is setup, listening for data...");

        running = true;
        inputThread = new Thread(this);
        inputThread.start();

        consoleThread = new Thread(new Runnable()
        {
            public void run()
            {
                consoleInput = new BufferedReader(new InputStreamReader(System.in));

                while(running)
                {
                    try
                    {
                        String message = "";
                        while((message = consoleInput.readLine()) != null)
                        {
                            Client.this.sendMessage(message);
                        }
                    }catch(Exception e){}
                }
            }
        });
        consoleThread.start();

    }

    public boolean connect()
    {
        try
        {
            socket = new Socket(ADDRESS, PORT);
            writer = new PrintWriter(socket.getOutputStream());
            reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            return true;
        }catch(Exception e){}
        return false;
    }

    public void run()
    {
        while(running)
        {
            try
            {
                String message = "";
                while((message = reader.readLine()) != null)
                {
                    System.out.println("Message recieved: " + message);
                }
            }catch(Exception e){}
        }
    }

    public void sendMessage(String message)
    {
        writer.println(message);
        writer.flush();
        if(!writer.checkError())
            System.out.println("Message sent: " + message);
        else
            System.out.println("Message not sent.");
    }

    private Socket socket;
    private PrintWriter writer;
    private BufferedReader reader;
    private BufferedReader consoleInput;
    private boolean running;

    private Thread consoleThread;
    private Thread inputThread;

    public static final int PORT = 8081;
    public static final String ADDRESS = "127.0.0.1";

    public static void main(String args[])
    {
        new Client();
    }
} 
```

* * *

从远程登录：

> 正在尝试 127.0.0.1...
> telnet：连接到地址 127.0.0.1：连接被拒绝
> telnet：无法连接到远程主机

* * *

来自java的异常：

> java.net.ConnectException：连接被拒绝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:57:54.483

尝试将 serverSettings 的*指针*发送到 setupServer() 和 startServer()。

您的服务器设置在从 setupServer() 返回时被取消以获取按值调用语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:58:07.603

您在 server.c( `setupServer`, `startServer`) 中的函数应将`struct sockaddr_in *`其作为参数或不将其作为参数并引用 global `serverSettings`。

您的代码的问题是，当您将参数作为`struct sockaddr_in serv`并更新它时，更改不会反映在传递的结构变量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T03:59:14.543

您正在丢失传递给 的值`serv`，因为在 的上下文中，`setupServer()`您有 的值的本地副本，`serverSettings`并且您的修改在函数之外不可见。要在完成后保留它们`setupServer`，您需要使用指针：

```
int setupServer(int port, struct sockaddr_in *serv)
{
    memset(serv, 0, sizeof(*serv));    /* zero the struct before filling the fields */
    serv->sin_family = AF_INET;         /* set the type of connection to TCP/IP */
    serv->sin_addr.s_addr = INADDR_ANY; /* set our address to any interface */
    serv->sin_port = htons(port);    /* set the server port number */ 

    return socket(AF_INET, SOCK_STREAM, 0); // returns a setup server socket
} 
```

然后按如下方式调用它：

```
serverSocket = setupServer(PORT, &serverSettings); 
```

# haskell - `newtype T = MkT (T -> T)` 有用例吗？

> ID：13695726
> 
> 赞同：13
> 
> 时间：2012-12-04T03:42:15.893
> 
> 标签：haskell

Sulzmann、Chakravarty 和 Peyton Jones的论文[“System F with Type Equality Coercions”](http://research.microsoft.com/en-us/um/people/simonpj/papers/ext-f/)`newtype`通过以下示例说明了 Haskell 到 System FC 的转换：

```
newtype T = MkT (T -> T) 
```

据我了解，除了`unsafePerformIO`，这种类型的唯一可能值是`MkT id`和`MkT undefined`因为参数化。我很好奇这个（或类似的）定义是否有一些实际用途。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T04:00:59.190

参数化是关于带**变量**的类型的值。 `T`没有变量，所以参数化不适用。事实上，T 有很多居民

```
ap :: T -> T -> T
ap (MkT f) t = f t

idT :: T
idT = MkT id

constT :: T
constT = MkT $ \t -> MkT $ \_ -> t

axiom_sT :: T
axiom_sT = MkT $ \f -> MkT $ \g -> MkT $ \a -> (g `ap` a) `ap` (f `ap` a) 
```

该类型`T`是[Untyped Lambda Calculus](http://en.wikipedia.org/wiki/Lambda_calculus)的一种实现，它是一种通用的形式系统，其功能等同于图灵机。上面的三个函数（加号`ap`）构成了 SKI 演算，一个等效的形式系统。

可以将任何 Haskell 数据类型编码为`T`. 考虑自然数的类型

```
data Nat = Zero | Succ Nat 
```

我们可以编码`Nat`成`T`

```
church :: Nat -> T
church Zero     = MkT $ \f -> MkT $ \x -> x
church (Succ n) = MkT $ \f -> MkT $ \x -> f `ap` (church n) 
```

现在，你是部分正确的。Haskell 中没有办法编写它的反函数（据我所知）。这真是一种耻辱。尽管您可以使用 type 编写一种伪逆`T -> IO Nat`。另外，我的理解是 GHCs 优化器可能会因递归而死`newtypes`（如果我对此有误，请有人纠正我，因为我想重新使用它们）。

相反，类型

```
data T = MkT (T -> T) | Failed String 
```

和

```
ap (MkT f)    a = f a
ap (Failed s) _ = Failed s 
```

这是有例外的 lambda 演算，可以以完全可逆的方式使用。

总之，从某种意义上说，`T`它根本不是一种有用的类型，但在另一种意义上，它是**最有用的类型**。

# java - 我怎样才能回到呼叫点

> ID：13695731
> 
> 赞同：0
> 
> 时间：2012-12-04T03:43:07.087
> 
> 标签：java, spring-mvc

我正在尝试在 Spring MVC 中编写一个控制器。根据要求，我必须从一个点调用一个jsp，在jsp中进行一些逻辑之后，我需要从jsp返回到Controller中的同一个调用点。请让我知道这在 Spring Mvc 中是否可行。

# vba - 使用 VBA 将矩阵相乘并将结果保存在文本文件中

> ID：13695735
> 
> 赞同：0
> 
> 时间：2012-12-04T03:43:47.747
> 
> 标签：vba, excel

如果有人能给我一些帮助，我将不胜感激。

我对 vba 非常熟悉，我可以编写简单的代码，也可以自定义其他人的代码。我已经编写了 /customized/copyed 几段 vba 代码来执行以下操作（确认复制的源）：

1.  选择 2 个不同的 csv 文件，它们代表 2 个相同列和相同行的矩阵。
2.  将矩阵中的每个相应单元格相乘。
3.  返回结果。

不幸的是，我似乎无法让它运行。知道我做错了什么吗？请看下面的代码。非常感谢。 **代码从以前的版本更改**

```
Public Sub doIt()
    Dim sourceFile As String
    Dim destinationFile As String
    Dim data As Variant
    Dim result As Variant
    Dim sourceFile2 As String
    Dim datarain As Variant

    sourceFile = "C:\file1.csv"
    sourceFile2 = "C:\file2.csv"
    destinationFile = "C:\file3.txt"
    data = getDataFromFile(sourceFile, ",")
    datarain = getDataFromFile(sourceFile2, ",")
    If Not isArrayEmpty(data) Then
       result = MMULT2_FUNC(data, datarain)
       writeToCsv result, destinationFile, ","
    Else
       MsgBox ("Empty file")
    End If
End Sub

Function MMULT2_FUNC(ByRef ADATA_RNG As Variant, _
ByRef BDATA_RNG As Variant)

Dim i As Long
Dim j As Long
Dim k As Long

Dim ANROWS As Long
Dim BNROWS As Long

Dim ANCOLUMNS As Long
Dim BNCOLUMNS As Long

Dim ADATA_MATRIX As Variant
Dim BDATA_MATRIX As Variant

Dim TEMP_MATRIX As Variant

On Error GoTo ERROR_LABEL

ADATA_MATRIX = ADATA_RNG
BDATA_MATRIX = BDATA_RNG

ANROWS = UBound(ADATA_MATRIX, 1)
BNROWS = UBound(BDATA_MATRIX, 1)

ANCOLUMNS = UBound(ADATA_MATRIX, 2)
BNCOLUMNS = UBound(BDATA_MATRIX, 2)

If ANCOLUMNS <> BNROWS Then: GoTo ERROR_LABEL

ReDim TEMP_MATRIX(1 To ANROWS, 1 To BNCOLUMNS)

For i = 1 To ANROWS
    For j = 1 To BNCOLUMNS
        TEMP_MATRIX(i, j) = 0
        For k = 1 To ANCOLUMNS
            TEMP_MATRIX(i, j) = TEMP_MATRIX(i, j) + ADATA_MATRIX(i, k) * _
                                BDATA_MATRIX(k, j)
        Next k
    Next j
Next i

MMULT2_FUNC = TEMP_MATRIX

Exit Function
ERROR_LABEL:
MMULT2_FUNC = Err.Number
End Function

Public Sub writeToCsv(parData As Variant, parFileName As String, parDelimiter As String)

    If getArrayNumberOfDimensions(parData) <> 2 Then Exit Sub

    Dim i As Long
    Dim j As Long
    Dim FileNum As Long
    Dim locLine As String
    Dim locCsvString As String

    FileNum = FreeFile
    If Dir(parFileName) <> "" Then Kill (parFileName)
    Open parFileName For Binary Lock Read Write As #FileNum

    For i = LBound(parData, 1) To UBound(parData, 1)
      locLine = ""
      For j = LBound(parData, 2) To UBound(parData, 2)
        If IsError(parData(i, j)) Then
          locLine = locLine & "#N/A" & parDelimiter
        Else
          locLine = locLine & parData(i, j) & parDelimiter
        End If
      Next j
      locLine = Left(locLine, Len(locLine) - 1)
      If i <> UBound(parData, 1) Then locLine = locLine & vbCrLf
      Put #FileNum, , locLine
    Next i

error_handler:
    Close #FileNum

End Sub

Public Function isArrayEmpty(parArray As Variant) As Boolean
'Returns false if not an array or dynamic array that has not been initialised (ReDim) or has been erased (Erase)

  If IsArray(parArray) = False Then isArrayEmpty = True
  On Error Resume Next
  If UBound(parArray) < LBound(parArray) Then isArrayEmpty = True: Exit Function Else: isArrayEmpty = False

End Function

Public Function getArrayNumberOfDimensions(parArray As Variant) As Long
'Returns the number of dimension of an array - 0 for an empty array.

    Dim i As Long
    Dim errorCheck As Long

    If isArrayEmpty(parArray) Then Exit Function 'returns 0

    On Error GoTo FinalDimension
    'Visual Basic for Applications arrays can have up to 60000 dimensions
    For i = 1 To 60001
        errorCheck = LBound(parArray, i)
    Next i

    'Not supposed to happen
    getArrayNumberOfDimensions = 0
    Exit Function

FinalDimension:
    getArrayNumberOfDimensions = i - 1

End Function

Private Function getDataFromFile(parFileName As String, parDelimiter As String, Optional parExcludeCharacter As String = "") As Variant
'parFileName is supposed to be a delimited file (csv...)
'parDelimiter is the delimiter, "," for example in a comma delimited file
'Returns an empty array if file is empty or can't be opened
'number of columns based on the line with the largest number of columns, not on the first line
'parExcludeCharacter: sometimes csv files have quotes around strings: "XXX" - if parExcludeCharacter = """" then removes the quotes

  Dim locLinesList() As Variant
  Dim locData As Variant
  Dim i As Long
  Dim j As Long
  Dim locNumRows As Long
  Dim locNumCols As Long
  Dim fso As Variant
  Dim ts As Variant
  Const REDIM_STEP = 10000

  Set fso = CreateObject("Scripting.FileSystemObject")

  On Error GoTo error_open_file
  Set ts = fso.OpenTextFile(parFileName)
  On Error GoTo unhandled_error

  'Counts the number of lines and the largest number of columns
  ReDim locLinesList(1 To 1) As Variant
  i = 0
  Do While Not ts.AtEndOfStream
    If i Mod REDIM_STEP = 0 Then
      ReDim Preserve locLinesList(1 To UBound(locLinesList, 1) + REDIM_STEP) As Variant
    End If
    locLinesList(i + 1) = Split(ts.ReadLine, parDelimiter)
    j = UBound(locLinesList(i + 1), 1) 'number of columns
    If locNumCols < j Then locNumCols = j
    If j = 13 Then
      j = j
    End If
    i = i + 1
  Loop

  ts.Close

  locNumRows = i

  If locNumRows = 0 Then Exit Function 'Empty file

  ReDim locData(1 To locNumRows, 1 To locNumCols + 1) As Variant

  'Copies the file into an array
  If parExcludeCharacter <> "" Then

    For i = 1 To locNumRows
      For j = 0 To UBound(locLinesList(i), 1)
        If Left(locLinesList(i)(j), 1) = parExcludeCharacter Then
          If Right(locLinesList(i)(j), 1) = parExcludeCharacter Then
            locLinesList(i)(j) = Mid(locLinesList(i)(j), 2, Len(locLinesList(i)(j)) - 2)       'If locTempArray = "", Mid returns ""
          Else
            locLinesList(i)(j) = Right(locLinesList(i)(j), Len(locLinesList(i)(j)) - 1)
          End If
        ElseIf Right(locLinesList(i)(j), 1) = parExcludeCharacter Then
          locLinesList(i)(j) = Left(locLinesList(i)(j), Len(locLinesList(i)(j)) - 1)
        End If
        locData(i, j + 1) = locLinesList(i)(j)
      Next j
    Next i

  Else

    For i = 1 To locNumRows
      For j = 0 To UBound(locLinesList(i), 1)
        locData(i, j + 1) = locLinesList(i)(j)
      Next j
    Next i

  End If

  getDataFromFile = locData

  Exit Function

error_open_file:                 'returns empty variant
unhandled_error:                 'returns empty variant

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:51:15.010

谢谢大家的帮助。我的代码没有打印结果的原因是我有这个：`If ANCOLUMNS <> BNROWS Then: GoTo ERROR_LABEL`. 同时，我使用了两个 70*120 的矩阵，所以它不断退出函数，就像我编写的那样！！全部更正并且工作正常。非常感谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:33:38.497

尽管我个人的印象是您的代码在某些情况下可以改进，但它在语法上执行没有问题（在小矩阵上）。

我的测试数据

```
1,2,3       2,3,4      20,26,32
2,3,4   X   3,4,5  =   29,38,47
3,4,5       4,5,6      38,50,62 
```

结果被整齐地写入 CSV。

唯一明显的问题（在 Win 7 上！）是`Sub writeToCsv -> Open parFileName`... 由于缺少对根目录的写入权限而失败。这在 XP 上可能不是问题。

换一种说法，我觉得代码可以改进，但我可能不明白你的代码某些部分背后的基本原理。

例子

```
Function MMULT2_FUNC(ByRef ADATA_RNG As Variant, ByRef BDATA_RNG As Variant) ' missing type of result

Private Function getDataFromFile(...)
...
If j = 13 Then
    j = j
End If ' whow ... if j <> 13 then j again equals j ;-) 
```

找到输入和输出矩阵的上限和下限可以大大简化......

# iphone - ios facebook登录地址无效

> ID：13695737
> 
> 赞同：1
> 
> 时间：2012-12-04T03:44:01.963
> 
> 标签：iphone, xcode, facebook-login

我使用来自 facebook SDK 的 sessionloginsample 作为基线。我更改了应用 ID，并设法使用我的应用名称授权我的 fb acc。但是，一旦我单击顶部的确定按钮，就会弹出一个状态“无法打开页面”，因为地址无效。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T05:35:33.237

这是因为您没有在应用程序的 plist 文件中更改应用程序 ID。您也应该在 plist 中更改您的应用程序 ID。将您的应用程序 ID 放在我写了 YOURAPPID 的地方，它就会工作。检查附加的图像以获得更多说明。

![在此处输入图像描述](../Images/0d8f705e1cb8927e9067a7f56f40c8ed.png)

# google-chrome - document.execCommand('paste') 返回“true”

> ID：13695738
> 
> 赞同：0
> 
> 时间：2012-12-04T03:44:09.210
> 
> 标签：google-chrome

我正在尝试开发一个 google chrome 扩展程序，其中一部分是`chrome.tabs.create( { url: "https://google.com/search?q=" +document.execCommand("paste") } );`，链接显示为“https://google.com/search?q=true”任何帮助都很棒！！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:52:03.637

`execCommand('paste')`不能那样工作。它不会返回剪贴板的内容，而是会执行如果有人按下 Command+V 或 Control+V 会发生的事情。它会将文本粘贴到文本光标所在的任何位置。

您可能想要在扩展程序中做的是在扩展程序的背景 HTML 页面中创建一个 textarea `focus`，然后执行命令。从那里您可以从 textarea 读取文本。

如果您不熟悉背景页面，可以从[Chrome 的文档](https://developer.chrome.com/extensions/background_pages.html)中获取详细信息。

使用后台页面是必要的，因为 Chrome 对其应用了不同的沙盒限制。`execCommand('paste')`只能用在更多特权的地方，比如背景页面。

您可以[`sendMessage`](http://developer.chrome.com/extensions/extension.html)用来在 JS 文件和您的背景 HTML 页面之间进行通信。

# forms - 如何结合maven使用spring form taglib？

> ID：13695739
> 
> 赞同：1
> 
> 时间：2012-12-04T03:44:20.573
> 
> 标签：forms, spring, servlets

我将 spring-webmvc 添加到我的 maven 依赖项中。根据某些页面，我发现我需要使用它：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency> 
```

它工作正常，我可以在我的 m2 本地存储库中看到 jar 文件。

但我的问题是我的 JSP 文件中出现错误，提示“在 Java 构建中找不到“form:form”(org.springframework.web.servlet.tags.form.FormTag) 的标记处理程序类小路”。

它显然正在寻找 org.springframework.web.servlet 但我认为添加 spring-webmvc 会修复它，因为提到的是我读过的几个搜索结果。另外，我在我的 spring bean 配置 XML 中使用了“org.springframework.web.servlet.view.UrlBasedViewResolver”，所以我知道它正在加载部分 spring-webmvc。

我查看了 repo1.maven.org 和 mvnrepository.com，但从未见过他们提到 org.springframework.web.servlet。

然后我决定根据springsource页面添加web.servlet（http://ebr.springsource.com/repository/app/bundle/version/detail?name=org.springframework.web.servlet&version=3.1.3.RELEASE）

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.web.servlet</artifactId>
        <version>${org.springframework.version}</version>
    </dependency> 
```

但随后我收到此错误“缺少工件 org.springframework:org.springframework.web.servlet:jar:3.1.3.RELEASE”。

我将 springsource 自己的 repo (http://ebr.springsource.com/repository/app/faq) 添加到我的 pom.xml 中，但我得到了相同的“缺少工件”消息。

我想我被困住了，需要你的帮助。谢谢 ：）

不确定这是否相关，但我包含了 3 个 XML 配置文件。:)

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>Spring3MVC</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
</web-app> 
```

**spring-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="org.flinders.staffdirectory.controllers" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass" >
            <value>org.springframework.web.servlet.view.tiles2.TilesView</value>
        </property>
    </bean>

    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles.xml</value>
            </list>
        </property>
    </bean> 
  </beans> 
```

**pom.xml**

```
<project
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.flinders.staff.directory</groupId>
  <artifactId>directory-maven</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>directory-maven Maven Webapp</name>
  <url>http://maven.apache.org</url>

    <properties>
        <org.springframework.version>3.1.3.RELEASE</org.springframework.version>
    </properties>

    <dependencies>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.antlr</groupId>
            <artifactId>antlr</artifactId>
            <version>3.0</version>
        </dependency>

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>11.2.0.3</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.8</version>
        </dependency>

        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>directory-maven</finalName>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:21:04.720

我通常将此页面指令放在文件的顶部：

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %> 
```

这应该确保表单 taglib 正在 JSP 中加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:16:18.817

好像我忘了将 modelAttribute 传递给我的表单：

```
return new ModelAndView("search/SearchForm", "search", new Search()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T21:18:04.750

我能够通过将 taglib 指令添加为文件的第一行来解决该问题。

# java - 如何从 MultipleSelectListPreference 读取值

> ID：13695742
> 
> 赞同：1
> 
> 时间：2012-12-04T03:44:40.077
> 
> 标签：java, android

我想从中读取`SharedPreferences`通过 MultipleSelectListPreferences 保存的字符串数组条目。

`getStringSet()`似乎是 SharedPreferences 上唯一符合要求的方法。如何使用此方法提取保存的字符串数组 - 我不明白如何从字符串集中获取数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:20:33.340

我提供了一个简单的示例，说明如何将 MutipleSelectListPreference 读入 set，然后将其转换为 String 数组并将其保存为 String。

首先，您将 sharedPreferences 读入 mySet 对象：

```
Set<String> mySet = sharedPreferences.getStringSet('your_preference_key', new Hashset<String>()); 
```

然后你可以定义 String 数组，遍历 mySet 并将每个字符串保存到一个 fromSet 字符串中：

```
String fromSet;
String myArray[] = mySet.toArray(new String[mySet.size()]);
for (int index = 0; index < myArray.length; index++) {
    fromSet += myArray[index] + "\n";
} 
```

# eclipse - Eclipse 中的 Google 登录导致“Cookie 已关闭。请打开”错误

> ID：13695743
> 
> 赞同：0
> 
> 时间：2012-12-04T03:44:42.253
> 
> 标签：eclipse, google-app-engine, cookies, google-plugin-eclipse

我正在 Eclipse (Juno) 中构建 App Engine 应用程序。当我尝试在 Eclipse 中登录 Google 时，我收到消息“您的 cookie 已关闭。打开它”。如何在 Eclipse 中启用 cookie？我的系统默认浏览器支持cookies，谷歌登录没问题。请帮助我，以便我可以将我的应用程序上传到 Google 的服务器。

提前致谢， 萨西克里希纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-06T20:50:23.593

user2292916 说 Eclipse 为 Windows 用户使用 Internet Explorer 的 cookie 设置是正确的，但请注意，您可以通过只允许 Google 存储 cookie 来保留当前的隐私设置。

*   启动 Internet Explorer
*   打开 Internet 选项
*   打开隐私选项卡并选择站点
*   添加“google.com”
*   重启 Eclipse

您现在应该能够部署您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T06:21:31.430

如果您**在 Windows 上运行 Eclipse**，出于某种我不知道的原因，Eclipse 使用**Internet 选项**设置。所以要解决这个问题，

*   转到**控制面板**-> **Internet 选项***   转到**隐私**标签页*   将安全级别设置为尽可能低的级别（**“接受所有 Cookie”**）。

    （注意：donat3llo 在上面提到了相同的解决方案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:56:45.040

您还没有收到答复。但是您可以使用 bat 文件来部署应用程序：

```
appcfg.py --no_cookies --email=john.doe@gmail.com --passin update C:\Eclipse\workspace\yourappid < "C:\john_doe_his_password.txt" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T13:26:38.513

对我来说，在 Internet Explorer 中打开 cookie 很有帮助。

我的默认浏览器是 Chrome，我打开了 cookie，但我无法登录，直到我为 IE 打开它们。

# php - 尝试使用屏幕上的删除按钮查看我的消息时遇到 php 错误

> ID：13695746
> 
> 赞同：1
> 
> 时间：2012-12-04T03:45:21.263
> 
> 标签：php, codeigniter, foreach

而不是我的消息出现在屏幕上，我只看到这个：

遇到 PHP 错误

> 严重性：警告
> 消息：为 foreach() 提供的参数无效

尽管我的视图页面中的 foreach 循环看起来不错：

```
foreach($messages as $message):// this is the line causing the error
      $delete = $message['message_id']; // i've even tried removing this line to no avail
      //var_dump($message); ?>
          <li><?=$message['from']?> says...: "<?=$message['message']?>"(<?=anchor("home/deleteMsg/$delete", 'delete')?>)</li>      
         <?php endforeach?> 
```

这是我的模型：

```
class Messages extends CI_Model
 {

function Messages()
{
parent::__construct();
}

function deleteMsg($message_id) // this message_id is the id field for each message in my database
       {

              $record = array('message_id' => $message_id); 
              $this->db->delete('messages', $record); 
      } 

  function addMessage($message_id, $from, $to, $message)//this fields come after the message_id field in the database
   {
$record = array(

        'to' => $to,
        'from' => $from,
        'message' => $message);
$this->db->insert('messages', $record); 

   }

   function getMessages($user)
   {

$this->db->select('*');
$this->db->from('messages');
$this->db->where('to', $user);
$messagesSet = $this->db->get();

$messages = array ();

foreach ($messagesSet->result() as $row)
{
    $messages[] = array(

             'from'    => $row ->from,
             'message' => $row ->message);

}       
    return $messages;

  }

 } 
```

这是我的控制器：

```
 class Home extends CI_Controller 
 {
  function Home()
 {
  parent::__construct();
  $this->load->model('messages');
  $this->load->model('friends');
  $this->load->model("profiles");

  }

  function drop($member)
  {
   $username = $this->session->userdata('username');
   $this->friends->deleteFriend($username, $member);
   redirect('home');
  }

     function deleteMsg($messageid) {

    $this->messages->deleteMsg($messageid);

    redirect('home');

      }

function index()
{

 $username = $this->session->userdata('username');
 $membername = $this->session->userdata('membername');
 $viewData['membername'] = $membername;
 $viewData['username'] = $username;
 $viewData['following'] = $this->friends->getFollowing($username);
 $viewData['followers'] = $this->friends->getFollowers($username);
 $viewData['messages'] = $this->messages->getMessages($membername);
 $viewData['friends'] = $this->friends->getFriends($username);
 $viewData['messages'] = $this->messages->deleteMsg($membername);

 $this->load->view('shared/header');
 $this->load->view('home/hometitle', $viewData);
 $this->load->view('shared/nav');
 $this->load->view('home/homeview', $viewData);
 $this->load->view('shared/footer');
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:49:57.223

你的`messages`可能是空的

```
<?php
if(!empty($messages)){
foreach($messages as $message):// this is the line causing the error
      $delete = $message['message_id']; // i've even tried removing this line to no avail
      //var_dump($message); ?>
          <li><?=$message['from']?> says...: "<?=$message['message']?>"(<?=anchor("home/deleteMsg/$delete", 'delete')?>)</li>      
         <?php endforeach?> 
<?php }else{ ?>

<?php echo 'Its empty !!!'; }?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:53:39.787

你`$messages`是空的，因为它被这个覆盖了：

```
$viewData['messages'] = $this->messages->deleteMsg($membername); 
```

在索引函数中。

# database - Drupal 7数据库查询：如何写一个字段的首字母不能是a，b，c，...z的条件？

> ID：13695747
> 
> 赞同：0
> 
> 时间：2012-12-04T03:45:36.840
> 
> 标签：database, drupal

我想使用 Drupal 7 的数据库 API 编写一个查询来检索标题不以 a、b、c 或 z 开头的所有记录。

我被困在写条件部分：$query->condition(?)

谢谢你的帮助！

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:55:03.747

找到了一个解决方案并且它有效，但它看起来并不优雅。

```
$query -> where('SUBSTRING(n.title, 1, 1) not in (:letter)', 
          array(':letter' => array('a','b','c','d','e','f','g','h','i','j',
                                   'k','l','m','n','o','p','q','r','s','t',
                                   'u','v','w','x','y','z'))); 
```

# asp.net-web-api - WCF 数据服务与 WebAPI

> ID：13695753
> 
> 赞同：0
> 
> 时间：2012-12-04T03:46:40.690
> 
> 标签：asp.net-web-api, wcf-data-services

我一直在追赶 MVC4 Web API 和 WCF 数据服务。从表面上看，它们似乎都能够在消费客户端中使用 oData。我想知道哪一个更适合关注点分离（将数据服务层与 UI 层分离）。在我当前的解决方案中，我有一个普通的 MVC 3 风格的 Intranet 项目和一个 MVC 数据服务项目。第一个项目具有对第二个项目的服务引用。我的目标是编写一次数据服务，并使其可用于需要访问下划线数据库的所有项目。当我阅读 Web API 时，在我看来，ApiControllers 可以在没有 MVC 数据服务的情况下将符合 oData 的结果返回给消费客户端。我的困惑是如何将这个 Web API MVC 项目公开为服务端点。我应该将它包装在 WCF 中吗？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T11:24:03.277

您只需创建一个控制器，继承`ApiController`并使用属性装饰一个动作`[Queryable]`，Rest 取决于您的路由设置。十分简单。

哪个更好？网络 API。因为它具有 HTTP 的所有优点，并且您不限于 ATOM 格式。

您可以使用[PocoHttp](https://github.com/PocoHttp/PocoHttp)无缝访问来自客户端的数据。

# postgresql - Restorage zodbpack 错误

> ID：13695766
> 
> 赞同：0
> 
> 时间：2012-12-04T03:48:27.363
> 
> 标签：postgresql, plone, zope, relstorage

每当我尝试运行 zobbpack 时，我都会生成错误：

psycopg2.IntegrityError：“zoid”列中的空值违反非空约束

任何想法是什么导致了这个以及如何解决它？

relstorage 1.5.1，postgres 8，plone 4.2.1.1

```
2012-12-03 13:18:03,485 [zodbpack] INFO Opening storage (RelStorageFactory)...
2012-12-03 13:18:03,525 [zodbpack] INFO Packing storage (RelStorageFactory).
2012-12-03 13:18:03,533 [relstorage] INFO pack: beginning pre-pack
2012-12-03 13:18:03,533 [relstorage] INFO pack: analyzing transactions committed Mon Nov 26 12:31:54 2012 or before
2012-12-03 13:18:03,536 [relstorage.adapters.packundo] INFO pre_pack: start with gc enabled
2012-12-03 13:18:03,759 [relstorage.adapters.packundo] INFO analyzing references from objects in 97907 new transaction(s)
2012-12-03 13:18:03,761 [relstorage.adapters.scriptrunner] WARNING script statement failed: '\n        INSERT INTO object_refs_added (tid)\n        VALUES (%(tid)s)\n        '; parameters: {'tid': 0L}
2012-12-03 13:18:03,761 [relstorage.adapters.packundo] ERROR pre_pack: failed
Traceback (most recent call last):
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 486, in pre_pack
    conn, cursor, pack_tid, get_references)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 580, in _pre_pack_with_gc
    self.fill_object_refs(conn, cursor, get_references)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 387, in fill_object_refs
    self._add_refs_for_tid(cursor, tid, get_references)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 459, in _add_refs_for_tid
    self.runner.run_script_stmt(cursor, stmt, {'tid': tid})
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/scriptrunner.py", line 52, in run_script_stmt
    cursor.execute(stmt, generic_params)
IntegrityError: null value in column "zoid" violates not-null constraint

Traceback (most recent call last):
  File "zodbpack.py", line 86, in <module>
    main()
  File "zodbpack.py", line 78, in main
    skip_prepack=options.reuse_prepack)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/storage.py", line 1114, in pack
    adapter.packundo.pre_pack(tid_int, get_references)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 486, in pre_pack
    conn, cursor, pack_tid, get_references)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 580, in _pre_pack_with_gc
    self.fill_object_refs(conn, cursor, get_references)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 387, in fill_object_refs
    self._add_refs_for_tid(cursor, tid, get_references)
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/packundo.py", line 459, in _add_refs_for_tid
    self.runner.run_script_stmt(cursor, stmt, {'tid': tid})
  File "/usr/local/lib64/python2.6/site-packages/RelStorage-1.5.1-py2.6.egg/relstorage/adapters/scriptrunner.py", line 52, in run_script_stmt
    cursor.execute(stmt, generic_params)
psycopg2.IntegrityError: null value in column "zoid" violates not-null constraint 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:15:36.950

在没有启用 GC 的情况下运行 zodbpack.py（感谢 Martijn）可以工作并使数据库从 3.8Gb 压缩到 887Mb。

所以我的 zodbpack-conf.xml 看起来像：

```
<relstorage>
  pack-gc false
  <postgresql>
    dsn dbname='zodb' user='user' host='host' password='password'
  </postgresql>
</relstorage> 
```

我运行它：

```
python zodbpack.py -d 7 zodbpack-conf.xml 
```

注意：打包完成后，您仍然需要对数据库进行清理以取回空间。我从命令行运行它：

```
psql zodb postgresuser
zodb=# SELECT pg_database_size('zodb');
zodb=# vacuum full;
zodb=# SELECT pg_database_size('zodb'); 
```

有趣的是，当我从 ZMI 控制面板运行 pack 命令时，我仍然得到与以前相同的错误：

```
Site Error

An error was encountered while publishing this resource.

Error Type: IntegrityError
Error Value: null value in column "zoid" violates not-null constraint 
```

所以我假设 ZMI 包启用了 GC，并且我的站点数据库中的空值仍然存在问题......

我应该尝试运行一些 SQL 来清除它吗？如果一个对象没有“zoid”值，那么它实际上是不可访问的垃圾吗？这方面的 SQL 示例也很棒:)

# backbone.js - Bootstrap scrollspy 和骨干路由

> ID：13695767
> 
> 赞同：6
> 
> 时间：2012-12-04T03:48:31.017
> 
> 标签：backbone.js, twitter-bootstrap, backbone-routing

当我使用基于 Backbone.js 哈希的路由时，我将如何使用 Bootstrap 的 Scrollspy？

骨干路由器示例，创建页面 www.example.com/#somePage/123

```
var AppRouter = Backbone.Router.extend({
   routes: {
      "": "home",
      "somePage/:id": "somePage"
   },
   somePage: function (id) {
      console.log("do something");
   }
});

$(document).ready(function(){
   window.app = new AppRouter();
   Backbone.history.start();
}); 
```

Twitter scrollSpy 示例应该将 #anchor-value 附加到 URL 的末尾：

```
 <div id="navbar" class="row-fluid">
        <ul class="nav nav-pills navbar">
            <li class="active">
                <a href="#step1">1</a>
            </li>
            <li>
                <a href="#step2">2</a>
            </li>
      </ul>
    </div>
    <div data-spy="scroll" data-target=".navbar">
        <h4 id="step1">Step 1</h4>
        <p>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</p>
        <h4 id="step2">Step 2</h4>
        <p>Veniam marfa mustache skateboard, adipisicing fugiat velit pitchfork beard. Freegan beard aliqua cupidatat mcsweeney's vero. Cupidatat four loko nisi, ea helvetica nulla carles. Tattooed cosby sweater food truck, mcsweeney's quis non freegan vinyl. Lo-fi wes anderson +1 sartorial. Carles non aesthetic exercitation quis gentrify. Brooklyn adipisicing craft beer vice keytar deserunt.</p>
    </div> 
```

这想将 URL 转换为 www.example.com/#somePage/123#step1 之类的东西，但这是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-25T13:54:20.707

这是使用 Bootstrap 演示 Scrollspy 的可能解决方案：[https ://jsfiddle.net/8wvdpddq/](https://jsfiddle.net/8wvdpddq/)

假设您希望在用户滚动时更新 URL 并添加历史记录点，以下代码应该实现它：

```
$('body').on('activate.bs.scrollspy', function () {
  var active = $('nav li:not(.dropdown).active a').attr('href').slice(1);
  window.app.navigate(active, {trigger: true});
  console.log('update url/history to ' + active);
}) 
```

在这种情况下，`trigger`也设置了，这意味着您的路由处理程序将触发，如果您不想要这个，只需删除此选项。

# java - Gridworld 案例研究 (java)：Mac 错误

> ID：13695768
> 
> 赞同：0
> 
> 时间：2012-12-04T03:48:35.737
> 
> 标签：java, macos, gridworld

我在运行 gridworld 时遇到问题。GUI 运行正常，但有以下烦人的错误：

```
Dec  3 19:44:01 MyName-MacBook-Pro.local java[4085] <Error>: CGContextGetCTM: invalid context 0x0
Dec  3 19:44:01 MyName-MacBook-Pro.local java[4085] <Error>: CGContextSetBaseCTM: invalid context 0x0
Dec  3 19:44:01 MyName-MacBook-Pro.local java[4085] <Error>: CGContextGetCTM: invalid context 0x0
Dec  3 19:44:01 MyName-MacBook-Pro.local java[4085] <Error>: CGContextSetBaseCTM: invalid context 0x0 
```

有任何想法吗？

根据 javatester.org，我正在运行“Java 版本：Oracle Corporation 的 1.7.0_09”。

我正在运行 mac os x 10.7.5。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:10:35.623

无害。有一天，每当我打开 Java GUI 时，它们也会开始出现，但它们从未表现出任何明显的问题。

然后有一天，就像他们出现时一样神秘，他们走了。我正在运行 10.8。最近的一些系统或 Java 更新处理了它们。

# android - Android：EditText NextFocusDown 不触发 Spinner

> ID：13695770
> 
> 赞同：9
> 
> 时间：2012-12-04T03:48:36.617
> 
> 标签：android, android-layout, android-edittext, android-spinner

在我的应用程序中，我有一个注册屏幕，有很多 EditTexts 和 Spinners。我想一一浏览注册字段。

所以我申请了`android:imeOptions="actionNext"`。但它忽略了所有的 Spinners。它将只关注 EditText。我也试过了`setNextFocusDownId()`。这也忽略了微调器。

```
 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/reportentry11"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/numbers"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"

            android:imeOptions="actionNext"
            android:inputType="phone" 
            >
           <requestFocus/>
        </EditText>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/reportentry12"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            >

            <TextView
                android:id="@+id/txt_exp"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"

                android:text="EXP:"
                android:textColor="#000000"
                android:textSize="12dp" />

            <Spinner
                android:id="@+id/spin_date"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="3"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:nextFocusDown="@+id/spin_year"
                android:text="date"
                android:textSize="12dp" />

            <Spinner
                android:id="@+id/spin_year"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginRight="5dp"

                  android:nextFocusDown="@+id/cvc"
                android:text="year"
                android:textSize="12dp" />
        </LinearLayout>

        <EditText
            android:id="@+id/cvc"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:hint="@string/reg_label_cvc"
            android:imeOptions="actionNext"
            android:inputType="phone" />

        <EditText
            android:id="@+id/fname"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/reg_label_fname"
            android:imeOptions="actionNext" />

        <EditText
            android:id="@+id/address"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/reg_label_address"
            android:imeOptions="actionNext" />

        <EditText
            android:id="@+id/city"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/reg_label_city"
            android:imeOptions="actionNext"
            android:nextFocusDown="@+id/pr_spin" />

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/reportentry13"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/txt_pr"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="PROV:"
                android:textColor="#000000"
                android:textSize="12dp" />

            <Spinner
                android:id="@+id/pr_spin"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="date"
                android:imeOptions="actionNext"
                android:textSize="14dp" />

            <EditText
                android:id="@+id/pcode"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:hint="@string/reg_label_pcode"
                android:imeOptions="actionDone" />
        </LinearLayout>

        <Button
            android:id="@+id/register_register_button"
            android:layout_width="wrap_content"
            android:background="@drawable/green_button_bg"
            android:onClick="completeClicked"
            android:text="@string/reg_label_complete"
            android:textSize="28dp"
            android:textStyle="bold" />
    </LinearLayout> 
```

请为我提供触发微调器的最佳方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T03:55:28.320

在您的编辑文本上，覆盖 onEditorAction 并给予焦点（或做任何事情，例如打开您的微调器）...

```
yourEditTXT.setOnEditorActionListener(new OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView view, int actionID, KeyEvent event) {
            if (actionID == EditorInfo.IME_ACTION_NEXT) {
                //do your stuff here...
                return true;
            }
            return false; 
    }
}); 
```

编辑 12/4：我看到您昨晚仍在为此苦苦挣扎，如果您没有找到解决方案（也没有发布解决方案）或帮助其他可能阅读此内容的人，这可能有助于从 spinner 获得编辑文本。

```
mySpinner.setOnItemSelectedListener(new MyOnItemSelectedListener());            

public class MyOnItemSelectedListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> parentview, View v, int position, long id) {
            // your spinner proces code 
            // then when you are done, 
            yourEditText.setFocusableInTouchMode(true);  //if this is not already set
            yourEditText.requestFocus();  //to move the cursor
            final InputMethodManager inputMethodManager = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
            inputMethodManager.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT);  // this line and the one above will open the soft keyboard if it doesn't already open
        }

        public void onNothingSelected(AdapterView<?> arg0) { }
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:02:28.900

在您的 xml 文件中执行以下操作：

```
<Spinnner
  android:focusable="true"
  android:focusableInTouchMode="true"
  android:nextFocusDown="@+id/youedittextid"
 /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T13:23:13.367

除了上述专注于 Spinners 的解决方案之外，以下是 ime 选项的更多问题：

如果`spinners`介于 之间`EditTexts`，则位于忽略和属性`EditTexts`之下。在这两种情况下，它们都接受回车键并移至下一行，此时，它不应该允许回车键事件。`spinners``imeOption="actionDone"``lines="1"`

我发现虽然 ime 的侦听器仍然完好无损，但 ime 选项设置为任何（下一个或完成），它更改为 0。

所以我的答案是第二部分，而我仍在努力让微调器变得可聚焦：

xml:

```
 <EditText
                android:id="@+id/et_1"
                android:layout_width="match_parent"
                android:layout_height="@dimen/dp_40"
                android:layout_marginLeft="@dimen/dp_8"
                android:layout_marginStart="@dimen/dp_8"
                android:gravity="start|bottom"
                android:hint="@string/et_1"
                android:imeOptions="actionNext"
                android:inputType="textCapWords" />
<!--This ime option works fine-->
<!--lots of spinners in between these Edit texts-->

                <EditText
                android:id="@+id/et_2"
                android:layout_gravity="start|bottom"
                android:layout_marginLeft="@dimen/dp_8"
                android:layout_marginStart="@dimen/dp_8"
                android:gravity="start|bottom"
                android:hint="@string/et_2"
                android:imeOptions="actionDone" />
<!--this actionDone is ignored and set to 0--> 
```

[actionNext 的值 = 5 而 actionDone 的值 = 0，但对于编辑文本 et2 在侦听器中报告为 0] 设置侦听器：

```
...
        EditText et_1 = view.findViewById(R.id.et_1);
        fet_1.setOnEditorActionListener(this);
        //==
        EditText et_2 = view.findViewById(R.id.et_2);
        et_2.setOnEditorActionListener(this);
... 
```

处理忽略 ime 操作的侦听器：

```
@Override
    public boolean onEditorAction(TextView textView, int actionID, KeyEvent keyEvent) {
        FontEditText et_1 = getView().findViewById(R.id.et_1);
        //==
        EditText et_2 = getView().findViewById(R.id.et_2);
        final int id = textView.getId();
        switch (id) {
            case R.id.et_1: {
                if (actionID == EditorInfo.IME_ACTION_NEXT) {
                    // works actionID = 5.
//inherited method
                    activity.hideKeyboard(textView);
                    fet_bus_entity.clearFocus();
                    et_business_add.requestFocus();
                    et_business_add.performClick();
                    return true;
                }
            }
            break;
            case R.id.et_2: {
//following line doesn't work hence commented, value of actionID = 0 here.
//                if (actionID == EditorInfo.IME_ACTION_DONE) {

                    et_business_add.clearFocus();
//inherited method
                    activity.hideKeyboard(textView);
                    return true;
//                }

            }
//            break;
        }
        return false;
    } 
```

# html - MathJax 格式的文本被推到 DIV 的右侧并溢出边界

> ID：13695776
> 
> 赞同：0
> 
> 时间：2012-12-04T03:49:04.070
> 
> 标签：html, css, wordpress, mathjax

我在我的 WordPress 博客上安装了 MathJax（目前通过插件，但如果我在页眉/页脚中手动安装脚本，结果是相同的）和以下内容

```
\[ \mbox{P+Q=R where:} \]

\[ \frac{s=y_{P}-y_{Q}}{x_{P}-x_{Q}} \]

\[ x_{R}=s^{2}-x_{P}-x_{Q} \mbox{ mod p and } -y_{P}+s(x_{P}-x_{R})\mbox{ mod p} \]

\[ \mbox{Note that s is the slope of the line through P and Q} \]

\[ \mbox{And 2P=R where:} \]

\[ s=\frac{3x_{P}^{2}+a}{2y_{P}}\mbox{ mod p} \]

\[ x_{R}=s^{2}-2x_{P}\mbox{ mod p and }y_{R} = -y_{P}+s(x_{P}-x_{R})\mbox{ mod p} \] 
```

在内容区域的右侧渲染所有内容（并在至少一个地方溢出）。我一辈子都想不通为什么...

![在此处输入图像描述](../Images/271070c17a9eb7dd19e20b553331975e.png)

如果某个具有比我更深入的 CSS 知识的向导可以使用页面源，这里是受影响页面的[链接。](http://codinginmysleep.com/rubber-ducking-elliptic-curve-cryptography/)

**更新：** *注销时一切似乎都正确呈现，因此问题似乎与 WordPress 的顶部栏有关。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:07:37.977

问题是，`MathJax_Display`这些行上的 div 有一个`text-align: center`样式。删除该样式将使文本左对齐。

# html - 如何将选定复选框的列表从视图发送到控制器

> ID：13695781
> 
> 赞同：5
> 
> 时间：2012-12-04T03:49:39.470
> 
> 标签：html, asp.net-mvc

我一直在尝试弄清楚如何使用 ActionLink 使选定复选框的列表起作用。我想我需要用 JavaScript 在客户端做一些事情，但找不到相关的代码。

下面的代码使用提交按钮完美地工作，将选定的 id 作为 id 数组发回，但我需要在带有其他按钮的页面上使用它。

```
// the view 
@foreach (var station in Stations)
{
   <input type="checkbox" name="selected" value="@station.StationId" /> 
}    
<input type="submit" value="Save" />

//Controller stub
public ActionResult Action(string [] selected) 
```

我已经坚持了几个小时，所以也许我看错了。

PS。我在这里阅读和学习了很多小时后的第一篇文章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:12:29.490

SomeButtons 或发布复选框列表值的链接

```
<a href="#" id="someButton">Post</a>
//or buttons, helpers and any elements to trigger ajax post... 
```

**复选框列表：**

```
<div id="MyDiv">
    @foreach (var station in Stations)
    {
        <input type="checkbox" name="selected" value="@station.StationId" /> 
    }  
</div> 
```

**脚本：**

```
$(document).ready(function() {
    $('#someButton').click(function() {
        var list = [];
        $('#MyDiv input:checked').each(function() {
            list.push(this.name);
        });
        // now names contains all of the names of checked checkboxes
        // do something with it for excamle post with ajax
        $.ajax({
            url: '@Url.Action("Action","Contoller")',
            type: 'POST',
            data: { Parameters: list},
            success: function (result) {
                alert("success")!
            },
            error: function (result) {
                alert("error!");
            }
        });   //end ajax
    });
}); 
```

**控制器：**

```
public ActionResult Action(string [] Parameters) 
```

如果我做对了:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T09:58:15.163

看起来你不是在寻找 AJAX 帖子。解决这个问题的最简单方法是将其包装在表单中并调用提交函数。这是您的代码应如下所示：

```
@using(Html.BeginForm("uraction", "urcontroller", FormMethod.Post, new { id = "formId" })) { 
    foreach(var station in Stations) {
        <input type="checkbox" name="selected" value="@station.StationId" /> 
    }
}
<a href="#" id="postBtn">Post</a>
<script>
    $(document).ready(function() {
        $('#postBtn').click(function() {
            $('#formId').submit();
        }
    }
</script> 
```

# android - 如何从您的应用程序发送联系人（使用 NFC）并将其保存在接收设备的联系人列表中？

> ID：13695786
> 
> 赞同：6
> 
> 时间：2012-12-04T03:50:03.307
> 
> 标签：android, nfc, android-contacts, contactscontract, android-beam

您如何使用自己的应用程序（并使用 Android Beam）将联系人发送到另一台设备并将其保存在他们的联系人列表中（即默认联系人应用程序）。发送设备上的联系人将由`ContactsContract`提供商提供。

最好我不想让其他设备运行我的应用程序。内置的联系人应用程序（Android 的默认应用程序）可以[发送和接收联系人](http://youtu.be/cwU4TvQEq0g?t=83s)。因此，应该可以使用自定义应用程序将联系人发送到内置联系人应用程序。

这个[问题的答案](https://stackoverflow.com/questions/13315933/how-to-build-write-a-contact-vcard-format-into-a-ndefmessage)表明这是可能的，并且您可以使用 VCARD 格式。

目前，我的应用程序将通过电话号码搜索联系人，然后将其显示在一个新的活动中（这是内置的联系人应用程序）。见下文。

```
Uri uri = Uri.fromParts("tel", number.getText().toString(), "");
Log.d("ContactPicker", uri.toString());
startActivity(new Intent(ContactsContract.Intents.SHOW_OR_CREATE_CONTACT, uri));

// Example log message for the number (123)-123-1234 is "tel:(123)%20123-1234" 
```

我更喜欢这样做，但不认为这是可能的，因为我无法返回找到的联系人（或者如果没有找到现有联系人则创建的联系人）。如果我想发送那个特定的联系人，我需要这些信息。

我可能需要查询所有联系人，找到我要查找的联系人并保存其 ID。

注意：我使用的是 API 14

* * *

### 编辑

我制作了一个概念验证应用程序：[https ://github.com/dideler/HiFive](https://github.com/dideler/HiFive)

该应用程序可能有问题。它没有维护，但欢迎请求请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:57:44.040

是的，vCard 是要走的路。这是内置联系人/联系人应用程序将采用的格式。这也是应用程序用来存储自己数据的格式，我相信。

# python - 在网格中绘制不同宽度的表面 python

> ID：13695789
> 
> 赞同：0
> 
> 时间：2012-12-04T03:50:30.920
> 
> 标签：python, matplotlib

我正在尝试用 python 绘制一个 3d 表面，事实上我有这个代码：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
from numpy import *

def f(x,y):
    r=x**2 + y**2
    return r

n=4.
b=1.
a=-b
h=(2*b)/n
print h
hx=h ##This line##
fig = plt.figure()
ax = Axes3D(fig)
X = arange(a, b+hx, hx)
Y = arange(a, b+h, h)
n = len(X)
m = len(Y)
Z = zeros([n,m])

for i in arange(n):
    for j in arange(m):
        Z[i,j] = f(X[i],Y[j])
X, Y = meshgrid(X, Y)
ax.plot_surface(Y, X, Z, rstride=1, cstride=1, cmap=cm.jet)
ax.set_xlabel("X Axis")
ax.set_ylabel("Y Axis")
ax.set_zlabel("Z Axis")
plt.show() 
```

这运行正常并显示我正在查看的图表。但是当我将##This line## 更改为 hx=h/2\. 运行它，图表就下地狱了，太可怕了，无法理解。我希望 X 轴上的网格比 Y 轴更近。我怎么能这样做？

当然，这是我正在求解偏微分方程的一个示例，并且我需要在一个轴上比另一个轴更靠近网格以具有数值稳定性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:49:58.197

你翻转了你的维度

```
Z = zeros([m,n])

for i in arange(n):
    for j in arange(m):
        Z[j,i] = f(X[i],Y[j])
X, Y = meshgrid(X, Y) 
```

适用于 的任何`n`比率`m`。

使用您拥有的功能，您可以使用`numpy`广播并将整个部分编写为

```
X, Y = meshgrid(X, Y)
Z = f(X,Y) 
```

这既更容易阅读也更快。

我会将整个代码块重写为：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
from numpy import *

def f(x,y):
    r=x**2 + y**2
    return r

n = 5
m = 10
b = 1.
a = -b

fig = plt.figure()
ax = Axes3D(fig)
X = linspace(a,b,n)
Y = linspace(a,b,m)

X, Y = meshgrid(X, Y)
Z = f(X,Y)

ax.plot_surface(Y, X, Z, rstride=1, cstride=1, cmap=cm.jet)
ax.set_xlabel("X Axis")
ax.set_ylabel("Y Axis")
ax.set_zlabel("Z Axis")
plt.show() 
```

# java - 负载测试异步任务

> ID：13695792
> 
> 赞同：2
> 
> 时间：2012-12-04T03:51:15.563
> 
> 标签：java, android, performance-testing

我对在 Android 的 AsyncTasks 中执行的负载测试代码很感兴趣。超过 50,000 名用户将下载并成为该应用程序，每个应用程序都通过异步任务执行 JSON 轮询。什么是我测试加载数据的获取和 json 解析的好方法？本质上我想执行`doInBackground`模拟多个并发用户的代码。也许 AsyncTask 方面并不那么重要，但我确实需要至少测试 HTTP 获取以及我的解析逻辑。我也许可以将此代码移动到 AsyncTask 之外的可执行 java 块中。

我应该为此使用什么负载测试工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:59:35.370

[JMeter](http://jmeter.apache.org/)是您应该考虑的流行的开源负载测试工具。

# javascript - 带有jquery的d3鼠标参数

> ID：13695803
> 
> 赞同：2
> 
> 时间：2012-12-04T03:52:53.257
> 
> 标签：javascript, jquery, mouse, d3.js

我正在尝试使用 d3 获取 div 的鼠标坐标，并且我的工作代码看起来像

```
var mouse = d3.mouse(document.getElementById('container')); 
```

当我尝试使用 jquery 选择器来做类似的事情时

```
var mouse = d3.mouse($('#container')); 
```

这失败了

我也试过

```
var mouse = d3.mouse(d3.select('#container')); 
```

这也失败了。

有没有更紧凑的方法来使用 jquery/d3 重写我的第一条语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:55:41.267

使用 jQuery 选择器将返回一个 jQuery 对象。您需要使用 [0] 获取基本 DOM 元素：

```
var mouse = d3.mouse($('#container')[0]); 
```

我希望这有帮助！

# php - 如何用 PHP 计算动态 HTML 表单输入数组？

> ID：13695804
> 
> 赞同：2
> 
> 时间：2012-12-04T03:52:54.953
> 
> 标签：php, jquery, arrays, loops, multidimensional-array

我在页面上有一个按钮，当用户按下它时，它会在页面上创建另一个“联系人”字段。联系人字段允许他们将新联系人添加到他们的个人资料中。此外，他们可以根据需要多次单击该按钮，这将创建许多“联系人”字段。

但问题是我很难确定添加了多少“联系人”文件。这是单击按钮时生成的一些 HTML：

```
<div class="item">
    <label for="in-1v">First Name <span>*</span></label>
    <div class="text">
        <input type="text" id="in-1-0" name="member[0][fname]" value="" />
    </div>
</div>
<div class="item">
    <label for="in-2-0">Last Name <span>*</span></label>
    <div class="text">
        <input type="text" id="in-2-0" name="member[0][lname]" value="" />
    </div>
</div> 
```

每次单击按钮时，name="member[0][lname]" 将变为 name="member[ **1** ][lname]"，并且每次单击按钮时都会继续递增。如前所述，用户可以在页面上多次执行此操作。

我正在使用 PHP 循环遍历多维数组：

```
$array = $_POST['member'] ;
foreach($array as $array_element) {
  $fname = $array_element['fname'];
  $lname = $array_element['lname'];
} 
```

如何使用 PHP 来确定添加了多少文件，以便循环浏览它们？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T03:54:54.800

你可以简单地得到这样的计数：

```
$count = count($_POST['member']); 
```

然后，您还可以将循环修改为如下所示：

```
// First check to see if member is set and is a valid array
if (!empty($_POST['member']) && is_array($_POST['member'])) {
    $count = count($_POST['member']);
    for ($i = 0; $i < $count; $i++) {
        $fname = $_POST['member'][$i]['fname'];
        $lname = $_POST['member'][$i]['lname'];
    }
} 
```

# variables - Verilog HDL 否定监视器变量

> ID：13695806
> 
> 赞同：0
> 
> 时间：2012-12-04T03:53:09.600
> 
> 标签：variables, verilog, hdl, negate

从今天开始，我正在自学 Verilog HDL 并试图理解。我试图以位形式显示通过逻辑图示例的变量的相反/否定。

```
module My_Implementation();
reg A,B,C,D;
wire F;

assign F = ((A&&(!B))||((!A)&&B))&&(C||(!D));

initial begin
    $monitor("A=%b A'=%b B=%b B'=%b C'=%b D=%b OUTPUT=%b",A,!A,B,!B,!C,D,F);
    #10     A=0; B=0; C=0; D=0;
    #10     A=1;
    #10     B=1;
    #10     C=1;
    #10     D=1;
    #10     A=0;
    #10     B=0;
    #10     C=0;
    #10     D=0;
    #10     $finish;
end

endmodule 
```

我尝试了许多组合来尝试显示否定变量，但我只得到“X”的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:49:34.433

我复制并粘贴了您的示例，并使用我的模拟器运行它输出：

```
A=x A'=x B=x B'=x C'=x D=x OUTPUT=x
A=0 A'=1 B=0 B'=1 C'=1 D=0 OUTPUT=0
A=1 A'=0 B=0 B'=1 C'=1 D=0 OUTPUT=1
A=1 A'=0 B=1 B'=0 C'=1 D=0 OUTPUT=0
A=1 A'=0 B=1 B'=0 C'=0 D=0 OUTPUT=0
A=1 A'=0 B=1 B'=0 C'=0 D=1 OUTPUT=0
A=0 A'=1 B=1 B'=0 C'=0 D=1 OUTPUT=1
A=0 A'=1 B=0 B'=1 C'=0 D=1 OUTPUT=0
A=0 A'=1 B=0 B'=1 C'=1 D=1 OUTPUT=0
A=0 A'=1 B=0 B'=1 C'=1 D=0 OUTPUT=0 
```

如果我们在报告中添加时间，我们可以看到`x`在声明任何内容之前的时间 0 发生。我预计会这样，一旦定义了所有输入，它就会解决。对于那些不熟悉 Verilog 的人来说，这可能是值得注意的，这`x`意味着一个未知的值。

```
$monitor("%2t : A=%b A'=%b B=%b B'=%b C'=%b D=%b OUTPUT=%b",$realtime, A,!A,B,!B,!C,D,F); 
```

新输出：

```
 0 : A=x A'=x B=x B'=x C'=x D=x OUTPUT=x
10 : A=0 A'=1 B=0 B'=1 C'=1 D=0 OUTPUT=0
20 : A=1 A'=0 B=0 B'=1 C'=1 D=0 OUTPUT=1
30 : A=1 A'=0 B=1 B'=0 C'=1 D=0 OUTPUT=0
40 : A=1 A'=0 B=1 B'=0 C'=0 D=0 OUTPUT=0
50 : A=1 A'=0 B=1 B'=0 C'=0 D=1 OUTPUT=0
60 : A=0 A'=1 B=1 B'=0 C'=0 D=1 OUTPUT=1
70 : A=0 A'=1 B=0 B'=1 C'=0 D=1 OUTPUT=0
80 : A=0 A'=1 B=0 B'=1 C'=1 D=1 OUTPUT=0
90 : A=0 A'=1 B=0 B'=1 C'=1 D=0 OUTPUT=0 
```

# android - 诊断智能手机问题的好工具

> ID：13695808
> 
> 赞同：0
> 
> 时间：2012-12-04T03:54:13.847
> 
> 标签：android, ios, mobile, diagnostics

因此，随着移动操作系统的大量普及，如今在单用户手机上解决问题是一个非常棘手的问题。有谁知道任何好的诊断工具可以收集操作系统级别、已安装的应用程序/版本信息和其他配置设置，然后可以复制、粘贴并通过电子邮件发送回去以进行进一步审查和故障排除？

看起来 Apple 有类似的东西供他们的 Genius Bar 员工使用，但我真的找不到任何不需要 Apple Employee 用户 ID 的明确内容。在开发和解决智能手机上特别棘手的应用程序问题（特别对 iPhone 和 Android 感兴趣，但任何通用的东西也很有用）时，将不胜感激任何其他被证明有用的技巧/工具。

谢谢，

乔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:58:38.897

对于 iPhone，您有[iPhone 配置实用程序](http://support.apple.com/kb/DL1465)。

这是它的描述。

*iPhone 配置实用程序可让您轻松创建、维护、加密和安装配置文件，跟踪和安装配置文件和授权应用程序，并捕获设备信息，包括控制台日志。*

*配置文件是 XML 文件，其中包含设备安全策略、VPN 配置信息、Wi-Fi 设置、APN 设置、Exchange 帐户设置、邮件设置以及允许 iPhone 和 iPod touch 与您的企业系统一起工作的证书。*

这是android论坛[Android配置实用程序和远程控制中的一个问题。](http://code.google.com/p/android/issues/detail?id=30725). 你也可以检查[这个 android](http://androidforums.com/android-lounge/410210-how-configure-100s-androids-automatically.html)和[this](http://udm4.com/S/configuration_utility_android/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:00:32.503

谷歌阿克拉。

还有其他...但 ACRA 完全免费且很棒！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T04:05:50.507

“MonkeyTalk 是一款简单易用的工具，功能强大。为 iOS、Android、Web/HTML5、Hybrid 和 Flex 应用程序自动执行真实的功能交互测试——从简单`smoke tests`到复杂的数据驱动测试套件，应有尽有。” [http://www.gorillalogic.com/monkeytalk](http://www.gorillalogic.com/monkeytalk)

# netbeans-7 - netbeans rcp 在运行时添加到 topcomponent

> ID：13695816
> 
> 赞同：1
> 
> 时间：2012-12-04T03:55:07.293
> 
> 标签：netbeans-7, netbeans-platform

我正在开发一个 netbeans RCP 桌面应用程序，并且需要动态添加组件。例如，我有一个按钮，如果我单击菜单，应该在运行时将组件添加到窗口中。我有一个按钮的动作监听器，我在执行的操作中添加了以下代码，但没有看到添加的新组件。任何帮助表示赞赏。

TopComponent editorTopComponent = WindowManager.getDefault().findTopComponent("componentId");
editorTopComponent.add(new JButton("TEST"));
editorTopComponent.validate();
editorTopComponent.repaint();
编辑器TopComponent.updateUI();

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:39:07.443

如果您想立即创建实例（不止一个），那么您可以使用：

```
MyTopComponent my = new MyTopComponent();
my.open();
my.requestActive(); 
```

如果您想在一个实例中（仅）打开 TC，那么您可以使用：

```
TopComponent editor= WindowManager.getDefault().findTopComponent("componentId");
if(editor!=null){
  JPanel x =editor.getMyPanel();
  x.setVisible(false);
   //some changes
  x.setVisible(true);
  if(!editor.isOpened())editor.open();
} 
```

吉尔卡

# c# - 如何为 IPrincipal 扩展存储额外的属性

> ID：13695825
> 
> 赞同：0
> 
> 时间：2012-12-04T03:55:42.753
> 
> 标签：c#, asp.net-mvc, forms-authentication

我正在尝试扩展`IPrincipal`. 存储额外属性的最佳方式是什么？

1.  将它们序列化为 cookie 并在每个`Application_PostAuthenticateRequest`
2.  将它们存储在会话中
3.  对每个数据库发出请求`Application_PostAuthenticateRequest`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:38:20.493

就我而言，我选择了第一个选项，因为它代表了将信息合并到现有身份验证工作流程中的最简单（也是最有效）的方式。

我认为您的答案实际上取决于您要存储的额外属性的性质。

1.  如果信息经常更改并且您的 cookie 有效期很长，那么将它们存储在 cookie 中可能会出现问题。在这种情况下，您可能希望实现一些使 cookie 过期的逻辑。
2.  使用会话将要求您在会话超时后出现请求时刷新您存储的属性 - 这可能比 cookie 过期更频繁地发生。
3.  根据流量，每个数据库请求`Application_PostAuthenticateRequest`可能证明效率低下，但这样做可以确保您始终拥有最新数据。

# java - Java 中的 /= 运算符是什么？

> ID：13695826
> 
> 赞同：9
> 
> 时间：2012-12-04T03:56:13.860
> 
> 标签：java, assignment-operator

以下代码示例打印`1.5`.

```
float a = 3;
float b = 2;
a /= b;
System.out.println(a); 
```

我不明白`/=`运营商是做什么的。它应该代表什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T03:58:56.837

它是一个组合除法加赋值运算符。

```
a /= b; 
```

表示除以`a`并将`b`结果放入`a`.

加法、减法和乘法也有类似的运算符`+=`：`-=`和`*=`。

`%=`会做模数。

`>>=`并将`<<=`进行位移。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T04:02:13.643

它是 的缩写`x = x / y (x /= y)`。它所做的是将要分配的变量除以它的左侧并将其存储在右侧。您可以随时更改：

`x = x / y`

到

`x /= y`

您可以使用大多数其他运算符（例如`* / +`and ）来执行此操作`-`。不过，我不确定按位运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T03:58:36.170

A/=B 与 A=(A/B) 的含义相同

Java（从 C 复制）有一整套运算符 **X *op* = Y**意味着**X=X *op* Y**，因为*op*是： + - * / % & | ^

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T04:00:34.347

**a/=b;** 意味着将**a**与**b**相除并将结果放入**a**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T04:02:36.923

`X/=Y`它是一样的`X=X/Y`。
您也可以为这些运算符尝试相同的操作`+ - * %`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-28T17:29:18.283

正如这里的大多数人已经说过的那样，`x/=y`它被用作其他运算符的缩写形式， `x=x\y`并且对于其他运算符（例如`+=`, `-=`, `*=`, `%=`. `x++`+ 和 - where和`x--`代表`x=x+1`和`x=x-1`分别还有更多的快捷方式。

没有提到的一件事是，如果在某些函数调用或条件测试中使用它，则使用原始值然后替换，让您在使用该迭代器的调用中执行一个 while 循环的迭代器，或者编写一个 true更简洁地使用余数运算符的 mod 函数：

```
public int mod(int a, int b){
    return ((a%=b)>=0?a:a+b);
} 
```

这是一种更短的写作方式：

```
public int mod(int a, int b){
    a = a % b
    if (a>=0){
        return a;
    }
    return a+b;
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2021-04-07T17:54:31.840

你可以说`a = a / b` **OR（简称）说** `a /= b`

# jquery - 在自动完成列表中隐藏 id 值

> ID：13695827
> 
> 赞同：1
> 
> 时间：2012-12-04T03:56:16.437
> 
> 标签：jquery

我试图制作一个自动完成列表，显示从表格上的数据库中提取的公司名称。这一切都很好，除了我可以通过表单传递数据的唯一方法是显示它的索引号。如何隐藏号码，只显示公司名称。

我对此很陌生，所以提前道歉。

**HTML 输入，**

```
<td width="20%"><h2>Supplied By</h2></td>
<td width="30%">
<input type="text" class="autosuggest" name="supplierID"  id="supplierID"> 
<div class="dropdown">
<ul class="result" value="supplierID"></ul>
</div>
script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="js/primary.js"></script>
</td> 
```

**js/primary.js**

```
$(document).ready(function() { 
    $('.autosuggest').keyup(function(){
        var search_term = $(this).attr('value');
        $.post('../ajax/position.php', {search_term:search_term},      function(data) {
            $('.result').html(data);
            $('.result li').click(function() {
                var result_value = $(this).text();
                $('.autosuggest').attr('value', result_value);
                $('.result').html('');
            });
        });
    });
}); 
```

***../ajax/position.php***

```
<?php
   require_once '../scripts/connect_to_mysql.php';
if (isset($_POST['search_term']) == true && empty($_POST['search_term']) == false) 
{
    $search_term = mysql_real_escape_string ($_POST['search_term']);
    $query = mysql_query("SELECT `Company` , `CompanyID` FROM `company`
    WHERE `Company`
    LIKE '$search_term%'");
    while (($row = mysql_fetch_assoc($query)) !==false) 
    {
        echo '<li>',$row['CompanyID'].$row['Company'],'</li>';
    }
}   
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:05:57.677

例如，您必须将此公司 ID 作为“li”的 ID。

```
<?php
   require_once '../scripts/connect_to_mysql.php';
if (isset($_POST['search_term']) == true && empty($_POST['search_term']) == false) 
{
    $search_term = mysql_real_escape_string ($_POST['search_term']);
    $query = mysql_query("SELECT `Company` , `CompanyID` FROM `company`
    WHERE `Company`
    LIKE '$search_term%'");
    while (($row = mysql_fetch_assoc($query)) !==false) 
    {
        echo '<li id='$row["CompanyID"]'>'.$row['Company'].'</li>';
    }
}   
    ?> 
```

并在您想传递给服务器时使用“li”id

# frameworks - 哪个响应式 Web 设计框架通过 w3c 验证器进行了验证？

> ID：13695830
> 
> 赞同：0
> 
> 时间：2012-12-04T03:56:54.373
> 
> 标签：frameworks, responsive-design, w3c-validation

我正在搜索有关使用 w3c 验证器 HTML5+CSS3 验证的响应式网页设计框架的任何关键字，但我发现的所有框架都没有经过验证。

有没有这样的响应式网页设计框架？

**更新**：这些是我发现的：

*   [http://www.gumbyframework.com/](http://www.gumbyframework.com/)
*   [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)
*   [http://foundation.zurb.com/](http://foundation.zurb.com/)
*   ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:10:29.397

[W3C](http://www.w3.org/)定义：

> ...由成员组织组成，这些组织拥有全职员工，目的是共同制定万维网标准...

它不验证框架，框架是在这个标准之上制作的。

我可以推荐的良好响应式设计框架：[bootstrap](http://twitter.github.com/bootstrap/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T15:09:25.847

这取决于您所说的“框架”一词的含义。这对不同的人可能意味着不同的事情。

至于我，我使用 Gantry 框架使用 Joomla 开发网站并取得了相当不错的成功，尽管由于某些 3rd 方插件，并非我所有的客户网站都能 100% 验证。

但是，重点不应该放在获得 100% 的验证结果上，虽然这很好，但要创建一个功能强大且有效的网站！我在每个网站上进行验证（尽管不是每个页面）。我用它来发现和纠正“潜在”问题。

验证更多的是帮助纠正“潜在”问题的指南，因为某些验证错误可能会导致网页无法在所有浏览器中正确显示。但是，我发现许多验证错误不会妨碍网页在不同浏览器中正常显示的能力。

# java - 解释导致 HashMap.put() 执行无限循环的时机

> ID：13695832
> 
> 赞同：26
> 
> 时间：2012-12-04T03:57:04.920
> 
> 标签：java, concurrency, thread-safety, hashmap

正如许多人指出并遇到的那样，在`HashMap.put`同时使用时可能会进入无限执行循环（请参阅[GRIZZLY-1207](https://github.com/javaee/grizzly/issues/1207)、[JGRP-525](https://issues.jboss.org/browse/JGRP-525?_sscc=t)、可能是[HHH-6414](https://hibernate.onjira.com/browse/HHH-6414)和这个 SO[答案](https://stackoverflow.com/a/1003237/277307)）。

`HashMap`被明确记录为不是线程安全的。显然，正确的解决方法是使用线程安全的实现`Map`，`ConncurrentHashMap`尤其是。我对导致无限循环的并发时序更好奇。我最近在使用 Java 7 JRE 时遇到了这个循环，并想了解确切的原因。例如，这是由多个 put 同时引起的吗？

查看[HashMap.put](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java#HashMap.put%28java.lang.Object%2Cjava.lang.Object%29)内部显示`HashMap.Entry`包含到下一个节点的链接（在存储桶中？）。我假设这些链接正在损坏以包含循环引用，这导致了无限循环。但是，我仍然不明白这种腐败是如何发生的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-04T04:28:02.543

与许多人的想法相反，`multi-threading`and的主要问题`HashMaps`不仅仅是重复条目或消失的条目......正如您所说，当两个或多个`Threads`同时决定调整`HashMap`.

如果 HashMap 的大小超过了给定的阈值，那么多个线程可能最终会同时尝试调整它的大小，如果我们足够幸运（您已经在生产环境中部署了代码），它们将永远继续运行......

`void resize(int newCapacity);`问题是和实现的方式造成的`void transfer(Entry[] newTable);`，大家可以自己看下[openjdk源码](http://www.docjar.com/html/api/java/util/HashMap.java.html)。运气不好，时机很好，条目被颠倒（在这个数据结构中不需要排序），最终导致在线程继续运行时错误地相互引用`while(e != null)`......

虽然我可以自己尝试给你一个解释，但我想[感谢 Paul Tyma](http://www.blogger.com/profile/11412172362500455307)的帖子（无论如何我都不能比他做得更好），在那里我第一次决定弄清楚我为什么不这样做时就知道了这是如何工作的几个月前找了一份工作...

[http://mailinator.blogspot.com/2009/06/beautiful-race-condition.html](http://mailinator.blogspot.com/2009/06/beautiful-race-condition.html)

正如保罗所说，描述这场比赛的最佳词是条件是：`beautiful`

# php - 为什么我的 Google OAuth URL 会在我返回的 URL 中放置一个哈希？

> ID：13695834
> 
> 赞同：2
> 
> 时间：2012-12-04T03:57:27.947
> 
> 标签：php, google-app-engine

**给定的网址：**

> [https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth% 2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&state=drive&redirect_uri=http%3A%2F%2Fwww.woktop.com%2Fnewservice.php&response_type=token&client_id=889314330670.apps.googleusercontent.com](https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&state=drive&redirect_uri=http%3A%2F%2Fwww.woktop.com%2Fnewservice.php&response_type=token&client_id=889314330670.apps.googleusercontent.com)

**返回网址：**

> [http://www.woktop.com/newservice.php#state=drive&access_token=ya29.AHES6ZRtTRmpakw5qa0SejLsC0qzNNb9R6GYF0xZGt_uphe3WfeeZng&token_type=Bearer&expires_in=3600](http://www.woktop.com/newservice.php#state=drive&access_token=ya29.AHES6ZRtTRmpakw5qa0SejLsC0qzNNb9R6GYF0xZGt_uphe3WfeeZng&token_type=Bearer&expires_in=3600)

`#`如果将更改为 a `?`（以启动查询字符串），则返回 URL 完全有效。为什么 Google 会返回 a`#`并因此*“杀死查询字符串”*？

**单独说明：**

在单独的说明中，我不太清楚我应该请求`token`还是`code`作为响应类型。我计划让用户将他们的 Google Drive 帐户附加到我网站上的帐户。我已多次阅读文档，但无法确定哪一个更适合我的网站？现在（在上面的示例中）我使用令牌。另外，根据我选择哪一个，我应该在数据库中存储什么以备将来使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:28:36.863

原因是因为我请求的是 a`token`而不是`code`. 当我收到代码时，URL 的格式没有散列 ( `#`)，而是格式化为查询字符串。我不清楚其原因，但文档指出`token`仅应将其用作重型 Javascript 应用程序的响应类型。我正在编写的 API 代码是用 PHP 编写的，因此`code`显然是合适的选择。

# php - 将 IP 转换为八进制的优雅方法

> ID：13695843
> 
> 赞同：1
> 
> 时间：2012-12-04T03:58:38.283
> 
> 标签：php

我一直在寻找一种优雅的方式在 php 中将 IP 地址转换为其八进制表示，而不必分别处理四个数字中的每一个。

例如，IP: 1.2.3.4 将是 0001.0002.0003.0004

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:21:18.877

```
$str_ip = '255.2.3.4';
echo vsprintf("%04o.%04o.%04o.%04o", sscanf($str_ip, "%d.%d.%d.%d"));
//0377.0002.0003.0004 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:18:00.560

我不认为你可以避免循环，尽管你可以使用 array_walk 来避免输入 for。您可能还想将 $value 转换为字符串并用零填充它。

```
$ip = '123.12.23.34';
$ip_a = explode('.', $ip);
array_walk($ip_a, function(&$value, $key){ $value = decoct($value); });
echo implode('.',$ip_a); 
```

# c# - 显示以前的值

> ID：13695847
> 
> 赞同：0
> 
> 时间：2012-12-04T03:58:46.010
> 
> 标签：c#, arrays, loops

```
public partial class mainForm : Form
{
    public mainForm()
    {
        InitializeComponent();
    }
    private void btnCalculate_Click(object sender, EventArgs e)
    {
        string customerType = txtCustomerType.Text;
        decimal subtotal = Convert.ToDecimal(txtSubtotal.Text);
        decimal discountPercent = .0m;

        switch (customerType)
        {
            case "R":
                if (subtotal < 100)
                    discountPercent = .0m;
                else if (subtotal >= 100 && subtotal < 250)
                    discountPercent = .1m;
                else if (subtotal >= 250 && subtotal < 500)
                    discountPercent = .25m;
                else if (subtotal >= 500)
                    discountPercent = .30m;
                break;
            case "C":
                discountPercent = .2m;
                break;
            case "T":
                if (subtotal < 500)
                    discountPercent = .4m;
                else if (subtotal >= 500)
                    discountPercent = .5m;
                break;
            default:
                discountPercent = .1m;
                break;
        }

            decimal discountAmount = subtotal * discountPercent;
            decimal invoiceTotal = subtotal - discountAmount;

            txtDiscountPercent.Text = discountPercent.ToString("p1");
            txtDiscountAmount.Text = discountAmount.ToString("c");
            txtTotal.Text = invoiceTotal.ToString("c");

            txtCustomerType.Focus();            
        }

    private void btnExit_Click(object sender, EventArgs e)
    {

        int i = 0;
        string summaryString = txtTotal.Text;
        for (i = 0; i < 5; i++)
            summaryString += Environment.NewLine;

        MessageBox.Show(summaryString, "Order Totals");

        this.Close();
    }
} 
```

一旦用户点击计算按钮，它将计算发票总额。我需要做的就是存储前 5 个总值，并让它们在新行上一个接一个地显示在消息框中。一旦用户单击退出按钮，此消息框应显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:15:26.567

这样的事情可能会为您指明正确的方向：

```
public partial class mainForm : Form
{
    public mainForm()
    {
        InitializeComponent();
    }

    private List<string> _totals = new List<string>();

    private void btnCalculate_Click(object sender, EventArgs e)
    {
            string customerType = txtCustomerType.Text;
            decimal subtotal = Convert.ToDecimal(txtSubtotal.Text);
            decimal discountPercent = .0m;

            switch (customerType)
            {
                case "R":
                    if (subtotal < 100)
                        discountPercent = .0m;
                    else if (subtotal >= 100 && subtotal < 250)
                        discountPercent = .1m;
                    else if (subtotal >= 250 && subtotal < 500)
                        discountPercent = .25m;
                    else if (subtotal >= 500)
                        discountPercent = .30m;
                    break;
                case "C":
                    discountPercent = .2m;
                    break;
                case "T":
                    if (subtotal < 500)
                        discountPercent = .4m;
                    else if (subtotal >= 500)
                        discountPercent = .5m;
                    break;
                default:
                    discountPercent = .1m;
                    break;
            }

            decimal discountAmount = subtotal * discountPercent;
            decimal invoiceTotal = subtotal - discountAmount;

            txtDiscountPercent.Text = discountPercent.ToString("p1");
            txtDiscountAmount.Text = discountAmount.ToString("c");
            txtTotal.Text = invoiceTotal.ToString("c");
            _totals.Add(txtTotal.Text);

            txtCustomerType.Focus();
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            MessageBox.Show(string.Join(Environment.NewLine, _totals.ToArray()), "Order Totals");
            this.Close();
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:31:21.610

尝试这个。这只会给你最后五个总数：

```
public partial class mainForm : Form
{
public mainForm()
{
    InitializeComponent();
}

private List<string> allTotals = new List<string>();

private void btnCalculate_Click(object sender, EventArgs e)
{
        string customerType = txtCustomerType.Text;
        decimal subtotal = Convert.ToDecimal(txtSubtotal.Text);
        decimal discountPercent = .0m;

        switch (customerType)
        {
            case "R":
                if (subtotal < 100)
                    discountPercent = .0m;
                else if (subtotal >= 100 && subtotal < 250)
                    discountPercent = .1m;
                else if (subtotal >= 250 && subtotal < 500)
                    discountPercent = .25m;
                else if (subtotal >= 500)
                    discountPercent = .30m;
                break;
            case "C":
                discountPercent = .2m;
                break;
            case "T":
                if (subtotal < 500)
                    discountPercent = .4m;
                else if (subtotal >= 500)
                    discountPercent = .5m;
                break;
            default:
                discountPercent = .1m;
                break;
        }

        decimal discountAmount = subtotal * discountPercent;
        decimal invoiceTotal = subtotal - discountAmount;

        txtDiscountPercent.Text = discountPercent.ToString("p1");
        txtDiscountAmount.Text = discountAmount.ToString("c");
        txtTotal.Text = invoiceTotal.ToString("c");
        allTotals.Add(txtTotal.Text);

    if (allTotals.Count > 5) allTotals.RemoveAt(0);

        txtCustomerType.Focus();
    }

    private void btnExit_Click(object sender, EventArgs e)
    {
        MessageBox.Show(string.Join(Environment.NewLine, allTotals.ToArray()), "Order Totals");
        this.Close();
    }

} 
```

# c - 如何在c中连接到一个bit torrent tracker

> ID：13695848
> 
> 赞同：2
> 
> 时间：2012-12-04T03:58:47.637
> 
> 标签：c, tcp, udp, bittorrent, tracker

我想连接到一个有点洪流的跟踪器，[http](http://tracker.thepiratebay.org) ://tracker.thepiratebay.org 。gethostbyname() 一直返回 null，我应该如何解决这个问题？你还发现这段代码还有什么问题吗？

```
 int sock;
    struct sockaddr_in servAddr; 
    int portNum = 80;

    if ((sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0){
          printf("fail create socket");
          return 0;
    }

    char *path = "http://tracker.thepiratebay.org/";
    struct hostent *hp = gethostbyname(path);   
    if(hp==NULL){
        printf("null");
    else{

        memset(&servAddr, 0, sizeof(servAddr));   
        servAddr.sin_family = AF_INET;                 
        memcpy( (char *) &servAddr.sin_addr.s_addr, (char *)  hp->h_addr, hp->h_length );
        servAddr.sin_port   = htons(portNum);    
    }

    //send request to tracker server 
    if (send(sock, requestToSend, strlen(requestToSend), 0) != strlen(requestToSend)){
        printf("fail send");
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T04:01:24.440

这里的问题是这`http://tracker.thepiratebay.org/`是一个 URL，但`gethostbyname()`只需要主机名。主机名是`tracker.thepiratebay.org`。

[如果您只使用libcurl](http://curl.haxx.se/libcurl/)会更容易，它将为您处理所有 HTTP 内容。在连接到 HTTP 服务器的应用程序中使用 libcurl 是非常常见的；这是一个很棒的图书馆。它肯定比套接字编程更容易。

## 采用`getaddrinfo()`

现代的替代方案`gethostbyname()`是`getaddrinfo()`. 这并不是`gethostbyname()`没有做你想做的事，而是`getaddrinfo()`在所有可以想象的方式上都做得更好。

```
struct addrinfo hint, *ap;
memset(&hint, 0, sizeof(hint));
hint.ai_family = AF_UNSPEC;
hint.ai_socktype = SOCK_STREAM;
int r = getaddrinfo("tracker.thepiratebay.org", "http", &hint, &ap); 
```

这不仅会为您提供所需主机的地址，还会填写端口号。你可以`"http"`作为端口使用，也可以作为端口使用`"80"`，它们是一样的（只要`/etc/services`有正确的入口）。

## 其他问题

这条线是错误的。

```
memcpy( (char *) &servAddr.sin_addr.s_addr, (char *)  hp->h_addr, hp->h_length ); 
```

你不知道它`gethostbyname()`返回了一个 IPv4 地址，尝试将它复制到一个`struct sockaddr_in`. 如果`gethostbyname()`返回一个 IPv6 地址，你刚刚破坏了你的堆栈，你的程序将会崩溃——或者更糟糕的是，它可能不会崩溃。

检查它是否返回 IPv4 地址，或者简单地复制`hp->h_addr`到`struct sockaddr`从`malloc(hp->h_length)`. 这有点难看，但它就是这样。

最后，将论点转换为 是错误的`memcpy()`。这不是错误，但它是错误的。不要这样做，否则可能会导致合法的编译器错误被抑制，例如，如果您不小心将to 强制`int`转换为`char *`.

# mongodb - MongoDB Java驱动程序：没有这样的cmd：聚合

> ID：13695851
> 
> 赞同：1
> 
> 时间：2012-12-04T03:59:01.617
> 
> 标签：mongodb, mongodb-query, mongodb-java

我在我的代码中调用 MongoDB 聚合函数：

```
AggregationOutput output = collection.aggregate( matchUserID, unwindF, matchFUsers,projection); 
```

我已经在本地主机中测试了我的代码，它运行良好。当我在另一个数据库（版本 2.2.1）中使用相同的数据库时，会出现以下错误：

```
com.mongodb.CommandResult$CommandFailure: command failed [aggregate]: { "serverUsed" : "<server address>" , "errmsg" : "no such cmd: aggregate" , "bad cmd" : { "aggregate" : .... } 
```

任何线索为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T04:08:52.063

根据我对类似问题看到的其他答案，服务器似乎很可能实际上不是您认为的 2.2.1。

你如何检查服务器的版本号？

从外壳，试试这个：

```
use admin
db.runCommand( {buildInfo: 1} ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:51:37.067

找出了错误。我在 MongoDB Java 驱动程序上使用 2.9 版本。当我将它升级到 2.10 时，它运行良好。谢谢各位:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T09:08:56.090

我有同样的错误“没有这样的 cmd：聚合”，我从默认的 debian 存储库尝试了新版本的 mongodb 2.4、2.6，并且总是收到这个错误。

之后从 mongo repo 安装 mongodb-org-server 并且它工作 [http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/)

# java - 两个条件对象分配给锁定对象时的死锁

> ID：13695854
> 
> 赞同：0
> 
> 时间：2012-12-04T03:59:37.520
> 
> 标签：java, multithreading, locking, deadlock, conditional-statements

出于某种原因，当我将两个条件对象都分配给我的锁定对象时，我的程序会死锁。当我注释掉其中一个条件对象时，它不会死锁。在将多个条件对象分配给单个锁定对象时，我是否遗漏了什么？下面是我的全部代码，以防您希望完整地查看它。非常感谢您提前提供的所有帮助和时间！

关注我的 BankAccount 类，它包含作为实例字段的锁和条件对象：

```
 import java.util.concurrent.locks.Condition;
            import java.util.concurrent.locks.Lock;
            import java.util.concurrent.locks.ReentrantLock;

            public class BankAccount
            {
                public static final double MAX_BALANCE = 100000;

                private double balance;
                private Lock balanceChangeLock;
                private Condition sufficientFundsCondition; // signals that funds > 0 to allow withdrawal
                private Condition lessThanMaxBalanceCondition; // signals that balance < 100000 to allow more deposits

                /**
                 * Constructs a bank account with a zero balance
                 */
                public BankAccount()
                {
                    balance = 0;
                    balanceChangeLock = new ReentrantLock();
                    sufficientFundsCondition = balanceChangeLock.newCondition();
                    lessThanMaxBalanceCondition = balanceChangeLock.newCondition();
                }

                /**
                 * deposits money into the bank account
                 * @param amount the amount to deposit
                 * @throws InterruptedException
                 */
                public void deposit(double amount) throws InterruptedException
                {
                    balanceChangeLock.lock();
                    try
                    {
                        while(balance + amount > MAX_BALANCE)
                            lessThanMaxBalanceCondition.await();
                        System.out.print("Depositing " + amount);
                        double newBalance = balance + amount;
                        System.out.println(", new balance is " + newBalance);
                        balance = newBalance;
                        sufficientFundsCondition.signalAll();
                    }
                    finally
                    {
                        balanceChangeLock.unlock();
                    }
                }

                /**
                 * withdraws money from the bank account
                 * @param amount the amount to withdraw
                 * @throws InterruptedException
                 */
                public void withdraw(double amount) throws InterruptedException
                {
                    balanceChangeLock.lock();
                    try
                    {
                        while (balance < amount)
                            sufficientFundsCondition.await();
                        System.out.print("Withdrawing " + amount);
                        double newBalance = balance - amount;
                        System.out.println(", new balance is " + newBalance);
                        balance = newBalance;
                        lessThanMaxBalanceCondition.signalAll();
                    }
                    finally
                    {
                        balanceChangeLock.unlock();
                    }
                }

                /**
                 * gets the current balance of the bank account
                 * @return the current balance
                 */
                public double getBalance()
                {
                    return balance;
                }
            } 
```

我的可运行对象：

```
 /**
             * a deposit runnable makes periodic deposits to a bank account
             */
            public class DepositRunnable implements Runnable
            {
                private static final int DELAY = 1;

                private BankAccount account;
                private double amount;
                private int count;

                /**
                 * constructs a deposit runnable
                 * @param anAccount the account into which to deposit money
                 * @param anAmount the amount to deposit in each repetition
                 * @param aCount the number of repetitions
                 */
                public DepositRunnable(BankAccount anAccount, double anAmount, int aCount)
                {
                    account = anAccount;
                    amount = anAmount;
                    count = aCount;
                }

                public void run()
                {
                    try
                    {
                        for (int i = 0; i <= count; i++)
                        {
                            account.deposit(amount);
                            Thread.sleep(DELAY);
                        }
                    }
                    catch (InterruptedException exception)
                    {
                    }
                }
            } 
```

..

```
 /**
             * a withdraw runnable makes periodic withdrawals from a bank account
             */
            public class WithdrawRunnable implements Runnable
            {
                private static final int DELAY = 1;

                private BankAccount account;
                private double amount;
                private int count;

                /**
                 * constructs a withdraw runnable
                 * @param anAccount the account from which to withdraw money
                 * @param anAmount the amount to deposit  in each repetition
                 * @param aCount the number of repetitions
                 */
                public WithdrawRunnable(BankAccount anAccount, double anAmount, int aCount)
                {
                    account = anAccount;
                    amount = anAmount;
                    count = aCount;
                }

                public void run()
                {
                    try
                    {
                        for (int i = 0; i <= count; i++)
                        {
                            account.withdraw(amount);
                            Thread.sleep(DELAY);
                        }
                    }
                    catch (InterruptedException exception)
                    {
                    }
                }
            } 
```

还有我构造 Thread 对象的主要方法类等：

```
 /**
             * this program runs threads that deposit and withdraw money from the same bank account
             */
            public class BankAccountThreadRunner
            {
                public static void main(String[] args)
                {
                    BankAccount account = new BankAccount();

                    final double AMOUNT = 10000;
                    final int REPETITIONS = 10;
                    final int DEPOSIT_THREADS = 10;
                    final int WITHDRAW_THREADS = 2;

                    for (int i = 0; i < DEPOSIT_THREADS; i++)
                    {
                        DepositRunnable deposits = 
                                new DepositRunnable(account, AMOUNT, REPETITIONS);
                        Thread depositThread = new Thread(deposits);
                        depositThread.run();
                    }

                    for (int i = 0; i < WITHDRAW_THREADS; i++)
                    {
                        WithdrawRunnable withdrawals = 
                                new WithdrawRunnable(account, AMOUNT, REPETITIONS);
                        Thread withdrawThread = new Thread(withdrawals);
                        withdrawThread.run();
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T04:04:06.740

您只使用一个线程。您的代码绝不会启动或创建任何其他线程。你创建`Runnable`了对象，但你永远不会启动任何线程，而是`run`从主线程调用它们的方法！

你永远不应该调用一个`Runnable`对象的`run()`方法（除非你真的想在调用线程中运行代码）。有关更多信息，请参阅[本教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:03:59.660

只有当有*两个*资源可以被“锁定”以进行独占访问时才会发生死锁（我将它们称为“锁”，尽管它们可能是任何这样的资源），使用模式如下：

*   然后进程`A`打算获得锁`X``Y`
*   然后进程`B`打算获得锁`Y``X`

如果 process`A`获得 lock`X`并且 process`B`获得 lock `Y`，您将遇到死锁。

这个版本是你（必须）在这里进行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T04:26:09.350

事实是，只要您允许一个线程一次锁定多个资源并且不采取任何预防措施（实际上正在发生多线程），死锁是可能的（并且几乎肯定最终会发生）。

处理死锁基本上有两种选择：

1.  检测死锁并“打破”它们。
2.  使用必须按给定顺序获取锁的“优先级”方案。

检测死锁可以在简单的情况下使用死锁跟踪机制来完成，其中，当线程等待锁时，它会检查它正在等待的线程持有的锁，以查看是否有任何（直接或间接）导致返回当前线程。

死锁也可以通过超时机制来检测，尽管这种方案通常无法区分死锁和长时间运行的操作。

在任何一种情况下，当检测到死锁时，一个或多个线程被迫放弃部分或全部锁（这可能需要某种“回滚”机制来进行部分更改）。

最简单的“优先级”方案是一次只允许持有一个锁。稍微复杂一点的是需要一次获取所有锁。真正的优先级方案将不同的可锁定资源分配给不同的类别，然后按“优先级顺序”对类别进行“排序”，这样如果您已经持有类别 N 或类别中的任何锁，则无法获取类别 N 上的任何锁 > N。

但是，不幸的是，任何方案（可能除了基本的超时方案）都可以被与消息通信并等待来自其他线程的消息的线程撤消。如果您考虑一下，这在概念上与等待获得另一个线程拥有的锁相同。

# php - drupal 7：当子菜单处于活动状态时如何激活父菜单？

> ID：13695855
> 
> 赞同：0
> 
> 时间：2012-12-04T03:59:41.670
> 
> 标签：php, drupal, drupal-7, drupal-modules

问：drupal 7：当子菜单处于活动状态时，如何激活父菜单？

状态：我正在使用漂亮的菜单模块。我想在子菜单处于活动状态时激活父菜单。我没有更改任何原始代码。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:40:43.533

您可能想看看美味菜单的替代品[Superfish](http://drupal.org/project/superfish)。当 Superfish 有一个活跃的孩子时，它会为菜单父级提供 active-trail 类。

# .net - 股票.Net 安装可以打开 Access 数据库吗？

> ID：13695858
> 
> 赞同：0
> 
> 时间：2012-12-04T04:00:10.910
> 
> 标签：.net, ms-access

我想知道这里提到的驱动程序是否会在运行 .Net 2.0 或更高版本的 PC 上：

[http://www.homeandlearn.co.uk/csharp/csharp_s12p4.html](http://www.homeandlearn.co.uk/csharp/csharp_s12p4.html)

我可以部署一个以这种方式访问​​访问数据库的应用程序吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:02:58.037

是的。添加对 System.DataOleDb 的引用。它在`Add References`对话框中，在`.NET Framework`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:07:38.300

我目前正在开发一个以这种方式将报告写入 .mdb 数据库的程序。一切正常。

小贡献：如果数据库有密码，在连接字符串中添加“Jet OLEDB:Database Password=mypasswordhere”

# javascript - jQuery .ajax PUT 请求不尊重自定义标头

> ID：13695860
> 
> 赞同：2
> 
> 时间：2012-12-04T04:00:19.050
> 
> 标签：javascript, jquery, http-headers

将 PUT 类型与 .ajax 一起使用时，我丢失了自定义标头。但是，标头可以使用 GET，但会被 PUT 破坏。请看证据1：

// 好得到：

```
$.ajax({
    url: url,
    type: 'GET',
    dataType: 'json',
    headers: {
        Accept: "application/json"
    }
});

// Actual header sent (using fiddler):
Accept: application/json 
```

// 错误放置：

```
$.ajax({
    url: url,
    type: 'PUT',
    dataType: 'json',
    headers: {
        Accept: "application/json"
    }
});

// Actual header sent (using fiddler):
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

如您所见，唯一的区别是类型的值导致标头的 Accept 部分的值被丢弃。jquery-1.8.2.js。有什么想法吗？谢谢

刺伤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:04:59.203

似乎与浏览器相关：

[http://jsfiddle.net/oceog/WqXzA/](http://jsfiddle.net/oceog/WqXzA/)

```
Request URL:http://fiddle.jshell.net/_display/
Request Method:PUT
Status Code:200 OK
Request Headersview source
Accept:application/json 
```

铬 25.0

# ios - applicationDidReceiveMemoryWarning期间的ios核心数据持久化

> ID：13695864
> 
> 赞同：1
> 
> 时间：2012-12-04T04:00:57.577
> 
> 标签：ios, core-data, persistence, didreceivememorywarning

我在应用程序委托中的 applicationDidReceiveMemoryWarning 方法中添加了 managedObjectContext 保存。当我现在收到内存警告时，该应用程序似乎在某些设备上崩溃。

似乎保存将应用程序推到了内存限制之上，因为它已经很低了。

我在该方法中进行此保存的原因是捕获在正常应用程序操作期间可能未保存的任何内容。

有人可以告诉我这是否是不好的做法吗？

谢谢。

# javascript - Java Script：获取元素ID的等效字符串

> ID：13695868
> 
> 赞同：-3
> 
> 时间：2012-12-04T04:01:32.020
> 
> 标签：javascript, html, spring-mvc

我的命名约定

```
id=xxxxx //actual field shown in the screen
id=xxxxxHDN // hidden field containing the enable/disabled status of the component from the set from the controller. 
```

现在我要做的是让 xxxxxHDN 的状态为 true/false ，并相应地将组件状态设置为 disabled /enabled .with java script..

```
var div = document.getElementById("hiddenFields"); // i hava some 30 hidden fields       containing the 
var j;
    for (j=0;j<div.childNodes.length;j++)
if(div.childNodes[j].value){
    alert("inside the loop");
    var someElementHDN = div.childNodes[j].id;     // my aim is to get the ID=xxxxxHDN
    var someElementHDNToString = someElementHDN .toString(); // my aim is to get the string value "xxxxxHDN"
    var toRemove = 'HDN'; // the part i wanna remove from 'someElementHDNToString' to make it an id for 'xxxxx'
    var equivalantComponentIDAsString = someElementToString.replace(toRemove,'');
    $('#' + equivalantComponentIDAsString ).attr('disabled', true);
    }
} 
```

花了很多时间在上面做东西，好像没用。我是 java 脚本的新手，我在哪里错过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:18:40.347

如果您有一个 id 为 'fooHDN' 的元素，并且想要找到另一个 id 为 'foo' 的元素，那么您可以执行以下操作：

```
var otherElement = document.getElementById(someElement.id.replace(/HDN$/,'')); 
```

假设您已经拥有`someElement`并且它是一个 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:32:43.910

您发布的 js 代码有错误：div 没有“长度”，您的意思是“div.childNodes.length”吗？无论如何，既然您已经在使用 jQuery，我认为它可以变得更容易，如下所示： 已经测试并且工作正常。

```
$("#hiddenFields input[type='hidden'][id$='HDN']").each(
    function () {
        var elemId = this.id.replace(/HDN$/, '');
        $('#' + elemId).attr('disabled', this.value.toLowerCase() == 'false' ? false : true);
    }
); 
```

# c++ - 如何从文件中读取一行中的特定字符？

> ID：13695871
> 
> 赞同：1
> 
> 时间：2012-12-04T04:01:42.500
> 
> 标签：c++, file-io, char

我正在处理一个文本文件中的属性数据集，它看起来像这样：

```
e,x,y,w,t,a,f,c,b,k,e,c,s,s,w,w,p,w,o,p,n,s,g
e,f,y,y,t,l,f,c,b,w,e,r,s,y,w,w,p,w,o,p,n,y,p
e,b,s,w,t,a,f,c,b,w,e,c,s,s,w,w,p,w,o,p,n,s,g
e,b,s,w,t,a,f,c,b,w,e,c,s,s,w,w,p,w,o,p,k,s,m
e,x,y,n,t,l,f,c,b,w,e,r,s,y,w,w,p,w,o,p,k,y,g
e,b,s,w,t,a,f,c,b,k,e,c,s,s,w,w,p,w,o,p,k,s,g
e,x,f,g,f,n,f,c,n,g,e,e,s,s,w,w,p,w,o,p,n,y,u
e,b,s,y,t,l,f,c,b,k,e,c,s,s,w,w,p,w,o,p,n,s,g 
```

现在，我试图弄清楚如何轻松地从给定列中读取字符（例如，每行的第 5 个字母）。我不知道该怎么做。有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:17:00.497

如果您的数据中没有空格，则每个符号都用逗号分隔，并且字符串的结尾是一个符号“\n”，您可以执行以下操作：

```
#include <iostream>
#include <fstream>

using std::ifstream;

ifstream file;
const int LINE_WIDTH; //number of your chars in line (without commas)

char GetFromFile(int row, int position) //row and position indexes start from 0!
{
  file.seekg(row * (LINE_WIDTH * 2) + position * 2);
  return file.get();
}

int main()
{
    file.open("data.txt", ios::binary);

    char c = GetFromFile(10, 3);

    file.close();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:04:45.673

考虑到您正在处理的数据集只有一个字符而不是任意大小，您可以推断出每个字符后跟一个逗号，所以

> 1 个字符 = 2 个文件空间**不**包括所需的字符

如果您想阅读第 5 行，它将是`(4*2 + 1)`文件中的位置。您可以将该行读入一个字符串并在字符串中找到它，或者每次只从文件中获取一个字符，直到您达到所需的数字。

```
cout << "What column would you like to read from? ";
cin >> num;
int Length = (num - 1) * 2 + 1;
char ColumnLetter;
for(int i = 0; i < Length; i++)
{
  inFile >> ColumnLetter;
} 
```

# php - 为什么我的 php 代码没有从 mysql 结果中检索到我想要的字段？

> ID：13695873
> 
> 赞同：1
> 
> 时间：2012-12-04T04:01:50.467
> 
> 标签：php, sql

我是php和mysql的初学者。我正在尝试从名为“ `tweet_id`”的查询结果中提取特定字段，并将其作为参数发送给类“ `Tweet`”的构造函数。问题是构造函数似乎只识别传递给它的空字符串。为什么我的代码没有通过正确的`tweet_id`？我是否以某种方式掌握了错误的记录？

```
$myquery = "select tweet_id from tweets";

$result = $DB->query($myquery);

while($row = $result->fetch_assoc())
{
}

$tweet = new Tweet($row["tweet_id"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:04:13.460

很多错误：

1.  你在你的循环`$tweet`之外设置`while`
2.  `$tweet`缺少`$`变量前缀
3.  很多缺少右括号`)`

试试这个，看看它是否为你解决了所有问题：

```
$myquery = "SELECT tweet_id FROM tweets";
$result = $DB->query($myquery);
while($row = $result->fetch_assoc()) {
    $tweet = new Tweet($row["tweet_id"]);
    print_r($tweet);
} 
```

# java - 将音频添加到这些波形公式

> ID：13695874
> 
> 赞同：1
> 
> 时间：2012-12-04T04:01:54.893
> 
> 标签：java, javasound

我已经写出了这些公式，我认为它们应该能够成功地生成适当的波形。我如何将它与 java 声音库集成来为每个声音库创建测试音？

```
import java.lang.Math;

public class SoundWaves 
{
    int WAV_MULTI = 25;
    int amplitude;
    double frequency;
    int time;
    double sineWave;
    double sawWave;
    double squareWave;

    SoundWave ( int a, int f, int t)
    {
    }

    double makeSineWave ( int a,  int f, int t)
    {
        sineWave = a * Math.sin(2*PI*f*t); //passing amplitude frequency and time
        return sineWave;
    }

    double makeSawTooth (int a, int f, int t)
    {
        for ( int i = 1; i < WAV_MULTI; i++)
        {
            sawWave = sawWave + (Math.sin((2*PI*f*(i*t)/i); 
        }   
        return sawWave;
    }

    double makeSquareWave (int a, int f, int t)
        {
            for ( int i = 1; i < WAV_MULTI; i++)
            {
            if ( i%2 != 0 )
            squareWave = squareWave + (Math.sin((2*PI*f* (i*t)/i);  
            }   
            return squareWave;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:35:46.907

我通过创建一个实现 TargetDataLine 的类来做到这一点。大多数要覆盖的方法都可以忽略。数据从 TargetDataLine.read() 方法馈送到 SourceDataLine。将从 TargetDataLine 查询您的公式以填充传递给 SDL 的数据缓冲区。

我假设您已经知道如何以适当的字节格式将音频值转换为 PCM 数据。

我使用了一个波表，并使用公式来生成波表中的数据，但你的公式应该没问题。只需让它们映射到位数分辨率（16 位？）和 fps 速率（44100 Hz？）。

# svn - SVN 更新，但有 r1 文件而不是新的 r2

> ID：13695877
> 
> 赞同：0
> 
> 时间：2012-12-04T04:02:22.407
> 
> 标签：svn, commit

我在本地创建了一个 SVN 存储库并将一些文件导入其中。然后我进行了第一轮更改，添加了一个文件并提交：

```
?> svn add Makefile
?> svn commit -m "Turned ssh business into a class, added primary content to main, added Makefile, and filled in usage()\nCOMPILES"
?> svn update 
```

所以我实际上需要删除所有旧文件以进行更新而不是说`an unversioned file of the same name already exists`（实际上只是将它们移到其他地方）。但在我更新日志后，日志显示：

```
?> svn log file:///home/vlad417//svnrepos/RemoteCMD/
------------------------------------------------------------------------
r2 | vlad417 | 2012-12-03 22:29:35 -0500 (Mon, 03 Dec 2012) | 1 line

Turned ssh business into a class, added primary content to main, added Makefile, and filled in usage()\nCOMPILES
------------------------------------------------------------------------
r1 | vlad417 | 2012-12-03 21:15:24 -0500 (Mon, 03 Dec 2012) | 1 line

Initial framework and comments
------------------------------------------------------------------------ 
```

但是，从 repo 放置在文件夹中的文件`svn update`是修订版 1 文件，但修订版 2 中添加的 Makefile 都在那里。

A）如果我提交了更改，为什么他们没有更新到提交的内容？B）为什么在 r2 中添加的文件很好，但其余的都更新为最初导入的文件（作为修订版 1）？

因此，如果我执行以下操作...

```
$> svn log -q -v
------------------------------------------------------------------------
r2 | vlad417 | 2012-12-03 22:29:35 -0500 (Mon, 03 Dec 2012)
Changed paths:
   A /Makefile
------------------------------------------------------------------------
r1 | vlad417 | 2012-12-03 21:15:24 -0500 (Mon, 03 Dec 2012)
Changed paths:
   A /RemoteCMD.cpp
   A /RemoteCMD.h
   A /sshlib.cpp
   A /sshlib.h
------------------------------------------------------------------------
$> svn ls -v -R file:///home/vlad417/svnrepos/RemoteCMD/
      2 vlad417               Dec 03 22:29 ./
      2 vlad417           201 Dec 03 22:29 Makefile
      1 vlad417           555 Dec 03 21:15 RemoteCMD.cpp
      1 vlad417           218 Dec 03 21:15 RemoteCMD.h
      1 vlad417           809 Dec 03 21:15 sshlib.cpp
      1 vlad417           316 Dec 03 21:15 sshlib.h 
```

我现在看到修订版 2 只添加了 Makefile。所以 A) 仍然存在：为什么 4 个修改过的文件没有被提交？

我将我的文件保存在独立的文件夹中，在实验过程中我的每个修订版本都有一个。完成上述清理后`update`，我将 r2 文件夹中的文件复制到此版本控制文件夹中。令我惊讶的是，在此之后的提交成功了。在另一次更新后，日志读取修订版 3 的消息，文件确实是我所做的更改......不幸的是，所有调用都`help`隐藏了我的第一个命令，所以我看不到我的错误 =(

# actionscript-3 - flex spark list 将项目拖放到火花画布组件上

> ID：13695879
> 
> 赞同：2
> 
> 时间：2012-12-04T04:02:29.753
> 
> 标签：actionscript-3, apache-flex, canvas, drag-and-drop, ria

我有一个火花列表，其中显示代表产品的图像列表。我正在尝试实现一个拖放功能，该功能允许用户将他想要购买的产品从列表中拖到画布区域，在那里他可以在购买之前看到他选择的产品。我正在使用下面的代码，但我无法弄清楚它有什么问题，似乎我无法将列表项用作拖动器，任何人都可以帮忙：

私有函数 onMouseDown（事件：鼠标事件）：无效 {

```
 var list:List = List(event.currentTarget);
                var dragInitiator:Image = Image (list.selectedItem);
                var source : DragSource = new DragSource();
                source.addData(dragInitiator, "img");
                DragManager.doDrag(dragInitiator, source, event);

        }

        protected function canvas1_dragEnterHandler(event:DragEvent):void
        {

                DragManager.acceptDragDrop(Canvas(event.currentTarget));

        }

        protected function canvas1_dragDropHandler(event:DragEvent):void
        {
            Image(event.dragInitiator).x = 
                Canvas(event.currentTarget).mouseX;
            Image(event.dragInitiator).y = 
                Canvas(event.currentTarget).mouseY;  } 
```

* * *

```
 <fx:Model id="categoriesModel" source="Data/Categories.xml"/>
    <s:ArrayList id="CategoriesCollection" source="{categoriesModel.Category}"/>

    <fx:Model id="productsModel" source="Data/Products.xml"/>
    <s:ArrayList id="ProductsCollection" source="{productsModel.Product}" />

</fx:Declarations>

<s:VGroup gap="5"  horizontalAlign="center">

    <s:HGroup gap="5">

        <Components:PROExpressLogo/>
        <s:List id="categoryList"   scroller="{null}"  visible="true"
                itemRenderer="Renderers.categoryItemRenderer" width="700"  borderAlpha="0" 
                change="categoryList_changeHandler(event)">
            <s:layout>
                <s:HorizontalLayout/>
            </s:layout>
        </s:List>   

    </s:HGroup>

    <s:List id="productList"   scroller="{null}" contentBackgroundAlpha="0.4" contentBackgroundColor="0xabcdef"
            itemRenderer="Renderers.productItemRenderer" width="880"  borderAlpha="0" visible="true" horizontalCenter="0" 
             dragEnabled="false" mouseDown="onMouseDown(event)"  
            >   
        <s:layout>
            <s:HorizontalLayout/>
        </s:layout>
    </s:List>

    <s:HGroup gap="20">
        <s:Group>
                <s:Image id="planImage" width="500" height="300" horizontalCenter="0"  
                         toolTip="Drag your items on your Plan and drop them were you plan to install them" 
                         />

                <mx:Canvas width="500" height="300" backgroundAlpha="0.1"
                           backgroundColor="#abcdef" borderColor="#abcdef" borderStyle="inset"
                           contentBackgroundColor="#abcdef" cornerRadius="10"
                           dragDrop="canvas1_dragDropHandler(event)"
                           dragEnter="canvas1_dragEnterHandler(event)" dropShadowVisible="true"
                           horizontalCenter="0"/>
        </s:Group>
                <s:List id="cart" width="200" height="300"/>
    </s:HGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:50:24.077

我认为您需要添加拖动启动器应该是您拖动的项目渲染器，而不是整个 List 控件。不是`list.selectedItem`那种简单的对象，不像`UIComponent or VisualElement`你必须指向一些 ui 组件，比如`group`.

# java - 能够从有界集合中建议单词的不同拼写的轻量级库？

> ID：13695882
> 
> 赞同：0
> 
> 时间：2012-12-04T04:02:54.887
> 
> 标签：java, search-suggestion, misspelling

我一直在寻找轻量级库，它允许我输入一堆单词，然后询问给定单词是否有任何接近的匹配项。z

我并不特别关心底层算法（我认为一个简单的汉明距离算法可能就足够了，如果我自己承担这项任务）。

我只是在开发一种小型语言，当检测到“未定义的类”错误（很多时候它只是一个拼写错误的单词）时，我发现向用户提出建议很不错。不过，我不想在这个问题上浪费太多时间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:07:52.467

不一定是图书馆，但我认为[这篇文章](http://norvig.com/spell-correct.html)可能真的很有帮助。它主要描述了拼写校正器如何在 python 中工作的一般工作原理，但也有一个 java 实现的链接，如果这是你正在寻找的东西，你可以使用它（请注意，我之前没有专门使用过 java 的） )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:09:51.967

Levenshtein 距离是处理它的常用方法。只需将所有单词添加到列表中，然后暴力迭代它并返回最小距离。这是一个具有 Levenschtein 函数的库：[http ://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringUtils.html)

如果您有大量单词并且希望它快速运行，那么您必须使用 ngrams。将每个单词溢出成双拼，然后将 (bigram, word) 添加到地图中。使用地图查找目标词中的二元组，然后遍历候选词。不过，这可能比您想做的工作还要多。

# javascript - 提交后反弹。

> ID：13695888
> 
> 赞同：1
> 
> 时间：2012-12-04T04:03:18.723
> 
> 标签：javascript

效果后我终于得到了反弹，但由于某种原因，提交后它不会关闭facebox。之前提交后关闭了，但是我做错了什么？

```
$.ajax({
    url: '../../_lib/forms/comment_ajax.php?id=<?php echo $_GET['id']; ?>',
    data: { form_name: name, form_comment: comment },
    success: function(data) {
        $('#new_comment').append(data);

        $(document).trigger('close.facebox');

        $('#new_comment').effect("bounce", { direction:'down', times:5 }, 300);    

        $('html,body').animate({scrollTop:0}, 2000, "easeOutElastic");
        return false;
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:14:02.413

而不是这样做：

```
$(document).trigger('close.facebox'); 
```

试试这个：

```
$.facebox.close(); 
```

# ruby-on-rails - Rails：在进行单元测试时，一开始需要“失败”还是“错误”？

> ID：13695889
> 
> 赞同：0
> 
> 时间：2012-12-04T04:03:25.493
> 
> 标签：ruby-on-rails

嗨，我正在尝试学习测试和 TDD，所以我开始了一个新项目并制作了一个`User`模型。我做了一个`User`模型：`name, gender, age`。

```
class User < ActiveRecord::Base
  attr_accessible :age, :gender, :name
end 
```

我读到 TDD 是关于进行测试（失败），修复它们，然后再次运行测试以查看它们通过。那么这是否意味着我想要先失败或错误或做任何工作？

我问是因为我刚刚写了第二个测试：

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  test "user is created" do
    user = User.create(:name => "Edmund", :age => 3, :gender => "m")
    assert_equal user, User.find_by_name("Edmund")
    assert_equal 3, User.count
  end

  test "user has sent messages" do
    user = User.create(:name => "Edmund", :age => 3, :gender => "m")
    2.times do 
      user.sent_messages.create(:sender_id => user.id)
    end
    assert_equal 2, user.sent_messages.count
  end

end 
```

对于已发送的消息。我跑了`rake test:units`，期待它失败，因为我的`Message`模型中没有任何模型，也没有任何关联，但是`has_many :messages`我`User`得到了一个错误：

```
Edmunds-MacBook-Pro:langoexchange edmundmai$ rake test:units
NOTICE:  CREATE TABLE will create implicit sequence "users_id_seq" for serial column "users.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "users_pkey" for table "users"
Run options: 

# Running tests:

E.

Finished tests in 0.087926s, 22.7464 tests/s, 22.7464 assertions/s.

  1) Error:
test_user_has_sent_messages(UserTest):
NoMethodError: undefined method `sent_messages' for #<User:0x007fa73bbd68e0>
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:407:in `method_missing'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:149:in `method_missing'
    /Users/edmundmai/Desktop/Class/Ruby/langoexchange/test/unit/user_test.rb:13:in `block (2 levels) in <class:UserTest>'
    /Users/edmundmai/Desktop/Class/Ruby/langoexchange/test/unit/user_test.rb:12:in `times'
    /Users/edmundmai/Desktop/Class/Ruby/langoexchange/test/unit/user_test.rb:12:in `block in <class:UserTest>'

2 tests, 2 assertions, 0 failures, 1 errors, 0 skips
rake aborted!
Command failed with status (1): [ruby -I"lib:test" -I"/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rake-10.0.2/lib" "/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rake-10.0.2/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" ]
Tasks: TOP => test:units
(See full trace by running task with --trace) 
```

这是（错误）TDD 的预期结果还是我做错了什么或错误地解释了 TDD 的过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:19:36.773

是的，这是 TDD 中预期的第一步。一旦你编写了你的​​第一个测试，你的下一个任务就是让你的代码达到实际*失败*而不是*错误*的程度。失败与错误不同，因为它意味着您的测试期待某事，而该期待没有得到满足。在发生错误的情况下，期望甚至没有机会被测试，因为被测代码中出现了问题。（在您的情况下，规范永远没有机会检查是否`user.sent_messages.count`等于，`2`因为`sent_messages`甚至没有定义。）

TDD 循环通常侧重于从红色（失败）到绿色（成功 + 重构），因为这是过程的重要部分，但在此循环中隐含的是从错误（未定义的变量/方法等）到实际的过程失败（未达到预期等） 通常，从错误到失败的第一步是相当简单的（在这种情况下，定义一个调用的方法`sent_messages`，其中没有任何内容来启动，然后再次运行测试），但它可能不是取决于上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:19:19.857

是的，你的测试最初应该失败（否则，没有工作要做），然后你做*最少*的事情让它通过。每隔一段时间（我在做 TDD 时每 20 个测试做一次），你就重构它们。

# c++ - Visual Studio 2010 在浮点/双倍增量上表现出奇怪的行为

> ID：13695890
> 
> 赞同：0
> 
> 时间：2012-12-04T04:03:54.207
> 
> 标签：c++, visual-studio-2010, visual-studio, floating-point, floating-accuracy

> **可能重复：**
> [处理浮点数的准确性问题](https://stackoverflow.com/questions/590822/dealing-with-accuracy-problems-in-floating-point-numbers)

我正在编写一个 OpenGl 动画并使用浮点变量“时间”来跟踪时间。我将“时间”变量增加 0.01。每当“时间”达到整数值时，我都有一定的条件要满足。问题是在一定时间后，浮点增量显示出奇怪的行为。我从时间 = 0 开始，我看到“时间”达到 0.83 后，下一个值为 0.839999。我虽然这可能与浮点精度有关，所以我尝试使用双精度/长双精度，我发现代码没有达到值 1.00，而是达到了值 1.0000007。

我尝试增加“0.01f”而不是“0.01”，但没有成功。这是 Visual Studio 中的一些错误还是我做错了？我可以发布代码，但我认为它没有多大用处，因为我只在一个地方分配“时间”，而它只是在其他地方使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T04:10:04.217

*除非您确切*知道自己在做什么，否则永远不要比较浮点值是否相等。为此，我强烈建议您使用整数（可能是毫秒的整数）。

有关更多信息，请参阅[每位计算机科学家应了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

浮点数是一种固定精度格式。这是固定精度格式的固有限制。

例如，假设您使用了六位十进制数字的精度。三分之一将是`.333333`。但是如果你把三分之一加三倍，你得到`.999999`的是 ，而不是 1。这就是野兽的本性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:24:54.823

不完全推荐这个，但问题是 0.1 不能完全表示为 double。1.0就可以了。因此，如果您将时间步长设为 2 的（负）幂，您会发现不同。举例说明：

```
 double delta = 1.0 / 8;
    int stopper = 10;
    int nextInt = 1;
    for (double t = 0; t <= stopper; t += delta)
    {
        if (t == nextInt)
        {
            std::cout << "int ";
            ++nextInt;
        }
        else 
            std::cout << "    ";
        std::cout << t << std::endl;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T04:18:40.153

只需在每次增量后四舍五入“时间”，以确保它保持一个合理的值。

像这样的东西：

```
double round(double value, double precision)
{
    return floor(value / precision + 0.5) * precision;
}
time = round(time + 0.1, 0.1); 
```

# javascript - 提交时 html 文本框上的 UrlDecode 值

> ID：13695895
> 
> 赞同：2
> 
> 时间：2012-12-04T04:04:14.963
> 
> 标签：javascript, jquery, html

我有一个非常简单的表单，其中包含三个需要提交给 mvc 操作的字段。表单必须是 application/x-www-form-urlencoded。但是，其中一个字段由用户复制和粘贴已被 urlencoded 的值填充。我想在提交表单之前解码该值。这看起来很简单，但我的javascript一直遇到问题。

这是代码：

```
 <html>
    <head>
<script>
function decodeURI()
{
decodeURIComponent(document.createprofile.URI.value);
}
</script>
    <title>Test Create</title>
    </head>
    <body>
    <center>
    <h1> Spoof Profile Calls </h1>
    <hr>
    <div style="border: 1px solid black; width: 300px;">
    <b>Create</b>
    <form method="post" action="https://test.test-lab.com/Profile/Create/" name="createprofile">
    <input type="hidden" name="ReturnURL" value="self.close()">
    UserName: <input type="text" name="UserName"><br />
    Client: <input type="text" name="Client"><br />
    URI: <input type="text" name="URI" onblur="decodeURI();"><br />
    <input type="submit" formenctype="application/x-www-form-urlencoded" value="Go To - Create"><br />
    </form>
    </div>
    </body>
    </html> 
```

URI 字段是在提交之前需要对 url 进行解码的字段，因为它会被重新编码并因此损坏。我可以要求用户自己取消对这些值的编码，但他们不是非常老练的用户，而且很可能不会发生。

先感谢您！

**更新失败代码**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:16:46.637

换行

```
URI: <input type="text" name="URI" onblur="decodeURI();"><br /> 
```

经过

```
URI: <input type="text" name="URI" onchange="decodeURI(this);"><br /> 
```

并做类似的事情

```
function decodeURI(elm) {
    elm.value = 'foo ' + elm.value + ' bar';
    return false;
} 
```

# ios - 在由两个不同的苹果开发者帐户创建的两个应用程序之间通过钥匙串组访问共享数据？

> ID：13695896
> 
> 赞同：7
> 
> 时间：2012-12-04T04:04:33.010
> 
> 标签：ios

我的场景是： 1）我有一个开发者帐户，它创建应用商店中显示的应用程序。2）同时，我有另一个企业账号加入了企业计划，用于创建我公司使用的应用程序。我希望第二个应用程序使用来自第一个应用程序的数据，以获得一些内部高级功能。我知道我可以使用我的企业配置文件为第一个应用程序构建一个不同的包。但是，如果所有员工都可以使用真正的营销版应用程序会更好，这样他们就可以帮助测试真正的应用程序。

我的问题是：是否可以让我的两个应用程序（在两个不同的苹果开发者帐户下）共享数据？

PS 我已经阅读了这篇文章[http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html](http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html)并且我知道钥匙串组访问应该在具有相同捆绑种子 ID 的应用程序之间进行。我发送这个问题只是想知道是否有什么我可以做不同的事情，因为我拥有两个不同的帐户？

PPS 我还考虑了其​​他选项，例如带有特定 URL 方案的粘贴板和 openURL。如果最后我发现我不能使用钥匙链方法，我会改用粘贴板。但我想先知道钥匙链方法是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:06:25.813

查看[UIPasteboard](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPasteboard_Class/Reference.html)，它可以在应用程序之间共享数据，但你必须启动一个应用程序，让它写入粘贴板，然后切换到另一个应用程序并让它提取数据。

# html - 将网页重定向到 Iframe 中的链接

> ID：13695898
> 
> 赞同：0
> 
> 时间：2012-12-04T04:04:39.207
> 
> 标签：html, iframe, webpage

目前，我正在创建一个使用 Google.com 搜索工具的网页。- 我在页面上制作了一个表格，它将向 Google.com 发送查询表格。- 对于搜索结果，我使用 iframe 来显示这些内容。

但问题是：当 iframe 显示搜索结果链接时，如果用户点击这些链接，只有 iframe 中的内容被重定向到结果网页，而我希望链接重定向主页本身。

有解决方案吗？

我的主页的代码 - searchFrame 是表单所在的位置 - contentFrame 只是一个空页面。

'

```
 <div id="sidecontainer">
<iframe id="SFrame" name="SearchFrame" frameborder ="0" width="500" height="100" scrolling="no" src="SearchBox.html"></iframe>
</div>

<div id="content">
<iframe id="CFrame" name="ContentFrame" frameborder="0" width="80%" height="900px" scrolling="no" OnLoad="window.scroll(0, 0);" src="ContentFrame.html"></iframe>
</div> 
```

'

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:21:44.540

使用基本标签。将此添加到 iframe 的头部。这将打开父页面本身的所有链接

```
<base target="_parent" /> 
```

这在所有浏览器中也受支持。

# java - 简单的 JSON Java 存储方法

> ID：13695902
> 
> 赞同：1
> 
> 时间：2012-12-04T04:05:06.750
> 
> 标签：java, json

我的课堂上有一个简单的 JSON 字符串。

```
String json = "{'key1':'value1','key2':'value2'}"; 
```

我想创建 3 个简单的方法

```
1\. Put value in my JSON string.
2\. Get value in my JSON string.
3\. Remove value in my JSON string. 
```

Java中有没有简单的库？还是我必须自己实施？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:07:47.473

使用杰克逊：

[http://wiki.fasterxml.com/JacksonInFiveMinutes](http://wiki.fasterxml.com/JacksonInFiveMinutes)

序列化：

```
ObjectMapper mapper = new ObjectMapper();
String json = mapper.writeValue(new Simple()); 
```

和 POJO 一样：

```
public class Simple {
    public int x = 1;
    public int y = 2;
} 
```

你会得到类似的东西：

```
{"x":1, "y":2} 
```

（除了默认输出不缩进：您可以使用标准杰克逊机制启用缩进）

从 JSON 反序列化 POJO：

```
ObjectMapper mapper = new ObjectMapper();
Simple value = mapper
   .readValue("{\"x\": 1, \"y\": 2}", Simple.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:06:42.840

[Gson](http://code.google.com/p/google-gson/)可以将 Java 对象和 JSON 相互转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T04:29:03.127

几个月前我对 json-java 库进行了相当广泛的评估，并选择了 json-smart：[http ://code.google.com/p/json-smart/](http://code.google.com/p/json-smart/)

一直运作良好。

# windows-8 - WinJS.Application.sessionState 真正存储的内容

> ID：13695903
> 
> 赞同：2
> 
> 时间：2012-12-04T04:05:08.420
> 
> 标签：windows-8, microsoft-metro, winjs

在我的 Windows 应用商店应用程序中，我将数据直接存储在 sessionState 对象中，因此我以后不需要将数据移动到那里。在一种情况下，我存储一个对象，该对象具有在包含范围内声明的变量的访问器方法，如下所示：

```
(function ()
{
    var a = [];
    var index = -1;

    WinJS.Application.sessionState.data = 
    {
        add: function (item)
        {
            index = a.length;
            a.push(item);
        },
        currentItem: function ()
        {
            return a[index];
        }
    };
})(); 
```

我的问题是 sessionState 对象是否会存储`a`，`index`因为它们是否被范围引用，因为它们实际上并不在其中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:04:59.350

您可以使用“数据”来操作“a”和“索引”，直到您的应用第一次被暂停。当您的应用程序暂停时，存储在 sessionState 对象中的任何数据都会自动序列化到磁盘。功能将被删除。恢复后，我们丢失了 2 个函数“add”和“currentItem”。

查看更多：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh440965.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh440965.aspx)

# android - 搜索存储在 sqlite 数据库中的字符串的最快方法

> ID：13695904
> 
> 赞同：3
> 
> 时间：2012-12-04T04:05:08.340
> 
> 标签：android, sqlite

我有大量字符串，大约 15,000 个，我使用以下代码存储在 SQLite 数据库中：

```
 void addKey(String key, String value, String table) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_KEY, key); // Contact Name
        values.put(KEY_VALUE, value); // Contact Phone

        // Inserting Row
        db.insert(table, null, values);
        db.close(); // Closing database connection

    } 
```

然后我使用以下方法搜索该数据库，以挑选出与我正在寻找的键匹配的任何字符串：

```
public String searchKeyString(String key, String table){
        String rtn = "";
        Log.d("searchKeyString",table);

            // Select All Query
            String selectQuery = "SELECT  * FROM " + table;

            SQLiteDatabase db = this.getWritableDatabase();
            Cursor cursor = db.rawQuery(selectQuery, null);

            // looping through all rows and adding to list
            if (cursor.moveToFirst()) {
                do {
                    Log.d("searchKeyString","searching");

                    if(cursor.getString(1).equals(key)) 
                        rtn = rtn + "," + cursor.getString(2);
                } while (cursor.moveToNext());
            }
            cursor.close();
            db.close();
            Log.d("searchKeyString","finish search");

        return rtn;
    } 
```

目标是在用户在保留板上输入时实时执行此操作，因此响应时间是关键，而现在它的状态需要一秒钟以上才能完成搜索。

我最初考虑将所有项目读入一个数组列表并通过可能更快的排序，但我认为该大小的数组列表可能会导致内存问题。在我的数据库中搜索这些条目的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T05:14:45.587

你可以做几件事...

*   将返回更改为 StringBuilder 直到结束。
*   仅使用数据库的可读版本（尽管这可能没有太大区别）
*   不要每次都获取数据库的新实例，保持打开状态直到不再需要它
*   仅使用 SQL 查询中的“WHERE”参数查询您需要的内容。

请参阅下面的代码并进行一些更改：

```
// move this somewhere else in your Activity or such
SQLiteDatabase db = this.getReadableDatabase();

public String searchKeyString(String key, String table){
    StringBuilder rtn = new StringBuilder();
    Log.d("searchKeyString",table);

        // Select All Query
        String selectQuery = "SELECT  * FROM " + table + " WHERE KEY_KEY=?";

        Cursor cursor = db.rawQuery(selectQuery,  new String[] {key});
        // you can change it to
        // db.rawQuery("SELECT * FROM "+table+" WHERE KEY_KEY LIKE ?", new String[] {key+"%"});
        // if you want to get everything starting with that key value

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Log.d("searchKeyString","searching");

                rtn.append(",").append(cursor.getString(2));
            } while (cursor.moveToNext());
        }
        cursor.close();
        Log.d("searchKeyString","finish search");

    return rtn.toString();
} 
```

请注意，即使您希望这对用户“实时”发生，您仍然需要将其移动到单独的线程或 ASyncTask 或您将遇到问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:44:33.083

例如，您应该考虑使用`SELECT * FROM your-table LIMIT 50`。您可以在视图上放置两个按钮“返回”、“下一步”。如果每个页面最多有 50 个项目，用户在第 1 页，他点击“下一步”，那么您可以使用以下查询：

```
SELECT * FROM your-table LIMIT 50 OFFSET 50 
```

如果您的表格包含大部分文本数据，并且您希望将搜索深入集成到您的应用程序中，请考虑使用带有[FTS](http://sqlite.org/fts3.html)的虚拟表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T04:37:02.373

让 sqlite 做艰苦的工作。

首先，如果您还没有索引，请向您要搜索的字段添加索引。其次，不要使用手动表扫描执行 SELECT all，而是使用表单中的查询

```
SELECT column_value
  FROM my_table
 WHERE column_key LIKE "ABC%" 
```

这样返回的数据量最少，sql引擎使用索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T04:21:23.680

我不知道更好，但也许对选定的字符串逐个进行查询会*更快。*

```
public String searchKeyString(String key, String table){
    String rtn = "";
    Log.d("searchKeyString",table);

    // Select All Query
    String selectQuery = "SELECT  * FROM " + table + "WHERE column_1 = " + key;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        rtn = rtn + "," + cursor.getString(2);
    }
    cursor.close();
    db.close();
    Log.d("searchKeyString","finish search");

    return rtn;
} 
```

**编辑：**

好吧，我不知道那些自定义键盘应用程序是如何做到的，但它们`AutoCompleteTextViews`与适配器相连。您可以轻松地制作一个`cursorAdapter`并将您的自动完成视图挂钩到它。

[http://www.outofwhatbox.com/blog/2010/11/android-autocompletetextview-sqlite-and-dependent-fields/](http://www.outofwhatbox.com/blog/2010/11/android-autocompletetextview-sqlite-and-dependent-fields/)

[http://www.opgenorth.net/blog/2011/09/06/using-autocompletetextview-and-simplecursoradapter-2/](http://www.opgenorth.net/blog/2011/09/06/using-autocompletetextview-and-simplecursoradapter-2/)

# jquery - Backbone 和 Smart Time ago 不能一起运行，有什么想法吗？

> ID：13695911
> 
> 赞同：1
> 
> 时间：2012-12-04T04:06:23.410
> 
> 标签：jquery, ruby-on-rails, backbone.js, coffeescript

我正在使用主干和： [https ://github.com/pragmaticly/smart-time-ago](https://github.com/pragmaticly/smart-time-ago)

当我加载页面时，没有显示任何时间前应该在的位置（但主干正在工作）。

这是我的主干观点：

```
class Voice.Views.PostsIndex extends Backbone.View

        template: JST['posts/index']

        initialize: ->
                @collection.on('reset', @render, this)

        render: ->
                $(@el).html(@template(posts: @collection)).timeago
                this 
```

## 模板/帖子/index.jst.eco

```
<% for post in @posts.models: %>
        <tbody id="postdata"><tr><td>
                <center>
                <% if post.get('content').length > 140: %>
                        <%=post.get('content').substring(0, 140)+"\t\t"%>
                        ...<a href="show/<%= post.get('id') %>">see more</a>
                <% else: %>
                        <%= post.get('content') %>
                <% end %>
        <br>    </center>
        <span class="green pull-left"><%= post.get('agrees') %>&nbsp;</span>
        <span class="red pull-left"><%= post.get('disagrees') %>&nbsp;</span>
        <span class="blue pull-left">0</span>
        <span class="pull-right">
            <time class="timeago" datetime="<%=post.get('created_at')%>">
            </time>
        </span>
        </td></tr></tbody> 
```

## 应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require timeago
//= require underscore
//= require backbone
//= require voice
//= require bootstrap.min
//= require_tree ../templates
//= require_tree ./models
//= require_tree ./collections
//= require_tree ./views
//= require_tree ./routers
//= require_tree . 
```

反正有没有让这个工作？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:15:04.233

这不是函数调用：

```
$(@el).html(@template(posts: @collection)).timeago 
```

这只是在一个 jQuery 对象上查找`timeago`函数，而且，对它没有任何作用。您需要添加括号（或参数）来调用`timeago`：

```
$(@el).html(@template(posts: @collection)).timeago()
# you need these ---------------------------------^^ 
```

如果您提供一些参数，则不需要括号：

```
$(@el).html(@template(posts: @collection)).timeago selector: '.pancakes' 
```

参数的存在足以告诉 CoffeeScript 您想要执行函数而不是获取对它的引用。

# bash - 从 shell 脚本中的文件名中删除一级文件扩展名

> ID：13695914
> 
> 赞同：3
> 
> 时间：2012-12-04T04:06:40.947
> 
> 标签：bash, shell, unix, ksh

我有一个 Bash 脚本，它遍历文件并屏蔽它们。这些文件是 gzip 压缩的，我需要先将它们压缩，然后再将它们作为参数传递给 Python 程序，如下面的脚本所示。问题是变量`$i`不会变成文件名的解压缩版本。解压前的文件名是`my-log-1.c.log.gz`. 在如下文件上运行 gunzip 后，我想将`my-log-1.c.log`其作为参数传递给`masker.sh`脚本，而不是`.gz`版本。我该怎么做？

```
#!bin/bash

cd /home/logs

  for i in *
     gunzip $i
     do
       python masker.py $i  # python program masks files 
     rm $i
     echo "masked_file and removed =  $i"
   done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:09:44.333

使用[基本名称](http://www.manpagez.com/man/1/basename/)：

```
for i in; do
  gunzip "$i"
  i=$(basename "$i" .gz)
  python masker.py "$i"  # python program masks files 
  rm $i
  echo "masked_file and removed =  $i"
done 
```

第一个参数是文件名，第二个参数是要删除的扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:39:32.180

您可以使用以下程序：

```
for i in; do
    gunzip "$i"
    i=$(echo $i|rev|cut -d'.' -f2-|rev)
    python masker.py "$i"  # python program masks files 
    rm $i
    echo "masked_file and removed =  $i"
done 
```

# c# - 在winform中添加一个计数器类

> ID：13695916
> 
> 赞同：0
> 
> 时间：2012-12-04T04:06:56.633
> 
> 标签：c#, windows, class

我有一个想要的项目

*   返回当前计数的方法。
*   将计数设置为零的构造函数。

我有前几个，但需要帮助返回计数为 0，然后是构造函数。我需要通过添加一个计数器类来做到这一点，但我对添加它的方式感到困惑。有人可以帮我吗？

```
using System; 
using System.Collections.Generic;
using System.ComponentModel;
using System.Data; 
using System.Drawing; 
using System.Linq; 
using System.Text; 
using System.Threading.Tasks; 
using System.Windows.Forms;

namespace Project10TC 
{
    public partial class Form1 : Form    
    {
        int zero = 0;
        int i = 1;

        public Form1()
        {
            InitializeComponent();
        }

        private EventHandler myCounter;

        // end of Form class

        private class myCounter()
        {
             myCounter = new myCounter( );
        }

        private void exitToolStripMenuItem1_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void aboutToolStripMenuItem_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Teancum Clark\nCS 1400\n Project 10");
        }

        private void button1_Click(object sender, EventArgs e)
        {
            textBox1.Text = (++i).ToString();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            textBox1.Text = (--i).ToString();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            textBox1.Text = (zero).ToString();

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:12:32.520

```
public class Counter
{
    public int Value { get; private set; }

    public void Increment() 
    {
       Value = Value + 1;
    }

    public void Decrement() 
    {
      if (Value > 0) Value = Value - 1;
    }

    public Counter()
    {
       Value = 0;
    }
 } 
```

# javascript - 剑道 ui 网格中分页的 Javascript 验证

> ID：13695919
> 
> 赞同：2
> 
> 时间：2012-12-04T04:07:40.880
> 
> 标签：javascript, asp.net-mvc-3, kendo-ui

以下代码按预期工作，但是在分页单击时，它仍然执行并显示消息“请先选择一条记录，然后按此按钮”。除非单击导出按钮，否则无论如何都可以防止这种情况发生。谢谢

```
$(document).ready(function () {
            $("#Product").on("click",function(){
                var $exportLink = $('#export');
                var href = $exportLink.attr('href');
                var grid = $('#Product').data('kendoGrid');   //get a reference to the grid data 
                var record = grid.dataItem(grid.select()); //get a reference to the currently selected row
                if(record !=null)
                {
                    href = href.replace(/refId=([^&]*)/, 'refId='+record.ID);
                    $exportLink.attr('href', href);
                }
                else
                {
                    alert("Please select a record first, then press this button")
                    return false;
                }

            });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:25:12.437

定义一个单击处理程序，因为`$("#Product").on("click",function(){...})`您实际上是为任何单击定义它，`#Product`而不仅仅是在您的`Export`按钮上。您应该定义`on`for the`button`而不是 for the`grid`

# python - 散列 Python 函数的代码（包括 lambda）

> ID：13695923
> 
> 赞同：1
> 
> 时间：2012-12-04T04:08:05.403
> 
> 标签：python, hash, lambda

我正在尝试制作一个简单的中间编译功能：

```
lst = [lambda x: calculate_urls(),
       lambda x: join_urls_with_ids(x, args[0]),
       lambda x: bucket_urls(x)]
intermediate.execute(lst) 
```

`intermediate.execute`将运行列表中的每个项目。第一个函数的输出是第二个函数的输入，以此类推。lambda 用于使每个函数只接受一个参数。（第一个输入值是`None`，所以在这里它被有效地忽略了。）

在每个中间步骤，输出被腌制并保存（目前只是到`/tmp`）。如果某个函数已经存在一些中间输出，则跳过该函数的执行并进入下一步。

我正在寻找一种方法来检测函数代码的变化，我认为散列代码将是一种快速的方法。我希望它检测是否有人更改了函数的实现，以便它再次执行该函数并忽略缓存的值。

我发现了`func_code`，这是可散列的 AFAIK。但是，它仅适用于该特定函数，这意味着哈希仅在上述代码中的 lambdas 更改时才更改，而不是 lambdas 调用的函数。我正在寻找的理论上可能吗？有合理的中间立场吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:37:34.657

除了存储 lambda，您可以存储函数参数元组的列表，`func_code`并对这些函数进行哈希处理。也就是说，而不是你所拥有的，做：

```
lst = [
    (calculate urls, ()),
    (join_urls_with_ids, (args[0])),
    (bucket_urls, ())
] 
```

然后`intermediate.execute`像这样：

```
def execute(lst):
    result = ()
    for func, args in list:
        args = result + args
        result = func(*args) 
```

但是，很难掌握您在这里尝试做什么。函数实现可能会在程序的不同调用之间发生变化的想法？（也就是说，运行、保存缓存、退出、更改 的源代码`calculate_urls`，然后再次运行？）如果是这样，您最好对函数的源代码进行哈希处理（使用`inspect.getsource`）。Python 字节码（即 中的内容`func_code`）并不是一个真正稳定的目标，并且可能会在 Python 版本之间发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:36:32.707

如何制作功能的备份列表？如果在 lst 中改变了其中一个，则列表将不再相等。

```
lst = [lambda x: calculate_urls(),
       lambda x: join_urls_with_ids(x, args[0]),
       lambda x: bucket_urls(x)]
backup = list(lst)

lst[0] = lambda x: foo()

if lst != backup:
    print("Something changed") 
```

# wcf - AWS SQS WCF 通道传输的源或程序集

> ID：13695924
> 
> 赞同：5
> 
> 时间：2012-12-04T04:08:38.283
> 
> 标签：wcf, amazon-web-services, amazon-sqs

引用了一个基于 AWS SQS 服务为 WCF 创建通道传输的项目。所有引用都以死 url 结尾。基于存在这些参考的事实，我认为将 SQS 用作具有或不具有安全性的 WCF 传输通道在技术上是可行和可行的。这是一个有效的假设吗，和/或是否有人拥有此类渠道的源代码或程序集？如果不存在这样的源，是否值得在 AWS 上以松散耦合模式创建这样的通道来绑定 .NET WCF？

# javascript - 删除字符串 Javascript 中的空格

> ID：13695926
> 
> 赞同：-4
> 
> 时间：2012-12-04T04:08:40.673
> 
> 标签：javascript, string, trim

我有一个字符串：**'__*那是图像'****；*我想删除'that'前面的*空格（ __）（结果是：* **'that is image'**）我该怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:13:57.060

Javascript 1.8 以后有一个`trim()`函数。见[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)

你可以像这样使用它：

```
var str = "   that is an image  ";
alert(str.trim());//"that is an image"; 
```

正如 MDN 所描述的，为了确保完全支持，您可以添加这样的原型方法：

```
if(!String.prototype.trim) {
  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g,'');
  };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:11:37.440

```
var str = ' that is image';
str.replace(/^\s+|\s+$/g,""); //Removes left and right extra spaces 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T04:14:56.953

```
var str = '  that is image';
str = str.replace(/\s/g,"");
console.log(str);
alert(str); 
```

# android - 在android中的xml布局上没有显示coverflow

> ID：13695927
> 
> 赞同：2
> 
> 时间：2012-12-04T04:08:50.737
> 
> 标签：android, xml, layout, coverflow

我正在使用网站上的一些代码进行封面流，

[http://www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)

![正常工作的coverflow](../Images/12d0f8430dfac19984dabf0ef84d0e89.png)

这个coverflow很好用，没有问题。但是，当我尝试将其放入 xml 布局中时，它不会显示出来，只显示了封面流的黑色背景墙纸，但缺少封面流。

![布局中缺少覆盖流](../Images/1bc143636b2e3e88bb187293b167a4bd.png)

我想把它放在 xml 布局中的原因是需要在页面底部放置按钮。所以我决定在coverflow下方的屏幕下部制作一个带有按钮的xml布局。

有什么问题或我遗漏了什么使覆盖流无法在 xml 布局中工作？

我的代码中可能缺少一些东西才能正常工作。我做了以下事情来尝试让它工作。代码作者使它看起来您所要做的就是使用包含的示例代码来设置内容视图。并在布局中创建一个简单的 xml 文件，它应该可以工作。

我不明白为什么coverflow 本身工作得这么好，并且放在布局内时不起作用。

是否有一个需要做的事情的清单才能使这样的事情起作用？

coverflow 代码的作者添加了两个注释掉的行作为示例，可以在您制作自己的 cusom xml 视图时使用

```
 //Use this if you want to use XML layout file
    //setContentView(R.layout.main);
    //coverFlow =  (CoverFlow) findViewById(R.id.coverflow); 
```

我删除了这些行的注释，以便我可以使用它们。

接下来我将以下代码添加到 xml 布局中

```
 <com.vagina.destruction.CoverFlow
        android:id="@+id/coverflow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
      </com.vagina.destruction.CoverFlow> 
```

这是我从 Eclipse 中的可视化布局编辑器收到的错误消息

无法实例化以下类： - com.vagina.destructon.CoverFlow（开放类，显示错误日志） - com.vagina.destruction.CoverFlowExample（开放类，显示错误日志）查看错误日志（窗口 > 显示视图）更多细节。提示：当在 Eclipse 中显示时，在自定义视图中使用 View.isInEditMode() 以跳过代码

这是coverflow示例活动开始时的代码部分

```
 public class CoverFlowExample extends Activity implements OnItemClickListener {
 /** Called when the activity is first created. */

int imageCount = 0;
Cursor cur;
String toastResult;
String pathName;
 ArrayList<String> list1 = new ArrayList<String>();
private int blocker = 0;
private int imagePosition;
private int pathIndex;
private int indexer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    CoverFlow coverFlow;
    coverFlow = new CoverFlow(this);

    Bundle extras = getIntent().getExtras();
    if(extras !=null) {

     imagePosition = extras.getInt("imagePosition");

    }

    String[] proj2 = {MediaStore.Images.Media.DATA};
    Cursor cur2 = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, proj2,  MediaStore.Images.Media.IS_PRIVATE + "='" + 1 +"'", null, null);

    imageCount = cur2.getCount();

    cur2.close();

    coverFlow.setAdapter(new ImageAdapter(this));

    ImageAdapter coverImageAdapter =  new ImageAdapter(this);

    coverFlow.setAdapter(coverImageAdapter);

    coverFlow.setSpacing(-10);
    coverFlow.setSelection(imageCount, true);

 //  setContentView(coverFlow);

    coverFlow.setOnItemClickListener(this);

    coverFlow.setSelection(imagePosition);

    coverFlow =  (CoverFlow) findViewById(R.id.coverflow);

    //Use this if you want to use XML layout file
         setContentView(R.layout.activity_coverflow);
    coverFlow =  (CoverFlow) findViewById(R.id.coverflow);

    // centers the image on coverflow to the same image selected in the previous activity
      coverFlow.setBackgroundResource(R.drawable.blanklarge); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:16:18.747

用这个

```
 public class CoverFlowExample extends Activity implements OnItemClickListener {
     /** Called when the activity is first created. */

    int imageCount = 0;
    Cursor cur;
    String toastResult;
    String pathName;
     ArrayList<String> list1 = new ArrayList<String>();
    private int blocker = 0;
    private int imagePosition;
    private int pathIndex;
    private int indexer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Use this if you want to use XML layout file
        setContentView(R.layout.activity_coverflow);
        CoverFlow coverFlow;
        coverFlow =  (CoverFlow) findViewById(R.id.coverflow);

/*        CoverFlow coverFlow;
        coverFlow = new CoverFlow(this); */

        Bundle extras = getIntent().getExtras();
        if(extras !=null) {

         imagePosition = extras.getInt("imagePosition");

        }

        String[] proj2 = {MediaStore.Images.Media.DATA};
        Cursor cur2 = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, proj2,  MediaStore.Images.Media.IS_PRIVATE + "='" + 1 +"'", null, null);

        imageCount = cur2.getCount();

        cur2.close();

        coverFlow.setAdapter(new ImageAdapter(this));

        ImageAdapter coverImageAdapter =  new ImageAdapter(this);

        coverFlow.setAdapter(coverImageAdapter);

        coverFlow.setSpacing(-10);
        coverFlow.setSelection(imageCount, true);

        coverFlow.setOnItemClickListener(this);

        coverFlow.setSelection(imagePosition);

        // centers the image on coverflow to the same image selected in the previous activity
          coverFlow.setBackgroundResource(R.drawable.blanklarge); 
```

基本上问题是，一旦你在 xml 中声明了这些东西，一旦你使用 setCONntentView 对它们进行膨胀，它们就会自动创建。您可以使用 findViewById 获取那些已经创建的对象，而无需使用“x = new x()”再次创建它们

# c# - 在这种情况下是否需要锁定整数？

> ID：13695930
> 
> 赞同：3
> 
> 时间：2012-12-04T04:08:53.327
> 
> 标签：c#, .net, multithreading, concurrency, locking

我有一个“唯一”类型的整数。我这样使用它：

```
int unique=0;
public int GetUniqueId()
{
  return unique++;
} 
```

我知道我有点偏执，但这是一个原子操作，还是需要某种形式的锁定？这个函数将在一个非常并发的类中使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T04:10:25.240

不; 这显然*不是*原子的。
`x++`编译成三个独立的指令（加载、递增、存储），可以被其他线程中断。

如果这将在多个线程上运行，则应`Interlocked.Increment(ref unique)`改为调用（这是原子的）。
这个调用比常规增量要慢一些，比全锁快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:12:00.327

如果并发线程使用此方法，那么您必须处理通过放置锁来实现的并发性。

# ios - 您如何以编程方式调用视图控制器在情节提要中获取其视图？

> ID：13695931
> 
> 赞同：2
> 
> 时间：2012-12-04T04:08:53.520
> 
> 标签：ios, storyboard, viewcontroller

我正在使用一个 BookController 类，它使用页码来跟踪当前视图。目前我正在按需创建每个视图控制器并以编程方式编写代码。我想访问我在 StoryBoard（xib 文件）中创建的视图控制器，这样当我需要一个新页面时，它将访问我创建的第二个视图控制器。

```
// Provide a view controller on demand for the given page number 
```

- (id) viewControllerForPage: (int) pageNumber {

```
if ((pageNumber < 0) || (pageNumber > 31)) return nil;

if(pageNumber == 0){

      //here is where I want to access the entire xib file that the SecondViewController is connected with     
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
    SecondViewController *myVC = (SecondViewController *)[storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];

    myVC = [BookController rotatableViewController];

    return myVC;

     }
else if(pageNumber == 1){

// Establish a new controller
   UIViewController *controller = [BookController rotatableViewController];

// Add a text view
UITextView *textview = [[UITextView alloc] initWithFrame:(CGRect){.size = CGSizeMake(100.0f,100.0f)}];
textview.text = [NSString stringWithFormat:@"This is dedicated to people"];
textview.font = [UIFont fontWithName:@"Futura" size:18.0f];
textview.center = CGPointMake(475.0f, 700.0f);
[controller.view addSubview:textview];

     // Add a label
UILabel *textLabel = [[UILabel alloc] initWithFrame:(CGRect){.size = CGSizeMake(200.0f, 200.0f)}];
textLabel.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
textLabel.text = [NSString stringWithFormat:@"1"];
textLabel.font = [UIFont fontWithName:@"Futura" size:18.0f];
textLabel.center = CGPointMake(475.0f, 985.0f);
[controller.view addSubview:textLabel];

    // Add it as an image
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon@2x.png"]];
imageView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    imageView.center = CGPointMake(160.0f, 230.0f);
[controller.view addSubview:imageView];

return controller;
} 
```

> 只是不确定如何调用访问我创建的 xib 文件并将其放入第一页 (page=0)。第二页（page = 1）是我如何以编程方式绘制书中所有其他页面的示例。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T04:35:50.923

请记住，Storyboard 只是 NIB 的集合，它们只是实例化每个视图的层次结构并将出口连接到拥有的视图控制器。您不想自己实例化 Storyboard 以创建单个视图控制器。这样做是在应用程序已经启动并使用不同的实例运行时创建新实例。即使您确实将它们连接起来，它们也会连接到冗余的实例，而不是您想要的实际实例。

我要做的是为您将单独使用的 SecondViewController 创建一个单独的 NIB 文件。然后你需要把它连接在一起。如果此代码在您需要访问的实例中，您只需将其传递给 SecondViewController 上的属性。或者，也许您只是传递值，但很可能您希望设置一个委托属性并为 SecondViewController 定义一个协议，以回调创建它的实例。

对于您的代码，您只需使用以下代码加载 NIB。

```
SecondViewController *vc = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
vc.delegate = self; 
```

您只需要定义该委托以及可能需要将数据提供给新创建的视图控制器的任何属性。

下面是我最近使用 Storyboard 为 SideBar 界面创建的委托设置示例。我有一个位于 Home VC 中的 Header VC 的容器视图。这个 Header VC 可能就像您的 SecondViewController，因为我无法在 Storyboard 中连接它，所以我用代码完成了它。首先，我在 Header VC 上创建了一个委托属性。

```
@protocol IFHeaderDelegate;

@interface IFHeaderViewController : UIViewController

@property (nonatomic, assign) IBOutlet id<IFHeaderDelegate> delegate;

@end

@protocol IFHeaderDelegate <NSObject>

- (void)headerViewDidToggleSideBar:(IFHeaderViewController *)sender;

@end 
```

然后，当点击按钮时，我使用委托进行回调。（请注意，我使用 NSAssert 来验证委托的定义只是为了在我错过它时提醒我。）

```
#import "IFHeaderViewController.h"

@interface IFHeaderViewController ()

@end

@implementation IFHeaderViewController

- (IBAction)siderBarButtonTapped:(id)sender {
    NSAssert(self.delegate != nil, @"Delegate must be defined!");

    if (self.delegate != nil) {
        [self.delegate headerViewDidToggleSideBar:self];
    }
}

@end 
```

但是为了把它连接起来，我必须从 Home VC 中设置委托，而我无法从 Storyboard 中做到这一点。当在 prepareForSegue 中触发嵌入 segue 时，我所做的是在 Home VC 中设置它。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   DebugLog(@"segue.identifier: %@", segue.identifier);

   if ([@"HomeHeader" isEqualToString:segue.identifier]) {
       NSAssert([segue.destinationViewController isKindOfClass:[IFHeaderViewController class]], @"Destination VC must be the Header VC");
       IFHeaderViewController *headerVC = (IFHeaderViewController *)segue.destinationViewController;
       headerVC.delegate = self;
   }
} 
```

你可以在 GitHub 上找到完整的项目：[https ://github.com/brennanMKE/Interfaces/tree/master/SideBar](https://github.com/brennanMKE/Interfaces/tree/master/SideBar)

# objective-c - 如何设置 UITableView 单元格的文本标签

> ID：13695934
> 
> 赞同：0
> 
> 时间：2012-12-04T04:09:42.033
> 
> 标签：objective-c, uitableview, nsmutablearray

在我的应用程序中，我有一张地图，允许用户将图钉放到地图上。引脚对地址进行地理编码并将地址设置为其标题。我这样做是为了在删除注释时将它们存储在一个数组中。我有一个表格视图，我想在单元格中显示地址。我在 tableview 类中有一个数组，它指向第一个视图控制器中的数组，我需要以某种方式访问​​数组中的地址并将它们设置为单元格的文本标签。我已经让表格视图显示了与地图上的引脚一样多的单元格，但我不知道如何从数组中访问我需要的信息。这是一些帮助的代码。

这是第一个视图控制器：

```
@implementation P2OViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [_worldView setShowsUserLocation:YES];
    NSInteger mapTypeValue = [[NSUserDefaults standardUserDefaults]
                              integerForKey:P2OMapTypePrefKey];

    // Update the UI
    [mapTypeControl setSelectedSegmentIndex:mapTypeValue];

    // Update the map
    [self changeMapType:mapTypeControl];

    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]initWithTarget:self
                                                                                         action:@selector(press:)];
    [longPress setMinimumPressDuration:0.5f]; //user needs to press for 2 seconds
    [longPress setDelegate:self];
    [_worldView addGestureRecognizer:longPress];

    _annotationArray = [[NSMutableArray alloc]init];

    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc]init];
    [_worldView addGestureRecognizer:pan];
    number =  [NSNumber numberWithInt:0];

}

-(void)press:(UILongPressGestureRecognizer *)recognizer
{
    CGPoint touchPoint = [recognizer locationInView:_worldView];
    CLLocationCoordinate2D touchMapCoordinate = [_worldView convertPoint:touchPoint toCoordinateFromView:_worldView];

    geocoder = [[CLGeocoder alloc]init];
    CLLocation *location = [[CLLocation alloc]initWithCoordinate:touchMapCoordinate
                                                    altitude:CLLocationDistanceMax
                                          horizontalAccuracy:kCLLocationAccuracyBest
                                            verticalAccuracy:kCLLocationAccuracyBest
                                                   timestamp:[NSDate date]];
    [geocoder reverseGeocodeLocation:location
                   completionHandler:^(NSArray *placemarks, NSError *error) {
                       NSLog(@"reverseGeocoder:completionHandler: called");
                       if (error) {
                           NSLog(@"Geocoder failed with error: %@", error);
                       } else {
                           CLPlacemark *place = [placemarks objectAtIndex:0];
                           geocodedAddress = [NSString stringWithFormat:@"%@ %@, %@ %@", [place subThoroughfare], [place thoroughfare], [place locality], [place administrativeArea]];
                           if (UIGestureRecognizerStateBegan == [recognizer state]) {
                               value = [number intValue];
                               number = [NSNumber numberWithInt:value + 1];
                               addressPin = [[MapPoint alloc]initWithAddress:geocodedAddress coordinate:touchMapCoordinate
                                                                   title:geocodedAddress identifier:number];
                               NSLog(@"The identifier is %@", number);
                               [_annotationArray addObject:addressPin];
                               [_worldView addAnnotation:addressPin];
                               NSLog(@"The number of pins in the annotation array is: %u",_annotationArray.count);
                           }
                       }
                   }];
}

-(void)mapView:(MKMapView *)mapView
annotationView:(MKAnnotationView *)view
calloutAccessoryControlTapped:(UIControl *)control
{
    PinViewController *pvc = [[PinViewController alloc]init];
    [[self navigationController]pushViewController:pvc
                                      animated:YES];
    pvc.label.text = view.annotation.title;
}  

- (IBAction)bookmarkPressed:(id)sender
{
    P2OTableViewViewController *tvc = [[P2OTableViewViewController alloc]initWithStyle:UITableViewStyleGrouped];
    [tvc setValue:_annotationArray];
    [[self navigationController]pushViewController:tvc
                                      animated:YES];
}
@end 
```

这是我的 TableViewController

```
#import <UIKit/UIKit.h>
@class P2OViewController;

@interface P2OTableViewViewController : UITableViewController
{
    NSMutableArray *_pinArray;
    __weak P2OViewController *_pvc;
}

@property (readonly) UILabel *textLabel;
@property (weak,nonatomic) P2OViewController *pvc;
@property (strong,nonatomic) NSMutableArray *pinArray;

-(void)setValue:(NSMutableArray *)value;
@end

@implementation P2OTableViewViewController

@synthesize pinArray = _pinArray, pvc = _pvc;

- (id)init
{
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        _pinArray = [[NSMutableArray alloc]init];
    }
    return self;
}

-(void)setValue:(NSMutableArray *)value
{
   _pinArray  = value;
}

-(id)initWithStyle:(UITableViewStyle)style
{
    return [self init];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return _pinArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    return cell;
} 
```

所以基本上我希望数组中注释的标题成为单元格的文本标签。因此，如果数组中有 5 个引脚，我希望 5 个单元格具有相应的注释地址（标题属性）作为文本标签。我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:18:35.853

之前`return cell;`，您可以`cell.textLabel.text = [_pinArray objectAtIndex:indexPath.row]`确保从 _pinArray 中提取 title 属性。

# android - Android GCM：未在 onCreate() 方法上获取注册令牌

> ID：13695940
> 
> 赞同：3
> 
> 时间：2012-12-04T04:10:04.700
> 
> 标签：android, google-cloud-messaging, android-notifications

我在我的应用程序中嵌入了用于推送通知的 GCM。我面临一个非常奇怪的问题，第一次运行时我无法获得 GCM 注册令牌，但是当您第二次运行我的应用程序时，您将在控制台上打印注册 ID。我不知道我在做什么。这是我到目前为止所做的。

这是我要打印 GCM regID 的 onCreate() 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final String regId = GCMRegistrar.getRegistrationId(this);
    GCM_regID = regId;
            System.out.println("GCM regId: "+GCM_regID); 
```

在 onCreate() 中执行以下代码：

```
/**
     * Google Cloud Messaging - Getting server Url and device ID to send it
     * across Google server for the notification..
     */
    mGCMReceiver = new GCMReceiver();
    mOnRegisteredFilter = new IntentFilter();
    mOnRegisteredFilter.addAction(Constants.ACTION_ON_REGISTERED);

    if (Constants.SENDER_ID == null) {
        // mStatus.setText("Missing SENDER_ID");
        return;
    }
    if (Constants.SERVER_URL == null) {
        // mStatus.setText("Missing SERVER_URL");
        return;
    }

    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);

    if (!regId.equals("")) {
        sendIdToServer(regId);
    } else {
        GCMRegistrar.register(getApplicationContext(), Constants.SENDER_ID);
    }

    sendIdToServer(regId);

} 
```

按照教程之一的指导，通过这些方法将 GCM_regId 发送到服务器：

```
/**
 * GCM - sending the data in json format to server db
 * */
public void sendIdToServer(String regId) {
    (new SendRegistrationIdTask(regId)).execute();
    GCM_regID = regId;
}

private class GCMReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        String regId = intent
                .getStringExtra(Constants.FIELD_REGISTRATION_ID);
        token = regId;

    }
}

private final class SendRegistrationIdTask extends
        AsyncTask<String, Void, HttpResponse> {
    // private String mRegId;

    public SendRegistrationIdTask(String regId) {
        // mRegId = regId;
    }

    @Override
    protected HttpResponse doInBackground(String... regIds) {
        // String url = Constants.SERVER_URL + "/register";

        return null;
    }

    @Override
    protected void onPostExecute(HttpResponse response) {
        if (response == null) {

            return;
        }

        StatusLine httpStatus = response.getStatusLine();
        if (httpStatus.getStatusCode() != 200) {
            Log.e(Constants.TAG, "Status: " + httpStatus.getStatusCode());
            return;
        }
    }
} 
```

我不这么认为，我的问题需要 GCMIntentService 类。请调查一下并帮助我摆脱这个问题。

我可以在 onRegistered() 上的 GCMIntentService 类中打印。它是这样的：

```
@Override
protected void onRegistered(Context context, String regId) {
    Intent intent = new Intent(Constants.ACTION_ON_REGISTERED);
    intent.putExtra(Constants.FIELD_REGISTRATION_ID, regId);
    context.sendBroadcast(intent);
} 
```

我必须在 MainActivity 上的 onCreate() 上打印 regId。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T07:45:38.390

注册设备需要一些时间。因此，如果您在 onCreate() 中注册设备后立即尝试检索注册 ID，那么每次它都会返回一个空值。所以尝试在 onCreate() 中注册您的设备并在任何不同的活动/服务中检索 id（您可以从 GCMIntentService 类中检索 Id，也可以从 GCM 中检索 api）。GCM Intent Service 类的 Note 方法。

```
 protected void onRegistered(Context arg0, String arg1) {
    Logger.d(arg0, "REG ID="+arg1);
    regID = arg1;
} 
```

这是在 Reg 完成后调用的方法。因此，对于我的情况，regID 我将其作为静态字符串并在其他地方访问它。或者就像你想要活动 B 上的 regID 一样，最好在活动 A 上注册它并通过 GCMIntent 类的上述方法中的静态字符串检索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:30:09.590

第一次运行应用程序时没有获得 regID 的原因是因为您的应用程序还没有 regID，它需要向 GCM 服务器请求它。因此，当您`final String regId = GCMRegistrar.getRegistrationId(this);`第一次调用时，它将返回一个空字符串。但是，一旦您在 GCM 中注册，下次您进行该调用（下一次您的应用程序启动时）您的 regID 将被返回。GCM jar 只是将 regID 作为字符串存储在应用程序首选项中。

`GCMIntentService.OnRegistered()`当 GCM 服务器注册您的设备时，您将在被调用时知道它。在您的代码中，您正在使用您的 regID 广播一个意图`GCMIntentService.OnRegistered()`，我假设您想使用您的`GCMReceiver`(?) 处理该意图，尽管在您展示的代码示例中，我没有看到您创建类的实例或将其注册为接收器.

我认为您需要使用从意图中获得的 regID 进行`GCMReceiver.onReceive()`调用。`sendIdToServer()`例如

```
@Override
public void onReceive(Context context, Intent intent) {
    String regId = intent
            .getStringExtra(Constants.FIELD_REGISTRATION_ID);
    Log.i("regID: ", regId);
    sendIdToServer(regId);
} 
```

我们有一个您可能想要查看的[GCM/Airbop 客户端示例。](https://github.com/indigorose/airbop-client)它基于您**应该查看的**[GCM Demo 应用程序](http://code.google.com/p/gcm/)。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T14:40:10.337

如果您没有登录 Google 帐户，模拟器将无法工作。尝试使用有效的 Google 帐户 (gmail) 登录并查看。**

# php - 在 SQL 升序中按数值排序

> ID：13695946
> 
> 赞同：8
> 
> 时间：2012-12-04T04:10:47.693
> 
> 标签：php, mysql, sql-order-by

我正在尝试获得此输出。

```
MDT 1
MDT 2
MDT 3
MDT 11
MDT 44 
```

但是，这些值是按字母顺序排列的，所以 123 在 2 之前。

例子 ：

```
MDT 1
MDT 11
MDT 156
MDT 2
MDT 3
MDT 303
MDT 44 
```

等等。

我正在使用此代码，但它似乎不起作用。

```
SELECT * FROM file ORDER BY ABS(ID) ASC 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:19:17.210

如果您的 ID 总是包含前缀 as `MDT`，那么您可以使用它来根据您的要求进行排序：

```
SELECT * FROM File 
ORDER BY CAST(replace(ID, 'MDT ', '') AS UNSIGNED) ASC 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/339cd/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:31:02.590

像这样尝试它会根据数字排序：

```
select substr(id,4)*1 from file order by substr(id,4)*1 
```

它会给

1
2
3
11
44
​​ ...

如果您想要所有字段，请根据您的字符串长度尝试以下查询（**"substr(id,4)" 或 "substr(id,5)"** ）（例如：id= proj-001911 --> take SUBSTR(id, 6 ) *1) )

```
select * from file order by substr(id,4)*1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T04:14:54.300

试试那个片段

```
SELECT * FROM file ORDER BY ID + 0 ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T04:29:36.173

```
SELECT * FROM file
ORDER BY CONVERT(SUBSTRING(ID,5),UNSIGNED) ASC 
```

`SUBSTRING()`将提取之后的所有字符`'MDT '`并将剩余的子字符串更改为对其执行`CONVERT()`的无符号整数`ORDER BY`

**注意** `SUBSTR()`是 的同义词`SUBSTRING()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-10T19:23:38.837

我也在搜索它，但是就在阅读这里时，我突然想到了一个解决方案，如果该列只有数字作为数据，那么您需要在数据库表中进行修改并将该列定义为 INT 值输入，那么我确信你需要的东西都会完成。例如。`{SELECT * FROM file ORDER BY CONVERT(SUBSTRING(ID,5),UNSIGNED) ASC}`在这种情况下`Convert`是列，需要将其定义为`INT(5)`有效。

# iphone - 带滑动控件的缩放滚动视图

> ID：13695947
> 
> 赞同：0
> 
> 时间：2012-12-04T04:10:48.533
> 
> 标签：iphone, uiscrollview, uislider, zooming

我想使用滑动控件缩放滚动视图。在我的滚动视图中，我正在添加图像视图。

那么如何使用滑块控件进行缩放？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:48:14.860

我在 iPad 中使用此代码来放大和缩小图像。将滑块最小值设置为 1，最大值设置为 3，当前值设置为 0.1。

在此滑块的值更改之后，只需调用下面的方法。

对于前。看到这段代码：

```
- (void)viewDidLoad
{
    UISlider *yourSlider = [[UISlider alloc]initWithFrame:CGRectMake(300, 100, 300, 23)];
    [yourSlider setMinimumValue:1];
    [yourSlider setMaximumValue:3];
    [yourSlider setValue:0.1];

   // Its zoom scroll view in 3x scale
    [yourSlider addTarget:self action:@selector(scaleOfImage:) forControlEvents:UIControlEventValueChanged];
} 
```

并将此波纹管方法粘贴到您的`.m`文件中

```
-(IBAction)scaleOfImage:(id)sender
{
        // if you want to zoom UIImageView then use bellow code...and set slider value max 900 and min 100 
        //yourImageView.frame=CGRectMake(yourImageView.frame.origin.x, yourImageView.frame.origin.y, yourSlider.value,yourSlider.value);
        //[yourImage setCenter:CGPointMake(500, 400)];

         // if you want to zoom the scrollview then use this bellow code which in comment..

        [yourScrollView setZoomScale:yourSlider.value]; // here change the value of slider
} 
```

# amazon-rds - 复制 Amazon RDS 用于非实时支持目的

> ID：13695948
> 
> 赞同：0
> 
> 时间：2012-12-04T04:10:52.653
> 
> 标签：amazon-rds

我们有一个 Web 应用程序托管在 EC2（Ubuntu 中的 Apache）上，并带有 RDS（多可用区）中的 MySQL DB。我们计划使用另一个应用程序实例，我们的支持团队将主要使用它来分析某些 LIVE 问题。为此，我们希望在另一个实例中拥有 LIVE DB 数据的副本，最好是在另一个 RDS 实例中。这是我们的方法：

1.  获取最新的 RDS 快照
2.  创建一个新的 RDS 实例，并将 RDS 快照复制到其中
3.  设置应用程序配置以将数据库指向上面创建的新 RDS 实例

您能否分享您对这种方法是否可行或有更好的方法的评论？

顺便说一句，我检查了以下stackoverflow问题：

[如何使用 RDS 复制数据库](https://stackoverflow.com/questions/3804913/how-to-copy-a-database-using-rds)

[Amazon RDS 副本](https://stackoverflow.com/questions/11587199/amazon-rds-replica)

在这两个问题中，都建议使用 mysqldump。但在我的情况下，数据库大小会很大，mysqldump 可能会降低 LIVE 性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:18:07.820

看看 AWS 只读副本。请参阅[http://aws.amazon.com/rds/mysql/#Read_Replica](http://aws.amazon.com/rds/mysql/#Read_Replica)

# ruby - mongoid 未初始化常量 CarrierDomain (NameError)

> ID：13695950
> 
> 赞同：1
> 
> 时间：2012-12-04T04:11:01.980
> 
> 标签：ruby, sinatra, mongoid

我发现[了另一个类似的问题](https://stackoverflow.com/questions/13271365/mongoid-uninitialized-constant-appmongo-nameerror)，并认为我正在遵循[此处](http://mongoid.org/en/mongoid/docs/installation.html)引用的指示，但仍然遇到此错误。

根据我在我的红宝石脚本中调用的[说明](http://mongoid.org/en/mongoid/docs/installation.html)`Mongoid.load!("path/to/your/mongoid.yml")`，所以我不认为是这样。

也许，根据来自的错误消息`inflector`，这是我如何定义 CarrierDomain 的问题。我正在引用 Sinatra 脚本中的 rails 模型。它位于一个名为carrier_domain.rb 的模型文件中，该类被定义为CarrierDomain ( `class CarrierDomain`)。事实上，这是整个类的定义（有点小）：

```
class CarrierDomain
  include Mongoid::Document
  embedded_in :carrier
  field :country
  field :name
  field :prefix, default: ''
end 
```

这是我收到的错误消息：

```
/Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize': uninitialized constant CarrierDomain (NameError)
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/metadata.rb:606:in `klass'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/builder.rb:39:in `klass'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/builders/embedded/many.rb:25:in `block in build'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/builders/embedded/many.rb:23:in `each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/builders/embedded/many.rb:23:in `build'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/accessors.rb:26:in `__build__'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/accessors.rb:156:in `block (3 levels) in getter'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/accessors.rb:156:in `block (2 levels) in getter'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/relations/accessors.rb:155:in `block in getter'
    from /opt/cmf/app/models/carrier.rb:120:in `to_email_addresses'
    from mta_connector.rb:151:in `block in <main>'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/contextual/mongo.rb:645:in `yield_document'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/contextual/mongo.rb:134:in `block (2 levels) in each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/moped-1.2.7/lib/moped/query.rb:78:in `block in each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/moped-1.2.7/lib/moped/cursor.rb:26:in `block in each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/moped-1.2.7/lib/moped/cursor.rb:26:in `each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/moped-1.2.7/lib/moped/cursor.rb:26:in `each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/moped-1.2.7/lib/moped/query.rb:77:in `each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/moped-1.2.7/lib/moped/query.rb:77:in `each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/contextual/mongo.rb:133:in `block in each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/contextual/mongo.rb:604:in `selecting'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/contextual/mongo.rb:132:in `each'
    from /Users/arigold/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.10/lib/mongoid/contextual.rb:18:in `each'
    from mta_connector.rb:139:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:40:52.153

我必须在我的 Sinatra 脚本中明确要求“carrier_domain”。

我原以为它会知道获取文件，因为它在 rails 控制台中工作（也就是说，我不需要在 rails 控制台中要求它）。唔。

Anyhoo，将`require 'carrier_domain'`（即未初始化的常量）添加到我的 Sinatra 脚本中有效。

# cocoa - Cocoa ScriptingBridge 输入轮询

> ID：13695953
> 
> 赞同：0
> 
> 时间：2012-12-04T04:11:23.090
> 
> 标签：cocoa, input, polling, scripting-bridge

我正在尝试使用 ScriptingBridge 编写一个小型 iTunes 控制器。问题是找到一种在发生任何更改时获得通知的有效方法。我的第一个方法是循环轮询输入并继续检查差异。但我认为必须有一种更有效的方式来获得有关输入的通知！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:54:51.050

当某些事情发生变化时，iTunes 会发出通知，因此只需在 AppDelegate 的 init 方法中注册即可。这是一个例子......

```
[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(receivediTunesNotification:) name:@"com.apple.iTunes.playerInfo" object:nil]; 
```

您的方法“receivediTunesNotification:”中的实际通知对象将包含有关更改的信息。

# licensing - 无耻克隆专有软件是否存在任何法律或许可问题？

> ID：13695954
> 
> 赞同：2
> 
> 时间：2012-12-04T04:11:27.863
> 
> 标签：licensing, cloning

我真的很想使用某种技术工具，但那家伙想为此收取超过 100 美元的费用。有足够的动力让我自己写。

克隆他的程序，功能和外观，一切并开源它有什么问题，即使它是一个公然的副本？我没有计划破解他的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:17:17.540

我不是律师，这也不是法律建议，但我认为你基本上可以侥幸逃脱，只要你真正自己做所有的东西并且不侵犯任何商标。

Lotus v Borland 说您不能对用户界面的功能拥有版权。但是，当然，除非您准备好打昂贵的诉讼，否则这实际上可能对您没有帮助。

此外，另一件需要注意的大事是专利。如果其中的任何内容已获得专利，则您必须对其进行许可或不使用该功能。

# javascript - 页脚使用 .slideUp 向上滑动，然后向下滑动

> ID：13695969
> 
> 赞同：10
> 
> 时间：2012-12-04T04:12:57.833
> 
> 标签：javascript, jquery, jquery-ui, slidedown, slideup

我有下面的jQuery .slideUp 和.slideDown 函数，当到达`#showfootershop`浏览器窗口底部的div 时，`#footershop`div 向上滑动然后立即向下滑动。

当 位于浏览器窗口的底部时，我怎样才能`#footershop`保持“向上”且可见，`#showfootershop`并且在用户向上滚动浏览器窗口之前不会向下滑动？

**小提琴：http:** [//jsfiddle.net/8PUa9/1/](http://jsfiddle.net/8PUa9/1/)

jQuery：

```
$(window).scroll(function(){
/* when reaching the element with id "showfootershop" we want to
show the slidebox. */

    var distanceTop = $('#showfootershop').offset().top - $(window).height();

    if  ($(window).scrollTop() > distanceTop)
        $("#footershop").slideUp();
    else
        $("#footershop").slideDown();

}); 
```

*页脚中的html：*

```
<div id="showfootershop"></div>
<div id="footershop">
    <h1>Shop Links</h1>
</div>
</body>
</html> 
```

CSS：

```
#footershop {
   height:35px;
   width:100%;
   display: none;
   z-index: 2;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:27:53.253

使用slidingUp 和slidingDown 两个函数，并在显示滑块和隐藏滑块后切换它们。

```
$(function() {

    var slideUp = function() {
        if ($(window).scrollTop() + $(window).height() >= $(document).height()) {
            console.log('At bottom!!');
            //toggle the handlers
            $("#footershop").slideDown(function() {
                $(window).off('scroll', slideUp).on('scroll', slideDown);
            });
        }
    };

    var slideDown = function() {
        if ($(window).scrollTop() + $(window).height() < $(document).height()) {
            //toggle the handlers
            $("#footershop").slideUp(function() {
                $(window).off('scroll', slideDown).on('scroll', slideUp);
            });
        }
    };

    $(window).on('scroll', slideUp);
});​ 
```

编辑：我认为您遇到的主要问题是#footershop 在显示时增加 document.height 并在隐藏时减少，这是正确的。这会导致额外的滚动事件，从而产生不良行为。

~~检查这个小提琴：我部分修复了这个。~~

~~[http://jsfiddle.net/BuddhiP/8PUa9/8/](http://jsfiddle.net/BuddhiP/8PUa9/8/)~~

检查此 JSBin 版本以获取固定版本：http: [//jsbin.com/axobow/2](http://jsbin.com/axobow/2)

我所做的主要事情是#footershop 现在是绝对定位的，因此在显示或隐藏时它不会导致文档大小发生变化，这在这种情况下很重要，就好像 document.height() 改变它会影响你的计算一样。

~~尽管小提琴按预期工作，但 div 并未位于底部。我希望你能解决这个问题。~~

希望这可以帮助。

注意：您需要使用全高窗口测试小提琴，否则您将看不到页脚向上滑动，因为它显示在文本中间的某个位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:56:28.110

我不确定您未接受的其他答案有什么问题，但这是我的：

**[JSFiddle](http://jsfiddle.net/8PUa9/32/)**

JS：

```
$(window).scroll(function() {

    var distanceTop = $('#showfootershop').offset().top - $(window).height();

    if ($(window).scrollTop() >= distanceTop - 20) {
        $("#footershop").animate({
            'height': '35px'
        }, 'fast');
    }
    else {
        $("#footershop").animate({
            'height': '0px'
        }, 'fast');
    }
});​ 
```

CSS：

```
#footershop {
    height:0px;
    width:100%;
    z-index: 2;
    background:#00ffff;
    position: absolute;
    bottom:0;
    left:0;
    overflow:hidden;
}
body {
    position:relative;   
} 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T02:20:08.603

所有这些 jQuery slideUp/slideDown 的替代方法是使用 CSS 来处理它。

我们检测用户何时到达您的`#showfootershop`元素，然后从页脚添加或删除一个类：

```
$(window).scroll(function()
{

    var distanceTop = $('#showfootershop').offset().top - $(window).height();

    if($(document).scrollTop() >= distanceTop)
         $('#footershop').addClass("show");
    else
         $('#footershop').removeClass("show");
} 
```

然后我们使用 CSS 来显示或隐藏页脚，具体取决于该类的存在：

```
#footershop 
{
    position: fixed;
    height: 0px;
    z-index:999;
    bottom: 0;
    overflow:none;

   -moz-transition:all 0.5s ease-in-out;
   -o-transition:all 0.5s ease-in-out;
   transition:all 0.5s ease-in-out;
   -webkit-transition:all 0.5s ease-in-out;
}
#footershop.show
{
    height:35px;

   -moz-transition:all 0.5s ease-in-out;
   -o-transition:all 0.5s ease-in-out;
   transition:all 0.5s ease-in-out;
   -webkit-transition:all 0.5s ease-in-out;
} 
```

正如您在上面看到的，当`.show`类位于页脚时，我们更改页脚元素的高度以显示它。然后使用 CSS 过渡来为这种变化设置动画。

这个方法的好处是它非常轻量级和高效（特别是如果你有很多 jQuery 动画同时工作），你可以轻松地为各种不同的变化设置动画，比如不透明度、文本和背景颜色等。根本不需要触摸你的 JS。

# jsFiddle

这是你的 jsFiddle 修改 [http://jsfiddle.net/DigitalBiscuits/8PUa9/29/](http://jsfiddle.net/DigitalBiscuits/8PUa9/29/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T04:56:10.853

`slideUp()`也将隐藏元素和隐藏元素的偏移量，`[0,0]`因此隐藏的即时页脚`distanceTop`为负数。您可以将高度设置为零并获得相同的视觉结果，并且由于您没有隐藏页脚，因此它仍然具有相同的`top`偏移量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T03:27:18.597

我建议在向上滚动和向下滚动代码之间放置一个小缓冲区。

我对您的代码进行了微调，以放入 100px 的缓冲区：

**Javascript**

```
$(window).scroll(function() {

    var distanceTop = $('#showfootershop').offset().top - $(window).height();

    if ($(window).scrollTop() >= distanceTop) {
        $("#footershop").slideDown();
    }
    else if ($(window).scrollTop() < (distanceTop - 100)) {
        $("#footershop").slideUp();
    }
}); 
```

**[演示](http://jsfiddle.net/8PUa9/30/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T03:13:15.613

尝试滚动到某个元素太麻烦了，只需使用页面底部即可。

```
$(window).scroll(function() {
    if ($(window).scrollTop() + $(window).height() == $(document).height()) {
        $("#footershop").slideDown();
    }
    else {
        $("#footershop").slideUp();
    }
});​ 
```

[jsfiddle](http://jsfiddle.net/8PUa9/30/)

# cocoa-touch - iPhone 5 中的应用程序何时会被信箱化？

> ID：13695970
> 
> 赞同：0
> 
> 时间：2012-12-04T04:13:08.677
> 
> 标签：cocoa-touch, iphone-5

在什么情况下，iPhone 5 上的应用会在信箱中显示？ie iPhone 5 使用什么标准来做到这一点？应该采取哪些步骤来防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:29:02.643

找到了答案。本质上，如果您在项目中包含 Default-568h@2x.png，您的应用将不会被信箱化。如果你排除，它会。

# mysql - 插入没有值的表

> ID：13695973
> 
> 赞同：2
> 
> 时间：2012-12-04T04:13:28.297
> 
> 标签：mysql

我有一个只有两列的表：

```
+------------------+-------------+----------------------------+
|  user_id         |  INT        |  AUTO_INCREMENT            |
+------------------+-------------+----------------------------+
|  user_timestamp  |  TIMESTAMP  | DEFAULT CURRENT_TIMESTAMP  |
+------------------+-------------+----------------------------+ 
```

现在我很困惑我将如何构建我的`INSERT`，因为所有值都有默认值。我有这个，但似乎不起作用`$query = "INSERT INTO tt_users (user_id) VALUES ()";`。我只想让 MySQL 插入一个新的`user_id`，我将使用`lastInsertID`. 对不起，这是我第一次这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:15:39.983

```
INSERT INTO tt_users (user_id) VALUES (null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:16:38.587

你不能插入user_id ..那个是自动生成的。这就是为什么你有AUTO_INCREMENT ..你只能插入时间戳，即使这是可选的，因为你确实分配了一个默认值......

# asp.net - 根据 ASP.NET 中的值更改字体样式或突出显示数据集条目？

> ID：13695974
> 
> 赞同：1
> 
> 时间：2012-12-04T04:13:31.230
> 
> 标签：asp.net, sql

我有一个在 ASP.NET 上运行的网页，它发送 SQL 选择语句以在客户端收集和填充数据集。加载网页时，会遍历数据集的每个数据行并显示在网页中的表格上。我希望检查某些列，以便某些行在其任何条目中包含 null 时会突出显示（或至少更改样式颜色）。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:57:45.187

You can use jquery to check whether the columns are empty on not.And can give specific colours or effects to that rows.as you have not given an html sample i cant give you a sample code.Thinks this will help you to solve your problem.

# objective-c - 未找到 DTCoreText 文件

> ID：13695981
> 
> 赞同：2
> 
> 时间：2012-12-04T04:14:13.817
> 
> 标签：objective-c, ios

我正在尝试使用`DTCoreText`，并且已按照 T 的设置文档进行操作。一切似乎都在正常工作，并且我的项目可以正确构建，但是，当我尝试导入一些类以在我的视图控制器中尝试它们时，我得到的文件不是成立。

为简单起见，我没有对这个项目进行任何更改，它是一个单视图裸骨模板，在遵循github`DTCoreText`上的设置说明后配置为使用它`DTCoreText's`

[我在这里发布了我的项目](http://dl.dropbox.com/u/37430783/NativeReader%20iOS/NativeReader.zip)的压缩版本：

我在这里缺少什么吗？

非常感谢任何和所有帮助 -

# r - 在 R 中：如何在线性模型中插入自变量的值？

> ID：13695982
> 
> 赞同：1
> 
> 时间：2012-12-04T04:14:22.647
> 
> 标签：r, parameter-passing, linear-regression

我正在使用具有 3 个变量和交互作用的线性模型。与其手动输入公式并输入每个变量的值，比如 XY 和 Z，我如何告诉 R 给我给定 XY 和 Z 的预测值？

即如果

```
model=lm(VP~G+P+Z+G:Z+P:Z+G:P+P:G:Z,data=xyz)

'[output with beta coefficients]' 
```

如何在不手动输入每个术语的单独 beta 系数的情况下将 GP 和 Z 的值传递给线性模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:18:41.587

使用`predict()`. 阅读帮助页面上的所有详细信息，可以通过`?predict`. 这是一个使用示例的示例`?lm`

```
ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
group <- gl(2,10,20, labels=c("Ctl","Trt"))
weight <- c(ctl, trt)
lm.D9 <- lm(weight ~ group) 
```

并预测：

```
> predict(lm.D9, newdata=data.frame(group = c("Ctl", "Trt")))
    1     2 
5.032 4.661 
```

请注意`newdata`参数的使用以及我如何传递要预测的新值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:30:41.117

如果您想从具有所有二（和三）向交互的模型中进行预测，您的模型可以简化为

```
 model=lm(VP ~ (G+P+Z)^3, data=xyz)   # see ?formula 
```

当您从“模型”对象进行预测时，您需要提供一个数据框，其中包含名为 G、P 和 Z 的值

```
pred123 <- predict(model, newdata=data.frame(G=1, P=2, Z=3) ) 
```

如果您想为单个值的特定选择构建所有可能的值组合，expand.grid 函数将非常有用：

```
 pred.all <- predict(modlel, newdat=expand.grid(G;1:3, P=2:5, Z=6:8) ) 
```

# perl - 如何按值从哈希中获取顶部键

> ID：13695984
> 
> 赞同：1
> 
> 时间：2012-12-04T04:14:32.600
> 
> 标签：perl, hash, key-value

我有一个哈希值，按从大到小排序。我将如何获得前 5 名？这里有一篇文章谈到只获得一个值。

[从 Perl 中的哈希中获取具有最高值的键的最简单方法是什么？](https://stackoverflow.com/questions/2886872/what-is-the-easiest-way-to-get-a-key-with-the-highest-value-from-a-hash-in-perl)

我明白了，所以可以说让这些值将它们添加到数组中并删除散列中的元素，然后再次执行该过程？

似乎应该有一种更简单的方法来做到这一点。

我的哈希称为 %words。

已编辑取出代码作为问题的答案，而实际上并不需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T05:40:42.150

您的问题是如何从哈希中获取五个最高值。你有这个代码：

```
my @keys = sort {
    $words{$b} <=> $words{$a}
    or
    "\L$a" cmp "\L$b"
} keys %words; 
```

你有你的排序哈希键。从那里拿五个最上面的钥匙？

```
my @highest = splice @keys, 0, 5;  # also deletes the keys from the array
my @highest = @keys[0..4];         # non-destructive solution 
```

还有对您的代码的一些评论：

```
open( my $filehandle0, '<', $file0 ) || die "Could not open $file0\n"; 
```

最好`$!`在 die 语句中包含错误消息，以获取有关打开失败原因的有价值信息。

```
for (@words) {
    s/[\,|\.|\!|\?|\:|\;|\"]//g;
} 
```

就像我在评论中所说的那样，您不需要转义字符或在字符类括号中使用交替。使用任一：

```
s/[,.!?:;"]//g for @words;   #or
tr/,.!?:;"//d  for @words; 
```

下一部分有点奇怪。

```
my @stopwords;
while ( my $line = <$filehandle1> ) {
    chomp $line;
    my @linearray = split( " ", $line );
    push( @stopwords, @linearray );
}
for my $w ( my @stopwords ) {
    s/\b\Q$w\E\B//ig;
} 
```

您从文件中读取停用词...然后从 ? 中删除停用词`$_`？你现在`$_`还在使用吗？此外，您正在`@stopwords`循环头中重新声明数组，这实际上意味着您的新数组将为空，并且您的循环将永远不会运行。这个错误似乎是无声的，所以你可能永远不会注意到。

```
my %words = %words_count; 
```

在这里，您制作了 的副本`%words_count`，这似乎是多余的，因为您再也不会使用它了。如果散列很大，这会降低性能。

```
my $key_count = 0;
$key_count = keys %words; 
```

这可以在一行中完成：`my $key_count = keys %words`. 在我看来，更具可读性。

```
$value_count = $words{$key} + $value_count; 
```

也可以用`+=`运算符缩写：`$value_cont += $words{$key}`

使用严格和警告非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T04:22:13.193

如果性能不是什么大问题

```
(sort {$words{$a} <=> $words{$b}} keys %words)[0..4]) 
```

如果您绝对需要杀手级的速度，那么在 5 次迭代后终止的选择排序可能对您来说是最好的选择。

```
my @results;
for (0..4) {
  my $maxkey;
  my $max = 0;

  for my $key (keys %words){
    if ($max < $words{$key}){
      $maxkey = $key;
      $max = $words{$key};
     }
  }
  push @results, $maxkey;
  delete $words{$maxkey};
}

say join(","=>@results); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:20:43.283

有一个 CPAN 模块，[Sort::Key::Top](https://metacpan.org/module/Sort%3a%3aKey%3a%3aTop)。它有一个直接的接口和一个高效的 XS 实现：

```
use Sort::Key::Top qw(rnkeytop);

my @results = rnkeytop { $words{$_} } 5 => keys %words; 
```

# android - 使用意图从活动启动一个片段活动

> ID：13695988
> 
> 赞同：3
> 
> 时间：2012-12-04T04:15:06.657
> 
> 标签：android, android-intent, android-fragments

我有一个主要活动。其中我有一些操作按钮。我想当我按下一个按钮时，一个新的活动将开始，其中包含两个片段。但是当我点击按钮时，它给我错误前关闭。我正在通过意图从活动导航到另一个活动。这是我的意图代码

```
if(v.getId()==R.id.Search)
{
    Intent i=new Intent(MainActivity.this,Search.class);
    startActivity(i);
} 
```

这是我的日志文件

```
12-04 09:32:43.501: E/Trace(768): error opening trace file: No such file or directory (2)
12-04 09:32:46.812: E/AndroidRuntime(768): FATAL EXCEPTION: main
12-04 09:32:46.812: E/AndroidRuntime(768): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.student_managment/com.example.student_managment.Search}: android.view.InflateException: Binary XML file line #4: Error inflating class fragment
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.os.Looper.loop(Looper.java:137)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-04 09:32:46.812: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
12-04 09:32:46.812: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:511)
12-04 09:32:46.812: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-04 09:32:46.812: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-04 09:32:46.812: E/AndroidRuntime(768):  at dalvik.system.NativeStart.main(Native Method)
12-04 09:32:46.812: E/AndroidRuntime(768): Caused by: android.view.InflateException: Binary XML file line #4: Error inflating class fragment
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-04 09:32:46.812: E/AndroidRuntime(768):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.Activity.setContentView(Activity.java:1867)
12-04 09:32:46.812: E/AndroidRuntime(768):  at com.example.student_managment.Search.onCreate(Search.java:13)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.Activity.performCreate(Activity.java:5008)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-04 09:32:46.812: E/AndroidRuntime(768):  ... 11 more
12-04 09:32:46.812: E/AndroidRuntime(768): Caused by: java.lang.ClassCastException: com.example.student_managment.Lower_frag cannot be cast to android.support.v4.app.Fragment
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.support.v4.app.Fragment.instantiate(Fragment.java:363)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:264)
12-04 09:32:46.812: E/AndroidRuntime(768):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
12-04 09:32:46.812: E/AndroidRuntime(768):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:22:39.980

该错误`Caused by: java.lang.ClassCastException: com.example.student_managment.Lower_frag cannot be cast to android.support.v4.app.Fragment`意味着您可能声明了一个不是片段的片段（在您的 Search.class 中膨胀的 xml 布局中）。检查 Search.class 中膨胀的布局

# c# - 在 Metro App 中动态绑定图像

> ID：13695989
> 
> 赞同：5
> 
> 时间：2012-12-04T04:15:08.793
> 
> 标签：c#, xaml, microsoft-metro

我在 ImageBrush 中有一个 ImageSource，它将根据我的数据动态更改。

问题是，我无法直接访问 ImageBrush 的名称，因为它位于 DataTemplate 中。我知道这是个坏主意，因为在 UI 中存储数据是个坏习惯。

如果有人知道如何使用 Image 上的数据绑定来解决这个问题，我将不胜感激。谢谢！！

```
<DataTemplate>
  <StackPanel Width="250" Height="180" VerticalAlignment="Bottom">
    <StackPanel.Background>
       <ImageBrush ImageSource="{Binding ???}"/>
    </StackPanel.Background>
    ........
  </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:23:23.460

您可以创建一个将路径转换为图像的转换器：

```
public sealed class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        try
        {
            return new BitmapImage(new Uri((string)value));
        }
        catch 
        {
            return new BitmapImage();
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后在 XAML 中：

```
< Image Source="{Binding Path=ImagePath, Converter={StaticResource ImageConverter}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:27:58.570

为什么不使用属性并将控件绑定到属性！您可以将图像的路径设置到属性中，然后将元素绑定到属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:33:21.063

您需要`BaseUri`在`new Uri(BaseUri, Url)`

```
public sealed class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        try
        {
            return new BitmapImage(new Uri(BaseUri, (string)value));
        }
        catch 
        {
            return new BitmapImage();
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

还要在 XAML 代码中指定转换器

```
<Page:Resources>
     <local:ImageConverter x:Key="imageConverter"/>
</Page:Resources> 
```

和转换器在你`Image`

```
<Image Source="{Binding Path=ImagePath, Converter={StaticResource imageConverter}}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T05:11:12.970

试试这个：

```
<Image> 
    <Image.Source> 
        <BitmapImage UriSource=”{Binding ImagePath}” /> 
   </Image.Source> 
</Image> 
```

# sas - SAS 日期或数字数据？

> ID：13695992
> 
> 赞同：1
> 
> 时间：2012-12-04T04:15:26.280
> 
> 标签：sas

```
%let months_back = %sysget(months_back);

data;
        m = intnx('month', "&sysdate9"d, -&months_back - 2, 'begin');
        m = intnx('day', put(m, date9.), 26, 'same');
        m2back = put(m, yymmddd10.);
        put m2back;
run; 
```

> 注意：字符值已在以下给出的位置转换为数值：（行）：（列）。5:19 注意：无效的数字数据 '01OCT2012' ，位于第 5 行第 19 列。

我真的不知道为什么会出错。日期字符串是数字数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:09:42.547

PUT(m, date9.) 是这里的罪魁祸首。INTNX 的第二个参数必须是数字（即日期），PUT 函数总是返回一个字符值，在本例中为“01OCT2012”。只需完全取出 PUT 功能，代码就可以工作了。

```
m = intnx('day', m, 26, 'same'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:07:43.073

SAS 将日期存储为数字 - 实际上并没有真正独立的类型。SAS 日期是自 1960 年 1 月 1 日以来的天数，因此今天略高于 19000 天。日期格式与任何日期计算完全无关 - 它仅用于人类可读性。

你说的那一点：

```
"&sysdate9"d 
```

实际上将字符串“01JAN2012”转换为数值（18304）。

实际上，有一种更快的方法可以完成您正在尝试做的事情。因为天对应于 SAS 中的整数，所以要增加一天，您只需将值加一即可。

例如：

```
%let months_back=5;
data _null_;
        m = intnx('month', today(), -&months_back - 2, 'begin');
        m2 = intnx('day', m, 26, 'same');
        m3 = intnx('month',"&sysdate9"d, -&months_back - 2)+26;
        m2back = put(m2, yymmdd10.);
        put m= date9\. m2= yymmdd10\. m3= yymmdd10.;
run; 
```

M3 通过使用 MONTH 间隔，然后添加 26 一步完成整个计算。 INTNX('day'...) 基本上没有意义，除非使用该函数有其他价值（例如使用移位索引）。

您还可以在此处的 PUT(log) 语句中看到格式的使用 - 您不必将其放入字符值然后将其放入日志以获取格式化值，只需放入 (var) (format .); - 并以这种方式尽可能多地串在一起。

此外，“&sysdate9.”d 不是获取当前日期的最佳方式。&系统日期。仅在 SAS 启动时定义，因此如果您的会话运行了 3 天，您将不会在当天（尽管这可能是需要的？）。相反，TODAY() 函数获取当前日期，无论您的 SAS 会话运行了多长时间，都是最新的。

最后 -`data _null_;`如果您不想要数据集，我建议您（如果您确实想要，请命名结果数据集）。 `data _null_`不创建数据集。数据; 只需创建越来越多的数据集（data1、data2、...），这些数据集会迅速填满您的工作空间，让您很难分辨出您在做什么。

# android - 如何删除android服务类中的位置更新？

> ID：13695994
> 
> 赞同：5
> 
> 时间：2012-12-04T04:15:30.367
> 
> 标签：android, service, gps, locationlistener

我有一个位置监听器类和一个服务类。在我的位置侦听器课程中，我正在启动 GPS，并且我每 10 秒不断获取位置。我的要求是每天晚上 7 点之前停止 GPS 位置更新。我正在尝试使用 removeupdates 停止服务中的 GPS 更新，但它不起作用。我怎样才能做到这一点。下面是我的代码。

位置GPS.java

```
public class LocationGPS extends Activity implements  LocationListener {
@Override  
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
public static LocationManager locationManager;     
locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10*1000 , 0 ,this);
Intent myIntent = new Intent(this, PIService.class);
            PendingIntent   sevenPMIntent = PendingIntent.getService(this, 0, myIntent, 0);

            AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE); 
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.set(Calendar.HOUR_OF_DAY, 19);
            calendar.set(Calendar.MINUTE, 0);
            calendar.set(Calendar.SECOND, 0); 
            //alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);
            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 24*60*60*1000, sevenPMIntent);

}

@Override     
public void onLocationChanged(Location location) {      
                Toast.makeText(getApplicationContext(), "got new location", Toast.LENGTH_SHORT).show();

}    

@Override  
public void onProviderDisabled(String provider) {

}   

@Override
public void onProviderEnabled(String provider) {

}
@Override
public void onStatusChanged(String provider, int status, Bundle extras) {

}      
} 
```

PIService.java

```
public class PIService extends Service{

@Override    
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub  
    return null;
}        
@Override     
public int onStartCommand (Intent intent, int flags, int startId)
{     
    super.onStartCommand(intent, flags, startId); 
    //Get the system current time.
    Date dt = new Date();
    int hours = dt.getHours();   

    //Compare the current time with 7PM 
    if(hours == 19){
        //if current time is 7PM
        Toast.makeText(getApplicationContext(), "Now the time is 7PM", Toast.LENGTH_LONG).show(); 
        LocationGPS.locationManager.removeUpdates(new LocationGPS()); //here is the place i am trying to remove the location updates.

    } 
    }

    return START_STICKY;      
}  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:27:55.593

```
public void onDestroy() {
    Log.e(TAG, "onDestroy");
    super.onDestroy();
    if (mLocationManager != null) {
        for (int i = 0; i < mLocationListeners.length; i++) {
            try {
                mLocationManager.removeUpdates(mLocationListeners[i]);
            } catch (Exception ex) {
                Log.i(TAG, "fail to remove location listners, ignore", ex);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:25:28.390

```
 public void onDestroy() 
 { 
 locationManager.removeUpdates(this); 
super.onDestroy(); 
 } 
```

# c++ - 检查范围内容差是否相等的最快方法？

> ID：13695996
> 
> 赞同：2
> 
> 时间：2012-12-04T04:15:45.233
> 
> 标签：c++, algorithm, optimization, comparison

以下函数比较两个数组，如果考虑到容差，所有元素都相等，则返回 true。

```
// Equal
template<typename Type>
bool eq(const unsigned int n, const Type* x, const Type* y, const Type tolerance)
{
    bool ok = true;
    for(unsigned int i = 0; i < n; ++i) {
        if (std::abs(x[i]-y[i]) > std::abs(tolerance)) {
            ok = false;
            break;
        }
    }
    return ok;
} 
```

有没有办法打败这个功能的表现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:26:45.077

在循环外计算 abs(tolerance)。

您可以尝试将循环展开为“主要”循环和“次要”循环，其中“次要”循环的唯一跳转是到其开头，“主要”循环具有“if”和“break”内容。在次要循环中执行类似`ok &= (x[i]-y[i] < abstol) & (y[i]-x[i] < abstol);`操作以避免分支 - note`&`而不是`&&`.

然后部分展开并矢量化次循环。然后专门针对您实际使用的任何浮点类型，并使用您平台的 SIMD 指令来执行次要循环。

当然，在这样做之前要三思，因为它会增加代码大小，从而对可维护性产生不良影响，有时还会对系统其他部分的性能产生不良影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:07:18.777

您可以避免那些返回变量分配，并预先计算公差的绝对值：

```
// Equal
template<typename Type>
bool eq(const unsigned int n, const Type* x, const Type* y, const Type tolerance) {
    const Type absTolerance = std::abs(tolerance);
    for(unsigned int i = 0; i < n; ++i) {
        if (std::abs(x[i]-y[i]) > absTolerance) {
            return false;
        }
    }
    return true;
} 
```

此外，如果您知道容差始终为正，则无需计算其绝对值。如果没有，您可以将其作为前提条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:45:17.963

我会这样做，您也可以使用类函子滚动 C++03 版本，它会更冗长但应该同样有效：

```
std::equal(x, x+n, y, [&tolerance](Type a, Type b) -> bool { return ((a-b) < tolerance) && ((a-b) > -tolerance); } 
```

主要区别在于删除 abs：取决于实现方式`Type`和`abs`实现方式，您可能会获得额外的条件执行路径，并且有很多分支错误预测，这当然应该避免这种情况。ab 的重复计算可能会被编译器优化掉（如果它认为有必要的话）。

当然，它为 Type 引入了额外的运算符要求，如果运算符 < 或 > 很慢，它可能会比 abs 慢（测量它）。

此外，`std::equal`是一种标准算法为您完成所有循环和早期中断，为此使用标准库总是一个好主意。它通常更好维护（至少在 C++11 中）并且可以得到更好的优化，因为您清楚地表明了意图。

# java - 多态性和静态方法

> ID：13695999
> 
> 赞同：14
> 
> 时间：2012-12-04T04:16:24.630
> 
> 标签：java, static, polymorphism

我对这里的代码有疑问

```
public Car {
    public static void m1(){
        System.out.println("a");
    }
    public void m2(){
        System.out.println("b");
    }
}

class Mini extends Car {
    public static void m1() {
        System.out.println("c");
    }
    public void m2(){
        System.out.println("d");
    }
    public static void main(String args[]) {
        Car c = new Mini();
        c.m1();
        c.m2();       
   }
} 
```

我知道多态性不适用于静态方法，仅适用于实例方法。而且这种覆盖也不适用于静态方法。

因此我认为这个程序应该打印出：c, d

因为 c 调用了 m1 方法，但它是静态的，所以它不能覆盖，它调用的是 Mini 类中的方法，而不是 Car。

这个对吗？

但是，我的教科书说答案应该是：a，d

是错字吗？因为我现在有点迷茫。

请澄清一下，谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-04T04:19:15.647

> 因为 c 调用了 m1 方法，但它是静态的，所以它不能覆盖，它调用的是 Mini 类中的方法，而不是 Car。

那完全是倒退。

`c`被*声明*为`Car`，因此通过 进行的静态方法调用`c`将调用由 定义的方法`Car`。
编译器`c.m1()`直接编译为`Car.m1()`，而不知道`c`实际上包含`Mini`.

这就是为什么你永远不应该通过这样的实例调用静态方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-16T18:41:30.747

我在使用继承时遇到了同样的问题。我所学到的是，如果被调用的方法是静态的，那么它将从引用变量所属的类中调用，而不是从实例化它的类中调用。

```
 public class ParentExamp
    {                   
     public static void Displayer()
     {
      System.out.println("This is the display of the PARENT class");
     }
    }

     class ChildExamp extends ParentExamp
    {
        public static void main(String[] args)
        {
          ParentExamp a  = new ParentExamp();
          ParentExamp b  = new ChildExamp();
          ChildExamp  c  = new ChildExamp();

          a.Displayer(); //Works exactly like ParentExamp.Displayer() and Will 
                        call the Displayer method of the ParentExamp Class

          b.Displayer();//Works exactly like ParentExamp.Displayer() and Will 
                        call the Displayer method of the ParentExamp Class

          c.Displayer();//Works exactly like ChildExamp.Displayer() and Will 
                        call the Displayer method of the ChildtExamp Class
        }               
        public static void Displayer()
        {
         System.out.println("This is the display of the CHILD class");
        }   
    } 
```

[![在此处输入图像描述](../Images/e0738a9f04cfb77cb791844e0cd676c7.png)](https://i.stack.imgur.com/GB71G.png)