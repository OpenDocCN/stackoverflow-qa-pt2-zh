# StackOverflow 问答 15649000-15649999

# forms - 引导输入字段和下拉按钮提交

> ID：15649001
> 
> 赞同：9
> 
> 时间：2013-03-26T23:00:15.143
> 
> 标签：forms, twitter-bootstrap

目标：要有一个可以输入值的输入框，然后在该输入框的右侧是一个引导下拉按钮，他们可以在其中选择“商店名称、城市、州或邮编”。

他们会输入名称（比如沃尔玛），然后选择商店名称。当他们选择商店名称时，它将提交表单并发送两个由 php 处理的 post 值：

搜索词 | 搜索类型

这是我的按钮代码：

```
<form name="searchForm" id="searchForm" method="POST" />
      <div class="input-append">
        <input class="span2" id="appendedInputButton" type="text">
        <div class="btn-group">
          <button class="btn dropdown-toggle" data-toggle="dropdown">
            Action
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li>Search Store Names</li>
            <li>Search City</li>
            <li>Search State</li>
            <li>Search Zip Code</li>
          </ul>
        </div>
      </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T23:14:15.007

```
<form name="searchForm" id="searchForm" method="POST" />
  <div class="input-append">
    <input class="span2" id="appendedInputButton" name="search_term" type="text">
    <input class="span2" id="search_type" name="search_type" type="hidden">
    <div class="btn-group">
      <button class="btn dropdown-toggle" data-toggle="dropdown">
        Action
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu">
        <li onclick="$('#search_type').val('store'); $('#searchForm').submit()">Search Store Names</li>
        <li onclick="$('#search_type').val('city'); $('#searchForm').submit()">Search City</li>
        <li onclick="$('#search_type').val('state'); $('#searchForm').submit()">Search State</li>
        <li onclick="$('#search_type').val('zip'); $('#searchForm').submit()">Search Zip Code</li>
      </ul>
    </div>
  </div>
</form> 
```

`$_POST['search_term']`将是输入的文本，并且`$_POST['search_type']`是`store`、`city`、`state`或中的一个`zip`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-01T15:16:48.687

对于纯 html 和 css 解决方案，请尝试以下操作：

```
<li>
  <input type="submit" class="form-control btn btn-link" name="submit" value="Search State">
</li> 
```

CSS：

```
.dropdown input {
    display: block;
    padding: 3px 20px;
    clear: both;
    font-weight: 400;
    line-height: 1.42857143;
    color: #333;
    white-space: nowrap;
    height: 26px;
}

.dropdown .btn-link:hover {
    text-decoration: none;
    background-color: #e8e8e8;
} 
```

# delphi - 为什么我期望的所有树节点旁边都没有出现图标？

> ID：15649014
> 
> 赞同：3
> 
> 时间：2013-03-26T23:01:08.713
> 
> 标签：delphi, icons, virtualtreeview

我正在尝试扫描文件夹中的文件和子文件夹，然后将结果添加到 VirtualStringTree .. 这很好用，除非向树视图的每个节点添加图标（图标来自系统外壳图标） .

出现了一个奇怪的问题，图标仅在某些节点上显示，在大多数情况下，我得到的只有一个图标（见下图）。

![在此处输入图像描述](../Images/fdae41e5cb391e395204b76a75a65847.png)

**这是我使用的代码：**

树节点数据声明：

```
nodeData=record
          Text:String;
          ImageIndex:integer;
         end;

PNodeData=^nodeData; 
```

&这里是扫描文件/文件夹的代码

```
procedure scanDir(const Dir:string);
var SR: TSearchRec;
begin

addNewNode(Dir); 

if(FindFirst(IncludeTrailingBackslash(Dir) + '*.*', faAnyFile or faDirectory, SR)=0)then
 try
  if(isFile)then addNewNode(IncludeTrailingBackslash(Dir)+SR.Name);
  else if(isFolder)then scanDir(IncludeTrailingBackslash(Dir)+SR.Name);  // recursive call!
 until(FindNext(Sr)<>0);
 finally
 FindClose(SR);
 end;
end; 
```

添加新节点的代码：

```
procedure addNewNode(Text:String);
var theNode,Node:PVirtualNode;
    d:PNodeData;
    parent:string;
    SHFileInfo :TSHFileINfo;
    Icon: TIcon;
begin

parent:=ExtractFileDir(Text);

if(hashmap.ContainsKey(parent))then theNode:=hashmap.Items[parent]
else theNode:=nil;

Icon := TIcon.Create;

SHGetFileInfo(PChar(Text), 0, SHFileInfo,  SizeOf(SHFileInfo),
                SHGFI_ICON or SHGFI_SMALLICON );

Icon.Handle := SHFileInfo.hIcon;

// begin updating
Form1.theTree.BeginUpdate;

// add a child node
Node:=Form1.theTree.AddChild(theNode);

d:=Form1.theTree.GetNodeData(Node);

// add a checkbox
Node.CheckType:=ctCheckBox;
Node.CheckState:=csCheckedNormal;

if((ExtractFileExt(Text)='')and(not hashmap.ContainsKey(Text)))
then hashmap.Add(Text, Node);

// assign a text to the newly created node
d^.Text:=ExtractFileName(Text);

// assign an ImageIndex to the newly created node
d^.ImageIndex:=Form1.treeImageList.AddIcon(Icon);

// end update
Form1.theTree.EndUpdate;

// Destroy the Icon
DestroyIcon(SHFileInfo.hIcon);
end; 
```

treeVeiw OnGetImageIndex 的代码：

```
procedure TForm1.theTreeGetImageIndex(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Kind: TVTImageKind; Column: TColumnIndex;
  var Ghosted: Boolean; var ImageIndex: Integer);

var  FileInfo:PNodeData;
begin
  FileInfo := Sender.GetNodeData(Node);
  ImageIndex := FileInfo^.ImageIndex;
end; 
```

PS：**treeImageList**是链接到**treeView.images**属性的 imageList

# mysql - 哪个更有效，删除和插入或插入和更新

> ID：15649015
> 
> 赞同：2
> 
> 时间：2013-03-26T23:01:19.627
> 
> 标签：mysql, sql-update, sql-insert, sql-delete

我有一个eav表结构，special_from、special_to和special_display不需要填写

我正在制作一个 sql 脚本来填充产品的这些 eav 属性，我的脚本的工作原理是处理这 3 个值的数据并将其存储在临时表中，当我拥有所有需要更新 eav 的数据时属性

产品可能具有这些值，所以我有 2 个应用

1）`DELETE`我在我的临时表中列出的产品的 eav 值，然后是`INSERT`它们 2）`INSERT`尚未分配的值，然后`UPDATE`是已分配的值

我正在处理多达 10,000 种产品，所以我想知道哪个更有效，因为我想最大限度地减少查询花费的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:09:46.023

```
INSERT INTO
  catalog_product_entity_datetime
  (entity_type_id, store_id, entity_id, attribute_id, value)
VALUES
  (4, 0, PRODUCT_ID_1, ATTRIBUTE_ID_FOR_SPECIAL_TO, SOME_DATE_VALUE),
  (4, 0, PRODUCT_ID_1, ATTRIBUTE_ID_FOR_SPECIAL_FROM, SOME_DATE_VALUE),
  (4, 0, PRODUCT_ID_2, ATTRIBUTE_ID_FOR_SPECIAL_TO, SOME_DATE_VALUE),
  (4, 0, PRODUCT_ID_2, ATTRIBUTE_ID_FOR_SPECIAL_FROM, SOME_DATE_VALUE),
  -- ... and so on
  -- ... and so on
  -- ... and so on
ON DUPLICATE KEY UPDATE value = VALUES(value) 
```

特殊显示字段也类似（无论是哪种数据类型。

我在这里假设 magento，因为它是我见过的唯一使用 EAV 的东西。

通过这 2 个查询，您将能够一次更新所有受影响的产品，从而最大限度地减少对数据库的影响（重新索引）。另一种方法是在事务的循环中执行单个查询，以避免每个条目重新索引。

# java - 使用 ArrayList 在 java 中添加新对象？

> ID：15649016
> 
> 赞同：-3
> 
> 时间：2013-03-26T23:01:21.803
> 
> 标签：java, arraylist

我无法理解 ArrayList。我正在使用 3 个类客户、视频和发票编写程序。在下面的代码中，我正在创建一个新客户以添加到设置 ArrayList，但我觉得我正在尝试将它视为一个数组。我希望用户能够添加另一个客户对象并使用计数器“i”并运行一系列问题以添加到该客户对象。我意识到其中一些是一团糟。

```
import java.util.Scanner;
import java.util.ArrayList;

public class Prog4 {

    public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);
        ArrayList <Customer> customer = new ArrayList <Customer>();
        int i = 0;
        char ans;

        do
        {

            System.out.print("Customer name: ");
            String name = in.next();
            customer.add(i,).setName(name);

            System.out.print("Street Address: ");
            String streetAddress = in.next();
            d1.setStreetAddress(streetAddress);

            System.out.print("City: ");
            String city = in.next();
            d1.setCity(city);

            System.out.print("State: ");
            String state  = in.next();
            d1.setState(state);

            System.out.print("Zipcode: ");
            String zipcode = in.next();
            d1.setZipcode(zipcode);

            System.out.print("Phone Number: ");
            String phoneNumber = in.next();
            d1.setPhoneNumber(phoneNumber);

            customer[i] = new Customer(name, streetAddress, city, state, zipcode, phoneNumber);

            System.out.print("Would you like to enter in a new customer (y/n)? ");
            String answer = in.next();
            ans = answer.charAt(0);
        }while(ans == 'y');

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:19:48.497

首先，你应该重命名

```
ArrayList <Customer> customer = new ArrayList <Customer>(); 
```

至

```
ArrayList <Customer> customers = new ArrayList <Customer>(); 
```

所以每个人（包括作者）都知道这是一个装有客户的容器。

接下来，这是一个语法错误：

```
customer.add(i,).setName(name); 
```

逗号用于分隔参数，例如 max(2, 4, 5)。您正在添加一个数字，但是这个容器里面只能有客户，而且 arraylist 在添加时会自动增加索引，所以不要担心一些 i。因此，如果您想将客户添加到 ArrayList 客户中，您首先需要创建一个。可以工作的东西...

```
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    ArrayList <Customer> customers = new ArrayList <Customer>();
    char ans;

    do
    {

        System.out.print("Customer name: ");
        String name = in.next();
        //customer.add(i,).setName(name); you dont need this

        System.out.print("Street Address: ");
        String streetAddress = in.next();
        //d1.setStreetAddress(streetAddress);
        //these parameters are in constructor of class customer

        ...

        System.out.print("Phone Number: ");
        String phoneNumber = in.next();
        //d1.setPhoneNumber(phoneNumber);

        Customer customer = new Customer(name, streetAddress, city, state, zipcode, phoneNumber);
        customers.add(customer); //first create, then add

        System.out.print("Would you like to enter in a new customer (y/n)? ");
        String answer = in.next();
        ans = answer.charAt(0);
    }while(ans == 'y');

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:04:03.343

Java 不支持运算符重载，Java 标准库中的类只是普通类。

这意味着使用 [] 唯一有意义的是数组（而不是 ArrayList，它是 Collections Framework 中的一个类）。如果您需要知道 ArrayList 有哪些可用的方法，请参考这里：[http](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html) ://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html （特别是我认为您对add() 方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:17:45.283

首先，我建议为 Customer 对象设置值，然后执行 customer.add(Customer object)

就像是 ：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Customer {
    private String name;
    private  String streetAddress;
    private  String city;
    private  String state;
    private  String zipcode;
    private  String phoneNumber;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getStreetAddress() {
        return streetAddress;
    }

    public void setStreetAddress(String streetAddress) {
        this.streetAddress = streetAddress;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public String getZipcode() {
        return zipcode;
    }

    public void setZipcode(String zipcode) {
        this.zipcode = zipcode;
    }

    public String getPhoneNumber() {
        return phoneNumber;
    }

    public void setPhoneNumber(String phoneNumber) {
        this.phoneNumber = phoneNumber;
    }

    public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);
        List <Customer> customerList = new ArrayList <Customer>();
        char ans;

        do
        {
            Customer customer = new Customer(); 
            System.out.print("Customer name: ");
            customer.setName(in.next());

            System.out.print("Street Address: ");
            customer.setStreetAddress(in.next());

            System.out.print("City: ");
            customer.setCity(in.next());

            System.out.print("State: ");
            customer.setState(in.next());

            System.out.print("Zipcode: ");
            customer.setZipcode(in.next());

            System.out.print("Phone Number: ");
            customer.setPhoneNumber(in.next());

            customerList.add(customer);

            System.out.print("Would you like to enter in a new customer (y/n)? ");
            String answer = in.next();
            ans = answer.charAt(0);
        }while(ans == 'y');

        for(Customer c: customerList){
            System.out.print(c.getName());

        }

        for(int i=0; i<customerList.size(); i++){
            System.out.print(customerList.get(i).getName());

        }

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T23:27:24.627

除了上述答案，请尝试以下操作：

```
import java.util.Scanner;
import java.util.ArrayList;

public class Prog4 {

public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    ArrayList <Customer> customers = new ArrayList <Customer>();
    // int i = 0; Why is this needed ?
    char ans;

    do
    {

        System.out.print("Customer name: ");
        String name = in.next();

        System.out.print("Street Address: ");
        String streetAddress = in.next();

        System.out.print("City: ");
        String city = in.next();

        System.out.print("State: ");
        String state  = in.next();

        System.out.print("Zipcode: ");
        String zipcode = in.next();

        System.out.print("Phone Number: ");
        String phoneNumber = in.next();

        Customer tempCustomer = new Customer(name, streetAddress, city, state, zipcode, phoneNumber);
        customers.add(tempCustomer);

        System.out.print("Would you like to enter in a new customer (y/n)? ");
        String answer = in.next();
        ans = answer.charAt(0);
    }while(ans == 'y');

    in.close();
  }

} 
```

注意 add() 方法将元素添加到 ArrayList 中的下一个索引，您不需要用方括号 [] 指定索引。

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

# php - 想要订购 eventbrite 事件列表，以便即将发生的事件首先出现

> ID：15649022
> 
> 赞同：0
> 
> 时间：2013-03-26T23:01:46.560
> 
> 标签：php, eventbrite

如何修改以下调用，以便首先显示即将发生的事件。目前订单非常随机；我需要在顶部显示大多数当前事件，并且不应显示任何过去的事件......

```
 <div class="events-links">

    <?
    include "eventbrite/Eventbrite.php"; 
    $authentication_tokens = array('app_key'  => 'APP_KEY',
                       'user_key' => 'USER_KEY');
    $eb_client = new Eventbrite( $authentication_tokens );
    $events = $eb_client->user_list_events();
    ?>

    <span class="inspirational">Upcoming Events</span>
    <?= Eventbrite::eventList( $events, 'eventListRow'); ?>
    </div> 
```

*   这些不是我的象征；我在发布之前将它们更改为随机字符:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:06:31.210

如果您使用该`user_list_events`方法，则可以通过调整`event_statuses`字段来过滤结果。有效选项包括：live、started 或 end。仅显示即将发生的事件，例如：`event_statuses=live`。

结果将从最近发生的事件显示到将来发生的最远事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:14:46.403

fetch 后`$events`，用于`usort`对数组进行排序。

**[排序： http](http://php.net/manual/en/function.usort.php) : **//php.net/manual/en/function.usort.php****

 **```
$events = $eb_client->user_list_events();
usort($events, function($a, $b) {
    $adate = $a->start // or $a['date'] or $a->whatever it is
    $bdate = $b->start // or $a['date'] or $a->whatever it is
    if ($adate < $bdate) return -1;
    if ($adate > $bdate) return 1;
    return 0;
}); 
```

或者，您可以联系您的客户经理（如果有的话）。

（披露：我为 EB 竞争对手工作）**

# sql-server-2008 - 连接到 SQL Server Express 2008 时出现错误 26

> ID：15649024
> 
> 赞同：0
> 
> 时间：2013-03-26T23:02:04.127
> 
> 标签：sql-server-2008

我在运行双启动 Windows 7 和 Xubuntu 12.04 的 64 位计算机上安装了 SQL Server Express 2008 和 SQL Server Management Studio。当我尝试打开 SSMS 并连接到服务器时，我收到一条错误消息：

> 无法连接到 (ComputerName)\SQLEXPRESS。
> 附加信息：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。）提供程序：SQL 网络接口，错误 26 - 错误定位服务器/指定实例）（Microsoft SQL Server）

我还没有机会创建任何数据库，所以它应该连接到我自己计算机上的默认实例。我已经尝试过使用单反斜杠或双反斜杠，确保 sqlbrowser.exe 正在运行，并尝试在禁用防火墙的情况下进行连接。

有什么想法可以连接到服务器吗？

编辑：我查看了之前的几个条目并尝试了他们建议的内容。我在网络配置中启用了 TCP/IP。我已确保 SQL Server (MSSQLSERVER) 和 SQL Server Browser 都在运行。我什至卸载并重新安装了整个程序。

我正在使用 Windows 身份验证，并且正在 BIGONE\SQLEXPRESS 上输入变体。在安装过程中创建默认实例时，它似乎被列为 MSSQLEXPRESS 而不是 SQLEXPRESS，所以我也试过这个。

我安装的唯一功能是数据库引擎服务、SQL Server 复制、全文搜索和基本管理工具。我发现的各种版本的 Microsoft SQL Server 2008 R2 Express 中似乎没有其他功能，例如客户端工具连接。是否需要其他功能？

以下是可能相关的错误日志之一中的几行：

*2013-03-26 18:38:26.60 服务器专用管理员连接支持未启动，因为它在此版本的 SQL Server 上被禁用。如果要使用专用管理员连接，请使用跟踪标志 7806 重新启动 SQL Server。这只是一条信息性消息。无需用户操作。2013-03-26 18:38:26.62 服务器 SQL Server 网络接口库无法为 SQL Server 服务注册服务主体名称 (SPN)。错误：0x54b，状态：3。未能注册 SPN 可能会导致集成身份验证回退到 NTLM 而不是 Kerberos。这是一条情报信息。仅当身份验证策略需要 Kerberos 身份验证时，才需要进一步操作。2013-03-26 18:38:26.62 服务器 SQL Server 现在已准备好进行客户端连接。这是一条情报信息; 无需用户操作。2013-03-26 18:38:42.00 spid10s 启动数据库“tempdb”。2013-03-26 18:38:46.74 spid13s Service Broker 协议传输被禁用或未配置。2013-03-26 18:38:46.75 spid13s 数据库镜像协议传输被禁用或未配置。2013-03-26 18:38:47.69 spid13s Service Broker 管理器已启动。2013-03-26 18:38:48.19 spid7s 恢复完成。这只是一条信息性消息。无需用户操作。2013-03-26 22:24:50.59 服务器服务器在空闲 11872 秒后恢复执行：用户活动唤醒了服务器。这只是一条信息性消息。无需用户操作。2013-03-27 00:33:53.68 服务器 SQL Server 由于系统关闭而终止。这只是一条信息性消息。无需用户操作。2013-03-27 00:33:57.06 spid13s Service Broker 管理器已关闭。2013-03-27 00:33:57.14 spid13s 错误：17054，严重性：16，状态：1。 2013-03-27 00:33:57.14 spid13s 当前事件未报告到 Windows 事件日志。操作系统错误 = (null)。如果 Windows 事件日志已满，您可能需要清除它。2013-03-27 00:33:58.51 spid7s SQL 跟踪因服务器关闭而停止。跟踪 ID = '1'。这只是一条信息性消息；无需用户操作。如果 Windows 事件日志已满，您可能需要清除它。2013-03-27 00:33:58.51 spid7s SQL 跟踪因服务器关闭而停止。跟踪 ID = '1'。这只是一条信息性消息；无需用户操作。如果 Windows 事件日志已满，您可能需要清除它。2013-03-27 00:33:58.51 spid7s SQL 跟踪因服务器关闭而停止。跟踪 ID = '1'。这只是一条信息性消息；无需用户操作。*

更新：我已经设法仅使用我的计算机名进行连接（之后没有 \SQLEXPRESS）。感谢您的建议:-)

# c# - 如何在 C# 中退出 Windows 窗体应用程序

> ID：15649025
> 
> 赞同：17
> 
> 时间：2013-03-26T23:02:09.720
> 
> 标签：c#

我正在用 C# 编写一个仅使用一种表单的 Windows 窗体应用程序。当我想退出并关闭应用程序时，我添加了代码

```
private void Defeat()
{
    MessageBox.Show("Goodbye");
    this.Close();
} 
```

到 class `Form1 : Form`，这是 Visual Studio 自动创建的表单类。但是当这段代码运行时，我收到以下消息：

> System.Drawing.dll 中出现“System.Runtime.InteropServices.ExternalException”类型的未处理异常
> 
> 附加信息：GDI+ 中出现一般错误。

留言图片：

![错误信息](../Images/f603f3cf55a6539ef23a98130e481344.png)

问题是什么？

我应该如何退出我的应用程序？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-26T23:04:02.717

您首先需要引用您的字符串，以便消息框知道该做什么，然后您应该通过告诉应用程序上下文退出来退出您的应用程序。

```
private void Defeat()
{
    MessageBox.Show("Goodbye");
    Application.Exit();
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-08-24T08:27:17.843

如果您想关闭应用程序，请尝试以下操作：

```
 DialogResult dialog = new DialogResult();

    dialog = MessageBox.Show("Do you want to close?", "Alert!", MessageBoxButtons.YesNo);

    if (dialog == DialogResult.Yes)
    {
        System.Environment.Exit(1);
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-11-30T22:52:12.293

```
private void btnExit_Click(object sender, EventArgs e)
{
  this.Close();  //”this” refers to the form
} 
```

# flask - wtforms，CSRF，烧瓶，FieldList

> ID：15649027
> 
> 赞同：17
> 
> 时间：2013-03-26T23:02:13.687
> 
> 标签：flask, csrf, flask-wtforms

`FieldList`与 WTForms 一起使用时，我无法通过验证。我不断收到此错误。 `{'csrf_token': [u'CSRF token missing']}`. 问题是如果我在现场没有任何数据要验证`FieldList`，验证通过并且没有问题。但是当我尝试使用任何数据验证表单时，我得到了那个错误。

这是我的表格：

```
class FilterForm(wtf.Form):
    filter_value = wtf.TextField('Value', validators=[validators.Required()])
    filter_operator = wtf.SelectField('Operator', validators=[validators.Required()])
    filter_compare_value=wtf.TextField('Compare Value', validators=[validators.Required()])

class RedirectForm(wtf.Form):
    redirect_id = wtf.HiddenField('id')
    redirect_name = wtf.TextField('Name', validators=[validators.Required()])
    redirect_url = wtf.TextField('URL', validators=[validators.Required()])
    redirect_type = wtf.SelectField('Type', validators=[validators.Required()])
    redirect_method = wtf.SelectField('Method', validators=[validators.Required()])
    redirect_active = wtf.BooleanField('Is Active')
    redirect_filters_any = wtf.FieldList(wtf.FormField(FilterForm))
    redirect_filters_all = wtf.FieldList(wtf.FormField(FilterForm)) 
```

表单似乎正确显示并且工作正常，直到我将数据添加到`redirect_filters_any`或`redirect_filters_all`

有没有办法禁用 csrf`FieldList`或将 CSRF 值传递给`FieldList`？我想保持启用 CSRF 保护，但似乎无法解决这个验证问题。

这是 Jinja2 模板

```
{% extends "base.html" %}
{% set active_page = "endpoints" %}
{% block tail_script %}
<script src="/static/js/page/redirects.js"></script>
{% endblock %}
{% block content %}
<div class="row12">
    <div class="span12">
        <ul class="breadcrumb">
              <li><a href="{{ url_for('list_endpoints') }}">Endpoints</a> <span class="divider">/</span></li>
              <li><a href="{{ url_for('show_endpoint', id=endpoint_id) }}">{{endpoint_name}}</a> <span class="divider">/</span></li>
              {% if redirect_id != 'new' %}
              <li class="active">{{ form.redirect_name.data }}</li>
              {% else %}
              <li class="active">New</li>
              {% endif %}
        </ul>
        <form action="{{ url_for('edit_redirect', endpoint_id=endpoint_id, redirect_id=redirect_id) }}" class="form-horizontal" method="post">
            <legend>General</legend>
            {{ form.hidden_tag() }}
            <div class="control-group {% if form.redirect_name.errors %}error{% endif %}">
                <div class="control-label">{{ form.redirect_name.label }}</div>
                <div class="controls">
                    {{ form.redirect_name|safe }}
                    {% if form.redirect_name.errors %}
                    <span class="help-inline">
                         <ul class="errors">
                            {% for error in form.redirect_name.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </span>
                   {% endif %}
                </div>
            </div>
            <div class="control-group {% if form.redirect_type.errors %}error{% endif %}">
                <div class="control-label">{{ form.redirect_type.label }}</div>
                <div class="controls">
                    {{ form.redirect_type|safe }}
                    {% if form.redirect_type.errors %}
                    <span class="help-inline">
                         <ul class="errors">
                            {% for error in form.redirect_type.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </span>
                   {% endif %}
                </div>
            </div>
            <div class="control-group {% if form.redirect_active.errors %}error{% endif %}">
                <div class="control-label">{{ form.redirect_active.label }}</div>
                <div class="controls">
                    {{ form.redirect_active|safe }}
                    {% if form.redirect_active.errors %}
                    <span class="help-inline">
                         <ul class="errors">
                            {% for error in form.redirect_active.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </span>
                   {% endif %}
                </div>
            </div>
            <div class="control-group {% if form.redirect_method.errors %}error{% endif %}">
                <div class="control-label">{{ form.redirect_method.label }}</div>
                <div class="controls">
                    {{ form.redirect_method|safe }}
                    {% if form.redirect_method.errors %}
                    <span class="help-inline">
                         <ul class="errors">
                            {% for error in form.redirect_method.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </span>
                   {% endif %}
                </div>
            </div>
            <div class="control-group {% if form.redirect_url.errors %}error{% endif %}">
                <div class="control-label">{{ form.redirect_url.label }}</div>
                <div class="controls">
                    {{ form.redirect_url|safe }}
                    {% if form.redirect_url.errors %}
                    <span class="help-inline">
                         <ul class="errors">
                            {% for error in form.redirect_url.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </span>
                   {% endif %}
                </div>
            </div>
            <legend>Meet All Filters <a href="#" class="btn addAllFilter">Add</a></legend>
            <table class="stable-striped" id="all_filter_table">
                <tbody>
            {% for f in form.redirect_filters_all %}
                <tr style="vertical-align:top;">
                    <td>    
                        {{ f.filter_value }}
                        {% if f.filter_value.errors %}
                        <br>
                        <div class="control-group error">
                            <span class="help-inline">
                                 <ul class="errors">
                                    {% for error in f.filter_value.errors %}
                                    <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </span>
                        </div>
                        {% endif %}
                    </td>
                    <td>    
                        {{ f.filter_operator }}
                        {% if f.filter_operator.errors %}
                        <br>
                        <div class="control-group error">
                            <span class="help-inline">
                                 <ul class="errors">
                                    {% for error in f.filter_operator.errors %}
                                    <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </span>
                        </div>
                        {% endif %}
                    </td>
                    <td>    
                        {{ f.filter_compare_value }}
                        {% if f.filter_compare_value.errors %}
                        <br>
                        <div class="control-group error">
                            <span class="help-inline">
                                 <ul class="errors">
                                    {% for error in f.filter_compare_value.errors %}
                                    <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </span>
                        </div>
                        {% endif %}
                    </td>
                    <td><a href="#" class="btn remove">Remove</a></td>
                </tr>
            {% endfor %}
                </tbody>
            </table>
            <legend>Meet Any Filters <a href="#" class="btn addAnyFilter">Add</a></legend>
            <table class="stable-striped" id="any_filter_table">
                <tbody>
            {% for f in form.redirect_filters_any %}
                <tr style="vertical-align:top;">
                    <td>    
                        {{ f.filter_value }}
                        {% if f.filter_value.errors %}
                        <br>
                        <div class="control-group error">
                            <span class="help-inline">
                                 <ul class="errors">
                                    {% for error in f.filter_value.errors %}
                                    <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </span>
                        </div>
                        {% endif %}
                    </td>
                    <td>    
                        {{ f.filter_operator }}
                        {% if f.filter_operator.errors %}
                        <br>
                        <div class="control-group error">
                            <span class="help-inline">
                                 <ul class="errors">
                                    {% for error in f.filter_operator.errors %}
                                    <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </span>
                        </div>
                        {% endif %}
                    </td>
                    <td>    
                        {{ f.filter_compare_value }}
                        {% if f.filter_compare_value.errors %}
                        <br>
                        <div class="control-group error">
                            <span class="help-inline">
                                 <ul class="errors">
                                    {% for error in f.filter_compare_value.errors %}
                                    <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </span>
                        </div>
                        {% endif %}
                    </td>
                    <td><a href="#" class="btn remove">Remove</a></td>
                </tr>
            {% endfor %}
                </tbody>
            </table>
            {% if g.user.user_type == 'admin' %}
            <div class="control-group">
                <div class="controls">
                    <input class="btn btn-primary" type="submit" value="Save"/>
                    <a href="{{url_for('show_endpoint', id=endpoint_id)}}" class="btn">Cancel</a>
                </div>
            </div>
            {% endif %}
        </form>
    </div>
</div>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T03:35:31.270

The issue seems to be that Flask-WTForms `Form` is actually a subclass of `wtforms.ext.SecureForm` - and the only way to disable the csrf protection on a form is to pass the keyword argument `csrf_enabled=False` to the form when constructing it. Since `FormField` actually handles instantiating the form and you can either:

*   Create a subclass of `FormField` that will let you pass in form keyword arguments
    *or*
*   Subclass `wtforms.Form` rather than `flask.ext.wtforms.Form` for your `FilterForm` (as long as you never display a `FilterForm` on its own you won't need to worry about CSRF).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-12T10:46:40.700

遇到同样的问题后，我想为上面的解决方案提供第三个选项

您还可以覆盖表单类中的构造函数以替换 csrf_enabled 的默认值。这样做的好处是您可以使用相同的表单定义作为字段列表成员，以及通过传递 csrf_enabled=True 启用 CSRF 的独立表单。

```
class FilterForm(wtf.Form):
    field = wtf.Form ...

    def __init__(self, csrf_enabled=False, *args, **kwargs):
        super(FilterForm, self).__init__(csrf_enabled=csrf_enabled, *args, **kwargs) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-07T00:01:59.567

它似乎`csrf_enabled`已被弃用。这是一个适用的解决方案`Flask-WTForms 0.14.2`，部分基于 leebriggs 的[回答](https://stackoverflow.com/a/17613190/1000655)。我没有在创建表单时传递参数，而是创建了一个`xNoCsrf`子类，因为我不希望有人在需要时意外忘记包含 CSRF 令牌。这样，您必须键入`NoCsrf`才能获得非 CSRF 版本。

```
class FilterForm(FlaskForm):
    <some stuff here>

class FilterFormNoCsrf(FilterForm):
    def __init__(self, *args, **kwargs):
        super(FilterFormNoCsrf, self).__init__(meta={'csrf':False}, *args, **kwargs) 
```

[这](http://wtforms.readthedocs.io/en/2.1/meta.html#wtforms.meta.DefaultMeta.csrf)是该类`csrf`字段的文档。`meta`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-06T14:00:48.703

从 1.0 版开始，实现此目的的新方法如下：这将禁用所有表单实例的 CSRF 令牌，因此请注意仅将其用作子表单。

```
class MyForm(FlaskForm):
    class Meta:
        csrf = False

    myfield = StringField("A Field") 
```

# facebook - Facebook PHP-SDK 找到更多喜欢但仅限于特定 app_id 的朋友

> ID：15649028
> 
> 赞同：1
> 
> 时间：2013-03-26T23:02:15.303
> 
> 标签：facebook, facebook-fql, facebook-php-sdk

我想从 facebook php-sdk 中提取我的朋友列表，这些朋友“喜欢”某些仅来自某些 app_id 的帖子。让我举个例子，如果你访问 www.rottentomatoes.com，你可以在朋友/朋友部分看到你所有对任何电影写评论/评论的朋友。

我认为 FQL 是一种很好且干净的方法，但实际上并非如此，因为处理数据需要很长时间，我认为它还不能用于在线应用程序。

这是我到目前为止提出的代码：

```
function cmp($a, $b)
{
    if ($a["like"] == $b["like"]) {
        return 0;
    }
    return ($a["like"] > $b["like"]) ? -1 : 1;
}

    try
    {
        $fql = 'SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1='.$uid.') AND has_added_app = 1';
        $_friends = $facebook->api(array('method' => 'fql.query','query' => $fql));
    }
    catch(FacebookApiException $e)
    {
        print_r($e);
        error_log($e->getType());

    }

    // Extract the user ID's returned in the FQL request into a new array.
    $likes = array();
    if (is_array($_friends) && count($_friends) > 0)
    {   
        foreach ($_friends as $friend)
        {
            $fid = $friend["uid"];

            try
            {
                $fql = 'SELECT url FROM url_like WHERE user_id = '.$fid.' AND strpos(lower(url),"muchogusto") >=0';
                $_likes = $facebook->api(array('method' => 'fql.query','query' => $fql));
                $likes[] = array("uid" => $fid, "like" => count($_likes));
            }
            catch(FacebookApiException $e)
            {
                $likes[] = array("uid" => $fid, "like" => 0);
                continue;
                error_log($e->getType());
            }
        }   
    }

    usort($likes, "cmp");
    print_r($likes); 
```

我有很多问题，当然你可以帮助我，因为我是新手。

有人可以帮我在没有 FQL 的情况下编码吗？我只需要这个：

1.  我的朋友列表
2.  某些帖子的点赞数仅在
3.  某些APP_ID

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:48:43.077

FQL 不是问题。这是您在`foreach`循环中进行 FQL 调用的事实。这就是减慢程序速度的原因。

如果你在另一个`foreach`循环中调用这个函数，那就忘了它。

尝试使用 FQL 多查询进行一次调用。

```
$queries['my_friends'] = 
  'SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) 
   AND has_added_app = 1';
$queries['liked_url'] = 
  'SELECT url,user_id FROM url_like WHERE user_id IN (SELECT uid FROM #my_friends) 
   AND strpos(lower(url),"muchogusto") >=0';
$multiquery = json_encode($queries);
$result = $facebook->api(array('method' => 'fql.multiquery','queries' => $multiquery)); 
```

# asp.net - “无法连接到任何指定的 MySQL 主机”

> ID：15649029
> 
> 赞同：0
> 
> 时间：2013-03-26T23:02:35.447
> 
> 标签：asp.net, mysql, apache, ubuntu, mono

提前感谢您的耐心等待。当我开始输入此内容时，我注意到 SO 已在主题行中添加了用于浏览类似主题的功能。用尽我的资源后，我将继续这篇文章。

我在本地网络上有两台机器。
Production Box - Ubuntu、Apache、Mono、Asp.net、C#（全部更新）。
开发盒 - 带有 Xamarin 的 Windows XP

我的生产箱在我的 WAN ip 上的端口 80 之外托管，因此我可以从我的移动设备（生产测试）或我的开发箱（浏览器生产测试，或使用 Xamarin 的远程开发环境测试）访问我的网站。

我的连接字符串肯定遵守： server=$servername$;port=3306;database=$databasename$;uid=$username$;password=$password$;

我已经使用了所有四个服务器值组合（[SERVERNAME]、localhost、127.0.0.1、远程开发环境测试的实际网络 IP）。

我的 cnf 中有 bind-address: 127.0.0.1 。

每次访问我的网站时，我都会继续收到“无法连接到任何指定的 MySQL 主机”服务器 500 错误，或者使用生产测试（通过在浏览器中输入我的 WAN IP 来访问该网站，Apache 是在同一个框作为 MySql）或远程连接（开发客户端、Xamarin 调试器）。

netstat 说我正在监听 3306 端口。

我尝试从连接字符串中删除端口 3306。

我尝试使用 PASSWORD/PWD USER ID/UID/USER 的不同组合。

所有的失败。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:06:46.590

如果您已绑定`127.0.0.1`文件`my.cnf`，则意味着您只能从本地数据库计算机连接到数据库。 `127.0.0.1`是本地环回地址，只允许localhost连接。如果您的网站未托管在同一台服务器上，这就是您无法连接的原因。

如果要从另一台服务器连接到数据库，请在`my.cnf`文件中绑定数据库服务器的 LAN IP。

然后您可以将数据库服务器的 LAN IP 地址放入连接字符串中，您应该能够连接

您的错误实际上是网络连接错误，您尚未进行身份验证，因此尝试不同的用户名和密码无济于事。解决网络问题后，如果身份验证失败（例如 user@host using password failed），您将收到不同的错误

# ruby-on-rails - 验证在 rails 中提交的表单字段属于所有者

> ID：15649031
> 
> 赞同：1
> 
> 时间：2013-03-26T23:02:38.003
> 
> 标签：ruby-on-rails, ruby, validation

我有一个属于用户的名为 PaymentMethods 的模型。当用户结账时，他们会看到属于他们的可用 PaymentMethods 列表。确保用户无法手动编辑 dom 并使用其他人的付款方式的最佳方法是什么？

我目前在我的模型中使用自定义验证

```
def payment_method_owner?

  errors.add(:payment_method, "This card doesn't belong to you") unless self.user.payment_methods.include? self.payment_method

end 
```

这是在 Rails 中执行此操作的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:19:06.793

我认为，总的来说，这是一个很好的方法。

然而，有几点可能值得一提。

通常，在向特定属性添加错误时，会使用不包含主语的句子片段来完成。这样做的原因是因为 full_messages 助手将属性名称与错误连接起来。在这种情况下，完整的消息将是“付款方式这张卡不属于您”。我建议将消息​​更改为“不属于您”，从而导致“付款方式不属于您”。如果他们收到此消息，他们可能知道收到此消息的原因......缩短消息的替代方法是将完整错误添加到 base，但这会使 field_with_errors 内容在视图中不起作用。

其次，您可以删除`self.`方法中的两个 s，它们是不必要的。

最后，在我看来，这是此类验证的完美逻辑量，任何更复杂的东西都可能需要[自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)。

**编辑：**

尝试这个：

```
validates :payment_method, inclusion: { in: lambda{ |x| x.user.payment_methods } } 
```

# python - xlwt 即时编写 excel 表

> ID：15649034
> 
> 赞同：15
> 
> 时间：2013-03-26T23:02:57.953
> 
> 标签：python, xlwt

我习惯于通过以下方式创建电子表格：

```
 wbk = xlwt.Workbook()
    earnings_tab = wbk.add_sheet('EARNINGS')
    wbk.save(filepath) 
```

有没有办法不将文件保存到文件路径，而是即时将其写入下载文件的用户？还是我需要将其保存为 tmp 文件，然后将其提供给用户？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T23:13:17.413

引用以下[方法](https://xlwt.readthedocs.org/en/latest/api.html?highlight=save#xlwt.Workbook.Workbook.save)[的文档`.save()``xlwt`](https://xlwt.readthedocs.org/en/latest/api.html?highlight=save#xlwt.Workbook.Workbook.save)：

> 它也可以是带有 write 方法的流对象，例如 a `StringIO`，在这种情况下，excel 文件的数据将写入流中。

修改示例：

```
from io import StringIO  # instead of Python 2.x `import StringIO`

f = StringIO() # create a file-like object 

wbk = xlwt.Workbook()
earnings_tab = wbk.add_sheet('EARNINGS')

wbk.save(f) # write to stdout 
```

有些人可能会建议您使用`cStringIO`而不是`StringIO`，但请注意，`cStringIO`上次我检查时没有正确处理 Unicode。

## 重要更新

*可能还值得注意的是，`StringIO`在 Python 3 中它被替换为`io`.*

> StringIO 和 cStringIO 模块不见了。相反，导入 io 模块并分别对文本和数据使用 io.StringIO 或 io.BytesIO 。

[资源](https://docs.python.org/3.0/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)

所以使用：

```
from io import StringIO
# instead of import StringIO 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-06-15T12:59:27.983

这是我在 Django 中使用的：

```
response = HttpResponse(content_type='application/vnd.ms-excel')
response['Content-Disposition'] = 'attachment; filename=file.xls'
book.save(response)
return response 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T18:42:13.823

```
class QueryToExcel(object):
def __init__(self, doc_name = 'doc_name'):
    #some set up stuff
    self.b_io = BytesIO()
    self.workbook = pd.ExcelWriter(self.b_io, engine='xlsxwriter')
    self.run() #fill in workbook with pandas dataframes
    self.workbook.save()

def get_workbook(self):
    return self.b_io.getvalue()

app = Flask(__name__)
app.debug = True 
@app.route('/pvh/', methods = ['GET'])
def get_workbook(self):
    return self.b_io.getvalue() 
```

# iframe - 在外部页面上创建一个仅包含一个类而不是 id 的 div 的 iframe

> ID：15649035
> 
> 赞同：0
> 
> 时间：2013-03-26T23:03:18.523
> 
> 标签：iframe, embed

我需要在一个 div 上创建一个 iframe 及其来自[http://www.mycharitywater.org/cycling-c2b的内容](http://www.mycharitywater.org/cycling-c2b)

div是

```
<div class="dash "></div> 
```

它是一个不提供可嵌入进度条的慈善网站。

我曾尝试在 css iframe 上使用不可滚动的位置，效果很好，除了它们必须在某处使用 %age 高度，因为它不适用于所有分辨率......足够公平......

任何想法都会很棒，因为我今晚需要解决这个问题

谢谢

# jms - 分布式事务 Java JMS

> ID：15649036
> 
> 赞同：2
> 
> 时间：2013-03-26T23:03:21.277
> 
> 标签：jms, apache-camel, distributed-computing, jta, xa

我想知道我是否可以就如何处理我面临的设计问题获得一些想法。为简单起见，假设我有 3 个端点在 Tomcat 上的 3 台不同的机器/jvm 上运行。端点具有以下职责：

端点 1 - 接收需求数据并将此数据转换为订单请求

端点 2 - 接受订单请求，保存订单并返回订单

端点 3 - 接受订单，格式化为供应商特定的 xml，并将其发送到队列。

**编辑：这些端点作为当前服务存在，通过 REST 提供给其他客户端。我可以选择将 Atomikos 用于 JTA 事务管理器，并且我们正在使用 ActiveMQ。**

话虽如此，我有一个接收需求数据消息的队列设置。对于每个收到的需求数据消息，我基本上想通过 XA 将它们汇集到一个工作单元中的 3 个端点中的每一个。我完全控制了 3 个端点中的每一个，因此我在它们可以使用的通信协议方面具有一定的灵活性。此外，最终每天将有大约 50 万到 100 万条此类消息进入。你们会使用什么通信协议在分布式事务中将这些端点联系在一起？

我对 Camel 有一些经验，但我对如何将它们结合在一个工作单元中感到困惑。RMI 是否会比 JMS 更合适，因为这在本质上似乎是同步的？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:00:00.243

来自fusesource[的 Apache Camel 文档：](http://fusesource.com/docs/router/2.2/transactions/index.html)

> **分布式事务** 分布式事务是指分布式系统中的事务，其中事务范围跨越多个网络节点。支持分布式事务的基本先决条件是支持以规范格式传输事务上下文的网络协议（另请参见分布式事务管理器）。*分布式事务不在 Apache Camel 事务的范围内。*
> 
> **分布式事务管理器** 通常，服务器直接连接到事务中涉及的资源。然而，在分布式系统中，有时需要通过 Web 服务或通过 CORBA IDL 接口连接到仅间接公开的资源。在这种情况下，您需要一个能够支持分布式事务的 TP 监视器。有几种标准描述了如何支持各种分布式协议的事务——例如，用于 Web 服务的 WS-AtomicTransactions 规范和用于 CORBA 应用程序的 CORBA 对象事务服务 (OTS) 规范。

所以难怪你会被踩到。Apache Camel 不涵盖您的用例。

我觉得你可以走两条路：

1.  大分布式事务
2.  通过补偿行动协调较小的交易

**tomcat 中** 的 JTA JTA 是一个全局事务管理器。您可能在两种解决方案中都需要这个。（尽管有一些聪明的摆弄，如果你选择第二个选项，你可能会不用。）Tomcat 不能运行 JTA 事务，但在事务管理器的帮助下它可以。参见[Atomikos vs JOTM vs Bitronix vs？](https://stackoverflow.com/questions/2978207/atomikos-vs-jotm-vs-bitronix-vs). 添加 Spring [JtaTransactionManager](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/transaction/jta/JtaTransactionManager.html)将有助于使其更易于配置。并非所有 JMS 实现都支持 JTA / 都是 XA 资源。你必须检查你的是否有。

**分布式事务** 你的事务的持续时间不是很长，但是你仍然会保持资源锁定很长一段时间，并且你有很多事务。性能会受到伤害。

JTA 建立在 JTS 和 OTS 之上。JTA 服务器应该能够通过 OTS 与其他 JTA 服务器协调事务。这不是简单的设置，首先你必须找到一个支持它的实现。然后你必须弄清楚如何启动和运行它。

在更高的级别上，您有 WS-Transactions 和 WS-Coordination。请参阅[地铁指南](http://metro.java.net/guide/ch17.html)。

**补偿动作** [SOA 中的事务](https://stackoverflow.com/questions/11671725/transaction-in-soa)建议最好使用一组协调的较小事务，这些事务不会回滚，但可以采取补偿动作来清理步骤失败时出现的混乱。

在超时时发送通知就是这样一种操作。如果您发现无法满足订单请求，则取消您在端点一中发出的订单请求可能是另一种补偿操作。

如果你能走这条路，我会接受的。

# c# - 如何转换为 IList 类型？

> ID：15649038
> 
> 赞同：1
> 
> 时间：2013-03-26T23:03:36.837
> 
> 标签：c#

我想实现在 an 中放入随机数的效果，`IList`似乎我无法想到如何获取 的类型`IList`，无论是 an`int`还是`decimal`等。我不能简单地`Console.ReadLine()`将`IList`.

```
public void RandomizeIList<T>(IList<T> list)
{
    randomNum = new Random();
    T typeRead = 0, typeReadSeed = 0;
    String strRead = "", strReadSeed = "";
    Console.WriteLine("How many {0}s do you want to randomly generate?", list.GetType());
    T strRead = (list.GetType())Console.ReadLine();
    Console.WriteLine("What's the limit of the randomly generated {0}s?", list.GetType());
    Int32.TryParse(strReadSeed, out intReadSeed);
    for (int i = 0; i < strRead; i++)
    {
        list[i] = randomNum.Next(intReadSeed);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:09:04.267

从语法上讲，您想要的是：

```
T strRead = (T)Console.ReadLine(); 
```

但是，`Console.ReadLine` *只*返回一个字符串，所以这种转换（以及泛型的使用）没有意义。要么你应该使用 a `IList<string>`（因为你认为`T`是一个字符串），要么你应该使用`IList<int>`（因为你正在将`int`s 添加到列表中）。在任何情况下，您都不清楚您要完成什么，因为您对`strRead`.

**更新，每条评论**：

当然，您可以将字符串转换为任意类型。该框架为此提供了一些实用程序，例如`Convert`类：

```
T strRead = (T)(object)Convert.ChangeType(Console.ReadLine(), typeof(T)); 
```

这适用于简单类型——例如，您可以使用`Convert`将 a 转换为`string`a `int`。但是，不言而喻，您不能使用此类将任意字符串转换为任意类型。为此，您将不得不考虑您自己的类型转换框架，也许将 , 的行为`Convert`与隐式和显式转换等结合起来。这是因为很明显，特定类型的字符串表示完全取决于该类型的特征.

# ruby-on-rails - 如何在 Rails 的嵌套表单中使用 link_to？

> ID：15649040
> 
> 赞同：0
> 
> 时间：2013-03-26T23:03:40.373
> 
> 标签：ruby-on-rails, paperclip, nested-forms, nested-attributes

我有一个可能包含许多文件的对象的嵌套表单。我在创建对象时没有问题，但是当我需要编辑它时，我发现了问题，表单应该有文件 url 的链接，但我不知道如何引用文件本身。我用回形针。在这种情况下，如果只有一个文件并且它在对象模型中，我会做类似@object.file.url 但由于有很多文件，我不知道在这种情况下如何进行......

**编辑.html.haml**

```
= form_for @object, :url => { :action => "update", :controller => "object", :id => @object.id, :method => "post" }, :html => { :multipart => true }  do |f|

  - render "object/object_form", object: f.object, f: f 
```

**object_form.html.haml**

```
.field
  = f.label :name
  = f.text_field :name

= f.fields_for :files do |builder|
  = render 'object/file_fields', :f => builder
%p= link_to_add_fields "Add new file", f, :file

.field
  = f.submit "Save" 
```

**file_fields.html.haml**

```
%fieldset
  .field
    = f.label :file
    = f.file_field :file
  .field
    = f.hidden_field :_destroy
    = link_to "Remove File", '#', class: "remove_fields" 
```

**我正在尝试做的事情显然在 file_fields.html.haml 中不起作用**

```
%fieldset
  .field
    = f.label :file
    = f.file_field :file
    = link_to f.file.url 
  .field
    = f.hidden_field :_destroy
    = link_to "Remove File", '#', class: "remove_fields" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:42:01.447

我认为你应该能够做到

```
f.object.url 
```

所以：

```
%fieldset
  .field
    = f.label :file
    = f.file_field :file
    # Not sure if it would produce a Nil error on the new form.
    # given how the f object wouldn't yet have a url
    - if f.object.url
       = link_to f.object.url 
  .field
    = f.hidden_field :_destroy
    = link_to "Remove File", '#', class: "remove_fields" 
```

# google-api - 谷歌日历：freeBusy 给一个帐户而不是另一个帐户提供错误“notFound”

> ID：15649046
> 
> 赞同：0
> 
> 时间：2013-03-26T23:04:06.790
> 
> 标签：google-api, google-calendar-api, google-api-java-client

首先，我使用 google 应用程序作为企业帐户，我有 2 个帐户 test1@mycompany.com 和 test2@mycompany.com

之后，我有一个在 API 控制台中注册到 test1@mycompany.com 的 Api 电子邮件，我将其表示为 #####@developer.gserviceaccount.com

查询很简单，我只有一个 timeMin & timeMax & 2 个项目，每个项目都有 id 我使用 Java 客户端 API 发送这个

使用 GoogleAuthorizationCodeFlow 并使用 test1@mycompany.com 进行首次查询

```
{
 "kind": "calendar#freeBusy",
 "timeMin": "2013-03-26T22:50:16.501Z",
 "timeMax": "2013-03-26T22:50:22.501Z",
 "calendars": {
  "test1@mycompany.com": {
   "busy": []
  },
  "test2@mycompany.com": {
   "busy": []
  }
 }
} 
```

这是我使用第二种授权方法得到的（获取错误“notFound”）

```
GoogleCredential.Builder()
.setServiceAccountId("#####@developer.gserviceaccount.com")
.setServiceAccountPrivateKeyFromP12File("key.p12").etc().etc()

{
 "kind": "calendar#freeBusy",
 "timeMin": "2013-03-26T22:19:14.770Z",
 "timeMax": "2013-03-26T22:19:20.770Z",
 "calendars": {
  "test1@mycompany.com": {
   "busy": []
  },
  "test2@mycompany.com": {
   "errors": [
    {
     "domain": "global",
     "reason": "notFound"
    }
   ],
   "busy": []
  }
 }
} 
```

即使 test1@mycompany.com 可以访问 test2@mycompany.com #####@developer.gserviceaccount.com 不能，为什么这两个帐户实际上是同一个帐户，不是吗？#####@developer.gserviceaccount.com 无论如何都属于 test1@mycompany.com。Test2@mycompany.com 设置为共享日历（在第一个查询中很明显），我不知道为什么开发人员帐户无权访问该业务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:52:50.743

我很抱歉没有提供更多细节，但最终解决的方法是让 Apps for Business 帐户的所有者添加开发人员电子邮件地址 (#####@developer.gserviceaccount.com) 作为代表，现在我可以获取企业账户上任何人的空闲忙碌时间。在日历本身上添加#####@developer.gserviceaccount.com 作为用户的另一个答案也有效。（虽然我不得不为每个用户都这样做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:42:06.940

我希望得到与您类似的结果，但在使用 service_account 凭据时我也遇到了 notFound 错误。对我有用的解决方案是进入日历共享页面，并与#####@developer.gserviceaccount.com 电子邮件地址明确共享我的日历。

# twitter-bootstrap - Bootstrap sass 权限被拒绝

> ID：15649052
> 
> 赞同：0
> 
> 时间：2013-03-26T23:04:32.057
> 
> 标签：twitter-bootstrap, gem, bootstrap-sass

更新 gemfile 并安装 gem 后，出现以下错误：

> Errno::EACCES: Permission denied - /Users/xxx/.rvm/gems/ruby-1.9.3-p194/build_info/bootstrap-sass-2.3.1.0.info 安装 bootstrap-sass (2.3.1.0) 时出错，并且 Bundler 无法继续。`gem install bootstrap-sass -v '2.3.1.0'`在捆绑之前确保成功。

运行 Mac OSX 10.8.3

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'jquery-rails'

group :production do
    gem 'pg'
end 

group :development, :test do
    gem 'sqlite3'
end 

group :assets do
  gem 'sass-rails',   '~> 3.2'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'bootstrap-sass'
end 
```

在我的智慧尽头，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T21:06:46.313

文件权限问题，尝试使用 sudo 运行

```
 $sudo bundle install 
```

# asp.net - 在更新面板中查找控件

> ID：15649055
> 
> 赞同：2
> 
> 时间：2013-03-26T23:04:52.457
> 
> 标签：asp.net, controls, updatepanel

我已经看到了一些关于此的主题。如果页面加载时我在更新面板中有一个控件，我可以使用以下代码轻松获取它：

```
 Label lbls = (Label)upPreview.FindControl(lbl.ID);
    lbls.Text = lbl.ID; 
```

我不能做的是在两个不同的按钮上有两个不同的更新面板

按钮 1：

```
 Label lbl = new Label();
    lbl.Text = "something";
    lbl.ID = "something";
    upPreview.ContentTemplateContainer.Controls.Add(lbl); 
```

按钮 2

```
 Label lbls = (Label)upPreview.FindControl(lbl.ID);
    lbls.Text = lbl.ID;
    upForm.ContentTemplateContainer.Controls.Add(lbls); 
```

本质上，我正在创建一个标签并将其放在一个更新面板中，然后在第二个按钮上单击我将其移动到另一个更新面板。每次我尝试这个时，它都会说：值不能为空。参数名称：孩子

我也试过 ControlCollection cbb = upPreview.ContentTemplateContainer.Controls;

同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:49:41.807

当单击 s时，您`Label lbl`在部分回发期间迷路了。`Button`您可以使用 ViewState 在回发期间保留它。

`Label`在您的 Page_Load 上方添加一个并将其实例化为 null。

```
protected Label lbl = null;

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack) // First load or reload of the page
    {
        lbl = new Label();
        lbl.Text = "something";
        lbl.ID = "something";
        upPreview.ContentTemplateContainer.Controls.Add(lbl);        
    }
    else
    {
        // Reinitialize the lbl to what is stored in the view state
        if (ViewState["Label"] != null)
            lbl = (Label)ViewState["Label"];
        else
            lbl = null;
    }
} 
```

然后在您的 Button_Click 事件中：

```
protected void Button1_Click(object sender, EventArgs e)
{
    // Save the lbl in the ViewState before proceeding.
    ViewState["Label"] = lbl;
}

protected void Button2_Click(object sender, EventArgs e)
{
    if (lbl != null)
    {
        // Retreive the lbl from the view state and add it to the other update panel
        upForm.ContentTemplateContainer.Controls.Add(lbl);        
    }
    else
    {
        lbl = new Label();
        lbl.Text = "Error: the label was null in the ViewState.";
    }
} 
```

通过这种方式，您可以在回发期间对其进行跟踪。

# java - Java算术师

> ID：15649057
> 
> 赞同：1
> 
> 时间：2013-03-26T23:04:57.607
> 
> 标签：java, integer-arithmetic

```
public class test {
  public static void main(String[] args) {
   int total = 2;
   int rn = 1;
   double rnp = (rn / total) * 100;
   System.out.println(rnp);
 }
} 
```

为什么它打印 0.0 而不是 50.0？

[https://www.google.com/search?q=100*(1%2F2)&aq=f&oq=100*(1%2F2)](https://www.google.com/search?q=100%2a%281/2%29&aq=f&oq=100%2a%281/2%29)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T23:05:43.100

除法发生在整数空间中，没有分数的概念，你需要类似的东西

```
double rnp = (rn / (double) total) * 100 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:06:18.053

您在这里调用整数除法

```
(rn / total) 
```

整数除法向零舍入。

试试这个：

```
double rnp = ((double)rn / total) * 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:08:05.797

在 java 和大多数其他编程语言中，当您将两个整数相除时，结果也是一个整数。剩余部分被丢弃。因此，`1 / 2`返回`0`。如果你想返回一个`float`或`double`值，你需要做类似的事情`1 * 1.0 / 2`，这将返回`0.5`。将整数乘以或除以 double 或 float 会将其转换为该格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T23:08:41.827

```
public class test
{
  public static void main(String[] args) 
  {
   int total = 2;
   int rn = 1;
   double rnp = (rn / (float)total) * 100;
   System.out.println(rnp);
 }
} 
```

# maven - 验证 Maven 原型属性

> ID：15649065
> 
> 赞同：2
> 
> 时间：2013-03-26T23:06:05.753
> 
> 标签：maven, maven-2, maven-archetype

有没有办法验证提供给 Maven 原型的属性？如果有怎么办？

我的archetype-metadata.xml 文件中有一个自定义的requiredProperty。这些值必须与某个正则表达式匹配，我想在原型：生成期间验证这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-04T12:20:07.040

我已经在 maven-archetype 中实现了这个功能，并将其作为拉取请求提交：

[https://issues.apache.org/jira/browse/ARCHETYPE-487](https://issues.apache.org/jira/browse/ARCHETYPE-487)

例子：

```
 <requiredProperties>
    <requiredProperty key="pluginPackage">
      <validationRegex><![CDATA[^[a-z][a-z0-9_]*(\.[a-z0-9_]+)+[0-9a-z_]$]]></validationRegex>
    </requiredProperty>
    <requiredProperty key="pluginId">
      <validationRegex><![CDATA[^[a-zA-Z0-9-]+$]]></validationRegex>
    </requiredProperty>
    <requiredProperty key="pluginName">
      <validationRegex><![CDATA[^([a-zA-Z_$][a-zA-Z\d_$]*\.)*[a-zA-Z_$][a-zA-Z\d_$]*$]]></validationRegex>
    </requiredProperty>
    <requiredProperty key="pluginProvider">
    </requiredProperty>
    <requiredProperty key="pluginZipFileName">
      <validationRegex><![CDATA[^[^*&%\s]+$]]></validationRegex>
    </requiredProperty>
    <requiredProperty key="pluginVersion">
      <validationRegex><![CDATA[^[0-9]+\.[0-9]+\.[0-9]+$]]></validationRegex>
    </requiredProperty>
  </requiredProperties> 
```

然后，您将获得经过验证的输入：

```
[INFO] Using property: groupId = com.nick
Define value for property 'artifactId': abc
Define value for property 'version' 1.0-SNAPSHOT: : 
[INFO] Using property: package = com.nick
Define value for property 'pluginId' (should match expression '^[a-zA-Z0-9-]+$'): test-plugin525
Define value for property 'pluginName' (should match expression '^([a-zA-Z_$][a-zA-Z\d_$]*\.)*[a-zA-Z_$][a-zA-Z\d_$]*$'): NickTest101
Define value for property 'pluginPackage' (should match expression '^[a-z][a-z0-9_]*(\.[a-z0-9_]+)+[0-9a-z_]$'): com.nicholas.fun
Define value for property 'pluginProvider': Nicholas DiPiazza
Define value for property 'pluginVersion' (should match expression '^[0-9]+\.[0-9]+\.[0-9]+$'): 1.0
Value does not match the expression, please try again: 
```

注意：它仍然不会正则表达式验证批量输入。请参阅：[https ://issues.apache.org/jira/browse/ARCHETYPE-532](https://issues.apache.org/jira/browse/ARCHETYPE-532)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T15:47:06.500

我现在正在看这个，尽管在原型插件中没有明确支持这一点，也没有在原型-metadata.xml 中设置验证规则/类型的方法，因为它使用速度，你可以操纵它并让它做一些基本验证。正如评论所说 - 它并不漂亮，但它有效......

请参阅这篇文章[Maven 原型所需的属性编号](https://stackoverflow.com/questions/14101681/maven-archetype-required-property-number)

更新：这现在是可能的。请参阅上面的其他答案，或[https://issues.apache.org/jira/browse/ARCHETYPE-487](https://issues.apache.org/jira/browse/ARCHETYPE-487)

# c# - 判断远程计算机是否在线/离线

> ID：15649066
> 
> 赞同：-1
> 
> 时间：2013-03-26T23:06:07.510
> 
> 标签：c#, .net, networking

我在城市的不同位置有一堆计算机（运行 Windows 7），我需要知道哪些计算机实时在线。由于没有一台计算机具有静态 IP 地址，因此我无法使用通常的 ping 计算机机制。

我最初的想法是创建一个 Windows 服务并将其安装在每个客户端上，然后让各自的服务 ping 一个中央服务器（我有一个亚马逊 EC2 帐户，运行 Windows 操作系统），它可以跟踪每台各自计算机的最后一次 ping 时间收到了。然后，基于网站的仪表板将从服务器读取数据库，并根据最后记录的 ping 判断相应计算机是否在线/离线。

现在，所有这一切似乎都需要做很多工作，因为这一定是一个相当普遍的问题。任何人都可以建议一个开箱即用的解决方案或类似的机制来实现我的目标，即监控没有静态 IP 地址的远程计算机的在线/离线状态。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:11:10.860

我的一个朋友使用 www.no-ip.org。他所做的是在连接到 no-ip.org 的计算机上运行程序并保持某个地址（例如：my_computer_1.no-ip.org）是最新的，以便即使 IP 已更改，它也可以链接到他的 PC . 像这样，您可以为所有 PC 设置一个伪静态地址，并尝试连接到这些地址以查看 PC 是否在线。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:11:12.017

PRTG显示器？

[http://www.paessler.com/prtg](http://www.paessler.com/prtg)

它主要用于服务器，但非常适合您的场景。

# c# - 派生 XAML 用户控件

> ID：15649068
> 
> 赞同：1
> 
> 时间：2013-03-26T23:06:18.620
> 
> 标签：c#, wpf, user-controls, derived-class

我是 WPF 新手，我有一个问题：

在我的项目中，我通常使用许多从我的“基本”用户控件派生的用户控件，它们有一些功能可以继承给我的所有用户控件。

使用 WPF（派生与 winform 相同）是否也可以派生 XAML？我希望创建一个带有 XML 命名空间的标头和重要的 UserControl.Resources 的 XAML。

可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:34:41.493

如果您希望在您的用户控件之间共享资源，请将它们放在针对您的用户控件基本类型的样式中。要在整个应用程序中访问（和应用）这些资源，请在 App.xaml 中定义它们。

您可以在基本类型的[样式](http://msdn.microsoft.com/en-au/library/system.windows.style.aspx)中定义它们：

```
<Style TargetType={x:Type YourBaseType}>
    <Style.Resources>
       <!-- define your resources here -->
    </Style.Resources>
</Style> 
```

或者，您可以将它们应用于所有 UserControls（可能是不可取的）：

```
<Style TargetType={x:Type UserControl}>
    <Style.Resources>
      <!-- define your resources here -->
    </Style.Resources>
</Style> 
```

如果您希望获得视觉方面，请再次使用样式，在 App.config 定义中应用 Setter。如果需要，这些可以被特定实例“覆盖”。也看看[ControlTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate.aspx)。

# sublimetext2 - 使用 sublime text 2 for Mac 的 FTP

> ID：15649069
> 
> 赞同：0
> 
> 时间：2013-03-26T23:06:23.723
> 
> 标签：sublimetext2

有没有办法使用 Mac 的 Sublime Text 2 在 ftp 上打开文件，或者是否有教程解释了如何做到这一点？

我一直在环顾四周，找不到任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:09:55.370

有一个很棒的包可以为 Sublime 添加 SFTP 和 FTP 功能。查看[Sublime SFTP](http://wbond.net/sublime_packages/sftp)。有免费试用版，但值得 16 美元的许可证。

# python - 如何在 python 中将数据聚合到字典（或其他数据库）中？

> ID：15649070
> 
> 赞同：1
> 
> 时间：2013-03-26T23:06:26.260
> 
> 标签：python, database, string, dictionary

我想知道以下是否是python中聚合需要通过多个键在另一个函数中查询的数据的好方法，或者我是否会使用SQLite读取和写入数据有更好的性能。

例如聚合函数的一些伪代码：

```
import sys

def aggregatesources(sys.argv[1],sys.argv[2],sys.argv[3]):
    source1 = open(sys.argv[1], 'r') #source1.txt
        source1data = source1.read()
    source2 = open(sys.argv[2], 'r') #source2.txt
        source1data = source2.read()
    source3 = open(sys.argv[3], 'r') #source3.txt
        source1data = source3.read()

    aggregated_data = source1 + source2 + source3 # + etc... 
```

这是需要聚合来源的功能，但我的问题是当我将来源提供为：

```
type1, 32
type2, 9
type3, 12
type4, 21
etc... 
```

有没有办法获取聚合数据并将其关联到更大的字典中，以便：

```
type1, [source1, 32], [source2,etc...], [etc...] 
```

我想使用 python 的字典查询速度来做到这一点，但如果有其他解决方案可以做同样的事情，请详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:56:43.060

这应该可以满足您的需求：

```
import csv

def add_source_to_dict(mydict, sourcefilename):
  with open(sourcefilename, 'rb') as csvfile:
    my_reader = csv.reader(csvfile)
    for atype, value in my_reader:
      if not atype in mydict:
        mydict[atype]={}
      mydict[atype][sourcefilename] = value
  return mydict

data = {}

data = add_source_to_dict(data, "source1.txt") 
```

交互式：

```
>>> data = {}
>>> data = add_source_to_dict(data, "source1.txt")
>>> data = add_source_to_dict(data, "source2.txt")
>>> data
{
  'type1,': {
    'source2.txt': '44', 
    'source1.txt': '32'
  }, 
  'type3,': {
    'source2.txt': '46', 
    'source1.txt': '12'
  }, 
  'type2,': {
    'source2.txt': '45', 
    'source1.txt': '9'
  }, 
  'type4,': {
    'source2.txt': '47', 
    'source1.txt': '21'
  }
} 
```

# css - CSS - 裁剪图像高度以匹配文本长度

> ID：15649072
> 
> 赞同：0
> 
> 时间：2013-03-26T23:06:39.197
> 
> 标签：css, crop

我有 2 个东西共享部分 - 一个由文本组成的标题和一个浮动到其右侧的图像。我希望图像宽度始终为 308px，并根据文本长度的需要裁剪其高度。我对为 .location 设置固定高度不感兴趣，因为内容长度可能会改变。如何才能做到这一点？（谢谢！）

的HTML：

```
<section class="location">
<img src="http://evinwolverton.com/img/disc.jpg">
<header>
    <h2>This Is A Headline</h2>
    Etiam porta sem malesuada magna<br/> 
        Mollis euismod. Duis mollis<br/>
        Est non commodo luctus, nisi erat<br/>
        Porttitor ligula, eget lacinia odio<br/>
        Sem nec elit.
</header>
 </section> 
```

CSS：

```
.location {
    border: 2px solid #ccc;
    overflow: hidden;
    width: 620px;
    color: #666;
    margin: 40px 0;
}

.location header {
    float: left;
    padding: 25px;
    width: 258px;
}

.location h2 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
    color: #333;
}   

.location img {
    float: right;
    width: 308px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:15:36.297

使用背景图像的替代解决方案，如果您希望这是一个实际的`<img>`标签，则可以`.location`相对定位，保持溢出隐藏在这里并给图像一个绝对位置。您可能还需要在文本支架上提供一些边距，以确保它不会落后于图像。

```
.location {
    position: relative;
    overflow: hidden;
}
.location img {
    position: absolute;
    top: 0px;
    right: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:13:38.443

最简单的方法是使用`background-image`与右上角对齐的`no-repeat`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:13:43.470

如果您的图像不需要是`img`标签，您可以将其作为背景图像应用到您的标题。但我假设情况并非如此。

尝试：

```
.location img {
  position:absolute;
  clip:rect(0px,60px,200px,0px);
} 
```

[http://www.w3schools.com/cssref/pr_pos_clip.asp](http://www.w3schools.com/cssref/pr_pos_clip.asp)

[编辑]

抱歉，尝试一下`clip: rect(0px, 308px, 100%, 0px);`，我很确定您需要将图像浮动**在**标题中。

# tfs - TFS Web 访问任务板是否仅显示前 20 个工作项？

> ID：15649080
> 
> 赞同：3
> 
> 时间：2013-03-26T23:07:26.137
> 
> 标签：tfs, scrum, workitem, tfs-web-access

在使用 TFS 2012 Web Access 使用 MSF Scrum 2.1 运行 sprint 时，我发现使用任务板很难。在 Web 访问中，导航到 WORK | 积压 | 产品待办事项 | 板，似乎只有前 20 个 PBI和错误在所有区域和迭代的*所有PBI 和错误的查询中。*这些 PBI 和错误的完整列表显示在 WORK | 积压 | 产品待办事项 | 积压的项目，但只有任务板中的前 20 名。

有没有办法允许超过 20 个任务板项目，或者每组 20 个分页，或者将其配置为显示来自不同查询的前 20 个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T16:21:18.157

进一步检查后，它仅显示标记为新的 20 个项目，而呈现所有已批准和已提交的工单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T21:45:54.987

根据指向[文档的此](https://msdn.microsoft.com/library/hh543813%28v=vs.120%29.aspx)[MSDN 帮助问题](https://social.msdn.microsoft.com/Forums/vstudio/en-US/c7f725d1-d504-4d90-8996-64854a34e3f6/help-tfs-frustratingly-product-backlog-board-does-not-display-all-user-stories?forum=tfsworkitemtracking)的答案，似乎无法在 TFS 2013.4 之前在本地更改新建/完成列。

> 问：我可以增加显示在看板第一列或最后一列的工作项的数量吗？
> 答：对于 Visual Studio Online 和 TFS 2013.4 更新，您可以。请参阅看板板上的工作。对于 TFS 2013.4 之前的本地 TFS 部署，您不能。第一列和最后一列预设为最多显示 20 个项目。

（原始文章中的“看板工作”链接已预先损坏）

# java - 用于 MMORPG 的 JPA、JDBC 和 NoSQL

> ID：15649084
> 
> 赞同：2
> 
> 时间：2013-03-26T23:07:39.630
> 
> 标签：java, jpa, jdbc, nosql, rdbms

我们正在使用 Libgdx/Netty 开发一款 2D MMORPG 太空射击游戏，但我们遇到了一个关于数据无法解决的问题。

*   如果我们使用 JPA 和 RDBMS 我们可以实现 ACID 并简化数据管理代码
*   如果我们使用 JDBC 宽度 Spring 的支持，我们可以提高速度，但会使数据管理代码复杂化
*   我们在 NoSQL 开发方面没有经验，但是速度优势（至关重要）是否会如此之大，以至于我们应该放弃轻松查询

我们被卡住了，请帮助我们做出决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:30:06.680

> 我们被卡住了，请帮助我们做出决定。

这肯定取决于要求。现在我怎么想。如果主要目标是性能，我建议您实现自己的`ORM`，因为您将完全控制查询，主要是您可以针对特定要求优化所有查询。

我不是这样说`JPA`，`EclipseLink`或者另一个框架肯定是错误的，但大多数`ORM`框架主要是为了目标独立于数据库层而指定的，因此应用程序独立于数据源类型，但可以肯定的是，您可以通过实施适当的数据源设计来实现它模式即`AbstractDAOFactory`等`Mappers`。

我还必须提到，自己的主要缺点`ORM`是实施需要很多时间，但如果你想创建一个好的、高效的、有效的项目，它必须需要一些时间。

由于这是许多视图，有人建议您使用`JPA`,`Spring`或`JDBC`（其中`JDBC`肯定更快 as `JPA`）并且有人更喜欢 own `ORM`。我认为从更多开发人员那里获得的经验应该足够了。

如果您想使用技术，请使用您知道的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:32:17.580

1.  当然，您意识到 JPA 使用 JDBC。
2.  Spring 可以像 JPA 一样轻松实现 ACID。我不知道您指的是什么“速度”优势。发展速度？交易速度？为什么 Spring 会使数据管理代码复杂化？这是另一个不正确的说法。
3.  你问 NoSQL 的速度是多少？发展？运行？NoSQL 没有 ACID。如果这对你很重要，你为什么还要考虑它？NoSQL 意味着“非关系”。你的数据是相关的吗？如果是，你为什么要考虑 NoSQL？

您无法通过谈论技术和猜测来决定性能问题。唯一的方法是对它们进行基准测试，并为您真正关心的交易获取一些真实数据。

编写基于接口的 DAO，使用每种候选技术实现，并衡量实际结果。这就是如何决定使用哪种持久性技术。

你最了解哪一个？如果没有人知道 NoSQL，请不要使用它。如果您不了解 JPA，请不要使用它。Spring JDBC 模板允许您使用事务编写自定义 SQL。如果您已经非常了解关系数据库和 Spring，为什么不直接使用它呢？

# netcdf - 如何将多个图像放入 GrADS 元文件中，而无需一一进行

> ID：15649086
> 
> 赞同：0
> 
> 时间：2013-03-26T23:07:52.833
> 
> 标签：netcdf, grads

我在 GrADS 工作以生成模型运行图（netcdf 文件），我对这个程序非常陌生。我正在尝试找出如何将多个图像发送到元数据（所有来自动画的图像），而不必一次处理一个。

另一种选择是减慢屏幕上的动画速度。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-22T22:34:46.347

我的建议是停止使用 GrADS 并改用 Python。我可以推荐使用[Iris 库](http://scitools.org.uk/iris/docs/latest/gallery.html)。

# regex - 在 boost regex 中组合两个正则表达式

> ID：15649087
> 
> 赞同：0
> 
> 时间：2013-03-26T23:08:04.750
> 
> 标签：regex, boost-regex

我有两个正则表达式，它们查找一个 url 并确定该 URL 是否是一个 silverlight 视频 url

1.  URL 在 .isma、.ismv、.isml 的任何地方都应该至少有一个

    正则表达式：.ism(a|v|l)

和

1.  URL 应包含字符串“/QualityLevels({bitrate})/Fragments(audio={start-time})”

    正则表达式：/QualityLevels(\d+)/Fragments(\b(audio|video|text)\b=\d+)

如何将这两个字符串合二为一并确保两个条件都满足？

```
is_silverlight_livestream_url(const char *url)
{
    /*  expecting something that ends with
     *      "xxx.isml/QualityLevels(<bitrate>)/Fragments(<type>=<timecode>)"
     *  on-demand streams have the extension ".ism" instead of ".isml"
     */
    static boost::regex regex(my_regex_str);
    try {
        if (boost::regex_match(url, regex) == true) {
            return true;
        }
    } catch (std::runtime_error e) {
    }
    return false;
} 
```

桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:13:31.287

您将有类似这样的内容，在其中查找一个字符串，然后是（可选）额外字符（如果您知道此 URL 的外观，您可能会更具体），然后是文件扩展名：

```
/QualityLevels(\d+)/Fragments(\b(audio|video|text)\b=\d+)(.+?)?.ism(a|v|l) 
```

# c - fgetpos() 行为取决于换行符

> ID：15649089
> 
> 赞同：7
> 
> 时间：2013-03-26T23:08:10.253
> 
> 标签：c, windows, file, newline

考虑这两个文件：

file1.txt（Windows 换行符）

```
abc\r\n
def\r\n 
```

file2.txt（Unix 换行符）

```
abc\n
def\n 
```

我注意到对于 file2.txt，获得的位置`fgetpos`没有正确增加。我在 Windows 上工作。

让我给你看一个例子。以下代码：

```
#include<cstdio>

void read(FILE *file)
{
    int c = fgetc(file);
    printf("%c (%d)\n", (char)c, c);

    fpos_t pos;
    fgetpos(file, &pos); // save the position
    c = fgetc(file);
    printf("%c (%d)\n", (char)c, c);

    fsetpos(file, &pos); // restore the position - should point to previous
    c = fgetc(file);     // character, which is not the case for file2.txt
    printf("%c (%d)\n", (char)c, c);
    c = fgetc(file);
    printf("%c (%d)\n", (char)c, c);
}

int main()
{
    FILE *file = fopen("file1.txt", "r");
    printf("file1:\n");
    read(file);
    fclose(file);

    file = fopen("file2.txt", "r");
    printf("\n\nfile2:\n");
    read(file);
    fclose(file);

    return 0;
} 
```

给出这样的结果：

```
file1:
a (97)
b (98)
b (98)
c (99)

file2:
a (97)
b (98)
  (-1)
  (-1) 
```

file1.txt 按预期工作，而 file2.txt 行为奇怪。为了解释它有什么问题，我尝试了以下代码：

```
void read(FILE *file)
{
    int c;
    fpos_t pos;
    while (1)
    {
        fgetpos(file, &pos);
        printf("pos: %d ", (int)pos);
        c = fgetc(file);
        if (c == EOF) break;
        printf("c: %c (%d)\n", (char)c, c);
    }
}

int main()
{
    FILE *file = fopen("file1.txt", "r");
    printf("file1:\n");
    read(file);
    fclose(file);

    file = fopen("file2.txt", "r");
    printf("\n\nfile2:\n");
    read(file);
    fclose(file);

    return 0;
} 
```

我得到了这个输出：

```
file1:
pos: 0 c: a (97)
pos: 1 c: b (98)
pos: 2 c: c (99)
pos: 3 c:
 (10)
pos: 5 c: d (100)
pos: 6 c: e (101)
pos: 7 c: f (102)
pos: 8 c:
 (10)
pos: 10

file2:
pos: 0 c: a (97) // something is going wrong here...
pos: -1 c: b (98)
pos: 0 c: c (99)
pos: 1 c:
 (10)
pos: 3 c: d (100)
pos: 4 c: e (101)
pos: 5 c: f (102)
pos: 6 c:
 (10)
pos: 8 
```

我知道这`fpos_t`并不意味着由编码器解释，因为它取决于实现。但是，上面的示例解释了`fgetpos`/的问题`fsetpos`。

换行序列怎么可能影响文件的内部位置，甚至在它遇到这些字符之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:20:52.407

我想说这个问题可能是由于第二个文件混淆了实现，因为它是以文本模式打开的，但它不符合要求。

在标准中，

> 文本流是组成行的有序字符序列，每行由零个或多个字符加上一个终止换行符组成

您的第二个文件流不包含有效的换行符（因为它`\r\n`在内部寻找转换为换行符）。结果，实现可能无法正确理解行长度，并且当您尝试在其中移动时会感到无可救药的困惑。

此外，

> 可能必须在输入和输出上添加、更改或删除字符，以符合在主机环境中表示文本的不同约定。

请记住，库不仅会在您调用时从文件中读取每个字节`fgetc`- 它会将整个文件（对于一个如此小的文件）读入流的缓冲区并对其进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:35:49.427

我将此添加为[teppic 答案的](https://stackoverflow.com/a/15649862/12711)支持信息：

在处理`FILE*`已作为文本而不是二进制文件打开的a 时， `fgetpos()`VC++ 11 (VS 2012) 中的函数可能（并且以您的`file2.txt`示例为例）最终会出现在这段代码中：

```
// ...

if (_osfile(fd) & FTEXT) {
        /* (1) If we're not at eof, simply copy _bufsiz
           onto rdcnt to get the # of untranslated
           chars read. (2) If we're at eof, we must
           look through the buffer expanding the '\n'
           chars one at a time. */

        // ...

        if (_lseeki64(fd, 0i64, SEEK_END) == filepos) {

            max = stream->_base + rdcnt;
            for (p = stream->_base; p < max; p++)
                if (*p == '\n')                     // <---
                    /* adjust for '\r' */           // <---
                    rdcnt++;                        // <---

// ... 
```

它假定缓冲区中的任何`\n`字符最初`\r\n`都是在将数据读入缓冲区时已被规范化的序列。因此，有时它会尝试解释`\r`它认为先前处理文件已从缓冲区中删除的那个（现在丢失的）字符。当您接近文件末尾时，就会发生这种特殊的调整。然而，还有其他类似的调整来解释处理中删除的`\r`字节`fgetpos()`。

# c# - 如何在运行时更改 Lightswitch 应用程序语言

> ID：15649091
> 
> 赞同：1
> 
> 时间：2013-03-26T23:08:22.857
> 
> 标签：c#, silverlight, visual-studio-lightswitch

我按照这篇文章在 Visual Studio LightSwitch 2012 App 中创建了本地化

[演练：本地化 LightSwitch 应用程序](http://msdn.microsoft.com/en-us/library/vstudio/xx130603%28v=vs.110%29.aspx)

现在应用程序将根据运行应用程序的计算机中设置的语言自动更改语言。

> 活动的 Windows 语言包确定将显示哪种语言。

有没有办法在运行时通过代码改变它？

我的想法是，如果我可以通过代码设置语言，那么我可以有一个切换语言的按钮！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:45:54.397

虽然不太可能是一个答案，但这可能会让您了解如何在 LS 中实现这一点。

[http://www.youtube.com/watch?v=47hyerUBIag](http://www.youtube.com/watch?v=47hyerUBIag)

对于应用程序中的所有文本，您很可能需要一个特定于文化的资源文件，然后将它们全部加载或在附加的视频中以异步方式拉取这些资源文件。

干杯

# string - Xtext 中的字符串匹配

> ID：15649093
> 
> 赞同：0
> 
> 时间：2013-03-26T23:08:30.803
> 
> 标签：string, compare, match, xtext

这将是一个非常笼统的问题，但不幸的是，我对答案的搜索并不成功。

我想知道的是，在 Xtext 中匹配两个字符串对象的最简单方法是什么？我几乎可以肯定，这一定是可能的，但如何呢？我正在研究 Xbase 以将这种功能（如果可用）直接扩展到 Xtext 构建的 DSL 中。

我的出发点是，我想通过使用 EMFQuery 比较来自某些模型实例的两个对象的字符串属性。但是 EMFQuery 在其 WHERE 中不直接支持 BooleanCondition，它可以与 String.contains() 或 .regionMatches(); 一起使用。并且绕道会很昂贵，因为我打算仅使用 EMFQuery 来测试我的概念模型查询方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:50:36.397

如果您有一种基于 Xbase 构建的语言，则可以简单地使用 java.util.Pattern。不过，我不确定我是否理解你的问题。

# python - numpy排序奇怪的行为

> ID：15649097
> 
> 赞同：1
> 
> 时间：2013-03-26T23:08:51.597
> 
> 标签：python, python-2.7, numpy

我正在查看我之前提出的问题的答案。[numpy.unique 保留订单](https://stackoverflow.com/questions/15637336/numpy-unique-with-order-preserved)他们工作得很好，但举一个例子，我有问题。

```
b
['Aug-09' 'Aug-09' 'Aug-09' ..., 'Jan-13' 'Jan-13' 'Jan-13']
b.shape
(83761,)
b.dtype
|S6
bi, idxb = np.unique(b, return_index=True)
months = bi[np.argsort(idxb)]
months
ndarray: ['Feb-10' 'Aug-10' 'Nov-10' 'Oct-12' 'Oct-11' 'Jul-10' 'Feb-12' 'Sep-11'\n  'Jan-10' 'Apr-10' 'May-10' 'Sep-09' 'Mar-11' 'Jun-12' 'Jul-12' 'Dec-09'\n 'Aug-09' 'Nov-12' 'Dec-12' 'Apr-12' 'Jun-11' 'Jan-11' 'Jul-11' 'Sep-10'\n 'Jan-12' 'Dec-10' 'Oct-09' 'Nov-11' 'Oct-10' 'Mar-12' 'Jan-13' 'Nov-09'\n 'May-11' 'Mar-10' 'Jun-10' 'Dec-11' 'May-12' 'Feb-11' 'Aug-11' 'Sep-12'\n 'Apr-11' 'Aug-12'] 
```

为什么月份从 2 月 10 日而不是 09 年 8 月开始？使用较小的数据集，我得到了预期的行为，即从 09 年 8 月开始的月份。我得到了 2 月 10 日对上一个问题的所有答案。

* * *

这有效

```
months = []
for bi in b:
    if bi not in months:
        months.append(bi) 
```

* * *

[http://www.uploadmb.com/dw.php?id=1364341573](http://www.uploadmb.com/dw.php?id=1364341573) 这是我的数据集。自己试试。

```
import numpy as np
f=open('test.txt','r')
res = []
for line in f.readlines():
   res.append(line.strip())

a = np.array(res)
_, idx = np.unique(a, return_index=True)
print a[np.sort(idx)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:19:36.860

更新：

我相信问题实际上是这样的。您正在运行哪个版本的 Numpy？

[http://projects.scipy.org/numpy/ticket/2063](http://projects.scipy.org/numpy/ticket/2063)

我重现了您的问题，因为我测试的 Numpy 的 Ubuntu 安装是 1.6.1，并且该错误已修复为 1.6.2 及更高版本。

升级 Numpy，然后再试一次，它在我的 Ubuntu 机器上对我有用。

* * *

在这些行中：

```
bi, idxb = np.unique(b, return_index=True)
months = bi[np.argsort(idxb)] 
```

有两个错误：

1.  您想实际使用原始数组上的排序索引，`b[...]`
2.  您想要排序的索引，而不是排序索引的索引，所以使用`sort`not `argsort`。

这应该有效：

```
bi, idxb = np.unique(b, return_index=True)
months = b[np.sort(idxb)] 
```

* * *

是的，确实如此，使用您的数据集并在 Mac OS 10.6、64 位上运行 python 2.7、numpy 1.7

```
Python 2.7.3 (default, Oct 23 2012, 13:06:50) 

IPython 0.13.1 -- An enhanced Interactive Python.

In [1]: import numpy as np

In [2]: np.__version__
Out[2]: '1.7.0'

In [3]: from platform import architecture

In [4]: architecture()
Out[4]: ('64bit', '')

In [5]: f = open('test.txt','r')

In [6]: lines = np.array([line.strip() for line in f.readlines()])

In [7]: _, ilines = np.unique(lines, return_index = True)

In [8]: months = lines[np.sort(ilines)]

In [9]: months
Out[9]: 
array(['Aug-09', 'Sep-09', 'Oct-09', 'Nov-09', 'Dec-09', 'Jan-10',
       'Feb-10', 'Mar-10', 'Apr-10', 'May-10', 'Jun-10', 'Jul-10',
       'Aug-10', 'Sep-10', 'Oct-10', 'Nov-10', 'Dec-10', 'Jan-11',
       'Feb-11', 'Mar-11', 'Apr-11', 'May-11', 'Jun-11', 'Jul-11',
       'Aug-11', 'Sep-11', 'Oct-11', 'Nov-11', 'Dec-11', 'Jan-12',
       'Feb-12', 'Mar-12', 'Apr-12', 'May-12', 'Jun-12', 'Jul-12',
       'Aug-12', 'Sep-12', 'Oct-12', 'Nov-12', 'Dec-12', 'Jan-13'], 
      dtype='|S6') 
```

* * *

好的，我终于可以在 Ubuntu 64 位上重现你的问题了：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 

IPython 0.12.1 -- An enhanced Interactive Python.

In [1]: import numpy as np

In [2]: np.__version__
Out[2]: '1.6.1'

In [3]: from platform import architecture

In [4]: architecture()
Out[4]: ('64bit', 'ELF')

In [5]: f = open('test.txt','r')

In [6]: lines = np.array([line.strip() for line in f.readlines()])

In [7]: _, ilines = np.unique(lines, return_index=True)

In [8]: months = lines[np.sort(ilines)]

In [9]: months
Out[9]: 
array(['Feb-10', 'Aug-10', 'Nov-10', 'Oct-12', 'Oct-11', 'Jul-10',
       'Feb-12', 'Sep-11', 'Jan-10', 'Apr-10', 'May-10', 'Sep-09',
       'Mar-11', 'Jun-12', 'Jul-12', 'Dec-09', 'Aug-09', 'Nov-12',
       'Dec-12', 'Apr-12', 'Jun-11', 'Jan-11', 'Jul-11', 'Sep-10',
       'Jan-12', 'Dec-10', 'Oct-09', 'Nov-11', 'Oct-10', 'Mar-12',
       'Jan-13', 'Nov-09', 'May-11', 'Mar-10', 'Jun-10', 'Dec-11',
       'May-12', 'Feb-11', 'Aug-11', 'Sep-12', 'Apr-11', 'Aug-12'], 
      dtype='|S6') 
```

* * *

Numpy 升级后在 Ubuntu 上工作：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 

IPython 0.12.1 -- An enhanced Interactive Python.

In [1]: import numpy as np

In [2]: np.__version__
Out[2]: '1.7.0'

In [3]: f = open('test.txt','r')

In [4]: lines = np.array([line.strip() for line in f.readlines()])

In [5]: _, ilines = np.unique(lines, return_index=True)

In [6]: months = lines[np.sort(ilines)]

In [7]: months
Out[7]: 
array(['Aug-09', 'Sep-09', 'Oct-09', 'Nov-09', 'Dec-09', 'Jan-10',
       'Feb-10', 'Mar-10', 'Apr-10', 'May-10', 'Jun-10', 'Jul-10',
       'Aug-10', 'Sep-10', 'Oct-10', 'Nov-10', 'Dec-10', 'Jan-11',
       'Feb-11', 'Mar-11', 'Apr-11', 'May-11', 'Jun-11', 'Jul-11',
       'Aug-11', 'Sep-11', 'Oct-11', 'Nov-11', 'Dec-11', 'Jan-12',
       'Feb-12', 'Mar-12', 'Apr-12', 'May-12', 'Jun-12', 'Jul-12',
       'Aug-12', 'Sep-12', 'Oct-12', 'Nov-12', 'Dec-12', 'Jan-13'], 
      dtype='|S6') 
```

# python - OpenMP 中是否有与 Python 的 threading.Event 类似的机制？

> ID：15649100
> 
> 赞同：2
> 
> 时间：2013-03-26T23:09:05.870
> 
> 标签：python, c, openmp

我正在尝试列出解决方案以`threading.Event`在 C 中实现 Python [1] 的功能。

通常，当需要线程之间的同步时，第一个使用/解释的机制是锁（又名互斥锁）。python 的`threading.Event`类是另一种同步机制，可用于原子地阻塞线程，直到特定条件为真。

我认为使用`pthread`条件变量属性[2]可以做到这一点。

怎么样`omp`，这可能吗？根据 python 中发生的情况，我用**虚构**的类型`Event`和编写了以下示例`EventsQueue`：

```
int nthreads;
Event *evt;
EventsQueue *queue;

#pragma omp parallel private(evt)
{
    #pragma omp single
    {
        nthreads = omp_get_num_threads()-1;
    }
    if (!omp_get_thread_num()) /*master thread*/
    {
        while (nthreads)
        {
            evt = events_queue_pop(queue);
            evt_set(evt);
        }
    }
    else                       /*other threads */
    {
        evt = alloc_event();
        events_queue_append(queue, evt);
        /* each threads waits for master thread to set its event*/
        evt_wait(evt);
        free_event(evt);
        #pragma omp critical
        {
            nthreads--;
        }
    }
} 
```

如您所见，我可以得到与 Python 类似的效果`threading.Lock`（`#pragma omp critical`在我用它保护的示例中`nthreads`）。问题是`threading.Event`。对于 OpenMP，我找不到类似的东西。

[1] [http://docs.python.org/2/library/threading.html#event-objects](http://docs.python.org/2/library/threading.html#event-objects)

[2] [http://www.cs.cf.ac.uk/Dave/C/node31.html#SECTION003120000000000000000](http://www.cs.cf.ac.uk/Dave/C/node31.html#SECTION003120000000000000000)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:51:45.913

注意：此解决方案不正确。查看此答案末尾的编辑。

嗯...我想我已经找到了方法。查看 Python 的线程模块的源代码，[1]，实际上看起来很简单。

它的问题是保持*FIFO*的*可重入锁*（在 OpenMP 中实现为`omp_nest_lock_t`）。每当`Event.wait([timeout])`调用 a 时，一个新的锁被附加到*FIFO*并立即*获得*两次（第二次将阻塞，直到第一次被释放！）。然后，当被调用时， *FIFO*`Event.set()`中的所有锁都会被释放并从中移除。

 *我希望这个答案对将来遇到此问题的任何人都有用。

[1] [http://svn.python.org/projects/python/branches/py3k/Lib/threading.py](http://svn.python.org/projects/python/branches/py3k/Lib/threading.py)

编辑：我发现一篇文章说这个解决方案不正确并谈到了这个问题：

[2] [http://www.michaelsuess.net/publications/wirz_suess_leopold_taskpools_06.pdf](http://www.michaelsuess.net/publications/wirz_suess_leopold_taskpools_06.pdf)*

# mongodb - Scala Lift - Cloudbees 500 错误，mongo 记录

> ID：15649102
> 
> 赞同：0
> 
> 时间：2013-03-26T23:09:11.053
> 
> 标签：mongodb, scala, lift, cloudbees

我的应用程序在本地和专用服务器环境中都有一个完美的运行版本。

我现在正在单独通过云托管服务，但遇到了一个奇怪的错误，我非常感谢一些帮助。

有问题的错误是由为此模型创建的新记录引起的：

```
 class Panel_Model private() extends MongoRecord[Panel_Model] with ObjectIdPk[Panel_Model] {

    def meta = Panel_Model

    object dbid extends LongField(this)
    object handle extends StringField(this, 50)
    object room extends StringField(this, 50)
    object user extends StringField(this, 50)
    object name extends StringField(this, 50)
    object element extends StringField(this, 50)

    object slide extends MongoJsonObjectListField(this, Panel_Model_Slide)

    object state extends JsonObjectField(this, Panel_Model_State) {
        def defaultValue = null.asInstanceOf[Panel_Model_State]
    }

    object time extends JsonObjectField(this, Panel_Model_Time) {
        def defaultValue = null.asInstanceOf[Panel_Model_Time]
    }

}

object Panel_Model extends Panel_Model with MongoMetaRecord[Panel_Model] {
    override def collectionName = "panels"
}

case class Panel_Model_Slide (

    handle: String,
    media: String,
    param: Map[String, String],
    content: String,
    view: String,
    index: Int,
    active: Int

) extends JsonObject[Panel_Model_Slide] {
     def meta = Panel_Model_Slide
}

object Panel_Model_Slide extends JsonObjectMeta[Panel_Model_Slide]

case class Panel_Model_State (

    ready: Int,
    active: Int,
    locked: Int,
    slide: Map[String, Int]

) extends JsonObject[Panel_Model_State] {
    def meta = Panel_Model_State
}

object Panel_Model_State extends JsonObjectMeta[Panel_Model_State]

case class Panel_Model_Time (

    created: Long

) extends JsonObject[Panel_Model_Time] {
    def meta = Panel_Model_Time
}

object Panel_Model_Time extends JsonObjectMeta[Panel_Model_Time] 
```

产生错误的实际调用，仅在 cloudbees 环境中是这样的：

```
Panel_Model.createRecord.
dbid(dbid).
room(Room_Session.is).
user(User_Session.is).
name(fph.fileName).
handle(handle).
element(element).
state(Panel_Model_State(

    0, active, 0, Map(

    ("active" -> 1),
    ("total" -> 1)

)

)).
time(Panel_Model_Time(unix)).
save 
```

非常感谢任何帮助，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:29:37.933

您应该查看日志中的错误（bees app:tail 或 Web 控制台）以了解实际发生的错误是什么。

bees app:tail -a yourAppId - 并在结果处于错误状态时查看结果 - 这将有很大帮助。

# javascript - 在 asp.net 中启用超链接的回发 onclick

> ID：15649105
> 
> 赞同：1
> 
> 时间：2013-03-26T23:09:29.100
> 
> 标签：javascript, asp.net

我有一个超链接

```
<a href="" id="link1">Click</a> 
```

每当单击此链接时，我都会启用回发操作。

我们可以做的

`<a href="" id="link1" onclick="javascript:location.reload()">Click</a>`

但是，我想做一个页面回发而不是重新加载页面。

可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T23:14:03.590

很简单，用 a[`LinkButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)代替。

```
void LinkButton_Click(Object sender, EventArgs e) 
{
   Label1.Text="This is a postback";
} 
```

在 aspx 上：

```
 <asp:LinkButton id="LinkButton1" 
       Text="Click Me" 
       OnClick="LinkButton_Click" 
       runat="server"/> 
```

您正在使用 html 链接，如果您想使用服务器端代码，我建议您使用服务器控件。但是，如果您真的坚持，您可以通过 javascript 手动调用[__doPostBack 。](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

```
<a id="linkId"  href="javascript:void(0);" onclick="__doPostBack('linkId', '');">click me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T13:04:47.227

```
<a href='void()' onclick="javascript:postBackFromLink('<%=LinkButton1.ClientID %>'); return false;">Refresh Me</a><br /> 
```

[http://forums.asp.net/t/1077801.aspx?client+__doPostBack+from+within+a+usercontrol+Problem+Click+event+in+code+behind+never+reached+](http://forums.asp.net/t/1077801.aspx?client+__doPostBack+from+within+a+usercontrol+Problem+Click+event+in+code+behind+never+reached+)

但它只对基于用户控件的回发有用

# javascript - 当两个值都为 ON 和 ON 时，单选按钮触发事件

> ID：15649106
> 
> 赞同：0
> 
> 时间：2013-03-26T23:09:41.193
> 
> 标签：javascript, jquery, javascript-events

当用户单击两组 RADIO BUTTONS 上的 On 和 On 值时，我试图触发一个事件......

因此，当用户单击第一个 ON 时，它会说和警报出现，说 ON

当用户点击关闭时，会出现一个显示关闭的警报

当用户单击第二个 ON 时，它会弹出一个警报，显示 ON1 当他们单击关闭时，它会显示 OFF2

当他们点击 ON 和 ON 时，它会说一些不同的东西，比如 ON AND ON

这是js

```
 $('.radioButton').click(function(e){
   selected = $(this).val();
   if (selected === 'on'){
     alert('on')
   }

   else if (selected === 'off'){
     alert('off')
   }

   else if (selected === 'on1'){
     alert('on1')
   }

   else if (selected === 'off1'){
     alert('off1')
   }

   else if (selected === 'on' && 'on1'){
     alert('on and on')
   }

  }); 
```

这是小提琴

[http://jsfiddle.net/d0okie0612/3u4Hj/](http://jsfiddle.net/d0okie0612/3u4Hj/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:26:00.560

首先，给单选按钮一个名称属性来区分集合：

```
<input name="one" class="radioButton" id="r1" type="radio" value="on">
<input name="one" class="radioButton" type="radio" value="off">
<input name="two" class="radioButton" type="radio" value="on1">
<input name="two" class="radioButton" type="radio" value="off1"> 
```

然后，您可以检查为每个集合检查的值，如下所示：

```
var oneOn = $('input:radio[name=one]:checked').val();
var twoOn = $('input:radio[name=two]:checked').val(); 
```

最后：

```
if(oneOn === 'on' && twoOn === 'on1') {
    alert("yes!");
} 
```

您的原始方法无法工作，因为“选定”不能同时具有两个不同的值。

# jquery - jquery .toggle() 和 jquery .load() 的 Onclick 问题

> ID：15649110
> 
> 赞同：0
> 
> 时间：2013-03-26T23:09:55.477
> 
> 标签：jquery

为什么以下要求我单击两次才能打开并单击两次才能关闭？

当我用我喜欢的东西替换切换时，fadetoggle，为什么它会破坏 AJAX 加载请求（this.href）？

```
 $(document.body).ready(function () {
          $("li.span3 a").click(function (e) {
              $('.content').toggle().load(this.href);
              e.preventDefault();
              $("li.span3 a").click(function(e){
                  $('.content').toggle();
                  e.preventDefault();
              });
          });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:29:03.497

您所做的是在另一个事件处理程序中嵌入一个事件处理程序，因此在您启动第一个事件处理程序之前不会定义第二个事件处理程序：

```
 $(document).ready(function () {
       $("li.span3 a").click(function (e) {
          e.preventDefault();                  
          $('.content').toggle()
          [some other check here] {
             $('.content').load(this.href);
          }
       });
    }); 
```

# jquery - 更改未点击元素的不透明度

> ID：15649117
> 
> 赞同：1
> 
> 时间：2013-03-26T23:10:28.340
> 
> 标签：jquery, click, jquery-animate, opacity

我的网页上有一些元素，我希望当我单击其中一个元素时，其他元素（未单击的元素）的不透明度会发生变化。

这是一个元素的 HTML 代码：

```
<div class="element hover download" id="_4>
    <div class="front">
        <div class="element-image-front">
            <img src="./Post thumbnail images/raspberryPiboard.JPG"/>
        </div>
    </div>
    <div class="back">
        <a class="link" href="#/portfolio/chicken.html" onclick="gestionClic('compteur11');"><div class="element-image-back">
        <div class="element-image-back">
            <img src="./Post thumbnail images/raspberryPiboard.JPG"/>
        </div>
        </a>
    </div>
</div> 
```

当我单击一个元素时，这就是`class="link"`被单击的元素。

我试过这个但它不起作用：

```
$('.link').click(function() {
    $('.element').siblings().stop().animate({opacity: 0.4}, 300);
    $('.link').click(function() {
        $not('.element').stop().animate({opacity: 1.0}, 300);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:52:14.073

**第一：**清理你的 HTML 元素！

**第二：**在我的演示中工作

```
$('.element > img').click(function () {
    $(this).animate({opacity:0.4}).siblings().animate({opacity:1});
}); 
```

在你清理你的HTML之后......

```
<div class="element">
    <img src="{SRC}">
    <img src="{SRC}">
</div> 
```

所以你可以使用[.siblings()](http://api.jquery.com/siblings/)

**演示：http:** [//jsfiddle.net/l2aelba/nq3CN/](http://jsfiddle.net/l2aelba/nq3CN/)

* * *

如果你真的想使用你未清理的 HTML，那么就这样做......

```
$('.element img').click(function () {
     $('.element').find("img").not(this).animate({opacity:1});
    $(this).animate({opacity:0.4});
}); 
```

**演示：http:** [//jsfiddle.net/l2aelba/nq3CN/1/](http://jsfiddle.net/l2aelba/nq3CN/1/)

* * *

**你的例子：**

```
$('.element > .back > .link').click(function () {
    $(this).animate({opacity:1});
    $(this).parents(".element").find(".front > .element-image-front").animate({opacity:0.3});
}); 
```

**单击另一个：**

```
$('.element > .front > .element-image-front').click(function () {
    $(this).animate({opacity:1});
    $(this).parents(".element").find(".back > .link").animate({opacity:0.3});
}); 
```

应该在一个函数中完成，但您的 HTML 不清楚。因此，只需编写 2 个函数即可实现 100% 工作和 100% 绝对焦点元素正确

**演示：http:** [//jsfiddle.net/l2aelba/nq3CN/2/](http://jsfiddle.net/l2aelba/nq3CN/2/)

# web-services - Azure 云服务中 SignalR 的性能问题

> ID：15649118
> 
> 赞同：0
> 
> 时间：2013-03-26T23:10:36.000
> 
> 标签：web-services, signalr, signalr.client

我正在开发一个 Web 服务，该服务存储在 Windows Server 2012 虚拟机上的 Azure 云服务中，该虚拟机使用 SignalR 向连接到 Azure 网站的客户端发送消息。为了测试 SignalR 发送消息的性能，我们设计了一个特殊的端点来模拟发送到客户端的不同消息。

访问端点时，将迭代包含 400 个预定义事件对象的列表。然后将每个对象存储在数据库中，并在存储对象后向客户端发送一条消息，总共应发送 400 条消息。第一条消息到达速度很快，但随后的消息传递速度较慢，所有连接的客户端最多需要 20 分钟（我们目前仅在 Firefox 上打开网站的 5 个客户端进行测试，这对于花了这么长时间）来接收所有的消息。

为了发送消息，我在事件存储到数据库后使用的函数如下所示：

```
 public void SendEvent(string deviceId, Events event)
    {
        Connection conn = new Connection(url + "/Index");
        try
        {
            conn.Start().Wait();
            DevicesDao devicesDao = new DevicesDao();
            ClustersDao clustersDao = new ClustersDao();
            RegionsDao regionesDao = new RegionsDao();
            Devices device= devicesDao.GetDevice(deviceId);
            Clusters cluster = clustersDao.GetCluster(device.ClustersClusterId);
            List<Devices> devices = cluster.Devices.ToList();
            Regions region = regionsDao.GetRegionsById(cluster.RegionsRegionId);
            Pin pin = new Pin(device.Latitude, device.Longitude, event.CurrentDate, event.IMax, event.AMax, device.UniqueId, device.Alias, device, cluster, region);
            List<Pin> list = new List<Pin>();
            list .Add(pin);
            var json = new JavaScriptSerializer().Serialize(list);
            conn.Send(json).Wait();
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Error " + ex.Message + " \n Inner Exception " + ex.InnerException + " \n Stack Trace " + ex.StackTrace);
        }
    } 
```

在 Javascript 客户端中，我收到如下消息：

```
connection = $.connection('/Index');
connection.received(function (data) {
    if (isSismosShown) {
            setPoints(data);
    }
});

connection.start().done({transport: 'longPolling'}, function () {
    console.log('connection ready');
}); 
```

由于 Web 服务存储在 Azure 中，我不知道是否可以从 SignalR 页面尝试[性能调整，我没有太多使用 Azure 的经验。](https://github.com/SignalR/SignalR/wiki/Performance)我有哪些选择可以提高从 Azure 中的 Web 服务发送消息的速度？

# ruby-on-rails - 插入或更新操作后在 Rails 控制器中捕获 postgres 触发器

> ID：15649120
> 
> 赞同：1
> 
> 时间：2013-03-26T23:10:40.027
> 
> 标签：ruby-on-rails, postgresql, triggers, controllers

我有一个不同型号的应用程序。其中一个模型是通过成就与用户建立多对多关系的徽章模型。

在我的控制器中，我有一些逻辑来检查用户是否获得了成就，然后在关系表（成就）中进行插入。在控制器中进行一些硬编码后，我决定将逻辑带到 postgresql 中的触发器。

我已经编写了第一个徽章的触发器，即：

```
def change
execute <<-TRIGGER
CREATE OR REPLACE FUNCTION firstbadge() RETURNS trigger AS
$$
DECLARE
BEGIN
IF (select count(id) from User where facebookid=NEW.facebookid)==0 and (select count(id) from Achievement where user_id=NEW.id and badge_id=1)==0 then
    insert into Achievement(user_id,badge_id,created_at,updated_at)values(NEW.id,1,now(),now());
END IF;
RETURN NULL;
END;
$$ LANGUAGE plepgsql VOLATILE;
    DROP TRIGGER IF EXISTS add_badge_user ON paper;
    CREATE TRIGGER add_badge_user
    BEFORE INSERT ON User FOR EACH ROW
    EXECUTE PROCEDURE firstbadge();
TRIGGER
end 
```

我的控制器中插入新用户的操作是：

```
if !params[:FirstName].blank? and !params[:LastName].blank?
      usuario = User.new
      usuario.facebookid=params[:FacebookId]
      usuario.facebooktoken=params[:FacebookToken]
      usuario.firstname=params[:FirstName]
      usuario.lastname=params[:LastName]
      usuario.identifier=params[:FirstName]
      usuario.age=params[:Age]
      usuario.email=params[:Email]
      usuario.level=0
      usuario.save
      json={:Authorize=> true}
      render :json => json, :status => 200
    end 
```

但我有一个小问题，我需要控制器中的成就表（关系表）中最后插入的 id 以 JSON 格式返回。我的控制器中有许多其他功能需要接收更新或插入的 id。

如何在 postgresql 上捕获触发器的结果并在我的控制器中使用它们？我是否必须在我的控制器中进行查询以检索用户的最后成就，而不是从触发器接收它们？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:55:26.043

**简而言之：您正在采取一些措施脱离 Rails 的理念**。Rails 是一个固执己见的框架，如果你不按照 Rails 的方式做事，就会受到伤害。

首先，rails 社区普遍认为**逻辑不应该属于数据库，它应该属于你的应用程序**。关于这个有很多激烈的讨论，但如果你要使用 Rails，你必须习惯它，因为框架就是这样设计的。因此**，您应该在其中一个模型中使用回调而不是触发器**。

除此之外，您的**控制器代码似乎非常臃肿**。鼓励保持控制器代码非常精简，因为它更易于维护并且与 MVC 架构一致（控制器的职责应该只是实例化模型对象，对其执行操作，然后实例化视图）。一种常见的做法是将这种逻辑下推到模型中。

此外，您**似乎一点也不关心命名约定**。如果你不遵守关于这方面的准则，你会失去很多魔法和奇迹，让你自己的生活变得更加艰难。例如，如果您遵循了约定，您可以这样编写您发布的控制器代码：

```
 usario = User.new( params[:user] )
  usario.save
  render json: usario, status: 200 
```

那是 3 行而不是 14 行。

最后，所有这些都表明缺乏对该框架的了解。我强烈建议您彻底（重新）阅读[rails guides](http://guides.rubyonrails.org/)，可能还有许多好书中的一两本。这将使您对使用 Rails 这个美妙的工具的工作流程和设计有一个更精确的想法。

# php - onclick="$.post(this.href); return false;" 不能正常工作

> ID：15649121
> 
> 赞同：0
> 
> 时间：2013-03-26T23:10:51.537
> 
> 标签：php, javascript, jquery, onclick

JavaScript/jQuery 菜鸟在这里。我正在尝试发布`href`但没有重新加载页面。

在互联网上阅读，我看到您*应该*能够添加`onclick="$.post(this.href); return false;"`到 href，但它对我不起作用并且页面正在重新加载。

将它硬塞到我的 PHP 代码中，如下所示：

`echo "<a href='".$url."post=$post_ID' onclick=\"$.post(this.href); return false;\">".$var['add']."</a>";`

单击该href时页面刷新的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:23:32.293

幸运的猜测在这里，未加载 jquery :)

> 基于此信息，我最好的猜测是 jQuery 未加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:22:58.477

这可能会有所帮助：下面的代码会将`onClick`元素的事件与 of`id`绑定`someID`，然后将其`href`属性发送到名为`test.php`. 希望这可以帮助。

**示例 HTML：**

```
 <a href="some_href" id="someID">Click me to post</a> 
```

**jQuery：**

```
 $("#someID").on('click', function(){
        var hrefAttr = this.href;
        $.post("test.php", { href: hrefAttr } );        
    }); 
```

# android - android SharedPreferences 或 SQLite

> ID：15649122
> 
> 赞同：1
> 
> 时间：2013-03-26T23:10:54.870
> 
> 标签：android

如果我想在我的应用程序中保存大数据，例如 rss 提要或主题

我必须使用 SQLite 还是 SharedPreferences

剂量 SharedPreferences 将信息保存为共享信息？像任何其他应用程序一样可以使用它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:14:22.280

在这种情况下，您最好使用该`SQLite`选项，该选项旨在存储大量数据，而共享首选项旨在以键值对的形式存储相对少量的数据。

并不是这个名字有点令人困惑，但这意味着这些首选项是共享给您的所有应用程序活动而不是其他应用程序的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:14:26.337

不，您可能需要某种类型的数据库或存储文件。[共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)用于保存`("key", value)`成对的持久数据，例如登录 ID 或某种状态。您不会在其中存储“大量”数据。即使它关闭，它也会在您的应用程序中保留数据。您可以在此处阅读有关[存储选项的更多信息](http://developer.android.com/guide/topics/data/data-storage.html)

如果您想与其他应用程序共享数据，那么您可能需要查看[Content Providers](http://developer.android.com/guide/topics/providers/content-provider-basics.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:15:09.060

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

Shared Prefs 用于更少的键值项，更易于使用。它可以是私有的或公共的。你决定。

SQLite 适用于大量数据，使用起来更复杂。它是私人的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T23:19:09.263

`SharedPreferences`应该只用于存储原始和有限的数据，而`SQL`设计用于结构化和大量数据。当您想要存储大量数据时，您可能还想要搜索或使用它进行其他有用的转换，因此`SQL`您想要使用它，因为它提供了这些功能。`SharedPreferences`是哑巴`key-value`或`key-values`持有者，没有真正的处理功能。

`SharedPreferences`不与其他应用程序共享，但有可能（虽然从未打算）允许其他应用程序通过一些额外的工作来访问它们。

可以将您的应用程序配置为其他应用程序的服务提供者。这允许外部应用程序使用您的私有`SQL`-DB（或更抽象的 API）。也可以（并且建议）限制对您的数据库的访问，没有第三方应用程序能够弄乱您的宝贵数据。

# windows - heroku postgresql odbc 连接错误

> ID：15649125
> 
> 赞同：0
> 
> 时间：2013-03-26T23:11:15.077
> 
> 标签：windows, heroku, odbc

我在 Windows 7 SP1 上安装了 64 位 ODBC 客户端（PostgreSQL x64 9.01.02.00），并为我的 Heroku Postgres 数据库（一个开发数据库）配置了一个系统 DSN。

在测试或尝试连接时，我得到：

```
Connection Test Failed
SQL##f - SqlState: 28000, ErrorCode: 210, ErrorMsg: Communication closed during 
authentication;
Socket has been closed. 
```

我试过关闭 Windows 防火墙，但这并不能解决它。

我需要在 Heroku 数据库中运行/配置什么以允许 ODBC 连接吗？

我会很感激任何建议。

提前致谢

编辑：设置 DSN 时，我将 SSL 设置为“需要”

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-17T12:50:26.703

有一个类似的问题，我将 pg_hba.conf 条目更改为方法“信任”而不是“md5”，它解决了我的问题。

# c# - 为 C# 类对象分配一个附加参数

> ID：15649126
> 
> 赞同：0
> 
> 时间：2013-03-26T23:11:23.690
> 
> 标签：c#

我有一个 GetProduct 方法，它返回一个产品对象并说，我想与对象一起返回一个附加参数，我该如何实现它？在下面的示例中，我如何返回 'isExists'？

```
public Product GetProduct()
{
    ---
    ----
   bool isExists = true
   return new Product();
} 
```

我不想将该参数添加为产品类中的属性。

非常感谢您对此的任何帮助！

谢谢， 坎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:14:49.310

您可以使用 out 参数：

```
public Product GetProduct (out bool isExists)
{
    isExists=true;
    return new Product();
} 
```

和电话是这样的：

```
bool isExists;
Product p = GetProduct (out isExists) 
```

尽管在我看来这`isExists`是您可能希望在 Product 类中拥有的那种属性...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:15:30.653

一种方法是像这样修改你的方法：

```
public bool GetProduct(ref Product product)
{
   ---
   ---
   bool isExists = true;
   product = new Product();
   return isExists
} 
```

这样您就可以像这样调用该方法：

```
Product product = null;
if(GetProduct(ref product) {
   //here you can reference the product variable
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:16:54.383

为什么不使用`null`？

```
public Product GetProduct()
{
   bool isExists = true
   if (isExists)
       return new Product();
   else 
       return null;
} 
```

并使用它：

```
var product = GetProduct();
if (product != null) { ... }  // If exists 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T22:56:08.180

几个建议：

看一下**Dictionary.TryGetValue**它的行为方式类似，如果您只需要从集合中返回一个对象（如果存在）。

```
Product product;
if (!TryGetProduct(out product))
{
  ...
}

public bool TryGetProduct(out Product product)
{
  bool exists = false;
  product = null;
  ...
  if (exists)
  {
    exists = true;
    product = new Product();
  }   

  return exists;
} 
```

如果您有其他要与对象一起返回的属性，则可以通过引用将它们作为参数传递

```
public Product GetProduct(ref Type1 param1, ref Type2 param2...)
{
  param1 = value1;
  param2 = value2;
  return new Product();
} 
```

**另一种选择是将所有对象分组到一个名为Tuple**的预定义 .Net 类中

 **```
public Tuple<Product, Type1, Type2> GetProduct()
{
  return new Tuple<Proudct, Type1, Type2> (new Product(), new Type1(), new Type2());
} 
```**

# wpf - 如何向 DataGridCheckBoxColumn 中的复选框添加 1 像素的上边距？

> ID：15649129
> 
> 赞同：1
> 
> 时间：2013-03-26T23:12:08.723
> 
> 标签：wpf, wpf-controls, wpfdatagrid

如何向 DataGridCheckBoxColumn 中的复选框添加 1 像素的上边距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:51:49.393

您可以尝试以下方法：

```
<DataGrid ItemsSource="{Binding}">
    <DataGrid.Columns>
        <DataGridCheckBoxColumn Header="CheckBox">
            <DataGridCheckBoxColumn.ElementStyle>
                <Style>
                    <Setter Property="FrameworkElement.Margin" Value="0,1,0,0" />
                    <Setter Property="FrameworkElement.HorizontalAlignment" Value="Center" />
                </Style>
            </DataGridCheckBoxColumn.ElementStyle>
        </DataGridCheckBoxColumn>
    </DataGrid.Columns>
</DataGrid> 
```

它有效，并且**CheckBox**得到了指定的`Margin`. 请参阅有关属性的[msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridboundcolumn.elementstyle%28v=vs.100%29.aspx)文章。`ElementStyle`此外，如果您在**DataGrid**中启用编辑，则可以更改[EditingElementStyle](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridboundcolumn.editingelementstyle%28v=vs.100%29.aspx)以应用适当的应用程序外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T07:45:43.860

```
<Window.Resources>
    <Style TargetType="CheckBox" x:Key="check_box">
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="HorizontalAlignment" Value="Center" />
    </Style>
</Window.Resources>

<DataGrid AutoGenerateColumns="False">
<DataGrid.Columns>
<DataGridCheckBoxColumn Header="Caption" ElementStyle="{StaticResource check_box}" />
</DataGrid.Columns>
</DataGrid> 
```

# windows - PS终端的自动运行Reg Key

> ID：15649131
> 
> 赞同：0
> 
> 时间：2013-03-26T23:12:27.553
> 
> 标签：windows, powershell

晚上所有，

快点，希望...

关于 CMD.exe，在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Command Processor 有一个 reg 键，其中添加 /v autorun 和启动应用程序时将运行的命令...

那么哪个是 PowerShell 终端的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:36:36.697

没有一个。Powershell.exe 不像 cmd.exe 那样提供自动运行功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:42:28.550

我设法找到了我可以使用的 WindowsPowerShell\Microsoft.PowerShell_profile.ps1。

谢谢你让我知道。

# python - 使用python求解非线性方程

> ID：15649134
> 
> 赞同：2
> 
> 时间：2013-03-26T23:12:43.010
> 
> 标签：python, wolfram-mathematica, nonlinear-functions

我从未使用过 python，但 Mathematica 无法处理我试图求解的方程。我正在尝试求解以下方程的变量“a”，其中 s、c、mu 和 delta t 是已知参数。

![在此处输入图像描述](../Images/68d799fd09ff662a43d50054dc5902ee.png)

我尝试在 Mathematica 中进行 NSolve、Solve 等，但它已经运行了一个小时，但没有运气。由于我不熟悉 Python，有没有办法可以使用 Python 来解决这个方程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:37:54.403

你不会找到这些方程的解析解，因为它们是超越的，包含`a`三角函数的内部和外部。

我认为您在使用数值解决方案时遇到的问题是可接受值的范围`a`受`arcsin`. 由于`arcsin`仅为 -1 和 1 之间的参数定义（假设您想要`a`是真实的），因此您的公式`alpha`和`beta`需要`a > s/2`and `a > (s-c)/2`。

在 Python 中，您可以`f(a) = 0`使用以下`brentq`函数找到第三个方程的零（以 形式重写）：

```
import numpy as np
from scipy.optimize import brentq

s = 10014.6
c = 6339.06
mu = 398600.0
dt = 780.0
def f(a):
    alpha = 2*np.arcsin(np.sqrt(s/(2*a)))
    beta = 2*np.arcsin(np.sqrt((s-c)/(2*a)))
    return alpha - beta - (np.sin(alpha)-np.sin(beta)) - np.sqrt(mu/a**3)*dt

a0 = max(s/2, (s-c)/2)
a = brentq(f, a0, 10*a0) 
```

**编辑：**

为了阐明工作方式，它在间隔上`brentq(f,a,b)`搜索零。在这里，我们知道至少是. 我只是猜测 10 次是一个合理的上限，并且适用于给定的参数。更一般地说，您需要确保和之间的更改符号。[您可以在SciPy 文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.brentq.html)中阅读有关该函数如何工作的更多信息。`f``[a,b]``a``max(s/2, (s-c)/2)``f``a``b`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T04:59:57.153

我认为在尝试解决它之前检查函数的行为是值得的。如果不这样做，您将不知道是否有唯一的解决方案、许多解决方案或没有解决方案。（最大的问题是许多解决方案，其中数值方法可能无法为您提供您需要/期望的解决方案 - 如果您盲目使用它，“坏事”可能会发生）。您使用 scipy 和 ipython 很好地检查了该行为。这是一个示例笔记本

```
# -*- coding: utf-8 -*-
# <nbformat>3.0</nbformat>

# <codecell>

s = 10014.6
c = 6339.06
mu = 398600.0
dt = 780.0

# <codecell>

def sin_alpha_2(x):
    return numpy.sqrt(s/(2*x))
def sin_beta_2(x):
    return numpy.sqrt((s-c)/(2*x))
def alpha(x):
    return 2*numpy.arcsin( numpy.clip(sin_alpha_2(x),-0.99,0.99) )
def beta(x):
    return 2*numpy.arcsin( numpy.clip(sin_beta_2(x),-0.99,0.99) )

# <codecell>

def fn(x):
    return alpha(x)-beta(x)-numpy.sin(alpha(x))+numpy.sin(beta(x)) - dt * numpy.sqrt( mu / numpy.power(x,3) )

# <codecell>

xx = numpy.arange(1,20000)
pylab.plot(xx, numpy.clip(fn(xx),-2,2) ) 
```

![fn 图](../Images/76f7c5f9268009be1391bd4a9bb20455.png)

```
# <codecell>

xx=numpy.arange(4000,10000)
pylab.plot(xx,fn(xx)) 
```

![在此处输入图像描述](../Images/37977eaba6c340394952034f52a2fd1d.png)

```
# <codecell>

xx=numpy.arange(8000,9000)
pylab.plot(xx,fn(xx)) 
```

![在此处输入图像描述](../Images/78229026f6b0056873ba7b44c9cbd9e9.png)

这表明我们希望找到一个介于 8000 和 9000 之间的解。曲线中大约 5000 处的奇怪扭结和大约 4000 处的较早解是由于使 arcsin 行为所需的剪裁。实际上，方程在 a=5000 以下是没有意义的。（精确值是 Rays 解决方案中给出的 a0）。然后，这提供了一个很好的范围，可以与 Rays 解决方案中的技术一起使用。

# iphone - 导出时转换在 AVMutableVideoComposition 中不起作用

> ID：15649136
> 
> 赞同：12
> 
> 时间：2013-03-26T23:13:00.850
> 
> 标签：iphone, ios, video, avfoundation, avmutablecomposition

我的目标是组合一组从相机录制的剪辑，并以特定的首选尺寸导出它们。当然，导出前需要旋转视频方向。

我通过从一组视频剪辑中组合一个 AVMutableComposition 来做到这一点，这些视频剪辑存储在下面的 avAssets 中。我能够很好地组合它们，并将其导出。但是，我在 AVMutableVideoComposition 上设置的旋转变换没有得到遵守。如果我使用相同的变换并将其设置在视频轨道的 preferredTransform 属性上，那么它就可以工作。在这两种情况下，视频 renderSize 都没有得到尊重。就好像导出器完全忽略了 videoComposition 一样。任何想法可能会发生什么？

我确实有一个 AVCaptureSession 正在运行，但我在导出之前将其关闭，这没有任何区别。我对 iOS 编程相当陌生，所以我可能缺少一些基本的东西。:)

我的代码：

```
-(void) finalRecord{
NSError *error = nil;

AVMutableComposition *composition = [AVMutableComposition composition];

AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
NSLog(@"Video track id is %d", [compositionVideoTrack trackID]);

AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

// avAssets hold the video clips to be composited
int pieces = [avAssets count];

CGAffineTransform transform = CGAffineTransformMakeRotation( M_PI_2);
//  [compositionVideoTrack setPreferredTransform:transform];

for (int i = 0; i<pieces; i++) {

    AVURLAsset *sourceAsset = [avAssets objectAtIndex:i];

    AVAssetTrack *sourceVideoTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVAssetTrack *sourceAudioTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

    [timeRanges addObject:[NSValue valueWithCMTimeRange:CMTimeRangeMake(kCMTimeZero, sourceAsset.duration)]];
    [videoTracks addObject:sourceVideoTrack];
    [audioTracks addObject:sourceAudioTrack];
}

[compositionVideoTrack insertTimeRanges:timeRanges ofTracks:videoTracks atTime:kCMTimeZero error:&error];
[compositionAudioTrack insertTimeRanges:timeRanges ofTracks:audioTracks atTime:kCMTimeZero error:&error];

AVMutableVideoCompositionInstruction *vtemp = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
vtemp.timeRange = CMTimeRangeMake(kCMTimeZero, [composition duration]);
NSLog(@"\nInstruction vtemp's time range is %f %f", CMTimeGetSeconds( vtemp.timeRange.start),
      CMTimeGetSeconds(vtemp.timeRange.duration));

// Also tried videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack    
AVMutableVideoCompositionLayerInstruction *vLayerInstruction = [AVMutableVideoCompositionLayerInstruction
                                                               videoCompositionLayerInstructionWithAssetTrack:composition.tracks[0]];
[vLayerInstruction setTransform:transform atTime:kCMTimeZero];
vtemp.layerInstructions = @[vLayerInstruction];

AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
videoComposition.renderSize = CGSizeMake(320.0, 240.0);
videoComposition.frameDuration = CMTimeMake(1,30);

videoComposition.instructions = @[vtemp];

AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:composition presetName:gVideoExportQuality];

NSParameterAssert(exporter != nil);
exporter.videoComposition = videoComposition;
exporter.outputFileType = AVFileTypeQuickTimeMovie;

NSString *rootName = [[self captureManager] tempFileRoot];

NSString *temp = [NSString stringWithFormat:@"%@%@.mov", NSTemporaryDirectory(), rootName];
exporter.outputURL = [NSURL fileURLWithPath:temp ];

[exporter exportAsynchronouslyWithCompletionHandler:^{
    switch ([exporter status]) {
        case AVAssetExportSessionStatusFailed:
            NSLog(@"Export failed: %@", [exporter error]);
            break;
        case AVAssetExportSessionStatusCancelled:
            NSLog(@"Export canceled");
            break;
        case AVAssetExportSessionStatusCompleted:
            NSLog(@"Export successfully");
            [self exportFile:exporter.outputURL];
            [self.delegate recordingEndedWithFile:exporter.outputURL];
            isExporting = FALSE;
            [[[self captureManager] session] startRunning];
            break;
        default:
            break;
    }
    if (exporter.status != AVAssetExportSessionStatusCompleted){
        NSLog(@"Retry export");
    }
}];

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T18:33:34.330

好的，想通了并在此处发布以帮助其他人不要浪费我所做的时间。

问题是，如果您`AVAssetExportPresetPassthrough`在 上使用`AVExportSession`，则导出器将忽略视频合成说明。我希望它在通过格式等时至少遵守视频合成说明，但显然这不是它的工作原理。在我填写完文档错误后，您可以在[Technical Q&A](https://developer.apple.com/library/ios/qa/qa1744/_index.html)中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-27T06:11:05.287

如果您想使用解决方案`AVAssetExportPresetPassthrough`：

```
compositionVideoTrack.preferredTransform = transform 
```

更多信息在这里：[https ://developer.apple.com/library/archive/qa/qa1744/_index.html](https://developer.apple.com/library/archive/qa/qa1744/_index.html)

> 否则，如果您指定 AVAssetExportPresetPassthrough 导出选项以让所有轨道通过，但您仍想在合成上设置变换，请如上所述在合成轨道上设置 preferredTransform 属性。

# firebase - Firebase 和 Intranet

> ID：15649137
> 
> 赞同：1
> 
> 时间：2013-03-26T23:13:01.663
> 
> 标签：firebase

我不确定这是否在文档中的某个地方得到了回答，但查看定价告诉我 Firebase 必须始终与连接到 Internet 的客户端一起工作。

我目前正在开发一个使用 Java 支持的服务器和客户端在 GWT (Javascript) 中完成的应用程序。该应用程序旨在为“公司”客户端部署 - 这意味着在 Intranet 中。

Firebase 会在这些情况下运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:16:33.647

好吧，我想我应该更彻底地阅读[常见问题解答：](https://www.firebase.com/docs/faq.html)

> **我可以在自己的服务器上运行 Firebase 吗？** Firebase 是一种托管云服务，因此一般的答案是“不”。一些客户对其敏感数据的物理存储和管理位置有非常特殊的需求，因此我们可能会例外。联系我们了解更多信息。

# android - 实时测量蓝牙信号强度 (RSSI)

> ID：15649141
> 
> 赞同：1
> 
> 时间：2013-03-26T23:13:23.230
> 
> 标签：android, timer, bluetooth, refresh, discovery

我希望能够在一个房间里走动，手里拿着一个安卓设备，点击一个显示房间 1 的按钮，然后开始发现我周围的蓝牙设备并获取它们的 RSSI 值。然后我想将此信息保存为文本文件。然后重复不同的房间。

那是容易的部分。

我遇到问题的部分是找出如何（或如果可能的话）执行此操作，但**设置了一个计时器**，以便发现过程不一定会自行完成，但我可以 **定时启动和停止自己反复发现**以获取新值，直到我完成为止。大多数接近的值通常会在大约 5 秒左右出现，对于我目前正在尝试做的事情，我很满意。我找到[了这个](https://stackoverflow.com/questions/13297479/continuously-tracing-the-available-bluetooth-connections-in-the-mobiles-vicinit?rq=1)问题，但没有答案。

为了更清楚一点，一个简单的例子是：

*   按“房间1”按钮
*   开始发现
*   5 秒后，停止发现并重新开始
*   一遍又一遍地这样做，直到...
*   按下“停止”按钮

有谁知道这是否可能？如果是这样，最好的方法是什么？我看过 Timer 和 TimerTask ，它们看起来很有用。

另外，在我开始深入研究之前，我会问一些问题，因为在 n 不得不恢复到开始之前，我已经这样做了。:(

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:33:50.433

你可以使用这样的东西：

```
private void start() {
    mBluetoothAdapter.startDiscovery();
    Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            if (mBluetoothAdapter.isDiscovering())
                mBluetoothAdapter.cancelDiscovery();
            if (repeat) start();                
        } }, 5000);
} 
```

使停止按钮设置为 false 的变量重复。开始按钮将重复设置为 true 并调用 start()。

据我所知，蓝牙发现无限期运行，因此您无需停止并重新启动它。

# css - 谷歌浏览器在调整到高于 65535px 的高度时会切断 jpeg

> ID：15649156
> 
> 赞同：2
> 
> 时间：2013-03-26T23:14:39.007
> 
> 标签：css, google-chrome, jpeg

我有一张由视频中的 187 帧组成的图像，它们相互叠加。每帧宽 320 像素，高 180 像素，因此图像宽 320 像素，高 33660 像素。图片链接：[http ://reference.23.rekab.dk/7340/2758266/3f1faedac540f10a4bfe20ea579da3e7/video_frames/download/izotope-stutter-edit-frames.jpg](http://reference.23.rekab.dk/7340/2758266/3f1faedac540f10a4bfe20ea579da3e7/video_frames/download/izotope-stutter-edit-frames.jpg)

我希望使用此图像一次显示一帧，并将每帧缩放到两倍的宽度和高度。为了做到这一点，我将图像放在`div`640px 乘以 360px 的范围内`overflow: hidden;`，并将图像绝对定位为`top`根据我要显示的帧简单地给它一个负值（所以要显示第一帧，`top`值是 0，并显示第五帧，该`top`值设置为 -360 * (5 - 1) = -1440 像素。小提琴来展示这个想法：http: [//jsfiddle.net/kkabell/dJGp3/1/](http://jsfiddle.net/kkabell/dJGp3/1/)

这工作正常，直到我达到第 183 帧，给图像的`top`值为 -65520px：调整大小的图像似乎被 Chrome 截断为 65535 像素，因此不让我完整显示该帧 - 以及其余帧一点也不：http: [//jsfiddle.net/kkabell/tm6ZM/3/](http://jsfiddle.net/kkabell/tm6ZM/3/)

我知道 jpeg 图像的最大高度为 65535 像素（请参阅[http://en.wikipedia.org/wiki/Jpeg](http://en.wikipedia.org/wiki/Jpeg)），但 Firefox 和 Safari 都能够将图像缩放到比这更高的高度。

*   这是 Chrome 中的预期行为吗？有什么办法可以解决吗？
*   是否有记录此“限制”的地方？
*   在其他浏览器中我应该期待什么行为？

在我的测试中，我一直在 OS X 10.8.2 上使用 Google Chrome 25.0.1364.172

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:38:50.417

我认为您最好的选择是将图像保持在原始尺寸（不加倍），以原始分辨率对其进行剪辑，然后将结果缩放 2 倍。可能这也可以为您提供更好的性能。

我猜这个属性的内部实现会很短，但我没有任何关于它的文档。

# c - C/POSIX 语言环境中扩展字节/字符的行为

> ID：15649165
> 
> 赞同：19
> 
> 时间：2013-03-26T23:15:19.610
> 
> 标签：c, character-encoding, posix, locale

C 和 POSIX 都只要求在 C/POSIX 语言环境中存在非常有限的一组字符，但允许存在其他字符。这给实施留下了很大的自由；例如，在 C 语言环境中支持所有 Unicode（如 UTF-8）是符合行为。然而，大多数历史实现都将 C 语言环境视为具有“8 位干净”单字节字符编码，即 ISO-8859-1（Latin-1）或一种“抽象 8 位字符集”，其中非 ASCII 字节是没有特定标识的抽象字符。（但是，在后一种情况下，如果编译器定义`__STDC_ISO_10646__`，它们通常对应于 Unicode 字符，通常是 Latin-1 范围。）

另一个似乎不太受欢迎的一致选项是将所有非 ASCII 字节视为非字符，即以`EILSEQ`错误响应它们。

我有兴趣知道的是在实现 C 语言环境时是否有采用此选项或任何其他不寻常选项的实现。是否存在尝试在 C 语言环境中转换“高字节”导致`EILSEQ`或除将它们视为（抽象或 Latin-1）单字节字符或 UTF-8 之外的任何实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T22:21:15.707

从您的评论到上一个答案：

> 假设可能错误的方式基本上是可移植字符集之外的字节可能是非法的非字符字节（EILSEQ）或构成一些多字节编码（UTF-8 或无状态的遗留 CJK 编码）

[在这里](http://man.cat-v.org/plan_9/6/utf)你可以找到一个例子。

计划 9 仅支持“C”语言环境。正如您在[utf.c](http://swtch.com/usr/local/plan9/src/cmd/tcs/utf.c)和[rune.c](http://swtch.com/usr/local/plan9/src/lib9/utf/rune.c)中看到的，当它在可移植字符之外找到一个 rune 时，它​​只是将其作为来自不同编码的字符处理。

另一个候选者可能是[Minix](https://github.com/minix3/minix/blob/master/lib/libc/citrus/citrus_none.c)和[*BSD 系列](http://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/lib/libc/citrus/citrus_none.c)（就他们使用[citrus](http://citrus.bsdclub.org/)而言）。在 Minix 源代码中，我还发现当字符大小不是 8 位时寻找新编码的[文件命令。](https://github.com/minix3/minix/blob/master/external/bsd/file/dist/src/encoding.c#l84)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T06:24:34.430

有趣的是，我刚刚发现使用最广泛的实现 glibc 就是我正在寻找的一个示例。考虑这个简单的程序：

```
#include <stdlib.h>
#include <stdio.h>
int main()
{
        wchar_t wc = 0;
        int n = mbtowc(&wc, "\x80", 1);
        printf("%d %.4x\n", n, (int)wc);
} 
```

在 glibc 上，它打印`-1 0000`. 如果字节 0x80 是实现的 C/POSIX 语言环境中的扩展字符，它将打印 1 后跟一些非零字符编号。

因此，关于 C/POSIX 语言环境在 glibc 上是“8 位干净”的“常识”完全是错误的。发生的事情是存在严重的不一致。尽管所有标准实用程序、正则表达式匹配等都被指定为对（多字节）字符进行操作，就好像由 读取一样`mbrtowc`，但这些实用程序/函数的实现在它们看到`MB_CUR_MAX==1`或`LC_CTYPE`包含`"C"`（或类似）和直接读取值而不是使用或类似`char`处理输入。`mbrtowc`这导致了指定行为（由于定义了 C/POSIX 语言环境的实现，必须将高字节视为非法序列）和实现行为（完全绕过语言环境系统）之间的不一致。

尽管如此，我仍在寻找具有问题中要求的属性的其他实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T03:40:59.337

> “我有兴趣知道的是，在实现 C 语言环境时是否存在采用此选项或任何其他不寻常选项的实现。”

这个问题很难回答，因为它混合了“C 语言环境”（我假设它指的是上面提到的 C 标准限制字符集）和“其他不寻常的选项”，我假设它指的是具体的实现方式处理（有限的）C 语言环境**之外的字符。**每个 C 实现都必须实现 C 语言环境；我不认为有任何*不寻常的选择*。

让我们假设问题是：“......在 C 语言环境**之外实现附加/扩展字符的不寻常选项。”** 现在这变成了一个依赖于实现的问题，正如您已经提到的，它“为实现留下了很大的自由度”。因此，在不知道目标编译器/硬件的情况下，仍然很难明确回答。

现在是最后一部分：

> “...尝试在 C 语言环境中转换“高字节”会导致 EILSEQ 或其他任何东西，而不是将它们视为（抽象或拉丁 1）单字节字符或 UTF-8？”

而不是在 C 语言环境中转换高字节，您可以在程序中设置语言环境，就像在这个 SO 问题中一样：[底层字符集是否仅依赖于 C 实现？](https://stackoverflow.com/questions/15251049/does-the-underlying-character-set-depend-only-on-the-c-implementation)

这样，您可以确保您的角色将在您期望的语言环境中得到处理。

* * *

据我了解，C 语言环境仅关注前 7 位（8 位`char`类型），基于以下来源：

*   [http://www.cprogramming.com/tutorial/unicode.html](http://www.cprogramming.com/tutorial/unicode.html)
*   [http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap07.html](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap07.html)
*   [http://www.in-ulm.de/~mascheck/locale/](http://www.in-ulm.de/~mascheck/locale/)

术语“高字节”、“Unicode”和“UTF-8”属于多字节或宽字符编码类别，并且非常特定于语言环境（并且超出了最小 C 语言环境的范围）。我不清楚如何在（纯）C 语言环境中“转换高字节”。如果没有明确设置（或如上述链接之一所述从操作系统环境设置中提取），实现很可能会选择默认（扩展）语言环境。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-16T12:27:59.283

POSIX 标准在这方面非常明确。

POSIX.1-2017 中对[字符集](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap06.html)的介绍说：

> 6.2 字符编码
> 
> **POSIX 语言环境应包含 256 个单字节字符**，包括可移植字符集和不可移植控制字符中的字符，它们具有 LC_CTYPE 中列出的属性。未指定这两个表中未列出的字符是否被分类为 punct 或 cntrl，或者两者都不是。其他语言环境应包含 Portable Character Set 中的字符，并且可能包含 Non-Portable Control Characters 中标识的任何或所有控制字符；任何附加字符的存在、含义和表示都是特定于语言环境的。

（强调我的）

[mbtowc()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/mbtowc.html)的页面说：

> 如果出现以下情况，mbtowc() 函数将失败：
> 
> [EILSEQ]
>  检测到无效字符序列。**在 POSIX 语言环境中，不会发生 [EILSEQ] 错误，因为所有字节值都是有效字符。**

请注意，POSIX 语言环境被定义为与 C 语言环境相同。

因此，如果操作系统符合 POSIX，`mbtowc`则在 POSIX 语言环境中是无操作的。字符 128-255 和字符 0-127 一样通过。以不同方式操作的实现违反了标准。

# c++ - 带有颜色图的 BGL depth_first_search 错误

> ID：15649166
> 
> 赞同：2
> 
> 时间：2013-03-26T23:15:24.990
> 
> 标签：c++, boost

很抱歉这个新手问题，但我正在努力开始使用 BGL。我正在尝试深度优先搜索：

```
boost::default_dfs_visitor vis;
boost::depth_first_search( graph, boost::visitor(vis) ); 
```

而且我收到了大量有关颜色图的错误消息：

```
In file included from /usr/include/boost/graph/named_function_params.hpp:22,
                 from /usr/include/boost/graph/depth_first_search.hpp:21,
                 from main.cc:6:
/usr/include/boost/property_map/shared_array_property_map.hpp: In member function 'T& boost::shared_array_property_map<T, IndexMap>::operator[](typename boost::property_traits<IndexMap>::key_type) const [with T = boost::default_color_type, IndexMap = boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t>]':
/usr/include/boost/property_map/property_map.hpp:324:   instantiated from 'void boost::put(const boost::put_get_helper<Reference, PropertyMap>&, K, const V&) [with PropertyMap = boost::shared_array_property_map<boost::default_color_type, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >, Reference = boost::default_color_type&, K = void*, V = boost::default_color_type]'
/usr/include/boost/graph/depth_first_search.hpp:196:   instantiated from 'void boost::depth_first_search(const VertexListGraph&, DFSVisitor, ColorMap, typename boost::graph_traits<Graph>::vertex_descriptor) [with VertexListGraph = boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, DFSVisitor = boost::dfs_visitor<boost::null_visitor>, ColorMap = boost::shared_array_property_map<boost::default_color_type, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >]'
/usr/include/boost/graph/depth_first_search.hpp:295:   instantiated from 'void boost::depth_first_search(const VertexListGraph&, const boost::bgl_named_params<P, T, R>&) [with VertexListGraph = TreeGraph::graph_type, P = boost::dfs_visitor<boost::null_visitor>, T = boost::graph_visitor_t, R = boost::no_property]'
main.cc:272:   instantiated from here
/usr/include/boost/property_map/shared_array_property_map.hpp:36: error: no match for 'operator[]' in '((const boost::shared_array_property_map<boost::default_color_type, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >*)this)->boost::shared_array_property_map<boost::default_color_type, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >::data[boost::get [with PropertyMap = boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t>, Reference = const boost::detail::error_property_not_found&, K = void*](((const boost::put_get_helper<const boost::detail::error_property_not_found&, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >&)((const boost::put_get_helper<const boost::detail::error_property_not_found&, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >*)(&((const boost::shared_array_property_map<boost::default_color_type, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >*)this)->boost::shared_array_property_map<boost::default_color_type, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::vecS, boost::listS, boost::directedS, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node, boost::no_property>, boost::no_property, boost::no_property, boost::listS>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >::index))), ((void* const&)((void* const*)(& v))))]'
/usr/include/boost/smart_ptr/shared_array.hpp:85: note: candidates are: T& boost::shared_array<T>::operator[](ptrdiff_t) const [with T = boost::default_color_type] 
```

depth_first_search 的文档说有一个默认值，而且我看到许多不提供自己的颜色图的示例，所以我不确定为什么会出现问题。

我的图表类型是：

```
typedef
  boost::adjacency_list<
  boost::vecS, boost::listS, boost::directedS,
  boost::property<boost::vertex_treegraphnode_t, TreeGraph::node>
  >
  graph_type; 
```

我想也许是因为我有一个自定义属性图，可能会覆盖 depth_first_search 需要的一些颜色图默认值，但我补充说：

```
boost::property<boost::vertex_color_t, boost::default_color_type> 
```

到财产清单，这也无济于事。

我尝试使用外部 color_map 进行 depth_first 搜索，但这似乎也没有帮助。

关于我可能做错了什么的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:11:38.300

```
const boost::detail::error_property_not_found&, boost::vertex_index_t 
```

这是“错误之海”的重要部分。只有作为模板参数的具有默认内部`adjacency_list`属性，并且此属性由默认颜色映射（您正在使用）使用。您有几种选择：`vecS``VertexList``vertex_index``listS`

*   您可以简单地`vecS`用作第二个参数（如果您不需要动态修改图形，这是最简单的）。
*   您可以创建一个内部属性，然后确保对其进行初始化并使其与您的图形保持同步。为此，您需要将您的定义`VertexProperty`为：

    ```
    boost::property<vertex_index_t, std::size_t, boost::property<boost::vertex_treegraphnode_t, TreeGraph::node>> 
    ```

    接着：

    ```
    boost::property_map<graph_type,vertex_index_t>::type my_vertex_index_map=get(vertex_index,graph);
    std::size_t current_index=0;
    BGL_FORALL_VERTICES(v,graph,graph_type)
        put(my_vertex_index_map,v,current_index++); 
    ```

*   您可以创建一个外部属性，对其进行初始化并使其保持最新，然后`depth_first_search`使用命名参数将其传递给它。

    ```
    typedef graph_traits<graph_type>::vertex_descriptor VertexDesc;
    typedef map<VertexDesc, size_t> VertexIndexMap;
    VertexIndexMap mapIndex;
    boost::associative_property_map<VertexIndexMap> my_vertex_index_map(mapIndex);
    std::size_t current_index=0;
    BGL_FORALL_VERTICES(v,graph,graph_type)
        put(my_vertex_index_map,v,current_index++);
    ...
    boost::depth_first_search( graph, boost::visitor(vis).vertex_index_map(my_vertex_index_map); 
    ```

# c# - 典型的基于浏览器的 Web 解决方案可以利用缓存吗？

> ID：15649167
> 
> 赞同：1
> 
> 时间：2013-03-26T23:15:28.330
> 
> 标签：c#, php, asp.net, .net, caching

给定一个可以用“服务器端”语言实现的典型 Web 应用程序，例如 ASP.NET 集合或 PHP，通过浏览器提供最终用户交互，是否可以使用持久本地缓存？

例如，以存储数千条员工记录的简单集中式数据库为例。只要此缓存不会过时，浏览器拥有相应数据的本地副本会更有效。这将如何实现？据我所知，cookie 是暴露的浏览器内存的扩展，严格的域策略会阻止与硬盘驱动器的任何交互。

我从 PHP 或 ASPX Web 表单应用程序（超文本应用程序？）的角度思考，我理解为无状态，所以我很难理解如何实现这一点。其他 .NET 解决方案是否会提供任何优势，例如 .NET MVC 或 WCF？

我应该指出，这没有考虑到小程序技术 Java、Flash、Silverlight 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:24:09.427

HTML5 localStorage 和 sessionStorage 最多可容纳 5 MB 或更多，具体取决于域的浏览器。

HTML5 ApplicationCache 特别适合您的需求，因为您可以指定一个清单，检查每个请求的修改情况，但每次仅访问该文件，而除非指示这样做，否则不会请求您的缓存资源，从而节省大量带宽。如果您通过服务器端动态编程提供清单文件，您可以轻松地实现缓存策略，只需在获取新数据时更改清单文件时间戳或文档中的注释。清单文件可以基于用户的动态提供cookie，因此如果您需要划分数据，您可以拥有每个用户拥有的数据集。

您必须使用 JSON.stringify 和 jQuery.parseJSON 在 JavaScript 客户端上进行大量开发，以使用诸如 knockout.js 之类的框架进行数据绑定等进行序列化和反序列化。我在做这些事情方面有丰富的经验，并且曾经认为服务器- 这么多。现在我只看到服务器端允许我对 JSON 数据进行 CRUD，因为这就是我在做 Web 应用程序时使用它的目的。

# javascript - document.querySelector 未定义标准模式 iframe 在 quirks 模式父级中运行

> ID：15649171
> 
> 赞同：1
> 
> 时间：2013-03-26T23:15:44.177
> 
> 标签：javascript, internet-explorer-10, quirks-mode, selectors-api

在运行带有书签的 IE 10 时遇到这种情况。当我针对以怪异模式运行的页面运行小书签并尝试使用 document.querySelector 时，document.querySelector 未定义。

为了解决这个问题，当我检测到 document.documentMode 为 5（怪癖模式）时，我创建了一个 iframe 并将页面内容复制到该 iframe 中以将其置于标准模式。我验证 iframe 中的文档处于标准模式（document.documentMode 为 8 - IE 8 标准模式），但 document.querySelector 仍未定义。我相信 documentMode 必须至少为 9 才能支持 querySelector。我无法弄清楚为什么 documentMode 是 8 而不是 10，因为我在 IE 10 上运行。

```
if(goog.userAgent.IE && document.documentMode <= 5) {
    // strip out any scripts from the body
    s = document.body.innerHTML.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');

    frame = goog.dom.iframe.createBlank(goog.dom.getDomHelper());
    frame.scrolling = "no";
    frame.allowTransparency = true;
    frame.style.visibility = 'hidden';
    document.body.appendChild(frame);

    goog.dom.iframe.writeContent(frame, '<!doctype html>\n<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"></head><body>' + s + '</body></html>');

    doc = goog.dom.getFrameContentDocument(frame);
    alert(doc.documentMode); // 8 - IE 8 standards mode
    alert(doc.querySelectorAll); // null
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T02:39:30.133

> 我使用 documentMode 而不是简单地检查 (if(document.querySelector)) 来帮助我进一步调试这个问题

# c# - 是否可以在与 where 子句比较之前格式化 DB 内容（作为字符串）

> ID：15649176
> 
> 赞同：1
> 
> 时间：2013-03-26T23:16:31.817
> 
> 标签：c#, linq, formatting, where

我希望能够采用 url 格式的字符串（例如 United **-kingdom**）并在 WHERE 子句中针对未以这种方式格式化的 Country 列（例如**United Kingdom**）使用它。

理想情况下，我希望能够做这样的事情：

```
db.Jobs
.Where(j => j.Country.MyStringFormattingExtension() == urlformattedstring); 
```

我知道这是不行的，因为 EF 会尝试在 SQL 端执行投影。它给了我：“LINQ to Entities 无法识别 'System.String MyStringFormattingExtension(System.String)' 方法，并且该方法无法转换为存储表达式。”

有人建议我在应用 where 子句之前将查询作为可枚举返回，但是我认为这将非常低效 - 在过滤之前从数据库中返回所有行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:53:04.613

换一种方式，在查询中使用 URL 格式的字符串之前将其转换为数据库格式怎么样？

```
var dbFormattedString = urlformattedstring.ConvertToDbFormat();
var result = db.Jobs.Where(j => j.Country == dbFormattedString); 
```

(`db.Jobs`已经是`IEnumerable`，所以我认为建议是调用`ToList()`它 - 它会起作用，但实际上，除非表非常小，否则效率会非常低。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:40:18.390

您可以定义用户定义的函数并将其导入数据库。阅读[本文](http://blogs.msdn.com/b/efdesign/archive/2008/10/08/edm-and-store-functions-exposed-in-linq.aspx)了解更多详情

```
// In SQL
CREATE FUNCTION dbo.ToFormattedString ...

// In C#
public static class EntityFunctions 
{ 
    [EdmFunction("dbo", "ToFormattedString")] 
    public static string ToFormattedString(this string input) 
    { 
        throw new NotSupportedException("Direct calls not supported");  
    } 
}

var results = db.Jobs.Where(j => j.Country.ToFormattedString() == urlFormattedString); 
```

或者，您可以在数据库中创建一个视图，以您希望格式化的方式具体化字符串，然后将其加入到您的 Linq 查询中。

```
// In SQL
CREATE VIEW dbo.vFormattedJobs AS ...

// In C#
var results =
    (from j in db.vFormattedJobs
     where j.FormattedCountry == urlFormattedString
     select j); 
```

# ruby-on-rails - Ruby on Rails Each... do 循环显示哈希

> ID：15649178
> 
> 赞同：2
> 
> 时间：2013-03-26T23:16:41.100
> 
> 标签：ruby-on-rails, ruby

我正在构建一个应用程序来管理牙医和位置。我刚刚完成了位置显示页面并添加了代码以显示该位置所有从业者的列表。但是，当我呈现页面时，它会将整个哈希（locations.practitioner.each）转储到我的格式化列表上方。如何让哈希消失？

这是我的 show.html.erb

```
 <p>
  <b>Location name:</b>
  <%= @location.location_name %>
</p>
<p>
  <b>Location id:</b>
  <%= @location.id %>
</p>

<p><strong>Practitioners at this Location</strong></p>
<table>
  <tr>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Role</th>
    <th>Production Goal</th>
    <th></th>

  </tr>

<%= @location.practitioner.each do |practitioner| %>
  <tr>
    <td><%= practitioner.first_name %></td>
    <td><%= practitioner.last_name %></td>
    <td><%= practitioner.role %></td>
    <td><%= practitioner.production_goal %></td>
    <td><%= link_to "Edit", edit_practitioner_path(practitioner) %></td>

  </tr> 
<% end %>
</table> 
```

这是页面的外观......

```
Location name: Waterview

Location id: 1

Practitioners at this Location

[#<Practitioner id: 1, first_name: "Dr. Robert", last_name: "Anjoux", role: "Dentist", production_goal: 10000, location_id: 1, created_at: "2013-03-26 17:34:38", updated_at: "2013-03-26 21:52:37">, 
#<Practitioner id: 3, first_name: "Smantha", last_name: "Hickleberry", role: "Hygenist", production_goal: 4800, location_id: 1, created_at: "2013-03-26 21:49:46", updated_at: "2013-03-26 21:49:46">, 
#<Practitioner id: 4, first_name: "Dr. Sandra", last_name: "Prenger", role: "Dentist", production_goal: 22000, location_id: 1, created_at: "2013-03-26 22:05:38", updated_at: "2013-03-26 22:05:38">]

**First Name    Last Name   Role    Production Goal**   
Dr. Robert  Anjoux          Dentist   10000                 Edit
Smantha     Hickleberry Hygenist   4800                 Edit
Dr. Sandra  Prenger         Dentist   22000                 Edit 
```

我究竟做错了什么？我只是表格列表...

丹尼斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T23:20:09.707

这条线是你的问题。您正在使用“=”符号来显示 Ruby 语句的输出：

```
<%= @location.practitioner.each do |practitioner| %> 
```

将其更改为：

```
<% @location.practitioner.each do |practitioner| %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T23:19:55.017

写成不带“=”符号：

```
<% @location.practitioner.each do |practitioner| %> 
```

简短说明：

“ERB 将对此进行评估”：

```
<%  %> 
```

“ERB 将评估并输出这个”：

```
<%=  %> 
```

# elasticsearch - 如何从构面中排除过滤器？

> ID：15649179
> 
> 赞同：2
> 
> 时间：2013-03-26T23:16:44.670
> 
> 标签：elasticsearch

我来自 Solr 背景，并试图在 Elasticsearch中找到[“标记”和“排除”的等价物。](http://wiki.apache.org/solr/SimpleFacetParameters#Tagging_and_excluding_Filters)

在以下示例中，如何`price`从构面的计算中排除过滤器`prices`？换句话说，`prices`构面应该考虑除 之外的所有过滤器`price`。

```
{
  query : {
    "filtered" : {
      "query" : {
        "match_all" : {}
      },
      "filter" : {
        "and" : [
          {
            "term" : {
              "colour" : "Red"
            }
          },
          {
            "term" : {
              "feature" : "Square"
            }
          },
          {
            "term" : {
              "feature" : "Shiny"
            }
          },
          {
            "range" : {
              "price" : { 
                "from" : "10",
                "to" : "20"
              }
            }
          }
        ]
      }
    }
  },
  "facets" : {
    "colours" : {
      "terms" : {
        "field" : "colour"
      }
    },
    "features" : {
      "terms" : {
        "field" : "feature"
      }
    },
    "prices" : {
      "statistical" : {
        "field" : "price"
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T00:02:22.387

您可以将价格过滤器作为顶级过滤器应用于您的查询，并将其添加到所有方面，期望价格作为 facet_filter：

```
{
  query : {
    "filtered" : {
      "query" : {
        "match_all" : {}
      },
      "filter" : {
        "and" : [
          {
            "term" : {
              "colour" : "Red"
            }
          },
          {
            "term" : {
              "feature" : "Square"
            }
          },
          {
            "term" : {
              "feature" : "Shiny"
            }
          }
        ]
      }
    }
  },
  "facets" : {
    "colours" : {
      "terms" : {
        "field" : "colour"
      },
      "facet_filter" : {
        "range" : { "price" : {  "from" : "10", "to" : "20" } }
      }
    },
    "features" : {
      "terms" : {
        "field" : "feature"
      },
      "facet_filter" : {
        "range" : { "price" : {  "from" : "10", "to" : "20" } }
      }
    },
    "prices" : {
      "statistical" : {
        "field" : "price"
      }
    }
  },
  "filter": {
    "range" : { "price" : {  "from" : "10", "to" : "20" } }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T03:22:04.037

顺便说一句，自 ES 1.0.0 以来的重要变化。顶级过滤器重命名为 post_filter ( [http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/_search_requests.html#_search_requests](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/_search_requests.html#_search_requests) )。并且过滤后的查询仍然是首选，如下所述：http: [//elasticsearch-users.115913.n3.nabble.com/Filters-vs-Queries-td3219558.html](http://elasticsearch-users.115913.n3.nabble.com/Filters-vs-Queries-td3219558.html)

并且有一个`global`选项可以避免通过查询过滤器进行过滤（elasticsearch.org/guide/en/elasticsearch/reference/current/search-facets.html#_scope）。

# android - 如何启用滚动？

> ID：15649180
> 
> 赞同：0
> 
> 时间：2013-03-26T23:16:48.957
> 
> 标签：android, xamarin.android

我有以下布局。通过代码更改文本视图时，它们会扩展，下面的内容现在被切断。这是有意的。但是我无法滚动，即使启用了“scrollbarAlwaysDrawVerticalTrack="true"”，从下到上移动手指也不会改变视图。如何启用滚动？

编辑：工作解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:p1="http://schemas.android.com/apk/res/android"
    p1:minWidth="25px"
    p1:minHeight="25px"
    p1:layout_width="fill_parent"
    p1:layout_height="fill_parent"
    p1:id="@+id/scrollView1">
    <LinearLayout
        p1:orientation="vertical"
        p1:minWidth="25px"
        p1:minHeight="25px"
        p1:layout_width="fill_parent"
        p1:layout_height="fill_parent"
        p1:id="@+id/linearLayout1"
        p1:background="#005C2E"
        p1:scrollbarAlwaysDrawVerticalTrack="true"
        p1:scrollbars="vertical"
        p1:scrollbarStyle="insideOverlay">
        <TextView
            p1:text="Text"
            p1:layout_width="fill_parent"
            p1:layout_height="wrap_content"
            p1:id="@+id/textView1"
            p1:textSize="22sp"
            p1:textColor="#00005C" />
        <TextView
            p1:text="Text"
            p1:layout_width="fill_parent"
            p1:layout_height="wrap_content"
            p1:textSize="22sp"
            p1:textColor="#5C0000"
            p1:id="@+id/textView2" />
        <TextView
            p1:textSize="22sp"
            p1:text="Text"
            p1:layout_width="fill_parent"
            p1:layout_height="wrap_content"
            p1:textColor="#00005C"
            p1:id="@+id/textView3" />
        <TextView
            p1:textSize="22sp"
            p1:text="Text"
            p1:layout_width="fill_parent"
            p1:textColor="#5C0000"
            p1:layout_height="wrap_content"
            p1:id="@+id/textView4" />
        <TextView
            p1:textSize="22sp"
            p1:text="Text"
            p1:layout_width="fill_parent"
            p1:layout_height="wrap_content"
            p1:textColor="#00005C"
            p1:id="@+id/textView5" />
        <TextView
            p1:textSize="22sp"
            p1:text="Text"
            p1:textColor="#5C0000"
            p1:layout_width="fill_parent"
            p1:layout_height="wrap_content"
            p1:id="@+id/textView6" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:17:52.693

在滚动视图中托管您的线性[布局](http://developer.android.com/reference/android/widget/ScrollView.html)。

医生说：

> 用户可以滚动的视图层次结构的布局容器，允许它大于物理显示。ScrollView 是 FrameLayout，这意味着您应该在其中放置一个包含要滚动的全部内容的子视图；这个孩子本身可能是一个具有复杂对象层次结构的布局管理器。经常使用的子元素是垂直方向的 LinearLayout，它呈现用户可以滚动浏览的顶级项目的垂直数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:22:01.397

您需要将所有容器`TextView`放入 a `ScrollView`：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
 android:layout_width="wrap_content"
 android:layout_height="wrap_content">

<LinearLayout xmlns:p1="http://schemas.android.com/apk/res/android"
p1:orientation="vertical"
p1:minWidth="25px"
p1:minHeight="25px"
p1:layout_width="fill_parent"
p1:layout_height="fill_parent"
p1:id="@+id/linearLayout1"
p1:background="#005C2E"
p1:scrollbarAlwaysDrawVerticalTrack="true"
p1:scrollbars="vertical"
p1:scrollbarStyle="insideOverlay">
<TextView
    p1:text="Text"
    p1:layout_width="fill_parent"
    p1:layout_height="wrap_content"
    p1:id="@+id/textView1"
    p1:textSize="22sp"
    p1:textColor="#00005C" />
<TextView
    p1:text="Text"
    p1:layout_width="fill_parent"
    p1:layout_height="wrap_content"
    p1:textSize="22sp"
    p1:textColor="#5C0000"
    p1:id="@+id/textView2" />
<TextView
    p1:textSize="22sp"
    p1:text="Text"
    p1:layout_width="fill_parent"
    p1:layout_height="wrap_content"
    p1:textColor="#00005C"
    p1:id="@+id/textView3" />
<TextView
    p1:textSize="22sp"
    p1:text="Text"
    p1:layout_width="fill_parent"
    p1:textColor="#5C0000"
    p1:layout_height="wrap_content"
    p1:id="@+id/textView4" />
<TextView
    p1:textSize="22sp"
    p1:text="Text"
    p1:layout_width="fill_parent"
    p1:layout_height="wrap_content"
    p1:textColor="#00005C"
    p1:id="@+id/textView5" />
<TextView
    p1:textSize="22sp"
    p1:text="Text"
    p1:textColor="#5C0000"
    p1:layout_width="fill_parent"
    p1:layout_height="wrap_content"
    p1:id="@+id/textView6" />
  </ScrollView>
</LinearLayout> 
```

# javascript - 图像悬停在区域上方

> ID：15649184
> 
> 赞同：4
> 
> 时间：2013-03-26T23:17:08.973
> 
> 标签：javascript, html, css

当悬停在不同的图像地图区域时，我试图加载不同的图像。这甚至可以使用 htlm/css 或 java 吗？如果有怎么办？

谢谢

到目前为止，这是我的代码：

```
<img id="navbar" src="img/index-navbar.png" usemap="#navmap"/>
        <map name="navmap">
            <area id="index-hover" shape="poly" coords="0,113,125,77,126,129,0,168,0,113" href="index.html" alt="" title="" />
            <area id="selfstudy-hover" shape="poly" coords="127,77,281,66,271,118,128,129,127,77" href="selfstudy.html" alt="" title="" />
            <area id="exhibits-hover" shape="poly" coords="284,66,432,73,433,123,274,118,284,66" href="exhibits.html" alt="" title="" />
            <area shape="poly" coords="434,73,602,87,593,138,435,123,434,73" href="committees.html" alt="" title="" />
            <area shape="poly" coords="605,88,787,98,788,150,597,139,605,88" href="newsletters.html" alt="" title="" />
            <area shape="poly" coords="789,98,852,95,959,59,959,114,887,143,789,151,789,98" href="selfstudy-design.html" alt="" title="" />
        </map> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T00:57:50.073

希望这会有所帮助，我几年前在 specialolympics.org 上做过类似的事情

你的html

```
 <div class="world_map_container">
<img src="http://www.specialolympics.org/RegionsImages/map/transparent.gif" usemap="#the_world_map" id="transparent_map">
<img src="http://www.specialolympics.org/RegionsImages/map/world_map.png"><map name="the_world_map" id="the_world_map">
<area shape="poly" coords="69,86,83,71,83,51,70,30,52,16,18,36,5,53,23,74,53,83," href="http://www.specialolympics.org/Regions/north-america/_Region-Front/North-America.aspx" id="area_northamerica">
<area shape="poly" coords="63,94,77,89,99,99,87,138,72,138,63,108," href="http://www.specialolympics.org/Regions/latin-america/_Region-Front/Latin-America.aspx" id="area_southamerica">
<area shape="poly" coords="120,70,178,63,220,60,262,57,232,28,191,29,147,32,122,62," href="http://www.specialolympics.org/Regions/europe-eurasia/_Region-Front/Europe-Eurasia.aspx" id="area_eurasia">
<area shape="poly" coords="115,94,134,92,146,90,167,99,160,122,131,125,120,106," href="http://www.specialolympics.org/Regions/africa/_Region-Front/Africa.aspx" id="area_africa">
<area shape="poly" coords="112,84,137,87,152,87,152,80,139,74,120,79," href="http://www.specialolympics.org/Regions/middle-east-north-africa/_Region-Front/Middle-East-North-Africa.aspx" id="area_middleeast">
<area shape="poly" coords="209,68,202,71,190,73,186,81,195,85,206,88,216,84,216,75," href="http://www.specialolympics.org/Regions/east-asia/_Region-Section-Front/East-Asia.aspx" id="area_eastasia">
<area shape="poly" coords="192,96,218,91,248,100,259,132,218,133,199,120,197,110," href="http://www.specialolympics.org/Regions/asia-pacific/_Region-Front/Asia-Pacific.aspx" id="area_asiapacific">
</map>
<ul>
<li id="northamerica" style=""><a href="#">north america</a></li>
<li id="southamerica"><a href="#">south america</a></li><li id="eurasia"><a href="#">eurasia</a></li>
<li id="africa"><a href="#">Africa</a></li><li id="middleeast"><a href="#">Middle East</a></li>
<li id="eastasia"><a href="#">East Asia</a></li><li id="asiapacific"><a href="#">Asia Pacific</a></li>
</ul>
</div> 
```

你的 CSS

```
 div.world_map_container #transparent_map {
   border: medium none;
  height: 140px;
 position: absolute;
 width: 270px;
 z-index: 30;
}

 ul li {
   display: none;
   position: absolute;
   text-indent: -9999px;
   z-index: 20;
 }

 #northamerica {
   background: url("/RegionsImages/map/north_america.png") no-repeat scroll 0 0      transparent;
   height: 140px;
   right: 0;
   top: 0;
   width: 270px;
 }

  #southamerica {
  background: url("/RegionsImages/map/south_america.png") no-repeat scroll 0 0 transparent;
   height: 140px;
   right: 0;
   top: 0;
   width: 270px;
 } 
```

你的js

```
 $('.world_map_container area').each(function () {
    // Assigning an action to the mouseover event
    $(this).mouseover(function (e) {
        var country_id = $(this).attr('id').replace('area_', '');
        $('#' + country_id).css('display', 'block');
    });

    // Assigning an action to the mouseout event
    $(this).mouseout(function (e) {
        var country_id = $(this).attr('id').replace('area_', '');
        $('#' + country_id).css('display', 'none');
    });

}); 
```

您现在可以在此站点上的右栏[http://specialolympics.org/上看到](http://specialolympics.org/)

本质上，您将透明图像放在加载图像上，然后在悬停时切换地图区域并替换为每个背景区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:29:49.157

我之前使用 CSS 和 JS 做了类似于这个 yeeeeeaaaaaaarrrrssss 的事情。[在此处查看和解构代码。](http://www.mackie.com/products/hrmk2series/cutaway/diagram.html)

这些天您可能可以使用纯 CSS 来完成它，因为它有统一的浏览器支持。我会在背景上做绝对定位的 div，然后用它`a {display: none;} a:hover {display: block;}`来显示你的图像。图像地图太 20 世纪了；）

...当然，除非您希望他们在单击时执行操作，这仍然需要 JavaScript。

# android - Android 测试项目找不到应用类

> ID：15649185
> 
> 赞同：3
> 
> 时间：2013-03-26T23:17:15.563
> 
> 标签：android, eclipse, junit

我有一个 Android 应用程序，我正在尝试在 Eclipse 中使用 JUnit 进行测试。我创建了一个 Android 测试项目并添加了一些测试，但是当我尝试在我的设备上运行测试时，每个测试都失败，并在我尝试测试的类上出现 java.lang.NoClassDefFoundError。

我发现了一些类似的问题，但与我的问题完全不同。最接近的是[this](https://stackoverflow.com/questions/12545518/noclassdeffounderror-while-executing-android-junit-test)，但是这个用户正在使用 Maven 并想出了一个解决方法。我没有使用 Maven。

以下是 LogCat 的一些输出：

```
03-26 13:36:05.281: I/TestRunner(8380): started: testValueOf(com.evertz.android.vlpro.unit.SeverityTest)
03-26 13:36:05.281: I/TestRunner(8380): failed: testValueOf(com.evertz.android.vlpro.unit.SeverityTest)
03-26 13:36:05.281: I/TestRunner(8380): ----- begin exception -----
03-26 13:36:05.281: I/TestRunner(8380): java.lang.NoClassDefFoundError: com.evertz.android.vlpro.Severity
03-26 13:36:05.281: I/TestRunner(8380):     at com.evertz.android.vlpro.unit.SeverityTest.testValueOf(SeverityTest.java:19)
03-26 13:36:05.281: I/TestRunner(8380):     at java.lang.reflect.Method.invokeNative(Native Method)
03-26 13:36:05.281: I/TestRunner(8380):     at java.lang.reflect.Method.invoke(Method.java:511)
03-26 13:36:05.281: I/TestRunner(8380):     at junit.framework.TestCase.runTest(TestCase.java:168)
03-26 13:36:05.281: I/TestRunner(8380):     at junit.framework.TestCase.runBare(TestCase.java:134)
03-26 13:36:05.281: I/TestRunner(8380):     at junit.framework.TestResult$1.protect(TestResult.java:115)
03-26 13:36:05.281: I/TestRunner(8380):     at junit.framework.TestResult.runProtected(TestResult.java:133)
03-26 13:36:05.281: I/TestRunner(8380):     at junit.framework.TestResult.run(TestResult.java:118)
03-26 13:36:05.281: I/TestRunner(8380):     at junit.framework.TestCase.run(TestCase.java:124)
03-26 13:36:05.281: I/TestRunner(8380):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
03-26 13:36:05.281: I/TestRunner(8380):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
03-26 13:36:05.281: I/TestRunner(8380):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
03-26 13:36:05.281: I/TestRunner(8380):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1661)
03-26 13:36:05.281: I/TestRunner(8380): ----- end exception -----
03-26 13:36:05.281: I/TestRunner(8380): finished: testValueOf(com.evertz.android.vlpro.unit.SeverityTest) 
```

我还有其他带有 JUnit 测试的 Android 项目，它们工作得很好。这是一个简短的总结：

*   Utils：一个 Android 库项目，其中包含从我现有的 Java 代码库复制的多个实用程序类并经过 Android 化。
*   UtilsTest：Utils项目中类的对应单元测试。有对 easymock.jar 的引用。这些测试在设备上运行得非常好。
*   AppOne：一个简单的 Android 应用程序，不依赖于 Utils、EasyMock 或其他任何东西。
*   AppOneTest：AppOne 类的单元测试。这些测试也运行良好。
*   AppTwo：一个依赖于 Utils 库项目的 Android 应用程序。
*   AppTwoTest：AppTwo 类的单元测试。依赖于 Utils 和 EasyMock。如上所述，所有这些测试都失败了（找不到被测类）。

所有测试类都使用 JUnit3 语义（扩展 TestCase、无注释等）。测试中的所有类都不是基于活动的（还）。我现在只是在测试支持类，这些只对 Android SDK 类（例如 android.util.Log、android.graphics.Color）有少量引用。

我认为具有外部依赖关系可能会以某种方式导致问题，所以我尝试在 AppOne 和 AppOneTest 中添加一些（不必要的）对 Utils 类的调用，但这些测试仍然有效。我还尝试从 AppTwoTest 中删除所有测试，除了不引用 Utils 或 EasyMock（LogCat 输出中的 SeverityTest 类）的测试，但仍然失败。

我尝试了干净的构建，重新启动 Eclipse，删除并重新创建 AppTwoTest 项目，但似乎没有任何效果。关于可能导致此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:01:04.187

检查测试应用的清单，它应该包含以下内容：

1.  测试代码的包定义

2.  Uses-sdk 适合您的应用

3.  在测试运行器中链接的使用库

4.  带有指向应用程序代码的链接的检测

    ```
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"      <!-- package of the test code -->
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="com.example.app" />      <!-- package of the app code -->

    <application android:allowBackup="false">
        <!-- linkage for the test runner -->
        <uses-library android:name="android.test.runner" />     
    </application> 
    ```

# algorithm - 重新排列四叉树/八叉树的数据

> ID：15649186
> 
> 赞同：6
> 
> 时间：2013-03-26T23:17:20.800
> 
> 标签：algorithm, sorting, quadtree, octree

我正在实现一个体素八叉树光线投射器，唯一剩下的就是重新排列数据以填充八叉树的叶级别，以便可以对数据进行平均以构建树的较低级别。

为了方便起见，我最初考虑的是 2D（四叉树）。我在图中的左侧排列了数据，我目前可以将其重新排列到右侧。例子是`8x8`.

[![当前的](../Images/d3ffd406c7fe4dc94303da6fc540f654.png)](https://i.stack.imgur.com/Rergg.jpg)

但是，我意识到我需要按节点顺序对数据进行排序，如下图所示：

[![通缉](../Images/12d50ed50a9a61cdec94d202d50d7a18.png)](https://i.stack.imgur.com/ILs2I.jpg)

换句话说，我想从一个数据对应于这样的索引的数组中去：

```
[0  1  2  3  4  5  6  7  8  9 ... 63] 
```

到将按此顺序包含数据的数组：

```
[0  1  4  5  16 17 20 21 2  3 ... 63] 
```

以`8x8`四叉树为例。

我不知道该怎么做。我的主要问题是处理任意树大小。如果我事先知道大小，我可能可以硬编码一组嵌套循环，但这显然不是一个很好或优雅的解决方案。我在想可能有一种递归的方式来实现它。

这就是我以图一中描述的方式对数据进行排序的快速而肮脏的草图。它基本上是通过跟踪原始数据中的四个位置来工作的，然后随着新数组的填充而将这些位置向前推进。据我所知，这很好用，但不能满足我的需要：

```
 int w = 8; 
  int[] before = new int[w*w*w];
  int[] after = new int[w*w*w];
  for (int i=0; i<w*w*w; i++) {
    before[i] = i;
  }
  int toFill = 0;
  int front = 0;
  int back = w;
  int frontZ = w*w;
  int backZ = w*w + w;
  do {
   for (int i=0; i<w/2; i++) {
      for (int j=0; j<w/2; j++) {   
        after[toFill++] = front++;
        after[toFill++] = front++;
        after[toFill++] = back++;
        after[toFill++] = back++;

        after[toFill++] = frontZ++; 
        after[toFill++] = frontZ++; 
        after[toFill++] = backZ++;
        after[toFill++] = backZ++;
      }    
      front += w;
      back += w;
      frontZ += w;
      backZ += w;
    }
    front += w*w;
    back += w*w;
    frontZ += w*w;
    backZ += w*w;
  } while (toFill < w*w*w);
  for (int i=0; i<w*w*w; i++) {
    println("after " + i + " " + after[i]);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:21:46.300

对于我所说的问题，**phs**暗示我它被称为 Z 阶曲线。多亏了这一点，我发现了这个问题：[Z-order-curve coordinates](https://stackoverflow.com/questions/12157685/z-order-curve-coordinates) where a algorithm for the 2D case is presenting。我试过了，它有效。

以下是 3D 案例的一些实现：[如何计算 3D 莫顿数（交错 3 个整数的位）](https://stackoverflow.com/questions/1024754/how-to-compute-a-3d-morton-number-interleave-the-bits-of-3-ints)

# php - SwiftMail SMTP 错误

> ID：15649193
> 
> 赞同：2
> 
> 时间：2013-03-26T23:18:44.777
> 
> 标签：php, smtp, swiftmailer, mailchimp, mandrill

我正在尝试为 Mandrill 使用标准 Swiftmail SMTP 连接，该连接位于此处：

[http://help.mandrill.com/entries/21746308-Sending-via-SMTP-in-various-programming-languages](http://help.mandrill.com/entries/21746308-Sending-via-SMTP-in-various-programming-languages)

我得到一个：

```
Fatal error: Uncaught exception 'Swift_TransportException' with message 'Connection could not be established with host smtp.mandrillapp.com [Connection refused #111]' in /home/content/15/10121515/html/includes/classes/Swift/Transport/StreamBuffer.php:259 Stack trace: #0 /home/content/15/10121515/html/includes/classes/Swift/Transport/StreamBuffer.php(64): Swift_Transport_StreamBuffer->_establishSocketConnection() #1 /home/content/15/10121515/html/includes/classes/Swift/Transport/AbstractSmtpTransport.php(115): Swift_Transport_StreamBuffer->initialize(Array) #2 /home/content/15/10121515/html/includes/classes/Swift/Mailer.php(80): Swift_Transport_AbstractSmtpTransport->start() #3 /home/content/15/10121515/html/includes/mail.php(62): Swift_Mailer->send(Object(Swift_Message), Array) #4 {main} thrown in /home/content/15/10121515/html/includes/classes/Swift/Transport/StreamBuffer.php on line 259 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T02:24:56.897

这表明您没有连接到 Mandrill 服务器，通常意味着托管服务提供商正在阻止出站 SMTP 访问，或者您正在使用的端口。您可以尝试切换端口（Mandrill 支持没有加密或 STARTTLS 的 25、587 和 2525，以及使用 SSL 的 465 端口）或联系托管服务提供商以查看他们是否可以打开您用于访问 Mandrill 的端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-26T02:26:37.777

不要浪费您的时间并尝试配置其他 SMTP 服务器（Gmail、mandrillapp 等）以在共享服务器上处理您的外发电子邮件。GoDaddy、Hostgator 等...已阻止此选项。我发现将“localhost”作为主机并摆脱用户名和密码就像一个魅力！看起来太简单了，但这是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-03T07:28:21.000

很可能，您的凭据是错误的。请重新检查您的 API 密钥作为密码，并确保您使用正确的端口来访问 smtp 服务器。

此外，如果您在 Symfony2 中使用 swiftmailer，请确保提供如下默认设置：

在 app/config.yml 中：

```
# Swiftmailer Configuration
swiftmailer:
    transport: "%mailer_transport%"
    host:      "%mailer_host%"
    username:  "%mailer_user%"
    password:  "%mailer_password%"
    port:      "%mailer_port%"
    #spool:     { type: memory } 
```

此外，在您的参数/_dev.yml 中为配置提供值：

```
mailer_transport: smtp
mailer_host: smtp.mandrillapp.com
mailer_user: [USERNAME]
mailer_password: [APIKEY]
mailer_port: 587 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T21:09:09.950

有同样的问题，我生成了一个新的 API 密钥，它可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T08:37:55.320

我今天遇到了同样的问题。找到了这个问题，但由于缺乏答案，我正在写我是如何解决它的（我假设你和我一样在 Linux 下）。

显然问题是没有安装邮件服务器。所以你必须找到你选择的服务器并安装它。我使用了 postfix 并通过以下方式安装它：

```
sudo apt-get install postfix 
```

这解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-02T20:38:37.377

对于 godaddy 共享服务器，它适用于我。

```
'driver' => 'smtp',
'host' => 'localhost',
'port' => '587',
'from' => array('address' => 'xxx@xxx.com', 'name' =>'This is a Sign up mail' ),
'encryption' => 'tls',
'username' => 'xxxxxxxx',
'password' => 'xxxxxx',
'sendmail' => '/usr/sbin/sendmail -bs',
'pretend' => false, 
```

# ruby-on-rails - Rspec 存根导致 Mocha 错误

> ID：15649194
> 
> 赞同：1
> 
> 时间：2013-03-26T23:18:48.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

不太清楚这里发生了什么。我正在从我的另一个项目中转移一些代码，突然之间，以前的相同规范在新项目中产生了错误。所有错误似乎都围绕调用存根方法。这是一个示例测试：

```
it "retrieves active workers from Redis" do
    @monitor.should_receive(:monitor_running?).and_return(false)
    REDIS.should_receive( :smembers ).with( 'leaderboard-workers' ).and_return( [] )
    @monitor.perform
end 
```

这行得通。但是，如果我将第一条测试线切换为：

```
 @monitor.stub(:monitor_running?).and_return(false) 
```

我最终得到以下错误：

```
 1) LeaderboardMonitor#perform retrieves active workers from Redis
 Failure/Error: @monitor.stub(:monitor_running?).and_return(false)
 Mocha::ExpectationError:
   unexpected invocation: #<Mock:0x7fcc18c8bab8>.and_return(false)
   satisfied expectations:
   - allowed any number of times, not yet invoked: #<Mock:0x7fcc18c8bab8>.monitor_running?(any_parameters)
 # ./spec/workers/leaderboards/leaderboard_monitor_spec.rb:58:in `block (3 levels) in <top (required)>' 
```

我不太确定这里发生了什么。这是 Mocha 覆盖存根方法的问题吗？我该如何解决这个问题？！？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:12:21.897

我不知道你用的是什么版本的摩卡。你有没有尝试过类似的东西

```
@monitor.expects(:monitor_running?).returns(false).at_least_once 
```

# javascript - 带有隐藏滚动条的 Lion/Mountain Lion 上的 CSS 悬停错误

> ID：15649202
> 
> 赞同：4
> 
> 时间：2013-03-26T23:19:31.720
> 
> 标签：javascript, html, css, macos, webkit

我有一个列表，当您将鼠标悬停在每个列表项上时，其中会显示一个按钮。该按钮位于每个列表项的右边缘。当列表不需要滚动时，这可以正常工作，但是当需要在 Safari 中的 Lion/Mountain Lion 上滚动时，它不能正常工作，并带有隐藏的滚动条。当鼠标悬停在隐藏的滚动条区域上时，似乎删除了底层项目的 CSS 悬停状态，因此按钮消失了。

我在这里重现了这个问题：

[http://jsfiddle.net/upsT3/](http://jsfiddle.net/upsT3/)

有谁知道这个解决方案/解决方法？

标记：

```
<div id="list1" class="list">
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
</div>
<br />
<br />
<div id="list2" class="list">
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>   
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div>
    <div>Foo<button>a</button></div> 
</div> 
```

CSS：

```
.list {
    height: 200px;
    width: 300px;
    border: 1px solid gray;
    overflow: auto;
}

.list div {
    padding: 5px 0px 5px 5px;
    border-bottom: 1px solid #eee;
}

.list div:hover {
    background: #eee;
}

.list button {
    float: right;
    display: none;    
}

.list div:hover button {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:09:45.610

添加`position: relative;`到`.list`似乎摆脱了 Safari 中的悬停问题，但点击问题仍然存在。

[http://jsfiddle.net/zZWPq/](http://jsfiddle.net/zZWPq/)

奇怪的是，包含`div`注册点击，而`button`没有。完全隐藏滚动条当然可以解决问题，但这是糟糕的用户体验，强烈建议不要考虑，而且真的不应该被视为一种选择。如果我发现其他东西会报告。

# sql-server-2008 - 在检查约束中选择

> ID：15649205
> 
> 赞同：0
> 
> 时间：2013-03-26T23:19:39.750
> 
> 标签：sql-server-2008, check-constraints

我想为我的表创建一个检查约束，如果新的预订范围（开始日期，结束日期）与已提交的行相交，则不能在其中添加新行。但我不能将查询放在检查约束中。你知道怎么做吗？

表格：

```
APARTMAN

        id INT
        price INT

BOOKINGS

        id INT
        start_date DATE
        end_date DATE
        apartman_id INT

[apartman_id] IN (SELECT [id]  FROM [dbo].[APARTMAN]
    WHERE [id]  NOT IN (
        SELECT [apartman_id]    FROM
            [dbo].[BOOKINGS]
        WHERE
            ([start_date] <= "requested end_date" AND
            [end_date] >= "requested start_date" )
            OR
            ([start_date] <= "requested start_date" AND
             [end_date] >= "requested end_date" )
            OR
            (([start_date] <= "requested end_date" AND  [end_date] >= "requested start_date" )
                OR
                ([end_date] <= "requested start_date"  AND  [end_date] >= "requested end_date" ))
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:27:03.090

这是我认为可以处理所有场景的而不是触发器。

```
CREATE TRIGGER dbo.PreventOverlappingBookings
ON dbo.BOOKINGS INSTEAD OF INSERT, UPDATE
AS
BEGIN
  SET NOCOUNT ON;

  IF EXISTS (
    SELECT 1 FROM inserted AS i
      INNER JOIN dbo.BOOKINGS AS b
      ON (b.id <> i.id OR i.id = 0) -- 0 for insert
      AND b.apartman_id = i.apartman_id
      AND ((b.start_date   <= i.end_date   AND b.end_date >= i.start_date)
         OR (b.start_date  <= i.start_date AND b.end_date >= i.end_date)
         OR (b.end_date    <= i.start_date AND b.end_date >= i.end_date))
  ) OR EXISTS (
    -- also make sure there are no overlaps in a set-based insert/update
    SELECT 1 FROM inserted AS i
      INNER JOIN inserted AS b
      ON (b.id <> i.id OR i.id = 0) -- 0 for insert
      AND b.apartman_id = i.apartman_id
      AND ((b.start_date   <= i.end_date   AND b.end_date >= i.start_date)
         OR (b.start_date  <= i.start_date AND b.end_date >= i.end_date)
         OR (b.end_date    <= i.start_date AND b.end_date >= i.end_date))
  )
  BEGIN
    RAISERROR('Overlapping date range.', 11, 1);
  END
  ELSE
  BEGIN
      UPDATE b SET start_date = i.start_date, end_date = i.end_date
        FROM dbo.BOOKINGS AS b
        INNER JOIN inserted AS i
        ON b.id = i.id;
      IF @@ROWCOUNT > 0
      BEGIN
        INSERT dbo.BOOKINGS(start_date, end_date, apartman_id)
          SELECT start_date, end_date, apartman_id FROM inserted AS i;
      END
  END
END
GO 
```

一些答案[会建议 UDF 中的函数](https://stackoverflow.com/questions/12035747/date-range-overlapping-check-constraint)，但[我不相信它们（恕我直言，你也不应该相信）](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/06/25/scalar-udfs-wrapped-in-check-constraints-are-very-slow-and-may-fail-for-multirow-updates.aspx)。

# java - Play Framework 2.1：在全局设置中以编程方式覆盖配置文件

> ID：15649207
> 
> 赞同：1
> 
> 时间：2013-03-26T23:19:50.667
> 
> 标签：java, playframework, playframework-2.1

我正在开发一个多租户 Play Framework 2.1 应用程序。我打算重写 GlobalSettings 类的 onRequest 方法，以根据请求的子域加载和设置自定义配置。问题是，我看不出这在 Play 2.x 中是如何实现的。

启动服务器时，我可以在命令行覆盖系统属性，但是如何在 Java 代码中为每个请求以编程方式执行此操作？

代码看起来像这样（我假设）：

```
@Override
public play.mvc.Action onRequest(Request request, Method actionMethod) {
    //Look up configuration settings in Cache based on request subdomain
    //(i.e. Cache.get("subdomain.conf"))
    //if not in cache: 
           //load appropriate configuration file for this subdomain (java.io.File)
           //set new configuration from file for this request
           //cache the configuration for future use in a new thread
   //else
           //set configuration from cache for this request
   return super.onRequest(request, actionMethod);
  }

} 
```

查找 URL 和获取/设置缓存很容易，但我无法弄清楚如何以编程方式为 Play Framework 2.1 设置新配置，并且文档对此类内容稍有了解。

有什么想法吗？有人知道更好，更有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T15:21:14.903

因此，以一种迂回的方式，我使用 Scala Global 创建了多租户 Play 应用程序的基础。使用过滤器可能有一种更有效的方法来实现这一点，但我发现这似乎到目前为止有效。这似乎在 Java 中实现起来并不容易。

我没有使用配置文件，而是使用数据库。我认为使用键值缓存会更有效，但这似乎目前有效。

在 Global.scala 中：

```
object Global extends GlobalSettings {

  override def onRouteRequest(request: RequestHeader): Option[Handler] = {
    if (request.session.get("site").isEmpty){
      val id = models.Site.getSiteIDFromURL(request.host)
      request.session.+("site" -> id)
    }
    super.onRouteRequest(request)
  }

} 
```

然后，显然，您必须创建一个数据库模型来根据请求域和/或请求中设置的会话值来查询站点。如果有人知道更好的方法，我很想听听。

# php - PHP 包含链接

> ID：15649208
> 
> 赞同：0
> 
> 时间：2013-03-26T23:19:54.557
> 
> 标签：php, html

您好，我第一次认真地使用 PHP 为我自己创建一个示例脚本。它有一个基本结构，在我的根文件夹中，我有：

*   索引.php
*   核心文件夹（包含我的大部分 php 函数文件）
*   包括（持有我的 header.php 和 footer.php）
*   站点 - （站点还有 3 个文件夹站点 A、B、C）
*   CSS
*   js

所有页面都是通过从包含文件夹中获取 header.php 和 footer.php 组成的，然后每个页面在中间都有自己的内容。header.php 包含（以及基本的 html 和到 javascripts 样式表等的链接）包括来自核心文件夹，如下所示：

*   include_once '/core/connect.php';

现在这些都可以使用 index.php 很好地工作，它提供了指向站点 3 个不同部分的链接，sitea、siteb 和 sitec。

但是，当您从文档根目录导航到 /sites/sitea/index.php 时，所有这些链接现在都已损坏。

在 header.php 部分中构建链接的最佳方法是什么，以便无论您在哪个文件夹中，它们都是相对站点范围内的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:41:04.937

最好的方法是始终使用无论您身在何处的物理路径 - 这样每个包含其他页面的页面都不会中断：

PHP 5.2 及以下版本：

```
require(dirname(__FILE__) . '/core/connect.php'); 
```

PHP 5.3 及以上

```
require(__DIR__ . '/core/connect.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:23:45.347

这背后的想法是每个进程只有一个文件。

所以通过index.php处理所有页面

index.php 将包含，例如，

```
require('header.php');
include('content.php');
require('footer.php'); 
```

这样，如果您的内容没有显示，它不会破坏网站。

您的索引始终从同一路径加载，因此页眉/页脚不会改变。只是内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:24:06.847

当您包括在内时，您想使用真实路径，而不是相对路径......

```
require_once ($_SERVER['DOCUMENT_ROOT'].'/includes/header.php');
/* something happens here */
require_once ($_SERVER['DOCUMENT_ROOT'].'/includes/footer.php'); 
```

# r - 在R中合并矩阵索引

> ID：15649216
> 
> 赞同：2
> 
> 时间：2013-03-26T23:20:32.373
> 
> 标签：r, statistics

我有一个数据集 (x) 包含

```
 1 10
20 30
34 38
59 83
... 
```

我有一个大矩阵`nx1`。我想为 x 中的每一行分配一个值 1。例如

```
mat[1:10,1] = 1 
mat[20:30,1] = 1
etc... 
```

在 R 中， 的大小`x`非常大，需要一段时间才能执行以下操作：

```
for ( j in 1:dim(x)[1] ) { 
    mat[x[j,1]:x[j,2], 1] <- 1 
} 
```

如果有更快的方法可以做到这一点，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:29:49.467

您可以轻松地列出要在大矩阵中分配值为 1 的行，使用`apply`on x with`seq.int`来获取这样的行号...

```
rows <- unlist( apply( x , 1 , FUN = function(x){ seq.int(x[1],x[2])}) )
rows
#  [1]  1  2  3  4  5  6  7  8  9 10 20 21 22 23 24 25 26 27 28 29 30 34 35 36 37 38 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 
```

然后使用会更快的子集，像这样

```
mat[ rows , 1 ] <- 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:32:51.930

`data.table`通常在这种情况下表现出色。这是一个`data.table`基于 - 的解决方案：

```
library(data.table)
indexes<-data.table(istart=c(1L,20L,34L,59L), istop=c(10L,30L,38L,83L))
mat<-data.table(val=sample(1L:1e5L,1e5))

mat[indexes[,list(i=seq(istart,istop)),by="istart"][,i],val:=1L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:39:51.227

如果`m`是您的一组开始和停止位置：

```
m <-  matrix(scan(), ncol=2)
#------
1: 1 10
3: 20 30
5: 34 38
7: 59 83
9: 
Read 8 items
mapply( seq.int,  m[,1], m[,2])

rx1[ unlist( mapply( seq.int,  m[,1], m[,2]) ), 1] <- 1 
```

（与 SimonO101 早期的贡献略有不同。）

# node.js - node.js 和 sqlite3 web 应用程序，损坏的未排序块：/

> ID：15649218
> 
> 赞同：0
> 
> 时间：2013-03-26T23:20:51.077
> 
> 标签：node.js, sqlite

我是节点新手，正在我的树莓派上试用。我已经安装了最新版本（[http://nodejs.org/dist/v0.9.9/node-v0.9.9-linux-arm-pi.tar.gz](http://nodejs.org/dist/v0.9.9/node-v0.9.9-linux-arm-pi.tar.gz)）

和 npm 安装 sqlite3 （也制作和安装）

我现在正在尝试运行以下代码：

```
var http    = require("http");
var sqlite3 = require("sqlite3").verbose();
var port    = 1337;
var ip  = "192.168.2.15";

http.createServer(function (req, res) {
    res.writeHead(200, {"Content-Type": "text/plain"});

    var db = new sqlite3.Database(":memory:");

    db.serialize(function() {
        db.run("CREATE TABLE lorem (info TEXT)");
        console.log("CREATE");
        var stmt = db.prepare("INSERT INTO lorem VALUES (?)");
        for (var i = 0; i < 10; i++) {
            stmt.run("Ipsum " + i);
        }
        stmt.finalize();
        console.log("START SELECT [");
        db.each("SELECT rowid AS id, info FROM lorem", function(err, row) {
            console.log(row.id + ": " + row.info);
        });
        console.log("] END SELECT");
    });
    console.log("CLOSE");

    db.close();

    res.end("Hello World.");

}).listen(port, ip);

console.log("Server running at http://" + ip + ":" + port); 
```

我得到的输出是：

```
Server running at http://192.168.2.15:1337
CREATE
START SELECT [
] END SELECT
CLOSE
1: Ipsum 0
2: Ipsum 1
3: Ipsum 2
4: Ipsum 3
5: Ipsum 4
6: Ipsum 5
7: Ipsum 6
8: Ipsum 7
9: Ipsum 8
10: Ipsum 9
*** glibc detected *** node: free(): corrupted unsorted chunks: 0x0072fe28 ***
Aborted 
```

我的假设是即使我正在使用以太我也有竞争条件，`db.serialize`或者这不会在 pi 上工作（尽管 sqlite3 确实可以编译）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T03:55:28.153

我最近遇到了这个问题。我意识到我没有使用稳定/推荐的 node.js 版本。通过降级到 0.8.15 解决

# jquery - 代码可在除 IE 之外的所有顶级浏览器中运行

> ID：15649219
> 
> 赞同：0
> 
> 时间：2013-03-26T23:20:59.110
> 
> 标签：jquery

我有以下代码来更改几个元素的文本并为过渡设置动画。它经过测试可以在 Firefox、Chrome 和 Safari 中运行。问题是它在 IE 中没有效果。到目前为止，我是否应该使用任何代码来代替或补充我所拥有的代码？

```
$('.overlay').on("click",function(){
    $('#category, #description').stop(true)

    var text = $(this).attr("data-title");

    $('#category').animate({'opacity': 0}, 1000, function () {
       $(this).text(text);
    }).animate({'opacity': 1}, 1000); 

    var info = $(this).attr("data-text");

    $('#description').animate({'opacity': 0}, 1000, function () {
       $(this).text(info);
    }).animate({'opacity': 1}, 1000);
}); 
```

# javascript - 如何正确封装 socket.io 套接字？

> ID：15649220
> 
> 赞同：0
> 
> 时间：2013-03-26T23:21:05.550
> 
> 标签：javascript, node.js, socket.io

此代码在我的 node.js 服务器应用程序中运行：

```
io.sockets.on('connection', function (socket) {

    var c = new Client(socket, Tools.GenerateID());

    waitingClients.push(c);
    allClients.push(c);

    if (waitingClients.length === 2)
    {
        activeGames.push(new Game([waitingClients.pop(), waitingClients.pop()]));
    }
});

function Client(socket, id)
{
    this.Socket = socket;
    this.ID = id;
    this.Player = new Player();

    this.Update = function(supply)
    {
        socket.emit('update', { Actions: this.Player.Actions, Buys: this.Player.Buys, Coins:  this.Player.Coins, Hand: this.Player.Hand, Phase: this.Player.Phase, Supply: supply});
    }

    socket.on('play', function(data) {
        console.log(data);
        console.log(this.Player);
    });

    socket.emit('id', id);
} 
```

我遇到问题的部分是“播放”事件的事件处理程序。 `console.log(this.Player)`输出`undefined`。我有点理解为什么会出错，因为“this”指的是我的客户端对象以外的东西（套接字？匿名函数？），但我不知道如何重新安排代码以正确处理“播放”事件，并拥有对 Client 对象成员的完全访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:25:21.070

你只需要存储`this`在其他一些变量里面`Client`。

```
function Client(socket, id)
{
    var self = this;
    ...

    socket.on('play', function(data) {
        self.Player.play();
    }); 
```

# python - redis-py AttributeError：“模块”对象没有属性

> ID：15649222
> 
> 赞同：8
> 
> 时间：2013-03-26T23:21:29.003
> 
> 标签：python, redis

我在 CentOS 和 Ubuntu 上安装了 redis-py。在尝试访问它时，我都会遇到相同的错误。

```
redis-py AttributeError: 'module' object has no attribute 
```

如果我在与源相同的目录中使用 python 提示符，这将起作用：

```
>>> import redis
>>> r = redis.Redis(host='localhost', port=6379, db=0) 
```

但如果我更改目录，它会给出错误。

```
>>> import redis
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "redis.py", line 4, in <module>
    print redis.__version__
AttributeError: 'module' object has no attribute '__version__' 
```

尝试使用`.py`脚本总是会出错。知道我做错了什么，以及如何解决它。可能是一个新手 Python 的东西......

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-26T23:26:13.053

您正在命名您正在处理的模块，`redis.py`而 Python 正在导入该模块而不是真正的`redis`模块。不要这样做，或者更改`sys.path`以确保当前工作目录在要搜索的目录列表中是*最后一个*而不是第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-08T13:59:43.433

我在龙卷风中有这个错误，这是因为我在 python 2.7 上安装了 redis 并在 python3 中安装，我从 python2.7 卸载 redis 并在 python3 中重新安装并解决问题！

# date - 如何自动删除包含从现在开始与过去偏移超过 3 天的日期的行？

> ID：15649223
> 
> 赞同：3
> 
> 时间：2013-03-26T23:21:31.313
> 
> 标签：date, google-apps-script, google-sheets, delete-row

我正在尝试编写一个脚本，该脚本将自动删除日期超过 3 天（4 天后）的行

我发现了这个我希望能够适应的脚本：

```
function DeleteOldEntries() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  //give your sheet name below instead of Sheet1
  var sheet = ss.getSheetByName("Foglio1");

  var datarange = sheet.getDataRange();
  var lastrow = datarange.getLastRow();

  var currentDate = new Date();
  var oneweekago = new Date();
  oneweekago.setDate(currentDate.getDate() - 7);

  for (i = lastrow; i >= 2; i--) {
    var tempdate = sheet.getRange(i, 1).getValue();

    if (tempdate < oneweekago) {
      sheet.deleteRow(i);
    }
  }
} 
```

但是脚本本身似乎有一个错误，我需要在将其调整为 4 天而不是 7 天之前弄清楚（这部分很容易）

如果该信息有帮助，我的工作表有 3 列，C 列中有日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:04:46.890

***“C 列中的日期，如果该信息有帮助”***

这的确是 ！而不是像在这一行中那样尝试在 A 列中获取日期：

```
var tempdate = sheet.getRange(i, 1).getValue(); 
```

您应该像这样查看 C 列中的值：

```
var tempdate = sheet.getRange(i, 3).getValue(); 
```

但为了更有效率，你应该在数组级别进行这些比较，像下面这样尝试，它会运行得更快......

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheetByName("Foglio1");
var datarange = sheet.getDataRange();
var lastrow = datarange.getLastRow();
var values = datarange.getValues();// get all data in a 2D array

var currentDate = new Date();
var oneweekago = new Date();
oneweekago.setDate(currentDate.getDate() - 7);

for (i=lastrow;i>=2;i--) {
var tempdate = values[i-1][2];// arrays are 0 indexed so row1 = values[0] and col3 = [2]

if(tempdate < oneweekago)  
{
  sheet.deleteRow(i);
}
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-20T03:26:20.023

如果您的行按日期顺序排列，最新的在顶部，并且您一次删除所有行而不是一次删除一个行，那将会快得多。

```
function deleteOldData() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("CallHub1");
  var datarange = sheet.getDataRange();
  var lastrow = datarange.getLastRow();
  var values = datarange.getValues();// get all data in a 2D array

  var currentDate = new Date();
  var daysago = new Date().setDate(currentDate.getDate() - 3);
  var yearago = new Date().setDate(currentDate.getDate() - 365);

  for (i=lastrow;i>=2;i--) {
    var tempdate = values[i-1][0];// arrays are 0 indexed so row1 = values[0] and col3 = [2]
    if(tempdate < daysago)  {
      if(tempdate < yearago)  {continue;}
      sheet.deleteRows(1, i);
      break;
    }
  }
} 
```

# java - 无法在 Java 中创建多个多边形 - 只有一个

> ID：15649228
> 
> 赞同：1
> 
> 时间：2013-03-26T23:21:51.790
> 
> 标签：java, swing, jframe, awt

给定以下代码：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.ArrayList;
import java.util.Iterator;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 * 
 * @author X2
 *
 */
public class PolygonnerJframe
{
    public static void main (String[] args)
    {
     JFrame frame = new JFrame("Draw polygons");
     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     frame.setContentPane(new DrawingPanel());
     frame.pack();
     frame.setVisible(true);
 }
}

/**
 * Main class
 * @author X2
 *
 */
class DrawingPanel extends JPanel implements MouseListener, MouseMotionListener
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private static final Dimension MIN_DIM = new Dimension(300, 300);
    private static final Dimension PREF_DIM = new Dimension(500, 500);
    private boolean polygonDone = false;
    private final Point trackPoint = new Point(); // The 'dummy' point tracking the mouse
    private ArrayList<Point> points = new ArrayList<Point>(); // The list of points making up a polygon
    private ArrayList<Point> helper = new ArrayList<Point>(); // The list of points making up a polygon

    public ArrayList<Point> copyCreate(ArrayList<Point> input , ArrayList<Point> output)
    {
        int i = 0;
        if (output == null)
            output = new ArrayList<Point>();
        while (i < input.size())
        {
            output.add(input.get(i));
            i++;
        }
        return output;
    }

    /**
     * Setting the dimensions of the windows
     */
    public Dimension getMinimumSize() { return MIN_DIM; }

    public Dimension getPreferredSize() { return PREF_DIM; }

    /**
     *  The only constructor needed for this class
     */
    DrawingPanel()
    {
        super();
        addMouseListener(this);
        addMouseMotionListener(this);
    }

    /**
     *  The drawing itself 
     */
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        int numPoints = points.size();
        if (numPoints == 0)
            return; // nothing to draw

        Point prevPoint = (Point) points.get(0);

        // draw polygon
        Iterator<Point> it = points.iterator();
        while (it.hasNext())
        {
            Point curPoint = (Point) it.next();
            draw(g, prevPoint, curPoint);           
            prevPoint = curPoint;
        }

        // now draw tracking line or complete the polygon
        if (polygonDone == true)
        {
            draw(g, prevPoint, (Point) points.get(0));
        }

        else  // polygonDone == false
            draw(g, prevPoint, trackPoint); 

    }

    /**
     * MouseListener interface 
     */
    public void mouseClicked(MouseEvent evt)
    {
        int x = evt.getX();
        int y = evt.getY();

        switch (evt.getClickCount())
        {
            case 1: // single-click
                if (polygonDone == true)
                {
                    this.helper = this.copyCreate(this.points, this.helper);  // copy the new coordinates into the helper 
                    points.clear();
                    polygonDone = false;
                }
                points.add(new Point(x, y));
                repaint();
                break;

            case 2: // double-click
                polygonDone = true;
                points.add(new Point(x, y));
                // repaint();
                break;

            default: // ignore anything else
                break;
        }
    }

    /**
     * MouseMotionListener interface 
     */
    public void mouseMoved(MouseEvent evt)
    {
        trackPoint.x = evt.getX();
        trackPoint.y = evt.getY();
        repaint();
    }

    /**
     * draw points and lines 
     * @param g
     * @param p1
     * @param p2
     */
    private void draw(Graphics g, Point p1, Point p2)
    {
        int x1 = p1.x;
        int y1 = p1.y;

        int x2 = p2.x;
        int y2 = p2.y;

        // draw the line first so that the points
        // appear on top of the line ends, not below
        g.setColor(Color.green.darker());
        g.drawLine(x1 + 3, y1 + 3, x2 + 3, y2 + 3);
        g.drawLine(x1 + 4, y1 + 4, x2 + 4, y2 + 4);
        g.drawLine(x1 + 5, y1 + 5, x2 + 5, y2 + 5);

        g.setColor(Color.green);
        g.fillOval(x1, y1, 8, 8);

        g.setColor(Color.black);
        g.fillOval(x2, y2, 8, 8);
    }

    public void mouseDragged(MouseEvent evt) { /* EMPTY */ }

    public void mousePressed(MouseEvent evt) { /* EMPTY */ }

    public void mouseReleased(MouseEvent evt) { /* EMPTY */ }

    public void mouseEntered(MouseEvent evt) { /* EMPTY */ }

    public void mouseExited(MouseEvent evt) { /* EMPTY */ }
} 
```

我每次只能绘制一个多边形，这意味着 - 当我尝试开始一个新的多边形时，“旧”多边形消失了，但我不明白为什么。

那么如何绘制多个多边形呢？

是什么导致旧多边形消失？我想可能是因为`repaint()`，但我试过没有它，但它没有帮助。

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:31:28.853

多边形确实被调用`points.clear()`. [为了解决这个问题，您可以使用Polygon](http://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html)类来维护有关先前多边形的坐标信息，`List`这些信息可以与“进行中的”多边形一起绘制。[这在自定义绘画方法](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)中进行了概述。

# mysql - 用于从日志表中检索 MAU（每月活跃用户）的 MySQL 查询

> ID：15649230
> 
> 赞同：2
> 
> 时间：2013-03-26T23:21:53.520
> 
> 标签：mysql, sql, reporting, metrics, social-gaming

在这里，我提出了一种从日志表中按天和平台检索 MAU 的方法。
这是通过在过程中使用临时表来完成的。
任何人都知道查询这个的最快方法吗？

```
/* CREATE LOG TABLE EXAMPLE */

CREATE TABLE TEST_LOG (
       ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT
     , DTIME DATETIME
     , USERID BIGINT UNSIGNED NOT NULL
     , PLATFORM CHAR(25) NULL
     , PRIMARY KEY (ID)
)ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/* CREATE PROCEDURE TO ADD SOME TEST DATA INTO TEST_LOG */

DROP PROCEDURE IF EXISTS ADD_TEST_DATA;

DELIMITER |
CREATE PROCEDURE ADD_TEST_DATA(DATE_START DATETIME, DATE_END DATETIME)
BEGIN
    DECLARE T_PRAND INTEGER DEFAULT NULL;
    DECLARE T_COUNT INTEGER DEFAULT NULL;
    DECLARE T_URAND INTEGER DEFAULT NULL;
    DECLARE T_PLATF INTEGER DEFAULT NULL;
    DECLARE T_PLATN CHAR(25) DEFAULT NULL;
    WHILE DATE_START <= DATE_END DO 
            SELECT FLOOR(1+RAND()*10) INTO T_PRAND FROM DUAL; /* 1-10 RANDOM LOGS FOR EACH DAY */
            SET T_COUNT = 0;
            WHILE T_COUNT <= T_PRAND DO
                SELECT FLOOR(1+RAND()*1000) INTO T_URAND FROM DUAL;  /* RANDOM USER */
                SELECT FLOOR(1+RAND()*5)    INTO T_PLATF FROM DUAL;  /* RANDOM PLATFORM */
                CASE T_PLATF
                    WHEN 1 THEN SET T_PLATN = 'WEB';
                    WHEN 2 THEN SET T_PLATN = 'FACEBOOK';
                    WHEN 3 THEN SET T_PLATN = 'IPHONE';
                    WHEN 4 THEN SET T_PLATN = 'IPAD';
                    WHEN 5 THEN SET T_PLATN = 'ANDROID';
                    ELSE
                        BEGIN
                        END;
                END CASE;
                INSERT INTO TEST_LOG (DTIME,USERID,PLATFORM) VALUES (DATE_START, T_URAND, T_PLATN);
                SET T_COUNT = T_COUNT+1;
            END WHILE;
        SET DATE_START = DATE_ADD(DATE_START, INTERVAL 1 DAY);
    END WHILE;
END 
|
;

CALL ADD_TEST_DATA('2013-01-01 00:00:00', '2013-03-25 23:59:59'); /* SAMPLE DATE CREATION */

/* CREATE PROCEDURE TO CALCULATE MAU */

DROP PROCEDURE IF EXISTS MAU;

DELIMITER |
CREATE PROCEDURE MAU(DATE_START DATETIME, DATE_END DATETIME)
BEGIN
    DECLARE T_DTIME     DATETIME    DEFAULT NULL;
    DECLARE T_ATOTAL        INTEGER     DEFAULT NULL;   
    DECLARE T_WEB           CHAR(10)    DEFAULT NULL;
    DECLARE T_FACEBOOK      CHAR(10)    DEFAULT NULL;
    DECLARE T_IPHONE        CHAR(10)    DEFAULT NULL;
    DECLARE T_IPAD          CHAR(10)    DEFAULT NULL;
    DECLARE T_ANDROID       CHAR(10)    DEFAULT NULL;   
    DECLARE T_UNKNOWN       CHAR(10)    DEFAULT NULL;   
    DROP TEMPORARY TABLE IF EXISTS TEMP_RESULTS;
    CREATE TEMPORARY TABLE IF NOT EXISTS TEMP_RESULTS  (
        TEMP_DTIME  DATE,
        TEMP_ATOTAL     INTEGER,        
        TEMP_WEB        CHAR(10)    DEFAULT NULL,
        TEMP_FACEBOOK   CHAR(10)    DEFAULT NULL,
        TEMP_IPHONE     CHAR(10)    DEFAULT NULL,
        TEMP_IPAD       CHAR(10)    DEFAULT NULL,
        TEMP_ANDROID    CHAR(10)    DEFAULT NULL,       
        TEMP_UNKNOWN    CHAR(10)    DEFAULT NULL    
    );  
    WHILE DATE_START <= DATE_END DO 
        SELECT DATE(DATE_START),
        COUNT( DISTINCT USERID ) AS UNIQUE_TOTAL,       
        COUNT( DISTINCT CASE WHEN PLATFORM='WEB' THEN USERID ELSE NULL END ) AS WEB,
        COUNT( DISTINCT CASE WHEN PLATFORM='FACEBOOK' THEN USERID ELSE NULL END ) AS FACEBOOK,
        COUNT( DISTINCT CASE WHEN PLATFORM='IPHONE' THEN USERID ELSE NULL END ) AS IPHONE,
        COUNT( DISTINCT CASE WHEN PLATFORM='IPAD' THEN USERID ELSE NULL END ) AS IPAD,
        COUNT( DISTINCT CASE WHEN PLATFORM='ANDROID' THEN USERID ELSE NULL END ) AS ANDROID,
        COUNT( DISTINCT CASE WHEN PLATFORM <> 'WEB' 
                              AND PLATFORM <> 'FACEBOOK'
                              AND PLATFORM <> 'IPHONE'
                              AND PLATFORM <> 'IPAD'
                              AND PLATFORM <> 'ANDROID'
                                                    THEN USERID ELSE NULL END ) AS UNKNOWN      
        INTO T_DTIME, T_ATOTAL, T_WEB, T_FACEBOOK, T_IPHONE, T_IPAD, T_ANDROID, T_UNKNOWN
        FROM TEST_LOG
        WHERE ID >= 1
        AND DTIME > DATE_START + INTERVAL -1 MONTH
        AND DTIME <= DATE_START;
        INSERT INTO TEMP_RESULTS VALUES (T_DTIME, T_ATOTAL, T_WEB, T_FACEBOOK, T_IPHONE, T_IPAD, T_ANDROID, T_UNKNOWN);
        SET DATE_START = DATE_START + INTERVAL 1 DAY;
    END WHILE;
    SELECT TEMP_DTIME AS DATE, TEMP_ATOTAL AS TOTAL_UNIQUE, TEMP_WEB AS WEB, TEMP_FACEBOOK AS FACEBOOK, 
           TEMP_IPHONE AS IPHONE, TEMP_IPAD AS IPAD, TEMP_ANDROID AS ANDROID, TEMP_UNKNOWN AS UNKNOWN 
    FROM TEMP_RESULTS;
    DROP TEMPORARY TABLE IF EXISTS TEMP_RESULTS;
END 
|
;

CALL MAU('2013-01-01 00:00:00', '2013-03-25 23:59:59'); /* QUERYING SAMPLE DATA */ 
```

任何改进表示赞赏，谢谢！

# delphi - 如何使表单像任务栏一样与屏幕边缘对齐？

> ID：15649231
> 
> 赞同：2
> 
> 时间：2013-03-26T23:21:57.197
> 
> 标签：delphi, windows-7, delphi-xe2, toolbar

我正在构建一个“仪表板”应用程序，它始终在任何给定显示器的任何边缘可见，即使在其他应用程序最大化时也是如此。我不一定需要它“始终在顶部”（尽管我会），但我需要让它成为屏幕的一部分，作为我自己的桌面工具栏，就像 Windows 任务栏一样。即使应用程序最大化，窗口也在这个区域内，使这个窗口始终可见（桌面区域更小）。

如何使我的应用程序的主窗体与这样的屏幕边缘对齐？

PS - 我不需要回答所有额外的粗暴处理，例如屏幕分辨率的变化......我只需要知道如何首先将其对齐为“屏幕的一部分”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T23:45:38.330

您正在寻找[Application Desktop Toolbars](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144177%28v=vs.85%29.aspx)，这是 Windows 任务栏内部使用的。它涉及创建具有特定样式的窗口，正确设置它，然后使用[`SHAppBarMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762108%28v=vs.85%29.aspx).

它可能会变得相当复杂，但是有一些免费的组件可用于源代码（一个在[Torry](http://www.torry.net/pages.php?id=19)或另一个在[DelphiPages](http://www.delphipages.com/comp/tappbar-3864.html)），它们具有基本的外壳来帮助您入门。

第二个链接单元的一个示例`AppBar.pas`（根据链接的文本，它是带有源代码的免费软件 - 我用它来创建一个应用程序启动器任务栏，完成带有应用程序图标的按钮和从`.lnk`文件中读取的描述）：

```
type
  TAppBarMessage = (abmNew, abmRemove, abmQueryPos, abmSetPos, abmGetState, 
                    abmGetTaskBarPos, abmActivate, abmGetAutoHideBar, 
                    abmSetAutoHideBar, abmWindowPosChanged);

  TAppBarEdge = (abeLeft, abeTop, abeRight, abeBottom, abeUnknown, abeFloat);

...

function TAppBar.AppBarMessage(abMessage: TAppBarMessage; 
  abEdge: TAppBarEdge; lParam: LPARAM; bRect: Boolean; var rc: TRect): UINT;
var
  abd: TAppBarData;
begin
  // Initialize an APPBARDATA structure
  abd.cbSize := sizeof(abd);
  abd.hWnd := Handle;
  abd.uCallbackMessage := WM_APPBARNOTIFY;
  abd.uEdge := Ord(abEdge);

  if bRect then
    abd.rc := rc
  else
    abd.rc := Rect(0, 0, 0, 0);

  abd.lParam := lParam;
  Result := SHAppBarMessage(Ord(abMessage), abd);

  // If the caller passed a rectangle, return the updated rectangle
  if bRect then
    rc := abd.rc;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:35:23.800

如果不出意外，您可以手动确定此信息。查看单元中的全局`Screen`对象以`Forms`获取有关当前分辨率的信息。（确保检查`MonitorCount`和`Monitors`属性。）

在这和一些基本的算术之间，设置表单以对齐显示器的边缘应该不会太难。

# css - 样式化 DataGrid GWT

> ID：15649234
> 
> 赞同：2
> 
> 时间：2013-03-26T23:22:04.883
> 
> 标签：css, gwt, datagrid

我正在使用 vanilla GWT DataGrid`(com.google.gwt.user.cellview.client.DataGrid)`来构建一个表。为了使用 CSS 样式，我使用了类似的方法，描述了[How to override CellTable css](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/dZLk5LwnKN0)。

我需要为整个表格应用边框。我可以使用`.dataGridCell`.

```
/**
* Applied to every cell.
*/
.dataGridCell {
  padding: standard-cell-padding;
  border-bottom: 1px solid #6f7277;
  border-left: 1px solid #6f7277;
  border-right: 1px solid #6f7277;
  border-top: 1px solid #6f7277;
  overflow: hidden;
} 
```

但随后在交叉路口，边框变为粗体，页面看起来不太好。

![在此处输入图像描述](../Images/bcb60c47296fcff2e292525a120718eb.png)

在 css 中定义了另一个类，如下所示。

```
/**
* Applied to the table.
*/  
.dataGridWidget {
} 
```

似乎即使我更改了此类的值，它也没有任何效果。有谁知道如何完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-27T13:35:10.037

由于浏览器插入了一些样式，交叉点显示为粗体。在 Chrome 中，它们出现在检查器中，`user agent stylesheet` 特别是使交叉路口的边框看起来很厚的原因是`border-collapse: separate;`

请参阅[此 stackoverflow 链接](https://stackoverflow.com/questions/12582624/what-is-user-agent-stylesheet)，该链接解释了如何摆脱这些默认浏览器 css 设置。

还有[这个](http://www.cssreset.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:55:02.997

您的 CSS 类名被混淆了。您应该使用[`Client Bundles`](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)（特别是[`CssResource`](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#CssResource)）以确保使用正确的类名。

另外，看看[这个](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/DataGrid.Style.html)。

# java - 生成随机数方法

> ID：15649236
> 
> 赞同：-2
> 
> 时间：2013-03-26T23:22:24.040
> 
> 标签：java, methods, random, generator

我需要帮助编写一个方法，该方法将返回一个不重复的随机 4 位数字。我不允许以任何方式使用字符串...

这就是我到目前为止所拥有的以及运行的线路。涉及，我得到一个错误：运行无法解决

```
public static int generateSecretNumber() {
    Random r = new Random();
    int x = r.nextInt(1000);;    
    x = x + 1000;  
    return x; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:25:17.200

您可以生成 4 个独立的数字。

1) 生成 1 到 9 之间的数字 A

2) 生成 0 到 9 之间且不同于 A 的数字 B

3) 生成介于 0 和 9 之间且不同于 A 和 B 的数字 C

4) 生成 0 到 9 之间且不同于 A、B 和 C 的数字 D

现在你的号码是 ABCD 或

```
1000*A + 100*B + 10*C + D 
```

完整代码：

```
public static int generateSecretNumber() {
    Random ran = new Random();
    int a, b, c, d;

    a = ran.nextInt(9) + 1; //1-9

    do {
        b = ran.nextInt(10); //0-9
    } while(b==a);

    do {
        c = ran.nextInt(10); //0-9
    } while(c==a || c==b);

    do {
        d = ran.nextInt(10); //0-9
    } while(d==c || d==b || d==a);

    return 1000*a + 100*b + 10*c + d;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:28:00.367

该行：

```
int x = + ran.nextInt(1000); 
```

应该读

```
int x = r.nextInt(1000); 
```

另一件事 - 你说你想生成一个不重复的随机 4 位数字。这可能需要一段时间，因为随机数生成器多次返回相同的数字是完全可以的，就像你掷硬币时可以连续得到 4 个正面一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:06:44.957

对于具有不同数字的 4 位随机数，您可以随机播放一个集合。

```
List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 0);
do{
    Collections.shuffle(numbers);
} while (0 == numbers.get(0));

System.out.println(numbers.subList(0, 4)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T23:29:57.937

生成 0 到 9 之间的 4 个随机数字（参数为`nextInt`：10）。跟踪所有 4 位数字。如果其中任何一个相同，则生成另一个随机数字。然后使用数字构造您的最终数字。

此外，如果您要声明`Random`变量`r`，请使用`r.nextInt(10)`not `ran.nextInt(10)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T23:40:32.130

有很多不同的方法可以做到这一点来获得不同的数字。我建议如下：

```
public static int generateSecretNumber(int digitLength) {
    Random ran = new Random();
    int randDigit[digitLength];
    int finalNum = 0;
    for(int i = 0; i < digitLength; i++){
        randDigit[i] = ran.nextInt(10);
        int j = 0;
        while(j < i){
            if(randDigit[j] == randDigit[i]){
                randDigit[i] = ran.nextInt(10);
                j = 0;
                continue;
            }
            j++;
        }

    }

    for(int i = 0; i < digitLength; i++){
        finalNum = finalNum + (randDigit[i] * Math.pow(10, i));
    }

    return finalNum;
} 
```

# html - 当页面刷新时，存储在 localstorage 中的变量会消失

> ID：15649237
> 
> 赞同：2
> 
> 时间：2013-03-26T23:22:27.497
> 
> 标签：html, local-storage, page-refresh

这是一个网页，您可以在其中从三个单选按钮中选择背景图片。我想将选择的一个保存在本地存储中，所以当页面刷新时，最后选择的背景图像会出现。事实并非如此，我不明白为什么，你呢？提前致谢 ：）

```
 <!DOCTYPE html>
    <html manifest="my.manifest">
    <head>
    <script src="modernizr.js"></script> 

    <script>
    function setBg() {
        myForm = document.getElementById("bgList");
        for (var i = 0; i < myForm.land.length; i++) {
            if (myForm.land[i].checked) {
                break
            }
        }
        document.body.style.backgroundImage="url('" + myForm.land[i].value + "')";

        if (Modernizr.localstorage) { 
            localStorage.setItem("background", i); 
            //alert(localStorage.getItem("background"));
        }
        else{
            alert("Can not be saved to localstorage!");
        }
    }
    </script>
    </head>

    <body>

    // Sørger for å velge et bakgrunnsbilde når siden lastes
    <script src="modernizr.js">
        window.onload = function(e){
            mittLand = 0;
            if (localStorage.getItem("background") != null) {
                mittLand = parseInt(localStorage.getItem("background")); 
                alert(mittLand); 
            }
            myForm = document.getElementById("bgList");
            myForm.land[mittLand].checked=true;
            setBg();
        }
    </script>

    <form id="bgList">
        <h1>Velg ditt favorittland</h1>
        <input type="radio" name="land" value="norge.png" onClick="setBg()">Norge</input>
        <input type="radio" name="land" value="sverige.png" onClick="setBg()">Sverige</input>
        <input type="radio" name="land" value="danmark.png" onClick="setBg()">Danmark</input>
    </form>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:50:47.927

I don't understand what part doesn't work? the alert display the selected option correctly, but since you are doing the alert before you set the background then the background is not style at the time of the alert, after you press the alert the image is set correctly.

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://modernizr.com/downloads/modernizr-latest.js"></script>

    <script>
        function setBg() {
            myForm = document.getElementById("bgList");
            for (var i = 0; i < myForm.land.length; i++) {
                if (myForm.land[i].checked) {
                    break
                }
            }
            document.body.style.backgroundImage="url('" + myForm.land[i].value + "')";

            if (Modernizr.localstorage) {
                localStorage.setItem("background", i);
                //alert(localStorage.getItem("background"));
            }
            else{
                alert("Can not be saved to localstorage!");
            }
        }
    </script>
</head>

<body>

// Sørger for å velge et bakgrunnsbilde når siden lastes
<script>
    window.onload = function(e){
        mittLand = 0;
        if (localStorage.getItem("background") != null) {
            mittLand = parseInt(localStorage.getItem("background"));
            alert(mittLand);
        }
        myForm = document.getElementById("bgList");
        myForm.land[mittLand].checked=true;
        setBg();
    }
</script>

<form id="bgList">
    <h1>Velg ditt favorittland</h1>
    <input type="radio" name="land" value="norge.png" onClick="setBg()">Norge</input>
    <input type="radio" name="land" value="sverige.png" onClick="setBg()">Sverige</input>
    <input type="radio" name="land" value="danmark.png" onClick="setBg()">Danmark</input>
</form>

</body>
</html> 
```

Tried this code it works. Updated with modernizr

# java - 如何在不执行任何操作的情况下在按钮之间单击？

> ID：15649240
> 
> 赞同：0
> 
> 时间：2013-03-26T23:22:48.523
> 
> 标签：java, android

我有两列 od 按钮，左和右。我有一个代码可以比较用户单击左键然后单击右键的时间。它比较按钮的文本。这很好用。但是，我还有另一个问题。我需要在左侧或右侧的按钮之间自由漫游，以让用户在同一侧的按钮中单击左侧或右侧多少次，而无需任何操作。现在，每当我单击左侧的两个按钮时，它都会采取行动，它会比较它们。我不能拥有那个。这是我的 onclicklistener 和 nextQuestion 方法。

如果重要的话，我会在 xml 文件中为左侧和右侧按钮设置标签：

机器人：标签=“l” 机器人：标签=“r”

```
 final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;
            private int brojacKlikova = 0;

            public void onClick(View v) {
                brojacKlikova++;
                if (brojacKlikova < 6) {

                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
                } else {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                        counter = counter + 5;
                        score.setText("Poeni: " + counter);
                    } else {
                        button.setEnabled(false);
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0xFFCC99));
                        buttonClicked.getBackground().clearColorFilter();
                    }
                    buttonClicked = null;
                }
                }else{
                brojacKlikova = 0;
                brojacVremena.cancel();
                mHandler.postDelayed(mLaunchTask,2200);
         }
            }
     }; 
```

还有下一个问题：

```
public void nextQuestion() {

        brojacIgara = brojacIgara + 1;

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{    //Pokusava da otvori db

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1")); // this tag should be the same to button that matches
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));
            labelsA.add(new MyStruct(c.getString(8), "4"));
            labelsB.add(new MyStruct(c.getString(9), "4"));
            labelsA.add(new MyStruct(c.getString(10), "5"));
            labelsB.add(new MyStruct(c.getString(11), "5"));
            labelsA.add(new MyStruct(c.getString(12), "6"));
            labelsB.add(new MyStruct(c.getString(13), "6"));
            labelsA.add(new MyStruct(c.getString(14), "7"));
            labelsB.add(new MyStruct(c.getString(15), "7"));
            labelsA.add(new MyStruct(c.getString(16), "8"));
            labelsB.add(new MyStruct(c.getString(17), "8"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            if (brojacIgara < 4){

            pitanje.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            a1.getBackground().clearColorFilter();
            a1.setEnabled(true);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            b1.getBackground().clearColorFilter();
            b1.setEnabled(true);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            a2.getBackground().clearColorFilter();
            a2.setEnabled(true);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            b2.getBackground().clearColorFilter();
            b2.setEnabled(true);
            a3.setText(labelsA.get(2).label);
            a3.setTag(labelsA.get(2).tag);
            a3.setOnClickListener(clickListener);
            a3.getBackground().clearColorFilter();
            a3.setEnabled(true);
            b3.setText(labelsB.get(2).label);
            b3.setTag(labelsB.get(2).tag);
            b3.setOnClickListener(clickListener);
            b3.getBackground().clearColorFilter();
            b3.setEnabled(true);
            a4.setText(labelsA.get(3).label);
            a4.setTag(labelsA.get(3).tag);
            a4.setOnClickListener(clickListener);
            a4.getBackground().clearColorFilter();
            a4.setEnabled(true);
            b4.setText(labelsB.get(3).label);
            b4.setTag(labelsB.get(3).tag);
            b4.setOnClickListener(clickListener);
            b4.getBackground().clearColorFilter();
            b4.setEnabled(true);
            a5.setText(labelsA.get(4).label);
            a5.setTag(labelsA.get(4).tag);
            a5.setOnClickListener(clickListener);
            a5.getBackground().clearColorFilter();
            a5.setEnabled(true);
            b5.setText(labelsB.get(4).label);
            b5.setTag(labelsB.get(4).tag);
            b5.setOnClickListener(clickListener);
            b5.getBackground().clearColorFilter();
            b5.setEnabled(true);
            a6.setText(labelsA.get(5).label);
            a6.setTag(labelsA.get(5).tag);
            a6.setOnClickListener(clickListener);
            a6.getBackground().clearColorFilter();
            a6.setEnabled(true);
            b6.setText(labelsB.get(5).label);
            b6.setTag(labelsB.get(5).tag);
            b6.setOnClickListener(clickListener);
            b6.getBackground().clearColorFilter();
            b6.setEnabled(true);
            a7.setText(labelsA.get(6).label);
            a7.setTag(labelsA.get(6).tag);
            a7.setOnClickListener(clickListener);
            a7.getBackground().clearColorFilter();
            a7.setEnabled(true);
            b7.setText(labelsB.get(6).label);
            b7.setTag(labelsB.get(6).tag);
            b7.setOnClickListener(clickListener);
            b7.getBackground().clearColorFilter();
            b7.setEnabled(true);
            a8.setText(labelsA.get(7).label);
            a8.setTag(labelsA.get(7).tag);
            a8.setOnClickListener(clickListener);
            a8.getBackground().clearColorFilter();
            a8.setEnabled(true);
            b8.setText(labelsB.get(7).label);
            b8.setTag(labelsB.get(7).tag);
            b8.setOnClickListener(clickListener);
            b8.getBackground().clearColorFilter();
            b8.setEnabled(true);
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:47:40.647

您可以为左按钮设置一个侦听器，为右按钮设置不同的侦听器。为了保持结果，您应该将该`buttonClicked`字段从侦听器转为嵌入该侦听器的活动。每个侦听器都应将背景按钮设置为您想要的颜色，并为每次单击重置其他按钮的背景颜色。

让我知道它是否是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:24:52.850

```
 a1.setText(labelsA.get(0).label);
        a1.setTag(0);
        ...
        b1.setTag(1);
        ...
        a2.setTag(2); 
```

等等。

当您检查它们是否不同时，获取标签并转换为 int 然后使用模数 (%) 除以 2 并查看它是 A 列还是 B 列。

如果您需要获取标签，请使用您刚刚获得的 int / 2 作为索引返回标签数组。

# css - CSS中的响应式字体大小

> ID：15649244
> 
> 赞同：400
> 
> 时间：2013-03-26T23:23:13.673
> 
> 标签：css, responsive-design, zurb-foundation, font-size

我使用**Zurb Foundation 3**网格创建了一个站点。每个页面都有一个大的`h1`：

```
body {
  font-size: 100%
}

/* Headers */

h1 {
  font-size: 6.2em;
  font-weight: 500;
}
```

```
<div class="row">
  <div class="twelve columns text-center">
    <h1> LARGE HEADER TAGLINE </h1>
  </div>
  <!-- End Tagline -->
</div>
<!-- End Row -->
```

当我将浏览器调整为移动大小时，大字体不会调整，并导致浏览器包含水平滚动以适应大文本。

我注意到在**Zurb Foundation 3** Typography[示例页面上](http://foundation.zurb.com/sites/docs/v/3.2.5/typography.php)，标题会在压缩和扩展时适应浏览器。

我错过了一些非常明显的东西吗？我如何实现这一目标？

* * *

## 回答 #1

> 赞同：658
> 
> 时间：2013-05-06T01:01:49.953

您可以使用视口值而不是 ems、pxs 或 pts：

> 1vw = 视口宽度的 1%
> 
> 1vh = 视口高度的 1%
> 
> 1vmin = 1vw 或 1vh，以较小者为准
> 
> 1vmax = 1vw 或 1vh，以较大者为准

```
h1 {
  font-size: 5.9vw;
}
h2 {
  font-size: 3.0vh;
}
p {
  font-size: 2vmin;
} 
```

来自 CSS-Tricks：*[视口大小的排版](http://css-tricks.com/viewport-sized-typography/)*

* * *

## 回答 #2

> 赞同：326
> 
> 时间：2013-03-26T23:26:17.960

调整浏览器`font-size`窗口大小时不会这样响应。相反，它们会响应浏览器缩放/字体大小设置，例如，如果您在浏览器中同时按下键盘上的`Ctrl`和。`+`

**媒体查询**

您将不得不考虑使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)以在某些间隔开始破坏您的设计并创建滚动条时减小字体大小。

例如，尝试在底部的 CSS 中添加它，更改 320 像素的宽度，以适应您的设计开始中断的位置：

```
@media only screen and (max-width: 320px) {

   body { 
      font-size: 2em; 
   }

} 
```

**视口百分比长度**

您还可以使用[视口百分比长度](https://www.w3.org/TR/css3-values/#viewport-relative-lengths)，例如`vw`、和。官方的 W3C 文档指出：`vh``vmin``vmax`

> 视口百分比长度与初始包含块的大小有关。当初始包含块的高度或宽度发生变化时，它们会相应地缩放。

同样，从同一个 W3C 文档中，每个单独的单元都可以定义如下：

> vw unit - 等于初始包含块宽度的 1%。
> 
> vh 单位 - 等于初始包含块高度的 1%。
> 
> vmin 单位 - 等于 vw 或 vh 中的较小者。
> 
> vmax 单位 - 等于 vw 或 vh 中的较大者。

它们的使用方式与任何其他 CSS 值完全相同：

```
.text {
  font-size: 3vw;
}

.other-text {
  font-size: 5vh;
} 
```

[从这里](https://caniuse.com/#search=vw)可以看出，兼容性相对较好。但是，某些版本的 Internet Explorer 和 Edge 不支持 vmax。此外，iOS 6 和 7 的 vh 单元存在问题，该问题已在 iOS 8 中修复。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2015-09-27T06:40:20.980

我一直在尝试解决这个问题的方法，并相信我找到了解决方案：

如果您可以为 Internet Explorer 9（及更高版本）和所有其他支持 CSS calc()、rem 单位和 vmin 单位的现代浏览器编写应用程序。您可以使用它来实现无需媒体查询的可缩放文本：

```
body {
  font-size: calc(0.75em + 1vmin);
} 
```

这是在行动：[http ://codepen.io/csuwldcat/pen/qOqVNO](http://codepen.io/csuwldcat/pen/qOqVNO)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-03-26T23:26:45.947

使用 CSS`media`说明符（这是他们 [zurb] 使用的）进行响应式样式：

```
@media only screen and (max-width: 767px) {

   h1 {
      font-size: 3em;
   }

   h2 {
      font-size: 2em;
   }

} 
```

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2020-07-09T06:09:24.813

**我可以说我的方法是解决您问题的最佳方法**

```
h1{
  font-size : clamp(2rem, 10vw, 5rem);
} 
```

这里`clamp`有 3 个论点。

*   第一个是允许的最小字体大小。

*   第三个是允许的最大字体大小。

*   第二个参数是您希望始终拥有的字体大小。它的单位必须是相对的（vw, vh, ch）而不是绝对的（即不是px, mm, pt）。相对单位将使它改变它的大小 wrt 改变屏幕尺寸。

> **考虑一个例子**：考虑有一个你想要动态调整大小的大字体图标（响应式图标）

```
fa-random-icon{
   font-size: clamp( 15rem, 80vw, 80vh)   
} 
```

*   这里 80vw 是首选的字体大小。
*   15 rem 是最小字体大小。
*   80vh 是最大字体大小。

IE

*   如果在特定的移动屏幕尺寸中，如果 80vw < 15rem，则字体大小为 15rem。

*   如果屏幕太宽，则如果 80vw > 80vh，则字体大小为 80vh。

> 人们建议的上述方法总是有一些不确定的结果......就像我们`vw`只使用时，字体大小有时可能太大或太小（无界）。

> `media`可以使用查询，但您必须将字体大小与至少 3 个媒体查询绑定

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2013-03-27T20:22:12.830

如果您不介意使用 jQuery 解决方案，您可以尝试 TextFill 插件

> jQuery TextFill 调整文本大小以适应容器并使字体尽可能大。

[https://github.com/jquery-textfill/jquery-textfill](https://github.com/jquery-textfill/jquery-textfill)

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2014-02-24T07:47:32.497

有几种方法可以实现这一点。

使用**媒体查询**，但它需要几个断点的字体大小：

```
body
{
    font-size: 22px;
}

h1
{
    font-size: 44px;
}

@media (min-width: 768)
{
    body
    {
        font-size: 17px;
    }
    h1
    {
        font-size: 24px;
    }
} 
```

使用**% 或 em**中的尺寸。只需更改基本字体大小，一切都会改变。与前一个不同，您可以每次只更改正文字体而不是 h1，或者让基本字体大小成为设备的默认值，其余全部在`em`：

1.  **“Ems”（em）**：“em”是一个可扩展的单位。一个 em 等于当前的 font-size，例如，如果文档的 font-size 是 12 pt，则 1 em 等于 12 pt。Ems 本质上是可扩展的，所以 2 em 等于 24 pt，0.5 em 等于 6 pt，等等。
2.  **百分比 (%)**：百分比单位很像“em”单位，除了一些基本差异。首先，当前字体大小等于 100%（即 12 pt = 100%）。使用百分比单位时，您的文本仍可完全适应移动设备和可访问性。

见[kyleschaeffer.com/....](http://kyleschaeffer.com/development/css-font-size-em-vs-px-vs-pt-vs/)

**CSS 3**支持与视口相关的新尺寸。但这在 Android 上不起作用：

1.  3.2vw = 视口宽度的 3.2%
2.  3.2vh = 视口高度的 3.2%
3.  3.2vmin = 3.2vw 或 3.2vh 中的较小者
4.  3.2vmax = 3.2vw 或 3.2vh 中的较大者

    ```
    body
    {
        font-size: 3.2vw;
    } 
    ```

请参阅[CSS-Tricks ...](http://css-tricks.com/viewport-sized-typography/)并查看[Can I Use...](http://caniuse.com/viewport-units)

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2014-01-24T11:23:26.573

还有另一种响应字体大小的方法 - 使用 rem 单位。

```
html {
    /* Base font size */
    font-size: 16px;
}

h1 {
    font-size: 1.5rem;
}

h2 {
    font-size: 1.2rem;
} 
```

稍后在媒体查询中，您可以通过更改基本字体大小来调整所有字体大小：

```
@media screen and (max-width: 767px) {
    html {
      /* Reducing base font size will reduce all rem sizes */
      font-size: 13px;
    }

    /* You can reduce font sizes manually as well */
    h1 {
        font-size: 1.2rem;
    }
    h2 {
        font-size: 1.0rem;
    }
} 
```

要在 Internet Explorer 7 和 Internet Explorer 8 中使用此功能，您必须添加一个带有 px 单位的后备：

```
h1 {
    font-size: 18px;
    font-size: 1.125rem;
} 
```

如果您正在使用[Less](https://en.wikipedia.org/wiki/Less_%28stylesheet_language%29)进行开发，您可以创建一个可以为您计算的 mixin。

Rem 单位支持 - [http://caniuse.com/#feat=rem](http://caniuse.com/#feat=rem)

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2017-10-05T13:26:17.847

“大众”解决方案在进入非常小的屏幕时会出现问题。您可以设置基本大小并使用 calc() 从那里向上：

```
font-size: calc(16px + 0.4vw); 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2014-11-06T09:13:59.603

这在基础 5 中部分实施。

在文件 _type.scss 中，它们有两组头变量：

```
// We use these to control header font sizes
// for medium screens and above

$h1-font-size: rem-calc(44) !default;
$h2-font-size: rem-calc(37) !default;
$h3-font-size: rem-calc(27) !default;
$h4-font-size: rem-calc(23) !default;
$h5-font-size: rem-calc(18) !default;
$h6-font-size: 1rem !default;

// We use these to control header size reduction on small screens
$h1-font-reduction: rem-calc(10) !default;
$h2-font-reduction: rem-calc(10) !default;
$h3-font-reduction: rem-calc(5) !default;
$h4-font-reduction: rem-calc(5) !default;
$h5-font-reduction: 0 !default;
$h6-font-reduction: 0 !default; 
```

对于中型，它们根据第一组变量生成大小：

```
@media #{$medium-up} {
    h1,h2,h3,h4,h5,h6 { line-height: $header-line-height; }
    h1 { font-size: $h1-font-size; }
    h2 { font-size: $h2-font-size; }
    h3 { font-size: $h3-font-size; }
    h4 { font-size: $h4-font-size; }
    h5 { font-size: $h5-font-size; }
    h6 { font-size: $h6-font-size; }
} 
```

对于默认的小屏幕，他们使用第二组变量来生成 CSS：

```
h1 { font-size: $h1-font-size - $h1-font-reduction; }
h2 { font-size: $h2-font-size - $h2-font-reduction; }
h3 { font-size: $h3-font-size - $h3-font-reduction; }
h4 { font-size: $h4-font-size - $h4-font-reduction; }
h5 { font-size: $h5-font-size - $h5-font-reduction; }
h6 { font-size: $h6-font-size - $h6-font-reduction; } 
```

您可以使用这些变量并在您的自定义 scss 文件中覆盖以设置相应屏幕尺寸的字体大小。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2019-07-20T04:56:49.710

我从[CSS-Tricks](https://css-tricks.com/books/volume-i/scale-typography-screen-size/)看到了一篇很棒的文章。它工作得很好：

```
body {
    font-size: calc([minimum size] + ([maximum size] - [minimum size]) * ((100vw -
    [minimum viewport width]) / ([maximum viewport width] - [minimum viewport width])));
} 
```

例如：

```
body {
    font-size: calc(14px + (26 - 14) * ((100vw - 300px) / (1600 - 300)));
} 
```

我们可以将相同的方程式应用于`line-height`属性，使其也随浏览器而变化。

```
body {
    font-size: calc(14px + (26 - 14) * ((100vw - 300px) / (1600 - 300)));
    line-height: calc(1.3em + (1.5 - 1.2) * ((100vw - 300px)/(1600 - 300)));
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-01-21T11:22:27.777

响应式字体大小也可以使用这个名为**FlowType**的 JavaScript 代码来完成：

*   [http://simplefocus.com/flowtype/](http://simplefocus.com/flowtype/)
*   [https://github.com/simplefocus/FlowType.JS](https://github.com/simplefocus/FlowType.JS)

**FlowType - 最好的响应式 Web 排版：基于元素宽度的字体大小。**

或者这个名为**FitText 的**JavaScript 代码：

*   [http://fittextjs.com/](http://fittextjs.com/)
*   [https://github.com/davatron5000/FitText.js](https://github.com/davatron5000/FitText.js)

**FitText - 使字体大小灵活。在您的响应式设计中使用此插件可根据比例调整标题大小。**

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2016-11-26T13:43:56.783

如果您使用的是构建工具，请尝试使用 Rucksack。

否则，您可以使用 CSS 变量（自定义属性）轻松控制最小和最大字体大小，如下所示（[演示](http://codepen.io/dannievinther/pen/GNExxb)）：

```
* {
  /* Calculation */
  --diff: calc(var(--max-size) - var(--min-size));
  --responsive: calc((var(--min-size) * 1px) + var(--diff) * ((100vw - 420px) / (1200 - 420))); /* Ranges from 421px to 1199px */
}

h1 {
  --max-size: 50;
  --min-size: 25;
  font-size: var(--responsive);
}

h2 {
  --max-size: 40;
  --min-size: 20;
  font-size: var(--responsive);
} 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2019-01-27T19:47:50.087

我刚刚提出了一个想法，您只需为每个元素定义一次字体大小，但它仍然受到媒体查询的影响。

首先，我将变量“--text-scale-unit”设置为“1vh”或“1vw”，具体取决于使用媒体查询的视口。

然后我使用 calc() 变量和字体大小的乘数：

```
/* Define a variable based on the orientation. */
/* The value can be customized to fit your needs. */
@media (orientation: landscape) {
  :root{
    --text-scale-unit: 1vh;
  }
}
@media (orientation: portrait) {
  :root {
    --text-scale-unit: 1vw;
  }
}

/* Use a variable with calc and multiplication. */
.large {
  font-size: calc(var(--text-scale-unit) * 20);
}
.middle {
  font-size: calc(var(--text-scale-unit) * 10);
}
.small {
  font-size: calc(var(--text-scale-unit) * 5);
}
.extra-small {
  font-size: calc(var(--text-scale-unit) * 2);
}
```

```
<span class="middle">
  Responsive
</span>
<span class="large">
  text
</span>
<span class="small">
  with one
</span>
<span class="extra-small">
  font-size tag.
</span>
```

在我的示例中，我只使用了视口的方向，但该原理应该适用于任何媒体查询。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2013-11-24T07:32:00.587

jQuery 的“FitText”可能是最好的响应式标题解决方案。在 GitHub 上查看： [https ://github.com/davatron5000/FitText.js](https://github.com/davatron5000/FitText.js)

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-05-13T05:20:20.737

尝试在您的样式表中包含此内容：

```
html {
  font-size: min(max(16px, 4vw), 22px);
} 
```

更多信息请访问[https://css-tricks.com/simplified-fluid-typography/](https://css-tricks.com/simplified-fluid-typography/)

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-10-24T07:04:22.193

**我使用这些 CSS 类，它们使我的文本在任何屏幕尺寸上都很流畅：**

```
.h1-fluid {
    font-size: calc(1rem + 3vw);
    line-height: calc(1.4rem + 4.8vw);
}

.h2-fluid {
    font-size: calc(1rem + 2vw);
    line-height: calc(1.4rem + 2.4vw);
}

.h3-fluid {
    font-size: calc(1rem + 1vw);
    line-height: calc(1.4rem + 1.2vw);
}

.p-fluid {
    font-size: calc(1rem + 0.5vw);
    line-height: calc(1.4rem + 0.6vw);
} 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2020-04-02T17:23:07.757

我们可以使用 css 中的 calc()

```
p{
font-size: calc(48px + (56 - 48) * ((100vw - 300px) / (1600 - 300))) !important;
} 
```

数学公式为 calc(minsize + (maxsize - minsize) * (100vm - minviewportwidth) / (maxwidthviewoport - minviewportwidth)))

[密码笔](https://codepen.io/nicojl20/pen/OJVGazX)

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-02-27T02:15:40.267

在实际的原始[Sass](http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29)（不是 scss）中，您可以使用以下 mixins 自动设置段落和所有标题`font-size`。

我喜欢它，因为它更紧凑。而且打字速度更快。除此之外，它提供相同的功能。无论如何，如果你仍然想坚持新的语法 - scss，那么请随意将我的 Sass 内容转换为 scss： [[CONVERT SASS TO SCSS HERE]](http://www.sasstoscss.com/)

下面我给你四个 Sass mixin。您将不得不根据您的需要调整它们的设置。

```
=font-h1p-style-generator-manual() // You don’t need to use this one. Those are only styles to make it pretty.
=media-query-base-font-size-change-generator-manual() // This mixin sets the base body size that will be used by the h1-h6 tags to recalculate their size in a media query.
=h1p-font-size-generator-auto($h1-fs: 3em, $h1-step-down: 0.3, $body-min-font-size: 1.2em, $p-same-as-hx: 6) // Here you will set the size of h1 and size jumps between h tags
=config-and-run-font-generator() // This one only calls the other ones 
```

完成设置后，只需调用一个 mixin - 即：**+config-and-run-font-generator()**。有关更多信息，请参见下面的代码和注释。

我想您可以像对标头标签一样为媒体查询自动执行此操作，但是我们都使用不同的媒体查询，因此并不适合所有人。我使用移动优先的设计方法，所以我会这样做。随意复制和使用此代码。

将这些混音复制并粘贴到您的文件中：

```
=font-h1p-style-generator-manual()
  body
    font-family: "Source Sans Pro", "Helvetica Neue", Helvetica, Arial, sans-serif // google fonts
    font-size: 100%
    line-height: 1.3em
  %headers
    line-height: 1em
    font-weight: 700
  p
    line-height: 1.3em
    font-weight: 300
  @for $i from 1 through 6
    h#{$i}
      @extend %headers

=media-query-base-font-size-change-generator-manual()
  body
    font-size: 1.2em
  @media screen and (min-width: 680px)
    body
      font-size: 1.4em
  @media screen and (min-width: 1224px)
    body
      font-size: 1.6em
  @media screen and (min-width: 1400px)
    body
      font-size: 1.8em

=h1p-font-size-generator-auto($h1-fs: 3em, $h1-step-down: 0.3, $body-min-font-size: 1.2em, $p-same-as-hx: 6)
  $h1-fs: $h1-fs // Set first header element to this size
  $h1-step-down: $h1-step-down // Decrement each time by 0.3
  $p-same-as-hx: $p-same-as-hx // Set p font-sieze same as h(6)
  $h1-fs: $h1-fs + $h1-step-down // Looping correction
  @for $i from 1 through 6
    h#{$i}
      font-size: $h1-fs - ($h1-step-down * $i)
    @if $i == $p-same-as-hx
      p
        font-size: $h1-fs - ($h1-step-down * $i)

// RUN ONLY THIS MIXIN. IT WILL TRIGGER THE REST
=config-and-run-font-generator()
  +font-h1p-style-generator-manual() // Just a place holder for our font style
  +media-query-base-font-size-change-generator-manual() // Just a placeholder for our media query font size
  +h1p-font-size-generator-auto($h1-fs: 2em, $h1-step-down: 0.2, $p-same-as-hx: 5) // Set all parameters here 
```

根据您的需要配置所有混合 - 玩它！:) 然后在你的实际 Sass 代码的顶部调用它：

```
+config-and-run-font-generator() 
```

这将生成此输出。您可以自定义参数以生成不同的结果集。然而，因为我们都使用不同的媒体查询，一些 mixin 必须手动编辑（样式和媒体）。

生成的 CSS：

```
body {
  font-family: "Source Sans Pro", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 100%;
  line-height: 1.3em;
  word-wrap: break-word; }

h1, h2, h3, h4, h5, h6 {
  line-height: 1em;
  font-weight: 700; }

p {
  line-height: 1.3em;
  font-weight: 300; }

body {
  font-size: 1.2em; }

@media screen and (min-width: 680px) {
  body {
    font-size: 1.4em; } }
@media screen and (min-width: 1224px) {
  body {
    font-size: 1.6em; } }
@media screen and (min-width: 1400px) {
  body {
    font-size: 1.8em; } }
h1 {
  font-size: 2em; }

h2 {
  font-size: 1.8em; }

h3 {
  font-size: 1.6em; }

h4 {
  font-size: 1.4em; }

h5 {
  font-size: 1.2em; }

p {
  font-size: 1.2em; }

h6 {
  font-size: 1em;

} 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2014-03-05T10:35:31.027

与许多框架一样，一旦你“脱离网格”并覆盖框架的默认 CSS，事情就会开始左右中断。框架本质上是刚性的。如果您要使用 Zurb 的默认 H1 样式及其默认网格类，那么网页应该在移动设备上正确显示（即响应式）。

但是，您似乎需要非常大的 6.2em 标题，这意味着文本必须缩小才能适合纵向模式下的移动显示器。您最好的选择是使用响应式文本 jQuery 插件，例如[FlowType](http://simplefocus.com/flowtype/)和[FitText](http://fittextjs.com/)。如果你想要一些轻量级的东西，那么你可以查看我的 Scalable Text jQuery 插件：

[http://thdoan.github.io/scalable-text/](http://thdoan.github.io/scalable-text/)

示例用法：

```
<script>
$(document).ready(function() {
  $('.row .twelve h1').scaleText();
}
</script> 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2019-01-14T23:26:20.133

解决文本在桌面和移动/平板电脑上看起来不错的问题的一种方法是将文本大小固定为物理单位，如物理厘米或英寸，这不依赖于屏幕 PPI（每英寸点数）。

基于[这个答案](https://stackoverflow.com/questions/279749/detecting-the-system-dpi-ppi-from-js-css)，下面是我在 HTML 文档末尾用于响应式字体大小的代码：

```
<div id='testdiv' style='height: 1in; left: -100%; position: absolute; top: -100%; width: 1in;'></div>
<script type='text/javascript'>
  var devicePixelRatio = window.devicePixelRatio || 1;
  dpi_x = document.getElementById('testdiv').offsetWidth * devicePixelRatio;
  dpi_y = document.getElementById('testdiv').offsetHeight * devicePixelRatio;

  function setFontSizeForClass(className, fontSize) {
      var elms = document.getElementsByClassName(className);
      for(var i=0; i<elms.length; i++) {
          elms[i].style.fontSize = String(fontSize * dpi_y / 96) + "px";
      }
  }

  setFontSizeForClass('h1-font-size', 30);
  setFontSizeForClass('action-font-size', 20);
  setFontSizeForClass('guideline-font-size', 25);
  // etc for your different classes
</script> 
```

在上面的代码中，只要浏览器/操作系统针对其屏幕的 PPI 正确配置，就可以为不同类的项目分配物理单位的字体大小。

物理单位字体总是不会太大也不会太小，只要到屏幕的距离是正常的（阅读距离）。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-04-27T20:54:27.953

```
 h1 { font-size: 2.25em; } 
 h2 { font-size: 1.875em; }
 h3 { font-size: 1.5em; }
 h4 { font-size: 1.125em; }
 h5 { font-size: 0.875em; }
 h6 { font-size: 0.75em; } 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-04-02T04:16:04.313

使用这个等式：

```
calc(42px + (60 - 42) * (100vw - 768px) / (1440 - 768)); 
```

对于大于或小于 1440 和 768 的任何值，您可以给它一个静态值，或者应用相同的方法。

vw 解决方案的缺点是您无法设置缩放比例，例如屏幕分辨率为 1440 的 5vw 最终可能是 60px 字体大小，您的想法字体大小，但是当您将窗口宽度缩小到 768 时，它可能会结束12px，不是你想要的最小值。

使用这种方法，您可以设置上边界和下边界，字体将在两者之间自行缩放。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2019-01-24T13:40:51.277

文本大小可以设置一个`vw`单位，即“视口宽度”。这样，文本大小将跟随浏览器窗口的大小：

[https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_responsive_text](https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_responsive_text)

对于我的个人项目，我使用了 vw 和 @meida。它完美地工作。

```
.mText {
    font-size: 6vw;
}

@media only screen and (max-width: 1024px) {
    .mText {
        font-size: 10vw;
    }
}

.sText {
    font-size: 4vw;
}

@media only screen and (max-width: 1024px) {
    .sText {
        font-size: 7vw;
    }
} 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2015-08-18T21:50:26.667

如果在 vw （视口宽度）中定义字体大小，则可以使字体大小响应。但是，并非所有浏览器都支持它。解决方案是使用 JavaScript 根据浏览器宽度更改基本字体大小，并将所有字体大小设置为 %。

这是一篇描述如何制作响应式字体大小的文章：[http ://wpsalt.com/responsive-font-size-in-wordpress-theme/](http://wpsalt.com/responsive-font-size-in-wordpress-theme/)

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2018-12-13T15:57:06.177

我找到了这个解决方案，它对我来说效果很好：

```
/* Fluid font size:
minimum font size at min. device width 300px = 14
maximum font size at max. device width 1600px = 26
*/

body {
    font-size: calc(14px + (26 - 14) * ((100vw - 300px) / (1600 - 300)));
} 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2017-12-13T02:09:22.103

您可以通过以下方式实现此目的：

1.  使用 rem 例如 2.3 rem
2.  使用 em 例如 2.3em
3.  使用 % 例如 2.3% 此外，您可以使用：vh、vw、vmax 和 vmin。

这些单位将根据屏幕的宽度和高度自动调整大小。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-08-14T00:37:21.587

很多答案，但我没有看到有人提到结合媒体查询的 min 或 max 函数

CSS中有一个max()函数，所以我们上面的例子变成了一个单行：

```
font-size: max(30vw, 30px); 
```

或者用最小值和最大值加倍：

```
font-size: min(max(16px, 4vw), 22px); 
```

这与以下内容相同：

```
font-size: clamp(16px, 4vw, 22px); 
```

然后不要忘记将其包装在媒体查询中，并以您喜欢的方式应用于您的 h1、h2、h3、h4、h5、h6。

```
 @media (max-width: 600px) {
      h1 {
           font-size: clamp(16px, 4vw, 22px);
         }
    } 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2016-08-08T16:18:09.727

经过许多结论后，我最终得出了这种组合：

```
@media only screen and (max-width: 730px) {

    h2 {
        font-size: 4.3vw;
    }
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-09-09T04:46:54.023

我认为这可以完成以下工作：

**3.3vw 表示视口宽度的 3.3%，**

随着屏幕尺寸的变化，这将始终响应。

```
h1{
  font-size: 3.3vw;
} 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-05-10T14:23:44.863

通过使用 CSS，字体大小会根据屏幕大小而变化您可以看到这个 H1 标签是响应式的。（如我错了请纠正我）

```
@media only screen and (max-width: 1000px) {
     h1 {
         font-size:5em;
    }
}
 @media only screen and (max-width: 500px) {
     h1 {
         font-size: 3em;
    }
}
 @media only screen and (max-width: 300px) {
     h1 {
         font-size: 2em;
    }
}
 @media only screen and (max-width: 100px) {
     h1 {
         font-size: 1em;
    }
} 
```

```
<h1>Resize the browser!</h1>
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-11-14T23:55:29.920

设置您的基本字体大小并使用钳制功能对其进行钳制。

使用clamp() 设置字体大小，如在这些示例中，允许您设置一个随视口大小而增长的字体大小，但不会低于最小字体大小

[https://developer.mozilla.org/en-US/docs/Web/CSS/clamp()][Clamp Method MDN Docs]

这是一个例子。

```
h1 {
  font-size: clamp(1.5em, 4vw, 2.5em);
}

h2 {
font-size: clamp(1.2em, 4vw, 2.4em);
}

p {
font-size: clamp(0.6em, 4vw, 1.2em);
} 
```

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2015-01-31T13:35:20.803

恐怕在字体大小调整方面没有任何简单的解决方案。您可以使用媒体查询更改字体大小，但从技术上讲，它不会平滑地调整大小。例如，如果您使用：

```
@media only screen and (max-width: 320px){font-size: 3em;} 
```

`font-size`对于 300 像素和 200 像素宽度，您将是 3em。但是你需要降低`font-size`200px 的宽度才能做出完美的响应。

那么，真正的解决方案是什么？只有一种方法。您必须创建一个包含文本的 PNG 图像（具有透明背景）。之后，您可以轻松地使图像具有响应性（例如：宽度：35%；高度：28px）。通过这种方式，您的文本将完全响应所有设备。

* * *

## 回答 #34

> 赞同：-2
> 
> 时间：2015-01-29T16:35:50.460

这是对我有用的东西。我只在 iPhone 上测试过。

无论您有`h1`,`h2`还是`p`标签，都将其放在您的文本周围：

```
<h1><font size="5">The Text you want to make responsive</font></h1> 
```

这会在桌面上呈现 22pt 的文本，并且在 iPhone 上仍然可以阅读。

```
<font size="5"></font> 
```

# list - 在 Firebase 中访问子对象时遇到问题

> ID：15649245
> 
> 赞同：0
> 
> 时间：2013-03-26T23:23:14.300
> 
> 标签：list, object, firebase

我正在尝试在 Firebase 中提取已连接用户的列表，以简单地填充选择下拉列表。我的问题是我似乎无法正确访问子对象。

使用 connectedUsers.userName （见下面的代码）有效，但仅适用于我自己的用户数据，它不会提取任何其他内容。

在我看来，将“myUserRef.on”更改为“userListRef.on”并使用“snapshot.child('userName').val()”之类的东西应该可以工作，但它只是抛出未定义。“connectedUsers.child.userName”也是如此，我确定我在这里遗漏了一些简单的东西。

在下面的代码中，通过更改为“userListRef.on('child_added', function(snapshot)”，我可以成功地从 Firebase 添加和删除用户数据，并将所有对象记录到控制台，当我向下钻取时，所有数据看起来都很好对象。我只需要一种访问该数据的方法，这样我就可以将所有连接的用户放入一个选择下拉列表中，或者在他们断开连接时将它们从其中删除。

```
var userListRef = new Firebase('https://myaccount.firebaseIO.com/users/');
var myUserRef = userListRef.push();

// ADD USER DATA TO FIREBASE
var userId = $('#myIdInput').val();
var userName = $('#nameInput').val();
myUserRef.push({userId: userId, userName: userName});

// READ USER OBJECTS AND FIRE ADDUSER FUNCTION
myUserRef.on('child_added', function(snapshot) {
var connectedUsers = snapshot.val();
console.log(addUser);
//addUser(connectedUsers.userId, connectedUsers.userName);
});

// ADD USER TO SELECT DROPDOWN
function addUser(userId, userName) {
var modSelect = $('#tsmmodsendto');
modSelect.append($('<option></option>').attr("value", userId).text(userName));
}

// READ USER OBJECTS AND FIRE REMOVEUSER FUNCTION
myUserRef.on('child_removed', function(snapshot) {
var connectedUsers = snapshot.val();
console.log(removeUser);
//removeUser(connectedUsers.userId, connectedUsers.userName);
});

// REMOVE USER TO SELECT DROPDOWN
function removeUser(userId, userName) {
var modSelect = $('#tsmmodsendto');
modSelect.append($('<option></option>').removeAttr("value", userId).text(userName));
}

// ON DISCONNECT REMOVE USER DATA FROM FIREBASE
myUserRef.onDisconnect().remove(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:30:35.097

您编写的代码将无法正常工作，因为每个用户都在写：

/users/PUSH_ID/PUSH_ID

然后在听：

/用户/PUSH_ID

因此，每个客户端都将只收听自己的数据，而永远不会看到其他任何人的数据。为了查看其他人的数据，您需要都在听/写到相同的路径。

在您的问题中，您提到如果您更改为在 /users 上收听，您会看到“未定义”。您能否简化您的代码并使用这种方法，也许我可以提供一个更有帮助的答案？

或者，如果我没有正确理解，请简化并澄清您的问题。

# unix - 如何跨进程使用相同的密钥以使用共享内存相互通信

> ID：15649256
> 
> 赞同：0
> 
> 时间：2013-03-26T23:24:41.477
> 
> 标签：unix, ipc, shared-memory, systems-programming

我了解到有必要在两个进程中使用相同的密钥来使用共享内存进行通信。在我看到的示例代码中，密钥在两个程序（发送方、接收方）中都是硬编码的。我的疑问是两个意外进程如何实时使用相同的密钥。我读过 ftok() 函数，但它要求文件路径作为参数。但是如何在下面的场景中实时

假设当用户从 firefox 发出 print to file 命令时，一些其他程序（如 ghostscript）将制作一个 ps/pdf 文件（假设它使用共享内存）。这里firefox和ghostscript将如何使用共享内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:58:08.620

两个彼此不认识的进程需要使用定义的（和共享的）协议才能一起使用共享内存。并且该协议需要包含有关如何访问共享内存的信息（例如，用于 shmget 调用的整数值）。基本上，它需要定义一个“硬编码”标识符或一些发现它的方法。

如果没有某种协议定义此信息（包括内存中的内容），一个进程甚至无法推断出另一个进程设置的内存位置中的内容。

# python - Django 通配符查询

> ID：15649257
> 
> 赞同：1
> 
> 时间：2013-03-26T23:24:49.687
> 
> 标签：python, mysql, django

我的应用程序中有以下逻辑：

```
provider = request.POST.get('provider', '*')
order_items = OrderItem.objects.filter(provider=provider) 
```

是否有我可以在 django 中使用的通配符，这样如果在请求中找不到提供者`POST`，它将返回所有对象？

换句话说，有没有办法做到这一点？

```
if request.POST.get('provider'):
    order_items = OrderItem.objects.filter(provider=provider)
else:
    order_items = OrderItem.objects.all() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:30:04.417

没有直接的通配符参数，因此您所拥有的完全可以接受。代码可读性也很重要，因此即使您最终可能会获得更多代码，它也可能更易于维护。

您可以像这样链接查询集：

```
provider = request.POST.get('provider')

order_items = OrderItem.objects.all()
if provider is not None:
    order_items = order_items.filter(provider=provider) 
```

`kwargs`或者你可以为这样的调用设置一个空字典`filter()`，但我认为它的可读性较差：

```
provider = request.POST.get('provider')
kwargs = {}
if provider is not None:
    kwargs['provider'] = provider

order_items = OrderItem.objects.filter(**kwargs) 
```

这可以变成这样的函数调用：

```
def all_or_filter_args(request, item):
    """Return dictionary of arguments for filter() if item is specified in request."""
    value = request.get(item)
    if value is None:
        return {}
    return { item : value } 
```

然后是用于查询的以下单行：

```
order_items = OrderItem.objects.filter(**all_or_filter_args(request, 'provider')) 
```

但同样，我觉得这不像你给出的例子那样可读。

另一种方法是编写一个[自定义管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers)，它允许您使用自己的函数进行过滤。使用自定义管理器，您可以实现代码以允许这样的查询，您可以在其中提供一个函数`all_or_filtered`来应用正确的过滤：

```
order_items = OrderItem.objects.all_or_filtered('provider', request.POST.get('provider')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:53:41.200

这个怎么样...

```
parameter = request.POST.get('provider', '%%')
order_items = OrderItem.objects.raw("SELECT * FROM %s WHERE provider LIKE '%s'" %   (OrderItem._meta.db_table, parameter)) 
```

# ios - 哪个更好，setEnabled 或 setUserInteractionEnabled？

> ID：15649264
> 
> 赞同：15
> 
> 时间：2013-03-26T23:25:35.457
> 
> 标签：ios, objective-c, uibutton, uicontrol, setuserinteractionenabled

我想`UIButton`禁用用户触摸。两者都`setEnabled`可以`setUserInteractionEnabled`做到这一点。哪个更好？它们有何不同？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T23:40:33.917

`enabled`是 的一个属性`UIControl`，它是 的超类`UIButton`。 `userInteractionEnabled`是`UIView`（它是 的超类`UIControl`）的一个属性。 `enabled`对对象的视觉状态有影响（默认为灰色），并且通常是禁用控件的首选方法 - 指示行为的视觉反馈是一件好事。

除此之外没有太多实际的结果。与控件交互的代码更有可能检查按钮是否已启用，而不是它们的 userInteractionEnabled 属性是否已设置。因此使用`enabled`更传统。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-26T23:36:25.640

如果某些东西被禁用，它会变灰。

如果交互被禁用，它看起来很正常，但你不能与之交互。

# ios - 将自动释放对象分配给保留属性会增加其保留计数吗？

> ID：15649265
> 
> 赞同：2
> 
> 时间：2013-03-26T23:25:38.957
> 
> 标签：ios, objective-c, properties, exc-bad-access, retain

我原以为'self.data ='会保留自动释放的NSMutableArray对象和它包含的NSMutableDictionary对象，但最终当表的cellForRowAtIndexPath方法尝试访问self.data中的NSDictionaries时，我得到了EXC_BAD_ACCESS。

```
@property (strong, nonatomic) NSMutableArray *data;

- (void) updateReceivedData:(NSData *) jsonData
{
    NSMutableArray *fetchedData = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
        self.data = [self convertDates:fetchedData withFormat:kMySQLDateTimeFormat];
        [self.tableView reloadData];
    }
}

- (NSMutableArray*) convertDates:(NSMutableArray *) array withFormat:(NSString *) format
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:format];
    NSMutableArray *newArray = [NSMutableArray arrayWithArray:array];
    for (NSMutableDictionary *dict in newArray)
    {
        for (id key in dict.allKeys)
        {
            if ([[dict objectForKey:key] isKindOfClass:[NSString class]])
            {
                NSString *value = [dict objectForKey:key];
                NSDate *date = [dateFormatter dateFromString:value];
                if (date) [dict setObject:date forKey:key];
            }
        }
    }
    [dateFormatter release];
    return newArray;
} 
```

BAD_ACCESS HERE 在 NSLogs 之间抛出。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (cell == nil) {
       NSLog (@"Cell was nil");
       cell = [[[CustomCell alloc] init] autorelease];
   }

    NSDictionary *dict = [[NSDictionary alloc] init];
    if (_isFiltered){
        dict = [self.filteredData objectAtIndex:indexPath.row];
    } else {
        dict = [self.data objectAtIndex:indexPath.row];
    }
    NSLog (@"Filling Label 1");
    cell.IDLabel.text = [[dict objectForKey:@"Id"] stringValue];
    NSLog (@"Filling Label 2");
    cell.firstNameLabel.text = [dict objectForKey:@"firstName"];
    [dict release];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T23:33:51.530

打开僵尸，看看它是否发现了问题（EXC_BAD_ACCESS 不一定意味着过度释放的对象，但它可能）。

对象的保留计数的绝对值发生了什么是无关紧要的。

但是，一个`strong`属性意味着该对象被保留，是的，如果您通过设置器分配（即 self.data = ... 而不是 _data = ...）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T00:44:01.600

你为什么要在 cellForRowAtIndexPath: 中释放字典。即使您分配了dict，您也分配了另一个指针，它是来自filteredData 或数据的对象。只需删除 [data release] 并在声明数据时将其分配为 nil

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (cell == nil) {
       NSLog (@"Cell was nil");
       cell = [[[CustomCell alloc] init] autorelease];
   }

    // **As you will be assigning the object from filteredData/data, don't allocate here**
    NSDictionary *dict = nil;
    if (_isFiltered){
        dict = [self.filteredData objectAtIndex:indexPath.row];
    } else {
        dict = [self.data objectAtIndex:indexPath.row];
    }
    NSLog (@"Filling Label 1");
    cell.IDLabel.text = [[dict objectForKey:@"Id"] stringValue];
    NSLog (@"Filling Label 2");
    cell.firstNameLabel.text = [dict objectForKey:@"firstName"];
    // **Release not required as you didn't allocate**
    //[dict release];
    return cell;
} 
```

# c++ - Visual Studios（主要是 2012 pro）的默认文件位置

> ID：15649268
> 
> 赞同：1
> 
> 时间：2013-03-26T23:25:45.207
> 
> 标签：c++, c, visual-studio, visual-studio-2012, settings

我总是将 _CRT_SECURE_NO_WARNINGS 添加到项目属性的预处理器定义选项卡中的所有 C/C++ 项目中。<edit> 和 <inherit from parent or project defaults> 有下拉菜单。如何更改项目默认值。我认为这是一个隐藏在某处的 XML 文件，或者需要创建该文件。有谁知道位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:29:03.737

查看 -> 属性管理器，然后展开一个项目并构建配置以查看用于该构建配置的属性表。右键单击属性表并选择属性以修改属性表。我不建议修改内置属性表，但是有一个 .user 属性表可以用于此目的。您还可以创建自己的定义预处理器宏的属性表，然后将新的属性表添加到每个构建配置的列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:44:46.503

[我在这里](https://stackoverflow.com/questions/15373465/how-do-you-organise-open-source-visual-studio-projects-with-open-source-dependen/15441543#15441543)的回答和描述将巧妙地解决这个问题。正如 Hans Passant 建议的那样，它使用属性表。

一般设置是创建一个包含所有必要共享设置的[属性表](http://msdn.microsoft.com/en-us/library/669zx6zc(v=vs.110).aspx)，可以选择在多个组中，并根据构建类型的条件。然后包含每个项目文件中的属性表。

# javascript - 使用 javascript 和 dom 的棋盘

> ID：15649274
> 
> 赞同：1
> 
> 时间：2013-03-26T23:26:12.457
> 
> 标签：javascript, dom

我正在尝试像这样创建一个棋盘。

![在此处输入图像描述](../Images/7dd7eaac44a6a28d52c1c9fa1fe7c8bb.png)

我确实创建了一张桌子，但不知道如何给它上色。A 还需要打印电路板名称（如 A1、A2、... H8）并能够将任何图形放入任何单元格中。

首先，这是创建表的代码：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>ChessBoard</title>

    <script type="text/javascript">
        function CreateTable(){
            var poz = document.getElementById('space');

            // createing table adn inserting into document
            tab = document.createElement('table');
            poz.appendChild(tab);

            tab.border = '5';

            for (var i = 0; i < 8; i++){
                // creating row and inserting into document
                var row = tab.insertRow(i);

                for(var j = 0; j < 8; j++){
                    // creating cells and fill with data (numbers)
                    var cell = row.insertCell(j);
                    cell.innerHTML = i*j;
                    cell.style.backgroundColor = 'blue';
                    cell.style.color = 'white';
                    cell.style.height = '50px';
                    cell.style.width = '50px';

                };
            };

        }
    </script>
</head>

<body onload="CreateTable()" id ="space">

</body>
</html> 
```

如何用图形填充特定单元格（如 A3、E5、H8、...）？图是图像。

第 2 部分：我确实在您的帮助下创建了一个板。现在我正试图从这段代码中做更多的事情。

1.  如何将多个不同的图像放入多个单元格中？我正在尝试获得正确的工作代码，但没有成功。此图像应在加载表格时出现（当我按下按钮 CreateTable 时）。我尝试使用以下代码创建：

2.  在这一点上，我想把数字放在船上。当我创建表时，它应该是空白的。然后会有按钮来添加数字。开头为每个不同的图自己的按钮

像这样的东西：

```
function addKing(idStr){
  cell =  document.getElementById(idStr);    
  if(cell != null){
  // works for color, doesn't work for images!!
  //  cell.style.backgroundColor = 'red';
      cell.src = 'http://akramar.byethost8.com/images/SplProg/DN3/images/50px/king_m.png'
  }
} 
```

html中的按钮addKing：

```
<button id="king" onclick="addKing(prompt('Insert field'))">Add King</button> 
```

3.  如果我可以将所有代码放在一起并选择我喜欢插入的那个，则将previousu代码升级到更好（提示窗口1：什么数字：'king，queen，...'，提示窗口2：你想在什么位置插入：'A1，B3，...'））。

    函数 addImage（类型，位置）{ var img = ?? }

当我按下按钮添加图像时，应出现提示窗口并询问**类型**（国王，王后，根，...）和**位置**（A1，B4，...）（进一步更新甚至颜色（黑色或白色）但让我们一步一步构建）。

我想用javascript和dom构建所有的棋盘。

链接到不工作的例子：[jsfiddle](http://jsfiddle.net/LPAZY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:39:41.910

假设您只需要支持现代浏览器，则棋盘*完全*可以使用 CSS 使用计数器和生成的内容：

```
table {
    empty-cells: show;
}

td {
    width: 2em;
    height: 2em;
    line-height: 2em;
    text-align: center;
    border: 1px solid #000;
}

tbody tr:nth-child(odd) td:nth-child(even),
tbody tr:nth-child(even) td:nth-child(odd) {
    color: #fff;
    background-color: #00f;
}

tbody tr:nth-child(even) td:nth-child(even),
tbody tr:nth-child(odd) td:nth-child(odd) {
    background-color: #999;
}

tbody {
    counter-reset: rowNumber;
}

tr {
    counter-increment: rowNumber;
    counter-reset: cellNumber;
}

td {
    counter-increment: cellNumber;
}

td::before {
    content: counter(rowNumber, upper-alpha) counter(cellNumber, decimal);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TLEF8/1/)。

以上在 Ubuntu 12.10 上的 Chromium 24 和 Firefox 19 中进行了测试。

对于 JavaScript 方法：

```
var chess = {
    createBoard: function (dimension) {
        if (!dimension || isNaN(dimension) || !parseInt(dimension, 10)) {
            return false;
        } else {
            dimension = typeof dimension === 'string' ? parseInt(dimension, 10) : dimension;
            var table = document.createElement('table'),
                tbody = document.createElement('tbody'),
                row = document.createElement('tr'),
                cell = document.createElement('td'),
                rowClone,
                cellClone;
            table.appendChild(tbody);
            for (var r = 0; r < dimension; r++) {
                rowClone = row.cloneNode(true);
                tbody.appendChild(rowClone);
                for (var c = 0; c < dimension; c++) {
                    cellClone = cell.cloneNode(true);
                    rowClone.appendChild(cellClone);
                }
            }
            document.body.appendChild(table);
            chess.enumerateBoard(table);
        }
    },
    enumerateBoard : function (board) {
        var rows = board.getElementsByTagName('tr'),
            text = document.createTextNode(),
            rowCounter,
            len,
            cells;
        for (var r = 0, size = rows.length; r<size; r++){
            rowCounter = String.fromCharCode(65 + r);
            cells  = rows[r].getElementsByTagName('td');
            len = cells.length;
            rows[r].className = r%2 == 0 ? 'even' : 'odd';
            for (var i = 0; i<len; i++){
                cells[i].className = i%2 == 0 ? 'even' : 'odd';
                cells[i].appendChild(text.cloneNode());
                cells[i].firstChild.nodeValue = rowCounter + i;
            }
        }
    }
};

chess.createBoard(10); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TLEF8/4/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:41:28.657

您可以将 ID 绑定到单元格，然后根据需要使用该 ID 来引用和更新背景。这是使用您的代码的一个示例：http: [//jsfiddle.net/7Z6hJ](http://jsfiddle.net/7Z6hJ)

```
function CreateTable(){
            var poz = document.getElementById('space');

            // createing table adn inserting into document
            tab = document.createElement('table');
            poz.appendChild(tab);

            tab.border = '5';

            for (var i = 0; i < 8; i++){
                // creating row and inserting into document
                var row = tab.insertRow(i);

                for(var j = 0; j < 8; j++){
                    // creating cells and fill with data (numbers)
                    var cell = row.insertCell(j);
                    var idStr = String.fromCharCode(97 + i).toUpperCase() + (j+1);
                    cell.innerHTML = idStr;
                    cell.id = idStr;
                    cell.style.backgroundColor = 'blue';
                    cell.style.color = 'white';
                    cell.style.height = '50px';
                    cell.style.width = '50px';

                };
            };

        }
function updateRow(idStr)
{
    cell =  document.getElementById(idStr);    
    if(cell != null)
    {
        cell.style.backgroundColor = 'red';
    }
} 
```

正如一些人所提到的，可能有更好的方法来解决这个问题（使用 css 和 jQuery 等），但这个答案与你迄今为止所拥有的一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:32:59.130

在顶部循环中创建一个新变量以保存行的“字母”名称（例如 A、B、C）。

```
// creating row and inserting into document
var row = tab.insertRow(i);
var row_letter = String.fromCharCode(65 + i); 
```

然后在第二个循环中结合行名和列号。

```
cell.innerHTML = row_letter + j; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T23:50:16.887

Actually, you need to do some math for correctly coloring and adding labels. Here is the part of code for doing magic:

```
 1       cell.innerHTML = String.fromCharCode(65 + i) + (j + 1);
             2       if((i+j)%2){ cell.style.backgroundColor = 'white'; }
             3       else{ cell.style.backgroundColor = 'blue'; }
             4       cell.style.color = 'black';
             5       cell.style.height = '50px';
             6       cell.style.width = '50px'; 
```

Let me explain. In first line, you take constant 65, which is ASCII code for letter 'A'. While you change the letter by rows, you add `i` counter to it, so you get 65+0, 65+1, ..., 65+7\. Their ASCII equivalents (which you get with `String.fromCharCode()`) are A, B, ..., H. Now when you have that letter, easily add number of cell to it `(j + 1)`. You can remove '1' and leave just `j` and make inner loop go from 1 to 8.

Lines 2, 3: Colors are alternating - every second row have the same color. So, just test if is i+j dividable by 2.

For adding figure, you have to make some function that will do `cell.innerHTML = <SOME IMAGE>`. But, I guess, it's for second question.

Hope I helped you understand the logic.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-24T11:15:43.390

如果有人正在寻找一种使用 JS 来可视化棋盘的方法（正如我正在做的那样并且不小心遇到了这个问题），那么这里有一个出色的[JS 库](http://chessboardjs.com/)来执行此操作。

它可以创建这样的东西

![在此处输入图像描述](../Images/54598f4dc9ae63660a843acc2e03a0df.png)

只需执行以下操作即可立即获得更多信息：

**JavaScript**

```
var ruyLopez = 'r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R';
var board = new ChessBoard('board', ruyLopez); 
```

**HTML**

```
<div id="board" style="width: 400px"></div> 
```

# java - 通过php post js验证提交给mysql

> ID：15649275
> 
> 赞同：0
> 
> 时间：2013-03-26T23:26:12.320
> 
> 标签：java, php, html, mysql, validation

我正在尝试从 html 表单向 mysql 提交数据，但是在我这样做之前，我想使用一些 javascript 来验证用户输入。当前发生的情况是，一旦用户单击提交，js 验证就可以正常工作，并调用 php 文件，但是当将数据提交到数据库时，字段都是空的。这是我目前拥有的：

HTML 表单

```
<form action="StudentSubmit.php" action="validating()" method="post" class="fancy-form">
.
.
<div>
     <div class="fieldgroup">
          <em>*</em><input type="text" name="addressline1" id="addressline1" class="required" minlength="7">
          <label for="addressline1">Street #1</label>
     </div>
</div>
.
.
.
<div class="submit-wrap">
     <button type="submit" class="submit">Submit</button>
</div> 
```

JS

```
checkdata =
    {
        checkNull: function(textboxval) {
            if ($(textboxval).val() == null || $(textboxval).val() == "") {
                return false;
            }
            else {
                return true;
            }
        },
        checkNumeric: function(textboxval) {
            var value = $(textboxval).val();
            if ((parseFloat(value) == parseInt(value)) && !isNaN(value)) {
                return true;
            } else {
                return false;
            }
        },
        checkEmail: function(textboxval) {
            var x = $(textboxval).val();
            var atpos = x.indexOf("@");
            var dotpos = x.lastIndexOf(".");
            if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length)
            {
                return false;
            }
        },
        isChecked: function(textboxval) {
            if ($(textboxval).is(':checked') == false)
            {
                return false;
            } else {
                return true;
            }
        }
    };

function validating() {
var returnValue = true;

var boxFields = new Array();
boxFields[0] = "#firstname";
boxFields[1] = "#lastname";
boxFields[2] = "#addressline1";
boxFields[3] = "#homephone";
boxFields[4] = "#cellphone";
boxFields[5] = "#city";
boxFields[6] = "#state";
boxFields[7] = "#guardian";
boxFields[8] = "#zip";
boxFields[9] = "#emergencycontactperson";
boxFields[10] = "#emergencycontactphone";

var nullValue = true;
for (var i = 0; i < boxFields.length; i++) {
    if (checkdata.checkNull(boxFields[i]) == false) {
        nullValue = false;
        break;
    }

}

var numFields = new Array();
numFields[0] = "#homephone";
numFields[1] = "#cellphone";
numFields[2] = "#emergencycontactphone";

var numericValue = true;
for (var j = 0; j < numFields.length; j++) {
    if (checkdata.checkNumeric(numFields[j]) == false) {
        numericValue = false;
        break;
    }

}

var checkFields = new Array();
checkFields[0] = "#signature";

var checkValue = true;
for (var k = 0; k < checkFields.length; k++) {
    if (checkdata.isChecked(checkFields[k]) == false) {
        checkValue = false;
        break;
    }

}

if (nullValue == false || numericValue == false || checkValue == false) {
    returnValue = false;
    alert("Some required fields were left empty");
    return false;
} else {
    return true;
}
} 
```

PHP

```
<?php
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$dob = $_POST['dob'];
$emergencycontact = $_POST['emergencycontactperson'];
$address = $_POST['addressline1'] . " " . $_POST['addressline2'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip = $_POST['zip'];
$homephone = $_POST['homephone'];
$cellphone = $_POST['cellphone'];
$guardian = $_POST['guardian'];
$inneighborhood = 0;
if ($zip == "49503")
    $inneighborhood = 1;

$con = mysqli_connect("localhost", "cookarts_root", "password_here", "cookarts_database");

// Check connection
if (mysqli_connect_errno()) {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$sql = "INSERT INTO student (FirstName, LastName, DOB, EmergencyContact, Address, City,       State, ZIP, CellPhone, HomePhone, Guardian, InNeighborhood)
VALUES
   ('$firstname', '$lastname', '$dob', '$emergencycontact', '$address', '$city', '$state',   '$zip', '$cellphone', '$homephone', '$guardian', '$inneighborhood')";

if ($con->query($sql) === TRUE) {
  header( 'Location: http://cookartscenter.net/ThankYou.php' ) ;
}   
else {
  echo 'Error: '. $con->error;
}

mysqli_close($con);
?> 
```

只是为了澄清，连接到数据库没有问题，我的问题是在 JS 验证 php 没有正确地从表单中提取数据之后。如果您需要更多我的 html 代码，我很乐意提供。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:37:07.160

改变

```
<form action="StudentSubmit.php" action="validating()" method="post" class="fancy-form"> 
```

至

```
<form action="StudentSubmit.php" method="post" class="fancy-form"> 
```

并添加以下内容：

```
$('form').submit(function ()
{

  if (!validating())
  {
    return false;
  }

}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:36:47.740

您正在用您的 javascript 替换打开表单标记中的表单操作。如果您设置了两个属性，则最后一个设置的属性将是使用的那个。您可以在按钮上使用 onclick() 或 onsubmit()。

```
<form action="StudentSubmit.php" onsubmit="validating()" method="post" class="fancy-form"> 
```

Javascript 验证仅适用于使用浏览器的人。它不适用于垃圾邮件程序或已关闭它的人。最好的办法是在服务器端使用 PHP 验证，然后在将输入注入数据库之前清理输入。

还要检查变量以确保它们不为空：

```
if(!empty(strip_tags($_POST['firstname']))){
 $firstname = strip_tags($_POST['firstname']);
}

$firstname = $mysqli->real_escape_string($firstname); 
```

您还可以报价 PDO 连接

```
$conn->quote($firstname) 
```

# jasper-reports - 如何使用 iReport 创建用于重复任务的甘特图

> ID：15649284
> 
> 赞同：0
> 
> 时间：2013-03-26T23:27:01.577
> 
> 标签：jasper-reports, ireport, gantt-chart

我有一个查询，它为任务中的每个玩家（或阶段）返回一堆任务和子任务，我将其视为子任务。

每个子任务的开始和结束时间戳。

这是数据的样子

```
player_id    quest_id  stage_in_quest timestamp_start              timestamp_end
305       3         accepted       2013-02-18 09:19:06.254  2013-02-25 09:19:41.528 
305       3     time_up        2013-02-25 09:19:41.528  2013-02-26 23:12:49.268 
305       3         accepted       2013-02-26 23:12:49.268  2013-02-26 23:14:15.076 
305       3     bonus awarded   2013-02-26 23:14:15.076 2013-02-26 23:14:23.403 8.327
305       3         completed   2013-02-26 23:14:23.403 
```

所以你看到任务3被玩家接了2次，第一次无法完成，第二次完成。同样，我有很多行，玩家多次执行相同的任务。我想绘制一个甘特图，显示沿 x 轴时间戳的重复任务及其阶段。现在，在*iReport*中，我使用 quest_id 作为任务表达式，使用 stage_in_quest 作为子任务。

但是图表只绘制了一组，覆盖了下一组。我如何让酒吧（及其彩色序列）重复相同的任务？

任何建议都会有很大帮助。

# recursion - 递归查找二叉搜索树的高度 - 它是如何工作的？

> ID：15649289
> 
> 赞同：1
> 
> 时间：2013-03-26T23:27:40.373
> 
> 标签：recursion, tree, height, binary-search-tree

我已经看到查找二叉搜索树高度问题的常见解决方案如下所示：

```
private int getHeight(Node<T> ptr, String typeOfCall)
{
    if (ptr == null)
        return -1;

    int leftHeight = -1;
    int rightHeight = -1;

    System.out.println(input);
    System.out.println("Node value: " + ptr.el);

    if (ptr != null)
        leftHeight = getHeight(ptr.left, "leftHeight Call");
    if (ptr != null)
        rightHeight = getHeight(ptr.right, "rightHeight Call");

    if(leftHeight > rightHeight)
        return leftHeight + 1;
    else
        return rightHeight + 1;

} 
```

如您所见，我添加了一些额外的代码行以尝试了解此方法的工作原理...

以下面的 BST 为例：

```
 99
                            /  \
                          50    100
                         /  \
                       49    55
                      /        \
                     48         60
                    /             \
                   47              70
                                     \ 
                                      80 
```

我添加的代码得到的输出是：

```
first
Node value: 99
leftHeight Call
Node value: 50
leftHeight Call
Node value: 49
leftHeight Call
Node value: 48
leftHeight Call
Node value: 47
rightHeight Call
Node value: 55
rightHeight Call  
Node value: 60
rightHeight Call
Node value: 70
rightHeight Call
Node value: 80
rightHeight Call
Node value: 100
height: 5 
```

我现在的问题是：函数如何知道它必须从值为 47 的叶节点到值为 55 的节点，然后从那里尽可能地下降？即当ptr 当前指向值为47 的叶节点时，ptr.right.element = 55 如何？我认为 ptr.right 现在将等于 null，因为它位于叶节点上？此外，一旦遇到值为 80 的叶节点 - 该函数将转到右子树。它怎么知道这样做？

任何解释将不胜感激！我觉得这里涉及的递归可能是我困惑的原因。这个功能如何工作？谢谢！

*编辑*Oli 提出建议后，我在递归函数调用下方添加了一些打印语句。

```
 private int getHeight(Node<T> ptr, String typeOfCall)
    if (ptr == null)
        return -1;

    int leftHeight = -1;
    int rightHeight = -1;

    System.out.println("Before: " + input);
    System.out.println("Before: " + ptr.el);

    if (ptr != null)
        leftHeight = getHeight(ptr.left, "leftHeight Call");
    if (ptr != null)
        rightHeight = getHeight(ptr.right, "rightHeight Call");

    System.out.println("After Recursive: " + input);
    System.out.println("After Recursive: " + ptr.el);

    if(leftHeight > rightHeight)
        return leftHeight + 1;
    else
        return rightHeight + 1;
            } 
```

输出：

```
Before: first
Before: 99
Before: leftHeight Call
Before: 50
Before: leftHeight Call
Before: 49
Before: leftHeight Call
Before: 48
Before: leftHeight Call
Before: 47
After Recursive: leftHeight Call
After Recursive: 47
After Recursive: leftHeight Call
After Recursive: 48
After Recursive: leftHeight Call
After Recursive: 49
Before: rightHeight Call
Before: 55
Before: rightHeight Call
Before: 60
Before: rightHeight Call
Before: 70
Before: rightHeight Call
Before: 80  
After Recursive: rightHeight Call
After Recursive: 80
After Recursive: rightHeight Call
After Recursive: 70
After Recursive: rightHeight Call
After Recursive: 60
After Recursive: rightHeight Call
After Recursive: 55
After Recursive: leftHeight Call 
After Recursive: 50
Before: rightHeight Call
Before: 100
After Recursive: rightHeight Call
Below Recursive: 100
Below Recursive: first
Below Recursive: 99 
```

这真的有助于理解这里使用的递归的展开以及这个函数作为一个整体是如何工作的。

# java - 使用 spring-configuration 而不为您的客户端创建 spring 依赖项

> ID：15649295
> 
> 赞同：0
> 
> 时间：2013-03-26T23:28:04.383
> 
> 标签：java, spring

如果我使用 spring 配置来构造一个对象，我是否可以为客户实例化该对象而不需要他们导入我的 spring 配置？

如果无法做到这一点，一个使用 spring 的客户是否总是需要它的任何客户使用 spring？

如果可以做到这一点，那么正确的方法是什么？像这样的东西...

库代码：

```
public MyFactory() {

   @Autowired
   InitializedObject obj

   public getInstance() {
     return obj;
   }
} 
```

客户端代码：

```
 import com.code.package.something.myfactory.MyFactory;

...

   InitializedObject obj = MyFactory.getInstance(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:34:27.970

自动装配依赖由 Spring 容器完成。如果没有，则不会自动接线。您需要确保客户端具有正确配置的 Spring 容器以自动装配您的依赖项，或者自己设置一个（例如：使用`ClassPathXmlApplicationContext`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:31:56.650

一种选择是完全避免使用 Spring 注释，仅使用 spring 配置文件以具有基于构造函数或 setter 的注入。这样，您的类就变得独立于 Spring 代码，并且您的客户可以使用您的代码，只要他使用工厂或其他方式正确地提供依赖项。

# javascript - XMLHttpRequest 无法加载 - Access-Control-Allow-Origin 不允许

> ID：15649297
> 
> 赞同：-3
> 
> 时间：2013-03-26T23:28:14.150
> 
> 标签：javascript, ajax, xmlhttprequest

我在同一站点上的两个不同页面遇到问题。两者都在运行相同的 Javascript，逐行运行......但一个给我错误，一个没有。请看以下两个网址...

[http://www.gloprofessional.com/moist-hydration-mist](http://www.gloprofessional.com/moist-hydration-mist) - 点击左侧栏中的播放 [http://www.gloprofessional.com/info/learn-more/videos/](http://www.gloprofessional.com/info/learn-more/videos/) - 点击任何视频链接

单击时，应触发一个花式框链接，其中应播放 youtube 视频。

关于为什么一个有效而另一个无效的任何想法？主 URL 在 Magento 上运行，而 /info/ 下的任何内容都是表达式引擎。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:34:54.607

一个使用 xhr(ajax) 从 youtube 加载 url，你不能使用你所在的不同域的 xhr - 另一个使用 iframe 和 youtube url，这很好（你仍然有错误原因导致框架权限顺便说一句）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:35:51.667

在第二个链接中，内容被加载到 iframe 中。

在法师网站内，我假设内容是直接加载的？在法师花式框中也使用 iframe，它应该可以工作。

# assembly - MASM 中的 Push/Pop 与 Mov

> ID：15649298
> 
> 赞同：2
> 
> 时间：2013-03-26T23:28:16.257
> 
> 标签：assembly, x86, mov

一个简单的问题，但我不知道答案。

原因是什么：

```
push wParam
pop char 
```

其中`wParam`定义为 WPARAM 类型并`char`定义为 WPARAM 类型。

为什么我不能简单

```
mov char, wParam 
```

我觉得它与地址有关，但我无法证明它的合理性。`mov`当我尝试使用该语句时，MASM 会吐出一个无法描述的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T23:31:54.947

因为两者都是内存地址，并且在 x86 汇编中没有`mov mem,mem`(`mov char,wParam`在这种情况下) 这样的指令。

因此，要做到这一点，您需要使用`push`& `pop`，或者首先将值移动到某个寄存器中，`mov reg,mem`然后从该寄存器移动到内存中`mov mem,reg`。

# warnings - 如何在 Verilog 中忽略特定未使用的电线？

> ID：15649300
> 
> 赞同：1
> 
> 时间：2013-03-26T23:28:24.827
> 
> 标签：warnings, verilog

我的设计中有某些电线和端口是故意不用的，但我想保留它们。
我如何告诉我的 Xilinx Verilog 合成器避免给出关于这些特定线路的“未使用”警告？

显然 VHDL 对此有一个`open`关键字，但我不知道它在 Verilog 中的等价物是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T19:19:24.530

我知道如何摆脱这些：`Port VALUE is not connected to this instance`

即使未使用 VALUE 输出，这似乎也不会使用 Xilinx 工具生成警告：

```
counter #(5'b11010) counter_txd_en(
    .CLK(CLK),
    .RST(RST),
    .MAXED(step),
    .EN(1'b1),
    .VALUE()
); 
```

我知道这个解决方案只是您问题的部分答案，因为它只涵盖未使用的端口。

此外，如果未使用的端口导致子模块中出现不需要的内容，您可能会收到有关这些内容的警告...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-08T17:57:57.727

将它们连接到虚拟电线并应用于`(* keep="soft" *)`这些电线。 *（电线的名称无关紧要。）*

## 例子

```
(* keep="soft" *)
wire [7:0] unconnected_received_data;

uart_receive uart_receive (
    .RST(RST), 
    .CLK(CLK), 
    .RXD(UART_RXD),
    .DATA(unconnected_received_data), 
    .RXD_READY(rxd_ready)
); 
```

**此示例不会生成任何警告。**

* * *

## [Xilinx 约束](http://www.xilinx.com/support/documentation/sw_manuals/xilinx13_4/cgd.pdf)`(* keep="soft" *)`指南：

> 结果，网络在综合过程中被保留，但实现工具可以自由地处理它。从概念上讲，您指定 KEEP=TRUE 仅用于综合，但指定 KEEP=FALSE 用于实现工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:58:06.217

正如蒂姆所说，这些警告是特定于工具的，虽然您可以完全关闭警告，但您将无法（通常）关闭警告的特定实例。

也就是说，您可以使用以下方法摆脱它们，我将在前面说明我认为您不应该*使用*并且简单地使用警告。

所以。要摆脱这些未使用的警告，解决方案是......使用它们！即将整个混乱收集到一个有线或，将结果推送到顶级输出，然后在该输出上放置一个时序忽略。这将处理未使用的警告，同时也不会影响任何 PAR 结果。

同样，我建议不要实际这样做。警告是有原因的。我向你保证，在未来的某个时候，你的基本假设将会改变，这些警告将变得有效。

# java - 在我的应用程序中使用 android A-GPS

> ID：15649302
> 
> 赞同：0
> 
> 时间：2013-03-26T23:28:30.197
> 
> 标签：java, android, gps

我想在我的应用程序中使用 A-GPS。我是否必须自己实现某些功能，或者当 WiFi / 数据网络和 GPS 开启时，Android 会自动使用 A-GPS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:31:09.917

AGPS 都是在幕后完成的。据我所知，没有使用纯 GPS 的 Android 设备。他们都使用 GPS 和手机信号塔/网络位置的组合。

你不需要做任何事。该框架将为您处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:48:10.240

[这](http://www.vogella.com/articles/AndroidLocationAPI/article.html)是 android 教程的重要来源，链接直接指向有关 gps 或位置服务的链接

# python - 1 个列表中的两个操作

> ID：15649309
> 
> 赞同：0
> 
> 时间：2013-03-26T23:29:03.207
> 
> 标签：python

我有一个列表列表

```
w = [['2', '22', '32', '44', '55', '66', '69', '94'], ['22', '24', '49', '74', '90', '113', '130', '140']] 
```

必须从中派生一个新的列表列表，其中：`even indices will have 1 subtracted from them`和处的所有元素`all odd indices will have 1 added to them`。所以上面的列表看起来像：

```
x = [['1','23','31','45','54','67','68','93'],['21','25','48','75','89','114','129','141']] 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T23:36:00.770

```
>>> w = [['2', '22', '32', '44', '55', '66', '69', '94'], ['22', '24', '49', '74', '90', '113', '130', '140']]
>>> [[str(int(s)+(1 if i%2 else -1)) for i, s in enumerate(lst)] for lst in w]
[['1', '23', '31', '45', '54', '67', '68', '95'], ['21', '25', '48', '75', '89', '114', '129', '141']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:45:54.773

已发布带有列表理解的答案。这是使用简单 for 循环的替代方法：

```
for ls in w:
    for i, v in enumerate(ls):
        if i % 2:
            ls[i] = str(int(v) + 1)
        else:
            ls[i] = str(int(v) - 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:49:31.740

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T23:38:05.173

So heres one method:

```
w = [[str(int(y)+(-1,1)[i%2]) for i,y in enumerate(x)] for x in w] 
```

basically you just iterate over the lists, and then iterate over the elements of each list, adding / subtracting 1 depending on `x%2` (odd / even).

Since this is done in a list constructor or two, the lists are rebuilt as they are iterated over.

# winforms - Visual c++，在 mousedown 上调整控件的大小

> ID：15649325
> 
> 赞同：0
> 
> 时间：2013-03-26T23:30:25.900
> 
> 标签：winforms, winapi, visual-c++, winforms-interop

我制作了一个`UserControl`包含几个常规 Button 控件的库。

我想在拖动时调整它的大小。dragdetction 是通过 Windows 消息完成的，它可以完美地工作。

我什至设法设置了一个正确的光标并..重新打开`WM_MOUSELEAVE`。

```
virtual void WndProc( Message %m ) override
{
    // Listen for operating system messages
    switch ( m.Msg )
    {
        // more code
        // .
        // ..
        // ...
        case WM_MOUSEMOVE:
            if(m.WParam.ToInt32() ==  MK_CONTROL)
            {
                Debug::WriteLine("MK_CONTROL");
                return;
            }
            else if(m.WParam.ToInt32() ==  MK_LBUTTON)
            {
                Debug::WriteLine("MK_LBUTTON");
                if(isMouseDown)
                {
                    Debug::WriteLine("drag Detected");
                    Debug::WriteLine("isMouseDown: " + isMouseDown.ToString());
                    int tempX = (short)(m.LParam.ToInt32() & 0x0000FFFF);
                        this->Size.Width = (this->Location.X - tempX); // <--- does not work!
                    return;
                }
                return;
            }
            else if(m.WParam.ToInt32() ==  MK_MBUTTON)
            {
                Debug::WriteLine("MK_MBUTTON");
                return;
            }
            else if(m.WParam.ToInt32() ==  MK_RBUTTON)
            {
                Debug::WriteLine("MK_RBUTTON");
                return;
            }
            else if(m.WParam.ToInt32() ==  MK_SHIFT)
            {
                Debug::WriteLine("MK_SHIFT");
                return;
            }
            else if(m.WParam.ToInt32() ==  MK_XBUTTON1)
            {
                Debug::WriteLine("MK_XBUTTON1");
                return;
            }
            else if(m.WParam.ToInt32() ==  MK_XBUTTON2)
            {
                Debug::WriteLine("MK_XBUTTON2");
                return;
            }   
        return;
        // more code
        // .
        // ..
        // ...
        return;
    }
    System::Windows::Forms::UserControl::WndProc( m );
} 
```

然而`this->Size.Width = (this->Location.X - e->Location.X);`// <--- 不起作用！ `this->Size.Width`将保持其先前由属性窗口设置的默认值 400。

我知道可以通过 Windows 消息设置大小，但我不明白如何。取自 C# 示例： [一旦窗口的嵌套层次结构超过一定深度，控件将不会调整大小](http://blogs.msdn.com/b/alejacma/archive/2008/11/20/controls-won-t-get-resized-once-the-nesting-hierarchy-of-windows-exceeds-a-certain-depth-x64.aspx)

```
 // this doesn't seam the right synthax for C++
    [DllImport("User32.dll", CharSet=CharSet.Auto)]
    public static extern int SendMessage(HandleRef hWnd, int msg, int wParam, int lParam);

    [DllImport("User32.dll", ExactSpelling = true, CharSet = System.Runtime.InteropServices.CharSet.Auto)]
    public static extern bool SetWindowPos(HandleRef hWnd, HandleRef hWndInsertAfter,
    int x, int y, int cx, int cy, int flags); 
```

`UserControl`没有调用的属性/方法`SetWindowPos`

如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:14:20.753

Size 属性返回一个结构体，它是值类型。所以你得到一个副本，你修改它，但原来的保持不变。要更改表单的大小，您可以设置：

this->Size = new Size(100, 100);

或者更好，使用宽度和高度属性：

这个->宽度+= 100；

# jquery - 根据与鼠标的距离动态旋转图像

> ID：15649327
> 
> 赞同：3
> 
> 时间：2013-03-26T23:30:39.160
> 
> 标签：jquery, html, css-animations

我有一张图片，想旋转它。但是，我认为 css 关键帧不会起作用，因为它们不能动态更改。我目前在[http://jqueryrotate.googlecode.com](http://jqueryrotate.googlecode.com)使用一个名为 jquery rotate 的 jquery 插件。我想要做的是通过从元素到鼠标的距离来改变旋转速度。是否有任何不太占用 CPU 的解决方案（希望如此），因为 jquery rotate 已经非常浪费 CPU 功率。这是我的代码：

```
 var angle = 0;
    var distance = 200;
    setInterval(function () {
        plus = distance / 100;
        angle -= plus;
        $("#elem").rotate(angle);
     }, 25); 
```

查看[这个](http://jsfiddle.net/eCV8q/)jsFiddle，它每次循环将图像旋转 2 度。我想做的是在鼠标靠近时加快旋转速度（通过更改“距离”变量）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:14:19.027

编辑：在这里更新了小提琴：

[http://jsfiddle.net/eCV8q/25/](http://jsfiddle.net/eCV8q/25/)

* * *

使用 body.pageX 和 Y 在 body 中找到 mouseX 和 Y，然后使用 element.offset() 找到图像的偏移量。

```
$(document).ready(function() {
  $('body').mousemove(function(e) {
    // had to put the image in a container div as it was rotating
    var offset = $('#container').offset(); 
    var distanceX = e.pageX - (offset.left + ($('#elem').width()/2));    
    var distanceY = e.pageY - (offset.top + ($('#elem').height()/2)); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T09:41:35.027

我建议您查看[https://github.com/jQueryKeyframes/jQuery.Keyframes](https://github.com/jQueryKeyframes/jQuery.Keyframes)，因为它可以动态生成 css 关键帧并将其应用于元素。

我已经将它用于类似的目的，就像您描述的那样，一双眼睛的瞳孔跟随鼠标在页面周围移动。惊人的 ：）

# solr - 为每个最终用户分离 solr 索引

> ID：15649329
> 
> 赞同：0
> 
> 时间：2013-03-26T23:30:52.837
> 
> 标签：solr, lucene, full-text-search, search-engine, solr4

对于我们的应用程序，我们希望以某种方式为使用该应用程序的每个用户分离索引数据（它使用 solr 来索引上传的数据）。那可能吗？

所有被索引文档的 schema.xml 和文档结构都是相同的。出于安全原因，我们只想隔离。

澄清：我忘了提到 solr 只能由网络应用程序访问。最终用户从不直接连接到 Solr。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:15:08.347

如果每个文档只能由少数用户访问，您可以保留一个多值字段，`allowed_user_ids`其中包含允许访问该文档的用户 ID。然后通过 user_id 对其进行过滤查询以限制访问。

如果您同时拥有公共文档和受限文档，那么您可以保留一个字段`is_public`并将其设置为仅针对公共文档，而不是将所有 user_id 存储在公共文档中。对于受限制的文档，请在 上使用过滤器查询`allowed_user_ids`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:42:30.980

您可以尝试使用 Lucene 的搜索空间过滤器功能。它根据提供的条件限制可用于搜索查询的文档集。

可以通过两种方式构建标准。

1) 就像任何其他 Lucene 查询一样：[Lucene Filtered Query](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/FilteredQuery.html)

2) 将文档集作为[Filter的实例传递给 IndexSearcher](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/Filter.html)

# algorithm - 子集的有效枚举

> ID：15649331
> 
> 赞同：4
> 
> 时间：2013-03-26T23:31:17.793
> 
> 标签：algorithm, optimization, set

我目前正在研究数学优化问题的算法，并且必须处理以下情况。

在很多情况下，算法需要决定在这种情况下哪个子集 S ⊂ N 是最好的。
N = { 0, 1, 2, ..., 126, 127 }
|S| ∈ { 0, 1, 2, 3, 4, 5 }（子集的大小在 0 和 5 之间）

这给出了 265.982.833 的可能子集的总数。(binom(128, 5) + binom(128, 4) + ... + binom(128, 0))

如果我预先计算所有可能的子集并将它们存储在一个数组中，那么这个数组将有 265.982.833 个条目和大约 1.27 GB 的内存占用，没有任何优化和将子集简单存储为字节数组。

在这种情况下，当算法需要知道哪些元素在索引为 i 的特定子集中时，只需要进行表查找。然而，巨大的内存需求是不可接受的。

所以我的问题基本上是，是否有人能想到一种算法来根据索引 i 有效地计算子集中的元素，而不是需要预先计算的数组。

* * *

编辑包括示例：
lookupTable[0] = {}
lookupTable[1] = {0}
...
lookupTable[127] = {126}
lookupTable[128] = {127}
lookupTable[129] = {0, 1}
lookupTable[ 130] = {0, 2}
...
查找表[265982832] = {123, 124, 125, 126, 127}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T03:13:34.977

从前面的子集构造每个子集很简单。将子集表示为 128 位数也很简单（尽管显然大多数值不会映射到合格的子集，而且我不知道问题中的 128 的值是真实的还是只是一个示例。）当然是我会使用的第一种方法；如果可行，则全部为 O(1)，并且存储成本并不极端（索引为 16 个字节而不是 4 个）。

如果您真的想为子集存储简明索引，我将使用以下递归，其中 S(n,k) 表示值 < n 中大小≤ k 的所有子集（或子集的计数）：

`s(n,0) = { {} }`
`s(n,k) = (s(n-1,k-1) ⊙ {n}) ⋃ s(n-1,k) if n ≥ k > 0`
`s(n,k) = {} if n < k`

其中运算符的`P ⊙ S`意思是“添加`S`到”的每个元素`P`（因此结果的大小与 完全相同`P`）。因此，作为一种计数算法，我们得到：

`S(n,0) = 1`
`S(n,k) = S(n-1,k-1) + S(n-1,k) if n ≥ k > 0`
`S(n,k) = 0 if n < k`

第二次递归可以重新表示为：

`S(n,k) = Σ^n[i=k]S(i-1,k-1)`
（用 jsMath 看起来会更好，grrr。）

这是另一种说法，我们将按最大元素的顺序生成集合，所以我们从 set 开始，然后是所有作为最大元素的集合`{0...k-1}`，然后是所有具有的集合，依此类推。在每组集合中，我们递归查找-size 集合，再次从最小的最大值开始，一直到比我们刚刚选择的最大值小一个。`{k}``{k+1}``(k-1)`

`S(n,k)`因此，我们可以通过连续减去`S(i-1, k-1)`for `i`from `k`to`n`直到结果为负数，找出索引集合中索引 in 的最大值是多少；然后我们添加`{i}`到结果集中；减少`k`1 并重复`n`现在设置为`i-1`.

如果我们预先计算 的相关表`S(n,k)`，其中大约有 640 个有效组合，我们可以使用二进制搜索而不是迭代来找到`i`每一步的 ，因此计算耗时`k log(n)`，这并不可怕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:57:36.200

幼稚的实现将使用位图（bitX == 1 表示项目 X 存在于集合中）另一个约束是掩码中的位不能超过 5 个。它需要 128 位来表示一个集合。

使用素数的乘积来表示集合只需要 <64 位/集合（第 124...128 个素数是 {124:691, 125:701, 126:709, 127:719, 128:727}，并且他们的产品将适合 64 位，IICC。它仍然会浪费一些位（一个好的枚举将适合 32 位，如 OQ 所示），但很容易通过以下方式检查两组的“重叠”公共项他们的 GCD。

这两种方法都需要对值数组进行排序，并使用该数组内的集合的排名作为其枚举值。

# ios6 - Cocos2d如何将高分存储在列表中

> ID：15649332
> 
> 赞同：0
> 
> 时间：2013-03-26T23:31:19.053
> 
> 标签：ios6, cocos2d-iphone, xcode4.5

现在我已经在应用商店中创建了我的游戏“Laser Defender”和它，但是我有一件事我不知道，如何将高分存储在游戏列表中。我有一个标签来计算被摧毁的敌舰数量，但我如何将这些分数中最好的存储在一个列表中？这是我更新enemyShot标签的代码：

*   (void)update:(ccTime)dt {

    NSMutableArray *projectilesToDelete = [[NSMutableArray alloc] init]; for (CCSprite *projectile in _projectiles) { CGRect projectileRect = CGRectMake( projectile.position.x - (projectile.contentSize.width/2), projectile.position.y - (projectile.contentSize.height/2), projectile.contentSize。宽度，射弹.contentSize.height);

    ```
    NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];
    for (CCSprite *target in _targets) {
        CGRect targetRect = CGRectMake(
                                       target.position.x - (target.contentSize.width/2),
                                       target.position.y - (target.contentSize.height/2),
                                       target.contentSize.width,
                                       target.contentSize.height);

        if (CGRectIntersectsRect(projectileRect, targetRect)) {
            [targetsToDelete addObject:target];
        }
    }

    for (CCSprite *target in targetsToDelete) {
        [_targets removeObject:target];
        [self removeChild:target cleanup:YES];
        _enemiesShot++;
        [_enemiesShotLabel setString:[NSString stringWithFormat:@"%d",_enemiesShot]];

    }

    if (targetsToDelete.count > 0) {
        [projectilesToDelete addObject:projectile];
    }
    [targetsToDelete release]; 
    ```

    }

    for (CCSprite *projectile in projectilesToDelete) { [_projectiles removeObject:projectile]; [self removeChild:projectile cleanup:YES]; } [projectilesToDelete 释放];

    }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:53:05.370

尝试这个 ：

NSUserDefaults

保存

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// saving an NSString
[prefs setObject:@"TextToSave" forKey:@"keyToLookupString"];

// saving an NSInteger
[prefs setInteger:42 forKey:@"integerKey"];

// saving a Double
[prefs setDouble:3.1415 forKey:@"doubleKey"];

// saving a Float
[prefs setFloat:1.2345678 forKey:@"floatKey"];

// This is suggested to synch prefs,
[prefs synchronize]; 
```

检索

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// getting an NSString
NSString *myString = [prefs stringForKey:@"keyToLookupString"];

// getting an NSInteger
NSInteger myInt = [prefs integerForKey:@"integerKey"];

// getting an Float
float myFloat = [prefs floatForKey:@"floatKey"]; 
```

当应用程序运行时，只需将所有数据保存在一些 NSArray/MutableArray 中，当应用程序即将进入后台时，“applicationDidEnterBackground”中的“保存”部分。

当应用程序恢复时，从“UserDefaults”（检索上面的代码）中取回所有数据。将该代码放在“ApplicationDidEnterForeground”中。当应用程序重新启动时，使用“ViewDidLoad”来检索代码。

# java - 没有发现小程序错误？

> ID：15649334
> 
> 赞同：0
> 
> 时间：2013-03-26T23:31:26.030
> 
> 标签：java, applet

我正在为一门课程编写程序，我需要让美国国旗将旗杆缩放到国歌。我有代码，但得到一个错误，即即使它在那里也找不到小程序。我正在使用日食。任何人都可以帮助我解决我所缺少的吗？

提前致谢...

代码：

```
@SuppressWarnings("serial")
public class Lab5b extends JApplet {
  private AudioClip audioClip;

  public Lab5b() {
    add(new ImagePanel());

    URL urlForAudio = getClass().getResource("audio/us.mid");
    audioClip = Applet.newAudioClip(urlForAudio);
    audioClip.loop();
  }

  public void start() {
    if (audioClip != null) audioClip.loop();
  }

  public void stop() {
    if (audioClip != null) audioClip.stop();
  }

  /** Main method */
  public static void main(String[] args) {
    // Create a frame
    JFrame frame = new JFrame("Lab 5");

    // Create an instance of the applet
    Lab5b applet = new Lab5b();
    applet.init();

    // Add the applet instance to the frame
    frame.add(applet, java.awt.BorderLayout.CENTER);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Display the frame
    frame.setSize(200, 660);
    frame.setVisible(true);
  }
}

@SuppressWarnings("serial")
class ImagePanel extends JPanel {
  private ImageIcon imageIcon = new ImageIcon("image/us.gif");
  private Image image = imageIcon.getImage();
  private int y = 550;

  public ImagePanel() {
        Timer timer = new Timer(120, new TimerListener());
        timer.start();
    }

    class TimerListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            increaseY();
        }
    }

  public void increaseY() {
        if (y > 0) {
            y--;
            repaint();
        }
    }

  /** Draw image on the panel */
  protected void paintComponent(Graphics g) {
    super.paintComponent(g);

    if (image != null) {
      g.fillRect(0, 0, 10, 660);
      g.drawImage(image, 11, y, 160, 84, this);
        }
  }
} 
```

在此处输入代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:59:44.640

需要注意的几件事

*   `Applets`不要在`main()`方法处开始执行。但是，如果您扩展您的with ，则可以`applets`使用 Java 解释器（通过使用该方法）来执行.`main()``class``Frame`

*   拥有该`init()`方法很重要，因为它被浏览器或小程序查看器调用以通知该小程序它已被加载到系统中。它总是在第一次调用 start 方法之前被调用。

*   `JFrame`并且`JApplet`都是顶级容器，而不是添加`applet`到 中`frame`，我宁愿创建一个对象，`JPanel`因为它可以添加到`JFrame`/`JApplet`中。在您的情况下，只需添加`ImagePanel`到任一顶级容器。

*   I/O 流没有为`applets`.

*   无法`applet`访问用户硬盘上的文件。

[在这里](http://www.developer.com/open/article.php/791151/Java-Applet-Basics.htm)阅读更多

# javascript - “this”在“on..”属性中的函数内部指的是什么？

> ID：15649338
> 
> 赞同：1
> 
> 时间：2013-03-26T23:31:50.180
> 
> 标签：javascript

`<td id='xyz' onmouseover='doIt(this)'...` 例如，和 之间有什么区别`<td id='xyz' onmouseover='doIt()'...`。是`this`DOM元素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:32:40.777

浏览器调用构造的处理函数，以便`this`引用事件所针对的 DOM 元素。因此，`this`它只是对出现此类属性的 DOM 元素的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:32:48.120

在示例中，`this`指的是处理程序绑定到的 DOM 元素。我建议阅读[quirksmode.org 上的优秀文章](http://www.quirksmode.org/js/introevents.html)，其中解释了这一点以及更多关于事件处理的内容。

> `<td id='xyz' onmouseover='doIt(this)'...`和有什么区别`<td id='xyz' onmouseover='doIt()'...`

在第一种情况下，您将参数传递给函数，这是一个 DOM 元素，在第二种情况下，您没有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T23:32:56.317

将`this`引用 DOM 元素，在您的示例中为`td`DOM 元素。

查看[有关事件处理程序的 MDN 页面以](https://developer.mozilla.org/en-US/docs/DOM_Client_Object_Cross-Reference/DOM_Events)获取更多信息，特别是有关[内联事件处理程序](https://developer.mozilla.org/en-US/docs/DOM_Client_Object_Cross-Reference/DOM_Events#Inline)的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T23:55:25.860

你问“有什么区别”。不同之处在于，在第一种情况下，调用是从执行上下文进行的，其中是对元素的引用，并且该引用作为第一个参数`this`传递给。`doIt`在第二种情况下，不传递任何参数。

现在为什么。

当一个事件到达一个元素时，相关的处理程序将查看是否有任何代码要运行。如果存在，它将创建一个新的执行上下文，就像在函数代码中一样，其作用域链上的全局对象和`this`绑定设置为元素。然后它将执行代码。所以在处理程序的执行上下文中，当代码：

```
doIt(this) 
```

被执行，`this`引用元素。请注意，由于`this`未在对 的调用中设置`doIt()`，因此`this`它将在非严格模式下默认为全局对象，或者在严格模式下保持未定义。

# java - 覆盖方法

> ID：15649341
> 
> 赞同：-7
> 
> 时间：2013-03-26T23:32:07.397
> 
> 标签：java, methods, overriding

我想帮助解决他的问题。我在这个话题上找不到任何东西。（也许我正在寻找错误的东西）

定义一个名为 B 的 C 子类，它覆盖方法`m1()`，以便它返回 m 和 n 之间的差异。

```
public class C
{
    private int m;
    private int n;

    public C(int mIn, int nIn)
    {
        m = mIn;
        n = nIn;
    }
    public int m1()
    {
        return m+n;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:35:11.690

首先，`m`需要`n`是`protected`，不是`private`（`protected`是默认值）。然后只需执行以下操作：

```
public class B extends C {
    public int m1() { return m - n; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:37:25.160

你说，你不能改变`C`类，因为`m`and `n`are`private`并且`C`没有任何 getter 和 setter，你实际上*不能*在你的 subclass 中使用`m`or 。你可以做的是用它自己的和初始化你的类。像这样的东西：`n``B``B``m``n`

```
public class B extends C{
    private int bm;
    private int bn;

    public B(int mIn, int nIn){
       super(mIn,nIn);
       this.bm=mIn;
       this.bn=nIn;
    }

    @Override
    public int m1(){
       // and then you can use the B's n and m
       return this.bm - this.bn;
    }
} 
```

然后你可以做这样的事情：

```
C myClass = new B( 1, 2);
int difference = B.m1(); 
```

**但是**，如果`C`有任何不同的类，这可能不起作用。当您不允许更改`C`时，在正常情况下，您甚至都不知道`C`确切的样子，尤其是不知道它具有变量`m`，`n`或者它们是否在`C`.

# iphone - 如何在 UINavigationBar 下方添加视图

> ID：15649342
> 
> 赞同：2
> 
> 时间：2013-03-26T23:32:07.837
> 
> 标签：iphone, ios, ios6, uinavigationcontroller, uinavigationbar

好吧，在深入深入 iOS 私有类的深渊与追求终极可重用代码之间有一条很好的界限。

我想在 UINavigationBar 下方有一个大约 40 像素高度的任意 UIView。现在，通常这可以扔在封闭的视图中，但我希望这个 UIView与 UINavigationBar*保持一致。*因此，当用户向下钻取不同的视图时，导航栏下方的 UIView 将保持存在。

我尝试构建一个容器 UIViewController，它将作为 RootViewController 放置在 UINavigationController 中，但这无济于事，因为当用户推动新视图时，我的容器视图滑出，并且我的持久栏随之而来。

如果我将 UINavigationController 放在 UIViewController 中，则可以覆盖我想要的 UIView 栏，但内部视图似乎仍然没有正确更改它们的框架，以及当视图被推送或弹出导航堆栈时，视图动画效果不佳（更改它们的 Y 位置以及移出屏幕，因为 UINavigationController 不知道它们在屏幕下方的新 Y 位置。）

所以，我研究了 UINavigationController 的子类化。我知道，它说“**此类不用于子类化。** ”，但总是有例外。这个子类将简单地在导航栏下方添加持久 UIView，调整内容部分的大小（正常视图将出现的地方），一切都会正常工作。

但是在玩了 ObjC 运行时类之后，我找不到可以调整的魔法变量来让它工作（UINavigationController 的 _containerView 就是这样一个变量）。

最好的方法是什么？有没有比复制和粘贴代码更好的方法来使这个 Bar 进入将显示它的所有 ViewController 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T02:42:10.110

我猜您正在寻找显示在导航栏下方的上传进度条或类似的东西，无论您去哪个视图，它都会与您同在。几周前我刚刚实现了这个，但有一个额外的警告——我们使用的是 IIViewDeck，所以我们还必须能够处理整个 UINavigationController 的变化。

我所做的是将视图添加为导航栏的子视图。我的导航栏和导航控制器都是子类（并且应用程序已顺利提交到 App Store）。起初我这样做是因为我需要在没有帮助的情况下自定义导航栏，`UIAppearance`但现在它似乎是不断给予的礼物，因为它为我提供了相当多的灵活性来完成诸如此类的任务。

1.  创建自定义 UINavigationController 和 UINavigationBar
2.  如果您需要处理触摸，则必须实现`hitTest:withEvent`- 我也在下面包含了该代码。
3.  如果您有一个具有更改`UINavigationController`视图的应用程序（例如选项卡栏应用程序，或者具有可让您更改`UINavigationController`位于中心的侧边菜单），我实现了 KVO 来监视中心视图控制器，以便进度视图可以“跟随”它周围。代码也在下面。

这就是我创建自定义 UINavigationController 和 UINavigationBar 的方式：

```
+ (ZNavigationController *)customizedNavigationController
{
 //This is just a regular UINavigationBar subclass - doesn't have to have any code but I personally override the pop/push methods to call my own flavor of viewWill/Did/Appear/Disappear methods - iOS has always been a bit finicky about what gets called when
    ZNavigationController *navController = [[ZNavigationController alloc] initWithNibName:nil bundle:nil];

    // Ensure the UINavigationBar is created so that it can be archived. If we do not access the
    // navigation bar then it will not be allocated, and thus, it will not be archived by the
    // NSKeyedArchvier.
    [navController navigationBar];

    // Archive the navigation controller.
    NSMutableData *data = [NSMutableData data];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:navController forKey:@"root"];
    [archiver finishEncoding];

    // Unarchive the navigation controller and ensure that our UINavigationBar subclass is used.
    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
    [unarchiver setClass:[ZNavigationBar class] forClassName:@"UINavigationBar"];
    ZNavigationController *customizedNavController = [unarchiver decodeObjectForKey:@"root"];
    [unarchiver finishDecoding];

    // Modify the navigation bar to have a background image.
    ZNavigationBar *navBar = (ZNavigationBar *)[customizedNavController navigationBar];

    [navBar setTintColor:kZodioColorBlue];
    [navBar setBackgroundImage:[UIImage imageNamed:@"Home_TopBar_RoundCorner_withLogo"] forBarMetrics:UIBarMetricsDefault];

    return customizedNavController;
} 
```

现在您已经有了自己的自定义`ZNavigationBar`（这些是我的代码中的实际名称 - 很难通过并全部更改它们）您实现了触摸处理 - 变量名称非常容易解释 - 我想检测“左侧”中的触摸此进度条的“附件视图”、“主区域”或“右附件视图”：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    DDLogVerbose(@"Got a touch at point X: %f Y: %f", point.x, point.y);

 //First check if the progress view is visible and touch is within that frame
    if ([[JGUploadManager sharedManager] progressViewVisible] &&
        CGRectContainsPoint([[JGUploadManager sharedManager] uploadProgressView].frame, point))
    {
 //Modified frame - have to compensate for actual position of buttons in the view from the standpoint of the UINavigationBar. Can probably use another/smarter method to do this.
        CGRect modifiedCancelButtonFrame = [[JGUploadManager sharedManager] uploadProgressView].leftAccessoryFrame;
        modifiedCancelButtonFrame.origin.y += [[JGUploadManager sharedManager] uploadProgressView].leftAccessoryView.superview.frame.origin.y;

 //Do the same thing for the right view
        CGRect modifiedRetryButtonFrame = [[JGUploadManager sharedManager] uploadProgressView].rightAccessoryFrame;
        modifiedRetryButtonFrame.origin.y += [[JGUploadManager sharedManager] uploadProgressView].rightAccessoryView.superview.frame.origin.y;

 //Touch is on the left button
        if ([[JGUploadManager sharedManager] progressViewVisible] &&
            [[JGUploadManager sharedManager] uploadProgressView].leftAccessoryView &&
            CGRectContainsPoint(modifiedCancelButtonFrame, point))
        {
            return [[JGUploadManager sharedManager] uploadProgressView].leftAccessoryView;
        }

 //Touch is on the right button
        else if ([[JGUploadManager sharedManager] progressViewVisible] &&
                 [[JGUploadManager sharedManager] uploadProgressView].rightAccessoryView &&
                 CGRectContainsPoint(modifiedRetryButtonFrame, point))
        {
            return [[JGUploadManager sharedManager] uploadProgressView].rightAccessoryView;
        }

 //Touch is in the main/center area
        else
        {
            return [[JGUploadManager sharedManager] uploadProgressView];
        }

    }

 //Touch is not in the progress view, pass to super
       else
    {
        return [super hitTest:point withEvent:event];
    }
} 
```

现在是“跟随”导航控制器的 KVO 部分。在某处实现 KVO - 我使用单例“上传管理器”类，并将其放在该类的 init 中，但这取决于您的应用程序的设计：

```
ZRootViewController *rootViewController = ((JGAppDelegate*)[UIApplication sharedApplication].delegate).rootViewDeckController;
[rootViewController addObserver:sharedManager
                     forKeyPath:@"centerController"
                        options:NSKeyValueObservingOptionNew
                        context:nil]; 
```

然后当然实现这个：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    DDLogVerbose(@"KVO shows something changed: %@", keyPath);

    if ([keyPath isEqualToString:@"centerController"])
    {
        DDLogVerbose(@"Center controller changed to: %@", object);
        [self centerViewControllerChanged];
    }

} 
```

最后是`centerViewControllerChanged`函数：

```
- (void)centerViewControllerChanged
{
    ZRootViewController *rootViewController = ((JGAppDelegate*)[UIApplication sharedApplication].delegate).rootViewDeckController;

    ZNavigationController *centerController = (ZNavigationController *)rootViewController.centerController;

    //Check if the upload progress view is visible and/or active
    if (self.uploadProgressView.frame.origin.y > 0 && self.uploadProgressView.activityIndicatorView.isAnimating)
    {
        [centerController.navigationBar addSubview:self.uploadProgressView];
    }

    //Keep weak pointer to center controller for other stuff
    DDLogVerbose(@"Setting center view controller: %@", centerController);
    self.centerViewController = centerController;
} 
```

如果我误解了您的问题，那么我只是输入了世界上最长的 SO 答案，但徒劳无功。我希望这会有所帮助，如果有任何部分需要澄清，请告诉我！

# c# - XElement.CreateNavigator 与 XDocument.CreateNavigator

> ID：15649344
> 
> 赞同：1
> 
> 时间：2013-03-26T23:32:12.357
> 
> 标签：c#, xml

鉴于此 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>  
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>      
  <mySection>
    <NetworkShare folder="\\myFolder\v1" />        
  </mySection>  
</configuration> 
```

以下代码不起作用（给出空白输出）：

```
var navigator = XElement.Load(ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None).FilePath).CreateNavigator();
            var q = navigator.Select("/configuration/mySection/NetworkShare");
            if (q.Count == 1) // q.Count is 0
            {
                q.MoveNext();
                Console.WriteLine(q.Current.GetAttribute("folder", navigator.Prefix));
            } 
```

但是这段代码有效（正确打印出文件夹）：

```
var navigator = XDocument.Load(ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None).FilePath).CreateNavigator();
            var q = navigator.Select("/configuration/mySection/NetworkShare");
            if (q.Count == 1) // q.Count is 1
            {
                q.MoveNext();
                Console.WriteLine(q.Current.GetAttribute("folder", navigator.Prefix));
            } 
```

这是.net中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:31:35.070

问题是对 an 的查询与对 an`XDocument`的查询处于不同的上下文中`XElement`。对于 a `XDocument`，它代表整个文档。它的子元素是根元素（`configuration`在这种情况下）。对于 a `XElement`，它代表元素本身。

因此，当您通过 加载文件时`XElement.Load()`，查询将与该元素相关。通过 加载文件`XDocument.Load()`，查询将与文档相关。

因此，当您查询 时`/configuration/...`，由于`XElement`您当前位于`configuration`元素中，因此它显然没有`configuration`子元素，因此查询不会产生任何结果。`XDocument`另一方面，它按预期工作。

# jquery - 访问一次子级，然后在 jQuery（1.9.x 及更多）中重用父级

> ID：15649349
> 
> 赞同：2
> 
> 时间：2013-03-26T23:32:31.107
> 
> 标签：jquery, find, parent

我正在寻找更好的工作来完成这项工作，我想填写点击图像的标题，我相信有更好的解决方案。

谢谢你的回答，艾伦。（法文）

jQuery是：

```
$bImg
  .find('.title, .caption')
    .fadeIn()
  .parent()
  .find('.title')
    .text(title)
  .parent()
  .find('.caption')
    .text(caption); 
```

HTML 是：

```
<div class="big-image carousel">
   <img src="http://placehold.it/450x240/FFFFCC">
   <div class="title">ThIs PhOtO</div>
   <div class="caption">Itaque earum rerum hic in tenetur</div>
</div> 
```

PS：`$bImg = $('.big-image');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:36:19.283

您可以使用[.filter()](http://api.jquery.com/filter/)和[.siblings()](http://api.jquery.com/siblings/)

```
$bImg
  .find('.title, .caption')
    .fadeIn()
  .filter('.title') // gets .title out of the collection
    .text(title)
  .siblings('.caption')
    .text(caption); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:49:01.370

```
$('.title, .caption', '.big-image').fadeIn().text(function() { 
    return $(this).is('.title') ? title : caption; 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:36:04.383

一种更有效的方法是：

```
$bImg.find('.title').text(title).fadeIn();
$bImg.find('.caption').text(caption).fadeIn(); 
```

除非您绝对需要在一行中执行此操作，否则应该首选上述方法，因为它仅找到每个元素一次并将缓存的对象用于所有后续使用 - 与原始代码不同，它至少重新获取所有项目 2 次（ parent - 3 次，.title - 2 次和 .caption - 2 次）

# java - 为什么 websphere 不能识别我的网络服务

> ID：15649350
> 
> 赞同：0
> 
> 时间：2013-03-26T23:32:37.777
> 
> 标签：java, web-services, jax-ws, websphere-7

我一直在使用 websphere 7 和 jaxws 开发网络服务。因此，如果我的网络服务返回一个字符串、整数、整数或浮点数。当我部署它时，websphere 可以识别我的 web 服务，但是如果我将 web 服务更改为返回 java bean；它无法识别我的网络服务。

这是我的代码。界面：

```
import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService
public interface MensajeSMS {
    @WebMethod
    String sendMessage(Long idUsuario, String token, Integer idServicio,
            String mensaje, String contacto, String idMensaje);
} 
```

实施：

```
import javax.jws.WebService;

@WebService(endpointInterface = "bisnet.sms.MensajeSMS")
public class MensajeSMSImpl implements MensajeSMS {

    @Override
    public String sendMessage(Long idUsuario, String token, Integer idServicio,
            String mensaje, String contacto, String idMensaje) {
        return "Hola " + idUsuario +" "+ "tu token con Bisnet Corporativo será: " + token
                +". El número telefónico que registraste es: " + idServicio
                + " y tu nombre es: " +mensaje +" " +contacto+ " " +idMensaje ;
    }

} 
```

我的请求：

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "sendMessage", namespace = "http://sms.bisnet/")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sendMessage", namespace = "http://sms.bisnet/")
public class SendMessage {

    @XmlElement(name = "arg0", namespace = "")
    private Long idUsuario;

    @XmlElement(name = "arg1", namespace = "")
    private String token;

    @XmlElement(name = "arg2", namespace = "")
    private Integer idServicio;

    @XmlElement(name = "arg3", namespace = "")
    private String mensaje;

    @XmlElement(name = "arg4", namespace = "")
    private String contacto;

    @XmlElement(name = "arg5", namespace = "")
    private String idMensaje;

    /**
     * @return the idUsuario
     */
    public Long getIdUsuario() {
        return idUsuario;
    }

    /**
     * @param idUsuario the idUsuario to set
     */
    public void setIdUsuario(Long idUsuario) {
        this.idUsuario = idUsuario;
    }

    /**
     * @return the token
     */
    public String getToken() {
        return token;
    }

    /**
     * @param token the token to set
     */
    public void setToken(String token) {
        this.token = token;
    }

    /**
     * @return the idServicio
     */
    public Integer getIdServicio() {
        return idServicio;
    }

    /**
     * @param idServicio the idServicio to set
     */
    public void setIdServicio(Integer idServicio) {
        this.idServicio = idServicio;
    }

    /**
     * @return the mensaje
     */
    public String getMensaje() {
        return mensaje;
    }

    /**
     * @param mensaje the mensaje to set
     */
    public void setMensaje(String mensaje) {
        this.mensaje = mensaje;
    }

    /**
     * @return the contacto
     */
    public String getContacto() {
        return contacto;
    }

    /**
     * @param contacto the contacto to set
     */
    public void setContacto(String contacto) {
        this.contacto = contacto;
    }

    /**
     * @return the idMensaje
     */
    public String getIdMensaje() {
        return idMensaje;
    }

    /**
     * @param idMensaje the idMensaje to set
     */
    public void setIdMensaje(String idMensaje) {
        this.idMensaje = idMensaje;
    }

} 
```

最后是我的回应：

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "sendMessageResponse", namespace = "http://sms.bisnet/")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sendMessageResponse", namespace = "http://sms.bisnet/")
public class SendMessageResponse {

    @XmlElement(name = "return", namespace = "")
    private String _return;

    /**
     *
     * @return
     *     returns String
     */
    public String getReturn() {
        return this._return;
    }

    /**
     *
     * @param _return
     *     the value for the _return property
     */
    public void setReturn(String _return) {
        this._return = _return;
    }

} 
```

它现在的工作方式，但是如果我更改接口、实现和响应，它们会返回一个 java bean 而不是字符串；websphere 无法识别我的网络服务，因此它不会显示或生成 wsdl。

有谁知道为什么会这样？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:46:37.640

如果您的 Web 服务或服务定义有问题，WebSphere 将在应用程序启动期间抛出错误。通常你可以在你的`SystemOut.log`.

如果您运行 String-version，您应该会在同一位置找到服务已成功启动的日志。

# scheme - 方案：功能辅助

> ID：15649352
> 
> 赞同：0
> 
> 时间：2013-03-26T23:32:47.960
> 
> 标签：scheme

我对Scheme相当陌生，并且我正在考虑一种方法来递归地对给定列表中的每个数字进行立方，这就是我所拥有的：

```
(define (cube-it-list lst)
  (cond [(empty? lst) empty]
        [else (cons (cube-it (first lst)) 
                    (cube-it-list (rest lst)))])) 
```

但是每次我执行程序时都会出错，我不确定为什么有人可以帮助或想出更好更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:03:31.460

该函数看起来不错，可能问题出在`cube-it`过程或您调用它的方式上。例如，这有效：

```
(define (cube-it x)
  (* x x x))

(define (cube-it-list lst)
  (cond
    [(empty? lst)
     empty]
    [else
     (cons (cube-it (first lst))
           (cube-it-list (rest lst)))]))

(cube-it-list '(1 2 3 4 5))
=> '(1 8 27 64 125) 
```

至于“更好更有效的方法”，请坚持@svk的回答和[`map`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._map%29%29)输入列表，这是解决此类问题的惯用方法，涉及将函数应用于输入列表中的每个元素，生成带有结果的输出列表：

```
(map cube-it '(1 2 3 4 5))
=> '(1 8 27 64 125) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:39:38.337

你定义了cube-it函数吗？当我这样做时，您的代码对我有用。

在任何情况下，Scheme 中都有一个结构正是为了这种事情：通过对每个元素应用转换来从另一个列表中创建一个列表。它被称为地图：

```
(map cube-it '(1 2 3 4 5))
=> '(1 8 27 64 125) 
```

您在这里基本上重新发明了它，除了 map 不限于单个转换操作 - 您将要用作其第一个参数的函数传递给它。

（注意，如果您被明确告知要实现*递归*解决方案，则应坚持使用原始代码。map 将在内部使用递归，但使用 map 意味着您自己的代码不需要在这种情况下涉及任何递归。）

# multithreading - 使用进程而不是线程有什么意义？

> ID：15649358
> 
> 赞同：1
> 
> 时间：2013-03-26T23:33:24.153
> 
> 标签：multithreading, process, nstask

今天我有一个理论问题给你们。我刚刚加入了我公司的第一个大型软件项目。

对于某些任务，例如复制带有一些额外验证的文件，公司编写命令行工具，并使用 NSTask 从其 Objective-C 源代码中调用它们，NSTask 将命令行工具作为额外进程执行。

我真的不明白这背后的意义是什么。

为什么我要创建一个单独的命令行工具来从我的代码中调用它，而不是仅仅在单独的线程中调用代码？

我唯一想到的是一个进程有一个独立的地址空间，如果命令行工具崩溃，我的应用程序可能不会崩溃。

我听说这是很常见的事情，所以我很想听听一些关于这样做有什么好处的意见。提前致谢！

# django - 在同一个查询集上使用 values_list 和 extra

> ID：15649370
> 
> 赞同：0
> 
> 时间：2013-03-26T23:34:49.033
> 
> 标签：django

我有一些在查询集上调用 values_list 的现有代码。我需要在这个查询集中使用额外的东西。如果我在 values_list 之前调用 extra，那么额外的东西就会从 values_list 之后的查询中消失。如果我在调用 values_list 之后调用 extra ，它似乎必须生效 - 额外的东西不在查询中。

这是一些调试器输出。在 values_list 之前的额外内容 - 然后就消失了：

```
-> queryset = queryset.extra(select={field['name'] : field['name']})
(Pdb) n
-> queryset = queryset.values_list(*self.get_search_columns())
(Pdb) print queryset.query
SELECT (top-bottom) AS `top-bottom`,  ....
(Pdb) n
-> data = list(queryset)
(Pdb) print queryset.query
SELECT `data_cst`.`image_measurer_id`, `data_cst`.`image_pr_top_id`,
`data_target`.`name`, `data_recipe`.`name`, `data_cst`.`ep`,
`data_lot`.`name`, `data_cst`.`date_time`, `data_cst`.`bottom` FROM
`data_cst` INNER JOIN `data_target` ON (`data_cst`.`target_name_id` =
`data_target`.`id`) INNER JOIN `data_recipe` ON
(`data_cst`.`recipe_id` = `data_recipe`.`id`) INNER JOIN `data_lot` ON
(`data_cst`.`lot_id` = `data_lot`.`id`) WHERE (`data_cst`.`date_time`
<= 2013-03-26 23:59:59  AND `data_cst`.`date_time` >= 2010-03-26
00:00:00 ) ORDER BY `data_cst`.`date_time` DESC 
```

但是，如果我颠倒顺序，额外的内容根本不会对查询产生影响：

```
-> queryset = queryset.values_list(*self.get_search_columns())
(Pdb) n
-> queryset = queryset.extra(select={field['name'] : field['name']})
(Pdb) print queryset.query
SELECT `data_cst`.`image_measurer_id`, `data_cst`.`image_pr_top_id`,
`data_target`.`name`, `data_recipe`.`name`, `data_cst`.`ep`,
`data_lot`.`name`, `data_cst`.`date_time`, `data_cst`.`bottom` FROM
`data_cst` INNER JOIN `data_target` ON (`data_cst`.`target_name_id` =
`data_target`.`id`) INNER JOIN `data_recipe` ON
(`data_cst`.`recipe_id` = `data_recipe`.`id`) INNER JOIN `data_lot` ON
(`data_cst`.`lot_id` = `data_lot`.`id`) WHERE (`data_cst`.`date_time`
<= 2013-03-26 23:59:59  AND `data_cst`.`date_time` >= 2010-03-26
00:00:00 ) ORDER BY `data_cst`.`date_time` DESC
{Pdb) n
-> data = list(queryset)
(Pdb) print queryset.query
SELECT `data_cst`.`image_measurer_id`, `data_cst`.`image_pr_top_id`,
`data_target`.`name`, `data_recipe`.`name`, `data_cst`.`ep`,
`data_lot`.`name`, `data_cst`.`date_time`, `data_cst`.`bottom` FROM
`data_cst` INNER JOIN `data_target` ON (`data_cst`.`target_name_id` =
`data_target`.`id`) INNER JOIN `data_recipe` ON
(`data_cst`.`recipe_id` = `data_recipe`.`id`) INNER JOIN `data_lot` ON
(`data_cst`.`lot_id` = `data_lot`.`id`) WHERE (`data_cst`.`date_time`
<= 2013-03-26 23:59:59  AND `data_cst`.`date_time` >= 2010-03-26
00:00:00 ) ORDER BY `data_cst`.`date_time` DESC 
```

有没有办法在同一个查询集上同时使用 values_list 和 extra ？

这是一个非常简单的示例，表明它不起作用：

```
(Pdb) CST.objects.all().extra(select={'ep': 1}).values_list('image_measurer_id')
[(86456L,), (86454L,), (86452L,), (86450L,), (86448L,), (86446L,),
(86444L,), (86442L,), (86440L,), (86438L,), (86436L,), (86434L,),
(86432L,), (86430L,), (86428L,), (86426L,), (86424L,), (86422L,),
(86420L,), (86418L,), '...(remaining elements truncated)...'] 
```

这应该每行返回 2 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:29:16.653

您需要在 values_list 中包含您的额外选择。

例如

```
CST.objects.extra(select={'ep': 1}).values_list('image_measurer_id','ep') 
```

# ruby - Chef 和 ruby ：如何将数组转换为集合

> ID：15649372
> 
> 赞同：13
> 
> 时间：2013-03-26T23:34:58.923
> 
> 标签：ruby

我有一个看起来像这样的数组：

```
nodes = ['server1','server1','server2'] 
```

在厨师食谱中，我需要在传递给模板 erb 之前转换为一组。我怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-26T23:38:07.313

This pattern works with Set, Matrix, JSON etc.; it is the first thing to try.

```
require 'set'
nodes = ['server1','server1','server2']
p nodes.to_set # #<Set: {"server1", "server2"}> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T23:49:23.627

如果你想让它唯一（因为一个集合是唯一的）但仍然是一个数组，你可以使用 |[]

```
nodes = ['server1','server1','server2']
nodes|[] 
# or nodes |= [] # for inplace operation

# => ["server1", "server2" ] 
```

# c# - Android 上的 C#：Xamarin 还是 Unity？

> ID：15649376
> 
> 赞同：11
> 
> 时间：2013-03-26T23:35:04.673
> 
> 标签：c#, android, unity3d, xamarin

我是一名学生，应该编写一个 Android 应用程序，可能是一个游戏。我有机会选择我的编程语言。我觉得 JAVA 还不错，但不知何故我更喜欢 C#。但是，由于 Android 本身不支持 C#，因此我正在寻找一种实现它的方法。

我找到了很多关于 Xamarin 的建议，但它不是免费的。我理解，开发人员应该为他们的工作获得报酬，但由于我是一名学生并且不会从应用程序中获得任何利润，所以在我看来支付任何费用都是不公平的。我遇到过 Unity，它是免费的，但与 Xamarin 相比，用户反馈很少。

所以，我想请教您的建议 - Unity 是否足够好，还是我应该牺牲一些钱并购买 Xamarin？或者还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T01:07:53.327

如果您要选择使用 Xamarin.Android，请不要忘记[Xamarin 提供 Student Licenses](http://support.xamarin.com/customer/portal/articles/177042-do-you-have-any-student-or-academic-pricing-)。这些目前售价99美元。

另一方面，您可能还想研究[MonoGame](http://www.monogame.net/)，它本质上就是所谓的 XNA。使用 MonoGame 或 Unity，您应该能够制作一些不错的游戏。

“大小上限为 32k 的 IL 代码”不是实际的 IL 代码，而是您项目的输出文件夹中的内容。如果你要创建一个带有精灵和声音等的游戏，除非你从网络或类似的地方加载这些资源，否则 32k 不会达到很远。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T00:57:44.257

我从未尝试过 Xamarin，但我确实尝试过 Unity，以便制作一个简单的跨平台游戏。Unity 有 1 个月的试用期，所以如果您的项目短于 1 个月，我会推荐它。

有许多用于创建 2D 游戏的框架。我使用的是[Futile](https://github.com/MattRix/Futile)，但它仍处于 alpha 阶段，因此您可能想尝试另一个。

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T00:06:36.110

Xamarin 现在有一个免费计划，你应该试一试。当然有限制，但对于您的学生项目可能没问题。我使用了早期版本的 monodroid，无论您使用的是 osx 还是 windows，我都非常推荐它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T00:04:37.567

Xamarin 有一个免费的入门包，可以在他们的[android 页面上看到](http://xamarin.com/monoforandroid)

向下滚动到底部以查看下载链接和您可以获得的不同软件包。应该适合学校项目。

# boost - 初始化自定义边类的内边索引

> ID：15649377
> 
> 赞同：1
> 
> 时间：2013-03-26T23:35:09.100
> 
> 标签：boost, graph

我对 BGL（增强图形库）非常陌生。当我尝试使用平面地图遍历时，我遇到了以下编译问题，任何人都可以向我解释我做错了什么吗？导致错误的代码是：

```
put(e_index, *ei, edge_count++);

planar_face_traversal(g, &embedding[0], v_vis);

planar_face_traversal(g, &embedding[0], e_vis);

/usr/include/boost/property_map/property_map.hpp:361: error: no match for 'operator=' in '(&((const boost::adj_list_edge_property_map<boost::undirected_tag, boost::detail::error_property_not_found, boost::detail::error_property_not_found&, long unsigned int, boost::property<boost::edge_bundle_t, Edge, boost::no_property>, boost::edge_index_t>&)pa))->boost::adj_list_edge_property_map<Directed, Value, Ref, Vertex, Property, Tag>::operator[] [with Directed = boost::undirected_tag, Value = boost::detail::error_property_not_found, Ref = boost::detail::error_property_not_found&, Vertex = long unsigned int, Property = boost::property<boost::edge_bundle_t, Edge, boost::no_property>, Tag = boost::edge_index_t, boost::adj_list_edge_property_map<Directed, Value, Ref, Vertex, Property, Tag>::key_type = boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>](k) = v'

/usr/include/boost/property_map/property_map.hpp:391: error: no match for 'operator+' in '((const boost::iterator_property_map<__gnu_cxx::__normal_iterator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >*, std::vector<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::allocator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > > > > >, boost::adj_list_edge_property_map<boost::undirected_tag, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, long unsigned int, const boost::property<boost::edge_bundle_t, Edge, boost::no_property>, boost::edge_index_t>, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >&>*)this)->boost::iterator_property_map<__gnu_cxx::__normal_iterator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >*, std::vector<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::allocator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > > > > >, boost::adj_list_edge_property_map<boost::undirected_tag, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, long unsigned int, const boost::property<boost::edge_bundle_t, Edge, boost::no_property>, boost::edge_index_t>, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >&>::iter + boost::get [with PropertyMap = boost::adj_list_edge_property_map<boost::undirected_tag, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, long unsigned int, const boost::property<boost::edge_bundle_t, Edge, boost::no_property>, boost::edge_index_t>, Reference = const boost::detail::error_property_not_found&, K = boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>]((*(const boost::put_get_helper<const boost::detail::error_property_not_found&, boost::adj_list_edge_property_map<boost::undirected_tag, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, long unsigned int, const boost::property<boost::edge_bundle_t, Edge, boost::no_property>, boost::edge_index_t> >*)(&((const boost::iterator_property_map<__gnu_cxx::__normal_iterator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >*, std::vector<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::allocator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > > > > >, boost::adj_list_edge_property_map<boost::undirected_tag, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, long unsigned int, const boost::property<boost::edge_bundle_t, Edge, boost::no_property>, boost::edge_index_t>, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >&>*)this)->boost::iterator_property_map<__gnu_cxx::__normal_iterator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >*, std::vector<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::allocator<std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > > > > >, boost::adj_list_edge_property_map<boost::undirected_tag, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, long unsigned int, const boost::property<boost::edge_bundle_t, Edge, boost::no_property>, boost::edge_index_t>, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >, std::map<long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>, std::less<long unsigned int>, std::allocator<std::pair<const long unsigned int, boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int> > > >&>::index)), (*(const boost::detail::edge_desc_impl<boost::undirected_tag, long unsigned int>*)(& v)))'

#include <iostream>
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/properties.hpp>
#include <boost/graph/graph_traits.hpp>
#include <boost/property_map/property_map.hpp>
#include <boost/ref.hpp>
#include <vector>

#include <boost/graph/planar_face_traversal.hpp>
#include <boost/graph/boyer_myrvold_planar_test.hpp> using namespace boost;

// Some planar face traversal visitors that will // print the vertices and edges on the faces

class Vertex{ public:
    int i;//just some variable
    Vertex(){}
    Vertex(int val){
        i = val;
    } };

class Edge{ public:
    int i;//just some variable
    Edge(){}
    Edge(int val){
        i = val;
    } };

struct output_visitor : public planar_face_traversal_visitor {   void begin_face() { std::cout << "New face: "; }   void end_face() { std::cout << std::endl; } };

struct vertex_output_visitor : public output_visitor {   void next_vertex(Vertex v)   {
    std::cout << v.i << " ";   } };

struct edge_output_visitor : public output_visitor {   void next_edge(Edge e)   {
    std::cout << e.i << " ";   } };

int main(int argc, char** argv) {

  typedef adjacency_list
    < vecS,
      vecS,
      undirectedS,
      Vertex,
      Edge
    >
    graph;

  // Create a graph - this is a biconnected, 3 x 3 grid.   // It should have four small (four vertex/four edge) faces and   // one large face that contains all but the interior vertex   graph g;

  typedef boost::graph_traits<graph>::vertex_descriptor VertexDescriptor;   typedef boost::graph_traits<graph>::edge_descriptor EdgeDescriptor;

  VertexDescriptor v0 = add_vertex(g);   VertexDescriptor v1 = add_vertex(g);   VertexDescriptor v2 = add_vertex(g);   VertexDescriptor v3 = add_vertex(g);   VertexDescriptor v4 = add_vertex(g);   add_edge(v0,v1,g);   add_edge(v1,v2,g);   add_edge(v2,v3,g);   add_edge(v3,v4,g);   add_edge(v4,v0,g);

  add_edge(v0,v2,g);   add_edge(v0,v3,g);

  add_edge(v1,v4,g);   add_edge(v1,v3,g);

  add_edge(v2, v4, g);

  // Initialize the interior edge index   property_map<graph, edge_index_t>::type e_index = get(edge_index, g);

  graph_traits<graph>::edges_size_type edge_count = 0;   graph_traits<graph>::edge_iterator ei, ei_end;   for(boost::tie(ei, ei_end) = edges(g); ei != ei_end; ++ei)   {
      put(e_index, *ei, edge_count++);
      std::cout << *ei << std::endl;   }

  // Test for planarity - we know it is planar, we just want to   // compute the planar embedding as a side-effect

  typedef std::vector< graph_traits<graph>::edge_descriptor > vec_t;   std::vector<vec_t> embedding(num_vertices(g));   std::cout <<  num_vertices(g) << std::endl;   if (boyer_myrvold_planarity_test(boyer_myrvold_params::graph = g,
                                   boyer_myrvold_params::embedding =
                                       &embedding[0]
                                   )
      )
    std::cout << "Input graph is planar" << std::endl;   else
    std::cout << "Input graph is not planar" << std::endl;

  std::cout << std::endl << "Vertices on the faces: " << std::endl;   vertex_output_visitor v_vis;   planar_face_traversal(g, &embedding[0], v_vis);

  std::cout << std::endl << "Edges on the faces: " << std::endl;   output_visitor e_vis;   planar_face_traversal(g, &embedding[0], e_vis);

  return 0; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:55:58.600

您的代码有几个问题。导致编译器错误的原因是您的图形没有内部`edge_index`属性，而您正在尝试使用它。它可以很容易地解决改变你`EdgeProperty`的`property<edge_index_t,std::size_t,Edge>`。你的也有问题`xxx_output_visitors`。`next_vertex`并`next_edge`分别期望一个 vertex_descriptor 和一个 edge_descriptor。我在下面更改了它们以做一些“有用”的事情。最后一个问题是`boyer_myrvold_planarity_test`为您的图表返回 false。由于我真的对问题域一无所知，我只是用[此处](http://www.boost.org/libs/graph/doc/boyer_myrvold.html)找到的图表更改了您的图表。

**更新：**如果你想避免使用`property<edge_index_t,std::size_t,Edge>`你可以简单地创建一个外部属性映射，然后将它传递给`planar_face_traversal`. `boyer_myrvold_planarity_test`除非您还使用参数，否则不需要传递边缘索引图`kuratowski_subgraph`。

```
#include <iostream>
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/properties.hpp>
#include <boost/graph/graph_traits.hpp>
#include <boost/property_map/property_map.hpp>
#include <boost/graph/iteration_macros.hpp>
#include <boost/ref.hpp>
#include <vector>

#include <boost/graph/planar_face_traversal.hpp>
#include <boost/graph/boyer_myrvold_planar_test.hpp> 

using namespace boost;

// Some planar face traversal visitors that will 
// print the vertices and edges on the faces

class Vertex
{ 
   public:
    int i;//just some variable
    Vertex(){}
    Vertex(int val){
        i = val;
    } 
};

class Edge
{ 
   public:
    int i;//just some variable
    Edge(){}
    Edge(int val){
        i = val;
    } 
};

typedef adjacency_list
    < vecS,
      vecS,
      undirectedS,
      Vertex,
      Edge
    >
    graph_type;

struct output_visitor : public planar_face_traversal_visitor 
{   
   void begin_face() { std::cout << "New face: "; }   
   void end_face() { std::cout << std::endl; } 
};

struct vertex_output_visitor : public output_visitor 
{   
   vertex_output_visitor(const graph_type& g_):g(g_){}
   template <typename VertexDesc>
   void next_vertex(VertexDesc v)  
   {
      //std::cout << g[v].i << " "; //This would do what you wanted if you initialize "i"
      std::cout << get(vertex_index,g,v) << " ";   
   } 

   const graph_type& g;
};

struct edge_output_visitor : public output_visitor 
{   
   edge_output_visitor(const graph_type& g_):g(g_){}
   template <typename EdgeDesc>
   void next_edge(EdgeDesc e)   
   {
      //std::cout << g[e].i << " "; //This would do what you wanted
      std::cout << source(e,g) << "-" << target(e,g) << " ";   
   } 

   const graph_type& g;
};

int main() {

  // Create a graph - this is a biconnected, 3 x 3 grid.   
  // It should have four small (four vertex/four edge) faces and   
  // one large face that contains all but the interior vertex   
  graph_type g;

  typedef boost::graph_traits<graph_type>::vertex_descriptor VertexDescriptor;   
  typedef boost::graph_traits<graph_type>::edge_descriptor EdgeDescriptor;

  VertexDescriptor A = add_vertex(g);   
  VertexDescriptor B = add_vertex(g);   
  VertexDescriptor C = add_vertex(g);   
  VertexDescriptor D = add_vertex(g);   
  VertexDescriptor E = add_vertex(g);   
  add_edge(A,B,g);   
  add_edge(A,C,g);   
  add_edge(A,D,g);   
  add_edge(A,E,g);   
  add_edge(B,D,g);   
  add_edge(B,E,g);
  add_edge(C,D,g);   
  add_edge(C,E,g);   
  add_edge(D,E,g);   

  typedef std::map<EdgeDescriptor, size_t> EdgeIndexMap;
  EdgeIndexMap mapIndex;
  boost::associative_property_map<EdgeIndexMap> my_edge_index_map(mapIndex);
  graph_traits<graph_type>::edges_size_type current_index=0;
  BGL_FORALL_EDGES(e,g,graph_type)
  {
      put(my_edge_index_map,e,current_index++);
      std::cout << e << std::endl;
  }

  // Test for planarity - we know it is planar, we just want to   
  // compute the planar embedding as a side-effect

  typedef std::vector< graph_traits<graph_type>::edge_descriptor > vec_t;   
  std::vector<vec_t> embedding(num_vertices(g));   
  std::cout <<  num_vertices(g) << std::endl; 

  //if you use the parameter "kuratowski_subgraph" you'll need to pass also my_edge_index_map
  if (boyer_myrvold_planarity_test(boyer_myrvold_params::graph = g,
                                   boyer_myrvold_params::embedding =
                                       &embedding[0]
                                   )
      )
    std::cout << "Input graph is planar" << std::endl;   
  else
    std::cout << "Input graph is not planar" << std::endl;

  std::cout << std::endl << "Vertices on the faces: " << std::endl;   
  vertex_output_visitor v_vis(g);   
  planar_face_traversal(g, &embedding[0], v_vis, my_edge_index_map);

  std::cout << std::endl << "Edges on the faces: " << std::endl;   
  edge_output_visitor e_vis(g);   
  planar_face_traversal(g, &embedding[0], e_vis, my_edge_index_map);

  return 0; 
} 
```

# java - 算法需要帮助

> ID：15649382
> 
> 赞同：1
> 
> 时间：2013-03-26T23:35:28.707
> 
> 标签：java, algorithm, math

我在为我的问题考虑算法时遇到了一些麻烦。我会尽力解释。这只是一个例子。

假设 1000 人中有 3% 的人点击了链接。

所以我需要一种算法，可以将点击随机传播到 1000 多个视图。

很容易将其均匀分布，例如：1000 * .03 = 30，因此每 30 次浏览就会有人点击一个链接。

例如：

```
For (i = 0; i<1000; i++) {
if(i % 30 == 0);
click()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:39:49.540

您实际上需要 30 次点击，还是只需要平均每 1000 次点击 30 次的统计分布？如果您只需要统计分布，那么只需执行`if (Math.random() < 0.03)`. 如果您恰好需要 30 次点击，那么最简单的方法是选择 0 到 999 之间的 30 个随机数，确保没有重复项，然后单击这些索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:38:52.287

You could also create an array of 1000 integers, initialize 30 of them to 1 and the rest 970 to 0, then [shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle) the array randomly and use `array[index from 0 to 999]` to see if a click is needed.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:42:56.757

```
List<Boolean> wasclicked = new ArrayList<Boolean>();
for (int i = 0; i < NUM_CLICKS * 0.03; i++) {
    wasclicked.add(true);
}
for (int i = 0; i < NUM_CLICKS * 0.97; i++) {
    wasclicked.add(false)
}
Collections.shuffle(wasclicked); 
```

您现在有一个随机的布尔值列表，其中 3% 为真。

# java - Liferay - portlet 标题重新加载

> ID：15649384
> 
> 赞同：2
> 
> 时间：2013-03-26T23:35:36.120
> 
> 标签：java, struts, liferay, portlet

我对 portlet 标题有疑问。我的portlet 是在struts 框架中创建的。Portlet 标题由 Liferay UI 管理器设置（所以我猜这些设置存储在 hsql 脚本中，对吧？）。

1.  我选择语言选项；
2.  经过一些操作后，我希望更改 portlet 标题取决于语言版本，但它不起作用；再次重新加载页面后可以看到更改；

我试图实现 StrutsPortlet 类并像这样[Liferay 动态设置标题（renderResponse.setTitle）：设置视图页面的标题名称](https://stackoverflow.com/questions/14133663/liferay-set-title-name-for-view-pages) 它也不起作用。再次重新加载页面后，更改可见。为什么更改不会立即可见？我已阅读（[http://colab.mpdl.mpg.de/mediawiki/images/3/38/PortletsinAction_Final.pdf）“setTitle](http://colab.mpdl.mpg.de/mediawiki/images/3/38/PortletsinAction_Final.pdf)方法仅*在 RenderResponse 接口中定义；您只能在**呈现请求处理阶段***”。什么意思？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T10:40:52.607

您应该使用资源包来本地化 portlet 标题。

**portlet.xml**

```
 <portlet>
    <portlet-name>test-portlet</portlet-name>
    ...
            <resource-bundle>content.test-portlet</resource-bundle>
            ...
</portlet> 
```

**测试portlet.properties**

```
javax.portlet.title=Test Portlet 
```

**测试-portlet_sk.properties**

```
javax.portlet.title=Testovaci Portlet 
```

# css - 如何在网站上的 2 个标题图像之间垂直对齐一些标题文本？

> ID：15649385
> 
> 赞同：0
> 
> 时间：2013-03-26T23:35:47.887
> 
> 标签：css, center, vertical-alignment

这是网址：www.dealflurry.com 我想使用 css。我无法弄清楚如何让标有“Deal Flurry”的标题文本垂直位于其周围 2 个图像之间的中间。文本停留在图像的底部，而不是在中间。我曾尝试将文本和图像放在 div 中，但这并没有像我那样工作。我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:39:49.430

在一个或一个（最好是一个类）中添加`vertical-align: middle;`你的图像，它会修复它。`class``inline style`

下面是使用内联样式的完整更新的标题 div 代码：

```
<div class="header">

<img height="200" src="http://www.dealflurry.com/images/HiRes.jpg" style="vertical-align: middle;">

Deal Flurry

<img height="200" src="http://www.dealflurry.com/images/balloons.jpg" style="vertical-align: middle;">

</div> 
```

# java - 如何将TXT文件写入SD卡？

> ID：15649394
> 
> 赞同：1
> 
> 时间：2013-03-26T23:36:04.757
> 
> 标签：java, android, logfile

```
File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
File logfile = new File(path, "andrometer.txt");
String[] assignArr = new String [7];

assignArr[0]= finalValue + "17";
assignArr[1]= range + "16";
assignArr[2]= activeMode;

if (assignArr.length > 0)
{
    try {
        if (path.canWrite()){
            FileWriter filewriter = new FileWriter(logfile);
            BufferedWriter out = new BufferedWriter(filewriter);
            for (int i1=0; i1<assignArr.length; i1++)
            {
                out.write(assignArr[0] + "\n");
                out.write(assignArr[1] + "\n");
                out.write(assignArr[2] + "\n");
                Toast.makeText(AndroMeter.this, "out: " + assignArr[2], Toast.LENGTH_LONG).show();
            }
            out.close();
        }
    } catch (IOException e) {
        Log.e("TAG", "Could not write file " + e.getMessage());
    }
}; 
```

这段代码几周前还在工作，现在我似乎无法做到。我相信我在清单中拥有正确的权限，我尝试写入根目录而不是特定文件夹，我一直在用虚拟数据代替变量名进行测试。此时没有创建文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:49:56.700

试着写：

```
FileOutputStream fo=new FileOutputStream("/sdcard/filename"); 
```

# sql - 是否可以在 sqlalchemy 中回滚 create_all？

> ID：15649395
> 
> 赞同：3
> 
> 时间：2013-03-26T23:36:05.817
> 
> 标签：sql, transactions, sqlalchemy, rollback, ddl

根据某些 DBMS 的[这个](https://stackoverflow.com/questions/4692690/is-it-possible-to-roll-back-create-table-and-alter-table-statements-in-major-sql)问题，可以回滚 CREATE TABLE 语句。特别是 sqlite 是可能的（尽管它没有记录）。

所以我的问题是，是否可以在 sqlalchemy 中回滚 create_all ？我试图编写一些测试代码，但它似乎不起作用：

```
>>> engine = create_engine('sqlite:///:memory:')
>>> engine
Engine(sqlite:///:memory:)
>>> Session = sessionmaker(bind=engine)
>>> connection = engine.connect()
>>> session = Session(bind=connection)
>>> engine.table_names()
[]
>>> transaction = connection.begin()
>>> Base = declarative_base()
>>> class Test(Base):
...    __tablename__ = 'TEST'
...    id = Column(Integer, primary_key=True)
...
>>> Base.metadata.bind = engine
>>> Base.metadata.create_all()
>>> engine.table_names()
[u'TEST']
>>> transaction.rollback()
>>> session.close()
>>> connection.close()
>>> engine.table_names()
[u'TEST'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:28:44.873

1.  使用 Postgresql 或 SQL Server。MySQL、Oracle*不*支持事务 DDL。最新版本的 SQLite 似乎确实支持事务性 DDL。但是Python [sqlite3 驱动程序](http://docs.python.org/2/library/sqlite3.html)[没有](http://bugs.python.org/issue10740)。

2.  简单的食谱：

    ```
    with engine.begin() as conn:
        metadata.create_all(conn) 
    ```

    如果您在“with:”中引发异常，事务将被回滚。

3.  想自己看，OK：

    ```
    from sqlalchemy import inspect   # need to be running 0.8 for this

    with engine.connect() as conn:
       trans = conn.begin()
       metadata.create_all(conn)
       inspector = inspect(conn)
       table_names = inspector.get_table_names()
       trans.rollback()
       inspector = inspect(conn)
       rolled_back_table_names = inspector.get_table_names() 
    ```

要了解事务范围，我建议您阅读[http://docs.sqlalchemy.org/en/latest/core/connections.html](http://docs.sqlalchemy.org/en/latest/core/connections.html)

# php - 将变量传递给 PhpActiveRecord 中的 has_one 关系

> ID：15649396
> 
> 赞同：1
> 
> 时间：2013-03-26T23:36:07.193
> 
> 标签：php, mysql, orm, phpactiverecord

我在一个项目中使用 phpactiverecord ( [http://www.phpactiverecord.org/ )。](http://www.phpactiverecord.org/)

我定义了以下关系。反正有没有将变量传递给它，以便我可以`language_id`即时更改？

```
static $has_one = array(
  array(
    'language', 
    'class_name' => 'Pages_lang', 
    'conditions' => array('language_id=1')
  )
); 
```

我查看了文档，看来您可以这样做：

```
static $has_one = array(
  array('language', 
    'class_name' => 
    'Pages_lang', 
    'conditions' => array('language_id=?','1'))
); 
```

但是传递一个变量：

```
static $has_one = array(
  array('language', 
    'class_name' => 
    'Pages_lang', 
    'conditions' => array('language_id=?',$language_id))
); 
```

引发错误。

我不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:59:58.873

`static`变量仅在对象的上下文中才有意义。它们在实际创建（实例化）该类型的对象之前就已经存在。

我不完全确定你想在这里实现什么，但你很可能想在程序控制流中的某个点更改变量。为此，您必须在类中创建并调用设置该静态变量值的方法（建议，请参见下面的示例代码）或从主代码中显式设置它（不建议，还需要您的变量是`public`)

```
class Foo
{
    static $has_one = 'initial value';

    public static function setHasOne($value) {
        self::$has_one=$value;
    }
}

// main code:
Foo::setHasOne('new value'); 
```

为了简单起见，我在这里使用了一个字符串变量，但它与数组的工作方式相同。

# c - 何时释放链表中的节点

> ID：15649399
> 
> 赞同：0
> 
> 时间：2013-03-26T23:36:12.467
> 
> 标签：c, linked-list, free

当我在其中输入数据时，`curr->data`我首先通过`curr = (NODE*) malloc (sizeof(NODE));`. 然后我建立列表并最终在最后打印它。在程序的某个地方，我必须释放我用过的内存，但我不知道什么时候该做。在建立列表之后，还是在我打印列表之后？或者我可以这样做吗？

```
printf("How many elements do you want to make? ");
scanf("%d", &NumElem);
head = NULL;
for (i = 0; i < NumElem; i++)
{
    //memory allocate
    curr = (NODE*)malloc(sizeof(NODE));
    printf("Number %d: ", i+1);
    scanf("%d", &curr->num);
    FLUSH;

    if (head == NULL)/*beginning of the list*/
    {
        curr->next = head;
        head = curr;
        *tail = curr;
    }
    else /*adding on the list*/
    {
        curr->next = head;
        head = curr;
    }
    free (curr);
}//for 
```

每次将数据放入当前节点后，我可以释放吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T23:47:33.087

假设您预定了一个当地的会议室，您计划在那里举行会议和聚会。你什么时候会释放你的预订……在你预订之后，在你开会之后但在你开派对之前，或者在你开完会和派对之后？

`malloc``free`就像那样......`malloc`保留一个内存区域供您使用并取消`free`预订。如果您在取消预订后继续使用内存，则行为未定义。

在您的情况下，您需要释放整个节点列表。您可以在循环中执行此操作，但有一个常见的陷阱：在访问其`next`指针之前释放节点。危险在于这在实践中几乎总是有效的，但它是未定义的，有时它不会起作用......可能在一些控制生命关键机器的软件中。最好现在就学会这样做：

```
void free_list(NODE* list)
{
    while (list)
    {
        NODE* next = list->next;
        free(list);
        list = next;
    }
} 
```

或者以稍微紧凑的形式，

```
void free_list(NODE* list)
{
    for (NODE* next; list; list = next)
    {
        next = list->next;
        free(list);
    }
} 
```

如果您的节点包含指向已`malloc`编辑并需要释放的字符串或其他对象的指针，则这些空闲调用将在 free_list 中完成，然后再释放节点本身。

# c# - 使 .NET 可执行文件在第一时间加载更快

> ID：15649402
> 
> 赞同：5
> 
> 时间：2013-03-26T23:36:19.180
> 
> 标签：c#, .net, performance

我用 C# 制作了一个简单的 Windows 窗体可执行文件（简单来说，我的意思是它有大约 20 个方法，但它只是一个窗口），目标是 .NET Framework 2.0。`InitializeComponent();`当应用程序加载时，除了构造函数中的默认值外，它不会做任何事情。

我第一次打开时，应用程序需要大约 7 秒才能在我的 Windows 8 中加载。然后在我下一次打开它时只需要不到一秒钟的时间。

**在我试过的 Windows XP中，第一次加载**大约需要30 秒。我的几个朋友在测试应用程序时，也抱怨第一次加载需要很长时间（大约 30 秒）。然后它需要更快（1或2秒）。

我认为这可能是因为 .NET Framework 尚未加载，因此在他们的机器中加载需要一些时间。

**您是否曾在使用 .NET 应用程序时遇到过同样的问题？
你有什么线索为什么会发生这种情况，我该如何解决这个问题？**

编辑 - 我看到有些人建议使用 NGEN。但是，如果这需要在每台将使用该应用程序的机器上完成，它就不能解决这个问题。我想将我的应用程序发布给大量“普通用户”，如果我要求他们做一些额外的事情来使用我的应用程序，那是没有意义的。我们需要 .NET Framework 已经够糟糕了。我的应用程序应该只是一个没有任何依赖项的独立 EXE（框架除外）。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T23:38:12.067

You can try pre-generating the native image using NGEN which .NET will use when your application loads.

You can find more information here - [http://msdn.microsoft.com/en-GB/library/6t9t5wcf(v=vs.80).aspx](http://msdn.microsoft.com/en-GB/library/6t9t5wcf(v=vs.80).aspx)

These are platform dependant and not transferable usually so you'll need to do this on each machine you deploy on.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T23:37:57.217

This is most likely caused by Just-In-Time compilation of the CIL. You can compile your code for the environment that you are running on using [NGen](http://msdn.microsoft.com/en-GB/library/6t9t5wcf%28v=vs.80%29.aspx). However, you will most likely lose the platform agnostic-ness of .Net if you go down this route.

[This blog entry](http://msdn.microsoft.com/en-us/magazine/cc163610.aspx) on MSDN explains the performance benefits of NGen in some detail, I suggest giving it a read.

**Update following comments**

As Lloyd points out in his answer, if you give your users an installer NGen can be run at this point for the environment that the application is being installed on.

However, if NGen isn't an option, then I'd recommend starting your application with a profiler attached. It can highlight any performance bottlenecks in your code. If you have any singletons or expensive static initializers these will be highlighted as such and will give you the opportunity to refactor them.

There are many great .Net profilers out there ([see this SO question for details](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)), personally I'd recommend having a look at [dotTrace](http://www.jetbrains.com/profiler/) - they also offer a free trial period for a month which may be all that's required for your application.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:09:20.970

> [...] 面向 .NET Framework 2.0。当应用程序加载时，它除了默认的 InitializeComponent() 之外什么都不做；在构造函数中。

其实那不是真的。应用程序还加载类型、初始化静态构造函数等。

在大多数情况下，当我遇到性能问题时，我只是使用探查器......可能会发生很多事情，探查器是获得一些见解的最简单方法。有一些不同的选项可用；就个人而言，我是 Red-Gate 分析器的粉丝，他们有一个可供您使用的试用版。

值得注意的是，发生这种情况的方式在 .NET Framework 中发生了变化。如果你不能在 2.0 中获得你想要的性能，我会简单地尝试另一个框架。当然，Windows XP 在那里可能是一个小问题......

# php - html size to fit content of object I'm using the [object] tag to display the text of a .txt file. The object is within a div. When the object loads the text it sets up in a frame, which I can define height and width. However, set 问问题 问问题 2013-03-26T23:37:27.627 17065 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm using the [object] tag to display the text of a .txt file. The object is within a div. When the object loads the text it sets up in a frame, which I can define height and width. However, setting the height to auto, or 100% does nothing. No matter what I do the area in which the text is displayed is small, with scroll bars. I want the div that the object is contained in, along with the object itself, to stretch to show all the text. Here is the line: But no matter what I do I cannot get it to stretch based on the length of the text. Any help is much appreciated. Most probably, the reason you cannot handle the exception in the new AppDomain is that it is not thrown from a thread that was created in that AppDomain. From the documentation on AppDomain.UnhandledException it is not very straight-forward to see that. The interesting part is the following: An exception is unhandled only if the entire stack for the thread has been unwound without finding an applicable exception handler, so the first place the event can be raised is in the application domain where the thread originated. Now if the thread that executes the code that throws, is created in your main AppDomain (like the main thread of a console app), then you should add a handler in the main AppDomain. Note though that if the type of the thrown exception is not loaded in the main AppDomain, the Assembly Loader of .NET will try to load it from your applications' base directory and probing paths. If these are not the same with the child AppDomain, then the assembly will not be resolved and an(other) exception will be thrown. phphtmlobjectheight 4 1 回答 1 This answer is useful 2 http://jsfiddle.net/XAaMV/4/ 您可以使用 jQuery 动态设置高度和宽度： $(document).ready(function(){ $("#obj").width($("#cont").width()); $("#obj").height($("#cont").height()); }); HTML：解决方案 2CSS div{ height:600px; width:900px; } 于 2013-03-27T00:03:01.413 回答 Related 2 c++ - 表达式模板：提高评估表达式的性能？ 2 scheme - 计划对列表之间的交集 2 php - 发送异步 HTTP 请求的最快方法？ 3 python - 查找嵌套的整数列表的总和 1 c# - 如何将嵌套字典作为参数传递给方法？ 0 servlet-3.0 - WebServlet urlPatterns 给出 404 错误 3 javascript - 通过变量传递函数 1 ios - 在 textViewDidChange 中设置 UITextView 框架时的 contentOffset 变化 1 android - 应用正交投影或平截头体影响归一化坐标？ 1 javascript - 弹出onload骗取镜像域 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15649414
> 
> 赞同：4
> 
> 时间：
> 
> 标签：php, html, object, height

I'm using the [object] tag to display the text of a .txt file. The object is within a div. When the object loads the text it sets up in a frame, which I can define height and width. However, setting the height to auto, or 100% does nothing. No matter what I do the area in which the text is displayed is small, with scroll bars. I want the div that the object is contained in, along with the object itself, to stretch to show all the text.

Here is the line:

```
<object type="text/html" data="./docs/description_a.html" style="width:100%; "></object> 
```

But no matter what I do I cannot get it to stretch based on the length of the text. Any help is much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:03:01.413

[http://jsfiddle.net/XAaMV/4/](http://jsfiddle.net/XAaMV/4/)

您可以使用 jQuery 动态设置高度和宽度：

```
$(document).ready(function(){

    $("#obj").width($("#cont").width());
    $("#obj").height($("#cont").height());

}); 
```

**HTML：**

```
<div id="cont">
<object id="obj" width="" height="" data="www.google.com"></object>
 <div> 
```

* * *

**解决方案 2**

```
<div>
<object width="600" height="900" data="www.google.com"></object>
 <div> 
```

CSS

```
div{

    height:600px;
    width:900px;
} 
```

# html - Chrome radio buttons stopped working

> ID：15649425
> 
> 赞同：1
> 
> 时间：2013-03-26T18:00:52.513
> 
> 标签：html, google-chrome

Recently radio buttons on a web page that I maintain stopped working in webkit browsers Chrome and Safari.

They work just fine in Internet Explorer, Firefox for Window and Firefox for Mac.

By successively removing html from the page I have isolated the problem. It is caused by an adjacent div that has a height attribute. If I remove the height attribute on the adjacent div, the radio buttons work.

I tried to attach screen shots showing both cases. However only one screen shot seems to show when I save the edits. So it seems only one screen shot is allowed.

The visible screen shot shows after the problem is fixed by unchecking the height attribute of the "progress indicator" div.

![fixed condition with height attribute unchecked](../Images/58ce773c7d8cfc4ac13dfc4918762eea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:29:28.120

I found a better solution than working with the height. Instead add overflow:auto to the nearby div.

# java - An "Empty" Character Extracted from a PDF

> ID：15649427
> 
> 赞同：2
> 
> 时间：2013-03-26T23:38:31.093
> 
> 标签：java, character, pdfbox

I recently tried to use PDFBox to extract text from a PDF file. It works fine for most PDFs, but for one PDF (which unfortunately I am not permitted to share), all of the periods in the sentences do not get extracted out. Instead, I get phrases like the following:

```
...what it would be It’ll be important later on... 
```

It looks like instead of a period-space it is just a space, but it's not (at least on Mac OS X). If you copy the text into a text editor and start moving the text cursor through the phrase, there is an "empty character" right after the "t" in "feet". To reproduce:

*   Place the cursor right before the letter "t" in "feet" and press the right arrow key. The cursor moves one step to the right.
*   Press the right arrow key again, you stay right where you are.
*   Press the right arrow key one more time, you continue to the other side of the space.
*   Continuing to press the right arrow key behaves as expected

It appears that PDFBox extracted some sort of "empty character" in place of a period. I've tried to replace it a few different ways but have had no luck:

```
String oldText = text;
text = text.replace('\u0000', '.'); //Unicode null
text = text.replace('\0', '.'); //C null
System.out.println(oldText.equals(text)); //Returns true
//Also tried text.replace(null, '.'), but it doesn't compile 
```

What is this "empty character" and how can I replace it with the text that is supposed to be there?

EDIT: [This answer](https://stackoverflow.com/a/3396779/531762) suggested that the character might be a character such as `\uFEFF`, but trying to replace it with a regex as suggested did not work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:43:49.817

在意识到字符不是`\uFEFF`或`\u0000`，其他 Stack Overflow 用户遇到的两个 unicode 值之后，我决定运行一个测试来弄清楚代码实际上是什么。使用[此答案](https://stackoverflow.com/a/2220476/531762)中的代码来确定 unicode 值是什么，我发现神秘字符是`\u0008`，即“[退格](http://www.fileformat.info/info/unicode/char/0008/index.htm)”。为什么会从 PDF 中提取，我不知道，但`text = text.replace('\u0008', '.')`现在用缺少的句点替换它。

# java - Eclipse debugging issue - is it an issue of too many threads?

> ID：15649429
> 
> 赞同：0
> 
> 时间：2013-03-26T23:38:34.827
> 
> 标签：java, eclipse, multithreading

I recently ported a fairly large application from C# to Java. It ought to have about 6 main threads running and lots of timers being fired (but each executing only briefly). I make use of the Timer class and call myTimer.schedule(new TimerTask() { ...

Now that I'm at the end of the port, I'm having a problem debugging the application in Eclipse, especially lately. I set a breakpoint: Eclipse will hit it but I can't step through at that point. I don't think I can look at variable values or stack trace or anything.

I see my list of threads going crazy, and based on output statements I've written, I can see that Thread.activeCount() gets to be over 200 threads. I am curious as to whether this is my debugging problem. Have I overloaded Eclipse to the point that it goes crazy?

From the threads I can actually see, most of them are my Timers that have been run. Somewhere I read that the JVM will keep those alive even if you cancel them (?). Anyway, if it's including all of the timers I've fired then perhaps over 200 threads makes sense.

I did once today also see an Eclipse "out of memory" error.

Any advice? Thanks.

# loops - Trying to get Pascal to read from file then add all of the even numbers having issues.

> ID：15649437
> 
> 赞同：1
> 
> 时间：2013-03-26T23:39:20.453
> 
> 标签：loops, for-loop, pascal

OK so I am trying to get Pascal to read a set of integers from a input file then take the even numbers and add them together with in the range of 1-50\. Not working for me. Here is what I have: List of input file numbers 1 2 3 4 5 6 7 8 9 11 12 64 13 14 15 16 71 33 34 35 36 41 44 46 82 512 49 50 And my pascal program:

```
program even(input,output,indata); 
uses crt;
Var
  indata:text;
  num, even:integer;
begin
  clrscr;
  assign(indata, 'j:\num.txt');
  reset(indata)0;
  read(indata, num);
  while num>50 do
  begin
         read(indata, num);
         if num mod 2=0 then
         even:=even+num;
  end;
  writeln('Even sum is', even);
  readln( );
end. 
```

Any help would be great! When I run it I get text as "Even sum is 0".

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:49:03.140

您需要首先修复您的代码，以便它甚至可以编译。调用的行在`reset`结束`0`后有`)`，这是无效的语法。

您需要首先初始化您的`even`变量，以便它包含一个有效的起点。

接下来，您需要修复`while`循环中的逻辑。它是倒退的。:-) 您需要测试`num < 50`是否要在最后停止 - 您现在进行的测试`num > 50`意味着循环将永远不会执行，因为第一个值 ( `1`) 结束了`while`循环。

这适用于 Delphi 的普通控制台应用程序。

```
program Project2;

uses
  SysUtils;

var
  InData: Text;
  num, even: Integer;

begin
  AssignFile(InData, 'D:\TempFiles\numbers.txt');
  reset(indata);
  read(indata, num);
  even := 0;
  while num < 50 do
  begin
    read(indata, num);
    if num mod 2 = 0 then
       even := even + num;
  end;
  writeln('Even sum is ', even);
  readln;
end. 
```

它产生输出（根据您的代码编写方式，这是正确的，因为它读取循环`64`内的值`while num`，因此执行的次数比它应该执行的多 1 次，`64`即使它被添加到`even`- 我会把它留给你来弄清楚）。:-)

```
Even sum is 96. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:14:52.430

以前的海报给出了很好的建议，但我会在最后添加（之前`end.`）

`CloseFile(infile)`或者`Close(infile)`

（取决于您的 Pascal 版本）。这可能不会影响程序输出，但对于将来养成一个好习惯 - 如果您正在写入（而不是读取）文本文件并且不关闭它，您可能会发现缺少一些文本，或文件变得不可读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:44:47.123

几十年来没有做过帕斯卡，但如果我记得：

你在说：

```
while num > 50 do 
```

并且您的第一个数字是 1，因此它只是跳过循环并打印“偶数”的初始值，即 0。

您可能的意思是：

```
while num < 50 do 
```

但即使这样也只会在第一个值 50 或更大时退出。

如果您的意思是阅读所有数字，但过滤掉大于 50 的数字，我认为它更像是：

```
program even(input,output,indata); 
uses crt;
Var
  indata:text;
  num, even:integer;
begin
  clrscr;
  assign(indata, 'j:\num.txt');
  reset(indata)0;  

  (* read all of the numbers *)
  while not eof(indata) do
  begin
         read(indata, num);

         (* skip those greater than 50 *)
         if num <= 50
         begin
             if num mod 2=0 then
             even:=even+num;
         end;
  end;
  writeln('Even sum is', even);
  readln( );
end. 
```

# ruby-on-rails - Javascript not working in production: Nginx, Passenger, Rails on Ubuntu Server (Node.js?)

> ID：15649439
> 
> 赞同：0
> 
> 时间：2013-03-26T23:39:25.053
> 
> 标签：ruby-on-rails, node.js, deployment, nginx, passenger

Do I need to install/config Node.js to get Javascript running? Is this the simplest solution, seeing that my site has really low traffic?

Javascript doesn't seem to work for me but only in production for a site I am running. The site is setup on the latest version of Ubuntu Server, with Nginx and Passenger (it's a Ruby on Rails app). The site runs great and fast for the past few months, but Javascripts (in particular, things like Twitter Bootstrap's tooltip, etc.) don't run on this production server although they work in my testing/dev environments.

My thoughts are that Javascript is broken b/c I need to install/configure Node.js? I've seen Node.js mentioned in some deployment setup guides but can't find detailed info into if this is necessary.

My site is very low traffic (maybe 3-5 users at any time) for a small company website. The only reason I needed to setup my own web server is that I needed to run the app on the private company network to access certain resources.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:39:10.673

默认情况下，您的 js/css 不会编译。你应该预编译它们。

您可以在您的计算机上运行“bundle exec rake assets:precompile”并将编译后的代码部署到服务器。相反 node.js 你可以使用 therubyracer gem。

有关更多信息，请阅读[导轨指南](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

# objective-c - NSFetchedResultsController 冻结 UI

> ID：15649442
> 
> 赞同：0
> 
> 时间：2013-03-26T23:39:31.770
> 
> 标签：objective-c, core-data, uitableview, nsfetchedresultscontroller

我在使用 NSFetchedResultsController 时遇到问题，我无法阻止它冻结 UI。初始提取发生得很快，但是当我触发任何错误时，它会在滚动表格视图时导致冻结。我只使用 8 个元素进行测试，我的后端使用 StackMob

这是我声明 NSFetchedResultsController 的地方

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    } 
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Post" 
                                   inManagedObjectContext:_managedObjectContext];
   [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:@"createddate" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:_managedObjectContext
                                      sectionNameKeyPath:nil
                                               cacheName:nil];
    _fetchedResultsController = theFetchedResultsController;

    return _fetchedResultsController;
} 
```

这是我的viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIColor* backgroundImage = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:BACKGROUND_IMAGE_TAN]];
    [[self view] setBackgroundColor:backgroundImage];
    [[self tableView] setSeparatorStyle:UITableViewCellSeparatorStyleNone];
    _managedObjectContext =  [[self.appDelegate coreDataStore] contextForCurrentThread];

    NSError *error;     
    if (![[self fetchedResultsController] performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();  // Fail
    }
} 
```

这是我的 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CCCell";
    CCCell *cell = (CCCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CCCell" owner:nil options:nil];
        cell = [topLevelObjects objectAtIndex:0];
        [cell setDelegate:self];
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    }

    Post* post = (Post*)[_fetchedResultsController objectAtIndexPath:indexPath];

    //
    //IF I UNCOMMENT THIS LINE IT LOCKS THE UI
    //
    //NSLog(@"%@", [post valueForKey:@"price"]);
    return cell;
} 
```

如果我取消注释指定的行，它会导致滚动非常慢

我试图用这样的电话来包围电话

```
dispatch_queue_t coreDataThread = dispatch_queue_create("com.YourApp.YourThreadName", DISPATCH_QUEUE_SERIAL);

dispatch_async(coreDataThread, ^{
    Post* post = (Post*)[_fetchedResultsController objectAtIndexPath:indexPath];
    NSLog(@"%@", [post valueForKey:@"price"]);
}); 
```

但随后需要很长时间 20 秒左右

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:23:39.217

在您的获取请求上设置一个`fetchBatchSize`等于您的表格在屏幕上的行数的两倍左右。这将不必加载整个数据集。另请参阅`NSFetchedResultsController`有关`cacheName`.

顺便说一句，你`[[self.appDelegate coreDataStore] contextForCurrentThread]`看起来很可疑。所有这些 UI 代码都将在主线程上执行，因此几乎可以肯定没有必要让另一个对象生成每个线程的 MOC。

您的 GCD 代码不正确，因为您现在有主 UI 线程和您的 GCD`coreDataThread`都在与相同的通信`NSFetchedResultsController`，因此两个线程与同一个 MOC 通信。

如果您对 Core Data 的性能感到困惑，那么打开 SQL 日志记录是值得的。

```
-com.apple.CoreData.SQLDebug 1 
```

作为命令行参数，通过方案编辑器启用。

# php - 将选项字段结果合并到文本字段

> ID：15649443
> 
> 赞同：0
> 
> 时间：2013-03-26T23:39:36.803
> 
> 标签：php, html

我尝试搜索它，这可能是一个非常简单的解决方案，但我无法弄清楚如何将选项字段与 html/php/js 中的文本字段结合起来。基本上我只需要用户能够选择是http还是https，然后输入域。然后它应该通过 _GET 作为单个变量提交。

```
<select>
<option value="http://">http://</option>
<option value="https://">https://</option>
</select>
<input class="span4" id="domain" name="domain" type="text">
<button class="btn btn-success" type="submit">Submit</button></form> 
```

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:42:04.887

选择需要一个名字。

```
<form>
<select name="protocol">
<option value="http://">http://</option>
<option value="https://">https://</option>
</select>
<input class="span4" id="domain" name="domain" type="text">
<button class="btn btn-success" type="submit">Submit</button>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:45:59.933

我会在提交后将它们合并...

HTML 页面（您需要命名您的`SELECT`）：

```
<select name="type">
<option value="http://">http://</option>
<option value="https://">https://</option>
</select>
<input class="span4" id="domain" name="domain" type="text">
<button class="btn btn-success" type="submit">Submit</button></form> 
```

PHP页面：

```
$type = $_GET['type'];
$name = $_GET['domain'];
$combined = $type . $name; 
```

假设你真的“故意”

> 通过 _GET 作为单个变量提交

你最终会得到 ie。`https://`as`$type`和`www.example.com`as `$name` ... 那么变量`$combined`的值应该是`https://www.example.com`

# encryption - 数字签名的标准格式

> ID：15649446
> 
> 赞同：2
> 
> 时间：2013-03-26T23:39:44.177
> 
> 标签：encryption, hash, rsa, sha, pgp

我想制作一个用于签名消息的 javascript 库。我希望格式类似于...

```
--- BEGIN SIGNED MESSAGE ---
This is a plain old message
It goes on and on...
--- BEGIN RSA OF SHA1 ---
Base64Stringassfd86asdf870n8
09as8d76fn098==
--- END SIGNED MESSAGE --- 
```

但我不知道正确的格式。我可以复制 PGP 格式（我相信不难找到相关信息），但如果有标准方法，我更愿意使用它。

这种签名消息有标准格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:46:17.070

[加密消息语法](http://en.wikipedia.org/wiki/Cryptographic_Message_Syntax)（又名 PKCS #7）是一种非常常用的签名数据格式。它还支持有效载荷内容的加密和身份验证，因此它有点像超级格式。缺点是实现的复杂性 -[规范](https://www.rfc-editor.org/rfc/rfc5083)可能会令人厌烦，并且您必须熟悉使用 ASN.1。

[OpenPGP 格式](https://www.rfc-editor.org/rfc/rfc4880)可能更易于实现并且对人眼来说更具可读性（看不到 ASN.1）。为了简单起见，这可能是最好的选择。同样，如果您愿意，您可以选择在以后添加加密。然而，使用该规范同样令人恼火——我从未遇到过如此……不精确的 RFC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T11:09:28.383

为了完成，[W3C XML Signature](http://www.w3.org/TR/xmldsig-core/)从语法和编码的角度来看稍微容易一些，但要求最终的数据是 XML。

# jquery - 异步加载 jQuery-File-Uploader

> ID：15649447
> 
> 赞同：0
> 
> 时间：2013-03-26T23:39:44.110
> 
> 标签：jquery, jquery-file-upload

我正在使用来自 github 的 jquery/bootstrap 文件上传器，并希望异步加载它。我知道我没有做某事，但我不知道在动态加载后该怎么做才能让它工作。

我更改了演示脚本以向您准确展示我的意思（抱歉，拖了这么久）：

```
 <?php
    if(isset($_REQUEST['ajax'])) {
        echo ('
            <!-- The file upload form used as target for the file upload widget -->
        <form id="fileupload" action="server/php/" method="POST" enctype="multipart/form-data">
            <!-- Redirect browsers with JavaScript disabled to the origin page -->
            <noscript><input type="hidden" name="redirect" value="http://blueimp.github.com/jQuery-File-Upload/"></noscript>
            <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
            <div class="row fileupload-buttonbar">
                <div class="span7">
                    <!-- The fileinput-button span is used to style the file input field as button -->
                    <span class="btn btn-success fileinput-button">
                        <i class="icon-plus icon-white"></i>
                        <span>Add files...</span>
                        <input type="file" name="files[]" multiple>
                    </span>
                    <button type="submit" class="btn btn-primary start">
                        <i class="icon-upload icon-white"></i>
                        <span>Start upload</span>
                    </button>
                    <button type="reset" class="btn btn-warning cancel">
                        <i class="icon-ban-circle icon-white"></i>
                        <span>Cancel upload</span>
                    </button>
                    <button type="button" class="btn btn-danger delete">
                        <i class="icon-trash icon-white"></i>
                        <span>Delete</span>
                    </button>
                    <input type="checkbox" class="toggle">
                </div>
                <!-- The global progress information -->
                <div class="span5 fileupload-progress fade">
                    <!-- The global progress bar -->
                    <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                        <div class="bar" style="width:0%;"></div>
                    </div>
                    <!-- The extended global progress information -->
                    <div class="progress-extended">&nbsp;</div>
                </div>
            </div>
            <!-- The loading indicator is shown during file processing -->
            <div class="fileupload-loading"></div>
            <br>
            <!-- The table listing the files available for upload/download -->
            <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
        </form>

    <!-- modal-gallery is the modal dialog used for the image gallery -->
    <div id="modal-gallery" class="modal modal-gallery hide fade" data-filter=":odd" tabindex="-1">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">&times;</a>
            <h3 class="modal-title"></h3>
        </div>
        <div class="modal-body"><div class="modal-image"></div></div>
        <div class="modal-footer">
            <a class="btn modal-download" target="_blank">
                <i class="icon-download"></i>
                <span>Download</span>
            </a>
            <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">
                <i class="icon-play icon-white"></i>
                <span>Slideshow</span>
            </a>
            <a class="btn btn-info modal-prev">
                <i class="icon-arrow-left icon-white"></i>
                <span>Previous</span>
            </a>
            <a class="btn btn-primary modal-next">
                <span>Next</span>
                <i class="icon-arrow-right icon-white"></i>
            </a>
        </div>
    </div>

        ');
        die;
    }
    ?>
    <!DOCTYPE HTML>
    <!--
    /*
     * jQuery File Upload Plugin Demo 7.4
     * https://github.com/blueimp/jQuery-File-Upload
     *
     * Copyright 2010, Sebastian Tschan
     * https://blueimp.net
     *
     * Licensed under the MIT license:
     * http://www.opensource.org/licenses/MIT
     */
    -->
    <html lang="en">
    <head>
    <!-- Force latest IE rendering engine or ChromeFrame if installed -->
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
    <meta charset="utf-8">
    <title>jQuery File Upload Demo</title>
    <meta name="description" content="File Upload widget with multiple file selection, drag&amp;drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.">
    <meta name="viewport" content="width=device-width">
    <!-- Bootstrap CSS Toolkit styles -->
    <link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap.min.css">
    <!-- Generic page styles -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Bootstrap styles for responsive website layout, supporting different screen sizes -->
    <link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css">
    <!-- Bootstrap CSS fixes for IE6 -->
    <!--[if lt IE 7]><link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css"><![endif]-->
    <!-- Bootstrap Image Gallery styles -->
    <link rel="stylesheet" href="http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css">
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="css/jquery.fileupload-ui.css">
    <!-- CSS adjustments for browsers with JavaScript disabled -->
    <noscript><link rel="stylesheet" href="css/jquery.fileupload-ui-noscript.css"></noscript>
    <!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    </head>
    <body>
    <div id="async"></div>
    <!-- The template to display files available for upload -->
    <script id="template-upload" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}
        <tr class="template-upload fade">
            <td class="preview"><span class="fade"></span></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            {% if (file.error) { %}
                <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
            {% } else if (o.files.valid && !i) { %}
                <td>
                    <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
                </td>
                <td>{% if (!o.options.autoUpload) { %}
                    <button class="btn btn-primary start">
                        <i class="icon-upload icon-white"></i>
                        <span>Start</span>
                    </button>
                {% } %}</td>
            {% } else { %}
                <td colspan="2"></td>
            {% } %}
            <td>{% if (!i) { %}
                <button class="btn btn-warning cancel">
                    <i class="icon-ban-circle icon-white"></i>
                    <span>Cancel</span>
                </button>
            {% } %}</td>
        </tr>
    {% } %}
    </script>
    <!-- The template to display files available for download -->
    <script id="template-download" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}
        <tr class="template-download fade">
            {% if (file.error) { %}
                <td></td>
                <td class="name"><span>{%=file.name%}</span></td>
                <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
                <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
            {% } else { %}
                <td class="preview">{% if (file.thumbnail_url) { %}
                    <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
                {% } %}</td>
                <td class="name">
                    <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
                </td>
                <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
                <td colspan="2"></td>
            {% } %}
            <td>
                <button class="btn btn-danger delete" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                    <i class="icon-trash icon-white"></i>
                    <span>Delete</span>
                </button>
                <input type="checkbox" name="delete" value="1" class="toggle">
            </td>
        </tr>
    {% } %}
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
    <script src="js/vendor/jquery.ui.widget.js"></script>
    <!-- The Templates plugin is included to render the upload/download listings -->
    <script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
    <!-- The Load Image plugin is included for the preview images and image resizing functionality -->
    <script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
    <!-- The Canvas to Blob plugin is included for image resizing functionality -->
    <script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
    <!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo -->
    <script src="http://blueimp.github.com/cdn/js/bootstrap.min.js"></script>
    <script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
    <!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
    <script src="js/jquery.iframe-transport.js"></script>
    <!-- The basic File Upload plugin -->
    <script src="js/jquery.fileupload.js"></script>
    <!-- The File Upload file processing plugin -->
    <script src="js/jquery.fileupload-fp.js"></script>
    <!-- The File Upload user interface plugin -->
    <script src="js/jquery.fileupload-ui.js"></script>
    <!-- The main application script -->
    <script src="js/main.js"></script>
    <!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
    <!--[if gte IE 8]><script src="js/cors/jquery.xdr-transport.js"></script><![endif]-->

    <script type="text/javascript">
        $.ajax({
          type: "post",
          url: '?ajax=1',
            timeout:1000,
            success: function(data) {
                $('#async').html(data);
            }
        });
    </script>

    </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:10:42.953

开始：

```
$('#fileupload').fileupload(); 
```

# java - Java 代码或外部脚本中的 Elasticsearch 初始配置？

> ID：15649451
> 
> 赞同：2
> 
> 时间：2013-03-26T23:40:00.963
> 
> 标签：java, jakarta-ee, elasticsearch

我正在学习 Elasticsearch，并开始了一个新项目。现在我想知道我应该在哪里添加用于创建映射等的初始代码。您是否会创建一个包含不同 cURL 命令的外部脚本然后运行它，或者在您拥有配置代码的 Java 项目中拥有一个自己的包然后在需要时运行它？哪种方法最合适，为什么？

我想用 XContentBuilder 尝试的映射

```
{
    "tweet" : {
        "properties" : {
            "message" : {
                "type" : "string",
                "store" : "yes",
                "index" : "analyzed",
                "null_value" : "na"
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:54:21.807

我喜欢在java中使用它：

```
public void putMappingFromString(String index, String type, String mapping) {

    IndicesAdminClient iac = getClient().admin().indices();
    PutMappingRequestBuilder pmrb = new PutMappingRequestBuilder(iac);
    pmrb.setIndices(index);
    pmrb.setType(type);
    pmrb.setSource(mapping);
    ListenableActionFuture<PutMappingResponse> laf = pmrb.execute();
    PutMappingResponse pmr = laf.actionGet();
    pmr.getAcknowledged();

} 
```

您还可以从集群状态（间接）获取索引的映射：

```
public String getMapping(String index, String type) throws EsuException {
    ClusterState cs = getClient().admin().cluster().prepareState().setFilterIndices(index).execute().actionGet().getState();
    IndexMetaData imd = cs.getMetaData().index(index);

    if (imd == null) {
        throw new EsuIndexDoesNotExistException(index);
    }

    MappingMetaData mmd = imd.mapping(type);

    if (mmd == null) {
        throw new EsuTypeDoesNotExistException(index, type);
    }

    String mapping = "";
    try {
        mapping = mmd.source().string();
    } catch (IOException e) {
        mapping = "{ \"" + e.toString() + "\"}";
    }
    return mapping;
} 
```

如果您将映射作为资源存储在类路径上，这允许对映射和源代码进行版本控制

# c - 没有 printf 的语言 C 格式字符串

> ID：15649453
> 
> 赞同：-1
> 
> 时间：2013-03-26T23:40:29.130
> 
> 标签：c, string

这就是我想要的：

```
char *getHour(){
return ("%d:%d:%d",hour, min, sec);
} 
```

返回这样的字符串 "hh:mm:ss" 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:16:52.887

一种可能的实现如下所示

**编辑：**结合戴夫对`static`数组的建议，`snprintf`并返回一个`const char *`

```
int hh = 5, mm = 45, ss = 20;

const char* getHour()
{
    static char hourStr[32];
    snprintf(hourStr,14, "%d:%d:%d\n", hh, mm, ss);
    return hourStr;
} 
```

如果您将此实现的输出打印为`printf("GetHour: %s\n", getHour());`，您将得到`GetHour: 5:45:20`我认为是您预期的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:17:16.450

我会假装你有充分的理由这样做。这是您要查找的代码：

```
char *getHourMinuteSecond( int hour, int minute, int second ) {
    assert( hour >= 0 && hour < 24 );
    assert( minute >= 0 && minute < 60 );
    assert( second >= 0 && second <= 60 ); // leap seconds... maybe

    char *output = (char *) malloc( 9 * sizeof( char ) );
    if( output == NULL ) {
        return NULL;
    }
    output[0] = (char) ((hour / 10) + '0');
    output[1] = (char) ((hour % 10) + '0');
    output[2] = ':';
    output[3] = (char) ((minute / 10) + '0');
    output[4] = (char) ((minute % 10) + '0');
    output[5] = ':';
    output[6] = (char) ((second / 10) + '0');
    output[7] = (char) ((second % 10) + '0');
    output[8] = '\0';
    return output;
} 
```

现在让我们将限制放宽到一些更理智的东西。我们可以使用 snprintf：

```
char *getHourMinuteSecond( int hour, int minute, int second ) {
    assert( hour >= 0 && hour < 24 );
    assert( minute >= 0 && minute < 60 );
    assert( second >= 0 && second <= 60 ); // leap seconds... maybe

    char *output = (char *) malloc( 9 * sizeof( char ) );
    if( output == NULL ) {
        return NULL;
    }
    snprintf( output, 9, "%02d:%02d:%02d", hour, minute, second );
    return output;
} 
```

让我们更加理智，并通过参数返回函数（这样我们就不需要玩了`malloc`）：

```
void getHourMinuteSecond( char target[9], int hour, int minute, int second ) {
    assert( target != NULL );
    assert( hour >= 0 && hour < 24 );
    assert( minute >= 0 && minute < 60 );
    assert( second >= 0 && second <= 60 ); // leap seconds... maybe

    snprintf( target, 9, "%02d:%02d:%02d", hour, minute, second );
} 
```

等等，最后一个功能主要是错误检查。我们可以再次变得愚蠢并使用`#define`：

```
#define getHourMinuteSecond(tgt,h,m,s) snprintf(tgt,9,"%02d:%02d:%02d",h,m,s) 
```

最后，在您的原始代码中，您不采用`hour`,`minute`或`second`作为参数，所以也许您希望函数确定它们？

```
void getHourMinuteSecond( char target[9] ) {
    assert( target != NULL );
    const time_t now = time( 0 );
    const tm *const tmnow = localtime( &now );
    snprintf( target, 9, "%02d:%02d:%02d", tmnow->tm_hour, tmnow->tm_min, tmnow->tm_sec );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:54:16.443

您可以只返回一个字符串，连接小时、分钟和秒，例如：

str = 小时 + 分钟 + 秒

要做到这一点，使用函数 strcat(destination, source) (#include) 会出现这样的情况：

```
char *getHour(....)

{

char str[20];

strcpy(str,hour);

strcat(str,":");

strcat(str,min);

strcat(str,":");

strcat(str,"sec);

return str;

} 
```

# jquery - Jquery验证获取错误类型

> ID：15649460
> 
> 赞同：-2
> 
> 时间：2013-03-26T23:41:16.653
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件。有没有办法从 jQuery 表单验证中获取错误类型？例如，

```
$('mform').validate({
rules: {
    email: {
        required: true,
        maxlength: 40
    }
},
messages: {
    email: {
        required: "This is a required field.",
        maxlength: "Please enter less than 40 chars"
    }
},
errorPlacement: function(error, element) {
    error.appendTo(element.parent());
}
}); 
```

我只想将“必需”错误生成的错误消息放在 html 页面某处的“div”内，而不是将其附加到“element.parent()”。如果我能得到错误类型，例如“required”或“maxlength”错误，我可以编写代码来做到这一点。

[我们可以得到 jQuery Validate 错误类型吗？](https://stackoverflow.com/questions/12075804)

上面的问题没有提到要添加哪些参数。于是又问。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:18:02.550

**编辑：** 简短回答：

**您的要求根本无法使用此插件完成。** *（这也是非常罕见的情况，默认情况下无法完成的事情也可能根本不应该完成。）*

**1)** 使用此插件作为起点编写您自己的自定义插件。自己认真尝试这样做，然后回到 SO 并在遇到困难时发布一个新的、更详细的问题。

**2）** 找到一个已经做你想要的插件。但是，我怀疑存在一个，因为所请求的选项不是人们通常想要的。一致且统一的用户体验意味着所有错误消息的处理方式相同，无论触发它的规则如何。

* * *

原始答案如下...

* * *

我想你可以`errorPlacement`像这样使用回调函数......

```
errorPlacement: function (error, element) {
    if (error.text().indexOf("required") !== -1) {
        error.insertAfter(element);
    } else {
        error.insertBefore(element);
    }
} 
```

**演示：http: [//jsfiddle.net/VVaKV/](http://jsfiddle.net/VVaKV/)**

然而，这个解决方案有一些缺陷，因为它只处理第一个错误消息的*初始*位置。`label`所有后续消息都将位于相同的初始位置，因为插件仅`label`在创建后显示/隐藏消息。（在每个字段只有一种类型的消息的情况下，它可以很好地工作。）

我不认为任何[其他回调函数](http://docs.jquery.com/Plugins/Validation/validate#toptions)会更好，因为你想要的东西没有内置到这个插件中。 *（可能是因为大多数人认为当所有错误都具有一致的统一外观时，用户不会感到困惑，IMO。）*

我已经回答了数百个关于这个插件的问题，你的问题是我遇到的第一个，要求能够以不同的方式处理一种类型的错误消息。大多数人只是想要更一致的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T08:18:40.950

尝试使用这个：

```
errorPlacement: function(error, element) {
    var message = $(error).text(); 

    // here message is your error text message
} 
```

# opencv - 如何使用 opencv 平滑/模糊 2 个相似的图像

> ID：15649462
> 
> 赞同：0
> 
> 时间：2013-03-26T23:41:29.913
> 
> 标签：opencv, blur, similarity

我正在寻找一种方法来模糊两个相同产品（即：真实产品）的 2 个图像（有些嘈杂的图像，使用相同的设备/设置拍摄，但照明可能略有不同），因此模糊内核将考虑找到的相似轮廓在两张图片中。

我可以在两张/一张图像中找到轮廓，但接下来呢？一般来说，我想比较图像以发现它们之间的不同之处。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:48:24.473

要找到相似之处或不同之处，您可以执行以下操作..

1.  图像配准...尝试查找两个图像中的特征数量...找到的相似特征的数量是衡量图像相似/不同程度的指标...
2.  如果这两个图像非常相似，除了这里和那里的细节很少......你可以继续找到轮廓，轮廓数量和它们的长度......任何额外的特征都会产生额外的轮廓......但这可能不适用于两个图像中相同但在任一图像中缩放或方向不同的主题。
3.  大大简化但可能证明是有效的......尝试找到两个图像之间的共同关系......在这种情况下，可能会跳过较小的细节，因为整个过程是基于强度的......

有关您正在查看的图像或对象类型的更多详细信息将有助于解决您的问题...

# php - MySQL - 在 DATE_SUB() 和 DATE_SUB() 之间搜索查询错误

> ID：15649466
> 
> 赞同：1
> 
> 时间：2013-03-26T23:41:57.580
> 
> 标签：php, mysql, date

我正在尝试使用 DATE_SUB() 在 (date-7days) 和 (date-1day) 之间的日期范围之间进行搜索查询（使用 pdo php 和 mysql），例如：

```
end_date is 2013-03-26
search between 2013-03-19 and 2013-03-25 ` 
```

然而，下面的查询使用第一个 date_sub（7 天间隔）但忽略了第二个（date_sub（1 天间隔），因此它在 2013-03-19 和 2013-03-26 之间进行搜索。

```
$sevd_query = " 
    SELECT 
        booking_id,
        DATE_FORMAT(start_date, '%e/%c') AS s_d,
        DATE_FORMAT(end_date, '%e/%c') AS e_d
    FROM 
        bsi_bookings as bb 
    INNER JOIN 
        bsi_reservation as br ON bb.booking_id=br.bookings_id
    WHERE 
        bc.c_id=:c_id AND
       :day BETWEEN DATE_SUB(bb.end_date, INTERVAL 7 DAY) AND DATE_SUB(bb.end_date, INTERVAL 1 DAY)
"; 
```

有人可以帮忙吗？我一直在尝试解决这个问题一个星期，但没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:40:48.183

条款：

```
:day BETWEEN DATE_SUB(bb.end_date, INTERVAL 7 DAY) AND
             DATE_SUB(bb.end_date, INTERVAL 1 DAY) 
```

可以表示为：

```
day >= (end_date - 7) AND
day <= (end_date - 1) 
```

可以重写为：

```
(day + 7) >= end_date AND
(day + 1) <= end_date 
```

这与以下内容相同：

```
end_date <= (day + 7) AND
end_date >= (day + 1) 
```

这也是：

```
end_date >= (day + 1) AND
end_date <= (day + 7) 
```

也可以写成：

```
end_date BETWEEN (day + 1) AND (day + 7) 
```

我认为这不是你想要的。

试试这个：

```
SELECT 
    booking_id,
    DATE_FORMAT(start_date, '%e/%c') AS s_d,
    DATE_FORMAT(end_date, '%e/%c') AS e_d
FROM 
    bsi_bookings as bb 
INNER JOIN 
    bsi_reservation as br ON bb.booking_id=br.bookings_id
WHERE 
    bc.c_id=:c_id AND
    bb.end_date BETWEEN :day - INTERVAL 7 DAY AND :day - INTERVAL 1 DAY; 
```

如果该`end_date`字段被索引，这将允许使用索引。

如果要搜索的字段包含在函数中，则不会使用索引。

# python - 如何使用 xlwt 设置文本的颜色

> ID：15649482
> 
> 赞同：6
> 
> 时间：2013-03-26T23:43:38.533
> 
> 标签：python, xlrd, xlwt

我无法找到有关如何设置文本颜色的文档。如何在 xlwt 中完成以下操作？

```
style = xlwt.XFStyle()

# bold
font = xlwt.Font()
font.bold = True
style.font = font

# background color
pattern = xlwt.Pattern()
pattern.pattern = xlwt.Pattern.SOLID_PATTERN
pattern.pattern_fore_colour = xlwt.Style.colour_map['pale_blue']
style.pattern = pattern

# color of text
??? 
```

我尝试过的另一种方法是，我可以设置字体颜色但不能设置背景颜色：

```
style = xlwt.easyxf('font: bold 1, color red;') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T00:00:28.590

这是有效的：

```
style = xlwt.easyxf('pattern: pattern solid, fore_colour light_blue;'
                              'font: colour white, bold True;') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-30T17:39:33.697

设置“colour_index”属性。

```
 style.font.colour_index = xlwt.Style.colour_map['white'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-03T15:42:20.007

***替代解决方案：***

如果您可以摆脱[xlwt 中定义的颜色](http://bit.ly/1NMH67F)，请访问颜色信息网站，如[http://www.colorhexa.com/90ee90](http://www.colorhexa.com/90ee90)并获得最接近的匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-03T18:38:15.810

我建议使用以下代码：

```
from xlwt import Workbook,XFStyle,Borders, Pattern, Font, easyxf

styleOK = easyxf('pattern: fore_colour light_blue;'
                          'font: colour green, bold True;') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T23:58:58.870

对于字体颜色**font.color**应该这样做，对于单元格背景颜色有一个类似的问题：

[python xlwt设置单元格的自定义背景颜色](https://stackoverflow.com/questions/7746837/python-xlwt-set-custom-background-colour-of-a-cell)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-30T08:51:52.640

style = xlwt.easyxf('pattern: pattern solid, fore_colour light_blue;''font: color white, bold True;')

```
 sheet.write(row, 0, "Code", style)
    sheet.write(row, 1, "Name", style)
    sheet.write(row, 2, "bottle",style) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-17T07:43:53.747

```
from xlwt import *
import xlwt

w = Workbook()
sheet1= w.add_sheet('Test')

st = xlwt.easyxf('pattern: pattern solid;')
st.pattern.pattern_fore_colour = 20 #random color number
sheet1.write(0, 0,'Random Text',st)

w.save('Random_xls.xls') 
```

# build - 我是否必须在我想要支持的最旧的 Linux 操作系统次要版本上构建我的程序？

> ID：15649486
> 
> 赞同：2
> 
> 时间：2013-03-26T23:43:59.057
> 
> 标签：build, dependencies, build-process, compatibility, redhat

如果我希望我的软件在 Red Hat Linux 6.0 上运行，我必须在 6.0 上构建它吗？或者我可以在 6.3 上构建它吗？（5.X 的类似问题）我在问一个关于共享库的运行时影响以及在构建过程中被吸入的类似“自动”依赖项的一般性问题。而且我只对次要版本之间的分歧感兴趣。我知道主要版本之间会有更多的变化。我对 RH 和 RH 派生的发行版特别感兴趣。我的程序是用 C 和 C++ 编写的。我认为我需要担心的最大依赖是 C 和 C++ 的 GCC 运行时库。是否有一个网页可以用来验证哪些 GCC 更新在哪些 RH 次要版本中使用？

需要明确的是：我理解未来更新版本之间兼容性的目标和承诺。从 6.1 升级到 6.2 不应破坏我现有的应用程序。为了在较新的更新上构建并在较旧的更新上运行，我需要反向兼容性。我需要 6.1 与基于 6.2 构建的东西兼容。一般来说，这种兼容性不可能在所有配置文件、库等广泛传播的基础上实现。但我只需要一小部分反向兼容性。

我有一个在 6.1 上成功设计、编写和构建的应用程序。现在我想在 6.2 上构建它，但我希望它仍然在 6.1 上正确运行。Linux 上是否有一个通用的软件发布实践，您总是必须在您想要支持的最旧的更新版本上构建？还是大多数人使用反复试验来确定他们的应用程序是否在较旧的更新版本上运行？如果您使用试错法，等式中会出现多少“错误”？

# jsp - 跨部署在同一服务器上的应用程序共享 Cookie

> ID：15649488
> 
> 赞同：1
> 
> 时间：2013-03-26T23:44:13.130
> 
> 标签：jsp, servlets, cookies, glassfish

我有两个基于 struts 1.3 框架的应用程序并部署到 glassfish 服务器 3.1.2

app-1 有自己的 url http:localhost:8080/app-1

&

app-2 有自己的 url http:localhost:8080/app-2

功能：app-1 & app-2 支持多种语言。用户通过 app-1 登录并为所选语言设置 cookie。

后来，从 app-1 到 app-2 有几个 href。href 更通用。根据在 app-1 选择的语言到达 app-2 后，将显示各种页面。

问题是， app-2 如何知道 app-1 中选择的语言是什么？如何将 app-1 设置的 cookie 设置为 app-2 ？或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:41:35.880

在创建 cookie 时将`path`Cookie 中的属性设置为。`/`Servlet 3.0 提供了应用程序设置cookie 属性的API。

如果设置了路径（应用程序上下文根），则仅当 url 以该路径开头时才会发送 cookie。将其设置为`/`将使浏览器能够为该域内的所有应用程序发送 cookie。

> ## Java 文档：setPath ......
> 
> **public void setPath(java.lang.String uri)**
> 指定客户端应返回 cookie 的 cookie 路径。
> 
> 该 cookie 对您指定的目录中的所有页面以及该目录的子目录中的所有页面都是可见的。cookie 的路径必须包含设置 cookie 的 servlet，例如 /catalog，它使 cookie 对服务器上 /catalog 下的所有目录可见。
> 
> 有关为 cookie 设置路径名的更多信息，请参阅 RFC 2109（可在 Internet 上获得）。
> 
> 参数：uri - 指定路径的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:42:28.080

出于安全原因，似乎无法访问为不同路径设置的 cookie，即使它位于同一域中：

[https://stackoverflow.com/a/1968108/1916098](https://stackoverflow.com/a/1968108/1916098)

您可以尝试另一种方法：如果两个 servlet 共享相同的上下文，您可以使用它 (ServletContext) 在它们之间共享信息。看这个：

[如何在两个或多个 Servlet 之间共享变量或对象？](https://stackoverflow.com/questions/123657/how-can-i-share-a-variable-or-object-between-two-or-more-servlets)

# sql-server - 在 SQL 中获取两个值中的较大者

> ID：15649490
> 
> 赞同：0
> 
> 时间：2013-03-26T23:44:40.717
> 
> 标签：sql-server

我有一个 SQL Server 表。此表有两个表：Order 和 OrderInProgress。这两个表具有相似的结构：

```
Order[InProgress]
-----------------
ID (uniqueidentifier)
CreateDate
... 
```

我需要获取最新的 Order 或 OrderInProgress

```
DECLARE @latestOrderID uniqueidentifier
@latestOrderID = ? 
```

如何将 @latestOrderID 设置为最新的 Order 或 OrderInProgress ID？我无法弄清楚如何在 SQL 中执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:51:06.997

Try this, which should be more efficient whenever it matters.

```
 select top 1 ID from (
        select top 1 ID from Order order by ID desc
      union all
        select top 1 ID from OrderInProgress order by ID desc
    ) T
    order by ID desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:47:35.127

你有没有尝试过：

```
SELECT TOP 1 @latestOrderID = ID FROM [Order] ORDER BY CreateDate DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:47:37.343

```
SELECT * FROM
(SELECT 'Order' tablename, max(ID) max_id FROM Order
UNION
SELECT 'OrderInProgress' tablename, max(ID) max_id FROM OrderInProgress
) maxes ORDER BY max_id DESC 
```

# android - “空”附加到分隔字符串中的数据库输入值

> ID：15649504
> 
> 赞同：2
> 
> 时间：2013-03-26T23:46:37.210
> 
> 标签：android, sqlite, null, initialization

我想知道是否有人可以告诉我我的方式的错误——我已经为这个问题苦苦挣扎了两天，并意识到这一定是初始化变量的基本错误，但是……这反映了我的 java 知识水平.

我在一个分隔字符串上得到一个数据库结果，其中每个段都附加了“null”。看来无论我如何更改初始化......好吧，两天！

我在类标题区域声明以下内容：

```
private String strListContent;
private SQLiteDatabase database;
private DatabaseHelper helper2 = new DatabaseHelper(this);
private static final String fields[] = { "_id", "listTitle", "listType",
        "listContent", "dateCreated", "dateModified" };
private ArrayList<String> textArray = new ArrayList<String>();
private ArrayList<Integer> imageArray = new ArrayList<Integer>(); 
```

然后将我的项目连接起来

```
final ImageButton addItem = (ImageButton) findViewById(R.id.btnToAddItem);
addItem.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
    itemEdit = (EditText) findViewById(R.id.editTextItem);

    if (itemEdit.getText().toString().equals("")) {
        showToastMessage("Please enter an item to add...");

    } else {

        String newListItem = itemEdit.getText().toString();
        strListContent += newListItem + "|~|";

...
}}} 
```

我正在使用以下基本 SQLiteOpenHelper：

```
public class DatabaseHelper extends SQLiteOpenHelper {

public static final String KEY_ID = "_id";

public DatabaseHelper(Context context) {
    super(context, "Cursor", null, 1);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE IF NOT EXISTS list_data ("
            + KEY_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, listTitle TEXT, listType TEXT,    listContent TEXT, dateCreated TEXT, dateModified TEXT)");

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Steps to upgrade the database for the new version ...
}
} 
```

要这样插入值：

```
ImageButton saveAndBack = (ImageButton) findViewById(R.id.btnSaveBack);
saveAndBack.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {

        String title = null;
        String listContent = null;
        Calendar javaCalendar = null;

        title = titleEdit.getText().toString();
        title = (title=="" || title==null)?"Untitled List":title;
        strListContent = (strListContent=="" || strListContent==null)?"No Items|~|":strListContent;
        listContent = strListContent;
        String type = "R"; //"Regular List"

        javaCalendar = Calendar.getInstance();
        String currentDate = javaCalendar.get(Calendar.MONTH) + "/" +   (javaCalendar.get(Calendar.DATE) + 1) + "/" + javaCalendar.get(Calendar.YEAR);

        database = helper2.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put("listTitle", title);
        values.put("listType", type);
        values.put("listContent", listContent);
        values.put("dateCreated", currentDate);
        values.put("dateModified", currentDate);

        database.insert("list_data", null, values);

        Intent i = new Intent(RegularList.this, ActivityMain.class);
        startActivity(i);

    }
});

}
//
//End of OnCreate(){}
// 
```

然后，当我从另一个活动中检索时：

```
DatabaseHelper helper = new DatabaseHelper(this);
database = helper.getWritableDatabase();

    Cursor data = database.query("list_data", fields, null, null, null,
            null, null);
    Integer tindex = data.getColumnIndex("listTitle");
    Integer iindex = data.getColumnIndex("listType");
    Integer cindex = data.getColumnIndex("listContent");

    itemCount = 0;
    for (data.moveToFirst(); !data.isAfterLast(); data.moveToNext()) {
        showToastMessage(data.getString(cindex));
        titleArrayList.add(data.getString(tindex));

        if (data.getString(iindex) == "R") {
            imageArrayList.add(R.drawable.listview_regular);
        } else if (data.getString(iindex) == "L") {
            imageArrayList.add(R.drawable.listview_location);
        } else {
            imageArrayList.add(R.drawable.listview_regular);
        }

        itemCount++;

    }

    data.close();

... 
```

我可以在 toast 消息中看到分隔字符串中的每个项目的前面都附加了“null”......其他值都很好。我希望这不是太冗长，但是……有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:54:18.110

在我看来，您可能只是`strListContent`在首次附加到字符串之前没有初始化字符串：

```
strListContent += newListItem + "|~|"; 
```

当你这样做时，你会在你试图附加的值前面得到一个“null”前缀，就像你观察到的那样。

也许你可以在声明中初始化：

```
private String strListContent = ""; 
```

# jsf - java.lang.ClassCastException：无法转换为 java.util.List

> ID：15649507
> 
> 赞同：0
> 
> 时间：2013-03-26T23:46:47.900
> 
> 标签：jsf, primefaces

我有两个类有关系@OneToMany（支付和拆分）下面的代码：

```
@Entity
@Table(name="pagamento")
public class Pagamento implements Serializable { //Class Pay

@Id 
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name="idpagamento")
private int id;
...
@ManyToOne()
@JoinColumn(name="idconta")
private Divida coddivida; 
```

及以下类拆分

```
@Entity
@Table(name="divida")
public class Divida implements Serializable{

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "idconta")
private int id;
...
@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER,                   mappedBy="coddivida",        targetEntity = Pagamento.class)
private List<Pagamento> pagamento; 
```

我搜索了下面的数据代码：

```
 public List<Divida> getDividas(){
    return getCleanListOfObjects(Divida.class,"from Divida divida");
} 
```

我试图在数据表中显示如下：

```
<p:dataTable id="paneluser" value="#{dividaFaces.listofDivida}" var="divida" selection="#{dividaFaces.selectedDivida}"
                     rowKey="#{divida.id}" selectionMode="sigle" emptyMessage="Não existe Dívida" paginator="true" rows="10">
            <f:facet name="header">
                Panel de Dívidas Cadastradas
            </f:facet>
            <p:column headerText="Descricão">
                #{divida.descricao}
            </p:column>
            <p:column id="pagar" headerText="Tela de Pagamento">
                <p:commandButton value="Pagar">
                    <p:ajax oncomplete="pagetela.show()" update="telapgamento"/>
                </p:commandButton>
            </p:column>
            <f:facet name="footer">
                Financé v#{sistema.VERSION}
            </f:facet>
        </p:dataTable> 
```

但它给出了以下错误：

```
Hibernate: 
 /* 
from
Divida divida */ select
    divida0_.idconta as idconta0_,
    divida0_.datadeinicio as datadein2_0_,
    divida0_.descricaodespesa as descrica3_0_,
    divida0_.empresa as empresa0_,
    divida0_.exercicio as exercicio0_,
    divida0_.observacao as observacao0_,
    divida0_.operacaobancaria as operacao7_0_,
    divida0_.parcela as parcela0_,
    divida0_.tipolancamento as tipolanc9_0_,
    divida0_.vencimento as vencimento0_ 
from
    divida divida0_
Lista de Dividas: []
Hibernate: 
 /* 
from
Divida divida */ select
    divida0_.idconta as idconta0_,
    divida0_.datadeinicio as datadein2_0_,
    divida0_.descricaodespesa as descrica3_0_,
    divida0_.empresa as empresa0_,
    divida0_.exercicio as exercicio0_,
    divida0_.observacao as observacao0_,
    divida0_.operacaobancaria as operacao7_0_,
    divida0_.parcela as parcela0_,
    divida0_.tipolancamento as tipolanc9_0_,
    divida0_.vencimento as vencimento0_ 
    from
    divida divida0_
    Mar 26, 2013 8:34:31 PM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
    SEVERE: Error Rendering View[/menu/principal.xhtml]
    java.lang.ClassCastException: br.com.finance.model.Divida cannot be cast to java.util.List
at    org.primefaces.component.datatable.DataTable.findSelectedRowKeys(DataTable.java:977)
at org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:624)
at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:234)
at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:196)
at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:82)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:881)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:439)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:57:06.147

您正在使用 selectionMode="sigle"。请注意单曲中缺少的“n”。您在这里遇到的异常与 Hibernate 无关。

# ajax - 带有 AJAX/JSON 的 Twitter Bootstrap 模式中的 Rails form_for

> ID：15649508
> 
> 赞同：2
> 
> 时间：2013-03-26T23:47:10.660
> 
> 标签：ajax, json, ruby-on-rails-3, twitter-bootstrap

我无法让 Rails form_for 表单在 Bootstrap 模式中工作并使用 AJAX 更新表。我遵循了[http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html](http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html)上的指南，但无济于事。我还尝试按照此问题底部链接中的建议进行操作。

在索引视图上，我有一个驱动程序表和一个添加新驱动程序的按钮。该按钮会显示带有新驱动程序表单的模式。提交表单后，我希望模式关闭并且新驱动程序按字母顺序出现在驱动程序表中。现在发生的情况是模式出现并显示表单，但单击提交按钮什么也不做。模态不会关闭，并且新驱动程序不会添加到数据库中。

**以下是app/views/drivers/index.html.erb**的摘要：

```
<div>
  <a href="#driverAddModal", role="button", class="btn btn-medium btn-primary", data-toggle="modal">Add Driver</a>
  <%= render 'new_driver' %>
</div>
<div>
  <table id="drivers" class="table table-hover"> 
    <thead>
      <%= render 'list_header' %>
    </thead>
    <tbody>
      <%= render @drivers.sort_by(&:last_name) %>
    </tbody>
  </table>
</div> 
```

**这是app/views/drivers/_new_driver.html.erb**的模态部分：

```
<div id="driverAddModal", class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3 id="driverAddModalLabel">Add Driver</h3>
  </div>
  <div class="modal-body"> 
    <%= form_for @driver, remote: true do |f| %>
      Last Name
      <%= f.text_field :last_name %>
      <!--more form fields-->
      <%= f.submit "Add Driver", class: "btn btn-large btn-primary" %>
    <% end %> 
  </div>
</div> 
```

**应用程序/控制器/drivers_controller.rb**：

```
class DriversController < ApplicationController
  def new
    @driver = Driver.new
  end

  def create
    @driver = Driver.new(params[:driver])

    respond_to do |format|
      if @driver.save
        format.html { redirect_to @driver, notice: 'Driver added.' }
        format.js   {}
        format.json { render json: @driver, status: :created, location: @driver }
      else
        format.html { render action: "new" }
        format.json { render json: @driver.errors, status: :unprocessable_entity }
      end
    end
  end

  def index
    @driver = Driver.new
    @drivers = Driver.all
    respond_to do |format|
      format.html
    end
  end
end 
```

**应用程序/视图/驱动程序/create.js.erb**：

```
$("<%= escape_javascript(render @driver) %>").appendTo("#drivers"); 
```

**应用程序/资产/javascript/drivers.js.coffee**：

```
$(document).ready ->
  $("#new_driver").on("ajax:success", (e, data, status, xhr) ->
    $("#new_driver").append xhr.responseText
  ).bind "ajax:error", (e, xhr, status, error) ->
    $("#new_driver").append "<p>ERROR</p>" 
```

以下是我检查过的其他链接：

[http://www.alfajango.com/blog/rails-3-remote-links-and-forms-data-type-with-jquery/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms-data-type-with-jquery/) [http://www.alfajango.com/blog/rails-3-remote-链接和表单/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/) [http://mrdanadams.com/2011/partials-ajax-form-submit-rails/#.UVDJuuC8K00](http://mrdanadams.com/2011/partials-ajax-form-submit-rails/#.UVDJuuC8K00)

[带有 Bootstrap 模态视图的 Rails 应用程序，包含表单、提交和消失模态视图，无需重新加载页面](https://stackoverflow.com/questions/14087235/rails-app-with-bootstrap-modal-view-containing-form-submit-and-disappear-modal)

[当 Twitter Bootstrap 模式窗口包含 Rails 表单助手时显示错误](https://stackoverflow.com/questions/10016195/displaying-errors-when-a-twitter-bootstrap-modal-window-contains-a-rails-form-he?rq=1)

[带有引导程序的“模态形式”部分工作](https://stackoverflow.com/questions/10258799/modal-form-with-bootstrap-on-rails-works-partially?rq=1)

[在 Rails 中提交表单后，引导模式不会关闭](https://stackoverflow.com/questions/13783037/bootstrap-modal-not-dismissing-after-form-submit-in-rails)

[Rails 3.1 和 Twitter Bootstrap 模式玩得不好？](https://stackoverflow.com/questions/9777991/rails-3-1-and-twitter-bootstrap-modal-dont-play-nice)

不幸的是，我只是不知道如何将这些页面上的建议应用到我的应用程序中。我是 Rails 和一般编程的新手，这是我第一次涉足 AJAX 或 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:20:25.017

看来您对 Rails 很陌生。就您而言，我建议您在提交表单时去阅读日志文件。并且还记录 params[:driver] 以查看是否所有字段都在那里，并在您的模式中观察验证。将 driver.errors.inspect 放在 driver.save 之后，看看验证是否是原因。

总结：

1.  如果有提交请求到您的创建控制器，请检查日志。
2.  输出所有参数以查看所有内容均按预期提交。
3.  在成功范围内输出“成功”，如果保存失败则输出 driver.errors.inspect。

然后你很高兴去看看所有的错误。

哦，我建议你看 RailsCast，他们把所有东西都放在那里了。

# bash - Bash 重复第一行

> ID：15649509
> 
> 赞同：0
> 
> 时间：2013-03-26T23:47:14.390
> 
> 标签：bash, .bash-profile

我刚刚编辑了我的 .bash_profile 以添加 git 分支显示。我基于我在网上找到的一个版本，但现在当我在 shell 中写一些东西时，在行尾，它会覆盖第一行，然后它开始换行到新行。

```
function proml {
  case $TERM in
    xterm*)
     TITLEBAR='\[\033]0;\u@\h:\w\007\]'
    ;;
    *)
    TITLEBAR=""
    ;;
  esac

PS1="${TITLEBAR}\
\w$WHITE\$(parse_git_branch)\\e[m$ " 
```

这是 parse_git_branch 函数

```
function parse_git_branch {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/[\1]/'
} 
```

由于我对 bash_profile 了解不多，所以我不知道错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:32:00.797

假设`$WHITE`包含用于设置文本颜色的控制代码，您需要将其括起来 `\[ ... \]`以防止`bash`认为这些字符会影响提示的长度。

```
function proml {
  case $TERM in
    xterm*)
     TITLEBAR='\[\033]0;\u@\h:\w\007\]'
    ;;
    *)
    TITLEBAR=""
    ;;
  esac
}

PS1="${TITLEBAR}\
\w\[$WHITE\]\$(parse_git_branch)\[\e[m\]$ " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:51:39.547

这是问题吗？函数末尾缺少大括号`proml`>？

```
function proml {
  case $TERM in
    xterm*)
     TITLEBAR='\[\033]0;\u@\h:\w\007\]'
    ;;
    *)
    TITLEBAR=""
    ;;
  esac

PS1="${TITLEBAR}\
\w$WHITE\$(parse_git_branch)\\e[m$ "
} 
```

# php - 将数据直接传递给客户端

> ID：15649510
> 
> 赞同：0
> 
> 时间：2013-03-26T23:47:20.167
> 
> 标签：php, zend-framework

我想知道是否有一种方法可以将数据（更具体地说是图像）直接传递给客户端，而无需使用 PHP Zend 框架将图像数据存储在服务器磁盘和/或内存上？

我目前正在这样做：

```
$data = "raw image data";
$type = "image/jpeg";

$response = $this->getResponse();

$response->setHeader('Content-Type', $type, true);
$response->setHeader('Content-Length', strlen($data), true);
$response->setHeader('Content-Transfer-Encoding', 'binary', true);
$response->setHeader('Cache-Control', 'max-age=3600, must-revalidate', true);
$response->setBody($data);

$response->sendResponse();
exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:22:07.720

你所缺少的只是`$response->sendResponse();`在最后`exit;`，你很好。

# iphone - 删除 iOS 6 ScrollView 中心对齐

> ID：15649518
> 
> 赞同：2
> 
> 时间：2013-03-26T23:48:02.983
> 
> 标签：iphone, ios, ios6, uiscrollview, uipagecontrol

我正在尝试在 iOS 6 中创建页面控件。我正在使用界面构建器来创建滚动视图，并使用自由形式的模拟指标拉伸了屏幕。

滚动视图中有 5 个不同的视图，中心视图出现问题。我想将它与左视图对齐，而不是与超级视图的中心对齐。问题是当我将它设置为距左视图 0pt 时，它会自动创建一个约束对齐中心 X 到超级视图。

Align Center X to Superview 导致无法满足约束崩溃。

我该如何修复/删除这个？ ![滚动视图](../Images/a10300320ffede908fff7f7ec5fa4b79.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:17:23.043

选择 page 2 和 page 3，然后选择 Editor > Pin > Horizo​​ntal Spacing。这会在第 2 页的右边缘和第 3 页的左边缘之间创建一个约束。现在您可以选择和删除居中约束。

基本上，规则很简单，除非存在完全确定所有内容的位置/大小的其他约束，否则您不能在 Xcode 中删除约束。您可以使用 Pin 菜单创建这些约束。

# python - 序列化具有 Django Auth User 外键的模型

> ID：15649522
> 
> 赞同：1
> 
> 时间：2013-03-26T23:48:40.327
> 
> 标签：python, django, tastypie, django-users, jsonserializer

如何序列化具有 Django auth 用户的外键的模型，以便可以检索用户名？这是我通过 Tastypie 尝试过的：

```
def dehydrate(self, bundle):
    posts = Post.objects.annotate(num_poster = Count('likedby')).order_by('-num_poster')
specificpost = posts.get(id__exact=bundle.data['id'])
likedList = specificpost.likedby.all()[:7]
liked_data = serializers.serialize('python', likedList, fields=('user__username', 'userPic'), use_natural_keys=True)
liked_actual = [d['fields'] for d in liked_data]
    bundle.data['likepreview'] = liked_actual
    return bundle 
```

在我得到的 JSON 中，我可以看到 userPic 字段但没有用户名字段，这是为什么呢？

```
 {
"meta": {
    "limit": 20,
    "next": null,
    "offset": 0,
    "previous": null,
    "total_count": 17
},
"objects": [{
    "id": "19",
    "liked": 0,
    "likepreview": [{
        "userPic": "http://s3.amazonaws.com/post/mike/profile/photo/mikeProfilePic.jpg"
    } 
```

# sql-server - 在 SQL 中拆分和连接值

> ID：15649525
> 
> 赞同：2
> 
> 时间：2013-03-26T23:48:49.613
> 
> 标签：sql-server

我有如下两个不同的表，并且对 sql 查询有特定要求。

```
Table1:
Name   RuleNumber
Tom    1,2
Pete   1,3

Table2:
RuleNumber  Description
1           Rule1
2           Rule2
3           Rule3 
```

如何获得类似下面的 sql 查询结果

```
Name    Description
Tom     Rule1, Rule2
Pete    Rule1, Rule3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:10:58.417

您首先需要一个自定义拆分函数来分隔分隔列表，然后使用它`FOR XML PATH`来组合描述。这是您的最终查询

```
select  t1.Name,
        STUFF(( SELECT ',' + Description
                FROM    table2 AS t2 
                WHERE   t2.ruleNumber in (select s from dbo.fn_split(t1.RuleNumber, ','))
        ORDER BY ruleNumber
        FOR XML PATH('')), 1, 1, '') as 'Description'
from    table1 t1 
```

这是拆分功能的代码。

```
create function [dbo].[fn_Split]
(
    @String     varchar(8000) ,
    @Delimiter  varchar(10)
)
returns @tbl table (s varchar(1000))
as

begin
declare @i int ,
    @j int
    select  @i = 1
    while @i <= len(@String)
    begin
        select  @j = charindex(@Delimiter, @String, @i)
        if @j = 0
        begin
            select  @j = len(@String) + 1
        end
        insert  @tbl select substring(@String, @i, @j - @i)
        select  @i = @j + len(@Delimiter)
    end
    return
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:09:41.870

Table1 的 RuleNumber 如何有多个值？它是一个字符串吗？我会假设它是：

```
Name / RuleNumber
Tom  / 1
Tom  / 2 
```

然后，查询将是：

```
select
  Name,
  ( 
     select Description 
     from Table2 as t2 
     where t1.ruleNumber = t2.ruleNumber
  ) as Description
from 
  table1 as t1 
```

# parsing - 发件人号码 (SMS) 的地址类型

> ID：15649527
> 
> 赞同：0
> 
> 时间：2013-03-26T23:49:00.533
> 
> 标签：parsing, sms

我想知道`type-of-address`存在什么样的发件人号码。例如，下面的 PDU 包含`91` `type-of-address`：

07 `91`9742020096F6400B `91`9742039333F7

`91` 表示电话号码的国际格式，我必须`+`在此号码之前添加。有时我会遇到地址类型，例如`D0`,`C8`等等。那么它们是什么意思呢？我在哪里可以找到有关它的信息？提前致谢。

- 更新 -

我找到了名为`PDUspy`. 它可以识别`type-of-address`。所以我发现`D0`-`Alpha (acc. to TS 03.38)`并且数字表示为文本，例如`Nikolas`。`C8`- `subscriber number`。但是它们是什么意思以及如何根据其类型解析这些数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T17:58:33.983

TON/NPI 信息可在[3GPP TS 23.040](http://www.3gpp.org/ftp/Specs/html-info/23040.htm)的第 9.1.2.5 节中找到。地址值（电话号码）是 BCD 左编码，用可选的“F”填充以使其均匀，然后交换。

从 SMS 主动命令中解析 A​​PDU 数据的示例（也需要参考[3GPP TS 11.14](http://www.3gpp.org/ftp/Specs/html-info/1114.htm)）

```
D0 16 81 03 06 13 01 82 02 81 83 0B 0B 01 00 03 81 00 F7 00 F2 02 70 6C

PROACTIVE SIM COMMAND - SEND SHORT MESSAGES - GSM MODE [D0]
  Command Details Tag [81]
        Length : 03
        Command Number : 06
        Command Type : Send Short Message
        Command Qualifier : 01H, 0000 0001 (SMS packing by the ME required)
  Device Identities Tag [82]
        Length : 02
        Source device : SIM
        Destination device : Network
  SMS TPDU Tag [0B]
        Length : 0B
        TP-MTI : SMS Submit/Submit Report
        TP-RD  : Instruct the SC to accept an SMS-SUBMIT
        TP-VPF : TP-VP field not present
        TP-RP  : TP-Reply Path parameter is not set in this SMS SUBMIT/DELIVER
        TP-UDHI : The TP-UD field contains only the short message
        TP-SRR  : a report is not requested
        TP-MR : 00
        TP-DA : 
              Number of digits: 3
              TON/NPI : Unknown - ISDN/Telephone numbering plan
              Address Value : "007"
        TP-PID : 00
        TP-DCS : F2
        TP-UDL : 02
        TP-UD : "pl" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T09:26:01.623

数字表示为文本，您可以使用 7bit 类型对其进行解码。CEF4FACD0ECF01=尼古拉斯

# ios - NSFileManager UUID 应用目录

> ID：15649529
> 
> 赞同：0
> 
> 时间：2013-03-26T23:49:07.090
> 
> 标签：ios, nsfilemanager

我正在使用 NSFileManager 并且我正在尝试将文件复制到路径“/var/mobile/Applications/7AC2295E-2775-41EA-B017-AB4048A09F0C/Document”，该文件将正常复制。

但是每次我删除并再次安装应用程序时，“7AC2295E-2775-41EA-B017-AB4048A09F0C”的路径都会随机更改。那么，有没有办法获取我的应用程序的正确路径或搜索文件名，如果文件存在则替换\删除..etc文件？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:59:06.797

如果您的应用程序需要将文件写入其 Documents 目录。
使用类似的东西：

```
NSString  *filePath = NSHomeDirectory(); 
```

然后将您的实际文件名附加到 filePath。
然后在 FileManager 调用中使用 filePath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:52:40.893

您不必使用绝对路径，使用类似

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
[[NSFileManager defaultManager] copyItemAtPath:[[NSBundle mainBundle]pathForResource:@"test" ofType:@"txt"] toPath:[documentsDirectory stringByAppendingPathComponent:@"test.txt"] error:nil]; 
```

这演示了将文件`test.txt`从应用程序包复制到文档目录。做这样的事情来创建一个文件`test.txt`

```
[[NSFileManager defaultManager] createFileAtPath:[documentsDirectory stringByAppendingPathComponent:@"test.txt"] contents:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://a-cstudios.com/text.json"]] attributes:nil]; 
```

编辑

如果您使用它并想在越狱设备上使用它，那么在沙箱中放入东西就像我之前说的一样，所以您仍然不必使用 UUID。如果你想把一些东西放在系统目录中，那就是你会使用类似的东西`/usr/include/`，或者你想要的任何地方。要将某些内容放入另一个应用程序沙箱中，您*必须*使用完整路径，并且您必须知道 UUID，因为那不是沙箱的一部分。因此，除非您将文件复制到*您*制作的应用程序中，否则您必须使用完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:56:39.640

访问`Documents`应用沙箱中目录的正确方法是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = paths[0]; 
```

然后你创建你的路径：

```
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"filename.ext"]; 
```

# sql - 查找一个字段更改时的开始日期和结束日期

> ID：15649530
> 
> 赞同：4
> 
> 时间：2013-03-26T23:49:08.413
> 
> 标签：sql, sliding-window

我在表格中有这些数据

```
FIELD_A   FIELD_B     FIELD_D
249052903   10/15/2011 N
249052903   11/15/2011 P ------------- VALUE CHANGED
249052903   12/15/2011 P
249052903   1/15/2012   N ------------- VALUE CHANGED
249052903   2/15/2012   N
249052903   3/15/2012   N
249052903   4/15/2012   N
249052903   5/15/2012   N
249052903   6/15/2012   N
249052903   7/15/2012   N
249052903   8/15/2012   N
249052903   9/15/2012   N 
```

当 FIELD_D 中的值发生变化时，它会形成一个组，我需要该组中的最小和最大日期。查询应该返回

```
FIELD_A   GROUP_START   GROUP_END
249052903   10/15/2011  10/15/2011
249052903   11/15/2011  12/15/2011
249052903   1/15/2012              9/15/2012 
```

到目前为止，我看到的示例中 Field_D 中的数据是唯一的。这里数据可以如图所示重复，首先是“N”，然后变为“P”，然后又变回“N”。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:05:52.400

您可以使用分析函数 - LAG、LEAD 和 COUNT() OVER，如果您的 SQL 实现支持它们。SQL Fiddle[在这里](http://sqlfiddle.com/#!6/0c0fb/2)。

```
WITH EndsMarked AS (
  SELECT
    FIELD_A,
    FIELD_B,
    CASE WHEN FIELD_D = LAG(FIELD_D,1) OVER (ORDER BY FIELD_B)
         THEN 0 ELSE 1 END AS IS_START,
    CASE WHEN FIELD_D = LEAD(FIELD_D,1) OVER (ORDER BY FIELD_B)
         THEN 0 ELSE 1 END AS IS_END
  FROM T
), GroupsNumbered AS (
  SELECT
    FIELD_A,
    FIELD_B,
    IS_START,
    IS_END,
    COUNT(CASE WHEN IS_START = 1 THEN 1 END)
      OVER (ORDER BY FIELD_B) AS GroupNum
  FROM EndsMarked
  WHERE IS_START=1 OR IS_END=1
)
  SELECT
    FIELD_A,
    MIN(FIELD_B) AS GROUP_START,
    MAX(FIELD_B) AS GROUP_END
    FROM GroupsNumbered
    GROUP BY FIELD_A, GroupNum; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:31:43.933

这在 SQL 中使用子查询很容易表达：

```
select Field_A, Field_D, min(Field_B) as Group_Start, max(Field_B) as Group_End
from (select t.*,
             (select min(field_B)
              from t t2
              where t2.field_A = t.field_A and
                    t2.field_B > t.field_B and
                    t2.Field_D <> t.field_D
             ) as TheGroup
      from t
     ) t
group by Field_A, Field_D, TheGroup 
```

这是使用相关子查询分配组标识符。标识符是更改位置的第一个`Field_B`值`Field_D`。

您没有提及您正在使用的数据库，因此它使用标准 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:03:52.530

不要使用 SQL 来解决这个问题，因为它需要在记录之间进行比较，因此不可能在 SQL 中通过单个表扫描来完成。它需要一个全表扫描加上至少一个自身的连接。用命令式语言实现解决方案是微不足道的，它只需要一次表扫描。编辑：存储过程最好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-09T09:05:28.180

在您有多个 Field_A 的地方，我稍微修改了答案。这应该总是有效的:-)

```
WITH EndsMarked 
AS 
(
    SELECT 

         [Field_A]
        ,[Field_B]
        ,CASE 
            WHEN LAG([Field_D],1) OVER (PARTITION BY [Field_A] ORDER BY [Field_A],[Field_B]) IS NULL
             AND ROW_NUMBER() OVER (PARTITION BY [Field_A] ORDER BY [Field_B]) = 1 
            THEN 1
            WHEN LAG([Field_D],1) OVER (PARTITION BY [Field_A] ORDER BY [Field_A],[Field_B]) > 0
              <> LAG([Field_D],0) OVER (PARTITION BY [Field_A] ORDER BY [Field_A],[Field_B]) > 0
            THEN 1 
            ELSE 0 
        END AS IS_START
       ,CASE 
            WHEN LEAD([Field_D],1) OVER (PARTITION BY [Field_A] ORDER BY [Field_A],[Field_B]) IS NULL
             AND ROW_NUMBER() OVER (PARTITION BY [Field_A] ORDER BY [Field_B] DESC) = 1 
            THEN 1
            WHEN LEAD([Field_D],0) OVER (PARTITION BY [Field_A] ORDER BY [Field_A],[Field_B]) 
              <> LEAD([Field_D],1) OVER (PARTITION BY [Field_A] ORDER BY [Field_A],[Field_B]) 
            THEN 1          
            ELSE 0 
        END                 AS IS_END

    FROM 
    (
        SELECT

            [Field_A]
           ,[Field_B]
           ,[Field_D]
           ,[Aantal Facturen]

        FROM [T]

    )   F

)
,GroupsNumbered 
AS 
(
  SELECT
     [Field_A]
    ,[Field_B]
    ,IS_START
    ,IS_END
    ,COUNT(CASE
               WHEN IS_START = 1 
               THEN 1 
           END)                     OVER (ORDER BY [Field_A]
                                                  ,[Field_B]) AS GroupNum
  FROM      EndsMarked
  WHERE     IS_START        = 1 
     OR     IS_END          = 1
)

    SELECT

        [Field_A]
        ,MIN([Field_B]) AS GROUP_START
        ,MAX([Field_B]) AS GROUP_END

    FROM GroupsNumbered

    GROUP BY [Field_A], GroupNum 
```

# sql - 一种抽象的导轨模型

> ID：15649531
> 
> 赞同：0
> 
> 时间：2013-03-26T23:49:08.343
> 
> 标签：sql, activerecord, ruby-on-rails-3.2

在 rails/activerecord 中，是否可以有三个 ruby​​ 类，其中两个继承自一个主类，然后有两个单独的锅碗瓢盆表。像这样...

```
class Tupperware < ActiveRecord::Base

end

class Pot < Tupperware

end

class Pan < Tupperware

end 
```

优点是我可以使用 Tupperware.find() 方法和其他一些东西，而不必为每种不同的类型进行自定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:04:19.573

我确信它适用于 mongoid——我自己做过几次。我不确定这是否适用于相关的数据库引擎......但你实际上是在问一个你可以回答自己的问题，只需按照你所说的去做。

*[回应OP的评论]：*

我只是说您应该使用相关数据库（例如 mySQL 或 SQLite）来测试 Rails 应用程序，并完全按照您的想法定义模型。

我在我的应用程序中使用了一个抽象模型。它运行良好，并且该`find()`方法正如您所期望的那样运行，但我正在研究 Mongoid，所以我不使用`ActiveResource`并且不能确定这是否适合您。你唯一能做的就是尝试。

在这里，看看我的代码摘录： [https ://gist.github.com/ellmo/5262681](https://gist.github.com/ellmo/5262681)

# php - php没有从请求中获取数据，从curl发布

> ID：15649532
> 
> 赞同：1
> 
> 时间：2013-03-26T23:49:10.703
> 
> 标签：php, curl

我正在从命令行发出 curl 请求。

我的 curl 请求如下所示：

```
curl -X POST -H "Accept: application/json"  -H "Content-type: application/json"  -d '{ "BookingByCustomer" : "testUser", "BookingDate" : "11111111", "TotalCost" : "11", "NetAmount"  : "11" }' http://serverIP:port/test.php 
```

我的PHP代码：

```
 <?php
   /** global variables */
    $request_called = ($_SERVER['REQUEST_METHOD'] == 'GET') ? 'GET' : 'POST';

    if($request_called == 'POST')
    {
         handle_post_request();
    }
    if($request_called == 'GET')
     {
       handle_get_request();
     }

    function handle_get_request (){
      echo "Get Request has been called!";   
   }

    function handle_post_request (){
   $json = $_SERVER['HTTP_JSON'];
    print_r ($_SERVER);
   }
 ?> 
```

但 $_SERVER 似乎没有 json 数据。我错过了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:54:02.177

没有像`$_SERVER['HTTP_JSON']`中这样的条目`$_SERVER`。您需要从中获取 POST 内容`$_POST`。

但是由于您没有为 JSON 数据提供变量名称，因此您应该使用以下方式获取原始 POST 内容

```
$json = file_get_contents("php://input"); 
```

另一种解决方案是为您的 JSON 数据分配一个变量名称：

```
curl -X POST ... -d 'HTTP_JSON={ ... }' 
```

只要您的 JSON 中没有禁用字符（如？或 &），您就是安全的，否则您还必须对 JSON 字符串进行 URL 编码。这就是为什么我建议使用第一个解决方案`php://input`。这样您就不必关心 URL 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:06:52.650

此函数返回 $_SERVER 的值，而不是 $json 变量的值。

```
 function handle_post_request (){
   $json = $_SERVER['HTTP_JSON'];
    print_r ($_SERVER);
   } 
```

其次，我相信您必须使用 $_POST 才能使其正常工作：

```
 function handle_post_request (){
   $json = $_POST['HTTP_JSON'];
    print_r ($json, true);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:54:09.360

您正在使用 curl 发布信息，因此请使用`$_POST`而不是`$_SERVER`.

```
function handle_post_request (){
    $json = $_POST['HTTP_JSON'];
    print_r ($_POST);
} 
```

# javascript - DOM Get Element Outside the HTML Tag

> ID：15649535
> 
> 赞同：-4
> 
> 时间：2013-03-26T23:49:38.757
> 
> 标签：javascript, jquery, html

Hi I have some big problem please kindly help me..

I have a html structure like this:

```
<html>
<body>
<div id="getInHere">Get me</div>
<iframe>
<html>
<head>

$('#clickme').click(function(){
  // i don't what should be put here to get to #getInHere div
});

</head>
<body>

<a href="#" id="clickme">Click me</a>
</body>
</html>
</iframe>
</body>
</html> 
```

I must append something on the `#getInHere` and I don't know how. Please help.

Thanks.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T23:51:20.853

**jQuery：**

```
$('#clickme').click(function() {
    $('#getInHere').append('text');
}); 
```

**jsFiddle 现场示例：http:** [//jsfiddle.net/P89sa/](http://jsfiddle.net/P89sa/)

# java - cant understand why arraylist hasElement method not working in java

> ID：15649536
> 
> 赞同：0
> 
> 时间：2013-03-26T23:49:46.267
> 
> 标签：java, arrays, io, text-files

the repeated items in the text file should not be added to the list but this program is outputing every word from the list dont know why hasElement method is not working.I need to create an program object which should be called MTFencoder.java and it should accept the name of a text file as a command-line argument such that if there exists a text file called story.txt then your program could be invoked with the following command:

java MTFencoder test.txt

It should produce one line of output for each word of the input file, such that when a word is first encountered then the output is:

0 word

and if the word has been encountered before then the output is a single integer specifying the index of that word in a list of known words ordered according to the most recently used (MRU order).

```
import java.util.*;
import java.io.*;

class extmycase
{

    public static void main(String [] args)
    {
        Scanner scan=null;
        Scanner scan1=null;
        wordlist word=null;
        String s;
        int count=0;

         try
         {
            scan=new Scanner(new File(args[0]));
            scan1=new Scanner(new File(args[0]));
            while(scan1.hasNext())
            {
                scan1.next();
                count++;
            }

            System.out.println("No.of words : " + count);

            word = new wordlist(count);
            while(scan.hasNext())
            {
                s=scan.next();
                if(word.hasElement(s)==true)
                {
                    System.out.println("has element");
                }
                else
                {
                    word.add(s);
                }
            }   
            word.showlist();
        }
        catch(Exception e)
        {
            System.err.println("unable to read from file");
        }
        finally
        {
            // Close the stream
            if(scan != null) 
            {
                scan.close( );
            }
            if(scan1 !=null)
            {
                scan1.close();
            }
        }
     }
} 
```

the wordlist program is

```
import java.lang.*;
import java.util.*;

public class wordlist
{

    public String data [];
    private int count;
    private int MAX;

    public wordlist(int n)
    {
        MAX = n;
        data = new String[MAX];
        count = 0;
    }

    // Adds x to the set if it is not already there

    public void add(String x)
    { 
        if (count<MAX)
        {
            data[count++] = x;
        }
    }

    // Removes x from set by replacing with last item and reducing size

    public void replace(String x)
    {
        for(int i=0;i<count;i++)
        {
            if(data[i]==x) 
            {
                data[count]=data[i];
                for(int j=i;j<count;j++)
                    data[j]=data[j+1];  
            }    
        }       
    }

    // Checks if value x is a member of the set

    public boolean hasElement(String x)
    {
        for(int i=0;i<=count;i++)
        {
            if(data[i].equals(x))
            { 
                return true;
            }
        }
        return false;
    }

    public int findIndex(String x)
    {
        for(int i=0;i<=count;i++)
        {
            if(data[i].equals(x))
            {
                return i;
            }
        }
          return 0;
    }

    public void showlist()
    {
        int l=0;
        for(int i=0;i<count;i++)
        {
            System.out.println(data[i]);
            l++;
        }
        System.out.println(l);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:02:03.250

您的单词表永远不会包含任何元素。构造它，将所有内容设置为 0，然后您查看它是否包含单词，当然它永远不会这样做。此外，两个扫描器都指向同一个文件，因此一个存在的每个单词都必须存在于另一个中，并且首先会找到所有单词，从而使这个半冗余。

# python-2.7 - Using Python to Manipulate HTTP Headers

> ID：15649537
> 
> 赞同：0
> 
> 时间：2013-03-26T23:50:04.433
> 
> 标签：python-2.7, automation, http-headers, urllib2

So I'm trying to use Python to automate 508 compliance checking. There're a few hundred pages on our site, and at the moment a person is actually going through the site every week and tries to enter all the URLs by hand. The UIUC link below checks the request for the referer header and then returns the evaluation of that site. I can't get the request to actually work. I've looked all through SO and can't find anything that helps. The code that is screwy is below and below that the error message.

```
def fae(urltofae):
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
#[('Referer': urltofae)]
r = opener.open('http://www.fae.cita.uiuc.edu/evaluate/link/')
print r
fae("http://www.example.com/") 
```

And the Error:

```
 File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in fae
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 8] nodename nor servname provided, or not known> 
```

And when I attempt to try to change the referer header (instead of the User-agent) I get formatting errors instead of it even getting to the request even though the format is identical to the one that it didn't complain about for the user-agent.

I'm still very much a new programmer so if I'm missing something blatant then I'm terribly sorry, but I have tried everything I can think of. Thanks in advance, cheers.

* * *

OK so I switched my strategy, and it worked. Unfortunately, I have no idea why the below code worked, and the stuff above kept erroring me, but I have seen a couple of similar-ish questions (no specific answers) around the google so I figured I should post it.

vlz, appreciate the help, cheers.

```
def faeRequest2(urltofae):
    r = urllib2.Request('http://fae.cita.illinois.edu/evaluate/link/', headers={'User-agent':'Mozilla/5.0', 'Referer':urltofae})
    c = urllib2.urlopen(r)
    print c.read() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:51:55.367

我在那里看不到任何错误。网址正确吗？尝试使用

`'http://fae.cita.uiuc.edu/evaluate/link/'`

代替

`'http://www.fae.cita.uiuc.edu/evaluate/link/'`

后者似乎没有领先任何地方。

# php - email parser or php imap functions?

> ID：15649540
> 
> 赞同：0
> 
> 时间：2013-03-26T23:50:20.503
> 
> 标签：php, parsing, email

I want a very reliable way of retrieving data from email headers. Should I use an email parser like eg [https://github.com/plancake/official-library-php-email-parser](https://github.com/plancake/official-library-php-email-parser) or are php imap functions sufficient to get that data? What is best practice? Is there any experience? I can imagine that there is a lot of differences in formatting email headers composed by many email clients. That is why I want a reliable solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:03:59.793

我在一个项目中使用了内置的 IMAP 函数，该项目需要按日期处理电子邮件，实际上不需要任何其他东西。您可以尝试使用以下代码查看它们是否对您有用；

```
<?php

/* connect to gmail */
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = 'user@gmail.com';
$password = 'pass123';

/* try to connect */
$inbox = imap_open($hostname, $username, $password, OP_READONLY,1) or die('Cannot connect to Gmail: ' . print_r(imap_last_error()));
$emails = imap_search($inbox, 'ALL');

/* if emails are returned, cycle through each... */
if ($emails) {

    foreach ($emails as $email_number) {

        echo imap_fetchbody($inbox, $email_number, 0);
        echo imap_fetchbody($inbox, $email_number, 1);
        echo imap_fetchbody($inbox, $email_number, 2);

    }

}

imap_close($inbox);
?> 
```

棘手的部分是`imap_fetchbody($inbox, $email_number, 0)`。这部分将返回标题。获得它们后，您可以根据需要解析或使用它。

希望能帮助到你。

# javascript - Performance concerns when storing data in large arrays with Javascript

> ID：15649543
> 
> 赞同：2
> 
> 时间：2013-03-26T23:50:37.333
> 
> 标签：javascript, arrays, performance, javascript-objects

I have a browser-based visualization app where there is a graph of data points, stored as an array of objects:

```
data = [
    {x: 0.4612451, y: 1.0511} , 
    ... etc
] 
```

This graph is being [visualized with d3 and drawn on a canvas](https://stackoverflow.com/q/12310024/586086) (see that question for an interesting discussion). It is interactive and the scales can change a lot, meaning the data has to be redrawn, and the array needs to be iterated through quite frequently, especially when animating zooms.

From the back of my head and reading other Javascript posts, I have a vague idea that optimizing dereferences in Javascript can lead to big performance improvements. Firefox is the only browser on which my app runs really slow (compared to IE9, Chrome, and Safari) and it needs to be improved. Hence, I'd like to get a firm, authoritative answer the following:

How much slower is this:

```
// data is an array of 2000 objects with {x, y} attributes
var n = data.length;
for (var i=0; i < n; i++) {
    var d = data[i];
    // Draw a circle at scaled values on canvas
    var cx = xs(d.x);
    var cy = ys(d.y);
    canvas.moveTo(cx, cy);
    canvas.arc(cx, cy, 2.5, 0, twopi);
} 
```

compared to this:

```
// data_x and data_y are length 2000 arrays preprocessed once from data
var n = data_x.length;
for (var i=0; i < n; i++) {
    // Draw a circle at scaled values on canvas
    var cx = xs(data_x[i]);
    var cy = ys(data_y[i]);
    canvas.moveTo(cx, cy);
    canvas.arc(cx, cy, 2.5, 0, twopi);
} 
```

`xs` and `ys` are d3 scale objects, they are functions that compute the scaled positions. I mentioned the above that the above code may need to run up to **60 frames per second** and can **lag like balls on Firefox**. As far as I can see, the only differences are array dereferences vs object accessing. Which one runs faster and is the difference significant?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:03:27.543

这些循环优化中的任何一个都不太可能产生任何影响。通过这样的循环2000次根本不算多。

我倾向于怀疑`canvas.arc()`在 Firefox 中实现缓慢的可能性。您可以通过替换`canvas.lineTo()`我知道在 Firefox 中快速的调用来测试这一点，因为我在我的[PolyGonzo](https://code.google.com/p/polygonzo/)地图中使用了它。该页面上测试地图上的“所有 3199 个县”视图绘制了 3357 个多边形（有些县有多个多边形），总共 33,557 个点，并且它为每个点循环通过一个类似的画布循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:38:01.467

感谢 JsPerf 的建议，我实现了一个快速测试。如果其他人在这里添加他们的结果，我将不胜感激。

[http://jsperf.com/canvas-dots-testing](http://jsperf.com/canvas-dots-testing)：截至 2013 年 3 月 27 日的结果：

![在此处输入图像描述](../Images/06c3bce75e949c0deb793032f71c04f4.png)

到目前为止，我观察到以下情况：

*   数组或对象是否更好似乎取决于浏览器和操作系统。例如，Chrome 在 Linux 上的速度相同，但对象在 Windows 上更快。但对于许多人来说，它们几乎是相同的。
*   Firefox 只是其中的乌龟，这也有助于证实 Michael Geary 的假设，即它`canvas.arc()`只是超级慢。

# c++ - Compiling C++, organising include files

> ID：15649546
> 
> 赞同：0
> 
> 时间：2013-03-26T23:50:57.330
> 
> 标签：c++, compilation

I'm trying to modify and compile uvccapture on the Raspberry Pi. I got the source [from here](http://staticwave.ca/source/uvccapture/) (it's just a few files).

(I think) the only external files it needs are those of `jpeglib` which I downloaded from [here](http://sourceforge.net/projects/libjpeg/files/libjpeg/6b/).

When compiling, where do I put the jpeglib source files? UVCCapture has the following line:

```
#include <jpeglib.h> 
```

**Does that mean I should put the jpeglib source files in the same directory as the UVCCapture source files? That seems messy. How can I set up the compiler (modify the Makefile?), and where should I put the jpeglib files so that I don't need to change the uvccapture include file lines?**

And a side question, how come it only includes the .h file and not the .c file? (I'm pretty new to C/C++)

Here is the Makefile:

```
CC=gcc
CPP=g++
APP_BINARY=uvccapture
VERSION = 0.4
PREFIX=/usr/local/bin

WARNINGS = -Wall

CFLAGS = -std=gnu99 -O2 -DLINUX -DVERSION=\"$(VERSION)\" $(WARNINGS)
CPPFLAGS = $(CFLAGS)

OBJECTS= uvccapture.o v4l2uvc.o

all:    uvccapture

clean:
    @echo "Cleaning up directory."
    rm -f *.a *.o $(APP_BINARY) core *~ log errlog

install:
    install $(APP_BINARY) $(PREFIX)

# Applications:
uvccapture: $(OBJECTS)
    $(CC)   $(OBJECTS) $(XPM_LIB) $(MATH_LIB) -ljpeg -o $(APP_BINARY) 
```

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:47:15.487

源文件 ( `uvccapture.c`) 不关心头文件 ( `jpeglib.h`) 在哪里——至少它不应该关心。必须告诉编译器在哪里寻找头文件；传统上，头文件放在某个目录中，例如`inc_files/`，并使用类似的命令调用编译器

```
gcc -blah -blah -blah -Iinc_files  -c -o uvccapture.o uvccapture.c 
```

如果你使用 Make，那么 Make 应该执行这样的命令。所以要么编辑makefile，要么将头文件放在当前目录中。

在 C/C++ 中使用的明智方法`#include`是让源文件和头文件包含头文件。也就是说，`foo.c`其中会有几行，例如：

```
#include <bar>
#include "baz.h" 
```

并且`baz.h`可能有几行，例如：

```
#include <vector>
#include "qux.h" 
```

你几乎看不到`#include foo.c`，因为这几乎从来都不是一个好主意。

# java - Implementing BubbleSort at the end of QuickSort

> ID：15649549
> 
> 赞同：0
> 
> 时间：2013-03-26T23:51:05.027
> 
> 标签：java, quicksort, bubble-sort

I finally got my bubblesort and quicksort working but am curious as to how to change my code so that when I reach the last 10 elements being sorted in my quicksort I instead change to bubblesort for faster overhead times.

```
static int num_comps;   

public static void main(String[] args) 
{
    Random rnd = new Random();

    // max size of array and number of N sets
    int array_size = 32768;
    int num_datasets = 10;

    // array set to max size
    int[] vals = new int[array_size];

    // temporary array with allocated array to max size
    int[] tvals = new int[array_size];

    // array to hold operation counts
    int[] op_counts = new int[num_datasets];
    int[] op_counts2 = new int[num_datasets];

    // array to hold the size of each array
    int[] arraySizes = new int[num_datasets];

    int i;
    int size;

    for (i = 0, size = 64; i < num_datasets; i++, size *= 2)
        arraySizes[i] = size;

    for (int iter = 0; iter < num_datasets; iter++)
    {
        int curr_size = arraySizes[iter];

        // fill array with random values form 0-4999
        for (i = 0; i < curr_size; i++)
            vals[i] = rnd.nextInt(4999);

        //set the temporary array to the actual array
        for (i = 0; i < curr_size; i++)
            tvals[i] = vals[i];

        // run the bubble sort algorithm
        num_comps = 0;
        bubbleSort(tvals, curr_size);
        op_counts[iter] = num_comps;
        //System.out.println("Num comps at " + iter + " is " + num_comps);

        num_comps = 0;
        quickSort(tvals, curr_size);
        op_counts2[iter] = num_comps;
    }

    System.out.println("N     Bubble Sort OP Count  Quick Sort OP Count");
    for (int k = 0; k < num_datasets; k++)
    {
    System.out.println(arraySizes[k] + "\t\t" + op_counts[k] + "\t\t\t" + op_counts2[k]);
    }
}

static void bubbleSort(int vals[], int curr_size)
{
    int temp;
    for (int i = 0; i < curr_size - 1; i++)
    {
        for (int j = 0; j < curr_size - i - 1; j++)
        {
            // swap
            num_comps = num_comps + 1;
            if (vals[j+1] < vals[j])
            {
                temp = vals[j];
                vals[j] = vals[j+1];
                vals[j+1] = temp;
            }
        }
    }
}

static void quickSort(int vals[], int curr_size)
{
    quickSort_R(vals, 0, curr_size - 1);
}

static void quickSort_R(int vals[], int l, int r)
{
    if (l < r)
    {
        if ((r-1) == 1) // two elements - trivial sort
        {
            num_comps = num_comps + 1;
            if (vals[l] > vals[r])
                swap(vals, l, r);
            return;
        }

        // partition the elements on the pivot s
        int s = partition(vals, l, r);

        //recurse on the two partitioned values
        quickSort_R(vals, l, s-1);
        quickSort_R(vals, s+1, r);
    }
}

static int partition(int vals[], int l, int r)
{
    int mid = (l+r) / 2;
    int p = medianOfThree(vals, l, r);

    // swap with first element
    swap(vals, l, p);

    int pivot_val = vals[l];
    int i = l;
    int j = r+1;

    do
    {
        num_comps = num_comps + 1;
        do
        {
            i = i + 1;
            num_comps = num_comps + 1;
        } while (vals[i] < pivot_val);
        do
        {
            j = j - 1;
            num_comps = num_comps + 1;
        } while (vals[j] > pivot_val);
        swap(vals, i, j);
    } while (i < j);

    swap(vals, i, j); // undo last swap
    swap(vals, i, j); // put pivot at j, its correct position

    return j;
}

static int medianOfThree(int vals[], int first, int last)
{
    int mid = (first+last) / 2;
    if (vals[first] <= vals[mid] && vals[mid] <= vals[last])
    {
        num_comps = num_comps + 1;
        return mid;
    }
    else if (vals[mid] <= vals[first] && vals[first] <= vals[last])
    {
        num_comps = num_comps + 1;
        return first;
    }
    else
        return last;
}

static void swap(int vals[], int i, int j)
{
    int temp = vals[i];
    vals[i] = vals[j];
    vals[j] = temp;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:46:49.013

EJP 是对的，但如果您愿意，只需像这样修改您的代码：

```
public static void quickSort_R(int vals[], int l, int r) {
    if (l < r) {
        if((r-l) < 10) {
            bubbleSort(vals, r-l); //<--HERE
        }
        else {
            if ((r-1) == 1) { // two elements - trivial sort
                num_comps = num_comps + 1;
                if (vals[l] > vals[r])
                    swap(vals, l, r);
                return;
            }

            // partition the elements on the pivot s
            int s = partition(vals, l, r);

            //recurse on the two partitioned values
            quickSort_R(vals, l, s-1);
            quickSort_R(vals, s+1, r);
        }
    }
} 
```

# javascript - jQuery：检查复选框是否被选中

> ID：15649552
> 
> 赞同：0
> 
> 时间：2013-03-26T23:51:08.027
> 
> 标签：javascript, jquery, checkbox, jquery-selectors

我想在提交表单时突出显示所有未选中的复选框。我总共有六个复选框`.new_order`，我已经开始编写函数，但我有点卡住如何为**每个**未选中的复选框添加突出显示类`.new_order`。

```
$('#orderconfirm').click(function () {
    if ($('.modal .modal-body .new_order :checkbox').is(':unchecked') {
        $(this).addClass('highlight');
    }
}); 
```

这段代码会遍历每个复选框吗？我觉得我错过了什么。此外，此代码必须禁用按钮，直到选中每个复选框。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:58:40.617

这是以下方法的工作[jsFiddle](http://jsfiddle.net/RtpKB/1/)。

您可以使用 jQuery 的[each()](http://api.jquery.com/jQuery.each/)来遍历您的类，并将您的 CSS 类添加到符合您条件的任何元素中：

```
$('#orderconfirm').click(function () {
  $('.new_order').each(function(){
     if($(this).prop('checked') === false) {
        $(this).addClass('highlight');
     }
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:52:27.783

尝试`:not(:checked)`在选择器的末尾使用，调用`.addClass()`它以将类添加到所有返回的对象。

[演示](http://jsfiddle.net/RtpKB/)

```
$('#orderconfirm').click(function () {
    $('.modal .modal-body .new_order input:checkbox:not(:checked)')
        .addClass('highlight');
}); 
```

# java - 将整数向量传递给两个单独的函数，但改变的数据被传递给其他函数

> ID：15649553
> 
> 赞同：0
> 
> 时间：2013-03-26T23:51:11.877
> 
> 标签：java

*更新：已解决做了一个深拷贝，感谢帮助

我正在使用整数向量来模拟一些排序算法，当我将数字插入测试向量并打乱顺序并将其传递给排序函数时，如果我将 void 排序函数传递给相同的向量，则当向量被排序时先前传递新排序向量的函数被传递给它后面的函数，因为它已经排序我无法显示排序过程。例如在我的以下代码中

```
@SuppressWarnings("unchecked") // Removes error given at when adding elems to int_vec
    public static void CreateVec (int array_len)
    {
      Vector <Integer> int_vec = new Vector(array_len);
      int temp_int = 1;
      int low_bound = 0;
      int high_bound = array_len - 1;

          for(int i = 0; i<array_len; i++)
          {
              int_vec.addElement(temp_int);// creating a vec in respect to array len
              temp_int ++;
          }

             Collections.shuffle(int_vec);
             System.out.println("OG vec: " + int_vec); //original vector (random order)
             BubbleSort(int_vec,array_len); //sending int_vec to bubble sort
             InsertionSort(int_vec,array_len); // retrieves newly sorted vector sorted from BubbleSort (problem)

    } 
```

所以我的问题是，我怎样才能继续发送我的测试向量（int_vec）和随机排序的元素，而不是继续将排序的向量发送到其他算法。请注意，我正确实现了这些算法，如果我注释掉对其他算法函数的函数调用，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:54:53.947

创建`int_vec`with`new Vector<Integer>(int_vec)`的副本并将副本传递给您的排序方法。这样，只有副本会被排序，并且`int_vec`仍然会随机排序，并准备再次复制以进行下一个排序方法。

是的，这是一个浅拷贝，但这里不需要深拷贝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:02:42.650

it doesnt seem to be working i did the following

```
Vector <Integer> int_vec = new Vector(array_len);    
Vector <Integer> copy_bub = new Vector <Integer> (int_vec);
//...//
BubbleSort(int_vec,array_len);
InsertionSort(copy_bub,array_len); 
```

and this is the output

```
Output:   
    OG vec: [4, 8, 9, 6, 10, 2, 1, 5, 3, 7]
    Copy vec: [4, 8, 9, 6, 10, 2, 1, 5, 3, 7]
    Bubble Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    Insertion Vec: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

# java - 简单框架中的自定义匹配器可以反序列化但不能序列化

> ID：15649554
> 
> 赞同：3
> 
> 时间：2013-03-26T23:51:13.570
> 
> 标签：java, xml-serialization, simple-framework

我正在努力让 XMLGregorianCalendar 变得简单。这样做我创建了一个匹配器和转换：

```
public class MyMatcher implements Matcher {

    @Override
    public Transform<?> match(@SuppressWarnings("rawtypes") final Class type) throws Exception {
        if (type.equals(XMLGregorianCalendar.class)) {
            return new XMLGregorianCalendarTransform();
        }

        return null;
    }

} 
```

和

```
public class XMLGregorianCalendarTransform implements Transform<XMLGregorianCalendar> {

    @Override
    public XMLGregorianCalendar read(final String value) throws Exception {
        return DatatypeFactory.newInstance().newXMLGregorianCalendar(value);
    }

    @Override
    public String write(final XMLGregorianCalendar value) throws Exception {
        return value.toXMLFormat();
    }

} 
```

当这段代码用于反序列化时，效果很好：

```
 final Serializer serializer = new Persister(new MyMatcher());
        obj = serializer.read(type, new ByteArrayInputStream(xml.getBytes(Charset.forName(UTF8_ENCODING)))); 
```

不幸的是，当我尝试使用它进行序列化时，它不起作用，它抛出`Failed to create xml string for the object. org.simpleframework.xml.transform.TransformException: Transform of class com.sun.org.apache.xerces.internal.jaxp.datatyp e.XMLGregorianCalendarImpl not supported`错误，我的 Transform 的 write 方法永远不会被调用（通过断点检查）。

这是我用来序列化的代码：

```
 final ByteArrayOutputStream baos = new ByteArrayOutputStream();
        os = new DataOutputStream(baos);
        final Serializer serializer = new Persister(new MyMatcher());
        serializer.write(this, os);
        os.flush();
        xmlString = new String(baos.toByteArray(), Charset.forName(UTF8_ENCODING)); 
```

write 方法抛出异常。我使用[了带有 Simple XML (org.simpleframework.xml) 的序列化第三方类](https://stackoverflow.com/questions/3626208/serialization-third-party-classes-with-simple-xml-org-simpleframework-xml)作为参考，这就是让我开始反序列化工作的原因，但现在我被困住了。我不确定如何进行。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:51:13.570

事实证明，答案就在问题中。声明的错误`XMLGregorianCalendarImpl`不受支持。这不是我的 Matcher 检查的内容。我只需要改变：

```
 if (type.equals(XMLGregorianCalendar.class)) { 
```

至

```
 if (XMLGregorianCalendar.class.isAssignableFrom(type)) { 
```

我希望这可以帮助别人。

# url - 覆盖 Google+ (Google Plus) 移动网站重定向

> ID：15649562
> 
> 赞同：2
> 
> 时间：2013-03-26T23:51:40.337
> 
> 标签：url, google-plus

有没有办法使用 URL 参数（或其他东西）强制 Google+ 页面的桌面版本？

例如，此 URL 指向 Google+ 本地页面，这在桌面上很好：https: [//plus.google.com/107958373256144660254/about](https://plus.google.com/107958373256144660254/about)

但在移动设备上，它会重定向到[https://plus.google.com/app/basic/107958373256144660254/about](https://plus.google.com/app/basic/107958373256144660254/about)，并带有精简版的 Google+ 本地页面。有没有办法强制这个 URL 上的页面看起来像桌面版本？像[https://plus.google.com/app/basic/107958373256144660254/about](https://plus.google.com/app/basic/107958373256144660254/about) **?mobile=false**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T13:28:20.227

Gady 没有记录的方法可以做到这一点。Google+ 网站似乎正在基于用户代理进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T18:42:02.803

想要在平板电脑上强制使用 google plus 的桌面视图？试试[https://plus.google.com/?fd=1](https://plus.google.com/?fd=1)

?fb=1 部分针对移动设备上的桌面。

# string - C++/CX - 如何将存储为 String^ 的数字转换为字节？

> ID：15649563
> 
> 赞同：0
> 
> 时间：2013-03-26T23:51:46.320
> 
> 标签：string, type-conversion, byte, c++-cx

我有一个 C++/CX Windows 8 应用程序，我需要执行类似于以下转换的操作：

```
String^ foo = "32";
byte bar = <the numeric value of foo> 
```

如何将存储在 String^ 中的数字转换为字节类型？我失去了我通常用来实现这一目标的所有 C# 魔法！

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:54:52.433

假设 C++/CX 类似于 C#，您就会遇到麻烦。根本不是这种情况，它是纯 C++，只是带有一些语言扩展，可以更轻松地处理 WinRT 类型。这不适合使用 Platform::String 类型，它**不是**通用字符串类。标准 C++ 库已经涵盖了这一点。该课程被故意削弱以阻止您想到的用法。这篇[MSDN 库文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh699879.aspx)很好地解释了它：

> 当您将字符串来回传递给 Windows 运行时类中的方法时，或者当您跨应用程序二进制接口 (ABI) 边界与其他 Windows 运行时组件交互时，请使用 Platform::String 类。Platform::String 类为几种常见的字符串操作提供了方法，但它并没有被设计成一个功能齐全的字符串类。在您的 C++ 模块中，使用标准 C++ 字符串类型（例如 wstring）进行任何重要的文本处理，然后将最终结果转换为 Platform::String^，然后再将其传递到公共接口或从公共接口传出。在 wstring 或 wchar_t* 和 Platform::String 之间进行转换既简单又高效。

所以适当的代码应该类似于：

```
#include <string>
...
    std::wstring foo(L"32");
    auto bar = static_cast<unsigned char>(std::stol(foo)); 
```

# php - 在 joomla 2.5 上选择具有不同 catid 的文章

> ID：15649564
> 
> 赞同：0
> 
> 时间：2013-03-26T23:51:58.557
> 
> 标签：php, mysql, joomla

我有 joomla 2.5，其中文章包含父类别和子类别。如下所示：

*   第1条分类为新闻->校园->研究所
*   第2条分类为新闻->校园->大学
*   第三条分类为新闻->校园->研究所
*   第4条分类为新闻->校园->大学

在这里，新闻是校园的类别父类，依此类推。我知道每个类别都有独特的 catid。但是，在数据库中，joomla 只根据最后一个类别记录每篇文章。所以，如果我想根据新闻 id 获取文章，那么结果是空数组。所以，我必须选择学院或大学ID。但是，我想要的是如何将文章与学院和大学类别放在一起。

有没有人可以帮助我如何解决joomla 2.5的php问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:53:04.667

类别存储为[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)。如果您从数据库中检索“新闻”类别，则“lft”和“rgt”列包含所有子类别的边界值。查询

```
SELECT * FROM #__categories AS category
LEFT JOIN  #__categories AS parent
    ON category.lft BETWEEN parent.lft AND parent.rgt
WHERE parent.id = 3 
```

将为您提供 ID 为 3 的类别的所有子类别。请改用“新闻”类别的 ID。

请记住，查询绝不是优化的，只是为了说明该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:48:48.963

如果您想在模块中显示文章，您可以使用允许显示预选类别中的内容的文章模块之一，例如模块**文章类别** （选项 > 过滤选项 > 类别 > 学院、大学）

如果您想在主（内容）窗口而不是模块中显示这些文章：

1.  创建新文章
2.  put `"{loadposition xx}`or `{loadmodule yyy}`code inside（请参阅[如何将模块放入文章中？](http://docs.joomla.org/How_do_you_put_a_module_inside_an_article%3F)）

如果您对使用的数据库查询感兴趣，则基础是[ContentModelArticles 模型](https://github.com/joomla/joomla-cms/blob/master/components/com_content/models/articles.php)，这些模块和菜单项*Content> Featured* article 使用这些模型，它也允许预选类别。

# java - 在 Java 中对文本文件进行排序

> ID：15649567
> 
> 赞同：2
> 
> 时间：2013-03-26T23:52:15.640
> 
> 标签：java, file, sorting, text

我有一个包含单词列表的文本文件，我需要使用 Java 按字母顺序对其进行排序。这些词位于单独的行上。

我将如何解决这个问题，将它们读入数组列表然后对其进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T00:31:35.230

这是一个简单的四步过程，Stackoverflow Questions 解决了四个步骤中的三个：

1.  [读取每一行并将它们转换为 Java 字符串](https://stackoverflow.com/questions/5868369/how-to-read-a-large-text-file-line-by-line-in-java)
2.  将每个 Java 字符串存储在一个数组中（不要认为您需要对此的引用。）
3.  [对数组进行排序](https://stackoverflow.com/questions/2496841/sort-arraylist-alphabetically)
4.  [写出数组中的每个 Java 字符串](https://stackoverflow.com/questions/409784/simplest-way-to-print-an-array-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T07:50:15.373

```
import java.io.*;
import java.util.*;

public class example
{
    TreeSet<String> tree=new TreeSet<String>();
    public static void main(String args[])
    {
        new example().go();
    }
    public void go()

    {
        getlist();
        System.out.println(tree);

    }
     void getlist()
    {
        try
        {
            File myfile= new File("C:/Users/Rajat/Desktop/me.txt");
            BufferedReader reader=new BufferedReader(new FileReader(myfile));
            String line=null;
            while((line=reader.readLine())!=null){
                addnames(line);

            }
        reader.close();
        }

        catch(Exception ex)
        {
            ex.printStackTrace();
        }

    }
    void addnames(String a)
    {
           tree.add(a);
           for(int i=1;i<=a.length();i++)
           {

           }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T16:11:37.293

这是使用集合排序的示例：

```
public static void sortFile() throws IOException
{     
    FileReader fileReader = new FileReader("C:\\words.txt");
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    List<String> lines = new ArrayList<String>();
    String line = null;
    while ((line = bufferedReader.readLine()) != null) {
        lines.add(line);
    }
    bufferedReader.close();

    Collections.sort(lines, Collator.getInstance());

    FileWriter writer = new FileWriter("C:\\wordsnew.txt"); 
    for(String str: lines) {
      writer.write(str + "\r\n");
    }
    writer.close();
} 
```

您也可以像这样使用自己的排序规则：

```
Locale lithuanian = new Locale("lt_LT");
Collator lithuanianCollator = Collator.getInstance(lithuanian); 
```

# laravel - 插入一对多关系

> ID：15649572
> 
> 赞同：0
> 
> 时间：2013-03-26T23:52:43.737
> 
> 标签：laravel

我有三个表：blogs、posts、blog_post。这是我的代码。

```
$post = new Post(); 
$post->title    = HTML::entities(Input::get('title'));
$post->content  = Input::get('content');
$post->status   = isset($_POST['save']) ? 2 : 1;
$post->save();

$blog = Blog::where('user_id', '=', Auth::user()->id)->first();

$post = $blog->posts()->insert($post); 
```

我得到：

> SQLSTATE [23000]：违反完整性约束：1062 键 'PRIMARY' 的重复条目 '47'

我有一对多的关系船。一篇文章可以属于许多博客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:27:37.070

at13 答案是正确的。您正在保存帖子，然后尝试通过博客关系再次插入。

根据您的意见，您应该有：

```
$post->has_many_and_belongs_to('blog');
$blog->has_many_and_belongs_to('post'); 
```

考虑到这一点，要创建多对多关系，您应该使用`attach()`. 例如：

```
$post = new Post;
$post->title = "Foo Bar";
// ...
$post->save();

$user = Auth::user();
$blog = $user->blogs()->first();
$blog->posts()->attach($post); 
```

**Obs：**我不太明白帖子属于多个博客的概念。

# java - Java中charAt()方法的问题

> ID：15649575
> 
> 赞同：0
> 
> 时间：2013-03-26T23:52:51.110
> 
> 标签：java, string, netbeans, char

我正在尝试用 Java 制作一个基于文本的 Hangman。

这是我的 Java 代码：

```
package hangman;

import java.util.Random;
import java.util.Scanner;
import java.lang.String;

public class Hangman {

    public static void main(String[] args) {
        // TODO code application logic here
        Scanner chez = new Scanner(System.in);
        Scanner waffle = new Scanner(System.in);
        Random randomGenerator = new Random();
        StringBuilder displayWord = new StringBuilder("______________________________");
        String theWord = null;
        String preLetter;
        //String sbDisplayWord;
        char letter = 0;
        int randomNumber;
        int lengthOfWord;
        int numberOfLetterInWord = 0;
        int gDisplay;
        int guessWordNumber = 0;
        String guessWord;
        RandomWord troll = new RandomWord();    
        randomNumber = randomGenerator.nextInt(12);
        //Fill var with the word.
        theWord = troll.wordDecide(randomNumber);

        System.out.println ("Welcome to Hangman!");

        lengthOfWord=theWord.length( );
        System.out.println("This word has " + lengthOfWord + " letters.");

        System.out.println("You have 20 guesses.");

        for (int g =19; g >= 0; g--) {    

            System.out.println("If you want to guess the word, type 0\. If you want to guess a letter, type 1.");
            guessWordNumber=chez.nextInt();

            if (guessWordNumber==0) {
                System.out.println("Enter the word now. Remember, don't capitalize it.");
                guessWord=waffle.nextLine();
                if (guessWord.equals(theWord)) {
                    System.out.println("YOU WIN");
                    System.exit(0);
                } else {
                    System.out.println("Sorry, this wasn't the correct word.");
                }
            } else if (guessWordNumber==1) {

                System.out.println("Please enter the letter you wish to guess with.");
                //System.out.println("It will tell you if you have guessed right for any of the letters. If it is blank, that means none of the letters match.");
                preLetter=chez.nextLine();
                letter=preLetter.charAt(0);
                System.out.println("");
                for(int i = 0; i <= lengthOfWord -1; i++ ) {     //-Eshan

                    if (letter == theWord.charAt( i )) {

                        numberOfLetterInWord=i+1;
                        System.out.println("This letter matches with letter number " + numberOfLetterInWord + " in the word.");
                        displayWord.setCharAt(i, letter);
                    } else {

                        numberOfLetterInWord=i+1;
                        System.out.println("This letter doesn't match with letter number " + numberOfLetterInWord + " in the word.");

                    }       

                }

                System.out.println("");
                System.out.println("The word so far is " + displayWord);
                System.out.println("");
                gDisplay = g + 1;
                System.out.println("You have " + gDisplay + " guesses left.");

            } else {
                System.exit(0);
            }

        }

        System.out.println("GAME OVER");
        System.exit(0);

    }
}

package hangman;

public class RandomWord {
    private static String[] wordArray = {
        "psychology",
        "keratin",
        "nostalgia",
        "pyromaniac",
        "chlorophyl",
        "derivative",
        "unitard",
        "pterodactyl",
        "xylophone",
        "excommunicate",
        "obituary",
        "infinitesimal",
        "concupiscent",
    };

    public String wordDecide(int randomNumber) {
        String theWord;
        theWord = wordArray[randomNumber];
        return theWord;
    }

} 
```

Netbeans 给了我这个错误：

> 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：
> java.lang.String.charAt(String.java:695)
> 处 hangman.Hangman.main(Hangman.java:56)
> Java 结果中的 0： 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:56:30.473

当您调用`charAt(0)`长度为 0 的字符串时，可能会发生这种情况。您应该在调用该方法之前检查该字符串是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:00:11.780

`StringIndexOutOfBoundsException`由于这条线，你得到了一个

```
guessWordNumber = chez.nextInt(); 
```

不消耗换行符并将字符传递到行

```
preLetter = chez.nextLine(); 
```

然后它不会阻塞，因为它已经收到了输入。这会将一个空分配`String`给`preLetter`导致异常。您可以使用[Scanner#nextLine](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)来使用此字符：

```
guessWordNumber = Integer.parseInt(chez.nextLine()); 
```

# javascript - 将包含 contentEditable 的 html 元素移动到 dom 中的另一个分支而不会失去焦点

> ID：15649577
> 
> 赞同：5
> 
> 时间：2013-03-26T23:52:59.407
> 
> 标签：javascript, jquery, html, dom, contenteditable

我希望你能帮助解决这个问题。

我有以下 html 结构（简化），它表示文档中的两个固定高度页面，其中包含页眉、页脚、正文和该正文中的多个“DataItems”（3 个只读，1 个可编辑）。还有一个“摘要”和“添加新”数据项。

我需要能够将 DataItem 的 html 块（可能包含 contentEditable 元素）移动到文档中的另一个位置。但是，如果它是被移动的元素，我需要这样做而不会失去对 contentEditable 元素的关注。

当用户在 contentEditable HTML 编辑器中键入内容并且他们正在键入的 DataItem 变得更高时，会触发此操作。当它这样做时，当底部的 DataItem 开始与页脚重叠时，它会被下推到下一页。有点像在 MS Word 中输入不允许跨页的表格单元格。

我可以获得使用 jQuery 的部分解决方案。这会将下一个同级 DataItems 从第一页移动到第二页，因为前一个同级的高度增加了，但问题是当我然后去移动具有焦点的 DataItem 时，它会失去焦点并破坏用户的输入流程. 我已经尝试在移动它后将焦点放回 contentEditable div，但是选择和范围的问题以及无法找到光标位置以及滚动条跳跃的问题，尽管它们被重置回来，证明该解决方案太不可靠了。

因此，我尝试了一种不同的方法，即将第一页的最后一个 DataItem 和下一页的第一个 DataItem（如果有）之间的所有 html 内容移动到最后一个数据项之前的位置，希望这样做可以防止html 内容编辑器不会失去焦点，但仍然给人的印象是 DataItem 已下移到第二页。

我尝试（但失败）实现的功能是在“start-here”和“end-here”div 之间剪切 html，并将其移动到“paste-here”div。div 只是作为占位符来显示应该移动的内容。

然而，尽管尝试了使用 jQuery dom 操作和 RegEx 字符串替换的各种方法，但我似乎无法想出一个不涉及替换共同祖先的解决方案——即“页面”div——因此必须替换当前contentEditable - 因此失去焦点。

有没有人知道我该如何做到这一点并保持专注，以便用户可以继续不间断地输入？

问候，杰里米 :)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style>
.Document
{
    text-align:left;
    margin: 0px auto;
    display:inline-block;
    position:relative;
    /*border: 1px solid blue;*/
}

.Pages
{
    margin: 0px auto;
    position:relative;
    display:inline-block;
    /*border: 1px solid yellow;*/
}

.PortraitPage
{
    height:29.7cm;
    width:21cm;
    background: #ffffff;
    position:relative;
}
       .FirstPage
    {
        border: 1px dotted black;
    }

    .ExtraPage
    {
        margin-top:10px;
        margin-bottom:10px;
        border: 1px dotted black;
    } 

.PageHeader
{
    border: 0px dotted #e2e2e2;
    position:absolute;
    top:0px;
    width: 18cm;
    left:0cm;
}

.PageBody
{
    border: 1px dotted #c2c2c2;
    position:absolute;
    top:4.5cm; /* this needs to be whatever the height of the header is */
    width: 18cm;
    left:1.5cm;
    /*min-height:22cm;*/
}

.PageFooter
{
    border: 1px dotted #e2e2e2;
    position:absolute;
    bottom:0px;
    width: 18cm;
    left:1.5cm;
}

.PageSeparator
{
    background: #999999;
    height: 1cm;
    width: 21cm;   
}
.InvoiceItemsForm
{
    position: relative;
    /*top: 2.5cm;*/
}

/* This prevents the space added in contentcell divs in the html entry cell just for the PageEditor */
.InvoiceItemsForm div
{
    margin-bottom: 0px;
}

.LineItem_Panel_ReadOnly
{
    position:relative;
    border: 1px solid transparent;
}

.LineItem_Panel_ReadOnly_Hover
{
    position:relative;
    border: 1px solid #C2C2C2;
    background-color:#ffffff;
}

.LineItem_Panel_Edit
{
    position:relative;
    border: 1px solid #C2C2C2;
}

.LineItem_Panel_Insert
{
    position:relative;
    border: 1px solid green;
}

    </style>
</head>
<body>
    <div id="ctl00_phContent_pnlInvoicePage" class="Page FirstPage PortraitPage">
        <div class="FirstHeader PageHeader">
            First Page Header
        </div>
        <div class="ExtraHeader HiddenExtraPageSection">
            Hidden ExtraPage Header that is copied when a new page is created
        </div>
        <div id="ctl00_phContent_pnlInvoicePageBody" class="PageSection Body PageBody">
            <div id="ctl00_phContent_pnlInvoiceItemsForm" class="InvoiceItemsForm DataSection">
                <div id="ctl00_phContent_lvLineItems_ctrl0_pnlLineItemReadOnly" class="DataItem LineItem_Panel_ReadOnly InvoiceLineItem">
                    <div class="LineItem_Panel_HTMLContent">
                        <span id="ctl00_phContent_lvLineItems_ctrl0_lblHTMLContent">
                            <p>
                                aaaaaaaaaaaaaaa</p>
                            <p>
                                aaaaaaaaaaaaaa</p>
                        </span>
                    </div>
                </div>
                <div id="ctl00_phContent_lvLineItems_ctrl1_pnlLineItemReadOnly" class="DataItem LineItem_Panel_ReadOnly InvoiceLineItem">
                    <div class="LineItem_Panel_HTMLContent">
                        <span id="ctl00_phContent_lvLineItems_ctrl1_lblHTMLContent">
                            <p>
                                bbbbbbbbbbbbbbb</p>
                            <p>
                                bbbbbbbbbb</p>
                        </span>
                    </div>
                </div>
                <div id="ctl00_phContent_lvLineItems_ctrl2_pnlLineItemReadOnly" class="DataItem LineItem_Panel_ReadOnly InvoiceLineItem">
                    <div class="LineItem_Panel_HTMLContent">
                        <span id="ctl00_phContent_lvLineItems_ctrl2_lblHTMLContent">cccccccccccccc</span>
                    </div>
                </div>
                <div id="ctl00_phContent_lvLineItems_ctrl3_pnlLineItemEdit" class="DataItem LineItem_Panel_Edit InvoiceLineItem">
                    <div id="ctl00_phContent_lvLineItems_ctrl3_pnlHTMLEditor" class="HTMLEditorPanel">
                        <div style="width: 126px; height: 20px;" id="ctl00_phContent_lvLineItems_ctrl3_txtHTMLContent$HtmlEditorExtenderBehavior_ExtenderContainer"
                            class="unselectable ajax__html_editor_extender_container">
                            <input style="display: none; visibility: hidden;" id="ctl00_phContent_lvLineItems_ctrl3_txtHTMLContent"
                                name="ctl00$phContent$lvLineItems$ctrl3$txtHTMLContent" value="ddddddddddddd"
                                type="text" autocomplete="off">
                            <div style="height: 21px; overflow: auto; clear: both;" id="ctl00_phContent_lvLineItems_ctrl3_heeHTMLContent_ExtenderContentEditable"
                                class="ajax__html_editor_extender_texteditor" contenteditable="true">
                                <p>
                                    ddddddddddddd</p>
                                <p>
                                    &nbsp;</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="DataItem">
                    <p>
                        Click <a id="ctl00_phContent_lvLineItems_lbAddLineItem" href='javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$phContent$lvLineItems$lbAddLineItem", "", true, "", "", false, true))'>
                            here</a> to add a new Data Item</p>
                </div>
                <div id="paste-here"></div>
                <div class="DataItem InvoiceTotals">
                    <div class="InvoiceSubTotal">
                        Sub Total: <span id="ctl00_phContent_lvLineItems_lblInvoiceSubTotal">18,110.00</span></div>
                    <div class="InvoiceVATTotal">
                        VAT Total: <span id="ctl00_phContent_lvLineItems_lblInvoiceVATTotal">3,111.00</span></div>
                    <div class="InvoiceTotal">
                        Invoice Total: <span id="ctl00_phContent_lvLineItems_lblInvoiceTotal">21,221.00</span></div>
                </div>
                <div id="start-cut"></div>
            </div>
        </div>
        <div class="FirstFooter PageFooter">
            First Page Footer
        </div>
        <div class="ExtraFooter HiddenExtraPageSection">
            Hidden ExtraPage Footer that is copied when a new page is created
        </div>
    </div>
    <div id="ctl00_phContent_pnlInvoicePage" class="Page ExtraPage PortraitPage">
        <div class="ExtraHeader PageHeader">
            Extra Page Header
        </div>
        <div id="ctl00_phContent_pnlInvoicePageBody" class="PageSection Body PageBody">
            <div id="ctl00_phContent_pnlInvoiceItemsForm" class="InvoiceItemsForm DataSection">
                <div id="end-cut"></div>
            </div>
        </div>
        <div class="ExtraFooter PageFooter">
            Extra Page Footer
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T04:07:55.607

我认为您没有任何理由必须重新设置任何内容才能达到您想要的效果。与其尝试依靠足够智能的浏览器来呈现您想要的东西，这将被证明在浏览器之间以及同一浏览器的不同版本之间不一致，我建议使用 CSS 和 javascript 来明确定位项目。当用户输入的文本太长而无法容纳所提供的空间时，您可以使用`node.style.top=newY; node.style.left=newX;`它来重新定位它，并`node.style.height=newHeight; node.style.width=newWidth;`根据需要调整它的大小。这些方法不需要浏览器移除和重新插入元素，因此焦点不会丢失，文本选择或光标位置也不会丢失。

# c++ - 在 C++ 中使用 ::

> ID：15649580
> 
> 赞同：71
> 
> 时间：2013-03-26T23:53:07.403
> 
> 标签：c++, function, namespaces

我正在学习 C++，但我不知道什么时候需要使用`::`. 我知道我需要在and`std::`前面使用。这是否意味着创建它的开发人员在文件内部创建了一个名为的命名空间并将函数放入名为的命名空间中？当我创建一个新类时，由于某种原因不在同一个文件中，我必须添加.`cout``cin``iostream``std``cin``cout``std``main()``::`

例如，如果我创建了一个`class`被调用的函数`A`，为什么我需要将我创建`A::`的函数放在前面，即使我没有将它放入命名空间中？例如`void A::printStuff(){}`. 如果我在 中创建一个函数`main`，为什么我不必放入`main::printStuf{}`？

我知道我的问题可能令人困惑，但有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-27T00:00:36.077

你是非常正确的`cout`和`cin`。它们是在`std`命名空间内定义的对象（不是函数）。以下是 C++ 标准定义的它们的声明：

> 标题`<iostream>`概要
> 
> ```
> #include <ios>
> #include <streambuf>
> #include <istream>
> #include <ostream>
> 
> namespace std {
>   extern istream cin;
>   extern ostream cout;
>   extern ostream cerr;
>   extern ostream clog;
> 
>   extern wistream wcin;
>   extern wostream wcout;
>   extern wostream wcerr;
>   extern wostream wclog;
> } 
> ```

`::`被称为*范围解析算子*。名称`cout`和`cin`是在 中定义的`std`，所以我们必须用 来限定它们的名称`std::`。

类的行为有点像命名空间，因为在类中声明的名称属于该类。例如：

```
class foo
{
  public:
    foo();
    void bar();
}; 
```

命名的构造函数是名为的类`foo`的*成员*`foo`。它们具有相同的名称，因为它的构造函数。该函数`bar`也是 的成员`foo`。

因为他们是 的成员`foo`，所以当从类外引用他们时，我们必须限定他们的名字。毕竟，他们属于那个阶级。因此，如果您要`bar`在类之外定义构造函数，则需要这样做：

```
foo::foo()
{
  // Implement the constructor
}

void foo::bar()
{
  // Implement bar
} 
```

这是因为它们是在类*之外*定义的。如果您没有`foo::`对名称进行限定，您将在全局范围内定义一些新函数，而不是作为`foo`. 例如，这是完全不同的`bar`：

```
void bar()
{
  // Implement different bar
} 
```

它允许与类中的函数具有相同的名称，`foo`因为它在不同的范围内。这`bar`是在全局范围内，而另一个`bar`属于`foo`该类。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-27T00:04:13.363

`::`用于取消引用范围。

```
const int x = 5;

namespace foo {
  const int x = 0;
}

int bar() {
  int x = 1;
  return x;
}

struct Meh {
  static const int x = 2;
}

int main() {
  std::cout << x; // => 5
  {
    int x = 4;
    std::cout << x; // => 4
    std::cout << ::x; // => 5, this one looks for x outside the current scope
  }
  std::cout << Meh::x; // => 2, use the definition of x inside the scope of Meh
  std::cout << foo::x; // => 0, use the definition of x inside foo
  std::cout << bar(); // => 1, use the definition of x inside bar (returned by bar)
} 
```

不相关：cout 和 cin 不是函数，而是流对象的实例。

**编辑** 已修复为*Keine Lust*建议

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-26T23:59:56.190

`::`称为范围解析运算符。可以这样使用：

`::` *标识符*
*类名* `::` *标识符*
*命名空间* `::` *标识符*

你可以在这里阅读它
[https://docs.microsoft.com/en-us/cpp/cpp/scope-resolution-operator?view=vs-2017](https://docs.microsoft.com/en-us/cpp/cpp/scope-resolution-operator?view=vs-2017)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-07-05T10:02:46.770

“一元范围解析运算符”或“冒号冒号运算符”的一种用途是选择相同名称的局部和全局变量：

```
 #include <iostream>
    using namespace std;

    int variable = 20;

    int main()
    {
    float variable = 30;

    cout << "This is local to the main function: " << variable << endl;
    cout << "This is global to the main function: " << ::variable << endl;

    return 0;
    } 
```

结果输出将是：

> 这是主要功能的本地：30
> 
> 这是主要功能的全局：20

其他用途可能是：从类外部定义函数、访问类中的静态变量或使用多重继承。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-20T08:47:45.670

看看它是不是信息丰富的[合格的标识符

限定的 id-expression 是由作用域解析运算符 :: 前置的非限定 id-expression，以及可选的枚举序列、（C++11 起）类或命名空间名称或 decltype 表达式（C++11 起）分隔由范围解析运算符。例如，表达式 std::string::npos 是一个在命名空间 std 中的类字符串中命名静态成员 npos 的表达式。表达式 ::tolower 将函数命名为全局命名空间中的 tolower。表达式 ::std::cout 命名命名空间 std 中的全局变量 cout，这是一个顶级命名空间。表达式 boost::signals2::connection 命名了在命名空间 signals2 中声明的类型连接，它在命名空间 boost 中声明。

关键字模板可能出现在限定标识符中，以消除依赖模板名称的歧义] [1](http://en.cppreference.com/w/cpp/language/identifiers)

# java - 如何清除标准输入（术语）

> ID：15649582
> 
> 赞同：0
> 
> 时间：2013-03-26T23:53:24.643
> 
> 标签：java, stdin

如何清除Java中的标准输入（术语）？

一点点历史：我正在写一个“反射”程序，算法很简单：

```
wait a random amount of time
print "press enter"
read line 
```

关键是，如果用户误按了回车键，它将被读取，因此测试将出错。我的目标是纠正这个错误。为此，我想要一个这样的算法：

```
wait a random amount of time
clear stdin
print "press enter"
read line 
```

但我找不到办法做到这一点。[这篇文章](https://stackoverflow.com/questions/7527188/java-inputstream)似乎很有趣：`available`获取剩余字符的数量`skip`并将跳过它们。只在纸上工作。如果您通过多次按下回车键来强调应用程序，则该`available`方法返回

> > 估计可以从该输入流中读取（或跳过）而不会阻塞的字节数

所以，有时，返回值是错误的，至少一个回车留在缓冲区中，错误仍然存​​在。

[这个解决方案](https://stackoverflow.com/a/14696074/1668611)可能会奏效，但它依赖于我不想成为的平台。此外，从 Java 调用系统例程是一个非常糟糕的主意。

要恢复，我想清除程序的标准输入，但我不想关闭它，也不想阻止我的程序等待用户提供输入。对我来说，这似乎是一个非常基本的问题，如果答案很明显，我会感到羞耻！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:21:13.160

我没有“清除标准输入”的答案。我认为这是特定于操作系统的，甚至可能不值得尝试。

但是，要解决您的问题，您可以使用 java.util.Timer 在某个随机时间提示用户。这将在单独的线程中运行。当你的用户最终按下回车时，检查他/她是否被提示。

下面的代码示例将在 5 秒后打印“Press enter”。主线程立即阻塞等待用户输入，如果输入太早，它会这样说，因为布尔开关还没有打开

*注意：TimerTest 是我摆弄的类的名称。随意将其更改为您的班级名称

```
static boolean userPrompted = false;

public static void main(String[] args) throws IOException {

    // Setup a 5 second timer that prompts the user and switch the userPrompted flag to true
    // This will run in a separate thread
    Timer timer = new Timer(false);
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
            System.out.println("Press enter");
            synchronized(TimerTest.class) {
                userPrompted = true;
            }
        }
    }, 5000);

    // Blocks waiting for user input
    System.out.println("Get ready.. press enter as soon as you're prompted..");
    String input = new BufferedReader(new InputStreamReader(System.in)).readLine();

    // Check if user has been prompted
    synchronized (TimerTest.class) {
        if(!userPrompted) System.out.println("You pressed enter before prompted");
        else System.out.println("You pressed enter after prompted");
    }

} 
```

# binary - 如何实现 8 位的逻辑移位（向左）？

> ID：15649588
> 
> 赞同：0
> 
> 时间：2013-03-26T23:54:02.953
> 
> 标签：binary, lc3

我正在尝试确定如何使用 LC-3 指令集将 16 位（两个字节）字的最后 8 位（即字节）左移。

例如，

```
0000 0000 1111 1111 -> 1111 1111 0000 0000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:57:01.220

要进行左移，您所要做的就是将值添加到自身。创建一个简单的循环来执行此操作 8 次。

就像是

```
LD R1, count
loop
    LD R0, word
    ADD R0, R0, R0 ;Left Shift
    ADD R1, R1, -1 ;Decrement shift counter
    BRp loop       ;We still have shifts, go back to loop

HALT
count .fill #8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:11:50.930

现在了解您在谈论 LC-3，我找到了[LC-3b 微架构](http://users.ece.utexas.edu/~patt/07s.360N/handouts/360n.appC.pdf)和这个关于[指令集](http://classes.soe.ucsc.edu/cmpe012/Summer08/notes/06_LC3_ISA_markup.pdf)的演示文稿。

你需要实现一个[逻辑转变](http://en.wikipedia.org/wiki/Logical_shift)。特别是[逻辑左移](http://chortle.ccsu.edu/assemblytutorial/Chapter-12/ass12_2.html)。有多种方法可以做到这一点。

如果您了解[二进制算术](http://www.swarthmore.edu/NatSci/echeeve1/Ref/BinaryMath/BinaryMath.html)，您将能够以简单的方式做到这一点。

# coffeescript - Coffeescript 中的存在条件赋值运算符

> ID：15649589
> 
> 赞同：10
> 
> 时间：2013-03-26T23:54:09.297
> 
> 标签：coffeescript, operators, conditional-operator

在阅读 Coffeescript 文档时，我[对存在操作符](http://coffeescript.org/#operators)的文档很少感到困惑。该文件指出

> It ( `?=`) 也可以用于比`||=` 提供更安全的条件赋值，用于处理数字或字符串的情况。

`?=`and运算符之间有什么区别，什么`||=`时候应该使用一个和另一个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T00:33:39.647

`?`并`||`检查完全不同（但重叠）的条件。

操作符的工作方式与它在 JavaScript 中的`||`工作方式完全相同，因此就所关心的而言，类似`0`并且`''`是错误的`||`；`||`检查 JavaScript 意义上的真实性。

运算符在 JavaScript 中被`?`转换为，所以只有当is或; 检查 CoffeeScript 意义上的定义。`== null``a ? b``b``a``null``undefined``?`

考虑这些：

```
for v in [false, 0, '', null, undefined, 6]
    do (v) ->
        a = v
        a ||= 'pancakes'
        console.log("#{v} ||= 'pancakes':", a)

for v in [false, 0, '', null, undefined, 6]
    do (v) ->
        a = v
        a ?= 'pancakes'
        console.log("#{v} ?= 'pancakes':", a) 
```

第一个循环会给你五个煎饼和一个，`6`第二个循环会给你一个`false`，，，，两个煎饼和一个。`0``''``6`

演示：http: [//jsfiddle.net/ambiguous/PdLDe/1/](http://jsfiddle.net/ambiguous/PdLDe/1/)

因此，如果您只想要 JavaScript 样式的行为（即`0`,`false`和`''`将被忽略），那么您可能想要`||=`. 如果你只想跳过`null`然后`undefined`你想要`?=`。

# php - 使用 JSONmodel 尝试从服务器获取数据到 ios 设备

> ID：15649592
> 
> 赞同：0
> 
> 时间：2013-03-26T23:54:17.257
> 
> 标签：php, ios, objective-c, json, jsonmodel

我一直在尝试使用 JSONmodel 尝试将数据从我的服务器获取到我的 ios 设备。我已经正确设置了我的课程，但由于某种原因，它在调用 url 后一直返回 null。

```
feed = [[Feeds alloc] initFromURLWithString:@"http://http://www.cs4768project.net76.net/untitled.php?action=getShops"
                                         completion:^(JSONModel *model, JSONModelError *err) {
                                             NSLog(@"reached");
                                             //json fetched
                                             NSLog(@"shops: %@", feed.shops); 
```

这是保存提要的模型

```
@interface Feeds : JSONModel
@property(strong,nonatomic) NSArray* shops;
@end 
```

和我的咖啡店课一起

```
@interface CoffeeShop : JSONModel
@property(strong, nonatomic) NSString* name;
@property(nonatomic) CLLocationDegrees latitude;
@property(nonatomic) CLLocationDegrees longtitude;
@end 
```

json输出：

```
{"name":"Starbs","latitude":"45","longtitude":"-52"} 
```

我一直在尝试寻找解决方案，但一无所获，我很困惑为什么这不起作用。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:22:17.383

好的，看起来 JSON 有问题，因为我尝试了这段代码

```
NSError *e;
NSDictionary *s = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.cs4768project.net76.net/untitled.php?action=getShops"]] options:NSJSONReadingMutableLeaves error:&e];
NSLog(@"%@", s);
if (e) {
    NSLog(@"%@", e);
} 
```

它返回

```
Domain=NSCocoaErrorDomain Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" (Garbage at end.) UserInfo=0x1e0529f0 {NSDebugDescription=Garbage at end.} 
```

因此，如果是您的网站，我会将 JSON 更改为有效格式，或联系网站所有者并将问题通知他们。[这个](https://stackoverflow.com/a/10363777/1702077)答案告诉你具体是什么问题。

# ruby-on-rails - 渲染 json 和嵌套属性

> ID：15649595
> 
> 赞同：0
> 
> 时间：2013-03-26T23:54:28.767
> 
> 标签：ruby-on-rails, ruby, json

我有这些课程：

```
class Product
 attr_accessible :name, ...
 has_many :images
end

class Image
 attr_accessible :image, :position, :product_id, :title
 belongs_to :product
end 
```

行动：

```
def list
  render :json => {:Result => "OK", :Records => Product.all}
end 
```

如何将每个产品的自己的图像包含为嵌套属性，而不是枚举产品中的所有属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:11:48.560

您可以使用`to_json(:include => :attr)`

```
def list
  render :json => {:Result => "OK", :Records => Product.all}.to_json(:include => :images)
end 
```

# python - 美丽汤中的网址错误

> ID：15649597
> 
> 赞同：0
> 
> 时间：2013-03-26T23:54:33.417
> 
> 标签：python, python-2.7, beautifulsoup, ubuntu-12.04

我正在尝试使用 beautifulsoup 从 Craigslist 获取数据 PID 和价格。我编写了一个单独的代码，它给了我文件 CLallsites.txt。在这段代码中，我试图从 txt 文件中获取每个站点，并获取前 10 页中所有条目的 PID。我的代码是：

```
 from bs4 import BeautifulSoup       
  from urllib2 import urlopen 
  readfile = open("CLallsites.txt")
  product = "mcy"
  while 1:
    u = ""
    count = 0
    line = readfile.readline()
    commaposition = line.find(',')
    site = line[0:commaposition]
    location = line[commaposition+1:]
    site_filename = location + '.txt'
    f = open(site_filename, "a")
    while (count < 10):
       sitenow = site + "\\" + product + "\\" + str(u)
       html = urlopen(str(sitenow))                      
       soup = BeautifulSoup(html)                
       postings = soup('p',{"class":"row"})
       for post in postings:
            y = post['data-pid']
            print y
       count = count +1
       index = count*100
       u = "index" + str(index) + ".html"
    if not line:
        break
    pass 
```

我的 CLallsites.txt 看起来像这样：

craiglist 站点，位置（Stackoverflow 不允许使用 cragslist 链接发布，因此我无法显示文本，如果有帮助，我可以尝试附加文本文件。）

当我运行代码时，出现以下错误：

回溯（最近一次通话最后）：

文件“reading.py”，第 16 行，在 html = urlopen(str(sitenow))

文件“/usr/lib/python2.7/urllib2.py”，第 126 行，在 urlopen 返回 _opener.open(url, data, timeout)

文件“/usr/lib/python2.7/urllib2.py”，第 400 行，打开响应 = self._open(req, data)

文件“/usr/lib/python2.7/urllib2.py”，第 418 行，在 _open '_open'，req)

_call_chain 结果 = func(*args) 中的文件“/usr/lib/python2.7/urllib2.py”，第 378 行

文件“/usr/lib/python2.7/urllib2.py”，第 1207 行，在 http_open 返回 self.do_open(httplib.HTTPConnection, req)

文件“/usr/lib/python2.7/urllib2.py”，第 1177 行，在 do_open 中引发 URLError(err)

urllib2.URL错误：

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:04:56.273

我不知道 的内容是什么`sitenow`，但看起来它是一个无效的 URL。请注意，URL 使用斜杠而不是反斜杠（因此该语句应该类似于`sitenow = site + "/" + product + "/" + str(u)`）

# php - 客户端密码哈希的安全风险

> ID：15649598
> 
> 赞同：0
> 
> 时间：2013-03-26T23:54:35.437
> 
> 标签：php, javascript, security, web-applications, hash

我已经阅读了大量的博客文章、教程和 SO 问题，这些问题与正确的密码散列有关。但是我仍然有一个关于客户端散列的风险的问题。

我想用 JavaScript 在客户端对用户的密码进行加盐和散列，然后在服务器上进行重新散列和加盐，所有数据都通过 HTTPS 发送（非纯文本）。客户端的散列不会使用与服务器相同的盐或算法。

从逻辑上讲，对于服务器来说，用户的密码是一个散列，所以如果数据传输是纯文本的，那么密码是否被散列到攻击者都没有关系。如果读取JavaScript，暴露客户端散列，**理论上更容易获得已知长度和字符（0-9 & af）的散列，那么它是获得可变长度的密码和所有字母数字字符，大写&小写字母和特殊字符？**

例如，客户端的基本 MD5 散列（我知道 MD5 不好）会产生一个 128 位（16 字节）的散列。因此，对于 16 个可能的字符，即 16^16 = 1.84e19 个可能的哈希值。

使用长度为 8-10 个字符的密码，从任何字母数字或特殊字符中选择（根据[维基百科的计数](http://en.wikipedia.org/wiki/Password_strength)，即 95）。得到 95^8 + 95^9 + 95^10，等于 6.05e19。正如您所看到的，这是密码数量的 3 倍多，是哈希值的 3 倍多（并且这个数字只会在您允许密码的时候变得更高）。

那么不将散列密码从客户端发送到服务器不是更好吗？

作为这个问题的第二部分，从阅读资料中，我了解到可以使用字典等工具从逻辑上减少这种可能性。这些工具真的可以将结果缩小到 1.84e19 哈希组合以下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:01:43.890

在客户端进行散列是没有意义的。然后你所做的就是让你的应用程序依赖于javascript。

可以读取传输的攻击者无论如何都可以直接将哈希提交给服务器，而无需输入密码。

HTTPS 完全保护传输时的用户密码。除非他们在聪明的攻击者范围内使用无线键盘。呵呵。

# vb.net - 使用基于选中的复选框的 Select 语句

> ID：15649608
> 
> 赞同：0
> 
> 时间：2013-03-26T23:55:06.887
> 
> 标签：vb.net, checkbox, visual-studio-2012, radio-button, select-case

首先，我想说这是我正在做的一项家庭作业，但无法以这种方式进行。所以我必须使用 If 语句完成分配。目标是构建一个用户可以填写以提交订单的表单。有三个复选框（一个用于汉堡，一个用于薯条，另一个用于饮料）。如果您选中其中一个框，则会显示一个组框，其中包含单选按钮以进行您想要的选择。

我想尝试根据复选框是否被选中来使用 select 语句。然后为每个单选按钮使用不同的大小写。但是，如果我运行程序并单击我提供的一个按钮，它将使用第一个可用的 Case 填充我的 dblCost 变量。下面是我的代码。我只是真的想了解我做错了什么，或者这不是解决此问题的可行方法。下面是我想使用的代码：

```
Public Class frmRestaurantOrder

Private Sub CheckedChanged(sender As Object, e As EventArgs) Handles cbxBurgers.CheckedChanged, cbxFries.CheckedChanged, cbxDrinks.CheckedChanged

    If (cbxBurgers.Checked) Then
        gbxBurgers.Visible = True
    Else
        gbxBurgers.Visible = False
    End If

    If (cbxFries.Checked) Then
        gbxFries.Visible = True
    Else
        gbxFries.Visible = False
    End If

    If (cbxDrinks.Checked) Then
        gbxDrinks.Visible = True
    Else
        gbxDrinks.Visible = False
    End If

End Sub

Private Sub btnCompute_Click(sender As Object, e As EventArgs) Handles btnCompute.Click

    Dim dblCost As Double = 0

    Select Case gbxBurgers.Visible = True
        Case rbtRegularBurger.Checked
            dblCost += 4.19
        Case rbtCheeseBurger.Checked
            dblCost += 4.79
        Case rbtBaconBurger.Checked
            dblCost += 4.79
        Case rbtBaconCheeseBurger.Checked
            dblCost += 5.39
        Case Else
            dblCost += 0
    End Select

    Select Case cbxFries.Checked = True
        Case rbtSmallFries.Checked
            dblCost += 1.29
        Case rbtLargeFries.Checked
            dblCost += 1.59
        Case Else
            dblCost += 0
    End Select

    Select Case cbxDrinks.Checked = True
        Case rbtSoda.Checked
            dblCost += 1.69
        Case rbtWater.Checked
            dblCost += 1.49
        Case Else
            dblCost += 0
    End Select

    txtCost.Text = FormatCurrency(dblCost)

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:09:52.667

我认为您对选择案例的理解有点偏离。看看[这个](http://www.homeandlearn.co.uk/NET/nets1p21.html)，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:38:24.953

虽然它没有具体解决这个问题，但您可能还需要考虑一种更短的方法来编写代码：

而不是：

```
If (cbxBurgers.Checked) Then
    gbxBurgers.Visible = True
Else
    gbxBurgers.Visible = False
End If 
```

你可以写：

```
gbxBurgers.Visible = cbxBurgers.Checked 
```

这是一件小事，但它使代码更短。

# mongodb - db.collection.update() 所有文件

> ID：15649613
> 
> 赞同：25
> 
> 时间：2013-03-26T23:56:01.340
> 
> 标签：mongodb, rename

我尝试重命名集合的所有文档中的一个字段，使用

```
db.coll.update({},{ $rename: {'originField':'newField'} }); 
```

但只更改了一份文件，为什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-27T00:15:33.990

默认情况下，MongoDB 中的所有更新都是单数的。您必须在命令中添加第三个选项以进行：

```
db.coll.update({},{ $rename: {'originField':'newField'} }, {multi:true}); 
```

如果您使用的是 3.2 及更高版本，则可以使用`updateMany()`：

```
db.coll.updateMany({}, {$rename: {'originField': "newField"}}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-18T17:57:45.180

```
db.collectionname.update( { "field" : "oldvalue" }, { $set:{ "field" : "newvalue" } }, { multi : true } ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-28T02:54:17.797

从 MongoDB 3.2 开始，您可以使用以下更短的语法：

`db.coll.updateMany({}, {$rename: {'originField': "newField"}})`

# cakephp - 使用 CakePHP 的 FormHelper::radio() 方法在我的标签中获取我的输入

> ID：15649619
> 
> 赞同：4
> 
> 时间：2013-03-26T23:56:32.300
> 
> 标签：cakephp

我已经非常彻底地查看了以前的问题，我很惊讶没有其他人问过这个问题，因为这似乎是一件非常简单的事情。

如何使用 CakePHP 的 FormHelper 使我的标签包含输入和标签文本？我正在使用 CakePHP 2.3.1。调用`$this->Form->radio()`一些标准选项会产生：

```
<input id="input_id" type="radio" ... />
<label for="input_id">label text</label> 
```

我正在寻找的是

```
<label for="input_id"><input type="radio" id="input_id" ... />label text</label> 
```

我已经实现了这种*使用*：

```
$this->Form->input('input1',array('options'=>$options,'type'=>'radio',
    'label'=>false
    'before'=>'<label>',
    'separator'=>'</label><label>',
    'after'=>'</label>'
)); 
```

但显然这种解决方案并不理想。谁能告诉我 CakePHP 是否有更简单和“更合适”的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-16T10:46:50.633

我在尝试自己找到答案并解决它时遇到了这个问题。您不需要更改/扩展课程；它可以纯粹通过传递适当的选项来实现。

这就是我所做的，因此它适用于引导程序：

```
$options = array(
           '1' => 'One',
           '2' => 'Two'
           );
$attributes = array(
            'class' => '',
            'label' => false,
            'type' => 'radio',
            'default'=> 0,
            'legend' => false,
            'before' => '<div class="radio"><label>',
            'after' => '</label></div>',
            'separator' => '</label></div><div class="radio"><label>',
            'options' => $options
            );

echo $this->Form->input('myRadios', $attributes); 
```

这将把每个收音机放在自己的`<div class="radio">`位置，以符合引导标记。如果您只想要简单的标签包装，请`div`从`before`,`after`和`separator`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T02:51:00.063

扩展助手，并制作自己的方法。

```
<?php
// app/views/helpers/radio.php
class RadioHelper extends AppHelper {

    function display($id, $options = array()) {
        if (isset($options['options']) && !empty($options['options'])) {
            $rc = "";
            foreach ($options['options'] as $option) {
                $rc .= "<label>";
                $rc .= "<input ....>";
                $rc .= "</label>";
            }
            return($rc);
        }
        return(false); // No options supplied.
    }
}

?> 
```

* * *

```
<?php

// some_controller.php
var $helpers = array('Radio');

?> 
```

* * *

```
<?php 

// some_view.ctp
echo $this->Radio->display('input1', array('options' => $options));

?> 
```

只需确保将表单助手中的逻辑复制到您自己的助手中...

PS如果你只是添加一个方法，你不太可能需要一个完整的助手。只需将函数“display”添加到 app_helper.php 并从您已加载的任何“其他”助手中引用它，因为它们扩展了 app_helper，您将在所有子助手中使用 display 方法。

# c# - 将一个数组的每个元素乘以第二个数组的所有元素

> ID：15649621
> 
> 赞同：2
> 
> 时间：2013-03-26T23:56:36.153
> 
> 标签：c#

我很难将两个数组中的元素相乘。

```
 int[] firstArray = { 1,2,3,4 };
    int[] secondArray = { 10,20,30,40 }; 
```

我需要将“firstArray”的第一个元素乘以“secondArray”中的每个元素。然后将“firstArray”的第二个元素乘以“secondArray”中的每个元素，依此类推，直到我将第一个数组中的所有元素乘以第二个数组中的每个元素。

到目前为止，我已经弄清楚如何通过构建第三个数组来获得第一个元素来做到这一点

```
 int[] thirdArray = [4]

    for (int counter = 0; counter < thirdArray.Length; counter ++)
    thirdArray[counter] = firstArray[counter] * secondArray[counter];
    console.WriteLine(thirdArray[counter]); 
```

这只是获取第一个数组的元素并直接乘以第二个元素。我应该有 16 个 int 结果，但如果我将 thirdArray 更改为 [16]，则会出现超出范围的异常。如果您能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:01:13.823

我相信这将实现您正在寻找的东西：

```
int[] thirdArray = new int[16];

for (int i = 0; i < 4; i++)
    for (int j = 0; j < 4; j++)
        thirdArray[i * 4 + j] = firstArray[i] * secondArray[j]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T00:00:27.970

作为一种替代方法，您可以为此使用[LINQ ：](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)

```
var query = from x in firstArray
            from y in secondArray
            select x * y;

int[] thirdArray = query.ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:02:20.763

这应该可以解决您的问题：

```
int[] firstArray = { 1,2,3,4 };
  int[] secondArray = { 10,20,30,40 };
    int[] thirdArray = new int[firstArray.Length*secondArray.Length];
    for (int i = 0; i < firstArray.Length; i++)
    for (int j = 0; j < secondArray.Length; j++)
    {
        thirdArray[i*firstArray.Length + j] = firstArray[i] * secondArray[j];
        Console.WriteLine(thirdArray[i*firstArray.Length + j]);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:34:42.543

使用 LINQ 在一行中完成：

```
var allMultiples = firstArray.SelectMany(a => secondArray.Select(b => a * b)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T00:03:34.120

哎呀，您甚至可以取消大括号来表示范围，因为每次迭代的范围内只有一个操作：

```
int[] firstArray = { 1, 2, 3, 4 };
int[] secondArray = { 10, 20, 30, 40 };
for (int i = 0; i < firstArray.Length; i++ )
    foreach (int second in secondArray)
        firstArray[i] *= second; 
```

# sql - 创建空间网络时的 SQL 语法错误

> ID：15649625
> 
> 赞同：0
> 
> 时间：2013-03-26T23:56:50.767
> 
> 标签：sql, oracle, networking, spatial, oracle-spatial

我正在尝试从使用 FME Desktop 导入 Oracle DB 的 shapefile（代表街道中心线）创建空间网络。“CENTRELINES”空间对象包含一个 GEOM 列，我想将其用作网络分析的基础，以根据路线距离作为成本属性在养老院（点）之间分配救护车设施（点）。欢迎任何有关在 Oracle Spatial 中解决这个病态问题的方法的建议，但主要问题是我是 SQL 的初学者。我使用 Oracle 的[文档编写](http://www.stanford.edu/dept/itss/docs/oracle/10g/appdev.101/b10828/sdo_net_ref.htm#CHDJADJI)了以下 SQL 语句：

```
-- create an LRS geometry network
EXEC SDO_NET.CREATE_LRS_NETWORK(
  'LRS_net', -- network name
  'CENTRELINES', -- LRS geometry table name
  'GEOM', -- LRS geometry column name
  1, -- number of hierarchy levels
  FALSE, -- directed link?
  TRUE -- node with cost?
  ); 
```

该脚本输出以下内容：

```
Error starting at line 2 in command:
EXEC SDO_NET.CREATE_LRS_NETWORK(
Error report:
ORA-06550: line 1, column 34:
PLS-00103: Encountered the symbol ";" when expecting one of the following:

   ( ) - + case mod new not null <an identifier>
   <a double-quoted delimited-identifier> <a bind variable>
   table continue avg count current exists max min prior sql
   stddev sum variance execute multiset the both leading
   trailing forall merge year month day hour minute second
   timezone_hour timezone_minute timezone_region timezone_abbr
   time timestamp interval date
   <a string literal with character set specification>
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action:

...

Error starting at line 9 in command:
)
Error report:
Unknown Command 
```

我了解第 2 行正在产生错误：

```
PLS-00103: Encountered the symbol ";" when expecting one of the following... 
```

鉴于结束 SQL 查询需要分号，为什么这是个问题？

编辑：以下脚本通过添加开始/结束生成网络：

```
begin
SDO_NET.CREATE_LRS_NETWORK(
  'LRS_net', 
  'CENTRELINES', 
  'GEOM', 
  1, 
  FALSE, 
  TRUE);
end; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:31:37.047

如[文档](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve022.htm#sthref1585)中所述，SQL*Plus`execute`命令通常必须在一行中输入：

> 如果您的 EXECUTE 命令由于 PL/SQL 语句而不能放在一行，请使用 SQL*Plus 继续字符（连字符）。

它实际上试图在幕后运行的是翻译为

```
BEGIN
    SDO_NET.CREATE_LRS_NETWORK(;
END;
/ 
```

...这（可能显然是这样写的）不是有效的 PL/SQL。与空间调用本身无关。如果您确实想将其拆分为多行，则可以使用显式`begin`/`end`而不是简写`exec`。

第二个问题可能表明您不止一次运行了短版本，尽管它不是我非常熟悉的功能；但与最初的分号错误无关。*（此外，结束SQL*语句并不严格需要分号，但这是另一个细节......）。

# android - 从电源菜单中删除电源关闭软按钮

> ID：15649639
> 
> 赞同：0
> 
> 时间：2013-03-26T23:58:41.880
> 
> 标签：android

如果我之前已经提出过这个问题并且已经回答了这个问题，我深表歉意，因为我已经搜索了数周但无法得到我的问题/问题的答案。我只是在寻找一种方法来禁用长按电源按钮后出现的电源菜单。我试图捕获 longkeypress 事件，但无法拦截电源菜单。我只是想实现这一点，这样我就可以从我正在开发的应用程序中关闭手机，而不是直接通过当前的关机菜单。

因此，如果有方向或短代码可以禁用电源菜单或阻止菜单出现或从菜单中删除关闭和飞行模式软按钮。

我可以捕获电源按钮的正常按下并执行操作，但是我此时的目标是防止手机关闭但能够从我的应用程序中关闭。

非常感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:02:48.493

你不能，那是操作系统级别的功能。您需要一个自定义 ROM 来执行此操作。

# c++ - 在智能感知中，使用两个 pow() 内部计算的 sqrt() 怎么会是错误的

> ID：15649641
> 
> 赞同：0
> 
> 时间：2013-03-26T23:58:51.523
> 
> 标签：c++, pow, sqrt

我有这个代码：

```
int findY ( int x, int r) {

return sqrt(pow(x,2) - pow(r,2));

}; 
```

但出于某种原因，intellisense 女士将其标记为错误的语法。我不确定为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:02:49.607

查看它给出的错误：

```
1>..\main.cpp(7): error C2668: 'pow' : ambiguous call to overloaded function
1>          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\math.h(583): could be 'long double pow(long double,int)'
1>          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\math.h(535): or       'float pow(float,int)'
1>          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\math.h(497): or       'double pow(double,int)'
1>          while trying to match the argument list '(int, int)' 
```

基本上，这是一个模棱两可的过载。因此，您需要将其转换为澄清：

```
return sqrt(pow((double)x,2.) - pow(((double)r,2.)); 
```

不仅如此，您真的打算将返回类型设为 int 吗？

# c# - 删除 GridView 中单个项目的项目单击事件处理程序

> ID：15649656
> 
> 赞同：0
> 
> 时间：2013-03-27T00:00:00.527
> 
> 标签：c#, gridview, event-handling, windows-store-apps, itemssource

在我的 Windows 应用商店应用程序中，我使用`GridView`带有`ItemClick`事件处理程序的 a：

```
<GridView Grid.Column="0" Grid.Row="1"
  SelectionMode="None"
  IsItemClickEnabled="True"
  ItemClick="ClickOnItem">
</GridView> 
```

这些项目绑定到`GridView`with `ItemsSource`。是否有可能删除已绑定到 GridView 的单个项目的单击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:30:00.863

我不确定这是否适合您的场景，但一种方法是忽略基于项目的点击事件：

```
void ClickOnItem(object sender, ItemClickEventArgs e)
{
    var item = (SampleDataItem)e.ClickedItem;

    // ignore one specific item - here we use UniqueId, but it could be
    // any attribute...
    if (string.Compare(item.UniqueId, "Group-1-Item-1") == 0)
        return;

    // normal processing here...
    ...
 } 
```

* * *

**更新**- 要以编程方式添加点击事件，您必须命名您的网格（`x:Name`线）：

```
<GridView Grid.Column="0" Grid.Row="1"
    x:Name="myGridView"
    SelectionMode="None"
    IsItemClickEnabled="True"
    ItemClick="ClickOnItem">
</GridView> 
```

然后在后面的代码中，在页面的构造函数中添加handler：

```
public PageConstructor()
{
    this.InitializeComponent();
    myGridView.ItemClick += ClickOnItem;
} 
```

# php - PHP mail() 返回路径问题

> ID：15649657
> 
> 赞同：1
> 
> 时间：2013-03-27T00:00:03.700
> 
> 标签：php, email

搬到新主机后，我开始遇到奇怪的问题。

PHP mail() 函数仅在我使用 -f 参数将以下行添加到 php.ini 时才有效。（如果我省略 -f 参数，mail() 函数将返回 true，但什么也不做。）

```
[mail function]
  sendmail_path = "/usr/sbin/sendmail -t -i -f email@mydomain.com" 
```

但是，这会导致所有消息都具有以下不需要的标头：

```
Return-Path: <email@mydomain.com> 
```

我尝试向 mail() 添加第五个参数，但它没有效果。

我非常感谢您的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:03:35.927

检查/更改您的 PHP 邮件配置：

打开您的 php.ini 文件（如果您不知道它在哪里，请参见下文） 搜索显示为 [mail function] 添加/更改邮件服务器的详细信息的行。这可以是本地邮件服务器或 ISP 的邮件服务器。保存/关闭 php.ini 文件 重新启动您的网络服务器

首次打开 php.ini 文件时邮件设置的示例：

```
[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25

; For Win32 only.
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
;sendmail_path = 
```

附加信息在回显中，`phpinfo()`您可以查看您的 PHP 配置详细信息。您可以通过创建一个包含以下行的 .php 文件来做到这一点： . 当您在浏览器中运行它时，您将看到 PHP 配置变量的完整列表。只需搜索包含 php.ini 和 sendmail_path 的行即可查看您需要使用的值。

另一个想法是您可以`ini_set()`像这样正确配置您的邮件设置

如果您的邮件脚本继续失败，请将以下代码添加到您的电子邮件脚本的顶部。

```
// Please specify your Mail Server - Example: mail.example.com.
ini_set("SMTP","mail.example.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'example@YourDomain.com'); 
```

# php - 从复选框获取数组，然后在 PHP 中创建一个字符串

> ID：15649665
> 
> 赞同：4
> 
> 时间：2013-03-27T00:00:50.203
> 
> 标签：php, html, arrays, checkbox

我的网站上有一个表单，它使用数组来提交复选框数据。然后，我尝试使用 foreach 循环操作该数据，为每个复选框数据添加一个“：”，然后我想将其变成一个可以插入数据库的字符串。

这是我的 HTML 代码：

```
while($row = $result->fetch_assoc())
{
echo '<tr><td><input type="checkbox" name="pluginlist[]" value="'.$row['plugin'].'" /></td><td> '.$row['plugin'].'</td></tr>';
} 
```

$row['plugin'] 是来自数据库中不同表的数据。

这是我的 PHP 代码 $_POST 数据，然后运行 ​​foreach 循环：

```
if(!empty($_POST['pluginlist'])) {
        foreach($_POST['pluginlist'] as $plugins) {
            $plugins1 = $plugins.":";
            }
            echo $plugins1;
} 
```

echo $plugins1 仅回显最后一个带有“：”的复选框数据。

我怎样才能做到这一点，以便我可以一次将所有复选框数据插入数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:03:40.830

连接这些值。否则，您将`$plugins1`在每次迭代时分配一个新值。

```
$plugins1 .= $plugins.':'; // Correct - note the extra dot before the equal sign 
```

而*不是*：

```
$plugins1 = $plugins.':'; // Incorrect - would "reset" the value each time 
```

* * *

或者，您也可以使用`implode`将所有数组值连接到单个字符串：

```
$plugins1 = implode(':', $_POST['pluginlist']) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T00:03:35.187

你可以`serialize`数据，我觉得这样方便多了！

或者你可以试试

```
$plugins1 = implode(":" , $_POST['pluginlist']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:09:51.940

这是你想要做的吗？我可能没有理解你的问题。等号之前的点将连接，但您可能只想内爆。

```
$plugins1 = '';
if(!empty($_POST['pluginlist'])) {
        foreach($_POST['pluginlist'] as $plugins) {
            $plugins1 .= $plugins.":";
            }
echo $plugins1;
echo "<br />or<br/ >";
$plugins2 = implode ($_POST['pluginlist'], ':');
echo $plugins2; 
```

# django - Heroku 上的家中没有文件

> ID：15649666
> 
> 赞同：2
> 
> 时间：2013-03-27T00:00:52.677
> 
> 标签：django, git, heroku

我在 Heroku 上部署 Django 应用程序时遇到问题。git push 后家里什么都没有。我不认为问题出在 git 上，因为我可以推送到 github 上的存储库。

```
(23:43:01 (venv)user@host ~/path $ git push heroku 4heroku
Everything up-to-date
(23:43:31 (venv)user@host ~/path $ heroku run bash
Running `bash` attached to terminal... up, run.3486
~ $ ls
~ $ ls -la
total 8
drwx------  2 u12545 12545 4096 Mar 26 23:44 .
drwxr-xr-x 15 root   root  4096 Oct 31  2011 ..
~ $ exit
(23:44:16 (venv)user@host ~/path $ heroku logs
......
2013-03-26T23:34:04+00:00 heroku[api]: Starting process with command `bash` by email@yahoo.co.uk
2013-03-26T23:34:05+00:00 heroku[run.8328]: Awaiting client
2013-03-26T23:34:05+00:00 heroku[run.8328]: Starting process with command `bash`
2013-03-26T23:34:06+00:00 heroku[run.8328]: State changed from starting to up
2013-03-26T23:34:39+00:00 heroku[run.8328]: Client connection closed. Sending SIGHUP to all processes
2013-03-26T23:34:40+00:00 heroku[run.8328]: State changed from up to complete
2013-03-26T23:34:40+00:00 heroku[run.8328]: Process exited with status 0
2013-03-26T23:44:00+00:00 heroku[api]: Starting process with command `bash` by email@yahoo.co.uk
2013-03-26T23:44:02+00:00 heroku[run.3486]: Starting process with command `bash`
2013-03-26T23:44:02+00:00 heroku[run.3486]: Awaiting client
2013-03-26T23:44:02+00:00 heroku[run.3486]: State changed from starting to up
2013-03-26T23:44:16+00:00 heroku[run.3486]: Process exited with status 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:09:14.773

如果要部署不是该`master`分支的分支，则应该执行不同的推送。根据[Heroku 文档](https://devcenter.heroku.com/articles/git#deploying-code)：

> 此命令将忽略推送到除 master 之外的 Heroku 的分支。如果您正在本地处理另一个分支，您可以在推送之前合并到 master，或者指定您要将本地分支推送到远程 master。要推送除 master 以外的分支，请使用以下语法：

```
$ git push heroku yourbranch:master 
```

# matlab - 附加高斯噪声的 Var

> ID：15649668
> 
> 赞同：2
> 
> 时间：2013-03-27T00:01:02.260
> 
> 标签：matlab, image-processing

我基本上有这个：

```
I = im2double(imread('lena.png'));

% Add gaussian noise
J = imnoise(I,'gaussian',0,0.05); 
```

现在同时拥有未退化的图像`I`和噪声图像`J`，我如何估计用于高斯噪声的方差是`0.05`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:02:25.010

您可以通过减法获得噪声波形。您可以通过 获得样本方差`var()`。

当然，样本方差只是对真实方差的估计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T00:02:47.303

从 I 中减去 J，对每个差值求平方，然后取平均值。由于您知道平均值（零），因此您可以使用像素数作为平均值的分母。

# java - ListView 中的 Android EditText - 不稳定/意外结果

> ID：15649672
> 
> 赞同：0
> 
> 时间：2013-03-27T00:01:36.220
> 
> 标签：java, android, android-listview, android-arrayadapter

对于我本科学位的最后一年项目，我已经在客户端/服务器应用程序上工作了几个月，我目前正在开发一个 ListView，它应该显示产品列表并允许用户输入代表的值该商品的库存数量。我设法让 View 和 Adapter 看起来正确，但 EditText 给我带来了问题，我花了几个小时在谷歌上搜索答案并搜索 StackOverflow 寻找类似的问题，但我发现要么没有应用，要么没有解决问题。

我几乎可以肯定它是一个回收器问题，但问题的根源似乎暗示了我，输入到 EditText 中的值似乎被插入到我的哈希图中的几个位置，而不仅仅是一个，并且快速滚动列表会导致大多数 -如果不是所有视图都显示相同的值！这是我的适配器类的完整内容，我很乐意提供任何其他有帮助的代码，提前谢谢你。

```
public class StockAdapter extends ArrayAdapter<Stock> {

private LayoutInflater mLayoutInflater;
Context context;
int layoutResourceId;
Stock data[] = null;
Map<Integer, String> stockHashMap = new HashMap<Integer, String>(); 

public StockAdapter(Context context, int layoutResourceId, Stock[] data)
{
    super(context, layoutResourceId, data);
    mLayoutInflater = LayoutInflater.from(context);
    this.context = context;
    this.layoutResourceId = layoutResourceId;
    this.data = data;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    StockHolder holder = null;

    if (convertView == null)
    {
        convertView = mLayoutInflater.inflate(layoutResourceId, null);

        // Instantiate StockHolder object.
        holder = new StockHolder();
        // Get views
        holder.txtName = (TextView) convertView.findViewById(R.id.stockName);
        holder.etValue = (EditText) convertView.findViewById(R.id.etValue);
        convertView.setTag(holder);
    }
    else
    {
        holder = (StockHolder)convertView.getTag();
    }
    // Get stock object from data set.
    Stock stock = data[position]; 

    holder.txtName.setText(stock.Name);

    // Put stock id in a variable - used for referencing the right stock item.
    final int id = stock.Id;
    String oldText = stockHashMap.get(id);
    // Check if the value of oldText is null.
    holder.etValue.setText(oldText == null ? "" : oldText);

    // Create addTextChangedListener for this EditText
    holder.etValue.addTextChangedListener(
            new TextWatcher(){
                public void afterTextChanged(Editable editable) {
                    stockHashMap.put(id, editable.toString());
                }
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    // TODO Auto-generated method stub
                }
            });
    return convertView;
}
static class StockHolder
{
    int id;
    TextView txtName;
    EditText etValue;
}
} 
```

回复：马特 C 的回答：添加了以下内容，但没有更好。

```
@Override
public int getCount()
{
    if (data == null) return 0;
    return data.length;
}

@Override
public Stock getItem(int position)
{
    return data[position];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:06:54.100

我个人发现，如果我不覆盖适配器中的[getCount](http://developer.android.com/reference/android/widget/Adapter.html#getCount%28%29)函数，我会遇到各种奇怪的无法解释的问题。在你的情况下，我想我会做一个空检查，然后返回名为“data”的 Stock[] 数组的大小。我不能保证这会解决你的问题，但在这些情况下，对我来说，它总是“治愈”随机的怪异。为了完整起见，您可能还想覆盖[getItem](http://developer.android.com/reference/android/widget/Adapter.html#getItem%28int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:08:59.820

由于您有一个自定义的 getView()，请尝试扩展 BaseAdapter 而不是 ArrayAdapter，这对您的情况来说要简单得多。ArrayAdapter 最适合简单的事情，比如每一行都是一个 TextView...

# floating-point - unityscript中的浮点除法

> ID：15649676
> 
> 赞同：3
> 
> 时间：2013-03-27T00:02:00.993
> 
> 标签：floating-point, unity3d, unityscript

为什么这段代码输出 536870912 而不是 536870911.5？

```
var z : double = 1073741823.0 / 2.0;
Debug.Log(z.ToString("F15")); 
```

我怎样才能让它输出 536870911.5？这对我来说似乎很奇怪......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:39:31.833

您可以使用 C# 通过以下方式获取它：

```
double test = 1073741823.0d / 2.0d; // = 536870911.5
Debug.Log(test); 
```

* * *

而在 UnityScript 中，您只需要添加 d

```
var test : double = 1073741823.0d / 2.0d; // = 536870911.5
Debug.Log(test); 
```

* * *

如果没有双符号，UnityScript 会将数字解析为其他类型。（很可能是一个整数）

以下内容不起作用，因为解释器没有正确转换它们：

```
var test : double = 1073741823.0 / 2.0; // = 536870912
Debug.Log(test); 
```

在我看来它正在阅读：**double = int / int;**

* * *

很有意思。这是我鼓励开发人员转向 C# 的另一个原因。

# c - 你如何处理在 C 中包含带有 makefile 的头文件的头文件？

> ID：15649678
> 
> 赞同：0
> 
> 时间：2013-03-27T00:02:10.580
> 
> 标签：c, makefile

假设您有一个名为 file.c 的文件。

*   `file.c`包括`header1.h`
*   `header1.h`包括`header2.h`

这是我的makefile：

```
file.x: file.o
        -gcc file.o -o file.x

file.o: file.c header1.h header2.h
        -gcc file.c header1.h header2.h 
```

当 header2.h 包含 header1.h 时，我对如何处理感到困惑。

这条线是多余的吗？还是显示依赖关系的好风格？

```
file.c header1.h header2.h 
```

**更新：**我为混乱道歉。我已恢复对问题所做的编辑。当前的生成文件是我在乔纳森的回答所指的原始问题中发布的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:09:35.633

问题的原始版本在 中包含以下几行`makefile`：

```
file.o: file.c header1.h header2.h
        -gcc file.c header1.h header2.h 
```

在修复之前，我的回答解决了问题的原始版本。

^(请注意，`a.out`除非编译器反对编译头文件，否则编译行会生成可执行文件。你应该`-c`在命令行中。)

* * *

几个问题：

1.  在 a`makefile`中，目标文件何时需要重建？

    答：当源文件或它包含的标题之一发生更改时。

    附属Q：这个依赖线是什么意思：

    ```
    file.o: file.c header1.h header2.h 
    ```

    附属 A：`file.o`如果源文件或其包含的头文件之一发生更改，则需要重建。

2.  如果你规定：`header1.h`取决于`header2.h`，`header1.h`当你改变时会发生`header2.h`什么？

    答：没什么。`header1.h`你本身不编译。改变的是目标文件。

3.  如果您规定`file.c`取决于`header1.h`或`header2.h`两者兼而有之，那么`file.c`当您更改其中一个标头时会发生什么？

    回答：又没有了。你没有改变`file.c`；您再次重新编译目标文件。

因此，您的目标文件规则的依赖部分很好（在与自动依赖生成相关的限制范围内）。说源文件依赖于标头的规则没有任何意义。实际上，源文件并不直接依赖于头文件。（它间接依赖于它们，因为如果标头内容发生更改，使得有效代码不再是有效代码，则在源代码修复之前不会编译任何内容。但这有点偏离主题。）

对依赖项进行硬编码是有问题的；他们改变了。另一方面，自动生成依赖项是繁琐的。有 GCC 选项（如`-M`, `-MM`, `-MF`, `-MG`, `-MP`, `-MQ`, `-MD`, `-MMD`, `-MT`, `-H`- 如此丰富的选项告诉您这里有问题！）可以提供帮助，并且 GNU`make`有“条件包含”来包含依赖文件（如果它们存在），如果他们没有。这些可以提供帮助。查找`makedepend`和`mkdep`相关命令以获取其他自动化方式。

* * *

忽略自动依赖生成，您的 makefile 可能会显示：

```
FILES.o = file.o

file.x: ${FILES.o}
        ${CC} -o $@ ${CFLAGS} ${FILES.o} 

file.o: file.c header1.h header2.h 
```

`make`将提供一个命令编译`file.c`成`file.o`.

当您的程序`other.o`也可以使用时，您只需添加`other.o`到宏`FILES.o`（这就是它是复数名称的原因）。你也可以添加依赖信息。如果您也需要库，则可以在链接行中添加选项：

```
LDFLAGS = -L/usr/local/lib
LDLIBS  = -llocal

FILES.o = file.o other1.o other2.o

file.x: ${FILES.o}
        ${CC} -o $@ ${CFLAGS} ${FILES.o} ${LDFLAGS} ${LDLIBS}

file.o: file.c header1.h header2.h 
```

请注意，库应该在目标文件之后。在目标文件之前列出库很容易导致其他平台上的链接时失败，从而激怒那些试图构建您的软件的人。

# android - 当我的 Android 设备不平坦时，我应该如何计算方位角、俯仰角、方向？

> ID：15649684
> 
> 赞同：14
> 
> 时间：2013-03-27T00:02:24.407
> 
> 标签：android, orientation, sensors

我正在使用 Android 重力和磁场传感器通过 SensorManager.getRotationMatrix 和 SensorManager.getOrientation 计算方向。这给了我方位角、俯仰角和方向数字。当设备平放在桌子上时，结果看起来很合理。

但是，我在清单中禁用了纵向和横向之间的切换，因此 getWindowManager().getDefaultDisplay().getRotation() 始终为零。当我将设备旋转 90 度使其垂直站立时，我遇到了麻烦。有时数字看起来很不对劲，我意识到这与[Gimbal lock](http://en.wikipedia.org/wiki/Gimbal_lock#Gimbal_lock_in_applied_mathematics)有关。但是，其他应用程序似乎没有这个问题。例如，我将我的应用程序与两个免费的传感器测试应用程序（[Sensor Tester (Dicotomica)](https://play.google.com/store/apps/details?id=com.dicotomica.sensortester&hl=en)和[Sensor Monitoring (R's Software)](https://play.google.com/store/apps/details?id=jp.holy.rssoftware.app.sensor)）进行了比较。当设备平放时，我的应用程序与这些应用程序一致，但当我将设备旋转到垂直位置时，可能会有显着差异。这两个应用程序似乎彼此一致，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T00:27:26.903

当设备不平整时，您必须先打电话`remapCoordinateSystem(inR, AXIS_X, AXIS_Z, outR);`再打电话`getOrientation`。

通过将设备单元正交投影到世界中，然后计算生成的投影向量与北轴之间的角度 来获得`azimuth`返回值。`getOrientation``Y axis``East-North plane`

现在我们通常认为方向是后置摄像头指向的方向。那就是设备轴指向屏幕外的`-Z`方向`Z`。当设备是扁平的时，我们不会考虑方向并接受任何给定的东西。但是当它不平坦时，我们期望它是 的方向`-Z`。但是`getOrientation`计算 的方向`Y axis`，因此我们需要`Y and Z axes`在调用之前交换`getOrientation`。这正是`remapCoordinateSystem(inR, AXIS_X, AXIS_Z, outR)`它所做的，它保持`X axis`原样和 map `Z to Y`。

现在，你怎么知道什么时候去`remap`或不去。你可以通过检查来做到这一点

```
float inclination = (float) Math.acos(rotationMatrix[8]);
if (result.inclination < TWENTY_FIVE_DEGREE_IN_RADIAN 
            || result.inclination > ONE_FIFTY_FIVE_DEGREE_IN_RADIAN)
{
    // device is flat just call getOrientation
}
else
{
    // call remap
} 
```

上面的倾角是设备屏幕与世界东西平面的夹角。它显示了设备倾斜的程度。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-06T11:47:54.300

我认为当设备不平坦时定义方向角的最佳方法是使用更合适的角度坐标系，即您从中获得的标准欧拉角`SensorManager.getOrientation(...)`。我建议我[在 math.stackexchange.com 上](https://math.stackexchange.com/questions/381649/whats-the-best-3d-angular-co-ordinate-system-for-working-with-smartfone-apps/382048#382048)描述的那个。我还在[此处的答案](https://stackoverflow.com/questions/16317599/android-compass-that-can-compensate-for-tilt-and-pitch/16386066#16386066)中放了一些实现它的代码。除了方位角的良好定义外，它还定义了俯仰角，这正是`Math.acos(rotationMatrix[8])`此处另一个答案中提到的角度。

您可以从我在第一段中给出的两个链接中获得完整的详细信息。但是，总而言之，来自 SensorManager.getRotationMatrix(...)的旋转矩阵**R是**

![具有 R 矩阵定义的方程](../Images/058a101c4bc208bca9cbcad2edfb0b27.png)

其中 (E [x] , E [y] , E [z] ), (N [x] , N [y] , N [z] ) 和 (G [x] , G [y] , G [z] ) 是指向正东、正北和重力方向的向量。然后你想要的方位角由下式给出

![定义方位角的方程](../Images/ee1b29da5a8b8d1a4d5bdee881833b9f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-07T14:27:33.690

我将添加一个对我有用的示例，使用 Hoan 的答案，并强调一些现在可用的新资源，在查看需要使用陀螺仪传感器的应用程序时可能会有所帮助。

首先，有一个带有示例应用程序的 Google 代码实验室 - 我发现完整的示例应用程序对于理解设备行为非常有用。

应用程序显示如下所示：

[![在此处输入图像描述](../Images/0c52f6a1ba06fe93f9e8f345a125b583.png)](https://i.stack.imgur.com/WvQDd.png)

代码实验室和最终应用程序版本可在以下链接中获得（在撰写本文时）：

*   [https://developer.android.com/codelabs/advanced-android-training-sensor-orientation#0](https://developer.android.com/codelabs/advanced-android-training-sensor-orientation#0)
*   [https://github.com/google-developer-training/android-advanced/tree/master/TiltSpot](https://github.com/google-developer-training/android-advanced/tree/master/TiltSpot)

特别是，这允许您进行如下实验（它比描述更容易做......）：

*   将您的设备平放在桌子上，并尝试在平放的情况下在桌子上旋转，抬起顶部和底部（即，将显示屏的顶部（通常是前置摄像头所在的位置）从桌子上抬起，同时离开底部，即主页按钮的位置通常是如果你有一个，在桌子上。同样，抬起设备的左右边缘。观察应用程序中的方位角、俯仰角和滚动值。

*   将您的设备以纵向模式靠在衣柜门上，然后再次尝试移动它。开门见效。旋转到横向以查看差异。

我认为您可能从上面看到的关键是，一切都非常简单，并且在平坦时运行良好，而在不平坦时，一切都很复杂且相互关联。

具体来看一个用例，我必须在纵向模式下垂直显示俯仰和滚动，以下对我有用：

```
 when (event?.sensor?.type) {
            Sensor.TYPE_ROTATION_VECTOR -> {

                // Calculate the rotation matrix
                val rotMatrix = FloatArray(9)
                var rotationMatrixAdjusted = FloatArray(9)
                val azimuthChanged: (Float) -> Unit
                val orientation = FloatArray(3)
                SensorManager.getRotationMatrixFromVector(rotMatrix, event.values);
                SensorManager.remapCoordinateSystem(rotMatrix,
                        SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X,
                        rotationMatrixAdjusted);
                SensorManager.getOrientation(rotationMatrixAdjusted, orientation)

                val rollAngleRadians = orientation[1]
                val pitchAngleRadians = orientation[2]

                //Report results back to listener
                thisListener.onRollPitchEvent(rollAngleRadians, pitchAngleRadians)
            }
        } 
```

# email - CakePHP 电子邮件组件检查电子邮件是否已发送

> ID：15649687
> 
> 赞同：3
> 
> 时间：2013-03-27T00:02:30.537
> 
> 标签：email, cakephp

我只是想知道在 CakePHP 中使用 EmailComponent 时如何检查电子邮件是否已发送或失败？

例如，我目前以这种方式使用它：

```
$this->Email->from='<xyz@yahoo.com>';  
$this->Email->to='<abc@gmail.com>';
$this->Email->sendAs='both';
$this->Email->delivery = 'debug';
$this->Email->send(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T00:13:45.393

`$this->Email->send()` *如果发送成功，*应该返回 true。*您可以尝试以下方法：*

 *```
if ( $this->Email->send() ) {
    // Success
} else {
    // Failure
} 
```

参考：

[http://api.cakephp.org/2.3/class-EmailComponent.html](http://api.cakephp.org/2.3/class-EmailComponent.html)

注意：如果您使用的是 CakePHP 2.x，您可以尝试使用 CakeEmail 类；EmailComponent 已弃用（[参考](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)）。如果您使用的是 1.x，请继续。:p

**编辑：**

如评论中所述，如果您使用*的是*2.x，则应记住 CakeEmail（由 EmailComponent 使用）可能会引发异常。您可以使用[CakePHP 本身](http://book.cakephp.org/2.0/en/development/exceptions.html)或通过使用 try/catch 来处理它：

```
try {
    if ( $this->Email->send() ) {
        // Success
    } else {
        // Failure, without any exceptions
    }
} catch ( Exception $e ) {
    // Failure, with exception
} 
```*

# javascript - 检查路径中是否有几个点 - JS Canvas

> ID：15649692
> 
> 赞同：1
> 
> 时间：2013-03-27T00:02:59.020
> 
> 标签：javascript, canvas

我正在做一个项目，我需要检查画布上的几个点（XY 坐标）是否在定义的路径中。基本上我想使用类似的东西`.isPointInPath(x,y)`，但有一定范围的像素。我想做的是检查点`20, 30 - 26, 30`。

*   是否有现有的方法来实现这一点？
*   如果不是，这是否意味着我必须检查每个单独的点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:32:05.017

仅使用内置功能，您必须检查每个点。

您可以只检查结尾，但新月形路径（等）会失败。

`segment-intersects-path`如果您实施算法（或者`line-intersects-path`，如果您丢弃不在您想要的段上的点），事情会变得更好一些。

然后检查`(20, 30)`和之间的路径交叉点`(26, 30)`。如果这两个点在路径中并且与路径的线/线段相交为零，那么您知道从`(20, 30)`to的整条线`(26, 30)`在路径中。

# java - 计算成绩数组

> ID：15649694
> 
> 赞同：0
> 
> 时间：2013-03-27T00:03:19.717
> 
> 标签：java, arrays

我需要在下面的课程中完成以下方法，标记为 a 部分和 b 部分。该课程应该计算数组Grades的gpa，并添加AP课程成绩的奖金。P 表示 AP 成绩。例如“BP”是AP成绩，“B-”是普通成绩。对于 a 部分，我应该为“CP”得到 1.7122 的结果，而对于 b 部分，它需要处理整个等级数组并得到 3.455333 的结果......

我被告知哪些部分是 a 部分和 b 部分，并使用注释标记了它们。我还评论了标签，我认为其余代码应该用于 a 和 b 部分来计算结果。

有人可以解释一下如何做到这一点以及应该使用哪些方法？

这是我的代码（我知道它的格式不正确，它不在 JCreator 中，但我无法将它正确复制到这里）：

```
public class GPAFreeResponse 
{
    private String[] grades    = {"A P", "B+P", "B-P"};
    private String[] ltrGrades = {"A ", "A-", "B+", "B ", "B-",
                                  "C+", "C ", "C-", "D ", "E "};
    private double[] dGrades   = {4.0, 3.7, 3.3, 3.0, 2.7, 2.3, 
                                  2.0, 1.7, 1.3, 1.0, 0.0};
    private double[] bonusPts  = {.0488,.0488,.0366,.0366,.0366,
                                  .0122,.0122,.0122,.0061,.0061, 0.0};
    private double dGrade;

    public GPAFreeResponse()
    {
        dGrade= calculateGrade("C-P") + calculateBonus("C-P"); // part a
        System.out.println("Part 9a): " + dGrade);
        dGrade = calculateGPA();                // part b
        System.out.println("Part (b): " + dGrade);
    }

    public double calculateGPA()                        // part b
    {
        double dResult = 0.0;
        double dTotalQP = 0.0;
        double dBonusPt = 0.0;

        //more code goes here

        return dResult;
    }

    public double calculateGrade(String str)            // part a
    {
        double dResult = 0.0;

        // more stuff here

        return dResult;
    }

    public double calculateBonus(String str)            // part a
    {
        double dResult = 0.0;

        // and more stuff here

        return dResult;
    }

    public static void main(String[] args)
    {
        //create an instance of GPA
        new GPAExtra();
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:22:54.897

我不确定你对 java 了解多少，但由于这是家庭作业，我将用伪代码编写它，然后让你将其翻译成 java。如果您真的遇到困难，请告诉我，我们很乐意为您提供具体代码。

所以，我们将从calculateGrade 开始。您要做的是遍历 ltrGrades 的所有元素，直到找到与输入的前两个字符匹配的元素，这将为您提供所需字母等级的索引。然后，您只需返回 dGrades 相同索引处的值。所以，

```
initialise string firstTwo as subtring of str from 0 to 1 // you'll have to work out how to actually implement this
repeat with ( i from 0 to the length of ltrGrades )
    if ( firstTwo is equal to the i'th element of ltrGrades ) then
        return the i'th element of dGrades
//catch case where it wasn't found
return 0.0 
```

一旦你有这个工作，或者根本不清楚，请告诉我。

编辑：在有人说这不是最简单的方法之前，我只是在描述您正在寻找的基本算法功能。可以使用方法来改进它，也许可以在数组中找到字符串

编辑 2：这里是您如何实现每个单独部分的细分。

首先，获取str的子串。检查[http://www.tutorialspoint.com/java/java_string_substring.htm](http://www.tutorialspoint.com/java/java_string_substring.htm)以获取有关子字符串的信息，但基本上你想要的是类似

```
String firstTwo = str.substring( 0,2 ); 
```

接下来，遍历 ltrGrades，就像这样

```
for ( int i=0; i<ltrGrades.length; i++ ) { 
```

然后，检查 ltrGrades 的第 i 个元素是否是您想要的子字符串，

```
if ( firstTwo == lrtGrades[ i ] ) { 
```

最后，如果是，那么您将返回 dGrades 的第 i 个元素，所以

```
return dGrades[ i ] 
```

抱歉，如果这不完全正确，这一切都来自记忆，所以我确信那里有一些小错误，但应该给你一个想法。让我知道你什么时候一起工作。

# c# - 如何将对象集合从 VB6 传递到 .NET？

> ID：15649696
> 
> 赞同：2
> 
> 时间：2013-03-27T00:03:26.453
> 
> 标签：c#, .net, vb6, interop, com-interop

我需要将字符串的键/值对集合从 VB6 传递到 .NET。在 VB6 代码中，它们存在于本机集合中。但是我不确定我可以在我的 .NET 项目中引用什么以便能够在我的一种方法中接受 Collection 类型的参数。

我尝试添加对 Visual Basic for Applications 的引用，但返回“无法添加对‘Visual Basic For Applications’的引用”。

我是不是走错了路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:26:17.890

你可以在 c# 中使用这样的东西：

```
[Guid("fb5e929a-2f8b-481e-9516-97edf5099df4")]
[ComVisible(true)]
public interface myInterface{
public void addObject(string key, string value);
} 
```

在你的课堂上，你可以有这个：

```
private collection
public addObject(string key, string value)
{
collection.Add(key, value);
} 
```

这应该允许您在 vb6 中调用 addObject 并传递您的数据。然后 .net 会将其添加到集合中，因此您无需将整个集合从 vb6 传递到 .net，而是将它们一个一个传递。

您可以在此处阅读有关[GUID 的更多信息。](http://www.guidgenerator.com/online-guid-generator.aspx)

有关 COM 的更多信息，[以及此处的 vb6 和 c# 之间的代码示例。](http://www.vbtonet.com/user-guide-appendix/add-com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T02:19:17.227

与使用[COM相比，我发现将我的数据序列化为](http://en.wikipedia.org/wiki/Component_Object_Model)[JSON](http://en.wikipedia.org/wiki/JSON)并将其作为纯文本通过 Interop 鸿沟发送要简单得多。起初我抵制它，但现在它是我的首选解决方案。如果“正确”的解决方案令人沮丧，请尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T01:42:04.653

尝试通过在 Visual Basic 6.0 中制作 a将其传递给[.NET ：](http://en.wikipedia.org/wiki/.NET_Framework)`HashTable`

```
Set dictionary = Server.CreateObject("System.Collections.HashTable")
With dictionary
    For i = 1 To 100
        .Add Chr(i), "some text value"
    Next
End With 
```

然后在 C# 或[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET) [COM](http://en.wikipedia.org/wiki/Component_Object_Model)公开类中

```
public string LoadHashTable(Object tDict)
{
   return String.Format("Type : \"{0}\", Count : {1}", ((Hashtable)tDict).GetType().ToString(), ((Hashtable)tDict).Count);
} 
```

COM 公开类的一个示例是 Stack Overflow 问题*[Building a COM interop library for ASP Classic using 4.0 framework and Visual Studio 2010](https://stackoverflow.com/questions/4923350)*

记得在 x86 和 x64 中注册它：

```
%windir%\Microsoft.NET\Framework\v4.0.30319\regasm MyThing.dll /tlb:MyThing.tlb /codebase MyThing

%windir%\Microsoft.NET\Framework64\v4.0.30319\regasm MyThing.dll /tlb:MyThing.tlb /codebase MyThing 
```

# android - 在imageview android中找到中心位置

> ID：15649704
> 
> 赞同：-2
> 
> 时间：2013-03-27T00:03:38.763
> 
> 标签：android, drag-and-drop

我正在研究拖放机制。这是一个很棒的博客，它帮助我实现了

[https://blahti.wordpress.com/2011/10/03/drag-drop-for-android-gridview](https://blahti.wordpress.com/2011/10/03/drag-drop-for-android-gridview)

所以我有dragview，但我想要在imageview中间的触摸位置，这样它看起来不错。如何找到视图中间的坐标，以便我可以将这些坐标作为起始位置传递？

关于如何实现这一目标的任何线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T00:34:16.473

这是简单的数学。

```
ImageView view = .....
int centerX = (view.getLeft() + view.getRight())/2;
int centerY = (view.getTop() + view.getBottom())/2; 
```

这将返回视图的中心坐标。由于舍入误差，它可能会偏离 1。

# html - 页脚与其他内容分开

> ID：15649713
> 
> 赞同：0
> 
> 时间：2013-03-27T00:04:19.600
> 
> 标签：html, css, margin, footer

所以我没有在页脚之前的部分设置边距，但不知何故它是分开的，我似乎无法找出原因。任何想法？谢谢！

html:

```
<section>
<div class="content"></div>
</section>

<footer>
<div id="footer"></div>
</footer> 
```

和CSS：

```
.content{
 background-image: linear-gradient(bottom, rgb(135,127,127) 0%, rgb(37,37,35) 69%);
 background-image: -o-linear-gradient(bottom, rgb(135,127,127) 0%, rgb(37,37,35) 69%);
 background-image: -moz-linear-gradient(bottom, rgb(135,127,127) 0%, rgb(37,37,35)        69%);
 background-image: -webkit-linear-gradient(bottom, rgb(135,127,127) 0%, rgb(37,37,35) 69%);
 background-image: -ms-linear-gradient(bottom, rgb(135,127,127) 0%, rgb(37,37,35) 69%);

 background-image: -webkit-gradient(
linear,
left bottom,
left top,
color-stop(0, rgb(135,127,127)),
color-stop(0.69, rgb(37,37,35)) 
```

);

```
 #footer{
  background:url(images/footer.png) left top no-repeat;
  height:450px;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:39:46.847

在进行任何样式设置之前尝试应用 CSS 重置：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:52:29.353

在 HTML4 规范 ( [http://www.w3.org/TR/CSS21/sample.html](http://www.w3.org/TR/CSS21/sample.html) ) 中有一个默认样式表定义边距和其他格式。即使您没有在 CSS 中编写边距，它也可能导致浏览器呈现边距。

据我所知，HTML5 中还没有默认样式表的规范，因此浏览器使用自己的默认样式表。

因此，元素使用的边距似乎`section`默认设置了一些边距（在浏览器中）。避免这种情况的最佳方法是重置 CSS。

[http://html5doctor.com/html-5-reset-stylesheet/](http://html5doctor.com/html-5-reset-stylesheet/)对您来说可能是一个很好的解决方案。

# javascript - 当天的 javascript-being-dumb 体验

> ID：15649718
> 
> 赞同：1
> 
> 时间：2013-03-27T00:04:47.473
> 
> 标签：javascript, jquery

人们会认为将 3 个字符的缩写转换为数字表示将是一件容易的事。JavaScript 说“不！”。

```
$(selector).each(function() {
    // convert month abbreviation to numerical representation
    var monthStr = $(this).text().match(/[^\/]*/)[0];
    var months = {
        JAN: 1,
        FEB: 2,
        MAR: 3,
        APR: 4,
        MAY: 5,
        JUN: 6,
        JUL: 7,
        AUG: 8,
        SEP: 9,
        OCT: 10,
        NOV: 11,
        DEC: 12
    };
    var month = months[monthStr].toString();
    var date = $(this).text().replace(monthStr, month);
    $(this).text(date);
}); 
```

即使代码有效且有效，我的控制台仍然出现以下错误：

> 未捕获的类型错误：无法调用未定义的方法“toString”

这绝对没有意义，因为选择器的文本被正确替换（至少根据眼睛）。

当我声明“monthStr”变量时，问题似乎就开始了。如果我将其设置为静态“MAR”作为示例并从“月”变量定义中删除“.toString()”，则不再发生错误。

此外，唯一保存代码的是已经提到的我的月份变量的“.toString()”转换。如果它不在那里，我最终会得到一个“未定义”的值。

只是想分享我当天的 JavaScript 愚蠢经历，并希望有人可以详细说明为什么会抛出这个错误，即使代码完美无缺。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:46:58.223

问题很可能与：

`$(selector).each(function() { ... });`

什么是选择器，选择了多少个 DOM 对象？很可能正在选择一个没有日期作为文本的 DOM 对象。

这是一个重现您的错误的示例：http: [//jsfiddle.net/m3Kza/1/](http://jsfiddle.net/m3Kza/1/)（参见控制台）

控制台：'未捕获的类型错误：无法调用未定义的方法'toString'

```
<p>MAR/26/2013</p>
<p>Hello world!</p>

$('p').each(function() {
    var month = $(this).text().match(/[^\/]*/)[0];

    var months = {
        MAR: 3
    };

    alert(months[month].toString());
}); 
```

这样做的原因是因为我们选择了两个`<p>`元素，并且只有一个元素具有日期作为文本。

如果我们将代码限制为将日期作为文本的 DOM 对象，它可以正常工作：http: [//jsfiddle.net/m3Kza/](http://jsfiddle.net/m3Kza/)

```
<p>MAR/26/2013</p>

var month = $('p').text().match(/[^\/]*/)[0];

var months = {
    MAR: 3
};

alert(months[month].toString()); 
```

您应该将 CSS 类用于将日期作为文本的元素，并且仅用于这些元素，这样您就知道您在选择什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:59:21.460

我对您的代码进行了一些细微的改进，并且没有收到任何错误：

```
<!doctype html>
<html lang="en">
    <head> 
        <meta charset="utf-8" />  
        <title>Test the script</title>
        <script type="text/javascript" src="jquery-1.9.0.js"></script>
        <script>
            $(document).ready(function(){
                $("div").each(function() {
                    // convert month abbreviation to numerical representation
                    var orgStr=$(this).text().trim().match(/[^\/]*/)[0];
                    var monthStr = orgStr.toUpperCase().substr(0,3);
                    console.log("monthStr is:", monthStr);
                    var months = {
                        JAN: 1,
                        FEB: 2,
                        MAR: 3,
                        APR: 4,
                        MAY: 5,
                        JUN: 6,
                        JUL: 7,
                        AUG: 8,
                        SEP: 9,
                        OCT: 10,
                        NOV: 11,
                        DEC: 12
                    };
                    if(months[monthStr]!==undefined){
                        var month = months[monthStr].toString();
                        var date = $(this).text().replace(orgStr, month);
                        $(this).text(date);
                    }
                }); 
            });
        </script>  

    </head>
    <body> 
        <div>JAN/22/2012</div>
        <div>
            JAN/22/2012</div>
        <div>nope/22/2012</div>
        <div>Feb/22/2012</div>
        <div>dec/22/2012</div>
        <div>jul/22/2012</div>
        <div>
            october/22/2012</div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:09:24.507

利用`trim`

```
 var monthStr = $(this).text().match(/[^\/]*/)[0];
    monthStr = monthStr.trim();

    var months = {
            "JAN": 1,
            "FEB": 2,
            "MAR": 3,       
        };

        var month = months[monthStr].toString();
        alert(month); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T01:05:15.283

*   直接打电话`trim()`应该适合你：

```
var monthStr = $(this).text().match(/[^\/]*/)[0].trim(); 
```

*   ~~添加一个`if/else`块以确定月份的正确值：~~

~~`if(monthStr !== undefined && monthStr.length === 3) {`~~

> 实际上，如果您只是检查对象中的元素是否存在，则不需要此检查。

*   然后检查是否`months[monthStr]`存在：

 **```
var month = (months[monthStr]) ? months[monthStr].toString() : monthStr 
```

对于完整的代码

```
$("div").each(function() {
    // convert month abbreviation to numerical representation
    var el = $(this);
    var monthStr = el.text().match(/[^\/]*/)[0].trim();        
    var months = {
        JAN: 1,
        FEB: 2,
        MAR: 3,
        APR: 4,
        MAY: 5,
        JUN: 6,
        JUL: 7,
        AUG: 8,
        SEP: 9,
        OCT: 10,
        NOV: 11,
        DEC: 12
    };
    var month = (months[monthStr]) ? months[monthStr].toString() : monthStr;
    el.text(el.text().replace(monthStr, month));
}); 
```

块元素的数量`each()`无关紧要。我的小提琴有多个`div`s 通过 an 运行`each()`，它工作得很好。

[摆弄它](http://jsfiddle.net/yWHcR/5/)**

# scala - Scala：在没有运行时反射和没有类型实例的情况下获取类型名称

> ID：15649720
> 
> 赞同：0
> 
> 时间：2013-03-27T00:05:03.337
> 
> 标签：scala, macros, metaprogramming

我想获得一个类型的名称，作为一个字符串，没有运行时反射。

使用宏，并使用类型的实例，我可以这样做：

```
def typeNameFromInstance[A](instance: A): String = 
  macro typeNameFromInstanceImplementation[A]

def typeNameFromInstanceImplementation[A](
  c: Context)(
    instance: c.Expr[A]): c.Expr[String] = {
  import c.universe._

  val name = instance.actualType.toString
  c.Expr[String](Literal(Constant(name)))
} 
```

如果没有该类型的实例，我该如何做到这一点？我想要一个函数签名，如：

```
def typeName[A]: String 
```

我不能使用 ClassTags，因为它们不提供完整的类型名称，只提供已擦除的类型。[由于线程安全问题](http://docs.scala-lang.org/overviews/reflection/thread-safety.html)，我显然也不能使用 TypeTags 。

编辑：看起来这是不可能的（例如嵌套函数调用）。下面接受的答案在评论中说明了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:22:02.367

您可以访问代表宏应用程序的树：`c.macroApplication`

```
def typeName[T]: String = macro typeName_impl[T]

def typeName_impl[T](c: Context): c.Expr[String] = {
  import c.universe._

  val TypeApply(_, List(typeTree)) = c.macroApplication
  c.literal(typeTree.toString())
} 
```

**编辑：**

另一种获得相同效果的方法，但可能更好一点：

```
def typeName[T]: String = macro typeName_impl[T]

def typeName_impl[T: c.WeakTypeTag](c: Context): c.Expr[String] = {
  import c.universe._

  c.literal(weakTypeOf[T].toString())
} 
```

# c# - 方法中的 C# 访问函数

> ID：15649722
> 
> 赞同：0
> 
> 时间：2013-03-27T00:05:17.067
> 
> 标签：c#, function, methods, external, streamreader

我在一个类中创建了一个方法，我想从同一个类中的另一个方法访问流读取器 sr1，但我似乎无法访问该方法！

```
public void showSelectedFile() 
    { 
        StreamReader sr1 = new StreamReader(File.OpenRead(ReturnTxt));
        ReturnContenctRD = sr1.ReadToEnd();
    }
public void DisposeSR1() 
    { 

    } 
```

谁能向我解释如何从其他功能访问/更改这些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:07:23.637

`sr1`是`showSelectedFile()`方法本地的；当方法返回时，它超出了范围。如果要使其对其他方法可见，则必须使其成为类的成员：

```
StreamReader sr1;

public void showSelectedFile() 
{ 
     sr1 = new StreamReader(File.OpenRead(ReturnTxt))
     ReturnContenctRD = sr1.ReadToEnd();
}

public void DisposeSR1() 
{ 

} 
```

如果只是正确处理它的问题，请将其包装在一个`using`语句中：

```
public void showSelectedFile() 
{ 
     using (StreamReader sr1 = new StreamReader(File.OpenRead(ReturnTxt)))
     {
         ReturnContenctRD = sr1.ReadToEnd();
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:09:02.267

您需要将 StreamReader 存储在类成员变量中

例如

```
class YourClass
{
    private StreamReader _sr1;

    public void showSelectedFile() 
    { 
        _sr1 = new StreamReader(File.OpenRead(ReturnTxt));
        ReturnContenctRD = _sr1.ReadToEnd();
    }

    public void DisposeSR1() 
    { 
       if(_sr1 != null)
          _sr1.Dispose()
    }

} 
```

# c# - 从服务器读取数据并检测 C# 中的网络不可用

> ID：15649723
> 
> 赞同：0
> 
> 时间：2013-03-27T00:05:30.550
> 
> 标签：c#, java, io, network-programming

我有一个简单的任务：从服务器读取数据，如果服务器无法访问（服务器关闭或网络不好），从本地磁盘缓存加载数据（可能是陈旧的）。

下面是 Java 代码的简单伪表示：

```
try {
    //read from server
} catch (IOException ioe) {
    //most likely a socket timeout exception

    //read from local disk
} finally {
    //free I/O resources
} 
```

但是在 C# 中实现它似乎不起作用，因为`WebClient`即使主机上没有 Internet 访问，似乎也不会引发任何异常，因此无法通过 catch 块检测到这种情况并恢复到本地缓存。我知道`WebClient`'s 的异步 API 及其相当有趣的回调链，但我认为这太尴尬了，不适合我的设计目标。有没有一种方法可以像上面显示的 Java 框架代码一样轻松地在 C# 中执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:25:25.487

WebClient 将超时，但仅在 100 秒后。

我建议您改用 HttpWebRequest 。这有一个可设置的超时属性。

请参阅[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:27:17.433

除了 bobbymond 的回答之外，这是一个 WebClient 将返回的 WebException，所以这就是您要捕获的内容：

```
WebClient wc = new WebClient();
try
{
    wc.Credentials = new NetworkCredential("Administrator", "SomePasword", "SomeDomain");
    byte[] aspx = wc.DownloadData("http://SomeServer/SomeSub/SomeFile.aspx");
}
catch (WebException we)
{
    //Catches any error in the WebClient, including an inability to contact the remote server
}
catch (System.Exception ex)
{

} 
```

# objective-c - 子视图的 awakeFromNib 和视图的 viewDidLoad 之间调用了哪些函数？

> ID：15649724
> 
> 赞同：0
> 
> 时间：2013-03-27T00:05:52.750
> 
> 标签：objective-c, cocoa-touch, viewdidload, autoresize, awakefromnib

我`UIViewController`在情节提要中有一个 UIView/UIViewController ()，其中包含一个`CustomView`具有关联 .xib 文件的自定义 UIView ()。我在加载时遇到以下现象`UIViewController`：

*   `CustomView`的`awakeFromNib`函数被调用
*   SOMETHING(?) 将我的子视图的框架设置为 0.0 的高度；堆栈跟踪显示`[UIViewController autoresizedArchivedView]`（相关？）
*   `UIViewController`的`viewDidLoad`函数被调用

知道这之间发生的“东西”是什么，`awakeFromNib`以及`viewDidLoad`我如何控制它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:02:26.413

直到viewDidLoad*之后*，才在归档对象上设置几何属性：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        NSLog (@"%@ %@",
               NSStringFromSelector(_cmd),
               NSStringFromCGRect(self.testView.frame));

    }

    - (void) viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];
        NSLog (@"%@ %@",
               NSStringFromSelector(_cmd),
               NSStringFromCGRect(self.testView.frame));
    }

    - (void) viewDidAppear:(BOOL)animated
    {
        [super viewDidAppear:animated];
        NSLog (@"%@ %@",
               NSStringFromSelector(_cmd),
               NSStringFromCGRect(self.testView.frame));
    } 
```

日志：

```
 viewDidLoad {{0, 0}, {0, 0}}
    viewWillAppear: {{0, 0}, {0, 0}}
    viewDidAppear: {{80, 224}, {160, 274}} 
```

# .net - .net - dictionary.Keys.Add？

> ID：15649734
> 
> 赞同：2
> 
> 时间：2013-03-27T00:06:50.173
> 
> 标签：.net, dictionary, ienumerable, icollection

在 .Net 中，`IDictionary<K, V>`定义`.Keys`和`.Values`属性中的每一个都是一个`ICollection<>`而不是`IEnumerable<>`，这似乎更适合我。

是否有任何合理的用例可以调用`.Add`或`.Remove`的实例`.Keys`？`.Values``IDictionary<K, V>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:43:07.810

不，可能没有合理的用例。这根本没有什么（可能是零）合理的理由。

该类为其`Dictionary<TKey, TValue>`返回一个，然后抛出“**不允许更改从字典派生的键集合”。**每当尝试直接添加到它时。我想它会因为遗留原因而返回，现在可能应该不惜一切代价避免。`KeyCollection``.Keys``NotSupportedException`**`ICollection`**

 **事实上，除非`ICollection`返回的 from`.Keys`引用了它的 contains `IDictionary`，否则我看不到任何有用的事情发生。的`.Add`将`ICollection`不得不告诉包含`IDictionary`此添加的含义。也许您想实现某种形式的 a`Set`您可以执行以下操作：

```
public class StringSet : IDictionary<string, int> {
    private readonly Dictionary<string, int> _InternalDictionary = new Dictionary<string, int>();
    public int this[string key] {
        get { return _InternalDictionary[key]; }
        set { _InternalDictionary[key] = value; }
    }

    private StringCollection _Keys;
    public ICollection<string> Keys {
        get {
            if(_Keys == null) _Keys = new StringCollection(this);
            return _Keys;
        }
    }
    ICollection<string> IDictionary<string, int>.Keys {
        get {
            if(_Keys == null) _Keys = new StringCollection(this);
            return _Keys;
        }
    }

    public ICollection<int> Values { get { throw new NotImplementedException();} }

    public void Add(string key, int value) { _InternalDictionary.Add(key, value); }
    public bool ContainsKey(string key) { return _InternalDictionary.ContainsKey(key); }
    public bool Remove(string key) { return _InternalDictionary.Remove(key); }

    public bool TryGetValue(string key, out int value) { return _InternalDictionary.TryGetValue(key, out value); }
    public void Clear() { throw new NotImplementedException(); }

    public void Add(KeyValuePair<string, int> item) { throw new NotImplementedException(); }
    public bool Contains(KeyValuePair<string, int> item) { throw new NotImplementedException(); }
    public void CopyTo(KeyValuePair<string, int>[] array, int arrayIndex) { throw new NotImplementedException(); }
    public bool Remove(KeyValuePair<string, int> item) { throw new NotImplementedException(); }

    public int Count { get { return _InternalDictionary.Count; } }
    public bool IsReadOnly { get { return false; } }

    public IEnumerator<KeyValuePair<string, int>> GetEnumerator() { throw new NotImplementedException(); }
    IEnumerator IEnumerable.GetEnumerator() { return GetEnumerator(); }
}

public class StringCollection : ICollection<string> {
    private readonly StringSet _ContainingSet;
    public StringCollection(StringSet set) {
        _ContainingSet = set;
    }

    public void Add(string item) {
        if(_ContainingSet.ContainsKey(item)) _ContainingSet[item]++;
        else _ContainingSet[item] = 1;
    }

    public bool Contains(string item) { return _ContainingSet.ContainsKey(item); }
    public bool Remove(string item) { throw new NotImplementedException(); }

    public void Clear() { throw new NotImplementedException(); }
    public void CopyTo(string[] array, int arrayIndex) { throw new NotImplementedException(); }

    public int Count { get { return _ContainingSet.Count; } }
    public bool IsReadOnly { get { return false; } }

    public IEnumerator<string> GetEnumerator() { throw new NotImplementedException(); }
    IEnumerator IEnumerable.GetEnumerator() { return GetEnumerator(); }
} 
```

当然，根据您的特定需求，有更好的方法来实现这个或类似的。唯一的好处是允许`.Add`返回`Keys` `StringCollection`。无论如何，我想强制使用我`StringSet`的人使用父`StringSet`类。但是，有人可能想要上述被覆盖的行为。

用这个调用它：

```
var set = new StringSet();
var keys = set.Keys;
keys.Add("hello");
keys.Add("hello");
keys.Add("world");
Debug.Print("hello: {0}, world: {1}", set["hello"], set["world"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:31:18.370

我想不出任何合理的调用`Add`或`Remove`键或值集合的用例。您希望生成的字典是什么样的？

我很确定，如果您尝试这样做，所有框架的内置实现`IDictionary<K,V>`都会抛出一个或类似的。`NotSupportedException`（你也应该在你自己的任何实现中做同样的事情。）**

# algorithm - 分支定界算法可以纯粹在功能上实现吗？

> ID：15649735
> 
> 赞同：6
> 
> 时间：2013-03-27T00:06:51.897
> 
> 标签：algorithm, functional-programming, branch-and-bound

### 分支定界的一般描述

来自维基百科的[分支和绑定](http://en.wikipedia.org/wiki/Branch_and_bound)：

> 此步骤称为修剪，通常通过维护一个全局变量*m*（在树的所有节点之间共享）来实现，该变量记录迄今为止检查的所有子区域中看到的最小上限。任何下界大于*m*的节点都可以被丢弃。

### 实际例子：旅行推销员问题

旅行商问题的一个简单解决方案是保留一个变量，例如`best`，它表示迄今为止发现的最短哈密顿回路（上限）。

每次我们考虑潜在的新电路中的新步骤时，我们都会计算当前点的路径成本，例如`cost`，这是该路径成本的下限，并将其与`best`变量进行比较。如果在任何时候`cost >= best`，我们都不需要考虑这条路径；我们可能会修剪以该子路径开头的所有潜在路径。

这在诸如 C 之类的过程语言中实现起来并不难，我们可以在其中创建一个在函数范围内的变量。例如，

```
int best = -1; // no best path yet

node* solveTSP() {
    // best can be consulted and has a consistent
    // value across all recursive calls to solveTSP()
    ...
} 
```

### 我的实际问题

我不清楚这种算法将如何**纯粹从功能**上实现。有没有办法模拟维基百科定义中提到的全局变量*m ？*

我知道在 Lisp 中拥有一个全局变量很简单，但是在更纯粹的函数式语言（如 Haskell）中这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:59:06.573

您只需将当前最佳值作为附加参数传递给递归调用，并将更新后的最佳值作为其结果的一部分返回。所以如果你有一个类型的函数`a -> b`，它就会变成`a -> Int -> (b, Int)`. 不是读取全局变量，而是读取附加参数，而不是写入它，而是在函数完成时返回修改后的值。

这可以使用[state monad](https://en.wikibooks.org/wiki/Haskell/Understanding_monads/State)很好地表达。类型`Int -> (b, Int)`同构于`State Int b`，所以我们的类型函数`a -> b`变成了`a -> State Int b`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:23:16.900

具有可变状态的计算并不比没有它的计算强大。一个可以简化为另一个。

特别是，从功能的角度来看，可变单元格变成了一系列连续值，通常在某些排列中，新副本会影响旧副本（例如，在尾递归中）。

# php - 调整上传图片的大小

> ID：15649738
> 
> 赞同：-4
> 
> 时间：2013-03-27T00:07:08.477
> 
> 标签：php, image

```
if (move_uploaded_file($File_Tmp,"product_images/".$File_Name)) {
     // To Rename the uploaded file
    $Random = rand()*1200;
    $File_New_Name = $Random.".".$File_Extension;
    rename("product_images/".$File_Name,"product_images/".$File_New_Name);  
} 
```

现在我希望上传的图像是自定义大小。请帮我写代码并解释它是如何工作的...谢谢...请仅使用 PHP 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:15:04.580

我遵循了 Jarrod 的本教程，并获得了很好的结果。它包括输入图像类型的错误捕获。

[http://net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/](http://net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:16:14.770

imageMagik 的一个例子

```
<?php

    $image = new Imagick($filename);
    $image->resizeImage(200,200, imagick::FILTER_LANCZOS, 0.9, true);
    $image->writeImage($filename);

?> 
```

在此处阅读文档：[resizeImage](http://www.php.net/manual/fr/imagick.resizeimage.php)

和安装文档：[安装](http://www.php.net/manual/en/imagick.installation.php)

# go - 如何转换为嵌套类型

> ID：15649739
> 
> 赞同：3
> 
> 时间：2013-03-27T00:07:12.427
> 
> 标签：go

我已经定义了两种类型

```
type zFrame []byte
type zMsg []zFrame 
```

我有变量

```
var message [][]byte 
```

. Go 编译器告诉我

```
cannot use msg (type [][]byte) as type zMsg in function argument 
```

当我尝试编译时

```
myZMsg := zMsg(message) 
```

. 更改为

```
type zMsg [][]byte 
```

使事情编译，但我更喜欢第一个解决方案。对于这种情况，我是否有一种简单的方法可以从`[][]byte`to转换`zMsg`为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T01:12:03.133

您必须自己进行转换。例如，

```
package main

type zFrame []byte
type zMsg []zFrame

func main() {
    var message [][]byte
    myZMsg := make(zMsg, len(message))
    for i := range message {
        myZMsg[i] = zFrame(message[i])
    }
} 
```

# templates - Marionette view 的 Handlebars 模板在使用前编译一次

> ID：15649742
> 
> 赞同：0
> 
> 时间：2013-03-27T00:07:20.813
> 
> 标签：templates, backbone.js, marionette

我正在使用带有 Marionette.CompositeView 的 Handlebars 模板。模板定义为：

```
template : function (serializedData) {
    var templFn = Handlebars.compile(myTemplateDef);
    return this.templFn(serializedData);
} 
```

在带有 Handlebars 的传统 Backbone 中，建议不要在每次渲染视图时编译模板，而是将编译后的模板存储为 View 属性，这样它只会编译一次，从而节省资源：

```
templFn : Handlebars.compile(myTemplateDef),

render : function () {
  var serializedData = this.model.toJSON();
  ...
  this.$el.append(this.templFn(serializedData);
} 
```

但是在 Marionette 的情况下，template() 的上下文是`window`并且我不控制调用 template() 的方式/时间。

所以问题是：鉴于我们不想创建一个全局变量`window.templFn`，有没有办法将模板编译与 Marionette 的使用分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:17:26.180

木偶有一个把手插件：[https ://github.com/asciidisco/Backbone.Marionette.Handlebars](https://github.com/asciidisco/Backbone.Marionette.Handlebars)

它可能不是完全最新的，但您至少应该能够看到他们如何处理模板的编译。

一般来说，Marionette 提供了一个`Marionette.Renderer`and`Marionette.TemplateCache`对象来允许一个模板被编译一次，并且只编译一次，然后从缓存的模板编译中重新渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:13:48.980

两天前我才开始使用 Marionette，我在 Marionette （纯骨干）之前的代码中使用了 Handlebars，然后我在 marionette 中使用了这种方式：

```
template : function(data) {
  if (typeof this.tplFun === 'undefined') {
    this.tplFun = Handlebars.compile($('#angry_cat-handlebars').html());
  }
  return this.tplFun(data);
}; 
```

或者您可以将 tplFun 添加到您的初始化函数中

# iphone - iphone 为正确或错误的多项选择测验答案播放不同的警报声音

> ID：15649746
> 
> 赞同：-3
> 
> 时间：2013-03-27T00:07:28.093
> 
> 标签：iphone, xcode, alert

如果多项选择选项答案正确或错误，我想播放不同的警报声音。我有正确和错误答案的代码如下

```
if (questionNumber == 1) {
        [self correctAnswer];
    }

if (questionNumber == 2) {
        [self wrongAnswer];
    } 
```

我已经创建了正确的 IBAction 警报代码。我可以在正确或错误答案下创建一个简单的 play.alert 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:50:41.353

如果您想使用默认的 Apple 声音，请使用[此问题](https://stackoverflow.com/questions/5250200/play-alert-sound-same-as-default-message-ringtone)中的代码，然后单击他那里的链接以尝试不同的声音。

如果您想播放自定义声音，最简单的方法是`AVAudioPlayer`：

首先，您需要将`AVFoundation`框架添加到您的项目中。从那里很容易：

```
NSURL *url = [NSURL fileURLWithPath:path isDirectory:YES];
AVAudioPlayer *sound = audioPlayers[url];
NSError *error = nil;
sound = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
[sound play]; 
```

# css - HTML/CSS：悬停在子菜单上时将悬停的图像保留在菜单标题中

> ID：15649747
> 
> 赞同：0
> 
> 时间：2013-03-27T00:07:28.820
> 
> 标签：css, drop-down-menu, hover

我有一个菜单，它的标题有一个图像，当它不再悬停时会更改图像。但是，当我将鼠标悬停在其下方打开的子菜单上时，我希望它保持相同的图像，而不是恢复到未悬停的状态。这可以用 HTML/CSS 完成吗？

这是CSS代码：

```
ul#nav {
  margin: 0 0 0 0px;
}

ul.drop a {
  display:block;
  color: transparent;
}

ul.drop, ul.drop li, ul.drop ul {
  list-style: none;
  margin:  0;
  padding: 0;
  border: 0px solid #fff;
  background: transparent;
  color:      transparent
}

ul.drop {
  position: relative;
  z-index: 597;
  float: left;
}

ul.drop li {
  float: left;
  line-height: 1.3em;
  vertical-align: middle;
  zoom: 1;
}

ul.drop li.hover, ul.drop li:hover {
  position: relative;
  z-index: 599;
  cursor: default;
  background: transparent;
}

ul.drop ul {
  display:none;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 598;
  width: 100%;
  background: transparent;
  border: 0px solid #fff;
}

ul.drop:hover ul {
  display:block;
}
ul.drop ul li {
  float: none;
}

ul.drop ul ul {
  top: -2px;
  left: 100%;
}

ul.drop li:hover &gt; ul {
  visibility: visible
} 
```

这是HTML

```
<ul class='drop' id='nav' style='padding-bottom:8px;'>
  <li><img alt='Share' border='0' onmouseout='this.src=&apos;normal.png&apos;' onmouseover='this.src=&apos;hovered.png&apos;' src='normal.png' style='padding:0px; margin:0px;'/>
    <ul>
      <li style='background-color:#202020;width:160px;padding:0px; margin:0px;'>
         <!-- Share Buttons -->
      </li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:54:14.657

嗯..我有一个特别的技巧给你，希望你喜欢。我制作这样的HTML：

```
<ul id="nav" class="drop">
    <li class="icon1">HOVER ME
        <ul>
            <li> <a href="#" onclick="alert('Iam clicked')">HIDDEN MENU</a> </li>
        </ul>
    </li>
    <li class="icon1">HOVER ME 2
        <ul>
            <li> HIDDEN MENU </li>
        </ul>
    </li>
</ul> 
```

和像这样的特殊css技巧：

```
...
    ul.drop li.icon1{
        background: url(YOUR_IMAGE) no-repeat left top;
        width: 140px;        
    }
   ul.drop li.icon1:hover{
        background: url(YOUR_IMAGE_HOVER) no-repeat left top;
    }
... 
```

> 这里的演示：http: [//jsfiddle.net/CsV7a/](http://jsfiddle.net/CsV7a/)

# android - 替换视图寻呼机中的片段

> ID：15649749
> 
> 赞同：1
> 
> 时间：2013-03-27T00:07:46.747
> 
> 标签：android, android-viewpager

我正在尝试找到与此[https://stackoverflow.com/a/13925130/1634451](https://stackoverflow.com/a/13925130/1634451)类似的解决方案，但海报并未解释 R.id.products_list_linear 是什么。我试图将 R.id.products_list_linear 设置为我要替换的片段的线性布局的 id。但这只是将 2 个片段叠加在一起。我很确定我需要在 viewpager 中获取容器的 id，但我不知道如何获取这个 id。

编辑：为了澄清我试图用另一个片段替换视图寻呼机中的片段，我的代码看起来几乎与我发布的答案一模一样，但是当我制作 R.id.products_list_linear 时，我试图替换布局的片段。我要替换的片段只是覆盖在我要替换的片段上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:29:09.577

**替换视图分页器中的片段**

试试这个定制的 ViewPager 适配器，..

```
import java.util.List;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.view.ViewGroup;

public class ViewPagerAdapter extends FragmentStatePagerAdapter {
    private List<Fragment> fragments=null;
private FragmentManager fragmentManager=null;

public ViewPagerAdapter(FragmentManager fragmentManager,List<Fragment> fragments) {
    super(fragmentManager);
    this.fragments=fragments;
    this.fragmentManager=fragmentManager;
}
@Override
public Fragment getItem(int position) {
    return fragments.get(position);
}
@Override
public int getCount() {
    return fragments.size();
}
@Override
public void setPrimaryItem(ViewGroup container, int position, Object object)
{
    super.setPrimaryItem(container,0,object);
}
@Override
public void notifyDataSetChanged()
{
    super.notifyDataSetChanged();
}
@Override
public void destroyItem(ViewGroup collection, int position, Object view) {
    fragmentManager.executePendingTransactions();
    fragmentManager.saveFragmentInstanceState(fragments.get(position));
}
public void replaceItem(int position,Fragment fragment)
{
    fragments.set(position, fragment);
    this.notifyDataSetChanged();
}
} 
```

从带有片段作为参数的活动中调用它，

```
List<Fragment> fragments = new Vector<Fragment>();
fragments.add(Fragment.instantiate(this, Fragment1.class.getName()));
fragments.add(Fragment.instantiate(this, Fragment2.class.getName()));
fragments.add(Fragment.instantiate(this, Fragment3.class.getName()));
fragments.add(Fragment.instantiate(this, Fragment4.class.getName()));
fragments.add(Fragment.instantiate(this, Fragment5.class.getName()));
mPagerAdapter=new ViewPagerAdapter(getFragmentManager(), fragments); 
```

当您替换 viewPager 内的视图/片段然后使用时，

```
mPagerAdapter.replaceItem(2,Fragment.instantiate(this, Fragment5.class.getName())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:03:54.020

我最终采用了一种对我来说效果很好的不同方法。我为 viewpager 中的片段使用了 ViewSwitcher。

# algorithm - 类似于背包的优化

> ID：15649753
> 
> 赞同：2
> 
> 时间：2013-03-27T00:08:18.723
> 
> 标签：algorithm, mathematical-optimization

我正在尝试找到一种解决优化问题的方法，如下所示：我有 22 个可以多次选择的不同对象。我有一个评估函数`f`，它接受多重性并计算总值。

`f`是线性（仿射）项分数的乘积，因此在允许的区域内是可微的，甚至是平滑的。

我想针对 22 个变量优化 f，附加条件是某些总和不能超过某些值（例如，如果 a,...,v 是我的变量，... `a + e + i + m + q + s <= 9`）。这样，所有的变量都是有界的。

如果 f 是严格单调的，这可以通过（最小修改）背包解决方案来最佳解决。然而，函数不是凸的。这意味着甚至不可能假设如果在一个空背包上拿一个对象 A 比 B 好，那么即使添加第三个对象 C 也可以这样选择（因为 C 可以将 B 的好处修改为比 A 更好）。这意味着不能使用贪心算法；

是否有类似的算法以最优（或至少接近最优）的方式解决此类问题？

编辑：根据要求，一个问题的例子（为简单起见，我选择了 5 个变量 a、b、c、d、e），例如，

```
f(a,b,c,d,e) = e*(a*0.45+b*1.2-1)/(c+d) 
```

（每个变量只出现一次，如果这有帮助的话）另外，例如`a+b+c=4`，`d+e=3`

问题是针对 a,b,c,d,e 作为整数进行优化。有很多优化算法适用于凸函数，但很少适用于非凸函数......

# android - Android：地理定位在某些设备上不再起作用（因为 Jelly Bean (4.1.x) ？）

> ID：15649757
> 
> 赞同：0
> 
> 时间：2013-03-27T00:09:06.853
> 
> 标签：android, geolocation, gps, location

几个月以来，我在 Google Play 上有了两个应用程序。几周以来，我收到了一些用户的电子邮件，他们告诉我该应用程序不再确定他们的位置。在这些问题出现之前，我的应用程序尚未更新。

在这些设备上不再调用 onLocationChanged 委托方法。

似乎问题发生在具有 Android 4.1.x 及更高版本（Jelly Bean）的设备上。

请注意，在这些出现问题的设备上，使用地理位置的其他应用程序似乎也不再工作了；只是谷歌地图仍然设法对用户进行地理定位。

如何解释地理定位在 Android 4.1.x Jelly Bean 及更高版本上不再起作用？

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:35:28.713

我可能完全错了，但这可能与如果您的应用使用 Google Maps Android API v2 的事实有关，您的用户现在需要在两个位置激活位置源才能工作：

1.  设置 > 位置访问 > GPS 或 Wifi
2.  帐户 > Google > 位置设置 > 让 Google 应用访问您的位置

如果我停用第二个，我使用 API 的应用程序将不再获得位置更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T16:49:32.553

Happened to me, I set the Launcher in the settings to JellyBean 4.1 down from 4.2 and it works again. It must be something to do with the launcher restricting access to the GPS.

# c# - 如何在 xml 描述中分隔 img 标签（RSS FEED）

> ID：15649759
> 
> 赞同：1
> 
> 时间：2013-03-27T00:09:19.333
> 
> 标签：c#, xml, xml-parsing, rss, linq-to-xml

我无法从 RSS 提要中检索图像，即在描述中。

我正在使用以下代码来检索信息。

```
 var rssFeed = from el in doc.Elements("rss").Elements("channel").Elements("item")
                 orderby datetime(el.Element("pubDate").Value) descending
             select new
                 {
                     Title = el.Element("title").Value,
                     Link = el.Element("link").Value,
                     Description =el.Element("description").Value,
                     PubDate = datetime(el.Element("pubDate").Value),

                 }; 
```

显示描述时，文本和图像同时显示我想在描述中分离文本和图像。你能告诉我如何进行吗？

使用的 RSS 提要：http: [//news.yahoo.com/rss/](http://news.yahoo.com/rss/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:12:04.093

```
 var rssFeed = from el in doc.Elements("rss").Elements("channel").Elements("item")

                 orderby datetime(el.Element("pubDate").Value) descending

                 select new
                 {
                     Title = el.Element("title").Value,
                     Link = el.Element("link").Value,
                     Description =replace_other(el.Element("description").Value),
                     Image= regex(el.Element("description").Value),
                     PubDate = datetime(el.Element("pubDate").Value),

                 };

   lvFeed.DataSource = rssFeed;
   lvFeed.DataBind(); 
```

}

```
 protected string regex(string source)
  {
   var reg1 = new Regex("src=(?:\"|\')?(?<imgSrc>[^>]*[^/].(?:jpg|bmp|gif|png))   
       (?:\"|\')?");
   var match1 = reg1.Match(source);
   if (match1.Success)
   {
       Uri UrlImage = new Uri(match1.Groups["imgSrc"].Value, UriKind.Absolute);
       return UrlImage.ToString();
   }
   else
   {

       return null;
   } 
```

}

# javascript - ASP 中的事件处理程序

> ID：15649766
> 
> 赞同：0
> 
> 时间：2013-03-27T00:09:42.690
> 
> 标签：javascript, redirect, asp-classic, event-handling

我有一个页面，管理员可以在其中查看所有用户信息并使用更新按钮（表单发布）对其进行编辑。但我需要顶部的按钮显示以用户身份登录，该用户注销管理员并以该用户身份登录并登陆用户主页。我想知道有什么方法可以处理那个按钮事件吗？我是新手，在网上搜索了几个小时后，我发现它在 ASP.net 中很容易处理事件，但在经典 asp 中却很难。

我发现了这个[http://blogs.msdn.com/b/lisawoll/archive/2004/07/22/191692.aspx](http://blogs.msdn.com/b/lisawoll/archive/2004/07/22/191692.aspx)

并尝试但没有奏效。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:12:31.057

客户端 - 按钮

```
<form method="post" action="MyLoginAsUserEventHandlerPage.asp">
...
   <input type="submit" name="btnLoginAsUser" value="Login as User" />
</form> 
```

服务器端：

```
<%
...
If Trim(Request.Form("btnLoginAsUser")) & "" <> "" Then
'the button was clicked - do work
End If
...
%>
... 
```

# php - 在PHP中根据从结尾的长度拆分字符串

> ID：15649775
> 
> 赞同：1
> 
> 时间：2013-03-27T00:11:28.307
> 
> 标签：php, string, split

我想从后面拆分一个字符串。喜欢：

```
$mystring = "this is my string";
$mysecondstring = "thisismystring"; 
```

我想从上面的字符串中拆分出最后 6 个字符，这里是“字符串”。我怎样才能在 PHP 中做到这一点？使用**str_split**，我可以从前面拆分，但我需要从最后。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:12:09.517

利用[`substr()`](http://us3.php.net/manual/en/function.substr.php)

**编辑**

```
$snippet = substr($mystring, 0, -6); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:32:22.687

使用`str_split()`将字符串转换为数组

但是可以以数组形式得到你想要的相同结果输出

```
// The first parameter would the string you want to split.
// then the second parameter would be in what length you want the string to be splitted.

str_split(parameter1,parameter2) 
```

例子。

```
$mystring = " this is my string ";

// we put length of string to be splitted by 6 because its the string length of "string"
$myString = str_split($myString,6); 
```

它将产生以下结果：

```
Output:
Array
(
    [0] => " this " 
    [1] => "is my "
    [2] => "string"

// then you can 
echo $string[2] 
//for the value of "string" being splitted. 
```

)

*注意：如果你`str_split()`用来获得你想要的值，你必须有一个好的分割长度。这就是为什么我在值中添加额外的空格`$mystring`以仅生成`"string"`作为值的输出数组*

# mysql - Sql 错误：组函数的使用无效？

> ID：15649776
> 
> 赞同：0
> 
> 时间：2013-03-27T00:11:41.613
> 
> 标签：mysql, sql

嗨，我想选择一个具有最大 ID（主键）值的行，其中有 patient_id=xyz

以下是我的 sql 脚本

```
check="Select * from notes where id=max(ID) in (SELECT * FROM notes WHERE patient_id="+patientSoapBean.getPatientID()+")"; 
```

我收到无效使用组功能错误。你能指出其中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:14:44.673

您可能正在尝试这样做：

```
SELECT * FROM notes
WHERE patient_id = ?
ORDER BY id DESC
LIMIT 1 
```

# c# - 如何编组 cvMat 和 CV_MAT_ELEM

> ID：15649781
> 
> 赞同：2
> 
> 时间：2013-03-27T00:12:04.397
> 
> 标签：c#, opencv, pinvoke, marshalling

我正在尝试在 c# 中使用一些 openCV Ml 函数，但我不想使用 emugcv，因为我的老师不会让我这样做，所以我正在尝试使用 p/invoke 编组这两行代码。（哦，我应该使用普通的 dll 还是 d.dll ？？）我应该使用调用约定吗？

```
 CVAPI(CvMat*)  cvCreateMat( int rows, int cols, int type );//header def
    CvMat * rowtest = cvCreateMat(1,5,CV_32FC1); 
```

对于这个我有

```
[DllImportAttribute("opencv_ml242.dll.dll", EntryPoint="cvCreateMat")]
public static extern  IntPtr cvCreateMat(int dims, const ref int sizes, int type);

   #define CV_MAT_ELEM( mat, elemtype, row, col )           \
(*(elemtype*)CV_MAT_ELEM_PTR_FAST( mat, row, col, sizeof(elemtype)))

   #define CV_MAT_ELEM_PTR_FAST( mat, row, col, pix_size )  \
(assert( (unsigned)(row) < (unsigned)(mat).rows &&   \
         (unsigned)(col) < (unsigned)(mat).cols ),   \
 (mat).data.ptr + (size_t)(mat).step*(row) + (pix_size)*(col)) 
```

我在做这条线时遇到了麻烦（上面的标题），有人可以帮我吗？谢谢！

```
 CV_MAT_ELEM(*rowtest,float,0,0) 
```

编辑：我为 cv_mat_elem 找到了一些东西

```
 public static void CV_MAT_ELEM(ref Image<Gray, float> mat, Type elemtype, int row, int col, float val)
    {
        MCvMat cvMat = new MCvMat();
        cvMat.data = mat;

        CV_MAT_ELEM_PTR_FAST(ref cvMat, row, col, sizeof(float), val);

    public static void CV_MAT_ELEM_PTR_FAST(ref MCvMat mat, int row, int col, int pix_size, float val)
    {
        unsafe
        {
            int sz = sizeof(float);
            if (row < mat.rows)
            {
                if (col < mat.cols)
                {
                   IntPtr x = new IntPtr(&mat.data + sz * mat.step * row + sz * col);
                }
            }
        }        } 
```

编辑：使用带有我的 opencv 函数的 DLL 解决，只是希望我不会失去性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-04T11:32:32.897

使用带有我的 opencv 函数的 DLL 解决了，只是希望我不会失去性能。

# android - Facebook 3.0：没有调用 Session.newPermissionsRequest 回调

> ID：15649782
> 
> 赞同：1
> 
> 时间：2013-03-27T00:12:05.820
> 
> 标签：android, facebook, permissions, publish

我正在使用 openForRead 请求读取权限，在我为 openForRead 设置的回调之后，我使用 newPermissionsRequest 发出了另一个发布流请求，并为其分配了一个新的回调。但是新的回调没有被调用。

有谁知道这是为什么？它确实询问了我的发布权限，但是当我单击确定时，没有调用回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T02:37:24.097

回调应该添加新的会话，像这样

```
Session.NewPermissionsRequest request = new Session.NewPermissionsRequest(activity, Arrays.asList(FACEBOOK_POST_PERMISSIONS));
session.removeCallback(oldCallback);
session.addCallback(new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state, Exception exception) {                        }
        });
session.requestNewPublishPermissions(request); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T16:03:07.550

请更新到 3.0.1 版本。这是一个已修复的错误。

请参阅[更改日志](https://developers.facebook.com/android/change-log-3.x/)。

# android - 开始活动时出现意外延迟

> ID：15649786
> 
> 赞同：1
> 
> 时间：2013-03-27T00:12:21.717
> 
> 标签：android, bitmap, imagebutton

我正在使用一些 Acitivitys ，它工作得很好。但我有一个奇怪的延迟。

我发现，这是关于这部分代码的，我正在将存储的图像加载到 SDCard 中。

```
 if(p.getAdress() != null){
    Bitmap bitmap = BitmapFactory.decodeFile(p.getAdress()); 
            new_image.setBackgroundDrawable(null);
            new_image.setImageBitmap(bitmap);
    } 
```

为什么这个简单的代码执行时间太长？

如何解决？

如果我去掉这段代码，一切都会如我所愿。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T00:18:40.973

您不应该直接在 UI 线程上加载大型位图。

实际上，可以在[此处](http://developer.android.com/training/displaying-bitmaps/index.html)找到有效加载大型位图的最佳参考。

[在这里，](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)您可以找到有关如何使用 AsyncTask 加载它们的好信息。

这是他们在那里向您展示的方法（您甚至可以[下载示例](http://developer.android.com/shareables/training/BitmapFun.zip)！）

```
class BitmapWorkerTask extends AsyncTask<Integer, Void, Bitmap> {
    private final WeakReference<ImageView> imageViewReference;
    private int data = 0;

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(Integer... params) {
        data = params[0];
        return decodeSampledBitmapFromResource(getResources(), data, 100, 100));
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (imageViewReference != null && bitmap != null) {
            final ImageView imageView = imageViewReference.get();
            if (imageView != null) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
}

 public void loadBitmap(int resId, ImageView imageView) {
    if (cancelPotentialWork(resId, imageView)) {
        final BitmapWorkerTask task = new BitmapWorkerTask(imageView);
        final AsyncDrawable asyncDrawable =
                new AsyncDrawable(getResources(), mPlaceHolderBitmap, task);
        imageView.setImageDrawable(asyncDrawable);
        task.execute(resId);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:19:18.773

你可以试试这个方法。它可以帮助你

```
 private class LongOperation extends AsyncTask<String, Void, String> {

          @Override
          protected String doInBackground(String... params) {
  if(p.getAdress() != null){
    Bitmap bitmap = BitmapFactory.decodeFile(p.getAdress()); 
            new_image.setBackgroundDrawable(null);
            new_image.setImageBitmap(bitmap);
    }

                return "Executed";
          }      

          @Override
          protected void onPostExecute(String result) {

          }

          @Override
          protected void onPreExecute() {
          }

          @Override
          protected void onProgressUpdate(Void... values) {
          }
    } 
```

# php - Magento（弹出窗口）中的联邦快递跟踪不起作用

> ID：15649787
> 
> 赞同：0
> 
> 时间：2013-03-27T00:12:30.930
> 
> 标签：php, magento, magento-1.7, fedex

当我或我的客户尝试在 Magento 管理员或商店中跟踪 Fedex 发货时，我们收到错误 - [http://screencast.com/t/D1jFoMeSxn3](http://screencast.com/t/D1jFoMeSxn3)

还有其他人遇到这种情况吗？UPS 似乎工作正常。这是法师 1.7.02

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T23:58:38.713

Core magento 不支持打印“官方”FedEx 运输标签（带有条形码）。Magento 1.6 声称支持许多功能，但您需要购买 Shipping Labels 的扩展才能“通过引用”跟踪包裹。（使用 Magento 商店生成的唯一参考 ID）：

这是我们正在使用的扩展：http: [//www.cobbconsulting.net/magento-fedex-extension.html](http://www.cobbconsulting.net/magento-fedex-extension.html)

它还支持“基于事件的跟踪”，其中电子邮件由 FedEx.com 自动发送，这也与标签打印相关联。

# c++ - 用于倒置输出的 C++ 2D 数组映射

> ID：15649788
> 
> 赞同：0
> 
> 时间：2013-03-27T00:12:44.630
> 
> 标签：c++, tile

我创建了一个 2D 数组，该数组表示要放置的图块的地图：

```
int sMap[12][20] = {
  {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
  {1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1},
  {1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1},
  {1, 0, 1, 0, 1, 2, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1},
  {1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1},
  {1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
  {1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1},
  {1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 2, 0, 0, 1, 0, 0, 0, 1},
  {1, 1, 0, 0, 0, 0, 0, 1, 2, 1, 0, 0, 1, 0, 1, 1, 2, 2, 2, 1},
  {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1},
  {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
  {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
}; 
```

一旦我的瓷砖被加载，我用它`function()`来放置瓷砖：

```
for (int y = 0; y < 12; y++){ //for (int y = 11; y >= 0; y--){
    for (int x = 0; x < 20; x++){ //for (int x = 19; x >= 0; x--){
        if    (sMap[y][x] == 1)
            glBindTexture( GL_TEXTURE_2D, brick1);
        else if (sMap[y][x] == 2)
            glBindTexture( GL_TEXTURE_2D, brick2);
        else
            glBindTexture( GL_TEXTURE_2D, wall );

        glBegin(GL_QUADS);
            glTexCoord2f(0.0f, 0.0f); glVertex3f(float(x),     float(y), 0.0f);
            glTexCoord2f(1.0f, 0.0f); glVertex3f(float(x + 1), float(y), 0.0f);
            glTexCoord2f(1.0f, 1.0f); glVertex3f(float(x + 1), float(y + 1), 0.0f);
            glTexCoord2f(0.0f, 1.0f); glVertex3f(float(x),     float(y + 1), 0.0f);
        glEnd();
    }
} 
```

出于某种原因，我`Map`是倒置的......（所以上面数字的底行`map`是屏幕上的顶行瓷砖，第二行是屏幕上`map`的第二行瓷砖）。

我的理解是，您遍历选择每个数字并分配正确的图块。我尝试更改`x/y`'s ，但这会旋转屏幕上的地图，使其在 12 个图块`x`和 20 个图块上`y`。

我希望屏幕上的图块代表上面的地图。任何想法如何解决这一问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:23:28.043

问题在于 OpenGL 实际上具有点 (0, 0) 位于视口左下角的坐标系。因此，如果您想在代码中以与绘制矩阵相同的方式表示该矩阵，则需要将绘制的 y 坐标计算为`<height of viewport> - (calculated y)`。如何获得那个高度 - 这取决于你，可能你在代码的前面定义了它。例如，`float(y + 1 + offsety)`将成为`float(HEIGHT - (y + 1 + offsety))`.

# 编辑

哦，我刚刚意识到 - 你有那个循环，所以，你可以把

`for (int y = 11; y >= 0; y--){`

而是现有的外循环开始，就是这样。但是，无论如何，很高兴知道它不会像您想象的那样意外反转 - 这取决于坐标系。

# php - 从带有内爆函数的查询中获取输出

> ID：15649789
> 
> 赞同：0
> 
> 时间：2013-03-27T00:12:51.177
> 
> 标签：php, mysql, arrays, implode

我正在尝试确定与论坛相关的主题组合是否是唯一的。这是在向论坛添加主题时完成的。使用此代码和查询检查唯一性：

```
$options = array(); //here's your choices
$options[] = 'blablabla';
$options[] = 'blabla';

foreach($options as $key => $value) 
    {
        echo '<li>' . $value . '</li>'; 
    }

$sql_unique = "SELECT Forums_ForumID, list
           FROM (
         SELECT Forums_ForumID, GROUP_CONCAT( Topics_TopicID ) AS list
         FROM (
            SELECT *
            FROM Topics_crosstable
            ORDER BY Topics_TopicID
         )H
         GROUP BY Forums_ForumID
            )A
            WHERE list = (
         SELECT GROUP_concat( TopicID )
         FROM Topics
         WHERE Name IN (";
$sql_unique .= implode(",",$options);
$sql_unique .= ") ORDER BY Forums_ForumID ASC )";

$result = mysql_query($sql_unique);
//print "$result";
//echo $result;
//echo mysql_num_rows($result);
//$assoc = mysql_fetch_assoc($result);

var_dump($result); 
```

我确信在 WHERE 中使用固定值时查询可以正常工作。使用当前代码，我无法获得任何输出。无论主题组合是否唯一，vardump 都会给出“错误”结果。我已经尝试了好几天了，所以我真的可以帮助你帮助我！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:16:20.153

如果它们是字符串，则必须引用您的选项。

```
$sql_unique .= "'". implode("','", $options) ."'"; 
```

# mysql - 使用 INSERT 查询将行从一个表复制到另一个表

> ID：15649792
> 
> 赞同：12
> 
> 时间：2013-03-27T00:13:31.810
> 
> 标签：mysql, select, insert, records

我有一个包含 158 列和 22,000 行的表，我还有另一个空表，我希望根据来自用户的 WHERE 条件动态插入值。SELECT 查询将如下所示：

SELECT * FROM mygrist_tables WHERE suic_att>=5 AND gender='M'

这给了我大约 9,000 条记录（比如说）。我想将这些记录插入另一个表（只是这个过滤数据）。可能吗？谁能告诉我 INSERT 查询的外观以及我是否需要使用所有这 158 个 cloumns 创建另一个表，或者 INSERT 查询是否可以动态创建所有这 158 个列？另外，我可以使用视图来执行此操作，还是必须使用表格？提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-27T00:20:26.380

听起来您想将上述`SELECT`语句和`INSERT`结果运行到一个不存在的新表中。如果是这样，这应该工作：

```
SELECT * INTO YourNewTable
FROM mygrist_tables 
WHERE suic_att>=5 AND gender='M' 
```

假设 YourNewTable 已经存在，那么您需要运行 INSERT INTO：

```
INSERT INTO YourNewTable 
SELECT * 
FROM mygrist_tables 
WHERE suic_att>=5 AND gender='M' 
```

或者，您可能需要指定它们不相同的列。

***编辑***- 重新阅读评论并实现 DB 是 MySQL，要从 SQL 语句创建新表，您应该使用：

```
CREATE TABLE YourNewTable
SELECT *
FROM mygrist_tables 
WHERE suic_att>=5 AND gender='M'; 
```

[http://dev.mysql.com/doc/refman/5.0/en/create-table.html](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T00:21:00.783

您可以使用 SELECT INTO 语法

```
SELECT * 
INTO MyNewTable
FROM mygrist_tables WHERE suic_att>=5 AND gender='M' 
```

但是您将无法插入到已经存在的表中。如果您的表已经存在，您将使用

```
INSERT INTO MyOldTable
([LIST OUT YOUR COLUMNS HERE])
SELECT [LIST OUT YOUR COLUMNS HERE] 
FROM mygrist_tables WHERE suic_att>=5 AND gender='M' 
```

# prolog - 我写了一些序言逻辑，如何编写使用它的脚本？

> ID：15649793
> 
> 赞同：0
> 
> 时间：2013-03-27T00:13:37.623
> 
> 标签：prolog, swi-prolog

我正在为序言类写作业，但我坚持做一些简单的事情。我在一个名为 question1.pl 的文件中编写了一堆逻辑

我在 Mac OS X 上使用 SWI，所以在命令提示符下我这样做：

```
swilg
consult('question1.pl'). 
```

加载文件，然后测试它我做：

```
?- father(homer,bart).
true
?- father(marge,bart).
false 
```

等等。

我的问题是，如何为我的代码编写“测试脚本”？

我假设我应该编写类似 question1-tests.pl 的内容，如下所示：

```
(write 'test1, should be true').
father(homer,bart).
(write 'test2, should be false').
father(marge,bart). 
```

但是如何运行该脚本？

对不起，我知道这很简单，但我被卡住了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:50:34.870

不确定这是否是最好的方法，但您可以制作这样的脚本：

```
swipl <<END
[question1].
write('test1, should be true').
father(homer,bart).
write('test2, should be false').
father(marge,bart).
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:47:07.217

回答我自己的问题，我想我可以将其添加到我的 question1.pl ...

```
doTests:-write('Test1, should be true'),nl,father(homer,bart). 
```

只需运行

```
?- doTests 
```

获得输出。足以满足我的任务需要。

# javascript - 我可以在 javascript 对象中使用数字吗？

> ID：15649794
> 
> 赞同：1
> 
> 时间：2013-03-27T00:13:41.400
> 
> 标签：javascript

我的理解是对象的键总是字符串。但是，我相信如果用作键，数值会被转换为字符串，这意味着它不会是某种禁止的值类型。由于我们不在字符串键周围使用引号，因此编写如下内容：

```
{
    a: "a_value",
    b: "b_value", [...]
} 
```

...我认为阅读这样的内容会更容易：

```
{
    1: "first_value",
    4: "whatever", [...]
} 
```

所以我的问题是：使用数值作为键是否真的被认为是不好的做法，或者我可以这样做，至少为了可读性或可读性？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:27:08.170

你是对的，属性名称必须是字符串，但转换是为你完成的。也就是说，和`o = {1: "test""}`是一样的`o = {"1": "test"}`。同样，`o[45]`两者`o[45] = "hi"`都为您转换属性名称，使用`toString()`.

这是一个快速演示，我已经覆盖`toString()`了它以使其显而易见：

```
var o = {xyz: 100, toString: function() { console.log("someone string'd me"); return "ooo"; }}
var x = {};

x[o] = "test";
// console says "someone stringed me"

console.log(x["ooo"]);
// console says "test";

console.log(x[o]);
// console says "someone string'd me", then "test" 
```

您可以看到每次`o`都用作属性，它使用 . 隐式转换为字符串`o.toString()`。所以要清楚，使用数字键不是问题。其实你可以测试`["hi", "ol", "dad"]["1"]`一下，和["hi", "ol", "dad"][1]`是一回事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T00:21:28.117

*任何*值都可以用作 JavaScript 对象中的一个属性 - 如前所述`[ToString]`，在该值上调用以获取属性名称¹。

因此，对象字面`{1: "hi"}`量等价于`{"1": "hi"}`.

现在，允许的[*Object Initialiser*](http://es5.github.com/#x11.1.5)语法是`{PropertyName: AssignmentExpression, ..}`PropertyName*只能*是 IdentifierName ( `x`)、StringLiteral ( `"1"`) 或 NumericLiteral ( `1`)。其他值仍然可以用作键 - 只是没有使用对象初始化器语法声明。

无效文字的示例，以及如何使用普通属性赋值重写它：

```
x = {/regex/: "y"};        // invalid - only Name/String/Number allowed
x = {}; x[/regex/] = "y";  // "okay" - but very suspect! 
```

话虽这么说，我不能说我曾经使用过“整数属性” ，*除非*在处理数组时......这不会出错，即使可能会怀疑。

* * *

¹这适用于属性访问（例如`obj[x] = y`），但不适用于对象初始化器，因为 IdentifierNames*不*被视为表达式 - 但是，所有属性名称为字符串的最终结果仍然适用。

# c++ - Eclipse 显示错误但项目编译正常

> ID：15649796
> 
> 赞同：1
> 
> 时间：2013-03-27T00:13:54.213
> 
> 标签：c++, eclipse, syntax-error

我在 Eclipse 4.2.1 中有一个 c++ 项目。它在命令行上使用外部 makefile 编译没有错误。但是，eclipse 对向量类的“方法'push_back'无法解析”等功能显示了大量警告。任何帮助摆脱这些错误将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:20:35.010

尝试以下操作：

*   将包含路径添加到 Eclipse 项目
*   保存项目中的所有文件
*   关闭 eproject
*   关闭日食
*   打开日食
*   打开项目

这对我有类似的问题。

还要检查解决方案： [Eclipse CDT：无法解析符号“cout”](https://stackoverflow.com/questions/10803685/eclipse-cdt-symbol-cout-could-not-be-resolved)

# jquery - 我认为水平手风琴教程 css 问题

> ID：15649798
> 
> 赞同：1
> 
> 时间：2013-03-27T00:14:06.810
> 
> 标签：jquery, html, css

我一直在关注这个关于如何制作水平手风琴[教程](http://www.youtube.com/watch?v=D8pi6MFXrN4)的教程， 我已经浏览了代码并且几乎完全拥有他所拥有的。我认为我的问题是我的 css，当您单击一个选项卡时，最后一个面板会动画，但是下一个面板会下拉并且没有动画，有人可以告诉我我的 css 或 jquery 中的东西有什么问题，您能给我一些帮助吗？请这是我的[jsFiddle](http://jsfiddle.net/L4YXX/4/)。我不知道到底是什么问题，但我将所有元素都向左浮动。

PS“可见”变量是当前内容面板html：

```
 <div class="accordion" data-style="horizontal">        
    <h3 class="header" id="tab1"></h3>
    <div class="content">Content</div>
    <h3 class="header" id="tab2"></h3>
    <div class="content">Content</div>
    <h3 class="header" id="tab3"></h3>
    <div class="content">Content</div>
    <h3 class="header" id="tab4"></h3>
    <div class="content">Content</div>
</div> 
```

css

```
.accordion {
    width:460px; height:300px
}
.accordion .header {
    width:40px; height:100%
}
.accordion .content{
      background:#dedede; height:100%
}
.accordion .header, accordion .content {
     float:left; height:100%; clear:none
}
#tab1 {
     background:#C90 
}
#tab2 {
     background:#C60
}    
#tab3 {
     background:#C30
}
#tab4 {
     background:#C00
} 
```

jQuery：

```
function accordion(rate) {
    var tab = $('.accordion').find('h3'),        
        visible = tab.next().filter(':last'),
        width = visible.outerWidth();

    tab.next().filter(':not(:last)').css({'display':'none', 'width':0});

    tab.click(function() {
        if(visible.prev()[0] == this) {
             return;   
        }
        visible.animate({width: 0}, {duration:rate});
        visible = $(this).next().animate({'width':width}, {duration:rate});
    });
}

accordion(350); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:06:43.443

抱歉，我没有足够的声誉来发表评论。

您是否将您的代码与教程视频评论中链接的源代码进行了比较？

[http://codecompendium.com/archives/downloads/](http://codecompendium.com/archives/downloads/)

有一些显着差异。您在原始帖子中的 Jquery 与您的 jsFiddle 不同。

您的 Jquery 应该看起来更像：

```
function accordion(rate) {
var tab = $('.accordion').find('.header'),        
    visible = tab.next().filter(':last'),
    width = visible.outerWidth();

tab.next().filter(':not(:last)').css({'display':'none', 'width':0});

tab.click(function() {
    if(visible.prev()[0] == this) {
         return;   
    }
    visible.animate({width:0}, {duration:rate});
    visible = $(this).next().animate({width:width}, {duration:rate});
});
};

$(document).ready(function(){
    accordion(350);
}); 
```

# applescript - Applescript 更改插画家的颜色

> ID：15649802
> 
> 赞同：2
> 
> 时间：2013-03-27T00:14:29.873
> 
> 标签：applescript, adobe-illustrator

我正在尝试将 illustrator 文档中的颜色从一种颜色更改为另一种颜色，但它一直在说“找不到颜色”，我不确定我做错了什么？

```
tell application "Adobe Illustrator"

          if exists color is equal to "C=0 M=0 Y=0 K=90" then

                    set color to "C=0 M=0 Y=0 K=100"

          end if
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:55:54.210

```
tell application "Adobe Illustrator"
    set allMyItems to every path item of current document whose fill color is {cyan:0.0, magenta:0.0, yellow:0.0, black:90.0}
    repeat with myItem in allMyItems
        set fill color of myItem to {cyan:0.0, magenta:0.0, yellow:0.0, black:100.0}
    end repeat
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:34:31.640

看起来它无法理解您设置的确切颜色（即填充颜色、描边颜色等）。或者，如果您只是设置了一个名为“color”的变量，那么您可能需要选择另一个名称（例如 myColor），因为这个名称是保留的

# php - Prestashop 联系表格主题

> ID：15649809
> 
> 赞同：0
> 
> 时间：2013-03-27T00:15:11.470
> 
> 标签：php, mysql, smarty, prestashop

在我的 prestashop 联系表中存在此代码

`SELECT * FROM '._DB_PREFIX_.'contact c LEFT JOIN '._DB_PREFIX_.'contact_lang cl ON c.id_contact = cl.id_contact WHERE cl.id_lang = '.(int)($id_lang).' ORDER BY name ASC`

创建此查询

`SELECT * FROM ava_contact c LEFT JOIN ava_contact_lang cl ON c.id_contact = cl.id_contact WHERE cl.id_lang =6 ORDER BY name ASC LIMIT 0 , 30`

并显示正常结果

![正常查询结果](../Images/51f8d955c14bf411e352a06ad861fa0f.png)

但是当 DB 类执行此代码时

`Db::getInstance(_PS_USE_SQL_SLAVE_)->ExecuteS('SELECT * FROM '._DB_PREFIX_.'contact c LEFT JOIN '._DB_PREFIX_.'contact_lang cl ON c.id_contact = cl.id_contact WHERE cl.id_lang = '.(int)($id_lang).' ORDER BY name ASC');`

除了“名称”字段中显示的所有值，所有值都是空字符串，嗯，这是错误的部分？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:53:39.240

有点奇怪，在我的 Prestashop 1.4.6 联系表格中，表格主题在更改为其他语言时没有显示。

![Prestashop 奇怪的行为](../Images/61fd5b965d6562fa56b2f26c3c6212ef.png)

我花了几天时间寻找解决方案，并通过删除`getContacts`方法（..\shop\classes）中的一些空格来解决问题

![清除空白](../Images/454bb88a9c4e3e1f7dd4a850ab6d99f5.png)

结果是

![显示的表单主题](../Images/9f9862d36863b4aa75a494f6e8b2e6c1.png)

# ios - NSFetchedController 和部分

> ID：15649815
> 
> 赞同：0
> 
> 时间：2013-03-27T00:16:04.587
> 
> 标签：ios, objective-c, nsfetchedresultscontroller

我有一个父实体人。它有两个子实体，男人和女人。

我想做一个 NSFetchedResultsController ，将它们按实体划分（第 0 部分是男性，第 1 部分是女性）。

我可以根据它是哪个类按部分对它们进行排序（`Man Class`vs `Women Class`？或者我是否需要添加一个属性来说明它是男人还是女人，然后是那个部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:57:12.840

`self.entity.name`将实体名称作为`NSString`. 所以你可以使用它。我认为让内部细节（实体的名称）驱动 UI 并不是一个好主意。为部分名称声明一个属性很容易，然后您就可以完全控制名称（包括本地化）。

# ruby - 在 ruby 中，我如何找到两个日期之间的所有文件

> ID：15649818
> 
> 赞同：1
> 
> 时间：2013-03-27T00:16:26.303
> 
> 标签：ruby, file, last-modified

我很惊讶我找不到这个问题的答案，但我需要选择在 Time.now 和 1.day.ago 之间修改的所有文件。显然，在处理 ruby​​ File 或 FileUtil 类时，我并不期望使用“ago”运算符，但如果有人向我展示了一个，我不会感到惊讶。:)

另一种方式是我认为的数组函数......也许涉及我从未使用过的'<=>'运算符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:31:52.823

也许是这样的？（未经测试）：

```
selected_files = Dir.glob("*.pdf").select do |file|
  mtime = File.mtime(file)

  # if in a rails environment:
  # (1.day.ago .. Time.now).cover?(mtime)

  # if not in rails environment but want to use that code do this before that line:
  # require 'active_support/all'

  # else do the math:
  # mtime > (Time.now - 86400) and mtime < Time.now
end 
```

# unit-testing - 如何使用 Selenium 运行我的 NUnit 测试用例以针对不同的环境运行？

> ID：15649819
> 
> 赞同：1
> 
> 时间：2013-03-27T00:16:26.820
> 
> 标签：unit-testing, selenium, nunit

我已经使用 Selenium 编写了 NUnit 测试用例来测试 Web 应用程序。而且我想针对不同的环境（例如 QA、Staging 和生产）运行相同的测试用例，实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T12:53:58.603

NUnit 支持参数化测试夹具以及参数化测试。因此，第一件事是您是否要针对不同的环境运行特定的测试，或者是否将针对两种环境重新运行整个测试夹具？

我问是因为这个问题的答案决定了你将在哪里传递参数（环境）。如果您只想重新运行整个测试夹具，您应该在测试夹具级别传递环境，即创建参数化的测试夹具。如果您只想针对这些环境运行特定测试，则必须将其传递给每个单独的测试用例。下面是一个例子，说明我是如何做同样的事情的：

首先创建一种方法来定义测试可以“附加”到什么“环境”。我建议也许把它推到 app.config 中，并有一个“设置”类和一个与之配套的枚举：

```
public enum Environment
{
    QA,
    Production,
    Hotfix,
    Development
}

public class Settings
{   
    public static string QAUrl { get { return "some url"; } }

    public static string ProductionUrl { get { return "some url"; } }

    public static string HotfixUrl { get { return "some url"; } }

    public static string DevUrl { get { return "some url"; } }
} 
```

上面的“一些 url”将从您的配置文件中读取或硬编码，但请随意。

我们现在有了一个环境的概念，它是 URL，但它们没有以任何方式链接在一起或相关。理想情况下，您希望为其提供枚举的“QA”值，然后它会为您整理出 URL。

接下来创建一个基础测试夹具，您的所有测试夹具都可以从中继承，它保持当前环境。我们还创建了一个`Dictionary`现在将环境值与其 URL 相关联的对象：

```
public class BaseTestFixture
{
    private Dictionary<Environment, string> PossibleEnvironments 
    {
        get
        {
            return new Dictionary<Environment, string>()
            {
                { Environment.QA, Settings.QAUrl },
                { Environment.Production, Settings.ProductionUrl },
                { Environment.Hotfix, Settings.HotfixUrl },
                { Environment.Development, Settings.DevelopmentUrl },
            }
        }
    }

    private Environment CurrentEnvironment { get; set; }

    public BaseTestFixture(Environment environment)
    {
        CurrentEnvironment = environment;
    }
} 
```

您可能可以使用反射来计算出哪个 URL 映射到什么`enum`值。

太酷了，我们有一个可以运行的环境。以管理员身份登录您的站点的示例测试：

```
public class LoginToSite
{
    [Test]
    public void CanAdministratorSeeAdministratorMenu()
    {
        // go to the site
        driver.Navigate().GoToUrl("production site");
        // login as administrator
    }
} 
```

我们如何让它转到特定的 URL？让我们稍微修改一下我们的基类......

```
public class BaseTestFixture
{
    private Dictionary<Environment, string> PossibleEnvironments 
    {
        get
        {
            return new Dictionary<Environment, string>()
            {
                { Environment.QA, Settings.QAUrl },
                { Environment.Production, Settings.ProductionUrl },
                { Environment.Hotfix, Settings.HotfixUrl },
                { Environment.Development, Settings.DevelopmentUrl },
            }
        }
    }

    private Environment CurrentEnvironment { get; set; }

    protected string CurrentEnvironmentURL 
    { 
        get 
        { 
            string url;
            if (PossibleEnviroments.TryGetValue(CurrentEnviroment, out url))
            {
                return url;
            }

            throw new InvalidOperationException(string.Format("The current environment ({0}) is not valid or does not have a mapped URL!", CurrentEnviroment));
        }
    }

    public BaseTestFixture(Environment environment)
    {
        CurrentEnvironment = environment;
    }

            public BaseTestFixture()
            {
            }
} 
```

我们的基类现在可以告诉我们，这取决于我们所处的环境，去哪个页面......

所以我们现在有了这个测试，继承自我们的基础：

```
public class LoginToSite : BaseTestFixture
{
    [Test]
    public void CanAdministratorSeeAdministratorMenu()
    {
        // go to the site
        driver.Navigate().GoToUrl(CurrentEnvironmentURL);
        // login as administrator
    }
} 
```

但是，这很好，但是上面的代码无法编译……为什么？我们实际上还没有给它一个环境，所以我们必须通过一个...

```
[TestFixture(Environment.QA)]
public class LoginToSite : BaseTestFixture
{
    [Test]
    public void CanAdministratorSeeAdministratorMenu()
    {
        // go to the site
        driver.Navigate().GoToUrl(CurrentEnvironmentURL);
        // login as administrator
    }
} 
```

太好了，它现在已经传入了环境，URL 等的检查现在都在后台为你完成了......但是这*仍然*无法编译。由于我们使用继承，我们必须有一个构造函数来为我们传递它：

```
 public LoginToSite(Environment currentEnvironment)
    {
        CurrentEnvironment = currentEnvironment;
    } 
```

等等瞧。

至于具体的测试用例，这要容易一些，拿我们之前的测试用例来说：

```
public class LoginToSite
{
    [TestCase(Environment.QA)]
    public void CanAdministratorSeeAdministratorMenu(Environment environment)
    {
        // go to the site
        driver.Navigate().GoToUrl("production site");
        // login as administrator
    }
} 
```

它将在环境中传递到*特定*的测试用例中。然后，您将需要某种新`Settings`类来为您进行环境检查（以与我之前类似的方式）：

```
public class EnvironmentHelper
{
    private static Dictionary<Environment, string> PossibleEnvironments 
    {
        get
        {
            return new Dictionary<Environment, string>()
            {
                { Environment.QA, Settings.QAUrl },
                { Environment.Production, Settings.ProductionUrl },
                { Environment.Hotfix, Settings.HotfixUrl },
                { Environment.Development, Settings.DevelopmentUrl },
            }
        }
    }

    public static string GetURL(Environment environment)
    {
        string url;
        if (PossibleEnviroments.TryGetValue(environment, out url))
        {
            return url;
        }

        throw new InvalidOperationException(string.Format("The current environment ({0}) is not valid or does not have a mapped URL!", environment));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:58:24.307

最好的方法是对所有函数使用变量而不是硬编码链接。以便在需要更改环境时进行更改。一种更简单的方法是从记事本/excel 文件中读取链接。

# algorithm - 动态规划 - 复杂性

> ID：15649820
> 
> 赞同：1
> 
> 时间：2013-03-27T00:16:41.610
> 
> 标签：algorithm, complexity-theory, dynamic-programming

我有一个家庭作业问题，我一直在尝试解决一段时间，但我一生都无法解决。

我有一张 X*Y 尺寸的表，以及一组较小尺寸的图案，以及与之相关的价格值。我可以水平或垂直切割板材，我必须找到优化的切割模式才能从板材中获得最大的利润。

据我所知，应该有 (X*Y)(X+Y+#ofPatterns) 递归操作。复杂性应该是指数级的。有人可以解释为什么吗？

我想出的伪代码如下：

```
Optimize( w, h ) {
best_price = 0
    for(Pattern p :  all patterns) {
        if ( p fits into this piece of cloth && p’s price > best price) {best_price = p’s price}
    }
    for (i = 1…n){
       L= Optimize( i, h );
       R= Optimize( w-i, h);
       if (L_price + R_price > best_price) { update best_price}
    }
    for (i = 1…n){
        T= Optimize( w, i );
        B= Optimize( w, h-i);
        if (T_price + B_price > best_price) { update best_price}
    }
return best_price;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:25:37.810

在计算动态规划算法的复杂度时，我们可以将其分解为两个子问题：一个是计算**子状态的数量**；另一个是计算**解决特定子问题的时间复杂度**。

但确实，当您不使用记忆化方法时，本质上具有多项式时间复杂度的算法会增加到指数时间复杂度，因为您没有重复使用之前计算的信息。（我很确定您从动态编程课程中了解这部分内容）

无论您是使用记忆法还是自底向上法解决动态规划问题，时间复杂度都保持不变。我认为您遇到的麻烦是您试图在脑海中绘制函数调用图。相反，让我们尝试以这种方式估计函数调用的数量。

你是说有 (X*Y)(X+Y+#ofPatterns) 递归调用。

**嗯，是的，也不是。**

确实，当您使用记忆化方法时，递归调用的数量只有这么多。因为如果你调用并计算了某个Optimize(w0,h0)，这个值会被存储起来，下次另一个函数Optimize(w1,h1)调用Optimize(w0,h0)时，就不会再做这些多余的工作了. 这就是时间复杂度多项式的原因。

但是在您当前的实现中，一个子问题 Optimize(w0,h0) 获得了许多冗余函数调用，这意味着您的算法中递归调用的数量根本不是多项式的（举个简单的例子，尝试绘制递归的调用图斐波那契数算法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:24:07.670

递归情况是指数的，因为您可以在一开始选择将纸张切割为 0 到最大宽度英寸或 0 到最大高度英寸，然后可以选择切割剩余的部分（递归）。

这个问题听起来像是这个棒切割问题的一个更有趣的例子，因为它涉及到两个维度。

[http://www.radford.edu/~nokie/classes/360/dp-rod-cutting.html](http://www.radford.edu/~nokie/classes/360/dp-rod-cutting.html)

是一个很好的指南。阅读应该会让你走上正确的轨道，而不会公然回答你的作业。

递归时为什么它是指数的相关部分：

```
This recursive algorithm uses the formula above and is slow
Code
    -- price array p, length n
    Cut-Rod(p, n)
        if n = 0 then
            return 0
        end if
        q := MinInt
        for i in 1 .. n loop
            q = max(q, p(i) + Cut-Rod(p, n-i)
        end loop
        return q

Recursion tree (shows subproblems): 4/[3,2,1,0]//[2,1,0],[1,0],0//[1,0],0,0//0
Performance: Let T(n) = number of calls to Cut-Rod(x, n), for any x
T(0)=0
T(n)=1+∑i=1nT(n−i)=1+∑j=0n−1T(j)
Solution: T(n)=2n 
```

# php - 使用 PHP/Jquery 预填充搜索框

> ID：15649821
> 
> 赞同：0
> 
> 时间：2013-03-27T00:16:51.557
> 
> 标签：php, jquery

我在页面上有一个搜索字段，允许用户搜索某条记录。

我有一个显示所有记录的 PHP 文件，并在顶部有一个搜索框，使用 Jquery 在用户输入时过滤结果。我想将用户的搜索结果从上一页发送到搜索框，以便他们的结果是已经过滤到他们的搜索词。

我能够使用以下代码为搜索框带来搜索词：

```
 <input type="text" id="filtersearch" placeholder="Search by name or phone number" value="<?php echo $search; ?>"> 
```

但是，虽然它会传输搜索字段，但在打开页面时不会过滤结果。您必须单击搜索框并按 Enter 以更新结果。

这是我正在使用的脚本

```
$(document).ready(function() {
var $rows = $('#orders tbody tr');
$('#filtersearch').keyup(function() {
    var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

    $rows.show().filter(function() {
        var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
        return !~text.indexOf(val);
    }).hide();
});

}); 
```

任何帮助，将不胜感激。

另外，有没有办法将搜索过滤限制在某些字段或列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:27:04.960

要在页面加载时过滤结果，您只需在文档准备好的元素上触发一个按键事件，如下所示：

```
$(document).ready(function() {
    var $rows = $('#orders tbody tr');
    $('#filtersearch').keyup(function() {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

        $rows.show().filter(function() {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return !~text.indexOf(val);
        }).hide();
    });
    $('#filtersearch').keyup();
}); 
```

为了限制搜索，你只需要限制`$rows`. 例如，如果您只想将一个`filterable`类应用于单个列中的单元格并且只搜索这些列，您可以`$rows`像这样调整您的声明：

```
var $rows = $('#orders tbody .filterable'); 
```

如果您想根据这些结果隐藏行，则需要找到`td.filterable`要隐藏的父行，因此您需要调整隐藏代码行以找到最接近的行，`tr`如下所示：

```
 $rows.closest('tr').show().end().filter(function() {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return !~text.indexOf(val);
        }).closest('tr').hide(); 
```

尽管这样做，您可能希望更改变量的名称，因为它不再仅与“行”相关联。我只是在这里保持变量名称相同，因此您只能看到使其工作所需的代码更改。

# c# - 检查字符串列表中包含的字符串

> ID：15649824
> 
> 赞同：0
> 
> 时间：2013-03-27T00:16:57.480
> 
> 标签：c#, asp.net, string, match

检查字符串（整数）是否在字符串列表中的最佳方法是什么？

例如检查 '1' 是否在 (1,2,9,10,11,15)

我有类似的东西：

```
 if(listofString.Contains(radiolist.SelectedValue)) 
```

其中 radiolist.SelectedValue 是以字符串形式存储的整数。

我认为上面的方法行不通，因为 '1' 可能会匹配字符串中的 '11'。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:20:02.603

您可以按字符拆分数组`','`，然后使用`.Contains()`.

```
string listofString = "1,2,9,10,11,15";
string[] stringInts = listofString.Split(',');

if (stringInts.Contains(radiolist.SelectedValue.ToString()))
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:21:34.740

假设 listOfString = "1,2,9,10,11,15"

```
if( listOfString.Split( new char[]{','} ).Any( ss => ss == radioList.SelectedValue ) ) 
```

# glassfish - GlassFish v3.0.1 中的 JAXWS 和 Http Post 超时

> ID：15649830
> 
> 赞同：2
> 
> 时间：2013-03-27T00:17:23.107
> 
> 标签：glassfish, timeout, jax-ws, http-post

我正在尝试为 JAX WS 和 Http Post 调用设置连接和请求超时。我的代码有效，但最多只有 20 秒。也就是我可以把超时值改成5秒，2秒就可以了，但是把超时值设置成30秒会在20秒超时，把超时值设置成60秒还是会在20秒超时。有谁知道最多 20 秒设置在哪里？

对于 JAXWS：

```
//This works, timed out in 10 seconds
((BindingProvider) soapPort).getRequestContext().put(JAXWSProperties.CONNECT_TIMEOUT, 10000);

// This would time out in 20 seconds!!!
((BindingProvider) soapPort).getRequestContext().put(JAXWSProperties.CONNECT_TIMEOUT, 60000);` 
```

对于 Http：

```
// This works, timed out in 10 seconds
HttpConnectionParams.setConnectionTimeout(params, 10000);

// This would time out in 20 seconds!!!
HttpConnectionParams.setConnectionTimeout(params, 50000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:29:18.980

Glassfish 的默认 JAX-WS 运行时是[Metro 2.0](http://metro.java.net/2.0/)。见[5.6。](http://metro.java.net/2.0/guide/HTTP_Timeouts.html)[Metro 指南中的](http://metro.java.net/2.0/guide/)[HTTP 超时](http://metro.java.net/2.0/guide/HTTP_Timeouts.html)部分，所以我们有：

```
// setConnectTimeout()
int timeout = ...;
Map<String, Object> ctxt = ((BindingProvider)proxy).getRequestContext();
ctxt.put(JAXWSProperties.CONNECT_TIMEOUT, timeout);

// setReadTimeout()
int timeout = ...;
Map<String, Object> ctxt = ((BindingProvider)proxy).getRequestContext();
ctxt.put("com.sun.xml.ws.request.timeout", timeout); 
```

仅作为指导，您可以看到[Websphere](http://www.websphere-world.com/modules.php?name=News&file=article&sid=2058)的三个参数（在 Metro 2.0 中只有两个），它们是：

1.  `CONNECTION_TIMEOUT`：WebSphere JAX-WS 客户端等待建立 http/https 连接的时间（默认为 180 秒）
2.  `WRITE_TIMEOUT`：客户端等待完成发送请求的时间（默认为 300 秒）
3.  `RESPONSE_TIMEOUT`：客户端等待完成接收响应的时间（默认为 300 秒）

# javascript - javascript抑制错误并继续for循环

> ID：15649832
> 
> 赞同：0
> 
> 时间：2013-03-27T00:17:47.307
> 
> 标签：javascript

我正在尝试通过从 Internet 下载 3 个图像文件并平均加载它们所花费的时间来实现速度测试。如果由于某种原因出现错误，我想跳过加载该图像并继续下一个。如果错误发生在最后一张图像上，那么我想计算该点的平均速度并返回给调用者。

现在，一旦发生错误（我故意更改了图像的url，使其不存在），它就不会再进一步​​了。我尝试从 .onerror 函数返回 true，但没有运气。有什么建议么？

```
 var images = [{
            "url": 'http://<removed>250k.jpg?n=' + Math.random(),
            "size": 256000
        }, {
            "url": 'http://<removed>500k.jpg?n=' + Math.random(),
            "size": 512000
        }, {
            "url": '<removed>1000k.jpg?n=' + Math.random(),
            "size": 1024000
        }
    ];

function calculateBandwidth() {
    var results = [];
    for (var i = 0; i < images.length; i++) {
        var startTime, endTime;
        var downloadSize = images[i].size;
        var download = new Image();
        download.onload = function () {
            endTime = (new Date()).getTime();

            var duration = (endTime - startTime) / 1000;
            var bitsLoaded = downloadSize * 8;

            var speedBps = (bitsLoaded / duration).toFixed(2);
            var speedKbps = (speedBps / 1024).toFixed(2);
            var speedMbps = (speedKbps / 1024).toFixed(2);

            results.push(speedMbps);

            //Calculate the average speed
            if (results.length == 3) {
                var avg = (parseFloat(results[0]) + parseFloat(results[1]) + parseFloat(results[2])).toFixed(2);
                return avg;
            }
        }
        download.onerror = function (e) {
            console.log("Failed to load image!");
            return true;
        };
        startTime = (new Date()).getTime();
        download.src = images[i].url;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:59:52.467

我认为您没有做的是在每个事件发生时控制过程。每个`onerror`并`onload`告诉您该过程*已停止*，而不是它本身应该*退出。*您初始化一个图像，它不加载，也许记下，否则继续。

问题是，你最后*也会**做同样的事情`onload`*。也就是说，做任何测量，然后移动到下一个，或者，如果没有更多，运行清理和报告或诸如此类的脚本。

例如：

```
var site = 'http://upload.wikimedia.org/',
    imgs = [
    'wikipedia/commons/6/6e/Brandenburger_Tor_2004.jpg',
    'wikipedia/commons/a/ad/Cegonha_alsaciana.jpg',
    'wikipe/Cegonha_alsaciana.jpg',
    'wikipedia/commons/d/da/CrayonLogs.jpg',
    'wikipedia/commons/1/17/Bobbahn_ep.jpg',
    'wikipedia/commons/9/90/DS_Citro%C3%ABn.jpg',
    'wikipedia/commons/f/f0/DeutzFahr_Ladewagen_K_7.39.jpg',
    'wikipedia/commons/c/c7/DenglerSW-Peach-faced-Lovebird-20051026-1280x960.jpg',
    'wikipedia/commons/4/4d/FA-18F_Breaking_SoundBarrier.jpg'
]; 
```

我的图像数组。提示，`wikipe/Cegonha_alsaciana.jpg`不会加载。预先警告，它们很大并且加载缓慢，我使用缓存破坏器来保持它们`onload`的触发。

```
getimg(); 
```

在小提琴中，这一切都在一个`window.onload`事件处理程序中，所以当它被调用时，它会初始化进程。我本身没有设置阶段，否则我可能会调用它`init()`或`setup()`.

```
function getimg() {
    var img = document.createElement('img'),
        path = imgs.shift();

    if (path) {
        img.onload = loaded;
        img.onerror = notloaded;
        img.src = site + path + '?cach=bust' + Math.floor(Math.random() * 9999);

        console.log('Loading ', img.src);

        document.body.appendChild(img);
    } else {
        console.log('Finished loading images.');
    }

    function loaded(e) {
        console.log('Loaded ', e.target.src);
        next();
    }

    function notloaded(e) {
        console.log('Not loaded ', e.target.src);
        next();
    }

    function next() {
        console.log(imgs.length, ' imgs left to load.');
        getimg();
    }
} 
```

[http://jsfiddle.net/userdude/vfTfP/](http://jsfiddle.net/userdude/vfTfP/)

这可以做你想做的事情，没有内置的计时机制。我可以将事情分解为步骤、动作和事件，以便我可以根据需要控制这些步骤。基本上，您的脚本的运行方式应该不会有太大的不同。

# java - Java 数字格式

> ID：15649833
> 
> 赞同：3
> 
> 时间：2013-03-27T00:17:49.577
> 
> 标签：java, number-formatting

我正在尝试在程序中使用 java 的***NumberFormat***类和***getPercentInstance***方法来计算税款。我希望程序显示的是带两位小数的百分比。现在，当我之前尝试将小数格式化为百分比时，Java 将 0.0625 显示为 6%。如何让 Java 显示这样的小数或将 0.0625 显示为“6.25%”？

代码片段：

```
NumberFormat fmt1 = NumberFormat.getCurrencyInstance();
NumberFormat fmt2 = NumberFormat.getPercentInstance();

System.out.print("Enter the quantity of items to be purchased: ");
quantity = scan.nextInt();

System.out.print("Enter the unit price: ");
unitPrice = scan.nextDouble();

subtotal = quantity * unitPrice;
final double TAX_RATE = .0625;
tax = subtotal * TAX_RATE;
totalCost = subtotal + tax;

System.out.println("Subtotal: " + fmt1.format(subtotal));
System.out.println("Tax: " + fmt1.format(tax) + " at " + fmt2.format(TAX_RATE));
System.out.println("Total: " + fmt1.format(totalCost)); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T00:23:40.167

[您可以使用setMinimumFractionDigits(int)在](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#setMinimumFractionDigits%28int%29)[NumberFormat](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)实例上设置最小小数位数。

例如：

```
NumberFormat f = NumberFormat.getPercentInstance();
f.setMinimumFractionDigits(3);
System.out.println(f.format(0.045317d)); 
```

产生：

```
4.532% 
```

# javascript - 画布翻转图像并与其他更改

> ID：15649836
> 
> 赞同：0
> 
> 时间：2013-03-27T00:18:11.283
> 
> 标签：javascript, canvas, flip

我正在尝试用画布实现翻转图像，就像这样，但动画从中间很奇怪

![在此处输入图像描述](../Images/0bee44280fe3360599f614edf4d62950.png)

## 更新

1.  这只是图像的一部分，最终的结果是

### 从

![在此处输入图像描述](../Images/f9b63ea2833c346f9d5608e995ff5195.png)

### 过渡

![在此处输入图像描述](../Images/58708f2145a3c7583c248a5eec891da4.png)

### 至

![在此处输入图像描述](../Images/f727efdc4c4d55c21be07c2e6482f7d3.png)

但是我遇到了麻烦，因为我为每个动画创建了一个小缓冲区，然后用时间间隔替换它们

```
// globals
animations = [];
handler;
// Main canvas, the user see this
context;
canvas;

function flip(x, y, width, height) {        
    // getBuffer returns {cv: canvas, cx, context }
    var buffer = getBuffer(canvas.width, canvas.height),

        // getNextImage return a Image object ready for use
        img = getNextImage(),
        ready = false,
        interval;

    buffer.cx.drawImage(img, x, x);

    newImage = buffer.cx.getImageData(x, y, width, height);

    for (var i = 5; i > 0; i--) {
        smallBuff = getBuffer(width, height);
        scale = -(1/i);
        smallBuff.cx.translate(width / 2, 0);
        smallBuff.cx.scale(scale, 1);
        smallBuff.cx.putImageData(newImage, x, y);

        animations.push(smallBuff);
        ready = (1 === i);
    };

    interval = setInterval(function() {
        console.log("Are you ready: ", ready);
        if (ready) {
            clearInterval(interval);

            handler = setInterval(function() {
                animation(x, y, width, height);
            }, 200);
        }
    }, 100);
}

function animation(x, y, width, height) {
    if(animations.length > 0) {
        var anim = animations.pop();
        anim.cx.fillstyle = '#000';
        anim.cx.clearRect(x, y, width, height);
        context.drawImage(anim.cv, x, y);
        console.log("left:", animations.length);
    } else {
        clearInterval(handler);
    }
} 
```

# clojure - 简单 clojure 程序后的 NullPointerException

> ID：15649839
> 
> 赞同：2
> 
> 时间：2013-03-27T00:18:35.107
> 
> 标签：clojure

我正在学习 clojure，并且遇到了一个似乎与我的代码无关的 NullPointerException。程序在产生错误之前运行完成。编码：

```
; solves the collatz conjecture

; return one step in the sequence
(defn collatz-step [n] 
  (if (= (rem n 2) 0)
    (/ n 2)
    (+ 1 (* 3 n))))

; recurse over all numbers
(defn collatz [n] 
  (if (= n 1)
    (println "All done!")
    ((println (format "N = %d" n)) 
     (collatz (collatz-step n)))))

; get input and run it
(println "Enter a positive number:")
(collatz (read-string (read-line))) 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:33:57.097

当这条线运行时：

```
((println (format "N = %d" n)) 
 (collatz (collatz-step n))) 
```

println 和 colatz 将完成这样的表格：

```
 (return-value-of-println return-value-of-collatz) 
```

println 返回 nil 产生：

```
 (nil return-value-of-collatz) 
```

这是对函数 nil 的函数调用，导致 NPE

取出多余的（）

* * *

Clojure 没有尾调用消除，因此将递归调用更改`collatz`为`recur`将防止它在 n 的较大值上炸毁堆栈

# java - 在 Android 应用程序的标签中解析 HTML 中的 JSON

> ID：15649841
> 
> 赞同：3
> 
> 时间：2013-03-27T00:18:44.053
> 
> 标签：java, android, json, performance, android-intent

我的问题与我想的略有不同，我之前问过：[Parse JSON to cofigure android application](https://stackoverflow.com/questions/15629099/parse-json-to-cofigure-android-application) 我有来自服务器的 json，当我在浏览器源代码中查看它时；这就是它的样子

JOSON.config：

```
<html>
<head></head>
<body>
<pre>
 [

    {
        "sett": " ",
        "glHdr": {
            "sm": [ ],
            "scleHPad": false,
            "st": "sbsm"
        },
        "colrBG": [
            23,
            105,
            184,
            100
        ],
        "colrTB": [
            0,
            0,
            0,
            0
        ],
        "colrTR": [
            255,
            255,
            255,
            100
        ],
        "glFtr": {
            "icoSz": "icoSzN",
            "sm": [ ],
            "scleHPad": false,
            "gvNR": 3,
            "gvHIT": false,
            "gvNC": 3,
            "st": "igsm"
        },
        "statBr": true
    },
    {
        "sm": [
            {
                "tbico": "b43-jeep.png",
                "t": "Welcome!",
                "w": "http://google.com/start",
                "st": "w",
                "wTBL": "wTBLN"
            },
            {
                "t": "Content screen title",
                "f": "Eltec%20Spec%20sheet%20Gim%20RD30W.pdf",
                "st": "f"
            },
            {
                "tbico": "109-chicken.png",
                "t": "Sub menu",
                "sm": [
                    {
                        "t": "Screen 1",
                        "st": "f"
                    },
                    {
                        "t": "Screen 2",
                        "w": "Http://google.com",
                        "st": "w",
                        "wTBL": "wTBLT"
                    }
                ],
                "st": "sm"
            },
            {
                "st": "f"
            }
        ],
        "st": "tbm"
    }

]

</pre>
</body>
</html> 
```

扫描json的函数：

```
 public void doScanAppConfigJson(){

            JSONArray appConfig = null;

            // Function for looping json object via ParseJson class.
            //Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            //Getting json strings from url
            JSONObject jsonObject = jParser.getJSONFromUrl(url);

        try{
            //Getting array of settings
            appConfig = jsonObject.getJSONArray(ConfigConstants.TABLE_VIEW_SUB_MENU_CONFIG);
            //loop throw all the objects under -sm[]
            for (int i = 0; i < appConfig.length(); i++){

                JSONObject sm = appConfig.getJSONObject(i);

                //Now store each of this json in local constant var.

                String tabTitle = sm.getString(TAG_TITLE);

                String webAddress = sm.getString(TAG_WEB_ADDRESS);

                String screenType = sm.getString(TAG_SCREEN_TYPE);

                String fileName = sm.getString(TAG_FILENAME);

            }

        }catch (JSONException e){
            e.printStackTrace();

        }

        } 
```

getJsonFromUrl 方法：

公共 JSONObject getJSONFromUrl（字符串 url）{

```
 //Global authentication for link username and password.
    Authenticator.setDefault(new Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication(){

        return new PasswordAuthentication("username", "password".toCharArray());   
        }

    });

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

我得到的错误是：[http ://cl.ly/image/0z1u2v30341G](http://cl.ly/image/0z1u2v30341G)

现在我猜它是 html doctype 或其他东西的 bcz，但我找不到什么问题。

问：如何解析这个 JSON 并将其存储在局部变量中？（我没有为 json 更改服务器端的选项）提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:54:45.267

好吧，您可以从打开 ' **[** ' 直到关闭 ' **]** ' 提取子字符串，然后将其解析为 json，在您的`getJSONFromUrl()`方法中进行更改：

```
public void getJSONFromUrl() {
     ...
     ...

     json = sb.toString().substring(html.indexOf("["), html.lastIndexOf("]") + 1);

     ...
} 
```

# jquery - on() 不为我做 live() 工作

> ID：15649850
> 
> 赞同：2
> 
> 时间：2013-03-27T00:19:50.320
> 
> 标签：jquery, jquery-ui

jQuery网站上已经提到了`.live()`不再推荐的方法。
我试图使用该`.on()`事件，但它没有按我预期的那样执行。用于`.live`以下场景，我没有遇到任何问题。

我有一个使用自动完成插件的字段：

它的作用是，每次你要输入一个条目时，你把它放在一个字段（由插件生成）中，就像你输入第一个条目并完成完成，第二次输入输入，创建另一个具有相同类的新字段：

```
<li id="select">
    <input type="text" autocomplete="off" size="0" class="input">
</li> 
```

我想要做的是，生成一个粘贴处理程序，这样每次我粘贴的东西都是输入时，它会变成一个带有自己标签的条目（无论如何这与当前问题无关）。当我使用 .live 事件时，它按预期工作。它不仅第一次处理我的浆糊，而且还处理未来的浆糊。但是当我将其更改为 .on 而不是 live 时，它​​仅适用于第一次粘贴。以下是我的代码：

```
$(document).ready(function () {
    $(".input").live('paste', function (event) {
        var element = this;
        setTimeout(function () {
            var text = $(element).val();
            addItem(text);
        }, 10);
    });
}); 
```

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:23:23.183

> 你把它放在一个像这样的字段（由插件生成）中，当你输入第一个条目并完成时，第二次输入输入，另一个具有相同类的新字段被创建

这听起来像是一个动态元素。使用[**live()**](http://api.jquery.com/live/)会将该事件冒泡到，然后在元素上发生`document`a 时重新采取行动。`paste``.input`

用这样的简单替换它`on()`：`$(".input").on('paste', function (event) {}`不会复制它。

这只是一个简单的绑定，一旦元素被动态替换/重新添加，一旦元素被删除，绑定事件就会消失，即使它被重新添加。

要复制`live()`动态元素，您需要使用`on()`委托，这将允许您将事件绑定到最近的静态元素，指定要委托给的元素/选择器。

改变你的电流`live()`：

```
$(document).ready(function () {
    $(".input").live('paste', function (event) {
        var element = this;
        setTimeout(function () {
            var text = $(element).val();
            addItem(text);
        }, 10);
    });
}); 
```

要使用`on()`与此类似的委托：

```
$(document).ready(function () {
    $(document).on("paste", ".input", function (event) {
        var element = this;
        setTimeout(function () {
            var text = $(element).val();
            addItem(text);
        }, 10);
    });
}); 
```

在上面的事件现在绑定到`document`但委托给`.input`元素 on `paste`。

而不是`document`你应该绑定到最近的静态父元素。例如`body`或更接近的静态父级，类似于此：

```
$('body').on("paste", ".input", function (event) {...} 
```

`.input`元素的最接近的静态父级是哪个，`document`或者`body`当然可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:24:09.577

利用

```
function addItem(text){
    console.log('Add', text)
}

$(document).ready(function(){
    $('body').on('paste', ".input", function (event) {
        var element = this;
        setTimeout(function () {
            var text = $(element).val();
            addItem(text);
        }, 10);
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/RZb66/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:27:02.130

看起来事件只触发了一次，可能与：

*   一个名为 using`.one`和 not的事件`.on`
*   事件目标被其 dom 更改（被删除或移动），因此丢失事件。

我建议进行真正的`.live`翻译：

```
$(document).on('paste', ".input", function (event) {
    var element = this;
    setTimeout(function () {
        var text = $(element).val();
        addItem(text);
    }, 10);
}); 
```

`.input`您可以跳过 ready 事件，因为每次添加新事件时，侦听文档中的事件都会将该事件附加到第二个参数 ( ) 中。

# .net - 如何缩短我的代码？

> ID：15649851
> 
> 赞同：-4
> 
> 时间：2013-03-27T00:20:01.910
> 
> 标签：.net, vb.net, visual-studio-2010, organization

我目前有一个巨大的代码来重新生成游戏中的一些东西。代码很大，我认为可以压缩，但我不知道该怎么做。这是代码 Private Sub regen()

```
 'regen coins
    z = coin1

     z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin2

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin3

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin4

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin5

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin6

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin7

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin8

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin9

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin10

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin11

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin12

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin13

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin14

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin15

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin16

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin17

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin18

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin19

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin20

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin21

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin22

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin23

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin24

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin25

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin26

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin27

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin28

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin29

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin30

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin31

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    z = coin32

    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()

    'regen medcoins

    p = medcoin1

    p.Location = ploc
    p.Hide()
    ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If ploc.Y > 595 Then
        ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    p.Location = ploc
    p.Show()

    p = medcoin2

    p.Location = ploc
    p.Hide()
    ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If ploc.Y > 595 Then
        ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    p.Location = ploc
    p.Show()

    p = medcoin3

    p.Location = ploc
    p.Hide()
    ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If ploc.Y > 595 Then
        ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    p.Location = ploc
    p.Show()

    p = medcoin4

    p.Location = ploc
    p.Hide()
    ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If ploc.Y > 595 Then
        ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    p.Location = ploc
    p.Show()

    p = medcoin5

    p.Location = ploc
    p.Hide()
    ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If ploc.Y > 595 Then
        ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    p.Location = ploc
    p.Show()

    p = medcoin6

    p.Location = ploc
    p.Hide()
    ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If ploc.Y > 595 Then
        ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    p.Location = ploc
    p.Show()

    p = medcoin7

    p.Location = ploc
    p.Hide()
    ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If ploc.Y > 595 Then
        ploc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    p.Location = ploc
    p.Show()

    'regens hcoins

    h = hcoin1

    h.Location = hloc
    h.Hide()
    hloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If hloc.Y > 595 Then
        hloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    h.Location = hloc
    h.Show()

    h = hcoin2

    h.Location = hloc
    h.Hide()
    hloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If hloc.Y > 595 Then
        hloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    h.Location = hloc
    h.Show()

    h = hcoin3

    h.Location = hloc
    h.Hide()
    hloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If hloc.Y > 595 Then
        hloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    h.Location = hloc
    h.Show()

End Sub 
```

如您所见，它是一堆代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:31:09.773

创建一个函数并将硬币传递给它：

```
Sub DoStuff(z as coin)
     z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()
End Sub 
```

然后从其他地方调用它

```
DoStuff (coin1)
DoStuff (coin2)
DoStuff (coin3) 
```

您可能还想阅读有关数组的信息...

# java - 优化素数的计算

> ID：15649854
> 
> 赞同：3
> 
> 时间：2013-03-27T00:20:13.597
> 
> 标签：java, performance, algorithm, primes

我正在尝试Project Euler 的[问题 3](https://projecteuler.net/problem=3) ，但我的算法太慢了。有谁知道如何优化这个？我要计算的数字是 600851475143L。计算这个需要很长时间，所以我需要一种方法来加快计算速度。

逻辑：

*   遍历从 3 到该数字 1 的所有数字
*   对于这些数字中的每一个，通过将它们除以它们之间的所有数字来检查它们是否为素数，如果它们不除以它们中的任何一个，则它们是素数。
*   如果素数，则将它们添加到数组中。

    ```
    public static void problem3(long number){

    long number2 = number;
    long sqrtNumber = (long)Math.sqrt(number2);

    int indexNum = 1;
    boolean isPrime = false;

    int primeNums[] = new int[2];
    primeNums[0] = 2;

    //puts prime numbers into an array
    for(int y = 3; y < sqrtNumber; y++){
       isPrime=true;
       for(int theNum = 2; theNum < y; theNum++){
           //if y divides evenly by any number then it is not prime         
           if(y%theNum==0){
               //dont store in array
               isPrime=false;
               break;
           }
       }

       if(isPrime == true){
           //add to array
           System.out.println(y);
           //put y in the array and exapnd the array
           //System.out.println("y: " + y);
           primeNums[indexNum] = y;

           int[] newArray = new int[primeNums.length + 1];
           System.arraycopy(primeNums, 0, newArray, 0, primeNums.length);

           primeNums = newArray;

           indexNum++;
       }
    } 
    ```

********** 更新 **************

我计算到了平方根，这大大加快了计算速度，但我还做了其他事情，即在我发现数字不是素数时在 forloop 中添加一个 break 语句来中断。我编辑了上面的代码以反映这些变化。

我的算法在计算主要因素时仍然是错误的，所以我需要看看它，也许会提出一个新问题。

* * *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T00:22:11.320

您不必除以每个数字。你只需要除以 2 和你的数字的平方根之间的每个素数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T00:22:03.660

您可以做的第一件事是仅通过您正在测试的数字的平方根来测试可能的因子，因为如果您找到一个大于平方根的因子，那么您应该找到一个小于平方根的因子。

如果您需要额外的性能，请使用[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。这使您可以使用先前素数的结果来减少确定较大数字是否为素数的工作。

# javascript - jQuery Flot：在阈值/坐标处更改线条颜色

> ID：15649858
> 
> 赞同：1
> 
> 时间：2013-03-27T00:20:30.360
> 
> 标签：javascript, flot, threshold

我想知道当线条高于/低于阈值时是否可以在 Flot 中更改线条的颜色。平滑的过渡/渐变会更好，但如果它必须是突然的，我想我可以忍受。

这是我希望图表看起来如何的快速n-dirty示例：

![在此处输入图像描述](../Images/0b3c36e78da7777f8cb9a59636694b46.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:55:10.397

您无法获得平滑的过渡，但您可以使用[阈值插件](http://www.flotcharts.org/flot/examples/threshold/index.html)获得突然的过渡。

# apache - Java Apache Derby 数据库恢复错误

> ID：15649861
> 
> 赞同：-1
> 
> 时间：2013-03-27T00:20:49.497
> 
> 标签：apache, jpa

我正在使用 Netbeans 和 JavaDB 开发 JSF + JPA 应用程序。[当数据库处于脱机状态时，我按照此链接](http://db.apache.org/derby/docs/10.1/adminguide/cadminhubbkup12677.html)中的说明复制了整个数据库文件夹。当我将特定的数据库子文件夹复制到另一个 derby 位置或将整个数据库文件夹作为 Netbeans Java 数据库中的新 Java 数据库位置时，它会给出以下错误。

```
Unable to connect. Cannot establish a connection to jdbc:derby://localhost:1527/hr using org.apache.derby.jdbc.ClientDriver(DERBY SQL error:SQLCODE: -1, SQLSTATE:XJ040, SQLERRMC:Failed to start database 'hr', see the next exception for details.:SQLSTATE:XSLANDatabase at D:\Data\PDHS\hr has an incompatible format with the current version of the software. The Database was created by or upgraded by version 10.8.). 
```

我该如何解决这个错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:36:03.070

The message says:

```
The Database was created by or upgraded by version 10.8. 
```

What version of Derby is the server running?

# sql-server - 2 个表的 SUM 函数产生错误的值

> ID：15649867
> 
> 赞同：0
> 
> 时间：2013-03-27T00:21:31.807
> 
> 标签：sql-server, tsql, sql-server-2008-r2

使用：SQL Server 2008 R2

在计算总数的百分比时，我在两个不同的表上运行聚合查询 (SUM) 时遇到了麻烦。单独地，它会产生正确的数量；当查询包含两者时，它会产生一个巨大的价值，我无法确定它的来源。代码，加上我正在运行以生成第二个表的代码。

```
SELECT TOP 100 Field
INTO TableTwo
FROM TableOne

SELECT SUM(t1.Field), SUM(t2.Field)
FROM TableOne t1, TableTwo t2 
```

`TableTwo`源自百分之十`TableOne`（您可以在上述查询的第一部分中看到）。请注意，这些单独产生正确的值：

```
SELECT SUM(t1.Field)
FROM TableOne t1

SELECT SUM(t2.Field)
FROM TableTwo t2 
```

SQL Server 是上面的聚合查询，还是我在这里遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:25:19.400

```
FROM TableOne t1, TableTwo t2 
```

是交叉连接。 *来自 t1 的每条*记录都将与来自 t2 的*每条*记录相连接，净赚 10 倍于您预期的记录（如果 t1 有 10% 的 t2 记录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:26:47.477

`FROM TableOne t1, TableTwo t2`是[交叉连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)；对于 table1 和 table2 行的每个组合，您都会得到一行 - 这就是您的 SUM 如此之高的原因。

您需要单独执行这些查询。如果您希望它们在同一个结果集中，您可以使用子查询：

```
select (
   SELECT SUM(t1.Field)
   FROM TableOne t1
) [t1sum], 
(
   SELECT SUM(t2.Field)
   FROM TableTwo t2
) [t2sum] 
```

# c++ - 为什么在 C++ 编程中使用方法来获取或设置变量

> ID：15649870
> 
> 赞同：-1
> 
> 时间：2013-03-27T00:21:44.503
> 
> 标签：c++, qt, class

就像在 Qt 中一样，我在 QPoint 类中看到了。它使用 QPoint.x() 来获取和使用 QPoint.setX() 来设置。为什么不直接使用 x 作为公共变量？我知道有些书推荐它，但它的深层原因是什么？而且有时不太方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:27:47.277

这样做有三个基本原因。

1.  抽象。您的用户不应该知道或关心`x`是按价值存储还是每次都计算。也许您存储一个盒子的上 x 坐标及其宽度，并计算`x`为`max_x - width`. 也许您在 3.4 版本中更改了存储数据的方式。
2.  一致性。您的用户不必记住在将宽度调用为函数 ( ) 时将其调用`x`为变量 ( )。所以让它变得简单，并将一切（在合理范围内）作为一个函数。`myobject.x``myobject.width()`
3.  控制。也许`x`只允许是积极的，甚至，或者当你改变时`x`，`upper_x`也需要改变。使用 setter/getter，您可以强制执行所有这些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:25:41.537

创建成员`private`并使用 getter 和 setter 访问它的三个常见原因：

1.  您需要对成员保持一些不变性。也就是说，如果成员可以拥有使您的对象无效的某些值，则您要确保客户端不能仅根据自己的意愿对其进行修改。[如果您没有不变量，](http://www.artima.com/intv/goldilocks3.html) [Stroustrup 建议使用 a`struct`](http://www.artima.com/intv/goldilocks3.html)。

2.  您希望接口以某种不同的形式公开成员。一个例子是，如果您存储 a `Person`，`dateOfBirth`但您想通过成员函数公开它`getAge()`。年龄是根据出生数据计算的，但您不希望客户`dateOfBirth`直接访问。

3.  在未来的某个时候，前两点中的一个或两个可能会成为现实。

如果我正在实施 a `Point`，我会使其成为 a`struct`并拥有`x`并`y`成为公共成员。根本没有无效的东西`Point`，我无法想象坐标将需要从其他表示中计算出来。Qt 开发人员显然做出了不同的决定。

# sql - 每周获取价格

> ID：15649880
> 
> 赞同：0
> 
> 时间：2013-03-27T00:23:14.790
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我有一个简单的表：

```
prices(fromwhichweek(int),newprice(int))  
data example:  
1,20  
3,21 
10,30 
```

所以我正在寻找一个 sql 语句，它返回每周的价格是多少？
类似的东西（根据上面的 3 行）：

```
1,20  
2,20  
3,21  
4,21  
5,21  
6,21  
7,21  
8,21   
9,21  
10,30
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:11:37.250

您需要生成几周的序列。以下版本通过在`select`语句中使用相关子查询来获取价格：

```
select w.week,
       (select top 1 newprice from prices p where w.week >= p.fromwhichweek
        order by fromwhichweek desc
       ) theprice
from (select 1 as week union all select 2 union all select 3 union all select 4 union all
      select 5 union all select 6 union all select 7 union all select 8 union all
      select 9 union all select 10
     ) w 
```

一些评论。这取决于有一个周列表。在这里，它是通过显式子查询完成的。根据数据库的不同，还有其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:39:40.377

这是一种根据`fromwhichweek`表中的最大值动态确定所需周数的方法。您可以通过`@end`显式分配值（例如尝试使用 22 或 25）而不是使用`MAX`. 假设您的价格表真的这么简单，这应该可以在 52 周内扩展。

```
DECLARE @prices TABLE(fromwhichweek INT, newprice INT);

INSERT @prices VALUES
(1, 20),  
(3, 21), 
(10,30);

DECLARE @start INT, @end INT;

SELECT @start = MIN(fromwhichweek),
       @end   = MAX(fromwhichweek)
FROM @prices;

;WITH x AS 
(
  SELECT TOP (@end-@start+1) 
    n = @start-1+ROW_NUMBER() OVER (ORDER BY [object_id])
  FROM sys.all_objects ORDER BY [object_id]
)
SELECT fromwhichweek = x.n, 
  newprice = COALESCE(p.newprice, (
    SELECT TOP (1) newprice FROM @prices 
    WHERE fromwhichweek <= x.n
     AND newprice IS NOT NULL
   ORDER BY fromwhichweek DESC))
FROM x 
  LEFT OUTER JOIN @prices AS p
  ON x.n = p.fromwhichweek
ORDER BY x.n; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T00:26:27.197

这将为您提供您想要的输出。如果您想要不同的东西，请修改您的问题:)

```
SELECT
  fromwhichweek, price
FROM
  prices
ORDER BY
  fromwhichweek ASC 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-27T01:08:25.597

您可以创建一个填充 1-52 周的表。

```
create table weeks (week int);
insert into weeks values (1), (2), ....(52); 
```

然后您可以执行以下查询以获取结果。这是一个原生的 MYSQL 查询。如果您使用不同的 sql 供应商，您可能需要稍微更改它。

```
select A.week, B.price from weeks as A, prices as B where 
    B.fromwhichweek = (select C.fromwhichweek from prices as C where 
                       C.fromwhichweek <= A.week order by C.fromwhichweek desc limit 1); 
```

# python - Matplotlib 不可见注解

> ID：15649887
> 
> 赞同：2
> 
> 时间：2013-03-27T00:23:42.403
> 
> 标签：python, matplotlib

我目前只是在图中添加一些点并为每个特定点添加注释。但是，每次尝试时，我的屏幕上实际上只显示了一部分注释。其他注释通过调试和打印在“那里”，但由于某种原因它们只是不可见。有什么我做错了吗？

```
import matplotlib.pyplot as plt

self.fig = plt.figure()
self.ax = self.fig.add_subplot(111, projection='polar')

li = [[0.2, 1], [0.4, 1], [0.6, 1], [0.8, 1], [1, 1]]

for x,y in li:
  point, = self.ax.plot(x, y, marker='o', color='r', markersize=12)
  annotation = self.ax.annotate("Comment goes here",
      xy=(x,y), xycoords='data',
      xytext=(x,y), textcoords='data'
  )

self.fig.canvas.draw() 
```

经过一些调试，似乎删除`projection='polar'`修复了问题并且所有注释都出现了。极坐标图是否有特定的东西会导致错误的注释？

编辑：实际上，我可能将问题过于简单化了。我尝试了该程序的简化版本并且它有效。我正在研究基于 matplotlib 和 gtk+ 构建的现有框架，因此可能还有一些我不知道的其他隐藏问题。

Edit2：我已经追踪了这个问题。看来，在我的更新函数中，如果我将图形（半径）的 ylim 设置为 1（与所有点相同），那么一些注释就会消失。不知道为什么，但是如果我不理会 ylim 就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:03:49.397

![在此处输入图像描述](../Images/1674b47ed1efbbac181b1d00bd8f9032.png)

在 1.3.x 上没有对我的复制`matplotlib.__version__`，您所有的注释都显示在指定的位置。

# php - 使用 php 从 xml 文件中选择属性

> ID：15649895
> 
> 赞同：0
> 
> 时间：2013-03-27T00:24:27.420
> 
> 标签：php, sql, xml

这是我的原始 XML，我想在其上运行 sql，因此我可以从中选择一条记录，但是，我已经成功完成，我只想获得我想要的记录

```
<catalog>
<product>
<programname>Teva Footwear</programname>
<programurl>http://www.teva.com?cid=aff_pr</programurl>
<catalogname>Teva Footwear Product Catalog</catalogname>
<lastupdated>03/25/2013</lastupdated>
<name>Teva Men Tanza Leather Sport Sandals in Brown</name>
<keywords>Teva Men Tanza Leather Sport Sandals in Brown</keywords>
<description>...</description>
<sku>1000183-BRN</sku>
<manufacturer>Teva</manufacturer>
<manufacturerid>1000183-BRN</manufacturerid>
<currency>USD</currency>
<saleprice>85.00</saleprice>
<price>85.00</price>
<retailprice>85.00</retailprice>
<fromprice>Yes</fromprice>
<buyurl>...</buyurl>
<impressionurl>http://www.awltovhc.com/image-6059025-10757671</impressionurl>
<imageurl>...</imageurl>
<advertisercategory>Men</advertisercategory>
<promotionaltext>Fast, Free Shipping and Free Returns!</promotionaltext>
<online>Yes</online>
<instock>YES</instock>
<condition>New</condition>
<warranty>...</warranty>
<standardshippingcost>0.0</standardshippingcost>
</product>
<product>...</product>
<product>
<programname>Teva Footwear</programname>
<programurl>http://www.teva.com?cid=aff_pr</programurl>
<catalogname>Teva Footwear Product Catalog</catalogname>
<lastupdated>03/25/2013</lastupdated>
<name>Teva Men Original Mush Flip Flops in Tread Black</name>
<keywords>Teva Men Original Mush Flip Flops in Tread Black</keywords>
<description>
See what all the hype is about and get yourself a pair of men's Teva Original Mush sandals today! Mush is the ultimate in flip flop foot-forming comfort. The Original Mush features a thicker sole and slightly wider forefoot and heel for a more generous fit. 
```

这是我到目前为止所做的（当然我在网上找到了代码）

```
<?php 

// ----------------  The example uses the php 5 "DOM Functions"  to select specific node uding Xpath query ------------------  

$doc = new DOMDocument;                                        // Create a new dom document 
$doc->preserveWhiteSpace = false;                              // Set features 
$doc->formatOutput = true;                                     // Create indents on xml 

$doc->Load('Teva_Footwear-Teva_Footwear_Product_Catalog.xml');                                        // Load the file 

$xpath = new DOMXPath($doc); 
$query = '//catalog/product/sku[. = "1000183-WAL"]';         // The xpath (starts from root node) 
$names = $xpath->query($query);                                 // A list of matched elements 

$Output=""; 
foreach ($names as  $node) { 
   $Output.=$doc->saveXML($node->parentNode)."\n";             // We get the parent of  "<firstname>" element  (the entire "<person>" node and its children) (maybe get 

the parent node directly using xpath) 
                                                                // and use the saveXML() to convert it to string   
} 

echo $Output."<br>\n\n";                                      // The result  

echo "<hr><br><b>Below view the results  as HTML content. &nbsp; (See also the page's HTML code):</b>\n<pre>".htmlspecialchars($Output)."</pre>"; 

?> 
```

这是此代码之后的输出：（由制造商ID选择的记录）

```
<product>
  <programname>Teva Footwear</programname>
  <programurl>http://www.teva.com?cid=aff_pr</programurl>
  <catalogname>Teva Footwear Product Catalog</catalogname>
  <lastupdated>03/25/2013</lastupdated>
  <name>Teva Men Tanza Leather Sport Sandals in Walnut</name>
  <keywords>Teva Men Tanza Leather Sport Sandals in Walnut</keywords>
  <description>Following in the footsteps of our other sports sandals (no pun intended)  the Tanza Leather was built to perform. Featuring our Universal Strapping System with 3 points of adjustment  as well as Shoc Pad&amp;trade; technology  the Tanza Leather gives you a luxurious feel without sacrificing functionality.</description>
  <sku>1000183-WAL</sku>
  <manufacturer>Teva</manufacturer>
  <manufacturerid>1000183-WAL</manufacturerid>
  <currency>USD</currency>
  <saleprice>85.00</saleprice>
  <price>85.00</price>
  <retailprice>85.00</retailprice>
  <fromprice>Yes</fromprice>
  <buyurl>http://www.dpbolvw.net/click-6059025-10757671?url=http%3A%2F%2Fwww.teva.com%2Fwomens-tanza-leather-feminine-sports-sandals%2F737872627089%252Cdefault%252Cpd.html</buyurl>
  <impressionurl>http://www.awltovhc.com/image-6059025-10757671</impressionurl>
  <imageurl>http://www.teva.com/on/demandware.static/Sites-TEVA-US-Site/Sites-masterCatalogTeva/default/v1364225639089/images/large/T0183-WAL_1.jpg</imageurl>
  <advertisercategory>Men</advertisercategory>
  <promotionaltext>Fast, Free Shipping and Free Returns!</promotionaltext>
  <online>Yes</online>
  <instock>YES</instock>
  <condition>New</condition>
  <warranty>Teva has a 1 year warranty against defective materials and/or workmanship</warranty>
  <standardshippingcost>0.0</standardshippingcost>
</product> 
```

它如何显示我想要的记录的全部内容是这样的，所以我可以根据我的需要进行格式化。元价格描述中的关键字和由购买网址链接的照片，例如`<a href="$buyurl"><img src="$image_url"></a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:21:29.020

使用 simplexml 的解决方案：

```
$xml = simplexml_load_file('file.xml');

list($product) = $xml->xpath("//product[sku = '1000183-WAL']");

echo "<a href=\"{$product->imageurl}\"><img src=\"{$product->imageurl}\" /></a>"; 
```

# javascript - JavaScript 开发人员不使用 Array.push() 是否有原因？

> ID：15649899
> 
> 赞同：42
> 
> 时间：2013-03-27T00:24:45.867
> 
> 标签：javascript

我经常看到开发人员在 JavaScript 中使用如下表达式：

```
arr = []
arr[arr.length] = "Something"
arr[arr.length] = "Another thing" 
```

不是`push`更合适吗？

```
arr = []
arr.push("Something")
arr.push("Another thing") 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-27T00:47:42.153

今年年初，我实际上问过自己同样的问题。*更新了新的测试用例* [http://jsperf.com/array-push-vs-unshift-vs-direct-assignment/2](http://jsperf.com/array-push-vs-unshift-vs-direct-assignment/2)

看起来它`push`在 chrome 中要快得多，在 FF 中几乎相等。在 IE9 中直接也更快，但我很想看看它在 IE10 中的表现如何。

我想说大多数开发人员会假设设置数组的长度，然后使用直接赋值更快，就像大多数编程语言一样。但是 JavaScript 不同。[Javascript 数组并不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)，它们只是键/值映射，就像所有其他 JavaScript 对象一样。所以预分配基本上是置若罔闻。

我个人更喜欢`push`（：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T01:15:35.383

我相信这主要是习惯。

一些开发人员使用它只是因为这是他们习惯使用的方式，并且没有考虑过`push`这是一种替代方法。

一些开发人员曾经了解到一种方法比另一种方法要快得多，并且鉴于 Javascript 引擎最近的性能改进而没有对此进行审查。

我个人`push`经常使用。大多数时候，可读性和可维护性比性能更重要，至少在性能影响足够小的时候是这样。此处答案中发布的性能测试表明，各种方法之间的性能差异不是很大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T01:44:32.427

这是一种限制嵌套括号的方法。如果您有足够的数量，您将看不到有多少或需要多少（稍后查看代码时）。我会使用一个var，一个人应该只需要计算一次。

```
bar = foo.length;
foo[ bar++ ] = "new item 0";
foo[ bar++ ] = "new item 1";
foo[ bar++ ] = "new item 2";
foo[ bar++ ] = "new item 3"; 
```

[http://jsfiddle.net/vEUU3/](http://jsfiddle.net/vEUU3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-13T23:49:40.807

我认为这与性能无关，或者至少没什么大不了的……这里真正重要的是**声明性**方式与**命令性**方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-31T17:40:12.417

很多时候，当我将一个对象推入一个数组时，我希望将对该对象的引用返回给我。例如：

```
// Returns object
function createAndAdd(arr) {
  return arr[arr.length] = { id: 1 };
} 
var obj = createAndAdd(arr); 
```

现在我有了新对象*并将*其添加到数组中。如果我使用 push，那么我将返回数组的长度。它如下所示：

```
function createAndAdd(arr) {
  var obj = { id: 1 };
  arr.push(obj);
  return obj;
} 
```

甚至更丑，尤其是当物体变大时：

```
function createAndAdd(arr) {
  return arr[arr.push({ id: 1 }) -1];
} 
```

就个人而言，我喜欢带有立即返回语句的函数。保持简单易看。喜欢这个问题。谢谢你问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-19T21:23:11.503

Array.prototype.push 方法返回更新后的数组的长度，而直接声明返回正在分配的值。这是我看到的唯一区别，但我通常会阅读一些关于 push 方法的最佳实践建议，它是为数组分配新值的更好方法。

# c - 段错误 - fclose / fopen

> ID：15649900
> 
> 赞同：0
> 
> 时间：2013-03-27T00:24:55.953
> 
> 标签：c, segmentation-fault, fopen, fclose

我的以下 C 代码有问题：

```
int main(void){

    FILE* infile = fopen("file","r);
    FILE* fp = NULL;

    unsigned char* buffer = malloc(512);

    while( fread(buffer,512,1,infile) > 0 ){ //reading a file block by block

           if(buffer[0] == 0xff){
               ... //defining variable "name"
               if(fp != NULL)fclose(fp);
               fp = fopen(name,"w+");
               fwrite(buffer,512,1,fp);
           } else if(fp != NULL) {
                   fwrite(buffer,512,1,fp);
           }

    }

} 
```

似乎我无法在 fclose 之后使用相同的指针打开 fopen，为什么？我需要我的指针在主要的任何地方都可以访问，所以我不能在我的时间里声明一个新的。

**编辑：天哪，问题解决了。我可能是超级累了。我正在编译错误的文件。反正...**

**谢谢各位！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:40:33.197

很难说出原因，因为您没有向我们展示您的所有代码。但是，重新打开文件应该非常简单：

```
#include <stdio.h>

int main(void)
{
  FILE* fp = NULL;
  char name[] = "somefile";

  for (;;)
  {
    // do something
    if ((fp = fopen(name, "w+")) == NULL)
      break;
    // do something with the file
    fclose(fp);
    // do something
  }

  return 0;
} 
```

# entity-framework - 使用实体框架跨多个列获取最佳日期

> ID：15649902
> 
> 赞同：1
> 
> 时间：2013-03-27T00:25:21.407
> 
> 标签：entity-framework

我有三个实体：组、活动和评论。每个实体在数据库中都表示为一个表。一个组有很多活动，一个活动有很多评论。每个实体都有一个 CreatedDate 字段。我需要查询所有组+在该组的对象图上创建的最新实体的 CreatedDate。

我已经构建了一个 sql 查询，它可以满足我的需求，但我不确定如何在实体框架中执行此操作。特别是这一行：`(SELECT MAX(X) FROM (VALUES (g.CreatedDate), (a.CreatedDate), (c.CreatedDate))`提前感谢您的帮助。这是完整的查询：

```
WITH GroupWithLastActivityDate AS (
    SELECT DISTINCT  
        g.Id
        ,g.GroupName
        ,g.GroupDescription
        ,g.CreatedDate              
        ,g.ApartmentComplexId
        ,(SELECT MAX(X)
            FROM (VALUES (g.CreatedDate), (a.CreatedDate), (c.CreatedDate)) AS AllDates(X)) AS LastActivityDate
    FROM Groups g
    LEFT OUTER JOIN Activities a
        on g.Id = a.GroupId
    LEFT OUTER JOIN Comments c
        on a.Id = c.ActivityId  
    WHERE g.IsActive = 1
)
SELECT 
    GroupId = g.Id
    ,g.GroupName
    ,g.GroupDescription             
    ,g.ApartmentComplexId
    ,NumberOfActivities = COUNT(DISTINCT a.Id)
    ,g.CreatedDate      
    ,LastActivityDate = Max(g.LastActivityDate)     
FROM GroupWithLastActivityDate g
INNER JOIN Activities a
    on g.Id = a.GroupId
WHERE a.IsActive = 1
GROUP BY  g.Id
        ,g.GroupName
        ,g.GroupDescription
        ,g.CreatedDate
        ,g.ApartmentComplexId 
```

我应该补充一点，现在我已经用这个查询（加上其他一些东西）构建了一个视图，我正在用一个 SqlQuery 进行查询。

# php - 来自子查询的 Doctrine2

> ID：15649909
> 
> 赞同：1
> 
> 时间：2013-03-27T00:25:47.987
> 
> 标签：php, doctrine-orm

我需要将以下代码转换为教义，但似乎找不到正确的 Doctrine2 函数。

```
Select 
ProductName,
WeekNumber,
sum(sale)
from
(
    SELECT 
    ProductName,
    DATEDIFF(week, '2011-05-30', date) AS WeekNumber,
    sale
    FROM table
)
GROUP BY
ProductName,
WeekNumber 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:18:43.990

Doctrine 2 ORM 不支持`FROM`子句中的子查询。子查询唯一允许的位置是`WHERE`和`HAVING`子句，它们受到各种 RDBMS 供应商的支持。

请检查DQL的完整[EBNF](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#ebnf)

# javascript - 为什么这个 JS 不能在 IE 中正确执行？

> ID：15649910
> 
> 赞同：1
> 
> 时间：2013-03-27T00:26:02.380
> 
> 标签：javascript, internet-explorer, runtime-error

这适用于除 IE 之外的*所有*浏览器。我已经审查了我*知道*IE 可以正确读取的代码，所以你不会不知所措。**为什么IE说我的函数不存在？**

**错误：**

```
SCRIPT5009: 'switchStyles' is undefined 
test.php, line 180 character 21 
```

**HTML：**

```
025:    <SCRIPT TYPE="text/javascript" SRC="/_js/styleSwitch2.js"><!-- Style Switching Scripts --></SCRIPT>
...
180:    <SELECT ONCHANGE="return switchStyles(this);">
181:        <OPTION VALUE="/_css/default.css">Select a style!</OPTION>
182:        <OPTGROUP LABEL="Skin Group 1">
183:            <OPTION VALUE="/_css/alt1-1.css">Alt 1.1</OPTION>
184:            <OPTION VALUE="/_css/alt1-2.css">Alt 1.2</OPTION>
185:            <OPTION VALUE="/_css/alt1-3.css">Alt 1.3</OPTION>
186:        </OPTGROUP>
187:        <OPTGROUP LABEL="Skin Group 1">
188:            <OPTION VALUE="/_css/alt2-1.css">Alt 2.1</OPTION>
189:            <OPTION VALUE="/_css/alt2-2.css">Alt 2.2</OPTION>
190:        </OPTGROUP>
191:    </SELECT> 
```

**JS：**

```
var sheetElement = document.getElementById("_switchSheet");
var backupSheetElement = document.getElementById("_switchSheetBackup");

sheetElement.disabled = false;
if (backupSheetElement)
    backupSheetElement.disabled = false;
else
    //warn

var useCookies = true;
const COOKIE_NAME = "cookiename";

function switchStyles(selectElement)
{
    if (sheetElement == null && (sheetElement = document.getElementById("_switchSheet")) == null)
        //fail
    switchStyleTo(selectElement.value);
}

function switchStyleTo(newSheet)
{
    sheetElement.href = (newSheet == backupSheetElement.href) ? null : newSheet;

    setCookie(newSheet);
}

function setUseCookies(shouldUseCookies)
{
    useCookies = shouldUseCookies;
}

function setCookie(cookieContent)
{
    //works
}

function getCookie()
{
    //works
}

function setStyleFromCookie()
{
    var cookie = getCookie();
    if (cookie.length > 0)
        switchStyleTo(cookie);
    else
        //fail
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T00:32:55.190

因为这一行是 IE 中的错误，导致其余代码无法运行。

```
const COOKIE_NAME = "cookiename"; 
```

更改`const`为`var`.

或者：

```
try {
    const COOKIE_NAME = "cookiename"; 
} catch (e) {
    var COOKIE_NAME = "cookiename";
} 
```

# c++ - Eclipse CDT 中的“开放式实现”

> ID：15649912
> 
> 赞同：7
> 
> 时间：2013-03-27T00:26:22.460
> 
> 标签：c++, eclipse, eclipse-cdt

在 Eclipse CDT (Juno) 中，如何快速导航到函数/方法声明的实现？

键盘快捷键允许我从`ctrl-click`实现（在`.cxx`文件中）导航到声明（`.h`文件）。我想要相反的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:46:08.057

I`F3`当文本在函数上时使用，这在声明和实现之间交替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T18:29:03.320

头`ctrl-click`文件中的 将您移动到源（实现）文件，反之亦然。

PS 我在 Juno SR1 上测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-25T15:01:51.157

或者，可以使用上下文菜单项（给定突出显示的方法/功能）从声明（ `.h`）跳转到定义（`.cpp`）并向后跳转。`Toggle Source/Header`

这也帮助我修复了初始`F3`和`Ctrl`+ click 的不正确行为，该行为仅对方法声明进行压力转发并且是唯一的。

# cordova - phonegap 应用程序电话链接使用标签打开 InAppBrowser

> ID：15649914
> 
> 赞同：2
> 
> 时间：2013-03-27T00:26:30.557
> 
> 标签：cordova, inappbrowser

我正在使用 jquery mobile 1.2 和 cordova 2.4 开发一个混合应用程序。有许多静态页面都有这样的电话链接：

```
 <a href="tel:0312345678"> 03 1234 5678</a> 
```

单击这些类型的链接会导致打开 InAppBrowser 的 Web 视图的默认行为，该视图位于顶部但在应用程序内部。它被视为普通网址。

有什么办法可以避免这种情况，只打开正常的呼叫提示对话框，而不是应用程序内的网络浏览器？我似乎找不到任何解决方案。

任何帮助将非常感激。

# sql - SQL 查询 - mod 函数 - 如何使用它对结果进行分组？

> ID：15649915
> 
> 赞同：4
> 
> 时间：2013-03-27T00:26:46.290
> 
> 标签：sql

如果这是一个简单的问题，我很抱歉询问如此抱歉。请注意，此问题与 Microsoft Query 有关，因为我将结果拉到报告中。

我目前有一个包含许多列的表，其中一列是 1 到 6 之间的整数值。我正在尝试根据列中的值是偶数还是奇数对这一列进行分组，但我不确定鉴于我的知识，如何实现这一点（关于我为什么想要这个的一些背景知识：我使用的表与时间表条目相关，我指的是具有奇数的白班值和偶数的夜班值）。如果有人可以提供帮助，那就太好了。目前，我有以下代码：

```
SELECT 
   PRTH.PostDate, HRRM.LastName, HRRM.FirstName, 
   Sum(PRTH.Hours) AS 'Sum of Hours', 
   (PRTH.Shift Mod 2) As 'Night Shift'
FROM 
   Viewpoint.dbo.HRRM HRRM, Viewpoint.dbo.PRTH PRTH
WHERE 
   PRTH.Employee = HRRM.PREmp AND PRTH.JCCo = HRRM.PRCo
GROUP BY 
   PRTH.PostDate, HRRM.LastName, HRRM.FirstName, Night Shift 
```

这是`Mod`我遇到问题的功能，因为我不确定如何定义它，以及如何在按功能分组中使用它。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:38:46.600

听起来这就是你要找的东西——使用 % 运算符来执行 Mod：

```
select a % 2, sum(b)
from yourtable
group by a % 2 
```

[精简的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/85dab/2)

要将其应用于您的查询，请尝试以下操作：

```
SELECT PRTH.PostDate, HRRM.LastName, HRRM.FirstName, 
    Sum(PRTH.Hours) AS 'Sum of Hours', (PRTH.Shift % 2) As 'Night Shift'
FROM Viewpoint.dbo.HRRM HRRM
    INNER JOIN Viewpoint.dbo.PRTH PRTH
        ON PRTH.Employee = HRRM.PREmp AND PRTH.JCCo = HRRM.PRCo
GROUP BY PRTH.PostDate, HRRM.LastName, HRRM.FirstName, PRTH.Shift % 2 
```

`INNER JOIN`另请注意，我用语法替换了您的联接——这是更可取的。有关更多信息，请参阅此帖子 ( [https://stackoverflow.com/a/1018825/1073631](https://stackoverflow.com/a/1018825/1073631) )

# objective-c - NSString isEqualToString 不会返回 true，并且选择器无法识别

> ID：15649919
> 
> 赞同：2
> 
> 时间：2013-03-27T00:27:03.380
> 
> 标签：objective-c, xcode, macos, cocoa, nsstring

我有一个字符串`dummyString`需要与 100 进行比较。这是我的代码

```
 dummyString = [prefs objectForKey:@"displaySize"];
[self setDisplaySize:dummyString];
NSLog(@"Getting ready to set display controller with value %@", dummyString);

NSLog(@"Tried 1");
if ([dummyString isEqual: @"5"]) {
    NSLog(@"Loaded preferences, display Small");
    displayChanged.selectedSegment = 0;}

NSLog(@"Tried 2");
if ([dummyString isEqual: @"40"]){
    NSLog(@"Loaded preferences, display is Med!");
        displayChanged.selectedSegment = 1;}

NSLog(@"Tried 3");
if ([dummyString isEqualToString:@"100"]){
    NSLog(@"Loaded preferences, display LARGE");
    displayChanged.selectedSegment = 2;}

NSLog(@"Completed trying to get display controller with value %@", dummyString); 
```

这是 NSLog

```
2013-03-26 17:22:49.101 CopyBot[1011:303] Getting ready to set display controller with value 100
 2013-03-26 17:22:49.102 CopyBot[1011:303] Tried 1
 2013-03-26 17:22:49.102 CopyBot[1011:303] Tried 2
 2013-03-26 17:22:49.102 CopyBot[1011:303] Tried 3
 2013-03-26 17:22:49.103 CopyBot[1011:303] -[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 0x64c7
 2013-03-26 17:22:49.103 CopyBot[1011:303] -[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 0x64c7 
```

我尝试了几种声明不同字符串的变体，但似乎永远无法让它进入'if'语句以进行isEqual或isEqualToString的任何比较。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:30:20.863

正如您在错误消息中看到的那样`[__NSCFNumber isEqualToString:]: unrecognized selector...`，问题在于`__NSCFNumber`没有`isEqualToString`方法。

`__NSCFNumber`是 Cocoa`NSNumber`在运行时代表大多数 s 的方式。

所以你的问题是 dummyString 根本不是一个字符串，它是一个`NSNumber`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T00:39:09.243

根据您的错误，您确实`dummyString`不是。`NSString``NSNumber`

您可以将您的字符串转换`@"5"`为`NSNumber`然后比较：

```
BOOL equal=[dummyString isEqualToNumber:@([@"5" integerValue])]; 
```

或者。将 dummystring 值转换为字符串，然后进行比较：

```
BOOL equal=[NSString stringWithFormat:@"%d",[dummyString integerValue]] isEqualToString:@"5"]; 
```

# c++ - 访问另一个程序的值

> ID：15649926
> 
> 赞同：2
> 
> 时间：2013-03-27T00:27:36.667
> 
> 标签：c++, windows, reverse-engineering

所以，我一直想知道如何使用我的 c++ 代码访问不同程序的值。

我知道我必须知道内存位置并以某种方式访问​​它，但我真的不知道如何。

假设我有一个游戏，其中我的角色有一定的生命值，我想用我的 c++ 代码读取该生命值（类似于使用作弊引擎程序读取不同值的方式）。

我将如何做到这一点？

为清楚起见：操作系统是 windows

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T00:35:55.773

您可以使用[ReadProcessMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx) / [VirtualQuery](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366902%28v=vs.85%29.aspx)（比 ReadProcessMemory 更安全）和[WriteProcessMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681674%28v=vs.85%29.aspx) 函数。

如果你很聪明，你可以注入一个 DLL，然后你可以在你的代码中使用指针

```
int * money = 0x00400000+0x00ABCDEF;//pointer to money address
*money = 5000;//set money to 5000. 
```

如果您需要 DLL 示例，这里有一些：

[红色警戒 3 玩家信息模组](https://gpb.googlecode.com/files/RA3INFOMOD.zip)

[极品飞车：地下2作弊模式](https://gpb.googlecode.com/files/NFSMOD.0.4.9.zip)

有时指针可以改变它们指向的东西，这在应用程序方面可能是“危险的”。

当您访问指向受保护内存区域、不可访问内存、而不是您想要的东西或无效位置的指针时，您的应用程序可能会崩溃。我不知道作弊引擎如何防止它，但你有几个选择，我建议的那些：

*   优雅地退出应用程序并让用户知道你无法处理它
*   用 try / catch 块来处理问题？（一定要捕获正确的错误）
*   硬退出应用程序
*   什么都不做，让应用程序行为怪异/崩溃
*   ... 越来越多

我还自己编写了指针类，它处理解引用并在遇到错误时停止（返回 null）

```
//null as last parameter automaticly "Dereferences"
template<class T = DWORD, class S = DWORD> struct Pointer
{
private:
    std::vector<S> params;
    S variable;
    bool MoreThanOne;
public:
    //null as last parameter automaticly "Dereferences"
    template<class... Args> 
    Pointer(Args... args) 
    {  
        std::array<S, sizeof...(args)> list = {args...};
        for( auto i : list)
            params.push_back(i);
        if(params.size() > 1)
            MoreThanOne = true;
        else
            MoreThanOne = false;
    }
    T ResolvePointer() 
    {  
        variable = params[0];
        if(!MoreThanOne)
            return (T)variable;
        try
        {
            auto it = params.begin();
            ++it;  
            for(; it != params.end(); ++it)
            {
                if(*reinterpret_cast<S*>(variable) == NULL)
                    return static_cast<T>(NULL);
                variable = *reinterpret_cast<S*>(variable) + *it;
            }
        }
        catch(...)
        {   
            return static_cast<T>(NULL);
        }
        return (T)variable;
    }
    T operator()()
    {
        return ResolvePointer();
    }
}; 
```

用法：

```
unsigned long ipaddr = htonl(Pointer<unsigned long>(0x00400000+0x008E3A74,0x04,0x38,NULL)());//pointer to players IP address
if(ipaddr != NULL)//.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:30:11.593

[如果不使用特定的IPC](http://en.wikipedia.org/wiki/Inter-process_communication)机制，则不应写入另一个进程的内存空间。操作系统通常会出于明显的原因阻止这种情况。相反，您需要使用目标应用程序的扩展机制，或反编译/修改/十六进制编辑来实现您想要的更改。话虽如此，这样做可能违反了您正在使用的软件的服务条款。

需要明确的是，代码可以很好地编译，让您可以设置一个指向您想要的任意地址的指针，但是一旦您尝试读取或写入该地址，操作系统就会介入并导致错误情况。

如果您这样做并没有违反软件的[EULA](http://en.wikipedia.org/wiki/End-user_license_agreement)，那么这里有一些提示可以帮助您查找您可能想要修改的内容：

*   如果代码可以被反编译成一些可读的源代码形式，那么就这样做并在那里进行修改。
*   使用十六进制编辑器编辑编译后的二进制文件，查找明确定义的值并更改它们（max_health 是否总是从 25 开始？这可能足够独特，可以定位和修改）。关于这一点的注意事项：确保您打算插入的值与原始值在同一空间中，否则您将破坏事物并产生未定义的结果。
*   应用程序是否提供扩展机制，例如脚本 API 或 mod 支持？如果是这样，这可能是导致您想要的系统更改类型的向量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:37:59.363

您不能在另一个进程中访问变量，除非：

1.  您的程序使用“调试函数”来访问这些值。
2.  您使用某种 IPC（共享内存、管道、消息队列）来共享/传输数据。

每个进程都有自己的地址空间[1]，如果没有某种机制来访问它，就无法访​​问另一个进程的地址空间。

[1] 假设我们谈论的是使用适当内存管理的“真实”操作系统。在某些操作系统（例如传统 DOS）中，进程之间没有内存保护。但是，除非系统运行在非常微弱的处理器和少量内存下，否则没有理智的人可以使用这些操作系统。

# php - 未从阵列会话中删除的项目

> ID：15649927
> 
> 赞同：0
> 
> 时间：2013-03-27T00:27:46.913
> 
> 标签：php, session

我有一个简单的 PHP 代码，应该从数组中删除给定的键（$item - 并传递）。会话在那里，项目也在那里，但每次尝试整个会话都会被清除。

```
$_SESSION['myFavorites'] = array();

if (in_array("$item", $_SESSION['myFavorites'])) { 
    unset($_SESSION['myFavorites'][$item]); 
} 
```

任何帮助都可能让我重新理清思路。希望有人能告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:31:32.950

```
$_SESSION['myFavorites'] = array();

if (array_key_exists($item, $_SESSION['myFavorites'])) { 
    unset($_SESSION['myFavorites'][$item]); 
} 
```

# jquery - 如何将 jQuery.when() 与多个 jsonp 请求一起使用？

> ID：15649933
> 
> 赞同：0
> 
> 时间：2013-03-27T00:28:22.153
> 
> 标签：jquery, jsonp, when-js

我有 2 个跨域 jsonp 请求需要先完成，然后才能执行另一种方法。所以我尝试了 $.when() 函数

```
$.when(getX(), getY()).then(createXY); 
```

getX() 和 getY() 使用单独的 jsonp 回调向两个不同的域发出 $.ajax() 请求。

与我最初的想法相反，createXY() 在回调返回之前被调用。createXY() 因此没有它需要的数据。

有人可以为我提供一个在完成多个异步 jsonp 请求时调用函数的示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:53:00.500

代码中的非常愚蠢的错误。getX() 和 getY() 调用 $.ajax() 但从不返回它。用 return 包装 $.ajax() 调用，代码现在工作正常。感谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:39:50.497

为了`$.when()`工作，它必须传递一个它正在等待的延迟对象。确保您的`getX()`和`getY()`函数返回由每个生成的 jQuery ajax 调用创建的延迟对象。

如果您需要帮助，请发布`getX()`and的代码`getY()`。

[这是来自jQuery 文档`$.when()`](http://api.jquery.com/jQuery.when/)的示例：

```
$.when($.ajax("/page1.php"), $.ajax("/page2.php")).done(function(a1,  a2){
  /* a1 and a2 are arguments resolved for the
      page1 and page2 ajax requests, respectively */
  var jqXHR = a1[2]; /* arguments are [ "success", statusText, jqXHR ] */
  if ( /Whip It/.test(jqXHR.responseText) ) {
    alert("First page has 'Whip It' somewhere.");
  }
}); 
```

# awk - 使用 linux 命令行根据分隔符拆分文本文件

> ID：15649936
> 
> 赞同：4
> 
> 时间：2013-03-27T00:28:58.823
> 
> 标签：awk

我有一个包含以下文本行的文件：

```
jeremy , thomas , 123 
peter , paul , 456 
jack , jill , 789 
```

我想删除除中心项目之外的所有数据。例如，以包含以下内容的文件结尾：

```
thomas
paul
jill 
```

我已经尝试了很多 awk 模式，我的大脑正在爆炸。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T00:34:36.087

尝试`awk`：

```
awk -F '[[:space:]]*,[[:space:]]*' '{print $2}' input.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:33:01.663

尝试这个

```
cat <filepath> | tr -d ' ' | cut -d',' -f2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:38:42.657

grep 环顾四周：

```
grep -Po '(?<=, ).*(?= ,)' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T09:20:57.693

尝试这个：

```
$ cat (your file)| cut -d ',' -f2 > (new file) 
```

例如：

```
$ cat /home/file1.txt | cut -d ',' -f2 > /home/file2.txt 
```

# django - 带有计数过滤器的 Django 查询集

> ID：15649941
> 
> 赞同：3
> 
> 时间：2013-03-27T00:29:53.253
> 
> 标签：django, filter, count

我已经完成了整个 Django 教程，但我不知道如何让网站只显示选项计数大于 0 的投票。我知道 Poll.objects.get(pk=1).choice_set.count()将返回我拥有的选择数量。所以我尝试了过滤器 Poll.objects.filter(choice_set.count()>0) 并没有用。有人能帮助我吗？谢谢

这是我的实际查询集。

```
queryset=Poll.objects.filter(pub_date__lte=timezone.now).order_by('-pub_date')[:5] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:21:19.873

```
queryset=Poll.objects.annotate(count=Count('choice')).filter(
    pub_date__lte=timezone.now, count__gt=0).order_by('-pub_date')[:5] 
```

# python - 如何将纳秒的纪元时间转换为人类可读的？

> ID：15649942
> 
> 赞同：21
> 
> 时间：2013-03-27T00:29:59.720
> 
> 标签：python, time, epoch, nanotime

我有一个以纳秒为单位的纪元时间戳 - 例如自 1970 年 1 月 1`1360287003083988472`日以来的纳秒。

Python 日期时间对象和转换方法仅支持毫秒精度。

有没有一种简单的方法可以将此纪元时间转换为人类可读的时间？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-27T00:39:43.570

首先，将其转换为[`datetime`](http://docs.python.org/2/library/datetime.html#datetime.datetime)具有第二精度的对象（地板，而不是四舍五入）：

```
>>> from datetime import datetime
>>> dt = datetime.fromtimestamp(1360287003083988472 // 1000000000)
>>> dt
datetime.datetime(2013, 2, 7, 17, 30, 3) 
```

然后为了使其易于阅读，请[`strftime()`](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)在您返回的对象上使用该方法：

```
>>> s = dt.strftime('%Y-%m-%d %H:%M:%S')
>>> s
'2013-02-07 17:30:03' 
```

最后，加上纳秒精度：

```
>>> s += '.' + str(int(1360287003083988472 % 1000000000)).zfill(9)
>>> s
'2013-02-07 17:30:03.083988472' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T00:48:51.007

实际上，Python 的`datetime`方法处理的是*微秒*精度，而不是*毫秒*：

```
>>> nanos = 1360287003083988472
>>> secs = nanos / 1e9
>>> dt = datetime.datetime.fromtimestamp(secs)
>>> dt.strftime('%Y-%m-%dT%H:%M:%S.%f')
'2013-02-07T17:30:03.083988' 
```

但是，如果您确实*需要*纳秒，那仍然无济于事。最好的办法是编写自己的包装器：

```
def format_my_nanos(nanos):
    dt = datetime.datetime.fromtimestamp(nanos / 1e9)
    return '{}{:03.0f}'.format(dt.strftime('%Y-%m-%dT%H:%M:%S.%f'), nanos % 1e3) 
```

这给了我：

```
'2013-02-07T17:30:03.083988472' 
```

当然，即使 Python 根本没有达到亚秒级精度，你也可以做同样的事情……</p>

```
def format_my_nanos(nanos):
    dt = datetime.datetime.fromtimestamp(nanos / 1e9)
    return '{}.{:09.0f}'.format(dt.strftime('%Y-%m-%dT%H:%M:%S'), nanos % 1e9) 
```

# asp.net - 无法在不同应用程序池中的应用程序之间共享隔离存储文件

> ID：15649947
> 
> 赞同：2
> 
> 时间：2013-03-27T00:30:21.087
> 
> 标签：asp.net, iis-7.5, isolatedstorage

我在默认网站下的 IIS 中有各种 Web 应用程序（包含 WCF 服务）。只要它们都在同一个应用程序池中运行，它们就可以访问共享的隔离存储文件没有问题。

但是，一旦我将它们移动到不同的应用程序池，当一个人尝试访问另一个人创建的文件时，我会得到“System.IO.IsolatedStorage.IsolatedStorageException: Unable to create mutex”。它们都在 NetworkService 用户下运行。我尝试了 GetUserStoreForAssembly 和 GetMachineStoreForAssembly，结果都一样。任何想法为什么他们不能使用共享文件？

我确保关闭流，甚至在有人持有它的情况下处理它，但我正在运行一个简单的测试，其中一个服务写入它，然后另一个服务稍后尝试从中读取，它总是失败。

此外，我正在从已签名的程序集中访问隔离商店。

有人有什么想法吗？

这是代码：

```
Private Sub LoadData()
    Dim filename = FullFilePath(_fileName)

    Dim isoStorage As IsolatedStorageFile = IsolatedStorageFile.GetUserStoreForAssembly()
    ' Tried GetMachineStoreForAssembly, same failure
    isoStorage.CreateDirectory(ROOT_DIRECTORY)

    If (isoStorage.GetFileNames(filename).Length = 0) Then
        Return
    End If

    Dim stream As Stream = New IsolatedStorageFileStream(filename, FileMode.OpenOrCreate, isoStorage)
    If stream IsNot Nothing Then
        Try

            Dim formatter As IFormatter = New BinaryFormatter()
            Dim appData As Hashtable = DirectCast(formatter.Deserialize(stream), Hashtable)

            Dim enumerator As IDictionaryEnumerator = appData.GetEnumerator()
            While enumerator.MoveNext()
                Me(enumerator.Key) = enumerator.Value
            End While
        Finally
            stream.Close()
            stream.Dispose()
            stream = Nothing
        End Try
    End If

End Sub

Public Sub Save()
    Dim filename = FullFilePath(_fileName)

    ' Open the stream from the IsolatedStorage.
    Dim isoFile As IsolatedStorageFile = IsolatedStorageFile.GetUserStoreForAssembly()
    ' Tried GetMachineStoreForAssembly, same failure
    Dim stream As Stream = New IsolatedStorageFileStream(filename, FileMode.Create, isoFile)
    If stream IsNot Nothing Then
        Try
            Dim formatter As IFormatter = New BinaryFormatter()
            formatter.Serialize(stream, DirectCast(Me, Hashtable))
        Finally
            stream.Close()
            stream.Dispose()
            stream = Nothing
        End Try
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:51:47.567

看起来这是一个信任问题。

在将访问隔离存储文件的程序集添加到 gac 后，它神奇地工作，因为 gac 中的所有内容都自动设置了完全信任。

这对我有用，但对于其他解决方案，它可能并不总是一种选择。如果是这种情况，请查看 .NET Framework caspol 实用程序。

希望这对某人有帮助！这对我来说是一个巨大的皮塔。

# ios - 通过 DismissViewController 将操作传递给视图

> ID：15649954
> 
> 赞同：0
> 
> 时间：2013-03-27T00:31:32.057
> 
> 标签：ios, uiviewcontroller, ibaction

**视图控制器**

*   UIWebView: `webView`- 一个简单的 UIWebView
*   UIButton: `aboutButton`- 带你到 AboutViewController

**关于ViewController**

*   UIButton: `websiteButton`- 连接到`clickWebsiteButton`
*   IBAction: `clickWebsiteButton`- 关闭 AboutViewController，加载（`http://websiteURL.com/`在`webView`ViewController 中）

**关于ViewController 代码**

```
// AboutViewController.h

#import "ViewController.h"

@class ViewController;

@interface AboutViewController : UITableViewController <UIWebViewDelegate> {
    ViewController *viewController;
}

// AboutViewController.m

-(IBAction)clickWebsiteButton:(id)sender {
    [viewController.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://websiteURL.com/"]]];
    [self dismissModalViewControllerAnimated:YES];
} 
```

**问题**

我希望能够`http://websiteURL.com/`在通过 IBAction 关闭视图后在 UIWebView 中加载。到目前为止，它所做的只是关闭视图，而不是在 WebView 中加载 URL。WebView 正在工作并正确加载 URL，我只是在从其他视图加载此 URL 时遇到了麻烦。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:49:30.567

我回答了您关于持久数据存储[的其他问题。](https://stackoverflow.com/questions/15643811/passing-nsstrings-between-views-before-viewdidload/15644448#15644448)这是让您的 viewControllers 共享数据的另一种方式，因此您可能不再需要它，但以防万一......

问题是您在关闭呈现的 viewController (aboutViewController) 之前在呈现的 viewController 上调用了一个方法。它需要在关闭过程完成后调用。

这种方法：

```
dismissModalViewControllerAnimated: 
```

在 iOS6 中已弃用，从 iOS5 开始鼓励您改用它

```
dismissViewControllerAnimated:completion: 
```

where`completion`接受一个块参数。您放置在完成块中的代码将在关闭完成后执行。您可以在此处向呈现的 viewController 发送消息。

`self.presentingViewController`是对呈现 aboutViewController 的 viewController 的引用 - 它由 iOS 作为呈现过程的一部分提供。但是你不能在完成块中使用它，因为它在解除过程中被清空，所以你需要先将它复制到一个局部变量中。

在 aboutViewController...

```
-(IBAction)clickWebsiteButton:(id)sender 
{
        //to use self.presentingViewController in the completion block
        //you must first copy it to a local variable 
        //as it is cleared by the dismissing process 

    UIViewController* presentingVC = self.presentingViewController;

    [self.presentingViewController dismissViewControllerAnimated:YES
                                     completion:
     ^{
         if ([presentingVC respondsToSelector:@selector(loadRequestWithString:)]) {
             [presentingVC performSelector:@selector(loadRequestWithString:) 
                                withObject:@"http://websiteURL.com/"];
         }
     }];
} 
```

在您呈现的 viewController 中，创建一个接受字符串参数的方法：

```
- (void) loadRequestWithString:(NSString*)webString
{
    NSURL* requestURL = [NSURL URLWithString:webString];
    [self.webView loadRequest:[NSURLRequest requestWithURL:requestURL]];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:36:46.167

一种选择是使用委托回调。使用您当前的代码， viewController 瞬间为零。我有一个如何在[此处](https://stackoverflow.com/questions/8055052/call-a-parent-view-controller-through-a-navigationcontroller/8055480#8055480)实现委托模式的示例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-17T13:05:10.913

请记住，如果您使用的是 UINavigationController，则必须这样做

```
UINavigationController *viewConNav = (UINavigationController *)self.presentingViewController;
YourVC *viewCon = (YourVC *)viewConNav.topViewController; 
```

# javascript - 如何在表格单元格上使用 onmouseover 将字符串更改为预填充的文本区域？

> ID：15649963
> 
> 赞同：0
> 
> 时间：2013-03-27T00:32:06.713
> 
> 标签：javascript, html

全部，

我生成了一个名字和姓氏的动态表。我想集成一个`onmouseover`使文本可编辑的功能，以及`onmouseout`使文本再次“变硬”的功能。

我的问题是如何在文本“硬”且可编辑的情况下构建表格单元格？当文本“硬”时，将文本包含在`<p>`标签内是否是个好主意。将其替换`<td>`为可编辑的正确方法是？我应该把函数放在哪里？正如我现在所拥有的那样，当我一次带入指针时，浏览器会注册几个事件 - 为什么会这样？`<p>``<textarea>``onmouseover`

创建表的 PHP 代码`<tbody>`如下所示：

```
<?php
 $i=0;
 foreach ($nameArray as $name){
   echo "<tr>";
      echo "<td  id='first_".$i."' onmouseover='editOn(this)' onmouseout='editOff(this)'>
       <p>".$name[0]."</p>
     </td>";
     echo "<td  id='last_".$i."' onmouseover='editOn(this)' onmouseout='editOff(this)'>
       <p>".$name[0]."</p>
     </td>";
   echo "</tr>";
   $i++;
 }
?> 
```

# javascript - 提交表单时我想使用的其他分隔符（不是 & 和 =）

> ID：15649964
> 
> 赞同：0
> 
> 时间：2013-03-27T00:32:15.510
> 
> 标签：javascript, python, url, cherrypy, mako

我在 Cherrypy 中编写了服务器，我也使用 Mako 模板。

而且我有变量 dict（包含信息工作的变量 Mako）用于与用户一起工作（我必须使用 Mako 和 JAvascript）。

我有一个问题，我无法将值的 Mako 传递给 Javascript。

MAKO --->>> JAVASCRIPT 和viccersa 不能通过。

当用户想要更改信息时，我需要使用表单。例如，信息是识别人的数据。

当我连接服务器 localhost:8100 时，我在 Url 上自动输入了字典。

用户按下按钮的发送。（提交）以防发生变化。服务器接收 Javascript 中的值，Js 中的分隔符和 MAko 中的旧分隔符。我有读取和转换 Javascript 中的分隔符的问题。

可以在发送时或之前更改字符串的提交形式吗？

我想对提交的表单进行编程，因为我想使用另一个分隔符（不是 & 和 =）。

这个有可能？

现在我写一个例子：

```
www.theuser.com/?Name=IBM&surname=PC 
```

具有发送时可编程功能

```
www.thepc.com/?Name%24+IBM+%23%+Surname%24+PC 
```

重复：当我发送参数时，我不想要这个分隔符 & 或 =，我想使用其他分隔符。分隔器

```
 javascript              Mako           

      =                       %24+
      &                       +%23+ 
```

此查询字符串是我的项目的原始内容：

```
http://localhost:8100/index2?json_data=demo_title%24+Demo+title+%23+proc1_script%24+script.sh+parameters+%23+proc1_chk_make%24+on+%23+outputp2_value%24++%23+demo_input_description%24+hola+mundo+%23+outputp4_visible%24+on+%23+outputp4_info%24++%23+inputdata1_max_pixels%24+1024000+%23+tag%24++%23+outputp1_id%24+nanana+%23+proc1_src_compresion%24+zip+%23+proc1_chk_cmake%24+off+%23+outputp3_description%24++%23+outputp3_value%24++%23+inputdata1_description%24+input+data+description+%23+inputp2_description%24+bien%3F+%23+inputp3_description%24+funciona+%23+proc1_cmake%24+-D+CMAKE_BUILD_TYPE%3Astring%3DRelease++%23+outputp2_visible%24+on+%23+outputp3_visible%24+on+%23+outputp1_type%24+header+%23+inputp1_type%24+text+%23+demo_params_description%24+va+bien+%23+outputp1_description%24++%23+inputdata1_type%24+image2d+%23+proc1_chk_script%24+off+%23+demo_result_description%24+win%3F+%23+outputp2_id%24+nanfdsvfa+%23+inputp1_description%24+funciona+%23+demo_wait_description%24+boh+%23+outputp4_description%24++%23+inputp2_type%24+integer+%23+inputp2_id%24+papapa+%23+outputp1_value%24++%23+outputp3_id%24+nananartrtrt+%23+inputp3_id%24+pepepe+%23+outputp3_type%24+header+%23+inputp3_visible%24++off+%23+outputp1_visible%24+on+%23+inputdata1_id%24+id_lsd+%23+outputp4_value%24++%23+inputp2_visible%24+on+%23+proc1_source%24+lsd-1.5.zip+%23+inputp3_value%24+si+%23+proc1_make%24+-j4+-C++%23+images_config_file%24+cfgmydemo.cfg+%23+outputp2_type%24+header+%23+proc1_subdir%24+xxx-1.5+%23+proc1_url%24+http%3A%2F%2Fwww.ipol.im%2Fpub%2Falgo%2F...+%23+inputdata1_image_depth%24+1x8i+%23+inputp1_id%24+popopo+%23+inputp1_value%24+si+%23+inputp2_value%24+no+%23+demo_data_filename%24+data_saved.cfg+%23+inputdata1_info%24+info_lsd+%23+outputp3_info%24++%23+inputdata1_image_format%24+.pgm+%23+outputp1_info%24++%23+inputdata1_compress%24+False+%23+inputp1_visible%24+on+%23+proc1_id%24+lsd+%23+outputp4_id%24+nana+%23+outputp2_description%24++%23+outputp4_type%24+header+%23+outputp2_info%24++%23+inputp3_type%24+float+%23+&tag=&inputp4_id=hi&inputp4_type=text&inputp4_description=hello+program&inputp4_value=no&inputp4_info=bol&inputp4_visible=on 
```

对于主持人：我在帖子[https://stackoverflow.com/questions/13353539/how-to-change-how-the-url-is-encoded-when-a-form-is-submitted](https://stackoverflow.com/questions/13353539/how-to-change-how-the-url-is-encoded-when-a-form-is-submitted)上阅读了 但这不是对我感兴趣。

Ps Jquery 或 Javascript 中的解决方案对我来说是平等的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:12:41.607

好吧，我很确定您这样做的原因并不能证明这样做是合理的，但是要回答这个问题，这就是您更改令牌的方式。我假设 jQuery，它不是完全必要的，但会使代码更短。

HTML：

```
<form id="myform" action="myparser.php">
<input ...>
</form> 
```

JavaScript：

```
$('#myform').submit(function(e){
    e.preventDefault();
    var q=$(this).attr('action'),f=this.elements,i;
    for(i=0;i<f.length;++i){
        q+=(i===0?'?':'+%23%+')+f[i].name+'%24'+f[i].value;
    }
    document.location.href=q;
    return false;
}); 
```

这是略微缩小的，所以这里是要点。我们首先绑定到`submit`我们阻止的事件（`preventDefault`并且`return false`可以肯定），然后获取所有表单的元素（`this.elements`）并遍历它们。在循环结束时，`q`是一个我们想要提交的完整 URL（使用`action`属性并填写所有名称/值），所以我们只需将 HREF 设置为它，然后我们就走了。在这种情况下`myparser.php`。

请注意，*这不会进行任何字符替换*。你应该`f[i].value`以某种方式确保安全。从您的问题来看，您似乎不想要标准的 URL 编码，但您需要做一些事情来防止使用坏字符。

最后，这只是发送方。您仍然需要在服务器端做一些聪明的事情来实际*读取*这些值。

# binary-search-tree - 在二叉搜索树中找到第 K 个元素

> ID：15649967
> 
> 赞同：0
> 
> 时间：2013-03-27T00:32:22.263
> 
> 标签：binary-search-tree

我正在学习二叉搜索树。我想返回二叉搜索树的中序遍历的第 k 个元素。如何保持变量“计数”更新，或者一旦找到第 k 个元素并将其打印出来，是否有某种方法可以跳出循环？

```
public void kthElement(int n, int count, BinaryNode<AnyType> root){

    if( root.left !=null)
        this.kthElement(n, count, root.left);

    count++;
    if(count==n){
        System.out.println(root.element); 
        }

    else if(count!=n){
        return;}

    if( root.right != null)
        this.kthElement(n, count, root.right);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:41:19.857

我可以想到两种解决方案。

1.  为每个节点声明一个字段，说明它的右子树和左子树中有多少元素，从这里开始应该很容易继续。
2.  如果允许您使用额外的内存，请将元素复制到动态分配的排序数组（使用中序遍历）并返回第 k 个元素。

# javascript - 大型共享代码库，扩展功能

> ID：15649970
> 
> 赞同：2
> 
> 时间：2013-03-27T00:32:34.610
> 
> 标签：javascript, javascriptmvc, large-scale

我们的应用程序是一个大型的 Javascript 应用程序，使用 Javascript MVC 框架。我们通过 SVN:external 在所有站点中使用 MVC 应用程序文件夹，每个站点也有自己的文件。设置文件特定于站点。

我们要求系统能够为每个站点提供不同的功能。核心功能应该保持不变。我们需要扩展核心代码，同时为当前和新开发人员提供可维护的解决方案。

目前我们想到的方案有：

a：在核心中嵌入功能条件并通过设置文件打开/关闭功能

b：覆盖/继承现有控制器

c：在核心内实现一个具有无限钩子的模块化系统（插件），并通过 settings.json 配置加载/启用哪些插件

选项 a 存在难以长期维护的问题，并且相当 hacky。

选项 b 已经实现，但很难维护（好像我们有一个新功能，如果每个站点的文件被覆盖，我们必须编辑它

选项 c 是我们最近考虑尝试和解耦修复的解决方案（通过使用共享（插件）控制器并编辑特定于站点的设置文件。

最好知道是否有人对我们已经想到的任何选项有任何经验，以及是否有人知道另一个更合适的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:41:35.943

倾向于选项 C。

大规模应用程序将在很大程度上受益于遵循模块化模式。您可以保持代码松散解耦，以便将来更好地维护，同时也允许许多开发人员一次处理单个部分。并通过站点特定的设置文件加载您的核心模块和插件。

我建议您查看 Addy Osmani 关于大规模应用主题的文章：

*   [http://addyosmani.com/largescalejavascript/](http://addyosmani.com/largescalejavascript/)
*   [http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns)

Mediator、Facade、Pub/Sub 模式与模块化组件配合得非常好，再加上像[RequireJS](http://requirejs.org)这样的模块加载器，你就为大规模应用打下了良好的基础。我在工作中使用过它，发现它是保持一切井井有条且易于维护的绝佳方式。

# java - 如何使用 Java 中的套接字发送文件名和文件？

> ID：15649972
> 
> 赞同：0
> 
> 时间：2013-03-27T00:32:55.787
> 
> 标签：java, sockets, p2p

我有以下通过套接字传输文件的代码。如何发送文件名？

```
Socket socket = new Socket("localhost", port);//machine name, port number
File file = new File(fileName);
// Get the size of the file
long length = file.length();
if (length > Integer.MAX_VALUE) 
{
    System.out.println("File is too large.");
}
byte[] bytes = new byte[(int) length];
FileInputStream fis = new FileInputStream(file);
BufferedInputStream bis = new BufferedInputStream(fis);
BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream());

int count;

while ((count = bis.read(bytes)) > 0) 
{
    out.write(bytes, 0, count);
}

out.flush();
out.close();
fis.close();
bis.close();
socket.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T02:29:39.137

您可以为您的套接字发明自己的协议。如果您只需要文件名和数据，DataOutputStream.writeUTF 是最简单的：

```
BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream());
try (DataOutputStream d = new DataOutputStream(out)) {
    d.writeUTF(fileName);
    Files.copy(file.toPath(), d);
} 
```

对等方必须使用相同的协议，当然：

```
BufferedInputStream in = new BufferedInputStream(socket.getInputStream());
try (DataInputStream d = new DataInputStream(in)) {
    String fileName = d.readUTF();
    Files.copy(d, Paths.get(fileName));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T00:41:29.957

使用一个永远不会出现在文件名中的字符 - 例如空值（`0x00`, `\0`，无论你想怎么称呼它）。然后发送一个 64 位整数，指示文件的长度（以字节为单位）（确保您不会遇到缓冲区溢出、小端/大端问题等......只需测试所有边缘情况）。然后发送文件数据。然后结束套接字会知道哪个部分是文件名，文件长度和文件数据，如果你想发送另一个文件名，甚至会准备好下一个文件名。

（如果文件名可以是任意字符，包括控制字符，哎哟！也许发送一个64位整数长度的文件名，文件名，一个64位整数长度的文件数据，文件数据，无限重复？）

编辑：要通过套接字发送 64 位整数，请按特定顺序发送其组成字节，并确保发送方和接收方同意该顺序。如何执行此操作的一个示例是[如何将 Java Long 转换为 Cassandra 的 byte[]？](https://stackoverflow.com/questions/2641150/how-to-convert-a-java-long-to-byte-for-cassandra)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-02T05:53:35.317

**我试图包装一个导致 MalfctionUTF 的缓冲区并将其放在 try-with 资源上关闭下划线套接字流并导致连接重置异常
以下代码对我有用**

**客户**

```
DataOutputStream d = new DataOutputStream(out);
        d.writeUTF(filename);
        d.writeLong(length); 
```

**服务器**

```
DataInputStream d = new DataInputStream(in);
filename = d.readUTF();
fileLength = d.readLong(); 
```

# xml - 如何合并 2 个 xml 并列出唯一元素？

> ID：15649973
> 
> 赞同：0
> 
> 时间：2013-03-27T00:32:59.517
> 
> 标签：xml, list, merge

我们需要合并 2 个大型 xml 文件并列出一个唯一元素，例如 IP 地址，唯一性来自标签名称、状态和类型。

输入文件1：-

```
- <network>
- <node>
  <id>11</id> 
  <name>aaa.com</name> 
  <status>active</status> 
  <ip>1.1.1.1</ip> 
  <type>Windows</type>
  </node>
- <node>
  <id>12</id> 
  <name>bbb.com</name> 
  <status>active</status> 
  <ip>2.2.2.2</ip> 
  <type>Unix</type>
  </node> 
```

输入文件 2：-

```
- <network>
- <node>
  <id>21</id> 
  <name>aaa.com</name> 
  <status>active</status> 
  <ip>1.1.1.1</ip> 
  <type>Windows</type>
  </node>
- <node>
  <id>22</id> 
  <name>ccc.com</name> 
  <status>active</status> 
  <ip>3.3.3.3</ip> 
  <type>Unix</type>
  </node>
  </network> 
```

============= 输出必须是基于类型的活动 IP 地址列表

就像是：

```
Windows.txt
1.1.1.1

Unix.txt
2.2.2.2
3.3.3.3 
```

# mysql - MySQL 每个连接选项以禁用反斜杠以进行转义

> ID：15649979
> 
> 赞同：0
> 
> 时间：2013-03-27T00:33:43.517
> 
> 标签：mysql, c, string, api

使用 MySQL 的 C API，有没有办法禁用反斜杠作为字符串中的转义字符。例如，字符串 'sample\string' 被视为包含单词 'sample' 和 'string' 之间的反斜杠字符的字符串。另一个例子，字符串 'sample\'string' 是一个语法错误，因为反斜杠没有用作转义字符。相反，第二个示例应该是 'sample''string' 以在两个单词的中间包含单引号。我注意到双单引号似乎默认用于转义。

我想在每个连接的基础上禁用反斜杠作为转义字符。请指教！

# ios - Facebook iOS SDK，授权后黑屏

> ID：15649980
> 
> 赞同：0
> 
> 时间：2013-03-27T00:33:56.613
> 
> 标签：ios, objective-c, facebook-ios-sdk

我一直在关注 facebook 开发网站上的指南。所以我把所有东西都设置好了，授权似乎很顺利，但是，当接受应用程序然后按“确定”时，我唯一得到的是一个空白屏幕，顶部有“取消”。

我相信问题出在 sessionStateChanged 方法中。它应该停在这部分（我认为）：

```
 switch (state) {
    case FBSessionStateOpen: {
        UIViewController *topViewController =
        [self.navController topViewController];
        if ([[topViewController modalViewController]
             isKindOfClass:[MyLoginViewController class]]) {
            [topViewController dismissModalViewControllerAnimated:YES];
        }
    }   break; 
```

那么，如果登录和授权成功，应该会这样吧？好吧，根据我的断点，它永远不会发生。也许这就是为什么应用程序永远不会再次打开的原因？

无论如何，我很感谢我能得到的任何提示或建议。

编辑：我发现问题出在 openSession 方法：

```
 - (void)openSession
{
    [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];//This never gets called!!!
     }];
} 
```

sessionStateChanged 方法永远不会被调用，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:43:42.310

您的应用程序永远不会打开，因为您没有创建 URL 方案来将您重定向回来。请参阅 FB 文档的屏幕截图。![在此处输入图像描述](../Images/53ebe782ffb2e21aad99e427245305a6.png)

# objective-c - 刷新图形托管视图

> ID：15649983
> 
> 赞同：0
> 
> 时间：2013-03-27T00:33:58.973
> 
> 标签：objective-c, xcode, graph, core-plot

我的问题已经2天了，仍然无法解决。我实际上在做的是尝试刷新 Graph Hosting View。当我使用 Graph Hosting View 打开 UIViewController 时，会自动绘制一个标准图。我想要的是根据用户可以通过文本字段输入的一些系数来更改图形。

```
- (void)viewWillAppear:(BOOL)animated
{   
[super viewWillAppear:animated];
float x = -10;
float a = [coeff1.text floatValue];
 NSMutableArray *data = [NSMutableArray array];
for (x; x <= 10; x=x+0.2)
{
    [data addObject:[NSValue valueWithCGPoint:CGPointMake(x , a*x+1)]];
}
self.scatterPlot = [[TUTSimpleScatterPlot alloc] initWithHostingView:_graphHostingView     andData:data];
[self.scatterPlot initialisePlot]; 
```

您可能会看到，我想要的只是当用户为“coeff1.text”输入新值时要刷新的视图，请原谅这个问题可能很愚蠢，但老实说，我没有看到任何解决方法，我已经尝试过很多事情，我仍然无法刷新图表。我认为以某种方式可能是通过输入新系数并单击按钮（IBAction）来更新图表......

提前谢谢你，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:35:04.377

首先，您错误地解析了一个浮点值。这就是你的做法：

```
 NSNumberFormatter *formatter = [NSNumberFormatter new];
  [formatter setNumberStyle:NSNumberFormatterDecimalStyle];
  NSNumber * myNumber = [formatter numberFromString:coeff1.text]; 
```

接下来假设它`coeff1`实际上是一个 UITextField，您应该能够像这样注册它的编辑更改更新

```
- (void)viewDidLoad {
  [super viewDidLoad];
  [coeff1 addTarget:self action:@selector(editingChanged:) forControlEvents:UIControlEventEditingChanged];
}

- (void)editingChanged:(UITextField *)textField {
  NSNumberFormatter *formatter = [NSNumberFormatter new];
  [formatter setNumberStyle:NSNumberFormatterDecimalStyle];
  NSNumber * myNumber = [formatter numberFromString:coeff1.text];
  NSMutableArray *data = [NSMutableArray array];
  for (x = 0; x <= 10; x=x+0.2)
  {
    [data addObject:[NSValue valueWithCGPoint:CGPointMake(x , myNumber.floatValue*x+1)]];
  }
  self.scatterPlot = [[TUTSimpleScatterPlot alloc] initWithHostingView:_graphHostingView     andData:data];
  [self.scatterPlot initialisePlot];

} 
```

# javascript - 如何让 Mac 平滑滚动以处理元素

> ID：15649995
> 
> 赞同：3
> 
> 时间：2013-03-27T00:35:06.837
> 
> 标签：javascript, css, html, overflow, smooth-scrolling

我创建了一个虚拟渲染实现（类似于您在 SlickGrid 项目中找到的）。`overflow: auto`一切似乎都运行良好，但有一个问题：在 Mac 上，当我添加??时，平滑滚动（橡皮筋和淡入停止）在我的元素上不起作用？

[http://syntaqx.com/infiniload/](http://syntaqx.com/infiniload/)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T19:27:15.177

您可以使用 JS 库： [https ://github.com/ftlabs/ftscroller](https://github.com/ftlabs/ftscroller)

> FTScroller 是一个跨浏览器的 Javascript/CSS 库，允许在指定元素内进行触摸、鼠标或滚轮滚动，并支持分页、对齐和弹跳。

# javascript - FB.login 仅适用于我的开发者帐户

> ID：15649999
> 
> 赞同：0
> 
> 时间：2013-03-27T00:35:45.187
> 
> 标签：javascript, login, sdk, localhost, facebook-login

当我使用`FB.login`JavaScript SDK 中的函数并使用我的开发人员帐户登录 Facebook 时，会出现弹出窗口，一切都很好。如果我已注销或使用其他帐户登录，则该页面将无法加载并给我一个错误

> `HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request.`

在我的应用程序设置中，沙盒模式已关闭，所以这不应该发生对吗？
我在本地托管我的网站，不知道这是否重要。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:25:31.273

刚才为我们弹出了同样的错误。解决了它：

我们发现我们的一些配置中仍然有一个 Facebook SDK API 密钥，该密钥用于我们的一些登录屏幕。如果您的 JavaScript SDK 仍在使用 API 密钥，请尝试改用您的应用 ID。您可以在此处的应用设置中找到它：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)