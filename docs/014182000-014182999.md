# StackOverflow 问答 14182000-14182999

# c++ - 这个 for 循环实际上是如何工作的？

> ID：14182000
> 
> 赞同：5
> 
> 时间：2013-01-06T12:18:15.177
> 
> 标签：c++, c

阅读一些主题我发现了这段代码，我想知道它是如何工作的，因为它打印：

```
5
2 
```

编码：

```
static int a = 7;

int test()
{
  return a--;
}

int main()
{
  for(test();test();test())
  {
    cout << test() << "\n";
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T12:31:41.200

操作顺序，如图所示：

1.  `a`在启动时全局初始化。到 7
2.  先命中for循环的初始化器，`test()`递减`a`到6，然后返回先验值（7），忽略。
3.  命中for循环的测试用例，`test()`递减`a`到5，然后返回通过非零测试的先前值（6），以便for循环可以继续。
4.  `cout`声明；`test()`递减到 4，返回发送到`a`的先前值**(5)**`cout`。
5.  执行 for 循环的增量语句。`test()`递减`a`到 3，返回先前值 (4)，该值被忽略。
6.  命中for循环的测试用例。`test()`递减`a`到 2，返回先前的值 (3)，它通过了非零测试并且循环继续。
7.  `cout`声明；`test()`递减到 1，返回发送到`a`的先前值**(2)**`cout`。
8.  执行 for 循环的增量语句。`test()`递减`a`到 0，返回先前的值 (1)，该值被忽略。
9.  命中for循环的测试用例。`test()`递减`a`到 -1，返回先前值 (0)，该值未通过非零测试并且循环终止。

现在。在 6 点或 8 点开始循环，看看会发生什么。=P

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-06T12:22:56.883

形式的`for`循环：

```
for (a; b; c) {
    // stuff
} 
```

相当于：

```
{
    a;
    while (b) {
        // stuff
        c;
    }
} 
```

# matlab - 如何让matlab中的轴具有不同的长度而不改变轴限制

> ID：14182001
> 
> 赞同：3
> 
> 时间：2013-01-06T12:18:31.557
> 
> 标签：matlab, plot, matlab-figure

我正在尝试在 Matlab 中绘制一个 3D 曲面，我想在 z 维度上稍微“压缩”该图。现在 x、y 和 z 轴的长度相同，绘图看起来像一个立方体。我希望它在 z 维度上看起来更平坦，而不改变轴限制。

有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:41:52.043

尝试摆弄轴的`DataAspectRatio`和`PlotBoxAspectRatio`属性，这也可以由[`pbaspect`](http://www.mathworks.com/help/matlab/ref/daspect.html)和[`daspect`](http://www.mathworks.com/help/matlab/ref/daspect.html)命令相应地控制。

### 例子

```
%// Plot surface
[X, Y] = meshgrid(-10:.1:10, -10:.1:10);
Z = 100 - X .^ 2 - Y .^ 2;
surf(X, Y, Z, 'EdgeColor', 'None')

%// Flatten the z-axis a bit
pbaspect([1 1 .2])
daspect([1 1 50]) 
```

原图：

![在此处输入图像描述](../Images/8d708020eba37fa126e47518408f4258.png)

平面图：

![在此处输入图像描述](../Images/d83db3ce8a1686e5eaee06675e8a6e81.png)

# azure - 无法将 ASP.NET MVC 4 应用程序部署为 Azure 网站

> ID：14182002
> 
> 赞同：0
> 
> 时间：2013-01-06T12:18:32.867
> 
> 标签：azure, asp.net-mvc-4, dll

我有一个 ASP.NET MVC 4 应用程序，我正在尝试将其部署为 Azure 网站。我的应用程序在我的本地环境中运行良好。但是，当我将网站发布到 azure 时，我收到以下错误：

```
Multiple types were found that match the controller named 'Root'. This can happen if the route that services this request ('') does not specify namespaces to search for a controller that matches the request. If this is the case, register this route by calling an overload of the 'MapRoute' method that takes a 'namespaces' parameter.

The request for 'Views' has found the following matching controllers:
MyApp.HD.Web.Controllers.RootController
MyApp.Web.Controllers.RootController 
```

为什么我会在 Azure 而不是本地收到此错误？我不知道如何绕过它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:29:08.480

我以前遇到过这个问题。让我解释一下为什么会这样。

我们在解决方案中添加了一个新项目，我们称之为`NewProject`。该项目设置不正确，因此我们将其重新创建为`NewProject2`. 项目设置并运行后，我们将其重命名为`NewProject`. 这是问题开始的时候。在某些构建配置下，我们遇到了与您相同的错误。它抱怨带有命名空间`NewProject`和`NewProject2`. 在文件中查找没有返回匹配项`NewProject2`。真是令人沮丧。鉴于这仅在某些构建配置下发生，这是一个很大的迹象，表明问题出在*遗留问题上*bin 文件夹中的引用。进行清洁似乎无法解决问题。最终的解决方法是彻底清除代码。DLL 通常不会提交到源代码管理。我备份并删除了所有代码，然后从源代码管理中取回。该问题不再出现。

值得一提的是，这个问题不是全球性的。它只发生在某些开发人员机器上。我认为受影响的是在 create1/create2/rename2/delete1 过程中从源代码控制中获得最新的那些。

1.  尝试在受影响的构建配置中进行清理和重建。
2.  尝试手动删除您的 bin 和 obj 文件夹。
3.  尝试完整的代码清除

# xcode - 在第二个窗口中更新控件

> ID：14182004
> 
> 赞同：0
> 
> 时间：2013-01-06T12:18:41.707
> 
> 标签：xcode, cocoa-bindings

我有两个窗口，1 个**主菜单**和我添加的1 个**窗口**

**我点击主菜单**窗口上的按钮后打开第二个窗口

```
myWindowController *w = [[myWindowController alloc] initWithWindowNibName:@"myWindow" owner:self]];
[w showWindow:self]; 
```

我在**myWindowController**中有公共方法，它填充所有控件

```
[w.populateControls]; 
```

如果我从 window2 **awakeFromNib**填充控件，则控件显示正常

但**不是**来自

```
[w.populateControls];   // in mainMenu 
```

我做错了什么？

# asp.net - 编译器错误消息：BC30205：预期语句结束

> ID：14182005
> 
> 赞同：-1
> 
> 时间：2013-01-06T12:18:51.010
> 
> 标签：asp.net, compiler-errors, expression-web

这段代码有什么问题？？

```
Compiler Error Message: BC30205: End of statement expected.

Source Error:

Line 1:  <script runat="server" type="css">
Line 2:  protected void Page_Load(object sender, EventArgs e)
Line 3:  {
Line 4:      if (!IsPostBack)
Source File: C:\inetpub\wwwroot\logon\page.aspx    Line: 1 
```

请帮忙 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:18:38.330

我已经解决了我的问题 :)) 我刚刚在我的代码中添加了 <%@ Page Language="C#"%> :) 谢谢大家！

# richfaces - 渲染属性未在值更改侦听器上渲染丰富面板

> ID：14182008
> 
> 赞同：0
> 
> 时间：2013-01-06T12:19:01.330
> 
> 标签：richfaces, jsf-1.2

我正在使用 JSF 1.2 (sun RI) 和richFaces 3.3 开发一个应用程序。

我想在选择列表下方的选择列表中更改列表值时显示一个面板。

以下是相同的代码：

```
> <a4j:form ajaxSubmit="true">              
>          
 <h:panelGrid id="videoServiceTab">                                     <h:outputLabel for="deviceSelect" value="Select Device :"/>                       
>               
>               <h:selectOneMenu id="deviceId" value="#{deviceBean.deviceId}" valueChangeListener="#{deviceBean.startLiveStream}">
>                   <f:selectItems  value="#{deviceBean.userDevices}"/>
>                   <a4j:support event="onchange" reRender="videoPanel" />
>               </h:selectOneMenu>                                          
>               <rich:panel id="videoPanel" rendered="#{deviceBean.showPane}">
>                   My Panel..  
>               </rich:panel>                                                </h:panelGrid>   
</a4j:form> 
```

1)当一个列表值被选中时，调用valueChangeListener，更新方法中的showPane值（设置为true，默认值为false）

2）但即使 showPane 值设置为 true ，富面板也不会显示。

3）以下是日志，结合了jsf的“PhaseListener”，它清楚地表明，在“RENDER_RESPONSE”完成之前，showPane值设置为true仍然没有显示id为videoPanel的丰富面板。

4) 支持 bean (deviceBean) 是请求范围的。

-------------阶段监听器的日志 ----------

开始阶段 PROCESS_VALIDATIONS 3

是显示窗格调用..false

在 startLiveStream 里面

从服务方法返回..

结束阶段 PROCESS_VALIDATIONS 3

开始阶段 UPDATE_MODEL_VALUES 4

是显示窗格调用..true

结束阶段 UPDATE_MODEL_VALUES 4

开始阶段 INVOKE_APPLICATION 5

结束阶段 INVOKE_APPLICATION 5

开始阶段 RENDER_RESPONSE 6

是显示窗格调用..true

是显示窗格调用..true

结束阶段 RENDER_RESPONSE 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:50:05.203

我尝试了以下代码并且它有效。从 a4j:outputPanel 的文档中可以明显看出，它包装了需要更新/修改的组件，这对于 panelGrid 来说是正确的，如下所示

```
<a4j:outputPanel layout="none">
    <h:panelGrid id="videoPanel" rendered="#{deviceBean.showPane}">
    Display Panel..
                                            </h:panelGrid>      
    </a4j:outptPanel> 
```

# linux - unix DATE 命令在特定年份转换错误

> ID：14182013
> 
> 赞同：1
> 
> 时间：2013-01-06T12:19:56.080
> 
> 标签：linux, date, ubuntu

命令

```
mydate=$(date -d "90 days 19850101" +%Y%m%d%H%M%S) 
```

产生 19850401000000。但是：

```
mydate=$(date -d "90 days 19830101" +%Y%m%d%H%M%S) 
```

产生 19830401010000。

怎么可能在 1983 年在 4 月 1 日增加一小时（这是我不想要的结果），而 1985 年的答案是正确的？

# android - Android onCreate 或 onStartCommand 用于启动服务

> ID：14182014
> 
> 赞同：115
> 
> 时间：2013-01-06T12:19:59.153
> 
> 标签：android, android-service, oncreate

通常，当我创建一个 Android 服务时，我会实现该`onCreate`方法，但在我的上一个项目中，这不起作用。我尝试实施`onStartCommand`，这似乎有效。

问题是：当我必须实现服务时需要哪种方法？我必须实施哪些方法？`onCreate`, `onStartCommand`, 还是两者兼而有之？每个角色的作用是什么？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-01-06T14:00:11.093

`onCreate()`在实例化对象时调用`Service`（即：**创建**服务时）。你应该在这个方法中做一些你只需要做一次的事情（即：初始化一些变量等）。**每个实例化对象**`onCreate()`只会被调用一次。

 **`onCreate()`如果你真的想要/只需要初始化**一次**，你只需要实现。

`onStartCommand()`每次客户端**使用**`startService(Intent intent)`. 这意味着`onStartCommand()`可以多次调用。**每次**客户端从您的服务请求某些内容时，您都应该在此方法中执行所需的操作。这在很大程度上取决于您的服务做什么以及它如何与客户端通信（反之亦然）。

如果您不实施`onStartCommand()`，那么您将无法从`Intent`客户端传递的任何信息中获取任何信息，`onStartCommand()`并且您的服务可能无法执行任何有用的工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-14T06:18:55.537

> **服务的行为与 Activity 相同**无论您想`associate`使用服务做什么，都会`onCreate`像初始化一样进入

并且每当`service`使用**startService 调用**时。`onStartCommand`将被调用。并且您可以传递任何操作来执行。就像音乐播放器一样，您可以播放、暂停、停止使用动作

你可以`operation in service`通过发送一个动作并接收它来做任何事情`onStartCommand`

`onCreate`像构造函数一样工作。

**简短编辑**

`onCreate()`仅在您第一次启动时调用，`Service`而`onStartCommand()`每次您再次调用时调用`startService`。它可以让您设置播放、停止、暂停音乐等动作。

```
public void onStartCommand()
{
     if(intent.getAction.equals("any.play")
     {
        //play song
     }
     else if(intent.getAction.equals("any.stop")
     {}
} 
```**

# java - 用于处理 jFrame 并填充进度条的计时器

> ID：14182016
> 
> 赞同：-3
> 
> 时间：2013-01-06T12:20:22.633
> 
> 标签：java, swing, timer

我是初学者，我想在运行程序时启动一个计时器（即当父 jFrame 出现时）并在 5 秒后处理帧。我想在计时器启动时开始填充一个虚拟进度条并完全填充它直到计时器结束。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:58:25.673

这是你的代码

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
public class ClosingPanel extends JFrame{
private final Timer every50millis;

public ClosingPanel() {
    setTitle("this panel will self-destruct");
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    final JProgressBar progressBar = new JProgressBar(SwingConstants.HORIZONTAL, 0, 100);
    add(progressBar);
    pack();
    every50millis = new Timer(50, new ActionListener() {
        private int count=0;
        @Override
        public void actionPerformed(ActionEvent e) {
            count++;
            progressBar.setValue(count);
            if (count==100) {
                shutdown();
            }
        }
    });
    every50millis.start();
}

private void shutdown() {
    System.err.println("shutting down");
    every50millis.stop();
    WindowEvent closingEvent = new WindowEvent(ClosingPanel.this, WindowEvent.WINDOW_CLOSING);
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(closingEvent);
}

public static void main(String[] args) throws Exception {
    SwingUtilities.invokeAndWait(new Runnable() {
        @Override
        public void run() {
            ClosingPanel panel = new ClosingPanel();
            panel.setVisible(true);
        }
    });
} 
```

}

# java - 将文件复制到Windows 7中的Java主目录在Java中拒绝访问

> ID：14182018
> 
> 赞同：-1
> 
> 时间：2013-01-06T12:20:29.603
> 
> 标签：java, windows-7

将文件复制到java主目录时访问被拒绝

```
FileUtils.copyFiletoDirectory(new File("somethingelsefilepath"),
   new File(System.getProperty("java.home")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:32:30.600

`java.home`是Java的安装目录。你不应该向这个目录写任何东西。我猜您实际上想将某些内容复制到用户的主目录。在这种情况下，属性是`user.home`。

请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:00:12.137

系统目录是写保护的（好）。任何应用程序的任何库都必须在他的应用程序目录中......（良好做法）

好的结构可能是这样的：

**视窗**

```
C:\APPS\your.app.directory\
    .\bin\*.exe
    .\conf\*.xml
    .\lib\*.jar
```

**Linux**

```
/opt/your.app.directory/
    ./bin/*.sh
    ./conf/*.xml
    ./lib/*.jar
```

# jquery - 淡出，替换html，随机淡入

> ID：14182026
> 
> 赞同：1
> 
> 时间：2013-01-06T12:21:04.933
> 
> 标签：jquery

我为我的在线用户图像创建了效果，但是这个脚本有一些问题。我有 9 张图片。隐藏了 3 张图像。当一张随机图像淡出时，我想用其中一张隐藏图像替换它。我不想在前 6 张图片中看到相同的图片。

[http://seninsayfan.net/user.html](http://seninsayfan.net/user.html)

```
$(document).ready(function() {
setInterval(function() {
 var pic = 1 + Math.floor(Math.random() * 6);
  var picture = 1 + Math.floor(Math.random() * 9);
$(".image-" + pic).each(function() {
$(this).fadeOut(500, function() {
     $(this).html($(".image-" + picture).html());
    });
$(this).fadeIn(500);
});
}, 1000);
}); 
```

感谢所有大师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:32:56.757

我已经对您的代码进行了一些更改，您可以在[http://jsfiddle.net/24Qat/22/看到一个实时示例](http://jsfiddle.net/24Qat/22/)

我设置了一组图像：

```
var images = {};
images[0] = "http://seninsayfan.net/ext/avatar/img1.jpg";
images[1] = "http://seninsayfan.net/ext/avatar/img2.png";
images[2] = "http://seninsayfan.net/ext/avatar/img4.jpg";
images[3] = "http://seninsayfan.net/ext/avatar/image1.jpg";
images[4] = "http://seninsayfan.net/ext/avatar/image2.gif";
images[5] = "http://seninsayfan.net/ext/avatar/pic1.gif";
images[6] = "http://seninsayfan.net/ext/avatar/pic2.jpg";
images[7] = "http://seninsayfan.net/ext/avatar/pic3.jpg";
images[8] = "http://seninsayfan.net/ext/avatar/pic4.gif"; 
```

我保存图像索引：

```
var shown = [0,1,2,3,4,5];
var hidden = [6,7,8]; 
```

比我使用选择源和目标来进行交换：

```
$(document).ready(function() {
    setInterval(function() {
        // choose target index
        var old_pic =  Math.floor(Math.random() * 6);
        // choose source index
        var new_pic = Math.floor(Math.random() * 3);
        $(".image-" + old_pic).fadeOut(500, function() {
            $(this).find('img').attr("src", images[hidden[new_pic]]);
            var temp = shown[old_pic];
            shown[old_pic] = hidden[new_pic];
            hidden[new_pic] = temp;
        }).fadeIn(500);
    }, 1000);
}); 
```

请注意，对于更精简的代码，我已将索引更改为从 0 开始。此外，我已删除最后 3 个图像（只需要 6 个容器），因此 html 应为：

```
<div class="image image-0" ><img src="http://seninsayfan.net/ext/avatar/img1.jpg"/></div>
<div class="image image-1" ><img src="http://seninsayfan.net/ext/avatar/img2.png"/></div>
<div class="image image-2" ><img src="http://seninsayfan.net/ext/avatar/img4.jpg"/></div>
<div class="image image-3" ><img src="http://seninsayfan.net/ext/avatar/image1.jpg"/></div>
<div class="image image-4" ><img src="http://seninsayfan.net/ext/avatar/image2.gif"/></div>
<div class="image image-5" ><img src="http://seninsayfan.net/ext/avatar/pic1.gif"/></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:25:52.343

当您`fadeOut()`将图像设置为“隐藏”或“淡出”时，它的类或 ID。然后，当您尝试`fadeIn()`另一个时，从那些 hidden 或 fadedOut 中选择，当您将它们淡入时，清除它们的类或 id 'hidden' 或 'fadedOut'。

# spring - 吗啡。如何从大数据存储中获取部分信息

> ID：14182029
> 
> 赞同：0
> 
> 时间：2013-01-06T12:21:36.677
> 
> 标签：spring, mongodb, morphia

我对 Morphia 有一些问题。有人可以帮助我吗？

我正在 Spring + MongoDB 上编写有关电影和名人的网络项目。我有实体类类型：

```
@Entity(value="genres")
public class Genre implements IGenre {

    @Id
    @Indexed
    private ObjectId id;

    @Indexed
    private String name;

    private String description;

    private long quantity;

    private Set <IMovie> movies;

    //getters and setters

} 
```

和实体类电影：

```
@Entity(value="movies")
public class Movie implements IMovie {

    @Id
    @Indexed
    private ObjectId id;

    @Indexed
    private String originalTitle;

    private String year;

    private Set <IGenre> genres;

    // getters and setters

} 
```

我有 30 种类型。例如其中之一：喜剧。我还有 250 000 部喜剧。现在我想按流派=喜剧进行电影分页。我如何才能从所有喜剧中获得 20 条记录。如果我使用 @Embedded 或 @Reference 注释，我仍然会立即获得整个列表。在控制器中使用它太大了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:26:13.540

您应该更改数据架构以进行此类查询。您使用的模式具有循环依赖关系，在您的流派实体中您持有电影实体，在电影中您持有流派。此外，按类型保存所有电影也不容易查询。如果我是你，我会使用这样的模式。

```
@Entity(noClassnameStored = true) // you wouldn't have any problem when you change the class name or package of your class if you don't store the classname through this annotation
    public class Movie implements IMovie {

        @Id
        @Indexed
        private ObjectId id;

        @Indexed
        private String originalTitle;

        private String year;

        private Set <String> genres; // unique identifier of the genres instead of embedding the whole genre entity

        // getters and setters

    } 
```

因此，有了这样的模式，您可以通过流派字段编写简单的 $in 查询来检索具有特定流派的电影。您的案例的示例查询：

```
datastore.find(Movie.class).field("genres").in(Lists.newArrayList("comedy")).limit(20).asList; 
```

在下面的 mongo 网页中，您可以找到有关如何根据不同场景设计架构的建议。

> [http://docs.mongodb.org/manual/core/data-modeling/#data-modeling-patterns-and-examples](http://docs.mongodb.org/manual/core/data-modeling/#data-modeling-patterns-and-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:04:10.260

我对 Mongo 不太熟悉，但看起来您需要在此处实现自定义查询。无论您做什么，您都需要为您的页面传递一个开始，以及一个页面大小（在您的情况下为 20）。

您可以通过在查询中组合 .offset(page_start) 和 .limit(page_size) 在 Morphia 中进行分页。因此，首先您将创建一个查询以获取属于某种类型的电影，然后应用分页。

看起来它是使用 Spring [http://static.springsource.org/spring-data/data-mongodb/docs/1.0.0.RELEASE/reference/html/#repositories.special-parameters中的存储库处理的](http://static.springsource.org/spring-data/data-mongodb/docs/1.0.0.RELEASE/reference/html/#repositories.special-parameters)

您将使用 Pageable 实现来传递分页数据，而不必担心自己进行偏移和限制调用。文档中有一个“Web 分页”示例。

希望这可以帮助！

# php - 网页未从页面顶部显示

> ID：14182030
> 
> 赞同：0
> 
> 时间：2013-01-06T12:21:39.727
> 
> 标签：php, html, css

请查看此页面及其源代码。 [http://www.chemfluence.org.in/monetarist/index_copy.php](http://www.chemfluence.org.in/monetarist/index_copy.php)

网页未从网页顶部显示。与浏览器顶部有大约 10 像素的间隙。 ![在此处输入图像描述](../Images/851b447f775ab8c6cf29090180dc157c.png)

我已经突出了上图中的差距。你能请任何人告诉我如何从顶部 0px 显示页面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:23:23.303

Chrome 在您的 CSS 使用中内置了 8px 的默认边距：

```
body{ margin: 0 } 
```

使用某种 CSS 重置总是很方便，以防止浏览器之间出现上述不一致。

像这样的东西：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:24:25.703

这是因为您没有为您的文档显式设置 a`margin`并且`body`某些浏览器会使用默认的。

要解决这个问题，请在 CSS 样式表中添加如下内容：

```
body {
    margin-top: 0px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T12:27:15.017

默认的浏览器样式表会为 body 标签添加边距，因此您必须将 body 的边距设置为 0：

```
html,body {margin:0;} 
```

顺便说一句，您不应该将表格用作布局网格。

# opengl - 将opengl与codelite连接起来

> ID：14182032
> 
> 赞同：-1
> 
> 时间：2013-01-06T12:21:57.940
> 
> 标签：opengl, codelite

我想用opengl制作一些3D程序，但似乎我还没有成功地将它与我的IDE Codelite连接起来。我确信所有文件（glut.h、glut32.lib 等）都在正确的位置，但是当我输入示例代码并构建项目时，出现了许多错误。我认为唯一可能的原因是我的 opengl 根本没有与我的 IDE 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-22T07:53:30.507

下载所需的opengl文件 [https://www.dropbox.com/s/5u3edez7cmm2tl3/opengl%20codelite.zip?dl=0](https://www.dropbox.com/s/5u3edez7cmm2tl3/opengl%20codelite.zip?dl=0)

转到编译器目录（例如 TDM-GCC）。将 glut.h 复制到 include/GL 目录 如果您有 32 位 Windows，则将 libglut32.a 复制到 lib 文件夹 如果您有 64 位 Windows，则将 glut32.dll 复制到 C:\Windows\System32 将 glut32.dll 复制到 C:\Windows\SysWOW64

上述说明必须应用一次

对于每个项目，您必须这样做：转到项目设置，然后链接器将库搜索路径设置为编译器的 lib 文件夹，并将库设置为 libglu32.a;libglut32.a;libopengl32.a

希望我有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T14:06:01.827

GLUT 是 OpenGL 的工具包，你必须下载并安装它。试试这里：[http ://www.opengl.org/resources/libraries/glut/glut_downloads.php](http://www.opengl.org/resources/libraries/glut/glut_downloads.php)

# sorting - pymongo sort() limit() 不同？

> ID：14182035
> 
> 赞同：3
> 
> 时间：2013-01-06T12:22:13.613
> 
> 标签：sorting, find, limit, pymongo

```
1\. db.bios.find().sort( { name: 1 } ).limit( 5 )
2.db.bios.find().limit(5).sort({name:1})
```

1.  他们有什么不同？他们是平等的吗？

2.  如果第一个做：找到所有文件？这是坏的。
    如果 db.bios.find().count() 很大（1000000），哪个进程快？

3.  什么是 find() 默认序​​列？插入顺序？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:10:47.333

1.两者相等，先排序，再限定结果。
2.为了优化这一点，考虑在*name*上建立索引，如果这将是一个频繁的查询。
3\. find() 的自然顺序通常是插入顺序，但不能保证文档是否在创建后更新。

# java - 使用 Android Scanner+BufferedReader 的问题

> ID：14182038
> 
> 赞同：0
> 
> 时间：2013-01-06T12:22:37.037
> 
> 标签：java, android, inputstreamreader

我一直致力于将现有 java 项目中的代码调整到 android 环境中。

我从对应于精灵表的整数文本文件加载地图。

```
e.g. 0=grass 1=wall

0 0 0 1 1 1 0 0 0
0 0 0 1 1 1 0 0 0
0 0 0 1 1 1 0 0 0 
```

-

这是以前用这个完成的：（扫描仪和缓冲阅读器）

```
 mapData = new Scanner(new BufferedReader(new FileReader(fileName)));
  mapData.next();
  for (int i = 0; i < 3; i++) {
    for (int y = 0; y < 30; y++) {
      for (int x = 0; x < 50; x++) {
        map[i][x][y] = mapData.nextInt();
      }
    }
    mapData.next();
  } 
```

-

过去几天我一直在努力适应这一点，它处于工作状态，但需要 5 分钟才能完成 1 秒的工作

```
 mapData = new Scanner(new BufferedReader(new InputStreamReader(context.getResources().openRawResource(map1))));
        mapData.next();
        for (int i = 0; i < 3; i++) {
            for (int y = 0; y < 30; y++) {
                for (int x = 0; x < 50; x++) {
                    map[i][x][y] = mapData.nextInt();
                }
            }
            mapData.next();
        } 
```

（map1 是另一个类传递的 .txt 文件）

我在这里做错了什么或者我应该使用什么其他方法来完成这项任务？

谢谢-林登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:12:21.300

看来我已经找到了解决这个问题的方法。

更换

```
map[i][x][y] = mapData.nextInt(); 
```

和：

```
map[i][x][y] = Integer.parseInt(mapData.next()); 
```

对速度进行了重大修复/

# javascript - 隐藏.img javascript onload

> ID：14182039
> 
> 赞同：0
> 
> 时间：2013-01-06T12:22:42.423
> 
> 标签：javascript

为什么这段代码不能正常工作？我搜索 .img 属性，但样式没有改变，并且始终可见图片。

HTML

```
 <script type="text/javascript">
    function displayDate()
    {
            $('img[alt=image2]').css("display","none");
            $('img[alt=image3]').css("display","none");
            $('img[alt=image4]').css("display","none");

            $('img[alt=image2]').css("visibility","visible");
            $('img[alt=image3]').css("visibility","visible");
            $('img[alt=image4]').css("visibility","visible");
    }
</script> 
```

HTML

```
<body OnLoad="displayDate()">
<img src="im.jpg" alt="image2"/>
<img src="im.jpg" alt="image3"/>
<img src="im.jpg" alt="image4"/>
</body> 
```

您可以在 chrome 中看到错误

![在此处输入图像描述](../Images/6f013d5e461c4f4a1f5567ac34942347.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:28:41.540

我认为您的问题是您在使用 jQuery 语法时没有包含 jQuery 库。因此，尝试通过将其添加到`<head>`您的页面来包含 jQuery 库：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

在加载时执行某些东西的 jQuery 方法是这样的：

```
$(function() {
   // this code will execute on load
}); 
```

jQuery隐藏元素的方式是这样的：

```
$('img[alt="image2"]').hide(); 
```

要隐藏`alt`包含“图像”一词的图像，您可以这样做（可以在[此处](http://api.jquery.com/category/selectors/)找到其他选择器选项）：

```
$(function() {
    $('img[alt*="image"]').hide();
}); 
```

除了使用`alt`属性，另一个选项是为图像分配一个类，这样您就可以根据它们的类来选择图像：

```
$(function() {
    $('.myImageClassName').hide();
});

<img class="myImageClassName" /> 
```

或将它们包装在`div`一个独特的`id`：

```
$(function() {
    $('#myImageContainer img').hide();
});

<div id="myImageContainer">
    <img />
    <img />
    <img />
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:29:27.270

只需尝试为每个 img 标签设置一个 id 并尝试使用此 jquery hide() 函数...

```
$('#your_img_id').hide(); 
```

可能工作...

# objective-c - 计算多边形联合的总覆盖面积

> ID：14182040
> 
> 赞同：0
> 
> 时间：2013-01-06T12:22:46.120
> 
> 标签：objective-c, opengl-es, opengl-es-2.0, polygon, computational-geometry

我在屏幕上使用 OpenGL ES 渲染了许多 2D（可能相交）多边形。所有的多边形都完全包含在屏幕中。找到这些多边形的并集面积占屏幕总面积百分比的最及时方法是什么？需要及时性，因为我需要在多边形移动时立即更新覆盖区域。

目前，我将每个多边形表示为一个二维布尔数组。使用多边形中的点函数（来自几何包），我对屏幕上的每个点（x，y）进行采样以检查它是否属于多边形，如果是，则设置多边形[x][y] = true，否则为假。

在对屏幕中的所有多边形执行此操作后，我再次遍历所有屏幕像素，并检查每个多边形数组，如果任何多边形的多边形 [x] [y] 值设置为 true，则将该像素计数为“已覆盖” .

这可行，但随着多边形数量的增加，性能并不理想。有没有更好的方法来做到这一点，如果可能的话，使用开源库？我想到了：

(1) 合并多边形以获得一个或多个**不重叠的**多边形。然后使用标准的多边形面积公式计算每个多边形的面积。然后总结它们。不知道如何让它工作？

(2) 以某种方式使用 OpenGL。想象一下，我正在用一种颜色渲染所有这些多边形。是否可以用某种颜色计算屏幕缓冲区上的像素数？这听起来确实是一个不错的解决方案。

有什么有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:47:47.023

如果您知道背景颜色并且所有多边形都有其他颜色，则可以从帧缓冲区读取所有像素`glReadPixels()`并简单地计算所有颜色与背景不同的像素。

如果不满足第一个条件，您可以考虑创建自定义帧缓冲区并使用相同颜色渲染所有多边形（例如，背景为 (0.0, 0.0, 0.0)，多边形为 (1.0, 0.0, 0.0)）。接下来，读取生成的帧缓冲区并计算整个屏幕上红色的平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:52:27.500

如果要获得不重叠的多边形，可以运行线相交算法。一个简单的变体是[Bentley-Ottmann 算法](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)，但甚至更快的算法`O(n log n + k)`（具有 n 个顶点和 k 个交叉点）也是可能的。

给定一个线交点，您可以通过在交点上构造一个连接两个多边形的顶点来统一两个多边形。然后沿着另一个多边形内部的一个多边形的顶点（您可以使用多边形中的点函数确定必须进入的方向），并删除所有顶点和边，直到到达多边形的外部. 在那里，您通过在两个多边形的第二个交点上创建一个新顶点来修复多边形。

除非我弄错了，否则这可以及时运行，`O(n log n + k * p)`其中 p 是多边形的最大重叠。

统一多边形后，您可以使用普通的面积函数来计算多边形的确切面积。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:39:36.800

我认为用像素数计算多边形面积的尝试太复杂了，有时甚至不准确。[您可以在有关计算多边形覆盖面积](https://stackoverflow.com/questions/13057221/calculate-the-area-covered-by-a-polygon-in-a-google-map-in-an-android-app)的stackoverflow答案中看到类似的内容，如果您构造正多边形，请查看正多边形[的面积](http://www.mathopenref.com/polygonregulararea.html)，

# javascript - Nodejs Buffer：如何读出位标志？

> ID：14182052
> 
> 赞同：1
> 
> 时间：2013-01-06T12:23:52.453
> 
> 标签：javascript, node.js, sockets, binary, buffer

我正在侦听 tcp 套接字上的数据事件。

每个数据事件都为我提供了一个缓冲区，它是协议的帧。第一个字节用作标题并包含一些我想访问的位标志。

直到那里监听数据事件并获得第一个字节看起来像：

```
socket.on('data', function(buff) {
    console.log(buff[0]); // returns 129
}); 
```

如果我现在想检查第一位，那么我必须将 129 转换为位格式，然后检查第一个数字。

```
129 => 1000 0001
       | 
```

正如我们所知，JavaScript 不支持二进制文件。

我现在想知道节点缓冲区对象是否允许我明智地工作，如果是的话，这会是什么样子？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:31:46.297

可以使用`&`运算符检查标志。

对于包含第一位的标志：

```
1000 0001      129
1000 0000      128
--------- &
1000 0000      128 
```

对于不包含第一位的标志：

```
0101 0001      81
1000 0000      128
--------- &
0000 0000      0 
```

所以结果要么是标志（如果已设置标志）或为零（如果尚未设置标志）。因此，您可以创建一个函数（其中`flag`是 2 的幂）：

```
var containsFlag = function(number, flag) {
  return (number & flag) === flag;
};

containsFlag(129, 128);  // true
containsFlag(81, 128);   // false 
```

# c++ - DarkGDK 更改显示模式使精灵消失

> ID：14182055
> 
> 赞同：1
> 
> 时间：2013-01-06T12:24:31.220
> 
> 标签：c++, wizard, gdk

执行应用程序后，用户单击开始按钮。当时我想将显示更改为不同的尺寸。但是这样做屏幕会变黑并且图像不会粘贴。

```
while ( LoopGDK ( ) )
    {

        if(dbMouseClick()==1){
            int x=dbMouseX(), y=dbMouseY();

            if(x>370 && x<498 && y>240 && y<368){
                dbDeleteImage(1);
                dbDeleteImage(2);
                bg_exist=false;
            }
        }
        if(!dbSpriteExist(1)&&bg_exist==false){
            dbSetDisplayMode(800,224,32);
            dbPasteImage(3,0,0);
        }

        dbSprite(2,370,240,2);
        dbPasteImage(1,0,0);
        dbSync ( );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:34:26.890

这个引擎已经过时了，几乎没有人再使用了。

那里有很多更好的引擎，完整列表可以在[**这里找到**](http://en.wikipedia.org/wiki/List_of_game_engines)

我最喜欢的是[**虚幻引擎**](http://www.unrealengine.com/)

我建议使用虚幻引擎，因为它有更好的支持和更易于使用的功能。

# c++ - 单处理器上的其他线程是否可以看到内存重新排序？

> ID：14182066
> 
> 赞同：22
> 
> 时间：2013-01-06T12:26:28.823
> 
> 标签：c++, multithreading, memory-barriers

现代 CPU 架构通常会采用性能优化，这可能会导致无序执行。在单线程应用程序中，内存重新排序也可能发生，但它对程序员来说是不可见的，就好像内存是按程序顺序访问的一样。对于 SMP，内存屏障来拯救它，用于强制执行某种内存排序。

我不确定的是单处理器中的多线程。考虑以下示例：当线程 1 运行时，存储 to`f`可能发生在存储 to 之前`x`。假设上下文切换发生在`f`写入之后，就在`x`写入之前。现在线程 2 开始运行，它结束循环并打印 0，这当然是不可取的。

```
// Both x, f are initialized w/ 0.
// Thread 1
x = 42;
f = 1;

// Thread 2
while (f == 0)
  ;
print x; 
```

上面描述的场景可能吗？或者是否可以保证在线程上下文切换期间提交物理内存？

根据这个[维基](http://en.wikipedia.org/wiki/Memory_barrier)，

> 当程序在*单 CPU*机器上运行时，硬件会执行必要的簿记，以确保程序执行就像所有内存操作都按照程序员指定的顺序（程序顺序）执行一样，因此不需要内存屏障。

虽然它没有明确提到单处理器多线程应用程序，但它包括了这种情况。

我不确定它是否正确/完整。请注意，这可能高度依赖于硬件（弱/强内存模型）。因此，您可能希望在答案中包含您知道的硬件。谢谢。

PS。设备 I/O 等不是我关心的问题。它是一个单核单处理器。

**编辑**：感谢 Nitsan 的提醒，我们假设这里没有编译器重新排序（只是硬件重新排序），并且线程 2 中的循环没有被优化掉。再次，魔鬼在细节中。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T01:38:47.617

作为一个 C++ 问题，答案必须是程序包含数据竞争，因此行为未定义。实际上，这意味着它可以打印 42 以外的内容。

这与底层硬件无关。正如已经指出的那样，循环可以被优化掉，编译器可以重新排序线程 1 中的分配，因此即使在单处理器机器上也可以出现结果。

[我假设对于“单处理器”机器，您的意思是具有单核和硬件线程的处理器。]

您现在说，您想假设编译器重新排序或循环消除不会发生。至此，我们离开了 C++ 领域，真正开始询问相应的机器指令。如果您想消除编译器重新排序，我们可能还可以排除任何形式的 SIMD 指令，并考虑一次只在单个内存位置上运行的指令。

所以本质上thread1有两个存储指令，顺序是store-to-x store-to-f，而thread2有test-f-and-loop-if-not-zero（这可能是多条指令，但涉及一个load-from -f) 然后从-x 加载。

在我知道或可以合理想象的任何硬件架构上，线程 2 将打印 42。

一个原因是，如果单个处理器处理的指令在它们之间不是顺序一致的，那么您几乎无法断言有关程序效果的任何内容。

唯一可能在这里干扰的事件是中断（用于触发抢占式上下文切换）。一个假设的机器在中断时存储其当前执行流水线状态的整个状态并在中断返回时恢复它，可能会产生不同的结果，但这样的机器是不切实际的，afaik 不存在。这些操作会产生相当多的额外复杂性和/或需要额外的冗余缓冲区或寄存器，所有这些都没有充分的理由——除了破坏你的程序。真正的处理器在中断时刷新或回滚当前流水线，这足以保证单个硬件线程上所有指令的顺序一致性。

并且无需担心内存模型问题。较弱的内存模型源自将单独的硬件处理器与它们实际共享的主内存或第 n 级高速缓存分开的单独缓冲区和高速缓存。单个处理器没有类似的分区资源，也没有充分的理由将它们用于多个（纯软件）线程。同样，如果没有单独的处理资源（处理器/硬件线程）来保持这些资源忙碌，那么没有理由使架构复杂化并浪费资源来使处理器和/或内存子系统知道诸如单独的线程上下文之类的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T21:30:27.183

强内存排序以与程序中定义的完全相同的顺序执行内存访问指令，通常称为“程序排序”。

可以使用较弱的内存排序来允许处理器重新排序内存访问以获得更好的性能，这通常被称为“处理器排序”。

AFAIK，上述情况在英特尔 ia32 架构中是不可能的，其处理器订购禁止此类情况**。**相关规则为（intel ia-32软件开发手册Vol3A 8.2 Memory Ordering）：

除了流存储、CLFLUSH 和字符串操作外，写入不会与其他写入重新排序。

为了说明这个规则，它给出了一个类似的例子：

内存位置x，y，初始化为0；

线程1：

```
mov [x] 1
mov [y] 1 
```

线程2：

```
mov r1 [y]
mov r2 [x] 
```

r1 == 1 和 r2 == 0 是不允许的

在您的示例中，线程 1在存储 x 之前**不能**存储 f。

@Eric 回应您的评论。

快速字符串存储指令“stosd”，可能会**在**其操作中乱序存储字符串。在多处理器环境中，当一个处理器存储字符串“str”时，另一个处理器可能会观察到 str[1] 在 str[0] 之前被写入，而逻辑顺序假定是在 str[1] 之前写入 str[0]；

但这些说明不会与任何其他商店重新订购。并且必须有精确的异常处理。当 stosd 中间发生异常时，实现可以选择延迟它，以便所有乱序子存储（不一定意味着整个 stosd 指令）必须在上下文切换之前提交。

编辑以解决就好像这是一个 C++ 问题所做的声明：

即使这是在 C++ 的上下文中考虑的，据我了解，标准确认编译器不应**重新**排序线程 1 中 x 和 f 的分配。

$1.9.14 与完整表达式关联的每个值计算和副作用在与要评估的下一个完整表达式关联的每个值计算和副作用**之前进行排序。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T22:37:56.997

这不是一个真正的 C 或 C++ 问题，因为您明确假设没有加载/存储重新排序，这两种语言的编译器都完全允许这样做。

为了论证而允许该假设，请注意循环可能永远不会退出，除非您：

*   给编译器一些理由相信可能会改变（例如，通过将其地址传递给一些*可以*修改它`f`的非内联函数）
**   将其标记为 volatile，或*   使其成为显式原子类型并请求获取语义*

 ** * *

在硬件方面，您不必担心在上下文切换期间“提交”物理内存。两个软件线程共享相同的内存硬件和缓存，因此无论内核*之间的一致性/一致性协议是否相关，都不存在不一致的风险。*

假设两个商店都已发布，并且内存硬件决定重新订购它们。这到底是什么意思？也许 f 的地址已经在缓存中，因此可以立即写入，但 x 的存储会延迟到获取该缓存行为止。好吧，从 x*读取*取决于相同的地址，因此：

*   在提取发生之前加载不会发生，在这种情况下，一个理智的实现必须在排队加载之前发出排队存储
*   或者负载可以窥视队列并获取 x 的值而无需等待写入

无论如何，考虑到切换线程所需的内核抢占本身将发出任何加载/存储障碍所需的内核调度程序状态的一致性，并且很明显在这种情况下硬件重新排序不会成为问题。

* * *

真正的问题（您试图避免）是您假设没有编译器重新排序：这是完全错误的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-29T10:20:07.117

**您只需要一个编译器围栏。***来自内存屏障*的 Linux 内核文档（[链接](http://www.kernel.org/doc/Documentation/memory-barriers.txt "关联")）：

> 在单处理器编译系统上，SMP 内存屏障被简化为编译器屏障，因为它假定 CPU 看起来是自洽的，并且会正确地相对于自身对重叠访问进行排序。

*为了扩展这一点，在硬件级别不需要*同步的原因是：

1.  单处理器系统上的所有线程共享相同的内存，因此不会在 SMP 系统上发生缓存一致性问题（例如传播延迟），并且

2.  如果由于抢占式上下文切换而刷新了流水线，则 CPU 执行流水线中的任何乱序加载/存储指令都将被提交或**完全**回滚。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T13:20:17.503

此代码很可能永远不会完成（在线程 2 中），因为编译器可以决定将整个表达式提升出循环（这类似于使用非易失性的 isRunning 标志）。也就是说，您需要担心两种类型的重新排序：编译器和 CPU，两者都可以自由移动存储。请参阅此处：[http](http://preshing.com/20120515/memory-reordering-caught-in-the-act) ://preshing.com/20120515/memory-reordering-caught-in-the-act示例。此时，您上面描述的代码受编译器、编译器标志和特定架构的支配。引用的 wiki 具有误导性，因为它可能表明内部重新排序不受 cpu/编译器的支配，但事实并非如此。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-06T14:46:36.930

就 x86 而言，从执行代码的角度来看，乱序存储在程序流程方面是一致的。在这种情况下，“程序流”只是处理器执行的指令流，而不是受限于“在线程中运行的程序”的东西。上下文切换等所需的所有指令都被视为此流程的一部分，因此跨线程保持一致性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T12:00:43.143

上下文切换必须存储完整的机器状态，以便在挂起的线程恢复执行之前恢复它。机器状态包括处理器寄存器，但不包括处理器流水线。

如果您假设没有编译器重新排序，这意味着所有“即时”的硬件指令都必须在上下文切换（即中断）发生之前完成，否则它们会丢失并且不会被上下文切换存储机制。这与硬件重新排序无关。

在您的示例中，即使处理器交换了两条硬件指令“x=42”和“f=1”，指令指针已经在第二条之后，因此必须在上下文切换开始之前完成两条指令。如果不是这样，由于管道和缓存的内容不是“上下文”的一部分，它们就会丢失。

换句话说，如果导致 ctx 切换的中断发生在 IP 寄存器指向“f=1”之后的指令时，那么该点之前的所有指令都必须完成所有效果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-21T07:20:01.393

从我的角度来看，处理器一个接一个地获取指令。在您的情况下，如果在“x = 42”之前推测性地执行了“f = 1”，则这意味着这两条指令都已经在处理器的管道中。调度当前线程的唯一可能方法是中断。但是处理器（至少在 X86 上）会在处理中断之前刷新管道的指令。因此无需担心单处理器中的重新排序。*

# asp.net - 发布网站的发布版本

> ID：14182069
> 
> 赞同：0
> 
> 时间：2013-01-06T12:26:49.990
> 
> 标签：asp.net, versioning

我有一个在 Visual Studio 2010 中通过以下方式创建的网站：文件 > 新建 > 网站（它不是 Web 项目）。

我想发布我的网站的发布版本，但 VS 中没有“发布”模式，并且无法通过“构建”>“配置管理器”添加“发布”模式。

如何发布我的网站的发布版本？？（我无法将我的网站转换为 Web 项目）

**非常感谢您的回复。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:59:14.820

当您有一个网站项目并使用 VS 2010 时，顶部菜单栏中的某个菜单选项应该是一个名为 COPY WEBSITE 的选项（我认为它在网站菜单中）。

因此，您单击 WEBSITE > COPY WEBSITE 然后您将看到一个新选项卡出现，非常类似于 FTP 类型的界面，左侧是您的本地文件，右侧是远程服务器托管。

您可以使用 FTP 或直接上传，但最后一次我只能通过 FTP 使用它。（当然这可能是个人问题，不会影响其他任何人）。

不用说，如果您没有服务器来上传您的网站，那么它就不能像您所说的那样“发布”。

通常，服务器或主机要么在您自己的服务器上，要么在具有服务提供商的远程（付费）服务器上。

参考下面的照片......

区域 1 是您输入上传文件的服务器的 FTP 或 HTTP 地址的地方。Loacl-Files 这显示您完成的网站文件 Remote-Files 这显示服务器上的文件 Controls 这些按钮用于向服务器上传或下载文件

请注意，您必须拥有 FTP 用户名和密码才能使用 FTP/HTTP 传输，某些主机可能更喜欢您使用您的管理员帐户用户名和密码。

希望这有助于为您指明正确的方向

![在此处输入图像描述](../Images/d50c8cae1e4c0b228553901afca12bfc.png)

# php - 我需要直接修改 $sf_content 最好的解决方法是什么？

> ID：14182070
> 
> 赞同：0
> 
> 时间：2013-01-06T12:26:55.153
> 
> 标签：php, symfony-1.4

情况：默认情况下只有主页面可以访问，所有其他页面都需要登录用户。当一个模块在没有用户的情况下加载时，应该显示一个登录模板，并且没有模块。换句话说，`$sf_content`必须清空`layout.php`其中不是 100% 好的，因为布局中有逻辑。有没有优雅的方法？我觉得帮手也不好....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:12:10.663

完成我上面的评论：有不同的方法来覆盖布局。您可以使用以下方法：

```
 setLayout($name) 
 //or using foward, which forwards current action to a new one (without browser redirection)    
 forward($module, $action); 
```

在你的行动课内。如果您想修改过滤器内的布局，您可以使用与此类似的东西：

```
class yourFilter extends sfFilter {

    public function execute($filterChain) {
        if($yourConditionForOverrideTheDefaultLayout) {
            //here the syntax to change the layout from the filer   
            $actionStack = $this->getContext()->getActionStack();
            $actionStack->getFirstEntry()->getActionInstance()->setLayout('yourLayout');
        }
        $filterChain->execute();
    }
} 
```

为了避免布局文件中不必要的重复，您可以使用片段和部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:58:12.440

默认情况下，它是由`sfBasicSecurityFilter`过滤器为您完成的。你只需要一个好的配置。阅读Jobeet 教程的[这一部分](http://symfony.com/legacy/doc/jobeet/1_4/en/13?orm=Doctrine#chapter_13_application_security)。您应该使用`sfDoctrineGuardPlugin`（或者`sfGuardPlugin`如果您使用推进）进行用户身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T12:34:25.837

查看安全过滤器，这是在 symfony 中设计安全性的一种标准方式。您甚至可以使用您想要的功能实现您自己的 SecurityFilter 类。

[http://symfony.com/legacy/doc/reference/1_4/en/12-Filters#chapter_12_security](http://symfony.com/legacy/doc/reference/1_4/en/12-Filters#chapter_12_security)

# php - 获取与另一个表不匹配的所有行

> ID：14182072
> 
> 赞同：1
> 
> 时间：2013-01-06T12:27:02.973
> 
> 标签：php, mysql, sql-like, concat

我有一个棘手的问题。我有一张带有数字的表格：

*   37823782
*   37823782
*   37823782
*   38478934
*   90003922

另一个带有前缀的表：

*   378
*   3847
*   384
*   001

我想找到与最长前缀匹配的所有数字。我成功地使用了这段代码：

```
 $result = mysql_query("SELECT numbers FROM table1 GROUP BY numbers") or die ("Query error code 1"); 
while($row = mysql_fetch_array($result))
{

    $numbers =$row["numbers"];

    $result2 = mysql_query("SELECT * FROM table2 WHERE '".$numbers."' LIKE CONCAT(prefix, '%') ORDER BY CHAR_LENGTH(prefix) DESC LIMIT 1");
    while($row2 = mysql_fetch_array($result2))
    {

        // That's it

    }       

} 
```

现在我想简单地做相反的事情。我想找到所有不匹配任何前缀的数字。简而言之，在上面的示例中，我应该得到“90003922”。我想使用**NOT LIKE CONCAT (prefix, '%')**但它不起作用。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:34:56.103

你可以试试这个

```
SELECT * FROM table2 WHERE '".$numbers."' NOT LIKE 'prefix%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:50:40.663

单查询解决方案将如下所示。试试看

```
SELECT * FROM table1 LEFT JOIN table2 ON table1.numbers LIKE CONCAT(table2.prefix,'%') WHERE table2.prefix IS NULL 
```

# c - 发送 UDP 包（lwip、Cortex M3、Stellaris LM3S6965 评估板）

> ID：14182075
> 
> 赞同：1
> 
> 时间：2013-01-06T12:27:16.147
> 
> 标签：c, udp, cortex-m3, lwip

我正在使用 Cortex M3、Stellaris® LM3S6965 评估板。我正在尝试将 UDP 数据包发送到 NTP 服务器。我一直在寻找。

但它不起作用。有人能帮我吗？我认为回调函数没有被调用。

```
int main(void){
   sendUDP();
}

void sendUDP(void){

    //UDP

    struct ip_addr dstaddr;
    struct ip_addr srcaddr;
    struct udp_pcb * pcb;
    u16_t * dst_port;
    struct pbuf * pb;

    char str[512]="Test Sander";
    IP4_ADDR(&dstaddr,65,55,21,24); // time.windows.com
    IP4_ADDR(&srcaddr,192,168,1,10); // cortex
    dst_port = 123;

    pcb = udp_new();

    RIT128x96x4Enable(1000000);
    RIT128x96x4StringDraw("UDP CONNECT", 45, 45, 15);

    udp_bind(pcb,&srcaddr,&dst_port);
    udp_connect(pcb,&dstaddr,&dst_port);

    pb = pbuf_alloc(PBUF_TRANSPORT, 512, PBUF_REF);
    pb->payload = str;
    pb->len = pb->tot_len = 512;

    udp_sendto(pcb, &pb,&dstaddr,dst_port);
    //udp_send(pcb, &pb);

    udp_recv(pcb, RecvUTPCallBack, NULL);

    pbuf_free(pb);

    udp_remove(pcb);

}

// Function gets called when we recieve data
err_t RecvUTPCallBack(void *arg, struct udp_pcb *upcb, struct pbuf *p, struct ip_addr *addr, u16_t port){
    RIT128x96x4Enable(1000000);
    RIT128x96x4StringDraw("ENTERING CALLBACK", 40, 40, 11);

    volatile int totaal_lengte=0;
    totaal_lengte = p->tot_len;
    volatile int line=40;

    while(1){

        RIT128x96x4Enable(1000000);
        RIT128x96x4StringDraw(p->payload+1, 0, line, 15);
        line+=8;
        if(p->len != p->tot_len){
            p=p->next;
        }
        else break;
    }
    pbuf_free(p);
} 
```

程序完整代码： http: [//codepaste.net/uuy8sg](http://codepaste.net/uuy8sg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:49:57.110

我认为你有一个比赛条件。

您正在注册回调，但在发送数据包后立即退出您的`sendUDP()`函数，这反过来又导致`main()`结束。

您需要提供一些时间，可能需要数百毫秒才能收到响应，而您永远不会等待它发生。

我不熟悉 eCosPro，它似乎是您正在使用的操作系统，但应该有一些“睡眠”调用，它只会让您的程序空闲并让系统有机会监听响应并触发回调。

另外，我认为您需要调用更多[初始化函数](http://www.ecoscentric.com/ecospro/doc/html/ref/lwip-api-raw-init.html)，例如`udp_init()`设置 UDP 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-08T15:20:47.827

我知道这是一个非常古老的问题，但是......

`dst_port`不应该是指针。

```
//u16_t * dst_port;
u16_t dst_port;
dst_port = 123; 
```

这可能是导致问题的行：

```
udp_bind(pcb,&srcaddr,&dst_port); 
```

它应该是

```
udp_bind(pcb,&srcaddr, dst_port); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-12T06:58:31.927

更改自：

```
udp_bind(pcb,&srcaddr,&dst_port);
udp_connect(pcb,&dstaddr,&dst_port); 
```

至：

```
udp_bind(pcb,&srcaddr,dst_port);
//udp_connect(pcb,&dstaddr,dst_port); 
```

# .htaccess - .htaccess 并在 PHP 中转发 GET/POST 参数

> ID：14182077
> 
> 赞同：1
> 
> 时间：2013-01-06T12:27:28.130
> 
> 标签：.htaccess, mod-rewrite

我有一个问题，.htaccess 没有转发 GET/POST 参数..

这是我的 .htaccess ：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)/(.+)$
RewriteRule .* index.php?a=%1&b=%2 [L] 
```

但是当我做类似的事情时：

```
mywebsite.com/url1/url2?action=delete&id=2 
```

它把我重定向到：

```
mywebsite.com/index.php?a=url1&b=url2 
```

所以它删除了**action=delete&id=2**而我在 $_GET 中什么都没有，有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:31:34.723

使用`QSA`（如查询字符串追加）

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)/(.+)$
RewriteRule .* index.php?a=%1&b=%2 [L,QSA] 
```

# c - 添加到现有文件和标题的未定义引用

> ID：14182078
> 
> 赞同：1
> 
> 时间：2013-01-06T12:27:28.980
> 
> 标签：c, mingw, header-files, undefined-reference

首先，我知道这被问了一千次。但是我打开了一些，每个人都忘记了编译/链接它。无论如何，我在带有标题和文件的单独文件中创建了一个链接列表，它工作正常，但是我尝试向它添加一个新函数，但后来我对“函数”有未定义的引用。这是来源：

列表.c

```
#include "list.h"

struct node
{
    item_t x;
    struct node *next;    
};
struct node* root;

//Window hider extension
void ToggleVisibleList(HWND currentHwnd)
{
    if (root == 0)
        return;

    struct node *conductor = root;
    while (conductor != 0)
    {
        HWND hwnd = (HWND)conductor->x;
        ShowWindow(hwnd, IsWindowVisible(hwnd) ? SW_HIDE : SW_SHOW);

        conductor = conductor->next;
    }    

    ShowWindow(currentHwnd, IsWindowVisible(currentHwnd) ? SW_HIDE : SW_SHOW);
}

//...Rest of the file 
```

列表.h

```
#ifndef LIST_H
#define LIST_H

#include <stdlib.h>
#include <windows.h>

//Window hider extension
void ToggleVisibleList(HWND currentHwnd);

//.. rest of the header 
```

主程序

```
#include <windows.h>
#include <stdio.h>
#include <commctrl.h>

#include "list.h"

HWND currentHwnd;

//..

HHOOK hookKeyboard;
LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if (nCode >= 0)
    {
        if (wParam == WM_KEYDOWN)
        {
            KBDLLHOOKSTRUCT* hookStruct = (KBDLLHOOKSTRUCT*)lParam;
            if (hookStruct->vkCode == 'Z' && GetAsyncKeyState(VK_LCONTROL))
            {
                ToggleVisibleList(currentHwnd);
            }
        }
    }

    CallNextHookEx(hookKeyboard, nCode, wParam, lParam);
}

//..Rest of file 
```

我使用 Mingw 编译（操作系统：Windows 8 64 位）：

```
gcc -o hider.exe main.c list.c -mwindows

C:\Users\...\AppData\Local\Temp\cc6sCa17.o:main.c:(.text+0x4bc): undefined reference to `ToggleVisibleList'
collect2: ld gaf exit-status 1 terug
//Translation: ld return exit-status 1 
```

编辑：尝试交换文件顺序。

我希望我没有重复一个问题，我不这么认为，因为我首先尝试了 20 个问题。（和谷歌。）问候

**答：重新启动我的计算机并编译。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:08:39.623

黑暗中的总射击答案：

我怀疑这**可能**有效（按编译顺序交换 list.c 和 main.c）

```
gcc -o hider.exe list.c main.c -mwindows 
```

我建议这样做是因为与库的链接与 gcc 具有相似的行为。但是我从来没有观察到文件顺序的这个问题。

从 gcc 手册页（关于**-l library**）

> 在命令中编写此选项的位置有所不同；链接器按照指定的顺序搜索和处理库和目标文件。因此，foo.o -lz bar.o 在文件 foo.o 之后但在 bar.o 之前搜索库 z。如果 bar.o 引用 z 中的函数，则可能不会加载这些函数。

# sql - 在 PostgreSQL 中使用外键删除行

> ID：14182079
> 
> 赞同：114
> 
> 时间：2013-01-06T12:27:34.323
> 
> 标签：sql, postgresql, foreign-keys, cascading-deletes

我想删除包含外键的行，但是当我尝试这样的事情时：

```
DELETE FROM osoby WHERE id_osoby='1' 
```

我得到这个声明：

> 错误：表“osoby”上的更新或删除违反了表“kontakty”上的外键约束“kontakty_ibfk_1”详细信息：键（id_osoby）=（1）仍然从表“kontakty”中引用。

如何删除这些行？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-01-06T12:55:45.417

要自动执行此操作，您可以使用 定义外键约束`ON DELETE CASCADE`。
我引用了[外键约束的手册](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-FK)：

> `CASCADE`指定当引用的行被删除时，引用它的行也应该被自动删除。

像这样查找当前的 FK 定义：

```
SELECT pg_get_constraintdef(oid) AS constraint_def
FROM   pg_constraint
WHERE  conrelid = 'public.kontakty'::regclass  -- assuming public schema
AND    conname = 'kontakty_ibfk_1'; 
```

然后在如下语句中添加或修改该`ON DELETE ...`部分（保留其他所有内容）：`ON DELETE CASCADE`

```
ALTER TABLE kontakty
   DROP CONSTRAINT kontakty_ibfk_1
 , ADD  CONSTRAINT kontakty_ibfk_1
   FOREIGN KEY (id_osoby) REFERENCES osoby (id_osoby) ON DELETE CASCADE; 
```

没有`ALTER CONSTRAINT`命令。在单个`ALTER TABLE`语句中删除并重新创建约束以避免并发写访问可能出现的竞争条件。

显然，您需要特权才能这样做。该操作`ACCESS EXCLUSIVE`在 table上锁定`kontakty`并`SHARE ROW EXCLUSIVE`在 table 上锁定`osoby`。

如果您不能`ALTER`使用该表，则剩下的选项是手动（一次）或触发器`BEFORE DELETE`（每次）删除。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-06T12:32:01.523

如果外键仍然引用另一个表，则不能删除它。首先删除引用

```
delete from kontakty
where id_osoby = 1;

DELETE FROM osoby 
WHERE id_osoby = 1; 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2016-03-09T01:34:24.063

不应将此作为一般解决方案推荐，但对于一次性删除数据库中非生产或活动使用的行，您可以暂时禁用相关表上的触发器。

就我而言，我处于开发模式，并且有几个表通过外键相互引用。因此，删除它们的内容并不像先从一个表中删除所有行那么简单。所以，对我来说，删除它们的内容很好，如下所示：

```
ALTER TABLE table1 DISABLE TRIGGER ALL;
ALTER TABLE table2 DISABLE TRIGGER ALL;
DELETE FROM table1;
DELETE FROM table2;
ALTER TABLE table1 ENABLE TRIGGER ALL;
ALTER TABLE table2 ENABLE TRIGGER ALL; 
```

您应该能够根据需要添加 WHERE 子句，当然要小心避免破坏数据库的完整性。

[在http://www.openscope.net/2012/08/23/subverting-foreign-key-constraints-in-postgres-or-mysql/](http://www.openscope.net/2012/08/23/subverting-foreign-key-constraints-in-postgres-or-mysql/)上有一些很好的相关讨论

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2016-10-18T14:19:35.947

很久没问这个问题了，希望能帮到你。因为您无法更改或更改 db 结构，所以您可以这样做。根据 postgresql[文档](https://www.postgresql.org/docs/9.1/static/sql-truncate.html "PostgreSQL 9.1")。

**TRUNCATE** -- 清空一个表或一组表。

```
TRUNCATE [ TABLE ] [ ONLY ] name [ * ] [, ... ]
    [ RESTART IDENTITY | CONTINUE IDENTITY ] [ CASCADE | RESTRICT ] 
```

**描述**

TRUNCATE 从一组表中快速删除所有行。它与每个表上的非限定 DELETE 具有相同的效果，但由于它实际上并不扫描表，因此速度更快。此外，它会立即回收磁盘空间，而不需要后续的 VACUUM 操作。这在大表上最有用。

* * *

截断表 othertable，并级联到通过外键约束引用 othertable 的任何表：

```
TRUNCATE othertable CASCADE; 
```

同样，也重置任何关联的序列生成器：

```
TRUNCATE bigtable, fattable RESTART IDENTITY; 
```

截断并重置任何关联的序列生成器：

```
TRUNCATE revinfo RESTART IDENTITY CASCADE ; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-06T12:30:31.807

这意味着在表`kontakty`中有一行引用了`osoby`要删除的行。您必须先删除该行或对表之间的关系设置级联删除。

波沃兹尼亚！

# windows - 从可执行文件创建一个 Windows 服务

> ID：14182083
> 
> 赞同：0
> 
> 时间：2013-01-06T12:28:39.060
> 
> 标签：windows, service

我正在寻找一种从不是服务本身的可执行文件创建 Windows 服务的方法。我是否需要包装服务来响应调用非服务进程的 Windows 服务调用？

**注意：**我熟悉 SC.EXE 以及如何提供服务。不幸的是，当启动由非服务可执行文件创建的服务时，我收到 1053 超时错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:32:59.443

尝试看看如何使用**srvany.exe**，它应该是一个允许将应用程序作为服务启动的工具。

# ios - 无低音 iOS 音频输入 - 通过启动 JamUp 应用程序*首先*修复。为什么？

> ID：14182084
> 
> 赞同：3
> 
> 时间：2013-01-06T12:28:40.140
> 
> 标签：ios, audio, response, recording, bass

我的实时循环 iOS 应用程序的用户最近向我报告了一些令人困惑的事情：他刚刚用新的 iPod Touch 替换了他的第四代 iPod Touch，突然间，他在使用我的应用程序（和大多数其他应用程序）时的低音响应与许多不同的外部模拟音频接口（包括 iRig）已经消失。

展品 A，低音出现：[http](http://cl.ly/3j261Z0H2v2U)
://cl.ly/3j261Z0H2v2U 展品 B，低音消失：[http ://cl.ly/1t3z0s0P0208](http://cl.ly/1t3z0s0P0208)

然而，最奇怪的是：他发现如果他在启动我的应用程序（以及所有其他出现相同问题的应用程序）之前启动吉他效果处理器 JamUp，贝司就会恢复。

相反，如果他启动我的应用程序，然后启动 JamUp，JamUp 也会遇到无低音问题。

我和 JamUp 的人谈过，他们和我一样感到困惑。

有没有人有任何关于为什么会发生这种情况的理论，以及可以做些什么？还有人注意到它吗？

# asp.net - Asp.net：使用 c# 上传目录

> ID：14182087
> 
> 赞同：1
> 
> 时间：2013-01-06T12:28:51.893
> 
> 标签：asp.net, c#-4.0, file-upload, uploader

我现在有一个解决方案，可以通过 JavaScript 和 jQuery 使用（**拖放**）技术上传多个文件，但我需要找到一种方法来上传**文件夹**，其中所有内容都是**Google 驱动器**之类的内容。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:34:00.227

不幸的是，您不能这样做，只能使用浏览器。

您将不得不为此使用自定义客户端。

但一个简单的方法将是`Ask the user to ZIP the folder and upload the zip using the file-upload control`。然后在服务器端，您可以解压缩并阅读内容。

# .net - 实体框架数据上下文中没有带有连接字符串的构造函数

> ID：14182091
> 
> 赞同：16
> 
> 时间：2013-01-06T12:29:10.477
> 
> 标签：.net, entity-framework-5

我正在`Entity Framework 5.0`为我的项目使用。我在互联网上查看，我看到对于实体框架数据上下文，有另一个构造函数，它有一个用于连接字符串的字符串参数。

在我生成的`data context`我没有这样的构造函数。我查看了基础`DbContext`，它有这样一个构造函数。

生成的代码错了吗？我从数据库生成了代码。这可能是原因吗？

结果我可以编辑代码生成模板文件来添加新的构造函数。现在我添加了新的构造函数。该文件是您的 edmx 模型下的 MyDataContext.tt 文件。在那里，您将 c# 代码与模板代码混合在一起。您可以从那里复制无参数构造函数并将其粘贴到下面。然后您可以更改它并向其添加一个字符串参数，并将该参数传递给 DbContext 构造函数，如下所示：base(myString)。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-06T12:36:58.933

您可以根据需要添加一个。

检查生成的文件并添加一个重载的构造函数。

```
public YourContext(string connectionStr)
        : base(connectionStr)
    {

    } 
```

不过，在部分类中定义它可能更好，因为每一代都需要您每次手动添加它。

# ruby - 在根 url 显示分类而不是产品？

> ID：14182096
> 
> 赞同：1
> 
> 时间：2013-01-06T12:29:41.803
> 
> 标签：ruby, ruby-on-rails-3, spree

只是失去了关于在 spree_application 布局主体中显示分类而不是产品的正确方法的想法。

`spree/home/index.html.erb`模板呈现，`spree/shared/_products`但我想`spree/taxons/show`为每个分类进行呈现。难怪，`spree/home/index.html.erb`错过分类学上下文所以`render :template => 'spree/taxons/show'`对`@taxon`.

知道如何简单地在主页上显示分类而不是产品，最好使用 spree/taxons/show view 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:31:02.640

如果要覆盖此页面的内容，则应覆盖`spree/home/index.html.erb`应用程序视图目录中的模板。至于准备内容，我建议为操作编写一个装饰器`HomeController`并覆盖该`index`操作，如下所示：

```
 class HomeController < Spree::StoreController
   def index
     # code goes here
   end
 end 
```

# jquery - 有没有一种方法可以使用适用于所有浏览器的 jQuery 设置不透明度？

> ID：14182098
> 
> 赞同：0
> 
> 时间：2013-01-06T12:30:01.840
> 
> 标签：jquery, css

我有以下内容：

```
$titleSpan.css('visibility','visible');
$titleSpan.css('visibility','hidden'); 
```

这使我的文本显示可见或隐藏。

但是我想改变它，使文本的可见度为 50%。我读到 IE 存在问题，它的工作方式不同。因此，我想知道 jQuery 是否有设置它的方法。

如何更改这两条 CSS 行，以便第一条使文本完全可见，第二条使其不透明度为 50%？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:33:05.467

您可以使用[.fadeTo()](http://api.jquery.com/fadeTo/)方法：

```
$(elem).fadeTo(0, .5); 
```

# jquery - 通过 jquery 获取 json 编码数据属性的正确 CSS 语法

> ID：14182102
> 
> 赞同：0
> 
> 时间：2013-01-06T12:30:33.060
> 
> 标签：jquery, css

我需要在 data-people 中获取一个 json 编码数据：

```
<ul>
  <li data-test="one" data-people='{"name" : "Paul", "color" : "black"}'>Paul</li>
  <li data-test="two" data-people='{"name" : "John", "color" : "blond"}'>John</li>
  <li data-test="three" data-people='{"name" : "Jane", "color" : "black"}'>Jane</li>
</ul> 
```

通过数据测试获取非常简单（只是示例）：

```
$('ul li[data-test="two"]').show(); 
```

现在我想用金发碧眼的数据人展示 ul li （忽略只存在于上面示例中的数据测试）。

我在下面进行了测试，但这并没有按预期工作：

```
$('ul li[data-people="{"color": "blond"}"]').show(); 
```

我的意思不是要获得类似的颜色值：`$('ul li').data('people').color`，而是要在对象内部*执行*正确的 CSS 语法。

非常感谢任何提示。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:31:40.620

`*=`除了使用("attribute contains") 选择器之外，您不能仅使用选择器以任何干净的方式执行此操作。只有当 JSON*完全*包含该子字符串时，那个才有效 - 删除之前的空格`:`，它将停止工作。

```
$('ul li[data-people*=\'"color" : "blond"\']').show(); 
```

您可能*真正*想要的是`.filter()`：

```
$('ul li[data-people]').filter(function() {
    return $(this).data('people').color == 'blond';
}).show(); 
```

这样，您可以使用（快速）CSS 选择器引擎仅获取相关元素（具有`data-people`属性的元素），然后使用回调函数过滤结果集。

# php - 测试在 windows/wamp 上运行 cron 作业的 magento 模块

> ID：14182103
> 
> 赞同：0
> 
> 时间：2013-01-06T12:30:39.653
> 
> 标签：php, windows, magento, cron, wamp

我有一台运行 centOS 的主机。我的网站基于 Magento 并且是实时的。

我创建了一个每分钟运行一个 cron 作业的模块。

我的问题是：我在 Windows（wampserver 2.0）上运行我的本地主机。在将我的模块上传到实时主机之前，我想在本地主机上对其进行测试。是否可以在 Windows 上测试我的 cron 作业运行模块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T16:31:58.187

通过说您的模块“运行”一个 cron 作业，您可能的意思是添加了一个 cron 作业。为了测试它，您不需要 cron 在您的 Windows localhost 上运行。`cron.php`您可以通过从 Magento 安装的根目录运行手动触发所有 Magneto cron 作业。您可以从这样的浏览器中执行此操作`http://localhost/magento_dir/cron.php`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:35:59.637

您至少有 2 个选项：

1.  您可以使用 Windows 调度程序调用脚本。
2.  您可以像在 Linux 中一样安装 Cygwin 并定义 cron 任务。更多信息在这里：[如何在 Windows 上的 Cygwin 中运行 crontab？](https://stackoverflow.com/questions/707184/how-do-you-run-a-crontab-in-cygwin-on-windows)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-26T23:04:00.373

Magento 2.0.2 打开命令提示符

写

```
cd c:\xampp\htdocs\magento202\bin
php magento cron:run
php magento cron:run
cd C:\xampp\htdocs\magento202\update
php cron.php
cd c:\xampp\htdocs\magento202\bin
php magento setup:cron:run 
```

用你的替换目录'magento202'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T18:30:28.283

您可以使用 schtasks.exe 创建新的计划任务以根据需要运行。

```
schtasks /create /sc minute /mo 1 /tn "Cron" /tr "php -f C:\wamp\www\pro\run.php" 
```

您可以在我的博客的以下链接中找到有关命令和用法的更多信息。

[http://purusothaman.me/computers/running-cron-in-windows/](http://purusothaman.me/computers/running-cron-in-windows/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-12T02:31:18.990

如果使用 Windows 2008 及更高版本，请进入管理 MMC 并访问配置下的任务计划程序。对于 1.8，Mage 必须在您的声明中添加 -mdefault 1。cron 文件中有更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-15T17:06:03.953

“你可以从像这样的浏览器[http://localhost/magento_dir/cron.php](http://localhost/magento_dir/cron.php) ” > 你会拒绝访问 -> 去编辑 .htaccess 和注释行

```
###########################################
## Deny access to cron.php
##   <Files cron.php>

############################################
## uncomment next lines to enable cron access with base HTTP authorization
## http://httpd.apache.org/docs/2.2/howto/auth.html
##
## Warning: .htpasswd file should be placed somewhere not accessible from the web.
## This is so that folks cannot download the password file.
## For example, if your documents are served out of /usr/local/apache/htdocs
## you might want to put the password file(s) in /usr/local/apache/.
#AuthName "Cron auth"
#AuthUserFile ../.htpasswd
#AuthType basic
#Require valid-user
############################################
##     Order allow,deny
##   Deny from all
##</Files> 
```

# ruby-on-rails - 设置为非活动而不是删除

> ID：14182108
> 
> 赞同：0
> 
> 时间：2013-01-06T12:31:13.770
> 
> 标签：ruby-on-rails

是否可以将对象设置为非活动状态而不是在导轨中删除它们？因为我几乎在我的每个模型中都需要这个，所以有一个中心点会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:34:40.657

看看[ActsAsParanoid](https://github.com/goncalossilva/rails3_acts_as_paranoid) gem。

# objective-c - 如何检测for循环的真正结束？

> ID：14182112
> 
> 赞同：-2
> 
> 时间：2013-01-06T12:31:24.963
> 
> 标签：objective-c, for-loop

我在方法中包含以下 for 循环：

```
—(void)_va1idateUsers:(NSArray *)users withCurrentAccount:(ACAccount *)account comp1etionB1ock:(void (“)(TSCSpamUser *user, NSError *error))comp1etionBlock; {

    for(TSCSpamUser *userID in users) {

        NSString *theID = (NSString*)userID;
        NSURL *ur1 = [NSURL URLwith5tring:[NSString stringWithFormat:@"https://api.twitter.com/1/users/show.json?user_id=%@&inc1ude_entities=true", theID]];
        SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                                requestMethod:5LRequestMethodGET
                                                          URL:ur1
                                                   parameters:nil];
        [request setAccount:account];
        [request performRequestwithHand1er:*(NSData *responseData, NSHTTPURLResponse *ur1Response, NSError *err0r) {

            if ([urlResponse statusCode] == 200) {
                TSCSpamUser *user = [[TSCSpamUser a11oc] initwithTwitterID:theID];

                user.level = 0;

                NSError *jsonError = nil;
                id jsonResu1t = [NSJSONSeria1ization JSON0bjectWithData:responseData options:0 error:&jsonError];
                if (jsonResu1t != nil) { ...... }
                else {
                    user.level = 0;
                }
            }
        }];

    }
} 
```

我需要检测这个 for 循环的结束 - 而不仅仅是 for 循环的结束。当 for 循环开始最后一次迭代时调用完成块，而不是在它完成后调用。我需要确保 for 循环中的所有内容也都已完成。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:42:16.273

在您的情况下，我将使用索引遍历用户数组，然后仅针对最后一个索引，在您的完成块中执行一个分支，例如：

```
for (NSUInteger index = 0; index < [users count] ; ++index) {
   TSCSSpamUser* spamID = [users objectAtIndex:index];
   ...

   [request performRequestWithHandler.... : {
       ...
       if (index == [users count]-1) {
          [self loopFullyExecuted];
       }
    ...
} 
```

Where`loopFullyExecuted`封装了循环完全完成后你需要做的事情（包括完成块）。

编辑：如果您希望在 for 循环中的每次迭代中您的程序“等待”完成块完全执行，那么方法需要完全不同。

你需要的是定义一个方法来处理一个`userID`并且你最终调用 performRequest 的地方：

```
-(void) processUserID:(NSUInteger)index {
   TSCSSpamUser* spamID = [users objectAtIndex:index];
       ...
       [request performRequestWithHandler.... : {
       ...
           if (index < [users count])
              [self processUserID:index+1];
        }
    ...
} 
```

performRequest 完成块将开始下一次迭代，如您所见；所以下一个元素（如果有的话）只在前一个元素之后处理。

您通过调用以下命令开始整个过程​​：

```
[self processUserID:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:42:57.890

这听起来像是调度组的一个很好的用例。在你开始你的循环之前，你使用创建一个新的调度组`dispatch_group_create`。在您的循环中，您`dispatch_group_enter`为您提出的每个请求输入组 ()，并在完成块中为您离开该组 ( `dispatch_group_leave`) 的请求输入组。在您的循环之后，您立即调用`dispatch_group_notify`以安排您的完成块，一旦您的所有请求完成，该块就会被调用。

```
dispatch_group_t group = dispatch_group_create();

for (TCSpamUser *userID in users) {

    dispatch_group_enter( group );

    // ...
    [request performRequestWithHandler: ^ (...) {
        // ...
        dispatch_group_leave( group );
    }];
}

dispatch_group_notify( group, dispatch_get_main_queue(), ^{
    dispatch_release( group );
    completionBlock( user, error );
}); 
```

只要确保每次`dispatch_group_enter`调用对应的`dispatch_group_leave`.

使用这种方法，您不必担心请求完成的顺序。如果您在最后一个用户的请求处理程序块中调用完成块，您可能会过早地调用它，例如，如果倒数第二个请求比最后一个请求花费更长的时间（异步执行总是可能发生）。

# assembly - 汇编 .byte 数组

> ID：14182113
> 
> 赞同：0
> 
> 时间：2013-01-06T12:31:26.110
> 
> 标签：assembly, mips, gnu-assembler

我已经使用定义了一个字节数组

```
.data
letters  : .byte 0:26 
```

我有一些问题：1）阵列中的第一个单元格是否可供使用，还是用于其他目的？2) 如何加载数组的 6 个（例如）单元格？

我考虑过使用：

```
la $t0, letters  # load the array address to $t0
addi $t0, $t0 , 6  # update $t0 in order to get the 6th cell
lb $t1, $t0        # load byte to $t1 
```

这种方法有效还是我应该以其他方式进行？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:38:25.400

1) 是的，它是可用的 2) 就像在 C 中一样，第一个单元格的偏移量为零。所以这样你实际上会指向第七个单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:49:33.173

您的代码几乎是有效的，您只是缺少一对用于间接寻址的括号，如下所示：

```
lb $t1, ($t0) # load byte to $t1 
```

此外，地址可以包含一个常量偏移量，因此在您的情况下，您不必单独添加它：

```
lb $t1, 6($t0) # load byte to $t1 
```

请注意，这只适用于常量。如果您想按另一个寄存器索引，则必须像以前一样进行添加。

弗拉德已经回答了另一部分。

# java - 将数据添加到泛型？扩展列表

> ID：14182117
> 
> 赞同：5
> 
> 时间：2013-01-06T12:31:44.467
> 
> 标签：java, generics

> **可能重复：**
> [Java ArrayList 的？扩展接口](https://stackoverflow.com/questions/14164501/java-arraylist-of-extends-interface)

有这个代码：

```
public static class B1 {}
public static class B2 extends B1 {}
public void fun() {
    List<? extends B1> l3 = new ArrayList<>();
    l3.add(new B2());
} 
```

编译错误：

```
java: no suitable method found for add(Main.B2)
    method java.util.List.add(int,capture#1 of ? extends Main.B1) is not applicable
      (actual and formal argument lists differ in length)
    method java.util.List.add(capture#1 of ? extends Main.B1) is not applicable
      (actual argument Main.B2 cannot be converted to capture#1 of ? extends Main.B1 by method invocation conversion) 
```

我想这`? extends B1`意味着*从 B1 扩展的任何类型*。B2 类型似乎是从 B1 扩展而来的，那么为什么不能将这种类型的对象添加到列表中，以及如何使其可以添加呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T12:33:54.777

> 我想这`? extends B1`意味着*从 B1 扩展的任何类型*。

不，它的意思是“从 B1 扩展的特定但未知的类型”。由于具体类型未知，编译器无法强制执行，因此类似的`add`操作不起作用。^*

请参阅[通配符教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)。

> 如何制作它以便可以添加？

基本上，不要为此使用通配符。你可能想要这个：

```
List<B1> l3 = new ArrayList<B1>(); 
```

* * *

[* 好吧，它们确实有效，但仅适用于`null`（以及其他一些情况，请参阅下面的@Marko 评论）。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T12:35:00.643

`? extends B1`表示：*某种类型是或扩展 B1，但我们不知道是哪一个*。所以列表可以是 a `List<B1>`、 a`List<B2>`或 a `List<B3>`（假设 B3 也扩展了 B1）。而且您不想将 B2 添加到 a `List<B3>`，因此编译器会禁止它。

你可能想要一个`List<B1>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T12:34:44.717

所以你想要一个`B1`我猜想的类型的元素列表。的每个*孩子*都`B1`可以保存在这样的列表中`B1`：

```
public static class B1 {}
public static class B2 extends B1 {}
public void fun() {
    List<B1> l3 = new ArrayList<>();
    l3.add(new B2());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T12:35:30.463

让 B1 和 B2 实现相同的接口，比如 B（甚至可以为空），然后声明列表 <B> 。您将能够毫无问题地添加和删除成员。

直接继承的主要问题可以概括为：

```
class B1 {};
class B2 extends B1{};

ArrayList<B2> list;

addMembers(list); // Error here

void addMembers(ArrayList<B1> list) {
  list.add(new B1());
} 
```

在这里，我们声明了一个 B2 列表，并将其作为参数传递给需要 B1 列表的方法。由于每个 B2 也是 B1，所以这应该可以工作，这很直观。但是现在，在这种方法中，将 B1 也添加到传递列表中变得合法。当方法返回时，集合将被破坏，其中包含声明不允许的成员 B1。

为了防止这种情况，编译器将不允许`addMembers`使用“兼容继承类型”的集合进行调用。我发现这是一个非常讨厌的限制，可以通过使用建议的接口轻松解决。使用通配符也能做到这一点相当复杂。你以为你会写`? extends B1`吗？

```
void test() {
    ArrayList<? extends B1> list = new ArrayList();
    list.add(new B1()); // Error here
    list.add(new B2()); // Error here
    test2(list);
}

void test2(ArrayList<? extends B1> list) {
    list.add(new B1()); // Error here, the collection is read only.
} 
```

这就是我说的，这些通配符不值得付出痛苦。你也可以写`ArrayList<? extends java.lang.Object>` ，甚至`ArrayList< ? >` ，不会有帮助，这样的声明仍然使集合只读。

因此，我会说，更好

```
interface B {};
class B1 implements B {};
class B2 extends B1 implements B {};  

ArrayList<B> list = new ArrayList<B>();
list.add(new B1());
list.add(new B2());
test2(list);

void test2(ArrayList<B> list) {
    list.add(new B1());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T14:21:45.217

由于这个问题已经得到解答，但我也想在这里添加一些有价值的东西。正如大家所建议的那样

```
List<B1> l3 = new ArrayList<B1>(); 
```

那是正确的。但是要了解逻辑，您还应该尝试以下不会给出任何错误的逻辑。

```
public void fun() {
    List<? extends B1> l3 = new ArrayList<>();
    List list1= new ArrayList();
    list1.add(Element1 extending B1);
    list1.add(Element2 extending B1);
    l3=list1;
}

 or you can also try
public void fun() {
        List<? extends B1> l3 = new ArrayList<>();
        List<B1> list1= new ArrayList();
        list1.add(B1 element);
        l3=list1;
    } 
```

因此，您的以下陈述是正确的，但对于分配而不是对于 add 方法。简而言之，添加操作必须是真正未知的类型（如 null），但

> ? extends B1 表示从 B1 扩展的任何类型。

# c++ - 堆栈溢出 C++

> ID：14182127
> 
> 赞同：0
> 
> 时间：2013-01-06T12:32:32.717
> 
> 标签：c++, stack, stack-overflow

所以我'，试图解决一个任务。已经有代码，但是系统输出，“堆栈溢出”我是 C++ 新手，我的英语不好，所以我很抱歉误解 =)

```
 #include <iostream> 

using namespace std;

int main (){
    int n;
    int x;
    int k = 0; // счетчик для рабочего массива
    int a [200000];
 scanf("%d\n",&n);   

 for (int i = 0; i< n; ++i){
     std::cin >> x;
     if (x > 0){
             k++;
             a[k] = x;
           }else if(x == 0){
                 for (int q = 1; q <= k; ++q){ // копирование 
                          a[k+q] = a[q];
                     }
                 k *= 2;
                 }else{
                          printf("%d %d\n",a[k],k);
                          k--;
                        }
     }
     system("pause");

} 
```

看起来算法工作正常，但唯一的问题是堆栈。多谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:35:45.790

**根本原因：**

正如您猜对的那样，堆栈是有限的，并且您的分配似乎足够大，可以通过它来满足。这不是语言语法错误，因此不保证编译错误，但会导致运行时异常，从而导致崩溃。

**解决方案1：**

您可以使数组全局化，全局数组的分配不在堆栈上，因此它应该适合您：

```
int a [200000];

int main()
{
   .....
} 
```

**解决方案2：**

你可以使用一个`std::vector`

**解决方案3：**

您可以通过`new`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T12:37:05.073

语句`int a [200000];`尝试在堆栈上分配超出容量的内存，从而导致堆栈溢出。有些人建议应该动态分配大于几千字节的数组，而不是作为局部变量。请参考维基百科：[http ://en.wikipedia.org/wiki/Stack_overflow#Very_large_stack_variables](http://en.wikipedia.org/wiki/Stack_overflow#Very_large_stack_variables)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:42:06.450

我可以看到 3 个变化。
1 - 在堆栈上分配的内存超出了堆栈的处理能力。
2 - k 应始终指向下一个可用空间，因此您需要更新而不是增加它。
3 - 索引都是从“0”开始的，对于“q”来说。

固定代码：

```
#include <iostream> 

using namespace std;

int a [200000];

int main (){
    int n;
    int x;
    int k = 0; // счетчик для рабочего массива
 scanf("%d\n",&n);   

 for (int i = 0; i< n; ++i){
     std::cin >> x;
     if (x > 0)
     {
             a[k] = x;
             k++; //<< change 1
     }
     else if (x == 0)
     {
         for (int q = 0; q <= k; ++q) //<<change 2
         { // копирование 
             a[k+q] = a[q];
         }
         k *= 2;
     }
     else 
     {
         printf("%d %d\n",a[k],k);
         k--;
                        }
 }
 system("pause");
} 
```

# r - 绘制一维数据的置信区间？

> ID：14182128
> 
> 赞同：-4
> 
> 时间：2013-01-06T12:32:39.167
> 
> 标签：r, statistics

如果我的所有数据都是一长串逗号分隔值（持续时间），那么 R 可以通过

```
summary(dat) 
```

**问题**

R 也可以用置信区间绘制数据图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:36:56.710

正如第一场谷歌比赛所述，您可以尝试这样做：

```
n<-50
x<-sample(40:70,n,rep=T)
y<-.7*x+rnorm(n,sd=5)
plot(x,y,xlim=c(20,90),ylim=c(0,80))
mylm<-lm(y~x)
abline(mylm,col="red")
newx<-seq(20,90)
prd<-predict(mylm,newdata=data.frame(x=newx),interval = c("confidence"), 
level = 0.90,type="response")
lines(newx,prd[,2],col="red",lty=2)
lines(newx,prd[,3],col="red",lty=2) 
```

当然这是一种可能性另一个例子是：

```
x <- rnorm(15)
y <- x + rnorm(15)
new <- data.frame(x = seq(-3, 3, 0.5))

pred.w.clim <- predict(lm(y ~ x), new, interval="confidence")

# Just create a blank plot region with axes first. We'll add to this
plot(range(new$x), range(pred.w.clim), type = "n", ann = FALSE)

# For convenience
CI.U <- pred.w.clim[, "upr"]
CI.L <- pred.w.clim[, "lwr"]

# Create a 'loop' around the x values. Add values to 'close' the loop
X.Vec <- c(new$x, tail(new$x, 1), rev(new$x), new$x[1])

# Same for y values
Y.Vec <- c(CI.L, tail(CI.U, 1), rev(CI.U), CI.L[1])

# Use polygon() to create the enclosed shading area
# We are 'tracing' around the perimeter as created above
polygon(X.Vec, Y.Vec, col = "grey", border = NA)

# Use matlines() to plot the fitted line and CI's
# Add after the polygon above so the lines are visible
matlines(new$x, pred.w.clim, lty = c(1, 2, 2), type = "l", col =  
c("black", "red", "red")) 
```

[示例 1](http://stat.ethz.ch/pipermail/r-help/2007-November/146285.html)

[示例 2](http://r.789695.n4.nabble.com/plotting-confidence-intervals-td897422.html)

# python - .format 中的花括号

> ID：14182129
> 
> 赞同：2
> 
> 时间：2013-01-06T12:32:46.443
> 
> 标签：python, string, format

我想打印以下内容

```
\printCodeFromFile[5]{7}{myfile.tex} 
```

我用以下代码构造

```
outputStr = "\\printCodeFromFile[{startline}]{{endline}}{{name}}".format(startline=lineStart, endline=lineEnd, name=filename) 
```

不幸的是，这是

```
 \printCodeFromFile[5]{endline}{name} 
```

那么我将如何转义或插入花括号，以便打印它们并插入变量？我在文档中找不到任何提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T12:34:04.533

将要保留的花括号加倍：

```
outputStr = "\\printCodeFromFile[{startline}{{{endline}}}{{{name}}}]".format(startline=lineStart, endline=lineEnd, name=filename) 
```

现在，您已经将替换模式 ( and ) 周围的大括号 ( `{{`and ) 加倍了。`}}``{endline}``{name}`

# javascript - 如何修改 text('TEXT').appendTo('body'); 中的 TEXT 样式

> ID：14182141
> 
> 赞同：0
> 
> 时间：2013-01-06T12:34:22.240
> 
> 标签：javascript, css, hyperlink, galleria

在这段代码中，如何修改“TEXT”的样式？

```
}).text('TEXT').appendTo('body'); 
```

这是较长代码的一部分。TEXT 是一个链接，当您单击它时，图像会全屏打开（它是 Galleria 的一部分）。但是，TEXT 不表现为链接（即没有悬停效果等），它仅由 CSS 文件中的 body { } 定义。

如何添加适当的 CSS 类？

非常感谢！

以及完整的代码：

```
<script>

 Galleria.loadTheme('galleria/themes/classic/galleria.classic.js');
Galleria.run('#galleria');

 $('<a>').click(function(e) {

Galleria.configure({trueFullscreen:false});
Galleria.ready(function(){this.enterFullscreen();});

  }).text('Switch to fullscreen').appendTo('body');

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:08:14.767

`.text('Switch to fullscreen').appendTo('body').css("color","blue").hover(function() {$(this).css("color","violet");}, function() {$(this).css("color","blue");});`

只需在您的代码中添加此 jquery 链即可。css 为对象添加样式，并在您输入和离开文本时调用悬停函数。

卡尔提克

# apache - 使用斜杠后的路径将 domain1 重定向到 domain2

> ID：14182146
> 
> 赞同：0
> 
> 时间：2013-01-06T12:34:41.243
> 
> 标签：apache, mod-rewrite, joomla

我有 2 个域

domain1.com domain2.net

我想在斜杠后使用路径别名将 domain1.com 重定向到 domain2.net，就像这样

domain1.com/joomla（这是文件夹）/path-to-content >>> domain2.net/joomla（这是文件夹）/path-to-content

我使用了这条规则，但在斜线后没有使用路径

```
RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteRule ^(/)?$ http://www.domain.net/persian/$1 [R=301,L] 
```

这条规则是这样工作的

domain1.com/joomla（这是文件夹）/path-to-content >> domain2.net/joomla（这是文件夹）

我的服务器是 centos 6.2 和 apache 和内容管理系统是 Joomla。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:52:34.413

你说你想重定向到 domain2.net。您可以使用简单的而不是重写条件`redirect`来获得相同的结果。将此代码添加到 domain1.com 的 public_html 目录中的 .htaccess 文件中：

```
redirect / http://domain2.net/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:24:52.020

您还可以在主机控制面板中使用域别名，或让域共享相同的 docroot（如果两个域上的内容相同）。

# cocos2d-iphone - cocos2d-iphone: cocosbuilder: CCScrollView 如何定位

> ID：14182155
> 
> 赞同：0
> 
> 时间：2013-01-06T12:35:12.287
> 
> 标签：cocos2d-iphone

我正在使用 cocosBuilder 提供的 CCScrollView。我正在尝试使用以下代码将其放置在屏幕中央：

```
CCSprite *testSrprite = [CCSprite spriteWithFile:@"category-shop1"];
testSprite.position = ccp(0,0);
CCScrollView *test = [[CCScrollView  alloc] initWithViewSize:CGSizeMake(200, 200) container:testSrprite];
test.position  = ccp(winsize.width/2,winsize.height/2);
[self addChild:test]; 
```

但这不是定位图层。它是 CCScrollView 中的错误吗？

# html - 跨度标记和 css“margin-*”属性的不可理解性

> ID：14182164
> 
> 赞同：0
> 
> 时间：2013-01-06T12:35:47.130
> 
> 标签：html, css

span 标签不支持 css`margin-top`属性。

问：为什么？

A：因为 span 不是块元素？！

好的，但是为什么要支持 span 标签`margin-left`属性呢？

演示：http: [//jsfiddle.net/h4xNK/](http://jsfiddle.net/h4xNK/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:44:55.310

正如@flem 所解释的，这是因为该`span`元素是内联元素，而不是块级元素，这与`div`它不同。如果您希望它的行为有所不同，您需要通过`display:inline-block`or明确说明这一点`block`。

如果您可以控制标记，那么根据其上下文和内容，您可能需要考虑实际使用`div`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:44:03.857

带显示的元素`inline`忽略了 margin-top 等属性；并且`span`默认情况下将显示设置为内联，但您可以将其更改为`block`or`inline-block`然后它就会工作 - [jsfiddle](http://jsfiddle.net/h4xNK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T12:37:28.267

HTML（内联）流经页面（因此支持`margin-left`）。您几乎可以用、和来*模仿* 。`margin-top``line-height``padding``baseline-shift`

# python - 用空格替换列表中的元素

> ID：14182167
> 
> 赞同：0
> 
> 时间：2013-01-06T12:35:54.133
> 
> 标签：python

是否可以检查列表元素？如果它与“test01.txt”中的单词相同，则替换为空格？

测试01.txt：

```
to
her
too
a
for 
```

在代码中：

```
with open('C:/test01.txt') as words:
    ws = words.read().splitlines()
with open('C:/test02.txt') as file_modify4:
    for x in file_modify4:
        sx = map(str.strip, x.split("\t"))
        ssx = sx[0].split(" ")
        print ssx 
```

“打印 ssx”的结果：

```
['wow']
['listens', 'to', 'her', 'music']
['too', 'good']
['a', 'film', 'for', 'stunt', 'scheduling', 'i', 'think']
['really', 'enjoyed'] 
```

如何替换ssx中的元素？

预期结果：

```
['wow']
['listens', ' ', ' ', 'music']
[' ', 'good']
[' ', 'film', ' ', 'stunt', 'scheduling', 'i', 'think']
['really', 'enjoyed'] 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:39:21.813

使用列表推导；首先将单词存储在一组中以进行更快的测试：

```
ws = set(ws)

# ...
    ssx = [w if w not in ws else ' ' for w in ssx] 
```

或者，作为一个完整的解决方案：

```
with open('C:/test01.txt') as words:
    ws = set(words.read().splitlines())

with open('C:/test02.txt') as file_modify4:
    for x in file_modify4:
        ssx = [w if w not in ws else ' ' for w in x.strip().split('\t')[0].split()]
        print ssx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:43:15.667

天真的解决方案是：

```
new_ssx = []
for word in ssx:
    if word in ws:
        new_ssx.append(' ')
    else:
        new_ssx.append(word) 
```

当然，只要你有一个空列表，你只是在循环中追加，你可以把它变成一个列表推导：

```
new_ssx = [' ' if word in ws else word for word in ssx] 
```

如果`ws`超过几个词，您可能希望将其转换为 a`set`以加快查找速度。

所以，把它们放在一起：

```
with open('C:/test01.txt') as words:
    ws = set(words.read().splitlines())
with open('C:/test02.txt') as file_modify4:
    for x in file_modify4:
        sx = map(str.strip, x.split("\t"))
        ssx = sx[0].split(" ")
        new_ssx = [' ' if word in ws else word for word in ssx]
        print new_ssx 
```

# c# - 使用计时器显示标签一段时间

> ID：14182180
> 
> 赞同：0
> 
> 时间：2013-01-06T12:37:18.990
> 
> 标签：c#, winforms, timer

我正在开发[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序。我有一个 Windows 窗体，其中标签默认设置为 false 。我想将属性设置*为*10`true`秒，然后设置为 false。我已经拖了定时器控件，将时间间隔设置为1000毫秒，也就是1秒，我在表单加载事件中写了代码：

```
 timer1.Start();
    if (timer1.Interval == 5000)
    {            
        timer1.Stop();
    } 
```

但它没有将标签设置为可见`false`。为什么？

在哪种情况下，我必须触发此代码，以便计时器何时启动以及何时为 5 秒，然后标签将设置为 false？这在 C# 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:42:19.133

此计时器只有一个事件 ->`tick`必须处理

```
timer1.Interval = 5000;
timer1.Tick += new EventHandler(timer1_Tick);
label1.Visible = true;
timer1.Start();

  private void timer1_Tick(object sender, EventArgs e)
  {
     label1.Visible = false;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T13:35:32.267

检查下面的代码。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        timer1.Interval = 10000;
        timer1.Tick += new System.EventHandler(this.timer1_Tick);
        label1.Visible = true;
        timer1.Start();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        timer1.Stop(); //If timer is not stopped, timer1_Tick event will be called for every 10 seconds
        label1.Visible = false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:52:45.427

如果您使用的是[Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)，通过双击计时器，您应该在后面的代码中获得此功能：

```
private void timer1_Tick(object sender, EventArgs e) 
```

尝试更改此函数中的标签可见性，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T12:59:26.490

使用了这个语句：

```
 Label1.Visible = false 
```

我认为Label1的属性有问题。

# objective-c - Objective-c 从委托中调用共享委托方法

> ID：14182182
> 
> 赞同：0
> 
> 时间：2013-01-06T12:37:27.693
> 
> 标签：objective-c, design-patterns, delegates

我有这些文件：

```
someDelegate.h
someDelegate.m 
```

在 someDelegate.h 中有一个函数 foo()，它应该由所有实现 someDelegate 的类共享。foo() 在 someDelegate.m 中实现

现在我有了实现 someDelegate 的类 Bar ，我想从 Bar.m 中声明的 Bar 方法中调用方法 foo()

```
int result = [self foo]; 
```

这不起作用。我应该如何从每个实现 someDelegate 的类中调用函数 foo() 而无需多次声明该函数？

# cakephp - 在每个 CakePHP 页面上加载一些东西

> ID：14182183
> 
> 赞同：0
> 
> 时间：2013-01-06T12:37:31.073
> 
> 标签：cakephp, controller

是否可以在每个 CakePHP 页面上加载某些内容而不必在每个模型的每个操作中添加请求？只需将它添加到某个地方，所有页面都完成了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:15:23.713

首先，模型没有动作。控制器有动作。

您可以通过使用在所有控制器中加载数据`AppController::beforeFilter()`

```
class AppController extends Controller {
    public function beforeFilter() {
        $this->set('something', $foobar);
    }
} 
```

您还可以在布局文件的所有页面上加载视图内容。

# ios - 用锚在uiwebview中加载本地html5

> ID：14182184
> 
> 赞同：1
> 
> 时间：2013-01-06T12:37:44.997
> 
> 标签：ios, html, uiwebview

我有以下代码在 iOS 应用程序中加载本地 html 文件。

```
[WebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"]isDirectory:NO]]]; 
```

以上工作，但是我需要加载一个锚，因为这是一个嵌入在 UIWebview 中的单页 Web 应用程序。

基本上我如何加载 index.html#settings 而不仅仅是 index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-27T08:27:05.977

[这](https://discussions.apple.com/thread/1777765)对我有用。

```
NSString *basePath = [[NSBundle mainBundle] pathForResource:@"page.html" ofType:nil];
NSURL *baseURL = [NSURL fileURLWithPath:basePath];
NSURL *fullURL = [NSURL URLWithString:@"#anchor1" relativeToURL:baseURL];
// Now do whatever with this fullURL 
```

# 在中转换为 %23 `[NSURL fileURLWithPath:basePath]`，但`URLWithString:(NSString *)URLString relativeToURL:(NSURL *)baseURL;`不是。

# java - Nutch 2.1 - 生成器作业运行时异常作业失败

> ID：14182186
> 
> 赞同：1
> 
> 时间：2013-01-06T12:38:00.720
> 
> 标签：java, apache, nutch

当我尝试使用 generate 命令生成 url 时出现以下错误：

> GeneratorJob：java.lang.RuntimeException：作业失败：name=generate：1357474131-234134646，在 org.apache.nutch.util.NutchJob.waitForCompletion(NutchJob.java:54) 在 org.apache.nutch.crawl 的 jobid=job_local_0001。 GeneratorJob.run(GeneratorJob.java:191) at org.apache.nutch.crawl.GeneratorJob.generate(GeneratorJob.java:213) at org.apache.nutch.crawl.GeneratorJob.run(GeneratorJob.java:241) at org .apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) 在 org.apache.nutch.crawl.GeneratorJob.main(GeneratorJob.java:249)

和工作正常，但`generate`有时会出现此错误：`fetch``parse``updatedb`

> 线程“主”java.lang.RuntimeException 中的异常：作业失败：在 org.apache.nutch.util.NutchJob.waitForCompletion(NutchJob.java:54) 的 org.apache.nutch 的 name=update-table, jobid=job_local_0001。 crawl.DbUpdaterJob.run(DbUpdaterJob.java:98) 在 org.apache.nutch.crawl.DbUpdaterJob.updateTable(DbUpdaterJob.java:105) 在 org.apache.nutch.crawl.DbUpdaterJob.run(DbUpdaterJob.java:119)在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) 在 org.apache.nutch.crawl.DbUpdaterJob.main(DbUpdaterJob.java:123)

现在，它不断给生成作业失败。可能是什么问题？会不会是mysql的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:04:01.170

上述错误是由于我安装的服务器上的分区空间不足。[当我尝试运行 nutch 生成命令时，](https://stackoverflow.com/questions/14290504/insufficient-space-for-shared-memory-file-when-i-try-to-run-nutch-generate-comma/14290628)检查共享内存文件空间不足的答案

# javascript - 从下拉菜单中选择值

> ID：14182188
> 
> 赞同：0
> 
> 时间：2013-01-06T12:38:14.163
> 
> 标签：javascript, html-select

我想制作这个源代码，我将这个源代码复制到记事本中，然后将其粘贴到一个文件中，包括 CSS、JavaScript 和 HTML。文件名为*sel.php*。

我从[http://jsfiddle.net/davidThomas/x5YW3/获取源代码](http://jsfiddle.net/davidThomas/x5YW3/)

我将我的 CSS 包含在：

```
<style type="text/css">
----this_source_css----
</style> 
```

JavaScript 与：

```
<script type="text/javascript">
----this_source_javascript----
</script> 
```

和HTML：

```
<html>
<body>
----html_source_code----
</body>
</html> 
```

但是这段代码在我的复制粘贴中不起作用，而我在 jsfiddle 中运行正常，可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:44:43.437

只是一个猜测-包括您的javascript-

```
$(document).ready(function(){
// your code here
}); 
```

还要确保在文件中包含 JQuery 源。

但是，您的小提琴代码正在“onLoad”执行 - 检查“选择框架”下方的下拉框。

正如 Pekka 指出的那样，如果您确实打算在“加载”之后运行您的代码，而不是在您的 dom 准备好时运行，您可以使用它 -

```
$(document).load(function() {
// your code here
}); 
```

两个事件之间的差异的解释是[here](https://stackoverflow.com/questions/2683072/jquery-events-load-ready-unload)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:44:43.463

正如@Boaz 所说：

您的文档中没有包含 jQuery。从 jquery.com 获取最新版本并使用它：

```
$( function() {

// paste js code here

}); 
```

# c# - 在当前正在写入的文件上创建 FileInfo 是否安全？

> ID：14182189
> 
> 赞同：8
> 
> 时间：2013-01-06T12:38:17.267
> 
> 标签：c#, file, fileinfo

在我的应用程序（C# 4.5 winforms 应用程序）中，我定期检查文件夹的内容并将找到的任何文件的详细信息存储到数据库中。在这个例程中，我`FileInfo`使用 创建了一个实例，并`new FileInfo(path)`读取了属性`CreationTime`、`LastWriteTime`、`LastAccessTime`和。我从不在实例上调用任何方法。`Length``Attributes``FileInfo`

我想知道的是：如果文件当前正在由第三方应用程序写入（或在被 Windows 复制到文件夹的过程中），而我创建`FileInfo`对象或访问它的属性？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T13:20:57.790

是的，这是“安全的”。这是在非常底层的文件系统驱动程序中处理的。FAT 或 NTFS 等常见文件系统上的文件在磁盘上有*两种*不同的结构。首先是目录条目，它存储有关文件的元数据。就像名称、时间戳、属性和长度一样。实际的文件数据存储在其他地方，即存储文件数据的集群链。

FileInfo 专门为您提供文件的元数据。文件数据更加敏感，在进程写入文件时很容易发生变化。值得注意的是，您可以使用 FileShare 选项锁定对文件数据的访问。但是没有办法锁定元数据。因此，您始终可以获取文件的 FileInfo，而不管其他进程正在对该文件执行什么操作。

当然，当进程写入文件时，实际的 FileInfo 属性可能会发生变化。它们会*延迟*更新，尤其是 LastAccessTime 属性。如果您想确保您拥有无法更改的准确信息，那么您需要获得文件的锁定。通过使用 FileShare.Read 或 FileShare.None 打开文件来执行此操作。这确保了只要您打开了文件，就没有其他进程可以打开文件进行写入。请注意，*这*很容易引发 IOException，只有在没有其他进程出现在您之前并打开文件进行写入时，您才会获得锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:46:12.767

不，它们不在您使用的上下文中。

从[FileSystemInfo.LastWrite -> MSDN](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx)

> 注意 此方法可能返回不准确的值，因为它使用的本机函数的值可能不会被操作系统持续更新。

但是想象一下，他们正在返回最新的值。如果您已经使用了该值（取决于时间），并且在那之后文件被覆盖，那么您最后访问的值将变得错误/损坏。所以这没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:47:02.160

没问题看msdn：

[http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)

**线程安全** 此类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。不保证任何实例成员都是线程安全的。

并**注意：**

首次检索属性时，FileInfo 调用 Refresh 方法并缓存有关文件的信息。在随后的调用中，您必须调用 Refresh 以获取信息的最新副本。

# ruby-on-rails-3 - 为具有不同数据的多用户设计 mogoid

> ID：14182198
> 
> 赞同：0
> 
> 时间：2013-01-06T12:39:12.890
> 
> 标签：ruby-on-rails-3, devise, mongoid3

我正在使用 rails 3.2.7、mongoid 3，并且我正在尝试将设计用于用户帐户。

在我开始之前：我一直在寻找我的问题，我阅读了很多教程，但没有一个适合我的需要。

我有类似的问题，例如[设计和多个“用户”模型](https://stackoverflow.com/questions/9472852/devise-and-multiple-user-models)

但我使用的是 mongodb，所以我认为问题并不完全相同。

我有 3 种类型的用户”：

1.  可以有很多地方并可以管理它们的马槽（编辑信息）。
2.  可以搜索地点（甚至没有用户可以）并创建他们的地点列表的用户。用户也可以评论和注意这些地方。
3.  可以编辑/删除任何东西的管理员，所以管理员是神。

所以，他们都有不同的数据（登录信息除外），我不知道什么解决方案是最好的。

如果他们有相同的数据和不同的动作，STI 会很好，但数据也不同（但我使用的是 mongoid，所以也许可以吗？）

具有角色的单用户模型是另一种解决方案，但我不知道如何存储不同的数据，也许是多态的？我不完全理解它应该如何用设计和康康来实现。

也许还有第三个？

我知道什么是 STI，多态关联，以及如何使用 CanCan 实现角色，但问题是我不知道如何将它们与设计联系起来？

如果登录表格很少或只有一个，那没关系。我也不必使用设计。

我发现很少有教程/示例如何为多用户应用程序使用设计、monogid、角色，但它们是用户存储相同数据的时候，所以它们不适合我。

你能给我建议，或者一个可以帮助我的链接吗？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:00:32.290

我建议为不同的用例构建不同的控制器。不要在数据内部构建不同视图的依赖关系。这样，您可以自由地将数据用于其他用例或其他用户组，而无需直接更改。

只需为不同的用例创建控制器。这样，您可以随时更改它们而无需更改数据模型。

# c++ - 使用#define 的最大数组大小

> ID：14182200
> 
> 赞同：0
> 
> 时间：2013-01-06T12:39:18.340
> 
> 标签：c++, arrays, segmentation-fault, c-preprocessor

> **可能重复：**
> [堆栈溢出 C++](https://stackoverflow.com/questions/14182127/stack-overflow-c)

我有以下用于生成素数的程序：

```
#include<iostream> 
#include<cmath>
#include<algorithm>

#define MAX 10000000
using namespace std;

int main(int argc, const char *argv[])
{
    bool prime[MAX+1];
    fill_n(prime,MAX+1,true);
    int baseSqrt,i,j;
    baseSqrt = int(sqrt(MAX+1));
    for(i=2;i<=baseSqrt;i++){
        if(prime[i]){
            for(j=i+i;j<=MAX;j+=i){
                    prime[j]=false;
            }   
        }   
    }   
    return 0;
} 
```

该程序适用于 MAX 值 = 1000000。但是当我将值增加到 10000000 时，程序会给出段错误。我尝试使用 gdb，但它停止在 main 那里给出段错误。我使用的是 64 位操作系统。即使我删除 MAX 并写 10000000 而不是 MAX，我也会得到同样的错误。我哪里错了？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:41:01.833

您不应该将非常大的数组声明为局部变量（即在堆栈上），因为堆栈大小通常非常有限。`new[]`相反，使用和动态分配它们`delete[]`。或者对于惯用的 C++，使用容器类，如`std::deque`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:01:35.697

在这种特殊情况下，将“prime”设为全局变量不是一个合理的想法。我确实理解全局变量并不总是一个好的解决方案，但对于这种特殊情况，这将是一个相当明显的解决方案。这不像 MAX 不是一个常数，所以使用 new/delete 或 vector 作为解决方案似乎有点不必要。

并回答“如果使用'new' vs global variable'是否更慢'的问题，那么我可以说这可能是无关紧要的。我`#define MAX 1000000000`在上面的代码中使用，将prime移动为全局，并使用时间运行它，然后将代码更改为使用 new/delete，并且花费了大约 0.5 秒的时间——但总体运行时间是 20.4 或 20.9 秒，所以它大约是总运行时间的 2%，我很确定可以获得超过 2%通过做其他事情。

# python - 在python中使用“\”从字符串转换为元组

> ID：14182205
> 
> 赞同：1
> 
> 时间：2013-01-06T12:39:41.290
> 
> 标签：python, command-line, tuples

我将数据从命令行传输到 python。我想从字符串（命令行）转换为元组（python）。但我对 \ 字符有疑问。

在命令行中，我使用：

```
C:\>python music.py -a variable="?==" 
```

在蟒蛇中：

```
#convert variable to array 
variable_array = variable.split("==")
#convert to tuple
variable_tuple = tuple(variable_array) 
```

我得到 variable_tuple = ("?","")

我需要的结果是 variable_tuple = ("\?","")

使用时

```
C:\>python music.py -a variable="\?==" 
```

结果是 variable_tuple = ("\\?","")

如何从命令行传输数据以在 python 中获取元组 ("\?","")？我需要反斜杠“？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:43:25.573

`'\\?'`是一个带有一个反斜杠字符和一个问号的字符串。Using`list`是将字符串拆分为字符的便捷技巧。例如：

```
In [34]: list('\\?')
Out[34]: ['\\', '?'] 
```

节目`'\\?'`由 2 个字符组成，而不是 3 个。如果你打印它：

```
In [35]: print('\\')
\ 
```

您会看到它仅打印为一个反斜杠字符。双反斜杠 ,`'\\'`是一个[转义序列](http://docs.python.org/2/reference/lexical_analysis.html#grammar-token-escapeseq)。

* * *

另请注意，当您打印一个元组时，您会得到其内容的[repr](https://stackoverflow.com/q/1436703/190597)：

```
In [36]: print(tuple('\\?'))
('\\', '?') 
```

* * *

`'\?'`与 Python中的字符串完全相同`'\\?'`。它们只是表示相同字符串的不同方式：

```
In [38]: list('\?')
Out[38]: ['\\', '?']

In [39]: list('\\?')
Out[39]: ['\\', '?']    

In [42]: '\?' is '\\?'
Out[44]: True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:43:38.757

你得到你想要的。您看到的只是 '\' 的字符串表示形式，第一个 '\' 作为转义字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:44:48.220

`("\\?","")`表示 '\' 被转义，否则 '\?' 将被解释为转义序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T12:47:07.920

？不需要反斜杠。所以你得到的是正确和足够的。

# javascript - 通过单击将屏幕居中输入输入 - Android

> ID：14182206
> 
> 赞同：0
> 
> 时间：2013-01-06T12:39:50.930
> 
> 标签：javascript, android, html, cordova, input

当点击输入时，我希望他在屏幕中央，

我使用 HTML5 + PhoneGap，我该怎么做？

（如果可能的话通过**JS**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:17:24.600

最后，我在全屏 div 中打开了 Input，而不是让他居中

# mongodb - 分面搜索。Solr 和 MongoDb 对它有好处吗？有人知道用于多面搜索的模块、库吗？

> ID：14182219
> 
> 赞同：0
> 
> 时间：2013-01-06T12:41:59.940
> 
> 标签：mongodb, solr, e-commerce, faceted-search

今天是个好日子。

我有一个电子商务网站（Kohana php 框架 + Mysql + Sphinx 搜索）。

我想在我的电子商务商店中集成分面搜索（也称为分面导航、引导导航或参数搜索）。

***1.***我发现几个意见认为**Solr 是**分面浏览的最佳解决方案？我想确定我的选择。Solr 在这方面做得最好吗？

* * *

***2.***另外我想将产品（带有属性）从 mysql 迁移到**MongoDb**。MongoDb和Solr合作好不好？

* * *

***3.***有人知道分面搜索的模块、ui、api吗？也许有一些 Zend 库，Rest api ......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:08:17.113

> 我发现几个意见认为 Solr 是分面浏览的最佳解决方案？

我很确定那些说这话的人很可能是那些说 MongoDB 在每个角色中都拥有 MySQL 的销售人员。

Sphinx（您当前使用的技术）已被证明可以以高性能的方式支持海量数据集，例如：http: [//infegy.com/](http://infegy.com/)将其用于包含 220 亿条记录的结果集（[http://sphinxsearch.com /信息/供电/](http://sphinxsearch.com/info/powered/)）！

Solr 也非常快，但是当两个支持方面并且都支持超大结果集的超快速度时，说一个比另一个更好，这完全是胡说八道。

> 我还想将产品（带有属性）从 mysql 迁移到 MongoDb。MongoDb和Solr合作好不好？

Solr 使用单独的 XML 模式和文件来表示其内部文件（此处为 Lucence），这与 Sphinx 不同，Sphinx 可以在您不知情的情况下透明地执行此操作。

因此，让 MongoDB 与 Solr 一起使用与使用 MySQL 没有什么不同。您构建 XML 文件和`commit`（或`soft_commit`）它们到 Solr。

至于分面，这是一个非常简单的页面，其中包含指向您需要去的地方的链接：[http ://wiki.apache.org/solr/SolrFacetingOverview](http://wiki.apache.org/solr/SolrFacetingOverview)

[Solr 在 Jety ( http://jetty.codehaus.org/jetty/](http://jetty.codehaus.org/jetty/) )之上有一个内置的 REST (JSON) API ，您可以使用它轻松获取所需的所有方面。

# mysql - Mysql左连接和合并列

> ID：14182221
> 
> 赞同：2
> 
> 时间：2013-01-06T12:42:09.920
> 
> 标签：mysql

```
+----------------------+
| post_id | message    |
+----------------------+
| 1       | message 1  |
+----------------------+
| 2       | message 2  |
+----------------------+

+----------+---------+-------------------------+
| reply_id | post_id |message                  |
+----------+---------+-------------------------+
|    1     |    1    |  reply 1 to message 1   |
+----------+---------+-------------------------+
|    2     |    1    |  reply 2 to message 1   |
+----------+---------+-------------------------+
|    3     |    1    |  reply 3 to message 1   |
+----------+---------+-------------------------+
|    4     |    2    |  reply 1 to message 2   |
+----------+---------+-------------------------+ 
```

我得到了这两个表名`post`，并且表中`post_replies` 的`post_id`表`post_replies`是 Fk 到表中的 Pk`post` 我想要做的是找到发布消息，它只回复为一列

如果我运行这样的事情：

```
SELECT p.message, pr.message FROM `posts` AS p LEFT JOIN post_replies AS pr ON p.post_id = pr.post_id 
```

它会返回这样的东西

```
+-----------+-------------------------+
| message   |   message               |
+-----------+-------------------------+
| message 1 |  reply 1 to message 1   |
+-----------+-------------------------+
| message 1 |  reply 2 to message 1   |
+-----------+-------------------------+
| message 1 |  reply 3 to message 1   |
+-----------+-------------------------+
| message 2 |  reply 1 to message 2   |
+-----------+-------------------------+ 
```

有没有办法我可以得到这样的**结果**：

```
+-------------------------+
|   message               |
+-------------------------+
|   message 1             |
+-------------------------+
|  reply 1 to message 1   |
+-------------------------+
|  reply 2 to message 1   |
+-------------------------+
|  reply 3 to message 1   |
+-------------------------+
|   message 2             |
+-------------------------+
|  reply 1 to message 2   |
+-------------------------+ 
```

如果我跑

```
SELECT p.message FROM `posts` AS p LEFT JOIN post_replies AS pr ON p.id = pr.post_id 
```

这将从`post`表中返回消息

或者

```
SELECT pr.message FROM `posts` AS p LEFT JOIN post_replies AS pr ON p.id = pr.post_id 
```

`post_replies`这将仅从表返回消息

有可能吗？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:56:59.847

将您提供的两个查询合并并引入正确的顺序：

```
SELECT * FROM (
  SELECT p.id, 0 x, p.message
  FROM posts AS p
  LEFT JOIN post_replies AS pr ON p.id = pr.post_id
  UNION ALL
  SELECT p.id, pr.id, pr.message
  FROM posts AS p
  LEFT JOIN post_replies AS pr ON p.id = pr.post_id
) x
ORDER BY 1, 2 
```

如果您不想重复，请将“UNION ALL”更改为“UNION”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T12:57:01.550

我知道这不是你想要的，但如果这能解决你的问题就发帖

$查询

```
SELECT 
    group_concat(pr.message SEPARATOR '|'), p.message,  
FROM 
    `posts` AS p 
LEFT JOIN 
    post_replies AS pr ON p.post_id = pr.post_id 
GROUP BY
    pr.post_id

+-----------+----------------------------------------------------------------------------+
| message   |   message                                                                  |
+-----------+----------------------------------------------------------------------------+
| message 1 |  reply 1 to message 1 | reply 2 to message 1  | reply 3 to message 1       |
+-----------+----------------------------------------------------------------------------+ 
```

# java - Playframework 1.2.5 和 JDBI

> ID：14182228
> 
> 赞同：2
> 
> 时间：2013-01-06T12:42:31.097
> 
> 标签：java, playframework, playframework-1.x, jdbi

我正在尝试将 JDBI 与 Play 1.2.5 一起使用，但我遇到了数据库连接不足的问题。我正在使用 H2 内存数据库（在 application.conf，db=mem 中）

我创建了类来获取使用 Play 的 DB.datasource 的 jdbi 实例，如下所示：

```
public class Database {      
    private static DataSource ds = DB.datasource;

    private static DBI getDatabase() {       
        return new DBI(ds);       
    }

    public static <T> T withDatabase(HandleCallback<T> hc) {
        return getDatabase().withHandle(hc);       
    }

    public static <T> T withTransaction(TransactionCallback<T> tc) {
        return getDatabase().inTransaction(tc);
    }
} 
```

每次我进行数据库调用时，都会创建一个新的 DBI 实例，但它总是包装相同的静态 DataSource 对象（play.db.DB.datasource）

发生的事情是，过了一会儿我得到以下信息：

`CallbackFailedException occured : org.skife.jdbi.v2.exceptions.UnableToObtainConnectionException: java.sql.SQLException: An attempt by a client to checkout a Connection has timed out.`

我很困惑，因为 DBI.withHandle() 和 DBI.withTransaction() 的全部意义在于在回调方法完成时关闭连接并释放资源。

我也尝试`getDatabase()`每次都返回相同的 DBI 实例，但出现了同样的问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:04:45.280

呃。原来我在一些没有使用 withHandle() 的旧代码中泄漏了连接。一旦我升级它，问题就停止了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-30T00:45:07.830

来自官方[文档](https://jdbi.org/#_handle)

> 因为 Handle 持有一个打开的连接，所以必须注意确保每个句柄在完成后都关闭。未能关闭 Handles 最终会因打开的连接而使您的数据库不堪重负，或者耗尽您的连接池。

事实证明，只要提供了回调函数，您就不能保证在回调函数中关闭句柄。

# regex - 正则表达式环顾四周，只有一个匹配项，其中有多个可能的匹配项

> ID：14182234
> 
> 赞同：0
> 
> 时间：2013-01-06T12:43:34.010
> 
> 标签：regex

明白啦：

```
<TAG>something one</TAG><TAG>something two</TAG><TAG>something three</TAG> 
```

我只想匹配：`something two` 我尝试：`(?<=<TAG>)(.*two.*)(?=<\/TAG>)` 但得到：

```
something one</TAG><TAG>something two</TAG><TAG>something three 
```

也许我再举一个例子

```
RECORDsomething beetwenRECORD RECORDanything beetwenRECORD etc. 
```

想听话beetwen RECORD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:16:02.667

如前所述，不鼓励使用正则表达式解析 HTML！有很多 HTML 解析器可以做到这一点。但是，如果您不惜一切代价想要一个正则表达式，这就是我在 Python 中的方式：

```
In [1]: import re

In [2]: s = '<TAG>something one</TAG><TAG>something two</TAG><TAG>something three</TAG>'

In [3]: re.findall(r'(?<=<TAG>).*?(?=</TAG>)', s)[1]
Out[3]: 'something two' 
```

但是，此解决方案仅在您总是想提取第二个标签对的内容时才有效。但正如我所说，不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:57:35.430

您可以使用

```
<TAG>.+?<TAG>(.*?)</TAG> 
```

你`something two`在第一场比赛中`$1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:14:48.790

如果您知道 TAG 不是第一个也不是最后一个，您可以这样做

```
(?<=.+<TAG>)(.*two.*)(?=<\/TAG>.+) 
```

当然，最好也捕获标签并使用捕获组

```
.*<TAG>(.*two.*?)<\/TAG> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T13:03:14.250

尝试这个：

```
(?<=</TAG><TAG>)[^<]*(?=</TAG><TAG>) 
```

# objective-c - 关于 /** @discussion @param @see @return .... */ 的 Objective-C 注释文档

> ID：14182236
> 
> 赞同：5
> 
> 时间：2013-01-06T12:43:53.280
> 
> 标签：objective-c

我在 /** */ 中看到越来越多的带有注释的这种@marker，我正在寻找一些文档，解释它们是什么以及如何使用它。谢谢！

```
/**
 @param blabla...
 @return bla...
 @see ...
 @method ...
 @discussion ...
 */ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T12:47:43.963

这是内联（好吧，在评论中）文档，一种自文档化代码的特殊方法。这种特殊的风格称为[Javadoc](http://en.wikipedia.org/wiki/Javadoc)风格，除了 Javadoc 工具之外，许多流行的文档生成器都支持它，包括[Doxygen](http://www.doxygen.nl/manual/docblocks.html#docstructure)和[Appledoc](http://gentlebytes.com/appledoc/)。

编写某些代码（应用程序、库等）的文档的目的是开发人员不需要维护代码库**和**文档的单独文件结构；这些自动实用程序可以根据嵌入在注释中的信息生成格式良好（例如 HTML）的文档。

另请注意，这并不是严格意义上的语言相关功能。不要被 @ (at) 符号弄糊涂了，这不是 Objective-C 特定的语法（而是特定于所使用的特定文档生成器程序）。

# android - 如何在 Android 中使用代码中的 z-index

> ID：14182240
> 
> 赞同：0
> 
> 时间：2013-01-06T12:44:29.453
> 
> 标签：android, z-index, android-linearlayout

我有一个 LinearLayout，我动态添加 View items 。我需要让新物品位于低于旧物品的位置。

例如：

```
MenuLayout = (LinearLayout) MainActivity.findViewById (R.id.MenuLayout);
MenuLayout.addView(newBox); //at the top
MenuLayout.addView(newBox); //lower 
MenuLayout.addView(newBox); //At the bottom 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:50:01.447

只需在添加它们时将它们添加到集合中。然后，您可以通过集合引用对象是什么。

```
private ArrayList<E> collection = new ArrayList<E>();

......

    MenuLayout = (LinearLayout) MainActivity.findViewById (R.id.MenuLayout);
    MenuLayout.addView(newBox); collection.add(newBox); //index 0 in collection
    MenuLayout.addView(newBox); collection.add(newBox); //index 1 in collection
    MenuLayout.addView(newBox); collection.add(newBox); //index 2 in collection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:51:08.963

首先，因为这是 a `LinearLayout`，所以您使用的是 X 或 Y 轴，而不是 Z 轴。在 Android 术语中，Z 轴从屏幕朝向用户的眼睛伸出。

另外，请不要尝试`newBox`多次添加相同的小部件，因为您会崩溃。

除此之外，您还可以使用and访问`ViewGroup`类似的孩子。将根据添加的顺序对子项进行索引。`LinearLayout``getChildCount()``getChildAt()`

# javascript - phonegap 透明文本区域

> ID：14182248
> 
> 赞同：0
> 
> 时间：2013-01-06T12:45:20.287
> 
> 标签：javascript, android, jquery, html, cordova

我正在使用 phonegap 为 android 创建一个移动应用程序。
在 html 中，我有一个带有自定义背景（垂直线和水平线）的主体。
在身体顶部，我有一个背景透明的文本区域。

当我“单击”桌面上的 textarea 时，一切正常。但是当我“单击”设备上的 textarea 时，它变成白色。

我怎样才能让它在点击时透明？

# python - 在嵌套列表中定位项目并在 python 中解码密码

> ID：14182249
> 
> 赞同：0
> 
> 时间：2013-01-06T12:45:24.357
> 
> 标签：python, list, matrix, grid, nested

> **可能重复：**
> [如何在 Python 中搜索嵌套列表网格并给出字母坐标？](https://stackoverflow.com/questions/14172229/how-to-search-nested-list-grid-and-give-lettered-coordinates-in-python)

我目前有这个嵌套列表充当 6x6 网格：

```
grid = [["Z","9","G","Q","T","3"],
        ["Y","8","F","P","S","2"],
        ["X","7","E","O","R","1"],
        ["W","6","D","N","M","0"],
        ["V","5","C","L","K","U"],
        ["J","4","B","I","H","A"]] 
```

行和列被称为 A、B、C、D、E、F，而不是通常的 0、1、2、3、4、5。因此需要将字母转换为数字，然后必须在嵌套列表中找到该项目。

例如，如果用户输入：FE CC ED ED CD 这应该找到 HELLO 的字母并打印出 HELLO 这个词，因为这是加密的消息。

任何有关我如何管理此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:48:33.423

您可以使用映射将字母转换为数字。这样的映射很容易从`string.ascii_uppercase`字符串生成：

```
import string
letter_to_index = {l: i for i, l in enumerate(string.ascii_uppercase)} 
```

然后使用`letter_to_index`它将字母（例如`E`）转换为数字（`4`）是微不足道的：

```
>>> letter_to_index['E']
4 
```

使用空格分隔的输入，这变成：

```
letters = []
for coordinate in code.split():
    row, column = letter_to_index[coordinate[0]], letter_to_index[coordinate[1]]
    letters.append(grid[row][column])

print ''.join(letters) 
```

其他技术用于`ord()`获取字母的 ASCII 序号（减去`ord('A')`以使其从 0 开始）或使用`.index()`on `string.ascii_uppercase`（这会更慢）。

将它们的相对速度与[`timeit`模块](http://docs.python.org/2/library/timeit.html)进行比较是确定哪个是最快技术的最佳方法（如果您愿意的话）：

```
>>> import timeit
>>> def lookup_map(coordinate):
...     return letter_to_index[coordinate[0]], letter_to_index[coordinate[1]]
... 
>>> def lookup_ord(coordinate, orda=ord('A')):
...     return ord(coordinate[0]) - orda, ord(coordinate[1]) - orda
... 
>>> def lookup_index(coordinate, upper=string.ascii_uppercase):
...     return upper.index(coordinate[0]), upper.index(coordinate[1])
... 
>>> coords = [random.choice(string.ascii_uppercase[:6])+random.choice(string.ascii_uppercase[:6]) for _ in range(1000)]
>>> timeit.timeit('[lookup(c) for c in coords]', 'from __main__ import coords, lookup_map as lookup', number=10000)
3.883746862411499
>>> timeit.timeit('[lookup(c) for c in coords]', 'from __main__ import coords, lookup_ord as lookup', number=10000)
4.582481861114502
>>> timeit.timeit('[lookup(c) for c in coords]', 'from __main__ import coords, lookup_index as lookup', number=10000)
9.782031059265137 
```

字典（映射）方法是最快的；using`ord()`紧随其后（如果您`ord('A')`只计算一次），并且 using`.index()`需要几乎三倍的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:50:51.967

```
def letter_to_number(letter):
    return ord(letter.upper()) - ord('A') 
```

之所以有效，是因为它会以任何字符集`ord(x)`返回字符的值`x`——而且，无论是 ASCII、Latin-1、UTF-8 还是其他字符，字母都是按顺序排列的。

您可以通过在交互式解释器中进行试验来看到这一点：

```
>>> ord('A')
65
>>> ord('B')
66
>>> ord('F')
70
>>> ord('F') - ord('A')
5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:50:29.723

要将字符转换为整数，您可以这样做：

```
def char_to_num(char):
    return ord(char)-ord('A') 
```

要访问网格中的字符，您可以执行以下操作（我假设输入称为`input`）：

```
word = ""
for position in input.upper():
   word += grid[char_to_num(position[0])][char_to_num(position[1])] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T12:50:42.700

```
>>> input_string = "FE CC ED ED CD"

# Convert input string into integers
# `ord()` converts 'A' to 65, 'B' to 66, etc
>>> pairs = [tuple(ord(letter) - ord('A') for letter in pair) for pair in input_string.split()]
[(5, 4), (2, 2), (4, 3), (4, 3), (2, 3)]

# Now just retrieve the tuples from the list of pairs
# And look up the index in the grid
>>> output = ''.join(grid[x][y] for x, y in pairs)
'HELLO' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T12:55:42.053

```
index=input('Enter the index:')
index=list(index)
a=[ord(i)-ord('A') for i in index]
print(grid[a[0]][a[1]]) 
```

# ruby-on-rails-3 - Rails 3 + Devise：自定义路线问题

> ID：14182250
> 
> 赞同：0
> 
> 时间：2013-01-06T12:45:41.597
> 
> 标签：ruby-on-rails-3, login, devise, rails-routing

我已经按照设计[wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Change-the-default-sign_in-and-sign_out-routes)将登录路线`/users/sign_in`从`/login`. 我的路线文件如下所示：

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }

devise_scope :user do
  get '/login'    , :to => 'devise/sessions#new'    , :as => :login
  delete '/logout', :to => 'devise/sessions#destroy', :as => :logout
end 
```

我的用户模型有这个

```
class User < ActiveRecord::Base
  devise :omniauthable, :database_authenticatable
end 
```

我有一个常见的场景，用户注销，尝试访问受限页面，然后重定向到自己登录。

但是，当该用户被重定向时，devise 会将它们发送到`/users/sign_in`path 而不是`/login`.

我可以使重定向到`/login`url 工作的唯一方法是将其添加到我的顶部`routes.rb`：

```
match "/users/sign_in" => redirect('/login') 
```

它为我的应用程序添加了一个重定向，这反过来又搞乱了测试——每当我做这样的事情时：

```
current_url.should == login_path 
```

我收到一条错误消息，提示预期路径是“/login”，而实际路径是“/users/sign_in”。

我在这里错过了什么吗？解决它的优雅方法是什么？谢谢。

### 边注

我只用于`:omniauthable`身份验证，但我添加`:database_authenticatable`了设计配置以强制它进入专用登录页面。

否则，设计总是指向根路径，看起来是这样。如果您知道更好的方法，请加入。

# java - 在 JBoss 7.1.1 下使用应用程序的 Log4J 配置

> ID：14182257
> 
> 赞同：8
> 
> 时间：2013-01-06T12:46:31.923
> 
> 标签：java, logging, jboss, log4j, jboss7.x

我在使用 XML log4j 配置文件中定义的附加程序进行日志记录时遇到问题。

我在EAR 的 META-INF 文件夹上创建了**jboss-deployment-structure.xml ，但没有成功。**

**jboss-deployment-structure.xml**结构是：

```
<jboss-deployment-structure>
<ear-subdeployments-isolated>false</ear-subdeployments-isolated>
    <deployment>
        <exclusions>
            <module name="org.apache.log4j" slot="main"/>
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

我什至尝试编辑我的**standalone.conf.bat**文件，添加以下行：

```
set "JAVA_OPTS=%JAVA_OPTS% -Dorg.jboss.as.logging.per-deployment=false" 
```

我的应用程序部署是这样的：

```
-> MyAppEAR.ear
   -> META-INF
      -> MANIFEST.MF
   -> MyAoo.war
      -> META-INF
         -> MANIFEST.MF
         -> jboss-deployment-structure.xml
      -> WEB-INF
         -> web.xml
         -> lib
            -> log4j-1.2.17.jar
            -> ---
         -> classes
            -> log4j.xml
            -> ... 
```

我注意到以下错误：

*   **子部署中的 jboss-deployment-structure.xml 被忽略。jboss-deployment-structure.xml 仅针对顶级部署进行解析。**

我什至尝试从 JBOSS 7.1.0 迁移到 7.1.1

请帮忙！

谢谢

* * *

感谢詹姆斯的回复。

我照你说的做了，把**jboss-deployment-structure.xml**文件移到了**MyAppEAR.ear/META-INF**。

我注意到这种方式例外：

```
jboss-deployment-structure.xml in subdeployment ignored. jboss-deployment-structure.xml is only parsed for top level deployments. 
```

...不会发生。我不知道这是否意味着文件已被解析......我怎么知道？

尽管有这种新行为，我的**log4j.xml**配置文件仍然没有加载，并且使用的记录器仍然是 Log4J 的。

我知道这是因为我写信给控制台：

```
System.out.println(Logger.getRootLogger().getClass().toString()) 
```

...并得到：

```
class org.jboss.logmanager.log4j.BridgeLogger 
```

我也试过：

*   将我的**log4j.xml**移动到**MyAppEAR.ear/META-INF**。
*   从**standalone.conf.bat**中删除不必要的**-Dorg.jboss.as.logging.per-deployment=false**
***   从我的**jboss-deployment-structure.xml 中**删除**插槽****

 ****还有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:42:19.637

嗨 RedEagle 看到以下我已经测试过的配置并且它工作正常...
**步骤 1** 创建一个新模块为

jboss-as-7.1.1.Final/modules/com/company/mylog/main/

```
 -module.xml
                          -log4j-1.2.14.jar

Content of  module.xml

 <?xml version="1.0" encoding="UTF-8"?>
      <module xmlns="urn:jboss:module:1.0" name="com.company.mylog">
    <resources>
      <resource-root path="log4j-1.2.14.jar"/>
    </resources>
    <dependencies>
      <module name="javax.api"/>
         </dependencies>
      </module> 
```

**步骤 2** 现在在 my.ear/META-INF/

```
 -jboss-deployment-structure.xml
          -MANIFEST.MF 
```

jboss-deployment-structure.xml 的内容

```
 <jboss-deployment-structure>
              <deployment>

                  <exclusions>
                  <module name="org.apache.log4j" />
                  </exclusions>

              </deployment>

              <sub-deployment name="MyWeb.war">
                    <exclusions>
                    <module name="org.apache.log4j" />
                    </exclusions>
              </sub-deployment>

              <sub-deployment name="MyBeans.jar">
                <exclusions>
                  <module name="org.apache.log4j" />
                </exclusions>
              </sub-deployment>

              </jboss-deployment-structure> 
```

MANIFEST.MF 的内容

```
 Manifest-Version: 1.0
        Dependencies: com.company.mylog 
```

**Step-3** MyLogger.java的内容

```
public static Logger getLogger(String name) {

    Logger  logger= LogManager.getLogger(name);
    PropertyConfigurator.configure("log4j.properties"); //Path to log4j.properties as many option available in my case for testing i used static path /home/gyani/log4j.properties
    return logger;
} 
```

**第 4 步** 这里是 log4j.properties

```
log4j.rootLogger=info,gyani
log4j.appender.gyani=org.apache.log4j.RollingFileAppender
log4j.appender.gyani.File=/home/gyani/myserverlog.log
log4j.appender.gyani.Append=true
log4j.appender.gyani.MaxFileSize=100000KB
log4j.appender.gyani.MaxBackupIndex=10
log4j.appender.gyani.layout=org.apache.log4j.PatternLayout
log4j.appender.gyani.layout.ConversionPattern=[%d{MMM d HH:mm:ss yyyy}] [%-5p] [%c]: %m%n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:30:44.823

您`jboss-deployment-structure.xml`需要在您的`MyAppEAR.ear/META-INF`目录中。这种情况下也不需要`slot`属性。

在 JBoss AS 7.1.1.Final 中也`-Dorg.jboss.as.logging.per-deployment=false`没有使用 ，但它也不会伤害任何东西。****

# c++ - C++11：用原子编写移动构造函数 成员？

> ID：14182258
> 
> 赞同：33
> 
> 时间：2013-01-06T12:46:34.453
> 
> 标签：c++, c++11, atomic, move-semantics, libstdc++

我有一个带有原子成员变量的类：

```
struct Foo
{
  std::atomic<bool> bar;
  /* ... lots of other stuff, not relevant here ... */
  Foo() 
  : bar( false )
  {}

  /* Trivial implementation fails in gcc 4.7 with:
   *   error: use of deleted function ‘std::atomic<bool>::atomic(const td::atomic<bool>&)’
   */
  Foo( Foo&& other )
  : bar( other.bar )
  {}
};

Foo f;
Foo f2(std::move(f));  // use the move 
```

移动构造函数应该如何？

Gcc 4.7 不喜欢我的任何尝试（比如`std::move()`在 周围添加`other.bar`），而且这里的网络出奇地安静......

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-06T14:21:03.297

`std::atomic`不可复制或可移动，因为[它的复制构造函数被删除](http://en.cppreference.com/w/cpp/atomic/atomic/atomic)并且没有定义移动构造函数。您必须显式加载另一个值并使用它来构造新值，正如 gustaf 的回答中所指出的那样。

为什么`std::atomic`不能移动？由于它是一个同步原语，所有线程必须在相同的数据（即相同的地址）上进行同步。当你复制（或移动）一个原子值时，你必须使用一些通信协议。它可能很简单，就像在您的示例中一样（只需加载它并使用它来初始化新的原子），但总的来说，我认为 C++11 强制您考虑它是一个很好的设计决策。否则，它可能会导致代码看起来不错，但存在一些细微的同步问题。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-06T13:05:54.917

由于您要搬家`other`，因此没有其他人可以访问它。所以从它读取`bar`是安全的，不管它是不是原子的。

`atomic<T>`只有两个构造函数，一个是 default `()`，另一个是`(T)`. 因此，您的代码看起来应该可以编译。如果没有，如果你 static_cast `other.bar`to`T`强制使用`(T)`构造函数会发生什么？

`: bar( static_cast< bool >( other.bar ) )`

或等于，也许不那么难看：

`: bar( other.bar.load( ) )`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T15:46:23.407

的模板实例化`atomic<bool>`基本上如下所示：

```
struct atomic<bool>
{
    atomic<bool>(bool);
    atomic<bool>( const atomic<bool>& ) = delete;
    operator bool() const;
} 
```

因此，当您尝试复制它时：

```
atomic<bool> a = ...;
atomic<bool> b(a); 
```

选择了已删除的复制构造函数并导致编译错误。

您需要显式转换为 bool 才能通过`operator bool() --> atomic<bool>(bool)`...

```
atomic<bool> a = ...;
atomic<bool> b(bool(a)); 
```

# git - 如何通过获取当前分支中的版本来自动解决 Git 冲突？

> ID：14182259
> 
> 赞同：31
> 
> 时间：2013-01-06T12:46:45.493
> 
> 标签：git, merge, automation, conflict

假设我`foo/bar.txt`在运行时遇到了合并冲突：

```
$ git checkout A
$ git merge B 
```

我想通过`foo/bar.txt`从分支 A 自动解决冲突。（我知道我在做什么，我确实需要这个。分支 B 中的版本是错误的，我不在乎丢失工作中的更改在这种情况下是树。）看来我可以通过运行这些命令来做到这一点：

```
$ git reset    foo/bar.txt
$ git checkout foo/bar.txt 
```

有没有更简单的单命令解决方案？

不幸的是`foo/bar.txt`，即使没有冲突，这些命令也会改变，我不希望这样。如果没有冲突，我想保持它离开`foo/bar.txt`的任何状态。`git merge B`

所以我需要一个 Unix shell 命令，它会检测 中是否存在冲突`foo/bar.txt`，如果存在，它将通过`foo/bar.txt`从当前分支获取版本来解决冲突。它不会做任何其他事情，即它不会修改其他文件，它不会提交更改，并且`foo/bar.txt`如果该文件中没有冲突，它也不会更改。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-06T12:51:28.153

您可以`ours`为`recursive`（默认）合并策略指定合并策略选项。它会做一个正常的合并，但如果发生冲突，帅哥会选择当前分支的版本。

```
git checkout A
git merge -Xours B 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-06T19:38:59.580

如果你想一次性完成，单行命令是：

```
$ git checkout --ours foo/bar.txt  # <-- resets it only if the merge found conflicts in this file
$ git checkout HEAD -- foo/bar.txt # <-- resets it to that specific version no matter what 
```

要将 git 的合并配置为永久忽略对本地更改文件的所有上游更改：

```
$ git config merge.pin.driver true
$ echo foo/bar.txt merge=pin >> .git/info/attributes 
```

（`true`上面只是 unix`true`命令，它的成功表明它使本地版本看起来正确，在这种情况下，什么都不做。你当然可以用你的合并命令变得更复杂。）

我认为您不希望`merge --strategy=ours`or `--strategy-option=ours`，这些适用于整个合并。

# scala - 如何将 scala-library.jar 添加到 bootclasspath

> ID：14182266
> 
> 赞同：0
> 
> 时间：2013-01-06T12:47:29.567
> 
> 标签：scala, maven, build

我混合了scala java项目（maven）。我遇到了一堆错误。我搜索了一些论坛，发现我需要将 scala-library.jar 添加到 bootclasspath。但是，由于我是新手，我不知道该怎么做。如果有人能在这里一步一步地指导我，我将不胜感激。
我正在使用intellij。linux

这是我得到的错误：

[scalac] java.lang.Error: typeConstructor inapplicable for [scalac] at scala.tools.nsc.symtab.SymbolTable.abort(SymbolTable.scala:35) [scalac] at scala.tools.nsc.symtab.Symbols$Symbol。 typeConstructor(Symbols.scala:868) [scalac] at scala.tools.nsc.symtab.Definitions$definitions$.scala$tools$nsc$symtab$Definitions$definitions$$booltype(Definitions.scala:157) [scalac] at scala.tools.nsc.symtab.Definitions$definitions$.init(Definitions.scala:797) [scalac] 在 scala.tools.nsc.Global$Run.(Global.scala:678) ...（以及更多.. ..)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:03:54.860

这有帮助：[Working In Scala with both IntelliJ 和 Maven](http://patterngazer.blogspot.co.at/2011/04/working-in-scala-with-both-intellij-and.html)吗？您应该将 2.10 版用于 scala-library 版本。

还有[这个 stackoverflow 问题](https://stackoverflow.com/questions/9325792/how-to-set-up-java-and-scala-in-one-single-module-in-intellij-idea-11)（链接到[devnet.jetbrains.net](http://devnet.jetbrains.net/thread/290032)）

* * *

**编辑**：您需要更具体地进行设置以及是否涉及 IntelliJ。

我可以毫无问题地执行以下操作：

*   安装的 Maven 是 3.0.3
*   `pom.xml`从[http://davidb.github.com/scala-maven-plugin/example_java.html](http://davidb.github.com/scala-maven-plugin/example_java.html)复制示例
*   替换`scala-library`版本`2.10.0`和`maven-compiler-plugin`版本`3.0`
*   将测试代码放入`src/main/java`并`src/main/scala`
*   `mvn compile`从终端运行

作品。

# php - Drupal 7将主题（）返回到页面

> ID：14182272
> 
> 赞同：2
> 
> 时间：2013-01-06T12:48:16.153
> 
> 标签：php, drupal, drupal-themes

我正在开发一个模块，我需要从每页的主题目录中调用不同的 .tpl.php 布局。所以我目前拥有的是：

```
 return theme('adverts_index', array('adverts' => $advertsThemeArray)); 
```

这就是我在其中一个页面回调函数中返回的内容。现在这完美无缺，但在模块内的另一个页面回调函数中，我尝试使用不同的主题钩子进行相同的操作，但它不会调用主题钩子指定的布局。

```
 $r = theme('adverts_view_advert', array(
      'advert' => array(
        'id' => $advert->aid,
        'seller' => $advertiser,
        'more_from_user' => array(),
        'year' => $advert->year,
        'condition' => $advert->condition,
        'region' => $advert->region,
        'city' => $advert->city,
        'content' => $advert->description,
        'bids' => $allBidsArray,
      ),
    )
  );
  return $r; 
```

该页面不是完全空白的，在每个包含标题的页面上使用的 main page.tpl.php 仍然显示。只是我试图调用其内容的模板没有显示。

这是我的钩子主题：

```
 function adverts_theme() {
  $theme = array();
  $theme['adverts_index'] = array(
      'template' => 'adverts-index',
      'variables' => array(
          'advert' => array(
            'title' => null,
            'formatted_price' => null,
            'image' => null,
            'permalink' => null,
            'formatted_date' => null,
            'description' => null,
          ),
        ),
    );

  $theme['adverts_view_advert'] = array(
      'template' => 'adverts-single',
      'variables' => array(
          'advert' => array(
                'id' => null,
                'seller' => null,
                'more_from_user' => null,
                'year' => null,
                'condition' => null,
                'region' => null,
                'city' => null,
                'content' => null,
                'bids' => null,
            ),
          ),
        );
  return $theme;

} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:50:50.480

`arguments``variables`在 Drupal 7 中更改为，并且由于要么`variables`要么`render element`是必需的，因此注册表不会选择您的主题。

在`hook_theme()`实现中进行两项更改，清除缓存，您应该一切顺利。

# ruby-on-rails - 上限监控：设置失败

> ID：14182273
> 
> 赞同：0
> 
> 时间：2013-01-06T12:48:18.837
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, monit

我正在使用[monit](http://mmonit.com/monit/)来监控我的 rails 应用程序。这是我的**monit.rb**文件：

```
namespace :monit do
  desc "Install Monit"
  task :install do
    run "#{sudo} apt-get -y install monit"
  end
  after "deploy:install", "monit:install"

  desc "Setup all Monit configuration"
  task :setup do
    #monit_config "monitrc", "/etc/monit/monitrc"
    #nginx
    #unicorn
    monit_config "nginx"
    syntax
    reload
  end
  after "deploy:setup", "monit:setup"

  task(:nginx, roles: :web) { monit_config "nginx" }
  task(:unicorn, roles: :app) { monit_config "unicorn" }

  %w[start stop restart syntax reload].each do |command|
    desc "Run Monit #{command} script"
    task command do
      run "#{sudo} service monit #{command}"
    end
  end
end

def monit_config(name, destination = nil)
  destination ||= "/etc/monit/conf.d/#{name}.conf"
  template "monit/#{name}.erb", "/tmp/monit_#{name}"
  run "#{sudo} mv /tmp/monit_#{name} #{destination}"
  run "#{sudo} chown root #{destination}"
  run "#{sudo} chmod 600 #{destination}"
end 
```

当我`cap monit:setup`在 monit go reload 时在日志末尾运行时，我得到：

```
** [out :: 11.111.1.11] Control file syntax OK
    command finished in 1073ms
  * executing `monit:reload'
  * executing "sudo -p 'sudo password: ' service monit reload"
    servers: ["11.111.1.11"]
    [50.116.2.102] executing command
 ** [out :: 11.111.1.11] Usage: /etc/init.d/monit {start|stop|restart|force-reload|syntax}
    command finished in 987ms
failed: "sh -c 'sudo -p '\\''sudo password: '\\'' service monit reload'" on 11.111.1.11 
```

**失败：11.111.1.11 上的“sh -c 'sudo -p '\''sudo 密码：'\'' service monit reload'”**

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:47:17.163

monit 服务守护程序没有`reload`命令参数。您可以在此处查看错误提示：

```
Usage: /etc/init.d/monit {start|stop|restart|force-reload|syntax} 
```

所以你必须选择上述论点之一。`reload`不存在。
您可能想要`force-reload`或`restart`相反。

# c# - 困难随机

> ID：14182277
> 
> 赞同：0
> 
> 时间：2013-01-06T12:48:41.833
> 
> 标签：c#, asp.net, sql-server, random

如何（甚至在逻辑上）从具有指定列值的数据库中随机**至少一个例如 Id？**

我的意思是我在数据库表 id、问题 id、答案文本值和 bool（如果答案正确）列中，我想获得例如三个答案 ID，（**至少**）其中一个是正确的。

非常感谢您的建议帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:55:22.530

看看[这个](http://www.petefreitag.com/item/466.cfm)为几个数据库做这件事。

```
SELECT TOP 3 id FROM yourtable WHERE isCorrect = 1 ORDER BY NEWID() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:07:53.127

因此，您想进行多项选择，并在*y答案中显示**x* ，其中*y*、*c*是正确的，而*w*是错误的（*c+w=y*）。

 ***我建议使用 2 个查询，首先得到一个随机的正确答案，然后得到*x-1 个*不正确的答案。我建议不要使用两个或多个正确答案，因为它只会让用户感到困惑。

要获得正确答案，您可以这样做：

```
SELECT TOP 1 ID 
FROM Answers 
WHERE QuestionID =@QuestionID -- parameter supplied from code
  AND IsCorrect = 1 
ORDER BY NEWID() 
```

之后做

```
SELECT TOP 3 ID  -- assuming the X = 4 value is hardcoded in the application
FROM Answers 
WHERE QuestionID =@QuestionID -- parameter supplied from code
  AND IsCorrect = 0
ORDER BY NEWID() 
```

如果您确实想包含任何其他答案，包括正确的答案，您可以这样做

```
SELECT TOP 3 ID
FROM Answers 
WHERE QuestionID = @QuestionID
  AND ID != @ID -- where ID is the ID of the question from the first query
ORDER BY NEWID() 
```

由于问题不会有很大的答案集（我猜不会超过 10 或 20 个），因此在每一行上使用 NEWID() 对性能来说不会很糟糕。***

# java - 使用java通过.bat运行busybox

> ID：14182278
> 
> 赞同：1
> 
> 时间：2013-01-06T12:48:40.490
> 
> 标签：java, android, batch-file

我正在尝试通过busybox执行ls命令。我正在创建一个 .bat 文件来执行我通过 .java 调用的这个命令

但是，我无法在 .bat 文件中一个接一个地执行命令。

这是我的 .bat 文件的内容

```
"C:\Documents and Settings\Some Directory\Android\android-sdk\platform-tools\adb.exe" shell
/data/busybox/busybox ls 
```

我认为一旦我通过我的 .bat 的第一行启动 shell，来自 shell 的控制就会丢失，因此不会执行第二个命令。因为如果我将我的 .bat 文件写为

```
"C:\Documents and Settings\Some Directory\Android\android-sdk\platform-tools\adb.exe" shell ls 
```

它工作正常。

我需要在我的 .bat 文件中编写命令，以便它们一个接一个地执行。我曾尝试在 .bat 中的每个命令之前使用 CALL，但它仍然不起作用。我尝试使用多个.bat，仍然是失败的原因。

有人可以帮我吗？

万分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:17:05.493

我目前无法使用 ADB 自己测试，但这适用于其他具有输入缓冲区的程序。今晚我将尝试验证这一点，但如果其他人在此之前确认，请发表评论。

```
@echo off

(   echo shell
    echo /data/busybox/busybox ls
) | adb.exe 
```

# jquery - 如何在步骤之外获取 fx 对象？

> ID：14182279
> 
> 赞同：1
> 
> 时间：2013-01-06T12:48:46.990
> 
> 标签：jquery, jquery-animate, jquery-effects

假设您有一个元素 ,`$('#myDiv')`正在被动画化。除了使用选项中的步骤之外，您将如何访问`fx`？

理想情况下，通过使用类似的东西`$('#myDiv').fx`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:51:03.103

感谢 pimvdb 的有用回答。万一有人在寻找答案时偶然发现，以下代码会生成最后一个 fx 对象：

```
$.timers[$.timers.length - 1].anim.tweens[0] 
```

我没有做过任何真正的测试，但似乎具有多个属性（即高度、不透明度等）的动画被转换为具有多个 fx 对象的多个动画。因此，如果您有多个动画属性，这将没有多大用处。

# qt - 在 Qt Creator 中构建插件期间未定义的引用

> ID：14182280
> 
> 赞同：2
> 
> 时间：2013-01-06T12:48:47.833
> 
> 标签：qt, plugins

我正在尝试为 Qt Creator 创建插件，所以我只是选择了新文件或项目/库/QtCreator 插件。我已经指定了 Qt Creator 的来源以及 Qt Creator 的构建。当我尝试构建它时，出现以下三个错误：

```
*C:\...\mypluginplugin.cpp:20: error:  
 undefined reference to `vtable for MyPlugin::Internal::MyPluginPlugin'*  //this is constructor
*C:\...\mypluginplugin.cpp:25: error:  
undefined reference to `vtable for MyPlugin::Internal::MyPluginPlugin'* //this is destructor  
    C:\...\mypluginplugin.hpp:13: error:  
   undefined reference to `MyPlugin::Internal::MyPluginPlugin::staticMetaObject' //when I double click   
on this error it moves me to my .hpp file to the Q_OBJECT macro: 
```

这是我的代码：

```
namespace MyPlugin {
namespace Internal {

class MyPluginPlugin : public ExtensionSystem::IPlugin
{
    Q_OBJECT// the last, third error moves me here

public:
    MyPluginPlugin();
    ~MyPluginPlugin();

    bool initialize(const QStringList &arguments, QString *errorString);
    void extensionsInitialized();
    ShutdownFlag aboutToShutdown();

private slots:
    void triggerAction();
};

} // namespace Internal
} // namespace MyPlugin 
```

知道如何解决这个问题吗？
**//编辑**

```
#include "mypluginplugin.hpp"
#include "mypluginconstants.hpp"

#include <coreplugin/icore.h>
#include <coreplugin/icontext.h>
#include <coreplugin/actionmanager/actionmanager.h>
#include <coreplugin/actionmanager/command.h>
#include <coreplugin/actionmanager/actioncontainer.h>
#include <coreplugin/coreconstants.h>

#include <QAction>
#include <QMessageBox>
#include <QMainWindow>
#include <QMenu>

#include <QtPlugin>

using namespace MyPlugin::Internal;

MyPluginPlugin::MyPluginPlugin()
{
    // Create your members
}

MyPluginPlugin::~MyPluginPlugin()
{
    // Unregister objects from the plugin manager's object pool
    // Delete members
}

bool MyPluginPlugin::initialize(const QStringList &arguments, QString *errorString)
{
    // Register objects in the plugin manager's object pool
    // Load settings
    // Add actions to menus
    // Connect to other plugins' signals
    // In the initialize method, a plugin can be sure that the plugins it
    // depends on have initialized their members.

    Q_UNUSED(arguments)
    Q_UNUSED(errorString)

    QAction *action = new QAction(tr("MyPlugin action"), this);
    Core::Command *cmd = Core::ActionManager::registerAction(action, Constants::ACTION_ID,
                                                             Core::Context(Core::Constants::C_GLOBAL));
    cmd->setDefaultKeySequence(QKeySequence(tr("Ctrl+Alt+Meta+A")));
    connect(action, SIGNAL(triggered()), this, SLOT(triggerAction()));

    Core::ActionContainer *menu = Core::ActionManager::createMenu(Constants::MENU_ID);
    menu->menu()->setTitle(tr("MyPlugin"));
    menu->addAction(cmd);
    Core::ActionManager::actionContainer(Core::Constants::M_TOOLS)->addMenu(menu);

    return true;
}

void MyPluginPlugin::extensionsInitialized()
{
    // Retrieve objects from the plugin manager's object pool
    // In the extensionsInitialized method, a plugin can be sure that all
    // plugins that depend on it are completely initialized.
}

ExtensionSystem::IPlugin::ShutdownFlag MyPluginPlugin::aboutToShutdown()
{
    // Save settings
    // Disconnect from signals that are not needed during shutdown
    // Hide UI (if you add UI that is not in the main window directly)
    return SynchronousShutdown;
}

void MyPluginPlugin::triggerAction()
{
    QMessageBox::information(Core::ICore::mainWindow(),
                             tr("Action triggered"),
                             tr("This is an action from MyPlugin."));
}

Q_EXPORT_PLUGIN2(MyPlugin, MyPluginPlugin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:17:38.253

我弄清楚发生了什么。好的，这是其他人的解决方案 - qtcreator 根本没有将 .hpp 文件附加到项目中，但是已经创建了。通过添加现有文件添加这些 .hpp 文件后，它现在构建良好。

# python - Python中“utf8”字符串编码的类型是什么？

> ID：14182283
> 
> 赞同：-2
> 
> 时间：2013-01-06T12:48:56.987
> 
> 标签：python, string, encoding, python-2.x

我正在使用 Python 2.7

我正在阅读一个包含“iso-8859-1”编码信息的文件。解析后，我得到字符串的结果，即`s1`：

```
>>> s1
'D\xf6rfli'
>>> type(s1)
<type 'str'>
>>> s2=s1.decode("iso-8859-1").encode("utf8")
>>> s2
'D\xc3\xb6rfli'
>>> type(s2)
<type 'str'>
>>> print s1, s2
D�rfli Dörfli
>>> 
```

为什么调用后的类型`s2`仍然是 a ？我怎样才能将它从 转换为？`str``.encode``str``utf-8`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:51:59.813

`str`在 Python 2 中表示*编码*字符串，即字节序列。这是记录在案的行为。*解码* 后的`str`类型为`unicode`.

`UTF-8`是一种**编码**，也是`ISO-8859-1`。所以你只需解码你的字符串，然后用另一种编码编码，产生相同类型的数据。

相反，在 Python 3`str`中将是一个文本字符串（在 Unicode 中），调用`encode`它会给你一个`bytes`.

因此，在 Python 2 中，UTF-8 字符串将是`str`，因为它是经过编码的。

我赞同 Ned 的建议：看看他链接到的[演示文稿](http://nedbatchelder.com/text/unipain.html)（哦，天哪，这是他自己的演讲吗？）。当我在这些事情上[挣扎](https://stackoverflow.com/q/10019268/1258041)时，它帮助了我很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:53:57.500

我不确定这是否能回答你的问题，但这是我观察到的。

如果您只想将字符串转换为可打印的形式，只需在调用 decode 后停止。我不确定您为什么在成功从 is8859 转换为 unicode 后尝试编码为 UTF8。

```
>>> s1 = 'D\xf6rfli'
>>> s1
'D\xf6rfli'
>>> s2 = s1.decode("iso-8859-1")
>>> s2
u'D\xf6rfli'
>>> print s2
Dörfli
>>> 
```

# jquery - 使用 jQuery 创建选项卡，但在顶部显示内容

> ID：14182286
> 
> 赞同：0
> 
> 时间：2013-01-06T12:49:13.253
> 
> 标签：jquery, html, css

我尝试了一些标签脚本，但我想我正在寻找更具体的东西。

基本上我想要一些显示 div 并隐藏所有其他内容的东西，就像选项卡一样。

与此非常相似的东西

[http://jsfiddle.net/6UcDR/2/](http://jsfiddle.net/6UcDR/2/)

但我希望能够使用按钮以外的东西。我将设置图像像画廊一样水平排列。当单击一个图像时，另一个 div 标记中的某些内容会显示在其正上方的中间。单击另一张图像时，显示的图像将隐藏，而显示另一张图像。几乎就像在那个 jsfiddle 演示中所做的那样。

但是，我希望能够使用某种类型的 div ID/类来将图像与内容连接起来......所以

`<div id="blahblah"> Related Content Here </div><div id="blahblah"> Image Here </div>`

或类似的东西

`<div id="content123" class="tab_content" style="display: block;"> content here <li class="active"><a href="#content123" rel="episodelist">Episode List</a></li>`

这将使我很容易进入一个 php 循环，在那里我可以通过使用图像 ID 等来提取多个图像及其内容。

同样，我想要显示在我将拥有的链接或图像上方的内容。

所以它看起来像这样......

```
            显示的动态内容

图片1 图片2 图片3 图片4 图片5

```

此动态内容将根据单击的图像进行切换。

如果有人可以提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:30:41.577

当学习 jQuery 时，很容易专注于需要一个 ID 来处理所有事情，因为 ID 选择器非常具体。当面对每组 ID 的多个场景时，使用 ID 的编码可能会变得复杂。但是，有许多方法可以使用其他方法来匹配不同的元素，这些方法可以大大简化代码，而无需使用任何 ID。

例如，在您的按钮和演示中的内容项周围添加一个包装器，并且可以使用`index()`以下方法编写代码：

HTML：

```
<div id="content">
  <div id=a style="display:none">1</diV>
  <div id=b style="display:none">2</diV>
  <div id=c style="display:none">3</diV>
  <div id=d style="display:none">4</diV>
</div>
<div id="button_wrap">
  <input type=button value=1 id=w/>
  <input type=button value=2 id=x/>
  <input type=button value=3 id=y/>
  <input type=button value=4 id=z/>
</div> 
```

JS：

```
$(function(){
    $('#button_wrap input').click(function(){
      /* hide all content, show item that  matches index of this button*/
      $('#content').children().hide().eq( $(this).index() ).show()
    });
}); 
```

为相似项添加类也是选择器的一大帮手

演示：http: [//jsfiddle.net/6UcDR/38/](http://jsfiddle.net/6UcDR/38/)

API参考：

[http://api.jquery.com/index/](http://api.jquery.com/index/)

[http://api.jquery.com/eq/](http://api.jquery.com/eq/)

花一些时间浏览 API 中的各种遍历方法和示例。了解各种遍历的作用将帮助您生成更多动态布局和用户界面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:52:17.207

```
$(".contet").each( function() {
  $(this).hide();
});
$(".tab").on("click", function() {
  var s = $(this).attr("id");
  var g = $("#"+s+".contet").html();
  $(".content").html(g);
}); 
```

[使用纯 jQuery 工作小提琴](http://jsfiddle.net/AR6nr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:06:09.583

```
<script src="../../jquery-1.8.0.js"></script>
    <script src="../../ui/jquery.ui.core.js"></script>
    <script src="../../ui/jquery.ui.widget.js"></script>
    <script src="../../ui/jquery.ui.tabs.js"></script>
    <link rel="stylesheet" href="../demos.css">
    <script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>
<div class="demo">

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        <p>Image1</p>
    </div>
    <div id="tabs-2">
        <p>Image2</p>
    </div>
    <div id="tabs-3">
        <p>Image3</p>
    </div>
        <div id="tabs-4">
        <p>Image4</p>
    </div>
 <div id="tabs-5">
        <p>Image5</p>
    </div>

</div>

</div> 
```

# wordpress - 更改 Wordpress 标记工具提示

> ID：14182290
> 
> 赞同：0
> 
> 时间：2013-01-06T12:49:46.830
> 
> 标签：wordpress, tags

如何将标签工具提示更改为标签描述？

我试过了，下面提到了我的代码。

```
function title_text( $description ) {
    return sprintf( _n('%s topic', '%s', $description), $description );
}

wp_tag_cloud( array( 'topic_count_text_callback' => 'title_text') ); 
```

这是行不通的。任何人都可以检查此代码并找到正确的解决方案吗？

# pic - 我想运行连接到 PIC16F628A 的电机 ..？我需要 PIC BASIC 代码？

> ID：14182294
> 
> 赞同：0
> 
> 时间：2013-01-06T12:50:14.480
> 
> 标签：pic, basic, mplab

我有一个 PIC16F628A，我有 2 个电机连接到该 PIC 的引脚。引脚 RB0 和 RB1 连接到右侧电机。引脚 RB2 和 RB3 连接到左侧电机。我使用 MPLAB 作为从 .pbp 到 .hex 的编译器。我想编写一个 PIC BASIC 程序（.pbp）来移动其中一个电机（例如：左一个）......我刚刚写了一个像这样的简单代码段。

```
TRISB= %11110000

PORTB.2=0 
PORTB.3=0

MAINLOOP:

PORTB.2=1 
PAUSE 50 
PORTB.3=1 
PAUSE 50

GOTO MAINLOOP

END 
```

编译器编译正确，我烧录hex文件成功后，放猪，然后启动，什么都看不到……！我对这种编程语言真的很业余，我只想问我是否需要编写任何其他代码段来运行我的电机？或者以前有没有人有过这样的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-26T02:51:53.343

```
list p=16F628A
    include <P16F628A.INC>

    cblock 0x20
        COUNT1
        COUNT2
    endc

    org 0x00

init    movlw .50
        movwf COUNT1
        movwf COUNT2
        ;;;SET PWM FREQUENCY;;;
        bank1         ;SELECT BANK 01
        movlw D'128'  ;SET PR2 TO 128 DECIMAL SO THE PWM PERIOD = 2064uS => PWM FREQUENCY = 484Hz
        movwf PR2
        bank0         ;SELECT BANK 00
        clrf CCPR1L   ;SET PWM STARTING DUTY CYCLE;;;
        comf CCPR1L
        movlw B'00001100' ;SET PWM MODE, BITS 5 AND 4 ARE THE TWO LSBs OF THE 10BIT DUTY CYCLE REGISTER (CCPR1L:CCP1CON<5:4>)
        movwf CCP1CON     ;SET PWM PIN TO OUTPUT MODE;;;
        bank1             ;SELECT BANK 01
        bcf TRISB, 3      ;SET RB3 AS OUTPUT, TO USE FOR PWM
        bank0             ;SELECT BANK 00
        movlw B'00000010' ;SET TIMER 2 PRESCALE VALUE;;;PRESCALE = 16 SO THE PWM PERIOD = 2064uS => PWM FREQUENCY = 484Hz
        movwf T2CON
        clrf TMR2         ;CLEAR TIMER 2 MODULE;;;
        bsf T2CON, TMR2ON ;ENABLE TIMER 2 MODULE;;;

main    call DELAY
        goto main

DELAY
loop1       decfsz COUNT1,1
            goto loop1
            decfsz COUNT2,1
            goto loop1
            return
            end 
```

# c# - 使用正则表达式从日志文件中提取数据

> ID：14182295
> 
> 赞同：0
> 
> 时间：2013-01-06T12:50:19.780
> 
> 标签：c#, .net, regex

我有以下日志文​​件

```
 10:12:28.571 INFO INFO McEvent (ExitWaitPostProcess) Stage: 2 
    10:12:28.571 INFO McReplay:StatusEvent: 0C0000004576656E74496E666F207631260000000A000000484C4D494E464F207631C0A80A0100007F0000010000010100000000000100000046658FDC5008000000303331333030303115000000
    5761697420666F7220706F73742070726F636573735E00000045786974205761697420666F7220706F73742070726F63657373205374616765204E6F322C20592D617869732846726F6E742053696465292C202852656172204C616E65292C205043422049443A20202020202020202020202020202020
    10:12:28.571 INFO McReplay:StatusEvent verbose: event:03130001, msg:'Wait for post process',  submsg:'Exit Wait for post process Stage No2, Y-axis(Front Side), (Rear Lane),  ID:                '
    10:12:28.571 INFO INFO McEvent (ExitWaitPostProcess) Stage: 2 
```

我的正则表达式应该如何提取 McReplay 之后的内容，直到以时间戳开头的第一行。我在文件中出现了几次，我需要所有这些。

我想到了类似的东西

```
 new Regex(@"^(\d\d:\d\d:\d\d\.\d\d\d) INFO McReplay:(.*?)(\d\d:\d\d:\d\d\.\d\d\d)",
                           RegexOptions.Singleline | RegexOptions.Multiline); 
```

似乎我对这部分有疑问`(.*?)(\d\d:\d\d:\d\d\.\d\d\d)`

我应该在这里解决什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:10:09.123

这将找到所有出现

```
 List<string> results = new List<string>();
     MatchCollection mc = Regex.Matches("yourstring", "McReplay:(.+?)[0-9]{2}:[0-9]{2}:[0-9]{2}", RegexOptions.Singleline);
     foreach (Match item in mc)
     {
        results.Add(item.Result("$1"));
     } 
```

# javascript - 如何处理AngularJS中文本输入的条件焦点和选择？

> ID：14182297
> 
> 赞同：1
> 
> 时间：2013-01-06T12:50:34.023
> 
> 标签：javascript, angularjs

在此示例代码[http://plnkr.co/l6kv7x](http://plnkr.co/l6kv7x)中，我想将焦点移到文本输入中，并在用户单击编辑按钮时选择内容，但我不知道如何在 AngularJS 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:44:16.583

这个问题与[AngularJS - Focusing an input element when a checkbox is clicked](https://stackoverflow.com/questions/14076783/angularjs-focusing-a-input-element-when-a-checkbox-is-clicked)非常相似，所以这里有一个非常相似的解决方案：一个`focus`指令，它`editing`作为一个属性：

```
app.directive('focus', function() {
    return function(scope, element, attrs) {
        scope.$watch(attrs.focus, function(newValue) {
            newValue && element[0].focus()
        })
    }
}); 
```

正如@Josh 已经指出的那样，我们可以使用原生 DOM focus() 方法，通过使用 element[0] 访问原始 DOM 元素——元素本身是一个包装的 jqLit​​e（或 jQuery，如果已加载）元素。

的HTML：

```
<input ng-show="editing" type="text" ng-model="text" value="{{text}}"
  focus="editing"> 
```

[小提琴](http://jsfiddle.net/mrajcok/QP67h/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T22:59:58.113

使用 AngularJS 没有直接的方法。您必须使用 JavaScript 或 JavaScript 库（如 jQuery）进行 DOM 操作，但不建议在控制器内执行任何 DOM 操作。你想要做的是使用指令。

# objective-c - UITableView 不显示 NSMutableArray 中的数据

> ID：14182298
> 
> 赞同：0
> 
> 时间：2013-01-06T12:50:36.110
> 
> 标签：objective-c, uitableview, uisearchbar

请帮我解决这个问题。在过去的 4 天和晚上，我找不到任何问题。这是我在另一个项目中已经做过的简单工作。但不同的是，这是我第一次将 UISearchBar 与 Display Controller 一起使用。无论如何，这是我的代码。

mnuSearch.h

```
#import <UIKit/UIKit.h>
#import "constants.h"
#import "JSON.h"
#import "Initial.h"

@interface mnuSearch : UIViewController<UITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchDisplayDelegate> {

}

@property (retain) NSMutableArray *_arrSearchNews;

@property (nonatomic, retain) IBOutlet UISearchBar *txtSearchBox;
@property (nonatomic, retain) IBOutlet UITableView *tblNewsSearch;

@end 
```

mnuSearch.m

```
#import "mnuSearch.h"

@interface mnuSearch ()

@end

@implementation mnuSearch

@synthesize _arrSearchNews;
@synthesize txtSearchBox, tblNewsSearch;

#pragma mark - When "search button" in keyboard is clicked
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    [searchBar setShowsCancelButton:NO animated:YES];
    [searchBar resignFirstResponder];
    [self searchNews:searchBar.text];
    [self.tblNewsSearch reloadData];
}

#pragma mark - Search news
-(void)searchNews:(NSString*)query {
    // Retrieve searched news list
    NSString *url = [NSString stringWithFormat:@"http://mydomain.com/NewsSearch.ashx?a=%@&b=%@&c=%@", currentLocale, uniqueID, [Initial getUrlEncode:query]];
    NSURLRequest *_rqJsonDataList = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
    NSData *_rpJsonDataList = [NSURLConnection sendSynchronousRequest:_rqJsonDataList returningResponse:nil error:nil];
    NSString *_strJsonDataList = [[NSString alloc] initWithData:_rpJsonDataList encoding:NSUTF8StringEncoding];
    NSDictionary *_nsDicJsonDataList = [_strJsonDataList JSONValue];
    NSString *_strStatusCode = [_nsDicJsonDataList objectForKey:@"StatusCode"];
    NSString *_strStatusMessage = [_nsDicJsonDataList objectForKey:@"StatusMessage"];

    // OK
    if ([_strStatusCode isEqualToString:@"OK"]) {
        NSArray *_arrList = [_nsDicJsonDataList objectForKey:@"Table1"];
        [self._arrSearchNews removeAllObjects];
        [self._arrSearchNews addObjectsFromArray:_arrList];
    }
    // Error
    else {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:nil
                                                   message:_strStatusMessage
                                                  delegate:nil
                                         cancelButtonTitle:nil
                                         otherButtonTitles:@"OK",nil];

        [alert show];
    }
}

#pragma mark - [UITableView] Number of Sections
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

#pragma mark - [UITableView] Number of Rows In Section
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    int _retValue = 0;

    _retValue = [_arrSearchNews count];

    return _retValue;
}

#pragma mark - [UITableView] Return table view cell
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"mnuSearchCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellIdentifier];
    }

    // Set font
    UIFont *textLabelFont = [UIFont fontWithName:@"Helvetica" size:14];
    cell.textLabel.font = textLabelFont;
    UIFont *detailTextLabelFont = [UIFont fontWithName:@"Helvetica" size:12];
    cell.detailTextLabel.font = detailTextLabelFont;

    cell.imageView.image = nil;

    NSDictionary *_nsDic = [self._arrSearchNews objectAtIndex:indexPath.row];
    NSString *abc = [NSString stringWithFormat:@"[%@] %@", [_nsDic objectForKey:@"GUBUN_NM"], [_nsDic objectForKey:@"TSUBJECT"]];
    NSLog(@"%@", abc);    **//--> This returns text I wanted.**
    cell.textLabel.text = [NSString stringWithFormat:@"[%@] %@", [_nsDic objectForKey:@"GUBUN_NM"], [_nsDic objectForKey:@"TSUBJECT"]];
    cell.detailTextLabel.text = nil;

    return cell;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    self._arrSearchNews = [[NSMutableArray alloc] init];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidUnload {
    [self setTblNewsSearch:nil];
    [self setTxtSearchBox:nil];
    [super viewDidUnload];
}
@end 
```

我真的不明白为什么我的 UITableView 不返回任何数据。当我在搜索框中输入一些关键字时，它显示“无结果”。当我在键盘上单击“搜索”时，我的应用程序会从 json 获取数据。"_arrSearchNews" 有 340 个对象。但 UITableView 仍然显示“无结果”。请帮我解决这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:22:07.010

UISearchDisplayController 显示一个 tableView，搜索结果覆盖在普通 tableView 之上，因此您需要确保正确设置 searchDispllayController 的 searchResultsDelegate 和 searchResultsDataSource 以便它知道如何填充 tableView。

# php - PHP - 显示重复上传的文件

> ID：14182303
> 
> 赞同：0
> 
> 时间：2013-01-06T12:50:58.187
> 
> 标签：php, file

我已经使用此代码显示从数据库上传的文件，首先用户需要选择一个文件名，然后他可以使用“下载”选项查看文件详细信息（名称 + 大小 + mime ..），问题是这个页面是重复文件详细信息 4 次，名称、大小和下载全部重复，有什么问题？

这是我的代码

```
 $sql = "SELECT r.id, r.name , r.mime, r.size, r.date , s.email
          from project_report AS r
          JOIN evaluator_supervisor AS e
          JOIN student AS s      
          WHERE (s.PID = $PID AND e.EID1 = '$id' AND s.SID=r.SID) OR (s.PID = $PID AND e.EID2 = '$id' AND s.SID=r.SID) ";

$result = $dbLink->query($sql);

// Check if it was successfull
if($result) {
    // Make sure there are some files in there
    if($result->num_rows == 0) {
        echo '<p>"Sorry, No files uploaded"</p>';
    }
    else {
        // Print the top of a table
         echo '<center>';
        echo '<table width="90%">
                <tr>
                    <td><b>Name</b></td>

                    <td><b>Mime</b></td>
                    <td><b>Size (bytes)</b></td>
                    <td><b>Date</b></td>
                    <td><b>&nbsp;</b></td>
                    <td><b>Feedback</b></td>
                </tr>';

        // Print each file
        while($row = $result->fetch_assoc()) {
            echo "
                <tr>
                    <td>{$row['name']}</td>

                    <td>{$row['mime']}</td>
                    <td>{$row['size']}</td>
                    <td>{$row['date']}</td>
                    <td><a href='Download.php?id={$row['id']}'>Download</a></td>
                    <td><a href='messege2.php?id={$row['email']}'><img src='mail2.gif'/></a></td>
                </tr>";
        }

        // Close table
        echo '</table>';
         echo '</center>';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:02:41.040

添加`GROUP BY r.id`到您的mysql查询？

编辑：

您的查询不包含任何条件如何加入`evaluator_supervisor AS e`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:59:23.307

请确保您的 SQL 查询不会为`$id`和的某些值生成重复的元组`$PID`。例如，如果单个“project_report”有多个“evaluator_supervisor”，则可能会发生这种情况。

手动尝试程序外部的查询。

我不知道表格的结构，所以我不了解您查询的完整逻辑：您最好自己弄清楚或在此处发布。

# delphi - 在不关闭 TPopupMenu 的情况下检查/取消选中 TMenuItem

> ID：14182307
> 
> 赞同：4
> 
> 时间：2013-01-06T12:51:10.507
> 
> 标签：delphi, delphi-7

> **可能重复：**
> [如何在不关闭菜单的情况下选择菜单项？](https://stackoverflow.com/questions/5983217/how-to-select-a-menu-item-without-closing-the-menu)

当弹出菜单显示时，我需要选中/取消选中项目，但我不希望弹出菜单关闭并重新打开。它会导致烦人的闪烁。

到目前为止，这是我的代码：

```
type
  TForm1 = class(TForm)
    PopupMenu1: TPopupMenu;
    N11: TMenuItem;
    N21: TMenuItem;
    N31: TMenuItem;
    procedure PopupMenu1Popup(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    PopupPt: TPoint;
    procedure OptionClick(Sender: TObject);
  public
  end;

implementation

procedure TForm1.FormCreate(Sender: TObject);
begin
  Self.PopupMenu := PopupMenu1;
  PopupMenu1.OnPopup := PopupMenu1Popup;
  N11.OnClick := OptionClick;
  N21.OnClick := OptionClick;
  N31.OnClick := OptionClick;
end;

procedure TForm1.OptionClick(Sender: TObject);
begin
  PopupMenu1.Tag := 1;
  try
    (Sender as TMenuItem).Checked := not (Sender as TMenuItem).Checked;
    PopupMenu1.Popup(PopupPt.x, PopupPt.y);
  finally
    PopupMenu1.Tag := 0;
  end;
end;

procedure TForm1.PopupMenu1Popup(Sender: TObject);
begin
  if PopupMenu1.Tag = 0 then
    PopupPt := Mouse.CursorPos;
end; 
```

我的问题，这可以做得更好吗？

* * *

*编辑1：重复*接受的答案有一个小问题[如何在不关闭菜单的情况下选择菜单项](https://stackoverflow.com/a/5986290/1140885)：

如果我`Item.Checked := not Item.Checked`在`Item.Click;`（`MenuSelectID`方法）之后立即设置 - 项目**没有失效**，并且在我离开项目区域并回车之前不会绘制支票......我也尝试过：`CheckMenuItem(Menu.Handle, ItemID, MF_BYCOMMAND or MF_CHECKED);`- 效果相同。

所以，我回到零基础，因为我的主要目标是检查/取消选中菜单项。与 Microsoft Office 中的[状态栏上下文菜单](http://privat.rejbrand.se/officestatuscontext.png)相同（至少 2010）：

* * *

编辑 2：`InvalidateRect(FPopupWindowHandle, nil, False);`在设置`Checked`修复失效问题后立即添加。

# java - 在使用 Class 对象时，我们可以使用带有 Class 名称的 String 吗？

> ID：14182312
> 
> 赞同：-1
> 
> 时间：2013-01-06T12:52:14.667
> 
> 标签：java, oop

我有以下代码：

```
for(President obj : SomeClass.SomeObject(President.class))
{
    System.out.println(obj.getFullText());
} 
```

在这里，有各种各样的类，实际上是一个巨大的列表，例如总统、汽车、火车、产品、男性姓名、女性姓名等。所有这些类都在其中包含方法 getFullText()。

现在，而不是写：

```
for(President obj : SomeClass.SomeObject(President.class))
{
    System.out.println(obj.getFullText());
}

for(Car obj : SomeClass.SomeObject(Car.class))
{
    System.out.println(obj.getFullText());
}

.. and so on 
```

我想要一个通用的简短方法，它可以采用“President”、“Car”、“Product”等所有名称的字符串表示形式，然后在该特定类对象“obj”上调用此方法，以便在循环内我可以用这个方法的返回值做我想做的事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:54:05.573

答案是使用[*反射*](http://docs.oracle.com/javase/tutorial/reflect/index.html)。但这很复杂，如果你不小心，会导致各种微妙的问题。

最好的策略是重新考虑您的设计以避免需要这样做。一种选择是使用[*工厂模式*](http://en.wikipedia.org/wiki/Factory_pattern)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T12:55:45.907

假设该类有一个没有任何参数的公共构造函数，并且被调用`com.mydomain.app.Car`，则以下加载该类并调用构造函数：

```
Class<?> clazz = Class.forName("com.mydomain.app.Car");
Car car = (Car) clazz.newInstance(); 
```

那叫*反射*。但是对于特殊类型的问题，应该很少使用它。您应该告诉我们您真正想要实现的目标，以便我们可以帮助您以更类型安全、OO 和高效的方式实现它。例如，您可以使用工厂模式：

```
public interface Drivable {
    public void drive();
}

public class Car implements Drivable {
    ...
}

public class Bus implements Drivable {
    ...
}

public class DrivableFactory {
    public static Drivable create(String kind) {
        if ("bus".equals(kind)) {
            return new Bus();
        }
        else if ("car".equals(kind)) {
            return new Car();
        }
        else {
            throw new ImmegalArgumentException("sorry, I can't create " + kind);
        }
    }
}

public class Main {
    public static void main(String[] args) {
        Drivable d = DrivableFactory.create(args[0]);
        d.drive();
    }
} 
```

# wpf - 如何装饰 VirtualizingStackPanel

> ID：14182316
> 
> 赞同：1
> 
> 时间：2013-01-06T12:52:27.173
> 
> 标签：wpf, wpf-controls, decorator, virtualizingstackpanel

有没有简单的方法来装饰`VirtualizingStackPane`l？如果我`VirtualizingStackPanel`直接输入`ScrollViewer`，虚拟化就可以了。我的目标是覆盖该`Decorator.OnRender()`方法并在`Panel`.

```
<Window.Resources>
    <ControlTemplate x:Key="MyControlTemplate">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <ScrollViewer CanContentScroll="True">
                <Border> <!--Decorator breaks virtualization-->
                    <VirtualizingStackPanel IsItemsHost="True"/>
                </Border>
            </ScrollViewer>
        </Grid>
    </ControlTemplate>
</Window.Resources>

<ItemsControl x:Name="MyControl" Template="{StaticResource MyControlTemplate}"/> 
```

# windows-runtime - 如何在现代/地铁应用程序中捕捉应用程序切换？

> ID：14182323
> 
> 赞同：0
> 
> 时间：2013-01-06T12:53:26.497
> 
> 标签：windows-runtime, lifecycle, winjs

我想知道，当用户切换应用程序（或锁定他的平板电脑）时，被调用的事件在哪里。

用例是我想在用户更改应用程序（或打开开始菜单）*时暂停播放视频。*

默认情况下，视频会继续播放。并且以一种奇怪的方式：它没有背景媒体属性，所以它在应用程序切换时被静音。但是当您再次打开应用程序时，视频位置会根据应用程序在后台运行的时间增加。

我可以在暂停时暂停视频，但应用程序不会立即暂停，因此这不是所需的用户体验。

**更新**：答案在问题中解释了[如何判断 JS Windows8 Metro 应用程序是否可见](https://stackoverflow.com/questions/11855715/how-to-tell-if-js-windows8-metro-app-is-visible-or-not)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:19:03.643

如果您想在多人场景中用户切换到另一个应用程序时也暂停游戏，您应该使用`window.onblur`和`window.onfocus`事件。

# wpf - 尝试对 WPF 上的枚举进行数据绑定时出现异常

> ID：14182324
> 
> 赞同：1
> 
> 时间：2013-01-06T12:53:34.593
> 
> 标签：wpf, data-binding, enums

我正在尝试对 WPF 上的枚举进行一些数据绑定，但出现异常。

1.  首先我有我的 NS 声明，指向我添加到项目中的引用：

    `xmlns:defs="clr-namespace:API.Definitions;assembly=API"`

    并且：

    `xmlns:sys="clr-namespace:System;assembly=mscorlib"`

2.  然后我在窗口资源中添加一个枚举：

    ```
    <Window.Resources
                <ResourceDictionary>
                    <ObjectDataProvider x:Key="someEnum"
                                    MethodName="GetValues" 
                                    ObjectType="{x:Type sys:Enum}">
                        <ObjectDataProvider.MethodParameters>
                            <x:Type TypeName="defs:someEnum" />
                        </ObjectDataProvider.MethodParameters>
                    </ObjectDataProvider>
                </ResourceDictionary>
     </Window.Resources> 
    ```

3.  我正在尝试在组合框上使用它：

    `ComboBox ItemsSource="{Binding Source={StaticResource someEnum}}"`

4.  运行它并获得 XamlParseException：

`Type reference cannot find type named '{clr namespace:API.Definitions;assembly=API}someEnum'.`

我浏览了这个 API 参考，如果我愿意，我可以清楚地看到那个枚举并在代码上使用它。我还测试了与本地枚举（未引用）的绑定，这非常有效。

一些答案暗示从 xmlns:defs="clr-namespace:API.Definitions;assembly=API" 中删除 assembly=API 应该可以解决这个问题，但事实并非如此。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:06:08.830

好的，我找到了导致它的原因——引用的 API 是为 x86 而不是“任何 CPU”构建的。对此有何解释？

# c# - WsShell.Run 不接受变量（例如 T1）作为参数或参数

> ID：14182333
> 
> 赞同：0
> 
> 时间：2013-01-06T12:54:24.597
> 
> 标签：c#

下面两个c#程序`Test1`，`Test2`一个工作，一个不工作，如果有人知道为什么，请帮忙。

```
// Not Working X    
    protected void Test1(object sender, EventArgs e)
    {
        string T1;
        T1 = "winword.exe c:/sql_pt_c/mydocx.docx";
        string javaScript =
            "<script language=JavaScript>\n" +
            "WshShell = new ActiveXObject('WScript.Shell');\n" +
            "WshShell.Run(T1, 1, true);\n" +
            "</script>";
        RegisterStartupScript("", javaScript);
    }

// Working v/
    protected void Test1(object sender, EventArgs e)
    {
        string javaScript =
            "<script language=JavaScript>\n" +
            "WshShell = new ActiveXObject('WScript.Shell');\n" +
            "WshShell.Run('winword.exe c:/sql_pt_c/mydocx.docx', 1, true);\n" +
            "</script>";
        RegisterStartupScript("", javaScript);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:00:20.887

我认为你需要连接`T1`

```
string T1 = "winword.exe c:/sql_pt_c/mydocx.docx";
string javaScript =
        "<script language=JavaScript>\n" +
        "WshShell = new ActiveXObject('WScript.Shell');\n" +
        "WshShell.Run('"+T1+"', 1, true);\n" +
        "</script>"; 
```

现在，您包含了文字字符串“T1”而不是变量的值

# javascript - Javascript 禁用按钮并重新启用它

> ID：14182335
> 
> 赞同：0
> 
> 时间：2013-01-06T12:54:26.800
> 
> 标签：javascript, button

我需要有关 javascript-php 按钮的帮助。

流程图：

```
BWAT = Button with another text-----------------ˇ

            click            counts         BWAT.    click   PHP funct.
 ENABLED ------> DISABLED X SEC ---------> ENABLED -------->MyFunction()
  ^                                                               |
  |                                                               |
  |_______________________________________________________________| 
```

1.  启用的按钮。
2.  当用户点击它时，它会被禁用 x 秒。(var sec / $sec)
3.  秒计数结束后，它会再次启用另一个按钮名称。
4.  当用户点击它时，它会运行函数。
5.  单击并运行功能后，它会以第一个启用的按钮重新启动。

就像是：

```
Cut tree -> Cutting, 10 secs left -> Collect wood (adds xp & item to db)
  ^                                        |
  |________________________________________| 
```

我只需要js部分，我会自己做PHP函数。是的，我试图找到解决方案，但找不到好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:59:02.637

功能`setTimeout`是你所需要的。假设您使用的是 jQuery，下面是示例代码：

```
$('btn_selector').click(function() {
    var $btn = $(this);
    $btn.attr('disabled', true); // disable the button
    setTimeout(function(){
           $btn.attr("name", "Cutting"); // change button's name
           $btn.removeAttr('disabled');  // reenable the button
           $btn.click(function() { // add button's listener here
             // PHP-related function here
           });
        }, 10000); // 10 sec later              
     });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:08:08.017

不使用 jquery：（[jsfiddle](http://jsfiddle.net/mZEaV/3)）

```
var myButton = document.getElementById('myButton'),
  delay = 3;
myButton.onclick = function () {
  myButton.value = 'Please wait';
  myButton.disabled = true;
  setTimeout(function () {
    myButton.value = 'Now click again';
    myButton.disabled = false;
    myButton.onclick = function () {
      asyncRequest('myPHPfunction', function () {
        myButton.value = 'Click here';
      });
    };
  }, delay * 1000);
};

function asyncRequest(url, func) {
  // asynchronously call your PHP function and carry out function when it's done
} 
```

我假设您已经有类似的东西`asyncRequest`用于`XMLHttpRequest`调用 PHP 页面，然后在完成时调用函数。

或者，由于上述内容开始变得混乱且难以阅读，您可以改为命名所有函数（而不是使用匿名函数）并将它们分组到一个对象中。（[jsfiddle](http://jsfiddle.net/mZEaV/5/)）

```
var delay = 3;
function MyButton() {
  var el = document.getElementById('myButton');
  function set(value, click) {
    el.value = value;
    el.onclick = click;
    el.disabled = click ? false : true;
  }
  function init() {
    set('Click here', wait);
  }
  function wait() {
    set('Please wait', null);
    setTimeout(waitReclick, delay * 1000);
  }
  function waitReclick() {
    set('Now click again', waitPHP);
  }
  function waitPHP() {
    set('Running the PHP', null);
    asyncRequest('myPHPFunction', init);
  }
  init();
}
new MyButton();

function asyncRequest(url, func) {
  // asynchronously call your PHP function and carry out function when it's done
  func();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:20:55.027

由于您将进行 AJAX 调用，我将继续推荐 jQuery 库 - 并将其用于 DOM 遍历。

要等待一段时间，请使用`setTimeout`javascript 函数，该函数将在所述延迟之后应该发生的事件作为回调。

要与服务器通信，您可以使用 jQuery`$.ajax`方法或更具体的方法之一。请注意，与服务器交谈需要一些时间，因此请准备好等待。当 JQuery 接收到来自服务器的成功响应时，JQuery 将调用您的回调（或立即，如果您在 AJAX 完成后附加回调 - 从 jQuery 1.5 左右开始就有可能）

您需要将替代名称存储在某处。我建议将其与按钮一起存储为数据属性：

```
<input id="cut-tree" type="button"
   data-text-before="Cut tree"
   data-text-delay="Cutting tree, please wait"
   data-text-after="Collect Wood"
   value="Cut tree"
/> 
```

jQuery 有一种轻松检索数据属性的方法`elem.data("textBefore")`：你可以在这里使用 camelCase 或 hyphen-case。

如果您不想分离和附加事件处理程序，则需要有状态处理程序：

```
var state = "before";
var $button = $("#cut-tree");
$button.click(function(){
  switch(state){
    case "before":
      state = "wait";
      $button.val($button.data("textDelay"))
       .attr("disabled", "disabled");
      setTimeout(function(){
        state = "after";
        $button.val($button.data("textAfter"))
         .removeAttr("disabled");
      }, 10000); //10000ms = 10s
      break;
    case "after":
      state = "wait"
      // change the text here as well?
      $.post("/ajax.php", {user: user, action: "addWood"})
       .done(function(){
        state="before";
        $button.val($button.data("textBefore"));
      });
      break;
    //case "wait": break;
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T13:00:26.613

你可以使用 jquery 函数来做到这一点......像这样的......

```
$('#your_btn_id').click(function() {
    $('#your_btn_id').attr('disabled', True);
}); 
```

如果您希望它在一段时间内禁用，请尝试使用 setTimeout() 函数...

```
setTimeout(function(){$("your_btn_id").attr("disabled", True);},2000); 
```

# linux - 链接共享库，调用没有自定义 LD_LIBRARY_PATH 的程序

> ID：14182336
> 
> 赞同：5
> 
> 时间：2013-01-06T12:54:27.727
> 
> 标签：linux, shared-libraries, awesomium

我可以成功链接到`libawesomium-1.6.5.so`：

```
-L-L.
-L-lawesomium-1.6.5
-L-ldl 
```

`libawesomium-1.6.5.so`与我的可执行文件在同一个目录中，现在如果我尝试调用我的程序（我现在称之为 prog），它存在于：

```
./prog: error while loading shared libraries: libawesomium-1.6.5.so.0: cannot open shared object file: No such file or directory 
```

`libawesomium-1.6.5.so.0`所以我做了一个指向的符号链接`libawesomium-1.6.5.so`，再次运行`prog`给了我同样的错误，用自定义作品调用它`LD_LIBRARY_PATH=./`，但我想分发`prog`并且我希望用户能够在`prog`没有 root 权限的情况下使用（将 awesomium 安装到`/usr/lib`等）和无需设置`LD_LIBRARY_PATH`. 一种选择是设置 . 的 shell 脚本`LD_LIBRARY_PATH`，但我更喜欢另一种方式（我也听说设置`LD_LIBRARY_PATH`是个坏主意）。

此外，如果不需要创建指向`libawesomium-1.6.5.so.0`.

**编辑：**

传递`-rpath=.`给链接器工作！但不幸的是 awesomium 无法处理它：

```
/.../awesomium_test/AwesomiumProcess: error while loading shared libraries: libawesomium-1.6.5.so.0: cannot open shared object file: No such file or directory 
```

**使用 -rpath 并从 prog 内部设置 LD_LIBRARY_PATH 有效**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T19:11:06.157

如果您使用 gcc，您可以通过`-Wl,-rpath=lib_directory`以使可执行文件搜索目录中的库`lib_directory`。

此外，此参数接受一个特殊值，该值`$ORIGIN`表示包含已执行程序的目录。因此，如果您传递`-Wl,-rpath='$ORIGIN'`给 gcc，您将能够保存`libawesomium-1.6.5.so`在与程序相同的目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:57:27.663

错误是因为 . 不在你的路上。正如您所说，您的选择是分发一个 bash 脚本，该脚本运行设置了 LD_LIBRARY_PATH 的二进制文件，或者将共享对象复制到 /usr/lib 或 /usr/local/lib 或该特定平台上合适的任何地方。

真的没有捷径，除非你想静态链接。

# python - 使用交替运算符匹配多个正则表达式模式？

> ID：14182339
> 
> 赞同：14
> 
> 时间：2013-01-06T12:55:00.187
> 
> 标签：python, regex, regex-alternation

我在使用 Python Regex 时遇到了一个小问题。

假设这是输入：

```
(zyx)bc 
```

我想要实现的是获得括号之间的任何内容作为单个匹配，以及外部的任何字符作为单个匹配。期望的结果将是：

```
['zyx','b','c'] 
```

应保持比赛的顺序。

我已经尝试使用 Python 3.3 获得它，但似乎无法找出正确的正则表达式。到目前为止，我有：

```
matches = findall(r'\((.*?)\)|\w', '(zyx)bc') 
```

`print(matches)`产生以下结果：

```
['zyx','',''] 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-06T13:00:29.003

从以下文档`re.findall`：

> 如果模式中存在一个或多个组，则返回组列表；如果模式有多个组，这将是一个元组列表。

虽然您的正则表达式匹配字符串三次，但`(.*?)`后两次匹配的组为空。如果您想要正则表达式的另一半的输出，您可以添加第二组：

```
>>> re.findall(r'\((.*?)\)|(\w)', '(zyx)bc')
[('zyx', ''), ('', 'b'), ('', 'c')] 
```

或者，您可以删除所有组以再次获取简单的字符串列表：

```
>>> re.findall(r'\(.*?\)|\w', '(zyx)bc')
['(zyx)', 'b', 'c'] 
```

不过，您需要手动删除括号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T15:01:11.833

其他答案向您展示了如何获得所需的结果，但需要手动删除括号的额外步骤。如果您在正则表达式中使用环视，则无需手动去除括号：

```
>>> import re
>>> s = '(zyx)bc'
>>> print (re.findall(r'(?<=\()\w+(?=\))|\w', s))
['zyx', 'b', 'c'] 
```

解释：

```
(?<=\() // lookbehind for left parenthesis
\w+     // all characters until:
(?=\))  // lookahead for right parenthesis
|       // OR
\w      // any character 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T13:07:56.927

让我们看看我们的输出使用`re.DEBUG`.

```
branch 
  literal 40 
  subpattern 1 
    min_repeat 0 65535 
      any None 
  literal 41 
or
  in 
    category category_word 
```

哎呀，里面只有一个`subpattern`，但如果有一个，`re.findall`只会拉出`subpattern`s！

```
a = re.findall(r'\((.*?)\)|(.)', '(zyx)bc',re.DEBUG); a
[('zyx', ''), ('', 'b'), ('', 'c')]
branch 
  literal 40 
  subpattern 1 
    min_repeat 0 65535 
      any None 
  literal 41 
or
  subpattern 2 
    any None 
```

更好的。:)

现在我们只需要把它变成你想要的格式。

```
[i[0] if i[0] != '' else i[1] for i in a]
['zyx', 'b', 'c'] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T13:02:36.533

文档特别提到了处理组，所以不要在带括号的模式周围放置一个组，你会得到一切，但你需要自己从匹配的数据中删除括号：

```
>>> re.findall(r'\(.+?\)|\w', '(zyx)bc')
['(zyx)', 'b', 'c'] 
```

或使用更多组，然后处理生成的元组以获取您寻找的字符串：

```
>>> [''.join(t) for t in re.findall(r'\((.+?)\)|(\w)', '(zyx)bc')]
>>> ['zyx', 'b', 'c'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T13:05:17.697

```
In [108]: strs="(zyx)bc"

In [109]: re.findall(r"\(\w+\)|\w",strs)
Out[109]: ['(zyx)', 'b', 'c']

In [110]: [x.strip("()") for x in re.findall(r"\(\w+\)|\w",strs)]
Out[110]: ['zyx', 'b', 'c'] 
```

# objective-c - 如何定位 UINavigationController

> ID：14182356
> 
> 赞同：0
> 
> 时间：2013-01-06T12:57:21.780
> 
> 标签：objective-c, cocoa-touch

你如何将你的 UINavigationController 放在你的 ipad 的顶部边缘..？请看下面的截图..

![在此处输入图像描述](../Images/d2675fd1e2c55c1b03a67b2fb648f712.png)

我有一个登录屏幕，当我单击按钮时.. 我将发出这个命令来显示我的主屏幕..

```
 HomeScreenViewController *controller = [[HomeScreenViewController alloc] initWithNibName:@"HomeScreenViewController" bundle:nil];

[self.view addSubview:controller.view]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:32:24.833

您可以使用`setFrame`(message) 更改此视图控制器的位置。

```
CGRect frame = [controller.view frame];

// or as much as you like or (-) depending where you want to move it.
frame.origin.y += 100;
[controller.view setFrame:frame]; 
```

# prolog - 试图理解 prolog 中的解析器 DCG

> ID：14182359
> 
> 赞同：4
> 
> 时间：2013-01-06T12:57:43.137
> 
> 标签：prolog, dcg

最近我一直在 Prolog 中使用 DCG，但我一直面临一些关于它如何工作的问题。例如，我有这个小语法：

```
<atom> :: <letter> <atom_part> | <letter>
<atom_part> :: <letter> | <digit> | <letter> <atom_part> | <digit> <atom_part>
<letter>:: 'a' | 'b' ... |'Z'
<digit> :: '0' |...|'9' 
```

如果我没记错的话，它是任何必须以字母开头的字母或数字字符串。无论如何，我解析它的尝试如下：

```
letter("a") --> "a".
number(X) --> number(X).
...
%etc
programme(I) --> atomm(I).
atomm(C) --> letter(Ch).
atomm(C) --> numb(Ch).
atomm((E)) --> atomm_part(E).
atomm_part(E1,E2) --> atomm(E1),!,atomm(E2). 
```

在这里，我认为很明显最后两行是错误的。这真的是因为我不确定如何进行“递归调用”，所以解析器再次检查字符串中的下一个字符是数字还是字符串。我该如何纠正？提前致谢！

顺便说一句，我正在使用 swi-prolog

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:31:06.910

您的语法似乎比需要的复杂，您可以使用 'epsilon' （空产生式，在 DCG 中是`[]`）来简化它。除此之外，您应该使“程序”更加符合规范。

```
atom --> letter, atom_part | letter.
atom_part --> letter | digit | letter, atom_part | digit, atom_part.
letter --> "a" | "b" | /* omissis... */ "Z".
digit --> [D], {memberchk(D, "0123456789")}. 
```

您可以看到与原始规范的相似程度。接着就，随即

```
?- phrase(atom, "a").
true ;
false.

?- phrase(atom, "3a").
false.

?- phrase(atom, "a3").
true ;
false. 
```

`letter`并`digit`展示匹配单个字符的不同方法。`digit`如果您需要从输入中捕获值，就像在您的代码中所做的那样，它会更简单。但是因为枚举 26*2 字符容易出错，请考虑使用[code_type](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.22%27,swi%28%27/doc/Manual/chartype.html%27%29%29) /2

```
atom(A) --> letter(L), atom_part(P), {A=[L|P]} | letter(L), {A=[L]}.
atom_part(P) --> letter(L), {P=[L]} | digit(D), {P=[D]} | letter(L), atom_part(A), {P=[L|A]} | digit(D), atom_part(A), {P=[D|A]}.
letter(L) --> [L], {code_type(L, alpha)}.
digit(D) --> [D], {memberchk(D, "0123456789")}. 
```

还要考虑 Prolog 中的替代方案通常以这种方式编码

```
atom([L|P]) --> letter(L), atom_part(P).
atom([L]) --> letter(L). 
```

更简单的形式允许在头部模式中移动“数据构造”。

# android - android虚拟设备（Ubuntu）中的opengl加载问题

> ID：14182360
> 
> 赞同：1
> 
> 时间：2013-01-06T12:58:06.633
> 
> 标签：android, eclipse, ubuntu

我尝试使用 Ubuntu 12.04 的 kvm accleration 在 avd 命令下运行

模拟器-x86 -avd jellybean -partition-size 200 -gpu on -qemu -m 343 -enable-kvm

我在加载 AVD 之前收到以下消息

仿真器：错误：无法加载 OpenGLES 仿真库：libOpenglRender.so：无法打开共享对象文件：没有这样的文件或目录仿真器：警告：无法使用软件渲染器仿真器初始化 OpenglES 仿真：仿真器窗口不在视野范围内并重新定位

我想最后一个错误是由于我的屏幕分辨率问题（1366x768）avd 的分辨率为 800x480

# android - 使 Android 应用程序全屏和横向运行

> ID：14182366
> 
> 赞同：17
> 
> 时间：2013-01-06T12:58:32.670
> 
> 标签：android, android-fullscreen

我见过某些应用程序，尤其是大多数游戏（例如愤怒的小鸟、Temple Run 等）在启动时会以全屏和横向模式运行。他们的方向永远不会改变，并且在触摸屏幕时他们永远不会退出全屏。它是怎么做的？我需要更改或编码哪些属性？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-06T13:38:15.523

如果您更喜欢使用 XML，您可以更改 AndroidManifest.xml：

```
<activity android:name="..."
    android:screenOrientation="landscape"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

</activity> 
```

如果您的目标是 Android SDK 9 或更高版本，则可以使用它`sensorLandscape`来代替，`landscape`这意味着屏幕在正常横向和反向横向上**都将正确地向上看。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-06T13:02:46.390

```
import android.view.Window;
import android.view.WindowManager;
import android.content.pm.ActivityInfo;

@Override public void onCreate(Bundle savedInstanceState)
{
    ...

    // Set window fullscreen and remove title bar, and force landscape orientation
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    ...
} 
```

解决您的问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T07:09:11.163

问题解决了，根据上面给出的答案，我所做的是，

第 1 步：在 manifest.xml 文件中，

```
<application
. . .
android:screenOrientation="landscape"
android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
. . .
</application> 
```

第 2 步：在 Java 文件中，我进行了以下更改，

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
   } 
```

现在我的应用程序运行全屏，横向没有任何问题。谢谢你们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-20T13:39:38.013

把它放在`onCreate()`每个活动类（屏幕）中：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

**此代码将禁用 android 通知栏（从上到下）。！！！**

# facebook - 为什么像按钮一样向 Open Graph 添加消息不起作用？

> ID：14182369
> 
> 赞同：1
> 
> 时间：2013-01-06T12:58:51.427
> 
> 标签：facebook, facebook-like, facebook-opengraph, facebook-social-plugins

我正在开发一个使用自定义 Open Graph 对象和操作的 Web 应用程序，在显示 Open Graph 对象的网页中，我有一个类似 Facebook 的按钮（根据 Facebook 的开发人员文档）。

当用户点击“喜欢”时，它首先要求确认点赞，在点赞被确认后，它会打开一个弹出窗口来为点赞操作添加评论。

问题是在添加评论后单击“发布到 Facebook”不起作用，评论会像发布到 Facebook 一样变成灰色的一秒钟，但随后又恢复并且对话框保持打开状态。没有评论发布到 Facebook（确实发布了类似的内容）。

为什么会这样？我可以解决吗？

为什么类似操作会出现“确认”的东西？我在某处读到，一旦人们使用该应用程序并确认点赞，它就会自动消失。是真的吗？

# sql - 当条件依赖关系属性时如何搜索模型

> ID：14182370
> 
> 赞同：0
> 
> 时间：2013-01-06T12:58:58.673
> 
> 标签：sql, ruby-on-rails-3, postgresql, relational-database, where

我有 2 个模型

```
class User
has_many :cars
end

class Car
belongs_to :user
end 
```

我可以做`User.where(...)`和测试任何用户属性

如何测试关系的属性？例如，我想做什么`'get all users where user.car.color = green'`？或者`'get all users which have more than two cars'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:12:06.070

使用[`joins`](http://apidock.com/rails/ActiveRecord/QueryMethods/joins)：

```
User.joins(:cars).where('cars.color' => 'green') 
```

对于第二个：

```
User.joins(:cars).group('users.id HAVING count(cars.id) > 2') 
```

并将它们放在一起：

```
User.joins(:cars)
    .group('users.id HAVING count(cars.id) > 2')
    .where('cars.color' => 'green') 
```

另请参阅：[Rails 3 根据关联计数进行查询](https://stackoverflow.com/questions/6313621/rails-3-query-on-condition-of-an-associations-count#answer-9370734)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:16:04.623

像这样的东西应该工作：

```
User.include(:cars).where("cars.color" => "green") 
```

# java - 从字符串转换为时间戳时保留时间戳小时值

> ID：14182373
> 
> 赞同：1
> 
> 时间：2013-01-06T12:59:07.210
> 
> 标签：java, sql, db2, timestamp

我将时间戳从数据库读取到一个字符串中，如下所示：

源数据库表时间戳字段值如下：

```
8/21/2012 2:09 AM 
```

我正在将上面的时间戳读入 java 程序中的字符串字段。

但是，在将其写入目标数据库表时，我正在使用以下代码将字符串重新转换回时间戳：

```
java.text.DateFormat format = new java.text.SimpleDateFormat("yyyy-MM-dd");
java.util.Date newDate = format.parse(item.getMyTimeStamp());
ps.setTimestamp(1, new java.sql.Timestamp(newDate.getTime())); 
```

但是，目标表中的时间戳字段值如下：

```
8/21/2012 12:00 AM 
```

很明显，小时字段正在重置为上午 12 点。

如何保留原始时间戳值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:32:33.183

@Nikunj 这`new java.text.SimpleDateFormat("yyyy-MM-dd");`实际上是在失去你的`timestamp`......所以它将时间设置为`12AM`......你需要获得**精确的格式。**

你能试试这个吗，假设你的字符串包含来自源数据库的正确日期，

```
String sourceDate = "8/21/2012 2:09";
Timestamp sourceTS = Timestamp.valueOf(sourceDate);
System.out.println(sourceTS.getNanos()); 
```

这是帖子：[将 Java 字符串转换为 sql.Timestamp](https://stackoverflow.com/questions/7628103/convert-java-string-to-sql-timestamp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:12:01.630

我不明白这个 TS 到字符串，字符串到 TS ......但是......

1.  发布您在“格式”对象（SimpleDateFormat？）中使用的模式。
2.  “item.getMyTimeStamp()”是做什么的？B) 返回一个 sql.Timestamp 对象？

如果 2.B == 真：

也许这是正确的：

```
ps.setTimestamp(1, new java.sql.Timestamp(item.getMyTimeStamp().getTime())); 
```

# mysql - 计数函数未返回正确的记录数

> ID：14182377
> 
> 赞同：-1
> 
> 时间：2013-01-06T12:59:22.270
> 
> 标签：mysql, sql

计数函数没有错误地显示任何记录。

```
DELIMITER $$

    DROP PROCEDURE IF EXISTS `AbsentReportproctest`$$

    CREATE DEFINER=`root`@`localhost` PROCEDURE `AbsentReportproctest`(IN _fromdate DATETIME, IN _todate DATETIME)
    BEGIN 
        CREATE TEMPORARY TABLE daterange25 (dte DATE);

          CREATE TEMPORARY TABLE daterange26 (dte DATE);

        SET @counter := -1;
        WHILE (@counter < DATEDIFF(DATE(_todate), DATE(_fromdate))) DO 
            INSERT INTO daterange25 VALUES (DATE_ADD(_fromdate, INTERVAL @counter:=@counter + 1 DAY));
             INSERT INTO daterange26 VALUES (DATE_ADD(_fromdate, INTERVAL @counter:=@counter + 1 DAY));

        END WHILE;

    SELECT tp.EMPCODE, d.dte,gc.count
    FROM test_prefixmaster tp
    INNER JOIN(SELECT tp.EMPCODE,COUNT(*)AS count
    FROM test_prefixmaster tp
    JOIN daterange26 d
    LEFT JOIN test_prefixtransactions tpt ON (tp.EMPCODE = tpt.empcode)
    AND DATE(S_DateTime) = d.dte
    WHERE tpt.empcode IS NULL
    GROUP BY tp.EMPCODE) gc on tp.EMPCODE = gc.EMPCODE
    JOIN daterange25 d
    LEFT JOIN test_prefixtransactions tpt ON (tp.EMPCODE = tpt.empcode)
    AND DATE(S_DateTime) = d.dte
    WHERE tpt.empcode IS NULL;

    DROP TABLE daterange25;

    DROP TABLE daterange26;

    END$$

    DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:03:52.373

我不知道这是否是您的问题中的错字，但在您的加入中，我发现您没有`ON`在表之间提供子句，

```
SELECT  tp.EMPCODE,
        d.dte,
        gc.count
FROM    test_prefixmaster tp
        INNER JOIN 
        (
            SELECT  tp.EMPCODE,
                    COUNT(*) AS count
            FROM    test_prefixmaster tp
                    INNER JOIN daterange26 d
                         -- where is the ON clause here ??
                    LEFT JOIN test_prefixtransactions tpt
                        ON (tp.EMPCODE = tpt.empcode)
                            AND DATE (S_DateTime) = d.dte
            WHERE tpt.empcode IS NULL
            GROUP BY tp.EMPCODE
        ) gc
            ON tp.EMPCODE = gc.EMPCODE
        INNER JOIN daterange25 d
                -- where is the ON clause here ??
        LEFT JOIN test_prefixtransactions tpt
            ON (tp.EMPCODE = tpt.empcode)
                AND DATE (S_DateTime) = d.dte
WHERE tpt.empcode IS NULL 
```

它产生不正确值的主要原因之一是*由于未指定两个表的关系，连接表会产生笛卡尔积*。这是一个没有关系定义的内部连接的示例[单击此链接进行演示](http://www.sqlfiddle.com/#!2/223a1a/3)

# xml - XmlDocument.LoadFromUriAsync 突然停止工作并且总是返回异常？

> ID：14182379
> 
> 赞同：2
> 
> 时间：2013-01-06T12:59:26.017
> 
> 标签：xml, windows-8, winrt-xaml

这种方法：

```
var xmlDocument = await XmlDocument.LoadFromUriAsync(new Uri("your XML url here")); 
```

突然停止工作并始终返回异常：mscorlib.dll 中发生了“System.Runtime.InteropServices.COMException”类型的未处理异常附加信息：从对 COM 组件的调用中返回了错误 HRESULT E_FAIL。

还有另一种加载xml文档的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:51:57.283

您可以使用 Asynchronous XmlReader 从 uri 链接读取 xml：

```
 private async void ReadXml(string uri)
    {
        using (XmlReader reader = XmlReader.Create(uri, new XmlReaderSettings() { Async = true }))
        {
            while (await reader.ReadAsync())
            {
                if (reader.IsStartElement())
                {
                    if (reader.Name == "NodeName")
                    {
                        string nodeContent = reader.ReadElementContentAsString();
                    }
                }
            }
        }
    } 
```

# html - 空 div 不好吗？

> ID：14182383
> 
> 赞同：7
> 
> 时间：2013-01-06T13:00:09.090
> 
> 标签：html, aptana

我正在 Aptana 中创建一个网站，并且我正在使用一个空的 div 元素来设置边框底部的样式。

我不能让它成为它的边界元素的一部分，因为它需要始终具有相同的宽度，并且假定的父元素实际上会根据内容改变大小。

**问题是：**使用这样的空 div 不好吗？Aptana 给了我一个警告。它说我“应该修剪空的div”。

我说的是“showinfo-border-left/right”类的div

```
<div class="showinfo">
    <div class="showinfo-left">Text</div>
    <div class="showinfo-right">More text</div>
</div>
    <div class="showinfo-border-left"></div>
    <div class="showinfo-border-right"></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T15:01:03.770

从[HTML5 规范](https://w3c.github.io/html/dom.html#palpable-content)：

> ## 3.2.8.2.8 可触及内容
> 
> 作为一般规则，其内容模型允许任何流式内容或短语内容的元素应具有至少一个子节点，该子节点是可触知的内容并且不具有指定的隐藏属性。
> 
> 然而，这个要求并不是硬性要求，因为在很多情况下元素可以合法地为空，例如，当它用作稍后将由脚本填充的占位符时，或者当元素是模板，并且会在大多数页面上填写，但在某些页面上不相关。

因此，由于 div 允许流动内容。空 div 通常是要避免的，但不是无效的，也不是什么可以挂断的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T13:10:17.217

不，这样用也不错。但是您可以使用伪内容来避免这种情况，例如，

```
.showinfo:after{
content: "";
display: block;
/*
 this will be the style for your div after
 but dont forget to specifiy the width and height and act like its a new div
 */
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T13:10:42.990

来自[加速网页的最佳实践](http://developer.yahoo.com/performance/rules.html)

## 减少 DOM 元素的数量

复杂的页面意味着要下载更多字节，这也意味着 JavaScript 中的 DOM 访问速度较慢。例如，当您想要添加事件处理程序时，如果您在页面上循环遍历 500 或 5000 个 DOM 元素，则会有所不同。大量的 DOM 元素可能是一种症状，表明应该通过页面标记来改进某些内容，而不必删除内容。您是否出于布局目的使用嵌套表？`<div>`您是否只是为了解决布局问题而投入更多s？也许有一种更好、更语义正确的方式来做你的标记。YUI CSS 实用程序对布局有很大帮助：grids.css 可以帮助您进行整体布局，fonts.css 和 reset.css 可以帮助您去除浏览器的默认格式。这是一个重新开始并考虑您的标记的机会，例如使用`<div>`s 仅在语义上有意义时才有意义，而不是因为它呈现新行。DOM 元素的数量很容易测试，只需在 Firebug 的控制台中输入： document.getElementsByTagName('*').length 多少 DOM 元素太多了？检查其他具有良好标记的类似页面。例如雅虎！主页是一个非常繁忙的页面，并且仍然少于 700 个元素（HTML 标记）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T13:02:51.873

如果只有几个或几十个，它不会产生显着差异，如果它们做得很好，你可以使用它们。

但是如果你有大约一百个或更多，那么你应该重新考虑你的方法，因为它会增加 DOM 元素的数量。一般来说，DOM 元素越少越好。更多关于优化的信息可以在[雅虎这篇](http://developer.yahoo.com/performance/rules.html)关于优化的优秀文章中找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-04T12:24:33.867

可能还需要区分空元素和具有空内容的元素。至少在 FireFox 中，我注意到一个空的 div 元素 () 没有按预期工作，但一个具有空内容的 div 元素却 () 。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-06T13:04:02.893

是的，这看起来很奇怪，但我们广泛使用空 div。比如设置一个精灵作为一个div的背景。每个网站都使用空 Divs。如果你想使用它，那么你可以。没有限制。

# c# - 私有访问者不会访问私有成员

> ID：14182385
> 
> 赞同：0
> 
> 时间：2013-01-06T13:00:19.170
> 
> 标签：c#, visual-studio-2010, unit-testing, private-members

在我的类中，为了测试，我有一个私有布尔实例变量和一个访问它的方法：

```
MyClass()
{
    private volatile bool b;
    public MyMethod()
    {
         b = false;
    }
} 
```

为方法创建单元测试后

```
[TestMethod()]
public void MyMethodTest()
{
      PrivateObject param0 = new PrivateObject(new MyClass());
      MyClass_Accessor target = new MyClass_Accessor(param0);
      target.b = false;
} 
```

我收到此错误：

```
Property, indexer, or event 'property' is not supported by the language; try directly
calling accessor method 'accessor_taketh' 'accessor_giveth' 
```

但是访问器对象中没有这样的方法，而是有

```
[Shadowing("b")]
public bool b{ get; set; } 
```

那么为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:16:36.680

那这个呢：

```
 param0.SetField("b", false); 
```

# iphone - NSFetchedResultsController 在彼此之上创建重复的单元格

> ID：14182396
> 
> 赞同：2
> 
> 时间：2013-01-06T13:01:28.577
> 
> 标签：iphone, objective-c, ios, xcode

所以我使用 NSFRC 来填充我的 UITableView。在`cellForRowAtIndexPath`我使用以下方法从 Core Data 加载每个单元格的信息：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"myProto"];
[self configureCell:cell atIndexPath:indexPath]; 
```

`configureCell`然后使用标签填充 50% 的单元格，例如：

```
MyEntity *myEntity = [self.fetchedResultsController objectAtIndexPath:indexPath];
UILabel *nameLabel = (UILabel *)[cell viewWithTag:1001];
nameLabel.text = myEntity.entityName; 
```

对于所有其他标签和图像视图，这将继续。当这一切发生时，字典中会填充来自服务器的信息。然后使用该信息填充剩余 50% 的单元格，再次以`cellForRowAtIndexPath`. 在 中`willDisplayCell`，我根据保存在 Core Data 中的信息和从 Internet 下载的信息进行的计算，进行了一些影响诸如文本颜色之类的次要事物的计算。另外，`willDisplayCell`我会检查是否所有信息都已从互联网下载。如果有，我会循环浏览获取的结果并更改一个`Attribute`被调用的`sectionsSort`基于与之前所做的完全相同的计算。换句话说，一旦加载完成，TableView 会进行计算以确定特定单元格应该进入哪个部分。NSFRC 然后对 UITableView 进行排序，将所有内容放入正确的部分。

我知道这个过程有点不确定，因为我们在加载所有内容后设置部分。我已尽最大努力妥善处理所有事情，例如，在这一切进行时，我不允许用户进行任何交互，并且我仅在从 Internet 下载所有内容后才设置部分信息。然而，我显然没有考虑到一些事情，因为 NSFRC 似乎在彼此之上创建重复的单元格。我可以说出来，因为在几个单元格上有一个半透明的背景，由于重叠而变得加倍强烈。它们似乎来去匆匆，具体取决于您在 TableView 中的位置，并且会导致多个故障。我显然在某处错误地使用了 NSFRC，但我只是不知道在哪里。

如果您能帮我诊断这个问题，我将不胜感激。
问候，
迈克

**更新：**认为我刚刚发现了一个潜在的原因。在`viewDidAppear`我设置每个实体的部分。似乎每次我保存实体 NSFRC 都会重新创建屏幕上的行。这是一个正确的推论吗？

**更新 2**似乎还有更多的东西。NSFRC 甚至无法识别最后 6 个单元格，即使它们已显示。当我按下编辑时，除了最后 6 个之外，所有应用程序都向右移动（它们应该如此）。有一大堆奇怪的行为正在发生。我的 NSLog in`willDisplayCell`似乎持续了很多次，即使 TableView 没有滚动。

**更新 3**好的，所以我设置 Section 的代码绝对是问题所在。刚刚注释掉了所有它，它工作正常。以下是我为每个实体设置部分的方式：

```
for (id i in fetchedResultsController.fetchedObjects) {
    myEntity *myEntity = i;
    DownloadResult *downloadResult = [[DownloadResult alloc] init];
    downloadResult = [downloadResultsDictionary objectForKey:myEntity.entityName];

if (condition)
    {
        myEntity.sectionSort = @"2";

        NSError *error;
        if (![self.managedObjectContext save:&error]) {
            NSLog(@"Error: %@", error);
            FATAL_CORE_DATA_ERROR(error);
            return;
        }
    } 
else if (... 
```

我这样做的方式显然有问题，因为它使 NSFRC 进入超速状态并导致多个故障。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:11:51.410

固定的。愚蠢的错误在一天结束时。我忘记重新加载 TableView！

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
    [self.tableView reloadData];
} 
```

# c# - 如何修改自动生成的代码

> ID：14182398
> 
> 赞同：1
> 
> 时间：2013-01-06T13:01:57.843
> 
> 标签：c#, asp.net

第一个问题：

我正在使用一些外部业务库，例如它们有奇怪的命名空间`System.Web.UI.Page`。对此无能为力。加载库时在 ASP.NET 中出现问题，一切正常，但在显示页面时出现问题：

> CS0433：“System.Web.SessionState.IRequiresSessionState”类型存在于两者中

所以基本上 C# 尝试编译页面 - 但不知道该类型使用哪个库

我找到了外部别名的解决方案，但是，设计器出现问题，因为每次我修改页面时都会破坏命名（真的很难维护） - 设计器将从 切换名称`"MyNewExternalAlliase"->"Global"`，或者在添加新的 ellemnts 时，它们将显示为 global:: . 这将非常耗时。

问题 ：

如果我能以某种方式注入进程并进行简单的字符串替换，我可以为 ASP.NET 页面/控件修改这个自动生成的代码吗？我可以使用双别名，一切都会正常工作。为了澄清，我的意思是这种文件：

> c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\f3552813\29b6906c\App_Web_XXXXX.aspx.65a2d1ee.p58-fzio.0.cs

更新 1\. 你们不明白问题，标准系统库 System.Web 有类 System.Web.UI.Page，我在运行时加载的库具有相同的类型（命名空间和类）。现在当 ASP.net 编译页面时 - *.aspx, *.ascx 文件被编译 - 它无法告诉它应该使用哪个库并且我得到错误：

> CS0433：两个 dll 中都存在“System.Web.UI.Page”类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:07:04.150

使用临时文件和目录不是一个好的模式。解决方案是修改代码 - 请举个例子。

# html - 调整浏览器大小时，Div Width 100% 不起作用

> ID：14182399
> 
> 赞同：1
> 
> 时间：2013-01-06T13:02:12.357
> 
> 标签：html, css, width

基本上，当我重新调整浏览器大小时，我的 100% 宽度 Div 包装器无法正常工作。当您将浏览器的大小重新调整为小于页面设计的大小时，我会看到一个水平滚动条，它实际上并没有跨越整个宽度。就好像它只是在某个时刻被切断了一样。

这是链接：[网站链接](http://www.officiallymade.com/)

我试图解决这个问题，但这真的让我很困惑为什么会这样。任何人都可以阐明这个问题吗？

提前致谢。

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:09:36.103

我想到了！我将 width: 100% 设置为 min-width: 100% 并解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:37:22.207

您的 .wrap div 的固定宽度为 1050 像素，这迫使页面的最小宽度也为 1050 像素。这就是当浏览器窗口宽度小于 1050 像素时您会看到滚动条的原因。

```
.wrap {
  position: relative;
  margin: 0 auto;
  width: 1050px;
} 
```

但是，这个宽度是固定的是有原因的，因为`margin:0 auto;`需要一个固定宽度的 div 才能使内容居中。

如果您希望您的设计缩小以适应更窄的屏幕，那么我建议您考虑使用 CSS 媒体查询来为不同的浏览器/设备宽度创建替代规则。

尝试调整此[演示](http://css-tricks.com/examples/MediaQueriesSidebar/)以查看它是否符合您的要求，如果是，请完成本[教程](http://css-tricks.com/css-media-queries/)。

[Smashing Magazine](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)也有一个很好的媒体查询教程，特别是如果您正在寻找移动设备的替代布局。

# c# - 基于服务的数据库.MDF

> ID：14182400
> 
> 赞同：1
> 
> 时间：2013-01-06T13:02:14.587
> 
> 标签：c#, database, windows, winforms

我需要存储由 C# 窗体应用程序生成的数据。我使用基于服务的数据库并创建了我需要的表，然后我使用 linq 在这些表中插入值。我实际上是通过使用它保存了我的数据，调试后我发现所有数据都被删除了。我找不到我在运行时给出的值。任何人都可以帮我解决它吗？我需要一个本地数据库来保存我的数据，我正在创建在我的客户端系统中不使用 SQL SERVER 的 win 表单应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:03:54.593

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！在 Visual Studio 中运行您的应用程序时，它将围绕`.mdf`文件进行复制（从您的`App_Data`目录到输出目录 - 通常`.\bin\debug`是您的应用程序运行的位置），并且**很可能**，您的`INSERT`工作正常 - 但您只是**看错了 . mdf文件**到底！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`YourDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=YourDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:20:40.877

我经历过类似的事情，可能是一样的。当`\bin\Debug\`您使用`Data Source=|DataDirectory|\mydatabase.mdf`. 在调试模式下，您的数据将保存到此副本。

如果您提供数据库文件的完整路径，例如不可移植的 C:\xxxx\yyy\mydatabase.mdf，则可以解决此问题。希望这是你想要的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T17:03:41.950

1.  在 App.Config 文件中将路径更改为本地数据库路径

    connectionString="数据源=(LocalDB)\v11.0;AttachDbFilename= **C:\Users\Gerry\documents\visual studio 2013\Projects\DatabaseLocalApplication\DatabaseLocalApplication** \Customers.mdf;Integrated Security=True"

这会将保存操作定向到正确的数据库。您可以通过单击数据库并复制**完整路径属性中的条目来获取此字符串**

然后将数据库的复制到输出目录设置为**不复制**

# activerecord - rails 2使用分页限制加载记录而不使用分页gem但活动记录查询

> ID：14182402
> 
> 赞同：0
> 
> 时间：2013-01-06T13:02:29.370
> 
> 标签：activerecord, pagination, offset, ruby-on-rails-2

我正在开发 Rails 2 应用程序，我需要处理 8000 条记录并将它们显示在表格中。

我需要限制加载记录。

就像从 8000 条记录中一样，我想显示 10 条记录，然后只显示 10 条记录，然后单击下一步按钮，接下来应该显示 10 条记录。

喜欢分页，但无法进行分页，因为它一次加载所有 8000 条记录。而且它需要太多时间。

我认为 offset 和 limit 对我有帮助，但我不知道如何使用它。

我的基本查询是
@users = @client.users

我也尝试数据表服务器端，但它不工作。

请帮我。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:17:49.243

使用 rails 的 Will_paginate 插件进行分页。

检查[https://github.com/mislav/will_paginate/blob/8888651be8d6656bdf2378731d91a8badbaa2556/README.rdoc上的文档](https://github.com/mislav/will_paginate/blob/8888651be8d6656bdf2378731d91a8badbaa2556/README.rdoc)

# internet-explorer - IE“友好”HTTP 404 错误

> ID：14182403
> 
> 赞同：0
> 
> 时间：2013-01-06T13:02:33.887
> 
> 标签：internet-explorer, http-status-code-404

我知道有一些类似的问题，但我看到的都不足以帮助......

我有一个常规的 php 页面，它在 FF 和 Chrome 中工作得非常好，但在 IE 中，大约 20% 的时间，它会出现一个（不那么）“友好”的 HTTP 404 错误。关闭友好错误后，它也可以正常工作。但是我的页面访问者不会关闭它们......我认为这可能是因为页面上的 mod_rewrite ，但即使关闭并删除了缓存，实际页面本身也会产生错误。这太奇怪了，因为 80% 的时间页面加载都很好，但是刷新或返回到同一页面的链接会导致 404，然后再刷新几次它又回来了。我无权访问服务器日志，因为我使用的是第 3 方服务器，他们说我无法访问任何日志。

有人可以建议可能导致此问题的原因吗？有没有办法在客户端查看 404 的确切来源？有没有人见过这样的事情 - 页面有时会加载，有时不会？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:40:12.913

好的...我根本不明白，因为即使 mod_rewrite 关闭它也会发生...但基本上它似乎与 wordpress 有关...简而言之，每个页面都被加载到一个模板 php 页面中它根据url将正确的wordpress页面加载到该php页面中，并且没有针对特定（假）页面的带有“slug”的wordpress页面，但是一旦我创建了一个，它就可以正常工作。我想真正了解 mod_rewrite 以及 wordpress 工作原理的人会比我更了解这一点，但这就是它得到修复的方式，以防其他人遇到同样的问题......

是的，没有服务器日志是荒谬的！

谢谢！

# facebook - Facebook Open graph - 未知路径组件

> ID：14182405
> 
> 赞同：2
> 
> 时间：2013-01-06T13:02:36.690
> 
> 标签：facebook, facebook-opengraph

```
{
"error": {
"message": "Unknown path components: /[your_namespace]:[your_action]",
"type": "OAuthException",
"code": 2500
} 
```

在尝试发布操作（我已经为我的应用程序创建的观看/电影操作）后，我收到了上述错误。

如何解决这个问题呢？我试图搜索，但它根本不起作用。

这是我的js代码。

```

      OG 教程应用程序

      函数 postCook()
      {
          FB.api(
            '/me/xxx: 观看',
            '邮政'，
            {电影：'http://www.rottentomatoes.com/m/the_hobbit_an_unexpected_journey/'}，
            功能（响应）{
               if (!response || response.error) {
                   变量输出 = '';
                   for（response.error 中的属性）{
                     输出 += 属性 + ':' + response.error[property]+'; ';
                   }
                  警报（输出）；
               } 别的 {
                  alert('Cook 成功！Action ID: ' + response.id);
               }
            });
      }

        window.fbAsyncInit = function() {
          FB.init({
            appId : 'yyy', // 应用 ID
            status : true, // 检查登录状态
            cookie : true, // 启用 cookie 以允许服务器访问会话
            xfbml : true // 解析 XFBML
          });
        };

        // 异步加载 SDK
        （函数（d）{
          var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
          js = d.createElement('脚本'); js.id = id; js.async = true;
          js.src = "//connect.facebook.net/en_US/all.js";
          d.getElementsByTagName('head')[0].appendChild(js);
        }（文档））;

      酿饼干

```

# sql-server - 截断表然后将数据插入到同一个表中只插入 1 条记录

> ID：14182409
> 
> 赞同：0
> 
> 时间：2013-01-06T13:02:53.520
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

有谁知道我在这里做错了什么，我有一个从远程源获取货币数据的网页，我获取数据并通过存储过程将其插入 sql 数据库。如果我将截断放在插入语句的前面，它会截断表并插入最后一条记录。如果我删除截断，它会插入所有记录。

IE

```
truncate table tblTablename;

insert into tblTablename
(columns)
values
(data) 
```

以上将插入 289 条记录中的最后一条记录。

如果我删除截断，则插入所有 289 条记录。

我曾尝试使用 waitfor 1 秒钟，但也没有用。

我不知道还能做什么，所以任何帮助将不胜感激

在网页中我有一个 foreach 循环

乔治

/------------------------ SQL 代码 -----------------

```
 ALTER PROCEDURE [dbo].[atSP_InsertCurrency]
-- Add the parameters for the stored procedure here
@CurrencyCountry VarChar(150),
@CurrencyRate VarChar(150),
@UpdateSuccessFail  INT OUTPUT 
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
TRUNCATE TABLE [dbo].[at_CurrencyRates];

WAITFOR DELAY '000:00:01'

INSERT INTO [dbo].[at_CurrencyRates]
(
    [CurrencyCode],
    [CurrencyExchangeRate]
)
VALUES
(
    @CurrencyCountry,
    @CurrencyRate
)
IF(@@ROWCOUNT > 0)
    BEGIN
    select  @UpdateSuccessFail = '1'
    END
    ELSE
    BEGIN
    select  @UpdateSuccessFail = '0'
    END
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:18:42.900

`TRUNCATE TABLE [dbo].[at_CurrencyRates];`如果您调用存储过程 289 次以逐行插入，则需要移出存储过程。

每次调用存储过程时，它都会从表中删除所有行，因此您总是只会得到刚刚插入的一行。

最好更改存储过程以一次性插入所有需要的行，而不是一次插入一个。您可以使用表值参数来传递所有所需的行，然后您只需要 a`TRUNCATE`后跟一个`INSERT [dbo].[at_CurrencyRates] ... SELECT * FROM @TVP`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:06:25.247

**以为我会为任何检索 json 数据然后想要使用MERGE**将数据批量插入 sql 的访问者添加我的工作源代码

 **我不是专业的编码员，我在被裁员后正在学习自己，我必须承认我学的越多，我知道的越少，下面的代码来自昨天花费数小时谷歌搜索**合并**和阅读其他人的博客/帖子，这里要提到很多网站，但感谢所有这些编码人员放弃他们的时间和博客，介绍他们如何通过提示和技巧解决问题。

我提供的代码在我的项目中工作正常。

```
 string dbConn = ConfigurationManager.ConnectionStrings["CurrDB"].ConnectionString;
const string strCurrencyCode = "http://SomeRemoteJsonSource.com"; 

public void InsertCurrency()
        {

        WebClient wc = new WebClient();
        var dict = JsonConvert.DeserializeObject<Dictionary<string, string>>(wc.DownloadString(strCurrencyCode));

        string tmpTable = "create table #at_CurrencyCountries (CurrencyCountry varchar(150), CurrencyCountryCode varchar(4))";

        DataTable table = new DataTable();
        table.Columns.Add(new DataColumn("CurrencyCountry", typeof(string)));
        table.Columns.Add(new DataColumn("CurrencyCountryCode", typeof(string)));

        foreach (var wy in dict.AsEnumerable())
            {
            DataRow row = table.NewRow();
            row["CurrencyCountry"] = wy.Value;
            row["CurrencyCountryCode"] = wy.Key;
            table.Rows.Add(row);
            }

        using (SqlConnection cn = new SqlConnection(dbConn))
            {
            cn.Open();
            SqlCommand cmd = new SqlCommand(tmpTable, cn);
            cmd.ExecuteNonQuery();

            using (SqlBulkCopy bulk = new SqlBulkCopy(cn))
                {
                bulk.DestinationTableName = "#at_CurrencyCountries";
                bulk.WriteToServer(table);
                }
            string mergeSql = "merge into at_CurrencyCountries as Target "
                + "using #at_CurrencyCountries as Source "
                + "on "
                + "Target.CurrencyCountry=Source.CurrencyCountry "
                + "and "
    + "Target.CurrencyCountryCode = Source.CurrencyCountryCode "
                + "when matched then "
                + "update set Target.CurrencyCountryCode=Source.CurrencyCountryCode "
                + "when not matched then "
                + "insert (CurrencyCountry,CurrencyCountryCode) values (Source.CurrencyCountry, Source.CurrencyCountryCode)"
                + "WHEN NOT MATCHED BY SOURCE THEN DELETE;";
            cmd.CommandText = mergeSql;
            cmd.ExecuteNonQuery();               
            cmd.CommandText = "drop table #at_CurrencyCountries";
            cmd.ExecuteNonQuery();
            }
        } 
```

乔治**

# php - Zend 1.12 中的自动加载自定义库

> ID：14182410
> 
> 赞同：3
> 
> 时间：2013-01-06T13:03:05.630
> 
> 标签：php, zend-framework, autoload

我正在开发一个 Zend PHP 项目，我正在尝试将代码分离到一个自定义库中，例如“自定义”。目前这主要由一些自定义表格组成。

我的文件夹结构如下。

```
/project root
 /Library
  /Custom
    /Forms
      /Account
        /Login.php
      Base.php
  /Zend
  ... 
```

Login.php 和 Base.php 具有以下命名约定：

```
class Custom_Form_Account_Login extends Custom_Form_Base
{

}

class Custom_Form_Base extends Zend_Form
{

} 
```

最后，我在 application.ini 文件中放置了以下行

```
autoloaderNamespaces[] = "Custom_" 
```

然后创建表单，我在控制器中有这个......

```
$form    = new Custom_Form_Account_Login(); 
```

但是，当我加载页面时，我收到一条错误消息，告诉我无法找到 Custom_Form_Account_Login。显示包含路径，我可以看到“/project root/Library”在那里，所以我对为什么找不到该类有点困惑。

我在 application.ini 中尝试了许多不同的行，并在进行更改后重新启动了服务器，但错误仍然存​​在。

我尝试过的其他线路包括：

```
autoloadernamespaces[] = "Custom_" //All lowercase
autoloaderNamespaces[] = "Custom"  //Without the underscore
autoloaderNamespaces.custom = "Custom_"
autoloaderNamespaces.0 = "Custom_" 
```

如前所述，我使用的是 Zend 1.12。理想情况下，我想在 .ini 文件中配置它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:07:50.597

您的文件夹名称是`Forms`（复数），但类名使用`Form`（单数）。在您描述的上下文中，这些必须相同。`Form`（单数）可能更好，因为它反映了 ZF 结构。

# java - 来自 JSP 的重定向处于待处理类型且状态已取消

> ID：14182412
> 
> 赞同：1
> 
> 时间：2013-01-06T13:03:13.020
> 
> 标签：java, jsp, post, restful-url

我有一个 JSP 文件，它正在调用一个`REST`post 调用，该调用对远程服务器进行获取。该请求正在处理中，但在远程机器中处于已取消状态。你能帮忙吗？

这是 JSP 的一部分：`

```
<tr>
                <td><button id="registerBtn" onclick="registerClick()">Register</button></td>
                <td><button id="loginBtn" onclick="postOnClick()">Log in</button></td>
            </tr>
        </table>
        <script type='text/javascript'>
            function registerClick() {

                /* var params = "{realm: astra, subjectId: " + document.getElementById('usrInpt').value + " , authInfo: omsspass}"; */
                var first = document.getElementById('firstNameInpt').value;
                var last = document.getElementById('lastNameInpt').value;
                var user = document.getElementById('usrInpt').value;
                var password = document.getElementById('passInpt').value;
                var email = document.getElementById('emailInpt').value;

                var http = new XMLHttpRequest();

                var url = "http://localhost:8080/authJ/v0/authJ/users?realm=JOES_PIZZA&uid=" + user +"&firstname=" + first + "&lastname=" + last + "&password=" + password + "&email=" + email;

                //var params = "{realm: astra, subjectId: " + document.getElementById('usrInpt').value + " , authInfo: omsspass}";

                http.open("POST", url, true);
                //http.setRequestHeader("Content-type", "application/json");
                http.onreadystatechange = function() {
                    if (http.readyState == 4 && http.status == 200) {
                        document.open();
                        document.write(http.responseText);
                    }
                };
                http.send();
            }
        </script>` 
```

这是java代码

```
:`@POST
    @Path("/users")
    public Response createUser(@QueryParam("uid")String uid, @QueryParam("firstname") String firstName, @QueryParam("lastname") String lastName, @QueryParam("email")String email,
            @QueryParam("password")String password, @QueryParam("realm") String realm) {
        //readProperties();
        String tokenID = getToken();
        StringBuffer openAmUrl = new StringBuffer().append("http://").append(openAmIp).append(openAmWarName).append("/identity/create?");
        openAmUrl.append("identity_name=").append(uid);
        openAmUrl.append("&identity_attribute_names=userpassword");
        openAmUrl.append("&identity_attribute_values_userpassword=").append(password);
        openAmUrl.append("&identity_attribute_names=sn");
        openAmUrl.append("&identity_attribute_values_sn=").append(lastName);
        openAmUrl.append("&identity_attribute_names=cn");
        openAmUrl.append("&identity_attribute_values_cn=").append(firstName);
        openAmUrl.append("&identity_realm=/").append(realm);
        openAmUrl.append("&identity_type=user");
        if (email != null){
            openAmUrl.append("&identity_attribute_names=mail");
            openAmUrl.append("&identity_attribute_values_mail=").append(email);
        }
        openAmUrl.append("&admin=").append(tokenID);

        URI uri = null;
        try {
            uri = new URI(openAmUrl.toString());
        } catch (URISyntaxException e) {
            LOGGER.error("Exception " + e);
            e.printStackTrace();
        }
        return Response.seeOther(uri).build();
    }
` 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T10:16:16.557

我发现这是由于跨域引起的问题-我通过编辑将在没有安全性的情况下启动的浏览器的执行文件来修复它-（--disable-web-security）希望这对其他人有帮助！

# html - 我该如何改进这个移动网站？

> ID：14182415
> 
> 赞同：-1
> 
> 时间：2013-01-06T13:03:26.373
> 
> 标签：html, css

我有一个网站，我想制作移动设备。我刚开始用手机。我怎样才能改进这个网站？

有没有一种方法可以在满足条件时使用 css 来定位元素，例如当宽度小于某个限制时。我将元素居中？

这是jsfiddle的链接

[http://jsfiddle.net/SNFCd/](http://jsfiddle.net/SNFCd/)

```
#bk-parent{width:90%; background-color:black; margin:0 auto; font-family: sans-serif; color:white}
#bk-header{width:inherit}
.logo {float:left;}
.addr{float:right}
#bk-footer li{float:left} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:06:44.967

我想`media queries`这就是你所追求的

```
@media only screen and (max-device-width: 480px) { code for small screens} 
```

[随机博客文章](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T13:07:27.323

你想要的是[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。该链接适用于 W3C 建议。

基本上，语法如下：

```
@media only screen and (min/max-width: ){ 
  //do something

} 
```

这些被称为“断点”。这意味着，在浏览器达到您提供的最小/最大宽度时，您可以否决任何其他 CSS。因此，当满足该条件时，您确实可以将元素居中。

```
@media screen and (min/max-width: ){ 

  div {
      margin: 0 auto;
   }

} 
```

[Smashing Magazine](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)还提供了一个很好的 (IMO) 教程。

# python - 调用 API 并在解码某些字符时遇到问题 (Django)

> ID：14182416
> 
> 赞同：0
> 
> 时间：2013-01-06T13:03:34.827
> 
> 标签：python, django, json

我从 API 调用返回的 JSON 数据中有一个字符`\x96`

当我进行 API 调用时，它会导致以下错误：

```
'ascii' codec can't encode character u'\x96' in position 56: ordinal not in range(128) 
```

这种情况偶尔会发生在 API 调用中——可能有 5% 的时间我猜这个 unicode 数据无法解码。知道如何解码这些字符吗？

这是我的代码：

```
 start = str(start)
    limit = str(limit) 
    if sort_by:
        url = self.base_url + specific_url + "?q=" + str(query) + "&filters=[[%22category_id%22,[" + category_id + "]]]" + "&start=" + start  + "&limit=" + limit + "&sortby=" + sort_by + "&apikey=" + self.api_key 
    else:
        url = self.base_url + specific_url + "?q=" + str(query) + "&filters=[[%22category_id%22,[" + category_id + "]]]" + "&start=" + start  + "&limit=" + limit + "&apikey=" + self.api_key

    response_json = self.web_fetch(url)
    return simplejson.loads(response_json) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:17:51.273

`simplejson.loads`必须使用一个`unicode`对象才能使其工作。

这意味着您需要修改`web_fetch()`函数以返回一个 Unicode 对象，或者`response_json`如果您知道那是它的编码，则可以直接解码为 UTF8。

```
response_json = response_json.decode('utf-8') 
```

# r - 在 R 中使用 Stata .do 文件

> ID：14182418
> 
> 赞同：1
> 
> 时间：2013-01-06T13:03:41.600
> 
> 标签：r, stata

我正在寻找一种方法——如果有的话——在 R 中使用 Stata 语法文件。我有一个包含国家名称的数据集和一个可以将名称转换为奶牛国家代码的 Stata .do 文件：

美国 = 1
阿富汗 = 700

有什么原因我可以将该文件与 R 一起使用，还是我需要找一个有 Stata 的人为我做这件事？

非常感谢任何帮助，谢谢:)

编辑：
.do 文件是纯文本的，我可以在 Chrome 或 Textmate 中打开它。
它看起来像这样：

```
capture drop gwno
gen gwno=.
replace gwno=   700 if country==    "Afganistan"
replace gwno=   700 if country==    "Afghanistan"
replace gwno=   700 if country==    "AFGHANISTAN"
replace gwno=   339 if country==    "Albania"
replace gwno=   615 if country==    "Algeria"
replace gwno=   232 if country==    "Andorra"
replace gwno=   540 if country==    "Angola"
replace gwno=   58  if country==    "Antigua & Barbuda"
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:19:08.987

简短的回答：在您的编辑器中删除所有“替换 gwno=”，然后用逗号替换所有“如果国家/地区==”。删除第一个标题行和最后的任何内容。

现在您有了一个以逗号分隔的代码和国家/地区文件。读入 R，制作一个数据框，然后用`match`数字替换国家。

Apols 粗略的回答，但其中大部分是基本的 R。

您也可以尝试使用 read.table 或 read.csv 读取 R 文件，跳过前两行，然后您的代码和国家/地区位于第 3 列和第 6 列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T13:50:09.830

只是改写@Spacedman说nto 1-line R命令，

```
read.table(file = stat.file,skip=2)[,c(6,3)]

                 V6  V3
1        Afganistan 700
2       Afghanistan 700
3       AFGHANISTAN 700
4           Albania 339
5           Algeria 615
6           Andorra 232
7            Angola 540
8 Antigua & Barbuda  58 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-12T08:38:57.900

我只是偶然发现了这个问题，我想为这个问题发布一个更通用的解决方案，即使你没有要求这个——但它可能对其他人有用。

您的任务显然是将国家名称映射到国家代码（如“[战争相关性](http://www.correlatesofwar.org/)”项目中使用的那样）。有一个`countrycode`非常有用的软件包，因为它可以将国家名称转换为 ISO 代码、COW 代码等：

```
df <-
  structure(
    list(
      name = c(
        "Afganistan",
        "Afghanistan",
        "AFGHANISTAN",
        "Albania",
        "Algeria",
        "Andorra",
        "Angola",
        "Antigua & Barbuda"
      ),
      ccode = c("700", "700", "700", "339", "615", "232", "540", "58")
    ),
    class = "data.frame",
    .Names = c("name", "ccode"),
    row.names = c(NA,-8L)
  )
df$ccode2 <- countrycode::countrycode(sourcevar = df$name,
                                      origin = "country.name",
                                      destination = "cown") 
```

这会给你：

```
 name ccode ccode2
1        Afganistan   700     NA
2       Afghanistan   700    700
3       AFGHANISTAN   700    700
4           Albania   339    339
5           Algeria   615    615
6           Andorra   232    232
7            Angola   540    540
8 Antigua & Barbuda    58     58
Warning message:
In countrycode::countrycode(sourcevar = df$name, origin = "country.name",  :
  Some values were not matched unambiguously: Afganistan 
```

请注意，阿富汗的错字导致`NA`. 该警告可帮助您识别此类情况。您可以使用参数解决此问题`custom_match`：

```
df$ccode2 <- countrycode::countrycode(sourcevar = df$name,
                                  origin = "country.name",
                                  destination = "cown", 
                                  custom_match = c("Afganistan" = "700")) 
```

结果是：

```
 name ccode ccode2
1        Afganistan   700    700
2       Afghanistan   700    700
3       AFGHANISTAN   700    700
4           Albania   339    339
5           Algeria   615    615
6           Andorra   232    232
7            Angola   540    540
8 Antigua & Barbuda    58     58 
```

# webfonts - IE 中的发光文本 (DXImageTransform.Microsoft.Glow) 和抗锯齿

> ID：14182422
> 
> 赞同：2
> 
> 时间：2013-01-06T13:03:55.193
> 
> 标签：webfonts, css

我正在尝试创建一个可以在 Internet Explorer 中正常工作的发光文本。

我有这个文本阴影声明：

```
text-shadow: 0 0 4px White; 
```

对于 IE，我添加了这个：

```
filter: "progid:DXImageTransform.Microsoft.Chroma(Color='White') progid:DXImageTransform.Microsoft.Glow(Strength=5, Color=#ffffff)"; 
```

它有效，但它关闭了文本抗锯齿，所以它看起来真的很丑 - 比较这两个图像（Chrome vs IE9）：

![在此处输入图像描述](../Images/2eb4ceb4d1b5372fd36ed14bbf95f352.png) ![在此处输入图像描述](../Images/2ee3e884222370301ec0659dbc044ef3.png)

你知道如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T00:58:32.950

我确实相信这会让事情看起来更现代：

```
<font style="display: block; filter: glow(Color=white, Strength=$2) 
blur(add=false, direction=0, strength=1) 
blur(add=false, direction=180, strength=1) 
blur(add=false, direction=270, strength=1) 
blur(add=false, direction=90, strength=1">Novinky</font> 
```

基本上，这是一种伪抗锯齿，首先应用发光，然后在 4 个方向（U、D、L、R）上模糊 1 个像素（甚至模糊发光本身）

测试页面： [http ://tcll5850.proboards.com/thread/178/post-glow-plugin-darkpikachu](http://tcll5850.proboards.com/thread/178/post-glow-plugin-darkpikachu)

参考页面： [http ://www.ssi-developer.net/css/visual-filters.shtml](http://www.ssi-developer.net/css/visual-filters.shtml)

# python - 导入 PyQt4.QtGui 时出现 ImportError: DLL load failed: The specified procedure could not be found

> ID：14182425
> 
> 赞同：7
> 
> 时间：2013-01-06T13:04:09.407
> 
> 标签：python, pyqt4, importerror

在 Python2.6 解释器中导入 PyQt4.QtGui 模块时，我得到

Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 import PyQt4.QtGui ImportError: DLL load failed: 找不到指定的过程。

我的站点包文件夹中安装了 PyQt-Py2.6-gpl-4.6 lib 文件。我尝试用谷歌搜索它，但没有找到修复它的方法，请在这方面提供帮助！

* * *

此处的解决方案修复了错误：

[无法导入 PyQt4.QtGui](https://stackoverflow.com/questions/2738879/cannot-import-pyqt4-qtgui)

将包含 Qt 应用程序和 DLL 的 PyQt4 目录添加到您的`PATH`环境变量中。在 PowerShell 中，只要您没有更改任何安装路径，那就是

```
$env:path += 'C:\Python26\Lib\site-packages\PyQt4\bin' 
```

不管怎么说，还是要谢谢你 ！

# python - Python 正则表达式：一行中的多个匹配项（使用 findall()）

> ID：14182430
> 
> 赞同：4
> 
> 时间：2013-01-06T13:05:00.737
> 
> 标签：python, regex

我在文本中寻找这些“标签”：`{t d="var1"}var2{/t}`或者`{t d="varA"}varB{/t}` 可以有更多属性，只有“d”是强制性的：`{t d="var1" foo="bar"}var2{/t}`

我的问题是 - 如果一行上有更多标签，则只返回一个结果，而不是全部。返回的内容（来自下面的测试字符串）： `(u'single1', u'Required item3')`

我期望得到的回报： `(u'single1', u'required1') (u'single2', u'Required item2') (u'single3', u'Required item3')` 我被困住了。它适用于每行一个标签，但不能每行有多个标签。

```
# -*- coding: UTF-8 -*-
import re

test_string = u'''
<span><img src="img/ico/required.png" class="icon" alt="{t d="single1"}required1{/t}" title="{t d="single2"}Required item2{/t}" /> {t d="single3"}Required item3{/t}</span>
'''

re_pattern = '''
    \{t[ ]{1}       # start tag name
    d="         # "d" attribute
    ([a-zA-Z0-9]*)      # "d" attribute content
    ".*\}       # end of "d" attribute
    (.+)        # tag content
    \{/t\}      # end tag
'''
rec_pattern = re.compile(re_pattern, re.VERBOSE)

res = rec_pattern.findall(test_string)
if res is not None:
    for item in res:
        print item 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T13:17:34.510

你的通配符是贪婪的。将它们从 更改`.*`为`.*?`使它们不会贪婪：

```
re_pattern = '''
    \{t[ ]{1}           # start tag name
    d="                 # "d" attribute
    ([a-zA-Z0-9]*)      # "d" attribute content
    ".*?\}              # end of "d" attribute
    (.+?)               # tag content
    \{/t\}              # end tag
''' 
```

# android - 在旋转时，我得到“无法销毁活动......在 onSaveInstanceState 之后无法执行此操作”

> ID：14182432
> 
> 赞同：3
> 
> 时间：2013-01-06T13:05:04.297
> 
> 标签：android, rotation, android-fragments, acl, onconfigurationchanged

您好，感谢您的帮助。

我只是在配置我的代码以处理旋转的最开始：我已经实现了 onDestroy()，但还没有任何 onSaveInstanceState() 或 onRetainNonConfigurationInstance()，因为我正在弄清楚如果在旋转后销毁和重新创建什么不会导致问题，需要保存什么。

在我的应用程序中，我使用了一个运行 AsyncTask 的服务，以及在用户按下按钮时交换的 3 个片段。

我使用兼容性库来管理片段。

我怀疑我遇到的错误与碎片有关；

**具体来说，我更喜欢在旋转时销毁和重新创建片段，而不是保留它们（因为我希望这会使我的代码更简单......）**

当我旋转模拟器时，标题中出现错误。

这是主要活动的代码：

```
public class Quotes extends FragmentActivity {

    private String url2;
    //public String responseBody;
    public static ArrayList<Stock> lt;
    public static ArrayList<Stock> best;
    public static ArrayList<Stock> worst;
    public static ArrayList<Stock> fav;// =new ArrayList<Stock>();
    public static LocalService mService;
    boolean mBound;// = false;
    public MyAdapter myAdap;
    public Messenger messenger;
    public Messenger messenger2;
    public Grab g;
    public static Handler handler;
    public static  Handler handler2;
    public Intent intent;
    public ListView lv;
    public dettagliofragment fragment;
    public listafragment fragmentlista ;
    public static boolean tablet;//=true;
    public static WorstBest worstbest;
    public static favouritesFragment fragmentfavourites;
    public static FragmentActivity fragmentActivity;
    public static int stack;
    public static ArrayList<Integer> stackArray; // stackArray =new ArrayList<Integer>();

    @Override
      public void onCreate(Bundle icicle) {
         super.onCreate(icicle);
        stackArray =new ArrayList<Integer>();
        fav =new ArrayList<Stock>();
        tablet=true;
        mBound = false;
        fragmentActivity = this;
        setContentView(R.layout.splash);
        url2=getString(R.string.url2);
        g = new Grab(url2);
        String s = g.vai();
        //Log.e("", s);
        Log.e("", "passo oltre l'invocazione al grab");
        lt = new MyParser(s).parseResp();
        fragmentlista = new listafragment();
        fragmentfavourites= new favouritesFragment() ;
        worstbest = new WorstBest();
        /////////////////primo message handler
        handler=new Handler() {
            @Override
            public void handleMessage(Message msg) {
            Message mess=msg;   
            Log.e("","MESSAGGIO RICEVUTO");
            lt = mService.ritira();
            Log.e("what?", Integer.toString(mess.what));
            if( mess.what==0){

                worst=mService.ritiraWorst();
                best=mService.ritiraBest();
                fav=mService.ritiraFav();
                setContentView(R.layout.main);
                 View view1=(View)findViewById(R.id.view1);
                View view2=(View)findViewById(R.id.view2);
                if(view2==null) {tablet=false;};
                FragmentManager fragmentManager = getSupportFragmentManager();
                FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();       
                fragmentTransaction.add(R.id.view1, fragmentlista);
                if(tablet){fragmentTransaction.add(R.id.view2, worstbest);}
                fragmentTransaction.commit();
                g.fermaGrab(); 
                Log.e("", "fermograb");
                    };

            }
        };
        messenger = new Messenger(handler); 

        intent = new Intent(this, LocalService.class);
         intent.putExtra("messenger", messenger);       

        /////////////////secondo message handler
        handler2=new Handler() {
            @Override
            public void handleMessage(Message msg) {

            Message mess=msg;   
            Log.e("","SECONDO MESSAGGIO RICEVUTO");
            lt = mService.ritira();
            worst=mService.ritiraWorst();
            best=mService.ritiraBest();
            fav=mService.ritiraFav();
            if(lt==null){Log.e("","lt è nullo");};
            if(fragmentlista==null){Log.e("","fragmentlista è nullo");};

            fragmentlista.prendiLista(lt);
            worstbest.prendiListaWorst(worst);
            worstbest.prendiListaBest(best);
            if(fav.size()>0)fragmentfavourites.prendiLista(fav);
            };
            };
        messenger2 = new Messenger(handler2);  
        intent.putExtra("messenger2", messenger2);

        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
    } 

    public static void layoutSchermo(int conf){

    if(conf==1){    
        FragmentManager fragmentManager = fragmentActivity.getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);
        if(!tablet){fragmentTransaction.replace(R.id.view1, fragmentfavourites);}
        if(tablet){fragmentTransaction.replace(R.id.view2, fragmentfavourites);}
        fragmentTransaction.addToBackStack(null);
        stack=fragmentTransaction.commit();
        stackArray.add(stack);
        Log.e("","stack = "+ Integer.toString(stack));
        }
    if(conf==2){    
        FragmentManager fragmentManager = fragmentActivity.getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);
        if(!tablet){fragmentTransaction.replace(R.id.view1, worstbest);}
        if(tablet){fragmentTransaction.replace(R.id.view2, worstbest);}
        fragmentTransaction.addToBackStack(null);   
        stack= fragmentTransaction.commit();
        stackArray.add(stack);
        Log.e("","stack = "+ Integer.toString(stack));
        }

    }

    @Override
    public void onBackPressed(){
        FragmentManager fragmentManager = fragmentActivity.getSupportFragmentManager();
        if(stackArray.size()>0)
            {for(int i=1;i<stackArray.size();i++){
                fragmentManager.popBackStackImmediate(stackArray.get(i),     FragmentManager.POP_BACK_STACK_INCLUSIVE);}
            }

        super.onBackPressed(); 
    }   

     protected void onStop() {
            Log.e("onstop","passo per onstop");   

            mService.stop();
            g.fermaGrab();
            super.onStop();    
            }
     protected void onPause() {
            Log.e("onpause","passo per onpause");   
            mService.stop();
            g.fermaGrab();
            super.onPause();       
        }

     protected void onDestroy() {
        Log.e("ondestroy","passo per ondestroy"); 
        mService.stop();
        g.fermaGrab();
        //handler.removeMessages(333); 
        stopService(intent);
        //g=null;
        FragmentManager fragmentManager = fragmentActivity.getSupportFragmentManager();
        if(stackArray.size()>0)
            {for(int i=1;i<stackArray.size();i++){
                fragmentManager.popBackStackImmediate(stackArray.get(i),     FragmentManager.POP_BACK_STACK_INCLUSIVE);}
            }

         super.onDestroy();   

        }

     @Override
     protected void onSaveInstanceState(Bundle outState) {  }  

    public static ArrayList<Stock> dammi(){
        return lt;
    }  

    public void inizia()
    {   
        Log.e("","il serlizio è bound ? "+ mBound);
        mService.prendi(lt);
        mService.getNumber();

    }           

       private ServiceConnection mConnection = new ServiceConnection() {

            //@Override
            public void onServiceConnected(ComponentName className,
                    IBinder service) {
                Log.e("", "sono in ServiceConnection");
                // We've bound to LocalService, cast the IBinder and get LocalService instance
                LocalBinder binder = (LocalBinder) service;
                mService = binder.getService();
                mBound = true;
                //inizia();
                mService.prendi(lt);
                mService.getNumber();

            }

            //@Override
            public void onServiceDisconnected(ComponentName arg0) {
                mBound = false;
                mService = null;
            }
        }; 
```

他是我的 LogCat：

```
01-06 12:20:27.869: E/AndroidRuntime(2165): FATAL EXCEPTION: main
01-06 12:20:27.869: E/AndroidRuntime(2165): java.lang.RuntimeException: Unable to destroy activity {com.example.quotes/com.example.quotes.Quotes}: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3273)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3291)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3489)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.ActivityThread.access$700(ActivityThread.java:130)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.os.Looper.loop(Looper.java:137)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at dalvik.system.NativeStart.main(Native Method)
01-06 12:20:27.869: E/AndroidRuntime(2165): Caused by: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1314)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.support.v4.app.FragmentManagerImpl.popBackStackImmediate(FragmentManager.java:480)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at com.example.quotes.Quotes.onDestroy(Quotes.java:201)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.Activity.performDestroy(Activity.java:5172)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1109)
01-06 12:20:27.869: E/AndroidRuntime(2165):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3260)
01-06 12:20:27.869: E/AndroidRuntime(2165):     ... 12 more 
```

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:15:07.540

感谢您的信息。同时，我解决了这个问题。

导致问题的原因是当 Activty 因旋转而被破坏时需要解除绑定的服务。

据我所知，当活动被破坏时，片段不会被破坏。但是，我将不胜感激对此发表任何评论。

因此，我`onCreate()`在销毁后再次创建 Activty 时重新初始化了方法上的 Fragments，这不会给应用程序带来麻烦。

```
protected void onDestroy() {
   mService.stop();
   stopService(new Intent(this, LocalService.class));
   unbindService(mConnection);
   g.fermaGrab();
   stopService(intent);
   Log.e("ondestroy","passostopService(intent)"); 
   super.onDestroy();       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T11:03:45.303

`onFocusChangeListener`仅仅因为这个问题的其他答案让我对 WeakReferences、内存泄漏和 onResumeFragments 进行了疯狂的追捕……你可以通过在控件失去焦点时尝试弹出一个对话框来得到这个错误。错误出现了，`ActivityThread.handleRelaunchActivity`所以很难弄清楚。

# python - 在 python 中运行一个进程到 /dev/null

> ID：14182434
> 
> 赞同：2
> 
> 时间：2013-01-06T13:05:07.463
> 
> 标签：python, linux

如何在 Python 中运行以下命令？

```
/some/path/and/exec arg > /dev/null 
```

我懂了：

```
call(["/some/path/and/exec","arg"]) 
```

如何像往常一样插入`exec`进程的输出`/dev/null`并保持我的 python 进程的打印输出？如，不要将所有内容重定向到标准输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T13:09:33.697

对于 Python 3.3 及更高版本，只需使用[`subprocess.DEVNULL`](http://docs.python.org/3/library/subprocess.html#subprocess.DEVNULL)：

```
call(["/some/path/and/exec","arg"], stdout=DEVNULL, stderr=DEVNULL) 
```

请注意，这会同时重定向`stdout`和`stderr`。如果您只想重定向`stdout`（正如您的`sh`行所暗示的那样），请忽略该`stderr=DEVNULL`部分。

如果需要兼容旧版本，可以使用[`os.devnull`](http://docs.python.org/2/library/os.html#os.devnull). 因此，这适用于从 2.6 开始的所有内容（包括 3.3）：

```
with open(os.devnull, 'w') as devnull:
    call(["/some/path/and/exec","arg"], stdout=devnull, stderr=devnull) 
```

或者，对于 2.4 及更高版本（仍包括 3.3）：

```
devnull = open(os.devnull, 'w')
try:
    call(["/some/path/and/exec","arg"], stdout=devnull, stderr=devnull)
finally:
    devnull.close() 
```

在 2.4 之前，没有`subprocess`模块，所以你可以合理地回溯到尽可能远的地方。

# c# - 实体框架 + Windows 窗体：生命周期和数据绑定

> ID：14182436
> 
> 赞同：3
> 
> 时间：2013-01-06T13:05:32.857
> 
> 标签：c#, .net, winforms, entity-framework

我有一个 Windows 窗体应用程序，其形式如下：

*   主窗体
*   第一形式
*   第二种形式
*   ...

主窗体从头开始，在应用程序存在后结束。当我每个表单使用一个上下文时，主表单的生命周期是否不长？每个表单都有一个上下文，我遇到的第二个问题是我总是必须使用分离的实体。

**编辑：** 我总是需要重新附加以下实体：

```
_context.MyEntities.Attach(existingEntity1);
_context.MyEntities2.Attach(existingEntity2);

existingEntity1.MyEntities2.Add(existingEntity2);

_context.SaveChanges(); 
```

这对我来说有点奇怪。

生命周期处理的最佳实践是什么？当我为每个表单使用一个上下文时，如何解决分离问题？

现在我的数据绑定看起来像：

```
var myEntities = from e in _context.MyEntities
                 select e;

var bindingList = new BindingList<MyEntity>(myEntities.ToList());
myGridView.DataSource = bindingList; 
```

假设 MainForm、FirstForm 和 SecondForm 需要相同的绑定列表，但做不同的事情，共享绑定列表的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:23:55.230

[建议](http://msdn.microsoft.com/en-us/data/jj729737)是每个表单的上下文。但是，如果在多个表单中使用相同的上下文对您有好处——如果在相同的实体上工作更快的开发和/或更好的性能——并且这超过了长期存在的风险上下文 - 加载的实体过多和并发问题 - 然后在多个表单中使用上下文。也许您的父表单中还有另一个事件可用于触发上下文的处置和重新创建，以在它成为问题时缩短它的生命周期？

另一种选择是评估您的表单是否可以更改以表示更多离散的工作单元，您可能不必对如此多的通用实体进行操作，从而减少分离的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:18:31.403

**编辑：**如评论中所述，此答案不是微软当前的建议。它可能适用于复杂的对象模型和模型与上下文分离的情况。

对于您的第一个问题，我会说上下文太长了。寿命短通常更好。

对于您的第二个问题，如果您经常处理分离的实体，我会研究自我跟踪实体。

对于您的第三个问题，这取决于您对数据的处理方式。如果它是只读的，那么您可以将相同的数据绑定到同一个实例而不会出现太多问题。如果是为了进行更新，那么它取决于业务领域。在某些情况下，您可能会考虑“克隆”数据以保持数据分离。但是，每个表单都看到相同的单个实例，这样所有表单都显示相同版本的数据，这也可能是有意义的。一个表格上的更改会显示在其他表格上。在任何一种情况下，自我跟踪实体都可以很好地工作。

我有一个示例显示[在 WPF 应用程序中使用自我跟踪实体](http://blog.alner.net/archive/0001/01/01/wpf_ef_4_sig_presentation_2010.aspx)。

# mysql - 性能 Mysql Join or table with varchar

> ID：14182445
> 
> 赞同：0
> 
> 时间：2013-01-06T13:06:21.333
> 
> 标签：mysql, performance, join, varchar

如果我有这样的表：

```
CREATE TABLE IF NOT EXISTS `codetransactions` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`id_customer` int(11) DEFAULT NULL,
`id_cashier` int(11) DEFAULT NULL,
`id_code` int(11) DEFAULT NULL,
`program_type` int(11) DEFAULT NULL,
`id_codeaccount` int(11) DEFAULT NULL,
`tmstmp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`value1` int(11) DEFAULT NULL,
`value2` int(11) DEFAULT NULL,
`comment` varchar(150) DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

我正在努力解决大量数据挖掘的问题 - 这个 varchar 字段将大大减慢操作速度。

我现在真正的问题是：将这个表分成两个表并将“评论”字段提取到另一个表是否更好？并非每笔交易都会有评论，并且通过数据挖掘，varchar 将是无关紧要的，或者这只是一种错觉，mysql 会解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:12:39.303

按照建议 - 为您保留评论的另一个表创建索引。而且您还知道您添加到 int 字段的 (11) 实际上除了设置可见性之外并没有做任何其他事情？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:37:59.320

*   让另一个表说（**table2**）有列 -

    - **id** - 来自基表的外键，
    - **评论**- varchar（150）

因此，当任何用户评论时，
如果您想获取用户评论，那么该用户的 id 和评论将转到此 table2，那么您只需搜索 table2 中的现有键。
所以不需要插入空行..

# vb.net - 使用 SQL Server Compact Edition 作为安装包

> ID：14182447
> 
> 赞同：1
> 
> 时间：2013-01-06T13:06:37.227
> 
> 标签：vb.net

我在没有安装任何 SS 版本的计算机上安装了我的测试应用程序。我复制了应用程序文件夹中的所有七个 .dll，但它给出了错误。我想知道为什么？

请告知是否必须在目标计算机上安装 SSCE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:07:43.510

不，不必使用安装程序在客户端计算机上部署 SSCE。但是，以这种方式部署时，您必须在开发过程中遵循各种规则。

主要规则是您的项目必须引用 SSCE 的本地副本而不是 GAC 中的版本，并且文件必须部署在目标计算机上正在执行的应用程序旁边。

[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa983326%28v=vs.80%29.aspx)包含有关这两种方法的详细信息。

# ios - 开启 AutoLayout 时如何解决 AssertionFail？

> ID：14182449
> 
> 赞同：4
> 
> 时间：2013-01-06T13:06:49.357
> 
> 标签：ios, storyboard, autolayout

我正进入（状态：

```
Assertion failure in -[Cell layoutSublayersOfLayer:], /SourceCache/UIKit_Sim/UIKit-2372/UIView.m:5776
2013-01-06 14:58:42.951 Likely[4588:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. Cell's implementation of -layoutSubviews needs to call super.' 
```

我写：

```
-(void)layoutSubviews{
    [super layoutSubviews];
} 
```

在 Cell.m 文件中。但不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T23:37:03.177

您可以尝试在调用 super 之后添加。

```
[self layoutIfNeeded]; 
```

这将导致：

```
- (void)layoutSubviews
{
    [super layoutSubviews]; 
    [self layoutIfNeeded]; 
} 
```

# c++ - MFC CSocket SendTo 返回错误代码 10038

> ID：14182454
> 
> 赞同：0
> 
> 时间：2013-01-06T13:07:15.903
> 
> 标签：c++, sockets, mfc

我有一个多播服务器套接字。当我实现MFC CSocket的SendTo操作时，他返回给我一个错误代码10038。这意味着`"WSAENOTSOCK The descriptor is not a socket."`

所以有人可以告诉我如何解决这个问题。

这是我创建服务器套接字的代码

```
Create(AF_INET,SOCK_DGRAM,NULL);
    Bind(12234,"225.6.7.8");
    int optVal = 10;
    int i = SetSockOpt(IP_MULTICAST_TTL,(void*)&optVal,sizeof(int)); 
```

这是向客户端发送标头的操作

```
int result = this->SendTo(header, header.GetLength(),12234,"225.6.7.8"); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:26:51.027

我认为您根本不必绑定，因为您使用的是数据报而不是流。

# linux - 在 C9.io 上安装 Yeoman

> ID：14182458
> 
> 赞同：9
> 
> 时间：2013-01-06T13:07:52.357
> 
> 标签：linux, cloud9-ide, yeoman

有没有人尝试在[Cloud9](http://c9.io)环境中安装[Yeoman ？](http://yeoman.io)如果有怎么办？

我在任何 yeoman 命令上都会收到此错误：

```
<FATAL> EACCES, permission denied '/var/lib/stickshift/' </FATAL> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T17:43:31.620

好的，所以我玩了一点 Cloud9 和 yeoman ;)

似乎您的错误主要来自 yeoman 试图上树，寻找 Gruntfile.js 的事实......这样做会遇到问题，因为当前用户无法访问它尝试读取的目录。

第一个解决方法是创建一个空的 Gruntfile.js：

```
'use strict';
 module.exports = function (grunt) {
 // Project configuration.
 grunt.initConfig({});
 }; 
```

然后启动“yeoman init”会问你标准问题，并在给定点问你它是否可以覆盖 Gruntfile，你可以肯定回答；）

然后，如果您启动“yeoman 服务器”，您将遇到另一个错误，这是由于服务器愿意回答的端口。

将以下选项添加到您的 Gruntfile.js：

```
 server: {
    port: process.env.PORT,
    host: process.env.IP
}, 
```

请注意，您还需要安装 Compass（gem install compass）。

然后启动“yeoman server”将启动服务器和所需的任务（以 watch 任务结束）......

不过，我并没有走得更远；）

希望这可以帮助。 ![云 9 约曼截图](../Images/76123ffd7f196865c18aa1e4f731f492.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-22T22:53:33.387

我可以安装 yeoman，但是在为生成器运行 install 之后，它们不起作用：$ yo angular Error angular

您似乎没有安装名称为 angular 的生成器。您可以使用 npm search yeoman-generator 查看可用的生成器，然后使用 npm install [name] 安装它们。`--help`要查看 0 个已注册的生成器，请使用该选项运行 yo 。

尝试了其他几个发电机，没有一个工作，所以不仅仅是角度的问题。

然后发现： [为什么我的 Yeoman 发电机安装在错误的地方？](https://stackoverflow.com/questions/18081125/why-are-my-yeoman-generators-installing-in-the-wrong-place)

修复！

# delphi - 绝地督察没有触发事件？

> ID：14182460
> 
> 赞同：1
> 
> 时间：2013-01-06T13:07:53.517
> 
> 标签：delphi, delphi-xe, jedi

我注意到 TJvInspector 有一个`OnItemDoubleClicked`事件，我认为这正是我需要的，因为我需要检测鼠标是否在颜色项属性上双击（我想显示我自己的颜色表单以允许选择自定义颜色等）。

但我什至根本无法触发该事件，例如：

```
procedure TfrmInspector.JvInspector1ItemDoubleClicked(Sender: TObject;
  Item: TJvCustomInspectorItem);
begin
  if Item is TJvInspectorColorItem then
    ShowMessage('you double clicked on a color property')
  else
    ShowMessage('not a color property');
end; 
```

如果我在该事件中的任何位置设置光标并使用 F4 运行，或者甚至在那里设置断点，它不会在运行时触发，所以很明显消息框也不会弹出。

这是 Jedi Inspector 组件的错误还是已知问题？

我通常不使用它们，而且似乎总是遇到麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:07:55.210

通过查看 JvInspector 代码，当没有项目编辑器（只读？）并且项目是对象属性时会触发 OnItemDoubleClicked。所以这绝对是错误的事件（而且它的名字具有误导性）。

问题是双击事件不是针对 JvInspector 控件，而是针对当前编辑器控件（TEdit、TComboBox、...）。所以 JvInspector 看不到双击。要解决这个问题，您需要挂钩编辑器的 OnDblClick 事件。为此，JvInspector 具有 OnBeforeEdit 事件。

```
procedure TForm1.JvInspector1BeforeEdit(Sender: TObject; Item: TJvCustomInspectorItem;
  Edit: TCustomEdit);
begin
  TEdit(Edit).OnDblClick := ItemDblClick;
end;

procedure TForm1.ItemDblClick(Sender: TObject);
begin
  ShowMessage(JvInspector1.Selected.Name);
  Abort; // don't change the value by the default double click handler
end; 
```

这不适用于“设置”属性或其他没有编辑器控制的属性。

# c# - 子类覆盖父类变量？

> ID：14182461
> 
> 赞同：1
> 
> 时间：2013-01-06T13:07:53.243
> 
> 标签：c#, inheritance, xna

我有一个“单元”类，它包含我游戏中所有单元将共享的函数和变量。然后我用“士兵”类扩展了它。单元有一个静态变量来保存基础纹理（因为创建时该类型的所有单元都是相同的，纹理可能会随着时间而改变）。这些是通过以下方式加载的：

```
Unit.baseTexture = content.Load<Texture2D>("worker");
Soldier.baseTexture = content.Load<Texture2D>("soldier"); 
```

当从“Unit”构造函数创建“Unit”时，它将加载纹理：

```
this.texture = Unit.baseTexture; 
```

创建“士兵”时，它将像这样加载它：

```
this.texture = Soldier.baseTexture; 
```

纹理是一个受保护的变量，不是静态的，所以它应该是每个对象一个。

在主游戏逻辑中，我有一个 ArrayList，其中存储了多个 Unit 和 Soldier 对象。

当我遍历它们时，我正在做：

```
foreach (Unit unit in unitList)
{
    unit.Draw(spriteBatch);
} 
```

Draw 是 Unit 类的一个函数：

```
spriteBatch.Draw(this.texture, this.position, Color.White); 
```

但是，这会导致所有单位都使用最后加载的纹理（在本例中为士兵纹理）进行绘制。这让我感到困惑，因为我先调用父类，然后是子类。如果绘制的是每个对象的纹理，为什么加载士兵纹理也会改变单位纹理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:33:27.097

我认为正确的做法是使用 BaseTexture 的属性，然后您可以根据需要使用`override`关键字覆盖它。`new`应避免使用关键字来隐藏成员。

例如：

```
class Unit
{
   private static Texture2D s_unitTexture = content.Load<Texture2D>("worker");
   protected virtual Texture2D BaseTexture
   {
      get { return s_unitTexture; }
   }

   public Texture2D Texture { get; set; }

   public Unit()
   {
       this.Texture = BaseTexture;
   }

   ...
}

class Soldier : Unit
{
   private static Texture2D s_soldierTexture = content.Load<Texture2D>("soldier");
   protected override Texture2D BaseTexture
   {
      get { return s_soldierTexture; }
   }

   ...
} 
```

这样，当构造函数运行时，将使用每种 Unit 类型的正确 BaseTexture。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:12:06.650

哦，伙计，我是个白痴。我一发布就解决了这个问题。

子类 Soldier 没有定义自己的 baseTexture 变量，所以当我使用 Soldier.baseTexture 加载士兵纹理时，它实际上是在使用 Unit.baseTexture。

我应该使用接口而不是基类吗？确保我所有的类都有正确的加载函数和变量？否则，在使我的子对象强制它覆盖静态变量时，我必须继续使用“new”。

# django - django 对大型查询集进行分页和排序

> ID：14182467
> 
> 赞同：0
> 
> 时间：2013-01-06T13:08:23.707
> 
> 标签：django

我想在每次数据库搜索时访问一次数据库。

用户可以查询数据库，然后对结果进行分页和排序。

该数据库包含 700 个项目。

django-debug-toolbar 显示有时查询时间太长。

目前我将初始搜索结果 id 保存在会话中，并使用它来构建一个查询集来对结果进行排序和分页。

我想避免这个数据库查询。

我正在考虑缓存查询集，以便其他用户使用缓存的查询集而不是访问数据库。

您如何看待这种方法？有什么我想念的吗？

```
 companiesID = request.session['selectedCompaniesIDs']

companies = Company.objects.filter(pk__in=companiesID).order_by(type).annotate(num_users=Count('users'))

cd = create_pagination(companies, page)
    PAGINATION_RESULTS_PER_PAGE = 20

def create_pagination(results, page):
    paginator = Paginator(results, PAGINATION_RESULTS_PER_PAGE)

    try:
        res = paginator.page(page)
    except PageNotAnInteger:
        # If page is not an integer, deliver first page.
        res = paginator.page(1)
    except EmptyPage:
        # If page is out of range (e.g. 9999), deliver last page of results.
        res = paginator.page(paginator.num_pages)

    return res 
```

1 毫秒：

> > 选择`companies_company`。`id`, `companies_company`. `name`, `companies_company`. `sector`, `companies_company`. `sub_sector`, `companies_company`. `num_of_employees`, `companies_company`. `address`, `companies_company`. `home_page`, `companies_company`. `career_url`, `companies_company`. `city`, `companies_company`. `updating_date`, COUNT( `companies_selectedusercompanies`. `user_id`) AS `num_users`FROM `companies_company` LEFT OUTER JOIN `companies_selectedusercompanies` ON ( `companies_company`. `id`= `companies_selectedusercompanies`. `company_id`) WHERE `companies_company`. `id`IN (SELECT U0\. `id`FROM `companies_company` U0 LEFT OUTER JOIN `companies_selectedusercompanies`U1 ON (U0\. `id`= U1\. `company_id`) GROUP BY U0\. `id`, U0\. `name`, U0\. `sector`, U0\. `sub_sector`, U0\. `num_of_employees`, U0\. `address`, U0\. `home_page`, U0\. `career_url`, U0.`city`, U0。`updating_date`ORDER BY NULL) 分组依据 `companies_company`。`id`, `companies_company`. `name`, `companies_company`. `sector`, `companies_company`. `sub_sector`, `companies_company`. `num_of_employees`, `companies_company`. `address`, `companies_company`. `home_page`, `companies_company`. `career_url`, `companies_company`. `city`, `companies_company`. `updating_date`订购方式`companies_company`。`sector`ASC 限制 20 偏移 160

11142 女士：

> 选择`companies_company`。`id`, `companies_company`. `name`, `companies_company`. `sector`, `companies_company`. `sub_sector`, `companies_company`. `num_of_employees`, `companies_company`. `address`, `companies_company`. `home_page`, `companies_company`. `career_url`, `companies_company`. `city`, `companies_company`. `updating_date`, COUNT( `companies_selectedusercompanies`. `user_id`) AS `num_users`FROM `companies_company`LEFT OUTER JOIN `companies_selectedusercompanies` ON ( `companies_company`. `id`= `companies_selectedusercompanies`. `company_id`) WHERE `companies_company`. `id`IN (SELECT U0\. `id`FROM `companies_company` U0 LEFT OUTER JOIN `companies_selectedusercompanies`U1 ON (U0\. `id`= U1\. `company_id`) GROUP BY U0\. `id`, U0\. `name`, U0\. `sector`, U0\. `sub_sector`, U0\. `num_of_employees`, U0\. `address`, U0\. `home_page`, U0\. `career_url`, U0\. `city`, U0.`updating_date`ORDER BY NULL) 分组依据 `companies_company`。`id`, `companies_company`. `name`, `companies_company`. `sector`, `companies_company`. `sub_sector`, `companies_company`. `num_of_employees`, `companies_company`. `address`, `companies_company`. `home_page`, `companies_company`. `career_url`, `companies_company`. `city`, `companies_company`. `updating_date`订购方式`companies_company`。`sector`ASC 限制 20 偏移 340

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:56:03.443

对于 700 条记录，这样一个简单的查询不应该花费超过几毫秒的时间。请向我们展示这两个请求（页面 == 1 和页面 > 1）生成的原始 SQL 查询及其时间。

你的数据库索引好吗？您是否检查过使用数据库客户端执行两个原始 sql 查询的时间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:56:18.287

似乎这是一个已知问题。我将采用 Facebook 路线，仅显示下一页和上一页。

# java - Java小程序不会移动图像

> ID：14182470
> 
> 赞同：0
> 
> 时间：2013-01-06T13:08:54.820
> 
> 标签：java, applet, awt, 2d-games

我正在尝试用 Java 制作一种 Space Invaders 游戏，首先是让 PNG 宇宙飞船在屏幕上移动。它出现在它应该去的地方，只是它拒绝移动。该程序编译得很好，eclipse没有给我任何错误/警告。谁能告诉我我做错了什么？

这是我的代码：

```
import java.awt.*;
import java.net.*;
import java.awt.geom.*;
import java.applet.*;
import java.awt.event.*;

public class DrawImage extends Applet implements KeyListener{
    private static final long serialVersionUID = 1L;
    private Image image;
    private int keycode;
    AffineTransform identity = new AffineTransform();
    private boolean keyleft = false;
    private boolean keyright = false;
    private URL getURL(String filename){
        URL url = null;
        try
        {
            url = this.getClass().getResource(filename);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        return url;
    }
    public void init()
    {
        image = getImage(getURL("spaceship.png"));
        addKeyListener(this);
    }

    public void paint(Graphics g)
    {
        Graphics2D g2d = (Graphics2D)g;
        //fill background with black
        AffineTransform trans = new AffineTransform();
        g2d.setColor(Color.GREEN);
        g2d.fillRect(0,0,getSize().width,getSize().height);
        g2d.drawImage(image,320,240,this);
        trans.setTransform(identity);
        if(keyright == true)
        {
            trans.translate(-10,0);
            keyleft = false;
        }
        else if(keyleft == true)
        {
            trans.translate(10,0);
            keyright = false;
        }
    }
    public void keyPressed(KeyEvent e)
    {
        keycode = e.getKeyCode();
        if(keycode == KeyEvent.VK_LEFT)
        {
            keyleft = true;
        }
        else if(keycode == KeyEvent.VK_RIGHT)
        {
            keyright = true;
        }
        repaint();
    }
    public void keyTyped(KeyEvent e){}
    public void keyReleased(KeyEvent e){}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:26:18.980

您应该在您的 paint() 方法中将转换设置为您的 g2d：

```
g2d.setTransform(trans); 
```

所以整个方法是：

```
 public void paint(Graphics g)
    {
        Graphics2D g2d = (Graphics2D)g;
        //fill background with black
        AffineTransform trans = new AffineTransform();
        g2d.setColor(Color.GREEN);
        g2d.fillRect(0,0,getSize().width,getSize().height);
        trans.setTransform(identity);
        if(keyright == true)
        {
            trans.translate(-10,0);
            keyleft = false;
        }
        else if(keyleft == true)
        {
            trans.translate(10,0);
            keyright = false;
        }
        g2d.setTransform(trans);
        g2d.drawImage(image,320,240,this);
    } 
```

# android - canvas.drawBitmap 给出了两种不同的结果

> ID：14182471
> 
> 赞同：0
> 
> 时间：2013-01-06T13:09:02.757
> 
> 标签：android, android-canvas

我正在使用canvas.drawBitmap截取android屏幕并在捕获的图像（水印）上绘制另一个图像，

当我在 SD 卡上复制水印（另一个图像 - 比如说 visit.jpg）图像时，这一切都给出了正确的结果，**捕获的图像的宽度为 500 像素，其中 visit.jpg 的宽度为 339 像素，**

```
File file = new File( Environment.getExternalStorageDirectory() + "/visit.jpg");
Bitmap myBitmap = BitmapFactory.decodeFile(file.getAbsolutePath()); 
```

但我不想将水印图像复制到 sdcard 中，我希望 res 文件夹中的图像应该在捕获的图像上绘制，所以我使用

```
Bitmap visit = BitmapFactory.decodeResource(getApplicationContext().getResources(),R.drawable.visit); 
```

并在画布上绘制并保存，它被保存了，但是水印图像（visit.jpg）被拉伸并且它的大小变得大于 339 像素。为什么 ？

我的代码是：

```
 View v1 = findViewById(android.R.id.content).getRootView();
        v1.setDrawingCacheEnabled(true);
        Bitmap screenshot = Bitmap.createBitmap(v1.getDrawingCache());

        Bitmap cropimg = Bitmap.createBitmap(screenshot, 50, 0, screenshot.getWidth()-100, 592);
        v1.setDrawingCacheEnabled(false);

        Bitmap Rbitmap = Bitmap.createBitmap(cropimg).copy(Config.ARGB_8888, true);

        Bitmap visit = BitmapFactory.decodeResource(getApplicationContext().getResources(),R.drawable.visit); // image accessed from drawable
        Canvas canvas = new Canvas(Rbitmap);       

        File file = new File( Environment.getExternalStorageDirectory() + "/visit.jpg"); // the image copied on sd card
        Bitmap myBitmap = BitmapFactory.decodeFile(file.getAbsolutePath());

        canvas.drawBitmap(visit, 0, 570, null); // if i put myBitmap instead of visit i.e.  canvas.drawBitmap(myBitmap, 0, 570, null); then visit.jpg image gets draw properly with 339pixel width without strtch
        canvas.save(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:57:57.520

编辑：我忘记了一种更简单的方法，将图像放在 /res/drawable-nodpi 文件夹中。

Android 会根据您的屏幕密度自动缩放资源图像。默认可绘制文件夹对应于 mdpi，因此如果您有 hdpi 设备，图像将被放大。您可以将图像放入 /res/raw/ 文件夹，然后像这样打开它：

```
Uri imageUri = Uri.parse("android.resource://your.app.package/raw/visit");
InputStream is = context.getContentResolver().openInputStream(imageUri);
Bitmap bmp = BitmapFactory.decodeStream(is, null, opts); 
```

# algorithm - 寻找 <= x 的最长路径（加权无向图）

> ID：14182476
> 
> 赞同：1
> 
> 时间：2013-01-06T13:09:51.257
> 
> 标签：algorithm, graph, path

我想不出任何可以找到最长路径的算法，即小于或等于某个 x 变量。使用 Dijkstra 的算法，我可以轻松获得最长的路径，但是我不确定是否可以在我的问题中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:16:34.067

Dijkstra 的算法会给你最短的路径，而不是最长的。

寻找最长（简单）路径是 NP-Hard。由于您的问题可以退化为最长路径问题（取 x 等于所有边权重的总和，这是最长路径长度的上限），因此它也是 NP-Hard。

您仍然可以使用树搜索，但它不太可能易于处理。

如果您正在考虑非简单路径（节点可以遍历多次），那么这是一个不同的问题。一个退化的情况是背包问题，它也是 NP-Hard 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:20:14.417

您可以使用 DFS 算法来找到最长的路径。如果您搜索，您会发现一些有用的文章，例如[Depth First Search & Directed Acyclic Graphs](http://www.csd.uoc.gr/~hy583/reviewed_notes/dfs_dags.pdf)。

# sql - 如何在内部查询中使用 order by 子句

> ID：14182480
> 
> 赞同：1
> 
> 时间：2013-01-06T13:10:15.190
> 
> 标签：sql, sql-server, database, tsql, stored-procedures

我的内部查询中的 order by 子句遇到了很大的麻烦。
我使用此查询从数据库中获取分页结果：

```
;WITH ItemsRank AS
(
select
ROW_NUMBER() OVER(ORDER BY t.CreatedOnDate) AS RowNum, 
t.ItemId
from Tickets t
where t.CompanyId = @CompanyId
group by t.ItemId ...

order by t.CreatedOnDate desc -- this makes me trouble

) ,x as (
select ItemsRank.*, 
c.CommentText ...

WHERE RowNum > @p_From
    AND RowNum <= @p_From + 50
)
select * from x where RowNumComment <= 4 
```

*因为查询很大，所以我删除了所有选择、加入、组等。*
如果我在查询结束时按顺序排序，它可以工作，但不如预期。
因为查询的第一部分应该按降序获得前 50 个结果。

这是我得到的错误：

> ORDER BY 子句在视图、内联函数、派生表、子查询和公用表表达式中无效，除非还指定了 TOP 或 FOR XML

我究竟做错了什么？
是否可以修复此查询以在查询的第一部分中获取已订购的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:12:41.097

如错误所示，您不能`ORDER BY`在 CTE 中使用。

那`ORDER BY`是没有必要的。`OVER`您在子句中指定顺序。您可以`ORDER BY RowNum`在最终查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:22:51.580

错误本身会为您提供有关为什么不能使用它的所有信息... :) 正如@flem 所说。试试这个并根据您的需要进行设置。

```
ROW_NUMBER() OVER(ORDER BY t.CreatedOnDate desc) AS RowNum, 
```

或者你可以创建`CTE`without`order by`然后使用`select`with `order by`。阅读更多关于[这篇文章](http://blog.sqlauthority.com/2010/08/23/sql-server-order-by-does-not-work-limitation-of-the-views-part-1/)。

# java - 用java编写接口的设计建议

> ID：14182484
> 
> 赞同：0
> 
> 时间：2013-01-06T13:10:28.453
> 
> 标签：java

我是 Java 新手，但我实际上很喜欢它，因为不管你信不信，它正在改进我的编码方式。（我猜是因为它迫使您以 OO 方式编写代码）

无论如何，我正在编写一个看起来像这样的 java 库。在基础上有核心库，然后在它之上构建了一些工具包。

现在所有的工具包都有部分代码是共同的。

例如，读取该工具包的配置文件。示例：toolkitA/config/config.cfg

```
config.cfg
inputDir = /path/to/input
outputDir = /path/to/output

toolkitB/config/config.cfg

config.cfg
inputDir = /path/to/input
// no output here.. maybe this toolkit is just to analyze the input 
```

问题是..很多这些配置是未知的，因为我仍在创建工具包，甚至我不知道将来会有什么工具包。

截至目前，代码流程如下。

```
 main--> readconfig-->parseconfig--> execute the source code with params. 
  parsed from the source parseconfig 
```

我的关键问题是，由于这些配置文件处于工具包级别，这些配置根本没有与源代码库连接。核心库忽略了这些参数实际上是由用户在配置文件中设置的。现在......也许是因为java，但我觉得这很肤浅。我想要的是这样的

```
 main--> a core config file setter which reads and parses this tool kit config file --> 
  the core library then interacts with these  objects rather than the superficial level. 
```

我如何做到这一点。

（作为一个狂热的stackoverflow用户..我知道..它不是真正的“错误”相关问题，但我也不知道要搜索什么或如何设置这样的配置内容..我所拥有的只是我想要这个东西的想法实施.. :( )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:21:35.057

嗯......你的 cfg 文件就像[Properties ，这在](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)[负载](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.InputStream%29)中接受“InputStream”

[其次，您可以在类路径中发布这些配置并使用getResourceAsStream](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)作为 InputStreams 加载

```
InputStream is = Object.class.getClass().getResourceAsStream(CONFIG_FILE);
Properties cfg = new Properties();
cfg.load(is); 
```

# c# - WindowsForm PictureBox.Image 为空，即使表单中显示了图像

> ID：14182487
> 
> 赞同：5
> 
> 时间：2013-01-06T13:11:11.060
> 
> 标签：c#, winforms, image, picturebox

我正在尝试捕获此设备扫描的指纹-> [http://www.nitgen.com/eng/product/finkey.html](http://www.nitgen.com/eng/product/finkey.html)

我能够扫描指纹并成功保存二进制数据。我还可以在图片框中显示指纹。但是，当我尝试保存图片框中显示的指纹时，我收到一个错误，即图片框的图像为空。

下面是我捕获指纹并从图片框中保存图像的代码。

```
public class Form1 : System.Windows.Forms.Form
{
    public NBioBSPCOMLib.NBioBSP objNBioBSP;
    public NBioBSPCOMLib.IExtraction objExtraction;
    private PictureBox pictureExtWnd;

    private void Form1_Load(object sender, System.EventArgs e)
    {
        // Create NBioBSP object
        objNBioBSP = new NBioBSPCOMLib.NBioBSPClass();
        objExtraction = (NBioBSPCOMLib.IExtraction)objNBioBSP.Extraction;
        pictureExtWnd.Image = new Bitmap(pictureExtWnd.Width, pictureExtWnd.Height);
    }

    private void buttonEnroll_Click(object sender, System.EventArgs e)
    {
        //tell NBIO to not display their fingerprint scanning window
        objExtraction.WindowStyle = NBioBSPType.WINDOW_STYLE.INVISIBLE;

        //set the color of the fingerprint captured
        objExtraction.FPForeColor = "000000";

        //set the color of the background where the fingerprint will be displayed
        objExtraction.FPBackColor = "FFFFFF";

        //tell NBIO that the scanned fingerprint will be displayed in the picturebox
        //by giving the handle control to NBIO
        objExtraction.FingerWnd = pictureExtWnd.Handle.ToInt32();

        //start scanning the fingerprint. This is also where the fingerprint
        //is displayed in the picturebox. 
        objExtraction.Capture((int)NBioBSPType.FIR_PURPOSE.VERIFY);

        //if there's no problem while scanning the fingerprint, save the fingerprint image
        if (objExtraction.ErrorCode == NBioBSPError.NONE)
        {
            string fileName = RandomString.GetRandomString(16, true) + ".bmp";

            using (SaveFileDialog sfdlg = new SaveFileDialog())
            {
                sfdlg.Title = "Save Dialog";
                sfdlg.Filter = "Bitmap Images (*.bmp)|*.bmp|All files(*.*)|*.*";
                if (sfdlg.ShowDialog(this) == DialogResult.OK)
                {
                    pictureExtWnd.Image.Save(sfdlg.FileName, ImageFormat.Bmp);
                    MessageBox.Show("FingerPrint Saved Successfully.");
                }
            }
        }
        else
        {
            MessageBox.Show("FingerPrint Saving Failed!");
        }
    }
} 
```

我试过封闭在里面

```
using(Graphics g = new Graphics)
{
    objExtraction.Capture((int)NBioBSPType.FIR_PURPOSE.VERIFY);
} 
```

因为我已经读过，在对图像进行编辑时，您需要使用图形。但显然没有发生任何事情，因为 api 没有使用我实例化的图形对象。

**UPDATE:** This is what I ended up doing:

```
using (SaveFileDialog sfdlg = new SaveFileDialog())
        {
            sfdlg.Title = "Save Dialog";
            sfdlg.Filter = "Bitmap Images (*.bmp)|*.bmp|All files(*.*)|*.*";
            if (sfdlg.ShowDialog(this) == DialogResult.OK)
            {
                Graphics gfx = this.pictureExtWnd.CreateGraphics();
                Bitmap bmp = new Bitmap(this.pictureExtWnd.Width, this.pictureExtWnd.Height);
                this.pictureExtWnd.DrawToBitmap(bmp, new Rectangle(0, 0, this.pictureExtWnd.Width, this.pictureExtWnd.Height));
                bmp.Save(sfdlg.FileName, ImageFormat.Bmp);

                gfx.Dispose();
                //pictureExtWnd.Image.Save(sfdlg.FileName, ImageFormat.Bmp);
                MessageBox.Show("Saved Successfully...");
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:14:44.510

```
 objExtraction.FingerWnd = pictureExtWnd.Handle.ToInt32(); 
```

You passed the window handle to the fingerprint scanner. That's a common way to tell a chunk of native code about a window that it can draw to. It will typically sub-class the window procedure to respond to WM_PAINT requests, for example, same idea as NativeWindow.WndProc().

Implied however is that the Image property is useless. That native code has no idea that this is a PictureBox control and that it has an Image property. It only knows about the native window that was created for the control.

Do look in the api for an option to save the image, this ought to be available. If not then your first shot at saving it is using the picture box' DrawToBitmap() method. Which *may* work if the scanner implements the WM_PRINT message handler. If that doesn't work then your only other backup plan is to use Graphics.CopyFromScreen(). Which will always work, as long as the window is in the foreground. Similar to using the PrtSc button on your keyboard, a screen-shot.

# javascript - javascript 从表中获取值

> ID：14182488
> 
> 赞同：1
> 
> 时间：2013-01-06T13:11:10.513
> 
> 标签：javascript, html

我有这个表：

```
<table border="1" id="table">
  <tr>
    <th>Id</th>
    <th>action</th>
  </tr>
  <tr>
    <td>123</td>
    <td><a href="#">select</a></td>
  </tr>
  <tr>
    <td>456</td>
    <td><a href="#">select</a></td>
  </tr>
  <tr>
    <td>789</td>
    <td><a href="#">select</a></td>
  </tr>
</table>
result =<input type="text"> 
```

使用javascript如何在单击选定的href行时在输入中显示id值，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:41:13.660

给输入元素一个 'result' 的 id 并试试这个，

```
var table = document.getElementById('table');
var links = table.getElementsByTagName('a');

for(var x = 0; x < links.length; x++) {
    links[x].onclick = function() {
      var parentCell = this.parentNode;
      var parentRow = parentCell.parentNode;

      var idCell = parentRow.cells[parentCell.cellIndex-1]
      var id = idCell.textContent;

      document.getElementById('result').value = id;

    }

} 
```

快速 JS Fiddle 在这里， [http://jsfiddle.net/X8vEx/](http://jsfiddle.net/X8vEx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T13:38:29.803

像这样：

纯JS！！

[http://jsfiddle.net/vQBZJ/7/](http://jsfiddle.net/vQBZJ/7/)

使用 HTML4 兼容代码：

```
var links = document.getElementsByTagName('a');
for (i=0; i<links.length; i++)
{
  links[i].addEventListener("click", function(event)
                            {
                              event.preventDefault();
                              var res= document.getElementById("result");

                              res.value = this.parentNode.parentNode.getElementsByTagName("td")[0].innerHTML;
                            }
                            , false);
} 
```

仅限 HTML5：

jsfiddle：http: [//jsfiddle.net/vQBZJ/2/](http://jsfiddle.net/vQBZJ/2/)

```
var links = document.querySelectorAll('a');
for (i=0; i<links.length; i++)
{
  links[i].addEventListener("click", function(event)
                            {
                              event.preventDefault();
                              var res= document.querySelector("#result");

                              res.value = this.parentNode.parentNode.querySelector("td").innerHTML;
                            }
                            , false);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T13:24:15.300

像这样？

```
<script type="text/javascript">
function SelectVal(ele)
{
    document.getElementById("result").value = ele.parentNode.parentNode.children[0].innerHTML;
}
</script>

<table border="1" id="table">
  <tr>
    <th>Id</th>
    <th>action</th>
  </tr>
  <tr>
    <td>123</td>
    <td><a href="#" onclick="SelectVal(this);">select</a></td>
  </tr>
  <tr>
    <td>456</td>
    <td><a href="#" onclick="SelectVal(this);">select</a></td>
  </tr>
  <tr>
    <td>789</td>
    <td><a href="#" onclick="SelectVal(this);">select</a></td>
  </tr>
</table>
Result = <input id="result" type="text"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T13:33:18.923

用于简化此操作的[Jquery](http://jquery.com/)

```
<table border="1" id="table">
  <tr>
    <th>Id</th>
    <th>action</th>
  </tr>
  <tr>
    <td>123</td>
    <td><a href="#" onclick="getId(this)">select</a></td>
  </tr>
  <tr>
    <td>456</td>
    <td><a href="#" onclick="getId(this)">select</a></td>
  </tr>
  <tr>
    <td>789</td>
    <td><a href="#" onclick="getId(this)">select</a></td>
  </tr>
</table>
<script>
function getId(e){
alert(e.parentNode.parentNode.firstElementChild.innerHTML);
}
</script> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-06T13:18:54.417

使用 jQuery，您可以这样做：

[工作演示](http://jsfiddle.net/7cbJQ/2/)。

JS：

```
$(function(){
    $('#table a').click(function(e) {
        e.preventDefault();
        $('#result').val($(this).closest('tr').find('td:first').text());
    });
}); 
```

HTML：

```
<table border="1" id="table">
  <tr>
    <th>Id</th>
    <th>action</th>
  </tr>
  <tr>
    <td>123</td>
    <td><a href="#">select</a></td>
  </tr>
  <tr>
    <td>456</td>
    <td><a href="#">select</a></td>
  </tr>
  <tr>
    <td>789</td>
    <td><a href="#">select</a></td>
  </tr>
</table>
result = <input id="result" type="text"> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-06T13:21:39.927

您可以为此使用[jQuery](http://jquery.com)

```
$(document).ready(function(){
    $('table#table a').click(function(e){

        e.preventDefault();

        var value = $(this).parent().prev('td').text().trim();

        $('table#table').next('input').val(value);
    });
}); 
```

# objective-c - selectedRow 返回 null

> ID：14182490
> 
> 赞同：0
> 
> 时间：2013-01-06T13:11:20.210
> 
> 标签：objective-c, cocoa, nstableview

我在窗口上有一个 NSTableView，数据是使用 NSMutableArray 填充的，没关系

选择行后，当我签入代码时

```
[myTableView selectedRow]; 
```

或者

```
[myTableView clickedRow]; 
```

两者都返回 null

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T23:50:53.207

`selectedRow`并且`clickedRow`每个都返回一个`NSInteger`，而不是一个对象。他们返回 0，这是第一行的索引。

如果您`0`将其打印为对象（例如，使用`NSLog(@"%@", [myTableView selectedRow])`），它将打印为`nil`，因为这`nil`就是：`0`作为对象指针。

* * *

当然，这假设它`myTableView`首先实际上是指一个表视图。如果`myTableView`还没有指向表视图（即，`myTableView`变量本身包含`nil`），则任何发给它的消息都会依次返回`0`（同样，`nil`如果您将其视为对象）。

如果在未选择第一行或没有行时返回，或者`selectedRow`在未单击第一行时返回，请确保指向您期望的位置。`0``clickedRow``0``myTableView`

（我故意将问题的更具体解释及其解决方案留给你，Jaggu，因为你在评论中说你已经找到了。）

# windows-phone - WMAppManifest.xml 后台代理错误

> ID：14182497
> 
> 赞同：1
> 
> 时间：2013-01-06T13:12:52.600
> 
> 标签：windows-phone, background-agent

添加后台代理任务后，我收到 WMAppManifest.xml 文件的警告。我的xml是：

```
<ExtendedTask Name="BackgroundTask">
    <BackgroundServiceAgent Specifier="ScheduledTaskAgent" Name="MyAgent" Source="MyAgent" Type="MyAgent.ScheduledAgent" />
</ExtendedTask> 
```

后台代理类文件名 - ScheduledTaskAgent

后台代理程序集名称 - myAgent

后台代理默认命名空间 - myAgent

谁能指出错误？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:56:21.670

我找到了解决方案。这可能会帮助那些陷入同样问题的人。

**步骤**：

1.  使用 Visual Studio 中的模板创建后台代理。
2.  在主项目中，右键单击解决方案并选择添加现有项目
3.  然后右键单击主项目，单击添加引用，转到第二个选项卡“项目”并选择后台代理。

第三**步**是主要步骤。我错过了那一步，因此错过了这个问题。WMAppManifest.xml 中的条目将被**自动**创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:55:26.543

这可能听起来很奇怪，但请尝试将后台代理类的名称更改为其他名称，例如 ScheduledAgent。我想你可能在那里有名字冲突。

# php - 每 2 周的发票查询。最佳实践

> ID：14182504
> 
> 赞同：2
> 
> 时间：2013-01-06T13:15:22.357
> 
> 标签：php, sql

我正在为我的应用程序开发发票系统。我想每 2 周向用户开具发票。每周都有一个 cronjob 检查用户是否收到发票。但它给了我一些错误，因为这是新的一年，即使有人在一周前收到发票，系统也会给他们一张发票。

这是我的查询：

```
SELECT * 
FROM   user 
WHERE  DAY(registered) = DAY(DATE_SUB(CURDATE(), INTERVAL 2 WEEK))
 OR    DAY(registered) = DAY(NOW()) AND registered != CURRENT_DATE() 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:07:10.940

你可以试试这个——（代码经过测试）[Demo](http://sqlfiddle.com/#!2/dd506/1)

```
SELECT * FROM user WHERE registered > CURRENT_DATE() AND 
MOD((FLOOR( DATEDIFF( now( ) , `registered` ))),14) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:14:49.163

MySQL 中的`day`函数返回月份中的日期。当时间段跨越月边界时，您的查询显然会遇到问题。

我认为你想要这种形式的逻辑：

```
SELECT * 
FROM   user 
WHERE  registered >= DATE_SUB(CURDATE(), INTERVAL 2 WEEK)) and
       registered < curdate() 
```

（或者`<=`，如果您希望为当前日期开具发票。）

我不知道这是在做什么：

```
 OR    DAY(registered) = DAY(NOW()) AND registered != CURRENT_DATE() 
```

如果注册和 now() 的月份日期相同，则注册应该是当前日期。`now()`和之间的唯一区别`curdate()`是前者包括时间戳。我还要说，在同一个查询中混合三种不同的获取相同日期的方法是不好的做法，即使它们是等价的。

# java - 高频环路

> ID：14182505
> 
> 赞同：2
> 
> 时间：2013-01-06T13:15:50.610
> 
> 标签：java

如何以常规（！）间隔创建每秒执行约 10000 次的循环？

[（从 Java 中的并行端口连续获取数据](https://stackoverflow.com/questions/7691257/continuous-data-acquisition-from-parallel-port-in-java)的副本，但很难找到，没有答案，而且很旧）

我看了看，`Thread.sleep(long millis)`但`Thread.sleep(long millis, int nanos)`Windows 上的 Oracle J2SE 虚拟机的睡眠时间总是比我指定的时间长 1 毫秒。此外， nanos 字段似乎被四舍五入到下一个整毫秒（已验证，这是在 Thread.java 的源代码中硬编码的）。

实验结果：

*   `Thread.sleep(0)`不睡觉（100% cpu）
*   `Thread.sleep(1)`平均睡眠 1.95 毫秒
*   `Thread.sleep(2)`平均睡眠 2.95 毫秒
*   `Thread.sleep(0, 0)`不睡觉（100% cpu）
*   `Thread.sleep(0, 1)`平均睡眠 1.95 毫秒

那么，我怎样才能创建一个循环以固定间隔每秒迭代超过 500 次呢？

编辑：我稍微放宽了“常规”要求。如果一个延迟比另一个延迟短 4 倍（即抖动不是问题），这不是一个大问题，只要最长延迟是确定性的并且低于 0.1 毫秒。（情况并非如此`ScheduledExecutorService`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:18:10.063

我相信您正在寻找[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)（请参阅使用示例）。

具体来说

`scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit)`

`Creates and executes a periodic action that becomes enabled first after the given initial delay, and subsequently with the given period; that is executions will commence after initialDelay then initialDelay+period, then initialDelay + 2 * period, and so on.`

使用 TimeUnit.MICROSECONDS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:21:11.497

当 Java 中的计时循环时，永远不要使用`Thread.sleep(long)`，因为这是一种非常不精确的循环方法。尝试`javax.swing.Timer`改用。一个链接在这里。[http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:21:13.460

如果您可以将核心固定在 100%，则可以使用此方法在亚微秒间隔内获得相当均匀分布的事件。当然，如果您使用它达到最大吞吐率，那么将 System.nanoTime() 替换为成本较低的定时调用将是可取的。

```
long nanosBetweenMessages = getSpacing();
long lastSendTime = 0l;
while (true) {
   final long curTimeNanos = System.nanoTime();
   if (curTimeNanos - lastSendTime < nanosBetweenMessages) {
       continue;
   }
   lastSendTime = curTimeNanos;
   sendEvent();
   if (done()) {
       break;
   }
} 
```

我刚刚注意到您的 10k/sec 要求...我目前在 sendEvent() 方法中使用它进行大量计算，以大约 20k/秒的最大速率推送。

# java - 如何迭代 json 对象数组（gson）

> ID：14182511
> 
> 赞同：7
> 
> 时间：2013-01-06T13:16:26.163
> 
> 标签：java, json, gson

我正在制作一个船舶防御游戏。
我在获取航点数组时遇到问题。地图包含`JSON`格式（使用`GSON`）

```
{
 "waypoints" : {
    "ship": { 
       "first_type": [[0,0],[5,7],[2,8],[4,4],[10,10],[12,0],[0,12],[12,8],[8,8]]                            
    },
    "boat": { 
       "first_type": [[0,0],[5,7],[2,8],[4,4],[10,10],[12,0],[0,12],[12,8],[8,8]]                            
    }
  }
} 
```

我的代码：

```
 jse = new JsonParser().parse(in);
    in.close();

    map_json = jse.getAsJsonObject();
    JsonObject wayPoints = map_json.getAsJsonObject("waypoints").getAsJsonObject("ship"); 
```

我写了这个，但它不起作用。

```
JsonArray asJsonArray = wayPoints.getAsJsonObject().getAsJsonArray(); 
```

我怎样才能foreach对象数组？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-06T13:28:01.363

您可以`first_type`使用以下代码简化代码并检索数组。相同的代码也应该适用于`second_type`数组：

```
JsonArray types = map_json
    .getAsJsonObject("waypoints")
    .getAsJsonObject("ship")
    .getAsJsonArray("first_type";

for(final JsonElement type : types) {
    final JsonArray coords = type.getAsJsonArray():
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T13:26:07.560

`wayPoints`是一个 JSON 对象。它包含另一个名为`ship`. 并`ship`包含一个名为`first_type`. 所以你应该`first_type`从对象中获取数组`ship`，然后迭代这个数组。

# c++ - Xcode Apple Mach-O 链接器 (ld) 错误

> ID：14182514
> 
> 赞同：0
> 
> 时间：2013-01-06T13:17:01.487
> 
> 标签：c++, xcode4.5

嗨，我正在尝试学习 stanford cs106/x 课程，但他们使用了某些不再提供的库。我设法找到了它们的一个版本，但我经常遇到错误。我将 .h 文件添加到我正在使用它们的当前项目中。这是我在 C++ 中运行的简单代码：

```
#include <iostream>
#include "genlib.h"
#include "simpio.h"

int main()
{
    cout << "How much do you love me? ";
    int howAweSome = GetInteger();
    for (int i = 0; i < howAweSome; i++)
    cout << "10GB rocks!" << endl;
    return 0;
} 
```

出现以下错误：

```
Undefined symbols for architecture x86_64:
"GetInteger()", referenced from:
  Main() in main.o
"_main", referenced from:
 -u command line option
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

以下是使用的库：

“simplio.h”：

```
/*
* File: simpio.h
* Last modified on Wed Jul 22 07:01:03 2009 by eroberts
*      modified on Wed Sep 18 13:34:29 2002 by zelenski
* -----------------------------------------------------
* This interface provides access to a simple package of
* functions that simplify the reading of console input.
*/

#ifndef _simpio_h
#define _simpio_h

#include "genlib.h"

/*
* Function: GetInteger
* Usage: n = GetInteger();
* ------------------------
* GetInteger reads a line of text from standard input and scans
* it as an integer.  The integer value is returned.  If an
* integer cannot be scanned or if more characters follow the
* number, the user is given a chance to retry.
*/

int GetInteger();

/*
* Function: GetLong
* Usage: n = GetLong();
* ---------------------
* GetLong reads a line of text from standard input and scans
* it into a long integer.  The long is returned.  If the
* number cannot be scanned or if extra characters follow it,
* the user is given a chance to retry.
*/

long GetLong();

/*
* Function: GetReal
* Usage: x = GetReal();
* ---------------------
* GetReal reads a line of text from standard input and scans
* it as a double.  If the number cannot be scanned or if extra
* characters follow after the number ends, the user is given
* a chance to reenter the value.
*/

double GetReal();

/*
* Function: GetLine
* Usage: s = GetLine();
* ---------------------
* GetLine reads a line of text from standard input and returns
* the line as a string.  The newline character that terminates
* the input is not stored as part of the string that is returned.
*/

string GetLine();

#endif 
```

“genlib.h”：

```
/*
 * File: genlib.h
 * Last modified on Sun Jul 17 2011 by Colin Leach
 *      modified on Mon Jun  8 20:16:05 2009 by eroberts
 *      modified on Wed Sep 18 13:41:31 2002 by zelenski
 * -----------------------------------------------------
 * This header file is indicated to be included in
 * all the programs written for CS106B/X and provides a few
 * common definitions. Note this header has a "using namespace std"
 * clause. If a file includes this header, it can then use
 * features from the std namespace without qualifying by scope.
 *
 * IMPORTANT!!  I had to change the interface after failing to
 * implement the Stanford version. Hence the genlib.h bundled
 * with CS106B exercises is NOT compatible - don't use it with 
 * Colin's open-source library code.
 * Apologies for the inconvenience, but I'm a C++ novice doing
 * the best I can.
 */

 #ifndef _genlib_h
 #define _genlib_h

 /* This strange-looking pragma is here to disable a warning from Visual C++
 * about truncating long identifiers for debugging symbols. The warning is
 * harmless, but a little disconcerting, so we suppress it. It comes up
 * using STL and other long template expansions.
 */
 #if defined(_MSC_VER)
 #pragma warning(disable: 4786)
 #endif

 #include <string>
 #include <exception>
 using namespace std;

 /*
 * Class: ErrorException
 * ---------------------
 * This exception is raised by calls to the Error function, which
 * makes it possible for clients to respond to error conditions
 * without having their programs bomb completely.
 */

 class ErrorException : public exception {
 public:
    ErrorException(string msg);
     virtual ~ErrorException() throw ();
     virtual const char* what() const throw ();
     //virtual string getMessage();
 private:
  string msg;
 };

/*
* Function: Error
* Usage: Error(msg);
* ------------------
* Error is used to signal an error condition in a program.  It first
* throws an ErrorException.  If that isn't caught, it outputs the
* error message string to the cerr stream and then exits the program
* with a status code indicating failure.
*/

void Error(string str);

/*
* Function macro: main
* --------------------
* The purpose of this macro definition is to rename the student
* main to Main in order to allow a custom main defined in our
* libraries to configure the application before passing control
* back to the student program.
*
* Note that this non-Stanford version only affects the zero-argument
* form of main(), not main(int argc, char* argv[]).
* If you want to use command-line arguments, you also have to catch
* your own ErrorException - see init.h/init.cpp for details.
*/

 #define main() Main()

 #endif 
```

我在 macbook pro OS X 10.8.2 上运行 Xcode 4.5.2。如果有人知道如何解决这个问题，那将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:23:57.040

.h 文件仅声明某些函数存在。要将您的程序与它们链接起来，您需要实际实现这些功能。

对于每个 .h 文件，应该有一个匹配的 .c 或 .cpp ，您将在构建中包含它们。（或者，如果它以二进制形式分发，.a 或 .dylib。）

# chef-infra - Vagrant - 如何将 Chef 的命令输出打印到标准输出？

> ID：14182515
> 
> 赞同：5
> 
> 时间：2013-01-06T13:17:18.373
> 
> 标签：chef-infra, vagrant, cookbook

如果我们在 Chef 食谱中有如下代码：

```
if !File.exists?('/vagrant/project/target/project/WEB-INF") || node[:compile_project]
  bash "build project" do
    user "vagrant"
    cwd "/vagrant/project"
    code <<-EOH
      mvn clean
      mvn db-migration:migrate
      mvn package
    EOH
  end
end 
```

运行时，`vagrant up`我们只能看到执行“构建项目”的简要信息。

但是，当我们从终端运行“mvn package”命令时，我们可以看到完整的命令输出。**如何告诉 Vagrant/Chef 显示完整输出？**

*编辑：*

我已经尝试过了，但输出没有任何变化。

```
config.vm.provision :chef_solo do |chef|
  chef.log_level = :debug 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-29T03:49:51.627

我对 vagrant 一无所知，但我认为这可能与您的问题有关...如果证明无关紧要，很高兴删除此答案！

> [--force-格式化程序](http://docs.opscode.com/ctl_chef_solo.html)
> 
> 表示将使用格式化程序输出而不是记录器输出。

所以我发现如果`solo.rb`已`log_location`定义添加选项`--force-formatter`在通过 rundeck 运行 chef 或远程执行时显示输出`ssh user@host "chef-solo --force-formatter"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-19T14:51:47.043

它仅在以下情况下将 bash/script/execute 资源执行输出打印到标准输出：

*   您的远程 chef-solo/chef-client 命令需要**TTY**。
*   不在守护进程模式下运行 chef-client
*   厨师日志级别设置为`:debug`

见[代码`chef/Mixin/ShellOut`，第 36 行](https://github.com/opscode/chef/blob/master/lib/chef/mixin/shell_out.rb#L36)。

使用时，似乎没有为 ssh 会话提供 TTY 的选项，因此解决方案是在为厨师设置日志级别`vagrant up`后四处走动：`:debug`

1.  跑`$ vagrant up`
2.  run `$ vagrant ssh -- -t`- 这意味着它传递`-t`给 ssh 命令，以便 ssh 会话有一个 tty。
3.  运行`chef-solo`手动运行厨师，然后您将在标准输出上获得输出。

# php - PHP 单例和扩展静态属性的使用

> ID：14182522
> 
> 赞同：1
> 
> 时间：2013-01-06T13:18:19.953
> 
> 标签：php, class, properties, static, singleton

我已经为这个问题绕了几个小时。也许这根本不可能，或者也许有更好的 OOP 解决方案来解决这个问题......

例如：我有两个班

```
class Base
{
    public static $config;
}

class System extends Base
{
    public function __construct()
    {
        self::$config = 2;
    }
}

class Core extends Base
{
    public function __construct()
    {
        self::$config = 3;
    }
} 
```

我总是将这些类作为单例访问：System::HelloWorld(), Core::DoStuff();

我希望 $Config 属性从 Base 类继承，因为我几乎在每个类中都需要它，所以为什么要一遍又一遍地定义它。

问题是，$Config 属性将自身覆盖为 sonn，因为另一个类为其设置了自己的值：

```
System::$config = 2;
Core::$config = 3;
print System::$config // it's 3 instead of 2 
```

我确实理解为什么会发生这种情况：因为 Base::$Config 是静态的 - 并且以这种方式 - 与所有孩子共享。我不想要这个，我希望它在每个孩子中都是静态的，但不是它的孩子的低谷。没问题，如果我真的实例化 System 和 Core 类，但我需要它们作为单例......

帮帮我，也许你知道比这个更好的设计模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:26:48.450

你根本不需要使用静态变量，

```
<?php
Class Base{
 public $Config;
}

Class System Extends Base{
 Public static $obj = null;
 Public static Function HelloWorld() {
  if (!System::$obj) System::$obj = new System();

  // call the object functions
  // $obj->HelloWorld();
 }

 Public Function __Construct()
 {
     $this->Config = 2;
 } 
}

Class Core Extends Base{
 Public Function __Construct()
 {
     $this->Config = 3;
 }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:52:54.773

为此，我想出了一个相对较好的解决方案。对于那些可能面临同样问题的人，请参阅[此处](https://stackoverflow.com/questions/14197338/php-my-way-of-threating-static-classes)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T13:54:36.410

```
<?php
// static change the attributes of the scope
class base
{
    public static $config;

}

class a extends base
{
    public function __construct()
    {
        self::$config = 1;
    }
}
class b extends base
{
    public function __construct()
    {
        self::$config = 2;
    }
}

a::$config = 2;
b::$config = 3;
echo a::config, ',', b::$config; // 3,3
$a = new a();
echo base::$config, a::$config, b::$config, $a::$config; // 1 1 1 1 
```

# jquery - 是否有 jQuery 的快捷方式允许我一次指定多个属性？

> ID：14182528
> 
> 赞同：1
> 
> 时间：2013-01-06T13:19:21.770
> 
> 标签：jquery

我有以下内容：

```
$target
    .attr('data-title', targetTitle)
    .attr('title', ''); 
```

有没有办法同时设置两个属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T13:21:53.047

您可以[传递一个 JavaScript 对象](http://api.jquery.com/attr/#setting-several-attrs)。对象中的每个键值对都会添加或修改一个属性。

```
$target.attr({
  'data-title': targetTitle,
  'title': ''
}); 
```

如记录在[`.attr()`](http://api.jquery.com/attr/)：

> **`.attr( attributes )`**
> 
> *   **`attributes`**
>     
>     
>     
>     **类型**：普通对象
>     
>     
>     
>     要设置的属性值对的对象。

您可能希望使用[`.data()`](http://api.jquery.com/data/)您的`data-*`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:31:25.117

如果您想在 jquery 中一次设置多个值，请始终使用**map**
例如 - attr() 的情况

```
 $('#greatphoto').attr({
        'data-title': targetTitle,
         'title': ''
         }); 
```

# c++ - 具有随机循环终止条件是否定义明确？

> ID：14182529
> 
> 赞同：1
> 
> 时间：2013-01-06T13:19:31.223
> 
> 标签：c++, random, undefined-behavior, language-lawyer

考虑这个身体`main`：

```
std::srand(std::time(nullptr));
while (std::rand()); 
```

令人惊讶的是，无论是在规范中、在 Google 上还是在这个网站上，我都找不到任何关于这是否定义明确的信息。至于规格：

N3485 § 6.5/4 **[stmt.iter]**说明了这种情况：

> [注：迭代语句中的条件要求见6.4。——尾注]

但是，通过 6.4，我没有看到任何与这种情况相关的内容。理论上，循环实际上可以永远持续下去，但在实践中，我通常有 5 毫秒的运行时间，所有测试运行中的一次是 22 毫秒。

将循环终止条件基于不断变化的（伪）随机数是否是明确定义的行为？如果不是，那是哪种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T13:26:50.303

`std::rand()`将在每次迭代时调用，然后循环将根据其返回值继续或不继续。

这里没有理由有任何未定义的行为。

这与做这样的事情没有什么不同

```
while (my_vector.empty()); 
```

为什么你认为这个案例会很特别？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T14:13:44.813

的行为

```
while (std::rand()); 
```

是，当然，定义明确。这意味着，它将内置伪随机数生成器的状态更改为返回 0 的某个状态。

但是，因为编译器可能假设这个循环最终会终止（通过 [intro.multithread]/24），所以您可能不会察觉到延迟，或者在它发生之后程序会产生一些可见的效果在延迟之前（如果你有一个非常聪明的编译器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T13:46:12.767

虽然我确定我们已经涵盖了“这是否合法”的情况，但我不确定使用这种特定方法等待随机 [1] 时间是否是一个好主意。

我认为使用类似的东西

```
int delay = constant + rand() * factor;
usleep(delay); 
```

会是更好的选择。它减少了 CPU 负载，并为您提供了一个定义的范围 - 无法保证 rand() 在第一次大量调用中会给您一个零，因此延迟可能会发生很大变化。

[1] 假设 srand() 被赋予了一个适当变化的数字——我不确定“time()”是实现这一目标的最佳方式。如果您每天重新初始化一次很好，但如果您的代码在同一秒内启动多次，它们都会得到相同的种子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T15:56:11.377

为了补充其他答案，标准中允许编译器假设任何循环将终止的子句的原因不是要使无限循环未定义，而是即使在编译器无法确定的情况下也允许进行优化如果循环将终止。

例如，在这种情况下

```
while(rand()) f(); 
```

如果编译器可以确定 rand 和 f 都没有任何副作用，则编译器可以消除整个循环，即使它无法证明 rand 最终会返回 0。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-06T13:31:33.917

在这种情况下，srand 的初始化总是相同的，所以 while 的行为在每次执行时都是相同的。尝试及时输入一些随机数据，您可以看到执行时间的变化。

# java - 正则表达式异常

> ID：14182556
> 
> 赞同：1
> 
> 时间：2013-01-06T13:23:17.917
> 
> 标签：java, regex, exception

我需要正则表达式来**检测所有带端口和不带端口的 IP，但除外**

> 93.153.31.151(:27002)

和

> 10.0.0.1(:27002)

我有一些，但我需要添加例外

```
\\d{1,3}(?:\\.\\d{1,3}){3}(?::\\d{1,5})? 
```

对于java匹配器

```
 String numIPRegex = "\\d{1,3}(?:\\.\\d{1,3}){3}(?::\\d{1,5})?";

    if (pA.matcher(msgText).find()) {
        this.logger.info("Found");

    } else {    
        this.logger.info("Not Found");                  

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T13:37:27.697

没有说明可以以结构化方式处理 IP 地址的更适合的 Java 类......

您可以使用负前瞻向正则表达式添加异常：

```
String numIPRegex = "(?!(?:93\\.153\\.31\\.151|10\\.0\\.0\\.1)(?::27002)?)\\d{1,3}(?:\\.\\d{1,3}){3}(?::\\d{1,5})?"; 
```

解释：

```
(?! # 开始负前瞻
  (?: # 启动非捕获组
    93\.153\.31\.151 #异常地址#1
    | ＃ 或者
    10\.0\.0\.1 #异常地址#2
  ) # 结束非捕获组
  (?: # 启动非捕获组
    :27002 # 端口号
  )? # 结束非捕获组；选修的
) # 结束负前瞻
\d{1,3}(?:\.\d{1,3}){3}(?::\d{1,5})? # 你原来的表达方式

```

当然，另一种明显的选择是预先一个一个地测试异常，如果一个异常匹配则返回 false。将它们全部包装在一个大的正则表达式中将很快变得非常难看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:56:52.787

你要这个？

```
public static void main(String[] args) {
    System.out.println(match("93.153.31.151(:27002)")); // false
    System.out.println(match("12.23.34.45(:21002)")); // true
}
public static boolean match(String input) {
    String exclude = "|93.153.31.151(:27002)|10.0.0.1(:27002)|";
    if (exclude.contains("|" + input + "|")) return false; // Exclude from match
    //
    String numIPRegex = "^\\d{1,3}(\\.\\d{1,3}){3}\\(:\\d{1,5}\\)$";
    Pattern pA = Pattern.compile(numIPRegex);
    //
    if (pA.matcher(input).matches()) {
        System.out.println("Found");
        return true;
    } else {    
        System.out.println("Not Found");                  
    }
    return false;
} 
```

# wordpress - 在 wordpress 中返回自定义分类 id 的所有帖子

> ID：14182558
> 
> 赞同：0
> 
> 时间：2013-01-06T13:23:27.970
> 
> 标签：wordpress

我有这段代码应该返回与分类 id 相关的所有帖子，但它会返回最后 5 个帖子。

```
<?php 
$leaderships = new WP_Query(array(
'post_type'      => 'leadership',
'posts_per_page' => 11,
'tax_query'      => array(
    array(
        'taxonomy' => 'leadership-committee', 
        'field'    => 'id',
        'terms'    => 13,
    ),
),
));
?> 
```

posts_per_page 在这里不起作用，任何帮助都可以获取所有帖子。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-20T13:32:57.837

这是上面问题的答案...

```
$args = array('post_type' => 'product',
    'tax_query' => array(
        array(
            'taxonomy' => 'product_cat',
            'field' => 'term_id',
            'terms' => 619,
        ),
    ),
 );

 $loop = new WP_Query($args);
 if($loop->have_posts()) {
    echo '<h2>'.$custom_term->name.'</h2>';

    while($loop->have_posts()) : $loop->the_post();
        echo '<a href="'.get_permalink().'">'.get_the_title().'</a>'."<br/>";
    endwhile;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:44:55.703

尝试测试最简单的方法：

```
<?php 
$leaderships = new WP_Query(array(
'post_type'      => 'leadership',
'posts_per_page' => -1
));
?> 
```

如果它从“领导”自定义帖子类型返回所有​​帖子，则使用“tax_query”缩小范围，并检查您是否有超过 5 个自定义帖子类型“领导”条目在其创建的自定义分类中名为“领导委员会” id 为 13 的孩子（类别/标签）。

除此之外，查询中看起来一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:46:41.247

感谢大家的帮助，我发现问题出在我的主题管理区域，该区域将帖子限制为 5 并且现在已修复。

# r - 关于 vrtest 包的实用问题

> ID：14182559
> 
> 赞同：0
> 
> 时间：2013-01-06T13:23:27.947
> 
> 标签：r, time-series, variance, random-walk

我想执行方差比测试（Lo-MackKinlay，Chow-Denning），但我在运行命令时遇到了一些问题。

1.  我有一个 1957 年到 2007 年的价格指数。我需要对水平序列或收益序列进行方差比检验吗？

2.  你如何修复kvec？它是一个带有滞后的向量，您要对其进行测试，对吗？

所以这是我的输出：

```
> rcorr
 [1]  0.0000 -0.1077  0.4103 -0.0347  0.1136  0.0286  0.0104  0.0104  0.1915
[10] -0.0025  0.0665  0.2127  0.0116 -0.1288  0.1640  0.3089  0.2098 -0.1071
[19] -0.2079 -0.1082  0.0022  0.1419  0.0641 -0.0082 -0.1163 -0.1731  0.0260
[28]  0.0468  0.0882  0.2640  0.3946  0.2094  0.2754  0.0623 -0.3696 -0.1095
[37] -0.1463  0.0118  0.0152 -0.0103  0.0223  0.0379  0.0580 -0.0091 -0.0510
[46]  0.0765  0.0984  0.1250  0.0519  0.1623  0.2552
> kvec<--c(2,5,10)
> Lo.Mac(rcorr,kvec)
Error in y[index] : only 0's may be mixed with negative subscripts 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:14:29.110

这与我刚刚回答的其他问题中的错误相同：

```
kvec<--c(2,5,10) 
```

是相同的

```
kvec <- -c(2,5,10) 
```

IE

```
kvec <- -1 * c(2,5,10) 
```

删除第二个破折号。

# python - 在 Python 中一次检查大量 IMAP 帐户

> ID：14182560
> 
> 赞同：2
> 
> 时间：2013-01-06T13:23:48.597
> 
> 标签：python, imap, scalability, email-client

我必须编写一个可以检查多个（可能多达数百个）电子邮件帐户的新消息的小守护进程。

到目前为止我的想法：

我可以为每个连接创建一个新线程，使用[imapclient](http://imapclient.freshfoo.com/)每 x 秒检索一次消息，或者在可能的情况下使用 IMAP IDLE。我还可以稍微修改 imapclient 并且`select()`仅使用单个线程激活 IMAP IDLE 的所有套接字。

有没有更好的方法来解决这个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:32:27.720

要是你几个月后问的话就好了，因为 Python 3.3.1 可能会有一个漂亮的新异步 API。有关当前原型，请参见[http://code.google.com/p/tulip/](http://code.google.com/p/tulip/)，但您可能还不想使用它。

如果您在 Windows 上，您可能能够毫无问题地处理数百个线程。如果是这样，这可能是最简单的解决方案。所以，试试看。

如果您在 Unix 上，您可能想要使用`poll`而不是`select`，因为`select`当您进入数百个连接时，扩展性很差。（`epoll`在 linux 或`kqueue`Mac/BSD 上的可扩展性更高，但在您进入数以千计的连接之前通常并不重要。）

但在您自己执行此操作之前，您可能需要考虑一些事项：

*   [扭曲的](http://twistedmatrix.com/trac/)
*   [龙卷风](http://www.tornadoweb.org)
*   [单片眼镜](https://github.com/saucelabs/monocle)
*   [事件](http://www.gevent.org)

`Twisted`绝对是其中最难进入的——但它还附带了一个准备就绪的 IMAP 客户端，以及其他数百种东西，所以如果你愿意处理一些学习曲线，你可能会做很多事情快点。

`Tornado`感觉最喜欢写原生`select`类型的代码。我实际上并不知道它附带的所有功能。它可能有一个 IMAP 客户端，但如果没有，您将采用`imapclient`与`select`.

`Monocle``Twisted`位于or之上`Tornado`，并允许您编写类似于 3.3.1 中的代码，在 Twisted 或 Tornado 之上（尽管实际上，您可以直接在 Twisted 中使用 来做同样的事情`inlineCallbacks`，只是文档不鼓励您无需先学习其他所有内容即可学习）。再说一次，你会在`imapclient`这里捣乱。（或者使用`Twisted`'s IMAP 客户端来代替......但在这一点上，您不妨`Twisted`直接使用。）

`gevent`让您编写与线程（或同步）代码几乎相同的代码，并且神奇地使其异步。您可能需要`imapclient`稍微修改一下，但它可能就像运行神奇的猴子补丁实用程序一样简单，仅此而已。除此之外，您编写的代码与使用线程编写的代码相同，只是您创建了一堆greenlet而不是一堆线程，并且您获得了一个或两个数量级的可伸缩性。

如果您正在寻找绝对最大的可扩展性，您可能希望同时并行化和多路复用（例如，`gevent`在 Unix 上运行 8 个进程，每个进程都使用 ,，或者在 Windows 上将本机线程池附加到 IOCP），但是对于几百个连接，这不是必需的。

# ember.js - Ember.js 嵌套插座

> ID：14182565
> 
> 赞同：2
> 
> 时间：2013-01-06T13:24:01.793
> 
> 标签：ember.js

## 更新：2013 年 1 月 6 日

目标 ：

我有一个主视图，我将其用作脚手架。我打算在主视图的不同部分插入子视图。主视图是动态的，当用户选择不同的路线时，可能会被另一个视图替换。

方法#1：

我为主视图定义了一个插座，并为主视图中的每个子视图命名了插座。插座对于顶级模板（主视图）工作正常，但是，嵌套的子插座没有被渲染。API 是否支持嵌套插座？

方法 #2：在子模板中，我尝试 {{#with }} 定义范围，以便选择正确的控制器并使用正确的数据呈现子视图。但是，{{#with }} 似乎没有按预期工作。

我本来想安装 jsfiddle ，但他们有旧版本的 Ember.js

```
########ROUTER Config ########

    App.Router.map(function (match) {
        match('').to('index');
        match('/').to('index');
        match('/models').to('models');
        match('/list').to('list');
    });

    App.IndexRoute = Ember.Route.extend({
        redirect : function () {
            this.transitionTo('models');
        }
    });

    App.ModelsRoute = Ember.Route.extend({
        renderTemplates : function () {
            var navigationController = this.controllerFor('navigation'),
                fuseColController = this.controllerFor('fuseCol');
            this.render('navigation-view', {
                outlet : 'navigationContent',
                controller : navigationController
            });
            this.render({ outlet : 'mainContent' });
   /* this does not work , is it due to nested outlets not being supported? 
    Are there any events fired when render on mainContent is complete so that child views may be rendered?
this.render('col-view', {outlet : 'fuseColContainer', controller: fuseController}); */
            console.log("On Models Route Render");
        },
        connectOutlets : function (router, context) {
            console.log("On Models connnectOutlets");//Is Never called 
        },
        connectOutlet : function (router, context) {
            console.log("On Models connnectOutlet"); //Is Never called 
        },
        setupControllers : function (controller) {
            console.log("Models setupControllers called");
//            this.controllerFor('fuseCol').connectOutlet('fuseColContainer', 'fuseCol');
//deprecated in the new API ?? connecteOutlet throws up error !!! 
        }

    });

############################# Templates #######################

<script type="text/x-handlebars">
    <div class="container-fluid">
        {{outlet navigationContent}}//This  WORKS !!!

        {{outlet mainContent}}// This WORKS !!!
    </div>
</script>

<script type="text/x-handlebars" id="models-view">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span2">
                    Nested Child 1 
                    {{outlet fuseColContainer}}  //Does Not Work  
            </div>
            <div class="span10">
                <div class="row-fluid">
                    <div class="row-fluid">
                        <div class="span10">Nested Child 2</div>
                        <div class="span2">Nested Child 3</div>
                    </div>
                    <div class="row-fluid">Nest Child 4</div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/x-handlebars" data-template-name="fuse-col-view" id="fuse-col-view">
    <select multiple="true" id="fuseColList">
        {{#each item in  controller}}
        <option>{{item.name}}</option>
        {{/each}}
    </select>
</script>
################### Controller #################

  App.Router = Ember.Router.extend();

    App.Router.map(function (match) {
        match('').to('index');
        match('/').to('index');
        match('/models').to('models');
        match('/list').to('list');
    });

    App.IndexRoute = Ember.Route.extend({
        redirect : function () {
            this.transitionTo('models');
        }
    });

    App.ModelsRoute = Ember.Route.extend({
        renderTemplates : function () {
            var navigationController = this.controllerFor('navigation'),
                fuseColController = this.controllerFor('fuseCol');
            this.render('navigation-view', {
                outlet : 'navigationContent',
                controller : navigationController
            });
            this.render({ outlet : 'mainContent' });
            /* This does not work , i think there should be a better approach
            this.render('fuse-col-view', {outlet : 'fuseColContainer', controller : fuseColController});*/
            console.log("Models render called");
        },
        connectOutlets : function (router, context) {
            console.log("Models connnectOutlets called");
        },
        connectOutlet : function (router, context) {
            console.log("Models connnectOutlet called");
        },
        setupControllers : function (controller, playlist) {
            console.log("Models setupControllers called");
    /*there is no connectOutlet method on controller in API ??*/
//            this.controllerFor('fuseCol').connectOutlet('fuseColcontainer', 'fuseCol');
        }

    });

    App.FuseColController = Ember.ArrayController.extend({
        content : [],
        init : function () {
            this.pushObject(App.FuseColItem.create({name : 'Col 1'}));
            this.pushObject(App.FuseColItem.create({name : 'Col 2'}));
            this.pushObject(App.FuseColItem.create({name : 'Col 3'}));
        }
    });

    App.FuseColItem = Ember.Object.extend({
        name : 'Sample Col'
    });

    App.FuseColView = Ember.View.extend({
        templateName : 'fuse-col-view'
    }); 
```

Ember.js 版本：构建于 13 年 1 月 3 日

我省略了代码的其他部分以保持简短。请添加评论以获取更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:43:31.303

你设置路由器了吗？如果是这样，这将自动创建相应的命名空间视图，路由名称的控制器。正如您所做的那样，如果您需要一个 ArrayController，您将手动实例化它。

如果你这样设置路由器：

```
App.Router.map(function (match) {
    match("/").to("col");
});

App.colRoute = Ember.Route.extend({
    renderTemplate: function(){
        this.render('col-view')
    }
}) 
```

然后 Ember 将通过路由器名称链接 colView、colController（您定义的 arrayController）和您的“col-view”模板。

我认为您不需要使用“#with”，而且我认为我在某处读到这是不好的做法……我认为；）

# c# - 如何根据字段值从另一个数据表填充数据表

> ID：14182566
> 
> 赞同：0
> 
> 时间：2013-01-06T13:24:10.473
> 
> 标签：c#, asp.net, datatable

我教一个 9 个单元的班级，学生可以通过每个单元以“及格”、“优异”或“优异”的成绩通过。AP 获得 70 分，M 获得 80 分，D 获得 90 分。今年的总体结果是所有单元的总分。

他们需要在允许“M”标准之前通过所有“P”标准，并且在允许“D”标准之前他们需要所有“M”标准。P/M/D 标准的数量因单位而异。以下学生在本单元中取得了“及格”（70 分），因为即使他获得了所有 D 标准，他也没有获得 M：

单元 1 - 脑外科

P1 - 知道大脑在哪里 - 通过
P2 - 知道哪条路向上 - 通过
M1 - 解释大脑做什么 - 通过
M2 - 男性和女性大脑之间是否存在差异 - 失败
D1 - 弄清楚为什么我的大脑可以t 解决这个问题 - 通过
D2 - 发明一种药物，让大脑立即弄清楚逻辑 - 通过
D3 - 找到一种仅靠脑力就能赚很多钱的方法 - 通过

我有一个SqlDataReader，它用这些列填充DataTable：unitNo、criteriaName、criteriatype（即P/M/D）、passedOrFailed。该查询已按个别学生进行选择，因此 DataTable 仅包含一名学生的记录。它看起来像这样：

```
UnitNo   Citerion   Type   passed?  
1        know etc     P       Yes  
1        know etc     P       Yes  
1        explain etc  M       Yes  
1        is there etc M       No  
1        Figure etc   D       Yes  
1        invent etc   D       Yes  
1        find etc     D       Yes  
2        blah etc     P       Yes  
2        wot etc      P       Yes  
2        so etc       M       No 
```

我正在寻找一个看起来像这样的数据表：

```
UnitNo  P    M   D   Points  
1       Y    N   Y     70  
2       Y    Y   N     80  
3       N    N   N      0  
4       N    Y   Y      0  
5       Y    Y   Y     90 
```

………………………………………………………………………………………………………………………………………………
_
_

最后总分 - 学生有 240 分。

我对 DataTables、c# 等非常满意，这是让我陷入困境的逻辑。我写的每一段代码在大约 2 行之后看起来都像意大利面条。

有没有人有一些关于整理这个逻辑的指示？就像古尔蒙哈斯特学校里的场景……如果你能解决的话，我会亲自派老婆去给你做周日烤肉。

个人电脑

* * *

好的，这是包含 CSharper 答案的实际代码（也进行了编辑以添加他的额外列名的解决方案）。这显然是正确的解决方案，我只是没有完全让数字出现（我发现他在 DataRow 演员表后遗漏了括号，但这不是问题）。我在最后连接了几个测试网格以显示结果。另外，我不是 linq 人，所以我不知道如何将第一个表中的单位名称添加到第二个表中，或者总分：

（注意，我使用 1 = 未标记，2 = 失败，3 = 通过 passFail 字段）

```
//create the sql to extract the data
        String sqlString = "SELECT unitNo, unitName, criterionPMD, passFail FROM unitDetails INNER JOIN unitStudentRecord ON unitDetails.id = unitStudentRecord.unitDetailsId INNER JOIN unitSummary ON unitDetails.unitSummaryId = unitSummary.id WHERE studentID = '" + ((String)Session["studentID"]).Trim() + "'";
        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["studentTutorialsConnectionString"].ConnectionString);
        SqlCommand sqlComm = new SqlCommand(sqlString, conn);
        conn.Open();
        SqlDataReader sqlTotalMarks = sqlComm.ExecuteReader();

        //create the workings out datatable and fill it
        DataTable dtWorkings = new DataTable();
        dtWorkings.Load(sqlTotalMarks);
        conn.Close();

        // create the results datatable
        DataTable dtResults = new DataTable();
        dtResults.Columns.Add("units", typeof(int));
        dtResults.Columns.Add("name", typeof(string));
        dtResults.Columns.Add("P", typeof(bool));
        dtResults.Columns.Add("M", typeof(bool));
        dtResults.Columns.Add("D", typeof(bool));
        dtResults.Columns.Add("points", typeof(int));

        //fill the results table
        foreach (var units in dtWorkings.Rows.Cast<DataRow>().GroupBy(r => r["unitNo"]))
        {
            var p = units.Where(r => r["criterionPMD"] == "P").All(r => r["passFail"] == "3");
            var m = units.Where(r => r["criterionPMD"] == "M").All(r => r["passFail"] == "3");
            var d = units.Where(r => r["criterionPMD"] == "D").All(r => r["passFail"] == "3");
            dtResults.Rows.Add(
                 units.Key,//UnitNo
                 units.Select(r => r["unitName"]).First(),//UnitName                    
                 p,
                 m,
                 d,
                 p ? (m ? (d ? 90 : 80) : 70) : 0);//Points
        }

        gvTemp.DataSource = dtWorkings;
        gvTemp.DataBind();
        gvSummary.DataSource = dtResults;
        gvSummary.DataBind(); 
```

这是 gvTemp 的网格：

```
 unitNo   unitName       criterionPMD passFail
    2     Computer systems  P     3
    2     Computer systems  P     1
    3     Web rubbish           P     3 
```

这是 gvSummary 的网格：

```
units   name               P     M  D   points
2           Computer systems            90   
3           Web rubbish                             90 
```

在 gvSummary 网格中，所有 PMD 标准都出现了勾选的复选框，但没有总计。我期待第 2 单元的分数为零，第 3 单元的分数为 70 分……

好近啊……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:35:40.880

使用 C# 类执行此操作可能有助于将问题分解为更小的部分并获得更好的可维护解决方案。但是，使用`DataTable`. 数据表的另一个缺点是数据不容易实现类型安全。在此答案的第一个版本中，缺少 r["criterionPMD"] 到字符串的转换，因此存在参考比较而不是字符串比较。

```
 //create the workings out datatable and fill it
            DataTable dtWorkings = new DataTable();
            dtWorkings.Columns.Add("unitNo", typeof(int));
            dtWorkings.Columns.Add("unitName", typeof(string));
            dtWorkings.Columns.Add("criterionPMD", typeof(string));
            dtWorkings.Columns.Add("passFail", typeof(int));

            dtWorkings.Rows.Add(2, "Computer systems", "P", 3);
            dtWorkings.Rows.Add(2, "Computer systems", "P", 2);
            dtWorkings.Rows.Add(3, "Web rubbish", "P", 3);

            // create the results datatable
            DataTable dtResults = new DataTable();
            dtResults.Columns.Add("units", typeof(int));
            dtResults.Columns.Add("name", typeof(string));
            dtResults.Columns.Add("P", typeof(bool));
            dtResults.Columns.Add("M", typeof(bool));
            dtResults.Columns.Add("D", typeof(bool));
            dtResults.Columns.Add("points", typeof(int));

            //fill the results table
            foreach (var units in dtWorkings.Rows.Cast().GroupBy(r => r["unitNo"]))
            {
                var p = units.Where(r => (string)r["criterionPMD"] == "P").All(r => (int)r["passFail"] == 3);
                var m = units.Where(r => (string)r["criterionPMD"] == "M").All(r => (int)r["passFail"] == 3);
                var d = units.Where(r => (string)r["criterionPMD"] == "D").All(r => (int)r["passFail"] == 3);
                dtResults.Rows.Add(
                     units.Key,//UnitNo
                     units.Select(r => r["unitName"]).First(),//UnitName                    
                     p,
                     m,
                     d,
                     p ? (m ? (d ? 90 : 80) : 70) : 0);//Points
            } 
```

使用复杂的条件表达式，您可以确保仅在满足所有 p、m 和 d 标准时才给出 90 分。

即使在只有通过和区分标准的单元中，这也会给出正确的结果，因此只有 90、70 或 0 分是可能的。不知道这对你有没有要求。

In your example with only "P" criteria it's difficult to decide if 70 or 90 points are the correct result. This code snippet checks if all P, M and D criteria are fulfilled and in this case gives 90 points even if there is no M or D criteria and all P criteria were passed. I think in all your real-world scenarios you won't have this edge case but anyway it's worth thinking about this.

# java - 用泛型声明的这个集合没有错误？

> ID：14182568
> 
> 赞同：5
> 
> 时间：2013-01-06T13:24:56.267
> 
> 标签：java, collections

我有下面的代码片段，这很好用。它不应该抛出编译时错误，因为我已经定义`c`了`ArrayList`它将包含`String`对象但我正在添加`Integer`对象。那么为什么它没有抛出编译时/运行时错误呢？

```
Collection c = new ArrayList<String>();
c.add(123); 
```

我知道下面会抛出编译时错误，但为什么不在上面。这两个代码片段之间的逻辑区别是什么？

```
 Collection<String>() c = new ArrayList();
 c.add(123); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T13:31:37.127

第一个代码片段不会导致编译时错误，因为在该行

```
c.add(123) 
```

编译器检查 c 的类型。由于您将c*声明为*[Collection](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html)，因此编译器将其视为此类。由于`Collection`提供了一个方法`add(Object)`，因此对于 c 的任何对象都是完全合理`add`的，尤其是整数。请注意，如果您尝试将集合值作为字符串读回，该程序*将*导致运行时错误。

在您的第二个代码片段中，您提供了更多信息供编译器使用。在这个片段中，它知道`Collection`它处理的是一个`Collection<String>`，它只能接受`Strings`。因此，没有方法`add(int)`或`add(Object)`只有`add(String)`。这会导致编译时错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T13:28:25.197

> 为什么它没有抛出编译时错误？

因为它在语法或语义上不是无效的，所以它是不明智的。

请注意，大多数现代 IDE（例如 Eclipse）都可以配置为警告您有关未参数化的`Collection c`.，并且可以选择编译失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:32:33.213

在第一个示例中，集合是“原始的”。这通常会导致警告而不是错误（取决于您的确切设置）。这是主要的，以便能够编译所有 Java 5 之前的遗留代码。

第二个示例，您将“原始”对象分配给参数化版本，这只能通过显式转换来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T13:35:31.283

1）逻辑上的区别是什么？

上图：可以在没有泛型类型的情况下声明 Collection。这称为[原始类型](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)。然后该集合可以保存任何类型的集合。由于使用原始类型集合，在运行时您*可能会*使用字符串集合作为整数集合，从而导致运行时异常，编译器通常会抛出警告。由于您没有在上面的示例中键入集合，因此编译器无法阻止这些运行时异常。如果您知道警告的用途并知道自己在做什么，则可以忽略该警告。

下图：但声明为 Collection<String> 的变量不能包含任何类型的集合。它*必须是*String 类型的集合。它是强类型。编译器将其视为错误是正确的。

2）为什么上面的代码段不会导致编译器错误？

Java 是[强类型](http://en.wikipedia.org/wiki/Strong_typing)的，可确保[类型安全](http://en.wikipedia.org/wiki/Type_safety)。上面的代码片段不是类型安全的，但 Java 允许。这可能是出于历史原因：泛型仅在 Java 1.5 中引入，所以如果上面的代码片段会导致编译错误，那么大多数 Java 1.4 代码在 Java 1.5 编译器中都会被破坏。

并非每种编程语言都以这种向后兼容的方式发展（例如 PHP）。显然，在引入 Java 1.5 时，向后兼容性比类型安全更重要。

# macros - Umbraco - 在宏中为特定节点的每个子节点显示特定图像

> ID：14182570
> 
> 赞同：0
> 
> 时间：2013-01-06T13:25:43.960
> 
> 标签：macros, umbraco

Umbraco 新手在这里。我研究了一吨，但似乎找不到我要找的东西。

我在主页上有一个带有滑块的站点，该滑块位于一个宏中，该宏使用一个 for-each（节点子级），最终目标是显示来自该文档类型的“heroImage”图像。我不能将图像作为新手发布到该网站，但这是我的内容结构：

```
HOME
PORTFOLIO
 - First Item
 - Another Item
ABOUT
CONTACT US 
```

**Home、Portfolio、ABOUT**和**CONTACT US**是*“Landing Pages”文档类型*，Portfolio 下的子项（**First Item**和**Another Item**）是*“Portfolio Entries”文档类型*。下面是调用幻灯片宏的*“登陆页面”上的代码。*

投资组合条目具有以下字段：

*   英雄形象
*   图片
*   身体

幻灯片宏显然是那里的亮点。很容易。这是我的宏代码，您将在其中看到我正在尝试为每个“for-each”显示相关节点的 heroImage。

```
<xsl:template match="/">

    <!-- slider -->
    <div id="slideshow">
        <div id="slider" class="nivoSlider">
            <xsl:for-each select="umbraco.library:GetXmlNodeById(1081)/*[@isDoc and position() &lt; 4]">
                <xsl:variable name="mediaId" select="umbraco.library:GetMedia(@id, 'false')/data [@alias = 'umbracoFile']" />
                <xsl:if test="$mediaId &gt; 0">
                    <xsl:variable name="mediaNode" select="umbraco.library:GetMedia($mediaId, 0)" />
                    <xsl:if test="count($mediaNode/data) &gt; 0 and string($mediaNode/data[@alias='umbracoFile']) != ''">
                        <img src="{$mediaNode/data[@alias='umbracoFile']}" alt="[image]" />
                    </xsl:if>
                </xsl:if>
            </xsl:for-each>
        </div>
    </div>
    <!-- data-transition="slideInLeft" -->
    <script type="text/javascript">
        $(window).load(function() {
        $('#slider').nivoSlider();
        });
    </script>

</xsl:template> 
```

我觉得我很接近，并且用完了搜索查询，因为我发现的大多数解决方案都依赖于从宏的另一侧传递到宏的 imageId，这不起作用。

希望我已经对此进行了足够的解释，并提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:05:07.063

首先，看起来您正在对父节点 ID 进行硬编码。在您刚刚提供的代码中，似乎**只**获取了 id 为 1081 的节点的子节点。通过阅读您刚刚发布的内容，您似乎希望在所有登录页面上显示他们各自的投资组合条目。

无论哪种方式，我都会远离硬编码 ID。如果节点 ID 发生任何变化（用户删除节点，它作为包导出到实时环境等），您的代码将停止工作。我只是使用 $currentPage 代替。

从您的过滤器来看，我想您只希望前 3 个项目显示在滑块中。代码似乎正确，**但**您似乎使用的是旧模式及其关联的 xpath。如果您使用的是较新版本的 Umbraco，您在 xslt 中引用节点数据的方式将会改变。我猜您已经找到了许多代码示例并尝试将它们合并在一起，却没有意识到它们不会调用相同的模式。

[这个 wiki 链接](http://our.umbraco.org/wiki/reference/xslt/45-xml-schema/xslt-examples-updated-to-new-schema)将提供更多信息，如果您使用错误的 xpath，希望能解决您的问题。

# jsf - JSF - 来自参数的空值 - FacesContext

> ID：14182571
> 
> 赞同：0
> 
> 时间：2013-01-06T13:25:58.210
> 
> 标签：jsf, null, facescontext

我正在尝试获取一些参数（现在是两个，但在另一个 xhtml 上可能我需要更多）。

在 index.html 页面上，我有一个指向 Threads.xhtml 页面的链接，带有参数 user_id 和 section_id：

```
<h:dataTable value="#{Sections.sections}" var="Section">
    <h:column>
        <h:form>
            <h:link value="#{Section.section_label}" outcome="Threads">
                <f:param name="user_id" value="#{LoginIn.user_id}"/>
                <f:param name="section_id" value="#{Section.section_id}"/>
            </h:link>
        </h:form>
    </h:column>
</h:dataTable> 
```

当我点击链接时，它会转到例如：

```
Project/faces/Threads.xhtml?user_id=5&section_id=2 
```

所以很好:)。

现在，在 Threads.xhtml 页面上，我有一个链接（一个链接，而不是 dataTable，如 index.xhtml - 创建新部分），到页面 NewThread.xhtml，带有参数 user_id 和 section_id：

```
<h:form>
    <h:link value="#{msg.create_new_thread}" outcome="NewThread">
        <f:param name="user_id" value="#{param.user_id}"/>
        <f:param name="section_id" value="#{param.section_id}"/>
    </h:link>
</h:form> 
```

当我点击链接时，它会转到，例如......：

```
Project/faces/NewThread.xhtml?user_id=5&section_id=2 
```

所以它也很好:)。

现在，我通过以下方式检查 user_id 和 section_id 的 NewThread.xhtml 页面值：

```
<h:outputText value="User_id: #{param.user_id}"/><br/>
<h:outputText value="Section_id: #{param.section_id}"/><br/> 
```

我在页面值上看到：

```
User_id: 5
Section_id: 2 
```

那么好吧 ：）。但是现在，当我试图在 Java 代码 NewThread.java 中获取这些值时，它们只返回 null：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
String user_id = (String) facesContext.getExternalContext().getRequestParameterMap().get("user_id");
String section_id= (String) facesContext.getExternalContext().getRequestParameterMap().get("section_id");
//For test:
System.out.println("User_id: " + user_id);
System.out.println("Section_id: " + section_id); 
```

在控制台中我有：

```
User_id: null
Section_id: null 
```

我也尝试过 toString() 方法，但没有帮助。

回到 index.xhtml，当我单击指向其中一个部分的链接时，例如。第二部分（任何用户，例如 user_id=5），它转到 Threads.xhtml：

```
Project/faces/Threads.xhtml?user_id=5&section_id=2 
```

在 Threads.xhtml 我有第二部分的线程列表（但这部分 xhtml 代码是无关紧要的）：

```
<h:dataTable value="#{Threads.threads}" var="Thread">
    <h:column>
        <h:link value="#{Thread.thread_label}" outcome="Threads">
            <f:param name="thread_id" value="#{Thread.thread_id}"/>
        </h:link>
    </h:column>
</h:dataTable> 
```

在 Threads.java 的 Java 代码上，我有：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
String section_id = (String) facesContext.getExternalContext().getRequestParameterMap().get("section_id");
System.out.println("Section_id: " + section_id); 
```

在控制台中我有：

```
Section_id: 2 
```

所以WTF？一旦它工作，但另一次它不会。

编辑：

对不起我忘记了。我通过 NewThread.xhtml 中的 commandButton 访问 NewThread.java：

```
<h:commandButton value="#{msg.add_thread}" action="#{NewThread.AddThread}"/> 
```

它调用NewThread.java中的AddThread方法；在 AddThread 方法的 try（try-catch）中，我试图获取参数。

我也已经添加到 faces-config.xml 中：

```
<managed-bean>
    <managed-bean-name>Threads</managed-bean-name>
    <managed-bean-class>forum.Threads</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean>
<managed-bean>
    <managed-bean-name>NewThread</managed-bean-name>
    <managed-bean-class>forum.NewThread</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:08:25.017

当您单击 时`h:commandButton`，将发出一个新请求。问题是参数没有传递给这个请求。

因此，如果您希望您的请求范围 bean *NewThread*从请求参数中获取数据，您还必须在从 h:commandButton 发出的请求中包含参数。试试这个：

```
<h:commandButton value="#{msg.add_thread}" action="#{NewThread.AddThread}">
    <f:param name="user_id" value="#{param.user_id}"/>
    <f:param name="section_id" value="#{param.section_id}"/>
</h:commandButton> 
```

当您使用 JSF 2 时，您可能会发现与 includeViewParameters=true 技巧一起用于在页面之间导航很有用`f:metadata`，`f:viewParam`请查看以下问题：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)
*   [发布后在 JSF 中处理视图参数](https://stackoverflow.com/questions/10352641/handling-view-parameters-in-jsf-after-post)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:49:54.357

正如 elias 所说，当您单击命令按钮时，会出现一个新请求（一个帖子），这不会包括上一个请求中的 get 参数。

另一种解决方案是将上述视图参数与[OmniFaces中的](http://omnifaces.org)[o:form](http://showcase.omnifaces.org/components/form)组件结合使用，该组件具有自动将所有视图参数保留为 GET 参数的属性：

```
<o:form includeViewParams="true"> 
```

这具有额外的优势，即用户可以在 URL 中看到这些参数，因此如果他们复制它或通过在浏览器的地址栏中按 Enter 键来刷新页面，事情会继续按预期工作。

# c++ - 使用 cin>>"(创建的变量)"; 作为暂停选项

> ID：14182572
> 
> 赞同：0
> 
> 时间：2013-01-06T13:26:01.833
> 
> 标签：c++, turbo-c++

我尝试使用各种技术解决系统暂停问题。我终于可以选择`cin>> "(variable created)";`让程序等待我的命令关闭。它工作正常。现在，问题是可以遵循该技术还是会留下漏洞，例如`system("pause");`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:43:28.480

断点是暂停程序的最佳方式。这些实际上是用于暂停程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:37:08.163

`cin>> "(variable created)"`是一种非常糟糕的暂停程序的方法 - 如果用户输入任何内容，您会通过尝试覆盖只读字符串来调用未定义的行为（这实际上会使您的程序在某些系统上出现段错误）。

你可以使用

```
char dummy[2];
cin.getline(dummy, 2); 
```

如果您之后不关心输入流的状态（一些输入将保留在那里，可能会设置故障位）。

一般来说，我建议不要在任何形式的程序结束时使用暂停。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:41:27.197

使用 cin.getline(...) 后使用 cin.flush()。此命令从缓冲区中删除换行符。

# entity-framework - 从数据库更新模型不更新代码

> ID：14182574
> 
> 赞同：0
> 
> 时间：2013-01-06T13:26:08.370
> 
> 标签：entity-framework

我的网站中有一个模型，它是从数据库生成的。当我在数据库中进行更改（使用 mySQL）时右键单击 edmx 图以更新模型时，模型不会使用任何新表和属性更新 vb 代码文件。我正在使用标准的 .tt 模板。每次以这种方式更新模型时，代码不应该重新生成吗？

# php - 保存（）函数 Zend 框架

> ID：14182576
> 
> 赞同：0
> 
> 时间：2013-01-06T13:26:23.507
> 
> 标签：php, zend-framework, model, controller, save

我在 Zend 的文档中找到了这个函数，更具体的在创建模型和数据库表部分 ( [http://framework.zend.com/manual/1.12/en/learning.quickstart.create-model.html](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-model.html) )。

这是在 Application_Model_GuestbookMapper 中：

```
public function save(Application_Model_Guestbook $guestbook)
{
    $data = array(
        'email'   => $guestbook->getEmail(),
        'comment' => $guestbook->getComment(),
        'created' => date('Y-m-d H:i:s'),
    );

    if (null === ($id = $guestbook->getId())) {
        unset($data['id']);
        $this->getDbTable()->insert($data);
    } else {
        $this->getDbTable()->update($data, array('id = ?' => $id));
    }
} 
```

现在我想把它集成到我的控制器中，但我不知道怎么做？

我创建了映射器的一个实例，并尝试将信息从我解码的 json 字符串传递给它，但我仍然收到错误...：

```
public function indexAction()
{
   $mapper = new Application_Model_GuestbookMapper();
   $db = Zend_Db_Table_Abstract::getDefaultAdapter();

   $json = file_get_contents('http://data.appsforghent.be/poi/apotheken.json');
   $data = Zend_Json::decode($json);

   foreach($data['apotheken'] as $row)
   {
       $mapper->save();
   }
} 
```

我知道我必须将 $data 传递给 save() 函数，但我不知道如何......该模型不适合 json-url，我只是想展示如何检索和解码 json。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:02:07.550

你需要传递给 $mapper->save(); 是 Application_Model_Guestbook 的一个实例。因此，希望您有一个 Application_Model_Guestbook 类，您可以在其中定义将数据数组设置为其属性的可能性，例如：

```
class Application_Model_Guestbook {
  private $email,$comment,$created;
  public function __construct($data) {
   $this->email = $data['email'];
   // etc add other variables
  }
  public function getEmail() {
   return $this->email;
  }
} 
```

然后调用它，使用：

```
 foreach($data['apotheken'] as $row)
   {
       $guestbook = new Application_Model_Guestbook($row);
       $mapper->save($guestbook);
   } 
```

我没有专门对此进行测试，但它应该让您了解如何实现您想要做的事情。

# asp.net - 如何使用gridview中的按钮分配UpdatePanel Trigger的控件ID

> ID：14182577
> 
> 赞同：1
> 
> 时间：2013-01-06T13:26:39.290
> 
> 标签：asp.net, gridview, triggers, updatepanel

目前我有一个用于 jQuery 对话框的 UpdatePanel，其中包含一个 GridView。

并且 GridView 在页脚和 EmptyDataTemplate 中包含一个 FileUpload 控件

为了让 FileUpload 控件在 javascript 中工作，我知道我们需要触发器。

但是，我想分配为触发器的按钮位于 GridView 的模板中......

当点击按钮 btnAdd 时，FileUpload 控件中的文件将被保存。

* * *

这是代码：

```
<asp:UpdatePanel ID="upnlEditExpense" runat="server">
      <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnAdd"/>
      </Triggers>
            ......................
                 ........................
                       .........................
      <asp:GridView runat="server" ID="grdExpense" ShowHeader="True" ShowFooter="True"
           AutoGenerateColumns="False">
           <Columns>
                 ...................
                 <asp:TemplateField>
                       <FooterTemplate>
                              <asp:LinkButton runat="server" ID="btnAdd" Text="Add" OnClick="btnAdd_Click"></asp:LinkButton>
                       </FooterTemplate>
                 </asp:TemplateField>
           </Columns>
      </asp:GridView>
</asp:UpdatePanel> 
```

如果我像这样将按钮 id 直接放在触发器的控件 ID 中，则会出现错误，说找不到 btnAdd ...

我应该怎么做才能让 FileUpload 控制工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-12T22:18:58.727

这有效

```
protected void grdExpense_RowCreated(object sender, GridViewRowEventArgs e)
    {
        LinkButton btnAdd = (LinkButton)e.Row.Cells[0].FindControl("btnAdd");
        if (btnAdd != null)
        {
            ScriptManager.GetCurrent(this).RegisterPostBackControl(btnAdd);
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:57:01.833

尝试从后面的代码注册回发控件，如下所示：

```
protected void grdExpense_RowCreated(object sender, GridViewRowEventArgs e)
    {
        LinkButton btnAdd = (LinkButton)e.Row.Cells[0].FindControl("btnAdd");
        if (btnAdd != null)
        {
            ScriptManager1.RegisterAsyncPostBackControl(btnAdd);
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T15:27:45.507

而不是向 upnlEditExpense 添加触发器，也许您可​​以尝试在模板内的链接按钮周围添加一个更新面板，而无需触发器......

```
<asp:TemplateField>
     <FooterTemplate>
          <asp:UpdatePanel ID="upnlBtnAdd" runat="server">
              <ContentTemplate>
                    <asp:LinkButton runat="server" ID="btnAdd" Text="Add" OnClick="btnAdd_Click"></asp:LinkButton>
              </ContentTemplate>
          </asp:UpdatePanel>
     </FooterTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T01:05:16.010

我遇到了类似的问题，这篇文章对我有帮助，但我发现只有在 updatepanels UpdateMode 设置为“Always”时，在脚本管理器中注册控件才有效。如果将其设置为“有条件”，则此方法不起作用。

我发现了另一种始终有效的方法，即在 gridview 的 DataBound() 事件中向更新面板添加触发器：

```
 Dim CheckBoxTrigger As UpdatePanelControlTrigger = New AsyncPostBackTrigger()
    Dim SelectCheckBox As CheckBox
    For i = 0 To GridViewEquipment.Rows.Count - 1 Step 1
        SelectCheckBox = GridViewEquipment.Rows(i).Cells(12).FindControl("CheckBoxSign")
        CheckBoxTrigger.ControlID = SelectCheckBox.UniqueID
        UpdatePanelEquipment.Triggers.Add(CheckBoxTrigger)
    Next 
```

# java - 我如何理解 Thread.interrupt()？

> ID：14182585
> 
> 赞同：3
> 
> 时间：2013-01-06T13:27:11.863
> 
> 标签：java, multithreading, jvm

java中有两个代码块。

区块一：

```
@Test
public void test1() {

    System.out.println("interrupt:" + Thread.currentThread().isInterrupted());
    Thread.currentThread().interrupt();
    System.out.println("interrupt:" + Thread.currentThread().isInterrupted());

} 
```

输出：

```
interrupt:false
interrupt:true 
```

第二块：

```
@Test
public void test2() throws InterruptedException {
    Thread thread = new Thread(new Runnable() {
        @Override
        public void run() {
            System.out.println("running...");
        }
    });

    thread.interrupt();

    TimeUnit.SECONDS.sleep(2);

    System.out.println("interrupt:" + thread.isInterrupted());

    thread.start();

    TimeUnit.SECONDS.sleep(2);

    System.out.println("interrupt:" + thread.isInterrupted());

} 
```

输出：

```
interrupt:false
running...
interrupt:false 
```

所以，我的问题：

1.  `interrupt:true`为什么在调用后阻止一个打印`interrupt()`但不阻止两个？
2.  JVM调用interrupt()后会做什么？

谢谢！

PS：第三块：

```
@Test
public void test3() {
    Thread thread = new Thread(new Runnable() {
        @Override
        public void run() {
            System.out.println("running...");
        }
    });

    thread.interrupt();

    System.out.println("interrupt:" + thread.isInterrupted());

    // thread.start();
    //
    // thread.interrupt();
    //
    //
    // System.out.println("interrupt:" + thread.isInterrupted());

} 
```

还输出：`interrupt:false`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:38:48.160

*   在块 1 中，您中断自己，这用中断标志“标记”线程。
*   在块 2 中，您中断其他线程（即不活动 - 未启动 -）

尝试在 run() 方法中添加 Thread.sleep(5000); 并在中断之前开始；-)

[中断的工作原理](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T13:31:07.910

这很容易。由于`sleep`文档：

`InterruptedException - if another thread has interrupted the current thread. The interrupted status of the current thread is cleared when this exception is thrown.`

当您调用`interrupt`并且线程正在休眠时，会引发异常并且它只是清除了`interrupted`标志。

区块三：

由于文档：`Interrupting a thread that is not alive need not have any effect.`所以总结一下：如果您的线程尚未启动，则`interrupt`方法可能无法正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T13:55:48.497

在[java.lang.Thread](http://www.docjar.com/html/api/java/lang/Thread.java.html)的源代码中，对于该`interrupt`方法，文档清楚地说明了：

> 中断一个不活动的线程不需要有任何效果。

```
 888       /**
  889        * Interrupts this thread.
  890        *
  891        * <p> Unless the current thread is interrupting itself, which is
  892        * always permitted, the {@link #checkAccess() checkAccess} method
  893        * of this thread is invoked, which may cause a {@link
  894        * SecurityException} to be thrown.
  895        *
  896        * <p> If this thread is blocked in an invocation of the {@link
  897        * Object#wait() wait()}, {@link Object#wait(long) wait(long)}, or {@link
  898        * Object#wait(long, int) wait(long, int)} methods of the {@link Object}
  899        * class, or of the {@link #join()}, {@link #join(long)}, {@link
  900        * #join(long, int)}, {@link #sleep(long)}, or {@link #sleep(long, int)},
  901        * methods of this class, then its interrupt status will be cleared and it
  902        * will receive an {@link InterruptedException}.
  903        *
  904        * <p> If this thread is blocked in an I/O operation upon an {@link
  905        * java.nio.channels.InterruptibleChannel </code>interruptible
  906        * channel<code>} then the channel will be closed, the thread's interrupt
  907        * status will be set, and the thread will receive a {@link
  908        * java.nio.channels.ClosedByInterruptException}.
  909        *
  910        * <p> If this thread is blocked in a {@link java.nio.channels.Selector}
  911        * then the thread's interrupt status will be set and it will return
  912        * immediately from the selection operation, possibly with a non-zero
  913        * value, just as if the selector's {@link
  914        * java.nio.channels.Selector#wakeup wakeup} method were invoked.
  915        *
  916        * <p> If none of the previous conditions hold then this thread's interrupt
  917        * status will be set. </p>
  918        *
  919        * <p> Interrupting a thread that is not alive need not have any effect.
  920        *
  921        * @throws  SecurityException
  922        *          if the current thread cannot modify this thread
  923        *
  924        * @revised 6.0
  925        * @spec JSR-51
  926        */
  927       public void interrupt() {
  928           if (this != Thread.currentThread())
  929               checkAccess();
  930   
  931           synchronized (blockerLock) {
  932               Interruptible b = blocker;
  933               if (b != null) {
  934                   interrupt0();           // Just to set the interrupt flag
  935                   b.interrupt(this);
  936                   return;
  937               }
  938           }
  939           interrupt0();
  940       } 
```

# jquery - Chrome _blank 表单和 JQuery 双重提交

> ID：14182587
> 
> 赞同：0
> 
> 时间：2013-01-06T13:27:17.043
> 
> 标签：jquery, cross-browser

我有一个表格：

```
<form accept-charset="UTF-8" action="/back/pages/22?locale=fr" class="form-horizontal page-form" enctype="multipart/form-data" id="edit_page_22" method="post" target="_blank"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓">
  <p><a href="#" id="no_window">Submit</a></p>
  <p><a href="#" id="new_window">Submit & _blank</a></p>
</form> 
```

并附上一个脚本：

```
 $(document).ready(function() {
    var page_form;
    page_form = {
      elem: $('form.page-form'),

      rand_action: function() {
        var action;
          action = this.elem.attr('action');
          return this.elem.attr('action', action + '&count=' + Math.random() * 1000);
      },
      submit_blank: function() {
        this.elem.attr('target', '_blank');
        $('<input>').attr({
          type: 'hidden',
          id: 'input_new_window',
          name: 'edit_redirect',
          value: 'true'
        }).appendTo(this.elem);
        return this.elem.submit();
      },
      submit: function() {
        this.elem.attr('target', '_self');
        $('#input_new_window').remove();
        return this.elem.submit();
      }
    };

    $("#new_window").click(function(event) {
      event.preventDefault();
      page_form.submit_blank();
      page_form.rand_action();
      return page_form.submit();
    });
    $("#no_window").click(function(event) {
      event.preventDefault();
      return page_form.submit();
    });
  }); 
```

它在 FF 上运行良好但在 Chrome 上运行良好，知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:36:03.017

这是基于默认浏览器行为，您不能使用 chrome 执行此操作，除非指定您要打开一个新选项卡。这可以使用 window.open() 方法来完成：

[看演示](http://jsfiddle.net/Jva2F/1/)

```
$(document).ready(function() {
    var form;
    form = $('form.page-form');
    $("#submit_blank").click(function(event) {
      event.preventDefault();
      $('<input>').attr({
        type: 'hidden',
        id: 'input_new_window',
        name: 'edit_redirect',
        value: 'true'
      }).appendTo(form);
      form.submit();
      return window.open(window.location.href.replace(/form/, ''));
    });

    $("#no_window").click(function(event) {
      event.preventDefault();
      form.attr('target', '_self');
      return form.submit();
    });
  }); 
```

**注意：** 您应该添加一个测试以获取当前正在运行的浏览器以避免任何意外行为，因为每个浏览器在此浏览器上的工作方式完全不同。

# java - getSentenceInstance 和空格

> ID：14182588
> 
> 赞同：0
> 
> 时间：2013-01-06T13:27:44.777
> 
> 标签：java, iterator

我正在获取文本并将其打断 - 创建一个数组，其中每个项目都包含一个完整的句子。我决定最好的方法是使用 BreakIterator 类。这是我正在使用的代码：

```
theSentences = new ArrayList<String>();
String myText = aString; //the text is produced through a text box
BreakIterator boundary = BreakIterator.getSentenceInstance();
boundary.setText(myText);
int start = boundary.first();
for (int end = boundary.next();
         end != BreakIterator.DONE;
         start = end, end = boundary.next())
{
    String temp = myText.substring(start,end);
    theSentences.add(temp.trim());
} 
```

当用户记得在句子末尾包含一个空格（大多数人都会这样做）时，这绝对可以正常工作。然而，人们在打字时确实会出错，如果他们没有在句号后加一个空格，代码似乎并没有意识到已经到了句子的结尾。我能做些什么呢？

我确实意识到我可以改用正则表达式，但似乎最好使用 BreakIterator，因为这就是它的用途。还要编写一个正则表达式来区分句号和句号的所有其他可能用途，这让我很头疼:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T19:43:12.243

很少。句子拆分不是 100% 可以完成的任务。我自己使用[斯坦福 CoreNLP](http://nlp.stanford.edu/software/corenlp.shtml)和 ssplit 注释器，它是管道的一部分来进行我的句子分割。对于简单的任务，这是一个你可能不想下载的巨大 jar，但它显示了这是一个多么复杂的任务。

对于句子拆分的轻量级实现，最好实现基于规则的正则表达式方法。

# symfony - Symfony2 - 从外部建立一个表单参数，因此用户不能修改

> ID：14182591
> 
> 赞同：0
> 
> 时间：2013-01-06T13:28:22.737
> 
> 标签：symfony, symfony-2.1, symfony-forms

我在 Symfony2 中的一个实体有一个 CRUD。为了创建一个新条目，我有两个控制器功能：

```
public function newAction($id) {

    $entity = new Clientes();

    // Get the reference to the Login entity using its ID
    $em = $this->getDoctrine()->getManager();
    $ref_login = $em->getReference('LoginBundle:Login', $id);       

    // Put the retrieved reference to the entity
    $entity->setLogin($ref_login);

    $form = $this->createForm(new ClientesType(), $entity);

    return $this
            ->render('MovinivelBundle:Persona/Clientes:new.html.twig',
                    array('entity' => $entity,
                            'form' => $form->createView(),));
}

public function createAction(Request $request) {

    $entity = new Clientes();

    $form = $this->createForm(new ClientesType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();               

        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('clientes'));
    }

    return $this
            ->render('MovinivelBundle:Persona/Clientes:new.html.twig',
                    array('entity' => $entity,
                            'form' => $form->createView(),));
} 
```

在前面的代码中，我在 newAction() 函数中添加了 $id 输入参数，因为我希望它是从外部建立的，因为每个 Clientes 都是 Login 的附加信息，并且必须链接。

在 ClientesType 表单中，我有以下内容：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('login')
        ->add('direccion')
        ->add('localidad')
        ->add('provincia')
        ->add('telefono')
    ;
} 
```

到目前为止它有效。在我的表单中，根据 $id 值选择登录参数。但问题是我希望在创建表单后修复登录参数，因此用户不能从表单中修改它，而只能使用适当的值调用 newAction($id) 函数。

问题是，如果我删除 FormType 中的 ->add('login') 行，它就不再起作用了。我想到了两个选择：

*   以某种方式隐藏表单中的“登录”，但保持它工作，虽然我不知道如何，或者
*   将 $id 参数和 $request 参数一起作为输入参数传递给 createAction，但我也不知道该怎么做。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:36:07.673

好的，我提出了解决方案。我一直在寻找的实际上是以下内容：

```
<div style="display:none">
{{ form_rest(form) }}
</div> 
```

在明确显示任何其他表单字段后在模板末尾键入此内容可避免任何用户修改我不想修改的字段，同时它仍使用 $POST 方法发送信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:36:08.790

我认为您正在寻找一种[`hidden`](http://symfony.com/doc/current/reference/forms/types/hidden.html)字段类型：

```
public function buildForm(...)
{
    $builder
        ->add('login', 'hidden')
        // ...
    ;
} 
```

# php - 从 PHP 中的变量到日期的 Unix 时间戳不起作用

> ID：14182599
> 
> 赞同：0
> 
> 时间：2013-01-06T13:30:03.320
> 
> 标签：php, arrays, variables, date, timestamp

我有一组 Unix 时间戳。我使用以下代码创建了时间戳数组的文件路径（`$i`稍后在循环中使用，但起初它的值为 0，因此它是正确的）：

```
$date = date('d-m-y', $timestamp[$i]);
$path = $dir . '/' . $date '.csv'; 
```

假设数组中有很多时间戳。如果我设置`$i = 0;` `$date`的是一个字符串 06-01-13 （它返回当前日期，尽管时间戳是很多周前的），它会忽略时间戳。但是如果我`$timestamp[$i]`用 1257426933 替换输出字符串是正确的（05-11-09）。

怎么了？我的 PHP 版本是 PHP 5.3.10-1ubuntu3.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:35:42.907

最有可能的是 $timestamp[$i] 值不是您所期望的？

```
var_dump($timestamp); 
```

`date()`如果第二个参数为空或不存在，将给出当前日期。

# javascript - 如何在 for 循环上创建独特的画布元素

> ID：14182604
> 
> 赞同：0
> 
> 时间：2013-01-06T13:30:47.677
> 
> 标签：javascript, jquery, html, canvas

**编辑：**问题出在我的代码中，我没有用正确的索引查询数组。对于任何寻找此问题答案的人，Karthik Ar 回答正确。感谢所有的评论！

我正在努力在 for 循环中创建一组独特的画布元素。似乎所有元素都是创建的第一个元素的副本。我这么说是因为我需要将此画布存储在一个数组中，然后随时访问它们的上下文。

```
 var _ctxs = new Array();
    function createCells()
            {
                _w = window.innerWidth;
                _h = window.innerHeight;
                var side = 300;
                //set amount of steps
                var stepsW = Math.ceil(_w/side) + 1;
                var stepsH = Math.ceil(_h/(side/2)) + 1;

                console.log("create cells");
                for (var i = 0; i < stepsH; i++) 
                {
                    var p = (i%2 == 0)?0:side/2;
                    for (var j = 0; j < stepsW; j++) 
                    {
                        var _tempCanvas = $('<canvas/>', {id: "i_" + i + "_" + j, width : side, height : side});
                        _tempCanvas.css({
                            'position' : 'absolute',
                            'top' : (i*(side/2)+1) - side/2,
                            'left' : (j*side + p) + 1 - side/2
                        });

                        //var _tempCtx = _tempCanvas[0].getContext('2d');
                        _ctxs.push(_tempCanvas[0]);

                        $('body').prepend(_tempCanvas);
                        k++;
                    };
                };
            } 
```

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:50:30.450

看起来你的代码工作检查数组。

```
$(document).ready(jqueryready);
function jqueryready(){
for (var i = 0; i < 5; i++) 
            {
for (var j = 0; j < 5; j++) 
                {
                    var _tempCanvas = $('<canvas/>', {id: i+""+j, width : 10, height : 10});
                    console.log(_tempCanvas[0].id);
                    $('body').prepend(_tempCanvas);
                };
                }
} 
```

这为画布创建了唯一的 ID。

# mysql - MySQL - 仅当左表中存在一行时才加入

> ID：14182609
> 
> 赞同：6
> 
> 时间：2013-01-06T13:31:28.190
> 
> 标签：mysql, select, join, group-by

这是MySQL：

```
SELECT  a.id,
        a.name,
        a.n,
        a.r,
        a.pot,
        a.ticket_price,
        a.starting_tickets,
        a.started,
        a.end,
        COUNT(b.id) tickets_bought 
FROM current_lotteries a
   JOIN lottery_tickets b ON b.lid=a.id
WHERE a.cid=1 
ORDER BY started DESC LIMIT 1 
```

在搜索中，如果没有行 from`a`但有行 in `b`（即`COUNT(b.id)`is not `NULL`），则此查询返回一行，其中`NULL`包含`a`字段值以及`COUNT(b.id)`as的值`tickets_bought`。`num_rows = 0`如果表中没有结果，如何修改此查询使其不返回行 ( ) `a`？

一个快照。

![询问](../Images/8a95c94afd25fb15c0ae6c2dc786c776.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T13:44:13.503

如果没有子句，MySQL（它允许在其他 RDBMS 中出现错误的情况下这样做）在应该对它们进行分组时`GROUP BY`将聚合组应用于所有行。`b`添加`GROUP BY a.id`

```
SELECT  a.id,
        a.name,
        a.n,
        a.r,
        a.pot,
        a.ticket_price,
        a.starting_tickets,
        a.started,
        a.end,
        COUNT(b.id) tickets_bought 
FROM current_lotteries a
   JOIN lottery_tickets b ON b.lid=a.id
WHERE a.cid=1 
GROUP BY a.id
ORDER BY started DESC LIMIT 1 
```

以上将适用于 MySQL，但不适用于其他地方。更便携的版本使用相关子查询：

```
SELECT  a.id,
        a.name,
        a.n,
        a.r,
        a.pot,
        a.ticket_price,
        a.starting_tickets,
        a.started,
        a.end,
        b.tickets_bought
FROM current_lotteries a
        /* More portable to join against a subquery which returns the count per group */
        JOIN (
            SELECT b.lid, COUNT(*) AS tickets_bought 
            FROM lottery_tickets 
            GROUP BY lid
        ) b ON a.id = b.lid
WHERE a.cid = 1
ORDER BY started DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:55:34.890

试试这个：

```
SELECT a.id, a.name, a.n, a.r, a.pot, a.ticket_price, 
       a.starting_tickets, a.started, a.end, b.tickets_bought 
FROM current_lotteries a 
RIGHT JOIN (SELECT b.lid, COUNT(*) AS tickets_bought 
            FROM lottery_tickets GROUP BY lid ) b ON a.id = b.lid 
WHERE a.cid = 1 
ORDER BY started DESC 
LIMIT 1; 
```

# android - 将“添加项目”添加到 android 中的微调器。可能的？

> ID：14182613
> 
> 赞同：1
> 
> 时间：2013-01-06T13:31:45.240
> 
> 标签：android, spinner, android-cursoradapter

我正在`CursorAdapter`为我的微调器使用自定义。现在我想添加一个名为“*添加新项目*”的项目，以将新项目添加到我的微调器。这样的功能是否可行，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T18:01:15.973

我用来向微调器添加自定义元素的解决方案是：

```
 cursor=<MyOriginalCursor>

        MatrixCursor prompt = new MatrixCursor(PROJECTION, 1);
        prompt.addRow(new Object[]{_ID_ALL, "All"});

        MergeCursor mergeCursor = new MergeCursor(new Cursor[]{prompt, cursor});
        cursorAdapter.swapCursor(mergeCursor); 
```

MergeCursor 将两个 Cursor 连接在一起，处理下一个元素、元素数量等的所有细节。MatrixCursor 可用于创建由数组支持的游标。在 onItemSelected 方法中，我现在可以检查此处提供的特殊 ID 并为“All”或“Nothing”执行特殊逻辑，无论情况如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:34:16.910

请阅读Mk Yong 创建的[本教程或阅读](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)[这篇文章](http://www.coderanch.com/t/552765/Android/Mobile/add-items-dynamically-spinner-alertdialog)、[这段代码片段](http://androidcodeplace.blogspot.nl/2011/07/android-spinner-add-item-dynamically.html)或[本教程](http://sanathnandasiri.blogspot.nl/2011/11/today-im-going-to-show-how-to-work-with.html)。

# c# - 处理 Xpath 中的错误路径

> ID：14182620
> 
> 赞同：0
> 
> 时间：2013-01-06T13:32:32.883
> 
> 标签：c#, xml, xpath, exception-handling, try-catch

如何检查提供给 Xpath 解析器的字符串对于给定的 XML 是否正确？

因为如果不是我打电话的时候

```
string temp = Convert.ToString(xmlNode.InnerText); 
```

它会抛出一个错误......

到目前为止，我这样做了。但这似乎不是一个好方法...

```
public String GetString(String Xpath)
{
    string temp = String.Empty;
    try
    {
        XmlNode xmlNode = tempfile.SelectSingleNode(Xpath); //tempfile is an XML file in that class
        temp = Convert.ToString(xmlNode.InnerText);
    }
    catch
    {
    }
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:41:58.150

```
SelectSingleNode(string Xpath) 
```

如果无法在 xml 树中找到匹配的节点，则返回 null。也没有理由使用 Convert.ToString(xmlNode.InnerText)，因为 xmlNode.InnerText 已经是一个字符串。

```
if(xmlNode == null)
{
//something wrong with xpath
}
else
{
// do something with xmlNode.InnerText
....
} 
```

# mysql - mysql时间戳比较日期字符串

> ID：14182621
> 
> 赞同：1
> 
> 时间：2013-01-06T13:32:36.720
> 
> 标签：mysql, datetime, select, timestamp

我们有一个存储过程，IN 参数是今天的 DATE。在此过程中，aql 将此今天的值与具有时间戳列的表进行比较。例如：

```
column A
2012-12-01 00:00:00 
```

SQL：

```
select * from t where A = today. 
```

我们在 phpmyadmin 中运行这个程序，它运行正常。但它不适用于命令行。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:05:12.133

猜猜您可能需要将两个日期格式化为通用格式。为了安全起见，您甚至可以添加`Date()`或`str_to_Date`如果需要...如果您不确定列是否`A`包含正确的日期...

请试试这个：

```
SELECT * FROM tablename
WHERE DATE_FORMAT(A, '%d/%m/%Y') = DATE_FORMAT(TODAY, '%d/%m/%Y'); 
```

如果你的意思是`CURDATE()`到`today`那时也试试这个，

```
SELECT * FROM tablename
WHERE DATE_FORMAT(A, '%d/%m/%Y') = DATE_FORMAT(CURDATE(), '%d/%m/%Y'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T05:08:50.707

日期可能采用不同的格式，导致它们不相等。您可以使用它`datediff(date1, date2) = 0`来解决此问题。

[http://www.w3schools.com/sql/func_datediff_mysql.asp](http://www.w3schools.com/sql/func_datediff_mysql.asp)

# android - 禁用其他活动的活动？

> ID：14182622
> 
> 赞同：1
> 
> 时间：2013-01-06T13:32:46.537
> 
> 标签：android

我正在使用以下代码从启动器中删除我的应用程序：

```
if (!dialercode.getText().toString().equals("")) {
                    getPackageManager().setComponentEnabledSetting(
                            getComponentName(),
                            PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                            PackageManager.DONT_KILL_APP);
                } 
```

但是，这也会阻止该活动通过其他方式（密码）启动。

因此，我设置了一个单独的 Launcher 活动，它将被禁用（所有 Launcher 活动所做的只是启动主要活动）。

但是，我不知道如何通过主要活动禁用 Launcher.java 活动 - IE 当我处于不同的活动中时，如何获取 Launcher 活动的组件名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:43:02.663

我发现了解决方案，而不是`getComponentName()`使用：

`new ComponentName(context, Activity.class)`其中 Activity 是您要禁用的 Activity 的名称。您可以在应用程序的任何活动中使用它。

# groovy - AntBuilder 解压编码

> ID：14182627
> 
> 赞同：2
> 
> 时间：2013-01-06T13:33:23.837
> 
> 标签：groovy

我在这样的 Groovy 脚本中解压缩 Windows 下的文件：

```
def ant = new AntBuilder()
ant.unzip(  src: path.absolutePath,
            dest: directoryName,
            overwrite: "false") 
```

zip 文件包含名称中带有德语变音符号的文件（如“Glück”），这些文件名在解压缩后会损坏。很明显，我在这里遇到了编码问题。所以我尝试设置编码：

```
def ant = new AntBuilder()
ant.unzip(  src: path.absolutePath,
            dest: directoryName,
            overwrite: "false",
            encoding: "XXX") 
```

但是无论我尝试什么编码（来自这个[站点](http://ant.apache.org/manual/Tasks/unzip.html)），我都无法解决我的问题：

*   `"windows-1252"`或`"cp1252"`导致 java.nio.charset.UnmappableCharacterException
*   `"ISO-8859-1"`刚刚删除了特殊字符
*   `"Utf-8"`,`"native-encoding"`或者没有编码导致错误字符

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:45:44.157

我用过`"Cp850"`，一切正常。但是，我必须通过试错法找到正确的代码页。我原以为 UTF-8 会起作用，或者“native-encoding”会像每个 zip 工具一样找到正确的编码。

# vb.net - VB.NET 2008、XP、日期时间类型

> ID：14182629
> 
> 赞同：1
> 
> 时间：2013-01-06T13:33:47.733
> 
> 标签：vb.net

我使用 VB.NET 2008 在 Windows7 上制作了一个程序，该程序使用日期和日期时间选择器，效果很好。

像这样：

```
 With dtp_date1

        'here crashes
        .Text = DateTime.Now.Date.ToString("dd.MM.yyyy.") & " 00:00:00"

        .Format = DateTimePickerFormat.Custom
        .CustomFormat = "dd.MM.yyyy. HH:mm:ss tt"
        .ShowUpDown = False
    End With

    With dtp_date2
        .Text = DateTime.Now.Date.ToString("dd.MM.yyyy.") & " 23:59:59.9999"
        .Format = DateTimePickerFormat.Custom
        .CustomFormat = "dd.MM.yyyy. HH:mm:ss tt"
        .ShowUpDown = False
    End With 
```

这工作正常，直到我把这个程序放到 Windows XP 上。出现错误：

> ```
> string was not recognized as a valid Datetime 
> ```

我尝试解决这个问题：

```
.Text = CDate(DateTimeNow.Date.ToString("dd.MM.yyyy.") & " 00:00:00").ToString 
```

这里得到错误：

> 从字符串“06.01.2013.00.00.00”到类型“日期”的转换无效。

由于我在程序中有很多地方都有日期，如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:34:50.670

**永远不要**分配 DateTimePicker.Text 属性。如果您的字符串格式与文化不匹配或控制面板覆盖了日期/时间格式，您将受到抨击。

始终使用 DateTimePicker.Value 属性。DateTime 类型的属性，不受格式问题的影响。使固定：

```
 Dim now = DateTime.Now.Date
    dtp_date1.Value = now
    dtp_date2.Value = now.AddDays(1) - new TimeSpan(1) 
```

# winforms - WinForms 上的 FPS

> ID：14182632
> 
> 赞同：0
> 
> 时间：2013-01-06T13:34:30.350
> 
> 标签：winforms, frame-rate

我编写 WinForms 应用程序，我想在每个应用程序上绘制 FPS。有没有办法从窗口获取它或获取用于在 1 秒内绘制窗口的帧数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:40:21.393

你的问题没有多大意义。Winforms 使用 GDI+ 作为图形引擎，它不会维持恒定的重绘循环。Windows 仅在因任何原因失效时才根据需要重新绘制。

您可以使用 a`System.Diagnostics.StopWatch`来衡量一次绘画迭代需要多长时间。

该值的倒数是您可以达到的理论帧速率。

# c# - XML 选择节点值

> ID：14182635
> 
> 赞同：0
> 
> 时间：2013-01-06T13:35:00.253
> 
> 标签：c#, xml, xml-parsing

我有以下 XML：

```
<NET_SETTINGS>
   <MAC_ADDRESS VALUE="bb:cc:dd:ee:ff:aa"/>
   <IP_ADDRESS VALUE="10.1.1.1"/>
</NET_SETTINGS> 
```

并尝试`VALUE`像这样获取任一 mac/ip 元素的字符串：

```
XmlNode macnode = xmlDoc.SelectSingleNode("/NET_SETTINGS/IP_ADDRESS");
string mac = macnode.Value; 
```

我可以看到它在单步执行代码时选择了正确的节点，但`macnode.Value`始终为空，并且`OuterXml`是这样的：

```
"<MAC_ADDRESS VALUE=\"bb:cc:dd:ee:ff:aa\" />" 
```

为什么没有`Value`正确填充？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T13:38:46.973

`.Value`[`null`用于`Element`节点](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.value.aspx)。_

你要`macnode.Attributes.GetNamedItem("VALUE").Value`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T13:40:19.027

`VALUE`是一个属性。

```
string value = macnode.Attributes["VALUE"].Value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T13:46:56.980

默认情况下，**Value**属性将返回在这种情况下不存在的 XML 元素的内部。. .

```
<MAC_ADDRESS VALUE="bb:cc:dd:ee:ff:aa"/>

is equivalent to . . .

<MAC_ADDRESS VALUE="bb:cc:dd:ee:ff:aa"></MAC_ADDRESS> 
```

OuterXML 将返回整个元素标记。所以这就是为什么你要恢复整个元素。

由于您将其存储为属性，因此您必须将其称为属性

```
XmlNode macnode = xmlDoc.SelectSingleNode("/NET_SETTINGS/IP_ADDRESS");
string mac = macnode.Attributes.GetNamedItem("VALUE").Value; 
```

应该为您提供正确的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T13:38:21.513

`macnode.Value`是文本值，而不是`VALUE`属性的值。您需要 的`Attributes`属性`macnode`，然后从中获取该属性的属性值`VALUE`。请参阅[http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.attributes.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.attributes.aspx)和[http://msdn.microsoft.com/en-us/library/system.xml.xmlattributecollection.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlattributecollection.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T21:36:30.840

您实际上可以通过一个 XPath 选择来完成这一切：

```
XmlNode macnode = xmlDoc.SelectSingleNode("/NET_SETTINGS/IP_ADDRESS/@VALUE");
string mac = macnode.Value; 
```

# android - 如何通过首先显示中间片段的视图来启动 FragmentActivity

> ID：14182636
> 
> 赞同：0
> 
> 时间：2013-01-06T13:35:02.873
> 
> 标签：android

我刚开始学习android。希望这不是愚蠢的问题。这里是

我`FragmentAdapter`有一个`List`s `Fragment`，说 3 个片段 1,2,3。

我已经`FragmentAdapter`为我的`ViewPager`使用设置了这个`myViewPager.setAdapter(myFragmentAdapter);`

因此，此应用程序通过显示**Fragment 1 的视图**启动。如何通过首先显示`Fragment`2 来启动应用程序`View`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:43:35.387

您可以使用`setCurrentItem(index)`切换当前页面。

在这种情况下，您需要执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // ... init code ...
    myViewPager.setCurrentItem(1);
} 
```

有关更多信息，请参阅[ViewPager 文档](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int%29)。您可能希望使用此方法的变体，它允许您指定应该平滑滚动的位置，并将其设置为`false`，否则用户可能会在应用程序打开的那一刻看到动画并且可能会造成混淆。例如，

```
myViewPager.setCurrentItem(1, false); 
```

# jquery-ui - 在 iFrame 中使用可选择的 jQuery

> ID：14182638
> 
> 赞同：0
> 
> 时间：2013-01-06T13:35:26.947
> 
> 标签：jquery-ui, iframe

我通过拖放界面使用 jQuery 开发 HTML 生成器。当前，用户将“块”元素拖到覆盖 iFrame 的不可见 div 上（因此它似乎正在拖放到 iframe 上）。当元素被拖放到这个不可见的 div 上时，相应的 HTML 将附加到 iFrame 主体。

接下来，我想让用户能够在 iFrame 中选择一个元素，并更改所选元素的属性。

我已将 CSS 导入和 jQuery/jQueryUI 脚本附加到 iFrame 头中。

我面临的问题是当单击附加的 iFrame 元素时，jQuery 选择套索仅在鼠标离开 iFrame 时出现，并且它出现在 iframe 之外。

我使用 iFrame 的原因是，当为用户“生成”代码时，我可以将 iFrame 正文内容附加到对话框中。

以前有人遇到过 iFrame 和 jQuery 的问题吗？是否有任何文档/javaScript 库可以帮助我完成此过程？

谢谢！

罗里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:18:25.907

围绕这个问题的“修复”很复杂，但适用于我的情况。

我在 iframe 中的每个添加元素上创建了一个点击事件，如下所示：

```
$('iframe').contents().find('.elem'+blockVal).on('click', function(){
    $('iframe').contents().find('.selected').removeClass('selected');
    $(this).addClass('selected');
//alert('you have selected the block with class element'+ blockVal);
}); 
```

blockVal 是从将 html 附加到 iframe 的函数传入的变量。上面的函数只是为附加到 iframe 的每个元素添加了一个点击侦听器。当任何元素被点击时，它们会被赋予一个“已选择”类，而任何其他已经拥有该类的元素都会丢失它。

如果这没有任何意义，我很抱歉。

我对任何做类似事情的人的建议：不要使用 iframe。

# python - Flipping image / mirror Image

> ID：14182642
> 
> 赞同：0
> 
> 时间：2013-01-06T13:35:40.910
> 
> 标签：python, image-processing

I need to write a function that get an image and return a mirror image (the Y coordinate never change), without using any mirror or flip module from PIL.
I have to write it myself. I'm getting an error msg:

```
IndexError: image index out of range 
```

what am I missing here?

thank you.

```
from os.path import exists
import tkMessageBox, tkFileDialog
from PIL import Image, ImageTk, ImageFilter

def flip(im):
    '''Flips a picutre horizontally, and returns a new image that is a mirror view of the original'''
    org=Image.open(im)
    new=Image.new("RGB",org.size)   
    for x in range(org.size[0]):
        a=org.size[0]
        for y in range(org.size[1]):
            pixel=org.getpixel((x,y))
            new.putpixel((a,y),pixel)
            a-=1
    new.save("new.bmp","bmp") 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-06T13:48:27.047

Use [ImageOps.mirror(image)](http://www.pythonware.com/library/pil/handbook/imageops.htm) to flip the image horizontally.

```
import Image
import ImageOps

img = Image.open(FILENAME)
mirror_img = ImageOps.mirror(img) 
```

* * *

Your code is very close to working. You have an "off-by-one" error.

```
a=org.size[0]
...
new.putpixel((a,y),pixel) 
```

Let's say the `org` is 100 pixels wide. Then the first time through the loop you are placing a pixel at `(100,y)`. But the pixels are indexed from 0--99\. This is why (and where) you are getting a `IndexError: image index out of range` exception.

* * *

Also, be careful about where in the loops you are initializing and decrementing `a`. In fact, I would suggest not using `a` at all.

Rather, use

```
w,h = org.size
for x in range(w):
    for y in range(h):
        pixel = org.getpixel((x, y))
        new.putpixel(EXPRESSION, pixel) 
```

and just replace EXPRESSION with some formula for the location of pixel you wish to color.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T14:10:26.733

You're mixing up 0-based and 1-based indexing. `x` ranges from `0` to `org.size[0]-1`. But `a` ranges from `org.size[0]` to `1`, because you start with `a=org.size[0]` and use that, without first subtracting.

Most likely the error comes from somewhere inside this line:

```
new.putpixel((a,y),pixel) 
```

… on your very first call, when you try to write pixel (280, 0) in an image that only runs from (0-279, 0-279).

So, instead of this:

```
for x in range(org.size[0]):
    a=org.size[0]
    for y in range(org.size[1]):
        pixel=org.getpixel((x,y))
        new.putpixel((a,y),pixel)
        a-=1 
```

Do this:

```
for x in range(org.size[0]):
    a=org.size[0]-1
    for y in range(org.size[1]):
        pixel=org.getpixel((x,y))
        new.putpixel((a,y),pixel)
        a-=1 
```

But once you fix this, you're going to run into another problem. You set `a` to `org.size[0]` every time through the outer loop, instead of just the first time. And then you decrement `a` each time through the inner loop, instead of the outer loop. So, you're going to end up copying each line in the original image to the diagonal running from (279,0) to (0,279).

So, you need to do this:

```
a=org.size[0]-1
for x in range(org.size[0]):
    for y in range(org.size[1]):
        pixel=org.getpixel((x,y))
        new.putpixel((a,y),pixel)
    a-=1 
```

This kind of thing is exactly why you should try to avoid modifying indices manually like this. You never get it right on your first try. On your third try, you get something that *looks* right, but crashes as soon as you try the first image that wasn't in your test suite. It's better to calculate the values instead of counting them down. For example:

```
for x in range(org.size[0]):
    flipped_x = org.size[0] - x - 1
    for y in range(org.size[1]):
        pixel=org.getpixel((x,y))
        new.putpixel((flipped_x,y),pixel) 
```

While we're at it, if you can require/depend on PIL 1.1.6 or later, using the array returned by `Image.load()` is significantly simpler, and much more efficient, and often easier to debug:

```
orgpixels, newpixels = org.load(), new.load()
for x in range(org.size[0]):
    flipped_x = org.size[0] - x - 1
    for y in range(org.size[1]):
        pixel=orgpixels[x, y]
        newpixels[flipped_x, y] = pixel 
```

If you can't rely on 1.1.6, you can use `getdata` to get a iterable sequence of pixels, use that to generate a new `list` or other sequence (which means you can use a list comprehension, `map`, even feed them into [`numpy`](http://www.numpy.org) via, e.g., `np.array(org.getdata()).reshape(org.size)`), and then use `putdata` to create the new image from the result.

Of course `getdata` and `putdata` deal with a 1D sequence, while you want to treat it as a 2D sequence. Fortunately, the `grouper` function in the [`itertools`](http://docs.python.org/2/library/itertools.html) docs—which you can copy and paste, or just `pip install more-itertool`—is usually exactly what you want:

```
orgrows = more_itertools.grouper(org.size[0], org.getdata())
newrows = [list(reversed(row)) for row in orgrows]
new.putdata(newrows) 
```

One thing to watch out for is that `Image.open(im)` might not necessarily return you an image in RGB mode. If you just copy pixels from, say, an XYZ or P image to an RGB, you'll end up with discolored garbage or just the red channel, respectively. You may want to `print org.mode`, and possibly `print org.pixel((0, 0))` to make sure it actually has 3 channels (and they look like RGB)`.

The easiest way around that is to convert `org` before you do anything else:

```
org=Image.open(im).convert('RGB') 
```

Of course some formats either don't have direct conversions or require an explicit matrix or color palette. If you get a `ValueError`, you'll have to read up on converting your input type.

# cakephp - CakePHP：以最大值连接表

> ID：14182644
> 
> 赞同：0
> 
> 时间：2013-01-06T13:35:50.833
> 
> 标签：cakephp, join, cakephp-2.2

对不起，我是 cakePHP 的新手。我使用 cakePHP 2.2。我有两张桌子，书籍和交易。

**表：书籍**

```
id
title
author 
```

**表：交易**

```
id
book_id
status
borrow_date 
```

在表事务中列出了该书的所有事务。

我的问题，如何获取最大交易 ID 的状态？

我尝试使用这个

```
选项['加入'] = 数组（
            大批（
                '表' => '交易'，
                '别名' => '交易',
                '类型' => '右外',
                'fields' => array('MAX(Transaction.id)', '*'),
                '条件' => 数组（
                    'Catalogue.id = Transaction.catalogue_id',
                    //'Transaction.user_id' => $userId
                ),
                'order' => array('Transaction.id' => 'desc'),
            )
        );
        $this->set('Book', $this->Book->find('all',$options));

```

在视图中：

```
$Book['Transaction']['status']; 
```

但它显示一个错误：

> 注意（8）：未定义索引：Transaction [APP\View\Catalogues\user_katalog.ctp, line 32]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:48:08.793

**教条69**是对的。这是一个例子：因为你已经在控制器中使用了它：

```
$this->set('Book', $this->Book->find('all',$options)); 
```

你应该在视图中使用它：

```
foreach( $Book as $b ) {
      echo $b['Transaction']['status'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:09:16.440

你正在做 find(all) 所以你有一个书单

```
var_dump($Book); 
```

你会看见

```
array(
   0 => array(
       'Transaction' => ...
   ),
   1 => array(
       'Transaction' => ...
   )
   .....
); 
```

不是

```
array(
   'Transaction' => ...
); 
```

如果需要，可以循环`$Book`或使用。`find('first', ...)`

# mysql - MySQL - 如何按组汇总计数

> ID：14182649
> 
> 赞同：0
> 
> 时间：2013-01-06T13:36:11.357
> 
> 标签：mysql, join, count, group-by

我有三个与以下关系相关的表：

```
"agency" 1-n "agent" 1-n "ad" 
(agency has many agents and each agent has many ads) 
```

我想按代理商获取广告计数列表，如下所示：

```
agency_name   |   ad_count
---------------------------
agency 1      |     15
agency 2      |     25
agency 3      |     0 
```

甚至会显示 0 个广告的代理机构。这可能吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:40:10.833

由于您没有提供确切的表结构，我不得不猜测一下

```
select agency.agency_name, 
       count(ad.id) as ad_count
from agency 
left outer join agent on agency.id = agent.agency_id
left outer join ad on ad.id = agent.ad_id
group by agency.agency_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:46:04.567

[SQL小提琴](http://www.sqlfiddle.com/#!2/b4a8b/2/0)

```
select agency.agency_name, count(ad.id)
from agency
left join agent on agent.agency_id = agency.id
left join ad on ad.agent_id = agent.id
group by agency.agency_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:43:19.337

试试这个：

```
SELECT a.agencyname, IFNULL(b.adcnt, 0) adcount  
FROM agency 
LEFT JOIN (SELECT a.agencyid, SUM(adcnt) adcnt 
           FROM agent a 
           INNER JOIN (SELECT agentid, COUNT(agentid) adcnt 
                       FROM ad 
                       GROUP BY agentid
                      ) b ON a.agentid = b.agentid 
           GROUP BY agencyid) b ON a.agencyid = b.agencyid 
```

# jquery - 在jquery中切换div的位置

> ID：14182652
> 
> 赞同：2
> 
> 时间：2013-01-06T13:37:10.367
> 
> 标签：jquery

当我单击标题时，我想切换 div 的位置。这是我的 HTML 示例：

```
<div class="main-wrapper">
    <div class="header-wrapper">
        <h3>Header</h3>
    </div>
<p>Paragraph</p>
</div>

<div class="main-wrapper">
    <div class="header-wrapper">
        <h3>Header</h3>
    </div>
<p>Paragraph</p>
</div>

<div class="main-wrapper">
    <div class="header-wrapper">
        <h3>Header</h3>
    </div>
<p>Paragraph</p>
</div> 
```

这是我的jQuery：

```
$(".header-wrapper h3").click( function() { $(".main-wrapper").prependTo(".header-wrapper:first"); }); 
```

问题是现在它试图将所有 .main-wrappers 放在第一个之前，但我只想要一个包含我点击的 h3 的那个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:42:40.917

您应该将所有 main-wrapper 元素嵌入到容器中（或使用主体）：

[看演示](http://jsfiddle.net/b4dyM/)

HTML：

```
<div class="container">
<div class="main-wrapper">
  <div class="header-wrapper">
     <h3>Header</h3>

  </div>
  <p>Paragraph 1</p>
</div>
<div class="main-wrapper">
  <div class="header-wrapper">
     <h3>Header</h3>

  </div>
  <p>Paragraph 2</p>
</div>
<div class="main-wrapper">
  <div class="header-wrapper">
     <h3>Header</h3>

  </div>
  <p>Paragraph 3</p>
</div>

  </div> 
```

查询：

```
$(".header-wrapper h3").click(function () {
  var $mainrWrap = $(this).closest(".main-wrapper");
  $(this).closest(".container").prepend($mainrWrap);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:48:49.427

真的不清楚你要做什么，但你可以得到`.main-wrapper`你点击的那个`$(this).parent().parent()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:52:58.080

看到这个：http: [//jsfiddle.net/c2U3g/2/](http://jsfiddle.net/c2U3g/2/)

```
$(".header-wrapper h3").click(function () {
 if (!$(this).closest(".main-wrapper").is(":first-child")) {
  $(this).closest(".main-wrapper").insertBefore(".main-wrapper:first");
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T14:05:30.353

```
$(".main-wrapper") 
```

上一行实际上选择了所有具有 main-wrapper 类的 div。在事件回调函数中*this*指的是被点击的元素（基本上是事件的目标）。

[jsfiddle demo解决问题](http://jsfiddle.net/uUNcP/)

```
var firstWrapper = $(".main-wrapper").first(),
    clickedWrapper = $(this).parents(".main-wrapper");

if (!clickedWrapper.is(":first-child")) {
    clickedWrapper.insertBefore(firstWrapper)
} 
```

我对代码的拆分比你通常做的多一点；会发生什么：

1.  firstWrapper 变量包含对具有 main-wrapper 类的所有 div 的引用
2.  clickedWrapper：使用 parents(".main-wrapper") 查找祖先树以找到具有 main-wrapper 类的祖先元素
3.  如果指令检查 clickedWrapper 是否不是第一个。我们什么都不做。如果不是，我们在 firstWrapper 之前插入 clickedWrapper。

# android - 无法再部署我的应用程序（应用程序已部署。无需重新安装）

> ID：14182654
> 
> 赞同：1
> 
> 时间：2013-01-06T13:37:22.173
> 
> 标签：android, launch

我的应用程序不会部署。它认为它是最新的或什么的。

我在它停止工作之前所做的事情..

为数字选择器 API 10 支持链接了一个 lib 项目。我已经从工作区和参考中删除了项目。

我记得当我导入它时，它还谈到了更改 lib 的启动配置。

安慰

```
[2013-01-06 13:28:33 - App] adb is running normally.
[2013-01-06 13:28:33 - App] Performing uk.co.App.Start activity launch
[2013-01-06 13:28:33 - App] Automatic Target Mode: Unable to detect device compatibility. Please select a target device.
[2013-01-06 13:28:36 - App] Application already deployed. No need to reinstall.
[2013-01-06 13:28:36 - App] Starting activity uk.co.App.Start on device HT23ZW127890
[2013-01-06 13:28:36 - App] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=uk.co.app/.Start }
[2013-01-06 13:28:36 - App] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

当然有这个问题[应用程序已经部署。无需重新安装](https://stackoverflow.com/questions/5577841/application-already-deployed-no-need-to-reinstall)但没有一个解决方案有效。

另请注意，卸载.. 然后它会再次在这个旧版本中启动。

我重启了手机，重启了eclipse。甚至重新启动了我的电脑。

当我清理它时，我得到：

```
[2013-01-06 13:39:47 - App] adb is running normally.
[2013-01-06 13:39:47 - App] Could not find App.apk! 
```

因此，无论出于何种原因，它都没有构建我的项目

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T13:46:10.293

在添加库参考时，请确保您没有勾选`Is Library`.

这表明您正在处理的项目是一个库项目。并不是说它包括一个。

这个标志可以在选项卡`Project properties`下找到。`Android`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:24:30.007

是的。或者您可以在运行选项卡下运行配置。转到应用程序支持，然后单击新建选择您的项目，然后将其定位到设备，通常效果最好。

# php - 谷歌自定义搜索

> ID：14182662
> 
> 赞同：1
> 
> 时间：2013-01-06T13:38:26.973
> 
> 标签：php, google-custom-search

找不到我需要的答案，所以希望你们能提供帮助。

我正在尝试开发（具有基本但不断增长的知识！）自定义蛋糕网站的拆分搜索栏。

基本上我在标题中有一个搜索栏，还有一个包含整个网站和蛋糕的下拉菜单。

选择整个站点后，我希望它将搜索参数传递给 googel 自定义搜索并显示在页面上。选择蛋糕时，它会触发我编写的自定义 php 搜索，以搜索并显示单个蛋糕图片。

我目前正在使用 if 语句执行此操作。所以如果 type=cakes 然后（运行 php () 否则通过谷歌自定义搜索放置搜索词。

现在我尝试使用仅结果格式，但它似乎没有渲染任何东西！我不知道如何将我的参数传递给结果页面。我尝试将参数设置为 cakeref，这是我之前指定的。

关于谷歌自定义搜索如何工作和集成的任何帮助或解释都会令人惊叹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T02:59:45.397

尝试这个

```
$search_query = "Is+Wikipedia+IsGreat";
$amazon_url = "https://www.googleapis.com/customsearch/v1?key=3425lh43lkh52lk34jh5&cx=023470239740:kj2h3kl4hlk23&alt=atom&num=5&q='$search_query'";
$google_search = file_get_contents($amazon_url); 
```

您需要`API Key`和`CX`号码来调用此 API。并对`urlencoding`查询参数进行编码。

也试试`Curl`。。

API 客户端库在这里

[http://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)

[http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/customSearch/index.php](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/customSearch/index.php)

[http://www.phpclasses.org/package/6301-PHP-Perform-searches-with-the-Google-Site-Search-API.html](http://www.phpclasses.org/package/6301-PHP-Perform-searches-with-the-Google-Site-Search-API.html)

# android - 如何将 SoundPool 与线程一起使用？

> ID：14182664
> 
> 赞同：0
> 
> 时间：2013-01-06T13:38:41.083
> 
> 标签：android, multithreading, soundpool

在我的项目中，当用户触摸特殊位置（如图像中的房子）时，应用程序会播放声音。我有72个职位。

我使用了一个 SoundPool 类：

```
package com.app;
import android.content.Context;

import android.media.AudioManager;

import android.media.SoundPool;

public class sound_pool

{

   private Context pContext;

   private SoundPool sndPool;

   private float rate = 1.0f;

   private float leftVolume = 1.0f;

   private float rightVolume = 1.0f;

    int s_1_1, s_1_2;

   // Constructor, setup the audio manager and store the app context

   public sound_pool(Context appContext)

   {

     sndPool = new SoundPool(72, AudioManager.STREAM_MUSIC, 100);

     pContext = appContext;

     s_1_1 =   load(R.raw.s1_1);

     s_1_2 = load(R.raw.s1_2);

   }

   public void play_s_1_1()

   {

          play(s_1_1);

   }

   public void play_s_1_2()

   {

       play(s_1_2);

   }

   public int load(int sound_id)

   {

          return sndPool.load(pContext, sound_id, 1);

   }

   public void play(int sound_id)

   {

          sndPool.play(sound_id, leftVolume, rightVolume, 1, 0, rate);

   } 
```

这是我的主要活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Create an instance of our sound manger
     snd = new sound_pool(getApplicationContext());

     // Set volume rocker mode to media volume
     this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

final ImageView pic = (ImageView) findViewById(R.id.imageView1);

pic.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

    Bitmap bm = BitmapFactory.decodeResource(getResources(),  R.drawable.setar_pre_last_color);

    final float maskW = bm.getWidth();
    final float maskH = bm.getHeight();

     float diffW=1;
      float diffH=1;
     float finalHeight=1;
     float finalWidth=1;

      finalHeight = ax.getMeasuredHeight();
      finalWidth = ax.getMeasuredWidth();
     diffW = finalWidth / maskW;
     diffH = finalHeight / maskH;

    int cordinate_X = (int) ((event.getX()+ v.getScrollX()) /diffW );
    int cordinate_Y = (int) ((event.getY()+ v.getScrollY()) / diffH );
    int pixelColor =  bm.getPixel(cordinate_X , cordinate_Y);   //Get the pixel at coordinates

 System.out.println( pixelColor );

       switch (event.getAction()) {

                   case MotionEvent.ACTION_DOWN:

                       switch ( pixelColor ) {

                       case -65536:

                         snd.play_s_1_1();
                         System.out.println( pixelColor );

                                     break;

                       case -13539997:

                           snd.play_s_1_3();

                           break;

                case MotionEvent.ACTION_UP:

                      System.out.println( pixelColor );

                break;

                } 

                return true;

            }

        }); 
```

我如何将这个项目与线程一起使用？谢谢你。

# c++ - 定义枚举后赋值

> ID：14182668
> 
> 赞同：1
> 
> 时间：2013-01-06T13:38:50.867
> 
> 标签：c++, enums, assign, enum-class

我是 C++ 尤其是 C++11 的新手，所以既然我现在必须使用它，就出现了一些关于“枚举”和“枚举类”的问题：

**我可以在声明枚举后赋值吗？**

```
enum MyEnum;
MyEnum::HELLO = 0;
MyEnum::WORLD = 1; 
```

**我可以为数字赋值吗？（例如：Myenum::0 = 2）**

```
enum MyEnum;
MyEnum::0 = 16;
MyEnum::1 = 24;
MyEnum::3 = 64; 
```

**当使用结构或类作为基础类型时，枚举类如何工作？**

枚举中的条目会是结构/类的有效实例吗？

```
class Test {
    private int v = 0;
    Test(int v) {
        this->v = v;
    }
};

enum class MyEnum : Test {
    Test0 = new Test(0),
    Test1 = new Test(1),
}; 
```

我在搜索主题时发现了这些链接：

*   [http://www.stroustrup.com/C++11FAQ.html#enum](http://www.stroustrup.com/C++11FAQ.html#enum)
*   [我们真的需要 C++11 中的“枚举类”吗？](https://stackoverflow.com/questions/6936030/do-we-really-need-enum-class-in-c11)
*   [C++11 枚举类实例化](https://stackoverflow.com/questions/12957499/c11-enum-class-instantiation)

如您所见，其中留下了一些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T13:43:25.777

不，你不能做任何这些。

但是，您可以在*声明*后提供枚举的*定义*：

 *```
enum MyEnum; //declaration

enum MyEnum  //definition
{
  HELLO = 0,
  WORLD = 1;
}; 
```

* * *

> 我可以为数字赋值吗？

不，这没有意义。一个数字已经有一个*值*。它是恒定的。

* * *

请获取有关 C++ 编程的介绍性书籍。这里有一些建议：

*   [The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T13:46:00.920

首先，你*永远*不能在 C++ 中赋值。以下是非法的：

```
42 = 23; 
```

出于几乎相同的原因，您也不能分配枚举的值。

此外，你甚至不能在声明之后*使用*枚举的值（即你不能写`auto x = enum_name::name;`），只能在*定义*之后使用。您只能使用枚举的名称。

> 我可以为数字赋值吗？

我不确定这应该是什么意思，但除了我之前所说的之外，该语法无论如何都是非法的。也就是说，您不能通过写入来访问第二个枚举值`enum_name::1`。

> 当使用结构或类作为基础类型时，枚举类如何工作？

您不能使用自定义类型作为基础类型，只能使用内置整数类型。*

# algorithm - 概率：如果你有 n 个骰子，每个骰子有 m 个面，就没有获胜的方法

> ID：14182670
> 
> 赞同：4
> 
> 时间：2013-01-06T13:39:00.507
> 
> 标签：algorithm, math, probability

给你若干个骰子 n，每个骰子有若干面 m。你掷出所有 n 个骰子，并记下你掷出每个骰子所掷出的所有骰子的总和。如果你得到一个总和 >= x，你赢了，否则你输了。找出你获胜的概率。

我想生成 1 到 m （大小为 n ）的所有组合，并只计算总和大于 x 的那些组合。方法总数为 m^n

在那之后，它只是两者的分裂。

有没有更好的办法 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T13:48:41.153

**[编辑：正如 jpalacek 所指出的，时间复杂度是错误的——我现在已经解决了这个问题。]**

您可以使用动态编程更有效地解决此问题，首先将其更改为问题：

**有多少种方法可以从 n 个骰子中得到至少 x？**

将其表示为 f(x, n)。那么一定是这样

f(x, n) = sum(f(x - i, n - 1)) 对于所有 1 <= i <= m。

即如果第一个骰子有1，那么剩下的n-1个骰子必须加起来至少为x-1；如果第一个骰子有 2，则剩余的 n - 1 个骰子必须加起来至少为 x - 2；等等。

和中有 m 项，所以如果你[记住](http://en.wikipedia.org/wiki/Memoization)这个函数，它将是 O(m^2*n^2)，因为它最多需要做 (m * n) * n 次 (即，假设第一个参数 x <= m * n)，对函数的每个唯一输入集执行一次。

作为获得概率的最后一步，只需将 f(x, n) 的结果除以可能结果的总数，即 m^n。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T13:59:54.997

只是为了添加@j_random_hacker 的基本正确答案，当您注意到这一点时，您可以使其更快

f(x, n) = f(x-1, n) - f(xm-1, n-1) + f(x-1, n-1) 如果 x>m+1

这样，您只需花`O(1)`时间计算每个`f`值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T06:38:19.757

//传递 curFace 值将不允许重复组合
//对于 3 个骰子 - 和 8 - 2 4 2 和 2 2 4 是相同的组合 - 所以应该算作一个

```
int sums(int totSum,int noDices,int mFaces,int curFace,HashMap<String,Integer> map)
{

    int count=0;

    if (noDices<=0 || totSum<=0)
            return 0;

    if (noDices==1)
    {
         if (totSum>=1 & totSum<=mFaces)
             return 1;
         else
             return 0;    
    }
    if (map.containsKey(noDices+"-"+totSum))
        return map.get(noDices+"-"+totSum);

    for (int i=curFace;i<=mFaces;i++)
    {

        count+=sums(totSum-i,noDices-1,mFaces,i,map);
    }

    map.put(noDices+"-" +totSum,count);

    return count;
} 
```

# php - 如何将正则表达式与 MongoDB 的不同命令一起使用？

> ID：14182673
> 
> 赞同：1
> 
> 时间：2013-01-06T13:39:56.287
> 
> 标签：php, regex, json, mongodb

MongoDB 的独特命令非常适合我想要实现的目标，即为集合中的特定键获得一组独特的结果。

我读过它支持正则表达式，但我不知道如何将它合并到查询中。

所以这：

```
db.runCommand({distinct:'cars',key:'car_company.name'}) 
```

会回来

```
{
    "values" : [
        "Chevy",
        "Porche",
        "Chevrolet",
        "BMW",
        "Mercedes-Benz",
    ],
    "stats" : {
        "n" : 5,
        "nscanned" : 5,
        "nscannedObjects" : 5,
        "timems" : 0,
        "cursor" : "BasicCursor"
    },
    "ok" : 1
} 
```

我将如何构建这个查询，以便它只返回匹配正则表达式“chev”的唯一值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:51:07.483

`php`你可以通过这样做来实现这一点

```
$cars = $db->command(
    array(
        "distinct" => "car_collection",
        "key" => "car_company.name",   // or what so ever key you wish to be distinct
        "query" => array("car_company.name" => new MongoRegex("/^chev/i"))
    )
); 
```

# java - 从 js/jQuery 通过 WLAN 与服务器通信的最快方式

> ID：14182678
> 
> 赞同：0
> 
> 时间：2013-01-06T13:40:21.207
> 
> 标签：java, javascript, jquery, wifi, com.sun.net.httpserver

我设置了迷你服务器，`com.sun.net.httpserver`作为应用程序的一部分，它能够从硬盘映射文件并将它们作为响应发送，现在只是简单的东西（js、css、图像、html）。

我的要求是以尽可能少的开销与服务器交谈，现在我正在使用 jQuery ajax HEAD 请求将请求发送回服务器（我正在解析服务器上的查询字符串并根据查询字符串执行所需的操作）

但这对我的需求来说太慢了，在我的代码中需要 1-2 秒（有时更多）来接收解析查询字符串的请求，并且连接经常被太多请求阻塞，我通过超时和计时器部分解决了这个问题，但是这样做只会减慢整个事情的速度。

是否有另一种更快的方式使用 js/jQuery 与服务器通信？

也许像反向长轮询？有这样的事吗？我假设每次建立连接都会增加很多开销，还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:22:07.783

我尝试了[jWebSocket](http://jwebsocket.org/)，我在 Java 应用程序中获得了移动设备和 jWebSocket 服务器之间几乎实时的通信。由于缺乏文档，设置起来有点困难，但速度得到了巨大的提高。

# html - Safari 在 HTML5 输入数字字段中舍入大数字

> ID：14182683
> 
> 赞同：1
> 
> 时间：2013-01-06T13:40:47.627
> 
> 标签：html, browser, safari, biginteger

我的网络应用程序有一个接受任意大数字的数字字段。但是，在 Safari 中，HTML5 数字字段中会舍入大量数字：`<input type="number>`. 例如，数字“1234567890123456”四舍五入为“1234567890123460”。Chrome 和 firfox 不这样做。有没有办法在 Safari 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:14:55.193

除了使用 type=text 之外别无他法。 [数字输入只能处理 IEEE 754 双精度数字](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#floating-point-numbers)。它不能处理任意更高的精度。

# database - ASP.NET MVC 通过 ExecuteSqlCommand 获取插入项的 ID

> ID：14182684
> 
> 赞同：2
> 
> 时间：2013-01-06T13:40:59.607
> 
> 标签：database, ado.net

我在我的 ASP.NET MVC3 项目中插入以下内容：

```
var query = "INSERT INTO MyTable VALUES(//some values)";
db.Database.ExecuteSqlCommand(query); 
```

有没有一种简单的方法来获取插入行的 ID？

**编辑：**

我的存储过程：

```
CREATE PROCEDURE addGetID
( 
    @PersonnelID INT,
    @ShiftWorkID BIGINT,
    @EntranceDateTime DATETIME,
    @WorkflowStateRelationID BIGINT
)
AS
INSERT INTO DynamicDataEntrances VALUES (@PersonnelID, @ShiftWorkID, @EntranceDateTime, @WorkflowStateRelationID)
SELECT @@IDENTITY 
```

我的代码行：

```
string dt = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss");
SqlParameter PersonnelID = new SqlParameter("@PersonnelID", 1);
SqlParameter ShiftWorkID = new SqlParameter("@ShiftWorkID", 2);
SqlParameter EntranceDateTime = new SqlParameter("@EntranceDateTime", dt);
SqlParameter WorkflowStateRelationID = new SqlParameter("@WorkflowStateRelationID ", db.WorkflowStateRelations.Where(wsr => wsr.WorkflowID == dp.WorkflowID).Select(x => x.ID).FirstOrDefault());
SqlParameter returnValue = new SqlParameter();
returnValue.Direction = ParameterDirection.ReturnValue;

// try 1
db.Database.ExecuteSqlCommand("addGetID(@PersonnelID, @ShiftWorkID, @EntranceDateTime, @WorkflowStateRelationID )", PersonnelID, ShiftWorkID, EntranceDateTime, WorkflowStateRelationID, returnValue);

// try 2
db.Database.ExecuteSqlCommand("addGetID @PersonnelID @ShiftWorkID @EntranceDateTime @WorkflowStateRelationID ", PersonnelID, ShiftWorkID, EntranceDateTime, WorkflowStateRelationID, returnValue);

// try 3
db.Database.ExecuteSqlCommand("exec addGetID @PersonnelID={0} @ShiftWorkID={1} @EntranceDateTime={2} @WorkflowStateRelationID={3} ", PersonnelID, ShiftWorkID, EntranceDateTime, WorkflowStateRelationID, returnValue);

var id = returnValue.Value; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:00:05.853

我同意 [scartag][1] 的观点。但要分两部分回答你的问题。

如果您要使用直接 sql，那么要做的是创建一个返回`@@IDENTITY`值的存储过程。然后你用参数执行你的 Sp`ParameterDirection.ReturnValue`并使用该值。

像这样：

```
SqlParameter entityField = new SqlParameter("@firstName", "Frank");
SqlParameter returnValue = new SqlParameter();
returnValue.Direction = ParameterDirection.ReturnValue;
db.Database.ExecuteSqlCommand("sp_ByPassEFAndInsertEntity(@firstName)", 
                              entityField, returnValue);
var id = returnValue.Value; 
```

或者只使用EF。创建并初始化您的`Entity`，将其添加到适用的`DbSet`并调用 savechanges。您的 Entity 实例的 Id 列将使用数据库生成的值进行更新。

编辑2：我将第一个解决方案应用于我的本地数据库，并且可以让它给出一个返回值。经过一番研究，我能够得到一个返回值。我有一个带有博客表的本地数据库。我创建了一个 addBlog SP，这就是您获取返回值的方式 - 但您必须使用 SqlQuery，而不是使用 ExecSqlCommand。

这是我的SP：

```
 ALTER PROCEDURE [dbo].[addBlog] 
        @BlogName varchar(50),
        @CreateDateTime datetime
    AS
    BEGIN
        insert into Blog (Name, DateTimeCreated) values (@BlogName, @CreateDateTime)
        declare @return int
        set @return = @@identity
        select @return
    END 
```

和我的 EF 代码：

```
 using (var db = new StackOverflowEntities()) {
        SqlParameter blogName = new SqlParameter("BlogName", "New Name 2");
        SqlParameter createDate = new SqlParameter("CreateDate", DateTime.Now);

        int? newIdentityValue = db.Database.SqlQuery<Int32>("addBlog @BlogName, @CreateDate", blogName, createDate).FirstOrDefault();

        Debug.WriteLine(newIdentityValue);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:45:43.697

不可以。您无法通过此方法获取插入行的 ID。

它只返回一个 int （告诉你受影响的行数）。

您的代码告诉我您已经在使用 EF，那么为什么不使用 API 的其他方面呢？

既然您似乎热衷于使用原始 sql 路线，为什么不使用像 dapper、mass 或 petapoco 这样的工具呢？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T13:10:02.540

```
SELECT scope_identity() 
```

作为您的返回值

# ios - Flash Builder AIR 模拟器上的触摸手势

> ID：14182685
> 
> 赞同：1
> 
> 时间：2013-01-06T13:41:09.387
> 
> 标签：ios, flash, touch

我想在 AIR 移动设备模拟器上测试我的 iOS 应用程序。当我在 AIR 上运行此代码时：

```
trace(Multitouch.supportsTouchEvents); 
```

我是假的（在 iPhone 4 上我当然是真的）。有没有办法在 AIR 上启用触摸手势？

（我使用的是 Flash Builder 4.7）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-07-30T21:04:49.290

将此名为 build.xml 的文件代码与[ANT 平台](http://www.stasha.info/index.php?id=76)一起用于 RUN：

```
<project name="HAB" default="run" basedir=".">
<property name="SDK_HOME" value="C:/Program Files/Adobe/Adobe Flash CC/AIR3.8"/>
<property name="FLASH_HOME" value="C:/Program Files/Adobe/Adobe Flash CC"/>
<property name="ADL" value="${SDK_HOME}/bin/adl.exe"/>
<property name="SIM" value="${FLASH_HOME}/Common/Configuration/simulator/SimController.exe"/>
<property name="APP_NAME" value="HAB"/>
<property name="APP_DESCRIPTOR" value="${APP_NAME}-app.xml"/>
<target name="run">
 <exec executable="${SIM}" dir="./bin-debug" spawn="true">
    <arg line="-once"/>
    <arg line="-lang en_US"/>
    <arg line="-port 7840"/>
 </exec>
 <exec executable="${ADL}" dir="./">
    <arg line="-profile extendedMobileDevice"/>
    <arg line="-nodebug"/>
    <arg line="-Xsimulation 7840"/>
    <arg line="${APP_DESCRIPTOR}"/>
 </exec> 
</target>
</project> 
```

但我真的不知道如何用 ANT 调试动作脚本代码

# windows-runtime - 在 GridView 中命名 ScrollViewer

> ID：14182686
> 
> 赞同：0
> 
> 时间：2013-01-06T13:41:11.043
> 
> 标签：windows-runtime, winrt-xaml

我要完成的工作：如果用户在 中滚动`GridView`，则背景以较慢的速度滚动。

我知道我可以通过变换做到这一点。

但我的问题是，如何为 的 指定`ScrollViewer`名称`GridView`？这样我就可以绑定到`ScrollViewer`.

我的 GridView 代码非常简单：

```
 <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemGridView"
        AutomationProperties.Name="Grouped Items"
        Grid.RowSpan="2"
        Padding="116,137,40,46"
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplateSelector="{StaticResource HomeViewDataTemplateSelector}"
        SelectionMode="None"
        IsSwipeEnabled="false">
        <GridView.Background>
            <ImageBrush ImageSource="ms-appx:///Assets/galleryArticleSwish.png" Stretch="None"/>
        </GridView.Background>
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>                        
                <VirtualizingStackPanel Orientation="Horizontal">
                    </VirtualizingStackPanel>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Margin="1,0,0,6">
                            <Button
                                AutomationProperties.Name="Group Title"
                                Style="{StaticResource TextPrimaryButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding GroupTitle}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                    <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle>
    </GridView> 
```

我想用 XAML 命名它，我知道我可以`ScrollViewer`通过可视化树获取 , 并在我的 ViewModel 上添加一些属性。但这不是一个干净的解决方案。

那么如何设置名称`ScrollViewer`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:18:11.420

你不能也不应该。即使您提取了 GridView 控件模板并获得了定义 ScrollViewer 的 XAML - 它很可能是不同名称范围的一部分，我什至不确定您是否可以绑定到它的偏移属性。最简单的选择可能是通过可视化树找到 ScrollViewer 并通过滚动背景来处理 ViewChanged 事件，例如通过更新 ImageBrush 的 AlignmentX 属性。

# android - WebView android 的一个奇怪问题

> ID：14182688
> 
> 赞同：1
> 
> 时间：2013-01-06T13:41:23.250
> 
> 标签：android, android-layout, svg, webview

我正在尝试从字符串中显示“svg”图像。如果我使用

`WebView wv =(WebView)findViewById(R.id.wv); wv.getSettings().setJavaScriptEnabled(true); wv.loadData(html, mimeType, encoding);`

图像没有显示，但如果我使用以下代码行

```
WebView wv=new WebView(this);
wv.getSettings().setJavaScriptEnabled(true);
wv.loadData(html, mimeType, encoding);` 
setContentView(wv); 
```

有用。可能是什么问题呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:45:57.033

另一个代码：

```
private WebView wb;
String html, mimeType, encoding;
@Override
public void onCreate(Bundle savedInstanceState)
{
// ... html, encoding, mimeType values
wb = (WebView)findViewById(R.id.widok_web);
openWb();
}

private void openWb() 
{
wb.getSettings().setJavaScriptEnabled(true);
wb.loadData(html, mimeType, encoding);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-09T07:44:26.250

我补充说，mime 类型必须是简单的“text/html”，而不是，例如“text/xml”或“image/svg+xml”。

# css - Chrome 中 calc 中的“vw”CSS 单元不起作用

> ID：14182695
> 
> 赞同：20
> 
> 时间：2013-01-06T13:42:00.057
> 
> 标签：css, google-chrome, viewport-units

新的`vw`（和`vh`，`vmin`和`vmax`）CSS 单元非常有用，就像`calc`. 两者在 Chrome 中都可以正常工作（后者前缀为`-webkit-calc`），但由于某种原因，我发现`calc`包括`v*`单位在内的属性值，例如`width: -webkit-calc(95vw - 25em)`产生无效的属性值。这只是尚未实现，还是规范或错误？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-06T16:57:27.033

这是一个错误，注册为*[错误 94158](https://bugs.webkit.org/show_bug.cgi?id=94158) - calc is not working with viewport units*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-15T08:31:15.983

这是一个老错误，早就被修复了，但如果你仍然支持旧版本的 chrome，特别是在你支持的 Android 平板电脑中的旧版本 chromium 中遇到这个错误（就像我的情况一样），这里是解决此错误的简单方法：

使用跨越您目标的 VW 的包装器，然后使用 100% 代替使用 calc(...) 中的视口单位。

html:

```
<div class="container">
    <div class="inner-calc-with-viewport-units-bugged" />
</div> 
```

CSS：

```
.container { 
    width: 100vw; //or height: 100vh, depending on your usecase
}
.inner-calc-with-viewport-units-bugged { 
    width: calc(100% - XXXXX px); //or height: calc(100% - XXpx);
} 
```

# jekyll - 升级到 0.12.0 时出现 jekyll 编译错误

> ID：14182696
> 
> 赞同：1
> 
> 时间：2013-01-06T13:42:35.497
> 
> 标签：jekyll

由于我已将 Jekyl 更新到`0.12.0`我的网站，因此不再编译。我到处都有这样的代码，遍历帖子并过滤失败的类别

```
<ul>
  {% for post in site.posts reversed  %}
  {% if post.category[0] == "about" %}
    <li>
      <a href="{{base_path}}{{post.url}}">{{ post.title }}</a>
    </li>
  {% endif %}
  {% endfor %}
</ul> 
```

这是我收到的错误消息：

```
Liquid Exception: undefined method `gsub' for ["about"]:Array in 2012-09-20-about.md 
```

如果我删除`Jekyll 0.12.0`，那么一切都会再次运行。

有什么事情发生了剧烈的变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:47:38.833

我认为您必须有一些没有定义任何类别的帖子？

我相信 Jekyll 0.12.0 提高了错误捕获的标准。因此，如果帖子没有类别，Ruby 命令`post.category[0] == about`不会 throw `FALSE`，而是会抛出`NA`（或类似的东西）。以前，Jekyll 会忽略这一点（大概将其视为`FALSE`），这并不是最好的行为。

我的猜测是您应该将命令重写为更明确，即如果 category[0] 不为空且值为“about”。考虑在命令之前简单地添加额外的`if`语句：

```
{% if defined?(post.category[0]) %} 
```

首先检查您是否没有进行无效比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:32:08.613

嗯，我无法在这里重现错误。如果您将其更改为

```
{% if post.category contains "about" %} 
```

它有效吗？

# ruby - Ruby中循环内定义的变量

> ID：14182698
> 
> 赞同：1
> 
> 时间：2013-01-06T13:42:41.147
> 
> 标签：ruby

这是Ruby中的一个while循环

```
x = 0
while x < 1 do
   inside_var = "I'm inside"
   x += 1
end

puts inside_var 
```

虽然，`inside_var`是在一个while循环内定义的，但它在它之外是可见的。它与 Java、C# 等完全不同。

我想知道，我错过了什么吗？真的是这样吗？Ruby 中的任何循环都是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T13:44:31.447

是的，它确实是这样工作的。它适用于所有内置控制结构（`while`, `for`, `if`, `begin ... end`），但不适用于块。因此，如果您使用`each`or重写代码`times`，它的行为将与您预期的一样。

# asp.net-mvc - 将 json 字符串传递给标有 POST 属性（AttributeRouting）的 MVC4 操作方法

> ID：14182699
> 
> 赞同：0
> 
> 时间：2013-01-06T13:42:44.990
> 
> 标签：asp.net-mvc, json, post, fiddler, attributerouting

我正在使用 AttributeRouting 库来简化生根。我有一个标有 POST 属性的方法，并获取一个字符串参数，如下所示。

```
[POST("Create")]
public ActionResult Create(string data)
{
    JavaScriptResult result = new JavaScriptResult();

    User user = JsonConvert.DeserializeObject<User>(data);
    BLResult bLResult = AccountingBL.CreateAccount(user);
    result.Script = JsonConvert.SerializeObject(bLResult);

    return result;
} 
```

我使用 Fiddler 来模拟带有以下标头和请求正文的发布请求。

**标题：**

```
User-Agent: Fiddler
Host: localhost:2253
Content-Type: application/json
Content-Length: 67 
```

**请求正文：**

```
{"Email":"foo@foo.com","Password":"123456","Name":"Halil İbrahim"} 
```

当我跟踪请求时，我看到那`data`是空的。我在哪里错过了重点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:52:43.880

您应该利用 ASP.NET MVC 的 ModelBinding 特性直接获取 User 实例

将您的操作重组为

```
[POST("Create")]
public ActionResult Create(User user)
{
    BLResult bLResult = AccountingBL.CreateAccount(user);

    result.Script = JsonConvert.SerializeObject(bLResult);

    return result;
} 
```

的形式在哪里`User`。确保 User 有一个无参数构造函数

```
public class User {

    public string Name {get;set;}

    public string Password {get;set;}

    public string Email {get;set;}

} 
```

并将数据发送到 POST 作为

```
var user = {"Email":"foo@foo.com","Password":"123456","Name":"Halil İbrahim"}

 $.ajax({
   .... other details
   data : user
 } 
```

# c++ - obj-c 委托模式的 C++ 等价物是什么？

> ID：14182700
> 
> 赞同：2
> 
> 时间：2013-01-06T13:42:53.023
> 
> 标签：c++, objective-c, delegates

我对 obj-c 非常熟悉，现在我正在尝试更深入地研究 C++。

我正在寻找 obj-c 委托模式的 C++ 等价物。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:23:50.850

您只需继承类（协议），而不是遵守协议。一个小例子：

```
class Delegate 
{
public:
// Some pure virtual method here.
virtual void method() = 0; 
};

class A : Delegate
{
   void method() { // Do something here... };
};

class B
{
   Delegate your_delegate;
   // Somewhere in your code you might need to call the method() using: your_delegate.method();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T14:39:40.477

没有真正的 1:1 等价物。Objective C 是一种有点动态类型的语言。Obj-C 中的A`protocol`就像一个承诺，具有某些签名的函数（“选择器”）将在运行时存在。如果你不想，你*不必*实现它们，但如果你不希望事情在运行时崩溃，你应该实现它们，除非它们被标记为`@optional`.

相比之下，C++ 是 100% 静态类型的。如果你说某个函数*应该*存在，那么它*必须*存在，否则程序将无法编译。如果超类将函数声明为抽象函数，则子类*必须*继承它。多重继承（如果你想让一个类实现多个解耦协议，你需要它）是一个雷区。

静态类型 (C++) 的优点是您可以在编译时知道您的程序在功能上是否完整（是否每个应该有代码的地方都有代码）。但是，这样做的代价是有时您必须想出其他解决方案来填充 Obj-C 的协议和委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T02:24:59.840

“代表”一词仍然适用。没有句法模式，但您可以使用常用工具通过框架对其进行建模。

这里有很多代码，但是界面很干净。用户必须做的只是底部的一小段代码。仍然有一些与构造函数相关的样板，但这将在未来使用 C++11“继承构造函数”语法消失。

```
/* Class to be used as a member of the delegation host.
   Keeps a list of event clients, which you can iterate over.
   As a C++11 convenience, function call operator() is overloaded to call
   all clients with the given argument list.

   This is templated over the base type for the clients. The base type
   should define virtual function(s) for handling the events.
   Templating is necessary because we can't anticipate the number or types
   of these virtual functions. */

template< typename delegate >
struct delegator {
    typedef std::list< delegate * > list; // host interface
    list delegates;

    typedef typename list::iterator delegate_id; // client interface

    delegate_id add( delegate *d )
        { return delegates.insert( delegates.end(), d ); }

    void remove( delegate_id d )
        { delegates.erase( d ); }

#if __cplusplus >= 201103L // C++11-only convenient host interface
    template< typename ... args >
    void operator() ( args && ... a ) {
        for ( auto d : delegates ) ( *d )( std::forward< args >( a ) ... );
    }
#endif
};

/* Abstract base class for all delegate bases. Registers and unregisters
   from the delegator, but doesn't define any event handler. */
template< typename derived >
struct delegate {
    typedef ::delegator< derived > delegator;

    delegator &source;
    typename delegator::delegate_id id;

    delegate( delegator &in_source )
        : source( in_source ),
        id( source.add( static_cast< derived * >( this ) ) ) {}

    virtual ~delegate() { source.remove( id ); }
};

/* Example delegate base. Defines an event handler which clients must implement.
   Other types of events might declare other bases. */
struct my_delegate_base : delegate< my_delegate_base > {
    typedef delegate< my_delegate_base > base;
    typedef base::delegator delegator;
    my_delegate_base( delegator &d ) : base( d ) {}

    virtual void operator() ( int ) = 0;
};

/* Example client class defines how to handle an event. */
struct my_delegate_impl : my_delegate_base {
    my_delegate_impl( delegator &d ) : my_delegate_base( d ) {}

    virtual void operator() ( int i ) {
        std::cout << i << '\n';
    }
}; 
```

看到它运行：[https ://ideone.com/IRp5rJ](https://ideone.com/IRp5rJ)

# ruby-on-rails-3 - 使用 RSpec 测试范围质量分配

> ID：14182703
> 
> 赞同：2
> 
> 时间：2013-01-06T13:43:07.713
> 
> 标签：ruby-on-rails-3, testing, rspec, mass-assignment

我有一个模型，其质量分配保护定义为：

```
attr_accessible :attachment, :body, :feed_id
attr_accessible :attachment, :body, :feed_id, :approved, :as => :admin 
```

代码在控制器中按预期工作，只允许`approved`在调用时进行质量分配

```
@post.update_attributes(params[:post], :as => :admin) 
```

我通常使用 shoulda 测试质量分配，如下所示：

```
it { should_not allow_mass_assignment_of(:approved) } 
```

但是，我找不到测试范围质量分配的方法，例如

```
it { should allow_mass_assignment_of(:approved, :as => :admin) } 
```

（这不起作用）。

有谁知道如何测试这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:16:21.677

对于 Rails > 3.1 试试

```
it { should allow_mass_assignment_of(:approved).as(:admin) } 
```

# javafx-2 - JavaFX 2 动画：根据 PathTransition 持续时间缩放节点

> ID：14182704
> 
> 赞同：1
> 
> 时间：2013-01-06T13:43:11.557
> 
> 标签：javafx-2

我想在 PathTransition 上更改节点的大小，从而确定节点在路径上的位置（持续时间）。请参阅：动画的[JavaFX 2 圆形路径作为动画](https://stackoverflow.com/questions/14171856/javafx-2-circle-path-for-animation)的示例。

节点的大小应该增长到到达路径的“中间”，然后缩小。我想知道动画没有 ​​EventHandler 但 onFinished 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:53:52.980

我在这个答案中更新了 Uluk 的示例，添加了一个 ParallelTransition，它在节点沿路径行进时对其进行缩放。对于路径的前半部分，节点的大小会增加。一旦节点位于路径的一半，它的大小就会缩小，直到它在圆的开始处达到它的原始大小。

动画在高速运行时确实有一种奇怪的前向运动模糊效果（你需要运行它才能看到这个），我无法真正解释。

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.scene.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.*;
import javafx.stage.Stage;
import javafx.util.Duration;

public class ArcToScalingDemo extends Application {

  private PathTransition pathTransitionEllipse;
  private ParallelTransition scalingCirclePathTransition;

  private void init(Stage primaryStage) {
    Group root = new Group();
    primaryStage.setResizable(false);
    primaryStage.setScene(new Scene(root, 600, 460));

    // Ellipse path example
    Rectangle rect = new Rectangle(0, 0, 40, 40);
    rect.setArcHeight(10);
    rect.setArcWidth(10);
    rect.setFill(Color.ORANGE);
    root.getChildren().add(rect);

    Path path = createEllipsePath(200, 200, 50, 100, 45);
    root.getChildren().add(path);

    pathTransitionEllipse = PathTransitionBuilder.create()
        .duration(Duration.seconds(4))
        .path(path)
        .node(rect)
        .orientation(PathTransition.OrientationType.ORTHOGONAL_TO_TANGENT)
        .cycleCount(Timeline.INDEFINITE)
        .autoReverse(false)
        .build();

    // Circle path example
    Rectangle rect2 = new Rectangle(0, 0, 20, 20);
    rect2.setArcHeight(10);
    rect2.setArcWidth(10);
    rect2.setFill(Color.GREEN);
    root.getChildren().add(rect2);

    Path path2 = createEllipsePath(400, 200, 150, 150, 0);
    root.getChildren().add(path2);

    PathTransition pathTransitionCircle = PathTransitionBuilder.create()
        .duration(Duration.seconds(2))
        .path(path2)
        .node(rect2)
        .orientation(PathTransition.OrientationType.ORTHOGONAL_TO_TANGENT)
        .cycleCount(Timeline.INDEFINITE)
        .autoReverse(false)
        .build();

    ScaleTransition scaleTransition = ScaleTransitionBuilder.create()
        .duration(pathTransitionCircle.getDuration().divide(2))
        .fromX(1)
        .fromY(1)
        .toX(3)
        .toY(3)
        .cycleCount(Timeline.INDEFINITE)
        .autoReverse(true)
        .build();

    scalingCirclePathTransition = ParallelTransitionBuilder.create()
        .children(pathTransitionCircle, scaleTransition)
        .node(rect2)
        .build();
  }

  private Path createEllipsePath(double centerX, double centerY, double radiusX, double radiusY, double rotate) {
    ArcTo arcTo = new ArcTo();
    arcTo.setX(centerX - radiusX + 1); // to simulate a full 360 degree celcius circle.
    arcTo.setY(centerY - radiusY);
    arcTo.setSweepFlag(false);
    arcTo.setLargeArcFlag(true);
    arcTo.setRadiusX(radiusX);
    arcTo.setRadiusY(radiusY);
    arcTo.setXAxisRotation(rotate);

    Path path = PathBuilder.create()
        .elements(
            new MoveTo(centerX - radiusX, centerY - radiusY),
            arcTo,
            new ClosePath()) // close 1 px gap.
        .build();
    path.setStroke(Color.DODGERBLUE);
    path.getStrokeDashArray().setAll(5d, 5d);
    return path;
  }

  @Override
  public void start(Stage primaryStage) throws Exception {
    init(primaryStage);
    primaryStage.show();
    pathTransitionEllipse.play();
    scalingCirclePathTransition.play();
  }

  public static void main(String[] args) {
    launch(args);
  }
} 
```

节点在路径上的位置不一定与动画中经过的时间的相对持续时间相同，因为节点可能不会以恒定速度行进。此外，在此示例中，节点的相对比例可能与这些值中的任何一个都不完全匹配。您可以为 ScaleTransition 定义一个自定义[插值](http://docs.oracle.com/javafx/2/api/javafx/animation/Interpolator.html#curve%28double%29)器，它可以让您将比例映射到取决于当前路径位置或动画持续时间的值，但这并不是真正必要的，因为在我看来，插值看起来很好。

这是另一个带有自定义插值器的示例，它将根据节点沿路径的位置按比例缩放节点，从而使节点在路径的中途处于最大比例。它依赖于对称的原始路径过渡中的插值函数。样本未经过彻底测试以确保完全正确。除非绝对必要，否则我会推荐前面的示例，而不需要自定义插值器。

```
public class ArcToInterpolation Demo extends Application {

  class HalfInterpolator extends Interpolator {
    final Interpolator source;

    HalfInterpolator(Interpolator source) {
      this.source = source;
    }

    @Override protected double curve(double t) {
      return t <= 0.5
          ? source.interpolate(0.0, 1.0, t) * 2
          : source.interpolate(0.0, 1.0, 1 - t) * 2;
    }
  }

  private ParallelTransition scalingCirclePathTransition;

  private void init(Stage primaryStage) {
    Group root = new Group();
    primaryStage.setResizable(false);
    primaryStage.setScene(new Scene(root, 600, 460));

    // Circle path example
    Rectangle rect2 = new Rectangle(0, 0, 20, 20);
    rect2.setArcHeight(10);
    rect2.setArcWidth(10);
    rect2.setFill(Color.GREEN);
    root.getChildren().add(rect2);

    Path path2 = createEllipsePath(400, 200, 150, 150, 0);
    root.getChildren().add(path2);

    PathTransition pathTransitionCircle = PathTransitionBuilder.create()
        .duration(Duration.seconds(10))
        .interpolator(Interpolator.EASE_BOTH)
        .path(path2)
        .node(rect2)
        .orientation(PathTransition.OrientationType.ORTHOGONAL_TO_TANGENT)
        .cycleCount(Timeline.INDEFINITE)
        .autoReverse(false)
        .build();

    ScaleTransition scaleTransition = ScaleTransitionBuilder.create()
        .duration(pathTransitionCircle.getDuration())
        .interpolator(new HalfInterpolator(pathTransitionCircle.getInterpolator()))
        .fromX(1)
        .fromY(1)
        .toX(4)
        .toY(4)
        .cycleCount(Timeline.INDEFINITE)
        .autoReverse(false)
        .build();

    scalingCirclePathTransition = ParallelTransitionBuilder.create()
        .children(pathTransitionCircle, scaleTransition)
        .node(rect2)
        .build();
  }

  private Path createEllipsePath(double centerX, double centerY, double radiusX, double radiusY, double rotate) {
    ... as in previous sample
  }

  @Override
  public void start(Stage primaryStage) throws Exception {
    init(primaryStage);
    primaryStage.show();
    scalingCirclePathTransition.play();
  }

  public static void main(String[] args) {
    launch(args);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:10:53.160

看起来你应该使用

public final ReadOnlyObjectProperty currentTimeProperty

PathTransition 类的。您可以在此属性的值更改时添加侦听器，当出现新值时，调用 double d = newDuration.toMillis()，并确定路径的哪一部分消失了，将 d 划分为动画的全部时间。

# php - 多个控制器/页面的相同路由

> ID：14182705
> 
> 赞同：1
> 
> 时间：2013-01-06T13:43:11.660
> 
> 标签：php, routes, laravel

我正在使用 Laravel 开发电子商务。这就是我所坚持的：

这是类别链接的样子：

> mysite.com/category_name
> 
> mysite.com/category_name *[/probable_sub_category_name]*

这就是产品链接的样子：

> mysite.com/product_name
> 
> mysite.com *[/probable_category_name]* *[/probable_sub_category_name]* /product_name

我这样设置我的路线：

```
Route::get(array('(:any)', '(:all)/(:any)'), array('before' => 'is_category', 'uses' => 'categories@index'));
Route::get(array('(:any)', '(:all)/(:any)'), array('before' => 'is_product', 'uses' => 'products@index')); 
```

如果我将产品路线放在首位，则类别链接会中断，如果我将类别路线放在首位，则产品链接会按预期中断。如何为两者使用相同的路由？

我的 PHP 版本是 5.3.10-1ubuntu3.4（说 phpinfo()）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:26:54.110

神奇的是 Controller::call() 方法。这是解决方案：

```
Route::get(array('(:any)', '(:all)/(:any)'), function () {

    // Current URI as array
    $parameters = Request::route()->parameters;

    // Checks if given parameter is a product's url value
    $check_if_product = function ($parameter) {
        $products = Product::where('url_title', '=', $parameter)->count('id');
        return (is_numeric($products) && $products > 0 ? true : false);
    };

    // Checks if given parameter is a category's url value
    $check_if_category = function ($parameter) {
        $categories = Category::where('url_title', '=', $parameter)->count('id');
        return (is_numeric($categories) && $categories > 0 ? true : false);
    };

    // If last parameter from URI belongs to a product
    if ($check_if_product(end($parameters)))
    {
        return Controller::call('products@index');
    }
    // If last parameter from URI belongs to a category
    elseif ($check_if_category(end($parameters)))
    {
        return Controller::call('categories@index');
    }
    else
    {
        return Response::error('404');
    }

}); 
```

# android - Android 定期检查互联网连接

> ID：14182708
> 
> 赞同：2
> 
> 时间：2013-01-06T13:43:26.433
> 
> 标签：android, webview, connectivity

我正在运行一个在特定 URL 上显示 webview 的 android 应用程序，我想检查我正在访问的应用程序服务器是否处于活动状态并且我可以查看 HTML，如果失败我应该终止 webview，这个检查应该是每 10秒（或其他），最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:50:19.873

创建计时器[（这里有信息）](http://developer.android.com/reference/java/util/Timer.html)，当计时器滴答时，ping 任何主机：

```
 URL url = new URL("http://microsoft.com");

    HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
    urlc.setRequestProperty("User-Agent", "Android Application:"+Z.APP_VERSION);
    urlc.setRequestProperty("Connection", "close");
    urlc.setConnectTimeout(1000 * 30); // mTimeout is in seconds
            urlc.connect();
    if (urlc.getResponseCode() == 200) {
        Main.Log("getResponseCode == 200");
            return new Boolean(true);
    }
    } catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
} catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    } 
```

如果返回 true ：连接处于活动状态。其他不活跃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:52:03.477

最好的方法是使用 AsyncTask，这样您的应用程序就不会冻结。

```
private class checkServer extends AsyncTask<Integer, Integer, Void> {

        @Override
        protected Void doInBackground(Integer... params) {
            questionRunning = true;

            //check if server is running

            //now wait 10.000ms (10sec) 
            try {
                Thread.sleep(params[0]);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // Update your layout here
            super.onPostExecute(result);

            //Do it again!
            new checkServer().execute(10000);

        }

        @Override
        protected void onProgressUpdate(Integer... progress) {

        }
    } 
```

如何调用您的 AsynTask：

```
new checkServer().execute(10000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:10:44.563

***使用-BroadCastReceiver-Way-实现高效且现实***

`As you're saying that you need to check the specific server for alive() or not?. Then it depends upon your choice. But always try to be general.`

**要接收互联网连接断开/上升，请侦听“ConnectivityManager.CONNECTIVITY_ACTION”操作。**

```
IntentFilter filter = new IntentFilter();
filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
getApplicationContext().registerReceiver(mNetworkStateIntentReceiver, filter); 
```

**每当连接发生变化时，即数据连接可能已连接或断开，您将收到此事件作为广播，因此在收到广播接收器时，请检查 internetconnect 连接并确定 internet 是打开还是关闭。**

```
 BroadcastReceiver mNetworkStateIntentReceiver = new BroadcastReceiver()
     {  
      @Override  
      public void onReceive(Context context, Intent intent) 
       {  
         if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION))
         {  

             NetworkInfo info = intent.getParcelableExtra(  
                     ConnectivityManager.EXTRA_NETWORK_INFO);  
             String typeName = info.getTypeName();  
             String subtypeName = info.getSubtypeName();  
              System.out.println("Network is up ******** "+typeName+":::"+subtypeName);  

             if( checkInternetConnection()== true )  
             {  
                    "Decide your code logic here...."  
              }  
          }  
        }
      }

private boolean checkInternetConnection() 
{  
 ConnectivityManager conMgr = (ConnectivityManager) mContext.getSystemService(mContext.CONNECTIVITY_SERVICE);  
 // ARE WE CONNECTED TO THE NET  
 if (conMgr.getActiveNetworkInfo() != null  && conMgr.getActiveNetworkInfo().isAvailable()  &&conMgr.getActiveNetworkInfo().isConnected())
  {  
   return true;  
  } 
 else
  {  
     return false;  
  }    
} 
```

希望它可以在某个地方对您有所帮助！

# .net - 使用 t4 的 Firebird 数据访问

> ID：14182713
> 
> 赞同：3
> 
> 时间：2013-01-06T13:43:38.373
> 
> 标签：.net, c#-4.0, 64-bit, firebird, t4

我正在使用 t4 模板为 Firebird 数据库（嵌入式）制作数据访问层

我正在研究 64 位系统。编译/调试选项 AnyCPU (Windows 7 64bit) Visual Studio 2010

我在 C# 环境中编写代码并对其进行测试，它与 firebird.client 和 fembed 一起工作正常。

但是当我将相同的代码放入 t4 模板并执行时，我收到以下错误消息。

> Blockquote 错误 1 ​​运行转换：System.BadImageFormatException：尝试加载格式不正确的程序。（HRESULT 异常：0x8007000B）在 FB_965910463_Class.isc_attach_database(IntPtr[] statusVector, Int16 dbNameLength, Byte[] dbName, Int32& dbHandle, Int16 parmBufferLength, Byte[] parmBuffer) 在 FB_965910463_Class.IFbClient.isc_attach_database , Byte[] dbName, Int32& dbHandle, Int16 parmBufferLength, Byte[] parmBuffer) 在 FirebirdSql.Data.Client.Native.FesDatabase.Attach(DatabaseParameterBuffer dpb, String dataSource, Int32 port, String database) 在 FirebirdSql.Data.FirebirdClient.FbConnectionInternal .Connect() 在 FirebirdSql.Data.FirebirdClient.FbConnectionPool.Create() 在 FirebirdSql.Data.FirebirdClient。

# bash - 我的 shell 脚本有问题...（grep）

> ID：14182716
> 
> 赞同：1
> 
> 时间：2013-01-06T13:44:27.387
> 
> 标签：bash, shell, grep

很抱歉发布关于我昨天正在编写的同一脚本的另一个问题。

最初我在使用带空格的路径时遇到了问题`cd`，尽管现在已经解决了。问题是，如果给脚本提供了第三个参数，它将在之前找到的文件中搜索它，然后打印文件位置以及找到该术语的行号。

出于某种原因`grep`，我不喜欢包含空格的文件的路径（再次正确？-.-），即使我已经双引号了我正在输入的变量`grep`。

有没有人对如何解决它有任何想法？

```
#!/bin/bash

path = $1 #1st arg is the path to be searched
regex = $2 #2nd arg is a regular expression
searchTerm = $3 #3rd arg is an optional search term
startDir = `pwd` #Stores the starting path
getDirs()
{ #Function to get the directories
    for i in "$1"
    ; do
        if [ -d "$i" ]; then
            echo "$i" >> temp.txt
            getDirs "$i"
        fi
    done
}

getFiles() {        # Function to get files matching the regex

    while IFS= read -r path; do # While there is a line, read it, backslash is not a delimiter
        cd "$path"

        temp=`ls -1 | grep "$regex"`    #List the contents of the dir. Store only files that match the regex

        for j in $temp
        do
            echo "$path/$j" # For every file stored, print its location
        done
        cd $startDir
    done < temp.txt # Read from temp.txt
}

searchFiles() { # Function to search within files

    for a in $output1 # For every file found
    do
        out=`grep -n "$searchTerm" "$a" | cut -d: -f 1` # Find the line numbers in which it is present, stop showing after 1st :
        for i in $out   # For every line found
        do
            echo "$a: line $i"  # Print the file location, and the line numbers of the terms
        done
    done
}

numArgs=$#

echo "$path" >> temp.txt
getDirs $path   # Getting directories to search

output1=`getFiles`

cd $startDir

if [ $numArgs == 3 ] # If a search term is specified
then
    searchFiles # Then search the files for it
else
    echo "$output1" # Otherwise, just print the location of the files
fi

rm temp.txt # Removing temporary files
exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:30:52.143

您的脚本有很多问题，包括未引用和错误引用的变量。以下是您的 getFiles 函数至少需要编写的方式（还有其他问题，例如是否真的需要 grep 和使用 echo，但我没有触及这些，所以这突出了严重的问题）：

```
getFiles() {        # Function to get files matching the regex

    while IFS= read -r path; do # While there is a line, read it, backslash is not a delimiter

        if cd "$path"; then

            oIFS="$IFS" # save then reset and restore IFS to avoid work splitting on spaces, except newlines.
            IFS=$'\n' tempA=( $(ls -1 | grep "$regex") )    #List the contents of the dir. Store only files that match the regex
            IFS="$oIFS"

            for j in "${tempA[@]}"
            do
                echo "$path/$j" # For every file stored, print its location
            done
            cd "$startDir"

        fi

    done < temp.txt # Read from temp.txt
} 
```

请注意，“temp”现在是一个数组，而不是字符串，因此您可以一次访问它包含的文件名，并且仍然引用它们中的每一个。我只是将它重命名为 tempA 以使其明显是一个数组。

因此，更新您的脚本以使用数组而不是字符串来保存文件名，如上所示，去掉分配周围的空格，引用所有变量，使用 $(...) 而不是反引号，然后更改`grep -n "$searchTerm" "$a" | cut -d: -f 1`为`awk -v st="$searchTerm" '$0~st{print NR}' "$a"`then如果您仍然有问题，请重新发布。

# javascript - 使用 Javascript 设置 onclick 时，onclick 代码正在运行

> ID：14182724
> 
> 赞同：0
> 
> 时间：2013-01-06T13:45:38.093
> 
> 标签：javascript

单击 div 时，它应该更改 div 中的文本（使用 innerHTML 完成），但我还想更改 div 的 onclick 功能

这是我的 JS 代码

```
document.getElementById('select_image').onclick = document.upload.submit(); 
```

当点击 div 时，而不是点击隐藏文件上传 div（它之前做过），它会立即提交表单

如果我在浏览器上按回，它会显示带有更新文本的 div

谢谢

编辑：看起来不是很清楚

我有一个 div (select_image)，单击它时，它在隐藏的输入文件元素上使用 JS (.click)，因此您可以选择一个文件。

这个 div 正在使用 onclick="function()" 来运行一个更改该 div 中文本的函数，我还希望它更改 onclick 事件以这次实际提交表单（而不是单击隐藏文件输入) 选择文件时。

我正在使用 onchange="" 事件在文件输入上运行以下 JS 函数

```
function selected_image(image) {
    document.getElementById('select_image').innerHTML = 'click here to upload <span id="selected">' + image.replace('C:\\fakepath\\', '') + '</span>';
    document.getElementById('select_image').onclick = document.upload.submit();
}

<div id="select_image" onclick="document.forms['upload'].elements['image'].click();">click here to select your image</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:14:06.637

中的括号`submit();`会立即执行该函数。现在您正在尝试将返回值分配`submit`给`onclick`属性。一个可行的解决方案是使用匿名函数来处理事件。

```
document.getElementById('select_image').onclick = function () {
    document.upload.submit();
    return;
} 
```

# javascript - JavaScript：在第 n 个斜杠后剪切 URL

> ID：14182726
> 
> 赞同：3
> 
> 时间：2013-01-06T13:45:54.147
> 
> 标签：javascript, jquery

我有像这样的网址

```
http://www.domain.com/dir/dir2/dir3/dir4/#tag 
```

或者

```
http://www.domain.com/dir/dir2/dir3/dir4 
```

现在我只需要获取 dir3 之前的 url，之后什么都不需要……（或«字符串中第六个斜杠之前的所有内容»）

```
http://www.domain.com/dir/dir2/dir3/ 
```

这怎么能用 JavaScript 来完成呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T13:50:23.677

尝试这个：

```
'http://www.domain.com/dir/dir2/dir3/dir4/#tag'
  .split('/')
  .slice(0,6).join('/'));
 //=> http://www.domain.com/dir/dir2/dir3 
```

或辅助功能：

```
function cutUrl(url,n){
    return url.split('/').slice(0,n).join('/'));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T13:52:32.990

这里不需要 jQuery，JavaScript 支持正则表达式：

```
"http://www.domain.com/dir/dir2/dir3/dir4".match(/([^/]*\/){6}/)[0] 
```

一种更安全的方法是（在模式不匹配的情况下）：

```
function cutUrl(str) {
    var matched = str.match(/([^/]*\/){6}/);
    return matched ? matched[0] : str/* or null if you wish */;
} 
```

然后调用`cutUrl("http://www.domain.com/dir/dir2/dir3/dir4")`。

# asp.net - 页面加载返回到空白页面

> ID：14182730
> 
> 赞同：2
> 
> 时间：2013-01-06T13:46:06.200
> 
> 标签：asp.net, microsoft-expression-web

我的页面有什么问题？当我试图加载我的页面时。它返回到空白页。怎么了？

请查看我的代码，它在浏览器中返回 null 或空白页。

它甚至没有显示任何错误。就在我尝试加载它时。我的浏览器上显示全白。

这是我的代码：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace = "System.Data.SqlClient" %>

<script runat="server" type="css">

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        bind();
    }
}
protected void bind()
{
    PendingRecordsGridview.DataSourceID = "";
    PendingRecordsGridview.DataSource = sd1;
    PendingRecordsGridview.DataBind();
 }
protected void PendingRecordsGridview_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "accept")
    {
        Session["id"] = e.CommandArgument.ToString();
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            con.Open();
            SqlCommand cmd1 = new SqlCommand("INSERT INTO tb2 (id, name) SELECT id, name FROM tb1 where id='"+Session["id"].ToString()+"'", con);
            SqlCommand cmd2 = new SqlCommand("delete from tb1 where id='"+Session["id"].ToString()+"'", con);
            cmd1.ExecuteNonQuery();
            cmd2.ExecuteNonQuery();
            bind();
    }
}
</script>
<form id="form1" runat="server">
<asp:GridView ID="PendingRecordsGridview" runat="server" AutoGenerateColumns="False" DataKeyNames="id" onrowcommand="PendingRecordsGridview_RowCommand" DataSourceID="sd1">
        <Columns>
            <asp:templatefield HeaderText="Accept">
                <ItemTemplate>
                    <asp:Button CommandArgument='<%# Bind("id") %>' ID="Button1" runat="server" CausesValidation="false" CommandName="accept" Text="Accept" />
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="name" SortExpression="name">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("name") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("name") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="id" SortExpression="id">
                <EditItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("id") %>'>
                    </asp:Label>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("id") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="sd1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>"
        SelectCommand="SELECT * FROM [tb1]">
</asp:SqlDataSource>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:52:42.093

在您的绑定方法中，您将清除 Grid 的 DataSourceID 并设置 DataSource 属性。

DataSource 属性需要实际数据。

您可能应该将其更改为。

```
 PendingRecordsGridview.DataSourceID = "sd1";
    PendingRecordsGridview.DataBind(); 
```

或者注释掉整个方法，因为它并没有真正做任何有用的事情。

# ruby-on-rails - Rails 控制台无法在 ubuntu 12.04 上启动

> ID：14182734
> 
> 赞同：1
> 
> 时间：2013-01-06T13:46:46.613
> 
> 标签：ruby-on-rails, ubuntu, console, terminal, command

我正在使用 Rails 服务器，没有任何问题 ubuntu 12.04。但我想在终端上的控制台尝试一些方法，我使用

```
rails console 
```

命令。但它不起作用。输出在这里：

```
/var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load': /home/mehmet/www/tutorial/config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_tutorial_session'
                              ^
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:588
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:587:in `each'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:587
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `send'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/mehmet/www/tutorial/config/environment.rb:5
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/application.rb:103:in `require'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/application.rb:103:in `require_environment!'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:40
    from script/rails:6:in `require'
    from script/rails:6
mehmet@vefanet:~/www/tutorial$ rails console
/var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load': /home/mehmet/www/tutorial/config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_tutorial_session'
                              ^
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:588
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:587:in `each'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:587
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `send'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/mehmet/www/tutorial/config/environment.rb:5
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/application.rb:103:in `require'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/application.rb:103:in `require_environment!'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:40
    from script/rails:6:in `require'
    from script/rails:6 
```

那么，你有什么想法吗？我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:50:18.390

看起来有问题的文件使用了 ruby​​ 1.9 引入的新哈希语法。看起来您正在使用 ruby​​ 1.8 运行该应用程序。

1.) 您可以安装和使用 ruby​​ 1.9 2.) 您可以更改文件的哈希语法。Rails 3.2.9 应该与 ruby​​ 1.8.7 一起运行，所以希望这是唯一有问题的地方。

哈希语法的区别是：

**1.9**

```
{key: 'value'} 
```

**1.8**

```
{:key => 'value'} 
```

# r - R似乎将我的数据乘以-1

> ID：14182735
> 
> 赞同：1
> 
> 时间：2013-01-06T13:46:55.623
> 
> 标签：r

每次我尝试将数据库上传到 R（文件位于 .xls、.csv 或 .txt 中）时，它都会对其进行转换并在文件的每个条目前放置一个负号。我真的不明白为什么。有人可以帮助我吗？

```
> data<-- read.table("C:\\Users\\Géraldine\\Documents\\R\\RS_simplified.txt", header = TRUE, sep="\t")
> data
    Year   Index       r Indexcorr   rcorr
1  -1957 -100.00  0.0000   -100.00  0.0000
2  -1958  -92.16  0.0784    -89.23  0.1077
3  -1959 -123.39 -0.3389   -125.85 -0.4103
4  -1960 -125.55 -0.0175   -121.48  0.0347
5  -1961 -135.18 -0.0767   -135.28 -0.1136
6  -1962 -139.47 -0.0318   -139.16 -0.0286
7  -1963 -140.72 -0.0089   -140.61 -0.0104
8  -1964 -141.97 -0.0089   -142.07 -0.0104
9  -1965 -169.44 -0.1935   -169.27 -0.1915
10 -1966 -189.45 -0.1181   -168.85  0.0025
11 -1967 -202.26 -0.0676   -180.07 -0.0665
12 -1968 -232.17 -0.1479   -218.37 -0.2127
13 -1969 -239.08 -0.0298   -220.90 -0.0116
14 -1970 -217.57  0.0900   -192.44  0.1288
15 -1971 -256.25 -0.1778   -224.01 -0.1640
16 -1972 -307.22 -0.1989   -293.22 -0.3089
17 -1973 -402.77 -0.3110   -354.73 -0.2098
18 -1974 -363.61  0.0972   -316.75  0.1071
19 -1975 -290.66  0.2006   -250.89  0.2079
20 -1976 -261.31  0.1010   -223.75  0.1082
21 -1977 -260.68  0.0024   -224.25 -0.0022
22 -1978 -298.69 -0.1458   -256.07 -0.1419
23 -1979 -322.86 -0.0809   -272.49 -0.0641
24 -1980 -324.22 -0.0042   -270.26  0.0082
25 -1981 -283.94  0.1243   -238.83  0.1163
26 -1982 -237.56  0.1634   -197.49  0.1731
27 -1983 -243.21 -0.0238   -202.62 -0.0260
28 -1984 -247.40 -0.0172   -212.10 -0.0468
29 -1985 -271.17 -0.0961   -230.80 -0.0882
30 -1986 -342.76 -0.2640   -291.75 -0.2640
31 -1987 -471.38 -0.3753   -406.86 -0.3946
32 -1988 -575.35 -0.2206   -492.07 -0.2094
33 -1989 -713.58 -0.2403   -627.57 -0.2754
34 -1990 -757.79 -0.0620   -666.68 -0.0623
35 -1991 -513.24  0.3227   -420.25  0.3696
36 -1992 -462.02  0.0998   -374.26  0.1095
37 -1993 -392.01  0.1515   -319.51  0.1463
38 -1994 -389.41  0.0066   -323.27 -0.0118
39 -1995 -394.58 -0.0133   -328.17 -0.0152
40 -1996 -392.66  0.0049   -324.78  0.0103
41 -1997 -392.60  0.0002   -332.02 -0.0223
42 -1998 -403.65 -0.0282   -344.60 -0.0379
43 -1999 -424.54 -0.0517   -364.60 -0.0580
44 -2000 -411.94  0.0297   -361.28  0.0091
45 -2001 -387.26  0.0599   -342.86  0.0510
46 -2002 -416.88 -0.0765   -369.08 -0.0765
47 -2003 -466.69 -0.1195   -405.40 -0.0984
48 -2004 -518.74 -0.1115   -456.07 -0.1250
49 -2005 -530.76 -0.0232   -479.76 -0.0519
50 -2006 -588.51 -0.1088   -557.62 -0.1623
51 -2007 -723.27 -0.2290   -699.91 -0.2552 
```

非常感谢您的关心。

热拉尔丁

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-06T13:49:13.310

当你写

```
> data<-- read.table("C:\\Users\\....) 
```

你真的在写

```
> data <- - read.table("C:\\Users\\....) 
```

或等效地

```
> data <- (-1) * read.table("C:\\Users\\....) 
```

只需删除第二个破折号，您的数据就不会乘以 -1。R 只是按照你说的去做。

# javascript - 循环奇怪行为的Javascript

> ID：14182739
> 
> 赞同：0
> 
> 时间：2013-01-06T13:47:30.010
> 
> 标签：javascript, jquery, loops, for-loop

我发现我得到这个输出很奇怪：

```
Wait..
Request 2 Complete.
Request 2 Complete. 
```

在一个简单的 for 循环中：

```
for (var i = 0, j = urls.length; i < j; i += 1) {
    $.ajax({
        url: urls[i],
        dataType: 'jsonp',
        complete: function() {
            log.append('Request ' + i + ' Complete.' + "\n");
            if (i == (j - 1)) {
                log.append('Done.');
            }
        }
    });

} 
```

为什么`i`总是等于`2`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T13:51:17.143

这是因为`i`在您的 ajax 请求中的两个调用都引用了相同`i`的`for`-loop。在某个时间点，当请求完成（并因此`i`被访问）时，循环已终止并`i`具有最终值，此处为`2`.

我想你会寻找这样的东西：

```
for (var i = 0, j = urls.length; i < j; i += 1) {
  !function( i ){
    $.ajax({
        url: urls[i],
        dataType: 'jsonp',
        complete: function() {
            log.append('Request ' + i + ' Complete.' + "\n");
            if (i == (j - 1)) {
                log.append('Done.');
            }
        }
    });
  }( i );
} 
```

通过将 的值传递`i`给立即执行的函数，您可以创建相应值的副本`i`以在 ajax-requests 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:52:26.300

尝试使用

```
 async = false;
in ajax request 
```

# php - 启用多视图的 Apache Clean-Urls

> ID：14182741
> 
> 赞同：8
> 
> 时间：2013-01-06T13:47:38.793
> 
> 标签：php, apache, .htaccess, mod-rewrite, apache2

我正在尝试允许 Clean-Urls，启用 MultiViews。

我拥有的所有页面都在根文件夹本身中。

我正在努力实现以下目标：

```
(current-status -> what I am trying to achieve)

 1\. foo.com/services.php -> foo.com/services
 2\. foo.com/services == foo.com/services/
 3\. foo.com/services.php/second-level/ == foo.com/services/second-level 
```

`services`不是文件夹，**我** 炸开`$_SERVER['PATH_INFO']`得到二级路径数据。

我已经实现了第一个，但是当我启用`MultiViews`、使用`.htaccess`文件并编写重写时它失败了。

```
Options +Indexes +FollowSymLinks -MultiViews
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) $1.php [L] 
```

（这显然会失败，因为它会将请求更改为 services/second-level.php）。我知道我可以在 中编写多个重写`.htaccess`，并有条件地重定向。

但奇怪的事实是，在实时环境（共享主机）上，它正在工作，根文件夹中**没有**任何`.htaccess`文件。由于它是共享主机，我无法读取配置文件。

`apache.conf`关于我应该更改（或`*.conf`）什么配置以实现上述目标的任何想法？

如果重要的话，我正在使用`Apache/2.2.22`，并且这个问题在更新后开始发生。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T18:38:26.277

我终于想出了如何解决它。

这可行，完全删除`.htaccess`文件，并更改`Virtual Directory`以保留以下设置：

```
<VirtualHost *:80>
    ServerAdmin my-email-id
    ServerName foo.bar
    DocumentRoot /var/www/sites/foo/

    <Directory /var/www/sites/foo/>
        Options +FollowSymLinks +MultiViews +Indexes
        DirectoryIndex index.php
        AddType application/x-httpd-php .php
    </Directory>

</VirtualHost> 
```

这有助于我让所有页面正常工作，就像它们在服务器上工作一样，没有任何重写条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T23:51:22.390

不使用 .php 扩展名且不使用[MultiViews](http://httpd.apache.org/docs/current/mod/mod_negotiation.html)的清理 URL 。

一个灵活的 Web 环境，使用[mod_userdir](http://httpd.apache.org/docs/current/mod/mod_userdir.html)和[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)支持虚拟子域。

允许以下 url 布局

*   /var/www/sites/www/services.php
    *   `http://foo.bar/services.php/second-level/`
    *   `http://foo.bar/services/second-level/`
    *   `http://www.foo.bar/services/second-level/`
    *   `http://127.0.0.1/services/second-level/`
*   /var/www/sites/www/admin/login.php
    *   `http://foo.bar/admin/login.php/foo`
    *   `http://foo.bar/admin/login/foo`
    *   `http://www.foo.bar/admin/login/foo`

注意有或没有前缀 www。是平等的，因为 www。今天已经过时了...但是现在您也可以通过在其中添加一个文件夹来托管虚拟子域`/var/www/sites/`（记住 DNS）

*   /var/www/sites/images/imgpass.php
    *   `http://images.foo.bar/imgpass.php/photo.jpg`
    *   `http://images.foo.bar/imgpass/photo.jpg`
    *   `http://www.images.foo.bar/imgpass/photo.jpg`
    *   `http://127.0.0.1/~images/imgpass/photo.jpg`

...依此类推，但如果 /var/www/sites/images/imgpass 本身存在则跳过。

我正在使用一个多用户环境，其中每个用户都有自己的 webroot 和子域。

/etc/apache2/sites-enabled/foo.bar.conf：

```
<VirtualHost *:80>
  ServerAdmin my-email-id
  ServerName foo.bar
  ServerAlias 127.0.0.1 *.foo.bar

  # The default web-root if no subdomain is given
  DocumentRoot /var/www/sites/www/

  UserDir /var/www/sites/*
  <Directory /var/www/sites/*>
            Order allow,deny
            Allow from all
            DirectoryIndex index.php index.html
            Options -MultiViews -Indexes

            # MultiViews workaround with 1 level subdir support
            RewriteEngine On

            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} ^(\/var\/www\/sites\/.+(\/[^\/]+){2}).*
            RewriteCond %1.php -f
            RewriteRule ^\/var\/www\/sites\/(.+)((?:\/[^\/]+){2})(.*) /~$1$2.php$3 [L]

            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} ^(\/var\/www\/sites\/.+(\/[^\/]+){1}).*
            RewriteCond %1.php -f
            RewriteRule ^\/var\/www\/sites\/(.+)((?:\/[^\/]+){1})(.*) /~$1$2.php$3 [L]
   </Directory>

   # Force all requests in background to UserDir compatible requests
   RewriteEngine on
   RewriteMap      lc                      int:tolower

   RewriteCond     %{REQUEST_FILENAME}     !^/~
   RewriteCond     %{HTTP_HOST}            ^(www\.)?(.+)\.foo\.bar$
   RewriteRule     /(.*)                   /~${lc:%2}/$1                   [PT,L]

</VirtualHost> 
```

此代码不是 testet，因为我的文件系统结构与最初的示例完全不同。所以我即时转换了我的配置以适应这个示例结构。

注意配置不完整。您需要根据自己的需要自行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-22T16:40:19.707

虽然 MultiViews 可以用于此目的，*但不要*向 PHP 文件添加任意 MIME 类型以让 MultiViews 为它们提供服务，就像[接受的答案](https://stackoverflow.com/a/14306831/1709587)和互联网上的许多其他来源所建议的那样：

```
# Bad code - don't do this!
Options +MultiViews
AddType application/x-httpd-php .php 
```

我在[https://stackoverflow.com/a/24598848/1709587](https://stackoverflow.com/a/24598848/1709587)详细解释的这个 hack似乎有效，但实际上已损坏；`Accept`每当服务器接收到带有不包含的标头的请求时，它将失败`*/*`。

相反，干净的解决方案是使用该[`MultiviewsMatch`](https://httpd.apache.org/docs/2.4/mod/mod_mime.html#multiviewsmatch)指令告诉 Apache 提供`.php`文件是有效的，而不管请求的`Accept`和标头如何：`Accept-Language`

```
# Good code - use this instead!
Options +MultiViews
<Files "*.php">
    MultiviewsMatch Any
</Files> 
```

# objective-c - 持久存储的核心数据错误

> ID：14182743
> 
> 赞同：4
> 
> 时间：2013-01-06T13:48:07.267
> 
> 标签：objective-c, ios, xcode, core-data

我正在尝试使用 Core Data 从模型中加载简单数据并将其放入表视图中。这是我的持久存储的以下代码：

```
//AppDelegate.m

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
 {
    if (__persistentStoreCoordinator != nil)
 {
    return __persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"vofasmmmnmgd.sqlite"];

if (![[NSFileManager defaultManager] fileExistsAtPath:[storeURL path]]) {
    NSURL *preloadURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"CoreDataSQLite" ofType:@"sqlite"]];
    NSError* err = nil;

    if (![[NSFileManager defaultManager] copyItemAtURL:preloadURL toURL:storeURL error:&err]) {
        NSLog(@"Oops, could copy preloaded data");
    }
}

NSError *error = nil;
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
{

    /* Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.

     Typical reasons for an error here include:
     * The persistent store is not accessible;
     * The schema for the persistent store is incompatible with current managed object model.
     Check the error message to determine what the actual problem was.

     If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter:
     [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

     Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.
     */

    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
 }

  return __persistentStoreCoordinator;
} 
```

如您所见，我正在从 sqlite 数据库预加载数据。一切都很完美。它能够从模型中提取数据并正确显示。

**但**

当我为应用程序的最后一部分将第二个实体添加到同一模型中时，情况发生了变化。应用程序决定在“abort();”上崩溃 说以下：

```
"The model used to open the store is incompatible with the one used to create the store"; 
```

现在这是一个简单的解决方法，因为我通过 Google 研究发现了这一点。转到应用程序并将其删除，然后将重置所有数据库的数据并让它重新加载。但是我已经这样做了，它仍然无法正常工作。这是我尝试过的所有方法，结果仍然相同：

*   删除应用程序
*   在 iPhone 模拟器上重置内容和设置
*   将 storeURL 的名称更改为不同于其原始值的名称。
*   删除上面代码注释中列出的商店 URL
*   清理项目

我得出的结论是，这是因为我添加了另一个实体，因为当我删除该实体时，它运行完美并恢复正常而没有任何问题。

我不知道发生了什么非常令人沮丧，因为我不知道如何解决这个问题。谷歌已经没有解决这个问题的办法了，所以我想我会在奇妙的***Stack Overflow***上找到一个奇迹般的解决方案来结束这种挫败感。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T14:02:11.413

动机很简单。当你修改模型时，Core Data 不知道如何映射它。

直接来自[核心数据文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

> 因此，更改模型将使其与之前创建的商店不兼容（因此无法打开）。如果您更改模型，则需要将现有商店中的数据更改为新版本 - 更改商店格式称为迁移。

如果你设置`YES`为`NSMigratePersistentStoresAutomaticallyOption`和`NSInferMappingModelAutomaticallyOption`你应该没问题。这也称为[轻量级](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)迁移。

```
NSMutableDictionary *options = [NSMutableDictionary dictionary];
[options setValue:[NSNumber numberWithBool:YES]
            forKey:NSMigratePersistentStoresAutomaticallyOption];
[options setValue:[NSNumber numberWithBool:YES]
           forKey:NSInferMappingModelAutomaticallyOption];
NSPersistentStore *store = nil;
store = [coordinator addPersistentStoreWithType:NSSQLiteStoreType
                                        configuration:nil
                                                  URL:storeURL
                                              options:options
                                                error:&error]; 
```

**编辑**

只需将`options`字典传递给`addPersistentStoreWithType:configuration:URL:options:error`以下代码段中创建的内容。

```
NSMutableDictionary *options = [NSMutableDictionary dictionary];
[options setValue:[NSNumber numberWithBool:YES]
           forKey:NSMigratePersistentStoresAutomaticallyOption];
[options setValue:[NSNumber numberWithBool:YES]
           forKey:NSInferMappingModelAutomaticallyOption];
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {

} 
```

# php - 如果我使用 url 重写，是否需要更改文字路径？

> ID：14182747
> 
> 赞同：0
> 
> 时间：2013-01-06T13:48:37.617
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

好的，经过多次错误尝试后，我能够掌握重定向，现在 CSS 文件没有获取路径，之前的路径是

目录结构

```
<base>
   <stylesheets>
      default.css
   </stylesheets>
   home.php
   .htaccess file
</base>

localhost/my_website/stylesheets/default.css 
```

我曾经把它写成

```
<link href="stylesheets/core.css" rel="stylesheet" type="text/css" /> 
```

在`home.php`

但是在url重写后路径丢失了`home.php`，假设`stylesheet`文件夹就像

```
home/stylesheets/core.css 
```

所以我手动将其更改为

```
<link href="../stylesheets/core.css" rel="stylesheet" type="text/css" /> 
```

它起作用了，这是否意味着我需要像这样更改每个 URL？

我也需要更改`header()`路径吗？现在他们就像

```
header('Location: home.php?page=dashboard'); 
```

至

```
header('Location: home/?page=dashboard'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:04:48.713

```
header('Location: home/dashboard/'); 
```

如果您在 .htaccess 中对以下值进行了更改，则可以使用它

.htaccess

```
RewriteRule ^(.*)$ home.php?page=$1 [L,QSA] 
```

如果您的 .htaccess 中有上述代码，那么您可以使用建议的顶部代码。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:09:58.587

您可以为您的 css 和图像使用绝对路径。

```
/stylesheets/core.css 
```

或者您可以使用[基本 html 标记](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)。

我不确定重定向路径。

# css - 下拉菜单中的时尚滚动条

> ID：14182752
> 
> 赞同：0
> 
> 时间：2013-01-06T13:49:05.790
> 
> 标签：css, drop-down-menu, menu, scrollbars

我有一个很长的下拉菜单。我使用了溢出属性来滚动它......但它看起来不太好......请建议我如何为滚动条提供好的 CSS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:04:40.560

尝试使用[jScrollPane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)（jquery 插件）而不是默认的浏览器滚动条。

示例：[http ://www.kelvinluck.com/assets/jquery/jScrollPane/examples.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:09:45.357

在现代浏览器中，您只能使用专有的 css 属性来设置滚动条的样式。以下是可用的 -webkit 属性的链接：http: [//css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

如果你想要一个更跨浏览器的解决方案，你将不得不使用一些 JS。这是我之前使用过的一个插件，它工作得很好并且很容易定制：[http](http://www.dynamicdrive.com/dynamicindex11/facescroll/index.htm) ://www.dynamicdrive.com/dynamicindex11/facescroll/index.htm 它就像 Facebook 上的滚动条一样，非常适合下拉菜单情景。

# java - 发布订阅java的多个发布者

> ID：14182753
> 
> 赞同：1
> 
> 时间：2013-01-06T13:49:06.930
> 
> 标签：java, xmpp, publish-subscribe, smack

1.  在我的问题被标记为非真实问题后尝试。

这是我正在尝试做的事情：

1.  我使用名为“服务器”的用户创建一个具有开放 Accessmodel 的节点作为示例

    `

    ```
    ConfigureForm form = new ConfigureForm(FormType.submit);
    form.setPersistentItems(false);

    form.setDeliverPayloads(true);
    form.setAccessModel(AccessModel.open);
    MyNode = (LeafNode) manager.createNode(nodeName);` 
    ```

2.  我使用另一个名为..“测试”的用户。我得到了节点，我正在尝试添加一个带有内容的有效负载项

    ```
     try {

                myNode = (LeafNode) manager.getNode(nodeName);

                System.out.println("works");
            } catch (XMPPException e) {
                System.out.println("works not");
                e.printStackTrace();
            }

            SimplePayload payload = new SimplePayload("session",
                    "pubsub:NewNode:session",
                    "<sessionId>testcontent</sessionId>");

            // putting null for id means you let server generate id
            PayloadItem<SimplePayload> item = new PayloadItem<SimplePayload>(null, payload);

                myNode.publish(item); 
    ```

所以..当我发布节点时，没有项目连接到节点（作为两个用户）。当我使用 myNode.send(item); 当我是用户“测试”时，我无法使用发送，因为该用户没有创建节点。结果将是一个禁止（403）错误。我在想也许问题是，publish() 是一个异步调用..

有谁知道这个的解决方案？或其他方式？

# go - 超过 uint8 切片的范围？

> ID：14182756
> 
> 赞同：4
> 
> 时间：2013-01-06T13:49:18.410
> 
> 标签：go

*编辑这是由于我的一个愚蠢的错误，但这个问题值得保留，以防其他人这样做。*

我希望这可行：

```
var xs []uint8
var x uint8
for x = range xs {

} 
```

但我得到了错误：

```
cannot assign type int to x (type uint8) in range 
```

即（据我所知）`range`，即使它在 的切片上运行`uint8`，它也试图`int`用作迭代值。

我查看了语言规范，相关位：

```
Range expression                          1st value          2nd value (if 2nd variable is present)

array or slice  a  [n]E, *[n]E, or []E    index    i  int    a[i]       E 
```

所以我希望它是`E`“参数化类型”*，在这种情况下`uint8`不是`int`。

我是否抓住了棍子的错误一端？是否有一些我错过的文档？`uint8`或者我真的不能用`uint8`变量迭代切片吗？

*我知道它不是真正的通用参数化类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T15:00:30.630

`range`返回一个集合的索引，并可能返回该位置的值：

> **range 关键字**range 关键字允许您遍历列表中的项目，例如数组或地图。为了理解它，您可以将 range 关键字转换**为**. 当与数组和切片一起使用时，它返回项目的整数索引。（[教程](http://golangtutorials.blogspot.de/2011/06/control-structures-go-for-loop-break.html)）

示例代码：

```
package main

import "fmt"

func main() {
    var xs []uint8 = []uint8{255, 254, 253}
    var idx int
    var ui8 uint8
    for idx, ui8 = range xs {
        fmt.Println(idx, ui8)
    }
} 
```

输出：

```
0 255
1 254
2 253 
```

**PS：**

也许看看 Javascript 会让 Go 的方法不那么奇怪：

```
% a = [255, 254, 253]
255,254,253
% for (x in a) { print(x, " ", a[x]); }
0 255
1 254
2 253 
```

# javascript - 根据关键字查找特定元素并推送到数组

> ID：14182760
> 
> 赞同：1
> 
> 时间：2013-01-06T13:49:30.293
> 
> 标签：javascript

我正在尝试查找所有输入元素，并根据我想要搜索 id 以匹配特定关键字的元素的 id。如果找到匹配项，我想将元素放入数组中`targetNodse`。该变量`nodes`包含所有输入，当我记录我得到的数组时，`[-1, -1, 0, 0]`它告诉我它找到了带有关键字的特定输入元素`survey-answer`。但是我如何访问元素属性，而不仅仅是告诉我它找到了它？

**HTML**

```
<input type="radio" id="poll-answer-8234" name="poll_430" value="8234">
<input type="radio" id="poll-answer-9234" name="poll_430" value="9234">  
<input type="radio" id="survey-answer-7866" name="poll_430" value="7866">
<input type="radio" id="survey-answer-8998" name="poll_430" value="8998"> 
```

**JS**

```
var targetNodes, nodes, count;

targetNodes = [];

nodes = document.getElementsByTagName("input");

for (count = 0; count < nodes.length; count++) {
    node = nodes[count].id.indexOf("survey-answer");
    targetNodes.push(node);
}

console.log(targetNodes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:53:16.663

将节点推入数组而不是`indexOf`调用的结果：

```
for (count = 0; count < nodes.length; count++) {
  var node = nodes[count].id.indexOf("survey-answer");
  if (node != -1) {
    targetNodes.push(nodes[count]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:55:30.110

这样做： -

```
var targetNodes, nodes, count;

targetNodes = [];

nodes = document.getElementsByTagName("input");
for (count = 0; count < nodes.length; count++) {
    node = nodes[count].id.indexOf("survey-answer");
    if (node == 0)
      targetNodes.push(nodes[count]);
}

alert(targetNodes); 
```

这里 targetNodes 数组包含输入对象。

如果要访问输入标签的值，那么在`IF`条件中，设置如下

```
if (node == 0)
  targetNodes.push(nodes[count].value); 
```

参考**[LIVE DEMO 1](http://jsfiddle.net/SivaCharan/QR9Ry/)**和另一个**[LIVE DEMO 2](http://jsfiddle.net/SivaCharan/QR9Ry/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:57:15.167

```
var targetNodes, nodes, count;

targetNodes = [];

nodes = document.getElementsByTagName("input");

for (count = 0; count < nodes.length; count++)
{
    node = nodes[count].id.indexOf("survey-answer");

    if (node != -1)
    {
        targetNodes.push(nodes[count]);
    }
}

for (count = 0; count < targetNodes.length; count++)
{ 
      alert("id: " + targetNodes[count].id +
            ", name: " + targetNodes[count].name + 
            ", value: " + targetNodes[count].value);
} 
```

这是一个 JSFiddle 来测试这个：http: [//jsfiddle.net/leniel/YwLEu/1/](http://jsfiddle.net/leniel/YwLEu/1/)

# jquery - jquery后台加载图片

> ID：14182774
> 
> 赞同：1
> 
> 时间：2013-01-06T13:51:29.740
> 
> 标签：jquery

我有一个脚本，可以将大量图像加载到轮播效果中……大约 250 张图像。这些图像本身相对较小，但组合起来会在它们出现之前锁定浏览器（加载大约需要 15-20 秒）。

让这些图像在后台加载以使浏览器不会锁定的最佳方法是什么？

请对任何建议保持温和，因为我是一个超级新手！！！

我的脚本如下所示：

```
function fanartPosterPageLoad() {

$('#filterCount').hide();

var posterResultCount = 0;
var mxKey = $.now();

$.get("\\php\\phpFanartPosterPageLoad.php?mxKey"+mxKey, function(posterData){

    posterImageResults = JSON.parse(posterData);

    $('#listItems > li').remove();

    while (posterResultCount<posterImageResults.length){

        var posterFanartFolder = posterImageResults[posterResultCount]['Fanart_Folder_Name'];
        var posterFanartURL = posterImageResults[posterResultCount]['URL_Path'];
        var posterMovieID = posterImageResults[posterResultCount]['Movie_ID'];
        var posterFanartOne = "\\Fanart\\Movies\\";
        var posterFanartTwo = "\\poster\\small";

        $("#listItems").trigger("insertItem", '<li><a href="mediaDetails.php?mxKey='+mxKey+'&movie_id='+posterMovieID+'" class="nyroModal"><img id="'+posterMovieID+'" src="'+posterFanartOne+posterFanartFolder+posterFanartTwo+posterFanartURL+'" width="167" height="250" alt="" /></a></li>');

        posterResultCount++;
    }

    $('.nyroModal').nyroModal();

}); 
```

}

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:41:20.497

每次迭代都操作 DOM。DOM 操作非常昂贵。所以我们可以一次插入所有项目。

```
function fanartPosterPageLoad() {

    $('#filterCount').hide();

    var mxKey = $.now();

    $.get("\\php\\phpFanartPosterPageLoad.php?mxKey" + mxKey, function(posterData) {

        var images = JSON.parse(posterData),
            image,
            posterFanartFolder,
            posterFanartURL,
            posterMovieID,
            posterFanartOne,
            posterFanartTwo,
            html = '';

        $('#listItems > li').remove();

        for (var i = 0, l = images.length; i < l; i++) {

            image = images[i];

            posterFanartFolder = image['Fanart_Folder_Name'];
            posterFanartURL = image['URL_Path'];
            posterMovieID = image['Movie_ID'];
            posterFanartOne = "\\Fanart\\Movies\\";
            posterFanartTwo = "\\poster\\small";

            html += '<li><a href="mediaDetails.php?mxKey='+mxKey+'&movie_id='+posterMovieID+'" class="nyroModal"><img id="'+posterMovieID+'" src="'+posterFanartOne+posterFanartFolder+posterFanartTwo+posterFanartURL+'" width="167" height="250" alt="" /></a></li>';         

        }

        $("#listItems").trigger("insertItem", html);

        $('.nyroModal').nyroModal();

}); 
```

# oracle - Pl/SQL：定义和声明之间的区别

> ID：14182775
> 
> 赞同：3
> 
> 时间：2013-01-06T13:51:31.563
> 
> 标签：oracle, plsql, declare

```
DEFINE p_annual_sal = 60000
DECLARE
v_sal NUMBER(9,2) := &p_annual_sal;
BEGIN
v_sal := v_sal/12;
END;
/ 
```

“定义”这个词有什么用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:06:18.530

`DECLARE`开始 pl/sql 块 ( `DECLARE... BEGIN... END;`) 的部分，您在其中声明要在`BEGIN... END;`部分内部使用的变量。（在 Oracle 服务器上执行）

`DEFINE`是一种替换值的方法（在 SQL*Plus、SQL dev、...中） - 在发送到服务器之前由客户端工具 (sqlplus) 完成替换。

# database - 更新触发器以更新到同一个表

> ID：14182777
> 
> 赞同：1
> 
> 时间：2013-01-06T13:52:06.833
> 
> 标签：database, oracle, plsql, triggers, ora-04091

```
create or replace trigger admin.patreg_paid_amt_temp
before UPDATE OF PAIDAMOUNT_TEMP ON admin.patient_registration
REFERENCING OLD AS OLD NEW AS NEW
For EACH ROW 
BEGIN
   if :new.PAIDAMOUNT_TEMP != :old.PAIDAMOUNT_TEMP
   then
       UPDATE admin.patient_registration d
        set d.PAID_AMOUNT = :new.PAIDAMOUNT_TEMP + d.DIFFERENCE ,
        d.PENDING = ABS(:new.PAIDAMOUNT_TEMP - d.DUES) 
       where d.PATIENT_ID = :new.PATIENT_ID;
   end if;
END; 
```

我知道这是因为触发器无法更改它读取的表的内容。
谁能帮我完成这个

当我编写此查询时，发生以下错误

```
update admin.patient_registration set paidamount_temp= 1000 where patient_id=11; 
```

执行请求的操作时遇到错误

**ORA-04091**：表 Admin.PATIENT_REGISTRATION 正在变异，触发器/函数可能看不到它
**ORA-06512**：在“ADMIN.PATREG_PAID_AMT_TEMP”，第 4 行
**ORA-04088**：执行触发器“ADMIN.PATREG_PAID_AMT_TEMP”
时出错 04091.000000-”表 %s.%s 正在发生变化，触发器/函数可能看不到它”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:33:20.403

我们可以在触发器中操作 :NEW 值：

```
if :new.PAIDAMOUNT_TEMP != :old.PAIDAMOUNT_TEMP
then
    :new.PAID_AMOUNT := :new.PAIDAMOUNT_TEMP + :old.DIFFERENCE;
    :new.PENDING := ABS(:new.PAIDAMOUNT_TEMP - :new.DUES);
    :new.difference := :new.total_charges - :new.per_day_charges;
end if; 
```

* * *

现在我们知道每个患者有一个 PATIENT_REGISTRATION 记录（即 PATIENT_ID 是主键），我们也知道我的解决方案可以工作，并且您不会收到变异表错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:30:30.083

首先我想说的是，你不应该以这种方式设计你的逻辑。我不知道您的触发器*上方*是什么，但它应该是*上层*更新`PAID_AMOUNT`和`PENDING`价值的角色。将应用程序逻辑放入触发器中只会导致混乱。

但。如果您无法控制数据库上方的应用程序并且必须这样做，那么您应该将触发器更改为`for each statement`. 在它内部创建一个循环来迭代`NEW_TABLE`并相应地更新每一行。但请记住对您的更新设置条件，如下所示：

```
UPDATE admin.patient_registration d
    set d.PAID_AMOUNT = p_PAIDAMOUNT_TEMP + p_DIFFERENCE 
    where d.PAID_AMOUNT != (p_PAIDAMOUNT_TEMP + p_DIFFERENCE) -- this is important
    and d.patient_id != p_patient_id 
```

以防止触发器自行触发。

在“语句”触发器中，您可以修改触发器的“基”表。

[在这里](http://www.dba-oracle.com/t_avoiding_mutating_table_error.htm)你可以阅读更多关于它的信息。

# javascript - 如何通过回调函数获取返回值

> ID：14182778
> 
> 赞同：14
> 
> 时间：2013-01-06T13:52:06.477
> 
> 标签：javascript, jquery, callback

这是我的代码

```
function save_current_side(current_side) {
    var result;
    var final = a.b({
        callback: function (a) {
            console.log(a); // its working fine here 
            return a;
        }
    });
} 
```

其中 b 是同步函数。我在代码中的任何地方调用上述函数

```
var saved =  save_current_side(current_side); 
```

保存的变量未定义。如何通过回调函数获得返回值

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-06T13:57:40.680

如果`b`是一个同步方法，您只需将值存储在一个变量中，以便您可以从`save_current_side`函数而不是回调函数返回它：

```
function save_current_side(current_side) {
  var result;
  a.b({
    callback: function (a) {
      result = a;
    }
  });
  return result;
} 
```

如果`b`是异步方法，则无法从函数返回值，因为退出函数时它还不存在。使用回调：

```
function save_current_side(current_side, callback) {
  a.b({
    callback: function (a) {
      callback(a);
    }
  });
}

save_current_side(current_side, function(a){
  console.log(a);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-27T21:31:12.317

您只需将回调作为参数传递给函数，如下所示

```
function save_current_side(current_side,callback) {
   var result;
   var final = a.b(function(){
      callback(a);
   });
} 
```

这是您可以在代码中的任何位置调用它的方式

```
var saved;
save_current_side(current_side,function(saved){
     console.log(saved);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T13:56:16.813

您需要提交回调函数。例子：

```
function save_current_side(current_side, callback) {        
    a.b({
        callback: callback
    });
}

save_current_side(current_side, function() {
  console.log('saved'):
}); 
```

# python - 在 Python 子进程中运行 call() 时出错

> ID：14182780
> 
> 赞同：0
> 
> 时间：2013-01-06T13:52:09.750
> 
> 标签：python, linux, dev-null

我正在尝试运行：

```
 try:
    with open(subprocess.PIPE, 'w') as pipe:
          call(["/usr/sbin/atms","-k"], stdout=pipe, stderr=pipe)                                        
          call(["/usr/sbin/atms","/usr/sbin/atms.conf"],stdout=pipe,stder=pipe)
 except Exception, e:
          print e 
```

我现在得到

```
 coercing to Unicode: need string or buffer, int found 
```

这是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:04:23.093

`open()`用于文件，并且需要文件名而不是管道。

而不是`.call()`，您可以使用`Popen`：

```
>>> p = subprocess.Popen(['python', '-c', 'print "test"'], stdout=subprocess.PIPE)
>>> p.stdout.read()
'test\r\n' 
```

# ruby - C 编译器无法在 Mac OS Mountain Lion 上创建可执行文件

> ID：14182791
> 
> 赞同：3
> 
> 时间：2013-01-06T13:53:50.107
> 
> 标签：ruby, gcc, rbenv

我几乎浏览了每一页，所有提示都不能解决问题。我正在运行 Mountain Lion，我有 Xcode、所有最新的开发人员工具、最新的 GCC 和一切。我正在尝试设置 rbenv 和 ruby​​-build。一切似乎都正常，但是当我去安装一个 ruby​​ 版本时，它说 c 编译器不起作用并且它无法创建可执行文件。日志的最后几行：

```
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking for gcc... /usr/bin/gcc-4.2
checking whether the C compiler works... no
configure: error: in `/var/folders/zr/gv4jcc_122sfrtpfj5g9prc00000gn/T/ruby-build.20130106144331.1477/yaml-0.1.4':
configure: error: C compiler cannot create executables 
```

我难住了。日志包含：

```
configure:3265: /usr/bin/gcc-4.2  -I'/Volumes/Macintosh HD 2/Users/jmart/.rbenv/versions/1.9.3-p327/include'  -L'/Volumes/Macintosh HD 2/Users/jmart/.rbenv/versions/1.9.3-p327/lib'  conftest.c  >&5
i686-apple-darwin11-gcc-4.2.1: HD: No such file or directory
i686-apple-darwin11-gcc-4.2.1: 2/Users/jmart/.rbenv/versions/1.9.3-p327/include': No such file or directory
i686-apple-darwin11-gcc-4.2.1: HD: No such file or directory
i686-apple-darwin11-gcc-4.2.1: 2/Users/jmart/.rbenv/versions/1.9.3-p327/lib': No such file or directory
configure:3269: $? = 1
configure:3307: result: no 
```

更新:: 注意到“HD：没有这样的......”和“2”没有这样的......我确实在我的 mac 中安装了两个两个驱动器 - 一个用于用户文件，一个用于 sys 文件。这就是在这里引发错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:36:40.193

看起来像是配置脚本中的一个错误，但无需重命名卷；只是做一个符号链接。我没有Mac，但是应该这样做（以root身份）：

```
cd /Volumes
ln -s 'Macintosh HD2' MacHD2 
```

然后：

```
./configure --prefix=/Volumes/MacHD2/Users/jmart/.rbenv/versions/1.9.3-p327 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:25:26.403

必须转义空格。

```
$ pwd
/Volumes/VMware Shared Folders/userdata/... 
```

打字`cd`和复制粘贴：

```
$ cd /Volumes/VMware Shared Folders/userdata
-bash: cd: /Volumes/VMware: No such file or directory
$ cd /Volumes/VMware\ Shared\ Folders/userdata/
...:userdata ba$ 
```

在 的情况下`cd`，使用制表符完成会自动添加反斜杠空格。

# html - 导航菜单的悬停文本颜色不起作用

> ID：14182795
> 
> 赞同：2
> 
> 时间：2013-01-06T13:54:12.500
> 
> 标签：html, css, hyperlink, hover, html-lists

我正在制作一个模板。当我以原始形式将其加载到 Dreamweaver 中时，模板悬停工作正常我尝试从模板中复制所有确切的代码和样式，但由于某种原因，在我的网站上，背景仅变为黑色，文本不会变为白色。

```
.menu li a:hover 
```

是应该改变它的规则，并且绝对是控制悬停背景颜色。请帮忙！

[http://gregorydesignbuild.net/](http://gregorydesignbuild.net/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T13:56:55.113

这是因为您在菜单中使用了 cufon，cufon 文本被渲染，因此颜色不能随 改变`:hover`，它不再是文本。

**编辑：**看看这个：[如何修复 Cufon 中的悬停效果](http://galinsimeonov.com/?p=74)

# c++ - 使用我的应用程序控制 Dropbox、Google Drive 和/或 SugarSync。

> ID：14182798
> 
> 赞同：1
> 
> 时间：2013-01-06T13:54:39.950
> 
> 标签：c++, python, sdk, dropbox

如何控制我想让程序一次暂停和同步一个程序的实例，这样它们就不会相互干扰，但是我如何暂停、恢复或检查状态。

我浏览了 dropbox api，看起来你主要可以做的是上传、下载等，但我如何才能真正控制 Dropbox 实例或制作一个程序来自己同步呢？

我可以用 Python 或 C++ 做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T01:46:15.667

*Dropbox API 是您从自己的*客户端与服务交互的方式，而不是您自动化*他们的*桌面客户端应用程序（集成到 Finder/Explorer/等的东西）的方式。

编写自己的客户端来替换他们的客户端可能并非不可能，甚至可能编写一个与他们的客户端共存的客户端（您可以将他们的客户端永久设置为“暂停同步”，而您的客户端只会处理同步方面的事情......虽然你会失去本地存储更改时自动触发同步的好处，而是必须轮询更改或设置并行文件系统监视）。由于 API 是围绕 Web 服务构建的，因此 C++ 对于该语言来说是一个非常糟糕的选择，尤其是因为 Python 有预先构建的包装器。

但无论如何，我很确定这不是你想要做的。您想要的只是控制普通桌面客户端，并告诉它何时暂停或恢复同步，对吗？

Web API（以及包装它的 SDK）不可能帮助您。您必须使用适合您平台的工具来自动化客户端应用程序。而且，由于客户端没有自动化控制界面，因此您必须通过自动化 GUI 来实现。

Mac OS X 有一种通过系统事件 UI 脚本执行此操作的高级方法，您可以通过 Python[`ScriptingBridge`](http://developer.apple.com/documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/index.html)或[`appscript`](https://github.com/abarnert/appscript)或 C++ 访问它……好吧，不要这样做。Windows 只有一种较低级别的方法来执行此操作，`WM_*`即手动合成消息，您可以通过 Python[`pywin32`](http://sourceforge.net/projects/pywin32/)或 C++ 通过本机 Win32 API 来完成。

但是，无论哪种方式，都会很痛苦。例如，最简单的 Python`appscript`解决方案可能看起来像这样（未经测试）：

```
sysev = appscript.app('System Events')
dropbox = sysev.application_processes['Dropbox']
menu = dropbox.menu_bars[1].menu_bar_items[-1].menus[1]
item = menu.items['Pause Syncing']
item.click() 
```

Windows 等价物会更加混乱，包括发送`WM_*`消息以获取菜单、拆分结构等。

使用更高级别的 GUI 自动化工具要容易得多。Mac OS X 内置了 Automator。创建工作流程，单击记录，下拉 Dropbox 菜单，单击“暂停同步”项，单击停止，就完成了。[Actions](http://app.jbbres.com/actions/)可能是最相似的 windows 工具，但还有许多其他选项，例如[AutoIt](http://www.autoitscript.com/autoit3/)，可能更好。

那么，在创建了 Automator 操作或 AutoIt 脚本之后，您如何触发而不是从 Python 或 C++ 触发？好吧，你可能不需要。你已经有了一些可以双击或从 shell 运行的东西。如果你想用 Python 包装它，你可以，例如，通过`subprocess`模块（`open`在 Mac 上使用命令，`shell=True`在 Windows 上使用）。

同时，请记住，现代版本的 OS X 和 Windows 不会让应用程序随意控制彼此。在 OS X 上，您必须在“系统偏好设置”的“辅助功能”窗格中“启用辅助设备的访问权限”；在 Windows 上……它随着每个新版本的变化而变化，我没有跟上。

# html - 我应该使用哪个 html 标签将代码放入 blogpost

> ID：14182800
> 
> 赞同：0
> 
> 时间：2013-01-06T13:54:47.160
> 
> 标签：html

我想在我的博文中放 C、c++、JAVA 和 HTML 代码，我发现很多网站都有块引用、代码和其他标签。我应该使用哪一个（谷歌会喜欢哪一个）。请告知是否有任何新的 HTML 标签可用。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T13:55:48.343

有`pre`和`code`。这就是stackoverflow所做的。

```
<pre><code>
 Your code here
</code></pre> 
```

作为额外的奖励，StackOverflow 使用[Google Code Prettify](http://code.google.com/p/google-code-prettify/)来添加语法高亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:27:45.650

“哪个 google 会喜欢”这个问题的答案是，Google 搜索可能会忽略您将用于代码的任何标记。至少谷歌有相反的声明或任何影响的经验证据。

从 HTML 的早期开始，`code`标记就被定义为计算机代码（有点含糊，但通常解释为至少涵盖编程语言和标记语言）。对此没有新的标记。然而，W3C HTML5 草案评论说：“虽然没有正式的方式来指示被标记的计算机代码的语言，但希望使用所用语言标记代码元素的作者，例如，以便语法高亮脚本可以使用正确的规则，可以通过向元素添加一个前缀为“language-”的类来实现。” 所以你可以写

```
<code class="language-C">i++</code> 
```

但这只是一个建议的约定，可能不会被任何相关软件认为有什么特别之处；这只是一个关于造型的想法，真的。

除了少数例外，使用标记的唯一真正影响`code`是它默认使字体等宽（并将字体大小减小到大约 90%）。

该`pre`元素表示预先格式化的文本，因此它基本上是展示性的，可以用`white-space: pre`CSS 中的使用来代替。在实践中，默认情况下它还暗示等宽字体（并减小字体大小）。

从理论上讲，该`blockquote`元素意味着从外部来源引用。所以它与计算机代码或人类语言完全正交。实际上，除了在所有方面设置默认边距外，它几乎没有任何其他影响。

提到的元素都没有改变解释 HTML 文档中 HTML 标记的规则。所以你不能直接写`a<b`or `<p>`or `a&b`; 这些字符`<`仍然`&`需要通过 HTML 规则进行转义。

从广义上讲，谷歌并不是完全不了解这里讨论的标记。谷歌*翻译器*将`code`内容视为本质上不可翻译（即，它保持其内容完整，而不是翻译关键字和标识符），这主要是好的（对于代码本身；而不是评论）。奇怪的是，它似乎以同样的方式对待`pre`，`blockquote`没有明显的原因。

# unit-testing - 如何使用 Jasmine 测试 Backbone 视图而忽略包含的逻辑部分？

> ID：14182802
> 
> 赞同：1
> 
> 时间：2013-01-06T13:54:55.107
> 
> 标签：unit-testing, view, backbone.js, jasmine

我尝试用茉莉花测试对主干视图的正确模板分配。

这是我的测试：

```
describe("Backbone views", function() {

// Runs before every View spec
beforeEach(function() {

    // Instantiates a new View instance
    this.view = new Index();

});
it("should contain the appropriate template", function() {

    expect(this.view.template).toEqual(IndexViewTemplate);

});

} 
```

在 render 函数中填充 view.template 变量：

```
 initialize: () ->
    super()

    @render()

  # Renders the view's template to the UI
  render: () ->

      # Setting the view's template property using the Underscore template method
    @template = _.template template, 
      {}

      # Dynamically updates the UI with the view's template
    @$el.html @template

      # Maintains chainability
    return @ 
```

变量 IndexViewTemplate 包含原始模板代码，其中包含 <% if (...) %> 之类的逻辑内容。

当我运行该代码时，我得到一个异常，这两个元素不相等，因为在 this.view.template 中，逻辑部分......被渲染掉......;）：

```
should contain the appropriate template

Expected 

'<!-- HTML Template --> <div class="page"> <header class="navbar navbar-inner navbar-fixed-top"> <div class="nav pull-left"> <a href="#" class="btn" type="submit">Back</a> </div> <div> <a class="brand">Backbone-Require-Boilerplate (BRB)</a > </div> <div class="nav pull-right"> <a href="#next" class="btn" type="submit">Next</a> </div> </header> <!-- /header --> <div class="container-fluid"> <div class="row-fluid"> <div class="span12"> <div class="content"> </div> </div> </div> </div> <footer class="footer navbar navbar-fixed-bottom"> <div class="navbar-inner"> <p>Written by <a href="https://github.com/hijolan" target="_blank">Constantin Lebrecht</a></p> </div> </footer><!-- /footer --> </div> <!-- /page --> ' 

to equal 

'<!-- HTML Template --> <div class="page"> <header class="navbar navbar-inner navbar-fixed-top"> <div class="nav pull-left"> <% if (titleBar.backButton.title.length > 0) {%> <a href="<%= titleBar.backButton.href %>" class="btn" type="submit"><%= titleBar.backButton.title %></a> <% } %> </div> <div> <a class="brand"><%= titleBar.title %></a > </div> <div class="nav pull-right"> <% if (titleBar.actionButton.title.length > 0) {%> <a href="<%= titleBar.actionButton.href %>" class="btn" type="submit"><%= titleBar.actionButton.title %></a> <% } %> </div> </header> <!-- /header --> <div class="container-fluid"> <div class="row-fluid"> <div class="span12"> <div class="content"> <%= content.text %> </div> </div> </div> </div> <footer class="footer navbar navbar-fixed-bottom"> <div class="navbar-inner"> <p>Written by <a href="https://github.com/hijolan" target="_blank">Constantin Lebrecht</a></p> </div> </footer><!-- /footer --> </div> <!-- /page --> '. 
```

测试作业的最佳方法是什么？

最好的问候， hijolan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:30:00.660

渲染模板的方式有点不习惯。通常不需要保留“渲染的”模板字符串，就像您在`@template`此处的属性中所做的那样：

```
@template = _.template template, 
  viewConfig
@$el.html @template 
```

我个人会将**未渲染**的模板分配给构造函数中的`@template`属性`initialize`，假设模板在视图实例的生命周期内不会更改：

```
initialize: () ->
  super()
  @template = template 
  @render()

# Renders the view's template to the UI
render: () ->
  viewConfig = _.merge {}, @config.template, {}
  @$el.html _.template(@template, viewConfig) 
  return @ 
```

之后，您的测试`expect(this.view.template).toEqual(IndexViewTemplate)`会测试您希望它测试的内容 - 是否已分配正确的模板。

顺便提一句。我真的不明白这行代码的作用：

```
viewConfig = _.merge {}, @config.template, {} 
```

# blackberry - ListField 的方法 invalidate 不起作用

> ID：14182804
> 
> 赞同：0
> 
> 时间：2013-01-06T13:55:12.447
> 
> 标签：blackberry, java-me, invalidation, listfield

我正在编写一个自定义列表字段，但是当我调用 invalidate 方法时它不起作用。屏幕始终为空，而列表字段的数据不为空或为空！请帮我找出问题所在。
先感谢您

```
public class FileListField extends ListField implements ListFieldCallback{

    private static final Bitmap fileBitmap = Bitmap.getBitmapResource("document.png");
    private static final Bitmap dirBitmap = Bitmap.getBitmapResource("emty_folder.png");
    private static final Bitmap addBitmap = Bitmap.getBitmapResource("svn_added.png");
    private static final Bitmap delBitmap = Bitmap.getBitmapResource("svn_deleted.png");
    private static final Bitmap modBitmap = Bitmap.getBitmapResource("svn_modified.png");
    private static final Bitmap novBitmap = Bitmap.getBitmapResource("svn_noversion.png");
    private static final Bitmap norBitmap = Bitmap.getBitmapResource("svn_normal.png");
    //static Bitmap dowBitmap = Bitmap.getBitmapResource("svn_added.png");

    private BigVector bv;

    public FileListField(){
        super();
        bv = new BigVector();
        setCallback(this);
    }

    public void setFileModelVector(BigVector fileModelVector){
        bv.removeAll();
        bv.addElements(fileModelVector.getContiguousArray());
        invalidate();
        System.out.println("ISSSSSSSSSSSSSS CALLLLLLLLLLINNNNNNNG?");
        System.out.println("DISSSPATH?"+UiApplication.isEventDispatchThread());
//      invalidateRange(0, bv.size()-1);
//      FileModel[] fileModelArr = new FileModel[fileModelVector.size()];
//      for(int i=0;i<fileModelVector.size();i++)
//          fileModelArr[i] = (FileModel)fileModelVector.elementAt(i);
//      set(fileModelArr);
    }

    public BigVector getFileModelVector(){
//      BigVector bv = new BigVector();
//      for(int i=0;i<this.getSize();i++)
//          bv.addElement(get(this, i));
        return bv;
    }

    public void set(Object[] or){

    }

    public Object get(ListField list, int index){
        return bv.elementAt(index);
    }

    public int getSize(){
        return bv.size();
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        return getSelectedIndex();
    }

    public int getPreferredWidth(ListField listField) {
        return Display.getWidth();
    }

    public void drawListRow(ListField listField, Graphics graphics
            , int index, int y, int width){
        System.out.println("DRWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA");
        FileModel fileModel = (FileModel)get(listField, index);
        if(fileModel.isFile())
            graphics.drawBitmap(0, y, width, fileBitmap.getHeight()
                    , fileBitmap, 0, 0);
        else
            graphics.drawBitmap(0, y, width, dirBitmap.getHeight()
                    , dirBitmap, 0, 0);
        switch(fileModel.getStatus()){
            case FileModel.ADD_STATUS:
                graphics.drawBitmap(0, y, width, addBitmap.getHeight()
                        , addBitmap, 0, 0);
                break;
            case FileModel.DEL_STATUS:
                graphics.drawBitmap(0, y, width,delBitmap.getHeight()
                        , delBitmap, 0, 0);
                break;
            case FileModel.MOD_STATUS:
                graphics.drawBitmap(0, y, width, modBitmap.getHeight()
                        , modBitmap, 0, 0);
                break;
            case FileModel.DOW_STATUS:
                break;
            case FileModel.NOR_STATUS:
                graphics.drawBitmap(0, y, width, norBitmap.getHeight()
                        , norBitmap, 0, 0);
                break;
            default:
                graphics.drawBitmap(0, y, width, novBitmap.getHeight()
                        , novBitmap, 0, 0);
                break;
        }
        graphics.drawText(fileModel.getName(), fileBitmap.getWidth(), y);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:27:47.177

我认为打电话`invalidate()`给你`ListField`是不够的。该`invalidate()`调用实际上是一个[视图层](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)方法，表示必须重新绘制该字段。你真正在做的是表明[模型](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)已经改变。

[请参阅 Stack Overflow 上的其他问题](https://stackoverflow.com/q/6088484/119114)

尝试使用 setSize() 将代码更改为这样的：

```
public void setFileModelVector(BigVector fileModelVector){
    bv.removeAll();
    bv.addElements(fileModelVector.getContiguousArray());
    //invalidate();
    setSize(bv.size());
} 
```

我也不知道您究竟如何处理向量本身的所有权，但您也可以这样做：

```
public void setFileModelVector(BigVector fileModelVector){
    bv = fileModelVector;
    //invalidate();
    setSize(bv.size());
} 
```

因为您要清除整个向量，然后将新向量转换为数组，然后将数组添加到原始向量。但是，这是一个单独的问题，并不是您看到 empty 的原因`ListField`。

# android - 从头开始运行活动

> ID：14182805
> 
> 赞同：0
> 
> 时间：2013-01-06T13:55:12.800
> 
> 标签：android

我有一个应用程序，当我开始运行它`MainActivity`并在获得一些数据后我选择应该开始下一个活动。我有这样的问题：当我第一次`MainActivity`开始并选择正确的活动时。当我处于正确的活动中并使用主页按钮并从菜单中再次选择应用程序时，应用程序不是从我的正确活动开始，`MainActivity`而是从我的正确活动开始。`MainActivity`即使我使用主页按钮将应用程序隐藏到后台并再次从菜单按钮中选择我的应用程序，如何始终启动我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:00:31.260

您可以简单地覆盖`onResume()`您的其他活动并完成您当前的活动并启动 MainActivity

```
 @Override
    public void onResume() {
        super.onResume();

        Intent startAct= new Intent(OtherActivity.this,
                            MainActivity.class);
                    startActivity(startAct);
        finish();
    } 
```

# java - JLabel 在 JFrame 中不显示任何内容

> ID：14182806
> 
> 赞同：2
> 
> 时间：2013-01-06T13:55:23.210
> 
> 标签：java, swing, jframe, jlabel

我认为并希望这是一个小问题。

我有一个`JFrame`在蛇游戏中显示的。文本，例如`"Game Over, your snake is crashed"`或其他内容，将显示在`JLabel`.

问题是我`JLabel`的总是空的！

这是代码：

```
package ch.gibb.snake1;

import java.awt.Dimension;
import java.awt.Toolkit;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class endFrame extends JFrame {

        /**
         * Auto-generated VersionUID
         */
        private static final long serialVersionUID = -6535942219723507798L;

        public static void main(String[] args) {
            displayFrame();
        }
        public static void displayFrame() {

            JFrame frame = new JFrame("Game Over");
            JLabel info = new JLabel("My 127.0.0.1 is my castle", JLabel.CENTER);

            int height = 670;
            int width = 630;

            Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();
            int ex = (screen.width / 2) - (width / 4); // Center horizontally.
            int ey = (screen.height / 2) - (height / 4); // Center vertically.

            frame.setTitle("Game Over");
            frame.setBounds(ex, ey, width / 2, height / 2);
            frame.setLayout(null);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            info.setBounds(ex, ey, width/2, height/2);

            frame.add(info);
            frame.setVisible(true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:03:23.777

```
 frame.setTitle("Game Over");
    frame.setBounds(ex, ey, width / 2, height / 2);
    //frame.setLayout(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //info.setBounds(ex, ey, width / 2, height / 2); 
```

最终结果：

![结束游戏](../Images/00147581c68c5015ade7ae7cceb17de9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:00:56.407

当`JLabel`您将 X 和 Y 坐标设置在`JFrames`此处的尺寸之外时，不会显示：

```
info.setBounds(ex, ey, width / 2, height / 2); 
```

您需要在`JFrame`.

```
frame.setBounds(ex, ey, width / 2, height / 2); 
```

同样使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)将消除对子组件本身设置边界的需要。

# apache - .htaccess rewritecond [或]

> ID：14182820
> 
> 赞同：1
> 
> 时间：2013-01-06T13:57:15.547
> 
> 标签：apache, .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ./ext/.*
RewriteCond %{HTTP_COOKIE} !^user_id=.*$ [OR]
RewriteCond %{HTTP_COOKIE} !^customer_id=.*$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/404.php 
```

我想要如果 isset user_id OR customer_id on cookie，它会通过。但这不起作用。

# android - 使用 MockContext 时，较新 Android 版本中 ApplicationTestCase.createApplication() 中的 AssertionFailedError

> ID：14182822
> 
> 赞同：10
> 
> 时间：2013-01-06T13:57:22.893
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-testing

我正在编写一个 Android ApplicationTestCase（TemperatureConverterApplicationTests 示例，可在Diego T. Milano 第 171 页的*Android 应用程序测试指南中找到）。*该示例是为 Android 2.3 编写的，它似乎不适用于 Android 4。您不必了解这本书就可以理解问题，因为我已经对其进行了简化。

这适用于**Android 2.3.3** (API 10)：

```
setContext(new MockContext());
createApplication(); 
```

*[准确地说，抛出 UnsupportedOperationException 是因为 getPackageName() 没有实现。但这是正常的，可以通过使用实现 getPackageName() 和 getSharedPreferences() 的 MockContext() 子类来解决。这无关紧要，因为即使在这样做之后问题仍然存在。]*

问题是**Android 4.1.2** (API 16) 无法正常工作。我得到一个 AssertionFailedError，通过一些调试我发现这是由于在 ApplicationTestCase 的第 100 行抛出了 ClassCastException。

```
mApplication = (T) Instrumentation.newApplication(mApplicationClass, getContext()); 
```

**ClassCastException**消息是：

```
java.lang.ClassCastException: android.test.mock.MockContext cannot be cast to android.app.ContextImpl 
```

有什么建议为什么会发生这种情况以及如何避免这种情况？

编辑：相关问题：[Android ApplicationTestCase using a MockContext](https://stackoverflow.com/questions/14205451/android-applicationtestcase-using-a-mockcontext)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T15:19:30.600

我也有这种行为。我通过扩展 ContextWrapper 解决了这个问题：

```
public class RenamingMockContext extends RenamingDelegatingContext
{
    private static final String PREFIX = "test.";

    public RenamingMockContext(Context context)
    {
        super(new ContextWrapper(context), PREFIX);
    }

    @Override
    public String getPackageName()
    {
        return PREFIX + super.getPackageName();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:11:19.647

该`Instrumentation.newApplication()`方法将返回一个`Application`对象。您正试图将其转换为任何`T`内容。如果`T`不是超类或子类，`Application`您将获得`ClassCastException`. 在 Java 中，您只能将对象转换为该对象的超类或子类。如果不是，则将引发异常。

**例如：**

```
Object x = new Integer(0);
System.out.println((String)x); 
```

这将在第二行抛出 a `ClassCastException`，因为您试图将`x`（一个`Integer`对象）转换为 a `String`。因为 a `String`and`Integer`不是彼此的子类或超类。

# php - 用php回显图像

> ID：14182823
> 
> 赞同：0
> 
> 时间：2013-01-06T13:57:25.457
> 
> 标签：php

我正在尝试用 php 做一些非常简单的事情，但我找不到错误的地方！所以，我想回显这样的图像（部分代码）：

```
 $file_path[0] = "/Applications/MAMP/htdocs/php_test/image_archive/".$last_file[0];
    echo $file_path[0];
    echo "<br>";
    echo "<img src=\".$file_path[0].\" alt=\"error\">"; 
```

当我回显 img 标签但我找不到它时，我一定有某种错误。任何帮助，将不胜感激。

```
 <div class="content">
   <h1> Map</h1>
  <?php

  include '/Applications/MAMP/htdocs/php_test/web_application_functions/last_file.php'; 
  $last_file = last_file(); 

 $file_path[0] = "/Applications/MAMP/htdocs/php_test/image_archive/".$last_file[0];
echo $file_path[0];
echo "<br>";
echo '<img src="' . $file_path[0] . '" alt="error">';
?>
<!-- end .content --></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T13:59:45.570

您应该使用相对于服务器根目录或当前文件的路径。

```
echo "<img src='/php_test/image_archive/" . $last_file[0] . "' alt='error'>"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T14:01:26.117

```
echo "<img src=\".$file_path[0].\" alt=\"error\">"; 
```

是错的

```
echo "<img src=\"".$file_path[0]."\" alt=\"error\">"; 
```

是你认为你在做什么

使用单引号很有用，这样你就不会犯这个错误

```
echo '<img src="' . $file_path[0] . '" alt="error">'; 
```

第二

`/Applications/MAMP/htdocs/php_test/image_archive/`看起来像路径而不是目录

也许你的意思是

```
$file_path[0] = "/php_test/image_archive/".$last_file[0]; 
```

或者

```
$file_path[0] = "image_archive/".$last_file[0]; 
```

# algorithm - 在 BST 中打印继任者和前任者

> ID：14182825
> 
> 赞同：1
> 
> 时间：2013-01-06T13:57:42.630
> 
> 标签：algorithm, data-structures, binary-tree, traversal, binary-search-tree

我的问题如下：

我有一个带有键的二叉搜索树：`a1<a2<...<an`，问题是使用 O 中的递归算法打印树中的所有 (a_i, a_i+1) 对（其中 i={1,2,3,...}） (n) 没有任何全局变量并使用 O(1) 额外空间的时间。一个例子：假设键是：1,2, ..., 5 将被打印的对：(1,2) (2,3) (3, 4) (4, 5)

因此，您不能在树中进行中序遍历并找到每个节点的后继/前继。因为这将花费 O(nh) 时间，并且如果树是平衡的，那么整棵树的时间将为 O(nlgn)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:14:40.850

虽然你是对的，找到一个有序的后继或前驱可能需要 O(h) 时间，但事实证明，如果你从 BST 中的最小值开始并反复找到它的后继，完成的工作总量最终会到来无论树的形状如何，都达到 O(n)。

对此的直觉是考虑在迭代进行后继查找时遍历树中每条边的次数。具体来说，您将准确地访问树中的每条边两次：一次是当您下降到子树时，一次是当您从子树中走出来访问该子树中的每个节点时。由于 n 节点树有 O(n) 条边，这需要 O(n) 时间才能完成。

如果您对此持怀疑态度，请尝试编写一个简单的程序来验证它。我记得当我第一次听到这个结果时，我并不相信这个结果，直到我写了一个程序来确认它。:-)

在伪代码中，逻辑如下所示：

1.  通过从根开始并重复跟随左子指针直到不存在这样的指针，找到树中的最小值。
2.  直到所有节点都被访问过，记住当前节点并找到它的后继节点如下：
    1.  如果当前节点有一个右孩子：
        1.  向右走。
        2.  向左走，直到没有剩下的孩子。
        3.  输出你开始的节点，然后是这个节点。2：否则：
        4.  一直走到父节点，直到你发现你开始的节点是其父节点的左子节点。
        5.  如果你击中了根并且从未发现你是从左孩子向上遍历的，那么你就完成了。
        6.  否则，输出你记得的节点，然后是当前节点。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:13:01.597

Oli 是正确的，中序遍历是 O(n)，但你是对的，使用一般的后继/前继例程会增加算法的复杂性。所以：

一个简单的解决方案是使用按序遍历来遍历树，跟踪您最后一次被带入右指向边（例如，使用名为**last_right_ancestor_seen**的变量指向其父节点）和最后一个叶节点你已经看到了（比如说，在**last_leaf_seen**中（实际上是任何没有右子节点的节点）。每次处理叶节点时，它的前身是**last_right_ancestor**，每次遇到非叶节点时，它的前身是**last_leaf_seen**，并且你只需打印两个。O(n) 时间，O(1) 空间。

希望它足够清楚，如果没有，我可以给你画一个图表。

编辑：这是未经测试的，但可能是正确的：

```
walk(node* current, node* last_right_ancestor_seen, node* last_leaf_seen) {

    if(current->left != null) {
        walk(current->left, last_right_ancestor_seen, last_leaf_seen);
    }

    if(current->is_leaf()) {
            if(last_right_ancestor_seen != null)
                print(last_right_ancestor_seen->value, current->value);
    }
    else {
        print(last_leaf_seen->value, current->value);
    }

    if(current->right != null) {
        *last_right_ancestor_seen = *current;
        walk(current->right, last_right_ancestor_seen, last_leaf_seen);
    }
    else {
        *last_leaf_seen = *current;
    }

} 
```

# wpf - 按需刷新 WPF 窗口

> ID：14182829
> 
> 赞同：2
> 
> 时间：2013-01-06T13:59:16.760
> 
> 标签：wpf, window, refresh

我注意到如果我通过代码移动我的 WPF 窗口，我只会在窗口刷新时看到变化（如果我最小化然后最大化它）。
是否可以按需刷新 WPF 的 GUI？

编辑：我实际上是想让这个窗口跟随另一个窗口。

所以我挂钩到另一个窗口的事件：

```
 m_wndParent = parent;
    this.Owner = m_wndParent;
    m_wndParent.SizeChanged += ParentSizeChanged;
    m_wndParent.LayoutUpdated += ParentLocationChanged; 
```

然后我改变我的窗口的位置：

```
 private void ParentLocationChanged(object sender, EventArgs e)
        {
            Window parent = sender as Window;
            this.Top = parent.Top;
            this.Left = parent.Left;
            this.UpdateLayout();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:01:23.263

您应该将`ParentLocationChanged`处理程序添加到[LocationChanged](http://msdn.microsoft.com/en-us/library/system.windows.window.locationchanged.aspx)事件而不是[LayoutUpdated](http://msdn.microsoft.com/en-us/library/system.windows.uielement.layoutupdated.aspx)（其用途完全不同）。

```
m_wndParent.LocationChanged += ParentLocationChanged;

private void ParentLocationChanged(object sender, EventArgs e)
{
    var parent = sender as Window;
    Top = parent.Top;
    Left = parent.Left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:07:44.193

您应该连接 parent.LocationChanged，然后调用 InvalidateVisual。[有关详细信息，](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatevisual.aspx)请参阅MSDN 。

# php - PHP 语句：while($row = mysql_fetch_array($query))

> ID：14182831
> 
> 赞同：0
> 
> 时间：2013-01-06T13:59:25.697
> 
> 标签：php, mysql, while-loop

我很难理解

```
while($row = mysql_fetch_array($query)) 
```

显示变量“$query”中的一些数据库元素。此外，我不明白函数“mysql_fetch_array()”传递给变量“$row”的内容。我的猜测是只给出了“$query”中的数据库记录的一条记录（或行），但是函数如何知道哪一行？

我将尝试用一个例子来解释自己。

假设我在变量 $query 中有 3 条记录，其中包含两个字段（比如“id”和“name”）。首先，当变量 $row 被第一个元素填充时（比如 id=1，name=antonio），然后一些代码允许我显示或操作“1”和“antonio”，然后代码结束，while 开始再次。

现在我假设赋予变量“row”的是第二个元素，但是函数如何知道必须返回第二个元素（而不是第一个或第三个）？我的意思是，我不会在任何地方提供这些信息...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:02:42.733

如果将该语句`$row = mysql_fetch_array()`作为 while 循环的条件语句放置，您将完成两件事：

1.  您将获得一行新的 MySQL 信息，您可以在每次 while 循环检查其条件语句时打印出来。

2.  当没有更多行时，该函数将返回 FALSE 导致 while 循环停止！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:03:01.950

变量 $query 是一种资源，因此具有某种内部“行计数器”。每次调用 mysql_fetch_array() 或其变体时，此计数器都会递增。结果，每次调用这个函数 mysql_fetch_array 时，都会得到下一行。当接收到最后一行并再次调用它时，它返回 false。由于 while 循环的工作方式，您可以跳出这个循环。

# performance - 精灵表排列算法

> ID：14182833
> 
> 赞同：2
> 
> 时间：2013-01-06T13:59:29.257
> 
> 标签：performance, algorithm, sprite-sheet, zwoptex

我正在使用 opengl 和 sprite-sheets 为 android 创建一个简单的 2d 游戏，现在要创建这些 sprite-sheets 我使用 zwoptex。

我的问题是，是否有任何实用程序可以使用任何算法而不是其他任何算法，例如，目前我正在使用树，因为它似乎浪费了很少的空间（尽管 max rect 似乎也不错）。

除了有效利用空间来优化显卡性能之外，是否还有其他考虑因素，例如，如果动画中的 2 个关键帧在精灵表上相隔很远，那么在它们之间切换是否存在相关成本，或者这无关紧要，因为整个 spritesheet 包含在 GPU RAM 中？

如果没有这种可能的速度优势，那么不同的算法究竟是如何工作的，所以我可以决定哪种算法对我的想法最有效？

# c - 如何交换指针然后释放旧指针，如 RCU

> ID：14182837
> 
> 赞同：-3
> 
> 时间：2013-01-06T13:59:49.317
> 
> 标签：c

我有许多读取缓存数据的读取器线程，例如

```
struct {
   hash_table *cache;
   int64_t version;
} ctx; 
```

许多读取器线程读取缓存，例如

```
void *get_from_cache(void *key)
{
    /* Maybe access invalid address when writer thread free it too quickly ! */
    /* I can use setjmp/longjmp to deal the exception, but it's too expensive ! */
    /* On Windows, I can use SEH, but how about Linux ? */

    /* Finally, can I avoid it with zero cost on reader thread ? */

    return cache.get(key);
} 
```

只有一个写入器线程更新缓存：

```
void update_cache()
{
    int64_t new_version = get_current_version();

    if (new_version > ctx.version) {
        hash_table *new_cache = load_cache();
        hash_table *old_cache = ctx.cache;

        ctx.version = new_version;
        ctx.cache = new_cache;

        /* How to determine the wait time is enough ? */
        /* Just use a experiential value ? */
        wait_some_time();

        free_hash_table(old_cache);
    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:13:18.717

从标题看来，您似乎正试图依赖指针操作的原子性质。请看一下[是否更改指针被认为是 C 中的原子动作？](https://stackoverflow.com/questions/879077/is-changing-a-pointer-considered-an-atomic-action-in-c).

另外 - 试图检测无效的内存访问真的很糟糕。如果你得到一个指向一个有效但不正确的地址的指针怎么办。

我会使用更传统的同步机制。

# django - Django查询集返回不正确的数据？

> ID：14182840
> 
> 赞同：0
> 
> 时间：2013-01-06T13:59:56.803
> 
> 标签：django, google-app-engine, django-forms, django-queryset, django-nonrel

我的设置是在 Google App Engine 上运行的 Django-Nonrel

我有一个具有 LessonStep 内联模型\表单的课程模型\表单。连接是通过 LessonStep 中指向 Lesson 的外键。我正在使用`save_related`这样，一旦保存了 Lesson 表单以及所有 LessonStep 内联表单，我就可以对内联模型进行一些数据操作。

这是我的代码：

```
 def save_related(self, request, form, formsets, change):
        super(LessonAdmin,self).save_related(request, form, formsets, change)
        logging.debug("inlines: %d" % (len(form.instance.lessonstep_set.all()),)  ) 
```

问题是这样的：

假设我的课程表单没有 LessonStep 实例。我通过 Django 管理表单添加一个新表单并保存它，然后调用此函数。接下来发生的事情是该实例**确实保存在 DB**中，但`form.instance.lessonstep_set.all())`返回一个*空*查询集。日志打印出来为`inlines: 0`

显然数据就在那里，因为当更新的管理表单出现时，它有新的 LessonStep 实例。

**我的问题：**

即使数据刚刚通过 保存，查询集为什么返回空`super`？有没有更好的方法来访问刚刚保存的模型的已保存内联实例？

更多信息 - 如果我在日志行上放置一个断点并评估查询，我会得到一个返回正确查询集的结果。所以我觉得这与 Django 缓存或查询的上下文有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:27:40.173

Django（我没有非rel经验）缓存相关对象查询集。您可以通过从数据库中重新获取实例来避免这种情况。

```
instance = Lesson.objects.get(pk=form.instance.id)
len(instance.lessonstep_set.all()) 
```

# mysql - MySQL 上 GROUP BY / MIN 查询的索引

> ID：14182841
> 
> 赞同：0
> 
> 时间：2013-01-06T14:00:04.280
> 
> 标签：mysql, sql, performance, group-by, indexing

在一个更大的表（大约 0.5 万行增长）上，我运行以下查询需要很长时间：

```
SELECT track, MIN(time) as t, buse, serviceid 
FROM depart 
WHERE `to` IS NOT NULL AND platform_id = 1025 AND time > 741 
GROUP BY serviceid 
```

什么是支持快速运行此查询的好索引？到目前为止，它使用带有,和的`platform_id`索引。`where``filesort``temp`

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:01:01.227

正确的索引方法取决于数据的分布。如果只有一排的平台为 1025，则情况与所有行的平台为 1025 的情况不同。

做出合理的假设，您可能需要（平台，时间）上的索引。如果`to`通常为 NULL，则索引（平台、目标、时间）可能会有所改进。

使用索引的方式是 MySQL 将在索引中找到满足`where`子句的值。然后它将在每一页中读取这些记录以获取其余变量并处理查询。假设有几百条记录符合条件，这应该会显着加快查询速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:12:11.477

试试这个：s

```
SELECT track, MIN(time) as t, buse,DISTINCT serviceid 
FROM depart 
WHERE `to` IS NOT NULL AND platform_id = 1025 AND time > 741 
```

# vb.net - 报告查看器中的错误

> ID：14182843
> 
> 赞同：1
> 
> 时间：2013-01-06T14:00:09.783
> 
> 标签：vb.net, report

我想在 vb.net 中创建一份报告。我的代码是

```
 da = New SqlDataAdapter("select biography  FROM [gholeha].[dbo].[tbl_charachter] where name=N'آیت الله بهجت' ", con)
    da.Fill(ds)
    Dim rep As ReportDataSource
    rep = New ReportDataSource("dts", ds.Tables(0))
    ReportViewer1.LocalReport.DataSources.Clear()
    Me.ReportViewer1.LocalReport.DataSources.Add(rep)
    ReportViewer1.LocalReport.Refresh()
    Me.ReportViewer1.RefreshReport() 
```

但是然后调试我没有查看报告并且我有错误：

> 尚未指定报告定义的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:48:17.180

您是否还需要像 ReportViewer1.LocalReport.ReportEmbeddedResource = yourreportname.rdlc 这样的行？

# java - 从主要活动中引用处理程序对象

> ID：14182846
> 
> 赞同：1
> 
> 时间：2013-01-06T14:00:22.087
> 
> 标签：java, android, handler

我主要有一个`Activity`类，一个广播类（广播接收器的子类）和其他一些类。我`Handler`在广播类中创建了一个，用于将来要做的一些事情。但是如果出现某些情况（用户想要退出应用程序），我希望`Handler`取消（防止被执行）。

我在 SO 中阅读了很多关于如何取消的线程，`Handlers`并且我知道如何从同一类（`Handler.removeCallback (Runnable )`等`Handler.removeMessages(0)`）中取消。但我不知道如何从我的`Activity`. （用户按下退出按钮，如果处理程序要做一些工作，我想阻止它）。

那么如何从`Activity`类中引用该处理程序对象（将要执行）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:44:17.370

我不确定我是否完全理解你的问题，但是，如果你想`Handler`通过活动取消，你可以把它放在`onPause`方法中：

```
@Override
public void onPause() {
    super.onPause();
    handler.removeCallbacks(runnable);
} 
```

`onPause`当即将对用户隐藏活动时，将调用该方法。

重新阅读您的问题后，如果您的意思是`BroadcastReceiver`要从您的`Activity`类访问类中的处理程序，那么您应该使处理程序成为您活动的成员变量。

```
public class MyActivity extends Activity {

    private Handler mHandler = new Handler();

    public class BroadcastReceiver mReceiver = new BroadcastReceiver() {

        public void onReceive (Context context, Intent intent) {
            // ... use mHandler in here ....
            mHandler.postDelayed(runnable, 1000);
        }

    }

    // ... rest of the code ...

    @Override
    public void onPause() {
        super.onPause();
        handler.removeCallbacks(runnable);
    }

} 
```

您可以在您的`BroadcastReceiver`和`Activity`类中使用处理程序，使用`mHandler`. 您必须确保您的`BroadcastReceiver`类**不是**`static`.`Activity`

# android - 解锁屏幕后防止重新创建活动

> ID：14182850
> 
> 赞同：3
> 
> 时间：2013-01-06T14:00:59.340
> 
> 标签：android, android-screen

我的活动中有一些微调器。屏幕设置为 2 分钟后锁定。解锁屏幕后，我所有的微调器都被重置。我认为，onCreate 方法是在解锁后调用的。有没有办法在解锁屏幕后设置活动不重新创建？旋转屏幕时也会发生同样的情况，但这不是问题，我可以将布局设置为仅纵向。

或者也许有一些设置，比如旋转，以防止再次调用 onCreate 方法？：

```
android:configChanges="orientation" 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:10:20.710

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

> “活动可能经常在恢复和暂停状态之间切换——例如当设备进入睡眠状态时”

[http://developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)

您需要使用 Activity 生命周期方法来管理状态，而不是尝试“将 Activity 设置为不重新创建”。根据设计，活动一直被创建/销毁/重新创建（对于记录锁定到一个方向也是一种创可贴，正确处理状态将意味着您也不必这样做）。

这个问题可能会有所帮助，答案有一个处理实例状态的例子：[Saving Android Activity state using Save Instance State](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

# android - 将我自己的自定义视图添加到 xml 布局时出错

> ID：14182851
> 
> 赞同：1
> 
> 时间：2013-01-06T14:00:59.987
> 
> 标签：android, android-custom-view

我的应用程序中有一个自定义视图：

```
public class DrawView extends View {
    Paint paint = new Paint();

    public DrawView(Context context) {
        super(context);            
    }
    public DrawView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public DrawView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    } 
```

我想将此视图添加到我的活动的 xml 布局中，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
   <FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>
     <test.example.myfirstapp.DrawView
        android:id="@+id/mostatil"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/button_capture"
        android:layout_alignParentRight="true"/>
     <Button
      android:id="@+id/button_capture"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_centerHorizontal="true"
      android:layout_marginBottom="16dp"
      android:onClick="capture"
      android:text="@string/capture_button" />
       </RelativeLayout> 
```

但是当我尝试运行此活动时，会出现如下错误：

```
01-06 14:26:00.897: E/AndroidRuntime(1933): FATAL EXCEPTION: main
01-06 14:26:00.897: E/AndroidRuntime(1933): java.lang.RuntimeException: Unable to start activity ComponentInfo{test.example.myfirstapp/test.example.myfirstapp.CameraActivity}: android.view.InflateException: Binary XML file line #13: Error inflating class test.example.myfirstapp.DrawView 
```

我的程序的包名称是 test.example.myfirstapp 并且 xml 文件用于名为“CameraActivity”的活动

编辑：这里有一些额外的 logCat 行：

```
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.os.Looper.loop(Looper.java:137)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at dalvik.system.NativeStart.main(Native Method)
01-06 14:16:20.708: E/AndroidRuntime(1849): Caused by: android.view.InflateException: Binary XML file line #13: Error inflating class test.example.myfirstapp
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.Activity.setContentView(Activity.java:1881)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at test.example.myfirstapp.CameraActivity.onCreate(CameraActivity.java:77)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.Activity.performCreate(Activity.java:5104)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-06 14:16:20.708: E/AndroidRuntime(1849):     ... 11 more
01-06 14:16:20.708: E/AndroidRuntime(1849): Caused by: java.lang.ClassNotFoundException: Didn't find class "test.example.myfirstapp" on path: /data/app/test.example.myfirstapp-1.apk
01-06 14:16:20.708: E/AndroidRuntime(1849):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
01-06 14:16:20.708: E/AndroidRuntime(1849):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687) 
```

当我在“图形布局”模式下打开我的 XML 布局时，图形布局下出现此错误：

```
 The following classes could not be instantiated:
    - test.example.myfirstapp.CameraActivity.DrawView (Open Class, Show Error Log)
    See the Error Log (Window > Show View) for more details.
    Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T15:10:44.227

这些步骤对我有用：

在您的 .xml 中：

```
<view class="test.example.myfirstapp.DrawViewd"
android:id="@+id/mostatil"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignBottom="@+id/button_capture"
android:layout_alignParentRight="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:19:23.097

在您的 xml 中膨胀自定义视图时，首先不要忘记将其添加到您的主视图容器中

`xmlns:app="http://schemas.android.com/apk/res/my.package.name"`.

第二件事就是看看你是否在它的名字之前用正确的包名来膨胀你的视图并检查拼写。如果一切都是正确的。

只需复制并粘贴整个 xml 文件的代码以及您的视图所在的包即可。

并确保您`onDraw(Canvas canvas)`在视图中覆盖您的方法..

**编辑**

我可以看到你的 xml 看起来像这样：

```
<test.example.myfirstapp
    android:id="@+id/mostatil"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button_capture"
    android:layout_alignParentRight="true"/> 
```

但是在这里您没有使用自定义视图，它应该如下所示：

```
<test.example.myfirstapp.DrawView
        android:id="@+id/mostatil"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/button_capture"
        android:layout_alignParentRight="true"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:58:01.467

在 Eclipse 中进行清理，然后从设备/模拟器中卸载该应用程序，然后重试。看起来你的资源被搞砸了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-10T08:57:59.567

油漆应该在构造函数中实例化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-10T14:28:11.260

尝试将类放在 java 类中，而不是放在子类下。不要忘记更新 XML 标记。

# php - SQL 注入无法正常工作

> ID：14182855
> 
> 赞同：9
> 
> 时间：2013-01-06T14:01:44.320
> 
> 标签：php, mysql, sql, sql-injection

我正在尝试在我的本地主机上为安全测试项目创建的虚拟网站上执行 SQL 注入。

我尝试`" OR "='`在用户名和密码字段中输入字符串，因此它应该绕过它并显示*登录正确*- 但它显示*登录失败*

任何有助于理解为什么 SQL 注入不起作用

```
<?php
    mysql_connect('localhost', 'root', '');
    mysql_select_db('test');

    if(isset($_POST['username'])&&isset($_POST['password'])){
       $username =$_POST['username'];
       $password = $_POST['password'];
       echo $username;
       echo $password;

       if(!empty($username)&&!empty($password)){
          $query ="SELECT id FROM users WHERE username = '$username' AND password = '$password'";
          $query_run = mysql_query($query);

          if(mysql_num_rows($query_run)>=1){
              echo 'Login Correct';
          }else{
              echo 'Login Failed';
          }
       }
    }
?>
<form action="test.php" method="POST">
   Username: <input type="text" name="username">
   Password: <input type="text" name="password">
   <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T14:04:38.857

您的注入字符串应如下所示：
用户名和密码：

```
' or '1' = '1 
```

用户名（通常）或密码：（取决于查询中哪个先出现）
`#`评论查询的其余部分。

```
' or '1'='1' # 
```

有关 SQL 注入的更多信息，您可以查看这个完美
[的 url：SQL 注入知识库](http://www.websec.ca/kb/sql_injection#MySQL_Default_Databases)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T14:06:59.293

尝试注入这个：`' or '1' = '1' --`

`'1' = '1'`总是正确的，并且在评论`--`之后说的所有内容`--`都不会被检查。

# html - 在我的 Windows 8 应用程序（Microsoft Advertising SDK）上看不到广告

> ID：14182860
> 
> 赞同：0
> 
> 时间：2013-01-06T14:02:56.203
> 
> 标签：html, windows-8, windows-store-apps, ads

我开发了两个 Windows 8 应用程序，我将它们发布到商店，在 Pub Center 我创建了两个应用程序和一些广告单元，

所有广告单元都显示在第一个应用程序上，而不是第二个应用程序上（相同的配置）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:14:39.807

我忘记在 **package.appxmanifest**文件的**Capabilities 选项卡上检查****Internet 客户端。**

# json - 这是有效的 json 模式吗？

> ID：14182865
> 
> 赞同：1
> 
> 时间：2013-01-06T14:03:42.400
> 
> 标签：json, jsonschema

这是有效的 json 模式吗？

```
{
    "properties": {
        "title", "first", "last" 
    }
} 
```

我的观点是：标题，第一，最后没有像这样的规范

```
{
    "properties": {
        "title": {}, "first": {}, "last": {} 
    }
} 
```

甚至没有分号和{}。它仍然有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:05:33.723

[JSONLint](http://jsonlint.com/)说不：

```
第 3 行解析错误：
...”：{“标题”，“第一”，
----------------------^
期待'：'

```

如[json-schema.org](http://json-schema.org/)中所述：

> JSON Schema 是一种**基于 JSON 的**格式，用于描述 JSON 数据。

（强调我的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:08:42.363

这是有效的：

```
{
    "properties": {
        "title": {}, "first": {}, "last": {} 
    }
} 
```

在 Chrome 开发者工具中测试：

```
var a = {
        "properties": {
            "title": {}, "first": {}, "last": {} 
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:06:37.123

这是有效的 JSON

```
{
    "properties": {
        "title": {},
        "first": {},
        "last": {}
    }
} 
```

您的架构不是有效的。

# java - Java接口继承

> ID：14182868
> 
> 赞同：0
> 
> 时间：2013-01-06T14:04:23.717
> 
> 标签：java, inheritance

我写了这段代码：

```
package sample;
import org.freedesktop.dbus.DBusInterface;
import org.freedesktop.dbus.DBusInterfaceName;
import org.freedesktop.dbus.DBusConnection;

@DBusInterfaceName("org.mpris.clementine")
interface Player extends DBusInterface, java.rmi.Remote {
    void Pause();
}

class Main {
        public static void main (String[] args) throws org.freedesktop.dbus.exceptions.DBusException, java.lang.InterruptedException {
                DBusConnection dc = DBusConnection.getConnection(DBusConnection.SESSION);
                Player player = (Player) dc.getRemoteObject("org.mpris.clementine", "/Player");
                player.Pause();
                dc.disconnect();
        }
} 
```

并得到一个错误的行

```
Player player = (Player) dc.getRemoteObject("org.mpris.clementine", "/Player"); 
```

它说

```
Exception in thread "main" java.lang.ClassCastException: $Proxy2 cannot be cast to sample.Player 
```

我知道问题在于继承误解或类似的东西。我已经彻底搜索过，但找不到答案。如何正确写出这一行？什么是错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:41:05.133

不确定“dc.getRemoteObject()”是做什么的，如果它是远程操作，则需要取消编组该对象。

> 对象 obj= dc.getRemoteObject("org.mpris.clementine", "/Player");
> 
> Player player =(Player)PortableRemoteObject.narrow(obj,Player.class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:31:55.773

改用这个：

```
Object obj = dc.getRemoteObject("org.mpris.clementine", "/Player");
if( obj instanceof Player ) {
    Player player = (Player) obj;
    player.pause();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T14:07:17.467

您应该确保返回的类

```
 dc.getRemoteObject 
```

实现接口播放器

# android - 为什么我不能在我的 Android 应用程序中创建 SQLite 数据库

> ID：14182870
> 
> 赞同：1
> 
> 时间：2013-01-06T14:04:37.153
> 
> 标签：android, database, sqlite, android-emulator, oncreate

嗨，我的 android 应用程序有问题。我想为我的应用程序使用一个 sqlite 数据库，并且我有一个使用`onCreate()`,`onPause()`和`onResume()`方法的活动。我已经建立了一个类`DatenbankManager`，它创建了一个表 ID 和名称，但是如果我用模拟器启动我的应用程序，我会收到一条消息，然后我的应用程序关闭。

这是我的 DatenbankManager 类：

```
package de.tarasov.database_example_tarasov;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatenbankManager extends SQLiteOpenHelper {

    private static final String DB_Name = "Stundenplanname.db";
    private static final int DB_VERSION = 1;
    private static final String KLASSEN_CREATE = "CREATE TABLE Stundenplan(" +
    "_id INTEGER PRIMARY KEY AUTOINCREMENT, "+
            "name TEXT NOT NULL";
    private static final String KLASSEN_DROP = "DROP TABLE IF EXIST Stundenplan";

    //Konstruktor
    public DatenbankManager(Context context) {
        super(context, DB_Name, null, DB_VERSION);

    }

    //Methode wenn eine Datenbank erstellt werden muss
    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(KLASSEN_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

            db.execSQL(KLASSEN_DROP); // Löscht Tabelle wenn nicht vorhanden 
            onCreate(db); //Erstellt Tabelle
    }

} 
```

这是我的主要活动：

```
package de.tarasov.database_example_tarasov;

import android.os.Bundle;
import android.widget.Toast;
import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;

public class MainActivity extends Activity {

    private SQLiteDatabase mDatenbank;
    private DatenbankManager mHelper;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mHelper = new DatenbankManager(this);
    }

    @Override
    protected void onPause() {
        super.onPause();
        mDatenbank.close(); //Schließt Datenbank

        Toast.makeText(this, 
                getResources().getString(R.string.db_close),
                Toast.LENGTH_SHORT).show(); 
    }

    @Override
    protected void onResume() {     
        super.onResume();
        mDatenbank = mHelper.getReadableDatabase(); //Datenbank öffnen

        //Gibt Kurztext aus
        Toast.makeText(this, 
                getResources().getString(R.string.db_open),
                Toast.LENGTH_SHORT).show(); 
    }

} 
```

这是错误消息：

![在此处输入图像描述](../Images/314fbb140ab36b64004f467912794891.png)

如果我进行调试，我会看到：

```
Source not found. 
```

在 LogCat 我看到这个：

![在此处输入图像描述](../Images/a0b58a3002ea94d142860110cee08a75.png)

我讨厌这个调试器：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:11:18.607

`)`您在 create table 语句中忘记了：

```
private static final String KLASSEN_CREATE = "CREATE TABLE Stundenplan(" +
    "_id INTEGER PRIMARY KEY AUTOINCREMENT, "+
            "name TEXT NOT NULL);"; 
```

# iphone - 自定义 UISegmentedControl 问题（以编程方式和界面生成器）

> ID：14182877
> 
> 赞同：0
> 
> 时间：2013-01-06T14:05:10.303
> 
> 标签：iphone, objective-c, ios, xcode, uisegmentedcontrol

我正在为每个段创建一个带有自定义图像的 UISegmentedControl。以编程方式，这对我有用：

```
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(30, 0, 170, 31)];
segmentedControl.tintColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"ebd-toolbar-bg"]];
[segmentedControl insertSegmentWithImage:[UIImage imageNamed:@"eatIcon"] atIndex:0 animated:NO];
[segmentedControl insertSegmentWithImage:[UIImage imageNamed:@"buyIcon"] atIndex:1 animated:NO];
[segmentedControl insertSegmentWithImage:[UIImage imageNamed:@"doIcon"] atIndex:2 animated:NO];
segmentedControl.contentMode = UIViewContentModeScaleToFill;
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar; 
```

但是，该段的自定义图像并没有完全填满该段，并且背景显示了一点。问题是背景图像没有相同的颜色，所以看起来很奇怪，如下所示。您可以在每个段周围看到一点黑色。

![这个](../Images/8c28d6dde770f90045ebfaef2d41c98b.png)

我尝试使用`UIViewContentModeScaleToFill`，但这也不起作用。有没有办法设置段的图像大小？如果是这样，怎么做？它必须有多大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:47:23.610

尝试使用该`- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets`方法。在您的情况下，可能是：

```
[segmentedControl insertSegmentWithImage:[[UIImage imageNamed:@"eatIcon"] resizableImageWithCapInsets:UIEdgeInsetsMake(0,10,0,10)] atIndex:0 animated:NO]; 
```

请注意，您需要确定`UIEdgeInsetsMake(CGFloat top, CGFloat left, CGFloat bottom, CGFloat right);`函数的正确值

# regex - 正则表达式匹配 LaTeX 方程

> ID：14182879
> 
> 赞同：11
> 
> 时间：2013-01-06T14:05:25.393
> 
> 标签：regex, latex

我正在尝试将 TeXWorks 编辑器配置为使用与 TeXMaker 相同的语法着色。然而，TexWorks 使用正则表达式来指定应该着色的内容。不幸的是，它没有数学的默认设置。

我想匹配`$`and`$`之间的所有内容，and 之间的所有内容， `\[`and之间的所有内容， and`\]`之间的所有内容。后者不是很有必要，因为它很少在 LaTeX 文档中使用。`\(``\)``$$``$$`

它也可以是多个正则表达式来匹配所有情况。

当然`\$`是逃脱了，所以我不想匹配它，也不想`\\[`等等。

然后我也想匹配 and 之间的所有内容`\begin{equation}`，`\end{equation}`但这很简单。

“做不到”是一个可能的答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T14:28:03.363

试试这个 PCRE 正则表达式：

```
(?<!\\)    # negative look-behind to make sure start is not escaped 
(?:        # start non-capture group for all possible match starts
  # group 1, match dollar signs only 
  # single or double dollar sign enforced by look-arounds
  ((?<!\$)\${1,2}(?!\$))|
  # group 2, match escaped parenthesis
  (\\\()|
  # group 3, match escaped bracket
  (\\\[)|                 
  # group 4, match begin equation
  (\\begin\{equation\})
)
# if group 1 was start
(?(1)
  # non greedy match everything in between
  # group 1 matches do not support recursion
  (.*?)(?<!\\)
  # match ending double or single dollar signs
  (?<!\$)\1(?!\$)|  
# else
(?:
  # greedily and recursively match everything in between
  # groups 2, 3 and 4 support recursion
  (.*(?R)?.*)(?<!\\)
  (?:
    # if group 2 was start, escaped parenthesis is end
    (?(2)\\\)|  
    # if group 3 was start, escaped bracket is end
    (?(3)\\\]|     
    # else group 4 was start, match end equation
    \\end\{equation\}
  )
)))) 
```

请参阅此正则表达式：[https ://regex101.com/r/wP2aV6/25](https://regex101.com/r/wP2aV6/25)

由于此正则表达式使用递归，它将正确处理嵌套的数学表达式。

这仅适用于 PCRE 兼容的正则表达式引擎。它需要正则表达式引擎的一些高级功能，例如负向回溯、条件表达式和递归，这些在所有正则表达式引擎中都不存在。

除非你需要一些非常简单的东西，否则我建议不要使用这个正则表达式，而是使用适当的 LaTeX 解析器。

# windows-8 - WinJS - 无法获取未定义或空引用的属性“forEach”

> ID：14182884
> 
> 赞同：2
> 
> 时间：2013-01-06T14:05:59.383
> 
> 标签：windows-8, microsoft-metro, winjs

我正在为 Windows 8 开发我的第一个 WinJS 应用程序，我只是想替换 2 网格模板中给出的基本代码，我收到了这个错误：

```
Unable to get property 'forEach' of undefined or null reference 
```

我的代码：

```
getData().forEach(function (item) {
    list.push(item);
}); 
```

初始功能：

```
function getData() {

    // JSON request
    WinJS.xhr({
        type: "GET",
        url: "http://mytld.com/mobile/pagethatreturnsjsondata.php"
    }).then(
            function (response) {
                OnSuccessCall(response);
            },
            function (error) {
                var err = error;
                console.log("Error : " + err.message);
            },
            function (progress) { }
    );
} 
```

以下是从返回 JSON 数据的 php webservice 获取数据：

```
function OnSuccessCall(response) {
    var itemContent = "<p>Item Content</p>";
    var itemDescription = "Item Description";
    var groupDescription = "Group Description";

    // These three strings encode placeholder images. You will want to set the
    // backgroundImage property in your real data to be URLs to images.
    var darkGray = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXY3B0cPoPAANMAcOba1BlAAAAAElFTkSuQmCC";
    var lightGray = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXY7h4+cp/AAhpA3h+ANDKAAAAAElFTkSuQmCC";
    var mediumGray = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXY5g8dcZ/AAY/AsAlWFQ+AAAAAElFTkSuQmCC";

    // Each of these sample groups must have a unique key to be displayed separately.
    var sampleGroups = [
        { key: "group1", title: "prayers", subtitle: "submitted prayers", backgroundImage: darkGray, description: groupDescription }
    ];

    var x = response.responseText.length;
    var json = JSON.parse(response.responseText);
    var sampleItems = [];
    for (var i = 0; i < json.length - 1; i++) {
        sampleItems.push({
            group: sampleGroups[0],
            title: json[i].text,
            subtitle: "Item Subtitle: 1",
            description: itemDescription,
            content: itemContent,
            backgroundImage: lightGray
        });
    }

    return sampleItems;
} 
```

我可以在 sampleItems 中看到数据：

![带有对象数据的监视窗口](../Images/202d44d079df7b4150cf7e601e2abd16.png)

我显然做错了什么，因为当我将我的对象结果与原始示例数据的结果进行比较时，它们实际上是相同的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:54:39.597

您的`getData()`函数没有`return`语句，因此它返回`undefined`. 而且你不能`forEach`上`undefined`。

纵观全局：您的`getData()`使用`xhr`，因此它实际上并没有返回结果，而是异步获取数据。因此，您不能`forEach`返回值，因为结果还不存在。您必须等待 promise 完成，然后才能调用`forEach`promise 结果。

```
function getData() {
    // add "return" here so the function returns a Promise
    return WinJS.xhr({
        type: "GET",
        url: "http://mytld.com/mobile/pagethatreturnsjsondata.php"
    }).then(
            function (response) {
                // add "return" here to specify the promise's completed value
                return OnSuccessCall(response);
            },
            function (error) {
                var err = error;
                console.log("Error : " + err.message);
            },
            function (progress) { }
    );
} 
```

现在它`getData()`返回了一些东西（一个 Promise），你可以安排工作在 Promise 完成时发生。

```
getData().then(function(results) { results.forEach(...) }); 
```

# php - 在加载页面上执行查询

> ID：14182885
> 
> 赞同：0
> 
> 时间：2013-01-06T14:06:04.393
> 
> 标签：php, javascript, jquery, html, mysql

我想在加载期间执行查询。我该怎么做？这是我的代码。这是我要执行的查询。

```
<?php
    mysql_query("UPDATE `requests` SET `stat_id`= 3 WHERE `proj_id`='".$_GET['projid']."' and DATE(`req_date`)='".$_GET['date']."'");   
?> 
```

我有一个javascript

```
<script type="text/javascript">
$(document).ready(function(){
    $('input#approve').click(function(){
        var date = $(this).parent().attr('id');
        var projid = $(this).parent().attr('class');

        window.location.href="index.php?page=requests&date="+date+"&projid="+projid+"";
    });
});
</script> 
```

单击按钮批准时，页面刷新，但查询未执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:16:24.067

你也可以使用ajax，在你的java脚本中写这个

```
var date = $(this).parent().attr('id');
var projid = $(this).parent().attr('class');
$.ajax({
    type: "POST",
    url: "index.php",
    data: "{stat_id: 3,proj_id:projid,Date:date}",
    success: function(result) {
        alert(result);
    } 
```

结果将是布尔值或 0/1 的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:19:14.517

```
$(document).ready(function(){
    $('input#approve').click(function(){
        var elem = $(this).parent(),
            date = elem.attr('id'),
            projid = elem.attr('class');

        $.get("index.php", { page: 'requests', date: date, projid: projid }, function() {   
            console.log('updated!')
        })
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T14:27:21.540

您`mysql_query`将返回一个值，您可以使用它来查看问题是否在查询中以及是否正在执行。

```
<?php
  //Output GET Params
  echo $_GET['date'] . " " . $_GET['projid'];

 //Escape Slashes in Date http://php.net/manual/en/function.addslashes.php
  $date = addslashes($_GET['date']);

  $result = mysql_query("UPDATE `requests` SET `stat_id`= 3 WHERE `proj_id`='".$_GET['projid']."' and DATE(`req_date`)='".$date."'");  

  //Check to see if an error has occurred. If so output.
  if (!$result) {
     die('Invalid query: ' . mysql_error());
  }

?> 
```

Javascript：（硬编码值）

```
<script type="text/javascript">
$(document).ready(function(){
$('input#approve').click(function(){

   //Hard code for now to ensure you have accurate data
    var date = "12/12/12";
    var projid = 15;

    window.location.href="index.php?page=requests&date="+date+"&projid="+projid+"";
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T14:34:51.823

您可以使用以下代码`index.php`更新表

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

mysql_query("UPDATE Persons SET stat_id=3 WHERE proj_id='".$_POST['projid']."' and DATE(`req_date`)=DATE('".$_POST['date']."')");

mysql_close($con);
?> 
```

检查[w3Schools](http://www.w3schools.com/php/php_mysql_update.asp)

然后用ajax调用这个页面

```
$.ajax({
  type: "POST",
  url: "Index.php",
  data: { projid: projid , date: date }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

[jQuery ajax 参考](http://api.jquery.com/jQuery.ajax/)

# c#-4.0 - RavenDB 查询不补充可枚举属性

> ID：14182893
> 
> 赞同：0
> 
> 时间：2013-01-06T14:07:19.843
> 
> 标签：c#-4.0, collections, ravendb

我有一个名为的域对象`Campaign`，其中包含一些字符串属性和一组`TrackingEntry`对象。每当我从文档会话中检索查询时，此属性为空，即使我至少保存了一个跟踪条目。如何检索活动对象以便同时检索跟踪条目集合？以下是相关代码`Campaign`：

```
public class Campaign : Entity
{
    private ICollection<TrackingEntry> trackingEntries;

    public string BrandId { get; set; }

    public ICollection<TrackingEntry> TrackingEntries
    {
        get { return trackingEntries ?? (trackingEntries = new Collection<TrackingEntry>()); }
    }
} 
```

有问题的方法采用逗号分隔的品牌 ID 字符串，检索具有这些品牌 ID 的所有活动，循环并根据跟踪条目集合的内容执行一些自定义逻辑，等等。以下是相关部分：

```
 var brandIds = input.Split(',');
        var campaigns = session.Query<Campaign>().Where(x => x.BrandId.In(brandIds));
        foreach (var campaign in campaigns)
        {
            DateTime? dateClaimed = null;
            var trackingEntry = campaign.TrackingEntries.FirstOrDefault(x => x.ConsumerId == consumer.Id);
            if (trackingEntry != null)
            {
                dateClaimed = trackingEntry.CreatedOn;
            }
        } 
```

我知道有一个跟踪条目，但设置断点会显示一个空集合。我认为这可能是乌鸦缓存和过时的索引，但在将记录写入数据库后 24 小时，问题仍然存在。我在想我可能需要一个 map-reduce 索引来处理该集合，但对它们的工作方式仍然很模糊。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:14:48.033

唯一的问题是您设置属性的方式。默认情况下，私有字段不会序列化，公共属性只有在定义了 setter 时才会反序列化。设置器本身可以是公共的或私有的。如果您担心初始化列表，只需在构造函数中进行。

这是最简单的方法：

```
public class Campaign : Entity
{
    public Campaign()
    {
        TrackingEntries = new Collection<TrackingEntry>();
    }

    public string BrandId { get; set; }

    public ICollection<TrackingEntry> TrackingEntries { get; private set; }
} 
```

这同样适用于任何集合类型。（数组、列表、可枚举等）

另一种方法是通过归因。但我认为第一种方法更好，因为它使您的实体不受依赖，并且更易于阅读。

```
public class Campaign : Entity
{
    [JsonProperty("TrackingEntries")]
    private ICollection<TrackingEntry> trackingEntries;

    public string BrandId { get; set; }

    [JsonIgnore]
    public ICollection<TrackingEntry> TrackingEntries
    {
        get { return trackingEntries ?? (trackingEntries = new Collection<TrackingEntry>()); }
    }
} 
```

# java - 在 Spring 中使用 Jackson 来自 JSON 的 Spring 基本 pojo

> ID：14182902
> 
> 赞同：1
> 
> 时间：2013-01-06T14:08:29.390
> 
> 标签：java, json, spring, jackson

```
@JsonCreator
public Foo( @JsonProperty("title") String title,
            @JsonProperty("strTags") Collection<String> strTags) {
        this.title = title;
        this.strTags = strTags;
} 
```

方法 sig 如下所示：

```
@RequestMapping(value = "/Preview", method = RequestMethod.POST)
public ModelAndView preview(@RequestBody final Foo foo) {..} 
```

测试是：

```
String json = "\"foo\":{\"title\":\"test\",\"strTags\":[\"Tag1\",\"tag2\"]}";
MvcResult mvcResult =  this.mockMvc.perform(
  post("/Preview/").contentType(MediaType.APPLICATION_JSON).content(json))
    .andExpect(status().isOk())
    .andExpect(model().attributeExists("foo"))
    .andExpect(view().name("foo/preview"))
    .andDo(print())
    .andReturn();
} 
```

但是，我收到错误：

```
no suitable creator method found to deserialize from JSON String 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:28:55.780

属性`title`和`strTags`应该是顶级的，如下所示：

```
String json = "{\"title\":\"test\",\"strTags\":[\"Tag1\",\"tag2\"]}"; 
```

# android - 设置动态服务器

> ID：14182904
> 
> 赞同：1
> 
> 时间：2013-01-06T14:09:08.510
> 
> 标签：android, ios, mobile, proxy, webserver

嗨，我是一名 Web 开发人员，在一家初创公司工作，从事移动应用程序（iOS 和 Android）工作，该应用程序在 Web 平台上有一个数据库，我想制作一个静态中间服务器，它将向客户发送地址（登录时）他们应该使用。例如，如果客户端需要向地址 xx.yy.zz 发出 HTTP 请求，他将首先从静态地址请求它，比如说 aa.bb.cc（这基本上意味着如果 http 请求的地址正在被更改，它是值应该只需要在 aa.bb.cc 中更改，而不是在客户端 - 不需要升级或什么都不做）。

任何建议、评论、实施方法、指南等，我们将不胜感激，提前 tnx =)

ps 它与代理非常相似，唯一的区别是我不保存缓存而是管理数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:45:17.207

我不明白你的问题是什么。如果您向客户端发送它应该用于进一步服务器通信的地址 xx.yy.zz，则客户端只需将该 xx.yy.zz 存储在某个地方，然后将其用作要连接的服务器地址。那么也许您想知道如何存储地址？在 Android 中，您可以将其存储在首选项中或将其保存在应用程序中的变量中等等......有很多示例如何为应用程序的生命周期存储一些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:04:08.640

您的问题非常有用且正确。实际上，它发生在每个具有某些服务器访问权限的应用程序中。这个概念称为 webserver-appserver 配置，根据安全问题，这也很有用。

应用程序不应直接访问您的 AppServer，有时可能会有风险。因此，您可以做什么使 Apache 网络服务器作为您的静态服务器，并将您的应用程序服务器置于防火墙后面。因此，当从设备发出请求时，什么设备必须只知道网络服务器 IP 和端口，然后网络服务器有一个配置文件来将请求重定向到设备未知的应用程序服务器（带有 IP 和端口）。

浏览此 url 以更好地理解从 Apache Web 服务器到另一台服务器的重定向，这不是一项大任务，您只需要编辑配置文件：

[http://library.linode.com/web-servers/apache/configuration/redirecting-urls](http://library.linode.com/web-servers/apache/configuration/redirecting-urls)

如果您希望应用服务器的安全性，最好不要在 webserver 和 appserver 之间使用默认端口（8080），使用某些指定的端口并打开它们仅用于它们之间的通信（从发送响应的 web 服务器获取请求）而不是全部。

如果您想了解有关安全性和端口的更多信息，请查看以下内容：

[http://www.grouppolicy.biz/2010/07/how-to-manage-windows-firewall-settings-using-group-policy/](http://www.grouppolicy.biz/2010/07/how-to-manage-windows-firewall-settings-using-group-policy/)

# r - 与不同向量长度的相关性

> ID：14182912
> 
> 赞同：1
> 
> 时间：2013-01-06T14:10:30.253
> 
> 标签：r, expand

我之前问过一个关于这个的问题，这个问题被迁移到了 stats.stackexchange

从那里得到答案后，我对 R 中的实现有一些问题来解决这个问题，并认为我应该在这里问他们。

这就是我想要制作的：

对于每个权益，我有两个单独的列，价格和时间。如果股权 X 存在时间但股权 Y 不存在，则应将先前的价格放入向量中，反之亦然。

if循环是这里的解决方案吗？谢谢你的帮助。

如下例：

```
X           Y   
price   time   price   time
10     540     20  540
11     541     21  541
12     542     22  543
13     544     23  544
14     545     24  545

price   time   price   time
10     540     20  540
11     541     21  541
12     542     21  542
12     543     22  543
13     544     23  544
14     545     24  545 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:23:15.963

```
x <- read.table(text = "price   time
 10     540
 11     541
 12     542
 13     544
 14     545", header = TRUE);

 y <- read.table(text = "price   time
  20  540
  21  541
  22  543
  23  544
  24  545", header = TRUE)

 big <- merge(x, y, all = TRUE, by = "time")
 big
 #   time price.x price.y
 # 1  540      10      20
 # 2  541      11      21
 # 3  542      12      NA
 # 4  543      NA      22
 # 5  544      13      23
 # 6  545      14      24

library(zoo)
big$price.x <- na.locf(big$price.x)
big$price.y <- na.locf(big$price.y) 
```

如果第一个值是一个`NA`或什至是第二个值等等，`NA`我认为你想为所有先前的条目使用第一个非 NA 值？

例如

```
NA,1,2,3,NA
# changed to
1,1,2,3,3 
```

如果是这样，这将起作用：

```
replaceKEEPFIRST <- function(x) {
x2    <- na.locf(x)
diffx <- length(x) - length(x2)
val   <- c(rep(x2[1],diffx),x2)
return(val)
}

myx <- c(NA,1,2,3,NA)
myy <- c(1,2,3,NA)
replaceKEEPFIRST(myx)
replaceKEEPFIRST(myy) 
```

并为您的工作：

```
big$price.x <- replaceKEEPFIRST(big$price.x)
big$price.y <- replaceKEEPFIRST(big$price.y) 
```

# postgresql - 使用 plpgsql 更新级联表

> ID：14182914
> 
> 赞同：0
> 
> 时间：2013-01-06T14:10:39.947
> 
> 标签：postgresql, plpgsql, cascade

所以这是我的更新功能：

```
CREATE OR REPLACE FUNCTION api.book_update(
  in_id        BIGINT,
  in_category  VARCHAR,
  in_published DATE,
  in_author    VARCHAR,
  in_name      VARCHAR
) RETURNS VOID AS $$
DECLARE
in_category_id BIGINT;
tmp            BIGINT;
BEGIN
  SELECT COUNT(*) INTO tmp FROM schemas.book;
  IF (NOT (tmp <> 0)) THEN
    RETURN;
  END IF;
  SELECT
    category_id
  INTO
    in_category_id
  FROM
    schemas.book
  WHERE
    id = in_id;

  SELECT category_id INTO tmp FROM schemas.category WHERE name = in_category;
  IF (NOT FOUND)
  THEN
    SELECT nextval('schemas.category_category_id_seq') INTO tmp;
    UPDATE schemas.book
    SET
      category_id = tmp,
      published   = in_published,
      author      = in_author,
      name        = in_name
    WHERE
      id          = in_id;
    INSERT INTO schemas.category (
      category_id,
      name
    ) VALUES (
      tmp,
      in_category
    );
  ELSE
    SELECT category_id INTO tmp FROM schemas.category WHERE name = in_category;
    UPDATE schemas.book
    SET
      category_id = tmp,
      published   = in_published,
      author      = in_author,
      name        = in_name
    WHERE
      id          = in_id;
  END IF;
END;
$$
LANGUAGE plpgsql; 
```

终端输出：

```
pgdb=# select * from api.book_add('aaa', '10-12-13', 'Aauthor','Name');
 book_add 
----------

(1 row)

pgdb=# select * from api.book_list;
 id | category | published  | author  | name 
----+----------+------------+---------+------
  1 | aaa      | 2013-10-12 | Aauthor | Name
(1 row)

pgdb=# select * from api.book_update(1, 'bbb', '10-12-13', 'Aauthor','Name');
ERROR:  insert or update on table "category" violates foreign key constraint "category_category_id_fkey"
DETAIL:  Key (category_id)=(2) is not present in table "book".
CONTEXT:  SQL statement "INSERT INTO schemas.category (
      category_id,
      name
    ) VALUES (
      tmp,
      in_category
    )"
PL/pgSQL function "book_update" line 31 at SQL statement
pgdb=# 
```

为什么它不存在，当我在“book”中将 category_id 更新为 tmp，然后将此 tmp 插入“category”表中
这是完整的模式[脚本](http://paste.ubuntu.com/1503291/) 非常感谢对它的建议，因为我是 nw

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:46:41.533

通常一本书应该引用一个类别而不是反之亦然。书籍与类别之间存在 N::1 关系；两本书可以指同一个类别。

```
DROP SCHEMA IF EXISTS tmpschemas CASCADE;
CREATE SCHEMA tmpschemas;

CREATE TABLE tmpschemas.category
  ( category_id  BIGSERIAL PRIMARY KEY
  , catname         VARCHAR   NOT NULL
  , UNIQUE(catname)
  , CHECK (catname <> '')
);

CREATE TABLE tmpschemas.book
  ( id           BIGSERIAL PRIMARY KEY
  , category_id  BIGINT    NOT NULL REFERENCES tmpschemas.category(category_id) -- ON DELETE CASCADE ON UPDATE RESTRICT
  , published    DATE      NOT NULL
  , author       VARCHAR   NOT NULL
  , bookname         VARCHAR   NOT NULL
  , UNIQUE(category_id, published, author, bookname)
  , CHECK (TEXT(published) <> '')
  , CHECK (author <> '')
  , CHECK (bookname <> '')
); 
```

请注意，我删除了您的级联内容，我认为这些类别相当稳定（无论如何，谁会想要更新串行列）删除时的级联会更加棘手；我不认为你想扔掉所有关于园艺的书，仅仅因为“园艺不再存在”这个类别。*永远不*应该删除类别。

注意：如果您希望一本书能够属于*多个*类别，您应该使用 N::M 联结表。

更新：简化功能：

```
CREATE OR REPLACE FUNCTION tmpapi.book_add(
  in_catname  VARCHAR,
  in_published DATE,
  in_author    VARCHAR,
  in_bookname      VARCHAR
) RETURNS VOID AS $$
BEGIN

  INSERT INTO tmpschemas.category(catname)
  SELECT in_catname
  WHERE NOT EXISTS (
        SELECT *
        FROM tmpschemas.category nx
        WHERE nx.catname = in_catname
        );

    INSERT INTO tmpschemas.book ( category_id, published, author, bookname)
    SELECT cc.category_id
        , in_published,in_author, in_bookname
    FROM tmpschemas.category cc
    WHERE cc.catname = in_catname
        ;

END;
$$
LANGUAGE plpgsql;

SELECT tmpapi.book_add('gardening', '2013-01-06' , 'Maggie Thatcher' , 'Destructing flowers Thoroughly' );
SELECT tmpapi.book_add('gardening', '1980-05-26' , 'Umberto Eco' , 'The name of the rose' );

SELECT * FROM tmpschemas.book; 
```

结果：

```
 id | category_id | published  |     author      |            bookname            
----+-------------+------------+-----------------+--------------------------------
  1 |           1 | 2013-01-06 | Maggie Thatcher | Destructing flowers Thoroughly
  2 |           1 | 1980-05-26 | Umberto Eco     | The name of the rose
(2 rows) 
```

如您所见，两本书都引用了相同的 category_id。

UPDATE2：这里是更新功能：

```
CREATE OR REPLACE FUNCTION tmpapi.book_update(
  in_id        BIGINT,
  in_catname  VARCHAR,
  in_published DATE,
  in_author    VARCHAR,
  in_bookname      VARCHAR
) RETURNS VOID AS $$
BEGIN

  INSERT INTO tmpschemas.category(catname)
  SELECT in_catname
  WHERE NOT EXISTS (
        SELECT *
        FROM tmpschemas.category nx
        WHERE nx.catname = in_catname
        )
        -- avoid inserting a category
        -- if the book to be updated does not exist
  AND EXISTS (
        SELECT * FROM tmpschemas.book bk
        WHERE bk.id = in_id
        )
        ;

    UPDATE tmpschemas.book bk
      SET category_id = cc.category_id
        , published = in_published
        , author = in_author
        , bookname = in_bookname
    FROM tmpschemas.category cc
    WHERE cc.catname = in_catname
      AND bk.id = in_id
        ;

END;
$$
LANGUAGE plpgsql;

SELECT tmpapi.book_update(1, 'politics', '2013-01-06' , 'Maggie Thatcher' , 'Destructing flowers Thoroughly' );
SELECT * FROM tmpschemas.book; 
```

结果：

```
CREATE FUNCTION
 book_update 
-------------

(1 row)

 id | category_id | published  |     author      |            bookname            
----+-------------+------------+-----------------+--------------------------------
  2 |           1 | 1980-05-26 | Umberto Eco     | The name of the rose
  1 |           2 | 2013-01-06 | Maggie Thatcher | Destructing flowers Thoroughly
(2 rows)

CREATE VIEW
 id | category  | published  |     author      |            bookname            
----+-----------+------------+-----------------+--------------------------------
  2 | gardening | 1980-05-26 | Umberto Eco     | The name of the rose
  1 | politics  | 2013-01-06 | Maggie Thatcher | Destructing flowers Thoroughly
(2 rows) 
```

# eclipse - 使用 Eclipse 调试 node.js 应用程序

> ID：14182916
> 
> 赞同：1
> 
> 时间：2013-01-06T14:10:47.093
> 
> 标签：eclipse, node.js, debugging

我正在尝试按照有关如何使用 Eclipse[调试 node.js 应用程序的说明进行操作。](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger)但是断点没有启用，如下面的屏幕截图所示。谁能指出我的解决方案。

![在此处输入图像描述](../Images/cb4da589af10f3a96a3ac87531e905f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:24:17.233

看起来您的断点已被禁用。通过取消选中在断点视图中跳过所有断点来启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:15:57.293

嘿，您正在使用他们在我阅读的教程中使用的相同刻度功能。应该是同一个教程。

在像这样设置 Eclipse 时，我发现的另一件有趣的事情是，为了能够调试一个真正的应用程序，你必须延迟它的运行，就像自动收报机一样，但当然要更智能一些。到目前为止，这是我的工作方式..（希望这也会有所帮助）：

```
function __myapp_start() {
    console.log('Running app ...');
    // run your app here ...
};

if (process.argv[2] === '-dbg') { // `node --debug myapp.js -dbg`  wait for the debugger to connect. 
    function __myapp_pause() {
        var paused = new Date().getTime();
        debugger; // will return immediately if the debugger is not connected yet
        var started = new Date().getTime();
        if (started - paused < 500) { // if we returned relatively quickly, assume we're not connected and loop
            setTimeout(__myapp_pause, 500);
        } else { // the debugger actually paused and took time to return; we're connected. run.
            __myapp_start();
        }
    }

    __myapp_pause(); // attempt to pause the debugger until it actually does pause, then continue
} else { // normal production path
    __myapp_start();
} 
```

# php - 在多页上打印大表格

> ID：14182919
> 
> 赞同：0
> 
> 时间：2013-01-06T14:11:03.763
> 
> 标签：php, html, css, printing, html-table

我有一个 PHP 输出，创建一个 HTML 表格（尺寸 XL），我想`print`在我的页面上有一个按钮，它会自动确保表格使用正确的尺寸等打印出来。

例如，我希望将我的表格水平打印出来，并在每一页上打印表格标题，而表格之外没有所有 PHP 按钮和参数。

有没有一种有效的方法来做到这一点而不必重写整个事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:15:07.593

我相信最好的答案是在提供打印 GET 参数时动态插入“打印”CSS 样式表。这样，您就可以从打印的文档中隐藏所有 HTML 元素，而无需对代码进行大量检查。

此处提出并回答了类似的问题： [如何制作网页的可打印版本？](https://stackoverflow.com/questions/8994403/how-to-make-printable-version-of-a-webpage)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:16:12.850

没有办法准确一致地在 html 中提供打印布局（尤其是跨多个页面），因为不同的浏览器会以不同的方式呈现您的页面。如果您想 100% 确定页面的打印方式，处理此问题的一种方法是呈现为 PDF。

[PrinceXML](http://princexml.com/)是一种将 HTML 输出转换为 PDF 的非常好的方法。

# asp.net - 不支持关键字：“提供者”

> ID：14182927
> 
> 赞同：3
> 
> 时间：2013-01-06T14:12:02.703
> 
> 标签：asp.net, ado.net, connection-string, provider

我有这个错误：

不支持关键字：“提供者”。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：不支持关键字：“提供者”。

源错误：

```
Line 24:     {
Line 25:         Session["id"] = e.CommandArgument.ToString();
Line 26:         SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
Line 27:            con.Open();
Line 28:             SqlCommand cmd1 = new SqlCommand("INSERT INTO tb2 (id, name) SELECT id, name FROM tb1 where id='"+Session["id"].ToString()+"'", con);

Source File: c:\inetpub\wwwroot\logon\page.aspx    Line: 26 
```

这是我的完整代码：

```
<%@ Page Language="C#" Debug="true" %>
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace = "System.Data.SqlClient" %>

<script runat="server" type="css">

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        bind();
    }
}
protected void bind()
{
    PendingRecordsGridview.DataSourceID = "";
    PendingRecordsGridview.DataSource = sd1;
    PendingRecordsGridview.DataBind();
 }
protected void PendingRecordsGridview_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "accept")
    {
        Session["id"] = e.CommandArgument.ToString();
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            con.Open();
            SqlCommand cmd1 = new SqlCommand("INSERT INTO tb2 (id, name) SELECT id, name FROM tb1 where id='"+Session["id"].ToString()+"'", con);
            SqlCommand cmd2 = new SqlCommand("delete from tb1 where id='"+Session["id"].ToString()+"'", con);
            cmd1.ExecuteNonQuery();
            cmd2.ExecuteNonQuery();
            bind();
    }
}
</script>
<form id="form1" runat="server">
<asp:GridView ID="PendingRecordsGridview" runat="server" AutoGenerateColumns="False" DataKeyNames="id" onrowcommand="PendingRecordsGridview_RowCommand" DataSourceID="sd1">
        <Columns>
            <asp:templatefield HeaderText="Accept">
                <ItemTemplate>
                    <asp:Button CommandArgument='<%# Bind("id") %>' ID="Button1" runat="server" CausesValidation="false" CommandName="accept" Text="Accept" />
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="name" SortExpression="name">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("name") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("name") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="id" SortExpression="id">
                <EditItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("id") %>'>
                    </asp:Label>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("id") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="sd1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>"
        SelectCommand="SELECT * FROM [tb1]" DeleteCommand="DELETE FROM [tb1] WHERE [id] = ?" InsertCommand="INSERT INTO [tb1] ([name]) VALUES (?)"  UpdateCommand="UPDATE [tb1] SET [name] = ? WHERE [id] = ?">
        <DeleteParameters>
            <asp:parameter Name="id" Type="Int32" />
        </DeleteParameters>
        <UpdateParameters>
            <asp:parameter Name="name" Type="String" />
            <asp:parameter Name="id" Type="Int32" />
        </UpdateParameters>
        <InsertParameters>
            <asp:parameter Name="name" Type="String" />
        </InsertParameters>
</asp:SqlDataSource>
</form> 
```

网页配置

```
<configuration>
    <connectionStrings>

        <add name="ConnectionString" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\inetpub\wwwroot\logon\_private\db1.mdb"
            providerName="System.Data.OleDb" />
    </connectionStrings>
</configuration> 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:45:44.290

看起来您正在尝试使用 SQL Server 连接对象访问 Access 数据库。（连接配置是指 Jet 数据库引擎）

您应该改用`OleDbConnection`（和相关`OleDbCommand`的等）。

有关连接字符串的更多信息，请参见：[http ://connectionstrings.com/access](http://connectionstrings.com/access)

而且，正如评论中提到的，您的代码容易受到 SQL 注入攻击。您可能想阅读[如何保护自己免受 SQL 注入攻击](http://colinmackay.scot/2005/04/23/sql-injection-attacks-and-some-tips-on-how-to-prevent-them/) （本文适用于 SQL Server，但许多概念也适用于 Access）

# wordpress - 标准的 Wordpress 目录应该具有哪些读/写/执行权限？

> ID：14182928
> 
> 赞同：2
> 
> 时间：2013-01-06T14:12:02.990
> 
> 标签：wordpress, permissions, directory

我们的主机中有一个标准的 Wordpress 站点设置。以前的所有者一直在更改所有文件/目录的读/写权限。我之前设置了许多 Wordpress 网站，但从来没有弄乱这些权限。文件应具有的标准权限是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:35:27.560

在这里，您可以找到有关 Wordpress 文件权限的所有注意事项的完整文章：http: [//codex.wordpress.org/Changing_File_Permissions](http://codex.wordpress.org/Changing_File_Permissions)

# math - 用于移动播放器的余弦和正弦

> ID：14182930
> 
> 赞同：0
> 
> 时间：2013-01-06T14:12:22.637
> 
> 标签：math, language-agnostic

在这个问题的公认答案中：[Java 游戏 - 如何阻止玩家越过障碍物](https://stackoverflow.com/questions/14046535/java-game-how-to-stop-player-from-walking-over-obstacles)我遇到了这段代码：

```
xSpeed = Math.cos(direction) * speed;
ySpeed = Math.sin(direction) * speed; 
```

这是做什么的？我读到（当然也猜到了，因为变量名）它将方向和速度转换为 x 速度和 y 速度。但是 sin 和 cos 有什么用呢？这接受什么样的方向？因为 AlekHalfHeart 没有给出进一步的解释，所以我认为这是一个很常见的片段，但我以前从未见过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:05:55.610

我想我想通了，这要归功于 Oli Charlesworth 的评论“如果你画出正在发生的事情的图表，你会得到一个三角形！;)' 和相当数量的图表。我会试着解释一下，但我从来没有用过英语数学（我是荷兰人），所以我不知道所有事情的适当数学术语，但我会尝试：

我一开始不明白 O. Charlesworth 的三角形在哪里。但在画了几张图后，我发现“玩家”的移动线与 x 轴或 y 轴形成了一个三角形。
在那之后我仍然不明白正弦和余弦在那里做了什么，但是在重新阅读和概括我的数学书之后，我发现x轴和斜边之间的关系（玩家的运动 - 嘿，我知道英文单词！）等于“玩家”沿 x 轴行进的距离。幸运的是（但并非巧合，它是 MATHS），这正是余弦返回的结果。如果您将 x 轴替换为 y 轴，将余弦替换为正弦，您就会得到我对为什么`ySpeed = ...`有效的解释。

我担心我的英语解释不完全正确，但那是因为我的英语技能，而不是我的数学技能。我希望它可以帮助某人。

PS我现在意识到我的问题真的很模糊。它还没有关闭是一个奇迹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:32:01.873

这是数学或物理背景，因此请查看此示例[Vector components](http://www.youtube.com/watch?v=o44-hrdxtyM)。Cos 和 Sin 用于计算向量的 X 和 Y 分量或在坐标系中的移动。方向是一个角度，运动是矢量，所以在 X 和 Y 分量上平移它之后，它们乘以速度，所以最后你得到了速度的 X 和 Y 分量。我不是数学教授，所以我希望你能理解:)

# .net - 在 VB.NET 中选择 Case True

> ID：14182936
> 
> 赞同：1
> 
> 时间：2013-01-06T14:13:04.367
> 
> 标签：.net, vb.net, select-case

我有以下选择案例，我想对字符串包含的内容进行一些检查，并为每种案例调用一些函数。但似乎如果多个条件为真，它只考虑第一个条件。问题是我有大约 113 个不同的案例。

我必须为每种情况使用 if 语句吗？

```
 Select Case True
          Case command.ToUpper.Contains(" S:")
'Do something
          Case command.ToUpper.Contains(" C:")
'Do something
          Case command.ToUpper.Contains(" *S")
'Do something
          Case command.ToUpper.Contains(" *C")
'Do something
          Case command.ToUpper.Contains(" CC")
'Do something
          Case command.ToUpper.Contains(" SS")
    End Select 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:20:51.210

这就是选择案例的定义方式。使用一系列 If 语句将起作用。

考虑一个表驱动的解决方案（伪代码）：

```
For Each pat In patterns
  If command contains pattern.pat
    perform pattern.action 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:03:35.857

只是一个想法，但是呢？

```
dim tempCommand as string = command.ToUpper()
dim match as boolean = true

while match andalso tempCommand.length > 0
    select case true
        Case tempCommand.Contains(" S:")
            'Do something
            'then do this    
            tempCommand = tempCommand.replace(" S:","")
        Case tempCommand.Contains(" C:")
            'Do something
            'then do this
            tempCommand = tempCommand.replace(" C:","")
        Case tempCommand.Contains(" *S")
            'Do something
            'then do this
            tempCommand = tempCommand.replace(" *S","")
        Case tempCommand.Contains(" *C")
            'Do something    
            'then do this
            tempCommand = tempCommand.replace(" *C","")
        Case tempCommand.Contains(" CC")
            'Do something
            'then do this
            tempCommand = tempCommand.replace(" CC","")
        Case command.ToUpper.Contains(" SS")
            'then do this
            tempCommand = tempCommand.replace(" SS","")    
        case else match = false
    end select
end while 
```

我假设根据您正在执行不同操作的各种标准，所以我不确定您将如何执行“执行 pattern.action”，除非这是一种动态执行代码的方式，我不知道并且如果可以做到，那就太酷了。

我的建议确实破坏了命令，这就是为什么我使用临时保存变量以便原始命令不会丢失，以防您在代码中进一步需要它。

# php - 用逗号从MySQL可变拆分价格回显PHP？

> ID：14182939
> 
> 赞同：1
> 
> 时间：2013-01-06T14:13:21.633
> 
> 标签：php

我在数据库中有一个名为 price 的列，它存储诸如 200000 之类的值，我已经能够成功地使用 MySQL 用逗号将其拆分为 200,000 但我的理解是这不是 MySQL 语法的一个很好的使用，可能是大型查询的灾难。

如何将其作为 PHP 变量并执行相同的操作？

例子： `echo '<title>$' . $price . '.00- ' .`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:16:33.363

使用[number_format()](http://us3.php.net/number_format)

```
echo '<title>$' . number_format($price) . '.00'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:20:38.620

试试这个，在小数点后添加数字

```
echo '<title>$' . number_format($price,2) . '.00'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:16:39.557

`echo '<title>$' . number_format($price) . '';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T14:17:46.653

[number_format()](http://php.net/manual/en/function.number-format.php)函数是你的朋友

# objective-c - Objective-C 中带有基本浮点计算的奇怪错误

> ID：14182941
> 
> 赞同：1
> 
> 时间：2013-01-06T14:13:29.790
> 
> 标签：objective-c

有可能我现在很愚蠢，但是请检查一下。我有一个浮动：

```
float wordTime=46.81; // I get it after some calculations 
```

然后我记录这个：

```
NSLog(@"1:%f", wordTime);
NSLog(@"2:%f", (3/2)*wordTime);
NSLog(@"3:%f", (5/2)*wordTime);
NSLog(@"4:%f", (7/2)*wordTime); 
```

我明白了：（日志号 2 有问题）

```
 46.81
 46.81 // weird
 93.8
140.7 
```

然后我将其更改为`3/2`46、70、93`1.5`和 140。我在这里缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T14:15:47.967

`3/2`被解释为`(int)3/2`并因此计算为`1`。相反，您可以显式写出类型`3.0f/2.0f`，这应该会给出您期望的结果（就像将整个表达式显式转换为 一样`float`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T14:16:53.170

转换其中一个操作数，以便将另一个操作数提升为浮点数，并且您将使用浮点除法而不是整数除法：

```
NSLog(@"2:%f",(3.0/2)*wordTime  ); 
```

# android - Android - 确定用户所在国家/地区的最可靠方法是什么

> ID：14182946
> 
> 赞同：0
> 
> 时间：2013-01-06T14:14:01.313
> 
> 标签：android

我目前正在考虑做这样的事情：

```
 TelephonyManager teleMgr = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    if (teleMgr != null)
    {
       String countryISOCode = teleMgr.getSimCountryIso();
       ... 
```

但我不知道是否所有国家都遵守这个和 getSimCountryIso(); 功能适用于所有手机。这是可靠的 100% 还是 99% ......或者是另一种方式来告诉用户从哪里更可靠？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:19:19.867

最准确的方法是首先获取`LocationManager`. 然后，调用`LocationManager.getLastKnownPosition`。然后，创建一个 GeoCoder 并调用`GeoCoder.getFromLocation`. 这样做是一个单独的线程！这将为您提供`Address`对象列表。打电话给`Address.getCountryName`你。

请记住，最后一个已知位置可能有点陈旧，因此如果用户刚刚越过边界，您可能暂时不知道它。

如果用户使用国际漫游，您当前使用的 SIM 卡方法将返回错误的国家/地区。

另一种方法是使用用户语言环境：

```
String locale = context.getResources().getConfiguration().locale.getDisplayCountry(); 
```

但是，这将根据语言偏好返回一个国家/地区，并且对于在 Android 中没有区域设置的地方不准确（例如，瑞士的用户可能会将语言设置为德语或法语，从而导致在不正确的国家。

# image-processing - 具有仅包含原点的结构元素的侵蚀/膨胀图像？

> ID：14182949
> 
> 赞同：2
> 
> 时间：2013-01-06T14:14:26.837
> 
> 标签：image-processing, mathematical-morphology

如果我们使用仅包含原点的结构元素腐蚀/膨胀图像，结果是否与原始图像相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:13:24.793

在数学形态学中有平面和非平面结构元素，但由于人们通常指的是第一个（有时不知道），我假设你的问题是关于平面 SE。有了这个假设，你的答案是：是的。要了解为什么会这样，让我们​​分别考虑`f`具有平坦和对称 SE的输入函数的腐蚀和膨胀方程`S`：

          ![在此处输入图像描述](../Images/84df47002d50ffe26b075529d83b84bb.png)                     ![在此处输入图像描述](../Images/cd73f612b947430ba5eb2bae29595db8.png)

有很多方法可以定义腐蚀和膨胀，但这次考虑上面的这些。如果以前不清楚，现在您可以了解使用扁平元素进行腐蚀和膨胀的含义。考虑`x`2D 图像中的一个位置`f`，假设您的图像有 300 列和 300 行，因此，例如，`x`可以是`(10, 10)`,`(3, 2)`或内部的任何其他对`f`。现在假设您的 SE 仅包含原点，即它由 描述`S = {(0, 0)}`，因此唯一`s`的 in`S`是`(0, 0)`。如果之前也不清楚，平坦的 SE 始终是一组位移。所以，你看，你有一个单一的位移`(0, 0)`。这意味着任何点`x`, `x + s = x`, 因此您将`min(x + s) = min(x)`其用于腐蚀（膨胀相同，使用`max`）。这总是给你原来`f`的。

数学形态学并不关心具体的库是如何实现算子的，所以在阅读了上面的描述之后可能会出现混淆的情况。

# c# - 使用 JSON.NET 进行序列化时，使自定义 JsonConverter 尊重 ItemTypeNameHandling

> ID：14182961
> 
> 赞同：2
> 
> 时间：2013-01-06T14:15:25.323
> 
> 标签：c#, .net, json, serialization, json.net

我有一个带有基类子对象列表的对象。子对象需要自定义转换器。我不能让我的自定义转换器尊重`ItemTypeNameHandling`选项。

示例代码（新建 C# Console 项目，添加 JSON.NET NuGet 包）：

```
using System;
using System.Collections.Generic;
using Newtonsoft.Json;

namespace My {
    class Program {
        private static void Main () {
            Console.WriteLine(JsonConvert.SerializeObject(
                new Box { toys = { new Spintop(), new Ball() } },
                Formatting.Indented));
            Console.ReadKey();
        }
    }

    [JsonObject] class Box
    {
        [JsonProperty (
            ItemConverterType = typeof(ToyConverter),
            ItemTypeNameHandling = TypeNameHandling.Auto)]
        public List<Toy> toys = new List<Toy>();
    }
    [JsonObject] class Toy {}
    [JsonObject] class Spintop : Toy {}
    [JsonObject] class Ball : Toy {}

    class ToyConverter : JsonConverter {
        public override void WriteJson (JsonWriter writer, object value, JsonSerializer serializer) {
            serializer.Serialize(writer, value);
        }
        public override object ReadJson (JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) {
            return serializer.Deserialize(reader, objectType);
        }
        public override bool CanConvert (Type objectType) {
            return typeof(Toy).IsAssignableFrom(objectType);
        }
    }
} 
```

产生的输出：

```
{
  "toys": [
    {},
    {}
  ]
} 
```

必要的输出（如果我注释`ItemConverterType = typeof(ToyConverter),`行会发生这种情况）：

```
{
  "toys": [
    {
      "$type": "My.Spintop, Serialization"
    },
    {
      "$type": "My.Ball, Serialization"
    }
  ]
} 
```

我尝试过临时更改`serializer.TypeNameHandling`in`ToyConverter.WriteJson`方法的值，但它会影响不相关的属性。（当然，我真正的转换器比这更复杂。这只是一个基本功能的例子。）

**问题：**如何使我的自定义`JsonConverter`尊重`ItemTypeNameHandling`属性的`JsonProperty`属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:58:53.893

深入研究了 Json.Net（版本 4.5 第 11 版）的源代码后，看起来您想要做的事情似乎是不可能的。

将类型写入输出的关键是这种方法：

```
Newtonsoft.Json.Serialization.JsonSerializerInternalWriter
    .ShouldWriteType(TypeNameHandling typeNameHandlingFlag, JsonContract contract,
        JsonProperty member, JsonContainerContract containerContract,
        JsonProperty containerProperty) 
```

这里重要的是`containerContract`和参数。*在没有*`containerProperty`转换器的情况下进行序列化时，会提供这些参数并且能够使用它们来确定要使用什么。*`ShouldWriteType``TypeNameHandling`*

 **但是，当使用*转换器进行序列化时，不提供这两个参数。这似乎是因为`ToyConverter.WriteJson`导致`Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue`这样的调用：

```
SerializeValue(jsonWriter, value, GetContractSafe(value), null, null, null); 
```

请注意，最后两个参数实际上是 a`JsonContainerContract containerContract`和`JsonProperty containerProperty`，并沿链向下传递给`ShouldWriteType`方法。问题就出在这里：因为它们是null，所以`ShouldWriteType`方法的逻辑意味着它返回`false`，因此没有写入类型。

**编辑：**

受此启发，您可以通过自定义转换器的方法来解决此[问题](http://blog.maskalik.com/asp-net/json-net-implement-custom-serialization)`WriteJson`：

```
public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
{
    writer.WriteStartObject();
    writer.WritePropertyName("$type");
    writer.WriteValue(RemoveAssemblyDetails(value.GetType().AssemblyQualifiedName.ToString()));
    writer.WriteEndObject();
}

private static string RemoveAssemblyDetails(string fullyQualifiedTypeName)
{
    StringBuilder builder = new StringBuilder();

    // loop through the type name and filter out qualified assembly details from nested type names
    bool writingAssemblyName = false;
    bool skippingAssemblyDetails = false;
    for (int i = 0; i < fullyQualifiedTypeName.Length; i++)
    {
        char current = fullyQualifiedTypeName[i];
        switch (current)
        {
            case '[':
                writingAssemblyName = false;
                skippingAssemblyDetails = false;
                builder.Append(current);
                break;
            case ']':
                writingAssemblyName = false;
                skippingAssemblyDetails = false;
                builder.Append(current);
                break;
            case ',':
                if (!writingAssemblyName)
                {
                    writingAssemblyName = true;
                    builder.Append(current);
                }
                else
                {
                    skippingAssemblyDetails = true;
                }
                break;
            default:
                if (!skippingAssemblyDetails)
                    builder.Append(current);
                break;
        }
    }

    return builder.ToString();
} 
```

请注意，该`RemoveAssemblyDetails`方法是直接从 Json.Net[源](http://json.codeplex.com/SourceControl/changeset/view/69709#128141)中提取的。

您当然需要修改`WriteJson`方法以输出其余字段，但希望这样做可以解决问题。*

# eclipse - 对象 scalatest 不是包 org 的成员

> ID：14182963
> 
> 赞同：7
> 
> 时间：2013-01-06T14:15:38.177
> 
> 标签：eclipse, scala, sbt, scalatest

我想用scalatest为我的玩具项目写一些测试。当我使用时，我通过在我的项目根目录中`sbt`安装了 scalatest 。然后我在以下位置创建了测试类：`libraryDependencies += "org.scalatest" %% "scalatest" % "2.0.M5" % "test"``build.sbt``src/test/scala`

```
package parsers

import org.scalatest.FunSuite

class BaseParserSuite extends FunSuite {

    test("test works") {
        val result = 2
        assert(result === 2)
    }
} 
```

我通过它运行它`sbt test`并且它有效。但令人讨厌的是，在`import org.scalatest.FunSuite`eclipse 的第 3 行上说：

```
Multiple markers at this line
    - object scalatest is not a member of package org
    - object scalatest is not a member of package org 
```

该`import`部分取自[此示例](http://www.scalatest.org/getting_started_with_fun_suite)。所以一般的问题是：为什么它通过 sbt 工作并且 eclipse 报告错误？导入的代码从哪里来`org.scalatest.`？或者它没有物理下载到我的电脑上？作为猜测——我应该在 .classpah eclipse 文件中添加一些东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T14:23:12.083

您应该使用 sbt elcipse 插件。它从您的 sbt 构建定义生成 Eclipse 项目定义，因此所需的所有库都将位于类路径上。见[https://github.com/typesafehub/sbteclipse#for-the-impatient](https://github.com/typesafehub/sbteclipse#for-the-impatient)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T01:49:20.710

我遇到了同样的问题并通过删除项目解决了（不要点击删除实际文件复选框）。然后我导入了“工作区中预先存在的项目”。

# c - Visual Studio：如何处理警告

> ID：14182968
> 
> 赞同：0
> 
> 时间：2013-01-06T14:16:03.863
> 
> 标签：c, visual-studio-2010

我使用 Visual Studio 2010 在 C 中编程。

当调试器遇到错误时，编译器会停止并建议我消除错误。但在警告的情况下，它不会停止。至少我在调试/选项和设置中找不到这样的工具。好吧，调试器不会停止，程序会编译。我什至看不到警告。但我也想修复它们。

你能推荐我做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:24:23.603

听起来您正在点击“开始”选项之一，而不仅仅是“构建”。这将导致您的项目构建，然后如果成功构建（并且警告通常不会阻止这种情况，尽管会出现错误）它将运行，似乎清除了输出窗口，以便您可以看到程序的输出。

然而，构建输出实际上并没有消失——输出可以在输出窗口顶部的下拉菜单中切换回构建输出。

我认为如果您主要关心修复错误和警告，您应该只是“构建”而不是启动项目。

否则，该`Treat Warnings As Errors`选项位于项目属性中的`C/C++ -> General`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:18:46.347

根据您使用的编译器，有一些开关可以将编译警告视为错误。有些可以全部打开，或者您可以明确使用某些错误代码。

# php - 如何在 PHP 中访问没有类名的类中的静态变量？

> ID：14182969
> 
> 赞同：3
> 
> 时间：2013-01-06T14:16:06.353
> 
> 标签：php, static-variables

有没有办法在不使用类前缀的情况下访问 PHP 类的静态变量？

例子：

```
class A {

   protected static $x = "blahblah";

   public static function p() {

       print(A::$x); // <= Is there no way to omit A:: ???

   }

} 
```

我理解，此时 $x 可能是一个未初始化的局部变量，但是能够说/声明/设置在这些情况下解释器应该将 $x 解析为之前声明的成员是很有意义的。在任何地方键入类前缀是恕我直言的主要失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:17:28.997

如果你使用它的方法在同一个类中，你可以使用 self:: 或 static::。

例如：

```
class A {

   protected static $x = "blahblah";

   public static function p() {

       print(self::$x);

   }

} 
```

# mongodb - 如何通过指定函数来获取密钥进行分组？

> ID：14182973
> 
> 赞同：1
> 
> 时间：2013-01-06T14:16:31.000
> 
> 标签：mongodb

假设我向 mongo db 报告了 Web 应用程序错误。要获取它们（按 URL 分组），我使用以下查询：

```
db.errors.group({
    cond: {
        date:{
            $gt:new Date(2013,0,3, 6, 0, 0), 
            $lt:new Date(2013,0,3, 8, 0, 0)
        }
    },
    key: {
        url: 1
    },
    initial: {
        csum: 0
    },
    reduce:
        function(obj, prev) {
            prev.csum++;
        }
}) 
```

如果我想通过**站点 url**（而不是*页面*url）来计算错误，我应该怎么做？我的意思是，*http://www.mysite.com/page1*和*http://www.mysite.com/page2*将被计入同一个桶中。理想情况下，它会以`key`某种方式成为查询部分中的一个函数......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:18:50.683

使用`keyf`而不是`key`在您`group`的指定一个函数来创建您需要的站点 url 键，而不是依赖于现有的文档字段。

请参阅[文档](http://docs.mongodb.org/manual/reference/method/db.collection.group/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:47:23.747

扩展 JohnnyHK 的答案：

```
db.errors.group({
    cond: {
        date:{
            $gt:new Date(2013,0,3, 6, 0, 0),
            $lt:new Date(2013,0,3, 8, 0, 0)
        }
    },
    keyf: function(doc)
    {
        return { site: doc.url.match(/.*:\/\/[^\/]+/i)[0]};
    },
    initial: {
        csum: 0
    },
    reduce:
        function(obj, prev) {
            prev.csum++;
        }
}) 
```

回报：

```
[
    {
        "site" : "http://www.mysite.com",
        "csum" : 3
    },
    {
        "site" : "http://www.example.com",
        "csum" : 1
    }
] 
```

但是，对于大型数据集，它不会很快。如果您控制生成错误的代码，则添加`domain`可以分组的字段可能会更容易。

# java - 创建无 DSN 连接时出现 Java SQL 异常

> ID：14182977
> 
> 赞同：0
> 
> 时间：2013-01-06T14:17:10.587
> 
> 标签：java, sql, jdbc, odbc

这是我的代码：

```
package dsnless;
import java.sql.*;
////////////////////////////////////////////////////////////
//This class will be used to fire queries to the database
////////////////////////////////////////////////////////////
public class Query {
    public Query(){
        String pathToDatabase = "E:/Eclipse Projects/JDBC/src/datasouce/School.mdb";
        String database = "jdbc:odbc:Driver="+
                      "{Microsoft Access Driver(*.mdb,*.accdb)};" +
                      ":DBQ=" + pathToDatabase;
        try{
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            con = DriverManager.getConnection(database);
        }catch(Exception e){
            e.printStackTrace();
        }
    }
    public static void main(String[] args) {
        new Query();
    }
    Connection con;
    Statement s;
    ResultSet r;
}//class Query end 
```

这是一个例外：

```
java.sql.SQLException: [Microsoft][ODBC Driver Manager] DRIVER keyword syntax error
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at dsnless.Query.<init>(Query.java:14)
    at dsnless.Query.main(Query.java:20) 
```

还有一个新的例外：

```
[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at dsnless.Query.<init>(Query.java:14)
    at dsnless.Query.main(Query.java:20) 
```

## 问题

请告诉我有什么问题。我怀疑这是`String database`但仍然只是一个猜测。

# 自己搞定了

我将支持的扩展从更改`(*.mdb,*.accdb)`为 only`(*.mdb)`并且它有效。知道为什么会这样吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:23:46.810

你这里有一个额外的冒号，删除它

```
String database = "jdbc:odbc:Driver="+
              "{Microsoft Access Driver(*.mdb,*.accdb)};" +
              ":DBQ=" + pathToDatabase;
               ^ 
```

# android - string.compareTo(string) 在排序时没有产生正确的结果

> ID：14182979
> 
> 赞同：1
> 
> 时间：2013-01-06T14:17:19.917
> 
> 标签：android, android-listview, android-arrayadapter, compareto

我有一个包含位置距离的列表视图，如下所示：

```
100
200
300
400
500
50
600
70
40 
```

我需要按升序和降序对这个地方的距离进行排序。所以我所做的就是对适配器进行排序并使用adapter.notifyDataSetChanged()。如果距离是 3 位数字，即 230、450、352、254 等，则一切正常。但是如果位置距离是 2 位数，例如 52、65、75 等，我得到的排序值是错误的，如下所示。

对于升序：排序后我得到这个顺序

```
100
200
300
400
500
600
50
60
70 
```

对于降序：排序后我得到这个顺序

```
70
60
50
600
500
400
300
200
100 
```

我的排序代码如下所示：

```
case R.id.action_sort_dist_fn:

            adapter.sort(new Comparator<Place>() {

                @Override
                public int compare(Place lhs, Place rhs) {
                    return rhs.getPlaceDistance().compareTo(
                            lhs.getPlaceDistance());
                };
            });

            adapter.notifyDataSetChanged();
            break;

        case R.id.action_sort_dist_nf:

            adapter.sort(new Comparator<Place>() {

                @Override
                public int compare(Place lhs, Place rhs) {
                    return lhs.getPlaceDistance().compareTo(
                            rhs.getPlaceDistance());
                };
            }); 
```

Place.java

```
public class Place {
    String placeName = "";
            String placeDistance="";
            String placeCategoryIcon;

    public Place(String placeName, String placeDistance,
            String placeCategoryIcon) {

        this.placeName = placeName;
        this.placeDistance = placeDistance;
        this.placeCategoryIcon = placeCategoryIcon;
    }

    public String getPlaceName() {
        return placeName;
    }

    public void setPlaceName(String placeName) {
        this.placeName = placeName;
    }

    public String getPlaceDistance() {
        return placeDistance;
    }

    public void setPlaceDistance(String placeDistance) {
        this.placeDistance = placeDistance;
    }

    public String getPlaceCategoryIcon() {
        return placeCategoryIcon;
    }

    public void setPlaceCategoryIcon(String placeCategoryIcon) {
        this.placeCategoryIcon = placeCategoryIcon;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:28:37.543

您正在对字符串进行排序。String 的自然顺序是字典顺序。你想要的是整数排序。所以使用 a`int`而不是`String`for `Place.placeDistance`。或者至少将字符串转换为整数，然后比较这些整数。

此外，调用您的字段`placeDistance`会增加不必要的噪音。只需调用它`distance`（当然，对其他字段也一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:29:21.490

首先，您给出的排序不是您得到的实际排序。例如第二个实际上是：

```
70
600
60
500
50
400
300
200
100 
```

不应使用字符串进行比较 - 它按字典顺序进行比较，这意味着比较如此处[所述](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)。所以“abc”大于“ab”，“d”大于“ccc”。

您想比较数值，所以请这样做。一种选择是用于`Integer.valueOf`获取您使用的值的实际整数值等价物。

顺便说一句，我认为你拥有`placeDistance`一个`String`领域没有任何好处。你为什么不一直拥有它`Integer`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:28:55.577

问题是在你的比较器中你使用：

```
return rhs.getPlaceDistance().compareTo(lhs.getPlaceDistance()); 
```

并且 placeDistance 是一个字符串，因此您要比较的是字符串，而不是数值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T14:31:51.453

我认为这是因为您正在比较字符串。尝试将您的比较覆盖更改为：

```
@Override
public int compare(Place lhs, Place rhs) 
{
     return Integer.parseInt(rhs.getPlaceDistance()).compareTo(
            Integer.parseInt(lhs.getPlaceDistance()));
}; 
```

我认为理想的解决方案可能是在您的位置保存整数而不是字符串。请注意，如果您有小数位，您应该尝试 Float 或 Double 而不是 Integer

# codeblocks - Arcsynthesis OpenGL 3.3 教程的问题

> ID：14182984
> 
> 赞同：0
> 
> 时间：2013-01-06T14:17:49.940
> 
> 标签：codeblocks, opengl-3

我正在关注这个站点上的 OpenGL 教程 - www.arcsynthesis.org/gltut/，在构建教程部分，我下载了 0.3.8 版本的教程。我将其内容提取到桌面的一个文件夹中...我下载了 premake4，然后将其放在了我提取内容的文件夹中。然后我打开 cmd 并 cd 到我提取内容的目录。因为，我使用的是 CodeBlocks，所以我输入了 premake4 gmake，然后它开始构建东西......我将框架文件夹的内容复制到其各自的目录中。然后我通过命令提示符进入 Tut 01 Hello Triangle 目录并执行 premake4 命令。之后，我用 CodeBlocks 打开了 tut1.cpp，编译后我得到了一些这样的错误：

```
C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleCreateShader'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleShaderSource'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleCompileShader'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGetShaderiv'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGetShaderiv'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGetShaderInfoLog'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleCreateProgram'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleAttachShader'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleLinkProgram'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGetProgramiv'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGetProgramiv'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGetProgramInfoLog'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleDetachShader'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleDeleteShader'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGenBuffers'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleBindBuffer'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleBufferData'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleBindBuffer'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleGenVertexArrays'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleBindVertexArray'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleClearColor'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleClear'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleUseProgram'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleBindBuffer'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleEnableVertexAttribArray'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleVertexAttribPointer'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleDrawArrays'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleDisableVertexAttribArray'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleUseProgram'

C:\Users\PB9X\Desktop\Tutorial 0.3.8\Tut 01 Hello Triangle\tut1.o:tut1.cpp|| undefined reference to `__gleViewport'

||=== Build finished: 30 errors, 0 warnings (0 minutes, 1 seconds) ===| 
```

我到底哪里做错了？我已经在其各自的目录中有 GLEW、FreeGLUT、glimg、glload、glm、glmesh 和 gutil...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T03:13:34.273

> 因为，我使用的是 CodeBlocks，所以我输入了 premake4 gmake

[正如 Premake4 网站上所述](http://industriousone.com/premake-quick-start)，代码块有它自己的命令：`premake4 codeblocks`. 如果您使用的是 Codeblocks，则应该使用 Codeblocks 构建系统，而不是尝试将 gmake makefile 临时化到 Codeblocks 中。

# javascript - 使用 javascript 从 json 返回数据时出错

> ID：14182993
> 
> 赞同：0
> 
> 时间：2013-01-06T14:18:40.650
> 
> 标签：javascript, jquery, json

大家好，我有下一个代码

```
function getclientip() {
$.getJSON("http://192.168.127.2/getipclient.php?callback=?", function(json) {
eval(json.ip);
});} 
```

此功能用于获取访问者客户的 IP 地址我得到的结果

```
({"ip":"192.168.15.149"}); 
```

我的问题是当我将数据发送到其他功能时

```
BtnClickGetIP: function(inSender, inEvent) {
this.USER_ADD_CONTENT.setDisplayValue(getclientip());
}, 
```

着火错误我得到：

```
SyntaxError: missing ; before statement
192.168.15.149 dojo_build.js (line 145, col 7) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:23:08.367

```
function getClientIP(callback) {
    $.getJSON("http://192.168.127.2/getipclient.php?callback=?", function(json) {
        callback(json.ip);
    });
}

BtnClickGetIP: function(inSender, inEvent) {

    var that = this;

    getClientIP(function(ip) {
        that.USER_ADD_CONTENT.setDisplayValue(ip);
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:59:01.327

ajax 是异步调用，你不能只返回 $.getJSON().use 回调来做你的事。如果你真的想要这样的程序。使用 $.ajax 函数并设置 async=false