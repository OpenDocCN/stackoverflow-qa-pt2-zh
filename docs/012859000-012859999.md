# StackOverflow 问答 12859000-12859999

# java - Cron 作业电子邮件警报的内容格式

> ID：12859001
> 
> 赞同：0
> 
> 时间：2012-10-12T12:23:39.740
> 
> 标签：java, cron, crontab

我们在 ubuntu 服务器 10.04 上安排 cron 作业，我们执行的脚本包含命令 maven clean package 然后执行一个 java 类。

工作完成后的电子邮件警报报告很冗长，电子邮件非常冗长，详细说明了所采取的所有操作。在电子邮件中我只想要最后几行，如果作业失败，那么详细的错误报告。

我有一个选择是将结果存储在日志文件中，并尾随输出。但如果工作失败，我可能无法获得完整的报告。

我可以使用其他一些 java 类或任何其他替代方法来做到这一点吗？

任何提示/建议表示赞赏。

- 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:34:30.633

编写一个 perl/shell 脚本来处理日志文件，然后将该脚本作为 cron-job 调用。以这样的方式编写脚本，如果作业通过，它会单独提取最后几行（可能是，使用`tail`命令），如果作业失败，则输出整个文件）。我不确定这是否是您正在寻找的东西，但是当我面临类似情况时，这就是我所做的。

# sql - SQL Reporting，结合多个数据集进行移动平均

> ID：12859003
> 
> 赞同：1
> 
> 时间：2012-10-12T12:23:48.347
> 
> 标签：sql, ssrs-2008

嗨，我对 SQL 报告很陌生，但我有一个看似困难的问题（至少我认为是 ;-) 希望有人能证明我错了！）我正在创建“年初至今”报告，包含 12 个月的移动平均值。这需要我查询最多 23 个月前的所有可用结果（因为我的报告中的 oldes 值是 12 个月前）。我现在解决它的方法（可行）是制作 24 个数据集，每个数据集在一个月前查询。所以ds1：本月查询，ds2：上个月查询... ds24：23个月前查询。

问题是：有没有办法将它组合在一个查询中？

该表如下所示：

```
DATE       ID    VALUE        DESCRIPTION
1/1/2012   12    'Text here'  'Text here' 
```

（简化的，有一些更简单的连接和更多参数）查询如下：

```
SELECT COUNT  Date, ID, Value, Description 
FROM Table 
WHERE (Date BETWEEN @parFrom AND DATEADD(month, 1, @parFrom)) 
AND description = 'Text here' 
```

我需要这个的原因是因为当您没有包含所有可用值的数据集时，显然不可能制作图表。

希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:44:10.990

我认为您正在寻找将所有表格合并为一张。查询。我是对的。如果是这样的话 。

例如，可以通过联合查询来组合来自多个查询的结果。这是一个查询。

```
SELECT colA, colB FROM tableA WHERE colA > 1
UNION
SELECT colX, colA FROM tableB WHERE colA > 1 
```

这里有一些样本可以帮助你。

[http://msdn.microsoft.com/en-us/library/ms180026%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms180026%28v=sql.90%29.aspx)

[http://www.tizag.com/sqlTutorial/sqlunion.php](http://www.tizag.com/sqlTutorial/sqlunion.php)

[http://blog.sqlauthority.com/2009/03/11/sql-server-difference-between-union-vs-union-all-optimal-performance-comparison/](http://blog.sqlauthority.com/2009/03/11/sql-server-difference-between-union-vs-union-all-optimal-performance-comparison/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:47:21.130

我喜欢在这样的查询中使用公用表表达式作为日期。根据您的源表，这可能不是最简单的答案，但它很适合所有目的：

```
CREATE TABLE #Events
(id INT IDENTITY,
EventTypeID INT,
EventDate DATETIME)

INSERT INTO #Events
         (  EventTypeID, EventDate )
VALUES
         (   32,  '2012-1-1' ),
         (   4,  '2012-1-1' ),
         (   5,  '2012-2-3' ),
         (   4,  '2012-2-25' ),
         (   34,  '2012-3-1' ),
         (   4,  '2012-4-3' ),
         (   4,  '2012-4-16' )

;
WITH  MonthsCTE
        AS ( SELECT
               1 AS ID ,
               DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) AS MonthStart ,
               DATEADD(YEAR, -1,
                       DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)) AS YearEarlier
             UNION ALL
             SELECT
               ID + 1 ,
               DATEADD(MONTH, -1, MonthStart) ,
               DATEADD(YEAR, -1, DATEADD(MONTH, -1, MonthStart))
             FROM
               MonthsCTE
             WHERE
               DATEADD(MONTH, -1, MonthStart) > DATEADD(YEAR, -1, GETDATE())
           )
   SELECT
      MonthStart ,
      COUNT(#Events.EventTypeID)  AS TotalOccurances,
      COUNT(#Events.EventTypeID) /12 AS AverageOccurances
   FROM
      MonthsCTE
   LEFT OUTER JOIN #Events
   ON #Events.EventDate BETWEEN YearEarlier AND MonthStart
      AND #Events.EventTypeID = 4
   GROUP BY
      MonthStart

      DROP TABLE #Events 
```

上面，我正在构建一个 CTE（如果您不熟悉临时表，请考虑临时表），其中包括过去 12 个月和前一年的日期。

然后第二个查询将该表连接到您的数据，允许位于 CTE 中的字段之间的任何数据。

# android-edittext - 在Android Edittext中输入类型为数字的多行是否可能？

> ID：12859005
> 
> 赞同：5
> 
> 时间：2012-10-12T12:24:01.140
> 
> 标签：android-edittext

当android edittext输入类型为数字时，是否可以制作多行？我在 xml 文件中尝试了以下内容。

android:inputType="数字|textMultiLine"

但它没有用。当输入类型为数字时，不能制作多行吗？

请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-15T10:10:46.803

请这样做：

```
android:inputType="textMultiLine|number"
android:digits="0,1,2,3,4,5,6,7,8,9" 
```

取自这里：[答案](https://stackoverflow.com/questions/32163224/inputtype-number-with-more-than-one-line)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:34:30.713

我为您的问题尝试了每一种解决方案。问题是，当您尝试使用带有**数字的****android:inputType**属性时， android 不会为用户提供**textMultiLine**功能。只有一个属性是可能的，即**android:numeric="integer"**。我知道***它已弃用***，但对于您的问题，**这是唯一的解决方案**。

 *******我制作了一个示例xml文件。它如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:gravity="top"
        android:lines="10"
        android:numeric="integer" />

    <EditText
        android:id="@+id/editText3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:maxLines="10"
        android:numeric="integer" />

    <EditText
        android:id="@+id/editText4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:maxLines="10"
        android:numeric="integer" />

</LinearLayout> 
```

有使用的示例 EditText 解释如下： -

第一个通过使用属性**android:lines="10"将*****TextView***描述为这么多行。这里如果您不提供**android:gravity="top"**那么您所做的任何输入都将从EditText的**中心**开始.

 ******第二个使用属性**android:maxLines="10"描述了 TextView*****最多有***这么多行。

 **我希望你最终会为你的问题被成功解决而感到高兴。***************

# layout - SmartGWT 将同一成员多次添加到布局中

> ID：12859007
> 
> 赞同：0
> 
> 时间：2012-10-12T12:24:05.957
> 
> 标签：layout, add, smartgwt, toolstrip

我有一个网格，我需要在它之前和之后添加 2 个链接。它们是相同的，它们只需要在网格上方和下方都可见。我将它们放在 ToolStrip 中，并将 ToolStrip 添加为 VLayout 的成员两次。问题是 ToolStrip 添加了两次，但是这对链接仅在下面看到（或仅添加到第二个 ToolStrip）。我做错了什么？这是代码：

```
 import com.google.gwt.core.client.GWT;
 import com.smartgwt.client.types.Alignment;
 import com.smartgwt.client.types.VerticalAlignment;
 import com.smartgwt.client.widgets.form.DynamicForm;
 import com.smartgwt.client.widgets.form.fields.LinkItem;
 import com.smartgwt.client.widgets.form.fields.StaticTextItem;
 import com.smartgwt.client.widgets.grid.ListGrid;
 import com.smartgwt.client.widgets.layout.VLayout;
 import com.smartgwt.client.widgets.toolbar.ToolStrip;
 import com.smartgwt.client.widgets.toolbar.ToolStripButton;

 final VLayout container = new VLayout(10);
    container.setAlign(VerticalAlignment.CENTER);

    final DynamicForm someForm1 = new DynamicForm();
    // some form with text

    final DynamicForm someForm2 = new DynamicForm();
    // some other form with text

    final VLayout grid = new VLayout(0);
    grid.setWidth100();

    final DynamicForm linksForm = new DynamicForm();
    linksForm.setWidth100();
    linksForm.setHeight(20);
    linksForm.setNumCols(2);

    final LinkItem linkOne = new LinkItem();
    linkOne.setShowTitle(false);
    linkOne.setValue("Click1");
    linkOne.setTextAlign(Alignment.RIGHT);

    final LinkItem linkTwo = new LinkItem();
    linkTwo.setShowTitle(false);
    linkTwo.setValue("Click2");
    linkTwo.setTextAlign(Alignment.RIGHT);

    linksForm.setFields(linkOne, linkTwo);

    final ToolStrip linksToolStrip = new ToolStrip();
    linksToolStrip.setWidth100();
    linksToolStrip.setAlign(VerticalAlignment.CENTER);
    linksToolStrip.addMember(linksForm);

    final ListGrid results = new ListGrid();
    // height, width, dataSource for ListGrid results, etc.

    grid.addMember(linksToolStrip, 0);
    grid.addMember(results, 1);
    grid.addMember(linksToolStrip, 2);

    container.setMembers(someForm1, grid, someForm2); 
```

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:40:03.540

您不能两次添加小部件，当您添加成员时，网格会引用您的链接及其在成员列表中的位置，因此第一次其位置为 0，第二次更改为 2。您需要两个链接实例。你也可以看看[这里](https://stackoverflow.com/questions/2199574/adding-the-same-object-twice)

# java - 在原子变量上使用 volatile 原语有什么区别？

> ID：12859008
> 
> 赞同：19
> 
> 时间：2012-10-12T12:24:06.990
> 
> 标签：java, concurrency

> **可能重复：**
> [Java：volatile boolean vs AtomicBoolean](https://stackoverflow.com/questions/3786825/java-volatile-boolean-vs-atomicboolean)

什么时候适合使用`volatile`原语（例如`boolean`, `integer`or `long`）而不是`AtomicBoolean`, `AtomicInteger`or `AtomicLong`，反之亦然？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T12:29:10.093

可见性语义完全相同，使用原子原语的情况是当您需要使用它们的原子方法时。

例如：

```
if (volatileBoolean) {
    volatileBoolean = !volatileBoolean;
} 
```

可能会在多线程环境中产生问题，因为变量可能会在两行之间发生变化。如果您需要测试和分配是原子的，您可以使用：

```
atomicBoolean.compareAndSet(true, false); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-12T12:30:31.877

如果您只想设置或获取值，则使用普通的 volatile 会更简单、更有效。（但不能获取&设置值）

如果您想要更多操作，例如 getAndIncrement 或 compareAndSwap，您需要使用 AtomicXxxx 类。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-12T12:48:04.777

这些`Atomic*`类包装了`volatile`相同类型的原语。从来源：

```
public class AtomicLong extends Number implements java.io.Serializable {
   ...
   private volatile long value;
   ...
   public final long get() {
       return value;
   }
   ...
   public final void set(long newValue) {
       value = newValue;
   } 
```

所以。

> 何时适合使用 volatile 原语（例如 boolean、integer 或 long）而不是 AtomicBoolean、AtomicInteger 或 AtomicLong

如果您所做的只是获取和设置 a`Atomic*`那么您还不如只使用一个`volatile`字段。

> ……反之亦然？

然而，这些`Atomic*`类为您提供的是提供更高级功能的方法，例如`incrementAndGet()`、`compareAndSet()`和其他实现多个操作（get/increment/set、test/set）*而无需*锁定的方法。这就是`Atomic*`类如此强大的原因。

同样重要的是要注意，`volatile`使用类包装字段`Atomic*`是从对象角度封装关键共享资源的好方法。这意味着开发人员不能只处理该字段，假设它不共享，可能会`field++;`在引入竞争条件的代码或其他代码中注入问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-12T12:43:36.853

我们已经开始禁止`volatile`在我们的源代码中使用，因为很容易编写并不总是按预期工作的代码。

根据我的经验，人们添加 volatile 以在线程之间共享值。然后，其他人开始修改该值。大多数时候，这是有效的。但是在生产中，您会开始遇到难以追踪的奇怪错误。计数器增加 100'000 次（测试只增加 10 次）但最终达到 99'997。在 Java 1.4 中，长值可能会被破坏，非常非常罕见。

`Atomic*`另一方面，助手类只产生很小的开销，而且它们总是像宣传的那样工作。

所以除非你有很好的理由（*）来使用`volatile`，否则总是更喜欢`Atomic*`辅助类。

如果您不确切知道`Atomic*`辅助类中的每个字符的作用，那么您真的应该避免使用`volatile`.

*：过早的优化从来都不是一个好的理由。

# jquery - jQuery SVG - 悬停元素

> ID：12859013
> 
> 赞同：1
> 
> 时间：2012-10-12T12:24:27.503
> 
> 标签：jquery, svg, hover

我正在尝试使用 jQuery SVG 插件[http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)

一开始我就卡住了。我**在那个圆**上创建了一个简单的 svg.circle 和 svg.text 。当鼠标悬停在圆圈上时，我想给出一点动画。它可以工作，但是当我在文本悬停状态上移动鼠标指针时关闭。这是正确的行为，但是如何在鼠标获取文本时强制这种悬停状态？

这是代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>jQuery SVG Basics</title>
<style type="text/css">
#svgbasics { width: 400px; height: 300px; border: 1px solid #484; font-family: Tahoma; font-size: 50px; }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.svg.js"></script>
<script type="text/javascript" src="jquery.svganim.min.js"></script>
<script type="text/javascript" src="jquery.svgfilter.js"></script>
<script type="text/javascript">

$(function() {
    $('#svgbasics').svg({onLoad: drawInitial});
});

function drawInitial(svg) {

    var mycircle = svg.circle(75, 75, 50, {fill: '#f2477b', stroke: 'none', 'stroke-width': 0});
    var mytext = svg.text(52, 76, 'SVG', {'font-family':"Verdana", 'font-size':20, 'text-anchor':'middle', 'fill':'#fff', 'cursor': 'pointer'});

    $(mycircle).hover(function() {
        $(this).css("cursor", "pointer");
        $(mycircle).animate({svgR: 45, svgStrokeWidth: 4, svgStroke: '#f882a6'}, 100);  
    }, function() { 
        $(mycircle).animate({svgR: 50, svgStrokeWidth: 0, svgStroke: 'none'}, 100); 
    });
}
</script>
</head>
<body>
<div id="svgbasics"></div>
</body>
</html> 
```

这是代码的结果：http: [//goo.gl/RwRw0](http://goo.gl/RwRw0)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:28:47.237

如果您不希望它响应鼠标悬停，请在文本上将指针事件属性设置为无，例如

```
var mytext = svg.text(52, 76, 'SVG', {'font-family':"Verdana", 'font-size':20, 'text-anchor':'middle', 'fill':'#fff', 'cursor': 'pointer'}); 
```

变成

```
var mytext = svg.text(52, 76, 'SVG', {'font-family':"Verdana", 'font-size':20, 'text-anchor':'middle', 'fill':'#fff', 'cursor': 'pointer', 'pointer-events', 'none'}); 
```

# asp.net - 如何根据当前页面文件名（vb.net，asp.net）更改超链接 CssClass

> ID：12859015
> 
> 赞同：0
> 
> 时间：2012-10-12T12:24:32.760
> 
> 标签：asp.net, css, vb.net

我正在尝试根据当前页面的文件名更改超链接 CssClass。像这样的东西：

```
Protected Sub lnkAbout_Load(sender As Object, e As System.EventArgs) Handles lnkAbout.Load

    Dim CURL As String = Request.Url.ToString

    If Me.lnkAbout.NavigateUrl = CURL Then
        Me.lnkAbout.CssClass = "AboutActive"
    End If

End Sub 
```

我知道这不起作用，但如果有人向我展示正确的方法，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:34:31.123

你可以使用`Path.GetFileName`+ [`Request.Url.AbsolutePath`](http://msdn.microsoft.com/en-us/library/system.uri.absolutepath.aspx)：

```
Dim pageName = System.IO.Path.GetFileName(Request.Url.AbsolutePath)
If pageName = "About.aspx" Then
    Me.lnkAbout.CssClass = "AboutActive"
End If 
```

（假设“About.aspx”是您要查找的页面的名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:38:51.277

我在想问题是你假设超链接有一个加载事件。您是否在代码中设置了断点，如果设置了断点，是否命中？

如果可能，您应该在 Page 的 PreInit 事件中设置 css 类。这是操作动态服务器控件/值的最佳事件。

# .net - RavenDB 在单元测试期间连接到嵌入式文档存储

> ID：12859017
> 
> 赞同：6
> 
> 时间：2012-10-12T12:24:40.640
> 
> 标签：.net, ravendb, document-database

## 编辑

原来我正确地存储了文档，所以这个问题的开头部分不正确，可能是因为我对 RavenDB 缺乏经验。但是，我仍然有在单元测试中使用 EmbeddableDocumentStore 时能够打开 RavenDB Management Studio 的问题。

* * *

在使用 NUnit 进行单元测试期间，我似乎遇到了在 EmbeddableDocumentStore 中存储文档的问题。为了查看我是否真的在存储我正在尝试连接到嵌入式数据库的文档。

当试图打开 url **http://computername:8080/**（由于某种原因 raven db 总是使用我的电脑上的计算机名）时，浏览器加载栏只是旋转，如果我停止单元测试并再次尝试 url Chrome 只是给出我无法连接的消息。这是上下文的一些代码。

```
[TestFixture]
public class Test2 : IDisposable
{
    private EmbeddableDocumentStore _documentStore;

    [SetUp]
    public void SetUp()
    {
        if (_documentStore != null) return;

        _documentStore = new EmbeddableDocumentStore
        {
            DataDirectory = "Data",
            RunInMemory = true,
            UseEmbeddedHttpServer = true
        };

        _documentStore.Configuration.AnonymousUserAccessMode = AnonymousUserAccessMode.All;

        _documentStore.Initialize();
    }

    [Test]
    public void Test()
    {
        var document = StaticData.getdocument();

        using (var session = _documentStore.OpenSession())
        {
            session.Store(document);
            session.SaveChanges();
        }

        using (var session = _documentStore.OpenSession())
        {
            var test = session.Load<ObjectType>().Length;
            //This is always 0
        }
    }

    public void Dispose()
    {
        _documentStore.Dispose();
    }
} 
```

我的测试项目的根目录中还有 Raven.Studio.xap 文件。

我正在使用 VS2012 和 .Net 4.5，如果有区别的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T20:00:07.407

干得好：

```
static public void WaitForUserToContinueTheTest(EmbeddableDocumentStore documentStore, bool debug = true)
{
    if (debug && Debugger.IsAttached == false)
        return;

    documentStore.SetStudioConfigToAllowSingleDb();

    documentStore.DatabaseCommands.Put("Pls Delete Me", null,

                                       RavenJObject.FromObject(new { StackTrace = new StackTrace(true) }),
                                       new RavenJObject());

    documentStore.Configuration.AnonymousUserAccessMode = AnonymousUserAccessMode.All;
    using (var server = new HttpServer(documentStore.Configuration, documentStore.DocumentDatabase))
    {
        server.StartListening();
        Process.Start(documentStore.Configuration.ServerUrl); // start the server

        do
        {
            Thread.Sleep(100);
        } while (documentStore.DatabaseCommands.Get("Pls Delete Me") != null && (debug == false || Debugger.IsAttached));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T09:00:30.100

他的答案中缺少有关如何应用@Ayende Rahien 解决方案的确切细节，因此我将在此处讲述确切的步骤：

1.  如果您在 UseEmbeddedHttpServer 设置为 true 的情况下创建 EmbeddableDocumentStore，请将其删除，因为 WaitForUserToContinueTheTest 会为您创建服务器。

2.  在要调试的测试代码中，调用 WaitForUserToContinueTheTest 方法。

3.  在 WaitForUserToContinueTheTest 方法之后在 Visual Studio 中设置断点。

4.  在调试模式下运行时，应自动打开 URL 为 localhost:8080/raven/studio.html 或 :8080/raven/studio.html 的浏览器窗口。

5.  要退出 WaitForUserToContinueTheTest 中的 while 循环，请使用 Raven HTTP GUI 并转到“文档”->“所有文档”。在右侧，右键单击“请删除我”行，然后单击“删除”。现在 Visual Studio 应该继续您的测试。

（顺便说一句，希望 RavenDB 团队能更好地改进单元测试文档。）

# twitter-bootstrap - 如何使用 Spring Roo 获取 Twitter Bootstrap？

> ID：12859019
> 
> 赞同：5
> 
> 时间：2012-10-12T12:24:41.823
> 
> 标签：twitter-bootstrap, spring-roo

我正在使用 Spring Roo 作为我的 uni 主题的项目开发一个 Web 应用程序。我已经创建了所有实体、控制器、视图和其他所有内容。但现在我想基本上忽略所有由 Roo 创建的 tagx、jspx 文件，并使用 Twitter Bootstrap 创建我自己的视图。我是网络开发的新手，基本上我什至不知道从哪里开始。我需要做什么才能开始使用 twitter bootstrap css 文件，我将下载的文件放在哪里，如何包含它们？我很困惑，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T05:27:21.890

You can start with **RooStrap** by Bhagya Silva as your template.[1](http://www.dzone.com/links/roostrap_introduced_brings_the_best_of_both_world.html) I created it as a Spring Roo project with enough customizations done so you can simply start with Twitter Bootstrap and Spring Roo. =) If you do any further enhancements to the base templates, feel free to fork the project, do the changes and send up a pull request on GitHub and I'll be more than happy to incorporate them in the next revisions of RooStrap.

You can find RooStrap from the following location on GitHub.

[http://bhagyas.github.com/roostrap/](http://bhagyas.github.com/roostrap/)

Cheers and all the best with RooStrap, Spring Roo and Twitter Bootstrap.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T05:33:43.433

请注意，通过使用 gvNIX 1.3.1，您的项目将使用**Bootstrap**和**Dandelion Datatables**得到改进。

看看[https://github.com/DISID/gvnix-samples/tree/master/quickstart-app](https://github.com/DISID/gvnix-samples/tree/master/quickstart-app)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-28T15:27:24.843

如果您有兴趣在您的**ROO项目中使用****Bootstrap**，您可以尝试使用新的**gvNIX-1.3.1-RELEASE**版本并使用以下简单命令：

 ****> 网络 mvc 引导设置

在这里，您可以找到一些有关使用 Bootstrap 外观的 Spring Roo 应用程序的示例：

[https://github.com/DISID/gvnix-samples/tree/master/quickstart-app#result](https://github.com/DISID/gvnix-samples/tree/master/quickstart-app)

如果您对 gvNIX 项目感兴趣，可以在以下位置找到更多信息：

[https://code.google.com/p/gvnix/](https://code.google.com/p/gvnix/)

[https://github.com/DISID/gvnix](https://github.com/DISID/gvnix)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-16T13:26:25.910

由于我已经创建了我的 SpringRoo 项目，我不能使用 roostrap 作为我的模板。这就是我将这个很棒的主题集成到我的项目中所做的：

1.  将目录*bhagyas-roostrap-2f4ac0d/src/main/resources/META-INF/web-resources*复制到*YOUR_PROJECT/src/main/resources/META-INF/*

2.  将文件*bhagyas-roostrap-2f4ac0d/src/main/webapp/styles/roostrap.css 复制*到*YOUR_PROJECT/src/main/webapp/styles*

3.  将*文件 bhagyas-roostrap-2f4ac0d/src/main/webapp/WEB-INF/classes/roostrap.properties 复制*到*YOUR_PROJECT/src/main/webapp/WEB-INF/classes*

4.  删除目录*YOUR_PROJECT/src/main/webapp/WEB-INF/tags*并将目录*bhagyas-roostrap-2f4ac0d/src/main/webapp/WEB* -INF/tags 复制到*YOUR_PROJECT/src/main/webapp/WEB-INF*

5.  用*bhagyas-roostrap-2f4ac0d/src/main/webapp/WEB-INF/views/header.jspx*覆盖文件*YOUR_PROJECT/src/main/webapp/WEB-INF/views/ header.jspx*

**   用*bhagyas-roostrap-2f4ac0d/src/main/webapp/WEB-INF/views/index.jspx*覆盖文件*YOUR_PROJECT/src/main/webapp /WEB-INF/views/index.jspx*

    **   我不喜欢在我的项目中生成 SpringRoo 菜单，所以我的*YOUR_PROJECT/src/main/webapp/WEB-INF/layouts/layouts.xml*看起来像：

    ```
    <definition name="default" template="/WEB-INF/layouts/default.jspx">
        <put-attribute name="header" value="/WEB-INF/views/header.jspx" />
        <!-- 
        <put-attribute name="menu" value="/WEB-INF/views/menu.jspx" />
        -->
        <put-attribute name="footer" value="/WEB-INF/views/footer.jspx" />
    </definition> 
    ```

    *   用*bhagyas-roostrap-2f4ac0d/src/main/webapp/WEB-INF/layouts/default.jspx*覆盖文件*YOUR_PROJECT/src/main/webapp* /WEB-INF/layouts/default.jspx 。如果您执行了第 7 步，请转到*default.jspx*并查找，它必须如下所示：**`<div class="container">`**

     **```
     <div class="container">

            <div class="row">
                <!--  
                <div class="col-md-3">
                    <div class="sidebar-nav">
                        <tiles:insertAttribute name="menu" ignore="true" />
                    </div>

                </div>
                 -->

                <div class="col-md-12 panel panel-default">
                    <div id="main" class="panel-body">
                        <tiles:insertAttribute name="body"/> 
                    </div>
                </div>

            </div>

        </div> 
    ```** ***   修改文件*YOUR_PROJECT/src/main/webapp/WEB-INF/spring/webmvc-config.xml*并查找：

    ```
    <bean class="org.springframework.web.servlet.theme.CookieThemeResolver" id="themeResolver" p:cookieName="theme" p:defaultThemeName="standard"/> 
    ```

    并将默认主题从标准更改为 roostrap：

    ```
    <bean class="org.springframework.web.servlet.theme.CookieThemeResolver" id="themeResolver" p:cookieName="theme" p:defaultThemeName="roostrap"/> 
    ```

    *   修改文件*YOUR_PROJECT/src/main/webapp/WEB-INF/views/footer.jspx*并添加`class="container"`到主 div。像这样：

    ```
    <div class="container" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:spring="http://www.springframework.org/tags" xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" id="footer" version="2.0"> 
    ```

    *   添加到文件*YOUR_PROJECT/src/main/webapp/WEB-INF/i18n/messages.properties*

    ```
    global_theme_roostrap=roostrap 
    welcome_text_roostrap=bla bla bla
    welcome_quote=bla bla bla
    welcome_quote_author=bla bla bla 
    ```**** 

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T17:44:54.837

在[http://github.com/killersite/roo-twitter-bootstrap](http://github.com/killersite/roo-twitter-bootstrap)也有一个合适的插件。你可以这样使用它：

```
project --topLevelPackage com.lrkwz.roostrap --projectName roostrap --java 6 --packaging JAR
persistence setup --database HYPERSONIC_PERSISTENT --provider HIBERNATE 
entity jpa --class com.lrkwz.roostrap.domain.Person 
field string --fieldName personName --sizeMin 2
entity jpa --class ~.domain.Country
field string --fieldName countryName --notNull
osgi start --url file:///home/lrkwz/roo-twitter-bootstrap/target/com.ct.roo.addon.tbootstrap-0.1.0.BUILD-SNAPSHOT.jar
web mvc setup
web mvc install bootstrap
web mvc all --package com.lrkwz.roostrap.web 
```******

# ios - iphone 中未调用 UIAlertView 委托方法

> ID：12859020
> 
> 赞同：1
> 
> 时间：2012-10-12T12:24:46.853
> 
> 标签：ios, iphone, objective-c, uialertview

我正在开发一个应用程序，我有一个要求，即当有来电时调用相应的方法。我编写了alertview代码，它完美地工作并显示了alertview。

Alertview 包含两个按钮接受和拒绝，当我单击这些按钮中的任何一个时，不会调用 alertview 委托方法。

```
+ (void)incomingCallAlertView:(NSString *)string
{
    UIAlertView *callAlertView=[[UIAlertView alloc] initWithTitle:string message:@""   delegate:self cancelButtonTitle:@"reject" otherButtonTitles:@"accept",nil];
    [callAlertView show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    NSLog(@"clickedButtonAtIndex");

    if(buttonIndex==0)
    {
          NSLog(@"buttonindex 0");
    }
    else
    {
          NSLog(@"buttonindex 1");
    }

} 
```

我正在`+(void)incomingcall`使用主线程从另一个方法调用该方法。

```
- (void)showIncomingcalling
{
     [CallingViewController performSelectorOnMainThread:@selector(incomingCallAlertView:)      withObject:@"on_incoming_call" waitUntilDone:YES];
} 
```

我在课堂上编写协议，即`<UIAlertViewDelegate>`没有调用委托方法，任何人都可以提前解决我的问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T12:32:51.927

```
initWithTitle:string message:@"" delegate:self
                                           ^^
                                      Here it is! 
```

在类方法的上下文中，`self`指的是类本身，而不是对象的实例（类方法如何知道类的实例？）。因此，您必须要么将`incomingCallAlertView:`方法变成**实例方法**（即在其前面加上减号而不是加号，并在方法中调用`self`类名的 insetad `showIncomingCalling`），要么像实现类方法一样实现委托方法：

```
+ (void)alertView:(UIAlertView *)av clickedButtonAtIndex:(NSInteger)index 
```

（这**确实有效**，因为类对象本身是其元类的一个实例，这意味着类方法实际上只是元类的实例方法。）

等等

顺便说一句，仔细阅读一个体面的 Objective-C 教程和/或语言参考。这个问题不应该在这里问，因为它太基础了，无法在其他资源中查找。

# asp.net-mvc-3 - 在 linq mvc3 中选择不同的值

> ID：12859022
> 
> 赞同：0
> 
> 时间：2012-10-12T12:24:52.293
> 
> 标签：asp.net-mvc-3, linq

我将以下数据绑定到下拉列表，但无法获得不同的值。请帮忙。找到下面的代码片段

```
var SalesOrgTypes = (from s in tblSales
                         orderby s.SalesOrg ascending
                         select new DropDownItem
                         {
                             Value = s.SalesOrg,
                             Text = s.SalesOrg + " - " + s.SalesOrgDesc
                         }).Distinct(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:34:44.400

`Distinct()`正在使用定义的`Equals(object obj)`方法`DropDownItem`。您必须定义一个适当的`IEqualityComparer`并将其赋予`Distinct(IEqualityComparer<T>)`方法以告诉`Distinct`不要使用本机`Equals(object obj)`方法，而是使用您自己的均衡。

```
class DropDownItemEqualityComparer : IEqualityComparer<DropDownItem>
{
    #region IEqualityComparer<DropDownItem> Member

    public bool Equals(DropDownItem x, DropDownItem y)
    {
        return
            x == null || y == null 
            ? false
            : x.Value == y.Value && x.Text == y.Text; 
        //Or whatever properties you want to be equal
    }

    public int GetHashCode(DropDownItem obj)
    {
        if (obj != null)
            return
                obj.Value.GetHashCode() + obj.Text.GetHashCode();
        else
            throw new ArgumentNullException("obj");
    }

    #endregion
} 
```

然后你可以把这个给`Distinct`方法

```
var SalesOrgTypes = (from s in tblSales
                         orderby s.SalesOrg ascending
                         select new DropDownItem
                         {
                             Value = s.SalesOrg,
                             Text = s.SalesOrg + " - " + s.SalesOrgDesc
                         }).Distinct(new DropDownItemEqualityComparer()); 
```

# c# - 如何比较具有同一列的两个 Excel 工作表并想知道它们的相似度百分比

> ID：12859027
> 
> 赞同：0
> 
> 时间：2012-10-12T12:25:04.353
> 
> 标签：c#, excel, compare

我有两张相同列的 excel 表，它有 1000 行数据。我需要比较这两张表，想知道两张 excel 表之间相似性的百分比。是否有任何工具可以做到这一点或者是否有任何功能在 C# 中执行此操作。请提出一些解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:34:56.410

这可以手动完成吗？如果是这样 ：-

在 Excel 2010 中，您可以使用 Data --> Remove Duplicates 按钮来帮助解决此类问题。

将两列复制到一个新的工作表上，作为 1 列，有 2000 行，单击删除重复项，您将收到一条消息，如下所示：

“删除了 200 个重复项；保留了 1800 个唯一值。”

然后你可以做一个简单的公式来获得相似度的百分比。

(1 - (200 / 2000)) * 100 = 90%。

# bash - 什么 bash 代码实现了 BASIC 中的 left()、right() 和 mid() 等价物？

> ID：12859036
> 
> 赞同：0
> 
> 时间：2012-10-12T12:25:28.533
> 
> 标签：bash, substring

我正在编写一些代码来测试一个组的成员资格，通过`groups username`它返回一个类似的结果`vfclists : vfclists adm dialout cdrom plugdev lpadmin sambashare admin`。

测试的代码是这样的

```
#!/bin/bash
UGROUP=$1
GROUP=$2
GROUPLIST=`groups $1`

echo $UGROUP
echo $GROUP
echo $GROUPLIST

if [[ "$GROUPLIST" == *"$GROUP"* ]]
then
  echo "$UGROUP is a member of $GROUP";
fi 
```

问题是组的输出包括用户名。如何返回出现在用户名第二次出现右侧的输出部分？

如果不能保证用户名作为冒号后的第一组出现，是否有某种方法可以完全从输出中删除用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:46:37.710

冒号后面的内容是组名。可以有一个与用户同名的组（例如 的情况`vfclists`）。要仅分隔冒号后的字符串，请删除冒号之前的所有内容：

```
groups=$(groups $UGROUP) 
```

要从列表中删除给定的单词会有点问题，因为如果它只是不同单词的子字符串，您不想将其删除。这应该有效：

```
groups=$(groups $UGROUP)
groups=${groups#*:}
groups=${groups/ $UGROUP / } # Remove the word from the middle of the string
groups=${groups% $UGROUP}    # Remove the word if it is the last one 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:32:26.807

对于`bash4`，您可以根据自己的需要进行调整（使用关联数组）：

```
declare -A arr

for i in $(groups); do arr[$i]=$i; done

user=root

if [[ ${arr[$user]} == $user ]]; then
    echo "$user exists"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:36:40.173

为什么不在 grep`groups`之后进行匹配的输出`:`？例如：

```
#!/bin/bash

SOME_USER="$1"
SOME_GROUP="$2"

if groups "$SOME_USER" | egrep ":.*\b$SOME_GROUP\b" > /dev/null
then
    echo $SOME_USER is a member of $SOME_GROUP
fi 
```

正`\b`则表达式[中的 匹配单词边界](http://www.gnu.org/software/grep/manual/grep.html#The-Backslash-Character-and-Special-Expressions)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-25T22:34:18.347

非常好的教程： [https ://linuxhandbook.com/bash-strings/](https://linuxhandbook.com/bash-strings/)

关于这个问题的标题：

**如何在 Bash 中实现等价于 Basic 中的 left()、right() 和 mid()**

**请参阅提取子字符串**标题中的上述链接。

# .net - “错误 'System.Void Mono.Cecil.AssemblyDefinition::.ctor()' 在另一个模块中声明，需要导入”

> ID：12859040
> 
> 赞同：3
> 
> 时间：2012-10-12T12:25:42.907
> 
> 标签：.net, mono.cecil

我正在使用最新版本的 Mono.cecil 我想要做的是我在单独的 dll 中有自定义属性，我想使用 mono.cecil 将属性添加到 sample.exe 中的每个方法，但我收到了错误

“错误 'System.Void Mono.Cecil.AssemblyDefinition::.ctor()' 在另一个模块中声明，需要导入”

任何人都可以帮我解决它吗？

期待您的帮助......

```
 //Main File Sample.exe

class SampleItems
  {

  public static void Main()
  {
  }
    public void Sample()
    {
      Console.WriteLine("sample");
    }

    public void Sample1()
    {
    Console .WriteLine ("sample1");
    }
  } 
```

=================================

```
Seperate application applying the custom attribute

static void Main(string[] args)
    {
      //opens the assembly
      AssemblyDefinition assemblyDefinition = AssemblyDefinition.ReadAssembly(@"E:\MONOCECIL\POC SAMPLES\Sample.exe.exe");

      //AssemblyDefinition as1= AssemblyDefinition .ReadAssembly (@"E:\MONOCECIL\POC SAMPLES\MonoStart\MonoStart\bin\Debug\SampleDll.dll");

      var resolver = new DefaultAssemblyResolver();
      var systemName = AssemblyNameReference.Parse("SampleDll");

      AssemblyDefinition as1 = resolver.Resolve(systemName);

      var ty = assemblyDefinition.MainModule.Import(as1.GetType ());

      var attCtor = ty.Resolve().Methods.First(x => x.Name == ".ctor"
   && x.Parameters.Count == 0); 

foreach (var modDef in assemblyDefinition.Modules)
      {

        foreach (var typeDef in modDef.Types)
        {
          Console.WriteLine("   +--Type {0}", typeDef.Name);

          //All methods in this type  
          foreach (var methodDef in typeDef.Methods)
          {
            var custatt = new CustomAttribute(attCtor);
           methodDef.CustomAttributes.Add(custatt); 

            Console.WriteLine("      --Method {0}", methodDef.Name);
          }

        }
      }

      assemblyDefinition.Write(@"E:\POSTSHARP SAMPLES\ASPECTDNG\Debug\Sampleupdate.exe");
      Console .ReadLine ();
    }  

===============================
Sample dll

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SampleDll
{
 [System.AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple=false )]
  public sealed  class SampleClass :Attribute 

  {

  public SampleClass ()
  {
  }

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:56:35.943

问题是这些行：

```
 var ty = assemblyDefinition.MainModule.Import(as1.GetType ());
 var attCtor = ty.Resolve().Methods.First(x => x.Name == ".ctor" && x.Parameters.Count == 0); 
```

完全没有意义。

假设你有：

```
var sampleDll = AssemblyDefinition.ReadAssembly ("SampleDll.dll");
var targetExe = AssemblyDefiniion.ReadAssembly ("SampleExe.exe"); 
```

并且您想`[SampleClass]`在`SampleExe.exe`.

您需要创建从 sampleDll 中的 SampleClass 类型到 targetExe 的引用

```
var sampleClass = sampleDll.MainModule.GetType ("SampleClass");
var sampleClassCtor = sampleClass.Methods.First(m => m.IsConstructor);

var ctorReference = targetExe.MainModule.Import (sampleClassCtor);

foreach (var type in targetExe.MainModule.Types) 
    type.CustomAttributes.Add (new CustomAttribute (ctorReference)); 
```

# html - 响应式 Web 设计中布局更改时 HTML 元素的切换顺序

> ID：12859045
> 
> 赞同：11
> 
> 时间：2012-10-12T12:26:01.373
> 
> 标签：html, css

我正在构建一个响应式网站，为了获得良好的用户体验，我需要从移动到桌面进行一些布局更改。具体来说，我需要切换一些 HTML 元素的顺序。

我需要 HTML 元素在桌面和移动设备上的顺序不同。

**移动的**

```
<div class="one">One</div>
<div class="two">Two</div>
<div class="three">Three</div> 
```

**为桌面切换订单**

```
<div class="one">One</div>
<div class="three">Three</div>
<div class="two">Two</div> 
```

这是我想要完成的简化版本。我认为这叫做[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)。网页设计专家如何移动 html 元素？使用 JavaScript？会正常吗？有没有 jQuery 插件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T14:04:40.980

根据您的布局，将有多种方法来实现这一点。如果您的 div 在桌面上并排堆叠，而在移动设备上垂直堆叠，您可能可以使用浮动和媒体查询的组合来让它们以正确的顺序显示。

如果不是，您最终的后备可能是创建 4 个 div。

```
<div>one</div>
<div>three(mobile)</div>
<div>two</div>
<div>three(desktop)</div> 
```

然后根据设备使用媒体查询隐藏相关的“三个”div。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-12T13:12:46.400

只需使用 jQuery 根据需要更改 DOM

```
if (mobile == true) {

    $('div.three').insertBefore($('div.two'));
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-25T16:02:49.373

复活这个问题，因为我是通过谷歌遇到的，现有的答案已经过时了。我最终使用的解决方案是[唯一一个被否决](https://stackoverflow.com/a/19965881/2379542)的解决方案，所以我会详细说明。

Using将允许您使用/属性`display:flex`重新排序元素：`column``column-reverse`

```
.container{ display:flex;flex-direction:column }
@media screen and (min-width:600px) {
  .container{ flex-direction:column-reverse }
} 
```

[请参阅此处](https://jsfiddle.net/as6d6zas/)的 JSFiddle ，以及[此处](http://caniuse.com/#search=display%3Aflex)的一些支持表。

[还可以在这里](https://github.com/postcss/autoprefixer)和[这里](https://www.npmjs.com/package/gulp-autoprefixer)查看几个 CSS 后处理器

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-12T12:32:13.717

您可以通过 jquery 执行此操作，您需要做的是检查设备并根据它插入

阅读响应式网页设计也很不错，您将在其中学习类似的东西，请查看此问题[响应式网页设计技巧，最佳实践和动态图像缩放技术](https://stackoverflow.com/questions/8429058/responsive-web-design-tips-best-practices-and-dynamic-image-scaling-techniques)

我在这里找到了很好的提示并检查了这个

1.  [响应式网页设计初学者指南](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)
2.  [响应式网页设计](http://msdn.microsoft.com/en-us/magazine/hh653584.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T08:44:56.077

以下代码将在移动设备上堆叠 div，在桌面上它将是 2 列布局

```
<div class="main">

</div>
<div class="aside">
</div>

<style type="text/css">
   @media only screen and (min-width: 768px) {
      .main {float:right;width:60%}
      .aside {float:left;width:40%}
   }
</style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-13T22:35:43.193

尝试：显示：弹性；弹性方向：列；

更多信息： [https ://developer.mozilla.org/en-US/docs/Web/CSS/flex](https://developer.mozilla.org/en-US/docs/Web/CSS/flex)

# html - 组合框（选择）css宽度问题（任何浏览器）

> ID：12859046
> 
> 赞同：0
> 
> 时间：2012-10-12T12:26:01.827
> 
> 标签：html, css, select

在 CSS 中键入的宽度属性与组合框中的呈现值之间存在不一致。

[http://jsfiddle.net/ZceeE/](http://jsfiddle.net/ZceeE/)

CSS：

```
.foo {
    width:300px;
    padding:10px;
    border:1px solid #ccc;
} 
```

html:

```
<input type="text" id="text" class="foo"><br><br>
<select id="combo" class="foo">
    <option>bar</option>
</select> 
```

“select”元素在渲染之前从宽度中减去填充和边框。正常吗？如果是这样，有一些记录在案的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:38:56.533

是的，这很正常。这就是 CSS 盒子模型的工作原理。

[http://css-tricks.com/the-css-box-model/](http://css-tricks.com/the-css-box-model/)

# android - 如何从多个文本框中检索信息？（安卓）

> ID：12859051
> 
> 赞同：0
> 
> 时间：2012-10-12T12:26:15.773
> 
> 标签：android, eclipse

**编辑**

我现在有这个代码：

```
public void sendMessage(View view) {
       Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.enter_name);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);

        EditText editText1 = (EditText) findViewById(R.id.enter_age);
        String message1 = editText1.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message1);

        EditText editText2 = (EditText) findViewById(R.id.enter_height);
        String message2 = editText2.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message2);

        EditText editText3 = (EditText) findViewById(R.id.enter_weight);
        String message3 = editText3.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message3);

        EditText editText4 = (EditText) findViewById(R.id.enter_gender);
        String message4 = editText4.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message4);

        startActivity(intent);
    }
} 
```

我将如何同时从所有这些窗口中提取信息？因为我想将其保存在用户配置文件中。目前这是我的代码，但我只收到来自“enter_gender”的信息。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(NutritionHandler.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:28:55.673

我认为您可以通过重复代码的第 3,4 和 5 行来轻松实现它，只需更改 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:49:54.900

试试下面，

你的 XML

```
<EditText
    android:id="@+id/edtName"       
    android:layout_height="40dp"    
    android:layout_below="@+id/txtName"  
    android:background="@drawable/edittext" 
    android:layout_width="fill_parent"
    android:layout_marginRight="5dip" 
    android:hint="@string/hnt_name"  
    android:layout_marginLeft="5dip"   
    android:inputType="textCapSentences"
    /> 

 <EditText
    android:id="@+id/edtAge" 
    android:layout_height="40dp"   
    android:layout_below="@+id/txtEmailid"  
    android:background="@drawable/edittext" 
    android:layout_width="fill_parent"
    android:layout_marginRight="5dip"   
    android:layout_marginLeft="5dip" 
    android:hint="@string/hnt_emailid"      
    android:inputType="textEmailAddress"    

    /> 
```

在你的 Oncreate

```
 EditText name = (EditText) findViewById(R.id.edtName);        
 EditText  age = (EditText) findViewById(R.id.edtAge); 
```

获取此值

```
 String var_name = name.getText().toString();  
   String var_age = age.getText().toString(); 
```

希望能帮助到你

# php - 如何将不同的元素与一对多的类别相关联？

> ID：12859056
> 
> 赞同：2
> 
> 时间：2012-10-12T12:26:33.343
> 
> 标签：php, mysql, sql

我需要制作一个界面，您可以在其中选择许多电子设备的每个硬件/材料部分：

在一张表中，我存储了所有设备：

```
 :Name:     :Id:
Computer     1
Laptop       2
Smartphone   3
...         ... 
```

我需要能够将不同种类的材料与它们相关联，材料是指存储不同物品的这张表：

```
 :Name:         :Id:
Keyboard         1
Screen           2
Mouse            3
Motherboard      4
Webcam           5
...             ... 
```

我的问题是，*例如*，我需要将项目`Keyboard`与两个`computer`AND `laptop`...

我已经成功地将项目一一关联，但由于某些设备有许多共同的项目（如键盘），我需要能够将一个项目与我想要的所有设备相关联。

**所以我的问题很简单：如何在 MySql 数据库中存储与哪个设备相关联的项目？**

有什么提示吗？

编辑 ：

好的，看来多对多关系是最好的方法，但是有人对我应该如何使用 sql 查询来使用第三个表有一些提示吗？所以我需要存储例如

```
:id1:        :id2:
  1            2
  1            3
  2            4
  3            1 
```

**但是是否有简单的 sql 命令来执行此类操作，或者我需要使用繁重的 php 脚本来执行此操作吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:31:29.867

如果我理解，这是一个多对多的关系。

所以你需要另一个表来处理这个关系。此表称为联结表

这张桌子看起来像

```
DeviceID   |     MaterialID 
```

主键将是两列。

所以对于同一个设备，你可以有很多材料，对于同样的材料，你可以有很多设备

[这是](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)一篇关于它的好文章

插入您的数据。这将是3个基本插入。

您需要先插入设备和材料表。然后你在联结表中进行另一个插入，因为你将在两个字段上都有外键约束。

要使用键盘选择所有设备，您可以执行以下操作

```
SELECT device.name FROM device INNER JOIN junctionTableName on device.id = junctionTableName.deviceId WHERE junctionTableName.materialId = yourkeyboardid 
```

你需要`JOIN`在两张桌子之间。这是一个您知道的示例，`keyboardID`但如果您不知道，则必须先执行子查询或查询才能选择 id where `name = keyboard`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:30:05.990

您将需要一个表格来表达这种 M:N 关系。

像 'device_material' 表，包含列：device_id 和 material_id

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T12:43:17.917

您可以在第二个表中使用第三列

```
id      item        associate
-----------------------------
1       keyboard    laptop
2       keyboard    computer
3       mouse       computer
4       webcam      laptop
5       webcam      computer 
```

然后是这样的：

`select * from devices_table d join accessory_table a on a.associate = d.name where foo = 'bar'`

# android - 将菜单添加到 ZXings 条码扫描仪，并挤压表面视图

> ID：12859066
> 
> 赞同：13
> 
> 时间：2012-10-12T12:27:20.427
> 
> 标签：android, zxing

Zxings barscanner 应用程序，我已经将它实现为一个库项目，并且它可以工作。

现在我要更改扫描的字段（目标字段）的大小（也完成）。（虽然扫描区域保持不变，但这并不重要，因为焦点仍然在中心。）

但后来我需要在左侧插入一个菜单。这迫使我更改目标字段，如果我更改表面视图或 viewFinderView 的大小并且将其包装在相对视图中，它仍然会开始崩溃，它仍然只解码中心（原因）。我只是想不出一个解决方案：-/

**简短**：我可以更改应该进行扫描的区域，但这只是可见的。实际扫描区域仍然是整个屏幕的中心，而不是移动的可见扫描区域的中心。

谁能帮我？

布局 XML（插入菜单，删除不必要的菜单）：

```
<SurfaceView
    android:id="@+id/preview_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<com.google.zxing.client.android.ViewfinderView
    android:layout_marginLeft="120dip"
    android:id="@+id/viewfinder_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/transparent" />

<LinearLayout
    android:id="@+id/buttonPanel"
    android:layout_width="120dip"
    android:layout_height="fill_parent"
    android:background="#000"
    android:orientation="vertical"
    android:paddingBottom="15dip"
    android:paddingTop="15dip" >

    <TextView 
        android:id="@+id/menuText"
        android:layout_weight="1"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:text="@string/menu_title"/>
    <ImageView
        android:id="@+id/d1Button"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_weight="2"
        android:onClick="scanner1d"
        android:src="@drawable/d1image" />

    <ImageView
        android:id="@+id/d2Button"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_weight="2"
        android:onClick="scanner2d"
        android:src="@drawable/d2image" />
</LinearLayout>

<LinearLayout
    android:id="@+id/result_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/result_view"
    android:orientation="vertical"
    android:padding="4dip"
    android:visibility="gone" >

       **removed**
</LinearLayout>
   **removed** 
```

左图：现在的视图和项目放置在无法识别的位置。

右图：物品放置在被识别的地方（我如何检查目标区域没有改变）：

![视图图像](../Images/9230de1e61603e80f2c1441be0e44a72.png) ![找到结果](../Images/5ff7dfc6ab164623bb9d4f9376e78feb.png)

CameraManager 的变化（取景器的挤压）：

```
public Rect getFramingRect() {
    // added
    int menuSize = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 
                    (float) 120, context.getResources().getDisplayMetrics());
    // end of added

    Point screenResolution = configManager.getScreenResolution();
    if (framingRect == null) {
        if (camera == null) {
            return null;
        }
        int width = screenResolution.x * 3 / 4;
        if (width < MIN_FRAME_WIDTH) {
            width = MIN_FRAME_WIDTH;
        } else if (width > MAX_FRAME_WIDTH) {
            width = MAX_FRAME_WIDTH;
        }
        int height = screenResolution.y * 3 / 4;
        if (height < MIN_FRAME_HEIGHT) {
            height = MIN_FRAME_HEIGHT;
        } else if (height > MAX_FRAME_HEIGHT) {
            height = MAX_FRAME_HEIGHT;
        }

        // added menu size for calculation

        int leftOffset = ((screenResolution.x -menuSize - width) / 2);
        int topOffset = (screenResolution.y - height) / 2;
        framingRect = new Rect(leftOffset, topOffset, leftOffset + width,
                topOffset + height);
        Log.d(TAG, "Calculated framing rect: " + framingRect);
    }
    return framingRect;
} 
```

[现在](https://rapidshare.com/files/2696702205/GCMtest.zip)我把它全部放到了一个小项目 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:11:02.427

如果您将表面视图与取景器视图一起挤压，它实际上会起作用。

尽管您必须考虑到图像被压缩，但目标矩形必须小得多。

# php - PHP 邮件换行符

> ID：12859068
> 
> 赞同：-2
> 
> 时间：2012-10-12T12:27:24.867
> 
> 标签：php, email, line-breaks

我有一个 php 邮件脚本，只要我在这样的 var 中定义正文文本，它就可以正常工作：

```
$body = "Some text goes here\n\nSome other text goes here!"; 
```

像这样完成后，换行符“\n”在邮件中完美运行。

现在我想在配置文件中插入正文文本，邮件脚本从中检索文本。所以我在配置文件中做了一个常量，如下所示：

```
define('_body_', 'Some text goes here\n\nSome other text goes here!'); 
```

我的邮件脚本现在看起来像这样：

```
$body = _body_; 
```

但是现在换行符没有在邮件中“显示”。相反，邮件看起来像这样：

“这里有一些文字\n\n这里有一些其他文字！”

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:28:41.050

这是因为您使用的是单引号`'`。

尝试

```
define('_body_', "Some text goes here\n\nSome other text goes here!"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T12:28:56.393

`\n`如果它在双引号内（如您的第一个示例）但不在单引号内（如您的第二个示例），则将被转换为换行符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T12:28:57.487

用双引号定义：

```
define('_body_', "Some text goes here\n\nSome other text goes here!"); 
```

# c# - 如何在 web.config 文件中为实时服务器设置图像文件夹路径

> ID：12859074
> 
> 赞同：0
> 
> 时间：2012-10-12T12:27:45.830
> 
> 标签：c#, asp.net, image

我在 web.config 文件中有以下图像路径的密钥

```
<add key="ImagePath" value="\Images\"/> 
```

我想将图像存储在实时站点上的此文件夹中，如何在此处设置此值是否会出现域名，因为图像未存储在此路径中，它在本地站点上工作正常但在实时站点上无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:40:02.387

这听起来像是权限问题。

当 IIS 工作进程尝试写入 /Images/ 文件夹时，它无法写入，因为它没有写入权限。当您通过 Visual Studio 在本地运行您的网站时，它会授予工作进程对解决方案中任何文件夹的完全权限 - 这可能就是您可以在本地运行它但不能在服务器上运行它的原因。

您需要为 IIS 工作进程用户授予对 /Images/ 文件夹的读取和写入访问权限。

但是，您必须确保您没有授予 IIS 工作进程用户读取和执行权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:47:46.487

如果此密钥在您的**web.config**文件中

```
<appSettings>
  <add key="ImagePath" value="\Images\"/>
</appSettings> 
```

然后在您的服务器端代码中，您可以从配置中获取图像路径以获取存储的物理路径，如下所示：

```
var imagePath = ConfigurationManager.AppSettings["ImagePath"];
var physicalPath = Server.MapPath(imagePath);

if (File.Exists(physicalPath))
{
    //... store your images ...
} 
```

# javascript - 如何在所有参数都是对象的情况下改变js中的函数参数？

> ID：12859075
> 
> 赞同：0
> 
> 时间：2012-10-12T12:27:46.370
> 
> 标签：javascript, function, parameters, requirejs

我正在使用`requireJS`并且需要根据条件改变请求的文件数量`a == true`。

目前我正在这样做，这不起作用：

```
// ok
var  baseRequestWidgets = $('html').attr('init') != true 
    ?  [ "text!../tmp/page/tmp_page_header_generic.html"
        ,"text!../tmp/page/tmp_page_header_specific.html"       
        ,"text!../tmp/widgets/tmp_widget_header.html"
        ,"text!../tmp/widgets/tmp_widget_navbar.html"
        ,"text!../tmp/page/tmp_page_footer.html"
        ]
    :  [ "text!../tmp/widgets/tmp_widget_header.html"
        ,"text!../tmp/widgets/tmp_widget_navbar.html"
        ]
// not ok
    , baseRequestObjects = $('html').attr('init') != true 
    ?  page_header_generic, page_header_specfic, page_widget_header, page_widget_navbar, page_footer 
    : page_widget_header, page_widget_navbar 

    require( baseRequestWidgets, function( baseRequestObjects
                                                /*
                                                  page_header_generic
                                                , page_header_specfic
                                                , page_widget_header
                                                , page_widget_navbar
                                                , page_footer 
                                                */
                                                ){ ... } 
```

问题是我无法将对象传递给使用`baseRequestObjects`. 文件被正确请求，但`baseRequestObjects`不起作用。

**问题：**
任何想法我做错了什么？谢谢！

**编辑**：
我得到的错误是`page_header_generic is not defined`，所以我假设我的 page_header_generic 声明是在请求基础文件之前完成的？？？

**编辑**：
更接近... RequireJS`baseRequestObjects`用于存储第一个请求的文件，而实际上它是可变数量的请求文件的占位符。

所以问题应该是： **当包含x个对象名称的占位符被误解为单独的占位符名称本身时，如何将动态数量的对象名称传递给requireJS？**

**编辑：**
所以这行得通，不确定我是否喜欢它，因为我什么都没通过......

```
var baseRequestWidgets = function(trigger){
    var passBack;
    if ( trigger == "true" ){
        passBack = [     "text!../tmp/widgets/tmp_widget_header.html"
                        ,"text!../tmp/widgets/tmp_widget_navbar.html"
                    ];
                    } else {
        passBack = [     "text!../tmp/widgets/tmp_widget_header.html" 
                        ,"text!../tmp/widgets/tmp_widget_navbar.html"
                        ,"text!../tmp/page/tmp_page_header_generic.html"
                        ,"text!../tmp/page/tmp_page_header_specific.html"       
                        ,"text!../tmp/page/tmp_page_footer.html"
                    ];
            }
        return passBack;
        }   
    , getBaseRequestObjects = function( temps) {
        var objArr = [];
        for ( var i = 0; i < temps.length; i++){
            var thisString = temps[i],
            addToArray = temps[i].match(/tmp_(.*?)\.html/);
            objArr.push( addToArray[1] )
            }
        return objArr;
        }
    , baseRequestObjects 
```

我需要把它放在一个函数中，因为这两个变量都必须是动态的。

然后我像这样调用require：

```
// inside my event call
var ...
    widgetsForThisRequest = baseRequestWidgets(trigger),
    baseRequestObjects = getBaseRequestObjects( widgetsForThisRequest );

require( widgetsForThisRequest,
    function( /* dynamic */ ) {
        // this will be dnyamic strings
        console.log( widgetsForThisRequest );
        // this will be dynamic objects
        console.log( baseRequestObjects );

        // loop using arguments - not sure if I like this
        for ( i = 0; i < baseRequestObjects.length; i++){
            widget = arguments[i];
            tempName = baseRequestObjects[i];
            ... 
```

所以我没有传递任何对象，并且必须在我的循环中使用`arguments`. 似乎工作，但不确定这是要走的路。无论如何，有超过 2 或 5 个字符串，因此必须有超过 2 或 5 个携带相应字符串的对象。现在我很好，但如果有人知道更好的方法，谢谢分享！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:48:43.517

您标记为“不好”的代码并没有按照您的想法执行；你不能创建这样的变量。

我只是重新排序您的包含，以便您始终请求的两个文件首先出现，然后检查您的定义中是否存在其他模块。

```
var  baseRequestWidgets = $('html').attr('init') != true 
    ?  [ "text!../tmp/widgets/tmp_widget_header.html"
        ,"text!../tmp/widgets/tmp_widget_navbar.html"
        ,"text!../tmp/page/tmp_page_header_generic.html"
        ,"text!../tmp/page/tmp_page_header_specific.html"       
        ,"text!../tmp/page/tmp_page_footer.html"
        ]
    :  [ "text!../tmp/widgets/tmp_widget_header.html"
        ,"text!../tmp/widgets/tmp_widget_navbar.html"
        ]

    require( baseRequestWidgets, function(    page_widget_header
                                            , page_widget_navbar
                                            , page_header_generic
                                            , page_header_specfic
                                            , page_footer 
                                            ){

         // page_widget_header and page_widget_navbar are always loaded

         // page_header_generic, page_header_specfic and page_footer
         // are undefined if init === true
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:09:19.127

您可以将所有参数存储在一个数组（可变大小）中并在该函数上使用该[`.apply`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)。

# mmap - mmap 系统调用在取消映射后不会删除映射

> ID：12859084
> 
> 赞同：1
> 
> 时间：2012-10-12T12:27:58.343
> 
> 标签：mmap

我想在没有任何额外系统调用开销的情况下向用户空间公开一些内核内存。我为此选择了 mmap 路线。这是来自驱动程序的示例代码。

```
int mmp_mmap(struct file *filp, struct vm_area_struct *vma)
{

    struct page *page = NULL;
    struct mmp * mpdev=NULL;
    unsigned long pfn;
    mpdev=filp->private_data;
    vma->vm_flags |= VM_RESERVED|VM_IO;
    /*
     * Get the page corresponding to the buffer address
     */
    page=virt_to_page(mpdev->buf);
    pfn=page_to_pfn(page);
    /*
     * Now create a entry corresponding to this pfn in the page table.
     */
    if (remap_pfn_range(vma,vma->vm_start,pfn,vma->vm_end-  
                        vma->vm_start,vma->vm_page_prot)) {
        printk(KERN_ERR "remap_pfn_range failed\n");
        return -EAGAIN;
    }
    return 0;
} 
```

问题是当用户空间程序打开这个设备时，映射内存并修改它，然后它第一次工作正常。任何后续的内存打开和映射都不会修改内核缓冲区。用户登陆程序显式地取消映射这个映射的缓冲区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T12:44:27.250

如果你只是想将一些内核内存暴露给用户空间，你可以使用 /dev/kmem 而不是实现你自己的。您应该在配置内核时启用此设备：

设备驱动程序 --> 字符设备 -->/dev/kmem 虚拟设备支持。

如果您坚持这样做，您可以阅读 /dev/kmem 的代码以获得提示。

# maven - 使用 Maven 插件设置 JMeter 属性

> ID：12859085
> 
> 赞同：5
> 
> 时间：2012-10-12T12:28:17.300
> 
> 标签：maven, properties, jmeter, jmeter-maven-plugin

我正在使用 JMeter 的 Maven 插件（http://jmeter.lazerycode.com/）。

在我的 JMeter 测试计划中，我定义了各种属性，例如 hostName、threadCount 等。

如果我要从命令行使用标准 JMeter 程序，我会指定如下属性：

```
jmeter -n -t mytest.jmx -JhostName=www.example.com -JthreadCount=5 
```

由于 Maven JMeter 插件是通过以下命令执行的：

```
mvn verify 
```

如何传递属性值？命令：

```
mvn verify -JhostName=www.example.com -JthreadCount=5 
```

似乎不起作用。我一定遗漏了一些明显的东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-07T23:25:19.687

在你的`<build>`街区之外。你可以放：

```
 <properties>
    <my.host>localhost</my.host>
  </properties> 
```

然后更新你的配置块说：

```
<propertiesUser> 
    <hostName>${my.host}</hostName> 
</propertiesUser> 
```

最后，在执行 maven 时，您可以使用以下命令覆盖：

```
mvn verify "-Dmy.host=www.testsite.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T11:36:58.367

```
 <properties>
<my.host>hostname</my.host> 
```

```
<propertiesUser> 
<hostName>${my.host}</hostName> 
```

最后，在执行 maven 时，您可以使用以下命令覆盖：

mvn verify "-Dmy.host=www.testsite.com" 不应该是这样的吗？

# c# - 如何获取 DataGridView 单元格内的按钮实例？

> ID：12859094
> 
> 赞同：1
> 
> 时间：2012-10-12T12:28:54.243
> 
> 标签：c#, .net, datagridview, windows-forms-designer

我不确定这是否可行，但我想获取 DataGridView 单元格内的按钮实例。（使用 c# .net 和 windows 窗体）

这样做的原因是因为我想在该按钮附近弹出一个带有控件的面板，所以我需要它的位置。（这可能吗？）。

我正在处理 CellClicked 事件处理程序中的按钮单击：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        Int32 id = (Int32)dataGridView1[0, e.RowIndex].Value;
        if (e.RowIndex < 0 || e.ColumnIndex != dataGridView1.Columns["NewDate"].Index)
        {
            if (e.RowIndex < 0 || e.ColumnIndex != dataGridView1.Columns["Delete"].Index) return;
            else
            {

            }
        }
        else
        {
            //Button button - the button I'm trying to get 
            panel2.Location=new Point(button.Location.X,button.Location.Y);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:32:17.590

您不必获取按钮，而是单击单元格的矩形。检查代码：

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        Int32 id = (Int32)dataGridView1[0, e.RowIndex].Value;
        if (e.RowIndex < 0 || e.ColumnIndex != dataGridView1.Columns["NewDate"].Index)
        {
            if (e.RowIndex < 0 || e.ColumnIndex != dataGridView1.Columns["Delete"].Index) return;
            else
            {

            }
        }
        else
        {
            Rectangle rect = dataGridView1.GetCellDisplayRectangle(e.ColumnIndex, e.RowIndex, false);
            panel2.Location=new Point(rect.X,rect.Y);

        }

    } 
```

# spring - Springs Web Flow 的问题。表单提交值是正确的，AjaxEventDecoration 是错误的

> ID：12859099
> 
> 赞同：1
> 
> 时间：2012-10-12T12:29:01.747
> 
> 标签：spring, spring-mvc, dojo, spring-webflow

我遇到了 Springs Web Flow 的问题。如果用户单击表单提交按钮，我的 bean 中将有**RIGHT**值。

例如，性别字段将为 MALE 或 FEMALE。但是我随后添加了一个***AjaxEventDecoration***来提交更改性别下拉框，这实际上是一个**表单：选择**，在 bean 中我将获得值**“sex”**，即 elementId。下面是我的代码，请您查看它并让我知道您的想法...我需要尽快修复此值...

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<style type="text/css" media="screen">
 @import url("<c:url value="/resources/dojo/resources/dojo.css"/>");
 @import url("<c:url value="/resources/dijit/themes/claro/claro.css"/>");
</style>     

<script djconfig="parseOnLoad: true"
 src="<c:url value="/resources/dojo/dojo.js"/>" type="text/javascript"></script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring.js" />"> </script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring-Dojo.js" />"></script>
<script type="text/javascript">dojo.require("dojo.parser");</script>

<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>
</head>
<body class="claro">
    <h2>Dropdown Test</h2>

    <form:form commandName="customer" id="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <div id="container">
            <table>
                <tr>
                    <td><font color=red><form:errors path="sex" /></font><b>Sex:</b></td>
                    <td><form:select path="sex" id="sex">
                            <form:option value="MALE" label="MALE" />
                            <form:option value="FEMALE" label="FEMALE" />
                        </form:select> 

                        <script type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "sex",
                            widgetType : "dijit.form.Select",
                            widgetAttrs : {
                            promptMessage : "Enter Sex",
                            required : true }}));
                         </script></td></tr>
                </table>
        </div>

        <input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <input type="submit" name="_eventId_cancel" value="Cancel" />
        <p>
        <script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'submit',
                event : 'onclick'
            }));

            Spring.addDecoration(new Spring.AjaxEventDecoration({
                 elementId: "sex",
                 event: "onChange",
                 formId:"customer",
                 params: {fragments:"body", _eventId: "loadSchools"}}));
        </script>
    </form:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:31:48.440

`</b>`您在“活动”之后没有任何关闭，但是`</n>`.
这些事情有时会导致奇怪的问题，比如你遇到的问题

修复它并重试

[编辑] 我找到了一个解决方案给你 pb: 基本上删除你的选择上的装饰和 ajax 事件并这样做：

```
<tr>
    <td><font color=red><form:errors path="sex" /></font><b>Sex:</b></td>
    <td><form:select path="sex" id="sex" required="true" data-dojo-type="dijit/form/Select" onchange="Spring.remoting.submitForm('sex', 'customer', {fragments:'body', _eventId: 'loadSchools'}); return false;">
            <form:option value="MALE" label="MALE" />
            <form:option value="FEMALE" label="FEMALE" />
        </form:select>
   </td>
</tr> 
```

似乎选择装饰存在一些问题...我会尝试看看是否可以找到另一种方法，但我对此进行了测试并且它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:37:42.737

我解决了这个问题。我删除了***Spring.AjaxEventDecoration***调用并将***Spring.ElementDecoration***更改为以下内容：

```
<script type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "sex",
                            widgetType : "dijit.form.Select",
                            widgetAttrs : {
                            promptMessage : "Enter Sex",
                            required : true, 
                            onChange : function() {
                                Spring.remoting.submitForm(
                                    'submit', 
                                    'customer', 
                                    {_eventId: 'sexchange', fragments:'contents'}
                                 ); 
                                 return false;
                            } }}));

                    </script> 
```

我不是 100% 清楚为什么 Ajax 调用不起作用，但我的项目现在正在使用此代码！

# memory-leaks - CoreAnimation：无法为我的 iPad 应用程序分配 1971232 字节？

> ID：12859100
> 
> 赞同：2
> 
> 时间：2012-10-12T12:29:03.320
> 
> 标签：memory-leaks, core-animation, core-plot, ipad-2

我正在使用核心绘图框架，一段时间后我刷新视图，我收到“CoreAnimation：无法分配 1971232 字节”的错误。这里附上我绘制聊天的代码

```
- (void)ipadDraw
{
    CPTGradient *overlayGradient = [[[CPTGradient alloc] init] autorelease];
    overlayGradient.gradientType = CPTGradientTypeRadial;
    overlayGradient = [overlayGradient addColorStop:[[CPTColor blackColor] colorWithAlphaComponent:0.0] atPosition:0.0];
    overlayGradient = [overlayGradient addColorStop:[[CPTColor blackColor] colorWithAlphaComponent:0.5] atPosition:0.9];
    overlayGradient = [overlayGradient addColorStop:[[CPTColor blackColor] colorWithAlphaComponent:0.8] atPosition:1.0];
    CGRect rect=self.view.bounds;

    if(currentOrientation   == UIInterfaceOrientationPortrait || currentOrientation== UIInterfaceOrientationPortraitUpsideDown)
    {

        NSLog(@"%@",NSStringFromCGRect(rect));
        rect.size.width = rect.size.width;
        rect.origin.x=0;
        rect.origin.y-=120;
    }
    else 
    {
        NSLog(@"%@",NSStringFromCGRect(rect));

        rect.origin.x=60;
        rect.origin.y+=25;
        rect.size.width=600;
        rect.size.height=700;
    }

    defaultLayerHostingView = [(CPTGraphHostingView *)[CPTGraphHostingView alloc] initWithFrame:rect];
      defaultLayerHostingView.userInteractionEnabled=YES;
    defaultLayerHostingView.exclusiveTouch=YES;
    defaultLayerHostingView.multipleTouchEnabled=YES;
    defaultLayerHostingView.backgroundColor= [UIColor clearColor];
    //defaultLayerHostingView.delegate=self;

    [myScrollView addSubview:defaultLayerHostingView];
    myScrollView.delegate=self;

    CGRect bounds  = defaultLayerHostingView.bounds;
    graph  = [[CPTXYGraph alloc] initWithFrame:[defaultLayerHostingView bounds]];

    defaultLayerHostingView.hostedGraph = graph; 

    CPTMutableTextStyle *textStyle  = [CPTMutableTextStyle textStyle];//
    textStyle.color = [CPTColor grayColor];
    textStyle.fontName = @"Helvetica-Bold";
    textStyle.fontSize = bounds.size.height / 20.0f;
    graph.titleTextStyle = textStyle;
    graph.titleDisplacement = CGPointMake(0.0f, bounds.size.height / 18.0f);
    graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;
    graph.plotAreaFrame.masksToBorder = NO;

    // Graph padding
    CGFloat boundsPadding = bounds.size.width / 20.0f;
    NSLog(@"the bounds padding is %f",boundsPadding);
    graph.paddingLeft = boundsPadding;
    graph.paddingTop = graph.titleDisplacement.y * 2;
    graph.paddingRight = 32;
    graph.paddingBottom = boundsPadding;
    graph.axisSet = nil;

    // Add pie chart

     CPTPieChart *piePlot = [[CPTPieChart alloc] init];

    piePlot.dataSource = self;
    piePlot.title=@"First";

    piePlot.pieRadius=200;
    piePlot.startAngle = M_PI_4;
    piePlot.sliceDirection = CPTPieDirectionCounterClockwise;
    piePlot.overlayFill = [CPTFill fillWithGradient:overlayGradient];
    piePlot.delegate = self;
    [graph addPlot:piePlot];

    [piePlot release];

    CPTLegend *theLegend = [CPTLegend legendWithGraph:graph];
    theLegend.numberOfColumns = 2;
    theLegend.fill = [CPTFill fillWithColor:(CPTColor *)[UIColor clearColor]];
    theLegend.cornerRadius = 5.0;
    theLegend.swatchSize=CGSizeMake(25, 25);
    theLegend.textStyle=textStyle1;
    graph.legend = theLegend;
    graph.legendAnchor =CPTRectAnchorCenter;

    graph.legendDisplacement=CGPointMake(-10, -275);

    UIButton *ProceedButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [ProceedButton setImage:[UIImage imageNamed:@"details_button_land.png"] forState:UIControlStateNormal];
    [ProceedButton setUserInteractionEnabled:YES];

    [myScrollView  addSubview:claimsProceedButton];
    ProceedButton.tag=0;
    if(currentOrientation   == UIInterfaceOrientationPortrait || currentOrientation== UIInterfaceOrientationPortraitUpsideDown)
    {

        [ProceedButton setFrame:CGRectMake((myScrollView.frame.size.width-300)/2, 720, 300.00 , 51.00)];
    }
    else{
        [ProceedButton setFrame:CGRectMake((myScrollView.frame.size.width-300)/2, 690, 300.00 , 51.00)];
    }

    rect=self.view.bounds;
    [ProceedButton addTarget:self action:@selector(ProceedDetail:) forControlEvents:UIControlEventTouchUpInside];
    UILabel *viewDetails = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300.00, 51.00)];
    [ProceedButton addSubview:viewDetails];
    [viewDetails setText:@"View Chart Data"];
    [viewDetails setFont:[UIFont boldSystemFontOfSize:13]];
    [viewDetails setBackgroundColor:[UIColor clearColor]];
    [viewDetails setTextAlignment:UITextAlignmentCenter];

    NSLog(@"%@",NSStringFromCGRect(rect));

    rect=self.view.bounds;

    defaultLayerHostingView=nil;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:46:46.807

您可以在初始化对象时自动释放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:22:40.113

您可以将现有代码替换为此

```
 - (void)ipadDraw 
```

{

```
CPTGradient *overlayGradient = [[[CPTGradient alloc] init] autorelease];
overlayGradient.gradientType = CPTGradientTypeRadial;
overlayGradient = [overlayGradient addColorStop:[[CPTColor blackColor] colorWithAlphaComponent:0.0] atPosition:0.0];
overlayGradient = [overlayGradient addColorStop:[[CPTColor blackColor]
overlayGradient = [overlayGradient addColorStop:[[CPTColor blackColor] colorWithAlphaComponent:0.5] atPosition:0.9];
enter code here   overlayGradient = [overlayGradient addColorStop:[[CPTColor blackColor] colorWithAlphaComponent:0.8] atPosition:1.0];

CGRect rect=self.view.bounds;if(currentOrientation==UIInterfaceOrientationPortrait || currentOrientation== UIInterfaceOrientationPortraitUpsideDown)
  { NSLog(@"%@",NSStringFromCGRect(rect));

rect.size.width = rect.size.width;
rect.origin.x=0;
rect.origin.y-=120;
}

else { 
 NSLog(@"%@",NSStringFromCGRect(rect)); 
rect.origin.x=60;
rect.origin.y+=25;
rect.size.width=600;
rect.size.height=700;
}

defaultLayerHostingView = [[(CPTGraphHostingView *)[CPTGraphHostingView alloc] initWithFrame:rect]autorelease];
defaultLayerHostingView.userInteractionEnabled=YES;
defaultLayerHostingView.exclusiveTouch=YES;
defaultLayerHostingView.multipleTouchEnabled=YES;
defaultLayerHostingView.backgroundColor= [UIColor clearColor];
[myScrollView addSubview:defaultLayerHostingView];
myScrollView.delegate=self;
CGRect bounds  = defaultLayerHostingView.bounds;
graph  = [[[CPTXYGraph alloc] initWithFrame:[defaultLayerHostingView bounds]]autorlease];
defaultLayerHostingView.hostedGraph = graph; 

CPTMutableTextStyle *textStyle  = [CPTMutableTextStyle textStyle];//
textStyle.color = [CPTColor grayColor];
textStyle.fontName = @"Helvetica-Bold";
textStyle.fontSize = bounds.size.height / 20.0f;
graph.titleTextStyle = textStyle;
graph.titleDisplacement = CGPointMake(0.0f, bounds.size.height / 18.0f);
graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;
graph.plotAreaFrame.masksToBorder = NO;

// Graph padding
CGFloat boundsPadding = bounds.size.width / 20.0f;
NSLog(@"the bounds padding is %f",boundsPadding);
graph.paddingLeft = boundsPadding;
graph.paddingTop = graph.titleDisplacement.y * 2;
graph.paddingRight = 32;
graph.paddingBottom = boundsPadding;
graph.axisSet = nil;

// Add pie chart

 CPTPieChart *piePlot = [[[CPTPieChart alloc] init]autorelease];

piePlot.dataSource = self;
piePlot.title=@"First";

piePlot.pieRadius=200;
piePlot.startAngle = M_PI_4;
piePlot.sliceDirection = CPTPieDirectionCounterClockwise;
piePlot.overlayFill = [CPTFill fillWithGradient:overlayGradient];
piePlot.delegate = self;
[graph addPlot:piePlot];

[piePlot release];

CPTLegend *theLegend = [CPTLegend legendWithGraph:graph]autorlease];
theLegend.numberOfColumns = 2;
theLegend.fill = [CPTFill fillWithColor:(CPTColor *)[UIColor clearColor]];
theLegend.cornerRadius = 5.0;
theLegend.swatchSize=CGSizeMake(25, 25);
theLegend.textStyle=textStyle1;
graph.legend = theLegend;
graph.legendAnchor =CPTRectAnchorCenter;

graph.legendDisplacement=CGPointMake(-10, -275);

UIButton *ProceedButton = [[UIButton buttonWithType:UIButtonTypeCustom];
[ProceedButton setImage:[UIImage imageNamed:@"details_button_land.png"] forState:UIControlStateNormal]autorelease];
[ProceedButton setUserInteractionEnabled:YES];

[myScrollView  addSubview:claimsProceedButton];
ProceedButton.tag=0;
if(currentOrientation   == UIInterfaceOrientationPortrait || currentOrientation== UIInterfaceOrientationPortraitUpsideDown)
{

    [ProceedButton setFrame:CGRectMake((myScrollView.frame.size.width-300)/2, 720, 300.00 , 51.00)];
}
else{
    [ProceedButton setFrame:CGRectMake((myScrollView.frame.size.width-300)/2, 690, 300.00 , 51.00)];
}

rect=self.view.bounds;
[ProceedButton addTarget:self action:@selector(ProceedDetail:) forControlEvents:UIControlEventTouchUpInside];
UILabel *viewDetails = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300.00, 51.00)];
[ProceedButton addSubview:viewDetails];
[viewDetails setText:@"View Chart Data"];
[viewDetails setFont:[UIFont boldSystemFontOfSize:13]];
[viewDetails setBackgroundColor:[UIColor clearColor]];
[viewDetails setTextAlignment:UITextAlignmentCenter];

NSLog(@"%@",NSStringFromCGRect(rect));

rect=self.view.bounds;

defaultLayerHostingView=nil; 
```

}

# android - 使用 HashMap 时看不到 ListView 中的任何内容

> ID：12859103
> 
> 赞同：0
> 
> 时间：2012-10-12T12:29:09.497
> 
> 标签：android, android-listview, hashmap

我正在尝试构建一个自定义`Listview`，右侧有图像，主文本和子文本。主要问题是我没有收到任何错误，并且出现了空白视图。我可以点击它，但我的`ListView`. 我的代码：

```
 public class MenuScreen extends Activity  {            
            TextView maintext, subtext;
            ImageView icon ;

                    private static final String [] menuitems = {"Availability","Messages","Greetings","Address Book","Calls","Settings"};
                    private static final int [] menu_icons = {R.drawable.menu_availability,R.drawable.menu_messages,R.drawable.menu_greetings,R.drawable.menu_contacts,R.drawable.menu_calls,R.drawable.menu_settings}; 
                    private static String [] submenu_items = {"1","2","3","4","5","6"};
                    @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            // TODO Auto-generated method stub
                            super.onCreate(savedInstanceState);
                            setContentView(R.layout.menulogin_main);
                            maintext = (TextView)findViewById(R.id.tvMainText);
                            subtext = (TextView)findViewById(R.id.tvSubText);
                            icon = (ImageView)findViewById(R.id.iicon);

                            List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();
                             for(int i=0;i<6;i++){
                                    HashMap<String, String> hm = new HashMap<String,String>();
                                    hm.put("tvMainText", "MainText : " + menuitems[i]);
                                    hm.put("tvSubText","SubText : " + submenu_items[i]);
                                    hm.put("iicon", Integer.toString(menu_icons[i]) );
                                    aList.add(hm);
                                }

                             String[] from = { "iicon","tvMainText","tvSubText" };

                             int[] to = { R.id.iicon , R.id.tvMainText, R.id.tvSubText} ;

                             SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.menulogin_main, from, to);

                               // Getting a reference to listview of main.xml layout file
                               ListView listView = ( ListView ) findViewById(R.id.listmenu);

                               // Setting the adapter to the listView
                               listView.setAdapter(adapter);
                            listView.setOnItemClickListener(new OnItemClickListener() {

                                public void onItemClick(AdapterView<?> listview, View view,
                                        int position, long id) {
                                    switch(position){

                                    case 0 :
                                        Intent avail = new Intent(MenuScreen.this,Availability.class);
                                        startActivity(avail);

                                    break;
                                    }

                                }
                            });

                    }

                } 
```

ListView 的布局文件 menulogin_main：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
         android:background="@drawable/background"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listmenu"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

        </ListView>

    </LinearLayout> 
```

行的布局文件，menulogin：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/iicon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="10dp"
                android:src="@drawable/logon_image" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/tvMainText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="5dp"
                    android:layout_marginTop="5dp"
                    android:text="MAIN TEXT"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/tvSubText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="SUB TEXT"
                    android:textAppearance="?android:attr/textAppearanceMedium" />
            </LinearLayout>
        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:35:33.420

这可能是由于您使用的布局文件而发生的。Activity 的 layout( ) 有相同的布局文件，但s 适配器`R.layout.menulogin_main`也使用相同的布局文件。`ListView`现在，您要么在同一布局（ ）中拥有`ListView`（带有 id `R.id.listmenu`）和行视图（`R.id.iicon`, `R.id.tvMainText`, ），并且 ListView 覆盖了这些视图，要么您打算对行使用另一个布局而不是（但这可能会抛出一个例外）。`R.id.tvSubText``R.layout.menulogin_main``ListView``R.layout.menulogin_main`

您应该有一个为`ListView`' 行设计的特殊布局文件，其中*仅*包含所需的视图。

编辑：menu_login 的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/iicon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/tvSubText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/iicon"
        android:text="SUB TEXT"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tvMainText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/tvSubText"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@id/iicon"
        android:text="MAIN TEXT"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

# objective-c - 结构中的IOS UIColor

> ID：12859104
> 
> 赞同：2
> 
> 时间：2012-10-12T12:29:18.693
> 
> 标签：objective-c

Lorem ipsum dolor sit amet, consectetur adipiscing elit。Donec mauris nibh，venenatis sed purus nec，consequat commodo turpis。Quisque rhoncus maximus mattis。Morbi convallis sagittis lectus eget mollis。Nunc tristique, lectus ac faucibus elementum, dui enim porta ex, nec vestibulum sem neque sit amet est. Donec massa arcu, 发酵 a massa eu, maximus rut​​rum urna。前庭 imperdiet pulvinar ipsum，非 imperdiet orci efficitur quis。Donec volutpat erat dui，一个 sodales enim blandit ut。Pellentesque ac imperdiet nibh，sed feugiat lorem。Praesent in velit et est tempus facilisis sed at urna。Nulla sapien sem、sagittis eu mauris quis、consequat tempor sem。Mauris rhoncus，turpis eu vehicula volutpat，nibh libero balloonum quam，vel posuere ante metus quis leo。Maecenas et lorem feugiat neque lobortis accumsan。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:32:20.607

你应该使用 opaque 类型[`CGColorRef`](https://developer.apple.com/documentation/graphicsimaging/reference/CGColor/Reference/reference.html)而不是`UIColor`你的结构。然后，在代码的 CocoaTouch 部分中，您可以获得`UIColor`如下实例：

```
UIColor *color = [UIColor colorWithCGColor:colorRef]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:20:21.347

如果您遵循不混合结构和对象的建议，我会为您节省一些麻烦。这给您留下了两种可能性：

1.  使用 Objective-C 对象：使“LevelMeterColorThreshold”成为一个具有两个属性的类，而不是一个结构。
2.  使用 C 结构和 C 原语：代替“UIColor”，使用三个浮点数红色/绿色/蓝色 - 如果足够的话。然后您可以稍后重建 UIColor。

我可能会选择＃1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:35:47.920

在这个例子中怎么可能：http: [//developer.apple.com/library/ios/#samplecode/SpeakHere/Listings/AudioViews_LevelMeter_h.html#//apple_ref/doc/uid/DTS40007802-AudioViews_LevelMeter_h-DontLinkElementID_7](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Listings/AudioViews_LevelMeter_h.html#//apple_ref/doc/uid/DTS40007802-AudioViews_LevelMeter_h-DontLinkElementID_7)

他们正在使用带有 UIColor* 的结构？

# http - 浏览器是否会向通过不同协议（https 与 http）提供服务的站点发送抢占式授权标头？

> ID：12859107
> 
> 赞同：0
> 
> 时间：2012-10-12T12:29:33.350
> 
> 标签：http, https, basic-authentication

我有一个可通过 HTTPS 和 HTTP 访问的站点（运行第 3 方应用程序）。它允许人们使用基本身份验证登录。我试图强制所有登录都通过 HTTPS 而不是 HTTP。

该应用程序的奇怪之处在于身份验证“领域”是域 (/) 的根，并且基于查询字符串参数而不是 URL 路径返回 401。我想我已经正确设置了 RewriteRules，以便任何可能导致 401 的请求首先重定向到 HTTPS。但是，我担心*在*登录安全站点后，如果用户以某种方式导航回 HTTP 版本，浏览器仍会发送授权标头（现在未加密）而不会看到 401，因为它与 /same/path 是同一个域/结构体。也就是说，我担心 RFC 2617 中的这种行为：

> 客户端可以先发制人地发送相应的授权标头以及对该空间中资源的请求，而无需收到来自服务器的另一个挑战。

我应该担心吗？或者切换协议（https 到 http）是否会阻止浏览器发送那些抢占式 auth 标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:00:42.133

我们在应用程序中大量使用基本身份验证。当然都使用 https :)

浏览器有一个很好的沙盒模型，他们知道当协议改变时，目标机器可能不再一样了。您不必担心浏览器提交身份验证信息。

即使他们遇到最初的 401，他们仍然会要求用户输入用户名/密码对。

# javascript - JavaScript 在 Wordpress 3.4.2 中不起作用

> ID：12859112
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:29:48.500
> 
> 标签：javascript, wordpress

我以前从未尝试在 wordpress 帖子中使用 javascript。今天，当我尝试时，它不起作用。我尝试了几个脚本，但没有一个工作。

例如，`<Script type="text/javascript"> alert("test");</script>`

过去，我曾尝试使用 SweetCaptcha，但没有成功。我在想这可能也要做这个问题。

有没有人有类似的情况？

我禁用了所有插件只是为了确保它们没有冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:42:10.620

我再次停用了所有插件，并激活了它们，现在它可以工作了。我以前做过几次，但我想这就是问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:16:12.610

> 我以前从未尝试在 wordpress 帖子中使用 javascript。

如果粘贴到Post/Page 编辑器的***HTML版本中，Javascript 应该可以工作。***如果粘贴到可视化编辑器中，它将*不起作用。*如果粘贴到可视化编辑器中，字符串将被编码并且不起作用。我刚刚测试了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:39:13.987

从代码中删除所有空格。尝试这个：

```
<script type="text/javascript">alert("test");</script> 
```

# facebook - 删除 Facebook 请求

> ID：12859118
> 
> 赞同：0
> 
> 时间：2012-10-12T12:30:17.283
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

[这里](http://developers.facebook.com/docs/requests/)的 facebook 文档说“一旦请求被接受，开发人员有责任删除请求”。据我了解，当有人像这样在 facebook 上向多个用户发送请求时：

```
function sendRequestViaMultiFriendSelector() {
  FB.ui({method: 'apprequests',
   message: 'test message'
   }, requestCallback);
} 
```

requestCallback() 函数只返回一个 request_id。那么，如果我在有人接受的情况下删除了请求，其他用户将如何接受删除的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:09:59.580

当用户跟随​​应用请求时，您可以使用请求 ID

```
$_GET['request_ids'] 
```

然后检索所有可以调用graph api删除相应请求的请求ID，如下所示：

```
if(isset($_GET['request_ids']))
{
    $request_ids = $_GET['request_ids'];
}
$request_ids = explode(",", $request_ids);
foreach($request_ids as $request_id)
{

        $full_request_id = $request_id."_".$fbid;  //$fbid is current user facebook id
        $facebook->api("$full_request_id","DELETE");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:00:25.940

查看[FB 请求概览页面的](http://developers.facebook.com/docs/requests/)*请求 ID 格式*部分。

实际发送给特定用户的请求的实际图形路径是“request-id”_“recipient-user-id”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T10:46:19.423

您可以在移动模式下访问 facebook ( **m.faceook.com** )

1-访问邀请面板

2-显示所有邀请

chrome 中的 3-open 控制台模式

4-通过将所有**jquery.min**代码复制并粘贴到控制台来激活 jquery 并执行此脚本：

```
$("._54k8._56bs._56bt").trigger("click"); 
```

将取消或发送邀请

# google-apps-script - 如何将 favicon.ico 附加到使用 Google Apps 脚本构建的 Web 应用程序？

> ID：12859120
> 
> 赞同：4
> 
> 时间：2012-10-12T12:30:24.553
> 
> 标签：google-apps-script

关于如何将 favicon.ico 附加到使用 Google Apps 脚本构建的 Web 应用程序的任何想法？

编辑 1：使用 UiApp

谢谢，福斯托

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-15T03:50:02.693

Google Apps 现在支持此功能（截至 2015 年 11 月）：[https ://developers.google.com/apps-script/reference/html/html-output#setfaviconurliconurl](https://developers.google.com/apps-script/reference/html/html-output#setfaviconurliconurl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:42:33.010

目前，唯一的方法是将您的应用程序嵌入一个空白的 Google 站点，然后执行以下步骤：

1.  导航到站点的附件管理部分（更多操作 | 管理站点 | 附件）
2.  点击上传
3.  单击浏览并选择您的 favicon.ico 文件
4.  您的 favicon 文件必须命名为“favicon.ico”
5.  选择将附件上传到 /（顶级）的选项
6.  点击上传

Google Apps 脚本**问题 #2005**请求能够使用 UiApp.setFavicon(url) 方法设置应用程序图标的功能。有关详细信息，请参阅以下链接：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=2005](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2005)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:06:09.243

你应该能够做到这一点：

```
<head profile="http://www.w3.org/2005/10/profile">
<link rel="icon" 
      type="image/png" 
      href="http://example.com/myicon.png">
[…]
</head> 
```

[来源](http://www.w3.org/2005/10/howto-favicon)

# javascript - Event.observe(window, "load", function(){..} v/s window.onload = function(){..}

> ID：12859122
> 
> 赞同：5
> 
> 时间：2012-10-12T12:30:36.197
> 
> 标签：javascript, prototypejs

即使两者都做同样的事情，我只是想知道使用一个比另一个有什么特定的优势？

```
Event.observe(window, "load", function(){
//do something
});

window.onload = function(){
//do something
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T12:41:26.177

不同之处在于`window.onload`DOM 级别 0 事件模型中定义的，并且将清除所有早期注册的事件。这是来自旧 API 的“本机”调用。

`Event.observe`原型 javascript 框架将确定可用的最佳事件附件。门面图案。在现代浏览器中，`addEventListener`将被调用 -`attachEvent`如果 Internet Explorer 版本低于 9。在旧浏览器中，`onload`将被调用。

很明显，外观将选择可用的最佳选项，例如`Event.observe`原型或`.load`jQuery 的情况。

DOM 级别 2 事件模型中的方法优于 DOM 级别 0 事件模型方法，因为它们充当观察者并且不会删除以前的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:45:51.437

阅读 quirksmode.org 对[events 的介绍](http://quirksmode.org/js/introevents.html)。[传统模型](http://quirksmode.org/js/events_tradmod.html)和[高级模型](http://quirksmode.org/js/events_advanced.html)之间的区别在于需要包装器，因为 M$ 不支持/不支持 W3 标准，需要进行区分。

# php - 为用户设置权限的最佳方法

> ID：12859129
> 
> 赞同：1
> 
> 时间：2012-10-12T12:30:56.427
> 
> 标签：php, mysql, permissions

（使用 PHP + mySQL）

我希望有人能给我一个关于处理这种情况的最佳方法的想法。

我有两张桌子，`users`和`forms`。users 表保存用户名、密码、名称等，然后 forms 表保存各种不同的 html 表单。

我想根据每个用户指定用户可以访问哪些表单。我正在考虑在用户表中创建一个新字段，该字段将是“forms_allowed”，然后存储允许用户访问的每个表单的 form_id，用逗号分隔。3、6、8、15 之类的东西

然后，当我想检查允许用户访问哪些表单以及他们是否可以访问请求的表单（等）时，我会抓取该字段，将其分解并检查 form_id。

这似乎是一种麻烦且无效的方法。有没有人有更好的主意？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:33:25.350

创建另一个可以容纳`user_id`和`form_id`配对的表。这是多对多的关系。

tbl用户：

```
user_id | name |... 
```

表格

```
form_id | content | ... 
```

tbl关系：

```
user_id | form_id 
```

因此，您可以通过单个查询简单地获取信息：

```
SELECT * FROM `tblUsers` AS `t`
JOIN `tblRelation` as `r` ON (t.user_id = r.user_id)
JOIN `tblForms` as `f` ON (f.form_id = r.form_id) 
```

# php - 在 $_POST 中重用 $_GET 变量？

> ID：12859138
> 
> 赞同：1
> 
> 时间：2012-10-12T12:31:17.390
> 
> 标签：php, mysql

我的 index.php 页面通过 $_GET/html 链接将值发送到 edit.php。我可以看到这些值，包括我想使用 echo 语句使用的表 ID。问题是我需要使用提交表单（$_POST）在另一个表单中使用的特定 ID 值。我尝试了不同的方法，包括 SESSION，使 $ID = $_GET.... 我把头发拉出来了。

这是事情的顺序：

```
//Edit link on index.php sends the id='summary_id', which works
<td align="center"><a href="edit.php?id=<?php echo $row['summary_id']?>">Edit</a></td>

//Edit.php grabs the variable and I set it to that variable
if(isset($_GET['id']))
echo "<pre>Value of GET \$_GET:</br>";print_r($_GET);echo"</pre>";  
    {
        $summary_id = $_GET['id'];
        $summary_id = $_POST['summary_id']; 
```

但是，当我尝试在表单中使用 $summary_id 时（这次使用 $_POST），我没有得到任何价值。我不确定我想做的是否“合法”。我尝试将 summary_id 作为隐藏值发送到表单中，但同样没有任何结果。在最初的 $_GET 之后，我失去了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:39:54.063

你做错了。你正在覆盖不可用的变量`$_POST['summary_id']`

如果你真的想使用 post 方法，请使用这个

```
<form action="edit.php" method="POST">
<input type="hidden" value="<?php echo $row['summary_id'];?>" name="summary_id"/>
<input type="submit" value="EDIT"/>
</form> 
```

或者您可以使用`header()`发布值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:33:18.503

您正在覆盖自己的变量。此外，很明显，您实际上并没有打开 PHP 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:36:23.863

您可以改用[$_REQUEST](http://php.net/manual/en/reserved.variables.request.php)，因为它同时包含 $_GET 和 $_POST。

# java - Java：IDE 与 Maven War 覆盖配合得很好

> ID：12859140
> 
> 赞同：1
> 
> 时间：2012-10-12T12:31:21.403
> 
> 标签：java, maven, glassfish, war, overlays

我们有一个完全 mavenized 的 Java EE 6 Web 应用程序，我们使用 Maven“战争覆盖”工具来添加客户特定的文件，目前在 Glassfish 3.1 中运行。

我们传统上使用 Eclipse 进行开发，但我发现 Maven 处理和 War 部署的组合在部署时间方面可能不是最佳的，并且 mavenization 允许我们使用任何具有良好 Maven 支持的 IDE。

因此，Eclipse 是我们特定场景的最佳选择（maven war overlays -> glassfish，并对其进行调试）还是 Netbeans 或 IntelliJ 更好？

请用实际经验支持意见，谢谢。

* * *

编辑：在 Ubuntu 12.04.1 下，Netbeans 7.2 与 Glassfish 3.1.2.2 捆绑的一些初步实验强烈暗示 Netbeans 在这种情况下工作得更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:45:45.837

诚然，Netbeans 确实为 Java EE 开发提供了一些不错的功能，并且可以使用 glassfish 预打包下载，让生活更轻松一些。

但坦率地说，就我而言，它归结为您最熟悉的女巫 IDE。由于您可能从稍微更好的支持中获得的任何优势，都将被您的（团队）对新 IDE 的功能和工具不够熟悉而完全抹去。

我想你真正应该考虑的是[JRebel 之](http://zeroturnaround.com/)类的东西，它直接插入 JVM，允许真正的热部署。并且专为更快的开发而开发，通过减少重新构建和重新发布整个项目的时间，即使是最小的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T09:32:27.257

所有提到的 IDE 在 Maven 支持方面或多或少都有类似的功能，在这种特定情况下几乎没有任何一个可以帮助您。您可以尝试在开发过程中避免使用 maven 覆盖，因为它会增加构建阶段的时间。如前所述，您还可以从 JRebel 中受益，以加快周转速度。这样您就不必运行**mvn clean install**并节省大量宝贵的时间。

# jquery - 使用 MVC 4.0 和 JQueryUI DatePicker，我需要“刷新”页面

> ID：12859141
> 
> 赞同：0
> 
> 时间：2012-10-12T12:31:22.557
> 
> 标签：jquery, jquery-ui, datepicker, asp.net-mvc-4, onselect

我坚持这一点。这是我的第一个 MVC 4.0 项目。我的控制器上的我的索引页面根据日期显示一些信息，默认为今天。

我在页面顶部使用 JQueryUI 日期选择器让用户选择不同的日期。当用户选择新日期时，我基本上需要“刷新”页面。

我会发布我的代码，但我已经尝试了至少十几种不同的方法，但都没有奏效。顺便说一句，设置默认日期似乎也不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:43:20.207

在日期选择器中尝试**onSelect**回调

```
$('#datepicker').datepicker({
    onSelect: callback .... 
```

并在此回调中使用页面刷新。

请参考文档：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:06:02.237

您可以在 datepicker 的 onSelect 回调中重新加载页面，要重新加载页面，请查看这篇文章中的[http://jqfaq.com/how-to-reload-a-page-with-a-different-argument/](http://jqfaq.com/how-to-reload-a-page-with-a-different-argument/)您可以看看他们是如何用一些参数加载页面的。

# php - Codeigniter 无法将值传递给控制器

> ID：12859152
> 
> 赞同：1
> 
> 时间：2012-10-12T12:31:51.263
> 
> 标签：php, codeigniter, controller

我在这里有意见

```
 <?php echo form_open('c_kategorimaterial/tambah'); ?>
            <table>

                <tr>
                    <td>Kode Kategori Material / Jasa</td> //primary key of table
                    <td><?php $inkode=array('name' => 'kkmj', 'disabled' => 'disabled', 'value' => $nextval, 'class' => 'GUI'); echo form_input($inkode) ?></td>
                    <td class="error"> <?php echo form_error('kkmj'); ?></td>
                     //i make the form_input disabled, because the value is
                     //auto generated from the last ID of table in database
                </tr>
                <tr>
                    <td>Nama Material / Jasa</td>
                    <td><?php $innama=array('name' => 'nmj',  'class' => 'GUI'); echo form_input($innama) ?></td>
                    <td class="error"> <?php echo form_error('nmj'); ?></td>
                </tr>
                <tr>
                    <td></td>
                    <td><?php $intambah=array('name' =>'login','class' =>'button','value' => 'Tambah'); echo form_submit($intambah); echo nbs(); $inreset=array('name' =>'reset','class' =>'button','value' => 'Hapus'); echo form_reset($inreset); ?></td>
                </tr>
             <?php echo form_close(); ?> 
```

并将值传递给控制器

```
 function tambah()
{
   $id = $this->input->post('kkmj');
   $nama = $this->input->post('nmj');

    $this->form_validation->set_rules('nmj','Nama','trim|required|min_length[2]|max_length[20]|xss_clean');
    if($this->form_validation->run() == false)
    {
        $lastval = $this->m_admin->getlastval('KKMJ','ms_kategori_material','kode_kategori_material_jasa');
        $data['nextval'] = $this->m_admin->gencode('KKMJ',3,$lastval); 
        $data['title'] = 'QB Tambah Kategori Material';

        $this->load->view('head',$data);
        $this->load->view('content/add_kategori_material',$data);
    }
    else
    {
        echo 'id adalah '.$id.' namanya adalah '.$nama; //$id is not printed

    }

} 
```

然后我用“水”填充第二个字段并单击按钮。我的页面显示带有文本的空白屏幕`id adalah namanya adalah water`

身份证怎么不打印？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:34:16.483

提交表单时不会发布禁用的元素。如果您需要具有不可更改值的字段，请尝试将其设置为[只读](http://www.w3schools.com/tags/att_input_readonly.asp)而不是禁用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:34:17.883

因为该字段被禁用。

使用只读属性。

# javascript - 无需点击标志的自动语言选择

> ID：12859154
> 
> 赞同：1
> 
> 时间：2012-10-12T12:31:58.667
> 
> 标签：javascript

> **可能重复：**
> [用于检测浏览器语言偏好的 JavaScript](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)

您好，我有一个英文网站，我希望当有人进入我的网站时自动加载俄语而不显示语言表或单击标志来做到这一点，我认为 javascript 可以做到这一点。

谢谢你

# html - 使用 XPath 和正则表达式提取 HTML 注释中的文本

> ID：12859155
> 
> 赞同：4
> 
> 时间：2012-10-12T12:31:58.413
> 
> 标签：html, regex, xpath, comments

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:41:02.663

I assume that the quotes in the comment are the same, regular qoute character `"` -- not the typographically different starting and ending quote that appears when this question is displayed.

In case this assumption is wrong, simply replace the standard quote in the below expressions with the respective quote.

* * *

**Use** (if the comment in question is the first one in the document):

```
substring-before(substring-after(//comment(), '"'), '"') 
```

**This produces the string (without the quotes):**

" X "

**And for the second string in quotes use:**

```
substring-before(
   substring-after(
        substring-after(
               substring-after(//comment(), '"'), 
               '"'), 
        '"'), 
   '"') 
```

**XSLT - based verification** (Because an XSLT stylesheet must be a well-formed XML document we replace the quotes in the expressions with the entity `&quot;` -- just to avoid errors due to nested quotes):

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     "<xsl:copy-of select="substring-before(substring-after(//comment(), '&quot;'), '&quot;')"/>"
=============
   "<xsl:copy-of select=
   "substring-before(substring-after(substring-after(substring-after(//comment(), '&quot;'), '&quot;'), '&quot;'), '&quot;')"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**When this transformation is applied against this XML document:**

```
<html>
  <body>
    Hello.
<!-- Title: " X " Tags: " Y " -->
  </body>
</html> 
```

**the two XPath expressions are evaluated and the results of these two evaluations are copied to the output** (surrounded by quotes to show the exact strings copied):

```
 " X "
=============
   " Y " 
```

# javascript - javascript ajax 语法错误

> ID：12859157
> 
> 赞同：0
> 
> 时间：2012-10-12T12:32:10.410
> 
> 标签：javascript, ajax, syntax-error

我真的是 javascript 和 ajax 的新手，我在下面的代码中遇到了语法错误问题。我试图自己找到它，但几天后我需要寻求一些好的灵魂来帮助我，因为这对我来说几乎是不可能的。

```
<script type="text/javascript">
new AjaxUpload('#button-option-<?php echo $option['product_option_id']; ?>', {
    action: 'index.php?route=product/product/upload',
    name: 'file',
    autoSubmit: true,
    responseType: 'json',
    onSubmit: function(file, extension) {
        $('#button-option-<?php echo $option['product_option_id']; ?>').after('<img src="catalog/view/theme/moshi/image/loading.gif" class="loading" style="padding-left: 5px;" />');
        $('#button-option-<?php echo $option['product_option_id']; ?>').attr('disabled', true);
    },
    onComplete: function(file, json) {
        $('#button-option-<?php echo $option['product_option_id']; ?>').attr('disabled', false);

    $('.error').remove();

    if (json['success']) {
        alert(json['success']);

        $('input[name=\'option[<?php echo $option['product_option_id']; ?>]\']').attr('value', json['file']);
    }

    if (json['error']) {
        $('#option-<?php echo $option['product_option_id']; 

?>').after('<span class="error">' + json['error'] + '</span>');
        }

        $('.loading').remove(); 
    }
});
</script> 
```

感谢任何帮助，因为我不知道为什么 Dreamweaver 显示存在语法错误

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:45:46.027

Dreamweaver 是一个非常糟糕的编辑器，因此错误*可能*不是真正的错误 - 这在浏览器中是否有效？

除此之外，线条像

```
$('#button-option-<?php echo $option['product_option_id']; ?>') 
```

*由于嵌套的引号可能*会导致它出现问题......它认为你已经关闭了一个字符串，而实际上你并没有。

您可以通过以下两种方式之一解决此问题。

您可以用双引号替换外引号

```
$("#button-option-<?php echo $option['product_option_id']; ?>") 
```

或者，您可以将 PHP 取出并放在一个地方：

```
<script type="text/javascript">
var productOptionId = <?php echo $option['product_option_id']; ?>;
new AjaxUpload('#button-option-'+productOptionId , {
    action: 'index.php?route=product/product/upload',
    name: 'file',
    autoSubmit: true,
    responseType: 'json',
    onSubmit: function(file, extension) {
        $('#button-option-'+productOptionId).after('<img src="catalog/view/theme/moshi/image/loading.gif" class="loading" style="padding-left: 5px;" />');
        $('#button-option-'+productOptionId).attr('disabled', true);
    },
    onComplete: function(file, json) {
        $('#button-option-'+productOptionId).attr('disabled', false);

    $('.error').remove();

    if (json['success']) {
        alert(json['success']);

        $('input[name=\'option['+productOptionId+'\']').attr('value', json['file']);
    }

    if (json['error']) {
        $('#option-'+productOptionId).after('<span class="error">' + json['error'] + '</span>');
        }

        $('.loading').remove(); 
    }
});
</script> 
```

最后，可能只是 Dreamweaver 不喜欢您将 JavaScript 和 PHP 混合使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T12:38:40.793

我在第一行看到语法错误，

```
new AjaxUpload('#button-option-<?php echo $option['product_option_id']; ?>', { 
```

在这个你使用单引号两次，我认为这应该是这样的，

```
new AjaxUpload('#button-option-<?php echo $option[' + product_option_id + ']; ?>', { 
```

我只是在第一行观察到，我没有检查整个代码。

为什么不使用一些高级编辑器或在线编辑器，例如[http://jsfiddle.net/](http://jsfiddle.net/)

# asynchronous - 有时主 BPEL 流程不会收到来自异步流程的回调消息

> ID：12859162
> 
> 赞同：2
> 
> 时间：2012-10-12T12:32:19.357
> 
> 标签：asynchronous, callback, wso2, bpel, apache-ode

有时主 BPEL 流程不会收到来自异步流程的回调消息。异步进程调用回调并成功完成，但主进程保持活动状态等待接收传入的活动。

**主进程在手动**请求回调端点后继续执行（请求包含与异步进程的输出变量相同的内容）。通常相同的回调工作成功。

# android - 开发者如何在 Play 商店中更新他们的应用程序？[安卓]

> ID：12859169
> 
> 赞同：0
> 
> 时间：2012-10-12T12:32:28.757
> 
> 标签：android, publishing, google-play

我正在考虑将我的应用程序发布到 Play 商店。而且由于我还没有开发者的帐户，我想在此之前找到一些信息。
例如，开发人员如何更新他们的应用程序？它是 Play 商店的核心功能吗？开发人员应该只上传带有新版本信息的新版本程序，还是开发人员应该手动维护可更新的应用程序（可能通过编写一些额外的代码）？
这是非常简单的问题，但我真的无法在谷歌上搜索它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:36:45.617

确实非常简单的问题。注册到游戏商店。完成您的应用程序，使用签名密钥导出它，它会生成一个文件。去Play商店，创建新应用程序，输入名称，解密等并上传该文件。对您的应用程序进行更改/改进/错误修复，使用相同的签名密钥将其导出，它会生成另一个文件。去Play商店，进入现有应用程序，上传新文件，将其标记为活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:37:09.030

这简单。您只需上传一个新版本！唯一需要注意的是它必须是相同的应用程序名称，并且您更新清单中的版本号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:36:38.033

您只需每次制作apk文件并上传到那里，当您上传新的apk时，Play商店将用新的apk替换旧的apk，然后用户可以更新他们的应用程序。

# javascript - 如何强制 Android 互联网浏览器立即显示样式更改

> ID：12859170
> 
> 赞同：2
> 
> 时间：2012-10-12T12:32:29.437
> 
> 标签：javascript, android, jquery, html, browser

我制作了一个简单的抽认卡 HTML 应用程序，但在我的三星 Galaxy Tab2 7.0 平板电脑上的 Android 互联网浏览器（默认安装）下的行为出现了奇怪的问题。当元素的样式发生变化时，例如

```
$(".question").css('color', '#FFFFFF')
$(".answer").css('color', '#FFFFFF')
$(".tag").css('background-color', '#FFFFFF') 
```

浏览器不会立即对显示进行任何更改。稍后在代码中，我将替换容器的文本并计算大小以使文本适合元素。我希望这个过程是不可见的（这就是我想要做这个白底白字的原因）。我无法隐藏元素，因为这样计算将不起作用。

我已经在 Windows 7 下使用 Chrome 和 IE9 进行了测试，它在那里运行良好。所以安卓浏览器有问题。当我将测试代码`alert('debug');`放在上面的行后面时，Android 浏览器显示消息，元素颜色没有变化，但 Windows 7 下的浏览器按预期显示带有白色元素的消息。

如何强制 Android 浏览器立即反映这种风格变化？是否有一些可用的脚本功能，或者一些`<meta>`可以解决这个问题的标签？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:22:15.257

当您说要“立即显示样式更改”时，我猜您的意思是您的脚本将继续执行并且您希望屏幕更新。

您需要使用延续。您需要让步并继续执行，而不是让您的脚本继续执行。您可以通过将代码分解为多个函数来完成此操作，并且每个部分通过为下一部分设置超时来完成。这是一个简单的例子。当这通过循环完成时，所有的 x 都会立即出现。使用延续时，一次出现一个 x。

```
<html>
<script>
function using_a_loop() {
   var e = document.getElementById('spot');
   for (var i = 0; i < 1000; ++i) {
      e.innerText += ' x';
   }
}

function using_continuations(i) {
   var e = document.getElementById('spot');
   i = i || 0;  // start at 0 when i not provided
   e.innerText += ' x';
   ++i;
   if (i < 1000) {
       setTimeout(function() { using_continuations(i); }, 0);
   }
}
</script>
<div id="spot">X marks the spot:</div>
<button onclick="using_a_loop()">use a loop</button>
<button onclick="using_continuations()">use continuations</button>
</html> 
```

# asp.net-mvc-3 - 为什么单元测试使用 mstest 命令行失败，但在 VS2010 Professional 中却没有？

> ID：12859172
> 
> 赞同：3
> 
> 时间：2012-10-12T12:32:47.290
> 
> 标签：asp.net-mvc-3, unit-testing

我对 asp.net mvc3 应用程序的 UnitTests 有一点问题。

如果我在 Visual Studio 2010 **Professional**中运行一些单元测试，它们已经成功通过。

如果我使用 Visual Studio 2010 Professional 命令行

```
mstest /testcontainer:MyDLL.dll /detail:errormessage /resultsfile:"D:\A Folder\res.trx" 
```

然后出现错误：

```
[errormessage] = Test method MyDLL.AController.IndexTest threw exception:
System.NullReferenceException: Object reference not set to an instance of an object. 
```

和**我的控制器**：

```
public ActionResult Index(){
   RedirectToAction("AnotherView");
} 
```

并且在**测试中**

```
AController myController = new AController();
var result = (RedirectToRouteResult)myController.Index();

Assert.AreEqual("AnotherView", result.RouteValues["action"]); 
```

如何解决这个问题以在两种情况下（VS2010 和 mstest.exe）都能正常工作？

谢谢

PS：我[在 VS2010 中使用 MSTest 阅读了测试运行错误，](https://stackoverflow.com/questions/2761587/test-run-errors-with-mstest-in-vs2010)但如果我有 VS2010 Ultimate/Premium，这可以解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:34:58.833

我发现了问题。问题是`AnotherView`行动。

动作`AnotherView`包含

```
private AModel _aModel;

public ActionResult AnotherView(){
  // call here the function which connect to a model and this connect to a DB

  _aModel.GetList();
  return View("AnotherView", _aModel);
} 
```

* * *

需要做什么：

**1.制作一个带有参数的控制器构造函数**

```
public AController(AModel model){
  _aModel = model;
} 
```

**2.在测试或单元测试类中，创建一个模拟类**

```
public class MockClass: AModel
{

  public bool GetList(){  //overload this method
     return true;
  }

  // put another function(s) which use(s) another connection to DB
} 
```

**3.在目前的测试方法IndexTest**

```
[TestMethod]
public void IndexTest(){
   AController myController = new AController(new MockClass());
   var result = (RedirectToRouteResult)myController.Index();

   Assert.AreEqual("AnotherView", result.RouteValues["action"]);
} 
```

现在单元测试将起作用。不适用于集成测试。在那里，您必须为与 DB 的连接提供配置，并且不要应用模拟，只需使用我的问题中的代码即可。

希望在研究 5-6 小时后有所帮助:)

# c# - 如何更改 Resources.resw？

> ID：12859174
> 
> 赞同：1
> 
> 时间：2012-10-12T12:32:51.370
> 
> 标签：c#, wpf, xaml, windows-8, resourcedictionary

我正在用 c# 和 Xaml 编写一个 Windows 8 应用程序。

目前我有两个资源文件。

> - 当地的
> 
> ----de-DE
> 
> ------资源.resw
> 
> ----zh-CN
> 
> ------资源.resw

我正在加载这样的文本部分：

```
private ResourceLoader _resources = new ResourceLoader();

_resources.GetString("Menu_Contacts") 
```

现在这是我的问题，如何在运行时更改资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:54:36.317

最简单的方法是设置`PrimaryLanguageOverride`属性：

```
ApplicationLanguages.PrimaryLanguageOverride = "de-DE"; 
```

请注意，这将更改应用程序的语言，但您当前已加载的屏幕不会刷新。要刷新当前屏幕上的文本，您可以实现以下事件处理程序：

```
core.ResourceManager.Current.DefaultContext.QualifierValues.MapChanged 
        += async (s, m) =>
        {
            await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
            {
                settingsLanguageLabel.Text = core.ResourceManager.Current.MainResourceMap.GetValue("Resources/SettingsLanguageLabel/Text").ValueAsString;
                settingsRestartLabel.Text = core.ResourceManager.Current.MainResourceMap.GetValue("Resources/SettingsRestartLabel/Text").ValueAsString;
            });
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:52:05.633

您可以直接访问资源键：

```
Properties.Resources.myResourceKey = "new value"; 
```

或者您可以重写密钥：

```
resourceWriter = new ResXResourceWriter(Server.MapPath("/App_GlobalResources/Resource.resx"));
 foreach (var cnes_ in _ResList)
 {
    resourceWriter.AddResource(cnes_.Key, cnes_.Value);
 }
 resourceWriter.Close(); 
```

# entity-framework - 在 Windows Azure 上使用带有实体框架的 SQL Server CE 4.0

> ID：12859176
> 
> 赞同：0
> 
> 时间：2012-10-12T12:33:03.693
> 
> 标签：entity-framework, azure, asp.net-mvc-4, sql-server-ce-4

我在 Windows Azure 网站上使用带有 WebApi 的 SQL Server CE 4.0。我已经成功地部署了 SQL Server CE。我面临的奇怪问题是我的网站能够让我使用同一个数据库登录，但我无法使用任何控制器来获取数据。

我对两者都使用相同的连接字符串。唯一的区别是登录时我使用的是 WebSecurity，因为我在网站上启用了 OAuth。

有人可以说明如何调试和解决此问题吗？我收到的电话错误是

> *初始化字符串的格式不符合从索引 0 开始的规范。*

但是，相同的字符串适用于身份验证、更改密码、添加 OAuth 连接等。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:22:36.283

我使用 FTP 连接到该站点。我没有将站点名称作为域名提供，它之前拒绝我访问。在连接时，我得到了 Web.config 文件，我发现了一些有趣的东西。在发布站点时，修改了 web.config 以添加另一个名称为*context*`_DatabasePublish`的连接字符串。

该字符串具有以下详细信息`connectionString="ContextName_DatabasePublish.ConnetionString" providerName="System.Data.SqlClient"`

此外，还有一个名为的新部分`context`添加到`entityframework`配置文件的部分，其中包含要使用的上下文的所有详细信息，但再次指向相同的连接字符串。它使用的提供程序是 sql 而不是 sqlce。我相信这就是它失败的原因。

我上传了我的正常配置文件，网站开始工作。我需要更多地探索为什么以及如何添加新的连接字符串。我将在评论中发布详细信息。

# struts - 我们如何调用仅实现 MVC 模式中的视图和控制器部分的应用程序？

> ID：12859178
> 
> 赞同：1
> 
> 时间：2012-10-12T12:33:11.043
> 
> 标签：struts, ejb-3.0, struts-1

我目前正在为我的团队制定指导方针和标准。我们构建两种类型的应用程序：

*   业务 Web 应用程序使用 Java + MVC2（EJB3、Struts 和 JSP）进行事务、可伸缩性和持久性。
*   使用 Java + Struts 和 JSP 的轻型 Web 应用程序，用于调查、小型表单等小型应用程序。基本上，它就像没有模型部分的 MVC2。

我正在为 Light Web Applications 寻找正确的模式或实践名称。我猜“视图控制器”可以解决问题，但我正在尝试找到一个能够正确说明“模式”的图表。

任何想法？

# iphone - ios : info.plist 中用于打开 doc 和 pdf 等文件类型的更改

> ID：12859180
> 
> 赞同：0
> 
> 时间：2012-10-12T12:33:14.390
> 
> 标签：iphone, ios, document

我是 ios 的新手，我的应用程序要求在其他应用程序（如 Dropbox）中请求时支持显示和打开 doc、pdf 等文件类型。我阅读了 Apple 的文档，它说在 info.plist 中添加一行“文档类型”。但我不确定如果它用于 doc ，pdf，我必须在那里输入什么值。

我也不确定这是否是我必须遵循的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:02:40.570

将以下 dict 添加到 info plist 以打开 doc 和 pdf 等文件类型

------------- 对于 PDF ----------

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleTypeIconFiles</key>
    <array>
        <string>PDFIcon64.png</string>
        <string>PDFIcon320.png</string>
    </array>
    <key>CFBundleTypeName</key>
    <string>PDF</string>
    <key>LSHandlerRank</key>
    <string>Default</string>
    <key>LSItemContentTypes</key>
    <array>
        <string>com.adobe.pdf</string>
    </array>
</dict>
</plist> 
```

-------- 对于文档 ------------

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleTypeIconFiles</key>
    <array>
        <string>PDFIcon64.png</string>
        <string>PDFIcon320.png</string>
    </array>
    <key>CFBundleTypeName</key>
    <string>DOC</string>
    <key>LSHandlerRank</key>
    <string>Default</string>
    <key>LSItemContentTypes</key>
    <array>
        <string>com.microsoft.word.doc</string>
        <string>org.openxmlformats.wordprocessingml.document</string>
        <string>org.openxmlformats.wordprocessingml.document.macroenabled</string>
    </array>
</dict>
</plist> 
```

# jquery - Html5画布不使用jquery在Div中绘制

> ID：12859181
> 
> 赞同：1
> 
> 时间：2012-10-12T12:33:16.050
> 
> 标签：jquery, html, canvas

好的。所以基本上我有一个 div，我想用一个有一些 html5 画布的文件加载它。当我在其自身上加载文件时，它可以工作。问题是当我正常加载我的网站并按下链接以在我希望它不绘制的 div 中加载相同的文件时。

我使用 $('#container').load('mycanvas.html'); 使用 .click 事件加载文件

下面的代码是 mycanvas.html 文件中的内容。

```
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
  #myCanvas {
    border: 1px solid #9C9898;
  }
</style>
<script>
  window.onload = function() {
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");

    context.beginPath();
    context.moveTo(100, 150);
    context.lineTo(450, 50);
    context.stroke();
  };

</script>

<canvas id="myCanvas" width="500" height="200"></canvas> 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:52:26.007

试试这个 mycanvas.html。

```
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
  #myCanvas {
    border: 1px solid #9C9898;
  }
</style>

<canvas id="myCanvas" width="500" height="200"></canvas>

<script>
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");

    context.beginPath();
    context.moveTo(100, 150);
    context.lineTo(450, 50);
    context.stroke();

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:35:58.060

放

```
<canvas id="myCanvas" width="500" height="200"></canvas> 
```

在您的 javascript 代码之上。

# php - PHP 查询结果和 PHP 循环的名称。

> ID：12859185
> 
> 赞同：0
> 
> 时间：2012-10-12T12:33:22.563
> 
> 标签：php, sql-server

这可能是一个简单的问题，但我找不到我能理解的明确答案。我经常使用 PHP 循环，我对 PHP 还很陌生，所以它们通常很简单，如下所示：

```
 <?php 

    $result = mssql_query("SELECT Price FROM Window_Extras WHERE ExtraID = '4' "); 

    while ($row = mssql_fetch_array($result)) { 
    ?>

<a title="<?php echo $row['Colour']; ?>"></a>

<?php }?> 
```

是一个非常简单的例子，没有多大意义，但我希望它能展示我如何使用它们。我想问的问题是，是否必须将 $row 和 $result 命名为才能正常工作，例如可以将它们命名为 $priceresult 和 $pricerow 吗？

这是因为有时我想对单个循环使用多个查询，例如：

```
<?php 

    $result = mssql_query("SELECT Price FROM Extras WHERE ExtraID = '4' ");
$colourresult = mssql_query("SELECT ColourID FROM Colours WHERE Type = '8' ");

    while ($row = mssql_fetch_array($result, $colourresult)) { 
    ?> 
```

然而，当我试图回应时，这并没有奏效：

```
<?php echo $row['ColourID']; ?> 
```

谁能告诉我应该如何处理这个问题，以及我是否在正确的轨道上。对不起，如果我没有很好地解释它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:25:24.910

要回答您的第一个问题：

是的，您可以为结果和行变量使用您喜欢的任何变量名称。PHP 不在乎您如何称呼它们，事实上，在任何给定时间使用它们中的几个是完全可能的，在这种情况下，它们显然需要具有不同的名称。

然后，您通过询问以下代码为什么不起作用来跟进该问题：

```
$result = mssql_query("SELECT Price FROM Extras WHERE ExtraID = '4' ");
$colourresult = mssql_query("SELECT ColourID FROM Colours WHERE Type = '8' ");

while ($row = mssql_fetch_array($result, $colourresult)) { 
     ....
} 
```

原因是该`_fetch_array()`函数一次只能处理一组结果。您需要为它们中的每一个获取一个单独的行数组。

目前尚不清楚您要对这两个查询执行什么操作，以及为什么要将它们按照您所展示的方式一起放入同一个循环中。

我将假设这两个查询以某种方式链接在一起，这样您就可以像这样一起使用它们？也许您正在加载的 Extra 项目具有已知的颜色；即，您知道编号为 4 的额外项目是用编号为 8 的颜色着色的吗？

通常不会用这些知识编写程序。这将是数据的一部分。因此，在 Extras 表中，您将有一个 ColourID 字段，其中包含值 8。程序将加载 Extras 记录，查看 ColourID 已设置，然后根据它看到的内容加载匹配的 Colors 记录。

因此，您的代码可能如下所示：

```
$result = mssql_query("SELECT Price FROM Extras WHERE ExtraID = '4' ");

while ($row = mssql_fetch_array($result)) { 
    $colourresult = mssql_query("SELECT ColourID FROM Colours WHERE Type = '".$row['colourID']."' ");
    while ($row2 = mssql_fetch_array($result)) { 
        ....
    }
} 
```

在内部循环中，您可以分别使用或`while`访问任一查询中的字段（同样，您可以根据需要命名这些字段）。`$row``$row2`

然而，这并不是故事的结局，因为 SQL 实际上有能力将这两个查询合并为一个，而不需要所有的 PHP 代码，使用一种叫做 SQL 的东西`JOIN`。

现在我们可以编写一个更复杂的查询，但回到更简单的 PHP 代码：

```
$result = mssql_query("SELECT Extras.Price, Colours.ColourName FROM Extras WHERE ExtraID = '4' INNER JOIN Colours ON Colours.ColourID = Extras.ColourID");

while ($row = mssql_fetch_array($result)) { 
     ....
} 
```

如果你是 PH​​P 和 SQL 的初学者，这些概念对你来说可能都是新的，所以我建议尝试它们，试验它们，最重要的是，在继续深入之前阅读一些关于它们的（高质量的）教程。

希望有帮助。:)

（PS：正如我上面所说，确保你正在阅读好的教程；提防糟糕的 PHP 示例和教学网站——那里有很多，教授糟糕的代码和过时的技术；确保你正在阅读一些有价值的东西. 一个好的起点可能是[http://phpmaster.com/](http://phpmaster.com/) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:41:54.193

这是因为 mssql_fetch_array 只能获取一个结果集。所以删除 $result 并留下 $colourresult 应该适合你。

请参阅： http: [//php.net/manual/en/function.mssql-fetch-array.php](http://php.net/manual/en/function.mssql-fetch-array.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:50:52.047

您的变量 ($...) 可以随心所欲地调用，通常最好以您可以理解的方式命名它们，因此 PHP 手册中的大多数示例都包含变量，如 $row、$result、$query、等等

就您的数据库查询而言，您只能将一个查询传递给 mssql_query 方法。如果您需要显示来自不同表的数据，您应该尽可能使用 SQL 尝试连接这些表，而不是遍历多个结果集。

# vb6 - 将 Long 变量设置为 False 会产生什么副作用？

> ID：12859186
> 
> 赞同：2
> 
> 时间：2012-10-12T12:33:22.293
> 
> 标签：vb6, boolean, long-integer

我正在处理一段遗留代码，我遇到了一个变量赋值，这给我带来了一些问题。该变量`PortOpen`的类型设置为 声明`Long`，后来在代码中设置为等于`False`。由于 is 的整数值`False`，`0`我认为这只是意味着在它被修改之前`PortOpen`将`0`是，但我怀疑这可能会引入一些微妙的错误。在这种情况下， A`Long`的大小是 a 的两倍，那么以后在逻辑比较中`Boolean`使用时是否有可能出错？`PortOpen`或者，一般来说，使用这种类型的变量赋值是否有任何怪癖或其他影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:56:13.637

正如您所说`PortOpen`，将`0`在自动转换`True`为 a之后`Long`，此分配没有其他副作用。

除了不好的做法和让其他人感到困惑之外，唯一的其他潜在问题是任何假设`PortOpen = 1 = True`情况并非`Clng(True)`如此`-1`。

`0`我个人会用`0` `CLOSED`符号常量/枚举替换assignemtnet 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:40:53.600

这当然是一件坏事，因为它会使阅读代码的人感到困惑，但是只要您将 0/False 用于 false 值，将 -1/True 用于 true 值，程序就应该可以正常工作。

您需要注意将 1 用于 True，因为这会给您带来模棱两可的结果。1（或者实际上是 0 以外的任何值）将在逻辑比较中为您提供 True，因此这将显示“True”：

```
Dim myvar As Long

myvar = 2
If myvar Then
    MsgBox "True"
Else
    MsgBox "False"
End If 
```

但是，当您对该表达式应用“不”时，就会出现问题。通常你会认为“Not True”是“False”，但下面的代码会显示“True”：

```
Dim myvar As Long

myvar = 2
If Not myvar Then
    MsgBox "True"
Else
    MsgBox "False"
End If 
```

因此，除了不利于代码的可读性之外，对布尔值使用 Integer 或 Long 还会导致代码错误。

# html - IE8 提供焦点并单击更新文本字段的按钮

> ID：12859190
> 
> 赞同：1
> 
> 时间：2012-10-12T12:33:48.040
> 
> 标签：html, internet-explorer-8

我对 IE8 有一个很奇怪的问题；我已尽可能将其简化为以下摘录：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript">         
            function dismissOperation() {
                alert("Would dismiss");
            }                
        </script>
    </head>
    <body >
        <input type="text" />
        <input type="text" onfocus="alert('text box got focus')" />
        <button onclick="dismissOperation()" onfocus="alert('Dismiss button got focus')">Dismiss</button>
    </body>
</html> 
```

问题是当一个值输入到第一个文本框中然后返回/输入时，按钮接收焦点并传递点击事件（在按钮上）。

作为测试，我添加了第二个文本输入框（如上）。添加第二个框后，在第一个框中输入值时，焦点仍然直接指向按钮。

是什么导致焦点转到按钮并传递点击？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:55:46.733

默认情况下，按钮元素被视为提交按钮，这可能就是原因。为您的按钮元素提供属性 type="button"。

# php - 使用 MySQL 将多行插入数据库

> ID：12859197
> 
> 赞同：1
> 
> 时间：2012-10-12T12:34:16.697
> 
> 标签：php, mysql, pdo

我有以下代码将 1 行插入数据库：

```
public function fixed($fieldDay, $fieldNight) {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    $this->sql = "INSERT INTO tblfixedfare (SELECT NULL, MAX(FixedFareID)+1, '1', '$fieldDay' FROM tblfixedfare)";

try {
        // Query
        $stmt = $dbh->prepare($this->sql);

        $stmt->execute();

        $count = $stmt->rowCount();

        echo $count.' row(s) inserted by SQL: '.$stmt->queryString;

        $stmt->closeCursor();

    }

    catch (PDOException $pe) {
        echo 'Error: ' .$pe->getMessage(). 'SQL: '.$stmt->queryString;
        die();
    }

    // Close connection
    $dbh = null;
}

} 
```

在执行此操作的同时，我想在同一个表中插入另一行：

`$this->sql = "INSERT INTO tblfixedfare (SELECT NULL, MAX(FixedFareID)+1, '2', '$fieldNight' FROM tblfixedfare)";`

我该怎么做呢？

**编辑**

此外，对于两个插入的值，`MAX(FixedFareID)+1`需要是相同的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:38:23.707

将 SQL 查询定义更改为：

```
$this->sql = "
    INSERT INTO tblfixedfare 
        SELECT NULL, MAX(FixedFareID) + 1, '1', :fieldDay
        FROM tblfixedfare
        UNION
        SELECT NULL, MAX(FixedFareID) + 1, '2', :fieldNight
        FROM tblfixedfare
"; 
```

...并将`execute()`调用更改为：

```
$stmt->execute(array(
    'fieldDay' => $fieldDay,
    'fieldNight' => $fieldNight
)); 
```

# php - 从元素返回值，同时显示另一个

> ID：12859200
> 
> 赞同：0
> 
> 时间：2012-10-12T12:34:24.287
> 
> 标签：php, html, sql

嗨，假设我在一个元素中显示一个数值**（不确定要使用什么元素）**，我想要实现的是一旦点击了数值**（考虑 onclick="this.form.submit();" 或提交按钮）**它将提交与**数值****不同的指定**值让我们说。**苹果**然后我的 sql 查询将检索苹果并使用它。**注意：**我有**多个**数值和**每个数值的多个指定值**作为示例，它看起来像这样：

 ******```
 (numeric value) = (designated value)
         15123       =  apple
         24151       =  orange
         39134       =  peach 
```

到目前为止，这就是我所拥有的。

```
 <input type='submit' name='searchthem' placeholder='<?php echo $numeric_value; ?>'
  value='apple'> 
```

** 注意我有多个具有不同指定值的数值

这是同一页面中的 SQL：

```
 SELECT * from tbl_fruits where fruit_name='".$_POST['searchthem']."' ; 
```

将不胜感激一些帮助和想法，如果有混淆，请发表评论，以便我进一步澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:46:25.270

如果我正确理解了您的问题，您应该为定义术语添加一个数组并这样做：

```
<input type="hidden" name="searchterm" value="<?php echo $numeric_value; ?>" />
<input type='submit' name='send' value="<?php echo $names[$numeric_value]; ?>" /> 
```

然后在 PHP 中切换值：

```
switch($_POST['searchterm']){
  case(15123) $term = 'apple';break;
  case(24151) $term = 'ornage';break;
  case(39134) $term = 'peach';break;
} 
```

这也将保护您的 SQL 查询。[注意：切勿在 SQL 查询中使用来自浏览器的未过滤输入（即您的示例中的 $_POST）！]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:38:13.137

使用 select 元素并提交表单，以便它可以处理值。如果您想使用 AJAX，请使用一些 javascript 并在浏览器中输出结果。******

# logging - 在微控制器上记录错误

> ID：12859201
> 
> 赞同：2
> 
> 时间：2012-10-12T12:34:25.120
> 
> 标签：logging, resources, embedded, queue, error-code

我有一个一般性的问题。我在微控制器上记录错误。但是，例如，微控制器比 Windows 计算机具有更多有限的资源。就我而言，我将 64 个错误代码保存在由 FreeRTOS 管理的队列中。我选择了 64，因为资源有限。

我的问题是：**这个队列满了怎么办？**

通过 USB 连接到微控制器的客户端负责读取这些错误代码，从而将它们从队列中删除。但是当客户端没有这样做时，队列会在 64 个错误代码后被填满。

**我应该从队列中删除最旧的错误并将其替换为最新的吗？还是应该保存未读的错误代码并丢弃新的错误代码，只要队列已满？**

请给我你的意见，为什么？

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:54:00.950

不要担心 64 与任何其他尺寸。无论大小如何，您最终都需要做出此决定，因为主机可能会决定从不读取队列。

正确的方法取决于您的系统如何工作以及您记录的错误类型。

**保持第一个记录的好处：**如果您有一个系统，如果出现问题，它会级联成许多其他故障，那么记录第一个错误将有助于确定导致错误链发生的原因。

**保持第一次记录的弱点：**取决于主机何时决定读取错误，代码可能是 1 分钟或 1 周前，没有人知道。正如 Ian 的回答所指出的，可以向主机提供错误计数，因为它知道它丢失了它们。

**保持上次记录的好处：** 如果您的错误之间有很多独立性，那么最旧的错误可能并不重要，并且只有最新的错误可以很好地了解设备的当前状态。

**保持最后记录的缺点：** 保持第一个的好处的倒数。您可能会丢失所有错误的根本原因。

因此，您必须查看您的设备可能产生的错误类型，并确定哪些技术最有可能对您的用户有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:12:53.837

我也会丢弃最旧的，但是我会考虑其他存储有用诊断的方法。在我们的系统中，我们存储了 16 个带时间戳的错误代码，这些错误代码会随着新代码的出现而被覆盖。

但是，我们还存储了一些事件计数器（其中之一可能是“总错误”或“丢弃的错误”），因为它们可以在不占用太多空间的情况下告诉您有用的信息——一个字节可以在溢出之前计算 255 个错误/事件。

有些事情最好记录下来（EG 一种特定的故障类型），而有些事情则比较好统计（EG 重新启动、登录失败、丢包）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:07:12.350

我会丢弃队列中最旧的错误。此外，我会在队列中放置一个额外的错误代码，以便客户端读取的第一个错误代码表明一个或多个错误已被丢弃。根据您报告错误的方式，您的系统可能会报告已删除的错误报告数量。

# r - 使用 get() 访问结构深处的数据

> ID：12859210
> 
> 赞同：2
> 
> 时间：2012-10-12T12:34:43.510
> 
> 标签：r, get, apostrophe

我在 R 内存中有一个`p`结构，我正在尝试访问`Rate`矩阵的列。

当我`p$6597858$Sample`在控制台中输入时，我得到...

```
 p$`6597858`$Sample
        Rate             Available                 X                    Y
[1,]    1.01              1520.93                0.00                  0.0
[2,]    1.02               269.13                0.00                  0.0
[3,]    1.03               153.19                0.00                  0.0
[4,]    1.04               408.80                0.00                  0.0 
```

等等 ...

当我尝试在我的代码中

```
get("p$`6597858`$Sample[,1]") 
```

我得到这个返回...

```
object 'p$`6597858`$Sample[ ,1]' not found 
```

这是一个撇号问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:15:41.277

`$`the和操作符都不能在其中`[[`工作`get()`（因为`p[[1]]`它不是 R 对象，它是 object 的一个组件`p`）。

你可以试试

```
p <- list(`6597858`=list(Sample=data.frame(Rate=1:3,Available=2:4)))
z <- eval(parse(text="p$`6597858`$Sample[,1]")) 
```

但这可能是个坏主意。有没有理由

```
z <- p[["6597858"]][["Sample"]][,"Rate"] 
```

不做你想做的事？

您可以通过使用`character`变量进行索引来动态执行此操作，但仍不使用`get`: 例如

```
needed <- 1234
x <- p[[as.character(needed)]][["Sample"]][,"Rate"] 
```

（**编辑**：Hadley Wickham 在评论中建议）或

```
x <- p[[c(as.character(needed),"Sample","Rate")]] 
```

（*如果*第二低级元素是数据框或列表：如果它是矩阵，则此替代方法不起作用，您需要`p[[c(as.character(needed),"Sample")]][,"Rate"]`改为）

在这种情况下，弄清楚语言的习语并使用它（而不是与之抗争）会得到回报......

```
library(fortunes)
fortune(106)

If the answer is parse() you should usually rethink the question.
   -- Thomas Lumley
      R-help (February 2005) 
```

一般来说，

*   直接从列表中提取元素比使用更好（更安全，减少复杂的代码）`get()`
*   对列表元素使用非标准名称（即那些需要用反引号保护的纯数字）是不明智的
*   `[[`比`$`

# wcf - 检测过时的 WCF 服务引用代理

> ID：12859212
> 
> 赞同：3
> 
> 时间：2012-10-12T12:35:10.537
> 
> 标签：wcf, web-services

在开发过程中考虑以下场景 -

1.  我们非常频繁地更改 WCF 服务合同。
2.  有一个使用这些服务的 Web 应用程序。
3.  我们在 Web 应用程序中经常更新、服务引用。

但是有时当我们忘记这样做时，我们必须调试整个 Web 应用程序，最终发现服务契约已经改变。

我们可以在调用服务之前在运行时检测过时的代理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:40:05.410

最佳实践是对您的服务进行版本化，以允许客户端连接到其熟悉的界面。通常，您会在线保留一两个较旧的版本，并将任何重大更改作为升级版本添加到服务中。（例如`/myservice/2012/01`然后`/myservice/2012/06`）。然后，随着新版本的创建，您可以弃用以前的版本。

第二种做法是实现一个`GetVersion()`（或类似的）方法，您可以调用并用于测试目的。对服务进行初始调用并查看它正在运行什么，然后针对本地存储的版本号进行测试并查看是否存在冲突。

有关这方面的更多详细信息，[Yoav Helfman](http://wcfpro.wordpress.com/2010/12/21/wcf-versioning-guidelines-2/)有一篇很好的文章，其中介绍了处理版本更改和更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:24:50.690

[我以前](https://stackoverflow.com/a/12723894/569662)发过这种东西。

本质上，管理这种情况的一种方法是要求您的服务消费者声明他们期望每个请求的服务接口版本。

然后在您的服务上公开一个故障合同，该合同将允许您识别发生了服务版本不匹配。这意味着消费者可以捕获并相应地处理这个特定问题。

# arrays - 将行主要维度切换为列主要维度

> ID：12859215
> 
> 赞同：5
> 
> 时间：2012-10-12T12:35:15.323
> 
> 标签：arrays, r

我将行主要数据作为向量放入 R 中。R 将此解释为以列为主的数据，据我所知，没有办法告诉数组以行为主的方式运行。

假设我有：

```
array(1:12, c(3,2,2), 
    dimnames=list(c("r1", "r2", "r3"), c("c1", "c2"),c("t1", "t2"))
) 
```

这使：

```
, , t1

   c1 c2
r1  1  4
r2  2  5
r3  3  6

, , t2

   c1 c2
r1  7 10
r2  8 11
r3  9 12 
```

我想将此数据转换为行优先数组：

```
, , t1
   c1 c2
r1  1  2
r2  3  4
r3  5  6

, , t2

   c1 c2
r1  7  8
r2  9 10
r3 11 12 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T12:59:23.547

假设您的数组在 中`a`，即您已经拥有该数组并且无法在读取时更改它，那么以下将起作用：

```
a <- array(1:12, c(3,2,2), 
           dimnames=list(c("r1", "r2", "r3"), c("c1", "c2"),c("t1", "t2")))

b <- aperm(array(a, dim = c(2,3,2),
                 dimnames = dimnames(a)[2:1]),
           perm = c(2,1,3))
b

>     b
, , 1

   c1 c2
r1  1  2
r2  3  4
r3  5  6

, , 2

   c1 c2
r1  7  8
r2  9 10
r3 11 12 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:46:10.583

解决方案：

```
aperm(array(1:12, c(2,3,2), 
    dimnames=list(c("c1","c2"),c("r1","r2","r3"),c("t1","t2"))),
    perm=c(2,1,3)
) 
```

请注意， aperm 会切换尺寸。所以基本上列与行交换。此外，我需要更改 dimnames 中列和行的顺序。

它准确地产生了需要的东西：

```
, , t1
   c1 c2
r1  1  2
r2  3  4
r3  5  6

, , t2

   c1 c2
r1  7  8
r2  9 10
r3 11 12 
```

# eclipse-plugin - 在 Eclipse 3.4.2 中开发的应用程序在尝试在 Eclipse 4.2 中运行时抛出依赖注入异常

> ID：12859220
> 
> 赞同：1
> 
> 时间：2012-10-12T12:35:31.563
> 
> 标签：eclipse-plugin, eclipse-rcp

org.eclipse.e4.core.di.InjectionException：递归引用试图创建类 org.eclipse.ui.internal.e4.compatibility.CompatibilityView

当我尝试在 Eclipse 4.2 中运行在 Eclipse 3.4.2 中开发的应用程序时，会引发此异常。

我读到了这个例外，但没有找到太多。

[http://www.vogella.com/blog/2011/10/11/running-eclipse-rcp-applications-in-the-e4-compatiblity-layer/](http://www.vogella.com/blog/2011/10/11/running-eclipse-rcp-applications-in-the-e4-compatiblity-layer/)

在上面的链接中，Vogella 已经解释了这个问题，并说添加更多插件就可以了。我在我的 eclipse 插件文件夹中检查了这些插件。

问题是我什至无法找到可以解决问题的方法。因此，如果有人可以对此有所了解。这会有很大帮助。

```
 !ENTRY org.eclipse.e4.ui.workbench 4 0 2012-10-25 11:40:32.723
!MESSAGE Unable to create class 'org.eclipse.ui.internal.e4.compatibility.CompatibilityView' from bundle '62'
!STACK 0
org.eclipse.e4.core.di.InjectionException: Recursive reference trying to create class org.eclipse.ui.internal.e4.compatibility.CompatibilityView
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:275)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$6.run(PartRenderingEngine.java:511)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:496)
    at org.eclipse.e4.ui.workbench.renderers.swt.ElementReferenceRenderer.createWidget(ElementReferenceRenderer.java:74)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1042)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.createElement(PartServiceImpl.java:1001)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.showPart(PartServiceImpl.java:966)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:464)
    at org.eclipse.ui.internal.ViewReference.getView(ViewReference.java:90)
    at org.eclipse.ui.internal.WorkbenchPage.findView(WorkbenchPage.java:1894)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.getPropertiesView(WorkspaceExplorerView.java:696)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.updatePropertiesViewInput(WorkspaceExplorerView.java:670)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.onSelectionChanged(WorkspaceExplorerView.java:665)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.selectionChanged(WorkspaceExplorerView.java:658)
    at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:164)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:162)
    at org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:2188)
    at org.eclipse.jface.viewers.StructuredViewer.setSelection(StructuredViewer.java:1725)
    at org.eclipse.jface.viewers.TreeViewer.setSelection(TreeViewer.java:1139)
    at org.eclipse.jface.viewers.Viewer.setSelection(Viewer.java:394)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.setWorkspaceTreeInput(WorkspaceExplorerView.java:747)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.createWorkspaceTree(WorkspaceExplorerView.java:595)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.createPrimaryViewer(WorkspaceExplorerView.java:566)
    at com.xyz.abc.common.ui.part.AbstractViewPart.createPartControl(AbstractViewPart.java:60)
    at com.xyz.abc.ui.wexplorer.views.WorkspaceExplorerView.createPartControl(WorkspaceExplorerView.java:192)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:129)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityView.createPartControl(CompatibilityView.java:155)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:300)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:857)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:837)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$6.run(PartRenderingEngine.java:511)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:496)
    at org.eclipse.e4.ui.workbench.renderers.swt.ElementReferenceRenderer.createWidget(ElementReferenceRenderer.java:74)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1042)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:635)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:635)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveRenderer.processContents(PerspectiveRenderer.java:59)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:635)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.showTab(PerspectiveStackRenderer.java:103)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.postProcess(PerspectiveStackRenderer.java:77)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:635)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.workbench.renderers.swt.WBWRenderer.processContents(WBWRenderer.java:626)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:635)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:961)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at com.xyz.abc.ui.ABCApplication.start(ABCApplication.java:20)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

我添加了堆栈跟踪以供参考

# ruby - 在块中分配变量

> ID：12859227
> 
> 赞同：1
> 
> 时间：2012-10-12T12:35:50.527
> 
> 标签：ruby, architecture

我想大家都遇到过类似这样的一段代码：

```
def query(sql)
  logger.debug "Db: Executing query #{sql}"
  result = nil
  ts = Benchmark.realtime do
    result = @db.exec sql
  end
  logger.debug "Db: Query completed in #{ts}"
  result
end 
```

坦率地说，这看起来很难看。有没有更优雅的方法来达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:29:29.437

您可以编写自己的包装方法，如下所示并隐藏丑陋：

```
require 'benchmark'

def bm (description, &block)
  [].tap do |result|
  ts = Benchmark.realtime do
    result <<  block.call
  end
    p "#{description} completed in #{ts}"
  end.first
end

result =  bm("db query") {"db result"}
p result 
```

输出：

```
"db query completed in 5.131e-06"
"db result" 
```

# ruby - Rails 不考虑夏令时

> ID：12859229
> 
> 赞同：2
> 
> 时间：2012-10-12T12:35:58.740
> 
> 标签：ruby, ruby-on-rails-3

```
ActiveSupport::TimeZone.new("Pacific Time (US & Canada)")
=> (GMT-08:00) Pacific Time (US & Canada) 
```

...但是现在，由于 DST，在洛杉矶是 GMT-07:00。见[http://www.timeanddate.com/worldclock/city.html?n=137](http://www.timeanddate.com/worldclock/city.html?n=137)

这是一个错误，我的设置中的一个错误，还是我不正确地创建了 TimeZone 对象？似乎无法弄清楚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:40:43.477

弄清楚了。原来 TimeZone 对象*确实*有一个“现在”的概念：

```
tz = ActiveSupport::TimeZone.new("Pacific Time (US & Canada)")
=> (GMT-08:00) Pacific Time (US & Canada) 
tz.parse('8:00AM')
=> Fri, 12 Oct 2012 08:00:00 PDT -07:00 
```

因此，您仍然可以使用 TimeZone 创建具有正确偏移量的 TimeWithZone 对象——尽管它的 to_s 方法显示了不正确的偏移量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:09:18.577

我不相信`ActiveSupport::TimeZone`对象有“现在”的概念。您可以使用所需的任何 utc_offset 以秒为单位初始化 TimeZone `::create`：

```
ActiveSupport::TimeZone.create("Pacific Time (US & Canada)", -(60 * 60 * 7))
#  => (GMT-07:00) Pacific Time (US & Canada) 
```

`ActiveSupport::TimeWithZone`在处理对象时，与夏令时相关的 now 概念更有意义。当您通过在 application.rb 中设置时区来让 Rails 应用程序感知时区时：

```
config.time_zone = 'Pacific Time (US & Canada)' 
```

...并且您使用`Time.zone.now`，结果将考虑夏令时 GMT-07:00。所以在这篇文章的时候：

```
Time.zone.now
=> Fri, 12 Oct 2012 07:03:51 PDT -07:00

Time.zone.now.class
=> ActiveSupport::TimeWithZone 
```

# c# - 如何在 C# 的 Metro 应用程序中使用 contactPickerUI 添加联系人？

> ID：12859231
> 
> 赞同：0
> 
> 时间：2012-10-12T12:36:04.717
> 
> 标签：c#, windows-runtime, microsoft-metro, contacts

我已经完成了[在 Windows 8 Metro App 中将联系人添加到用户联系人列表](https://stackoverflow.com/questions/11451966/add-contact-to-users-contaclist-in-awindows-8-metro-app/11457920#11457920)

但我仍然不清楚。我的意思是我们需要创建contactpickerUI还是默认？如何带来那个UI？我可以在运行时添加联系人吗，就像我可以添加新联系人一样，在人员中心编辑联系人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:19:15.367

如果您还没有在此处查看示例代码

[http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1](http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1)

一旦你得到了你在文件 Constants.cs 中的代码，你会看到几个部分类，App 和 MainPagePicker，它们连接了 contactPickerUI 属性。

# android - 安卓初学者：onDestroy

> ID：12859232
> 
> 赞同：6
> 
> 时间：2012-10-12T12:36:10.587
> 
> 标签：android, android-lifecycle, destroy

覆盖活动的 ondestroy 时，我应该在 super.onDestroy() 之前还是之后放置命令？

```
protected void onDestroy() {

    //option 1: callback before or ...

    super.onDestroy();

    //option 2: callback after super.onDestroy();
} 
```

（现在我担心：如果 super.onDestroy 太快，它永远不会到达选项 2。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T12:37:28.250

任何可能与使用活动资源相关的内容都应该在调用`super.onDestroy()`. 它之后的代码将被访问，但如果它需要这些资源可能会导致问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T12:42:23.113

将您的代码放在`super.onDestroy();`例如：

```
protected void onDestroy() {
    super.onDestroy();

    // Put code here.

} 
```

覆盖该方法时，您的代码将完成执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T14:02:08.743

这就是调用 super.onDestroy(); 时发生的情况；

[安卓源](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/app/Activity.java/?v=source)

```
protected void onDestroy() {
    mCalled = true;

    // dismiss any dialogs we are managing.
    if (mManagedDialogs != null) {

        final int numDialogs = mManagedDialogs.size();
        for (int i = 0; i < numDialogs; i++) {
            final Dialog dialog = mManagedDialogs.valueAt(i);
            if (dialog.isShowing()) {
                dialog.dismiss();
            }
        }
    }

    // also dismiss search dialog if showing
    // TODO more generic than just this manager
    SearchManager searchManager = 
        (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    searchManager.stopSearch();

    // close any cursors we are managing.
    int numCursors = mManagedCursors.size();
    for (int i = 0; i < numCursors; i++) {
        ManagedCursor c = mManagedCursors.get(i);
        if (c != null) {
            c.mCursor.close();
        }
    }
} 
```

Essentially this means that it does not matter if you call it before or after your code.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T12:56:42.717

调用 super.onDestroy 不会中断调用线程或类似的东西。无论你把它放在哪里，在 super.onDestroy 之前或之后，你的代码都会被执行。

super.onDestroy 将仅释放框架可能为此活动引用的资源（例如系统对话框和托管游标）

我建议您查看此链接以获取更多详细信息

[http://developer.android.com/reference/android/app/Activity.html#onDestroy()](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T12:39:59.193

这取决于。如果您希望在`super`函数之后应用您的操作，您应该将您的函数放在超级之后。我想你必须了解`super`first的用法。例如，看看[这个问题](https://stackoverflow.com/questions/1168345/why-does-this-and-super-have-to-be-the-first-statement-in-a-constructor)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T12:42:40.977

它将到达选项 2。 onDestroy() 实际上并没有销毁对象。在超类的 onDestroy() 运行并返回后，您的实例仍然存在。

编辑：这是 onDestroy 按顺序执行的操作：

*   关闭活动正在管理的任何对话框。
*   关闭活动正在管理的所有游标。
*   关闭任何打开的搜索对话框

# html - 如何在依赖文本的 div 中设置元素全高？

> ID：12859240
> 
> 赞同：0
> 
> 时间：2012-10-12T12:36:39.220
> 
> 标签：html, css

我正在尝试使“a”元素填充 div 的整个高度，但是我不希望它占据整个宽度。

看来我`display:block`根本没有帮助我。有人知道如何使这个 div 全高吗？不过，高度是可变的。这才是重点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:39:47.130

您应该使用`display: inline-block;`而不是使用，`display: block;`因为使用`block`将占用 100% 的宽度，`inline-block`而不是这样：[**我的小提琴**](http://jsfiddle.net/s98US/)

# php - Instagram 实时 API - PHP - 无法获取 POST 更新

> ID：12859245
> 
> 赞同：0
> 
> 时间：2012-10-12T12:36:52.290
> 
> 标签：php, api, post, instagram

我正在尝试与 instagram API 连接，连接工作正常，并且我正在接收 API 文档中描述的更新，问题是我无法访问发送到我的回调函数的数据。

根据[文档](http://instagram.com/developer/realtime/)

> 当有人发布新照片并触发更新您的订阅时，我们会向您在订阅中定义的回调 URL 发出 POST 请求

这是我的代码：

```
// check if we have a security challenge
if (isset ($_GET['hub_challenge']))
            echo $_GET['hub_challenge'];  
    else // This is an update
    {
        // read  the content of $_POST
        $myString = file_get_contents('php://input');
        $answer = json_decode($myString);

        // This is not working  starting from here
        $id = $answer->{'object_id'};
        $api = 'https://api.instagram.com/v1/locations/'.$id.'/media/recent?client_secret='.INSTA_CLI_SECRET.'&client_id='.INSTA_CLI_ID;

        $response = get_curl($api); //change request path to pull different photos
        $images = array();

        if($response){
        $decode = json_decode($response);
        foreach($decode->{'data'} as $item){
             // do something with the data here
             }
        }
    } 
```

显示 $myString 变量我有这个结果，不知道为什么它没有解码为 json :(

> [{“changed_aspect”：“media”，“subscription_id”：2468174，“object”：“geography”，“object_id”：“1518250”，“time”：1350044500}]

当我对 $id 进行硬编码时，get_curl 函数工作正常。

我猜我的 $myString 有问题，不幸的是 $_POST cvariable 没有填充，知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:55:42.907

查看您问题中包含的示例 JSON 响应，我可以得出结论，您尝试与之交谈的对象包装在一个数组中（因此 JSON 字符串中的 [ 和 ] 围绕它）。

您应该使用`$answers[0]->object_id`. 如果这不起作用，您可以随时使用`var_dump`来检查您的变量之一中的数据。

# android - 如何将 GridView 放入 ScrollView

> ID：12859250
> 
> 赞同：69
> 
> 时间：2012-10-12T12:37:36.893
> 
> 标签：android, gridview, scrollview

我必须设计布局，使整个布局应该滚动和内部布局我必须以`Grid`形式显示相关内容，所以我决定使用`GridView`。但问题是我无法在`GridView`里面使用`ScrollView`我已经阅读了文档（文档也说我们应该也不能`GridView`在里面使用`ScrollView`）。但我必须这样做，所以任何人都可以给我一些想法。谢谢

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-10-12T12:58:48.483

除了固有的滚动之外，GridView 肯定有好处。例如，单元格的一致动态布局将根据您传入的数据进行扩展和收缩。因此，当人们说想要这样的功能不好时，我认为这是错误的，因为您可能希望在滚动视图中使用动态图像（视图）网格，但希望整个滚动视图包含除网格之外的其他内容细胞。

现在，您可以这样做。[在这里](https://stackoverflow.com/questions/8481844/gridview-height-gets-cut)检查答案。它是一个可扩展高度的 GridView，您需要在项目中导入/创建它。这基本上意味着随着更多项目添加到 GridView，它只会扩展其高度，而不是保持其高度设置并使用滚动。这正是你想要的。

在项目中拥有 ExpandableHeightGridView 后，转到您希望 GridView 所在的 XML 布局。然后你可以做这样的事情（释义）：

```
<ScrollView ...>
    <RelativeLayout ...>
        <com.example.ExpandableHeightGridView ... />
        <other view items />
    </RelativeLayout>
</ScrollView> 
```

然后，在您设置 GridView 适配器的活动中，您要确保将其设置为展开。所以：

```
ExpandableHeightGridView gridView = (ExpandableHeightGridView) findViewById(R.id.myId);
gridView.setAdapter(yourAdapter);
gridView.setExpanded(true); 
```

您想要这个可扩展的 GridView 的原因是，标准 GridView 不扩展的事实是导致它滚动的原因。它固定在某个高度，然后随着更多项目填充它超出其视图边界，它变得可滚动。现在，有了这个，您的 GridView 将始终扩展其高度以适应其中的内容，因此永远不允许它进入其滚动模式。这使您可以在 ScrollView 中使用它，并在 ScrollView 中使用它上方或下方的其他视图元素，并让它们全部滚动。

这应该会给你你正在寻找的结果。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-03-21T10:18:35.053

我知道我迟到了，但我有另一个解决方案，我必须分享它并且可以完美运行。此处，该方法根据其包含的项目数计算 GridView 高度，并在运行时将高度设置为 GridView。

```
public void setGridViewHeightBasedOnChildren(GridView gridView, int columns) {
        ListAdapter listAdapter = gridView.getAdapter(); 
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        int items = listAdapter.getCount();
        int rows = 0;

        View listItem = listAdapter.getView(0, null, gridView);
        listItem.measure(0, 0);
        totalHeight = listItem.getMeasuredHeight();

        float x = 1;
        if( items > columns ){
            x = items/columns;
            rows = (int) (x + 1);
            totalHeight *= rows;
        }

        ViewGroup.LayoutParams params = gridView.getLayoutParams();
        params.height = totalHeight;
        gridView.setLayoutParams(params);

} 
```

调用`setAdapter`gridview 后，只需调用

```
setGridViewHeightBasedOnChildren( <yourGridView> , <no of grid view columns> ) 
```

它会起作用的。

您可以像往常一样在 xml 中定义 gridview

让代码来处理它。:)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-10T20:33:40.863

我找到了一种**在 ScrollView中为****GridView**提供固定大小并**启用滚动**的方法。这使您无需滚动 GridView 的所有元素即可查看整个 ScrollView，对我来说，使用*ExpandableHeightGridView*更有意义。

 *****为此，您必须实现一个扩展 GridView 的新类并覆盖*onTouchEvent()*以调用*requestDisallowInterceptTouchEvent(true)*。因此，父视图将离开 Grid 拦截触摸事件。

*GridViewScrollable.java：*

```
package com.example;
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.GridView;

public class GridViewScrollable extends GridView {

    public GridViewAdjuntos(Context context) {
        super(context);
    }

    public GridViewAdjuntos(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public GridViewAdjuntos(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev){
        // Called when a child does not want this parent and its ancestors to intercept touch events.
        requestDisallowInterceptTouchEvent(true);
        return super.onTouchEvent(ev);
    }
} 
```

在 ScrollView 内将其添加到您想要的特征和边距的布局中：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:isScrollContainer="true" >

    <com.example.GridViewScrollable
    android:id="@+id/myGVS"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth" />

</ScrollView> 
```

在你的活动中得到它：

```
GridViewScrollable myGridView = (GridViewScrollable) findViewById(R.id.myGVS); 
```

我希望它有帮助 =)

在科特林：

```
class GridViewScrollable @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = 0
) : GridView(context, attrs, defStyleAttr) {

    override fun onTouchEvent(ev: MotionEvent?): Boolean {
        // Called when a child does not want this parent and its ancestors to intercept touch events.
        requestDisallowInterceptTouchEvent(true)
        return super.onTouchEvent(ev)
    }
} 
```

有一个烦人的警告：“自定义视图 GridViewScrollable 覆盖 onTouchEvent 但不执行单击”。如果你愿意，请自行解决。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-05-18T16:44:52.897

我还试图`GridView`在`NestedScrollView`.

这个对另一个问题的回答帮助了我：[https ://stackoverflow.com/a/38612612](https://stackoverflow.com/a/38612612)

> 将您的 GridView 属性启用为
> 
> ```
> android:nestedScrollingEnabled="true" 
> ```

原始海报：[Droid_Dev](https://stackoverflow.com/users/685804/droid-dev)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-01T11:43:34.743

要在滚动视图中使用 gridview，请设置滚动视图 android:fillViewport="true"

我知道在这里回答很晚，但可能对一些新开发人员有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-07T21:08:49.353

如果您使用了 dennisdrew 的答案并且您的网格上方有内容并且当您打开视图时它会被隐藏，只需添加下面的最后一行

```
ExpandableHeightGridView gridView = (ExpandableHeightGridView) findViewById(R.id.myId);
gridView.setAdapter(yourAdapter);
gridView.setExpanded(true);
gridView.setFocusable(false); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-19T07:32:19.030

最好使用`ExpandableHeightlistView`或`ExpandableHeightGridView`inside `scrollview`。

**逻辑**

通过提供非常大的高度提示来计算整个高度。但不要使用该整数的最高 2 位；这些是为 MeasureSpec 模式保留的。

```
int expandSpec = MeasureSpec.makeMeasureSpec(
 Integer.MAX_VALUE >> 2, MeasureSpec.AT_MOST);
 super.onMeasure(widthMeasureSpec, expandSpec);

 ViewGroup.LayoutParams params = getLayoutParams();
 params.height = getMeasuredHeight(); 
```

有关更多信息，请使用演示探索以下示例

[http://www.londatiga.net/it/programming/android/make-android-listview-gridview-expandable-inside-scrollview/](http://www.londatiga.net/it/programming/android/make-android-listview-gridview-expandable-inside-scrollview/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-09T17:56:33.417

我不会强迫这个问题。GridView 在滚动视图中无法正常工作。而是将您的 gridview 转换为 recyclerview 并使用 gridLayoutManager 来解决问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-21T15:17:46.760

相信这个解决方案对我有用！

机器人：nestedScrollingEnabled="真"

上面的网格视图内的代码可以滚动网格视图并设置宽度和高度 android:layout_width="match_parent" android:layout_height="200sp"

这甚至在滚动视图中也可以工作感谢以前的答案我想出了以前的答案。感谢他们

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-26T23:46:00.823

```
 gridView.setOnTouchListener(new View.OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    v.getParent().requestDisallowInterceptTouchEvent(true);
                    return false;
                }

            }); 
```

// 设置 Touch Listener 以处理 ScrollView 内部的触摸

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-03T13:53:06.513

如果你想在`GridView`里面`ScrollView`/ `RecyclerView`，有两种情况：

1.  如果您希望`GridView`所有行都可见，请参阅[https://stackoverflow.com/a/63724794/2914140](https://stackoverflow.com/a/63724794/2914140)。

2.  如果您想在 中显示一行`GridView`，但能够滚动它（以显示其他行），请参阅[https://stackoverflow.com/a/26852498/2914140](https://stackoverflow.com/a/26852498/2914140)。*****

# python - Python：如何在我的函数中使用进度条

> ID：12859253
> 
> 赞同：2
> 
> 时间：2012-10-12T12:37:59.207
> 
> 标签：python, performance, coding-style, progress-bar, easy-install

我正在使用以下功能：

```
def LAS2TXTGridClip(inFile,poly,MinPoints=1):
        sf = shapefile.Reader(poly) #open shpfile
        sr = sf.shapeRecords()
        poly_filename, ext = path.splitext(poly)
        inFile_filename = os.path.splitext(os.path.basename(inFile))[0]
        for i in xrange(len(sr)):
            verts = np.array(sr[i].shape.points,float)
            record = sr[i].record[0]
            inside_points = [p for p in lasfile.File(inFile,None,'r') if pnpoly(p.x, p.y, verts)]
            if len(inside_points) >= MinPoints:
                file_out = open("{0}_{1}_{2}.txt".format(poly_filename, inFile_filename, record), "w")
                for p in inside_points:
                    file_out.write("%s %s %s %s %s %s %s %s %s %s %s" % (p.x, p.y, p.z, p.intensity,p.return_number,p.number_of_returns,p.scan_direction,p.flightline_edge,p.classification,p.scan_angle,record)+ "\n")
                file_out.close() 
```

该`for i in xrange(len(sr)):`函数将被处理多次。大约是 50 万，`len(sr)`我希望插入一个进度条，以便了解我需要等待的时间（现在是星期五）。我有以下问题：

1.  哪个是 Windows OS 64 位上 python 27 的“最佳和简单”进度条？
2.  我找到了[进度条模块](http://pypi.python.org/pypi/progressbar/2.2)，但在这一步之后我无法使用 easy_install 进度条。
3.  插入进度条的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:53:57.100

您对模块有什么问题`progressbar`？这是非常好的解决方案。

```
$ cd progressbar-2.2/
$ sudo python setup.py install
...blablabla...
$ python
>>> from progressbar import ProgressBar
>>> pbar = ProgressBar(10)
>>> for i in range(10):
...     pbar.update(i+1)
... 
100% |######################################################################| 
```

# vbscript - 组合框的VBscript选择案例

> ID：12859255
> 
> 赞同：1
> 
> 时间：2012-10-12T12:38:12.287
> 
> 标签：vbscript, combobox, sql

他在那里，我是 VB 脚本的新手，我正在尝试选择一个案例来将电子邮件地址更改为组合框选项。我知道我的想法很简单，但我需要方向的帮助。组合框有效，但我无法获得组合框中选择的值来触发选择案例。

```
 Sub Item_Open()

  Set FormPage = Item.GetInspector.ModifiedFormPages("Message")

  Set Control = FormPage.Controls("Subject")

  Control.PossibleValues = "SPOED;STATUS;MANCO;KLACHT;TRANSPORT;TRACKING;INKOMEND;REPARATIE;RETOUREN;LADEN;MILKRUN"

  Set MyPage = Item.GetInspector.ModifiedFormPages("Message")
    Set Mail = MyPage.Item("Subject").Value

    Select Case Mail
        Case SPOED   
            Item.To = "hihi@blabla.com"         

        Case STATUS
            Item.To = "haha@blabla.com"

        Case else
            Item.To = ""    

    End Select

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:01:46.990

假设`MyPage.Item("Subject").Value`返回一个字符串值，如“STATUS”。然后你必须在一个**字符串**变量中选择它：

```
strMail = MyPage.Item("Subject").Value  ' look ma, no Set! 
```

该`Select Case X`语句计算`X`表达式并将其与`Case Y`部分中的值 Y, ... 进行比较，并执行 X 和 Y （的值）相等的第一个块。要将其应用于`strMail`包含诸如“SPOED”之类的字符串，Case Y 表达式应该是字符串文字：

```
Select Case strMail
   Case "SPOED"
     ...
   Case "STATUS"
     ... 
```

如果您使用`Option Explicit`VBScript 会告诉您，`SPOED`(etc) 是（理解为）一个不能等于 (decent) 的统一变量`strMail`。

# c++ - UTC 从午夜到日期时间的秒数

> ID：12859258
> 
> 赞同：5
> 
> 时间：2012-10-12T12:38:15.657
> 
> 标签：c++, qt, datetime, utc

我将雷达数据作为“轨迹”获取，轨迹数据显然表示自上次午夜以来的 UTC 秒数。这不是自 1970 年 1 月 1 日以来的秒数。

现在我想将其转换为日期时间，因为我知道计算机上的时钟可能与雷达上的时钟稍微不同步。我假设雷达的秒是参考，而不是计算机的。我想将这些秒数转换为完整的日期时间。午夜时分，事情似乎有点棘手。

有什么建议么？我有一些想法，但我不想错过任何东西。

我正在使用 C++ Qt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:00:14.687

```
//  Function to extend truncated time, given the wall time and period, all
//  in units of seconds.
//
//  Example: Suppose the truncated period was one hour, and you were
//  given a truncated time of 25 minutes after the hour. Then:
//
//  o Actual time of 07:40:00 results in 07:25:00 (07:40 + -15)
//  o Actual time of 07:10:00 results in 07:25:00 (07:10 + +15)
//  o Actual time of 07:56:00 results in 08:25:00 (07:56 + +29)

double extendTruncatedTime(double trunc, double wall, int period) {
   return wall + remainder(trunc - wall, period);
}

#define extendTruncatedTime24(t) extendTruncatedTime(t, time(0), 24 * 60 * 60) 
```

一些评论：

*   的单位`wall`是秒，但它的基数可以是任意的。在 Unix 中，它通常从 1970 年开始。

*   闰秒在这里不相关。

*   你需要`#include <math.h>`为`remainder()`.

*   根据OP 的要求， `period`in`extendTruncatedTime()`几乎总是 24 小时，24 * 60 * 60。也就是说，给定一天中的时间，它会根据“墙壁”时间通过添加年、月和日来扩展它。

*   我知道上一条语句的唯一例外是，因为你提到雷达，是在 Asterix CAT 1 数据项 I001/141 中，其中周期为 512 秒，并且`extendTruncatedTime()`给出的不太适用。

*   还有一个重要的案例`extendTruncatedTime()`没有涉及。假设给你一个截断的时间，由月中的日期、小时和分钟组成。年份和月份怎么填？

以下代码片段将年份和月份添加到从 DDHHMM 格式派生的时间：

```
time_t extendTruncatedTimeDDHHMM(time_t trunc, time_t wall) {
   struct tm retval = *gmtime_r(&trunc, &retval);
   struct tm now    = *gmtime_r(&wall,  &now);
   retval.tm_year = now.tm_year;
   retval.tm_mon  = now.tm_mon;
   retval.tm_mon += now.tm_mday - retval.tm_mday >  15; // 15 = half-month
   retval.tm_mon -= now.tm_mday - retval.tm_mday < -15;
   return timegm(&retval);
} 
```

如所写，这不处理错误的输入。例如，如果今天是 7 月 4 日，那么无意义的`310000`将悄悄地转换为 7 月 1 日。（这可能是一个特性，而不是一个错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:43:33.107

如果您可以链接到另一个库，我建议您使用[boost::date_time](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html)。

似乎您想从午夜（纪元）开始以秒为单位获取当前日期，然后将雷达时间添加到其中，然后将总和转换回日期时间，并将其转换为字符串。

使用 boost 将帮助您：

*   获取正确的当地时间
*   计算日期
*   将漂移纳入计算
*   考虑闰秒

因为您将拥有诸如时间间隔和持续时间之类的概念。您可以使用类似的东西（来自 boost 示例）：

```
ptime t4(date(2002,May,31), hours(20)); //4 hours b/f midnight NY time
ptime t5 = us_eastern::local_to_utc(t4);
std::cout << to_simple_string(t4) << " in New York is " 
          << to_simple_string(t5) << " UTC time "
          << std::endl; 
```

如果你想手动计算漂移，你可以很容易地做时间数学，类似于这样的结构：

```
 ptime t2 = t1 - hours(5)- minutes(4)- seconds(2)- millisec(1); 
```

# xml - Delphi：尝试访问 XMLDocument 时出现 EInvalidPointer

> ID：12859259
> 
> 赞同：2
> 
> 时间：2012-10-12T12:38:18.297
> 
> 标签：xml, delphi, root, delphi-2007, txmldocument

每次我尝试使用`XMLDocument.DocumentElement;`.

```
 begin
      XMLDocument := TXMLDocument.Create(nil); // nil since we don't need an owner
      AStream := TStream.Create;  // stream for output as string
      XMLDocument.loadFromXML(xml);// load string
      if NOT (XMLDocument.IsEmptyDoc) then
       begin      
        XMLDocument.Active := true; // actually automatically done by 'loadFromXML'

        // get document root
        HeadNode := XMLDocument.DocumentElement;

        // add <id>-element, set ID as text
        idNode := HeadNode.AddChild(XML_ID_PLAIN);
        idNode.Text := id;

        // ...
     end;
    end; 
```

传递给的字符串“xml”`loadFromXML(string)`是有效的 XML，但 XMLDocument 的属性“XML”和“DOMDocument”始终是`nil`，即使对象本身及其“IsEmptyDoc”属性都不是。Delphi 版本仍然是 2007。

有谁知道是什么原因造成的？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T12:46:22.797

请注意，这不会回答您的问题，为什么会发生您所描述的事情，但会尝试为您提供正确的方法，您想要什么。使用[`LoadXMLData`](http://docwiki.embarcadero.com/Libraries/XE3/en/Xml.XMLDoc.LoadXMLData)函数而不是自己创建`TXMLDocument`实例。这是一个示例代码：

```
uses
  XMLIntf, XMLDoc;

const
  XMLString =
    '<?xml version="1.0" encoding="UTF-8"?>' +
    '<Setup>' +
    '  <FirstNode>First Node Value</FirstNode>' +
    '  <SecondNode>Second Node Value</SecondNode>' +
    '</Setup>';

procedure TForm1.Button1Click(Sender: TObject);
var
  HeadNode: IXMLNode;
  XMLDocument: IXMLDocument;
begin
  try
    XMLDocument := LoadXMLData(XMLString);
    HeadNode := XMLDocument.DocumentElement;
    if Assigned(HeadNode) then
      ShowMessage(HeadNode.NodeName);
  except
    on E: Exception do
      ShowMessage(E.Message);
  end;
end; 
```

# json - 搜索 Youtube 并返回 JSON

> ID：12859260
> 
> 赞同：1
> 
> 时间：2012-10-12T12:38:19.673
> 
> 标签：json, youtube

是否有一个网址可以让我在 YouTube 上搜索“foo”，并返回带有视频列表的 JSON？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T12:48:42.117

正如他们的 API 文档明确指出的那样，只需添加`?alt=json`：

[http://gdata.youtube.com/feeds/api/videos?q=foo&alt=json](http://gdata.youtube.com/feeds/api/videos?q=foo&alt=json)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T12:42:18.213

[YouTube JSON API 页面](https://developers.google.com/youtube/2.0/developers_guide_json)可以帮助您。

API 页面上的一些研究指出，您只需要[http](http://gdata.youtube.com/feeds/api/videos?q=foo&alt=json) ://gdata.youtube.com/feeds/api/videos?q=foo&alt=json ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-05T06:07:32.727

关于最新更新：

[https://www.googleapis.com/youtube/v3/search?part=snippet&q=SEARCHPARAMATER&maxResults=25&key=](https://www.googleapis.com/youtube/v3/search?part=snippet&q=SEARCHPARAMATER&maxResults=25&key=)`key`

通过使用此 URL，您将能够提供搜索参数并获得所需的 JSON。

# javascript - 表单提交后使用 JQuery 替换 div 标签

> ID：12859262
> 
> 赞同：2
> 
> 时间：2012-10-12T12:38:25.770
> 
> 标签：javascript, jquery, html

我通过使用 JQuery 的帖子调用提交表单而不离开我的页面。

提交后，我想用其中的表单替换 div，并带有感谢信息。问题是在我提交之前显示消息而不是替换，下面是我的代码。

```
$(document).ready(function() {
            //When the form with id="myform" is submitted...
            $("#myform").submit(function() {
                //Send the serialized data to mailer.php.
                $.post("mailer.php", $("#myform").serialize(),
                    //Take our repsonse, and replace whatever is in the "formResponse"
                    //div with it.
                    function(data) {
                        $("#formResponse").html(data);
                    }
                );
                return false;
            });
        }); 
```

**和 HTML**

```
<div data-role="content">
<form id="myform">
  <div data-role="fieldcontain">
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" value=""  />
</div>
<div data-role="fieldcontain">
  <label for="email">Email:</label>
  <input type="email" name="email" id="email" value=""  />
</div>
<div data-role="fieldcontain">
  <label for="company">Company Name:</label>
  <input type="text" name="company" id="company" value=""  />
</div>        
<input type="submit" name="submit" value="Submit" data-icon="star" data-theme="b" />
</form>

</div>
<div data-role="content" div id="formResponse">
    thank you, your quote has been received and you will hear back from us shortly.
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:44:56.307

尝试替换以下代码：

```
<div data-role="content" div id="formResponse"> 
```

对于这个：

```
<div data-role="content" style="display:none" id="formResponse"> 
```

然后替换您的以下javascript函数：

```
function(data) {
  $("#formResponse").html(data);
} 
```

对于这个：

```
function(data) {
  $("#myForm").html( $("#formResponse").html() );
} 
```

**更新：**
如果您只想显示从 ajax 调用获得的结果，而不是显示 div 的内容`#formResponse`，只需删除`#formResponse`div，然后执行以下操作：

```
function(data) {
  $("#myForm").html( data );
} 
```

**更新 2：**
您还可以隐藏表单 div 并显示“谢谢”div，如下所示：

```
function(data) {
  $("#myForm").hide('slide', function() {$("#formResponse").show('slide');});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:42:45.513

use`success(data)`请求成功时执行的回调函数。

# c++ - 为多个平台设计 UI 框架

> ID：12859270
> 
> 赞同：0
> 
> 时间：2012-10-12T12:38:54.837
> 
> 标签：c++, qt, design-patterns, inheritance

我们正在开发基于 Qt 的嵌入式软件 UI 框架，该框架目前支持两种类型的设备——手机和平板电脑。稍后可能会有其他外形尺寸具有完全不同的 UI。目前，手机和平板电脑的 UI 相似，差异主要在于尺寸。我们希望向应用程序开发人员（内部，没有外部应用程序）公开一个通用 API，这样他们就不必为每个平台编写单独的屏幕。

要开发屏幕，应用程序开发人员必须从 Screen 类或更专业的屏幕（例如 PrefScreen 类）继承。我们希望向应用程序开发人员公开每个组件的统一接口，但在框架中使用特定于平台的实现。我们有以下课程：

ScreenBase（公开所有平台通用的接口） ScreenPhone : ScreenBase ScreenTablet : ScreenBase

PrefScreenBase（公开所有平台通用的接口）
PrefScreenPhone：PrefScreenBase PrefScreenTablet：PrefScreenBase

为了实现它，我们有以下类型定义：

```
#ifdef PHONE
typedef ScreenPhone Screen;
typedef PrefScreenPhone PrefScreen;
#elif TABLET
typedef ScreenTablet Screen;
typedef PrefScreenTablet PrefScreen;
#endif 
```

继承结构如下 ScreenBase
|_ScreenPhone
|_ScreenTablet

PrefScreenBase : 屏幕（根据为其构建的平台解析为 ScreenPhone 或 ScreenTablet）
|_PrefScreenPhone
|_PrefScreenTablet

Screen 将在手机版本上解析为 ScreenPhone，并在平板电脑版本上解析为 ScreenTablet。PrefScreen 将在手机版本上解析为 PrefScreenPhone，并在平板电脑版本上解析为 PrefScreenTablet。

在手机上，层次结构为 ScreenBase->ScreenPhone->PrefScreenBase->PrefScreenPhone 在平板电脑上，层次结构为 ScreenBase->ScreenTablet->PrefScreenBase->PrefScreenTablet

本质上，平台特定类派生自通用 *Base 类，而 *Base 类派生自基于其构建平台的适当类。我们考虑使用桥接模式 (http://en.wikipedia.org/wiki/Bridge_pattern) 来解决问题，但我们的截止日期似乎不允许这样做。此外，由于我们的框架基于 Qt 框架，因此将实现与接口分离会很复杂。

上述方法是否在任何框架中使用？您认为上述方法存在重大问题吗？如果是这样，有什么替代方案？我们的主要目标是为应用程序开发人员抽象出平台差异，并确保最大程度地重用代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:48:07.180

我想你可以使用 QDesktopWidget：

[http://harmattan-dev.nokia.com/docs/library/html/qt4/qdesktopwidget.html](http://harmattan-dev.nokia.com/docs/library/html/qt4/qdesktopwidget.html)

正如诺基亚文档所说：

> QDesktopWidget 类提供对多头系统的屏幕信息的访问。
> 
> 具有多个图形卡和显示器的系统可以将可用的物理屏幕空间作为多个桌面或大型虚拟桌面进行管理。
> 
> 此类提供有关用户桌面的信息，例如其总大小、> 屏幕数量、每个屏幕的几何形状，以及它们是配置为单独的 >desktops 还是单个虚拟桌面。
> 
> Qt 提供的小部件使用此类将工具提示、菜单和对话框放置在其父或应用程序小部件的正确屏幕上。应用程序可以使用此类 > 获取可用于保存窗口位置的信息，或将子小部件 > 和对话框放置在一个特定屏幕上。

特别是： QDesktopWidget::screenGeometry() 您可以获得以像素为单位的屏幕分辨率。

# javascript - 将窗口位置设置为 data-rel="dialog"

> ID：12859282
> 
> 赞同：0
> 
> 时间：2012-10-12T12:39:36.920
> 
> 标签：javascript, jquery-mobile

我有一个要链接到*data-rel="dialog"*的链接，但在此之前我必须检查数据是否正确插入，所以如果是，我会这样做`window.location = #dialog_page`但页面不会显示为对话框，即使该链接具有`data-rel="dialog"`属性。

javascript有没有办法改变位置并仍然听`data-rel`属性？

谢谢。

[编辑]

这是单击后我正在检查内容的按钮：

```
<a alt="#pop_address" data-rel="dialog" data-icon="arrow-r" data-iconpos="right" class="check forward" data-inline="true" data-role="button">Continuar >></a> 
```

这是我用来更改位置的代码：

```
window.location = $(this).attr('alt'); 
```

我使用锚的 alt 而不是 href，所以在检查之前它不会重定向。

在我得到答案后，我尝试了这个：

```
$.mobile.changePage($('#pop_address')); 
```

但它不会使页面成为对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T11:47:32.420

这里有点晚了，但是当您通过 javascript（通过 $.changePage() 方法或 window.location()）加载页面时，没有单击链接来启动转换，因此您的 data-rel 不是t 正在考虑中。

相反，您必须将其包含在 $.changePage() 方法的选项对象中...

```
 $.mobile.changePage('#page-patient_info',{
                       transition:'pop', 
                       role:'dialog'
                     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:46:31.307

如果您指的是以编程方式打开对话框，而不是直接通过锚标记的 href 属性打开对话框，您可以查看[changePage() 方法](http://jquerymobile.com/test/docs/api/methods.html)

那么你只需调用

`$.mobile.changePage($("#dialog_page"));`

或者

`$.mobile.changePage($("#dialog_page"), { /* options */ });`

每当您确定可以打开对话框时。

# java - 如何从 Java 集合创建 Scala 并行集合

> ID：12859284
> 
> 赞同：5
> 
> 时间：2012-10-12T12:39:40.920
> 
> 标签：java, scala, collections, parallel-collections

[从 Scala 2.8 开始，将 Java Collection 转换为 Scala 等价物的最简单方法是使用 JavaConversions。](https://stackoverflow.com/a/3969631/28190). 这些隐式定义返回包含的 Java 集合的包装器。

Scala 2.9 引入了并行集合，对集合的操作可以并行执行，然后再收集结果。这很容易实现，将现有集合转换为并行集合非常简单：

```
myCollection.par 
```

但是在使用 JavaConversions 从 Java 集合转换而来的集合上使用 'par' 存在问题。如[Parallel Collection Conversions](http://docs.scala-lang.org/overviews/parallel-collections/conversions.html)中所述，通过评估所有值并将它们添加到新的并行集合中，固有的顺序集合被“强制”到新的并行集合中：

> 其他集合，例如列表、队列或流，本质上是顺序的，因为元素必须一个接一个地访问。通过将元素复制到类似的并行集合中，这些集合被转换为它们的并行变体。例如，一个函数列表被转换成一个标准的不可变并行序列，它是一个并行向量。

当打算对原始 Java 集合进行延迟评估时，这会导致问题。例如，如果只返回一个 Java Iterable，然后转换为 Scala Iterable，则不能保证 Iterable 的内容是否会被急切地访问。**那么应该如何从 Java 集合创建并行集合，而不需要维持评估每个元素的成本呢？**我试图通过使用并行集合并行执行它们并希望“获取”提供的前 n 个结果来避免这种成本。

根据[Parallel Collection Conversions](http://docs.scala-lang.org/overviews/parallel-collections/conversions.html)有一系列的集合类型花费恒定的时间，但似乎没有办法保证这些类型可以由 JavaConversions 创建（例如，可以创建“Set”，但是那是一个'HashSet'？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:07:29.793

首先，通过`JavaConversion`s 从 Java 集合中获得的每个集合都不是默认的可并行化 Scala 集合——这意味着它总是会被重新评估为相应的并行集合实现。这样做的原因是并行执行至少依赖于[`Splitter`s的概念——它必须被拆分成更小的子集，然后不同的处理器可以处理这些子集。](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.collection.parallel.Splitter)

我不知道你的 Java 集合在数据结构的意义上是怎样的，但如果它是一个树状的东西或一个数组，其元素被懒惰地评估，你很可能可以轻松地实现一个`Splitter`.

如果您不想急切地`force`实现一个实现 Java 集合 API 的惰性集合，那么您唯一的选择是为该特定的惰性 Java 集合[实现一种新类型的并行集合。](http://docs.scala-lang.org/overviews/parallel-collections/custom-parallel-collections.html)在这个新实现中，您必须提供拆分迭代器的方法（即 a `Splitter`）。

一旦你实现了这个知道如何拆分数据结构的新并行集合，你应该为你的特定 Java 集合创建一个自定义的 Scala 包装器（此时它只是一些额外的样板，看看它是如何完成的`JavaConversions`）并覆盖它`par`返回您的特定并行集合。

您甚至可以对索引序列一般地执行此操作。鉴于您的 Java 集合是具有[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)特别有效方法的序列（在Java 中为a ） ，`get`您可以`Splitter`将`get``0``size - 1`

如果你这样做了，标准库的补丁总是受欢迎的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:07:18.810

Parallel 需要随机访问，而 java.lang.Iterable 不提供。这是一个根本的不匹配，没有多少转化可以让你轻松通过。

用一个非编程类比，你不能通过同时将一个人从新加坡送到英国和另一个人从澳大利亚到新加坡来让一个人从澳大利亚到英国。

或者在编程中，如果您正在处理实时数据流，则无法通过在不增加延迟的情况下同时处理现在的数据和五分钟前的数据来并行化它。

您将需要至少提供一些随机访问的东西，例如 java.util.List.listIterator(Int) 而不是 Iterable。

# asp.net - 如何知道应用程序级别变量何时更改 asp.net

> ID：12859286
> 
> 赞同：1
> 
> 时间：2012-10-12T12:39:43.530
> 
> 标签：asp.net, variables, onchange, global-asax, notify

我将应用程序级变量存储在*global.asax*文件的缓存中：

```
 void Application_Start(object sender, EventArgs e) 
    {
        Application.Lock();
        List<MyClassName> myobjects = new List<MyClassName>();
        HttpContext.Current.Cache["List"] = myobjects;
        Application.UnLock();        
    } 
```

我访问它并在页面中更改它：

```
protected void Page_Load(object sender, EventArgs e)
{
   List<MyClassName> myobjects = (List<MyClassname>)HttpContext.Current.Cache["List"];
   //change myobjects...
   HttpContext.Current.Cache["List"] = myobjects;
} 
```

**问题是：** *假设我们有两个用户（浏览器）同时运行这个站点（例如他们正在聊天）。*当一个用户更改myobjects*变量时如何通知另一个用户？*

我们可以使用计时器定期检查 myobjects 并将其与旧对象进行比较。但这不是最好的方法。

*那么有没有更好的方法在全局变量更改时通知另一个用户？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:05:09.357

对于网络服务器来说，考虑到 http 协议的无状态性，没有用户或连接用户之类的东西，只是一个请求及其响应。当您说要通知用户时，您是在说服务器将启动不可能的通信。

一个想法可能是，您可以使用长轮询，即保持请求持续存在，并且每当您想向用户通知某些内容时，您都可以输入数据，但它再次不是一个可扩展的解决方案 - 至少对于资源不足的服务器（当然谷歌可以负担得起）

为了通知任何事情，用户必须连接到服务器 - 即必须从客户端发起通信。

另一种选择是使用套接字。您可以编写自定义服务器并让您的 Web 应用程序通知自定义服务器该值已更改。反过来，自定义服务器将使用套接字（Web 套接字）通知客户端。这是一个相当复杂的机制。您可以使用 html 5 提供的 websockets 或使用像 flash/java 这样的插件来进行套接字通信。

# jquery - 使用文件夹中的图像填充下拉列表

> ID：12859298
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:40:12.603
> 
> 标签：jquery, asp.net-mvc, json, razor, jqgrid

我使用[http://designwithpc.com/Plugins/ddSlick](http://designwithpc.com/Plugins/ddSlick)并且我不想将我的下拉列表与我的项目文件夹中的图像绑定。文件夹中有很多图像，那么我如何使用 foreach 循环来做到这一点？我使用带有 Razor 语法的 ASP.NET MVC 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:57:54.993

您需要进行某种分页。由于 ddSlick 似乎没有对此的内置支持（确保您可以花一些时间自己添加），您可能需要检查**[http://ivaynberg.github.com/select2](http://ivaynberg.github.com/select2)**

检查示例如何使用 AJAX 加载添加分页 ( [http://ivaynberg.github.com/select2/#ajax](http://ivaynberg.github.com/select2/#ajax) ) 以及如何使用无限滚动 ( [http://ivaynberg.github.com/select2/#infinite](http://ivaynberg.github.com/select2/#infinite) )

注意：如果您需要在用户尝试打开组合框后显示结果（而不是当用户在里面输入内容时），您可以将 minimumInputLength 设置设置为 0。这将模拟接近使用 ddSlick 获得的下拉行为。

# objective-c - zXing（ios版）黑屏/白屏错误

> ID：12859300
> 
> 赞同：0
> 
> 时间：2012-10-12T12:40:17.880
> 
> 标签：objective-c, ios, avfoundation, zxing

我正在研究使用 zxing 库读取二维码的应用程序。我有问题`ZxingWidgetController`- 显示视图时，在应用程序处于后台/未激活期间（例如，屏幕已锁定）来自相机的图像未显示在屏幕上 - 只有背景可见，扫描仪似乎无法正常工作。

当我再次调用`initCapture`方法时，在显示来自相机的一点延迟视频后，但在这种情况下，每次应用程序失去活动时，我都需要重新初始化扫描仪 - 这种行为根本不舒服。

这个错误可以在几乎所有使用 zXing 的应用程序上重复，所以我想这是一些 zXing 错误。

zXing initCapture 方法代码为：

```
- (void)initCapture {
#if HAS_AVFF
  AVCaptureDeviceInput *captureInput =
    [AVCaptureDeviceInput deviceInputWithDevice:
            [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] 
                                          error:nil];
    if(!captureInput)
    {
        NSLog(@"ERROR - CaptureInputNotInitialized");
    }

  AVCaptureVideoDataOutput *captureOutput = [[AVCaptureVideoDataOutput alloc] init]; 
  captureOutput.alwaysDiscardsLateVideoFrames = YES;
    if(!captureOutput)
    {
        NSLog(@"ERROR - CaptureOutputNotInitialized");
    }

  [captureOutput setSampleBufferDelegate:self queue:dispatch_get_main_queue()];

  NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey; 
  NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA];

  NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key];

  [captureOutput setVideoSettings:videoSettings]; 
  self.captureSession = [[[AVCaptureSession alloc] init] autorelease];
  self.captureSession.sessionPreset = AVCaptureSessionPresetMedium; // 480x360 on a 4

    if([self.captureSession canAddInput:captureInput])
    {
        [self.captureSession addInput:captureInput];
    }
    else
    {
        NSLog(@"ERROR - cannot add input");
    }
    if([self.captureSession canAddOutput:captureOutput])
    {
        [self.captureSession addOutput:captureOutput];
    }
    else
    {
        NSLog(@"ERROR - cannot add output");
    }

  [captureOutput release];

  if (!self.prevLayer)
  {
      [self.prevLayer release];
  }
  self.prevLayer = [AVCaptureVideoPreviewLayer layerWithSession:self.captureSession];

  // NSLog(@"prev %p %@", self.prevLayer, self.prevLayer);
  self.prevLayer.frame = self.view.bounds;
  self.prevLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
  [self.view.layer addSublayer: self.prevLayer];

  [self.captureSession startRunning];
#endif
} 
```

也许你们知道什么是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:30:10.683

我不明白你的问题。如果应用程序在后台/不活动，当然它不能工作。你应该说清楚。

# extjs - ExtJS - 依赖组合框

> ID：12859302
> 
> 赞同：2
> 
> 时间：2012-10-12T12:40:27.610
> 
> 标签：extjs, combobox

我正在尝试制作一个组合框，该组合框依赖于具有默认值的其他组合框，但进入组合框的侦听器必须加载自身的数据。使用`this.store.loadData(todoItems)`with`todoItems`作为四个位置的数组时出现问题。

这是商店：

```
var cmb_items = new Ext.data.SimpleStore({
        fields : ['itemId', 'item'],
        data   : itemsMenu
}); 
```

我不知道为什么。这是我的代码，有人可以帮我吗？

```
{    
    xtype          : 'combo',
    store          : cmb_items,
    hiddenName     : 'id_item',
    valueField     : 'id_item',
    mode           : 'local',
    allowBlank     : false,
    value          : nombreItem,
    fieldLabel     : 'items',
    disabled       : true,
    name           : 'items',
    triggerAction  : 'all',
    emptyText      : 'Seleccione un item',
    editable       : false,
    id             : "items",
    anchor         : '90%',
    displayField   : 'item',
    listeners      : {
                select: function () {
                    idSistema = Ext.getCmp("sistemas").getValue();  
                    selectedMenu = Ext.getCmp("menus").getValue();
                    todoItems = getItemsMenu(selectedMenu,idSistema);
                    //alert(todoItems)
                    this.store.loadData(todoItems);
                    idItem     = this.getValue();

                        alert(idItem);          // RETURN UNDEFINED

                    for(i=0;i<this.store.getCount();i++){
                         if(todoItems[i][0]==idItem){
                             nombreItem = todoItems[i][1];
                             outItem    = todoItems[i][2];
                         }
                     }
            }                                    
             }
}, 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:04:02.050

我对代码不太清楚，但是如果您正在寻找组合取决于另一种方式，请尝试我的示例。

```
 var countryStore = new Ext.data.SimpleStore({
        fields: ['alpha2code','name'],
        data: [["BE","Belgium"],["BR","Brazil"],["BG","Bulgaria"]]
    });   

    function getState(stCode){
        var data=[];  
        switch(stCode){
            case 'BE':
                data=[["BE","Belgium1"],["BR","Brazil1"],["BG","Bulgaria1"]];
                break;

            case 'BR':
                data=[["BE","Belgium2"],["BR","Brazil2"],["BG","Bulgaria2"]];
                break;

            case 'BG':
                data=[["BE","Belgium3"],["BR","Brazil3"],["BG","Bulgaria3"]];
                break;
        }
        return data;  
    };

    var statesStore = new Ext.data.SimpleStore( {
        fields: ['statecode','name']  
    });

    var stateForm = new Ext.form.ComboBox({
        fieldLabel : 'Country',
        id : 'countryCombo',
        name : 'country',
        msgTarget : 'side',
        triggerAction : 'all',
        lazyRender : true,
        store : countryStore,
        mode: 'local',
        valueField : 'alpha2code',
        emptyText : 'Create or Select an partment',
        displayField : 'name',
        editable : true,
        listeners:{
            'select': function(combo,value,index){ 
                debugger;
                var input = combo.getValue();           
                var stateCombo=Ext.getCmp('statesCombo');
                //stateCombo.clearValue();
                //stateCombo.store.baseParams.countryID=input;
                stateCombo.store.loadData(getState(input));
            }
        }
    });

    var stateForm1 = new Ext.form.ComboBox({
        fieldLabel : 'States',
        id : 'statesCombo',
        name : 'states',
        mode: 'local',
        msgTarget : 'side',
        triggerAction : 'all',
        lazyRender : true,
        store : statesStore,
        valueField : 'statecode',
        emptyText : 'Create or Select an Department',
        displayField : 'name',
        editable : true
    });

    var formPanel = new Ext.form.FormPanel({
        title: 'World',
        labelWidth: 120,
        width: 350,
        padding: 10,
        items:[stateForm,stateForm1]
    });

    formPanel.render(document.body); 
```

# c# - 实体框架中的 SaveChanges 与 AcceptAllChanges

> ID：12859304
> 
> 赞同：23
> 
> 时间：2012-10-12T12:40:32.877
> 
> 标签：c#, entity-framework

`_context.SaveChanges`和之间的区别`_context.AcceptAllChanges()`是`AcceptAllChanges()`从数据库重新加载数据或回滚（丢弃）用户在不使用时所做的更改`SaveChanges()`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-12T12:42:18.610

[ObjectContext.AcceptAllChanges 方法 - MSDN](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.acceptallchanges.aspx)

> 如果调用了[SaveChanges](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.savechanges.aspx)方法并且 未指定[AcceptAllChangesAfterSave ，则用户必须调用 AcceptAllChanges 方法。](http://msdn.microsoft.com/en-us/library/system.data.objects.saveoptions.aspx)AcceptAllChanges 方法在事务失败并且用户想要重试的情况下很有用。

您可能会看到：http: [//blogs.msdn.com/b/alexj/archive/2009/01/11/savechanges-false.aspx](http://blogs.msdn.com/b/alexj/archive/2009/01/11/savechanges-false.aspx)

> 如果您调用 SaveChanges() 或 SaveChanges(true)，EF 只是假设如果它的工作正常完成，那么一切正常，因此它将丢弃它一直在跟踪的更改，并等待新的更改。
> 
> 不幸的是，如果事务中的其他地方出现问题，因为 EF 丢弃了它正在跟踪的更改，我们无法恢复。
> 
> 这就是 SaveChanges(false) 和 AcceptAllChanges() 的用武之地。
> 
> SaveChanges(false) 告诉 EF 执行必要的数据库命令，但保留更改，以便在必要时重播它们。
> 
> 现在，如果更广泛的事务失败，您可以重试 EF 特定位，并再次调用 SaveChanges(false)。或者，您可以通过状态管理器记录失败的内容。
> 
> 一旦更广泛的事务成功，您只需手动调用 AcceptAllChanges()，并且正在跟踪的更改将被丢弃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:44:20.470

从使用 Microsoft .Net Framework 4 访问数据一书中：

> 使用实体框架时，当您在 ObjectContext 对象上调用 SaveChanges 方法时，会在事务中自动处理向数据库提交的更改。另外，如果更新时没有抛出异常，则会自动调用 AcceptAllChanges 方法，这会将所有对象的状态重置为 Unchanged。尽管 SaveChanges 方法是在事务中执行的，但如果您需要在同一事务中执行其他操作，则可能需要创建自己的事务

# hibernate - Hibernate：如何禁用脏对象的自动保存？

> ID：12859305
> 
> 赞同：27
> 
> 时间：2012-10-12T12:40:33.353
> 
> 标签：hibernate, transactions

我很惊讶地发现 Hibernate 在事务结束时会自动保存脏对象，而无需显式调用类似

```
dao.save(object) 
```

我想到了[这个线程描述的情况](https://stackoverflow.com/questions/8190926/transactional-saves-without-calling-update-method)

我的问题是：有没有办法禁用这种行为？乍一看，这种自动保存似乎相当危险，因为您需要知道哪些对象已连接到会话，哪些未连接到会话，并且似乎很容易错误地保存某些内容。你能告诉我这种自动保存方法的好处是什么吗？我几乎看不到任何东西。我想总是明确地调用 dao.save(object) 来更新任何东西。

我听说过一种可能的解决方法，即在 sessionFactory 上使用 entityInterceptor。这个自定义 entityInterceptor 将覆盖 findDirty 方法，永远不会找到任何脏东西，但在这种情况下，我想 dao.save 也不会工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-07T10:13:55.597

我同意，你不应该手动冲洗。我的 webapp 开发者经验说 FlushMode 应该设置为“AUTO”。但有时我需要禁用脏检查（用于验证数据、验证数据库中的数据以及表单或服务返回的数据）。为此，我通过更改 FLUSHMODE 创建了一个特殊类并禁用了脏检查：

```
@Component
public class ValidateRefPaysService implements IValidateRefPaysService {

    ...

    @Autowired
    @Qualifier("sessionFactory")
    private SessionFactory sessionFactory;

    @Override
    @Transactional(readOnly=true) 
    public void validate(RefPays refPays) throws BusinessException {

        try {
            sessionFactory.getCurrentSession().setFlushMode(FlushMode.MANUAL);

            if ( refPays.getId() != null ) {
                RefPays refPaysBase = refPaysDAO.getById(refPays.getId());
                if ( refPaysBase != null )  {
                    throw new BusinessException("id already exists in database.", "RefPays.savePays.id.alreadyexist", "refPays.savePays.id.alreadyexist");
                }
            }
        } finally {
            sessionFactory.getCurrentSession().setFlushMode(FlushMode.AUTO);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T20:34:53.157

要禁用自动状态管理，请将会话上的刷新模式设置为手动。然后，您可以调用 session.flush() 来实际写出与您的会话关联的所有脏实体。

# java - 休眠时出现 ProjectionList 错误：无法转换为 [Ljava.lang.Object;

> ID：12859306
> 
> 赞同：3
> 
> 时间：2012-10-12T12:40:38.003
> 
> 标签：java, hibernate, criteria-api, projection

我的对象的返回列表有问题。我正在使用实体类，`@EmbeddedId`正如您在下面的代码中看到的那样，有两行具有相似的文本：`id.*`.

```
Criteria cr = createCriteria(true);
cr.add(Restrictions.eq("id.qwerty", "QWERTY"));

ProjectionList projectionList = Projections.projectionList();
projectionList.add(Projections.property("id.qwerty"));
projectionList.add(Projections.property("text"));
projectionList.add(Projections.property("id.property"));
cr.setProjection(projectionList);
cr.setResultTransformer(Transformers.aliasToBean(My.class));

List<My> myList = (List<My>) cr.list();

return myList; 
```

在行`List<My> messagesList = (List<My>) cr.list();`发生以下错误。

```
java.lang.ClassCastException: my.package.dao.domain.My cannot be cast to [Ljava.lang.Object;
at org.hibernate.cache.StandardQueryCache.put(StandardQueryCache.java:104)
at org.hibernate.loader.Loader.putResultInQueryCache(Loader.java:2274)
at org.hibernate.loader.Loader.listUsingQueryCache(Loader.java:2206)
at org.hibernate.loader.Loader.list(Loader.java:2164)
at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1706)
at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347) 
```

我该如何定义`Criteria`或`ProjectionList`在这种情况下？

**编辑**

```
@javax.persistence.Entity
@Table(name = "my_table")
public class My extends MyEntity<MyPK> {

   @EmbeddedId
   private MyPK id;

   @Column(name = "text", nullable = false)
   protected String text;

   @ManyToOne
   @JoinColumn(name = "property", nullable = false, insertable = false, updatable = false)
   protected Option option;

   @Override
   public MyPK getId() {
       return id;
   }

   @Override
   public void setId(MyPK id) {
       this.id = id;
   }

   //getters and setter
   //equlas and hashCode
} 
```

和`MyPK`类：

```
@Embeddable
public class MyPK implements Serializable {

   @Column(name = "qwerty")
   protected String qwerty;

   @Column(name = "property")
   protected String property;

   //constructors, getters and setters
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T12:56:11.957

如果您在 Criteria 上使用 setProjection()，则 list() 方法将返回`List<Object>`or类型`List<Object[]>`，具体取决于您添加到投影列表中的属性数量。

这意味着您必须自己创建 My 实例。

```
 List<My> myList = new ArrayList<My>();
    for (Object[] row : cr.list()) {
         My m = new My();
         m.setQwerty((String) row[0]);
         // set the rest of the properties
         myList.add(m);
    } 
```

我相信您看到的 ClassCastException 是因为该`list()`方法正在返回实例，但您已通过设置 ResultTransformer`Object`明确要求实例`My`

[类似的问题，由 JBNizet 回答](https://stackoverflow.com/questions/9605821/aliastobeanresulttransformermydto-class-fails-to-instantiate-mydto)

# php - 删除具有特定类的所有 div

> ID：12859315
> 
> 赞同：0
> 
> 时间：2012-10-12T12:41:04.380
> 
> 标签：php, html

我有一个 HTML 字符串，我想从中删除所有类为“toremove”的 DIV。

这在客户端使用 jQuery 等很简单，但我想在服务器端使用 PHP。

一个简单的 aegular 表达式是行不通的，因为 div 可能是嵌套的……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:57:42.977

您可以使用 DOM 对象和 xPath 来删除 DIV。

```
/** UNTESTED **/
$doc = new DOMDocument();
$doc->loadHTMLFile($file);

$xpath = new DOMXpath($doc);
$elements = $xpath->query("*/div[@class='yourClasshere']");

foreach($elements as $e){
    $doc->removeChild($e);
}
$doc->saveHTMLFile($file); 
```

如果您愿意，可以用 load from 和 save to string 替换从文件加载和保存到文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:18:46.053

这是我用来从页面中删除内容的代码片段：

```
/**
 * A method to remove unwanted parts of an HTML-page. Can remove elements by 
 * id, tag name and/or class names. 
 *
 * @param string $html The HTML to manipulate
 * @param array $partsToRemove An array of arrays, with the keys specifying 
 * what type of values the array holds. The following keys are used:
 * 'elements' - An array of element ids to remove from the html 
 * 'tags' - An array of tag names to remove from the html
 * 'classNames' - An array of class names. Each tag that contains one of the 
 * class names will be removed from the html.
 *
 * Also, note that descendants of the removed document will also be removed.
 * 
 * @return string The manipulated HTML content
 *
 * @example removeHtmlParts($html, array (
 *  'elements' => array ('headerSection', 'nav', 'footerSection'),
 *  'tags' => array ('form'),
 *  'classNames' => array ('promotion')
 *  ));
 */ 
```

--

```
public function removeHtmlParts ($html, array $toRemove = array())
{
$document = new \DOMDocument('1.0', 'UTF-8');
$document->encoding = 'UTF-8';
// Hack to force DOMDocument to load the HTML using UTF-8.
@$document->loadHTML('<?xml encoding="UTF-8">' . $response->getBody());
$partsToRemove = array ();
if(isset($toRemove['elements']))
{
  $partsToRemove['elements'] = $toRemove['element'];
}
if(isset($toRemove['tags']))
{
  $partsToRemove['tags'] = $toRemove['tags'];
}
if(isset($toRemove['classNames']))
{
  $partsToRemove['classNames'] = $toRemove['classNames'];
}

foreach ($partsToRemove as $type => $content)
{
    if($type == 'elements')
    {
        foreach ($content as $elementId)
        {
            $element = $document->getElementById($elementId);
            if($element)
            {
                $element->parentNode->removeChild($element);
            }
        }
    }
    elseif($type == 'tags')
    {
        foreach($content as $tagName)
        {
            $tags = $document->getElementsByTagName($tagName);
            while($tags->length)
            {
                $tag = $tags->item(0);
                if($tag)
                {
                    $tag->parentNode->removeChild($tag);
                }
            }
        }
    }
    elseif($type == 'classNames')
    {
        foreach ($content as $className)
        {
            $xpath = new \DOMXPath($document);
                    $xpathExpression = sprintf(
                       '//*[contains(@class,"%1")]', 
                       $className
                    ); 
            $domNodeList = $xpath->evaluate($xpathExpression);
            for($i = 0; $i < $domNodeList->length; $i++)
            {
                $node = $domNodeList->item($i);
                if($node && $node->parentNode)
                {
                    $node->parentNode->removeChild($node);
                }
            }
        }
    }
}
return $document->saveHTML();
} 
```

**笔记：**

*   *此代码未经过适当的单元测试，可能在边缘情况下包含错误*
*   *应该将此方法重构为一个类，并将方法的内容拆分为单独的方法以方便测试。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:32:12.567

基于 jebbench 的简短回答和 PatrikAkerstrand 的长回答，我创建了一个可以完全解决我的问题的中型函数：

```
/**
 * remove, from the given xhtml string, all divs with the given class.
 */
function remove_divs_with_class($xhtml, $class) {
    $doc = new DOMDocument();

    // Hack to force DOMDocument to load the HTML using UTF-8:
$doc->loadHTML('<?xml encoding="UTF-8">'.$xhtml); 

    $xpath = new DOMXpath($doc);
    $elements = $xpath->query("//*[contains(@class,'$class')]");

    foreach  ($elements as $element)
        $element->parentNode->removeChild($element);

    return $doc->saveHTML();
}

/* UNIT TEST */
if (basename(__FILE__)==basename($_SERVER['PHP_SELF'])) {
    $xhtml = "<div class='near future'>near future</div><div>start</div><div class='future'>future research</div><div class='summary'>summary</div><div class='a future b'>far future</div>";
    $xhtml2 = remove_divs_with_class($xhtml, "future");
    print "<h2>before</h2>$xhtml<h2>after</h2>$xhtml2";
}

/* OUTPUT:

before

near future
start
future research
summary
far future

after

start
summary

*/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T12:46:44.187

永远不要尝试使用正则表达式来解析 XML/HTML。而是使用解析库。显然，PHP 的一个是[http://sourceforge.net/projects/simplehtmldom/files/](http://sourceforge.net/projects/simplehtmldom/files/)

# json - 命名空间系统中不存在 Json

> ID：12859319
> 
> 赞同：24
> 
> 时间：2012-10-12T12:41:13.327
> 
> 标签：json, asp.net-web-api, .net-4.5

在本教程中：[http](http://www.asp.net/web-api/videos/getting-started/custom-validation) ://www.asp.net/web-api/videos/getting-started/custom-validation Jon 使用

```
dynamic error = new JsonObject(); 
```

和

```
using System.Json; 
```

我猜它是这里的 JsonObject：http: [//msdn.microsoft.com/en-us/library/system.json.jsonobject](http://msdn.microsoft.com/en-us/library/system.json.jsonobject(v=vs.110).aspx) (v=vs.110).aspx位于：

*   命名空间：System.Json
*   程序集：System.Runtime.Serialization（在 System.Runtime.Serialization.dll 中）

我添加了 System.Runtime.Serialization 参考，但仍然找不到 System.Json。

我读错了微软文档吗？（我使用的是 .NET 4.5）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-13T16:17:07.477

试试这个：

```
PM> Install-Package System.Json -Version 4.0.20126.16343 
```

每： http: [//nuget.org/packages/System.Json](http://nuget.org/packages/System.Json)

有效！

如果您对如何添加输入 nuget 代码有疑问，请点击以下链接： [http ://docs.nuget.org/docs/start-here/using-the-package-manager-console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T12:45:47.180

[http://www.webcosmoforums.com/asp/32551-type-namespace-name-json-does-not-exist-namespace-system-runtime-serialization.html](http://www.webcosmoforums.com/asp/32551-type-namespace-name-json-does-not-exist-namespace-system-runtime-serialization.html)

> 您很可能缺少对 System.ServiceModel.Web 的引用

确保您的应用程序在项目属性中以 .Net 4.5 框架为目标。

System.Json 对象仅在 4.5 中可用

编辑：

使用 Nuget 安装 system.json : 'Install-Package System.Json'

[如何在没有 JSON.NET 库的情况下解析 JSON？](https://stackoverflow.com/questions/9573119/how-to-parse-json-without-json-net-library)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-11T12:06:44.300

Json 对象仅适用于 Controller 类而不适用于外部。即使我们在控制器外部引用 System.Web.MVC，我们也只能访问 JsonResult 而不能访问 Json，因为 Json 对象是 JsonResult 的受保护对象。请参阅以下文档，其中解释了，

[http://msdn.microsoft.com/en-us/library/dd504936(v=vs.118).aspx](http://msdn.microsoft.com/en-us/library/dd504936(v=vs.118).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T11:51:15.060

如果要使用其他 .Net json 序列化程序，可以使用以下内容：

1.  去管理nuget包。
2.  搜索 json.net。
3.  点击安装。

有关更多详细信息，请关注 - [http://netfx.codeplex.com/](http://netfx.codeplex.com/)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-11-25T12:24:48.060

使用 System.json 不适用于 .Net 4 框架。该库已弃用。要检查它，请尝试：

1.  去添加参考...到项目。
2.  在 .Net 选项卡上，搜索 System.json，您将找不到任何内容。

这意味着，它已被弃用。

# asp.net - ASP.NET 母版页元：resourcekey

> ID：12859320
> 
> 赞同：3
> 
> 时间：2012-10-12T12:41:13.533
> 
> 标签：asp.net, localization, master-pages

我知道我们可以在 ASP.NET 页面中使用本地化模式，这使得拥有多语言 Web 应用程序成为可能。我为母版页尝试了相同的技术，但它不起作用。我有母版页和 2 个 main.master.resx 和 main.master.de.resx 页面，然后我想从这些页面中获得 lable 文本的价值。它适用于 aspx 页面，但不适用于母版页。有什么想法或帮助吗？

代码：

```
<asp:Label ID="Label1" runat="server" Text="" meta:resourcekey="string1"></asp:Label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:47:07.057

您可以检查：

[http://www.codeproject.com/Articles/34100/Master-Page-Globalization](http://www.codeproject.com/Articles/34100/Master-Page-Globalization)

# extjs4 - ExtJS 4 实例化模型的 id 设置为 0

> ID：12859324
> 
> 赞同：0
> 
> 时间：2012-10-12T12:41:21.410
> 
> 标签：extjs4

如果我定义这样的实体：

```
Ext.define('MyApp.model.Entity', {
    extend : 'Ext.data.Model',
    fields : [ {
        name : 'id',
        type : 'int'
    } ]
}); 
```

然后实例化它并输出它的 id：

```
var entity = Ext.create('MyApp.model.Entity');
console.log(entity.getId()); 
```

我得到`0`了输出。我希望它是`undefined`。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:46:25.137

有两个可能的原因。

首先，因为您使用的`id`是字段名称。`Ext.data.Model`具有`idProperty`默认为 的配置`id`，定义要与其他字段区别对待的字段名称。该`getId`方法相当于`get(idProperty)`.

其次，因为类型`id`是`int`，在这种情况下，字段的默认值为 0（除非您使用`useNull`字段配置）。

我个人尽量避免使用`id`模型属性，因为它倾向于与几乎所有东西发生冲突。我从来没有遇到过使用类似`recordId`或类似的东西的问题。

# java - FontMetrics 返回垃圾字体下降

> ID：12859325
> 
> 赞同：1
> 
> 时间：2012-10-12T12:41:22.790
> 
> 标签：java, eclipse, swt, fontmetrics

我在 Eclipse 中遇到了一个奇怪的问题，即使经过大量搜索，在这方面也没有发现任何错误。我的问题是 [FontMetrics Class 中的句柄字段](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/FontMetrics.html#handle)。由于 API 说它依赖于平台，我对此无能为力。问题是这样的：

我必须将一些由 draw2d 小部件和连接组成的图表导出到 Word 和 PDF。到目前为止，导出功能可作为编辑器工具栏的操作使用，其中绘制图表。它一直运行良好。我所做的就是将 FigureCanvas 绘制到 SWT 图像，然后将其保存到文件中。我有可用的 API，然后将其插入 Word/PDF。现在，我需要**离线**，即无需在屏幕上实际绘制图表。我做了这样的事情来实现这一点：

```
Job job = new Job("Making DFD for " + data.getName()) {
        @SuppressWarnings("unchecked")
        @Override
        protected IStatus run(IProgressMonitor monitor) {
            final Display display = new Display();
            final Shell shell = new Shell(display);
            shell.setLayout(new FillLayout());
            Composite composite = new Composite(shell, SWT.NONE);
            try {

                imageFolder = new File(tempFolder + IOUtils.FILE_SEPARATOR + 
                        "dfd-" + (new Date()).getTime());

                composite.setLayout(new FillLayout());
                final FigureCanvas canvas = new FigureCanvas(composite);
                ArrayList<DFDFigureData> figureData = renderer.getDfdFigureDatas();
                final DFDMaker3 dfdMaker;
                dfdMaker = new DFDMaker3(canvas, "", figureData, null, false);
                Logger.println("Shell Size:", shell.computeSize(-1, -1, true));
                display.syncExec(new Runnable(){
                    public void run() {
                        dfdMaker.makeDFD();
                        shell.setSize(-1, -1);
                        dfdMaker.selectNode(-1, display);
                    }
                });
                Logger.println("Shell Size:", shell.computeSize(-1, -1, true));

                /* Image Export Stuff Goes here */
                return Status.OK_STATUS;
            } catch (Exception e) {
                Logger.println("Error in DFD Creation Job", e.toString());
                return Status.CANCEL_STATUS;
            } finally {
                composite.dispose();
                shell.dispose();
                display.dispose();
            }
        }
    };
    job.setPriority(Job.SHORT);
    job.schedule(); 
```

当我第一次运行它时，两个 Log 语句都告诉我一个好故事：

* * *

> 外壳尺寸::: 点 {72, 98} 外壳尺寸::: 点 {1216, 524}

* * *

但是当我第二次运行相同的代码时，没有关闭应用程序，我得到：

* * *

> 外壳尺寸::: 点 {72, 98} 外壳尺寸::: 点 {1216, **1945541082** }

* * *

外壳的大高度值破坏了一切。经过激烈的调试，我发现第二次使用的 FlowPage 得到了错误的 Font 下降值。[FontMetrics.getDescent()](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/FontMetrics.html#getDescent%28%29)方法返回一个随机大值。

我不确定该如何进行。我已经处置了我第一次使用的所有资源。Display、Shell、Composite、Canvas，甚至 GC 和 SWTGraphics。谁能告诉我它是否是一个错误？如果没有，知道如何在这里找到问题吗？

# typescript - TypeScript 的 Require.js 文本插件功能

> ID：12859330
> 
> 赞同：0
> 
> 时间：2012-10-12T12:41:47.193
> 
> 标签：typescript

我正在使用 TypeScript 构建一个 Backbone 应用程序，我想将我的模板放在单独的 .html 文件中（用于语法等）。我现在不使用 Require.js，那我该如何加载文本文件。我想我必须为此编写一个函数，但是 TypeScript 中是否已经有一些可用的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:10:11.543

使用 typescript 编译器，您只能编译 Typescript 文件。将代码保存在`html`文件中将不允许您编译代码。

如果您想从其他 Typescript 文件加载代码，编译器当前支持`commonjs`和`amd`样式化模块的导入。您可以通过指定`tsc --module commonjs`或告诉编译器使用哪种类型的模型`tsc --module amd`。

Typescript 支持两种不同类型的模块，即`external`模块`internal`。根据您使用的模块类型，导入它的工作方式不同。看看语言规范的第 9 节和[这个](https://stackoverflow.com/questions/12841557/whats-the-difference-between-internal-and-external-modules-in-typescript)或[这个](https://stackoverflow.com/questions/12845810/typescript-module-namespacing-in-multiple-files/12846385#12846385)答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:11:20.847

有一个[requirejs 插件](http://requirejs.org/docs/api.html#text)用于加载非代码依赖项，在这种情况下，一些模板存储在单独的 html 文件中。

[github上的requirejs/text](https://github.com/requirejs/text/blob/master/README.md)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T15:33:42.080

有人在[https://github.com/iammerrick/require-ts](https://github.com/iammerrick/require-ts)写了类似的东西，尽管您可能需要根据您的需要对其进行调整。

# php - Yii 用户在 15-30 分钟后退出，尽管会话超时设置为至少 1 天

> ID：12859333
> 
> 赞同：22
> 
> 时间：2012-10-12T12:42:03.367
> 
> 标签：php, session, cookies, yii, session-timeout

我在下面包含了我们的 Yii 配置文件的相关部分：

```
return array(
...
    'components'=>array(
        'session' => array(
            'timeout' => 86400,
        ),
        'user'=>array(
            'allowAutoLogin' => true,
            'autoRenewCookie' => true,
            'authTimeout' => 31557600,
        ),
    ...
    ),
...
); 
```

我也进入了 php.ini 并进行了设置`session.gc_maxlifetime = 86400`，但这仍然没有解决问题。

目前，我完全不知道还有什么可能导致它在大约 15-30 分钟不活动后超时并注销用户。理想情况下，用户应该保持登录状态至少一天不活动（在关闭浏览器窗口之后，允许浏览器首选项）。

我搜索了谷歌、Yii 和堆栈溢出，但找不到任何我忽略的东西……但显然我忽略了一些东西。如果有人可以帮助我，我将不胜感激。

* * *

请求了我们用于登录用户的典型代码示例，其中包括：

```
$identity = new UserIdentity('facebook', $id, $user->name, $user->email);
$loggedIn = Yii::app()->user->login($identity);
$this->subscriptionChecker->updateCurrentUserSubscribed(); 
```

这是非常典型的任何时候`Yii::app()->user->login()`被称为

* * *

在 Chrome 中，以下是我为该网站拥有的 cookie 及其到期时间（在清除所有 cookie 并登录后）：

```
PHPSESSID expires When the browsing session ends

// I'm informed these are set by google analytics  
__utma created Friday, 12 October 2012 14:05:31 expires Sunday, 12 October 2014 14:05:31

__utmb created Friday 12 October 2012 14:05:31 expires Friday 12 October 2012 14:35:31,

__utmc created Friday, 12 October 2012 14:05:31 expires When the browsing session ends

__utmz created Friday 12 October 2012 14:05:31 expires Saturday 13 April 2013 02:05:31  
// end google analytics 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T14:11:34.233

[http://www.yiiframework.com/doc/api/1.1/CWebUser#login-detail](http://www.yiiframework.com/doc/api/1.1/CWebUser#login-detail)

感谢 Arfeen 的帮助，他为我指明了正确的方向，除非你设置了第二个参数，否则`Yii::app()->user->login()`Yii 不会使用持久 cookie，因为第二个参数默认为 0。这个默认的 0 值会覆盖你可能的任何其他值已经设置与超时有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-14T11:46:31.230

我遇到了同样的问题，即使我使 authTimeout 3600 * 24 ( 24 小时 ) 用户仍然在大约 30 分钟内注销。我发现在 php.ini 上有一个选项：

> session.gc_maxlifetime

默认这个选项是 24 分钟，所以我改变了我需要的

> session.gc_maxlifetime = 86400

24小时。为我解决了问题。

希望这可以帮助某人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-03T07:22:57.867

试试这个：第一个当你登录时，你可以设置**setState** 这个：

```
yii::app()->user->setState('userSessionTimeout', time() + Yii::app()->params['sessionTimeoutSeconds']); 
```

添加这些是文本 companents.controller.php

```
 public function beforeAction(){
            // Check only when the user is logged in
            if ( !Yii::app()->user->isGuest)  {
               if ( yii::app()->user->getState('userSessionTimeout') < time() ) {
                   // timeout
                   Yii::app()->user->logout();
                   $this->redirect(array('/site/login'));  //
               } else {
                   yii::app()->user->setState('userSessionTimeout', time() + Yii::app()->params['sessionTimeoutSeconds']) ;
                   return true; 
               }
            } else {
                return true;
            }
        } 
```

并将它们添加到配置 main.php 文件中：

> 'params'=>array('sessionTimeoutSeconds'=>1800, // 30 分钟 ),

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-28T18:10:58.827

**对于 Yii2**

此解决方案在登录会话 cookie 后将过期时间设置为 7 天后：

```
'components' => [
    'session' => [
        'class' => 'yii\web\Session',
        'cookieParams' => ['lifetime' => 7 * 24 *60 * 60]
    ], 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-06-23T16:13:42.793

**Yii2版本**

在您的 /config/params.php 中以秒为单位设置超时：

```
'sessionTimeoutSeconds' => '1800', 
```

在您的 controllers/SiteController.php actionLogin() 方法中添加以下内容：

```
// Set the user session timeout
Yii::$app->session->set('userSessionTimeout', time() + Yii::$app->params['sessionTimeoutSeconds']); 
```

还要在 SiteController.php 中添加 beforeAction 方法

```
public function beforeAction($action)
{

    if (!parent::beforeAction($action)) {
        return false;
    }

    // Check only when the user is logged in
    if ( !Yii::$app->user->isGuest)  {
        if (Yii::$app->session['userSessionTimeout'] < time()) {
            Yii::$app->user->logout();
        } else {
            Yii::$app->session->set('userSessionTimeout', time() + Yii::$app->params['sessionTimeoutSeconds']);
            return true; 
        }
    } else {
        return true;
    }
} 
```

在您的views/layouts/main.php：头部DOM之间添加自动刷新标题以将应用程序发送回登录视图。

```
<? if (!Yii::$app->user->isGuest) { ?>
            <meta http-equiv="refresh" content="<?php echo Yii::$app->params['sessionTimeoutSeconds'];?>;"/>
<? } ?> 
```

# java - Eclipse 找不到 Spring 配置文件

> ID：12859342
> 
> 赞同：3
> 
> 时间：2012-10-12T12:42:32.960
> 
> 标签：java, spring, spring-mvc, dependency-injection

我在 Spring 中弄湿了我的双手，并将 Eclipse 与 Spring 一起使用。我用 eclipse 编写了一个非常简单的 Spring 应用程序来在 bean 中注入一个属性。但是，当我运行我的应用程序时，Spring 抛出异常，似乎 Spring 无法找到 Spring 配置文件。下面是堆栈跟踪——

```
INFO: Loading XML bean definitions from class path resource [Beans.xml]
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [Beans.xml]; nested exception is java.io.FileNotFoundException: class path resource [Beans.xml] cannot be opened because it does not exist
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302) 
```

我尝试了以下方法——在 ClassPathXmlApplicationContext 方法中给出完整路径，例如——

```
ApplicationContext context = new ClassPathXmlApplicationContext("C:/Users/devshankhasharm/workspace/FinalPowerShell/src/src/main/Beans.xml"); 
```

我还更新了 Windows 中的 ClassPath 变量以添加我的 spring 配置文件的路径。但没有任何效果。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T12:48:33.897

试试这个

```
ApplicationContext context = new ClassPathXmlApplicationContext("classpath*:Beans.xml"); 
```

当然，您`Beans.xml`必须在类路径中。

**更新**或者也许

```
ApplicationContext context = new ClassPathXmlApplicationContext("file:src/main/Beans.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:47:59.547

Beans.xml 应该在类路径中。您不能为 ClassPathXmlApplicationContext 提供 xml 文件的完整物理路径。请检查 Beans.xml 是否存在于 Eclipse 的构建路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:59:01.817

当您为 Beans.xml 示例使用完整文件路径时，请使用

```
ApplicationContext context = new GenericXmlApplicationContext("C:/Users/devshankhasharm/workspace/FinalPowerShell/src/src/main/Beans.xml"); 
```

但不建议这样做。为此，请使用 ClassPathXmlApplicationContext。

然后将 Beans.xml 移动到类路径中。最简单的方法是如果不使用 Maven 则将其移动到 java 源的根目录，如果使用 Maven，则将其移动到 src/main/resources

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:04:08.827

如果不是很麻烦，请尝试使用[Spring Tool Suite](http://www.springsource.org/sts)。它是一个基于 Eclipse 的 Spring 友好 IDE，因此您不必依赖 spring/maven 插件配置。您所要做的就是创建一个 Spring 项目而不是 Java 项目，剩下的所有设置都将为您处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T16:23:28.807

如果您使用的是 Spring Tool Suite (STS)，则可能是在您创建 Maven 项目时，src/main/resources 目录配置为“Excluded: *.* ”。换句话说，STS 将您的 src/main/resources 目录设置为默认将其所有内容排除在输出之外。

如何修复它：

1.  项目属性 (Alt+Enter) -> Java 构建路径 -> 源
2.  在 src/main/resources 上，您可能会看到“Excluded: *.* ”
3.  选择此项并单击编辑...
4.  删除*.* 排除模式
5.  单击确定。瞧！

# mongodb - 在 MongoDB 中逐日查询总用户数

> ID：12859343
> 
> 赞同：3
> 
> 时间：2012-10-12T12:42:39.877
> 
> 标签：mongodb, mongoose

我有“用户”集合，我想要每天的总用户数，例如：

```
01.01.2012 -> 5
02.01.2012 -> 9
03.01.2012 -> 18
04.01.2012 -> 24
05.01.2012 -> 38
06.01.2012 -> 48 
```

我为每个用户创建了 Attritube。你能帮我查询一下吗？

```
{ 
  "_id" : ObjectId( "5076d3e70546c971539d9f8a" ),
  "createdAt" : Date( 1339964775466 ),
  "points" : 200,
  "profile" : null,
  "userId" : "10002"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-31T07:17:45.157

这适用于每日计数数据

**我得到的输出：**

```
30/3/2016   4
26/3/2016   4
21/3/2016   4
12/3/2016   12
14/3/2016   18
10/3/2016   10
9/3/2016    11
8/3/2016    19
7/3/2016    21 
```

**脚本：**

```
model.aggregate({
  $match: {
    createdAt: {
      $gte: new Date("2016-01-01")
    } 
  } 
}, { 
  $group: {
    _id: { 
      "year":  { "$year": "$createdAt" },
      "month": { "$month": "$createdAt" },
      "day":   { "$dayOfMonth": "$createdAt" }
    },
    count:{$sum: 1}
  }
}).exec(function(err,data){
  if (err) {
    console.log('Error Fetching model');
    console.log(err);
  } else {
    console.log(data);
  }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T13:24:17.727

您有几个选项，按性能顺序排列：

1.  在单独的聚合文档中维护计数。每次添加用户时，您都会更新当天的计数器（因此，每天在 users.daycounters 集合中都有其唯一的计数器文档）。这很容易成为最快的方法，并且规模最好。
2.  在 2.2 或更高版本中，您可以使用聚合框架。此处记录了与您的用例接近的示例。寻找 $group 运算符： http: [//docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)
3.  您可以使用 map/reduce 框架：[http](http://www.mongodb.org/display/DOCS/MapReduce) ://www.mongodb.org/display/DOCS/MapReduce 。这与分片兼容，但由于 JavaScript 上下文的使用而相对较慢。对于像这样简单的事情也不是很简单。
4.  您可以使用此处记录的 group() 运算符：[http](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group) ://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group 。由于这在分片环境中不起作用，并且由于使用单线程 JavaScript 上下文而通常很慢，因此不建议这样做。

# sas - 使用 FIRST.var 选择记录组

> ID：12859347
> 
> 赞同：0
> 
> 时间：2012-10-12T12:42:44.037
> 
> 标签：sas

我的数据集是：

```
ID     AGE

1      65
1      66
1      67
1      68
1      69
1      70
1      71
2      70
2      71
2      72
3      68
3      69
3      70

 [...] 
```

我的（基本）问题是：这是获取 ID 记录以 开头的数据集的最直接方法`65 <= AGE <= 68`？（在上面的例子中，我想得到前 7 行和最后 3 行）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:52:33.480

只是为了有另一种方法......

```
proc sql;
  delete from input_dataset I where not exists 
    (select 1 from input_dataset D where I.id=D.id having 65 le min(age) le 68);
quit; 
```

如果要创建新数据集，相同的基本查询将作为 SELECT 的一部分工作，反转 NOT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:46:55.447

```
data input_dataset;
input ID     AGE;
cards;
1      65
1      66
1      67
1      68
1      69
1      70
1      71
2      70
2      71
2      72
;
run;

proc sort data=input_dataset out=sorted;
by ID;
run;

data work.first_age65to68;
  set sorted;
  retain keepit 0;
  by ID;
  if first.ID then do;
      if AGE ge 65 and AGE le 68 then keepit=1;
      else keepit=0;
  end;
  if keepit;
  drop keepit;
run; 
```

# python - 抑制 PyDev 中无法访问的错误？

> ID：12859349
> 
> 赞同：2
> 
> 时间：2012-10-12T12:42:45.603
> 
> 标签：python, eclipse, compiler-errors, pydev, unreachable-code

我有一些来自我正在学习的课程的 Python 代码，并且在一些测试特定功能支持的文件中看到错误，如果这些功能不存在，我不会尝试使用它们。就我而言，我没有可用的功能，因此不应执行条件之后的代码。

如果实际到达代码，这些部分不应显示为运行时错误。

例如：

```
def __call__(self, *args):
    if not 'SIGALRM' in dir(signal):
        return self.function(*args)
    old = signal.signal(signal.SIGALRM, self.handle_timeout)
    signal.alarm(self.timeout)
    try:
        result = self.function(*args)
    finally:
        signal.signal(signal.SIGALRM, old)
    signal.alarm(0)
    return result 
```

我在正文中收到`Undefined variable from import: SIGALRM`,等错误，但如果不支持`Undefined variable from import: alarm`该方法，则会返回该方法。`SIGALRM`

有没有办法抑制这些部分中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:00:06.420

它不是很漂亮，但是您可以通过在以下位置设置首选项来抑制所有未定义的变量（和其他）错误：

> Preferences -> PyDev -> Editor -> Code Analysis -> Undefined -> Undefined Variable From Import -> Ignore

或者，在每行末尾添加注释，例如：

`#@UnresolvedImport`

`#@UnusedVariable`

还有其他一些你可以使用自动完成进行测试的，应该是不言自明的。

以下是如何选择性地抑制问题代码中的错误：

```
def __call__(self, *args):
    if not 'SIGALRM' in dir(signal):
        return self.function(*args)
    old = signal.signal(signal.SIGALRM, self.handle_timeout) #@UndefinedVariable
    signal.alarm(self.timeout) #@UndefinedVariable
    try:
        result = self.function(*args)
    finally:
        signal.signal(signal.SIGALRM, old) #@UndefinedVariable
    signal.alarm(0) #@UndefinedVariable
    return result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:51:02.307

用`getattr`and`hasattr`代替怎么样？可能类似于以下内容：

```
def __call__(self, *args):
    if not hasattr(signal, 'SIGALRM'):
        return self.function(*args)

    sigalrm = getattr(signal, 'SIGALRM')
    alarm = getattr(signal, 'alarm')

    old = signal.signal(sigalrm, self.handle_timeout)
    alarm(self.timeout)
    try:
        result = self.function(*args)
    finally:
        signal.signal(sigalrm, old)
    alarm(0)
    return result 
```

# android - MemoryInfo.availMem 不断减少

> ID：12859354
> 
> 赞同：1
> 
> 时间：2012-10-12T12:43:21.353
> 
> 标签：android, memory, android-activity, android-memory

我的 Activity 的回调 onLowMemory() 不断被调用，因此为了调查这个问题，我在主游戏循环中编写了以下代码行：

```
ActivityManager activityManager = (ActivityManager) Activity.getActivity().getSystemService(Activity.ACTIVITY_SERVICE);
MemoryInfo mi = new MemoryInfo();
activityManager.getMemoryInfo(mi);
Log.v("Tag", "Testing mem: " + mi.availMem); 
```

日志非常有趣：availMem 不断减少。现在为了确保对象被正确销毁，II 进行了 hprof 内存转储。正如预期的那样，被销毁的对象没有显示在这些转储中。

此外，availMem 应该是整个系统可用的内存，而不仅仅是我的应用程序，这使它更加奇怪。

任何人都可以帮助我了解这里发生了什么。任何帮助将非常感激。谢谢！

# ruby-on-rails - 从 Rails 中的外部 API 捕获错误

> ID：12859355
> 
> 赞同：1
> 
> 时间：2012-10-12T12:43:27.373
> 
> 标签：ruby-on-rails, ruby, heroku, twilio

我正在构建一个简单的 Web 应用程序，它使用 Twilio 将 SMS 消息发送到手机。我想确保用户在允许尝试发送消息之前输入了完整的 10 位电话号码。

当我用小于或大于 10 位的数字对其进行测试时，在 中`heroku logs`，我看到了`Twilio::REST::RequestError (The 'To' number 1234567890 is not a valid phone number.)`。

我尝试使用`begin`/`rescue`包装器并告诉它`render text: "Try again with a valid number."`并尝试了各种`if`语句来避免错误。

我对 Ruby、Rails 和 Twilio 还很陌生，但我保证我已经阅读了我找到的所有指南。任何帮助是极大的赞赏。我的完整代码`UserController`如下：

```
 require 'twilio-ruby'
    class UsersController < ApplicationController

    def new
      @user = User.new
    end

    def create
      @user = User.new(params[:user])

      account_sid = '...'
      auth_token = '...'

      if @user.save
         render text: "Wasn't that fun? Hit the back button in your browser to give it another go!"
    begin
       client = Twilio::REST::Client.new account_sid, auth_token
           client.account.sms.messages.create(
           from: '+16035093259',
           to: @user.phone,
           body: @user.message
           )
        rescue Twilio::REST::RequestError
           render text: "Try again with a valid number."        
        end
     else
       render :new
     end
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:24:12.373

我会将 SMS 发送逻辑提取到单独的模型/控制器中，并使用后台作业来处理提交。UserController 应该只处理用户创建/修改。

脚手架：

```
$ rails g model sms_job user:references message:text phone submitted_at:datetime
$ rake db:migrate 
```

模型：

```
class SmsJob < AR::Base
  attr_accessible :user_id, :message, :phone

  belongs_to :user
  validates_presence_of :message, :phone, :user_id
  validates :phone,
      length: { min: 10 },
      format: { with: /\+?\d+/ }

  scope :unsubmitted, where(submitted_at: nil)

  TWILIO = {
    from_no:      '...',
    account_sid:  '...',
    auth_token:   '...'
  }

  # find a way to call this method separately from user request
  def self.process!
    unsubmitted.find_each do |job|
      begin
        client = Twilio::REST::Client.new TWILIO[:account_sid], TWILIO[:auth_token]
        client.account.sms.messages.create(
          from: TWILIO[:from_no],
          to:   job.phone,
          body: job.message
        )
        job.submitted_at = Time.zone.now
        job.save
      rescue Twilio::REST::RequestError
        # maybe set update a tries counter
        # or delete job record
        # or just ignore this error
      end
    end
  end
end 
```

然后控制器应该只提供将要发送 SMS 的信息：

```
# don't forget the 'resources :sms_jobs' in your routes.rb
class SmsJobsController < ApplicationController
  # index, update, destroy only for only admin?

  def new
    @sms_job = SmsJobs.new
  end

  def create
    @sms_job = current_user.sms_jobs.build params[:sms_job]
    if @sms_job.save
      redirect_to root_url, notice: "Your message is being send!"
    else
      render :new
    end
  end
end 
```

对于后台处理，看看这些优秀的[Railscasts](http://railscasts.com/?tag_id=32) :-) 如果您必须处理许多消息和/或 Twilio 的响应时间很长（尚未使用该服务），您可能需要解决一些并发问题。

# python - 如何将链表的每个点乘以数字 x？

> ID：12859356
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:43:28.753
> 
> 标签：python, linked-list

假设有一个链表，123 中的每个整数都有一个点，head 是 1，next 是 2，next 是 3，如何将每个元素乘以一个数字，比如说 3，这样新的链表指向3,6,9?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:46:19.787

```
>>> list1 = [1, 2, 3]
>>> [x * 3 for x in list1]
[3, 6, 9]
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:44:41.637

使用列表理解：

```
In [1]: lis=[1,2,3]

In [2]: [x*3 for x in lis]
Out[2]: [3, 6, 9]

In [3]: num=123

In [4]: [int(x)*4 for x in str(num)]  #convert num to a string and iterate over it
Out[4]: [4, 8, 12]

In [5]: ''.join(str(int(x)*3) for x in str(num)) #to get something like 4812
Out[5]: '4812' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:57:30.593

假设您的列表是可迭代的：

```
>>> map(lambda x: x*3, [12, 1, 42])
[36, 3, 126] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:49:22.563

算法很简单：

```
def multiply(L, x):
    if L.is_empty():
        return L
    else:
        return join(L.head * x, multiply(L.tail, x)) 
```

其中“L.head”是第一个元素，L.tail 是剩余的列表，join 是将第一个参数作为列表的第一个元素放在第二个参数中的函数（所以 join(1, [2,3]) -> [1,2,3]）。

Python 没有简单的链表作为内置类型。模块中有一个`deque`类型`collections`，它实现了双链表（并且可以像单链表一样使用）。

可能您正在实现自己的链表类（用于家庭作业）？

# css - 浏览器布局逻辑概述

> ID：12859363
> 
> 赞同：0
> 
> 时间：2012-10-12T12:44:11.047
> 
> 标签：css, browser, css-float

我试图理解非常基本的浏览器布局逻辑，但我很难将即使在非常高的水平上也准确的东西放在一起，只是描述内联元素、块元素和浮动。我看到几篇文章中使用的短语，如“正常流程”，没有定义这些术语。所以我对布局逻辑做了一个非常简短、不完整的说明。有人可以确认它是否正确，或者即使在这个高级别也有错误？谢谢你的帮助！

1.  获取下一个 html 元素。
2.  如果是内联元素，转3。如果是块元素，转4。
3.  将内联元素添加到当前内联元素堆栈。如果堆栈溢出可用的水平空间，写出一行。转到 1。
4.  如果元素是浮动的，则转到 5，否则转到 6。
5.  如果向左浮动，则添加到左侧浮动堆栈。如果浮动到右侧，则添加到右侧浮动堆栈。转到 1。
6.  写出左浮动堆栈、内联元素堆栈和右浮动堆栈并开始新的一行。在末尾用新行写出块元素。转到 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:52:24.833

您没有`position`在列表中提及，这很重要。

我认为[w3 规范的这一部分](http://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#dis-pos-flo)应该对您有所帮助。但您可能想从头[开始](http://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#normal-flow)。

# css - 为什么我的选择菜单位于其相应标签下方？

> ID：12859370
> 
> 赞同：1
> 
> 时间：2012-10-12T12:44:41.247
> 
> 标签：css

[*此链接仅适用于火狐！](http://lrroberts0122.github.com/DWS/lab6/level-1/)

基本上，我的下拉菜单在我的标签下方，当我希望他们坐在他们的标签旁边时，就像关键字部分一样。有谁知道我如何用 CSS 做到这一点？我试过漂浮；那没有用，我对定位有点警惕。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:52:13.773

尝试添加`display: inline-block`到`.styled-select`和`label`css 规则。

# mysql - 不显示与上次日期相关的数据

> ID：12859375
> 
> 赞同：0
> 
> 时间：2012-10-12T12:45:18.943
> 
> 标签：mysql

以下是查询

```
SELECT
users.userName,
rechannel.channelName,
trschedule.ContentType,
trprogram.programName,
trschedule.Description,
trschedule.startTime,
trschedule.endTime,
TIMEDIFF(trschedule.startTime,trschedule.endTime) AS Difference,
LENGTH(trschedule.Description) AS Charcter_Count,
ROUND( LENGTH(trschedule.Description)/6) AS Word_Count,
ROUND( LENGTH(trschedule.Description)/65) AS Line_Count,
trschedule.ProvinceName,
trschedule.CityName,
trschedule.AreaName,
trschedule.ContentTone,
trschedule.searchText,
trschedule.CountryName,
trschedule.transmissionDate,
trschedule.insDate
FROM users 
Inner Join trschedule ON users.userID = trschedule.insertID 
Inner Join rechannel ON rechannel.channelID = trschedule.channelID 
Inner Join trprogram ON trprogram.programID = trschedule.programID
WHERE (trschedule.insDate BETWEEN '2012-10-01' AND '2012-10-12') 
```

但结果显示从 (insertDate)2012-10-01 到 2012-10-11 没有显示 2012-10-12 的数据。

任何想法的原因是什么？？？/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:50:00.550

我认为这应该可行，只需更改最后一行：

```
WHERE (DATE(trschedule.insDate) BETWEEN '2012-10-01' AND '2012-10-12') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:50:27.563

由于您没有指定日期的时间部分，mySQL 将“2012-10-12”视为“2012-10-11”和“2012-10-12”之间的午夜。

尝试将之间替换为：

`trschedule.insDate >= '2012-10-01' AND trschedule.insDate < '2012-10-13'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:58:22.683

或者试试这个：

```
WHERE (trschedule.insDate BETWEEN '2012-10-01 00:00:00' AND '2012-10-12 23:59:59') 
```

# android - 将可聚焦视图添加到窗口管理器而不会失去背景响应能力

> ID：12859379
> 
> 赞同：5
> 
> 时间：2012-10-12T12:45:31.103
> 
> 标签：android, android-windowmanager

我有以下问题：

我想通过将视图添加到窗口管理器来创建一个工具栏，以及设备（电视）的常规设置。我的工具栏在屏幕底部可见，它是当前所选应用程序的叠加层。它具有以下参数/标志：

*   `WindowManager.LayoutParams.TYPE_SYSTEM_ALERT` - `WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH` - `WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE` - `WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL` -`PixelFormat.TRANSLUCENT`

当我单击工具栏时，它工作正常。当我点击背景时，工具栏仍在前台，后台应用程序工作正常。

当我`ListView`从工具栏填充时，问题就开始了。有了这些参数，`onClick`监听`onSelectItem`器就不会处理这些了`ListView`。当我删除`FLAG_NOT_FOCUSABLE`时，监听器开始工作，但我不能再使用后台应用程序了。我必须关闭工具栏才能专注于背景。

您有什么想法吗，如何同时使`ListView`后台应用程序响应？

提前感谢每个答案/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T17:06:17.640

这是 PixelFormat.TRANSLUCENT 的已知问题，请尝试 PixelFormat.TRANSPARENT

# ios - AvAudioRecorder 录音文件随机损坏

> ID：12859381
> 
> 赞同：3
> 
> 时间：2012-10-12T12:45:35.567
> 
> 标签：ios, cocoa-touch, avaudiorecorder

我面临 AvAudioRecorder 的问题，在随机检查时创建损坏的文件。

它创建长度为 24kb 的文件，这并非一直发生，但随机找到的文件已损坏。

我还检查了下面的链接以获取参考，因为我有类似的问题，但它对我不起作用。

[AVAudioRecorder Record 方法随机返回 NO](https://stackoverflow.com/questions/9706020/avaudiorecorder-record-method-returns-no-at-random-times)

[使用 AVAudioRecorder 看似随机的文件损坏（有时无法播放文件） - iOS](https://stackoverflow.com/questions/9704827/seemingly-random-file-corruption-using-avaudiorecorder-sometimes-the-file-cant)

下面是完整的功能代码。

```
-(IBAction)btnRecordClick:(id)sender
{
    [PlayingTimer invalidate];
    PlayingTimer = nil;

    if(isPaused==NO)
    {
        AVAudioSession *audioSession = [AVAudioSession sharedInstance];
        NSError *err = nil;
        [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];

        if(err)
        {
            // NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        }

        [audioSession setActive:YES error:&err];
        err = nil;

        if(err)
        {
            // NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        }

        //*******Working well with .wav,.caf and .mp4 files *****************
        recordSetting = [[NSMutableDictionary alloc] init];

        //this is for .wav and .caf file
        //this is for .mp4 file for iPhone 3GS/iPhone 4
        [recordSetting setValue: [NSNumber numberWithInt:kAudioFormatMPEG4AAC] forKey:AVFormatIDKey];
        [recordSetting setValue: [NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [recordSetting setValue: [NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];
        [recordSetting setValue:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
        [recordSetting setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
        [recordSetting setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

        self.strMessage = @"";
        self.strMessageType = [NSString stringWithFormat:@"Audio Message"];
        self.strFileName = [NSString stringWithFormat:@"%@.mp4", [_globalmodel stringUniqueID]];
        // NSLog(@"FileName :%@",self.strFileName);

        self.strUniqueRef = [NSString stringWithFormat:@"%@",[_globalmodel stringUniqueID]];

        NSString *soundPath;//=[NSString alloc];
        soundPath = [NSString stringWithFormat:@"%@/%@", DOCUMENTS_FOLDER,self.strFileName] ;
        NSURL *url1 = [NSURL fileURLWithPath:soundPath];

        // NSLog(@"Recording Path:%@",url1);
        err = nil;
        recorder = [[ AVAudioRecorder alloc] initWithURL:url1 settings:recordSetting error:&err];

        if(!recorder)
        {
            // NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            UIAlertView *alert =[[UIAlertView alloc] initWithTitle: @"My Easy Media"
                                                           message: @"The Recording format is not supported on your device!"
                                                          delegate: nil
                                                 cancelButtonTitle:@"OK"
                                                 otherButtonTitles:nil];
            [alert show];
            [alert release];

            return;
        }

        //prepare to record
        [recorder setDelegate:self];
        [recorder prepareToRecord];
        recorder.meteringEnabled = YES;
        BOOL audioHWAvailable = audioSession.inputIsAvailable;

        if (! audioHWAvailable)
        {
            UIAlertView *cantRecordAlert = [[UIAlertView alloc] initWithTitle: @"Warning"
                                                                      message: @"Audio input hardware not available"
                                                                     delegate: nil
                                                            cancelButtonTitle:@"OK"
                                                            otherButtonTitles:nil];
            [cantRecordAlert show];
            [cantRecordAlert release];

            return;
        }

        // start recording
        [recorder record];
        _isRecordingStarted = YES;

        // SET TIMER // START TIMER
        timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(EndRecording:) userInfo:nil repeats:YES];

        // END TO SETTING TIMER
        timerDisplayRight.hidden = NO;
        timerDisplayLeft.hidden = NO;
        timerDisplayRight.text = [NSString stringWithFormat:@"%02d:%02d", intMimute,-- intSecond]; 
        timerDisplayLeft.text = [NSString stringWithFormat:@"00:00"];
        progressView.progress = 0.0;
    }
    else
    {
        isPaused=NO;
        [recorder record];   
        _isRecordingStarted = YES;
        [btnReview setEnabled:NO];

        timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(EndRecording:) userInfo:nil repeats:YES];
        timerDisplayRight.hidden = NO;
        timerDisplayLeft.hidden = NO;
    }

    timerDisplayRight.text = [NSString stringWithFormat:@"%02d:%02d", intMimute,-- intSecond];
}

-(IBAction)btnPauseClick:(id)sender
{
    // NSLog(@"Pause Button of ActionSheet Clicked");
    [timer invalidate];
    timer = nil;
    isPaused=YES;
    [recorder pause];

    [btnPause setEnabled:NO];
    [btnRecord setEnabled:YES];
    [btnStop setEnabled:YES];
}

-(IBAction)btnStopClick:(id)sender
{
    // NSLog(@"Stop Button of ActionSheet Clicked");
    [recorder stop];

    progressView.progress = 1.0;
    // NSLog(@"Total Recording Secomd : %d", totalRecordingSecond);
    finalRecordingSecond = totalRecordingSecond;

    [btnStop setEnabled:NO];
    [btnReview setEnabled:YES];
    [btnRecord setEnabled:YES];
    [btnPause setEnabled:NO];

    timerDisplayRight.text = [NSString stringWithFormat:@"%02d:%02d", (totalRecordingSecond/60), (totalRecordingSecond % 60) ];
    timerDisplayLeft.text = [NSString stringWithFormat:@"00:00"];

    [timer invalidate];
    timer = nil;

    // REINITIALIZE TIMER VARIABLES...
    intMimute =  5;
    intTotalTime = (60 * intMimute);   
    intSecond = intTotalTime / intMimute;
    intMimute--;       

    // REINITIALIZE TIMER VARIABLES...       
    _isRecordingStarted = NO;
} 
```

请帮忙。一旦我开始录制并在大约 10 到 15 秒后，点击停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:38:56.537

我认为当任何人在单独的线程中在后台运行任何进程时会发生这种情况，同时在录制时。

# php - 去掉结尾的逗号 (PHP)

> ID：12859382
> 
> 赞同：-4
> 
> 时间：2012-10-12T12:45:35.633
> 
> 标签：php

最后一行是它不起作用的地方。我不知道应该去那里而不是`$post`.

```
 if (isset($_COOKIE["WP-LastViewedPosts"])) {
    //echo "Cookie was set.<br/>";  // For bugfixing - uncomment to see if cookie was set
    //echo $_COOKIE["WP-LastViewedPosts"]; // For bugfixing (cookie content)
    $zg_post_IDs = unserialize(preg_replace('!s:(\d+):"(.*?)";!e', "'s:'.strlen('$2').':\"$2\";'", stripslashes($_COOKIE["WP-LastViewedPosts"]))); // Read serialized array from cooke and unserialize it
    foreach ($zg_post_IDs as $value) { // Do output as long there are posts
        global $wpdb;
        $zg_get_title = $wpdb->get_results("SELECT post_title FROM $wpdb->posts WHERE ID = '$value+0' LIMIT 1");
        foreach($zg_get_title as $post) {
            echo "<a href=\"". get_permalink($value+0) . "\" title=\"". apply_filters('the_title',$post->post_title) . "\">". apply_filters('the_title',$post->post_title) . "</a> \n"; // Output link and title
            echo implode(', ', $post);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:58:56.367

根据您的评论，一种方法是：

```
foreach ($zg_get_title as $post) 
{
    $title = apply_filters('the_title', $post->post_title);
    $posts[] = '<a href="'.get_permalink($value).'" title="'.$title.'">'.$title.'</a>';
}

echo implode(', ', $posts); 
```

# c#-4.0 - 使用 2 级、3 级和 4 级数组的 Mongo DB C# 代码

> ID：12859396
> 
> 赞同：0
> 
> 时间：2012-10-12T12:45:59.803
> 
> 标签：c#-4.0, mongodb, mongodb-.net-driver

我必须使用 MongoDB 更新 C# 代码。在这里，我在下面实现了第二级更新数组（subBranchindex 采用通用列表对象）：-

```
for (var index = 0; index < subBranchindex.Count; index++)
{
    if (subBranchindex[index]._id == new ObjectId(subBranchid))
    {
        IMongoQuery queryEdit = Query.EQ("BranchOffice.SubBranchlist._id", new ObjectId(subBranchid));
        UpdateBuilder update = Update.Set("BranchOffice.$.SubBranchlist."+ index +".Name",subBranch.SubName).
        SafeModeResult s = dc.Collection.Update(queryEdit, update, 
        UpdateFlags.None, SafeMode.True);
    }
} 
```

这里是第 2 级数组，我使用（for loop 语句）来获取数组的索引值。接下来我可以使用第 3、第 4 和第 5 级数组意味着将分配超过（for 循环语句）。所以不需要[for循环语句]，也不需要在索引中分配核心编号。 `For example: ("BranchOffice.$.SubBranchlist.0.Name",subBranch.SubName)`. 这里 Don't Hardcore number[index] 0 或 1 或 2。有超过 100 条记录的“2nd”级数组。

有什么方法可以用来排列索引值吗？请解释如何解决这个问题。请用示例向我解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:04:13.900

根据您上面的示例，我对您的架构的理解如下：

*   顶级文档有一个`BranchOffice`字段
*   `BranchOffice`是一个对象数组
*   其中的每个对象`BranchOffice`都有一个`_id`,`SubName`和`SubBranchlist`字段
*   `SubBranchlist`是一个对象数组
*   里面的每个对象`SubBranchlist`都有一个`Name`字段

您的更新语句似乎将字段复制到（的同级字段）内的对象之间`SubName`的每个字段。`Name``SubBranchlist``SubName`

使用属性路径语法通过数组（例如`SubBranchlist.0.Name`）选择字段，没有“通配符”索引允许您修改`Name`数组中所有对象之间的字段。

在一些相关的说明中，[$ 位置运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)仅适用于第一个匹配的数组元素，因此您不能使用它来更新多个数组元素。在您的情况下，无论如何它都不是一个选项，因为您正在为`BranchOffice`数组字段使用位置运算符。

您可以发出一系列更新查询（针对 中的每个元素`SubBranchlist`），或者考虑使用在一个查询`$set`中修改整个`SubBranchlist`数组。using 的缺点`$set`是您需要读取和写回整个数组，如果其他并发操作也在向数组发出更新，这可能是一个问题。

# java - 使用蓝牙客户端进行 Java SE 编程

> ID：12859398
> 
> 赞同：2
> 
> 时间：2012-10-12T12:46:04.973
> 
> 标签：java, bluetooth

我尝试在 Java SE 中开发代码，几乎我已经完成了我的代码（代码正在解码 GPS nmea0183 协议）现在面临一个问题，我的 GPS 设备向我发送数据流，我的代码正在解码并以图形方式显示。

但我不确定如何通过代码接收蓝牙数据。任何人都可以告诉我如何将路径蓝牙数据提供给我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:59:24.417

您可能需要一个库来与操作系统中的蓝牙网络堆栈进行通信。看看：[http ://code.google.com/p/bluecove/](http://code.google.com/p/bluecove/)

# solr - 使用 Solr Suggester 组件返回任意字段

> ID：12859399
> 
> 赞同：1
> 
> 时间：2012-10-12T12:46:04.657
> 
> 标签：solr, autosuggest, search-suggestion

我希望使用 Solr [Suggester](http://wiki.apache.org/solr/Suggester)组件来提供搜索自动完成建议。

我在架构中创建了一个字段：

```
<fieldType name="text_autocomplete" class="solr.TextField">
    <analyzer type="index">
        <tokenizer class="solr.LowerCaseTokenizerFactory"/>
    </analyzer>
</fieldType> 
```

虽然我的 solrconfig.xml 看起来像：

```
<searchComponent class="solr.SpellCheckComponent" name="suggest">
    <lst name="spellchecker">
        <str name="name">suggest</str>
        <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
        <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
        <str name="field">title_autocomplete</str>
        <str name="buildOnCommit">true</str>
    </lst>
</searchComponent>
<requestHandler class="org.apache.solr.handler.component.SearchHandler" name="/suggest">
    <lst name="defaults">
        <str name="spellcheck">true</str>
        <str name="spellcheck.dictionary">suggest</str>
        <str name="spellcheck.count">5</str>
        <str name="spellcheck.collate">true</str>
    </lst>
    <arr name="components">
        <str>suggest</str>
    </arr>
</requestHandler> 
```

我得到了明智的结果，这很棒。但是，我想返回匹配文档的 id 字段，而不是我尝试匹配的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:16:25.547

建议组件用于为您返回与您输入的内容部分匹配的最相关的单词。然后，如果您需要具有建议列表中特定单词的文档，请向 Solr 发出另一个查询（这次是不同的搜索处理程序）并取回文档 ID。

# microsoft-metro - Metro App 无法打开 package.appxmanifest

> ID：12859400
> 
> 赞同：1
> 
> 时间：2012-10-12T12:46:06.300
> 
> 标签：microsoft-metro, visual-studio-2012, windows-store-apps

我有一个刚刚尝试为 Windows 应用商店构建的 Metro App 项目。

完成构建过程（没有错误）后，我无法再在 Visual Studio 中打开 appxmanifest xml 文件。如果我选择“存储”>“编辑应用程序清单”，我会收到以下错误消息：“值不在预期范围内。”

我现在无法在任何项目中打开任何清单文件。

有谁知道发生了什么，我需要重新安装 Visual Studio 还是发生了什么？

我很绝望，所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:35:25.720

在这里找到答案[http://forums.asp.net/t/1836720.aspx/](http://forums.asp.net/t/1836720.aspx/) - 所以我尝试从项目中删除 .suo 文件，现在它似乎工作了。我不知道为什么这会影响新创建/其他/签出的项目，确实是奇怪的行为？

（由于我是 SO 和 Visual Studio 的新手，我不知道回答我自己的问题是否被认为是不好的做法，如果是，请让我知道我应该做什么）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:50:32.077

这是一个 XML 文件，因此您可以尝试使用文本编辑器打开它，以确定某处是否设置了无效值。您始终可以与新项目中的默认 Package.appxmanifest 进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:56:45.767

您的同事可以打开您遇到问题的清单文件吗？

首先要检查的是确保您以管理员身份运行 Visual Studio。（右键单击，以管理员身份运行）尝试创建一个全新的项目。无需修改即可保存。构建它。看看您是否可以在该项目中打开清单文件。如果不能，请尝试使用 XAML/C# 项目而不是 JS，以查看特定项目类型是否有问题。

在您尝试完全重新安装之前，您可以尝试重置您的 Visual Studio 设置。确保进行备份，以防万一您发现问题后需要将环境恢复到原来的位置。

[http://msdn.microsoft.com/en-us/library/ms247075.aspx](http://msdn.microsoft.com/en-us/library/ms247075.aspx)

# listview - 如何在 ALV 中设置数据长度？

> ID：12859414
> 
> 赞同：1
> 
> 时间：2012-10-12T12:46:53.670
> 
> 标签：listview, abap, datalength

我有来自 HTEXT 的“Müşteri siparişinden müşteri siparişine nakil kaydı”文本。

HTEXT 是您知道的 25 个字符的字段。但是当我使用“WRITE”命令时，它会写成“Müşteri siparişinden müşteri siparişine nakil kaydı”。

我更改了 ALV 的代码。然后它在 ALV 中显示文本为“Müşteri siparişinden müş”。

如您所见，“Müşteri siparişinden müş”文本有 25 个字符。

如何更改屏幕上显示的数据长度？

我搜索了我的问题，但我无法集成我自己的代码。我的代码如下。

```
TABLES : mseg, mkpf, zrapor_mseg_mkpf_alv .

CONSTANTS : gc_alv_item_table TYPE slis_tabname VALUE 'GT_ALV' ,                                    "ALV itab name
            gc_program_name LIKE sy-repid VALUE 'ZRAPOR_MSEG_MKPF_ALV' , "Program name
            gc_structure_name LIKE dd02l-tabname VALUE 'ZRAPOR_MSEG_MKPF_ALV'. "Structure name

DATA : gt_alv TYPE TABLE OF zrapor_mseg_mkpf_alv WITH HEADER LINE .
DATA : gt_flcat TYPE slis_t_fieldcat_alv . "Field Catalog is defined
DATA : gwa_flcat LIKE LINE OF gt_flcat . "Field catalog's work area
DATA : gwa_flcat2 LIKE LINE OF gt_flcat .
DATA : gs_alv LIKE LINE OF gt_alv .

FORM make_field_catalog .
      CALL FUNCTION 'REUSE_ALV_FIELDCATALOG_MERGE'
        EXPORTING
          i_program_name         = gc_program_name
          i_internal_tabname     = gc_alv_item_table
          i_structure_name       = gc_structure_name
        CHANGING
          ct_fieldcat            = gt_flcat
        EXCEPTIONS
          inconsistent_interface = 1
          program_error          = 2
          OTHERS                 = 3.
      DELETE gt_flcat WHERE fieldname = 'SOBKZ'.
ENDFORM. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:09:42.127

嗯，这是一个非常奇怪的行为，因为 ALV 网格应该显示整个值。好吧，因为我只看到您帖子中的代码，所以我认为您已经编写了一个字段目录（或没有），您可以在其中指定要显示的长度。像这样的东西：

```
data wa_fieldcat like line of gt_flcat. " The fieldcat line to append

wa_fieldcat-fieldname = 'MATNR'.
wa_fieldcat-ref_fieldname = 'MATNR'.
wa_fieldcat-ref_tabname = 'MARA'.

wa_fieldcat-outputlen = 10\. " Specify the length

wa_fieldcat-col_pos = cont.
append wa_fieldcat to gt_flcat.

clear wa_fieldcat.
add 1 to cont.

... 
```

或者，您在 ALV 结构中使用的变量可能是 25 长。检查它或发布您的代码，看看会发生什么。

# jquery - 同位素大小变化动画

> ID：12859418
> 
> 赞同：1
> 
> 时间：2012-10-12T12:46:59.317
> 
> 标签：jquery, css, jquery-isotope

有没有人找到一种方法来动画最小化和最大化同位素项目之间的大小变化？

我找到了一种解决方案，但只有在所有项目的宽度/高度相同时才有效：http: [//metafizzy.co/blog/isotope-animating-item-sizes/](http://metafizzy.co/blog/isotope-animating-item-sizes/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:57:58.657

也许[这个同位素沙盒](http://www.hopfnordin.se/demo.html)展示了你的追求？

# c# - 当事先不知道派生类型时，使用 DataContractSerializer 反序列化派生类型

> ID：12859419
> 
> 赞同：5
> 
> 时间：2012-10-12T12:47:00.520
> 
> 标签：c#, deserialization, datacontractserializer

**在大会 A 中：**

```
[DataContract]    
        public class Base
        {
            [DataMember]
            public string SomeText { get; set; }
        } 
```

**在装配 B 中：**

```
internal class Helper
        {
           internal static Base Deserialize(string serializedInstanceOfTypeBase)
    {
                   DataContractSerializer serializer = new DataContractSerializer(typeof (Base));
                    XmlReader reader = XmlReader.Create(new StringReader(serializedInstanceOfTypeBase));
                    return (Base)serializer.ReadObject(reader);
    }
    } 
```

**在装配 C 中：**

```
[DataContract]    
        public class Derived : Base
        {
            [DataMember]
            public string SomeMoreText { get; set; }
        } 
```

如果我序列化一个类型的实例`Derived`并将其传递给`Helper.Deserialize()`方法，它会失败并显示`SerializationException`：

> 第 1 行位置错误 2\. 来自命名空间“http://schemas.datacontract.org/2004/07”的预期元素“Base”.. 遇到名称为“Derived”的“Element”，命名空间“http://schemas.datacontract” .org/2004/07'。

**我怎样才能摆脱这个问题？**

我知道该`KnownType`属性，但是在程序集 A 和 B 中编码时，我绝对不知道它的派生类型。所以我不能使用那个解决方案。

我的产品设计更复杂，我不能在这里完全发布。`Helper.Desrialize()`方法只是得到一个`string`参数。`Base`即使在运行时，程序集 A 或 B 也无法（至少目前）知道类的派生类型。

程序集 B 引用程序集 A。但 A & B 不能引用程序集 C。

我正在使用 C# 4.0。如果您提供的解决方案不使用`DataContractSerializer`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-08T20:55:37.770

It looks like you need both:

*   Pass a collection of KnownTypes into your deserializer (as mentioned above)
*   Tell the deserializer not to check the type (use `verifyObjectName`parameter):

    ```
    return (Base)serializer.ReadObject(reader, false); 
    ```

see details here: [http://msdn.microsoft.com/en-us/library/ms573850%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/ms573850%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:49:54.637

你知道*运行时*的类型吗？如果是这样，一个简单的方法可能就是：

```
List<Type> knownTypes = ...; // now that you know what to expect
DataContractSerializer serializer = new DataContractSerializer(
    typeof(Base), knownTypes); 
```

# java - 在java中从APNG中提取png文件

> ID：12859424
> 
> 赞同：1
> 
> 时间：2012-10-12T12:47:24.137
> 
> 标签：java, png, apng

我一直在尝试从 APNG 文件中提取所有 png 文件。我已经寻求帮助，而且没有太多。我能找到的只是一个开源库 pngj，有了它，我就可以获得 APNG 文件的第一帧。

这是我正在使用的代码

```
public static void mirror(File orig, File dest, boolean overwrite)
         {
    PngReader pngr = FileHelper.createPngReader(orig);
    PngWriter pngw = FileHelper.createPngWriter(dest, pngr.imgInfo,
            overwrite);
    pngw.setFilterType(FilterType.FILTER_CYCLIC); // just to test all
                                                    // filters
    int copyPolicy = ChunkCopyBehaviour.COPY_ALL;
    pngw.copyChunksFirst(pngr, copyPolicy);
    ImageLine lout = new ImageLine(pngw.imgInfo);
    int cols = pngr.imgInfo.cols;
    int channels = pngr.imgInfo.channels;
    int[] line = new int[cols * channels];
    int aux;
    for (int row = 0; row < pngr.imgInfo.rows; row++) {
        ImageLine l1 = pngr.readRow(row);
        line = l1.unpack(line, false);
        for (int c1 = 0, c2 = cols - 1; c1 < c2; c1++, c2--) {
            for (int i = 0; i < channels; i++) {
                aux = line[c1 * channels + i];
                line[c1 * channels + i] = line[c2 * channels + i];
                line[c2 * channels + i] = aux;
            }
        }
        lout.pack(line, false);
        pngw.writeRow(lout, row);
    }
    pngr.end();
    pngw.copyChunksLast(pngr, copyPolicy);
    pngw.end();
    // // print unknown chunks, just for information
    List<PngChunk> u = ChunkHelper.filterList(pngr.getChunksList()
            .getChunks(), new ChunkPredicate() {
        public boolean match(PngChunk c) {
            return ChunkHelper.isUnknown(c);
        }
    });
    if (!u.isEmpty())
        System.out.println("Unknown chunks:" + u);
} 
```

所以基本上我只是镜像一个 apng 文件，它被转换成一个 png 文件，这是第一帧。那么有人可以告诉我如何获取剩余的帧并将它们保存为 png 文件吗？任何帮助或提示都会被应用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:29:18.410

实际上[PNGJ](https://code.google.com/p/pngj/)库（我是作者）不支持APNG标准（题外话：我决定反对它，因为我不喜欢APGN方法并且因为它不符合我的库的想法：加载“巨大”数据-IDAT-逐行渐进；并直接将块（元数据）加载到内存中；APGN 通过将帧存储在块中来滥用 PGN 标准）。

您可以随时尝试使用它来做您想做的事情，但不能以优雅和健壮的方式。这是一个例子。除了丑陋之外，这不适用于部分帧（小于 APNG 支持的完整图像的帧），也不适用于叠加，~~也不适用于调色图像（后面的问题将是最容易修复的）~~（希望已修复）。

这是用[http://philip.html5.org/tests/apng/028.png测试的](http://philip.html5.org/tests/apng/028.png)

```
import java.io.File;
import java.io.FileOutputStream;

import ar.com.hjg.pngj.FileHelper;
import ar.com.hjg.pngj.ImageLine;
import ar.com.hjg.pngj.PngHelperInternal;
import ar.com.hjg.pngj.PngReader;
import ar.com.hjg.pngj.PngWriter;
import ar.com.hjg.pngj.chunks.*;

public class ApngSplit {

    private static final String PREFIX = "apngf";

    /** reads a APNG file and tries to split it into its frames */
    public static void process(File orig) throws Exception {
        PngReader pngr = FileHelper.createPngReader(orig);
        File dest = new File(orig.getParent(), PREFIX + "0_" + orig.getName());
        PngWriter pngw = FileHelper.createPngWriter(dest, pngr.imgInfo, true);
        System.out.println("writing default frame " + pngw.getFilename());
        pngr.setChunkLoadBehaviour(ChunkLoadBehaviour.LOAD_CHUNK_ALWAYS);
        pngr.setMaxBytesMetadata(Integer.MAX_VALUE);
        pngr.setMaxTotalBytesRead(Long.MAX_VALUE);
        pngr.setSkipChunkIds(new String[] {});
        int copyPolicy = ChunkCopyBehaviour.COPY_PALETTE | ChunkCopyBehaviour.COPY_ALL_SAFE;
        pngw.copyChunksFirst(pngr, copyPolicy);
        int cols = pngr.imgInfo.cols;
        int channels = pngr.imgInfo.channels;
        for (int row = 0; row < pngr.imgInfo.rows; row++) {
            ImageLine l1 = pngr.readRow(row);
            pngw.writeRow(l1, row);
        }
        pngr.end();
        pngw.copyChunksLast(pngr, copyPolicy);
        pngw.end();
        processExtra2(orig, pngr.getChunksList());
    }

    private static void processExtra2(File orig, ChunksList chunks) throws Exception {
        int numframe = 0;
        FileOutputStream os = null;
        boolean afterIdat = false;
        for (PngChunk chunkApng : chunks.getChunks()) {
            if (chunkApng.id.equals("IDAT"))
                afterIdat = true;
            if (chunkApng.id.equals("fcTL") && afterIdat) {
                numframe++;
                if (os != null)
                    endPng(chunks, os);
                File dest = new File(orig.getParent(), PREFIX + numframe + "_" + orig.getName());
                System.out.println("writing seq " + numframe + " : " + dest);
                os = new FileOutputStream(dest);
                beginPng(chunks, os);
            }
            if (chunkApng.id.equals("fdAT")) {
                ChunkRaw crawf = chunkApng.createRawChunk();
                int seq = PngHelperInternal.readInt4fromBytes(crawf.data, 0);
                ChunkRaw crawi = new ChunkRaw(crawf.len - 4, ChunkHelper.b_IDAT, true);
                System.arraycopy(crawf.data, 4, crawi.data, 0, crawi.data.length);
                crawi.writeChunk(os);
            }
        }
        if (os != null)
            endPng(chunks, os);
    }

    private static void endPng(ChunksList chunks, FileOutputStream fos) throws Exception {
        chunks.getById1(PngChunkIEND.ID).createRawChunk().writeChunk(fos);
        fos.close();
    }

    private static void beginPng(ChunksList chunks, FileOutputStream fos) throws Exception {
        fos.write(new byte[] { -119, 80, 78, 71, 13, 10, 26, 10 }); // signature
        chunks.getById1(PngChunkIHDR.ID).createRawChunk().writeChunk(fos);
        PngChunk plte = chunks.getById1(PngChunkPLTE.ID);
        if (plte != null)
            plte.createRawChunk().writeChunk(fos);
    }

    public static void main(String[] args) throws Exception {
        process(new File("C:/temp/029.png"));
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:59:10.853

一些可能有帮助的资源：

1.  这些示例显示了如何读取 apng 文件，但它是 C 并使用 libpng： [https ://sourceforge.net/projects/apng/files/libpng/examples/](https://sourceforge.net/projects/apng/files/libpng/examples/)

2.  这是一些Java代码，但它只能创建APNG文件，不能读取它们： [https ://www.reto-hoehener.ch/japng/index.html](https://www.reto-hoehener.ch/japng/index.html)

3.  这是用于读取和显示 APNG 文件的 JavaScript 代码： [https ://github.com/davidmz/apng-canvas](https://github.com/davidmz/apng-canvas)

# android - phonegap 地理位置总是在超时时失败

> ID：12859425
> 
> 赞同：16
> 
> 时间：2012-10-12T12:47:36.347
> 
> 标签：android, cordova, geolocation, timeout, sencha-touch-2

我在我的应用程序中使用 sencha-touch 2.0 和 phonegap 2.0.0 来检索用户的位置。在我的本地主机上运行时，一切正常。但是，当将 .apk 加载到我的 android 15 api 设备（使用 eclipse 和 adt 插件）时，每次调用 getCurrentLocation 或 watchPosition 都不会返回......

这是我的代码：

```
geoOn: function(){
    var geoReady = navigator.geolocation || undefined;

    var onSuccess = function(position){
            Top5.app.alert('Geolocation success '+String(position.coords.latitude) + ' ' + String(position.coords.longitude),'Geolocation');
            var scope = Ext.getCmp('nestedList');
            scope.updateDistance(position.coords);
    };

    var onFailure = function(error){Top5.app.alert('Geolocation failed: '+String(error.code) + ' '+String(error.message),'Geolocation');};
    if (geoReady) {
        this.watchId = navigator.geolocation.watchPosition(onSuccess ,onFailure,{timeout:6000,maximumAge: 3000,enableHighAccuracy: true});    
    }
    else{
        Ext.device.Geolocation.watchPosition({
                 frequency: 3000, // Update every 3 seconds
                 callback: function(position) {
                        this.updateDistance(position.coords);
                 },
                 failure: function() {
                   console.log('Geolocation Failure!');
                 },
                 scope:this
        });
    }
 },
 geoGet: function(){
     var geoReady = navigator.geolocation || undefined;
     if (geoReady) {

         var onSuccess = function(position){
             Top5.app.alert('Geolocation successful!!!');
             var scope = Ext.getCmp('nestedList');
             scope.updateDistance(position.coords);          
         };
         var onFailure = function(error){Top5.app.alert('Geolocation failed: '+String(error.code) + ' '+String(error.message),'Geolocation');};
         navigator.geolocation.getCurrentPosition(onSuccess,onFailure);
     }
     else{}
 },
 geoOff:function(){

     var geoReady = navigator.geolocation || undefined;
     if (geoReady) {
         navigator.geolocation.clearWatch(this.watchId);
         this.watchId = null;
     }
     else{
         Ext.device.Geolocation.clearWatch();
     }

 },
 updateDistance:function(coords){
     Top5.app.alert('updateDist','');
     var scope = Ext.getCmp('nestedList');
     var lat = coords.latitude,lon = coords.longitude;
     var store = scope.getStore();
     var i,record;
     for(i = 0; i < store.data.all.length; i++)
     {
         record = store.data.all[i];
         if(record.data.locationX){
            record.set('distance',Top5.app.getDistance(record.data.locationX,record.data.locationY,lat,lon).toFixed(3));
         }   
     }
} 
```

**更新：**所以我走出了我的大楼，它奏效了……我需要更频繁地出去。
但是，当我禁用 gps 时，我认为 geoLocation 会使用 wifi 连接找到我的位置 - 但它失败了（我设置 enableHighAccuracy: false）。这是为什么？

**更新：** 让我重新表述我的问题：navigator.geolocation.watchPosition 是否假设适用于 GPS 信号和 wifi/g3 信号？如何仅使用互联网连接检测用户位置？目前，我的代码仅适用于 GPS，当禁用该选项或信号被阻止时，地理定位不起作用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-15T09:48:36.707

我知道也许为时已晚，但今天我在同样的问题上苦苦挣扎！解决方案原来非常简单！

解决方案：重新启动设备。

就这样。

问题是，您永远不知道我的用户何时会遇到这种错误，因此如果您的应用程序严重依赖地理位置，我建议您在位置选项中设置超时`navigator.geolocation.getCurrentPosition(geoSuccess, geoError, {timeout: 15000})`并提醒用户有关问题和可能的解决方案。

PS 请记住，例如，如果移动数据也关闭，地理位置可能会超时，因此重新启动并不总是能解决它。在 iPhone 上，它使用蜂窝数据来获取您的位置，但在 Android 上，除非打开 3G，否则手机似乎无法访问蜂窝数据

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T13:40:13.553

听起来可能很愚蠢，但是，您是否激活了“使用网络”选项？

转到设置 -> 位置和安全 -> 使用网络；并激活它。我整个下午都在看这个问题，就是这样。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-31T13:38:43.243

我重新启动并重新启动。我将手机重置为出厂设置。

但没有任何效果。

直到我将 enablHighAccuracy 从 true 设置为 false。

而且... Tada .... 它有效。

所以 ：

```
var options;

options = {
    maximumAge: 30000,
    timeout: 5000,
    enableHighAccuracy: false
}; 
```

这在使用 PhoneGap 2.6.0 时可以正常工作。我需要进行此更改，因为我现在使用的是 Phonegap 3.3 - 在 Wiko Cink+ 手机上进行了测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-03T15:58:37.460

尝试从您的项目中删除 Phonegap 插件地理定位插件。您无需对 JavaScript 代码进行任何更改，因为您的设备将使用具有相同方法签名的[标准 HTML5 navigator.geolocation 功能。](http://dev.w3.org/geo/api/spec-source.html)

假设您使用的是 PhoneGap 3.3，您只需要运行：

```
cordova plugin rm org.apache.cordova.geolocation 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-07T21:33:41.967

如果您在模拟器上运行，可能是因为设备没有设置地理位置。假设您的 android 模拟器在端口 5554 上，请尝试通过运行以下命令来设置位置：

```
telnet localhost 5554
geo fix -0.001 51.5 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-18T05:59:25.707

重新启动您的手机或转到谷歌地图并检查 gps 是否在那里工作。我让它工作了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-18T00:19:29.097

在将 PhoneGap 从 3.5 更新到 3.6.3 版本后，我的工作应用程序发生了这种情况。在尝试了许多其他建议之后，亚瑟的回答奏效了。15 秒对我来说似乎太长了，所以我使用了 {timeout: 2000}。我猜新版本会更慢，因为我的代码在相同设备上更新之前运行良好。以为我会发布并支持他，因为我在 Google 中找到的所有内容都与初始设置有关，并且与我的情况几乎无关。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-11T19:08:30.770

您只需要添加`enableHighAccuracy: true, maximumAge: 60000`然后**重新启动您的设备**。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-30T15:14:28.050

从我的试错分析来看，最有可能的是： 1.你使用的安卓版本。在 Lollipop 和更低版本上，您可能需要转到手机位置设置并启用高精度设置（使用 gps、wlan 和移动网络获取位置）。我必须在 kitkat 手机上执行此操作。2\. 正如其他人所提到的，您可以尝试通过启用/禁用高精度和添加超时来更改 getCurrentPosition 的设置。3.如果您使用的是ngCordova，请确保您安装正确并且实际调用了位置函数。使用控制台验证

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-16T18:13:35.133

试试这个解决方案：

```
window.setInterval(checkPosition, 5000);

function checkPosition() {
 function onSuccess(position) {
    document.getElementById('result1').innerHTML = position.coords.latitude;
    document.getElementById('result2').innerHTML = position.coords.longitude;
 }

 // onError Callback receives a PositionError object
 //
 function onError(error) {
    alert('code: '    + error.code    + '\n' +
        'message: ' + error.message + '\n');
 }
 navigator.geolocation.getCurrentPosition(onSuccess, onError);
} 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2012-10-25T06:39:01.030

我已经设法解决了......但是，我不知道实际解决了它。我所做的只是改变我模型的一个结构。任何人都可以看到与地理定位的联系吗？

# iphone - 在 XCode (iOS) 中发送 HTTPS 请求

> ID：12859427
> 
> 赞同：2
> 
> 时间：2012-10-12T12:47:44.943
> 
> 标签：iphone, ios, xcode, ssl, https

我需要你的帮助 ：）

我正在将 http 请求更改为来自我的应用程序的 https 请求。现在我已经使用[了 ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)并遵循了本[教程](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)。你必须知道我是 https 和 ssl 领域的初学者。我很感激任何帮助，真的。

这是我的http请求的代码：

```
- (void)fetchDataFromServer{

// Create Instance
ASIFormDataRequest *request = [[ASIFormDataRequest alloc] initWithURL:url];

// Parameter der POST Anfrage setzen
[request setPostValue:@"anything" forKey:@"app_action"];

[request setValidatesSecureCertificate:NO]; // no certificate so far
request.delegate = self; // assign delegate
[request startAsynchronous]; // send request 
```

}

那工作得很好。但现在我需要保护数据连接，因此我必须使用**https**。

我怎样才能意识到这种需求？ASIHTTPRequest是正确的[吗](http://allseeing-i.com/ASIHTTPRequest/)，它甚至支持它吗？关于服务器中的证书，我需要知道什么？

请告诉我你知道的一切：）

非常感谢你——你是最棒的。

问候克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:59:26.260

证书验证是一件好事，几乎总是应该完成。您不需要为 HTTP 请求禁用它。

这条规则实际上只有一个例外。如果您必须连接到没有由受信任的证书颁发机构正确签署的证书的 HTTPS Web 服务，那么您必须关闭证书验证。

### 为什么您的 Web 服务可能没有有效的证书

1.  你被黑了！这就是证书和证书验证的原因。
2.  Web 服务在配置错误的 SSL 服务器上运行。
3.  证书已过期，服务器没有跟上。
4.  Web 服务的所有者太便宜而无法为他的证书由受信任的证书颁发机构签名。
5.  不向公众公开的开发服务器可能不值得为获得签名证书而烦恼。

### 如何知道 Web 服务是否没有正确签名的证书

1.  在 Web 浏览器中访问 Web 服务，查看是否收到证书错误。
2.  检查您的应用程序中的无效证书错误。

### 关闭证书验证的替代方法

1.  让您的证书由受信任的证书颁发机构签名。
2.  创建您自己的证书颁发机构，使用您自己的证书颁发机构签署您的证书，并将您的证书颁发机构作为受信任的证书颁发机构安装在 iOS 设备上。

# javascript - 我可以使用 Javascript 来触发 MVC 控制器中的方法吗？

> ID：12859429
> 
> 赞同：0
> 
> 时间：2012-10-12T12:47:45.277
> 
> 标签：javascript, asp.net-mvc-3

我有一个“问题”对象的控制器；如果这些问题属于“MultipleChoice”类型，那么我希望能够将“MultipleChoiceOption”对象的集合添加到问题中......到目前为止，一切都很好。

我遇到的问题是，当我编辑一个问题时，将其类型更改为 MultipleChoice，然后添加选项，必须返回编辑问题视图并提交编辑的问题，否则 Question.Type 中的更改将丢失。显然这有点烦人，所以我想做的是连接一个方法，只要下拉列表值发生更改，就会在 QuestionController 中触发相关方法。

我的编辑问题视图中有以下内容：

```
@Html.DropDownListFor(model => model.Type, Helper.GetSelectList(), new { id = "QuestionTypeDropDown", onchange = "OnChange();" })

<script type="text/javascript">

function OnChange(text) {
    ...do something here

        }

    }
</script> 
```

我的问题控制器中的这个方法：

```
[HttpPost]
    public ActionResult QuestionTypeEdited(Question question)
    {
        if (ModelState.IsValid)
        {
            SaveQuestion(question, false);
            return RedirectToAction("Edit", "Question", new { id = question.OwningPulseId });
        }
        return View(question);
    } 
```

但我不知道如何将它们连接起来。我尝试了一种使用我在网上找到的 Ajax 的方法，但这只是阻止了 js 的触发（也许我没有 Ajax？抱歉，我对 Ajax 一无所知，所以这可能是一个愚蠢的说法！）。是否可以使用“简单”Javascript？

如果我需要明确指定控制器，请务必提及如果您知道 :-)

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:00:27.567

这是您可以做什么的一个非常基本的示例。（未经测试）

的JavaScript：

```
// wire up your change event unobtrusively with jQuery
$("#Type").change(function() {
  // find the form that the select belongs to and serialize it
  var question = $(this).closest("form").serialize();
  // POST the form data to your controller
  $.post("Question/QuestionTypeEdited", question, function(data) {
      // this function executes when the POST completes
      // if data has a RedirectUrl, redirect
      if (data.RedirectUrl)
      {
         window.location = data.RedirectUrl;
      }
      else
      {
         // display any errors - I'm using alert because its very simple, you'll probably want to use a div
         alert(data.Errors);
      }
  });
}); 
```

这是动作：

```
[HttpPost]
public ActionResult QuestionTypeEdited(Question question)
{
    if (ModelState.IsValid)
    {
        SaveQuestion(question, false);

        // return a JSON result with a redirect url
        return Json(new {RedirectUrl = "Edit/Question/"+question.OwningPulseId});
    }

    // return a JSON result with the errors
    return Json(new {Errors = ModelState.Errors});
} 
```

参考：

*   [jQuery 改变](http://api.jquery.com/change/)
*   [最接近的 jQuery](http://api.jquery.com/closest/)
*   [jQuery连载](http://api.jquery.com/serialize/)
*   [jQuery 帖子](http://api.jquery.com/jQuery.post/)
*   [控制器.json](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.json%28v=vs.108%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:13:23.703

如果您只想在 ddl 更改时将回发到您的控制器，您可以这样做：

```
<script type="text/javascript">

function OnChange() {
    document.forms[0].submit();

    }
</script> 
```

假设您在一个表格中：

```
@using (Html.BeginForm()) 
```

您将从 DropDownListFor 获取值到 [HttpPost] 控制器

# sql - Delphi 2010 中 TADOQuery 的数组参数

> ID：12859430
> 
> 赞同：1
> 
> 时间：2012-10-12T12:47:48.267
> 
> 标签：sql, arrays, delphi, parameter-passing, tadoquery

我需要执行一个简单的查询：

`SELECT * FROM MyTable WHERE Id IN (:ids)`

显然，它返回给定列表中具有主键“Id”的记录集。如何将整数 ID 数组传递给参数“ids”的 ADOQuery.Parameters？我试过 VarArray - 它不起作用。默认情况下，参数“ids”具有 FieldType = ftInteger，如果重要的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:27:53.667

没有可用于将值列表传递给的参数类型`in`。不幸的是，这是参数化 SQL 的缺点之一。

您必须从代码构建查询以生成值列表，或生成可以从代码填充的参数列表。这是因为您*可以*将每个值作为不同的参数传递，如下所示：

```
SELECT * FROM MyTable WHERE Id IN (:id1, :id2, :id3) 
```

但由于该列表可能具有可变大小，因此您必须更改 SQL 以添加参数。在这种情况下，生成值列表同样容易，尽管参数化查询可能会被更好地缓存，具体取决于您使用的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:24:57.857

IN 参数只接受一个逗号分隔的值字符串，例如 (1,2,3,4,5) 所以我假设您将数据类型设置为 ftstring 并构建字符串并传递它...？没试过，但这是我*会*尝试的......

# spring - 使用 Maven 运行测试时在多个线程中创建的 ApplicationContext

> ID：12859432
> 
> 赞同：1
> 
> 时间：2012-10-12T12:47:53.203
> 
> 标签：spring, hibernate, maven, junit, liquibase

我有两个s，除了其他用途 Hibernate 的 hbm2ddl和其他用途`persistence-unit`外，它们是相同的，并且数据库是由 liquiBase 创建的。`create-drop``validate`

现在从 Eclipse 运行任何测试（名为 in-mem db 的 HSQLDB），它们工作正常。但是从 Maven 运行它们，它们会因奇怪的外键违规而刹车。

我认为奇怪的是，我从 4 个不同的线程获取消息，例如关闭其中一个持久性单元发生时，表丢弃仍被写入控制台。

为什么我得到四个线程，它们都有自己的 ApplicationContexts？我没有`parallel`为surefire设置参数，我也没有为maven使用-T开关。

编辑：

这是 Maven 命令行输出的一个片段

```
Hibernate: drop table PostalCodeDistribution if exists
Hibernate: drop table PublicationAudit if exists
15:21:13.672 [Thread-2] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'TestPU-nocreate'
Hibernate: drop table PostalCodeDistributionAudit if exists
Hibernate: drop table PublicationInvoicing if exists
Hibernate: drop table PostalCodeSubscriberCountAudit if exists
15:21:13.672 [Thread-2] INFO  org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl - HHH000030: Cleaning up connection pool [jdbc:hsqldb:mem:ptptest]
Hibernate: drop table Revision if exists
Hibernate: drop table PriceDate if exists 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T20:16:44.527

您可能知道，默认情况下，SureFire 在不同的线程（“fork”）中执行您的测试。请参阅：[Maven surefire 插件是否使用多个线程运行测试？](https://stackoverflow.com/questions/2286571/does-maven-surefire-plugin-run-tests-using-multiple-threads)

您的测试或您的测试使用的某些库很可能异步执行。您应该检查您的测试以验证是否是这种情况。

# mysql - 无密码启动 MySQL

> ID：12859439
> 
> 赞同：0
> 
> 时间：2012-10-12T12:48:13.630
> 
> 标签：mysql

我已经安装了 MySQL。在安装过程中，有人问我是否要确定 root 用户的密码。好吧，我输入了密码。

现在我可以通过 mysql -u root -p 访问它

嗯，它有效。

问题是如果我只使用 mysql 命令会发生什么？好。这是出现的：

```
mysql> 
```

我有点困惑。如果我组织了一个密码，我如何在不输入密码的情况下获得访问权限。在这种情况下我有什么特权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:55:08.717

您以 ROOT 身​​份连接（您可以创建、删除、更改、程序、触发器、表、配置、用户、数据库等），因此您可以做任何您想做的事情。如果你这样做是一样的：

```
mysql -u root -p 
```

或者

```
mysql -u root -p "my_root_pass" 
```

（当然，如果你有的话）

这`mysql>`只是意味着您已连接到数据库，但是不建议使用该用户，您也应该使用[`grant`](http://dev.mysql.com/doc/refman/5.1/en/grant.html)命令给他一个密码。

如果要查看正在使用的用户，可以使用：

```
mysql> select current_user; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:51:34.917

当你看到 mysql> 时尝试访问你的数据库/表> 如果它没有给你一个错误，那么你的密码很可能仍然没有为 root 帐户设置。如果是这种情况，您可以继续执行此查询来设置您的 root 密码。

```
grant all privileges on *.* to 'root'@'localhost' identified by 'your new password'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:54:33.090

您可以“进入” MySQL 的事实并不意味着您有能力做任何事情。尝试在不提供密码的情况下创建数据库。尝试在没有密码的情况下访问数据库...我很确定您也做不到。

# entity-framework - 仅更新 Code First、EF 5 中的标量属性

> ID：12859440
> 
> 赞同：2
> 
> 时间：2012-10-12T12:48:14.747
> 
> 标签：entity-framework, code-first

上帝的一天！

我有一棵实体树，在特定时间点我只需要更新一个实体的标量属性。经典更新上升整个图查找，但关系不需要更新。

类别实体中的麻烦是一个类别在子类别中有另一个类别。保存有关重复键的更改时，我的方法会生成异常。我认为 EF 尝试将孩子添加到数据库中。

下面列出了我的数据上下文的静态方法：

```
 public static void Update<T>(T item) where T : KeyedObject
    {
        if (item == null)
            throw new ArgumentNullException("Item to update is null");
        item.ValidateIsNotNew();
        using (DataContext db = new DataContext())
        {
            T original = GetOriginalWithException<T>(db, item);
            DbEntityEntry entry = db.Entry(original);
            entry.CurrentValues.SetValues(item);
            entry.State = EntityState.Modified;

            try
            {
                db.SaveChanges();
            }
            catch (Exception ex)
            {
                throw new DatabaseException(
                    "Cant update list item. See inner exception for details.", 
                    ex);
            }
        }
    } 
```

我尝试了另一种方法：附加对象。此方法不会抛出异常，但会增加整个图形更新并占用大量资源。下面列出的代码：

```
 public static void Update<T>(T item) where T : KeyedObject
    {
        if (item == null)
            throw new ArgumentNullException("Item to update is null");
        item.ValidateIsNotNew();
        using (DataContext db = new DataContext())
        {
            db.Set<T>().Attach(item);
            db.Entry(item).State = EntityState.Modified;
            try
            {
                db.SaveChanges();
            }
            catch (Exception ex)
            {
                throw new DatabaseException(
                    "Cant update list item. See inner exception for details.", 
                    ex);
            }
        }
    } 
```

# c# - C# 动态用户控件、按钮单击和母版页

> ID：12859443
> 
> 赞同：1
> 
> 时间：2012-10-12T12:48:23.717
> 
> 标签：c#, button, dynamic, user-controls, master-pages

关于 C#.NET 处理动态添加的用户控件的方式，我遇到了一个非常令人沮丧的问题。

我的页面设置的基本概要是我有一个 ASPX 页面，它有一个母版页。母版页有一些内容占位符。在 ASPX 页面的代码隐藏中，我调用 Master.FindControl 方法来查找内容占位符，然后使用 LoadControl 方法将 UserControl 加载到占位符中。

在 UserControl 上，我有一系列文本框和一个提交按钮。在这个实现中，当我单击提交按钮，并在 OnClick 事件中放置一个断点时，我发现 OnClick 事件永远不会被调用。

但是，如果我不使用这种方法，而是删除母版页，并直接在 ASPX 页面上添加内容占位符，然后使用 Placeholder.Controls.Add 添加 UserControl 而不是 Master.FindControl，则该按钮可以正常工作。

有人对我如何在不删除母版页的情况下解决此问题有任何建议吗？

# iphone - 使用 iphone4 和 iphone5

> ID：12859445
> 
> 赞同：-2
> 
> 时间：2012-10-12T12:48:33.153
> 
> 标签：iphone, ios, ios6, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

如何创建适用于 iphone4 和 iphone5 的应用程序？我试图了解它背后的障碍。但我找不到任何与此相关的苹果文档？为此，我们需要做哪些事情才能使应用程序在 iPhone4 和 iPhone5 上运行良好。

谢谢你。

请参考以下图片！ ![iphone 5](../Images/e0c0955a2a2b66782d3245fd9d025f70.png)

不，如果您参考 iPhone5 图像，您可以在顶部和底部看到黑色填充。但是，如果您看到 iPhone4 图像，则没有填充。我想问我们如何创建可以在 iPhone4 和 iPhone5 上运行的 iPhone 应用程序，因为 iPhone5 存在高度差异。我正在尝试创建需要在 iPhone4 和 iPhone5 上运行的新应用程序。我正在使用 xcode 4.5 ![在此处输入图像描述](../Images/5e7a2e338673520ca176edb01c42f561.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:51:13.197

对于 iPhone 5，您需要支持 iOS 6。处理高度差异可以通过设置适当的高度来解决。

您可以设置自动调整大小掩码，或者如果您希望仅支持 iOS 6，请使用 autoLayout。

# javascript - 当我可以将函数“附加”到构造函数时，为什么还要使用原型？

> ID：12859452
> 
> 赞同：0
> 
> 时间：2012-10-12T12:49:14.897
> 
> 标签：javascript

> **可能重复：**
> [在 Javascript 中使用“原型”与“这个”？](https://stackoverflow.com/questions/310870/use-of-prototype-vs-this-in-javascript)
> [使用原型与直接在构造函数中定义方法的优势？](https://stackoverflow.com/questions/4508313/advantages-of-using-prototype-vs-defining-methods-straight-in-the-constructor)

我正在学习 Javascript 中的原型。我不太明白的一件事是为什么我应该使用`CONSTRUCTOR_FN.prototype.METHOD_NAME`约定添加一个函数，而不仅仅是`this.METHOD_NAME`在`CONSTRUCTOR`?

我写了这个小代码来澄清：

```
function Cat ( name ) {
    this._name = name;
    this.say = function ( thing ) {
        alert( this._name + " says: '" + thing + "'" );
    }
}

function Dog ( name ) {
    this._name = name;
}
Dog.prototype.say = function ( thing ) {
    alert( this._name + " says: '" + thing + "'" );
}

var c = new Cat( "Mitt");
var d = new Dog( "Barak" );
c.say( "War" );
d.say( "No war" ); 
```

据我所见，构造函数`Cat`和`Dog`构造函数的工作方式相同。如果我从[这个问题](https://stackoverflow.com/questions/10675033/why-to-use-prototype-when-we-can-just-add-a-property)中理解正确，唯一的区别是当你向原型添加一些东西时，来自该构造函数的所有对象都会拥有它。还有其他原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:54:08.230

其实是的，还是有区别的。当您通过原型添加方法或属性时，您可以确保此方法/属性只会创建一次，并且它们将包含在原型对象中。但是，如果您只是将您的方法添加到一个函数中，那么这些方法将与您的类的每个新实例一起被克隆。假设您的班级中有 10 个对象实例。如果您使用原型，则所有这 10 个实例只有一种方法。如果您将方法添加到函数对象本身，您将有 10 个方法副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:55:23.363

如果构造函数是由其他人编写的（例如，您下载的库），您可能无法在不修改原始代码的情况下访问构造函数来更改它。使用原型也被认为是更好的风格。

# java - j2objc：找不到命令

> ID：12859453
> 
> 赞同：0
> 
> 时间：2012-10-12T12:49:20.563
> 
> 标签：java, objective-c, code-conversion

我必须将java代码转换为objective-c代码。在这里，我必须编写以下代码并在我的终端上运行：

```
$ cat Hello.java 
public class Hello {
public static void main(String[] args) {
System.out.println("hello, world");
 }
 }
$ j2objc Hello.java
translating Hello.java
Translated 1 file: 0 errors, 0 warnings 
```

编译翻译文件：

```
$ j2objcc -c Hello.m
$ j2objcc -o hello Hello.o 
```

在这里，当我在终端上运行**$ j2objcc -o hello Hello.o**时，出现以下错误。

```
$ j2objcc -o hello Hello.o
Undefined symbols:
  "_objc_autoreleasePoolPop", referenced from:
      -[JavaLangThread run] in libjre_emul.a(Thread.o)
  "_objc_autoreleasePoolPush", referenced from:
      -[JavaLangThread run] in libjre_emul.a(Thread.o)
ld: symbol(s) not found
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T17:34:51.133

您需要添加解压缩 j2objc 分发包的路径。例如：

```
$ cd $HOME
$ unzip ~/Downloads/j2objc-*.zip
$ export PATH=${PATH}:${HOME}/j2objc 
```

注意：上面的导出命令需要添加到您的 ${HOME}/.bashrc 文件中，以便在您注销并重新登录时进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:39:08.130

您评论您正在使用 XCode 3.2.6。目前，J2ObjC 似乎需要**XCode 4+**。

参考：[https ://code.google.com/p/j2objc/](https://code.google.com/p/j2objc/)

# c# - 无法在另一个 SqlConnection 的“使用”子句中打开 SqlConnection？

> ID：12859455
> 
> 赞同：2
> 
> 时间：2012-10-12T12:49:22.500
> 
> 标签：c#, asp.net, sqlconnection

我很好奇这是为什么。我今天早些时候遇到了这种情况

```
using (SqlConnection oConn = new SqlConnection(ConnectionString))
{
    using (SqlCommand cmd = new SqlCommand("IC_Expense_InsertCycle", oConn))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@PortalId", portalId);
        cmd.Parameters.AddWithValue("@Description", description);
        cmd.Parameters.AddWithValue("@StartDate", start);
        cmd.Parameters.AddWithValue("@EndDate", end);

        try
        {
            oConn.Open();
            cmd.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            throw ex;

        }
    }
}

//Get the new set of ExpenseCycles for binding
ExpenseCycle cycle = new ExpenseCycle(ConnectionString);
return cycle.GetExpenseCycles(portalId);

// ^^ this works just fine. The GetExpenseCycles call will basically set up the structure above with using SqlConnection and using SqlCommand

using (SqlConnection oConn = new SqlConnection(ConnectionString))
{
    using (SqlCommand cmd = new SqlCommand("IC_Expense_InsertCycle", oConn))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@PortalId", portalId);
        cmd.Parameters.AddWithValue("@Description", description);
        cmd.Parameters.AddWithValue("@StartDate", start);
        cmd.Parameters.AddWithValue("@EndDate", end);

        try
        {
            oConn.Open();
            cmd.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            throw ex;

        }

        //Get the new set of ExpenseCycles for binding
        ExpenseCycle cycle = new ExpenseCycle(ConnectionString);
        return cycle.GetExpenseCycles(portalId);

        //This didn't work. The INSERT statement was successful, but it was bringing back old entries, and did not include the newest one that was just inserted
    }
} 
```

底部代码块最初是我的，我的测试环境的返回计数只有 1，但数据库中有 2 条记录。它没有获取新插入的记录。

GetExpenseCycles 的基本代码如下：

```
using (SqlConnection oConn = new SqlConnection(ConnectionString))
{
    using (SqlCommand cmd = new SqlCommand("IC_Expense_GetExpenseCyclesByPortal",oConn))
    {
        oConn.Open();
        using (SqlDataReader sdr = cmd.ExecuteReader())
        {
            //Read List<expensecycle> here
        }
    }
} 
```

任何想法为什么？没有抛出异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:05:13.337

没有抛出异常，所以没有错误......我怀疑连接上的隔离级别

在第一种情况下，连接不重叠。

ExpenseCycle() 使用连接字符串，我可以放心地假设它启动了一个新连接。

在第二个示例（问题案例）中，连接确实重叠：

例如，如果隔离级别是已提交读，并且“封闭”连接尚未稳定其写入（提交），则新连接不会接收更改，在这种情况下是插入。

可能的解决方案或要尝试的事情： 1\. 检查连接上的隔离级别 2\. 将连接而不是连接字符串传递给 ExpenseCycle() （这也是一个更好的做法，恕我直言）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:27:24.260

您可能有一个生效的环境事务（如果在事务范围内调用代码块，新连接将自动加入该事务。使用[TransactionScope 类](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)，您可以获得该事务的句柄并在第二次调用之前提交它.

此外，您的第二次调用似乎在命令的 using 块范围内。将其移出可能足以解决您的问题

```
using (SqlConnection oConn = new SqlConnection(ConnectionString)) 
{     
   using (SqlCommand cmd = new SqlCommand("IC_Expense_InsertCycle", oConn))     
   {
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.AddWithValue("@PortalId", portalId);
      cmd.Parameters.AddWithValue("@Description", description);
      cmd.Parameters.AddWithValue("@StartDate", start);
      cmd.Parameters.AddWithValue("@EndDate", end);          
      try
      {
         oConn.Open();
         cmd.ExecuteNonQuery();
      }
      catch (SqlException ex)
      {
         throw ex;
      }
   }//close the SqlCommand
   //Get the new set of ExpenseCycles for binding
   ExpenseCycle cycle = new ExpenseCycle(ConnectionString);
   return cycle.GetExpenseCycles(portalId);
   //This might fix your problem. 
} 
```

另一种选择是将第二个调用移到第一个 using 块之外，就像这样

```
bool insertSuccessful;
using (SqlConnection oConn = new SqlConnection(ConnectionString)) 
{     
   using (SqlCommand cmd = new SqlCommand("IC_Expense_InsertCycle", oConn))     
   {
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.AddWithValue("@PortalId", portalId);
      cmd.Parameters.AddWithValue("@Description", description);
      cmd.Parameters.AddWithValue("@StartDate", start);
      cmd.Parameters.AddWithValue("@EndDate", end);          
      try
      {
         oConn.Open();
         cmd.ExecuteNonQuery();
         insertSuccessful=true;
      }
      catch (SqlException ex)
      {
         insertSuccessful=false
         throw ex;
      }
   }//close the SqlCommand
}//close the connection
//Get the new set of ExpenseCycles for binding
if(insertSuccessful)
{
   ExpenseCycle cycle = new ExpenseCycle(ConnectionString);
   return cycle.GetExpenseCycles(portalId);
} 
```

我认为第一个块应该可以解决您的问题。如果不是第二个肯定应该。

# c# - 如何在silverlight报告中创建条形图

> ID：12859461
> 
> 赞同：0
> 
> 时间：2012-10-12T12:49:43.140
> 
> 标签：c#, silverlight-4.0, charts, reporting

我正在尝试使用 Telerik 图表控件在 silverlight（小条形图）中的报告上创建条形图。我可以通过谷歌搜索找到几个链接：[Telerik](http://www.telerik.com/help/wpf/radchart-features-layout-mode.html)，[其他行](http://www.telerik.com/help/wpf/radchart-features-layout-mode.html)，[另一个链接](http://www.devcurry.com/2011/01/silverlight-4-chart-example.html)。但我需要在我的报告旁边显示。你能提供一些示例或教程链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:16:10.357

我相信 Silverlight 工具包是您最好的选择

[http://silverlight.codeplex.com/wikipage?title=Silverlight%20Toolkit%20Overview%20Part%202](http://silverlight.codeplex.com/wikipage?title=Silverlight%20Toolkit%20Overview%20Part%202)

# ruby-on-rails - 在 Rails 上更改 URL 中的参数

> ID：12859464
> 
> 赞同：0
> 
> 时间：2012-10-12T12:49:51.203
> 
> 标签：ruby-on-rails, routing

我想更改`:id`URL 上的参数。我在 routes.rb 文件中添加了如下内容：

```
match "articles/:name/edit", :to => 'articles#edit', :as => 'edit_article' 
```

认为`:name`服务器`params[:name]`稍后会在 Rails 中读取它。我编辑了我的文章控制器定义以进行编辑：

```
def edit
    @article = Article.find(params[:name])
end 
```

我总是得到错误`couldn't find article with id=test`，我想知道为什么“id”而不是：name？我也尝试更改匹配以获取但我得到了相同的结果。

我还有默认资源 :articles 仍在我的 routes.rb 文件中，不知道那里是否有类似*双重规则*的东西。

整个事情是，我会在我的 URL 中使用名称而不是 ID 号——不仅仅是编辑名称，我可以使用 show 方法处理它，但不是使用编辑/更新/删除。

我正在[阅读](http://guides.rubyonrails.org/routing.html "Rails 中的路由")有关路由的信息，但我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:53:29.627

默认情况下，按`find`搜索`id`。

您应该将其替换为`find_by_name`.

建议：使用[friendly_id](https://github.com/norman/friendly_id)

# c++ - VS2010：c++ DLL (/clr) 的代码覆盖率

> ID：12859476
> 
> 赞同：0
> 
> 时间：2012-10-12T12:50:33.513
> 
> 标签：c++, visual-studio-2010, unit-testing, clr, code-coverage

根据使用*/clr*和*/clr:pure选项编译的*[Microsoft](http://msdn.microsoft.com/en-us/library/ms243171(v=vs.100).aspx)项目不支持单元测试。

 **但是，我可以创建单元测试项目并将其用于测试*/clr*和*/clr:pure*项目。但目前不支持***代码覆盖率。***

如何确定使用*/clr*选项编译成 DLL 的 C++ 项目的代码覆盖率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:02:46.397

如果它是 CLR，即在后台编译为 .NET IL，那么您应该能够使用大多数 .NET 代码覆盖工具，请参阅[我可以使用什么来获得 C#/.NET 的高质量代码覆盖？](https://stackoverflow.com/questions/276829/code-coverage-for-c-net)获取 .NET 代码覆盖工具的主列表。

任何使用分析器 API 的工具，例如[OpenCover](https://github.com/sawilde/opencover)（免费）或[NCover](http://www.ncover.com/)（商业）都应该没有问题，因为它们针对 IL 并使用 PDB - 我不能保证其他工具，但我看不到任何明显的至于为什么不这样做的原因。**

# entity-framework - 实体框架不会删除子项，而是将引用设置为 null

> ID：12859481
> 
> 赞同：2
> 
> 时间：2012-10-12T12:50:44.543
> 
> 标签：entity-framework, cascading-deletes

我有以下情况：

首先是唯一相关的表/类（全部从数据库（MySQL）自动生成）：

![桌子](../Images/7b7559ebd5ad963b9ee6e023ad1a71d6.png)

edmx 文件的相关部分：

```
 <Association Name="navigationitem_ibfk_1">
      <End Role="navigationitem" Type="Model.Store.navigationitem" Multiplicity="0..1">
        <OnDelete Action="Cascade" />
      </End>
      <End Role="navigationitem1" Type="Model.Store.navigationitem" Multiplicity="*" />
      <ReferentialConstraint>
        <Principal Role="navigationitem">
          <PropertyRef Name="id" />
        </Principal>
        <Dependent Role="navigationitem1">
          <PropertyRef Name="navigationitemid" />
        </Dependent>
      </ReferentialConstraint>
    </Association> 
```

我认为不需要更多的词：它是一个导航表，每个导航项都可以有子项（但这不是必须的）。

现在，当我尝试删除具有孩子的顶级项目时：

```
context.Remove(topLevelNode);
context.SaveChanges(); 
```

它删除了数据库中的顶级节点，但在子节点上它只是设置`navigationitemid`为`null`（是的 - 我已经在数据库中定义了删除级联，当我直接在那里删除它时它可以工作）。

所以我认为正在发生的事情是，当我删除父节点时，框架将所有子节点设置`navigationitemid`为`NULL`，然后当导航应该保存到数据库时，它不会级联删除，因为子节点`navigationitemid`是`NULL`。

我能做些什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:18:44.233

人们想做的一件显而易见的事情是在上下文中的关联上定义级联删除。但尝试它我发现要么 sql server 不支持它，要么 EF 需要帮助：

*   在外键约束上定义级联删除（使用代码优先）会引发 sql server 异常：

    > 在表 'yyy' 上引入 FOREIGN KEY 约束 'xxx' 可能会导致循环或多个级联路径。（[见这里。](http://support.microsoft.com/kb/321843)）

*   EF 模型中的级联删除：现在删除父项时不会删除子记录。更糟糕的是：FK 字段没有被取消，外键约束违反会抛出异常。补救方法是[在删除父集合之前加载子集合](https://stackoverflow.com/a/2566440/861716)。

尤其是在删除`navigationitem`s 的树时，这不是一个非常有吸引力的选择，但恐怕这就是你目前所拥有的一切。

# iphone - Iphone：在图像视图上看不到图像

> ID：12859485
> 
> 赞同：0
> 
> 时间：2012-10-12T12:50:52.027
> 
> 标签：iphone, image, imageview

我正在尝试将图像设置为 imageview 但它不起作用，我将所有连接设置为 Interface Builder。

当我运行程序时，调试器显示以下内容：

```
(lldb) po image
(UIImage *) $2 = 0x06ed2290 <UIImage: 0x6ed2290> 
```

对于它说的imageview：

```
(lldb) po self.imageView
(UIImageView *) $1 = 0x06eac5e0 <UIImageView: 0x6eac5e0; frame = (0 0; 0 0); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x6ead050>> 
```

使用以下代码设置图像：

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    [self.imageView setImage:image];
    [popoverController dismissPopoverAnimated:YES];
    [picker dismissModalViewControllerAnimated:YES];
     } 
```

但图像不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:59:03.027

```
[picker dismissModalViewControllerAnimated:YES];
imageView = [[UIImageView alloc]initWithFrame:CGRectMake(80, 80, 150, 150)];
[imageView setUserInteractionEnabled:YES];
imageView.image = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

用这个修改你的代码也许会有所帮助:)......你还没有添加图像框架吗？

# .net - .NET Windows 服务仅适用于调试二进制文件

> ID：12859487
> 
> 赞同：0
> 
> 时间：2012-10-12T12:50:54.727
> 
> 标签：.net, service

我已经安装了一个用 c# 开发的 Windows 服务。该服务已由 Visual Studio 安装程序项目创建的 msi 包安装。当使用来自发布版本的二进制文件安装服务时，它无法启动，并且服务控制台返回以下错误消息：“错误 1053：服务未及时响应启动或控制请求”。当服务与调试二进制文件一起安装时，一切都按预期工作。我已经为服务的构造函数、OnStart 方法、main 方法和服务的主工作线程的 DoWork 方法中发生的每个异常添加了日志。服务的 OnStart 方法几乎立即退出，因为它只是从配置文件中初始化一些变量，然后启动主工作线程。我没有在事件查看器上记录任何异常。我一无所知，我怎么能调试发布二进制文件发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:56:02.240

我会更改代码以使服务能够从独立的控制台测试工具运行。毕竟，服务只是管理启动关闭和暂停/恢复的一种奇特方式。然后在服务之外调试您的代码。

如果失败，则将代码分解为多个程序集，看看是否可以更精确地隔离代码模块。然后尝试通过将进入条件记录到受影响的模块来重新创建问题，并在控制台测试工具中重新创建它们

编辑：只是插话。我调试过的复杂企业服务代码中 99% 的服务问题都已使用此模式解决。@LexLi 正确的其他安全问题并不*总是*通过将应用程序作为控制台应用程序运行来解决。

此外，我对所有调试问题的回答通常是这种模式：

1.  迭代地降低系统（环境）复杂性
2.  迭代地移除代码（测试中）的复杂性
3.  重复直到问题被重现，然后应用源代码或运行时调试器，无论是自定义的还是关闭的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:25:56.210

您可以尝试从进程中删除 MSI，以便更好地确定根本原因。

1.  在发布版本中编译您的项目。
2.  使用 InstallUtil 将 Release 构建二进制文件安装为 Windows 服务。[http://msdn.microsoft.com/en-us/library/sd8zc8ha(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sd8zc8ha(v=vs.80).aspx)

尝试启动此服务并查看是否出现相同的错误消息。

如果服务仍然无法启动，请尝试按照KB设置服务调试，

[http://support.microsoft.com/kb/824344](http://support.microsoft.com/kb/824344)

由于这是一个 .NET Windows 服务，您可能会了解 WinDbg 和 SOS，

[http://www.netfxharmonics.com/2009/01/Learning-WinDBGSOS-and-Advanced-Debugging](http://www.netfxharmonics.com/2009/01/Learning-WinDBGSOS-and-Advanced-Debugging)

# python - 使用python搜索超大文本文件

> ID：12859488
> 
> 赞同：3
> 
> 时间：2012-10-12T12:50:54.693
> 
> 标签：python, search, large-data

我有一个 4000 万行、3 GB 的大文本文件（可能无法放入内存），格式如下：

```
399.4540176 {Some other data}
404.498759292 {Some other data}
408.362737492 {Some other data}
412.832976111 {Some other data}
415.70665675 {Some other data}
419.586515381 {Some other data}
427.316825959 {Some other data}
....... 
```

每行以一个数字开头，然后是一些其他数据。数字按排序顺序排列。我需要能够：

1.  给定一个数字`x`和一个范围`y`，找出所有数字在`y`范围内的行`x`。例如 if`x=20`和`y=5`，我需要找到编号在`15`and之间的所有行`25`。
2.  将这些行存储到另一个单独的文件中。

什么是一种有效的方法来做到这一点而不必遍历整个文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:09:59.173

如果您不想提前为行长生成数据库，可以试试这个：

```
import os
import sys

# Configuration, change these to suit your needs
maxRowOffset = 100  #increase this if some lines are being missed
fileName = 'longFile.txt'
x = 2000
y = 25

#seek to first character c before the current position
def seekTo(f,c):
    while f.read(1) != c:
        f.seek(-2,1)

def parseRow(row):
    return (int(row.split(None,1)[0]),row)

minRow = x - y
maxRow = x + y
step = os.path.getsize(fileName)/2.
with open(fileName,'r') as f:
    while True:
        f.seek(int(step),1)
        seekTo(f,'\n')
        row = parseRow(f.readline())
        if row[0] < minRow:
            if minRow - row[0] < maxRowOffset:
                with open('outputFile.txt','w') as fo:
                    for row in f:
                        row = parseRow(row)
                        if row[0] > maxRow:
                            sys.exit()
                        if row[0] >= minRow:
                            fo.write(row[1])
            else:
                step /= 2.
                step = step * -1 if step < 0 else step
        else:
            step /= 2.
            step = step * -1 if step > 0 else step 
```

它首先对文件执行二进制搜索，直到它靠近（小于`maxRowOffset`）要查找的行。然后它开始读取每一行，直到找到大于 的行`x-y`。该行及其之后的每一行都被写入输出文件，直到找到大于 的行`x+y`，以及程序退出的点。

我在一个 1,000,000 行的文件上进行了测试，它在 0.05 秒内运行。将此与阅读每行花费 3.8 秒进行比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T13:06:02.540

您需要随机访问文本文件无法获得的行，除非这些行都填充到相同的长度。

一种解决方案是将表转储到具有两列的数据库（例如 SQLite）中，一列用于数字，另一列用于所有其他数据（假设数据保证适合单个允许的最大字符数）数据库中的列是）。然后索引数字列，你就可以开始了。

如果没有数据库，您可以一次读取文件并创建一个内存数据结构，其中包含显示包含（数字，行偏移）的值对。您可以通过添加每行的长度（包括行尾）来计算行偏移。现在您可以在数字上对这些值对进行二进制搜索，并使用偏移量随机访问文件中的行。如果您需要稍后重复搜索，请腌制内存结构并重新加载以供以后重用。

这会读取整个文件（您说过您不想这样做），但只执行一次以构建索引。之后，您可以根据需要对文件执行任意数量的请求，它们会非常快。

请注意，第二个解决方案本质上是在您的文本文件上创建数据库索引。

在第二种解决方案中创建索引的粗略代码：

```
 import Pickle

 line_end_length = len('\n') # must be a better way to do this!
 offset = 0
 index = [] # probably a better structure to use than a list

 f = open(filename)
 for row in f:
     nbr = float(row.split(' ')[0])
     index.append([nbr, offset])
     offset += len(row) + line_end_length

 Pickle.dump(index, open('filename.idx', 'wb')) # saves it for future use 
```

现在，您可以对列表执行二进制搜索。可能有比列表更好的数据结构来累积索引值，但我必须阅读各种集合类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T12:53:30.157

由于您想匹配第一个字段，您可以使用[`gawk`](https://www.gnu.org/software/gawk/)：

```
$ gawk '{if ($1 >= 15 && $1 <= 25) { print }; if ($1 > 25) { exit }}' your_file 
```

**编辑：**获取一个包含 261,775,557 行的文件，大小为 2.5 GiB，`50,010,015`在`50,010,025`我的`Intel(R) Core(TM) i7 CPU 860 @ 2.80GHz`. 听起来对我来说已经足够好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:02:24.287

为了找到以刚好高于下限的数字开头的行，您必须逐行浏览文件，直到找到该行。没有其他方法，即必须读取文件中的所有数据并解析换行符。

我们必须将此搜索运行到超过您的上限的第一行并停止。因此，它有助于文件已经排序。这段代码希望能有所帮助：

```
with open(outpath) as outfile:
    with open(inpath) as infile:
        for line in infile:
            t = float(line.split()[0])
            if lower_limit <= t <= upper_limit:
                outfile.write(line)
            elif t > upper_limit:
                break 
```

我认为理论上没有其他选择。

# ruby-on-rails - 你如何用“。”定义一个方法。扩展预先存在的属性的功能？

> ID：12859489
> 
> 赞同：0
> 
> 时间：2012-10-12T12:50:59.030
> 
> 标签：ruby-on-rails, ruby, metaprogramming

所以，这就是我到目前为止所拥有的：

```
 # @return [Array<Hash>] of variables ([Placeholders, actual variables])
  def variables
      # @return [Hash] of all variables. 
      #     If actual variables are named teh same as the placeholders, the placeholders will be over written.
      #     This implementation of merging hashes of an array will work even if we add more elements to the 
      #     variables array.
      self.class.send(:define_method, "variables.flatten") do
        return self.variables.inject{|placeholders, vars| placeholders.merge(vars || {})}
      end

    return [placeholder_variables, self.variable_data]
  end 
```

我希望能够做到：

```
my_object.variables # => return the Array<Hash> 
```

但也能做到

```
my_object.variables.flatten # => return a single merged hash 
```

我刚做的问题

```
def variables.flatten 
```

是当我运行控制台时，我收到一条错误消息，说`variables`没有定义（或者只是我之前放的任何东西`.flatten`）

`.flatten`有没有办法只在属性上定义我的自定义方法`variables`？（正常`<Array>.flatten`在这里不起作用，因为我需要合并哈希。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T11:11:51.493

直接回答：在自己的模块中定义方法，然后包含在你返回的数组中：

```
module SpecialFlatten
  def flatten
    first.update last
  end
end 
```

...然后...

```
def variables
  vals = [placeholder_variables, self.variable_data]
  return vals.extend(SpecialFlatten)
end 
```

但在这种情况下，更好的选择可能是这样做：

```
def variables(*flags)
  if flags.include? :flatten
    placeholder_variables.update self.variable_data
  else
    [placeholder_variables, self.variable_data]
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:09:15.203

我认为不可能定义“variables.flatten”方法。为了证明这一点，让我们通过这个例子来检查：

```
require 'ruby_parser'

RubyParser.new.parse(<<-EOF)
  my_object.variables.flatten
EOF
#=> s(:call,
 s(:call, s(:call, nil, :my_object, s(:arglist)), :variables, s(:arglist)),
 :flatten,
 s(:arglist)) 
```

如您所见`variables`，`flatten`它们是不同的标记，它们不能合并为一个标记，这是一个解析问题。

但是您可能缺少一件事-那就是可链接性。该方法`variables`返回变量数组，如果它们响应 flatten 方法，结果将是平坦的。如果他们没有响应该方法，您应该`flatten`为这些对象实现方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:11:43.427

您可以在返回值上定义单例方法。

```
def variables
  result = [placeholder_variables, self.variable_data]
  # redefine method flatten on the result array
  def result.flatten
    # did not understand what you are trying to do here
    # self is the array here
    inject{|placeholders, vars| placeholders.merge(vars || {})}
  end
  return result # return the array with added method
end 
```

然而，这几乎总是一个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:14:00.447

该`Array#flatten`方法是 Ruby 核心的一部分，所以我建议不要更改它，尤其是当您与其他开发人员一起工作时。您似乎正在尝试符合现有接口。我会寻找替代方案，但您可以在方法的返回值上覆盖 flatten`variables`方法。

```
def variables
  [placeholder_variables, self.class.variable_data].tap do |vars|
    vars.instance_eval do
      def flatten
        inject{|result, vars_hash| result.merge!(vars_hash)}
      end
    end
  end
end 
```

# javascript - 如何使按钮加载到同一页面？

> ID：12859490
> 
> 赞同：4
> 
> 时间：2012-10-12T12:51:10.720
> 
> 标签：javascript, jquery, ajax, button, html

对于那些正在阅读本文的人，我会很感激你试图帮助我。

无论如何，我是编码的初学者。我的问题是我有几组按钮，它实际上是我作为一个年轻新手想要实现的主题布局，但我似乎无法弄清楚如何让这些按钮被点击并加载只有 1 个特定的页面中的框。其他人说它可以通过 Ajax 或 JQuery 或 Javascript 来完成，但我不知道，我只知道 HTML / CSS，仅此而已......我什至不知道我想要发生的这个术语叫什么。

谁能给我最简单的解决方案或示例让我遵循？

我确实尽我所能通过自己和研究来做到这一点，但我想我的技能还没有足够的天赋来解决这个问题。甚至尝试向我的天才兄弟寻求帮助，但到目前为止，即使我只是想学习，他也从来没有为我做任何容易的事情或帮助我。他只是很忙，就像他经常说的那样。

到目前为止，这是我尝试过的：[http:](http://animiao.com/IMVU%20Coding/sample3.php) //animiao.com/IMVU%20Coding/sample3.php Perse，假设默认显示一个框（例如主页）和其余的那些3个按钮应该显示他们自己的信息。

问题：它们仅在我单击“聊天”>“消息”>“添加”按钮时按顺序显示，而不是按任何其他顺序显示。当我再次单击它们时，它们不会出现。

猜猜我的方法是错误的，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:59:26.067

所有的`<div>`s 都堆叠在一起，没有一个`z-index`用 CSS 指定。因此，出现在顶部的将是
a) 在 HTML 代码中的最后一个
和 b) 可见的

修复它的最简单方法是将您的内容 div 包装在另一个 div 中：

```
<div id="content_wrapper">
    <div id="random">something...</div>
    <div id="chat">something...</div>
    ...
</div> 
```

然后用这个 JS 隐藏你不想要的那些：

```
var contents = document.getElementById('content_wrapper').childNodes,
    i = 0,
    i_max = contents.length;
for (i; i < i_max; i++) {
    contents[i].style.display = 'none';
 } 
```

然后*使用*您的“显示”代码：

```
var el = document.getElementById(id);
if (el.style.display == 'none')
    el.style.display = 'block'; 
```

这可以轻松地压缩为更少的代码，但也会让您不太容易理解，所以我暂时保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:13:04.487

问题是当您显示一个元素时，您并没有隐藏其他元素：例如，如果您这样做

```
var el = document.getElementById(id);//id = chat
if (el.style.display == 'none') 
```

您还需要隐藏其他元素：

```
 var message = document.getElementById('message');
 var add = document.getElementById('add');
 message.style.display == 'none';
 add .style.display == 'none'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:36:11.807

html部分：

```
<input type="button" id="button1" value="Button1"></input>
<input type="button" id="button2" value="Button2"></input>
<input type="button" id="button3" value="Button3"></input>

<div id="content-of-button">

</div> 
```

jquery：如果您不知道如何将 jquery 代码放入您的页面使用，请将您的 jquery 或 javascript 代码放在此标记内。

```
$(document).ready(function(){
   var button1content='Button 1 content';
   var button2content='Button 2 content';
   var button3content='Button 3 content';

   $('#button1').click(function(){
      $('#content-of-button').html(button1content);  //here .html overwrites the text inside of the target div          
      //you can also use .append() but it will add the text, not overwrite
   });

   $('#button2').click(function(){
      $('#content-of-button').html(button2content);
   });

   $('#button3').click(function(){
      $('#content-of-button').html(button3content);
   });
}); 
```

不要忘记在 head 标签中导入 jquery 库。这里还有你可以测试的代码：http: [//jsfiddle.net/4BpLg/6/](http://jsfiddle.net/4BpLg/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:02:55.300

学一点javascript也没坏处 javascript的简单例子

将这两行保存为 ajax_sample.txt

```
<p>AJAX is not a new programming language.</p>

<p>AJAX is a technique for creating fast and dynamic web pages.</p> 
```

现在创建一个文件，比如 a.html

```
<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send();
}
</script>
</head>
<body>

<div id="myDiv"><h2>Let AJAX change this text</h2></div>
<button type="button" onclick="loadXMLDoc()">Change Content</button>

</body>
</html> 
```

尝试加载 a.html

# mysql - 在 Mysql 中查找当前结果的位置

> ID：12859493
> 
> 赞同：0
> 
> 时间：2012-10-12T12:51:15.020
> 
> 标签：mysql

我的查询：

SELECT videoid FROM related_videos WHERE videoid='$current_page_video_id' order by videoid desc;

结果返回：
1）videoid = 135；
2）视频ID = 126；
3) 视频ID = 113；
4）视频ID = 95；
5）视频ID = 32；
6) 视频ID = 19；
7) 视频ID = 13；（如何知道7号位置？）
8) videoid = 9;
9) 视频ID = 6；

假设我的 current_page_video_id 是 13，我怎样才能在上面的查询中找到这个 videoid(13) 的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:54:36.953

```
SELECT COUNT(*) FROM related_videos WHERE videoid >= 13 
```

# android - 如何使用 DDMS 从模拟器拨打电话

> ID：12859497
> 
> 赞同：1
> 
> 时间：2012-10-12T12:51:44.240
> 
> 标签：android

我在 DDMS Emulator Control 选项卡中找到了很多东西，我只想从 DDMS 进行/模拟调用。怎么做。另外，我在哪里可以找到有关 Emulator Control 选项卡的详细信息？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:44:18.853

打电话就好像模拟电话一样？

1 窗口 > 打开透视图 > DDMS

2“模拟器控制”选项卡

3 在电话操作中，在“传入号码”文本字段中输入任意号码。

4 从两个单选按钮中选择“语音”。

5 最后，单击`Call`。

要断开连接，请单击`Hang up`。

更多[在这里](http://developer.android.com/tools/debugging/ddms.html#using-ddms)。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:47:59.563

我认为你已经收到了一个适当的答案来打电话给你的模拟器。只需在链接中参考有关 Emulator Control 选项卡的更多详细信息：http:
[//developer.android.com/tools/debugging/ddms.html#ops-location](http://developer.android.com/tools/debugging/ddms.html#ops-location)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:59:07.073

查看[使用 DDMS](http://developer.android.com/tools/debugging/ddms.html)，您将在其中找到所有必需的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:11:15.133

您可以通过 telnet 进行 DDMS 作业：

输入 CMD：

1.  远程登录
2.  打开本地主机 5554
3.  短信发送 000000 你好

可用命令列表：

```
 event            simulate hardware events
   geo              Geo-location commands
   gsm              GSM related commands
   cdma             CDMA related commands
   kill             kill the emulator instance
   network          manage network settings
   power            power related commands
   quit|exit        quit control session
   redir            manage port redirections
   sms              SMS related commands
   avd              control virtual device execution
   window           manage emulator window
   qemu             QEMU-specific commands
   sensor           manage emulator sensors 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-10T10:05:52.963

除了 DDMS，还有一种选择：

模拟器自动将模拟语音呼叫从一个实例转发到另一个实例。要发送语音呼叫，请分别从其中一个模拟器中使用拨号器应用程序。

要向另一个模拟器实例发起模拟语音呼叫：

```
1.Launch the dialer application on the originating emulator instance.
2.As the number to dial, enter the console port number of the instance you'd like to call. You can determine the console port number of the target instance by checking its window title, where the console port number is reported as "Android Emulator (<port>).
3.Press "Dial". A new inbound call appears in the target emulator instance. 
```

# python - python中的全局变量，不良行为。

> ID：12859502
> 
> 赞同：0
> 
> 时间：2012-10-12T12:51:54.160
> 
> 标签：python, variables, global-variables

我在这里更新 x，如果我在更新 x 后打印 y，y 将显示反射。但是，在第一个示例中， y 没有显示出这种变化。这就是我迷路的地方。谁可以给我解释一下这个？

```
x = 2
y = x + 3
###  printing y will yield 5
x = 8    # ok am I updating the same storage space that x pointed to, or is abandoning it and creating
         # another with a value of 8?
###  printing y will still yield 5 (why is that? if Y always points to x and adds 3 to it?)

in contrast with this:

x = [1,2,3]
y = [x,4,5,6]
x[0] = 50
y[2] = 80
z = y[:] + [100,101,1020 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:15:04.413

`x = 2` 创建了一个值为 2 的新对象，x 引用它

`y = x + 3` 创建了一个值为 5 的新对象，y 引用它

`x = 8`创建了一个值为 8 的新对象，现在 x 引用它。值为 2 的对象的引用计数递减，并且是垃圾回收的候选对象。

`x = [1,2,3]` 创建了一个新列表（“类型/类列表的对象”），并且 x 引用它。

`y = [x,4,5,6]` 创建了一个新的列表对象，并且 y 引用它。前面`x`提到的对象基本没有了。它是所谓的“垃圾”，可能会被所谓的“垃圾收集器”收集。

`x[0] = 50` 将 x 引用的列表的第一个元素更改为 50

`y[2] = 80` 将 y 引用的列表的第三个元素更改为 80

`z = y[:]` 创建了一个新的列表对象，其中包含 y 引用的元素的副本。这不会复制第一个元素中的引用 (x)。看`copy.deepcopy()`那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:59:19.257

你写了：

> ### 打印 y 仍然会产生 5（这是为什么呢？如果 Y 总是指向 x 并添加 3？）

你的误解从这里开始。`y`不*指向*x。`y`值为 5。听起来您几乎试图将其与单元格可以包含公式的电子表格模型等同起来。编码不是那样的。当你给 赋值时`y`，你是在赋值，而不是公式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:21:48.133

```
y = x + 3 
```

y 的值会立即计算出来。就这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:13:58.177

让我们以您的示例为例，并替换变量：

原来的：

```
x = 2
y = x + 3
###  printing y will yield 5
x = 8    # x now holds the value of 8 instead of 2
###  printing y will still yield 5 (why is that? if Y always points to x and adds 3 to it?)

in contrast with this:

x = [1,2,3]
y = [x,4,5,6]
x[0] = 50 
```

替换：

```
x = 2
y = 2 + 3
###  printing y will yield 5
x = 8    
###  printing y will still yield 5 because it is set to 2+3

x = [1,2,3] 
y = [[1,2,3],4,5,6] #[1,2,3] is the same list as x
x[0] = 50 # x still holds the value of the same list, 
#however you're changing the value of the first element of the, 
#you're not changing x itself though. 
```

在第一个示例中，您正在更改 x 本身的值。在第二个中，您将更改 x 的属性，同时将 x 保留为相同的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:09:33.260

如果你真的想要这种行为，你必须使用一个函数：

```
>>> x = 2
>>> y = lambda: x + 3
>>> y()
5
>>> x = 8
>>> y()
11 
```

因为 x 是不可变的，所以赋值总是会创建不会反映未来变化的新对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T12:57:04.517

当您使用`=`带有变量名称的运算符作为左侧值时，这会将左侧的名称绑定（或重新绑定）到右侧的对象。`y = x + 3`用value`y`引用一个对象，然后让变量 x用 value 引用一个对象。`int``5``x = 8``int``8`

左边是这样的`x[0]`，你正在做项目分配，只改变第 0 个项目`x`；该名称`x`仍指原始列表，该列表也是 指向的列表的成员`y`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T12:58:59.060

把它想象成一组盒子。当我们谈论单个变量而不是数组时，X 是一个框的名称，y 也是如此。所以 x = 2 表示将 2 放入标有 x 的框中。y = x + 3 表示将 x 中的内容加到 x 上，然后将其放入 y 中。x = 8 表示将框 x 中的内容替换为 8。y 已经计算好，因此无法更改。

对于像 x = [1, 2, 3] 这样的数组，x 不是指一个盒子，而是指一组盒子。它就像 x 指的是框 1、2 和 3，它们中的每一个都恰好具有值 1 2 和 3。因此，如果我更改列表 x 中第一个框的内容，则 x 本身未更改，它仍然是框列表 - 其中一个框的值已更改。y 在这种情况下是一个盒子列表，其中第一个不是真正的盒子，而是包含指向另一组盒子的指针。

# java - 使用 javax.mail 发送到 Gmail SMTP 时遇到问题

> ID：12859504
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:51:58.377
> 
> 标签：java

我想使用 Gmail 的 SMTP 服务器发送邮件。你能告诉我为什么当我运行下面的代码时它不会连接到服务器。

```
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.MimeMessage;

public class SendTrick {

  public static void main(String[] args) {
    Properties props = new Properties();
    props.put("mail.smtp.host", "465");
    props.put("mail.from", "example@gmail.com");
    props.put("mail.smtp.host", "smtp.gmail.com");
    Session session = Session.getInstance(props, null);

    try {
        MimeMessage msg = new MimeMessage(session);
        msg.setFrom();
        msg.setRecipients(Message.RecipientType.TO,
                          "ex@gmail.com");
        msg.setSubject("JavaMail hello world example");
        msg.setText("Hello, world!\n");
        Transport.send(msg);
    } catch (MessagingException mex) {
        System.out.println("send failed, exception: " + mex);
    }
  }
} 
```

日志中的异常是

> 发送失败，异常：javax.mail.MessagingException：无法连接到 SMTP 主机：smtp.gmail.com，端口：25；嵌套异常是：java.net.ConnectException：连接被拒绝：连接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:59:23.180

您没有设置 a `mail.smtp.port`，因为该属性上存在重复拼写错误`mail.smtp.host`，因此使用默认端口 25，如异常中所述。

GMail 的 SMTP 未在端口 25 上运行，这就是连接被拒绝的原因。从[在邮件客户端中设置 POP 中](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)，它看起来应该是 465 或 587，所以你有一个有效的值，但属性键不正确。

**编辑：**

您需要为端口使用正确的*属性键：*

```
props.put("mail.smtp.port", "465"); // <-- use the word "port", not "host" 
```

修复此问题后，您可能还会发现身份验证问题，正如评论中已经指出的那样，除非您故意遗漏了`javax.mail.Authenticator`问题中的代码。

**编辑2：**

正如我所提到的，您可能需要指定其他属性才能成功通过 SMTP 服务器进行身份验证和授权，例如：

```
props.put("mail.smtp.starttls.enable", "true"); 
```

但是，由于您使用端口 465 进行 SSL 连接，您还需要指定其他 SSL 属性，例如`mail.smtp.socketFactory.class`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-08T15:12:38.693

**请按照以下步骤操作：**

1.  在您的电子邮件中禁用“双因素身份验证”
2.  导航到：“ [https://myaccount.google.com/lesssecureapps?pli=1](https://myaccount.google.com/lesssecureapps?pli=1) ”并打开“访问不太安全的应用程序”
3.  下载 JavaMail API“ [https://www.oracle.com/technetwork/java/javamail/index-138643.html](https://www.oracle.com/technetwork/java/javamail/index-138643.html) ”并将其添加到您的库中

**代码**

```
import java.util.Properties;
import javax.mail.Message;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class email_try {
 public static void main(String ap[]) {
  String myEmail = "YOUR EMAIL";
  String password = "YOUR PASSWORD";
  String opponentEmail = "THEIR EMAIL";
  Properties pro = new Properties();
  pro.put("mail.smtp.host", "smtp.gmail.com");
  pro.put("mail.smtp.starttls.enable", "true");
  pro.put("mail.smtp.auth", "true");
  pro.put("mail.smtp.port", "587");
  Session ss = Session.getInstance(pro, new javax.mail.Authenticator() {
   @Override
   protected PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(myEmail, password);
   }
  });
  try {
   Message msg = new MimeMessage(ss);
   msg.setFrom(new InternetAddress(myEmail));
   msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(opponentEmail));
   msg.setSubject("Your Wish");
   msg.setText("java email app");
   Transport trans = ss.getTransport("smtp");
   Transport.send(msg);
   System.out.println("message sent");
  } catch (Exception e) {
   System.out.println(e.getMessage());
  }
 }
} 
```

尝试此代码并输入正确的电子邮件 ID 和密码﻿</p>

# asp.net-mvc - 使用 ASP.NET MVC 程序集构建我自己的项目

> ID：12859505
> 
> 赞同：0
> 
> 时间：2012-10-12T12:52:00.420
> 
> 标签：asp.net-mvc

[也许我的问题很愚蠢，但是我可以从这个源代码](https://aspnet.codeplex.com/releases/view/58781)用 ASP.NET MVC 程序集构建我自己的项目 吗？ 我想设置断点并逐步研究代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:54:32.570

是的。显然你可以。没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:04:57.427

当然可以，但是链接是 ASP.NET MVC 3。最新版本是[MVC 4](http://www.asp.net/mvc/mvc4)

# html - 在输入标签和按钮中定位文本。line-height 有时会被完全忽略

> ID：12859512
> 
> 赞同：0
> 
> 时间：2012-10-12T12:52:39.530
> 
> 标签：html, font-size, css

我无法让我的一些按钮或输入在浏览器中看起来相同。文本的垂直定位通常是问题所在。我尝试了多种浏览器，Firefox (16) 只是忽略了我在 OSX 中的 line-height 并且在 Windows 中看起来仍然不同。

通常有 1px 的差异，有时甚至更多。当您切换到 iPad 或其他移动设备时，这尤其是一个问题，它总是以某种方式看起来不同。这是我的CSS...

```
 margin         : 0px;
  padding        : 0px;
  font-size      : 15px;
  //height       : 15px; // Tried this too with unsatisfying results
  line-height    : 1;
  vertical-align : top; 
```

我在没有使用高度属性的情况下截取了屏幕截图 ![浏览器 chrome、safari、ie10、firefox 中的行高问题。 在 OSX 和 Windows 8 中](../Images/ac619673b202b30729370d3c0e166ac4.png)

*编辑：*
所以我四处寻找更多信息，发现了一些类似问题的问题。
但是没有人解决它...-
> [Firefox 和 Chrome 之间的行高差 1 像素](https://stackoverflow.com/questions/4439537/1-pixel-line-height-difference-between-firefox-and-chrome)
-> [Firefox 与 webkit 的行高低 2px](https://stackoverflow.com/questions/10762267/line-height-2px-lower-in-firefox-vs-webkit)

*编辑2 ：*
此外，如果我制作了一个jsfiddle，我仍然会遇到问题，它有点不同，因为它与我正在处理的网站的上下文不同，但它仍然是行高/文本问题：
请参见此处：[http： //jsfiddle.net/XQ7VD/3/](http://jsfiddle.net/XQ7VD/3/) 这是 OSX 上的 Chrome（左）和 Firefox（右）

*edit3：*
这是一个将行高设置为 18px 的屏幕截图（来自这个 jfiddle：http: [//jsfiddle.net/BJ8eR](http://jsfiddle.net/BJ8eR)） ![在此处输入图像描述](../Images/79010e14b868c4e743b0bd07144cf072.png)

我刚刚看到 jsfiddle 按钮和悬停框有同样的问题！xD
好的，我现在已经完成了屏幕截图...

--
如果有人知道技巧，请与我们联系。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:28:08.083

不同平台上的所有浏览器中的文本渲染都是不同的——字体抗锯齿是完全不同的。所以很难得到像素完美的结果。根据我的经验，为大量浏览器设置输入/按钮元素的样式是主要的 PITA。尤其是移动 Webkit 在某些情况下是不可预测的。

如果您的 CSS 不是摘录，您可能需要添加`display:inline-block;`.

# xml - 如何使用多个 web.config 在本地调试 Web 项目

> ID：12859513
> 
> 赞同：0
> 
> 时间：2012-10-12T12:52:43.290
> 
> 标签：xml, web, app-config

在一个 Web 项目中，我使用“web.config”文件上的“添加配置转换”来创建一个不同的 web.config，以实现构建配置的功能。当我在本地文件夹上发布网站时，我可以检查使用 XML 转换构建的 web.config 是否良好。但是当我在本地机器上运行应用程序时，Visual Studio Developper Server (Cassini) 采用 web.config 源，而不进行 XML 转换。

您知道如何使用构建配置的内置功能 web.config 在本地运行应用程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:59:23.050

转换是部署过程的一部分，而不是构建过程的一部分。因此，这是预期的行为。

您可以做的一件事是将代码部署到文件夹，然后将转换后的 web.config 文件复制到您从中调试的文件夹。这可能很麻烦，尤其是当您的 web.config 文件发生很大变化时。

# java - 调试时空指针（java.io.File）异常消失

> ID：12859514
> 
> 赞同：2
> 
> 时间：2012-10-12T12:52:45.693
> 
> 标签：java, debugging, file-io

我有一个引发此错误的应用程序（仅发生在 xlsx 文件中）：

```
java.lang.NullPointerException
at java.io.File.<init>(File.java:222)
at de.mpicbg.tds.core.ExcelLayout.openWorkbook(ExcelLayout.java:75) 
```

方法“openWorkbook”如下所示：

```
 private void openWorkbook() throws IOException {
    File excelFile = new File(fileName);

    timestamp = excelFile.lastModified();

    // open excel file
    if (fileName.endsWith(".xlsx")) {
        InputStream excelStream = new BufferedInputStream(new FileInputStream(excelFile));
        this.workbook = new XSSFWorkbook((excelStream));

    } else {
        this.workbook = new HSSFWorkbook(new POIFSFileSystem(new FileInputStream(excelFile)));
    }
} 
```

如果我在调试模式下执行所有操作，一切都会顺利进行，并且不会出现错误消息。我对这种行为没有任何解释，也不知道如何解决它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:55:52.293

错误消息说你`fileName`是`null`

如果在调试时无法重现此问题，您可以在方法开始时添加日志消息。

```
System.out.println("The fileName is `" + fileName+"`"); 
```

我建议您使用参数，而不是使用可能设置或未设置的字段。

```
private void openWorkbook(String fileName) throws IOException {
    assert fileName != null; 
```

# c++ - 如何始终显示当前函数的注释？

> ID：12859515
> 
> 赞同：2
> 
> 时间：2012-10-12T12:52:49.253
> 
> 标签：c++, eclipse, eclipse-cdt

好的，

我在 Eclipse CDT 的代码帮助下遇到了这个有点烦人的问题。每当您将鼠标悬停在某个函数上时，都会弹出一个窗口，向您显示该函数的注释。那很好。

现在，不幸的是，当该函数的源文件也可用时，它会显示该函数**而**不是注释。但是我**真的**不想看到函数的来源，我总是想看到标题中的注释。当您只想简短描述函数的作用时，谁会认为显示源代码是个好主意？不是特别适合 C++，是吗？;)

还有另一个问题：当您将鼠标悬停在某个功能上时会弹出此窗口……我真的不想每次想要该窗口时都将鼠标悬停。

我认为我的问题的解决方案是如果有一种方法可以在文本光标位于该函数上时始终显示该函数的标题注释。也许在一个我可以放在任何我想要的地方的永久窗口中。有没有办法做到这一点？也许是插件？

如果没有办法做到这一点：打开该窗口的快捷方式是什么，如何强制它显示标题注释而不是源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-02T08:47:28.840

从[这个](https://stackoverflow.com/questions/6456333/can-eclipse-hover-tips-display-doxygen-comments-from-header-file)线程来看，悬停问题似乎是有意设计的。它可能是由于 eclipse 最初是一个 Java IDE（其中函数定义等于源代码中的声明）。

唯一的解决方法似乎是通过将源代码编译成没有调试信息的 *.lib 并通过 lib 和标头包含它来排除源代码。当您的项目首先生成库时，这是不可能的。

您可以做的是在属性页的意义上使[文档可用。](http://help.eclipse.org/neon/topic/org.eclipse.cdt.doc.user/reference/cdt_u_c_editor_hov.htm)与我在[eclipse 论坛](https://www.eclipse.org/forums/index.php?t=msg&th=72994&goto=228482&#msg_228482)中发现的情况相比，这似乎有些复杂：

> 首选项页面中列出的“文档悬停”类型仅显示已贡献给 `org.eclipse.cdt.ui.CHelpProvider`扩展点的帮助内容。

# java - Java EE 应用程序部署模式书籍

> ID：12859516
> 
> 赞同：2
> 
> 时间：2012-10-12T12:52:58.297
> 
> 标签：java, jakarta-ee

我想知道是否有任何书籍或在线资源可以让我很好地了解不同服务器上的 Java EE 部署策略。甚至是一本可以告诉我 Java EE 应用程序部署基础知识的书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:04:23.663

您可能会发现这篇文章很有用：http: [//onjava.com/pub/a/onjava/2003/06/11/j2ee_deployment.html](http://onjava.com/pub/a/onjava/2003/06/11/j2ee_deployment.html)

这也是一本好书：[http ://www.objectsource.com/j2eehapters/Ch22-Deployment_Considerations.htm](http://www.objectsource.com/j2eechapters/Ch22-Deployment_Considerations.htm)

# php - 分配 NULL 和未设置有什么区别？

> ID：12859520
> 
> 赞同：0
> 
> 时间：2012-10-12T12:53:33.793
> 
> 标签：php

看看下面的代码：

```
 <?php 
   $a = 20;
   $a= NULL;  //or unset($a)
   if(isset($a))
   {
      print("hi");
   }
   else
   {
       echo "not initiated";
   }
   if(isset($b))  //$b is a variable which is not initialized
   {
       print("hi");
   }
   else
   {
       echo "not initiated";
   }

?> 
```

当应用未设置时，我得到相同的结果：

那么，分配 NULL 和未设置有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T13:10:15.657

正如您在下面看到的，对于标准比较操作，两者的行为几乎相同。

用于`unset()`释放不再使用但不能被 GC 释放的大型对象/数组，因为引用仍在其他地方。

```
-------------------------------------------------------------------------------
|   Expression     | gettype()  | empty()  | is_null()  | isset()  | boolean  |
-------------------------------------------------------------------------------
| $x = "";         | string     | TRUE     | FALSE      | TRUE     | FALSE    |
| $x = null        | NULL       | TRUE     | TRUE       | FALSE    | FALSE    |
| var $x;          | NULL       | TRUE     | TRUE       | FALSE    | FALSE    |
| $x is undefined  | NULL       | TRUE     | TRUE       | FALSE    | FALSE    |
------------------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T12:55:49.483

正如有人从[unset()中所说的那样](http://us2.php.net/manual/en/function.unset.php#86347)

> unset() 就像它的名字所说的那样 - 取消设置一个变量。它不会强制立即释放内存。PHP 的垃圾收集器会在它认为合适的时候执行它 - 有意尽快，因为无论如何都不需要这些 CPU 周期，或者直到脚本耗尽内存之前，无论首先发生什么。
> 
> 如果你正在做 $whatever = null; 那么你正在重写变量的数据。您可能会更快地释放/缩小内存，但它可能会更快地从真正需要它们的代码中窃取 CPU 周期，从而导致更长的整体执行时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T12:55:13.537

[FORM PHP DOC isset](http://php.net/manual/en/function.isset.php)

> 确定变量是否已设置且不为 NULL。
> 
> 如果一个变量已经用 unset() 取消设置，它将不再被设置。如果测试已设置为 NULL 的变量，isset() 将返回 FALSE。另请注意，NULL 字节（“\0”）不等同于 PHP NULL 常量。

未设置

> unset() 销毁指定的变量。

它是否启动并不重要，因为您使用 isset 它会为启动的变量和空值返回 false

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T12:58:38.590

您正在使用`isset()`. 根据[手册](http://www.php.net/manual/en/function.isset.php)，`isset()`检查是否设置了变量而不是 NULL。因此，您不能使用`isset()`来区分未设置的变量和为 NULL 的变量。

将变量设置为 NULL 的确切含义是：将变量设置为一个值，并且该值是特殊值 NULL。

另一方面`unset()`意味着不再设置变量。它没有价值，基本上不存在了。

如果您想深入研究，这对垃圾收集和其他事情有影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T13:04:44.520

几乎已经回答了所有问题，但我只想添加这个示例：

```
$a = 1;
$b = 2;

if ( $a == true ) echo 'Value'; else echo 'No value';
if ( $b == true ) echo 'Value'; else echo 'No value';

/*
Value
Value
*/

$a = NULL;
unset( $b );

if ( $a == true ) echo 'Value'; else echo 'No value';
if ( $b == true ) echo 'Value'; else echo 'No value';

/*
No value

Notice: Undefined variable: b in C:\test\test.php on line 13
No value
*/ 
```

结果可能很接近，但最后一个会产生通知，因为不再有这样的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T14:54:58.650

主要区别在于将变量设置为 NULL，如：

```
$a = NULL; 
```

正在分配一个值，这里是`NULL`值。

虽然`unset()`喜欢

```
unset($a); 
```

正在取消设置变量，这意味着将其从变量表中删除。

由于未定义的变量都`NULL`在 PHP 中，您可能看不出区别。

但是，如果您取消设置的变量是别名，则仅删除别名，不会`NULL`为其分配值。

一个示范：

```
<?php                         // 01
                              // 02
$a = 1;                       // 03
$b = &$a;                     // 04
                              // 05
$b = NULL;                    // 06
                              // 07
var_dump($a);                 // 08
                              // 09
unset($b);                    // 10
                              // 11
var_dump($a);                 // 12
                              // 13    
unset($a);                    // 14
                              // 15
var_dump($a);                 // 16 
```

输出：

```
NULL
NULL

Notice: Undefined variable: a in /t.php on line 16
NULL 
```

[http://codepad.org/cC1vRx0W](http://codepad.org/cC1vRx0W)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-21T08:53:42.580

将变量设置为 NULL 意味着将值 NULL 分配给变量，就像变量设置为一个值一样，并且 value 是特殊值 NULL。

而 unset() 会破坏指定的变量。函数内部 unset() 的行为可能因您尝试销毁的变量类型而异。

unset() 表示该变量不再设置，它没有值，基本上该变量不再存在。

# java - 创建具有随机属性的对象

> ID：12859522
> 
> 赞同：0
> 
> 时间：2012-10-12T12:53:49.717
> 
> 标签：java

我正在构建一个铁路模拟器，包括乘客和车站（以及其他）类。乘客类有一个属性 endLoc，它将是每个乘客（即车站对象）的期望结束位置。我在我的网络上的每个车站将随机数量的乘客生成到一个 ArrayList 中，并且希望他们的 endLoc 属性也随机生成（在所有车站对象的列表中），但我无法工作每次如何使属性成为列表中的随机属性。

```
 ArrayList<Passenger> passengers = new ArrayList<Passenger>();
    for (int i = 0; i<p; i++){
        passengers.add(new Passenger(statA)); 
```

即，一旦我有了我的随机数，并将它映射到我想要的哪个电台，我在代码中而不是 statA 中输入什么来表示适用于我的随机数的电台？

谁能告诉我如何做到这一点，或者至少指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:16:27.720

写这样的东西：

```
 List<String> stations = new ArrayList<String>();  
            //add stations..in the list

    int numStations = stations.size();

    int maxPassengersAtStation = 100;//assgin you number

    for(int sCount=0; sCount<numStations; sCount++){
        int passangersAtStation = (int)(Math.random() * maxPassengersAtStation);
        for(int j=0; j<passangersAtStation; j++){
            int passengerDestination = sCount + (int)(
                       Math.random() * ((numStations - sCount) + 1));
            passengers.add(new Passenger(stations.get(passengerDestination)));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:57:02.167

生成一个随机 int x 然后执行 x = x % allStations.size(); x 将是您在所有电台列表中的随机索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:55:33.730

好吧，一些随机的想法是生成一个从 1 到 your_list.length 的数字，然后从列表中取出该对象并将其分配给您的 endLoc。

# qml - 矩形作为 ListView 中的委托使 highlightItem 不起作用

> ID：12859529
> 
> 赞同：0
> 
> 时间：2012-10-12T12:54:13.263
> 
> 标签：qml

在下面的代码中，如果委托 Item 是 Rectangle，即使 Rectangle 继承了 Item，突出显示也不起作用，这是一个错误，还是我遗漏了什么。

```
ListView {
    width: 200
    height: 500
    focus: true
    highlight: Component {
        Rectangle {
            width: 200
            height: 20
            color: "red"
        }
    }

    model: ListModel {ListElement {name: "dummy 1"} ListElement {name: "dummy 2"}}
    delegate: Item { // If Item is replaced with Rectangle highlight does not work even though Rectangle inherits Item
        width: 200
        height: 20
        Text {
            text: name
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:19:32.050

您必须将委托矩形的颜色设置为透明。默认情况下，矩形的颜色是白色，Item 是透明的。

```
ListView {
    width: 200
    height: 500
    focus: true
    highlight: Component {
        Rectangle {
           width: 200
           height: 20
           color: "red"
        }
    }

    model: ListModel {ListElement {name: "dummy 1"} ListElement {name: "dummy 2"}}
    delegate: Rectangle {
        width: 200
        height: 20
        color: "transparent"
        Text {
            text: name
        }
    }
} 
```

# magento - Magento 模块安装后在管理面板中看不到

> ID：12859533
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:54:24.527
> 
> 标签：magento, magento-1.7, magento-1.8

我在我的 magento 站点中安装了一个模块。但是安装后我在管理面板中看不到它。有谁能够帮我？ [http://www.magentocommerce.com/magento-connect/simple-admin-payment.html](http://www.magentocommerce.com/magento-connect/simple-admin-payment.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:21:06.133

1.  转到*系统-> 缓存管理*：清除所有缓存。
2.  注销并转到*系统-> 配置-> 高级*：检查该模块是否在已安装模块的列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:43:07.840

我知道这已得到解答，但这是将来任何人发现此问题的另一个可能原因。

商店管理员可能已将用户角色/权限设置为仅允许访问后端的特定部分。我已经安装了模块，几乎疯了，想知道为什么模块没有后端配置部分，只是发现客户端已经剥夺了我的一些管理员用户的权限。

因此，如果当前登录的管理员用户没有正确的“允许”权限，可能会安装一些新模块。

将角色/权限设置为允许这样做，或者如果这不可能，您可以在 admin_rule 表中的数据库中找到配置部分的权限。找到您尝试访问的部分并将“权限”从“拒绝”更改为“允许”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-04T07:23:54.467

fire setup upgrade 命令后模块安装

```
php bin/magento setup:upgrade 
```

触发此命令后

```
php bin/magento setup:static-content:deploy 
```

并检查管理面板

# c# - linq中的简单选择查询

> ID：12859536
> 
> 赞同：13
> 
> 时间：2012-10-12T12:54:36.640
> 
> 标签：c#, sql, .net, linq, contains

假设我有一个学生表，我想显示 ID 为 1 的学生。

```
SELECT *
FROM STUDENT ST
WHERE ST.ID = 1 
```

这就是我在 Linq 中实现这一点的方式。

```
StudentQuery = from r in oStudentDataTable.AsEnumerable()
                                     where (r.Field<int>("ID") == 1)
                                     select r;
            oStudentDataTable = StudentQuery.CopyToDataTable(); 
```

但是如果我想显示这些 id 为 1,2,3,4,5 的学生怎么办..

```
SELECT *
FROM STUDENT ST
WHERE ST.ID IN (1,2,3,4,5) 
```

如何在 Linq 中实现这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T12:56:47.797

采用[`.Contains`](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)

```
var list = new List<int> { 1, 2, 3, 4, 5 };

var result = (from r in oStudentDataTable.AsEnumerable()
              where (list.Contains(r.Field<int>("ID"))
              select r).ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T12:56:34.293

尝试`IEnumerable.Contains`：

```
var list = new List<int>(){1,2,3,4,5};
StudentQuery = from r in oStudentDataTable.AsEnumerable()
                                 where (list.Contains(r.Field<int>("ID")))
                                 select r;
        oStudentDataTable = StudentQuery.CopyToDataTable(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T12:32:57.423

也试试这个：

```
var list = new List<int> { 1, 2, 3, 4, 5 };

List<StudentQuery> result = (from r in oStudentDataTable.AsEnumerable()
              where (list.Contains(r.Field<int>("ID"))
              select new StudentQuery
              { /*
                .Your entity here
                .
                */
              }).ToList<StudentQuery>(); 
```

# java - 如何在 Java 中将 int 值转换为 long 值？

> ID：12859539
> 
> 赞同：-7
> 
> 时间：2012-10-12T12:54:48.130
> 
> 标签：java

我有两个整数值，我想在 java 中将这两个值的差作为 long 返回。

可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T12:56:09.517

您可以将结果分配给 long：

```
long result = intval2 - intval1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:00:09.983

```
public Long difference(Integer i1, Integer i2){
   return new Long(i1-i2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:58:14.277

你可以做

```
long difference = (long) i1 - i2; 
```

如果您需要绝对差异

```
long difference = Math.abs((long) i1 - i2); 
```

例如

```
int i1 = 2000000000;
int i2 = -2000000000;
long difference = Math.abs((long) i1 - i2);
System.out.printf("%,d%n", difference); 
```

印刷

```
4,000,000,000 
```

* * *

您可能需要强制转换的原因`long`是为了避免溢出。两个 int 值之间的最大差异在最大值和最小值之间，但如果你这样做

```
System.out.println(Integer.MAX_VALUE - Integer.MIN_VALUE); 
```

印刷

```
-1 
```

由于溢出，而使用演员表你会得到

```
System.out.println((long) Integer.MAX_VALUE - Integer.MIN_VALUE); 
```

印刷

```
4294967295 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:09:16.083

显然这是火箭科学。如果 i1 和 i2 是整数或整数：

```
return i1-i2; 
```

需要 Java 1.5+。但没有强制转换或转换。

很难，即不可能，相信你甚至尝试过任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T12:56:44.723

```
int val1=10;

int val2=6;

long val3 = (long) val1 - val2; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T12:57:15.167

如果您有大整数，则可以同时使用`Integer.longValue()`两者并简单地减去这些值。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-12T12:57:21.947

简单，转换为 long 并减去：

```
public long diff(int i1, int i2) {
     return ((long) i1) - i2;
} 
```

自动装箱根据需要处理包装/展开

# c++ - 如何 std::thread 睡眠

> ID：12859548
> 
> 赞同：19
> 
> 时间：2012-10-12T12:55:19.540
> 
> 标签：c++, multithreading, c++11

我是 std::thread 的新手。我需要让一个线程从另一个线程进入睡眠状态，这可能吗？在示例中，我看到的只是如下代码：

```
std::this_thread::sleep_for(std::chrono::seconds(1)); 
```

但我想做的是：

```
std::thread t([]{...});
t.sleep(std::chrono::seconds(1)); 
```

或者 `sleep(t, std::chrono::seconds(1));`

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-12T13:01:47.920

因为`sleep_for`是同步的，它只在当前线程中才真正有意义。您想要的是一种暂停/恢复其他线程的方法。该标准没有提供执行此操作的方法（afaik），但您可以使用依赖于平台的方法，使用`native_handle`.

例如在 Windows`SuspendThread`和`ResumeThread`.

但更重要的是，几乎没有必要这样做。通常，当您遇到标准未提供的您需要的基本内容时，这是一个危险信号，表明您正在走上一条危险的设计道路。考虑以不同的方式实现更大的目标。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-12T12:59:52.360

不，标准没有给你这样的便利，也不应该。睡觉有什么作用？它至少在给定的时间内暂停给定线程的执行。其他线程是否可能在不同步的情况下知道给定线程可以进入睡眠状态以获得更好的性能？

不可以。您必须提供一个同步接口，这将抵消线程的性能增益。唯一具有所需信息的线程是否可以睡眠是线程本身。因此[`std::thread`](http://en.cppreference.com/w/cpp/thread/thread)没有成员`sleep`，而`std::this_thread`有一个。

# android - 保留选中的项目列表视图过滤器

> ID：12859550
> 
> 赞同：1
> 
> 时间：2012-10-12T12:55:26.283
> 
> 标签：android

我有一个列表视图女巫支持多项选择（复选框）。我还有一个过滤器，当我在编辑中键入文本时，它会对列表视图进行排序。

问题是当我输入某些内容时，如果我选择了一个项目，我的列表会被过滤，然后我使用过滤器搜索另一个字符串，它会检查一个不同的项目。

无论我应用于 ListView 的任何过滤器，如何保留选中的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:03:39.623

由于 ListView 的回收行为，您需要手动维护 CheckBox 的状态。我已经写了一个博客来解释如何管理它。

[`ListView with CheckBox Scrolling Issue`](http://lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)

# javascript - jquery价格表斐波那契

> ID：12859559
> 
> 赞同：-4
> 
> 时间：2012-10-12T12:55:52.213
> 
> 标签：javascript, jquery, fibonacci

嗨，我有一个 javascript 函数应该可以定价，但我没有找到任何可以帮助我的 jquery 函数。这是背后的逻辑

```
1 user to 4 will pay = 40 / user so 3users = 120
5 users to 9 will pay = 36/ user so 7 users = 268
10 users to 19 will pay = 32/user so 15 users =  564 
20 users to 49 will pay 28/user so 40 users = 1220
50 users to 99 will pay 24/ user so 60users  = 1860
100 users to infinite will pay 20/ user so 114 users = 3000 
```

我需要某种函数来做到这一点，我试图用多个数组和函数来检查它是否在两个数字之间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:59:47.370

我想我明白了，所以这样的事情可能会奏效：

```
function getTotal(num_users) {
    var amount = 0;
    if (num_users >= 100) {
        amount = 20;
    } else if (num_users  >= 50) {
        amount = 24;
    } else if (num_users  >= 20) {
        amount = 28;
    } else if (num_users  >= 10) {
        amount = 32;
    } else if (num_users  >= 5) {
        amount = 36;
    } else if (num_users  >= 1) {
        amount = 40;
    }
    return num_users*amount;
} 
```

这是一个 jsFiddle 来演示：

[http://jsfiddle.net/VqZ7j/1/](http://jsfiddle.net/VqZ7j/1/)

# c++ - 重载运算符 +。字符串类

> ID：12859568
> 
> 赞同：1
> 
> 时间：2012-10-12T12:56:22.147
> 
> 标签：c++, operator-overloading, overloading

我自己写字符串类。我重载了 + 运算符。它的工作正常，但后来我试图 eguate `cstr = str +pop` ，它什么也没做。`您可以在 main() 函数中看到我的错误。编译器没有给出任何错误。

```
#include <iostream>
#include <string.h>
#include <stdlib.h>

using namespace std;

class S {

public:
          S();
          S(const char *str);
          S(const S &s);

         ~S() { delete []string;}
          S  &operator  =(const S   &s);

          int  lenght() const {return l     ;}
      char*  strS() const {return string;}

      friend ostream &operator <<(ostream &, const S &first) {cout<<first.string;}
      friend S    operator+ (const S& first, const S& second);

private:
          char *string;
          int l;

};

int main(){
S pop("Q6");
S str("M5");

S cstr = str +pop; // works correct
cout<<str;

str = str + pop;
cout<<str ;        // doesnt work, it doesnt write in terminal

return 0;
}
S::S()
{
    l = 0;
    string = new char[1];
    string[0]='\0';
}

S::S(const char *str)
{
    l      = strlen(str);
    string = new   char[l+1];
    memcpy(string, str, l+1);
}

S::S(const S &s)
{
     l = s.l;
     string = new char[l+1];
     memcpy(string,s.string,l+1);
}

S &S::operator=(const S &s)
{
    if (this != &s)
    {
        delete []string;
        string = new char[s.l+1];
        memcpy(string,s.string,s.l+1);
        return *this;
    }
    return *this;
}

S    operator +(const S& first, const S& second)

{
    S temp;
    temp.string = strcat(first.strS(),second.strS());
    temp.l      = first.lenght() + second.lenght();

  return temp;
 } 
```

我期待着你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:02:44.730

您的运营商有错误！

```
S temp;
//^^^^ has only one byte buffer!!!
temp.string = strcat(first.strS(),second.strS());
//   1 byte   ^^^^^ strcat appends second.strS to first.strS 
```

您应该为 temp 重新分配内存：

```
S temp;
temp.l      = first.lenght() + second.lenght();
delete [] temp.string; // !!!! - 
temp.string = new char[temp.l + 1]; // !!!!
// you should have another c-tor which can allocate memory!!!
// like: S(unsigned length, unsigned char c = '\0') 
strcpy(temp.string, first.strS());
strcat(temp.string, second.strS()); 
```

除了这个明显的错误 -`std::bad_alloc`例如，您还应该注意异常。查看复制和交换习语以获得更好的方法来完成此任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:02:57.547

从[strcat 的手册页](http://www.manpagez.com/man/3/strcat/)：

> ```
>  The strcat() and strncat() functions append a copy of the null-terminated
>  string s2 to the end of the null-terminated string s1, then add a termi-
>  nating `\0'.  The string s1 must have sufficient space to hold the
>  result. 
> ```

您正在使用它，就好像它为新的 char 数组分配空间，然后填充它。但是，它不会那样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:04:04.863

问题是您`operator+`没有为组合字符串分配任何内存。它也不会将字符串复制到正确的位置（它将字符串复制到第一个，而不是临时）。您拥有的类设计没有简单的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:03:51.413

问题在于您的`operator+`. `strcat()`将第二个参数指向的字符串附加到第一个参数指向的字符串。返回值是第一个参数。因此，从`operator+`结果返回时`S`，第一个`S`参数将指向同一个缓冲区。以后会被删两次。。。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:12:26.307

检查 的描述`strcat`。它将第二个参数附加到第一个参数，假设两者都是以空结尾的字符串，并返回第一个参数。在你的情况下：

*   它附加到`string`first 的成员，尽管它没有足够的内存（未定义的行为），并且

*   它将`string`指针 in设置为指向与 in`temp`相同的内存`first`；第一个被破坏的，另一个指向已删除的内存，并且在默认构造函数中分配的内存`temp`被泄露。

此外，你永远不会用 终止你的字符串`'\0'`，所以`strcat`几乎可以做任何事情。

更好的解决方案是首先实施`+=`，然后`+`根据它进行定义。 `+=`将不得不增加它所拥有的内存，并将第二个字符串中的文本附加到它。

当我在做的时候：你的`operator=`也不行。`new` 如果失败（抛出`std::bad_alloc`），它将使对象处于无法破坏的状态。您必须确保所有可能失败的操作都发生*在*`delete`. （您需要测试自赋值的事实是一个警告信号。在正确编写的赋值运算符中，这种测试很少需要。）在这种情况下，交换习语可能是您最好的选择：复制构造 a new`S`在局部变量中，然后交换它们的成员。

# android - CheckoutPurchase.setError: type=UNKNOWN, code =-1, message = Error Processing Purchase [DF-BPA-13]

> ID：12859569
> 
> 赞同：0
> 
> 时间：2012-10-12T12:56:27.520
> 
> 标签：android, in-app-billing

所以我正在使用 android billing library 并有这个小设置：

```
 BillingController.setConfiguration(new BillingController.IConfiguration() {

                    public byte[] getObfuscationSalt() {
//Havent changed this
                        return new byte[] { 41, -90, -116, -41, 66, -53, 122,
                                -110, -127, -96, -88, 77, 127, 115, 1, 73, 57,
                                110, 48, -116 };
                    }

                    public String getPublicKey() {
                        return "The key (yes this is set correctly)";
                    }
                });

        BillingController.setDebug(true);

        mBillingObserver = new AbstractBillingObserver(this) {

            public void onBillingChecked(boolean supported) {
                BuyCoins.this.onBillingChecked(supported);
            }

            public void onPurchaseStateChanged(String itemId,
                    PurchaseState state) {
                BuyCoins.this.onPurchaseStateChanged(itemId, state);
            }

            public void onRequestPurchaseResponse(String itemId,
                    ResponseCode response) {
                BuyCoins.this.onRequestPurchaseResponse(itemId,
                        response);
            }

            public void onSubscriptionChecked(boolean supported) {
                BuyCoins.this.onSubscriptionChecked(supported);
            }

        };

        BillingController.registerObserver(mBillingObserver);
        BillingController.checkBillingSupported(this);
        BillingController.checkSubscriptionSupported(this);

    } 
```

然后简单地说：

```
public void onSubscriptionChecked(boolean supported) {
    if (supported) {
        Toast.makeText(this, "Subscription is supported", Toast.LENGTH_SHORT)
                .show();
    } else {
        Toast.makeText(this, "Subscription is NOT supported", Toast.LENGTH_SHORT)
                .show();

    }
}

public void onRequestPurchaseResponse(String itemId, ResponseCode response) {
    if (response == ResponseCode.RESULT_OK) {
        Toast.makeText(this, "Purchase Response OK", Toast.LENGTH_LONG)
                .show();
    } else if (response == ResponseCode.RESULT_USER_CANCELED) {
        Toast.makeText(this, "Purchase Response Canceled",
                Toast.LENGTH_LONG).show();
    } else if (response == ResponseCode.RESULT_SERVICE_UNAVAILABLE) {
        Toast.makeText(this, "Purchase Response Unavailable",
                Toast.LENGTH_LONG).show();
    } else if (response == ResponseCode.RESULT_ERROR) {
        Toast.makeText(this, "Purchase Response Error", Toast.LENGTH_LONG)
                .show();
    } else {
        Toast.makeText(this, "UNKNOWN RESPONSE", Toast.LENGTH_LONG)
        .show();        }
}

public void onPurchaseStateChanged(String itemId, PurchaseState state) {
    Toast.makeText(this,
            "Purchase State: " + state.toString() + " for item " + itemId,
            Toast.LENGTH_LONG).show();

    purchaseList();
}

public void onBillingChecked(boolean supported) {
    if (supported) {
        Toast.makeText(this, "Billing is supported", Toast.LENGTH_SHORT)
                .show();
    } else {
        Toast.makeText(this, "Billing is NOT supported", Toast.LENGTH_SHORT)
                .show();

    }
} 
```

并且该项目被称为：

```
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.buy_coins_button_one:
        BillingController.requestPurchase(this, "coins",true /* confirm */, null);
        break;
    case R.id.buy_coins_button_two:
        BillingController.requestPurchase(this, "android.test.purchased",true /* confirm */, null);
        break;

    }

} 
```

如果我点击按钮一（硬币），我会得到标题中提到的错误（“错误处理购买：[DF-BPA-13]，然后我什至可以点击“接受并购买”

我到处检查过，似乎没有关于为什么会出现这个错误的明确答案。

如果我点击按钮二（保留的 android 按钮），我可以点击购买，但随后我得到：

从服务器检索信息时出错。[DF-DFERH-01]

所以这里有一些步骤来对抗这种胡说八道：

*   公钥是正确的
*   应用内商品已发布 1 天
*   在计费观察者上将调试设置为 true
*   应用程序已导出并使用密钥库签名，并安装了 apk
*   测试用户不是发布用户
*   测试用户在测试帐户列表中
*   调试被设置为关闭同样的问题
*   主要手机用户已更改（恢复出厂设置）为不同的测试用户
*   在不同用户的不同设备上测试
*   APK 和 Market 上的版本和版本代码相同

我完全迷失在这里。也许值得注意的是还有另一个错误（[27] 而不是[1](https://stackoverflow.com/questions/8182272/in-app-purchase-issue-in-android)像其他错误）：`[27] FileBasedKeyValueStore.delete: Attempt to delete 'paramsnMy695NrbaHSHjK0hNnMgg' failed!`

我在某处遗漏了什么吗？这一切似乎都非常简单。

我看过：

[应用内购买问题](https://stackoverflow.com/questions/8182272/in-app-purchase-issue-in-android)

[[DF-BPA-13]](http://forum.xda-developers.com/showthread.php?t=1768975)

[应用内结算不起作用](https://stackoverflow.com/questions/11477005/in-app-billing-not-working-your-request-could-not-be-processed)

我会及时通知你我是如何解决的，因为这似乎是一个常规问题

编辑：因此您无法从开发控制台中删除应用程序，因此删除/添加不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:38:47.647

哈明白了。这很奇怪。也许这是一个侥幸，它刚刚开始，但这对我有用：

原来测试帐户和发布者帐户在结帐时绑定到同一张信用卡。在测试帐户上更改它修复了它。呸呸呸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:51:10.150

这基本上是因为谷歌需要一些时间来同步产品列表。因此，如果您对产品进行任何更改或添加新项目，然后给一些时间（1 小时左右），它将自动修复

# c# - 检测 Visual Studio 何时为智能感知测试网站

> ID：12859577
> 
> 赞同：11
> 
> 时间：2012-10-12T12:56:48.047
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, razor, asp.net-mvc-4

*这里有很多展示 - 但它是必要的。*

不知道有多少人知道这一点，但是，Visual Studio 中的 Razor 代码编辑器会导致您的网站在`Application_Start`事件之前被“测试”——这在我当前的项目中造成了一些烦人的问题，它使用WebActivator 做了很多网站初始化。

***更新 - 仔细检查它不仅仅是 Razor - 它看起来像是 Visual Studio 范围的 - 因此标题的变化***

我需要能够检测网站代码何时由 Visual Studio 而不是由 Web 服务器运行。

为了演示 - 执行以下操作（**完全**按照书面说明以确保其重现）：

*   创建一个新的 MVC 4 站点，我使用了 Internet 应用程序模板，因此创建时有一些页面。
*   从 nuget 添加 WebActivator 包
*   将一个类添加到 App_Start 文件夹，名为`RazorPageBugTest`
*   粘贴此代码（更改相关的命名空间）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using MvcApplication6.App_Start;
using System.IO;

[assembly: WebActivator.PreApplicationStartMethod(
  typeof(RazorPageBugTest), "Start", Order = 0)]

namespace MvcApplication6.App_Start
{
  public static class RazorPageBugTest
  {
    public static void Start()
    {
      using (var writer = File.Open(@"c:\trace.txt", FileMode.Create))
      {
        using (var tw = new StreamWriter(writer))
        {
          tw.AutoFlush = true;
          tw.WriteLine("Written at {0}", DateTime.Now);
        }
      }
    }
  }
} 
```

请注意，此代码无论如何通常都不能在 Web 服务器上运行 - 考虑到它正在写入驱动器 C:（如果您不以管理员身份运行 VS，这实际上可能无法在您的计算机上运行）。

*   现在构建项目。
*   *如果您已经在 C 上打开了资源管理器，则下一点效果最好：*完成后，找到 Razor 视图并打开它
*   等待所有 C#/VB 位被突出显示
*   看一下驱动器 C - 哦，看，有一个名为“trace.txt”的文件，日期在最后几秒钟内！

这说明了这里的问题 - Razor 代码编辑器正在启动 AppDomain，并且有效地对网站进行炮击以获得智能感知（包括 App_Helpers 文件夹中的内容等）。现在它实际上并没有触发该`Application_Start`方法 - 但是当您在项目中也有 WebActivator 时，它的任何应用程序启动前方法都会***被***触发。

在我的情况下，这会导致巨大的问题 - 高 CPU 使用率和内存使用率`devenv.exe`（相当于刚刚启动的网站），因为我初始化了 DI 容器并且天知道此时还有什么，但一个特别是证明*真的很*烦人。

我的网站有一个组件，它在网络上侦听来自网络场中其他机器的状态和缓存无效消息。在 QA 和 Live 环境中，这个监听器永远不会打开端口并监听 - 但是，在我的开发机器上，它经常失败 - 说端口已经在使用中。当我寻找保持它打开的过程时 - 它总是`devenv.exe`.

你猜对了——我在一个 WebActivator 初始化的引导调用中启动了这个监听器。

所以问题是 - 有没有人知道一种方法来检测代码*不是*由“适当的”网络主机运行的，所以我可以阻止它运行？我对此特别充满希望，因为这也意味着我的 Visual Studio 和 Razor 编辑体验将因此更快地成为该死的网站！

作为奖励，任何修复都可以合法地发送给 WebActivator 的作者 David Ebbo，这样他就可以更早地将其粘贴到他的堆栈中以完全防止问题发生！

**更新**

我刚刚[在 GitHub 上的 WebActivator 页面上添加了一个问题，](https://github.com/davidebbo/WebActivator/issues/8)以查看 David Ebbo 是否可以将我的修复或更好的修复推送到 WebActivator 组件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:13:29.077

猜猜`Process.GetCurrentProcess().ProcessName`在这种情况下的价值是多少？

答案：`Microsoft.VisualStudio.Web.Host`。

因此，如果`VisualStudio`进程名称中有 a，您可以安全地刮掉它。

另请查看[`this article`](http://msdn.microsoft.com/en-us/library/ms242202.aspx)托管过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T18:09:56.890

无需编写自己的逻辑来检测这一点，您可以只使用`System.Web.Hosting.HostingEnvironment.InClientBuildManager`，这对于 VS 运行该代码以及在 aspnet_compiler.exe 中运行时都是如此。

有关更多详细信息，请参阅此[答案。](https://stackoverflow.com/questions/13642691/avoid-aspnet-compiler-running-preapplicationstart-method/13689600#13689600)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:14:42.367

虽然达林关于托管过程的信息是正确的——从我所见，这只适用于 VS2012。早期版本的 VS 直接在 devenv 中托管。

由于我这里有一个 nuget 包堆栈在工作，我已将此扩展方法放入我们的 Web 核心组件中，该组件合并到`WebActivator`命名空间中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;

namespace WebActivator
{
  public static class HostInformation
  {
    private static readonly string[] _knownDevEnvironments = new[] { 
      "devenv",
      "microsoft.visualstudio.web.host"
    };
    private static Lazy<bool> _isDevelopmentEnvironment = new Lazy<bool>(
      () => _knownDevEnvironments.Any(
        s => s.Equals(Process.GetCurrentProcess().ProcessName,
                      StringComparison.OrdinalIgnoreCase)
      ));

    /// <summary>
    /// Returns true if the current hosting environment is a known 
    /// development environment instead of a web server or similar.
    /// 
    /// This is used to decide whether or not to actually run 
    /// pre-application-start methods which are undesirable to 
    /// run in the development environment.
    /// </summary>
    /// <returns></returns>
    public static bool IsDevelopmentEnvironment
    {
      get
      {
        return _isDevelopmentEnvironment.Value;
      }
    }

  }
} 
```

所有这些都意味着在我的`App_Start`初创公司`WebActivator`中，命名空间列表中已经很方便了——我可以这样做：

```
if(HostInformation.IsDevelopmentEnvironment)
  return; 
```

从而使所有启动方法都能更早地被淘汰。

老实说，我讨厌这种解决方案，但出于同样的原因，实际上没有更简单的方法可以做到这一点。

从好的方面来说，我的 VS（2010 和 2012）现在可以非常快地向我展示 Razor 文件的智能感知；不会在内存中大量增长，而且 - 更重要的是 - 永远不会抓住那个网络端口......

# ruby-on-rails - Rails - 使用 JSON 作为时间线

> ID：12859579
> 
> 赞同：0
> 
> 时间：2012-10-12T12:56:57.117
> 
> 标签：ruby-on-rails, json, routes, timeline

我使用 json_builder 从timeline.verite.co 生成时间线所需的JSON 文件，因为它需要采用特定格式。但是，当我加载页面时，它会卡在白色背景和加载 gif 中。如果我给它一个指向一些示例数据的链接，而不是为用户生成的数据，它就可以工作。html 页面 (users/1/events) 工作正常。有人知道为什么吗？我现在已经没有想法了！！

更新：

我让 JS 链接到带有来自 users/1/events.json 的 JSON 粘贴内容的静态文件，它工作正常。所以我假设问题是当 JS 尝试获取它时页面是空白的，并且只有在您实际访问该 URL 时才会填充。我该如何解决这个问题？

生成的 JSON 文件（通过转到 /users/1/events.json 获得）：

```
{
  "timeline": {
    "headline": "Emily",
    "type": "default",
    "text": "A Timeline",
    "startDate": "1922,10,30",
    "date": [
      {
        "startDate": "2012,11,17",
        "endDate": "2012,11,17",
        "headline": "My Birthday",
        "text": "This is my birthday",
        "asset": {
          "media": "http://www.youtube.com/watch?v=dePMU8R131s",
          "credit": "",
          "caption": "Happy Birthday"
        }
      }
    ]
  }
} 
```

必需的语法：

```
{
    "timeline":
    {
        "headline":"Stuff People Say",
        "type":"default",
        "text":"People say stuff",
        "startDate":"2012,1,26",
        "date": [
            {
                "startDate":"2012,1,26",
                "endDate":"2012,1,27",
                "headline":"Stuff Politicians Say",
                "text":"<p>In true political fashion, his character rattles off common jargon heard from people running for office.</p>",
                "asset":
                {
                    "media":"http://youtu.be/u4XpeU9erbg",
                    "credit":"",
                    "caption":""
                }
            },
            {
                "startDate":"2012,1,10",
                "headline":"Stuff Nobody Says",
                "text":"<p>Have you ever heard someone say “can I burn a copy of your Nickelback CD?” or “my Bazooka gum still has flavor!” Nobody says that.</p>",
                "asset":
                {
                    "media":"http://youtu.be/f-x8t0JOnVw",
                    "credit":"",
                    "caption":""
                }
            }
        ]
    }
} 
```

控制器（相关位）：

```
class EventsController < ApplicationController

  respond_to :json, :html

def myevents
    @events = current_user.events
    respond_with @users
  end

end 
```

路线：

```
resources :events do
    member do
      get 'myevents'
    end
  end

match 'users/:id/events' => 'events#myevents' 
```

JS调用时间线：

```
<%= javascript_include_tag "/js/storyjs-embed.js" %>
        <script>
            $(document).ready(function() {
                createStoryJS({
                    type:       'timeline',
                    width:      '800',
                    height:     '600',
                    source:     '/users/<%= current_user.id %>/events.json',
                    embed_id:   'my-timeline'
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:49:46.387

我最终找到了答案，表单的 js 没有正确读取 JSON 文件。我需要添加一个回调。

# c# - 使用 .exe 文件创建安装程序

> ID：12859583
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:57:12.133
> 
> 标签：c#, .net, visual-studio

我让 Crypto Obfuscator 在我的程序上运行，我得到了一个 .exe 文件，其中包含所有 DLL 和其中的所有内容。那真的很棒，但我需要从中创建一个安装程序。它应该不花时间并且有一个图形用户界面！最好的（免费）方法是什么？

有什么程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:07:45.313

有几个解决方案：

[Inno Setup](http://www.jrsoftware.org/isinfo.php)和[NSIS](https://en.wikipedia.org/wiki/Nullsoft_Scriptable_Install_System)是流行的免费和开源*脚本*安装程序创建者。

如果您更喜欢图形界面，免费的 InstallSimple 和 Clickteam 的 Install Creator 是常见的选择。

对于更多替代方案，维基百科有一个标题为“安装软件列表”的页面，提供了可用内容的一个不错的概述。

（很抱歉缺少超链接 - 该网站的垃圾邮件预防系统不允许我发布更多内容。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:58:19.890

它在 Visual Studio 中:)

[http://msdn.microsoft.com/en-us/library/2kt85ked.aspx](http://msdn.microsoft.com/en-us/library/2kt85ked.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:01:23.200

您可以使用[Nullsoft 脚本安装系统](http://nsis.sourceforge.net/Main_Page)

# ruby - 为什么 Array.reverse_each 比 Array.reverse.each 快

> ID：12859587
> 
> 赞同：18
> 
> 时间：2012-10-12T12:57:26.440
> 
> 标签：ruby, arrays

我几乎不使用`reverse_each`方法，而是在`reverse.each`需要向后遍历数组时调用。所以我只是做了一些基准测试，显然`reverse_each`比`reverse.each`.

*   这是因为在使用时在迭代它之前创建一个反向数组有一个时间元素`reverse.each`吗？

然而，在我的示例（如下）中，大小为 4 的数组进行了 1000 万次迭代`TIME(reverse) + TIME(each) - TIME(reverse.each) ~ 1.2 seconds`。无论数组的大小如何，这个时间差或多或少都保持稳定。我已经测试了多达 100 个元素。

*   是什么造成了这一秒的差异？

* * *

```
require 'benchmark'

number = 10000000
arr = (1..4).to_a

Benchmark.bm(13) do |x|
    x.report("reverse.each") { number.times { arr.reverse.each {|x| x} } }
    x.report("reverse_each") { number.times { arr.reverse_each {|x| x} } }
    x.report("reverse")      { number.times { arr.reverse } }             
    x.report("each")         { number.times { arr.each {|x| x} } }        
end 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T13:01:01.407

这很简单：

*   `reverse.each`创建一个新数组，然后循环每个元素

*   `reverse_each`以相反的顺序循环（不创建中间数组）

请参阅文档中的源代码：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reverse_each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reverse_each)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-12T12:59:45.470

我肯定会说这与创建反向数组相关的时间有关！您只尝试过非常小的数组（包含 100 个元素的数组仍然是一个小数组）。如果您尝试使用更大的数组（例如 10k 个元素），我想您会真正注意到差异。

# android - 获取 ListView 中滚动条的位置（不是位置项）

> ID：12859599
> 
> 赞同：2
> 
> 时间：2012-10-12T12:58:08.437
> 
> 标签：android, android-listview, position, scrollbar

我正在实现一个时间线 UI，它基本上是一个`ListView`. 棘手的部分是当用户滚动时`ListView`，它会在滚动条旁边显示一个文本框（显示时间段，比如上午 9:00）。它位于左侧，相邻并且将随滚动条移动。

我正在使用`OnScrollListener`来检测滚动事件。但我不知道如何获取滚动条的确切位置（顶部、中点、底部），以便将文本框放在正确的位置。有很多关于获取顶部项目位置的帖子，但似乎不适用于滚动条本身。

有什么想法吗？

顺便说一句，很抱歉没有附上 UI 的屏幕截图。Stackoverflow 不允许我这样做，因为我是新用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:08:41.723

> 但我不知道如何获取滚动条的确切位置（顶部、中点、底部），以便我可以将文本框放在正确的位置

您可能想要`Path`应用程序之类的东西。[本教程](http://android.cyrilmottier.com/?p=556)是您正在寻找的内容（可能，如果您还没有看到它）。

基本上，`ListView`有一些关于使用的滚动条位置（也是大小）的方法，但这些方法在外部不可用，因为它们被声明为`protected`，因此您需要扩展`ListView`该类。这些方法`ListView.computeVerticalScrollExtent()`是`ListView.computeVerticalScrollOffset()`和`ListView.computeVerticalScrollRange()`。

使用这些方法，您应该能够确定滚动条在特定时刻在侦听器中的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:43:15.267

**getListView().getLastVisiblePosition()**

```
listview.post(new Runnable() {
    public void run() {
        listview.getLastVisiblePosition();
    }
}); 
```

**View.getScrollY()**

[getScrollY](http://developer.android.com/reference/android/view/View.html#getScrollY%28%29)：返回此视图的滚动顶部位置。这是视图显示部分的顶部边缘。您不需要在其上方绘制任何像素，因为它们位于屏幕上视图的框架之外。

返回视图显示部分的顶部边缘，以像素为单位。

另请参阅：[http ://eliasbland.wordpress.com/2011/07/28/how-to-save-the-position-of-a-scrollview-when-the-orientation-changes-in-android/](http://eliasbland.wordpress.com/2011/07/28/how-to-save-the-position-of-a-scrollview-when-the-orientation-changes-in-android/)

# iphone - 我想以两种方式为 UIButton 设置动画

> ID：12859600
> 
> 赞同：0
> 
> 时间：2012-10-12T12:58:09.253
> 
> 标签：iphone, objective-c, ios, xcode

我在控制器中添加了一个 UIView，然后在该视图上添加了一个 UIButton。我正在水平动画那个视图，所以随着那个视图我的按钮也在移动，因为它添加到那个视图上，但是我希望当用户触摸按钮（这是动画）按钮应该动画起来并立即下降。应该执行此按钮的动画，而旧的视图动画（按钮的超级视图）正在动画。

我已经这样做了，但是，按钮正在向上 n 动画，直到该视图的大动画没有开始，一旦按钮的超级视图的动画开始，它就不会执行它之前执行的动画（触摸时）。

这是代码

```
tempRabbit = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 360, 360)];
        tempView=[[UIView alloc]initWithFrame:CGRectMake(900, 0, 1024, 500)];
        UIImageView *temp=[[UIImageView alloc]initWithFrame:CGRectMake(0, 200, 360, 360)];
        UIButton *tempBtn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
        [tempBtn setFrame:CGRectMake(0, 0, 360, 360)];
        [tempBtn addTarget:self action:@selector(rabbitTaped1) forControlEvents:UIControlEventTouchUpInside];
        [tempBtn setTitle:@"Show View" forState:UIControlStateNormal];

    NSArray *animationArray=[[NSArray alloc]init];
    animationArray=[NSArray arrayWithObjects:
                    [UIImage imageNamed:@"rabbit1.png"],
                    [UIImage imageNamed:@"rabbit2.png"],
                    [UIImage imageNamed:@"rabbit3.png"],
                    [UIImage imageNamed:@"rabbit4.png"],
                    [UIImage imageNamed:@"rabbit5.png"],
                    [UIImage imageNamed:@"rabbit6.png"],
                    [UIImage imageNamed:@"rabbit7.png"],
                    [UIImage imageNamed:@"rabbit8.png"],
                    [UIImage imageNamed:@"rabbit9.png"],
                    [UIImage imageNamed:@"rabbit10.png"],
                    [UIImage imageNamed:@"rabbit11.png"],
                    [UIImage imageNamed:@"rabbit12.png"],
                    [UIImage imageNamed:@"rabbit13.png"], nil];

    temp.animationImages=animationArray;
    temp.animationDuration=2;
    temp.animationRepeatCount=0;
    [temp startAnimating];

    //[tempRabbit addSubview:temp];
    [tempRabbit addSubview:tempBtn];
    [tempView addSubview:tempRabbit];
    [self.view addSubview:tempView]; 
```

# sql - 选择具有相同值的列

> ID：12859602
> 
> 赞同：1
> 
> 时间：2012-10-12T12:58:12.947
> 
> 标签：sql, oracle

我正在尝试选择具有相同邮政编码的客户姓名，但我似乎无法获得正确的结果。应该返回的正确行是 11。我似乎得到了 14 使用以下内容：

```
SELECT a.customer_first_name, a.customer_last_name, a.customer_zip FROM customers a
UNION
SELECT b.customer_first_name, b.customer_last_name, b.customer_zip FROM customers b 
```

从这里我有点卡住了。我知道这两个陈述是相同的，但这是我到达的基础。

我打算使用以下内容：

```
WHERE a.customer_zip=b.customer_zip 
```

但是，这当然是行不通的，而且有点无关紧要。

客户表：

![客户表](../Images/2f6b973f1876dfeb2edbb34a5d3a5bc6.png)

任何帮助将非常感激。如果我遗漏了什么和/或不清楚，那么我道歉。谢谢。

**编辑：**正确的结果应该是 11 行（我似乎无法实现）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:01:32.513

我会做：

```
select customer_zip
from customers 
group by customer_zip
having count(customer_zip)>1 
```

编辑：

这将给出重复 ZIP 的列表。基于它，您可以轻松地找到带有这些 zip 的客户，其中 select * from customers where customer_zip in (previous_query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:07:20.843

```
SELECT customer_first_name, customer_last_name, customer_zip
FROM customers where customer_zip in 
  (SELECT customer_zip FROM customers
   GROUP BY customer_zip
   HAVING COUNT(*) > 1); 
```

# c# - 在库文件c#中发送httpresponses

> ID：12859606
> 
> 赞同：1
> 
> 时间：2012-10-12T12:58:20.610
> 
> 标签：c#, .net, httpwebrequest, httpwebresponse

我使用以下代码下载asp.net网站中的文件夹是

```
 string path = @"E:\sample.zip";
        FileInfo file = new FileInfo(path);
           int len = (int)file.Length, bytes;
             Response.ContentType = "text/html";  
          // Response.AddHeader "Content-Disposition", "attachment;filename=" + filename; 
             Response.AppendHeader("content-length", len.ToString());
           byte[] buffer = new byte[1024];

        using(Stream stream = File.OpenRead(path)) {
    while (len > 0 && (bytes =
        stream.Read(buffer, 0, buffer.Length)) > 0)
    {
        Response.OutputStream.Write(buffer, 0, bytes);
        len -= bytes;
    }
} 
```

它工作正常/...

但我的问题是当我对库文件使用相同的代码时

```
FileInfo file = new FileInfo(ZipPath);
            int len = (int)file.Length, bytes;
            HttpResponse Response = new HttpResponse(TextWriter.Null);
            Response.ContentType = "text/html";
            Response.AppendHeader("content-length", len.ToString());
            byte[] buffer = new byte[1024];

            using (Stream stream = File.OpenRead(ZipPath))
            {
                while (len > 0 && (bytes =
                    stream.Read(buffer, 0, buffer.Length)) > 0)
                {
                    Response.OutputStream.Write(buffer, 0, bytes);
                    len -= bytes;
                }
            }
        } 
```

它给我一个错误

**使用自定义 TextWriter 时，OutputStream 不可用。**

我想问题出在那一行

```
 HttpResponse Response = new HttpResponse(TextWriter.Null); 
```

你能给我一个解决方案吗

等待您的回复....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:23:59.580

您可以尝试使用此代码

```
TextWriter sw = new StringWriter();
HttpResponse Response = new HttpResponse(sw); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:20:23.250

我将结构替换为

```
 HttpResponse response = HttpContext.Current.Response; 
```

它工作正常......

谢谢大家的支持

# ios - 更改引脚颜色 MKMapView

> ID：12859611
> 
> 赞同：11
> 
> 时间：2012-10-12T12:58:33.807
> 
> 标签：ios, mkmapview, mkpinannotationview

我以这种方式向我的地图添加注释：

```
MyAnnotation *annotationPoint2 = [[MyAnnotation alloc] init];
annotationPoint2.coordinate = anyLocation;
annotationPoint2.title = [NSString stringWithFormat:@"%@", obj];
annotationPoint2.subtitle = @"";  //or set to nil
annotationPoint2.keyValue = [NSString stringWithFormat:@"%@", key];
[mapPins addAnnotation:annotationPoint2]; 
```

别针都是红色的，我希望它们都是绿色的。我怎样才能改变颜色？我尝试了以下方法，但它仍然给出了一个红色标记：

```
annotationPoint2.pinColor = MKPinAnnotationColorGreen; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T14:47:47.847

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation 
  {
    MKPinAnnotationView *annView=[[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@"pin"];
    annView.pinColor = MKPinAnnotationColorGreen;
    return annView;
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T13:14:54.773

该`pinColor`属性是在`MKPinAnnotationView`类（不是`MKAnnotation`协议）中定义的。

`MKPinAnnotationView`您在`viewForAnnotation`委托方法中创建一个。如果您尚未实现该委托，则默认情况下您会获得标准的红色引脚。

在该委托方法中，您创建一个实例，`MKPinAnnotationView`您可以将其设置`pinColor`为绿色。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-12T17:54:55.540

Swift3 是这样的：

```
func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -> MKAnnotationView? {

    let annotationView = MKPinAnnotationView(annotation: annotation, reuseIdentifier: "pin")

    if annotation.title! == "My Place" {

        annotationView.pinTintColor = UIColor.green

    } else {

        annotationView.pinTintColor = UIColor.red
    }

    return annotationView
} 
```

# objective-c - Objective-c：应用程序在为 UIView 设置动画后自行创建 UIImageViews

> ID：12859612
> 
> 赞同：0
> 
> 时间：2012-10-12T12:58:33.993
> 
> 标签：objective-c, animation, uiview

我有几个 UIViews 发生了这种奇怪的情况。当用户点击其中一个时，它们都会被动画化（本质上会改变它们的 Y 轴位置）。现在，当我点击之后的任何视图并获取超级视图的所有子视图时，添加了 2 个 UIImageViews。我在应用程序中根本没有图像，也没有创建任何图像的地方。以下是所有子视图的日志：

第一次点击：

```
2012-10-12 08:53:00.579 KIP_Acordion[1094:11603] <UIView: 0x71b96d0; frame = (5 5; 733 40); tag = 1; layer = <CALayer: 0x71b9730>>

2012-10-12 08:53:00.582 KIP_Acordion[1094:11603] <UIView: 0x71c2160; frame = (5 55; 733 40); tag = 2; layer = <CALayer: 0x71c20e0>>

2012-10-12 08:53:00.582 KIP_Acordion[1094:11603] <UIView: 0x71c4920; frame = (5 105; 733 40); tag = 3; layer = <CALayer: 0x71c49e0>>

2012-10-12 08:53:00.583 KIP_Acordion[1094:11603] <UIView: 0x71c6ed0; frame = (5 155; 733 40); tag = 4; layer = <CALayer: 0x71c6f90>>

2012-10-12 08:53:00.583 KIP_Acordion[1094:11603] <UIView: 0x71c93a0; frame = (5 205; 733 40); tag = 5; layer = <CALayer: 0x71c9320>>

2012-10-12 08:53:00.584 KIP_Acordion[1094:11603] <UIView: 0x71cb720; frame = (5 255; 733 40); tag = 6; layer = <CALayer: 0x71cb7e0>> 
```

第二次点击：

```
KIP_Acordion[1094:11603] <UIView: 0x71b96d0; frame = (5 5; 733 40); tag = 1; layer = <CALayer: 0x71b9730>>

2012-10-12 08:55:52.937 KIP_Acordion[1094:11603] <UIView: 0x71c2160; frame = (5 145; 733 40); tag = 2; layer = <CALayer: 0x71c20e0>>

2012-10-12 08:55:52.938 KIP_Acordion[1094:11603] <UIView: 0x71c4920; frame = (5 195; 733 40); tag = 3; layer = <CALayer: 0x71c49e0>>

2012-10-12 08:55:52.938 KIP_Acordion[1094:11603] <UIView: 0x71c6ed0; frame = (5 245; 733 40); tag = 4; layer = <CALayer: 0x71c6f90>>

2012-10-12 08:55:52.939 KIP_Acordion[1094:11603] <UIView: 0x71c93a0; frame = (5 295; 733 40); tag = 5; layer = <CALayer: 0x71c9320>>

2012-10-12 08:55:52.940 KIP_Acordion[1094:11603] <UIView: 0x71cb720; frame = (5 345; 733 40); tag = 6; layer = <CALayer: 0x71cb7e0>>

2012-10-12 08:55:52.941 KIP_Acordion[1094:11603] <UIImageView: 0x755ef60; frame = (731 403; 7 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x755efc0>>

2012-10-12 08:55:52.941 KIP_Acordion[1094:11603] <UIImageView: 0x755f010; frame = (731 403; 7 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x755f0b0>> 
```

什么会导致这个？

编辑：一些附加信息：

每个 UIView（称它们为父视图）都有两个子视图，一个 UIView（称它为标题栏）和一个 UIScrollView，滚动视图的高度为 0.1，当您点击标题栏时，滚动视图的高度被重置并且它是动画的所以它会显示它是子视图（现在是一系列 UILabel 和 UITextfields）。然后根据正在显示的滚动视图的新高度重置所有其他父视图的 y 位置，并将它们动画到新位置。

我在哪里找到添加的 UIImageViews 是关闭打开的滚动视图的方法。

```
- (void) closeAndCleanSections : (UIView* ) tappedSection {

    //get all the sections
    NSArray* allSections = [[tappedSection superview]subviews];

    //loop through all the sections
    for(int s=0; s<allSections.count; s++) {

        if([[allSections objectAtIndex:s] isKindOfClass:[UIView class]]) { 
            NSLog(@"%@", [allSections objectAtIndex:s]);
        }

    }//loop through sections
} 
```

这是我用来为视图设置动画的方法：

```
- (void) openSection : (UIView* ) sectionToOpen {

//get the scroll view (the hidden part)
NSArray* sectionViews = [sectionToOpen subviews];
UIScrollView* contentWrapper = [sectionViews objectAtIndex:1];

//get all the sections
NSArray* allSections = [[sectionToOpen superview] subviews];

//determine which section was tapped
int thisSectionID = sectionToOpen.tag;
NSString* storedID = [NSString stringWithFormat:@"Section_%i", thisSectionID];

//get it's opened and closed height
NSDictionary* thisSectionDictionary = [sections objectForKey:storedID];

float thisSectionOpenedHeight = [[thisSectionDictionary objectForKey:@"Section Opened Height"] floatValue];
float thisSectionClosedHeight = [[thisSectionDictionary objectForKey:@"Section Closed Height"] floatValue];

//adjust the parent scroll
CGRect svParentFrame = self.frame;
//take away the section's closed height
svParentFrame.size.height = svParentFrame.size.height - thisSectionClosedHeight;
//replace with the opened height (add 50.0 for padding)
svParentFrame.size.height = svParentFrame.size.height + thisSectionOpenedHeight + 50.0;
self.frame = svParentFrame;

//adjust the content wrapper's height
CGRect contentWrapperFrame = contentWrapper.frame;
contentWrapperFrame.size.height = thisSectionOpenedHeight;

//determine where all the sections need to be moved too
if (thisSectionID == 1) {
    for(int s=0; s<allSections.count; s++) {
        if (s>0) {

            UIView* thisSection = [allSections objectAtIndex:s];

            CGRect thisSectionFrame = thisSection.frame;

            thisSectionFrame.origin.y = thisSectionFrame.origin.y + thisSectionOpenedHeight + 10.0;

            //animate the view
            [UIView animateWithDuration:.5 delay:0 options:UIViewAnimationOptionCurveEaseOut

                             animations:^{
                                 thisSection.frame = thisSectionFrame;
                             }

                             completion:^ (BOOL finished) {
                             }
             ];
        }
    }

} else {

    float yDifference;
    float currentY;

    //move sections
    for(int s=0; s<allSections.count; s++) {

        //get the section
        UIView* thisSection = [allSections objectAtIndex:s];

        //get its frame
        CGRect thisSectionFrame = thisSection.frame;

        if (s+1 == thisSectionID) {

            //current y location
            currentY = thisSectionFrame.origin.y;
            yDifference = (currentY - 10.0);

            float newYLocation = 10.0;
            thisSectionFrame.origin.y = newYLocation;

        } else if (s+1 < thisSectionID) {

            //set new y
            float newYLocation = (s+1) * -80;
            thisSectionFrame.origin.y = newYLocation;

        } else {

            float newYLocation = (thisSectionFrame.origin.y + thisSectionOpenedHeight) - (currentY - 20.0);

            thisSectionFrame.origin.y = newYLocation;

        }

        //animate the sections
        [UIView animateWithDuration:.5 delay:0 options:UIViewAnimationOptionCurveEaseOut

                         animations:^{
                             thisSection.frame = thisSectionFrame;
                         }

                         completion:^ (BOOL finished) {
                         }
         ];

    }

}

//animate the section scroll view
[UIView animateWithDuration:.5 delay:0 options:UIViewAnimationOptionCurveEaseOut

                 animations:^{
                     contentWrapper.frame = contentWrapperFrame;
                 }

                 completion:^ (BOOL finished) {
                 }
 ];

} 
```

# php - 我的联系表格发送空白 body_messages

> ID：12859615
> 
> 赞同：6
> 
> 时间：2012-10-12T12:58:44.223
> 
> 标签：php, forms, dreamweaver, contact

我是 PHP 新手，所以请耐心等待。当我按下提交时，我的表单正在发送空电子邮件。任何帮助都会很棒。

这是我的表格：

```
 <form class="contact_form" action="kontakt.php" method="post">
        <p><input type="text" required="required" id="name" name="name" class="text_input" value="" size="22"  />
        <label for="name">Namn *</label></p>

        <p><input type="text" required="required" id="company" name="company" class="text_input" value="" size="22"  />
        <label for="company">Företag *</label></p>

        <p><input type="email" required="required" id="email" name="email" class="text_input" value="" size="22"  />
        <label for="email">Epost *</label></p>

        <p><textarea required="required" name="content" class="textarea" cols="30" rows="5"></textarea></p>

        <p><button type="submit" class="button white"><span>Skicka</span></button></p>
        <input type="hidden" value="info@web.se" name="contact_to"/>
    </form> 
```

到目前为止，我的 PHP 代码是：

```
<?php

$name = $_POST['name'];
$company = $_POST['company'];
$email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);
$content = $_POST['content'];

$mail_to = 'info@web.se';

$subject = 'Lilla form'.$name;

$body_message = 'From: '.$name."\n";

$body_message .= 'E-mail: '.$email."\n";

$body_message .= 'Message: '.$content;

$headers = 'From: '.$email."\r\n";

$headers .= 'Reply-To: '.$email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

?> 
```

请帮帮我，我真的卡住了。

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:08:59.507

试试这个

```
 <form class="contact_form" action="kontakt.php" method="post">
    <p><input type="text" required="required" id="name" name="name" class="text_input" size="22"  />
    <label for="name">Namn *</label></p>

    <p><input type="text" required="required" id="company" name="company" class="text_input" size="22"  />
    <label for="company">Företag *</label></p>

    <p><input type="email" required="required" id="email" name="email" class="text_input"  size="22"  />
    <label for="email">Epost *</label></p>

    <p><textarea required="required" name="content" class="textarea" cols="30" rows="5"></textarea></p>

    <p><button type="submit" class="button white"><span>Skicka</span></button></p>
    <input type="hidden" value="info@web.se" name="contact_to"/>
</form> 
```

编辑：（调试）

```
$name = $_POST['name'];
$company = $_POST['company'];
$email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);
$content = $_POST['content'];

echo $name.$comapny.$email.$content;exit; // check whether the values are posted successfully or not 
```

# javascript - 复杂原型javascript中的覆盖函数

> ID：12859618
> 
> 赞同：1
> 
> 时间：2012-10-12T12:58:56.630
> 
> 标签：javascript, overriding

我有点卡在一个我无法解决的问题上，我在互联网和这个网站上进行了调查，但我找不到我的问题的答案。

所以基本上我有一个无法修改的 javascript 文件，所以我有另一个 javascript 文件，它应该在调用该方法时捕获并覆盖它。

通常我知道它是如何工作的，并且我已经完成了函数覆盖，但我不知道如何解决这个问题。

我有一个非常大的脚本，但我只展示其中的一小部分：

```
Microsoft.Office.Server.Ajax.NavResizer.prototype = {
    $6: null,
    $7: null,
......
$20:function ($p0) {
    if (this.$1E) {
        $p0.preventDefault();
    } 
},
$21: function ($p0) {
    var $0 = $p0.target;
    this.$1F = ($0 === this.$A);
    if (this.$1F || $0 === this.$B) {
        this.$1E = $0;
        this.$18 = $p0.clientX;
        this.$19 = $p0.clientY;
        Sys.UI.DomEvent.removeHandler(this.$1E, 'mousedown', this.$12);
        var $1 = document.body; Sys.UI.DomEvent.addHandler($1, 'mouseup', this.$13);
        Sys.UI.DomEvent.addHandler($1, 'mousemove', this.$14);
        $1.style.cursor = (this.$1F) ? 'e-resize' : 'n-resize';
        this.$1A = this.get_$42();
        this.$1B = this.get_$43();
        $1.focus();
        Sys.UI.DomEvent.addHandler($1, 'selectstart', this.$15);
        $p0.preventDefault();
    } 
},
$22: function ($p0) {
    this.$34($p0);
    var $0 = document.body;
    Sys.UI.DomEvent.removeHandler($0, 'mouseup', this.$13);
    Sys.UI.DomEvent.removeHandler($0, 'mousemove', this.$14);
    Sys.UI.DomEvent.addHandler($0, 'selectstart', this.$15); 
    $0.style.cursor = 'default';
    Sys.UI.DomEvent.addHandler(this.$1E, 'mousedown', this.$12);
    this.$1E = null;
},
$23: function ($p0) {
    this.$34($p0);
},
$24: function ($p0) {
    this.$26();
},
.... 
```

基本上这是脚本的一部分：所以假设我想覆盖函数：**$22: function ($p0)** in the script in another javascript file，我该怎么做？

我将不胜感激任何帮助。

一个小的更新，提供了一些很好的例子，但它们不起作用。我运行这个 sript 的环境是 SharePoint，通常当我重写时，我使用了这个方法：

```
var oldFixRibbonAndWorkspaceDimensions = window.FixRibbonAndWorkspaceDimensions;
window.FixRibbonAndWorkspaceDimensions = function () {
    this.MyFixRibbonAndWorkspaceDimensions();
};

function MyFixRibbonAndWorkspaceDimensions(){...} 
```

当我加载脚本时也没关系，因为这个函数只在默认函数被调用时才被调用，而不是之前而不是之后。就在同一时间。但是对于此处提供的示例，该函数正在尝试在 document.ready() 上执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:01:29.840

你想永久覆盖它吗？只需这样做：

```
Microsoft.Office.Server.Ajax.NavResizer.prototype.$22 = function($p0) {
    // your code.
}; 
```

只要在定义原始脚本后执行您的脚本，就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T02:06:11.870

Old post.. but this works for me:

```
ExecuteOrDelayUntilScriptLoaded(overrideNavResizer, "NavResizer.js");

function overrideNavResizer(){

    Microsoft.Office.Server.Ajax.NavResizer.prototype.$22 = function($p0) {
    // your code.
};
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:03:10.373

在您的新脚本中：

```
Microsoft.Office.Server.Ajax.NavResizer.prototype.$22 = function () {//your function code} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T13:03:54.213

假设您可以访问原型对象（它在全局范围内）并且您的脚本在它之后运行，这很容易：

```
var proto = Microsoft.Office.Server.Ajax.NavResizer.prototype,
    oldMethod = proto.$22;
proto.$22 = function newMethod(args, …){
    …
}; 
```

# mapping - 测试地图输出架构错误

> ID：12859620
> 
> 赞同：1
> 
> 时间：2012-10-12T12:58:59.680
> 
> 标签：mapping, biztalk, biztalk-2010

这有点奇怪，但我想知道是否有人以前见过它并知道治愈方法。

基本上，我们已经更新了模式并且格式已经发生了根本性的变化。该模式已在许多地图中使用，因此这些地图也已更新。

在测试其中一张地图（Visual Studio 右键单击​​，测试地图）时，它声称测试成功，但生成的 xml 采用旧模式格式，而不是新的更新格式。

映射器显示了正确的模式，我尝试重建甚至重新部署，以防万一某些东西以某种方式保留旧模式，但它仍然映射到旧格式。

欢迎任何建议。

干杯斯图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:32:29.900

这是一个~~漏洞~~ [Visual Studio BizTalk 项目的功能](http://social.msdn.microsoft.com/Forums/en-US/biztalkr2adapters/thread/f9689b84-93ad-447a-bb5c-81d0816a620a/)。

在您的 BizTalk 解决方案中，确保设置了“显示所有文件”（在顶部），然后手动运行受影响的架构，并删除生成的`.xsd.cs`文件。

对更新后的地图 ( `btm.cs`) 也执行相同操作，然后重新构建项目。（BizTalk 将重建 *.cs 文件）

此外，在部署/导入时，请确保您：

*   重新 GAC 您的程序集
*   重新启动 BizTalk 主机进程

# objective-c - NSFetchRequest 不返回任何东西

> ID：12859622
> 
> 赞同：0
> 
> 时间：2012-10-12T12:59:02.110
> 
> 标签：objective-c, ios, cocoa-touch, core-data

我正在尝试获取相册的所有图片。我通过网络服务得到这个。Web 服务具有以下布局。

```
{

    "name": "Club Brugge - KRC Genk",
    "date": "08.10.2012",
    "albumId: 1,
    "pictures": [
        {
            "pic_album_id"=1,
            "pic_id" = 1,
            "url": "http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg"
        },
        {
            "pic_album_id"=1,
            "pic_id" = 2,
            "url": "http://www.krcgenk.be/images/gallery/album_199/800X600/e8e10c0664eb0533a0534ed69891b165.jpg"
        },
        {
            "pic_album_id"=1,
            "pic_id"= 3,
            "url": "http://www.krcgenk.be/images/gallery/album_199/800X600/750b55a87b8eae33b8f3278add9bec44.jpg"
        }
] 
```

我有以下功能来获取某个相册的所有图片。

```
 - (NSMutableArray *)getAllPicturesOfAlbumId: (int)AlbumId
    {
        NSString *picture_Url = [[NSString alloc]init];
        NSArray *results = [[NSArray alloc]init];
        _picturesForAlbum = [[NSMutableArray alloc]init];

        picture_Url = @"";
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"pic_album_id == %@",
                                  [NSNumber numberWithInt:AlbumId]];
        NSLog(@"album id: %@",[NSNumber numberWithInt:AlbumId]);
        [request setEntity:[NSEntityDescription entityForName:@"Picture" inManagedObjectContext:self.genkDatabase.managedObjectContext]];
        [request setPredicate:predicate];
        NSError *error = nil;
        results = [self.genkDatabase.managedObjectContext executeFetchRequest:request error:&error];
        NSLog(@"results: %@",results);
        if (results == nil) {
            NSLog(@"nil results");
            // handle errors
        } else if (results.count == 0) {
            NSLog(@"0 results");
// nothing found
        } else {
            for(int i = 0; i < results.count ; i++){
            Picture *picture = [results objectAtIndex:i];
                NSLog(@"%@",[results objectAtIndex:i]);
                [_picturesForAlbum addObject:picture];
            }
        }
        NSLog(@"%@",_picturesForAlbum);
        //NSLog(@"album: %@",[_picturesForAlbum objectAtIndex:5]);
        return _picturesForAlbum;
    } 
```

上面的代码给出了以下日志。（我给了测试用例 AlbumId = 3 ）

```
2012-10-12 14:53:04.577 RacingGenk[4793:c07] album id: 3
2012-10-12 14:53:04.578 RacingGenk[4793:c07] results: (
)
2012-10-12 14:53:04.578 RacingGenk[4793:c07] (
) 
```

希望有人可以帮助我。

亲切的问候。

** 这里你可以看到我的数据库模型的[截图](http://www.flickr.com/photos/74322780@N08/8079761729/in/photostream)

**编辑**

在这里，您会看到我如何获取照片并将其放入数据库中。

```
+ (Picture *)pictureWithGenkInfo:(NSDictionary *)genkInfo
          inManagedObjectContext:(NSManagedObjectContext *)context
                     withAlbumId:(int)albumId
                   withPictureId:(int)pictureId;
{

    Picture *picture = nil;

    picture = [NSEntityDescription insertNewObjectForEntityForName:@"Picture"
                                          inManagedObjectContext:context];
    picture.url                     = [genkInfo objectForKey:PICTURES_URL];
    picture.pic_album_id            = [NSNumber numberWithInt:albumId];
    picture.picture_id              = [NSNumber numberWithInt:pictureId];

    return picture;
} 
```

//上面的方法是在我的第一个控制器中调用的。通过这个循环，我填满了我的核心数据库。

```
 for (NSDictionary *genkInfo in albums ) {
                albumId++;
                [Album albumWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext withAlbumId:albumId];
                 for (NSDictionary *genkInfo2 in pictures ) {
                     pictureId++;
                     [Picture pictureWithGenkInfo:genkInfo2 inManagedObjectContext:document.managedObjectContext withAlbumId:albumId withPictureId:pictureId];
                 }
               pictureId = 0;
                // table will automatically update due to NSFetchedResultsController's observing of the NSMOC
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:42:26.487

使用谓词

```
 [NSPredicate predicateWithFormat:@"whichAlbum.album_id == %d", AlbumId]; 
```

**更新**

```
 for (NSDictionary *genkInfo in albums ) {
      albumId++;
      Album *album = [Album albumWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext withAlbumId:albumId];
      for (NSDictionary *genkInfo2 in pictures ) {
          pictureId++;
          Picture *pic = [Picture pictureWithGenkInfo:genkInfo2 inManagedObjectContext:document.managedObjectContext withAlbumId:albumId withPictureId:pictureId];
          [album addPictureObject:pic]; // this method should be automatically generated
       }
       pictureId = 0;
 // table will automatically update due to NSFetchedResultsController's observing of the NSMOC
        }

// don't forget save context 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:36:46.773

如何排除故障：

获取自己的[Liya](https://itunes.apple.com/app/liya/id455484422?mt=12)或其他 sqlite 数据库查看器。导航到包含核心数据数据库的文件夹。在模拟器上

`/Users/<username>/Library/Application Support/iPhone Simulator/<version of iOS>/Applications/<long cryptig string>/<folder-with-the-core-data-database>`

打开`sqlite`数据库，导航到`ZPicture`表并检查数据是否存在。如果没有数据，则`webservice`->`core-data`程序逻辑有问题。

如果有数据并且看起来不错，请返回 Xcode 并为核心数据请求启用日志记录。编辑方案（产品 - 编辑方案），选择`Run, Debug`方案并将选项卡更改为`Arguments`。在字段中`Arguments Passed On Launch`添加`-com.apple.CoreData.SQLDebug 3`. 确保选中该复选框。

运行您的应用程序，在调试器控制台窗口中应该有 core-data 生成的 sql 代码。

你会看到类似的东西：（你可能会看到`whichAlbum`出现）

```
<timestamp> CoreData: annotation: fetch using NSSQLiteStatement <0xfxxxxxx> on entity
'Picture' with sql text 'SELECT 0, t0.Z_PK, t0.Z_OPT, t0.zpic_album_id 
FROM zpicture t0 WHERE t0.zpic_album_id == ?'
<timestamp> CoreData: details: SQLite bind[0] = (int64)3 
```

获取 sql 命令，返回 Liya 并将命令粘贴到`Run Custom Command`字段中。替换中的问号

```
 t0.zpic_album_id == ? 
```

和`album_id`你想看的。

查询的结果将是 Core Data 将检索的结果。

不知道`whichAlbum`会去哪里。只需返回您的发现并告诉我们。

# c# - 按钮单击时无法从 ViewModel 添加子项

> ID：12859626
> 
> 赞同：0
> 
> 时间：2012-10-12T12:59:09.800
> 
> 标签：c#, .net, wpf, button, viewmodel

我是 WPF C# 世界的新手。我的构造函数中有一个方法，可以将子项添加到堆栈面板。我有 2 个 xaml 文件。mainone 有一个堆栈面板，另一个有一个标签。

**主窗口视图：**

```
<Grid Grid.Row="1" Name="VoltageChannels" >
        <StackPanel Height="Auto" Name="stackPanel" Width="Auto" MinHeight="300"> </StackPanel>
    </Grid>

<Button Content="Refresh All" Command="{Binding AddChildCommand}"  Name="RefreshAllBtn" />

public void OnChildAdd()
    {
        foreach (VoltageBoardChannel mVoltageChannelViewModel in mVoltageViewModel.VoltageChannelList)
        {
            VoltageChannelView mVoltageChannelView = new VoltageChannelView();
            mVoltageChannelView.Margin = new Thickness(2);
            mVoltageChannelView.ChannelInfo = mVoltageChannelViewModel;
            stackPanel.Children.Add(mVoltageChannelView);
        }
    } 
```

我想从我的视图模型类中访问此方法，以通过单击按钮添加子项。基本上我有一个包含一组项目的列表。这些项目应在按钮单击时显示:) 这是 View 和 ViewModel 类：

**视图模型：**

```
public viewModel()
{

}
public List<VoltageBoardChannel> VoltageChannelList
    {
        get 
        { 
            return channelList; 
        }

        set
        { 
            channelList = value;
            OnPropertyChanged("ChannelList");
        }
    }

List<VoltageBoardChannel> channelList = new List<VoltageBoardChannel>(0);

    // VoltageBoardChannel has Channel name and avalable as property.
    List<VoltageBoardChannel> redhookChannels = new List<VoltageBoardChannel>
    {
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false},
         new VoltageBoardChannel { ChannelName = "VDD_IO_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_CODEC_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_DAL_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_DPD_AUD", IsAvailable = true},             
    };

    private ICommand mRefreshAllCommand;
    public ICommand AddChildCommand
    {
        get
        {
            if (mRefreshAllCommand == null)
                mRefreshAllCommand = new DelegateCommand(new Action(mRefreshAllCommandExecuted), new Func<bool>(mRefreshAllCommandCanExecute));

            return mRefreshAllCommand;
        }
        set
        {
            mRefreshAllCommand = value;
        }
    }

    public bool mRefreshAllCommandCanExecute()
    {
        return true;
    }

    public void mRefreshAllCommandExecuted()
    {                               
        VoltageChannelList = bavaria1Channels;          
        // Call OnChildAdd Method here                      
    } 
```

**具有我的标签的 XAML 视图：**

```
<Label Grid.Column="0" Content="{Binding ChannelName}" Height="25" Width="120" Name="VoltageLabel" /> 
```

**电压板通道类：**

```
public class VoltageBoardChannel
{
    public string ChannelName { get; set; }
    public bool IsAvailable { get; set; }
} 
```

在按钮单击时调用的方法。单击后我想调用`OnChildAdd()`方法以将这些项目列表添加`LIST`到我的堆栈面板中。可能吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:18:08.637

在xml中：

```
<Button Command={Binding AddChildCommand} /> 
```

在您的视图模型中：

```
public ICommand AddChildCommand { get; private set; } 
```

然后在 viewmodel 的构造函数中，设置`AddChildCommand`为实现`ICommand`. 然后，此命令可以调用您的`OnChildAdd()`方法。（[这](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)是规格）

但是，更好的方法是将stackpanel的 Children 绑定到视图模型中的属性，然后将`VoltageChannelView`s 添加到该属性。

# c# - 使用后缀树的唯一子串

> ID：12859635
> 
> 赞同：1
> 
> 时间：2012-10-12T12:59:37.767
> 
> 标签：c#, c++, algorithm, substring, suffix-tree

`S`对于给定的长度字符串`n`-

*   `S`查找不能小于的所有唯一子串的最佳算法`O(n^2)`。所以，最好的算法会给我们带来`O(n^2)`. 根据我所阅读的内容，这可以通过为`S`.

S的后缀树可以及时创建`O(n)`。现在，我的问题是——

**我们如何使用 S 的后缀树来获取`S`in的所有唯一子字符串`O(n^2)`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:21:48.653

尝试阅读有关后缀数组的信息：[http](http://en.wikipedia.org/wiki/Suffix_array) ://en.wikipedia.org/wiki/Suffix_array 这种方法比后缀树更快地获取字符串中的子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:58:52.827

它可以通过尝试以最佳方式完成。将字符串添加到 trie 并从根遍历到节点。每个根到节点的路径都将表示字符串的后缀。取这些后缀的所有前缀。这些是唯一的子字符串。

# performance - SQL Server 2008 中的列索引未更新

> ID：12859636
> 
> 赞同：0
> 
> 时间：2012-10-12T12:59:38.133
> 
> 标签：performance, indexing, sql-server-2008-r2

我曾在 stackoverflow 上问过一个问题： [大型 SQL Server 数据库超时 PHP Web 应用程序](https://stackoverflow.com/questions/12460602/large-mssql-database-timing-out-php-web-application)

问题在于，选择前一个日期的查询速度很快，而对于更当前的日期，查询速度很慢。我们通过重新创建索引来修复它，因此它起作用了。有一段时间我认为索引可能已经损坏。

今天问题再次发生（缓慢），并且通过再次重新创建它运行得很快。这是在日期时间类型的日期列上完成的。

是否有特定原因或 SQL Server 2008 R2 已损坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:09:29.143

尝试使用[UPDATE STATISTICS (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187348.aspx)

> 更新表或索引视图的查询优化统计信息。默认情况下，查询优化器已根据需要更新统计信息以改进查询计划；在某些情况下，您可以通过使用 UPDATE STATISTICS 或存储过程 [sp_updatestats](http://msdn.microsoft.com/en-us/library/ms173804.aspx)比默认更新更频繁地更新统计信息来提高查询性能。

```
UPDATE STATISTICS table_or_indexed_view_name 
    [ 
        { 
            { index_or_statistics__name }
          | ( { index_or_statistics_name } [ ,...n ] ) 
                }
    ] 
    [    WITH 
        [ 
            FULLSCAN 
            | SAMPLE number { PERCENT | ROWS } 
            | RESAMPLE 
            | <update_stats_stream_option> [ ,...n ]
        ] 
        [ [ , ] [ ALL | COLUMNS | INDEX ] 
        [ [ , ] NORECOMPUTE ] 
    ] ;

<update_stats_stream_option> ::=
    [ STATS_STREAM = stats_stream ]
    [ ROWCOUNT = numeric_constant ]
    [ PAGECOUNT = numeric_contant ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:10:01.820

它当然没有损坏。这永远不会发生。它可能是零散的或有很多浪费的空间。这很正常。这是由于某些写入模式而发生的。

重建是一个很好的对策。您可以尝试重新组织作为替代方案。

# javascript - 检查一个值是否在一个范围内并在它超出范围时设置它的值的优雅方法？

> ID：12859643
> 
> 赞同：5
> 
> 时间：2012-10-12T12:59:50.237
> 
> 标签：javascript, coding-style

我想做的事情本身很简单，但我想知道是否有一些非常简洁紧凑的方式来完成同样的事情。

我有一个浮点变量，我想检查它的值是否在 0 和 1 之间。如果它小于 0，我想将其设置为零，如果它大于 1，我想将其设置为 1。

通常我这样做：

```
// var myVar is set before by some calculation

if(myVar > 1){
    myVar = 1;
}
if(myVar < 0){ 
    myVar = 0;
} 
```

有谁知道这样做的更优雅/紧凑的方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T13:02:43.990

一种可能的解决方案：

```
myVar = Math.min(1, Math.max(0, myVar)); 
```

其他：

```
myVar = myVar < 0 ? 0 : myVar > 1 ? 1 : myVar; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T13:01:31.790

使用 Math.min 和 Math.max，避免出现条件。

```
var MAX = 100;
var MIN = 50;

var val = 75;
console.log( Math.max(MIN, Math.min(MAX, val)) );

var val = 49;
console.log( Math.max(MIN, Math.min(MAX, val)) );

var val = 101;
console.log( Math.max(MIN, Math.min(MAX, val)) ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T13:18:40.493

虽然 Min/Max 解决方案非常简洁，但远非显而易见。

我会选择一个功能正是你所拥有的：

```
myVar = constrainToRange(myVar, 0, 1);

function constrainToRange(x, min, max) {
    if (x < min) {
        x = min;
    }
    else if( x > max) {
        x = max;
    }
    return x;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T13:01:54.350

这是一个可以很容易地扩展以测试比简单的最小值/最大值更多的选项：

```
myVar = parseFloat( (myVar < 0 && '0') || (myVar > 1 && 1) || myVar ); 
```

和`parseFloat`返回 0 作为字符串很重要，否则当它应该停在那里时，它会通过那个条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:07:52.990

也许是这样：

```
 myVal = myVal >= 1 ? 1 : Math.min(Math.abs(myVal), 0) 
```

# mysql - Zend - 在 Mapper 中丢失帖子值

> ID：12859650
> 
> 赞同：0
> 
> 时间：2012-10-12T13:00:25.503
> 
> 标签：mysql, post, zend-framework, insert

将我的帖子数据从我的控制器传递到我的映射器以插入我的数据库时，我似乎丢失了它。我是新手，使用留言簿模板，但将其修改为添加“交易”。这就是我所拥有的：

```
Controller
public function newAction()
    {
      $request = $this->getRequest();

      $form    = new Application_Form_Deal();

      if ($this->getRequest()->isPost()) {

            if ($form->isValid($request->getPost())) {

                $posts = $form->getValues();
                //print_r($posts);
                $newdeal = new Application_Model_Deal($posts);
                $mapper  = new Application_Model_DealMapper();
                $mapper->save($newdeal);
                return $this->_helper->redirector('index');
            }
        }

        $this->view->form = $form;
    } 
```

这是我的映射器

```
public function save(Application_Model_Deal $deal)
        {

            $data = array(
                'dealname'      => $deal->getDealName(),
                'dealclient'    => $deal->getDealClient(),        
                'dealtelephone' => $deal->getDealTelephone(),
                'dealvalue'     => $deal->getDealValue(),
                'dealdescription' => $deal->getDealDescription(),
                'dealcreated'   => date('Y-m-d H:i:s'),
                'dealmodified'  => date('Y-m-d H:i:s'),
            );

            /*echo "<pre>";
            print_r($data);
            echo "</pre>";
            exit();*/

             if (null === ($dealid = $deal->getDealId())) {
                unset($data['dealid']);
                $this->getDbTable()->insert($data);
            } else {
                $this->getDbTable()->update($data, array('dealid = ?' => $dealid));
            }
        }

protected $_dealmodified;
    protected $_dealcreated;
    protected $_dealdescription;
    protected $_dealvalue;
    protected $_dealtelephone;
    protected $_dealclient;
    protected $_dealname;
    protected $_dealid;

    public function __construct(array $options = null)
    {
        if (is_array($options)) {
            $this->setOptions($options);
        }
    }

    public function __set($name, $value)
    {
        $method = 'set' . $name;
        if (('mapper' == $name) || !method_exists($this, $method)) {
            throw new Exception('Invalid deal property');
        }
        $this->$method($value);
    }

    public function __get($name)
    {
        $method = 'get' . $name;
        if (('mapper' == $name) || !method_exists($this, $method)) {
            throw new Exception('Invalid deal property');
        }
        return $this->$method($value);
    }

    public function setOptions(array $options)
    {
        $methods = get_class_methods($this);
        foreach ($options as $key => $value) {
            $method = 'set' . ucfirst($key);
            if (in_array($method, $methods)) {
                $this->$method($value);
            }
        }
        return $this;
    }

     public function setDealModified($ts)
    {
        $this->_dealmodified = $ts;
        return $this;
    }

    public function getDealModified()
    {
        return $this->_dealmodified;
    }

    public function setDealCreated($ts)
    {
        $this->_dealcreated = $ts;
        return $this;
    }

    public function getDealCreated()
    {
        return $this->_dealcreated;
    }

    public function setDealDescription($text)
    {
        $this->_dealdescription = (string) $text;
        return $this;
    }

    public function getDealDescription()
    {
        return $this->_dealdescription;
    }

    public function setDealValue( $text)
    {
        $this->_dealvalue =  $text;
        return $this;
    }

    public function getDealValue()
    {
        return $this->_dealvalue;
    }

    public function setDealTelephone($text)
    {
        $this->_dealtelephone = $text;
        return $this;
    }

    public function getDealTelephone()
    {
        return $this->_dealtelephone;
    }

    public function setDealClient($text)
    {
        $this->_dealclient = $text;
        return $this;
    }

    public function getDealClient()
    {
        return $this->_dealclient;
    }

    public function setDealName($text)
    {
        $this->_dealname = $text;
        return $this;
    }

    public function getDealName()
    {
        return $this->_dealname;
    }

    public function setDealId($dealid)
    {
        $this->_dealid = (int) $dealid;
        return $this;
    }

    public function getDealId()
    {
        // $this->_dealid = (int) $value;
        return $this->_dealid;
    } 
```

我完全不知道为什么，当我在 Mapper 中 print_r 我的 $data var 时，一切都消失了。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:24:49.993

您`save()`在映射器中的方法没有您用作参数的第二个`$post`参数。

**重构：**

```
public function save(Application_Model_Deal $deal, array $post)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:24:52.310

这看起来很奇怪`$mapper->save($newdeal, $posts);`

你的 api 是`save(Application_Model_Deal $deal)`

所以它应该是`$mapper->save($newdeal);`.

如果您真的想掌握映射器和模型，这三个链接对我有很大帮助：

[http://survivethedeepend.com/](http://survivethedeepend.com/)

[http://phpmaster.com/building-a-domain-model/](http://phpmaster.com/building-a-domain-model/)

[http://phpmaster.com/integrating-the-data-mappers/](http://phpmaster.com/integrating-the-data-mappers/)

您正在追求特定的工作流程：

*   现在形式
*   从数据中收集（$post）
*   验证 $post 数据 (if(isValid())
*   获取有效和过滤的表单值 ($form->getValues())
*   实例化您的交易对象 ($newdeal = new Application_Model_Deal($posts);)
*   使用映射器保存/更新您的交易
*   成功重定向

一旦你的交易对象被创建，$post 数据就没有进一步的价值，交易对象是需要考虑的重要事情。希望这个对你有帮助。

好的，我想我找到了：

您的问题围绕着这一`$method = 'set' . ucfirst($key);`行将尝试调用`$this->setProperty();`您的 getter 和 setter 设置骆驼案例，因此它们将无法工作。解决此问题的最简单方法是将您的 getter 和 setter 重命名为：

```
 public function setDealmodified($ts)//not camel cased only first letter is capped.
    {
        $this->_dealmodified = $ts;
        return $this;
    } 
```

或者你必须对你的数组键进行驼峰式处理。

# tfs - 当 TFS 跟踪 bin 和 obj 目录时，如何构建 Visual Studio 解决方案？

> ID：12859660
> 
> 赞同：3
> 
> 时间：2012-10-12T13:00:52.717
> 
> 标签：tfs

我正在开发一个 TFS 项目，以前的开发人员已将所有内容都包含在源代码控制中 - 包括`bin`and`obj`文件夹。

当我尝试构建解决方案时，我收到了一些错误，因为`bin`and`obj`文件夹中的所有文件都被锁定为只读。

由于我无法控制的原因，必须在 TFS 中跟踪这些文件夹。当我尝试构建项目并因为这些文件夹被锁定而出现错误时，我还能如何解决这些问题？

如何在不每次都检查这些文件夹的情况下构建解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T13:04:58.703

不要将`obj`and`bin`文件夹添加到源代码管理中。要从 TFS 中删除它们，请在 Visual Studio 中打开源代码管理资源管理器，只需右键单击文件夹并选择“删除”。

如果您无法删除它们，那么您应该询问对 TFS 有控制权的人。我看不出有任何理由将这些文件夹添加到 TFS，所以它不应该是“约束”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T01:45:29.073

如前所述，没有理由将 bin 和 obj 文件夹包含在源代码管理中，它们的内容是易变的。

但是，如果您真的无法控制，您只需将相应的文件夹和文件设置为可写，以便它们可以被覆盖，或者在使它们可写后删除 bin 和 obj 文件夹。这是相对简单的，有几种方法可以实现，并且需要更改 TFSBuild.proj 文件以进行适当的构建。

要使特定文件可写，请使用以下命令：

```
<Attrib Files="[path to your file]" ReadOnly="False"></Attrib> 
```

`attrib`为了使整个文件夹的内容可写，使用批处理来获取文件列表，然后使用任务迭代它们：

```
<Target Name="MakeFilesWriteable">
    <Attrib Files="@(TargetFiles)" ReadOnly="false" />
</Target>

<ItemGroup>
    <TargetFiles Include="[path to bin folder]\**\*.*" />
</ItemGroup> 
```

或者，您可以对 bin 文件夹执行删除：

```
<RemoveDir Condition="Exists('[path to bin folder]')" Directories="[path to bin folder]" /> 
```

除了批处理示例，这些任务可以直接放在`BeforeCompileSolution`构建项目文件的覆盖目标中；对于批处理示例，您只需执行一个调用目标。选择并选择您要使用的方法，然后您`BeforeCompileSolution`将看起来像这样：

```
<Target Name="BeforeCompileSolution" >
    <CallTarget Targets="MakeFilesWriteable" />

    <Attrib Files="[path to your file]" ReadOnly="False"></Attrib>

    <RemoveDir Condition="Exists('[path to bin folder]')" Directories="[path to bin folder]" />
</Target> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T15:23:00.730

Yon 可以使用 powershell 递归删除 bin 和 obj 文件夹。

```
Get-ChildItem .\ -include bin,obj -Recurse | foreach ($_) { remove-item $_.fullname -Force -Recurse } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-24T14:18:17.033

这是一个非技术性的建议。由于其他人为您创建了此问题，因此将其作为他们的问题。告诉他们，以及其他任何重要的人，你不能建造，这是因为他们做了什么。他们破坏了建筑；他们应该修复它。这里建议的所有技术变通方法都很好，但它们实际上只是绕过了真正的问题。

# ef-code-first - 将多个表映射到一个实体

> ID：12859662
> 
> 赞同：0
> 
> 时间：2012-10-12T13:01:01.103
> 
> 标签：ef-code-first, entity-framework-5

我在一个遗留数据库上工作，该数据库将用户存储在两个表 ( `ActiveUsers`, `InactiveUsers`) 之一中。在我的 DbContext 中，我定义了以下 DbSet 来处理两个用户表：

```
public DbSet<User> ActiveUsers{ get; set; }
public DbSet<User> InactiveUsers{ get; set; } 
```

如何将`User`实体映射到表？我坚持使用这些映射：

```
// OK
modelBuilder.Entity<User>().ToTable("ActiveUsers");

// Overwrites the mapping above :(
modelBuilder.Entity<User>().ToTable("InactiveUsers"); 
```

我想我需要以某种方式配置 DbSets...

PS：[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb738537.aspx)似乎用 EDMX 解决了我对“经典”EF 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:47:54.467

正如帕维尔指出的那样：

> CodeFirst 不支持 MEST

# c++ - << 运算符在 C++ 中不起作用

> ID：12859663
> 
> 赞同：0
> 
> 时间：2012-10-12T13:01:06.003
> 
> 标签：c++, class, operators

我已经尝试了很多事情来尝试让它工作，但没有任何效果，我真的很困惑我必须做些什么来解决这个问题。

```
std::ostream& operator <<(std::ostream& os, const Book& b){
os<<b.getTitle()<<", "<<b.getYear();
return os;
}

friend std::ostream& operator<<(std::ostream&, const Book&); 
```

我不断收到这个错误

```
Book.cc: In function 'std::ostream& operator<<(std::ostream&, const Book&)':
Book.cc:45: error: no match for 'operator<<' in 'std::operator<< [with _CharT = char,  _Traits = std::char_traits<char>, _Alloc = std::allocator<char>](((std::basic_ostream<char,  std::char_traits<char> >&)((std::basic_ostream<char, std::char_traits<char> >*)os)), ((const  std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)((const  std::basic_string<char, std::char_traits<char>, std::allocator<char> >*)(& Book::getTitle()  const())))) << ", "'
Book.cc:44: note: candidates are: std::ostream& operator<<(std::ostream&, const Book&) 
```

我真的很困惑如何做到这一点。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:06:50.043

没有看到书很难说，但这有效[[代码]](http://codepad.org/bDNpkUJL)：

```
#include <string>
#include <iostream>

class Book
{
public:
  const std::string getTitle() const { return "title"; }
  const std::string getYear() const { return "year"; }
};

std::ostream& operator<<
(
  std::ostream& os,
  const Book& b
)
{
  os << b.getTitle() << ", " << b.getYear();
  return os;
}

int main()
{
  Book b;
  std::cout << b << std::endl;
} 
```

`friend`请注意，除非`operator<<`需要访问非公开数据或函数，否则您不需要使用。你怎么申报`getTitle()`？

# jquery - 如果我使用 jQuery Mobile，我需要实现滚动条吗？

> ID：12859664
> 
> 赞同：0
> 
> 时间：2012-10-12T13:01:06.463
> 
> 标签：jquery, cordova, jquery-mobile, scrollbar, tinyscrollbar

如果我在 jQuery Mobile 中构建一个长列表，然后将其转换为带有 PhoneGap 的应用程序，滚动条是否会像在浏览器窗口中一样自动浮出水面，或者我是否必须包含这样的[http://areaaperta.com/nicescroll/](http://areaaperta.com/nicescroll/)？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:16:36.387

如果您使用 Phonegap 创建应用程序，您将不会获得默认滚动。您需要使用一些第三方库，例如[iScroll](http://cubiq.org/iscroll-4)

在这里了解更多信息：http: [//blog.safaribooksonline.com/2012/07/19/jquery-mobile-scrolling/](http://blog.safaribooksonline.com/2012/07/19/jquery-mobile-scrolling/)

# java - JSF2.0 h:commandlink 动作属性未绑定到方法

> ID：12859671
> 
> 赞同：0
> 
> 时间：2012-10-12T13:01:34.637
> 
> 标签：java, jsf-2, jboss-weld

我有一个在前端运行 JSF2.0 的应用程序。在后端，而不是使用托管 bean，我使用了焊接的命名 bean。有问题的 bean 被注释为 @Named @Singleton @Startup 并且是一个 EJB Singleton。bean 获取顶级类别来填充前端。在前端的顶级导航中，我的代码看起来像这样

```
<h:dataTable var="items" value="#{topCategorySingleton.topCat}">
<h:column>
<h:commandLink class="menu-link" action="#{categoryBackingBean.category}">
<f:setPropertyActionListener target="#{categoryBackingBean.catID}" value="#{item.sku}" />
 <h:outputText value="#{item.title}" />
 </h:commandLink>
 </h:column>
 </h:dataTable> 
```

当此代码运行时，我收到一条错误消息，指出 javax.servlet.ServletException：类 'com.webintel.backingbeans.org$jboss$weld$bean-testing-SessionBean-CategoryBackingBean_$$_WeldProxy' 没有属性 'category'。

我认为 commandLink 的 action 属性应该绑定到 bean 的方法，而不是属性？有人有想法么？

启动时@Singleton 启动，代码如下：

```
@Singleton
@Named
@Startup
@ConcurrencyManagement(CONTAINER)
public class TopCategorySingleton{
  public TopCategoryStingleton(){}
  private int sku;
  private String title;
  private List<TopCategorySingleton> topCat;
....getters and setters
  public void getTop_Cat(){
   ....logic
   setTopCat(List<TopCateogrySingleton>);
  } 
```

然后支持 bean 代码如下所示：

```
@Stateless
@Named
@RequestScoped
public class CategoryBackingBean{
  public CategoryBackingBean(){}
  private int catID;
  ....getters and setters
  public String category(){
    ...logic
    if(!true){
      return "error";
    }
    return "success";
  } 
```

由于某种原因，它仍然没有将 categoryBackingBean.category 绑定到该方法。我正在使用 Java 6 的 Glassfish 3.1 服务器上运行此应用程序。在此先感谢您的帮助。

# bash - Bash - 去除数字的最后一位 - 在语义方面哪个更好？

> ID：12859672
> 
> 赞同：0
> 
> 时间：2012-10-12T13:01:36.267
> 
> 标签：bash

考虑一个包含整数的 this 字符串

```
nanoseconds=$(date +%s%N) 
```

当我想去掉最后六个字符时，什么在语义上会更好？

仅从字符串中剥离字符

```
nanoseconds=$(date +%s%N)

milliseconds=${nanoseconds%??????} 
```

或将该值除以 1000000

```
milliseconds=$((nanoseconds / 1000000)) 
```

**编辑**

抱歉不清楚。它基本上是用于从纳秒到毫秒的转换。我想我回答了我自己的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:09:10.650

两者都是等价的，但*总的来说*，我认为前一种方法更安全。第一种方法是显式的，并且*正是*您想要做的：从字符串的后面删除一个子字符串。

另一种是依赖于正确舍入的数学运算。虽然我无法想象它会在哪里失败，但我更喜欢第一种方法。

当然，除非你*真正*想要的不是去掉最后三个字符而是除以 1000 :-)

后记：哈哈，我当然知道它会在哪里失败。让值=“123”。`${value%???}`按预期去除最后三位数字，留下一个空字符串。`$(( value / 1000 ))`结果值等于`"0"`（长度为 1 的字符串）。

编辑：因为我们现在知道它不是关于剥离字符，而是四舍五入，显然除以 1000 是解决问题的正确方法:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:57:04.280

当涉及字符串时，最清晰的方法可能是支持它的 shell 中的字符串订阅。

```
s=$(LC_TIME=C date +%s.%N) s=${s::-3} 
```

幸运的是，GNU 日期至少默认为 %N 的零填充，因此除法应该是可靠的。（请注意，这两种方法都是截断，而不是四舍五入）。

```
(( s=(10#$(LC_TIME=C date +%s%N))/1000 )) 
```

如果你想四舍五入，你可以做得比这些好一点`printf`

```
printf -v milliseconds %.6f "$(LC_TIME=C date +%s.%N)" 
```

ksh93 的 printf 支持`%N`，所以不需要日期。转换可以是自动的。如果你有（现代的）ksh 可用，你绝对应该使用它。

```
typeset -T MsTime=(
    typeset -lF6 .=0

    function get {
        ((.sh.value=$(LC_TIME=C printf '%(%s.%N)T')))
    }
)

MsTime milliseconds
print -r "$milliseconds" 
```

# c++ - SQLITE 是否可以计算最长增加子序列的长度，也称为排序百分比？

> ID：12859686
> 
> 赞同：1
> 
> 时间：2012-10-12T13:02:13.023
> 
> 标签：c++, sqlite

使用最新版本的 Sqlite，是否可以使用 sqlite UDF 用户定义函数计算最长递增子序列的长度，也称为排序百分比？

2012 年 10 月 15 日根据@Code-Guru 的要求进行编辑。

按照项目大师的示例序列——1、2、3、4、3、5、6、7、8、10——发现数字排序升序子序列是1、2、3、4、5、6 ,7,8,10 使用包含最近单调递增序列成员值的自动变量并按顺序遍历数组。结果，排序后的数字升序子序列的长度为 9。整个序列的长度为 10。因此，排序百分比为 (9/10) * 100% = 90%。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:51:46.433

Sqlite 没有任何实现最长递增子序列的功能，因此您需要一个用户定义的函数

您可以按函数结果排序。我不相信 UDF 在这方面会受到任何不同的对待。

这是一个示例，说明如何使用函数（用户定义或非用户定义）对查询结果进行排序。

```
sqlite> create table foo(a);
sqlite> create table foobar(a);
sqlite> create table fubar(a);
sqlite> select name, length(name) as len from sqlite_master;
foo|3
foobar|6
fubar|5
sqlite> select name, length(name) as len from sqlite_master order by len;
foo|3
fubar|5
foobar|6 
```

# php - 自动检测类的 Autoloader 问题

> ID：12859687
> 
> 赞同：2
> 
> 时间：2012-10-12T13:02:14.443
> 
> 标签：php, autoload

我目前正在用 PHP 对我的框架进行编程（主要是出于教育原因，以及打发时间的一种方式）。我写了一个自动加载器，它会自动扫描目录树并检测其中的所有类并创建一个如下格式的数组：

```
Array(
    'MyAwesomeClass' => 'path/to/file/in/some/subdirectory/MyAwesomeClass.php',
    'MyOtherAwesomeClass' => 'path/to/file/MyOtherAwesomeClass.php'
     // ....
); 
```

起初，这非常整洁。因为我不需要担心我把课放在哪里。

但后来我发现这是非常资源密集的。所以我创建了一个缓存机制，并将索引序列化并保存到文件中。这将 PHP 脚本的响应时间减少了至少 50%。但它带来了一些问题。

在框架的其他类中，我经常使用如下内容：

```
class_exists('MyAwesomeClassController'); 
```

问题是如果我添加了新类`MyAwesomeClassController`，则该类尚未在索引中并`class_exists`返回 false。现在的问题是每次向框架添加新类时，我都必须删除缓存文件（让自动加载器重新创建索引）。

我尝试的另一件事（有点老套）：在 Autoloader 类中，我检查了是否使用 class_exists() 调用了自动加载方法。如果是这种情况，我重新创建索引以查看是否可以在某处找到请求的类。但这似乎并不奏效，因为有时`class_exists`使用一个几乎不存在的类来调用，所以这与在每个请求上重新创建索引基本上是相同的解决方案。

有什么解决办法吗？还是我必须完全重写我的 Autoloader？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:07:00.637

我前段时间走这条路，得出了同样的结论：资源密集型。您实际上在这里所做的是构建某种链接器。

我切换到命名空间和地图的组合。我将一个命名空间映射到一个文件夹，当调用自动加载器时，它会剥离命名空间，查找相应的文件夹，并包含该文件。

我的地图看起来像这样（我选择 xml 作为格式）：

```
<?xml version="1.0" encoding="UTF-8"?>
<autoloader>  
  <namespace id="Ganymedes\Core">/system/core</namespace>
  <namespace id="Ganymedes\Core\Debug">/system/core/debug</namespace>
</autoloader> 
```

和类加载器：

```
 public function ClassLoader( $class )
  {    
    if( class_exists( $class, false ))
      return true;

    $classparts = explode( '\\', $class );
    $classfile = '/' . strtolower( array_pop( $classparts )) . '.php';
    $namespace = implode( '\\', $classparts );

    if( isset( $this->namespaces[$namespace] )) {
      foreach ( $this->namespaces[$namespace] as $path ) 
        if( is_readable( $path . $classfile ))
          include_once $path . $classfile;

      return true;
    }

    return false;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:09:26.880

也许我没有正确理解你想要做什么......但是`get_include_path`/`set_include_path`和`__autoload($class)`内置函数有什么问题？

编辑解释我的评论：

在“header.php”（包含在每个脚本开头的文件）中：

```
set_include_path(get_include_path().PATH_SEPARATOR."my/first/directory"
                                   .PATH_SEPARATOR."my/second/directory"
                                   .PATH_SEPARATOR."this/is/another/directory"
                                   ...
                                   .PATH_SEPARATOR."and/here/is/the/last/one");

function __autoload($class) {
    require_once($class.".class.php");
} 
```

自动加载功能检查路径中的每个目录，直到找到所需的文件。我从来没有检查过它的性能，但我猜它是相当微不足道的，除非你有 100 个目录。如果您有条理，您可以将您经常使用的（基）类放在第一个“额外”路径中，以便立即找到它们。

我刚刚注意到在线 PHP 手册中不再建议使用 __autoload，而应该使用 spl_autoload_register，但概念是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:12:02.067

在您尝试加载的类应该始终存在的假设下，您的自动加载器可以执行以下操作：

1.  在地图中查找类名（已缓存）。如果存在，则加载该文件。

2.  如果它不存在，请执行另一次扫描并在新生成的映射中查找类名。如果存在，将新地图写入光盘并加载文件。

3.  如果它仍然不存在，请发出警报。

第三步也可以通过引入负缓存来改进；如果该类存在于该地图中，则根据先前的尝试，您知道该类不存在。负缓存的寿命会更短，但足够长，不会破坏您的服务器。

您还可以考虑将离线创建缓存作为部署系统的一部分。

# xml - 如何使用重复的 XMLNode 反序列化此 xml

> ID：12859690
> 
> 赞同：3
> 
> 时间：2012-10-12T13:02:26.080
> 
> 标签：xml, c#-4.0, deserialization, xml-deserialization

我从服务器获得的 webresponse 显示如下。我能够反序列化几个值。但我不知道如何将可用性转换为数组。

```
<AvailRateChartRS Version="1">
  <SoldMessage>sold</SoldMessage>
  <RoomTypes>
   <RoomType>
  <RoomTypeId>1</RoomTypeId>
  <SubPropertyId>1</SubPropertyId>
  <Name>Villa</Name>
  <MaxOccupancy>4</MaxOccupancy>
  <BookingRangeAvailable>false</BookingRangeAvailable>
  <Availability Id="1" Date="2012-10-16" Available="false" NoOfRoomsAvailable="0" />
  <Availability Id="2" Date="2012-10-17" Available="false" NoOfRoomsAvailable="0" />
  <Availability Id="3" Date="2012-10-18" Available="false" NoOfRoomsAvailable="0" />
  <Availability Id="4" Date="2012-10-19" Available="false" NoOfRoomsAvailable="0" />
  <Availability Id="5" Date="2012-10-20" Available="false" NoOfRoomsAvailable="0" />
  <Availability Id="6" Date="2012-10-21" Available="false" NoOfRoomsAvailable="0" />
</RoomType>
</RoomTypes>
</AvailRateChartRS> 
```

序列化的类现在是这样的。

```
namespace Classes
 {

[Serializable()]
public class RoomType
{
    [XmlElement("RoomTypeId")]
    public string RoomTypeId { get; set; }

    [XmlElement("SubPropertyId")]
    public string SubPropertyId { get; set; }

    [XmlElement("Name")]
    public string Name { get; set; }

    [XmlElement("MaxOccupancy")]
    public string MaxOccupancy { get; set; }

    [XmlElement("BookingRangeAvailable")]
    public string BookingRangeAvailable { get; set; }

    [XmlElement("Availability")]
    public string Availability { get; set; }

}

[Serializable()]
[System.Xml.Serialization.XmlRoot("AvailRateChartRS")]
public class RoomTypes
{
    [XmlArray("RoomTypes")]
    [XmlArrayItem("RoomType", typeof(RoomType))]
    public RoomType[] RoomType { get; set; }
}
 } 
```

我是否需要找到任何正则表达式并将可用性放入 . 或者有没有直接的方法。这只是一个开始，我期待更多这样的问题。网络响应没有彻底标准化，并且经常得到一些疯狂的响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:55:06.953

您需要添加一系列可用性类 - 如下所示：

```
 [Serializable()]
        public class RoomType
        {
            [XmlElement("RoomTypeId")]
            public string RoomTypeId { get; set; }

            [XmlElement("SubPropertyId")]
            public string SubPropertyId { get; set; }

            [XmlElement("Name")]
            public string Name { get; set; }

            [XmlElement("MaxOccupancy")]
            public string MaxOccupancy { get; set; }

            [XmlElement("BookingRangeAvailable")]
            public string BookingRangeAvailable { get; set; }

            [XmlElement("Availability")]
            public Availability[] Availability { get; set; }
        }

        public class Availability
        {
            [XmlAttribute]
            public int Id { get; set; }

            [XmlAttribute]
            public string Date { get; set; }

            [XmlAttribute]
            public bool Available { get; set; }

            [XmlAttribute]
            public int NoOfRoomsAvailable { get; set; }
        }

        [Serializable()]
        [System.Xml.Serialization.XmlRoot("AvailRateChartRS")]
        public class RoomTypes
        {
            [XmlArray("RoomTypes")]
            [XmlArrayItem("RoomType", typeof(RoomType))]
            public RoomType[] RoomType { get; set; }
        }

        class Program
        {
            const string xml =
    @"<AvailRateChartRS Version=""1""> 
        <SoldMessage>sold</SoldMessage> 
        <RoomTypes> 
          <RoomType> 
            <RoomTypeId>1</RoomTypeId> 
            <SubPropertyId>1</SubPropertyId> 
            <Name>Villa</Name> 
            <MaxOccupancy>4</MaxOccupancy> 
            <BookingRangeAvailable>false</BookingRangeAvailable> 
            <Availability Id=""1"" Date=""2012-10-16"" Available=""false"" NoOfRoomsAvailable=""0"" /> 
            <Availability Id=""2"" Date=""2012-10-17"" Available=""false"" NoOfRoomsAvailable=""0"" /> 
            <Availability Id=""3"" Date=""2012-10-18"" Available=""false"" NoOfRoomsAvailable=""0"" /> 
            <Availability Id=""4"" Date=""2012-10-19"" Available=""false"" NoOfRoomsAvailable=""0"" /> 
            <Availability Id=""5"" Date=""2012-10-20"" Available=""false"" NoOfRoomsAvailable=""0"" /> 
            <Availability Id=""6"" Date=""2012-10-21"" Available=""false"" NoOfRoomsAvailable=""0"" /> 
          </RoomType> 
        </RoomTypes> 
      </AvailRateChartRS>";

            static void Main(string[] args)
            {
                var serializer = new XmlSerializer(typeof(RoomTypes));

                var availChart = (RoomTypes)serializer.Deserialize(new StringReader(xml));

                foreach(var availability in availChart.RoomType.First().Availability)
                {
                    Console.WriteLine("Availability {0} {1} {2} {3}", availability.Id, availability.Date, availability.Available, availability.NoOfRoomsAvailable);
                }
            }
        } 
```

然后它起作用了：

```
Availability 1 2012-10-16 False 0
Availability 2 2012-10-17 False 0
Availability 3 2012-10-18 False 0
Availability 4 2012-10-19 False 0
Availability 5 2012-10-20 False 0
Availability 6 2012-10-21 False 0
Press any key to continue . . . 
```

# c# - 插入excel表格后调整图像大小

> ID：12859691
> 
> 赞同：4
> 
> 时间：2012-10-12T13:02:33.650
> 
> 标签：c#, excel

我想在将图像插入到 Excel 工作表后调整图像大小。我正在插入这样的图片：

```
Excel.Pictures p = myWorkSheet.Pictures(System.Type.Missing) as Excel.Pictures;
Excel.Picture pic = null;

pic = p.Insert(path + pic_name + ".png", System.Type.Missing);

pic.Left = Convert.ToDouble(picPosition.Left);
pic.Top = picPosition.Top; 
```

我曾尝试在插入之前调整图片大小，但它会降低质量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:31:05.157

解决了！！！我刚刚在上面的代码中添加了接下来的三行：

```
pic.ShapeRange.LockAspectRatio = Microsoft.Office.Core.MsoTriState.msoCTrue;
                        pic.ShapeRange.Width = 170;
                        pic.ShapeRange.Height = 170; 
```

所以，现在它看起来像这样：

```
Excel.Pictures p = myWorkSheet.Pictures(System.Type.Missing) as Excel.Pictures;
Excel.Picture pic = null;

pic = p.Insert(path + pic_name + ".png", System.Type.Missing);

pic.ShapeRange.LockAspectRatio = Microsoft.Office.Core.MsoTriState.msoCTrue;
pic.ShapeRange.Width = 170;
pic.ShapeRange.Height = 170;

pic.Left = Convert.ToDouble(picPosition.Left);
pic.Top = picPosition.Top; 
```

而且效果很好。

# c# - C# 后台工作程序 RunWorkerCompleted 永远不会触发 - 为什么？

> ID：12859699
> 
> 赞同：0
> 
> 时间：2012-10-12T13:02:45.893
> 
> 标签：c#, multithreading, backgroundworker

**更新**

我现在想知道 foreach 循环在这里迭代的 IEnumerable 是否来自使用 yield return 的循环。我不确定这是否对线程有任何影响......？

* * *

谁能指出为什么我从未在此代码中看到 BackgroundWorker RunWorkerCompleted 事件触发（这是一个 .NET 4、MVC 3 应用程序）？

无论我设置什么，**WorkerSupportsCancellation**和**WorkerReportsProgress**完成的事件似乎永远不会触发。

即使我尝试在 DoWork 块中抛出异常，我也从未看到完成的事件。据我了解，我应该。

这里有什么明显的吗？

顺便说一句，由于项目限制，我无法将项目升级到 .NET 4.5 以使用更新的异步功能。

```
var autoResetEvent = new AutoResetEvent(false);

UploadsExpected = pagesFound;

foreach (var rasterisedPageFilePath in rasterisedPageFilePathList)
{
    // Track uploads

    UploadsStarted += 1;

    int uploadCount = UploadsStarted;

    // Track concurrent uploads in main thread and while we are at our 
    // maximum, pause and wait before starting the next upload thread

    while (ConcurrentUploadsRunning >= maxConcurrentUploads) 
    {
        Debug.WriteLine(string.Format("Waiting to start upload: {0}", 
            uploadCount));

        Thread.Sleep(3000);
    }

    ConcurrentUploadsRunning += 1; 

    Debug.WriteLine(string.Format("Initiating new upload: {0}", uploadCount));

    // Create a background worker so we can run the upload asynchronously.

    var backgroundWorker = new BackgroundWorker();

    // Set up anonymous method that runs asynchronously

    backgroundWorker.DoWork += (sender, e) => 
    {
        try
        {
            var storageManager = new storageManager(awsS3BucketName);

            string imgFilePath = (string) e.Argument;

            using (var fileStream = new FileStream(imgFilePath, FileMode.Open))
            {
                storageManager.Save(Path.GetFileName(imgFilePath), 
                    MimeTypes.JPEG, fileStream);
            }
        }
        catch (Exception ex)
        {
            UploadHasFailed = true;

            m_logManager.Fatal("Upload of file to AWS S3 has failed", ex);
        }
        // Run check for AutoResetEvent following Save complete,
        // and if the completed uploads count indicates that all uploads
        // have finished, set AutoResetEvent so main thread can exit

        if ((UploadsCompleted += 1) == UploadsExpected)
        {
            autoResetEvent.Set();
        }

        Debug.WriteLine(string.Format("Upload complete: {0}", uploadCount));

        ConcurrentUploadsRunning -= 1;
    };

    backgroundWorker.RunWorkerCompleted += (sender, args) =>
    {
         // Never fires
    };

    backgroundWorker.ProgressChanged += (sender, args) =>
    {
        // Never fires
    };

    backgroundWorker.RunWorkerAsync(rasterisedPageFilePath);

}

autoResetEvent.WaitOne();

try
{
    inputStream.Close();

} catch { } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T13:15:32.710

这段代码中有很多奇怪的怪癖——执行代码的线程是在你的主线程还是其他线程之上？无论哪种方式，如果它是您的 GUI 线程，那么它会阻塞 (.Sleep(3000))，如果不是，那么您会在错误的上下文中创建您的后台工作线程

# ajax - 在完全通过手机运行的 jQuery Mobile 应用程序上使用 Google Analytics

> ID：12859706
> 
> 赞同：0
> 
> 时间：2012-10-12T13:03:07.863
> 
> 标签：ajax, jquery-mobile, google-analytics

我使用 jQuery mobile 和 phoneGap 制作了一个应用程序，并阅读了将 Google Analytics 放在那里的好处。我只是有点困惑，因为大多数应用程序（页面等...）都是从手机上的 index.html 文件运行的。应用程序与服务器通信的唯一时间是用户登录并执行 ajax 请求以检索或将数据放入数据库时​​。

我还能在这里使用分析包吗？或者它的全部意义在于与所有 DOM 等都在线存储的应用程序一起使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:07:54.970

您可能可以使用 Google Analytics 的事件跟踪功能来帮助您： [https ://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

您基本上只需触发一个 js 函数并传入描述性字符串和类别，我认为对于您想要跟踪/报告的每个交互：

_trackEvent（类别、操作、opt_label、opt_value、opt_noninteraction）

希望有帮助

# c++ - C++：模棱两可的函数

> ID：12859710
> 
> 赞同：0
> 
> 时间：2012-10-12T13:03:22.247
> 
> 标签：c++, ambiguity

我几乎不懂 C++，但我需要帮助来解决项目构建问题。当我制作项目时，它给了我一个错误，说某些功能是模棱两可的。我清楚地理解它的意思[“这意味着有其他版本的函数接受不同的参数或不同数量的参数”](http://www.cplusplus.com/forum/beginner/3165/)。但由于我在 C++ 方面的经验很少，我不知道如何解决它。所以这就是我在这里寻求帮助的原因。

我遇到的错误是：

```
C:\opencv-build\modules\java\core.cpp:172:65: error: call of overloaded 'PCACompute(cv::Mat&, cv::Mat&, cv::Mat&, jint&)' is ambiguous
    C:\opencv-build\modules\java\core.cpp:172:65: note: candidates are:
    In file included from c:/opencv-git/modules/java/generator/src/cpp/converters.h:4:0,
                     from C:\opencv-build\modules\java\core.cpp:8:
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:2383:19: note: void cv::PCACompute(cv::InputArray, cv::InputOutputArray, cv::OutputArray, int)
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:2386:19: note: void cv::PCACompute(cv::InputArray, cv::InputOutputArray, cv::OutputArray, double)
    C:\opencv-build\modules\java\core.cpp: In function 'void Java_org_opencv_core_Algorithm_setInt_10(JNIEnv*, jclass, jlong, jstring, jint)':
    C:\opencv-build\modules\java\core.cpp:6219:32: error: call of overloaded 'set(std::string&, jint&)' is ambiguous
    C:\opencv-build\modules\java\core.cpp:6219:32: note: candidates are:
    In file included from c:/opencv-git/modules/java/generator/src/cpp/converters.h:4:0,
                     from C:\opencv-build\modules\java\core.cpp:8:
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4328:29: note: void cv::Algorithm::set(const string&, int)
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4329:32: note: void cv::Algorithm::set(const string&, double)
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4330:30: note: void cv::Algorithm::set(const string&, bool)
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4331:32: note: void cv::Algorithm::set(const string&, const string&) <near match>
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4331:32: note:   no known conversion for argument 2 from 'jint {aka long int}' to 'const string& {aka const std::basic_string<char>&}'
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4332:29: note: void cv::Algorithm::set(const string&, const cv::Mat&) <near match>
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4332:29: note:   no known conversion for argument 2 from 'jint {aka long int}' to 'const cv::Mat&'
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4334:35: note: void cv::Algorithm::set(const string&, const cv::Ptr<cv::Algorithm>&) <near match>
    c:/opencv-git/modules/core/include/opencv2/core/core.hpp:4334:35: note:   no known conversion for argument 2 from 'jint {aka long int}' to 'const cv::Ptr<cv::Algorithm>&' 
```

如果您需要更多信息/代码，请告诉我，我会用它更新问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:14:30.447

`jint`是一个 typedef `long int`（见`'jint {aka long int}'`下面的行）。 `long int`是一种不同的类型`int`（即使它们具有相同的表示形式），因此编译器无法在该参数中的重载`int`之间做出决定。`double`

由于您似乎在 Windows 上，`int`并且`long int`具有相同的表示形式（因为 64 位 Windows 使用[LLP64 数据模型](http://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models)），因此您可以：

*   配置包含 的定义的项目`jint`以使用`int`而不是`long int`, 或
*   添加重载将`long int`其转发到`int`重载，或
*   将`jint`参数转换到`int`它调用模棱两可的函数的任何地方

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:16:05.147

您必须给出方法中最后一个参数的正确类型。

假设您致电：

PCACompute(cv::Mat&, cv::Mat&, cv::Mat&, jint&) 最后一个参数为 5

并且编译器不知道如何选择：

void cv::PCACompute(cv::InputArray, cv::InputOutputArray, cv::OutputArray, int) void cv::PCACompute(cv::InputArray, cv::InputOutputArray, cv::OutputArray, double)

因为 5 可以解释为 int 或 double。您必须将最后一个参数显式转换为 (int) 或 (double)，然后编译器才会做出正确的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:11:50.660

构建错误显示了问题。

不支持对 PCACompute(cv::Mat&, cv::Mat&, cv::Mat&, jint&) 的调用，因为具有相同函数名称（和可能的参数类型）的唯一可能函数是下面列出的函数。这只是意味着您正在调用具有错误参数类型的同名函数。

```
void cv::PCACompute(cv::InputArray, cv::InputOutputArray, cv::OutputArray, int)
void cv::PCACompute(cv::InputArray, cv::InputOutputArray, cv::OutputArray, double) 
```

# c# - 填充 0 - MySQL

> ID：12859711
> 
> 赞同：0
> 
> 时间：2012-10-12T13:03:27.063
> 
> 标签：c#, mysql, select, datatable, zero-pad

所以，我有一列是我的关键列和自动增量，所以它不能是 varchar 或任何有趣的东西。

请不要使用“Erhmahgerd urse werb contrerls”，因为我喜欢控制自己的 HTML 流并且不喜欢将其交给 .NET。我从来没有很好的经验（而且我喜欢我的代码是合规的）。我不希望这是一场火焰战争或任何事情 - 我只想用零填充。我觉得有必要这么说，因为它以前发生过太多次了。

所以无论如何。

```
DataTable tabledata = new DataTable();  
using (OdbcConnection con = new OdbcConnection(conString)) {
    using (OdbcCommand com = new OdbcCommand("SELECT * FROM equipment_table", con)) {
        OdbcDataAdapter myAdapter = new OdbcDataAdapter();
        myAdapter.SelectCommand = com;
        try {
            con.Open();
            myAdapter.Fill(tabledata);
        } catch (Exception ex) {
            throw (ex);
        } finally {
            con.Close();
        }
    }
}
Response.Write("<table id=\"equipment_listtable\"><thead><tr><th>Equipment ID</th><th>Equipment Name</th><th>Equipment Description</th><th>Type</th><th>In Use?</th><th>iOS Version (if applicable)</th><th>Permission Level</th><th>Status</th><th>Asset Tag</th><th>Details</th><th>Change</th><th>Apply</th></tr></thead>");
foreach (DataRow row in tabledata.Rows) {
    int counter = (int)row["Equipment_ID"];
    Response.Write("<tr>");
    foreach (var item in row.ItemArray) {
        Response.Write("<td>" + item + "</td>");
    }
    Response.Write("This stuff is irrelevant to my problem, so it is being left out... It uses counter though, so no complaining about not using variables...");
}
Response.Write("</table>"); 
```

可以想象，我的键列的值在生成的表中如下所示：

```
1
10
11
12
13
14
15
16
17
18
19
20
2
21 
```

等等。我想用 0 填充来解决这个问题。做这个的最好方式是什么？有没有办法在我生成表格时定位特定字段？我查看了 DataRow.Item，但我一直发现 MSDN 文档有点难以理解。

或者，我可以选择 * 然后在 * 中的一个特定字段上使用 mysql 的 lpad 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:21:03.443

SELECT * 通常不是一个好主意。它不可避免地会导致比通过编写查询节省的时间更多的问题。
这将允许您在列上使用 LPAD。

我正要建议使用类似的东西：
Response.Write("" + item.ToString.PadLeft(2, '0')+ "");

但是由于您只是循环每个项目并以相同的方式渲染它们，因此上面会填充每个单元格。

所以我认为你最好的选择是改变你的查询来指定每一列。然后，您可以根据需要填充该字段。
或者，如果您只担心它们的排序不正确（即，作为字符而不是整数排序），请使用 ORDER BY。

或者，为从数据库读取的每个单元格创建一个变量并分别渲染每个单元格。如果您需要，这将为您提供更多自定义选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:14:02.367

您可以使用 .ToString("D" + number ofleading zeros) 在 C# 中添加填充；例如。如果 counter = 34 并且您调用 counter.ToString("D5")，您将得到 00034。

如果您使用的是字符串，最简单的方法是 convert.toInt32() 然后应用上述内容。

如果您想继续使用字符串，只需查看 --printf *whups 错误的语言*-- String.Format。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:10:45.977

您确实应该*始终*明确指定您的列名，并且无论如何都不要使用 * - 请参见[此处](https://stackoverflow.com/questions/4437399/is-using-count-or-select-a-good-idea)。

如果您坚持使用 * 则只需将填充值作为另一个字段带入：

```
SELECT *,LPAD("Equipment_ID", 2, '0') as Equipment_ID_Padded FROM equipment_table 
```

`LPAD`如果您的 Equipment_ID 长于 2 位，请记住将截断。

更好的解决方案可能是仅使用`String.Format`或填充代码中的值`ToString("D2");`

```
string paddedString = string.Format("{0:d2}", (int)row["Equipment_ID"])); 
```

# asp.net-mvc - 拥有 ASP.NET MVC 4 + Node.JS 混合应用程序时的会话

> ID：12859716
> 
> 赞同：2
> 
> 时间：2012-10-12T13:03:54.877
> 
> 标签：asp.net-mvc, node.js, session

我已经做了一个证明，我可以在 ASP.NET MVC 应用程序中包含 Node.JS。假设我将使用外部会话提供程序，例如 windows server appfabric Cache 或 memcache。

我有一个应用程序，其中有一个非常复杂的程序集，我们使用它来构建中间层对象，然后将其存储在会话中。它产生的程序集和对象是我们最有价值的部分，我无法证明将这个 C# 项目重写为更适合 Node.JS 的东西。

此数据存储在外部缓存中，现在 node.JS 开发人员需要访问它。你们在这种情况下使用了哪些技术？我很确定我将不得不拥有由 asp.net 端提供的某种服务接口，因为它是拥有这个记录系统的那个。

我还在为允许 ASP.NET MVC 和 Node.Js 以混合方式很好地协同工作的新项目寻找一个绿地选项，所以也许这可以通过将数据存储在适用于两者的约定中来解决。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:57:40.760

我根本不会使用 ASP.NET 会话。也许数据库将是一种更具互操作性的方法。SQL Server 甚至 NoSQL 解决方案（例如[RavenDB）](http://ravendb.net/)可能是一个不错的选择。

ASP.NET 进程外会话状态提供程序的问题在于它们使用不可互操作的序列化程序（例如`BinaryFormatter`或`NetDataContractSerializer`），因此您无法从 NodeJ 中读回数据。不同版本的 .NET 框架之间的序列化机制甚至可能存在差异，因此即使在不同版本的框架上运行 2 个 ASP.NET 应用程序，共享会话数据也可能是一个挑战。

# c++ - 为什么 TCP 套接字在收到不正确的 ACK 时发送 RST 数据包而不是重新发送数据？

> ID：12859717
> 
> 赞同：4
> 
> 时间：2012-10-12T13:04:01.170
> 
> 标签：c++, actionscript-3, sockets, tcp, tcpdump

关于 TPC 连接的“酷”事情之一是数据不会丢失。当数据没有被确认时，TCP*应该*会重新发送数据。

我有一个用 c++ 编写的经典游戏服务器，客户端是用 Flash AS3 编写的。

在客户端中，我添加了一个检查器工具，该工具每 X 秒尝试连接到 YouTube 和 Twitter，超时时间为 5 秒。问题是在客户端的互联网连接在几秒钟内断开后（互联网检查器收到 1 或 2 次超时，但之后收到 OK），它开始从服务器接收数据，但服务器停止从客户端接收数据。

这是 TCPDUMP 接收到的流：

```
1\. server > client: Flags [P.], seq 2374:2378, ack 119, win 14600, length 4
2\. client > server: Flags [.], ack 2374, win 15524, length 0
3\. client > server: Flags [.], ack 2378, win 15520, length 0
 . [Here the client sends data to the server, but the server never receives it...]
4\. server > client: Flags [P.], seq 2378:2383, ack 119, win 14600, length 5
5\. server > client: Flags [P.], seq 2386:2389, ack 119, win 14600, length 3
6\. client > server: Flags [.], ack 2386, win 15512, length 0
7\. client > server: Flags [.], ack 2389, win 15509, length 0
8\. client > server: Flags [R.], seq 127, ack 2389, win 0, length 0 
```

如您所见，当服务器发送带有错误 ACK 的数据时，客户端不会重新发送数据，而是发送 RST 数据包（强制服务器关闭连接）。在客户端日志中，我可以看到接收并处理服务器发送的数据（因此当服务器发送不正确的 ACK 时连接不会关闭）。

当 TCP 在收到不正确的 ACK 后决定发送 RST 数据包而不是重新发送数据时？

`Socket`客户端套接字是这样定义的 AS3 ：

```
var socket:Socket = new Socket(); 
```

并且服务器套接字设置为非阻塞`fcntl()`。还有这个选项：

```
setsockopt(socket, IPPROTO_TCP, TCP_NODELAY, (char *)&dummyint, sizeof(int));
setsockopt(socket, SOL_SOCKET, SO_KEEPALIVE, (char *)&dummyint, sizeof(int)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:01:30.480

请注意，转储中似乎缺少一个额外的数据包，服务器字节 2383-2385，尽管客户端似乎确实看到了它们，因为它确认了它们。

服务器没有回复不正确的 ACK。它用它在流中看到的最后一个字节号的 ACK 进行回复，#119。当服务器在一段时间后未能确认它们时，由客户端重新传输这些丢失的字节。相反，它正在发送 RST。

没有时间信息，但我不得不猜测 RST 来自客户端的超时，然后才重新传输信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:08:00.683

TCP 本身并不是“不稳定的”，它是一种协议。如果有什么不稳定，那就是您的网络连接。TCP 具有在不稳定网络上重试的算法。您的代码也可能有问题，并且可能有中间设备使您的连接超时。

# ruby-on-rails - 使用 mongomapper 和 rails 我的记录拒绝更新

> ID：12859723
> 
> 赞同：1
> 
> 时间：2012-10-12T13:04:31.680
> 
> 标签：ruby-on-rails, ruby, mongodb, mongomapper

我的数据库不会更新我的 active_quests。我要做的就是用另一个更新的哈希数组替换一个哈希数组。我认为这将是处理此问题的最简单方法。这是代码：

```
# construct the query
query = Player.where( :_id => player_id).fields( :xp, :lvl_prgrssns, :active_quests, :completed_quests )

# get the player
player = query.first

if !player.nil?
    return_val = player.set( :active_quests => [{"quest_id" => "123"}, {"quest_id" => "456"}])
    logger.debug "return_val = "+return_val.to_s # comes out as 180
end 
```

我的理解是，如果一组的回报是积极的，那就意味着这组是成功的。在这种简化的情况下，它返回 180，但 active_quests 永远不会在播放器上更新。我可以进入 mongo 控制台并执行以下命令：

```
db.players.update({_id:ObjectId("50756b1896f4f5121a00000a")}, {$set:{active_quests:[{"quest_id":"1"}, {"quest_id":"2"}] }}); 
```

并且 active_quests 将按预期更新，但无论我在 Rails 中尝试什么，更新似乎都会通过，但没有任何更新。

以下是我尝试过的许多替代方案中的一些（所有都尝试过使用和不使用 .to_mongo 以及使用和不使用 player.save 之后）：

```
Player.where( :_id => params[:player_id] ).update(:active_quests => active_quests_list.to_mongo)

player.update_attributes(:active_quests => active_quests_list.to_mongo)

player_update = player.as_json
player_update["active_quests"] = active_quests_list
player.update_attributes(player_update)

return_val = query.update( "$set" => {:active_quests => player.active_quests.to_mongo} )

return_val = query.update( {:_id => params[:player_id]}, {"$set" => {:active_quests => active_quests_list.to_mongo}}) 
```

我希望这里的人可能知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:24:53.400

经过进一步调查，事实证明这是一个与 player 变量如何在函数之外更新有关的问题。

在这种情况下，以下行将更新记录（内存中和数据库中）

```
player[:active_quests] << @active_quests_list
player.push_all(:active_quests => player.active_quests) 
```

但是，在这种情况下，播放器变量是此函数的本地变量，并且在函数返回后再次更新。

这是在仔细检查“mongod -vvvvv”的输出后才发现的。

# php - Shell 和 Perl 脚本的 GoDaddy Cron 作业问题

> ID：12859726
> 
> 赞同：-2
> 
> 时间：2012-10-12T13:04:54.570
> 
> 标签：php, perl, cron, cgi, shellexecute

我在我的 GoDaddy 服务器上创建了一个名为“SponUpdate.sh”的 Cron 作业

这是这个文件的代码

```
#!/bin/bash

/usr/bin/perl /home/content/14/5959214/html/cgi/JLLoadSponFRJ.pl
/usr/bin/perl /home/content/14/5959214/html/cgi/JLLoadSponMGJ.pl
/usr/bin/perl /home/content/14/5959214/html/cgi/JLLoadSponCAD.pl
/usr/bin/perl /home/content/14/5959214/html/cgi/JLLoadSponCJB.pl 
```

现在的问题是，当这个 cron 作业运行时，它说我跟随错误，

“/bin/sh：/var/chroot/home/content/14/5959214/html/cgi/SponUpdate.sh：/bin/bash：错误的解释器：权限被拒绝”

这是 Perl 文件“JLLoadSponFRJ.pl”之一的代码

```
my $command = '/web/cgi-bin/php5 -q $HOME/html/GISJobs/JLLoadSpon.php';
exec ($command) or print STDERR "couldn't exec $command: $!"; 
```

我无法从过去 3 天解决它，

请帮我，

提前致谢，

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:40:31.890

因此，您正在启动一个运行 bash 脚本的 cron 作业，该脚本调用一些调用 php.ini 的 perl 脚本。为什么不直接从 cron 调用 php？

检查您的 bash 脚本是否不包含“\r\n”行结尾：您可能正在尝试调用“/bin/bash\r”而不是“/bin/bash”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:31:39.643

您可以检查 bash 路径

```
哪个 bash
```

然后您可以更正 perl 脚本的 shebang !#/bin/bash。

# jquery - 对 CSS 值的 jQuery 测试不起作用

> ID：12859730
> 
> 赞同：0
> 
> 时间：2012-10-12T13:04:58.843
> 
> 标签：jquery, css

我有一个复选框，我根据页面上的下拉选择显示/隐藏。

```
$("#Units").change(function () {
  if ($(this).val() == "D") {
    $('#chkSkipSatSun').css('display', 'inline'); 
  } else {
    $('#chkSkipSatSun').css('display', 'none'); 
  }
}); 
```

在页面加载时，复选框被隐藏。我使用下拉菜单打开它并提交页面，但此测试一直失败：

```
if ($('#chkSatSun').css('display') == 'inline') {
  alert('in');
} 
```

我在浏览器中查看 HTML，显示肯定设置为内联，但此测试一直失败。如何让这个测试工作并在 DOM 中查看 inline 的 CSS 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:07:00.590

`$('#chkSatSun')`并且`$('#chkSkipSatSun')`是不同的东西。

# logging - 如何为自定义 Gradle 插件设置不同的日志级别

> ID：12859731
> 
> 赞同：6
> 
> 时间：2012-10-12T13:05:01.150
> 
> 标签：logging, gradle, flyway

我正在为 gradle 编写一个 flyway 包装器插件。Flyway 已经使用 log4j 进行消息记录。

在信息级别上，所有输出都与用户相关。

当我将自定义插件添加到新项目并运行其中一项任务时，输出中不会显示任何内容。我必须运行 gradle `flywayStatus`--info 才能查看消息。

有没有办法更改插件中的 log4j 设置，以便在使用该插件的项目中不需要修改日志级别？

任何想法都会非常感激。

谢谢，格温

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:58:23.020

您可以通过调用其 getLogging() 方法来访问该任务的[LoggingManager](http://gradle.org/docs/current/javadoc/org/gradle/api/logging/LoggingManager.html)。

您可以在 Manager 上设置日志记录级别。

# sql - 如果表中的两列具有相同的值，则获取单行

> ID：12859736
> 
> 赞同：6
> 
> 时间：2012-10-12T13:05:16.423
> 
> 标签：sql, sql-server

我有一个表，其中包含以下值的调用者和被调用者列

```
caller callee
999 888
888 999
999 555
555 333
555 999 
```

现在我只想返回单行

```
caller1    caller2  count 
999        888      2
999        555      1
555        333      1
555        999      2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:08:20.383

```
SELECT CASE
         WHEN caller < callee THEN callee
         ELSE caller
       END      AS caller1,
       CASE
         WHEN caller < callee THEN caller
         ELSE callee
       END      AS caller2,
       Count(*) AS [Count]
FROM   YourTable
GROUP  BY CASE
            WHEN caller < callee THEN callee
            ELSE caller
          END,
          CASE
            WHEN caller < callee THEN caller
            ELSE callee
          END 
```

# android - 我需要在 java 类中创建一个按钮并在 xml 中替换它

> ID：12859741
> 
> 赞同：0
> 
> 时间：2012-10-12T13:05:41.167
> 
> 标签：android

我需要在java类中创建一个按钮并将其替换为xml中的特定位置，就像我想将它们放在我在xml中创建的水平滚动视图中请任何帮助+我需要一个允许我根据我的数组自动生成按钮的函数尺寸谢谢。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:37:04.340

试试这个代码

```
LinearLayout layout=(LinearLayout)findViewById(R.id.linearLayout); 
LayoutParams layoutParam_text=new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT); layoutParam_text.gravity=Gravity.LEFT; 
Button btnTest[]=new Button[array.size];

    for(int i=0;i<array.size();i++)
    {
        btnTest[i] =new Button(this);
        btnTest[i].setLayoutParams(layoutParam_text);
        btnTest[i].setTag(""+i);
        btnTest[i].setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {

            }
        });
        layout.addView(btnTest[i]);
    } 
```

# django - 在 django 中定义一个 create 函数

> ID：12859744
> 
> 赞同：0
> 
> 时间：2012-10-12T13:05:57.530
> 
> 标签：django

我正在尝试创建一个“管理”页面，用户可以在其中创建一个“匹配”，为其命名，并将我创建的匹配列表显示到另一个页面。我还想要一个“删除”按钮来删除匹配项。

我有这个模型：

```
class Match(models.Model):
    teams = models.ManyToManyField(Teams)
    identite = models.CharField(max_length=60)
    teamA = models.CharField(max_length=20)
    teamB = models.CharField(max_length=20)
    info = models.CharField(max_length=500)
    sport = models.CharField(max_length=20)
    date_start = models.DateTimeField()
    date_end = models.DateTimeField()

    def __unicode__(self):
        return self.identite 
```

我在模型中创建了这个函数：

```
def create_match(self,name):
    return self.create('name') 
```

然后，我尝试在管理页面的 html 中创建一个表单：

```
 <form method="post" action=".">
 {% csrf_token %}
 <p><label for="Team A">Team A:</label> <input id="Team A" type="text" class="required"   name="Team A" maxlength="30"></p>
 <p><label for="Team B">Team B:</label> <input id="Team B" type="text" class="required" name="Team B" maxlength="30"></p>
  (...)
 <input type="submit" value="" />
 </form> 
```

所以我的问题是：

如何调用我的函数“create_match”，以便当我单击提交按钮时，它会在我的数据库中创建与我填写的数据的匹配项？如何将此匹配添加到列表中，以便可以将此列表显示到其他页面？最后，我怎样才能从这个列表中删除匹配而不从数据库中删除它？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:31:28.870

Django 提供了基于模型生成表单的内置功能，这些模型称为[模型表单](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)

此外，通常要“创建”新模型，只需实例化您的模型类并分配正确的值并保存它。

django 还提供了一个内置的管理页面，允许您注册模型并允许用户在您的数据库中创建/删除/修改记录。将模型添加到 django 管理员并获得此功能是微不足道的。

# dependencies - 从软件中心安装软件包时出错：无法解决软件包依赖关系

> ID：12859745
> 
> 赞同：1
> 
> 时间：2012-10-12T13:06:00.013
> 
> 标签：dependencies, ubuntu-12.04

我试图从 Ubuntu 软件中心安装 Texmaker（乳胶开发环境）。但是我遇到了以下错误。在尝试安装许多其他软件包时，我也收到了同样的错误。

> 无法解决包依赖关系
> 
> 此错误可能是由缺少或无法安装所需的附加软件包引起的。此外，不允许同时安装的软件包之间可能存在冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:52:46.200

你可以这样试试：

1.  在终端窗口中，键入：

    ```
    sudo apt-add-repository -y ppa:texlive-backports/ppa
    sudo apt-get update 
    ```

2.  关闭终端并重新启动 Ubuntu 软件中心。

# jquery - 检查具有“X”类的元素是否具有“N”的rel

> ID：12859748
> 
> 赞同：0
> 
> 时间：2012-10-12T13:06:04.710
> 
> 标签：jquery, css, class, if-statement, rel

例如，如果您有一个具有某个类的元素，`class="selected"`并且需要查看它是否具有某个 rel 值，那么该怎么做呢？

在基本逻辑中：

```
If('.selected' has 'rel=6'){
//action
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:11:21.630

尝试这个;

```
If($(".selected").attr('rel') == '6'){ alert("ok"); } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T13:11:34.337

最简单的形式是：

```
if ( $('.selected[rel=6]').length ){
    //object found
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:09:50.710

使用[**.is**](http://api.jquery.com/is/)：

```
var $selected = $('.selected');
if ($selected.is('[rel=6]')) { ... } 
```

... 或[**.filter**](http://api.jquery.com/filter/)：

```
var $selected = $('.selected'),
    $rel6     = $selected.filter('[rel=6]'); 
```

... jQuery 方法，取决于您的实际需要。

# python - Python Unicode, Pyramid, UTF-8 MySQL Table issue

> ID：12859750
> 
> 赞同：1
> 
> 时间：2012-10-12T13:06:15.553
> 
> 标签：python, mysql, unicode, utf-8, sqlalchemy

I have a Python 2 Pyramid web app using SQLAlchemy to talk to a MySQL table, of which all string columns are **UTF-8** encoded. When I pull the data to display, I must use `.decode("UTF-8")` in order for it to show, otherwise I get the natural error of ASCII can not decode.

I have two questions:

1.  Is there any other way of working to avoid the need of `.decode("UTF-8")` each and every time?

2.  If I want to push something into the database, and I have a string which is `s = u'str'`, do I need to do anything to it when it's to be insterted to a UTF-8 column?

Thank you very much.

> For people who might find this message through a google search: If you encounter an error, sort of:
> 
> > **UnicodeDecodeError: 'ascii' codec can't decode byte in**
> 
> Do use **`.encode(..)`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:10:57.347

If your SQLAlchemy columns are of the [Unicode](http://docs.sqlalchemy.org/en/rel_0_7/core/types.html?highlight=unicode#sqlalchemy.types.Unicode) type instead of [String](http://docs.sqlalchemy.org/en/rel_0_7/core/types.html?highlight=unicode#sqlalchemy.types.String), SQLAlchemy will do the character encoding/decoding (in your case to/from `UTF-8`) for you.

Note that the [String](http://docs.sqlalchemy.org/en/rel_0_7/core/types.html?highlight=unicode#sqlalchemy.types.String) column type has a `convert_unicode` parameter which can be set to `True`, but this should only be used for the very rare cases where the database backend doesn't have native Unicode support.

As @MartijnPieters mentioned on his comment, you should be aware of the [MySQL Unicode](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html?highlight=tables#unicode) section in the SQLAlchemy documentation. Namely, if you don't explicitly set the character encoding in the connection to the database with:

```
# set client encoding to utf8; all strings come back as unicode
create_engine('mysql+mysqldb:///mydb?charset=utf8') 
```

(the following is mostly quoted from the *SQLAlchemy* documentation)

*"[...] many MySQL server installations default to a `latin1` encoding for client connections, which has the effect of all data being converted into `latin1`, even if you have `utf8` or another character set configured on your tables and columns. The charset parameter as received by MySQL-Python also has the side-effect of enabling `use_unicode=1`."*

*"Manually configuring `use_unicode=0` will cause MySQL-python to return encoded strings:"*

```
# set client encoding to utf8; all strings come back as utf8 str
create_engine('mysql+mysqldb:///mydb?charset=utf8&use_unicode=0') 
```

# java - 如何从 JTextPane 中删除组件

> ID：12859751
> 
> 赞同：1
> 
> 时间：2012-10-12T13:06:28.653
> 
> 标签：java, swing, jtextpane

好的。以编程方式插入组件是显而易见的：`myJTextPane.insertComponent`.

访问组件有点棘手，但我使用类似：`myJTextPane.getComponents().getComponents()[0]`. (1)

但是如何以编程方式从 myJTextPane 中删除组件？

(1) 我实际上是在 Clojure 中编程，所以语法可能不是 100%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:52:19.897

您将其视为特定位置的角色：

```
myJTextPane.getDocument().remove(int offs, int len) 
```

例如，如果您有一个按以下顺序包含组件的文本窗格：

[Component1] - [Component2] - [Component3] - 一些文字

并且您想删除第二个和第三个组件：

```
myJTextPane.getDocument().remove(1, 2) 
```

查看[文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/Document.html#remove%28int,%20int%29)

# jquery - Rails Twitter Bootstrap 工具提示本地化

> ID：12859752
> 
> 赞同：1
> 
> 时间：2012-10-12T13:06:31.743
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, localization, tooltip

我正在使用 Twitter-Bootstrap 工具提示，我想知道是否有本地化它们的方法或最佳实践？例如：在配置/语言环境中

我的设置是：

宝石文件

```
gem 'twitter-bootstrap-rails', '~> 2.1.3' 
```

bootstrap.js.coffee

```
jQuery ->
  $('#plugin_description').tooltip({'trigger':'hover', 'title': 'ToolTip Text'}) 
```

工具提示工作正常，但有没有办法从配置/语言环境加载字符串？那真的很棒:)

更新：我想在表单中使用带有输入字段的工具提示。现在我有这样的：

```
= f.input :name 
```

并调用它：

```
$('#application_name').tooltip({
    'placement':'top',
    'trigger':'hover', 
    'title': 'has to be unique and between 4 an 20 signs'}) 
```

但我找不到本地化 title 属性的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:52:41.347

工具提示可以从链接的标题属性中获取文本，因此将您的文本国际化：

```
<%= link_to 'hover over me', '#', :id => 'plugin_description', :title => t(:tooltip_title) %> 
```

### 更新

您只需提供带有`data-title`属性的工具提示文本。

在你的 JS 中：

```
$('.form-tooltip').tooltip({
  'placement':'top',
  'trigger':'hover'
}); 
```

请注意，没有`title`参数。

在您看来：

```
= text_field_tag :name, '', :class => 'form-tooltip', :data => {:title => t(:'your.translation.key')} 
```

看起来您正在使用 formatastic 或 simple_form 因此您需要相应地调整您的视图以生成`data-title`属性。

# java - 如何将时间戳字符串转换为本地时间字符串？

> ID：12859753
> 
> 赞同：1
> 
> 时间：2012-10-12T13:06:30.883
> 
> 标签：java, android, date, format

我有时间戳字符串：`"1989-01-01 00:00:00"`我需要将其转换为本地日期格式。

我执行：

```
SimpleDateFormat TIMESTAMPFORMAT = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
DateFormat.getDateFormat(getContext()).format(TIMESTAMPFORMAT.parse("1989-01-01 00:00:00")); 
```

并且 getDateFormat 返回`31.12.1988`

为什么？

我怎样才能收到`01.01.1989`？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:13:15.453

这可能与所涉及的时区有关。我强烈怀疑您正在使用与您用于*解析的时区不同的时区进行**格式化*，并且该值基本上会在午夜之前到达。如果您可以在两者上使用相同的时区，那么它可能会起作用。

 *如果可能的话，我鼓励你改用[Joda Time](http://joda-time.sf.net) - 你真的想要一个`LocalDate`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:18:34.240

为了在格式化时跳过时区，我建议您将其设置为默认值，如下所示：

```
SimpleDateFormat TIMESTAMPFORMAT = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
TIMESTAMPFORMAT.setTimeZone(TimeZone.getTimeZone("GMT")); 
```*

# php - 使用 PHP 从数据中提取 URL

> ID：12859754
> 
> 赞同：1
> 
> 时间：2012-10-12T13:06:32.650
> 
> 标签：php, mysql

我有一些脚本可以从表格中提取一些文本并将其转储到我的文本文件中。我希望您的帮助只删除 URL，以便文本文件只显示 URL。

```
{
$result = @mysql_query("SELECT post_content_filtered FROM wp_posts ORDER BY post_date desc limit 200");
$tsv  = array();
$html = array();
while($row = mysql_fetch_array($result, MYSQL_NUM)){
    $tsv[]  = implode("\t", $row);
    $html[] = "<tr><td>" .implode("</td><td>", $row) ."</td></tr>";
}

$tsv = implode("\r\n", $tsv);
$html = "<table>" . implode("\r\n", $html) . "</table>";
$fileName = 'finishedflippa.txt';
header("Content-type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=$fileName");
echo $tsv; 
```

`post_content_filtered`文本看起来像这样：

> blahblahblah [http://www.example.com](http://www.example.com) blahblahblah
> blahblahblah [http://www.12345.com](http://www.12345.com) blahblahblah
> blahblahblah [http://www.gfds.com](http://www.gfds.com) blahblahblah
> blahblahblah [http://www.45tyhju.com](http://www.45tyhju.com) blahblahblah

`blahblahblah`每一行都是一样的。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:09:39.073

URL有非常[复杂的定义](http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax)

你可以试试这个简单的匹配`preg_match_all`

```
$str = 'text looks something like this: 
blahblahblah http://www.example.com blahblahblah 
blahblahblah http://www.12345.com blahblahblah 
blahblahblah http://www.gfds.com blahblahblah 
blahblahblah http://www.45tyhju.com blahblahblah ' ;

preg_match_all('!https?://[\S]+!', $str, $matches);
var_dump($matches[0]); 
```

# jquery-mobile - 使用 jQuery Mobile 控制硬件后退按钮

> ID：12859759
> 
> 赞同：7
> 
> 时间：2012-10-12T13:06:44.597
> 
> 标签：jquery-mobile

我已经浏览了以下链接，我的情况也一样。

*[使用 jQuery Mobile 禁用硬件返回功能](https://stackoverflow.com/questions/11425820/disable-hardware-back-function-jquery-mobile)*

**情况：**被测设备：[三星 Galaxy S III](https://en.wikipedia.org/wiki/Samsung_Galaxy_S_III)

页面 A：具有名称（A1、A2、A3）的 ListView
页面 B：由*Form*、*Submit*和*Cancel*按钮组成。

用户填写表格并单击*提交*按钮。他/她的数据被上传到服务器。页面将更新，并显示确认对话框，表明数据已上传到服务器。

**现在问题来了。**

现在，当用户单击*硬件*返回按钮时，他/她再次被重定向到页面 B，并且他/她再次能够提交表单（我们不需要，因为表单只填写一次）。

那么有没有一种方法可以控制硬件后退按钮在页面 B 上时显示页面 A？

Nirmal的以下答案似乎有答案，但我不知道如何实现它-

> 没有真正的方法禁用黑莓或 Android 上的硬件后退按钮。
> 
> 您可以做的是维护一个会话变量，该变量在您的后台处理程序中无效，并在考试页面的 pagebeforeshow 事件中检查该会话变量。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:21:50.190

使用 cookie。每当处理表单时，向用户的 cookie 添加一个值，并在表单页面上检查该 cookie 值是否存在。

如果是这样，只需向用户显示一条消息，表明数据已经提交或将用户重定向到主页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:35:44.240

您应该能够使用 JavaScript 捕获硬件后退按钮单击事件：

```
$(document).bind('keydown', function(event) {
  if (event.keyCode == 27) {
    // Prevent default (disable the back button behavior)
    event.preventDefault();

    // Your code to show another page or whatever...
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T13:53:50.857

我在与两个页面（多页面容器）相同的 HTML 文件中包含了登录表单和用户在登录后被引导的页面。

验证登录后，我将 changePage 称为要加载的新页面的 id，其中**changeHash**为**false**。这样，即使通过硬件后退按钮，用户也不会返回登录。

# blob - hsqldb 中带有“res”连接字符串的 Blob

> ID：12859761
> 
> 赞同：0
> 
> 时间：2012-10-12T13:06:53.960
> 
> 标签：blob, hsqldb

我有一个打包的 hsqldb 数据库，一个包含我的数据库文件（mydb.script 和 mydb.lobs）的 jar 文件。

当使用“res”url (jdbc:hsqldb:res:mydb) 连接到我的数据库时，所有查询都可以正常工作，除了从 BLOB 列中获取字节。这是我得到的例外：

```
Caused by: org.hsqldb.HsqlException: file input/output error
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.types.BlobDataID.getBytes(Unknown Source)
    at org.hsqldb.types.BlobInputStream.readIntoBuffer(Unknown Source) 
```

当使用“文件”url 连接到同一个数据库时，一切正常。用于从 BLOB 列获取字节的代码如下：

```
// rs is ResultSet
Blob blob = rs.getBlob(i + 1);
int blobSize = (int) blob.length();
byte[] bytes = new byte[blobSize];
InputStream is = blob.getBinaryStream();
try {
    is.read(bytes, 0, blobSize);
} catch (IOException e) {
    logger.error("Error reading bytes from blob: ", e);
} 
```

有什么想法会导致在使用“res”url 时从 BLOB 列读取字节失败，而在使用“file”url 时会成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:02:11.383

对于用作资源的数据库（在类路径或 jar 中），HSQLDB 不支持 LOB，直到版本 2.2.9。下一个版本应该支持它。

初始支持刚刚添加到最新的 HSQLDB 快照 jar 中，可以从以下位置下载：

[http://www.hsqldb.org/repos/org/hsqldb/hsqldb/SNAPSHOT/](http://www.hsqldb.org/repos/org/hsqldb/hsqldb/SNAPSHOT/)

# .net - FluentValidation 3.4.6 破坏运行时 VerificationException

> ID：12859764
> 
> 赞同：2
> 
> 时间：2012-10-12T13:07:05.177
> 
> 标签：.net, fluentvalidation, verificationexception

我使用的是 FluentValidation 3.4.6，我的项目的目标框架是 .net 4。我已经彻底检查了我的解决方案，以确保没有对旧版本的 FluentValidation 的引用。

我相信这个版本的 FluentValidation 可以解决 .NET 4.5 中引入的反射错误，但是我仍然收到 VerificationException，如此处所述[http://elegantcode.com/2012/08/23/net-4 -5-操作-可能会破坏运行时的稳定性-yikes/](http://elegantcode.com/2012/08/23/net-4-5-operation-could-destabilize-the-runtime-yikes/)

此时抛出 VerificationException：

```
MyValidator : AbstractValidator<MyObj>

ctor {
     RuleFor(x => x.SomeProperty).Equal(true);
}

at FluentValidation.Resources.LocalizedStringSource.CreateFromExpression(Expression`1 expression, IResourceAccessorBuilder resourceProviderSelectionStrategy) in c:\projects\FluentValidation\src\FluentValidation\Resources\LocalizedStringSource.cs:line 66
at FluentValidation.Validators.PropertyValidator..ctor(Expression`1 errorMessageResourceSelector) in c:\projects\FluentValidation\src\FluentValidation\Validators\PropertyValidator.cs:line 46
at FluentValidation.Validators.EqualValidator..ctor(Object valueToCompare, IEqualityComparer comparer) in c:\projects\FluentValidation\src\FluentValidation\Validators\EqualValidator.cs:line 37
at FluentValidation.DefaultValidatorExtensions.Equal[T,TProperty](IRuleBuilder`2 ruleBuilder, TProperty toCompare, IEqualityComparer comparer) in c:\projects\FluentValidation\src\FluentValidation\DefaultValidatorExtensions.cs:line 143
at MyValidator..ctor() in MyValidator.cs:line 22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:26:06.220

我将 Intellitrace 设置为“仅限 IntelliTrace 事件”，这在 VS2010 中为我防止了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:43:27.080

我能够在调试器之外运行并最终将其范围缩小到 intell-trace。如果您在 3.4.6 中遇到此问题，请禁用智能跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T20:45:26.257

我似乎也通过添加`FluentValidation*`到 intellitrace 设置中的排除模块列表来解决这个问题（同时保留事件和呼叫信息）。这是使用 FV.NET 的 3.4.6 版。

# asp.net - LINQ To SQL 和 ASP.NET 网站数据问题

> ID：12859765
> 
> 赞同：0
> 
> 时间：2012-10-12T13:07:09.543
> 
> 标签：asp.net, vb.net, linq-to-sql

对于具有 LINQ to SQL 的网站部署，我遇到以下问题。以下是 dbml 端的连接属性。

![在此处输入图像描述](../Images/9cb8b08deeab6686941434fcbce5a804.png)

这是我的 web.config 文件中的条目

```
<add name="myConnectionString" connectionString="Data Source=MYSQLSERVER;
Initial Catalog=MyDatabase;Integrated Security=True"/> 
```

关于部分类构造函数（VB.NET）

```
Public Sub New()  MyBase.New(ConfigurationManager.ConnectionStrings("myConnectionString").ConnectionString, mappingSource)
        OnCreated()
End Sub 
```

该网站在 VS2010 内部运行成功。

但是，我将网站部署在 IIS 上，并且页面正在呈现，除了未从数据库加载数据的数据部分。

更多信息：

当我使用 Visual Studio 开发服务器时它正在工作。当我更改为使用本地 IIS Web 服务器时，出现了问题。当我检查 IIS express 复选框时，它工作正常。

附加信息： – 我在带有 IIS 5.1 的 XP 机器上我确实选择了 ASP.NET 4.0 并执行了 aspnet_regiis - 我在 .NET 框架 4.0 下 IIS 和 .NET 之间的映射是正确的。

关于如何减轻这种情况的任何意见？

# java - 如何在Java中调用具有数组类型的构造函数

> ID：12859770
> 
> 赞同：0
> 
> 时间：2012-10-12T13:07:11.133
> 
> 标签：java, arrays

我想在 Motor 类中创建一个构造函数（Motor），我想在 Contructor1 类中调用它，但是当我这样做时出现错误......我不知道为什么。我从这周开始学习java。

这是代码：

```
 class Motor{
        Motor(int type[]){
            int input;
            input=0;
            type = new int[4];
            for(int contor=0; contor<4; contor++){
                System.out.println("Ininsert the number of cylinders:");
                Scanner stdin = new Scanner(System.in);
                    input = stdin.nextInt();
                type[contor] = input;
                System.out.println("Motor with "+type[contor]+" cylinders.");
            }
        }
    }

    public class Contructor1 {
        public static void main(String[] args){
            Motor motor_type;
            for(int con=0; con<4; con++){
                motor_type = new Motor();
            }

            }

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T13:09:49.557

不清楚为什么你首先在构造函数中放置了一个参数 - 你没有*使用*它：

```
Motor(int type[]){
    int input;
    input=0;
    type = new int[4]; 
```

在最后一行中，您基本上是在覆盖传入的任何值。您为什么要这样做？

如果您*确实*想保留它，则需要创建一个数组以从调用者传入，例如

```
int[] types = new int[4];
// Populate the array here...
motor_type = new Motor(types); 
```

不过，目前的代码看起来有点混乱 - 您实际上是打算让单个实例`Motor`具有多个值，还是*真的*对拥有多个实例感兴趣`Motor`？

作为旁注，此语法：

```
int type[] 
```

气馁。您应该将类​​型信息保存在一个地方：

```
int[] type 
```

此外，奇怪的是您在 中没有字段`Motor`，而且您也从未使用您在调用代码中创建的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:11:50.910

构造函数有一个 type 的参数`int[]`，但你不传递任何东西作为参数。您需要创建一个数组，并将其作为参数传递：

```
int[] type = new int[4];
Motor m = new Motor(type); 
```

请注意，这个构造函数参数根本没有用，因为您在构造函数中没有对它做任何事情。相反，你用一个新数组覆盖它。我会简单地删除数组参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:10:30.040

您必须将 [] 作为参数传递给`Motor`构造函数。

喜欢

```
 new Motor (new int[] {0,1,2,3}); 
```

由于您在`Motor`类中定义了参数化构造函数，因此默认情况下它不会创建无参数构造函数，这就是为什么您在下面的行中出现错误的原因

```
 motor_type = new Motor();  // Error here , because no-arg constructor not defined. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:09:52.273

您可以尝试以下操作：

```
int intType[]={1,2,3}; //create some int array
Motor motor_type=new Motor(intType); //pass int array here 
```

# ios6 - 如何在仅在 iOS-6 中支持横向方向的应用程序中使用 UIImagePickerController？

> ID：12859771
> 
> 赞同：3
> 
> 时间：2012-10-12T13:07:14.727
> 
> 标签：ios6, uiimagepickercontroller, landscape, uiinterfaceorientation

我正在开发一个仅支持横向方向的应用程序。它使用 a`UIImagePickerController`从库中挑选图像和/或视频。应用程序在 iOS-5 或更早版本中运行良好，但当我尝试呈现图像选择器控制器时它会崩溃。崩溃后会显示以下消息：

***由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”而终止应用程序，原因：“支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 返回 YES”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T12:22:07.117

正如@rocky 所说，您必须将 Potrait 模式添加到您的应用程序才能使用`UIImagePickerController`像这样

![Info.plist 中支持的接口方向](../Images/b706318afb6280b43b94d92655a544b4.png) 或将此添加到您的仅限横向应用程序委托类

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    return UIInterfaceOrientationMaskAll;
} 
```

从[**Mr.Daniel 的回答**](https://stackoverflow.com/a/12575058/1059705)中，我为您的 Landscape only App 找到了一个不错的解决方案，因为您只需要为您的应用程序支持 Landscape，您只需要为`UINavigationController`这样的添加一个类别

```
@implementation UINavigationController (LandscapeOnly)

- (NSUInteger) supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscape;
}
@end 
```

并将其添加到您的视图控制器中，它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T00:34:03.390

来自 UIImagePickerController 文档：

> 重要提示： UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。您可以将自定义视图分配给 cameraOverlayView 属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。

如果您想使用此控制器，您必须将纵向模式添加到您的支持界面方向。

# android - 如何在 Service 和 BroadcastReceiver 之间发送和获取数据？

> ID：12859774
> 
> 赞同：0
> 
> 时间：2012-10-12T13:07:17.607
> 
> 标签：android, service, broadcastreceiver

在我之前的问题中：[如何在 BroadcastReceiver 中保存和访问数据？](https://stackoverflow.com/questions/12858208/how-to-keep-and-access-data-in-broadcastreceiver)我有很好的答案，但在这里我专注于这个。

有广播接收器和服务。我想从接收器发送一些数据到服务并取回数据。发起传输的一方是接收方，而不是服务方。

为简单起见，假设接收者等待 SCREEN_ON，然后询问服务“这是用户的生日吗”，服务器返回 true 或 false。

如果我没记错的话，我应该将发送到服务的数据附加到 Intent，然后调用`startService`，但是如何取回数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:21:12.053

您不能按照您所描述的方式真正做到这一点。@CommonsWare 是正确的，**您选择的架构有缺陷**。

`BroadcastReceiver`s 是短暂的。因此，它们不能进行任何异步调用，也不能执行任何需要“大量时间”的任务。您`BroadcastReceiver`会被某个事件触发，如果由于该事件您需要做大量工作，您需要将该工作委托给`Service`.

通常（例如：在 a 中`Activity`），如果您想从 a 请求信息，`Service`您可以绑定到`Service`并同步调用服务以请求您想要的数据，或者您可以异步调用服务（即：发送`Intent`到它），然后监听返回的结果（使用 a `BroadcastReceiver`）。这些方法都不能从 a 工作，`BroadcastReceiver`因为 a`BroadcastReceiver`不能绑定到 a`Service`并且它不能进行异步调用。

**编辑：从[Android 文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html)中复制相关信息以供参考**

> **接收器生命周期**
> 
> `BroadcastReceiver`对象仅在调用期间有效`onReceive(Context, Intent)`。一旦您的代码从此函数返回，系统就会认为该对象已完成且不再处于活动状态。
> 
> 这对您在实现中可以执行的操作有重要影响 `onReceive(Context, Intent)`：任何需要异步操作的东西都不可用，因为您需要从函数返回来处理异步操作，但此时`BroadcastReceiver`不再活动，因此系统在异步操作完成之前可以自由地终止其进程。
> 
> 特别是，您可能不会显示对话框或从`BroadcastReceiver`. 对于前者，您应该改用 `NotificationManager`API。对于后者，您可以使用 `Context.startService()`向服务发送命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T21:57:52.463

使用会话！在会话中保存数据：

```
@Override
    public void onReceive(Context context, Intent intent)
    {
        SessionManager session = new SessionManager(context);
        // get user data from session
        HashMap<String, Object> user = session.getUserDetails();

    // name
    m_userId = (int)user.get(SessionManager.KEY_ID);

    m_context = context;

    PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);

    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");

    wl.acquire();

    // Put here YOUR code.
    //Toast.makeText(context, "Alarm !!!!!!!!!!", Toast.LENGTH_LONG).show(); // For example

    wl.release();
} 
```

# jquery - jquery ajax请求的JSON日期格式

> ID：12859777
> 
> 赞同：5
> 
> 时间：2012-10-12T13:07:25.817
> 
> 标签：jquery, ajax, json, date

我想通过 ajax 加载一些数据并自动解析日期。

```
var url = "http://example.com/report_containing_dates.json"
jQuery.getJSON(url, function(data_containing_dates_and_strings){
  console.log(date);
}); 
```

我的 json 中的日期格式是“2012-09-28”（rails to_json 的默认格式），但 jQuery 只是将其视为一个字符串。日期需要采用什么格式才能让 jquery 将其解析为日期？

示例响应：

```
{
  "columns": [
    ["date", "Date"],
    ["number", "active_users"],
  ],
  "rows": [
    ["2012-09-28", 120, 98, 60],
    ["2012-09-29", 127, 107, 63]
  ]
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:23:13.643

如何格式化日期字符串并不重要。JSON 方法永远不会自动将其转换为`Date`对象。JSON 仅支持以下基本类型：`Number`、`String`、`Boolean`、`Array`和. (http://en.wikipedia.org/wiki/JSON)`Object``null`

您必须自己将这些日期字符串转换为`Date`对象。

在您的情况下，可能类似于：

```
$.each(response.rows, function (idx, row) {

  row[0] = Date.parse(row[0]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:10:28.550

使用[Date.parse](http://www.w3schools.com/jsref/jsref_parse.asp)，它将从字符串转换为日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:57:27.923

好的，这比预期的要困难得多，但我确实有一个解决方案。

我采用的方法是在 ajax 请求中请求自定义数据类型，然后实现自定义转换器。

首先，我在 json 中用于日期的格式现在是 date("yyyy-mm-dd")，原始示例如下所示：

```
{
  "columns": [
    ["date", "Date"],
    ["number", "active_users"],
  ],
  "rows": [
    ["date(2012-09-28)", 120, 98, 60],
    ["date(2012-09-29)", 127, 107, 63]
  ]
} 
```

然后，我注册了一个转换器，将文本转换为名为 json_with_dates 的自定义数据类型。正则表达式用于搜索日期格式并用语句替换它们以创建日期对象。然后使用 eval 构造 json。

```
jQuery.ajaxSetup({
  converters: {
    "text json_with_dates": function( text ) {

      var with_dates = text.replace(/\"date\(([^)]*)\)\"/g, function(a, date){
        var dateParts = date.split("-");
        return "new Date(" + dateParts[0] + "," + dateParts[1] + "," + dateParts[2] + ")";
      });

      var converted = eval("(" + with_dates + ")");
      return converted;
    }
  }
}); 
```

然后我为自定义数据类型发出 ajax 请求：

```
$.ajax({
    url: div.data('chart'),
    dataType: 'json_with_dates',
    success: function(data_including_dates){
      console.log("win!");
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:45:55.543

最好自己解析日期。我在某些浏览器中遇到了一些问题，它们没有像您期望的那样从字符串中解析日期。这是一个用于字符串的快速原型`2012-09-28`：

```
String.prototype.parseDate = function(){
     var date = this.split("-");
     var yyyy = date[0];
     var mm = date[1];
     var dd = date[2];

     date = new Date(yyyy,mm,dd);
     date.setMonth(date.getMonth()-1); // since Months are 0 based
     return date;
}

console.log(data.rows[0][0].parseDate());
console.log(data.rows[1][0].parseDate());​ 
```

**[例子](http://jsfiddle.net/J7aRw/)**

取自一个类似的问题：[IE JavaScript date parsing error](https://stackoverflow.com/questions/3020508/ie-javascript-date-parsing-error)

> Date.parse 方法完全依赖于实现（new Date(string) 等价于 Date.parse(string)）

# ios - 架构 arm7 的未定义符号

> ID：12859779
> 
> 赞同：0
> 
> 时间：2012-10-12T13:07:36.227
> 
> 标签：ios, apple-push-notifications, urbanairship.com

你好我有这个问题。我有问题的图像。我正在将 UrbanAirship 添加到我的 cocos2d 游戏中。我不是第一次遇到这个问题，但问题已经开始了

检查此图像是否存在问题：http: [//i50.tinypic.com/15wxd36.jpg](http://i50.tinypic.com/15wxd36.jpg)

任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:11:35.347

您缺少一些框架，添加`MapKit.framework`和`MessageUI.framework`.

转到项目检查器中的项目，构建阶段并选择`Link Binary With Libraries`. 单击`+`并选择两者`MapKit.framework`，`MessageUI.framework`你应该很高兴。

# wpf - 在 wpf 中获取 RadialGradientBrush 的问题

> ID：12859785
> 
> 赞同：0
> 
> 时间：2012-10-12T13:08:03.923
> 
> 标签：wpf, styles, radial-gradients

```
<Border CornerRadius="20" BorderThickness="1" HorizontalAlignment="Left" Height="36" Margin="168,88,0,0" VerticalAlignment="Top" Width="36" BorderBrush="#FFBDD8D7">
        <Border.Background>
            <RadialGradientBrush GradientOrigin="0.317,-0.336" RadiusY="0.746" RadiusX="0.667">
                <RadialGradientBrush.RelativeTransform>
                    <TransformGroup>
                        <ScaleTransform CenterY="0.5" CenterX="0.5" ScaleY="1" ScaleX="1"/>
                        <SkewTransform AngleY="0" AngleX="0" CenterY="0.5" CenterX="0.5"/>
                        <RotateTransform Angle="174.743" CenterY="0.5" CenterX="0.5"/>
                        <TranslateTransform/>
                    </TransformGroup>
                </RadialGradientBrush.RelativeTransform>
                <GradientStop Color="#FF0099FF" Offset="0.051"/>
                <GradientStop Color="#FF00090A" Offset="1"/>
                <GradientStop Color="#FF33CCFF" Offset="0.761"/>
                <GradientStop Color="#FF24BDFF" Offset="0.438"/>
            </RadialGradientBrush>
        </Border.Background>
    </Border> 
```

结果如下

![在此处输入图像描述](../Images/089caf2c4ecfcf8377898d19a17394fd.png)

但我需要下面的结果。我该怎么做？

![在此处输入图像描述](../Images/682201250b5e79483e2c1814627fc281.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:46:59.297

尝试这样的事情：

```
<Window x:Class="WpfApplication16.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <RadialGradientBrush x:Key="GlowFX" GradientOrigin="0.75,0.75" Center="0.5,0.5">

        <GradientStop Color="#0073c0" Offset="1"/>
        <GradientStop Color="#FF33CCFF" Offset="0.861"/>
        <GradientStop Color="#FF24BDFF" Offset="0.438"/>
    </RadialGradientBrush>
</Window.Resources>
<Grid>
    <Border CornerRadius="20" BorderThickness="1" HorizontalAlignment="Left" Height="36" Margin="168,88,0,0" VerticalAlignment="Top" Width="36" BorderBrush="#FFBDD8D7"
            Background="{StaticResource GlowFX}">
    </Border>
</Grid> 
```

# java - 在eclipse中将简单的java项目转换为maven项目后出现NoClassDefFoundError

> ID：12859787
> 
> 赞同：0
> 
> 时间：2012-10-12T13:08:10.930
> 
> 标签：java, maven, noclassdeffounderror

我有一个类，我在 OSX（Java 1.6）上的 eclipse 中的标准 java 项目中编码。该类使用来自另一个库的类和接口。
我选择类，然后执行 Run As > Java Application，一切正常。

之后，我尝试将我的项目作为 Maven 项目运行，事情开始变得有点令人沮丧。我总结了这里的所有步骤，希望有人能告诉我我做错了什么： - 从标准 java 项目中，我右键单击并配置 > 转换为 Maven 项目并单击芬兰语。到目前为止一切都很好。

*   然后构建路径>配置构建路径>并添加包含我的项目的文件夹。还好

*   然后我删除了所有@Override 注释，因为我在某处读到 Maven 使用 JDK 1.5 而不是 1.6。不管怎样，我删除它们，我的危险信号就会消失。此时，我的类看起来与原始 java 项目中的完全一样（除了我删除的@override）

*   然后我做 Maven > clean。我得到了构建成功

*   然后 Maven > 安装。我获得了构建成功

*   然后我选择我的类并执行 Run As > Java Application ，我得到了这个丑陋的跟踪：

    线程“main”中的异常 java.lang.NoClassDefFoundError: LMAXTrading/algos/HeartbeatClient 原因：java.lang.ClassNotFoundException: LMAXTrading.algos.HeartbeatClient at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java. security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass( Launcher.java:301) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)

我不知道从这里去哪里。你可以想象我经历了很多试验和错误，并在 SO 和其他地方搜索以找到一种方法来让它工作。但我就是不知道出了什么问题。因此，如果有人有想法，我很乐意倾听。

我从导航器视图以及包资源管理器视图中粘贴到我的目录布局下方

![布局导航器视图](../Images/b61aaa7e40733395f36db929cdf4aba7.png)

![在此处输入图像描述](../Images/2bbdbb1820f8b4ec75861fdd7b14e375.png)

这是我添加了 JRE 配置的 POM.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>someproject</groupId>
  <artifactId>someproject</artifactId>
  <version>1.0-SNAPSHOT</version>
    <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T17:29:50.500

项目目录结构与默认的 Maven 目录结构不匹配。Maven 期望源`src/main/java`位于根文件夹（包含 的文件夹`pom.xml`）下的目录中。此处的源在`src`文件夹中，因此出现`No sources to compile`错误。

您可以移动源以使用默认的 Maven 目录结构，也可以通过将以下内容添加到pom 部分来更改`pom.xml`以显式指定源目录：`build`

```
<sourceDirectory>${basedir}/src</sourceDirectory> 
```

更多关于 Maven 标准目录布局的信息可以在[这里](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)找到。

# objective-c - UITableViewController 上的 2 个代表

> ID：12859792
> 
> 赞同：-1
> 
> 时间：2012-10-12T13:08:37.780
> 
> 标签：objective-c, ios, delegates, uitableview

我有一个 Controller 类，它的头文件如下所示：

```
@interface ClassA : UITableViewController<Class1Delegate, Class2Delegate> 
```

我可以在 UITableViewController 上设置 2 个代表吗？如果我这样做，我会在控制器类的实现上收到一条错误消息“不完整的实现”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:38:40.270

是的，你可以这样做。在您的情况下，编译器只是抱怨您没有为这两种协议实现所有方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:44:41.570

您应该为您意识到的协议实现所有必需的方法。在此示例中，所有必需的方法

*   Class1 代表
*   Class2Delegate

转到 Class1Delegate、Class2Delegate 并查看**@required**指令之后的方法。

另请参阅[UITabelViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)文档。

# android - 背景图像透明度拍摄布局android的快照

> ID：12859795
> 
> 赞同：0
> 
> 时间：2012-10-12T13:08:49.813
> 
> 标签：android, android-layout, android-view, android-sdcard

我有一个视图并且我已经放置了一个背景图像。在这种情况下拍摄快照可以正常工作。

但是我 setAlpha 使背景图像半透明，然后快照变成黑色，这取决于我使它透明的程度。

[如何以编程方式在 Android 中截取屏幕截图？](https://stackoverflow.com/questions/2661536/screenshot-android) 看过这个链接，但对这个案例没有多大帮助。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:16:18.950

如果您放置 alpha 颜色，则屏幕截图将始终在其上混合非彩色（黑色）。如果您想要一个屏幕截图并保留您的 alpha，您可能必须删除 alpha，等待它在屏幕上呈现，获取屏幕截图，然后将其更改回 alpha。

我知道因为我以前在应用程序中使用过它。

# actionscript-3 - 在 ActionScript 3 中创建 10 个圆圈

> ID：12859797
> 
> 赞同：0
> 
> 时间：2012-10-12T13:08:56.890
> 
> 标签：actionscript-3, actionscript, actionscript-2, flash

我试图在 AS3 中创建一个简单的方法，添加 10 个圆圈，每个圆圈的直径为 30px，列在舞台左侧下方的一列中，因此第一个出现在左上角，最后一个出现在右下角. 我会很感激这里的任何帮助。谢谢。

我当前的代码如下： - 它目前只返回 10 个没有定位的圆圈。

```
package
{
    import flash.display.*;
    import flash.utils.Timer;
    import flash.events.TimerEvent;

    public class Circles extends MovieClip
    {
        private var timer:Timer = new Timer(100, 10);

        public function Circles()
        {

            timer.addEventListener(TimerEvent.TIMER, createCircles);
            timer.start();
        }
        private function createCircles(e:TimerEvent):void
        {
            var bcircle:MovieClip = new MovieClip();
            var xpos:int = 0;
            var ypos:int = 0;

                bcircle.graphics.beginFill(0x0033CC);
                bcircle.graphics.drawCircle(xpos,ypos,15);
                bcircle.graphics.endFill();
                bcircle.x = Math.random() * stage.stageWidth;
                bcircle.y = Math.random() * stage.stageHeight;
                addChild(bcircle);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:25:50.477

```
bcircle.x = Math.random() * stage.stageWidth;
bcircle.y = Math.random() * stage.stageHeight; 
```

这些是您要注意的线条，因为这些线条控制添加到舞台时每个圆圈的放置位置。

圆直径 = 30px，舞台高度（例如）= 400px。30 进入 400 13.33 倍（400/30），因此每个圆圈需要比上一个圆圈更向下间隔 13.3 像素。

您可以存储一个变量来计算舞台上已有多少个圆圈，并使用它乘以 13.3 以找到合适的`y`值：

```
var i:int = 0;
private function createCircles(e:TimerEvent):void
{
    var bcircle:MovieClip = new MovieClip();
    var xpos:int = 0;
    var ypos:int = 0;

    bcircle.graphics.beginFill(0x0033CC);
    bcircle.graphics.drawCircle(xpos,ypos,15);
    bcircle.graphics.endFill();
    bcircle.x = 0;
    bcircle.y = (30 + 13.3) * i; // First circle placed at 0, Second placed at 43.3...
    i++; // Increment i each time function is called
    addChild(bcircle);
} 
```

您可以应用类似的方法，然后在`x`我达到 10（已放置 10 个圆圈）后增加每个圆圈的位置，使用触发器来检测：`if(i == 10)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:46:36.280

这可能有助于...

```
package {
  import flash.display.Graphics;
  import flash.display.Sprite;
  import flash.events.TimerEvent;
  import flash.utils.Timer;

  public class Circles extends Sprite {

    private const _circles:Array = []; // reusable container
    private var _timer:Timer;

    public function Circles() {
      _timer = new Timer(1000, 10);
      _timer.addEventListener(TimerEvent.TIMER, timer_timerHandler);
      _timer.addEventListener(TimerEvent.TIMER_COMPLETE, timer_timerCompleteHandler);

      _timer.start();
    }

    private function createCircle():Sprite {
      const sprite:Sprite = new Sprite();

      drawCircleInGraphics(sprite.graphics);

      addChild(sprite);

      return sprite;
    }

    private function drawCircleInGraphics(graphics:Graphics, color:uint = 0x0033CC, radius:uint = 15):void {
      graphics.beginFill(color);
      graphics.drawCircle(0, 0, radius);
      graphics.endFill();
    }

    private function createNewCircleAndPositionIt():void {
      _circles[_circles.length] = createCircle();

      if (_circles.length > 1) {
        const last:Sprite = _circles[_circles.length - 1],
            predecessor:Sprite = _circles[_circles.length - 2];

        last.x = predecessor.x + 30;
        last.y = predecessor.y + 30;
      }
    }

    private function timer_timerHandler(event:TimerEvent):void {
      createNewCircleAndPositionIt();
    }

    private function timer_timerCompleteHandler(event:TimerEvent):void {
      _timer.removeEventListener(TimerEvent.TIMER, timer_timerHandler);
      _timer.removeEventListener(TimerEvent.TIMER_COMPLETE, timer_timerCompleteHandler);
      _timer = null;
    }
  }
} 
```

# asihttprequest - 我正在使用 ASIHTTPREquest 我在 MAC OSx xcode 3.1 中遇到了一些问题

> ID：12859810
> 
> 赞同：0
> 
> 时间：2012-10-12T13:09:37.280
> 
> 标签：asihttprequest

我正在使用 ASIHTTPRequest 类通过使用可可和 php 在服务器上上传图像，但我已经引用了 ASIHTTpRequest 所需的所有类，但我仍然遇到一些错误，我是可可的新手，所以无法理解问题请为我提供所有这些错误的想法。

-SCDYNAMICSTORECopyProxies”，参考 ASIHttpRequest.o 中的 [ASIHttpRequest configureProxies]

InflateInit2_"，引用自 ASIDATADecOmpressor.o 中的 [ASIDataDecompressor setupStream]

“-inflate”，引用自 ASIDataDecompressed.o 中的 -[ASIDataDecompressor uncompressBytes:length:error]

“-inflatedEnd”，引用自：ASIDataDecopressed.o 中的 -[ASIDataCompressor setupStream]

“-deflateInit2-”，引用自：

-[ASIDataDecompressedcompressedBytes:length:error:shouldfinish:in ASIDataCompressor.o

“-deflateEnd”，参考自

- 未找到 ASIDataCompressor.o 中的 [ASIDataCompressor closeStream] 符号

collect2: id 返回 1 退出状态

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:12:37.830

每个人我都遇到了这个问题，因为我在 Xcode 3.1 中使用它，如果你在 3.2.3 代码中使用，那么你可以解决这个问题。你需要在你的框架中包含 CoreService 和 libz.dylib 库，然后你就可以解决这个问题>已经解决了我的问题。

# jquery - 在 IE 中以 IFRAME 模式加载 PDF

> ID：12859812
> 
> 赞同：2
> 
> 时间：2012-10-12T13:09:41.820
> 
> 标签：jquery, colorbox

我只是看到当我加载 PDF 文件时，加载覆盖在 IE 中并没有消失......

```
$.extend($.colorbox.settings, {
    transition: "none",
    opacity: 0.6,
    iframe: false,
    fastIframe: false,
    returnFocus: true,
    escKey: false,      // do not close when ESC is pressed
    overlayClose: false,    // do not close when overlay is clicked
    initialWidth : 872,
    initialHeight : 465,
    innerWidth : 872,
    innerHeight : 465});

$.colorbox({
    iframe: true,
    data: null, 
    href : 'myPDFurl',
    title : 'Load PDF in IFRAME',
    onComplete : function() {
        alert('document loaded !');
    }
}); 
```

“文件已加载！” 消息也没有出现。

提前致谢，

德维扬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:37:05.437

尝试这个：

```
$(function(){
    $.colorbox({
        iframe: true,
        innerWidth:425, innerHeight:344,
        href : 'url',
        title : 'Load PDF in IFRAME',
        onComplete : function() {
            alert('document loaded !');
        }
    });
}); 
```

演示：http: [//jsfiddle.net/EcqJP/](http://jsfiddle.net/EcqJP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T08:59:41.610

对我来说是这样的：

```
 $('.cboxPDF').css('outline','none').colorbox({iframe: true,
    innerWidth:'80%', innerHeight:'80%',
    title : 'Title od PDF',
    onComplete : function() {
        console.log('document loaded !')}
    }); 
```

# zend-framework - 当文件有特殊字符时 Zend_Search_Lucene_Document_Docx 不起作用

> ID：12859816
> 
> 赞同：0
> 
> 时间：2012-10-12T13:09:57.187
> 
> 标签：zend-framework

我在 PHP 的 zend lucene 搜索中遇到问题。我已经使用该类`Zend_Search_Lucene_Document_Docx::loadDocxFile($url);`为文档创建索引。并且还设置了utf配置

```
Zend_Search_Lucene_Analysis_Analyzer::setDefault(
  new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8_CaseInsensitive()
); 
```

用于创建和搜索抛出的索引。对于普通字段，特殊字符搜索工作正常，但包含特殊字符的文档在文档中搜索时没有返回任何结果。

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:48:19.083

你的 docx 是用 UTF-8 编码的吗？这是强制性的...

# apache - url 将 `/abc/products-` 重写为 `/def/products-`

> ID：12859819
> 
> 赞同：0
> 
> 时间：2012-10-12T13:10:07.207
> 
> 标签：apache, .htaccess, url-rewriting

我在`/abc/`子目录中有很多 url 链接，比如

```
http://www.domain.com/abc/products-12345
http://www.domain.com/abc/products-23456
http://www.domain.com/abc/products-34567
http://www.domain.com/abc/new-items 
```

`url rewrite` `/abc/products-` 现在我想`/def/products-`

```
http://www.domain.com/def/products-12345
http://www.domain.com/def/products-23456
http://www.domain.com/def/products-34567
http://www.domain.com/abc/new-items 
```

我的代码在 中`.htaccess`，但没有任何改变。在这种情况下如何重写？谢谢。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^abc/products-(.*)$ /def/products-$1 [L,R=301]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:32:12.270

正如您可以在[此模拟器](http://martinmelin.se/rewrite-rule-tester/)上测试的那样，规则应该可以工作。

您面临的最可能的问题应该是：

*   全局配置不允许 .htaccess 覆盖
*   .htaccess 对 apache 用户不可读
*   您在此 apache 服务器上没有激活 mod_rewrite，因此没有触发`<IfModule>`指令。

最佳故障排除选项是尝试将所有页面重定向到静态页面。如果这不起作用，请查找配置问题。

# objective-c - 如何从各种自定义视图子视图中识别纯 UIView 子视图

> ID：12859824
> 
> 赞同：0
> 
> 时间：2012-10-12T13:10:18.030
> 
> 标签：objective-c, ios

我正在解析父视图的子视图，它有 10 个不同的 UIView 子类的各种子视图、所有自定义类。只有一个类是普通的 UIView。

现在，当我循环通过时，我需要获取 UIView 子视图，isKindOfClass 未能这样做，因为它也为所有 UIView 子类返回 1。

我是否必须编写一个大的 if-else 构造来检查它是否是任何其他自定义 UIView 子类的对象，然后在最后一个 else 中得出结论，它是一个普通的 UIView。

还是有一种方法可以告诉我视图的确切类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:02:56.877

你应该使用：

```
[currentView isMemberOfClass:[UIView class]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T13:18:54.627

[http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isMemberOfClass](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isMemberOfClass)：

# c++ - 从 GCC 4.6 更改为 4.7 时未定义的引用

> ID：12859831
> 
> 赞同：2
> 
> 时间：2012-10-12T13:10:53.533
> 
> 标签：c++, static, c++11, constants

我不得不从 g++-4.6 切换到 4.7（所以我可以使用一些 C++11 功能）。现在，编译器抱怨：

`In function WordJIT<float>::WordJIT(): undefined reference to JitRegType<float>::Val_t`

我想知道这些编译器版本之间是否发生了一些可能影响符号解析的变化。还是在新版本（4.7）中更好地实现了语言，而我正在做的事情是错误的：（相同的代码与 4.6 一起编译）

## jit.h

```
class Jit {
  public:
    enum RegType { f32=0,f64=1,u16=2,u32=3,u64=4,s16=5,s32=6,s64=7 };
  // ...
};

template <class T> struct JitRegType {};
template <> struct JitRegType<float>  { static const Jit::RegType Val_t = Jit::f32; }; 
```

## wordjit.h

```
 #include "jit.h"

  template<class T>
  class WordJIT 
  {
    WordJIT() {
      mapReg.insert( std::make_pair( JitRegType<T>::Val_t , jit.getRegs( JitRegType<T>::Val_t , 1 ) ) );
    }
    private:
      typedef std::map< Jit::RegType , int > MapRegType;
      mutable MapRegType mapReg;
  }; 
```

## 编辑：

可以在头文件中`static const`使用还是应该使用？`constexpr`

有没有办法`Val_t`在类声明中声明`JitRegType`但实际上没有定义它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:52:18.883

根据 9.4.2p3：

> 如果非易失性*const 静态*数据成员是整数或枚举类型，则其在类定义中的声明可以指定一个*大括号或相等初始化器*[...] 如果它是，则该成员仍应在命名空间范围内定义程序中使用的 odr 和命名空间范围定义不得包含*初始化程序*。

所以你需要添加到你的程序中（可能在`jit.cpp`）：

```
const Jit::RegType JitRegType<float>::Val_t; 
```

这样一来，如果在`static const`需要对其进行引用的上下文中使用该成员，则存在一个唯一的定义供链接器引用（与任何`static`不是类模板或类模板部分成员的成员相同）专业化）。

[该问题在 gcc wiki 上进行](http://gcc.gnu.org/wiki/VerboseDiagnostics#missing_static_const_definition)了深入讨论。

请注意，gcc 4.6 和 4.7 的行为都很合理；只是 gcc 4.6 选择内联`JitRegType<float>::Val_t`gcc 4.7 选择不内联的值（或者可能是内联它，但也发出对定义的链接器引用）。很难判断是否需要实施才能发出诊断；9.4.2p3 描述了一个可诊断的规则，但随后 9.4.2p4（隐含地指非`const` `static`数据成员）说不需要诊断。无论哪种方式，作为实现质量问题，编译器发出诊断总比不发出诊断要好。

# android - 安卓。锁定所有活动的屏幕方向

> ID：12859836
> 
> 赞同：16
> 
> 时间：2012-10-12T13:11:17.280
> 
> 标签：android, android-manifest, screen-orientation

> **可能重复：**
> [如何为所有活动设置固定方向](https://stackoverflow.com/questions/6582761/how-can-i-set-orientation-fixed-for-all-activities)

我想锁定我的应用程序的屏幕方向。我的意思是所有活动都必须具有相同的`landscape`方向。我不想 `android:screenOrientation="portrait"`为所有活动添加清单。还有其他方法吗？感谢和问候

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-12T13:25:30.587

您有两种选择来实现结果。

*   您可以在清单文件中指定每个活动的基本方向要求。您可以在此处选择要支持哪个活动的方向。

例如

```
<activity
    android:name=".Some_Act"
    android:label="@string/app_name"
    android:screenOrientation="portrait" >
</activity> 
```

*   您可以创建一个基础活动并在该活动中指定方向。稍后您可以在应用程序的其他活动中继承该活动。您可以选择合适的基类来获得所需的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:13:35.413

```
android:screenOrientation="landscape"
android:configChanges="keyboardHidden|orientation" 
```

在您的应用清单中为所有活动添加以上行。

# css - 如何使背景适用于整个div

> ID：12859840
> 
> 赞同：0
> 
> 时间：2012-10-12T13:11:28.810
> 
> 标签：css, html, background

> **可能重复：**
> [为什么我的内容显示在 div 之外？](https://stackoverflow.com/questions/10062255/why-is-my-content-showing-outside-the-div)

我有一个问题，即 div 的背景样式没有涵盖嵌套在 div 内的所有内容。

这是一个[jsfiddle](http://jsfiddle.net/Eq3Wx/)向您展示我在说什么

如何`ddg-corner-statements`在不设置绝对高度的情况下将 div 的灰色背景样式应用于 div 内的所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:15:33.073

这是使用浮点数时的常见问题。有几个常见的解决方案：

1.  在浮动后添加一个 div `clear: both`。[例子](http://jsfiddle.net/dX2Xh/)。

    ```
    <div style="float: left"></div>
    <div style="float: left"></div>
    <div style="clear: both"></div> 
    ```

2.  将两个浮动添加到具有 CSS 属性的容器中`overflow: auto`。[例子](http://jsfiddle.net/dX2Xh/1/)。

    ```
    <div style="overflow: auto">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

3.  使父元素浮动。[例子](http://jsfiddle.net/dX2Xh/2/)。

    ```
    <div style="float: left">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

4.  使用 :after CSS 伪元素。[例子](http://jsfiddle.net/dX2Xh/3/)。

    ```
    .parentelement:after {
        content: ".";
        display: block;
        height: 0; 
        clear: both; 
        visibility: hidden;
    } 
    ```

5.  向父元素添加设置高度。[例子](http://jsfiddle.net/dX2Xh/4/)。

    ```
    <div style="height: 200px">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

就个人而言，为了简单和语义，我使用选项 2

[在此处](http://jsfiddle.net/Eq3Wx/4/)查看您的代码的更新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:14:24.433

我猜您想将灰色背景颜色应用于所有内容：[**My Fiddle**](http://jsfiddle.net/Eq3Wx/5/)

像这样清除你的花车：

```
<div style="clear: both;"></div>
<div id="view-all-statements"><a href="ddg-statements.html">View All Statements →&lt;/a></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:15:53.097

灰色的背景似乎是一个图像。尝试垂直重复它，看看会发生什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T13:16:33.720

这将解决您的问题：

```
> .ddg-corner-statements {
>     padding: 10px 15px 1px;
>     background: url("../images/bg_story_resources_bot.gif") repeat-x scroll left bottom transparent;
>     display: inline-block; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T13:18:38.860

没有应用背景，因为您的子元素被浮动并从流程中取出。

```
.ddg-corner-sidebar ul li a {
    border-bottom: 1px solid #DDDDDD;
    border-top: 1px solid #F8F8F8;
    color: #333333;
    display: block;
    float: left;
    padding: 5px 0 9px;
    width: 100%;
} 
```

如果您删除`float:left;`背景将按预期执行。

如果`float:left`需要，您将需要清除浮动。

# mysql - Mysql 从加载文件中的另一个表中选择

> ID：12859842
> 
> 赞同：5
> 
> 时间：2012-10-12T13:11:30.903
> 
> 标签：mysql, load-data-infile

我有一个 csv 文件，我正在使用该`load local infile`命令将其加载到 mysql 数据库中。

csv 有一组从 5 个值的枚举中收集的字段，我需要根据这些进行查询。为了加快查询速度（可能多达 600 万行），我试图在参考表上进行选择以插入 id 而不是字符串值。

```
load data local infile 'test_file.csv'
    into table matching
    fields terminated by ','
    enclosed by '"'
    (... @match, ...)
    set
        ...
        match = select id from matchRefData where name = @match,
        ...; 
```

根据[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)子查询可以在设置操作的右侧使用，但似乎每次都失败：

```
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check 
the manual that corresponds to your MySQL server version for the right 
syntax to use near 'select id from matchRefData where name = @match,...' 
```

**版本信息：**

服务器版本：5.5.25 源码分发

```
+-------------------------+---------------------+
| Variable_name           | Value               |
+-------------------------+---------------------+
| innodb_version          | 1.1.8               |
| protocol_version        | 10                  |
| slave_type_conversions  |                     |
| version                 | 5.5.25              |
| version_comment         | Source distribution |
| version_compile_machine | i386                |
| version_compile_os      | osx10.7             |
+-------------------------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:36:56.577

试试这个查询 -

```
LOAD DATA LOCAL INFILE 'test_file.csv'
  INTO TABLE matching
  FIELDS TERMINATED BY ','
  ENCLOSED BY '"'
  (..., @match, ...)
  SET `match` = (SELECT id FROM matchRefData WHERE name = @match) 
```

# database - SQL 数据库项目用于部署数据库的端口号

> ID：12859846
> 
> 赞同：1
> 
> 时间：2012-10-12T13:11:38.713
> 
> 标签：database, visual-studio-2010, database-connection, database-deployment

我想知道哪个端口号在 Visual Studio 2010 中使用 dbproj（数据库项目）在远程服务器中部署数据库，或者我如何找到该信息，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:16:03.853

这取决于连接字符串。默认连接使用 1433，但您可以通过在主机名后使用逗号来指定不同的端口号。

# java - Spring MVC 和表单绑定：如何从列表中删除项目？

> ID：12859847
> 
> 赞同：11
> 
> 时间：2012-10-12T13:11:39.463
> 
> 标签：java, javascript, jquery, spring, spring-mvc

我有一个`Person`包含电子邮件*列表的模型属性。*

我创建了一些 JavaScript 代码，用于从 HTML 电子邮件列表中删除元素。这是纯 JavaScript 客户端代码，没有 AJAX 调用。

提交后，我不明白为什么我在相应的方法中得到**了所有**`@Controller`的电子邮件，甚至是那些在 HTML 中被删除的邮件。

谁能解释一下？

* * *

### JSP

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
    <link rel="stylesheet" href="<c:url value="/styles/resume.css"/>" type="text/css"></link>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"></link>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script src="/resume/js/jquery.editable-1.0.1.js"></script>
    <title>Resumes manager</title>

    <script>
    $(document).ready(function() {
        $('.trash').click(function() {
            $(this.parentNode).remove();
        });

    });

    </script>
</head>

<body>
    <h1>Personal data</h1>
    <form:form modelAttribute="person" action="/resume/person/edit/save" id="personForm" method="post" >
        <table>
            <tr>
                <td>Email addresses:</td>
                <td colspan="4">
                    <ol id="emails">
                        <c:forEach items="${person.emails}" varStatus="status">
                            <li><form:hidden path="emails[${status.index}].order" class="emailsDisplayOrder"></form:hidden><form:input path="emails[${status.index}].label"></form:input><form:input type="email" path="emails[${status.index}].value"></form:input><input type="image" src="/resume/images/trash.png" class="trash" value="${status.index}"></input></li>
                        </c:forEach>
                    </ol>
                </td>
            </tr>
        </table>
    </form:form>
</body>

</html> 
```

### 控制器

```
@Controller
@SessionAttributes(types={Person.class}, value={"person"})
public class PersonController {

    private final static String PERSON_VIEW_NAME = "person-form";

    private ResumeManager resumeManager;

    @Autowired()
    public PersonController(ResumeManager resume) {
        this.resumeManager = resume;
    }

    @InitBinder
    public void initBinder(WebDataBinder dataBinder) {
        dataBinder.setDisallowedFields("id");
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        dateFormat.setLenient(false);
        dataBinder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
    }

    @RequestMapping(value="/person/edit/save")
    public String save(@ModelAttribute(value="person") Person p, BindingResult result, SessionStatus status) {
        new PersonValidator().validate(p, result);
        Collections.sort(p.getEmails()); //this collection still contains client-side dropped objects

        this.resumeManager.savePerson(p);

        return PERSON_VIEW_NAME;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T16:44:35.177

## 解释

当您使用**加载**页面时`<form:form modelAttribute="person" ...>`，有两种情况：

*   案例1：如果`person`不存在，则创建一个空`Person`
*   案例2：如果`person`已经存在，则使用它

在所有情况下，加载页面时，都会有一个现有的`person`.
当您提交表单时，Spring MVC**仅**使用提交的信息**更新**此现有表单。`person`

 **所以在情况 1 中，如果你提交邮件 1、2、3 和 4，Spring MVC 会在空的`person`. 在这种情况下对你来说没问题。

但是在情况 2 中（例如，当您编辑现有`person`的会话时），如果您提交电子邮件 1 和 2，但人已经有 4 封电子邮件，那么 Spring MVC 将仅替换电子邮件 1 和 2。电子邮件 3 和 4 仍然存在。

* * *

## 一个可能的解决方案

可能不是最好的，但它应该工作。

在类中添加一个`remove`布尔值`Email`：

```
...
public class Email {

    ...

    private boolean remove; // Set this flag to true to indicate that 
                            // you want to remove the person.

    ...

} 
```

在`save`控制器的方法中，删除已`remove`设置为 true 的电子邮件。

最后，在您的 JSP 中，添加这个隐藏字段：

```
<form:hidden path="emails[${status.index}].remove" /> 
```

并告诉您的 Javascript 在用户单击删除电子邮件时将输入值设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:02:15.040

杰罗姆·达尔伯特一号的替代解决方案

杰罗姆的解决方案应该有效（再次感谢明确的答案和解决方案），但我不想修改商业模式。
所以这是我发现的方法：使用 java-script 标记要删除的 HTML 元素，并在表单提交时使用 ajax 调用实际删除它（我最初避免使用 ajax 来保持模型不变，直到用户提交，但这个解决方案保留了该要求）。

JSP：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
    <link rel="stylesheet" href="<c:url value="/styles/resume.css"/>" type="text/css"></link>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"></link>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script src="/resume/js/jquery.editable-1.0.1.js"></script>
    <title>Resumes manager</title>

    <script>
        $('.sortable').sortable({
            update: function(event,ui) {
                var liElements = this.getElementsByTagName('li');
                $(liElements).each(function(i, liElement) {
                    var orderElements = liElement.getElementsByClassName('order');
                    $(orderElements).each(function (j, orderElement) {
                        orderElement.value = i;
                    });
                });
            }
        });

        $('.trashable').click(function() {
            $(this.parentNode.childNodes).each(function(index, element) {
                if(element.src.match(/trash.png/) != null) {
                    element.src = '/resume/images/back.png';
                    this.parentNode.className = 'trashed';
                } else if(element.src.match(/back.png/) != null) {
                    element.src = '/resume/images/trash.png';
                    this.parentNode.className = '';
                } else {
                    element.disabled = !element.disabled;
                }
            });
        });

        function trash(element) {
            var sfx = element.alt;
            var lnk = ('/resume/person/edit/').concat(sfx);
            $.ajax({
                url: lnk
            });
        }

        $('#personForm').submit(function() {
            var trashed = $(this).find('.trashed');
            $(trashed).each(function(index, element) {
                var img = $(element).find('.trashable');
                var tmp = $(img)[0];
                trash(tmp);
            });
        });
    });

    </script>
</head>

<body>
    <h1>Personal data</h1>
    <form:form modelAttribute="person" action="/resume/person/edit/save" id="personForm" method="post" >
        <table>
            <tr>
                <td>Email addresses:</td>
                <td colspan="4">
                    <ol class="sortable">
                        <c:forEach items="${person.emails}" varStatus="status">
                            <li><form:hidden path="emails[${status.index}].order" class="order"></form:hidden><form:input path="emails[${status.index}].label"></form:input><form:input type="email" path="emails[${status.index}].value"></form:input><img src="/resume/images/trash.png" class="trashable" alt="dropEmail/${person.emails[status.index].id}"></img></li>
                        </c:forEach>
                    </ol>
                </td>
            </tr>
            <tr><td colspan="5"><form:button name="save" value="${person.id}">${person.id == 0 ? 'save' : 'update'}</form:button></td></tr>
        </table>
    </form:form>
</body>

</html> 
```

控制器：

```
@Controller
@SessionAttributes(types={Person.class}, value={"person"})
public class PersonController {

    private final static String PERSON_VIEW_NAME = "person-form";

    private ResumeManager resumeManager;

    @Autowired()
    public PersonController(ResumeManager resume) {
        this.resumeManager = resume;
    }

    @InitBinder
    public void initBinder(WebDataBinder dataBinder) {
        dataBinder.setDisallowedFields("id");
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        dateFormat.setLenient(false);
        dataBinder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
    }

    @RequestMapping(value="/person/edit/{id}")
    public String edit(@PathVariable("id") long personId, Model model) {
        Person p = this.resumeManager.getPersonById(personId);

        if(p != null) {
            model.addAttribute("person", p);

            return PERSON_VIEW_NAME;

        } else {
            return "redirect:/";
        }
    }

    @RequestMapping(value="/person/edit/save")
    public String save(@ModelAttribute(value="person") Person p, BindingResult result, SessionStatus status) {
        new PersonValidator().validate(p, result);
        Collections.sort(p.getEmails());

        this.resumeManager.savePerson(p);

        return PERSON_VIEW_NAME;
    }

    @RequestMapping(value="/person/edit/dropEmail/{id}")
    @ResponseBody
    public void dropEmail(@ModelAttribute(value="person") Person p, @PathVariable("id") long id) {
        int i = 0;
        for(Email e : p.getEmails()) {
            if(e.getId() == id) {
                p.getEmails().remove(i);
                break;
            }
            i++;
        }
    }
} 
```**

# jquery-ui - 自动完成和 jeditable-datepicker 不能在 Jeditable 中一起工作

> ID：12859851
> 
> 赞同：0
> 
> 时间：2012-10-12T13:11:51.233
> 
> 标签：jquery-ui, autocomplete, datepicker, conflict, jeditable

我正在使用 [jeditable](http://www.appelsiini.net/projects/jeditable)，我需要与[jeditable-datepicker](https://github.com/qertoip/jeditable-datepicker)和[Autocomplete集成](http://www.appelsiini.net/projects/jeditable/custom_autocomplete.html)

除了它们之间的不兼容之外，一切都很好。

我注意到问题是由脚本引起的

```
<script src="jquery-ui-1.8.24.custom.min.js"></script> 
```

这使我的 jQuery 日期选择器工作，如果我将其删除，自动完成功能将再次开始工作，但显然我的 Jquery 日期选择器停止工作。

我怎样才能弄清楚我的问题？有没有办法让他们一起工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:14:08.297

我找到了解决方案，我在这里解释一下，将来可能对某人有用。

我再次下载了自定义 jQuery，我取消了所有选项，只保留了 Datepicker 小部件，然后将新脚本粘贴到我的页面中，不兼容问题消失了！

# performance - 查找下一个“旧”文档（性能）

> ID：12859857
> 
> 赞同：0
> 
> 时间：2012-10-12T13:12:21.830
> 
> 标签：performance, mongodb, limit

我有一系列帖子（请参阅伪 json :-)）：

```
[
  {"title":"First","created":"2012-10-04 01:00:00"},
  {"title":"Second","created":"2012-10-04 03:30:00"},
  {"title":"Third","created":"2012-10-02 02:00:00"}
] 
```

我在“2012-10-04”帖子页面，我想知道是否有旧帖子，只是为了显示“下一页”按钮。

我可以考虑这样的查询：

```
db.posts.find({"created":{$lt:ISODate("2012-10-04")} }).limit(1); 
```

我仍然必须尝试它，但我认为它会起作用......实际上我的问题是：

*它的性能如何？它会以与集合中数十亿个文档相同的速度运行吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:19:14.707

假设您将根据需要对数十亿个集合进行分片，那么“已创建”的索引应该可以相对较好地扩展。无论您执行哪种查询，它们都将花费更长的时间来处理更大的数据集、索引与否。只是 b-tree walks 的性能配置文件明显优于原始表扫描。

您的查询是一个开放式范围查询，在您的情况下实际上是理想的，因为如果它找到任何早于指定日期的文档，它就可以返回。

简而言之，是的，这将充分发挥作用，并且可以通过分片进行扩展。

# c# - SignalR ConnectionData 为空，并且不会连接

> ID：12859861
> 
> 赞同：0
> 
> 时间：2012-10-12T13:12:53.830
> 
> 标签：c#, signalr

我的 MVC 应用程序中有两个 SignalR 集线器`ChatHub`，`AnotherHub`. `ChatHub`运行良好，但我无法连接到另一个。我知道 SignalR 认识到它的`AnotherHub`存在，因为我在 /signalr/hubs 中获得了以下 JavaScript：

```
signalR.chatHub = {
    _: {
        hubName: 'ChatHub',
        ignoreMembers: ['post'],
        connection: function () { return signalR.hub; }
    },

    post: function (room, message) {
        return invoke(this, "Post", $.makeArray(arguments));
    }
};

signalR.anotherHub = {
    _: {
        hubName: 'AnotherHub',
        ignoreMembers: ['doSomething'],
        connection: function () { return signalR.hub; }
    },

    doSomething: function (thing) {
        return invoke(this, "DoSomething", $.makeArray(arguments));
    }
}; 
```

在聊天页面上，Fiddler 在连接时告诉我以下内容`/signalr/signalr/connect`：

```
connectionData      [{"name":"chathub"}]
tid                 10 
```

但是，当尝试连接到 时`anotherHub`，Fiddler 说：

```
connectionData      []
tid                 3 
```

我在聊天页面上的javascript：

```
 cn = $.connection.chatHub;
        $.connection.hub.start(); 
```

在另一页上：

```
 cn = $.connection.anotherHub;
        $.connection.hub.start(); 
```

现在，一件奇怪的事情；当我在另一个页面上更改`anotherHub`为时`chatHub`，连接有效。当我在聊天页面上更改`chatHub`为时`anotherHub`，这也有效。唯一没有的组合`anotherHub`在另一页上。（我已经通过集线器构造函数上的服务器端断点确认了这一点，并检查了 Fiddler 的 ConnectionData 参数）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:53:46.573

你确定你在另一个页面上引用了所有相同的 JS 库（尤其是 /signalr/hubs）吗？

# unix - unix命令重命名一组文件并将部分名称取出

> ID：12859869
> 
> 赞同：0
> 
> 时间：2012-10-12T13:13:34.893
> 
> 标签：unix, command

我在一个目录中有一堆文件。我需要将它们全部重命名，并去掉部分名称。例子：

老的：

```
64sdfdf2_test.txt363qww6.dat.z
64cvxc65_test.txt36ntg44.dat.z
6jtyjj54_test.txt3as3463.dat.z 
```

新的：

```
64sdfdf2363qww6.dat.z
64cvxc6536ntg44.dat.z
6jtyjj543as3463.dat.z 
```

注意：“_test.txt”是我需要删除的，并且在所有文件中都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:22:20.330

```
for i in *_test.txt*
do
new_name=`echo $i|sed 's/\(.*\)_test.txt\(.*\)/\1\2/g'
mv $i $new_name
done 
```

我只测试了 sed 部分及其工作正常：

```
> echo "64sdfdf2_test.txt363qww6.dat.z" | sed 's/\(.*\)_test.txt\(.*\)/\1\2/g'
64sdfdf2363qww6.dat.z 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:17:45.050

请参阅 mmv 的手册页。就像是

```
mmv '*_test.txt*' '#1#2' 
```

应该做的伎俩。

# sql - 如何从表格中获取描述？

> ID：12859871
> 
> 赞同：0
> 
> 时间：2012-10-12T13:13:43.307
> 
> 标签：sql, sql-server, sql-server-2008, pivot, pivot-table

我在@Blue Feet 的帮助下得到了这个查询。但是下面的查询我有实例类型，除此之外我需要来自另一个表的实例类型描述。所以我需要与额外的两个表进行连接。

```
Table - RelationShips:
------------------------
Table Name                          Column Name                 Key
CSPGI50_VALID_INSTANCE_TYPE         CSPGI50_INSTANCE_TYPE_C     Primary
CSPGJ02_MSG_OBJ                     CSPGJ02_MSG_K               Primary 
CSPGI03_MANUAL_ASN                  CSPGI03_ASN_C                primary
CSPGJ03_MSG_TRANSLN                 CSPGJ03_LOCALE_C              primary   

Column Having tables:
------------------------------
CSPGI50_VALID_INSTANCE_TYPE(CSPGJ02_MSG_K,CSPGI50_INSTANCE_TYPE_C)
CSPGJ03_MSG_TRANSLN(CSPGJ02_MSG_K)
CSPGI03_MANUAL_ASN(CSPGI03_INSTANCE_TYPE_C)
CSPGJ02_MSG_OBJ(CSPGJ02_MSG_K) 
```

我有以下查询，

```
SET DATEFIRST 1  
SELECT 
    case when InstanceType is not null then InstanceType else 'Sum' End InstanceType , 
    sum([39]) AS FirstWeek, 
    sum([38]) AS SecondWeek,   
    sum([37]) AS ThirdWeek, 
    sum([36]) AS FourthWeek, 
    sum([35]) AS FifthWeek, 
    sum([34]) AS SixthWeek  
FROM 
(
    SELECT [SPGI03_INSTANCE_TYPE_C] AS InstanceType, 
        [39], [38], [37], [36], [35], [34]  
    FROM 
    ( 
        SELECT I03.[SPGI03_INSTANCE_TYPE_C],  
            DatePart(wk, I03.[SPGI03_CREATE_S]) WeekNo, 
            DATEADD(DAY, 7 -DATEPART(WEEKDAY,I03.[SPGI03_CREATE_S]),
            I03.[SPGI03_CREATE_S]) WeekEnd  
        FROM [SUPER-G].[dbo].[CSPGI03_MANUAL_ASN] I03, [SUPER-G].[dbo].[CSPGI50_VALID_INSTANCE_TYPE] I50  
        where I50.[SPGI50_INSTANCE_TYPE_C] = I03.[SPGI03_INSTANCE_TYPE_C] 
            and  I50.[SPGA04_RATING_ELEMENT_D] = 2 
            and I03.[SPGI03_EXCEPTIONED_F] = 'N'  
            and I03.[SPGI03_DISPUTED_F] != 'Y'  
            and I03.[SPGI03_CREATE_S] between '08-19-2012 12:00:00.000' AND DATEADD(day , 7, '09-30-2012 11:59:59.000' 
    )) x 
    pivot 
    ( 
        count(WeekEnd) 
        FOR weekno IN ([39], [38], [37], [36], [35], [34])  
    ) p 
) x1 
GROUP BY  InstanceType WITH ROLLUP 
```

## 我想要的是：

我想从

```
Table 2-column name([SPGJ03_MSG_TRANSLN_X]) 
```

如果您有疑问，请参考我之前的查询链接 [如何在 sql 中按每周到最后六个星期日的日期分组？](https://stackoverflow.com/questions/12743869/how-to-group-by-the-each-week-upto-last-six-week-sundays-dates-in-sql)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:43:58.857

很难说这些表是如何相关的，但看起来你想做这样的事情：

```
SET DATEFIRST 1  
SELECT 
    case when InstanceType is not null then InstanceType else 'Sum' End InstanceType , 
    sum([39]) AS FirstWeek, 
    sum([38]) AS SecondWeek,   
    sum([37]) AS ThirdWeek, 
    sum([36]) AS FourthWeek, 
    sum([35]) AS FifthWeek, 
    sum([34]) AS SixthWeek,
    max(InstanceDescription)
FROM 
(
    SELECT [SPGI03_INSTANCE_TYPE_C] AS InstanceType, 
        [39], [38], [37], [36], [35], [34], InstanceDescription
    FROM 
    ( 
        SELECT I03.[SPGI03_INSTANCE_TYPE_C],  
            DatePart(wk, I03.[SPGI03_CREATE_S]) WeekNo, 
            DATEADD(DAY, 7 -DATEPART(WEEKDAY,I03.[SPGI03_CREATE_S]),
            I03.[SPGI03_CREATE_S]) WeekEnd,
            J03.SPGJ03_MSG_TRANSLN_X InstanceDescription
        FROM [SUPER-G].[dbo].[CSPGI03_MANUAL_ASN] I03
        INNER JOIN [SUPER-G].[dbo].[CSPGI50_VALID_INSTANCE_TYPE] I50  
          ON I50.[SPGI50_INSTANCE_TYPE_C] = I03.[SPGI03_INSTANCE_TYPE_C] 
        LEFT JOIN CSPGJ02_MSG_OBJ J02
          ON I50.SPGJ02_MSG_K = J02.SPGJ02_MSG_K
        LEFT JOIN CSPGJ03_MSG_TRANSLN J03
          ON J02.SPGJ02_MSG_K = J03.SPGJ02_MSG_K
        where I50.[SPGA04_RATING_ELEMENT_D] = 2 
            and I03.[SPGI03_EXCEPTIONED_F] = 'N'  
            and I03.[SPGI03_DISPUTED_F] != 'Y'  
            and I03.[SPGI03_CREATE_S] between '08-19-2012 12:00:00.000' AND DATEADD(day , 7, '09-30-2012 11:59:59.000' 
    )) x 
    pivot 
    ( 
        count(WeekEnd) 
        FOR weekno IN ([39], [38], [37], [36], [35], [34])  
    ) p 
) x1 
GROUP BY  InstanceType WITH ROLLUP 
```

# android - 在制作Android应用程序时遇到问题

> ID：12859872
> 
> 赞同：0
> 
> 时间：2012-10-12T13:13:44.513
> 
> 标签：android

> **可能重复：**
> [慢速安卓模拟器](https://stackoverflow.com/questions/1554099/slow-android-emulator)

我的笔记本电脑配置是

> CPU：AMD 双核处理器 C-60 1 ghz 2 GB DDR3 RAM WINDOWS 7 启动器

因此创建 android 应用程序需要太多时间，并且模拟器通常会进入无响应模式。什么是修复它的最佳解决方案？

有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:15:59.313

是的，通常模拟器需要一点时间来运行。

您可以做的是直接在实际设备上运行您的应用程序，这是最好的解决方案，最后您的应用程序应该在实际设备上运行，而不是在模拟器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:21:48.463

您可以使用在 VirtualBox/VMware 上运行的[Android-x86](http://www.android-x86.org/)

# ruby - Ruby NET::FTP 无法解析正确的 IP

> ID：12859882
> 
> 赞同：1
> 
> 时间：2012-10-12T13:14:36.837
> 
> 标签：ruby, ftps, net-ftp

我正在尝试使用以下方式连接到 FTP 服务器：

```
ftp = Net::FTPFXPTLS.new
ftp.passive=true
ftp.debug_mode=true
ftp.connect('200.111.111.11',21)
ftp.login('Username','Pass')
ftp.chdir('inbound')
ftp.putbinaryfile("./#{filename}", "/#{filename}")
ftp.close() 
```

在本例中，200.111.111.11 是正确的 IP，10.1.1.1 是假 IP。

当我通过 FTP 客户端（例如 Transmit）连接时，我连接正常，一切正常，但在脚本中它指出：

```
Cmd: PASV
227: Entering Passive Mode (10,1,1,1,47,79).
Fixing bogus PASV data address from 10.1.1.1:12111 to 200.111.111.11:12111. 
```

然后当它尝试通过 ruby​​ 脚本连接时：

```
get: 425 Failed to establish connection. 
```

当它尝试执行 LIST 或 STOR 之类的任何操作时，因为 PASV 命令总是返回 10.1.1.1:12111。

那么无论如何要确保 PASV 命令使用 200.111.111.11 而不是发送回它的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:45:04.273

这似乎是 gem 的更多问题，有一个解决方案，但需要一些时间来实施。为了节省时间，我们只是将协议切换为使用完美运行的 SFTP。（切换服务器和代码）

# mysql - 如果存在则删除行

> ID：12859884
> 
> 赞同：9
> 
> 时间：2012-10-12T13:14:40.900
> 
> 标签：mysql, joomla

```
DELETE IF EXIST `#__menu`.*
FROM `#__menu` 
LEFT JOIN `#__extensions` ON `#__extensions`.`name` = 'com_view' 
WHERE `#__menu`.`component_id` = `#__xtensions`.`extension_id`
AND `#__menu`.`alias` = 'view-sites' AND `#__menu`.`path` = 'view-sites' AND `#__menu`.`title` = 'View sites'; 
```

我的sql有什么问题？我认为问题`IF EXIST`出在 ，但我不知道如何在行上使用它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T13:16:18.377

当你从表中删除行时，你不需要使用`IF EXISTS`- 你正在使用一个`WHERE`子句，所以如果它存在 - 它将被删除。

尝试将您的查询更改为：

```
DELETE
FROM `#__menu` 
LEFT JOIN `#__extensions` ON `#__extensions`.`name` = 'com_view' 
WHERE `#__menu`.`component_id` = `#__xtensions`.`extension_id`
AND `#__menu`.`alias` = 'view-sites' AND `#__menu`.`path` = 'view-sites' AND `#__menu`.`title` = 'View sites'; 
```

此外，您不需要指定 ```#__menu `.*`` (the columns) to be deleted - you'll just need`DELETE FROM...`。[在这里](http://dev.mysql.com/doc/refman/5.0/en/delete.html)查看有关语法的更多信息。

# java - JAXB：具有文本内容和属性的元素，使用 XJC 生成类

> ID：12859885
> 
> 赞同：3
> 
> 时间：2012-10-12T13:14:41.587
> 
> 标签：java, xml, xsd, jaxb, xjc

最近我遇到了一个似乎很常见的问题：如何用属性和简单的文本内容来表示一个 XML 元素，像这样：

```
<elem attr="aval">elemval</elem> 
```

使用 JAXB。

我已经找到了很多关于如何做到这一点的建议，但是这些建议中的每一个都涉及手动编辑绑定类。

我有一组模式，我使用 XJC 将这些模式转换为 Java 类。但是，它似乎产生了错误的代码，即它没有生成设置纯内容的方法，只有设置属性的方法。

是否可以修复 XJC 的这种行为？广泛的谷歌搜索对这个问题没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:49:19.237

下面是一个 XML 模式，它为您的用例定义了 XML 结构。

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/schema"
    xmlns:tns="http://www.example.org/schema" elementFormDefault="qualified">

    <element name="elem">
        <complexType>
            <simpleContent>
                <extension base="string">
                    <attribute name="attr" type="string" />
                </extension>
            </simpleContent>
        </complexType>
    </element>

</schema> 
```

从此 XML 模式生成 JAXB 模型将生成以下类：

```
package forum12859885;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.XmlValue;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "value"
})
@XmlRootElement(name = "elem")
public class Elem {

    @XmlValue
    protected String value;
    @XmlAttribute(name = "attr")
    protected String attr;

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    public String getAttr() {
        return attr;
    }

    public void setAttr(String value) {
        this.attr = value;
    }

} 
```

# php - 从多个 HTML 文件中获取锚标记

> ID：12859888
> 
> 赞同：0
> 
> 时间：2012-10-12T13:14:57.650
> 
> 标签：php, javascript

我不确定这是否可能，但我正在尝试在我的网站上的几个 HTML 文件中提取所有锚标记链接。我目前编写了一个 php 脚本，它扫描一些目录和子目录，这些目录和子目录构建了一组 HTML 文件链接。这是该代码：

```
$di = new RecursiveDirectoryIterator('Migration'); 
$migrate = array();
foreach (new RecursiveIteratorIterator($di) as $filename => $file) { 
if (eregi("\.html",$file) || eregi("\.htm",$file) ) {
$migrate[] .= $filename; 
}
} 
```

此方法成功生成了我需要的 HTML 文件链接。前任：

```
Migration/administration/billing/Billing.htm
Migration/administration/billing/_notes/Billing.htm.mno
Migration/administration/new business/_notes/New Business.htm.mno
Migration/administration/new business/New Business.htm
Migration/account/nycds/_notes/NYCDS Index.htm.mno
Migration/account/nycds/NYCDS Index.htm 
```

还有更多链接，但这给了你一个想法。下一部分是我卡住的地方。我在想我需要一个 for 循环来遍历每个数组元素，打开文件，提取链接，然后将这些链接存储在某个地方。我只是不确定我将如何进行这个过程。我试图用谷歌搜索这个问题，但我似乎从来没有得到与我想要做的匹配的结果。这是我拥有的简化的 for 循环。

```
var obj = <?php echo json_encode($migrate); ?>;
for(var i=0;i< obj.length;i++){ 
// alert(obj[i]);
} 
```

上面的代码是在javascript中的。从我正在阅读的内容来看，我似乎不应该使用 javascript，但应该继续使用 PHP。我对下一步应该做什么感到困惑。如果有人能指出我正确的方向，我将不胜感激。非常感谢您的参与。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:20:36.567

用于`DOMDocument::getElementsByTagName`检索所有`<a>`标签

[http://www.php.net/manual/en/domdocument.getelementsbytagname.php](http://www.php.net/manual/en/domdocument.getelementsbytagname.php)

例子，

```
$doc = new DOMDocument();
$doc->loadHTMLFile("filename.html");
$anchors = $doc->getElementsByTagName('a'); //retrieve all anchor tags
foreach ($anchors as $a) { //loop anchors
    echo $a->nodeValue;
} 
```

# ubuntu - 在 ubuntu 中通过快捷方式运行程序

> ID：12859889
> 
> 赞同：-1
> 
> 时间：2012-10-12T13:15:01.773
> 
> 标签：ubuntu, shortcut

我使用“/programy/trinityrnaseq_r2012-06-08/Trinity.pl”来运行我感兴趣的程序。相反，我只想在终端中输入“trinity”或最终“Trinity.pl”。

我怎样才能做到这一点？我试过编辑我的 .bashrc 没有成功。非常感谢。

编辑：谢谢，问题已解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:19:55.997

在`~/.bashrc`：

假设`Trinity.pl`是可执行的：

```
alias trinity="/programy/trinityrnaseq_r2012-06-08/Trinity.pl" 
```

如果不：

```
alias trinity="perl /programy/trinityrnaseq_r2012-06-08/Trinity.pl" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:17:44.813

如果您使用 bash 并且此更改只需要应用于您而不是系统上的其他用户或进程，那么编辑 .bashrc 应该可以工作。

```
alias trinity=/programy/trinityrnaseq_r2012-06-08/Trinity.pl 
```

如果您使用不同的 shell，则语法和文件名可能不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:20:05.157

您可以在目录中创建符号链接并将`~/bin`目录放入您的`$PATH`：

```
ln -s /programy/trinityrnaseq_r2012-06-08/Trinity.pl ~/bin/trinity 
```

在你的`.bashrc`（如果你`bin`不是 alrady in `$PATH`）：

```
PATH=$PATH:~/bin 
```

# c# - 错误 - 无法访问 IIS 元数据库

> ID：12859891
> 
> 赞同：859
> 
> 时间：2012-10-12T13:15:03.270
> 
> 标签：c#, .net, iis, iis-metabase

安装**Visual Studio 2012**并打开我的解决方案后，我收到以下形式的一系列错误：

> Web 应用程序项目 Foo 配置为使用**IIS**。
> 无法访问**IIS 元数据库**。您没有足够的权限访问您机器上的**IIS**网站。

我为我们的每个 Web 应用程序都得到了这个。

* * *

我尝试过的事情：

1.  以管理员身份运行 Visual Studio
2.  运行 aspnet_regiis.exe -ga MyUserName
3.  运行 aspnet_regiis.exe -i

这些似乎是解决此问题的常见解决方案，但我对它们没有任何成功。

> 还有什么我可以尝试做的吗？

* * *

## 回答 #1

> 赞同：1459
> 
> 时间：2013-07-04T01:58:15.400

在**Windows 8 专业版**上：

```
%systemroot%\inetsrv\config 
```

在**Windows 7 和 8.1 和 10上**

```
%systemroot%\System32\inetsrv\config 
```

`%systemroot%`（通常在哪里`C:\Windows`）

在 Windows 资源管理器中导航到上面的相应位置。您将被阻止访问，弹出窗口显示：

> “您无权访问此文件夹 - 单击继续以永久访问此文件夹”

单击此文件夹的“继续”，并在下方显示“导出”文件夹。我将快捷方式改回“以我身份运行”（域和本地管理员的成员），并且能够打开和部署解决方案。

* * *

## 回答 #2

> 赞同：254
> 
> 时间：2012-10-12T13:19:42.743

我认为您没有以管理员权限运行 Visual Studio。看那个：

[http://bloggingabout.net/blogs/rick/archive/2012/10/04/unable-to-access-the-iis-metabase.aspx](http://bloggingabout.net/blogs/rick/archive/2012/10/04/unable-to-access-the-iis-metabase.aspx)

去引用

> 解决方案很简单：使用“以管理员身份运行”启动 Visual Studio。您可以通过右键单击快捷方式并选择“以管理员身份运行”来执行此操作。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-10-12T13:39:56.403

我想我们在工作中遇到了类似的问题。对我们来说，解决方案是进入控制面板 -> 程序和功能 -> 打开或关闭 Windows 功能...在其中，我们必须选择 Internet 信息服务 -> Web 管理工具 -> IIS 6 管理兼容性 -> IIS 元数据库和 IIS 6 配置兼容性。 [![显示 IIS 元数据库选项的 Windows 功能对话框](../Images/636e1a26a39a3076e4d7783ff6253af9.png)](https://i.stack.imgur.com/pa800.png)

试试看，如果有帮助，请告诉我！

注意：我们在 Windows 7 上使用 Visual Studio 2005 和 2010 运行 IIS 7.5，并使用超级老式的 WebServices (.asmx)...

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-05-05T22:06:13.267

我通过将 IIS AppPool 身份权限授予`%systemroot%\inetsrv\config`

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2013-08-06T05:57:16.407

如果您正在处理不需要使用 IIS 的项目，则打开出现此错误的项目的解决方法是只需右键单击已卸载的项目并单击编辑，搜索：

```
<ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="">
        <WebProjectProperties>
          <UseIIS>True</UseIIS>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions>
</Project> 
```

并将 USEIIS 设置为 false

```
<UseIIS>False</UseIIS> 
```

保存更改后通过右键单击重新加载项目。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2013-10-04T06:38:54.550

我有两种不同类型的问题导致此错误，并认为我会分享...

```
1\. The directory was on an network share and due to UAC restrictions, was 
   unable to be accessed -- even when running as an admin.
2\. The directory was on a drive that didn't exist... 
```

这两者都源于 MS 的一个不幸 (imo) 选择将内容放在 Documents 或 My Document 目录中，并结合了非常糟糕的错误消息。在上述两种情况下，根本问题是[IISExpress 配置文件](https://stackoverflow.com/questions/12946476/where-is-the-iis-express-configuration-metabase-file-found)进入了我的文档，它要么不存在，要么无法访问。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2013-02-05T19:30:23.007

**感谢所有回答的人。**由于关闭了很长时间，我无法提供太多反馈，但我最终解决了我的问题。我尝试了许多其他解决方案，但它们并没有解决我的问题，但我确信当根本原因不同时它们会有所帮助。

**我的解决方案**

我通过关闭 Windows 7 中的 IIS 和 .Net Framework 功能然后重新打开它们解决了这个问题。似乎这种重新安装是解决我的问题的原因。我仍然不知道是什么导致了问题，但我团队中的至少一位其他开发人员也遇到了同样的问题。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2018-01-20T08:17:05.360

导航到文件夹：`%systemroot%\System32\inetsrv\config`显示安全对话框。单击继续，这可能会解决问题。这适用于两台独立的 Win 10/VS 2017/IIS 机器。

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2014-09-09T15:12:33.003

在 Windows 81 上，从管理员命令提示符处，使用：

```
icacls "C:\Windows\System32\inetsrv\config" /t /grant "IIS AppPool\DefaultAppPool":(R) 
```

然后回到VS，右键点击失败的项目，选择Reload。

归功于：[IIS7 权限概述 - ApplicationPoolIdentity](https://stackoverflow.com/questions/7334216/iis7-permissions-overview-applicationpoolidentity)

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2015-02-15T22:15:56.270

我遇到了这个问题 - 症状是一样的，但我遇到的问题是我将“我的文档”文件夹设置在网络共享上，并且无法访问该共享。

根本问题是位于 %USERPROFILE%\Documents 的 IIS 配置文件不可访问。一旦我更改了“我的文档”文件夹位置（我修改了 reg 值），它又开始工作了。

我知道这可能不是您可能遇到的常见情况，但我已将其发布在这里，因为它给出了相同的症状。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2016-03-16T12:06:19.377

我今天遇到了这个问题，并通过从项目文件中删除 IISUrl 解决了这个问题：

1.  右键项目
2.  单击编辑
3.  删除以下行：

    ```
     <IISUrl>http://localhost:xxxxx </IISUrl> 
    ```

4.  重新加载项目

5.  现在通过右键单击 Project > Properties > Web 并选择 Use Local IIS Web Server（取消选中 Use IIS Express）并单击 Create Virtual Directory 按钮来添加一个新的 IIS 虚拟目录。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-07-01T20:11:45.233

你可能会遇到这个问题并且和我有同样的问题。我之前“解决”了它，然后停电和计算机崩溃，不知道为什么**注册表**设置恢复，但它是我问题的**根源**。

1.  我尝试了所有以管理员身份运行
2.  所有 IIS / IIS express 重新安装。
3.  各种**“黑客”**

归结为不得不再次修复注册表。

1.  甚至无法以管理员身份打开 regedit（需要访问注册表，因为问题不在于 gpedit.msc 管理模板）

2.  桌面上的 UnHookExec.inf

只需保存 UnHookExec.inf 并通过右键单击并选择安装来安装它。安装文件不会显示任何弹出窗口或通知框。 [http://www.tweakandtrick.com/2011/04/enable-regedit-registry-editor.html](http://www.tweakandtrick.com/2011/04/enable-regedit-registry-editor.html)

3.  **HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders\Personal**指向不存在的文件共享。将其更改为本地路径为我解决了这个问题。– Pasi Savolainen 2014 年 7 月 14 日在 8:41

（从更改 `\\cs2data\home\stickelt\my documents` 为 `c:\dev` ）

现在**一切都很好**，Visual Studio 打开了包含 15 个项目的解决方案并连接到 IIS，并且不会抱怨无法访问 iis 元数据

我以前从来没有遇到过这个问题，因为目前的工作没有人遇到这个问题（很多人已经在这里很长时间了，有些人克隆了其他“工作”的机器，很多人在另一个域上等等。）

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2014-01-17T14:48:42.103

我今天刚遇到这个问题，我发现我没有以“以管理员身份运行”打开 VS。完成此操作后，我能够发布服务。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-05-20T08:07:05.770

如果您有管理员权限，请右键单击 Visual Studio 图标 > 属性，然后高级，“以管理员身份运行”检查。您可以直接以管理员身份运行 visaul studio。这样，正式而基本。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-04-17T16:56:29.410

更改此密钥对我有用：

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders\Personal

该位置不存在。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-01-22T08:09:45.733

除了@nologo 的[回答](https://stackoverflow.com/a/18072703/1412975)，我还必须使用 IIS。所以我改变了

```
<UseIIS>True</UseIIS> 
```

先说“假”。

*   打开解决方案并确保可以加载项目。
*   关闭解决方案和该 Visual Studio 实例
*   再次将值更改为“真”
*   打开解决方案。这一次，我没有收到任何错误/警告。当我的项目映射到 IIS 网站时，我也可以毫无问题地使用 Ctrl+F5 或 F5 运行。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-06-02T12:53:15.117

转到项目的根目录并找到以下文件：

**YourProjectName.csproj.user** - 在其中，确保*UseIISExpress*设置为**false**：

```
<UseIISExpress>false</UseIISExpress> 
```

如果仅此一项不起作用，请尝试以下操作，然后重试：

**YourProjectName.csproj** - 在主项目文件中，确保 *UseIIS*和*UseIISExpress*都设置为**false**：

```
<UseIIS>True</UseIIS>
<UseIISExpress>false</UseIISExpress> 
```

更改这些后，我能够再次加载项目。

**注意：**请确保您以管理员身份运行 VS，如其他答案中所述。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-08-15T08:56:58.490

您还可以尝试一件事：

*   检查您是否有待处理的 Windows 更新。
*   如果这样做，请在尝试其他任何操作之前重新启动。

我往往从不关闭我的机器，所以我有很多人在等待重启。这解决了它。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2013-02-20T11:51:10.120

我也有类似的问题。我的解决方案是对“以管理员身份运行”答案的扩展，我希望有人会觉得它有用。

我正在运行 VS2012，几乎每次我都必须右键单击，以管理员身份运行。我对此感到厌倦，所以我进入快捷方式的属性，单击高级，然后单击“以管理员身份运行”选项。**现在，每当我从该快捷方式**打开 VS2012 时，它总是以管理员身份运行。

从那个快捷方式开始很重要。我继续分支我的项目，并将分支下载到新的本地文件夹。然后，当我从快捷方式打开它时，我没有问题。但是如果我直接进入该文件夹，并在**没有快捷方式的情况下在本地运行项目，它没有**以管理员身份运行，我得到了这个错误。

一旦我像往常一样首先打开 VS2012，然后使用 File/Open/Project 它再次工作没问题。（因为我以管理员身份运行）。但是当我使用 Windows 文件管理器打开解决方案时，我没有以管理员身份运行。

其他建议似乎有些极端，但这很简单，所以我倾向于先尝试一下。

希望这会有所帮助。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2013-07-16T21:53:01.397

这似乎是“所有错误都会导致此消息”类型的错误之一。

我的是应用程序池刚刚关闭。我重新打开它，一切正常。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-04-22T15:54:10.013

我尝试了上面的一切。归功于上述所有回复。在自己尝试了所有建议之后，我只是按照对我来说有意义的顺序组合了这些建议组合。请注意，我的 Documents 文件夹位于共享驱动器上。除非你在同一条船上，否则 subst/IISExpress 的东西不适用。

*   配置 VS 以管理员身份运行
*   通过添加/删除程序、Windows 功能卸载 IIS
*   重启
*   运行 WinRAR 或类似管理员和存档的东西`C:\windows\system32\inetsrv\`
*   以管理员身份运行 cmd 并`rmdir /s c:\windows\system32\inetsrv\`完全删除上次安装的所有痕迹。将提升的 cmd 提示打开以供以后使用。
*   重新安装具有 IIS 6 Metabase 兼容性的 IIS（怀疑这是必要的）
*   保留默认 AppPool 和默认网站原样（我之前已将两者都删除）
*   冉`C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ga MYDOMAIN\scottt732`
*   冉`C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i`

此外，由于我的 Documents 文件夹位于共享驱动器上，因此我遇到了 IIS Express 问题。我不使用/不喜欢 IIS Express，但 Visual Studio 抱怨它。

*   从提升的 cmd 提示符下，运行`subst U: c:\Temp`. 从我的 U 盘创建`C:\Temp\Documents\`并复制了 IISExpress 文件夹。
*   创建`CustomUserHome`密钥`HKCU\Software\Microsoft\IISExpress`_`C:\Temp\Documents\IISExpress`
*   这让我可以让 Visual Studio 打开我的 Web 项目并编辑属性。我调整了项目以将 Web 服务器设置存储在用户文件中，并将其调整为使用自定义 URL（不确定是否有必要）
*   `subst`每次重新启动时，我可能/可能不必运行该命令。别在意。

在放弃 3 次并花费大约 6 小时后，我可以在 Visual Studio（2015 更新 2）中打开 Web 项目。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-08-08T09:54:06.833

打开 Visual Studio 命令提示符并键入以下命令并运行

```
aspnet_regiis -ga machinename\ASPNET 
```

运行上述命令后重置`IIS`并测试解决您的问题的应用程序。

如果上述命令不能解决您的问题，请尝试在以下命令中运行`visual studio command prompt:-`

```
aspnet_regiis -i 
```

或者，我们也可以从 Windows 命令提示符运行上述命令

转到开始菜单并打开运行并输入并单击`OK`

```
%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe –I 
```

之后重置 IIS 并测试解决您的问题的应用程序

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-04-24T12:36:16.910

1.  创建“devenv.exe”的快捷方式
2.  选择快捷方式的“以管理员身份运行”选项
3.  双击快捷方式并重新打开您的项目

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-03-26T19:04:33.173

我今天也遇到了同样的问题。我发现它很烦人。虽然我已经从同一个 IIS 开发了另外两个网站，但仍然无法创建新网站。奇怪，但我做到了。

*   从 IIS 中删除站点
*   创建新站点，将其命名为“new_site”
*   选择站点名称本身以外的应用程序池。所以它不会破坏默认设置。
*   如果您从同一台机器上运行它，请保持 IP“未分配”
*   给它一些未使用的端口
*   通过右键单击 VS 可执行快捷方式以“以管理员身份运行”运行 Visual Studio。
*   你完成了！

除了我所说的以外，您不需要关闭/重新安装任何东西，因为它可以工作。

让我知道是否有人像我一样遇到同样的问题并以同样的方式解决。我认为这不是问题，而是在 Visual Studio 拒绝打开的 localhost 上创建网站的错误方式。

我希望这会对新手有所帮助。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-01-19T16:03:58.723

[从这个链接](https://stackoverflow.com/questions/12859891/error-unable-to-access-the-iis-metabase/12860348#12860348)添加功能之后我遇到了同样的问题，之后我按照[这篇文章](http://www.ryadel.com/en/unable-to-access-the-iis-metabase-error-and-how-to-fix-it/)解决了这个问题。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-09-11T09:36:17.037

在 Visual Studio 2015 中：我将 .csproj 文件中的 UseIIS 更改为 false，它对我有用。

```
<UseIIS>False</UseIIS> 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-03-17T21:59:48.573

我修复了 Visual Studio 2015 来解决这个问题。修复花了很长时间，但它解决了问题，而上面的大部分内容都没有。我正在运行 Win 7 企业版。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2014-02-25T19:09:04.643

我有一个类似的问题。Visual Studio 不会加载任何 Web 项目并显示错误：创建虚拟目录 <myproj:myport> 失败。无法访问 IIS 元数据库。

就我而言，问题的根源实际上是 IISExpress。在控制面板的程序和功能中右键单击 IIS Express，然后选择修复，不到两分钟就解决了这个问题。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-08-04T16:25:20.887

我正在使用 Win 8 Pro 和 VS 2013。在尝试了此页面中的所有内容之后......我只是重新安装了 IIS Express 8，现在一切正常（即使没有以管理员身份运行）。

我的结论是，这是一个相当普遍的错误，并且有多个根本原因。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2013-12-04T20:58:20.307

在我的消息中，除了抱怨“无法访问 IIS 元数据库”之外，它还提到了 can't access `"<IISUrl>http://localhost:6416/</IISUrl>"`。右键单击卸载项目，单击编辑，找到该行`"<IISUrl>http://localhost:6416/</IISUrl>"`，将其注释掉。重新加载，它应该工作。这与管理员无权访问该地址有关。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2014-08-16T08:56:43.860

您可以通过取消选中 Windows 功能列表中的 IIS 工具来解决此问题。然后，修复您的 Visual Studio 2013 安装并确保选中 Web Developer。它将安装 IIS 8，VS 可以很好地工作。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2015-05-07T07:19:59.517

我有同样的问题。对我来说，我使用的文档与以前的 Windows 安装相同。只需从我的文档中删除 IISExpress 文件夹就可以了。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2016-03-03T10:08:22.953

我在 Windows 10 Professional 64 位机器上体验过这个，这里发布的其他答案都没有帮助。它在我经历蓝屏死机后开始发生，我发现 UAC 已重新启动。单独以管理员身份运行 Visual Studio 不是解决方案，因为我的源代码控制位于网络驱动器上，Visual Studio 无法通过 UAC 访问。

通过 GPEDIT 关闭 UAC 解决了这个问题。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2018-01-31T12:22:31.910

运行命令：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -ga %username%
c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2018-01-16T08:27:53.907

就我而言，唯一对我有帮助的是重新安装（或更容易修复）IIS 10.0 Express

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2018-07-03T09:58:57.723

**IIS Express 用户 - 在网络共享上使用我的文档**

如果您的 IIS Express`application.config`位于网络驱动器上，请确保该驱动器已映射并连接到“我的电脑”中。

我遇到了这个问题，当我在我的电脑中重新映射网络驱动器时，问题得到了解决。

* * *

## 回答 #37

> 赞同：-1
> 
> 时间：2015-03-09T06:18:56.713

创建一个新网站，出错后转到您创建项目的文件夹，在 txt 应用程序中打开 .csproj 文件，找到此标签“ `<UseIIS>`”并将“false”更改为“true”，在下面的行中找到标签“ `<IISUrl>`”然后把iis url（在iis中查找url），你的标签必须是这样的：

```
<WebProjectProperties>
      <UseIIS>True</UseIIS>
      <AutoAssignPort>True</AutoAssignPort>
      <DevelopmentServerPort>0</DevelopmentServerPort>
      <DevelopmentServerVPath>/</DevelopmentServerVPath>
      <IISUrl>http://localhost/yourIISAppAlias
      </IISUrl>
      <NTLMAuthentication>False</NTLMAuthentication>
      <UseCustomServer>False</UseCustomServer>
      <CustomServerUrl>
      </CustomServerUrl>
      <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile>
    </WebProjectProperties> 
```

# ruby-on-rails - 什么 ruby 构造允许执行 user.articles.create (...) 其中“articles”返回一个数组并在关联对象上调用 create ？

> ID：12859893
> 
> 赞同：1
> 
> 时间：2012-10-12T13:15:08.093
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我在铁轨上看到上述内容，对我来说并不自然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:39:47.890

“Active Record 中的关联代理是持有关联的对象（称为@owner）和实际关联的对象（称为@target）之间的中间人。” `user.articles`实际上不是一个数组，它是 CollectionProxy 的一个实例。

请参阅[CollectionProxy](http://apidock.com/rails/ActiveRecord/Associations/CollectionProxy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:28:53.820

`articles`不是一个`Array`，它是一个`ActiveRecord::Relation`。

这解释了其余的:)

# directx - 使用 DirectX 进行桌面捕获不起作用

> ID：12859894
> 
> 赞同：5
> 
> 时间：2012-10-12T13:15:12.600
> 
> 标签：directx, screenshot, desktop, capture

因为D3DPOOL_SCRATCH处理比较慢，所以自己写了桌面抓包程序，供网上的报告参考。然而，结果是一幅漆黑的画面。这是控制台程序的结果还是有其他原因？

```
#include <stdio.h>
#include <Windows.h>
#include <d3d9.h>

void main()
{
    CoInitialize(NULL);

    LPDIRECT3D9 d3d9;
    LPDIRECT3DDEVICE9 d3ddev;
    d3d9 = Direct3DCreate9(D3D_SDK_VERSION);

    int ww = GetSystemMetrics(SM_CXSCREEN);
    int wh = GetSystemMetrics(SM_CYSCREEN);

    HWND hwnd = GetDesktopWindow();
    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory(&d3dpp, sizeof(d3dpp));
    d3dpp.Windowed = TRUE;
    d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
    d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;
    d3dpp.BackBufferCount = 1;
    d3dpp.BackBufferWidth = ww;
    d3dpp.BackBufferHeight = wh;
    d3dpp.MultiSampleType = D3DMULTISAMPLE_NONE;
    d3dpp.MultiSampleQuality = 0;
    d3dpp.EnableAutoDepthStencil = TRUE;
    d3dpp.AutoDepthStencilFormat = D3DFMT_D16;
    d3dpp.hDeviceWindow = hwnd;
    d3dpp.Flags = D3DPRESENTFLAG_LOCKABLE_BACKBUFFER;
    d3dpp.FullScreen_RefreshRateInHz = D3DPRESENT_RATE_DEFAULT;
    d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_DEFAULT;

    d3d9->CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hwnd, D3DCREATE_HARDWARE_VERTEXPROCESSING, &d3dpp, &d3ddev);

    IDirect3DSurface9* render;
    IDirect3DSurface9* dest;
    d3ddev->CreateOffscreenPlainSurface(ww, wh, D3DFMT_A8R8G8B8, D3DPOOL_SYSTEMMEM, &dest, NULL);
    d3ddev->GetRenderTarget(0, &render);
    d3ddev->GetRenderTargetData(render, dest);

    D3DLOCKED_RECT bits;
    dest->LockRect(&bits, NULL, D3DLOCK_READONLY);

    // If a capture is successful, colors other than black(0x00000000) should enter. 
    for(int i = 0; i < 100; i++){
        printf("%02X ", *((BYTE*)bits.pBits + i));
    }

    dest->UnlockRect();

    render->Release();
    dest->Release();
    d3ddev->Release();
    d3d9->Release();

    CoUninitialize();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:14:28.730

这与应用类型无关，如果要获取桌面图像的数据，应该使用以下函数

[获取前端缓冲区数据](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174388%28v=vs.85%29.aspx)

所以而不是打电话

```
d3ddev->GetRenderTarget(0, &render);
d3ddev->GetRenderTargetData(render, dest); 
```

你应该打电话

```
d3ddev->GetFrontBufferData(0, dest); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-06T07:41:04.450

如果您在 Windows 8 之前的 Windows 版本上运行，则 GetFrontBufferData API 可以正常工作，如另一个答案所示。但是，从 Windows 8 开始，有一个新的[桌面复制 API](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404487%28v=vs.85%29.aspx)可用于捕获视频内存中的桌面，包括鼠标光标的变化以及屏幕的哪些部分实际发生了变化或移动。这比 D3D9 方法的性能要高得多，并且非常适合将桌面编码为视频流之类的事情，因为您永远不必从 GPU 内存中提取纹理。新 API 可通过枚举 DXGI 输出并在您要捕获的屏幕上调用[DuplicateOutput来获得。](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404600%28v=vs.85%29.aspx)然后就可以进入一个循环，等待屏幕更新，依次获取每一帧。

如果您想将帧编码为视频，我建议您查看[Media Foundation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197%28v=vs.85%29.aspx)而不是 DirectShow，因为 Media Foundation 具有更好的性能并且可以使用 D3D11 而不是 D3D9 进行编码。它也更容易使用，具体取决于您的场景。查看 Media Foundation 的[Sink Writer](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819461%28v=vs.85%29.aspx)，了解最简单的视频帧编码方法。

为了全面披露，我在微软拥有桌面复制 API 的团队工作，我个人也使用这种技术编写了将桌面（以及视频、游戏等）捕获到 60fps 视频文件的应用程序。和许多其他场景一样。

# mysql - 按值计算多行的数学和

> ID：12859895
> 
> 赞同：4
> 
> 时间：2012-10-12T13:15:17.420
> 
> 标签：mysql, sql, sum

我有一张桌子

```
user_name     id      status          calls
===========================================
apple        21       cars              67
apple        21       bikes             85
apple        21       skates            6
apple        21       pajs              56
orange       34       bikes             9
orange       34       disks             3
orange       34       cars              21
orange       34       pajs              76 
```

我想把所有的电话加起来`status's`，只有汽车、自行车和溜冰鞋，而且是每个用户名。我已经尝试过，`SUM`但经过几个小时的深夜，认真的尝试对我来说很清楚，这将需要更多。谁能指出我正确的方向？

[我的桌子](http://sqlfiddle.com/#!2/0dc39)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:17:14.477

```
select user_name, status, sum(calls) as calls
from table
where status in ('cars', 'bikes', 'skates')
group by user_name, status 
```

# c# - jQuery ImageMapster：突出问题

> ID：12859896
> 
> 赞同：2
> 
> 时间：2012-10-12T13:15:25.523
> 
> 标签：c#, jquery, asp.net, imagemap, imagemapster

我在让 ImageMapster 突出显示我的地图区域时遇到了一些问题。在阅读文档时，我的印象是只需使用**$('img').mapster();** 鼠标悬停时，我应该能够看到我的地图区域突出显示。

我没有看到这种情况发生。我可以选择这些区域，但它们不会鼠标悬停。

但是，如果我将 onMouseOver 和 onMouseOut 属性放在地图区域上，那么我可以使高亮功能起作用。

这是我问题的症结所在。当我尝试将 ImageMapster 与一些动态 C# 代码集成时，我无法在地图区域上放置 onMouseOver 和 onMouseOut 属性。C# 对象**WebControls.CircleHotSpot**似乎不支持自定义属性。

所以我的问题有两个：

1.  如何使地图区域突出显示仅与 ImageMapster 代码一起使用？
2.  有没有办法向 C# 对象 WebControls.CircleHotSpot 添加属性？

这是我当前使用的 javascript 和 HTML 标记。

JavaScript：

```
$(document).ready(
    function()
    {
        $('#Image1').mapster({
            fillOpacity: 0.5,
            mapKey: 'alt',
            staticState:true,
            render_highlight: 
            {
                fillColor: '2aff00',
            },
            render_select: 
            {
                fillColor: 'ff000c',
            }
        });

        $('#Image2').mapster({
            mapKey: 'alt',

            stroke: true,
            strokeOpacity: 1.0,
            strokeColor: '000000',
            strokeWidth: 2,

            fill: true,
            fillColor: '0000ff',
            fillOpacity: 0.25,

            render_select: 
            {
                fillOpacity: 0.75,
                fillColor: 'ff0000'
            },
            render_highlight: 
            {
                fillOpacity: 0.5,
                fillColor: '00ff00'
            }
        })
    }
); 
```

标记：

```
<img id="Image1" src="bicycleparts.png" usemap="#ImageMap1" />

<map name="ImageMap1" id="ImageMap1">
    <area shape="circle" coords="100,50,50" href="" title="1" alt="1" onMouseOver="$('#Image1').mapster('highlight','1')" onMouseOut="$('#Image1').mapster('highlight',false)" />
    <area shape="circle" coords="200,100,50" href="" title="2" alt="2" onMouseOver="$('#Image1').mapster('highlight','2')" onMouseOut="$('#Image1').mapster('highlight',false)" />
    <area shape="circle" coords="300,150,50" href="" title="3" alt="3" onMouseOver="$('#Image1').mapster('highlight','3')" onMouseOut="$('#Image1').mapster('highlight',false)" />
    <area shape="circle" coords="400,200,50" href="" title="4" alt="4" onMouseOver="$('#Image1').mapster('highlight','4')" onMouseOut="$('#Image1').mapster('highlight',false)" />
    <area shape="circle" coords="500,250,50" href="" title="5" alt="5" onMouseOver="$('#Image1').mapster('highlight','5')" onMouseOut="$('#Image1').mapster('highlight',false)" />
</map>

<img id="Image2" src="bicycleparts.png" usemap="#ImageMap2" />

<map name="ImageMap2" id="ImageMap2">
    <area shape="circle" coords="100,50,50" href="" title="1" alt="1"/>
    <area shape="circle" coords="200,100,50" href="" title="2" alt="2"/>
    <area shape="circle" coords="300,150,50" href="" title="3" alt="3"/>
    <area shape="circle" coords="400,200,50" href="" title="4" alt="4"/>
    <area shape="circle" coords="500,250,50" href="" title="5" alt="5"/>
</map> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T14:32:21.120

解决方案是确保 href 不为空。如果在我的情况下我设置**href="#"**那么 ImageMapster 可以正常工作 - 突出显示没有鼠标悬停/鼠标悬停功能**标签。**

 **现在对于 C#，我可以设置**CircleHotSpot.NavigateURL = "#"**以编程方式解决我的解决方案。

感谢@joshingaround 的解决方案。**

# mysql - InnoDB 中的行锁定需要快速解释

> ID：12859901
> 
> 赞同：0
> 
> 时间：2012-10-12T13:15:44.373
> 
> 标签：mysql, jdbc, locking, rowlocking

我有一个带有 2 个客户端的客户端-服务器应用程序：

当超过 1 个客户端正在读取数据库时，我需要提高数据库的读取效率，而所有客户端都不会获得相同的行。我对表使用 InnoDB 引擎，我做类似的查询`SELECT...FOR UPDATE`，但我不使用`SHARED MODE`

我需要解释该过程在以下情况下的行为方式：

1.  我在表中有 30 行。每个客户端都有一个到数据库的连接对象
2.  客户端 A 获得 15 行`SELECT ...FOR UPDATE`。这些行应该被锁定。
3.  客户端 B 必须分别获取其他 15 行未被客户端 A 锁定的行`SELECT ..FOR UPDATE`。

当我测试这个场景时，我让客户端 B 也获得了客户端 A 的 15 行。为什么会这样？我设置`setAutoCommit(false)`并且从不做`COMMIT`或`ROLLBACK`查询，因此连接永远不会提交，并且（例如客户端 A 所做的）已设置的锁永远不会被释放。

有人可以指出我正确的方向吗？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:21:19.880

我很困惑，您是否要锁定 15 行？如果你是，你错过了：

```
START TRANSACTION 
```

以下是交易文档的链接：

[http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)

# java - 为什么下面的代码会编译？

> ID：12859910
> 
> 赞同：1
> 
> 时间：2012-10-12T13:16:16.640
> 
> 标签：java, android

我想知道为什么这个代码片段编译并运行

```
private BusRoute readRouteCursor( final Cursor c )
{
    final BusRoute result;
    final int count;
    if ( c == null || ( count = c.getCount() ) < 1 )
    {
        result = null;
    }
    else
    {
        /*
         * Reads cursor
         */
    }
    return result;
} 
```

我让它工作得很好，但是当我停下来思考它时，我想知道为什么，因为变量`count`是，但如果满足子句`final`的第一个条件，它可能不会被设置。`if`

它是否有效，因为编译器足够聪明，可以看到从那时`count`起没有任何用途，并且根本不需要初始化它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:19:14.107

你已经自己回答了这个问题！由于`count`除了条件初始化之外没有对变量的引用，因此不会报告编译错误。仅当您尝试在方法主体中进一步引用该变量时，才会出现该错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:21:15.330

答案很简单。最终变量不需要在声明步骤中初始化。它也被称为“空白决赛”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:23:41.377

`count`实际上，只有当变量是对象或类的字段时，这才会失败。

为什么 ？因为默认情况下为字段分配了默认值。因此，您的声明：

`count = c.getCount()`

实际上会失败，因为它将代表第二次分配......

但是，对于局部变量，在进行声明时不会分配默认值。

因此，您的代码是完全有效的，因为您的`count`变量的值永远不会超过一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:20:12.000

这是一个完全有效的场景，因为您是`count`第一次初始化变量。试着写：

```
final int count = 0; 
```

你会得到一个编译错误

# javascript - Flot Graphs：双轴折线图，单轴叠加

> ID：12859916
> 
> 赞同：5
> 
> 时间：2012-10-12T13:16:27.893
> 
> 标签：javascript, html, charts, flot

我希望有人可以告诉我，我想要做的事情是否可以使用 FLOT Javascript 库。我试图展示一个带有双轴和三个数据集的图表（下图）。一个数据集在左轴上，两个数据集在右轴上。我真正想做的是将两个数据集堆叠在右轴上，因为它们应该累积显示。到目前为止，我一直无法让这个图表响应堆栈：真正的设置。

如果有人能帮我解决这个问题，我将不胜感激。我的代码和当前图表的快照。我正在尝试堆叠对应于右轴（y2）的蓝色和绿色区域。

![我正在尝试堆叠对应于右轴（y2）的蓝色和绿色区域](../Images/844b894d22462b0daf373864b05ac2de.png)

```
$(function () {
var previousPoint;

var completes = [[1346954400000, 5], [1346997600000, 5], [1347040800000, 7], [1347084000000, 9], [1347127200000, 12], [1347170400000, 15], [1347213600000, 16], [1347256800000, 20], [1347300000000, 20], [1347343200000, 20], [1347386400000, 25]];
var holds = [[1346954400000, 2], [1346997600000, 2], [1347040800000, 6], [1347084000000, 12], [1347127200000, 12], [1347170400000, 15], [1347213600000, 24], [1347256800000, 24], [1347300000000, 24], [1347343200000, 24], [1347386400000, 25]];
var screeners = [[1346954400000, 10298], [1346997600000, 7624], [1347040800000, 5499], [1347084000000, 2100], [1347127200000, 8075], [1347170400000, 4298], [1347213600000, 1134], [1347256800000, 507], [1347300000000, 0], [1347343200000, 800], [1347386400000, 120]];

var ds = new Array();

ds.push({
    data:completes,
    label: "Complete",
    yaxis: 2,
    lines: {
        show: true, 
        fill: true, 
        order: 2,
    }
});
ds.push({
    data:screeners,
    label: "Pre-Screened",
    yaxis: 1,
    lines: {
        show: true, 
        fill: true, 
        order: 1,
    }
});
ds.push({
    data:holds,
    label: "Holds",
    yaxis: 2,
    lines: {
        show: true, 
        fill: true, 
        order: 3,
    }
});

//tooltip function
function showTooltip(x, y, contents, areAbsoluteXY) {
    var rootElt = 'body';

    $('<div id="tooltip2" class="tooltip">' + contents + '</div>').css( {
        position: 'absolute',
        display: 'none',
        top: y - 35,
        left: x - 5,
        border: '1px solid #000',
        padding: '1px 5px',
        'z-index': '9999',
        'background-color': '#202020',
        'color': '#fff',
        'font-size': '11px',
        opacity: 0.8
    }).prependTo(rootElt).show();
}

//Display graph
$.plot($("#placeholder1"), ds, {
    grid:{
        hoverable:true
    },
    xaxes: [ { mode: 'time', twelveHourClock: true, timeformat: "%m/%d %H:%M" } ],
    yaxes: [ {  min: 0,
                tickFormatter: function numberWithCommas(x) 
                {
                    return x.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g, ",");
                },
             } 
            ],
    y2axis: [ ],
    legend: { show: true }
}); 
```

});

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:30:16.713

这非常简单。堆叠插件没有很好的文档记录，但是在[源代码](https://github.com/flot/flot/blob/master/jquery.flot.stack.js)中，您可以看到有两种方法可以指定您想要打开堆叠。

> 当两个或多个系列的“stack”属性设置为相同的键（可以是任何数字或字符串或只是“true”）时，它们会被堆叠。要指定默认堆栈，您可以设置
> 
> 系列：{堆栈：null或true或键（数字/字符串）}
> 
> 或为特定系列指定它
> 
> $.plot($("#placeholder"), [{ data: [ ... ], stack: true }])

在这种情况下，我们希望在要堆叠的两个系列对象中指定它，如下所示：

```
ds.push({
    data:completes,
    label: "Complete",
    yaxis: 2,
    stack: true,  //added
    lines: {
        show: true, 
        fill: true, 
        order: 2,
    }
});
ds.push({
    data:screeners,
    label: "Pre-Screened",
    yaxis: 1,
    lines: {
        show: true, 
        fill: true, 
        order: 1,
    }
});
ds.push({
    data:holds,
    label: "Holds",
    yaxis: 2,
    stack: true,  //added
    lines: {
        show: true, 
        fill: true, 
        order: 3,
    }
}); 
```

添加这两个`stack:true`位并将堆栈插件包含到您的 javascript 源中，这样就可以了。在此处查看实际操作：http: [//jsfiddle.net/ryleyb/zNXBd/](http://jsfiddle.net/ryleyb/zNXBd/)

# asp.net - KnockoutJS 代码块中的动态 ID

> ID：12859917
> 
> 赞同：7
> 
> 时间：2012-10-12T13:16:33.057
> 
> 标签：asp.net, sharepoint, knockout.js

我已经对这个主题进行了一些研究，但我找不到任何真正有用的东西。

**我的问题**：

> 我有一个项目列表（在 SharePoint 中），我正在使用 KnockoutJS foreach 语句来显示一个包含所有项目的表格。像这样：
> 
> 数量 | 价格 | Total_Price | 单选按钮1 | 单选按钮2
> 
> 如您所见，有 2 个单选按钮，并且必须为它们使用 id 属性（因为我也在使用 JqueryUI - *label for='id of element'* - ）

我试过这样的东西>

代码示例：

......

> <% int i=1; %>
> < ! - - ko foreach: 项目 --> ........
> 
> ```
>  <input type="radio" id="Yes+<%=i %>"/>
>      <label for="Yes+<%=i %>" >Yes</label>
>      <input type="radio" id="No+<%=i %>" />
>      <label for="No+<%=i %>">No</label>
> 
>      </td> 
> ```
> 
> <%i++; %>
> 
> > < !-- /ko -->

问题是 asp 代码无法识别 ko foreach 迭代。

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T13:23:05.693

您可以在 Item viewmodel 上放置一个 Id 然后使用它吗？

```
< ! - - ko foreach: Items --> ........

 <input type="radio" data-bind="attr: { id: 'Yes' + Id }" />
 <label data-bind="attr: { 'for': 'Yes' + Id }" >Yes</label>
 <input type="radio" data-bind="attr: { id: 'No' + Id } />
 <label data-bind="attr: { 'for': 'No' + Id }">No</label>

 </td>
< !-- /ko --> 
```

或使用 Macropus 建议的可观察索引：

```
< ! - - ko foreach: Items --> ........

 <input type="radio" data-bind="attr: { id: 'Yes' + $index() }" />
 <label data-bind="attr: { 'for': 'Yes' + $index() }" >Yes</label>
 <input type="radio" data-bind="attr: { id: 'No' + $index() } />
 <label data-bind="attr: { 'for': 'No' + $index() }">No</label>

 </td>
< !-- /ko --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:21:19.563

看到您只是将其用于标签，您可以在这篇文章中使用淘汰赛 uniqueid 绑定：

[淘汰赛中的 UniqueID 绑定](https://stackoverflow.com/questions/7259999/uniqueid-binding-in-knockout)

还有一个uniquename绑定

# bash - 如何在我的脚本轮换时获取日志？

> ID：12859921
> 
> 赞同：2
> 
> 时间：2012-10-12T13:16:57.793
> 
> 标签：bash, shell, tomcat, ubuntu, log-rotation

我有一个脚本，我从 tomcat 获取日志并将其发送到我的云资源中。一切正常，但是当我的 tomcat 旋转日志时出现问题。

当日志轮换时，其前缀为日期（日志每天轮换）。由于我的脚本每半小时运行一次，因此在轮换时我可能会错过日志，因为我在示例中使用静态名称获取日志`logfile.log`。

在旋转之前，文件将如下所示：

```
logfile.log 
```

旋转后，它看起来像这样：

```
logfile.log.2012-10-09 
```

有没有办法摆脱这个问题？

## 编辑：

我的脚本：

```
cp /tomcat/logs/$logname $fileName 
gzip $fileName
s3cmd put $fileName.gz s3://x.x.x.x.x/$folderName 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:41:25.983

我认为备份日志的最佳方法是根据日志文件的 mtime 进行检查。

您可以将上次备份的日志文件 mtime 保存在某处，然后检查轮换日志文件和当前日志文件。如果有一个比上次存储的 mtime 更新的旋转日志文件，您可以将当前日志文件附加到旋转的日志文件，然后备份。如果只有当前日志文件较新，则只需备份它。

文件的 mtime 可以通过以下方式检索：`LC_ALL=C stat logfile.log | grep '^Modify' | cut -d: -f2-`或 unix 时间戳通过`date "+%s" --date="$(LC_ALL=C stat logfile.log | grep '^Modify' | cut -d: -f2-)"`

# visual-studio-2012 - 撤消待处理的更改 Visual Studio 2012 和 TFS

> ID：12859923
> 
> 赞同：4
> 
> 时间：2012-10-12T13:17:00.280
> 
> 标签：visual-studio-2012

我最近从 Visual Studio 2010 切换到 Visual Studio 2012，似乎 Visual Studio 版本 11.0.50727.1 RTMREL 中的“撤消挂起的更改”可能被破坏。我正在使用 TFS 2010。当我尝试撤消更改时，我收到错误“在选择或选择的任何子项中没有要撤消的更改”并且我无法恢复到我的原始代码。

有没有其他人观察到这个问题或知道解决方法？

具体步骤如下：

1.  将新文件添加到您的项目中。`TextFile1.txt`例如，但它可以是任何类型的文件。
2.  将文件签入到 TFS
3.  签出该文件并添加一行额外的代码。
4.  保存并通过比较验证 TFS 是否知道差异。
5.  在解决方案资源管理器中选择文件并右键单击并选择 Source Control / Undo Pending Changes...

您将看到消息“警告。选择或选择的任何子项中没有要撤消的更改。” 好的/帮助。按 OK 不会将文件恢复到之前的状态。（帮助没有帮助）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T14:16:35.540

我有这个问题。我通过备份我的文件来修复它。然后通过执行获取最新，撤消签出，然后签出并将我的更改放回原处。

# c++ - 在 boost for_each 中运行成员函数向量

> ID：12859924
> 
> 赞同：3
> 
> 时间：2012-10-12T13:17:00.403
> 
> 标签：c++, boost, stl, lambda, bind

我尝试学习 boost lambda 表达式，但这是行不通的。

如何在 for_each 中运行 Holder 的选定成员？

```
#include <iostream>
#include <string>

#include <boost/assign.hpp> 
#include <boost/lambda/lambda.hpp>
#include <boost/lambda/bind.hpp>

using namespace std;
using namespace boost::assign;
using namespace boost::lambda;

class Holder
{
public:
    void vRun1(std::string s){ cout << "vRun1 " << s << endl; }
    void vRun2(std::string s){ cout << "vRun2 " << s << endl; }
    void vRun3(std::string s){ cout << "vRun3 " << s << endl; }
};

// --------------------
std::map< std::string, mem_fun_ref_t<void, Holder> > replacer;

insert(replacer)
        ("buh", std::mem_fun_ref(&Holder::vRun1))
        ("mar", std::mem_fun_ref(&Holder::vRun2))
        ("heu", std::mem_fun_ref(&Holder::vRun3));

Holder hol; 
```

我如何在这里调用我在 中注册的函数`map<>`？

```
for_each(replacer.begin(), replacer.end(), /* bind(_1, hol, it.first) */ ); 
```

结果应该是

```
vRun1 buh
vRun2 mar
vRun3 heu 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:28:58.897

看起来好像您稍微复杂化了它。我会这样使用`boost::function<>`：

**[在http://liveworkspace.org/code/b2c5a38d8c3499eefb6330a839a89d0a](http://liveworkspace.org/code/b2c5a38d8c3499eefb6330a839a89d0a)**上现场观看

```
#define BOOST_RESULT_OF_USE_DECLTYPE
#include <iostream>
#include <string>
#include <map>
#include <boost/function.hpp>
#include <boost/foreach.hpp>
#include <boost/phoenix.hpp>
using namespace std;

class Holder {
public:
    void vRun1(std::string s){ cout << "vRun1 " << s << endl; }
    void vRun2(std::string s){ cout << "vRun2 " << s << endl; }
    void vRun3(std::string s){ cout << "vRun3 " << s << endl; }
};

typedef std::map< std::string, boost::function<void(Holder&, std::string)> > Replacer;

int main()
{
    Replacer replacer;
    replacer["a"] = &Holder::vRun1;
    replacer["b"] = &Holder::vRun2;
    replacer["c"] = &Holder::vRun3;

    Holder hol;

    for (Replacer::const_iterator it=replacer.begin(); it != replacer.end(); ++it)
    {
        (it->second)(hol, it->first);
    } 
```

或者：

```
 std::cout << "Using BOOST_FOREACH:\n";

    BOOST_FOREACH(Replacer::value_type& pair, replacer)
    {
        (pair.second)(hol, pair.first);
    } 
```

甚至：

```
 std::cout << "Using Boost Phoenix:\n";

    namespace phx = boost::phoenix;
    using namespace phx::arg_names;

    std::for_each(replacer.begin(), replacer.end(),
            phx::bind(
                phx::bind(&Replacer::value_type::second, arg1), 
                phx::ref(hol), 
                phx::bind(&Replacer::value_type::first, arg1)));
} 
```

输出

```
vRun1 a
vRun2 b
vRun3 c
Using BOOST_FOREACH:
vRun1 a
vRun2 b
vRun3 c
Using Boost Phoenix:
vRun1 a
vRun2 b
vRun3 c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:58:15.723

这对我有用：

```
#include <iostream>
#include <string>

#include <boost/assign.hpp>
#include <boost/lambda/lambda.hpp>
#include <boost/lambda/bind.hpp>
#include <boost/function.hpp>

using namespace boost::lambda;

class Holder
{
public:
    void vRun1(std::string s){ std::cout << "vRun1 " << s << std::endl; }
    void vRun2(std::string s){ std::cout << "vRun2 " << s << std::endl; }
    void vRun3(std::string s){ std::cout << "vRun3 " << s << std::endl; }
};

// --------------------
typedef std::map <std::string, 
                  boost::function<void(Holder&, std::string)> > Replacer_t;
Replacer_t replacer;
typedef Replacer_t::value_type ReplacerValue_t;

int main()
{
    boost::assign::insert(replacer)
        (std::string("buh"), &Holder::vRun1)
        (std::string("mar"), &Holder::vRun2)
        (std::string("heu"), &Holder::vRun3);

    Holder hol;

    for_each(replacer.begin(),
             replacer.end(),
             bind(protect(bind(bind(&ReplacerValue_t::second,_2),
                               _1,
                               bind(&ReplacerValue_t::first,_2))),
                  boost::ref(hol), _1));
} 
```

与 boost::lambda 进行了大约 2 小时的战斗。在 C++11 中，我会在 30 秒内编写它，因此请相应地更新您的编译器。

# visual-c++ - 带有 SSE 的 Memmove

> ID：12859925
> 
> 赞同：0
> 
> 时间：2012-10-12T13:17:03.757
> 
> 标签：visual-c++, sse, simd, memmove

我必须在源和目标可以重叠的地方移动多达 8KB 的数据。我可能每秒调用这个代码几百万次。运行我的代码的机器将至少具有 SSE3。Visual Studio 2012 中的 memmove 是否已经使用这些说明，或者我可以从自定义实现中受益吗？有没有可用的替代实现？我主要针对 x64 机器。

# php - 在 10 个数字的未排序整数数组中搜索第一个重复值的最快方法？

> ID：12859936
> 
> 赞同：1
> 
> 时间：2012-10-12T13:17:59.880
> 
> 标签：php, search

在 10 个数字的未排序整数数组中搜索第一个重复值的最快方法是什么？

如果数组有 1000 万条记录，答案应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:36:37.213

我能想到的唯一方法是使用 2 数组，因为你想要`first repetitive value in an unsorted integer`

千万 ？？？不确定内存含义

[PHP 文档注释](http://php.net/manual/en/class.splfixedarray.php)

> splFixedArray 的内存占用大约是相同大小的常规“数组”的 37%。我希望有更多，但这也很重要，这就是您应该期望看到差异的地方，而不是“性能

[PHP 数组（和值）到底有多大？（提示：大！）](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)

例子

```
$array =  SplFixedArray::fromArray(array(1,2,4,6,4,2,7,7,3,3,1));
$list = array();
foreach ($array as $value ) {
    if (in_array($value, $list)) {
        echo $value;
        break;
    }
    $list[] = $value;
} 
```

输出

```
 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:23:40.040

如果你想要最小的重复数，那么

*   在 O(n) 时间内使用基数排序对数组进行排序

*   遍历排序后的数组并找到第一个重复

如果你想要第一个重复的数字以数组已经在的任何顺序

*   循环遍历数组，将数字添加到哈希集中，直到达到一个无法添加到哈希集中的数字，因为它已经存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:28:29.453

这是基准代码。它太大了，无法评论，所以我把它作为单独的答案。

```
<?php
$array = range(0, 10000);

$time_start = microtime(true);
$list = array();
foreach ( $array as $value ) {
    if (in_array($value, $list)) {
        echo $value;
        break;
    }
    $list[] = $value;
}
printf("Using foreach loop:<br/>%0.10f<br/><br/>", microtime(true)-$time_start);

$time_start = microtime(true);
$list = array();
foreach ( new ArrayIterator($array) as $value ) {
    if (in_array($value, $list)) {
        echo $value;
        break;
    }
    $list[] = $value;
}
printf("Using ArrayIterator:<br/>%0.10f<br/><br/>", microtime(true)-$time_start); 
```

`foreach`循环比`ArrayIterator`.

我尝试了 10000 个元素。元素是使用[range](http://www.php.net/manual/en/function.range.php)函数生成的，这确保了我有“最差”的输入数组，其中所有元素都是不同的。

100 万条记录的数组生成在我的机器上花费了太长时间。

# php - 为什么我不应该在 PHP 中使用 mysql_* 函数？

> ID：12859942
> 
> 赞同：2645
> 
> 时间：2012-10-12T13:18:39.307
> 
> 标签：php, mysql

`mysql_*`为什么不应该使用函数的技术原因是什么？（例如`mysql_query()`，`mysql_connect()`或`mysql_real_escape_string()`）？

即使它们在我的网站上工作，我为什么还要使用其他东西？

如果他们在我的网站上不起作用，为什么我会收到类似的错误

> 警告：mysql_connect()：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：2187
> 
> 时间：2012-10-12T13:23:43.763

MySQL 扩展：

*   未在积极开发中
*   自 PHP 5.5 （2013 年 6 月发布）起**正式[弃用。](https://wiki.php.net/rfc/mysql_deprecation)**
*   自 PHP 7.0（2015 年 12 月发布）起 已**完全****[删除](https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7#extmysql)**
    *   这意味着[截至 2018 年 12 月 31 日](https://www.php.net/eol.php)，它不存在于任何受支持的 PHP 版本中。如果您使用的是支持它的 PHP 版本，那么您使用的是没有修复安全问题的版本。
*   缺少 OO 接口
*   不支持：
    *   非阻塞、异步查询
    *   **[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)或参数化查询**
    *   存储过程
    *   多个语句
    *   交易
    *   “新”密码验证方法（在 MySQL 5.6 中默认启用；在 5.7 中需要）
    *   MySQL 5.1 或更高版本中的任何新功能

由于它已被弃用，因此使用它会使您的代码不那么面向未来。

缺乏对准备好的语句的支持尤其重要，因为它们提供了一种更清晰、更不容易出错的方法来转义和引用外部数据，而不是使用单独的函数调用手动转义它。

请参阅[**SQL 扩展的比较**](http://php.net/manual/en/mysqlinfo.api.choosing.php)。

* * *

## 回答 #2

> 赞同：1340
> 
> 时间：2013-01-01T11:52:50.563

PHP 提供了三种不同的 API 来连接 MySQL。这些是[`mysql`](http://in1.php.net/manual/en/book.mysql.php)（从 PHP 7 中删除）[`mysqli`](http://uk.php.net/manual/en/book.mysqli.php)、 和[`PDO`](http://php.net/manual/en/book.pdo.php)扩展。

这些`mysql_*`功能曾经非常流行，但不再鼓励使用它们。文档团队正在讨论数据库安全情况，教育用户远离常用的 ext/mysql 扩展是其中的一部分（查看*[php.internals: deprecating ext/mysql](http://news.php.net/php.internals/53799)*）。

而后来的 PHP 开发团队已经决定[**`E_DEPRECATED`**](https://github.com/php/php-src/commit/b7091aaf0137d97cf4aa4a402ec50b3946d369c0)在用户​​连接 MySQL 时产生错误，无论`mysql_connect()`是`mysql_pconnect()`通过`ext/mysql`.

**`ext/mysql`**自 PHP 5.5起[**正式弃用，**](https://wiki.php.net/rfc/mysql_deprecation)自 PHP 7起已被[**删除**](https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7)。

**看到红盒子了吗？**

当您进入任何`mysql_*`功能手册页时，您会看到一个红色框，说明不应再使用它。

## 为什么

* * *

远离`ext/mysql`不仅关乎安全性，还关乎能够访问 MySQL 数据库的所有功能。

`ext/mysql`是为**MySQL 3.23**构建的，从那时起只添加了很少的内容，同时主要保持与这个旧版本的兼容性，这使得代码更难维护。包括不支持的缺失功能`ext/mysql`：（*[来自 PHP 手册](https://wiki.php.net/rfc/mysql_deprecation)*）。

*   [存储过程](http://en.wikipedia.org/wiki/Stored_procedure)（不能处理多个结果集）
*   [准备好的报表](http://en.wikipedia.org/wiki/Prepared_statement)
*   加密 (SSL)
*   压缩
*   完整的字符集支持

**不使用`mysql_*`功能**的原因：

*   未在积极开发中
*   自 PHP 7 起删除
*   缺少 OO 接口
*   不支持非阻塞、异步查询
*   不支持准备好的语句或[参数化查询](http://en.wikipedia.org/wiki/Prepared_statement)
*   不支持存储过程
*   不支持多个语句
*   不支持[交易](http://en.wikipedia.org/wiki/Database_transaction)
*   不支持 MySQL 5.1 中的所有功能

[以上观点引用自昆汀的回答](https://stackoverflow.com/a/12860046/1723893)

缺乏对准备好的语句的支持尤其重要，因为它们提供了一种更清晰、更不容易出错的方法来转义和引用外部数据，而不是使用单独的函数调用手动转义它。

请参阅[SQL 扩展的比较](http://php.net/manual/en/mysqlinfo.api.choosing.php)。

* * *

**抑制弃用警告**

在将代码转换为`MySQLi`/`PDO`时，`E_DEPRECATED`可以通过`error_reporting`在**php.ini**中设置 exclude`E_DEPRECATED:`

```
error_reporting = E_ALL ^ E_DEPRECATED 
```

请注意，这也会隐藏**其他弃用警告**，但是，这些警告可能适用于 MySQL 以外的东西。（*[来自 PHP 手册](https://wiki.php.net/rfc/mysql_deprecation#workarounds)*）

文章*[PDO 与 MySQLi：您应该使用哪个？](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)*[**Dejan Marjanovic**](http://webarto.com/)将帮助您选择。

一个更好的方法是`PDO`，我现在正在写一个简单的`PDO`教程。

* * *

## 一个简单而简短的 PDO 教程

* * *

### 问：我想到的第一个问题是：什么是`PDO`？

A. “<strong>PDO – PHP 数据对象 – 是一个数据库访问层，提供了访问多个数据库的统一方法。”</p>

> ![替代文字](../Images/bc72aba471084803ec4d7fc08abbda74.png)

* * *

### 连接到 MySQL

使用`mysql_*`函数或者我们可以说它是旧的方式（在 PHP 5.5 及更高版本中已弃用）

```
$link = mysql_connect('localhost', 'user', 'pass');
mysql_select_db('testdb', $link);
mysql_set_charset('UTF-8', $link); 
```

With `PDO`：您需要做的就是创建一个新`PDO`对象。构造函数接受用于指定数据库源`PDO`的参数 构造函数主要接受四个参数，它们是`DSN`（数据源名称）和可选`username`的，`password`。

在这里，我认为您对所有内容都很熟悉，除了`DSN`; 这是新的`PDO`。A`DSN`基本上是一串选项，用于告诉`PDO`要使用哪个驱动程序以及连接详细信息。如需进一步参考，请查看[PDO MySQL DSN](http://www.php.net/manual/en/ref.pdo-mysql.connection.php)。

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=utf8', 'username', 'password'); 
```

**注意：**你也可以使用`charset=UTF-8`，但有时会导致错误，所以最好使用`utf8`。

如果有任何连接错误，它会抛出一个`PDOException`可以被捕获以`Exception`进一步处理的对象。

**好读**：[连接和连接管理¶](http://php.net/manual/en/pdo.connections.php)

您还可以将多个驱动程序选项作为数组传递给第四个参数。我建议传递`PDO`进入异常模式的参数。因为某些`PDO`驱动程序不支持本机prepared statements，所以`PDO`执行prepare 的模拟。它还允许您手动启用此仿真。要使用本机服务器端准备好的语句，您应该显式设置它`false`。

另一种是关闭`MySQL`驱动中默认开启的prepare emulation，但是prepare emulation应该关闭才能`PDO`安全使用。

稍后我将解释为什么应该关闭准备模拟。要查找原因，请查看[此帖子](https://stackoverflow.com/a/12202218/1723893)。

仅当您使用`MySQL`我不推荐的旧版本时才可用。

下面是一个如何做到这一点的例子：

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 
              'username', 
              'password',
              array(PDO::ATTR_EMULATE_PREPARES => false,
              PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)); 
```

**我们可以在 PDO 构建后设置属性吗？**

**是**的，我们也可以在 PDO 构建后设置一些属性，`setAttribute`方法如下：

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 
              'username', 
              'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

## 错误处理

* * *

错误处理`PDO`比`mysql_*`.

使用时的常见做法`mysql_*`是：

```
//Connected to MySQL
$result = mysql_query("SELECT * FROM table", $link) or die(mysql_error($link)); 
```

`OR die()`不是处理错误的好方法，因为我们无法处理`die`. 它只会突然结束脚本，然后将错误回显到您通常不想向最终用户显示的屏幕上，并让该死的黑客发现您的架构。或者，`mysql_*`函数的返回值通常可以与[mysql_error()](http://php.net/mysql_error)一起使用来处理错误。

`PDO`提供了一个更好的解决方案：异常。我们所做的任何事情都`PDO`应该包装在一个`try`-`catch`块中。我们可以`PDO`通过设置错误模式属性来强制进入三种错误模式之一。以下是三种错误处理模式。

*   `PDO::ERRMODE_SILENT`. `mysql_*`它只是设置错误代码，其行为与您必须检查每个结果然后查看`$db->errorInfo();`以获取错误详细信息的位置几乎相同。
*   `PDO::ERRMODE_WARNING`提高`E_WARNING`。（运行时警告（非致命错误）。脚本的执行不会停止。）
*   `PDO::ERRMODE_EXCEPTION`: 抛出异常。它表示 PDO 引发的错误。`PDOException`你不应该从你自己的代码中抛出一个。*有关 PHP 中的异常*的更多信息，请参阅异常。`or die(mysql_error());`当它未被捕获时，它的行为非常类似于。但与 不同的是，如果您选择这样做`or die()`，则可以优雅地捕获和处理。`PDOException`

**好读**：

*   [错误和错误处理 ¶](http://php.net/manual/en/pdo.error-handling.php)
*   [PDOException 类¶](http://php.net/manual/en/class.pdoexception.php)
*   [例外¶](http://www.php.net/manual/en/language.exceptions.php)

像：

```
$stmt->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT );
$stmt->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );
$stmt->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

您可以将其包装在`try`-`catch`中，如下所示：

```
try {
    //Connect as appropriate as above
    $db->query('hi'); //Invalid query!
} 
catch (PDOException $ex) {
    echo "An Error occured!"; //User friendly message/message you want to show to user
    some_logging_function($ex->getMessage());
} 
```

您现在不必处理`try`- `catch`。您可以在任何适当的时候捕捉到它，但我强烈建议您使用`try`- `catch`。`PDO`此外，在调用这些东西的函数之外捕获它可能更有意义：

```
function data_fun($db) {
    $stmt = $db->query("SELECT * FROM table");
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
}

//Then later
try {
    data_fun($db);
}
catch(PDOException $ex) {
    //Here you can handle error and show message/perform action you want.
} 
```

此外，您可以处理 by`or die()`或者我们可以说 like `mysql_*`，但它会非常多样化。您可以通过`display_errors off`阅读错误日志来隐藏生产中的危险错误消息。

现在，在阅读了以上所有内容之后，您可能在想：当我只想开始学习简单`SELECT`的 , `INSERT`, `UPDATE`, 或`DELETE`语句时，这到底是什么鬼？别着急，我们来：

* * *

## 选择数据

![PDO 选择图像](../Images/b0a539d035172b1ae4871bb86ef3cfcd.png)

所以你正在做的`mysql_*`是：

```
<?php
$result = mysql_query('SELECT * from table') or die(mysql_error());

$num_rows = mysql_num_rows($result);

while($row = mysql_fetch_assoc($result)) {
    echo $row['field1'];
} 
```

现在`PDO`，您可以这样做：

```
<?php
$stmt = $db->query('SELECT * FROM table');

while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    echo $row['field1'];
} 
```

或者

```
<?php
$stmt = $db->query('SELECT * FROM table');
$results = $stmt->fetchAll(PDO::FETCH_ASSOC);

//Use $results 
```

**注意**：如果您使用如下 ( `query()`) 的方法，此方法将返回一个`PDOStatement`对象。因此，如果您想获取结果，请像上面一样使用它。

```
<?php
foreach($db->query('SELECT * FROM table') as $row) {
    echo $row['field1'];
} 
```

在 PDO Data 中，它是通过`->fetch()`语句句柄的 , 方法获得的。在调用 fetch 之前，最好的方法是告诉 PDO 您希望如何获取数据。在下面的部分中，我将对此进行解释。

## 获取模式

注意上面和代码`PDO::FETCH_ASSOC`中的使用。这告诉以字段名称作为键的关联数组返回行。还有许多其他的获取模式，我将一一解释。`fetch()``fetchAll()``PDO`

首先，我解释一下如何选择获取模式：

```
 $stmt->fetch(PDO::FETCH_ASSOC) 
```

在上面，我一直在使用`fetch()`. 您还可以使用：

*   [`PDOStatement::fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php)- 返回一个包含所有结果集行的数组
*   [`PDOStatement::fetchColumn()`](http://php.net/manual/en/pdostatement.fetchcolumn.php)- 从结果集的下一行返回单列
*   [`PDOStatement::fetchObject()`](http://php.net/manual/en/pdostatement.fetchobject.php)- 获取下一行并将其作为对象返回。
*   [`PDOStatement::setFetchMode()`](http://php.net/manual/en/pdostatement.setfetchmode.php)- 设置此语句的默认获取模式

现在我来获取模式：

*   `PDO::FETCH_ASSOC`: 返回一个按列名索引的数组，与结果集中返回的一样
*   `PDO::FETCH_BOTH`（默认）：返回一个由列名和 0 索引列号索引的数组，如结果集中返回的那样

还有更多选择！[`PDOStatement`在Fetch 文档](http://www.php.net/manual/en/pdostatement.fetch.php)中阅读所有内容。.

**获取行数**：

您可以获取 a和 do ，而不是使用`mysql_num_rows`来获取返回的行数，例如：`PDOStatement``rowCount()`

```
<?php
$stmt = $db->query('SELECT * FROM table');
$row_count = $stmt->rowCount();
echo $row_count.' rows selected'; 
```

**获取最后插入的 ID**

```
<?php
$result = $db->exec("INSERT INTO table(firstname, lastname) VAULES('John', 'Doe')");
$insertId = $db->lastInsertId(); 
```

* * *

## 插入和更新或删除语句

![插入和更新 PDO 映像](../Images/2ce31dba9a68e74ef2decd079c2c5213.png)

我们在`mysql_*`函数中所做的是：

```
<?php
$results = mysql_query("UPDATE table SET field='value'") or die(mysql_error());
echo mysql_affected_rows($result); 
```

在 pdo 中，同样的事情可以通过以下方式完成：

```
<?php
$affected_rows = $db->exec("UPDATE table SET field='value'");
echo $affected_rows; 
```

在上面的查询中[`PDO::exec`](http://php.net/manual/en/pdo.exec.php)执行一条 SQL 语句并返回受影响的行数。

[*插入和删除将在后面介绍。*]

上述方法仅在您未在查询中使用变量时有用。但是当您需要在查询中使用变量时，永远不要像上面那样尝试 [**准备好的语句或参数化的语句**](http://en.wikipedia.org/wiki/Prepared_statement)。

* * *

## **准备好的报表**

**问**：什么是准备好的陈述，我为什么需要它们？
**A.**预编译语句是预编译的 SQL 语句，只需将数据发送到服务器即可多次执行。

使用prepared statement的典型工作流程如下（[引自维基百科三三点](http://en.wikipedia.org/wiki/Prepared_statement)）：

1.  **准备**：报表模板由应用程序创建并发送到数据库管理系统 (DBMS)。某些值未指定，称为参数、占位符或绑定变量（`?`如下所示）：

    `INSERT INTO PRODUCT (name, price) VALUES (?, ?)`

2.  DBMS 对语句模板进行解析、编译和查询优化，并存储结果而不执行它。

3.  **执行**：稍后，应用程序为参数提供（或绑定）值，DBMS 执行语句（可能返回结果）。应用程序可以使用不同的值多次执行该语句。`1.00`在此示例中，它可能为第一个参数和第二个参数提供“面包” 。

您可以通过在 SQL 中包含占位符来使用准备好的语句。基本上有三个没有占位符（不要尝试使用上面的变量），一个带有未命名的占位符，一个带有命名的占位符。

**问**：那么现在，什么是命名占位符以及如何使用它们？
**A.**命名占位符。使用以冒号开头的描述性名称，而不是问号。我们不关心名称占位符中的位置/价值顺序：

```
 $stmt->bindParam(':bla', $bla); 
```

[`bindParam(parameter,variable,data_type,length,driver_options)`](http://php.net/manual/en/pdostatement.bindparam.php)

您也可以使用执行数组进行绑定：

```
<?php
$stmt = $db->prepare("SELECT * FROM table WHERE id=:id AND name=:name");
$stmt->execute(array(':name' => $name, ':id' => $id));
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

对于朋友来说，另一个不错的功能`OOP`是命名占位符能够将对象直接插入到您的数据库中，假设属性与命名字段匹配。例如：

```
class person {
    public $name;
    public $add;
    function __construct($a,$b) {
        $this->name = $a;
        $this->add = $b;
    }

}
$demo = new person('john','29 bla district');
$stmt = $db->prepare("INSERT INTO table (name, add) value (:name, :add)");
$stmt->execute((array)$demo); 
```

**问**：那么现在，什么是未命名的占位符，我该如何使用它们？
**A.**举个例子：

```
<?php
$stmt = $db->prepare("INSERT INTO folks (name, add) values (?, ?)");
$stmt->bindValue(1, $name, PDO::PARAM_STR);
$stmt->bindValue(2, $add, PDO::PARAM_STR);
$stmt->execute(); 
```

和

```
$stmt = $db->prepare("INSERT INTO folks (name, add) values (?, ?)");
$stmt->execute(array('john', '29 bla district')); 
```

在上面，您可以看到那些`?`而不是名称占位符中的名称。现在在第一个示例中，我们将变量分配给各种占位符 ( `$stmt->bindValue(1, $name, PDO::PARAM_STR);`)。然后，我们为这些占位符赋值并执行语句。在第二个示例中，第一个数组元素转到第一个`?`，第二个转到第二个`?`。

**注意**：在**未命名的占位符**中，我们必须注意传递给`PDOStatement::execute()`方法的数组中元素的正确顺序。

* * *

## `SELECT`, `INSERT`, `UPDATE`,`DELETE`准备好的查询

1.  **`SELECT`**：

    ```
    $stmt = $db->prepare("SELECT * FROM table WHERE id=:id AND name=:name");
    $stmt->execute(array(':name' => $name, ':id' => $id));
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
    ```

2.  **`INSERT`**：

    ```
    $stmt = $db->prepare("INSERT INTO table(field1,field2) VALUES(:field1,:field2)");
    $stmt->execute(array(':field1' => $field1, ':field2' => $field2));
    $affected_rows = $stmt->rowCount(); 
    ```

3.  **`DELETE`**：

    ```
    $stmt = $db->prepare("DELETE FROM table WHERE id=:id");
    $stmt->bindValue(':id', $id, PDO::PARAM_STR);
    $stmt->execute();
    $affected_rows = $stmt->rowCount(); 
    ```

4.  **`UPDATE`**：

    ```
    $stmt = $db->prepare("UPDATE table SET name=? WHERE id=?");
    $stmt->execute(array($name, $id));
    $affected_rows = $stmt->rowCount(); 
    ```

* * *

## **笔记：**

然而`PDO`和/或`MySQLi`并不完全安全。检查答案*[PDO 准备好的语句是否足以防止 SQL 注入？](https://stackoverflow.com/a/12202218/1723893)*通过[ircmaxell](https://stackoverflow.com/users/338665/ircmaxell)。另外，我从他的回答中引用了一部分：

```
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$pdo->query('SET NAMES GBK');
$stmt = $pdo->prepare("SELECT * FROM test WHERE name = ? LIMIT 1");
$stmt->execute(array(chr(0xbf) . chr(0x27) . " OR 1=1 /*")); 
```

* * *

## 回答 #3

> 赞同：311
> 
> 时间：2012-10-12T13:28:41.553

首先，让我们从我们给大家的标准评论开始：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](http://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

让我们逐句解释一下：

*   **它们不再维护，并已正式弃用**

    这意味着 PHP 社区正在逐渐放弃对这些非常古老的功能的支持。它们很可能不会出现在 PHP 的未来（最近）版本中！继续使用这些功能可能会在（不是那么）遥远的将来破坏您的代码。

    **新的！*[-自 PHP 5.5 起，](https://wiki.php.net/rfc/mysql_deprecation)* ext/mysql 现已正式弃用！**

    ## 更新！ext/mysql*[已在 PHP 7 中删除](https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7)*。

*   **相反，您应该了解准备好的语句**

    `mysql_*`扩展不支持**准备好的语句**，这是（除其他外）对**SQL 注入**非常有效的对策。它修复了 MySQL 相关应用程序中的一个非常严重的漏洞，该漏洞允许攻击者访问您的脚本并对您的数据库执行**任何可能的查询**。

    有关更多信息，请参阅**[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)**

*   **看到红盒子了吗？**

    当您转到任何`mysql`功能手册页时，您会看到一个红色框，说明不应再使用它。

*   **使用 PDO 或 MySQLi**

    有更好、更健壮和构建良好的替代方案，**[PDO - PHP 数据库对象](http://php.net/pdo)**，它为数据库交互提供了完整的 OOP 方法，以及**[MySQLi](http://php.net/mysqli)**，它是 MySQL 的特定改进。

* * *

## 回答 #4

> 赞同：227
> 
> 时间：2013-12-24T23:30:38.677

## 便于使用

分析原因和综合原因已经提到。对于新手来说，停止使用过时的 mysql_ 函数有更大的动力。

**现代数据库 API*更易于*使用。**

它主要是可以简化代码的*绑定参数。*借助[优秀的教程（如上所示）](https://stackoverflow.com/a/14110189)，向[PDO](http://php.net/PDO)的过渡并不过分艰巨。

然而，一次重写更大的代码库需要时间。这种中间选择的存在理由：

### 等效的 pdo_* 函数代替~~mysql_*~~

使用[< **pdo_mysql.php** >您可以毫不](http://fossil.include-once.org/upgradephp/artifact/43ab742241e5a3be43d31764dd333ba68e245360)*费力地*从旧的 mysql_ 函数切换。它添加了`pdo_`替换其`mysql_`对应物的函数包装器。

1.  只需在必须与数据库交互的每个调用脚本中。 `include_once(`[`"pdo_mysql.php"`](http://fossil.include-once.org/upgradephp/artifact/43ab742241e5a3be43d31764dd333ba68e245360)`);`

2.  删除*各处*~~`mysql_`~~的函数前缀并将其替换为.***`pdo_`***

     **   ~~`mysql_`~~`connect()`变成**`pdo_`**`connect()`
    *   ~~`mysql_`~~`query()`变成**`pdo_`**`query()`
    *   ~~`mysql_`~~`num_rows()`变成**`pdo_`**`num_rows()`
    *   ~~`mysql_`~~`insert_id()`变成**`pdo_`**`insert_id()`
    *   ~~`mysql_`~~`fetch_array()`变成**`pdo_`**`fetch_array()`
    *   ~~`mysql_`~~`fetch_assoc()`变成**`pdo_`**`fetch_assoc()`
    *   ~~`mysql_`~~`real_escape_string()`变成**`pdo_`**`real_escape_string()`
    *   *等等...** 
**   您的代码将同样工作，并且大部分看起来仍然相同：

    ```
    include_once("pdo_mysql.php"); 

    pdo_connect("localhost", "usrABC", "pw1234567");
    pdo_select_db("test");

    $result = pdo_query("SELECT title, html FROM pages");  

    while ($row = pdo_fetch_assoc($result)) {
        print "$row[title] - $row[html]";
    } 
    ```* 

 *等等瞧。
您的代码正在*使用*PDO。
现在是时候实际*使用*它了。

### 绑定参数可以很容易使用

![](../Images/41407abbd8a60fa8d6e62dcbd2c60200.png)

您只需要一个不那么笨重的 API。

`pdo_query()`为绑定参数添加了非常简单的支持。转换旧代码很简单：

![](../Images/7f62e92aaa965f78562d2b9311a0e13c.png)

将变量移出 SQL 字符串。

*   将它们作为逗号分隔的函数参数添加到`pdo_query()`.
*   `?`在变量之前的位置放置问号作为占位符。
*   摆脱`'`以前包含字符串值/变量的单引号。

对于更长的代码，优势变得更加明显。

通常，字符串变量不仅被插入到 SQL 中，而且还与中间的转义调用连接起来。

```
pdo_query("SELECT id, links, html, title, user, date FROM articles
   WHERE title='" . pdo_real_escape_string($title) . "' OR id='".
   pdo_real_escape_string($title) . "' AND user <> '" .
   pdo_real_escape_string($root) . "' ORDER BY date") 
```

应用`?`占位符后，您不必为此烦恼：

```
pdo_query("SELECT id, links, html, title, user, date FROM articles
   WHERE title=? OR id=? AND user<>? ORDER BY date", $title, $id, $root) 
```

请记住 pdo_* 仍然允许*or*。
只是不要转义变量*并将*其绑定在同一个查询中。

*   占位符功能由其背后的真实 PDO 提供。
*   因此，以后也允许`:named`占位符列表。

更重要的是，您可以在任何查询后面安全地传递 $_REQUEST[] 变量。当提交`<form>`的字段与数据库结构完全匹配时，它会更短：

```
pdo_query("INSERT INTO pages VALUES (?,?,?,?,?)", $_POST); 
```

如此简单。但是，让我们回到一些关于为什么你可能想要摆脱~~`mysql_`~~和逃避的重写建议和技术原因。

### 修复或删除任何老派[`sanitize()`](https://stackoverflow.com/questions/3126072/what-are-the-best-php-input-sanitizing-functions)功能

将所有~~`mysql_`~~调用转换为`pdo_query`绑定参数后，删除所有冗余`pdo_real_escape_string`调用。

特别是，您应该以一种或另一种形式修复过时的教程所宣传的任何`sanitize`或`clean`或`filterThis`或功能：`clean_data`

```
function sanitize($str) {
   return trim(strip_tags(htmlentities(pdo_real_escape_string($str))));
} 
```

这里最明显的错误是缺乏文档。更重要的是，过滤顺序完全错误。

*   正确的顺序应该是：不推荐使用`stripslashes`作为最内层调用，然后`trim`是`strip_tags`作为`htmlentities`输出上下文的 ，最后是`_escape_string`作为其应用程序应该直接在 SQL 交叉解析之前的调用。

*   但第一步只是**摆脱`_real_escape_string`**电话。

*   `sanitize()`如果您的数据库和应用程序流需要 HTML-context-safe 字符串，您现在可能必须保留其余的函数。添加一条注释，说明它今后仅适用 HTML 转义。

*   字符串/值处理委托给 PDO 及其参数化语句。

*   如果`stripslashes()`在您的 sanitize 功能中提到任何内容，则可能表示更高级别的监督。

    *   这通常是为了消除已弃用的[`magic_quotes`](http://php.net/magic_quotes). 然而，[最好集中固定](https://stackoverflow.com/questions/517008/how-to-turn-off-magic-quotes-on-shared-hosting)，而不是一串一串。

    *   使用一种[用户态反转](http://php.net/security.magicquotes.disabling)方法。然后删除函数`stripslashes()`中的`sanitize`。

    > **关于magic_quotes 的历史记录。**该功能已被正确弃用。然而，它经常被错误地描述为失败的*安全*功能。但是，magic_quotes 是一个失败的安全功能，就像网球作为营养来源失败一样。这根本不是他们的目的。
    > 
    > PHP2/FI 中的原始实现仅使用“*引号将被自动转义，从而更容易将表单数据直接传递给 msql 查询*”显式地引入它。值得注意的是，它意外地与[mSQL](http://www.hughes.com.au/products/msql/)一起使用是安全的，因为它仅支持 ASCII。
    > 然后 PHP3/Zend 为 MySQL 重新引入了 magic_quotes 并错误地记录了它。但最初它只是一个[便利功能](https://stackoverflow.com/questions/16098194/why-magic-quotes-has-been-removed-from-php-5-4)，而不是为了安全。

### 准备好的语句有何不同

当您将字符串变量打乱到 SQL 查询中时，它不仅会变得更加复杂，而且您需要遵循。MySQL 再次分离代码和数据也是多余的工作。

![](../Images/ccb5aba1bd7ca1fe24bd1b5e0834e124.png)

SQL 注入只是当*数据渗入代码*上下文时。数据库服务器以后无法发现 PHP 最初将变量粘合在查询子句之间的位置。

使用绑定参数，您可以在 PHP 代码中分隔 SQL 代码和 SQL 上下文值。但它不会在幕后再次被洗牌（PDO::EMULATE_PREPARES 除外）。您的数据库接收不变的 SQL 命令和 1:1 变量值。

![](../Images/3c50a16c607de2f8339047b384ded2fa.png)

虽然这个答案强调您应该关心 drop 的可读性优势~~`mysql_`~~。由于这种可见的技术数据/代码分离，有时还具有性能优势（重复的 INSERT 具有不同的值）。

*请注意，参数绑定仍然不是针对所有*SQL 注入的神奇的一站式解决方案。它处理数据/值的最常见用途。但不能将列名/表标识符列入白名单，帮助动态子句构造，或者只是简单的数组值列表。

### 混合 PDO 使用

这些`pdo_*`包装函数构成了一个编码友好的权宜之计 API。（如果不是因为特殊的函数签名转变，这几乎是`MYSQLI`可能的）。他们也经常暴露真实的 PDO。
重写不必停留在使用新的 pdo_ 函数名。您可以将每个 pdo_query() 一个一个转换为普通的 $pdo->prepare()->execute() 调用。

然而，最好从简化开始。例如常见的结果获取：

```
$result = pdo_query("SELECT * FROM tbl");
while ($row = pdo_fetch_assoc($result)) { 
```

可以只用一个 foreach 迭代替换：

```
foreach ($result as $row) { 
```

或者更好的是直接和完整的数组检索：

```
$result->fetchAll(); 
```

在大多数情况下，您会得到比 PDO 或 mysql_ 通常在查询失败后提供的更有用的警告。

### 其他选项

所以这有希望可视化一些*实际*的原因和一个有价值的下降途径~~`mysql_`~~。

只是切换到[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")并不能完全削减它。`pdo_query()`也只是它的前端。

除非您还引入参数绑定或可以利用更好的 API 中的其他内容，否则这是一个毫无意义的开关。我希望它被描述得足够简单，以免进一步打击新人。（教育通常比禁止更有效。）

虽然它符合最简单的可能工作的类别，但它仍然是非常实验性的代码。我是周末才写的。然而，有很多选择。只需谷歌搜索[PHP 数据库抽象](https://www.google.de/search?client=stackoverflow&q=PHP+database+abstraction)并浏览一下。一直存在并且将会有很多优秀的库来完成这些任务。

如果你想进一步简化你的数据库交互，像[Paris/Idiorm](http://j4mie.github.io/idiormandparis/)这样的映射器值得一试。就像没有人在 JavaScript 中使用平淡无奇的 DOM 一样，现在您不必照看原始数据库接口。

* * *

## 回答 #5

> 赞同：158
> 
> 时间：2012-10-12T13:22:42.787

`mysql_`功能：

1.  已过时 - 它们不再维护
2.  不允许您轻松移动到另一个数据库后端
3.  不支持准备好的语句，因此
4.  鼓励程序员使用串联构建查询，导致 SQL 注入漏洞

* * *

## 回答 #6

> 赞同：114
> 
> 时间：2013-01-01T17:42:28.837

说起*技术*原因，只有少数，极其具体，很少使用。很可能你永远不会在你的生活中使用它们。
也许我太无知了，但我从来没有机会使用它们，比如

*   非阻塞、异步查询
*   返回多个结果集的存储过程
*   加密 (SSL)
*   压缩

如果你需要它们——这些无疑是从 mysql 扩展转向更时尚和现代的技术原因。

**尽管如此，也有一些非技术问题，这可能会使您的体验更加困难**

*   在现代 PHP 版本中进一步使用这些函数将引发弃用级别的通知。它们可以简单地关闭。
*   在遥远的将来，它们可能会从默认的 PHP 构建中删除。也没什么大不了的，因为 mysql ext 将被转移到 PECL 中，并且每个托管商都会很乐意用它来编译 PHP，因为他们不想失去那些网站已经运行了几十年的客户。
*   来自 Stackoverflow 社区的强烈抵制。每当你提到这些诚实的功能时，你都会被告知它们是被严格禁止的。
*   作为一个普通的 PHP 用户，你使用这些函数的想法很可能是容易出错和错误的。只是因为所有这些大量的教程和手册教你错误的方式。不是功能本身——我必须强调它——而是它们的使用方式。

后一个问题是个问题。
但是，在我看来，所提出的解决方案也好不到哪里去。
在我看来，所有这些 PHP 用户都将学习如何立即正确处理 SQL 查询的梦想**太理想化了。**他们很可能只是机械地将 mysql_* 更改为 mysqli_* ，**使方法保持不变**。特别是因为 mysqli 使准备好的语句的使用变得难以置信的痛苦和麻烦。
更不用说*原生*准备好的语句**不足以防止**SQL 注入，而且 mysqli 和 PDO 都没有提供解决方案。

因此，与其对抗这种诚实的扩展，我更愿意对抗错误的做法并以正确的方式教育人们。

**此外，还有一些错误或无关紧要的原因，例如**

*   不支持存储过程（我们使用`mysql_query("CALL my_proc");`了很长时间）
*   不支持事务（同上）
*   不支持多个语句（谁需要它们？）
*   未在积极开发中（那又怎样？它对*您*有任何实际影响吗？）
*   缺少 OO 接口（创建一个需要几个小时）
*   不支持预处理语句或参数化查询

最后一个是一个有趣的点。尽管 mysql ext 不支持*原生*准备语句，但出于安全考虑，它们不是必需的。我们可以使用手动处理的占位符轻松伪造准备好的语句（就像 PDO 一样）：

```
function paraQuery()
{
    $args  = func_get_args();
    $query = array_shift($args);
    $query = str_replace("%s","'%s'",$query); 

    foreach ($args as $key => $val)
    {
        $args[$key] = mysql_real_escape_string($val);
    }

    $query  = vsprintf($query, $args);
    $result = mysql_query($query);
    if (!$result)
    {
        throw new Exception(mysql_error()." [$query]");
    }
    return $result;
}

$query  = "SELECT * FROM table where a=%s AND b LIKE %s LIMIT %d";
$result = paraQuery($query, $a, "%$b%", $limit); 
```

*瞧*，一切都是参数化且安全的。

不过好吧，如果你不喜欢手册里的红框，就出现了一个选择问题：mysqli还是PDO？

好吧，答案如下：

*   如果您了解使用*数据库抽象层*的必要性并寻找 API 来创建一个，那么**mysqli**是一个非常好的选择，因为它确实支持许多 mysql 特定的功能。
*   如果像绝大多数 PHP 人一样，您在应用程序代码中使用原始 API 调用（这本质上是错误的做法） - **PDO 是唯一的选择**，因为这个扩展伪装成不仅仅是 API，而是半 DAL，仍然不完整，但提供了许多重要的特性，其中两个使 PDO 与 mysqli 有严格的区别：

    *   与 mysqli 不同，PDO 可以*按 value*绑定占位符，这使得动态构建的查询变得可行，而无需几个屏幕相当混乱的代码。
    *   与 mysqli 不同，PDO 总是可以在一个简单的常用数组中返回查询结果，而 mysqli 只能在 mysqlnd 安装上执行此操作。

所以，如果你是一个普通的 PHP 用户，并且想在使用原生准备语句时省去很多麻烦，那么 PDO - 再次 - 是唯一的选择。
但是，PDO 也不是灵丹妙药，也有其困难。[**因此，我为PDO 标签 wiki**](https://stackoverflow.com/tags/pdo/info)
中的所有常见陷阱和复杂案例编写了解决方案[](https://stackoverflow.com/tags/pdo/info)

 **然而，每个谈论扩展的人总是忽略关于 Mysqli 和 PDO的**两个重要事实：**

1.  准备好的陈述**不是灵丹妙药**。有些动态标识符无法使用准备好的语句绑定。存在参数数量未知的动态查询，这使得查询构建成为一项艰巨的任务。

2.  **mysqli_* 和 PDO 函数都不应该出现在应用程序代码中。**
    它们和应用程序代码之间应该有一个**抽象层**，它将完成内部绑定、循环、错误处理等所有脏活，使应用程序代码干燥和干净。特别是对于动态查询构建等复杂情况。

所以，仅仅切换到 PDO 或 mysqli 是不够的。必须使用 ORM、查询构建器或任何数据库抽象类，而不是在其代码中调用原始 API 函数。
相反——如果你的应用程序代码和mysql API之间有一个抽象层——**使用哪个引擎实际上并不重要。**您可以使用 mysql ext 直到它被弃用，然后轻松地将您的抽象类重写到另一个引擎，**使所有应用程序代码保持不变。**

下面是一些基于我的[safemysql 类](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php)的例子，展示了这样一个抽象类应该是怎样的：

```
$city_ids = array(1,2,3);
$cities   = $db->getCol("SELECT name FROM cities WHERE is IN(?a)", $city_ids); 
```

将这一行与[使用 PDO 所需的代码量进行](https://stackoverflow.com/a/15991146/285587)比较。
然后与原始 Mysqli 准备语句[所需的大量代码进行比较。](https://stackoverflow.com/a/17874410/285587)请注意，错误处理、分析、查询日志记录已经内置并正在运行。

```
$insert = array('name' => 'John', 'surname' => "O'Hara");
$db->query("INSERT INTO users SET ?u", $insert); 
```

将其与通常的 PDO 插入进行比较，在所有这些众多命名占位符、绑定和查询定义中，每个字段名称都重复六到十次。

另一个例子：

```
$data = $db->getAll("SELECT * FROM goods ORDER BY ?n", $_GET['order']); 
```

您很难找到 PDO 处理此类实际案例的示例。
而且它会太罗嗦，而且很可能不安全。

所以，再一次——你关心的不仅仅是原始驱动程序，还有抽象类，它不仅对初学者手册中的愚蠢例子有用，而且对解决任何现实生活中的问题都有用。

* * *

## 回答 #7

> 赞同：103
> 
> 时间：2012-10-12T13:23:00.523

原因有很多，但最重要的一个可能是这些函数鼓励不安全的编程实践，因为它们不支持预准备语句。准备好的语句有助于防止 SQL 注入攻击。

使用`mysql_*`函数时，您必须记住通过`mysql_real_escape_string()`. 如果您只忘记了一个地方，或者您碰巧只转义了部分输入，那么您的数据库可能会受到攻击。

`PDO`在or中使用准备好的语句`mysqli`会使得这些类型的编程错误更难发生。

* * *

## 回答 #8

> 赞同：80
> 
> 时间：2012-10-12T13:24:04.980

因为（除其他原因外）确保输入数据得到清理要困难得多。如果您使用参数化查询，就像使用 PDO 或 mysqli 一样，您可以完全避免风险。

例如，有人可以用`"enhzflep); drop table users"`作用户名。旧函数将允许每个查询执行多个语句，因此像那个讨厌的虫子这样的东西可以删除整个表。

如果要使用 mysqli 的 PDO，用户名最终将是`"enhzflep); drop table users"`.

请参阅[bobby-tables.com](http://bobby-tables.com/)。

* * *

## 回答 #9

> 赞同：72
> 
> 时间：2013-09-18T12:28:24.017

编写此答案是为了说明绕过编写不佳的 PHP 用户验证代码是多么微不足道，这些攻击如何（以及使用什么）起作用以及如何用安全的准备好的语句替换旧的 MySQL 函数 - 基本上，为什么 StackOverflow 用户（可能有很多代表）对新用户大吼大叫，他们提出问题以改进他们的代码。

首先，请随意创建这个测试 mysql 数据库（我已经调用了我的准备）：

```
mysql> create table users(
    -> id int(2) primary key auto_increment,
    -> userid tinytext,
    -> pass tinytext);
Query OK, 0 rows affected (0.05 sec)

mysql> insert into users values(null, 'Fluffeh', 'mypass');
Query OK, 1 row affected (0.04 sec)

mysql> create user 'prepared'@'localhost' identified by 'example';
Query OK, 0 rows affected (0.01 sec)

mysql> grant all privileges on prep.* to 'prepared'@'localhost' with grant option;
Query OK, 0 rows affected (0.00 sec) 
```

完成后，我们可以转到我们的 PHP 代码。

让我们假设以下脚本是网站管理员的验证过程（简化但如果您复制并使用它进行测试，则可以正常工作）：

```
<?php 

    if(!empty($_POST['user']))
    {
        $user=$_POST['user'];
    }   
    else
    {
        $user='bob';
    }
    if(!empty($_POST['pass']))
    {
        $pass=$_POST['pass'];
    }
    else
    {
        $pass='bob';
    }

    $database='prep';
    $link=mysql_connect('localhost', 'prepared', 'example');
    mysql_select_db($database) or die( "Unable to select database");

    $sql="select id, userid, pass from users where userid='$user' and pass='$pass'";
    //echo $sql."<br><br>";
    $result=mysql_query($sql);
    $isAdmin=false;
    while ($row = mysql_fetch_assoc($result)) {
        echo "My id is ".$row['id']." and my username is ".$row['userid']." and lastly, my password is ".$row['pass']."<br>";
        $isAdmin=true;
        // We have correctly matched the Username and Password
        // Lets give this person full access
    }
    if($isAdmin)
    {
        echo "The check passed. We have a verified admin!<br>";
    }
    else
    {
        echo "You could not be verified. Please try again...<br>";
    }
    mysql_close($link);

?>

<form name="exploited" method='post'>
    User: <input type='text' name='user'><br>
    Pass: <input type='text' name='pass'><br>
    <input type='submit'>
</form> 
```

乍一看似乎足够合法。

用户必须输入登录名和密码，对吗？

太棒了，不输入以下内容：

```
user: bob
pass: somePass 
```

并提交。

输出如下：

```
You could not be verified. Please try again... 
```

极好的！按预期工作，现在让我们尝试实际的用户名和密码：

```
user: Fluffeh
pass: mypass 
```

惊人的！全面击掌，代码正确验证了管理员。这是完美的！

嗯，不是真的。可以说用户是一个聪明的小人物。可以说那个人是我。

输入以下内容：

```
user: bob
pass: n' or 1=1 or 'm=m 
```

输出是：

```
The check passed. We have a verified admin! 
```

恭喜，您只允许我进入您的超级保护管理员专区，而我输入了错误的用户名和错误的密码。说真的，如果你不相信我，用我提供的代码创建数据库，然后运行这个 PHP 代码 - 乍一看，它似乎确实很好地验证了用户名和密码。

所以，作为回答，这就是你被骂的原因。

那么，让我们看看出了什么问题，以及为什么我刚刚进入您的超级管理员专用蝙蝠洞。我猜测并假设您对输入不小心，只是将它们直接传递给数据库。我以一种会更改您实际运行的查询的方式构建输入。那么，它应该是什么，它最终是什么？

```
select id, userid, pass from users where userid='$user' and pass='$pass' 
```

这就是查询，但是当我们用我们使用的实际输入替换变量时，我们得到以下信息：

```
select id, userid, pass from users where userid='bob' and pass='n' or 1=1 or 'm=m' 
```

看看我是如何构造我的“密码”的，以便它首先关闭密码周围的单引号，然后引入一个全新的比较？然后为了安全起见，我添加了另一个“字符串”，以便单引号在我们最初拥有的代码中按预期关闭。

然而，这不是人们现在对你大喊大叫，而是向你展示如何让你的代码更安全。

好的，那么出了什么问题，我们该如何解决？

这是典型的 SQL 注入攻击。最简单的事情之一。在攻击向量的规模上，这是一个蹒跚学步的孩子攻击坦克 - 并获胜。

那么，我们如何保护您神圣的管理部分并使其变得美观和安全？要做的第一件事是停止使用那些非常古老和不推荐使用的`mysql_*`功能。我知道，您遵循了您在网上找到的教程并且它有效，但它很旧，已经过时并且在几分钟的时间内，我刚刚突破它而没有流汗。

现在，您可以更好地选择使用[mysqli_](http://php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/book.pdo.php)。我个人是 PDO 的忠实拥护者，因此我将在此答案的其余部分中使用 PDO。有优点也有缺点，但我个人觉得优点远大于缺点。它可以跨多个数据库引擎进行移植——无论您使用的是 MySQL 还是 Oracle 或任何该死的东西——只需更改连接字符串，它就具有我们想要使用的所有花哨的功能，而且它既漂亮又干净。我喜欢干净。

现在，让我们再看一下这段代码，这次是使用 PDO 对象编写的：

```
<?php 

    if(!empty($_POST['user']))
    {
        $user=$_POST['user'];
    }   
    else
    {
        $user='bob';
    }
    if(!empty($_POST['pass']))
    {
        $pass=$_POST['pass'];
    }
    else
    {
        $pass='bob';
    }
    $isAdmin=false;

    $database='prep';
    $pdo=new PDO ('mysql:host=localhost;dbname=prep', 'prepared', 'example');
    $sql="select id, userid, pass from users where userid=:user and pass=:password";
    $myPDO = $pdo->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
    if($myPDO->execute(array(':user' => $user, ':password' => $pass)))
    {
        while($row=$myPDO->fetch(PDO::FETCH_ASSOC))
        {
            echo "My id is ".$row['id']." and my username is ".$row['userid']." and lastly, my password is ".$row['pass']."<br>";
            $isAdmin=true;
            // We have correctly matched the Username and Password
            // Lets give this person full access
        }
    }

    if($isAdmin)
    {
        echo "The check passed. We have a verified admin!<br>";
    }
    else
    {
        echo "You could not be verified. Please try again...<br>";
    }

?>

<form name="exploited" method='post'>
    User: <input type='text' name='user'><br>
    Pass: <input type='text' name='pass'><br>
    <input type='submit'>
</form> 
```

主要区别在于没有更多`mysql_*`功能。这一切都是通过 PDO 对象完成的，其次，它使用的是准备好的语句。现在，你问的预先声明是什么？这是一种在运行查询之前告诉数据库的方法，即我们将要运行的查询是什么。在这种情况下，我们告诉数据库：“嗨，我将运行一个 select 语句，想要 id、userid 和 pass 从表 users 中 userid 是一个变量，而 pass 也是一个变量。”。

然后，在执行语句中，我们将一个数组传递给数据库，其中包含它现在期望的所有变量。

结果太棒了。让我们再次尝试以前的用户名和密码组合：

```
user: bob
pass: somePass 
```

用户未通过验证。惊人的。

怎么样：

```
user: Fluffeh
pass: mypass 
```

哦，我只是有点兴奋，它起作用了：支票通过了。我们有经过验证的管理员！

现在，让我们尝试一下聪明人会输入的数据，以尝试通过我们的小验证系统：

```
user: bob
pass: n' or 1=1 or 'm=m 
```

这一次，我们得到以下信息：

```
You could not be verified. Please try again... 
```

这就是为什么您在发布问题时被大喊大叫的原因 - 这是因为人们可以看到您的代码甚至可以在没有尝试的情况下被绕过。请务必使用此问题和答案来改进您的代码，使其更安全并使用最新的功能。

最后，这并不是说这是完美的代码。你可以做更多的事情来改进它，例如使用散列密码，确保当你在数据库中存储有意义的信息时，你不会以纯文本形式存储它，有多个级别的验证 - 但实际上，如果您只需将旧的易于注入的代码更改为此，您将在编写好代码的过程中做得很好 - 而且您已经走到这一步并且仍在阅读的事实让我有一种希望，您不仅会实现这种类型编写您的网站和应用程序时的代码，但您可能会出去研究我刚刚提到的其他内容 - 等等。写你能写的最好的代码，而不是勉强能用的最基本的代码。

* * *

## 回答 #10

> 赞同：38
> 
> 时间：2015-09-02T07:20:14.307

MySQL 扩展是三者中最古老的，也是开发人员用来与 MySQL 通信的原始方式。由于在 PHP 和 MySQL 的较新版本中进行了改进，此扩展现在已被[弃用](http://php.net/manual/en/migration55.deprecated.php)，取而代之的是其他[两个](http://php.net/manual/en/book.mysqli.php) [替代方案。](http://php.net/manual/en/book.pdo.php)

*   [MySQLi](http://php.net/manual/en/book.mysqli.php)是用于处理 MySQL 数据库的“改进”扩展。它利用了较新版本的 MySQL 服务器中可用的功能，向开发人员公开了面向函数和面向对象的接口，并做了一些其他漂亮的事情。

*   [PDO](http://php.net/manual/en/book.pdo.php)提供了一个 API，它整合了以前分布在主要数据库访问扩展（即 MySQL、PostgreSQL、SQLite、MSSQL 等）中的大部分功能。该接口公开了高级对象，供程序员使用数据库连接、查询和结果集和低级驱动程序执行与数据库服务器的通信和资源处理。PDO 正在进行大量讨论和工作，它被认为是使用现代专业代码处理数据库的适当方法。

* * *

## 回答 #11

> 赞同：25
> 
> 时间：2016-09-07T15:06:51.673

我发现上面的答案真的很长，所以总结一下：

> mysqli 扩展有很多好处，对 mysql 扩展的主要增强是：
> 
> *   面向对象的接口
> *   支持准备好的报表
> *   支持多个语句
> *   交易支持
> *   增强的调试功能
> *   嵌入式服务器支持

资料来源：[MySQLi 概述](http://us2.php.net/manual/en/mysqli.overview.php)

* * *

如上述答案中所述，mysql 的替代品是 mysqli 和 PDO（PHP 数据对象）。

*   API 支持服务器端 Prepared Statements：由 MYSQLi 和 PDO 支持
*   API 支持客户端 Prepared Statements：仅 PDO 支持
*   API 支持存储过程：MySQLi 和 PDO
*   API 支持多条语句和所有 MySQL 4.1+ 功能 - 由 MySQLi 支持，大部分也由 PDO 支持

MySQLi 和 PDO 都是在 PHP 5.0 中引入的，而 MySQL 是在 PHP 3.0 之前引入的。需要注意的一点是 MySQL 包含在 PHP5.x 中，尽管在以后的版本中已弃用。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2017-06-09T06:24:03.530

`mysql_*`使用 mysqli 或 PDO几乎可以定义所有函数。只需将它们包含在您的旧 PHP 应用程序之上，它就可以在 PHP7 上运行。我的解决方案[在这里](https://github.com/sunhater/php7-mysql/blob/master/php7-mysql.php)。

```
<?php

define('MYSQL_LINK', 'dbl');
$GLOBALS[MYSQL_LINK] = null;

function mysql_link($link=null) {
    return ($link === null) ? $GLOBALS[MYSQL_LINK] : $link;
}

function mysql_connect($host, $user, $pass) {
    $GLOBALS[MYSQL_LINK] = mysqli_connect($host, $user, $pass);
    return $GLOBALS[MYSQL_LINK];
}

function mysql_pconnect($host, $user, $pass) {
    return mysql_connect($host, $user, $pass);
}

function mysql_select_db($db, $link=null) {
    $link = mysql_link($link);
    return mysqli_select_db($link, $db);
}

function mysql_close($link=null) {
    $link = mysql_link($link);
    return mysqli_close($link);
}

function mysql_error($link=null) {
    $link = mysql_link($link);
    return mysqli_error($link);
}

function mysql_errno($link=null) {
    $link = mysql_link($link);
    return mysqli_errno($link);
}

function mysql_ping($link=null) {
    $link = mysql_link($link);
    return mysqli_ping($link);
}

function mysql_stat($link=null) {
    $link = mysql_link($link);
    return mysqli_stat($link);
}

function mysql_affected_rows($link=null) {
    $link = mysql_link($link);
    return mysqli_affected_rows($link);
}

function mysql_client_encoding($link=null) {
    $link = mysql_link($link);
    return mysqli_character_set_name($link);
}

function mysql_thread_id($link=null) {
    $link = mysql_link($link);
    return mysqli_thread_id($link);
}

function mysql_escape_string($string) {
    return mysql_real_escape_string($string);
}

function mysql_real_escape_string($string, $link=null) {
    $link = mysql_link($link);
    return mysqli_real_escape_string($link, $string);
}

function mysql_query($sql, $link=null) {
    $link = mysql_link($link);
    return mysqli_query($link, $sql);
}

function mysql_unbuffered_query($sql, $link=null) {
    $link = mysql_link($link);
    return mysqli_query($link, $sql, MYSQLI_USE_RESULT);
}

function mysql_set_charset($charset, $link=null){
    $link = mysql_link($link);
    return mysqli_set_charset($link, $charset);
}

function mysql_get_host_info($link=null) {
    $link = mysql_link($link);
    return mysqli_get_host_info($link);
}

function mysql_get_proto_info($link=null) {
    $link = mysql_link($link);
    return mysqli_get_proto_info($link);
}
function mysql_get_server_info($link=null) {
    $link = mysql_link($link);
    return mysqli_get_server_info($link);
}

function mysql_info($link=null) {
    $link = mysql_link($link);
    return mysqli_info($link);
}

function mysql_get_client_info() {
    $link = mysql_link();
    return mysqli_get_client_info($link);
}

function mysql_create_db($db, $link=null) {
    $link = mysql_link($link);
    $db = str_replace('`', '', mysqli_real_escape_string($link, $db));
    return mysqli_query($link, "CREATE DATABASE `$db`");
}

function mysql_drop_db($db, $link=null) {
    $link = mysql_link($link);
    $db = str_replace('`', '', mysqli_real_escape_string($link, $db));
    return mysqli_query($link, "DROP DATABASE `$db`");
}

function mysql_list_dbs($link=null) {
    $link = mysql_link($link);
    return mysqli_query($link, "SHOW DATABASES");
}

function mysql_list_fields($db, $table, $link=null) {
    $link = mysql_link($link);
    $db = str_replace('`', '', mysqli_real_escape_string($link, $db));
    $table = str_replace('`', '', mysqli_real_escape_string($link, $table));
    return mysqli_query($link, "SHOW COLUMNS FROM `$db`.`$table`");
}

function mysql_list_tables($db, $link=null) {
    $link = mysql_link($link);
    $db = str_replace('`', '', mysqli_real_escape_string($link, $db));
    return mysqli_query($link, "SHOW TABLES FROM `$db`");
}

function mysql_db_query($db, $sql, $link=null) {
    $link = mysql_link($link);
    mysqli_select_db($link, $db);
    return mysqli_query($link, $sql);
}

function mysql_fetch_row($qlink) {
    return mysqli_fetch_row($qlink);
}

function mysql_fetch_assoc($qlink) {
    return mysqli_fetch_assoc($qlink);
}

function mysql_fetch_array($qlink, $result=MYSQLI_BOTH) {
    return mysqli_fetch_array($qlink, $result);
}

function mysql_fetch_lengths($qlink) {
    return mysqli_fetch_lengths($qlink);
}

function mysql_insert_id($qlink) {
    return mysqli_insert_id($qlink);
}

function mysql_num_rows($qlink) {
    return mysqli_num_rows($qlink);
}

function mysql_num_fields($qlink) {
    return mysqli_num_fields($qlink);
}

function mysql_data_seek($qlink, $row) {
    return mysqli_data_seek($qlink, $row);
}

function mysql_field_seek($qlink, $offset) {
    return mysqli_field_seek($qlink, $offset);
}

function mysql_fetch_object($qlink, $class="stdClass", array $params=null) {
    return ($params === null)
        ? mysqli_fetch_object($qlink, $class)
        : mysqli_fetch_object($qlink, $class, $params);
}

function mysql_db_name($qlink, $row, $field='Database') {
    mysqli_data_seek($qlink, $row);
    $db = mysqli_fetch_assoc($qlink);
    return $db[$field];
}

function mysql_fetch_field($qlink, $offset=null) {
    if ($offset !== null)
        mysqli_field_seek($qlink, $offset);
    return mysqli_fetch_field($qlink);
}

function mysql_result($qlink, $offset, $field=0) {
    if ($offset !== null)
        mysqli_field_seek($qlink, $offset);
    $row = mysqli_fetch_array($qlink);
    return (!is_array($row) || !isset($row[$field]))
        ? false
        : $row[$field];
}

function mysql_field_len($qlink, $offset) {
    $field = mysqli_fetch_field_direct($qlink, $offset);
    return is_object($field) ? $field->length : false;
}

function mysql_field_name($qlink, $offset) {
    $field = mysqli_fetch_field_direct($qlink, $offset);
    if (!is_object($field))
        return false;
    return empty($field->orgname) ? $field->name : $field->orgname;
}

function mysql_field_table($qlink, $offset) {
    $field = mysqli_fetch_field_direct($qlink, $offset);
    if (!is_object($field))
        return false;
    return empty($field->orgtable) ? $field->table : $field->orgtable;
}

function mysql_field_type($qlink, $offset) {
    $field = mysqli_fetch_field_direct($qlink, $offset);
    return is_object($field) ? $field->type : false;
}

function mysql_free_result($qlink) {
    try {
        mysqli_free_result($qlink);
    } catch (Exception $e) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-10-19T04:10:18.427

## 不要使用 mysql，因为不推荐使用 mysqli 来代替。

**弃用的意思：**

这意味着不要使用某些特定的功能/方法/软件功能/特定的软件实践，它只是意味着不应该使用它，因为应该使用该软件中（或将会有）更好的替代方案。

**使用不推荐使用的函数时可能会出现几个常见问题：**

**1\. 功能完全停止工作：**应用程序或脚本可能依赖于不再支持的功能，因此使用它们的改进版本或替代方案。

**2\. 显示有关弃用的警告消息**：这些消息通常不会干扰站点功能。但是，在某些情况下，它们可能会中断服务器发送标头的过程。

例如：这可能会导致登录问题（cookies/sessions 设置不正确）或转发问题（301/302/303 重定向）。

**请记住：**

- 弃用的软件仍然是软件的一部分。

- 弃用的代码只是代码的状态（标签）。

**MYSQL 与 MYSQLI** mysql*的主要区别

*   旧数据库驱动程序
*   MySQL 只能在程序上使用
*   无法抵御 SQL 注入攻击
*   在 PHP 5.5.0 中已弃用并在 PHP 7 中删除

mysqli

*   新的数据库驱动程序
*   目前正在使用中
*   准备好的语句保护免受攻击***

# delphi - 第二次调用 dll 时无法通过 ResetDc 设置打印机设置

> ID：12859944
> 
> 赞同：0
> 
> 时间：2012-10-12T13:18:42.773
> 
> 标签：delphi, delphi-7

我有一个 dll，其中有打印单元。

在我的应用程序中，我导出了开始、结束打印过程以及打印文档的方法。

对 dll 的调用如下：

```
1-> begin printing and print document
2-> print document
3-> end printing. 
```

我在每个打印页面（托盘、方向等）之前更改设置当我再次调用 (2) 并尝试更改打印机设置时，步骤 1 成功完成，方法：用于开发模式结构的 ResetDc 返回 false ...

问题是当我在 1 次调用后回到应用程序中时，应用程序打印机单元更改了某些内容，从而阻止了 dll 中的后续调用？

如何解决问题？

## 编辑

这是设置页面设​​置的功能。当进行 1 次调用时（来自上面的列表）ResetDC 成功执行，但在下一次调用中 ResetDC 返回 false。为什么 ... ？

```
function PRPageSetup(paperSize: Integer = DMPAPER_A4): Boolean;
var
  pDevice: pChar;
  pDriver: pChar;
  pPort: pChar;
  hDMode: THandle;
  PDMode: PDEVMODE;
  PrnHandle: THandle;

begin
  result := false;
  GetMem(pDevice, cchDeviceName);
  GetMem(pDriver, MAX_PATH);
  GetMem(pPort, MAX_PATH);

  Printer.GetPrinter(pDevice, pDriver, pPort, hDMode);

  if hDMode <> 0 then
  begin
    pDMode := GlobalLock(hDMode);
    if pDMode <> nil then
    begin                 
         pDMode^.dmFields := pDMode^.dmFields or DM_PAPERSIZE or DM_ORIENTATION;
         pDMode^.dmPaperSize := paperSize;        

      if Printer.Printing then
        PrnHandle := printer.Canvas.Handle
       else
        PrnHandle := Printer.Handle;

      if ResetDc(PrnHandle, pDMode^) <> 0
        then PRCanReset := true
        else PRCanReset := false;

      Result := true;
      GlobalUnlock(hDMode);
    end;
  end;
  FreeMem(pDevice, cchDeviceName);
  FreeMem(pDriver, MAX_PATH);
  FreeMem(pPort, MAX_PATH);
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:50:50.297

我终于设法解决了这个问题。

我发现当 TMetaFileCanvases 仍在内存中时，我无法设置页面。我需要先释放它们，然后重新配置页面。

感谢大家的努力和时间。

# apache - jQuery Ajax 中止和快速连续的新请求

> ID：12859946
> 
> 赞同：7
> 
> 时间：2012-10-12T13:18:51.113
> 
> 标签：apache, jquery, jquery-mobile

我有一个移动应用程序，它使

```
JqXHR = $.ajax({
    url: 'url',
    data: null,
    async: true,
    cache: false,
    dataType: 'json',
    type: 'GET',
    crossDomain: true,
    timeout: 63000,
    success: function(data, textStatus, jqXHR) {},
    error: function(jqXHR, textStatus, errorThrown) {}
}); 
```

要求。它等待 63 秒（PHP 后端可以运行约 62 秒）以便在另一端进行用户交互。现在，如果同时我决定中止这个请求，那么我打电话给`JqXHR.abort()`. 在错误处理程序中，我已经处理/区分了真正的错误和中止，这是有效的。在中止之后，我想向服务器发送另一个 API 调用以连接松散的末端并确保记录我的取消请求。

还有问题。即使我`abort()`是第一个请求，PHP 脚本仍在服务器上运行，如果它还执行了第二个请求，这将不是问题，这将使其停止并死亡（）。但它没有发生。在第一个请求完成之前，第二个请求不会发生。

有任何想法吗？

jQuery 1.8.2、jQuery Mobile 1.2.0、PhoneGap 2.0.0 和 2.1.0、Apache 2、Linux、PHP 5.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:54:28.990

## 一些信息：Parallel-Ajax 与 Apache-Session 锁定

* * *

**会话数据**通常在**脚本终止****后存储**，但由于*会话数据被锁定以防止并发写入***，任何时候只有一个脚本可以对会话进行操作**。

 *****例如，当将框架集与会话一起使用时，由于这种锁定，您将体验到一个一个加载的框架。**您可以****通过尽快结束会话**来减少加载所有帧所需的时间。

* * *

因此，您可以在 ajax 脚本中使用会话 `session_start();`（可能会自动处理），然后立即（尽快）`session_write_close();`

`session_write_close();`将“结束”当前会话并存储会话数据。

*但是：* `session_id()`仍然会提供正确的（当前）PHPSESSID，因此您可以`session_start()`在需要时随时再次执行，从而重新获得对当前会话的写访问权限。

* * *

我在所有 ajax 脚本中都使用这种方式来实现会话处理*并*允许并行请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:49:02.100

It seems I ran into the good old PHP sessions vs. AJAX requests issue. Actually my boss found out about this issue by googling some expressions i never thought of. I am using Zend framework in the back-end, and it automatically starts a session namespace, so in my API controller's preDispatch() method I had to put in a @session_write_close(); line, and as if by magic, it works like a charm.

Thanks Arun for your quick reply, it is most appretiated.

So, in short: If you use Zend Framework or session_autostart or other means of starting sessions, they won't fly with parallel AJAX requests.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:27:07.907

该`abort`方法不会终止服务器进程，它只会终止客户端等待服务器响应。*****

# java - 发生 jsf 验证错误时执行操作

> ID：12859951
> 
> 赞同：4
> 
> 时间：2012-10-12T13:19:07.347
> 
> 标签：java, validation, jsf

如果发生 jsf 验证错误，是否可以执行一些操作（一些清理）？
字段使用 xhtml 中的标签进行验证，例如 'required="true"'、'f:validateRegex pattern="\d*"'、'f:validator validatorId="someValidator"'。
我需要将托管 bean 的一些属性字段设置为 null（当页面上出现任何故障时）。但是如果验证失败，那么 JSF 会进入渲染响应阶段并且不会调用托管 bean 方法。在这种情况下，也不会调用侦听器（使用 f:actionListener 标记）。

现在我正在考虑通过使用 @AssertTrue、@Size 等 bean 注释进行验证来替换 xhtml 验证。然后在某些验证方法中，可以进行清理：

```
@ManagedBean
class SomeBean {
...
    @AssertTrue
    public void isClenup() {
        cleanup();
    }
...
} 
```

但这对我来说似乎不是一个好的解决方案。
我还注意到几个用 @AssertTrue 注释的方法以未定义的顺序调用。因此，从 xhtml 验证切换到 bean 注释验证变得不那么容易了。
是否可以定义一些使用@AssertTrue 注释的调用方法的顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T20:50:27.860

事实上，我的任务很普通：有一个带有搜索功能的页面。
如果搜索成功且没有错误，则应显示结果，但如果发生验证错误（在下一次搜索期间），则不应显示先前的结果（但它是可见的，这是一个问题）。

我的计划如下：使用 facesContext.isValidationFailed() 检查 initialize() 方法中的验证失败，如果为真，则隐藏（删除）以前的搜索结果：

```
public void initialize() {
    FacesContext context = FacesContext.getCurrentInstance();
    boolean validationFailed = context.isValidationFailed();
    if(validationFailed) {
        clearPreviousSearchResult();
    }
} 
```

但后来我发现使用 bean 注释（如 @AssertTrue）进行验证并没有设置 facesContext.validationFailed();！即在此之后

```
@AssertTrue(message = "Some error message")
public boolean isValidateSomeField() {
    return validate(getSomeFieldValue());
} 
```

当失败发生时你会得到 context.isValidationFailed() == false （虽然我预计是真的）
（xhtml 验证或验证器或 f:validator 确实按预期设置 facesContext.validationFailed() ）

因此有必要手动设置上下文失败：

```
@AssertTrue(message = "Some error message")
public boolean isValidateSomeField() {
    if(!validate(getSomeFieldValue())) {
        FacesContext.getCurrentInstance().validationFailed();
        return false;
    }
    return true;
} 
```

但是由于[如果验证失败，如何在验证阶段之后签入？](https://stackoverflow.com/questions/9125238/how-to-check-in-after-phase-of-validations-phase-if-validation-has-failed)我意识到问题可以更容易地解决！只是用几行包装：

```
<h:panelGroup rendered="#{!facesContext.validationFailed}">
    ...block not to show if validation errors occur...
</h:panelGroup> 
```

并且不需要使用注解 bean 验证和一些 initialize() 方法！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:01:26.823

如果在 JSF 验证阶段抛出了验证异常，那么所有提交的表单值都不会应用于**模型**。此外，不会调用在调用应用程序 JSF 阶段执行的调用事件。但是您确实注意到，渲染仍然会发生，并且任何需要渲染或更新的组件仍然会这样做。

理论上，如果这些提交中的任何一个无效，这应该足以回滚大多数用户提交，但是有一些边缘情况需要进行额外的清理。但是，我敦促您仔细评估最初导致您实现此需求的设计决策，因为可能有更好的方法来满足您的业务需求而不必求助于此。

话虽如此，我将执行一个 Pre Render 事件，该事件将在每次回发时执行并检查某些验证并执行必要的业务和表示逻辑。

```
<f:event listener="#{managedBean.initialize()}" type="preRenderView" /> 
```

# java - 如何为 Spring 的事务管理器增加深度

> ID：12859960
> 
> 赞同：2
> 
> 时间：2012-10-12T13:19:27.123
> 
> 标签：java, spring, hibernate, aop

春季 2.5，休眠。

我们的应用程序被构建为具有服务层和管理器层。服务层提供所有只读服务并将结果传达给 UI。对于需要更改数据库的服务，服务层执行所有初始只读功能，然后调用管理器层。

我们围绕我们的管理层设置了一个事务建议，以捕获来自管理层的所有异常并回滚这些事务。这在大多数情况下都很好用。

问题在于我们有一个经理调用另一个经理来执行某些功能的情况。此功能会引发异常，这是从 UI 调用时真正的异常，但在客户端管理器内部处理并返回成功结果。事务管理器看到抛出了异常并回滚事务，即使异常已成功处理。

这是导致我们悲伤的交易属性。

```
<tx:method name="*" propagation="REQUIRED" rollback-for="Throwable" no-rollback-for="OverridableException"/> 
```

有没有办法可以指定深度？我想说，只回滚最高管理者层调用中的异常，而不是对同一事务的后续调用中的异常。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:26:12.047

通常，您希望将对服务层的调用包装在事务建议中，这样如果您的一个服务类对不同的管理器进行多次调用，所有这些都包装在一个事务中 - 如果您正在进行更改，它们都会成功或一起回滚。这通常被称为（以及其他名称）[工作单元模式](http://martinfowler.com/eaaCatalog/unitOfWork.html)。

所以我的建议是重新考虑你在哪里应用你的交易定义。但如果这不可行，您可能希望将事务建议更改为`propagation=REQUIRES_NEW`，以便每个管理器调用启动一个新事务 - 因此当一个管理器类调用另一个管理器类时回滚内部事务不会回滚整个事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:55:13.277

我最终重构了内部服务方法，以将引发异常的部分提取到另一个方法中。然后我调用该方法从外部服务中预先批准我正在执行的操作，并从内部服务中调用新方法以引发异常。这样，我就绕过了抛出的异常。

希望有一种更好的方法，而无需更频繁地提交。:(

# sql - 访问 - 在哪里和或不工作

> ID：12859961
> 
> 赞同：1
> 
> 时间：2012-10-12T13:19:41.833
> 
> 标签：sql, ms-access, select, join, where-clause

我有以下用 MS Access 编写的查询

```
SELECT DISTINCT Table1.ColumnA, Table1.ColumnB,Table1.ColumnC,Table1.ColumnD,Table1.ColumnE
FROM Table2 
RIGHT JOIN Table1 ON (Table2.ColumnB = Table1.ColumnF) 
WHERE (Table1.ColumnF <>28) OR (Table1.ColumnF<>29) 
```

1.  尝试带和不带括号
2.  当我只有一个 where 语句时，262 条记录下降到 160 条记录，正如预期的那样
3.  当我通过 OR 连接这两个条件时，记录回到 262，显然没有达到预期的效果。即使第一个条件成立，我也不应该回到 262 条记录。

我的问题是我的查询有什么问题，尤其是与 WHERE XXX OR XXX?

其次，RIGHT JOIN 语句是否对后续 WHERE 语句的结果有任何影响。

第三，如果我不能将 RIGHT JOIN 和 WHERE 结合起来，那么将条件应用于依赖 RIGHT JOIN 的查询的最佳方法是什么？

感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:21:28.763

用 AND 替换你的 OR

```
 WHERE (Table1.ColumnF <>28) AND (Table1.ColumnF<>29) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:59:16.473

您可以改用它：

```
WHERE Table1.ColumnF Not In (28,29) 
```

这种方法清楚而简洁地表达了您的意图。既然您已经解决了针对您的条件的`OR`vs.问题，那么这个建议可能看起来并不是很有用。但是，请记住，当您有更多这样的条件时。将比 4 s 更容易编写和理解。`AND``WHERE``Not In (28,29,32,40,119)``AND`

# java - 在android中的opengl动画中有效清洁？

> ID：12859963
> 
> 赞同：0
> 
> 时间：2012-10-12T13:19:51.430
> 
> 标签：java, android, animation, memory, opengl-es

我的渲染器看起来像这样：

```
public void onDrawFrame(GL10 gl) {
    if(draw) {
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[i]);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        gl.glFrontFace(GL10.GL_CW);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),
                textures[i]);

        gl.glGenTextures(1, textures, 0);
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[i]);

        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

        bitmap.recycle();
    } else {
        gl.glDeleteTextures(textures.length, textures, 0);
        gl.glFlush();       
    }
} 
```

这就是动画结束后我能做的全部清理工作吗？我一直使用这个渲染器，几分钟后我总是内存不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:26:44.727

> 我一直使用这个渲染器，几分钟后我总是内存不足。

您不应该每帧都重新创建所有纹理。您创建一次并重复使用它们。如果您想在保持格式和尺寸的同时更新图片，请在现有纹理对象上使用 glTexSubImage2D。

# c# - FlowDocument 中的 PDF

> ID：12859966
> 
> 赞同：0
> 
> 时间：2012-10-12T13:19:58.140
> 
> 标签：c#, wpf, pdf, printing, flowdocument

我有一个动态创建的 FlowDocument（包含几个表）。我需要在此文档中嵌入 PDF 文档。例如：我可能有一张桌子，然后是几个 PDF 文档，然后是另一张桌子。

解决此问题的最佳方法是什么。在最坏的情况下，我可以打印所有的 PDF，然后是所有的表格，但我真的需要将每组文档/PDF 保存在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:33:17.640

您可以创建可打印元素的通用容器宽度列表。可打印元素是流文档宽度表或 pdf 文档。之后你可以制作这样的方法

```
void Print() {
    foreach(IPrintableElement el in _printableElements){ 
       el.Print();
      // where Print() is realization for flow document printing or pdf document printing
    }
} 
```

但是通过这种方式，您的表格和 PDF 将打印在不同的页面上。

# java - java regex：在分隔符后提取文本？

> ID：12859968
> 
> 赞同：1
> 
> 时间：2012-10-12T13:20:02.070
> 
> 标签：java, regex

我是 Java 正则表达式的新手。我喜欢使用正则表达式提取字符串。

这是我的字符串：“Hello,World”

我喜欢提取“，”之后的文本。结果将是“世界”。我试过这个：

```
final Pattern pattern = Pattern.compile(",(.+?)"); 
final Matcher matcher = pattern.matcher("Hello,World"); 
matcher.find(); 
```

但是下一步会是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:22:04.887

你不需要正则表达式。您可以简单地以逗号分隔并从数组中获取第二个元素：-

```
System.out.println("Hello,World".split(",")[1]); 
```

**输出**： -

```
World 
```

* * *

**但是如果你想使用`Regex`**，你需要`?`从你的正则表达式中删除。

`?`after`+`用于`Reluctant`匹配。它**只会匹配`W`**并停在那里。你在这里不需要那个。你需要匹配，直到它可以匹配。

所以改用**`greedy`**匹配。

**这是修改过的正则表达式的代码： -**

```
final Pattern pattern = Pattern.compile(",(.+)"); 
final Matcher matcher = pattern.matcher("Hello,World"); 

if (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

**输出**： -

```
World 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:21:43.793

扩展你所拥有的，你需要删除**?** 从您的模式签名以使用贪婪匹配，然后处理匹配的组：

```
final Pattern pattern = Pattern.compile(",(.+)");       // removed your '?'
final Matcher matcher = pattern.matcher("Hello,World"); 

while (matcher.find()) {

    String result = matcher.group(1);

    // work with result

} 
```

其他答案为您的问题提出了不同的方法，并可能为您的需要提供更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:24:49.940

```
System.out.println( "Hello,World".replaceAll(".*,(.*)","$1") ); // output is "World" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:25:20.160

您正在使用不情愿的表达式，只会选择一个字符`W`，而您可以使用*贪婪*的表达式并打印匹配的组内容：

```
final Pattern pattern = Pattern.compile(",(.+)");
final Matcher matcher = pattern.matcher("Hello,World");
if (matcher.find()) {
   System.out.println(matcher.group(1));
} 
```

输出：

```
World 
```

请参阅[正则表达式模式文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

# java - SWT 和完全禁用和隐藏鼠标指针

> ID：12859970
> 
> 赞同：0
> 
> 时间：2012-10-12T13:20:03.830
> 
> 标签：java, events, cursor, swt, hide

我需要一些帮助来隐藏和禁用鼠标指针。但我需要将所有鼠标事件发送到其他设备。所以主要场景是：打开SWT应用程序-->按下按钮（或标签，或者你想要的......）-->鼠标SWT端消失，没有指针，没有事件-->鼠标指针出现在其他设备上-- > 我可以从主物理鼠标控制其他设备的鼠标指针。

我现在发现的是如何使指针透明，我想到了可以每 20 毫秒修复一次位置的计时器。但是我怎样才能防止事件发生呢？我还能抓到他们吗？

问候

更新：

最终解决方案：新的全屏窗口半透明

```
public class AntiMouseGui {

    Display display;
    Shell shell;

    final int time = 20;

    private Runnable timer = null;

    public AntiMouseGui(final Display display, final DebugForm df, final PrintWriter socketOut) {

        Image bg = new Image(display, "icons/hide_mouse_wallpapaer.png");

        shell = new Shell(display, SWT.NO_TRIM | SWT.ON_TOP);

        final int dis_x = display.getClientArea().width, dis_y = display.getClientArea().height;
        shell.setSize(dis_x, dis_y);

        shell.setBackgroundImage(bg);
        shell.setAlpha(50);
        shell.setMinimumSize(shell.getSize()); 
        shell.open();

        timer = new Runnable() {
            public void run() {
                Point cur_loc = display.getCursorLocation();
                int span_x = dis_x / 2 - cur_loc.x, span_y = dis_y / 2 - cur_loc.y;

                df.appendTxt("span x = " + span_x + " span y = " + span_y);
                if (span_x != 0) Controller.moveMouseRight(socketOut, -span_x);
                if (span_y != 0) Controller.moveMouseDown(socketOut, -span_y);

                display.setCursorLocation(new Point(dis_x / 2, dis_y / 2));
                if (!shell.isDisposed()) display.timerExec(time, this);
            }
        };
        display.timerExec(time, timer);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:20:29.480

您可以创建一个`Shell`全屏并将其 alpha 值设置为 0。然后只需将 a 添加`Listener`到`Display`并捕获所有鼠标事件：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    shell.setFullScreen(true);
    shell.setAlpha(0);

    final Listener sendSomewhere = new Listener() {

        @Override
        public void handleEvent(Event event) {
            int x = event.x;
            int y = event.y;

            int eventType = event.type;

            System.out.println(x + " " + y + ": " + eventType);

            // send the coordinates to your other device
        }
    };

    int[] events = new int[] {SWT.MouseDown, SWT.MouseUp, SWT.MouseDoubleClick, SWT.Selection};

    for(int event : events)
    {
        display.addFilter(event, sendSomewhere);
    }

    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

只需使用`Alt`+`Tab`即可返回上一个窗口。

# data-binding - DataBinding DateTimePicker 引发“DataBinding 在列表中找不到适合所有绑定的行。”

> ID：12859973
> 
> 赞同：4
> 
> 时间：2012-10-12T13:20:12.977
> 
> 标签：data-binding, datetimepicker

我有一个简单的测试应用程序，它重现了我最近遇到的错误。基本上我有一个简单的 WinForm，带有数据绑定的 TextBox 和 DateTimePicker 控件，以及一个按钮。当我执行下面的代码时*（单击按钮）*，我收到错误“DataBinding 在列表中找不到适合所有绑定的行”。如果我将 DataSource 赋值移动到表单的构造函数中，我不会收到错误消息。

如果我删除 DateTimePicker 的数据绑定，它工作正常。

谁能解释问题是什么？

```
public partial class Form1 : Form
{
   private BindingSource bs;

   public Form1()
   {
      InitializeComponent();

      button1.Click += new EventHandler(button1_Click);

      bs = new BindingSource();
      bs.DataSource = typeof(Thing);

      this.textBox1.DataBindings.Add("Text", bs, "MyString");
      this.dateTimePicker1.DataBindings.Add(new Binding("Value", bs, "MyDate"));

      //Thing thing = new Thing { MyString = "Hello", MyNumber = 123, MyDate = DateTime.Parse("01-Jan-1970") };
      //bs.DataSource = thing;
      }

      private void button1_Click(object sender, EventArgs e)
      {
         Thing thing = new Thing { MyString = "Hello", MyNumber = 123, MyDate = DateTime.Parse("01-Jan-1970") };
         bs.DataSource = thing;
      }
   }

   public partial class Thing
   {
      public String MyString { get; set; }
      public Int32 MyNumber { get; set; }
      public DateTime MyDate { get; set; }
   }
} 
```

谢谢

**编辑：**

似乎如果我更改 DateTimePicker 控件的数据绑定，以便绑定到“文本”属性，问题就会消失。我不明白为什么会这样，因为“值”对数据绑定有效。

# eclipse - Eclipse 快捷方式帮助（源代码 -> xml 反之亦然）

> ID：12859974
> 
> 赞同：1
> 
> 时间：2012-10-12T13:20:13.910
> 
> 标签：eclipse, shortcut

由于这个平台的主题特性，我正在使用 Eclipse Juno。一切都很好，然后我在Android开发中遇到了这个困难。当我们在编辑器上创建视图时，`.xml`文件中有 2 个选项卡，“图形布局”和“XML 源”。但是在我更改主题后，我找不到这些标签...

是否有在两个视图之间切换的快捷方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:24:30.820

用于`Alt``F7`在多页编辑器中切换到下一页，`Alt``Shift``F7`以切换到上一页。

# ios - 主屏幕 Web 应用程序和 AD 身份验证

> ID：12859975
> 
> 赞同：0
> 
> 时间：2012-10-12T13:20:13.910
> 
> 标签：ios, html, authentication, cache-manifest, offlineapps

我有一个具有 AD 身份验证的 HTML5 网站。在这个网站内，我有一个网页，我想成为 iPad 上的“网络应用程序”。

我已经准备好 cache.appcache 文件，并且在没有 AD 身份验证的环境中可以正常工作。

当我转到 iPad 上的页面，进行身份验证然后添加到主屏幕时，一切似乎都很好。

当我单击主屏幕快捷方式时，该页面再次要求进行身份验证。我需要这是一个离线应用程序 - 我怎样才能做到这一点？我希望用户必须进行身份验证才能在主屏幕上“安装”网络应用程序，但之后不希望他们再次进行身份验证。

欢迎任何想法！

# php - 努力将值正确插入数据库

> ID：12859977
> 
> 赞同：0
> 
> 时间：2012-10-12T13:20:17.000
> 
> 标签：php, html, sql, database, mysqli

我想使用这种格式的多维数组：value[n][]，其中 n 是问题编号。使用此新设置，您应该最终得到以下输入字段：

```
<input type="hidden" value="A" name="value[1][]">
<input type="hidden" value="B" name="value[1][]">
<input type="hidden" value="A" name="value[2][]">
<input type="hidden" value="C" name="value[2][]">
<input type="hidden" value="E" name="value[2][]"> 
```

请注意，所选值在 value 属性中编码。name 属性只包含该值所属的问题。

因此，上述输入说明的是：

```
question 1: answer: A
question 1: answer: B
question 2: answer: A
question 2: answer: C
question 2: answer: E 
```

我想将这些详细信息插入到下面的“问题”和“答案”数据库表中：

问题表：

```
SessionId    QuestionId

MUL             1
MUL             2 
```

答案表：

```
 AnswerId (auto)  SessionId  QuestionId   Answer
 1                MUL        1            A
 2                MUL        1            B
 3                MUL        2            A
 4                MUL        2            C
 5                MUL        2            E 
```

现在我尝试编写下面的 mysqli/php 代码将这些值插入数据库，但我收到错误并且在想要实现我想要实现的目标方面失败了。我需要帮助才能在相关表中正确插入正确的值。

以下是 php/mysqli 代码：

```
var_dump($_POST);  

$i = 0;
$c = count($_POST['numQuestion']);

for($i = 0;  $i < $c; $i++ ){

/*
    switch ($_POST['gridValues'][$i]){

    case "3": 
    $selected_option = "A-C";
    break;

    case "4": 
    $selected_option = "A-D";
    break;

    case "5": 
    $selected_option = "A-E";
    break;

    default:
    $selected_option = "";
    break;

    }   

    */ needed later on when I insert grid values   

$results = $_POST['value'];
foreach($results as $id => $value) {
$answer = implode(':', $value);

 $questionsql = "INSERT INTO Question (SessionId, QuestionId) 
    VALUES (?, ?)";

    $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');

    if (!$insert = $mysqli->prepare($questionsql)) {
      // Handle errors with prepare operation here
    }

$insert->bind_param("si", $sessid, $id);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();

        $lastID = $id->insert_id;

        foreach($value as $answer) {

         $answersql = "INSERT INTO Answer (SessionId, QuestionId, Answer) 
    VALUES (?, ?)";

      if (!$insertanswer = $mysqli->prepare($answersql)) {
      // Handle errors with prepare operation here
    }  

    $insertanswer->bind_param("sis" $sessid, $lastID, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
          // Handle query error here
        }

        $insertanswer->close();

}

}

} 
```

下面的`var_dump($_POST)`输出：

```
array(3) {
["numQuestion"]=> array(2) { 
  [0]=> string(1) "1" 
  [1]=> string(1) "2" }
["submitDetails"]=> string(14) "Submit Details"
["value"]=> array(4) { 
  ["answerARow"]=> string(1) "A" 
  ["answerCRow"]=> string(1) "C" 
  ["answerBRow"]=> string(1) "B" 
  ["answerERow"]=> string(1) "E" }
} 
```

以下是我收到的错误以及每个错误链接到的代码行：

> 警告：内爆（）：在第 226 行 /.../ 中传递的参数无效

```
$answer = implode(':', $value); 
```

> 注意：尝试在第 250 行的 /.../ 中获取非对象的属性

```
$lastID = $id->insert_id; 
```

> 警告：在第 252 行的 /.../ 中为 foreach() 提供的参数无效

```
foreach($value as $answer) { 
```

> 警告：mysqli_stmt::execute(): (23000/1062): 第 242 行 /.../ 中键 'PRIMARY' 的重复条目 'MUL-0'

以上错误指向`$insert`查询

更多信息：

发布文本输入后我真正想要实现的结构如下：

```
array(2) { 
            ["numQuestion"]=> array(2) { 
                                        [0]=> string(1) "1" 
                                        [1]=> string(1) "2" 
                                       }
           ["submitDetails"]=> string(14) "Submit Details" 
           ["1"] => array(2) {
                                        [0] => string(1) "A"
                                        [1] => string(1) "C"
                                      }
           ["2"] => array(2) {
                                        [0] => string(1) "A"
                                        [1] => string(1) "B"
                                        [2] => string(1) "E"
                                      }
        } 
```

当用户发布文本输入值时，它应该插入问题编号和属于他们相关问题编号的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:28:16.820

一些东西：

1.  `$result`/`$_POST['value']`是一个一维数组，所以`$value`在你的`foreach` 循环中是一个你不能使用的字符串`implode`；
2.  `$lastID = $id->insert_id;`应该是`$insert->insert_id`，我不确定您是否可以在调用该语句之前关闭连接；
3.  `$value`是一个字符串（见第一点），所以你不能`foreach`在那里使用（第三个警告）。

# java - Java 只执行 .sh 文件中的第一个命令

> ID：12859982
> 
> 赞同：0
> 
> 时间：2012-10-12T13:20:32.323
> 
> 标签：java, ubuntu

问题是我正在运行一个 .sh 文件，其中有 3 个使用 Java 的 Runtime.exec("") 方法的命令，但只有 .sh 文件中的第一个命令被执行。

谁能回答可能是什么问题？

这是我的代码。

```
 Process process  =      Runtime.getRuntime().exec("run.sh");
    process.waitFor();
    DataInputStream d = new DataInputStream(process.getInputStream());
                    System.out.println(d.readLine());
                    System.out.println("test"); 
```

run.sh 脚本如下：

```
 #! /bin/sh
     echo "start"
     ls -a
     echo "stop" 
```

它执行 run.sh 但只有第一个命令被执行（echo 命令）。我尝试了不同的命令，但结果保持不变。只有第一个被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:32:58.683

> DataInputStream d = new DataInputStream(process.getInputStream()); System.out.println(d.readLine());

shell 脚本正在执行所有命令，但您只是从包含 shell 脚本的所有输出的进程输入流中读取第一行。相反，读到流的末尾，你会看到所有命令的输出。

```
String output = StringUtils.join(IOUtils.readLines(process.getInputStream)); 
```

[StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)和IOUtils[都是](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)分别来自 apache commons lang 和 commons IO 的实用程序类。

如果您不想使用公共库，那么

```
StringBuilder output = new StringBuilder;
String line;
while ((line = d.readLine()) != null) {
    output.append(line);
}
System.out.println(output.toString()); 
```

# eclipse - Eclipse 中的 Alt-Shift-S 调用什么菜单？

> ID：12859983
> 
> 赞同：1
> 
> 时间：2012-10-12T13:20:35.593
> 
> 标签：eclipse, menu

Eclipse中++`Alt`组合调用什么菜单？如何从主菜单调用它？它大多类似于菜单，但有一些不同。`Shift``S``Source`

![在此处输入图像描述](../Images/1ba5d9e7640fb5b5482db440d38203dd.png)

**源菜单**

源菜单看起来相同但不完全相同：

![在此处输入图像描述](../Images/3e56512c8ee07d4035ef5d2de19e6825.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:26:44.503

是`Source`菜单。如果您在 java 编辑器中单击鼠标右键，您可以看到它的组合键，如果您将鼠标悬停在上面，`Source`您可以看到它是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:20:33.987

关于视觉差异：如果从主菜单调用，禁用的菜单项保持可见（但呈灰色），因为如果同一菜单项的垂直位置一直在变化（取决于有多少其他菜单），您会很困惑以上项目被禁用）。

另一方面，上下文菜单在屏幕的任意位置调用，因此您不会注意到某个菜单项相对于完整上下文菜单的“跳跃”偏移。这就是为什么许多菜单项不仅在上下文菜单中被禁用，而且设置为*invisible*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:24:57.263

那是源菜单， `Alt`+ 大写`S`

# matlab - MATLAB：按条件排序矩阵

> ID：12859985
> 
> 赞同：1
> 
> 时间：2012-10-12T13:20:36.337
> 
> 标签：matlab, sorting, matrix

我想对一个 3X3 的矩阵进行排序：

```
mat =
    129    14     20
    42     51     79
    66     105    27 
```

我希望第一行是第一个元素高于他的行中的第二个和第三个元素的行。第二行将是第二个元素比他的行中的第一个和第三个元素更高的行。第三行将是第二个元素比他的行中的第一个和第二个元素更高的行。

例如，结果是：

```
mat =
    129    14    20      (because 129 > 14 and 129 > 20)
    66     105   27      (105 > 66 and 105 > 27)
    42     51    79      (79 > 51 and 79 > 42) 
```

我知道我可以传递矩阵的元素并做到这一点，但是函数“排序”可能包含对我有帮助的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:26:01.570

```
mat = [ 129    14     20
         42    51     79
         66   105    27];

[Y,I] = max(mat, [], 2);

mat = mat(I, :) 
```

# javascript - 将函数应用于 jQuery 中的单个元素或集合之间的效率是否存在差异？

> ID：12859988
> 
> 赞同：3
> 
> 时间：2012-10-12T13:20:49.920
> 
> 标签：javascript, jquery, optimization

假设您可以选择将函数应用于单个 DOM 元素或它们的列表：

个人：

```
$('#element1').click(function () { 
    $(this).hide(); 
    return false; 
});
$('#element2').click(function () { 
    $(this).hide(); 
    return false; 
});
$('#element3').click(function () { 
    $(this).hide(); 
    return false; 
}); 
```

与集合：

```
 $('#element1, #element2, #element3').click(function () { 
    $(this).hide(); 
    return false; 
}); 
```

除了编写更少的代码之外，将函数应用于集合是否有任何计算优势？代码会运行得更快吗？

我问的原因是因为我的元素是 JS 对象，我需要单独处理它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:33:04.583

实际上，不，没有明显的区别。如果你非常关注微优化，那么单独绑定它们的运行时间大约是多重选择器的 65%，但是，说真的，只需使用多重选择器 - 它更具可读性和可维护性。

来源：http: [//jsperf.com/jquery-selector-performance-problems](http://jsperf.com/jquery-selector-performance-problems)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:31:33.757

我认为使用第二种方法不会有任何性能改进，如果有任何可以忽略不计的话。

但是，如果您正在查看内存概念，则第二种方法可能会很好，因为只创建了一个内部函数，并且所有三个元素都使用了相同的引用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T13:38:42.317

为什么不只是将代码应用到一个类上并将这个类添加到你的 3 个元素中:)

```
$('.hide').click(function () { 
    $(this).hide(); 
    return false; 
}); 
```

如果您希望不同元素具有相同的行为，我认为向元素添加类比为每个元素注册单击事件更好。

你将拥有这个 html

```
<a href="#" id="element1" class="hide"></a>
<a href="#" id="element2" class="hide"></a>
<a href="#" id="element3" class="hide"></a> 
```

# javascript - 如何在 if 语句中组合鼠标移出功能

> ID：12859990
> 
> 赞同：0
> 
> 时间：2012-10-12T13:20:59.213
> 
> 标签：javascript, jquery, drop-down-menu, jquery-events

我正在创建一个菜单并使用 Javascript，因此当他们单击其中一个菜单选项时，它会使其他选项变灰并显示一个子菜单。我的目标是在函数中添加一个 if 语句，以便当他们在子菜单和他们单击的选项上“鼠标移出”时，菜单将恢复正常。是否可以有这样的 if 语句：

```
IF $("Menu2").bind('mouseout',____) AND $("Menu2Sub").bind('mouseout',____) then.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:25:12.703

只需创建一个函数，该函数负责将其他选项变灰并显示子菜单，并将其作为 mouseout 事件附加到 ID，如下所示：

```
$("#id").mouseout(function); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:25:51.583

在每个`Menu`. 当两个标志都被触发时，执行所需的功能：

> 菜单将恢复正常

# extjs - ExtJs 通过以字符串开头的 id 选择组件

> ID：12859993
> 
> 赞同：7
> 
> 时间：2012-10-12T13:21:06.657
> 
> 标签：extjs

我需要通过单击按钮动态创建组件。我的限制是：

1.  它将有一个以固定字符串（如“myComp_”）开头的 Id，后跟一个随机数
2.  在任何时候，只有一个组件的 id 以“myComp_xxx”开头

所以在创建组件之前，我必须检查之前是否有任何创建并删除它......我的问题从这里开始。Ext.getCmp() 想要特定的 id。但我只有那个固定的字符串：myComp_...

有什么办法可以让之前创建的组件？？？

在此先感谢并为我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:59:42.133

对于 ExtJs 4.X 使用`Ext.ComponentQuery.query('*[id^=myComp_xxx]');`

对于 ExtJs 3.X，您可以使用以下

```
var el = Ext.query('*[id^=myComp_xxx]');
var cmp = Ext.getCmp(el.id); 
```

或者（这个我没有亲自尝试过，但我认为它应该可以工作）如果组件是您可以访问的组件的子组件，那么：

`var el = parentComp.find("action","btn");`

`action : btn`并设置在按钮配置中调用的属性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T13:35:12.290

我认为您正在寻找的是[DomQuery](http://dev.sencha.com/playpen/docs/output/Ext.DomQuery.html)。

前任：

```
Ext.query("*[id^=myComp_xxx]") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:45:13.940

你需要使用这个：[Ext.getCmp(id)](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-getCmp)

```
Ext.getCmp("myComp_xxx"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-13T16:12:48.147

听起来你应该使用普通的组件查询东西——一般来说使用 id 不是一个好主意。您可以按 xtype 和 itemId 查询（您可以手动分配）。

以下

```
Ext.ComponentQuery.query('grid form'); 
```

会找到所有带有 xtype 网格的东西，它们里面有表格。

```
Ext.ComponentQuery.query('grid #okButton'); 
```

而这里的 # 表示查找其中包含 itemId 'okButton' 的网格。

您可以将其嵌套到您需要的任何级别，并使用其他运算符更具体，正如其他人正确指出的那样，您可以在组件上使用 up 和 down 来相对于当前组件执行此操作。值得注意的是，当您使用 up 和 down 时，您只需得到第一个结果，而不是返回一个包含所有结果的数组。

有关详细信息，请参阅[文档](http://www.objis.com/formationextjs/lib/extjs-4.0.0/docs/api/Ext.ComponentQuery.html)。

另请参阅此[不良做法列表中的](http://www.sencha.com/blog/top-10-ext-js-development-practices-to-avoid)第 6 点，以了解更多原因

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T15:36:14.463

如果您知道将要创建组件的“位置”，另一种选择是使用这些`up()/down()`方法。

例如，如果您有一个按钮并想要获取它包含在点击处理程序中的表单，您可以执行以下操作：

```
function myClickHandler(btn) {
     var form = btn.up('form');

     //do something with form 
} 
```

# javascript - dojox.grid.enchancegrid 删除行，从服务器但不从网格中删除的行

> ID：12859998
> 
> 赞同：0
> 
> 时间：2012-10-12T13:21:24.197
> 
> 标签：javascript, datagrid, dojo

我有我的 enchancegrid 命名为`unitsGrid`正常工作。我可以添加行和删除行，但是当我删除行时，我遇到了一些我无法弄清楚的问题，因此行在删除时不会从我的 unitsGrid 中消失。我一直在看代码几个小时，但我似乎无法弄清楚。提前致谢。

```
dojo.connect(unitsGrid, "onRowClick", unitsGrid, function(evt, rowIndx, fieldIndx){

            var idx = evt.rowIndex;
            var item = this.getItem(idx);
            var id = unitsGrid.store.getValue(item, "id");

            if(evt.cellIndex == 3) {
                var con = confirm("Är du säker på att du vill radera denna transaktion?");
                if(con == true) {
                    dojo.xhrPost({
                        url: url,
                        content: {
                            id: id
                        },
                        handleAs: "text",
                        load: function(data) {
                            var selectedRows = grid.selection.getSelected();
                            if (selectedRows.length) {
                            // Iterate through the list of selected items.
                            // The current item is available in the variable
                            // "selectedItem" within the following function:
                                dojo.forEach(selectedRows, function(selectedItem) {
                                    if (selectedItem !== null) {
                                        // Delete the item from the data store:
                                        try {
                                            unitsGrid.store.deleteItem(selectedItem);
                                        }
                                        catch(error) {
                                            console.log("Returned error: " + error.message);
                                        }
                                    } // end if
                                }); // end forEach
                            } // end if
                            console.log("Return value: " + data);
                        },
                        error: function(error) {
                            console.log(error);
                        }
                    }); // end xhrPost
                }
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:46:09.013

只需调用 dijit.byId('unitsGrid').removeSelectedRows();