# StackOverflow 问答 15375000-15375999

# javascript - phantomjs/examples/waitfor.js 中可能存在的错误

> ID：15375000
> 
> 赞同：0
> 
> 时间：2013-03-13T00:40:41.903
> 
> 标签：javascript, phantomjs

我正在测试[https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js](https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js)并且很好奇我是否在脚本中发现了错误，做错了什么，或者可能没有运行 phantomjs 的正确设置或标志。

运行脚本时，它在我运行它的前 2-3 次时效果很好。然而，在那些 2-3x 之后，我得到了“'waitFor()' Timeout”。如果我运行 4 倍或 15 倍，就会发生这种情况。无论我遇到同样的问题，我都可以在测试之间等待 10 分钟或一天。我什至切换了 url 并更改了代码以反映页面上的不同 div。我仍然得到“'waitFor（）超时”。我设置了一个虚拟机并测试了不同的站点，经过 2-3 次尝试，它再次超时。

我可以运行其他脚本并抓取相同的页面，它们会正常工作，但是，使用这个脚本，它只能在持续超时之前工作 2-3 倍。其他人可以证实这一点吗？

# c# - XNA 处理按键组合

> ID：15375001
> 
> 赞同：3
> 
> 时间：2013-03-13T00:40:50.623
> 
> 标签：c#, keyboard, xna-4.0

我已经阅读了一些处理此问题的文章，但是在尝试实施了一些之后，总是遇到同样的问题，

快速说明：**这是家庭作业**

我正在使用 XNA 为我的游戏设计课重新创建 Super Smash Brothers（N64 风格）。现在我有 2 个与 SSB 密切相关的问题，任何熟悉 SSB 的人都会知道组合攻击，即按“Forward A”、“Up B”等。我现在有一个正在工作的 Yoshi，你有时甚至可以关闭他的组合，但是我发现的主要问题是，除非在完全相同的时刻按下键，否则另一个动作，即向上 A，跳跃会消失

目前我的 if 语句是....

```
if (state.IsKeyDown(Keys.Up) && state.IsKeyDown(Keys.B))
{
  actionComponent.curAction.secondaryAction = SecondaryAction.Stand;
  actionComponent.curAction.primaryAction = PrimaryAction.Up_B; 
}
else if (state.IsKeyDown(Keys.Up) && state.IsKeyDown(Keys.A))
{
  //Console.WriteLine("This is C#");
  actionComponent.curAction.primaryAction = PrimaryAction.Up_A;
  actionComponent.curAction.secondaryAction = SecondaryAction.Smash;
  spriteComponent.curColumn = 0;
}
else if (state.IsKeyDown(Keys.Up))
{
  actionComponent.curAction.secondaryAction = SecondaryAction.Jump;
  actionComponent.curAction.primaryAction = PrimaryAction.None;
} 
```

对于每个可能的动作，我显然有更多，但它们都被安排好，因此单个按键是最后一个按键，因此可以注册其他按键，但除非我同时按下它们，否则它不会注册按键 - 一个我尝试过的几个想法，在 if 语句中处理箭头键，让线程休眠一会儿，然后如果箭头键和按钮（即 A 被按下）则小鸡）

我的第二个问题，我正在讨论是否实施，但如果我这样做了，SSB 玩家会知道在操纵杆上稍微向前按下，然后按 A 会快速踢/刺，但按键会更硬（操纵杆移动得更远/可能更快 w/ e）将创建一个粉碎动作，以及我如何实现一个系统来识别轻重按键之间的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:16:21.517

您的问题是 XNA 默认为 60Hz 循环，因此如果您的游戏时钟足够快，那么您每 16 毫秒检查一次按键。这为您提供了一个非常小的窗口，可以在其中同时按下两个键 - 如果两个键的下降时间间隔超过大约 10 毫秒，那么它们可能会以两个单独的更新循环结束，因此被计为单个按键而不是组合移动. 人类的反应时间约为 150-300 毫秒，您完全可以在人类输入的误差范围内。

我可能会考虑使用输入缓冲区；`List`类似的东西`KeyValuePair`。每次循环时，您都将当前按下的按钮与当前时间一起添加到缓冲区，删除时间早于某个时间跨度的任何内容，然后检查缓冲区的内容是否与任何组合移动匹配。这允许瞬时组合以及顺序组合（例如，`A, A, Left+B`会起作用）。您可能需要考虑某种方式来取消同时由单个按键触发的任何移动 - 如果您识别出其中的一个组合，`left, jump&punch`那么您将希望以某种方式阻止它们跳跃和出拳，而是执行组合触发的飞行上勾拳.

至于轻/重按键，我认为这不可能按照您的想法进行-计算机键盘是非常简单的设备；这些按钮是简单的开/关单元，没有关于压力或速度的信息。您可以查看按键之间的距离 - 如果您使用所描述的缓冲区方法，那么您可以使用按键存储的时间来获取按键之间的时间。如果该时间长于某个间隔，则使用较弱或较慢的移动。

# php - 更改输入文件的值

> ID：15375004
> 
> 赞同：1
> 
> 时间：2013-03-13T00:41:00.557
> 
> 标签：php, html, input

以下两个问题阐明了`input file`由于安全原因无法更改的值。

*   [改变 <input type=file"> 的值](https://stackoverflow.com/questions/8120084/changing-value-of-input-type-file)
*   [如何在 <input type="file" /> 中显示文件路径？](https://stackoverflow.com/questions/1734526/how-to-show-file-path-in-input-type-file?rq=1)

`input text`在 PHP 中，当验证表单时，一种常用的方法是在单击按钮之前重新填写输入的值`submit`，以便客户端知道他插入了什么，或者只是将值保留在字段中，这是客户所期望的。（每次出现特定错误时，他都不必重新填写表格）。

所以我们使用以下内容：

```
<input type="text" name="title" id="title" maxlength="100" value="<?php echo htmlspecialchars($title);?>" /> 
```

因此，由于我无法更改 的值`input file`，所以我可以用提供的路径重新填充它`$image['tmp_name']`，这意味着每次验证出错时客户端都必须重新上传（或重新浏览）图像，不是有什么可能的方法来保持这个价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:46:16.153

您可以存储文件而不管表单中的其他验证错误（显然只有文件本身有效），然后用文件详细信息替换文件上传字段（例如列出文件名和大小）。

实际上，与其替换该字段，我建议让他们选择在其位置上传不同的文件，如果他们愿意的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:47:02.030

将上传的文件存储在服务器上。

生成一个复选框，其值引用与该文件关联的 id。使其默认选中。

如果他们不想重复使用同一个文件，请告诉用户取消选中它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:02:41.033

使用 javascript，您可以阻止提交表单，直到所有字段都得到验证。

我推荐包含[jQuery Validation Engine](https://github.com/posabsolute/jQuery-Validation-Engine)教程。[演示](http://www.position-relative.net/creation/formValidator/)

您还可以使用[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)为图像上传器添加一些样式。

当然，必须在服务器上验证某些字段，这就是您可以使用验证引擎发布 ajax 请求的原因。

```
"ajaxUserCall": {
    "url": "ajaxValidateFieldUser",
    "extraData": "name=eric",
    "alertText": "* This user is already taken",
    "alertTextOk": " * User is valid",
    "alertTextLoad": "* Validating, please wait"
}, 
```

一些没有重定向或刷新的服务器端验证示例：[Demo](http://www.position-relative.net/creation/formValidator/demos/demoAjaxInlinePHP.html)

# c# - 字符串修剪开始

> ID：15375008
> 
> 赞同：0
> 
> 时间：2013-03-13T00:42:11.383
> 
> 标签：c#, string

此代码提供正确的结果，

```
Locations[i] = Locations[i].TrimStart(@"..\Config\Locations".ToCharArray()); 
```

但不是这个

```
String loc = Properties.Settings.Default.pathTo + @"\Config\Locations";
Locations[i] = Locations[i].TrimStart(loc.ToCharArray()); 
```

不起作用。我想`Properties.Settings.Default.pathTo`一定要逃走，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:50:41.523

`TrimStart`从字符串的开头删除*单个字符*，它不会删除字符串。换句话说，您的示例将从一开始就删除所有点、斜杠、`'C'`s、`'o'`s、`'n'`s 等 - 它们不一定必须按照源字符串的顺序。

我想你想要这样的东西：

```
if(Locations[i].StartsWith(loc);
    Locations[i] = Locations[i].Substring(loc.Length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:57:35.843

我希望你明白这`ToCharArray`意味着这些字符将被删除`in any order`（只要中间没有其他字符）......

你可能真的想做这样的事情（虽然我可能错了）

```
 public static string StripStart(this string text, string value, bool ignoreCase = false)
    {
        // if(text.EndsWith...
        if (text.StartsWith(value, ignoreCase, CultureInfo.InvariantCulture))
            return text.Substring(value.Length);
        return text;
    } 
```

这非常简单，但应该可以

希望能帮助到你

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T01:07:51.640

我觉得NSGaga是对的，希望对你有帮助

```
public static string StripStart(this string text, string value, bool ignoreCase = false)
{
    if (text.StartsWith(value, ignoreCase, CultureInfo.InvariantCulture))
        return text.Substring(value.Length);
    return text;
} 
```

# python - 我正在寻找一种在python中生成代码的简单方法

> ID：15375009
> 
> 赞同：3
> 
> 时间：2013-03-13T00:42:15.647
> 
> 标签：python, scripting

所以我基本上有一个非常大的具有相似名称的元素列表（c0、d0、c1、d1 ...等）

我想知道是否有一种更简单的方法可以本质上生成一个脚本来使用字符串生成这些元素中的每一个

这会将字符串“c0”更改为实际变量 c0

由于与我的项目相关的原因，我想避免使用列表而宁愿生成代码

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:47:16.833

首先，不要采取这种错误的方式，但我假设您是基于您问题中的代码的 Python 新手：它不是有效的 Python。到处都有大量优秀的 Python 教程——阅读 Python 函数、内置函数和一般哲学。它是一种非常强大的语言，但看起来你继承的脚本......不是很 Pythonic。确保不要从中学到关于语言的错误信息。

因此，理想情况下，您希望所有这些变量都收集在某种数据结构中。Python 有很多不同的类型。

如果您需要做的只是比较一对固定数据集中的每个索引，则可以使用元组：它们是有序的、不可变的集合，暗示了一些结构。假设您有*n*对数据：您有两个元组，我们称它们为*c*和*d*，但如果可以的话，使用描述性名称显然更好。它看起来像这样：

```
c = (c0, c1, c2, ... cn)
d = (d0, d1, d2, ... dn) 
```

你会将它们与以下内容进行比较：

```
for i in range(len(c)):
    if c[i] == d[i]:
        print '%d: match' % i
    else:
        print '%d: no match' % i 
```

（两个注意事项：len() 找到对象的长度，range() 创建一个可交互的序列——在你的问题使用 len() 的地方，你想在 Python 中使用 range()。另外，%d 的东西是只是字符串格式。）

我的假设是，您需要做的还不止这些。一方面，如果写这个东西的人认为将数据存储为数百个唯一的全局变量是个好主意，我不会认为他会考虑在运行时执行诸如确保每个变量存在并保存数据等事情因此，在这种情况下，我个人会使用字典，因为它为您提供了更多的灵活性。

每个 dict 都是 key:value 对的集合。字典是无序的，所以你不能直接比较每个字典中的第一项——没有第一项。您*可以*做的是使用整数序列作为键，然后遍历该序列的范围。并且您可以执行诸如检索具有默认值的值之类的操作，因此如果 c64 从未被声明过，您将不会使程序崩溃：

```
c = {0:'a', 1:'b', 2:'c', 3:'d', 4:'r'}
d = {0:'a', 1:'B', 2:None, 3:'d'} 
```

然后是这样的：

```
for i in range(len(c)):
    if c.get(i, 'No value') == d.get(i, 'No value'):
        print '%d: match' % i
    else:
        print '%d: no match' % i 
```

尽管您通常会从类似`c[4]`or的字典中检索数据`d['apple']`。Get() 让我们使用默认值（“无值”），以防*i*的某些值丢失。

（另一个假设：每对数据代表一些真实的数据关系，因此迭代次数在语义上是一个标签，就像它是一个索引一样。在我看来，键通常应该是标签而不是值本身。）

您在评论中建议的将现有变量收集到这些结构之一中可以正常工作。只需打开 Notepad++ 并用您的源代码进行一些智能搜索/替换，应该会花费您十分钟。如果您找到适合您需要的另一种结构，您最终会得到`c = (c0, c1, c2, etc)`or或不同的东西。`c = {0:c0, 1:c1, etc}`但我真正认为您应该做的是重构整个脚本，以便您比较的数据存储在某种对象中，该对象反映它是什么以及您如何使用它。Python 将让你在这里发挥真正的魔力：通过一些繁琐的工作，你可以做一些简单的事情，比如找到*c*和*d*`c == d`的联合或不相交集，在某些迭代中操作数据值，或者任何你需要的事情。

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T00:54:02.347

看[`getattr`](http://docs.python.org/2/library/functions.html#getattr)、[`locals`](http://docs.python.org/2/library/functions.html#locals)和[`globals`](http://docs.python.org/2/library/functions.html#globals)。

如果您的变量是函数的本地变量，您可以这样做。如果您的变量是全局使用的`globals()`。

```
for i in len(100):
    first_name = "c{0}".format(i)
    second_name = "d{0}".format(i)
    if(locals()[first_name] == locals()[second_name]):
        print("hello") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T00:58:32.533

您可以使用 eval 函数：

```
for i in xrange(100):
    if eval('c%d' % i) == eval('d%d' % i):
        print "Hello!" 
```**

# c++ - 使用 ArrayList 实现选择排序

> ID：15375020
> 
> 赞同：0
> 
> 时间：2013-03-13T00:43:35.070
> 
> 标签：c++, sorting, inheritance, reference, arraylist

尝试使用数组列表实现选择排序。但是，我似乎无法从 main 调用我的任何列表函数。

执行此代码时，我收到以下错误：

```
arraylist.cpp: In function ‘int main()’:
arraylist.cpp:92:49: error: no matching function for call to ‘List::retrieve(int, const char [4], bool&)’
arraylist.cpp:47:6: note: candidate is: void List::retrieve(int, ListItemType&, bool&) const 
```

我不太确定如何定义 ListItemType 函数。

我班上的其他人使用的功能与我在他们的主要功能中使用的功能相同，但他们的方法似乎没有问题。

一点帮助会很好。

标题：

```
/** @file ListA.h */
#include <string>
using namespace std;
const int MAX_LIST = 10;
typedef string ListItemType;
class List
{

public:
   List();
   bool isEmpty() const;
   int getLength() const;
   void insert(int index, const ListItemType& newItem, bool& success);
   void retrieve(int index, ListItemType& dataItem, bool & success) const;
   void remove(int index, bool& success);
private:
    ListItemType items[10];
    int size;
    int translate(int index) const;
}; 
```

执行：

```
 /** @file ListA.cpp */

#include "ArrayList.h"  // header file
#include <iostream>
#include <fstream>

List::List() : size(0)
{
}
bool List::isEmpty() const
{
   return size == 0;
}
int List::getLength() const
{
   return size;
}
void List::insert(int index, const ListItemType& newItem,
bool& success)
{
success = (index >= 1) &&
(index <= size + 1) &&
(size < MAX_LIST);
   if (success)
   {
      for (int pos = size; pos >= index; --pos)
         items[translate(pos + 1)] = items[translate(pos)];
      items[translate(index)] = newItem;
      ++size;  // increase the size of the list by one
   }  
}  

void List::remove(int index, bool& success)
{
   success = (index >= 1) && (index <= size);
   if (success)
   {
      for (int fromPosition = index + 1;
       fromPosition <= size;
       ++fromPosition)
         items[translate(fromPosition - 1)] = items[translate(fromPosition)];
      --size;  // decrease the size of the list by one
   }  // end if

}  // end remove

void List::retrieve(int index, ListItemType& dataItem,
bool& success) const
{
   success = (index >= 1) && (index <= size);
   if (success)
      dataItem = items[translate(index)];
}

int List::translate(int index) const
{
   return index - 1;
}
 int main()
 {
 int var1 = 1;
 int numberofitems;
 int n = 0;
 int p = 0;
 cout << "Please enter the number of data items:" << endl;
 cin >> numberofitems;
 cout << endl;
 cout << "Please enter the data items, one per line:" << endl;
 int listofitems[10];
 //string mainlistitemptype = "int";
 List myArrayList;
 cout << myArrayList.getLength() << endl;
        if (myArrayList.isEmpty())  // tests before
    {
        cout << "This list is empty \n" << endl;
    }
    else
    {
        cout << "List is not empty! \n"<< endl;
    }
 //myArrayList.size(numberofitems);
 bool mainsucc = false;
 int mainarraylistsize = myArrayList.getLength();
 for (int i = 0; i<numberofitems; i++)
 {
 cout << "Enter number " << i + 1 << " : " ;
 cin >> listofitems[i];
 myArrayList.insert(listofitems[i], "int", mainsucc);
 }
 for (int i=0; i<mainarraylistsize; i++)
 {
 cout << myArrayList.retrieve(0, "int", mainsucc);
 }
 return 1;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:47:38.773

有几个错误：

```
int listofitems[numberofitems]; 
```

`numberofitems`需要是一个[常量](https://stackoverflow.com/a/2448431)，我猜因为`ListItemType`它`string`应该`listofitems`是一个 s 数组`string`。这是一个功能：

```
List myArrayList(); 
```

您打算实例化 a `List`，因此它应该是：

```
List myArrayList ; 
```

这个：

```
int mainarraylistsize = (myArrayList.getLength); 
```

应该：

```
 int mainarraylistsize = myArrayList.getLength() ; 
```

并且这个参数列表不正确：

```
 myArrayList.insert(listofitems[i], 1, mainsucc); 
```

参数二应该是一个`ListItemType`类型，但你传入的是一个`int`，这可能是你想要的：

```
 myArrayList.insert(i, listofitems[i], mainsucc); 
```

# css - 在另一个没有尺寸的情况下垂直/水平居中图像

> ID：15375022
> 
> 赞同：17
> 
> 时间：2013-03-13T00:43:45.390
> 
> 标签：css, image, responsive-design, overlay, center

我正在尝试使图像看起来有一个居中的播放按钮。但是，我不知道主图像的确切大小，因为它是动态生成的。

现在，叠加图像（播放按钮）位于左上角。如何让播放按钮水平和垂直居中显示？

谢谢你。

```
<div class="videobox">
<img src="/mainimage.png">
<span></span>
</div>

.videobox { position: relative; }

.videobox span {
position:absolute;
left: 0px;
bottom: 0px;
width: 100%;
height: 100%;
z-index: 1;
background: transparent url(../img/elements/playbutton.png) no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-13T00:59:46.513

```
.videobox span {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: 1;
  background: url(../img/elements/playbutton.png) no-repeat center center;
} 
```

# jquery - 自定义方法成功验证后，jQuery Validate 错误容器不会消失

> ID：15375027
> 
> 赞同：2
> 
> 时间：2013-03-13T00:44:51.003
> 
> 标签：jquery, jquery-validate

使用 jQuery Validate 插件，我有一个自定义方法，可确保至少三分之二的复选框已被选中（根据[这个问题](https://stackoverflow.com/questions/15238958/ensure-at-least-one-from-a-group-of-three-checkboxes-is-checked-using-jquery-val/15240802?noredirect=1#comment21506643_15240802)）。

这工作正常，除了一旦选中了其中一​​个复选框，错误容器不会消失（即使错误消息确实消失并且表单将成功提交）。错误容器仍然停留在“显示：块”而不是恢复为“显示：无”。

这是一个[**JSFiddle**](http://jsfiddle.net/u4WM4/4/)演示了这一点（它是我表单的简化版本）。如果选中了三个复选框中的一个，则即使没有错误消息，错误容器也会保留在原处。如果选中所有三个复选框，则错误消息容器会消失。因此，我将不胜感激有关如何根据自定义方法在仅选中一个复选框后使错误容器消失的任何想法，谢谢。

这是我的 HTML：

```
<form class="my_form" method="post" action="#">

  <div class="error-container">
    <ul>
    </ul>
  </div><!--error-container-->

    <p><label>My checkbox 1</label>
    <input class="my_checkbox_group" id="my_checkbox_1"
    name="my_checkbox_1[]" type="checkbox" value="Yes" /></p>
    <p><label>My checkbox 2</label>
    <input class="my_checkbox_group" id="my_checkbox_2"
    name="my_checkbox_2[]" type="checkbox" value="Yes" /></p>
    <p><label>My checkbox 3</label>
    <input class="my_checkbox_group" id="my_checkbox_3"
        name="my_checkbox_3[]" type="checkbox" value="Yes" /></p>
    <input type="submit" value="Submit" />
</form> 
```

这是我的CSS：

```
input.error { background: #fdf3f3; border: 1px solid #ff3333; color: #ff3333; }
.error-container    { background: #fdf3f3; border: 1px solid #ff3333; clear: both; display: none; overflow: auto; padding: 10px; }
.error-container ul { margin-bottom: 0; }
.error-container label { float: none; font-weight: normal!important; width: auto; } 
```

这是我的 JS：

```
$(document).ready(function () {

    $.validator.addMethod("checkboxrule", function (value, element) {
        return ($('#my_checkbox_1').is(':checked') || $('#my_checkbox_2').is(':checked') || $('#my_checkbox_3').is(':checked'))
    }, "Select at least one of these three");

    $('.my_form').validate({ // initialize the plugin
        errorContainer: ".error-container",
        errorLabelContainer: ".error-container ul",
        wrapper: "li",
        focusInvalid: false,
        ignore: "",
        groups: {
            somename: "my_checkbox_1[] my_checkbox_2[] my_checkbox_3[]"
        },
        rules: {
            'my_checkbox_1[]': {
                checkboxrule: true
            },
            'my_checkbox_2[]': {
                checkboxrule: true
            },
            'my_checkbox_3[]': {
                checkboxrule: true
            }
        },
        submitHandler: function (form) { // for demo
            alert('valid form submitted'); // for demo
            return false; // for demo
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:24:54.630

~~将以下[`success`回调函数](http://docs.jquery.com/Plugins/Validation/validate#toptions)添加到您的`.validate()`选项中。~~

 ~~```
success: function() {
    $('.error-container').hide();
}, 
```~~ 

~~**演示：http: [//jsfiddle.net/M2gp4/](http://jsfiddle.net/M2gp4/)**~~

* * *

**顺便说一句**：如果您想验证隐藏字段，该`ignore`选项的正确格式不是`ignore: ""`.

应该是`ignore: []`。

看到这个答案： [https ://stackoverflow.com/a/8565769/594235](https://stackoverflow.com/a/8565769/594235)

* * *

**编辑**：

正如您最初编写代码时，错误容器按预期工作，但仅当所有三个复选框都被选中时。

更进一步，当`groups`删除该选项时，可以更好地看到这个问题。 [在这个新的 jsFiddle](http://jsfiddle.net/M2gp4/2/)中，您可以看到三个消息以及当您单击所有三个复选框时会发生什么。在您单击 之前，该框甚至仍保留在有效表单上`submit`。在单击组中的所有复选框之前，插件不会对此“组”进行验证测试。这很像将所有三个复选框视为单个输入元素。

一种可能的解决方案是每次单击任何一个复选框时都使用[该`.valid()`方法强制进行验证测试。](http://docs.jquery.com/Plugins/Validation/valid)

```
$('.my_checkbox_group').on('click', function(){
    $('.my_form').valid();
}); 
```

**演示：http: [//jsfiddle.net/M2gp4/3/](http://jsfiddle.net/M2gp4/3/)**

# actionscript-3 - 无法访问 Key.isDown

> ID：15375029
> 
> 赞同：0
> 
> 时间：2013-03-13T00:44:55.717
> 
> 标签：actionscript-3, properties, keyboard

因此，当我运行下面的脚本时，它在编译器错误中显示“未定义属性键的访问”我正在完成一个教程，但试图自己重新创建它。如果我将教程中的源代码带入 Flash，则脚本运行良好，没有问题。我需要以某种方式定义或导入 Key 吗？我以为它是像 Stage.height 这样的内置东西

```
function runGame():void{
    if(Key.isDown(Key.UP) || Key.isDown(87)){
        if(velocityY<velocityYMax){
            velocityY+=acceleration;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:05:08.530

使用此导入！

```
import flash.ui.Keyboard; 
```

# xpath - 在 Hive 中分解一行 XML 数据

> ID：15375031
> 
> 赞同：8
> 
> 时间：2013-03-13T00:44:58.273
> 
> 标签：xpath, hadoop, hive

我们将 XML 数据作为名为 XML 的单个字符串列加载到 Hadoop 中。我们正在尝试检索数据级别并进行规范化或将其分解为单行以进行处理（您知道，就像一个表格！）尝试了分解功能，但没有得到我们想要的。

## 示例 XML

```
<Reports>
<Report ID="1">
<Locations>
  <Location ID="20001">
    <LocationName>Irvine Animal Shelter</LocationName>
  </Location>   
  <Location ID="20002">
    <LocationName>Irvine City Hall</LocationName>
  </Location>   
  </Locations>
</Report>
<Report ID="2">
<Locations>
  <Location ID="10001">
    <LocationName>California Fish Grill</LocationName>
  </Location>   
  <Location ID="10002">
    <LocationName>Fukada</LocationName>
  </Location>   
  </Locations>
</Report>
</Reports> 
```

## 查询 1

我们正在查询更高级别的 Report.Id，然后是子级的 id 和名称（Locations/Location）。下面给了我们所有可能组合的基本笛卡尔积（在这个例子中，8 行而不是我们希望的 4 行。）

```
SELECT xpath_int(xml, '/Reports/Report/@ID') AS id, location_id, location_name 
FROM   xmlreports 
LATERAL VIEW explode(xpath(xml, '/Reports/Report/Locations/Location/@ID')) myTable1 AS location_id 
LATERAL VIEW explode(xpath(xml, '/Reports/Report/Locations/Location/LocationName/text()')) myTable2 AS location_name; 
```

## 查询 2

试图组合成一个结构然后分解，但这会返回两行和两个数组。

```
SELECT id, loc.col1, loc.col2
FROM (
SELECT xpath_int(xml, '/Reports/Report/@ID') AS id, 
       array(struct(xpath(xml, '/Reports/Report/Locations/Location/@ID'), xpath(xml,     '/Reports/Report/Locations/Location/LocationName/text()'))) As foo
FROM   xmlreports) x
LATERAL VIEW explode(foo) exploded_table as loc; 
```

结果

```
1   ["20001","20002"]       ["Irvine Animal Shelter","Irvine City Hall"]
2   ["10001","10002"]       ["California Fish Grill","Irvine Spectrum"] 
```

我们想要的是什么

```
1   "20001" "Irvine Animal Shelter"
1   "20002" "Irvine City Hall"
2   "10001" "California Fish Grill"
2   "10002" "Irvine Spectrum" 
```

似乎是一件很常见的事情，但找不到任何例子。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T12:08:03.430

我看到了两种解决这个问题的方法。

1.  创建自定义 UDF，它将解析一个 XML 元素并返回您需要的数组。在那之后爆炸阵列。

2.  使用子选择。

我使用子选择实现了解决方案 2。即使使用 subselects Hive 是“足够聪明”来为此创建一个 map-reduce 作业，所以我认为你不会有性能问题。

```
SELECT 
 l2.key,
 l2.rid,
 l2.location_id,
 location_name
FROM (
 SELECT 
  l1.key as key,  
  l1.rid as rid, 
  location_id as location_id,
  l1.xml as xml
 FROM (
   SELECT key, xml, rid
   FROM xmlreports
   LATERAL VIEW explode(xpath(xml, '/Reports/Report/@ID')) rids as rid
 ) l1
 LATERAL VIEW explode(xpath(l1.xml, concat('/Reports/Report[@ID = ',l1.rid, ']/Locations/Location/@ID'))) locids as location_id
) l2
LATERAL VIEW explode(xpath(l2.xml, concat('/Reports/Report[@ID = ',l2.rid, ']/Locations/Location[@ID = ', l2.location_id ,' ]/LocationName/text()'))) locnames as location_name; 
```

在您提供的 XML 文件上运行此查询后，我得到了您正在搜索的结果

```
1   1   20001   Irvine Animal Shelter
1   1   20002   Irvine City Hall
1   2   10001   California Fish Grill
1   2   10002   Fukada 
```

希望这能解决您的问题。

问候，迪诺

# kendo-ui - 如何删除剑道ui上传文件名中的删除按钮

> ID：15375032
> 
> 赞同：0
> 
> 时间：2013-03-13T00:45:02.627
> 
> 标签：kendo-ui

我试图删除剑道 UI 上传文件名中的删除按钮。请指教。

我已经从帖子中尝试过这个但没有工作

```
.k-upload .k-upload-action {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:42:16.127

我已经对此进行了测试，它对我有用，所以我想你在 CSS 特异性的某个地方遇到了问题。尝试使 CSS 规则更具体，例如：

```
ul.k-upload-files .k-upload-action {
    display: none;
} 
```

# javascript - 在 MVC3 视图中使用 AJAX 更新字段

> ID：15375033
> 
> 赞同：2
> 
> 时间：2013-03-13T00:45:07.277
> 
> 标签：javascript, ajax, asp.net-mvc

这是我的控制器方法。

```
 [HttpPost]
    public ActionResult CheckStock(int productId, short units)
    {

        Product model = db.Products.Single(x => x.Product_ID == productId);
        model.Units_In_Stock = units;
        db.ObjectStateManager.ChangeObjectState(model, EntityState.Modified);
        db.SaveChanges();
        db.Refresh(System.Data.Objects.RefreshMode.ClientWins, model);
        var newModel = db.Products.Single(x => x.Product_ID == productId);

        return View("Details", newModel);
    } 
```

这是我的 AJAX：

```
 <script src="/Scripts/jquery-1.5.1.min.js" 
    type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $(".UpdateProductId").click(function () {
                var unitsInStock = 123;
                var pId = $(this).attr("data-id");
                if (pId != '' || pId != null) {
                    $.post("/Product/CheckStock", { "productId": pId, "unitsInStock": unitsInStock },
                              function (data) {
                                  $('#units-in-stock').text(unitsInStock);
                              });
                }
                else {
                    alert("Product_ID is empty");
                }
            });
        }); 
    </script> 
```

这是我的链接：

```
 <div>
        <a href="#" class="UpdateProductId" data-id="@Model.Product_ID">Update</a> 
    </div> 
```

这是带有唯一受影响行的精简表格。

```
 <fieldset>
        <legend>Product</legend>
        <div class="display-label">
            <table>
                <tr><td>Units_In_Stock</td><td><div id="units-in-stock">@Html.DisplayFor(model => model.Units_In_Stock)</div></td></tr>
            </table>
        </div>
    </fieldset> 
```

我根本没有收到任何错误，但是当我单击链接时什么都没有发生，除了 # 被添加到查询字符串中。控制器中 CheckStock 中的断点和 AJAX 方法中的断点没有被命中。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:51:46.350

您的键名和 CheckStockmethod 参数不一样，您`unitsInStock`在 ajax 请求中有但`units`在 CheckStock 方法中，将它们更改为匹配。

# android - ClassNotFoundException 导致的错误膨胀类

> ID：15375038
> 
> 赞同：1
> 
> 时间：2013-03-13T00:45:30.633
> 
> 标签：android, adt, gradle, android-library, dex

预先感谢您的任何帮助。

我正在为 android 使用新的构建系统（gradle）。从 Eclipse 构建时，应用程序功能正常。但是，当使用 gradle 构建时，我遇到了引用库的问题。

启动图书馆的第一个活动时，它工作正常。但是，一旦“加载”活动完成，我的应用程序在尝试启动下一个活动时崩溃。

在 logcat 我看到：

```
RuntimeException: Unable to start activity ComponentInfo____________ android.view.InflateException: Binary XML file line #14: Error inflating class__________ 
```

...

引起：java.lang.ClassNotFoundException

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".Player" >

    <FrameLayout
        android:id="@+id/id"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone" >

        <com.my.class.name
            android:id="@+id/id2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </FrameLayout> 
```

# xaml - WinRT XAML - ListBox 中的值和文本

> ID：15375039
> 
> 赞同：0
> 
> 时间：2013-03-13T00:45:31.773
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

有什么方法可以设置 ListBoxItem 不同的显示文本和不同的隐藏值。我想要和我在 HTML 中做的一样的事情：

```
<select>
    <option value="MyApple">Apple</option>
    <option value="MyOrange">Orange</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:21:59.737

当然，但这不是您使用 XAML 做事的方式。你可以在你的任何东西上设置一个`Tag`属性`ListBoxItem`，但常见的方法是使用 MVVM 模式和绑定，你可以将你设置`ItemsSource`为`ListBox`一组项目，并且你的每个项目都有要显示的属性和其他要在其他地方使用的属性。您可以将可见属性绑定到您的元素，`ItemTemplate`并`ListBox`通过绑定`SelectedItem`到您的视图模型的属性来绑定。现在，如果您不关心模式并且只想看到它工作 - 继续使用and事件。`ListBox``TwoWay``Tag``SelectionChanged`

# sublimetext2 - sublime text 2 中的颜色发生了什么变化？

> ID：15375040
> 
> 赞同：0
> 
> 时间：2013-03-13T00:45:36.203
> 
> 标签：sublimetext2

发生了一些事情，所以我的 Sublime Text 2 没有颜色语法:(

我能做些什么来解决这个问题？互联网还没有给出答案。

这是我的设置文件：

```
{
    "color_scheme": "Packages/Color Scheme - Default/Monokai.tmTheme",
    "font_size": 12.0
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-17T01:07:14.487

将扩展名从“纯文本”更改为“html”。你可以在右下角看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-29T16:00:22.920

上面的答案是正确的。将光标放在代码中的某处，单击 Sublime 编辑器右下角的单词。在弹出列表中，选择您正在使用的语言，例如 Python。可能，缺少颜色表明已默认选择或选择纯文本。

# c# - 复杂的动态 LINQ 查询

> ID：15375045
> 
> 赞同：0
> 
> 时间：2013-03-13T00:46:04.193
> 
> 标签：c#, linq

我正在使用 Linq To Entities 来启动我的应用程序，我想创建一个相当复杂的搜索查询......看看我想要的是：

> 当用户输入像“Washington Boston”这样的字符串时，我将根据“”（空格，在本例中为 2 个字符串）的数量将其分成 N 个字符串，然后在我的 Counties 表中搜索华盛顿和波士顿

如果这是一个“静态”查询，我会这样写：`where county.Name.Contains("Washington") || county.Name.Contains("Boston")`但我不知道用户将输入多少个城市（或空白）...

在经典的纯 TSQL 环境中，我将在运行时编译查询并使用命令 Exec... 所以我的问题是：如何动态生成 LINQ 到实体查询？

请注意 .Where() 不是基于委托的扩展方法......它不会在后端转换为 TSQL，意思是在后端`from e in context.Counties.Where(c => c.Name.Contains("boston"))`转换为`SELECT ID,NAME FROM COUNTIES`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T01:58:43.960

我只是将 David Khaykin 的评论扩展为答案，因为这是实现要求的最简单方法。

您只需将搜索词拆分为一个词列表，然后根据您的要求`counties`使用该方法过滤您的实体`Contains`

```
var terms = searchTerm.Split(' ').ToList();

// an exact match  
counties.Where(c => terms.Contains(c.Name))

// a 'contains' or 'like' type match
counties.Where(c => terms.Any(t => c.Contains(t)); 
```

该`Contains`方法是[System.Linq.Enumerable.Contains](http://msdn.microsoft.com/en-AU/library/system.linq.enumerable.contains.aspx)，而不是`String.Contains`.

在编写任何复杂的动态 LINQ 查询时，您可以使用 bmused 概述的方法 - 非常强大。但是对于这种类型的简单过滤，您可以传递直接列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T01:37:43.433

你可以使用[System.Linq.Expressions](http://msdn.microsoft.com/en-au/library/system.linq.expressions.aspx)

所以你会做类似（未测试）的事情：

```
public Expression<Func<County, Boolean>> GetPredicate(List<String> terms)
{
//The string method - Contains
MethodInfo mContains = typeof(String).GetMethod("Contains");

//The parameter - county
ParameterExpression pe = Expression.Parameter(typeof(County), "County");

//The property - Name
Expression property = Expression.Property(pe, "Name");

//expression body
Expression body = null;

foreach(String term in terms)
{
  //the constant to look for
  Expression searchTerm = Expression.Constant(term);

   //build expression body
   if(body == null) body = Expression.Call(property, mContains, searchTerm);
   else body = Expression.OrElse(body, 
       Expression.Call(property, mContains, searchTerm));
}

//create predicate
return Expression.Lambda<Func<County, Boolean>>(body, pe);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T01:39:57.443

您可以使用[Predicate builder](http://www.albahari.com/nutshell/predicatebuilder.aspx)（和[LINQKit](http://www.albahari.com/nutshell/linqkit.aspx)，因为您使用的是实体框架），它可以让您这样做：

```
IQueryable<County> SearchInCountyNames(params string[] countyNames)
{
  var predicate = PredicateBuilder.False<County>();

  foreach (string countyName in countyNames)
  {
    string name = countyName;
    predicate = predicate.Or(c => c.Name.Contains(name));
  }

  return dataContext.Counties.AsExpandable().Where(predicate);
} 
```

谓词构建器网站上还有更多示例。

# xcode - 带有 URL 的 UIPickerView

> ID：15375049
> 
> 赞同：0
> 
> 时间：2013-03-13T00:46:48.543
> 
> 标签：xcode, url, web, uipickerview

我在 xcode 中制作了一个 UIPickerView，我想添加一个“okay”或“go”按钮，该按钮将根据选择器视图上的选择转到特定网站。如果有人知道如何编码，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:20:28.243

您需要有关按钮或加载网页的帮助吗？对于按钮，我要做的是创建一个 UIViewController 子类（我以前做过的方式）或一个 UIPickerView 子类（没有尝试过，但听起来更好的主意），它在视图中有一个选择器连同它上面的 UIBarbuttonItem 有你的“确定”按钮。

然后，我将让“确定”按钮通过将其设置为屏幕外的框架（并可能将其从超级视图中删除）来隐藏选择器，然后通过获取选择器上当前选择的值来加载网页。

* * *

在加载网页时，如果您希望它保留在您的应用程序中，您可能需要创建一个`UIWebView`,`NSURL`使用您的网站地址的字符串创建一个。

然后你想从 url 创建一个 NSURLRequest `NSURLRequest *request = [NSURLRequest requestWithURL:url]`，然后调用`[webView loadRequest:request];`

* * *

如果您只想在 Safari 中打开链接，您只需： `[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://example.com/"]];`

# c++ - 使用声明和转发声明之间的冲突

> ID：15375051
> 
> 赞同：4
> 
> 时间：2013-03-13T00:47:00.317
> 
> 标签：c++, compiler-errors, include, forward-declaration, using-declaration

让我们和斗牛犬一起去散步吧：）

假设我有一个命名空间`Street::House`（在命名空间内`Street`），其中**声明**`Bulldog`了类（让它在）：**`House/Bulldog.hpp`**

 **```
namespace Street {
namespace House {
class Bulldog {};
}
} 
```

然后，我有`Bulldog.hpp`：

```
#include "House/Bulldog.hpp"    

namespace Street {
using House::Bulldog;
} 
```

注意发生了什么：我**将**声明注入`Street::House::Bulldog` 到命名空间中，`Street`就像声明一样。`Street::Bulldog``using`

然后，我有`Owner.hpp`类`Bulldog`的**前向声明**：

```
namespace Street {
class Bulldog;

class Owner {
  Bulldog* bulldog;
};
} 
```

最后，我有`Owner.cpp`：

```
#include "Owner.hpp"
#include "Bulldog.hpp"

namespace Street {
// Implementation of Owner...
} 
```

编译错误发生在`Owner.cpp`：

`error: 'Bulldog' is already declared in this scope`

这种现象的自然解释似乎是 C++ 将这两个`Bulldog`类视为不同的，但为什么呢？在这种情况下，我看不出有任何歧义，即如果编译器正确实施，它实际上可以工作。

你能建议什么解决方法？我能想到的一种方法是简单地删除from和 move from to的**前向声明**。但是，这将导致精确包含而不是**前向声明**。`Bulldog``Owner.hpp``#include "Bulldog.hpp"``Owner.cpp``Owner.hpp`

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:52:48.293

看来您可以通过更改`Bulldog.hpp`说来解决此问题

```
namespace Street {
    namespace House {
        class Bulldog;
    }
    using House::Bulldog;

    // ...
} 
```

这在 Clang 中对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T18:43:08.503

`Owner.hpp`你写的：

```
namespace Street {
class Bulldog;

class Owner {
  Bulldog* bulldog;
};
} 
```

应该是

```
namespace Street {
namespace House {
class Bulldog;
}

class Owner {
  House::Bulldog* bulldog;
};
} 
```

您不小心向前声明`Street::Bulldog`, 这不是一个真正的类，而不是`Street::House::Bulldog`, 这*是*一个真正的类。因此，您的实施因模棱两可`Owner.cpp`而感到不安。`Bulldog*`它不知道您是指声明的类`Street::Bulldog`还是声明的（并且也定义*了，尽管编译器并不关心*）`Street::House::Bulldog`。

由于您要转发声明的类是`Street::House::Bulldog`，因此您需要`House`在文件的声明中包含第二个命名空间`.hpp`。****

# android - Google 云消息传递是否提供/支持身份验证、完整性和不可否认性？

> ID：15375053
> 
> 赞同：1
> 
> 时间：2013-03-13T00:47:03.163
> 
> 标签：android, security, authentication, integrity, google-cloud-messaging

我想确保我从服务器收到的内容实际上来自服务器并且在传输过程中没有被篡改。我有一个将命令从服务器发送到移动设备的应用程序。出于电源效率的目的，将这种有效负载包含在 GCM 消息中会很好。但是，如果有人试图冒充服务器并发送不正确或恶意的命令，那就太糟糕了。我想知道 GCM 是否提供了这方面的机制，是否仅对消息进行签名就足够了，或者是否最好使用 GCM 唤醒应用程序，然后使用另一个通道来接收命令，即使它消耗少量额外的能量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:38:00.543

如果要验证消息是否来自服务器，则应使用公钥/私钥对中的私钥对其进行签名。然后，您可以使用公钥验证客户端中的签名。这样你就知道请求来自服务器（假设你的私钥没有被泄露。保持安全！）。这就是 Windows 更新以及 APT 和 YUM 的工作方式。

但请注意，这只会防止有人冒充您的服务器。它不会加密数据，也不会保证有关客户端的任何信息。您不能反过来做同样的事情（使用客户端私钥签署客户端原始数据），因为来自客户端的任何内容都可能被篡改/欺骗或以其他方式恶意。如果您希望对客户端信息进行加密，您可以使用服务器公钥对其进行加密，并且只有服务器的私钥才能对其进行解密。

# excel - VBA宏快速删除行

> ID：15375054
> 
> 赞同：4
> 
> 时间：2013-03-13T00:47:05.050
> 
> 标签：excel, optimization, row, vba

我有几个非常大的 excel 数据文件，我需要遍历它们并删除 T 列中单元格值为 1 的所有行。现在我的代码如下所示：

```
Sub test()
    Dim cell As Range

    For Each cell In Worksheets("Sheet1").Range("T5", "T900000")
        If cell.Value = 1 Then
            cell.EntireRow.Delete
        End If
    Next cell
End Sub 
```

它似乎正在工作，但需要永远运行，我将不得不这样做很多次。有没有更好的方法来做到这一点，或者有什么方法可以优化我已经必须让它运行得更快的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T00:53:59.587

这不像您想的那样工作......当您在遍历它们时删除行时，您最终会跳过行。示例：假设您的行在 A 列中有数字 1...10。您查看第一行并决定删除它。现在你看第二行。它有3号！你从没看过第 2 行！！

更好的方法是根据 T 列的标准过滤电子表格，复制它，将其粘贴到新的工作表（带有格式等）。

您可以打开宏录制并手动执行此操作；那么您将拥有确切的 VBA 代码。我相信这会快得多。

即使你不这样做，如果你想做一个`for each`删除东西的地方，颠倒顺序（从最后开始并向后工作）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T01:11:41.870

如果您想使用循环，以下不应跳过项目。我认为@Floris Filter 方法可能会更快。

```
Sub Main()
    Dim Row As Long
    Dim Sheet As Worksheet
    Row = 5
    Set Sheet = Worksheets("Sheet1")
    Application.ScreenUpdating = False
    Do
        If Sheet.Cells(Row, 20).Value = 1 Then
            Sheet.Rows(Row).Delete xlShiftUp
        Else
            Row = Row + 1
        End If
    Loop While Row <= 900000
    Application.ScreenUpdating = True
End Sub 
```

**更新** 我已经切换`Application.ScreenUpdating`了循环，这通常会加快这样的速度！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-08T11:18:27.157

如果您像数据库一样管理数据并希望从中删除特定行并且可以过滤它们，那么有一个技巧可以加快您的删除过程。与简单的循环过程相比，这非常快：

我比较了不同示例的时间（4806 行）。

*   标准循环删除：2:25
*   范围删除：0:20
*   过滤器删除：0:01

**示例**：我在“Tabelle5”中有数据，想删除特定行。数据从第 6 行开始。应删除第 1 列中以“OLD#”开头的每一行。

1）这里的标准溶液（最长的时间）：

```
Dim i As Integer, counter As Integer
Dim strToRemove As String, strToRemoveRange As String
strToRemove = "OLD#"
strToRemoveRange = ""
counter = 0

With Tabelle5
    For i = .UsedRange.Rows.Count To 6 Step -1
        If Mid(.Cells(i, 1).value, 1, 4) = strToRemove Then
            .Rows(i).Delete Shift:=xlUp
        End If
    Next i
End With 
```

2）这里是范围解决方案（中间时间）：

```
Dim i As Integer, counter As Integer
Dim strToRemove As String, strToRemoveRange As String
strToRemove = "OLD#"
strToRemoveRange = ""
counter = 0

With Tabelle5
    For i = .UsedRange.Rows.Count To 6 Step -1
        If Mid(.Cells(i, 1).value, 1, 4) = strToRemove Then
            If strToRemoveRange = "" Then
                strToRemoveRange = CStr(i) & ":" & CStr(i)
            Else
                strToRemoveRange = strToRemoveRange & "," & CStr(i) & ":" & CStr(i)
            End If
            counter = counter + 1
        End If
        If counter Mod 25 = 0 Then
            If counter > 0 Then
                .Range(strToRemoveRange).Delete Shift:=xlUp
                strToRemoveRange = ""
                counter = 0
            End If
        End If
    Next i
    If Len(strToRemoveRange) > 0 Then
        '.Range(strToRemoveRange).Delete Shift:=xlUp
    End If
End With 
```

3）过滤溶液（最短时间）：

```
Dim i As Integer, counter As Integer
Dim strToRemove As String, strToRemoveRange As String
strToRemove = "OLD#"
strToRemoveRange = ""
counter = 0

With Tabelle5
    For i = .UsedRange.Rows.Count To 6 Step -1
        If Mid(.Cells(i, 1).value, 1, 4) = strToRemove Then
            .Cells(i, 1).Interior.Color = RGB(0, 255, 0)
            counter = counter + 1
        End If
    Next i
    If counter > 0 Then
        .Rows("5:5").AutoFilter
        .AutoFilter.Sort.SortFields.Clear
        .AutoFilter.Sort.SortFields.Add( _
            Range("A5"), xlSortOnCellColor, xlAscending, , xlSortNormal).SortOnValue.Color = RGB(0, 255, 0)
        .AutoFilter.Sort.Header = xlYes
        .AutoFilter.Sort.MatchCase = False
        .AutoFilter.Sort.Orientation = xlTopToBottom
        .AutoFilter.Sort.SortMethod = xlPinYin
        .AutoFilter.Sort.Apply
        .Rows("6:" & CStr(counter + 5)).Delete Shift:=xlUp
        .Rows("5:5").AutoFilter
    End If
End With 
```

在这里，绿线将被排在最前面，一系列的绿色命中将被整体删除。这是我知道的最快的方法！:-)

我希望它会帮助别人！

最好的问候汤姆

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T22:20:34.837

我发现最快的方法是清除行数据（.clear）然后排序。例如，我想摆脱显示为“=========”的分页符

```
I=20
Do While i <= lRow3
    If Left(Trim(ws3.Cells(i, 1)), 1) = "=" Then
        ws3.Range(Rows(i - 7), Rows(i + 2)).Clear
        'i = i - 7
        'lRow3 = lRow3 - 10
    End If
    i = i + 1
Loop 
```

现在排序然后做一个 xlUp 最后一行 (ws3.Range("A1000000").End(xlUp).Row) 等。

删除行（在我的一个文件中，大约 220,000 行）需要 3 分钟。清除内容需要不到 10 秒的时间。

如果您需要在完成之前将数据从行下方移动到上方，那么问题就变成了如何“删除”空行。:)

干杯， BJ

# python - pyinstaller 找不到 goose 文件路径

> ID：15375057
> 
> 赞同：0
> 
> 时间：2013-03-13T00:47:25.067
> 
> 标签：python, pyinstaller, goose

**问题**

为什么 Pyinstaller 不能处理`goose`文件？是可执行文件创建者还是我的代码有问题？

**代码**

```
from goose.Goose import Goose
url = 
'http://sociedad.elpais.com/sociedad/2012/10/27/actualidad/1351332873_157836.html'
g = Goose({'debug':False,'enableImageFetching': False,'localStoragePath':'./tmp'})
article = g.extractContent(url=url)
#article.title
print article.cleanedArticleText[:150].encode("utf8","ignore") 
```

**Pyinstaller 的错误日志**

我使用 pyinstaller 创建的程序无法在此路径中找到 goose 文件：

```
IOError: Couldn't open file C:\Users\user\Desktop\dist\main.exe?118272\goose/resources/text/stopwords-en.txt 
```

有时候是这样的：

```
Traceback (most recent call last):
  File "<string>", line 15, in <module>
  File "C:\Users\user\Desktop\build\pyi.win32\main\out00-PYZ.pyz\goose.Goose",line 52, in extractContent
  File "C:\Users\user\Desktop\build\pyi.win32\main\out00-PYZ.pyz\goose.Goose",line 59, in sendToActor
  File "C:\Users\user\Desktop\build\pyi.win32\main\out00-PYZ.pyz\goose.Crawler", line 86, in crawl
  File "C:\Users\user\Desktop\build\pyi.win32\main\out00-PYZ.pyz\goose.extractors", line 245, in calculateBestNodeBasedOnClustering
  File "C:\Users\user\Desktop\build\pyi.win32\main\out00-PYZ.pyz\goose.text", line 97, in __init__
  File "C:\Users\user\Desktop\build\pyi.win32\main\out00-PYZ.pyz\goose.utils",line 76, in loadResourceFile
  IOError: Couldn't open file C:\Users\user\Desktop\dist\main.exe?118272\goose/resources/text/stopwords-en.txt 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:15:29.453

似乎`goose`除了 Python 源之外还需要数据文件才能正常运行。例如。它抬头`goose/resources/text/stopwords-en.txt`。当您使用 PyInstaller 冻结 Python 应用程序时，如果`goose`在标准文件系统位置查找其资源文件，它们将不存在，因为当您使用 PyInstaller 创建可执行文件时，所有文件都在安装程序中。

因此，您必须告诉 PyInstaller 将这些额外资源添加到您的可执行文件中，然后修改`goose`代码以在从 PyInstaller 生成的 exe 运行时从备用位置获取其资源。

详细信息在[访问数据文件](http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#id10)标题下的 PyInstaller 手册中。

# floating-point - int*浮点精度

> ID：15375067
> 
> 赞同：-1
> 
> 时间：2013-03-13T00:48:34.287
> 
> 标签：floating-point, floating-accuracy

我知道数字表示之间的差异，但我希望有人解释一下。我们看到 float t 的值是原来的样子，我想知道为什么 f 不等于 2+t（在数学上应该是这样）但是有一点点，一点点错误[对我来说实际上是相当大的！]。

这个错误是由 int*float 乘法引入的吗？

![在此处输入图像描述](../Images/88ea9ab2f8ed519589a0047f9d7974c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:44:14.957

通常，整数类型的值与浮点类型的值的加法或乘法是先将整数转换为浮点数，然后再进行算术运算。如果整数值不能以浮点格式精确表示，那么甚至在执行操作之前就会引入错误。对于您示例中的小整数，这不是问题。

如果精确的数学结果不能以浮点类型表示，则算术运算将引入错误。有两种方法可能无法表示结果：

*   一是表示有效数字（小数部分）所需的位数（或通常是数字，当不使用二进制浮点时）不适合浮点格式。
*   另一个是结果的大小超出了浮点格式的范围，导致上溢或下溢。

你的例子没有接近发生溢出或下溢的幅度，所以我不会在这里讨论它们。

假设您使用的是 C 实现中常用的 IEEE-754 32 位二进制浮点`float`，有效位为 24 位。因此，每当您执行一个结果需要超过 24 位来表示的操作时，都会出现错误。这个 24 位跨度是从数字中的最高设置位到其最低设置位测量的。

例如 1111.11111111111111111111 [2]需要 24 位来表示。如果将 10000 [2]添加到它，则精确的数学结果是 11111.11111111111111111111 [2]。这需要 25 位，因此不适合，因此浮点实现必须将精确的数学结果四舍五入为可表示的结果。（在具有此特定值的常见舍入到最近模式中，它将低位向上舍入，导致所有位进位，产生 100000 [2]。）

现在您可以了解哪些操作会出错。如果将两个不同大小的数字相加，则较小数字的一些低位将被“推出”结果。如果这些位中的任何一个不为零，则信息丢失，发生错误。此外，结果可能会跨越二次幂边界，其最高位高于任一输入值的最高位。这将另一位从有效数字中推出。例如，如果我们将 1000 添加到 1111.11111111111111111111 [2]，则精确的数学结果是 10111.11111111111111111111 [2]。这需要 25 位，因此低位被四舍五入，产生 11000 [2]。

假设您有两个数字，它们的有效位需要*a*和*b*位。当您将它们相乘时，精确的数学结果需要*a* + *b* –1 或*a* + *b*位，具体取决于是否存在产生新高位的“进位”。例如，11 [2] •111 [2] = 10101 [2]，两位乘以三位产生五位。或 1.001 [2] •1.01 [2] = 1.01101 [2]，四位乘以三位产生六位。所以乘以整数会产生舍入误差。

以这种方式乘以 2 的幂绝不会产生舍入误差，尽管它可能会导致上溢或下溢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:51:37.450

这是因为浮点数中的浮点错误。由于浮点数只能包含一定数量的二进制数字，因此它们不能完全准确，因此在使用它们进行计算时会得到不太准确的数字。

# c - C + OpenGL 四元数

> ID：15375069
> 
> 赞同：2
> 
> 时间：2013-03-13T00:48:49.607
> 
> 标签：c, opengl, quaternions

四元数是以下形式的数字：

```
a + bi + cj + dk 
```

对？很好，但是...

1.  如何用 C 语言解释这个数字？

2.  例如，如果我想旋转一个立方体 乘以四元数是多少？向量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T02:50:17.503

对于您的第一个问题，我认为您的意思是“我如何代表”，而不是“解释”。

最简单的方法是使用`struct`：

```
typedef struct quaternion_t {
  double x,y,z,w;
} quaternion_t; 
```

请注意，如上所述，通常的做法也是使用 x、y、z 和 w 作为组件名称（但您的命名是完全可以接受的，只要您知道哪个是哪个）。对组件使用双精度或单精度浮点数取决于您的需求：精度或空间。

简单的操作很容易实现：

```
void conjugate(quaternion_t *q){
    q->x = -q->x;
    q->y = -q->y;
    q->z = -q->z;
}

double product(quaternion_t *q1, quaternion_t *q2){
    return q1->x * q2->x + q1->y * q2->y + q1->z * q2->z + q1->w * q2->w;
}

double norm(quaternion_t *q){
    double p = product(q,q);
    return sqrt(p);
}

// etc 
```

对于您的第二个问题，我建议您寻找有关该主题的好教程。同时，维基百科页面：

*   [四元数](http://en.wikipedia.org/wiki/Quaternion)

*   [四元数和空间旋转](http://en.m.wikipedia.org/wiki/Quaternions_and_spatial_rotation)

提供一个很好的介绍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T01:32:21.193

无论您是用 C 还是 C++ 编写代码，数学都是完全相同的。

有关详细信息，请参见此处：

[C/C++ 中的四元数库](https://stackoverflow.com/questions/508370/quaternion-libraries-in-c-c) [http://en.wikipedia.org/wiki/Quaternion](http://en.wikipedia.org/wiki/Quaternion) [http://irrlicht.sourceforge.net/docu/classirr_1_1core_1_1quaternion.html](http://irrlicht.sourceforge.net/docu/classirr_1_1core_1_1quaternion.html) [https://irrlicht.svn.sourceforge.net/svnroot/irrlicht/主干/包括/四元数.h](https://irrlicht.svn.sourceforge.net/svnroot/irrlicht/trunk/include/quaternion.h)

# objective-c - 什么时候创建和释放 NSOperationQueue？

> ID：15375075
> 
> 赞同：0
> 
> 时间：2013-03-13T00:49:22.967
> 
> 标签：objective-c, nsoperationqueue

我需要一个 NSOperationQueue 与 NSURLConnection sendAsynchronousRequest 一起使用，但我见过的大多数示例代码都没有在工作应用程序的上下文中显示它。NSOperationQueues 应该为每个 NSURLConnection 分配并在 NSURLConnection 的 completionHandler 中释放，还是应该是在 viewDidLoad 中分配的属性并在 dealloc 中释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:00:55.433

除非您正在管理自定义队列，否则 NSOperationQueue`+mainQueue`和上的便捷方法`+currentQueue`就是您所需要的。它们将返回恒定的内部队列，您不必担心内存管理方面的问题。如果您确实需要维护自己的操作队列，请将其视为顶级对象。即：尽早初始化它（最好在 中`-init`）并在`-dealloc`.

# java - Apache OSGI Karaf 的 features-maven-plugin:create-kar 在使用 PAX wrap/bnd 语法的 features.xml 包上失败

> ID：15375077
> 
> 赞同：1
> 
> 时间：2013-03-13T00:49:43.127
> 
> 标签：java, maven, osgi, apache-karaf, pax-runner

有问题的行是此功能片段中的第一个*包*

```
<feature name="stuff-common-security">
    <bundle>wrap:mvn:org.springframework/ldap/1.3.0.RELEASE,mvn:com.mycompany.stuff/stuff-common-security/1.0-SNAPSHOT/bnd/spring-ldap</bundle>
    <bundle>mvn:org.springframework.security/spring-security-core/3.1.0.RELEASE</bundle>
    <bundle>mvn:org.springframework.security/spring-security-ldap/3.1.0.RELEASE</bundle>
    <bundle>mvn:com.mycompany.stuff/stuff-common-security/1.0-SNAPSHOT</bundle>
</feature> 
```

create-kar 目标因以下错误而失败：

```
[ERROR] Failed to execute goal org.apache.karaf.tooling:features-maven-plugin:2.2.9:create-kar (create-kar) on project stuff-demo:
 Failed to create kar archive: 
 Could not find artifact org.springframework:ldap:stuff-common-security:1.0-SNAPSHOT:1.3.0.RELEASE,mvn:com.mycompany.stuff 
in maven.mycompany.com (http://maven.mycompany.com/artifactory/libs-release-local)
[ERROR]
[ERROR] Try downloading the file manually from the project website.
[ERROR]
[ERROR] Then, install it using the command:
[ERROR] mvn install:install-file -DgroupId=org.springframework -DartifactId=ldap 
       -Dversion=1.3.0.RELEASE,mvn:com.mycompany.stuff -Dclassifier=1.0-SNAPSHOT 
       -Dpackaging=stuff-common-security -Dfile=/path/to/file 
```

似乎错误地解析了该捆绑元素文本并将包装器视为版本号的一部分。

```
<bundle>wrap:mvn:org.springframework/ldap/1.3.0.RELEASE,mvn:com.mycompany.stuff/stuff-common-security/1.0-SNAPSHOT/bnd/spring-ldap</bundle> 
```

Karaf 本身对这种捆绑语法很满意，所以我不认为我在那里犯了错误。

有没有另一种方法可以表达这个，所以我不会从 create-kar 得到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:29:20.357

尝试使用 '\' 转义逗号或使用 CDATA 部分（我在[邮件列表中](http://mail-archives.apache.org/mod_mbox/karaf-user/201212.mbox/%3C891B68CE-64CE-44D9-919B-70AD63A0F7E4@gmail.com%3E)发现了一些转义问题）：

```
<bundle><![CDATA[
wrap:mvn:org.springframework/ldap/1.3.0.RELEASE,mvn:com.mycompany.stuff/stuff-common-security/1.0-SNAPSHOT/bnd/spring-ldap
]]></bundle> 
```

如果这不起作用 - 我怀疑该插件没有使用实际的 URL 处理程序并且只是剥离`wrap`协议，所以建议[提交一个错误](https://issues.apache.org/jira/browse/KARAF)

当您使用分类器时，您可能只想在 pom 中进行嵌入，`stuff-common-security`但这可能会使您的构建有点太毛茸茸=]

如果是这样创建一个只有这两个模块作为依赖项的 maven 模块，然后使用 BND/maven-bundle-plugin 的[嵌入依赖](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin%28BND%29-Embeddingdependencies)项来合并它们。

# assembly - 延迟槽的意义何在？

> ID：15375084
> 
> 赞同：22
> 
> 时间：2013-03-13T00:50:22.413
> 
> 标签：assembly, mips, cpu-architecture, branch-prediction, pipelining

因此，根据我对延迟槽的理解，它们发生在调用分支指令并且分支之后的下一条指令也从内存中加载时。这有什么意义？您不希望分支之后的代码在分支被占用的情况下不会运行吗？如果分支没有被占用，是否可以节省时间？

我正在看一个流水线图，似乎分支后的指令无论如何都在执行..

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-13T14:00:10.927

如今，大多数处理器都使用管道。H&P 书中的想法和问题无处不在。在撰写这些原始著作时，我会假设实际的硬件与管道的特定概念相匹配。获取、解码、执行、写回。

基本上，流水线是一条流水线，其中有四个主要阶段，因此您最多可以同时处理四个指令。这混淆了执行一条指令需要多少个时钟的概念，它需要多个时钟，但如果你有一些/许多并行执行，那么“平均值”可以接近或超过每个时钟一个。

当您在流水线失败时选择分支时。获取和解码阶段的指令必须扔掉，你必须重新开始填充，所以你需要花费几个时钟来获取、解码，然后返回执行。分支阴影或延迟槽的想法是恢复其中一个时钟。如果您声明始终执行分支之后的指令，那么当执行分支时，解码槽中的指令也会被执行，取指槽中的指令将被丢弃，并且您有一个时间洞而不是两个时间洞。因此，在管道的执行阶段，您现在可以执行、执行、清空、执行、执行...，而不是执行、空、空、执行、执行。分支的痛苦减少了 50%，你的整体平均执行速度提高了，等等。

ARM 没有延迟槽，但它也给出了流水线的错觉，通过声明程序计数器提前两条指令。任何依赖于程序计数器（pc 相对寻址）的操作都必须使用提前两条指令的 pc 计算偏移量，对于 ARM 指令，原始 thumb 4 字节为 8 字节，当您添加 thumb2 指令时，它会变得混乱。

在这一点上，这些都是学术界之外的幻想，管道更深，有很多技巧，等等，以便遗留代码继续工作，和/或不必重新定义指令如何为每个架构更改工作（想象 mips rev x, 1 个延迟槽，rev y 2 个延迟槽，rev z 如果条件 a 则为 3 个槽，如果条件 b 为 2 个槽，如果条件 c 为 1 个槽）处理器继续执行分支后的第一条指令，并丢弃其他少数或十几个，因为它重新填充管道。管道的实际深度通常不会与公众分享。

我看到一个评论说这是一个 RISC 的东西，它可能从那里开始，但是 CISC 处理器使用相同的技巧，只是给人一种遗留指令集的错觉，有时 CISC 处理器只不过是一个 RISC 或 VLIW 核心用于模拟传统 CISC 指令集（微编码）的包装器。

观看它的制作方式。可视化一条流水线，流水线中的每一步都有一个任务。如果生产线中的一步用完了蓝色的东西怎么办，而要制造蓝色和黄色的产品，您需要蓝色的东西。因为有人搞砸了，你不能再过一周得到新的蓝色什么。所以你必须停止生产线，改变每个阶段的供应，并制作一段时间的红色和绿色产品，这通常可以在不倾倒生产线的情况下正确分阶段进行。这就像在装配线深处某处的分支发生的事情，导致生产线不得不改变，转储生产线。延迟槽是一种将一个产品从必须在生产线中丢弃的情况中恢复的方法。不是在生产线停止前推出 N 个产品，而是每次生产运行 N+1 个产品。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-13T00:59:39.483

> 您不希望分支之后的代码在分支被占用的情况下不会运行吗？

但已经太晚了。CPU 流水线的全部目的是您希望在每个周期完成一条指令。实现这一目标的唯一方法是每个周期获取一条指令。因此，在 CPU 注意到必须执行分支之前，已经获取了分支指令之后的代码并且正在运行中。

> 这有什么意义？

无关紧要。这不是一个特性，它只是这种管道设计的产物。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-13T00:53:32.833

即使该指令出现在分支之后的程序中，它实际上在执行分支之前运行。查看有关[延迟槽](http://en.wikipedia.org/wiki/Delay_slot)和[分支危险](http://en.wikipedia.org/wiki/Hazard_%28computer_architecture%29#Control_hazards_.28branch_hazards.29)的维基百科页面。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-13T14:56:21.397

RISC 架构的理念是简化解码并优化流水线以提高速度。CPU 尝试通过流水线来重叠指令执行，因此同时执行了几条指令。

延迟槽的重点是执行一条指令，该指令已经通过部分管道，现在位于一个槽中，否则只能被丢弃。

优化器可以在分支目标处获取第一条指令并将其移动到延迟槽，使其“免费”执行。

该功能没有成为主流，主要是因为世界标准化了现有的 ISA ¹设计，即 x86 和 x86-64，但也有另一个原因。

晶体管数量的二次爆炸使得非常复杂的解码器成为可能。无论如何，当架构上可见的 ISA 被转换为微操作时，像延迟槽这样的小技巧就变得不重要了。

* * *

^(1\. ISA：*指令集架构*)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-13T07:06:08.297

在流水线实现的教科书示例中，CPU*获取*、*解码*、*执行*和*写回*. 这些阶段都发生在不同的时钟周期中，因此实际上每条指令在 4 个周期内完成。然而，当第一个操作码即将被解码时，下一个操作码会从内存中加载。当 CPU 完全占用时，有 4 条不同指令的一部分同时处理，CPU 的*吞吐量*为每个时钟周期一条指令。

当机器码中有一个序列时：

```
 sub r0, #1
      bne loop
      xxx 
```

*处理器可以从write back* stage of`sub r0, #1`到*execute* stage of反馈信息`bne loop`，但同时 xxx 已经在 stage *fetch*中。为了简化展开流水线的必要性，CPU 设计人员选择使用延迟槽。延迟槽中的指令被取出后，取出单元具有正确的分支目标地址。优化编译器很少需要在延迟槽中放置 NOP，但会在其中插入两个可能的分支目标都需要的指令。

# c++ - 为什么gdb总是给出“程序退出代码01”？

> ID：15375085
> 
> 赞同：0
> 
> 时间：2013-03-13T00:50:36.440
> 
> 标签：c++, gdb

我有一个`main.cpp`文件和两个 .hpp 文件，其中一个包含一组我对其进行修改的类和方法。编译`main`成功，但运行`main`结果为`Segmentation Fault`. 按照本[教程](https://www.cs.cmu.edu/~gilpin/tutorial/)，我使用了：

```
$ gdb main
(gdb) run 
```

但是，`(gdb) run`无论 .hpp 文件是否有错误，总是会产生以下内容：

```
Reading symbols for shared libraries . done
Usage: viewer NODES_FILE TETS_FILE

Program exited with code 01. 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:56:47.383

尝试发出这些命令：

```
$ gdb main
(gdb) run nodes_file test_file 
```

当然，填写两个参数的正确值。

# soap - soapUI 可以访问 Windows 存储的证书以进行数字签名请求吗？

> ID：15375087
> 
> 赞同：2
> 
> 时间：2013-03-13T00:50:52.850
> 
> 标签：soap, soapui, digital-signature

我和这张海报有同样的需求，但没有像他们那样的 PEM 文件：

[soapui 肥皂数字签名](https://stackoverflow.com/questions/8474794/soapui-soap-digital-signature)

我确实有我想在我的 Windows 机器上签名的本地机器证书，我可以在 MMC 控制台中看到证书。根据证书的详细信息，它可以用于数字签名，因为它包含一个私钥。

MMC 控制台只允许我在没有私钥的情况下导出此证书（可以理解）。

有谁知道 SoapUI（或任何基于 Java 的客户端）是否可以使用此证书进行数字签名请求？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T09:02:21.930

我认为使用soapui 没有特定的连接器可以在Windows 密钥库上使用私钥。

如果您想使用 java 客户端在 windows 密钥库上使用私钥签名，您可以使用 SUNMSCAPI 提供程序（[http://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html) [http:// /docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunMSCAPI](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunMSCAPI)），我给你一个代码示例：

```
import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.Signature;

import sun.security.mscapi.SunMSCAPI;

public class WindowsKeystoreSample {

public static final String USER_STORE = "Windows-MY";
public static final String MACHINE_STORE = "Windows-ROOT";

public static void main(String args[]) throws Exception{

    // instantiate the keystore
    KeyStore keyStore = KeyStore.getInstance(USER_STORE, new SunMSCAPI());
    keyStore.load(null, null);

    String keyAlias = "key alias";
    // password if you protect the windows keystore... if not null
    char[] password = "somepass".toCharArray();

    Signature sign = Signature.getInstance("SHA1WithRSA");
    sign.initSign((PrivateKey) keyStore.getKey(keyAlias, password));
    sign.update("dateToBeSigned".getBytes());
    byte[] signedData = sign.sign();

}

} 
```

请记住，要使用 sunmscapi，您需要 java 版本 1.6 或更高版本。

# android - 无法在 actionbarsherlock 中设置BackgroundDrawable

> ID：15375090
> 
> 赞同：1
> 
> 时间：2013-03-13T00:51:13.083
> 
> 标签：android, android-activity, android-actionbar, actionbarsherlock, drawable

我有一个函数 updateActionBar 来更改动作的栏背景。当应用程序启动时，此功能会更改背景：

```
getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.header_bacjground_test)); 
```

场景是：应用程序移动到新活动，该活动通过调用完成（）函数完成（应用程序返回主活动），即使调用 setBackgroundDrawable 也不起作用。背景设置为黑色，而预期的背景为灰色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:56:50.090

在 Activity 文件中，重写 onStart() 方法并写入

```
 getSupportActionBar().setBackgroundDrawable(
                 getResources().getDrawable(R.drawable.header_background_test)); 
```

每当您将活动移到前面或后面时，标题将保持相同的背景

# python - 在特定条件下从列表（或其他可迭代）中获取项目数

> ID：15375093
> 
> 赞同：100
> 
> 时间：2013-03-13T00:51:18.857
> 
> 标签：python, list, count, functional-programming, sequence

假设我有一个包含大量项目的列表，

```
l = [ 1, 4, 6, 30, 2, ... ] 
```

我想从该列表中获取项目的数量，其中项目满足特定条件。我的第一个想法是：

```
count = len([i for i in l if my_condition(l)]) 
```

但是如果过滤后的列表也有很多项，我认为为过滤后的结果创建一个新的列表只是浪费内存。为了效率，恕我直言，上面的调用不能比：

```
count = 0
for i in l:
    if my_condition(l):
        count += 1 
```

是否有任何功能样式的方法来获取满足条件的项目数而不生成临时列表？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-03-13T00:54:15.203

您可以使用[生成器表达式](http://docs.python.org/2/tutorial/classes.html#generator-expressions)：

```
>>> l = [1, 3, 7, 2, 6, 8, 10]
>>> sum(1 for i in l if i % 4 == 3)
2 
```

甚至

```
>>> sum(i % 4 == 3 for i in l)
2 
```

`True == 1`它使用了和的事实`False == 0`。

或者，您可以使用`itertools.imap`(python 2) 或简单地使用`map`(python 3)：

```
>>> def my_condition(x):
...     return x % 4 == 3
... 
>>> sum(map(my_condition, l))
2 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-13T00:53:58.810

您需要[生成器理解](https://stackoverflow.com/questions/364802/generator-comprehension)而不是此处的列表。

例如，

```
l = [1, 4, 6, 7, 30, 2]

def my_condition(x):
    return x > 5 and x < 20

print sum(1 for x in l if my_condition(x))
# -> 2
print sum(1 for x in range(1000000) if my_condition(x))
# -> 14 
```

或者使用`itertools.imap`（尽管我认为显式列表和生成器表达式看起来更像 Pythonic）。

请注意，尽管从`sum`示例中并不明显，但您可以很好地编写生成器推导。例如，

```
inputs = xrange(1000000)      # In Python 3 and above, use range instead of xrange
odds = (x for x in inputs if x % 2)  # Pick odd numbers
sq_inc = (x**2 + 1 for x in odds)    # Square and add one
print sum(x/2 for x in sq_inc)       # Actually evaluate each one
# -> 83333333333500000 
```

这种技术很酷的一点是，您可以在代码中指定概念上单独的步骤，而无需强制评估和存储在内存中，直到评估最终结果。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-23T15:20:30.513

`reduce`如果您更喜欢函数式编程，这也可以使用

```
reduce(lambda count, i: count + my_condition(i), l, 0) 
```

这样你只做 1 遍并且不会生成中间列表。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-13T00:58:07.933

您可以执行以下操作：

```
l = [1,2,3,4,5,..]
count = sum(1 for i in l if my_condition(i)) 
```

它只是为满足条件的每个元素加 1。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T00:56:27.027

```
from itertools import imap
sum(imap(my_condition, l)) 
```

# php - 在php中输出整行csv文件

> ID：15375101
> 
> 赞同：1
> 
> 时间：2013-03-13T00:51:55.507
> 
> 标签：php, csv, random, output

我需要从表单上传 csv 文件。我能做到的。csv 文件包含参加比赛的人员的姓名和电子邮件。为了获得比赛获胜者，我需要 php 来读取文件、随机化行并打印出整行。

我一直在尝试使用我在 stackoverflow 上找到的以下代码，但它只从随机行输出一列。我需要它来输出整行，我需要三行。无论我尝试什么，我都无法获得此代码：

```
<?php

if (!isset($_FILES)){exit;}
$file = $_FILES['file'];

$file_handle = fopen($file['tmp_name'], "r");
$line_of_text = array();

while (!feof($file_handle) ) {
    $line_of_text[] = fgetcsv($file_handle, 1024);
}
fclose($file_handle);

// Random Row and Column
$random_row = array_rand($line_of_text);
$random_column =  array_rand($line_of_text[$random_row]);

//Random row, with all three columns
$column = 1;
$column = 2;
$column = 3;

echo $line_of_text[$random_row][$column-1][$column-2][$column-3];

?> 
```

如果我删除第 2 列和第 3 列，它会打印第 1 列，但我需要所有三列，整行。我还想抓取三个随机行并将每一行打印出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:13:50.530

`$line_of_text[$random_row]`在这种情况下是一个数组。假设我正确理解了它的结构，您可以通过执行以下操作轻松获得所有三列：

```
echo $line_of_text[$random_row][$column-1] . $line_of_text[$random_row][$column-2] . $line_of_text[$random_row][$column-3]; 
```

这会将三个数组值的值连接在一起。如果您想通过空格分隔它们，只需将 a 替换为`.`a`. ' ' .`或类似名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:10:07.637

谢谢，串联成功了！出于某种原因，我不得不更改第 3 列的顺序，然后是第 2 列，然后是第 1 列。但这让我得到了我想要的结果。

# jquery - Jquery tokeninput rails 消息

> ID：15375103
> 
> 赞同：0
> 
> 时间：2013-03-13T00:52:09.937
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在用户之间实现消息传递系统。

这是我要实现的数据库模型。

```
user
  id

message
  message_id
  message_author_id
  timestamp

message_recipient
  message_id
  user_id

message_status
  message_status_id
  message_id
  user_id
  is_read
  is_deleted
  read_datetime
  deleted_datetime 
```

我相信这种关系会跟随

```
user
  has_many :messages
  has_many :message_recipient
  has_many :message_status

message
  has_many: user => author_id

message_recipient
  belongs_to :message
  belongs_to user

message_status
  belongs_to :message
  belongs_to :user 
```

首先，我不确定数据库是否是正确的实现方式，有很多接收者，也不确定它是否是正确的 rails 方式。

其次，目标是实现 jquery.tokeninputs，因此据我了解，我需要确保有很多用户能够使用许多用户的作者字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:29:40.793

关于您的实施，我认为您可能有一个冗余模型 - 取决于您要做什么，但它会像这样：

```
class User < ActiveRecord::Base
  has_many :messages
  has_many :sent_messages, through: :messages 
  has_many :destined_messages, class_name: 'SentMessage'
end

# this class represents the original authored message,
# i.e. it holds the body of the message
class Message < ActiveRecord::Base
  belongs_to :user # author
  has_many :sent_messages
end

# this class represents a "copy" of the message 
# that has been sent to a particular user. 
# It also holds the status, which makes sense because
# you want to log the status according to each user
class SentMessage < ActiveRecord::Base
  belongs_to :message
  belongs_to :user
end 
```

如果您不在乎重复，您甚至可以合并模型：只需为每个收件人制作正文的 `Message`副本。`SentMessage`

# java - 如何在 Android 中旋转 Rect 对象

> ID：15375104
> 
> 赞同：4
> 
> 时间：2013-03-13T00:52:19.713
> 
> 标签：java, android

好的，所以我使用此代码在画布上创建了一个矩形

```
Rect r =new Rect((point.x - rectWidth / 2), (point.y - rectHeight / 2),(point.x-rectWidth / 2),(point.y + rectHeight / 2)); 
```

点是由触摸事件确定的矩形的中心。但现在我希望能够旋转这个矩形。是否有任何代码或方法允许用户围绕其中心旋转形状。我也有兴趣获得这样一个矩形的角点。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-29T20:22:06.053

围绕它自己的中心（而不是原点）旋转一个矩形：

```
Matrix m = new Matrix();
// point is the point about which to rotate.
m.setRotate(degrees, point.x, point.y);
m.mapRect(r); 
```

您还可以使用`Matrix.mapPoints()`来查找角的转换方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-06T02:22:02.210

使用以下：

```
Rect r2 = new Rect(r1);
Matrix mat = new Matrix();
mat.setRotate(-90, r2.centerX(), r2.centerY());
mat.mapRect(r2); 
```

# java - 如何修改字节数组元素中的单个位？

> ID：15375106
> 
> 赞同：1
> 
> 时间：2013-03-13T00:52:24.127
> 
> 标签：java

我有一个字节数组，每个字节都有一个 8 位字节。假设我想修改数组第一个元素的第 5 位而不更改任何其他内容。有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:56:26.147

如果你想设置它，做

```
bytes[0] |= (byte) (1 << 5); 
```

...它是字节数组中的第一个元素，二进制表示为 1，向左移动 5 位...这与设置第 5 位相同。

如果要清除第 5 位，请执行

```
bytes[0] &= (byte) ~(1 << 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:00:04.317

如果你有`byte[] a`，你可以使用这样的位操作修改第一个元素的第 5 位：
设置为 1：`a[0] |= 1<<5`
设置为 0：`a[0] &= ~(1<<5)`
如果你想要一个更好的 API 来包装位操作，请查看 BitSet 类。

# css - 背景图片不显示右下角

> ID：15375107
> 
> 赞同：2
> 
> 时间：2013-03-13T00:52:32.817
> 
> 标签：css, background-image

CSS 中是否发生了一些我不知道的变化？我正在尝试将图像放在屏幕的右下角。我不知道它为什么这样做，但它似乎将图像推离了我看不到的屏幕。如果我删除`bottom`它，它会将图像放在右侧而不是底部。如果我这样做`right top`，图像会显示在右上角。`right bottom`那为什么不显示在

```
*{
    box-sizing: border-box;
    font-family: BentonSans, 'Lucida Sans', 'Lucida Grande', sans-serif;
    color: rgb(102, 102, 102);
    outline: none;
    border: 0;
}
body{
    font-size: 12pt;
    padding: 0;
    margin: 0;
    background-image: url("/media/images/image1.jpg");
    background-position: right bottom;
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T00:57:19.323

我怀疑它与容器大小有关。

你的CSS中有这个吗？

```
html, body {
    min-height: 100%;
    min-width: 100%;
} 
```

# javascript - 选择多个元素不是空的验证引擎，不需要

> ID：15375110
> 
> 赞同：0
> 
> 时间：2013-03-13T00:52:57.660
> 
> 标签：javascript, jquery, jquery-validation-engine

我需要验证至少选择了一个元素。该元素是动态填充的，我需要使用验证引擎验证是否至少选择了一个选项元素。

这里填写select选项项

```
jQuery("#bt_add").click(function(){
    storeUsedGroups[attr_group.val()] = true;

    jQuery("#atributo_id").append('<option value='+attr_name.val() + 
        ' groupid='+attr_group.val()+'>' + attr_group.text() + 
        ' : ' + attr_name.text()+'</option>'
    );
}); 
```

并按要求进行验证，但对于提交表单需要选择插入的选项。

```
<select name="atributo_id[]" id="atributo_id" multiple="multiple" class="validate[required]">
    <option value="5" groupid="1">Color : Azul</option>
</select> 
```

我只需要验证非空元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:10:11.297

**更新：**如果我理解正确，您只想在选择元素填充了选项时才应用必需的规则。

您可以通过自定义函数调用来做到这一点。将您选择的班级更改为

```
<select name="atributo_id[]" 
        id="atributo_id" 
        multiple="multiple" 
        class="validate[funcCall[ifSelectNotEmpty]]"> 
```

现在函数

```
function ifSelectNotEmpty(field, rules, i, options){
  if ($(field).find("option").length > 0 && 
      $(field).find("option:selected").length == 0) {
     // this allows the use of i18 for the error msgs
     return "* This field is required";
  }
} 
```

它应该可以工作，但不会因为`jquery.validationEngine.js`第 707 行崩溃（恕我直言，这是一个错误）。所以你需要将第 707 行从

```
if(!required && && !(field.val()) && field.val().length < 1) options.isError = false; 
```

到

```
if(!required && !field && !(field.val()) && field.val().length < 1) options.isError = false;
                ^^^^^^ 
```

**原始答案** 如果您想检查是否选择了任何选项，您可以这样做

```
if (!$("#atributo_id option:selected").val()) {
    alert("Nothing has been selected");
} 
```

或者

```
if (!$("#atributo_id option:selected").length) {
    alert("Nothing has been selected");
} 
```

**[jsFiddle](http://jsfiddle.net/pmatseykanets/KSe7L/)**

# php - while($row 循环中的变量

> ID：15375112
> 
> 赞同：0
> 
> 时间：2013-03-13T00:53:25.017
> 
> 标签：php

我可以在里面放一个变量吗

```
while($row = mysql_fetch_array($result)) 
```

IE

```
while($row = mysql_fetch_array($result) and color = '$color') 
```

我基本上是在调用一个查询，但想分段报告——在这种情况下，逐个颜色。所以我想循环我所有的颜色变量，为每个变量运行 while 循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:01:18.537

是的，但如果您想在每次迭代中使用不同的值，则必须稍后更改它。

例如。以下代码：

```
<?php
  $i = 0;
  $var = "red";
  while( $i++ < 10 && $var = "white" ) {
    echo $i . " " . $var . "\n";
  }
?> 
```

将为您`$var`提供所有 10 个迭代值的白色。

您可以在[codepad](http://codepad.org/4ORo1iPA)上看到[结果](http://codepad.org/4ORo1iPA)。

* * *

由于您正在`color`从表中获取，因此您的代码应该是：

```
while( $row = mysql_fetch_array($result) {
    $Mycolor = $row['color'];
    // more code 
```

# php - 如何从 PHP 源代码中获取可执行的 phar 命令？

> ID：15375115
> 
> 赞同：0
> 
> 时间：2013-03-13T00:53:42.503
> 
> 标签：php, command-line, phar

我希望能够使用本手册中`phar`所述的命令行工具（在 Debian Linux 上[）](http://www.manpagez.com/man/1/phar/)。

到目前为止我所做的：

1.  下载[PHP PHAR 源文件夹](https://github.com/php/php-src/tree/master/ext/phar/phar)；

2.  将其移至`/usr/share/`；

3.  更改了`phar.php`from `#!/usr/local/bin/php`to的第一行`#!/usr/bin/php`（PHP 符号链接的路径 -> 到 PHP 可执行文件）；

4.  创建了一个符号链接`phar`到`/usr/share/phar/phar.php`.

现在`phar help`返回一个错误：

```
# phar help
PHP Fatal error:  Uncaught exception 'PharException' with message 'manifest cannot be larger than 100 MB in phar "/usr/share/phar/phar.php"' in /usr/share/phar/phar.php:48
Stack trace:
#0 /usr/share/phar/phar.php(48): Phar::mapPhar()
#1 {main}
  thrown in /usr/share/phar/phar.php on line 48 
```

我究竟做错了什么？如何让它工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:26:47.023

可能是损坏的 phar 文件。尝试重新下载。

# mysql - mySQLi 从两个单独的表中选择相关项目的最佳方法

> ID：15375117
> 
> 赞同：0
> 
> 时间：2013-03-13T00:53:49.277
> 
> 标签：mysql, join, mysqli, left-join

我查看了一些[S/O 帖子](https://stackoverflow.com/questions/10027522/mysql-fastest-way-to-select-relational-data-avoiding-left-join)，但没有得到它。我想我可以做到这一点而无需使用`JOIN`. 但我是一个 mysql 菜鸟 :(

我有 2 张桌子：

```
pagecontents : content, pages_id
pages        : id, title 
```

当然，这里有一个简单的关系，`pagecontents.pages_id`总是与 相同`pages.id`。

我正在使用以下查询提交搜索：

```
SELECT `pages_id`, 
MATCH(`content`) AGAINST('search term' IN BOOLEAN MODE) AS score 
FROM `pagecontents` 
WHERE 
MATCH(`content`) AGAINST ('search term' IN BOOLEAN MODE) 
ORDER BY score DESC; 
```

查询按预期返回结果，但是：

**我的问题** 我想`pages.title`为每个搜索结果集行获取。我不知道怎么做，我认为这可能很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:57:09.067

```
SELECT `pages_id`, pages.title,
MATCH(`content`) AGAINST('search term' IN BOOLEAN MODE) AS score 
FROM `pagecontents` JOIN pages ON pagecontents.pages_id = pages.id 
WHERE 
MATCH(`content`) AGAINST ('search term' IN BOOLEAN MODE) 
ORDER BY score DESC; 
```

# c# - WPF 动画路径速度和暂停

> ID：15375121
> 
> 赞同：0
> 
> 时间：2013-03-13T00:54:04.283
> 
> 标签：c#, wpf, animation

我是 WPF 中动画的新手，我正在尝试将我之前使用 GDI+ 和 C++ 编写的程序重新编码到 WPF 和 C# 中。该程序使用动画路径沿这些路径移动特定图像。我需要在路径上的某些点停止附加图像说 5 秒，而所有其他路径仍在动画或更改附加图像的速度，以便图像在某些点减慢/加速。作为 WPF 的新手，我有几个选择，但不确定是否有可能：

1.  将每条路径放在单独的故事板中，然后使用 SB 的暂停/恢复功能并使用速度比？（问题是我不知道我是否可以在同一个画布上显示多个故事板？）

2.  以某种方式使用关键帧来设置动画将停止或改变速度的确切点（不知道您是否可以使用关键帧来执行此操作，或者是否有其他合适的动画类）

我欢迎就如何最好地使用上述方法或完全不同的方法来实现这一点发表评论，如您的好自己所建议的。

问候斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:23:58.167

（这里没有足够的声誉来评论，所以我必须“回答”）

1.  同时使用多个故事板应该没有问题，因为 WPF 还支持针对相同属性值的多个动画，多个动画只是在作为容器的同一画布上运行应该可以正常工作。

2.  要“暂停”关键帧动画，请在不同类型的相同位置/值处设置两个关键帧。例如，属性从 0 到 5 到 5 到 10 之间有几秒钟。动画中还有“缓动”，可以根据不同的功能加速/减速。

你能提供一个物体应该如何移动的基本例子吗？如：它们是每次都在同一点/时间停止，还是取决于外部影响，如鼠标点击？

# windows - 可以索引和重命名多个子文件夹中的文件的批处理文件，每次循环进入新文件夹时都会重置索引

> ID：15375123
> 
> 赞同：0
> 
> 时间：2013-03-13T00:54:26.847
> 
> 标签：windows, batch-file

我正在编写一个可以快速通过根文件夹运行的批处理文件，我们只会说“C:\SomeMusic\”，其中包含很多子文件夹和文件。我要做的是**仅**重命名每个文件夹中的文件，但以顺序方式（例如 somefile1.ext，somefile2.ext ...）

我现在有这个，但如果循环进入新目录，我不知道如何重置我的计数器

```
SET COUNT=0
setlocal ENABLEDELAYEDEXPANSION
FOR /R %%X IN (*.mp3) DO (
    SET /A COUNT=!COUNT!+1
    SET FN=%%~nxX
    ECHO Renamed "!FN!" to "song!COUNT!.mp3"
    REN %%X song!COUNT!.mp3
)
:EOF
endlocal
PAUSE 
```

快速旁注：如果我像这样运行重命名命令，它会将文件命名为“song1.mp3”、“song2.mp3”、“song3.mp3”，而不管它们以前的名称是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:22:48.653

您需要跟踪当前目录，并在每次更改时重置计数器：

```
setlocal ENABLEDELAYEDEXPANSION
FOR /R %%X IN (*.mp3) DO (
    IF NOT "%%~dpX"=="!LASTPATH!" (SET /A COUNT=0) ELSE (SET /A COUNT=!COUNT!+1)
    SET LASTPATH=%%~dpX
    REN "%%X" song!COUNT!.mp3
)
endlocal 
```

请注意，生成的文件名将是`songX.mp3`. 如果您需要文件保持其原始名称，请使用此重命名代码：

```
REN "%%X" "%%~nX!COUNT!%%~xX" 
```

# node.js - 获取 Kue 作业的结果并通过开放连接将其推送到客户端

> ID：15375126
> 
> 赞同：3
> 
> 时间：2013-03-13T00:54:36.183
> 
> 标签：node.js, mongodb, websocket, message-queue, kue

我有一个 API 端点，它提供来自 MongoDB 的一些 JSON。就像这样：

```
router.get('/api/links', function (req, res) {
  // Find existing links
  links.find({ feed: 1 }, function (err, links) {
    res.json(links)
  })
}) 
```

我希望这个端点触发一个 Kue 作业，当这个作业完成时，我想以*某种方式*将作业的结果（数据库中的新链接）推送到客户端 - 类似于 Twitter 流 API，它保留一个打开 HTTP`GET`请求。

```
router.get('/api/links', function (req, res) {
  // Find existing links
  links.find({ feed: 1 }, function (err, links) {
    res.json(links)
  })
  // Kue job to update the links database
  jobs.create('update subscriptions', {
    title: req.user.username,
    feeds: feeds
  }).save()
  // When the job is done, the new links in the database (the output
  // of the Kue job) should be pushed to the client
}) 
```

但是，我不确定如何获得 Kue 作业的结果，也不确定在作业完成后如何将新收到的数据推送到客户端。

如果没有办法获得 Kue 作业的结果，我可以只在数据库中查询新文档。但是，我仍然不确定如何向客户端发送另一个响应。希望有人能指出我正确的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:58:31.363

实际上这在文档中有所介绍 - [https://github.com/LearnBoost/kue](https://github.com/LearnBoost/kue)

“工作事件

通过 Redis pubsub 在 Job 实例上触发特定于作业的事件。当前支持以下事件：

*   `failed`工作失败了
*   `complete`工作已经完成
*   `promotion`作业（延迟时）现在已排队
*   `progress`作业的进度范围为 0-100 例如，这可能类似于以下内容：

    ```
    var job = jobs.create('video conversion', {

        title: 'converting loki\'s to avi'
      , user: 1
      , frames: 200

    });

    job.on('complete', function(){
        console.log("Job complete");
    }).on('failed', function(){
        console.log("Job failed");
    }).on('progress', function(progress){
        process.stdout.write('\r  job #' + job.id + ' ' + progress + '% complete');
    }); 
    ```

请记住，您的工作可能不会立即得到处理（取决于您的队列），因此客户可以等待一段时间等待结果。

编辑：如评论中所述，作业不会返回任何结果，因此您应该将结果与作业 ID 一起存储在数据库中，并在作业完成时查询数据库。

为了保持连接打开，请使用`res.write`and`res.end`而不是`res.json`结束连接（您必须`JSON.stringify`自己处理数据）。另外，请记住，如果这需要太长时间，浏览器可能会超时..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T15:22:38.450

对任何发生在这件事上的人的评论。我在使用“kue”时也有类似的担忧，我很惊讶地发现，虽然它支持“完成”、“失败”和“进度”等消息，但它无法将结果转发回请求者。

挖掘“kue”源，我发现发送您自己的自定义消息（如“结果”消息）实际上非常容易。我所做的看起来像这样：

```
var events = require('kue/lib/queue/events');

...

    queue.process(task, function(job, done) {
      console.log("Did job: "+job.id);
      events.emit(job.id, "result", "Yeah baby!");
      done();
    }); 
```

有了这个，你可以这样做：

```
job.on("result", function(res) {
    console.log("Got result: "+res);
}); 
```

但我讨厌戳入私有 API，所以我提交[了一个拉取请求](https://github.com/LearnBoost/kue/pull/313)，通过向作业对象添加一个“发送”方法，在“kue”中更多地公开这一点。

在这种情况下，语法会更清晰一些*，即*

```
 queue.process(task, function(job, done) {
      console.log("Did job: "+job.id);
      job.send("result", "Yeah baby!");
      done();
    }); 
```

# ember.js - 如何在 ember.js 路由中显示模型的非 id 字段的字符串值？

> ID：15375127
> 
> 赞同：3
> 
> 时间：2013-03-13T00:54:54.017
> 
> 标签：ember.js

我有一个自定义字段，可让您过滤模型列表（可以说在某些 ArrayController 上）

```
 PersonApp.SearchField = Ember.TextField.extend({
      keyUp: function(e) {
          var search = this.get('value');
          model = PersonApp.Page.create({term: search});
          this.get('controller.target').transitionTo('person.search', model);       
      }
  }); 
```

这是我用于分页和过滤/搜索的非常简单的模型

```
 PersonApp.Page = Ember.Object.extend({                                            
      term: ''
  }); 
```

我添加了一条适用于上述模型的简单路线

```
 PersonApp.Router.map(function(match) {
      this.resource("person", { path: "/" }, function() {
          this.route("page", { path: "/page/:page_id" });
          this.route("search", { path: "/search/:page_term" });                     
      });
  }); 
```

最后这是我的路线 setupController 方法

```
 PersonApp.PersonSearchRoute = Ember.Route.extend({
     setupController: function(controller, model) {
         this.controllerFor('person').set('filterBy', model.get('term'));
     }
 }); 
```

该过滤器确实有效（这意味着它确实使用我上面的 setupController 中的 filterBy 修改了 ArrayController）。

但在网址中，我看到以下内容

```
http://www.google.com/#/search/<PersonApp.Page:ember517> 
```

代替

```
http://www.google.com/#/search/foo 
```

有什么办法可以修改模型/路由/设置控制器来显示文本吗？

另外 - 这样的事情应该只是索引/主路由上的一个简单“事件”，而不是我上面的自定义路由吗？如果是这样，我仍然可以修改 url（我假设不是 - 所以这就是我现在将它作为路由的原因）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:48:13.493

您需要`serialize`使用`PersonSearchRoute`. 根据[`serialize`文档](http://emberjs.com/api/classes/Ember.Route.html#method_serialize)，`serialize`是：

> 您可以实现一个挂钩，将路由模型转换为 URL 的参数。

对于您的示例：

```
PersonApp.PersonSearchRoute = Ember.Route.extend({
  setupController: function(controller, model) {
    this.controllerFor('person').set('filterBy', model.get('term'));
  },
  model: function(params) {
    return PersonApp.Page.create({term: params.page_term});
  },
  serialize: function(model) {
    return { page_term: model.term };
  }
}); 
```

[JSBin 示例](http://jsbin.com/ixupad/202/edit)

这将显示正确的 URL：`#/search/foo`但如果您直接导航到该 URL，或在该 URL 处刷新页面，您将需要使用`model`钩子来查找并使用提供的动态参数返回模型。从`model`钩子返回的值是直接导航到 URL 时`model`传入的参数`setupController`，但如果使用 a`transitionTo`或 a `{{#linkTo}}`，则通过这些调用传递的对象将直接传递给`setupController`.

# html - HTML/CSS - 为什么我的页面周围有一个小的空白区域？

> ID：15375128
> 
> 赞同：0
> 
> 时间：2013-03-13T00:55:17.527
> 
> 标签：html, css

这里我有一个非常简单的网页。一个div，基本上。但是，尽管我的宽度设置为 100%，但这个 div 周围没有任何区域。这是一张图片演示。

![在此处输入图像描述](../Images/2bdfe2fe82355b103822acd2ce0addde.png)

下面是我的代码。

```
<html>
    </head>

        <link href='mainStyle.css' rel='stylesheet'/>

        <script src='jquery.js'></script>

    </head>
    <body>

        <div id='navTop'></div>

    </body>
</html> 
```

还有我的 mainStyle.css：

```
#navTop{
    width:100%;
    height:10px;
    background-color: blue;
    position: absolute;
    margin: none;
    padding: none;
} 
```

这可能只是一个愚蠢的 CSS 错误。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:57:10.857

添加：

```
body {
margin: 0;
} 
```

浏览器`<body>`默认提供 8px 的边距

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T00:57:22.350

浏览器在各种元素上都有默认边距/填充，包括`html`和`body`。如果您想`div`直接走到边缘，您还需要将它们设置为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:57:44.830

这可能是因为您`<body>`需要将其边距和填充设置为 0。

**CSS：**
`body { margin: 0px; padding: 0px; }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T00:57:49.843

您的浏览器具有默认样式（字体大小、字体系列、行高等，包括文档周围的边距和填充）。

为避免文档周围出现额外空间，您可以在 CSS 中添加：

```
body,div,p { margin:0;padding:0; } 
```

所以这些元素不会保留默认值。

另一种奇特的方法是使用[CSS 重置脚本](http://meyerweb.com/eric/tools/css/reset/)来确保几乎所有默认样式都被覆盖为 0/null，因此只有您自己的规则才重要。

# c# - 通过 LAN/Internet 传输文件时上传缓冲区大小？

> ID：15375129
> 
> 赞同：0
> 
> 时间：2013-03-13T00:55:24.000
> 
> 标签：c#, network-programming, buffer

读取本地文件并通过网络（本地和互联网）发送它时，是否有任何建议或推荐的缓冲区大小？我们使用 4k，因为它是 Windows VM 页面大小，但由于这可能是延迟、带宽、抖动等的复杂函数，我想了解在大多数情况下可以做得很好的实现。我们希望有一个更简单的解决方案来最小化代码更改行（代码审计）。

```
using (var destFs = new NetworkStream(URI, FileMode.OpenOrCreate))
{
    var buffer = new byte[4*1024]; // <= better buffer size?
    int bytesRead;
    while ((bytesRead = fs.Read(buffer, 0, buffer.Length)) > 0)
    {
        destFs.Write(buffer, 0, bytesRead);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:31:54.273

您应该将其设为 2 的幂，并且您还应该将其设为 4096 的倍数，原因是您给出的原因是它是一个常见的磁盘簇大小。我个人在任何地方都使用 8192，但如果您对吞吐量感兴趣，您可能会发现使用 32k、128k 等尺寸会更好：实验将显示好处开始变得微不足道的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:00:43.947

这取决于 ！

> 如果您使用的是 TCP（您可能对此感兴趣）

TCP 数据包大小的绝对限制是 64K（65535 字节），但实际上这远远大于您将看到的任何数据包的大小，因为较低层（例如以太网）的数据包大小较小。

例如，以太网的 MTU（最大传输单元）为 1500 字节。某些类型的网络（如令牌环）具有较大的 MTU，而某些类型具有较小的 MTU，但对于每种物理技术，这些值是固定的。

> 如果您使用的是 UDP

正确的最大 UDP 消息大小为 65507，由以下公式确定：0xffff - (sizeof(IP Header) + sizeof(UDP Header)) = 65535-(20+8) = 65507

# c - 使用结构、引用和 gettimeofday 函数的一些帮助

> ID：15375131
> 
> 赞同：0
> 
> 时间：2013-03-13T00:55:31.913
> 
> 标签：c, gettimeofday

我希望你们中的一些编码天才可以帮助像我这样的编码障碍者。我必须创建一个在我之前创建的另一个程序上放置时间戳的程序。现在我正在尝试使用 C++ 中的 gettimeofday 函数获取时间（顺便说一句，我们在 Unix 中这样做）。

无论如何，我有一小段代码可以编译，除了我不断收到 2 个特定错误。也许如果有人可以在这方面帮助我，并就代码到目前为止的外观给我一些建议，那就太好了......

```
#include <curses.h>
#include <sys/time.h>
#include <time.h>

ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime);

struct ExpandedTime
{
    double et_usec;
    double et_sec;
    double et_min;
    double et_hour;

};

int main()
{
    struct timeval tv;
    struct ExpandedTime etime;
    gettimeofday(&tv, NULL);
    localTime(tv, ExpandedTime);

}

ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime)
{

} 
```

基本上现在我只是试图正确使用 gettimeofday 以及将定义为 tv 的 timeval 结构和扩展的 time 结构传递到实际的 localtime 函数中......但是我调用 localtime 函数的第 33 行给了我 2 个特定错误。

1.  本地时间未在此范围内声明
2.  ')' 标记之前的预期主表达式

任何帮助将不胜感激......expandedtime函数假设接收gettimeofday的值，它存储在我相信的包含的头文件之一中的某种结构中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:56:55.050

```
ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime); 
```

此时，编译器不知道是什么`ExpandedTime`。您必须将其移至声明之后。

你还有：

```
localTime(tv, ExpandedTime); 
```

那应该是：

```
localTime(tv, &etime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:01:35.120

我建议在你的结构中使用 typedef 来简化调用它们。（老实说，我无法编译上述内容。）

我认为，通常情况下，您需要在任何地方使用“strut ExpandedTime”。

我知道如何单独使用“ExpandedType”作为结构的唯一方法是对它进行 typedef，如下所示：

```
typedef struct expanded_time_struct {
// your struct's data
} ExpandedTime; 
```

所以在你的情况下，类似：

```
typedef struct ExpandedTime_struct
{
    double et_usec;
    double et_sec;
    double et_min;
    double et_hour;

} ExpandedTime;

ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime);
int main()
{
    struct timeval tv;
    ExpandedTime etime;
    gettimeofday(&tv, NULL);
    localTime(&tv, &etime);

}

ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime)
{

} 
```

# gruntjs - grunt 意外的令牌：错误

> ID：15375140
> 
> 赞同：0
> 
> 时间：2013-03-13T00:56:52.070
> 
> 标签：gruntjs

我按照[http://gruntjs.com/getting-started](http://gruntjs.com/getting-started)在我的 Ubuntu 11.10 上安装 grunt。当我运行 grunt 时，我得到了这个错误：

```
/opt/node-v0.10.0-linux-x64/lib/node_modules/grunt-cli/package.json:2
  "name": "grunt-cli",
        ^

node.js:134
    throw e; // process.nextTick error, or 'error' event on first tick
    ^
SyntaxError: Unexpected token :
    at Module._compile (module.js:397:25)
    at Object..js (module.js:408:10)
    at Module.load (module.js:334:31)
    at Function._load (module.js:293:12)
    at require (module.js:346:19)
    at Object.<anonymous> (/opt/node-v0.10.0-linux-x64/lib/node_modules/grunt-cli/lib/info.js:13:11)
    at Module._compile (module.js:402:26)
    at Object..js (module.js:408:10)
    at Module.load (module.js:334:31)
    at Function._load (module.js:293:12) 
```

我以前使用过 grunt 0.3.16。我正在升级到最新的咕噜声。它似乎与我的项目无关。我在任何目录中都收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:03:19.670

事实证明我没有正确安装 node.js。我只是解压 node.js 二进制文件并将其添加到我的路径中。我想这就是它不起作用的原因。我下载了 node.js 源代码，使用 make 编译和安装它，它现在可以工作了。谢谢你们的评论。

# git - 更改分支后如何自动刷新 Visual Studio 2012 Ultimate Solution Explorer？

> ID：15375147
> 
> 赞同：0
> 
> 时间：2013-03-13T00:57:29.193
> 
> 标签：git, visual-studio-2012

我正在使用 Git 进行源代码控制。我有一个解决方案的主分支和一个“工作”分支。我已经从工作分支的解决方案中删除了 5 个文件，这些文件仍然存在于 master 上。

我正在使用 VS2012 Ultimate。

我在 VS2012 中从 master 设置项目。解决方案资源管理器中的一切都很好。

然后我 git checkout -b work 将分支从 master 交换到工作。在文件系统上，5 个文件消失了。在解决方案资源管理器中，它们仍然存在。

让解决方案资源管理器跟踪文件系统中发生的事情的最佳方法是什么？我是一个完全的 VS2012 新手，所以如果我错过了明显的我道歉。我知道我可以手动排除它们，但这不适用于大的变更集。我也有点害怕添加或更新可能没有同步。

在 Eclipse 中，我只需刷新它就会同步。VS2012也应该这样吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:16:26.373

正如 Edward Thomson 所指出的，升级到最新的 Visual Studio Tools for Git 可以提供此功能。谢谢爱德华：）

# css - 在 Bootstrap 媒体列表中将跨度推到底部

> ID：15375148
> 
> 赞同：0
> 
> 时间：2013-03-13T00:57:29.873
> 
> 标签：css, twitter-bootstrap

我正在做一个简单的论坛。

可以在此处查看帖子示例：http: [//jsfiddle.net/sKPhx/6/](http://jsfiddle.net/sKPhx/6/)

第二个和第三个帖子都很好。第一个帖子，我想底部跨度说：

```
Class: Sysop - Member: 3 years ago 
```

与 hr 标签一起被推到底部。我目前的设计可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:12:11.040

这是新的 jsiddle：http: [//jsfiddle.net/sKPhx/7/](http://jsfiddle.net/sKPhx/7/)

添加此样式：

```
.media {
    position:relative;
}
.bottomaligned {
    position:absolute;
    bottom:10px;
} 
```

但是尝试重新考虑重新设计以使 html 更易于维护。

# iphone - 键盘消失后如何重新定位 Web 视图？

> ID：15375152
> 
> 赞同：-1
> 
> 时间：2013-03-13T00:57:48.757
> 
> 标签：iphone, ios, html, uiwebview, keyboard

我的应用程序中的 uiwebview 有问题。键盘完全取代了网页内容，我无法将其移回原位。在输入字段时，webview 会垂直上下弹跳也存在问题。

键盘前

[之前 http://www.306radio.ca/mobile/photo.PNG](http://www.306radio.ca/mobile/photo.PNG)

键盘后（不能向下滚动）（[http://www.306radio.ca/mobile/chat](http://www.306radio.ca/mobile/chat)） [后 http://www.306radio.ca/mobile/photo1.PNG](http://www.306radio.ca/mobile/photo1.PNG)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:33:10.350

实现**`UIKeyboardDidShowNotification`**等**`UIKeyboardWillHideNotification`**你可以做 Web-view reposition 。

**例子：**

```
- (void)viewDidLoad
{

  [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWasShown:)
                                                     name:UIKeyboardDidShowNotification
                                                   object:nil];

  [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWillHide:)
                                                     name:UIKeyboardWillHideNotification
                                                   object:nil];

}

- (void)keyboardWasShown:(NSNotification *)notification
{
   //align Web-view here
}
- (void)keyboardWillHide:(NSNotification *)notification
{
   //align Web-view here
}

- (void)viewDidUnload
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

# visual-studio-2008 - 设置我可以在 MSVC++ 2008 中用作环境变量/宏的变量

> ID：15375162
> 
> 赞同：0
> 
> 时间：2013-03-13T00:58:45.513
> 
> 标签：visual-studio-2008, visual-c++

我想在我的项目配置中设置一个变量，然后可以在配置的其他地方使用与环境变量相同的方式，或者像 $(OutDir) 这样的内置宏值等。

我认为这是这样做的方法： ![在此处输入图像描述](../Images/b687d16460ce4f87cbfb837c02fcf774.png)

但是，当我在构建后步骤中使用 $(ConfigurationSuffix) 时（我想设置单个规则来处理 myapp.exe Vs myapp_d.exe）我收到一个错误，即 var 不存在。

我想要的可能吗？如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:40:59.313

我认为您所做的是设置一个变量以供*调试*时使用，而不是在构建时使用。

做你想做的事，试试：

*   在 VS2008 中打开您的解决方案，转到`View -> Property Manager`
*   在 Property Manager 中，选择您的项目
*   选择所有调试配置（使用 Ctrl+单击）
    *   右键单击您的多项选择`Add New Project Property Sheet...`，，调用它`dbgprops`或类似名称
    *   双击任意一个`dbgprops`
    *   前往`User Macros`，点击`Add Macro`
    *   输入名称和值作为`ConfigurationSuffix`和`_d`
    *   打钩`Set this macro as an environment variable in the build environment`
*   选择所有发布配置并执行类似操作，调用工作表 relprops，并将值留空而不是“_d”

`$(ConfigurationSuffix)`现在从您的构建事件中尝试！

# python - Pycrypto 安装致命错误：找不到 gmp.h 文件

> ID：15375171
> 
> 赞同：49
> 
> 时间：2013-03-13T00:59:50.513
> 
> 标签：python, osx-mountain-lion, gmp, pycrypto

似乎有很多人遇到过类似的问题，但是，经过大量搜索，我无法找到适用于我的特定架构的解决方案。我正在尝试安装 Pycrypto（作为 Fabric 的子公司）无济于事。

我正在通过 Homebrew 运行 Mac 10.8.2、python 2.7.3 和 XCode 4.6——使用 pip 或 easy_install 安装（我都试过了）。据我所知，问题可能与我的 XCode 版本有关，也可能与我的库有关。XCode 的命令行工具已安装，我已尝试将其放入`setenv ARCHFLAGS "-arch i386 -arch x86_64"`.cshrc 文件中。我也试过了`ln -s /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer /Developer`。至于图书馆，我尝试通过链接它们`ln -s /usr/local/lib/libgmp.dylib /usr/lib/libgmp.dylib`- 但这也没有用。

无论我尝试什么角度，错误总是相同的（见下文）。任何和所有的帮助将不胜感激。

```
/usr/local/share/python% pip install pycrypto
Downloading/unpacking pycrypto
  Running setup.py egg_info for package pycrypto

Installing collected packages: pycrypto
  Running setup.py install for pycrypto
    building 'Crypto.PublicKey._fastmath' extension
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -pipe -mmacosx-version-min=10.8 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -Wno-unused-value -Wno-empty-body -Qunused-arguments -fwrapv -Wall -Wstrict-prototypes -std=c99 -O3 -fomit-frame-pointer -Isrc/ -I/usr/include/ -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/_fastmath.c -o build/temp.macosx-10.8-intel-2.7/src/_fastmath.o
src/_fastmath.c:36:11: fatal error: 'gmp.h' file not found
# include <gmp.h>
          ^
1 error generated.
error: command '/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang' failed with exit status 1
Complete output from command /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/ym/v8l23q_x2xz_qhx3m84n6ym00005fr/T/pip-build/pycrypto/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/ym/v8l23q_x2xz_qhx3m84n6ym00005fr/T/pip-Xb7nGV-record/install-record.txt --single-version-externally-managed:
running install

running build

running build_py

running build_ext

running build_configure

building 'Crypto.PublicKey._fastmath' extension

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -pipe -mmacosx-version-min=10.8 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -Wno-unused-value -Wno-empty-body -Qunused-arguments -fwrapv -Wall -Wstrict-prototypes -std=c99 -O3 -fomit-frame-pointer -Isrc/ -I/usr/include/ -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/_fastmath.c -o build/temp.macosx-10.8-intel-2.7/src/_fastmath.o

src/_fastmath.c:36:11: fatal error: 'gmp.h' file not found

# include <gmp.h>

      ^

1 error generated.

error: command '/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain    /usr/bin/clang' failed with exit status 1

----------------------------------------
Command /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/ym/v8l23q_x2xz_qhx3m84n6ym00005fr/T/pip-build/pycrypto/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/ym/v8l23q_x2xz_qhx3m84n6ym00005fr/T/pip-Xb7nGV-record/install-record.txt --single-version-externally-managed failed with error code 1 in /var/folders/ym/v8l23q_x2xz_qhx3m84n6ym00005fr/T/pip-build/pycrypto
Storing complete log in /Users/me/.pip/pip.log 
```

我尝试调用 Fabric 时的错误：

```
Traceback (most recent call last):
  File "/usr/local/share/python/fab", line 5, in <module>
from pkg_resources import load_entry_point
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py", line 2815, in <module>
working_set.require(__requires__)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py", line 690, in require
needed = self.resolve(parse_requirements(requirements))
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py", line 588, in resolve
raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: pycrypto>=2.1,!=2.4 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2016-03-02T16:46:08.987

如果您使用 Homebrew，这应该可以解决问题：

```
brew install gmp
env "CFLAGS=-I/usr/local/include -L/usr/local/lib" pip install pycrypto 
```

使用 env 只会使它适用于该调用。如果您需要稍后在此会话中安装 pycrypto，请导出该变量。

```
export "CFLAGS=-I/usr/local/include -L/usr/local/lib" 
pip install pycrypto 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-06T17:17:57.780

我能够使用以下命令安装 PyCrypto：

```
CFLAGS=-I/opt/local/include pip install pycrypto 
```

我通过 MacPorts 安装了 GMP，在 OSX 10.8.3 上运行 Python 2.7.2，来自 python.org。在这种情况下，我正在安装到 virtualenv 中。

使用 PyCrypto 时，我确实收到以下警告，但它仍然有效：

```
/Users/me/.virtualenvs/blah/lib/python2.7/site-packages/Crypto/Util/number.py:57: PowmInsecureWarning: Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.
  _warn("Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.", PowmInsecureWarning) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T01:03:48.667

简单地链接 gmppylib 是没有帮助的，因为 pycrpto 需要编译一些包含 gmp.h 的 C 文件。您应该安装了包含 gmp.h 的 GMP 库。看来您必须在 Mac OS 上安装 GMP。以下两个链接应该对您有所帮助。

*   [在 Mac OS X 上安装 gmp 和 mpfr](http://math.digi2.jp/math/mp/mpfr/install.html)
*   [使用 Xcode 在 MacOS X 上安装 GMP](https://stackoverflow.com/questions/12852228/installing-gmp-on-macos-x-with-xcode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T02:01:07.123

我终于意识到问题的根源在于 Fabric 和 Pycrypto 版本之间的不兼容。一旦我将我的 Fabric 版本降级到 1.2.6，就不再出现上述错误。然后，我使用本[教程](http://docs.fabfile.org/en/1.6/installation.html#pycrypto)作为起点。然而，尽管有教程和旧版本的 Fabric，我仍然得到了`PyCrypto >= 2.1, !=2.4`错误。我最终从源代码安装了 Pycrypto 2.2（因为显然即使在指定[时](https://stackoverflow.com/questions/5226311/installing-specific-package-versions-with-pip)`pip`也只会安装 v. 2.0.1，`pip -Iv install pycrypto==2.2`而v. 2.6 会导致错误）。最后，一切正常。`gmp.h`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T15:49:17.297

这是对我有用的修复：

[https://medium.com/software-bugs/84afab886a1e](https://medium.com/software-bugs/84afab886a1e)

您需要根据安装标头包含路径 (-I) 创建符号链接，但会崩溃。例子：

构建“Crypto.PublicKey._fastmath”扩展

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -pipe -march=native -mmacosx-version-min=10.7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk -isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10 .7.sdk/usr/include -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include -I/Applications/Xcode.app/Contents /Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/X11/include -Wno-unused-value -Wno-empty-body -Qunused-arguments -fwrapv -Wall -Wstrict-prototypes -std =c99 -O3 -fomit-frame-pointer -Isrc/ * *-I/usr/include/ -**I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/_fastmath.c -o build/temp.macosx-10.7-x86_64-2.7 /src/_fastmath.o

src/_fastmath.c:36:11：致命错误：找不到“gmp.h”文件

# windows - 交错批处理脚本处理

> ID：15375180
> 
> 赞同：0
> 
> 时间：2013-03-13T01:00:40.867
> 
> 标签：windows, batch-file

我正在寻找批处理脚本的一些任务，有人可以帮忙吗？

我有一个主批处理脚本，它调用了 build.bat。当调用构建脚本（start cmd /k build.bat）时，它会执行构建。然后它会返回到 Main 来完成剩下的任务。构建需要很长时间。

是否可以开始构建并返回 main 并在 main 中完成某些任务并返回 Build.bat ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:02:35.370

不完全的。您必须提取要并行运行的主脚本部分，不能来回跳跃。

```
Main --> build task    --> more main
     --> part of main  | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:48:30.783

你可以——在某种程度上。

为自己设置一个批次，例如`WAIT4F.BAT`

```
@ECHO OFF
:: Wait for file %1
IF "%~1"=="" GOTO :eof
:loop
IF NOT EXIST "%~1" choice /t 1 /d y /n >NUL&GOTO loop 
```

只需插入`CALL WAIT4F filename`即可让一批等待，直到另一批创建文件（大概是在完成一个步骤时）

这样，批处理会暂停，直到并行进程完成其任务，因此两个（或更多！）批处理可以同时运行。它还有一个优点是创建的文件可以包含允许批次通信的信息 - 例如错误级别。

就个人而言，我会在 %temp% 中创建（se）标志文件

如果您使用的是 pre-Vista，请使用`PING -n 2 127.0.0.1 >nul`CHOICE 命令代替（这只是延迟）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:02:58.050

“命令行窗口”可能不是您要找的词。

但是是的，一个 .bat 文件可以调用另一个，然后返回到第一个。

魔术是在调用子 .bat 或 .cmd 文件时使用关键字“call”：

*   [http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/call.mspx](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/call.mspx)

PS：

如果您正在构建软件，我强烈建议您考虑使用“Makefile”脚本而不是使用 .bat 文件。恕我直言...

# javascript - 如何将跨度添加到 HTML 的输入文本框中

> ID：15375183
> 
> 赞同：2
> 
> 时间：2013-03-13T01:00:55.110
> 
> 标签：javascript, html

我可以从 JavaScript 打印信息，如何将信息添加到文本框

以下代码显示与`description12`来自 JavaScript的信息相关

```
<h6> Description : </h6>  <span id="Description12"> </span><br /> 
```

我现在正试图将信息输入文本框

```
<input name="reportnoss" type="text" id="Description12"> 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:06:53.777

您不能为同一页面上的两个控件提供相同的 ID - 它们必须是唯一的。

您为输入文本框提供的 ID 应该用于该控件。

如果您必须在客户端执行此操作，您将需要使用 javascript 或 jQuery 来执行此操作。

就像是：

`document.getElementById("reportnoss").innerText=document.getElementById("Description12").innerText;` 如果您为输入字段提供 ID 将起作用`reportnoss`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:48:09.873

正如其他答案所说，您不能拥有相同的身份。

```
<h6> Description : </h6>  <span id="Description12"> </span><br />

<input name="reportnoss" type="text" id="DescriptionTextBox"> 
```

设置跨度文本以输入文本的 Javascript：

```
document.getElementById("DescriptionTextBox").value=document.getElementById("Description12").innerText; 
```

请注意，您应该使用`.value`而**不是** `.innerText``input type="text"`

如果这不是您所要求的，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:37:07.323

首先，您不能在同一个文档中有 2 个元素具有相同的`id`. 删除`input`'s`id`或将其更改为另一个`id`.

```
<h6> Description : </h6>  <span id="Description12"> </span><br />
<input name="reportnoss" type="text" id="Input_Description12"> 
```

然后，获取文本框中的文本并将其放入`span`：

```
var txt = document.querySelector("#Input_Description12").value;  //get the text
document.querySelector("#Description12").innerText = txt;        //put it in

  -and the opposite-

var txt = document.querySelector("#Description12").innerText;
document.querySelector("#Input_Description12").value = txt; 
```

演示：http: [//jsfiddle.net/DerekL/bFZMb/](http://jsfiddle.net/DerekL/bFZMb/)

使用方法：

*   [`.querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)
*   `.innerText`

# javascript - 使用 JSONP Ajax 响应填充 JSON 对象数组

> ID：15375186
> 
> 赞同：0
> 
> 时间：2013-03-13T01:00:57.407
> 
> 标签：javascript, jquery, ajax, jsonp

我是 JS/JQuery 的菜鸟。这是代码：

```
ids = ["1", "2", "3"]
var imageData = [];
for (i=0; i<ids.length; i++) {
    $.ajax({
        url: 'http://my.images.edu/' + ids[i] + '/info.json',
        type: 'GET',
        dataType: 'jsonp',
        success: function(data) {
            imageData.push(data);
        }
    });
};
// now I want to do stuff with in a loop with the populated 
// array, but it's always empty!
console.log(imageData.length); 
```

JSONP 正在工作（我可以在函数中将 JSON 对象响应记录到控制台`success`）。我[基于这个问题](https://stackoverflow.com/questions/1353245/how-do-i-add-items-to-an-array-in-jquery)的猜测是，当我想使用它时，数组还没有填充，但我可能错了。如果是这样，我该如何解决它，否则，我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:05:50.993

在当前函数上下文完成执行之前，不会编辑 imageData。

代码将运行完成，然后成功回调将一一运行。您必须有自己的逻辑来处理放置在回调中的数据。

由于这看起来您实际上希望在执行操作之前完成所有回调，因此您可能需要查看 jQuery [defereds](http://api.jquery.com/category/deferred-object/)

沿着[这些路线](http://jsfiddle.net/4tG6G/)在循环中工作的东西。

```
$('#button').click(function() {
    $.when(
        $.ajax({
            url: '/echo/html/',
            success: function(data) {
                alert('request complete')
            }
        }),
        $.ajax({
            url: '/echo/html/',
            success: function(data) {
                alert('request complete')
            }
        })
    ).then( function(){
        alert('all complete');
    });
}); 
```

# ruby-on-rails - 登录后活动管理员重定向

> ID：15375187
> 
> 赞同：4
> 
> 时间：2013-03-13T01:01:11.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

当管理员登录时，它会自动重定向到主页（即不是管理员仪表板）。我不确定它为什么这样做或如何更改它......

路线.rb

```
ActiveAdmin.routes(self)

  devise_for :admin_user, ActiveAdmin::Devise.config

  get "guidelines/topic"
  get "guidelines/topichospital"
  get "guidelines/topicspecialty"
  get "guidelines/favourite"
  get "profiles/show"
  get "guidelines/show"

root :to => 'guidelines#index' 
```

我的 application_controller.rb 已更改为在用户登录后重定向（但不应该是管理员登录） - 这是问题吗？

```
include PublicActivity::StoreController
  protect_from_forgery

def after_sign_in_path_for(resource)
 favourites_path
end

hide_action :current_user 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:26:09.740

感谢 Zippie，我找到了答案。在 admin_controller.rb 我添加：

```
def after_sign_in_path_for(resource)
     admin_dashboard
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T08:00:28.887

我不得不这样做：

```
class ActiveAdmin::Devise::SessionsController
  def after_sign_in_path_for(resource)
    admin_dashboard_path
  end
end 
```

解决问题。

如果您需要，它还为定制提供了一些可能性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-27T23:13:50.660

```
if resource.class == User
  root_path
elsif resource.class == AdminUser
  admin_root_path
else
end 
```

# git - 什么是跟踪参考？

> ID：15375192
> 
> 赞同：79
> 
> 时间：2013-03-13T01:01:37.853
> 
> 标签：git, git-extensions

当我通过 Git Extensions 将新分支推送到远程存储库时，我收到一条警告消息

```
The branch {branch name} does not have a tracking reference. Do
you want to add a tracking reference for {branch name}? 
```

什么是跟踪参考？我发现在 Google 中只提到了一些跟踪引用，并且没有真正的定义。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-13T03:46:27.340

基本思想是有纯粹的本地引用（例如，分支、标签），然后有远程跟踪引用，这些引用遵循其他 repos 中发生的情况。因为 Git 是去中心化的，所以您可以为一个分支选择一个与远程分支中使用的名称相同的名称，而无需知道另一个分支，这样它们就可以完成完全不同的工作。Git 允许您这样做，但它也提供了一种将本地引用链接到远程引用的方法。

例如，考虑以下情况：

```
% git branch -a
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/maint
  remotes/origin/master
  remotes/origin/next
  remotes/origin/pu
  remotes/origin/todo 
```

`origin`在这里，我们在call`next`和上有分支`todo`。

```
% git checkout -t remotes/origin/next
Branch next set up to track remote branch next from origin.
Switched to a new branch 'next'
% git branch todo 
```

现在我们有一个本地分支`next`，它跟踪同名的远程分支和`todo`不会随着对`remotes/origin/todo`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-18T19:00:00.133

本地 git 分支可以跟踪远程分支，这意味着默认情况下 git push 和 git pull 命令将知道将提交推入和拉出被跟踪的分支。git status 也会告诉你当前本地分支和它正在跟踪的远程分支之间的状态。当你克隆一个 git 仓库时，git 会添加一个对本地 master 分支的跟踪引用来跟踪远程 master 分支。当你从一个新的远程分支签出时，git 会为创建的本地分支添加一个跟踪引用来跟踪你签出的远程分支。

但是，如果您在本地创建新分支，然后将其推送到远程存储库，则必须明确告诉 git 您是否希望本地分支开始跟踪新的远程分支。将本地分支推送到远程存储库时，您可以使用`-u`or选项执行此操作： .`--set-upstream``git push -u origin my-new-branch`

您可以使用以下命令检查本地分支正在跟踪哪些远程分支（如果有）`git branch -vv`以下是输出的一个小示例。

```
 b1     560eb64 Added file.txt
  b2     560eb64 [origin/b2] Added file.txt
  b3     b638c18 [origin/r1: ahead 1] Added file3.txt
* master 560eb64 [origin/master] Added file.txt 
```

在这种情况下，我们有本地分支`master`、和。该分支正在跟踪一个名为 的远程分支，该分支没有跟踪任何远程分支，该分支正在跟踪一个名为 的远程分支，该分支正在跟踪一个名为的远程分支。还显示与跟踪的分支相关的分支的状态。这里的分支是被跟踪的远程分支之前的 1 个提交，并且其他分支是最新的，它们各自的远程跟踪分支。`b1``b2``b3``master``master``b1``b2``b2``b3``r1``git branch -vv``b3`

因此，如果您创建一个本地分支并推送到远程存储库，您是否要为该分支添加跟踪引用？通常，当您将新的本地分支推送到远程存储库时，您这样做是为了与其他开发人员就某个功能进行协作。如果你为本地分支添加跟踪引用，你可以方便地拉取其他人对分支所做的更改，所以我会说在大多数情况下你想要添加跟踪引用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-01T04:21:34.767

Nick Quaranto 的优秀博客*git ready*有一篇解释[远程跟踪分支](http://gitready.com/beginner/2009/03/09/remote-tracking-branches.html)的帖子：

> 远程跟踪分支有几个不同的目的：
> 
> *   与远程工作相比，它们用于链接您在本地工作的内容。
>     
>     
> *   当您使用 git pull 或 git fetch 时，他们会自动知道要从哪个远程分支获取更改。
>     
>     
> *   更好的是，git status 会识别出你在远程版本分支前提交了多少次。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-29T22:44:11.077

是的，您可能想添加它。在控制台中执行此操作： git branch --set-upstream-to origin/master

# asp.net-mvc - 我想通过 Kendo UI 组件在 MVC.net 3 中显示和编辑一个复杂的模型。这样做的最佳做法是什么？

> ID：15375196
> 
> 赞同：1
> 
> 时间：2013-03-13T01:01:58.543
> 
> 标签：asp.net-mvc, model, kendo-ui

我有一个复杂的 ViewModel： 例如：

```
public ExampleViewModel { 
    public string name {get;set;}
    public string description {get;set;}
    public List<ExampleViewModelSubItem> Items {get;set;}
    // multiple other collections and properties.
} 
```

所以我从 MVC 路由读取 KendoUI 数据源没有问题

```
public JsonObject GetExample() {
  return Json(getExample(), AllowJSONGet);
} 
```

我遇到的问题是我应该如何构建数据源/页面。

如果我有一个简单的 ViewModel 会很容易，将集合加载到网格中......完成。

但是当我面对一个复杂的 ViewModel（对象图）时，它就不是那么简单了。

我想到的是创建一个查询整个对象并发布到整个对象的数据源。

然后绑定到模型的每个属性的小部件（列表的网格）。

在没有客户端组件的常规 MVC.net 中，它会相当简单。

使用 Kendo 控件使其看起来更加复杂。

非常感谢。

# javascript - 执行事件时没有任何反应

> ID：15375197
> 
> 赞同：0
> 
> 时间：2013-03-13T01:02:02.317
> 
> 标签：javascript, html

我有一个令人困惑的问题。

如下代码，我看不出有什么问题，我已经与我的其他代码进行了比较，它的格式完全相同/非常相似，但是这个由于某种原因没有执行事件。

我也试过在 if 语句中这样做：

```
if (regExName.test(theForm.txtName.value)) 
```

仍然是同样的错误，根本没有任何反应。lbl？？？根本不显示它是否工作的消息。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style type="text/css">
        .auto-style1 {
            width: 100%;
        }
        .auto-style2 {
            width: 265px;
        }
        #Text1 {
            width: 186px;
        }
        #Text2 {
            width: 186px;
        }
        #Text3 {
            width: 186px;
        }
        #txtName {
            width: 186px;
        }
        #txtAge {
            width: 186px;
        }
        #txtNumber {
            width: 186px;
        }
    </style>
    <script language="javascript" type="text/javascript">

        function btnValidate(theForm) {
            regExName = new RegExp("[a-zA-Z]");
            regExAge = new RegExp("^([1])?[0-9]{2}");
            regExNum = new RegExp("[2-9][0-9]{2}\-[0-9]{4}");

            if (regExName.test(theForm.txtName))
                lblName.innerHTML = "Valid, continue.";
            else 
                lblName.innerHTML = "Invalid Name Entry, please try again.";

            if (regExAge.test(theForm.txtAge))
                lblAge.innerHTML = "Valid, continue.";
            else
                lblAge.innerHTML = "Invalid Age Entry, please try again.";

            if (regExNum.test(theForm.txtNumber))
                lblNumber.innerHTML = "Valid, continue.";
            else
                lblNumber.innerHTML = "Invalid Phone Number Entry, please try again.";
        }

    </script>
</head>
<body>
    <form action="">

    <table class="auto-style1">
        <tr>
            <td class="auto-style2">Name:&nbsp;&nbsp;&nbsp;
                <input id="txtName" type="text" /></td>
            <td>
                <div id="lblName">
                </div>
            </td>
        </tr>
        <tr>
            <td class="auto-style2">Age:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input id="txtAge" type="text" /></td>
            <td>
                <div id="lblAge">
                </div>
            </td>
        </tr>
        <tr>
            <td class="auto-style2">Number:
                <input id="txtNumber" type="text" /></td>
            <td>
                <div id="lblNumber">
                </div>
            </td>
        </tr>
    </table>
    <p>
        <input id="Submit1" type="submit" value="Validate" onsubmit="btnValidate(this.form)"/></p>
        </form>
</body>
</html> 
```

任何帮助将不胜感激。

**更新代码**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:07:35.697

您的按钮不在表单中，因此`this.form`返回`undefined`。将表单放在表格（和按钮）的外部，并将验证侦听器放在表单的`onsubmit`处理程序上，而不是按钮上。并将输入类型按钮更改为输入类型提交。

关于代码的其他一些建议：

```
>   <script language="javascript" type="text/javascript"> 
```

script 元素的语言属性在 HTML 4 中已弃用，并在 HTML5 中被删除，只是不要使用它。type 属性在 HTML5 中是可选的（并且已经在实践中使用了很长时间），因此也考虑将其删除。少了一次出错的机会。

```
>   function btnValidate(theForm) {
>        regExName = new RegExp("[a-zA-Z]");
>        regExAge = new RegExp("^([1])?[0-9]{2}");
>        regExNum = new RegExp("[2-9][0-9]{2}\-[0-9]{4}"); 
```

应使用`var`关键字将变量保持在本地，因此：

```
 var regExName = new RegExp("[a-zA-Z]");
        var regExAge = new RegExp("^([1])?[0-9]{2}");
        var regExNum = new RegExp("[2-9][0-9]{2}\-[0-9]{4}"); 
```

.

```
>        if (regExName.test(theForm.txtName))
>            lblName.innerHTML = "Valid, continue."; 
```

不要使用元素id作为全局变量，这是早期IE引入的设计缺陷，为了兼容性被其他浏览器模仿，请不要这样做。使用以下方法获取对元素的引用：

```
 var lblName = document.getElementById('lblName'); 
```

.

```
>        else 
>            lblName.innerHTML = "Invalid Name Entry, please try again."; 
```

请在 if 语句周围使用括号。它使代码更具可读性和更易于维护。以上也可以应用于其余代码。

至于 HTML：

```
> <!DOCTYPE html>
> <html xmlns="http://www.w3.org/1999/xhtml"> 
```

你有一个 HTML DOCTYPE，所以删除 xmlns 属性。

表单控件必须在表单中并且有一个成功的名称（即当表单提交时它们的值被发送到服务器）。所以用名称替换控件ID，例如

```
<input name="txtName" type="text"> 
```

最后，不要在 HTML 文档中使用 XML 样式标记。

### 编辑

所以这里是你的代码清理。注意该函数必须返回`false`取消提交，否则表单会提交。

```
<!DOCTYPE html>
  <title></title>
  <script>

    function btnValidate(theForm) {
      var regExName = new RegExp("[a-zA-Z]");
      var regExAge = new RegExp("^([1])?[0-9]{2}");
      var regExNum = new RegExp("[2-9][0-9]{2}\-[0-9]{4}");
      var lblName = document.getElementById('lblName');
      var lblAge = document.getElementById('lblAge');
      var lblNumber = document.getElementById('lblNumber');
      var returnValue = true;

      if (regExName.test(theForm.txtName.value)) {
         lblName.innerHTML = "Valid, continue."

      // If test fails, write error message and set returnValue to false
      } else {
         lblName.innerHTML = "Invalid Name Entry, please try again.";
         returnValue = false;
      }

      if (regExAge.test(theForm.txtAge.value)) {
         lblAge.innerHTML = "Valid, continue.";
      } else {
         lblAge.innerHTML = "Invalid Age Entry, please try again.";
         returnValue = false;
      }

      if (regExNum.test(theForm.txtNumber.value)) {
         lblNumber.innerHTML = "Valid, continue.";
      } else {
         lblNumber.innerHTML = "Invalid Phone Number Entry, please try again.";
         returnValue = false;
      }

      // returnValue will be either false, cancelling submit, or 
      // any other value to continue submit 
      return returnValue;
    }

  </script>

  <!-- note that the listener must return a value -->
  <form action=""  onsubmit="return btnValidate(this)">

    <table class="auto-style1">
        <tr>
            <td class="auto-style2">Name:&nbsp;&nbsp;&nbsp;
                <input name="txtName" type="text"></td>
            <td>
                <div id="lblName"></div>
            </td>
        </tr>
        <tr>
            <td class="auto-style2">Age:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input name="txtAge" type="text"></td>
            <td>
                <div id="lblAge">
                </div>
            </td>
        </tr>
        <tr>
            <td class="auto-style2">Number:
                <input name="txtNumber" type="text" /></td>
            <td>
                <div id="lblNumber">
                </div>
            </td>
        </tr>
    </table>
    <p>
        <input type="submit" value="Validate"></p>
  </form>
</html> 
```

# c++ - std::vector 崩溃？

> ID：15375199
> 
> 赞同：0
> 
> 时间：2013-03-13T01:02:35.003
> 
> 标签：c++, pointers, stdvector

写了一个小程序来测试向量，我不明白为什么会崩溃，有人可以帮忙吗？

```
#include <iostream>
#include <algorithm>
#include <vector>

void print(int* i)
{
        std::cout << i << std::endl;
}

int main()
{
        std::vector<int*>* intPtr;

        intPtr->push_back(new int(1));
        intPtr->push_back(new int(2));
        intPtr->push_back(new int(3));

        std::for_each(intPtr->begin(), intPtr->end(), print);
} 
```

现在忽略内存泄漏，这只是一个简单的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:14:06.047

```
std::vector<int*> intPtr; // no need to make this a pointer. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:07:02.483

你忘了初始化`intPtr`。尝试将该行更改为：

```
std::vector<int*>* intPtr = new std::vector<int*>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:14:57.640

你应该像这样初始化它：

```
std::vector<int*> *intPtr = new vector<int*>(); 
```

# database - 在维度表中包含来自累积快照表的所有信息？

> ID：15375200
> 
> 赞同：1
> 
> 时间：2013-03-13T01:02:35.157
> 
> 标签：database, database-design, database-schema, data-warehouse

我已经为客户注册的步骤创建了一个累积的快照事实表——例如，每个步骤的时间，步骤之间的时间。

如果我想要一个非常丰富的客户维度，我可以包含来自累积快照表的所有列吗？还是那是多余的？

如果我在客户维度中包含来自累积快照的列，那么为流程提供事实表有什么意义？如果我不包含这些列，我将无法使用我的客户维度轻松过滤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:25:30.613

当您想要回答诸如“生命周期支出 > 1000 美元的客户在过去 7 天内的总净销售额是多少？”之类的问题时，通常将“近实时”指标添加到客户维度对分析很有用。

将此数据存储在累积快照中会设置一个多步骤 ETL 过程：

1.  加载交易事实表
2.  加载客户维度，保留昨天的指标。
3.  负载累积快照
4.  使用新的生命周期指标更新客户维度。或者，创建一个将客户暗淡与此快照表预联接的视图。

作为客户维度构建的一部分，您可以选择执行此操作，但将表分离到累积快照中对于直接在该快照表上进行分析很有用。

例如，如果我的累积快照是“按产品划分的总终身客户销售额”，我可以从中提取所有产品的总终身销售额并将其放在我的客户暗处（可能比再次重新查询交易事实更快）。我仍然希望能够通过客户分析将事实用于产品。

*如果您的累积快照仅*针对客户，我可以看到直接在客户暗处进行构建。但通常把它放在较低的粒度是有用的，这样可以用它来做其他事情。

# delphi - 从互联网下载 jpg 没有错误，否则加载 template.jpg

> ID：15375201
> 
> 赞同：2
> 
> 时间：2013-03-13T01:02:35.113
> 
> 标签：delphi, delphi-2010, indy, indy10

我有一个 TImage，它显示文件夹中的 JPG 图像。每个 JPG 图像名称都是数字（例如 5968.jpg） 如果 JPG 图像不存在，我目前加载模板 JPG。

但是，我想在检查本地文件夹后检查互联网

我知道 URL，我只是将图像编号和扩展名连接起来（例如' [http://www.myurl.com/images/'+](http://www.myurl.com/images/) Tags.Names[Index] +'.jpg'）

如果本地不存在此图像，我想下载它。

```
if FileExists(TagPath + Tags.Names[Index] + '.jpg') then
    imgTag.Picture.LoadFromFile(TagPath + Tags.Names[Index] + '.jpg')
   else
    imgTag.Picture.LoadFromFile(ExtractFilePath(Application.ExeName) + 'Template.jpg'); 
```

我如何将图像（使用 idHTTP？）下载到 TImage（imgTag）。我将如何处理任何异常。

流程应该是这样，没有任何错误。

```
if FileExists locally, load image
else
 if fileEists on the internet load Image
  else
   Load the template 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:59:13.573

您可以使用 Indy 的`TIdHTTP`组件，例如：

```
uses
  ..., IdHTTP;

var
  FileName: string;
  Strm: TMemoryStream;
begin
  FileName := TagPath + Tags.Names[Index] + '.jpg';
  if not FileExists(FileName) then
  begin
    try
      Strm := TMemoryStream.Create;
      try
        HTTP := TIdHTTP.Create(nil);
        try
          HTTP.Get('http://www.myurl.com/images/' + Tags.Names[Index] + '.jpg', Strm);
        finally
          HTTP.Free;
        end;
        Strm.Position := 0;
        Strm.SaveToFile(FileName);
      finally
        Strm.Free;
      end;
    except
      FileName := ExtractFilePath(Application.ExeName) + 'Template.jpg';
    end;
  end;
  imgTag.Picture.LoadFromFile(FileName);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:26:53.603

您可以使用标准[`TDownloadURL`操作](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/ExtActns_TDownLoadURL.html)来简单地下载互联网并将其添加到您的逻辑中，如下所示：

```
uses
  ExtActns;

function TMyForm.TryDownloadFile(const AURL, AFileName: string): Boolean;
begin
  Result := False;
  with TDownLoadURL.Create(nil) do
  try
    URL := AURL;
    Filename := AFileName;
    try
      ExecuteTarget(nil);
      Result := True;
    except
      ; //please, improve this handling specific exceptions
    end;
  finally
    Free;
  end;
end;

procedure TMyForm.LoadFile(Index: Integer);
var
  FileName: string;
begin
  FileName := TagPath + Tags.Names[Index] + '.jpg';
  if not FileExists(FileName) then
    if not TryDownlaodFile('http://www.myurl.com/images/' + Tags.Names[Index] + '.jpg', 
      FileName) then
      FileName := ExtractFilePath(Application.ExeName) + 'Template.jpg';
  imgTag.Picture.LoadFromFile(FileName);
end; 
```

显示的代码罪过是我在异常处理程序中吃掉了任何异常，这是一个不好的做法，但我直接在这个窗口中写了这个答案，没有时间检查在不同的失败场景中可以通过操作引发哪些特定异常. 如果您做出改进并回来并为社区做出贡献，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:29:49.823

我通常使用此代码检查网络服务器上是否存在文件

```
function CheckUrl(url: string): boolean;
var
  hSession, hfile, hRequest: hInternet;
  dwindex,dwcodelen: DWord;
  dwcode:array[1..20] of Char;
  res: PChar;
begin
  if Pos('http://', LowerCase(url)) = 0 then
    url := 'http://' + url;
  Result := False;
  hSession := InternetOpen('InetURL:/1.0', INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);
  if Assigned(hsession) then
  begin
    hfile := InternetOpenUrl(hsession, PChar(url), nil, 0, INTERNET_FLAG_RELOAD, 0);
    dwIndex := 0;
    dwCodeLen := 10;
    HttpQueryInfo(hfile, HTTP_QUERY_STATUS_CODE, @dwCode, dwCodeLen, dwIndex);
    res := PChar(@dwCode);
    Result := (res = '200') or (res = '302');
    if Assigned(hFile) then
      InternetCloseHandle(hFile);
    InternetCloseHandle(hSession);
  end;
end; 
```

并下载文件，您可以使用 Jachguate 答案

# ios - SQLabs 的 SQLiteManager - 为什么 iOS 应用程序无法识别我的数据库

> ID：15375207
> 
> 赞同：0
> 
> 时间：2013-03-13T01:03:20.383
> 
> 标签：ios, sqlite

我在 from SQLabs 中创建了一个 SQLite 数据库，`SQLiteManager`然后将数据库文件 mydb.sqlite3 添加到我构建的 iOS SDK 应用程序中。我相信我已正确配置应用程序以使用 SQLite，因为我可以（在代码中）创建数据库、创建表并查询它。

当我将外部创建的数据库拖到应用程序文件夹中时，它会出现在应用程序下方的组中。它也出现在应用程序的“复制捆绑资源”构建阶段。

当我尝试查询外部创建的数据库时。我收到一个找不到表的错误，我假设这是因为 db 文件以某种方式未包含在构建中，当我打开数据库时，它默认创建一个。

为了确认这个想法，如果我从模拟器中卸载应用程序并在调试器中再次运行应用程序，这次包含（在我打开数据库之前）`NSLog()`应用程序中所有文件的一些调试代码，数据库文件未列在日志。

关于为什么在我运行调试器时项目中包含的数据库不会被复制到模拟器上的应用程序文档文件夹中的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:46:27.873

您可以使用以下代码：

1) 检查数据库是否不存在 2) 将数据库从主包复制到文档文件夹

```
NSArray *paths = [NSArray arrayWithObject:[self MR_applicationDocumentsDirectory]];
NSFileManager *fm = [[NSFileManager alloc] init];

for (NSString *path in paths) 
{
    NSString *filepath = [path stringByAppendingPathComponent:storeFileName];
    if ([fm fileExistsAtPath:filepath])
    {

    } else {
        NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"YourDBNameHere" ofType:@"sqlite"];
        if (defaultStorePath) {
            [fm copyItemAtPath:defaultStorePath toPath:filepath error:NULL];
        }

     }
} 
```

# php - 如何显示/检索数据库中的所有图像

> ID：15375208
> 
> 赞同：1
> 
> 时间：2013-03-13T01:03:28.167
> 
> 标签：php, image

我想显示`Image`数据库中的所有 s 但我的代码在这里只显示一个。我怎样才能得到它们并显示在我的网页中。我知道我需要放一个循环，但我想知道它应该在哪里。

到目前为止，这是我的 php 代码（没有循环）

```
include('../include/connect.php');
$query=ibase_query("SELECT FILEDATA FROM ARCHIVE WHERE FILE_TYPE='Image'");
$data=ibase_fetch_object($query);
if($data){
  header("Content-type:image/jpeg || image/gif || image/png || image/pjpeg");
  ibase_blob_echo($data->FILEDATA);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:09:30.853

每次使用`ibase_fetch_object`它都会获得下一个对象

所以你可以在**while**循环中使用它（php示例）：

```
 header("Content-type:image/jpeg || image/gif || image/png || image/pjpeg");
    while ($data=ibase_fetch_object($query){

  ibase_blob_echo($data->FILEDATA);

} 
```

编辑：按照[这个答案](https://stackoverflow.com/a/5754018/1427338)，你应该有 2 个单独的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:10:58.630

好吧，不知道这是否可行，但是您不妨考虑使用 foreach 循环。

```
foreach ($data as $value) {
if ($value) {
    ibase_blob_echo($value->FILEDATA);
}
} 
```

# ajax - 如何实现图片上传到PageDown markdown编辑器？

> ID：15375209
> 
> 赞同：9
> 
> 时间：2013-03-13T01:03:43.093
> 
> 标签：ajax, form-data, pagedown

为了实现图片上传到 PageDown markdown 编辑器，我修改了一些关于编辑器的代码。

**Markdown.Editor.js**

> var defaultsStrings = { imagedialog : "< input id='image' type='file' />" }

选择图片时，然后单击“确定”按钮以发送AJAX请求。它可以返回图像路径。

```
var okButton = doc.createElement("input");
        okButton.type = "button";
        okButton.onclick = function () { 
            var data = new FormData();
            data.append('file', $( '#image' )[0].files[0] );
            $.ajax({
                url: 'uploadFile',
                data: data,
                processData: false,
                contentType: false,
                type: 'POST',
                success: function ( data ) {
                    alert(path);
                }
            });
            return close(false);}; 
```

**如何在编辑器预览区预览图片？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-03T06:00:34.707

这篇[文章](http://ben.onfabrik.com/posts/pagedown-markdown-editor-custom-image-dialog)提供了一个有用的方法，

```
editor.hooks.set("insertImageDialog", function (callback) {
 var $input = $('<input type="file" name="File" id="file_0" class = "fileUpload"/>');
 var $okButton = $('<a class="okButton">'+uploadOK()+'</a>');
 $okButton.click(function(){
        var data = new FormData();
        var file = $input[0].files[0];
       if (file === undefined || null === file) {
          // alert("error message);
       } else {
         data.append('file',  file);
        $.ajax({
            url: 'uploadFile',
            data: data,
            dataType : 'json',
            processData: false,
            contentType: false,
            type: 'POST',
            success: function ( data ) {
                  callback(data.dataObject.url);
            },
            error : function(data){
                  // error
            }
        });    
      }
    }); ) 
```

# asp.net-mvc - 链接在 dotnetopenauth -> datetime2 错误的转换

> ID：15375210
> 
> 赞同：0
> 
> 时间：2013-03-13T01:03:47.403
> 
> 标签：asp.net-mvc, linkedin, dotnetopenauth

我试图让用户通过链接登录，但是当他们进入 Account/ExternalLoginConfirmation 的默认模板时，我收到此错误：

> 将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。该语句已终止。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。

任何熟悉这个库的错误的人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:12:04.987

当我将 DateTime 数据库列设置为非 null 并且我没有为其分配值（我将其保留为 NULL）时，我在使用 Entity Framework 之前已经看到了这个问题。

检查您的代码并查找标有 NotNull 的任何 DateTime 属性，并确保在提交更改/保存记录之前分配这些属性值。

# jquery - 这个 Service Stack Web Service 或 jQuery 调用我做错了什么？

> ID：15375216
> 
> 赞同：1
> 
> 时间：2013-03-13T01:04:42.107
> 
> 标签：jquery, json, jsonp, servicestack

我能够让 Service Stack 的 Hello World 示例正常工作，但现在我正在尝试稍微扩展它以返回自定义**Site**对象。我制作了一个简单的测试 html 文件，该文件使用 jQuery 来拉回结果，但我没有返回**Site**对象（我认为）。

这是我的网络服务：

```
using Funq;
using ServiceStack.ServiceInterface;
using ServiceStack.WebHost.Endpoints;
using System;

namespace My.WebService
{

    public class SiteRepository
    {

    }

    public class Site
    {
        public string Name { get; set; }
        public string Uri { get; set; } //switch to the real uri class if you find it useful
    }

    public class SiteService : Service //: RestServiceBase<Site>
    {
        public SiteRepository Repository { get; set; } //Injected by IOC

        public object Get(Site request)
        {
            //return new Site { Name = "Google", Uri = "http://www.google.com" };
            return new SiteResponse {Result = new Site {Name = "Google", Uri = "http://www.google.com"}};
        }
    }

    public class SiteResponse
    {
        public Site Result { get; set; }
    }

    public class SiteAppHost : AppHostBase
    {

        public SiteAppHost()
            : base("Site Web Services", typeof(SiteService).Assembly)
        {
        }

        public override void Configure(Container container)
        {
            container.Register(new SiteRepository());

            Routes
                .Add<Site>("/site")
                .Add<Site>("/site/{Id}/");
        }
    }

    public class Global : System.Web.HttpApplication
    {

        protected void Application_Start(object sender, EventArgs e)
        {
            new SiteAppHost().Init();
        }

        protected void Session_Start(object sender, EventArgs e)
        {

        }

        protected void Application_BeginRequest(object sender, EventArgs e)
        {

        }

        protected void Application_AuthenticateRequest(object sender, EventArgs e)
        {

        }

        protected void Application_Error(object sender, EventArgs e)
        {

        }

        protected void Session_End(object sender, EventArgs e)
        {

        }

        protected void Application_End(object sender, EventArgs e)
        {

        }
    }
} 
```

这是使用 jQuery 的测试 HTML 文件。我添加了 ?callback=? 因为我正在同时运行 Web 服务和从同一台机器进行调用。

```
 <html>                                                                  
 <head>                                                                  
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>          
 <script type="text/javascript">                                         
    // we will add our javascript code here 
    $(document).ready(function() {
        // do stuff when DOM is ready
        alert("Hello world!");
        //the ?callback=? part is for testing on the same server as the web service
        $.getJSON("http://localhost:61549/site?callback=?", function(sitesReturned) {
            alert(sitesReturned);   // alert box contains:   [object Object]
            alert(sitesReturned.Name);  //alert box contains:  undefined
            alert(sitesReturned.length == 1) //alert box contains:  false
            var parsed = JSON.parse(sitesReturned); //this fails silently
            alert(parsed.Name); // the alert box does not load
        });

        alert("Goodbye world!");
    });                                    
 </script>                                                               
 </head>                                                                 
 <body>                                                                  
   <!-- we will add our HTML content here -->                                        
   Hello
 </body>                                                                 
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:00:45.363

一些笔记...

*   **但我没有返回 Site 对象（我认为）**

$.getJSON 将有一个看起来像这样的响应

`{"result":{"name":"Google","uri":"http://www.google.com"}}`所以 name/uri 属性在`result`属性内。

```
alert(sitesReturned.result);   // will still contain [object Object]
alert(sitesReturned.result.name);  //should contain Google
alert(sitesReturned.result.uri.length == 1) //contains false since 21 != 1 
```

*   **我正在运行 Web 服务并从同一台机器上进行调用。**

不完全确定你的意思。如果您正在提供包含 jQuery 代码的 HTML 文件，则`http://localhost:61549`您不需要使用 JSONP。

*   **var parsed = JSON.parse(sitesReturned); //这会静默失败**

sitesReturned 参数已被解析为 JavaScript 对象，因此该行失败，因为它试图解析对象而不是字符串。[请参阅此处](http://api.jquery.com/jQuery.getJSON/)的文档。此外，我没有看到参考或`<script>`标签，但我假设您使用 Douglas Crockford 的 JSON 库用于`JSON.parse()`.

**从文档：**

“成功回调传递了返回的数据，该数据通常是由 JSON 结构定义并使用 $.parseJSON() 方法解析的 JavaScript 对象或数组。它还传递了响应的文本状态。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:15:24.393

我想通了。愚蠢的错误。

```
public class SiteService : Service //: RestServiceBase<Site>
    {
        public SiteRepository Repository { get; set; } //Injected by IOC

        public object Get(Site request)
        {
            //return new Site { Name = "Google", Uri = "http://www.google.com" };
            return new SiteResponse {Result = new Site {Name = "Google", Uri = "http://www.google.com"}};
        }
    } 
```

本来应该

```
public class SiteService : IService //: RestServiceBase<Site>
    {
        public SiteRepository Repository { get; set; } //Injected by IOC

        public object Get(Site request)
        {
            //return new Site { Name = "Google", Uri = "http://www.google.com" };
            return new SiteResponse {Result = new Site {Name = "Google", Uri = "http://www.google.com"}};
        }
    } 
```

我需要添加以下命名空间： `using ServiceStack.ServiceHost;`

# c# - [内容类型].xml 元素缺失

> ID：15375217
> 
> 赞同：1
> 
> 时间：2013-03-13T01:04:49.010
> 
> 标签：c#, .net

我正在尝试创建一个 2007+ Excel 文档 (.xlsx)，只使用**.net 4.0 built-in classes**。所以我**不能使用任何第三方库**。

实际上它已经完成了大部分，我现在面临的唯一问题是，我正在创建的包似乎在创建**[Content_Types].xml**文件时失败，我的意思是它缺少所有**<Override>**元素，并且只创建**<Default>**元素。

我很确定问题出在我创建包之间的关系的地方，但我只是不知道如何使它工作，而且**Package**和**ZipPackage**类的文档和示例非常稀缺。

也许我错过了另一个步骤......有人有任何线索吗？请

这是一个类似的代码，它产生完全相同的问题

```
public void CreatePackage()
        {
            string Dir = @"F:\Proyectos\Excel_StackOverflow\WindowsFormsApplication1\WindowsFormsApplication1\Resources";

        Uri File1_abs = new Uri(String.Format(@"{0}\1.xml", Dir), UriKind.Absolute);
                Uri File1_rel = new Uri(@"/OddContent/File1.xml", UriKind.Relative);

                using (ZipPackage exPkg = (ZipPackage)Package.Open(String.Format(@"{0}\Temp.zip", Dir), FileMode.Create))
                {
                    ZipPackagePart File1Part = (ZipPackagePart)exPkg.CreatePart(File1_rel, System.Net.Mime.MediaTypeNames.Text.Xml);
                    using (FileStream fs1 = new FileStream(File1_abs.LocalPath, FileMode.Open, FileAccess.Read))
                    {
                        Form1.CopyStream(fs1, File1Part.GetStream());
                    }
                    exPkg.CreateRelationship(File1_rel, TargetMode.Internal, "SomeType");
                    exPkg.Flush();
                    exPkg.Close();
                    }
            }

        private static void CopyStream(Stream source, Stream target)
        {
            const int bufSize = 0x1000;
            byte[] buf = new byte[bufSize];
            int bytesRead = 0;
            while ((bytesRead = source.Read(buf, 0, bufSize)) > 0)
                target.Write(buf, 0, bytesRead);
        } 
```

它为给定代码生成的 [Content_Types].xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default ContentType="text/xml" Extension="xml"/>
</Types> 
```

但实际上我希望这样的内容是 [Content_Types].xml 文件内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default ContentType="text/xml" Extension="xml"/>
<Override PartName="...................."/>
</Types> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:08:18.963

一旦有一个部分以默认扩展名但不同的内容类型存储，“覆盖”元素将被放入类型列表中。

这是一个更新版本，它将为 File1Part 创建“覆盖”元素：

```
 Uri File1_rel = new Uri(@"/OddContent/File1.xml", UriKind.Relative);
        Uri File2_rel = new Uri(@"/OddContent/File2.xml", UriKind.Relative);

        using (ZipPackage exPkg = (ZipPackage)Package.Open(String.Format(@"{0}\Temp.zip", Dir), FileMode.Create))
        {
            ZipPackagePart p2 = (ZipPackagePart)exPkg.CreatePart(File2_rel, System.Net.Mime.MediaTypeNames.Text.Xml);
            ZipPackagePart File1Part = (ZipPackagePart)exPkg.CreatePart(File1_rel, "application/vnd.openxmlformats-officedocument.wordprocessingml.documents.main+xml"); 
```

注意：我从图像中键入复制了 vnd... 的 mime 类型，它可能有拼写错误，请随时修复。

创建的 [Content_Types].xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="xml" ContentType="text/xml" />
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" />
<Override PartName="/OddContent/File1.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.documents.main+xml" />
</Types> 
```

# sql - 如何转换逗号分隔列表中的列数据

> ID：15375218
> 
> 赞同：1
> 
> 时间：2013-03-13T01:04:52.940
> 
> 标签：sql, advantage-database-server

我的情况有点奇怪。它是一个第三方应用程序，从前端不允许调用用户过程或 udf/标量函数。

唯一的选择是编写 SQL，下面是我的数据的外观。***第一张图片有一个错误，最后一个 PID 应该是 1，倒数第二个是 2。***

![在此处输入图像描述](../Images/34f9bb9e6700a0d5cc93e49a66184696.png)

我需要的是这个，

![在此处输入图像描述](../Images/b17bd230c5567026f6b1c3198b8f9d6b.png)

这可以在 Advantage Database Server 9 中使用 UDF/游标轻松完成，但我别无选择。我不知道这是否真的可能。在 Sybase 中有一个名为 list 的函数，它可以很容易地完成这种工作，但在这里不确定。

应用程序确实允许调用内置函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:55:27.203

```
declare @table table
(
   PID integer,
   Medicine varchar(10)  )

insert into @table values (1, 'ABC')
insert into @table values (2, 'ABC')
insert into @table values (1, 'DEF')
insert into @table values (2, 'DEF')
insert into @table values (1, 'GHI')

SELECT DISTINCT a.PID,
                Medicine = STUFF((SELECT ',' + b.Medicine
                                    FROM @table b
                                    WHERE a.PID = b.PID
                                      FOR XML Path('')),1,1,'')
FROM @table a 
```

**结果：**

```
**PID   Medicine**
1   ABC,DEF,GHI
2   ABC,DEF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:39:54.553

我最终通过连接到数据字典创建了以下函数，但我得到了错误。

```
创建函数 GetReport_Meds
   (
   PID varchar(15)
   )
   返回字符串
开始
声明药物字符串；
DECLARE CurMeds 光标 AS SELECT med_code from drug where patient =
TRIM(PID) 和 end_date 为空；
药物 = "";
打开 CurMeds；
同时获取 CurMeds 做
药物 = TRIM(Meds)+TRIM(CurMeds.med_code)+",";
结束；
关闭 CurMeds；
返回左（Meds，LEN（Meds）-1）；
结尾;

```

```
poQuery：错误 7200：AQE 错误：状态 = HY000；本机错误 = 5054;
  [iAnywhere 解决方案][Adv​​antage SQL][ASA] 错误 5054：命令不能
 以当前用户权限完成。不能
在数据字典中创建函数对象。

```

我已要求创建此数据库/应用程序的公司在数据库中添加此功能，以便我可以使用它，让我们看看我在哪里登陆。

# enyo - 在 Enyo 中异步加载图像

> ID：15375221
> 
> 赞同：2
> 
> 时间：2013-03-13T01:05:38.893
> 
> 标签：enyo

我有一个 enyo.List 有两个项目：一个 enyo.Image 和一个文本组件。我在 onSetupItem 期间在图像上设置了 Src。

这会立即加载图像，因为我有超过 10 行它们不会出现，直到所有图像加载。无论如何要异步加载这些图像（另外显示带有“淡入”动画的图像？）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:33:43.283

编辑：完全倒着写下一段。List -is- 轻量级版本。您设置行数是正确的。

您可能想要做的是将 替换`List`为`Repeater`. 由于中的享元模式，`Repeater`您可能不会一次请求尽可能多的图像。

另一种方法可能是基于`Scroller`检测图像何时滚动到视图中并仅在那时加载它们的新类型。这是一种相当复杂的方法，您可能需要创建一种基于`Image`该方法与另一种方法并驾齐驱的方法。

你也可以谷歌一些延迟加载策略，看看你是否可以应用这些策略。

# ruby-on-rails - 如何为 Rails 应用程序创建应用程序范围的 slug 路由？

> ID：15375222
> 
> 赞同：5
> 
> 时间：2013-03-13T01:05:40.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url-routing, rails-routing

我正在开发的 Rails 应用程序中有许多不同的模型。我见过许多网站使用应用程序范围的 slug 路由方法。我这是什么意思？

```
http://example.com/nick-oneill <-- This points to a User object
http://example.com/facebook    <-- This points to a Company object
http://example.com/developers  <-- This points to the users#index page 
```

我知道 to_param 并在应用程序中创建对读者友好的 slug，但是我不知道为各种对象提供根级 slug 的方法。你可以认为这类似于 Facebook 的 Graph API：有不同的对象类型，但它们都存在于[https://graph.facebook.com/object-id](https://graph.facebook.com/object-id)

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T19:04:21.090

使用 freindly_id 可能有一种方法可以做到这一点，但我认为友好 id 的问题在于事情是由模型限定的。

如果我想要真正的站点范围的 slugging，我会创建一个与我的所有模型具有多态关系的 slugs 表。

Sluggable_type 和 sluggable_id，然后是一个带有完整永久链接/slug 的 slug 字段。

```
+---------------------------------------------+
| sluggable_type | sluggable_id |     slug    |
|      user      |       13     |  users/john |
+---------------------------------------------+ 
```

现在我可以做一个通配符捕获所有路由或在运行时为我的所有 slug 创建路由，并在更新受此 sluggable 控制的模型时强制刷新路由。

`routes.rb`

```
 get "/*segments",
               :controller => 'slugs',
               :action => 'dynamicroute' 
```

现在在你的 SlugsController 中实现一个类似的方法

```
def dynamicroute
  segments = params[:segments]
  slugs.find_by_slug(segments)
  slug.sluggable_type.constantize.find(slug.sluggable_id) #retrive real record
  #some magic to handle the slugged item maybe redirect to the appropriate
  #controller or somehow call the show view for that controller
end 
```

或者

`routes.rb`

```
begin  
  Slug.all.each do |s|
    begin
      get "#{s.slug}" => "#{s.sluggable_type.demodulize.pluralize.camelize}#show"
    rescue
    end
  end
rescue
end 
```

如果您使用第二种路由方法，请确保您致电

`YOUR_APP_NAME::Application.reload_routes!`

编辑任何 slugged 记录以刷新路由表后。

我们也遇到过类似的问题，我们可能会尝试对这种方法进行优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:09:52.073

我可能会这样处理，至少作为第一遍：

*   使用friendly_id 或类似的为每个涉及的模型生成slugs
*   连接一条包罗万象的路线`/([-_a-zA-Z0-9]+)`并将其指向类似的东西`EntitiesController#show`
*   连接更高优先级的路由以`/developers`指向`Users#index`
*   在 EntityController#show 中：

    `@entity = User.find(params[:id]) or Company.find(params[:id]) or raise ActionController::RoutingError.new('Not Found')`

*   然后，根据您拥有的实体类型：

    `render "VIEW_PATH_BASED_ON_ENTITY_CLASS/show"`

我还将从最常访问到最不常访问的顺序排列查找结果（先猜测，然后使用数据来调整顺序）。

最后，可能很明显，但请确保您为每个表中的 slug 列建立索引，因为您通常会为每个请求进行多次查找。

FWIW我也很想知道一种更好的方法来解决这个问题；这就是我最初解决问题的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:13:57.413

我的第一反应是创建一个新的 Slug 模型。该模型将具有多态性`belongs_to`：

```
belongs_to :sluggable, :polymorphic => true 
```

至少这张桌子会有：

*   `value`- 或者比这更好的名字。蛞蝓本身的价值。
*   `sluggable_type`和`sluggable_id`- 多态外键。

您的公司、用户等模型模型只会有一个 slug：

```
has_one :slug 
```

这给了我们一些优势：

*   现在很容易对 slug 值进行唯一约束。如果 slug 被保留为所有不同 sluggable 模型的属性，则您的唯一约束将必须检查所有其他 sluggable 表的唯一性。造成不好的时候。
*   路由很简单，因为您可以使用`resource`根级命名空间之外的普通路由。您可能希望将其保持在路由文件的低位/末尾，以便其他更具体的路由优先。**编辑**：这个路由基本上是 j_mcnally 建议的第一个路由方法。
*   一个 slug 的所有逻辑，就像一个有效的 slug 一样，都保存在这个模型中。良好的关注点分离而不是污染说用户模型。特别是如果每​​个人的蛞蝓规则都和这里一样。

就控制器的工作方式而言，我会按照 Kyle 所说的进行，然后关闭`sluggable_type`字段以找到您想要渲染的视图。

# apache - 启动 Apache2 服务（os 5）访问被拒绝

> ID：15375229
> 
> 赞同：5
> 
> 时间：2013-03-13T01:06:29.287
> 
> 标签：apache

我在我的 Windows 7 机器上从他们的网站安装了 apache msi。

通过 IE 尝试我的域名和端口名称时，我在日志文件中收到以下错误，

```
Starting the Apache2 service
(OS 5)Access is denied.  : Apache2: Failed to open the service.
Starting the Apache2 service
(OS 5)Access is denied.  : Apache2: Failed to open the service.
Starting the Apache2 service
(OS 5)Access is denied.  : Apache2: Failed to open the service.
Starting the Apache2 service
(OS 5)Access is denied.  : Apache2: Failed to open the service.
(OS 5)Access is denied.  : Failed to open the Apache2 Service 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T17:51:09.800

在打开命令提示符时，您必须以“以管理员身份运行”打开它，然后您才能在 Windows 中成功启动/停止 apache 服务器

在windows中启动/停止a​​pache服务器的步骤：单击开始菜单->在搜索框中输入cmd->右键单击cmd-->以管理员身份运行-->进入apache服务器的bin文件夹->开始/停止服务器

检查日志的状态

希望这能解决你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T09:37:39.257

检查管理员安全组是否具有对 xampp 文件夹或 xampplite 文件夹的完全访问权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-14T09:41:35.970

Apache 只需要写入日志目录的权限。您可以将此授予运行 httpd.exe 进程的用户

# perl - 使用 URI::URL 从 SFTP URL 中提取用户名和密码

> ID：15375230
> 
> 赞同：1
> 
> 时间：2013-03-13T01:06:29.717
> 
> 标签：perl, url, version

我在我的程序中使用[http://search.cpan.org/~rse/lcwa-1.0.0/lib/lwp/lib/URI/URL.pm](http://search.cpan.org/~rse/lcwa-1.0.0/lib/lwp/lib/URI/URL.pm)`URI::URL`来提取方案、主机、用户名、密码和路径从 URL 和生活是美好的。然后我安装了 Net::SFTP ，它显然是从[http://search.cpan.org/~gaas/URI-1.60/URI.pm](http://search.cpan.org/~gaas/URI-1.60/URI.pm)安装的。我使用 sftp URL 得到的错误是：`URI::URL`

> 无法通过 /usr/local/share/perl5/URI/WithBase.pm 第 50 行的包“URI::_foreign”找到对象方法“user”。

Ftp URL 工作正常。如何告诉模块以与处理 ftp URL 相同的方式处理 sftp URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:23:05.437

从[这个页面](http://search.cpan.org/~rse/lcwa-1.0.0/)可以看出，lcwa 是一个未经授权的版本，这意味着它命名的模块与现有模块的名称相同。使用风险自负。

曾经有一个名为 URI::URL 的模块，但它已经过时了。它不应该被使用。它当前作为 URI 的薄包装器存在，以实现向后兼容性。您应该改用[URI](http://search.cpan.org/perldoc?URI)。

安装[URI::sftp](http://search.cpan.org/perldoc?URI%3a%3asftp)应该使 URI 了解`sftp`URI 方案。

# scala - 如何在Scala中将带有字符串插值的字符串格式化为固定宽度的字符串？

> ID：15375231
> 
> 赞同：12
> 
> 时间：2013-03-13T01:06:35.070
> 
> 标签：scala, padding, scala-2.10, string-interpolation, format-string

我正在与一个非常旧的系统交互，我需要生成的文件需要一个由字符串形成的字段，但宽度必须正好为 15。

我想要这样的东西：

```
val companyName = "FooBar, Inc" // 11 chars
f"$companyName%s" 
```

返回：

```
"    FooBar, Inc" 
```

有没有一种巧妙的方法来做我想要用字符串插值做的事情？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-13T01:09:03.993

将[String.format](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29)与[格式字符串](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)一起使用。当然，那里的东西会做你想做的:-)

这段代码会做你想做的事：

```
scala> val companyName = "FooBar, Inc"
companyName: String = FooBar, Inc

scala> f"$companyName%15s"
res0: String = "    FooBar, Inc" 
```

# heroku - heroku：您要查找的页面不存在（未初始化的常量）

> ID：15375232
> 
> 赞同：0
> 
> 时间：2013-03-13T01:06:37.867
> 
> 标签：heroku, ruby-on-rails-3.2

我对 ruby​​ 和 rails 有几个星期的了解……但我是一位经验丰富的程序员。

我已将我的 POC 应用程序迁移到 heroku。

该应用程序在那里。我看到了标准的 ruby​​ 登陆页面：

```
http://pacific-lake-7797.herokuapp.com/ 
```

当我点击我的 POC 页面时：

```
http://pacific-lake-7797.herokuapp.com/user_stories 
```

我得到：

> 您要查找的页面不存在。
> 
> 您可能输入了错误的地址或页面可能已移动。

我在日志中看到了这个：

```
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m Started GET 
"/user_stories" for 66.31.53.52 at 2013-03-13 00:08:00 +0000
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/
active_support/inflector/methods.rb:230:in `block in constantize'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/
active_support/inflector/methods.rb:229:in `each'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m 
ActionController::RoutingError (uninitialized constant UserStoriesController): 
```

对我来说，问题似乎很明显与此日志消息有关：

```
ActionController::RoutingError (uninitialized constant UserStoriesController): 
```

但到目前为止，我还没有找到任何可以解释这可能意味着什么的东西。

这是我尝试过的（在很大程度上感谢大家！）

**DB看起来不错**

我跑了 rake db:migrate 并且日志看起来不错。我还可以从本地 postgres 管理员访问数据库。该页面实际上还没有访问数据库，但数据库在那里。

**config.assets.compile**

我将此设置更改为true：

```
config.assets.compile = true 
```

**本地生产运行良好**

我以生产模式启动服务器...

```
rails server -e production 
```

一切正常。

**耙路线**

如果我跑

```
heroku run "rake routes" 
```

我想我看到我的路线还可以。警告似乎正在为我认为尚未使用的 rails 4.0 做准备。

结果：

```
$ heroku run "rake routes"
Running `rake routes` attached to terminal... up, run.6943
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
 for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
 for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7)
   user_stories GET    /user_stories(.:format)          user_stories#index
                POST   /user_stories(.:format)          user_stories#create
 new_user_story GET    /user_stories/new(.:format)      user_stories#new
edit_user_story GET    /user_stories/:id/edit(.:format) user_stories#edit
     user_story GET    /user_stories/:id(.:format)      user_stories#show
                PUT    /user_stories/:id(.:format)      user_stories#update
                DELETE /user_stories/:id(.:format)      user_stories#destroy 
```

**这是记录的完整日志**

```
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m Started GET "/user_stories" for 66.31.53.52 at 2013-03-13 00:08:00 +0000
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/methods.rb:230:in `block in constantize'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/methods.rb:229:in `each'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m ActionController::RoutingError (uninitialized constant UserStoriesController):
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/methods.rb:229:in `constantize'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:54:in `controller'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:32:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:601:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/head.rb:14:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/flash.rb:242:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/cookies.rb:341:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/query_cache.rb:64:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__4347238382960990098__call__3337526573215554696__callba
cks'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
←[36m2013-03-13T00:08:00+00:00 app[web.1]:←[0m
←[33m2013-03-13T00:08:00+00:00 heroku[router]:←[0m at=info method=GET path=/user_stories host=pacific-lake-7797.herokuapp.com fwd="66.31.53.52" dyno=web.1 queue=0 wait=0ms connect=10ms service=31ms st
atus=404 bytes=728 
```

**谢谢！**

在此先感谢您……以及您已经为我回答的数百个其他问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:49:58.410

我自己的新鲜眼睛发现了问题。当你在梦中得到答案时，真好。

我也是 GIT 的新手......并且犯了一个菜鸟错误。我一定没有将文件添加到我正在推送到 Heroku 的分支中（尽管我真的认为我这样做了）。

运行后：

```
git checkout master
git add .
commit -am "doh"
git push
git push heroku master 
```

东西有效！！！

如果我[从 Heroku 的 git 中拉下项目](https://stackoverflow.com/questions/2281772/how-to-view-remote-git-revision-on-heroku)以查看其中的内容，那会节省一些时间。

# android - 阅读所有者信息

> ID：15375234
> 
> 赞同：1
> 
> 时间：2013-03-13T01:06:41.487
> 
> 标签：android

**Android 用户可以在Settings > Security > Owner Info**中输入任意文本，至少在 Jelly Bean 中是这样。如何从应用程序中读取该字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:57:45.590

尝试这个：

```
final String[] SELF_PROJECTION = new String[] { Phone._ID, Phone.DISPLAY_NAME, }; 
```

光标是：

```
Cursor cursor = activity.getContentResolver().query( Profile.CONTENT_URI, SELF_PROJECTION, null, null, null); 
```

现在只需做一个简单的 cursor.moveToFirst()：

然后通过获取联系人ID`cursor.getString(0)`和联系人姓名`cursor.getString(1)`

# php - 立即过滤html表格的搜索框？

> ID：15375235
> 
> 赞同：0
> 
> 时间：2013-03-13T01:06:45.147
> 
> 标签：php, search, html-table

我有一个 HTML 表，它像这样从 MySQL 数据库中提取...

```
ID  NAME             COST    POSITION  SCORE
1   John Johnson     4.5     Mid       28
2   Mark Markson     6.1     Atk       41
3   Larry Lawrenson  5.6     Def       38    
4   Paul Paulson     5.4     Mid       32 
```

ETC...

我希望在此表顶部有一个搜索框，它会根据您输入的内容立即过滤数据（即时 - 如在，无需按下提交框或任何东西）。例如，如果您`Mid`在搜索框中输入，则只会出现上述用户中的 2 个，其余用户将被隐藏。

我尝试用谷歌搜索“spotlight search php”，但我发现的所有搜索都像 google.com 或 apple.com 风格，它为您提供搜索列表，而不是过滤屏幕上已经存在的表格。

[这](https://stackoverflow.com/questions/2858815/spotlight-search-with-php/2858847#2858847)看起来很有希望......它会做我想做的事吗？

有没有人有任何提示或链接到这样做的地方？或者即使我称它为正确的名字。另外，如果我的问题不清楚，请告诉我，我会尽力澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:55:32.777

我相信这就是您正在寻找的。

[http://www.datatables.net/release-datatables/examples/basic_init/zero_config.html](http://www.datatables.net/release-datatables/examples/basic_init/zero_config.html)

dataTables 将搜索当前的 html 表，并仅显示与搜索词匹配的行（不区分大小写）。默认情况下启用排序。您可以将其配置为根本不排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:10:05.023

是的，您引用的文章应该完成您正在寻找的内容。

你也可以考虑使用[jQuery Autocomplete 插件](http://jqueryui.com/autocomplete/)来回调你的服务器。服务器可以使用来自适当行的数据来响应该查询。

# java - 从 Android 检索 JSON 中的引用对象

> ID：15375238
> 
> 赞同：0
> 
> 时间：2013-03-13T01:07:31.047
> 
> 标签：java, android, json, wcf

```
{
 getJobDetailsResult: [
 {
   Client:
  {
    ClientID: 265,
    ClientName: "RETRAVISION (WA) LTD"
  },
   ConsignmentActive: true,
   ConsignmentCreationDate: "6/06/2012",
   ConsignmentCustRef: "855929",
   ConsignmentID: 304005,
   OrderNo: "20807354",
  ShipTo:
  {
    ShipToAddress1: "c/o HELENWAY ",
    ShipToAddress2: "WHS E4 UNIT 12 MARKET CITY ",
    ShipToCity: "CANNINGVALE",
    ShipToContactName: null,
    ShipToId: 18933,
    ShipToName: "DALWALLINU RETRAVISION 2",
    ShipToPCode: "6155",
    ShipToState: "WA"
   }
}
]
} 
```

大家好，我目前正在尝试使用 Android 检索 JSON，到目前为止，我没有遇到任何问题。但是，我有一个小问题，这与检索寄售类引用的对象有关，即 ShipTo 和 Client 类。

到目前为止，我能够检索寄售值，例如 ConsignmentActive、ConsignmentCreationDate、ConsignmentCustRef、ConsignmentID 和 OrderNo。但是，我不确定如何映射 ShipTo 和 Client 中的项目。

这是我当前的代码，我试图在一个方法中执行：-

```
public Consignments getConsignmentManifest(String consignment)
{
    Consignments con = new Consignments();

    try
    {
        DefaultHttpClient client = new DefaultHttpClient();
        String theString = new String("");
        //http get request
        HttpGet request = new HttpGet(POD_URI + "/getJobDetails/" + consignment);
        //set the hedear to get the data in JSON format
        request.setHeader("Accept", "application/json");
        request.setHeader("Content-type", "application/json");

        //get the response
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));

        StringBuilder builder = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null)
        {
            builder.append(line);
        }
        is.close();

        theString = builder.toString();

        JSONObject conJSON = new JSONObject(theString);
        JSONArray cons = conJSON.getJSONArray("getJobDetailsResult");

        for(int i = 0; i < cons.length(); i++)
        {
            JSONObject cObj = cons.getJSONObject(i);
            con.ConsignmentID = cObj.getInt("ConsignmentID");
            con.ConsignmentCreationDate = cObj.getString("ConsignmentCreationDate");
            con.ConsignmentCustRef = cObj.getString("ConsignmentCustRef");
            con.OrderNo = cObj.getString("OrderNo");
            con.ConsignmentActive = cObj.getBoolean("ConsignmentActive");

        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

    return con;
} 
```

我很想知道如何从这里检索 ShipTo 对象。我已经尝试过这种方法，但我遇到了一个例外：-

```
con.Clients.ClientID = con.getint("ClientID"); 
```

有人可以告诉我如何改进吗？所有帮助将不胜感激。谢谢你。

编辑：我已经找到了问题所在。这是代码： -

```
//Client object
                Clients cl = new Clients();
                cl.ClientId = clObj.getInt("ClientID");
                cl.ClientName = clObj.getString("ClientName");
                con.Clients = cl;

                //ShipTo object
                JSONObject stObj = cObj.getJSONObject("ShipTo");
                ShipTo sto = new ShipTo();
                sto.ShipToId = stObj.getInt("ShipToId");
                sto.ShipToName = stObj.getString("ShipToName");
                sto.ShipToAddress1 = stObj.getString("ShipToAddress1");
                sto.ShipToAddress2 = stObj.getString("ShipToAddress2");
                sto.ShipToCity = stObj.getString("ShipToCity");
                sto.ShipToPostcode = stObj.getString("ShipToPCode");
                sto.ShipToState = stObj.getString("ShipToState");
                con.ShipTo = sto; 
```

所有 3 个对象；我现在正在填充 Android 中的我的 Consignment、ShipTo 和 Clients 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:58:33.303

首先像这样解析响应

```
String response = EntityUtils.toString(response.getEntity()); 
```

得到响应后，像这样从响应中创建一个**json 对象**

```
JSONObject json = new JSONObject(response); 
```

你可以得到这样的最终结果

```
 String result1 = ((JSONArray) json.get("ShipTo")).getJSONObject(0)
        .getString("ShipToAddress1");
String result2 = ((JSONArray) json.get("ShipTo")).getJSONObject(0)
        .getString("ShipToAddress2"); 
```

试试这个，它会工作的。

# actionscript-3 - 我可以在 Sprite 中管理单行吗？

> ID：15375239
> 
> 赞同：1
> 
> 时间：2013-03-13T01:07:34.870
> 
> 标签：actionscript-3

我正在开发一个绘图应用程序，现在有一个问题。有几千条线，必须画，但我还需要以某种方式一一清除它们。或者也许 - 清除 Sprite 图形内的方形区域。现在我考虑使用数组并将每一行推入新的精灵，所以我可以将这个新的精灵添加到父级。但是这个解决方案看起来很糟糕，因为将为每一行创建新的精灵对象。有什么方法可以在不为它们创建精灵的情况下管理线条吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:29:43.580

创建一个代表每一行的数据对象。然后创建一个 BitmapData 对象，在其中绘制所有线条（例如，您可以使用 fillRect() 为每条线条绘制一个非常窄的矩形）。在需要更改表示之前清除矩形（使用 fillRect() 或 floodFill()），然后只绘制仍然适用的线条。

使用该 BitmapData 创建一个 Bitmap，并将其添加到舞台。

请注意，您应该能够轻松地以良好的性能表示数千行。如果您发现自己创建和销毁代表每一行的数据对象，请查看[对象池](http://www.flashandmath.com/flashcs4/fireworks/index.html)。

# sql - 如何使计数 0 显示为 NULL

> ID：15375249
> 
> 赞同：0
> 
> 时间：2013-03-13T01:08:15.900
> 
> 标签：sql, sql-server-2005

我正在编写一个程序来检查数据库中 15 个信用卡读卡器的交易。该计划的重点是检查阅读器在预定义日期范围内的销售情况，以确保我们没有遇到机械问题。一般而言，如果阅读器未在预定义的日期范围内记录销售，则应检查阅读器的操作。问题是，由于我正在“计算”交易数量，它会得出“0”而不是 NULL，如果没有任何交易，我只想收到一封电子邮件......我该如何更改如果是这种情况，从“0”计数到 NULL？我的查询如下：

```
SELECT        COUNT(sTerminal) AS Terminal
FROM            CC
WHERE        (dtCreated BETWEEN @startdate AND @enddate) AND (sTerminal = 'Swiper 1') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T01:13:21.970

如果您希望计数为 NULL，您可以这样做：

```
SELECT        NULLIF(COUNT(sTerminal), 0) AS Terminal
FROM            CC
WHERE        (dtCreated BETWEEN @startdate AND @enddate) AND (sTerminal = 'Swiper 1') 
```

如果您根本不想返回任何东西，这可能更有用，您可以执行以下操作`HAVING`：

```
SELECT        COUNT(sTerminal) AS Terminal
FROM            CC
WHERE        (dtCreated BETWEEN @startdate AND @enddate) AND (sTerminal = 'Swiper 1')
HAVING COUNT(sTerminal) > 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T01:11:15.487

```
 select CASE WHEN COUNT(sTerminal) = 0 THEN NULL ELSE COUNT(sTerminal) END AS Terminal
 from ....
 where .... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T01:12:20.620

为什么不在 C# 中处理这个逻辑：

```
var numberOfSales = GetNumberOfSales(); // Your sql will execute

if (numberOfSales > 0)
{
    SendEmails();
} 
```

# azure - 设置 Azure ACS 角色

> ID：15375253
> 
> 赞同：0
> 
> 时间：2013-03-13T01:08:49.703
> 
> 标签：azure, visual-studio-2012, roles, identity, acs

嘿伙计们不确定这是否是正确的论坛，但我正在努力解决这个问题。

所以快速了解我正在尝试做的事情。我正在为我的大学高级项目工作，它实际上与 Microsoft 合作，但我的 webforms 应用程序已经完成我正在尝试使用一些基于角色的识别来设置 ACS。我正在使用 VS 2012，并且我已经让 ACS 使用 windows live Id 和 Google 登录正常工作。当我试图将整个应用程序限制为管理员用户时，我的问题就出现了。我在网上看过很多教程，但它们似乎都使用 VS 2010，这与 2012 大不相同。我的问题尤其在于我无法查看 Windows live id 给我的名称标识符这一事实。它是天蓝色的。因此，例如，如果有人@live.com 登录，我可以取回 nameidentifier=“x”，然后从该 nameidentifier 中创建一个角色。我可以'

有没有人知道如何让它在 vs 12 中工作或有任何教程？或者，如果有人知道一种方法来做我正在解释的不同方式，我将不胜感激！

任何帮助是极大的赞赏！

我也看到了@AntonStaykov 的很多工作，但不是我想要的，如果你也在这里提供帮助，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:03:57.757

以下是在代码中访问 nameidentifier 声明的方法。这假定您已设置 ACS 并默认提供它应提供的直通声明。

```
 ClaimsPrincipal p = System.Threading.Thread.CurrentPrincipal as ClaimsPrincipal;

        Claim cNameIdentifier = p.Claims.First(c => c.Type == ClaimTypes.NameIdentifier);
        if (cNameIdentifier != null)
        {
            string NameIdentifierValue = cNameIdentifier.Value;

            // your code here to implement your logic.

        } 
```

我认为您所追求的是一种增强（或转换）Web 应用程序中传入声明的方法，以便您可以执行基于角色的安全性。例如，当令牌访问您的网站时，您想要

1.  检索传入的 NameIdentifier 声明，
2.  在存储（字典、持久存储、提供程序等）中查找以根据您自己的逻辑查看用户是否是管理员，
3.  以“Admin”为值向主体添加角色声明。

这是你的目标吗？如果是这样，则可以在 ClaimsAuthenticationManager 中执行此操作。

[http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthenticationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthenticationmanager.aspx)

-瑞克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:19:34.217

您遇到的主要问题是使用 Live ID（或者，正如他们现在所说的 - Microsoft 帐户）。如果您只使用 ACS，则无法从 Live ID 中获取用户的电子邮件。我个人喜欢 ACS 并使用它，我只是不关心 Microsoft 帐户，或以其他方式处理它。

如果您只想限制管理员对整个应用程序的访问，您必须完成两件事：

1.  在您的部分中设置仅授予角色`system.web`访问权限的授权规则`Administrator`
2.  `Administrator`在 ACS 中设置声明规则以根据某些输入标准生成角色声明。

第一步相当简单，只需`system.web`在文件的部分中添加以下内容`web.config`：

```
<authorization>
  <allow roles="Administrator" />
  <deny users="?" />
</authorization> 
```

只要确保`authorization`您的 web.config 中没有其他部分！

第二步，简单的部分。转到您的 ACS 管理门户，然后转到分配给您的依赖方应用程序的规则组。并添加具有以下条件的新规则：

1.  为规则选择身份提供者（假设 Google）
2.  选择输入声明类型为：`http://schemas.xmlsoap.org/claims/EmailAddress`
3.  输入声明值：（`your_desired_admin@gmail.com`管理员的电子邮件地址）
4.  选择输出声明类型为：`http://schemas.microsoft.com/ws/2008/06/identity/claims/role`
5.  输入输出声明的值：`Administrator`
    1.  为规则设置适当的描述，例如`your_desired_admin@gmail.com is Administrator`.
6.  保存规则。

完毕。对您要授予管理员权限的所有人员重复此步骤。当然，您只能为能够为您提供`E-mail Address`. 对不起 Microsoft 帐户用户。

当 Microsoft 帐户持有人通过 Azure ACS 获得管理员权限时，没有任何简单的方法可以授予他们管理员权限。您唯一拥有的是名称标识符声明，或者`http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier`（为简单起见，我将其称为`NIC`。

`NIC`在以下组合中是唯一的：`User Identity (me@live.com)`+ `ACS NameSpace`+ `Relying Party Application`。这意味着如果`me@live.com`通过您登录您的应用程序，`mygreat.accesscontrol.windows.net`您将获得该用户的唯一`NIC`身份。如果同一用户通过 登录我的网站`someother.accesscontrol.windows.net`，我将获得全新`NIC`的 ，这将再次成为全球唯一的，但与您的应用程序获得的不同。

而且，正如您可以想象的那样，您无法猜测`NIC`来自 Live ID 的任何用户。为 Live ID 启用此场景需要更复杂的逻辑。我没有时间和空间在这里描述，但我可能会找时间写一篇不错的博客文章。

正如 Rick 已经指出的那样，您可以在您的应用程序逻辑上获得 NameIdentifier 声明，但是您真的想给所有和任何用户“管理员”角色吗？另外，我不会让我的应用程序在每次登录时都弄乱 ACS 中的规则。有更好的方法来实现你想要的（正如我所说，写博客的时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:21:20.113

如果您的目标是 .NET Framework 4.5，那么 VS 2012 中的工具确实有所不同。其中很大一部分是由 Windows Identity Foundation 内置于 4.5 框架中的事实驱动的。因此，如果您只针对 .NET Framework 4.0，您可能会消除一些摩擦。这样，您将获得与您所参考的教程类似的体验（假设这些教程针对 .NET 4.0 或更早版本）。

我不确定您为什么无法查看名称标识符。也许您可以围绕该问题提供更多背景信息？例如，您是否在 ACS 门户中、在代码中等？

-瑞克

# javascript - JQuery Mobile 没有方法“listview()”

> ID：15375259
> 
> 赞同：3
> 
> 时间：2013-03-13T01:09:22.263
> 
> 标签：javascript, cordova, jquery-mobile

下面的代码显示了一个函数`cacheListPrint()`，该函数`onclick`使用 Phonegap 从 JQuery Mobile 框架的“主页”页面上的按钮元素调用。

下面的 HTML 显示了从`href`“主页”页面的元素加载的目标页面。

该`cacheListPrint()`函数从 SQLLite 数据库中检索数据，然后用于动态创建和填充无序列表作为 JQuery`viewlist`元素。

当页面加载时，视图列表没有格式化，只显示从数据库中检索到的每个元素的文本标题和图像。正在显示数据并且与数据库请求的内容一致 - 所以我知道列表已成功创建，只是无法正确呈现。

我尝试在当前进行引用的位置使用`$('#placeslist').viewlist();`& 。它们都不起作用。我还尝试将语句移动到声明的下方的行。`$('#placeslist').viewlist('refresh');``.trigger('create')``.trigger('create')``<ul>`

此外，调用其中任何一个`viewlist(...)`函数时，Eclipse调试终端都会抛出以下错误：

`Uncaught TypeError: Object [object Object] has no method 'listview'`- 显然表明这`viewlist`是一个未知的方法调用。

```
function cacheListPrint() {
            db.transaction(queryDBPrint, errorCB);

        }

        function queryDBPrint(tx) {
            tx.executeSql('SELECT * FROM cache', [], querySuccessPrint, errorCB);
        }

        function querySuccessPrint(tx, results) {
                $('#placeslistcontainer').empty();
                $('#placeslistcontainer').html('<ul id="placeslist" data-filter="true"></ul>');

                $.each(results.rows, function(index){
                    var row = results.rows.item(index);
                    $("#placeslist").append('<li><a href="#"><h1>'+row['name']+'</h1><img src="'+row['image']+'" /></a></li>');
                });
                $("#cachelist").trigger('create');
        }

        function errorCB(err) {
            alert("Error processing SQL: "+err.code);
}

<div data-role="page" id="cachelist" data-transition="none"> <!-- Start of cache list screen -->
        <header data-role="header">
            <h1>Cache List</h1>
            <a href="#home" data-icon="home" data-transition="none">Home</a>
        </header>
        <div data-role="content" id="placeslistcontainer">

        </div>
        <footer data-role="footer" data-position="fixed">
        </footer>
</div> <!-- End of cache list screen --> 
```

我已经通过 JQuery Mobile API 进行了相当广泛的阅读，并花了几个小时在谷歌上搜索这个问题 - 许多“外面”的建议在考虑它们时是有意义的，但在实施时不起作用。我对实施建议很有信心，但 JQuery 和 Javascript 对我来说是相对较新的语言 - 所以对必要内容的基本分解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:40:08.753

试试这个看看

```
$("#placeslistcontainer ul").listview(); 
```

`listview("refresh");`当你更新现有的列表视图时似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T07:42:08.873

我有同样的错误信息。在我将所有应用程序代码包装在 deviceready 事件中后为我修复，正如 Phonegap 所说的很重要：[http ://docs.phonegap.com/en/2.9.0/cordova_events_events.md.html#Events](http://docs.phonegap.com/en/2.9.0/cordova_events_events.md.html#Events)

# c# - 如何使课程列表可公开访问？

> ID：15375265
> 
> 赞同：1
> 
> 时间：2013-03-13T01:09:57.577
> 
> 标签：c#, class, public

我希望可以从任何地方访问如下对象列表，据我所知，这是一个“单例”类。

```
public class Car
{
    public string Name;
    public string Color;
    public int Value;
}

List<Vehicle> carList = new List<Vehicle>();

Car jeep = new Car();
jeep.Name = "Jeep";
jeep.Color = "Red";
jeep.Value = 20000;

Vehicle.Add(jeep); 
```

这样我就可以在 Windows 窗体应用程序中的任何位置访问和修改它，使用类似以下按钮的单击：

```
MessageBox.Show(Vehicle[0].name) 
```

我错过了一些东西。如何将列表车辆公开？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T01:15:09.123

鉴于您所展示的内容，单例模式现在对您来说似乎有点多。如果您不同意，请告诉我们，我们会为您指明正确的方向，现在，请尝试以下操作：

```
public class AcessStuff
{
  public static List<Vehicle> CarList = new List<Vehicle>();
} 
```

你会像这样访问它：

```
private void SomeFunction()
{
  MessageBox.Show(AcessStuff.CarList[0].Name)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:18:40.673

如果您希望您的列表成为，`readonly`那么您只需要提供一个`getter`.

```
public class Vehicles
{
    private static readonly List<Vehicle> _vehicles = new List<Vehicle>();

    public static List<Vehicle> Instance { get { return _vehicles; } }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:19:57.410

实际上，我会参考此[链接](http://csharpindepth.com/Articles/General/Singleton.aspx)以获取单例

这是一个版本：

```
public sealed class Singleton
 {
     private static readonly Singleton instance = new Singleton();

     // Explicit static constructor to tell C# compiler
     // not to mark type as beforefieldinit
     static Singleton()
     {
     }

     private Singleton()
     {
     }

     public static Singleton Instance
     {
         get
         {
             return instance;
         }
     }
 } 
```

许多程序员认为使用静态是有害的，通常这是一个糟糕设计的标志。你真的需要一个单例来访问你的类和对象吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T01:21:02.487

有两种方法可以做到这一点。

一种是在您的项目中创建一个`Data.cs`文件，您可以在其中放置所有全局应用程序数据。例如：

**数据.cs**

```
public static class ApplicationData
{
    #region Properties

    public static List<Vehicle> CarList
    {
        get
        {
            return ApplicationData._carList;
        }
    }
    private static List<Vehicle> _carList = new List<Vehicle>();

    #endregion
} 
```

`carList`二是在你的窗口类中创建变量。例如：

```
public class MyWindow : Window
{
    #region Properties

    public List<Vehicle> CarList
    {
        get
        {
            return this._carList;
        }
    }
    private List<Vehicle> _carList = new List<Vehicle>();

    #endregion

    /* window stuff */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T01:24:15.950

使用静态对象仅此而已

```
 public static List<string> vehicles =new  List<string> (); 
```

静态类和类成员用于创建无需创建类实例即可访问的数据和函数。静态类成员可用于分隔独立于任何对象身份的数据和行为：无论对象发生什么，数据和函数都不会改变。当类中没有依赖于对象标识的数据或行为时，可以使用静态类。

# if-statement - MIPS 中的 if 中的多个条件

> ID：15375267
> 
> 赞同：1
> 
> 时间：2013-03-13T01:10:22.847
> 
> 标签：if-statement, assembly, conditional-statements, mips

MIPS 提供分支指令，如相等时分支、不等于寄存器时分支、小于或等于 0 时分支、大于或等于 0 时分支等……所有分支指令仅使用两个操作数和一个条件. 如果我们在 if 语句中突然遇到多个条件会发生什么。

所以问题是如何编写 MIPS 代码：

```
if( (a<b) & ( b>c ) || (c==d)) {

}
else 
{

 } 
```

请帮助 if 语句中的这种多重条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:09:08.893

你可以重写：

```
if( (a<b) && ( b>c ) || (c==d)) {

} 
```

像这样：

```
bool altb = a < b;
bool bgtc = b > c;
bool ceqd = c == d;
bool and1 = altb && bgtc;
bool condition = and1 || ceqd;
if (condition) {
} else {
} 
```

这就是大多数编译器在 if 语句中评估复杂条件的方式。这样做也比将许多条件分支链接在一起要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-02T16:51:55.547

假设 $t0 有 a，$t1 有 b，$t2 有 c，$t3 有 d：

```
 outter_if_lbl: 
     bge $t0,$t1,exit_outter   #if a>=b break
     ble $t1,$t2,exit_outter   #if b=< c break
     bne $t2,$t3,exit_outter   #if c != d break
     #add functionality here   

     exit_outter:
     jr $ra #or whatever does your job 
```

我使用伪指令，所以如果你愿意，你可以转换它们。谷歌如何。其背后的想法是，您必须使用 if 语句的相反情况才能使代码类似地工作（这是通用的 C 到 Mips 转换规则）。

# coldfusion - ColdFusion 9.0.1 修补程序

> ID：15375274
> 
> 赞同：3
> 
> 时间：2013-03-13T01:11:07.987
> 
> 标签：coldfusion, coldfusion-9, hotfix

我有 ColdFusion 9.0.1

安装 ColdFusion 9 Hotfix 4 会同时安装 Hotfixes 1、2 和 3，还是我必须单独安装每个 Hotfix？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:22:10.273

您提到的 ColdFusion 修补程序是累积性的。关键就在名字里。请注意，您提到的修补程序 1 - 2 - 3 和 4 被命名为*Cumulative* Hotfix 1、*Cumulative* Hotfix 2、*Cumulative* Hotfix 3 和*Cumulative* Hotfix 4。这意味着每个 Hotfix 版本都包含上一个 Hotfix 的所有更改（埃斯）。但是，Adobe 也发布了一些不累积的修补程序。例如，请参阅 ColdFusion 9 的此修补程序；[APSB13-03](https://www.adobe.com/support/security/bulletins/apsb13-03.html)（顺便说一下，此修补程序包含在累积修补程序 4 中）。请注意，他们将这些更新命名为“安全更新：可用于 ColdFusion 的修补程序”。不幸的是，他们使用该术语*修补程序*再次，但还要注意它没有说*Cumulative*。这有点令人困惑，在我看来，这一直是 Adob​​e 的 ColdFusion 的一个缺点。保持服务器更新本身就是一种艺术形式。最后，Adobe 尝试使用 ColdFusion 10 解决此问题，并通过 ColdFusion 管理员进行更新。

最后，最好的办法是阅读修补程序页面本身的说明。他们将始终报告他们之前包含的修复程序（如果有的话）。您可以在此处找到的页面上查看累积修补程序 4 包含的内容：[ColdFusion 帮助/累积修补程序 4 | 冷融合 9.0.1](http://helpx.adobe.com/coldfusion/kb/cumulative-hotfix-4-coldfusion-901.html)

# android - 如何制作连续的 TextView？

> ID：15375275
> 
> 赞同：0
> 
> 时间：2013-03-13T01:11:10.300
> 
> 标签：android, android-layout, textview

默认情况下，TextViews 似乎带有一些我不知道如何删除的内置填充。例如，这是用户在我的应用程序中看到的内容。

![我的登录](../Images/6615730d90e3ed5635da031a333b1fb7.png)

我希望这两个 TextView 在 Pinterest 布局中是一个连续的块，如下所示。

![登录](../Images/7a4535b6db97ecf0132fb8b997db03e4.png)

如何实现这一目标？

**更新：** 最终，解决方案是手动设置背景，然后使用这样的分隔符：

```
 <EditText
        android:padding="10dp"
        android:id="@+id/login_name"
        android:lines="1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="0dp"
        android:hint="@string/nnn"
        android:background="#FFf0f0f0"
        android:imeOptions="actionNext" >
        <requestFocus />
    </EditText>

    <View android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="#FFd1d1d1"/>
    <View android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="#FFFFFFFF"/>

    <EditText
        android:padding="10dp"
        android:id="@+id/password"
        android:layout_width="match_parent"
        android:layout_marginTop="0dp"
        android:inputType="textPassword"
        android:hint="@string/enter_password"
        android:layout_height="wrap_content"
        android:imeOptions="actionDone"
        android:background="#FFf0f0f0"
        /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:13:25.147

1.  从您的布局文件中删除（设置为`0`）`margin`和。`padding``Top``Bottom``xml`

2.  将背景设置为纯白色，并添加一些边框或`<view>`分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:13:46.347

您只需要将`TextView`背景更改为您想要的。这样就可以了。只需将其设置`android:background`为白色框，它就会删除边距。

# hadoop - MR运行时hadoop映射分离

> ID：15375280
> 
> 赞同：0
> 
> 时间：2013-03-13T01:11:50.977
> 
> 标签：hadoop, mapreduce

我是hadoop的新手。我想检查我是否研究过并质疑一个假设。

这就是想法。比如hadoop中有5个节点，1个应该是master。每个从节点都有 1 个 MR 任务。- 在 conf/mapred-site.xml 中配置。

这是我研究过的，我已经运行了 hadoop 示例。MR 自动决定地图任务的字数。

> Q1。它与块大小选项或其他东西有关吗？

它可以通过属性进行更改。当我运行 PI 和随机文本编写器时，它发生了变化。

> Q2。是否可以更改任何其他 MR 程序？我的意思是，在字数方面，属性会影响地图任务的数量。

这是另一个想法。在这种情况下，我有 4 个从站，2 个地图任务。这意味着，它可以一次运行 2 个节点。

这只是假设。JT做了2个地图任务，估计时间超过1小时。这对表演没有好处。2 个节点未运行。如果使用 4 个节点的地图，它可能会更快。我想在作业运行时分离现有地图。

> Q3。这种假设的可能性。如果可以，请告诉我如何获取参考资料。

我在等你的建议。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:38:47.323

对于您的第一个问题，它与您拥有的块大小和文件数量有关，例如，您有 3,7 gb 数据和 512 mb 数据大小，它为此创建了 8 个地图任务。此外，它与您输入目录中的文件号直接相关。对于目录中的每个文件，至少会创建一个地图任务。您也可以通过编程方式增加（是的，这意味着您不能减少）地图任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T02:04:48.547

感谢您的回答。

首先，我没有考虑文件的数量。实际上，当 MR 在 JVM 中运行时，我对拆分映射感到好奇。我试图找到一些信息，它没有用。

现在好了，我知道了 hadoop 配置的重要性，尤其是 mapred-site.xml 对 MR 的重要性，我将进一步研究配置。

再次感谢你。

# c# - 如何在 ASP.NET 中创建具有与表单的输入元素相关联的公共属性的 WebControl？

> ID：15375285
> 
> 赞同：0
> 
> 时间：2013-03-13T01:13:02.973
> 
> 标签：c#, asp.net, webforms, web-controls

简而言之，我想创建一个可能在输入表单中多次出现的 WebControl。我草拟的 WebControl 具有假定与 Web 控件（文本框等）中的值相关的属性。我想要做的是在我的提交中按名称访问 WebControl 的输入元素的内容处理程序如下：

```
var firstname = customControl.FirstName;
var lastname = customControl.LastName; 
```

我来自 WPF 背景，所以这很熟悉，我让自己陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:20:19.680

这不是我的想法（在其他语言几个月后才回到.NET），我假设它是用于用户控件的，因为服务器控件的属性记录得很好。

首先，假设您的用户控件具有文本框`txtFirst`和`txtLast`.

在代码隐藏中，添加公共属性 FirstName 和 LastName。属性如下所示：

```
public string FirstName {
 get { return this.txtFirst.Text.Trim(); }
 set { this.txtFirst.Text = value ?? ""; }
}

public string LastName {
 get { return this.txtLast.Text.Trim(); }
 set { this.txtLast.Text = value ?? ""; }
} 
```

而已。如果您没有询问用户控件，我深表歉意。

# java - AutoCompleteTextView 不响应对其 ArrayAdapter 的更改

> ID：15375291
> 
> 赞同：2
> 
> 时间：2013-03-13T01:13:29.043
> 
> 标签：java, android, filtering, android-arrayadapter, autocompletetextview

`ArrayList`似乎填充得很好，但无论我使用什么方法，我似乎都无法让适配器填充数据。我已经尝试添加到`ArrayList`，也添加到`ArrayAdapter`. 无论哪种方式，我都无法在该`AutoCompleteTextView`级别或`ArrayAdapter`本身上得到响应（当然，`AutoCompleteTextView`它什么也没做）。任何人都可以看到有什么问题吗？

```
public class MainActivity extends Activity implements TextWatcher {
// private AutoCompleteView autoComplete; 
public String TAG = new String("MAINACTIVITY");
public ArrayAdapter<String> autoCompleteAdapter;
public AutoCompleteTextView autoComplete;
public InputStream inputStream;
public List<String> data;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    data = new ArrayList<String>();
    autoCompleteAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line, data);
    autoCompleteAdapter.setNotifyOnChange(true);
    autoComplete = (AutoCompleteTextView) findViewById(R.id.acsayt);
    autoComplete.setHint(R.string.search_hint);
    autoComplete.setThreshold(2);
    autoComplete.addTextChangedListener(this);
    autoComplete.setAdapter(autoCompleteAdapter);
}

// uphold TextWatcher interface methods
public void afterTextChanged(Editable s) {
}
public void beforeTextChanged(CharSequence s, int start, int count, int after) {
}

public void onTextChanged(CharSequence s, int start, int before, int count) {
    Log.d(TAG, "I detected a text change " + s.toString());
    data.clear();
    queryWebService();
}

private void queryWebService() {
    new Thread(new Runnable() {
        public void run() {
            Log.d(TAG, "spawned thread");

            //  Code in here to set up http connection, query webservice ...

            // parse the JSON response & add items to adapter
            try {
                JSONArray jArray = new JSONArray(resultString);
                int length = jArray.length();
                int countedValues, capturedValues;
                Log.d(TAG, "response had " + length + " items");
                int i = 0;
                while (i < length) {
                    JSONObject internalObject = jArray.getJSONObject(i);
                    String vehicleName = internalObject.getString("name").toString();
                    Log.d(TAG, "vehicle name is " + vehicleName);
                    try {
                        data.add(vehicleName);  
                        autoCompleteAdapter.add(vehicleName);   // not working
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    countedValues = data.size();    // correctly reports 20 values
                    capturedValues = autoCompleteAdapter.getCount();    //  is zero
                    Log.d(TAG, "array list holds " + countedValues + " values");
                    Log.d(TAG, "array adapter holds " + capturedValues + " values");
                    i++;
                }
            } catch (Exception e) {
                Log.d(TAG, "JSON manipulation err: " + e.toString());
            }
        }
    }).start();
} 
```

}

LogCat 显示来自 data.size() 的预期值数量，但来自 autoCompleteAdapter.getCount() 的值为零。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T11:09:25.217

> ArrayList 似乎填充得很好，但无论我使用什么方法，我似乎都无法让适配器填充数据

你违背了`AutoCompleTextView`工作原理。当用户开始在输入框中输入字符时，`AutoCompleteTextView`将过滤适配器，当发生这种情况时，它将显示下拉列表，其中包含设法通过过滤器请求的值。现在您已经设置为`AutoCompleteTextView`在每次用户输入字符时创建一个线程，问题是它`AutoCompleteTextview`永远不会看到这些值，因为它会在适配器实际填充正确的值之前请求适配器进行过滤。尝试这样的事情：

```
public static class BlockingAutoCompleteTextView extends
        AutoCompleteTextView {

    public BlockingAutoCompleteTextView(Context context) {
        super(context);
    }

    @Override
    protected void performFiltering(CharSequence text, int keyCode) {           
        // nothing, block the default auto complete behavior
    }

} 
```

并获取数据：

```
public void onTextChanged(CharSequence s, int start, int before, int count) {
    if (autoComplete.getThreashold() < s.length()) {
        return;
    } 
    queryWebService();
} 
```

您需要更新主 UI 线程上的数据并使用适配器的方法：

```
// do the http requests you have in the queryWebService method and when it's time to update the data:
runOnUiThread(new Runnable() {
        @Override
    public void run() {
        autoCompleteAdapter.clear();
        // add the data
                for (int i = 0; i < length; i++) {
                     // do json stuff and add the data
                     autoCompleteAdapter.add(theNewItem);                    
                } 
                // trigger a filter on the AutoCompleteTextView to show the popup with the results 
                autoCompleteAdapter.getFilter().filter(s, autoComplete);
    }
}); 
```

看看上面的代码是否有效。

# java - 如何在 Java 中使用带有 TreeMap 的 .get() 和 .put() 字符串

> ID：15375292
> 
> 赞同：0
> 
> 时间：2013-03-13T01:13:38.400
> 
> 标签：java, string, graph, treemap

我目前正在为使用字符串值作为顶点的无向加权图创建 Prim 的最小生成树。为了创建图形，我的老师说我们可以使用教科书中的边和图形类。但是，本书使用整数而不是字符串来表示顶点。我尝试用字符串替换所有整数，但是对于使用通用 TreeMap 中的 .get() 的每一行，我都收到了编译器错误，因为它找不到符号方法 get(java.lang.String)。经过一些工作后，我发现初始化 TreeMap 并使用 .add() 可用于字符串，但不适用于 .get() 或 .put() 方法。这里的代码与书中的代码完全一样，只是将 Integer 替换为 String。

如何使 .get() 和 .put() 方法与字符串一起使用？

```
import java.util.*;

class Graph {
    private int numVertices;    //number of vertices in the graph
    private int numEdges;        //number of edges in the graph

    private Vector<TreeMap<String, String>> adjList;

    //constructor
    public Graph(int n) {
        numVertices=n;
        numEdges=0;
        adjList=new Vector<TreeMap<String, String>>();
        for(int i=0;i<numVertices;i++) {
            adjList.add(new TreeMap<String, String>());
        }
    }

    //Determines the number of vertices in the graph
    public int getNumVertices() {
        return numVertices;
    }

    //Determines the number of edges in the graph
    public int getNumEdges() {
        return numEdges;
    }

    //Determines the weight of the edge between vertices v and w
    public String getEdgeWeight(String v, String w) {
        return adjList.get(v).get(w);
    }

    //Add the edge to both v's and w's adjacency list
    public void addEdge(String v, String w, int wgt) {
        adjList.get(v).put(w,wgt);
        adjList.get(w).put(v,wgt);
        numEdges++;
    }

    //Adds an edge to the graph
    public void addEdge(Edge e) {
        //Extract the vertices and weight from the edge e
        String v=e.getV();
        String w=e.getW();
        int weight=e.getWeight();
        addEdge(v, w, weight);
    }

    //Finds the edge connecting v and w
    public Edge findEdge(String v,String w) {
        int wgt=adjList.get(v).get(w);
        return new Edge(v, w, wgt);
    }

    //package access
    //Returns the adjacency list for given vertex
    TreeMap<String, String> getAdjList(String v) {
        return adjList.get(v);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:21:31.467

你的问题不在于`TreeMap`. `TreeMap`是基于键的集合。您的 Vector ' `adjList`' 遇到问题。[Vector](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)是一个基于索引的集合，您只能获取带有索引的项目。

尝试如下更改您的方法

```
public String getEdgeWeight(int v, String w) {
    return adjList.get(v).get(w);
} 
```

# windows - 我是否可以修改 Windows 7 预览窗格，以便 HTML 文件仅显示预览中的文本而不是呈现 html？

> ID：15375298
> 
> 赞同：6
> 
> 时间：2013-03-13T01:13:58.107
> 
> 标签：windows, windows-7, registry, windows-explorer, preview-pane

当我在资源管理器中单击 html 文件时，预览窗格当前会尝试呈现 html 以进行预览。我希望这种行为只显示文本而不解释标签。有没有办法通过弄乱注册表或更改某处的设置来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-27T08:34:10.273

**更新：**只需使用 PreviewConfig 实用程序[（zip 文件下载）](http://cdn9.howtogeek.com/wp-content/uploads/gg/previewconfig.zip)，它会为您对注册表进行必要的更改。以下是有关注册表更改如何工作的[详细说明](http://www.howtogeek.com/howto/windows-vista/make-windows-vista-explorer-preview-pane-work-for-more-file-types/)。

* * *

**要在预览窗格中以文本形式查看 HTML 文件，请使用此注册表补丁（以 .reg 扩展名保存并双击）：**

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\htmlfile\shellex\{8895B1C6-B41F-4C1C-A562-0D564250836F}]
@="{1531d583-8375-4d3f-b5fb-d23bbd169f22}" 
```

**奖励：在没有预览处理程序的情况下以纯文本形式预览*任何文件类型：***

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\*\shellex\{8895B1C6-B41F-4C1C-A562-0D564250836F}]
@="{1531d583-8375-4d3f-b5fb-d23bbd169f22}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:14:53.307

好吧，我最终想出了如何做到这一点。上面发布的内容很接近，但不完全是因为这让我编辑了错误的值。PreviewConfig 实用程序也试图更改错误的密钥，但由于它被锁定而无法更改。我最终经历了一个漫长的过程来启用锁定注册表项的编辑，当我意识到那是错误的地方时。

如果您想让预览窗格显示 HTML 文件的纯文本而不是呈现它，请打开注册表编辑器并转到：

`HKEY_CLASSES_ROOT\htmlfile\shellex\{8895B1C6-B41F-4C1C-A562-0D564250836F}`

编辑默认键并将值替换为`{1531d583-8375-4d3f-b5fb-d23bbd169f22}`您应该设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:12:22.700

我确定这是可能的

看看这个

我们要做的第一件事是向下导航到 HKEY_CLASSES_ROOT.reg。到达那里后，我们需要检查 (Default) 键的值，以确定是否注册了 ProgID，以及它的名称。

使用 ProgID 以便多个文件扩展名可以具有相同的设置，而无需在注册表中复制信息。这样，.reg 和其他键可以指向“regfile”ProgID 以获取它们的所有设置。

图片

接下来，您需要向下浏览到 ProgID 键，我们将在其中实际应用 hack：HKEY_CLASSES_ROOT\regfile。到达那里后，在其下创建一个名为 shellex 的新密钥，然后在该密钥下创建另一个具有此名称的密钥：

```
{8895b1c6-b41f-4c1c-a562-0d564250836f} 
```

此键是告诉 Windows 资源管理器您要设置预览处理程序的唯一 ID。创建并选择该密钥后，您将在右侧看到一个新的（默认）密钥，您将要对其进行修改。

双击（默认）键，并使用以下文本作为值：

```
{1531d583-8375-4d3f-b5fb-d23bbd169f22} 
```

该键是 Windows TXT Preview Handler 的唯一 ID，我通过查看注册表中当前注册的 Preview Handlers 列表找到了该 ID：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\PreviewHandlers 
```

您可以替换其中任何一个预览处理程序……如果您想注册媒体文件预览处理程序，您可以使用 {031EE060-67BC-460d-8847-E4A7C5E45A27} 作为值，而不是使用文本文件的预览处理程序。

此时，您应该能够选择一个 .reg 文件并在“预览”窗格中查看其内容：

同样的方法适用于任何其他文件类型，但这可能会变得非常乏味。

添加预览文件类型的简单方法

现在我们知道了它是如何工作的（或者不知道，因为您可能已经跳到了这一部分），您可以使用适用于 Windows Vista 的免费 PreviewConfig 实用程序，它使用起来非常简单。只需在左侧选择文件类型，然后在右侧选择所需的处理程序。

您可以选择纯文本或媒体，这将注册 Windows Media Player 以预览文件。这对于像 .mkv 这样的非标准文件很有用，这些文件可能使用正确的插件在 Windows Media 播放器中播放良好，但可能无法预览。单击应用按钮，您就完成了。

[http://www.howtogeek.com/howto/windows-vista/make-windows-vista-explorer-preview-pane-work-for-more-file-types/](http://www.howtogeek.com/howto/windows-vista/make-windows-vista-explorer-preview-pane-work-for-more-file-types/)

# c - 在 C 中创建一个 Mallocate 数组函数

> ID：15375304
> 
> 赞同：2
> 
> 时间：2013-03-13T01:15:26.253
> 
> 标签：c, multidimensional-array, segmentation-fault, malloc

我有一个项目，我在 C 中创建了几个动态的二维整数数组。

我试图通过创建一个 mallocateArray 函数来减少冗余代码。我可以让它在没有这个功能的情况下工作。

问题是指针可能很麻烦，由于某种原因，当我尝试使用此方法时，我只是遇到了一个段错误：

这是我得到的：

```
 void mallocateArray(int ***array, int *row, int *col){
     //allocate storage for the array of ints:
         *array = (int**)malloc(*row * sizeof(int *));
         int i;
         for (i = 0; i < *row; i++){
            *array[i] = (int*)malloc(*col * sizeof(int));
         }
     } 
```

这是我的数组的定义方式：

```
 int **matrix1,
     int row = 2
     int col = 3

     mallocateArray(&matrix1, &row, &col); 
```

当我运行它时，我得到一个段错误。所以目前我只是不使用该方法并处理冗余。我曾尝试通过取消引用等来弄乱指针，但我似乎无法弄清楚。

我希望你们能帮助我。

这是我的主要方法中有效的代码示例：

```
 result = (int**)malloc(row1 * sizeof(int *));
int i;
for (i = 0; i < row1; i++){
    result[i] = (int*)malloc(col2 * sizeof(int));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T01:17:55.303

你很近。只是少了一些括号。这一行：

```
*array[i] = (int*)malloc(*col * sizeof(int)); 
```

应该：

```
(*array)[i] = malloc(*col * sizeof(int)); 
```

注意这些操作顺序！我也去掉了你不必要的演员表。

如果您只是按值传递`row`，您的函数看起来会不那么复杂。`col`例子：

```
void mallocateArray(int ***array, int row, int col)
{
    *array = malloc(row * sizeof(int *));
    for (int i = 0; i < row; i++){
       (*array)[i] = malloc(col * sizeof(int));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T01:18:29.907

您正在分配数组数组。这是一个有趣的专业提示 - 您可以将已知维度的二维数组压缩成一维数组！要将 (x,y) 索引转换为单维索引，请使用以下命令：i = (x + y * cols)

这样做将允许您为阵列生成单个连续的内存板，而不是本质上的内存块列表。尝试使用 malloc(sizeof(int) * row * column) 并公开数组访问，如上所述。

这将减少取消引用列的需要并提供（小但存在的）性能提升。

# xcode - 上传ios应用程序出错？

> ID：15375307
> 
> 赞同：0
> 
> 时间：2013-03-13T01:16:00.037
> 
> 标签：xcode, upload

我正要上传我的应用程序。

我已经阅读了整个互联网，但找不到对我的问题有意义的答案：

我存档了我的项目并尝试单击“分发”并单击中间的选项，我认为这得到了一个 .ipa 文件。我尝试在 Application Loader 中使用它，但只收到此错误：

![在此处输入图像描述](../Images/b8998606c19ad91d2ebc382223c80478.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:24:54.407

## 以下是将应用程序上传到 App Store (Xcode 4) 的方法：

1.  确保您拥有正确的证书来签署您的应用程序版本。如果您不确定，请谷歌它。
2.  确保 Xcode 指向 iOS 设备（左上角）
3.  构建 > 存档
4.  打开管理器到存档选项卡。
5.  点击“分发”
6.  填写您的身份信息
7.  按照步骤。

## 如果您遇到错误

通常，错误类似于“您的捆绑 ID 错误”或“捆绑版本 bla bla bla”。**这些错误看起来非常可怕。他们不是。**通常，您只需搜索错误即可。或在这里评论寻求帮助。

### 如果错误与代码签名有关

欢迎来到真实的世界。我花了 2*个月*的时间试图弄清楚这一点。在这里评论寻求帮助。

编辑：注意到你的问题是代码签名。在***< your project >* > *< your target >* >Build Settings > Code Signing > Code Signing Identity**下，使用这些值，直到找到可行的方法。这通常意味着您的捆绑包 ID 与证书上的 ID 不匹配，等等。有时您必须通过供应门户制作证书。如需更多帮助，请在此处发表评论。

# rspec - Capybara-Webkit CSS 支持

> ID：15375310
> 
> 赞同：1
> 
> 时间：2013-03-13T01:16:16.587
> 
> 标签：rspec, capybara, capybara-webkit

我目前使用 capybara/rspec 来测试 div 是否不可见（显示：无），但如果样式是在 CSS 文件中定义而不是直接在页面中定义，这似乎总是返回 true。

```
visit "http://#{host}/"
page.find('#sort-by').should_not be_visible 
```

这是 webkit 驱动程序的问题吗？我在他们的文档中`#visible?`注意到，结果可能非常适合 CSS 支持。[http://rubydoc.info/gems/capybara/0.4.0/Capybara/Element#visible%3F-instance_method](http://rubydoc.info/gems/capybara/0.4.0/Capybara/Element#visible%3F-instance_method)

Capybara/webkit 的更高版本是否有进一步的支持？我们已经考虑过升级，但对我们来说这样做并非易事。

我使用以下版本的水豚和 webkit 驱动程序

```
Capybara 1.1.4
Capybara-webkit 0.13.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T17:49:19.267

尝试：

```
expect(page).not_to have_selector("#sort-by") 
```

# asp.net - ASP MVC - 错误的路线？

> ID：15375311
> 
> 赞同：3
> 
> 时间：2013-03-13T01:16:28.337
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我有一个我称之为论坛的区域，现在，在线程列表页面中，我有线程链接，它们是这样生成的：

```
@Html.ActionLink(title, "Thread", "Forums", new { category = item.CategoryName, item = item.Id, page = 0 }, null) 
```

现在，当我打开一个线程，并且我想从一个线程中获取到当前线程的链接时，我正在这样做（在线程中）：

```
@Html.ActionLink(title, "Thread", "Forums", new { category = Model.Post.CategoryName, item = Model.Post.ThreadId, page = Model.Page }, null) 
```

话题列表页面和话题页面都在同一个区域。现在一起查看两个操作链接：

```
 1\. @Html.ActionLink(title, "Thread", "Forums", new { category = Model.Post.CategoryName, item = Model.Post.ThreadId, page = Model.Page }, null)
   2\. @Html.ActionLink(title, "Thread", "Forums", new { category = item.CategoryName, item = item.Id, page = 0 }, null) 
```

这两个动作链接实际上是相同的（`Model`包含有效数据，我已经检查过），但它们生成不同的链接：

第一：

```
http://localhost:11227/Forums/Thread/1?category=Kosz&page=0 
```

第二个：

```
http://localhost:11227/Forums/Thread/Kosz/1/0 
```

第二个生成正确的链接，而第一个...我不知道第一个在做什么。它们之间的**唯一**区别是它们执行的位置，正如我上面所说，第一个在线程中执行，第二个在线程列表页面中执行。

我能做些什么来修复第一个链接？

**更新：**添加路线：

```
context.MapRoute(
                "Forums_thread",
                "Forums/{action}/{category}/{item}/{page}",
                new { controller = "Forums", page = UrlParameter.Optional }
            ); 
```

**第二次更新**我认为我真的发现了一些错误？感谢Eilon的回复，我发现这是：

```
@Html.ActionLink("something", "Thread", "Forums", new { category = "Kosz", item = Model.Post.ThreadId, page = Model.Page }, null) 
```

生成正确的链接，而这：

```
@Html.ActionLink("something", "Thread", "Forums", new { category = Model.Post.CategoryName, item = Model.Post.ThreadId, page = Model.Page }, null) 
```

生成不正确的链接（`Model.Post.CategoryName`仍然`"Kosz"`）！我不知道发生了什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T11:10:50.877

请更正以下路线

```
context.MapRoute(
                "Forums_thread",
                "Forums/{action}/{category}/{item}/{page}",
                new { controller = "Forums",category="category", item="item",page = UrlParameter.Optional }
            ); 
```

# java - 在本地运行的 Hive 包括 LZO 的本机库

> ID：15375316
> 
> 赞同：0
> 
> 时间：2013-03-13T01:17:09.490
> 
> 标签：java, hadoop, hive, lzo

我正在尝试在 OSX Mountain Lion 上本地运行 Hive，并尝试按照此处的说明进行操作：

[https://github.com/twitter/hadoop-lzo](https://github.com/twitter/hadoop-lzo)

我已经编译了本机 OSX 库和 jar，但我不确定我应该如何在本地启动 Hive，以便 Hive/Hadoop 使用本机库。

我已经尝试通过 JAVA_LIBRARY_PATH 环境变量包含它，但我认为这通常只适用于 Hadoop。

```
export JAVA_LIBRARY_PATH="${SCRIPTS_DIR}/jars/native/Mac_OS_X-x86_64-64" 
```

当我使用 LzopCodec 运行 hive 时，例如：

```
SET mapred.output.compression.codec = com.hadoop.compression.lzo.LzopCodec; 
```

运行运行 map/reduce 作业的查询时出现以下错误：

```
SELECT COUNT(*) from test_table;

Job running in-process (local Hadoop)
org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.RuntimeException: native-lzo library not available
        at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getHiveRecordWriter(HiveFileFormatUtils.java:237)
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.createBucketFiles(FileSinkOperator.java:477)
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.processOp(FileSinkOperator.java:525)
        at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
        at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
        at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
        at org.apache.hadoop.hive.ql.exec.GroupByOperator.forward(GroupByOperator.java:959)
        at org.apache.hadoop.hive.ql.exec.GroupByOperator.closeOp(GroupByOperator.java:995)
        at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:557)
        at org.apache.hadoop.hive.ql.exec.ExecReducer.close(ExecReducer.java:303)
        at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:530)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:421)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:262)
Caused by: java.lang.RuntimeException: native-lzo library not available
        at com.hadoop.compression.lzo.LzoCodec.getCompressorType(LzoCodec.java:155)
        at org.apache.hadoop.io.compress.CodecPool.getCompressor(CodecPool.java:100)
        at com.hadoop.compression.lzo.LzopCodec.getCompressor(LzopCodec.java:135)
        at com.hadoop.compression.lzo.LzopCodec.createOutputStream(LzopCodec.java:70)
        at org.apache.hadoop.hive.ql.exec.Utilities.createCompressedStream(Utilities.java:868)
        at org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat.getHiveRecordWriter(HiveIgnoreKeyTextOutputFormat.java:80)
        at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getRecordWriter(HiveFileFormatUtils.java:246)
        at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getHiveRecordWriter(HiveFileFormatUtils.java:234)
        ... 14 more 
```

我还尝试在 Hive 脚本中设置 mapred.child.env LD_LIBRARY_PATH（不走运）：

```
SET mapred.child.env="LD_LIBRARY_PATH=../../scripts/jars/native/Mac_OS_X-x86_64-64"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:12:06.720

再次阅读清晰的说明：

> 如何配置 Hadoop 以使用这些类？

```
# Copy the native library
tar -cBf - -C build/hadoop-gpl-compression-0.1.0-dev/lib/native . | tar -xBvf - -C /path/to/hadoop/dist/lib/native 
```

基本上我只需要将构建的本机库复制到我的 hadoop 安装中：

```
ant compile-native tar
cp -r build/hadoop-lzo-0.4.17-SNAPSHOT/lib/native/Mac_OS_X-x86_64-64 /usr/local/Cellar/hadoop/1.1.2/libexec/lib/native/ 
```

# actionscript-3 - 动态地将位图从库加载到影片剪辑中

> ID：15375317
> 
> 赞同：1
> 
> 时间：2013-03-13T01:17:13.527
> 
> 标签：actionscript-3

我有一个名为 HomingBullet 的 MovieClip 类，它是一个空的 MovieClip（里面没有图形）。我正在努力做到这一点，以便当我实例化 HomingBullet 时，我可以从库中选择一个图形。目前，HomingBullet 的构造函数如下所示：

```
public function HomingBullet(speed:int)
{
    playerX = Main.instance.getPlayerX();
    playerY = Main.instance.getPlayerY();
    this.speed = speed;
    addEventListener(Event.ADDED_TO_STAGE, addedToStage);
} 
```

此类的典型实例化当前如下所示：

```
var tempBulletA = new HomingBullet(6); 
```

本质上，我正在尝试制作它，以便在实例化它时可以从库中选择要使用的图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:40:05.547

当然。最简单的方法是在您的库中创建一个 MovieClip 并将位图放置在其中。然后打开该影片剪辑的属性对话框，单击“高级”下拉菜单，然后选中“Export for ActionScript”并为其命名。对于这个例子，假设我选择“Image1”作为我的类名。

然后在您的代码中，您可以执行以下操作：

```
public function HomingBullet(speed:int, image:DisplayObject)
{

    addChild(image);
    playerX = Main.instance.getPlayerX();
    playerY = Main.instance.getPlayerY();
    this.speed = speed;
    addEventListener(Event.ADDED_TO_STAGE, addedToStage);
} 
```

你可以用以下方式实例化它：

```
var tempBulletA = new HomingBullet(6, new Image1()); 
```

您可以只使用一个位图并以相同的方式将其导出（不使用动画剪辑包装器），但这有点烦人，因为您在创建位图时必须知道位图的高度和宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:40:07.567

我将假设您库中的所有项目符号都是基于 MovieClip 的。您可以将构造函数设置为：

```
public function HomingBullet(speed:int, bulletClass:Class)
{
    addChild(new bulletClass());
    playerX = Main.instance.getPlayerX();
    playerY = Main.instance.getPlayerY();
    this.speed = speed;
    addEventListener(Event.ADDED_TO_STAGE, addedToStage);
} 
```

要创建一个实例：

```
var tempBulletA = new HomingBullet(6, someBullet); 
```

上面示例中的 someBullet 将是您想要使用的所需项目符号的类名称。

# javascript - 如何从 Javascript 中获取值以输入文本表单？

> ID：15375318
> 
> 赞同：0
> 
> 时间：2013-03-13T01:17:20.213
> 
> 标签：javascript, forms, select, textinput

我有一个选择表格，有普通，家庭，豪华，行政等各种酒店房间，每个都有相应的价格让我们说普通房间我会设置300美元的价格。

在选择表格的右侧，我每次选择让我们说普通房间右侧的输入文本字段会显示价格 $300。所以基本上我使用带有代码的java脚本，`var ordinary=document.getElementByID("ord").value`这样我就可以设置价格，`var ordinary= 3500`. 接下来是每次我在选择表单中选择普通房间时从变量普通中获取值以显示在输入文本字段中，但我该怎么做呢？

这是代码

```
<script language="javascript" type="text/javascript">
    var ordinary= document.getElementById("ord").value;
    var ordinary= 5300;

</script>

<form action="insert.php" method="post">
    <table align="center"><tr><td>
            <font face="Arial, Helvetica, sans-serif">RESERVATIONS</font> 
        </td></tr><hr color="#00CC99"/> <br/>
    </table>
    <table border="0" align="center">
        <tr>    
            <th align="justify"> Name: &nbsp </th> 
            <td><input type="text" name="name"></td> 
        </tr>
        <tr>
            <th align="justify"> Contact Number: &nbsp; </th> 
            <td><input type="text" name="contact"></td> 
        </tr>
        <tr>
            <th  align="justify">Room Type: &nbsp;</th>
        <td>
            <select name="roomType">
                <option value="---">---------------------------</option>
                <option value="Ordinary " id="ord">Ordinary</option>
                <option value="Family ">Family</option>
                <option value="Superior ">Superior</option>
                <option value="Deluxe ">Deluxe</option>
                <option value="Corner Suite King">Corner Suite King</option>
                <option value="Executive ">Executive</option>
                <option value="Executive Suite">Executive Suite</option>
                <option value="Grand Executive">Grand Executive</option>
                <option value="Presidential ">Presidential</option>
            </select>
        </td>
            <td>

            </td>
        </tr>
        <tr>
            <th align="justify">AddOn Services: &nbsp;</th>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:27:52.567

给出`select`一个`id`of`roomType`然后使用这个

```
var e = document.getElementById("roomType");
var desiredValue = e.options[e.selectedIndex].value; 
```

options 的值应该是脚本所需的数据。您应该调用`selectedIndex`select 元素的 而不是`options`，否则这将是很多我们都必须输入的代码......没有乐趣

```
 <select name="roomType" id="roomType">
        <option value="---">---------------------------</option>
        <option value="5300">Ordinary</option>
        <option value="SomePrice">Family</option>
        <option value="SomePrice">Superior</option>
        <option value="SomePrice">Deluxe</option>
        <option value="SomePrice">Corner Suite King</option>
        <option value="SomePrice">Executive</option>
        <option value="SomePrice">Executive Suite</option>
        <option value="SomePrice">Grand Executive</option>
        <option value="SomePrice">Presidential</option>
    </select> 
```

将 SomePrice 更改为您想要的值。

# objective-c - 使用二进制模式作为选择器选择数组元素

> ID：15375319
> 
> 赞同：1
> 
> 时间：2013-03-13T01:17:44.433
> 
> 标签：objective-c, cocoa-touch, binary, nsarray

我有一个`NSArray`，并且我计算了一个整数列表，这些整数表示（二进制）我需要从数组中拉出到新数组中的元素。

例如，我有 7、11 和 13，它们的位模式是`000111`、`001011`和`001101`。我想从主数组中抓取三个数组，由元素 0,1,2，然后是元素 0,1,3，然后是 0,2,3 组成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:14:10.760

`NSIndexSet`从您拥有的位模式构造一个：

```
@implementation NSIndexSet (NonContiguous)
+ (instancetype)indexSetFromMask:(NSUInteger)mask
{
    NSMutableIndexSet * set = [NSMutableIndexSet indexSet];

    for( NSUInteger i = 0; i < (sizeof(NSUInteger) * 8); i++ ){
        if( mask & (1l << i) ){
            [set addIndex:i];
        }
    }

    return set;
}
@end 
```

然后使用`objectsAtIndexes:`

```
[origArray objectsAtIndexes:[NSIndexSet indexSetFromMask:7]];
// etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:46:01.887

假设您希望输出格式为 [[a,b,c],[a,b,d],[a,c,d]] 示例，您可以执行以下操作：

```
NSArray *sourceArray = [[NSArray alloc] initWithObjects:@"a",@"b",@"c",@"d",...,nil];
NSArray *grabArray = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:7],[NSNumber numberWithInt:11],[NSNumber numberWithInt:13],...,nil];
NSMutableArray *resultArray = [[NSMutableArray alloc] init]; 
```

然后对于grabArray的每个元素，将正确的元素添加到resultArray：

```
for (NSNumber num in grabArray) {
    int n = [num intValue];
    int bit = floor(log2(n)); //get highest bit in the current number
    NSMutableArray *curr = [[NSMutableArray alloc] init];
    while (n>0) {
        if (n>pow(bit,2)) { //if this bit is a 1
            [curr addObject:[sourceArray objectAtIndex:bit]];
        }
        n-=pow(bit,2);
        bit-=1;
    }
    [resultArray addObject:curr];
} 
```

那么 resultArray 应该是您要查找的数组。它将以相反的顺序添加对象，因此如果顺序很重要，您将希望使用它`[curr insertObject: [sourceArray objectAtIndex:bit] atIndex:0];`。

# php - 切片数组和计数

> ID：15375322
> 
> 赞同：0
> 
> 时间：2013-03-13T01:17:54.970
> 
> 标签：php, arrays

如何计算数组的部分？例如：

大批：

```
[name] => Michael
[surname] => Hadfield
[midname] => Olsow
[email] => mh@mail.com
[phone] => 3342020 
```

我想计算不包括 [midname] 和 [phone] 的数组字段，所以结果应该是 3

而且我还想从这个数组创建数组，结果是：

```
[name] => Michael
[surname] => Hadfield
[email] => mh@mail.com 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:29:11.177

你可以尝试这样的事情：

```
$keys_to_exclude = array( 'midname', 'phone');
$new_array = array_diff_key( $original_array, array_flip( $keys_to_exclude));
echo count( $new_array);
print_r( $new_array); 
```

使用此输入数组：

```
$original_array = array( 
    'name' => 'Michael',
    'surname' => 'Hadfield',
    'midname' => 'Olsow',
    'email' => 'mh@mail.com',
    'phone' => 3342020
); 
```

你应该得到[你想要的输出](http://viper-7.com/hdfSoF)，即`echo count();`打印`3`，结果`$new_array`是：

```
Array
(
    [name] => Michael
    [surname] => Hadfield
    [email] => mh@mail.com
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:19:16.000

1.  使用循环来计算您想要的部分

2.  将结果乘以`count($array)`0.6（假设总是有五个部分和三个要计算的部分）

    `$count = count($array) * .6;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:22:07.200

我想你总是可以复制数组，取消设置 2 个索引，然后计算它：

```
$array_copy = $array;
unset($array_copy('midname')); // Note unsetting a non-existent key does NOT throw an error.
unset($array_copy('phone'));
echo count($array_copy); 
```

# java - Java 作业

> ID：15375324
> 
> 赞同：1
> 
> 时间：2013-03-13T01:17:58.107
> 
> 标签：java, variable-assignment, assignment-operator

我正在准备考试，我正在查看一个示例程序，我很困惑。这是代码：

```
public class Problem1 {
public static void f(A X)
{
    A Y = X;
    Y.key = X.key + 1;
}

public static void f(B X)
{
    B Y = new B();
    Y.key = X.key + 2; //Y.key = 12
    X = Y; //X points to Y? 
}

public static void main(String[] args)
{
    A P = new A();
    P.key = 3;
    B Q = new B();
    Q.key = 10;
    f(P);
    System.out.println(P.key);
    f(Q);
    System.out.println(Q.key);
    P = Q;
    f(P);
    System.out.println(P.key);
    }
    }

    class A
    {
public int key;
    }
    class B extends A 
    {

    } 
```

我对 f(P) 很好。我的问题是 f(Q)。我知道创建了一个名为 Y 的新 B，它的密钥是 12。我的问题是，X = Y 不应该将 X 指向 Y 吗？使 Q 的键值变为 12 而不是 10？代码打印出 4,10,11。我很困惑为什么它打印 10 而不是 12。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:39:35.187

在 java 中，类类型的每个变量，如 P、Q、X 等，都是对对象（或 null）的引用。你可以想象内存某处有一个对象，变量指向它：
`P -----> (P object)`
当你调用`f(P)`时，第一个 f 方法接收到对同一个对象的引用，但它是一个不同的引用：
`(main) P -----> (P object)`
`(f) X -----> (P object)`
然后 f 再做一个引用：
`(f) Y -----> (P object)` 当它更改密钥，它会在同一个对象中更改它。

在第二种情况下，`f(Q)`第二个 f 方法再次接收到对同一对象的（不同）引用：
`(main) Q -----> (Q object)`
`(f) X -----> (Q object)`
然后它创建一个新对象： `(f) Y -----> (Y object)`
然后它更改该对象中的键，并将 X 变量设置为指向该对象：
`(f) X -----> (Y object, key=12)`
然而，在您的主要方法中，Q 变量没有改变：
`(main) Q -----> (Q object)`
因为 X 只是 Q 的副本，它不是 Q 本身。所以Q还是指向了没有修改的Q对象，修改了Y对象。

# java - Hibernate Entity to Json object with jackson to http post

> ID：15375328
> 
> 赞同：0
> 
> 时间：2013-03-13T01:18:19.013
> 
> 标签：java, json, web-services, jersey, jackson

我正在尝试使用杰克逊从我的休眠实体创建一个 json 对象，该对象可以使用球衣发布到远程 url。我似乎无法弄清楚如何将我的休眠实体转换为 json 对象。使用resteasy-jackson，我能够创建我自己的可由localhost访问的Web服务，它在我的屏幕上正确输出了我的json对象，但我希望构建json对象而不必对我自己的应用程序使用webservice。也许我正在以错误的方式处理这一切？我只是不想手动将每个属性添加到 json 对象。

到目前为止我尝试过的，

界面

```
@Path("/company")
public interface CompanyResource {

    @GET
    @Produces("application/json")
    public List<Company> getAllDomains();

    @POST
    @Produces("application/json")
    public Response post(Company company);

    @GET
    @Path("{id}")
    @Produces("application/json")
    public Company getDomainObject(@PathParam("id") Integer id);

} 
```

班级

```
public List<Company> getAllDomains() {
    return this.companyDAO.findAllCompanies();
}

public Response post(Company company) {
    companyDAO.updateCompany(company);
    return Response.ok().build();
}

public Company getDomainObject(@PathParam("id") Integer id) {
    Company domainObject = this.companyDAO.findCompanyById(id);
    if (domainObject == null) {
        throw new WebApplicationException(Response.Status.NOT_FOUND);
    }
    return domainObject;
} 
```

邮政服务

```
public void setupRender() throws GeneralSecurityException, UnsupportedEncodingException {
    try {
        Client client = Client.create();

        String url = kayakoWebService.generateURL();

        WebResource webResource = client.resource(url);

        ClientResponse response = webResource.accept("application/json").get(ClientResponse.class);

        if (response.getStatus() != 200) {
            throw new RuntimeException("Failed : HTTP error code : "
                    + response.getStatus());
        }

        //Outputs object rather than json
        System.out.println("test " + companyResource.getDomainObject(1));

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

公司类

```
@Entity
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class Company extends StatefulEntity {

    @Validate("maxLength=50,required")
    private String name;

    @Column(nullable = true)
    @Temporal(TemporalType.TIMESTAMP)
    private Date createDate;

    @Column(nullable = true)
    @Temporal(TemporalType.TIMESTAMP)
    private Date cancelDate;

    @Column(nullable = true)
    @Temporal(TemporalType.TIMESTAMP)
    private Date modifyDate;

    @ManyToOne
    @JoinColumn(name="parent_id")
    private Company parent;

    @Column(nullable = true, length = 5)
    private Integer roomUnitCount;

    @Column(nullable = false, length = 8)
    private String accountNumber;

    @JsonIgnore
    public String getAccountNumber() {
        return accountNumber;
    }

    public void setAccountNumber(String accountNumber) {
        this.accountNumber = accountNumber;
    }

        //additional getters setters
    } 
```

cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.datasource">jdbc/domain</property>
        <property name="hbm2ddl.auto">validate</property>

        <property name="hibernate.format_sql">false</property>
        <property name="hibernate.show_sql">false</property>

        <property name="hibernate.cache.use_second_level_cache">true</property>
        <property name="hibernate.cache.use_query_cache">true</property>
        <property name="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</property>
        <property name="hibernate.generate_statistics">true</property>
    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:56:21.847

如果我了解您要做什么，那么您已经编写了很多对您要完成的工作没有多大用处的代码。一方面，您只应该在服务器端定义资源类。其次，直接调用它们充满了问题，它们是应该由*容器*调用的服务器组件。

好消息是，泽西岛的客户非常强大。只要设置正确，它就会自动将您的对象序列化为适当的格式。在您的情况下，您要确保在客户端中包含 jersey-json JAR。如果是，那么您可以使用以下代码自动将您的对象转换为 JSON：

```
Company domainObject = companyDAO.findCompanyById(id);
ClientResponse response = webResource.accept(MediaType.APPLICATION_JSON)
    .entity(domainObject, MediaType.APPLICATION_JSON)
    .post(ClientResponse.class); 
```

此代码假定服务器正在响应`ClientResponse`. 另请注意，您需要客户端类路径中的 jersey-json 和 Jackson JAR 才能使其正常工作。如果使用 Maven 足以包含这些依赖项：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-core</artifactId>
    <version>1.17</version>
</dependency>

<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-client</artifactId>
    <version>1.17</version>
</dependency>

<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.17</version>
</dependency> 
```

否则，您需要手动包含所有正确的 JAR，最小集：

*   杰克逊核心asl-1.9.2.jar
*   杰克逊-jaxrs-1.9.2.jar
*   jackson-mapper-asl-1.9.2.jar
*   杰克逊-xc-1.9.2.jar
*   jersey-core-1.14.jar
*   jersey-json-1.14.jar
*   jersey-server-1.14.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:33:22.273

如果我很好地理解了您，您正在寻找将 Java 对象转换为其匹配的 JSON 表示形式。这称为 JSON 序列化，您在“stackoverflow”本身中有一些链接谈论此事

1.  [更好的 Java JSON 库？](https://stackoverflow.com/questions/338586/a-better-java-json-library)
2.  [Java JSON 序列化 - 最佳实践](https://stackoverflow.com/questions/7539954/java-json-serialization-best-practice)

# java - Java IDE - Eclipse，导入资源

> ID：15375329
> 
> 赞同：0
> 
> 时间：2013-03-13T01:18:22.360
> 
> 标签：java, eclipse, jar

希望有人可以帮助我做一些可能非常简单的事情。我是 Java 编码的新手（2 周），并且在 Linux 下使用 Eclipse IDE。我目前正在创建一个 JFrame 应用程序，到目前为止一切顺利。

不过，我有一个小障碍——我已经包含了一组图标并将它们分配给 JLabel，并让它们显示出来。在导出 Executable JAR 时，它们不会作为资源在 JAR 中。如果我打开 JAR 文件，我可以在 JAR 的根目录中看到图像，而不是在它们各自的文件夹中组织。（图标/等）。

TL;DR - 我如何将文件夹中的资源作为资源导入 JAR。

```
 public void drawCategoryIcons() {
    for (int i = 0; i < aspCategories.length; i++) {
        Icon pcIcon = new ImageIcon(getClass().getResource( "/icons/" + cats[i]));

        aspCategories[i] = new JLabel("", JLabel.CENTER);
        aspCategories[i].setIcon(pcIcon);
        panel.add(aspCategories[i], "w 200, center");
    }
} 
```

如果我在 Eclipse 中运行项目，一切都会正常运行。导出它，我得到了大量的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:34:42.837

您可能已经在 eclipse 项目中创建了图标目录作为单独的源文件夹（它有一个由文件夹图标和包图标组成的图标）。源文件夹只是开发过程中的逻辑元素（因此您可以在逻辑上分离应用程序的模块），它们不是导出应用程序的一部分。仅导出源文件夹中的所有*内容。*

因此，一个简单的解决方法可能是在您的其他源文件夹（通常称为“src”）中创建一个包“图标”。导出后，这些包将作为子文件夹存在。

# libcurl - 带有客户端证书的 libcurl，我收到错误“无法加载客户端密钥 -8178。* NSS 错误 -8178”

> ID：15375330
> 
> 赞同：5
> 
> 时间：2013-03-13T01:18:23.573
> 
> 标签：libcurl

当我运行这段代码时，我得到了错误信息：

*   即将 connect() 到 10.12.190.155 端口 443 (#0)
*   正在尝试 10.12.190.155... * 已连接
*   连接到 10.12.190.155 (10.12.190.155) 端口 443 (#0)
*   使用 certpath 初始化 NSS：sql:/etc/pki/nssdb
*   CAfile：/home/wh/work/sslkey/ca.crt CApath：无
*   无法加载客户端密钥 -8178。
*   NSS 错误 -8178
*   关闭连接 #0
*   本地 SSL 证书问题

卷曲*卷曲；CURLcode 资源；

```
//static const char *pClientCert = "/home/wh/work/sslkey/user1.pem";

curl_global_init(CURL_GLOBAL_DEFAULT);
curl = curl_easy_init();

if(curl)
{
    curl_easy_setopt(curl, CURLOPT_HEADER, 1L);
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);
    curl_easy_setopt(curl, CURLOPT_URL, "https://10.12.190.155/");
    curl_easy_setopt(curl, CURLOPT_CAINFO, "/home/wh/work/sslkey/ca.crt");
    curl_easy_setopt(curl,CURLOPT_SSLCERT,"/home/wh/work/sslkey/user1.pem");
    res = curl_easy_perform(curl);
          /* Check for errors */
    if(res != CURLE_OK)
        fprintf(stderr, "curl_easy_perform() failed: %s\n",
            curl_easy_strerror(res));
    curl_easy_cleanup(curl);
}

curl_global_cleanup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-09T07:48:51.620

您的代码中没有`curl_easy_setopt(curl, CURLOPT_SSLKEY, "key_file_path");`获取您的密钥。另外还不清楚您的 user1.pem 是否同时包含密钥和证书？

如果答案是否定的，则需要使用上述命令提供 key.pem 文件。如果您从 .p12 文件转换您的密钥，请同时检查[此](https://stackoverflow.com/a/27105058/1485809)问题。

阅读[此](https://curl.haxx.se/libcurl/c/simplessl.html)内容以正确编写代码。

# python - 如何使用 python Tornado 服务器在请求中最好地执行多处理？

> ID：15375336
> 
> 赞同：48
> 
> 时间：2013-03-13T01:18:44.450
> 
> 标签：python, multiprocessing, tornado, python-multithreading

我正在使用 I/O 非阻塞 python 服务器 Tornado。我有一类`GET`请求可能需要很长时间才能完成（想想在 5-10 秒的范围内）。问题是 Tornado 会阻止这些请求，因此后续的快速请求会被阻止，直到慢速请求完成。

我查看了：[https](https://github.com/facebook/tornado/wiki/Threading-and-concurrency) ://github.com/facebook/tornado/wiki/Threading-and-concurrency并得出结论，我想要＃3（其他进程）和＃4（其他线程）的某种组合。#4 本身就有问题，当有另一个线程在执行“heavy_lifting”时，我无法将可靠的控制权返回给 ioloop。（我认为这是由于 GIL 以及 heavy_lifting 任务具有高 CPU 负载并不断将控制权从主 ioloop 中拉出的事实，但这是一个猜测）。

因此，我一直在设计如何解决这个问题的原型，方法是在单独的进程中在这些缓慢的请求中执行“繁重的”任务`GET`，然后在进程完成时将回调放回 Tornado ioloop 以完成请求。这释放了 ioloop 来处理其他请求。

我创建了一个简单的示例来演示一个可能的解决方案，但我很想从社区中获得反馈。

**我的问题有两个：如何简化当前的方法？它可能存在哪些陷阱？**

## 该方法

1.  利用 Tornado 的内置`asynchronous`装饰器，它允许请求保持打开状态并让 ioloop 继续。

2.  `multiprocessing`使用 python 的模块为“繁重”任务生成一个单独的进程。我首先尝试使用该`threading`模块，但无法将任何可靠的控制权交还给 ioloop。看来这`mutliprocessing`也将利用多核。

3.  使用模块在主 ioloop 进程中启动一个“观察者”线程，该`threading`模块的工作是在完成`multiprocessing.Queue`时观察“繁重”任务的结果。这是必要的，因为我需要一种方法来知道 heavy_lifting 任务已经完成，同时仍然能够通知 ioloop 这个请求现在已经完成。

4.  确保“观察者”线程经常通过调用将控制权交给主 ioloop 循环，`time.sleep(0)`以便继续轻松处理其他请求。

5.  当队列中有结果时，然后从“观察者”线程添加一个回调，使用`tornado.ioloop.IOLoop.instance().add_callback()`它被记录为从其他线程调用 ioloop 实例的唯一安全方法。

6.  请务必`finish()`在回调中调用以完成请求并提交回复。

下面是一些显示这种方法的示例代码。 `multi_tornado.py`是实现上述大纲的服务器，`call_multi.py`是一个示例脚本，它以两种不同的方式调用服务器来测试服务器。两个测试都使用 3 个慢速`GET`请求和 20 个快速`GET`请求调用服务器。结果显示在打开和未打开线程的情况下运行。

在“无线程”运行它的情况下，3 个慢速请求块（每个需要一秒钟多一点的时间才能完成）。20 个快速请求中有几个挤在 ioloop 中的一些慢速请求之间（不完全确定这是如何发生的 - 但可能是我在同一台机器上同时运行服务器和客户端测试脚本的工件）。这里的要点是所有快速请求都在不同程度上受到了阻碍。

在启用线程运行的情况下，20 个快速请求首先立即完成，三个慢速请求在之后大约同时完成，因为它们每个都并行运行。这是期望的行为。三个慢速请求并行完成需要 2.5 秒 - 而在非线程情况下，三个慢速请求总共需要大约 3.5 秒。所以总体上大约有 35% 的加速（我假设是由于多核共享）。但更重要的是 - 快速请求立即以慢速请求的 leu 处理。

我在多线程编程方面没有很多经验 - 所以虽然这似乎在这里有效，但我很想学习：

**有没有更简单的方法来实现这一点？这种方法中可能潜伏着什么怪物？**

（注意：未来的权衡可能是只运行更多的 Tornado 实例，使用像 nginx 这样的反向代理进行负载平衡。无论我将使用负载平衡器运行多个实例 - 但我担心只是在这个问题上抛出硬件因为在阻塞方面，硬件似乎与问题直接相关。）

## 示例代码

**`multi_tornado.py`**（示例服务器）：

```
import time
import threading
import multiprocessing
import math

from tornado.web import RequestHandler, Application, asynchronous
from tornado.ioloop import IOLoop

# run in some other process - put result in q
def heavy_lifting(q):
    t0 = time.time()
    for k in range(2000):
        math.factorial(k)

    t = time.time()
    q.put(t - t0)  # report time to compute in queue

class FastHandler(RequestHandler):
    def get(self):
        res = 'fast result ' + self.get_argument('id')
        print res
        self.write(res)
        self.flush()

class MultiThreadedHandler(RequestHandler):
    # Note:  This handler can be called with threaded = True or False
    def initialize(self, threaded=True):
        self._threaded = threaded
        self._q = multiprocessing.Queue()

    def start_process(self, worker, callback):
        # method to start process and watcher thread
        self._callback = callback

        if self._threaded:
            # launch process
            multiprocessing.Process(target=worker, args=(self._q,)).start()

            # start watching for process to finish
            threading.Thread(target=self._watcher).start()

        else:
            # threaded = False just call directly and block
            worker(self._q)
            self._watcher()

    def _watcher(self):
        # watches the queue for process result
        while self._q.empty():
            time.sleep(0)  # relinquish control if not ready

        # put callback back into the ioloop so we can finish request
        response = self._q.get(False)
        IOLoop.instance().add_callback(lambda: self._callback(response))

class SlowHandler(MultiThreadedHandler):
    @asynchronous
    def get(self):
        # start a thread to watch for
        self.start_process(heavy_lifting, self._on_response)

    def _on_response(self, delta):
        _id = self.get_argument('id')
        res = 'slow result {} <--- {:0.3f} s'.format(_id, delta)
        print res
        self.write(res)
        self.flush()
        self.finish()   # be sure to finish request

application = Application([
    (r"/fast", FastHandler),
    (r"/slow", SlowHandler, dict(threaded=False)),
    (r"/slow_threaded", SlowHandler, dict(threaded=True)),
])

if __name__ == "__main__":
    application.listen(8888)
    IOLoop.instance().start() 
```

**`call_multi.py`**（客户测试员）：

```
import sys
from tornado.ioloop import IOLoop
from tornado import httpclient

def run(slow):
    def show_response(res):
        print res.body

    # make 3 "slow" requests on server
    requests = []
    for k in xrange(3):
        uri = 'http://localhost:8888/{}?id={}'
        requests.append(uri.format(slow, str(k + 1)))

    # followed by 20 "fast" requests
    for k in xrange(20):
        uri = 'http://localhost:8888/fast?id={}'
        requests.append(uri.format(k + 1))

    # show results as they return
    http_client = httpclient.AsyncHTTPClient()

    print 'Scheduling Get Requests:'
    print '------------------------'
    for req in requests:
        print req
        http_client.fetch(req, show_response)

    # execute requests on server
    print '\nStart sending requests....'
    IOLoop.instance().start()

if __name__ == '__main__':
    scenario = sys.argv[1]

    if scenario == 'slow' or scenario == 'slow_threaded':
        run(scenario) 
```

## 试验结果

通过运行`python call_multi.py slow` （阻塞行为）：

```
Scheduling Get Requests:
------------------------
http://localhost:8888/slow?id=1
http://localhost:8888/slow?id=2
http://localhost:8888/slow?id=3
http://localhost:8888/fast?id=1
http://localhost:8888/fast?id=2
http://localhost:8888/fast?id=3
http://localhost:8888/fast?id=4
http://localhost:8888/fast?id=5
http://localhost:8888/fast?id=6
http://localhost:8888/fast?id=7
http://localhost:8888/fast?id=8
http://localhost:8888/fast?id=9
http://localhost:8888/fast?id=10
http://localhost:8888/fast?id=11
http://localhost:8888/fast?id=12
http://localhost:8888/fast?id=13
http://localhost:8888/fast?id=14
http://localhost:8888/fast?id=15
http://localhost:8888/fast?id=16
http://localhost:8888/fast?id=17
http://localhost:8888/fast?id=18
http://localhost:8888/fast?id=19
http://localhost:8888/fast?id=20

Start sending requests....
slow result 1 <--- 1.338 s
fast result 1
fast result 2
fast result 3
fast result 4
fast result 5
fast result 6
fast result 7
slow result 2 <--- 1.169 s
slow result 3 <--- 1.130 s
fast result 8
fast result 9
fast result 10
fast result 11
fast result 13
fast result 12
fast result 14
fast result 15
fast result 16
fast result 18
fast result 17
fast result 19
fast result 20 
```

通过运行`python call_multi.py slow_threaded` （所需的行为）：

```
Scheduling Get Requests:
------------------------
http://localhost:8888/slow_threaded?id=1
http://localhost:8888/slow_threaded?id=2
http://localhost:8888/slow_threaded?id=3
http://localhost:8888/fast?id=1
http://localhost:8888/fast?id=2
http://localhost:8888/fast?id=3
http://localhost:8888/fast?id=4
http://localhost:8888/fast?id=5
http://localhost:8888/fast?id=6
http://localhost:8888/fast?id=7
http://localhost:8888/fast?id=8
http://localhost:8888/fast?id=9
http://localhost:8888/fast?id=10
http://localhost:8888/fast?id=11
http://localhost:8888/fast?id=12
http://localhost:8888/fast?id=13
http://localhost:8888/fast?id=14
http://localhost:8888/fast?id=15
http://localhost:8888/fast?id=16
http://localhost:8888/fast?id=17
http://localhost:8888/fast?id=18
http://localhost:8888/fast?id=19
http://localhost:8888/fast?id=20

Start sending requests....
fast result 1
fast result 2
fast result 3
fast result 4
fast result 5
fast result 6
fast result 7
fast result 8
fast result 9
fast result 10
fast result 11
fast result 12
fast result 13
fast result 14
fast result 15
fast result 19
fast result 20
fast result 17
fast result 16
fast result 18
slow result 2 <--- 2.485 s
slow result 3 <--- 2.491 s
slow result 1 <--- 2.517 s 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-08-08T16:40:38.050

如果你愿意使用[`concurrent.futures.ProcessPoolExecutor`](https://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor)而不是`multiprocessing`，这其实很简单。Tornado 的 ioloop 已经支持 `concurrent.futures.Future`，因此它们开箱即用可以很好地配合使用。`concurrent.futures`包含在 Python 3.2+ 中，并[已向后移植到 Python 2.x](https://pypi.python.org/pypi/futures)。

这是一个例子：

```
import time
from concurrent.futures import ProcessPoolExecutor
from tornado.ioloop import IOLoop
from tornado import gen

def f(a, b, c, blah=None):
    print "got %s %s %s and %s" % (a, b, c, blah)
    time.sleep(5)
    return "hey there"

@gen.coroutine
def test_it():
    pool = ProcessPoolExecutor(max_workers=1)
    fut = pool.submit(f, 1, 2, 3, blah="ok")  # This returns a concurrent.futures.Future
    print("running it asynchronously")
    ret = yield fut
    print("it returned %s" % ret)
    pool.shutdown()

IOLoop.instance().run_sync(test_it) 
```

输出：

```
running it asynchronously
got 1 2 3 and ok
it returned hey there 
```

`ProcessPoolExecutor`有一个比 更有限的 API `multiprocessing.Pool`，但如果你不需要更高级的功能`multiprocessing.Pool`，它是值得使用的，因为集成要简单得多。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-01T16:30:01.150

`multiprocessing.Pool`可以集成到`tornado`I/O循环中，但是有点乱。可以使用更清晰的集成`concurrent.futures`（有关详细信息，请参阅[我的其他答案](https://stackoverflow.com/a/25208213/2073595)），但是如果您被困在 Python 2.x 上并且无法安装`concurrent.futures`backport，那么您可以严格使用以下方法来完成它`multiprocessing`：

和方法都有一个可选参数`multiprocessing.Pool.apply_async`，这意味着它们都可以潜在地插入到. 所以在大多数情况下，在子进程中异步运行代码就这么简单：`multiprocessing.Pool.map_async``callback``tornado.gen.Task`

```
import multiprocessing
import contextlib

from tornado import gen
from tornado.gen import Return
from tornado.ioloop import IOLoop
from functools import partial

def worker():
    print "async work here"

@gen.coroutine
def async_run(func, *args, **kwargs):
    result = yield gen.Task(pool.apply_async, func, args, kwargs)
    raise Return(result)

if __name__ == "__main__":
    pool = multiprocessing.Pool(multiprocessing.cpu_count())
    func = partial(async_run, worker)
    IOLoop().run_sync(func) 
```

正如我所提到的，这在*大多数*情况下都很有效。但是如果`worker()`抛出异常，`callback`则永远不会被调用，这意味着`gen.Task`永远不会完成，并且您将永远挂起。现在，如果您知道您的工作*永远不会*引发异常（例如，因为您将整个事情包装在`try`/`except`中），您可以愉快地使用这种方法。但是，如果您想让异常从您的工作人员中逃脱，我发现的唯一解决方案是将一些多处理组件子类化，并且`callback`即使工作人员子进程引发异常也让它们调用：

```
from multiprocessing.pool import ApplyResult, Pool, RUN
import multiprocessing
class TornadoApplyResult(ApplyResult):
    def _set(self, i, obj):
        self._success, self._value = obj 
        if self._callback:
            self._callback(self._value)
        self._cond.acquire()
        try:
            self._ready = True
            self._cond.notify()
        finally:
            self._cond.release()
        del self._cache[self._job]

class TornadoPool(Pool):
    def apply_async(self, func, args=(), kwds={}, callback=None):
        ''' Asynchronous equivalent of `apply()` builtin

        This version will call `callback` even if an exception is
        raised by `func`.

        '''
        assert self._state == RUN
        result = TornadoApplyResult(self._cache, callback)
        self._taskqueue.put(([(result._job, None, func, args, kwds)], None))
        return result
 ...

 if __name__ == "__main__":
     pool = TornadoPool(multiprocessing.cpu_count())
     ... 
```

通过这些更改，异常对象将被返回`gen.Task`，而不是`gen.Task`无限期地挂起。我还更新了我的`async_run`方法以在异常返回时重新引发异常，并进行了一些其他更改，以便为工作子进程中抛出的异常提供更好的回溯。这是完整的代码：

```
import multiprocessing
from multiprocessing.pool import Pool, ApplyResult, RUN
from functools import wraps

import tornado.web
from tornado.ioloop import IOLoop
from tornado.gen import Return
from tornado import gen

class WrapException(Exception):
    def __init__(self):
        exc_type, exc_value, exc_tb = sys.exc_info()
        self.exception = exc_value
        self.formatted = ''.join(traceback.format_exception(exc_type, exc_value, exc_tb))

    def __str__(self):
        return '\n%s\nOriginal traceback:\n%s' % (Exception.__str__(self), self.formatted)

class TornadoApplyResult(ApplyResult):
    def _set(self, i, obj):
        self._success, self._value = obj 
        if self._callback:
            self._callback(self._value)
        self._cond.acquire()
        try:
            self._ready = True
            self._cond.notify()
        finally:
            self._cond.release()
        del self._cache[self._job]   

class TornadoPool(Pool):
    def apply_async(self, func, args=(), kwds={}, callback=None):
        ''' Asynchronous equivalent of `apply()` builtin

        This version will call `callback` even if an exception is
        raised by `func`.

        '''
        assert self._state == RUN
        result = TornadoApplyResult(self._cache, callback)
        self._taskqueue.put(([(result._job, None, func, args, kwds)], None))
        return result

@gen.coroutine
def async_run(func, *args, **kwargs):
    """ Runs the given function in a subprocess.

    This wraps the given function in a gen.Task and runs it
    in a multiprocessing.Pool. It is meant to be used as a
    Tornado co-routine. Note that if func returns an Exception 
    (or an Exception sub-class), this function will raise the 
    Exception, rather than return it.

    """
    result = yield gen.Task(pool.apply_async, func, args, kwargs)
    if isinstance(result, Exception):
        raise result
    raise Return(result)

def handle_exceptions(func):
    """ Raise a WrapException so we get a more meaningful traceback"""
    @wraps(func)
    def inner(*args, **kwargs):
        try:
            return func(*args, **kwargs)
        except Exception:
            raise WrapException()
    return inner

# Test worker functions
@handle_exceptions
def test2(x):
    raise Exception("eeee")

@handle_exceptions
def test(x):
    print x
    time.sleep(2)
    return "done"

class TestHandler(tornado.web.RequestHandler):
    @gen.coroutine
    def get(self):
        try:
            result = yield async_run(test, "inside get")
            self.write("%s\n" % result)
            result = yield async_run(test2, "hi2")
        except Exception as e:
            print("caught exception in get")
            self.write("Caught an exception: %s" % e)
        finally:
            self.finish()

app = tornado.web.Application([
    (r"/test", TestHandler),
])

if __name__ == "__main__":
    pool = TornadoPool(4)
    app.listen(8888)
    IOLoop.instance().start() 
```

以下是它对客户端的行为方式：

```
dan@dan:~$ curl localhost:8888/test
done
Caught an exception: 

Original traceback:
Traceback (most recent call last):
  File "./mutli.py", line 123, in inner
    return func(*args, **kwargs)
  File "./mutli.py", line 131, in test2
    raise Exception("eeee")
Exception: eeee 
```

如果我同时发送两个 curl 请求，我们可以看到它们在服务器端被异步处理：

```
dan@dan:~$ ./mutli.py 
inside get
inside get
caught exception inside get
caught exception inside get 
```

**编辑：**

请注意，此代码在 Python 3 中变得更简单，因为它`error_callback`为所有异步`multiprocessing.Pool`方法引入了关键字参数。这使得与 Tornado 集成变得更加容易：

```
class TornadoPool(Pool):
    def apply_async(self, func, args=(), kwds={}, callback=None):
        ''' Asynchronous equivalent of `apply()` builtin

        This version will call `callback` even if an exception is
        raised by `func`.

        '''
        super().apply_async(func, args, kwds, callback=callback,
                            error_callback=callback)

@gen.coroutine
def async_run(func, *args, **kwargs):
    """ Runs the given function in a subprocess.

    This wraps the given function in a gen.Task and runs it
    in a multiprocessing.Pool. It is meant to be used as a
    Tornado co-routine. Note that if func returns an Exception
    (or an Exception sub-class), this function will raise the
    Exception, rather than return it.

    """
    result = yield gen.Task(pool.apply_async, func, args, kwargs)
    raise Return(result) 
```

除了kwarg之外，我们在覆盖中需要做的`apply_async`就是使用关键字参数调用父级。无需覆盖.`error_callback``callback``ApplyResult`

我们可以通过在我们的 中使用 MetaClass 来获得更好的效果`TornadoPool`，以允许`*_async`直接调用它的方法，就好像它们是协程一样：

```
import time
from functools import wraps
from multiprocessing.pool import Pool

import tornado.web
from tornado import gen
from tornado.gen import Return
from tornado import stack_context
from tornado.ioloop import IOLoop
from tornado.concurrent import Future

def _argument_adapter(callback):
    def wrapper(*args, **kwargs):
        if kwargs or len(args) > 1:
            callback(Arguments(args, kwargs))
        elif args:
            callback(args[0])
        else:
            callback(None)
    return wrapper

def PoolTask(func, *args, **kwargs):
    """ Task function for use with multiprocessing.Pool methods.

    This is very similar to tornado.gen.Task, except it sets the
    error_callback kwarg in addition to the callback kwarg. This
    way exceptions raised in pool worker methods get raised in the
    parent when the Task is yielded from.

    """
    future = Future()
    def handle_exception(typ, value, tb):
        if future.done():
            return False
        future.set_exc_info((typ, value, tb))
        return True
    def set_result(result):
        if future.done():
            return
        if isinstance(result, Exception):
            future.set_exception(result)
        else:
            future.set_result(result)
    with stack_context.ExceptionStackContext(handle_exception):
        cb = _argument_adapter(set_result)
        func(*args, callback=cb, error_callback=cb)
    return future

def coro_runner(func):
    """ Wraps the given func in a PoolTask and returns it. """
    @wraps(func)
    def wrapper(*args, **kwargs):
        return PoolTask(func, *args, **kwargs)
    return wrapper

class MetaPool(type):
    """ Wrap all *_async methods in Pool with coro_runner. """
    def __new__(cls, clsname, bases, dct):
        pdct = bases[0].__dict__
        for attr in pdct:
            if attr.endswith("async") and not attr.startswith('_'):
                setattr(bases[0], attr, coro_runner(pdct[attr]))
        return super().__new__(cls, clsname, bases, dct)

class TornadoPool(Pool, metaclass=MetaPool):
    pass

# Test worker functions
def test2(x):
    print("hi2")
    raise Exception("eeee")

def test(x):
    print(x)
    time.sleep(2)
    return "done"

class TestHandler(tornado.web.RequestHandler):
    @gen.coroutine
    def get(self):
        try:
            result = yield pool.apply_async(test, ("inside get",))
            self.write("%s\n" % result)
            result = yield pool.apply_async(test2, ("hi2",))
            self.write("%s\n" % result)
        except Exception as e:
            print("caught exception in get")
            self.write("Caught an exception: %s" % e)
            raise
        finally:
            self.finish()

app = tornado.web.Application([
    (r"/test", TestHandler),
])

if __name__ == "__main__":
    pool = TornadoPool()
    app.listen(8888)
    IOLoop.instance().start() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:04:11.867

如果您的获取请求花费了那么长时间，那么龙卷风是错误的框架。

我建议您使用 nginx 将快速到达的龙卷风和较慢的到达不同的服务器。

PeterBe 有一篇有趣的文章，他在其中运行多个 Tornado 服务器并将其中一个设置为“慢速服务器”以处理长时间运行的请求，请参阅：[担心 io-blocking](http://www.peterbe.com/plog/worrying-about-io-blocking)我会尝试这种方法。

# mysql - 如何做一个MYSQL条件选择语句

> ID：15375339
> 
> 赞同：1
> 
> 时间：2013-03-13T01:19:02.683
> 
> 标签：mysql, sql

**背景**

我面临以下与三个表有关的问题

`class_sectors`表包含三类类

`classes`表包含学生可以参加的课程列表

`class_choices`包含学生对每个部门的第一、第二和第三类选择。因此，例如，对于扇区 1，Student_A 将 class_1 作为第一选择，将 class_3 作为第二选择，将 class_10 作为第三选择，然后对于扇区 2，他还有另外三个选择，等等...

该`class_choices`表具有以下列：

```
kp_choice_id | kf_personID | kf_sectorID | kf_classID | preference | assigned 
```

我认为列名是不言自明的。`preference`是 1、2 或 3。`assigned`一旦我们审查了学生的选择并将其分配到班级，它就会被设置为 1。

**问题**：

编写一个 sql 查询，告诉学生他们被分配到每个部门的哪个班级。如果他们的班级没有被分配，它应该默认显示他们的第一偏好。

我实际上已经让这个工作了，但是使用两个（非常臃肿？？） sql 查询如下：

```
$choices = $db -> Q("SELECT
    *, concat_ws(':', `kf_personID`, `kf_sectorID`) AS `concatids`
FROM
    `class_choices`
WHERE
    (`assigned` = '1')
GROUP BY
    `concatids`
ORDER BY
    `kf_personIDID` ASC,
    `kf_sectorID` ASC;");

$choices2 = $db -> Q("SELECT
    *, concat_ws(':', `kf_personID`, `kf_sectorID`) AS `concatids`
FROM
    `class_choices`
WHERE
    `preference` = '1'
GROUP BY
    `concatids`
HAVING
    `concatids` NOT IN (".iimplode($choices).")
ORDER BY
    `kf_personID` ASC,
    `kf_sectorID` ASC;");

if(is_array($choices2)){
    $choices = array_merge($choices,$choices2);
} 
```

现在`$choices`确实有我想要的。

但我确信有一种方法可以简化这一点，合并两个 SQL 查询，因此它更轻量级。

是否有某种条件 SQL 查询可以做到这一点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:18:23.903

您的解决方案使用两个步骤使您能够根据需要过滤数据。由于您正在生成报告，因此这是一种非常好的方法，即使它看起来比您想要的更冗长。

这种方法的优点是更容易调试和维护，这是一大优势。

要改善这种情况，您需要考虑数据结构本身。当我查看`class_choices`表格时，我看到以下字段：`kf_classID, preference, assigned`其中包含关键信息。

对于每个班级，该`assigned`字段为 0（默认）或 1（当为学生分配班级偏好时）。默认情况下，班级`preference = 1`是分配的班级，因为您在报告`assigned=0`中显示特定部门中所有学生的班级选择时。

数据模型可以通过强加如下业务规则来改进：
设置`preference=1`默认值`assigned=1`。当班级选择过程发生时，如果学生被分配了第二或第三选择，则不分配偏好 1 并分配替代选择。

这意味着应用程序中有更多代码，但它使报告更容易一些。

困难的根源在于分配过程没有明确分配第一偏好。它仅`assigned`在学生无法获得第一个选择时更新。

总之，您的 SQL 很好，改进来自对数据模型的重新审视。

希望这会有所帮助，并祝工作顺利！

# javascript - 悬停功能适用于警报但无法附加跨度标签

> ID：15375344
> 
> 赞同：0
> 
> 时间：2013-03-13T01:19:30.447
> 
> 标签：javascript, jquery, css, jquery-ui, javascript-events

悬停功能适用于显示警报....但我无法显示带有 span 标签的附加文本....不知道它发生了什么...在下面提供我的代码.....

```
$('document').ready(function () {
    window.setTimeout(function () {
        $('.cubeCell').each(function () {
            var htmlText = $(this).attr('data-text');
            $(this).append('<div class="cubeTextStyle">' + htmlText + '</div>');
            $(this).hover(

            function () {
                //alert("123");
                $(this).append($("<span> ***</span>"));
            },

            function () {
                $(this).find("span:last").remove();
            });
        });
    }, 600);
});

<div class="cubeCell"
     data-text="hover here"
     class="desktopContactImage cubeCell"
     data-caption="&lt;a style='padding-left: 40px; font-size: 14px; color: grey;' href='/Inventory/Partnumber/?ps=list' &gt;Register&lt;/a&gt; &lt;div&gt; &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' href='/Bom/Bom/?ps=list' &gt;Demo&lt;/a&gt; &lt;/div&gt; &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' &gt;Reports&lt;/a&gt;"
     data-image="http://intra.defie.co/images/Desktop_icons_02.07.13/guest.png"
></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:21:45.933

我对标记以及如何实现旋转框知之甚少（一无所知），但我想知道您是否尝试在 cubeStyleText 旁边显示文本，因为您将跨度附加到悬停时的同一位置但是相反，如果是这种情况，它会出现在盒子后面，而不是

```
$(this).append($("<span> ***</span>")); 
```

用这个

```
$(this).children(".cubeTextStyle").append($("<span> ***</span>")); 
```

如果是这样的话，这似乎可以解决定位问题。

# api - 如何使用 SoundCloud API 返回的数组遍历 SoundCloud 曲目列表

> ID：15375346
> 
> 赞同：0
> 
> 时间：2013-03-13T01:19:45.610
> 
> 标签：api, loops, iterator, soundcloud

我正在使用 SoundCloud API 来尝试获取用户曲目的播放次数。这将是所有曲目的总播放量。

我可以从 Soundcloud API 获得一个返回的数组，该数组显示所有可用的用户曲目。

我需要遍历所有这些曲目并将所有“[playback_count]”相加。这会给我我需要的总数字。

我只是不知道如何遍历数组以获取信息并获取并显示最终结果。

任何帮助将不胜感激。

**这是返回的数组**- 我删除了一些方面，因为有很多代码。

```
Array
(
    [0] => Array
        (
            [kind] => track
            [id] => 81677429
            [created_at] => 2013/03/03 22:32:32 +0000
            [user_id] => 7160186
            [duration] => 365773
            [commentable] => 1
            [state] => finished
            [original_content_size] => 15046155
            [sharing] => public
            [tag_list] => nari & milani martindhamen benny benassi steve angello laidback luke mightydubkatz robin s amanda wilson justanothergroove atom satisfaction showmelove loveonmymind mass 2012 2013 house progressive electro bootleg remix mashup
            [permalink] => just-another-groove-one-step
            [streamable] => 1
            [embeddable_by] => all
            [downloadable] => 1
            [purchase_url] => 
            [label_id] => 
            [purchase_title] => 
            [genre] => Progressive House
            [title] => Just Another Groove, One Step Atom, Satisfaction, Show Me Love, Love On My Mind (MASS BOOTLEG)
            [description] => Nari & Milani vs. Martin Dhamen, Benny Benassi, Steve Angello, Laidback Luke, Mighty Dub Katz featuring The Biz and Robin S, Amanda Wilson -  Just Another Groove, One Step Atom, Satisfaction, Show Me Love, Love On My Mind (MASS BOOTLEG)
            [label_name] => 
            [release] => 
            [track_type] => 
            [key_signature] => 
            [isrc] => 
            [video_url] => 
            [bpm] => 
            [release_year] => 
            [release_month] => 
            [release_day] => 
            [original_format] => mp3
            [license] => all-rights-reserved
            [uri] => http://api.soundcloud.com/tracks/81677429
            [user] => Array
                (
                    [id] => 7160186
                    [kind] => user
                    [permalink] => mass-official
                    [username] => mass official
                    [uri] => http://api.soundcloud.com/users/7160186
                    [permalink_url] => http://soundcloud.com/mass-official
                    [avatar_url] => http://i1.sndcdn.com/avatars-000029524162-jdiyn4-large.jpg?45575d7
                )

            [permalink_url] => http://soundcloud.com/mass-official/just-another-groove-one-step
            [artwork_url] => http://i1.sndcdn.com/artworks-000042075610-suv3cx-large.jpg?45575d7
            [waveform_url] => http://w1.sndcdn.com/qWZAqcPzSqdW_m.png
            [stream_url] => http://api.soundcloud.com/tracks/81677429/stream
            [download_url] => http://api.soundcloud.com/tracks/81677429/download
            [playback_count] => 668
            [download_count] => 132
            [favoritings_count] => 12
            [comment_count] => 7
            [attachments_uri] => http://api.soundcloud.com/tracks/81677429/attachments
        )

    [1] => Array
        (
            [kind] => track
            [id] => 64330580
            [created_at] => 2012/10/22 06:33:05 +0000
            [user_id] => 7160186
            [duration] => 4704989
            [commentable] => 1
            [state] => finished
            [original_content_size] => 188185127
            [sharing] => public
            [tag_list] => 
            [permalink] => mass-summer-party-mix-2012-1
            [streamable] => 1
            [embeddable_by] => all
            [downloadable] => 1
            [purchase_url] => 
            [label_id] => 
            [purchase_title] => 
            [genre] => Dance-pop, House
            [title] => MASS SUMMER PARTY MIX 2012
            [description] => 01-Will.I.Am feat. Eva Simons - This Is Love
            [label_name] => 
            [release] => 
            [track_type] => 
            [key_signature] => 
            [isrc] => 
            [video_url] => 
            [bpm] => 
            [release_year] => 
            [release_month] => 
            [release_day] => 
            [original_format] => mp3
            [license] => all-rights-reserved
            [uri] => http://api.soundcloud.com/tracks/64330580
            [user] => Array
                (
                    [id] => 7160186
                    [kind] => user
                    [permalink] => mass-official
                    [username] => mass official
                    [uri] => http://api.soundcloud.com/users/7160186
                    [permalink_url] => http://soundcloud.com/mass-official
                    [avatar_url] => http://i1.sndcdn.com/avatars-000029524162-jdiyn4-large.jpg?45575d7
                )

            [permalink_url] => http://soundcloud.com/mass-official/mass-summer-party-mix-2012-1
            [artwork_url] => http://i1.sndcdn.com/artworks-000032637806-efhtcw-large.jpg?45575d7
            [waveform_url] => http://w1.sndcdn.com/bVg89jcTqVDF_m.png
            [stream_url] => http://api.soundcloud.com/tracks/64330580/stream
            [download_url] => http://api.soundcloud.com/tracks/64330580/download
            [playback_count] => 5416
            [download_count] => 3120
            [favoritings_count] => 95
            [comment_count] => 10
            [attachments_uri] => http://api.soundcloud.com/tracks/64330580/attachments
        )

    [2] => Array
        (
            [kind] => track
            [id] => 59035163
            [created_at] => 2012/09/07 15:30:13 +0000
            [user_id] => 7160186
            [duration] => 426645
            [commentable] => 1
            [state] => finished
            [original_content_size] => 17065398
            [sharing] => public
            [tag_list] => avicii nicky romero coldplay mass nicktim everyteardropisawaterfall 2012 mix house progressive electronic electronica bootleg mashup
            [permalink] => avicii-nicky-romero-ft-1
            [streamable] => 1
            [embeddable_by] => all
            [downloadable] => 1
            [purchase_url] => 
            [label_id] => 
            [purchase_title] => 
            [genre] => Progressive House
            [title] => Avicii & Nicky Romero ft. Coldplay - Nicktim Vs. Every Teardrop Is A Waterfall (Mass Bootleg)
            [description] => 
            [label_name] => 
            [release] => 
            [track_type] => 
            [key_signature] => 
            [isrc] => 
            [video_url] => 
            [bpm] => 
            [release_year] => 
            [release_month] => 
            [release_day] => 
            [original_format] => mp3
            [license] => all-rights-reserved
            [uri] => http://api.soundcloud.com/tracks/59035163
            [user] => Array
                (
                    [id] => 7160186
                    [kind] => user
                    [permalink] => mass-official
                    [username] => mass official
                    [uri] => http://api.soundcloud.com/users/7160186
                    [permalink_url] => http://soundcloud.com/mass-official
                    [avatar_url] => http://i1.sndcdn.com/avatars-000029524162-jdiyn4-large.jpg?45575d7
                )

            [permalink_url] => http://soundcloud.com/mass-official/avicii-nicky-romero-ft-1
            [artwork_url] => http://i1.sndcdn.com/artworks-000029888965-2kigan-large.jpg?45575d7
            [waveform_url] => http://w1.sndcdn.com/iJ3jS6UcvgH0_m.png
            [stream_url] => http://api.soundcloud.com/tracks/59035163/stream
            [download_url] => http://api.soundcloud.com/tracks/59035163/download
            [playback_count] => 2786
            [download_count] => 728
            [favoritings_count] => 38
            [comment_count] => 11
            [attachments_uri] => http://api.soundcloud.com/tracks/59035163/attachments
        )

    [3] => Array
        (
            [kind] => track
            [id] => 56192626
            [created_at] => 2012/08/13 19:58:55 +0000
            [user_id] => 7160186
            [duration] => 309616
            [commentable] => 1
            [state] => finished
            [original_content_size] => 12380020
            [sharing] => public
            [tag_list] => rihanna miami2ibiza wherehaveyoubeen mass bootleg 2012 progressive swedish house mafia
            [permalink] => swedish-house-mafia-ft
            [streamable] => 1
            [embeddable_by] => all
            [downloadable] => 1
            [purchase_url] => 
            [label_id] => 
            [purchase_title] => 
            [genre] => Progressive House
            [title] => Swedish House Mafia Ft. Rihanna - Where Have You Been, Miami 2 Ibiza (Mass Bootleg)
            [description] => 
            [label_name] => 
            [release] => 
            [track_type] => 
            [key_signature] => 
            [isrc] => 
            [video_url] => 
            [bpm] => 
            [release_year] => 
            [release_month] => 
            [release_day] => 
            [original_format] => mp3
            [license] => all-rights-reserved
            [uri] => http://api.soundcloud.com/tracks/56192626
            [user] => Array
                (
                    [id] => 7160186
                    [kind] => user
                    [permalink] => mass-official
                    [username] => mass official
                    [uri] => http://api.soundcloud.com/users/7160186
                    [permalink_url] => http://soundcloud.com/mass-official
                    [avatar_url] => http://i1.sndcdn.com/avatars-000029524162-jdiyn4-large.jpg?45575d7
                )

            [permalink_url] => http://soundcloud.com/mass-official/swedish-house-mafia-ft
            [artwork_url] => http://i1.sndcdn.com/artworks-000028404589-qmmquq-large.jpg?45575d7
            [waveform_url] => http://w1.sndcdn.com/5HwZSU9IA03i_m.png
            [stream_url] => http://api.soundcloud.com/tracks/56192626/stream
            [download_url] => http://api.soundcloud.com/tracks/56192626/download
            [playback_count] => 3567
            [download_count] => 891
            [favoritings_count] => 66
            [comment_count] => 20
            [attachments_uri] => http://api.soundcloud.com/tracks/56192626/attachments
        )

    [4] => Array
        (
            [kind] => track
            [id] => 55370840
            [created_at] => 2012/08/06 13:43:46 +0000
            [user_id] => 7160186
            [duration] => 352943
            [commentable] => 1
            [state] => finished
            [original_content_size] => 14112438
            [sharing] => public
            [tag_list] => mass progressive house 2012 mashup timbaland basto bootleg remix keri hilson thewayiare
            [permalink] => the-way-i-are-mass-mashup
            [streamable] => 1
            [embeddable_by] => all
            [downloadable] => 1
            [purchase_url] => 
            [label_id] => 
            [purchase_title] => 
            [genre] => Progressive House
            [title] => Timbaland ft. Keri Hilson vs Kylie Minogue - Put Your Hands Up, The Way i are (Mass Mashup)
            [description] => Tracks:
Kylie Minogue - Put Your Hands Up (If You Feel Love) (Basto's Major Mayhem US Instrumental)
Timberland Featuring Keri Hilson - The Way I Are
            [label_name] => 
            [release] => 
            [track_type] => 
            [key_signature] => 
            [isrc] => 
            [video_url] => 
            [bpm] => 
            [release_year] => 
            [release_month] => 
            [release_day] => 
            [original_format] => mp3
            [license] => all-rights-reserved
            [uri] => http://api.soundcloud.com/tracks/55370840
            [user] => Array
                (
                    [id] => 7160186
                    [kind] => user
                    [permalink] => mass-official
                    [username] => mass official
                    [uri] => http://api.soundcloud.com/users/7160186
                    [permalink_url] => http://soundcloud.com/mass-official
                    [avatar_url] => http://i1.sndcdn.com/avatars-000029524162-jdiyn4-large.jpg?45575d7
                )

            [permalink_url] => http://soundcloud.com/mass-official/the-way-i-are-mass-mashup
            [artwork_url] => http://i1.sndcdn.com/artworks-000027981094-tnahdz-large.jpg?45575d7
            [waveform_url] => http://w1.sndcdn.com/A2SE6kUb06MP_m.png
            [stream_url] => http://api.soundcloud.com/tracks/55370840/stream
            [download_url] => http://api.soundcloud.com/tracks/55370840/download
            [playback_count] => 2270
            [download_count] => 621
            [favoritings_count] => 28
            [comment_count] => 17
            [attachments_uri] => http://api.soundcloud.com/tracks/55370840/attachments
        )

    [5] => Array
        (
            [kind] => track
            [id] => 49905943
            [created_at] => 2012/06/16 19:31:15 +0000
            [user_id] => 7160186
            [duration] => 403588
            [commentable] => 1
            [state] => finished
            [original_content_size] => 16137458
            [sharing] => public
            [tag_list] => "eric prydz" "dirty south" "those usual suspects" erikhecht "walking alone" 2night 2012 mass mashup "progressive house"
            [permalink] => walking-alone-2night-mass-1
            [streamable] => 1
            [embeddable_by] => all
            [downloadable] => 1
            [purchase_url] => 
            [label_id] => 
            [purchase_title] => 
            [genre] => Progressive House
            [title] => Eric Prydz, Dirty South & Those Usual Suspects Ft. Erik Hecht - Walking Alone 2NIGHT (Mass Mashup)
            [description] => 
            [label_name] => 
            [release] => 
            [track_type] => 
            [key_signature] => 
            [isrc] => 
            [video_url] => 
            [bpm] => 
            [release_year] => 
            [release_month] => 
            [release_day] => 
            [original_format] => mp3
            [license] => all-rights-reserved
            [uri] => http://api.soundcloud.com/tracks/49905943
            [user] => Array
                (
                    [id] => 7160186
                    [kind] => user
                    [permalink] => mass-official
                    [username] => mass official
                    [uri] => http://api.soundcloud.com/users/7160186
                    [permalink_url] => http://soundcloud.com/mass-official
                    [avatar_url] => http://i1.sndcdn.com/avatars-000029524162-jdiyn4-large.jpg?45575d7
                )

            [permalink_url] => http://soundcloud.com/mass-official/walking-alone-2night-mass-1
            [artwork_url] => http://i1.sndcdn.com/artworks-000025156708-j3k92q-large.jpg?45575d7
            [waveform_url] => http://w1.sndcdn.com/LtSQavuMGFiI_m.png
            [stream_url] => http://api.soundcloud.com/tracks/49905943/stream
            [download_url] => http://api.soundcloud.com/tracks/49905943/download
            [playback_count] => 4982
            [download_count] => 911
            [favoritings_count] => 64
            [comment_count] => 53
            [attachments_uri] => http://api.soundcloud.com/tracks/49905943/attachments
        )

    [11] => Array
        (
            [kind] => track
            [id] => 32861896
            [created_at] => 2012/01/09 14:05:01 +0000
            [user_id] => 7160186
            [duration] => 379886
            [commentable] => 1
            [state] => finished
            [original_content_size] => 15189753
            [sharing] => public
            [tag_list] => prty a lmfao partyrock partyrockanm 2012 mass mashup rayfoxx the thetrumpeter house latin electronic
            [permalink] => lmfao-ray-foxx-party-rock
            [streamable] => 1
            [embeddable_by] => all
            [downloadable] => 1
            [purchase_url] => 
            [label_id] => 
            [purchase_title] => 
            [genre] => Mashup/Bootleg
            [title] => LMFAO-Ray Foxx -  Party Rock Trumpeter (Mass Mashup)
            [description] => 
            [label_name] => 
            [release] => 
            [track_type] => 
            [key_signature] => 
            [isrc] => 
            [video_url] => 
            [bpm] => 
            [release_year] => 
            [release_month] => 
            [release_day] => 
            [original_format] => mp3
            [license] => all-rights-reserved
            [uri] => http://api.soundcloud.com/tracks/32861896
            [user] => Array
                (
                    [id] => 7160186
                    [kind] => user
                    [permalink] => mass-official
                    [username] => mass official
                    [uri] => http://api.soundcloud.com/users/7160186
                    [permalink_url] => http://soundcloud.com/mass-official
                    [avatar_url] => http://i1.sndcdn.com/avatars-000029524162-jdiyn4-large.jpg?45575d7
                )

            [permalink_url] => http://soundcloud.com/mass-official/lmfao-ray-foxx-party-rock
            [artwork_url] => http://i1.sndcdn.com/artworks-000017156126-hlomgx-large.jpg?45575d7
            [waveform_url] => http://w1.sndcdn.com/nVXX8DZRwfBF_m.png
            [stream_url] => http://api.soundcloud.com/tracks/32861896/stream
            [download_url] => http://api.soundcloud.com/tracks/32861896/download
            [playback_count] => 2060
            [download_count] => 463
            [favoritings_count] => 24
            [comment_count] => 12
            [attachments_uri] => http://api.soundcloud.com/tracks/32861896/attachments
        )

) 
```

**这是我用来获取数组的代码 - 使用 WordPress**

```
<?php
/* Now get the tracks information */
$json = wp_remote_get("http://api.soundcloud.com/users/USERID/tracks.json?client_id=CLIENT_ID");

$soundcloudData = json_decode($json['body'], true);

print "<pre>";
print_r($soundcloudData);
print "</pre>";
?> 
```

**解决方案**

我想我得到了它的工作。我不得不稍微更改代码。

```
$json = wp_remote_get("http://api.soundcloud.com/users/7160186/tracks.json?client_id={MY_CLIENT_ID}");
$soundcloudData = json_decode($json['body'], true);

$totalPlays = 0;

foreach ($soundcloudData as $track) {
    $totalPlays += $track['playback_count'];
}
print_r($totalPlays); 
```

这返回了数字**117427**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:17:20.177

以下应该有效：

```
<?php
$json = wp_remote_get("http://api.soundcloud.com/users/2/tracks.json?client_id=YOUR_CLIENT_ID");
$soundcloudData = json_decode($json);
$totalPlays = 0;

foreach ($soundcloudData as $track) {
    $totalPlays += $track->playback_count;
}

print_r($totalPlays);
?> 
```

# html - 网站不适合所有屏幕分辨率

> ID：15375347
> 
> 赞同：0
> 
> 时间：2013-03-13T01:19:49.483
> 
> 标签：html, css, web

我的网站——因为我的屏幕尺寸很小——非常适合。

发送给我的电子邮件表明我的网站看起来完全关闭，在某些情况下难以导航。

www.rawpaste.com

正如你在这张图片上看到的：http: [//i.imgur.com/pQuqb6I.png](http://i.imgur.com/pQuqb6I.png)

如何使网站适合所有屏幕尺寸？

这是 CSS： [http ://rawpaste.com/themes/default/style/root.css](http://rawpaste.com/themes/default/style/root.css)

```
/* ================= Body Styles ================= */
body{
    background:#F4F4F4;
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
    color:#737F89;}

a{color:#367DB3;}
a:hover{ color:#333;}

/* ================= General ================= */
.wrapper{
    width:980px;
    margin:0px auto;
    padding:50px 0px;}

#main{
    padding-bottom:20px;
    background:#fff url(../img/main-bg.png) repeat-y;
    border-bottom:1px solid #D6D8D8;
    border-bottom-right-radius: 4px;
    border-bottom-left-radius: 4px;
    box-shadow:0px 1px 0px #DFDFDF;}

#sidebar{
    width:188px;
    float:left;
    padding-left:1px;
    padding-right:1px;}

#page{
    width:789px;
    float:right;
    padding-right:1px;
    position:relative;}

.center980{
    margin:0px auto;
    width:980px;}

.content{padding:20px 24px;  line-height:17px;  }

/* ================= Header ================= */
#header{
    height:73px;
    background:url(../img/header-bg.png) no-repeat;}

#header .logo{
    width:190px;
    float:left;
    text-align:center;
    padding:20px 0 0 0;}
#header .logo img:hover{ opacity:0.9;}

#notifications{
    width:430px;
    float:left;
    padding-left:16px;
    padding-top:18px;}
#quickmenu{
    width:150px;
    float:left;
    padding-top:18px;}

.qbutton-left{
    display:block;
    width:42px;
    height:25px;
    float:left;
    background:url(../img/qbutton.png) no-repeat 0px 0px;
    text-align:center;
    position:relative;
    padding-top:11px;}
.qbutton-left:hover{background:url(../img/qbutton.png) no-repeat 0px -36px;}

.qbutton-normal{
    display:block;
    width:42px;
    height:25px;
    float:left;
    background:url(../img/qbutton.png) no-repeat -42px 0px;
    text-align:center;
    position:relative;
    padding-top:11px;}
.qbutton-normal:hover{background:url(../img/qbutton.png) no-repeat -42px -36px;}

.qbutton-right{
    display:block;
    width:43px;
    height:25px;
    float:left;
    background:url(../img/qbutton.png) no-repeat -84px 0px;
    text-align:center;
    position:relative;
    padding-top:11px;}
.qbutton-right:hover{background:url(../img/qbutton.png) no-repeat -84px -36px;}

.qballon{
    background:url(../img/qballon.png) no-repeat;
    width:19px;
    height:21px;
    display:block;
    text-align:center;
    color:#FDEDEC;
    font-size:10px;
    position:absolute;
    top:-12px;
    padding-top:4px;
    right:2px;}

/* ================= Profilebox ================= */
#profilebox{
    width:146px;
    height:46px;
    background:url(../img/profileboxbg.png) no-repeat;
    float:right;
    margin:14px 14px 0 0;
    position:relative;}
#profilebox .display{
    display:block;
    padding:5px 6px;
    font-size:11px;
    color:#A5C6EC;
    line-height:15px;}
#profilebox .display:hover{
    text-decoration:none;}
#profilebox .display img{
    border:0px solid #1D4E76;
    float:left;
    margin-right:7px;}
#profilebox .display b{
    display:block;
    color:#fff;}
#profilebox .display span{
    background:url(../img/arrow-down.png) no-repeat right;
    padding-right:11px;}

#profilebox .display:hover, #profilebox:hover{
    background:url(../img/profileboxbg-hover.png) no-repeat;}

#profilebox:hover .profilemenu, .profilemenu:hover{ display:block;}
.profilemenu{
    display:none;
    background:#3C81B5;
    border:1px solid #1C4D78;
    border-top:none;
    padding-top:3px;
    margin-top:-3px;
    position:relative;
    z-index:1000;
    border-bottom-right-radius: 4px;
    border-bottom-left-radius: 4px;}
.profilemenu a{
    display:block;
    font-size:11px;
    color:#A5C6EC;
    padding:10px 7px;}
.profilemenu a:hover{
    text-decoration:none;
    color:#fff;
    background:#306997;}

/* ================= Searchbox ================= */
#searchbox{
    display:block;
    background:url(../img/searchbox-bg.png) repeat-x bottom;
    height:65px;}
#searchbox .in{
    padding:15px 0 0 9px;}
#searchbox .input{
    background:url(../img/searchbox.png) no-repeat;
    width:131px;
    border:none;
    font:13px Arial, Helvetica, sans-serif;
    color:#999;
    padding:11px;
    padding-left:30px;}
#searchbox .input-hover{
    background:url(../img/searchbox-hover.png) no-repeat;
    width:131px;
    border:none;
    font:13px Arial, Helvetica, sans-serif;
    color:#666;
    padding:11px;
    padding-left:30px;}
/* ================= Sidemenu ================= */  
#sidemenu{ padding:10px 0px;}
#sidemenu ul{
    font-size:12px;
    line-height:20px;}
#sidemenu li{
    position:relative;}
#sidemenu a{
    display:block;
    color:#596677;
    padding:9px 26px 9px 15px;
    border-top:1px solid #F6F7F9;
    border-bottom:1px solid #F6F7F9;}
#sidemenu a img{
    margin-bottom:-4px;
    margin-right:9px;}
#sidemenu a:hover{
    text-decoration:none;
    background:#EDF1F5;
    color:#3F4C59;
    border-top:1px solid #DCE7F0;
    border-bottom:1px solid #DCE7F0;}
#sidemenu .ballon{
    background:#94B5CF;
    margin-left:6px;
    border-radius:19px;
    font-size:10px;
    font-weight:bold;
    line-height:normal;
    color:#fff;
    position:absolute;
    border:1px solid #739BBF;
    box-shadow:0px 1px 0px #fff;
    right:9px;
    top:11px;
    padding:1px 5px;}
#sidemenu li a:hover .ballon{
    background:#799FC1;
    color:#fff;
    border:1px solid #5384B0;}
#sidemenu .active a{
    background:#fff;
    border-top:1px solid #DFDFDF;
    margin-right:-1px;
    position:relative;
    border-bottom:1px solid #DFDFDF;
    color:#2C71A5;}
#sidemenu .active a .ballon{
    top:10px;
    right:10px;}

/* Submenu */
.submenu{
    padding:0px;
    border-bottom:1px solid #D6D6D6;
    padding-bottom:6px;
    display:none;}
#sidemenu .submenu a{
    padding:5px 12px 5px 40px;
    font-size:11px;}
#sidemenu .submenu img{
    margin-right:8px;}
#sidemenu .submenu .ballon{
    top:7px;}
.submenu .action{
    position:relative;}
.subtitle .action .arrow{
    position:absolute;
    right:10px;
    top:18px;}

/* ================= Stats ================= */
#stats{
    display:none;
    height:65px;
    padding-left:20px;
    background:#FFFADF url(../img/stats-bg.png) repeat-x bottom;}
#stats .column{
    width:150px;
    text-align:center;
    float:left;
    color:#9B936A;
    font-size:11px;
    margin-top:9px;
    padding:2px 0px;
    border-right:1px solid #F0E5BC;}
#stats .column b{
    font-size:22px;
    display:block;
    color:#474643;
    letter-spacing:-0.1px;
    padding-bottom:5px;}
#stats .last{
    border-right:none;}
#stats .column .up{ color:#488D46;}
#stats .column .down{ color:#D73535;}
#stats .close{
    background:url(../img/icons/mini/close-stats.png) no-repeat center;
    width:35px;
    height:35px;
    display:block;
    text-indent:-9999px;
    position:absolute;
    right:0px;
    top:0px;}
#stats .close:hover{
    background:url(../img/icons/mini/close-stats-hover.png) no-repeat center;}
#stats .arrow{
    position:absolute;
    right:186px;
    top:-9px;}

/* ================= Page Title ================= */
.page-title{
    background:url(../img/page-title-minidot.png) repeat-x bottom;
    border-bottom:1px solid #D1D3D3;
    height:63px;}
.page-title .in{
    padding:0px 24px;}
.page-title .titlebar{
    color:#83929F;
    font-size:11px;
    width:480px;
    float:left;
    padding-top:14px;}
.page-title .titlebar h2{
    color:#364656;
    font-size:16px;
    height:24px;}
.page-title .shortcuts-icons{
    width:250px;
    float:right;
    padding-top:19px;}

/* ================= Shortcut ================= */
.shortcut{
    background:url(../img/shortcut-normal.png) no-repeat top left;
    width:25px;
    display:block;
    height:26px;
    float:left;
    margin-left:5px;}
.shortcut:hover{
    background:url(../img/shortcut-hover.png) no-repeat top left;}
.shortcuts-icons a{
    float:right;}

/* ================= Simple Tip ================= */
.simple-tips{
    background:#FFFFCA url(../img/simple-tips-bg.png) repeat-x top;
    border:1px solid #E0DBC2;
    border-radius:3px;
    padding:12px 17px;
    color:#A79955;
    font-size:11px;
    line-height:20px;
    margin:0 0 20px 0;
    position:relative;
    box-shadow:0px 1px 1px #F0F0F0;}
.simple-tips h2{
    display:block;
    color:#6D612E;
    font-size:12px;}
.simple-tips .close{
    background:url(../img/icons/mini/close-stats.png) no-repeat center;
    width:35px;
    height:35px;
    display:block;
    text-indent:-9999px;
    position:absolute;
    right:0px;
    top:0px;}

/* ================= Dashbutton ================= */
.dashbutton-div{
    padding:12px 0px;}
.dashbutton{
    display:block;
    text-align:center;
    width:147px;
    float:left;
    margin-left:-1px;
    margin-bottom:-1px;
    border-radius:1px;
    height:99px;
    font-size:11px;
    color:#7BA5C5;
    padding-top:26px;
    border:1px solid #DCE7F0;
    overflow:hidden;
    background:url(../img/dashbutton-normal.png) repeat-x bottom;}
.dashbutton img{
    margin-bottom:19px;}
.dashbutton b{
    color:#698296;
    display:block;
    font-size:12px;}
.dashbutton:hover{
    background:url(../img/dashbutton-hover.png) repeat-x bottom;
    color:#6798BC;
    border:1px solid #CCDCEA;
    position:relative;}
.dashbutton:hover b{
    color:#4B5F6D;}
.dashbutton:active{
    background:url(../img/dashbutton-active.png) repeat-x top;}

/* ================= Simple Box ================= */
.simplebox{}
.simplebox .titleh{
    border:1px solid #CBDAE8;
    background:url(../img/simplebox-title-bg.png) repeat-x bottom;
    height:40px;
    border-top-right-radius: 3px;
    border-top-left-radius: 3px;
    position:relative;}
.simplebox .padding-in{
    padding:10px;
    line-height:18px;}
.simplebox .titleh h3{
    font-size:12px;
    color:#225983;
    padding:13px 0 0 15px;}
.simplebox .shortcuts-icons{
    position:absolute;
    display:block;
    text-align:right;
    right:10px;
    top:8px;}
.simplebox .shortcuts-icons a{
    opacity:0.8;}
.simplebox .body{
    border:1px solid #CBDAE8;
    border-top:none;
    color:#748897;
    box-shadow:0px 1px 0px #eee;
    background:#fff url(../img/simplebox-dot.png) repeat-x top;}
.simplebox .button-box{
    border-top:1px solid #E6EDF4;
    background:#FDFDFD url(../img/simplebox-dot.png) repeat-x top;
    padding:15px 180px;}

/* ================= Simple Title ================= */
.simpletitle{
    font-size:14px;
    color:#215983;
    padding:15px 0px;
    border-bottom:1px solid #CBDAE8;
    position:relative;}
.simpletitle .shortcuts-icons{
    position:absolute;
    display:block;
    text-align:right;
    right:10px;
    top:10px;}

/* ================= Gallery ================= */
.get-photo{
    margin:16px 10px 0 0;
    float:left;
    width:175px;
    font-size:11px;
    font-weight:bold;
    color:#7A899C;
    position:relative;
    height:140px;}
.get-photo img{
    border-radius:1px;}
.get-photo:hover .buttons{
    display:block;}
.get-photo:hover p{color:#53606F;}
.get-photo p{
    padding-top:10px;}
.get-photo .buttons{
    display:none;
    position:absolute;
    top:0;
    right:0;
    padding:5px 4px;}
.mini-delete{
    display:block;
    width:19px;
    height:19px;
    text-indent:-9999px;
    float:right;
    margin-left:3px;
    background:url(../img/icons/mini/gallery-icon.png) no-repeat 0px 0px;}
.mini-delete:hover{
    background:url(../img/icons/mini/gallery-icon.png) no-repeat 0px -40px;}
.mini-edit{
    display:block;
    width:19px;
    height:19px;
    text-indent:-9999px;
    float:right;
    margin-left:3px;
    background:url(../img/icons/mini/gallery-icon.png) no-repeat 0px -20px;}
.mini-edit:hover{
    background:url(../img/icons/mini/gallery-icon.png) no-repeat 0px -60px;}

/* ================= Error Pages ================= */
.error-page{text-align:center;margin:10px 0;}
.error-page h2{
    font-size:21px;
    line-height:28px;
    padding:14px 0px;}
.error-page .red{ color:#E76463;}
.error-page .blue{ color:#76A6D3;}
.error-page .green{ color:#99C584;}
.error-page p{
    font-size:12px;
    color:#858585;
    line-height:22px;
    padding:24px 0px;
    border-top:1px solid #EDEDED;
    border-bottom:1px solid #EDEDED;}
.error-page .button{
    font-size:14px;
    color:#808080;
    font-weight:bold;
    padding:8px 14px;
    border-radius:3px;
    border:1px solid #C5C5C5;
    border-bottom:1px solid #9D9D9D;
    background:#fff url(../img/error-page-buttonbg.png) repeat-x bottom;}
.error-page .button:hover{
    color:#333;
    box-shadow: 0px 0px 1px #c6c6c6;
    border:1px solid #BCBCBC;
    border-bottom:1px solid #999;}

/* ================= Form Elements ================= */
input, select, textarea{
    background:#fff;
    border:1px solid #D2D4D4;
    border-top:1px solid #A5A6A6;
    border-radius:2px;
    color:#333;
    font:12px Arial, Helvetica, sans-serif;
    padding:7px 6px;}

.st-form-line{
    display:block;
    border-bottom:1px solid #E5E5E5;
    padding:16px 20px;}
.st-labeltext{
    display:block;
    color:#3C5868;
    float:left;
    width:150px;
    line-height:20px;
    font-size:12px;
    padding-top:3px;
    padding-right:10px;}
.st-forminput{
    background:#fff url(../img/st-forminput-bg.png) repeat-x top;
    border:1px solid #D2D4D4;
    border-top:1px solid #A5A6A6;
    border-radius:2px;
    color:#A5A5A5;
    font:12px Arial, Helvetica, sans-serif;
    padding:7px 6px;}
.st-disable{
    background:#fafafa;}
.st-forminput-active{
    background:#fff url(../img/st-forminput-bg.png) repeat-x top;
    border:1px solid #B5B7B7;
    border-top:1px solid #8E8F8F;
    border-radius:2px;
    color:#666666;
    font:12px Arial, Helvetica, sans-serif;
    padding:7px 6px;
    width:auto;}

.datepicker-input{
    background:#fff url(../img/datepicker-bg.png) repeat-x top right;
    border-radius:2px;
    color:#666;
    padding:7px 6px;
    border:1px solid #D2D4D4;
    border-top:1px solid #A5A6A6;
    font:12px Arial, Helvetica, sans-serif;}

.st-button{
    background:url(../img/default-button.png) repeat-x top;
    font:bold 12px Arial, Helvetica, sans-serif;
    color:#fff;
    border:1px solid #1A527D;
    border-bottom:1px solid #0F3049;
    border-radius:2px;
    padding:6px 10px;
    margin-right:10px;
    text-shadow: 0px -1px #174B73;}

.st-button:hover{
    border:1px solid #133E5C;
    border-bottom:1px solid #0B2436;}

.st-button:active{box-shadow: inset 0 0 0.5em #174B73;}

.st-clear{
    background:#fff url(../img/error-page-buttonbg.png) repeat-x bottom;
    font:bold 12px Arial, Helvetica, sans-serif;
    color:#818181;
    border:1px solid #C5C5C5;
    border-bottom:1px solid #969696;
    border-radius:2px;
    padding:6px 10px;
    margin-right:10px;}

.st-clear:hover{
    border:1px solid #B1B1B1;
    border-bottom:1px solid #878787;}

.st-clear:active{box-shadow: inset 0 0 0.5em #ccc;}

.st-success-input{
    background:#EAF2EC url(../img/st-forminput-bg.png) repeat-x top;
    border:1px solid #A9CFB0;
    border-top:1px solid #85A38B;
    border-radius:2px;
    color:#55A163;
    font:12px Arial, Helvetica, sans-serif;
    padding:8px 6px;}
.st-form-success{
    color:#437E4C;
    font-size:12px;
    margin-left:10px;}

.st-error-input{
    background:#FBF4F5 url(../img/st-forminput-bg.png) repeat-x top;
    border:1px solid #E2B5BE;
    border-top:1px solid #B28F96;
    border-radius:2px;
    color:#99626B;
    font:12px Arial, Helvetica, sans-serif;
    padding:8px 6px;}
.st-form-error{
    color:#99616B;
    font-size:12px;
    margin-left:10px;}

/* ================= Chart ================= */
.chart{
    background:#EAF0F6;
    padding-bottom:14px;}

/* ================= Tiny Title ================= */
.st-tinytitle{
    padding:7px 0 13px 0;
    border-bottom:1px solid #EBF1F6;
    margin-bottom:20px;}
.st-tinytitle h3{
    color:#727F88;
    padding-bottom:5px;
    font-size:14px;}
.st-tinytitle p{
    color:#87929A;
    font-size:11px;
    line-height:15px;}

/* ================= Alert Boxes ================= */
.albox{
    font-size:12px;
    line-height:17px;
    box-shadow:0px 1px 0px #F7F7F7;
    position:relative;
    margin:15px 0px;
    padding:14px 42px;
    border-radius:3px;}
.albox .close{
    display:block;
    position:absolute;
    width:30px;
    height:30px;
    text-indent:-9999px;
    right:0;
    top:0;
    background:url(../img/icons/mini/close-opacity-21.png) no-repeat center;}
.albox .close:hover{
    background:url(../img/icons/mini/close-opacity-42.png) no-repeat center;}
.albox .icon{
    position:absolute;
    left:14px;
    top:14px;}
.warningbox{
    background:#FFF8D8 url(../img/icons/error/error.png) no-repeat 14px 14px;
    border:1px solid #F3D97E;
    color:#A68510;}
.succesbox{
    background:#EBF9E2 url(../img/icons/error/accept.png) no-repeat 14px 14px;
    border:1px solid #BEE4A5;
    color:#658C2C;}
.informationbox{
    background:#E9F3F8 url(../img/icons/error/help.png) no-repeat 14px 14px;
    border:1px solid #BBD7E4;
    color:#3876C6;}
.errorbox{
    background:#F8E9E9 url(../img/icons/error/cross.png) no-repeat 14px 14px;
    border:1px solid #E4BBBC;
    color:#BF2C11;}

/* ================= Dialog Boxes ================= */
.dialogbox{
    background:#F8F8F8;
    border:1px solid #DEDEDE;
    color:#666;}

/* ================= Icon Buttons ================= */
.icon-button{
    border-radius:4px;
    margin:2px;
    padding:8px 10px;
    border:1px solid #CDDCEA;
    border-bottom:1px solid #B8C6D2;
    background:#fff url(../img/iconbutton-bg.png) repeat-x bottom;}
.icon-button:hover{
    border:1px solid #AFC8DD;
    border-bottom:1px solid #96ABBC;}
.icon-button img{
    margin-bottom:-5px;}
.icon-button:active{
    background:#fff url(../img/icon-button-bg-active.png) repeat-x top;}
.icon-button span{
    padding-left:8px;
    color:#2E71A5;}
.icon-button a:hover span{
    color:#2E71A5;}

/* ================= Button Styles ================= */
.button-blue{
    background:#4088BF url(../img/button-blue.png) repeat-x bottom;
    font:bold 12px Arial, Helvetica, sans-serif;
    color:#fff;
    border:1px solid #1A527D;
    border-bottom:1px solid #0F3049;
    border-radius:2px;
    padding:7px 10px;
    margin:0px 3px;
    text-shadow: 0px -1px #174B73;}
.button-blue:hover{
    border:1px solid #0F3049;
    border-bottom:1px solid #0F3049; opacity:0.95;}
.button-blue:active{box-shadow: inset 0 0 0.5em #174B73;}

.button-aqua{
    background:#519EAC url(../img/button-aqua.png) repeat-x bottom;
    font:bold 12px Arial, Helvetica, sans-serif;
    color:#fff;
    border:1px solid #27676E;
    border-bottom:1px solid #173C40;
    border-radius:2px;
    padding:7px 10px;
    margin:0px 3px;
    text-shadow: 0px -1px #27676E;}
.button-aqua:hover{
    border:1px solid #173C40;
    border-bottom:1px solid #173C40; opacity:0.95;}
.button-aqua:active{box-shadow: inset 0 0 0.5em #174B73;}

.button-green{
    background:#51AC53 url(../img/button-green.png) repeat-x bottom;
    font:bold 12px Arial, Helvetica, sans-serif;
    color:#fff;
    border:1px solid #276E27;
    border-bottom:1px solid #174017;
    border-radius:2px;
    padding:7px 10px;
    margin:0px 3px;
    text-shadow: 0px -1px #276E27;}
.button-green:hover{
    border:1px solid #174017;
    border-bottom:1px solid #174017; opacity:0.95;}
.button-green:active{box-shadow: inset 0 0 0.5em #174017;}

.button-gray{
    background:#fff url(../img/button-gray.png) repeat-x bottom;
    font:bold 12px Arial, Helvetica, sans-serif;
    color:#818181;
    border:1px solid #C5C5C5;
    border-bottom:1px solid #969696;
    border-radius:2px;
    padding:7px 10px;
    margin:0px 3px;
    text-shadow: 0px -1px #fff;}
.button-gray:hover{
    border:1px solid #969696;
    color:#666;
    border-bottom:1px solid #969696; opacity:0.95;}
.button-gray:active{box-shadow: inset 0 0 0.5em #ccc;}

.button-red{
    background:#A2665B url(../img/button-red.png) repeat-x bottom;
    font:bold 12px Arial, Helvetica, sans-serif;
    color:#fff;
    border:1px solid #67352E;
    border-bottom:1px solid #3C1F1B;
    border-radius:2px;
    padding:7px 10px;
    margin:0px 3px;
    text-shadow: 0px -1px #67352E;}
.button-red:hover{
    border:1px solid #3C1F1B;
    color:#666;
    border-bottom:1px solid #3C1F1B; opacity:0.95;}
.button-red:active{box-shadow: inset 0 0 0.5em #3C1F1B;}

.button-blue:hover, .button-aqua:hover, .button-green:hover, .button-red:hover{ color:#fff;}

/* ================= Pagination ================= */

.pagination{
    text-align:center;
    padding:20px 0px;}
.pagination li{
    display:inline;
    text-align:center;
    font-size:12px;
    color:#3E7CAC;
    padding-right:3px;
    font-weight:bold;}
.pagination li a{
    color:#3E7CAC;
    border:1px solid #D6D6D6;
    border-radius:3px;
    background:url(../img/simplebox-title-bg.png) repeat-x bottom;
    padding:8px 12px;
    box-shadow:0px 1px 1px #EDEDED;}
.pagination li a:hover{
    border:1px solid #C5C5C5;
    color:#333;}
.pagination li a:active{
    box-shadow: inset 0 0 0.5em #D6D6D6;}

/* ================= Page Wrap ================= */
.pagewrap{
    background:url(../img/pagewrapbg.png) repeat-x bottom;
    border-top:1px solid #CBDAE8;
    border-bottom:1px solid #CBDAE8;
    font-size:12px;
    color:#859099;
    padding-left:5px;
    height:38px;}
.pagewrap li{
    display:inline;
    background:url(../img/page-wrap-libg.png) no-repeat right;
    line-height:38px;
    padding:12px 20px 12px 8px;}
.pagewrap a{
    color:#859099;}
.pagewrap a:hover{
    color:#344654;}

/* ================= Statistics ================= */
.statistics{ padding:0;}
.statistics li{
    border-bottom:1px solid #E3EBF3;
    padding:12px 14px;
    display:block;
    position:relative;}
.statistics li p{
    display:block;
    position:absolute;
    text-align:right;
    right:14px;
    top:12px;}
.statistics .green{ color:#308359;}
.statistics .blue{ color:#4B789A;}
.statistics .red{ color:#CD6557;}

/* ================= Toggle Message ================= */
.toggle-message{
    background:#F7F9FC url(../img/toogle-message-bg.png) repeat-x top;
    border:1px solid #CBDAE8;
    cursor:pointer;
    border-radius:2px;
    position:relative;
    line-height:21px;}
.toggle-message .title{
    color:#40515E;
    padding:10px 15px;}
.toggle-message:hover{
    border:1px solid #B3C9DD;}
.toggle-message .title:hover{
    color:#344654;}
.toggle-message .hide-message{
    color:#586873;
    padding:15px;
    display:none;
    padding-top:0;}
.toggle-message .d-icon{
    position:absolute;
    right:15px;
    top:19px;}

/* ================= Tabs ================= */
#tabs{border:1px solid #fff;}

/* ================= Sliders ================= */
#slider-range-max, #slider-range, #slider{
    border:1px solid #D2D4D4;
    background:#EBF5FE;
    height:10px;
    border-top:2px solid #A6A7A7;
    border-radius:20px;}

/* ================= Accordion ================= */
#accordion{
    border-radius:0px;}
#accordion h3 a{
    color:#40515E;
    border-radius:0px;
    font:bold 12px Arial, Helvetica, sans-serif;
    background:none;}

/* ================= Imagebox ================= */
.imagebox{
    padding:15px;}
.imagebox img{
    float:left;
    margin:2px;
    border:2px solid #fff;}
.imagebox img:hover{
    border:2px solid #215983;}

/* ================= Loading Box ================= */
.loadingbox{
    text-align:center;
    padding:35px 10px;
    border:1px solid #CBDAE8;
    color:#9BA4AB;
    font-size:11px;
    line-height:19px;}
.loadingbox h3{
    font-size:20px;
    color:#344654;
    padding:20px 0px;}

/* ================= Footer ================= */
#footer{
    color:#B3C6D5;
    font-size:11px;
    line-height:17px;
    padding:20px 0 0 0;}
#footer .left-column{
    float:left;
    width:660px;}
#footer .right-column{
    float:right;
    width:280px;
    text-align:right;}

/* ================= Login Form ================= */
.loginform{
    width:360px;
    margin:0px auto;
    margin-top:50px;
    box-shadow:0px 4px 90px #EEEEEE;
}
.loginform .title{
    background:url(../img/login-title.png) no-repeat;
    text-align:center;
    height:50px;
    padding-top:20px;}
.loginform .body{
    padding:23px 29px 40px 29px;
    background:url(../img/login-form-body-bg.png) repeat-x bottom;}
.login-input-pass{
    border:none;
    font:19px Arial, Helvetica, sans-serif;
    color:#B6C3C9;
    width:250px;
    border:1px solid #CED3D8;
    border-radius:3px;
    border-top:1px solid #A0A4A9;
    padding:10px;
    padding-left:40px;
    margin-bottom:19px;
    background:url(../img/password-input.png) repeat-x top;}
.login-input-pass-active{
    border:none;
    font:19px Arial, Helvetica, sans-serif;
    color:#8A9EA8;
    width:250px;
    border:1px solid #CED3D8;
    border-radius:3px;
    border-top:1px solid #A0A4A9;
    padding:10px;
    padding-left:40px;
    margin-bottom:19px;
    background:url(../img/password-input.png) repeat-x top;}
.login-input-user{
    border:none;
    font:19px Arial, Helvetica, sans-serif;
    color:#B6C3C9;
    width:250px;
    border:1px solid #CED3D8;
    border-radius:3px;
    border-top:1px solid #A0A4A9;
    padding:10px;
    padding-left:40px;
    margin-bottom:19px;
    background:url(../img/username-input.png) repeat-x top;}
.login-input-user-active{
    border:none;
    font:19px Arial, Helvetica, sans-serif;
    color:#8A9EA8;
    width:250px;
    border:1px solid #CED3D8;
    border-radius:3px;
    border-top:1px solid #A0A4A9;
    padding:10px;
    padding-left:40px;
    margin-bottom:19px;
    background:url(../img/username-input.png) repeat-x top;}

.loginform .log-lab{
    color:#A4AAB2;
    font-size:14px;
    font-weight:bold;
    display:block;
    padding-bottom:11px;}
.loginform .button{
    width:300px;
    height:49px;
    font:bold 16px Arial, Helvetica, sans-serif;
    color:#fff;
    background:url(../img/login-button.png) no-repeat 0px 0px;
    border:none;}
.loginform .button:hover{
    background:url(../img/login-button.png) no-repeat 0px -50px;}
.loginform .button:active{
    background:url(../img/login-button.png) no-repeat 0px -100px;}

/* input */
input.post_input,select.post_select {
    font-family:trebuchet MS,Lucida Sans Unicode, Lucida Sans, Sans-Serif;
    background-color:#F9F9F9;
    width:160px;
    border:1px solid #ccc;
    color:#181818;
    font-size:1em;
    padding:5px;
}
input.post_input {
    width:160px;
}
/* Max lenght */
.notification {
    border:3px solid #d55b5b;
    background-color: #ffcdcd;
    padding:5px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:05:33.867

解决方案很棘手，但它完全可行！在以前的工作中，我不得不解决一个类似的问题，我们有一个需要适应所有屏幕分辨率的两列样式布局。

首先（我们稍后会处理宽度），我们想要为两列（“sidebar”和“page”）创建一种“类似表格”的感觉，这意味着如果侧边栏高于页面中的内容， “页面”列的背景应该一直延伸到底部（与侧边栏高度相同），反之亦然。为了做到这一点，我们做了一些div-ception，如下所示：

```
<div id="main">
    <div id="two_columns">
        <div id="sidebar">
            <!-- Content goes here -->
        </div>
        <div id="page">
            <!-- Content goes here -->
        </div>
        <!-- Cross-browser clearing of floats -->
        <div style="clear:both;"></div>
    </div>
</div> 
```

我们在这里要做的是给“main”和“sidebar”一样的背景，给“two_columns”和“page”一样的背景。这样，当“sidebar”或“page”的高度增加时，“main”和“two_columns”都被迫随之增加高度。

其次，我们要确保这可以适合所有屏幕分辨率。幸运的是，这种 div-ception 设置非常适合这种情况。为简单起见，我们假设背景是颜色。

```
#main {
    /*
        No width shall be set!  It will expand to
        fit inside its parent.
    */
    background-color:#e5e5e5;
    border:1px solid #aeaeae; /* I think borders are pretty */
}

#two_column {
    margin-left:190px; /* width is 190px less than parent ("main") */
    background-color:#fff;
}

#sidebar {
    margin-left:-190px;
    float:left;
    width:189px;
    border-right:1px solid #aeaeae; /* Borders are pretty */
}

#page {
    float:right;
    /*
        Fill to width of parent container "two_column" which
        is "main"s width - 190 (and "main" might be the same
        width as the body, if you so choose).
    */
    width:100%;
} 
```

和繁荣！那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:34:33.390

您已经根据固定宽度设计了您的网站 - 快速解决方法是在 body 上设置宽度 -

```
body {
width: 980px;
} 
```

如果您真的希望您的网站在更大（和更小）的屏幕上看起来不错，您应该考虑采用响应式设计解决方案。优秀的框架包括 zurb 基础：[http](http://foundation.zurb.com/) ://foundation.zurb.com/以及 twitter bootstrap：http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:26:58.863

改变这个：

```
#page {
width: 789px;
float: left;
padding-right: 1px;
position: relative;
} 
```

您还应该为小屏幕的主容器设置宽度：

```
#main {
width: 1000px;
} 
```

![在此处输入图像描述](../Images/8779e47ec16995a4e82d132776769cb2.png)

# c# - 如果一个对象的属性比 C# 中的另一个“大”，则禁止编译

> ID：15375348
> 
> 赞同：2
> 
> 时间：2013-03-13T01:19:53.330
> 
> 标签：c#

如果有人使对象的特定属性大于同一对象的另一个属性，我基本上不想允许编译。我可以这样做吗？有一些像：

```
class Class1 {
    public int property1 { set; get; }
    public int property2 { set; get; }

    public void method (Class1 obj) {
        if (obj.property1 < obj.property2) {
            //won't compile!
        }
    }
}

class Class2 {
    static void Main() {
        Class1 obj = new Class1();
        obj.property1 = 10;
        obj.property2 = 11;
        obj.method(obj);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:24:59.833

您要检查的是**运行时**操作，编译器无法完成。

最接近您需要做的事情是使用 C#`sizeof`运算符检查属性的大小（以字节为单位）。

# c++ - Child_info_fork 在 cygwin 上运行代码时出错

> ID：15375349
> 
> 赞同：0
> 
> 时间：2013-03-13T01:19:56.813
> 
> 标签：c++, netbeans, cygwin

我正在使用 NetBeans，我使用 Cygwin 作为编译器，但我经常收到错误，运行如下简单代码：

```
#include <stdio.h>

int main() {
    printf('a');
    return 0;
} 
```

我收到此错误：

```
2 [main] make 8400 child_info_fork::abort: C:\cygwin\bin\cygiconv-2.dll: Loaded to different address: parent(0x610000) != child(0x2F0000)
make: nbproject/Makefile-variables.mk:33: fork: Resource temporarily unavailable
2 [main] make 9712 child_info_fork::abort: C:\cygwin\bin\cygiconv-2.dll: Loaded to different address: parent(0x610000) != child(0x430000)
make: vfork: Resource temporarily unavailable

BUILD FAILED (exit value 2, total time: 139ms) 
```

# sql-server-2008 - 使用查找表中的值重新组装串联列表

> ID：15375351
> 
> 赞同：0
> 
> 时间：2013-03-13T01:20:02.757
> 
> 标签：sql-server-2008

我有 2 张桌子，`T1`并且`T2`. 我想加入这 2 个表并只返回 2 行数据，`Item`用它们的查找值替换其中的整数`T2`。

桌子`T1`

```
Item    Date
------  ---------
1;4;5;  3/13/2013
1;2;3;  3/13/2013 
```

桌子`T2`

```
ID    Desc
----  ------
1     Tree
2     Grass
3     Sand
4     Water
5     Bridge 
```

预期成绩：

```
Item                 Date 
------------------   ---------
Tree;Water;Bridge;   3/13/2013
Tree;Grass;Sand;     3/13/2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:42:52.017

首先，创建一个 Split 函数，它返回一个整数和一个保持顺序的序列号。这是一个例子：

```
ALTER FUNCTION dbo.SplitInts
(
    @List       VARCHAR(MAX),
    @Delimiter  VARCHAR(32)
)
RETURNS TABLE
AS
    RETURN 
    (
      SELECT rn = ROW_NUMBER() OVER (ORDER BY Number), 
      Item = CONVERT(INT, Item)
        FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
          CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
        FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
          FROM sys.all_objects) AS n(Number)
        WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
      ) AS y
    );
GO 
```

然后以下查询执行您所追求的：

```
DECLARE @t1 TABLE
(
 Item VARCHAR(MAX),
 [Date] DATE -- terrible column name!
);

INSERT @t1 VALUES('1;4;5;','20130313'),('1;2;3;','20130313');
-- please use unambiguous date formats!

DECLARE @t2 TABLE
(
 ID INT, -- another bad column name - what kind of ID?
 [Desc] VARCHAR(255)  -- another bad column name, this is a keyword!
);

INSERT @t2 VALUES(1,'Tree'),(2,'Grass'),
(3,'Sand'),(4,'Water'),(5,'Bridge');

;WITH x AS
(
  SELECT t1.Item, Date, t2ID = i.Item, i.rn, n = t2.[Desc] 
  FROM @t1 AS t1 CROSS APPLY dbo.SplitInts(t1.Item, ';') AS i
  INNER JOIN @t2 AS t2 ON i.Item = t2.ID
)
SELECT DISTINCT Item = (
  SELECT n + ';' FROM x AS x2 
  WHERE x.Item = x2.Item
  ORDER BY x2.rn FOR XML PATH, 
  TYPE).value(N'./type()[1]', N'varchar(max)'), [Date]
FROM x; 
```

强烈建议您研究标准化。分号分隔的列表是一种将独立值组合在一起的糟糕方式。

# ios - 基础 URL 设置不正确

> ID：15375353
> 
> 赞同：0
> 
> 时间：2013-03-13T01:20:10.987
> 
> 标签：ios, uiwebview, base-url

在我的应用程序中，我扫描网页，提取某些部分，然后构建一个 HTML 字符串以加载到 web 视图中。因此，我必须为可以点击的链接设置一个基本 URL。我目前使用：

```
[webView loadHTMLString:self.html baseURL:[NSURL URLWithString:@"http://www.ocacademy.org/ocacademy"]]; 
```

问题是后续链接前面只有[http://www.ocacademy.org/而不是子目录 ocacademy。](http://www.ocacademy.org/)关于这里出了什么问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:50:07.097

您需要将 a`/`或更明确地附加`/name_of_html_file.html`到基本 URL。

`ocacademy`在构造相对 URL 时（在这种情况下），基本 URL 中的任何尾随文件名都将被删除。

因此，给定 的基本 URL`http://www.ocacademy.org/ocacademy`和对 的相对引用`image.png`，将`ocacademy`剥离 以提供父目录`http://www.ocacademy.org/`，生成的 URL 将是`http://www.ocacademy.org/image.png`。

如果基本 URL 是`http://www.ocacademy.org/ocacademy/.*`，则`.*`在构造 URL 之前将其剥离，您将得到`http://www.ocacademy.org/ocacademy/image.png`（您想要的）。

# oracle - 使用 VB6 在 oracle DB 中保存值

> ID：15375354
> 
> 赞同：-1
> 
> 时间：2013-03-13T01:20:18.500
> 
> 标签：oracle, vb6, adodb, recordset

我是 VB 的新手，我正在尝试将值/详细信息添加到 oracle DB 中，但我在这里遇到了一些问题。我想存储我已经创建到 oracle DB 的连接的文本框中的信息并存储它们。我希望有人能指导我。谢谢。

```
Private Sub Command1_Click()
    Dim oconn As ADODB.Connection
    Dim rs As ADODB.Recordset
    Dim strSQL As String

    Set oconn = New ADODB.Connection
    Set rs = New ADODB.Recordset

    oconn.Open "DRIVER = ODBC;DSN=sss;UID=sss;PWD=sss;DATABASE=sss"

    strSQL = "INSERT INTO ZZZJUNKPERSON ( ID_NO, NAME, GENDER, ADDRESS, PHONE_NO ) " _
    & "VALUES ( '" & Form2.Text1.Text & "', " _
    & "' " & Form2.Text2.Text & "', " _
    & "' " & Form2.Text3.Text & "', " _
    & "' " & Form2.Text4.Text & "', " _
    & "' " & Form2.Text5.Text & "')"

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:30:14.913

执行 sql 指令，类似于：

```
oconn.Execute strSQL 
```

# web2py - web2py如何在同一目录导入模块？

> ID：15375361
> 
> 赞同：0
> 
> 时间：2013-03-13T01:20:56.093
> 
> 标签：web2py

我`default.py`在控制器中有一个文件名，并且在同一目录中有一个文件`getmsg.py`，但我无法导入`getmsg`. `default.py`为什么不？我将如何导入它？

错误：

```
Traceback (most recent call last):
  File "F:\xampp\htdocs\web2py\gluon\restricted.py", line 212, in restricted
    exec ccode in environment
  File "F:/xampp/htdocs/web2py/applications/tools/controllers/default.py", line 11, in <module>
    import getmsg
  File "F:\xampp\htdocs\web2py\gluon\custom_import.py", line 81, in custom_importer
    raise ImportError, 'Cannot import module %s' % str(e)
ImportError: Cannot import module 'getmsg' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:31:59.530

```
from getmsg import Classname, methodname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:02:18.940

在 web2py 中，控制器不是 Python 模块——你不需要导入它们。您可以将模块放在应用程序的 /modules 文件夹中并从那里导入。

理论上，（假设`__init__.py`/controllers 文件夹中有一个文件）你可以这样做：

```
import applications.myapp.controllers.getmsg 
```

但这不会被视为标准做法。特别是，控制器不打算用作常规 Python 模块。它们在已经定义了大部分 web2py API 的环境中执行，因此如果您将控制器作为模块导入，其代码可能会引用不可用的全局对象，这将产生异常。

# json - 如何从键中获取值：Python中解析的JSON中的值对

> ID：15375365
> 
> 赞同：0
> 
> 时间：2013-03-13T01:21:06.843
> 
> 标签：json, python-2.7

我正在尝试从 JSON 文件中提取数据。这是我的代码。

```
import json
json_file = open('test.json')                                                                                                                          
data = json.load(json_file)
json_file.close() 
```

此时我可以使用打印数据打印文件，并且文件似乎已正确读取。

现在我想从嵌套在字典中的列表中的字典中的键：值对中获取一个值（呸！）。我最初的策略是创建一个字典并将字典嵌套在其中的列表中，然后提取我需要的键：值对。

```
dict = {}
dict = json_file.get('dataObjects', None)
dict[0] 
```

当我尝试查看 dict 的内容时，我发现只有一个元素。整本词典似乎被当作一个列表来阅读。我尝试了几种不同的方法，但最终还是将字典作为列表读取。我很想获取嵌套字典并使用另一个 .get 来获取我需要的值。这是我正在使用的 JSON 示例。具体来说，我试图从 dataObjects 部分中提取标识符和描述值。

```
{
  "identifier": 213726,
  "scientificName": "Carcharodon carcharias (Linnaeus, 1758)",
  "richness_score": 89.6095,
  "synonyms": [

  ],

  "taxonConcepts": [
    {
      "identifier": 20728481,
      "scientificName": "Carcharodon carcharias (Linnaeus, 1758)",
      "nameAccordingTo": "WORMS Species Information (Marine Species)",
      "canonicalForm": "Carcharodon carcharias",
      "sourceIdentfier": "105838"
    },
    {
      "identifier": 24922984,
      "scientificName": "Carcharodon carcharias",
      "nameAccordingTo": "IUCN Red List (Species Assessed for Global Conservation)",
      "canonicalForm": "Carcharodon carcharias",
      "sourceIdentfier": "IUCN-3855"
    },
  ],
  "dataObjects": [
    {
      "identifier": "5e1882d822ec530069d6d29e28944369",
      "dataObjectVersionID": 5671572,
      "dataType": "http://purl.org/dc/dcmitype/Text",
      "dataSubtype": "",
      "vettedStatus": "Trusted",
      "dataRating": 3.0,
      "subject": "http://rs.tdwg.org/ontology/voc/SPMInfoItems#TaxonBiology",
      "mimeType": "text/html",
      "title": "Biology",
      "language": "en",
      "license": "http://creativecommons.org/licenses/by-nc-sa/3.0/",
      "rights": "Copyright Wildscreen 2003-2008",
      "rightsHolder": "Wildscreen",
      "audience": [
        "General public"
      ],
      "source": "http://www.arkive.org/great-white-shark/carcharodon-carcharias/",
      "description": "Despite its worldwide notoriety, very little is known about the natural ecology and behaviour of this predator. These sharks are usually solitary or occur in pairs, although it is apparently a social animal that can also be found in small aggregations of 10 or more, particularly around a carcass (3) (6). Females are ovoviviparous; the pups hatch from eggs retained within their mother's body, and she then gives birth to live young (10). Great white sharks are particularly slow-growing, late maturing and long-lived, with a small litter size and low reproductive capacity (8). Females do not reproduce until they reach about 4.5 to 5 metres in length, and litter sizes range from two to ten pups (8). The length of gestation is not known but estimated at between 12 and 18 months, and it is likely that these sharks only reproduce every two or three years (8) (11). After birth, there is no maternal care, and despite their large size, survival of young is thought to be low (8).&nbsp;Great whites are at the top of the marine food chain, and these sharks are skilled predators. They feed predominately on fish but will also consume turtles, molluscs, and crustaceans, and are active hunters of small cetaceans such as dolphins and porpoises, and of other marine mammals such as seals and sea lions (12). Using their acute senses of smell, sound location and electroreception, weak and injured prey can be detected from a great distance (7). Efficient swimmers, sharks have a quick turn of speed and will attack rapidly before backing off whilst the prey becomes weakened; they are sometimes seen leaping clear of the water (6). Great whites, unlike most other fish, are able to maintain their body temperature higher than that of the surrounding water using a heat exchange system in their blood vessels (11).",
      "agents": [
        {
          "full_name": "ARKive",
          "homepage": "http://www.arkive.org/",
          "role": "provider"
        }
      ],
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:25:34.360

json 无法读取您提供的源代码，其中有两个逗号必须删除（一个在底部的第四行，一个在上面的两行`dataObjects`。只有在此之后，`json`模块才会正确解析：

```
import json

json_file = open('test.json')
data = json.load(json_file)
do = data['dataObjects'][0]
print do['identifier']
print do['description']
json_file.close() 
```

# c++ - 时间：2019-05-10 标签：c++string(int)+string(int)

> ID：15375366
> 
> 赞同：1
> 
> 时间：2013-03-13T01:21:07.950
> 
> 标签：c++, string, add, uint64

我有 2 个字符串，都只包含数字。这些数字大于最大值`uint64_t`。

我怎样才能仍然添加这两个数字，然后将结果转换为字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T01:26:21.863

好吧，您可以使用更大的数据类型（例如处理大整数的库），或者您可以快速敲出自己的数据类型。

我建议如果这是一次性的，你可以像你在学校的头几年学到的那样做长加法。您可以直接对两个字符串进行操作，添加列，执行“进位”，然后构建另一个包含结果的字符串。您可以在不进行任何二进制转换的情况下完成所有这些操作。

这里。只是为了好玩，我为你敲了一个解决方案：

```
string Add( const string& a, const string& b )
{
    // Reserve storage for the result.
    string result;
    result.reserve( 1 + std::max(a.size(), b.size()) );

    // Column positions and carry flag.
    int apos = a.size();
    int bpos = b.size();
    int carry = 0;

    // Add columns
    while( carry > 0 || apos > 0 || bpos > 0 )
    {
        if( apos > 0 ) carry += a[--apos] - '0';
        if( bpos > 0 ) carry += b[--bpos] - '0';
        result.push_back('0' + (carry%10));
        carry /= 10;
    }

    // The result string is backwards.  Reverse and return it.
    reverse( result.begin(), result.end() );
    return result;
} 
```

请注意，为清楚起见，此代码甚至不尝试处理错误。它也不会产生负面影响，但要解决这个问题并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:23:17.770

您需要一个 BigInt 实现。[你可以在这里](http://homepages.ihug.co.nz/~aurora76/Malc/Useful_Classes.htm)找到几个不同的。

无论您选择什么 BigInt 实现，都需要与字符串进行转换（他们通常会这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:00:04.960

如果您只想处理正数而不必担心引入像 GMP 这样的整个 bignum 库（以及它倾向于中止内存不足错误，我认为这在通用库中是不可原谅的），您可以滚动你自己的，比如：

```
static std::string add (const std::string& num1, const std::string& num2) {
    // Make num1 the wider number to simplify further code.

    int digit, idx1 = num1.length() - 1, idx2 = num2.length() - 1;
    if (idx1 < idx2) return add (num2, num1);

    // Initialise loop variables.

    int carry = 0;
    std::string res;  // reserve idx1+2 chars if you want.

    // Add digits from right until thinner number finished.

    while (idx2 >= 0) {
        digit = num1[idx1--] - '0' + num2[idx2--] - '0' + carry;
        carry = (digit > 9);
        res.insert (0, 1, (digit % 10) + '0');
    }

    // Then just process rest of wider number and any leftover carry.

    while (idx1 >= 0) {
        digit = num1[idx1--] - '0' + carry;
        carry = (digit > 9);
        res.insert (0, 1, (digit % 10) + '0');
    }
    if (carry) res.insert (0, 1, '1');

    return res;
} 
```

您可以添加效率，例如提前在目标字符串中保留空间，并设置它的特定索引而不是插入，但是，除非您处理真正*大量的*字符串或每秒执行*多次*，否则我通常更喜欢更容易理解的代码并保持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T02:05:02.017

这是您的问题的代码：

```
#include <iostream>
#include <string>
using namespace std;
string StrAdd(string a, string b) {
  string::reverse_iterator rit_a = a.rbegin();
  string::reverse_iterator rit_b = b.rbegin();
  string c;
  int val_c_adv = 0;
  while(rit_a != a.rend() && rit_b != b.rend() ) {
    int val_a_i = *rit_a - '0';
    int val_b_i = *rit_b - '0';
    int val_c_i = val_a_i + val_b_i + val_c_adv;
    if(val_c_i >= 10 ) {
      val_c_adv = 1;
      val_c_i -= 10;
    } else {
      val_c_adv = 0;
    }
    c.insert(0,1, (char)(val_c_i+'0'));
    ++rit_a;
    ++rit_b;
  }
  if(rit_a == a.rend() ) {
    while( rit_b != b.rend() ) {
      int val_b_i = *rit_b - '0';
      int val_c_i = val_b_i + val_c_adv;
      if(val_c_i >= 10 ) {
        val_c_adv = 1;
        val_c_i -= 10;
      } else {
        val_c_adv = 0;
      }
      c.insert(0, 1, (char)(val_c_i+'0'));
      ++rit_b;
    }
  } else if( rit_b == b.rend() ) {
    while( rit_a != a.rend() ) {
      int val_a_i = *rit_a - '0';
      int val_c_i = val_a_i + val_c_adv;
      if(val_c_i >= 10 ) {
        val_c_adv = 1;
        val_c_i -= 10;
      } else {
        val_c_adv = 0;
      }
      c.insert(0, 1, (char)(val_c_i+'0'));
      ++rit_a;
    }
  }
  return c;
}

int main() {
  string res, a, b;
  cout << "a=" << endl;
  cin >> a;
  cout << "b=" << endl;
  cin >> b;
  res = StrAdd(a, b);
  cout << "Result=" << res << endl;    
} 
```

# python - 在 Python 中进行缓慢的逐字终端打印？

> ID：15375368
> 
> 赞同：3
> 
> 时间：2013-03-13T01:21:15.630
> 
> 标签：python, unix, terminal, printf

我正在编写一个涉及数据库的 Python 应用程序。对于它的地狱，我包括一个复活节彩蛋。如果用户决定核对他的数据库，所有这一切都来自终端，他将被提示用一个简单的 (y/n) 进行确认。但是，如果他改为键入 DLG2209TVX，则会打印出 WarGames 场景中的台词。除非他们查看我的来源，否则怀疑任何人都会找到它，但这没关系。

问题是简单地打印线条太快地播放场景，真的只是毁了它。我在每个角色的台词之间设置了一个计时器来减慢速度，效果更好，但仍然看起来不自然。有没有一种标准化的方法来慢慢打印每个单词或字符，而不是一次打印一行？还是我应该开始在单词之间添加计时器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T01:25:19.650

标准化？从来没听说过。但是试试这个：

```
import random
import sys
import time

def slowprint(s):
    for c in s + '\n':
        sys.stdout.write(c)
        sys.stdout.flush() # defeat buffering
        time.sleep(random.random() * 0.1)

slowprint('Hello, world.') 
```

调整`0.1`以更改字符之间的最大延迟，并在行`time.sleep()`间添加 long s 以增加更戏剧性的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:28:58.900

```
import sys
import time
for c in gettysburg_address:
  sys.stdout.write(c)
  sys.stdout.flush()
  # 110 baud:
  time.sleep( 8./110 )
  # 300 baud:
  #  time.sleep( 8./300 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T01:40:21.580

您也可以尝试[`curses.delay_output()`](http://docs.python.org/2/library/curses.html#curses.delay_output)：

```
In [48]: import curses

In [49]: for x in "foo bar":
    sys.stdout.write(x)     #prints each char with a delay of 100ms
    curses.delay_output(100)
   ....:     
foo bar 
```

# sql - 按条款排序似乎不起作用

> ID：15375374
> 
> 赞同：2
> 
> 时间：2013-03-13T01:21:48.087
> 
> 标签：sql, sql-server, stored-procedures

我有一个使用 TOP 和 Order By 的全文搜索。我在另一个数据库中使用了相同的查询，并且我的顺序始终保持不变。由于某种原因，在不同的数据库上，顺序似乎总是有一点变化。不是很多，只是一点点。这是它的样子

```
SELECT TOP 20 * FROM 
(
SELECT DISTINCT CandidateID, [Resume], FirstName, MiddleName, LastName, 
       ROW_NUMBER() OVER (ORDER BY CreatedDate DESC) AS num

       FROM dbo.tblCandidates  WHERE (CONTAINS(([resume]), @SearchItem))

) AS a 
WHERE num > @start 
```

谁能想到 Order By 子句在这种情况下并不总是有效的原因？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:11:52.620

您没有`ORDER BY`子句（子句中的`OVER()`子句用于确定`ROW_NUMBER()`并且通常不会对输出的顺序产生任何影响）。如果您在其他系统上观察到此查询的特定顺序，则纯属巧合，不应依赖。如果你想要一个特定的顺序，你需要添加`ORDER BY`到外部查询中，不管你认为它应该做什么或者你在其他地方观察到了什么。

```
SELECT TOP 20 * FROM 
(
SELECT DISTINCT CandidateID, [Resume], FirstName, MiddleName, LastName, 
       ROW_NUMBER() OVER (ORDER BY CreatedDate DESC) AS num

       FROM dbo.tblCandidates  WHERE (CONTAINS(([resume]), @SearchItem))

) AS a 
WHERE num > @start
ORDER BY num; 
```

# linux - 为什么我执行另一个脚本的 bash 脚本没有退出？

> ID：15375377
> 
> 赞同：1
> 
> 时间：2013-03-13T01:21:58.323
> 
> 标签：linux, bash, shell

我正在从我的 bash 脚本中调用另一个脚本，就像这样 - 使用 & 符号。

```
OtherScriptThatDoesNotExit &
echo "done" 
```

我看到它正在“完成”，但我仍然看到我的原始脚本正在运行是 ps。知道为什么会这样吗？（注意，我在 Puppy Linux 上运行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T01:23:22.520

该脚本仍在等待您生成的子进程。使用`nohup`,`disown`或`screen`将长时间运行的任务留在后台并返回您的 shell。

# javascript - WinJS.UI.ListView - 使用模板时刷新项目是使用 javascript 构建的

> ID：15375380
> 
> 赞同：0
> 
> 时间：2013-03-13T01:22:37.900
> 
> 标签：javascript, windows-runtime, windows-store-apps, winjs

我有一个使用 HTML 定义的模板的 ListView，如下所示：

```
<div id="mediumListIconTextTemplate" data-win-control="WinJS.Binding.Template">
    <div>

        <!-- Displays the "picture" field. -->
        <img data-win-bind="alt: title; src: picture" />
        <div>

            <!-- Displays the "title" field. -->
            <h4 data-win-bind="innerText: title"></h4>

            <!-- Displays the "text" field. --> 
            <h6 data-win-bind="innerText: description"></h6>
        </div>
    </div>
</div>

<div id="basicListView" data-win-control="WinJS.UI.ListView" 
    data-win-options="{itemDataSource : DataExample.itemList.dataSource, itemTemplate: select('#mediumListIconTextTemplate')}">
</div> 
```

当我的列表项更改时，我的项目模板将更新以反映更改。但是，出于需要，我不得不改为使用 javaScript 函数来构建我的模板。我在示例站点上找到的代码之后对我的代码进行了建模：

```
app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }
        args.setPromise(WinJS.UI.processAll().then(function () {
            var lView = document.getElementById("templateFunctionListView").winControl;
            lView.itemTemplate = itemTemplateFunction;

        }));

    }
};

function itemTemplateFunction(itemPromise) {

   return itemPromise.then(function (item) {
       var div = document.createElement("div");

       var img = document.createElement("img");
       img.src = item.data.picture;
       img.alt = item.data.title;
       div.appendChild(img);

       var childDiv = document.createElement("div");

       var title = document.createElement("h4");
       title.innerText = item.data.title;
       childDiv.appendChild(title);

       var desc = document.createElement("h6");
       desc.innerText = item.data.text;
       childDiv.appendChild(desc);

       div.appendChild(childDiv);

       return div;
   });
}; 
```

更改为 javascript 函数后，我的显示项目在我的绑定数据更改时永远不会更改。

我需要做什么才能使它们更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:06:31.010

I think there are two approaches that could work for you.

In my case, when I refresh the data for my app, it's possible that one or more entities may be completely out of date, and there may be new entities to display. So I simply re-set the binding of the ListView, like so:

```
listView.itemDataSource = Data.items.dataSource; 
```

where Data is the namespace I set up in data.js to contain all my data functions and objects.

When I update the value of the itemDataSource property, the ListView will re-bind to the new data, and display the correct items.

The other thing to look at, if your data is only being updated one property at a time, is using the WinJS.Binding.as function to make the items in the binding list observable, as described here:

[http://msdn.microsoft.com/en-us/library/windows/apps/hh781224.aspx#updating_changing_records](http://msdn.microsoft.com/en-us/library/windows/apps/hh781224.aspx#updating_changing_records)

If you haven't seen it already, there's some good info on databinding here:

[http://msdn.microsoft.com/en-us/library/windows/apps/hh758311.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh758311.aspx)

And I found the following MSDN forum thread that may be helpful:

[http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/21b9603f-e28d-4c93-b164-a2c91ba5c4ca](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/21b9603f-e28d-4c93-b164-a2c91ba5c4ca)

Hope the above helps!

For more information on Windows Store app development, register for [App Builder](http://bit.ly/gd30tolaunch).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T19:45:08.843

您可以只重新绑定单个项目，而不是重新绑定整个数据集。找到列表中的项目位置，然后将其拼接替换为自身。

```
for (var i = 0; i < list.length; i++){
  item = list.getAt(i);
  if (item.key == itemToBeReBound.key){
    list.splice(i, 1, item);
    i = list.length;
  }
} 
```

# linux - 尝试安装 libtmcg 时出错“配置：错误：需要 libgmp >= 4.1”

> ID：15375381
> 
> 赞同：0
> 
> 时间：2013-03-13T01:22:42.877
> 
> 标签：linux, ubuntu

我尝试从 ubuntu 应用程序中心安装不同的 libgmp，并尝试从[http://gmplib.org/#DOWNLOAD](http://gmplib.org/#DOWNLOAD)手动安装它，但我无法将其配置为旧库，我正在尝试运行它ubuntu 的最新版本，但我认为我不会有问题，但我是尝试使用这样的库的新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:33:22.753

我以前在安装依赖项时遇到过这类错误，我意识到你必须强制安装这样的包……你没有提到你的 Ubuntu 的版本，所以我假设你正在工作12.10。但如果不是，您总是可以查找您正在运行的版本。

只需从[这里](https://launchpad.net/ubuntu/quantal/+package/libgmp-dev)下载包，当然，这取决于您的架构，然后运行`sudo apt-get -f install`以强制安装损坏的包。

# ios - 使用推送通知提供程序有什么好处吗？

> ID：15375383
> 
> 赞同：1
> 
> 时间：2013-03-13T01:22:53.047
> 
> 标签：ios, push-notification, apple-push-notifications

我正在构建一个需要使用推送通知的应用程序。目前它只是一个 iPhone 应用程序，我已经实现了推送通知的手动版本。

有很多服务可以为您做这种事情......使用它们有什么好处吗？拥有一个好的 API 并不重要，因为我已经手动实现了推送。

我问的主要原因是我下载了应用程序 Path 并注意到他们的推送通知似乎比我的应用程序更快，更可靠......

顺便说一句，我使用 GAE 作为后端。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:43:46.613

使用推送通知提供程序最明显的好处是不必自己编写代码。编写一个高效可靠的 Apple Push Notifications 提供者并不简单。如果您想要一个快速的解决方案并愿意为此付费，那么使用现有的提供商可能是您的最佳选择。

在我看来，APNS API 很糟糕。您没有收到成功通知的确认这一事实使得编写可靠的提供程序变得困难。如果您想确保不会错过来自 Apple 的错误响应，您必须尝试经常从连接中读取，并且超时时间较长，这将使您的提供商变慢。另一方面，如果您想尽快发送通知，则必须牺牲可靠性（因为您将无法依赖获得 Apple 发送的所有错误响应）。当然，如果您确保您的数据库不包含无效的设备令牌，并且您始终发送有效的有效负载，您可以假设您不会收到来自 Apple 的错误响应，这将允许您快速发送通知。

也就是说，我不确定现有 APN 提供商的可靠性和/或速度有多快。确保您使用的提供程序质量的最佳方法是自己编写（除非您愿意花时间测试现有提供程序的可靠性和速度）。

# django - Django modelformset_factory 什么都不保存

> ID：15375392
> 
> 赞同：0
> 
> 时间：2013-03-13T01:23:32.493
> 
> 标签：django, django-forms

（我是 django 的新手，我用谷歌搜索了很多但找不到答案，所以我希望你不介意这个低级问题）有这些类：

```
class Cl(models.Model):
    user   = models.ForeignKey(User,editable=False)
    title  = models.CharField(max_length=100)

class Member(models.Model):
    name   = models.CharField(max_length=100)
    email  = models.EmailField()
    cl     = models.ForeignKey(Cl)

class ClForm(ModelForm):
    class Meta:
        model = Cl 
```

我想创建一个页面，我可以在其中创建 Cl 对象和一些相关的成员对象（我计划使用 django-dynamic-formset 但这不是重点）。我的观点是这样的：

```
class NewView(TemplateView):
    def get(self, request):
        cform = ClForm(prefix="cl", instance=Cl(user=request.user))
        MemberFormSet = modelformset_factory(Member)
        memberfs = MemberFormSet(queryset=Member.objects.none())
        return render_to_response(self.template_name, {'cl_form': cform, 'memberformset': memberfs}, context_instance=RequestContext(request))

    def post(self,request):
        cform = ClForm(request.POST, prefix="cl", instance=Cl(user=request.user))
        MemberFormSet = modelformset_factory(Member)
        memberfs = MemberFormSet(request.POST)
        if cform.is_valid() and memberfs.is_valid():
            new_cl = cform.save()
            new_members = memberfs.save(commit=False)
            for mf in new_members:
                mf.cl = new_cl
                mf.save()
            return HttpResponseRedirect("unimportant")
        return render_to_response(self.template_name, {'cl_form': cform, 'memberformset': memberfs}, context_instance=RequestContext(request)) 
```

我的模板如下所示：

```
<form id="myForm" method="post" action="">
    {% csrf_token %}
    {{ memberformset.management_form }}
    <table>
        {{ cl_form }}
        <tr><th colspan="2">Members</th></tr>
        {% with memberformset.empty_form as form %}
            <div id="id_empty_form" style="display:none;">
                {{ form }}
            </div>
        {% endwith %}
    </table>
    <input type="submit" value="Save" />
</form> 
```

我现在的问题是，该成员没有被存储。此外，memberfs.is_valid() 不会抱怨，例如，如果电子邮件字段未正确填写。我也尝试了 inlineformset_factory，但这也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:33:38.003

我认为问题在于您在该模板中使用了“ [empty_form ”。](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#empty-form)[此处](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-a-formset-in-views-and-templates)描述了使用表单集的正确方法。在您的示例中，您应该编写：

```
<form id="myForm" method="post" action="">
{% csrf_token %}
{{ memberformset.management_form }}
<table>
{{ cl_form }}
<tr><th colspan="2">Members</th></tr>

<!-- THIS IS NOT NECESSARY UNLESS YOU WANT TO ADD FORMS WITH JAVASCRIPT-->    
<div id="id_empty_form" style="display:none;">
{{ memberformset.empty_form }}
</div>
<!-- END NOT NECESSARY-->

{% for form in memberformset.forms %}
    {{ form }}
{% endfor %}
{% endwith %}
</tbody>
</table>
<input type="submit" value="Save" />
</form> 
```

# php - 为什么 PHP 应用程序会产生间歇性段错误？

> ID：15375395
> 
> 赞同：1
> 
> 时间：2013-03-13T01:23:50.177
> 
> 标签：php, symfony, apache2

我正在对一个 PHP 应用程序（如果重要的话，它是一个 symfony 应用程序）进行一些负载测试，并且日志中充满了这样的错误。我正在努力找出为什么会发生这些段错误。

> [2013 年 3 月 13 日星期三 00:54:47] [通知] 子 pid 18830 退出信号总线错误 (7)，/tmp/apache2-gdb-dump 中可能存在核心转储
> 
> [Wed Mar 13 00:54:55 2013] [notice] child pid 19016 exit signal Bus error (7), /tmp/apache2-gdb-dump 中可能的核心转储
> 
> [2013 年 3 月 13 日星期三 00:54:56] [通知] 子 pid 19002 退出信号总线错误 (7)，/tmp/apache2-gdb-dump 中可能存在核心转储
> 
> [2013 年 3 月 13 日星期三 00:54:58] [通知] 子 pid 19041 退出信号总线错误 (7)，/tmp/apache2-gdb-dump 中可能存在核心转储

当我从核心转储生成回溯时，我得到

> [新 LWP 588] [启用使用 libthread_db 进行线程调试] 使用主机 libthread_db 库
> 
> “/lib/i386-linux-gnu/tls/i686/nosegneg/libthread_db.so.1”。核心是由 `/usr/sbin/apache2 -k start' 生成的。程序以信号 7 终止，总线错误。
> 
> 0 lex_scan (zendlval=0xb6d2ce38) 在/build/buildd/php5-5.4.6/Zend/zend_language_scanner.c:2260
> 
> 线程 1（线程 0xb7485700 (LWP 588)）：
> 
> 0 lex_scan (zendlval=0xb6d2ce38) 在/build/buildd/php5-5.4.6/Zend/zend_language_scanner.c:2260

所以也许这与解析有关？然而，我对 php 内部知识知之甚少，所以不确定。这可能是什么原因造成的？

# java - 是否有 Java 标准库可以直接从 ssh-keygen 生成的密钥文件构造 PrivateKey 和 PublicKey 对象？

> ID：15375401
> 
> 赞同：1
> 
> 时间：2013-03-13T01:24:42.473
> 
> 标签：java

我想使用 id_rsa 和 id_rsa.pub 为 Java 应用程序创建一个质询-响应登录系统。为了这个目的，我希望能够从 id_rsa 和 id_rsa.pub`PublicKey`构建。`PrivateKey`

直接的方法是以我通常解析文本文件的方式来解析这些，然后手动构造适当的 java.security 数据结构以在客户端和服务器中进行签名和验证。

是否有标准库快捷方式可以直接摄取这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T22:11:06.323

是的，我刚刚写了：[openssh-java](https://github.com/fommil/openssh-java)。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T14:33:11.247

我知道的最接近和最简单的方法是使用[The Legion of the Bouncy Castle](http://www.bouncycastle.org/java.html) Java API 和这样的东西 -

```
// Just for the public / private key files...
private static String readFileAsString(
    String filePath) throws java.io.IOException {

  StringBuilder sb = new StringBuilder(100);
  BufferedReader reader = null;
  try {
    reader = new BufferedReader(new FileReader(
        filePath));
    int fileIn;
    while ((fileIn = reader.read()) != -1) {
      sb.append((char) fileIn);
    }
  } finally {
    reader.close();
  }
  return sb.toString();
}

// Add the SecurityProvider and a Base64 Decoder (Once)
Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());
BASE64Decoder b64 = new BASE64Decoder();

// For the publicKey
String publicKeyString = readFileAsString(publicKeyFileName);
AsymmetricKeyParameter publicKey =
  (AsymmetricKeyParameter) PublicKeyFactory.createKey(b64.decodeBuffer(publicKeyString));

// For the privateKey
String privateKeyString = readFileAsString(privateKeyFilename);
AsymmetricKeyParameter privateKey =
  (AsymmetricKeyParameter) PrivateKeyFactory.createKey(b64.decodeBuffer(privateKeyString)); 
```

# html - ID：何时使用增量值以及何时使用生成的字符串

> ID：15375407
> 
> 赞同：2
> 
> 时间：2013-03-13T01:25:18.957
> 
> 标签：html, sql, database

在数据库中，我们有表，例如，`Users`表，`Posts`表，等等......

```
user_id             username
----------------------------
1                    ToTo
2                    TaTa
3                    TiTi 
```

访问用户页面，通常只需要更改 URL 中的参数。

```
/User.php?id=2
/User.aspx?id=3
/User.jsp?id=4 
```

在某些网站（可能是 Google Plus）上，ID 是一长串数字，我将我的个人资料 ID 减少并增加了很多次，并尝试访问这些页面，没有页面（错误 404），也许有人会说，那些用户已经删除了他们的个人资料，但我认为这个 ID 并没有增加，它实际上是在生成的。

生成ID有什么好处？（一串数字或字母/数字）。什么时候应该使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:33:23.487

自动递增的 ID 是保证唯一 ID 的一种简单方法。想想如果没有这个功能，你需要做些什么来保证它的独特性！为此创建了函数，但仍然......（例如，[使用 SQL 创建唯一标识符](https://stackoverflow.com/questions/4803305/create-a-unique-identifier-using-sql)）

请注意，很可能您收到 404 只是因为您没有被允许访问您尝试访问的配置文件 - 而您猜测的 ID 实际上可能已经存在。

Google 很可能不会简单地将 ID 从 1 增加到他们拥有的用户数量。它将指示帐户的年龄，以及尝试访问现在变得更加模糊的帐户的特定页面的简单方法，等等。也有可能所讨论的 ID 实际上是（部分）例如您的姓名的（加盐）散列。

# java - 选中项目时，selectManyCheckbox 元素不会复制到数组

> ID：15375411
> 
> 赞同：0
> 
> 时间：2013-03-13T01:25:31.283
> 
> 标签：java, arrays, jsf, facelets, selectmanycheckbox

好的，我不确定为什么说我的目标不是集合或数组，因为我试图将 selectManyCheckbox 的结果放入整数数组中。它只是一个 1-50 的复选框，用户可以在其中选择多个数字以存储在数组中并稍后显示，但我不断收到错误消息“目标模型类型不是集合或数组”错误报告。这是需要保存在对象数组而不是整数数组中的东西吗？我知道还有其他线程处理同样的问题，但我看到的其他线程通常是使用错误类型的复选框或未存储在数组或集合中的人。任何帮助将非常感激。

```
<p>
        Pick Your Lotto Numbers
        <h:selectManyCheckbox value="#{lottoBean.numbersPicked}"
                 layout="lineDirection">
        <f:selectItems value="#{lottoBean.numberChoices}"/>
        </h:selectManyCheckbox>
  </p>
  <p>
        <h:commandButton value="Submit"
                         action="next.xhtml"/>
  </p> 
```

还有我的LottoBean 类...

```
int[]choices = new int[50];
int[]picked;
int[]actual;
int test = 5;

/**
 * Creates a new instance of LottoBean
 */
@SuppressWarnings("empty-statement")
public LottoBean() {
    picked = new int[6];
    actual = new int[6];
}

public void setNumbersPicked(int[] chosen)
{
    for(int i =0; i < 6; i++)
    {
        picked[i] = chosen[i];
    }
}

@SuppressWarnings("empty-statement")
public String getNumbersPicked()
{
    return Arrays.toString(picked);
}

public int[] getNumberChoices()
{
    for (int i = 0; i < 50; i++) 
    {
        choices[i] = i + 1;
    }
    return choices;
}

public String getNumbersDrawn()
{
    Random num = new Random();
    for (int i = 0; i < 6; i++)
    {
        int nextNum = num.nextInt(50);
        int number  = nextNum + 1;
        actual[i] = number;
    }
    return Arrays.toString(actual);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:10:41.180

你`selectManyCheckobox`的价值是`#{lottoBean.numbersPicked}`。这意味着您应该拥有名为`numbersPicked`which is `Collection`or的属性`Array`。数组示例：

```
private int[] numbersPicked;

public int[] getNumberPicked() {
  return numbersPicked;
}

public void setNumberPicked(int[] numbersPicked) {
  this.numbersPicked = numbersPicked;
} 
```

你应该在你的 backing bean 中有这个。问题是您的 getter 方法返回`String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:12:39.950

我最终使用了 LinkedHashMap，这样如果我需要类似的东西，使用除整数以外的任何东西，就很容易插入项目。

```
public class LottoBean {

private Integer[] numbers;
private int[] actual = new int[6];
private Random generator;

private static Map<Integer,Integer> numbersName;

static
{
    numbersName = new LinkedHashMap<Integer,Integer>();
    for (int i = 1; i < 51; i++)
    {
        numbersName.put(i,i);
    } 
}

/*
 * returns Integer array
 */
public Integer[] getNumbers() 
{
    return numbers;
}

/*
 * Sets array to numbers picked
 */
public void setNumbers(Integer[] numbers) 
{
    this.numbers = numbers;
}

/**
 * Returns map 
 * @return numbersName 
 */
public Map<Integer,Integer> getNumbersName() 
{
    return numbersName;
}

/**
 * Returns the numbers array
 * @return the numbers array in string form
 */
public String getNumbersNameArray()
{
    return Arrays.toString(numbers);
}

/**
 * Generates numbers drawn
 * @return actual the numbers drawn
 */
public String getActualNumbersArray()
{ 

    for (int i = 0; i < 6; i++)
    {
        generator = new Random();
        int number = 1 + generator.nextInt(50);
        actual[i] = number;
    }
    return Arrays.toString(actual);
}

/**
 * Compares numbers picked to numbers drawn
 * @return the number of matching numbers
 */
public int getSame()
{
    int same = 0;  
      for (int i = 0; i < numbers.length; i++) 
      {  
         for(int j = 0; j < actual.length; j++) 
         {  
            if (numbers[i] == actual[j]) 
            {  
               same++;
            }
         }
      }
      return same;
}

} 
```

指数...

```
<head>
<title>Lotto Numbers</title>
</head>
<body>
<h:form> 
<p>
    Pick six numbers from the list:
</p>
<h:selectManyCheckbox id="chkbox1" value="#{lottoNumbers.numbers}"
required="true" requiredMessage="check exactly six numbers" 
layout="lineDirection" border="1" readonly="false">
<f:selectItems value="#{lottoNumbers.numbersName}"/>
</h:selectManyCheckbox>
<h:message for="chkbox1" style="color:red"/>
<br/><br/>
<h:commandButton value="submit" action="next" />
</h:form>
</body>
</html> 
```

接下来...

```
<head>
<title>Lotto Numbers</title>
</head>
<body>
<h:form>
<p>
    <h:outputText value="You have selected : #{lottoNumbers.numbersNameArray}" />
</p>
    <h:outputText value="Actual numbers    : #{lottoNumbers.actualNumbersArray}" />
<p>
    <h:inputText value="Matching numbers   : #{lottoNumbers.same}" /> 
</p>
</h:form>
</body>
</html> 
```

# python - 将python程序安全连接到mysql

> ID：15375412
> 
> 赞同：3
> 
> 时间：2013-03-13T01:25:32.643
> 
> 标签：python, mysql

我想使用 MySQLdb 从我的 python 程序连接到 MySQL。

我很担心，因为我需要输入用户名和密码`.py`才能连接到 MySQL 数据库，以及 inno 设置。

没有人能找到用户名和密码并访问我的数据库吗？我该如何解决这个问题？我是否以某种方式创建了一个访问受限的 sql 用户？（我是 html/css/MySQL 的新手）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:41:53.797

首先，确保您的 MySQL 用户/密码与您的用户名和密码不同。

接下来，创建一个名为的文件，例如，`config.py`并将其放在 PYTHONPATH 中的目录中：

```
USER='zzzzzzzz'
PASS='xxxxxxxx'
HOST='yyyyyyyy'
MYDB='wwwwwwww' 
```

更改文件的权限，以便只有您（和 root）可以读取它。例如，在 Unix 上：

```
chmod 0600 /path/to/config.py 
```

现在，当你使用你编写脚本时，`MySQLdb`你会写

```
import config
connection = MySQLdb.connect(
    host = config.HOST, user = config.USER,
    passwd = config.PASS, db = config.MYDB) 
```

因此，您的用户名和密码不会出现在您的任何脚本中。

* * *

您还可以放入`config.py`加密目录和/或 USB 拇指驱动器，因此只有在安装驱动器时才能访问该文件。

# c - 尝试计算缓冲区中的参数数量

> ID：15375428
> 
> 赞同：-1
> 
> 时间：2013-03-13T01:27:22.800
> 
> 标签：c, shell, buffer

嗨，我正在用 C 语言编写一个用于赋值的 shell，但我不确定如何在函数 count() 中计算和返回缓冲区中的参数数量。这就是我到目前为止所拥有的。提前致谢。

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <stdlib.h>

int count(char* buffer)
{
    int count=0;
    //COUNT ARGS WITHIN BUFFER HERE
    return count;
}

int main(int argc, char **argv)
{
        //buffer is to hold the commands that the user will type in
        char buffer[512];
        // /bin/program_name is the arguments to pass to execv
        //if we want to run ls, "/bin/ls" is required to be passed to execv()
        char* path = "/bin/";

        while(1)
        {
                //print the prompt
                printf("myShell>");
                //get input
                fgets(buffer, 512, stdin);
                //fork!
                int pid = fork();
                //Error checking to see if fork works
                //If pid !=0 then it's the parent
                if(pid!=0)
                {
                        wait(NULL);
                }
                else
                {
                        int no_of_args = count(buffer);
            //we plus one so that we can make it NULl
            char** array_of_strings = malloc((sizeof(char*)*(no_of_args+1))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:03:32.257

我认为您要计算的是 char* 缓冲区中以空格分隔的单词数。你可以用代码做到这一点：

```
int i=0;
bool lastwasblank = false;
while (buffer[i] == ' ') i++; //For us to start in the first nonblank char

while (buffer[i] != '\0' && buffer[i] != '\n') {
    if (buffer[i] != ' ') {
        count++;
        while(buffer[i] != ' ') i++;
    }
    else {
        while(buffer[i] == ' ') i++;
    }
} 
```

或者类似的东西。这个想法是你从字符串缓冲区的开头开始，然后遍历它，每次找到一个单词时添加一个，然后忽略每个字符，直到出现空格，然后忽略并重新开始计算单词, 直到到达字符串的末尾（通常可能是 '\n'，如果用户键入超过 512 个字符，则可能是 '\0'。）

希望你有这个想法。

# twitter - 是否可以制作自定义的实时 Twitter 小部件？

> ID：15375431
> 
> 赞同：2
> 
> 时间：2013-03-13T01:27:56.927
> 
> 标签：twitter

我在查找有关为网站制作自定义 Twitter 小部件的任何资源时遇到了一些麻烦。

基本上，我想创建一个实时 Twitter 提要以在站点内实现，每隔几秒自动更新以显示新推文。

我知道这曾经是可能的，但似乎 Twitter 现在只是想让我使用他们的默认小部件，而不是我自己的解决方案。

有没有人有任何提示/链接到好的资源？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-13T14:32:40.590

有一个可能的解决方案可以在我们的网站上实施。你可以试试 twitters 流 API。它是一种在两个端点之间保持永久连接的技术；一个在 Twitter 端，另一个在我们的网站。该技术类似于聊天应用程序，其中连接的端口侦听任何更改并更新我们这边的更改。

请参考推特流媒体 API

# javascript - V8：为什么 WeakReferenceCallback 没有被调用？

> ID：15375432
> 
> 赞同：0
> 
> 时间：2013-03-13T01:27:57.803
> 
> 标签：javascript, v8

当我尝试使持久句柄变弱时，为什么不调用 Wea​​kReferenceCallback？请参阅以下示例：

```
void myWeakReferenceCallback(v8::Persistent<v8::Value> theValue, void *theParameter)
{
    fprintf(stdout, "myWeakReferenceCallback");
}

void testWeakReferenceCallback()
{
    v8::Persistent<v8::Value> persistent_value;
    {
        v8::Persistent<v8::Context> context = v8::Context::New();
        v8::Context::Scope context_scope(context);
        v8::HandleScope handle_scope;
        v8::Local<v8::Value> local_value = v8::NumberObject::New(5.0);
        persistent_value = v8::Persistent<v8::Value>::New(local_value);
        persistent_value.MakeWeak(NULL, myWeakReferenceCallback);
        context.Dispose();
    }
    persistent_value.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:54:40.523

我认为有两个问题：

1.  在 V8 有机会调用回调之前，您正在处理弱句柄。您需要在回调中处理*它*。
2.  V8 在执行 GC 之前不会调用弱句柄回调。

试试这个：

```
void myWeakReferenceCallback(v8::Persistent<v8::Value> theValue, void *theParameter)
{
    fprintf(stdout, "myWeakReferenceCallback");
    theValue.Dispose();
}

void testWeakReferenceCallback()
{
    v8::Persistent<v8::Value> persistent_value;
    {
        v8::Persistent<v8::Context> context = v8::Context::New();
        v8::Context::Scope context_scope(context);
        v8::HandleScope handle_scope;
        v8::Local<v8::Value> local_value = v8::NumberObject::New(5.0);
        persistent_value = v8::Persistent<v8::Value>::New(local_value);
        persistent_value.MakeWeak(NULL, myWeakReferenceCallback);
        context.Dispose();
    }
    //persistent_value.Dispose();
    while (!v8::V8::IdleNotification()); // force GC
} 
```

# python - 显示三个变量之间关系的 Python 图表

> ID：15375437
> 
> 赞同：0
> 
> 时间：2013-03-13T01:28:09.267
> 
> 标签：python, math, graph, relationship

我有一个 Python 函数，它有参数`Slope`并且`Distance`它返回`Cost`. 坡度可以在 1 - 80 范围内。距离可以在 1 - 20000 范围内。成本可以是任何正数。

我想看看斜率、距离和成本之间的关系。显示这三个变量之间关系的最佳图是什么？我将如何创建它。例如，我想知道如果坡度上升和距离下降会发生什么成本？如果坡度和距离增加，成本会怎样？ETC...

```
def func(Slope, Distance):
     ...
     return cost

SlopeList = list(xrange(81))
DistanceList = list(xrange(20000)

myList= []
for Distance in DistanceList:
    for Slope in SlopeList:   
         cost = func(Slope, Distance)
         var = (Slope, Distance, Cost)
         append.myList(var) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:37:56.400

这个问题有点不清楚，所以我将尝试涵盖所有可能性：

a）如果您有两个变量的函数，例如`func`，并且您可以对两个变量的许多组合执行该函数，则可以使用`matplotlib`（可能）分别在 x 和 y 轴上绘制带有斜率和距离的等高线图，和成本显示为等高线。有关示例，请参见[此处。](http://matplotlib.org/examples/pylab_examples/contour_demo.html)

b) 如果您有以下功能：

```
Cost = func(Slope,Distance) 
```

...并且您知道成本和其他两个变量之一的值，那么您可以：

b1) 再写两个函数（例如`funcSlope(Cost,Distance)`和`funcDistance(Slope,Cost)`），从已知变量中产生未知变量，或者

b2）如果`func`您无法使用该函数，因此您不知道它是如何计算的，因此无法明确编写我为选项 1 建议的函数，或者很难通过`func`分析反演找到斜率或距离另外两个变量，您可以使用如下代码以数字方式找到未知变量：

```
def func(Slope,Distance):
    # Imagine that we didn't know the definition of this function
    # so we couldn't write funcSlope() explicitly
    return Slope * Distance**0.1234

def funcSlope(Cost,Distance,minSlope,maxSlope):
    def fs (Slope):
        return Cost - func(Slope,Distance)
    return scipy.optimize.brentq(fs, minSlope, maxSlope)

print (func(2,6))
print (funcSlope(2.4949,6,0,10)) 
```

...其输出为：

```
2.494904118641096
1.999996698357211 
```

您会看到在调用时需要为未知变量指定边界`brentq()`。

# c++ - _com_ptr_t::CreateInstance 没有 regsvr32 成功

> ID：15375439
> 
> 赞同：1
> 
> 时间：2013-03-13T01:28:19.837
> 
> 标签：c++, com, atl, regsvr32

我正在研究一个使用 _com_ptr_t::CreateInstance 创建 COM 对象的程序。我没有得到的是，代码无需 regsvr32 引用的 COM dll 即可工作。

唯一的要求是 COM 必须驻留在可执行文件的同一目录中。

有人可以在不涉及 regsvr32 的情况下解释为什么这项工作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:36:16.867

[http://msdn.microsoft.com/en-us/library/ms973913.aspx](http://msdn.microsoft.com/en-us/library/ms973913.aspx)

免费注册 COM ... 不难但很棘手。

# php - 用php正确输出JSON？

> ID：15375441
> 
> 赞同：0
> 
> 时间：2013-03-13T01:28:52.387
> 
> 标签：php, json

使用 JSON 的新手。我有以下 XML 结果。我想在请求时提供相同的结果，但采用 JSON 格式。我的数据来自一个 mySQL 数组。

当我尝试拥有多个同名节点时，我的问题就出现了。以我的 XML 结果为例：

```
<results>
    <result>
        <item_id>1</item_id>
    </result>
    <result>
        <item_id>50</item_id>
    </result>
    <result>
        <item_id>50433</item_id>
    </result>
    <result>
        <item_id>3</item_id>
    </result>
</results> 
```

如果我只是在 PHP 中执行以下操作，我的数据会不断相互覆盖。

```
foreach($result as $key => $value) {
    $json["results"]["result"]["item_id"] = $value;
} 
```

它只给我一行结果，即最后一个 item_id 为 3。

我在看什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:29:50.460

您正在覆盖循环中的值，因为您没有将其放入数组中。

```
$json["results"]["result"]["item_id"] = $value; 
```

应该

```
$json["results"]["result"]["item_id"][] = $value; 
```

# ruby-on-rails - Rails 类似 Facebook 的通知

> ID：15375442
> 
> 赞同：4
> 
> 时间：2013-03-13T01:28:57.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

在我的 Rails 3 应用程序中，我有用户、产品和喜欢。如果一个用户发布了一个产品，而另一个用户喜欢这个产品，我希望那个用户得到一个通知，他们的产品被喜欢了。

是否有现有的宝石可以处理这个问题？我只遇到过 Pusher ，但这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T01:38:10.717

有几个宝石可以做到这一点：

Rails活动

[https://www.ruby-toolbox.com/categories/Rails_Activity_Feeds](https://www.ruby-toolbox.com/categories/Rails_Activity_Feeds)

公共活动

[http://railscasts.com/episodes/406-public-activity](http://railscasts.com/episodes/406-public-activity)

[https://github.com/pokonski/public_activity](https://github.com/pokonski/public_activity)

我从来没有使用过它们（尽管我明天可能会这样做^^）所以也许有更多经验的人可以根据您的要求为您提供更好的见解（或阅读文档的某些部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T10:12:29.663

不同人在上面提到的所有宝石都是用于实现活动提要。实现 facebook 新闻提要和 facebook 通知系统之间存在很大差异。

为了实施通知系统，我建议您检查这些链接。 [砂砾](http://rubygems.org/gems/gritter)

[关联](http://www.takeofflabs.com/posts/2-Pop-Up-Notifications-in-Rails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:36:20.527

你看过这个[http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)吗？示例中使用了 Faye。我不确定你是否仍然认为这是一种矫枉过正。

# java - 在 libgdx 中传递特定于平台的代码 - nullpointerexception

> ID：15375444
> 
> 赞同：3
> 
> 时间：2013-03-13T01:29:02.520
> 
> 标签：java, android, libgdx

我试图让 libgdx 与 Facebook SDK 一起工作，所以我想我需要运行一些特定于平台的代码。

我从 Android 开始，这是我的 onCreate：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
    cfg.useGL20 = false;
    cfg.useAccelerometer = false;
    cfg.useCompass = false;

    initialize(new RPS(new androidFacebookHandler()), cfg);
} 
```

RPS 的构造函数非常简单：

```
public RPS(facebookHandler _fbhandler) {
    this.fbhandler = _fbhandler;
    this.fbhandler.test();
} 
```

fbhandler 的 test() 函数很简单。（androidFacebookHandler 实现 facebookHandler）

`Gdx.app.log("debug", "test");`

但是，这个示例给了我一个空指针异常......我猜我在初始化（）之后才能使用 Gdx.app。因此，我尝试在 initialize() 之后使用 setFbhandler() 函数设置 fbhandler，但这给了我相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T05:08:12.417

将调用放在必须具有`this.fbhandler.test();`的`create()`方法中`RPS`（它必须是 的子类`ApplicationListener`，对吗？）

在 Libgdx 中，直到方法开始之前库的初始化才完成`create`（Libgdx 基础结构将调用该方法以指示您的应用程序已启动），因此在此之前您无法访问`Gdx.<anything>`。

# c# - 对字典项进行分组和计数

> ID：15375446
> 
> 赞同：1
> 
> 时间：2013-03-13T01:29:09.507
> 
> 标签：c#, linq

我有一个`Dictionary<string, CachedImage>`我想对项目进行分组，计算组中的项目数，如果计数大于 6500 则遍历每个组。

该类`CachedImage`包含我感兴趣的`Path`And属性。`ExpiresUtc`

遗憾的是，我的 Linq-fu 缺少复杂的查询，所以就我所知，我想我已经搞砸了。我假设我想要的是可能的。

任何帮助将不胜感激，尤其是快速演练。

```
Regex searchTerm = new Regex(@"(jpeg|png|bmp|gif)");
var groups= PersistantDictionary.Instance.ToList()
            .GroupBy(x => searchTerm.Match(x.Value.Path))
            .Select(y => new
                           {
                            Path = y.Key,
                            Expires = y.Select(z => z.Value.ExpiresUtc),
                            Count = y.Sum(z => z.Key.Count())
                           })
            .AsEnumerable(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:46:35.670

试试这个：

```
var groups = PersistantDictionary.Instance.ToList()
        .GroupBy(x => searchTerm.Match(x.Value.Path).Value)
        .Where(g => g.Count() > 6500);

foreach (var group in groups)
{
    Console.WriteLine("{0} images for extension {1}", group.Count(), group.Key);

    foreach (KeyValuePair<string, CachedImage> pair in group)
    {
        //Do stuff with each CachedImage.
    }
} 
```

所以要打破这个：

```
PersistantDictionary.Instance.ToList() 
```

产生一个列表`KeyValuePair<string, CachedImage>`。

```
.GroupBy(x => searchTerm.Match(x.Value.Path).Value) 
```

按正则表达式匹配的对列表进行`Path`分组`CachedImage`。请注意，我使用了该`Value`属性 - 该`Match`方法返回一个`Match`对象，因此最好按匹配的实际文本进行分组。这一步的结果将是一个`IEnumerable`。`<IGrouping<string, KeyValuePair<string, CachedImage>>>`

```
.Where(g => g.Count() > 6500); 
```

这可确保仅检索具有 > 6500 个项目的组。

# apache - mod_rewrite 规则给出 404

> ID：15375448
> 
> 赞同：0
> 
> 时间：2013-03-13T01:29:19.407
> 
> 标签：apache, mod-rewrite

我确定这已得到解答，我已经阅读了几个小时，但无处可去。我今晚需要这个工作，我的大脑正在受伤，所以我正在向美妙的互联网寻求帮助。

我正在尝试浏览所有页面`index_new.php`（当我决定这样做时，这一切都是有道理的，我发誓）。我有两种类型的页面，静态和动态。动态页面都是同一种页面，只是基于数据库（MySQL）的数据不同。我正在尝试进行这些重写

*   /about => index_new.php?page=about
*   /installations => index_new.php?page=about
*   /installations/{site_id} => index_new.php?page=site&siteID={site_id}

（如果`about`可以是通用的，我会很高兴，但我不想碰运气）我的 .htaccess 文件是：

```
# enable rewrite
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

# rewrite all physical existing file or folder
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d

# allow things that are certainly necessary
RewriteCond %{REQUEST_URI} "/statics/" [OR]
RewriteCond ${REQUEST_URI} "/ajax/"

# rewrite rules
RewriteRule ^about index_new.php?page=about
RewriteRule ^/installations index_new.php?page=list
RewriteRule ^/installations/(.*) index_new.php?page=site&id=$1 
```

当我尝试转到`/about`或任何其他页面时，我得到 HTTP 404。请注意，我的根目录是`http://localhost/~user/public_html/new`并且`.htaccess`文件在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:48:33.463

假如：

1.  每个规则都必须满足问题中的条件。（它们被重复，因为它们仅对下一个重写规则有效）。

2.  .htaccess 文件位于根目录。

您可以尝试这个而不是您问题中的规则集：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  /about/?$      [NC]
RewriteRule .*  /index_new.php?page=about [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  /installations/?$ [NC]
RewriteRule .*  /index_new.php?page=list     [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  /installations/([^/]+)/? [NC]
RewriteRule .*       /index_new.php?page=site&id=%1 [NC,L] 
```

静默地图：

`http://example.com/about`到

`http://example.com/index_new.php?page=about`

* * *

`http://example.com/installations` 到

`http://example.com/index_new.php?page=about`

* * *

`http://example.com/installations/Anything` 到

`http://example.com/index_new.php?page=site&Anything`

* * *

对于永久且可见的重定向，请将 [NC,L] 替换为 [R=301,NC,L]。

### 笔记：

未使用问题中的这些条件，因为它们的目的不明确：

```
 RewriteCond %{REQUEST_URI} "/statics/" [OR]
   RewriteCond ${REQUEST_URI} "/ajax/" 
```

要将它们包含在一个或多个规则中，请尝试以下操作：

```
# For NOT condition, include the next line before the corresponding rewrite rule:
RewriteCond %{REQUEST_URI} !(statics|ajax) [NC]

# For positive condition, include the next line before the corresponding rewrite rule:
RewriteCond %{REQUEST_URI}  (statics|ajax) [NC] 
```

# parsing - 编写具有多个预期完成的解析器

> ID：15375450
> 
> 赞同：2
> 
> 时间：2013-03-13T01:29:21.363
> 
> 标签：parsing, language-agnostic

假设我有以下布尔查询语法：

```
 Query     := <Atom> [ <And-Chain> | <Or-Chain> ]
 Atom      := "(" <Query> ")" | <Var> <Op> <Var> 
 And-Chain := "&&" <Atom> [ <And-Chain> ]
 Or-Chain  := "||" <Atom> [ <Or-Chain> ] 
 Var       := "A" | "B" | "C" | ... | "Z"
 Op        := "<" | ">" | "=" 
```

此语法的解析器将具有伪代码：

```
 parse(query) :=
   tokens <- tokenize(query)
   parse-query(tokens)
   assert-empty(tokens)

 parse-query(tokens) :=
   parse-atom(tokens)
   if peek(tokens) equals "&&" 
     parse-chain(tokens, "&&")
   else if peek(tokens) equals "||"
     parse-chain(tokens, "||")

 parse-atom(tokens) :=
   if peek(tokens) equals "("
     assert-equal( "(", shift(tokens) )
     parse-query(tokens)
     assert-equal( ")", shift(tokens) )
   else
     parse-var(tokens)
     parse-op(tokens)
     parse-var(tokens)

 parse-chain(tokens, connector) :=
   assert-equal( connector, shift(tokens) )
   parse-atom(tokens)
   if peek(tokens) equals connector
      parse-chain(tokens, connector)

 parse-var(tokens) :=
   assert-matches( /[A-Z]/, shift(tokens) )

 parse-op(tokens) :=
   assert-matches( /[<>=]/, shift(tokens) ) 
```

不过，我想确保的是，我的解析器会报告有用的解析错误。例如，给定一个以 开头的查询`"( A < B && B < C || ..."`，我想要一个类似的错误：

```
found "||" but expected "&&" or ")" 
```

这样做的诀窍是它收集来自解析器不同部分的期望。我可以想办法做到这一点，但最终感觉有点笨拙。

就像，在 Java 中，我可能会`GreedyError`在尝试查看“&&”或“||”时抛出一个

```
// in parseAtom
if ( tokens.peek() == "(" ) {
    assertEqual( "(", tokens.shift() );
    try {
        parseQuery(tokens);
        caught = null;
    }
    catch (GreedyError e) {
        caught = e;
    }
    try { 
        assertEqual( ")", tokens.shift() );
    }
    catch (AssertionError e) {
        throw e.or(caught);
    }
}
// ...
// in parseChain
assertEqual( connector, tokens.shift() );
parseAtom(tokens);
if (tokens.peek() == connector) {
    parseChain(tokens, connector);
}
else {
    new GreedyError(connector);
} 
```

或者，在 Haskell 中，我可能会使用它`WriterT`来跟踪我对当前令牌的最后一次失败比较，用于`censor`在每次成功的令牌匹配后清除。

但是这两种解决方案都让人觉得有点老套和笨拙。我觉得我错过了一些基本的东西，一些模式，可以优雅地处理这个问题。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:09:58.193

构建一个 L(AL)R(1) 状态机。有关 LALR 的更多详细信息，请参见[此处](http://en.wikipedia.org/wiki/LALR_parser_generator)。

您要用于错误报告的是在每个状态中为 dot 设置的 FIRSTOF。当您了解解析器状态是如何生成的时，这个答案将是有意义的。

如果你*有*这样的一组状态，你可以记录下FIRSTOF集合与每个状态的并集；那么当处于该状态并且不可能进行转换时，您的错误消息是“Exepect（firstof currentstate）”。

如果您不想记录第一个集合，您可以轻松编写一个算法，该算法将爬过状态表来重建它。那将相当于您的“窥视”的算法。

# android - 检查活动是否从同一包的服务运行

> ID：15375451
> 
> 赞同：0
> 
> 时间：2013-03-13T01:29:22.987
> 
> 标签：android, service, android-activity, xamarin.android, task

这更让人怀疑。目前，我的代码运行良好，但我想确保我以正确的方式进行操作。

我有一项服务，它检查活动是否在前台运行。如果是，它会向 Activity 发送广播，因此 Activity 会更新屏幕上的一些内容。

我在`IntentFilter`服务上创建了一个：

```
com.harkdev.ServerStatus.SERVER_UPDATED 
```

这里服务需要知道活动是否在前台，所以它使用`IsActivityRunning()`方法，从`ApplicationManager`. 这意味着我需要设置`GET_TASKS`权限。

既然 SERVICE 和 ACTIVITY 都在同一个包中，有没有更好的方法来获取这些信息？也许尝试避免设置`GET_TASKS`权限？

这是我服务中的代码：

```
if (IsActivityRunning()) {
    Intent localIntent = new Intent(SERVER_UPDATED);
    SendBroadcast(localIntent, null);
} 
```

`IsActivityRunning()`方法：

```
public bool IsActivityRunning() {
    ActivityManager manager = (ActivityManager) GetSystemService(ActivityService);
    IList<ActivityManager.RunningTaskInfo> runningTaskInfo = manager.GetRunningTasks(1); 

    ComponentName componentInfo = runningTaskInfo[0].TopActivity;
    if (componentInfo.PackageName == "com.harkdev.ServerStatus") 
        return true;

    return false;
} 
```

这是我活动中的代码：

```
protected override void OnCreate (Bundle bundle) {
    base.OnCreate(bundle);
    // Set our view from the "main" layout resource
    SetContentView (Resource.Layout.Main);

    IntentFilter filter = new IntentFilter(ServerStatusCheckService.SERVER_UPDATED);
    _receiver = new ServiceBroadcastReceiver ();
    _receiver.Received += Receiver_Received;

    RegisterReceiver(_receiver, filter);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:59:07.430

首先，您在比较字符串时采用了错误的方法：

```
if (componentInfo.PackageName == "com.harkdev.ServerStatus") 
```

它应该是：

```
if ("com.harkdev.ServerStatus".equals(componentInfo.PackageName)) 
```

其次，如果服务和活动在您的应用程序中，那么我认为检查“相同包”的要求是没有必要的。

要将信息从服务发送到活动，您可以使用[`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)（在 API 3+ 中可用）：

*   从活动启动服务时，您创建一个`ResultReceiver`，将其放入启动服务的意图中。
*   在服务中，提取`ResultReceiver`并保留它。当您要发送信息时，请使用[`send()`](http://developer.android.com/reference/android/os/ResultReceiver.html#send%28int,%20android.os.Bundle%29).
*   例如，在活动中，`onDestroy()`您可以触发一个命令来通知服务`ResultReceiver`无效并且应该将其删除。

* * *

*艾迪*

例如：

*   在您的活动中：

    ```
    // Global variable.
    private ResultReceiver mResultReceiver = new ResultReceiver() {

        @Override
        protected void onReceiveResult(int resultCode, Bundle resultData) {
            // Update the UI here...
        }
    } 
    ```

    启动服务时：

    ```
    Intent i = new Intent(this, TheService.class);
    // You can use different action names for different commands.
    i.setAction("REGISTER_RECEIVER");
    i.putExtra("ResultReceiver", mResultReceiver);
    i.putExtra("ResultReceiver_ID", hashCode());
    startService(i); 
    ```

    并在`onDestroy()`：

    ```
    Intent i = new Intent(this, TheService.class);
    i.setAction("UNREGISTER_RECEIVER");
    i.putExtra("ResultReceiver_ID", hashCode());
    startService(i); 
    ```

*   在您的服务中：

    ```
    import  android.util.SparseArray;

    // ...

    private SparseArray<ResultReceiver> mReceiverMap = new SparseArray<ResultReceiver>();

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        if ("REGISTER_RECEIVER".equals(intent.getAction())) {
            // Extract the ResultReceiver and store it into the map
            ResultReceiver receiver = intent.getParcelableExtra("ResultReceiver");
            int id = intent.getIntExtra("ResultReceiver_ID", 0);
            mReceiverMap.put(id, receiver);
        } else if ("UNREGISTER_RECEIVER".equals(intent.getAction())) {
            // Extract the ResultReceiver ID and remove it from the map
            int id = intent.getIntExtra("ResultReceiver_ID", 0);
            mReceiverMap.remove(id);
        }

        // ...
    } 
    ```

# matlab - 如何检查大小、标量或矢量

> ID：15375452
> 
> 赞同：0
> 
> 时间：2013-03-13T01:29:26.717
> 
> 标签：matlab

标题说得最多，但更具体地说，开始提出的问题是......

“你的函数应该记录它被调用的次数

您的函数将接受 1、5 或 6 个参数并返回 1、2 或 3 个值

所有参数必须是标量或行矩阵；您应该检查这一点并打印一条错误消息，如果不正确，则在第一个返回值中返回 0。

所有参数的大小必须相同：要么它们都必须是标量，要么它们都必须是相同长度的行向量。您必须检查这一点并打印一条错误消息，如果不正确，则在第一个返回值中返回 0"

这不是我向你保证的全部问题，而是我最挣扎的部分。如中，我不知道如何跟踪它被调用的次数（可能是计数？）或者不知道如何检查参数是标量矩阵还是行矩阵。还要检查它们是否大小相同

我搜索如何做这一切，没有结果。因此，我将假设这不是基础知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:49:18.687

这是您搜索得不够努力的所有基本内容：

1.  使用 跟踪次数`global variable`。每次输入函数时只需递增它。`assignin`或者，您可以使用and获得工作区变量`eval`：[HERE for Global。](http://www.mathworks.com.au/help/matlab/ref/global.html) [在这里分配。](http://www.mathworks.com.au/help/matlab/ref/assignin.html) [在这里进行评估。](http://www.mathworks.com.au/help/matlab/ref/eval.html)
2.  检查`nargin`可用于传递输入的输入参数：[这里](http://www.mathworks.com.au/help/matlab/ref/nargin.html)
3.  不同数量的输出`varargout`：[这里](http://www.mathworks.com.au/help/matlab/ref/varargout.html)
4.  使用`size`或`length`检查输入的长度。`disp`显示一条消息，设置第一个输出并使用`return`返回。

希望这可以帮助。

# c# - 如何从位图中删除白色背景颜色

> ID：15375453
> 
> 赞同：4
> 
> 时间：2013-03-13T01:29:35.633
> 
> 标签：c#, image, background, bitmap, picturebox

我想删除位图中的白色背景颜色

```
Bitmap capcha = new Bitmap("C:/image.jpg");
pictureBox1.Image = capcha; 
```

但我想在我的图片框1中只显示背景中存在的没有白色的图像

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T01:53:42.070

尝试像这样在验证码中设置透明度：

```
Bitmap capcha = new Bitmap(@"C:/image.jpg");
capcha.MakeTransparent(Color.White);
pictureBox1.Image = capcha; 
```

我希望这是你需要的。

# linux - 为什么 git 在推送/获取时因“打开的文件太多”而失败

> ID：15375454
> 
> 赞同：15
> 
> 时间：2013-03-13T01:29:38.853
> 
> 标签：linux, git, config

我在使用 Git 时遇到问题，我收到以下消息：

```
> git fetch
error: cannot create pipe for ssh: Too many open files
fatal: unable to fork 
```

系统管理员增加了我的文件限制，但并没有解决问题。此外，我对使用 vi 创建新文件没有问题。

尝试推送新分支时，我收到类似的消息：

> git push origin test_this_broken_git 错误：无法创建管道：打开的文件太多致命：发送包：无法分叉边带解复用器

有人可以确切地回答为什么会这样吗？我最近没有对我的 git 配置进行任何更改，并已手动验证。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T01:40:15.973

有两个类似的错误消息：

```
EMFILE：打开的文件太多
ENFILE：系统中打开的文件过多

```

看起来您正在获取`EMFILE`，这意味着已超出单个进程的文件数。因此，检查是否`vi`可以打开文件是无关紧要的——<code>vi 将使用它自己的、单独的文件表。通过以下方式检查您的限制：

```
$ ulimit -n
1024

```

所以在我的系统上，单个进程中有 1024 个打开文件的限制。您不需要询问您的系统管理员（请不要使用缩写 SA，它太不透明；如果您必须缩写，请使用“sysadmin”）来提高限制。

您可能希望通过在`strace`.

这可能是 Git 或库中的错误，也可能是您使用的是旧版本的东西，或者可能是更奇怪的东西。首先尝试`strace`查看它打开了哪些文件，然后检查 Git 是否关闭了这些文件。

**来自 Hazok 的更新：**

使用上述建议后，事实证明错误是由太多松散的对象引起的。有太多松散的对象，因为`git gc`没有足够频繁地运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-22T12:31:32.400

### 为什么会这样？

从[git 文档](https://git-scm.com/docs/git-gc#Documentation/git-gc.txt-gcauto)：

> 当存储库中的松散对象大约超过这么多时， git gc --auto 将打包它们。一些 Porcelain 命令不时使用此命令执行轻量级垃圾收集。**默认值为 6700。**

这里的“一些 Porcelain 命令”包括`git push`等等`git fetch`。所以如果最大打开文件限制< 6700，一旦你在单个 git repo 中获得 ~6700 个松散的对象`ulimit -n`，你最终会被阻止。`git gc --auto`

### 我很急。如何解决？

如果你有足够的权限调整系统ulimit：

```
$ sudo ulimit -n 8192 
```

否则，您可以`git gc`通过设置禁用`git config gc.auto=0`，以便您可以将本地提交推送到远程，删除存储库，然后将其克隆回来，而不会出现成千上万的松散对象。

### 我们怎样才能防止这种情况再次发生？

Set `git config --global gc.auto=200`，其中 200 比您的最大打开文件限制小一些。如果你选择的值太小，`git gc`会运行太频繁，所以要明智地选择。

如果设置，除非您手动`gc.auto=0`运行，否则将永远不会打包松散的对象。`git gc`因此，同一目录中可能会累积数十万个文件，这可能是一个问题，尤其是对于机械硬盘驱动器或 Windows 用户而言。（另请参阅：[一个目录中有多少文件太多？](https://serverfault.com/questions/98235)以及 [在同一个 Linux 目录中有数百或数千个文件是否可以（性能方面）？](https://stackoverflow.com/questions/8735875)）。

# node.js - 从玉内部获取用户代理

> ID：15375457
> 
> 赞同：9
> 
> 时间：2013-03-13T01:29:48.010
> 
> 标签：node.js, express, pug

我正在尝试将我为 groovy 编写的脚本移植到玉上，但遇到了绊脚石

我需要从一个玉文件中访问用户代理。这是我到目前为止所尝试的：

```
 - var agent = req.headers['user-agent'];
 - var agent = headers['user-agent'];
 - var agent = navigator.userAgent; 
```

每次我从快递收到 500 错误。这甚至可能吗？

我知道我可以在一个模块中完成它并将它传递给渲染语句，但这意味着将它传递给每个渲染，因为它需要是全局的。

对节点很陌生，很困惑。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T08:28:07.753

Just write your own tiny middleware

```
app.use(function(req, res, next) {
  res.locals.ua = req.get('User-Agent');
  next();
}); 
```

Put this before your `app.router`

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());

  // here
  app.use(function(req, res, next) {
    res.locals.ua = req.get('User-Agent');
    next();
  });

  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

Then you can use the `ua` variable in any `jade` template (for example `index.jade`)

```
extends layout

block content
  h1= title
  p Welcome to #{title}
  p=ua 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T05:08:16.050

你可以`user-agent`从快递到玉：（见[这里](http://expressjs.com/api.html#res.locals)）

```
app.get('/index', function(req, res){
    res.render('home.jade', {
    locals: {
            useragent: req.getHeader('User-Agent')
            }
    });
    res.end();
}); 
```

在你的玉文件中

```
html
  body
    h1 #{useragent}
script(type='text/javascript')
  var useragent = #{useragent}; 
```

# java - java定时器和thread.sleep

> ID：15375461
> 
> 赞同：0
> 
> 时间：2013-03-13T01:30:13.720
> 
> 标签：java, multithreading, timer

假设我有一个线程正在运行，里面有一个 timer.schedule(task, 5000)。现在让我们假设计时器开始运行，并且在线程的某个地方，有 thread.sleep()。当线程仍在休眠时，5000 毫秒过去了。定时器的任务在它所在的线程处于休眠状态时是否仍在运行？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:24:29.790

Thread.sleep() cannot be *somewhere in the thread*, it can be in the task code, so the task execution will block for 5000 ms and then run to completion.

Note that java.util.Timer is a single-threaded scheduler, and if a task execution is blocked Timer will not be able to execute other scheduled tasks. See API

*Corresponding to each Timer object is a single background thread that is used to execute all of the timer's tasks, sequentially. **Timer tasks should complete quickly**. If a timer task takes excessive time to complete, it "hogs" the timer's task execution thread. This can, in turn, delay the execution of subsequent tasks, which may "bunch up" and execute in rapid succession when (and if) the offending task finally completes.*

# jquery - 使用 Jquery 和 Zend 进行表单验证

> ID：15375465
> 
> 赞同：0
> 
> 时间：2013-03-13T01:30:37.470
> 
> 标签：jquery, zend-framework, jquery-validate, zend-form

我正在使用 Zend Form 和 Jquery 表单验证插件（[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)）。但是，插件会在输入标签中获取必填字段。例如，它定位“< input type='text' class='Required' id='anything' >”来执行验证方法。但是，在 Zend Form 中，当我使用 setRequired(true) 函数时，它会将“class='required'”放在标签部分中。我该如何解决这个问题？

PLUGIN <标签>嘿</label> <输入类型='文本'类='必需的'id='任何东西'>工作！

ZEND <label class='Required'>Sup < input type='text' id='anything'> 不工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:41:52.510

你需要这样的东西

```
$anything = new Zend_Form_Element_Text('anything');
$anything->setLabel('Label')
   ->setRequired(true)
   ->setAttrib('class', 'required'); 
```

# meteor - 渲染存储在 Meteor 集合中的数组列表

> ID：15375466
> 
> 赞同：1
> 
> 时间：2013-03-13T01:30:39.577
> 
> 标签：meteor

在我的用户集合中，我有一个名为`synonym_ids`.

在客户端上显示此内容的最简单方法是什么？

我尝试从服务器发布以下内容，然后从客户端订阅。但是我收到此错误：

`Internal exception while starting subscription 0ea473b6-8be4-43ec-8a56-988409a4b58a Error: Meteor.userId can only be invoked in method calls. Use this.userId in publish functions.`

```
#server
Meteor.publish 'synonym_ids', () ->
    if Meteor.userId()
        return Meteor.users.findOne({_id: Meteor.userId()}).synonym_ids

#client
Meteor.autosubscribe () ->
    Meteor.subscribe 'synonym_ids' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:16:50.660

发布函数[不能使用 Meteor.userId()](http://docs.meteor.com/#meteor_userid)，但可以使用[this.userId](http://docs.meteor.com/#publish_userId)

```
#server
Meteor.publish 'synonym_ids', () ->
if this.userId()
    return Meteor.users.findOne({_id: this.userId()}).synonym_ids 
```

在您的模板助手中，请务必检查用户是否已登录：

```
#client
Template.home.synonym_ids = ->
   Meteor.user().synonym_ids  if Meteor.userId 
```

# javascript - UPS 封锁国家/地区的消息显示在 Shopify 中的什么位置？

> ID：15375467
> 
> 赞同：0
> 
> 时间：2013-03-13T01:30:43.060
> 
> 标签：javascript, shopify

这可能对 Shopify 来说太具体了，但我希望其他人也遇到过类似的情况。所以我正在构建一个简单的 Shopify 网站，我基本上已经完成了。我们正在阻止特定的高欺诈风险国家/地区从我们的商店购买商品，方法是将它们放在页面上的列表中 首选项-> 运输（其中有他们想要阻止的国家/地区列表）每个标记为**“价格由UPS（已禁用）”。**如下所示：

![在此处输入图像描述](../Images/75fafd2ab6cfd82a7ca10deb0a58b240.png)

这是当您尝试通过结帐流程并在运输表单中输入一个被阻止的国家时弹出的消息：

![在此处输入图像描述](../Images/72ffffb5de16d72377b0720145ce6eec.png)

**我的问题：** 此消息的代码在哪里生成，所以我可以编辑它？我找不到任何包含消息中使用的单词或生成的 html 中使用的某些块的 id 的模板。这让我相信它可能是由 javascript 动态生成的，但所有 .js 文件似乎都是库（而不是 shopify js 函数）。我需要编辑“店主”的文本和链接以说出“客户支持”并链接到不同的页面。

任何帮助或见解将不胜感激。这是我第一次使用 Shopify 构建任何东西，所以如果这是一个愚蠢的问题，我提前道歉。

谢谢，

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:41:24.833

您无法更改结帐页面上的代码（Javascript/HTML/...），但您可以更改结帐语言。使用 Shopify 2，您可以在设置 > 结账 > 结账语言下更改此设置。

如果您创建自定义翻译，则可以翻译结帐中使用的所有消息。还有*“不幸的是，没有适用于您的目的地和/或您的购物车重量的运费。”* 信息。

另一种方法是仅添加您要运送的国家/地区。并且还删除了“世界其他地区”的国家。现在，您的结帐仅列出您要运送到的国家/地区。

# javascript - 如何使用不同的方法来检测 Javascript 中的按钮点击？

> ID：15375470
> 
> 赞同：0
> 
> 时间：2013-03-13T01:30:58.877
> 
> 标签：javascript, jquery, html, onclick

我开始编写一些 javascript 代码来检测按钮按下。我一直在谷歌搜索所有不同的方法。当他们中的一些人在我的代码中工作或不工作时，我被难住了。

这是一个有 4 个示例的[JS Fiddle](http://jsfiddle.net/fatfantasma/ez2SP/)。

有人可以解释为什么 #1 或 #4 不起作用吗？

这是html测试代码。

```
<input type ='button'  value = "Test Button 1" id="Test_Button1" >
<input type ='button'  value = "Test Button 2" id="Test_Button2" >
<input type ='button'  value = "Test Button 3" id="Test_Button3" >
<input type ='button'  value = "Test Button 4" id="Test_Button4" > 
```

这是javascript代码

```
$('Test_Button1').click (function() {
    alert("Test Button 1 worked");
});

$(document).on("click","#Test_Button2", function() {
        alert("Test Button 2 worked");
});

document.getElementById('Test_Button3').onclick = function() {
        alert("Test Button 3 worked");
};

$(document).ready (function () {
        $('Test_Button4').click (function() {
            alert("Test Button 4 worked");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:32:59.710

对于第一个，因为您将其称为`id`必须使用的元素`#`，所以

```
$('#Test_Button1').click(function() {
        alert("Test Button 1 worked");
}); 
```

最后一个也是一样的，你必须添加`#`.

[http://jsfiddle.net/ez2SP/1/](http://jsfiddle.net/ez2SP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:34:03.323

假设您的 $ 是 jQuery，那么您缺少 #1 和 #4 中的 # 符号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T01:35:49.707

#1 和 #4 寻找`<Test_Button4>`元素。要通过其属性获取元素`id`，您必须使用`#`：

```
#Test_Button4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T01:33:12.343

对于#1，你需要一个`#`：

```
$('#Test_Button1').click (function() {
    alert("Test Button 1 worked");
}); 
```

＃4相同：

```
$('#Test_Button4').click (function() {
    alert("Test Button 4 worked");
}); 
```

jQuery 使用 CSS 样式的选择器，这意味着如果您通过 id 选择项目，请使用`#`. 如果您按班级选择它，请使用`.`.

这里还有更多内容：http: [//www.w3schools.com/jquery/jquery_ref_selectors.asp](http://www.w3schools.com/jquery/jquery_ref_selectors.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T01:41:42.277

正如已经指出的那样，您的某些代码是错误的，但我认为这只是为了举例。您需要使用`$('#Test_Button1')`（注意添加`#`）来访问带有 id 的按钮`Test_Button1`。

从技术上讲，有几种方法可以对元素事件做出反应，并且有理由使用其中的大多数。

这段代码：

```
$(document).on("click","#Test_Button2", function() {
        alert("Test Button 2 worked");
}); 
```

...正在通过 jQuery使用事件委托（[读取）。](http://lab.distilldesign.com/event-delegation/)基本上，不是将事件侦听器添加到每个单独的元素，而是将其添加到父元素（在本例中为文档本身）。因为事件冒泡（[读取](http://www.quirksmode.org/js/events_order.html)和[读取](http://www.quirksmode.org/js/events_advanced.html)），所以当您单击按钮时，事件最终会触发委托侦听器。如果您要在页面上添加或更改内容（例如使用 AJAX），这将非常有用。添加到页面的新元素将触发您的事件，而无需单独处理它们，因为侦听器实际上已附加到文档。

包装器中的代码`document.ready`（它本身就是一个事件监听器）将在 DOM 准备就绪时触发[ [doc](http://api.jquery.com/ready/) ]。其他代码将在文档加载时执行。您可以将任何内容包装在一个`document.ready`块中，它不代表离散方法。

您展示的几个示例是相同的。您可以使用`on()`添加委托，也可以使用`click()`-- 后者是前者的别名。您还将`live()`在野外的代码中找到已被`on()`更新版本替换的代码。

`onclick`是 HTML 元素的一个属性，它与将事件右内联相同：`<button onclick="alert('do not do this');">Yay!</button>`.

有关添加事件侦听器与使用元素属性之间的区别的完整细分，请参阅此答案`onclick`：[addEventListener vs onclick](https://stackoverflow.com/questions/6348494/addeventlistener-vs-onclick/6348597#6348597)

**文档**

*   `jQuery.click`- [http://api.jquery.com/click/](http://api.jquery.com/click/)
*   `jQuery.ready`- [http://api.jquery.com/ready/](http://api.jquery.com/ready/)
*   `element.onclick`在 MDN - [https://developer.mozilla.org/en-US/docs/DOM/element.onclick](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)
*   *JavaScript 事件委托的工作原理 David Walsh* - [http://davidwalsh.name/event-delegate](http://davidwalsh.name/event-delegate)
*   *quirksmode 上的高级事件注册模型* [http://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)
*   *quirksmode 上的事件顺序* [http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

# ruby-on-rails - Rails 橡胶 - 未找到 cap 命令

> ID：15375472
> 
> 赞同：3
> 
> 时间：2013-03-13T01:31:53.033
> 
> 标签：ruby-on-rails, capistrano

我正在尝试使用 Rubber 将我的示例应用程序部署到 Amazon EC2。我也在关注 Rubber 的 railscasts 剧集。

到目前为止，我已经安装了 gem，运行了 vulcaznize 命令，并对 Rubber.yml 文件进行了修改。但是，当我尝试运行 Capistrano 命令（**cap Rubber:create_staging**）时，我得到**cap: command not found**错误。我尝试运行**rbenv rehash**命令，但它再次失败并给了我一个**rbenv: command not found。**

如果您知道如何解决此问题，我将不胜感激。如果你想知道，我在 Windows 7 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:22:30.393

通过在控制台中键入**gem install capistrano**手动安装 capistrano 解决了这个问题。我觉得这很奇怪，因为在安装橡胶时应该自动安装 capistrano。无论如何，它似乎已经解决了现在的问题。

# ruby - 使用 Sinatra 和 Rack Logger 记录时如何过滤敏感信息

> ID：15375477
> 
> 赞同：4
> 
> 时间：2013-03-13T01:32:15.070
> 
> 标签：ruby, logging, sinatra, rack

我维护一个充当 JSON API 服务的 Sinatra 应用程序。该 API 由另一个 Web 应用程序以及移动应用程序使用。

我想让 Rack::CommonLogger 从其日志中排除敏感信息，如密码。Rails 启用了此设置，但我没有找到有关如何在 Sinatra 中执行此操作的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:48:06.027

您可以尝试拦截调用以写入和过滤掉敏感消息，如下所示：

```
logger = Logger.new("my_common.log")
logger.instance_eval do
  def write(msg)
    self.send(:<<, msg) if !msg.match /SUPER SENSITIVE INFO HERE/
  end
end 
```

然后，配置 Rack::CommonLogger 以使用此记录器实例：

```
config.middleware.use Rack::CommonLogger, logger 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T06:41:03.273

Sinatra 登录到 STDERR，这是一个 IOm，但我们不想存储其他人的密码：

```
module NoTokenLogging
  def write(*args)
    args.first.sub!(/password=\S+/, "password=[FILTERED]")
    super
  end
end
IO.prepend NoTokenLogging 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T19:23:41.780

您也可以仅利用`ActiveSupport::ParameterFilter`.

[https://edgeapi.rubyonrails.org/classes/ActiveSupport/ParameterFilter.html](https://edgeapi.rubyonrails.org/classes/ActiveSupport/ParameterFilter.html)

# java - Java 中是否有集合支持的 ResultSet 实现？

> ID：15375479
> 
> 赞同：2
> 
> 时间：2013-03-13T01:32:37.307
> 
> 标签：java, jdbc

我将测试一个与 ResultSet 交互的类，但我不想实际点击数据库来执行此操作，我想要一个接受类型参数并使用 List 作为其备份数据来返回数据的 ResultSet 实现。它不需要拥有真实结果集的所有花里胡哨。只需要拥有`next()`，`getObject(int/String)`实施。有没有这样的东西已经存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:52:14.450

我自己创建了一个，请参考[ListBackedResultSet](https://gist.github.com/imgen/5243577)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:16:01.483

考虑 Spring 的 JdbcTemplate：

```
List<Map<String, Object>> queryForList(String sql); 
```

结果是 Maps 的列表（每行一个条目）（每列一个条目，使用列名作为键）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:34:47.350

在 Java 库中，有`javax.sql.rowset.CachedRowSet`相关的实现。它亚型`ResultSet`。（我还没有阅读文档。）

# openstack - Python 中是否有用于快速对象存储的 SQL API 包装器？

> ID：15375480
> 
> 赞同：0
> 
> 时间：2013-03-13T01:32:44.993
> 
> 标签：openstack, openstack-swift

我基于 OpenStack 的项目计划使用 swift 对象存储作为数据库。为了简化开发工作，我想知道 Python 中是否有任何用于快速对象存储的 SQL API 包装器。

如果没有 SQL 包装器，还有其他快速的帮助项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:29:02.507

您可以查看 python-swift 包，虽然它不是 SQL API 包装器。

[快速客户端文档](http://docs.openstack.org/developer/python-swiftclient/swiftclient.html#swiftclient.client.get_account)

[swiftclient api 文档](http://docs.openstack.org/developer/swift/index.html)

# r - “R”：将向量的所有元素放入一个元素中，无需“粘贴”

> ID：15375483
> 
> 赞同：-2
> 
> 时间：2013-03-13T01:33:11.587
> 
> 标签：r, vector, paste

例如，我有一个向量`test<-c("red","blue","green")`。我怎样才能将向量的元素合二为一，这样我就有了`test<-c("red/blue/green")`。

我知道我可以使用`paste(test[1],test[2],test[3], sep="/")`，但工作量太大，因为我的向量有数百个元素！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T01:35:01.720

您可以使用`collapse`参数`paste`

```
> paste(test , collapse ="/")
[1] "red/blue/green" 
```

# javascript - 将 div 滑动到屏幕顶部

> ID：15375489
> 
> 赞同：0
> 
> 时间：2013-03-13T01:33:37.230
> 
> 标签：javascript, jquery, jquery-animate

当有人在输入字段中按 Enter 时，我试图让 div 滑动到屏幕顶部。我遇到的问题是，不是 div 从屏幕顶部移动 50px，而是从它所在的 div 顶部移动 50px。

[http://jsfiddle.net/rtxu2/](http://jsfiddle.net/rtxu2/)

这是真正的代码：

的HTML

```
<div class="home-nav">
    <div style="display: none;position: absolute;margin-top: -1px" id="search-box">
        <form action="/" method="get"><input type="text" name="q" class="q" /></form>
    </div>
</div> 
```

JavaScript

```
 $(".q").keydown(function(e){
        if(e.keyCode == 13){
            var val = $(this).val();
            window.location = "#q="+val;
            $(".space").animate({
                width: "100px"
            }, "slow");
            $("#search-box").animate({
                top: "50px"
            }, "slow");
            return false;
        }
    }); 
```

CSS

```
div.home-nav{
    line-height: 4em;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 300px;
    height: 300px;
    margin: auto;
} 
```

我将内部 div 定位为绝对值的原因是，当您单击链接时，div/input 将覆盖链接以产生一点效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:37:27.390

如果您不希望 .sub 在动画时相对于 .main 定位，请不要将其放在 HTML 中的 .main 内。

[http://jsfiddle.net/rtxu2/10/](http://jsfiddle.net/rtxu2/10/)

```
<div class="main"></div>
<div class="sub">
    <form>
        <input type="text" />
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:36:46.803

如果您希望将 div 设置为相对于屏幕顶部而不是它所在的 div，请尝试将其设置为固定。

```
div.home-nav{
    line-height: 4em;
    position: fixed;
    top: 0;
    left: 300px;
    height: 300px;
    margin: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:57:51.907

好的，我明白了！我所做的是从 div 中删除元素并在有人按下 enter 时将其放置在 body 中。然后我去做动画。如果有人有更好的方法，请发表！

```
 $(".q").keydown(function(e){
        if(e.keyCode == 13){
            var val = $(this).val();
            var item = $(this).closest("#search-box");
            var left = item.offset().left;
            var top = item.offset().top;

            $(this).closest("#search-box").remove();
            item.css({
                top: top + "px",
                left: left + "px",
                zIndex: 100
            })
            $("body").prepend(item);

            window.location = "#q="+val;
            $(".space").animate({
                width: "100px"
            }, "slow");
            item.animate({
                top: "35px"
            }, "slow");
            return false;
        }
    }); 
```

# java - 为什么 Jar Bundler 在 Mac OS X Mountain Lion 10.8.2 中消失了

> ID：15375490
> 
> 赞同：14
> 
> 时间：2013-03-13T01:33:52.273
> 
> 标签：java, macos, bundle, jarbundler

过去有一个来自 Apple 的应用程序，[`Jar Bundler`](http://developer.apple.com/legacy/mac/library/#documentation/Java/Conceptual/Jar_Bundler/About/About.html#//apple_ref/doc/uid/TP40000884-CH202-BAJCICAA)它是由 Apple 与 Xcode 一起分发的。

目的是为 Java 应用 `Jar Bundler`程序创建 Mac OS X 应用程序包（目录）直到版本 6（1.6.x），以方便 Mac OS X 用户。​​​​​​​​​</p>`*.app`

到目前为止，您仍然可以获得

*   来自 Apple 的 JDK 1.6.0_43

又名

*   Java for OS X 2013-002 开发人员包 2013 年 3 月 4 日

对于当前的 Mac OS X Mountain Lion 10.8.2 通过

*   [https://developer.apple.com/downloads/index.action#](https://developer.apple.com/downloads/index.action#)

但你不能得到`Jar Bundler`。

我正在使用最新的**Mac OS X 10.8.2**和最新的**Xcode 4.6 (4H127)** ，并安装了所有*命令行工具*。经过我所做的所有研究，我希望在这里：

```
/usr/share/java/Tools/Jar Bundler.app 
```

但是没有`Jar Bundler`。就算是全局搜索`sudo find / -name Jar\ Bundler.app`也没有真正找到`Jar Bundler`。

所以我的问题是：最后一个已知的 Xcode 版本是什么`Jar Bundler`

注意：我知道还有其他方法可以实现`Jar Bundler`这里的操作，例如使用[Mac OS X JarBundler ANT Task](http://informagen.com/JarBundler/)或手动构建整个应用程序包，但这不是问题所在。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-13T22:22:31.327

所以看起来我必须自己回答这个问题。所以不要为此打我。

从 2012 年到现在（2013 年 3 月）经过深入研究并从 Apple 下载所有 Java 开发人员包后，事实证明它与 Xcode 无关。

`Jar Bundler`过去是通过 Apple 自己的 Java Developer Packages 出现的。在一个接一个地尝试它们并与[和平主义者](http://www.charlessoft.com/)一起检查它们之后，我发现了以下内容：

*   [Java for OS X 2012-005 Developer Package 从 2012-09-06](https://developer.apple.com/downloads/index.action#)是最后一个安装以下工具的工具：

    ```
    /usr/share/java/Tools/JavaVisualVM.app/
    /usr/share/java/Tools/Jar Bundler.app/
    /usr/share/java/Tools/Applet Launcher.app/ 
    ```

从...开始

*   [Java for OS X 2012-006 开发人员包，自 2012 年 10 月 16 日起](https://developer.apple.com/downloads/index.action#)

    ```
    /usr/share/java/Tools 
    ```

安装此软件包后目录被删除，但`/usr/share/java/Tools/*.app`同一个软件包不再重新安装新的 s。

即使在 2012-006 删除目录后重新安装`/usr/share/java/Tools`2012-005 也不会让您恢复`Jar Bundler.app`.

因此，在某些 Apple Java Developer Package 更新练习中丢失它后，唯一的方法是`Jar Bundler.app`您需要执行以下操作：

1.  获取[Pacifist](http://www.charlessoft.com/)或您选择的其他可以处理`*.pkg`文件的工具。
2.  用它打开 Java for OS X 2012-005 Developer Package。
3.  Ctrl-单击`JavaDeveloper.pkg\JavaTools.pkg\Jar Bundler.app`![Pacifist with Java for OS X 2012-005 Developer Package 从 2012-09-06](../Images/8820a49e6dded3fafe0c48e86c389aae.png)
4.  选择`Install to Default location`
5.  打开`Terminal.app`
6.  `open /usr/share/java/Tools/Jar\ Bundler.app/`

就是这样，不要忘记备份它。

要了解哪个 Apple 版本号属于哪个 JDK/JRE 版本号，请参见下文：

*   Java for OS X 2012-005 开发人员包，自 2012 年 9 月 6 日起

    ```
    $ java -version
    java version "1.6.0_35"
    Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-11M4203)
    Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01-428, mixed mode) 
    ```

*   Java for OS X 2012-006 开发人员包，自 2012 年 10 月 16 日起

    ```
    $ java -version
    java version "1.6.0_37"
    Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
    Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
    ```

*   适用于 OS X 的 Java 2013-001 开发人员包，自 2013 年 2 月 19 日起

    ```
    $ java -version
    java version "1.6.0_41"
    Java(TM) SE Runtime Environment (build 1.6.0_41-b02-445-11M4107)
    Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-445, mixed mode) 
    ```

*   Java for OS X 2013-002 开发人员包，自 2013-03-04

    ```
    $ java -version
    java version "1.6.0_43"
    Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)
    Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode) 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-25T11:35:56.993

JarBundler 的官方替代品是[javapackager](https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/packager.html)工具。

作为使用示例，这里有一个简单的、解释清楚的、从 java 源制作 OSX 应用程序的分步教程：http: [//centerkey.com/mac/java/](http://centerkey.com/mac/java/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T18:59:12.173

简而言之，如果您想要 Jar Bundler，请安装“OS X 2012-005 Developer Package”。最近的软件包已将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T08:36:41.510

Jar Bundler 现已退役，不适用于需要 Java 7 及更高版本的项目。查看其他[StackOverflow 问题«Bundle a Java 7 .jar for Mac»](https://stackoverflow.com/questions/12102716/bundle-a-java-7-jar-for-mac)了解更多详细信息。

这个问题中提到的解决方案很可能会继续起作用，但仅适用于 Java 6 之前的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-21T09:12:38.983

作为 Pyxis Software 的开发人员，我想补充一点，我们已经开发了一个名为 Pyxis Bundler 的小型廉价应用程序，它使创建 Mac 应用程序包变得非常容易。

我们将它设计为替代以前随 Xcode 提供的 Jar Bundler 应用程序。

要使用 Pyxis Jar Bundler，您至少需要三个项目：

1.  可运行的 jar 文件 (myApplicatin.jar)
2.  图标文件 (myIcon.icns)
3.  启动文件 (mySplashImage.png)

然后只需输入您的应用程序名称、版本号、ram 要求、您的包名称、主类名称和其他一些项目。接下来单击创建，就是这样，您的应用程序被捆绑到一个标准的 Mac 捆绑包中。

请注意，创建的任何应用程序都会保存到首选项文件中。这意味着捆绑更新只需从下拉列表中选择您的应用程序名称并增加版本号，然后单击“创建”按钮。

更多信息可[在此处](http://www.pyxis.ie/explore/index.php/software/pyxis-jar-bundler)获得。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-27T15:09:29.113

在 El Capitan 和 Java 9[`java packager`](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/javapackager.html)上，安装在这里：

“/库/Java/JavaVirtualMachines/jdk-9.xxjdk/Contents/Home/bin/javapackager”

做一个别名： `alias javapackager="/Library/Java/JavaVirtualMachines/jdk-9.x.x.jdk/Contents/Home/bin/javapackager"`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-11T12:16:21.507

只需这样做：

1.  右键单击安装 OS X Mountain Lion.app
2.  显示包裹内容
3.  进入 Contents/SharedSupport/ 并安装 InstallESD.dmg

现在你必须进入这个文件夹：Packages。您会找到 JavaEssential.pkg 和 JavaTools。Jar bundler 在 JavaTools.pkg 中。

# c# - 检查使用 bCrypt 加密的密码 .. 我需要通过网络发送密码吗？

> ID：15375494
> 
> 赞同：0
> 
> 时间：2013-03-13T01:34:18.087
> 
> 标签：c#, security, bcrypt, bcrypt.net

我目前正在考虑使用 bCrypt 来加密我项目中未来用户的密码。

它看起来非常强大，但这是我的担忧——

*   在网站上，创建一个帐户。服务器将 bCrypt 您的密码并存储其哈希值。`test`-->`$2a$12$4PhCN62AmALB7e.Sv2w9w.AP/JZ28l.dZldU5iHyupY2w5wPz9o.u`
*   现在要检查您的密码，您只需检查返回`BCrypt.Net.BCrypt.Verify("test", "$2a$12$4PhCN62AmALB7e.Sv2w9w.AP/JZ28l.dZldU5iHyupY2w5wPz9o.u")`以确保匹配。

在使用客户端应用程序与此网络服务器和相同数据一起工作的情况下，我是否需要通过网络发送密码以使服务器匹配其有效性？*让客户端请求*哈希，然后让服务器将其发送给客户端，这样客户端可以进行哈希并验证它是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:39:15.810

您可以使用 SSL（例如 https）防止明文密码通过网络发送。密码将是明文，但连接是安全的，只有服务器和客户端才能解码该连接中的信息。

# android - Android JET 文件格式是专有的，还是开放的？

> ID：15375496
> 
> 赞同：3
> 
> 时间：2013-03-13T01:34:22.843
> 
> 标签：android

我需要以编程方式为我的 Android 项目从头开始创建 JET 文件。文件格式是否公开可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:28:23.117

鉴于所有 JET/Sonivox 文件都在 Android 源代码中（包括较低级别的 C 文件），应该可以计算出格式。

[https://android.googlesource.com/platform/external/sonivox/](https://android.googlesource.com/platform/external/sonivox/)

环顾四周，该手册似乎仍在主要开发人员站点上，但工具（JetCreator）不再包含在 SDK 包中。

[http://developer.android.com/guide/topics/media/jet/jetcreator_manual.html](http://developer.android.com/guide/topics/media/jet/jetcreator_manual.html)

JetPlayer API 未标记为已弃用，因此即使很少使用它们仍然有效。如果您想获得原始工具，则必须从 AOSP 中提取它们：

[https://android.googlesource.com/platform/external/sonivox/+/android-4.2.2_r1/jet_tools/](https://android.googlesource.com/platform/external/sonivox/+/android-4.2.2_r1/jet_tools/)

意识到它们依赖于旧版本的 Python (2.5.4) 和 wxPython (2.8.7.1)。当有人在寻找 Linux 版本时，可能需要本线程中提到的本机库： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/1bMxim9dikU](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/1bMxim9dikU)

由于 OpenSL ES 1.0.1 已在 NDK 中的 API 9 (2.3) 中提供，因此与在 API 3 (1.5) 中引入 JET 时相比，开发人员现在拥有更多的音频选项。

# javascript - Javascript国际象棋符号转换函数

> ID：15375497
> 
> 赞同：9
> 
> 时间：2013-03-13T01:34:27.670
> 
> 标签：javascript, node.js, chess

我正在寻找一个 javascript 库来转换带有移动符号的 PGN 文件，包括片段和目的地，例如：

```
... 3\. cxd5 Qxd5 ... 
```

仅使用平方坐标进入符号，例如：

```
... 3\. c4-d5 h5-d5 ... 
```

如果没有图书馆，要使这个坚如磐石的工作将是一项相当大的工作，因为它必须逐步完成每一步，并验证合法的移动以确定哪个棋子可以到达目标方格。

javascript中有什么可以帮助我的，或者我可以轻松移植的另一种语言吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T01:07:46.960

前言：我不是真正的棋手，也不完全了解PGN。但是，我确实认为这是正确的。让我知道我是否完全离开。

既然你说你想做这个服务器端，我就找了 node.js 国际象棋包。[**从nodejs 模块**](https://nodejsmodules.org/tags/chess)中有一堆漂亮的候选人标记为 chess 。我最终使用了[**jhlywa** / chess.js](https://github.com/jhlywa/chess.js)。

应用程序.js

```
var cjs = require('./chess.js'),
  chess = new cjs.Chess(),
  pgn = ['[Event "Casual Game"]',
       '[Site "Berlin GER"]',
       '[Date "1852.??.??"]',
       '[EventDate "?"]',
       '[Round "?"]',
       '[Result "1-0"]',
       '[White "Adolf Anderssen"]',
       '[Black "Jean Dufresne"]',
       '[ECO "C52"]',
       '[WhiteElo "?"]',
       '[BlackElo "?"]',
       '[PlyCount "47"]',
       '',
       '1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bxb4 5.c3 Ba5 6.d4 exd4 7.O-O',
       'd3 8.Qb3 Qf6 9.e5 Qg6 10.Re1 Nge7 11.Ba3 b5 12.Qxb5 Rb8 13.Qa4',
       'Bb6 14.Nbd2 Bb7 15.Ne4 Qf5 16.Bxd3 Qh5 17.Nf6+ gxf6 18.exf6',
       'Rg8 19.Rad1 Qxf3 20.Rxe7+ Nxe7 21.Qxd7+ Kxd7 22.Bf5+ Ke8',
       '23.Bd7+ Kf8 24.Bxe7# 1-0'],
  i = 1,
  moveHistory;

chess.load_pgn(pgn.join('\n'));
moveHistory = chess.history({ verbose: true });

while (moveHistory.length > 0) {
  var p1Move = moveHistory.shift(),
    p2Move = moveHistory.shift(),
    p1c = p1Move.from + '-' + p1Move.to,
    p2c = (p2Move == undefined) ? '' : p2Move.from + '-' + p2Move.to;
  console.log(i + '. ' + p1c + ' ' + p2c );
  i++;
} 
```

console.log 的输出：

```
1\. e2-e4 e7-e5
2\. g1-f3 b8-c6
3\. f1-c4 f8-c5
4\. b2-b4 c5-b4
5\. c2-c3 b4-a5
6\. d2-d4 e5-d4
7\. e1-g1 d4-d3
8\. d1-b3 d8-f6
9\. e4-e5 f6-g6
10\. f1-e1 g8-e7
11\. c1-a3 b7-b5
12\. b3-b5 a8-b8
13\. b5-a4 a5-b6
14\. b1-d2 c8-b7
15\. d2-e4 g6-f5
16\. c4-d3 f5-h5
17\. e4-f6 g7-f6
18\. e5-f6 h8-g8
19\. a1-d1 h5-f3
20\. e1-e7 c6-e7
21\. a4-d7 e8-d7
22\. d3-f5 d7-e8
23\. f5-d7 e8-f8
24\. a3-e7 
```

# c# - C# HttpWebResponse contentlength = -1 当文件太大时

> ID：15375499
> 
> 赞同：3
> 
> 时间：2013-03-13T01:34:33.363
> 
> 标签：c#, httpwebrequest, httpwebresponse

我从烂番茄网站上得到一个 json 格式的字符串。我的代码看起来像

```
HttpWebRequest webRequest = (HttpWebRequest)HttpWebRequest.Create(url);
webRequest.Method = "GET";
webRequest.ContentType = "application/json";

HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();

using(StreamReader reader = new StreamReader(response.GetResponseStream()))
{
    //Code I'm using the reader with
} 
```

当我运行返回 1 - 4 部电影的电影搜索时，它工作正常。但是，如果我尝试获得 5 或更多的结果，它将不起作用。webResponse 内容长度为 -1。当我返回 4 部电影的结果时，内容长度为 7,449。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T01:39:15.337

当 contentLength 返回 -1 时，这很可能是因为响应是以[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)（或可能是 http“0.9”）返回的。因此，在传输开始时没有已知的内容长度。只需阅读您`StreamReader`的内容，您将获得服务器发送给您的所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T01:39:06.230

预期行为 - 属性返回服务器设置的内容长度，因此如果未设置该标头，您将获得 -1（这可能是从服务器流式传输的大文件的行为）。

[HttpWebResponse.ContentLength](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.contentlength.aspx)：

> 备注： ContentLength 属性包含随响应返回的 Content-Length 标头的值。如果响应中未设置 Content-Length 标头，则 ContentLength 设置为值 -1

# c++ - 如何使用 Ghostscript 自动安装 RedMon

> ID：15375504
> 
> 赞同：0
> 
> 时间：2013-03-13T01:34:54.577
> 
> 标签：c++, qt, batch-file, ghostscript, redmon

按照本文的步骤：http: [//mbmcclelland.blogspot.com.br/2012/11/creating-free-pdf-printer-in-windows-7.html](http://mbmcclelland.blogspot.com.br/2012/11/creating-free-pdf-printer-in-windows-7.html)，我成功安装了一个打印到PDF的虚拟打印机文件，但所有过程都是手动完成的。我想要一些方法来使用批处理文件或 Qt/c++ 自动安装该打印机，特别是执行文章的步骤 2 和 4（使用 Windows 驱动程序创建虚拟 PDF 打印机并配置您的虚拟 PDF 打印机以使用 Ghostscript）。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:16:46.917

您当然可以使用 C/C++ 程序，通过调用相关的 Windows API 例程（AddPrinter 和朋友，例如 AddPort、AddMonitor 等）来完成。我怀疑你可以用批处理文件来做，我不知道 Qt 是否足够强大。

# jquery - 定时 jquery / 返回顶部 html css 链接

> ID：15375508
> 
> 赞同：0
> 
> 时间：2013-03-13T01:35:29.150
> 
> 标签：jquery, html, css, hyperlink, timed

我正在尝试计时我的页面以跳转到我网站上的不同部分。例如，如果用户点击联系我们的链接，它会在页面下方跳转到联系部分（该页面是单页设计，菜单固定在左侧）。我想要一个“定时”方法，所以它会滚动而不是出现“跳转”。[我在 jquery 中在http://webdesignerwall.com/tutorials/animated-scroll-to-top](http://webdesignerwall.com/tutorials/animated-scroll-to-top)找到了一个示例，有没有人知道网站不同部分的更好教程，而不仅仅是回到顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:47:47.687

链接格式：`<a href="#IDofElementToScrollTo">Click This</a>`

目标元素：`<div id="IDofElementToScollTo"></div>`

```
$('a[href*=#]').click(function(e) {
    e.preventDefault();
    var target = $(this.hash);
    var elm = $(target).attr("id");
    var  loc = $(target).offset().top;
    $('body').animate({ scrollTop: loc}, 4000);
}); 
```

看到这个小提琴：http: [//jsfiddle.net/Mft3T/](http://jsfiddle.net/Mft3T/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:50:38.413

你可以在网上搜索 jquery 滚动到 div 你会得到这样的[结果](http://www.learningjquery.com/2007/10/improved-animated-scrolling-script-for-same-page-links)

[演示](http://css-tricks.com/examples/SmoothPageScroll/#two)_

您可以在一定时间后递归调用该函数（.delay()）并动态更改 div 名称。

# laravel - 在 Laravel 4 中添加依赖项后更新作曲家给了我错误

> ID：15375511
> 
> 赞同：1
> 
> 时间：2013-03-13T01:36:04.030
> 
> 标签：laravel, laravel-4, composer-php

`composer.json`在将新的依赖项添加到并运行后，我在全新安装 Laravel 4 时收到以下错误`composer update`。有任何想法吗？

```
[RuntimeException]
Source directory /var/www/projects/adcraft/vendor/laravel/framework has uncommitted changes. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-24T23:33:38.873

解决此问题的另一种方法是在 composer.json 文件的配置参数中设置丢弃更改，请参阅[https://getcomposer.org/doc/06-config.md#discard-changes](https://getcomposer.org/doc/06-config.md#discard-changes)。

```
{
  "name": "test",
  "description": "Demonstrating concepts",
...
  "config": {
    "process-timeout": 1800,
    "discard-changes" : true
  },
...
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:17:46.850

您可以进入该 vendor/laravel/framework 目录并运行`git status` 以查看有哪些更改。无论如何，如果您`self-update`将其作曲到其最新版本，它现在应该会提示您并询问您是否要在更新之前恢复这些更改而不是失败。

# d3.js - 如何区分 D3 树状图中的内部和叶（最终）节点

> ID：15375517
> 
> 赞同：0
> 
> 时间：2013-03-13T01:36:22.410
> 
> 标签：d3.js, hierarchical, hierarchical-clustering

我使用 D3.js 生成树状图，用户将在其中看到聚类的结果。但是，为了保持显示干净，我希望父节点尽可能简单（没有文字，没有圆圈）。

这是当前显示数据的方式：http: [//i.imgur.com/Cz52Fhl.png](http://i.imgur.com/Cz52Fhl.png)

这是我希望它显示的示例（方向无关紧要，重要的是内部节点没有文本或圆圈）：http: [//i.imgur.com/Oo2A0b7.png](http://i.imgur.com/Oo2A0b7.png)

编码...

```
// Compute the new tree layout.
      var nodes = tree.nodes(root).reverse(),
          links = tree.links(nodes);

      // Normalize for fixed-depth.
      nodes.forEach(function(d) { d.y = d.depth * 130; });

      // Update the nodes…
      var node = svg.selectAll("g.node")
          .data(nodes, function(d) { return d.id || (d.id = ++i); });

      // Enter any new nodes at the parent's previous position.
      var nodeEnter = node.enter().append("g")
          .attr("class", "node")
          .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
          .on("click", click);

      nodeEnter.append("circle")
          .attr("r", 1e-6)
          .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

      nodeEnter.append("text")
          .attr("x", function(d) { return d.children || d._children ? -10 : 10; })
          .attr("dy", ".35em")
          .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
          .text(function(d) { return d.canonical; })
          .style("fill-opacity", 1e-6); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T08:04:23.523

您是否希望能够在叶节点（最右边的那些）旁边添加标签，而任何中间节点都没有标签？

如果是，有一个活生生的例子：[http ://bl.ocks.org/widged/5150104](http://bl.ocks.org/widged/5150104)

节点是内部类型还是叶子类型由这部分代码定义

```
 .enter().append("svg:g")
        .attr("class", function(n) {
          if (n.children) {
            return "inner node"
          } else {
            return "leaf node"
          }
        }) 
```

然后

```
var endnodes =  vis.selectAll('g.leaf.node')
    .append("svg:text")
    ... skipping attributes ...
    .text(function(d) { return d.data.name; }); 
```

# ios - 通过对具有匹配 ID 号的对象进行分组来重建 NSArray？

> ID：15375528
> 
> 赞同：14
> 
> 时间：2013-03-13T01:37:40.297
> 
> 标签：ios, objective-c, nsmutablearray, nsarray

我有一个 NSArray，数组中的每个对象都有一个 groupId 和一个名称。每个对象都是唯一的，但有许多具有相同的 groupId。有没有办法可以将数组拆开并重建它，以便将名称分组到具有相应 groubId 的单个对象中？这是数组当前的样子：

```
2013-03-12 20:50:05.572 appName[4102:702] the  array:  (
        {
        groupId = 1;
        name = "Dan";
    },
        {
        groupId = 1;
        name = "Matt";
    },
        {
        groupId = 2;
        name = "Steve";
    },
        {
        groupId = 2;
        name = "Mike";
    },
        {
        groupId = 3;
        name = "John";

    },
        {
        groupId = 4;
        name = "Kevin";
    }
) 
```

这就是我希望它看起来的样子：

```
2013-03-12 20:50:05.572 appName[4102:702] the  array:  (
        {
        groupId = 1;
        name1 = "Dan";
        name2 = "Matt";
    },
        {
        groupId = 2;
        name1 = "Steve";
        name2 = "Mike";
    },
        {
        groupId = 3;
        name = "John";

    },
        {
        groupId = 4;
        name = "Kevin";
    }
) 
```

编辑：我已经尝试过很多次但都失败了，大部分都是这样的（草率的娱乐，但给出一个想法）：

```
int idNum = 0;
for (NSDictionary *arrObj in tempArr){
    NSString *check1 = [NSString stringWithFormat:@"%@",[arrObj valueForKey:@"groupId"]];
    NSString *check2 = [NSString stringWithFormat:@"%@",[[newDict valueForKey:@"groupId"]];
    if (check1 == check2){
        NSString *nameStr = [NSString stringWithFormat:@"name_%d",idNum];
        [newDict setValue:[arrObj valueForKey:@"name"] forKey:nameStr];
    }
    else {
        [newDict setValue:arrObj forKey:@"object"];
    }
    idNum++;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-13T02:02:00.333

```
NSArray *array = @[@{@"groupId" : @"1", @"name" : @"matt"},
                   @{@"groupId" : @"2", @"name" : @"john"},
                   @{@"groupId" : @"3", @"name" : @"steve"},
                   @{@"groupId" : @"4", @"name" : @"alice"},
                   @{@"groupId" : @"1", @"name" : @"bill"},
                   @{@"groupId" : @"2", @"name" : @"bob"},
                   @{@"groupId" : @"3", @"name" : @"jack"},
                   @{@"groupId" : @"4", @"name" : @"dan"},
                   @{@"groupId" : @"1", @"name" : @"kevin"},
                   @{@"groupId" : @"2", @"name" : @"mike"},
                   @{@"groupId" : @"3", @"name" : @"daniel"},
                   ];

NSMutableArray *resultArray = [NSMutableArray new];
NSArray *groups = [array valueForKeyPath:@"@distinctUnionOfObjects.groupId"];
for (NSString *groupId in groups)
{
    NSMutableDictionary *entry = [NSMutableDictionary new];
    [entry setObject:groupId forKey:@"groupId"];

    NSArray *groupNames = [array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"groupId = %@", groupId]];
    for (int i = 0; i < groupNames.count; i++)
    {
        NSString *name = [[groupNames objectAtIndex:i] objectForKey:@"name"];
        [entry setObject:name forKey:[NSString stringWithFormat:@"name%d", i + 1]];
    }
    [resultArray addObject:entry];
}

NSLog(@"%@", resultArray); 
```

输出：

```
 (
        {
        groupId = 3;
        name1 = steve;
        name2 = jack;
        name3 = daniel;
    },
        {
        groupId = 4;
        name1 = alice;
        name2 = dan;
    },
        {
        groupId = 1;
        name1 = matt;
        name2 = bill;
        name3 = kevin;
    },
        {
        groupId = 2;
        name1 = john;
        name2 = bob;
        name3 = mike;
    }
 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T01:47:35.690

这需要 NSArrays 的 NSDictionary。没有快速而优雅的方式 - 您必须滚动浏览源代码。

```
NSMutableDictionary *d = [NSMutableDictionary dictionaryWithCapacity:10]; //Or use alloc/init
for(SomeObject o in appname) //What's the type of objects? you tell me
{
    NSObject *ID = [o objectForKey: @"groupId"];
    NSMutableArray *a = [d objectForKey: ID];
    if(a == nil)
    {
        a = [NSMutableArray arrayWithCapacity: 10];
        [d setObject:a forKey: ID];
    }
    [a addObject: [o objectForKey: @"name"]];
} 
```

编辑：编辑为不假定密钥的数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-06T23:48:10.667

这类似于 Seva 的答案，但可以将其添加为 NSArray 上的类别方法：

```
/// @return A dictionary of NSMutableArrays
- (NSDictionary *)abc_groupIntoDictionary:(id<NSCopying>(^)(id object))keyFromObjectCallback {
    NSParameterAssert(keyFromObjectCallback);
    NSMutableDictionary *result = [NSMutableDictionary dictionary];
    for (id object in self) {
        id<NSCopying> key = keyFromObjectCallback(object);
        NSMutableArray *array = [result objectForKey:key];
        if (array == nil) {
            array = [NSMutableArray new];
            [result setObject:array forKey:key];
        }
        [array addObject:object];
    }
    return [result copy];
} 
```

你可以像这样使用它：

```
NSDictionary *groups = [people abc_groupIntoDictionary:^id<NSCopying>(NSDictionary *person) {
    return person[@"groupId"];
}]; 
```

这与原始答案不完全相同，因为它将人员字典保留为数组中的值，但是您可以从中读取 name 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-27T08:24:40.230

为我的菜鸟们迅速实施 Sergery 的回答。

```
class People: NSObject {
    var groupId: String
    var name : String
    init(groupId: String, name: String){
        self.groupId = groupId
        self.name = name
    }
}

let matt = People(groupId: "1", name: "matt")
let john = People(groupId: "2", name: "john")
let steve = People(groupId: "3", name: "steve")
let alice = People(groupId: "4", name: "alice")
let bill = People(groupId: "1", name: "bill")
let bob = People(groupId: "2", name: "bob")
let jack = People(groupId: "3", name: "jack")
let dan = People(groupId: "4", name: "dan")
let kevin = People(groupId: "1", name: "kevin")
let mike = People(groupId: "2", name: "mike")
let daniel = People(groupId: "3", name: "daniel")

let arrayOfPeople = NSArray(objects: matt, john, steve, alice, bill, bob, jack, dan, kevin, mike, daniel)

var resultArray = NSMutableArray()
let groups = arrayOfPeople.valueForKeyPath("@distinctUnionOfObjects.groupId") as [String]

for groupId in groups {
    var entry = NSMutableDictionary()
    entry.setObject(groupId, forKey: "groupId")
    let predicate = NSPredicate(format: "groupId = %@", argumentArray: [groupId])
    var groupNames = arrayOfPeople.filteredArrayUsingPredicate(predicate)
    for i in 0..<groupNames.count {
        let people = groupNames[i] as People
        let name = people.name
        entry.setObject(name, forKey: ("name\(i)"))
    }
    resultArray.addObject(entry)
}

println(resultArray) 
```

注意 valueForKeyPath 中的 @ 符号。这让我有点绊倒:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-20T05:01:18.543

下面的代码将通过将该数组中每个字典中的任何匹配键对对象进行分组来重建 NSArray

```
//only to a take unique keys. (key order should be maintained)
NSMutableArray *aMutableArray = [[NSMutableArray alloc]init];

NSMutableDictionary *dictFromArray = [NSMutableDictionary dictionary];

for (NSDictionary *eachDict in arrOriginal) {
  //Collecting all unique key in order of initial array
  NSString *eachKey = [eachDict objectForKey:@"roomType"];
  if (![aMutableArray containsObject:eachKey]) {
   [aMutableArray addObject:eachKey];
  }

  NSMutableArray *tmp = [grouped objectForKey:key];
  tmp  = [dictFromArray objectForKey:eachKey];

 if (!tmp) {
    tmp = [NSMutableArray array];
    [dictFromArray setObject:tmp forKey:eachKey];
 }
[tmp addObject:eachDict];

}

//NSLog(@"dictFromArray %@",dictFromArray);
//NSLog(@"Unique Keys :: %@",aMutableArray); 
```

//**再次从字典转换为数组...**

```
self.finalArray = [[NSMutableArray alloc]init];
for (NSString *uniqueKey in aMutableArray) {
   NSDictionary *aUniqueKeyDict = @{@"groupKey":uniqueKey,@"featureValues":[dictFromArray objectForKey:uniqueKey]};
   [self.finalArray addObject:aUniqueKeyDict];
} 
```

希望它可以帮助..

# css - Safari中的过渡填充错误？

> ID：15375534
> 
> 赞同：0
> 
> 时间：2013-03-13T01:38:34.003
> 
> 标签：css, css-transitions, safari

我创建了一个小标题选项卡，在悬停时它的填充向右过渡超过 1 秒。我已经在 Chrome、Opera、IE10 和 FF 中对其进行了测试，它按预期工作。奇怪的是，在 Safari 中它根本没有接受过渡。事实上，它也会在悬停时将元素向右移动 1px。我没有遇到任何这样的具体案例，所以不确定它是已知的错误还是我的疏忽。这是代码：

HTML

`<h2 class="screen-button about-button">About</h2>`

CSS

```
.screen-button {
    border-radius: 0 0 14px 14px;
    float: left;
    font-size: 2em;
    margin: 0;
    padding: .3em .5em .4em;
    position: relative;
    top: 0;
    left: 0;
    -webkit-transition: padding-right 1s ease-in-out;
    -moz-transition: padding-right 1s ease-in-out;
    -o-transition: padding-right 1s ease-in-out;
    -ms-transition: padding-right 1s ease-in-out;
    transition: padding-right 1s ease-in-out;
}

.screen-button:hover {
    padding-right: 91%;
}

.about-button {
    background: rgb(69,237,248);
    background: rgba(69,237,248, .8);
} 
```

这是小提琴：http: [//jsfiddle.net/julsfelic/m429p/1/](http://jsfiddle.net/julsfelic/m429p/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:01:51.293

问题是您想要在 Safari 中进行动画制作`em`不起作用`%`。尝试使用相同的单位为正常状态和悬停状态设置填充。至少填充权（例如：）`padding: .3em 3% .4em`。

# java - Java 生态系统的 Go 等价物

> ID：15375535
> 
> 赞同：2
> 
> 时间：2013-03-13T01:38:36.157
> 
> 标签：java, go

我正在尝试开始将 Go (golang) 用于一个项目并且来自 java 背景，我很好奇 Go 生态系统中是否有以下等价物：

1.  IDE（看起来 Eclipse 和 IDEA 都有 Go 插件）。当我最后一次查看时，Eclipse Go 插件并没有 Java 插件那么精致。
2.  是否有用于依赖管理的 Maven 等效项？
3.  Jenkins/Luntbuild 等价于持续集成？
4.  有像 Guava 这样的知名图书馆吗？

还有其他提示/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:24:14.207

1.  Sublime Text 2 or Vim

2.  Go dependencies are determined by your import statements which means whatever your code imports is what it depends on

3.  Travis CI

4.  you can refer to the [golang homepage](http://golang.org/doc/)

# ruby-on-rails - Ruby 2.0/Rails 4.0.0beta 升级在推送到 heroku 时失败

> ID：15375537
> 
> 赞同：9
> 
> 时间：2013-03-13T01:38:41.290
> 
> 标签：ruby-on-rails, ruby, heroku, ruby-on-rails-4, ruby-2.0

大脑转储，因为我的谷歌搜索和在电脑上猛烈撞击我的脑袋。任何帮助或线索将不胜感激！

我通过 rvm 管理我的宝石。

```
$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.2.0]

$ rails -v
Rails 4.0.0.beta1 
```

然后当我想从头开始创建一个全新的应用程序时

```
$ rails new brand_new_app
 create  
  create  README.rdoc
  ...
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.

$ cd brand_new_app 
```

然后我初始化一个 git repo，添加我刚刚创建的应用程序。然后我创建一个heroku实例

```
brand_new_app $ heroku create
    Git remote heroku added 
```

然后我尝试部署到 heroku，但它在活动支持 gem 上失败了。

```
brand_new_app $ git push heroku master
    Counting objects: 62, done.
    Delta compression using up to 4 threads.
    Compressing objects: 100% (50/50), done.
    Writing objects: 100% (62/62), 20.54 KiB, done.
    Total 62 (delta 2), reused 0 (delta 0)

    -----> Ruby/Rails app detected
    -----> Installing dependencies using Bundler version 1.3.2
   Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
   Fetching gem metadata from https://rubygems.org/.........
   Fetching gem metadata from https://rubygems.org/..
   Installing rake (10.0.3)
   Installing i18n (0.6.4)
   Installing minitest (4.6.2)
   Installing multi_json (1.6.1)
   Installing atomic (1.0.1)
   Installing thread_safe (0.1.0)
   Installing tzinfo (0.3.37)
   Installing activesupport (4.0.0.beta1)
   Gem::InstallError: activesupport requires Ruby version >= 1.9.3.
   An error occurred while installing activesupport (4.0.0.beta1), and Bundler
   cannot continue.
   Make sure that `gem install activesupport -v '4.0.0.beta1'` succeeds before
   bundling.
     !
     !     Failed to install gems via Bundler.
     !
     !     Heroku push rejected, failed to compile Ruby/rails app 
```

我已经内爆了 rvm（我知道为什么，主要是因为我很沮丧）并且我已经检查了所有可能的地方。我在没有任何特殊设置的情况下创建了 rails 应用程序，它只是一个正常的安装。如果有人有任何提示可以引导我走向正确的方向，请按我的方式发送！我很感激你读到这里！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T12:28:37.673

你应该在你的 Gemfile 中加入一个 ruby​​ 行，就像 heroku 文档中解释的那样。

只需在您的 Gemfile 中添加`ruby "2.0.0"`下面的行。`source "https://rubygems.org"`

[https://blog.heroku.com/archives/2012/11/5/ruby-2-preview-on-heroku](https://blog.heroku.com/archives/2012/11/5/ruby-2-preview-on-heroku)

我已经尝试过了，这适用于heroku。显然 Rails 4 与不同的 ruby​​ 版本不兼容。这有点奇怪，因为他们在这里说：

> Ruby 2.0 是与 Rails 4.0 一起使用的首选 Ruby。

[http://weblog.rubyonrails.org/2013/2/25/Rails-4-0-beta1/](http://weblog.rubyonrails.org/2013/2/25/Rails-4-0-beta1/)

显然首选，意味着需要。

希望这可以帮助

# compilation - Pig 0.11 编译速度慢吗？

> ID：15375543
> 
> 赞同：1
> 
> 时间：2013-03-13T01:39:19.050
> 
> 标签：compilation, apache-pig

有没有人觉得在 Pig 0.11 上运行脚本很慢？我已经在猪 0.11 和猪 0.8 的相同环境中运行脚本。Pig 0.8 总是更快。

注释 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:02:51.313

会不会是因为你的`LOAD`语句`USING PigStorage()`匹配了很多文件？`PigStorage()`默认情况下，Pig 0.11 会检查 HDFS 上的模式文件以查找匹配的文件。如果您正在阅读大量文件，这可能会使其非常慢。

使用`x = LOAD '...' USING PigStorage('...','-noschema')`. 使用**-noschema**将避免查找模式文件，您应该恢复速度。

更多信息[在这里](http://hadoopified.wordpress.com/2012/04/22/pigstorage-options-schema-and-source-tagging/)。

# javascript - 我怎样才能稳健地检测 node.js 中的相对路径

> ID：15375544
> 
> 赞同：5
> 
> 时间：2013-03-13T01:39:31.140
> 
> 标签：javascript, node.js

也许我很难（我应该只寻找`./`and的前缀`../`）但我不想重新发明轮子并编写一个函数来正确检测相对路径（对于所有平台等）

## 现有图书馆？

有没有`npm`这样做的包？果然这个问题已经解决了……

## 方法？

除了现有的库之外，我的预期方法是使用`path`模块函数到`join`已知前缀的可能相对路径，然后看看结果是什么，假设`path.join('some_base', possiblyRelative)`允许以平台安全的方式实现某种区分特征。

还有其他建议吗？方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-08T07:43:24.330

UPDATE2：TomDotTom 在这里找到了更可靠的答案：[How to check if a path is absolute or relative](https://stackoverflow.com/questions/21698906/how-to-check-if-a-path-is-absolute-or-relative/30714706#30714706)

在这里转载（但反过来）：

```
var path = require('path');
function isRelative(p) {
  return path.normalize(p + '/') !== path.normalize(path.resolve(p) + '/');
} 
```

对于节点 v0.12 及更高版本，我建议`path.isAbsolute`改为。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-26T05:58:12.587

这有点晚了，但对于其他搜索同一问题的人来说：

从节点版本 0.12.0 开始，您就拥有了模块中的[`path.isAbsolute(path)`](https://nodejs.org/api/path.html#path_path_isabsolute_path) 功能。`path`要检测您的路径是否是相对的，请使用它的否定：

IE：

```
var path = require('path');
if( ! path.isAbsolute(myPath)) {
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T18:59:36.397

```
function isRelative(str)
{
    //Remove quotes as it can potentially mess up the string
    str=str.replace("\'\"",'');
    return str.substring(0,2)=="./"||str.substring(0,3)=="../"; 
} 
```

在这个例子中，我们只允许相对字符串作为字符串路径的开头

# android - 跳过一系列活动中的一项活动（包括 Facebook 活动）

> ID：15375546
> 
> 赞同：0
> 
> 时间：2013-03-13T01:39:33.430
> 
> 标签：android, facebook, facebook-android-sdk

我正在使用 Action Bar Sherlock 库创建一个 android 应用程序。我的操作栏有 3 个选项卡，其中一个选项卡需要用户通过 Facebook 登录。此登录过程中当前有三个活动：

第 1 步 - 用户单击操作栏选项卡之一中的图像按钮 (Facebook)，这称为 facebook 登录活动。

第 2 步 - Facebook 登录活动显示 Facebook 网络视图，将用户详细信息存储在共享首选项中，然后调用最终活动

第 3 步 - 最终活动显示属于该用户的数据，并且用户可以从该活动中注销。

问题：

返回时是否可以跳过活动，即如果用户在最后一步（3）中按下后退按钮，他们会返回第 1 步。所以当用户成功登录时，基本上第 2 步不在序列中在。

除此之外，如果用户已成功登录，是否可以跳过第 1 步 - 第 3 步？

我曾想过在第 3 步中覆盖后退按钮，但我想对此有一些具体的想法，因为我还是 android 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:45:21.230

在您的 xml 中，只需将此行添加到 Activity2

```
android:noHistory="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:16:22.783

如果是这种情况，那么我肯定会覆盖 onBackPressed 方法，或者您可以尝试 Hoan nguyen 的解决方案。

如果用户已成功登录，则您可以在共享首选项中检查访问令牌（如果您已存储成功登录。您可以在注销时删除令牌。）如果找到，您可以重定向到第 3 步，否则第2步。

# php - 如何从父类PHP调用子类函数

> ID：15375549
> 
> 赞同：-1
> 
> 时间：2013-03-13T01:39:51.863
> 
> 标签：php, class

我想开发私有框架，以便将来使用 PHP 构建我的应用程序。我的示例代码是：

```
class system {
    const token = "1234";
}

class data extends system {
    public $driver = "mysql";

    function get_name() {
        if (parent::token == "1234") {
            return "John";
        }
    }
}

class about extends system {
    public $version = "10.1";
    function get_build() {
        if (parent::token == "1234") {
            return "920";
        }
    }
} 
```

我的问题是我可以调用包含类结构的子函数。我不知道这个的确切名称是什么。我想是这样的。

```
$system = new system();

echo $system->data->driver; // Output "mysql"
echo $system->data->get_name(); // Output "John"
echo $system->about->version; // Output "10.1" 
```

在 LUA 中，代码是这样的：

```
system = {};

system.token = "1234";
system.data.driver = "mysql";

function system.data.get_name()
    if (system.token == "1234") then
        return "John";
    end
end

system.about.version = "10.1";

function system.about.get_build()
    if (system.token == "1234") then
        return "920";
    end
end 
```

用法：

```
name = system.data.get_name() -- variable "name" value will be "John" 
```

谢谢。

编辑：

该代码只是显示我想要实现的目标的示例，因为我刚刚开始使用 PHP。通常我正在使用LUA。我的计划是构建易于使用且易于理解的框架。因此，人们将获得构建应用程序的简单方法，并且他们可以轻松记住函数引用。例如：

`$tbl_result = $system->data->select("name", "table", "id='10'");`

此代码用于轻松从数据库中选择数据而无需查询。返回值为数组列表。此功能还可以从配置中自动检测数据库驱动程序。因此用户无需了解特定驱动程序中的 SQL 查询。但是调用函数的方法应该是结构化的。为什么我必须使用系统->数据->功能？因为我将以 root 身份拥有系统、组件和模块。然后每个根都会有很多孩子。例如，系统将有核心、数据、模型等。可能在每个根中都有相同的子名称。所以这就是我必须建立这个结构的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:01:07.100

我看不出数据类和关于类应该从系统类扩展的任何理由。您可以改为执行以下操作。

```
class data {
    public $driver = 'mysql';
    public $token;
    function __construct($token)
    {
        $this->token = $token;
    }
    function get_name() {
        if ($this->token == "1234") {
            return "John";
        }
    }
}

class about {
    public $version = "10.1";
    public $token;
    function __construct($token)
    {
        $this->token = $token;
    }
    function get_build() {
        if ($this->token == "1234") {
            return "920";
        }
    }
}

class system {
    public $token;
    public $about;
    public $data;

    function __construct($token)
    {
        $this->token = $token;
        $this->about = new about($this->token);
        $this->data = new data($this->token);
    }   
} 
```

然后你可以做这样的事情。

```
$system = new system('1234');
echo $system->data->driver; // Output "mysql"
echo $system->data->get_name(); // Output "John"
echo $system->about->version; // Output "10.1" 
```

我只是表明这是做你想要实现的目标的一种方式。但是，在对它进行任何操作之前，我会重新考虑您的框架的设计和结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:44:15.073

这不完全是 OOP 在 PHP 中的工作方式，也不是 OOP 的一般用途。

如果你想访问子类的所有子函数，你不想实例化一个系统对象，你想实例化一个 about 对象：

```
$system = new about();
echo $system->driver; // Output "mysql"
echo $system->get_name(); // Output "John"
echo $system->version; // Output "10.1" 
```

不过，我会阅读一些关于 PHP OOP 的内容。

# java - 实例化工厂的对象的名称是什么？

> ID：15375558
> 
> 赞同：0
> 
> 时间：2013-03-13T01:40:26.373
> 
> 标签：java, factory

我正在生成预定义工厂的实例。假设我正在生成的对象是 AppleFactory。AppleFactoryFactory 看起来很糟糕。这种对象的常见方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:13:28.133

抽象工厂。

你可以在其中生成任何你想要的工厂

# android - 带有edittext的DialogFragment在关闭后不会丢失键盘

> ID：15375559
> 
> 赞同：3
> 
> 时间：2013-03-13T01:40:35.297
> 
> 标签：android, focus, android-edittext, android-softkeyboard, dialogfragment

我有一个带有单个 EditText 且没有按钮的自定义 DialogFragment。在将文本输入编辑文本并按“完成”后，即使对话框已关闭，键盘仍会在返回主机活动时保持可见。它更改为数字键盘，因为它关注的主机活动中的字段只是一个数字输入`edittext`- 但它也可能关注一个带有普通文本输入的edittext字段（因此仍然是普通键盘），具体取决于我离开的位置启动对话框片段后的光标。

我已经尝试了我能找到的一切（谷歌搜索和stackoverflowed了很多）。

我基于[这段](http://android-developers.blogspot.co.uk/2012/05/using-dialogfragments.html)代码的对话片段 - 它非常相似。

[问题与此](https://stackoverflow.com/questions/12997273/alertdialog-with-edittext-open-soft-keyboard-automatically-with-focus-on-editte)非常相似，我认为原因可能相似，但我的 DialogFragment 中没有按钮，因此我无法遵循该解决方案，尽管我认为这并不重要，但我可以足够密切地遵循它。

我已经尝试`inputmethodmanager`按照那里和[这里](https://stackoverflow.com/questions/12997273/alertdialog-with-edittext-open-soft-keyboard-automatically-with-focus-on-editte)的建议在接口方法（在主机活动中实现）和 DialogFragment 类中使用来`onCreateView`关闭`onEditorAction`键盘`onDismiss`。还在DialogFragment 类方法中尝试`getDialog().getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);`（也使用）。`SOFT_INPUT_STATE_HIDDEN`在所有 DF 类方法中也尝试`mEditText.clearFocus();`过，但无济于事。

任何人都可以提供帮助吗？是与我所基于[的大卫钱德勒的代码](http://android-developers.blogspot.co.uk/2012/05/using-dialogfragments.html)有关，还是与我做错了什么有关。非常感谢所有帮助。

我在下面包括我的 DF 类，以防有人想看。

```
public class SetText extends DialogFragment {

public interface SetTextBoxDialogListener{
    void onFinishEnteringName(String name);
}

private EditText mEditText;

//Empty constructor req'd for dialogfragment.
public SetText(){

}

//Build view
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle saveInstanceState) {
    View view = inflater.inflate(R.layout.activity_set_the_text, container);
    mEditText =  (EditText) view.findViewById(R.id.nameText);
    getDialog().setTitle("Enter Name");

    //removing these 2 lines of code has no effect
    mEditText.requestFocus();
    getDialog().getWindow().setSoftInputMode(LayoutParams.VISIBLE);

    mEditText.setOnEditorActionListener(new OnEditorActionListener() {
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (EditorInfo.IME_ACTION_DONE==actionId){
                //return text to activity
                SetEnterNameDialogListener activity = (SetEnterNameDialogListener) getActivity();
                activity.onFinishEnteringName(mEditText.getText().toString());

                dismiss();
                return true;
            }
            //code for 2 lines below had now effect, even placed above dismiss
            InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(mEditText.getWindowToken(), 0);

        return false;
    }
});

return view;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:23:14.790

在您从 DialogFragment 返回的清单中的主机活动标记中，使用以下内容

```
android:windowSoftInputMode="stateHidden" 
```

# php - 调用索引操作时Cakephp白屏

> ID：15375562
> 
> 赞同：0
> 
> 时间：2013-03-13T01:40:43.320
> 
> 标签：php, cakephp, cakephp-2.1

我正在部署一个在 localhost 中运行良好的 CakePhp 项目，但是在生产中，当我调用任何控制器的任何索引操作时，我都会出现白屏。调试级别为 3，没有 cake php 错误日志，没有 httpd 错误日志，没有 php 错误日志。没有什么可以用日志调试的。

权限正常，缓存文件夹为空，mod_rewrite 正常，文件末尾的空格被删除...

我可以调用登录操作，但登录失败。我正在使用 print_r 和 echo 进行调试，然后我发现 CakePhp 无法初始化会话，session_id 为空。方法 setFlash 不起作用。也没有登录失败的闪烁消息。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:24:08.257

我的应用程序也遇到了同样的问题。

检查这个：

1.）在您的**控制器**`<?php`内部，检查标签（**BOM** ）之前是否有任何内容。我一直在检查**vim**。

2.) 检查您的`tmp`文件夹是否可写。( `chmod -R 777 app/tmp`)

3.) 检查您的服务器上是否安装了 PHP 的更新版本。

也许你应该先检查 2.)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T23:29:31.877

我解决了这个问题！这是一个文件编码问题！在我的 localhost 项目**中，UTF-8**工作正常（带有 Wamp 的 Windows 7），但在 linux CentOS 服务器上，UTF-8 不起作用，我必须将所有文件保存为“ **ANSI as UTF-8** ”（没有 BOM）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:27:50.260

您是否尝试过使用不同的方法来存储会话？

Cake 默认使用 fileEngine，但如果权限被搞砸或写入文件时出错，您可以通过 mySQL 存储会话。

我认为有一个字段可以将会话设置为 MEMORY 或 DATABASE，而不是 FileEngine。

# java - 格式化字符串数组以反转字符串

> ID：15375563
> 
> 赞同：2
> 
> 时间：2013-03-13T01:40:44.327
> 
> 标签：java, string, arrays

我想知道是否可以反转我的输出，以便以相反的顺序（正确）写入字符串？

所以我使用下面的代码来分割一个字符串：

```
String[] capitalArray = revCapitalList.split("\\^");
    for (String u: capitalArray) {
        System.out.println(u);
    } 
```

这是我要拆分的字符串：

```
String revCapitalList = "yremogtnom^uaenuj^xineohp^kcor elttil^otnemarcas^revned^droftrah^revod^eessahallat^"
            + "atnalta^ululonoh^esiob^dleifgnirps^silopanaidni^seniom sed^akepot^trofknarf^eguor notab^"
            + "atsugua^silopanna^notsob^gnisnal^luap .ts^noskcaj^ytic nosreffej^aneleh^nlocnil^ytic nosrac^"
            + "drocnoc^notnert^ef atnas^ynabla^hgielar^kcramsib^submuloc^ytic amohalko^melas^grubsirrah^"
            + "ecnedivorp^aibmuloc^erreip^ellivhsan^nitsua^ytic ekal tlas^reileptnom^dnomhcir^aipmylo^notselrahc^nosidam^enneyehc"; 
```

输出：

*   yremogtnom
*   瓦埃努伊
*   新能源
*   ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:47:08.563

你想反转输出还是反转字符串本身？

如果只是输出，那么

```
for (String u: capitalArray) 
{
    System.out.println(new StringBuffer(u).reverse().toString());
} 
```

# azure - Azure SQL 防火墙数据库错误和联系技术支持

> ID：15375564
> 
> 赞同：0
> 
> 时间：2013-03-13T01:40:50.187
> 
> 标签：azure, azure-sql-database

据我了解，当您管理 ips 并启用 Windows azure 服务时，它应该可以与所有开箱即用的 azure 服务一起使用。目前情况并非如此。您实际上必须允许您的云应用程序的 ip 联系该服务。

我尝试联系技术支持，却发现您现在必须付费才能联系他们！什么？！SO 似乎是唯一谈论 Azure 的其他地方。

这是怎么回事？我在这里错过了什么吗？这不只是糟糕的客户服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:42:03.443

这实际上偶尔会发生一次。Azure 伙计添加了另一个 IP 地址范围以用作云服务虚拟 IP 地址，但 SQL Azure 伙计没有添加该范围以根据启用的“Windows Azure 服务”复选标记进行处理。我记得这件事发生在我们身上两次。

这应该刚刚奏效。设置复选标记后，所有 Web 角色都应该能够连接到 SQL Azure。所以你是正确的期望这应该工作。

解决方法如下。您知道您的云服务部署的 VIP，因此您可以使用“whois”查找它所属的位置。“whois”会说它属于微软，并为您提供整个区块的地址范围。然后，您可以添加允许整个范围的防火墙规则。

至于为什么你必须付钱给他们报告他们的错误。微软通常有一项政策，如果您必须付费才能获得证明是他们的错误的支持，那么他们会报销您的费用。我想你也可以在这里使用它。无论如何，目前最低支持包的费用约为每月 30 美元，因此它看起来不是一项主要费用。我同意这不是很方便，但在某种程度上是公平的。

报告问题的另一种选择是使用[他们的论坛](http://social.msdn.microsoft.com/Forums/en-US/category/windowsazureplatform)。我不得不承认我从来没有任何好的经验，但我想这至少是产生一些嗡嗡声的方式，可以帮助更多地关注整个问题。

# android - 带有两个文本视图的多选列表视图

> ID：15375565
> 
> 赞同：2
> 
> 时间：2013-03-13T01:40:50.177
> 
> 标签：android, android-listview, multipleselection

不能使用`android.R.layout.simple_list_item_multiple_choice`默认格式来制作带有两个文本视图的列表视图吗？我想以最简单的方式制作多选列表视图。

像这样

项目| 复选框
子项|

# java - Java中除了字符串之外还有不可变的对象吗？

> ID：15375567
> 
> 赞同：0
> 
> 时间：2013-03-13T01:40:56.747
> 
> 标签：java, c++, string, object, immutability

我只听说Java中的字符串不能是不可变的，我想知道除了字符串之外还有其他对象也是不可变的吗？

附带说明一下，C++ 中的字符串也是不可变的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T01:43:52.580

许多原始类型是不可变的（Integer、Long、Boolean 等）。不变性不是在 java 中明确指出的东西，它实际上是一种语义契约。您可以通过将其成员声明为 final、在构造时分配它们并通过类的公共接口锁定访问来使任何类不可变。

C++ 中的字符串是以零字符结尾的字符数组。而已。尽管使用 const 可以帮助锁定访问权限，但这并没有保证不变性。

我想重点是 Java 中的许多东西都是不可变的，但只有文档和源代码才能真正向您证明这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:44:09.317

所有装箱的基元，例如 Integer，都是不可变的。

您可以自己创建不可变类 - 例如，使用其构造函数设置其变量的类，并且没有公共变量或设置器。

# c# - C# Azure 库中“DoesServiceRequest”装饰属性的用途是什么？

> ID：15375569
> 
> 赞同：0
> 
> 时间：2013-03-13T01:41:02.870
> 
> 标签：c#, azure-storage

[MSDN 说](http://msdn.microsoft.com/en-us/library/windowsazure/jj733054.aspx)：`DoesServiceRequest`指定该方法将向存储服务发出一个或多个请求。

但是它没有说明**为什么**需要它。我可以用它来装饰我自己的模拟类，但我想知道的不仅仅是盲目地在我的方法上拍它。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:03:29.373

这是存储客户端库 API 调用上的装饰器，让您知道该特定 API 调用是否向存储服务发出请求，或者该 API 调用是否在本地运行。

例如，CloudBlockBlob.FetchAttributes 用 DoesServiceRequest 修饰，因为它对 Storage 进行 HTTP 调用。但是 CloudBlockBlob.GetSharedAccessSignature 没有该装饰器，因为该函数在本地进程内执行而不调用存储服务。

# java - java - 无法从命令提示符打开 .asm 文件？

> ID：15375570
> 
> 赞同：0
> 
> 时间：2013-03-13T01:41:04.477
> 
> 标签：java, jar, command-prompt, executable-jar

所以我有这个 .jar 文件，我试图通过 Windows 7 命令提示符运行它。我可以使用命令 java -jar myJar.jar 让它运行，它开始运行。然后我要求用户输入文件名（出于测试目的，这是 testFile1.asm），它显示以下消息：

（文件名、目录名或卷标语法不正确）asm
      at java.io.FileInputStream.open(Native Method)
      at java.io.FileInputStream.(init)(Unknown Source)
      at java.io.FileInputStream.(init )(Unknown Source)
      at java.io.FileReader.(init)(Unknown Source)
      at Assembler.firstPass(Assembler.jgava:33)
      at Assembler.main(Assembler.java:29)

它在我的 Linux 终端上运行良好，但我需要让它在 Windows cmd 上运行，这样我的教授才能看到它工作正常。如果它是相关的，这是我的java类。

```
import java.io.*;
public class Assembler {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
    int x;
    System.out.println("Please enter a file name.");
    String file ="";
    for(int i = 0; ;i++){ 
        x = System.in.read();
        if (x == -1 || x == 10){
            break;
        }
        file = file + (char)x;
    }
    firstPass(file);
}

static private void firstPass(String url) throws FileNotFoundException, IOException{
    BufferedReader reader = new BufferedReader(new FileReader(url));
    Writer writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("symbol_table.txt"), "utf-8"));
    int LC = 0;
    String currLine = reader.readLine();
    while(currLine != null){
        if(currLine.charAt(3) != ','){         //No Label present
            if(currLine.contains("ORG")){       //ORG is present
                LC = Integer.parseInt(currLine.substring(9,12));
                LC++;
            }
            else if(currLine.contains("END")){
                //secondPass();
                break;
            }
            else {
                LC++;
            }
        }
        else{                                   //Label is present
            writer.write(currLine.substring(0,3) + " " + LC +"\r\n");
            LC++;
        }            
        currLine = reader.readLine();
    }
    writer.close();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:22:41.417

在 Windows 上是 CR LF（ascii 13 然后 ascii 10）。在 linux 和 cygwin 中，只是 LF。所以你还需要检查 x == 13 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:57:59.910

这是行：

```
if (x == -1 || x == 10){ 
```

来自 [InputStream API](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28%29)

> 公共抽象 int 读取（）
> 
> 返回： 数据的下一个字节，如果到达流的末尾，则返回 -1。

打印 的值`url`以确保。

`read()`方法甚至返回您输入的换行符。这在 Windows 和 Linux 中的处理方式不同。使用[BufferedReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html)和 try`readLine()`方法，或类似的方法。

# c# - 研究人员如何避免套接字漏洞？

> ID：15375571
> 
> 赞同：-1
> 
> 时间：2013-03-13T01:41:13.553
> 
> 标签：c#, .net, sockets

我需要使用 C# 让计算机通过网络进行通信。网络上说要使用套接字。

网络上还说，有很多恶意的人愿意给我们一半的机会来搞砸我们的工作，而通过开放端口，我们给了他们一半的机会。

在 Windows 7/8/Server 2012 机器上使用 .NET 4.5、C# 中的套接字会引入哪些漏洞，如何最好地缓解这些漏洞？

什么是危险的？开放端口真的可以让恶意黑客破坏我们的工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:38:34.270

虽然@jwd 在他所说的大部分情况下是正确的，但在许多情况下，通过沙盒或其他安全层限制网络应用程序的访问权限的概念可能既不可行也不可取。

网络应用程序的最大问题是它们如何处理（或*无法*处理）网络流中的格式错误的数据。99% 的时间（或大约）这是因为创建网络代码的开发人员很懒惰。时期。

网络黑客的圣杯是远程代码执行。在这方面，过去有两种相当成功的主要方法：

1.  传统上，最大的问题是缓冲区溢出。
    当您使用 C# 的托管对象时，这不太可能成为问题。您必须非常努力地使 C# 应用程序容易受到这种类型的攻击。自从 C 中单个堆栈上的静态缓冲区的美好时光以来，我们已经走了很长一段路。

2.  紧随其后的是各种注入攻击的问题。
    阅读一般的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)和[代码注入](http://en.wikipedia.org/wiki/Code_injection)。始终绝对确定您正在检查用户提交给您的系统的*每一个值*，如果有疑问，请**始终拒绝问题消息**。

3.  文件系统访问。
    鉴于对任意路径的访问，攻击者可能能够将文件上传到可以执行的位置。如果您允许上传，请始终确保它们只能到达特定文件夹或一组文件夹。

4.  当然，还有代码执行设计。
    这是您的代码被*设计*为允许远程代码执行但没有得到充分保护以限制恶意内容的地方。无论如何，这通常是一个坏主意，但如果您**必须**允许这样做，请确保您的安全性尽可能强大。

在代码执行之后，安全漏洞是下一个大问题。您可以找到许多关于敏感数据通过安全性差的系统泄露的新闻报道，而且大多数情况下是因为系统的“安全性”特别差。

端到端加密（例如通过 SSL）在您可能传输敏感数据时是**必须的……包括用户名和密码。**数据包嗅探器可以监视未加密的数据流并提取登录详细信息。假设您对实际的敏感登录数据进行哈希处理...如果我使用该确切的哈希值登录自己会发生什么？

有很多这样的问题，你必须做很多阅读才能掌握这一切。例如，SQL 注入攻击会让您非常头疼。

最后，当所有其他方法都失败时，攻击者可能会满足于仅仅关闭您的系统。当您的网络代码失败时，请确保它会优雅地这样做。

故事的寓意：

1.  链接加密（SSL 或等效）是一件好事™
2.  检查每条输入并丢弃任何向您发送错误数据的连接。
3.  ***始终***假设您的系统将受到攻击，并相应地进行编码。
4.  优雅地处理错误，否则后果自负。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T01:51:31.357

一个开放的端口只有在监听它允许的情况下才危险。

通常，最薄弱的环节是您的应用程序，而不是底层库。

当然可能存在以下问题：

*   您的操作系统对网络的处理
*   .NET 框架对网络的处理

但大多数情况下，当恶意数据到达时，事情会变得很糟糕

*   你的申请

当然，最后一个完全取决于您的应用程序的性质。

例如，如果您的应用程序监听任意命令，例如在服务器上运行程序，那么攻击者基本上可以执行您的应用程序有权执行的任何操作 - 删除文件等。

降低风险的一种方法是在操作系统级别为您的应用程序提供非常小的权限。这样，受感染的应用程序就无法删除系统文件。

另一种降低风险的方法是在沙盒环境中运行您的应用程序，例如 chroot 或 FreeBSD 监狱。这也取决于操作系统。

简而言之，有些事情可能会超出您的控制范围（例如：操作系统漏洞），还有其他事情，更有可能是您的应用程序出现问题。有一些方法可以减轻这种风险。

# qt - QSocketNotifier::activated 和 QIODevice::readyRead 之间的区别

> ID：15375572
> 
> 赞同：0
> 
> 时间：2013-03-13T01:41:33.963
> 
> 标签：qt, network-programming, qt4, qsslsocket, qiodevice

我创建了一个新的 Read `QSocketNotifier`( `QSocketNotifier::Read`) 并将其安装在`QSslSocket`. `QSslSocket`发出`activated`信号时发出的信号是什么`QSocketNotifier`？

安装在 a 上的 a发出的信号与a 发出的`activated`信号之间有什么区别吗？`QSocketNotifier``QSslSocket``QIODevice::readyRead``QSslSocket`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:01:05.977

如果正在观看 QIODevice，则和`QSocketNotifier`之间没有功能差异。因此，如果您只使用对象，则不需要 a 。`QIODevice::readyRead()``QSocketNotifier::activated(QSocketNotifier::Read)``QSocketNotifier``QIODevice`

主要用途`QSocketNotifier`是监视您通过低级 API 打开的套接字（或任何其他文件描述符）。您可以向它传递一个与另一个 QObject 无关的文件描述符（例如通过 std::ifstream 打开的文件），`activated()`当您可以从文件描述符中读取时，它会触发一个信号，这很有用，因为通用文件描述符赢得了不要自己触发 Qt 信号。

# java - 使用以下代码查找整数位数的总和：

> ID：15375576
> 
> 赞同：2
> 
> 时间：2013-03-13T01:42:05.077
> 
> 标签：java

我对粗体字感到困惑，这到底是什么意思，如果没有看到解决方案，怎么会有人弄清楚这一点？代码确实有效，但我不明白粗体字：

```
public int sumOfDigits(int n)
{
    int sum = 0;
    n = Math.abs(n); //removes the minus sign from a negative integer
    while (n > 0)
    ***{
        sum += n % 10; //???????????????????????????????????????xplo
        n /= 10;
    }***
    return sum;
}

public void inputAndProcess()
{
    int n = 0;
    Input in = new Input();
    while (true) 
    { 
        System.out.print("Type an integer: ");
        if (in.hasNextInt()) 
        { 
            n = in.nextInt(); 
            break;
        }
        in.nextLine(); 
        System.out.println("You did not type an integer, try again."); 
    }
    System.out.print("The sum of the digits of " + n); 
    System.out.println(" is: " + sumOfDigits(n)); 
}   

public static void main(String[] args)
{
    new Example1_1().inputAndProcess();
} 
```

我不能将选定的位加粗，但它是***中涵盖的代码的一部分，以及有关如何更好地处理这些过时代码的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:47:40.340

```
while (n > 0)
    ***{
        sum += n % 10; //???????????????????????????????????????xplo
        n /= 10;
    }*** 
```

这里发生的事情是总和是 n 除以 10 后余数的当前累积和（% 运算符是模数，是 2 个整数除后的余数）。

如果你有整数 123：

在 n 的第一次迭代后：sum 的值为 3（因为 123 / 10 的余数为 3）。n 变为 12，因为 123 除以 10，并且 int 值加载回 n 以进行下一次迭代

在 n 的第二次迭代之后：sum 的值为 2+3（因为 12 / 10 的余数为 2）。n 变为 1，因为 12 除以 10，并且 int 值加载回 n 以进行下一次迭代

在 n 的第三次迭代后：sum 的值为 1+2+3（因为 1 / 10 的余数为 1）。n 变为 0，因为 1 除以 10，并且 int 值加载回 n 以进行下一次迭代

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:47:46.097

`% 10`基本上测试指定数字除以 10 时的余数是多少，这是一种从数字中获取最后一位数字的方法。`n /= 10`将 的值替换`n`为其原始值和 10 之间的整数除法的结果。整数除法表示数字被除，但小数部分被删除，例如`128 / 10`12。在此上下文中用于修剪最后一位数字一个整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:47:19.357

当输入一个数字时，它被视为一个整数值，而不是一次一个数字。因此，您突出显示的代码基本上一次取一位数，即先修改 10，然后除以 10。

例如，如果我输入 321，我会计算 321 % 10 = 1，然后将 321 除以 10，即 32。然后，32 % 10 = 2，并且 32 除以 10 是 3。所以除以 10 得到最后一位数字的值，然后除以 10 去掉该数字。

获得所有数字（在本例中为 1、2 和 3）后，您可以简单地将它们相加。

我解释的方式有什么意义吗？

# android - 如何将 OpenSSL 指向 Android 设备上的根证书？

> ID：15375577
> 
> 赞同：16
> 
> 时间：2013-03-13T01:42:07.967
> 
> 标签：android, android-ndk, openssl, root-certificate

我已经设法为 ARMv6 交叉编译 OpenSSL 以与[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)一起使用，并让它在我的应用程序中运行。但是，当尝试与知名主机（例如[https://google.com](https://google.com)）建立 HTTPS 连接时，我总是收到错误消息“SSL 证书无效”。

但是，在我设备的任何浏览器（常用浏览器、Chrome、Firefox 等）中显示安全页面都没有困难。因此我只能假设 OpenSSL 没有找到存储在设备上的根证书。

然后我的问题分解为两个非常相关的子问题：

*   Android 将根证书存储在设备的什么位置？
*   我如何将 OpenSSL 指向他们？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-05-25T01:07:33.627

> Android 将根证书存储在设备的什么位置？

它四处移动。随着冰淇淋三明治 (ICS) 的出现，使用了三个商店。这三个商店是`/data/misc/keychain`（由 Android 提供）、`/data/misc/keychain/cacerts-added`（用户添加的 CA）和`/data/misc/keychain/cacerts-removed`（用户删除或更新的 CA）。

在 ICS 之前，他们使用位于 的 BouncyCastle 商店`/system/etc/security/cacerts.bks`。这是一个静态存储，无法修改。如果需要更改，则需要更新固件或映像。

有关存储的说明，请参阅[ICS 信任存储实现](http://nelenkov.blogspot.com/2011/12/ics-trust-store-implementation.html)。这是 Nikolay Elenkov 的博客，他在讨论系统方面做得很好，而不仅仅是商店所在的位置。

* * *

> 我如何将 OpenSSL 指向他们？

您不能真正做到这一点，因为 OpenSSL 期望和 Android 呈现的是两种不同的呈现/存储格式。OpenSSL 期望将一组 PEM 格式的信任锚连接在一起。但 Android 信任库不是这种格式。

通常发生的事情是您下载[`cacert.pem`](http://curl.haxx.se/docs/caextract.html). [`SSL_CTX_load_verify_locations`](https://www.openssl.org/docs/ssl/SSL_CTX_load_verify_locations.html)然后，通过指定`cacert.pem`为`CAfile`参数调用来加载它们。

即使您`cacert.pem`从受信任的来源（如 Mozilla 或 cURL）下载，您仍应仔细检查并确保您对信任锚的集合感到满意。包中有 155 个潜在的信任锚：

```
$ cat cacert.pem | grep BEGIN | wc -l
     155 
```

但就像我在评论中所说的那样，它隐含地使用了*浏览器安全模型*，并且在许多情况下它并不是一种特别好的做事方式。

* * *

> 尝试与知名主机（例如[https://google.com](https://google.com)）建立 HTTPS 连接时，我总是收到错误消息“SSL 证书无效”。

要回答这个问题，只需将[Google Internet Authority](https://pki.google.com/)或[GeoTrust Global CA](https://www.geotrust.com/resources/root-certificates/)与[`SSL_CTX_load_verify_locations`](https://www.openssl.org/docs/ssl/SSL_CTX_load_verify_locations.html). 最好使用*Google Internet Authority*，因为它限制了网络投射。

***谷歌互联网管理局***：

```
-----BEGIN CERTIFICATE-----
MIID8DCCAtigAwIBAgIDAjp2MA0GCSqGSIb3DQEBBQUAMEIxCzAJBgNVBAYTAlVT
MRYwFAYDVQQKEw1HZW9UcnVzdCBJbmMuMRswGQYDVQQDExJHZW9UcnVzdCBHbG9i
YWwgQ0EwHhcNMTMwNDA1MTUxNTU1WhcNMTYxMjMxMjM1OTU5WjBJMQswCQYDVQQG
EwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzElMCMGA1UEAxMcR29vZ2xlIEludGVy
bmV0IEF1dGhvcml0eSBHMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB
AJwqBHdc2FCROgajguDYUEi8iT/xGXAaiEZ+4I/F8YnOIe5a/mENtzJEiaB0C1NP
VaTOgmKV7utZX8bhBYASxF6UP7xbSDj0U/ck5vuR6RXEz/RTDfRK/J9U3n2+oGtv
h8DQUB8oMANA2ghzUWx//zo8pzcGjr1LEQTrfSTe5vn8MXH7lNVg8y5Kr0LSy+rE
ahqyzFPdFUuLH8gZYR/Nnag+YyuENWllhMgZxUYi+FOVvuOAShDGKuy6lyARxzmZ
EASg8GF6lSWMTlJ14rbtCMoU/M4iarNOz0YDl5cDfsCx3nuvRTPPuj5xt970JSXC
DTWJnZ37DhF5iR43xa+OcmkCAwEAAaOB5zCB5DAfBgNVHSMEGDAWgBTAephojYn7
qwVkDBF9qn1luMrMTjAdBgNVHQ4EFgQUSt0GFhu89mi1dvWBtrtiGrpagS8wEgYD
VR0TAQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAQYwNQYDVR0fBC4wLDAqoCig
JoYkaHR0cDovL2cuc3ltY2IuY29tL2NybHMvZ3RnbG9iYWwuY3JsMC4GCCsGAQUF
BwEBBCIwIDAeBggrBgEFBQcwAYYSaHR0cDovL2cuc3ltY2QuY29tMBcGA1UdIAQQ
MA4wDAYKKwYBBAHWeQIFATANBgkqhkiG9w0BAQUFAAOCAQEAJ4zP6cc7vsBv6JaE
+5xcXZDkd9uLMmCbZdiFJrW6nx7eZE4fxsggWwmfq6ngCTRFomUlNz1/Wm8gzPn6
8R2PEAwCOsTJAXaWvpv5Fdg50cUDR3a4iowx1mDV5I/b+jzG1Zgo+ByPF5E0y8tS
etH7OiDk4Yax2BgPvtaHZI3FCiVCUe+yOLjgHdDh/Ob0r0a678C/xbQF9ZR1DP6i
vgK66oZb+TWzZvXFjYWhGiN3GhkXVBNgnwvhtJwoKvmuAjRtJZOcgqgXe/GFsNMP
WOH7sf6coaPo/ck/9Ndx3L2MpBngISMjVROPpBYCCX65r+7bU2S9cS+5Oc4wt7S8
VOBHBw==
-----END CERTIFICATE----- 
```

***GeoTrust 全球 CA*** :

```
-----BEGIN CERTIFICATE-----
MIIDVDCCAjygAwIBAgIDAjRWMA0GCSqGSIb3DQEBBQUAMEIxCzAJBgNVBAYTAlVT
MRYwFAYDVQQKEw1HZW9UcnVzdCBJbmMuMRswGQYDVQQDExJHZW9UcnVzdCBHbG9i
YWwgQ0EwHhcNMDIwNTIxMDQwMDAwWhcNMjIwNTIxMDQwMDAwWjBCMQswCQYDVQQG
EwJVUzEWMBQGA1UEChMNR2VvVHJ1c3QgSW5jLjEbMBkGA1UEAxMSR2VvVHJ1c3Qg
R2xvYmFsIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2swYYzD9
9BcjGlZ+W988bDjkcbd4kdS8odhM+KhDtgPpTSEHCIjaWC9mOSm9BXiLnTjoBbdq
fnGk5sRgprDvgOSJKA+eJdbtg/OtppHHmMlCGDUUna2YRpIuT8rxh0PBFpVXLVDv
iS2Aelet8u5fa9IAjbkU+BQVNdnARqN7csiRv8lVK83Qlz6cJmTM386DGXHKTubU
1XupGc1V3sjs0l44U+VcT4wt/lAjNvxm5suOpDkZALeVAjmRCw7+OC7RHQWa9k0+
bw8HHa8sHo9gOeL6NlMTOdReJivbPagUvTLrGAMoUgRx5aszPeE4uwc2hGKceeoW
MPRfwCvocWvk+QIDAQABo1MwUTAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBTA
ephojYn7qwVkDBF9qn1luMrMTjAfBgNVHSMEGDAWgBTAephojYn7qwVkDBF9qn1l
uMrMTjANBgkqhkiG9w0BAQUFAAOCAQEANeMpauUvXVSOKVCUn5kaFOSPeCpilKIn
Z57QzxpeR+nBsqTP3UEaBU6bS+5Kb1VSsyShNwrrZHYqLizz/Tt1kL/6cdjHPTfS
tQWVYrmm3ok9Nns4d0iXrKYgjy6myQzCsplFAMfOEVEiIuCl6rYVSAlk6l5PdPcF
PseKUgzbFbS9bZvlxrFUaKnjaZC2mqUPuLk/IH2uSrW4nOQdtqvmlKXBx4Ot2/Un
hw4EbNX/3aBd7YdStysVAq45pmp06drE57xNNB6pXE0zX5IJL4hmXXeXxx12E6nV
5fEWCRE11azbJHFwLJhWC9kXtNHjUStedejV0NxPNO3CBWaAocvmMw==
-----END CERTIFICATE----- 
```

* * *

在理想的世界中，您运行一个私有 PKI，并且您只信任您的 PKI 的根来认证站点和服务。您不*授予*信任公共 CA 来证明任何内容，因为他们不对依赖方做出任何保证。从本质上讲，公共 CA 会告诉您他们的warez 并不好，即使是出于将它们出售给网站的目的。

在次优世界中，您只使用认证该站点的公共 CA。这意味着您使用[Google Internet Authority](https://pki.google.com/)或[GeoTrust Global CA](https://www.geotrust.com/resources/root-certificates/)来认证 Google 财产；而不是，说[Diginotar](https://en.wikipedia.org/wiki/DigiNotar)。

还有其他不太明显的问题。[Google Internet Authority](https://pki.google.com/)是由 GeoTrust 认证的不受约束***的***从属 CA。Google 可以为任何网站颁发证书，而不仅仅是 Google 资产。通常，这会被 RA 捕获，它实际上是一个独立的审计员，在签发之前验证对 CA 的签名请求。但在此模型中，提出请求的组织 (Google) 与验证请求的组织 (Google) 和颁发证书的组织 (Google) 相同。[浏览器、CA 和 PKI 是我知道的唯一实例，因为它太不方便](https://bugzilla.mozilla.org/show_bug.cgi?id=1151348#c18)了，所以独立审计员被完全删除作为制衡。

如果你认为下属不会这样做，那你就大错特错了。[CNICC 刚刚从一些浏览器信任库中删除，](https://threatpost.com/google-drops-trust-in-chinese-certificate-authority-cnnic/111974)因为它的一个不受约束的下属被发现为未经授权的站点和服务颁发证书。

浏览器安全模型***真正***出问题的地方是错误的 CA 认证站点的能力。它包括对用户的成功网络钓鱼尝试。也就是说，浏览器会很高兴地允许连接被拦截，因为用户被钓鱼。

如果您认为即将推出的[带有覆盖的公钥固定](https://datatracker.ietf.org/doc/html/draft-ietf-websec-key-pinning-21)会有所帮助，那么您就大错特错了。尽管他们几乎没有提到覆盖，但攻击者可以破坏已知的良好 pinset。更糟糕的是，报告功能被禁用了一个损坏的 pinset 并带有***MUST NOT Report***，因此浏览器是掩饰的同谋。

关于这个主题有更多的阅读材料。对于初学者，请尝试 Peter Gutmann 的[Engineering Security](https://www.cs.auckland.ac.nz/%7Epgut001/pubs/book.pdf)和 Audun Jøsang 的[Internet 上的信任勒索](http://folk.uio.no/josang/papers/Jos2011-STM.pdf)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T10:38:58.510

*   android在哪里存储根证书：

根据将证书添加到不同设备上的本地密钥库的大量问题，他们从一个版本到另一个版本，从一个设备到另一个设备。其中大多数要求设备被植根，后来的评论谈到解决方案中断，因为它们在特定设备上移动或更改了格式。

*   我如何将 openssl 指向他们：

我不确定现在是否有一种“好”的方法可以做到这一点。我能找到的最佳解决方法是[这个答案](https://stackoverflow.com/a/14928386/486399)，然后将这些证书放入您自己的 openssl 理解的应用程序特定存储中。

一个不完美的解决方案，但您也许可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T10:42:53.867

**android在哪里存储根证书：**

*   *系统证书：* 这些存储在 `System/etc/security/cacerts.bks`

*   *第三方证书：*这些存储在`data/misc/keystore`

**我如何将 openssl 指向他们：**

与您的 openssl 库一起使用的 android 操作系统将处理此问题。您不必手动指向它。

根据您提供的信息，我在下面写。

考虑到您的应用程序是 VPN 或基于云的应用程序。

该问题可能是由于您安装在设备中以检查 SSL 流量的 *SSL 根 CA 无效。*

希望这可以帮助

# sql - 同一张表上有多个选择语句？

> ID：15375580
> 
> 赞同：1
> 
> 时间：2013-03-13T01:42:46.797
> 
> 标签：sql, sql-server-2008, tsql, join

我很难做出这个多重选择语句。

这是我选择 *. 在reportsto 列中，它是另一个员工的ID。我想在此列中显示该员工的名字和姓氏

```
empID   FName  LName ReportsTo
1         te    xxxx     6
6         aaa   asfa     1
5         zzz   xxxx     6
4         ttt   asfa     1

this how i want to display it on my gridview
empID   FName  LName ReportsTo
1         te    xxxx     aaa asfa      
6         aaa   asfa     te xxxx
5         zzz   xxxx     te xxxx
4         ttt   asfa     aaa asfa 
```

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:44:33.593

您需要单独加入表格才能获取用户报告的名称。下面的查询使用`INNER JOIN`，它将显示所有值为 的用户`reportsTo`。但是，如果某列`reportsTo`可以为*空*并且您希望显示所有用户，请`LEFT JOIN`改用。

```
SELECT  a.*,
        b.Fname TO_Fname,
        b.LName TO_F_NAME
FROM    emp a
        INNER JOIN emp b
            ON a.reportsTo = b.empID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

如果你想连接两列，

```
SELECT  a.*,
        b.Fname + ' ' + b.LName Report_TO_Name
FROM    emp a
        INNER JOIN emp b
            ON a.reportsTo = b.empID 
```

*   [SQLFiddle 演示（*两个查询*）](http://www.sqlfiddle.com/#!3/96499/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:55:33.633

如果您有 Null 报告，您可以使用“Left Join”而不是“Inner Join”

select C.empID, C.FName, C.LName, T.FName + ' ' + T.LName Report_TO_Name from emp C left join emp T on (c.reportsTo = T.empID)

# java - 用堆栈修复我的“中序树遍历”算法的实现

> ID：15375581
> 
> 赞同：6
> 
> 时间：2013-03-13T01:42:50.897
> 
> 标签：java, tree, stack, binary-tree, tree-traversal

部分原因是我必须实现二叉树的中序遍历的非递归方法。我有点卡住了。这是我到目前为止所拥有的：

```
public void inorder(BinaryTree v) {
    Stack<BinaryTree> stack = new Stack<BinaryTree>();
    stack.push(v);
    System.out.println(v.getValue());

    while(!stack.isEmpty()) {
        while(v.getLeft() != null) {
            v = v.getLeft();
            stack.push(v);
            System.out.println(v.getValue());
        }

        while(v.getRight() != null) {
            v = v.getRight();
            stack.push(v);
            System.out.println(v.getValue());
        }
                stack.pop();
    }
} 
```

我注意到它只打印出我的树的左侧，例如

```
 A
        /   \
       B     C
     /   \  /  \
    D     E F   G
   /  \
  H     I
 / \
J   K 
```

给`A B D H J`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-19T02:30:40.180

您可以通过一个 while 循环大大简化上述操作：

```
Stack<Node> stack = new Stack<>();
Node current = root;
while(current != null || !stack.isEmpty()){
  if(current != null){
    stack.push(current);
    current = current.left;
  } else if(!stack.isEmpty()) {
    current = stack.pop();
    process(current);
    current = current.right;
  }
} 
```

基本上，上面的代码将左分支推入堆栈，直到它到达分支中最左边的节点。然后它弹出它并处理它（你可以打印它或用它做其他事情），然后它推动堆栈上的右分支进行处理，因为左分支和节点本身已经完成。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T01:50:55.673

按照您的代码，该`getLeft()`部分的 while 循环一直沿着树的左侧向下，然后退出。 `v`现在是 node `J`，它没有正确的孩子，所以下一个 while 循环不会运行。

试试这个代码示例：[http ://www.ashishsharma.me/2011/09/inorder-traversal-without-recursion.html](http://www.ashishsharma.me/2011/09/inorder-traversal-without-recursion.html)

StackOverflow 答案：[https ://stackoverflow.com/a/12718147/1178781](https://stackoverflow.com/a/12718147/1178781)

```
// Inorder traversal:
// Keep the nodes in the path that are waiting to be visited
Stack s = new Stack(); 
// The first node to be visited is the leftmost
Node node = root;
while (node != null) {
    s.push(node);
    node = node.left;
}
// Traverse the tree
while (s.size() > 0) {
    // Visit the top node
    node = (Node)s.pop();
    System.out.println((String)node.data);
    // Find the next node
    if (node.right != null) {
        node = node.right;
        // The next node to be visited is the leftmost
        while (node != null) {
            s.push(node);
            node = node.left;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T16:47:13.067

另一个更简单的二进制遍历实现：

```
import java.util.Stack;

public class BinaryTree {

    public static void main(String args[])
    {
        Node root = Node.createDummyTree();
        Node tnode; //= root;

        Stack<Node> stack = new Stack<Node>();

        if (root != null)
        {
            stack.push(root);
        }

        while (!stack.isEmpty())
        {
            tnode = stack.pop();

            if (tnode != null)
            {
                System.out.println(tnode.value);

                if(tnode.rightNode != null)
                {
                    stack.push(tnode.rightNode);
                }

                if (tnode.leftNode != null)
                {
                    stack.push(tnode.leftNode);
                }
            }
        }
    }

}

class Node {
    public Node leftNode;
    public Node rightNode;
    public String value;

    Node(String value)
    {
        this.value = value;
    }

    /**
     *  Construct a dummy binary Tree
     *               A
     *          /         \
     *         B           C
     *       /   \       /   \
     *      D     E     F     G
     *     / \   / \   / \   / \
     *    H   I J   K  L  M  N  O

     * @return
     */

    public static Node createDummyTree(){

        Node root = new Node("A");
        root.leftNode = new Node("B");
        root.rightNode = new Node("C");

        Node tnode = root.leftNode;
        tnode.leftNode = new Node("D");
        tnode.rightNode = new Node("E");

        Node tempNode = tnode.rightNode;  //remember "E"  

        tnode = tnode.leftNode;
        tnode.leftNode = new Node ("H");
        tnode.rightNode = new Node ("I");

        tnode = tempNode;

        tnode.leftNode = new Node ("J");
        tnode.rightNode = new Node ("K");

        tnode = root.rightNode;
        tnode.leftNode = new Node("F");
        tnode.rightNode = new Node("G");

        tempNode = tnode.rightNode;  // rememebr "G"

        tnode = tnode.leftNode;
        tnode.leftNode = new Node("L");
        tnode.rightNode = new Node("M");

        tnode = tempNode;

        tnode.leftNode = new Node("N");
        tnode.rightNode = new Node("O");

        return root;
    }
} 
```

# php - PHP：imagepng() 创建损坏的图像

> ID：15375583
> 
> 赞同：0
> 
> 时间：2013-03-13T01:42:52.733
> 
> 标签：php, image, png

我在创建 PNG 图像的缩略图时遇到问题。

这有效：

```
 $src = imagecreatefromjpeg("http://www.gaze.se/".$folder.$filename);
    $rootfolder = $_SERVER['DOCUMENT_ROOT'] ;
    $tmp = imagecreatetruecolor($targ_w, $targ_h);
    imagecopyresampled($tmp, $src, 0,0,$_POST['x'],$_POST['y'],$targ_w,$targ_h,$_POST['w'],$_POST['h']);
    imagejpeg($tmp, $rootfolder.$folder.'thumb_'.$filename,100);

    imagedestroy($tmp);
    imagedestroy($src); 
```

然后我把两个jpeg函数改成png，像这样：

```
 $src = imagecreatefrompng("http://www.gaze.se/".$folder.$filename);
    $rootfolder = $_SERVER['DOCUMENT_ROOT'] ;
    $tmp = imagecreatetruecolor($targ_w, $targ_h);
    imagecopyresampled($tmp, $src, 0,0,$_POST['x'],$_POST['y'],$targ_w,$targ_h,$_POST['w'],$_POST['h']);
    imagepng($tmp, $rootfolder.$folder.'thumb_'.$filename,100);

    imagedestroy($tmp);
    imagedestroy($src); 
```

但是随后图像损坏了，当我尝试打开它时会显示此消息：

![错误信息](../Images/7981f34b6892a97673c946b2f051a4d9.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T02:00:12.610

查看[http://php.net/manual/en/function.imagepng.php](http://php.net/manual/en/function.imagepng.php)。对于 PNG 文件，$quality 参数应该是 0 到 9。正如@jeroen 所说，您绝对应该检查返回值。

# java - 用瓷砖填充正方形

> ID：15375587
> 
> 赞同：1
> 
> 时间：2013-03-13T01:43:09.783
> 
> 标签：java, opengl, lwjgl, tiles

我有一个 2D 瓷砖游戏，我正在尝试为其创建画笔大小。目前，我的代码如下所示：

```
if (isMouseClicked0) {
    int grid_x = Math.round(mouseX / blockSize);
    int grid_y = Math.round(mouseY / blockSize);
    for (int x = 0; x < brushSize; x++) {
        for (int y = 0; y < brushSize; y++) {
            world.setAt(grid_x, grid_y, b[inventorySelect]);
            grid_x += x;
            grid_y += y;
        }
    }
} 
```

该`setAt()`方法如下所示：

```
public void setAt(int x, int y, BlockType b) {
    if (x <= Display.getWidth() / blockSize && y <= Display.getHeight() / blockSize) {
        blocks[x][y] = new BaseBlock(b, x * blockSize, y * blockSize);
    }
    render();
} 
```

这当前产生此输出：

![瓷砖](../Images/ee73f5c54d1bd50f77cd15146e2b94a1.png)

左上角第一个图块上方的图块是我单击鼠标的位置，因此您可以看到下一个图块未渲染。我已经在这几个小时了，所以我可能错过了一些简单的东西。有什么帮助吗？

编辑：画笔大小是`2`，所以我应该创建四个图块。`blockSize`是`32`，这是我的积木有多大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:55:14.903

问题在于：

```
grid_x += x;
grid_y += y; 
```

你基本上是在对角线移动。这可能会更好：

```
 for (int x = 0; x < brushSize; x++) {
        for (int y = 0; y < brushSize; y++) {
            world.setAt(grid_x + x, grid_y + y, b[inventorySelect]);
        }
    } 
```

# xcode4 - 尝试以编程方式重新定位 UIImageView

> ID：15375588
> 
> 赞同：0
> 
> 时间：2013-03-13T01:43:13.853
> 
> 标签：xcode4, uiimageview

******更新问题以反映在 UIIMAGEVIEW ALLOC 中添加“INIT”* *** *** 我将“imageView”作为变量，已在我的“.h”类中声明。在特定情况下，我被迫以编程方式将“imageView”向上移动约 10 个像素并且没有遇到任何运气。在查看当前 UIImageView ("imageView) 位置时，我确定 X/Y/WIDTH/HEIGHT 应该是 (78,214,170,120)。下面是我正在使用的代码，它可以工作但不显示 UIImageView/UIImage：**

 **```
imageView = [[UIImageView alloc]init];
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:img2String]]];
imageView.frame = CGRectMake(78,214,170,120);     
imageView.image = image; 
```

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:48:35.207

这个问题是由@greg23af 编辑的，所以我做了一些改变。

```
imageView = [[UIImageView alloc] init];
NSURL *url = [NSURL URLWithString:img2String];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];
imageView.frame = CGRectMake(78,214,170,120);
imageView.backgroundColor = [UIColor redColor];
imageView.image = image; 
```

1.  将加载图片的一行代码分成三四行，方便调试。
2.  设置 UIImageView 的背景色，看是否在可见部分。确保它被添加到 self.view 或其他东西上。

你忘了之前初始化它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T01:48:21.560

你应该先初始化你的图像视图

```
imageView = [[UIImageView alloc] init]; 
```

像上面一样。**

# python - 从其他字符串中删除字符串

> ID：15375592
> 
> 赞同：0
> 
> 时间：2013-03-13T01:43:34.700
> 
> 标签：python, if-statement

如何删除字符串的一部分，例如

```
Blue = 'Blue '
Yellow = 'Yellow'
Words = Blue + Yellow
if Blue in Words:
    Words = Words - Yellow 
```

这就是我认为的样子？

编辑：我知道它不会起作用我想知道什么会起作用。因为你不能在 str() 中使用 '-'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T01:44:17.213

您可以使用`str.replace`空字符串交换文本：

```
Words = Words.replace(Yellow,'') 
```

请注意，这将转换：

```
"The Yellow Herring" 
```

简单地说：

```
"The Herring" 
```

（替换将发生在字符串中的任何位置）。如果您只想`'Yellow'`从字符串的末尾删除，您可以使用`.endswith`和切片：

```
if Blue in Words and Words.endswith(Yellow):
    Words = Words[:-len(Yellow)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T01:48:56.303

从不同的角度来看，您实际上**不能**删除字符串的一部分，因为字符串（在 Python 中）是**不可变**的——它们不能被修改（[有充分的理由](http://effbot.org/pyfaq/why-are-python-strings-immutable.htm)）。这意味着没有分配 ( `mystring[0] = 'f'`)。

您*可以*做的是构建一个全新的字符串，并删除它的特定部分。这实现了相同的目标。

这实际上非常重要，因为它意味着

```
mystring.replace('m', 'f') 
```

就其本身而言，*什么都不*做（请注意，没有赋值 - 这只是构建一个新字符串，然后将其丢弃）。学习这个不变性（和可变性）的概念对于学习是必不可少的——它将帮助您避免许多错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T01:44:58.890

使用[替换功能](http://docs.python.org/2/library/string.html#string.replace)：

```
if Blue in Words:
    Words = Words.replace(Yellow, '') 
```

如果 Words 是一个列表，则可以执行以下操作：

```
if Blue in Words:
   Words = [word for word in Words if word != Yellow] 
```

或相同但使用删除：

```
if Blue in Words:
   Words.remove(Yellow) 
```

# php - New Relic 错误报告 - 停止捕获 E_NOTICE 错误

> ID：15375595
> 
> 赞同：4
> 
> 时间：2013-03-13T01:44:00.090
> 
> 标签：php, error-handling, newrelic

我现在遇到的问题是很难找到实际的错误，因为发现了太多的 E_NOTICE。我们的服务器上有近 600 个站点，其中包含复杂的脚本，我已经做了很多工作来处理其中的很多，但仍然有不少。

每次错误百分比太高时，我都会收到一封电子邮件和一条短信，这对于防止问题非常有用。

我确定我不是唯一遇到此问题的人——有推荐的解决方案吗？我试过设置`error_reporting( E_ALL ^ E_NOTICE );`，但它并没有阻止它。

我想到的一种可能的解决方案是不使用我自己的将 New Relic 设置为错误处理程序，然后如果它不是 E_NOTICE 则将错误发送给他们。还没想好怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-15T18:19:18.457

New Relics 的 PHP 代理不会跟踪 E_NOTICE 错误，除非您已明确使用`set_error_handler(newrelic_notice_error);`

如果您希望 New Relic 跟踪一些但不是所有未捕获的异常，创建您自己的调用 newrelic_notice_error 的错误处理程序是有意义的。

New Relic 文档中有关于此的更多信息：[https ://newrelic.com/docs/php/the-php-api](https://newrelic.com/docs/php/the-php-api)

在大多数情况下，没有必要也不建议将 New Relic 设置为错误处理程序。

# php - 如何将页面附加到自定义帖子类型

> ID：15375596
> 
> 赞同：3
> 
> 时间：2013-03-13T01:44:01.300
> 
> 标签：php, wordpress, function, custom-post-type

这在过去对我有用，所以我不确定为什么它现在不起作用。

我创建了一个自定义帖子类型：

```
add_action('init', 'register_team');   
function register_team(){
        $args = array(
            'label' => __('Design Team'),
            'singular_label' => __('Design Team'),
            'public' => true,
            'show_ui' => true,
            'capability_type' => 'post',
            'hierarchical' => true,
            'rewrite' => array("slug" => "design-team",'with_front' => true), // Permalinks format
            'supports' => array( 'title', 'editor', 'thumbnail' ),
            'add_new' => __( 'Add New Member' ),
            'add_new_item' => __( 'Add New Member' ),
            'edit' => __( 'Edit Member' ),
            'edit_item' => __( 'Edit Member' ),
            'new_item' => __( 'New Member' ),
            'view' => __( 'View Member' ),
            'view_item' => __( 'View Member' ),
            'search_items' => __( 'Search Design Team' ),
            'not_found' => __( 'No info found' ),
            'not_found_in_trash' => __( 'No info found in Trash' ),
            'parent' => __( 'Parent Info' ),
            'menu_position' =>__( 7 ),
           );

        register_post_type( 'team' , $args );
    } 
```

并调用了我可以在 CMS 中看到的功能，添加新条目等。我需要将页面模板附加到此自定义帖子类型。在同一个站点上，我创建了一个名为 showroom 的自定义帖子类型，并通过创建一个名为 page-showroom.php 的文件将自定义帖子类型附加到页面。但是，当我创建一个名为 page-team.php 的文件时，它不会与该页面关联。这是语法问题吗？

**更新** 我通过在 CMS 中创建一个页面并使用页面属性添加模板来解决这个问题。我不特别喜欢这个解决方案的原因是用户可能会更改页面的模板，导致它不再工作。

我只是觉得我错过了一些与 WP Core 如何定义页面相关的东西-?? 变量模板名称或者它是一个错字，愚蠢的错误，等等......

**更新** 按要求，这是来自functions.php的代码，它加载了我所有的CPT

```
// CUSTOM POST TYPES
add_action('init', 'register_showroom');
add_action('init', 'register_project_gallery');
add_action('init', 'register_slideshow');
add_action('init', 'register_team');

// ADD Showroom
function register_showroom(){
    $args = array(
        'label' => __('Showroom'),
        'singular_label' => __('Showroom'),
        'public' => true,
        'show_ui' => true,
        'capability_type' => 'post',
        'hierarchical' => true,
        'rewrite' => array("slug" => "showroom",'with_front' => true), // Permalinks format
        'supports' => array( 'title', 'editor', 'excerpt', 'thumbnail', 'custom-fields', 'page-attributes' ),
        'add_new' => __( 'Add New' ),
        'add_new_item' => __( 'Add New' ),
        'edit' => __( 'Edit' ),
        'edit_item' => __( 'Edit' ),
        'new_item' => __( 'New' ),
        'view' => __( 'View' ),
        'view_item' => __( 'View' ),
        'search_items' => __( 'Search Showroom' ),
        'not_found' => __( 'No info found' ),
        'not_found_in_trash' => __( 'No info found in Trash' ),
        'parent' => __( 'Parent Info' ),
        'menu_position' =>__( 4 ),
       );

    register_post_type( 'showroom' , $args );
}

// ADD Project Gallery
function register_project_gallery(){
    $args = array(
        'label' => __('Project Gallery'),
        'singular_label' => __('Project Gallery'),
        'public' => true,
        'show_ui' => true,
        'capability_type' => 'post',
        'hierarchical' => true,
        'rewrite' => array("slug" => "project-gallery",'with_front' => true), // Permalinks format
        'supports' => array( 'title', 'editor', 'thumbnail' ),
        'add_new' => __( 'Add New' ),
        'add_new_item' => __( 'Add New' ),
        'edit' => __( 'Edit' ),
        'edit_item' => __( 'Edit' ),
        'new_item' => __( 'New' ),
        'view' => __( 'View' ),
        'view_item' => __( 'View' ),
        'search_items' => __( 'Search Project Gallery' ),
        'not_found' => __( 'No info found' ),
        'not_found_in_trash' => __( 'No info found in Trash' ),
        'parent' => __( 'Parent Info' ),
        'menu_position' =>__( 5 ),
       );

    register_post_type( 'project_gallery' , $args );
}

// ADD Slideshow
function register_slideshow(){
    $args = array(
        'label' => __('Homepage Slideshow'),
        'singular_label' => __('Homepage Slideshow'),
        'public' => true,
        'show_ui' => true,
        'capability_type' => 'post',
        'hierarchical' => true,
        'rewrite' => array("slug" => "project-gallery",'with_front' => true), // Permalinks format
        'supports' => array( 'title', 'excerpt', 'thumbnail' ),
        'add_new' => __( 'Add New Slide' ),
        'add_new_item' => __( 'Add New Slide' ),
        'edit' => __( 'Edit' ),
        'edit_item' => __( 'Edit' ),
        'new_item' => __( 'New' ),
        'view' => __( 'View' ),
        'view_item' => __( 'View' ),
        'search_items' => __( 'Search Homepage Slideshow' ),
        'not_found' => __( 'No info found' ),
        'not_found_in_trash' => __( 'No info found in Trash' ),
        'parent' => __( 'Parent Info' ),
        'menu_position' =>__( 6 ),
       );

    register_post_type( 'slideshow' , $args );
}

// ADD Design Team
function register_team(){
    $args = array(
        'label' => __('Design Team'),
        'singular_label' => __('Design Team'),
        'public' => true,
        'show_ui' => true,
        'capability_type' => 'post',
        'hierarchical' => true,
        'rewrite' => array("slug" => "design-team",'with_front' => true), // Permalinks format
        'supports' => array( 'title', 'editor', 'thumbnail' ),
        'add_new' => __( 'Add New Member' ),
        'add_new_item' => __( 'Add New Member' ),
        'edit' => __( 'Edit Member' ),
        'edit_item' => __( 'Edit Member' ),
        'new_item' => __( 'New Member' ),
        'view' => __( 'View Member' ),
        'view_item' => __( 'View Member' ),
        'search_items' => __( 'Search Design Team' ),
        'not_found' => __( 'No info found' ),
        'not_found_in_trash' => __( 'No info found in Trash' ),
        'parent' => __( 'Parent Info' ),
        'menu_position' =>__( 7 ),
       );

    register_post_type( 'team' , $args );
} 
```

所以我可以成功创建一个page-showroom.php、page-project_gallery.php、single-project_gallery.php、single-showroom.php，它们会自动将自己附加到正确的CPT，但如果我创建page-team.php，它只会加载page.php。

这是 page-showroom.php 的示例，它可以工作：

```
<?php /*  Template Name: Showroom   */ ?>

<?php get_header(); ?>

    <div id="primary" class="site-content showroom">
        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', 'showroom' ); ?>
            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary -->

</div>
<?php get_footer(); ?> 
```

和 page-team.php，它不起作用

```
<?php /*  Template Name: Team   */ ?>

<?php get_header(); ?>

    <div id="primary" class="site-content team">
        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', 'team' ); ?>
                <?php //comments_template( '', true ); ?>
            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary -->

</div>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:02:26.623

我通常只遵循模板层次结构。在你的情况下——我假设你希望你的页面列出所有帖子类型=团队的帖子——这意味着在你的“页面模板”目录下创建一个名为“archive-team.php”的页面。或者，如果您只想显示单个帖子，则可以使用“single-team.php”。这是你应该这样做的方式，至少。我这样做，它对我有用。

[http://codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:26:05.650

您需要添加`add_action('init', 'register_team');`before 功能。

# networking - BGP 公告？

> ID：15375603
> 
> 赞同：3
> 
> 时间：2013-03-13T01:44:49.860
> 
> 标签：networking, bgp

谁能解释 BGP 中的公告是如何工作的？我知道 BGP 找到了到目标网络的最短/成本最低的路径，但我也在某处读到它宣布了这些路径。这是真的吗，它究竟是如何宣布路线的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:53:40.677

BGP是外部网关协议，它用于自治系统之间的网络边界，宣布网络工作像这个例子：例如我们有3个自治系统A，B A有两个网络1.1.1.0/24和2.2.2.0/24 B有那些拖网 3.3.3.0/24 和 4.4.4.0/24 所以 A 中的边缘路由器直接连接到 B 中的边缘路由器并运行 BGP ，每个路由器都宣布（或通告）它拥有（或想要发布）的内部网络，所以现在 A 路由器知道有 3.3.3.0/24 和 4.4.4.0/24 网络，它们可以通过 B 的边缘路由器访问，与 B 网络相同

# android - 使用意图移动到第二页

> ID：15375604
> 
> 赞同：1
> 
> 时间：2013-03-13T01:44:50.207
> 
> 标签：android, android-intent, android-activity

我已经做了一个按钮`MainActivity`去`SecondActivity`。

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="178dp"
    android:layout_toRightOf="@+id/textView1"
    android:onClick="onClick"
    android:text="Moj przycisk" /> 
```

和方法：

```
public void onClick(View view){
    startActivity(new Intent("com.example.telefon2.SecondActivity"));
} 
```

在清单文件中，第二个活动的名称是：

```
<activity
    android:name="com.example.telefon2.SecondActivity"
    android:label="@string/title_activity_second" >
</activity> 
```

但是当我点击按钮时，我得到一个错误：

```
03-12 18:56:08.606: E/AndroidRuntime(1154): FATAL EXCEPTION: main
03-12 18:56:08.606: E/AndroidRuntime(1154): java.lang.IllegalStateException: Could not execute method of the activity
03-12 18:56:08.606: E/AndroidRuntime(1154):     at android.view.View$1.onClick(View.java:2683)
03-12 18:56:08.606: E/AndroidRuntime(1154):     at android.view.View.performClick(View.java:3110) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:45:48.427

```
public void onClick(View view){
        startActivity(new Intent("com.example.telefon2.SecondActivity"));
    } 
```

应该

```
public void onClick(View view){
        startActivity(new Intent(view.getContext(), SecondActivity.class));
    } 
```

由于您没有为您的 SecondActivity 定义 Intent-Action（如清单所示）。

如果您确实想导出此活动，请务必给它一个带有您想要的操作的 Intent-filter：

```
<activity
            android:name="com.example.telefon2.SecondActivity"
            android:label="@string/title_activity_second" >
<intent-filter>
            <action android:name="com.example.telefon2.SecondActivity"/>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
 </activity> 
```

然后就可以继续使用

```
startActivity(new Intent("com.example.telefon2.SecondActivity")); 
```

# mysql - 搜索后在 HTML 表中显示 MYSQL 数据

> ID：15375606
> 
> 赞同：0
> 
> 时间：2013-03-13T01:44:58.430
> 
> 标签：mysql

我要感谢这里的每一个人，感谢我到目前为止所获得的帮助。我的下一个问题有点复杂。

所以我在我的服务器上设置了一个数据库，我的网站上有一个表单，我将数据提交到我的 MYSQL 数据库。

提交数据后，我无法搜索它、显示可能的结果，然后将这些结果设为 HYPERLINKED，以便用户可以找到更多关于他们正在寻找的信息。

我的“common.php”脚本是这样设置的：

```
<?php

$username = "XXX";
$password = "XXX";
$hostname = "XXX"; 
$database = "XXX";

mysql_connect($hostname, $username, $password, $database) or die

("Unable to connect to MySQL");

echo "Connected to MySQL<br>";

?>�� 
```

我的“insertdata.php”脚本是这样设置的：

```
<?php

require("common.php");

// connect with form

$name=$_POST['firstname'];
$lastname=$_POST['lastname'];
$city=$_POST['city'];
$state=$_POST['state'];
$zip=$_POST['zip'];
$phone=$_POST['phone'];
$email=$_POST['email'];
$various=$_POST['various'];
$other=$_POST['other'];

//  insert data into mysql

$query="INSERT INTO datatable
(
firstname, 
lastname, 
city, 
state, 
zip, 
phone,
email,
various, 
other, 
)
VALUES
(
'$firstname', 
'$lastname', 
'$city', 
'$state', 
'$zip', 
'$phone',
'$email', 
'$various', 
'$other', 
)";

$result=mysql_query($query);

// if successfull displays message "Data was successfully inserted into the database". 

if($result){
echo "Successful";
echo "<BR>";
echo "<a href='insert.php'>Back to main page</a>";
}

else {
echo "ERROR... data was not successfully insert into the database";
}

mysql_close();

?>�� 
```

从那里，我想让插入的数据可搜索。

我的问题是，搜索完成后，我只想在两个单独的列中显示名字和姓氏。

从那里，我想在第三个单独的列中显示一个链接，每行中都有一个链接，上面写着“查看记录详细信息”。

最后，当单击“查看记录详细信息”时，它会将我带到正确的记录，并在 HTML 表中再次格式化。

我最接近解决方案的是：

```
<?php
require("common.php");
$query="SELECT * FROM datatable";
$result=mysql_query($query);
$num=mysql_numrows($result);
$i=0;
while ($i < $num) {
$firstname=mysql_result($result,$i,"firstame");
$lastname=mysql_result($result,$i,"lastname");
$i++;}
?> 
```

另外一个问题是，当我使用 PDO 时，这会改变我的 HTML 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:55:39.633

切换到 PDO。您的代码将如下所示：

```
$conn = new PDO('mysql:host=db_host;dbname=test', $user, $pass);  
$sql = 'SELECT * FROM datatable';   
foreach ($conn->query($sql) as $row) {  
    print $row['firstname'] . "\t";  
    print $row['lastname'] . "\n";  

} 
```

**编辑：** 要链接回详细信息，请在第二次打印后添加此行：

```
print "<a href='somephp.php?idx=" . $row[ 'idx' ] . "'>link here</a>"; 
```

您需要另一个名为“somephp.php”的 php 文件：

```
$conn = new PDO('mysql:host=db_host;dbname=test', $user, $pass);  
$idx = $_REQUEST[ 'idx' ];

$sql = 'SELECT * FROM datatable where idx = ?';   
$stmt = $conn->prepare( $sql );
$stmt->bindParam( 1, $idx );
$stmt->execute();
$row = $stmt->fetch();

// now print all the values...
print $row['firstname'] . "\t";  
print $row['lastname'] . "\t";  
print $row['address'] . "\t";  

and so on... 
```

**注意：**这取决于每条记录都有一个唯一的键“idx”。我在上面的值中没有看到这一点，所以如果你想使用这个代码，你必须找到一种方法来合并它。

**另外：**您问-*这是否会更改HTML*并*处理表格格式*-两者都否。您可以通过`print`语句进行所有 HTML 格式设置。所有 PHP 都会将行输出到浏览器。

# c# - 关于 DI 和 SRP

> ID：15375608
> 
> 赞同：1
> 
> 时间：2013-03-13T01:45:15.273
> 
> 标签：c#, dependency-injection, domain-driven-design, single-responsibility-principle

我正在写以下课程

```
public class UserApplication
{
    private IUserRepository UserRepository { get; set; }

    private IUserEmailerService UserEmailerService { get; set; }

    public UserApplication(IUserRepository userRepository, IUserEmailerService userEmailerService)
    {
        this.UserRepository = userRepository;
        this.UserEmailerService = userEmailerService;
    }

    public bool Authenticate(string login, string pass)
    {
        // Here I use UserRepository Dependency
    }

    public bool ResetPassword(string login, string email)
    { 
        // Here I only use both Dependecies
    }

    public string GetRemeberText(string login, string email)
    {
        // Here I only use UserRepository Dependency
    }
} 
```

我正在使用 Unity 来管理我的实例，所以我意识到我只在一个方法上使用两个依赖项，所以当我要求容器为这个类提供一个实例时，两个依赖项都注入到这个类中，但我不需要这两个所有方法的实例，因此在验证用户中我只需要存储库。那我这样做错了吗？是否有另一种方法仅具有我在此类中的所有情况下使用的依赖关系？

我想使用命令模式，所以我用一种方法对 3 个类进行分类，并且只有我需要的依赖项，如下所示：

```
public class AuthenticateUserCommand : ICommand
{
    private IUserRepository UserRepository { get; set; }

    public string Login { get; set; }

    public string Password { get; set; }

    public void Execute()
    {
        // executes the steps to do that
    }
}

public class ResetUserPasswordCommand : ICommand
{
    private IUserRepository UserRepository { get; set; }

    private IUserEmailerService UserEmailerService { get; set; }

    public string Login { get; set; }

    public string Email { get; set; }

    public void Execute()
    {
        // executes the steps to do that
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:40:35.400

I usually implement a form of the command pattern as you are considering doing. However, it also has elements of what eulerfx has mentioned. I just call them tasks. For example:

```
public interface ITask
{
    void Execute();
}

public interface IAuthenticateTask : ITask {}

public interface IResetPasswordTask : ITask {} 
```

I then implement these and have the required dependencies injected. So I have role specific interfaces and implementations.

I would *not* go with the service locator as you stated in your answer bit.

When I do have a situation where I need access to various tasks as I do in the controller of an ASP.NET MVC project I use property injection instead of constructor injection. I just have my DI container (I use castle) require certain injections based on a convention at runtime.

In this way I can still easily test the controller since I do not need to provide all the constructor injected objects but only those properties that I need for the test, with the added benefit that certain injected properties will still be required just as would be provided by constructor injection.

**update:**

There are a couple of options available using this approach. The main interface one would be interested in for a task is the role-specific one. The inherited interface(s) such as `ITask` would be only for convenience in simple cases. It can be extended also with generics:

```
public interface ITask<TInput>
{
   void Execute(TInput input);
}

public interface IOutputTask<TOutput>
{
   TOutput Execute();
}

public interface IOutputTask<TOutput, TInput>
{
   TOutput Execute(TInput input);
} 
```

Once again these are for convenience:

```
public interface IAuthenticateTask : IOutputTask<bool> {}

// or

public interface IAuthenticateTask : IOutputTask<AuthenticationResult> {} 
```

You could work just on the role level:

```
public interface IAuthenticateTask
{
    AuthenticationResult Execute(string username, string password);
} 
```

One need only rely on the role-specific interface for dependencies.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:38:01.877

另一种方法是为每个行为创建一个角色特定的界面。所以你会有`IUserAuthenticationService`,`IUserPasswordResetService`和`IUserRememberPasswordService`. 接口可以由单个类实现，例如，`UserApplication`或者它们可以用单独的类实现以维护 SRP。您描述的命令模式对 SRP 具有类似的优势。命令模式的一个问题是这些依赖项仍然必须由某些东西提供。如果依赖项是由控制器提供的，那么您仍然必须首先将依赖项获取到控制器，并且您会遇到与第一个示例类似的问题。

角色特定的接口案例和命令模式的权衡是失去凝聚力。这样做的成本当然是一个偏好和观点的问题，就像您想要执行 SRP 的程度一样。一方面，由单个类处理身份验证相关行为所提供的凝聚力可能是有益的。另一方面，正如您所描述的，它可能会导致依赖关系错位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:00:39.713

> 那我这样做错了吗？

第 2 个依赖项并不是世界末日，它们不会使构造函数变得臃肿或不可读。

之前给出的答案非常适合您有 3-4 个以上依赖项的情况。

如果仅在该方法中使用，您也可以偶尔将特定依赖项作为参数传递给该方法。从这个意义上说，您可能想尝试一下 Unity 的[方法调用注入](http://msdn.microsoft.com/en-us/library/ff649751.aspx)，尽管我不确定它是否正是为此目的。

# c - 进程何时会发出导致自身退出的信号？

> ID：15375610
> 
> 赞同：1
> 
> 时间：2013-03-13T01:45:32.783
> 
> 标签：c, unix, process, signals

cpp 文档指出，

> 它确定子进程是否退出，因为它引发了一个导致它退出的信号

关于 WIFSIGNALED 功能。什么样的情况会导致进程做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:29:04.430

如果您使用断言来确保您的程序是正确的，那么失败`assert`将生成一个信号 SIGABRT，它会导致进程终止。这是一个程序信号本身的故意案例。

信号的意外原因可以说包括（整数）除以零（SIGFPE，有趣的是），未对齐的内存访问（SIGBUS；如果您使用奇数地址访问必须在偶数地址边界上对齐的类型，则会发生这种情况 - 但是并非所有系统都对此很挑剔），或者访问无效的内存地址（SIGSEGV）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:55:54.307

有许多信号会导致这种情况，此外，进程可以退出的方式有很多种（例如，使用核心转储等）。查看有关[信号](http://man7.org/linux/man-pages/man7/signal.7.html)的手册页，特别是**标准信号**部分，以查看进程可以接收的信号表以及每个信号的默认处置。有关可能的处置列表，请查看顶部的**信号处置部分。**

我并不是说这是 RTFM 的回应。该手册页确实为可以退出进程的信号种类提供了一个简洁明了的表格。

例如，有：

> SIGFPE - 8 - 核心 - 浮点异常

如果它执行浮点异常，例如被零除，则将其发送到进程。这将导致您的进程以核心转储退出。

# android - 发送明确的意图不起作用

> ID：15375614
> 
> 赞同：0
> 
> 时间：2013-03-13T01:45:52.320
> 
> 标签：android, android-intent, broadcastreceiver, android-service

`Service`我想将带有指定组件的显式意图发送到`Activity`. 我已经`BroadcastReceiver`在`MainActivity.java`.

当我不为 设置组件时`Intent`，它会在活动中接收。但是对于指定的组件，它就不起作用了。为什么？

*广播服务.java*：

```
public class BroadcastService extends IntentService {

    @Override
    public void onCreate() {
        super.onCreate();
        intent = new Intent();
        ComponentName component = new ComponentName(
                MainActivity.class.getPackage().getName(),
                MainActivity.class.getName());
        intent.setComponent(component);
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        intent.putExtra("time", new Date().toLocaleString());
        sendBroadcast(intent);
    }
} 
```

*MainActivity.java*：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            updateUI(intent);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:45:34.157

正如[文档`Intent.setComponent()`](http://developer.android.com/reference/android/content/Intent.html#setComponent%28android.content.ComponentName%29)所说：

> （通常可选）显式设置组件来处理意图。如果保留默认值 null，系统将根据 Intent 中的其他字段（操作、数据、类型、类别）确定要使用的适当类。如果定义了此类，则无论其他字段如何，都将始终使用指定的类。仅当您知道绝对希望使用特定类时才应设置此值；否则最好让系统找到合适的类，这样您就会尊重已安装的应用程序和用户偏好。

但你正在做：

```
intent = new Intent();
ComponentName component = new ComponentName(
        MainActivity.class.getPackage().getName(),
        MainActivity.class.getName());
intent.setComponent(component); 
```

这意味着您设置了一个指向 的组件`MainActivity`，而不是 中的广播接收器`MainActivity`，因此它不起作用。

要修复，您可以将内部广播接收器移动到单独的类。但如果是这样，您将无法与`MainActivity`. 还有许多其他方法可以归档您的目标。我建议[`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)（在 API 3+ 中可用）。启动服务时，您将 a`ResultReceiver`放入意图中。当服务想要向活动发送信息时，您可以通过`ResultReceiver`给定的方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-17T15:10:10.467

如果您无法发送显式广播或显式意图 - 首先检查 ComponentName。包名称必须是应用程序 ID，而不是您可以在接收器类中看到的包名称。

在 build.gradle 中查找应用程序 ID：

```
 defaultConfig {
                            applicationId "com.my.app.id.name" 
```

或在构建后自动生成的 buildConfig.java 文件中：

应用\构建\生成\源\buildConfig\release\

```
 package com.my.app.id.name; 
```

例如，如果你的类名是“MyExplicitReciver”，你可以在这个类的第一行看到的包名是

```
 package com.my.app.myPackage.name.receivers; 
```

所以类名应该是：com.my.app.myPackage.name.receivers.MyExplicitReciver

你应该在 setComponent 中设置这样的组件名称：

```
 intent.setComponent(new ComponentName("com.my.app.id.name",
    "com.my.app.myPackage.name.receivers.MyExplicitReciver"));
            context().sendBroadcast(intent); 
```

# forms - 如何在 Drupal 7 中使用表单验证

> ID：15375616
> 
> 赞同：11
> 
> 时间：2013-03-13T01:46:07.883
> 
> 标签：forms, validation, drupal

我正在尝试在 Drupal Commerce 中编辑结帐表单，以要求用户输入他们的电子邮件地址两次。当他们提交表单时，Drupal 应该检查电子邮件是否匹配，`form_set_error()`如果不匹配，则调用。现在，我只是想在表单上附加一个自定义验证功能，但我无法开始工作。（我的模块叫checkout_confirm_email，这个模块仅供我们自己使用，所以我没有在名字上花太多力气）。

```
function checkout_confirm_email_form_alter(&$form, &$form_state, $form_id) {
if($form_id == 'commerce_checkout_form_checkout') {
    $form['#validate'][] = 'checkout_confirm_email_form_validate';
    dprint_r($form['#validate']);
    dsm("I printed");
}
}

function checkout_confirm_email_form_validate($form, &$form_state) {    
    dsm("Never prints...");
} 
```

`dprint_r`语句`Array ([0] => checkout_confirm_email_form_validate)`输出。所以该函数是表单数组的一部分，但验证函数中的 dsm 语句从不打印。

我实际上已经被困了一段时间。我查了一些例子，我看不出我做错了什么。任何人？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T02:02:33.123

您需要将 #validate 属性附加到表单提交按钮，如下所示：

```
$form['submit']['#validate'][] = 'checkout_confirm_email_form_validate' 
```

它会起作用然后我的示例不必与您的表单树完全匹配您应该搜索提交按钮数组并将此示例应用于它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-28T02:38:32.717

而不是 form_set_error() 我会使用 form_error($form, t('Error message.'));

```
function checkout_confirm_email_form_alter(&$form, &$form_state, $form_id) {
  if($form_id == 'commerce_checkout_form_checkout') {
    $form['#validate'][] = 'checkout_confirm_email_form_validate';
    dpm($form['#validate']);
    dsm("I printed");
  }
}

function checkout_confirm_email_form_validate(&$form, &$form_state) {
  // Not sure the exact email field
  if(empty($form['submitted']['mail']['#value'])){
    dsm("Should see me now and return to the form for re-submission.");
    form_error($form, t('Username or email address already in use.'));
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-23T05:37:50.237

您可以在此处使用任何验证功能 [https://api.drupal.org/api/drupal/includes!form.inc/7](https://api.drupal.org/api/drupal/includes!form.inc/7)

列出的验证将是

*   date_validate - 验证日期类型以防止无效日期（例如，2006 年 2 月 30 日）。
*   element_validate_integer - 整数元素的表单元素验证处理程序。
*   element_validate_integer_positive -
    必须为正的整数元素的表单元素验证处理程序
*   element_validate_number - 数字元素的表单元素验证处理程序。
*   password_confirm_validate - 验证 password_confirm 元素。

使用前

```
$form['my_number_field'] = array(
  '#type' => 'textfield',
  '#title' => t('Number'),
  '#default_value' => 0,
  '#size' => 20,
  '#maxlength' => 128,
  '#required' => TRUE,
  '#element_validate' => array('element_validate_number')
 ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-01T10:10:37.920

您可以使用 drupal API 中的函数 _form_validate

```
 https://api.drupal.org/api/drupal/includes!form.inc/function/_form_validate/7 
```

例子：

```
function my_form_form($form, &$form_state) {
       //code to generate the form
 }

function my_form_form_validate($form, &$form_state) {
    //use of API function valid_email_adress
    if ((valid_email_address($form_state['values']['field_candid_email']))===false)
         form_set_error('field_candid_email', t('Le champ courriel est invalide.'));    

    if (!(is_numeric($form_state ['values'] ['field_candid_montant']))) {       
        form_set_error('field_candid_montant', t('Le champ montant demandé doivent être de type numérique.'));
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-09T14:41:12.390

我改变了这一行：

```
$form['submit']['#validate'][] = 'checkout_confirm_email_form_validate' 
```

对此：

```
$form['actions']['submit']['#validate'][] = 'checkout_confirm_email_form_validate'; 
```

它的作品！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-04-15T12:48:44.697

使用以下代码：

```
$form['submit']['#validate'][] = 'checkout_confirm_email_form_validate' 
```

# mysql - 在mysql中记录存储过程的持续时间（以毫秒为单位）

> ID：15375619
> 
> 赞同：0
> 
> 时间：2013-03-13T01:46:13.413
> 
> 标签：mysql, sql, datetime

我正在尝试以 MILLISECONDS 记录程序的持续时间。下面的语句在 SQL Server 中运行良好。

```
 /* Log the duration of this procedure */
        @DurationMillisecs INT,
        @StartTime = GETDATE(),
        SET @DurationMillisecs = DATEDIFF(millisecond, @StartTime, GETDATE()) 
```

我现在正在尝试在 MySQL 中执行此操作，经过一些研究后，我尝试了以下方法，但它们返回的值彼此相同。所以我猜 UNIX_TIMESTAMP 不会以毫秒为单位计算。

```
SET StartTime =  UNIX_TIMESTAMP();
SET DurationMillisecs =  UNIX_TIMESTAMP() - StartTime;
SELECT DurationMillisecs; 
```

我也在下面尝试过，但同样的问题。

```
SET StartTime =  now();
SET DurationMillisecs = DATEDIFF( StartTime, now()); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:24:40.163

好的，发现它实际上是因为这是在 5.6.4 版本中作为功能添加的。

可以在这里找到[毫秒支持](https://stackoverflow.com/questions/2572209/why-doesnt-mysql-support-millisecond-microsecond-precision%22millisecond%20bug%22)

# ruby-on-rails - 使用俄罗斯娃娃手动过期缓存

> ID：15375623
> 
> 赞同：1
> 
> 时间：2013-03-13T01:46:52.473
> 
> 标签：ruby-on-rails, ruby-on-rails-4, russian-doll-caching

我有一个用户可以保存很多搜索和很多任务。我正在使用以下内容缓存它们

```
- cache user do
  - user.tasks.each do |task|
    - cache task do
      # do something with task

- cache user do
  - user.saved_searches.each do |search|
    - cache search do
      # do something with search 
```

我添加了通过选项更新用户的`touch`选项，只要这些记录中的任何一个被更新。我想澄清的问题是这种情况：

我已经更新了一个搜索，它使该搜索的缓存过期，实际上是用户的缓存。由于用户的缓存已过期，`user.tasks`将被执行。

有没有办法防止这种情况？

我正在考虑添加一个密钥`cache user`并手动使我在使用`cache_digest`gem 之前一直在做的缓存过期，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-08T17:52:38.737

[正如Rails Guide on缓存所](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)展示的，您可以使用集合的最新updated_at，而不是使用用户的缓存键来使集合过期。例如

```
- cache("user-tasks/#{user.id}-#{user.tasks.maximum(:updated_at).try(:to_i)}") do
  - user.tasks.each do |task|
    - cache task do
      # do something with task

- cache("user-searches/#{user.id}-#{user.saved_searches.maximum(:updated_at).try(:to_i)}") do
  - user.saved_searches.each do |search|
    - cache search do
      # do something with search 
```

# ruby - 如何在 Ruby 中将 IO 对象转换为字符串？

> ID：15375624
> 
> 赞同：23
> 
> 时间：2013-03-13T01:47:03.093
> 
> 标签：ruby, io

我正在使用一个 IO 对象（一些`STDOUT`输出文本），并且我正在尝试将其转换为字符串，以便我可以进行一些文本处理。我想做这样的事情：

```
my_io_object = $stdout
#=> #<IO:<STDOUT>>

my_io_object.puts('hi')  #note: I know how to make 'hi' into a string, but this is a simplified example
#=>hi

my_io_object.to_s 
```

我尝试了一些事情并得到了一些错误：

```
my_io_object.read 
#=> IOError: not opened for reading

my_io_object.open
#=> NoMethodError: private method `open' called for #<IO:<STDOUT>>

IO.read(my_io_object)
#=> TypeError: can't convert IO into String 
```

我已经阅读了 IO 类方法，但不知道如何操作该对象中的数据。有什么建议么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-13T22:57:30.313

我通过将输出定向到 StringIO 对象而不是 STDOUT 来解决这个问题：

```
> output = StringIO.new
#<StringIO:0x007fcb28629030>
> output.puts('hi')
nil
> output.string
"hi\n" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T01:50:37.133

`STDOUT`接受字符串，它不提供字符串。您可以写入它，但不能读取它。

```
STDOUT.write("hello") # => hello
STDOUT.read # => IOError: not opened for reading 
```

# ios - iOS 在块中返回布尔值

> ID：15375627
> 
> 赞同：0
> 
> 时间：2013-03-13T01:47:10.433
> 
> 标签：ios, boolean, block, class-method

我正在尝试从我调用的类方法中返回一个 bool 值，该类方法中有一个块。我收到错误，发送不兼容的块指针类型......我该如何解决这个问题？我只想知道我调用的类方法是否完成有或没有错误......

```
+ (BOOL)saveSelectedDepartmentsToParse:(NSMutableDictionary *)dictionary {

    NSArray *array = [dictionary allKeysForObject:@"YES"];
    NSMutableArray *trimmedArray = [[NSMutableArray alloc] init];

    for (NSString *string in array) {

        NSString *final = [string removeAllInvalidCharacters];
        [trimmedArray addObject:final];
    }

    NSLog(@"Array = %@", trimmedArray);

    PFInstallation *currentInstallation = [PFInstallation currentInstallation];

    [currentInstallation removeObjectForKey:@"channels"];
    [currentInstallation addObjectsFromArray:trimmedArray forKey:@"channels"];
    [currentInstallation saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {

        if (error == nil) {

            NSLog(@"Parse Save Succeeded");

            [self saveDepartmentsDictionary:dictionary];
        }
        else {

            NSLog(@"Parse Save Failed, %@", error.localizedDescription);
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:59:50.413

> 我只想知道我调用的类方法

这是对异步代码如何工作的误解。当您向 提供块时`saveInBackgroundWithBlock:`，该代码不会立即执行。它在稍后由 Parse 框架执行，如果块被定义为具有一个，则 Parse 执行此操作的任何部分都将获得返回值，但事实并非如此。您的块不会在您编写它的那一刻执行，因此您不能在编写它的那一刻返回任何内容。

您的代码没有调用该块，并且您无法从中将值返回给您的代码。这样做没有意义。如果您的代码的另一部分想要知道保存何时完成，您将需要使用返回值以外的其他机制，例如从您的块中调用方法、发布通知或键值观察。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T02:19:45.597

从块关键字`InBackground`：

```
[currentInstallation saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
    if (error == nil) {
        NSLog(@"Parse Save Succeeded");
        [self saveDepartmentsDictionary:dictionary];
    } else {
        NSLog(@"Parse Save Failed, %@", error.localizedDescription);
    }
}]; 
```

我猜这个块是异步调用的。

如果你想得到结果，你可以在这里等到块被执行，但是这样就`saveInBackgroundWithBlock`没有用了。

所以 NSNotification 可能会更好：

```
[currentInstallation saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
    if (error == nil) {
        NSLog(@"Parse Save Succeeded");
        [self saveDepartmentsDictionary:dictionary];
        [[NSNotificationCenter defaultCenter] postNotificationName:kNotificationParseSaveSucceeded object:nil];
    } else {
        NSLog(@"Parse Save Failed, %@", error.localizedDescription);
        [[NSNotificationCenter defaultCenter] postNotificationName:kNotificationParseSaveFailed object:nil];
    }
}]; 
```

# eclipse-juno - Eclipse Juno 颠覆性 {root_prefix} 标签装饰器不起作用

> ID：15375628
> 
> 赞同：0
> 
> 时间：2013-03-13T01:47:11.783
> 
> 标签：eclipse-juno, eclipse-indigo, subversive

颠覆性的 {root_prefix} 标签装饰器在我的 Juno 中不起作用。它在我的 Indigo 中运行良好。

任何人都可以确认 {root_prefix} 在您的 Juno 中有效吗？

我真的很想念这个功能，看看我是在包资源管理器中处理主干、分支还是标签。似乎 IntelliJ 还没有提供它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:36:04.597

我也遇到过这个问题，因此我将项目的文本装饰更改为以下内容：{outgoing_flag} {name} {revision} [{short_url}]

{short_url} 变量替换为简洁的标签。例如“分支/HelloWorld”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:58:10.510

最新版本似乎解决了这个问题。感谢颠覆性的开发者！颠覆性 SVN 连接器版本：3.0.1.I20130331-1700

# jquery - 用 jquery 选择不能足够具体

> ID：15375632
> 
> 赞同：0
> 
> 时间：2013-03-13T01:47:23.687
> 
> 标签：jquery, jquery-selectors

我有以下 HTML：

```
<div class="myclass">
    <form class="aform">
       <select name="first"></select>
       <select name="second"></select>
    </form>
</div> 
```

我现在将所有 div 放入一个变量中：

```
mydiv = $(".myclass"); 
```

现在我需要选择“选择”标签之一。我尝试了以下查询：

```
$('select[name="first"]',mydiv).html("Cool things to insert!"); 
```

但是我的 jquery 选择正在更改两种选择形式，而不是仅更改我按名称选择的一种。

我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:51:15.203

试试`mySelect = $(.myclass select[name="first"]);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:52:43.770

试试看：

```
$('.myclass').find('select[name="first"]').html("Cool things to insert!"); 
```

请参阅 jQuery 文档：[.find()](http://api.jquery.com/find/)

希望这个答案可以帮到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:54:43.757

[我认为您的代码运行良好（在http://jsfiddle.net/wVccE/](http://jsfiddle.net/wVccE/)尝试）。如果您检查该元素，您会发现只有第一个发生了`select`变化。

但是我认为更改内部 html 没有任何意义`select`，也许您真正想要的是 single`select`和 multiple `option`？

# magento - 打开缓存时，Magento 模块 SQL 安装脚本不运行

> ID：15375637
> 
> 赞同：0
> 
> 时间：2013-03-13T01:47:54.113
> 
> 标签：magento, magento-1.4

我为我的扩展创建了一个 SQL 安装脚本，它运行得很好。我正在开发关闭缓存的扩展。当我打开缓存时，安装脚本没有运行，我不知道为什么。

我尝试通过管理面板清除所有 Magento 缓存，刷新缓存存储，手动删除 magento/var/cache 文件夹的内容，清除 APC 缓存，从命令行清除 redis 后端并重新启动 PHP过程，但没有任何效果。我设法让安装脚本运行的唯一方法是关闭缓存。

有谁知道为什么会发生这种情况？我正在使用 Magento v1.4.0.0 RC1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:52:44.907

安装脚本应该只运行一次，并且只有当您通过更新模块 config.xml 的版本来告诉 Magento 这样做时。此配置被缓存，因此清除所有缓存并重新加载页面......它应该运行安装脚本。

您始终可以通过重置数据库中模块的版本（在 magento 数据库的 core_resource 表中）来重置 Magento 用于运行安装脚本的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T13:57:00.327

更新脚本由 Mage_Core_Model_App::_initModules() 方法运行，但仅在缓存为空或禁用时运行。

因此，请确保在 index.php 中的 Mage::run() 调用之前不要以任何方式访问模块配置。

# dreamweaver - 互联网探索弄乱了我的 Photoshop 模板

> ID：15375642
> 
> 赞同：0
> 
> 时间：2013-03-13T01:48:32.367
> 
> 标签：dreamweaver, photoshop

我不擅长创建这个网站。但我需要我的平面设计网页作品集。所以我在photoshop上创建了模板。切了。并保存为网络。然后我在 Dreamweaver 中打开它。我所做的一切都是为我的按钮翻转。以及它在 IE 中的外观

stormilloart.com

在 Opera、Safari、Firefox 中检查它 - 看起来很完美。但在 Internet Explorer 中，一切都搞砸了。也许有一个修复。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:10:16.387

当您将图像放入锚标记时，IE 会在其周围添加边框。但是 Photoshop 会获取切片图像的精确宽度和高度。由于在图像周围添加了边框，因此会产生布局问题。

要解决此问题，请删除锚标记内图像周围的边框。

在 head 部分添加以下代码。

```
<style>
    a img {
        border-width : 0;
    }
</style> 
```

# java - 无法在以下函数中发现 SQL 语法错误：导致异常

> ID：15375653
> 
> 赞同：2
> 
> 时间：2013-03-13T01:49:19.263
> 
> 标签：java, mysql, sql

我不断收到以下错误。

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: 
You have an error in your SQL syntax; check
the manual that corresponds to your MySQL server version for 
the right syntax to use near '= 3' at line 1 
```

我浏览了整个代码，此时只有 2 个 SQL 函数被调用，能够导致此错误：

1.  读

    ```
    public void Read (String userName) /*have checked validity*/
    try {
        con = getConnection();

        PreparedStatement pstmt = con.prepareStatement("SELECT * FROM " + 
                                  tableName + 
                                 " WHERE userName=?");

            pstmt.setString(1,userName);

        ResultSet rs = pstmt.executeQuery();

        User user;
        PrintQuery(rs);
        rs.close();
        pstmt.close();
        releaseConnection(con);
        return user;

    } 
    ```

2.  获取项目

    ```
     public void getItem(int userid) /*have checked validity*/
     try {
        con = getConnection();

        Statement stmt = con.createStatement();

        PreparedStatement pstmt = con.prepareStatement("SELECT * FROM " 
                                  + tableName +"WHERE UserId=?");
        pstmt.setInt(1,userid);
        rs = pstmt.executeQuery();
        PrintQuery(rs);
        stmt.close();
        releaseConnection(con);

    } 
    ```

我现在被这些问题困扰了几个小时，但我无法解决它。我仔细检查了这些参数是否为空等。它们不是。事实上，它们都很好地存在于数据库中。我无法弄清楚我哪里出错了。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T01:50:31.010

错误是因为在 tableName 和子句`GetName`之间的连接过程中缺少额外的空间`WHERE`

```
+ tableName +" WHERE UserId=?");
           // ^ add extra space here 
```

# open-source - ASP.Net 动态数据是开源的吗？

> ID：15375654
> 
> 赞同：0
> 
> 时间：2013-03-13T01:49:20.107
> 
> 标签：open-source, asp.net-dynamic-data

根据这篇文章[http://www.infoq.com/articles/role-open-source-asp.net](http://www.infoq.com/articles/role-open-source-asp.net)动态数据是开源的。[但是我在http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/4284ca5270b9](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/4284ca5270b9)上找不到 System.Web.DynamicData并且谷歌搜索也失败了。

Asp.Net 动态数据是开源的吗？如果是的话，任何人都可以提供存储库的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:29:13.107

不，它不是开源的。我认为引用的文章中的参考是指使用 DynamicData.dll 构建的开源**项目**，而不是 dll 本身。

# mysql - 在 SELECT 语句中使用“IF”来检查是否存在另一列

> ID：15375655
> 
> 赞同：0
> 
> 时间：2013-03-13T01:49:24.220
> 
> 标签：mysql, sql

我使用`INSERT`所有`SELECTED`数据到一个新表，但我添加了额外的字段`IDS_EXIST`，并确定每个数据是否有他们的 ids`NOT NULL`生病`INSERT 'Y'`但如果其中一个转`NULL`我会`INSERT 'N'`

是否可以在 select 语句中使用这样的 if 条件？

```
SELECT IF(C.ID != NULL AND C.UID != NULL AND C.SID != NULL,'Y','N'),
       C.NAME,
       C.ADDRESS,
       C.DATE 
FROM CLAIMS C 
```

因为我知道一旦 IF 条件可以这样使用

```
SELECT IF('condition','value if true','value if false') 
```

我多次反转我的查询，但仍然在查询中出现语法错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:50:58.993

是的，只要您使用`IS NOT NULL`（[使用`NULL`值](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)），它就会起作用。

> 您不能使用算术比较运算符（例如`=`、`<`或`<>`）来测试`NULL`。

```
SELECT IF(1 != 2 AND 1 != NULL,'Y','N') 
```

退货`N`

```
SELECT IF(1 != 2 AND 1 IS NOT NULL,'Y','N') 
```

退货`Y`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:52:04.207

与 *not* `NULL`比较时，使用`IS NOT NULL`

```
SELECT   IF(C.ID IS NOT NULL AND C.UID IS NOT NULL AND C.SID IS NOT NULL,'Y','N'),
         C.NAME,
         C.ADDRESS,
         C.DATE 
FROM     CLAIMS C 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:44:58.297

你可以试试

选择 c.ID 为 null 且 c.UID 不为 null 且 C.SID 不为 null 的情况，然后 'Y' else 'N' end

# gwt - 启动主项目时，GWT 责怪 RequestFactory ValidationTool 必须在子模块（项目）上运行

> ID：15375656
> 
> 赞同：2
> 
> 时间：2013-03-13T01:49:38.400
> 
> 标签：gwt, maven, requestfactory, google-plugin-eclipse, gwt-maven-plugin

`GWT 2.5.0`/ `Google Plugin for Eclipse`/ `m2e`/ `GWT-maven-plugin 2.5.0`/`Request Factory`

我根据[使用 maven](https://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven)的 GWT wiki 配置我的项目，它运行良好，但在我的子项目中遇到了一些问题。

假设我有两个项目 A 和 B，A 是标准 GWT 项目，B 是子项目，有一个 GWT 模块，它包含一些常见的 UI 小部件和一些常见的实体代理和 RequestFactory，A 项目通过 Maven 依赖依赖 B 项目，并且在A的Module.gwt.xml中，B模块上也有继承。

问题是当我尝试使用 GPE 启动一个项目时，它归咎于：

```
The RequestFactory ValidationTool must be run for the … XXXRequestFactory type 
```

其中 XXXRequestFactory 在 B 项目中。我必须在 Eclipse 中关闭项目 B，所以它不会受到责备，当我想修改 B 项目中用于查看更改的 B 项目中的某些内容时，这很麻烦，我必须关闭 B 然后查看更改，然后打开 B 和做了改变...

我想知道是否有办法解决这个问题，这样我的生活会更轻松。谢谢。

还有一件事，我也在项目 B 中使用`maven-processor-plugin`和`build-helper-maven-plugin`，并确保在我调用`maven install`B 时目标运行，但似乎没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T22:11:12.350

我也有这个问题，这是解决这个问题的解决方案。这个答案假设您需要在开发模式下执行 GWT 应用程序（正如您提到的，您尝试使用 gwt eclipse 插件）

1.  您可能已经知道这`RequestFactory`必须在执行之前验证接口、域类型和代理。因此，您需要为此启用注释处理，除了所述验证之外，它还会为服务器端组件创建映射数据。如果此过程不成功，它将抛出您提到的错误。

2.  您可以在项目属性中为项目 B 启用 requestfactory 验证。转到编译器属性，启用注释处理，提供`requestfactory-apt.jar`. 在此之后，当您编译项目时，您可以`.apt_generated`在项目主目录中看到包含映射文件的文件。如果您打开其中一个，您可以看到为您的代理生成的映射。

3.  启动应用程序（在您的情况下为项目 A），它应该运行没有任何错误

在 Maven 世界中，您必须指定此 apt jar 的依赖项。除此之外，您可能会在这些生成的类中遇到编译器错误`mvn compile`，要解决该问题，只需删除`.apt_generated`.

# gnuplot - Linux 上的 gnuplot 在数据点上画出丑陋的小点

> ID：15375657
> 
> 赞同：0
> 
> 时间：2013-03-13T01:49:51.370
> 
> 标签：gnuplot

我可以使用 Linux 上的 gnuplot 4.6 和 Windows 上的 gnuplot 4.7。当我使用 Windows 版本时，我得到了一个漂亮的图表。然而，Linux 版本在数据点上画了一个小点。那看起来非常难看。当然，我使用完全相同的 .plt 文件来渲染两个图表。如何阻止 Linux 版本绘制那些小点？

![在此处输入图像描述](../Images/c2340df841720a5894f8a7deb31570b6.png)

使用的脚本是：

```
set terminal pdfcairo
set output "foo.pdf"
plot 'bar.dat' with linespoints pointtype 4 
```

# javascript - ASP.NET 上的 getElementByID 问题

> ID：15375672
> 
> 赞同：0
> 
> 时间：2013-03-13T01:51:39.313
> 
> 标签：javascript, asp.net

我正在使用此代码来获取`ClientId`

```
"<%=ddlClienteSuc.ClientID%>" 
```

它返回这个：

```
ctl00_ContentPlaceHolder1_ddlClienteSuc 
```

并且不能与`getElementById`

```
document.getElementById("ctl00_ContentPlaceHolder1_ddlClienteSuc") 
```

这有效：

```
document.getElementById("ctl00$ContentPlaceHolder1$ddlClienteSuc") 
```

我能做些什么？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:58:50.103

设置 ClientIDMode="Static" 你应该得到 ddlClienteSuc 而不是 ctl00_ContentPlaceHolder1_ddlClienteSuc

# jquery - 如何使用 jquery 引用 jsf 对象？

> ID：15375676
> 
> 赞同：1
> 
> 时间：2013-03-13T01:52:05.030
> 
> 标签：jquery, jsf

我想用 jquery 获得一个文本框对象。

```
$(function() {
    // create a datepicker with default settings
    $("[id='#{fbForm.beginDate}']").mobiscroll().date({
        invalid: {
            daysOfWeek: [0, 6], 
            daysOfMonth: ['5/1', '12/24', '12/25']
        }, 
        theme: 'android-ics light', 
        display: 'bottom', 
        mode: 'scroller', 
        dateOrder: 'mmD ddyy'
    });
}); 
```

这不行吗？为什么是什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:31:11.287

假设你有

```
<h:form id="myForm">
    <h:inputText id="myText" />
</h:form> 
```

您可以使用 jQuery 访问组件

```
var myText = $('#myForm\\:myText'); 
```

例子：

```
<script type="text/javascript">
    //<![CDATA[
    window.onload = function() {
        var myTextValue = $('#myForm\\:myText').val();
        alert(myTextValue);
    };
    //]]>
</script>

<h:form id="myForm">
    <h:inputText id="myText" value="#{fbForm.beginDate}" />
</h:form> 
```

或者您可以通过添加来使用普通组件`prependId="false"`ID `<h:form>`：

```
<script type="text/javascript">
    //<![CDATA[
    window.onload = function() {
        var myTextValue = $('#myText').val();
        alert(myTextValue);
    };
    //]]>
</script>

<h:form prependId="false">
    <h:inputText id="myText" value="#{fbForm.beginDate}" />
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:34:12.240

万一您使用的是 RichFaces，您也​​可以使用：

**rich:clientId(id)** - 通过它的短 id 返回组件的客户端 ID。

**rich:element(id)** - 返回传递的短 id 的 DOM 元素

**rich:component(id)** - 返回 Richfaces 客户端组件实例以调用一些 API 方法。

**rich:isUserInRole(role)** - 如果用户具有指定角色则返回。

**rich:findComponent(id)** - 返回给定短 id 的组件实例

**rich:jQuery(id)** - 返回一个带有给定短 id 元素的 jQuery 对象

例子：

```
<h:form>
    <h:inputText id="input">
        <a4j:ajax render="out" />
    </h:inputText>
    <h:outputText value="#{rich:findComponent('input').value}" id="out" />
</h:form> 
```

有关如何执行此操作的更多信息和示例：

[http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=functions&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=functions&skin=blueSky)

问候，

# android - 是否可以在运行时更新android应用程序然后重新加载它

> ID：15375679
> 
> 赞同：2
> 
> 时间：2013-03-13T01:52:26.237
> 
> 标签：android, auto-update

这个问题可能早有人问过，但没有得到任何明确的答案。我基本上不希望和客户端交互更新和其他东西，他们所能看到的只是应用程序正在运行并且他们很高兴。但为此，我需要一些后台线程或检查市场是否有新更新并在后面更新它并在应用更新后重新启动应用程序的东西。

PS我对android开发完全陌生，如果我听起来很疯狂，真的很抱歉，但这是我的要求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:12:28.277

您无法在没有用户交互的情况下更新（或安装）应用程序，除非

1.  你是一个系统应用程序（自定义 ROM）
2.  您的设备已获得 root 权限，并且您的更新程序具有 root 权限。

此外，没有可用于检查 Google Play 商店中可用应用程序版本的官方 API。

您可以通过跟踪 Google Play 之外的当前版本，然后通过启动市场链接提示更新用户来实现您正在尝试做的一些事情。如果您从辅助应用程序执行此操作，您甚至可以等待更新完成，然后重新启动该应用程序。

在实践中，您不能在没有用户交互的情况下进行静默安装/更新，这是一件好事（tm），因为前几位评论者已经说明了原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T02:10:07.850

AFAIK，如果你有 root 访问权限是可能的，过程如下：

1.  您的应用位于`/system/app`文件夹中（作为系统应用）
2.  您需要以下权限：

    ```
    android.permission.INSTALL_PACKAGES
    android.permission.DELETE_PACKAGES
    android.permission.CLEAR_APP_CACHE
    android.permission.WRITE_EXTERNAL_STORAGE
    android.permission.MOUNT_UNMOUNT_FILESYSTEMS 
    ```

3.  您的应用必须使用系统签名进行签名

    ```
    java -jar signapk.jar platform.x509.pem platform.pk8 helloworld.apk hello.apk 
    ```

4.  检查后台线程中的更新并将更新的 .apk 文件下载到临时位置，例如`apk_path`

5.  以编程方式执行`pm install apk_path`命令，下面是一个片段：

    ```
    public String silentInstallation(String apkPath)
    {
            String[] args = { "pm", "install", "-r", apkPath };             
            ProcessBuilder processBuilder = new ProcessBuilder(args);  
            Process process = null;  
            InputStream errIs = null;  
            InputStream inIs = null;  
            try {  
                ByteArrayOutputStream baos = new ByteArrayOutputStream();  
                int read = -1;  
                process = processBuilder.start();  
                errIs = process.getErrorStream();  
                while ((read = errIs.read()) != -1) {  
                    baos.write(read);  
                }  
                baos.write('\n');  
                inIs = process.getInputStream();  
                while ((read = inIs.read()) != -1) {  
                    baos.write(read);  
                }  
                byte[] data = baos.toByteArray();  
                result = new String(data);  
            } catch (IOException e) {  
                e.printStackTrace();  
            } catch (Exception e) {  
                e.printStackTrace();  
            } finally {  
                try {  
                    if (errIs != null) {  
                        errIs.close();  
                    }  
                    if (inIs != null) {  
                        inIs.close();  
                    }  
                } catch (IOException e) {  
                    e.printStackTrace();  
                }  
                if (process != null) {  
                    process.destroy();  
                }  
            }  
            return result;  
    } 
    ```

希望能帮助到你。

# backbone.js - Backbone.js 在重置事件发生之前修改新获取的集合

> ID：15375688
> 
> 赞同：1
> 
> 时间：2013-03-13T01:53:22.703
> 
> 标签：backbone.js, backbone-views, backbone-events

我正在尝试执行以下操作：

1.  从服务器获取数据
2.  在通知视图之前向模型添加从零开始的索引
3.  最后运行让视图触发“渲染”事件

我试图通过在集合中使用成功回调来做到这一点

**查看之前**

```
initialize: () ->
  @collection.on 'reset', @render, this

render: () -> ...render code... 
```

**收集前**

```
search: () ->
  @fetch { 
    success: @fetch_success
  }  

fetch_success: () ->
  for i in [0...collection.models.length]
    collection.models[i].set('go_index', i) 
```

这样做会导致视图在成功回调更新集合之前触发其渲染事件。我想出的解决方案是让视图监听一个`fetched`事件，然后在它成功修改集合后让集合触发：

**查看之后**

```
initialize: () ->
  @collection.on 'fetched', @render, this

render: () -> ...render code... 
```

**收集后**

```
initialize: () ->
  @on 'reset', @add_index_and_notify, this

add_index_and_notify: () ->
  for i in [0...@models.length]
    @models[i].set('go_index', i)
  @trigger('fetched') 
```

这很好用，我只是想知道这是否是完成此任务的最优雅的方式，或者是否有我缺少的内置方式。

**更新 3/15**

我想出了一个更简洁的解决方案，它不需要视图来做任何肮脏的工作，而且我不必创建自定义事件。诀窍是听`sync`事件（*在 之后* `reset`触发）

**查看决赛**

```
initialize: () ->
  @collection.on 'sync', @render, this

render: () -> ...render code... 
```

**收集决赛**

```
initialize: () ->
  @on 'reset', @add_index, this

add_index: () ->
  for i in [0...@models.length]
    @models[i].set('go_index', i) 
```

希望这种模式可以帮助将来搜索的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:52:50.193

我已经在原始问题中发布了解决方案，但我想我会正式发布作为答案：

更简洁的解决方案不需要视图来做任何脏活，也不需要自定义事件。诀窍是听`sync`事件（*在 之后* `reset`触发）

**查看决赛**

```
initialize: () ->
  @collection.on 'sync', @render, this

render: () -> ...render code... 
```

**收集决赛**

```
initialize: () ->
  @on 'reset', @add_index, this

add_index: () ->
  for i in [0...@models.length]
    @models[i].set('go_index', i) 
```

希望这种模式可以帮助将来搜索的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T02:01:02.297

您的视图应该从集合中单独获取模型及其索引，因为索引实际上并不是模型记录本身的一部分。尝试让您的视图用于`collection.each`循环模型，因为那里的回调函数将`model, index, collection`作为参数。请记住，视图不仅可以将单个模型传递给其模板。

```
class CollectionView1 extends Backbone.View
  render: =>
    $el = @$el
    $el.empty()
    @collection.each (model, index) ->
      modelView = new ModelView1 {model, index}
      $el.append modelView.render().el
    return this 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:36:33.250

你为什么不听集合的**添加事件**..

```
initialize: function() {
  this.listenTo(this.collection, 'reset', this.render);
  this.listenTo(this.collection , 'add' , this.add_index_and_notify);
  this.index = 0;
},

add_index_and_notify: function(model){
    model.set({go_index : this.index++}, {silent : true});
    // Render the model here
},

render: function(){
   this.$el.empty().append(Your template);
   this.index= 0;
   _.each(this.collection.models, function(model){
         this.add_index_and_notify(model);
   }
} 
```

# java - 链表插入

> ID：15375690
> 
> 赞同：0
> 
> 时间：2013-03-13T01:53:48.743
> 
> 标签：java, heap-memory, insertion-sort

当我尝试在 2000 个元素的列表上运行此代码时，谁能告诉我为什么我会耗尽堆空间？

```
public static <T extends Comparable <? super T>> void insertionSort2(List<T> portion){
    int i = 0;
    int j = 0;
    T value; 
    //List <T> sorted = new LinkedList<T>();

    // goes through the list
    for (i = 1; i < portion.size(); i++) {

        // takes each value of the list
        value = (T) portion.remove(i);

        // the index j takes the value of I and checks the rest of the array
        // from the point i
        j = i - 1;

        while (j >= 0 && (portion.get(j).compareTo(value) >= 0)) {
            portion.add(j + 1, portion.get(j));

            j--;

        }
        // put the value in the correct location.
        portion.add(j + 1, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:20:29.407

这似乎可以解决您的方法：

```
while (j >= 0 && (portion.get(j).compareTo(value) >= 0)) {
            portion.add(j, portion.remove(j)); 
```

您的代码不断添加元素而不是移动它们。

# java - 检查aa文件是否在同一天早些时候运行

> ID：15375691
> 
> 赞同：0
> 
> 时间：2013-03-13T01:54:08.910
> 
> 标签：java, date, io

我需要创建一个程序，在每天开始时将 int 设置为 01。每次运行文件时，int 都会递增直到第二天。这个 int 将被插入到一个文件名中，例如 FileName(insertdatehere)01.txt、FileName(insertdatehere02.txt、FileName(insertdatehere)03.txt 等...

我想知道这是否可能：

-检查文件是否已经存在，如果存在，则 int 值将增加。这将起作用，因为文件名上有日期，因此每天都会创建一个新的文件名。

我是朝着正确的方向前进，还是应该完全重新考虑这个问题？

对不起，如果这不清楚，如果你需要我澄清，我会的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:04:30.440

您的想法似乎是正确的，以这种方式进行可能会很好。

需要注意的是，如果存在两个相同的进程并且都尝试创建一个文件，假设它不存在。

只要您考虑到这种情况，并且您的流程全天可靠地运行（并且您不会陷入时区陷阱），您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:24:12.307

您是否尝试使用**java.util.Date**类来设置时间戳、日期等。您可以在文件在其他文件中打开时设置日期，或者您可以在同一文件的某个特定位置设置相同的值。然后，每当您再次打开文件时，您都可以比较并检查已设置的较早日期。这肯定会对你有所帮助。首先自己尝试一下，然后如果您仍然无法执行相同的帖子问题，无论您遇到什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:59:26.670

你的想法很好。

但是对于不存在任何文件并且两个进程试图同时创建具有相同名称的文件的情况，就会出现问题。

上述问题可以通过在Java中使用同步来解决，这样代码块（其中包含检查文件是否存在并创建新文件的逻辑）不能同时被访问。

# memory-management - 现有内存的 Directx 纹理接口

> ID：15375692
> 
> 赞同：2
> 
> 时间：2013-03-13T01:54:14.967
> 
> 标签：memory-management, directx, ipc

我正在编写一个渲染应用程序，它作为一种虚拟相机与图像处理器进行通信，并且我试图找出将纹理数据从一个进程写入另一个进程的等待图像缓冲区的最快方法。

从理论上讲，我认为应该可以将 1 个 DirectX 副本从 VRAM 直接复制到我想要的内存区域，但我无法弄清楚如何指定要占用纹理的内存区域，因此必须执行额外的内存。欢迎使用 DX9 或 DX11 解决方案。

到目前为止，这里的文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb174363](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174363(v=vs.85).aspx) (v=vs.85).aspx最有希望。

> “在 Windows Vista 中，CreateTexture 可以从系统内存指针创建纹理，从而允许应用程序更灵活地使用、分配和删除系统内存”

我使用 2010 年 6 月的 Directx SDK 在 Windows 7 上运行，但是，每当我尝试按照它指定的方式使用该函数时，该函数都会失败并显示无效参数错误代码。这是我作为测试尝试的调用：

```
 static char s_TextureBuffer[640*480*4]; //larger than needed
    void* p = (void*)s_TextureBuffer;
    HRESULT res = g_D3D9Device->CreateTexture(640,480,1,0, D3DFORMAT::D3DFMT_L8, D3DPOOL::D3DPOOL_SYSTEMMEM, &g_ReadTexture, (void**)p); 
```

我尝试了几种不同的纹理格式，但没有运气。我已经开始研究 DX11 解决方案，因为我习惯了 DX9，所以进展缓慢。谢谢！

# javascript - 将对象传递给 jQuery 方法

> ID：15375695
> 
> 赞同：1
> 
> 时间：2013-03-13T01:54:36.343
> 
> 标签：javascript, jquery, oop

```
function unit(){
    this.html=$('<div></div>');
    this.html.click(this,function(e){
        e.data.move(e.data.x,e.data.y);
    });
}

$('#factory').click(function(){
    unit();
} 
```

我正在尝试在 Javascript 中学习 OOP。这是我为练习而制作的战争游戏中一个单位的“课程”。每次单击工厂时，都会创建一个新单元。然而，当我点击一个旧单元来移动它时，最新的单元总是移动的那个。所以基本上，`e.data`总是对应于最新的单元，而不是被点击的那个。我如何使它`e.data`始终对应于被点击的单位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:05:50.613

`this``window`如果您不使用`new`to invoke是一个参考`unit();`。现在的方式是，`window.html`每次单击时都会覆盖。

要创建一个新对象并`this`引用该对象，请执行以下操作：

```
new unit(); 
```

# java - 如何在java中显示输入的姓名和时间列表？

> ID：15375696
> 
> 赞同：0
> 
> 时间：2013-03-13T01:54:40.130
> 
> 标签：java

![在此处输入图像描述](../Images/5feb6e151ea38e911fa15ca98574f8a3.png)

请帮助我..我在图片中有一个代码..我想使用java显示名称和时间列表..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:00:23.857

首先，您需要将名称存储在数组中，就像您尝试将时间存储在数组中一样。现在，您将它们存储在`stry`变量中，每次循环迭代时都会覆盖该变量。像这样的东西：`p[i]=br.readLine();`

其次，在您阅读时间的部分，（我假设）您应该使用变量`pt`而不是`p`.

第三，您需要将索引从您读取时间的位置`r`更改。`i`像这样的东西：`pt[r]`到`pt[i]`.

第四，您需要一行来读取和存储`wt[i]`.

第五，您需要创建另一个循环来输出数据：

 `````
for (int i=0; i<r; i++) {
    System.out.print("\n" + p[i] + "\t\t" + pt[i] + "\t\t" + wt[i]);
} 
````  `您的代码还有其他问题，例如变量名称不佳和数组使用不当，但我假设您是初学者，所以我不会用这些来纠缠您。``

# delphi - 主/明细如何工作？

> ID：15375698
> 
> 赞同：-2
> 
> 时间：2013-03-13T01:54:49.517
> 
> 标签：delphi, master-detail

我找到了一些教程，但它们仍然给我留下了问题。

让我们以 2 个表的经典示例为例，一个用于客户详细信息，一个用于订单详细信息。

数据库中的`customers`表有：

*   一个自动递增的整数`customer_id`作为主键
*   客户名称的文本字段
*   联系方式的文本字段

`orders`桌子上有 ：

*   一个整数`customer_id`，它是引用`customers`表的外键
*   其他一些东西，比如对一堆项目编号的引用
*   一个整数`order_value`，用于存储订单的现金价值

我需要两个数据集组件、两个查询和一个连接。

到现在为止还挺好？还是我已经错过了什么？

现在，教程说我必须将与数据库网格相对应的数据源的 MasterSource 设置为与表相对应`orders`的数据源，在这种情况下，设置为.`customers``MasterFields``customer_id`

还要别的吗？例如，我是否应该将与表`Detailfields`对应的数据源的查询设置为？`customers``customer_id`

我应该使用属性还是[参数化查询](http://docwiki.embarcadero.com/RADStudio/XE3/en/Establishing_Master-detail_Relationships_Using_Parameters)？

好的，至此，我们已经按照经典教程进行操作，可以滚动浏览`customers`DB 网格，查看 DB 网格中显示的当前客户的所有订单`orders`。当用户单击`customers`数据库网格时，我必须关闭（）；然后打开（）；`orders`查询以刷新其相应的数据库网格。

然而，那些教程似乎总是假设一个静态数据库，其中包含永远不会改变的现有内容。

当我问另一个问题时，我举了一个例子，我正在使用命令`INSERT INTO orders...`，并被告知这是一件坏事，我应该：

*   OrdersQuery.Append();
*   OrdersQuery.FieldByName('customer_id') := [一些值]';
*   OrdersQuery.FieldByName('item_numbers') := [某个值]';
*   OrdersQuery.FieldByName('order_value') := [某个值]';
*   OrdersQuery.Post();

那是对的吗？

我问是因为在我看来，命令将数据**放入，**而查询只应将其**取出**，但我可以看到命令没有通过数据源的查询链接到数据库网格。

这是一个选择问题，还是*必须*使用查询？

如果是这样，我似乎不能在查询中使用简单的 SQL 函数，例如 SUM、MIN< AVG、MAX，而必须将它们移到我的代码中。

如果我必须使用查询，我该如何实现 SQL`UPDATE`和`DROP`？

最后，我可以建立主/细节/细节关系吗？

假设我想要一个第三个 DB 网格，它显示客户所有订单的总数和平均值。它从`orders`表中获取数据（但不能使用 SUM 和 AVG），每次用户选择不同的客户时，该表都会更新，从而给出主/明细/明细关系。我是否只是将其设置为两个主/从关系？IE，数据库网格，数据源，总订单和平均订单查询仅`orders`引用并且没有引用`customers`，即使它确实使用`customer_id`？

在此先感谢您的帮助和澄清。我希望这个问题将来能成为其他人的参考（所以，请随时编辑它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:21:54.100

TLDR：在 SQL 世界中，Master/Detail 是一种古老的东西。

当有些人说“Master Detail”时，他们不会一路走下兔子洞。你的问题表明你确实想要。我想分享一些我认为有帮助的东西，但我认为没有人能真正完整地回答你的问题。

1.  对于某些人的目的，对于任何两个数据集，主详细信息的最小实现只不过是在主表中当前选定的行发生更改时触发的事件处理程序。然后使用此行过滤明细表数据集中的行，以便只有与主行的主键匹配的行可见。如果您在 Delphi 的 VCL 中的大多数类似 TTable 的对象中正确配置它，这是为您完成的，但即使是不明确支持主/详细配置的数据集也可以以这种方式运行，如果您愿意编写一些事件处理程序和过滤数据。

2.  在我以前的一位雇主那里，有人发明了一个 Master Detail 控制器组件，它连同一个鲜为人知的 Delphi ADO 组件变体，称为 Kamiak，并且它具有一些只熟悉 BDE-TTable 的人的属性大师细节的时代概念是没有预料到的。这是一项非常聪明的工作，它具有以下特点：

    *   您可以创建一个 ADO 记录集并将其保存在内存中，然后作为一个批处理，一次写入一系列详细信息行，当且仅当主行要存储到磁盘时。
    *   您可以将这些主从关系嵌套到几乎任意深度，因此您可以拥有主、详细信息和子详细信息记录。批量更新用于更新，以回答您问题的这一部分。要处理更新，您需要滚动您自己的 ORM 或 Recordset 层，或者使用预构建的缓存/记录集层。有许多选项，从 ADO 到 Delphi 的各种类似 ORM 的组件，甚至涉及客户端数据集或带有数据泵的公文包模型。
    *   您可以修改数据并将其发布到内存中的暂存区域，并一次刷新所有主行和明细行，或者放弃它们。这允许几乎对象关系级别的持久性管理。

尽管上面的 roll-your-own-ORM 方法看起来很可爱，但它并非没有它的阴暗面。系统中的奇怪错误导致我再也不想使用这种方法。我不想夸大其词，但我是否可以谦虚地建议存在这样的事情，即在主细节兔子洞中走得太远？不要去那里。或者如果你这样做了，意识到你真的在构建一个迷你 ORM，并准备好完成这项工作，其中应该包括一组非常可靠的单元测试和集成测试。即便如此，请注意您可能会发现一些非常奇怪的极端情况，并且可能会发现一些非常邪恶的错误潜伏在您美丽的 ORM/MasterDetail 事物中。

就插入而言，这当然取决于您是构建者还是用户。一个满足于在 VCL 中的任何表类之上构建并且从不想用 SQL 弄脏自己的手的人会认为，如果您不害怕 SQL，那么您的方法是错误的。不过，我想知道那个人将如何处理自动分配的身份主键。我将一个人记录存储在一个表中，然后我需要立即取回该人新分配的 ID，它是一个整数，我现在将使用该整数主键，将我的详细信息行与主行相关联，并且详细行，因此将主行的 ID 整数作为外键引用，因为我的 SQL 数据库构造良好，具有引用完整性约束，并且因为我 已经提前考虑了这一切，不想一遍又一遍地重复，我最终从这里开始，构建一个对象关系映射框架。我希望你能看到你的许多问题有多少可能的答案，这些答案导致了数以亿计或数百万种可能的方法，没有一个是正确的。我碰巧不相信 ORM，而且我认为在你上车之前，安全地离开这辆疯狂的火车。我手工编写我的 SQL 代码，我手工编写我的业务对象，并且我不使用任何花哨的 Master Detail 或 ORM 东西。但是，您可以选择随心所欲地做。导致数以亿计或数百万种可能的方法的答案，没有一个是正确的。我碰巧不相信 ORM，而且我认为在你上车之前，安全地离开这辆疯狂的火车。我手工编写我的 SQL 代码，我手工编写我的业务对象，并且我不使用任何花哨的 Master Detail 或 ORM 东西。但是，您可以选择随心所欲地做。导致数以亿计或数百万种可能的方法的答案，没有一个是正确的。我碰巧不相信 ORM，而且我认为在你上车之前，安全地离开这辆疯狂的火车。我手工编写我的 SQL 代码，我手工编写我的业务对象，并且我不使用任何花哨的 Master Detail 或 ORM 东西。但是，您可以选择随心所欲地做。

在 BDE/dBase/平面文件时代，我将作为“主详细信息”实现的内容，现在我只是简单地实现为主行的查询和详细信息行的第二个查询，当主行更改时，我刷新详细行查询，我根本不使用`MasterSource`TTable 对象中的或相关的 Master/Detail 属性。

# lua - 如何在lua中比较人类格式的时间？

> ID：15375699
> 
> 赞同：1
> 
> 时间：2013-03-13T01:55:00.133
> 
> 标签：lua

有没有办法将人类可读的时间“09:41:43”转换为某种可比较的格式？

我想要的是`function timeGreater(time1, time2)`，满足以下断言

```
assert(true == timeGreater("09:41:43", "09:00:42"))
assert(false == timeGreater("12:55:43", "19:00:43"))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:02:29.993

似乎一个简单的字符串比较可能就足够了（假设时间有效）：

```
function timeGreater(a, b) return a > b end

assert(true == timeGreater("09:41:43", "09:00:42"))
assert(false == timeGreater("12:55:43", "19:00:43")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T02:08:16.563

将您的时间转换为秒应该可以。下面的代码可能会起作用，LUA 不是我的强项！

```
function stime(s)
    local pattern = "(%d+):(%d+):(%d+)"
    local hours, minutes, seconds = string.match(s, pattern)
    return (hours*3600)+(minutes*60)+seconds
end

function timeGreater(a, b)
    return stime(a) > stime(b)
end 
```

# javascript - 点击事件只触发一次，页面加载完成后

> ID：15375704
> 
> 赞同：0
> 
> 时间：2013-03-13T01:55:13.890
> 
> 标签：javascript, jquery

我在 jQuery 中有一个点击事件。所需的行为是每次单击链接时执行的函数。然而，实际的行为是页面加载，然后函数执行一次，再也不会执行。有问题的代码如下。谢谢！

```
<!DOCTYPE html>
<head>
<meta charset="utf-8">

<style>
#sub {
position:fixed;
z-index:999;
margin-top:180px;
margin-left:200px;
display:none;}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
function showdiv(divid) {
   $('.menu').hide();
   $('#'+divid).fadeToggle('slow');
};
$(document).ready(function(){
    $('a#opt1').click(showdiv('sub'));
    $('a#opt2').click(function(){$('.menu').hide();});
}); 
</script>
</head>
<body>
    <li><a id="opt1" href="#">Option1</a></li>
    <li><a id="opt2" href="#">Option2</a></li>
</ul>
<ul id="sub">
    <li><a href="#">Mission</a></li>
    <li><a href="#">Press</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:56:54.790

`$('a#opt1').click(showdiv('sub'));`将立即运行该函数`showdiv`，将返回值设置为调用的值`onclick`（在这种情况下，什么都没有，因此您的点击处理程序似乎不起作用）。

您应该将其包装在一个匿名函数中。

```
$('a#opt1').click(function() { showdiv('sub') }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:58:29.817

您需要将该函数包装在一个匿名函数中：

```
$('a#opt1').click(function() {
    showdiv('sub');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:02:12.270

您应该将函数引用传递给`.click`. 在您的情况下，您传递了函数的返回值而不是实际函数。长话短说，你应该用`function(){}`：

```
$('a#opt1').click(function(){
    showdiv('sub');
}); 
```

[jQuery 文档](http://api.jquery.com/click/)实际上声明您必须传递`.click`一个函数，但您传递的`undefined`是您的示例。这就是为什么它只执行一次。

# xpages - 如何让货币符号显示在视图面板 xpages 中

> ID：15375706
> 
> 赞同：0
> 
> 时间：2013-03-13T01:55:16.473
> 
> 标签：xpages

我在 xpage 中有一个列，我想显示带有值的货币符号。在底层注释视图中它正在显示。我已经尝试过视图面板和动态视图，但都没有显示 $ 符号。它只显示数字。此外，如果它是一个整数（100.00 美元），它只显示 100。我希望它在小数点后显示尾随零以及货币符号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:20:23.897

在视图控件中，您可以将视图列的“显示类型”设置为“数字”，然后将“显示格式”设置为“货币”。这将使您能够设置您选择的货币符号并相应地对其进行格式化。因此，您的视图列的代码将如下所示：

```
<xp:viewColumn columnName="price" id="viewColumn4">
    <xp:this.converter>
        <xp:convertNumber currencySymbol="$" minFractionDigits="2" type="currency"></xp:convertNumber>
    </xp:this.converter>
    <xp:viewColumnHeader value="Price" id="viewColumnHeader4"></xp:viewColumnHeader>
</xp:viewColumn> 
```

在上面的示例`price`中存储为数字。

# clojure - Clojure 中点运算符和完全限定的命名调用之间的区别

> ID：15375712
> 
> 赞同：6
> 
> 时间：2013-03-13T01:55:58.403
> 
> 标签：clojure

我正在学习 Clojure。我仍然对语言和哲学没有很好的理解。

但我想更熟悉这种语言。因此，我开始阅读 Clojure 核心 API 文档，并在`clojure.core/get`源代码中发现了一些有趣的东西。

```
(defn get
  "Returns the value mapped to key, not-found or nil if key not present."
  {:inline (fn  [m k & nf] `(. clojure.lang.RT (get ~m ~k ~@nf)))
   :inline-arities #{2 3}
   :added "1.0"}
  ([map key]
   (. clojure.lang.RT (get map key)))
  ([map key not-found]
   (. clojure.lang.RT (get map key not-found)))) 
```

要使用给定键获取值，代码使用`clojurelang.RT/get`函数。代码调用点运算符 - `(. clojure.lang.RT (get map key))`。

我的问题是为什么作者写`(. clojure.lang.RT (get map key))`而不是 `(clojure.lang.RT/get map key)`.

有技术上的区别吗？还是有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T03:28:04.663

Clojure 中的点用于主机互操作（在本例中使用 Java 类 clojure.lang.RT）。静态方法的惯用形式是，`(Classname/staticMethod args*)`但它被扩展为对`.`特殊形式的调用。就`get`函数而言，您实际上是在查看 Clojure 实现的一部分。较低级别的 Clojure 代码没有理由使用较高级别的宏 - 所以它`.`直接使用表单。

查看文档：[http ://clojure.org/java_interop](http://clojure.org/java_interop)

惯用形式位于顶部和下方，您可以找到它们如何扩展为对点运算符的调用。这是静态方法的相关位：

```
(Classname/staticMethod args*) ==> (. Classname staticMethod args*) 
```

# java - 生成不带下划线（不是前缀/后缀）的 Getter 和 setter + eclipse

> ID：15375717
> 
> 赞同：2
> 
> 时间：2013-03-13T01:57:01.110
> 
> 标签：java, eclipse, getter-setter

我的变量是

```
private String category_code = null; 
```

我的 getter 和 setter 生成为

```
public String getCategory_code() {
        return category_code;
    }
    public void setCategory_code(String category_code) {
        this.category_code = category_code;
    } 
```

是否可以生成

```
public String getCategorycode() {
        return category_code;
    }
    public void setCategorycode(String categorycode) {
        this.category_code = category_code;
    } 
```

我检查了属性--> 代码样式--> 字段，但这仅适用于前缀和后缀。

还是我应该将变量重命名为 m_categoryCode？并得到我的输出如下？

```
public String getCategoryCode() {
        return m_categoryCode;
    }
    public void setCategoryCode(String categoryCode) {
        m_categoryCode = categoryCode;
    } 
```

哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-25T10:10:52.827

getter 和 setter 方法的名称派生自字段名称。如果您对字段使用前缀或后缀（例如 fValue、_value、val_m），您可以在代码样式首选项页面（Windows > 首选项 > Java > 代码样式）中指定后缀和前缀。

参考[这里](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_add_codetemp.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T02:02:33.070

Java 代码倾向于遵循 camelCaseStyle，而不是 c_underscore_style。遵循现有标准通常会以多种方式帮助您（您将能够更好地阅读其他人的代码，而其他人将能够更好地阅读您的代码，其中“其他人”是使用相同语言的其他开发人员）。此外，该语言的工具往往会更好地工作（例如）。

# java - Java中的C源代码词法解析器

> ID：15375718
> 
> 赞同：0
> 
> 时间：2013-03-13T01:57:10.710
> 
> 标签：java, parsing

我需要一个词法解析器来解析 C 源代码，我必须使用 Java 语言来完成。我对其进行了研究，并看到了 ANTLR 和 JAVACC。这些解析器中哪个更好用，为什么？或者你有什么其他的解析器可以推荐吗？

答案将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:35:29.787

## 编译器通常遵循以下步骤：

* * *

1.  **[词法分析](http://en.wikipedia.org/wiki/Lexical_analysis)（扫描仪）**

2.  **[语法分析](http://en.wikipedia.org/wiki/Parsing)（解析器）**

3.  **[语义分析](http://en.wikipedia.org/wiki/Semantic_analysis_%28compilers%29)（解析器）**

4.  [中间代码生成](http://en.wikipedia.org/wiki/Intermediate_language)

5.  [代码优化](http://en.wikipedia.org/wiki/Optimizing_compiler#Code_generator_optimizations)

6.  [代码生成](http://en.wikipedia.org/wiki/Code_generation_%28compiler%29)

* * *

您要做的是扫描给定的源代码并计算代码中的变量和函数。这涉及前两个步骤。词法分析器将来自字符流的输入分解为标记*（阶段 1）*，然后将标记发送到解析器*（阶段 2）*以识别和验证标记。您可以为其编写编译器的编程语言没有任何限制，因为**您可以为任何语言的任何语言制作完整的编译器**。你是设计编译器的人，你可以完全控制它的作用（你可以为希伯来语制作一个编译器——如果你有耐心的话——）

因此，对于您的情况，您可以从头开始手动编写词法分析器和解析器（这是更好的方法），或者您可以使用像**[JLex](http://www.cs.princeton.edu/~appel/modern/java/JLex/)**这样的词法分析器生成器，它可以根据非常简单的指令生成词法分析器和您的令牌的正则表达式模式。

可以在[此处找到](http://www.cs.princeton.edu/~appel/modern/java/JLex/current/manual.html#SECTION1)**[JLex](http://www.cs.princeton.edu/~appel/modern/java/JLex/)**的快速入门指南

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:02:48.070

词法分析器仅将输入流分解为标记。它们不计算任何东西，因此对于您计算简单指标的目的来说是不完整的。

如果您想将“函数”与“变量”区分开来，您将需要某种解析器来检查标记序列以确定它们所代表的内容（例如，“变量声明、使用或函数声明”）。您可以构建一个临时解析器来满足您的计数需求，但代价是偶尔会犯错误，或者您可以得到一个真正的解析器并做对。（解析一个 C 变量声明比乍一看要困难得多；它的语法相当晦涩）。

如果这是家庭作业或真正的问题，并且您不在乎答案是否错误，那么任何词法分析器生成器和临时解析代码都可能会做得很好。

如果你想准确地做到这一点，你需要一个预处理器和一个解析器，你最好寻找那些（隐含地包括一个词法分析器）。

# php - php mysqli 将多行插入到 1 个表和 1 行到另一个表

> ID：15375720
> 
> 赞同：-1
> 
> 时间：2013-03-13T01:57:39.543
> 
> 标签：php, mysql, mysqli

在这个网站的帮助下，我一直在做这件事。我现在可以在表中插入`players`多行（基于`$add-rows`值）。我还需要插入`events`表 1 行。当我提交表单时，它会插入`players`正常但不会插入`events`

这是我的表单，包含 2 个查询所需的所有值

```
<form id="form-add" name="form-add" method="POST" enctype="multipart/form-data" action="page.php">
<input name="add-name" id="add-name" type="text" value="Event">
<input name="add-start" id="add-start" type="text" value="">
<input name="add-end" id="add-end" type="text" value="">
<input name="add-loc" id="add-loc" type="text" value="">
<input name="add-rows" id="add-rows" type="text" value="">
<input name="add-submit" id="add-submit" type="submit" value="Add" />
<input type="hidden" name="submitted" value="TRUE" />
</form> 
```

这些是我从表单中发布的值

```
<?php
$add_name = $_POST['add-name'];
$add_start = $_POST['add-start'];
$add_end = $_POST['add-end'];
$add_loc = $_POST['add-loc'];
$add_rows = $_POST['add-rows'];
$add_url = date('Y-m-d',strtotime($add_start)).'-'.str_replace('-',' ',($add_name));

if(isset($_POST['submitted'])) { //check if form submitted
    //connection
    $mysqli = new mysqli('host', 'user', 'pass', 'db_name');

    //this is the first query - to insert multiple rows in to players table (from same form)
    $query  = "INSERT INTO players (position, event, start, end, name, one, two, three, four, five, six) 
        VALUES ('', '$add_url', '$add_start', '$add_end', '', 'Yes', 'No', 'No', 'No', 'No', 'No');" .
        str_repeat(", ('', '$add_url', '$add_start', '$add_end', '', 'Yes', 'No', 'No', 'No', 'No', 'No')", $add_rows - 1);

    //this is the 2nd query - to insert to events table (from same form)
    $query .= "INSERT INTO events (ur, name, start, end, loc) VALUES ('$add_url', '$add_name' '$add_start', '$add_end', '$add_loc');";

    // execute query - $result is false if the first query failed
    $result = mysqli_multi_query($mysqli, $query);

    if ($result) {
        do {
            // grab the result of the next query
            if (($result = mysqli_store_result($mysqli)) === false && mysqli_error($mysqli) != '') {
                echo "Query failed: " . mysqli_error($mysqli);
            }
        } while (mysqli_more_results($mysqli) && mysqli_next_result($mysqli)); // while there are more results
    } else {
        echo "First query failed..." . mysqli_error($mysqli);
    }
}//end of form submit if
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:13:43.647

您的代码有 3 个主要错误

1.  您在`mysqli_multi_query()`这里使用的是无用的，只会使您的代码过于复杂。
2.  您没有使用占位符，这使您的代码容易受到注入
3.  您在数据库中插入相同的行，这违反了数据库法律。

因此，进行 2 个查询：一个将 1 条记录插入到 player 表中，另一个将 1 条记录插入到事件中。
使用准备好的语句在 2 个单独的调用中运行它们。
由于 mysqli 无法与它们一起使用 - 请改用 PDO。

# python - Python 在列表理解期间如何执行？

> ID：15375727
> 
> 赞同：1
> 
> 时间：2013-03-13T01:58:49.063
> 
> 标签：python

```
def thing(mode, data):
    return [
        item for item in data
        if {
            'large': lambda item: item > 100,
            'small': lambda item: item < 100,
        }[mode](item)
    ] 
```

此列表推导生成一个 lambda 字典，通过参数检索一个 lambda`mode`并将其应用于当前正在处理的列表项。我的问题是：它的性能特点是什么？

整个字典是否在 listcomp 的每次迭代期间从头开始创建？还是只创建一次并在每个项目上使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:05:00.223

> 是否在 listcomp 的每次迭代期间从头开始创建整个字典

是的。

> 还是只创建一次并在每个项目上使用？

不。

* * *

幸运的是，在这种情况下（以及我能想到的所有其他类似的情况），提前构建字典很容易：

```
 d = {
        'large': lambda item: item > 100,
        'small': lambda item: item < 100,
      }
 return [item for item in data if d[mode](item)] 
```

甚至，

```
func = {
        'large': lambda item: item > 100,
        'small': lambda item: item < 100,
        }[mode]
return [item for item in data if func(item)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T02:06:11.797

我很确定这将导致从头开始为列表的每个元素创建整个字典。python列表推导的基本语法如下，

`[ E1 for ID in E2 if E3 ]`,

其中 E1、E2 和 E3 是表达式。E2 被评估一次，当解释器开始评估列表理解时。E1 和 E3 针对 E2 评估的集合的每个成员进行评估。所以，是的。在您的问题中，字典每次都是从头开始构建的，但是您可以通过在列表理解之前声明字典来轻松解决该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:09:28.280

您的字典在每个循环中创建一次，并使您的列表理解比缓存字典的速度慢两倍：

```
>>> %timeit thing1('small', [1, 2, 3, 4, 5, 6])
100000 loops, best of 3: 2.4 us per loop
>>> %timeit thing2('small', [1, 2, 3, 4, 5, 6])
1000000 loops, best of 3: 1.06 us per loop 
```

`thing1`是你原来的功能。`thing2`是：

```
d = {
    'large': lambda item: item > 100,
    'small': lambda item: item < 100,
}

def thing3(mode, data):
    return list(filter(d[mode], data)) 
```

`filter(f, data)`是 的简写`item for item in data if f(item)`。在 Python 3 中，它创建了一个迭代器，它仅在您对其进行迭代时过滤掉项目。

# maven - 在 Grails 中安装插件时的依赖关系解析问题

> ID：15375731
> 
> 赞同：1
> 
> 时间：2013-03-13T01:59:03.027
> 
> 标签：maven, grails, dependencies, grails-plugin

因此，我在 Grails 应用程序中安装的一些插件遇到了一些问题。看起来即使安装了插件，我也无法将包含它的包导入到我的一个类中，而不会出现“无法解析符号 X”错误。并非所有插件都是这种情况，仅适用于某些插件。

如果我**不**尝试从某些插件导入包，我可以毫无问题地编译和运行我的应用程序。对于为什么会发生这种情况，我真的很茫然。

作为健全性检查...

对于给定的插件，我将任何 mavenRepo 依赖项或运行时/构建/编译插入添加到我的 BuildConfig.groovy 中，然后使用**grails install-plugin X**命令在我的项目中安装插件。然后我构建应用程序。

我的 buildconfig 文件的一部分如下。任何帮助或见解将不胜感激。

```
repositories {
    inherits true // Whether to inherit repository definitions from plugins

    grailsPlugins()
    grailsHome()
    grailsCentral()

    mavenLocal()
    mavenCentral()

    // uncomment these (or add new ones) to enable remote dependency resolution from public Maven repositories
    //mavenRepo "http://snapshots.repository.codehaus.org"
    //mavenRepo "http://repository.codehaus.org"
    //mavenRepo "http://download.java.net/maven/2/"
    //mavenRepo "http://repository.jboss.com/maven2/"

    mavenRepo "http://repository.springsource.com/maven/bundles/release"
    mavenRepo "http://repository.springsource.com/maven/bundles/external"
    mavenRepo "http://repository.springsource.com/maven/libraries/release"
    mavenRepo "http://repository.springsource.com/maven/libraries/external"
    //excel import plugin
    mavenRepo "http://repo.grails.org/grails/libs-releases/"
    mavenRepo "http://m2repo.spockframework.org/ext/"
    //joda time
    mavenRepo "http://repo.grails.org/grails/libs-releases/"
    mavenRepo "http://m2repo.spockframework.org/ext/"
    mavenRepo "http://m2repo.spockframework.org/snapshots/"
    //execel export plugin
    mavenRepo("http://maven.touk.pl/nexus/content/repositories/releases")

}
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

    // runtime 'mysql:mysql-connector-java:5.1.20'
     runtime 'mysql:mysql-connector-java:5.1.22'
}

plugins {
    runtime ":hibernate:$grailsVersion"
    runtime ":jquery:1.8.0"
    runtime ":resources:1.1.6"

    // Uncomment these (or add new ones) to enable additional resources capabilities
    //runtime ":zipped-resources:1.0"
    //runtime ":cached-resources:1.0"
    //runtime ":yui-minify-resources:0.1.4"

    build ":tomcat:$grailsVersion"

    //runtime (":excel-export:0.1.4")
    runtime ":database-migration:1.1"

    compile ':cache:1.0.0'
    compile ":searchable:0.6.4"
    compile ":spring-security-core:1.2.7.3"
    compile ":excel-import:1.0.0"
    compile ":excel-export:0.1.4"
    compile ":joda-time:1.4"

} 
```

}

# github - 从 GitHub 安全地使用 FORK

> ID：15375732
> 
> 赞同：0
> 
> 时间：2013-03-13T01:59:03.477
> 
> 标签：github

我以前没有这样做过，所以想确保我没有搞砸任何事情：

所以我们有一个中央回购，我想对项目的一部分进行一些更改，以试验一些新的东西。Raisl 的 RABL 是准确的。

因此，如果我去 Master 并说 Make a Fork，然后在 Web 浏览器中转到我新创建的 Fork 并在 Mac 中说 Clone，那么无论我更改什么并推送 orgin，都只会转到我自己的 Fork，是这样吗？对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:00:48.570

那是对的。你的分叉是独立的。

Git 是分布式源代码控制系统，这意味着每个分支本质上都是一个不同的存储库。

此外，如果您不想与任何人共享它，您甚至不需要将其推送到原点。您可以提交本地存储库并将其保留在那里（在单独的分支中，甚至是单独的存储库中）。

# c - FFMPEG 库 MP3 编码器

> ID：15375733
> 
> 赞同：1
> 
> 时间：2013-03-13T01:59:34.343
> 
> 标签：c, ffmpeg, mp3, encoder

ffmpeg 库是否带有 MP3 编码器？

这个：

```
AVCodec *pCodec = avcodec_find_encoder(AV_CODEC_ID_MP3); 
```

总是返回 null。我还尝试了 AV_CODEC_ID_MP3ADU 和 AV_CODEC_ID_MP3ON4，它们也返回 null。我发现的唯一编码编解码器是 AV_CODEC_ID_MP2。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:09:42.937

`libmp3lame`是`mp3`ffmpeg的编码器。它需要在构建的配置阶段启用。`--enable-libmp3lame`应该启用它。你也应该`libmp3lame-dev`安装。我按照本指南安装 ffmpeg：[https ://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)

要快速检查您是否已经拥有它：

```
$ ffmpeg -codecs | grep mp3
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jan 25 2013 15:16:27 with llvm_gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)
  configuration: --prefix=/usr/local/Cellar/ffmpeg/0.11.1 --enable-shared --enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --cc=/usr/bin/llvm-gcc --host-cflags='-Os -w -pipe -march=core2 -msse4 -mmacosx-version-min=10.7' --host-ldflags=-L/usr/local/lib --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-libxvid
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
  EA    libmp3lame      libmp3lame MP3 (MPEG audio layer 3)
 D A D  mp3             MP3 (MPEG audio layer 3)
 D A D  mp3adu          ADU (Application Data Unit) MP3 (MPEG audio layer 3)
 D A D  mp3adufloat     ADU (Application Data Unit) MP3 (MPEG audio layer 3)
 D A D  mp3float        MP3 (MPEG audio layer 3)
 D A D  mp3on4          MP3onMP4
 D A D  mp3on4float     MP3onMP4 
```

您可以看到 E（编码器）可用于 libmp3lame。

# uitableview - 是否可以使用 Monotouch.Dialog 创建这样的自定义列表？

> ID：15375746
> 
> 赞同：1
> 
> 时间：2013-03-13T02:00:46.233
> 
> 标签：uitableview, user-interface, xamarin.ios, monotouch.dialog, xamarin

我刚刚发现了 Xamarin Studio 和 Monotouch.Dialog，并且我一直在对自定义表格单元格进行大量研究。到目前为止，我已经非常成功地尝试了一些功能，但是我在弄清楚如何创建这样的东西时遇到了麻烦： ![在此处输入图像描述](../Images/152139c281d1352524cf4efaad5d030f.png)

我看到的所有示例仍然看起来像一个标准的 iOS 表格视图，可能这里和那里改变了一些颜色。我的目标是创建真正定制的单元格，具有定制的间距等等。我不确定这是否可能，所以我想我会问你们。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:22:27.283

是的，您可以创建 OwnerDrawnElement。本文档的 Owner-Drawn Element 部分对此进行了解释：

[http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog)

这里还有一个示例：

[https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements/OwnerDrawnElement.cs](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements/OwnerDrawnElement.cs)

# r - 使用 R 拟合半变异函数

> ID：15375749
> 
> 赞同：1
> 
> 时间：2013-03-13T02:00:57.413
> 
> 标签：r, geor

我使用“geoR”包拟合了我的半变异函数，如下所示：

```
#loading geoR
library(geoR)
#calculating the semivariogram
bin1 <- variog(geodata)
#plotting
plot(bin1)
#fitting the model
lines.variomodel(cov.model = "exp", cov.pars = c(0.571,0.2527), nug = 0.13, max.dist=1) 
```

有没有办法知道指数模型的拟合优度（轻松）？

提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:19:40.800

您在这里并没有真正拟合模型，您可以使用`variofit`将模型拟合到经验半变异函数。

例如

```
library(geoR)
vario100 <- variog(s100, max.dist=1)
ini.vals <- expand.grid(seq(0,1,l=5), seq(0,1,l=5))
ols <- variofit(vario100, ini=ini.vals, fix.nug=TRUE, wei="equal")
## variofit: model parameters estimated by OLS (ordinary least squares):
## covariance model is: matern with fixed kappa = 0.5 (exponential)
## fixed value for tausq =  0 
## parameter estimates:
## sigmasq     phi 
##  1.1070  0.4006 
## Practical Range with cor=0.05 for asymptotic range: 1.200177
## 
## variofit: minimised sum of squares = 0.1025 
```

您可以使用 cov.spatial 在变异函数上的每个点计算您自己的适当加权平方和。

我不认为这是一个好主意。

* * *

相反，您可以`loglik.GRF`用来计算与给定模型和所有数据关联的可能性

```
# you can pass an existing model
loglik.GRF(s100, obj.model = ols)
## [1] -87.32958 
```

或者只是参数

```
 loglik.GRF(s100, cov.pars = c(1.5,0.6), nugget = 0.01) 
```

* * *

如果您真的想要加权最小二乘值，您可以`fit.variogram`从`gstat`包中使用，而无需实际安装任何东西。

一件好事是它`gstat`有一些辅助函数可以从`geoR`模型转换为`gstat`版本。这真的很有用，因为`gstat`它可以更快、更有效地进行预测。

例如

```
 library(gstat)
 # convert geodata to  data.frame object
 s100df <- as.data.frame(s100)
 # remove geodata.frame class that causes problems
 class(s100df) <- 'data.frame'

 # create gstat version of variogram
 s100v <- variogram(data~1, ~X1+X2, s100df)

 # convert a variomodel to vgm object

 foo <- as.vgm.variomodel(list(cov.model = 'exponential', kappa = 0.5,
                          cov.pars = c(1.5,0.6), nugget = 0.2))

 # get the weighted least squares value
 # calling fit.variogram without fitting any thing
 fittedfoo <- fit.variogram(s100v, foo, fit.sills = FALSE, fit.ranges = FALSE)
 # the weighted sum of squares is
 attr(fittedfoo, 'SSErr')
 ## [1] 0.6911813 
```

# emacs - 如何控制 Emacs 缩写扩展中的光标位置？

> ID：15375759
> 
> 赞同：2
> 
> 时间：2013-03-13T02:02:04.480
> 
> 标签：emacs, expansion, abbreviation, pabbrev

在 Emacs 中，有没有办法控制光标/点在缩写模式扩展中的位置？

你知道，像这样的东西？

```
("orgfootnote" "[fn:: %?]" nil 0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:19:29.203

Abbrev 本身不提供此功能，但它们提供了足够的钩子以在外部完成此功能。例如

```
(define-skeleton my-orgfootnote "Docstring." nil
  "fn::" _ "]") 
```

然后使用像这样的缩写

```
("orgfootnote" "" my-orgfootnote) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:31:47.570

如果您的意思是内置的缩写功能，那么这就是我对这个问题的看法。如果您有一个包含字符串@@ 的缩写词，那么在此情况下，光标将被放置在扩展文本中@@ 出现的那个位置。

```
 (defadvice expand-abbrev (after my-expand-abbrev activate)
   ;; if there was an expansion
   (if ad-return-value
       ;; start idle timer to ensure insertion of abbrev activator
       ;; character (e.g. space) is finished
       (run-with-idle-timer 0 nil
                            (lambda ()
                              ;; if there is the string "@@" in the
                              ;; expansion then move cursor there and
                              ;; delete the string
                              (let ((cursor "@@"))
                                (if (search-backward cursor last-abbrev-location t)
                                    (delete-char (length cursor)))))))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:12:10.303

如果你需要填写一个模板，那`abbrev`就是错误的设施。我强烈推荐`yasnippet`。 `abbrev`不过，对于纠正频繁的拼写错误非常有用。

# java - 有界队列开销

> ID：15375762
> 
> 赞同：0
> 
> 时间：2013-03-13T02:02:27.320
> 
> 标签：java, queue

我无法回答以下问题，我已将我的答案包含在下面。有人可以告诉我哪里出错了吗？谢谢！

假设一个整数需要 2 个字节的空间，而一个引用需要 4 个字节的空间。还假设最大队列大小为 200。

假设一个包含整数的队列，需要多少开销空间（以字节为单位）：

```
The text's bounded array-based queue holding 20 elements? My Answer: 840
The text's bounded array-based queue holding 100 elements? My Answer: 1000
The text's bounded array-based queue holding 200 elements? My Answer: 1200
The text's reference-based queue holding 20 elements? My Answer: 80
The text's reference-based queue holding 100 elements? My Answer: 400
The text's reference-based queue holding 200 elements? My Answer: 800 
```

最后，对于什么大小的队列，基于数组和基于引用的方法使用的开销空间量大致相同？我的回答：200 个元素的队列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:22:17.443

1) int 是 4 个字节，但是集合不使用原语，所以队列中的 int 将用 Integer 表示，它是一个对象，1 个 Integer 占用 16 个字节。

2）它取决于队列实现，在链接队列的情况下，每个元素将与由 2-3 个引用组成的链接相关联，每个链接将占用 30+ 字节

3）阅读[http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-29T18:52:43.637

我的教授的解释：因为教科书中的队列 ADT 包含泛型类型元素，所以队列中的每个元素都存储对对象的引用（类型如 Integer、Double、String 等。它们都是引用类型（包装类）而不是比原始类型）。因此，对于元素类型为 Integer 的基于数组的 Queue，每个数组槽都持有一个 Integer 对象的引用。由于基于数组的实现有一个固定大小的底层数组，它必须在创建队列时为数组预分配内存。所需的总内存空间为（数组大小（与引用数相同））x（4 字节）+（整数对象数）x（2 字节）。

就基于引用的 Integer Queue 而言，每个元素都是一个链表节点，它有两个字段：对 Integer 对象的引用和对链表中下一个节点的引用。换句话说，每个节点都有两个引用。因此，所需的总内存空间为 (# of nodes (same as # of Integer objects)) x 2 x (4 bytes) + (# of Integer objects) x (2 bytes)。

# vba - 在excel中增加单元格行

> ID：15375767
> 
> 赞同：0
> 
> 时间：2013-03-13T02:02:44.827
> 
> 标签：vba, excel, userform

我有一个用户表单，它将从字段提交数据到列 A、B 和 C，但我需要它向下移动并在每次用户点击提交时填写下一个空行。

这是我到目前为止所拥有的，我不知道我会投入什么来制作它，所以它会从 A2/B2/C2 变为 A3/B3/C3 等。

```
Private Sub Submit_Click()
   Dim LastRow As Object

   Set LastRow = Sheet1.Range("a65536").End(xlUp)

   Sheet1.Range("A2").Value = MatchNum.Text
   Sheet1.Range("B2").Value = TeamNum.Text
   Sheet1.Range("C2").Value = AllianceTeamNum.Text

   MsgBox "One record written to Sheet1"

End Sub 
```

我是 Visual Basic 的完整初学者（大约 1 小时的经验），如果解决方案尽可能简单，那就太好了。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:25:45.717

试试下面的代码：

```
Private Sub Submit_Click()
    With Sheet1
        .Select

        Dim LastRow As Long
        LastRow = .Range("A65536").End(xlUp).Row + 1

        .Range("A" & LastRow).Value = MatchNum.Text
        .Range("B" & LastRow).Value = TeamNum.Text
        .Range("C" & LastRow).Value = AllianceTeamNum.Text

    End With
    MsgBox "One record written to Sheet1"

End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T02:15:47.927

尝试这个：

```
Dim start As Integer

Private Sub CommandButton1_Click()

   Dim LastRow As Object

   Set LastRow = Sheet1.Range("a65536").End(xlUp)

   Sheet1.Range("A" & start).Value = "a"
   Sheet1.Range("B" & start).Value = "b"
   Sheet1.Range("C" & start).Value = "c"

   MsgBox "One record written to Sheet1"

   start = start + 1

End Sub

Private Sub UserForm_Initialize()
   start = 2
End Sub 
```

# ios - 用动画剪出形状

> ID：15375777
> 
> 赞同：30
> 
> 时间：2013-03-13T02:04:08.320
> 
> 标签：ios, uikit, core-animation, core-graphics, mask

我想做类似于以下的事情：

[如何在 IOS sdk 中屏蔽图像？](https://stackoverflow.com/questions/9872975/how-to-mask-an-image-in-ios-sdk)

我想用半透明的黑色覆盖整个屏幕。然后，我想从半透明的黑色覆盖物上剪出一个圆圈，这样你就可以看清楚了。我这样做是为了突出显示教程的部分屏幕。

然后，我想将剪切圆动画到屏幕的其他部分。我还希望能够水平和垂直拉伸剪切圆，就像使用通用按钮背景图像一样。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-13T04:40:05.080

(UPDATE: Please see also [my other answer](https://stackoverflow.com/a/22262689/77567) which describes how to set up multiple independent, overlapping holes.)

Let's use a plain old `UIView` with a `backgroundColor` of translucent black, and give its layer a mask that cuts a hole out of the middle. We'll need an instance variable to reference the hole view:

```
@implementation ViewController {
    UIView *holeView;
} 
```

After loading the main view, we want to add the hole view as a subview:

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self addHoleSubview];
} 
```

Since we want to move the hole around, it will be convenient to make the hole view be very large, so that it covers the rest of the content regardless of where it's positioned. We'll make it 10000x10000\. (This doesn't take up any more memory because iOS doesn't automatically allocate a bitmap for the view.)

```
- (void)addHoleSubview {
    holeView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10000, 10000)];
    holeView.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    holeView.autoresizingMask = 0;
    [self.view addSubview:holeView];
    [self addMaskToHoleView];
} 
```

Now we need to add the mask that cuts a hole out of the hole view. We'll do this by creating a compound path consisting of a huge rectangle with a smaller circle at its center. We'll fill the path with black, leaving the circle unfilled and therefore transparent. The black part has alpha=1.0 and so it makes the hole view's background color show. The transparent part has alpha=0.0, so that part of the hole view is also transparent.

```
- (void)addMaskToHoleView {
    CGRect bounds = holeView.bounds;
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = bounds;
    maskLayer.fillColor = [UIColor blackColor].CGColor;

    static CGFloat const kRadius = 100;
    CGRect const circleRect = CGRectMake(CGRectGetMidX(bounds) - kRadius,
        CGRectGetMidY(bounds) - kRadius,
        2 * kRadius, 2 * kRadius);
    UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:circleRect];
    [path appendPath:[UIBezierPath bezierPathWithRect:bounds]];
    maskLayer.path = path.CGPath;
    maskLayer.fillRule = kCAFillRuleEvenOdd;

    holeView.layer.mask = maskLayer;
} 
```

Notice that I've put the circle at the center of the 10000x10000 view. This means that we can just set `holeView.center` to set the center of the circle relative to the other content. So, for example, we can easily animate it up and down over the main view:

```
- (void)viewDidLayoutSubviews {
    CGRect const bounds = self.view.bounds;
    holeView.center = CGPointMake(CGRectGetMidX(bounds), 0);

    // Defer this because `viewDidLayoutSubviews` can happen inside an
    // autorotation animation block, which overrides the duration I set.
    dispatch_async(dispatch_get_main_queue(), ^{
        [UIView animateWithDuration:2 delay:0
            options:UIViewAnimationOptionRepeat
                | UIViewAnimationOptionAutoreverse
            animations:^{
                holeView.center = CGPointMake(CGRectGetMidX(bounds),
                    CGRectGetMaxY(bounds));
            } completion:nil];
    });
} 
```

Here's what it looks like:

![hole animation](../Images/701633fa0d328f9eac9e5cf59c8e5689.png)

But it's smoother in real life.

You can find a complete working test project [in this github repository](https://github.com/mayoff/stackoverflow-15375777-ios-animated-hole).

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-13T03:51:45.570

这不是一个简单的问题。我可以带你去那里好一点。棘手的是动画。这是我放在一起的一些代码的输出：

![反转蒙版层](../Images/c2d93e546dc0b5caeaf94e191de42534.png)

代码是这样的：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  // Create a containing layer and set it contents with an image
  CALayer *containerLayer = [CALayer layer];
  [containerLayer setBounds:CGRectMake(0.0f, 0.0f, 500.0f, 320.0f)];
  [containerLayer setPosition:[[self view] center]];
  UIImage *image = [UIImage imageNamed:@"cool"];
  [containerLayer setContents:(id)[image CGImage]];

  // Create your translucent black layer and set its opacity
  CALayer *translucentBlackLayer = [CALayer layer];
  [translucentBlackLayer setBounds:[containerLayer bounds]];
  [translucentBlackLayer setPosition:
                     CGPointMake([containerLayer bounds].size.width/2.0f, 
                                 [containerLayer bounds].size.height/2.0f)];
  [translucentBlackLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
  [translucentBlackLayer setOpacity:0.45];
  [containerLayer addSublayer:translucentBlackLayer];

  // Create a mask layer with a shape layer that has a circle path
  CAShapeLayer *maskLayer = [CAShapeLayer layer];
  [maskLayer setBorderColor:[[UIColor purpleColor] CGColor]];
  [maskLayer setBorderWidth:5.0f];
  [maskLayer setBounds:[containerLayer bounds]];

  // When you create a path, remember that origin is in upper left hand
  // corner, so you have to treat it as if it has an anchor point of 0.0, 
  // 0.0
  UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:
        CGRectMake([translucentBlackLayer bounds].size.width/2.0f - 100.0f, 
                   [translucentBlackLayer bounds].size.height/2.0f - 100.0f, 
                   200.0f, 200.0f)];

  // Append a rectangular path around the mask layer so that
  // we can use the even/odd fill rule to invert the mask
  [path appendPath:[UIBezierPath bezierPathWithRect:[maskLayer bounds]]];

  // Set the path's fill color since layer masks depend on alpha
  [maskLayer setFillColor:[[UIColor blackColor] CGColor]];
  [maskLayer setPath:[path CGPath]];

  // Center the mask layer in the translucent black layer
  [maskLayer setPosition:
                CGPointMake([translucentBlackLayer bounds].size.width/2.0f, 
                            [translucentBlackLayer bounds].size.height/2.0f)];

  // Set the fill rule to even odd
  [maskLayer setFillRule:kCAFillRuleEvenOdd];
  // Set the translucent black layer's mask property
  [translucentBlackLayer setMask:maskLayer];

  // Add the container layer to the view so we can see it
  [[[self view] layer] addSublayer:containerLayer];
} 
```

您必须对可以根据用户输入构建的遮罩层进行动画处理，但这会有点挑战性。请注意我将矩形路径附加到圆形路径的线条，然后稍后在形状图层上设置填充规则几行。这些是使倒置面具成为可能的原因。如果你把它们排除在外，你将在圆的中心显示半透明的黑色，然后在外部没有任何东西（如果有意义的话）。

也许尝试玩一下这段代码，看看你是否可以让它动画化。有时间我会多玩一些，但这是一个非常有趣的问题。希望看到一个完整的解决方案。

* * *

**更新：**所以这是另一个尝试。这里的问题是，这个使半透明蒙版看起来是白色而不是黑色，但好处是圆圈可以很容易地制作动画。

这个构建了一个复合层，其中半透明层和圆形层是父层内的兄弟，用作蒙版。

![复合面膜](../Images/8f733c7f6cd9c77c540598210d7d55de.png)

我为此添加了一个基本动画，以便我们可以看到圆形图层动画。

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  CGRect baseRect = CGRectMake(0.0f, 0.0f, 500.0f, 320.0f);

  CALayer *containerLayer = [CALayer layer];
  [containerLayer setBounds:baseRect];
  [containerLayer setPosition:[[self view] center]];

  UIImage *image = [UIImage imageNamed:@"cool"];
  [containerLayer setContents:(id)[image CGImage]];

  CALayer *compositeMaskLayer = [CALayer layer];
  [compositeMaskLayer setBounds:baseRect];
  [compositeMaskLayer setPosition:CGPointMake([containerLayer bounds].size.width/2.0f, [containerLayer bounds].size.height/2.0f)];

  CALayer *translucentLayer = [CALayer layer];
  [translucentLayer setBounds:baseRect];
  [translucentLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
  [translucentLayer setPosition:CGPointMake([containerLayer bounds].size.width/2.0f, [containerLayer bounds].size.height/2.0f)];
  [translucentLayer setOpacity:0.35];

  [compositeMaskLayer addSublayer:translucentLayer];

  CAShapeLayer *circleLayer = [CAShapeLayer layer];
  UIBezierPath *circlePath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(0.0f, 0.0f, 200.0f, 200.0f)];
  [circleLayer setBounds:CGRectMake(0.0f, 0.0f, 200.0f, 200.0f)];
  [circleLayer setPosition:CGPointMake([containerLayer bounds].size.width/2.0f, [containerLayer bounds].size.height/2.0f)];
  [circleLayer setPath:[circlePath CGPath]];
  [circleLayer setFillColor:[[UIColor blackColor] CGColor]];

  [compositeMaskLayer addSublayer:circleLayer];

  [containerLayer setMask:compositeMaskLayer];

  [[[self view] layer] addSublayer:containerLayer];

  CABasicAnimation *posAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
  [posAnimation setFromValue:[NSValue valueWithCGPoint:[circleLayer position]]];
  [posAnimation setToValue:[NSValue valueWithCGPoint:CGPointMake([circleLayer position].x + 100.0f, [circleLayer position].y + 100)]];
  [posAnimation setDuration:1.0f];
  [posAnimation setRepeatCount:INFINITY];
  [posAnimation setAutoreverses:YES];

  [circleLayer addAnimation:posAnimation forKey:@"position"];

} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-07T23:26:36.813

这是一个适用于多个独立、可能重叠的聚光灯的答案。

我将像这样设置我的视图层次结构：

```
SpotlightsView with black background
    UIImageView with `alpha`=.5 (“dim view”)
    UIImageView with shape layer mask (“bright view”) 
```

暗淡的视图将显得暗淡，因为它的 alpha 将其图像与顶级视图的黑色混合在一起。

明亮的视野并没有变暗，但它只显示了它的面具让它在哪里。所以我只是将蒙版设置为包含聚光灯区域，而不是其他任何地方。

这是它的样子：

![在此处输入图像描述](../Images/2e3f957f608e58a5c4658dea09adf302.png)

我将把它实现为`UIView`这个接口的子类：

```
// SpotlightsView.h

#import <UIKit/UIKit.h>

@interface SpotlightsView : UIView

@property (nonatomic, strong) UIImage *image;

- (void)addDraggableSpotlightWithCenter:(CGPoint)center radius:(CGFloat)radius;

@end 
```

我需要 QuartzCore（也称为 Core Animation）和 Objective-C 运行时来实现它：

```
// SpotlightsView.m

#import "SpotlightsView.h"
#import <QuartzCore/QuartzCore.h>
#import <objc/runtime.h> 
```

我需要子视图、遮罩层和一组单独的聚光灯路径的实例变量：

```
@implementation SpotlightsView {
    UIImageView *_dimImageView;
    UIImageView *_brightImageView;
    CAShapeLayer *_mask;
    NSMutableArray *_spotlightPaths;
} 
```

要实现该`image`属性，我只需将其传递给您的图像子视图：

```
#pragma mark - Public API

- (void)setImage:(UIImage *)image {
    _dimImageView.image = image;
    _brightImageView.image = image;
}

- (UIImage *)image {
    return _dimImageView.image;
} 
```

为了添加可拖动的聚光灯，我创建了一个概述聚光灯的路径，将其添加到数组中，并将自己标记为需要布局：

```
- (void)addDraggableSpotlightWithCenter:(CGPoint)center radius:(CGFloat)radius {
    UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(center.x - radius, center.y - radius, 2 * radius, 2 * radius)];
    [_spotlightPaths addObject:path];
    [self setNeedsLayout];
} 
```

我需要重写一些方法`UIView`来处理初始化和布局。我将通过将通用初始化代码委托给私有方法来以编程方式或在 xib 或情节提要中创建：

```
#pragma mark - UIView overrides

- (instancetype)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame]) {
        [self commonInit];
    }
    return self;
}

- (instancetype)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        [self commonInit];
    }
    return self;
} 
```

我将在每个子视图的单独辅助方法中处理布局：

```
- (void)layoutSubviews {
    [super layoutSubviews];
    [self layoutDimImageView];
    [self layoutBrightImageView];
} 
```

要在触摸时拖动聚光灯，我需要重写一些`UIResponder`方法。我想分别处理每个触摸，所以我只是循环更新的触摸，将每个触摸传递给一个辅助方法：

```
#pragma mark - UIResponder overrides

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *touch in touches){
        [self touchBegan:touch];
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *touch in touches){
        [self touchMoved:touch];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *touch in touches) {
        [self touchEnded:touch];
    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *touch in touches) {
        [self touchEnded:touch];
    }
} 
```

现在我将实现私有外观和布局方法。

```
#pragma mark - Implementation details - appearance/layout 
```

首先，我将执行常见的初始化代码。我想将我的背景颜色设置为黑色，因为这是使变暗的图像视图变暗的一部分，并且我想支持多个触摸：

```
- (void)commonInit {
    self.backgroundColor = [UIColor blackColor];
    self.multipleTouchEnabled = YES;
    [self initDimImageView];
    [self initBrightImageView];
    _spotlightPaths = [NSMutableArray array];
} 
```

我的两个图像子视图的配置方式几乎相同，因此我将调用另一个私有方法来创建暗淡的图像视图，然后将其调整为实际暗淡：

```
- (void)initDimImageView {
    _dimImageView = [self newImageSubview];
    _dimImageView.alpha = 0.5;
} 
```

我将调用相同的辅助方法来创建明亮的视图，然后添加它的遮罩子层：

```
- (void)initBrightImageView {
    _brightImageView = [self newImageSubview];
    _mask = [CAShapeLayer layer];
    _brightImageView.layer.mask = _mask;
} 
```

创建两个图像视图的辅助方法设置内容模式并将新视图添加为子视图：

```
- (UIImageView *)newImageSubview {
    UIImageView *subview = [[UIImageView alloc] init];
    subview.contentMode = UIViewContentModeScaleAspectFill;
    [self addSubview:subview];
    return subview;
} 
```

要布置昏暗的图像视图，我只需要将其框架设置为我的界限：

```
- (void)layoutDimImageView {
    _dimImageView.frame = self.bounds;
} 
```

为了布置明亮的图像视图，我需要将其框架设置为我的边界，并且我需要将其遮罩层的路径更新为各个聚光灯路径的联合：

```
- (void)layoutBrightImageView {
    _brightImageView.frame = self.bounds;
    UIBezierPath *unionPath = [UIBezierPath bezierPath];
    for (UIBezierPath *path in _spotlightPaths) {
        [unionPath appendPath:path];
    }
    _mask.path = unionPath.CGPath;
} 
```

请注意，这不是将每个点都包含一次的真正联合。它依赖于填充模式（默认，`kCAFillRuleNonZero`）来确保重复封闭的点包含在蒙版中。

接下来，触摸处理。

```
#pragma mark - Implementation details - touch handling 
```

当 UIKit 向我发送新的触摸时，我会找到包含触摸的单独聚光灯路径，并将路径作为关联对象附加到触摸。这意味着我需要一个关联的对象密钥，它只需要是一些我可以获取地址的私有事物：

```
static char kSpotlightPathAssociatedObjectKey; 
```

在这里，我实际上找到了路径并将其附加到触摸上。如果触摸超出了我的任何聚光灯路径，我将忽略它：

```
- (void)touchBegan:(UITouch *)touch {
    UIBezierPath *path = [self firstSpotlightPathContainingTouch:touch];
    if (path == nil)
        return;
    objc_setAssociatedObject(touch, &kSpotlightPathAssociatedObjectKey,
        path, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
} 
```

当 UIKit 告诉我触摸已移动时，我会查看触摸是否附加了路径。如果是这样，我将路径平移（滑动）自我上次看到它以来触摸移动的量。然后我标记自己的布局：

```
- (void)touchMoved:(UITouch *)touch {
    UIBezierPath *path = objc_getAssociatedObject(touch,
        &kSpotlightPathAssociatedObjectKey);
    if (path == nil)
        return;
    CGPoint point = [touch locationInView:self];
    CGPoint priorPoint = [touch previousLocationInView:self];
    [path applyTransform:CGAffineTransformMakeTranslation(
        point.x - priorPoint.x, point.y - priorPoint.y)];
    [self setNeedsLayout];
} 
```

当触摸结束或被取消时，我实际上不需要做任何事情。Objective-C 运行时将自动取消关联的附加路径（如果有的话）：

```
- (void)touchEnded:(UITouch *)touch {
    // Nothing to do
} 
```

为了找到包含触摸的路径，我只需遍历聚光灯路径，询问每个路径是否包含触摸：

```
- (UIBezierPath *)firstSpotlightPathContainingTouch:(UITouch *)touch {
    CGPoint point = [touch locationInView:self];
    for (UIBezierPath *path in _spotlightPaths) {
        if ([path containsPoint:point])
            return path;
    }
    return nil;
}

@end 
```

我已将完整的演示上传[到 github](https://github.com/mayoff/image-view-with-spotlights)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-16T02:54:53.253

我一直在努力解决同样的问题，并在 SO 上找到了一些很大的帮助，所以我想我会结合我在网上找到的一些不同想法来分享我的解决方案。我添加的一项附加功能是让切口具有渐变效果。这个解决方案的额外好处是它适用于任何 UIView 而不仅仅是图像。

第一个子类`UIView`将除您要剪切的帧之外的所有内容都涂黑：

```
// BlackOutView.h
@interface BlackOutView : UIView

@property (nonatomic, retain) UIColor *fillColor;
@property (nonatomic, retain) NSArray *framesToCutOut;

@end

// BlackOutView.m
@implementation BlackOutView

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetBlendMode(context, kCGBlendModeDestinationOut);

    for (NSValue *value in self.framesToCutOut) {
        CGRect pathRect = [value CGRectValue];
        UIBezierPath *path = [UIBezierPath bezierPathWithRect:pathRect];

        // change to this path for a circular cutout if you don't want a gradient 
        // UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:pathRect];

        [path fill];
    }

    CGContextSetBlendMode(context, kCGBlendModeNormal);
}
@end 
```

如果您不想要模糊效果，则可以将路径交换到椭圆形路径并跳过下面的模糊蒙版。否则，切口将是方形并填充圆形渐变。

创建一个渐变形状，中心透明并逐渐变黑：

```
// BlurFilterMask.h
@interface BlurFilterMask : CAShapeLayer

@property (assign) CGPoint origin;
@property (assign) CGFloat diameter;
@property (assign) CGFloat gradient;

@end

// BlurFilterMask.m
@implementation CRBlurFilterMask

- (void)drawInContext:(CGContextRef)context
{
    CGFloat gradientWidth = self.diameter * 0.5f;
    CGFloat clearRegionRadius = self.diameter * 0.25f;
    CGFloat blurRegionRadius = clearRegionRadius + gradientWidth;

    CGColorSpaceRef baseColorSpace = CGColorSpaceCreateDeviceRGB();
    CGFloat colors[8] = { 0.0f, 0.0f, 0.0f, 0.0f,     // Clear region colour.
        0.0f, 0.0f, 0.0f, self.gradient };   // Blur region colour.
    CGFloat colorLocations[2] = { 0.0f, 0.4f };
    CGGradientRef gradient = CGGradientCreateWithColorComponents (baseColorSpace, colors,     colorLocations, 2);

    CGContextDrawRadialGradient(context, gradient, self.origin, clearRegionRadius, self.origin, blurRegionRadius, kCGGradientDrawsAfterEndLocation);

    CGColorSpaceRelease(baseColorSpace);
    CGGradientRelease(gradient);
}

@end 
```

现在你只需要将这两个一起调用并传入`UIView`你想要剪切的 s

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self addMaskInViews:@[self.viewCutout1, self.viewCutout2]];
}

- (void) addMaskInViews:(NSArray *)viewsToCutOut
{
    NSMutableArray *frames = [NSMutableArray new];
    for (UIView *view in viewsToCutOut) {
        view.hidden = YES; // hide the view since we only use their bounds
        [frames addObject:[NSValue valueWithCGRect:view.frame]];
    }

    // Create the overlay passing in the frames we want to cut out
    BlackOutView *overlay = [[BlackOutView alloc] initWithFrame:self.view.frame];
    overlay.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.8];
    overlay.framesToCutOut = frames;
    [self.view insertSubview:overlay atIndex:0];

    // add a circular gradients inside each view
    for (UIView *maskView in viewsToCutOut)
    {
        BlurFilterMask *blurFilterMask = [BlurFilterMask layer];
        blurFilterMask.frame = maskView.frame;
        blurFilterMask.gradient = 0.8f;
        blurFilterMask.diameter = MIN(maskView.frame.size.width, maskView.frame.size.height);
        blurFilterMask.origin = CGPointMake(maskView.frame.size.width / 2, maskView.frame.size.height / 2);
        [self.view.layer addSublayer:blurFilterMask];
        [blurFilterMask setNeedsDisplay];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-15T15:00:33.723

如果你只是想要即插即用的东西，我在 CocoaPods 中添加了一个库，它允许你创建带有矩形/圆形孔的叠加层，允许用户与叠加层后面的视图进行交互。它是其他答案中使用的类似策略的 Swift 实现。我用它为我们的一个应用程序创建了本教程：

![使用 TAOverlayView 的教程](../Images/e10a5bf3e586a0bdc839389a2f356536.png)

该库名为[TAOverlayView](https://github.com/TobogganApps/TAOverlayView)，在 Apache 2.0 下是开源的。

注意：我还没有实现移动孔（除非你像其他答案一样移动整个覆盖）。

# php - PHP，计算多个变量的总数

> ID：15375780
> 
> 赞同：0
> 
> 时间：2013-03-13T02:04:33.093
> 
> 标签：php, html

我有这个代码工作，现在它不输出总数，它总是保持在 0。

我已经检查过了，以确保没有丢失分号或任何东西。

我知道它的代码非常不安全，但是我只想让它现在工作！

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="Style.css">
<link href='http://fonts.googleapis.com/css?family=Tauri' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Cantora+One' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="container">

<?php
$firstchoice=$_POST["Cases"];
$secondchoice=$_POST["CPU"];
$thirdchoice=$_POST["Motherboard"];
$fourthchoice=$_POST["HDD"];
$fifthchoice=$_POST["PSU"];
$sixthchoice=$_POST["RAM"];
$seventhchoice=$_POST["GPU"];
?>

<?php

//prices

$Casecom=12.27;
$Antec300=31.99;
$Coolermaster690 = 74.99;
$CorsairObsidian = 148.05;

$AMDAthlon450 = 32.00;
$AMDA4 = 32.00;
$AMDA10 = 95.12;
$AMDFX8350 = 166.58;
$IntelG530 = 36.99;
$Inteli3 = 90.78;
$Inteli5 = 148.14;

$GigabyteGA78LMTUSB3 = 38.99;
$ASUSSabertooth990FX = 135.50;
$BiostarH61MU3H61 = 43.98;
$AsusSABERTOOTHX79 = 263.90;

$HitachiZ5K500 = 32.54;
$WD3TB = 100.00;
$OCZ128GB = 74.68;
$OCZ240GB = 119.99;

$CoolermasterGX550W = 57.99;
$CasecomSilver500W = 99.99;
$CorsairTX650W = 131.00;

$Kingston2GBx1 = 11.00;
$Kingston2GBx2 = 20.00;
$KingstonHyperX = 14.99;
$KingstonHyperX4GB = 26.54;
$CrucialBallistix = 24.99;
$CorsairValue4GB = 27.01;
$CorsairXMS2GB = 34.57;
$Kingston8GB = 40.00;
$Corsair8GBVeng = 54.56;
$GSkill8GB = 57.54;
$CorsairXMS12GB = 67.43;
$GSKill16GB = 88.94;
$Corsair16GBVeng = 96.74;

$XFXHD6450 = 34.59;
$SapphireHD6570 = 53.67;
$PowerColorHD6870 = 89.64;
$XFXHD6870 = 124.65;
$GigabyteHD7870 = 195.75;
$KFAGT630 = 61.00;
$EVGA650SC = 94.75;
$Gigabyte650 = 133.56;
$EVGAGTX660 = 215.78;

if 
($firstchoice =="Casecom CM-262 Case"){
$total_price1 = $Casecom;}
else if
($firstchoice =="Antec 300 Case"){
$total_price1 = $Antec300;}
else if
($firstchoice =="Coolermaster 690 NVIDIA Edition"){
$total_price1 = $Coolermaster690;}
else if
($firstchoice =="Corsair Obsidian 900D Case"){
$total_price1 = $CorsairObsidian;}

if
($secondchoice =="AMD Athlon II X3 450 3.2Ghz 3-Core"){
$total_price2 = $AMDAthlon450;}
else if
($secondchoice =="AMD A4 3300 2.5GHz 2-Core"){
$total_price2 = $AMDA4;}
else if
($secondchoice =="AMD A10 5800K Black Edition 3.8GHz 4-Core"){
$total_price2 = $AMDA10;}
else if
($secondchoice =="AMD FX8350 4GHz 8-Core"){
$total_price2 = $AMDFX8350;}
else if
($secondchoice =="Intel Celeron G530 Single Core"){
$total_price2 = $IntelG530;}
else if
($secondchoice =="Intel Core i3 2120 Dual Core"){
$total_price2 = $Inteli3;}
else if
($secondchoice =="Intel Core i5 2320 Quad Core"){
$total_price2 = $Inteli5;}

if
($thirdchoice =="Gigabyte GA-78LMT-USB3 760G Socket AM3+ VGA DVI HDMI 7.1 Channel Audio mATX"){
$total_price3 = $GigabyteGA78LMTUSB3;}
else if
($thirdchoice =="ASUS Sabertooth 990FX R2.0 Socket AM3+ 8 Channel Audio ATX Motherboard"){
$total_price3 = $ASUSSabertooth990FX;}
else if
($thirdchoice =="Biostar H61MU3 H61 Socket 1155 6 Channel HD Audio mATX Motherboard"){
$total_price3 = $BiostarH61MU3H61;}
else if
($thirdchoice =="Asus SABERTOOTH X79 Socket 2011 8 Channel Audio ATX Motherboard"){
$total_price3 = $AsusSABERTOOTHX79;}

if 
($fourthchoice =="Hitachi 250GB Travelstar Z5K500 Internal Hard Drive"){
$total_price4 = $HitachiZ5K500;}
else if 
($fourthchoice =="WD 3TB Green Desktop Drive"){
$total_price4 = $WD3TB;}
else if 
($fourthchoice =="OCZ 128GB Agility 4 SSD"){
$total_price4 = $OCZ128GB;}
else if 
($fourthchoice =="OCZ 240GB Agility 4 SSD"){
$total_price4 = $OCZ240GB;}

if 
($fifthchoice =="Coolermaster GX 550W PSU"){
$total_price5 = $CoolermasterGX550W;}
else if 
($fifthchoice =="Casecom Silver 500W PSU - With 12cm Red LED Fan"){
$total_price5 = $CasecomSilver500W;}
else if 
($fifthchoice =="Corsair TX 650W PSU - 80plus Bronze Certified"){
$total_price5 = $CorsairTX650W;}

if 
($sixthchoice =="Kingston 2GB DDR3 1600MHz Value Memory"){
$total_price6 = $Kingston2GBx1;}
else if 
($sixthchoice =="Kingston 2x 2GB(4GB) DDR3 1600MHz Value Memory"){
$total_price6 = $Kingston2GBx2;}
else if 
($sixthchoice =="Kingston 2GB DDR3 1333MHz HyperX Black Series"){
$total_price6 = $Kingston2GBx2;}
else if 
($sixthchoice =="Kingston 4GB DDR3 1600MHz HyperX Black Series"){
$total_price6 = $Kingston4GB;}
else if 
($sixthchoice =="Crucial 2GB DDR2 800MHz Ballistix Sport Memory"){
$total_price6 = $CrucialBallistix;}
else if 
($sixthchoice =="Corsair Value 4GB (2x2GB) DDR3 1333MHz Memory"){
$total_price6 = $CorsairValue4GB;}
else if 
($sixthchoice =="Corsair 2GB DDR2 800MHz XMS2 Memory"){
$total_price6 = $CorsairXMS2GB;}
else if 
($sixthchoice =="Kingston 8GB DDR3 1600MHz HyperX Genesis Memory"){
$total_price6 = $Kingston8GB;}
else if 
($sixthchoice =="Corsair 8GB (2X4GB) DDR3 1600Mhz RED Vengeance Memory Kit CL8 1.5V"){
$total_price6 = $Corsair8GBVeng;}
else if 
($sixthchoice =="G.Skill 8GB DDR3 1600mhz Sniper Memory"){
$total_price6 = $GSkill8GB;}
else if 
($sixthchoice =="Corsair 12GB DDR3 1600Mhz XMS Memory"){
$total_price6 = $CorsairXMS12GB;}
else if 
($sixthchoice =="G.Skill 16GB DDR3 1600MHz RipjawsZ X79 Memory"){
$total_price6 = $GSKill16GB;}
else if 
($sixthchoice =="Corsair 16GB 1600MHz Vengeance Blue Memory"){
$total_price6 = $Corsair16GBVeng;}

if
($seventhchoice =="XFX HD 6450 Core 2GB DDR3 VGA DVI HDMI PCI-E Graphics Card"){
$total_price7 = $XFXHD6450;}
else if 
($seventhchoice =="Sapphire HD 6570 2GB DDR3 DVI VGA HDMI PCI-E Graphics Card"){
$total_price7 = $SapphireHD6570;}
else if 
($seventhchoice =="XFX HD 6870 900MHz 1GB GDDR5 Dual DVI Dual Mini DisplayPort HDMI PCI-E Graphics"){$total_price7 = $XFXHD6870;}
else if 
($seventhchoice =="Gigabyte HD 7870 OC 2048MB GDDR5 DVI HDMI Dual Mini DisplayPort PCI-E Graphics"){$total_price7 = $GigabyteHD7870;}
else if 
($seventhchoice =="KFA2 GT 630 2GB DDR3 VGA DVI HDMI PCI-E Graphics Card"){$total_price7 = $KFAGT630;}
else if 
($seventhchoice =="EVGA GTX 650 SuperClocked 1GB GDDR5 Dual DVI Mini HDMI PCI-E Graphics Card"){$total_price7 = $EVGA650SC;}
else if 
($seventhchoice =="Gigabyte GTX 650 Ti 2GB GDDR5 5400MHz Dual DVI 1x HDMI PCI-E Graphics Card"){$total_price7 = $Gigabyte650;}
else if 
($seventhchoice =="EVGA GTX 660 Ti 2048MB GDDR5 Dual DVI HDMI DisplayPort PCI-E Graphics Card"){$total_price7 = $EVGAGTX660;}

else
?>

<div id="Subtitle">
<?php 
echo "Order Summary"
?>
</div>
<div id="orderSummary">
<div id="CaseItem">
<h3>Case:</h3>
<?php
echo $firstchoice;
?>
</div>
<div id="CPUItem">
<h3>CPU:</h3>
<?php
echo $secondchoice;
?>
</div>
<div id="MotherboardItem">
<h3>Motherboard:</h3>
<?php
echo $thirdchoice;
?>
</div>
<div id="HDDItem">
<h3>Hard Disk Drive</h3>
<?php
echo $fourthchoice;
?>
</div>
<div id="PowerSupplyItem">
<h3>Power Supply</h3>
<?php
echo $fifthchoice;
?>
</div>
<div id="RAMItem">
<h3>Memory (RAM)</h3>
<?php
echo $sixthchoice;
?>
</div>
<div id="GPUItem">
<h3>Graphics Card: </h3>
<?php
echo $seventhchoice;
?>
</div>
<div id="TotalCost">
<?php
echo nl2br (" \r\n");
$overall_price = $total_price1 + $total_price2 + $total_price3 + $total_price4 + $total_price5 + $total_price6 + $total_price7;
echo "Total Cost: " .$overall_price;
?>
</div>
</div>

</div>
<body>
<html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:00:39.353

几乎可以肯定，您的变量与/块`_POST`中的选项不匹配。`if``else`

我这样说是因为我已经运行了您的代码，只进行了以下替换：

```
$firstchoice="Casecom CM-262 Case"; //$_POST["Cases"];
$secondchoice="AMD Athlon II X3 450 3.2Ghz 3-Core"; //$_POST["CPU"];
$thirdchoice="Gigabyte GA-78LMT-USB3 760G Socket AM3+ VGA DVI HDMI 7.1 Channel Audio mATX"; //$_POST["Motherboard"];
$fourthchoice="Hitachi 250GB Travelstar Z5K500 Internal Hard Drive"; //$_POST["HDD"];
$fifthchoice="Coolermaster GX 550W PSU"; //$_POST["PSU"];
$sixthchoice="Kingston 2GB DDR3 1600MHz Value Memory"; //$_POST["RAM"];
$seventhchoice="XFX HD 6450 Core 2GB DDR3 VGA DVI HDMI PCI-E Graphics Card"; //$_POST["GPU"]; 
```

（...此更改是在您问题代码顶部附近的明显位置进行的。）

将字符串硬编码以匹配代码中每个相应`if`/`else`循环中的选项之一，结果是：

> 总成本：219.38

This is strong evidence that your code gives the desired result but that the $_POST variables are not actually coming in as you expect.

You might add a `print_r($_POST);` near the top to see what is actually coming in.

# backbone.js - 如何使用 Backbone.js 管理元素位置属性？

> ID：15375781
> 
> 赞同：0
> 
> 时间：2013-03-13T02:04:43.373
> 
> 标签：backbone.js, backbone-views, backbone.js-collections, backbone-model

我有这个多人棋盘游戏项目，它有一个**棋盘** *（作为集合）*和许多**块**对象（作为模型）*。

为了向所有在线玩家显示相同的棋盘设置，我如何组织我的 Backbone 代码以在玩家移动说**Piece后更新****Piece 的** CSS 属性？`position`

 *** * *

***附加信息：***

我在服务器端使用 Django 框架，其中每个**Piece**对象都有一个`id`,`x_position`和`y_position`属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:26:32.720

您可以在作品上使用 CSS 类。假设你`x_position`的范围是 az 而你`y_position`的范围是 1-8 那么

```
<div class="pawn <%= x_position+y_position %>">pawn</div> 
```

你的 CSS 可能看起来像

```
a1 { left:0; bottom:0; }
a2 { left:0; bottom:1em; }
/* and so on */
b1 { left:1em; bottom:0; }
/* and so on */ 
```

听你的可拖动`stop`事件并找出它在哪个方块中（它会为你提供 ui 对象中的放置位置（`ui.position.left`和`ui.position.top`）。然后你可以应用正确的 CSS 类更新模型，并清除可拖动设置的属性。**

# ios - 不同的 UIViewController 方向取决于用户在哪个视图中

> ID：15375783
> 
> 赞同：0
> 
> 时间：2013-03-13T02:04:52.360
> 
> 标签：ios, uiviewcontroller

我想为我的应用程序中的不同视图控制器设置不同的规则，而不是跨所有视图的单一规则（就像您可以在 Target-Summary 中定义的那样）。

例如，我有几个视图我希望我的前几个视图只出现在纵向视图中，但是在我的最后一个视图中，我希望用户能够在纵向和横向之间进行切换......我很想知道如何做到这一点.

此外，我还阅读了用户在横向导航到视图的问题，并且视图在应该是纵向时显示为横向，并且在用户旋转设备之前不会改变，如果可能的话，我想避免这种情况......

所以我的问题是如何根据用户所在的视图允许不同的 UIViewController 方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:11:23.287

这取决于您的目标是 iOS 5 还是 iOS 6。
iOS 5：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation {
   if ((orientation == UIInterfaceOrientationPortrait) ||
       (orientation == UIInterfaceOrientationLandscapeLeft))
       return YES;

       return NO;
} 
```

iOS 6：

在 App Summary 中设置默认支持的方向，然后在 VC 中设置不同的方向：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft;
} 
```

[此处](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)的 Apple 文档

有关更多信息，请参阅这些问题：

[在 iOS 6 中未调用 shouldAutorotateToInterfaceOrientation](https://stackoverflow.com/questions/12260261/shouldautorotatetointerfaceorientation-not-being-called-in-ios-6)

[shouldAutorotateToInterfaceOrientation 在 iOS 6 中不起作用](https://stackoverflow.com/questions/12577879/shouldautorotatetointerfaceorientation-is-not-working-in-ios-6)

# powerbuilder - Powerbuilder 导入文件/另存为

> ID：15375788
> 
> 赞同：0
> 
> 时间：2013-03-13T02:05:04.387
> 
> 标签：powerbuilder

我的客户需要将文本文件导入系统，但他们的文本文件是管道分隔的“|”。他们还需要将一些数据导出为相同的格式（管道分隔）。我被要求使用 Powerbuilder 12。是否可以直接使用 PipeDelimited 文本文件导入文件？我想跳过“FOR LOOP MID GET”方法，直接去 importfile 然后更新（）。dw.saveas() 也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:29:47.373

据我所知，我们对导入并不幸运，因为我们无法定义分隔符，但这里有一个解决方法：

1.  将文件读入字符串变量
2.  更换管道 | 逗号，
3.  将字符串作为 CSV 导入 dw

我为你做了一个小测试应用程序，它工作。我的文本文件是这样的：

Col1|Col2|Col3

aaa|bbb|ccc

这是导入代码：

```
string  ls_import, ls_export
long    ll_filehandle, ll_readbytes
// IMPORT
ll_filehandle = FileOpen("d:\Work\StackExchange\pipes.txt", TextMode!)   
ll_readbytes    = FileReadEx(ll_filehandle, ls_import)

if ll_filehandle = -1 or IsNull(ll_filehandle) then
else
    ls_import   = f_glo_replace_all(ls_import, "|", ",")
    dw_1.ImportString(CSV!, ls_import)
end if 
```

随着出口，我们有更多的运气。有一个 datawindow 方法，您可以在其中自定义导出的分隔符​​：

[SaveAsFormattedText](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc37783_1150/html/dwref/BABIHIDF.htm)

所以导入看起来像这样：

dw_1.SaveAsFormattedText("d:\Work\StackExchange\export_pipes.txt", EncodingANSI!, "|")

当然你需要全局替换函数的代码：

这是来源：

```
global type f_glo_replace_all from function_object
end type

forward prototypes
global function string f_glo_replace_all (string source, string look_for, string replace_with)
end prototypes

global function string f_glo_replace_all (string source, string look_for, string replace_with);/*A String Occurrence Search and Replace RoutineThe following code demonstrates a string occurrence search and replaceroutine.This routine works generically for any string. For example,if old_str = "red" and new_str ="green", all occurrences of "red" inside of mystring will be replaced with "green". 
Parameters 
Name = source Type = String 
Name = look_for Type = String 
Name = replace_with Type = String 
*/ 
int start_pos=1,len_look_for 

len_look_for = len(lower(look_for)) 
//find the first occurrence of look_for ... 
start_pos = Pos(lower(source),lower(look_for), start_pos) 
//only enter the loop if you find whats in look_for 
DO WHILE start_pos > 0 
    //replace look_for with replace_with ... 
    source = Replace(source,start_pos,Len_look_for,replace_with) 
    //find the next occurrence of 
    start_pos = Pos(lower(source), lower(look_for), start_pos+Len(replace_with)) 
LOOP 
return source 
end function 
```

我希望这有帮助！

兄弟。加博尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:09:37.580

不，这不可能是你想要的方式。您需要编写自己的 ImportFile 版本，抱歉这不是您想要的答案。

# matplotlib - 如何在 matplotlib 中自动缩放 y 轴？

> ID：15375791
> 
> 赞同：6
> 
> 时间：2013-03-13T02:05:35.670
> 
> 标签：matplotlib

我目前正在创建许多情节，其中一些看起来很棒，而另一些则需要一些调整。从下面如何使难以看到的情节线更容易看到而无需手动绘制它们？我一次绘制 50-100 个，然后将它们添加到 pdf 报告中。我想在该行下方添加空格，例如将 ylim min limit 设置为 -0.1，但会自动执行。

这条很难看的情节线： ![很难看到情节线](../Images/61d47ed1e3ad25ed72b87ca30e5c3481.png)

这一条很容易看出情节线： ![易于看到的情节线](../Images/0bdba2d69c1f234a949618cbcf514585.png)

这是我的绘图代码：

```
def plot(chan_data):
'''Uses matplotlib to plot a channel
'''
f, ax = plt.subplots(1, figsize=(8, 2.5))
x = dffinal['time'].keys()    
ax.plot(x, dffinal[chan_data].values, linewidth=0.4, color='blue')
ax.xaxis.set_major_formatter(mdates.DateFormatter('%m/%d/%Y - %H:%M'))
ax.xaxis.set_major_locator(mdates.AutoDateLocator(interval_multiples=True))

lgd1 = ax.legend(loc='center left', bbox_to_anchor=(1, 0.5))

f.autofmt_xdate()
ax.set_ylabel(dffinal[chan_data].name)
ax.grid('on')

#I've tried these with no luck
#ax.autoscale(enable=True, axis='y', tight=False)
#ax.set_ymargin(0.5)
#ax.set_autoscaley_on(True)

fname = ".\\plots\\" + chan_data + ".png"
print "Creating: " + fname
plt.savefig(fname, dpi=100, bbox_extra_artist=(lgd1,), bbox_inches='tight')
plt.close()
return fname 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T03:13:51.417

你想要`margins` [医生](https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.margins.html#matplotlib.axes.Axes.margins)

前任

```
ax.margins(y=.1) 
```

另请参阅[当图在图形边缘运行时添加边距](https://stackoverflow.com/questions/14493334/add-margin-when-plots-run-against-the-edge-of-the-graph/14498142#14498142)

# paypal - 如何在新的开发者 UI 中重置沙盒业务帐户的余额？

> ID：15375795
> 
> 赞同：2
> 
> 时间：2013-03-13T02:05:51.407
> 
> 标签：paypal, paypal-sandbox

我正在测试批量支付功能。我们使用一个测试业务账户来保持余额，并支付给客户，然后验证资金已经转移。

使用旧的 UI，我曾经能够偶尔“重置”沙盒帐户，以便我们将一些现金存入余额。

但是，对于新的开发人员 UI，似乎没有办法做到这一点。有没有人可以重置沙盒业务帐户的余额？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:35:06.247

我们将传递反馈以添加该功能。与此同时，您应该能够从您的其他一个测试账户（我们将其称为账户 A）向发送批量支付交易的账户（账户 B）发送一笔款项，并给它一个余额。

为此：

登录账户 A> 点击汇款 > 输入账户 B 的电子邮件地址 > 输入您要汇款的金额 > 点击继续 > 点击汇款。

账户 B 现在将有余额并能够发送批量付款。

# c# - 模型绑定到列表 MVC 4

> ID：15375800
> 
> 赞同：31
> 
> 时间：2013-03-13T02:06:47.707
> 
> 标签：c#, asp.net-mvc-4

是否有将 IList 项目绑定到视图的模式。我似乎对 HttpPost 有问题。我知道 Phil Haack 写了一篇不错的文章，但它已经过时了，他说他们可能会修复 MVC 4。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-13T02:25:16.747

如果我需要为每个项目显示一个表单并输入各种属性，我就是这样做的。真的取决于我想要做什么。

ViewModel 看起来像这样：

```
public class MyViewModel
{
   public List<Person> Persons{get;set;}
} 
```

查看（当然使用 BeginForm）：

```
@model MyViewModel

@for( int i = 0; i < Model.Persons.Count(); ++i)
{
    @Html.HiddenFor(m => m.Persons[i].PersonId)
    @Html.EditorFor(m => m.Persons[i].FirstName) 
    @Html.EditorFor(m => m.Persons[i].LastName)         
} 
```

行动：

```
[HttpPost]public ViewResult(MyViewModel vm)
{
... 
```

请注意，在回发时，只有具有可用输入的属性才会具有值。即，如果 Person 有一个 .SSN 属性，它在 post 操作中将不可用，因为它不是表单中的字段。

请注意，MVC 模型绑定的工作方式，它只会查找连续的 ID。因此，在有条件地隐藏一个项目的情况下执行此类操作将导致它在第 5 个项目之后不绑定任何数据，因为一旦遇到 ID 中的间隙，它将停止绑定。即使有 10 个人，您也只会在回发中获得前 4 个：

```
@for( int i = 0; i < Model.Persons.Count(); ++i)
{
    if(i != 4)//conditionally hide 5th item, 
    { //but BUG occurs on postback, all items after 5th will not be bound to the the list
      @Html.HiddenFor(m => m.Persons[i].PersonId)
      @Html.EditorFor(m => m.Persons[i].FirstName) 
      @Html.EditorFor(m => m.Persons[i].LastName)           
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-16T19:55:44.960

一个干净的解决方案可以是创建一个通用类来处理列表，因此您无需在每次需要时都创建不同的类。

```
public class ListModel<T>
{
    public List<T> Items { get; set; }

    public ListModel(List<T> list) {
        Items = list;
    }
} 
```

当您返回视图时，您只需要简单地执行以下操作：

```
List<customClass> ListOfCustomClass = new List<customClass>();
//Do as needed...
return View(new ListModel<customClass>(ListOfCustomClass)); 
```

然后在模型中定义列表：

```
@model ListModel<customClass> 
```

准备出发：

```
@foreach(var element in Model.Items) {
  //do as needed...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T03:28:41.363

~控制器

```
namespace ListBindingTest.Controllers
{
    public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            List<String> tmp = new List<String>();
            tmp.Add("one");
            tmp.Add("two");
            tmp.Add("Three");
            return View(tmp);
        }

        [HttpPost]
        public ActionResult Send(IList<String> input)
        {
            return View(input);
        }    
    }
} 
```

~ 强类型索引视图

```
@model IList<String>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
<meta name="viewport" content="width=device-width" />
<title>Index</title>
</head>
<body>
    <div>
    @using(Html.BeginForm("Send", "Home", "POST"))
    {
        @Html.EditorFor(x => x)
        <br />
        <input type="submit" value="Send" />
    }
    </div>
</body>
</html> 
```

~ 强类型发送视图

```
@model IList<String>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
<meta name="viewport" content="width=device-width" />
<title>Send</title>
</head>
<body>
    <div>
    @foreach(var element in @Model)
    {
        @element
        <br />
    }
    </div>
</body>
</html> 
```

这就是你要做的所有事情，将他的 MyViewModel 模型更改为 IList。

# python - Python脚本运行良好一段时间然后返回MemoryError（python 3.3）

> ID：15375813
> 
> 赞同：0
> 
> 时间：2013-03-13T02:08:30.107
> 
> 标签：python, python-3.x, tkinter, python-imaging-library, pywin32

我有一个小脚本，它利用 Python3.3 的 Python Imaging Library 模块（在 Win7 上，8 gb 的 RAM）每秒一次截取屏幕的一个小（~40x50）像素区域并将其与图像进行比较我已经必须检测一个特定的模式并执行我创建的另外两个模块，如果它被发现的话。该脚本似乎在前 30 分钟左右完美运行，但随后脚本崩溃，我收到以下错误：

`Traceback (most recent call last):
File "<string>", line 420, in run_nodebug
File "C:\Users\Nate Simon\Dropbox\CaptchaLibrary\detectNRun.py", line 68, in <module>:
im2 = ImageGrab.grab((left,upper,right,lower))
File "C:\Python33\lib\site-packages\PIL\ImageGrab.py", line 47, in grab:
size, data = grabber()
MemoryError`

我已经调整了屏幕截图之间的时间，它所做的只是程序崩溃时的延迟。

这似乎是有问题的代码：

```
im2 = ImageGrab.grab((left,upper,right,lower)) # Take a screenshot at given coordinates

for x in range(im2.size[0]): # This section just changes to image to black/white for better comparing but might be relevant.
    for y in range(im2.size[1]):
        pixel = im2.getpixel((x,y))
        if pixel[0] < 40 or pixel[1] < 40 or pixel[2] < 40:
            color = (0, 0, 0)
        else:
            color = (255, 255, 255)
        im2.putpixel((x,y), color) 
```

此脚本中没有添加任何列表、字典或数据库，每次运行时，旧屏幕截图都会在内存中被覆盖（它永远不会保存到磁盘）。

也可能相关：来自我`sleep()`用于延迟和`time()`跟踪系统时间的时间模块。我还使用 win32api 进行鼠标/键盘输入，并使用 tkinter 在以下几行中读取剪贴板：

```
 c = Tk()
    c.withdraw()
    result = c.clipboard_get()
    c.destroy() 
```

在另一部分中，在添加新数据之前清除剪贴板`c.clipboard_clear()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:14:10.730

我无法找到完全解决内存问题的适当解决方案（甚至在不同条件下复制它），所以我只是将操作之间的间隔从 1 秒增加到 15 秒，我还没有再次遇到内存错误。

# objective-c - 如果 NSString 不等于函数？

> ID：15375815
> 
> 赞同：8
> 
> 时间：2013-03-13T02:08:55.400
> 
> 标签：objective-c, nsstring

我已经到处搜索了这个，包括苹果在 NSString 上的文档（也许我没看到？），但我试图在 xCode 中找到一种方法来检查 NSString 是否不等于某个东西。很像

```
if (myNSSting = @"text" {... 
```

除了特别我想检查它是否不等于“文本”。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-13T02:10:28.683

```
 if(![myNSString isEqualToString:@"text"]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-05T08:13:58.563

对于不区分大小写的比较，我们可以通过以下方式处理：

```
 if( [@"Some String" caseInsensitiveCompare:@"some string"] == NSOrderedSame ) {
      // strings are equal except for possibly case
    } 
```

# javascript - Mootools getElements("input[type=radio]") 返回对象而不是数组

> ID：15375816
> 
> 赞同：1
> 
> 时间：2013-03-13T02:09:01.013
> 
> 标签：javascript, mootools

任何人都可以阐明为什么`getElements("input[type=radio]")`或`getElements("input[name=radioname]")`会返回一个对象而不是文档中指定的数组吗？

在我的情况下，这不仅作为对象返回，而且键值是作为字符串的索引，`("0", "1"...)`键的最后一个值是“长度”，值是 int n。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:12:39.417

您指的是哪个文档？

根据这个：[http](http://mootools.net/docs/core/Element/Element#Element:getElements) ://mootools.net/docs/core/Element/Element#Element:getElements ，它确实返回一个数组。

而且您描述对象的方式对我来说确实像一个数组。

# javascript - Cordova iPad 应用程序 - 视频停顿

> ID：15375818
> 
> 赞同：1
> 
> 时间：2013-03-13T02:09:07.960
> 
> 标签：javascript, html, ios, video, cordova

我正在使用 Cordova 为 iPad 应用程序构建内容。由于该应用程序已经构建并由 CMS 填充，因此我无法向其添加任何扩展或插件或模块或任何东西（这似乎很重要）。我正在构建的内容几乎完全是视频驱动的，基本上我有一堆`<video>`由点击事件触发的标签。正如我所说，所有视频都是从 CMS 加载的，而不包含在应用程序负载本身中。

大多数情况下它工作正常，但有时视频开始播放并会在中途停止。我的视频文件不是很大，它们只有大约 13 秒长，每个大约 700kb。

当视频停止时，控制台会记录以下错误：

```
Took background task assertion (5) for playback stall
Ending background task assertion (5) for playback stall 
```

括号中的数字会有所不同。

我对这意味着什么一无所知，而且在谈到 Xcode/Cordova 世界时，我几乎是一个完全的新手——前端开发是我的事，但 Cordova 世界对我来说是新的。我不知道是什么原因造成的，它似乎是随机的。我假设它可能是比特率/带宽的东西，但这没有意义，因为当视频被触发时，我检测到它是`readystate`为了等待它在播放前加载，所以理论上它应该是完全 -在开始播放之前加载。

有什么解决方案或策略可以尝试吗？我有点不知所措，在搜索该特定错误消息时，互联网和谷歌并没有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:44:29.057

如果问题是加载，Cordova 中的一个不错的技巧是尝试将其设置为（小）超时，以便在视频之前加载其余部分。如上所述，readtyState 选项并不总是可靠的。

# python-3.x - 没有对 brew macvim 的 python3 支持

> ID：15375822
> 
> 赞同：0
> 
> 时间：2013-03-13T02:09:36.850
> 
> 标签：python-3.x, homebrew, macvim

出于某种原因，与 brew 一起安装的 macvim 没有 python3 支持。这是我安装它的方法：

```
brew install macvim --with-cscope --with-python3 
```

每当我跑步

```
:echo has('python3') 
```

结果为 0，表示不支持 python3。有谁知道是什么问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T12:24:34.883

在 homebrew 的 macvim 配方中故意禁用了 Python 3。

但是，您可以运行“brew edit macvim”并修复配方以使其正常工作。

我建议采取以下措施（对我有用）：

*   使用当前的 MacVim 7.4 快照 72（更新 url 和 sha1）。brew 仍然具有较旧的快照 71。
*   sha1 '3fb5b09d7496c8031a40e7a73374424ef6c81166'
*   删除配方末尾的所有补丁。最后一行应该是`__END__`. 不再需要任何补丁 - ruby​​ 支持已在快照 72 的上游修复。
*   依赖：python3 =>：推荐
*   在安装函数中，当它与 args 混淆时，修复 python 部分，如下所示：

    ```
    args << "--enable-python3interp=yes" if build.with? 'python3'
    ENV.prepend 'LDFLAGS', "-L#{python3.libdir} -F#{python3.framework} -framework Ruby" if python3 && python3.brewed? 
    ```

确保您使用自制的 python3，如果您已升级到 Mavericks，请重新制作所有内容 - stdc++ 库已更改，链接时不能混合新旧。

用以下方法酿造： `$ brew install --HEAD macvim`

`$ mvim --version` # 确保它链接了所有正确的东西

我已经使用了 ultisnips 和 vinarise，这两种方法都有效，但都没有导致窗口神秘地消失，正如之前在 macvim 和 python3 的配方中所感叹的那样。我还使用 :py3 命令进行了其他基本测试。未发现问题（尚未）

# python - python实时客户端-服务器应用程序

> ID：15375832
> 
> 赞同：0
> 
> 时间：2013-03-13T02:10:34.720
> 
> 标签：python, client-server, real-time

我需要创建一个实时客户端-服务器应用程序（如 Dropbox）。

客户端应用程序应该监听一个数据通道。

我可以用python做到吗？

python 中有哪些解决方案、技术、模块可以完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:13:32.500

是的，你可以用 Python 做到这一点。如果你也喜欢的话，你可以使用 PHP、Bash、JavaScript、Ruby、C、C++、C#、Java、Haskell、Go、Assembler、Perl、Pascal、Oberon、Prolog、Lisp 或 Caml 来实现。

大多数套接字接口属于以下两类之一：

1.  阻塞接口

2.  事件接口

如果不知道您的应用程序做了什么，就无法知道哪个适合您的应用程序。

# c# - 在 ViewModel 中更新视图

> ID：15375833
> 
> 赞同：2
> 
> 时间：2013-03-13T02:11:06.010
> 
> 标签：c#, data-binding, mvvm, inotifypropertychanged

假设我有一个绑定到 TextBlock 的属性。假设绑定看起来像这样：

```
public string Data
{
     get { return _text; }
     set
     { 
          _text = value;
          OnPropertyChanged("Data");
     }        
} 
```

`Data = "blue";`如果我说为什么我必须再说一遍，我的代码中的其他地方`OnPropertyChanged("Text");`？如果我不第二次添加 OnPropertyChanged，它将不会自动更新。我认为由于我在 set 访问器中执行 OnPropertyChanged，所以当我为属性分配某些内容时，它会自动更新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:32:24.137

我解决了这个问题。我正在做`_text = "Blue";`而不是`Data = "Blue";`一旦我更改它以将文本分配给属性而不是视图已正确更新的字段。

# javascript - '对象不是函数' - onclick 事件

> ID：15375845
> 
> 赞同：3
> 
> 时间：2013-03-13T02:12:48.510
> 
> 标签：javascript, function, syntax-error

在我开始之前，不，我没有用分号找到的问题，并且我将 NO 值传递给函数。

当我尝试从控制台执行函数“login()”时，它工作得很好，但是当我单击 HTML 输入按钮来调用它时，我得到“未捕获的 TypeError：对象不是函数”。顺便说一句，这是在 Chrome 中。

```
var aj=new XMLHttpRequest();
var loginf=document.forms["login"];
var regf=document.forms["reg"];

function login(){
var errors=document.getElementById("login_err");
var errs=[];
var uname=loginf['uname'];
var pass=loginf['pass'];
var unameVal=uname.value;
var passVal=pass.value;

if(unameVal.length<4 && unameVal.length>0){
    errs.push("Username too short. Try again please.");
}
else if(unameVal.length>18){
    errs.push(innerHTML="Username is too long. Try again please.");
}
else if(unameVal.length==0){
    errs.push("Please enter a username.");
}

if(passVal.length<8){
    errs.push("Password too short. Try again, please.");
}
else if(passVal.length>30){
    errs.push("Password is too long. Try again please.");
}

if(errs.length==0){
    aj.onreadystatechange=function(){
        if(aj.readyState>=4 && aj.status==200){
            if(aj.responseText=="suc"){
                window.location="/new.php";
            }
        }
    }
    aj.open("POST","/inc/php/core.php",false);
    aj.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    aj.send("login=true&data="+data);
}
else{
    errors.innerHTML="<ul>";

    for(var x=0;x<errs.length;x++){
        errors.innerHTML+="<li>"+errs[x]+"</li>";
    }

    errors.innerHTML+="</ul>";
}
}

function reg(){

} 
```

然后输入按钮..

```
<input type="button" class="submit" value="Log in" style="width:25%" onclick="login();"/> 
```

我看不出代码有什么问题。

如果您能在此代码中找到 Waldo，请提前感谢您。

jsFiddle在这里：http: [//jsfiddle.net/6sa7M/2](http://jsfiddle.net/6sa7M/2)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T02:36:44.997

事实证明，函数名“login”既是对表单的引用，也是对函数的引用。

我把“login()”改成“loginUser()”，在控制台输入“login”，表单就返回了，确实是冲突了。

再次感谢您的所有帮助，并特别感谢 Marc 的真实回答。

# c++ - 语法错误：需要声明。为什么gsoap无法读取向量？

> ID：15375846
> 
> 赞同：2
> 
> 时间：2013-03-13T02:12:49.607
> 
> 标签：c++, gsoap

我正在用 gsoap 编写一个 Web 服务。当我编译这段代码时，它给了我错误：
**语法错误：预期声明**
当我删除向量时，它编译成功，

```
#include <stdsoap2.h>
#include <vector>

//gsoap ns service name:    PersonData
//gsoap ns service style:   document
//gsoap ns service encoding:    literal
//gsoap ns service namespace:   http://localhost/PersonData.wsdl
//gsoap ns service location:    http://localhost:7777
//gsoap ns schema namespace: urn:PersonData

class PersonInfo 
{
 public:
    std::string ID;
    std::string FirstName;
    std::string LastName;
    std::string Sex;
    std::string BirthDate;
    std::string BirthPlace;
    std::string SocialNumber;
};

class MultiplePersons
{
public:
       // It gives error only with vector 
    std::vector<PersonInfo> info; // **here is the error**
};
int ns__getSingleValue(std::string Param, std::string *result);

int ns__getFullRecord(std::string Param, MultiplePersons *result); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T05:24:42.310

唯一的错误是您应该包含导入语句：
#import "stlvector.h"
NOT
#include "stlvector.h"

在此之前，stlvector.h 文件应该在您的工作目录中。就我而言，我从 /usr/share/gsoap/import/ 复制到我存储项目文件的桌面文件夹。
资料来源：gSoap 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:44:54.447

嗯，也许是某种命名空间冲突？例如，“info”是在 stdsoap2.h 头文件中声明的对象。

# java - 数组中的对象异常

> ID：15375849
> 
> 赞同：2
> 
> 时间：2013-03-13T02:13:28.853
> 
> 标签：java

我有一个小项目和很多课程。我为一个字段创建了一个例外，它不起作用

```
public C(..., int yearX, ...) throws InitException {
        if (year == 2000) {
            ...
            year = yearX;
            ...
        } else
            throw new InitAnneeEC();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:38:11.373

您的问题出在您比较的构造函数中，`year`但您没有先设置它的值，所以总是会发生异常。

```
 public C(..., int yearX, ...) throws InitException {
        if (year == 2000) {
            ...
            year = yearX;
            ...
        } else
            throw new InitAnneeEC();
    } 
```

当您`if (year == 2000)`实际执行时，它使用默认值：0，因此比较总是错误的。我猜你想`anneeEC`用价值来设定`anneeE`价值。

尝试像这样更改您的代码：

```
 public C(..., int yearX, ...) throws InitException {
        year = yearX;
        if (year == 2008) {
            ...
        } else
            throw new InitException();
    } 
```

# objective-c - 在 ASIFormDataRequest 中记录 Post 值

> ID：15375851
> 
> 赞同：0
> 
> 时间：2013-03-13T02:13:33.143
> 
> 标签：objective-c, asihttprequest

我在 ASIFormDataRequest 中有 setPostValue。像这样：

```
ASIFormDataRequest *request = [[ASIFormDataRequest alloc] initWithURL:[NSURL URLWithString:url]];

[request setPostValue:@"helmi" forKey:@"username"];
[request setPostValue:@"123" forKey:@"password"];
[request setPostValue:@"goods" forKey:@"purchase"];

NSLog(@"..."); 
```

我想在发送到服务器之前显示 Post Value 的 NSLog。原因是因为我在 post 值中有很多变量值，需要检查我是否输入正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:25:48.813

`ASIFormDataRequest`保存一个名为 postData 的变量，它是一个`NSMutableArray`. 您可以使用访问其值

```
NSLog(@"%@", [request valueForKey@"postData"]) 
```

# c - AES ECB 加密/解密仅解密前 16 个字节

> ID：15375854
> 
> 赞同：5
> 
> 时间：2013-03-13T02:14:07.320
> 
> 标签：c, openssl, aes

我有解码 AES 256 字符串的函数，但它只返回 16 个字符

```
bool decrypt_block(unsigned char* cipherText, unsigned char* plainText, unsigned char* key)
{
    AES_KEY decKey;
    if (AES_set_decrypt_key(key, 256, &decKey) < 0)
        return false;
    AES_decrypt(cipherText, plainText, &decKey);
    return true;
} 
```

* * *

```
decrypt_block( encoded, resultText, ( unsigned char *) "57f4dad48e7a4f7cd171c654226feb5a"); 
```

任何想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-06T10:14:33.017

您似乎混淆了密钥长度和块大小。

AES 可用于 3 种不同的**密钥长度**：128 位、192 位和 256 位。

AES 始终使用 128 位（16 字节）的**块大小**。对于长度超过 16 个字节的消息，您需要一次解密（或加密）16 个字节，并期望每次得到 16 个字节的输出。（您还需要决定使用哪种模式 - 例如 CBC、CTR、ECB 等。如果您正在解密其他人提供的文本，则该决定已经为您做出。如果您自己做出决定，请承担请记住，ECB 几乎从来都不是正确的选择。）如果消息的长度不是 16 字节的倍数，[则需要对其进行填充](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)。PKCS #7 填充是最常见的。

有关更多信息，请参阅[有关 AES 的 Wikipedia 文章](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T04:19:28.470

AES 是一种分组密码。它加密和解密一个 128 位（16 字节）的块。AES_decrypt 和 AES_encrypt 一次作用于单个块。所以，你只会得到前 16 个字节。您必须手动解密或加密其他块。

如果您知道模式（如 CBC、ECB 等），则可以调用 AES_decrypt_cbc 等函数。

您需要修改代码如下（我只是举个例子）：

```
 int len = strlen(ciphertext); //or get cipher text length by any mean.
 int i;
 for(i=0; i<=len; i+=16)
    AES_decrypt(cipherText+i, plainText+i, &decKey); 
```

如果您确定模式，请调用 cbc/ecb/cfb/​​ofb 模式函数。

如有任何疑问，请告诉我。

# php - 不符合模块的语言的 PHP Zend 路由

> ID：15375857
> 
> 赞同：0
> 
> 时间：2013-03-13T02:14:49.640
> 
> 标签：php, zend-framework, zend-locale

我的引导程序中有以下代码。但是，它运行良好，除了默认的任何模块，它都会重定向到默认模块。我怎样才能让它与默认模块以外的模块一起工作？

```
protected function _initRoutes()
{
    $this->bootstrap(array('FrontController'));
    $router = $this->getResource('Frontcontroller')->getRouter();
    $router->removeDefaultRoutes();
    $language = new Zend_Controller_Router_Route(
         ':language', array('language' =>'en')
    );
    $module = new Zend_Controller_Router_Route_Module(
      array(
      'module'    => 'default',
      'controller'=> 'index',
              'action'    => 'index'
       ),
       Zend_Controller_Front::getInstance()->getDispatcher(),
       Zend_Controller_Front::getInstance()->getRequest()
    );
    $module->isAbstract(true);
    $default = new Zend_Controller_Router_Route_Chain();
    $default->chain($language);
    $default->chain($module);
    $router->addRoute('default', $default);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:39:34.967

[这是一个示例](http://devzone.zend.com/1765/chaining-language-with-default-route/)，如何将语言路由与使用不同模块的默认路由链接起来。

您不应在 $module 路由中将模块指定为“默认”

```
$module = new Zend_Controller_Router_Route_Module(
   array(),
   Zend_Controller_Front::getInstance()->getDispatcher(),
   Zend_Controller_Front::getInstance()->getRequest()
); 
```

# compass-sass - 将指南针与 yeoman 一起使用

> ID：15375858
> 
> 赞同：0
> 
> 时间：2013-03-13T02:15:02.903
> 
> 标签：compass-sass, yeoman

我已经安装了yeoman，运行后`yeoman server`

我收到以下错误

```
Running "compass:dist" (compass) task
<FATAL> You need to have Compass installed. </FATAL> 
```

如何安装指南针并让它与 yeoman 一起工作？我正在使用mac（山狮）并且尝试`yeoman install compass`过没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:20:11.053

Compass 网站上有关于[如何安装 Compass的说明。](http://compass-style.org/install/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T22:54:05.863

这很容易，就像 Compass Page 说的那样去做，之后，你就可以毫无问题地与自耕农一起工作了。

1.  宝石更新--系统

2.  宝石安装指南针

# ios - 在 xcode 中查找具有图像名称的图像

> ID：15375859
> 
> 赞同：1
> 
> 时间：2013-03-13T02:15:10.223
> 
> 标签：ios, xcode, uiimage, command

我正在开发一个 iOS 项目。找到后如何`"somepicure.png"`快速 导航`[UIImage imageNamed:@"somepicture.png"]`？

我已经尝试右键单击并使用控制/选项/命令单击，但它们都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:23:34.037

当光标单击“somepicure.png”时，执行 shift+command+O。这是快速打开的，它将使用您单击的单词填充搜索字段并显示您的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:05:43.603

你可以试试 KSImageNamed 插件。我使用它并且效果很好。它会自动完成项目中的所有图像名称。

[http://github.com/ksuther/KSImageNamed-Xcode](http://github.com/ksuther/KSImageNamed-Xcode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:18:19.343

你的意思是当你看到一段代码引用你的应用程序包中的一个文件时，你希望能够像使用“跳转到定义”这样的功能时那样从一段代码转到文件？据我所知，这是不可能的。

# notifications - 工作灯推送通知的示例不起作用

> ID：15375861
> 
> 赞同：0
> 
> 时间：2013-03-13T02:15:22.403
> 
> 标签：notifications, push, ibm-mobilefirst

我只是下载了工作灯推送通知的示例并将其导入到我的 Eclipse 中，但是它不起作用。logcat 显示`Push Service: The sender account is not recognized.Notifying javascript on unsuccessful registration`. 我的worklight是5.0，我手机的android版本是2.3.7。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:25:10.877

在 Android 2.x 中，您必须将您的设备与 Gmail 帐户同步，以便推送通知正常运行，确保您的设备设置正确。

如果这不是手头的问题，请确保您已将 GCM 详细信息正确输入到 application-descriptor.xml：

**指示：**

*   转到 GCM 的网页：http:  [//developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)
*   单击“Google API 控制台页面”
*   如果您从未完成上述第 2 步，您将被要求创建一个项目，该项目将有一个 ID。ID 是您在 application-descriptor.xml 中放置的“senderId”值
*   单击“创建新的服务器密钥...”/“创建新的 Android 密钥”-生成的密钥是您放置在 application-descriptor.xml 中的“API 密钥”值

# ruby - 使用 webmock/rspec 存根多部分请求

> ID：15375863
> 
> 赞同：6
> 
> 时间：2013-03-13T02:15:29.573
> 
> 标签：ruby, rspec, sinatra, rest-client, webmock

我一直在尝试使用 webmock 存根多部分请求，但没有找到令人满意的解决方案。

理想情况下，我想将请求存根如下：

```
stub_request(:post, 'http://test.api.com').with(:body => { :file1 => File.new('filepath1'), file2 => File.new('filepath2') }) 
```

但是，这似乎不起作用，并且 RSpec 抱怨该请求没有被存根。打印非存根请求：

```
stub_request(:post, "http://test.api.com").
     with(:body => "--785340\r\nContent-Disposition: form-data; name=\"file1\"; filename=\"filepath1\"\r\nContent-Type: text/plain\r\n\r\nhello\r\n--785340\r\nContent-Disposition: form-data; name=\"file2\"; filename=\"filepath2\"\r\nContent-Type: text/plain\r\n\r\nhello2\r\n--785340\r\n",
          :headers => {'Accept'=>'*/*; q=0.5, application/xml', 'Accept-Encoding'=>'gzip, deflate', 'Content-Length'=>'664', 'Content-Type'=>'multipart/form-data; boundary=785340', 'User-Agent'=>'Ruby'}).
     to_return(:status => 200, :body => "", :headers => {}) 
```

当然，我不能真正遵循这个建议，因为边界是动态生成的。知道如何正确地存根这些请求吗？

谢谢！布鲁诺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-08T00:16:51.057

有点晚了，但我会为未来的溢出者和谷歌人留下一个答案。

我遇到了同样的问题，并将[Rack::Multipart::Parser](https://github.com/rack/rack/blob/master/lib/rack/multipart/parser.rb)与 Webmock 结合使用作为解决方法。快速而肮脏的代码应该看起来像这样（警告：使用 activesupport 扩展）：

```
stub_request(:post, 'sample.com').with do |req|
  env = req.headers.transform_keys { |key| key.underscore.upcase }
                   .merge('rack.input' => StringIO.new(req.body))
  parsed_request = Rack::Multipart::Parser.new(env).parse

  # Expectations:
  assert_equal parsed_request["file1"][:tempfile].read, "hello world"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-12T18:21:17.210

WebMock 目前不支持多部分请求。在此处查看作者的评论以获取更多信息：[https ://github.com/vcr/vcr/issues/295#issuecomment-20181472](https://github.com/vcr/vcr/issues/295#issuecomment-20181472)

我建议您考虑以下路线之一：

*   不匹配后多部分正文的存根
*   将请求包装在带有文件路径参数的方法中，并为此方法设置更细粒度的期望
*   在集成测试中使用 VCR 模拟外部请求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-23T10:06:27.123

这是使用带有正则表达式的 WebMock 来匹配多部分/表单数据请求的解决方法，特别适用于测试图像的上传：

```
stub_request(:post, 'sample.com').with do |req|

  # Test the headers.
  assert_equal req.headers['Accept'], 'application/json'
  assert_equal req.headers['Accept-Encoding'], 'gzip, deflate'
  assert_equal req.headers['Content-Length'], 796588
  assert_match %r{\Amultipart/form-data}, req.headers['Content-Type']
  assert_equal req.headers['User-Agent'], 'Ruby'

  # Test the body. This will exclude the image blob data which follow these lines in the body
  req.body.lines[1].match('Content-Disposition: form-data; name="FormParameterNameForImage"; filename="image_filename.jpeg"').size >= 1
  req.body.lines[2].match('Content-Type: img/jpeg').size >= 1

end 
```

也可以使用正常的 WebMock 使用方式来仅测试标头，并且在子句`stub_request(:post, 'sample.com').with(headers: {'Accept' => 'application/json})`中根本不包含任何正文规范。`with`

# internet-explorer - 如何在 Windows Phone 上调试网站？[不是远程调试]

> ID：15375864
> 
> 赞同：13
> 
> 时间：2013-03-12T11:58:31.123
> 
> 标签：internet-explorer, debugging, windows-phone

我是一名网络开发人员，想在 Windows Phone 设备上调试网络应用程序/网站。有某种窗口可以看到javascript控制台会很整洁。

我知道如何在 Android（关于：调试）和 iOS（开发者控制台）上获取控制台窗口，但我还没有弄清楚如何在 Windows Phone 上。有可能吗，如果有，怎么做？

编辑：
我正在寻找的***不是远程***调试。我正在寻找**实际设备上的调试控制台**。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T16:38:56.583

Windows Phone 7.5+ (IE9) 和 8 (IE10) 没有调试控制台，但可以通过[Remy Sharp的](http://remysharp.com/)[JSConsole](https://github.com/remy/jsconsole)将其添加到您的 Web 应用程序中。

设置远程调试会话非常简单。访问[jsconsole.com](http://jsconsole.com/)，获取唯一的会话 ID，将会话 ID 和 JS 片段添加到您的 Web 应用程序中，一切顺利。[可以在网站上找到](http://jsconsole.com/remote-debugging.html)更详细的设置说明和视频。

尽管 JSConsole 说明没有明确提及 Windows Phone 支持，[但许多网站](https://groups.google.com/forum/#!msg/netpontonews/CtPS2ghk-Jk/2LQHw1Mm9BcJ) [已经确认它可以工作](http://www.codeproject.com/Articles/347777/How-to-create-HTML5-apps-on-Windows-Phone-with-Pho#pre4)。

[之前的 Stackoverflow 问题](https://stackoverflow.com/questions/5198808/how-do-i-debug-internet-explorer-on-windows-phone-7)中提到了其他可能有用的工具。

**更新：** [Internet Explorer 11 (IE11) 引入了一个新的仿真工具](http://msdn.microsoft.com/en-us/library/ie/dn255001%28v=vs.85%29.aspx)，它允许本地（假设您运行的是 Windows 8.1）测试和调试 Windows Phone 网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T02:19:28.557

我不这么认为。但是您可以使用 IE10 并更改用户代理字符串以模拟您是 Windows Phone 中的 IE10。

**编辑**

我认为桌面支持移动设备中的所有 JavaScript 功能。但是，如果这不是解决方案，恐怕您唯一的朋友就是： [Compact Inspector](http://blogs.msdn.com/b/ie/archive/2011/04/27/ie9-compat-inspector.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T19:40:55.497

我的建议是针对桌面 IE10 测试网站，并提供所有 JavaScript/DOM 调试支持 - 它与 Windows Phone 8 中的 IE10 有 99% 相似。要在手机上进行额外测试，您可以安装[Windows Phone 8 SDK](http://dev.windowsphone.com/en-us)并在模拟器。
编辑：好文章[如何](http://sviluppomobile.blogspot.cz/2013/03/how-to-debug-windows-phone-html5-apps.html)使用 Node.js调试 Windows Phone HTML5 应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-18T08:02:20.033

您可以使用`[Weinre][1]`/ `VS2012`phone`VS2013`模拟器或实际设备。您在这里拥有所有详细信息，设置基于 nodeJS 的解决方案非常简单。

[http://sviluppomobile.blogspot.cz/2013/03/how-to-debug-windows-phone-html5-apps.html](http://sviluppomobile.blogspot.cz/2013/03/how-to-debug-windows-phone-html5-apps.html)

# java - 使用 ScheduledThreadPoolExecutor 时中断和重启任务

> ID：15375866
> 
> 赞同：0
> 
> 时间：2013-03-13T02:15:39.277
> 
> 标签：java, scheduled-tasks, scheduler, interrupt, futuretask

我在理解 ScheduledThreadPoolExecutor 的工作原理时遇到了一点问题（我正在使用 SCA，所以不要打扰代码中的注释）。这是我的调度程序类代码的一部分：

```
@AllowsPassByReference
public ScheduledFuture<?> schedule(Task task)
{
    future=scheduler.scheduleAtFixedRate(task.getRunnableContent(), task.getDelay(), task.getPeriod(), TimeUnit.MILLISECONDS);
    return future;
}

@AllowsPassByReference
public void deschedule(Task task)
{
    scheduler.remove(task.getRunnableContent());
} 
```

这是我的任务类代码的一部分：

```
public void scheduleTask()
{
    if(!running)
    {
        future=scheduler.schedule(this);
        running=true;
    }
}

public void descheduleTask()
{
    if(running)
    {
        future.cancel(mayInterruptIfRunning);
        scheduler.deschedule(this);
        running=false;
    }
} 
```

现在这是大问题！我到处看到人们在 ScheduledFutures 上使用取消，然后在调度程序上使用关闭方法，但我不想停止调度程序。让我稍微解释一下：在这个应用程序中，周期性任务必须在任何时候单独调度、停止和重新调度，所以我需要一种方法来在单个任务开始运行时中断它，而无需关闭整个调度程序服务。我希望你能理解我在做什么，有什么建议吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:47:41.430

当我们取消一个周期性任务时，这个任务后续的调度会被取消，但是调度器本身会运行，可以用来调度另一个任务。

如果我们在任务运行时调用 Future.cancel 那么

a) Future.cancel(false) 不会影响正在运行的任务

b) Future.cancel(true) 会在任务的线程上调用 Threed.interrupt，但是正在运行的任务是否会停止取决于任务的实现。例如，任务可能会捕获 InterruptedException（如果有）并继续工作。

# raphael - 如何在 Meteor 中跨多种方法访问 Raphael 论文

> ID：15375868
> 
> 赞同：2
> 
> 时间：2013-03-13T02:15:49.757
> 
> 标签：raphael, meteor

我将 Raphael 与 Meteor 一起使用，但遇到了问题。我正在`paper`使用创建一个`var paper = Raphael("paper", 800, 600);` 如果我把这段代码放在一个渲染函数中，比如 Template.board.rendered，我可以很好地使用它。但是，这个模板中的纸质变量显然不能被其他函数访问，即使我从模板中调用它们也是如此。我认为我可以通过在 中创建论文来解决这个`Meteor.startup`问题，但我仍然遇到同样的问题。

例如，以下代码不起作用：

```
Pieces = new Meteor.Collection('pieces');

Meteor.startup(function () {
  var paper = Raphael("paper", 800, 600);
});

Template.board.rendered = function () {
  // If I create the paper in here along with the contents of createGoban
  // it works, but then I can't use it anywhere else...
  // var paper = Raphael("paper", 800, 600);

  createGoban();
};

var createGoban = function () {
  // Create goban
  // Based off of svg in public domain: http://commons.wikimedia.org/wiki/File:Blank_Go_board.svg
  // Converted using http://readysetraphael.com/
  var rect_a = paper.rect(0, 0, 96, 96);
  rect_a.attr({fill: '#DCB35C','stroke-width': '0','stroke-opacity': '1'}).data('id', 'rect_a');
  var path_b = paper.path("M2.9,93h90.2m-.2-5H3m0-5h90m0-5H3m0-5h90m0-5H3m0-5h90m0-5H3m0-5h90m0-5H3m0-5h90m0-5H3m0-5h90m0-5H3m0-5h90m0-5H3m0-5h90m0-5H3m-.1-5h90.2M3,3V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3m5,0V93m5,0V3");
  path_b.attr({stroke: '#000',"stroke-width": '0.2',fill: 'none','stroke-opacity': '1'}).data('id', 'path_b');
  var path_c = paper.path("M18,78l0,0m30,0l0,0m30,0l0,0m0-30l0,0m-30,0l0,0m-30,0l0,0m0-30l0,0m30,0l0,0m30,0l0,0");
  path_c.attr({stroke: '#000',"stroke-width": '4',"stroke-linecap": 'round','stroke-opacity': '1','fill': '#000000'}).data('id', 'path_c');
  var goban = [rect_a, path_b, path_c];

  // Scale goban up since rsr outputs reduced size
  for(var i = 0; i < goban.length; i++) {
    goban[i].transform('S5,5,0,0');
  };
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:42:57.217

删除`var`inside后，您的代码可以正常工作`startup()`，这使得`paper`全局：

```
Meteor.startup(function () {
  paper = Raphael("paper", 800, 600);
}); 
```

# php - 如何使用 PHP 从 CDB (SQLite 3) 数据库中读取数据？

> ID：15375870
> 
> 赞同：2
> 
> 时间：2013-03-13T02:16:04.510
> 
> 标签：php, sqlite, cdb

我想从似乎是 SQLite 3 数据库文件的 .CDB 文件中读取数据。我想读取数据并使用 PHP 处理它。你能建议我解决这个问题吗？

我尝试了 ADOdb for PHP，其中 SQLite 驱动程序不支持 CDB 格式。

提前致谢。

# php - 转义 PHP PDO 中的预设列名

> ID：15375871
> 
> 赞同：3
> 
> 时间：2013-03-13T02:16:11.183
> 
> 标签：php, mysql, sql, pdo

我在下面有 mySql 语句。

```
$sql = "INSERT INTO `myTbl`.uploads('id','name','group') VALUES (:id,:user,:group)";
$result = $db->prepare($sql); 
```

GROUP 是 mySql 中的保留命令。我怎样才能逃避这个，以便我可以执行我的准备语句？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:17:18.983

**columnNames 和 tableNames 等标识符**不应使用单引号，而应使用反引号。用单引号括起来会将标识符转换为字符串文字。

```
INSERT INTO myTbl.uploads(id, name, `group`) VALUES (:id,:user,:group) 
```

*   [何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

# php - 解析错误：语法错误，意外的“-”（T_STRING）

> ID：15375873
> 
> 赞同：0
> 
> 时间：2013-03-13T02:16:30.967
> 
> 标签：php, function

## 这个问题把我弄糊涂了。

```
Parse error: syntax error, unexpected 'â€“' (T_STRING) in C:\xampp\htdocs\*****\*****\functions.php on line 187 
```

下面代码框中的第 9 行的第 187 行。**在** `$zjd = (int)((1461...`

## 这是什么 ？

这个函数打印出回历，它依赖于月亮，它不同于它依赖于太阳的公历。`Date();`函数打印公历日期，没有任何回历日期的功能（也称为伊斯兰日历）。这两者之间是有区别的。例如，公历中的年份是 365.25，但回历日历中的年份是 354.367。还有几个月……等等。

## 发生了什么？

我做了一个函数将格里高利转换为回历，但它不是那么准确，所以我在网上搜索了一个。我找到了很多准确的，但都是用 JavaScript 编写的。并且刚刚发现这只是用 PHP 编写的精美作品。

我试图就这个问题联系作者，但他没有回应。于 2011 年发表此文。

## 部分功能

```
function hijriCal(){
$theDate     = getdate();
$wday        = $theDate['wday'];
$hr          = $theDate['mday'];
$theMonth    = $theDate['mon'];
$theYear     = $theDate['year'];

if (($theYear > 1582) || (($theYear == 1582) && ($theMonth > 10)) || (($theYear == 1582) && ($theMonth == 10) && ($hr > 14))) {
$zjd = (int)((1461 * ($theYear + 4800 + (int)(($theMonth – 14) / 12))) / 4) + (int)((367 * ($theMonth – 2 – 12 * ((int)(($theMonth – 14) / 12)))) / 12) – (int)((3 * (int)((($theYear + 4900 + (int)(($theMonth – 14) / 12)) / 100))) / 4) + $hr – 32075;
} else {
$zjd = 367 * $theYear – (int)((7 * ($theYear + 5001 + (int)(($theMonth – 9) / 7))) / 4) + (int)((275 * $theMonth) / 9) + $hr + 1729777;
} 
```

## 提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:47:11.447

# javascript - ExtJS 按钮不执行处理程序

> ID：15375876
> 
> 赞同：0
> 
> 时间：2013-03-13T02:16:38.153
> 
> 标签：javascript, extjs

我正在创建下面的表单，但由于某种原因，选择按钮处理程序没有被执行。其他一切工作正常（将数据加载到网格中）。有什么我想念的吗？

```
Ext.Loader.setConfig({enabled:true});

Ext.define('Project', {
    extend: 'Ext.data.Model',
    fields: ['PID', 'ProjectName']
});

var projectsStore = Ext.create('Ext.data.Store', 
{
    model: 'Project',
    autoLoad: true,
    proxy:{
        type: 'ajax',
        url : 'projects.php?action=read',
        reader:{ type:'json', root:'projects', successProperty:'success' } }
});

Ext.onReady(
    function()
    {   
        var simple = Ext.create('Ext.form.Panel', {
        url:'projects.php?action=select',
        frame:true,
        title: 'Projects',
        bodyStyle:'padding:5px 5px 0',
        width: 350,
        fieldDefaults: {
            msgTarget: 'side',
            labelWidth: 75
        },
        defaultType: 'textfield',
        defaults: {
            anchor: '100%'
        },

        items: [{
            columnWidth: 0.60,
        xtype: 'gridpanel',
       store: projectsStore,
        height: 400,
        title:'General',
        columns: [
         {header: 'Id', dataIndex: 'PID', flex: 1},
         {header: 'Project Name',  dataIndex: 'ProjectName',  flex: 1},
       ]
        }],

        buttons: [{
            text: 'Select',
            handler: function() {
                Ext.Msg.alert('Selecting', action.result.msg);              
            }
        }]
    });

    simple.render('proj-form');

        projectsStore.load();   
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:34:12.143

您的代码在运行处理程序时崩溃，因为`action.result.msg`不存在。

您可以查看 Firebug/Chrome 开发工具，它会向您显示问题。

# javascript - 敌人精灵向玩家走来一条奇怪的路径

> ID：15375878
> 
> 赞同：1
> 
> 时间：2013-03-13T02:17:07.560
> 
> 标签：javascript, math, canvas, 2d-games

我试图让我的画布游戏中的精灵不断向玩家移动，直到它发生碰撞。执行此操作的相关函数是`update()`函数：

```
Enemy.prototype.update = function(playerX, playerY) {
    // Rotate the enemy to face the player
    this.rotation = Math.atan2(this.y - playerY, this.x - playerX) - 2.35;

    // Move in the direction we're facing
    this.x += Math.sin(this.rotation) * this.speed;
    this.y += Math.cos(this.rotation) * this.speed;
} 
```

`this.x`, `this.y`,`this.rotation`和`this.speed`分别是敌人的 X 位置、Y 位置、旋转和速度。

它有点工作，但是敌人距离玩家大约 300 像素，然后开始转向左侧并远离玩家，与它朝向玩家的方向成 90 度角。

由于这有点难以解释，我录制了一个快速视频来帮助说明问题：[http ://www.screenr.com/AGz7](http://www.screenr.com/AGz7)

敌人是橙色精灵，玩家是白色精灵。

我正在做的让敌人向玩家移动的计算有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:21:07.863

从之前编写角度/运动代码，这些可能是错误：

代替 `this.rotation = Math.atan2(this.y - playerY, this.x - playerX) - 2.35;`

做

`this.rotation = Math.atan2(playerY - this.y, playerX - this.x);`

给你正确的旋转？

推理：不要使用魔法常数，试着找出你的公式错误的原因。

代替

```
this.x += Math.sin(this.rotation) * this.speed;
this.y += Math.cos(this.rotation) * this.speed; 
```

尝试

```
this.x += Math.cos(this.rotation) * this.speed;
this.y += Math.sin(this.rotation) * this.speed; 
```

推理：如果您的角度是 0 = 基于东方（并且如果您使用数学库函数，它们默认是），那么对于角度 0，您需要最大水平移动并且没有垂直移动 - cos(0) = 1 和 sin(0) = 0。

# javascript - 在javascript中完成一个递归函数

> ID：15375883
> 
> 赞同：2
> 
> 时间：2013-03-13T02:17:41.447
> 
> 标签：javascript, function, loops, recursion

我有这样的事情：

```
function recurse(a){
  for(i = a; i < 3; i++){
    alert(i);
    if(i == 0){
      recurse(++a);
    }
  }
} 
recurse(0); 
```

我期望的输出是 0（调用新函数）1、2（结束调用的第二个函数），然后用 1 和 2 完成函数的第一次运行。但它只警告 0,1 和 2 一次它完成了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:25:28.453

`i`是全球性的

尝试`var i`，您可能会得到您期望的行为。

```
function recurse(a){
  for(var i = a; i < 3; i++){
    alert(i);
    if(i == 0){
      recurse(++a);
    }
  }
} 
recurse(0); 
```

输出：`0, 1, 2, 1, 2`

第一个`1, 2`是来自更深层次的递归。

正如最初所写的那样，你会`0`从顶层，`1,2`从更深的层面得到，然后在顶层什么都没有（因为`i < 3`不再满足）。

# javascript - 用逗号将字符串拆分为新行

> ID：15375886
> 
> 赞同：7
> 
> 时间：2013-03-13T02:18:15.533
> 
> 标签：javascript, split

我有一个字符串

```
This is great day, tomorrow is a better day, the day after is a better day, the day after the day after that is the greatest day 
```

我想基本上用逗号分割这个长字符串并插入一个新行，这样它就变成了

```
This is great day
tomorrow is a better day
the day after is a better day
the day after the day after that is the greatest day 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-13T02:20:03.513

使用内置的[split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)和[join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)方法

```
var formattedString = yourString.split(",").join("\n") 
```

如果您希望换行符是 HTML 换行符，那将是

```
var formattedString = yourString.split(",").join("<br />") 
```

这对我来说最有意义，因为您将它分成几行，然后将它们与换行符连接起来。

虽然我认为在大多数情况下速度不如可读性重要，但在这种情况下我很好奇，所以我写了一个快速的[基准测试](http://jsperf.com/split-vs-replace-so)。

似乎（在 chrome 中） using`str.split(",").join("\n")`比`str.replace(/,/g, '\n');`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T02:21:26.170

你也可以替换它们：

```
string.replace(/,/g, '\n'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-12T20:27:02.077

```
<p id="errorMessage">Click | the |button |to |display| the| array| values| 
after| the| split.</p>

$(document).ready(function () {
var str = $("#errorMessage").text();
document.getElementById("errorMessage").innerHTML=str.split("|").join(" 
</br>"); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T02:21:54.573

```
> a = 'This is great day, tomorrow is a better day, the day after is a better day, the day after the day after that is the greatest day'
> b = a.split(', ').join('\n')

"This is great day
tomorrow is a better day
the day after is a better day
the day after the day after that is the greatest day" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T02:22:20.377

您可以使用`.split()`创建字符串的所有部分的数组...

```
var str = 'This is great day, tomorrow is a better day, the day after is a better day, the day after the day after that is the greatest day';

str.split(',');
  -> ["This is great day", " tomorrow is a better day", " the day after is a better day", " the day after the day after that is the greatest day"] 
```

现在，你可以对不同的部分做任何你想做的事情。既然你想加入一条新线路，你可以用`.join()`它把它重新组合在一起......

```
str.split(',').join('\n');
  -> "This is great day
      tomorrow is a better day
      the day after is a better day
      the day after the day after that is the greatest day" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T02:23:51.367

未经我的浏览器测试尝试：

```
var MyStr="This is great day, tomorrow is a better day, the day after is a better day, the day after the day after that is the greatest day";
Var splitedStr = MyStr.split(",");

var returnStr = '';
for (var i = 0; i < splitedStr.length; i++)
{
    returnStr += splitedStr[i] + '<br />';
}

document.write(returnStr); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-04T07:12:29.443

```
TermsAndConditions = "Right to make changes to the agreement.,Copyright and intellectual property.,Governing law.,Warrantaay disclaimer.,Limitation of liability." 
```

```
const TAndCList = this.invoiceTermsAndConditions.split(",").join("\n \n• "); 
```

***输出 ：***

```
• Right to make changes to the agreement.
• Copyright and intellectual property.
• Governing law.
• Warrantaay disclaimer.
• Limitation of liability. 
```

# android - 在 Android 设置中禁用自定义键盘设置

> ID：15375893
> 
> 赞同：2
> 
> 时间：2013-03-13T02:19:43.717
> 
> 标签：android, android-softkeyboard

我正在为 android 安装自定义键盘。因此，当我们进入 Launcher->Settings 并选择“Language and Keyboard”时，会显示 2 个键盘。我可以在两个键盘之间进行选择。但是，我想禁用此设置并确保用户无法选择此设置。我该怎么做呢？

# java - 在线程 1 中调用的构造函数，在线程 2 中以独占方式访问的字段 - 需要 volatile 吗？

> ID：15375895
> 
> 赞同：0
> 
> 时间：2013-03-13T02:19:50.067
> 
> 标签：java, concurrency, constructor, volatile

我有一个由主线程实例化的类。然后这个类产生第二个线程，处理线程。处理线程调用类的某些方法（处理方法），这些方法访问/更改字段。除了处理线程之外，其他任何东西都不会访问这些方法和字段。但是，初始化它们的构造函数在主线程上运行。

该类扩展了一个通用的“协议”类，其中包含输入处理线程，该线程调用用于处理接收到的消息的函数。最初，我是在泛型类的构造函数中自动启动处理线程，结果证明这是一个非常愚蠢的想法：

1.  子类称为超级构造函数
2.  超级构造函数启动线程
3.  线程立即用空消息调用消息处理方法（使其发送协议中的第一条消息）。该方法设置一个“发送消息计数器”。
4.  在主线程上，超级构造函数返回，子类初始化设置的消息计数器，将其重置为零。

我现在通过将处理线程的开始移动到另一个方法并在子类的构造函数的末尾调用它来更改它：

```
public ProtocolSubclass() {
    super();
    startProcessingThread();
} 
```

我假设当我调用 startProcessingThreads() 时，该字段保证被初始化。调用 startProcessingThread() 后，该字段将只能从该线程访问。**我可以这样做吗？我是否需要将字段标记为 volatile，因为它在主线程上初始化但在处理线程上读取？**

我想这次我做对了，但是经过数小时调试上述问题后，我宁愿问...

根据要求，这里有一些更详细（仍然简化）的代码。请注意，上面的代码更加简化，因此可能与下面的代码不完全匹配。起作用的字段是 currentMsg：

```
public abstract class ProtocolConnection {
    public ProtocolConnection(/*stuff*/) {
        /*stuff*/
        // DO NOT DO THIS HERE: startProcessingThreads();
    }

    protected void startProcessingThreads() {
        inputProcessingThread.start();
    }

    private final Thread inputProcessingThread = new Thread() {
        public void run() {
            if (isInitiator) initiateConnection();
            while (!closed && !finished) {
                ProtocolMessage msg = new ProtocolMessage(inputStream);
                log("received", Integer.toString(msg.tag), Integer.toString(msg.length));
                ProtocolConnection.this.processMessage(msg);
            }
        }
    };
}

public class SimpleProtocolConnection extends ProtocolConnection {
    private int currentMsg = 0;

    public SimpleProtocolConnection(/*stuff*/) {
        super(/*stuff*/);
        startProcessingThreads();
    }

    @Override
    protected void processMessage(ProtocolMessage msg) {
        if (msg.tag != LAST_MESSAGE) {
            sendNext();
        }
    }

    @Override
    protected void initiateConnection() {
        sendNext();
    }

    private void sendNext() {
        addToSendingQueue(new ProtocolMessage(currentMsg, getData())); // very simplified
        currentMsg++;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:15:05.147

该字段在线程 1 中初始化；然后启动线程 2；然后线程 2 以独占方式访问该字段。正确的？如果是这样，那么...

**不需要易失性/原子性。**

基于[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html)，在线程 B 启动之前在某个线程 A 中执行的操作对线程 B 是可见的。这可以通过几种不同的方式进行说明：

> 17.4.2\. 行动
> 
> 线程间动作是由一个线程执行的可以被另一个线程检测或直接影响的动作。程序可以执行多种线程间操作：
> 
> [...]
> 
> 启动线程或检测线程已终止的操作（第 17.4.4 节）。

--

> 17.4.4\. 同步顺序
> 
> 每个执行都有一个同步顺序。同步顺序是执行的所有同步操作的总顺序。对于每个线程 t，t 中的同步动作（第 17.4.2 节）的同步顺序与 t 的程序顺序（第 17.4.3 节）一致。
> 
> 同步动作导致动作上的同步关系，定义如下：
> 
> [...]
> 
> 启动线程的动作与它启动的线程中的第一个动作同步。

--

> 17.4.5。订单前发生
> 
> 两个动作可以通过happens-before关系排序。如果一个动作发生在另一个动作之前，那么第一个动作对第二个动作可见并在第二个动作之前排序。
> 
> [...]
> 
> 线程上的 start() 调用发生在已启动线程中的任何操作之前。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T02:27:52.333

`volatile`意味着一个特定的字段将被不同的线程修改。如果构造函数被标记`synchronized`，则不需要，否则需要。

# c++ - 在 C++ 中按字符读取输入文件时的换行符

> ID：15375899
> 
> 赞同：3
> 
> 时间：2013-03-13T02:20:06.143
> 
> 标签：c++, file-io, char, line-breaks

好的，先说明一下，这是家庭作业，但还要一周才能完成，而且我不完全确定作业的最终细节。长话短说，不知道他会在课堂上介绍什么概念，我决定试一试作业，但我遇到了一个问题。我需要做的部分作业是从输入文件中读取单个字符，然后，给定字符在其包含的单词中的位置，在屏幕上重复该字符。我遇到的问题是，文本文件中的单词是单个单词，每个单词都位于文件的不同行。由于我不确定我们是否会`<string>`用于此作业，所以我想知道是否有任何方法可以在不使用`<string>`.

现在，我正在使用一个简单`ifstream fin;`的方法来提取字符。我只是不知道如何让它识别一个单词的结尾和另一个单词的开头。为了包含代码，以下是我到目前为止所获得的全部内容。我希望它会显示某种`endl`字符，但它只是将所有单词一起打印出来。

```
ifstream fin;
char charIn;

fin.open("Animals.dat");
fin >> charIn;
while(!fin.eof()){
    cout << charIn;
    fin >> charIn;
} 
```

我最初忘记包括的几件事：

我必须在输入每个字符时对其进行处理（在读取下一个字符并增加计数器之前，我的打印循环需要运行）。此外，“Animals.dat”中单词的长度各不相同，这使我无法仅设置多次迭代。我们也没有涵盖 fin.get() 或 .getline() 所以这些也是禁止的。

老实说，我无法想象这是不可能的，但考虑到这些限制，如果是这样，我并不会太沮丧。我主要认为坐一会儿是一个有趣的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:29:15.293

为什么不使用字符数组？您可以尝试如下：

```
 #define MAX_WORD_NUM 20
    #define MAX_STR_LEN 40 //I think 40 is big enough to hold one word.
    char words[MAX_WROD_NUM][MAX_STR_LEN]; 
```

然后你可以输入一个单词到单词中。

```
 cin >> words[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:47:28.313

运算符会忽略空格，因此`>>`您永远不会得到换行符。即使`<string>`不允许该类，您也可以使用 c-strings（字符数组）：

```
ifstream fin;
char animal[64];

fin.open("Animals.dat");

while(fin >> animal) {
  cout << animal << endl;
} 
```

从 c-string 读取字符时（`animal`如上所示），最后一个字符始终为 0，有时表示为 '\0' 或`NULL`. 这是您在遍历单词中的字符时检查的内容。例如：

```
c = animal[0];
for(int i = 1; c != 0 && i < 64; i++)
{
    // do something with c
    c = animal[i];
} 
```

# php - 单个 SQL 语句中的多个表 INSERT 查询

> ID：15375902
> 
> 赞同：0
> 
> 时间：2013-03-13T02:20:41.473
> 
> 标签：php, mysql, sql

我正在尝试使用以下代码将查询插入到多个表中。我已经尝试不使用 TRANSACTION 并且它不会工作，他们单独工作。任何帮助将非常感激。
提前致谢。

```
$query = mysql_query("BEGIN;  
INSERT INTO `uc` (`ANO`, `CNO`, `P`) VALUES ('$ano', '$cno', '$p');  
INSERT INTO `ct` (`ANO`, `CNO`, `RNO`) VALUES ('$ano','$cno','$rno');  
COMMIT;");   

$query_run = mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:25:15.150

```
$query = "BEGIN";
mysql_query($query) or die (mysql_error());

$query = "INSERT INTO `uc` (`ANO`, `CNO`, `P`) VALUES ('$ano', '$cno', '$p')";
mysql_query($query) or die (mysql_error());

$query = "INSERT INTO `ct` (`ANO`, `CNO`, `RNO`) VALUES ('$ano','$cno','$rno')";
mysql_query($query) or die (mysql_error());

$query = "COMMIT";
mysql_query($query) or die (mysql_error()); 
```

# c# - 在多个灯开关屏幕中重用通用命令

> ID：15375905
> 
> 赞同：3
> 
> 时间：2013-03-13T02:20:49.753
> 
> 标签：c#, visual-studio-lightswitch, lightswitch-2012

我正在设计一个 LightSwitch 2012 应用程序来管理请求，并且我希望能够在我的所有屏幕上使用相同的可重用代码更新请求状态。例如，用户可以通过按钮调用批准屏幕、履行屏幕等更改请求状态。目前，我在每个需要更新请求的 .cs 文件中都有一个方法，使用这些`partial void <ScreenCommand>_Execute()`方法。我正在尝试更改这一点，以便我可以从一个地方而不是任何地方更新代码，并且我也不想将方法复制到我添加按钮的新屏幕。现在通常我会把它放在 Application.cs 或其他具有全局访问权限的地方，但我无权访问同一个`DataWorkspace`对象。我还`this.DataWorkspace`从屏幕传入对象，它允许访问`SaveChanges()`方法。不过，这似乎有点臭。有没有更好的方法来处理这个问题，或者有更好的地方来放置您希望能够分配给多个屏幕上的按钮的可重用命令？目前我必须非常小心地保存脏数据，而且我仍然必须手动连接所有内容。如果代码在 Application.cs 文件中，我也不知道代码是否在正确的上下文中运行。澄清一下，是的，我确实希望它在客户端运行，这样我就可以从他们的 Outlook 收件箱等触发电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:27:06.313

您要做的只是良好的编程实践，将需要的代码放在多个地方，可以从每个地方调用它，但只在一个地方维护。这只是习惯于在 LightSwitch 中做事的方式的问题。

您可以在*客户端*项目的*UserCode*文件夹中的*模块*（或C# 中的*静态类）中添加代码。*这是文件夹存在的部分原因，作为放置“用户代码”的地方。为此，请切换到*File View*，然后右键单击*UserCode*文件夹以添加您的模块/类。在新创建的模块/类中添加您的方法。您可以根据需要创建任意数量的这些（如果您希望保持代码分离），或者您可以将其他方法添加到同一模块/类，这取决于您。

 ***但是，我不会将数据工作区作为参数传递给您创建的可重用方法。我什至不会传递实体对象，只传递计算所需状态所需的值。但是数据工作区的*SaveChanges*方法的实际调用应该保留在屏幕的代码中。将屏幕视为“*工作单元*”。

在每个按钮的*Execute*方法中（在您的各种屏幕中），您使用屏幕中正在操作的实体的值调用您的方法并返回结果。将计算出的返回值分配给实体的*State*属性（如果您有的话），然后调用屏幕的*Save*方法（或使用屏幕的*Close*方法，为*SaveChanges*参数传递 true）。无需调用数据工作区的*SaveChanges*方法，并且通过这种方式执行“LightSwitch 方式”。

这样做的另一个好处是，您的代码现在可以进行*单元测试*，因为它不再依赖于任何实体。

我希望这一切都对你有意义。***

# android - 自定义图像在 ActionBarSherlock 中占据最大宽度

> ID：15375906
> 
> 赞同：3
> 
> 时间：2013-03-13T02:21:05.503
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock，并且正在使用自定义布局，该布局显示图像而不是标题，以及左侧的图标。所以我的代码是

```
 ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_SHOW_HOME);
    View view = LayoutInflater.from(this).inflate(R.layout.layout_actionbar, null);
    ActionBar.LayoutParams params = new ActionBar.LayoutParams(Gravity.LEFT);
    actionBar.setCustomView(view, params);
    actionBar.setHomeButtonEnabled(true);
    actionBar.setDisplayShowCustomEnabled(true);
    actionBar.setDisplayShowTitleEnabled(false); 
```

到目前为止，显示的是图像而不是标题，但是由于右侧的菜单项设置为显示“ifRoom”，因此图像被缩小以适应 ActionBar 上的剩余空间。

![示例图像](../Images/481dfa39d0be46f775edd60d717d106a.png)

我的要求是首先放置我的图像并在 ActionBar 上占用所需的空间，然后如果有任何空间可以显示菜单项。我不想将所有菜单项都放在溢出菜单中，因为我希望它们在更大的屏幕上显示。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:55:46.787

我不认为这是可能的。

我一直在网上研究如何阻止我的动作栏标题被截断（即“My Longish Title”变成“My Longish Ti...”）。看起来即使您使用“ifRoom”，标题文本视图（或您的情况下的图像视图）也只允许使用一定的宽度。

可能的方法包括：

*   创建更窄的图像
*   将 ifRoom 修改为 never

# javascript - 通过 HTTPS 的 Ajax GET 请求

> ID：15375908
> 
> 赞同：12
> 
> 时间：2013-03-13T02:21:08.357
> 
> 标签：javascript, ajax, https

如何通过**HTTPS发送 ajax** **GET**请求？

 **`$.get`抛出这个：

```
XMLHttpRequest cannot load https://********. Origin null is not allowed by Access-Control-Allow-Origin. 
```

是否有另一种方法或一些解决方法可以让这个工作？

**如果我使用Chrome**导航到 url，我就能得到响应。我看不出它为什么不能通过 ajax 请求工作。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-13T02:25:46.647

如果由于[**Same Origin Policy**](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)`https`的原因，您当前在其中，则无法向页面发出 AJAX 请求。`http`[](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)

 ****主机**、**端口**和方案（协议）必须相同才能使 AJAX 请求工作**。**

您可以确保原始页面位于同一主机和方案上，或者在目标域上实施[**CORS**（跨域资源共享）](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)以允许此特定请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T12:50:28.830

[jQuery v. 3.3.1]

我有一个 Web 应用程序，其中所有资源和流量都通过 HTTPS。

然而，我发现由于（Chrome 输出），我无法发送`$.ajax()`或任何特定`$.get`的 ,等：`$.post`

拒绝连接到“ [http://mywebapp/api/mycall](http://mywebapp/api/mycall) ”，因为它违反了以下内容安全策略指令：“connect-src 'self'”。

这是由于 HTTPS 页面通过 HTTP 发出 AJAX 请求，我发现无法强制 HTTPS。

疯狂的是修复它。调用`$.get('/api/mycall/')`以“拒绝连接到' [http://mywebapp/api/mycall](http://mywebapp/api/mycall) '”输出上述错误，在代码中的实际调用中省略了结束正斜杠。因此，从错误看来，正斜杠似乎不存在。

我已经进行了多次调用，并且当被调用的 url 中有一个结尾斜杠时，每个调用都失败了。没有一个，同样的人都能成功。

所以调用`$.ajax({ url: '/api/mycall'})`有效，而 `$.ajax({ url: '/api/mycall/'})`无效。****

# google-closure-compiler - Mac OS 中的 Google Closure Compiler shell 脚本

> ID：15375912
> 
> 赞同：0
> 
> 时间：2013-03-13T02:21:45.543
> 
> 标签：google-closure-compiler

在我的电脑上，我使用这个 bat 脚本来编译我的 JavaScript 项目： [https ://github.com/ChristianDen/fx.js/blob/master/build/compile.bat](https://github.com/ChristianDen/fx.js/blob/master/build/compile.bat)

而且效果很好！

现在，我想使用终端在 Mac 上运行它。到目前为止，我已经用 .sh 扩展名重命名了脚本，并确保安装了 Java。

我没有很多Mac经验，但它不会运行。你有这方面的经验吗？

# css - 选中 4 个幻灯片中的第一个按钮仅在一个中显示

> ID：15375919
> 
> 赞同：0
> 
> 时间：2013-03-13T02:22:05.903
> 
> 标签：css

我有 4 个带有 4 个父名称的平行幻灯片。我每张有 5 张图片。我想要检查第一个按钮。我在每个幻灯片上都设置了，但只检查了第 4 个幻灯片中的 button-1。这让我疯狂。我被告知这是不可能的。

www.pdpdesign.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:19:27.243

您的所有电台名称属性似乎都是相同的。给每个集合一个唯一的名称。

# unix - 用于写入的 Unix 目录权限

> ID：15375920
> 
> 赞同：-3
> 
> 时间：2013-03-13T02:22:07.257
> 
> 标签：unix, permissions

假设我有一个文件夹“root”。我拥有这个文件夹，并且我为其他人（包括用户“user2”，权限是 rx）

在根目录中，我有另一个文件夹“bin”。我将“bin”的所有者更改为用户“user2”，并授予他 rwx 权限。

1.  user2 能否在“bin”文件夹中创建新文件？不写“root”会影响他这样做的能力吗？
2.  另外，user2可以从“root”中删除整个文件夹“bin”吗？（我不希望他能够这样做 - 他只需要在文件夹 bin 中创建/删除文件！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T02:25:47.067

1.  是的。因为`user2`拥有 access( `x`) 权限`root`并拥有`bin`，所以他可以在`root/bin`. 如果权限当前不包括所有者的写权限，所有者 ( `user2`) 可以更改目录权限，使权限包含写权限。

2.  不可以。因为`user2`在 中没有写入权限`root`，`user2`所以无法`bin`从中删除`root`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T02:24:17.893

他可以在 bin 内写字，但不能在 bin 外写字。除非您另外修改他的权限，否则他的 rwx 权限范围位于该文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:17:05.130

了解您所说的内容是这样的：

```
drwxr-xr-x  10 root     root          22 Dec 26 23:04 root 
```

其中“root”的内容是这样的：

```
cd root
ls -la
drwxr-xr-x  10 root     root          22 Dec 26 23:04 .
drwxr-xr-x  29 root     root          34 Oct 24 06:13 ..
drwx------   2 user2    root           3 Oct 23 10:28 bin 
```

“root”的权限必须至少为 555 (r-xr-xr-x)，因为如果您的“root”目录权限为 500 或 550（见下文），它将无法工作，因为不允许“user2”输入目录“root”（有例外，如果“user2”是“root”组的成员，则 550 会起作用）。

```
# This would not work, user2 cannot enter the "root" directory
drwx------  10 root     root          22 Dec 26 23:04 root 
```

要了解所有这些安全性内容，您首先必须意识到目录实际上是简单的文件。目录和文件的主要区别在于“x”权限的含义。如果用户没有“读取”权限，他就看不到目录中的文件。所以，让我们访问 711，如下所示：

```
drwx--x--x  10 root     root          22 Dec 26 23:04 root 
```

现在让我们尝试查看目录中有哪些文件。你不能：

```
$ ls -la root
root: Permission denied
total 3 
```

但是，你可以输入它（因为“x”执行正确）但你仍然看不到里面：

```
$ cd root
$ ls -la
.: Permission denied
total 3 
```

但是如果你知道里面有一个你可以访问的目录，你可以输入它：

```
$ cd bin  # Ps. Here we assume we did the 'cd root' above already
$ ls -la
total 6
drwxr-xr-x   2 user2    root           2 Mar 14 14:57 .
drwx--x--x   3 root     root           3 Mar 14 14:57 .. 
```

而“user2”作为所有者可以做任何他想做的事情。“bin”的访问权限甚至可以是“700”，只要你是所有者，就可以进入。因为访问权限是 755（在我们的示例中），所以任何人都可以进入目录“bin”，但只有“user2”可以在其中创建文件。修改或读取这些可能的文件将取决于“user2”赋予它们的访问权限。

“user2”不能删除“bin”目录，即使他拥有它，因为他不拥有写入“bin”目录名称的“文件”（即“根”目录）。那是“root”用户拥有的，他是唯一允许在那里写的用户。

# parsing - Powershell 解析部分文本文件并保存为 CSV

> ID：15375921
> 
> 赞同：3
> 
> 时间：2013-03-13T02:22:13.667
> 
> 标签：parsing, powershell, text, csv

总而言之，我对powershell很陌生，希望有人能让我继续我认为的简单脚本。

我需要解析一个文本文件，从中捕获某些行，并将这些行保存为 csv 文件。

例如，每个警报都在其自己的文本文件中。每个文件都与此类似：

--文件开始---

姓名 John Smith
部门会计
代码 bas-2349,cav-3928,deg-3942
            iye-2830,tel-3890
网址 hxxp://blah.com
        hxxp://foo.com, hxxp://foo2.com
一些文字 I不关心
更多文本我不关心
评论
--------- “这是 我需要 捕获
的多行评论” 一些文本我不关心 更多文本我不关心 日期 2013年 3 月 12 日

---文件结束---

对于每个文本文件，如果我只想将名称、代码和 URL 写入 CSV 文件。有人可以帮我做这件事吗？

我更像是一个 PERL 人，所以我知道我可以编写一个正则表达式来捕获以 Name 开头的单行。但是，我完全不知道如何阅读“代码”行，因为它可能是一行，或者可能是 X 行，直到我遇到 Urls 字段。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:39:31.710

如果文件不是太大而无法在内存中处理，简单的方法是将其作为字符串数组读取。（太大意味着什么取决于您的系统。任何低于千兆字节的东西都应该可以正常工作，而无需太多麻烦。）

读取文件后，设置头尾计数器以指向元素零。将尾指针逐行向前移动，直到找到日期行。您可以将数据与正则表达式匹配。现在您知道了单个记录的开始和结束。对于下一条记录，将 head counter 设置为 tail+1，tail 设置为 tail+2，然后再次开始扫描行。起泡、冲洗、重复直到到达阵列末端。

当记录匹配时，您可以使用正则表达式提取名称。代码和网址有点棘手。将代码行与正则表达式匹配。提取它和所有接下来的行，除非它们与代码模式不匹配。Urls 数据也是如此。如果文件总是在作为先前 URL 和代码的数据的行上具有空格填充，则您也可以使用 match whitespace count 和正则表达式来获取数据行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:50:29.843

也许这会对它产生影响：

```
foreach ($Line in gc file.txt) {
    switch -regex ($Line) {
        '^(Name|Dept|Codes|Urls)' {
            $Capture = $true
            break
        }
        '^[A-Za-z0-9_-]+' {
            $Capture = $false
            break
        }
    }
    if ($Capture) {
        $Line
    }
} 
```

如果您希望最终结果为 CSV 文件，则可以使用`Export-Csv`cmdlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:18:05.670

如果所有文件都具有相同的结构，您可以执行以下操作：

```
$srcdir  = "C:\Test"
$outfile = "$srcdir\out.csv"

$re = '^Name (.*(?:\r\n .*)*)\r\n' +
      'Dept .*(?:\r\n .*)*\r\n' +
      'Codes (.*(?:\r\n .*)*)\r\n' +
      'Urls (.*(?:\r\n .*)*)' +
      '[\s\S]*$'

Get-ChildItem $srcdir -Filter *.txt | % {
  [io.file]::ReadAllText($_.FullName)
} | Select-String $re | % {
  $f = $_.Matches | % { $_.Groups } | ? { $_.Index -gt 0 }
  New-Object -TypeName PSObject -Prop @{
      'Name'  = $f[0].Value;
      'Codes' = $f[1].Value;
      'Urls'  = $f[2].Value;
    }
} | Export-Csv $outfile -NoTypeInformation 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:18:17.630

文本解析通常意味着正则表达式。使用正则表达式，有时您需要锚知道何时停止匹配，这可以让您关心您原本不会关心的文本。如果您可以指定“我不关心的某些文本”的第一行，您可以使用它来“锚定”您的 URL 匹配，以便您知道何时停止匹配。

```
$regex = @'
(?ms)Name (.+)?
 Dept .+?
 Codes (.+)?
 Urls (.+)?
 Some text I dont care about.+
 Comments
 ---------
 (.+)?
 Some text I dont care about 
'@

$file = 'c:\somedir\somefile.txt'
[IO.File]::ReadAllText($file) -match $regex
if ([IO.File]::ReadAllText($file) -match $regex)
  {
   $Name = $matches[1]
   $Codes = $matches[2] -replace '\s+',','
   $Urls = $matches[3] -replace '\s+',','
   $comment = $matches[4] -replace '\s+',' '
  }

$Name
$Codes
$Urls
$comment 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T21:25:31.890

根据包含的事实`c:\temp\file.txt`：

```
Name John Smith
Dept Accounting
Codes bas-2349,cav-3928,deg-3942
      iye-2830,tel-3890
Urls hxxp://blah.com
     hxxp://foo.com
     hxxp://foo2.com
Some text I dont care about
More text i dont care about
.
.
Date 3/12/2013 
```

您可以使用这样的正则表达式：

```
$a = Get-Content C:\temp\file.txt
$b = [regex]::match($a, "^.*Codes (.*)Urls (.*)Some.*$", "Multiline")
$codes = $b.groups[1].value -replace '[ ]{2,}',','
$urls = $b.groups[2].value -replace '[ ]{2,}',',' 
```

# android - Android - 将用户发送到 Activity 的 GCM 推送通知不会导致 onCreate 调用

> ID：15375926
> 
> 赞同：2
> 
> 时间：2013-03-13T02:22:31.547
> 
> 标签：android, push-notification, google-cloud-messaging, android-notifications

我能够创建推送通知，并将用户发送到我想要的任何活动，但我注意到每当用户登陆该活动时，onCreate 函数都不会被调用。

应该是这样吗？如何设置它以便调用 Activity 的 onCreate？

这是我的活动：

```
public class QuestionActivity extends BaseListActivity 
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
```

以下是通知的生成方式：

```
 Intent notificationIntent = new Intent(context, MainActivity.class);
    if ( notification_type != null && notification_type.equals("question"))
    {
        notificationIntent = new Intent(context, QuestionActivity.class);
    }
    else
    if ( notification_type != null && notification_type.equals("plan"))
    {
        notificationIntent = new Intent(context, TopicActivity.class);              
    }

    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);        
    Uri defaultSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);            

    Notification notification = new NotificationCompat.Builder(context)
     .setContentTitle(title)
     .setContentText(message)
     .setContentIntent(intent)
     .setSmallIcon(icon)
     .setLights(Color.YELLOW, 1, 2)
     .setAutoCancel(true)
     .setSound(defaultSound)
     .build();

    notificationManager.notify(0, notification); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:00:39.420

您使用的标志`Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP`意味着如果活动已经在当前任务中运行，那么将使用旧的现有活动，而不是启动该活动的新实例。在那种情况下`onCreate`不会被调用，因为活动已经存在。

# jquery - 如何使用ajax加载外部页面

> ID：15375929
> 
> 赞同：4
> 
> 时间：2013-03-13T02:22:42.210
> 
> 标签：jquery, ajax

我有一个链接按钮，应该链接到另一个页面。该页面的内容应该显示到当前页面。我正在使用引导框架，但是我创建的功能似乎不起作用。

这是我的代码；

```
<a href="" id="reslink">link1</a>

<div class="span8" id="maincont"></div> 
```

javascript;

```
$('#reslink').click(function(){
    $.ajax({
        type: "GET",
        url: "sample.html",
        data: { },
        success: function(data){
            $('#maincont').html(data);
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T04:11:45.450

你有以下方法。

**第一的**

使用 html 如下。

```
<a href="Javascript:void(0);" id="reslink">link1</a> 
```

`Javascript:void(0);`从脚本返回 false 工作。

**第二**

不要更改 html 代码中的任何内容，而是在`jQuery`代码中进行以下更改。

```
$('#reslink').click(function(e){
    e.preventDefault();
    $.ajax({
        type: "GET",
        url: "sample.html",
        data: { },
        success: function(data){
            $('#maincont').html(data);
        }
    });
}); 
```

`e.preventDefault();` **防止默认行为**，`HTML`以便您可以执行代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T02:38:21.353

也许[`load()`](http://api.jquery.com/load/)对你来说是一个更好的选择？

```
$("#reslink").click(function() {
    $("#maincont").load("sample.html");
}); 
```

请注意，以这种方式加载内容可能会破坏历史记录和收藏夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T06:10:38.970

`body onload="abc()"`从 ajax 呈现时，加载的页面中应该可以工作。

# version-control - 在 TFS 合并期间自动重命名文件

> ID：15375930
> 
> 赞同：0
> 
> 时间：2013-03-13T02:22:44.800
> 
> 标签：version-control, tfs, build-automation, versioning, branching-and-merging

我的开发团队正在 TFS 中实现分支和合并。我们的软件包含在一个解决方案中，其中嵌入了许多项目。其中一个项目包含所有 SQL 脚本，以保持我们的数据库版本。

我们在合并期间无法弄清楚如何处理数据库项目。例如，每当开发人员需要对数据库进行任何更改（添加/删除存储过程、创建表、添加索引等）时，我们都会创建一个脚本文件。每个文件都以版本号命名。例如，如果签入的最后一个脚本文件名为 4.1.0.1，我会将新脚本命名为 4.1.0.2。我们使用这些文件名将软件版本与它需要运行的相应数据库版本相匹配。

假设我从我们的主代码分支创建了一个分支来执行新功能。我完成了所有的编码，并将我的所有 SQL 更改放在一个脚本文件中，并将其添加到 DB 项目中。显然，我可以从主代码分支合并到我的新分支中，以确保我拥有最新的 SQL 脚本列表，以便我可以正确命名它。问题是一天中会多次添加新的脚本文件，我们认为我们将与脚本命名发生大量合并冲突。

我想以某种方式自动执行此操作，因此开发人员可以添加一个具有随机名称的脚本，并且在合并期间有一个钩子或事件将确定哪些文件是主代码库的新文件以及如何正确命名这些文件，因此开发人员不必担心。例如，我可以创建一个名为“new_script.sql”的新文件，当我将其合并回主代码分支时，它将重命名为 4.1.0.2

以前我使用 RoundHouse 之类的工具来处理所有 SQL 版本控制，但是在我目前的工作中，我们使用 Sybase SQL Anywhere 10，我无法找到类似于 RoundHouse 的可以与 Sybase 一起使用的东西。

谁能指出我在 TFS 合并期间如何自动执行任务的正确方向？我假设这可以使用 PowerShell 完成，但我担心大多数开发团队不熟悉 PowerShell，我希望能够在开发人员无需离开团队资源管理器窗口的情况下自动执行此任务。

任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:23:33.060

如果您继续使用此策略并引入分支，我认为您将遇到命名冲突是绝对正确的。

我认为你有两个选择：

1.  在分支上添加这些文件时，以分支名称为前缀添加它们。例如。分支_0.1.sql 和分支_0.2.sql。然后，当您将分支合并回主干时，您必须将它们重命名为正确的名称。您可以编写一个程序来为您执行此操作，并且相当简单。为了使这更简单，您也只能为每个分支创建一个 SQL 文件，然后继续添加到该 SQL 文件中。然后即使你合并它也是一个非常简单的过程。

2.  放弃自我版本控制的文件。Tfs 是版本控制。没有太多需要自己对文件进行版本控制。我们使用 Visual Studio 数据库项目进行数据库版本控制，这绝对可以正常工作。我想如果你改变了这个，你需要改变你的部署策略。

我希望这有帮助。

# javascript - 查找哪个事件/观察者正在改变元素

> ID：15375933
> 
> 赞同：0
> 
> 时间：2013-03-13T02:23:28.373
> 
> 标签：javascript, prototypejs

我正在使用 Prototype JS 框架，我有一个带有两个选择字段（每个都有三个选项）的表单。每当我选择一个值时，有一个观察者会更改另一个元素的文本，这是它应该做的。

但是，我如何找出哪些代码正在观察该事件（在表单中选择一个选项）并因此对元素进行更改？我花了过去几个小时试图解决它无济于事。

我认为有一种方法可以获取堆栈跟踪以找出观察该更改的代码是否正确？或者是否有其他调试方法。

提前感谢您的任何建议:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:28:29.867

The simplest fix was a matter of finding where Event.observe was written in the JavaScript and tracing back.

The documentation was helpful: [http://prototypejs.org/doc/latest/dom/Event/observe/](http://prototypejs.org/doc/latest/dom/Event/observe/)

# c# - InvalidBasicConstraints：未观察到证书的基本约束扩展

> ID：15375937
> 
> 赞同：2
> 
> 时间：2013-03-13T02:23:50.773
> 
> 标签：c#, .net, wcf, certificate, x509certificate

我收到错误`"InvalidBasicConstraints: A certificate's basic constraint extension has not been observed."`此证书是使用 OpenSSL 颁发的，将用作 WCF 服务的服务器端测试证书（在验证证书时会出现相同的错误）。我可以用这段代码复制错误。

```
X509Certificate2 cert = new X509Certificate2(@"c:\test.cer");

X509Chain chain = X509Chain.Create();
X509ChainPolicy policy = new X509ChainPolicy();
policy.RevocationMode = X509RevocationMode.NoCheck;
chain.ChainPolicy = policy;
bool valid = chain.Build(cert);

Console.WriteLine(string.Join(" -- ", chain.ChainStatus.Select(o => o.Status + ": " + o.StatusInformation)));
Console.WriteLine(valid ? "VALID" : "NOT VALID"); 
```

查看证书我可以看到这些基本约束，

```
Subject Type=End Entity
Path Length Constraint=None 
```

**这个错误是什么意思，我该如何解决？**

我发现的关于基本约束的最相关文章是这篇，[http://unitstep.net/blog/2009/03/16/using-the-basic-constraints-extension-in-x509-v3-certificates-for-intermediate -cas/](http://unitstep.net/blog/2009/03/16/using-the-basic-constraints-extension-in-x509-v3-certificates-for-intermediate-cas/)但是它只谈论禁止子证书签署/创建更多子证书，在我的情况下我并没有尝试这样做。

此外，任何解释上述基本约束含义的参考资料都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T08:36:59.090

[http://forums.juniper.net/t5/SSL-VPN/quot-Failed-to-authenticate-client-certificate-quot-after/td-p/89232/page/4](http://forums.juniper.net/t5/SSL-VPN/quot-Failed-to-authenticate-client-certificate-quot-after/td-p/89232/page/4)

阅读上述主题后，我看到有两种不同的主题类型，

```
Basic Constraints: Subject Type=CA, Length Constraint=None
Basic Constraints: Subject Type=End Entity, Path Length Constraint=None 
```

我使用的服务器端证书实际上是层次结构中的第三个链接。

A -> B -> C....A 发行 B，然后发行签名 C。

证书B也有`Subject Type=End Entity`基本限制。我找不到任何说明不同类型的基本约束或其含义的文档，但基于上述两种类型的差异，我会说这`End Entity`意味着它不能颁发证书。它是链条的末端，而不是`Subject Type=CA`.

当 .NET 验证链时，它发现 B 没有其父证书颁发证书的权限并抛出错误，`A certificate's basic constraint extension has not been observed`.

**编辑：**使用自签名证书颁发的新证书进行进一步测试验证了上述理论。

# windows - 在 Windows 上使用复合 js。无法启动任何东西

> ID：15375944
> 
> 赞同：0
> 
> 时间：2013-03-13T02:24:19.673
> 
> 标签：windows, node.js, express, railway.js, compoundjs

我希望使用 Compound.js 创建一个 hello world 应用[程序](http://compoundjs.com)。
到目前为止，根本没有任何效果。
我已经安装了“npm install Compound -g”来让 Compound 在全球范围内可用。
现在我想运行“compound init”，我得到了这个：

（见第一个代码块）

在谷歌搜索时，我在 npm 上找到了一个名为[mongoose-compound-example-app 的示例应用程序](https://npmjs.org/package/mongoose-compound-example-app)。
在 npm 安装之后，我运行了“node”。正如自述文件中所建议的：

（参见第二个代码块）
我使用的是 Windows 8 x64。Node 本身可以工作，而且我已经能够使用[locomotive.js](http://locomotivejs.org/)运行“hello world”应用程序。我真的很想弄明白化合物并开始工作，但我似乎什么也做不到。

先感谢您！

编辑：我正在使用节点 v0.10.0

```
C:\Users\Lev\test>compound init hello

path.js:204
    throw new TypeError('Arguments to path.join must be strings');
          ^
TypeError: Arguments to path.join must be strings
at f (path.js:204:15)
at Object.filter (native)
at Object.exports.join (path.js:209:40)
at CompoundServer.module.exports [as extensions]      (C:\Users\Lev\AppData\Roaming\npm\node_modules\compound\lib\server\extensions.js:13:25)
at CompoundServer.initCompound (C:\Users\Lev\AppData\Roaming\npm\node_modules\compound\lib\compound.js:100:14)
at CompoundServer.init (C:\Users\Lev\AppData\Roaming\npm\node_modules\compound\lib\server\compound.js:42:29)
at C:\Users\Lev\AppData\Roaming\npm\node_modules\compound\lib\compound.js:61:18
at process._tickCallback (node.js:415:13)
at Function.Module.runMain (module.js:499:11)
at startup (node.js:119:16)
at node.js:903:3 
```

猫鼬复合示例应用程序错误：

```
C:\Projects\mongoose-compound-example-app\config\environment.js:11
    app.use(compound.assetsCompiler.init());
                                    ^
TypeError: Cannot call method 'init' of undefined
at Function.<anonymous> (C:\Projects\mongoose-compound-example-app\config\environment.js:11:41)
at Function.app.configure (C:\Projects\mongoose-compound-example-app\node_modules\express\lib\application.js:396:61)
at module.exports (C:\Projects\mongoose-compound-example-app\config\environment.js:10:9)
at evalInContextOf (C:\Projects\mongoose-compound-example-app\node_modules\compound\lib\compound.js:187:9)
at requireIfExists (C:\Projects\mongoose-compound-example-app\node_modules\compound\lib\compound.js:165:9)
at configureApp (C:\Projects\mongoose-compound-example-app\node_modules\compound\lib\compound.js:147:5)
at CompoundServer.initCompound (C:\Projects\mongoose-compound-example-app\node_modules\compound\lib\compound.js:91:9)
at CompoundServer.init (C:\Projects\mongoose-compound-example-app\node_modules\compound\lib\server\compound.js:42:29)
at C:\Projects\mongoose-compound-example-app\node_modules\compound\lib\compound.js:61:18
at process._tickCallback (node.js:415:13)
at Function.Module.runMain (module.js:499:11)
at startup (node.js:119:16)
at node.js:903:3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:22:33.647

正如[聊天中所讨论的](https://chat.stackoverflow.com/rooms/26071/discussion-between-lev-dubinets-and-brad)，您使用的 Node.js 版本似乎存在问题或冲突。

Compound 的 package.json 表示它需要 Node.js 0.8.0 或更高版本。您提到它在 0.9 中有效，但在 0.10 中无效。这可能是一个错误，因为 Node 的奇数版本通常是在后来的偶数稳定版本之前的不稳定版本。

我建议在 Compound 的错误跟踪器上发布一个可重现的示例，如果可以将其缩小到 Node 问题，还可以发布 Node.js。

# winforms - 将 ExpandoObject 实例的自定义属性值绑定到 .NET Windows 窗体控件

> ID：15375945
> 
> 赞同：1
> 
> 时间：2013-03-13T02:24:23.920
> 
> 标签：winforms, expandoobject, 2-way-object-databinding

## 上下文：Visual Studo 2012/C# 5.0

我有一个带有三个文本框控件的 .NET Windows 窗体：*firstNameTextBox*、*lastNameTextBox*和*ageTextBox*，以及一个简单的自定义类

```
public class Customer
{
 public string FirstName { get; set; }
 public string LastName { get; set; }
 public int Age { get; set; }
} 
```

我想将*客户*自定义类的实例的属性绑定到我的 Windows 窗体控件。所以我写：

```
private dynamic _customer;
private void Form_Load(object sender, EventArgs e)
{
    _customer = new Customer()
    {
        FirstName = "Andrew",
        LastName = "Chandler",
        Age = 23
    };
    this.firstNameTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text",     _customer, "FirstName"));
    this.lastNameTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "LastName"));
    this.ageTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "Age"));
} 
```

这很好用。然后我通过使用匿名类型稍微更改代码：

```
private dynamic _customer;
private void Form_Load(object sender, EventArgs e)
{
    _customer = new 
    {
        FirstName = "Andrew",
        LastName = "Chandler",
        Age = 23
    };
    this.firstNameTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "FirstName"));
    this.lastNameTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "LastName"));
    this.ageTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "Age")); 
```

}

这也很有效，尽管在这种情况下我只有单向绑定。然后我进一步更改我的代码：

```
private dynamic _customer;
private void Form_Load(object sender, EventArgs e)
{   
    _customer = new ExpandoObject();
    _customer.FirstName = "Andrew";
    _customer.LastName = "Chandler";
    _customer.Age = 23;

     this.firstNameTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "FirstName"));
     this.lastNameTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "LastName"));
     this.ageTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", _customer, "Age"));
} 
```

我收到运行时错误：

**'无法绑定到 DataSource 上的属性或列 FirstName。参数名称：dataMember'**

**问题：**如何将具有一组动态自定义属性的 System.Dynamic.ExpandoObject（或 System.Dynamic.DynamicObject）实例绑定到 Windows 窗体（文本框）控件集？

**注 1：**具有聚合/容器辅助类的解决方案对我来说是可以的。

**注意 2：**我花了几个小时在谷歌上搜索并尝试应用不同的技术（包括我在 StackOverflow 上找到的技术），但我失败了。

## 这是基于 Hans Passant 提示的“优雅”解决方案：

```
private dynamic _customer;
private void Form_Load(object sender, EventArgs e)
{
    _customer = new ExpandoObject();
    _customer.FirstName = "Andrew";
    _customer.LastName = "Chandler";
    _customer.Age = 23;

    bindExpandoField(this, "FirstNameTextBox", "Text", _customer, "FirstName");
    bindExpandoField(this, "lastNameTextBox", "Text", _customer, "LastName");
    bindExpandoField(this, "ageTextBox", "Text", _customer, "Age");
}

private void bindExpandoField(
      Control hostControl,
      string targetControlName,
      string targetPropertyName,
      dynamic expandoObject,
      string sourcePropertyName)
{
    Control targetControl = hostControl.Controls[targetControlName];
    var IDict = (IDictionary<string, object>)expandoObject;
    var bind = new Binding(targetPropertyName, expandoObject, null);
    bind.Format += (o, c) => c.Value = IDict[sourcePropertyName];
    bind.Parse += (o, c) => IDict[sourcePropertyName] = c.Value;
    targetControl.DataBindings.Add(bind);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:25:32.987

数据绑定使用反射，它在 ExpandoObject 上效果不佳，因为它的“属性”实际上不是底层对象的属性。ExpandoObject 实现 IDictionary，但只能轻松绑定到列表控件，如 ListBox。

这并非完全不可能，您必须显式实现 Binding.Format 和 Parse 事件。像这样：

```
dynamic bag = new ExpandoObject();
bag.foo = "bar";
var bind = new Binding("Text", bag, null);
bind.Format += (o, c) => c.Value = bag.foo;
bind.Parse += (o, c) => bag.foo = c.Value;
textBox1.DataBindings.Add(bind); 
```

这行得通，但当然不会获得任何优雅分数。

# java - 如何嵌入位于不同系统路径下的 Java 小程序

> ID：15375946
> 
> 赞同：2
> 
> 时间：2013-03-13T02:24:28.677
> 
> 标签：java, object, applet, codebase

我正在尝试使用位于我系统中其他位置的 jar 中的小程序（与 Web 内容不在同一项目位置）。我知道一个名为 codebase 的属性，它指向 web 寻找具有 applet 类的 jar 的位置。这是我输入的代码，但无法让它工作......

```
<script type="text/javascript">  
        if (_app == "Netscape") 
        {
            document.write('<object classid="java:UareUApplet.class"',
               'type="application/x-java-applet"',
               'name="UareUApplet"',
               'width="1"',
               'height="0"', 
               'type="application/x-java-applet"',
               'pluginspage="http://java.sun.com/javase/downloads"',
               'archive="UareUApplet.jar, dpuareu.jar"',
               'onFMDAcquiredScript="onFMDHandler"',
               'onEnrollmentFailureScript="onEnrollmentFailureHandler"',
               'onImageCapturedScript="onCaptureHandler"',
               'codebase="C:\Users\modonnell\Desktop\UareUApplet\UareUApplet\UareUApplet\Register\"',
               'onDisconnectedScript="onDisconnectedHandler"',
               'onConnectedScript="onConnectedHandler"',
               'onErrorScript="onErrorHandler"',
               'onLoadScript="onLoadHandler"',
               'bRegistrationMode="true"',
               'bDebug="true"',
               'bExclusivePriority="true"',
               'scriptable="true"',
               'mayscript="true"',
               'separate_jvm="true"> </object>'); 
```

}

如果我将 jar 粘贴到我的 Web 项目的文件夹中，并删除“代码库”声明，则小程序将工作。但我不想在每次编译后都粘贴到 jar 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:45:08.667

我需要在归档标签中添加到 jar 的路径。我需要完全删除代码库标签。

# jquery - 从jquery获取xml数据

> ID：15375948
> 
> 赞同：1
> 
> 时间：2013-03-13T02:25:03.743
> 
> 标签：jquery

这甚至可行吗？我有一个这样格式化的xml文件；

```
<CoordinateData>
 <Country name="Australia">  
  <Marker>  
      <LocationName>Port of Coff&#39;s Harbour</LocationName>
      <Longitude>153.0900</Longitude>
      <Latitude>-30.1800</Latitude>
      </Marker>
  <Marker>      
      <LocationName>Port of Sydney</LocationName>
      <Longitude>151.1750</Longitude>
      <Latitude>-33.4500</Latitude>     
  </Marker>
  <Marker>      
      <LocationName>Port of Melbourne</LocationName>
      <Longitude>144.9450</Longitude>
      <Latitude>-37.8370</Latitude>     
  </Marker>
  </Country>
  <Country name="USA">
  <Marker>
    <LocationName>Natchez_MS</LocationName>
    <Longitude>91.4030</Longitude>
    <Latitude>31.5603</Latitude>
  </Marker>
  <Marker>
    <LocationName>Paducah_KY</LocationName>
    <Longitude>88.6010</Longitude>
    <Latitude>37.0833</Latitude>
  </Marker>   
</Country> 
```

为简洁起见，该文件被缩短，但您得到了图片。我想根据下拉选择检索特定国家/地区的数据。我想检索该国家标记的所有经纬度数据。为了确定图表中心，我想将所有纬度放在一个数组中，并对图表中心纬度进行平均，并对经度做同样的事情。我可以通过 .get 检索数据，但我不熟悉如何在 jquery 中解析和平均检索到的数据。目标是使用一个平均纬度和一个平均经度作为地图中心坐标。

我似乎什至无法获取 xml 数据。该文件位于文件夹 OtherDataFiles 中，该文件夹是我网站根目录中的文件夹。以下代码甚至不显示警报。

```
 $(document).ready(function () {
        var id;
        $.ajax({
            type: "GET",
            url: "OtherDataFiles/CoordinateData.xml",
            dataType: "xml",
            success: function(xml) {
                $(xml).find('Marker').each(function() {
                    if (id === "") {
                        id = $(this).attr('name');
                    } else {
                        id = id + "," + $(this).attr('name');
                    }

                });
            }
        });
        alert(id);
    }); 
```

# batch-file - 命令提示符中的全局变量

> ID：15375951
> 
> 赞同：6
> 
> 时间：2013-03-13T02:25:28.060
> 
> 标签：batch-file, command, dos

**如何在批处理脚本中声明全局变量？**

例子：

*测试1.bat：*

```
set testvar=C:\Windows
echo %testvar% 
```

现在我应该可以在其他批处理脚本（test2.bat）中使用这个 testvar

*测试2.bat：*

```
echo %testvar% 
```

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:31:55.063

据我所知，在多个批处理脚本中使用一个变量的唯一方法是创建自定义系统环境变量。您可以在此处找到有关如何执行此操作的详细演练：[全局环境变量](http://www.howtogeek.com/51807/how-to-create-and-use-global-system-environment-variables/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T02:36:34.000

看

```
SETX /? 
```

从提示 - 并观察更改仅适用于 cmd.exe 的未来实例的关键点 - 不存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:29:12.270

通过永久设置系统环境变量。见[这里](http://ss64.com/nt/setx.html)。

适用于：Windows Server 2008、Windows Vista

对于 Windows XP，下载并安装[Windows XP Service Pack 2 支持工具](http://www.microsoft.com/en-au/download/details.aspx?id=18546)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T02:32:01.223

如果 2 个批处理文件在同一个命令进程中运行，它将正常工作。

这是 test1.bat

```
set testvar="test123"
echo In test1.bat
echo %testvar% 
```

这是 test2.bat

```
echo In test2.bat
echo %testvar% 
```

这是运行 test1.bat 然后 test2.bat 的输出

```
C:\temp>test1.bat

C:\temp>set testvar="test123"

C:\temp>echo In test1.bat
In test1.bat

C:\temp>echo "test123"
"test123"

C:\temp>test2.bat

C:\temp>echo In test2.bat
In test2.bat

C:\temp>echo "test123"
"test123" 
```

如果您从另一批次调用一个批次，这也适用（因为它是相同的过程）

将 test1.bat 更改为

```
set testvar="test123"
echo In test1.bat
echo %testvar%
call test2.bat 
```

现在输出看起来像这样

```
C:\temp>test1.bat

C:\temp>set testvar="test123"

C:\temp>echo In test1.bat
In test1.bat

C:\temp>echo "test123"
"test123"

C:\temp>call test2.bat

C:\temp>echo In test2.bat
In test2.bat

C:\temp>echo "test123"
"test123" 
```

如果您希望它可用于不同的命令进程，您需要查看 setx 或设置系统变量。

# activemq - 在 Mule 3 的 JMS 选择器中使用表达式

> ID：15375953
> 
> 赞同：0
> 
> 时间：2013-03-13T02:25:33.813
> 
> 标签：activemq, mule

我想排队：

```
<jms:inbound-endpoint connector-ref="jmsConnector" queue="queue.dev" >
<jms:selector expression="JMSCorrelationID='353'"/>
</jms:inbound-endpoint> 
```

它有效，但我想在选择器中使用表达式：

```
<jms:inbound-endpoint connector-ref="jmsConnector" queue="queue.dev" >
<jms:selector expression="JMSCorrelationID='#[header:OUTBOUND:codeReport]'"/>
</jms:inbound-endpoint> 
```

它没有工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T05:03:45.310

这没有任何意义：您正在尝试在入站端点中使用出站属性。这是行不通的。

`codeReport`应该从哪里来的价值？如果是属性文件，则使用`${codeReport}`.

编辑：事实证明，根据 OP 的评论，解决方案是在 JMS 队列上使用请求者，而不是入站端点。以下代码演示了请求消息直到队列为空并在 a 中返回它们`java.util.List`：

```
<scripting:component>
    <scripting:script engine="groovy"><![CDATA[
        def jmsMessages = []

        for (def muleMessage = muleContext.client.request("jms://out.queue.dev?selector=JMSCorrelationID%3D'"+ message.getInboundProperty('codeReport') +"'", -1L);
             muleMessage != null;) {
          [] << muleMessage.payload
        }

        jmsMessages
    ]]></scripting:script>
</scripting:component> 
```

# syntax-error - 来自 lex 和 yacc 的运行时“语法错误”

> ID：15375960
> 
> 赞同：1
> 
> 时间：2013-03-13T02:25:51.903
> 
> 标签：syntax-error, yacc, lex, flex-lexer

我无法弄清楚为什么我会得到这些结果。

```
++
+add
+syntax error 2

++
+add
+syntax error 4 
```

++ 是我的输入，而 lex 会回显每个字符，并且 yacc 打印在它获得 + 时添加。它每隔一个+就给我这个错误。不管我如何输入，如果我在每个 + 上按回车，我都会得到相同的结果。

法

```
%{
#include "y.tab.h"

int chars = 0;
%}
%%
"+"     {ECHO; chars++; return ADD;}
.       {ECHO; chars++;}
\n      {ECHO;}
%% 
```

yacc

```
%{
#include <stdio.h>
extern int chars;

void yyerror (const char *str) {
    printf ("%s %d\n", str, chars);
}
%}

%token ADD
%%
symbol  : ADD       {printf ("add\n");}
        ;
%%

int main () {
    while (1) {
        yyparse ();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:32:54.450

您的语法只接受由单个标记组成的“句子”，`+`. 当您键入第二个`+`时，您会引发语法错误；您的语法不允许 ADD 后跟 ADD。之后的下一个标记`+`必须是 EOF 语法才能接受您的输入。（由于`.`and`\n`规则，您可以在代码中键入各种其他内容，但`+`输入中只能有一个。）

# flash - 我的fancybox图像中出现了flash横幅

> ID：15375961
> 
> 赞同：0
> 
> 时间：2013-03-13T02:25:57.877
> 
> 标签：flash, fancybox

我的 flash 横幅在我的幻想框图像中弹出。如何将fancybox 图像保留在Flash 横幅顶部？我已经包含了我的 Flash 横幅编码：

```
<embed src="Car Banner.swf" width="271" height="169" quality="high" flashvars="flashlet={imageLinkTarget pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" wmode="transparent”&gt; </embed>
      </object>
      </noscript>
    </p>
    <p align="left" class="fancybox"> 
```

# ormlite - “或”语句 - ORMLite

> ID：15375967
> 
> 赞同：1
> 
> 时间：2013-03-13T02:26:28.073
> 
> 标签：ormlite

我正在尝试使用 ORMLite 进行此查询，但我无法正确使用 or() 语句。

> 从 xx INNER JOIN xw w 中选择 DISTINCT x WHERE :date >= x.startDate AND w.company.id = :companyId AND w.status = :status AND x.status = :status AND (x.endDate = NULL OR x.结束日期 >= :日期)

我的代码：

```
QueryBuilder<x, Integer> xQB = this.xDao.queryBuilder();
xQB.where().eq("status", StatusEnum.ENABLED).and().le("startDate", date)
.and().ge("endDate", date).or().isNull("endDate"); 
```

如果日期小于 startDate，则此状态仍然返回 endDate 的值等于 null。如果我删除 or() 语句一切正常。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:05:56.197

我有一种感觉，您对`AND`和`OR`分组感到困惑。任何`and()`或`or()`操作（不带参数）获取堆栈上的前一个元素并将其与下一个参数组合，然后将结果压入堆栈。就这样`a AND b AND c OR e`变成了大约`(((a AND b) AND c) OR e)`。

该类`Where`还具有接受参数`and(...)`的`or(...)`方法，这些参数将比较包装在括号中。这在像您这样的情况下很有用，当您需要明确说明要比较的内容时。我会将您的更改为：

```
QueryBuilder<x, Integer> xQB = this.xDao.queryBuilder();
Where<x, Integer> where = xQB.where();
where.and(where.eq("status", StatusEnum.ENABLED),
    where.and(where.le("startDate", date),
        where.or(where.ge("endDate", date), where.isNull("endDate")))); 
```

这应该会生成大约 `(a AND (b AND (c OR d)))' 这似乎是您想要的。

要查看构建查询的各种方法，请查看文档：

> [http://ormlite.com/docs/building-queries](http://ormlite.com/docs/building-queries)

# java - 如何在 JRE7 上编码我的 java web start 应用程序标题？

> ID：15375968
> 
> 赞同：1
> 
> 时间：2013-03-13T02:26:42.740
> 
> 标签：java, xml, encoding, utf-8, jnlp

我有一个 JWS 应用程序，它的标题是中文的。它在 jre6 上运行良好。但是在 jre7 上，它不能正确编码 Windows 7（或 Windows XP）上的快捷方式标题，Java Cache Viewer 对话框和 Certification Dialog 都有同样的问题。

如何在 JRE7 上编码我的 java web start 应用程序标题？

JNLP文件内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
    <jnlp spec="6.0+" codebase="localhost:9080/xmaker/">
        <information>
            <!--  chinese title -->
            <title>课件录制工具</title>
            <vendor>XXX</vendor>
            <shortcut online="true" install="false">
                <desktop/>
            </shortcut>
            <offline-allowed/>
        </information>
        <security>
            <all-permissions/>
        </security>
        <update check="timeout" policy="always"/>
        <resources>
            <java initial-heap-size="134217728" version="1.6+"/>
            <!-- some other jar resources -->
        </resources>
        <application-desc main-class="xxx.xxx.xxx.RecorderToolMain"> </application-desc> 
    </jnlp> 
```

# javascript - Socket.io 客户端未正确接收来自服务器的数据

> ID：15375970
> 
> 赞同：0
> 
> 时间：2013-03-13T02:27:06.083
> 
> 标签：javascript, html, node.js, networking, socket.io

服务器.js

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(process.env.PORT);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('message', { msg: 'world' });
  socket.on('message', function (msg) {
    console.log(msg);
    console.log('That was a message from the client :)');
  });
}); 
```

索引.html：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('EDITED');
  document.write("test");
  socket.on('message', function (msg) {
    alert(msg);
    //console.log(data);
    socket.emit('message', { msg: 'hello there server' });
  });
</script> 
```

服务器正在接受消息“hello there server”并在控制台中正确显示；但是，当服务器向客户端发送消息“hello”时，客户端应该给出一个弹出警报，该警报应该是“hello”。它不是弹出警报说“你好”，而是说： **[object Object]**

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:29:00.450

响应是一个对象：

```
socket.on('message', function(data) {
    alert(data.msg); 
```

我会考虑`console.log`在发送这样的调试消息时使用，因为您可以看到结构而不是`[object Object]`.

# xcode - 带有 UIDatePicker 的 UIPopover 在 iOS5.1 中抛出异常

> ID：15375971
> 
> 赞同：0
> 
> 时间：2013-03-13T02:27:17.703
> 
> 标签：xcode, uigesturerecognizer, uipopovercontroller, uidatepicker, uipopover

我有一个企业 iPad 应用程序，可以在不同年份的几台 iPad 上运行。除了一个是该组中唯一的第一代 iPad 之外，所有工作都很好。此 iPad 运行 iOS 5.1.1。该应用程序在多个地方使用了 UIPopoverController，并且在这台 iPad 上一切正常，除了我上次创建的那个。

使用 iPad 5.1 模拟器，我能够复制这些问题……</p>

1.  应用程序在尝试打开一个 UIPopoverController 时崩溃，该控制器包含一个 UIViewController 连续一个 UIDatePicker 和一个 UIButton。异常显示...</li>

> ***由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”

这是我正在使用的代码，直到引发异常的那一行……</p>

```
DatePickerPopOverViewController *datePickerViewController =[[DatePickerPopOverViewController alloc] init];
datePickerViewController.defaultDate = lastPopoverDate;
datePickerViewController.buttonTitle = @"Get Schedule";
datePickerViewController.delegate = self;
UIPopoverController *datePickerPopOver = [[UIPopoverController alloc] initWithContentViewController:datePickerViewController]; 
```

我很确定所有涉及的元素在 iOS5.1 中都可用。任何建议将不胜感激。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:57:25.787

`autolayout`iOS 6.0以下不能使用。您看到的异常是由此造成的。`NSLayoutConstraint`是使用时用来定义界面元素关系的类`autolayout`。

要继续针对 iOS 6.0 以下的版本，只需取消选中 IB 界面中的“使用自动布局”即可。

![在此处输入图像描述](../Images/1ea015133ed417f5bd5ac83b08dfb4d3.png)

# node.js - NodeJs 服务器在 1 个响应后停止响应

> ID：15375972
> 
> 赞同：3
> 
> 时间：2013-03-13T02:27:45.283
> 
> 标签：node.js

```
 var http = require('http');

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(9000, "127.0.0.1");
console.log('Server running at http://127.0.0.1:9000/'); 
```

我有上面的代码开始使用nodejs，当我启动进程并在浏览器上运行时，我得到了一次响应，但之后我没有得到任何响应。每次我重新启动时，我都会收到 1 个响应，并且一如既往地停止。我怎样才能让它连续运行。提前致谢！

只需添加与此问题相关的更多信息。这是来自 nginx conf 文件的片段

```
server {

    listen 80;

    client_max_body_size 2M;

    server_name my_domain;

     root /home/node/My_Folder;
   # access_log  /var/log/nginx.vhost.access.log  main;
    send_timeout 1;

location ~* ^.+\.(jpg|jpeg|JPG|JPEG|GIF|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|exe|pdf|ppt|txt|tar|mid|midi|wav|bmp|rtf|js|mov|html)$ {
autoindex on;
root /home/node/My_Folder;
expires 30d;

break;
}

location / {
      proxy_set_header  X-Real-IP  $remote_addr;
      proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
        proxy_redirect off;
        #proxy_connect_timeout 50ms;
        #proxy_send_timeout 200ms;
        #proxy_read_timeout 200ms;
        proxy_next_upstream error;
        proxy_pass http://Handler;
        #index no_ads.html no_ads.htm;
        break;
}

}

upstream Handler {
        server 127.0.0.1:8010;
        server 127.0.0.1:8011;
        server 127.0.0.1:8012;
        server 127.0.0.1:8013;
        server 127.0.0.1:8014;
        server 127.0.0.1:8015;
        server 127.0.0.1:8016;
        server 127.0.0.1:8017;
        server 127.0.0.1:8018;
        server 127.0.0.1:8019;
        server 127.0.0.1:9000;
} 
```

我尝试同时使用

node app.js 永远启动 -a app.js

启动应用程序，但无论哪种方式，我都只得到一个响应，然后超时。我确实在同一台服务器上运行了几个其他节点应用程序，并且这些应用程序似乎运行良好。所以我完全迷失了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:10:02.340

您的 Node.js 应用程序在端口 9000 上运行。

在您的 NGinx 配置文件中，您有设置

```
proxy_pass http://Handler; 
```

这会将传入的请求重定向到 Node.js 应用程序，但您不是直接将请求重定向到那里，而是重定向到配置如下的上游：

```
upstream Handler {
    server 127.0.0.1:8010;
    server 127.0.0.1:8011;
    server 127.0.0.1:8012;
    server 127.0.0.1:8013;
    server 127.0.0.1:8014;
    server 127.0.0.1:8015;
    server 127.0.0.1:8016;
    server 127.0.0.1:8017;
    server 127.0.0.1:8018;
    server 127.0.0.1:8019;
    server 127.0.0.1:9000;
} 
```

由于 NGinx 默认对上游使用循环，这意味着在 11 次中，NGinx 尝试连接到端口 9000（有效），接下来的 10 次尝试访问不存在的服务器。

因此无法建立连接，您将收到错误消息。

删除 upstream 块中的所有其他服务器条目，完全删除 upstream 块并将单个 Node.js 服务器直接配置为代理，或使用端口 8010、8011 启动其他 Node.js 服务器，...，一切都应该工作.

有关如何配置上游的详细信息，请查看[HttpUpstreamModule 上的 NGinx 文档](http://wiki.nginx.org/HttpUpstreamModule)。

# maven - mvn release:prepare 进入无休止的循环

> ID：15375978
> 
> 赞同：0
> 
> 时间：2013-03-13T02:28:42.250
> 
> 标签：maven

我跑了

> mvn release：准备一个项目，它是一个多模块构建。

我为以下问题输入了是：

```
There are still some remaining snapshot dependencies.: Do you want to
resolve them now? (yes/no) no: : yes
Dependency type to resolve,: specify the selection number ( 0:All 1:Project Dependencies 2:Plugins 3:Reports 4:Extensions ): (0/1/2/3) 1: :0
Resolve All Snapshots.: 'com.test:core-api' set to release? (yes/no) yes: : yes
What is the next development version? (0.0.6-SNAPSHOT) 0.0.6-SNAPSHOT: : 1.2.0-SNAPSHOT 
```

它不断地在无休止的循环中问我以下问题。

> 下一个开发版本是什么？

我必须 Ctrl+C 退出循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T11:28:53.970

`groupId`当我在我的多模块构建中重构时遇到了同样的问题。

原因正是错误消息所说的，但很难发现快照依赖关系。

就我而言，子模块中的节中的顶层`groupId`和`groupId`s`<parent>`都是正确的，但树中的某些模块与其他模块具有交叉依赖关系，因此包含在`<dependencies>`or`<dependencyManagement>`节中。

这些依赖项通过 . 与项目版本相关联`${project.version}`，因此在文本搜索“SNAPSHOT”时很容易错过它们。由于我忘记重构`groupId`这些依赖项中的 s，maven 将其视为项目本身之外的“外部”快照依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:35:34.233

从过去的经验来看，这不是一个无休止的循环，但需要确认大量的快照依赖项（因此您会觉得这是一个无限循环）。这通常发生在 Maven 聚合（多模块）项目中。

如果你知道你总是接受默认答案，你可以尝试在批处理模式下运行它

```
mvn --batch-mode release:prepare 
```

发布插件的默认行为是在每次检测到快照依赖项时询问确认。如果您遵循 Maven 惯例，请先发布快照依赖项，并在发布项目之前更新对依赖项的引用。

[http://maven.apache.org/maven-release/maven-release-plugin/examples/non-interactive-release.html](http://maven.apache.org/maven-release/maven-release-plugin/examples/non-interactive-release.html)有很好的关于执行非交互式发布的信息

# javascript - 高级 jQuery 弹出窗口

> ID：15375980
> 
> 赞同：0
> 
> 时间：2013-03-13T02:28:54.207
> 
> 标签：javascript, jquery

几个问题：

1）我试图让这个脚本更有效地运行。

2）当用户单击任一弹出按钮时，它会打开一个窗口并隐藏元素。（目前我正在使用 .detach() 删除嵌入式视频播放器，因为在 Firefox 中 .toggle() 只是隐藏播放器但保持音频播放。有没有更好的方法来做到这一点？

3）理论上，通过再次单击按钮或手动关闭窗口，它应该取消隐藏或 .toggle() 元素，但由于 detach() 而不适用于视频播放器。

4）如果用户弹出窗口手动将其关闭，然后再次将其弹出以再次关闭它，则元素不会 .toggle() 返回。

在此处查看实际操作，[http://www.mst3k.tv/](http://www.mst3k.tv/)。

```
$(document).ready(function() {
  $('#lights').click(function(){$('#darkness').fadeToggle(500);});
  $("#lights").toggle(function(){$("#lights").attr('id','lightsoff');},function(){$("#lightsoff").attr('id','lights');});
  /**VIDEO**/
  var videoWin;
  $('#video-toggle').click(function(){
      $('#video').fadeToggle(500);
      $('#video').detach();
      });
  $('#video-toggle').click(function(){
      if (videoWin && !videoWin.closed) {
        videoWin.close();
        return false;
      }
      videoWin = window.open(
        $(this).attr('rel'),
        'videoWin',
        'width=600,height=480,toolbar=0,top=0,left=0,menubar=0,location=0,status=0,scrollbars=0,resizable=1');
      return false;
      }
    );
  var watchVideo = setInterval(function() {
      if (videoWin.closed) {clearTimeout(watchVideo);$('#video').show(500)}
      return false;
   }, 1);
  /**CHAT**/
  var chatWin;
  $('#chat-toggle').click(function(){
      $('#chat').fadeToggle(500);
      /*$('#chat').detach();*/
      });
  $('#chat-toggle').click(function(){
      if (chatWin && !chatWin.closed) {
        chatWin.close();
        return false;
      }
      chatWin = window.open(
        $(this).attr('rel'),
        'chatWin',
        'width=320,height=480,toolbar=0,top=0,left=601,menubar=0,location=0,status=0,scrollbars=0,resizable=1');
      return false;
      }
    );
  var watchChat = setInterval(function() {
      if (chatWin.closed) {clearTimeout(watchChat);$('#chat').show(500)}
      return false;
   }, 1);
  /*$("a.btn").fitText(1.2, { minFontSize: "6px", maxFontSize: "14px" });*/
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:51:14.397

如果您为您的代码创建一个 jQuery 插件会更好，这样您就可以重复使用它并避免 DRY。这里有几个选项：

插件一：[jQuery popupWindow](http://swip.codylindley.com/popupWindowDemo.html)

插件2：[jQuery winPop](http://github.com/vasilionjea/winPop)

另请注意，该`closed`属性不是任何 W3C 规范的一部分，但它可能在浏览器中受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:02:03.913

您还可以编写一个可以重用的 JS 函数。根据[w3cschools 网站](http://www.w3schools.com/jsref/prop_win_closed.asp)，大多数主要浏览器都支持*window.close*属性，您可以在触发事件之前检查它。

代替

```
if(videoWin && !videoWin.closed) 
```

你可以使用

```
if (typeof videoWin!='undefined'){ /* it has been created */}
elseif(typeof videoWin='undefined') { /*it's okay to open the new window*/} 
```

如果您使用它作为检查，请确保您没有创建变量，直到窗口打开事件被触发。由于您在函数声明上方几行创建了 var，因此它将始终按定义返回。

你需要在你的函数中指定一个目标对象，让它正确地抛出多个窗口......这意味着你不能为多个窗口声明一个 var。也许上课会更好。

我之前认为很奇怪，但在 FB 过早发布我的回复之前忘记提及的是，您在*rel属性中添加了**href*并将 href 指定为 js:void(0) ，这也是非标准的。rel 属性用于指定链接和页面之间的关系...（例如 rel=nofollow）。这也可能是为什么它有时也不会触发和误触发，以及浏览器响应之间的差异。

# ios - 当应用程序关闭或在后台运行时弹出 UIAlertView 窗口

> ID：15375982
> 
> 赞同：0
> 
> 时间：2013-03-13T02:29:07.763
> 
> 标签：ios, objective-c, uialertview

我对 UIAlertView 做了一些研究，我了解它的基础知识。

这是我的功能要求 -

应用程序应该在某个时间使用两个按钮创建 UIAlertView 窗口，是和否。并根据用户的选择，应用程序创建另一个 UIAlertView 窗口，依此类推。我想知道即使应用程序关闭或在后台运行，是否可以跟踪是和否。

另外，我知道可以通过推送通知创建 UIAlertView，但是当应用程序关闭或在后台运行时，是否可以通过 Web 服务将“是”或“否”选择发送到服务器？

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:34:39.970

据我所知，当应用程序关闭或在后台运行时，你**不能做这些事情。**

# ruby - 在 Rails 中显示 ruby 代码块的时间

> ID：15375985
> 
> 赞同：1
> 
> 时间：2013-03-13T02:29:18.247
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我正在尝试将我的记录器输出格式化为看起来像 ActiveRecord 输出并包括计时详细信息。例如：

```
User Load (0.2ms)  SELECT `users`.* FROM `users` LIMIT 1 
```

我无法弄清楚 ActiveRecord 是如何做到这一点的。Rails 中是否有一种简单的方法来计时代码块并很好地显示结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:38:13.763

考虑使用`benchmark`这里的[Rails guide for profiling](http://guides.rubyonrails.org/performance_testing.html#profiler)。

```
Project.benchmark("Creating project") do
  project = Project.create("name" => "stuff")
  project.create_manager("name" => "David")
  project.milestones << Milestone.all
end 
```

结果：

```
Creating project (185.3ms) 
```

# sql - Magento - 模块插入、更新、删除、选择代码

> ID：15375986
> 
> 赞同：13
> 
> 时间：2013-03-13T02:29:18.793
> 
> 标签：sql, magento, magento-1.7, crud

我创建了一个模块，想使用核心读写功能来插入、更新、删除或选择有条件的数据库值，不使用 SQL 怎么办？示例：$customer_id=123 型号=（推荐/推荐）

选择

```
 $collection3 = Mage::getModel('referral/referral')->getCollection();
    $collection3->addFieldToFilter('customer_id', array('eq' => $customer_id));
    foreach($collection3 as $data1)
    {
    $ref_cust_id.= $data1->getData('referral_customer_id'); 
    } 
```

插入

```
$collection1= Mage::getModel('referral/referral');
$collection1->setData('customer_id',$customer_id)->save(); 
```

删除，更新（有条件）=？？？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-13T10:08:00.570

假设，我有一个名为`mynews`. 以下是表格中的`select, insert, update, and delete data`代码`news`。

**`INSERT DATA`**

`$data`包含要插入的数据数组。数组的键应该是数据库表的字段名，值应该是要插入的值。

```
$data = array('title'=>'hello there','content'=>'how are you? i am fine over here.','status'=>1);
$model = Mage::getModel('mynews/mynews')->setData($data);
try {
    $insertId = $model->save()->getId();
    echo "Data successfully inserted. Insert ID: ".$insertId;
} catch (Exception $e){
 echo $e->getMessage();   
} 
```

**`SELECT DATA`**

```
$item->getData() prints array of data from ‘news’ table.
$item->getTitle() prints the only the title field. 
```

同样，要打印内容，我们需要编写`$item->getContent()`.

```
$model = Mage::getModel('mynews/mynews');
$collection = $model->getCollection();
foreach($collection as $item){
print_r($item->getData());
print_r($item->getTitle());
} 
```

**`UPDATE DATA`**

`$id`是要更新的数据库表行 ID。 `$data`包含要更新的数据数组。数组的键应该是数据库表的字段名，值应该是要更新的值。

```
// $id = $this->getRequest()->getParam('id');
$id = 2;
$data = array('title'=>'hello test','content'=>'test how are you?','status'=>0);
$model = Mage::getModel('mynews/mynews')->load($id)->addData($data);
try {
    $model->setId($id)->save();
    echo "Data updated successfully.";

} catch (Exception $e){
    echo $e->getMessage(); 
} 
```

**`DELETE DATA`**

`$id`是要删除的数据库表行id。

```
// $id = $this->getRequest()->getParam('id');
$id = 3;
$model = Mage::getModel('mynews/mynews');
try {
    $model->setId($id)->delete();
    echo "Data deleted successfully.";

} catch (Exception $e){
    echo $e->getMessage(); 
} 
```

通过这种方式，您可以在自定义模块和任何`magento code`.

**来源： http: [//blog.chapagain.com.np/magento-how-to-select-insert-update-and-delete-data/](http://blog.chapagain.com.np/magento-how-to-select-insert-update-and-delete-data/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T04:29:43.353

UPDATE 基本上是 SELECT 和 INSERT 的组合。您加载一个集合，根据需要对它们进行迭代设置值，然后在每个模型上调用 ->save() 。

DELETE 通过模型的 ->delete() 函数直接处理。因此，要么加载单个模型，要么迭代它们的 SELECTed 集合并调用 ->delete()

（并不是说由于迭代，这不是对集合执行这些操作的“最快”方式（因为每个都将生成一个新查询，而不是一次处理多个删除的单个查询），而是性能适用于小型数据集/SELECT（小于 1k？）或您不经常做的事情（例如每天一次导入或更新价格 10k 产品）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-24T06:49:39.230

**更新**

```
 $new=$this->getRequest()->getParams();
    $id=$new['id'];
    $name=$new['name'];

    $con=Mage::getModel('plugin/plugin')->load($id);
      $con->setData('name',$name)->save();

    echo "Update Success"; 
```

**删除**

```
 $id = $this->getRequest()->getParam('id');
    $model = Mage::getModel('plugin/plugin');
    $model->setId($id)->delete();
    echo "Data deleted successfully."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:48:44.963

您也可以使用这样的选择查询。它很容易。

```
$salesInvoiceCollection_sql = "SELECT  `entity_id` ,  `increment_id`,`order_id` 
                                    FROM  `sales_flat_invoice` 
                                    WHERE  `erp_invoice_id` = 0
                                    ORDER BY `entity_id`
                                    DESC limit 1000";

    $salesInvoiceCollection = Mage::getSingleton('core/resource')->getConnection('core_read')->fetchAll($salesInvoiceCollection_sql); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-18T06:47:36.517

如果你想删除基于集合的条件，你可以使用`addFieldToFilter`，`addAttributeToFilter`

```
$model = Mage::getModel('mynews/mynews')->getCollection();
try {
    $model->addAttributeToFilter('status', array('eq' => 1));
    $model->walk('delete');
    echo "Data deleted successfully.";

} catch (Exception $e){
    echo $e->getMessage(); 
} 
```

# python - Python中的多条件正则表达式

> ID：15375987
> 
> 赞同：-1
> 
> 时间：2013-03-13T02:29:24.043
> 
> 标签：python, regex

我需要在一个字符串中搜索几个不同匹配项的列表，假设我有这个列表：

```
['this', 'is', 'a', 'regex', 'test'] 
```

我想看看这些项目中的任何一个是否在一个字符串中，无论是使用正则表达式还是 Python 中的任何其他方法。

我首先尝试了做`string in list`，但事实证明这是不够的，所以我尝试在正则表达式中连接条件，例如：

```
(this|is)(a|regex)(text) 
```

但这会尝试匹配几个项目，就好像它们是串联的一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:33:19.023

您可以使用内置功能`any()`：

```
In [1]: strs="I am a string"

In [2]: lis=['this', 'is', 'a', 'regex', 'test']

In [3]: any(x in strs for x in lis)
Out[3]: True 
```

这也将返回`True`类似的东西`"thisisafoobar"`。

但是，如果您想匹配确切的单词，请尝试`re.search()`or `str.split()`：

```
In [4]: import re

In [5]: any(re.search(r"\b{0}\b".format(x),strs) for x in lis)
Out[5]: True

In [6]: strs="foo bar"

In [7]: any(re.search(r"\b{0}\b".format(x),strs) for x in lis)
Out[7]: False 
```

使用`str.split()`：

```
In [12]: strs="I am a string"

In [13]: spl=strs.split()    #use set(strs.split()) if the list returned is huge

In [14]: any(x in spl for x in lis)
Out[14]: True

In [15]: strs="Iamastring"

In [16]: spl=strs.split()

In [17]: any(x in spl for x in lis)
Out[17]: False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T02:33:52.203

```
>>> l = ['this', 'is', 'a', 'regex', 'test']
>>> s = 'this is a test string'
>>> def check(elements, string):
...     for element in elements:
...         if element in string:
...             return True
...     return False
... 
>>> check(l, s)
True 
```

显然这个函数比`any()`

```
import time

def main():
    # Making a huge list
    l = ['this', 'is', 'a', 'regex', 'test'] * 10000
    s = 'this is a test string'

    def check(elements, string):
        for element in elements:
            if element in string:
                return True
        return False

    def test_a(elements, string):
        """Testing check()"""
        start = time.time()
        check(elements, string)
        end = time.time()
        return end - start

    def test_b(elements, string):
        """Testing any()"""
        start = time.time()
        any(element in string for element in elements)
        end = time.time()
        return end - start

    print 'Using check(): %s' % test_a(l, s)
    print 'Using any(): %s' % test_b(l, s)

if __name__ == '__main__':
    main() 
```

结果：

```
pearl:~ pato$ python test.py 
Using check(): 3.09944152832e-06
Using any(): 5.96046447754e-06
pearl:~ pato$ python test.py 
Using check(): 1.90734863281e-06
Using any(): 7.15255737305e-06
pearl:~ pato$ python test.py 
Using check(): 2.86102294922e-06
Using any(): 6.91413879395e-06 
```

但是，如果您将`any()`with 与`map()`类似的东西结合使用`any(map(lambda element: element in string, elements))`，则结果如下：

```
pearl:~ pato$ python test.py 
Using check(): 3.09944152832e-06
Using any(): 0.00903916358948
pearl:~ pato$ python test.py 
Using check(): 2.86102294922e-06
Using any(): 0.00799989700317
pearl:~ pato$ python test.py 
Using check(): 3.09944152832e-06
Using any(): 0.00829982757568 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:33:08.980

你可以这样做：

```
if any(test in your_string for test in tests):
    ... 
```

# cron - 将 cronjob 添加到 cPanel

> ID：15375989
> 
> 赞同：0
> 
> 时间：2013-03-13T02:29:34.270
> 
> 标签：cron, cpanel

我只需要在我的 cPanel 中使用 cron 作业运行以下 url。

当我尝试执行链接时

[http://www.insidewealth.com.au/index.php?option=com_acymailing&ctrl=cron](http://www.insidewealth.com.au/index.php?option=com_acymailing&ctrl=cron)

该链接正在浏览器中运行，但是当我尝试添加与 cron 作业中相同的 URL 时，我收到以下错误

`bash/sh/ file not found`

当我将 cron 作业编辑为

`/usr/bin/php /home/staging/public_html/index.php?option=com_acymailing&ctrl=cron`

但我收到 404 错误。

我的 cPanel 用户名是`staging`

谁能告诉我 cPanel 中 cron 作业的语法是什么。

每分钟运行一次 Cron 作业，并通过电子邮件报告显示此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:05:01.467

使用带有完整 URL 的 wget 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-05T21:09:46.473

@yannick-blondeau As suggested **you can use a wget or curl** to make a simple request to your website.

Usually wget will attempt to download a file but this is not necessary with the `-O` flag to pipe to `/dev/null` or `-q` (both options used to prevent from saving output to a file), an example will look like

```
wget -O /dev/null http://www.insidewealth.com.au/index.php?option=com_acymailing&ctrl=cron
wget -q http://www.insidewealth.com.au/index.php?option=com_acymailing&ctrl=cron 
```

You can also use curl for the same effect

```
curl --silent http://www.insidewealth.com.au/index.php?option=com_acymailing&ctrl=cron 
```

# vim - Vim：t_Co=256 和 term=xterm-256color 与 TMUX 的区别

> ID：15375992
> 
> 赞同：42
> 
> 时间：2013-03-13T02:29:44.610
> 
> 标签：vim, terminal, tmux, xterm

我正在测试我倾向于使用 SSH 连接到我设置了 Tmux 的 Linux 机器的各种不同终端。

基本上我注意到了这种行为，我希望有人可以解释发生了什么。现在，这可能是影响 Prompt 应用程序的特定行为。

我在 Tmux 中使用 Vim，在我的 iPhone5 上的 Panic 的 Prompt 应用程序中，当使用指令`.vimrc`设置颜色时，我遇到了 256 种颜色未启用的行为。`set t_Co=256`在这里，当 Vim 没有通过 Tmux 运行时，它可以正确显示颜色。此外，OS X 的 Terminal.app 使用 Tmux 中的 Vim 正确渲染了颜色（不幸的是，我没有在 Windows 上测试 PuTTY）。

然后我换掉了`set t_Co=256`，`set term=xterm-256color`现在通过 Tmux 使用 Vim 时颜色可以工作了。

另请注意，我测试了Tmux 的设置`set -g default-terminal "xterm-256color"`和`set -g default-terminal "screen-256color"`设置，并且此更改对行为没有影响。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-13T06:56:46.347

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T02:49:12.427

`set t_Co=256`您可以同时使用两者`set term=xterm-256color`。

`term`告诉 Vim 使用什么终端类型，它控制 Vim 各个方面的显示/渲染，包括如何映射键输入、重绘屏幕、移动光标、显示颜色等。通常，Vim 可以自己解决这个问题通过`TERM`您的操作系统提供的环境变量。

如果操作系统值不正确，明确设置它通常很有帮助。如果您从不提供正确值的终端仿真器通过网络连接，则尤其如此。

`t_Co`是许多终端选项之一（由 Vim 用于终端控制的 termcap 系统使用）。它特指终端支持的颜色数量。如果终端仿真基本正确，有时您需要覆盖它，但 Vim 不能正确识别支持的颜色数量。

我使用这两个选项`.vimrc`来确保 Vim 在 tmux 中使用我喜欢的所有终端（Ubuntu 的 gnome-terminal、OSX 的 iTerm2 和 Windows 的 KiTTY）在 tmux 中使用 256 种颜色。我也将这些终端中的大多数显式配置为`xterm-256color`作为终端类型发送。

# string - C++ 将 int 转换为字符串

> ID：15375995
> 
> 赞同：3
> 
> 时间：2013-03-13T02:30:15.673
> 
> 标签：string, int

我知道这是非常基本的，但我对 C++ 很陌生，似乎找不到答案。我只是想将一些整数转换为字符串。此方法有效：

```
int a = 10;
stringstream ss;
ss << a;
string str = ss.str(); 
```

但是当我需要像这样转换第二个和第三个时：

```
int b = 13;
stringstream ss;
ss << a;
string str2 = ss.str();

int c = 15;
stringstream ss;
ss << b;
string str3 = ss.str(); 
```

我收到此错误：

```
'std::stringstream ss' previously declared here 
```

我需要以某种方式关闭字符串流吗？我注意到，如果我在代码中将它们彼此远离，编译器不会介意，但这似乎不是我应该做的事情。有人有建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T02:38:41.623

您正在尝试用相同的名称重新声明相同的字符串流。您可以像这样修改您的代码以便工作：

```
 int b = 13;
stringstream ss2;
ss2 << a;
string str2 = ss2.str(); 
```

或者如果您不想重新声明它，可以这样：

```
int b = 13;
ss.str(""); // empty the stringstream
ss.clear();
ss << a;
string str2 = ss.str(); 
```

您也可以使用，这要快得多：

```
int c = 42;
std::string s = std::to_string(c); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T02:34:01.753

`stringstream`和其他变量一样，它是一个变量。为了使成语可以工作两次而不改变，请将其放在大括号中：

```
int a = 13;
string str2;
{
    stringstream ss;
    ss << a;
    str2 = ss.str();
} // ss ceases to exist at the closing brace

int b = 15;
string str3;
{
    stringstream ss; // now we can make a new ss
    ss << b;
    str3 = ss.str();
} 
```

从 C++11 开始，你可以做

```
std::string str4 = std::to_string( b ); 
```

或（`c`任意类型）

```
std::string str5 = ( std::stringstream() << c ).str(); 
```

当然，还有其他解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:33:13.693

尝试

```
#include <string>

int a = 10;
std::string s = std::to_string(a); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T02:34:01.407

您遇到的特定错误是告诉您不能`ss`在同一范围内声明两个具有相同名称（在您的情况下）的变量。

如果你想创建一个新的`stringstream`，你可以把它叫做别的东西。

但是还有其他方法可以将 int 转换为字符串。您可以使用[std::to_string()](http://en.cppreference.com/w/cpp/string/basic_string/to_string)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-29T16:27:03.017

确保您声明：

```
using namespace std; 
```

然后插入代码：

```
int a = 10;
ostringstream ssa;
ssa << a;
string str = ssa.str();

int b = 13;
ostringstream ssb;
ssb << b;
string str2 = ssb.str();

int c = 15;
ostringstream ssc;
ssc << c;
string str3 = ssc.str(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-25T11:46:12.627

我能想到的最简单的方法之一是：

```
string str = string(itoa(num)); 
```