# StackOverflow 问答 13104000-13104999

# objective-c - 在 UI 更新时显示 UIActivityIndi catorView

> ID：13104004
> 
> 赞同：0
> 
> 时间：2012-10-27T20:40:20.547
> 
> 标签：objective-c, ios, uiwebview

我有一个应用程序，它呈现由一组控件（UIWebViews 加上一组自定义控件）组成的内容“页面”。此处理当前需要大约 1 秒才能完成，并在处理时锁定 UI。

当我使用 UIWebView 时，我无法将 UI 元素的构建移到后台线程上，所以这在某种程度上是不可避免的（我只是根据需要加载页面）。

我要做的是在呈现内容时显示一个活动指示器，但我似乎无法做到这一点。我尝试过设置一个指示器，然后在很短的延迟后触发呈现其余内容的方法，但这从未反映在 UI 中。

有没有人有任何在 CPU 繁重的渲染操作之前触发活动指示器的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:51:36.663

我不知道我是否理解得很好，但如果您只想添加一个活动指示器，您可以使用 uiwebview 委托的方法。例如，您可以在 shouldStartLoadWithRequest 中添加活动指示器视图，并在 didFinishLoad 中将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:17:07.173

您需要 MbProgressHUD，这是一种添加进度指示器的非常简单的方法……它为我省去了很多麻烦。

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

# google-chrome - Google Chrome 扩展 manifest.json 插件公共权限错误？

> ID：13104005
> 
> 赞同：3
> 
> 时间：2012-10-27T20:40:34.787
> 
> 标签：google-chrome, plugins

我正在创建一个谷歌浏览器扩展，它也在后台页面中使用自定义 NSAPI 插件。如果我在 manifest.json 中有以下内容，这将非常有用。

```
"plugins": [
    { "path": "build/debug/mypugin.dll", "public": true }
  ], 
```

我想将其标记为 "public": false 以便插件只能由我的扩展程序调用。但是随后插件方法无法被调用。找不到很多关于此的文档。看起来像一个错误？

我有这些权限：

```
"manifest_version": 2,
"permissions": [    "tabs", 
                    "http://*/*", 
                    "https://*/*", 
                    "contextMenus",                 
                    "webRequest"], 
```

有没有人能够将插件设置为 "public":false 并且仍然可以使用来自扩展后台页面的调用？

问候

史蒂夫

# macos - 对与在线服务器通信的应用程序进行逆向工程

> ID：13104006
> 
> 赞同：0
> 
> 时间：2012-10-27T20:40:42.923
> 
> 标签：macos, monitoring, reverse-engineering, server-communication

我想监视从我的计算机上运行的应用程序发送到外部服务器的数据。

您认为最适合执行此过程的应用程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:42:50.350

使用[Wireshark](http://www.wireshark.org/)。它监视通过您的网卡的所有第 3 层数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:20:42.730

除了使用 Wireshark 之外，您还可以对套接字功能执行挂钩，但恐怕我无法为您提供任何合适的参考软件让您这样做。

因此，我建议您调试应用程序，为调用有趣的函数（我的意思是`send()`，`recv()`等等）设置断点，或者编写一个 DLL——除非你不是在 Windows 上运行——一旦你已经将其注入您的运行进程。

# javascript - webgl 和 2d 画布之间的透明度差异

> ID：13104007
> 
> 赞同：0
> 
> 时间：2012-10-27T20:40:43.310
> 
> 标签：javascript, html5-canvas, webgl

我有一个 png，我使用 2d 加载它`canvas`，并作为 webgl 纹理。png 有一些透明部分，在 webgl 中呈现为黑色，在 2d 中呈现为白色`canvas`。（请参阅[此小提琴](http://jsfiddle.net/PErKw/)以进行现场演示。在 Chrome 中，您需要使用标志运行`--disable-web-security`以绕过跨域限制。）

有没有办法为 webgl 纹理设置透明度颜色？那么二维画布呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:34:17.213

您将纹理作为 RGB 加载`createTexture`，因此丢弃了 alpha 通道。将其更改为 RGBA，如下所示

```
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image); 
```

他们看起来一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:52:01.757

为了让画布了解您的 png 透明度，您需要将其保存为 24 位。

> 因为 24 位 PNG 图像包含一个完整的 8 位 alpha 通道。

[完整参考](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images)

# c# - 将客户端-服务器应用程序从 C++ 转换为 C#

> ID：13104009
> 
> 赞同：1
> 
> 时间：2012-10-27T20:41:15.157
> 
> 标签：c#, c++, converter

我有一个有点像信使的客户端-服务器应用程序，该应用程序是使用 C++ 构建的。现在我正在使用 C# 构建一个需要相同功能的应用程序，所以我想知道是否有办法转换从 C++ 到 C# 的代码..

新应用程序将通过 Internet、VPN 或 IPSec 与服务器应用程序通信。仍在设计阶段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:52:38.877

C++ 和 C# 是完全不同的语言。所以两者之间不可能有任何类型的自动转换。

您需要从头开始手动重写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:18:41.810

我在使用[Google](http://www.google.com/about/)搜索时发现了一些转换器，希望对您有所帮助：

[C++ 到 C# 转换器 | SourceForge.net 上的免费开发软件下载](http://sourceforge.net/projects/cxx2cs/)

[C++ 到 C# 转换器](http://tangiblesoftwaresolutions.com/Product_Details/CPlusPlus_to_CSharp_Converter_Details.html)

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T22:11:34.347

对于基本转换，您可以使用[Tangible C++ to C# Converter Code Converter](http://www.tangiblesoftwaresolutions.com/Product_Details/CPlusPlus_to_CSharp_Converter_Details.html)。之后，您应该手动更正生成的 C# 代码。

# ruby-on-rails - css 设计师在 Rails 中进行前端编辑而不使用 Rails 生态系统？

> ID：13104010
> 
> 赞同：2
> 
> 时间：2012-10-27T20:41:18.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, frontend

我的应用程序有一个 Ruby on Rails 后端（使用 git 和 heroku），一个前端设计师（css/jquery）只是问他是否可以在不安装 rails 的情况下处理代码（即从 git 下载代码，然后将其 ftp 到 heroku)。

似乎不可能通过 FTP 连接到 heroku。前端开发人员是否可以通过其他方式与 Rails 交互而无需自己安装 Rails？

谢谢！

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:47:25.343

我将提供一个由实际应用程序生成的静态 html 页面示例以及 css 和 js 文件。唯一缺少的是 ajax 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:47:41.170

如果他只需要编辑文件（css，js，...），他可以从 git 中提取您的代码（我猜在您的情况下由 Heroku 维护）并推回。
但是，我猜他还想看看他的更改是什么样子的，为此他需要运行 rails 服务器。
检查 Heroku 工具带（或类似的工具），它应该很容易安装，并允许您从 heroku 签出代码并运行服务器。我从未使用过它，但我想我听说过它一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T00:54:31.050

他可以在不安装导轨的情况下做到这一点。然而，他需要使用 git 来推送到 heroku，因为它不支持 ftp，部分原因是各种进程与 git 推送相关联。

不过我想明确一点：即使使用 git，我也强烈建议不要这样做。Rails 围绕其视图文件、布局、css、js 等进行了大量处理，并且删除查看实际应用程序所提供的外观的能力会引发问题。

您可能会考虑的一种选择是为设计人员设置 rails 环境，这样他们就不必学习太多，并且可以处于“按一两个按钮”级别。

另一种选择是您基本上成为“主人”并将文件往返于服务器并在本地检查它们。这甚至更加低效，但当然可能适合某些官僚机构或组织。

# java - 为什么在 While(true) 循环中需要额外的代码行？

> ID：13104015
> 
> 赞同：1
> 
> 时间：2012-10-27T20:41:48.567
> 
> 标签：java, event-dispatch-thread

我正在为 CS 课程编写游戏。

有一个 GUI`MyDisplay`是扩展`KeyListener`的，带有一个为实例变量`JFrame`打包的。`JPanel[][]`

`MyGame`有一个私有`enum`调用`GameState`，它是`MENU`, `PLAY`, `QUIT`, 或`PAUSE`. `MyGame`具有`static void main`具有以下构造的方法：

`MyGame`如下：

```
public class MyGame
{
    /* Private instance fields and constructor left out.  
    Constructor initializes a MyDisplay and state = MENU */

    public static void main(String[] args)
    {
        MyGame g = new MyGame();
        while(true)
        {
            gstate = g.getState();
            if(gstate == GameState.PLAY)
                g.play();
            else if(gstate == GameState.PAUSE)
                g.pause();
            else if(gstate == GameState.MENU)
                g.menu();
        }
    }

    /* implementation of MyGame methods */
} 
```

Where `play`, `pause`, 和`menu`调用各种调用`MyDisplay`来绘制新的东西。状态可以改变的唯一方法是用户按下回车键。然后，`MyDisplay`调用一个相应地更改状态的`MyGame`方法。`enterPressed`

当我编译这个时，游戏的行为不正常。当我按下回车键（并打印出要检查的状态）时，我注意到，应该是，MENU 更改为 PLAY。但是即使状态处于 PLAY 状态，`g.play()`也不会被评估（我测试了控制台是否在添加的代码行中打印出测试短语`play()`）。

但真正让我感到困惑的是，当我输入对 的任何调用时`System.out`，例如`System.out.print("");`在 的`while`循环中`main`，一切正常，并按`g.play()`应有的方式被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:51:11.690

您遇到了[线程饥饿](http://docs.oracle.com/javase/tutorial/essential/concurrency/starvelive.html)的情况。因为您的初始状态是`MENU`循环消耗所有 cpu，并且 UI 没有机会消耗您的按键事件。试着在你的时间里睡一小会，比如：`sleep(10)`

[在这里](http://www.java-gaming.org/index.php?topic=24220.0)您会找到更多信息和许多替代方案，甚至 a`Timer`对 CPU 更友好，但有更好的方法，取决于您的游戏逻辑。

# javascript - 如何在可放置和可排序（两种方式）之间拖放元素？

> ID：13104016
> 
> 赞同：0
> 
> 时间：2012-10-27T20:41:57.417
> 
> 标签：javascript, jquery, css, jquery-ui, web

这是我需要的：**能够在可排序和几个可放置的 jquery 小部件之间拖放元素。**

已经实现和工作的内容：在 droppables 之间和同一个 droppable 内拖放元素。

```
<ul class="sortable" style="background-color:#eeeeee;height:200px">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
</ul>

<ul class="droppable" style="background-color:#eeeeee;height:150px">
   <li class="draggable ui-state-default">Drag me down1</li>
   <li class="draggable ui-state-default">Drag me down2</li>

</ul>

<ul class="droppable" style="background-color:#eeeeee;height:150px">
   <li class="draggable ui-state-default">Drag me down3</li>
</ul> 
```

在此处查看完整的[jsfiddle 示例](http://jsfiddle.net/xHDXn/)。

评论 ：

在这里无法使用带有[connectWith](http://jqueryui.com/sortable/#connect-lists)选项的三个可排序对象，因为我希望不对可放置对象中的元素进行排序。在 droppables 中，用户应该能够自由移动元素，没有约束（已经实现，参见 jsfiddle 示例）。

[带有可拖动和可排序的 jquery ui 示例](http://jqueryui.com/draggable/#sortable)也没有帮助，因为它显示了如何通过拖放将元素的副本插入到可排序列表中，而不是如何将可拖动元素移动到排序列表中，反之亦然：如何移动可放置的排序列表元素（我想要的）。

接受的答案是对有效解决方案或编辑过的 js fiddle 的精确描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:56:02.690

您需要向`draggable`中的元素添加一个类，`sortable`以使它们可拖动到`droppable`.

```
<ul class="sortable" style="background-color:#eeeeee;height:200px">
    <li class="draggable ui-state-default">Item 1</li>
    <li class="draggable ui-state-default">Item 2</li>
    <li class="draggable ui-state-default">Item 3</li>
</ul> 
```

[http://jsfiddle.net/uG62q/1/](http://jsfiddle.net/uG62q/1/)

# ruby - 字符串的 Ruby 未定义方法“编码 ”

> ID：13104017
> 
> 赞同：7
> 
> 时间：2012-10-27T20:42:00.607
> 
> 标签：ruby

我正在尝试使[此](http://codepad.org/nh6cAqHT)代码正常工作（ruby 1.8.7）：

```
line = "abc" 
"#{line}☃".encode('utf-8')[0..-2].scan(/\p{Katakana}/) 
```

但它返回`undefined method 'encode' for "abc\342\230\203":String (NoMethodError)`。

你可以在这里运行程序：http: [//codepad.org/nh6cAqHT](http://codepad.org/nh6cAqHT)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T20:51:44.980

您可能正在使用旧版本的 ruby​​。它[在 1.9.3 中可用，](http://ruby-doc.org/core-1.9.3/String.html#method-i-encode) 但[在 1.8.7](http://ruby-doc.org/core-1.8.7/String.html)中不可用，因此请检查您使用的是哪个版本。

```
1.9.3p194 :001 > line = "abc"
 => "abc" 
1.9.3p194 :002 > "#{line}☃".encode('utf-8')[0..-2].scan(/\p{Katakana}/)
 => [] 
```

工作正常。

# asp.net - Asp.Net MVC 3 防止重复记录

> ID：13104018
> 
> 赞同：0
> 
> 时间：2012-10-27T20:42:17.323
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, exception-handling, crud

我是带有实体框架的 Asp.net MVC 3 的新手。

我按照教程制作了一个简单的程序，可以在 SQL 数据库中添加/编辑和删除记录。

我的问题是我必须如何以及在哪里防止重复记录？我的“名字”字段是唯一的。那么，当用户从表单中添加一条记录时，我如何控制这条记录不存在呢？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:22:18.133

您可以编写如下内容来捕获传入数据的已知问题，并且只会在数据遇到不常见问题的情况下出现异常：

```
public class PersonController
{
    public ActionResult Add(PersonModel model)
    {
        if (ModelState.IsValid /* && check whether model represents valid data */)
        {
            try
            {
                // create Person record here (this logic might throw exception)

                return View("AddSuccess");
            }
            catch (Exception exception)
            {
                return View("AddError", exception);
            }
        }
        else
        {
            ModelState.AddModelErrors("", "description of model error found");
        }

        return View();
    }
} 
```

有更好的方法来构建这段代码，使用稍微高级的设计模式，但这应该是一个开始。

通常，您希望避免抛出异常，因为它通常比检查错误输入要慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T05:20:34.687

```
if(ModelState.IsValid)
{
    if(db.A.Any(ac=>ac.Name.Equals(a.Name)))   
    {
          return;
    }
    else
    {
        db.A.Add(a);
        db.SaveChange();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-16T08:04:02.503

本教程完全解释了避免在 asp.net mvc 中插入重复记录，在本教程中，我们使用 jquery 验证插件来限制重复的用户名阅读更多[http://www.dotnetqueries.com/Article/137/prevent-duplicate-values -使用-jquery-validation](http://www.dotnetqueries.com/Article/137/prevent-duplicate-values-using-jquery-validation)

[![在此处输入图像描述](../Images/55e7db2a552bf7712e78f19669275949.png)](https://i.stack.imgur.com/PiHwI.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-27T21:01:55.200

这是一个简单的例子：

//这里将实体标记为已添加

```
Context.Entry(yourPersonEntity).State = System.Data.EntityState.Added; 
```

//这里你返回true或false是插入成功

```
bool isSaved = Context.SaveChanges() > 0; 
```

并取决于 isSaved 是 true 还是 false，你可以做你想做的事。

记录异常是可取的，但我建议你通过覆盖`SaveChanges()`你的上下文来做到这一点。

也不要使用`FirsOrDefault()`，因为它只返回第一个值，并且不保证该值是唯一的。

> 返回序列的第一个元素，如果没有找到元素，则返回默认值。

在执行 top(2) 查询时使用`SingleOrDefault()`，如果有多个结果，则会引发异常。

> 返回序列的唯一元素，如果序列为空，则返回默认值；如果序列中有多个元素，此方法将引发异常。

# python - Facebook API Python - 每月点赞数？

> ID：13104023
> 
> 赞同：0
> 
> 时间：2012-10-27T20:43:30.517
> 
> 标签：python, facebook-graph-api

我正在尝试创建一个可以在 Facebook 上获得用户“每月喜欢”的应用程序。我从未使用过 Facebook API，而且我似乎找不到关于如何做我想做的事情的好教程。

例如，[此页面](http://developers.facebook.com/docs/reference/api/)具有允许我访问用户墙的 JSON 数据的 URL。这很酷，但我如何以编程方式和在应用程序中获取这些信息？我在 heroku 上设置了基本应用程序，我将使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:31:13.027

调用`/me/posts`，浏览分页数据并设置条件以存储基于`created_time`.

尽管如果有人翻阅旧帖子并开始喜欢它们，所有这些都可能会出现偏差。所以这一切都取决于你想如何定义每月的喜欢

[http://developers.facebook.com/docs/reference/api/user/#posts](http://developers.facebook.com/docs/reference/api/user/#posts)

您可以从使用像 facepy 这样的简单库开始

```
from facepy import GraphAPI
graph = GraphAPI('your_access_token_goes_here')
pages = graph.get("me/posts", page=True)
for page in pages:
    // do something with page["data"] like drop the likes in a month array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-31T10:51:56.137

我希望为时不晚，但您可以实现以下功能：

```
from facepy import GraphAPI
graph = GraphAPI('your_access_token_goes_here')
pages = graph.get("me/posts", page=True)
getLikes(pages['posts']['data'])
def getLikes(this):
"""
 Params- Takes in a page full of posts in the format- Eg. pages['posts']['data']
 Returns- Total number of likes for each post and created_time of each post

"""
    tli = []
    ti = []
    for i in this:
        r = graph.get("/"+i['id']+"/likes?limit=200")
        li = []
        ti.append(i['created_time'])
        for j in r['data']:  #goes into each posts to get list of likes
            li.append(j['name'])        
        tli.append(len(li))
    return tli,ti       ## this returns the total no of likes and corresponding created_time 
```

# c++ - 在同一进程中使用 boost::asio 和本机套接字调用

> ID：13104024
> 
> 赞同：0
> 
> 时间：2012-10-27T20:43:34.557
> 
> 标签：c++, sockets, boost, boost-asio

在同一进程（不同线程）中使用 Boost::asio 和像 accept() （两个 TCP 套接字）这样的本机调用是否存在任何已知问题。我在 Debian 上并使用 C++ 语言。我的观察是 accept() 行为不一致。

在运行进程的特定实例上，客户端能够顺利连接。任意数量的客户端都可以顺利连接。

在运行该进程的另一个实例上，当客户端连接时，接受调用只是失败说“无效参数”。当套接字未正确配置为侦听套接字时，应该会出现这样的错误。一旦出现此错误，所有尝试连接的客户端都会出现相同的错误。唯一的解决方法是再次运行该过程并希望下次它可以正常工作。

更多观察结果：- - 当为某些文件打开更多描述符时，问题往往会消失 - 如果我删除 boost::asio 代码，accept 工作得很好

限制：无法共享我的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:10:28.210

将 Boost.Asio 与系统调用（例如）一起使用没有问题`accept()`，我在几个项目中都没有问题。根据您的描述，这对我来说听起来像是未定义的行为。我猜你是在泄漏描述符、双倍`close()`描述符，或者在适当的地方不检查返回码。如果您无法发布代码，请使用 valgrind 之类的工具来帮助您进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:16:06.967

我产生了两个不同的线程。之后就没有问题了。

# ember.js - 使用 EmberSJ 在不挂起浏览器的情况下更新大型数据集

> ID：13104030
> 
> 赞同：0
> 
> 时间：2012-10-27T20:45:21.997
> 
> 标签：ember.js

我正在使用 EmberJS 向用户展示一个表格。我目前用大约 60 行和 25 列测试它，结果不是很好。数据是一个包含 24 个指标的人员列表，用户可以选中和取消选中多个复选框来更改指标。
我使用绑定到 60 行的 ArrayController 并在任何复选框发生更改时更新它们，ArrayController 设置了 sortProperties 以选择对表进行排序的列。

1.  当更改不会导致行重新排序时，更新整个表大约需要 2-3 秒。
2.  当更改导致对行重新排序时，最多可能需要 4 秒。

有没有办法让更新更流畅？即使它看起来更流畅，而更新仍然需要 3 秒？

我使用 Ember.beginPropertyChanges 和 endPropertyChanges。

我愿意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:55:27.417

更新到最新版本可以提高排序性能。

# android - Eclipse 无法再呈现我的 android xml 布局

> ID：13104031
> 
> 赞同：0
> 
> 时间：2012-10-27T20:45:26.947
> 
> 标签：android, eclipse, graphical-layout-editor

![eclipse android图形布局失败](../Images/6dc8748497742c9a4b288c7a0f9b6325.png)

过去，我的 Eclipse Android 图形布局编辑器可以渲染我为我的应用程序制作的布局。但是我只添加了一个布局以包含第一排按钮，现在它根本不再呈现。

没有 lint 错误。logcat 或错误控制台中没有报告错误。

我做了一个清洁和重建。项目中的任何地方都没有错误。

我提高了 eclipse.ini 中的设置以允许更多的内存可用性（系统是 64 位并具有 4G 内存）。

关闭并重新打开 Eclipsed。关闭机器，重新启动。

这一切都没有改变。

布局编辑器处理太多了吗？还是有其他问题？

谢谢

这是我要实现的目标的图：

![小样](../Images/8d4a484c35edf6d789b0ff81dce2c5b5.png)

这是我的布局xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainWindowLayout"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:id="@+id/topButtonsLayout"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:orientation="horizontal" >
        <ImageButton
            android:id="@+id/ideaButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/blah"
            android:src="@drawable/ic_idea" />
        <ImageButton
            android:id="@+id/soundsLikeButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/blah"
            android:src="@drawable/ic_soundslike" />
    </LinearLayout>
    <LinearLayout
        android:id="@+id/chooserLayout"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:orientation="horizontal" >
        <LinearLayout
            android:id="@+id/leftThingLayout"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:orientation="vertical" >
            <EditText
                android:id="@+id/ThisTextBox"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="2"
                android:ems="10"
                android:inputType="textMultiLine"
                android:text="@string/this_thing" />
            <LinearLayout
                android:id="@+id/leftChooserLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
                <ImageButton
                    android:id="@+id/preferLeft"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_likeit" />
                <ImageButton
                    android:id="@+id/defineLeft"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_define" />
                <ImageButton
                    android:id="@+id/notLeft"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                   android:contentDescription="@string/blah"
                    android:src="@drawable/ic_dontlike" />
            </LinearLayout>
        </LinearLayout>
        <LinearLayout
            android:id="@+id/rightThingLayout"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:orientation="vertical" >
            <EditText
                android:id="@+id/ThatTextBox"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="2"
                android:ems="10"
                android:inputType="textMultiLine"
                android:text="@string/that_thing" />
            <LinearLayout
                android:id="@+id/rightChooserLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
                <ImageButton
                    android:id="@+id/preferRight"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_likeit" />
                <ImageButton
                    android:id="@+id/defineRight"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_define" />
                <ImageButton
                    android:id="@+id/notRight"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_dontlike" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</LinearLayout>· 
```

谢谢你的任何线索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:57:57.957

您在那里的几个地方有 android:layout_height="0dp" 。这使得你的观点基本上是不可见的。如果您将 0dp 更改为 match_parent 它应该可以工作。

（使用 0dp 的正确时间是当您使用*权*重在孩子之间进行按比例分配时；然后 0dp 基本上意味着权重将共享所有可用空间，而不是剩余的内在大小）。

我刚刚上传了一个修复程序来解决这样的 lint flag 问题，希望它在未来变得更加明显： [https ://android-review.googlesource.com/#/c/45683/](https://android-review.googlesource.com/#/c/45683/)

-- 托尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:51:20.010

谢谢托尔！

![图形布局编辑器现在喜欢它](../Images/8043ae1add494d7077ee8ac6005e397c.png)

更正了 xml - 删除了 0dp 的东西......仍然到处使用线性布局......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainWindowLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/topButtonsLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ideaButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/blah"
            android:src="@drawable/ic_idea" />
        <ImageButton
            android:id="@+id/soundsLikeButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/blah"
            android:src="@drawable/ic_soundslike" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/chooserLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/leftThingLayout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="0.5"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/ThisTextBox"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="0.75"
                android:ems="10"
                android:inputType="textMultiLine"
                android:text="@string/this_thing" />

            <LinearLayout
                android:id="@+id/leftChooserLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.25" >

                <ImageButton
                    android:id="@+id/preferLeft"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_likeit" />

                <ImageButton
                    android:id="@+id/defineLeft"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_define" />

                <ImageButton
                    android:id="@+id/notLeft"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_dontlike" />

            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/rightThingLayout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="0.5"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/ThatTextBox"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="0.75"
                android:ems="10"
                android:inputType="textMultiLine"
                android:text="@string/that_thing" />

            <LinearLayout
                android:id="@+id/rightChooserLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.25" >

                <ImageButton
                    android:id="@+id/preferRight"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_likeit" />

                <ImageButton
                    android:id="@+id/defineRight"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_define" />

                <ImageButton
                    android:id="@+id/notRight"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3"
                    android:contentDescription="@string/blah"
                    android:src="@drawable/ic_dontlike" />

            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

# iphone - 如何为 cydia 编译 xcode 项目

> ID：13104032
> 
> 赞同：1
> 
> 时间：2012-10-27T20:45:28.707
> 
> 标签：iphone, xcode, cydia

我设计了一个我希望通过 cydia 发布的应用程序。

将我的 xcode 项目编译为可用于 cydia 的二进制文件的简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:59:52.670

查看此链接，它显示了有关 cydia 提交的编译方法

[http://thebigboss.org/hosting-repository-cydia/submit-your-app/compile-for-cydia-submission](http://thebigboss.org/hosting-repository-cydia/submit-your-app/compile-for-cydia-submission)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:56:30.143

您需要创建一个 repo 或将它们发送到 MMi 的集合。

进行回购：[此处](http://www.saurik.com/id/7)或[此处](http://modmyi.com/forums/cydia-support/402221-how-make-cydia-repository.html)

上传到 modmyrepo：在 modmyi.com/mmi/

# ruby - 如何使用 RubyXL 创建日期格式的单元格？

> ID：13104034
> 
> 赞同：6
> 
> 时间：2012-10-27T20:45:38.073
> 
> 标签：ruby, excel, openxml, rubyxl

我正在使用 RubyXL 动态生成包含一些日期的电子表格文件。文档有点稀疏，所以我一直在查看源代码，看来该库仅对您调用时进行特殊处理`Date`，所以这就是我正在做的事情：`DateTime``change_contents`

```
cell = sheet.add_cell_obj RubyXL::Cell.new(sheet, row_index, col_index)
cell.change_contents(Time.now.to_datetime) 
```

当我以这种方式创建电子表格时，Excel 不会将这些单元格格式化为日期。我猜我可能需要设置其他字段`cell.datatype`，但我不确定。或者，也许我在叫错树。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-02T21:14:06.083

见[https://github.com/weshatheleopard/rubyXL/issues/210](https://github.com/weshatheleopard/rubyXL/issues/210)

```
c = workbook[0].add_cell(0,0)
c.set_number_format('m/d/yy')
c.change_contents(Date.today) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-08T19:54:06.463

在最终分叉库并尝试自己修复它之后，我认为 RubyXL 是一团无法修复的烂摊子。幸运的是，在完全陷入疯狂之前，我发现了**[Axlsx](https://github.com/randym/axlsx)**，这是一个写得更好、积极支持的 Ruby gem。**抛弃 RubyXL 并改用 Axlsx。**

# c++ - 如何在另一个线程中暂停/中断 boost::thread？

> ID：13104040
> 
> 赞同：1
> 
> 时间：2012-10-27T20:46:17.887
> 
> 标签：c++, multithreading, boost, interrupt

```
void workerFunc()  //first thread
{  
    for (int x=0;x<30;x++) //count up to 29
    {
        cout << x << endl;
        Sleep(1000); //one sec delay
    }
}    

void test()   //second thread
{
    for (int y=30;y<99;y++)  //count up to 98
    {
        cout <<'\t'<< y << endl;        
        Sleep (1000); //delay one sec
    }
}

int main(int argc, char* argv[])   
{  
    cout << "Main started " << endl; 
    boost::thread workerThread(workerFunc);    //start the 1st thread
    boost::thread t1(test); //start the second thread
    cin.get();     
    return 0;  
} 
```

嗨，当`test()`y=35 的线程时，我想暂停/中断线程 `workerFunc()`内的线程`test()`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:27:27.027

您可以使用`boost::thread::interrupt`. 当您的目标线程准备好被中断时，它必须定期调用其中一个中[断点函数。](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/thread_management.html#interruption_points)如果另一个线程调用`boost::thread::interrupt`，这个函数将抛出`boost::thread_interrupted`异常。如果您的线程处于状态，则无法中断，但您需要调用可以被中断的函数之一，只需使用[class](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/thread_management.html#thread.thread_management.this_thread.disable_interruption)`boost::thread::interrupt`暂时禁用中断即可。[`disable_interruption`](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/thread_management.html#thread.thread_management.this_thread.disable_interruption)

在您的情况下，只需将`Sleep`呼叫替换为[`boost::this_thread::sleep`](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/thread_management.html#thread.thread_management.this_thread.sleep)呼叫。

# javascript - 如何根据下拉框 #1 的输入更改下拉框 #2？

> ID：13104046
> 
> 赞同：3
> 
> 时间：2012-10-27T20:46:54.367
> 
> 标签：javascript, forms

我有两个下拉菜单。

```
<form action="form.php" class="inputlabels" enctype="multipart/form-data" id="new_asset" method="post">
    <select id="asset_id" name="asset[asset_id]">
        <option value="1">Trailer 1 - Spanish</option>
        <option value="2">Trailer 1 - English</option>
        <option value="3">Trailer 1 - French</option>
        <option value="4">Trailer 1 - German</option>
        <option value="5">Trailer 2 - Spanish</option>
        <option value="6">Trailer 2 - English</option>
        <option value="7">Trailer 2 - French</option>
        <option value="8">Trailer 2 - German</option>
    </select>
<br />
    <select id="country_id" name="material[country_id]">
        <option value="11">England</option>
        <option value="12">Spain</option>
        <option value="13">France</option>
        <option value="14">Germany</option>
    </select>
</form> 
```

我希望下拉菜单 2 根据菜单 1 的值自动更改。我需要能够声明当用户选择“预告片 1 - 西班牙文”或“预告片 2 - 西班牙文”时，国家自动选择为西班牙。这个想法是它使用户不必选择国家。

任何帮助我指出正确方向的帮助都将非常有价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:03:03.633

这应该可以满足您的需要（也可以处理其他语言）：

**HTML**

```
<select id="asset_id" name="asset[asset_id]">
    <option value=""> - Select Trailer - </option>
    <option value="1">Trailer 1 - Spanish</option>
    <option value="2">Trailer 1 - English</option>
    <option value="3">Trailer 1 - French</option>
    <option value="4">Trailer 1 - German</option>
    <option value="5">Trailer 2 - Spanish</option>
    <option value="6">Trailer 2 - English</option>
    <option value="7">Trailer 2 - French</option>
    <option value="8">Trailer 2 - German</option>
</select>
<br />
<select id="country_id" name="material[country_id]">
    <option value=""> - Select Country - </option>
    <option value="11">England</option>
    <option value="12">Spain</option>
    <option value="13">France</option>
    <option value="14">Germany</option>
</select> 
```

**JavaScript**

```
var ddl1 = document.getElementById( 'asset_id' );

function updateCountry ( e ) {

    var asset = this.options[ this.selectedIndex ].value,
        countryDDL= document.getElementById( 'country_id' ),
        country, i = countryDDL.options.length - 1;

    switch ( asset ) {
        case "1":
            country = 12;
            break;
        case "2":
            country = 11;
            break;
        case "3":
            country = 13;
            break;
        case "4":
            country = 14;
            break;
        case "5":
            country = 12;
            break;
        case "6":
            country = 11;
            break;
        case "7":
            country = 13;
            break;
        case "8":
            country = 14;
            break;
    }

    for ( ; i > -1 ; i-- ) {

        if ( countryDDL.options[i].value == country ) {
            countryDDL.options[i].selected = true;
            break;
        }

    }

}

ddl1.onchange = updateCountry; 
```

小提琴：http: [//jsfiddle.net/kboucher/uVMZF/](http://jsfiddle.net/kboucher/uVMZF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:59:42.297

假设您的下拉列表是动态构建的，我会让您的服务器为您生成一些 javascript - PHP 代码可以映射它们，因此输出如下所示：

```
var _languageMap = {
    { 1: 12 },
    { 2: 11 },
    ...
    { 8: 14 }
}; 
```

然后在更改第一个下拉列表时设置一个事件处理程序，并通过从语言映射中查找值来设置第二个。如果您使用的是 jQuery，请尝试以下操作：

```
jQuery("#asset_id").change(function() {
    var trailerId = jQuery(this).val();
    var languageId = _languageMap[trailerId];
    jQuery("#country_id").val(languageId);
}); 
```

如果你不使用 jQuery，你可以用普通的 javascript 做同样的事情——你只需要查找下拉列表的事件处理程序——我只是不记得如何用老式的方式做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:12:07.877

## [JS小提琴](http://jsfiddle.net/CCre6/)

标记

```
<select id="asset_id" name="asset[asset_id]" onchange="selectCountry()"> 
```

Javascript

```
function selectCountry()
{
   var asset = document.getElementById('asset_id');
   var assetText = asset.options[asset.selectedIndex].text;

    var country_id = document.getElementById('country_id');

    if(assetText.toLowerCase().indexOf('spanish') > -1)
       country_id.value = 12;  //spain
    else if(assetText.toLowerCase().indexOf('german') > -1)
       country_id.value = 14;  //germany
    else if(assetText.toLowerCase().indexOf('english') > -1)
       country_id.value = 11;  //england
    else if(assetText.toLowerCase().indexOf('french') > -1)
       country_id.value = 13;  //france
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T21:33:34.523

如果它们以这种方式相关，那么拥有第二个下拉菜单并没有多大意义，除非用户可以选择不匹配的预告片和国家/地区的组合。为什么不将您的第一个控件设为下拉菜单，在选项中添加 data-* 属性并为用户填写标签。

因此，您的选项将如下所示：

```
<option id="optT1Span" value="1" data-country="Spain">Trailer 1 - Spanish</option> 
```

如果您需要第二个选项中的值，您可以设置这些国家/值组合的全局数组查找。

显然，我不知道你的设计背后的想法或你的计划，但如果选择必须匹配，那么我看不出赋予选择国家的能力有什么意义。按您的国家/地区过滤然后根据该选择隐藏/显示选项几乎比您计划的更有意义。我觉得你总是尽可能多地删除用户交互的途径，如果它们不是必要的。

# java - 动画结束后如何开始新的活动？

> ID：13104051
> 
> 赞同：2
> 
> 时间：2012-10-27T20:47:46.830
> 
> 标签：java, android, animation

我对 Android 很陌生，我找不到关于如何在动画结束时开始新活动的线程。

这是我的代码：

```
public class Intro extends Activity {

    AnimationDrawable anim = new AnimationDrawable();

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.intro);
        ImageView iv =(ImageView) findViewById(R.id.imageView1);          
        iv.setBackgroundResource(R.anim.animation);    
        anim = (AnimationDrawable) iv.getBackground(); 

        iv.post(new Runnable(){    
            public void run(){    
                anim.start();        
        }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:46:26.383

据我所知，没有回调机制来确定 an 何时`AnimationDrawable`完成迭代。你可以做的是查询帧数和每帧的延迟。总结一下，并以该持续时间发布延迟的帖子。在该回调中，您可以开始您的第二个活动。

请注意，以您的方式启动动画有点危险。[文档](http://developer.android.com/guide/topics/graphics/drawable-animation.html)说：

> 需要注意的是，在 Activity 的 onCreate() 方法期间不能调用 AnimationDrawable 上调用的 start() 方法，因为 AnimationDrawable 尚未完全附加到窗口。如果您想立即播放动画而不需要交互，那么您可能希望从 Activity 中的 onWindowFocusChanged() 方法调用它，当 Android 使您的窗口成为焦点时，该方法将被调用。

# arrays - 如何在matlab中从单元格数组转换

> ID：13104052
> 
> 赞同：0
> 
> 时间：2012-10-27T20:47:55.843
> 
> 标签：arrays, matlab, cells

我有 2 个单元格函数（由某些代码产生）如下：

```
p = 
      'GO:0008150'
      'GO:0016740'
      'GO:0016787'
      'GO:0008150'
      'GO:0016740'
      'GO:0016740'
      'GO:0016787'
      'GO:0016787'
      'GO:0016787'
      'GO:0006810'
      'GO:0006412'
      'GO:0004672'
      'GO:0008150'
      'GO:0008150'
      'GO:0006810'
      'GO:0016192'
      'GO:0006810'
      'GO:0005215'

c = 
      'GO:0016740'
      'GO:0016787'
      'GO:0006810'
      'GO:0006412'
      'GO:0004672'
      'GO:0016779'
      'GO:0004386'
      'GO:0003774'
      'GO:0016298'
      'GO:0016192'
      'GO:0005215'
      'GO:0030533'
      'GO:0016787'
      'GO:0006810'
      'GO:0006412'
      'GO:0003774'
      'GO:0005215'
      'GO:0030533' 
```

我有一个代码，它适用于单个值（数字或字符），但它不适用于上述单元格数组，并且出现以下错误消息：

> `??? Undefined function or method 'eq' for input arguments of type 'cell'.`

如果有关于如何从单元格函数转换为任何可以接受以下代码的任何想法：

```
level1_root=setdiff(p,c) % to find the cells from p not in c
for i=1:length(p)
    a=[p(i),c(i)];
    if a(1,:)==level1_root
        level=a(2);
        level=[level a(2)]
    else
        end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:26:56.763

在您的代码中，`a`是一个包含两个字符串`level1_root`的元胞数组，而是一个包含一个字符串的元胞数组。您不能使用 比较字符串元胞数组`==`。你应该宁愿一个`strcmp`. 例如，像这样：

```
 level1_root=setdiff(p,c) % to find the cells from p not in c
  for i=1:length(p)
      a=[p(i),c(i)];
      if strcmp(a{1}, level1_root{:})
          level=a(2);
          level=[level a(2)]
      else
      end
  end 
```

但是，我不确定上面的代码是否适合您。它假设`level1_root`只有 1 个元素。示例数组中就是这种情况，但一般情况下可能并非如此。您将不得不更改代码以满足您的需要。

# android - 将用户引导至移动网站的手机应用程序

> ID：13104053
> 
> 赞同：0
> 
> 时间：2012-10-27T20:48:01.987
> 
> 标签：android, iphone, mobile

我正在尝试制作一个基本上可以直接从我的移动网站下载的应用程序。老实说，我只想制作一些东西，以便用户可以将应用程序下载到他们的手机上，当他们点击它时，他们将被定向到我的移动网站。所以基本上我只需要设计按钮并制作它，以便可以下载并安装在手机上。

我在网上搜索了如何执行此操作，但没有人具体解释如何构建它。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:57:11.420

Android 对我有用的是通过电子邮件发送 APK 文件。用户可以在手机上打开邮件。在 Gmail 中，您会看到安装按钮，当然可以使用它来安装应用程序。

我用它在市场之外分发我的应用程序。

# java - 是否可以将 Maven 阶段添加到 IntelliJ？

> ID：13104055
> 
> 赞同：5
> 
> 时间：2012-10-27T20:48:50.797
> 
> 标签：java, maven, intellij-idea

是否可以在 IntelliJ 中添加 Maven 提供的“集成测试”阶段？或者这没有任何意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:06:24.437

如果您`pom.xml`在其构建配置中包含 Failsafe 插件（请参阅[Failsafe 使用页面](http://maven.apache.org/plugins/maven-failsafe-plugin/usage.html)），那么在 IntelliJ的**Maven 项目视图中，您应该会看到****[ProjectName] -> Plugins -> failsafe -> failsafe:integration-test**。双击它来运行`integration-test`目标（注意它是一个目标，而不是一个阶段）或右键单击它并单击“创建...”为集成测试目标添加一个 IntelliJ 运行配置。

# html - 嗅探 Flash 聊天的实时 http 标头

> ID：13104056
> 
> 赞同：0
> 
> 时间：2012-10-27T20:48:56.117
> 
> 标签：html, http, firefox, web

我正在尝试检查 flash 的 http 标头，我尝试了 flash 的 firebug 插件，但它并没有全部显示。

例如，在下面的聊天中，有很多聊天交流正在进行，但萤火虫无法捕捉到它。这是什么问题？

```
http://host10001.123flashchat.com/joinafrica/123flashchat.swf?init_host=host10001.123flashchat.com&init_port=21127&init_room=733&init_host_s=host10002.123flashchat.com&init_port_s=443&init_group=joinafrica 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:08:01.040

试试像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的代理。这应该会捕获所有流量。

# java - 输出可由用户修改的数据驱动生成的图形

> ID：13104058
> 
> 赞同：1
> 
> 时间：2012-10-27T20:49:11.760
> 
> 标签：java, php, jquery, graphic

我正在尝试开发一个系统，客户可以输入一系列与植物相关的数据，然后可以根据数据库查询这些数据以找到合适的植物列表。

然后这些植物需要以图形输出的形式显示，将高大的植物放在花坛的后面，小植物放在花坛的前面。我已经在脑海中设定了执行此操作的算法，但我向您提出的问题是使用该算法的最佳软件是什么：

1) 允许用户输入数据

2) 查询数据库以返回合适的结果

3) 将数据输出到系统化的图形中（简单的矩形，点代表植物）

最后一步是“如果可能”，我还没有完全考虑过：

4) 如果需要，允许用户使用鼠标移动这些点以重新定位

--

我知道 PHP 可以生成图形输出，我假设您可以将其与一些 jQuery 混合，这将允许用户移动点。这会很好地工作还是其他软件（如 Java 或*_*）会产生更好的结果？

如果这在 Stack 的错误部分，谢谢并道歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:21:47.420

你的问题有点含糊。直接回答这个问题，如今任何通用编程语言都可以使用正确的库来做你想做的事——无论是 C/++、Java、PHP+Javascript、Python、Ruby 以及数百万其他语言，尤其是 Java，您可能希望使用`swing`GUI 工具包。

如果您确实只了解 PHP+Javascript，那么您的项目最好坚持您所知道的。但是，如果您认为这是一个学习机会，而不是现在需要完成的项目，那么您可以在此过程中花时间学习一门新语言。

至于学什么语言，显然每个人都有不同的看法，但一般来说，更高级别的语言更快地原型化。

**编辑**

但是，如果您需要将其用于网站，则需要使用基于 Web 的东西 - 也就是说，您必须有两个程序，一个在服务器端运行，另一个在客户端（浏览器）中运行。在服务器端，您可以很好地使用 PHP、JSP（JavaServer Pages）、Python 或 Ruby。在客户端，您将受限于 Javascript+DOM（可能是 HTML5）、Java 小程序或基于 Flash 的东西。

# php - 手动将 php 中字符串的浮点数和整数转换相乘会产生不同的结果

> ID：13104062
> 
> 赞同：3
> 
> 时间：2012-10-27T20:49:40.877
> 
> 标签：php, casting, floating-point, int, rounding

我用我正在工作的代码解决了这个问题，但这让我很烦恼。

我知道在某些情况下浮点只会与舍入混淆。我知道 php 使用类型推断，并且当您在字符串之间进行算术操作时会自动转换（我的意思是，在这种特殊情况下，在我的示例中）。

'手动编写代码'做同样的事情，160.2 * 50的结果是8010，当转换为整数结果时不需要四舍五入。只是承认。如果有人知道*为什么*会发生这种情况，它会启发我。

```
echo "160.2" * "50"; // gives 8010
echo (int) ((float)"160.2" * (int)"50"); // Gives 8009 
```

我解决了这个问题，我的代码现在可以工作了；这只是为了好玩。我想知道*为什么以及如何，一步一步地 php 搞砸了这个*。php在哪里失去分辨率？在哪一步？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:00:18.377

PHP 表示`(float)"160.2"`为`160.19999999995343387126...`内部的二进制等价物。这将导致乘法结果略小于 8010，后者在转换回 int 时会导致截断并导致 8009

二进制的 160.2 无法完美表示。结果是一个循环小数，

```
10100000.00110011001100110011001100110011... 
```

所以你不能指望它用浮点数准确表示。

(**[转换器](http://www.mathsisfun.com/binary-decimal-hexadecimal-converter.html)**)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:59:15.557

> php在哪里失去分辨率？在哪一步？

当您将结果转换为 int. 原来，结果是浮点数，如果你在 php 设置中增加精度，你会看到它类似于`8009.9999999999990905052982270718`，将正数转换为 int 与调用基本相同`floor()`，这就是它打印的原因`8009`。

# java - HiQ 应用程序中的变量范围问题

> ID：13104064
> 
> 赞同：0
> 
> 时间：2012-10-27T20:49:57.647
> 
> 标签：java, scope

我认为我的 java 程序存在全局变量范围问题。这是 HiQ 游戏，我有一个棋盘对象来存储棋盘的状态，1 是钉子，0 是空洞，-1 是无效位置。游戏为可能的移动创建 32 个棋盘并构建可能的移动，然后进入深度优先搜索以找到到达 3,3 孔中的一个钉子的路径。

问题是当我移动并尝试更改板 2 并留下所有钉子和 1 个孔的板 1 时，程序不仅更改板 2 以进行跳跃，而且还修改板 1。另外，我的移动列表也被覆盖了。

请帮助我创建我的板阵列，这样当我处理移动时它不会覆盖以前的板。我不知道我在这里做错了什么。谢谢！

板级：

```
import java.util.LinkedList;
import java.util.Queue;

public class Board {

String PossibleMoves;

int[][] GraphState2;
Queue<String> qe = new LinkedList<String>();

public int leftDir = 0;
public int rightDir = 1;
public int upDir = 2;
public int downDir;

public static final int MAXROW=7;
public static final int MAXCOL=7;

Board(){
    GraphState2 = new int[6][6];

}

public void setMove(String inMove){
    qe.add(inMove);     
}

public String getMove(){
    if (qe.size() >= 1){
        return qe.poll();
    }
    return "";
}

public void doMove(int row, int col, int toRow, int toCol, int removeRow, int removeCol){
    GraphState2[row][col] = 0; //source peg
    GraphState2[toRow][toCol] = 1; //destination
    GraphState2[removeRow][removeCol] = 0; //jumped peg
}

public Boolean checkMove(){
    if (qe.size() >= 1){
        return true;
    }
    return false;
}

public void setBoard(int inBoard[][]){
    GraphState2 = inBoard;
}

public int[][] getBoard(){
    return GraphState2;
}

public Boolean findMove(int dir, int row, int col){
    int row1, col1, row2, col2;
    if (dir == leftDir){
        row1 = row;
        row2 = row;
        col1 = col - 1;
        col2 = col - 2;
        if (col2 < 0) { return false; } // drop off board
        if (GraphState2[row][col2] == 1) { return false; } // peg in destination
        if (GraphState2[row][col1] == 0) { return false; } // no peg to jump
        if (GraphState2[row][col2] == -1) {return false; } // invalid position
        return true; // all checks are green, go go go
    }
    else if (dir == rightDir){
        row1 = row;
        row2 = row;
        col1 = col + 1;
        col2 = col + 2;
        if (col2 >= MAXCOL) { return false; } // drop off board
        if (GraphState2[row][col2] == 1) { return false; } // peg in destination
        if (GraphState2[row][col1] == 0) { return false; } // no peg to jump
        if (GraphState2[row][col2] == -1) { return false; } // invalid position
        return true; // all checks are green, go go go
    }
    else if (dir == upDir){
        row1 = row - 1;
        row2 = row - 2;
        col1 = col;
        col2 = col;            
        if (row2 < 0) { return false; } // drop off board
        if (GraphState2[row2][col] == 1) { return false; } // peg in destination
        if (GraphState2[row1][col] == 0) { return false; } // no peg to jump
        if (GraphState2[row2][col] == -1) { return false; } // invalid position
        return true; // all checks are green, go go go
    }
    else{                   //downDir
        row1 = row + 1;
        row2 = row + 2;
        col1 = col;
        col2 = col;            
        if (row2 >= MAXROW) { return false; } // drop off board
        if (GraphState2[row2][col] == 1) { return false; } // peg in destination
        if (GraphState2[row1][col] == 0) { return false; } // no peg to jump
        if (GraphState2[row2][col] == -1) { return false; } // invalid position
        return true; // all checks are green, go go go
    }

}

} 
```

HiQ 主程序：

```
import java.util.*;

public class HiQDFS {

/**
 * @param args
 */
public static void main(String[] args) {
    int[][] GraphState = new int[7][7];
    String currentMove = "";

    GraphState[0][0] = -1;
    GraphState[0][1] = -1;
    GraphState[0][2] = 1;
    GraphState[0][3] = 1;
    GraphState[0][4] = 1;
    GraphState[0][5] = -1;
    GraphState[0][6] = -1;

    GraphState[1][0] = -1;
    GraphState[1][1] = -1;
    GraphState[1][2] = 1;
    GraphState[1][3] = 1;
    GraphState[1][4] = 1;
    GraphState[1][5] = -1;
    GraphState[1][6] = -1;

    GraphState[2][0] = 1;
    GraphState[2][1] = 1;
    GraphState[2][2] = 1;
    GraphState[2][3] = 1;
    GraphState[2][4] = 1;
    GraphState[2][5] = 1;
    GraphState[2][6] = 1;

    GraphState[3][0] = 1;
    GraphState[3][1] = 1;
    GraphState[3][2] = 1;
    GraphState[3][3] = 0;
    GraphState[3][4] = 1;
    GraphState[3][5] = 1;
    GraphState[3][6] = 1;

    GraphState[4][0] = 1;
    GraphState[4][1] = 1;
    GraphState[4][2] = 1;
    GraphState[4][3] = 1;
    GraphState[4][4] = 1;
    GraphState[4][5] = 1;
    GraphState[4][6] = 1;

    GraphState[5][0] = -1;
    GraphState[5][1] = -1;
    GraphState[5][2] = 1;
    GraphState[5][3] = 1;
    GraphState[5][4] = 1;
    GraphState[5][5] = -1;
    GraphState[5][6] = -1;

    GraphState[6][0] = -1;
    GraphState[6][1] = -1;
    GraphState[6][2] = 1;
    GraphState[6][3] = 1;
    GraphState[6][4] = 1;
    GraphState[6][5] = -1;
    GraphState[6][6] = -1;

    String StartingBoard = "";
    for (int i = 0; i < 7; i++){
        for (int j = 0; j < 7; j++){
            StartingBoard = StartingBoard + " " + GraphState[i][j];

        }
        StartingBoard = StartingBoard + "\n";

    }
    System.out.println(StartingBoard);

    ArrayList<Board> board = new ArrayList<Board>();
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());
    board.add(new Board());

    Board currentBoard;
    currentBoard = board.get(0);

    currentBoard.setBoard(GraphState);

    GraphState = currentBoard.getBoard();

    boolean flag = false;
    int counter = 0;
    int row, col, toRow, toCol, removeRow, removeCol;
    for (int depth = 0; depth < 32; depth++)
    {
        currentBoard = board.get(depth);

        counter++;

        System.out.println(depth);

        if (flag == false){
        for (int i = 0; i < 7; i++){
            for (int j = 0; j < 7; j++){
                if (GraphState[i][j] == 1){
                    if (currentBoard.findMove(0, i, j) == true){ //left move
                        currentMove = Integer.toString(i) + "," + Integer.toString(j) + " " + Integer.toString(i) + "," + Integer.toString(j-2) + " " +  Integer.toString(i) + "," + Integer.toString(j-1);
                        currentBoard.setMove(currentMove);
                    }
                    if (currentBoard.findMove(1, i, j) == true){ //right move
                        currentMove = Integer.toString(i) + "," + Integer.toString(j) + " " + Integer.toString(i) + "," + Integer.toString(j+2) + " " +  Integer.toString(i) + "," + Integer.toString(j+1);
                        currentBoard.setMove(currentMove);
                    }
                    if (currentBoard.findMove(2, i, j) == true){ //up move
                        currentMove = Integer.toString(i) + "," + Integer.toString(j) + " " + Integer.toString(i-2) + "," + Integer.toString(j) + " " +  Integer.toString(i-1) + "," + Integer.toString(j);
                        currentBoard.setMove(currentMove);
                    }
                    if (currentBoard.findMove(3, i, j) == true){ //down move
                        currentMove = Integer.toString(i) + "," + Integer.toString(j) + " " + Integer.toString(i+2) + "," + Integer.toString(j) + " " +  Integer.toString(i+1) + "," + Integer.toString(j);
                        currentBoard.setMove(currentMove);
                    }                   
                }               
            }       
            }//end of load moves
        }//end of if
        if (currentBoard.checkMove()) {
            currentMove = currentBoard.getMove();
            flag = false;
            row = Integer.parseInt(currentMove.substring(0, 1));
            col = Integer.parseInt(currentMove.substring(2, 3));
            toRow = Integer.parseInt(currentMove.substring(4, 5));
            toCol = Integer.parseInt(currentMove.substring(6, 7));
            removeRow = Integer.parseInt(currentMove.substring(8,9));
            removeCol = Integer.parseInt(currentMove.substring(10,11));

            Board nextBoard = board.get(depth+1);
            nextBoard.setBoard(currentBoard.getBoard());
            nextBoard.doMove(row, col, toRow, toCol, removeRow, removeCol);
            } else {

            depth--;
            depth--;
            flag = true;
            }
        GraphState = currentBoard.getBoard();
        if (depth == 32 && GraphState[3][3] == 1) {
            break;
        }
        }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:21:06.693

修好了 在 Board 类中将我的 setBoard 命令更改为：

```
public void setBoard(int inBoard[][]){
        //GraphState = inBoard;
        for(int i=0; i<inBoard.length; i++)
              for(int j=0; j<inBoard[i].length; j++)
                GraphState[i][j]=inBoard[i][j];
} 
```

通过循环遍历所有元素，它会创建 2d 数组的副本而不是引用。在我用 vb.net 或 c# 编写的其他应用程序中之前没有遇到过这种情况，但它们通常使用一维数组。不要在那些需要任何类型图表的程序中做太多事情

# jquery - 使用 Jquery 更改动态生成元素的类

> ID：13104065
> 
> 赞同：0
> 
> 时间：2012-10-27T20:50:04.963
> 
> 标签：jquery

我有一个使用表格动态生成网格的脚本。

```
//createGrid(height, width);
createGrid(1, 2);
//one row with 2 cols 
```

这创造了这个：

```
<table>
    <tr>
        <td></td>
        <td></td>
    </tr>
</table> 
```

对于添加/更改其类的 td 标签，我需要一个 onclick 事件。我尝试了一些解决方案无济于事。有任何想法吗？我不擅长 Jquery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:57:38.503

对于动态生成的元素，应该从元素或`document`对象的静态父对象之一委托事件，您可以使用[`on`](http://api.jquery.com/on/)以下方法：

```
$(document).on('click', 'td', function(){
   $('.selected').removeClass('selected');
   $(this).addClass('selected')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:52:40.130

您可以使用[on](http://api.jquery.com/on/) jquery 函数来绑定动态生成的事件委托项，它将现有元素与事件绑定，它还将绑定动态添加的元素。`$('td').click(function(){});`只会绑定现有元素，而不是绑定后动态添加的元素。

```
$(document).on("click", "td", function(){
     alert("clicked");
}); 
```

**委托活动**

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择一个在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要，[参考](http://api.jquery.com/on/).

您可以使用一些父元素选择器更改文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:59:43.593

另一种使用`find`,`live`和`toggleClass`

```
$("table").find("td").live("click", function() {
    $(this).toggleClass("selected");
});​ 
```

[提琴手](http://jsfiddle.net/E6A3U/)

# c# - 按住鼠标时多次引发事件

> ID：13104071
> 
> 赞同：2
> 
> 时间：2012-10-27T20:50:32.717
> 
> 标签：c#, event-handling, mouseevent

基本上假设我正在制作一个简单的计数器，当我单击鼠标时，计数器会上升。我的问题是如何编写一个偶数程序，使我可以在按住鼠标的同时使计数器流动，基本上与 KeyPress 事件处理程序完全一样，仅使用鼠标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:44:48.390

如果您出于其他原因不需要运行计时器，我不会使用计时器。我会使用类属性或全局变量，具体取决于您在做什么。

```
private/public startTicks long = 0; 
```

当您触发 MouseDown 事件时：

`startTicks = DateTime.Now.Ticks;`

在 MouseUp 事件中，获取差异并将其转换为您想要的任何时间元素（分钟、秒、小时）。

```
DoConversion(DateTime.Now.Ticks - startTicks); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:33:21.777

我将建议一个基于使用[Microsoft 的 Reactive Framework (Rx)](http://social.msdn.microsoft.com/Forums/en-US/rx/threads)的解决方案。

我假设`MouseDown`&`MouseUp`事件基于单击表单，并且有一个`NumericUpDown`控件，我们希望在鼠标按下时每 0.1 秒递增一次。

这是对解决方案进行编码的反应式框架方式：

```
var mouseDowns = Observable.FromEventPattern
    <MouseEventHandler, MouseEventArgs>(
        h => this.MouseDown += h,
        h => this.MouseDown -= h);

var mouseUps = Observable.FromEventPattern
    <MouseEventHandler, MouseEventArgs>(
        h => this.MouseUp += h,
        h => this.MouseUp -= h);

var intervals = Observable.Interval(TimeSpan.FromSeconds(0.1));

var query =
    from md in mouseDowns
    select intervals.TakeUntil(mouseUps);

query.Switch().ObserveOn(this).Subscribe(n => numericUpDown1.Value += 1); 
```

反应式查询应该很容易理解它的目的 - 基本上它是“当你按下鼠标时选择间隔，直到鼠标向上”。

在我们需要调用将查询转换`query`为.`IObservable<IObservable<long>>``Subscribe``Switch``IObservable<long>`

`ObserveOn(this)`确保将 observable 的值编组到 UI 线程。

Rx 学习起来可能有点棘手，但是一旦你掌握了它，它就会非常强大。我用它所有的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:13:15.520

定义一个在事件发生时开始触发其事件的计时器`MouseDown`。然后将`MouseUp`事件设置为暂停或停止计时器。执行您希望在计时器结束时触发的代码。

# jquery-ui - 如何让 jquery-ui 自动完成退出 iframe？

> ID：13104073
> 
> 赞同：3
> 
> 时间：2012-10-27T20:50:58.940
> 
> 标签：jquery-ui, iframe, autocomplete, position

是否可以让自动完成（jQueryUI）的建议退出一个 iframe，具有与“选择”元素相同的行为？我举一个例子：

[http://jsbin.com/ehidef/1](http://jsbin.com/ehidef/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T18:08:20.587

事实上，这是可以做到的，尽管一些样式是强制性的。jQueryUI 接受一个元素来附加选项，您可以将父窗口作为该元素传递。一个例子：

主窗口：

```
<html>
    <head></head>
    <body>
        <iframe src="iframe.html"></iframe>
    </body>
</html> 
```

iframe.html

```
<html>
    <head>
        <!-- include jQuery and jQuery UI and the like -->
        <script type="text/javascript">
            jQuery(function($){
                // This will take parent frame if in iframe, own body elsehow
                var el=top.document.body 

                // Instructs jQuery UI to show things on that previous element
                $('input').autocomplete({appendTo:el}); 
            });
        </script>
    </head>
    <body>
        <input type="text"/>
    </body>
</html> 
```

整个示例遗漏了与解释该点无关的所有内容，因此它不起作用。根据需要添加并添加一些糖。

至于我之前提到的样式，你必须给元素一个位置和样式，因为 1）相对于输入位置的位置与父窗口无关，2）父不需要加载 jqueryui 样式表，尽管你可以使用类似的技术从 iframe 内部动态加载它们。

重要的：

这只有在父母和孩子都在同一个域中时才有效[见：[SOP](http://en.wikipedia.org/wiki/Same_origin_policy) ]

更新

在完成同样的事情之后，我想出了这个样式和位置的解决方案：

```
var files=[ // UI styles to be loaded on top frame
        "css/ui-lightness/jquery-ui-1.10.3.custom.css",
        "css/ui-lightness/custom.css"
]

// Create link tag and append to top frame head
for (var a in files) {
    var style=$("<link/>", {
        rel: "stylesheet",
        type: "text/css",
        href: files[a]
    });

    $(top.document).find('head').append(style);
}

// As it turns out i had many iframes, so this will get the right one
var parentIframe=$(el).find('iframe').filter(function(){
    return window.frameElement==this
});

$('input').each(function(){ // Cicle inputs to use with ui autocomplete
    // set position to left + input offset  2 is a fix for borders on input
    var pos= "left+"+($(this).offset().left+2)+
    // and to top + input position + height to have it on the bottom
             " top+"+($(this).offset().top+$(this).outerHeight()+1);

    // Autocomplete 
    $(this).autocomplete({
        appendTo:top.document.body, // put it on top window's body
        position:{
            at: pos,        // at calculated position
            of:parentIframe // from parent iframe
        }
    })

}); 
```

再次，可能有空缺，随意填写相关代码

# python - 解释字符串布尔测试结果

> ID：13104074
> 
> 赞同：3
> 
> 时间：2012-10-27T20:51:00.787
> 
> 标签：python

我有这个代码：

```
>>> char = 'A'
>>> 'A' == char
True
>>> ('A' or 'B') == char
True 
```

为什么这不等于`True`？

```
>>> ('B' or 'A') == char
False 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T20:56:29.760

你的表情没有达到你的预期。

```
'A' or 'B' 
```

这实际上评估为`'A'`，在解释器中尝试一下！

当你说

```
('A' or 'B') == char 
```

解释器实际上是在执行以下步骤：

```
('A' or 'B') == char
('A') == char
True 
```

但是当你这样做时

```
('B' or 'A') == char 
```

解释器这样做：

```
('B' or 'A') == char
('B') == char
False 
```

你可能想要的是：

```
'A' == char or 'B' == char
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T20:52:29.520

不同之处在于这些表达式的计算方式：

```
In [1]: 'A' or 'B'
Out[1]: 'A'

In [3]: 'B' or 'A'
Out[3]: 'B' 
```

...因此，在您的情况下，“B”或“A”不应该相等`char`。

有关如何`or`工作的详细信息，请参阅[python 文档的“布尔运算”部分](http://docs.python.org/reference/expressions.html#or)：

> 表达式 x 或 y 首先计算 x；如果 x 为真，则返回其值；否则，评估 y 并返回结果值。

上面描述的排序很关键，包括一个叫做“[惰性求值](https://en.wikipedia.org/wiki/Lazy_evaluation)”的概念。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T21:03:21.867

您正在进行的比较实际上比较了`'A'`和的布尔值`'B'`。

所以：`('A' or 'B')`实际上是`(bool('A') or bool('B')`，因为它是一个`or`条件，并且`bool('A')`在`True`第一种情况下它比较`'A'==char`，在第二种情况下，`bool('B')`它是 True 所以它比较`'B'==char`（即`False`）

```
In [114]: False or True
Out[114]: True

In [115]: True or False
Out[115]: True

In [116]: True or True
Out[116]: True

In [117]: bool('A')
Out[117]: True

In [118]: bool('B')
Out[118]: True 
```

这就是它在后台发生的方式：\

```
In [104]: def func():
    char="A"
    return ('A' or 'B')==char
   .....: 

In [107]: def func1():
    char="A"
    return ("B" or "A")==char
   .....: 

In [110]: dis.dis(func)
  2           0 LOAD_CONST               1 ('A')  
              3 STORE_FAST               0 (char)

  3           6 LOAD_CONST               1 ('A')   #loads 'A'
              9 JUMP_IF_TRUE             4 (to 16)  # if 'A' is True then go to 16
                                                    # As 'A' is not a falsy value so it                                                                                                         
                                                     goes to  16
             12 POP_TOP                  
             13 LOAD_CONST               2 ('B')
        >>   16 LOAD_FAST                0 (char)  #load char , i.e 'A'
             19 COMPARE_OP               2 (==)    #compare 'A'=='A' , i,e True
             22 RETURN_VALUE        

In [111]: dis.dis(func1)
  2           0 LOAD_CONST               1 ('A')
              3 STORE_FAST               0 (char)

  3           6 LOAD_CONST               2 ('B')      #load 'B', it's a true value
                                                      # so go to 16
              9 JUMP_IF_TRUE             4 (to 16)
             12 POP_TOP             
             13 LOAD_CONST               1 ('A')
        >>   16 LOAD_FAST                0 (char)     #load chr ,i.e 'A'
             19 COMPARE_OP               2 (==)       #'B'=='A' , False
             22 RETURN_VALUE 
```

# iphone - 使用 AddressBookUI 访问将联系人添加到 iPhone 通讯簿的日期

> ID：13104083
> 
> 赞同：1
> 
> 时间：2012-10-27T20:52:19.790
> 
> 标签：iphone, ios, date, addressbook, abaddressbook

使用 iOS 版 AddressBookUI，我如何访问联系人添加到 iPhone 通讯录的日期？我在 iPhone 上下载了一个应用程序，显示添加联系人的日期，所以我确定这些信息在某个地方。但我无法在 iOS 通讯簿编程指南中找到如何访问这些信息。添加联系人时的位置信息怎么样，是否也保存在某个地方而我不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:16:58.527

使用`kABPersonCreationDateProperty`. 它记录[在这里](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40007210)。

# llvm - 在 llvm 中为 CloneFunction 的 vmap 参数传递什么？

> ID：13104085
> 
> 赞同：4
> 
> 时间：2012-10-27T20:52:27.713
> 
> 标签：llvm, llvm-clang

我正在尝试克隆另一个函数的确切副本。我无法在互联网上找到任何使用 CloneFunction 的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:16:40.980

它转向你可以只创建一个 ValueToValueMapTy 变量并在没有初始化的情况下传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-25T02:18:49.070

以下代码段足以克隆名为 Func 的函数

ValueToValueMapTy VMap; 自动 *克隆 = CloneFunction(Func, VMap);

拉希布鲍勃

# android - getApplicationContext 问题

> ID：13104098
> 
> 赞同：3
> 
> 时间：2012-10-27T20:53:50.537
> 
> 标签：android

我有 VideoApplication 类，它扩展了 Application 类。我在这个类中创建了我的另一个 java 类的对象，以便我可以通过活动传递它。

```
public class VideoApplication extends Application {
      private Client client;
      public Client getClient(){
           return client;
      }
      public void setClient(Client client){
           this.client = client;
      }
} 
```

我在 androidManifest 文件中添加了以下行： `android.name=".VideoApplication"`.

但是，当我将以下行添加到我的代码 (MainActivity.java) 中时，应用程序会引发 ClassCastException 异常。

```
VideoApplication appInstance = (VideoApplication)getApplicationContext(); 
```

我哪里错了？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:58:55.983

您可能会导致 ClassCastException。尝试使用`getApplication()`not `getApplicationContext()`：

```
VideoApplication appInstance = (VideoApplication) getApplication(); 
```

因为你真的想要一个 Application 对象而不是 Context 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T21:12:14.253

当然我迟到了，但是

```
android.name=".VideoApplication 
```

似乎不对。我认为应该是

```
android:name=".VideoApplication 
```

我希望它不是一个错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:21:20.783

您可以尝试在实例上使用 getClass().getName() 来查看它实际上是哪种类型，然后进行正确的转换。

# javascript - 将百分比与像素相结合

> ID：13104104
> 
> 赞同：3
> 
> 时间：2012-10-27T20:54:52.217
> 
> 标签：javascript, css

有没有办法将百分比与css中的像素结合起来？例如，我希望 div 的宽度为 50% + 10px。

Javascript / Jquery 插件是可接受的解决方案。但是一些全局工作的东西，不需要为任何额外的块编写额外的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:59:36.270

这是 CSS 中的一个“硬”问题，直到最近才有修复。CSS 中的修复是使用该`calc`方法，如下所示：

[http://dabblet.com/gist/3966215](http://dabblet.com/gist/3966215)

请注意，dabblet 会自动添加供应商前缀，因此您需要使用：

```
-webkit-calc()
-moz-calc()
-ms-calc()
-o-calc()
calc() 
```

[浏览器支持还可以， http](http://caniuse.com/#search=calc) : //caniuse.com/#search=calc - 简而言之，它是 IE9 及更高版本，而不是 Opera。

据我所知，JS 中没有任何 polyfill 可以使其在旧浏览器中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:58:32.967

```
div { width: calc(50% + 10px); } 
```

在 IE9 之前不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T21:29:18.987

我希望它会有所帮助

CSS

```
#testWrapper {
    width: 500px;
    background-color: #aaa;
} 

.test {
    width: 50%;
    background-color: #ccc;
}​ 
```

JS

```
$(function(){
  window.calcWidth = function(el, property, data){
    $(el).css(property, data);
      alert($(el).width());
  }

  calcWidth('.test', 'width', '+=50px');
}); 
```

HTML

```
<div id="testWrapper">
    <div class="test">
       Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin lacus urna, congue eu cursus nec, aliquet non lorem. Sed ullamcorper tempus enim, a vulputate dui suscipit vulputate.
    </div>
</div> 
```

[jsfiddle.net](http://jsfiddle.net/HBEw8/1/) :)

但老实说，我会使用其他人展示的那些 CSS 方式。肯定有一些 jQuery 插件可以帮助它跨浏览器...

您也可以通过绑定调整大小来做到这一点..但这也不是好方法

# php - Facebook PHP SDK - 尝试获取配置文件数据时引发异常

> ID：13104109
> 
> 赞同：0
> 
> 时间：2012-10-27T20:55:20.950
> 
> 标签：php, facebook, sdk

下面是我在尝试获取登录用户配置文件数据时得到的异常对象的一部分

PHP 代码

```
$user = $facebook->api('/me'); 
```

我得到的例外

```
object(FacebookApiException)#3 (7) {
  ["result:protected"]=>
  array(2) {
    ["error_code"]=>
    int(77)
    ["error"]=>
    array(2) {
      ["message"]=>
      string(104) "error setting certificate verify locations:
  CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: none
"
      ["type"]=>
      string(13) "CurlException"
    }
  }
  ["message:protected"]=>
  string(104) "error setting certificate verify locations:
  CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: none
" 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:15:54.330

这看起来像 CURL 的问题无法写入您的 ssl 文件夹，一种解决方法可能是尝试强制 curl 不建立安全连接。你可以这样做：

```
curl_setopt($url, CURLOPT_SSL_VERIFYPEER, FALSE); 
```

或者

```
echo insecure >> ~/.curlrc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:18:00.157

重新检查您在 src 文件夹中是否有证书

[https://github.com/facebook/php-sdk/blob/master/src/fb_ca_chain_bundle.crt](https://github.com/facebook/php-sdk/blob/master/src/fb_ca_chain_bundle.crt)

# c# - XmlSerializer 用问号 '?' 替换非 ASCII 字符

> ID：13104110
> 
> 赞同：2
> 
> 时间：2012-10-27T20:55:26.543
> 
> 标签：c#, xml, xmlserializer

我有一个非常适用于 ASCII 的 XML 序列化程序，但是当遇到非 ASCII 字符时，它们会被替换为问号“？”。我相信我已经为 UTF8 正确配置了它，但我不确定它为什么这样做。

```
XmlSerializer xmls = new XmlSerializer(typeof(T));
using (MemoryStream ms = new MemoryStream())
{
    XmlWriterSettings settings = new XmlWriterSettings();
    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
    ns.Add("", "");

    settings.Encoding = Encoding.UTF8;
    settings.Indent = true;
    settings.NewLineChars = "\n";
    settings.NewLineHandling = NewLineHandling.None;
    settings.NewLineOnAttributes = false;
    settings.ConformanceLevel = ConformanceLevel.Document;
    settings.OmitXmlDeclaration = true;

    using (XmlWriter writer = XmlTextWriter.Create(ms, settings))
    {
        xmls.Serialize(writer, obj, ns);
    }

    string xml = Encoding.UTF8.GetString(ms.ToArray());

    // remove the BOM character at the beginning which screws up decoding
    if (xml.Length > 0 && xml[0] != '<')
    {
        xml = xml.Substring(1, xml.Length - 1);
    }

    return xml;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:28:44.317

这里看起来一切都很好；用

```
public class Foo
{
    public string Bar { get; set; }
}
...
string xml = Test(new Foo { Bar = "Jalapeño" }); 
```

输出：

```
<Foo>
  <Bar>Jalapeño</Bar>
</Foo> 
```

作为一个小改动，我**完全**删除了“删除 BOM 字符”代码，并在编码中明确地做到了这一点：

```
settings.Encoding = new UTF8Encoding(false); 
```

此外，如果我包含 xml 声明以检查它认为它正在使用的编码：

```
<?xml version="1.0" encoding="utf-8"?>
<Foo>
  <Bar>Jalapeño</Bar>
</Foo> 
```

所以基本上......无法复制。

# ios - 如何从应用程序内发送电子邮件

> ID：13104111
> 
> 赞同：0
> 
> 时间：2012-10-27T20:55:25.690
> 
> 标签：ios, email

我正在尝试发送包含文本字段和图像数据的电子邮件，但它不起作用，请告知。这是我的代码：

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if(buttonIndex==1)
{

    Cocktails*c=[[Cocktails alloc]init];

    _arrTextField=[NSArray  arrayWithObjects:_txtName,_txtIngredients,_txtPreper,_txtServe,_txtFrom ,nil];

    NSLog(@"send email");

    if ([MFMailComposeViewController canSendMail])
    {
    NSMutableArray*recipients=[[NSMutableArray alloc]init];

    [recipients addObject:@"maya1580@gmail.com"];
    MFMailComposeViewController *controller= [[MFMailComposeViewController alloc]init];
    controller.mailComposeDelegate= self;
    [controller addAttachmentData:_imgDrink mimeType:@"image/png" fileName:@"Myimage"];
    [controller setSubject:@"my cocktail"];
    [controller setMessageBody: _arrTextField isHTML:NO];
    [controller setToRecipients:recipients];
    }
    else
    {
        UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Alert" message:@"Your devise is not set up for Email" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:Nil, nil];

        [alert show];
       //  [alert release];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:37:55.467

你不能自动发送电子邮件，因为苹果不会让你在没有用户知识的情况下做这种事情。您必须出示 presentModalView！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:04:59.627

您永远不会提供邮件控制器。它需要像任何其他模态视图控制器一样呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:07:39.033

这应该会有所帮助：

```
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
            break;
        default:
            NSLog(@"Mail not sent.");
            break;
    }

    // Remove the mail view
    [self dismissModalViewControllerAnimated:YES];
}

-(IBAction)sendCode:(id)sender {
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

        mailer.mailComposeDelegate = self;

        [mailer setSubject:@"Your subject"];

        NSArray *toRecipients = [NSArray arrayWithObjects:@"maya1580@gmail.com", nil];
        [mailer setToRecipients:toRecipients];

UIImage *myImage = [UIImage imageNamed:@"MyImage.png"];
            NSData *imageData = UIImagePNGRepresentation(myImage);
            [mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@"myimag

e"];

        NSString *emailBody =
        @"your body";

        [mailer setMessageBody:emailBody isHTML:NO];

        [mailer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentModalViewController:mailer animated:YES];

    }
    else {
        {
            UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Error"
                                                             message:@"Your device doesnt support that action."
                                                            delegate:nil
                                                   cancelButtonTitle:@"Okay"
                                                   otherButtonTitles:nil];

            [alert2 show];

        }
    }
} 
```

并在 .h 文件中添加：

```
#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>

@interface Controller : UIViewController <MFMailComposeViewControllerDelegate> {

}

-(IBAction)send:(id)sender;

@end 
```

# mysql - NOT LIKE MySQL 语句

> ID：13104113
> 
> 赞同：0
> 
> 时间：2012-10-27T20:55:54.427
> 
> 标签：mysql, select, sql-like

我对 NOT LIKE 语句有疑问。我有两个 sql 表设置为标签映射。第一个表根据搜索名称找到 tag_id，第二个表根据找到的 tag_id 找到 resource_id。当我在下面运行 NOT LIKE 语句时，我收到结果：resource_id = 1。

### 标记映射表

```
tag_id name
1      meat
2      vegetarian

resource_id tag_id
1           1
1           2 
```

### 询问

```
SELECT 
    f.id, f.food_name, tm.resource_id, tm.tag_id, t.name 
FROM 
    tag as t, tagmap as tm JOIN item as f ON 
    (
        f.id = tm.resource_id AND tm.tag_id IN 
        (
        SELECT 
            t.tag_id 
        FROM 
            tag as t 
        WHERE 
            t.name NOT LIKE '%meat%' 
        ) 
     )
GROUP by f.id 
```

我需要这个查询做的是，如果它找到一个标签名为“肉”的resource_id，我不希望它返回这个resource_id。

如果我的解释不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:11:21.297

我不是 %100 确定我了解您对查询结果的期望，但据我了解，这可能会对您有所帮助：

```
SELECT f.id, f.food_name, tm.resource_id, tm.tag_id, t.name 
FROM tag as t
left join tagmap as tm on tm.resource_id = t.tag_id
left join item as f on f.id = tm.resource_id
where t.name NOT LIKE '%meat%' 
GROUP by f.id 
```

为了玩查询，这里是 sqlfiddle 示例：

[http://sqlfiddle.com/#!2/561c4/7](http://sqlfiddle.com/#!2/561c4/7)

编辑：

所以你想排除附加到选定标签的任何资源，试试这个：

```
SELECT f.id, f.food_name, tm.resource_id, tm.tag_id, t.name 
FROM tag AS t 
INNER JOIN tagmap AS tm ON tm.resource_id = t.tag_id 
INNER JOIN item AS f ON f.id = tm.resource_id 
where tm.resource_id not in (
  select resource_id from tagmap 
  where tag_id in (select tag_id from tag WHERE name LIKE '%meat%')
)  
GROUP by f.id 
```

[http://sqlfiddle.com/#!2/053fa/3](http://sqlfiddle.com/#!2/053fa/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:02:10.037

然后你必须搜索：

```
select resource_id
from tagmap
where resource_id not in (select resource_id
                          from tagmap
                          where tag_id in (select tag_id from tag
                                           where name like '%meat%')); 
```

或带有`join`：

```
select *
from tagmap
where resource_id not in (select m.resource_id
                          from tagmap m, tag t
                          where m.tag_id = t.tag_id and t.name like '%meat%'); 
```

您`resource_id`使用名称“肉”查找并`not in`在您的选择中排除这些。

这*可能*与您的查询相对应，但我不太确定：

```
select f.id, f.food_name, tm.resource_id, tm.tag_id, t.name 
from tag as t, tagmap as tm, item as f
where f.id = tm.resource_id
      and tm.tag_id = t.tag_id
      and tm.resource_id not in (select m.resource_id
                                 from tagmap m, tag t
                                 where m.tag_id = t.tag_id
                                       and t.name like '%meat%')
group by f.id; 
```

# plone - Plone - buildout.cfg 中的解析错误 - “PlonePlonebuildout 配置文件 [test]”

> ID：13104116
> 
> 赞同：0
> 
> 时间：2012-10-27T20:56:25.147
> 
> 标签：plone, zope, buildout

因此，我正在尝试阅读 Plone 4 书，并复制了一个包含以下行的构建文件（从第 51 页开始）：

```
[instance]
recipe = plone.recipe.zope2instance
http-address = 8080
user = admin:admin
verbose-security = on
eggs =
${eggs:main}
${eggs:devtools}

# Test runner. Run: ``bin/test`` to execute all tests
PlonePlonebuildout configuration files[test]
recipe = zc.recipe.testrunner
eggs =
${eggs:test}
defaults = ['--auto-color', '--auto-progress']

# Coverage report generator.
# Run: ``bin/test --coverage=coverage`` # and then: ``bin/coveragereport``
[coverage-report]
recipe = zc.recipe.egg
eggs = z3c.coverage
scripts = coveragereport
arguments = ('parts/test/coverage', 'coverage') 
```

当我尝试运行时，`bin/buildout`我收到以下错误消息：

```
ParsingError: File contains parsing errors: /Users/Jon/dev/pln42/buildout.cfg
    [line 32]: 'PlonePlonebuildout configuration files[test]\n' 
```

我已经包含了一些在相关行之前和之后的行，以便提供上下文。由于我直接从书中复制了该行，因此我不知道如何更改它以使解析错误消失。

（源代码据说可以在线获得，但我尝试按照 Packt Publishing 的下载说明进行操作，但没有成功。）

我的 Kindle 电子书截图：

![我在 Plone 4 书中尝试遵循的代码截图](../Images/86c64683a6e6462b6b77f77a7c07b2ea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:14:33.967

这条线`PlonePlonebuildout configuration files[test]`显然是错误的；删除`[test]`该行部分之前的所有内容：

```
# Test runner. Run: ``bin/test`` to execute all tests
[test]
recipe = zc.recipe.testrunner 
```

不确定这是您在 Stack Overflow 上还是在您的文件中的格式，但您在其他地方也缺少一些缩进：

```
[instance]
recipe = plone.recipe.zope2instance
http-address = 8080
user = admin:admin
verbose-security = on
eggs =
  ${eggs:main}
  ${eggs:devtools} 
```

规范后面的行`eggs =`应缩进以将它们标记为`eggs`参数的（连续）值。部分中的`eggs =`行也是如此`[test]`：

```
[test]
recipe = zc.recipe.testrunner
eggs =
  ${eggs:test}
defaults = ['--auto-color', '--auto-progress'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T22:37:09.357

看起来这里的编辑/格式化出了点问题。

你可以在这里找到我所有的书的源代码：http: [//github.com/optilude/optilux](http://github.com/optilude/optilux)

使用分支选择器选择章节。您可以通过网络阅读，也可以从 github 克隆/下载。

# mysql - 使用 zend 库在 MySQL 数据库中存储日期

> ID：13104120
> 
> 赞同：-1
> 
> 时间：2012-10-27T20:56:49.960
> 
> 标签：mysql, zend-framework, date

我正在使用 ZEND 库将格式为 10/10/1970 的网页中的日期传递给 MYSQL 数据库：

```
$zendDate = new Zend_Date($theValue, "dd/mm/yyyy");
$theValue = "'" . $zendDate->toString("yyyy-mm-dd") . "'"; 
```

但它不工作。日期存储为 0000-00-00。

我的代码有什么问题？谢谢您的帮助。

多纳托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:17:49.540

检查[http://framework.zend.com/manual/1.12/en/zend.date.constants.html](http://framework.zend.com/manual/1.12/en/zend.date.constants.html)

常数 mm 表示分钟，而不是月。使用 MM 几个月。

# php - 阻止 NetBeans 将注释组合在一起

> ID：13104122
> 
> 赞同：4
> 
> 时间：2012-10-27T20:57:18.223
> 
> 标签：php, netbeans, netbeans-7.2

试图找出如何更改 NetBeans (7.2) 删除注释之间的行。

我打字

```
// comment 1

// comment 2 
```

NetBeans 自动格式更改为

```
// comment 1
// comment 2 
```

是否有我遗漏的设置可以阻止程序删除该行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:37:06.090

不，但是如果您可以更改为多行注释样式

```
/* comment 1 */

/* comment 2 */ 
```

它们之间的每一条新线都将被保留。

# c - 投到无效**，出于什么原因？

> ID：13104123
> 
> 赞同：2
> 
> 时间：2012-10-27T20:57:31.957
> 
> 标签：c, pointers, casting

这是“The C programming language”一书中的C代码：

```
#include <stdio.h>
#include <string.h> 

#define MAXLINES 5000    /* max #lines to be sorted */
char *lineptr[MAXLINES]; /* pointers to text lines */

int readlines(char *lineptr[], int nlines);
void writelines(char *lineptr[], int nlines);

void qsort(void *lineptr[], int left, int right, 
        int (*comp)(void *, void *));

int numcmp(char *, char *);

/* sort input lines */
main(int argc, char *argv[])
{
    int nlines;

    int numeric = 0; /* number of input lines read */

    if (argc > 1 && strcmp(argv[1], "-n") == 0)  /* 1 if numeric sort */
        numeric = 1;
    if ((nlines = readlines(lineptr, MAXLINES)) >= 0) {
        qsort((void**) lineptr, 0, nlines-1, // MY QUESTION: WHY lineptr IS CAST TO POINTER TO A VOID POINTER
                (int (*)(void*,void*))(numeric ? numcmp : strcmp));
        writelines(lineptr, nlines);
        return 0;
    } else {
        printf("input too big to sort\n");
        return 1;
    }
}

void qsort(void *v[], int left, int right,
        int (*comp)(void *, void *))
{
    int i, last;
    void swap(void *v[], int, int);
    // rest of code
} 
```

为什么当调用 qsort 函数时，第一个参数被强制转换为指向 void 指针 (void **) 而不仅仅是指向 void (void *) 的指针。请告诉我为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:04:32.250

这些天，编译器会警告你，除非你将非空指针作为空指针传递给空指针（如果这有意义的话）。不过，我想你知道这一点。

的签名`void **lineptr`在 C 中等同于，它是作为参数`void *lineptr[]`的指针类型。`qsort`有关更多详细信息，请参阅[此](http://en.wikipedia.org/wiki/Type_signature)站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T19:10:49.653

这里，`qsort`函数定义了一个`int (*comp)(void *, void *)`参数，`*comp`是一个函数指针，可以用来调用比较函数。即使它们没有相同的函数名（`comp`和`numcmp`），它仍然有效。

# c++ - 用户提供的 terminate() 函数必须是线程安全的吗？

> ID：13104124
> 
> 赞同：11
> 
> 时间：2012-10-27T20:57:32.767
> 
> 标签：c++, multithreading, c++11, terminate-handler

如[http://en.cppreference.com/w/cpp/error/terminate](http://en.cppreference.com/w/cpp/error/terminate)中所述，调用终止的原因有很多。我可以想象其中一些原因几乎同时发生在两个线程中的情况。

**Q1**设置的终止函数`std::set_terminate`是否可以同时调用两次或多次，同时我的意思是第二次调用在第一次结束之前开始。

```
 Thread1   Thread2
    |          |
    _          |
    t          |
    e          |
    r          |
    m          |
    i          _
    n          t
    a          e
    t          r
    e          m
    -          ? 
```

**Q2**如果 Q1==YES，那么如果第一次终止结束会发生什么。我猜如果它以 std::abort 结束，那么程序结束，但是如果用户提供的 terminate 没有中止程序会发生什么？

**Q3**调用的终止函数是`std::set_terminate`在导致终止调用的线程的上下文中设置的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T21:56:29.923

**第一季度**

是的，`std::terminate`可以同时调用。

**第二季度**

`terminate_handler`该标准表示，不“在不返回调用者的情况下终止程序的执行”是未定义的行为。在我熟悉的实现中，是否会调用`terminate_handler`正常或异常返回的尝试。`abort()`

**第三季度**

设置的函数`std::terminate`是全局的，而不是线程本地的。所以一个线程可以影响另一个线程。

在 C++98/03 中，由于未捕获的异常而调用`terminate_handler`使用的 when`terminate`是抛出异常时生效的那个，而不是`terminate`实际调用时生效的那个（尽管它们通常是相同的）。

在 C++11 中，这种情况发生了变化，现在标准规定使用的处理程序是调用时已到位的处理程序`terminate`。此更改是错误完成的，很可能会在未来的草稿中更正。这是跟踪此问题的 LWG 问题：

[http://cplusplus.github.com/LWG/lwg-active.html#2111](http://cplusplus.github.com/LWG/lwg-active.html#2111)

**更新**

在堪萨斯州 Lenexa 举行的 2015 年春季会议上，LWG 决定标准化现有行为，并在堆栈展开期间调用新行为时未指定何时`terminate_handler`生效。`set_terminate`即允许实现遵循 C++98/03 规则或 C++11 规则。

为了让你的代码具有可移植性，如果你需要设置 a `terminate_handler`，请在程序启动时进行，在任何异常抛出之前进行，并且不要养成之后调用的习惯`set_terminate`。

# api - IATA 到国家/地区 API

> ID：13104136
> 
> 赞同：3
> 
> 时间：2012-10-27T20:59:35.540
> 
> 标签：api

我正在开发一个需要根据 IATA 代码 (http://en.wikipedia.org/wiki/IATA_airport_code) 查找国家代码 (ISO-3166 alpha2) 的应用程序。

是否有（最好是免费的）API？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T01:18:00.413

我在这里提交了一个不完整的解决方案，既是为了解决手头的 IATA-to-Contry-Code 问题，也是为了引起人们对结构化内容可能未被充分利用的资源的关注：我说的是[**Freebase**](http://en.wikipedia.org/wiki/Freebase)！

这是不完整的，因为并非所有 IATA 代码都包括在内（尽管我猜测覆盖率相对较高）或并非所有都分配了国家代码（唉，这是一种更常见的情况）。

我想推荐的 API 是[**Freebase MQL 读取服务**](http://wiki.freebase.com/wiki/MQL_Read_Service)。
这项免费服务的工作原理是发送一个带有参数的 HTTPS 请求，该参数用 MQL（Metaweb 查询语言）表示查询，并接收具有所需结果的 JSON 对象。

具体来说，请求看起来像

```
https://www.googleapis.com/freebase/v1/mqlread?indent=2&query=[{"type":"/aviation/airport","id":null,"limit": 25,"name":null,"sort":"name","iata": "SFO", "/location/location/containedby": [{"limit":6,"name":null,"optional": true,"sort":"name","/location/country/iso3166_1_alpha2": [{ "limit":6, "optional": false, "sort":"value", "value":null}]}],"airport_type": [{"limit":3,"name":null,"optional": true,"sort":"name","type":"/aviation/airport_type"}]}]
                                                                                                                                                    ^---  here place the IATA code 
```

为了便于阅读，我在多行上显示了带有缩进的相应 MQL；与上面相同的只是更好的布局。

```
[{
  "type":  "/aviation/airport",
  "id":    null,
  "limit": 25,
  "name":  null,
  "sort":  "name",

  "iata": "SFO",     -- <<< that's where you place the desired IATA code

  "/location/location/containedby": [{
    "limit":    6,
    "name":     null,
    "optional": true,
    "sort":     "name",
    "/location/country/iso3166_1_alpha2": [{
      "limit":    6,
      "optional": false,
      "sort":     "value",
      "value":    null
    }]
  }],
  "airport_type": [{
    "limit":    3,
    "name":     null,
    "optional": true,
    "sort":     "name",
    "type":     "/aviation/airport_type"
  }]
}]​ 
```

响应如下所示：

```
{
  "result": [
    {
      "name": "San Francisco International Airport", 
      "iata": "SFO", 
      "/location/location/containedby": [
        {
          "name": "United States of America", 
          "/location/country/iso3166_1_alpha2": [
            {
              "value": "US"
            }
          ]
        }
      ], 
      "airport_type": [
        {
          "type": "/aviation/airport_type", 
          "name": "Public"
        }
      ], 
      "type": "/aviation/airport", 
      "id": "/en/san_francisco_international_airport"
    }
  ]
} 
```

**通过深入研究 Freebase`/aviation/airport`类型并使用我在下面简要描述的各种工具，**这个解决方案在大约 30 分钟内被“搅起” 。**** 

 **请注意，**这是一种通用方法**，适用于各种查询：例如，我们可以获取 1950 年之前建造的跨度超过 500 英尺的桥梁列表，而不是将 IATA 机场代码与 ISO 国家代码匹配，或者查找出生在特定城市的著名音乐家等。此外，AFAIK、Freebase API 和信息是免费提供的。但是请注意，与从专业来源获得的内容相比，在 Freebase 上找到的内容存在一些限制（和一些优势！）。
从 Freebase 获得的信息可能不如通过 API 和从专业来源获得的数据提取获得的信息那样权威、完整或最新。这种限制说明了在 Freebase 以协作的、类似维基的方式收集的信息的准普遍广度，由一个主要是志愿者的工作组，与由各种行业的付费专业人士进行的集中的、通常是单一目的的信息收集相比国际航空运输协会或国际海事组织 (IMO) 等组织。另一方面，Freebase 凭借其数据的语义表示，提供了以强大的方式连接信息位的方法。由于权威来源主要提供“表格”数据，Freebase 查询可以匹配明显不相关的信息片段。例如，

但是足够的披露，让我们看看如何产生这些查询

*   [首先仔细阅读Freebase](http://www.freebase.com/)上所需的项目类型，以熟悉该站点在该领域提供的内容，并对此类项目可用信息的广度和深度有一个非正式的“感觉”。
    例如，可以查看为[Freebase 上的](http://www.freebase.com/view/aviation/airport)[Airport *Type找到的各种机场实例*](http://www.freebase.com/view/aviation/airport)
*   一旦确定了所需项目的类型，就可以查看它们的模式（许多方法可以到达那里，例如页面底部的链接）
    这是我们的[机场类型](http://www.freebase.com/schema/aviation/airport)示例的模式。
*   该模式显示为给定类型收集了哪些信息字段。但是请注意，虽然架构可能相对完整和详尽，但相应类型的各个实例可能并非都正确填写了这些字段：通过对实例的*临时*审查或实例列表进行非正式验证，如下所述。
*   返回到实例列表视图并通过添加和删除列来修改此视图。这分别通过列表左上角的橙色“+”按钮和每个列标题旁边的小“x”按钮来完成。
    查看“添加新列”部分中显示的树（在按下“+”后显示）如何允许深入了解我们开始使用的类型或与之连接的类型的模式。
    在机场的情况下，我迅速删除了“图片”、“文章”和“航空公司”相关的字段，腾出空间，并添加了 IATA 代码，并在“位置”中钻取以找到国家，然后从那里ISO 代码。这种与“国家”的联系有点棘手，我不得不查看“包含者”
*   一旦您有了一个包含所需字段的表格列表，并且可能还有一些用于审查目的的额外字段，您可以通过在“使用此集合中的数据”中选择“MQL”链接来导出相应的 MQL 代码，在页面底部。这会弹出一个窗口，您可以在其中复制 MQL 代码段，尽管继续进入[查询编辑器](http://www.freebase.com/queryeditor)可能会更好。（您可能仍需要复制 MQL 代码并将其粘贴回编辑器，因为应用程序的一个错误在按下“在查询编辑器中查看”按钮时不会带来该 MQL）
*   查询编辑器提供了一种方便的方式来调整这个初始/默认查询并对其进行测试。您可能需要熟悉[MQL 语言](http://wiki.freebase.com/wiki/MQL_Manual_Table_of_Contents)，它通常比较直观。
*   当查询准确生成我们需要的内容时，是时候将其设置为“单线”（编辑器屏幕底部的格式化方便按钮），然后可以在 Freebase MQL 读取服务的 URL 中使用它（参见示例这个答案的顶部）。
*   更多的测试和调整（例如，在将字符串复制/编辑到 URL 时，偶尔会遇到由拼写错误引入的 JSON 语法错误）等等……瞧！
*   实际上，使用 Freebase 可以完成更多工作，例如使用[Google 客户端库](http://wiki.freebase.com/wiki/Google_API_Client_Libraries)来促进与 MQL 服务的集成。

最后我想提出以下建议：与其将这个在线 API 集成到您的应用程序中，有时可以**下载完整列表并使用它创建一个本地数据库**。以这种方式，可以通过添加行和/或填充空列来补充数据。这种方法特别适用于 IATA/机场示例——毕竟机场列表及其基础代码相对较小，并且不会经常变化。当然，这种方法可能需要偶尔刷新和维护本地数据库，但它消除了与 Freebase 的在线、实时连接的要求。**

# c++ - 使用“this”关键字时出现“错误：表达式必须具有指针类型”

> ID：13104138
> 
> 赞同：12
> 
> 时间：2012-10-27T20:59:36.653
> 
> 标签：c++, this

所以我创建了一个父类，我称之为`Parent`具有`Square*`网格成员变量的父类。网格变量是指向包含`key`成员变量的大型 Squares 数组的指针。（把这个项目想象成一个哈希表）问题是我在`Parent`类中创建一个函数来编辑数组中的关键变量`Square`，并得到一个错误。这行代码编译：

```
this->grid = new Square[row*col]; 
```

但这行不编译：

```
this->grid[i*col + j]->key1 = j; 
```

它强调`this`并说表达式必须具有指针类型。我想知道是否有人对我可能做错了什么有想法？

```
void Parent::initialize(int row,int col) {
    this->grid = new Square[row*col];
    for(int i = 0; i < row; i++) {
        for(int j = 0;j < col; j++) {
            this->grid[i*col + j]->key1 = j;
            this->grid[i*col + j]->key2 = i;
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-27T21:18:54.443

你必须使用

```
this->grid[i*col + j].key1
this->grid[i*col + j].key2 
```

那是因为即使您的网格确实是一个指针，您也已经在其内存指向的对象中分配了一个`Square`对象数组。因此，当您使用 [] 运算符时，您将获得一个类型的对象，`Square`而不是 a`Square*`和`Square`您必须使用的对象*。运算符*而不是*-> 运算符。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T21:12:31.730

我猜`this->grid`是 type `Square*`，所以`this->grid[0]`是 type`Square&`并且您必须使用`.`（点）而不是`->`（箭头）来访问来自`Square&`. 要将箭头用于表达式**表达式必须具有指针类型**...

```
this->grid[i*col + j]->key2
//                   ^^: this->grid[i*col + j] is not a pointer 
this->grid[i*col + j].key2
//                   ^ use dot to access key2 and key1 too 
```

# javascript - “jQuery(function($){...}” 中的 $ 是如何引用 jQuery 的？

> ID：13104143
> 
> 赞同：0
> 
> 时间：2012-10-27T20:59:52.143
> 
> 标签：javascript, jquery, dollar-sign

下面，它说 $ 符号是指 jQuery。我需要帮助了解如何？

```
jQuery(function($){
    // Here `$` refers to jQuery
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:04:14.963

当您像这样将函数传递给 jQuery 时：

```
jQuery(function() {
    ...
}); 
```

这与使用 jQuery 的“文档就绪”处理程序相同：

```
jQuery(document).ready(function() {
    ...
}); 
```

然而，传递给该函数的*参数*实际上是全局 jQuery 对象本身——只是大多数此类处理程序从不使用该参数。因此，*真正的*签名是这样的：

```
jQuery(document).ready(function($) {
    ...
}); 
```

因此，在该函数`$`中是全局 jQuery 对象的本地别名。变量名*可以*是您想要的任何名称，但`$`它是 的流行别名`jQuery`，并且是默认的全局别名，除非您调用`jQuery.noConflict()`.

这在[http://api.jquery.com/ready/的“](http://api.jquery.com/ready/)*给 jQuery 命名空间起别名*”段落中有更详细的描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:15:26.727

只是一个例子，向你展示它是如何可能的

```
function externalLibrary(b) {
    if(typeof b === 'function') {
        b(externalLibrary);
    }else {
        // other stuff
    }

}

var myFunc = function(aliasOfExternalLibrary) {
    // here aliasOfExternalLibrary is a reference to externalLibrary
}
externalLibrary( myFunc ); 
```

jQuery[做同样](https://github.com/jquery/jquery/blob/master/src/core.js#L160)的事情（在一个更复杂的系统中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:01:42.447

该函数是所谓的异名函数，其中 jQuery 使用第一个参数 this 运行该异名函数。

所以只是为了理解它是这样的：

```
function jQuery(xx) {
    xx(this);
} 
```

# android - 仅在构建此应用程序时与开发人员和测试人员共享

> ID：13104149
> 
> 赞同：1
> 
> 时间：2012-10-27T21:00:47.177
> 
> 标签：android, facebook

我已经使用 facebook sdk 发布帖子并且已经完成，但是公众没有看到帖子，这是我从我的 facebook 墙上得到的按摩

“仅在构建此应用程序时与开发人员和测试人员共享”

，任何人都可以帮助我并解释如何让它向所有人展示，而不仅仅是开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:06:36.153

在您的应用程序设置页面上的 facebook 中，禁用沙盒模式。

# c# - Android和C#之间的网络流

> ID：13104150
> 
> 赞同：0
> 
> 时间：2012-10-27T21:01:02.217
> 
> 标签：c#, android

我想创建一个基于客户端服务器的应用程序。客户端在 android 上运行，服务器在 C# 上运行。

我的主要问题是我似乎无法将消息从我的服务器发送到我的客户端。

我正在使用 TcpListener 来捕获套接字，

```
TcpListener sSocket = new TcpListener(5555);
Socket soc = sSocket.AcceptSocket(); 
```

并使用套接字中的内置函数发送和接收即时消息，

```
Byte[] currentReciveMessage;
socket.Receive(currentReciveMessage, SocketFlags.None);

String message = "HEY";
byte[] tmp = System.Text.Encoding.ASCII.GetBytes(message);
socket.Send(tmp, tmp.Length, SocketFlags.None); 
```

问题出在发送端。我可以接收来自客户端的消息，但不能发送它们。

从android端植入阅读器使用BufferedReader，

```
sock = new Socket(serverAddr,port);
isR=new InputStreamReader(sock.getInputStream());
reader=new BufferedReader(isR); 
```

我是这样读的。

```
String tmp = "";
while ((reader.readLine()) != null) {
   tmp +=(reader.readLine());
} 
```

但问题是我什么都没有收到。

我的问题是，你觉得有什么奇怪的吗？您发现使用这种方法有什么问题吗？

希望你能帮助我或给我一个关于什么是错的提示。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:16:50.673

如果您正在执行 readLine，则需要从服务器发送换行符 \n。

# javascript - IE9 and JavaScript

> ID：13104151
> 
> 赞同：1
> 
> 时间：2012-10-27T21:01:09.687
> 
> 标签：javascript, css, iis, internet-explorer-9

On my developer machine an ASP.NET MVC 3 application si working perfectly (IE9, Firefox) but on the production server when I open it in IE9 some parts of the JavaScript code and CSS (for example border-radius) do not come into IE9\. I suspect the IIS because on development machine on localhost IE9 it works well. The server version (Win 2008 R2, IIS 7.5) and IE are the same on the both computer. What can be the problem, please?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:14:11.317

This is almost certainly nothing to do with IIS. What is likely happening here is that IE9 is being too clever for its own good.

IE has a config setting that when turned on tells the browse to fall back to IE8 compatibility mode when you load a site in the local intranet.

The idea of this setting is to make it easier for corporates with dodgy internal web applications to upgrade to IE9, because in theory their internal sites will continue working in IE8 mode.

That's the theory. In practice, it was a bad idea for a number of reasons.

The really bad part is that the setting is switched on by default.

Most users never notice, because most people don't develop their own sites. But for web developers, it can be a really annoying feature, because "internal intranet" includes localhost. I recommend you find the setting, and switch it off.

Virtually no-one else is going to be affected by this even if they're using IE9 with the flag still switched on, because they won't be loading the site from localhost as you are.

It is possible that some users may have their browser set to always show compatibility mode (I can't imagine why they would, but it's possible). For these users, it's helpful to add the following line of code to your `<head>` section:

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

This tells IE to always use the best rendering engine it has available (so IE9 will be in IE9 mode). This will deal with other users. However, for yourself, I think you may still need to switch the flag off manually in your settings, because if I recall correctly, that local intranet setting overrides the `X-UA-Compatible` header.

Hope that helps explain things.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:05:14.307

IIS and ASP.NET have nothing to do with how your CSS renders, so don't worry about that.

For IE9 to render them differently, my guess is that one of them is using a different mode. Hit F12 to get to developer tools, and you'll see two options to change the mode from IE7, IE8, IE9, and I think quirks mode or something like that. Make sure both are set to IE9, and you should see the proper CSS stuff.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T21:05:40.970

Border radius should be rendering correctly on IE9\. You might be missing this in your page header

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# php - 如果用户没有从下拉菜单中选择，如何显示回声

> ID：13104157
> 
> 赞同：1
> 
> 时间：2012-10-27T21:01:59.937
> 
> 标签：php

在下面的代码中，我有 2 个下拉菜单。一个是“课程”下拉菜单，另一个是“模块”下拉菜单：

下面是代码：

```
 <?php

    // connect to the database
    include('connect.php');

    /* check connection */
    if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
    }

    $sql = "SELECT CourseId, CourseName FROM Course ORDER BY CourseId"; 

    $sqlstmt=$mysqli->prepare($sql);

    $sqlstmt->execute(); 

    $sqlstmt->bind_result($dbCourseId, $dbCourseName);

    $courses = array(); // easier if you don't use generic names for data 

    $courseHTML = "";  
    $courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    while($sqlstmt->fetch()) 
    { 
    $course = $dbCourseId;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;  
    } 

    $courseHTML .= '</select>'; 

    $moduleHTML = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
    $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
    $moduleHTML .= '</select>'; 

    include('noscript.php');

    ?>

    <script type="text/javascript">

    function getModules() { 
    var course = jQuery("#coursesDrop").val(); 
    jQuery('#modulesDrop').empty(); 
    jQuery('#modulesDrop').html('<option value="">Please Select</option>'); 
    jQuery.ajax({ 
    type: "post", 
    url:  "module.php", 
    data: { course:course }, 
    success: function(response){ 
    jQuery('#modulesDrop').append(response); 
    } 
    }); 

    }

    </script> 

<h1>EDIT AN ASSESSMENT'S DATE/START TIME</h1>    

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?></th>
<th>Module: <?php echo $moduleHTML; ?></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit" name="moduleSubmit" /></p>
</form>

<?php

if (isset($_POST['moduleSubmit'])) {

$sessionquery = "
SELECT SessionId, SessionDate, SessionTime, ModuleId, TeacherId
FROM Session
WHERE
(ModuleId = ? AND TeacherId = ?)
ORDER BY SessionDate, SessionTime 
";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("si",$moduleId,$userid);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId, $dbTeacherId);

$sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

if($sessionnum ==0){
echo "<p>Sorry, You have No Sessions under this Module</p>"; 
```

module.php 在其中显示“模块”下拉菜单：

```
 <?php

         // connect to the database
     include('connect.php');

     /* check connection */
     if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
    }

    $course = isset($_POST['course']) ? $_POST['course'] : ''; 

    $sql = "
    SELECT cm.CourseId, cm.ModuleId, 
    c.CourseName,
    m.ModuleName
    FROM Course c
    INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
    JOIN Module m ON cm.ModuleId = m.ModuleId
    WHERE
    (c.CourseId = ?)
    ORDER BY c.CourseId, m.ModuleId
    "; 

     $sqlstmt=$mysqli->prepare($sql);

     $sqlstmt->bind_param("s",$course);

     $sqlstmt->execute(); 

     $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

    $moduleHTML  = "";  

     while($sqlstmt->fetch()) { 
        $moduleHTML .= "<option value='$dbModuleId'>" . $dbModuleId . " - " . $dbModuleName . "</option>".PHP_EOL;   
    } 

    echo $moduleHTML; 

     $sqlstmt->execute(); 

    ?> 
```

现在，如果您查看代码的底部，会发生什么情况是它在用户提交“课程”和“模块”下拉菜单后执行查询。如果它没有找到与该模块相关的会话，那么它会回显`"Sorry, You have No Sessions under this Module"`。

但是我的问题是，如果用户没有从下拉菜单中选择“课程”和“模块”，或者用户从“课程”下拉菜单中选择了课程，我不希望显示此回声但尚未从“模块”下拉菜单中选择模块。

下面是我想要的每种情况的回声：

1.  如果用户没有选择课程和模块：`echo "Please Select a Course and Module";`
2.  如果用户选择了课程但没有选择模块：`echo "Please Select a Module";`
3.  如果用户选择了课程和模块但没有出现会话：`echo "Sorry, You have No Sessions under this Module";`

目前上面的列表 3 有效，但我怎样才能让列表 1 和 2 只显示它们的回声而不显示其他回声？

**更新：**

验证下拉菜单的 Javascript 代码：

```
 function validation() {

                var isDataValid = true;

                var moduleTextO = document.getElementById("coursesDrop");
            var courseTextO = document.getElementById("modulesDrop");

            var errModuleMsgO = document.getElementById("moduleAlert");

  if (courseTextO.value == "" && moduleTextO.value == ""){
          errModuleMsgO.innerHTML = "Please Select a Course and Module";
          isDataValid = false;
  } else if (courseTextO.value == ""){
          errModuleMsgO.innerHTML = "Please Select a Course";
          isDataValid = false;      
  }else  if (moduleTextO.value == ""){
          errModuleMsgO.innerHTML = "Please Select a Module";
          isDataValid = false;    
    }else{
                errModuleMsgO.innerHTML = ""; 
        }

        return isDataValid;

        } 
```

下面是HTML代码：

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?></th>
<th>Module: <?php echo $moduleHTML; ?></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit" name="moduleSubmit" /></p>
<div id="moduleAlert"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:14:04.023

您可以使用 javascript 在其中创建一个函数来执行此操作，您可以在其中检查天气每个字段是否已填充或不能像这样显示在那里

```
<script type="text/javascript">
function validate()
{
if(document.dropdownmenuname.course.value=="")
{
alert("Please fill in your form");
document.dropdownmenuname.course.focus() ;
 return false;
}
}
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:28:06.483

更改表单标签

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
```

到

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();"> 
```

在服务器端进行验证也是一个好主意，如果您想在服务器端检查值，只需在现有 PHP 中添加一些代码：

```
<?php

if (isset($_POST['moduleSubmit'])) {

if(empty($_POST['courses']) && empty($_POST['modules'])) {
   echo 'Please Select a Course and Module';
} elseif(empty($_POST['courses'])) {
   echo 'Please Select a Course';
} elseif(empty($_POST['modules'])) {
   echo 'Please Select a module';
} else {

$sessionquery = "
SELECT SessionId, SessionDate, SessionTime, ModuleId, TeacherId
FROM Session
WHERE
(ModuleId = ? AND TeacherId = ?)
ORDER BY SessionDate, SessionTime 
";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("si",$moduleId,$userid);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId, $dbTeacherId);

$sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

if($sessionnum ==0){
echo "<p>Sorry, You have No Sessions under this Module</p>";

} 
```

# wpf - 加载屏幕动画口吃

> ID：13104160
> 
> 赞同：1
> 
> 时间：2012-10-27T21:02:12.963
> 
> 标签：wpf, c#-4.0

我在显示加载动画时使用后台工作程序加载大量项目。在 run worker 完成事件中，我将所有这些加载的项目设置为一个可观察的集合，然后关闭加载屏幕。问题是进度条动画流畅，直到项目设置为可观察集合，然后它才停止动画。我想这是因为这些项目的渲染会干扰动画。在渲染阶段有什么方法可以使动画平滑吗？运行应用程序时，我得到的时间是：

加载 = 1000 毫秒
设置属性 = 43 毫秒
渲染 = 5083 毫秒

打开虚拟化后，渲染时间提高到 19 毫秒。我将其关闭以演示渲染时间较长的场景。

```
 public ObservableCollection<string> Items { get; set; }
    private IEnumerable<string> _items;
    private BackgroundWorker _worker;
    private long _loadTime;
    private long _renderTime;
    private long _setPropertiesTime;

    public MainWindow()
    {
        InitializeComponent();
        Items = new ObservableCollection<string>();
        _itemsGrid.DataContext = this;
        _worker = new BackgroundWorker();
        _worker.DoWork += DoWork;
        _worker.RunWorkerCompleted += RunWorkerCompleted;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        _renderLabel.Content = string.Empty;
        _loadLabel.Content = string.Empty;
        _loadingBorder.Visibility = Visibility.Visible;
        _worker.RunWorkerAsync();            
    }

    void DoWork(object sender, DoWorkEventArgs e)
    {
        _items = LoadItems();            
    }

    void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        var setItemsTimer = Stopwatch.StartNew();
        Items.Clear();

        foreach (var item in _items)
        {
            Items.Add(item);
        }

        setItemsTimer.Stop();
        _setPropertiesTime = setItemsTimer.ElapsedMilliseconds;

        var timer = Stopwatch.StartNew();

        Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Loaded, new Action(() => 
        {
            timer.Stop();
            _loadLabel.Content = string.Format("Loading took {0} ms, Set properties took {1} ms", _loadTime, _setPropertiesTime);
            _renderLabel.Content = string.Format("Rendering took {0} ms", timer.ElapsedMilliseconds);
            _loadingBorder.Visibility = Visibility.Collapsed;
        }));
    }

    IEnumerable<string> LoadItems()
    {
        var timer = Stopwatch.StartNew();
        var items = new List<string>();
        for (int i = 0; i < 5000; i++)
        {
            items.Add("Testing");
        }

        Thread.Sleep(1000);

        timer.Stop();
        _loadTime = timer.ElapsedMilliseconds;
        return items;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:47:11.310

一种方法是在当前窗口之上创建一个覆盖窗口，该窗口在不同的 UI 线程下运行，并在此窗口中显示加载动画，并设置适当的属性以使窗口看起来是加载窗口的一部分。

这本质上是一个闪屏。

# opencv - IplImage 到 Numpy 数组的快速转换

> ID：13104161
> 
> 赞同：5
> 
> 时间：2012-10-27T21:02:13.740
> 
> 标签：opencv, numpy

[这里](http://opencv.willowgarage.com/documentation/python/cookbook.html)较新的 OpenCV 文档说您可以像这样将 IplImage 转换为 Numpy 数组：

```
arr = numpy.asarray( im ) 
```

但这不符合我的需要，因为它显然不支持数学：

```
x = arr/0.01
TypeError: unsupported operand type(s) for /: 'cv2.cv.iplimage' and 'float' 
```

如果我尝试指定数据类型，我什至无法做到这一点：

```
arr = numpy.asarray( im, dtype=num.float32 )
TypeError: float() argument must be a string or a number 
```

所以我在[这里](http://opencv.willowgarage.com/wiki/PythonInterface)使用旧文档中提供的代码。基本上，它这样做：

```
arr = numpy.fromstring( im.tostring(), dtype=numpy.float32 ) 
```

但是`tostring`调用真的很慢，也许是因为它正在复制数据？我需要这种转换非常快，并且不复制任何不需要的缓冲区。我不认为数据本质上是不兼容的。我`cv.fromarray`首先创建了我的 IplImage，它非常快并且被 OpenCV 函数接受。

有没有一种方法可以让更新的`asarray`方法为我工作，或者我可以以一种`numpy.fromstring`可以接受的方式直接访问 IplImage 中的数据指针？我正在使用为 Ubuntu Precise 预先打包的 OpenCV 2.3.1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-28T14:32:46.797

有趣的事实：
假设您致电：

```
import cv2.cv as cv    #Just a formality!

Capture = cv.CaptureFromCAM(0)
Img = cv.QueryFrame(Capture) 
```

该对象`Img`是`ipimage`，并且**充其量**`numpy.asarray(Img)`是不稳定的。然而！是一种类型，效果非常好，更重要的是：快！**`Img[:,:]``cvmat``numpy.asarray(Img[:,:])`**

 **这是迄今为止我发现的最快的获取帧并将其`ndarray`用于 numpy 处理的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:07:09.910

那页没有说关于`IplImage`。它说`CvMat`哪个是不同的。

无论如何，您最好使用来自较新`cv2`名称空间的包装器。它本机使用 numpy 数组而不是自己的图像容器。此外，整个`cv`模块被认为已弃用，并将在最近的主要版本中完全删除。**

# mysql - 是否有不需要均匀分布的整数作为主键的“ORDER BY RAND()”的快速替代方案？

> ID：13104164
> 
> 赞同：0
> 
> 时间：2012-10-27T21:02:37.727
> 
> 标签：mysql

我想提取表格的随机行。使用“ORDER BY RAND”并获取第一行很慢，因为创建了一个单独的表。标准的替代方法是依赖必须是整数的唯一主索引。

但是，如果主键分布不均匀，这不会返回好的结果。此外，它要求我维护一列额外的整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:12:39.833

我在 T-SQL 中使用不均匀分布的键进行了一些随机选择，不需要添加额外的列，方法如下：

1.  检查表中有多少有效行 ( `COUNT(...)`)
2.  随机化一个介于 1 和行数之间的数字
3.  以随机数为索引查询行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:01:08.517

即使您的主键分布不均匀，您仍然可以通过开放式范围查询来确保它们：

```
SELECT thing FROM table WHERE pk_id > 134 LIMIT 1; 
```

即使没有键为 134 的行，您也会得到链中的下一个。这种方法的好处是它是一个简单的范围扫描并且效率很高。您也不需要知道表中有多少行（例如通过`SELECT COUNT(*)`...），这在使用 InnoDB 时成本很高 - 您应该使用 InnoDB）。您确实需要执行最大行 ID，但这对于抓取 ( `SELECT MAX(pk_id) FROM table`) 是有效的并且可以被缓存。

# c++ - stringstream setprecision 和浮点格式

> ID：13104167
> 
> 赞同：2
> 
> 时间：2012-10-27T21:02:40.893
> 
> 标签：c++, stringstream, double-precision

```
double value = 02369.000133699;//acutally stored as 2369.000133698999900
const std::uint32_t left = std::uint32_t(std::abs(value) <  1 ? 1: (1 + std::log10(std::abs(value)))); 

std::ostringstream out; 
out << std::setprecision(std::numeric_limits<T>::digits10 - left ) << std::fixed << value;  
std::string str = out.str(); //str = "2369.00013369900"

std::ostringstream out2; 
out2 << std::setprecision(std::numeric_limits<T>::digits10 ) << std::fixed << value;  
std::string str2 = out2.str(); // str2 = "2369.000133698999900" 
```

我想知道 std::stringstream/precision 如何格式化浮点数。似乎如果精度参数优于`16`非小数位数的负数，这会导致表格格式`"2369.000133698999900"`而不是“好”`"2369.00013369900"`

即使我没有告诉它对（如作为参数传递给函数）进行四舍五入，如何`std::stringstream`知道它`8999900`必须恢复为一个？但不要为高于 12 的参数执行此操作`9``8``12``setprecision`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:21:55.630

将二进制浮点格式化为十进制值是相当棘手的。潜在的问题是二进制浮点不能准确地表示十进制值。即使是像 0.1 这样的简单数字也无法使用二进制浮点数精确表示。即表示的实际值略有不同。当使用聪明的算法进行读取（“Bellerophon”）和格式化（“Dragon4”；这些是原始论文中的名称并且在实践中使用的两种算法都有改进）时，浮点数用于传输十进制值。然而，当要求算法格式化比它实际可以容纳的更多的十进制数字时，即超过`std::numeric_limits<T>::digits10`，它会很乐意这样做，[部分地]显示它实际存储的值。

格式化算法（“Dragon4”）假定给定的值是最接近浮点类型可表示的原始值的值。它使用此信息以及当前位置的误差估计来确定正确的数字。该算法本身并不简单，我还没有完全理解它是如何工作的。Guy L. Steele Jr. 和 Jon L. White 在论文“如何准确地打印浮点数”中对此进行了描述。

# objective-c - Objective-C：需要关于在 init 方法中设置实例变量的建议

> ID：13104172
> 
> 赞同：1
> 
> 时间：2012-10-27T21:03:34.247
> 
> 标签：objective-c, ios, ios5, getter-setter

我正在使用 ARC。

这是我的 .h 文件

```
...
- (id)initWithCoordinate:(CLLocationCoordinate2D)c title:(NSString *)t;

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
... 
```

这是我的 .m 文件

```
....
@synthesize coordinate, title;

- (id)initWithCoordinate:(CLLocationCoordinate2D)c title:(NSString *)t
{
    self = [super init];
    if (self) {
        coordinate = c;
        [self setTitle:t];
     }
    return self;
}
.... 
```

1.  以这种方式设置坐标，正确的方法吗？鉴于我将其声明为`readonly`，这似乎是唯一的方法。如果我只使用默认值（即`readwrite`）怎么办，在这种情况下，我应该使用 setter 方法 [self setCoordinate] 来代替吗？

2.  我也可以通过这样做来设置标题`title = t`。与使用setter方法相比，结果是一样的，但有什么区别呢？

* * *

谢谢！希望我能接受你所有的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T03:34:58.133

您实际上应该一直直接在初始化方法中设置*ivars*。无论您是否拥有`readonly`或`readwrite`财产，这都是正确的。这里的[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6)甚至是这样说的。

这背后的原因与继承有关。如果有人要对您的类进行子类化并覆盖您的属性的设置器，以便他们绕过您创建的 ivars（或做一些其他古怪的事情），那么突然之间，您的初始化方法的原始实现现在不再执行其编写的操作. 特别是，由于子类覆盖了您的访问器，您的初始化程序最终可能会创建一个具有奇怪状态的对象。在 ARC 之前的日子里，当这种事情发生时，你也可能会遇到棘手的（或者只是直接坏掉的）记忆情况。要点是：您应该编写初始化程序，以便它们始终创建具有已知有效状态的对象。

因此（假设您使用的是 ARC）您的初始化程序实际上应该是：

```
- (id)initWithCoordinate:(CLLocationCoordinate2D)c title:(NSString *)t
{
    self = [super init];
    if (self) {
        coordinate = c;
        title = [t copy];
     }
    return self;
} 
```

就个人而言，我更喜欢用下划线开头的 ivars 来说明我何时使用该属性以及何时直接访问该 ivar（LLVM 4.0 现在也这样做以自动合成属性）。

```
@synthesize coordinate = _coordinate;
@synthesize title = _title;

- (id)initWithCoordinate:(CLLocationCoordinate2D)c title:(NSString *)t
{
    self = [super init];
    if (self) {
        _coordinate = c;
        _title = [t copy];
     }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T03:06:32.010

1：就像您现在的代码一样，是的，这是正确的方法。如果您没有使用 ARC（假设您目前正在使用），您还希望保留该值以声明所有权。这将在 ARC 下自动完成。请记住，这不是唯一的方法；`readwrite`您可以在实现文件中的类扩展中重新声明该属性。这是一种常见的做法，它允许您在拥有该`readwrite`属性的同时仍为`readonly`该类的用户提供该属性的好处。前任。

```
//MyClass.h

@interface MyClass : NSObject
@property (nonatomic, strong, readonly) NSNumber* number;
- (void) initWithNumber:(NSNumber*)number;
@end

//MyClass.m

@interface MyClass ()
@property (nonatomic, strong, readwrite) NSNumber* number;
@end

@implementation MyClass
//this changes the instance variable backing the property to _number.
@synthesize number = _number;

- (void) initWithNumber:(NSNumber*)number{
    self = [super init];
    if (self) {
        self.number = number;
    }
    return self;
}
@end 
```

归根结底，我想说尽可能使用 setter 来保持 KVO 兼容是一个好习惯，这样你就可以随时知道值何时发生变化。例如，如果您有一个自定义 UIView，其属性反映在其外观中，您可能希望在它更改时重新显示自己。最简单的方法是自己实现 setter 并`setNeedsDisplay`在设置值后调用。如果您直接设置支持属性的实例值，则无法做到这一点；该类的用户必须记住`setneedsDisplay`每次手动设置时都要调用。

2：一个是通过setter方法，让你知道什么时候要设置一个值，而一个是为支持属性的实例变量设置一个值。setter 方法将始终以它被告知的方式处理内存管理，而如果您直接分配给实例变量，则由您来执行诸如为setter 设置`copy`值之类的事情`copy`，以便您保持一些一致的方案。如果您不小心，有时会通过 setter 而不是其他人会导致一些令人讨厌的错误。从不通过 setter 很难知道值何时发生变化，从而几乎不可能清除无效值。例如，如果你有一个`int`如果您想将属性限制为某个范围内的值，并且有人传入了低于最小限制的值，则您可能希望将该属性设置为该范围内可能的最低值。如果没有首先通过设置器的值，您将无法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T21:08:22.790

是的，可以这样设置。如果您更喜欢始终使用属性，则可以在类扩展中将属性覆盖为读/写而不是只读。在 Foo.m 中：

```
@interface Foo ()
@property (nonatomic) CLLocationCoordinate2D coordinate;
@end

@implementation Foo {
    // ...
    self.coordinate = c;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T22:06:58.823

1.  以这种方式设置坐标是正确的，如果您声明了 property ，这是唯一的方法`readonly`。

2.  使用 设置标题与使用`title = t`设置标题不同`[self setTitle:t]`。如果您直接分配给实例变量，您将只保留`NSString`作为参数传递的实例`t`。但是如果您使用访问器方法，访问器将要求字符串复制自身（因为您声明了属性`copy`）。如果您作为参数给出的字符串`t`实际上是一个`NSMutableString`，那么您将获得它的不可变副本。如果您作为参数给出的字符串`t`已经是一个不可变的字符串，它只会在被要求复制时返回自己。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T22:00:22.103

```
self.coordinate = c; 
```

本质上编译为与调用相同

```
[self setCoordinate:c]; 
```

`coordinate = c`和之间的区别在于`[self setCoordinate:c];`，第一个只是直接设置一个变量，而第二个是调用方法。

需要警惕的原因是方法可能会产生副作用，具体取决于实现的编写方式，例如（愚蠢的例子）

```
- (void)setCoordinate:(CLLocationCoordinate2D)coordinate;
{
    _coordinate = coordinate;
    [self doSomethingCrazy];
} 
```

# jquery - 使用 jQuery 的点击事件时出错

> ID：13104177
> 
> 赞同：9
> 
> 时间：2012-10-27T21:04:15.530
> 
> 标签：jquery

那里。我正在使用 jQuery 向一些用于日历的按钮添加点击处理程序，但上下文似乎并不重要。我已经尝试在 click 事件调用的函数中放置任何东西（或什么都没有）。

如果我连续单击该按钮几次（三到四次），则会出现错误。它实际上似乎并不影响函数本身的执行。它只是抛出一个错误，这显然与我有关。

有问题的代码如下：

`$("#backward").click(function(event){. . .});`

我得到的错误是：

```
Error in event handler for 'undefined': INDEX_SIZE_ERR: DOM Exception 1 Error: Index or size was negative, or greater than the allowed value.
at J (chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:14:142)
at null.<anonymous> (chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:17:184)
at chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:1:182
at miscellaneous_bindings:286:9
at chrome.Event.dispatchToListener (event_bindings:379:21)
at chrome.Event.dispatch_ (event_bindings:365:27)
at chrome.Event.dispatch (event_bindings:385:17)
at Object.chromeHidden.Port.dispatchOnMessage (miscellaneous_bindings:253:22) event_bindings:369
chrome.Event.dispatch_ event_bindings:369
chrome.Event.dispatch event_bindings:385
chromeHidden.Port.dispatchOnMessage miscellaneous_bindings:253 
```

显然，问题在于那个扩展，它只是[Google Dictionary](https://chrome.google.com/webstore/detail/google-dictionary-by-goog/mgijmajocgfcbeboacabfgobmjgjcoja)。

我不确定是我的问题还是那个问题，但我希望我的网站不要与谷歌词典发生冲突......

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T22:54:05.980

如果它与其他东西发生冲突，您可以随时使用：

```
$("#backward").click(function(e){
    e.preventDefault();
    . . .
}); 
```

# c - gcc编译的程序运行速度比g++编译的快

> ID：13104178
> 
> 赞同：7
> 
> 时间：2012-10-27T21:04:24.667
> 
> 标签：c, performance, gcc, g++

> **可能重复：**
> [C 程序的 gcc 和 g++ 之间的性能差异](https://stackoverflow.com/questions/3302657/performance-difference-between-gcc-and-g-for-c-program)

当我偶然注意到使用 gcc 编译的程序比使用 g++ 编译的程序运行得更快时，我正在检查使用循环控制变量的寄存器存储说明符来提高性能。有人可以向我解释吗？

这是代码：

```
#include <stdio.h>

const unsigned long scope = 1000000000;

int main()
{
    register unsigned long i;
    for (i=0; i < scope; i++);
    return 0;
} 
```

;

```
gcc register.c
time ./a.out   
real    0m0.466s
user    0m0.468s
sys     0m0.000s

g++ register.c
time ./a.out 
real    0m0.923s
user    0m0.920s
sys     0m0.000s 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:19:40.107

我可以重现行为（gcc-4.6.2），生成的程序集的相关部分是

C：

```
.L3:
    addq    $1, %rbx
.L2:
    movq    scope(%rip), %rax
    cmpq    %rax, %rbx
    jb      .L3 
```

C++：

```
.L3:
    addq    $1, %rbx
.L2:
    cmpq     $999999999, %rbx
    setbe    %al
    testb    %al, %al
    jne      .L3 
```

因此 C 编译器产生了更好的循环测试。不要问我为什么，我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:12:12.480

虽然我无法在 i5 M520 ( `gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3`) 上获得相同的结果，但我确实看到了反汇编输出的差异。

```
$ sdiff f.S  f_cpp.S 
...
00000000004004b4 <main>:                                        00000000004004b4 <main>:
  4004b4:       55                      push   %rbp               4004b4:       55                      push   %rbp
  4004b5:       48 89 e5                mov    %rsp,%rbp          4004b5:       48 89 e5                mov    %rsp,%rbp
  4004b8:       53                      push   %rbx               4004b8:       53                      push   %rbx
  4004b9:       bb 00 00 00 00          mov    $0x0,%ebx          4004b9:       bb 00 00 00 00          mov    $0x0,%ebx
  4004be:       eb 04                   jmp    4004c4 <main+0     4004be:       eb 04                   jmp    4004c4 <main+0
  4004c0:       48 83 c3 01             add    $0x1,%rbx          4004c0:       48 83 c3 01             add    $0x1,%rbx
  4004c4:       48 8b 05 05 01 00 00    mov    0x105(%rip),%r |   4004c4:       48 81 fb ff c9 9a 3b    cmp    $0x3b9ac9ff,%r
  4004cb:       48 39 c3                cmp    %rax,%rbx      |   4004cb:       0f 96 c0                setbe  %al
  4004ce:       72 f0                   jb     4004c0 <main+0 |   4004ce:       84 c0                   test   %al,%al
  4004d0:       b8 00 00 00 00          mov    $0x0,%eax      |   4004d0:       75 ee                   jne    4004c0 <main+0
  4004d5:       5b                      pop    %rbx           |   4004d2:       b8 00 00 00 00          mov    $0x0,%eax
  4004d6:       5d                      pop    %rbp           |   4004d7:       5b                      pop    %rbx
  4004d7:       c3                      retq                  |   4004d8:       5d                      pop    %rbp
  4004d8:       90                      nop                   |   4004d9:       c3                      retq   
  4004d9:       90                      nop                   <
  4004da:       90                      nop                       4004da:       90                      nop
  4004db:       90                      nop                       4004db:       90                      nop 
```

以下是 gcc/C 在分析时的表现：

```
 Percent |  Source code & Disassembly of f_c
------------------------------------------------
         :
         :
         :
         :  Disassembly of section .text:
         :
         :  00000000004004b4 <main>:
    0.00 :    4004b4:       push   %rbp
    0.00 :    4004b5:       mov    %rsp,%rbp
    0.00 :    4004b8:       push   %rbx
    0.00 :    4004b9:       mov    $0x0,%ebx
    0.00 :    4004be:       jmp    4004c4 <main+0x10>
   48.97 :    4004c0:       add    $0x1,%rbx
    0.00 :    4004c4:       mov    0x105(%rip),%rax        # 4005d0 <scope>
   51.03 :    4004cb:       cmp    %rax,%rbx
    0.00 :    4004ce:       jb     4004c0 <main+0xc>
    0.00 :    4004d0:       mov    $0x0,%eax
    0.00 :    4004d5:       pop    %rbx
    0.00 :    4004d6:       pop    %rbp 
```

以下是 g++ 在分析时的表现：

```
 Percent |  Source code & Disassembly of g_cpp
------------------------------------------------
         :
         :
         :
         :  Disassembly of section .text:
         :
         :  00000000004004b4 <main>:
    0.00 :    4004b4:       push   %rbp
    0.00 :    4004b5:       mov    %rsp,%rbp
    0.00 :    4004b8:       push   %rbx
    0.00 :    4004b9:       mov    $0x0,%ebx
    0.00 :    4004be:       jmp    4004c4 <main+0x10>
   49.49 :    4004c0:       add    $0x1,%rbx
    0.00 :    4004c4:       cmp    $0x3b9ac9ff,%rbx
   11.24 :    4004cb:       setbe  %al
   39.27 :    4004ce:       test   %al,%al
    0.00 :    4004d0:       jne    4004c0 <main+0xc>
    0.00 :    4004d2:       mov    $0x0,%eax
    0.00 :    4004d7:       pop    %rbx
    0.00 :    4004d8:       pop    %rbp 
```

# javascript - 在heroku上运行shadowsocks-nodejs

> ID：13104185
> 
> 赞同：3
> 
> 时间：2012-10-27T21:05:46.570
> 
> 标签：javascript, node.js, ssl, heroku

我要完成的工作：让[shadowsocks-node.js](https://github.com/clowwindy/shadowsocks-nodejs)在 heroku 上运行。

> shadowsocks-nodejs 是一个轻量级的隧道代理，可以帮助你通过防火墙。

我让它在同一台机器上的两个进程本地运行。
我的下一步是将其部署到 heroku 并在那里运行 server.js 并在我的机器上本地运行 local.js。但是，我似乎无法建立连接。

我的问题：服务器进程似乎拒绝了连接。

* * *

节点 local.js 输出：

```
calculating ciphers
server listening at port 1080
server connected
concurrent connections: 1
remote connection refused
server connected
concurrent connections: 1
remote connection refused
server connected 
```

等等...

server.js 输出（通过`heroku logs`）：

```
012-10-27T20:39:57+00:00 app[web.1]: server connected
2012-10-27T20:39:57+00:00 app[web.1]: concurrent connections: 1
2012-10-27T20:39:57+00:00 app[web.1]: server disconnected
2012-10-27T20:39:57+00:00 app[web.1]: concurrent connections: 0
2012-10-27T20:42:02+00:00 app[web.1]: server connected
2012-10-27T20:42:02+00:00 app[web.1]: concurrent connections: 1
2012-10-27T20:42:02+00:00 app[web.1]: server disconnected 
```

等等。

Chrome 会返回错误：

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

（说得通）

* * *

这是shadowsocks使用的我的config.json：

```
{
    "server":["https://damp-woodland-7539.herokuapp.com"],
    "server_port":58954,
    "local_port":1080,
    "password":"barfoo!",
    "timeout":60
} 
```

我编辑 server.js 来阅读（第 31 行）：

```
//PORT = config.server_port;
PORT = process.env.PORT || 5000; 
```

正如对heroku应用程序的建议。

这是我的 package.json 文件：

```
{
  "name": "shadowsocks-nodejs",
  "scripts": {
    "start": "server.js"
  },
  "version": "0.0.1",
  "engines": {
    "node": "0.8.x"
  },
  "dependencies": {
    "fs": "*",
    "net": "*"
  }
} 
```

* * *

这可能只是一个简单的设置问题或一些不正确的地址。如果你们中的某个人可以帮助我，那就太好了。
非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:35:56.660

shadowsocks-nodejs 与 Heroku 不兼容。它使用原始套接字，而 Heroku 仅提供 HTTP 访问。

您可以在 VPS 上部署 shadowsocks-nodejs 并完全自由地使用原始套接字，或者如果您想要免费代理，请使用[shadowsocks-dotcloud 。](https://github.com/clowwindy/shadowsocks-dotcloud)

* * *

编辑：

之所以没有shadowsocks-heroku是因为Heroku没有websocket支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T15:51:11.200

看看这个：

shadowsocks-heroku 是一个轻量级的隧道代理，可以帮助你通过防火墙。它是 shadowsocks 的一个端口，但通过不同的协议。

shadowsocks-heroku 使用 WebSockets 而不是原始套接字，因此它可以部署在 heroku 上。

请注意，该协议与原始 shadowsocks 不兼容。

[https://github.com/mrluanma/shadowsocks-heroku](https://github.com/mrluanma/shadowsocks-heroku)

# javascript - 什么是编译成可读 js 的轻量级 lisp 方言？

> ID：13104186
> 
> 赞同：11
> 
> 时间：2012-10-27T21:05:48.383
> 
> 标签：javascript, lisp, scheme, racket

使用 JS 自己的类型编译成简短、可读和可修改的 JS 的 lisp 方言是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T21:13:20.187

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T06:16:24.490

[Parenscript](http://common-lisp.net/project/parenscript/)非常轻量级和可读性。并且您使用[slime-proxy](https://github.com/3b/slime-proxy)为它使用了一个优越的交互环境。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-28T12:46:17.093

我认为最先进的之一是 ClojureScript。它是一个非常完整的 clojure 实现，可以编译为可读或缩小的 JS。

[https://github.com/clojure/clojurescript](https://github.com/clojure/clojurescript)

如果你想开始，也许看看这个：http: [//clojurescriptone.com/](http://clojurescriptone.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T00:09:56.003

[LispyScript](http://lispyscript.com/)，[Sibilant](http://sibilantjs.info/#welcome)做得很好。[Parenscript](http://common-lisp.net/project/parenscript/)，正如 Vsevolod Dyomkin 所建议的那样，但你需要 Common Lisp。Óscar López 的回答提供了其他可能性的[列表](https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-compile-to-JS)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-23T09:35:33.123

[Wisp](https://github.com/Gozala/wisp)的既定设计目标完全符合 OP 的要求。

它类似于 Clojure，但具有 JS 语义并且开销很小。如果 ClojureScript 保留 Clojure 语义的方法即使花费 12k 行开销也不适合您。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-29T03:23:24.450

这是一个有点深奥的答案，但是您可以通过[Lisk](https://github.com/chrisdone/lisk#readme)和[Fay](http://fay-lang.org/)的组合将类似 Haskell 的 lisp 编译为 JS 。

一方面，我真的很喜欢 Lisk 的想法，但它在 Haskell 社区中并不是很流行，更不用说维护了。另一方面，Fay 进展顺利，其主要目标之一是编译为可读的 JS。两者都是由 Chris Done 撰写的。

# jquery - jQuery Cycle 寻呼机动画/过渡

> ID：13104191
> 
> 赞同：1
> 
> 时间：2012-10-27T21:06:39.140
> 
> 标签：jquery, jquery-cycle

有没有办法使用 jQuery 循环插件为寻呼机进行转换？现在它只是向活动寻呼机添加一个类。但这看起来不是很酷。如果它可以在淡入下一个寻呼机的同时淡出该类，那就更好了。或者，如果可能有一个覆盖在寻呼机上滑动。

我没有任何示例代码。但这里是可用选项的链接：

[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

我自己不太擅长 jQuery，所以我希望你们中的一个人知道这些选项是否有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:12:51.670

尝试添加此选项

```
animIn:  { opacity:1 }, animOut: { opacity:0 } 
```

如果您可以通过循环校准线，我可以更具体

# macos - 在 OSX 上编译 Z3

> ID：13104196
> 
> 赞同：1
> 
> 时间：2012-10-27T21:07:29.550
> 
> 标签：macos, compilation, z3

我正在尝试编译 Z3 版本 4.1.2。成功配置后，当您执行“make”时，我收到以下错误：

```
Makefile:151: lib.srcs: No such file or directory
Makefile:152: shell.srcs: No such file or directory
Makefile:153: test.srcs: No such file or directory
Making test.srcs...
/usr/local/bin/dos2unix takes only stdin and stdout
make: *** [test.srcs] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:11:37.623

我认为问题在于所有文本文件都`z3-src-4.1.2.zip`使用“回车”（cr）和“换行”（lf）来编码行终止。zip 是在 Windows 机器上创建的。另一个问题是“dos2unix”应用程序。它是一个将 windows/dos 文本文件转换为 unix/linux/osx 文本文件的应用程序。这是一个非常简单的应用程序。它只是用 lf 替换 cr/lf。在 Linux 上，此应用程序采用一个参数：要修改的文件名。

我目前正在开发一个新的构建系统来避免这个问题。同时，这里有一些解决方法。

1) 使用 git 检索源。git 将处理 cr/lf vs lf 问题。这是检索 Z3 的命令：

git 克隆[https://git01.codeplex.com/z3](https://git01.codeplex.com/z3)

如果这样做，则不需要使用 dos2unix。因此，您可以删除 Makefile.in 中的 @$(DOS2UNIX) 行。另一种选择是在 Makefile.in 的开头将 DOS2UNIX=@D2U@ 替换为 DOS2UNIX=touch

在这些更改之后，您应该能够在 OSX 上编译它。我在 OSX 10.7 上成功编译了它。

2）获取“不稳定”分支。

[http://z3.codeplex.com/SourceControl/changeset/view/946a06cddbe4](http://z3.codeplex.com/SourceControl/changeset/view/946a06cddbe4)

这是当前的“工作分支”。它包含新的构建系统。它尚未准备好，但足以生成 Z3 可执行文件。以下是使用此分支构建 Z3 的说明

从上面的页面下载代码。或者使用 git 来检索“不稳定”的分支。然后，执行

```
 autoconf
   ./configure
   python scripts/mk_make.py
   cd build
   make 
```

上周五我设法在 OSX 10.7 上编译它。

3) 保留 .zip，但转换所有文本文件。我正在使用以下 python 脚本来转换新构建系统中的所有文件。如果您在 Z3 根目录中执行此 python 脚本，它将转换所有文件。

```
import os
import glob
import re
import getopt
import sys
import shutil

def is_cr_lf(fname):
    # Check whether text files use cr/lf
    f = open(fname, 'r')
    line = f.readline()
    sz = len(line)
    return sz >= 2 and line[sz-2] == '\r' and line[sz-1] == '\n'

# dos2unix in python
#    cr/lf --> lf
def dos2unix(fname):
    if is_cr_lf(fname):
        fin  = open(fname, 'r')
        fname_new = '%s.new' % fname
        fout = open(fname_new, 'w')
        for line in fin:
            line = line.rstrip('\r\n')
            fout.write(line)
            fout.write('\n')
        fin.close()
        fout.close()
        shutil.move(fname_new, fname)
        if is_verbose():
            print "dos2unix '%s'" % fname

def dos2unix_tree_core(pattern, dir, files):
    for filename in files:
        if fnmatch(filename, pattern):
            fname = os.path.join(dir, filename)
            if not os.path.isdir(fname):
                dos2unix(fname)

def dos2unix_tree():
    os.path.walk('.', dos2unix_tree_core, '*')

dos2unix_tree() 
```

# ipad - 试图围绕 Monotouch、故事板和 iPad 拆分视图应用程序？

> ID：13104202
> 
> 赞同：1
> 
> 时间：2012-10-27T21:08:36.457
> 
> 标签：ipad, xamarin.ios, storyboard, uisplitviewcontroller

大约两周以来，我一直在尝试掌握 MonoTouch。我的目标是使用 Xcode 界面/故事板生成器提供的主/细节拆分视图模板开发一个简单的 iPad 应用程序。

尽管我学到了很多东西，但我还是无法集中精力让拆分视图正常工作。我能够“绘制”界面，但后来我被卡住了。

我已经研究了许多在线示例（主要是基于 Objective-C 的示例，因为可用的基于 MonoTouch 的示例很少）。许多教程都是旧的（基于 Interface Builder 和 Xcode 3），而且许多似乎是在代码中随机创建界面部分。对于新手（不是编程，只是 iOS 开发）来说，要掌握它是一件相当困难的事情。

我的目标是用拆分视图控制器制作一个简单的应用程序；在主人中，我想要 5 个（静态）单元格。点击一个单元格将为我提供特定视图控制器的内容（在详细视图上）。就是这样。而已。我知道 MT.dialog，但我更喜欢使用原生 iOS 的东西。

任何线索都会很棒……教程、书籍、示例应用程序……随便什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:33:38.273

至于学习如何使用 Storyboard，我建议使用 Xamarin MonoTouch Documents 网站上提供的本教程：[Storyboards 简介](http://docs.xamarin.com/ios/Guides/User_Interface/Introduction_to_Storyboards)

使用单元格时，您将希望使用子类 UITableViewSource 类使用单元格填充 UITableView，您将覆盖各种方法以提供实现（例如 GetCell、RowSelected、HeightForRow 等）。当点击每个单元格时，您将需要使用您已子类化的 UITableViewSource 类的 RowSelected() 方法。然后，您将想要准确确定选择了哪个字符串，将其传递给详细视图的构造函数，并决定如何根据该数据显示详细屏幕！

[Xamarin 网站上的Working with Tables and Cells](http://docs.xamarin.com/ios/Guides/User_Interface/Tables)文档中有很多这样的示例（他们在解释过程方面做得更好）！

# user-interface - 我可以使用 Tkinter（或其他一些 GUI 库）同时选择文件和文件夹吗？

> ID：13104204
> 
> 赞同：2
> 
> 时间：2012-10-27T21:09:03.340
> 
> 标签：user-interface, python-3.x, tkinter

我正在使用 Python 编写一个简单的文件传输程序`Tkinter`，我希望能够同时选择文件和文件夹。

据我所知，我只能做一个或另一个，使用：

`tkinter.filedialog.askopenfilenames()`或`tkinter.filedialog.askdirectory()`。

是否有任何库可以让我同时选择文件和文件夹？

最好，我希望它返回当前目录中文件的文件名列表以及目录中文件的路径。类似于：

```
["file1.f", "dir1/file2.f", "dir1/dir2/file3.f"] etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T21:56:09.353

它看起来不像 Python 的任何主要 GUI 库都支持这个

*   PySide/PyQt
*   wxWidgets
*   pyGTK

我附上了一个你想要的黑客。

按钮在选择文件和选择目录之间切换......这不是最好的用户体验，但它有效吗？您可能能够获得与其他框架类似的东西，但我对它们不像对 PyQT/PySide 那样熟悉。如果您（出于某种原因）比 PySide 更喜欢它，这也应该在 PyQt 中工作。

```
import sys
from PySide.QtGui import QFileDialog, QApplication, QWidget, QMainWindow, QPushButton, QVBoxLayout, QHBoxLayout

app = QApplication(sys.argv)
win = QMainWindow()
main_layout = QVBoxLayout()
buttons = QHBoxLayout()
main_layout.addLayout(buttons)

def set_directories():
    filedialog.setFileMode(QFileDialog.Directory)

def set_files():
    filedialog.setFileMode(QFileDialog.AnyFile)

def on_file_selected(file):
    print(file)

set_files_btn = QPushButton("File")
set_files_btn.clicked.connect(set_files)
set_dirs_btn = QPushButton("Directory")
set_dirs_btn.clicked.connect(set_directories)

buttons.addWidget(set_files_btn)
buttons.addWidget(set_dirs_btn)

filedialog = QFileDialog()
main_layout.addWidget(filedialog)

filedialog.fileSelected.connect(on_file_selected)
filedialog.finished.connect(app.exit)
win.setCentralWidget(QWidget(win))
win.centralWidget().setLayout(main_layout)

win.show()
app.exec_() 
```

# gdb - 如何使用 GDB 调试从标准输入获取用户输入的程序？

> ID：13104206
> 
> 赞同：41
> 
> 时间：2012-10-27T21:09:44.957
> 
> 标签：gdb

我有一个程序，我正在尝试使用 gdb 对其进行调试。在程序内部，我有一些方法要求用户使用标准输入输入。当我在 gdb 中时，如何输入此输入？这样我就可以追踪我的方法是如何工作的？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-30T02:47:11.923

```
$ cat >foo <<EOF
something
EOF
$ gdb -quiet /bin/cat
Reading symbols from /bin/cat...(no debugging symbols found)...done.
Missing separate debuginfos, use: debuginfo-install coreutils-8.12-7.fc16.x86_64
(gdb) run <foo
Starting program: /bin/cat <foo
something
[Inferior 1 (process 22436) exited normally]
(gdb) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-12-01T12:37:11.293

您也可以先运行您的程序，然后将 GDB 附加到它：

```
gdb --pid $(pgrep your_program) 
```

这样，您将能够在单独的终端中以交互方式运行您的程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-30T13:43:37.450

我昨天刚刚经历了这样的事情，并在 gdb 中递归了一堆“帮助”命令，因为我在 Internet 上找不到我需要的确切内容。

我`set variable *your_variable* = *your desired input*`在启动 gdb 并开始运行我的代码后使用。像魅力一样工作。

我知道这已经晚了，但也许它会帮助别人。

# jquery - jQuery流沙排序

> ID：13104208
> 
> 赞同：1
> 
> 时间：2012-10-27T21:09:57.523
> 
> 标签：jquery, sorting, quicksand

在 120 张图片（130x130px）的长面板上，使用[iosslider](http://www.iosscripts.com/iosslider/)给它触摸滑动滑动。我正在使用jQuery[流沙](http://razorjack.net/quicksand/)对4列中的块集合进行排序。所以我需要克隆它们，提取项目块，对它们进行排序并将它们重新添加到列（面板）中。

```
<div id="tiles_viewport">
  <div id="mouseSwipeScroll">
    <div class="panel">
        <div class="item" data-id="1" data-state="1"><img src="xxx" /></div>
        <div class="item" data-id="2" data-state="1"><img src="xxx" /></div>
        <div class="item" data-id="3" data-state="1"><img src="xxx" /></div>
        <div class="item" data-id="4" data-state="0"><img src="xxx" /></div>
    </div>
    <div class="panel">
        <div class="item" data-id="5" data-state="1"><img src="xxx" /></div>
        <div class="item" data-id="6" data-state="1"><img src="xxx" /></div>
        <div class="item" data-id="7" data-state="1"><img src="xxx" /></div>
        <div class="item" data-id="8" data-state="0"><img src="xxx" /></div>
    </div>
    <div class="panel">... 
```

CSS...

```
#tiles_viewport {
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: 535px;
  margin: 5px 0;
  padding: 0;
  overflow: hidden;
  z-index: 10;
}

#mouseSwipeScroll {
  -webkit-user-select: none;
  -moz-user-select: none;
  position: relative;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
}

#mouseSwipeScroll .panel {
  float: left;
  margin: 0;
  padding: 0;
  width: 130px;
  height: 535px;
  overflow: hidden;
}

#mouseSwipeScroll .panel .item {
  position: relative;
  margin: 0;
  padding: 0 5px 5px 5px;
  width: 120px;
  height: 130px;
} 
```

Javascript：

```
$(function() { 
  sortTiles = function() {
        var panels = $('.panel');
        var items = $(panels).children('.item');
        var sortedItems = $(items).clone();

        // sort //
        sortedItems.sort(function(a, b) {
            return parseInt($(b).data('state')) - parseInt($(a).data('state'));
        });

        // wrap into panels again //
        $.each(sortedItems, function(i, el) {
            if(i % 4 == 0) {
                sortedItems.slice(i , i+4).wrapAll('<div class="panel">');
            }
        });

        // animate //
        $(panels).quicksand(sortedItems, {
            duration: 800,
            easing: 'easeInOutQuad'
        });
      }
});

$(document).ready(function() {

      $('#tiles_viewport').iosSlider({
        snapToChildren: true,
        desktopClickDrag: true,
        startAtSlide: 4
      });
}); 
```

排序不起作用，并且 wrapAll 也没有添加封闭面板 div。一直在看这个很长一段时间，所以会很适合一些建议。

非常感谢，

抢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:46:44.773

我认为您的问题主要与跨多个面板对项目进行沙子排序有关，这会导致沙子排序插件行为不端。如果您可以不使用面板，我建议您仅将它们放入 1 个面板中，一切都会正常工作。

如果没有，我建议下面的解决方案，你有一个容器用于所有面板，在这个超级面板上进行沙子排序，然后在沙子排序完成后重建面板。我在下面放了一个工作示例：

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="https://github.com/razorjack/quicksand/raw/master/jquery.quicksand.js"></script>
<script type="text/javascript">
    function sortTiles() {
        var superpanel = $('.superpanel');
        var items = superpanel.find('.item');
        var sortedItems = items.clone();

        // sort //
        sortedItems.sort(function(a, b) {
            return parseInt($(b).data('state')) - parseInt($(a).data('state'));
        });

        // animate //
        superpanel.quicksand(sortedItems, {
            duration: 800
        }, function() {
           // wrap into panels again //
           var items = $('.superpanel .item');
           for(i=0; i<items.length; i+=4) {
                items.slice(i , i+4).wrapAll('<div class="panel">');
           }
        });

    }   
    $(function() {
        sortTiles();
    });
    </script>     
</head>
<html>
<body>
    <div class="superpanel">
        <div class="panel">
            <div class="item" data-id="4" data-state="4">Content 4</div>
            <div class="item" data-id="1" data-state="1">Content 1</div>
            <div class="item" data-id="3" data-state="3">Content 3</div>
            <div class="item" data-id="2" data-state="2">Content 2</div>
        </div>
        <div class="panel">
            <div class="item" data-id="8" data-state="8">Content 8</div>
            <div class="item" data-id="5" data-state="5">Content 5</div>
            <div class="item" data-id="7" data-state="7">Content 7</div>
            <div class="item" data-id="6" data-state="6">Content 6</div>
        </div>
    </div>
</body>
</html> 
```

* * *

**编辑**

这是另一种建议，即制作列并同时将它们放在一个面板中，而不是重新组合，这会使动画变得丑陋。

```
<html>
<head>
<style>
    .item {
        display: inline-block;
        width: 40%;
    }
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="https://github.com/razorjack/quicksand/raw/master/jquery.quicksand.js"></script>
<script type="text/javascript">
    function sortTiles() {
        var superpanel = $('.superpanel');
        var items = superpanel.find('.item');
        var sortedItems = items.clone();

        // sort //
        sortedItems.sort(function(a, b) {
            return parseInt($(b).data('state')) - parseInt($(a).data('state'));
        });

        // animate //
        superpanel.quicksand(sortedItems, {
            duration: 800
        });

    }   
    $(function() {
        window.setTimeout(sortTiles, 1000);
    });
    </script>     
</head>
<html>
<body>
    <div class="superpanel">
            <div class="item" data-id="4" data-state="4">Content 4</div>
            <div class="item" data-id="1" data-state="1">Content 1</div>
            <div class="item" data-id="3" data-state="3">Content 3</div>
            <div class="item" data-id="2" data-state="2">Content 2</div>
            <div class="item" data-id="8" data-state="8">Content 8</div>
            <div class="item" data-id="5" data-state="5">Content 5</div>
            <div class="item" data-id="7" data-state="7">Content 7</div>
            <div class="item" data-id="6" data-state="6">Content 6</div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:08:03.353

您的代码中的缺陷`sort()`只是对 jQuery 对象进行排序，但不会更改 DOM。下面简单地添加一行来清空现有内容并将`wrapAll`概念更改为创建一个新的 div 并立即将其插入到 DOM 中

```
var panels = $('.panel');
var items = $(panels).children('.item');
var sortedItems = $(items).clone(); // sort //

$('#content').empty();

sortedItems.sort(function(a, b) {
    return parseInt($(b).data('state')) - parseInt($(a).data('state'));
});

$.each(sortedItems, function(i, el) {
    if (i % 4 == 0) {
        $('<div class="panel">').append(  sortedItems.slice(i, i + 4)).appendTo('#content')
    }
}); 
```

演示：http: [//jsfiddle.net/yMtwp/](http://jsfiddle.net/yMtwp/)

# c# - 在网络中查找打开的 TCP 端口

> ID：13104215
> 
> 赞同：5
> 
> 时间：2012-10-27T21:11:12.860
> 
> 标签：c#, sockets, port

我正在尝试构建一个网络应用程序。我已经成功地制作了一个发送和接收包的服务器。到目前为止，已经在一台指向 127.0.0.1 的计算机上完成了测试（没有像家这样的地方）。现在我想切换到网络。如何在 LAN 网络上找到正在侦听我的特定端口的计算机？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:26:08.473

该服务将需要在已知端口上侦听[广播消息](http://codeidol.com/csharp/csharp-network/IP-Multicasting/What-Is-Broadcasting/)（如果您想表现得非常好，您可以[向 IANA 注册程序和端口号](https://www.rfc-editor.org/rfc/rfc6335)），当它听到广播消息时，它会回复发送者服务器的 IP 和服务正在侦听传入连接的端口。

这是上面链接中的一个简单示例，它只是打印到控制台，连接了谁以及在哪个端口上，但您可以使用此信息在两个端点之间建立 TCP 或 UDP 连接。

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
class RecvBroadcst
{
  public static void Main()
  {
   Socket sock = new Socket(AddressFamily.InterNetwork,
           SocketType.Dgram, ProtocolType.Udp);
   IPEndPoint iep = new IPEndPoint(IPAddress.Any, 9050);
   sock.Bind(iep);
   EndPoint ep = (EndPoint)iep;
   Console.WriteLine("Ready to receive…&quot;);
   byte[] data = new byte[1024];
   int recv = sock.ReceiveFrom(data, ref ep);
   string stringData = Encoding.ASCII.GetString(data, 0, recv);
   Console.WriteLine("received: {0} from: {1}",
              stringData, ep.ToString());
   data = new byte[1024];
   recv = sock.ReceiveFrom(data, ref ep);
   stringData = Encoding.ASCII.GetString(data, 0, recv);
   Console.WriteLine("received: {0} from: {1}",
              stringData, ep.ToString());
   sock.Close();
  }
} 
```

* * *

作为一个psudo示例，这里是关于我将如何做的事件序列。

对于此示例，假设我们有一个 IP`192.168.1.0`和子网为 的网络`255.255.255.0`。我们有两台服务器，`Server1`在`192.168.1.2`服务监听端口`1234`，`Server2`在服务`192.168.1.3`端口`4567`。两者都在端口上列出`3000`广播消息。连接的客户端将在 IP`192.168.1.4`

1.  [客户端在动态端口范围](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt)（49152-65535）中选择一个随机端口并在UDP上绑定到它（本例中为50123端口）并监听。
2.  客户端向其本地子网 ( ) 的广播地址和已知端口广播，`192.168.1.255:3000`使用与他正在侦听的相同的端口进行发送。他发送某种有效负载，因此服务器只发送回您的客户端，而不是碰巧使用与您相同端口的其他人。（假设它发送字符串`Send me your info for XYZ app!`）
3.  Server1 接收广播。检查消息是否正确`Send me your info for XYZ app!`，并将 UDP 消息发送`Name:Server1 IP:192.168.1.2 Port:1234`回发送者源端口和 IP 组合 ( `192.168.1.4:50123`)
4.  Server2 也接收广播。检查消息是否正确`Send me your info for XYZ app!`，并将 UDP 消息`Name:Server2 IP:192.168.1.3 Port:4567`消息发送回发送方源端口和 IP 组合 ( `192.168.1.4:50123`)
5.  客户端在他发送消息的同一端口上接收到两条 UDP 消息。他解析回复并向用户显示可连接的两台服务器。

# javascript - sprite.js（canvas）中的滚动表面背景

> ID：13104218
> 
> 赞同：2
> 
> 时间：2012-10-27T21:11:41.153
> 
> 标签：javascript, canvas, sprite

我正在制作一个基于图块的浏览器游戏，`Sprite.js`用于与画布交互。[https://github.com/batiste/sprite.js/](https://github.com/batiste/sprite.js/)

这是我现在得到的（PC版有更大的可见区域）： [http ://www.youtube.com/watch?v=l3c-cmWUVrc](http://www.youtube.com/watch?v=l3c-cmWUVrc)

由于性能原因，每帧重绘每个图块并不容易，所以我尝试`scrolling.js`使用`sprite.js`. 这里有一个示例[http://batiste.dosimple.ch/sprite.js/tests/test_scrolling.html](http://batiste.dosimple.ch/sprite.js/tests/test_scrolling.html)该示例有效，但似乎`ScrollingSurface.update`有问题或者我缺少一些东西。

我试图做的是绘制 5x5 瓷砖，5 秒后在第一个瓷砖附近再绘制 5x5 瓷砖。但它只绘制第一个。并且`surface.update()`只更新表面的位置。这是我的代码[https://github.com/Sektoid/sprite.js/blob/master/tests/test_scrolling.html](https://github.com/Sektoid/sprite.js/blob/master/tests/test_scrolling.html)`scrolling.js` （如果你想避免绘制相同的瓷砖，你还需要设置 this.divider = 1.0 4 次.) 没有任何 sprite.js-forums 与其他 sprite 和游戏引擎一样，但它快速且非常有用。看看吧！请帮助我:)

# coffeescript - Coffeescript - 改进算法以增加分组

> ID：13104221
> 
> 赞同：2
> 
> 时间：2012-10-27T21:11:53.703
> 
> 标签：coffeescript

下面的代码有效，但我想知道是否有更好的方法可以使用我不熟悉的咖啡脚本的一些功能。

问题是，我需要对项目进行分页，但分页每次都会增加。

如果我以数字 20 为例，它将创建以下页面：

1 - 3 4 - 7 8 - 15 16 - 20

我有以下测试和代码确实通过了：

```
module 'Remainder',
  setup: ->
    @remainder = 20

test 'splits remainder incrementally', ->
  parts = @remainder.increasingSplit()
  equal parts[0], '1 - 3', ''
  equal parts[1], '4 - 7', ''
  equal parts[2], '8 - 15', ''
  equal parts[3], '16 - 20', ''

Number.prototype.increasingSplit = ->
  start = 1
  nextSplit = 3
  parts = []
  finished = false
  while !finished
    if nextSplit > @
      parts.push "#{start} - #{@}"
      break

    parts.push "#{start} - #{nextSplit}"
    start = nextSplit + 1
    nextSplit = nextSplit * 2 + 1

  parts 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:42:11.247

在不过多更改算法的情况下，您可以尝试以下操作：

```
Number::increasingSplit = ->
  start = 1
  nextSplit = 3
  parts = []
  while start <= @
    parts.push "#{start} - #{Math.min nextSplit, @}"
    start = nextSplit + 1
    nextSplit = nextSplit * 2 + 1
  parts 
```

变化是：

*   替换`.prototype`为`::`,
*   删除变量（因为无论如何`finished`都没有被有效使用）并完全删除并将条件更改为，`break``break``start <= @`
*   仅使用一个，以 和 之间的`parts.push <part>`最小值作为顶部。`nextSplit``@`

* * *

另外，我建议不要在这种情况下扩展 Number 原型。扩展原始类型的原型有时会导致奇怪的问题，例如：

```
Number::isFour = -> @ is 4
console.log 4.isFour() # -> false 
```

发生这种情况是因为该函数内部`@`将是一个 Number*对象*而不是原始数字，因此使`=== 4`比较总是失败。`isFour`如果您将其定义为独立函数，则不会发生这种情况：

```
isFour = (n) -> n is 4
console.log isFour 4 # -> true 
```

所以，我更喜欢这个版本`incrasingSplit`：

```
increasingSplit = (n) ->
  start = 1
  nextSplit = 3
  parts = []
  while start <= n
    parts.push "#{start} - #{Math.min nextSplit, n}"
    start = nextSplit + 1
    nextSplit = nextSplit * 2 + 1
  parts 
```

* * *

最后，如果您不介意递归，您可以使用更 FP 风格的算法 :)

```
increasingSplit = (n, start = 1, nextSplit = 3) ->
  if start > n
    []
  else
    part = "#{start} - #{Math.min nextSplit, n}"
    rest = increasingSplit n, nextSplit + 1, nextSplit * 2 + 1
    [part, rest...] 
```

# android - 如果启用了完全唤醒锁，唤醒锁是否会在设备锁定时自动释放

> ID：13104222
> 
> 赞同：0
> 
> 时间：2012-10-27T21:11:56.167
> 
> 标签：android, android-wake-lock

我正在开发一个 android 项目，我正在使用 PowerManager.FULL_WAKE_LOCK 来确保屏幕始终保持开启状态。

我想知道用户是否在获取唤醒锁时锁定了设备，唤醒锁是否会自动释放，或者我是否需要自己处理。

我做了一个谷歌搜索，但什么都想不出来。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:17:24.313

您应该仍然拥有锁定，请注意，一旦您释放锁定，如果在您仍然持有锁定的情况下达到超时时间，设备可能会立即进入待机状态。因此，如果某些自动事件释放锁定，屏幕可能会立即变黑。

# excel - 仅当填充其他单元格时，如何让excel合并单元格？

> ID：13104235
> 
> 赞同：0
> 
> 时间：2012-10-27T21:13:23.820
> 
> 标签：excel, excel-formula, vba

我需要使用公式合并单元格，以便仅在填充另一个选项卡上的单元格时才合并单元格。我有 2 个标签，每个标签的列数相同。我希望当填充Tab 2中的单元格A1-D1中的单元格1中合并，并且对于Tab 2中的D1值，将其输入到Tab 1中的新合并单元格中。这就是我所拥有的：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:43:18.517

## Excel VBA 方法和函数（Excel 宏）概述

由于您想更改单元格，我不相信您可以使用公式（甚至不是用户定义的公式）。因此，我为您的问题编写了一个 excel vba 宏。

*   FirstRows()：是起点。它循环超过 10 行并调用其他方法
*   CheckEmptyCellValues(curRow)：此方法检查 tab2 中的空单元格（excel 中的表 2）
*   MergeCells(curRow) 将当前行作为一个数字（从 1 到最大行数的任何整数）并合并 Sheet 1（excel 中的第一个工作表）上第 1 列到第 4 列的单元格

## 完全工作的演示测试了 4 列和 10 行

```
Sub FirstRows()
   Sheets(1).Select
   For curRow = 2 To 11
      Merge = CheckEmptyCellValues(curRow)
      If Merge = 4 Then
        MergeCells (curRow)
        cellValue = Sheets(2).Cells(curRow, 4).Value
        Sheets(1).Cells(curRow, 1).Value = cellValue
      End If
   Next
 End Sub

Sub MergeCells(curRow)
    Sheets(1).Select
    Range(Cells(curRow, 1), Cells(curRow, 4)).MergeCells = True
End Sub

Function CheckEmptyCellValues(curRow)
    Merge = 0
    Sheets(2).Select
    For i = 1 To 4
        If Len(Cells(curRow, i).Value) > 0 Then
            Merge = Merge + 1
        End If
    Next
    CheckEmptyCellValues = Merge
End Function 
```

您可以在下面看到结果。表 2 中的值已复制到表 1（第二张图像）。在工作表 1 中，如果在第一个图像（工作表 2）中每个单元格（从 a 列到 d 列），则合并一行中的单元格（在第 2 行中，从单元格 A2 到单元格 D2（A2-D2 现在只是一个单元格）连续有一个值。

![选项卡 2 中的数据源（表 2）](../Images/9ec0a00f3dfe5cdb5fc1655879e38921.png) ![工作表 1 上的合并单元格和复制值](../Images/011aa5435cc7d1b0bf8922a5761b9904.png)

## 修改后的代码中的错误

修改后的代码中有一些事情是不可能的或可能导致错误的理解

```
Function CheckEmptyCellValues(curColumn) 
  Merge = 0 
  Sheets(2).Select 
  For i = A To d 
    If Len(Cells(curColumn, 11).Value) > 0 Then 
        Merge = Merge + 1 
    End If 
  Next 
  CheckEmptyCellValues = Merge 
End Function 
```

1.  这条线`For i = A To d` 是不可能的。如果你想使用循环，你必须使用数字：`For i = 1 To 4` 这将从1 开始重复代码 4`For`次`Next`
2.  这条线`Cells(curColumn, 11).Value`在技术上是正确的，但具有误导性。Excel 使用后面的第一个值`(`作为行索引，使用第二个值作为列索引。两个值都必须是一个数字： Cells(4,2).Value 从第 4 个开始返回 Cell 值。行和第二列（在 Excel Gui 单元格 B4 中）

尝试将此行更改`For i = A To d`为此`For i = 1 To 4`并查看是否返回所需的结果。

### 错误第 2 部分

在您的其他修改中，您有一些相同的错误：

*   循环`For curColumn = A to d`需要数字而不是字母（除非 A 和 d 是一个用数字填充的变量，但根据您的代码示例，情况并非如此
*   该行`cellValue = Sheets(2).Cells(curColumn, d).Value`具有相同的错误，如果 d 只是字母 d 而不是类似的东西`d = 4`，则不能在循环中使用它。

这是您评论中的代码：

```
 Sub FirstRows() 
  Sheets(1).Select 
    For curColumn = A To d 
       Merge = CheckEmptyCellValues(curColumn) 
       If Merge = d Then 
          MergeCells(curColumn) 
          cellValue = Sheets(2).Cells(curColumn, d).Value 
          Sheets(1).Cells(curColumn, d).Value = cellValue 
       End If
    Next 
  End 
  Sub Sub MergeCells(curColumn) 
     Sheets(1).Select 
     Range(Cells(curColumn, 1), Cells(curColumn, d)).MergeCells = True 
  End Sub 
```

小心它没有运行。

# c - C - 有没有办法用更少的代码写这个？

> ID：13104241
> 
> 赞同：0
> 
> 时间：2012-10-27T21:14:23.640
> 
> 标签：c

编辑：我理解混乱。但正如@sergio 所说，我不想在这里优化，我想不出更好的词。

--

我已经用 JavaScript 和 PHP 编写代码很长时间了，有时我发现很难用 C 优化我的代码。

我所说的优化的意思是用更少的代码编写程序。这是一个例子：

```
int i;

srand(time(NULL));

for(i = 0; i < 10; i++){
    printf(" %d ", rand() % 300);
    if(i < 10 - 1){
        printf("|");
    }
} 
```

在Javascript中我会这样写：

```
var html = ''
for(var i = 0; i < 10; i++){
    html += ' '+Math.floor(Math.random() * 100)+' '+( i == 9 ? '|' : '' )
} 
```

C 中的不同之处在于我必须在另一行中执行 If，并且不能对字符串进行内联操作。我希望你明白我的意思。

那么你将如何编写我的代码？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:18:07.517

优化和编写最少的代码是**不同**的。

在 C 中，如果您只想压缩代码，可以使用**[三元运算符而不是 if 语句。](http://en.wikipedia.org/wiki/?%3a#C)**

但是，只要您在运行 N 次的 1 个循环中具有相同的 1 个条件，生成的汇编代码及其效率**可能不会改变，无论它看起来多么酷，因此请关注算法，而不是代码的简洁程度。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T21:18:15.627

“行数”传统上是对代码的不良判断，如果你在一行中塞进太多，它就会变得不可读。

```
for(i = 0; i < 10; i++)
    printf("%s %d ", i ? "|" : "", rand() % 300); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-27T21:44:32.137

这个答案是对 Murilo Vasconcelos 的回应：

使用[http://gcc.godbolt.org/](http://gcc.godbolt.org/)跟随。

```
#include <stdio.h>
#include <ctime>
#include <cstdlib>

int main() {
  int i;
  srand(time(NULL));
  for(i=0; i< 10; i++){
      printf(" %d ", rand() % 300);
      if(i < 10 - 1){
          printf("|");
      }
  }
} 
```

使用 g++-4.8 生成以下程序集：

```
.LC0:
    .string " %d "
main:
    pushq   %rbp
    xorl    %edi, %edi
    movl    $458129845, %ebp
    pushq   %rbx
    xorl    %ebx, %ebx
    subq    $8, %rsp
    call    time
    movl    %eax, %edi
    call    srand
    call    rand
    movl    $458129845, %edx
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %edx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
.L2:
    movl    $124, %edi
    addl    $1, %ebx
    call    putchar
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebp
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    cmpl    $9, %ebx
    jne .L2
    addq    $8, %rsp
    xorl    %eax, %eax
    popq    %rbx
    popq    %rbp
    ret 
```

另一方面，这段代码：

```
#include <stdio.h>
#include <ctime>
#include <cstdlib>    

int main() {
    int i;
    srand(time(NULL));

    for (i = 0; i < 9; i++) {
        printf(" %d |", rand() % 300);
    }

    printf(" %d ", rand() % 300);
} 
```

生成此程序集：

```
.LC0:
    .string " %d |"
.LC1:
    .string " %d "
main:
    pushq   %rbx
    xorl    %edi, %edi
    movl    $458129845, %ebx
    call    time
    movl    %eax, %edi
    call    srand
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $5, %edx
    sarl    $31, %eax
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC0, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    call    rand
    movl    $.LC1, %edi
    movl    %eax, %esi
    imull   %ebx
    movl    %esi, %eax
    sarl    $31, %eax
    sarl    $5, %edx
    subl    %eax, %edx
    xorl    %eax, %eax
    imull   $300, %edx, %edx
    subl    %edx, %esi
    call    printf
    xorl    %eax, %eax
    popq    %rbx
    ret 
```

换句话说，通过更改循环，它允许编译器展开循环，这应该是一个相当大的性能提升，如果不进行更改，您将无法获得。所以不要让人们对你大便。自己检查一下组装变成了什么，并不是所有的手动优化都是浪费时间。而且，当然，测试测试测试。

但是，当然，您不应该过早地进行优化。你应该关注你的分析器，让它告诉你你的热点是什么，以及你需要优化的地方。

首先是更好的算法。
然后更好的代码。
然后更好的组装。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T21:18:48.117

**编辑**：OP编辑了这个问题。

如果您只想制作内联代码：

```
int i = 0;
for (srand(time(NULL)); i < 10; printf("%d %s ", rand() % 300, (i++ < 9 ? "|" : ""))); 
```

# c++ - Windows 特定类型和本机类型 C++

> ID：13104242
> 
> 赞同：0
> 
> 时间：2012-10-27T21:14:27.547
> 
> 标签：c++, windows, winapi, visual-c++, win32gui

我开始学习 C++ 中的 Windows 编程。一段时间以来，我一直在编写 c++ 控制台应用程序。我的问题是，如果我有课：

```
class Example
{
    int x;
    char* y;
}; 
```

并想在我的 GUI 应用程序中使用它。我应该将 Example 成员的类型更改为 Windows 特定的类型吗？还是我应该只在与 GUI 相关的程序部分使用 windows 类型？哪个是最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:28:55.607

对此的答案可能在某种程度上基于偏好和用例。如果您要将对象中的数据传递到 windows API，则让您的数据类型与 windows 数据类型匹配可能是有意义的。

另一方面，我们有一些特定于平台的代码（例如 Windows 或 Mac GUI 代码）和一些可移植的代码。在可移植代码中，我们尽量坚持 C/C++ 类型，而在平台特定代码中，我们将使用平台特定类型。

所以简短的回答是没有正确的答案，但根据我在移植应用程序方面的经验，我个人会尽量坚持使用 C/C++ 类型。

# c++ - 如何声明和实现一个 const 和 inline 成员函数？

> ID：13104244
> 
> 赞同：5
> 
> 时间：2012-10-27T21:14:44.400
> 
> 标签：c++, methods

代码：

点3f.h

```
Class Point3f {
     ...
     inline void project2D(ProjType p, const Point2i& view) const;
}; 
```

point3f.cpp

```
inline void Point3f::project2D(ProjType p, const Point2i& view) const {
    switch(p) {
        case PROJ_XY:
            glVertex2f(x * view.x, y * view.y);
            break;
        case PROJ_YZ:
            glVertex2f(y * view.x, z * view.y);
            break;
        case PROJ_XZ:
            glVertex2f(x * view.x, z * view.y);
            break;
        default:
            break;
    }
} 
```

调用此函数会在编译时引发错误：

```
 undefined reference to `Point3f::project2D(ProjType, Point2i const&) const' 
```

我尝试了没有和有`inline`符号的每个案例：

`inline`在标题中，而不是在 cpp 中：

```
 Warning: inline function ‘void Point3f::project2D(ProjType, const Point2i&) const’ used but never defined [enabled by default
 undefined reference to `Point3f::project2D(ProjType, Point2i const&) const'| 
```

`inline`在标题中，也在 cpp 中：

```
 Warning: inline function ‘void Point3f::project2D(ProjType, const Point2i&) const’ used but never defined [enabled by default
 undefined reference to `Point3f::project2D(ProjType, Point2i const&) const'| 
```

`inline`不在标题中，而是在 cpp 中：

```
 undefined reference to `Point3f::project2D(ProjType, Point2i const&) const'| 
```

`inline`不在标头中，也不在 cpp 中：

```
 It works but that's not what I want 
```

问题：

1.  `const and inline member function`有意义吗？
2.  如何申报`const and inline member function`？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:19:30.373

存在的功能`const`与它无关。如果你想要它`inline`，你必须在头文件中定义它而不是在`point3f.cpp`. 例子：

```
class Point3f {
    ...
    inline void project2D(ProjType p, const Point2i& view) const
    {
        switch(p) {
        case PROJ_XY:
            glVertex2f(x * view.x, y * view.y);
            break;
        case PROJ_YZ:
            glVertex2f(y * view.x, z * view.y);
            break;
        case PROJ_XZ:
            glVertex2f(x * view.x, z * view.y);
            break;
        default:
            break;
        }
    }
}; 
```

在这种情况下，`inline`根本不需要关键字。如果在类定义里面定义函数，`inline`是默认的。但是如果你愿意，你仍然可以指定它（就像我在上面的例子中所做的那样。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:39:17.457

我对此进行了测试并且工作正常！此示例可在以下位置查看：http: [//www.doc.ic.ac.uk/lab/cplus/c++.rules/chap7.html](http://www.doc.ic.ac.uk/lab/cplus/c++.rules/chap7.html)

示例 24：重载关于 const 的运算符/函数

```
 #include <iostream.h>
   #include <string.h>
   static unsigned const cSize = 1024;
   class InternalData {};

   class Buffer
   {
      public:
         Buffer( char* cp );

         // Inline functions in this class are written compactly so the example
         // may fit on one page. THIS is NOT to be done in practice (See Rule 21).

         // A. non-const member functions: result is an lvalue
         char& operator[]( unsigned index ) { return buffer[index]; }
         InternalData& get() { return data; }

         // B. const member functions: result is not an lvalue
         char operator[]( unsigned index ) const { return buffer[index]; }
         const InternalData& get() const { return data; }

      private:
         char buffer[cSize];
         InternalData data;
   };

   inline Buffer::Buffer( char* cp )
   {
      strncpy( buffer , cp , sizeof( buffer ) );
   }

   main()
   {
      const Buffer cfoo = "peter";// This is a constant buffer
      Buffer foo = "mary";// This buffer can change

      foo[2]='c';// calls char& Buffer::operator[](unsigned)
      cfoo[2] = 'c' // ERROR: cfoo[2] is not an lvalue.

      // cfoo[2] means that Buffer::operator[](unsigned) const is called.

      cout << cfoo[2] << ":" << foo[2] << endl; // OK! Only rvalues are needed

      foo.get() = cfoo.get();
      cfoo.get() = foo.get(); // ERROR: cfoo.get() is not an lvalue
   } 
```

希望有帮助！

和平与光明！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:22:24.877

您在 cpp 文件中将其声明为内联，因此不会发出任何符号，在 point3f.cpp 中它始终是内联的。但是包含头文件的其他文件无法内联函数，它们需要发出这个符号。我猜这里就是这种情况。

# javascript - HTML 滚动条太长

> ID：13104249
> 
> 赞同：0
> 
> 时间：2012-10-27T21:15:43.183
> 
> 标签：javascript, html, css, scrollbar

我有一个小问题，如果您查看我的网站，即使页面/内容只有几行，您也可以看到滚动条向下，如果您检查页面“CRS”或“Clients”，那么应该只有被“测试”并且滚动条仍然很长，有人知道我该如何解决这个问题吗？

[http://mintystudios.co.uk/clients/naghmeh/](http://mintystudios.co.uk/clients/naghmeh/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:21:34.537

div 上设置了最小高度：

```
<div id="CSR-in" class="slide" style="min-height: 598px; width: 958px;">
    test
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:58:58.410

问题似乎是`min-height`带有类的 div 上的集合`slide`被其他样式设置为`!important`. 去掉CSS 中的`!important`所有`min-height`样式可以解决问题。

或者，如果这会破坏您网站的其他部分，请确保`min-height`也设置了 div 上的`!important`。

# java - 为什么异常命名为已检查和未检查？

> ID：13104251
> 
> 赞同：9
> 
> 时间：2012-10-27T21:15:58.437
> 
> 标签：java

为什么Java中的两种异常类型分别命名为“checked”和“unchecked”？这些名字背后的原因是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-27T21:18:04.240

如果您调用一个声明为抛出已*检查*异常的方法（例如`IOException`），编译器将*检查*您是否正在捕获它或声明您重新抛出它。同样，为了首先抛出这样的检查异常，编译器会*检查*您是否已将其声明为方法签名的一部分。

基本上，它有点像类型检查，除了方法可以抛出哪些异常。

编译器不会对未经检查的异常进行任何检查——因此它们可以被任何方法抛出，而无需方法声明它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T21:18:20.427

Java 编译器检查已检查的异常：它检查您是否捕获它们或在方法签名中声明它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T21:18:42.977

“已检查”意味着您要么必须捕获它，要么声明您的方法将其放入签名中。您的方法的用户必须捕获您检查的异常。否则将导致编译器错误。

“未检查”意味着您和您的方法的用户都不需要捕获异常。您不需要在方法签名的 throws 子句中声明它。

在其最早的化身中，Java 经常选择第一个。

C# 将未经检查的异常设为默认值。Java 开发人员现在也采用了这种约定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T21:25:23.227

在 Java 中，你可以抛出任何`Throwable`. Throwable 有两个子类：`Error`和`Exception`. 当`Error`抛出一个严重的问题时，通常与您的代码几乎没有关系。编译器不检查此类异常，是未经检查的异常的一个**示例**。

Exception 有一个称为 的子类`RuntimeException`，它们通常是表示代码中存在错误的异常，并且通常会在大多数代码中的很多地方发生。示例是`NullPointerException`,`ArrayIndexOutOfBoundsException`等。这些也**未选中**，因为您会在代码中乱扔这些捕获物。

**编译器会检查所有其他异常**，您必须捕获或抛出它们。

# ruby-on-rails-3 - RoR：向 simple_fields_for 循环添加一个空白字段

> ID：13104252
> 
> 赞同：1
> 
> 时间：2012-10-27T21:16:05.650
> 
> 标签：ruby-on-rails-3, for-loop, field

我确信这是一个愚蠢的问题，但我一直在寻找一段时间没有找到答案。

我有一个使用 simple_forms 的嵌套表单。我成功地得到了所有的子对象

```
 = f.simple_fields_for :fund_levels do |fl|
     = fl.input :title
     = fl.input :description
     = fl.input :maxnumber
     = fl.input :price 
```

这将获取所有现有的fund_levels。但是，我还想在列表末尾添加一个空白集。因此，如果没有现有的fund_levels，它只会显示一个空白的“子表单”，如果有两个现有的fund_levels，它将显示这两个加上一个空白的“子表单”。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:20:08.173

在您的控制器中构建它：

```
@object.fund_levels.build 
```

`@object`传递给的对象在哪里`form_for`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:24:15.350

您可以在视图中使用一个简单的条件来检查是否有任何`fund_levels`条件并显示一个表单以有条件地添加一个新的

```
- unless @fund_levels.any?
  = f.simple_fields_for @fund_levels.build do |f|
    = f.input :title
    = f.input :description
    = f.input :maxnumber
    = f.input :price 
```

# asp.net - 是否可以使用 Asp.Net MVC 4 将网站作为子网站发布到天蓝色

> ID：13104254
> 
> 赞同：0
> 
> 时间：2012-10-27T21:16:16.613
> 
> 标签：asp.net, asp.net-mvc, deployment, c1-cms

是否可以将 mvc 网站作为子网站发布到 azure 上的现有网站？

我正在运行一个发布到 azure 的 CMS（复合 C1），我想知道我是否可以将 MVC 项目发布到同一个 webrole/实例，例如 www.mysite.com 是 cms 系统，然后我的 mvc 项目以 www.mysite 的身份运行.com/myproject/ 或 myproject.mysite.com ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:45:46.050

是的，您可以这样运行我的业务站点（www.staffquick.com 指向一个站点，screen.staffquick.com 指向另一个站点）。

您只需在您的域注册商（即 GoDaddy）中添加一条 CNAME 记录，并将其指向您的 Azure 站点的 VIP（虚拟 IP 地址）。如果您不删除您的云服务，您的 VIP 将不会改变……所以如果您维护它并更新它，您会没事的。因此，myproject CNAME 可以指向一个 IP 地址，www 可以指向另一个 IP 地址。

我在 Azure 上的 2 个博客已经 2 年了，我的 VIP 没有改变，也没有一天的停机时间。

# css - &::before 伪元素未正确对齐 - CSS(3) 盒子模型 - LESS

> ID：13104255
> 
> 赞同：2
> 
> 时间：2012-10-27T21:16:33.807
> 
> 标签：css, layout, alignment, less, pseudo-element

我正在尝试使用`&::before`伪元素添加图像，并通过调整填充/边距将其放置在其父元素之上。我无法将 img 放在其父元素的“顶部”。它位于父级的框中。我尝试将这两个元素都设置为`display:block`. 我试图使用相对/绝对定位。我在没有解决方案的情况下调整了边距/填充。

HTML：

```
<div class="foo">
   <div class="title">title</div>
   <div class="body">text</div>
</div> 
```

少/CSS：

```
.foo {
  display:block;
  padding: 1em;

  &:before {
    background-image: url("bar.svg");
    padding: .25in;  
    background-repeat: no-repeat;
    background-position: top left;
    background-position: top outside;
    background-color: white;
    content: "";
    display: block;
    max-width: (@column + .45in);    
    margin-left: -.15in;
    margin-top:-.5in;
  }
} 
```

我希望调整伪元素的边距值会产生预期的结果。然而，这种情况并非如此。有我不知道的限制吗？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:21:25.443

`.foo`首先，我假设“在顶部”是指在元素“之前”显示。我假设根据您正在尝试对代码执行的操作。通常，我会将“在顶部”解释为更高`z-index`且重叠的元素，但我认为这不是您要问的。

其次，除非我不熟悉某些东西（绝对可能），否则没有`outside`关键字 for `background-position`; 因此，这似乎是一个错误（尽管我不希望它会导致您面临的问题）。

第三，*我认为您的基本前提应该是有效*的。[这个小提琴演示了将`:before`元素转移到其`.foo`parent](http://jsfiddle.net/Us2LM/4/)的“之前” 。可能是您混合使用`em`单位和`in`单位导致了一些问题。这不是确保您获得所需定位的好方法。我会保留你的单位`em`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-02T14:07:27.993

默认情况下，伪元素内联显示。此外，它们被放置在元素的内容区域内。

要使其显示在该元素的“顶部”，请将显示设置为阻止。

最后，应该使用 content 属性初始化伪元素。

```
.foo::before { 
 content: url(./bar.svg);
 display: block;
} 
```

# video - USB 视频适配器 - wdm 命令嗅探/欺骗

> ID：13104256
> 
> 赞同：1
> 
> 时间：2012-10-27T21:16:34.570
> 
> 标签：video, usb, vlc, x10

我有一个 x10 va11a 复合->usb 适配器，效果很好。我需要另一个，所以我买了另一个，但发送的是 va12a。他们显然不再制造 va11a。va12a 升级到 720x480 捕获分辨率 @30fps，而不是 va11a 的 640x480。

然而，不仅仅是决议发生了变化。VLC，或其他类型的软件（amcap，webcamxp）可以打开va11a并接收视频。打开 va12a 会产生静态的黑色，带有一些波浪状的水平白线。我已经检查了所有可能的地方，不同的设置，谷歌搜索 va12a vlc，但似乎没有任何效果。

有趣的是，如果我用静态打开 vlc 中的 va12a，然后同时打开 x10 的“先锋”软件来查看凸轮，那么静电就会消失，我可以在 vlc 和先锋中看到视频。尽管如此，这两个软件似乎在争夺视频帧，并且它们都以频闪效果闪烁，因为一个软件获取帧而另一个软件没有，并且来回切换。

因此，我正在寻找一种方法来准确了解 vangard 正在做什么以使适配器能够生成视频，无论是在幕后切换其他软件中不可用的交叉开关源，还是向适配器发送一些命令，无论它是什么或许。然后我想在不打开 vangard 的情况下发送这些命令或交叉开关，以便能够让 va12a 在其他程序（如 vlc 或 webcam xp）中工作。

有人对从哪里开始有任何想法吗？我虽然 usbsnoop 可能适合嗅探 usb 命令，但它看起来很神秘，我找不到太多文档。

谢谢，迈克

# bash - 按照它们在 bash 中首次出现的顺序从文件中提取唯一的行

> ID：13104259
> 
> 赞同：2
> 
> 时间：2012-10-27T21:17:10.523
> 
> 标签：bash

我有一个包含字符串列表的文件。我想按照它们首先出现在文件中的顺序提取唯一的字符串。

因此，例如，如果我的文件包含：

```
foo
bar
foo
bar
baz
bar
foo 
```

我想输出：

```
foo
bar
baz 
```

如果我只想要唯一值，我可以使用`sort input|uniq`，但这会按字母顺序对我的结果进行排序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-27T21:41:58.253

awk 中很简单：

```
awk '!a[$0]++' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T21:23:04.460

简单的 Perl 解决方案：

```
perl -ne 'print unless $seen{$_}++' 
```

如果您的最后一行不包含换行符，您可能需要将其更改为

```
perl -nE 'chomp; say unless $seen{$_}++' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T04:06:33.200

我认为尼克的目标是这样的：

```
sort test.txt | uniq | xargs -I{} grep -Fnxm1 {} test.txt | sort -k1n -t: | cut -f2 -d: 
```

或者，也许我对他的建议读得太多了。不过，我认为`awk`答案要酷得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T21:33:46.080

重击 4：

```
declare -A seen
while read line; do 
  if (( ! seen["$line"]++ )); then 
    echo "$line"
  fi
done <file.txt 
```

对于 bash <= 3，我会使用其他具有关联数组的东西，例如 choroba 的 perl 解决方案或 awk：

```
awk '!seen[$0]++' file.txt 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-27T21:35:38.137

我不太明白，但是是这样的：

```
sort test.txt | uniq | xargs -0 -I {} grep {} test.txt 
```

也许有人可以修复？

# ios - iOS：如何在 ARC 中销毁单例？我是不是该？

> ID：13104260
> 
> 赞同：10
> 
> 时间：2012-10-27T21:17:10.750
> 
> 标签：ios, singleton, automatic-ref-counting, dealloc

我有一个单例类，它会累积数据，直到将数据写入我的数据库（如果您想知道我为什么要以这种方式实现，请参见[此处](https://stackoverflow.com/questions/13078413/ios-passing-accumulating-data-down-a-long-chain-of-uiviewcontrollers)）。保存数据后，我想销毁单例。我怎样才能在 ARC 中做到这一点？或者我是偏执狂，我需要完全摧毁它吗？

*您可能会说这是[此](https://stackoverflow.com/questions/10064238/how-to-ensure-destruction-of-singleton-in-ios-5-with-arc)问题的重复，但此处接受的答案不够具体，无法提供帮助。它说*“您可以声明显式调用的方法/函数。”* 这个代码可能是什么样的？如果我不能在方法外释放对象，我怎么可能在方法内将它拉出来？它还说“*最简单的方法是让一个静态 C++ 类持有它，然后在其析构函数中释放它*。” 我不知道 C++，但是 - 你真的可以在你的应用程序代码中放置一个 C++ 类吗？

我的单例是这样实现的：

```
+(NHCFamilyStatus *)familyStatus
{
  static dispatch_once_t pred;
  static NHCFamilyStatus *familyStatusSharedObject=nil;

    dispatch_once(&pred, ^
    {
        familyStatusSharedObject = [[NHCFamilyStatus alloc] init];
    });

  return familyStatusSharedObject;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-27T21:28:00.517

如果你销毁这个单例，你将永远无法再次创建它（这就是 dispatch_once 调用的意思）。

你*不需要*销毁单例。无论如何，在单例上都有一个方法可以删除您不再需要的任何实例变量，但不需要做任何其他事情。

# html - CSS 选择器，HTML 标记，我错过了什么？

> ID：13104261
> 
> 赞同：0
> 
> 时间：2012-10-27T21:17:16.183
> 
> 标签：html, css

我正在尝试使用一个花哨的 JSslider，我正在为学校工作的一个项目，我似乎无法理解为什么我不能让它工作。应该很简单...

```
<link href='http://fonts.googleapis.com/css?family=Merienda One' rel='stylesheet'          type='text/css'>
<script type="text/javascript" src="jquery-1.4.2.js"></script>
<script type="text/javascript" src="coin-slider.min.js"></script>

<div id="wTurkey">

     <h1> The Wild Turkey</h1>

    <div class="coin-slider">

    <a href="" target="_blank">

        <img src='images/cotside.jpg'>

        <span>
          <p>The Wild Turkey</p>
             Some text here
        </span>
</a> 
```

在我的身体标签的最后，我有以下内容

```
 <script type="text/javascript">

  $(document).ready(function() {

    $('#coin-slider').coinslider({hoverPause: false });

    });
    </script>
  </body> 
```

这是原始网站。[http://workshop.rs/2010/04/coin-slider-image-slider-with-unique-effects/](http://workshop.rs/2010/04/coin-slider-image-slider-with-unique-effects/) 我基本上只是在寻找第二双眼睛来告诉我出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:18:37.877

问题在于您的 jQuery 选择器：

```
$('#coin-slider') 
```

应该

```
$('.coin-slider') 
```

“点”表示一个 CSS 类而不是一个 ID（由 # 符号表示）

# mysql - 列出剩余项目的分区

> ID：13104271
> 
> 赞同：4
> 
> 时间：2012-10-27T21:18:26.397
> 
> 标签：mysql, oracle

在 MySQL 中使用列表对表进行分区时，如何为剩余项目生成分区？

例如：

```
CREATE TABLE tbl
(
 ID integer
)
PARTITION BY LIST (ID)
(  
  PARTITION P1 values in (1),  
  PARTITION P2 values in (2),  
  PARTITION P3 values in (3),  
  PARTITION Pother values in (<all remaining values of ID>)
); 
```

在 Oracle 中，我使用`values in (default)`，但在 MySQL 中确实有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:36:14.583

与[范围分区不同，](http://dev.mysql.com/doc/refman/5.1/en/partitioning-types.html)[列表分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-list.html)没有“包罗万象” 。引用文档：

> 与 RANGE 分区的情况不同，不存在诸如 MAXVALUE 之类的“包罗万象”；分区表达式的所有预期值都应包含在 PARTITION ... VALUES IN (...) 子句中。包含不匹配的分区列值的 INSERT 语句失败并出现错误...

不幸的是，我相信您也无法将列表和范围分区结合起来。我不完全确定您为什么要在此特定实例中使用列表分区；范围分区不是很好吗？

```
CREATE TABLE tbl
(
 ID integer
)
PARTITION BY RANGE (ID)
(  
  PARTITION P1 values less than (2),  
  PARTITION P2 values less than (3),  
  PARTITION P3 values less than (4),  
  PARTITION Pother values less than maxvalue
); 
```

我假设这只是一个例子。对主键中的每个键进行分区有点毫无意义。

# php - 包括、要求和相对路径

> ID：13104277
> 
> 赞同：3
> 
> 时间：2012-10-27T21:18:55.817
> 
> 标签：php, relative-path, require-once

我不知道为什么我总是有很多问题。无论如何，这是我想要的文件的路径

```
/var/www/vhosts/mysite.com/htdocs/Classes/DBConnection.php 
```

这是包含 require 语句的文件的路径

```
/var/www/vhosts/mysite.com/htdocs/Classes/Forecast/MyFile.php 
```

这是 MyFile.php 中的 require 语句

```
require_once '../DBConnection.php'; 
```

我不断收到“无法打开流”错误。如果我输入绝对路径，它工作正常。有人看到这里的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:21:11.700

如果`/Classes/Forecast/MyFile.php`从`/index.php`相对路径中包含将来自索引文件。要解决此问题，请使用[`__DIR__`](http://php.net/manual/en/language.constants.predefined.php). 然后，require 将与该文件相对。

`require_once __DIR__.'/../DBConnection.php';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:29:27.693

我在另一个问题中对此有**详细的回答：**

[在php中找到一个4个目录的文件](https://stackoverflow.com/questions/12999809/finding-a-file-in-php-that-is-4-directories-up/13000215#13000215)

它解释了 PHP 中相对文件路径的注意事项。使用那里提到的魔术常量和服务器变量来克服相对路径问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:21:45.953

是的。该路径是相对于包含类文件 MyFe.php 的文件，而不是类文件本身。我假设 MyFile.php 并不是真正提供的页面，而是包含或自动加载的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T21:25:22.543

使您的路径相对于最初请求的文件。因此，如果您点击 /var/www/vhosts/mysite.com/htdocs/index.php，其中包括 MyFile.php，您的路径将是“Classes/DBConnection.php”

# c# - 提供读取的 LINQtoCSV 流为空，或不支持查找

> ID：13104278
> 
> 赞同：2
> 
> 时间：2012-10-27T21:19:07.807
> 
> 标签：c#, .net, csv

我正在尝试使用 LINQtoCSV 将 CSV 文件解析为对象列表，并收到错误“提供给读取的流为空，或不支持查找”。

错误发生在`foreach(StockQuote sq in stockQuotesStream)`

以下是引发错误的方法。.CSV 文件是从 Internet 下载的，并且从未存储到磁盘（仅存储到 StreamReader）。

```
 public List<StockQuote> CreateStockQuotes(string symbol)
    {
        List<StockQuote> stockQuotes = new List<StockQuote>();

        CsvFileDescription inputFileDescription = new CsvFileDescription
        {
            SeparatorChar = ',',
            FirstLineHasColumnNames = false
        };

        CsvContext cc = new CsvContext();

        IEnumerable<StockQuote> stockQuotesStream = cc.Read<StockQuote>(GetCsvData(symbol));

        foreach (StockQuote sq in stockQuotesStream)
        {
            stockQuotes.Add(sq);
        }

        return stockQuotes;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:23:15.880

> .CSV 文件是从 Internet 下载的，并且从未存储到磁盘（仅存储到 StreamReader）。

嗯，大概就是这个问题。不太清楚你的意思是什么，如果你把它包裹`StreamReader`起来，这对于底层流来说是一种痛苦——但你通常不能在从网上下载的流上寻找，这听起来像您正在使用的代码需要一个可搜索的流。

一个简单的选择是将整个流下载到一个`MemoryStream`（`Stream.CopyTo`如果您使用的是 .NET 4，则使用），然后倒回`MemoryStream`（设置`Position`为 0）并将其传递*给*该`Read`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:25:43.093

首先使用 MemoryStream 然后使用 StreamReader 是答案，但我的做法与提到的略有不同。

```
 WebClient client = new WebClient();

        using (MemoryStream download = new MemoryStream(client.DownloadData(url)))
        {
            using (StreamReader dataReader = new StreamReader(download, System.Text.Encoding.Default, true))
            {
                return dataReader;
            }
        } 
```

# python - 有人可以帮助我使用 Cygwin 安装 PyOpenCL 吗？

> ID：13104279
> 
> 赞同：0
> 
> 时间：2012-10-27T21:19:07.737
> 
> 标签：python, python-2.7, cygwin, opencl, pyopencl

我不知道如何用 Cygwin 安装 pyopencl。以前从未使用过 Cygwin，所以我对如何启动 python 并使用它来运行我的 .py 设置文件感到非常迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T09:55:00.000

你说，你想在windows上安装没有cygwin的pyopencl，对吧？

我们去：

如果您需要 32 位版本，请下载 win32 软件包。

1.  [从http://www.python.org/download/](http://www.python.org/download/)下载 Python 2.7.5 Windows X86-64 Installer并安装 python（您宁愿将其安装在 C:\Python27 中）

2.  转到[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

3.  下载 numpy、scipy、pyopencl 并安装它们

4.  转到 pypi.python.org/pypi/pytools 并下载 pytools。

5.  解压文件（使用 ie WinRAR）或 tar (tar cxvf my.tar.gz)

6.  打开命令行 aka Dos (cmd.exe) 并在 cmd 中使用 cd 命令进入您已提取 pytools 的文件夹

7.  在cmd中输入：python setup.py install

8.  打开 Python IDLE 或直接在 cmd 中输入 python 并输入 import pyopencl

应该没有错误。如果是这样，你做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:49:26.850

您是否将 Python 安装到 Cygwin 中？

*   如果没有，启动 setup.exe，进入包屏幕，然后搜索 python。
*   如果需要，您可以并排安装 2.6.8 和 3。

之后就像在其他任何地方使用 python 一样。您可以`$ python my.py`运行 my.py。如果他们有帮助，您可以安装 easy_install 或 pip 等。否则，请按照 PyOpenCL 的说明进行操作，您应该会很好！

# c# - NewtonSoft JSON 序列化程序和 UTF8 支持

> ID：13104288
> 
> 赞同：8
> 
> 时间：2012-10-27T21:20:33.257
> 
> 标签：c#, json, json.net

我有一个使用 NewtonSoft 的 JSON 序列化程序的简单方法，我喜欢它（简单，返回格式化的 JSON）。但是，我似乎无法让它正确序列化对象内的字符串中的 UTF8 字符（它们显示为问号，即“？”）。

我正在使用的代码是：

```
string serialized = JsonConvert.SerializeObject(obj, Newtonsoft.Json.Formatting.Indented, new JsonSerializerSettings { }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T21:39:06.290

由于您要序列化为字符串而不是字节数组，因此在此阶段您无需处理任何字符编码（如 utf-8）。

您必须找出它在哪里实际转换为/从 UTF-8 转换并在那里解决问题。

# sql - 菊花链查询中的条件 Sql

> ID：13104289
> 
> 赞同：1
> 
> 时间：2012-10-27T21:20:53.833
> 
> 标签：sql, visual-studio-2008, join, conditional

我有一个主表，其中包含每个子表的所有 ID。SQL 语句如下所示...

```
SELECT   Class.Descript
       , Regulation.Descript AS Reg
       , Compgroup.Descript AS Grouping
       , Category.Descript AS Cat
       , Exempt.Descript AS Exempt
       , Reason.Descript AS Reasons
       , COALESCE(ComponentRuleSet.NormalType, ComponentRuleSet.Supertype, '') AS Type
FROM     ComponentRuleSet 
LEFT OUTER JOIN Reason 
   ON ComponentRuleSet.ComponentCategoryID = Reason.ComponentCategoryID 
LEFT OUTER JOIN Class 
   ON ComponentRuleSet.ComponentClassID = Class.ComponentClassID
LEFT OUTER JOIN Regulation
   ON ComponentRuleSet.RegulationID = Regulation.RegulationID 
LEFT OUTER JOIN Compgroup
   ON ComponentRuleSet.ComplianceGroupID = Compgroup.ComplianceGroupID
LEFT OUTER JOIN Category 
   ON ComponentRuleSet.ComponentCategoryID = Category.ComponentCategoryId
LEFT OUTER JOIN Exempt 
   ON ComponentRuleSet.ExemptID = Exempt.ComponentExemptionID
WHERE (ComponentRuleSet.ComponentID = 38048) 
```

**问题是ComponentRuleSet**表中有两个字段，分别称为**NormalType**和**Supertype**。如果其中任何一个字段有值，我需要将其显示在名为**Type**的列中。但是，如果两者都没有值，我需要在**类型**列中显示一个空白值。有任何想法吗？

- -编辑

我在编辑后的查询中放置的 COALESCE 是否正确？它仍然返回错误。

- 更新

重要提示：两个字段的类型都是布尔值，我需要返回包含 TRUE 值的列的列名，并将该值放在 TYPE 列中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:24:37.533

用于[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)此字段：

```
COALESCE(ComponentRuleSet.NormalType, ComponentRuleSet.Supertype, '') AS Type 
```

`COALESCE`：

> 返回其参数中的第一个非空表达式。

* * *

按照您对实际要求的评论，[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)可能是一个更好的选择：

```
CASE WHEN ComponentRuleSet.NormalType = 1 THEN 'NormalType'
     WHEN ComponentRuleSet.Supertype = 1 THEN 'SuperType'
     ELSE ''
END AS Type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:05:56.657

看到您的评论，也许一个`CASE`表达式会起作用：

```
select ...
      , CASE WHEN ComponentRuleSet.NormalType is not null then 'NormalType'
             WHEN ComponentRuleSet.Supertype  is not null then 'SuperType'
             ELSE ''
             end as Type 
```

**更新**由于布尔值只有 1 代表真，0 代表假，试试这个：

```
select ...
      , CASE WHEN ComponentRuleSet.NormalType = 1 then 'NormalType'
             WHEN ComponentRuleSet.Supertype  = 1 then 'SuperType'
             ELSE ''
             end as Type 
```

# java - Android App 在实际设备上使用时崩溃，但在 Eclipse 中完全可以使用

> ID：13104293
> 
> 赞同：0
> 
> 时间：2012-10-27T21:21:33.493
> 
> 标签：java, android, eclipse

这是一个 sdk 设置为的 Android 应用程序：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11"/> 
```

问题是该应用程序将在 AVD 上的 Eclipse 环境中正常运行。当我直接安装到手机或什至将手机设置为在 Eclipse 中使用的设备时，应用程序在以下代码区域中失败。为了缩小错误发生的范围，我沿途放置了一些吐司，“点击”吐司显示，但“意图创建”没有。所以这让我只有 2 行，但我无法弄清楚为什么它会在那个区域死去。带有toast的方法的代码如下：

```
lv.setOnItemClickListener(new OnItemClickListener() {
         public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String bid = ((TextView) view.findViewById(R.id.bid)).getText()
                    .toString();
            Toast.makeText(getApplicationContext(), "clicked", Toast.LENGTH_LONG).show();

            Intent in = new Intent(getApplicationContext(),
                    BusinessDetails.class);

            in.putExtra(TAG_BID, bid);
            Toast.makeText(getApplicationContext(), "Intent Created", Toast.LENGTH_LONG).show();

            startActivityForResult(in, 100);
        }
    }); 
```

BusinessDetails 类的 bundle 方法如下：

```
 package com.example.businessLookUp;
   import java.util.ArrayList;
   import java.util.List;

   import org.apache.http.NameValuePair;
   import org.apache.http.message.BasicNameValuePair;
   import org.json.JSONArray;
   import org.json.JSONException;
   import org.json.JSONObject;

   import android.app.Activity;
   import android.app.ProgressDialog;
   import android.content.Intent;
   import android.os.AsyncTask;
   import android.os.Bundle;
   import android.util.Log;
   import android.view.View;
   import android.widget.Button;
   import android.widget.EditText;
   import android.widget.RatingBar;
   import android.widget.TextView;
   import android.widget.Toast;

public class BusinessDetails extends Activity {

EditText txtDesc;
Button btnSave;
String bid;
String _bname;
String _phone;
String _address;
String _city;
String _state;
String _zip;

private ProgressDialog pDialog;

JSONParser jsonParser = new JSONParser();

 private static final String url_business_detials = "http://192.168.1.2/get_business_details.php";

private static final String url_update_details = "http://192.168.1.2/update_business.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_BUSINESS = "business";
private static final String TAG_BID = "bid";
private static final String TAG_NAME = "name";
private static final String TAG_ADDRESS = "address";
private static final String TAG_CITY = "city";
private static final String TAG_STATE = "state";
private static final String TAG_ZIP = "zip";
private static final String TAG_PHONE = "phone";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_business);

    // save button
    btnSave = (Button) findViewById(R.id.btnSave);

       Intent i = getIntent();

   bid = i.getStringExtra(TAG_BID);
   Toast.makeText(getApplicationContext(), "check 1", Toast.LENGTH_LONG).show();
    // Getting complete product details in background thread
    new GetBusinessDetails().execute(); 
```

此处的 BusinessDetails 被截断，因为从未到达以下行：

```
 Toast.makeText(getApplicationContext(), "check 1", Toast.LENGTH_LONG).show(); 
```

这告诉我，代码甚至永远都达不到......有什么想法会出错吗？？？

LogCat 异常：

```
10-27 16:39:28.834: E/AndroidRuntime(25260): FATAL EXCEPTION: main
10-27 16:39:28.834: E/AndroidRuntime(25260): android.os.NetworkOnMainThreadException
10-27 16:39:28.834: E/AndroidRuntime(25260):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1119)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at libcore.io.IoBridge.connect(IoBridge.java:112)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at java.net.Socket.connect(Socket.java:842)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at com.example.businesslookup.JSONParser.makeHttpRequest(JSONParser.java:65)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at com.example.businesslookup.BusinessDetails$GetBusinessDetails$1.run(BusinessDetails.java:127)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at android.os.Handler.handleCallback(Handler.java:605)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at android.os.Looper.loop(Looper.java:137)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at android.app.ActivityThread.main(ActivityThread.java:4697)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at java.lang.reflect.Method.invokeNative(Native Method)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at java.lang.reflect.Method.invoke(Method.java:511)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
10-27 16:39:28.834: E/AndroidRuntime(25260):    at dalvik.system.NativeStart.main(Native Method) 
```

这是处理网络的 ASYNC 任务：

```
 class GetBusinessDetails extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(BusinessDetails.this);
        pDialog.setMessage("Loading details. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    protected String doInBackground(String... params) {

        runOnUiThread(new Runnable() {
            public void run() {

                int success;
                try {

                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("bid", bid));

                    JSONObject json = jsonParser.makeHttpRequest(
                            url_business_detials, "GET", params);

                    Log.d("Single Business Details", json.toString());

                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {

                        JSONArray businessObj = json.getJSONArray(TAG_BUSINESS); // JSON Array

                        JSONObject business = businessObj.getJSONObject(0);

                       TextView _bName = (TextView) findViewById(R.id.bnameInf);
                       TextView _phone = (TextView) findViewById(R.id.phoneInf);
                       TextView _address = (TextView) findViewById(R.id.addressInf);
                       TextView _city = (TextView) findViewById(R.id.cityInf);
                       TextView _state = (TextView) findViewById(R.id.stateInf);
                       TextView _zip = (TextView) findViewById(R.id.zipInf);
                       _bName.setText(business.getString(TAG_NAME));
                       _phone.setText(business.getString(TAG_PHONE));
                       _address.setText(business.getString(TAG_ADDRESS));
                       _city.setText(business.getString(TAG_CITY));
                       _state.setText(business.getString(TAG_STATE));
                       _zip.setText(business.getString(TAG_ZIP));

                    }else{
                       Toast.makeText(getApplicationContext(), "No Match Returned", Toast.LENGTH_LONG).show();
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        return null;
    }

    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        pDialog.dismiss();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:43:32.207

如果没有堆栈跟踪，我会把钱赌在两件事上：

1.  在 onCreate Activity 仍在启动，您已经创建了一个 Toast

2.  使用 Activity 上下文而不是 Appcontext 通常会更好地处理视觉内容

无论如何，stacktrace会很好

`com.example.businesslookup.BusinessDetails$GetBusinessDetails$1.run(BusinessDetails.java:127)`

在这一行，有你的问题

也请阅读：http: [//developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:03:11.957

您正在使用 AsyncTask，但您还将代码包装在调用中，`runOnUiThread()`这违背了使用 AsyncTask 的目的。尝试删除此包装器并将 UI 访问权限移至`onPostExecute()`：

```
protected String doInBackground(String... params) {

    int success;
    try {
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("bid", bid));

        JSONObject json = jsonParser.makeHttpRequest(
                url_business_detials, "GET", params);

        Log.d("Single Business Details", json.toString());

        success = json.getInt(TAG_SUCCESS);
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return null;
}

@Override
protected void onPostExecute(String result) {               
    if (success == 1) {
        JSONArray businessObj = json.getJSONArray(TAG_BUSINESS); // JSON Array
        JSONObject business = businessObj.getJSONObject(0);

        TextView _bName = (TextView) findViewById(R.id.bnameInf);
        TextView _phone = (TextView) findViewById(R.id.phoneInf);
        TextView _address = (TextView) findViewById(R.id.addressInf);
        TextView _city = (TextView) findViewById(R.id.cityInf);
        TextView _state = (TextView) findViewById(R.id.stateInf);
        TextView _zip = (TextView) findViewById(R.id.zipInf);

        _bName.setText(business.getString(TAG_NAME));
        _phone.setText(business.getString(TAG_PHONE));
        _address.setText(business.getString(TAG_ADDRESS));
        _city.setText(business.getString(TAG_CITY));
        _state.setText(business.getString(TAG_STATE));
        _zip.setText(business.getString(TAG_ZIP));
    }else{
        Toast.makeText(getApplicationContext(), "No Match Returned", Toast.LENGTH_LONG).show();
    }
} 
```

（我不知道这段代码是否可以编译，但这足以给你正确的想法。）

# ruby-on-rails - Rails 对同一模型的多个属性建模

> ID：13104299
> 
> 赞同：0
> 
> 时间：2012-10-27T21:21:53.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我很难找到一种方法来拥有同一模型的多个属性。我有这个结构：

```
class Image < ActiveRecord::Base
   attr_accessible :name, :content_type
end

class MenuImage < ActiveRecord::Base
   belongs_to :image
   belongs_to :menu
end

class Menu < ActiveRecord::Base
   has_many :menu_images
   has_many :images, :through => :menu_images

   has_one :image, :as => :thumbnail_image

   attr_accessible :thumbnail_image_id
end 
```

我希望能够使用`@menu.images`和访问图像`@menu.thumbnail_image`。该代码`has_one :image, :as => :thumbnail_image`是我试图获得的一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:31:51.573

你给它起不同的名字，但是告诉 ActiveRecord 使用 Image 类：

```
has_one :thumbnail_image, :class_name => "Image" 
```

另见协会指南： http: [//guides.rubyonrails.org/association_basics.html#has_one-association-reference](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)

# fortran - Fortran 自然对数误差

> ID：13104300
> 
> 赞同：5
> 
> 时间：2012-10-27T21:21:54.433
> 
> 标签：fortran, logarithm, fortran95

Fortran 新手（今天才开始），自然对数有问题：

```
PROGRAM log
IMPLICIT NONE
REAL :: x

PRINT *, "Enter a number:"
READ *, x

x = log (x)

PRINT *, "The natural log of x is:", x

END PROGRAM log 
```

编译器不断抛出错误：

```
x = log (x)
       1
Error: Symbol at (1) is not appropriate for an expression 
```

其他内在函数工作正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T21:31:30.827

问题是您已经`log`使用程序的名称（也是`log`. 如果您将程序的名称更改为，例如`logtest`：

```
PROGRAM logtest
...
END PROGRAM logtest 
```

您会发现该程序按预期工作。

# geolocation - 从纬度/经度坐标列表中，如何以 (streetname,State Abbreviation) ex 的格式返回附近街道的列表。德克萨斯州橡树树？

> ID：13104301
> 
> 赞同：1
> 
> 时间：2012-10-27T21:21:56.703
> 
> 标签：geolocation, gis, openstreetmap

从纬度/经度坐标列表中，如何以 (streetname,State Abbreviation) ex 的格式返回附近街道的列表。Oaktree ln, TX 从开放的街道地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:04:23.580

您应该自己确定“附近”究竟是什么，以及您想要在列表中包含多少条街道。然后，您可以查看一些基于 OSM 的服务，以获得您想要的内容。[Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim#Reverse_Geocoding_.2F_Address_lookup)执行反向地理编码，可能是您想要的。

# iphone - 移除 UINavigationController 圆角

> ID：13104305
> 
> 赞同：3
> 
> 时间：2012-10-27T21:22:43.273
> 
> 标签：iphone, ios, uinavigationcontroller

如何删除 UINavigationController 顶部圆角？是否有任何 plist 属性或者我需要以编程方式执行此操作？

**我想从这个出发：**

![在此处输入图像描述](../Images/6d18b8deb402342039c9c2c3bacf58d5.png)

**对此：**

![在此处输入图像描述](../Images/f443810ca95048d5f86150e1da613b37.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:36:00.877

只需将状态栏样式从“Black Opaque”更改为“Black Translucent”，您的 rootViewController 的所有 4 个角将不再是圆角。只要您不设置视图控制器的属性，`wantsFullScreenLayout = YES`就不会在状态栏后面绘制任何内容。你的 UIWindow 必须有`backgroundColor = [UIColor blackColor]`，这样用户就不会注意到状态栏不是真正的“黑色不透明”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T22:02:51.820

好吧，默认外观是底部图像中的外观。那么你做了什么，首先获得顶部图像的外观？我的猜测是，您使用图像作为 UINavigationBar 的背景。找到图像并将其替换为没有圆角的版本。

另一种方法是 UINavigationBar 子类。在这种情况下，您可能会查找该子类并查看是否有类似的行`[self.layer setCornerRadius:3.0]`并将其删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T01:45:33.427

我相信 Sascha 说当您使用黑色状态栏时会自动添加圆角时可能是正确的。我注意到在我的一个新应用程序中，我的 UINavigationController 有圆角和黑色状态栏，即使我没有在 xib 文件、info.plist 文件甚至 App Delegate 中设置它。

我做了一个快速测试并将我使用的图像交换为 UINavigationController/NavigationBar 背景，发现导航栏颜色会自动影响状态栏，而状态栏反过来又会使导航栏的角落变圆（奇怪）

查看我的导航栏的快照（圆角的生成纯粹是由于我用作 UINavigationController 背景的图像的颜色！）

![在此处输入图像描述](../Images/201112a2370fa992a41e3a32838f2a98.png)

![在此处输入图像描述](../Images/305fec0bf450c97c52e67249fd740ebb.png)

所以我想在你的情况下 - 一个建议是尝试不同的颜色背景，看看你是否有和我一样的结果。

# python - 在 Python 中调用函子

> ID：13104310
> 
> 赞同：4
> 
> 时间：2012-10-27T21:23:18.403
> 
> 标签：python

应该很容易，但不知何故我不明白。我想应用给定的功能。背景是复制一个类并在新创建的副本上应用给定的方法。

**主要编辑。对此感到抱歉。**

```
 import copy
   class A:

       def foo(self,funcName):
           print 'foo'
           funcName()

       def Bar(self):
           print 'Bar'

        def copyApply(self,funcName):
           cpy = copy.copy()
           # apply funcName to cpy??

    a = A()
    func = a.Bar()
    a.foo(func) # output 'Bar'
    b = a.copyApply(foo) # new copy with applied foo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:28:35.803

请注意，您`A.foo`使用的不是函数的*名称*，而是函数本身。

```
class A:
   def bar(self):
       print 'Bar'

   def apply(self, func):
       func()  # call it like any other function

   def copyApply(self, func):
       cpy = copy.copy(self)
       func(cpy)  # cpy becomes the self parameter

a = A()
func = a.bar  # don't call the function yet

a.apply(func)       # call the bound method `a.bar`
a.apply(a.bar)      # same as the line above
a.copyApply(A.bar)  # call the unbound method `A.bar` on a new `A` 
```

在 python 中，`a.foo()`与 相同`A.foo(a)`，其中`a`类型为`A`。因此，您的`copyApply`方法将*未绑定*的bar 方法作为其参数，而`foo`使用*绑定的*方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:35:05.243

如果要在实例的副本上调用方法

```
class A (object):
    def foo(self):
        pass

    def copyApply(self,func):
        cpy = copy.copy(self)
        func(cpy) 
```

并这样称呼它

```
a = A()
a.copyApply(A.foo) 
```

请注意，我`foo`从类中获取方法，而不是从实例中获取方法，正如`A.foo`预期的`A`第一个参数的实例一样，并且`a.foo`不接受任何参数。

# ruby-on-rails - 带有用户定义的部分选择和 html 到文本自动转换的 Rails 和多部分电子邮件

> ID：13104312
> 
> 赞同：1
> 
> 时间：2012-10-27T21:23:42.980
> 
> 标签：ruby-on-rails, templates, actionmailer, dry

我们的 Rails (3.0.14) 应用程序具有用户配置文件，用户可以在其中选择是否要接收 HTML 格式的电子邮件。为了保持干燥，我只想为所有邮件 (HTML) 设置一组模板，然后在 text/plain 部分使用我自己的字符串扩展名`dehtml`（基本上`strip_tags`带有一些格式修改）。另外，我想保持邮件代码干燥。

到目前为止，我们的邮件方法如下所示：

```
def signup_confirmation(user)
  @user = user
  mail(:to => @user.email, :subject => ..., ...)
end 
```

**1\. DRY 模板：**如果可能，我希望避免创建 200 个额外的邮件模板，并从 HTML 模板自动创建 text/plain 部分。这是基本思想（`dehtml`是我自己的字符串扩展）：

```
def signup_confirmation(user)
  @user = user
  mail(:to => @user.email, :subject => ..., ...) do |format|
    format.html
    format.text { render(:file => 'signup_notification.html').dehtml }
  end
end 
```

但是，这会因“缺少模板”错误而失败。我如何告诉 Rails 在这两种情况下都使用 HTML 模板？我尝试追加`:formats => :html`，`:handler => :html`但这没有帮助。

我现在没有解决方案。有任何想法吗？

**2：DRY mailer 方法：** 由于我们的用户应该能够决定他们是否想要拥有 HTML，所以上面的方法看起来像

```
def signup_confirmation(user)
  @user = user
  attachments.inline["email-header.jpg"] = File.read(...) if @user.wants_html
  mail(:to => @user.email, :subject => ..., ...) do |format|
    format.html if @user.wants_html
    format.text { render(:file => 'signup_notification.html').dehtml }
  end
end 
```

总之，这使每种方法的 LOC 增加了三倍。我想尽可能地把它干掉（因为它必须被插入到至少 200 个邮件方法中）。一个想法是编写我自己的`mail`方法（让我们称之为`mymail`）就像

```
def mymail(user, p={})
  attachments.inline["email-header.jpg"] = File.read(...) if user.wants_html
  mail(p) do |format|
    format.html if user.wants_html
    format.text
  end
end 
```

（暂时忽略上面的文本模板问题）然后将每个调用更改`mail`为`mymail`，如

```
def signup_confirmation(user)
  @user = user
  attachments.inline["email-header.jpg"] = File.read(...) if @user.wants_html
  mymail(user, { :to => @user.email, :subject => ..., ... })
end 
```

这行得通。但这是好的做法吗？我在哪里最好放`mymail`- 在帮手？

欢迎任何见解和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:04:25.957

很久以前，我做了与您的第一个解决方案非常相似的事情。我真的不记得为什么会这样，但这对我有用：

```
def my_mail
  mail(:to => @user.email ...) do |format|
    format.text { convert_html_to_plain(__method__) } # first text
    format.html                                       # then html
  end
end

def convert_html_to_plain(method)
  old_formats = self.formats
  self.formats = ["html"]
  rendered = render "#{method}", :layout => false
  self.formats = old_formats

  # strip tags, reformat, etc. from rendered
  rendered << render(:partial => "plaintext_footer", :locals => {:user => @user}, :formats => [:text] )
end 
```

# spring - 带有 Thymeleaf 配置问题的 Spring 3

> ID：13104319
> 
> 赞同：0
> 
> 时间：2012-10-27T21:24:57.487
> 
> 标签：spring, thymeleaf

您好，我的构建路径中有以下 jars -

spring-beans-3.1.2.RELEASE.jar
spring-context-3.1.2.RELEASE.jar
spring-core-3.1.2.RELEASE.jar
spring-expression-3.1.2.RELEASE.jar
spring-web-3.1。 2.RELEASE.jar
spring-webmvc-3.1.2.RELEASE.jar
thymeleaf-spring3-2.0.13.jar

和我的 servlet

```
<?xml version="1.0" encoding="UTF-8"?><br>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:context="http://www.springframework.org/schema/context"
     xmlns:mvc="http://www.springframework.org/schema/mvc"
     xsi:schemaLocation="
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <context:component-scan base-package="web.controller" />

    <!-- Enabling Spring MVC configuration through annotations -->
    <mvc:annotation-driven />

    <!--  Mapping Static Resources -->
    <mvc:resources mapping="/resources/**" location="/resources/" />

    <bean id="templateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".html" />
        <property name="templateMode" value="HTML5" />
    </bean>

    <bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
        <property name="templateResolver" ref="templateResolver" />
    </bean>

    <bean class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
        <property name="templateEngine" ref="templateEngine" />
        <property name="order" value="1" />
        <property name="viewNames" value="*.html" />
    </bean>

</beans> 
```

我在启动时遇到的错误是 -

*找不到在 ServletContext 资源 [/WEB-INF/springMVC-servlet.xml] 中定义的名称为“templateResolver”的 bean 的类 [org.thymeleaf.templateresolver.ServletContextTemplateResolver]；嵌套异常是 java.lang.ClassNotFoundException: org.thymeleaf.templateresolver.ServletContextTemplateResolver* 我在这里缺少任何其他库吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:31:43.327

您缺少实际的 Thymeleaf 罐子。您包含了提供集成的 Spring jar，但您错过了它的实际实现。

从这里下载 jar

[百里香下载网站](http://www.thymeleaf.org/download.html)

# c++ - std::string 优化？

> ID：13104321
> 
> 赞同：-3
> 
> 时间：2012-10-27T21:25:16.287
> 
> 标签：c++, string, optimization

有人想解释一下哪个代码更快？优化字符串分配的最佳方法是什么？

代码 1：

```
std::string result;

int main()
{
   for(int i=0;i<1000;i++)
   {
   /*some code*/
   result = stringVar;
   /* some code using result */
   }
} 
```

代码 2：

```
int main()
{
   for(int i=0;i<1000;i++)
   {
   /*some code*/
   std::string result = stringVar;
   /* some code using result */
   }
} 
```

并分配价值：

```
std::string var;

var.assign("value");
//or
var="value"; 
```

并且可以释放之前的值使用的内存来添加一个新的吗？

感谢您能帮助我理解这一点:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:37:59.223

如果是：

```
for (...)
    std::string result = blah; 
```

编译器必须每次通过 for 循环构造和破坏结果，可能需要堆分配和释放调用。

如果是：

```
std::string result;
for (...)
    result = blah; 
```

当 blah 太大以适合结果的当前缓冲区时，字符串实现可能能够通过仅重新分配来优化一些堆分配和解除分配。

var=x 和 var.assign(x) 应该产生相同的代码；无论哪种方式，我都不希望有实质性的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:44:40.853

在代码 1 中，`operator=`将被调用，这通常通过创建一个临时对象（使用复制构造函数）然后将临时对象的内容与 lhs 对象交换来实现。因此，复制构造函数、交换和临时对象的删除（当方法`operator=()`退出时）在代码 1 中完成。

在代码 2 中，调用了一个复制构造函数，最后在 for 循环结束时将删除该对象。

所以代码 1 有一个额外的步骤来交换字符串类的内容。尽管`operator=`某些字符串库的实现可能与上述不同，因此最好的建议是针对您的环境对其进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T21:38:17.333

第一个可能更快一些，因为它可以重用前一次分配的内存；第二个在每次循环结束时破坏字符串，因此释放字符串内容的存储空间。尽管在循环体中定义了对象，但保留对象的优化器违反了语言规则。

# c++ - 如果不在同一范围内，则无法打开 SFML 2 窗口

> ID：13104324
> 
> 赞同：0
> 
> 时间：2012-10-27T21:25:33.183
> 
> 标签：c++, pointers, segmentation-fault, sfml

我自己构建了一个[基于实体的小游戏框架](http://www.richardlord.net/blog/what-is-an-entity-framework)，它本身不进行渲染或窗口管理，但提供了结构。真的相当于一个 MVC 框架。

我现在正尝试通过使用 SFML 2 渲染一个简单的窗口来将其付诸实践。我过去在这个环境（我的 Ubuntu 12.04 盒子）中使用更多的字符串代码完成了它，所以我知道我的 SFML 2 库工作正常。

但是，我在尝试访问我的`sf::RenderWindow`实例时遇到了分段错误。我已经通过 GDB 运行它并且一切都在那里，但是当尝试执行一个方法（GDB*可以*看到）时，它就死了。

仅当我尝试像这样访问我的窗口时才会发生这种情况。

```
class BasicGame : public arc::Game
{
public:
    sf::RenderWindow window;
};

class BasicGameSystem : public arc::System
{
protected:
    BasicGame* game;
};

class RenderSystem : public BasicGameSystem
{
public:
    void start()
    {
        game->window.create(sf::VideoMode(640, 480), "Basic arc example");
        game->window.setFramerateLimit(60);
    }
}; 
```

指针`game`不为空。我可以在 GDB 中取消引用它，它会返回一个`BasicGame`. `game->window`也存在，而且 GDB 可以看到`game->window.create`，如果我尝试执行它，它甚至会抱怨我没有提供任何参数。

如果我尝试`setFramerateLimit`使用断点手动执行 GDB，它也会出现段错误。

如果我将启动方法更改为此...

```
void start()
{
    sf::RenderWindow window;
    window.create(sf::VideoMode(640, 480), "Basic arc example");
    window.setFramerateLimit(60);
} 
```

它工作得很好。好吧，窗口立即关闭，但没有段错误。

是否`sf::RenderWindow`需要在同一范围内？它的默认构造函数会破坏它吗？

我对 C++ 还是很陌生，所以我可能会做一些完全愚蠢的事情，但对此的任何帮助将不胜感激。我一直在寻找和修补几个小时，但我就是无法解决。希望这也是足够的信息。

谢谢。

**编辑：**

只是为了更多的信息。`clang++`尽管我也尝试`g++`过相同的结果，但我正在编译。这是来自 GDB 的回溯。

```
#0  0xb7cd0981 in sf::Window::close() () from /usr/local/lib/libsfml-window.so.2
#1  0xb7cd131e in sf::Window::create(sf::VideoMode, std::string const&, unsigned int, sf::ContextSettings const&) ()
   from /usr/local/lib/libsfml-window.so.2
#2  0x080496a3 in RenderSystem::start (this=0xbffff0f0) at examples/basic.cpp:26
#3  0x0804b60e in arc::SystemList::add (this=0xbffff128, system=0xbffff0f0) at src/SystemList.cpp:17
#4  0x08049f79 in arc::Game::addSystem (this=0xbffff128, system=0xbffff0f0) at src/Game.cpp:11
#5  0x08048cfc in main () at examples/basic.cpp:73 
```

我不知道为什么要运行关闭...我的代码库中有一个事件正在侦听窗口关闭事件。拿出来也没什么区别。只是以为我会确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:25:24.507

> 指针 game 不为空。我可以在 GDB 中取消引用它，它会返回一个 BasicGame 实例。

关键是要有一个**有效**的`BasicGame`. 从您提供的代码片段来看，您似乎没有使用`new`，因此您的指针指向未分配的内存区域。

考虑以下代码：

```
int* x = new int;
*x = 58;
delete x;
std::cout << x << " points to the value " << *x << std::endl; // unpredictable behaviour! 
```

删除后`x`，您仍然可以打印其旧地址，但如果您尝试访问其内容，您可能（但不一定）使程序崩溃。

为防止此类错误，您应该始终添加`x = 0;`（或`x = nullptr;`在 C++11 中）并初始化您的属性：

```
BasicGameSystem() : game(0) { } 
```

这样，您**将**知道何时访问无效的内存区域，因为您的程序将崩溃。

# android - 选项卡活动：选项卡内容顶部的一些空间

> ID：13104326
> 
> 赞同：1
> 
> 时间：2012-10-27T21:25:52.180
> 
> 标签：android, tabactivity

我创建了自己的自定义 TabActivity。问题是每个页面在标签内容的顶部和底部留下一个小的空白条。我的选项卡布局尝试填充父级，但仍然可以看到一些条带。

![屏幕](../Images/61df7606061a61ae7356955c18186ac9.png)

蓝色的下条应接触上条。

我的标签活动 xml 布局：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/navigation_bar"
        android:paddingTop="8dp" >

        <Button
            android:id="@+id/btnRecipesChosen"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="@dimen/navigatorBarLeftRightButtonsMargin"
            android:background="@drawable/button_chosen" >
        </Button>

        <Button
            android:id="@+id/btnRecipesFind"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_gravity="right"
            android:layout_marginRight="@dimen/navigatorBarLeftRightButtonsMargin"
            android:background="@drawable/button_find" >
        </Button>
    </RelativeLayout>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:layout_marginBottom="-9dp"
        android:layout_weight="1" />

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T08:24:15.847

答案可能为时已晚，但我遇到了同样的[问题](https://stackoverflow.com/questions/16434027/android-tabwidget-white-space-issue)，所以这可能有助于其他人寻找相同问题的解决方案......试试[这个](https://github.com/AdilSoomro/Iphone-Tab-in-Android)项目中的可绘制 xml 文件并尝试替换的布局 xml 文件选项卡 xml 就像它在[这个](https://github.com/AdilSoomro/Iphone-Tab-in-Android)项目中所做的[一样](https://github.com/AdilSoomro/Iphone-Tab-in-Android)。希望它有效！

# nosql - Cassandra 数据库性能和默认 GUID

> ID：13104329
> 
> 赞同：0
> 
> 时间：2012-10-27T21:25:59.700
> 
> 标签：nosql, cassandra, database-performance

我在 Cassandra 文档中读到，建议您使用随机生成的 ID 图形用户界面来防止热点，而不是为每个文档实现我自己的 ID。据我所知，它要慢得多（[请参阅此演示文稿](http://www.slideshare.net/scode/scaling-with-apache-cassandra)）。Cassandra 如何帮助我实现非常高的 WRITE 性能，同时仍然遵循此指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:39:27.870

PlayOrm 使用它自己的生成器来保持 cassandra 的 id 很小。重要的是您的生成器是随机的，仅此而已，因此它提供了良好的密钥分布。我们自己使用 PlayOrm 和 cassandra 每秒执行 10,000 次写入，此时正在索引内容，因此我们可以使用 PlayOrm Scalable SQL 进行查询。

# ios - 如果消息通过 Apple 推送通知服务，如何调试？

> ID：13104335
> 
> 赞同：4
> 
> 时间：2012-10-27T21:26:43.737
> 
> 标签：ios, node.js, push-notification, apple-push-notifications

我正在尝试使用 node.js 作为服务器的 Apple 推送通知服务。到目前为止，我已经让它工作了，当它工作时，它按预期工作。

但是，有时消息没有到达。我不确定这是否是自然的（也许我的连接不好，因此消息没有通过），或者它是否是我的代码中的错误。情况真的很随机​​。有时它会通过，有时它不会，即使我没有更改代码或任何东西。

我正在使用 node-apn (https://github.com/argon/node-apn)，根据调试控制台，它被注册为成功通过——至少从服务器端。这是调试消息：

```
apn Initialising connection +19s
apn Initialising module +1ms
apn Connection established +383ms
apn Sending notification +0ms
apn Socket drained +1ms
apn Socket writeable +0ms 
```

此消息在消息通过和未通过时都会出现。所以我猜 node-apn 本身做得很好。这意味着它是：

1.  我的服务器和苹果推送服务器之间发生了一些事情
2.  苹果推送服务器和我的 iOS 设备之间发生了一些事情

但我不知道如何找出发生了什么。所以我试图找到一个解决方案：

1.  查看我的推送通知是否已被 APNS 注册
2.  查看 APNS 是否正在向我的 iDevice 发送所有通知

有人知道怎么做吗？太感谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T21:42:53.207

Apple 有一篇写得很好的技术说明，关于推送通知服务的不同问题来源：http: [//developer.apple.com/library/ios/#technotes/tn2265/_index.html](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T12:24:54.987

在端口 2195、2196 和 5223 上使用 tcpdump，因为数据通过它们：http: [//support.apple.com/en-us/HT202944](http://support.apple.com/en-us/HT202944)

使用 Wireshark 读取转储文件： [http ://redmine.streamco.org/projects/smartswitch-public/wiki/Debug_VoIP_call_with_Wireshark](http://redmine.streamco.org/projects/smartswitch-public/wiki/Debug_VoIP_call_with_Wireshark)

# actionscript-3 - AS3 #1063: var count 不匹配 onSym01() 预期为 0，得到 1

> ID：13104336
> 
> 赞同：0
> 
> 时间：2012-10-27T21:26:47.047
> 
> 标签：actionscript-3

我正在尝试向舞台添加一个符号，但我遇到了参数错误。

我的代码：

```
symHolder.mc.sym01_mc.addEventListener(MouseEvent.MOUSE_DOWN, startDragHandler);

function startDragHandler(event:MouseEvent):void {
    var ClassReference:Class = getDefinitionByName("Sym" + event.target.name.charAt(3) + event.target.name.charAt(4)) as Class;
    var s:MovieClip = (new ClassReference("s" + num) as MovieClip);
    s.x = mouseX;
    s.y = mouseY;
    toggleSymHolder(null);
    addChild(s);
    s.name = "s" + num;
    stage.addEventListener(MouseEvent.MOUSE_UP, stopDragHandler);
    s.startDrag();
    s.addEventListener(MouseEvent.MOUSE_DOWN, nextDrag);
    num ++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:29:37.580

类构造函数是否接受任何参数？如果不`"s"+num`从构造函数中删除。

```
(new ClassReference("s" + num) as MovieClip); 
```

应该 ：

```
(new ClassReference() as MovieClip); 
```

# r - 引导大型数据集

> ID：13104339
> 
> 赞同：0
> 
> 时间：2012-10-27T21:27:07.227
> 
> 标签：r

我想引导一个包含多个列和行变量的大型数据集。以下是我的数据集的简化重新创建：

```
charDataDiff <- data.frame(c('A','B','C'), matrix(1:72, nrow=9))
colnames(charDataDiff) <- c("patchId","s380","s390","s400","s410","s420","s430","s440","s450") 
```

以 为标准分隔数据`patchId`。这将创建三个列表：每个变量一个

```
idColor <-  c("A", "B", "C")
(patchSpectrum <- lapply(idColor, function(idColor) charDataDiff[charDataDiff$patchId==idColor,])) 
```

创建了`sampleBoot`对样本进行采样的函数`patchSpectrum`

```
sampleBoot <-  function(nbootstrap=2, patch=3){
    return(lapply(1:nbootstrap, function(i)
             {patchSpectrum[[patch]][sample(1:nrow(patchSpectrum[[patch]]),replace=TRUE),]}))} 
```

例子：

```
sampleBoot(5,3) 
```

这是我卡住的地方：

1.  我需要对每个`patchId`列表以及每个列变量进行采样（上面的“sampleBoot”很容易完成），
2.  `patchId`取每个采样列表迭代的中位数，并且
3.  创建一个新的中位数总体来计算参数参数。我可以手动完成，但这很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:24:30.290

据我从您的问题中了解到，您可以执行以下操作：

```
do.call(rbind, lapply(sampleBoot(5, 3), function(x) apply(x[-1], 2, median))) 
```

它创建了一个包含补丁 3 的 5 个样本的中位数的表格。

# c++ - 解析不同的 xml 消息。版本

> ID：13104347
> 
> 赞同：1
> 
> 时间：2012-10-27T21:28:35.053
> 
> 标签：c++, xml, parsing, design-patterns

假设我们要将 XML 消息解析为业务对象。我们将流程分为两部分，即：

- 将 XML 消息解析为 XML 语法对象。-将 XML 对象转换为业务对象。

第一部分是自动完成的，为每个节点生成一个语法对象。

到目前为止，第二部分是按照 XML 架构完成的。例子：

如果我们有 XML 消息（简体）：

```
<Main>
  <ChildA>XYZ</ChildA>
  <ChildB att1="0">
     <InnerChild>YUK</InnerChild>
  </ChildB>
</Main> 
```

我们可以找到以下类：

```
DecodeMain(Calls DecodeChildA and B)
  DecodeChildA
  DecodeChildB(Calls DecodeInnerChild)
     DecodeInnerChild 
```

当我们需要处理相同消息的版本时，主要问题就出现了。假设我们有一个只有 DecodeInnerChild 更改的新版本（例如：我们需要在值的末尾添加一个“a”）

解决方案对于更多版本的敏捷性和尽可能干净是非常重要的。我考虑了以下选项：

* * *

1）简单继承：创建两个DecodeInnerChild类。每个版本一个。

缺点：我需要为每个父类创建不同的类来调用正确的类。

* * *

2）版本参数：为每个方法添加一个以版本为参数的对象。这样，我们将根据每个版本知道在每个方法中要做什么。

缺点：一点都不干净。不同版本的代码是混用的。

* * *

3）继承+版本参数：为直接改变的节点（如InnerChild）的公共代码创建2个基类，并在每个方法中添加版本作为参数。当一个节点调用另一个类来解码子对象时，它将根据版本参数使用一个或另一个类。

* * *

4）某种执行者模式（我不知道怎么做）：在开始时定义某种规范对象，其中指示了将要使用的所有方法，我将这个对象传递给一个类负责执行他们。

* * *

你会怎么做？欢迎其他想法。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:24:57.220

> 你会怎么做？欢迎其他想法。

与其自己解析 XML，不如先让[CodesynthesisXSD 之](http://www.codesynthesis.com/products/xsd/)类的东西为我生成所有需要的类并处理这些类。稍后当性能或某些事情成为问题时，我可能会开始寻找更有效的解析器，如果这没有结果，那么我会开始为特定情况设计和编写自己的解析器。

**编辑：**

> 抱歉，我应该更具体一点：P，第一部分是自动完成的，整个代码是从 XML 模式生成的。

好的，然后让我们讨论如何处理随着软件的发展您最终也会发展输入的常见情况。我把所有的银弹和魔杖都放在了这里的桌子上。是否以及您对它们实施什么完全取决于您。

1.  **无论如何，我创建的大多数东西都有**版本属性。**在不能优雅地解决的向后兼容性问题**之前**是理智的。最重要的是，它实现了当旧软件无法解析新输入时，它会产生对每个人都立即有意义的抱怨。**
***   我通常还会为**转换器**添加一些接口。因此，当旧软件无法解析时，可以从新版本的输入中配备转换器。新软件也可以使用相同的转换器来解析旧输入。另外，它是从完全“外星人”输入中插入转换器的地方。双赢局面。;)*   在微小变化的特殊情况下，我会考虑让 new 在内部更灵活是否便宜，`DecodeInnerChild`因此接受带有或不带有“a”的值作为有效值。在转换器中，当转换为旧版本时，我仍然必须摆脱那个“a”。*   通常实际发生的是`InnerChild`拆分，两个版本将并排使用。如果两个 s 之间存在足够的行为差异，`InnerChild`那么就没有必要避免 polymorphic `InnerChilds`。当添加多态性时，确实就像您在 1) 中所说的那样，所有包含现在具有此类多态成员的类都必须更改。转换器通常应该在这种情况下产生残缺`InnerChild`或转发到输入超出其能力的旧版本。**

# iphone - 定制手电筒闪烁？

> ID：13104350
> 
> 赞同：0
> 
> 时间：2012-10-27T21:28:44.820
> 
> 标签：iphone, ios, flashlight

有没有办法让iPhone的手电筒在点击一个按钮后闪烁几次？就像如果我单击一个按钮，手电筒只闪烁 3 次？我还没有在网上找到有关此的信息。谁能帮我解决这个问题？有没有办法让闪光更长？比如2秒闪？

我不知道你们中是否有人不明白我的意思：我只想打开手电筒 2 秒，然后在 2 秒后自动关闭。

我的代码当时是：

```
- (void)loadView
{
  [self setView:[[[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease]];

  AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

  // If torch supported, add button to toggle flashlight on/off
  if ([device hasTorch] == YES)
  {
    flashlightButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 120, 320, 98)];
    [flashlightButton setBackgroundImage:[UIImage imageNamed:@"TorchOn.png"] forState:UIControlStateNormal];
     [flashlightButton addTarget:self action:@selector(buttonPressed:) forControlEvents: UIControlEventTouchUpInside];      

    [[self view] addSubview:flashlightButton];
  }
} 
```

并打开和关闭：

```
- (void)buttonPressed:(UIButton *)button
{
  if (button == flashlightButton)
  {
    if (flashlightOn == NO)
    {
      flashlightOn = YES;
      [flashlightButton setBackgroundImage:[UIImage imageNamed:@"TorchOff.png"] forState:UIControlStateNormal];
    }
    else
    {
      flashlightOn = NO;
      [flashlightButton setBackgroundImage:[UIImage imageNamed:@"TorchOn.png"] forState:UIControlStateNormal];
    }

    [self toggleFlashlight];
  }
} 
```

并用于模拟拍照：

```
- (void)toggleFlashlight
{
  AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

  if (device.torchMode == AVCaptureTorchModeOff)
  {
    // Create an AV session
    AVCaptureSession *session = [[AVCaptureSession alloc] init];

    // Create device input and add to current session
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error: nil];
    [session addInput:input];

    // Create video output and add to current session
    AVCaptureVideoDataOutput *output = [[AVCaptureVideoDataOutput alloc] init];
    [session addOutput:output];

    // Start session configuration
    [session beginConfiguration];
    [device lockForConfiguration:nil];

    // Set torch to on
    [device setTorchMode:AVCaptureTorchModeOn];

    [device unlockForConfiguration];
    [session commitConfiguration];

    // Start the session
    [session startRunning];

    // Keep the session around
    [self setAVSession:session];

    [output release];
  }
  else
  {
    [AVSession stopRunning];
    [AVSession release], AVSession = nil;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:42:53.957

这应该可以解决问题：

```
-(void)turnoff{

    //YOUT TURN OFF CODE    

}

-(void)doTurnOff{

    [self performSelector:@selector(turnoff) withObject:nil afterDelay:2.0];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:08:41.913

您可以使用 NSTimer 创建一系列 on 和 off 呼叫，其中包含您需要的任何持续时间和间隔间隙。NSTimer 回调可以从数组或 plist 等中读取下一步要做什么以及何时执行的顺序。这就像构建一个定时顺序状态机。

# c# - 将 varbinary 显示为可下载的链接

> ID：13104356
> 
> 赞同：0
> 
> 时间：2012-10-27T21:29:41.827
> 
> 标签：c#, asp.net, sql-server

相当直截了当的问题，我将图像作为 varbinary 存储在我的数据库中，并希望提供这些图像的链接，而不是在网站上显示它们。当用户单击链接时，他/她应该能够下载图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:37:42.377

响应请求提供图像。

```
<img src="?" /> <!-- what goes here? --> 
```

您需要创建一个[HTTP 处理程序](http://msdn.microsoft.com/en-us/library/bb398986%28v=vs.100%29.aspx)来接收对这些图像的请求。

处理程序是在特定 URL 上可用的可执行文件，它可以响应您的请求；在这种情况下，通过提供图像的二进制数据。ASPX 页面是一个有效的处理程序，尽管有更有效的图像处理程序类型。

```
<img src="MyHandler.aspx?imageId=123" /> 
```

处理程序应该做一些事情：

*   验证 ID 是否有效以及调用者是否具有权限（如果需要）
*   从数据库中检索图像
*   设置适当的响应头
*   用于`Response.BinaryWrite()`将二进制数据发送到客户端。

请注意，如果您使用的是 ASP.Net MVC，则可以使用控制器作为处理程序。

另一种方法是对字节进行 base 64 编码并将它们直接嵌入到图像标签中。

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

对于小图像或多个请求的开销非常高时，这是一种有用的技术。

见：[http ://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

更多阅读：

*   [动态呈现 asp：来自 ASP.NET 中 BLOB 条目的图像](https://stackoverflow.com/questions/21877/dynamically-rendering-aspimage-from-blob-entry-in-asp-net)
*   [动态图像生成](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:31:34.060

您应该创建一个获取图像 ID 并返回图像的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:56:30.563

你可以考虑这个问题：

[在 asp 中显示数据表中的图像：代码隐藏中的图像](https://stackoverflow.com/questions/10143323/display-image-from-a-datatable-in-aspimage-in-code-behind)

我有一个类似的问题，那个答案解决了我的问题。除此之外，您可以使用 Telerik 的 binaryimage 组件：

[http://www.telerik.com/products/aspnet-ajax/binaryimage.aspx](http://www.telerik.com/products/aspnet-ajax/binaryimage.aspx)

# java - 排除在 IntellIJ 中运行的测试

> ID：13104357
> 
> 赞同：73
> 
> 时间：2012-10-27T21:29:48.373
> 
> 标签：java, maven, junit, intellij-idea

是否不能排除 IntelliJ IDEA Ultimate 中的某些测试？我想在 IntelliJ 中运行单元测试，但排除集成测试。我将集成测试命名为，`*IT.java`以便 Maven 故障安全插件可以从单元测试中单独运行它们。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-10-27T22:42:00.210

在`JUnit`Run 配置中设置`Test kind`为**Pattern**，指定以下正则表达式作为模式：

```
^(?!.*IT$).*$ 
```

它与类名匹配，因此您不需要匹配`.java`扩展名。如果类名以`IT`使用[负前瞻](http://www.regular-expressions.info/lookaround.html)结尾，则正则表达式将不匹配。

![忽略以 IT 结尾的测试](../Images/a4f12d854c175710c84f5d177b58cb79.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-06-19T11:05:30.567

使用 JUnit5，您现在可以标记您的测试，例如：`@Tag("integration-test")`.

此外，鉴于 IntelliJ 现在也支持 JUnit5，您可以创建一个**JUnit 测试配置**并选择**Test Kind** : `Tags (JUnit5)`。

要排除“集成测试”，您只需指定为 tags: `!integration-test`，IntelliJ 将运行所有 JUnit5 测试，除了标记为 的测试`integration-test`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-27T21:32:14.417

我会将它们拆分为它们位于不同的包中。毕竟他们在做不同的事情。然后，您可以按包运行测试。[此](http://www.jetbrains.com/idea/webhelp/run-debug-configuration-junit.html)链接详细说明了如何执行此操作。

# c++ - 编译器是否被迫拒绝无效的 constexpr？

> ID：13104358
> 
> 赞同：9
> 
> 时间：2012-10-27T21:29:54.590
> 
> 标签：c++, c++11, language-lawyer, constexpr

```
#include <exception>

constexpr bool foo(bool x)
{
  return x ? true : throw std::exception();
}

int main()
{
  // 1) must never be compiled
  // static_assert(foo(false), "");

  // 2) must always be compiled?
  const bool x = foo(false);

  // 3) must never compile?
  constexpr bool y = foo(false);

  return 0;
} 
```

我确信 (1) 一定会导致编译错误。我很确定（2）不能在编译时被拒绝，尽管它会在运行时失败。

有趣的例子是 constexpr 变量 (3)。在这个简单的例子中，gcc 和 clang 实际上计算表达式，因此会拒绝程序。（错误消息：y 不是常量表达式）。

是否每个 C++11 编译器都被迫拒绝该程序？如果 foo(false) 被更复杂的表达式代替怎么办？

我很惊讶地发现 constexpr 不是图灵完备的，尽管这将是在规范更改之后： [基于 constexpr 的计算图灵完备吗？](https://stackoverflow.com/questions/9201506/is-constexpr-based-computation-turing-complete)

也许这与我的问题有关。据我了解，允许编译器将本示例中 constexpr (3) 的实际评估推迟到运行时。但是如果 constexpr 是图灵完备的，我很难相信编译器可以为所有 constexpr 决定是否会抛出异常（这意味着 constexpr 无效）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T21:49:55.503

根据我的阅读，是的，每个编译器都必须抱怨语句 (3)。

N3242 7.1.5 第 9 段：

> 对象声明中使用的`constexpr`说明符将对象声明为`const`. 这样的对象应具有文字类型并应被初始化。如果它由构造函数调用初始化，则该调用应为常量表达式（5.19）。否则，出现在其初始化程序中的每个完整表达式都应是一个常量表达式。用于转换初始化表达式的每个隐式转换和用于初始化的每个构造函数调用都应是常量表达式（5.19）中允许的那些之一。

我认为一个`constexpr`对象是“在编译时评估的”，而一个`constexpr`函数或`constexpr`构造函数是“可能在编译时评估的”。编译器必须在编译时确定 (3) 等语句的语义有效性。您可能会争辩说“评估”仍然可以在运行时完成，但检查有效性无论如何都会完成大部分工作。另外，代码可以继续实例化模板`Check<y>`，这几乎可以保证编译器需要`y`在编译时计算出 的值。

这确实意味着您可以编写一个恶魔般的程序来使编译器花费非常长或无限的时间。但我怀疑这已经可以通过`operator->`技巧来实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-27T21:51:54.910

> 我确信 (1) 一定会导致编译错误。我很确定（2）不能在编译时被拒绝，尽管它会在运行时失败。

正确的。条件运算符的`throw`部分不是常量表达式，在 (1) 中，它不是未求值的。对于 (2)，`foo`不强制在编译时进行评估。

对于 (3)，如何允许编译器推迟评估？`constexpr`decl-specifier*强制* 在`foo`编译时进行评估。与（1）基本相同，初始化`y`是*需要*常量表达式的上下文。

`§7.1.6 [dcl.constexpr] p9`

> 对象声明中使用的`constexpr`说明符将对象声明为`const`. 这样的对象应具有文字类型并应被初始化。如果它由构造函数调用初始化，则该调用应为常量表达式（5.19）。**否则**，或者如果`constexpr`在引用声明中使用了说明符，则**出现在其初始化程序中的每个完整表达式都应为常量表达式。**[...]

# google-chrome-extension - 如何自动重启 chrome 扩展？

> ID：13104360
> 
> 赞同：5
> 
> 时间：2012-10-27T21:30:07.367
> 
> 标签：google-chrome-extension, application-restart

我有一个我构建的 chrome 扩展，它会泄漏内存。我正在努力修复内存泄漏，但与此同时，一些朋友已经在使用它。

作为一项临时措施，我想包含一个补丁，它会定期自动重启扩展。

如何做到这一点？，即从扩展本身内重新启动 chrome 扩展。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T09:22:27.880

您可以有两个扩展名。并从另一个重新启动目标扩展。如果这适合你，请继续阅读。

## 内容.js

```
window.addEventListener('load', function (e) {
    // create a button and add it to the page
    var btn = document.createElement('button');
    btn.innerHTML = 'Restart child extension';
    btn.addEventListener('click', function (e) {
        // on button click send message to the background script
        chrome.extension.sendMessage({restart: true}, function (res) {
            console.log(res);
        });
    }, false);

    var body = document.querySelector('body');
    body.appendChild(btn);
}, false); 
```

## 背景.js

```
// first get your target (child) extension by it's name
var child = null;
chrome.management.getAll(function (info) {
    for (var i=0; i < info.length; i++) {
        if (info[i].name == 'Test child extension') {
            child = info[i];
            break;
        }
    }
});

function disable (cb) {
    chrome.management.setEnabled(child.id, false, cb);
}
function enable (cb) {
    chrome.management.setEnabled(child.id, true, cb);
}
function afterEnable () {
    // notify the content script
    resRestart({restarted: true});
}

var resRestart = null;
chrome.extension.onMessage.addListener(function (request, sender, sendResponse) {
    console.log(request);
    // if we receive request with restart variable, save a reference to the
    // sendResponse function and disable the child extension
    switch (true) {
        case request.restart: resRestart = sendResponse; disable(); break;
    }
    return true;
});
chrome.management.onDisabled.addListener(function (extension) {
    // this one is fired when extension is restarted
    // check if this is our child extension and re-enable it
    if (extension.name == 'Test child extension') {
        enable(afterEnable);
    }
}); 
```

## manifest.json（父级）

```
{
    "manifest_version": 2,
    "name"            : "Test parent extension",
    "version"         : "1.0",
    "description"     : "Whatever",

    "background" : {
        "scripts": [
            "background.js"
        ]
    },

    "content_scripts": [
        {
            "matches": [
                "*://localhost/*"
            ],
            "js": [
                "content.js"
            ],
            "run_at": "document_end",
            "all_frames": true
        }
    ],

    "permissions": [
        "tabs",
        "management",
        "*://localhost/*"
    ]
} 
```

## manifest.json（孩子）

```
{
    "manifest_version": 2,
    "name"            : "Test child extension",
    "version"         : "1.0",
    "description"     : "Whatever",

    "content_scripts": [
        {
            "matches": [
                "*://localhost/*"
            ],
            "css": [
                "style.css"
            ],
            "run_at": "document_end",
            "all_frames": true
        }
    ]
} 
```

## 目录结构

```
.
├── background.js
├── child
│   ├── manifest.json
│   └── style.css
├── content.js
└── manifest.json 
```

现在打开`about:extensions`并`http://localhost`在分屏中。点击按钮，看看子扩展每次是如何刷新的。您也可以查看控制台。甚至尝试从内部禁用子扩展`about:extensions`- 只要父扩展正在运行，就不可能。

# javascript - Twitter-Bootstrap 进度条每 x 秒 100%

> ID：13104361
> 
> 赞同：0
> 
> 时间：2012-10-27T21:30:19.297
> 
> 标签：javascript, css, twitter-bootstrap

是否有可能让 Bootstrap 进度条每隔 5 秒就达到 100%

```
 <div class="progress progress-striped active">
      <div class="bar" style="width: 40%;"></div>
        </div> 
```

进度条是通过宽度样式填充的，所以上面会将它放在 40% 完成

我怎样才能让它在 5 秒内顺利加载到 100%，然后重置回 0 并重新开始，重复？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:39:16.653

在这个答案中，我稍微修改了@Blender 的方法以永久运行。

为此，我使用`complete`函数的参数`animate`。
[http://jsfiddle.net/xXM2z/490/](http://jsfiddle.net/xXM2z/490/)
完整的JS代码：

```
$(document).ready(function(){
   animateScroll();
});

function animateScroll()
    {
    $('.bar').animate({
    width: '100%'
}, {
    duration: 5000,
    easing: 'linear',
    complete:function(){ $(this).css("width","0%");
   }
});
animateScroll();
} 
```

# mysql - 用于查找事件是否在类别列表中的 SQL 查询

> ID：13104363
> 
> 赞同：0
> 
> 时间：2012-10-27T21:30:24.430
> 
> 标签：mysql, sql

我已经将一个事件建模为具有多个类别。

所以我有一张`Event`桌子和一张`Event_Category`桌子。该`Event_Category`表很明显：它有两列，the`Event ID`和 the `Category name`。

类别为`HIKE`、`FAMILY`、`CLASS_OR_LECTURE`等。

也许我脑子有问题，但我一生都无法弄清楚 SQL 查询来获取给定类别列表中的事件列表。

例如，我想要一个包含“HIKE”或“FAMILY”类别的事件列表。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:36:32.390

```
select * from events where id in (select distinct id from events_categories where category_id in (1,2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:36:23.443

这不是吗？

```
SELECT DISTINCT event_id 
  FROM event_category
 WHERE category_name IN ('HIKE', 'FAMILY', 'CLASS_OR_LECTURE') 
```

如果您想要的不仅仅是事件 ID：

```
SELECT DISTINCT (whatever) 
  FROM event JOIN event_category USING (event_id)
 WHERE category_name IN ('HIKE', 'FAMILY', 'CLASS_OR_LECTURE') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:43:32.323

```
Select
  e.*
From
  events e
Where
  Exists (
    Select 'x'
    From   event_category ec
    Where  ec.event_id = e.event_id
    And    ec.category_name in ('HIKE', 'FAMILY')
  ); 
```

# django - 在模型函数中使用 django 过滤器

> ID：13104365
> 
> 赞同：3
> 
> 时间：2012-10-27T21:30:44.937
> 
> 标签：django, django-models

模型的主要目的是包含业务逻辑，所以我希望我的大部分代码都以方法的形式存在于 django 模型中。例如，我想编写一个名为`get_tasks_by_user()`inside 任务模型的方法。这样我就可以访问它

```
Tasks.get_tasks_by_user(user_id) 
```

以下是我的模型代码：

```
class Tasks(models.Model):
    slug=models.URLField()
    user=models.ForeignKey(User)
    title=models.CharField(max_length=100)
    objects=SearchManager()
    def __unicode__(self):
        return self.title
    days_passed = property(getDaysPassed)
    def get_tasks_by_user(self,userid):
        return self.filters(user_id=userid) 
```

但这似乎不起作用，我将其用作：

```
 tasks = Tasks.objects.get_tasks_by_user(user_id) 
```

但它给出了以下错误：

```
'SearchManager' object has no attribute 'get_tasks_by_user' 
```

如果我删除`objects=SearchManager`，那么只有错误的经理名称会改变，所以我认为这不是问题。好像我在做一些非常基本的错误，请告诉我我做错了什么以及我该如何做我想做的事情。我知道我可以通过 : 做同样的事情，`Tasks.objects.filters(user_id=userid)`但我想将所有这些逻辑保留在模型中。所以请告诉这样做的正确方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:51:04.117

一个简单的方法是使用[`classmethod`](http://docs.python.org/library/functions.html#classmethod)装饰器使其成为类方法。内部`class Tasks`：

```
@classmethod
def get_tasks_by_user(cls, userid):
    return cls.objects.filters(user_id=userid) 
```

这样你就可以简单地调用：

```
tasks = Tasks.get_tasks_by_user(user_id) 
```

* * *

或者，您可以根据汤姆的回答使用管理器。

要决定在您的特定情况下选择哪一个，您可以参考 James Bennett（Django 的发布经理） [关于何时使用管理器/类方法的博客文章。](http://www.b-list.org/weblog/2008/feb/25/managers/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T21:46:21.637

模型类上的任何方法都只能用于该模型的实例，即单个对象。

为了使您的`get_tasks_by_user`功能可以根据需要（在集合上）使用，它需要在[模型管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)上实现。

```
class TaskManager(models.Manager):
    def get_tasks_by_user(self, user_id):
        return super(TaskManager, self).get_query_set().filter(user=user_id)

class Task(models.Model):
    # ...
    objects = TaskManager() 
```

# php - javascript 发布到 .php 文件 一台服务器不起作用 - 在浏览器中手动输入 URL 到相同的 .php 有效

> ID：13104366
> 
> 赞同：0
> 
> 时间：2012-10-27T21:30:58.453
> 
> 标签：php, javascript

我在理解如何传输 javascript（客户端）变量时遇到一些问题，以便它们可以从 php（服务器端）作为会话访问：[在 PHP 中获取 iframe 的“src”值？](https://stackoverflow.com/questions/13099007/get-an-iframes-src-value-in-php#comment17803278_13099007)

现在我处于使用 firebug 尝试调试正在发生的事情的情况，但这没有任何意义：

我有这个功能来更新 iframe，我想传递该 iframe 正在显示的页面：

```
function frameclick(pageurl)
 {
        $.post("session_write.php?",
    {
            frameurl : pageurl             
    }

    $("#iFrame1").attr('src', pageurl);
    console.log  ('<?php echo "logout:".$langpath.$_SESSION['frameurl'];?>');
 } 
```

pageurl 是前。“/lang/en/new.htm” - 如果我用萤火虫检查它，我也可以看到它说它正确传递了它（也有 / 的转换）。

我发布到的脚本服务器端是这样的：

```
#session_write.php
<?php
session_start();
print_r($_GET['frameurl']);
if (isset($_GET['frameurl'])) 
{
$_SESSION['frameurl'] = $_GET['frameurl'];
print_r($_SESSION);
}
?> 
```

发布到服务器上的那个 php 脚本将通过 javascopt 失败 - $_SESSION['frameurl'] 将是 ''，但如果我前。像这样手动操作：（http）：

```
//localhost/phpmenu/session_write.php?frameurl=lang%2Fen%2Fnew.htm 
```

那么它将在 $_SESSION["frameurl"] 变量中正确设置。

我根本无法理解在浏览器中进行 javascript 发布和手动发布之间有什么不同，为什么它会导致我出现这个问题？

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:34:43.900

您正在使用`.post`，它执行 POST 请求，但是当您在地址栏中输入 URL 时，这是一个 GET 请求。

`$_GET`检索通过 GET 传递的任何参数，同时`$_POST`检索通过 POST 传递的任何参数。因此，如果您使用`.post`Javascript 但尝试`$_GET`在 PHP 中检索，它将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:34:53.967

当您将变量 POST 到 PHP 文件时，`$_GET`未设置。改为使用`$_POST['frameurl']`。此外，看起来您在`frameclick`结束`post`通话时缺少一个密切的括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:45:33.810

您正在通过 `POST` 请求传递数据并检索所有 GET 请求。改为使用`$_POST`。您也可能对。。。有兴趣`$_REQUEST`

# arduino - Arduino，萤火虫，伺服不通信

> ID：13104378
> 
> 赞同：2
> 
> 时间：2012-10-27T21:32:52.313
> 
> 标签：arduino, grasshopper

我正在尝试使用萤火虫控制 2 个伺服系统。我让它工作[（证明）](http://variabledimensions.tumblr.com/post/33803960587/aint-no-stoppin-so-this-evening-and-after-hours)，现在它似乎不起作用......

我的设置如下： - Arduino Mega 2560 R3 - Arduino sensor Shield V5.0 - 2 个标准伺服系统（插入传感器屏蔽中的引脚 9 和 10） - 7.5V 壁式电源 - 连接计算机的 USB 电缆

我在 32 位 Windows Vista 机器上运行 Rhino SR 8 我有版本 0.9.0014 的蚱蜢（最新）和 Firefly_Build_1.0067（也是最新的）我用最新的萤火虫固件刷新了我的 Arduino 板（9 月 10 日更新, 2012)

我已经检查过我正在使用“MEGA write”框，我已经将正确的位转到正确的引脚上，并且我已经检查过它们都勾选了“servo”而不是“digital”或“pwm”

我的伺服器和电路板与普通的 Arduino 软件完美配合，但不再与萤火虫配合使用。

该端口正确显示为 COM 4 并在萤火虫中正常打开。

当我移动滑块控制舵机时，TX灯亮，RX灯闪烁，但舵机没有移动……

（确认：一切都适用于arduino中的扫描示例，所以我已经消除了电源和接线问题）......

任何想法可能是什么问题？

我试过重新安装，关闭和打开很多次，更换电缆，尝试不同的板（也不再适用于 Duemilanove），尝试屏蔽上的所有引脚，尝试没有屏蔽的伺服，尝试一个带盾牌的伺服器，大量谷歌搜索，大量搜索论坛，解锁资源管理器中的萤火虫安装文件，很多东西......我完全没有想法......而且非常困惑，因为它只工作了几天以前...我只是错过了一些非常明显的东西，还是我的软件有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:59:20.867

您应该尝试将电阻和 LED 连接到舵机的信号端口，这样您就可以查看舵机是否实际接收到信号。

# javascript - 用于 DOM 相关处理的 JavaScript 并行线程

> ID：13104381
> 
> 赞同：2
> 
> 时间：2012-10-27T21:33:12.603
> 
> 标签：javascript, dom, iframe

我有一个资源消耗 DOM（浏览器）相关的 JavaScript 进程。启动时它会阻塞页面（其他与 DOM 相关的处理）。是否可以异步并行运行此过程，并在完成后将结果传递到主页？Web 工作者并非如此，因为进程与 DOM 一起工作。

这可以用 iframe 实现吗？JS 是否也在 iframe 阻止托管页面 DOM 中启动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:40:24.700

实际上，这将是使用*WebWorkers*的主要示例，但正如您正确提到的那样，您不会在那里引用 DOM。您唯一的选择是将这个过程分离成更小的任务。如果你能做到这一点，你需要问自己两个问题

*   较小的任务需要按顺序运行吗？
*   这些任务可以异步运行吗？

*如果您可以用No*回答这两个问题，则可以设置一个*失控脚本计时器*并异步执行这些任务。例子：

```
var taskList = [
    function() {},
    function() {},
    function() {},
    function() {}
    // a whole lot more entrys
];  // in a real-world scenario you would `.push()` values or functions

(function _loop() {
    setTimeout(function() {
        var start = Date.now();
        do {
            taskList.shift()();
        } while( taskList.length && Date.now() - start < 100)

        if( taskList.length ) setTimeout( _loop, 100 );
    },100);
}()); 
```

上述算法将`taskList`尽可能快地执行包含的函数，但在最大 100 毫秒的时间范围内。这将确保浏览器和*UI 线程*在处理过程中不会被阻塞超过*100 毫秒*。因此浏览器将保持*响应*。

# javascript - 回调有什么意义

> ID：13104388
> 
> 赞同：0
> 
> 时间：2012-10-27T21:34:48.340
> 
> 标签：javascript, function, callback

我现在了解到回调是传递给参数的函数。但我可以不这样做有什么意义呢？例如

```
function i()
{
 alert("callback");
 }
function p(a)  
{
for(r=0;r<100;r++)
{document.write(r);}
a();
}
p(i); 
```

或者

```
 function i()
{
alert("callback");
 }
function p()  
{
for(r=0;r<100;r++)
{document.write(r);}
i();} 
```

我搜索但找不到答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:37:59.550

当您想要对一些无法立即使用的数据执行某些操作时，通常会使用回调。

例如，*在响应到达时*处理来自 HTTP 响应的某些数据，或者根据单击*鼠标按钮时*发生鼠标单击的位置执行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:41:34.773

所以举个例子，是的，如果你想调用`i()`函数`p()`，你可以继续这样做。但是，如果您想要一个函数，就像`p()`它在最后调用的 accept`j()`而不是`i()`? 好吧，这很容易，您将函数作为参数传递`p()`给最后调用，而不是硬编码它。

这是关于灵活性的。没有必要为了做而做，但在很多情况下它是有用的。

所以让我试着想出一个简单的例子，假设我们有一个调用函数`sum()`，它将数组的所有元素相加。现在让我们假设在我们的程序中的某个地方，我们不想对所有元素求和，而是对一些元素求和，也许只是超过某个值的元素，或者每个其他元素。如果我们设置 sum 以便除了要处理的数组之外，它还可以使用一个函数参数来调用`filter`（如果保留为 null，我们将默认对所有元素求和），我们可以使我们的`sum()`函数变得更多更有用，避免编写一大堆不同的求和函数。

此外，正如 Quentin 已经回答的那样，它对异步函数特别有用。

# jquery - 正则表达式验证字符串中的多个文件名

> ID：13104389
> 
> 赞同：0
> 
> 时间：2012-10-27T21:34:52.510
> 
> 标签：jquery, regex

我需要正则表达式来验证字符串中的多个文件名。

例如：

`a.html`已验证。
如果超过 1 个文件应该是`a.html;b.html`，
如果超过 2 个应该是`a.html;b.html;c.html`。

错误表达：

```
1)  a;b.html
2)  a.html;b
3)  a;b
4)  a.html;
5)  a.html;b;
6)  a.html;b.html; 
```

如果字符串以结尾，`;`则应该有另一个有效的文件名 ( `c.html`)。

我的代码是：

```
regex": /^([a-zA-Z]:\\)?[^\x00-\x1F"<>\|:\*\?/]+\.[a-zA-Z]{3,4}$/,
alertText": "* Only (;) and (.) are Allowed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:28:07.147

这是一个简短的解决方案

`/^(?:[^\.;]+\.[^\.;]+)(?:;[^\.;]+\.[^\.;]+)*$/`

一些解释：第一部分`(?:[^\.;]+\.[^\.;]+)`将匹配单个文件名。文件名可以是任何不包含`.`和`;`

第二部分`(?:;[^\.;]+\.[^\.;]+)*`与第一部分几乎相同，除了`;`前面和尾部`*`。这代表一个文件名，就像第一部分一样，带有前导`;`. 它会尽可能地重复

# ubuntu - 将 DE 与 XMonad 配对

> ID：13104391
> 
> 赞同：3
> 
> 时间：2012-10-27T21:34:55.973
> 
> 标签：ubuntu, xmonad, mate-desktop

由于 MATE 只是 GNOME2 的一个分支，显然可以使用以下命令将窗口管理器替换为另一个（即 xmonad）`mateconftool-2 -s /desktop/mate/session/required_components/windowmanager xmonad --type string`：. 这在我登录 MATE 时启动 XMonad 的意义上是有效的，但是，看起来 xmonad 正在尝试平铺面板或其他东西。其中一个面板实际上填满了它不应该占据的所有空间（顶部和底部留空）并且系统完全无法使用（需要重新启动）。

我的 xmonad.hs：

```
{-# LANGUAGE OverloadedStrings #-}

import XMonad
import XMonad.Hooks.DynamicLog
import XMonad.Hooks.SetWMName
import Control.Monad
import qualified XMonad.StackSet as W
import XMonad.Util.EZConfig
import qualified XMonad.Actions.FlexibleResize as Flex
import XMonad.Hooks.EwmhDesktops

import XMonad.Config.Desktop
import XMonad.Hooks.ManageDocks
import XMonad.Layout.NoBorders
import XMonad.Layout.LayoutHints

import XMonad.Util.Run (safeSpawn)

import System.Environment (getEnvironment)

main = xmonad mateConfig

mateConfig = desktopConfig
            { logHook = spawn "wmname LG3D"
            , manageHook = myManageHook <+> manageHook mateConfig
            , workspaces = ["1", "2", "3", "4", "5", "="]
            , modMask = mod4Mask
            , terminal = "gnome-terminal"
            , startupHook = takeTopFocus >> setWMName "LG3D"
            , handleEventHook = fullscreenEventHook
            --, layoutHook = layoutHints $ avoidStruts (noBorders Full) ||| Mirror (Tall (1 (3/100) (1/2))) 
            , layoutHook = avoidStruts ((noBorders Full) ||| Mirror (Tall 1 (3/100) (1/2)))
         }

         `additionalKeys` [ ((mod4Mask, xK_d), spawn "dmenu_run -fn \"Ubuntu_Mono-13:Normal\" -nb black -nf skyblue -sb skyblue -sf black")
                           ,((mod4Mask, xK_v), spawn "gvim")
                           ,((mod4Mask, xK_x), spawn "gvim ~/.xmonad/xmonad.hs")
                           ,((mod4Mask, xK_p), spawn "gnome-terminal")
                           -- ,((0       , xF86XK_AudioPlay), spawn "echo \"PLAY\" > ~/Desktop/hi")
                            ]

         `additionalMouseBindings` [ ((mod4Mask, button3), (\w -> focus w >> Flex.mouseResizeWindow w))
                                    ]

myManageHook = composeAll
    [ className =? "Amarok" --> doShift "="
    , manageDocks
    ]

{--- DBus Stuff-}
-- | Register xmonad with mate. 'dbus-send' must be in the $PATH with which
-- xmonad is started.
--
-- This action reduces a delay on startup only only if you have configured
-- mate-session>=2.26: to start xmonad with a command as such:
--
-- > mateconftool-2 -s /desktop/mate/session/required_components/windowmanager xmonad --type string
mateRegister :: MonadIO m => m ()
mateRegister = io $ do
    x <- lookup "DESKTOP_AUTOSTART_ID" `fmap` getEnvironment
    whenJust x $ \sessionId -> safeSpawn "dbus-send"
            ["--session"
            ,"--print-reply=string"
            ,"--dest=org.mate.SessionManager"
            ,"/org/mate/SessionManager"
            ,"org.mate.SessionManager.RegisterClient"
            ,"string:xmonad"
            ,"string:"++sessionId]

atom_WM_TAKE_FOCUS ::
  X Atom
atom_WM_TAKE_FOCUS =
  getAtom "WM_TAKE_FOCUS"

takeFocusX ::
  Window
  -> X ()
takeFocusX w =
  withWindowSet . const $ do
    dpy       <- asks display
    wmtakef   <- atom_WM_TAKE_FOCUS
    wmprot    <- atom_WM_PROTOCOLS
    protocols <- io $ getWMProtocols dpy w
    when (wmtakef `elem` protocols) $
      io . allocaXEvent $ \ev -> do
          setEventType ev clientMessage
          setClientMessageEvent ev w wmprot 32 wmtakef currentTime
          sendEvent dpy w False noEventMask ev

takeTopFocus ::
  X ()
takeTopFocus =
  withWindowSet $ maybe (setFocusX =<< asks theRoot) takeFocusX . W.peek 
```

我唯一的假设是 xmonad 没有正确地忽略面板。

我正在使用从 12.04 升级的 Ubuntu x64 12.10

编辑：我尝试添加`className =? "mate-panel" --> doIgnore`到 xmonad.hs 中的 manageHooks。没有不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:19:43.230

我正在使用 XMonad 运行 MATE。检查配置。在这个[回购](https://github.com/bsnux/xmonad-config/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:27:55.883

啊，我找到了。我在该`manageHook`部分的`mateConfig`部分犯了一个愚蠢的错误。该行`manageHook = myManageHook <+> manageHook mateConfig`实际上没有意义，因为它指的是 mateConfig，它仍然由该行定义。它实际上应该是`manageHook = myManageHook <+> manageHook desktopConfig`。mateConfig 应该是 desktopConfig。

此外，logHook、handleEventHook 等...缺少`<+> *Hook desktopConfig`部分，这会破坏一大堆东西。

# c# - 套接字开始接收问题

> ID：13104395
> 
> 赞同：1
> 
> 时间：2012-10-27T21:35:06.110
> 
> 标签：c#, sockets, asynchronous

为什么我收到大小的[BeginReceive](http://msdn.microsoft.com/en-us/library/dxkwh6zw.aspx)方法（第三个参数）错误？

但是 BUFFER_SIZE 它永远不会比常量值（它的 2048 字节）更大（长度）。

这是我的代码：

```
public void Send(byte[] byteData, M.StateObject _stateObj, Socket client)
    {
        // Begin sending the data to the remote client(s):
        client.BeginSend(byteData, 0, byteData.Length, 0, new AsyncCallback(SendData), _stateObj);
    }

    void SendData(IAsyncResult ar)
    {
        try
        {
            M.StateObject stateObj = (M.StateObject)ar.AsyncState;
            Socket client = stateObj.server;
            byte[] data = stateObj.data;
            int bytesSent = client.EndSend(ar);
            client.BeginReceive(data, 0, M.StateObject.BUFFER_SIZE, SocketFlags.None, new AsyncCallback(ReceiveData), stateObj);
            allDone.Set();
        }
        catch (Exception ex)
        {
            OnMessageShowing(ex.Message);
        }
    }

    private void ClientLogging(object _data, M.StateObject _stateObj)
    {
        M.UserData client = _data as M.UserData;
        if (client != null)
        {
            //setting properties:
            client.bConnectred = true;

            // 1\. add client to list of clients:
            ClientAddingRemoving(_stateObj, client, true);

            // 2\. showing welcome on server
            OnMessageShowing(client.ServerNotifying());

            // 3\. refreshing the list of clients on server`s main form
            OnClientsListRefreshing(bll.ClientsListCreating(listOfClients));

            // 4\. send welcome note to all clients:
            byte[] bytesToSend = M.SerializeServer.Login_WelcomeToAllClients(client);
            bytesToSend = M.BytesArrayGetSet.BytesSending_Set(bytesToSend);
            SendToAll(bytesToSend, _stateObj.server);

            // 5\. send list of all users to logged client:
            bytesToSend = M.SerializeServer.Login_ToLoggedClient(bll.ListOfAllUsers(listOfClients));
            bytesToSend = M.BytesArrayGetSet.BytesSending_Set(bytesToSend);
            Send(bytesToSend, _stateObj, _stateObj.server);

            //6\. send new client to list of all other clients:
            bytesToSend = M.SerializeServer.Login_ToAllClients(client);
            bytesToSend = M.BytesArrayGetSet.BytesSending_Set(bytesToSend);
            SendToAll(bytesToSend, _stateObj.server);
        }
    }

    private void SendToAll(byte[] data, Socket _socket)
    {
        foreach (M.StateObject stObj in listOfClients.Keys) //dictionary<StateObject, Client>, Client is a custom client class
        {
            Send(data, stObj, _socket);
        }
    } 
```

这是 StateObject 类：

```
public class StateObject 
{    
    public Socket Server;
    public const int BUFFER_SIZE = 2048;
    public byte[] data = new byte[BUFFER_SIZE];
} 
```

也许调用 Send() 方法太多次？我是否必须使用“ManualResetEvent”委托来阻止或做其他事情？我真的不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:47:48.410

替换`M.StateObject.BUFFER_SIZE`为`stateObj.data.Length`，不知何故`data`小于`BUFFER_SIZE`。

我还看到您将数据放入数组中，但不对其进行任何操作。我建议改变这个

```
byte[] data = stateObj.data;
int bytesSent = client.EndSend(ar);
client.BeginReceive(data, 0, M.StateObject.BUFFER_SIZE, SocketFlags.None, new AsyncCallback(ReceiveData), stateObj); 
```

对此

```
int bytesSent = client.EndSend(ar);
client.BeginReceive(stateObj.data, 0, stateObj.data.Length, SocketFlags.None, new AsyncCallback(ReceiveData), stateObj); 
```

看看是否可以解决您的错误。

* * *

我还注意到您的 BeginSend 正在传递状态对象 blob。你用来发送数据的数组`stateObj.data`也是？如果是这样，是否使用新`stateObj`对象多次调用 BeginSend？如果它们都共享同一个状态对象，您可以让下一次发送读取与当前接收写入的时间相同。

# php - PHP shell_exec() - 直接运行，还是执行 cron (bash/php) 并包含 MySQL 层？

> ID：13104396
> 
> 赞同：1
> 
> 时间：2012-10-27T21:35:23.733
> 
> 标签：php, linux, security, optimization, shell-exec

对不起，如果标题含糊不清 - 我不太确定如何措辞！

**我在做什么**

我正在运行一个 Linux 命令来将数据输出到变量中，解析数据并将其作为数组输出。数组值将显示在使用 PHP 的页面上，并且此 PHP 页面输出每 10 秒通过 AJAX 请求一次，因此实际上每 10 秒将检索和显示/更新数据。每个请求可能解析多达 10,000 个字符，尽管这通常要少得多。

**另类的想法**

我想知道是否有更好的*替代方法每 10 秒检索一次此数据，因为多个用户 (<10) 将自动为他们执行此命令。

在服务器上运行的 cronjob 可以执行 bash 或 php（哪个更快？）来获取数据并将其存储在 MySQL 数据库中。然后，对 PHP 输出的任何 AJAX 调用都将返回 MySQL 数据库中的值，而不是每 10 秒直接调用一次执行服务器代码。

**为什么？**

我知道直接从 PHP 运行 exec 存在安全问题，并且（我希望这不是微优化）我担心服务器上的 CPU 使用率。服务器正在运行一个*sempron*处理器。是的，它们仍然存在。

只有当用户在页面上时才执行（想法＃1）意味着服务器没有运行不需要运行的代码。但是，这是缓慢且不安全的吗？

以防万一 linux 命令的类型可能有助于确定它的效率：

`shell_exec("transmission-remote $host:$port --auth $username:$password -l");`

我希望我上面概述的两种方法在效率和安全级别上存在差异，这*不仅仅是*微优化。如果有更好的替代方法*，我很想了解这些！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:24:58.540

我认为单独的 cron 作业进行数据处理的想法是合理的。你是对的——直接从 PHP 脚本执行服务器命令并不是最安全的做事方式，通常应该避免。

但是，从性能的角度来看，您可能也不希望不断地访问 MySQL 数据库以获取数据，特别是如果它总是在变化和更新。我建议使用像 Memcache 这样的 key-val 存储系统，或者如果你没有太多可用的内存，那就是磁盘/内存存储的混合体。您的后台进程会定期更新密钥的值，然后您可以从主 Web 服务器进程访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:56:12.673

如果您打算每 10 秒为所有用户生成所需的所有信息，那么也许您应该：

*   将 PHP 用于您的 cron 作业
*   以要提供的格式生成所需的数据
*   将输出文件保存在您的 Web 文件夹层次结构中
*   让客户端将其作为静态文件检索

# python - 从父级实例化子级

> ID：13104401
> 
> 赞同：1
> 
> 时间：2012-10-27T21:36:41.187
> 
> 标签：python

是否可以在不专门传递子类名的情况下从父类实例化子类的实例？

在 PHP 中，我可以做类似的事情

```
$instance = new static; 
```

如何在 Python 中获得类似的结果？

```
class DatabaseObject:
    @classmethod
    def findByID(caller, ID):
        query='SELECT * FROM {} LIMIT 1'.format(caller.tableName)
        #dostuff
        return Instance(stuff) #return the instance of the class that called this method

class Question(DatabaseObject):
    tableName='questions'

class Answer(DatabaseObject):
    tableName='answers'

q = Question.findByID(5)
a = Answer.findByID(5) 
```

所以在这个例子中，我希望 findByID 方法返回的是 Question 类或 Answer 类的实例，具体取决于调用它的那个类。

还是这种方法太可怕了，不应该这样做？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:45:15.953

你不需要在 python 中为此做任何特别的事情。

```
class DatabaseObject:
    @classmethod
    def findByID(self, ID):
        # whatever
        return self()

class Question(DatabaseObject):
    tableName = 'questions'

class Answer(DatabaseObject):
    tableName = 'answers'

print Question.findByID(5) # <__main__.Question instance at 0x109b1d638>
print Answer.findByID(5) # <__main__.Answer instance at 0x109b1d638> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:39:47.780

由于提供给类方法的第一个参数将是类本身，因此您可以返回一个实例`cls(stuff)`：

```
class DatabaseObject:
    @classmethod
    def findByID(cls, ID):
        query='SELECT * FROM {} LIMIT 1'.format(caller.tableName)
        #dostuff
        return cls(stuff) #return the instance of the class that called this method 
```

如果您只有一个类方法`findByID`，那么当然只定义`Question.__init__`and会更直接`Answer.__init__`。但是，如果您还有其他类方法，例如`findByExam`,`findByCourse`等，那么我认为您将适当地使用类方法来为实例化提供其他途径。

# facebook - 我的朋友无法查看通过我的 Open Graph 应用程序发布的帖子，尽管我可以

> ID：13104403
> 
> 赞同：2
> 
> 时间：2012-10-27T21:36:47.440
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-opengraph

我一直在尝试将[Open Graph](http://developers.facebook.com/docs/opengraph/)集成到我的网站中。它基本上是一个 wordpress 博客。每个帖子都被视为一篇文章。

我创建了一个 Open Graph 应用程序，并使用了 Open Graph API，因此它会在用户阅读文章时发布阅读操作 (news.reads)。这要归功于 Facebook 的精彩教程中提供的说明。

我还添加了一个登录按钮，它要求以下权限：publish_actions、read_stream、publish_stream。

## 我遇到的第一个问题

当我作为开发人员使用自己的帐户时，一切正常。阅读操作已成功发布在我的时间轴上。但是，当我使用不同的 Facebook 帐户（我兄弟的）时，根本没有发布这些操作。我对两个帐户（publish_actions、read_stream、publish_stream）都允许相同的权限，那么为什么它对我的帐户有效，但对我兄弟的无效？

## 我遇到的第二个问题

我发现的另一个奇怪的行为是，当使用我兄弟的帐户查看我自己的时间线时，我无法看到之前发布的读取操作。从我的真实账户查看相同的时间线时，存在这些读取操作。这很奇怪，因为**它们都设置为公开帖子。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:40:30.383

这仅意味着您的[opengraph](/questions/tagged/opengraph "显示标记为“opengraph”的问题")操作未获批准。虽然您的操作未获批准，但它仅适用于管理员、开发人员和身份验证对话框预览用户。所以解决方案是提交您的操作以供批准，当它获得批准时，它将适用于所有用户，并且您的帖子将对所有人可见。

# wordpress - 将旧的 PHP-Nuke 页面链接重写为 wordpress 链接

> ID：13104404
> 
> 赞同：1
> 
> 时间：2012-10-27T21:37:03.043
> 
> 标签：wordpress, redirect, url-rewriting

在过去 6 年多的时间里，我一直在使用一个旧的 PHP-Nuke 站点，我终于转换到了 Wordpress。可能有 100 多个旧链接发布在其他网站上，我需要重定向到新链接。

旧链接看起来像这样

```
http://www.mysite.com/modules.php?name=NDReviews&op=Story2&reid=387 
```

新链接如下所示

```
http://www.mysite.com/cooler-master-ceres-400-headphones/2/ 
```

每个旧链接更改的两项是 =Story# 和 reid=#

=Story# 现在需要指向新的 /#/

而旧的 reid=# 需要指向 /new-name-for-review/

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:47:31.130

我希望你知道如何编写一个简单的插件。这可能是开始播放的骨架：

```
add_action('init', 'flushRewriteRules');
function flushRewriteRules()
{
    global $wp_rewrite;
    $wp_rewrite->flush_rules();
}

add_filter('rewrite_rules_array', 'insertMyRewriteRules');
function insertMyRewriteRules($rules)
{
    $newrules = array();

    // convert:
    // http://www.mysite.com/modules.php?name=NDReviews&op=Story2&reid=387
    // to:
    // http://www.mysite.com/NDReviews/2/

    $newrules['modules.php?name=([^&]*)&op=Story(\d+)&reid=(\d+)'] = 'index.php?pagename=$matches[1]&p=$matches[2]';

    // or maybe just redirecting Story# to p=# (post id)

    // convert:
    // http://www.mysite.com/modules.php?name=NDReviews&op=Story2&reid=387
    // to:
    // http://www.mysite.com/cooler-master-ceres-400-headphones/2/

    $newrules['modules.php?name=([^&]*)&op=Story(\d+)&reid=(\d+)'] = 'index.php?&p=$matches[2]';

    return $newrules + $rules;
} 
```

* * *

只是一个尝试可能的解决方案的想法。无论如何是完全可以实现的。

# java - 你如何在java中增加十六进制但也保持填充？

> ID：13104405
> 
> 赞同：0
> 
> 时间：2012-10-27T21:37:07.987
> 
> 标签：java, hex

你如何在java中增加一个十六进制值并同时保持填充？

如果你看这个：

[有没有像这个网站一样进行 AES 加密的示例 Java 代码？](https://stackoverflow.com/questions/13102788/is-there-any-sample-java-code-that-does-aes-encryption-exactly-like-this-website)

您会在正确答案中看到一个名为“keyHex”的变量，它表示十六进制，但采用字符串格式，并用一堆零填充。

然后我想将“keyHex”增加 1 并将其更改为：

```
"00000000000000000000000000000000" 
```

到

```
"00000000000000000000000000000001" 
```

我想继续循环并添加 1 直到达到：

```
"00000000000000000000000000FFFFFF" 
```

由于显而易见的原因，我不能做“keyHex++”，所以如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:46:09.673

那么你应该跟踪的是 keyHex 的整数值，然后像这样简单地输出它：

```
String.format("%033x", keyHex); 
```

如果需要，您也可以先将 keyHex 解析为整数。此链接可能对此更有帮助：[Java - parse and unsigned hex string into a signed long](https://stackoverflow.com/questions/5723579/java-parse-and-unsigned-hex-string-into-a-signed-long)

# mysql - 使用时间戳和条件查询当前日期的Mysql？

> ID：13104406
> 
> 赞同：0
> 
> 时间：2012-10-27T21:37:11.563
> 
> 标签：mysql

我可以编写一个带有条件和当前日期的 mysql 查询，例如使用不同的时间戳吗？例如，当我有一个事件和一个间隔，并且我想要相同的查询，但 order by 或 group by 略有不同时。基本上我正在寻找一个函数，它及时返回略有不同的结果。一个例子是一个图，其中我有概率，然后我有一个介于 0 和 1 之间的随机数生成器，我循环遍历每条边以选择正确的边。

```
 x = random([0.0, 1.0])
    for i in 0..n
    if x < probabilities[i]
       choose(i)
       break
     else
        x -= probabilities[i]
     end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:44:02.887

不确定我是否理解正确，但`UNIX_TIMESTAMP()`会及时返回略有不同的结果:)

# javascript - 如何在 JSDoc 中指定 promise 的解析和拒绝类型？

> ID：13104411
> 
> 赞同：92
> 
> 时间：2012-10-27T21:37:47.237
> 
> 标签：javascript, node.js, documentation, jsdoc, promise

我有一些返回promise 对象的代码，例如使用NodeJS 的[Q](https://github.com/kriskowal/q)库。

```
var Q = require('q');

/**
 * @returns ???
 */
function task(err) {
    return err? Q.reject(new Error('Some error')) : Q.resolve('Some result');
} 
```

如何使用 JSDoc 记录这样的返回值？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-02-11T22:55:03.637

即使它们在 Javascript 中不存在，我发现 JSdoc 理解“泛型类型”。

因此，您可以定义自定义类型，然后使用`/* @return Promise<MyType> */`. 以下结果生成了一个不错的*TokenConsume(token) → {Promise.<Token>}*，其中包含指向文档中您的自定义`Token`类型的链接。

```
/**
 * @typedef Token
 * @property {bool} valid True if the token is valid.
 * @property {string} id The user id bound to the token.
 */

/**
 * Consume a token
 * @param  {string} token [description]
 * @return {Promise<Token>} A promise to the token.
 */
TokenConsume = function (string) {
  // bla bla
} 
```

它甚至可以与`/* @return Promise<MyType|Error> */`or一起使用`/* @return Promise<MyType, Error> */`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-20T11:02:14.890

我倾向于为 promise 定义一个外部类型：

```
/**
* A promise object provided by the q promise library.
* @external Promise
* @see {@link https://github.com/kriskowal/q/wiki/API-Reference}
*/ 
```

现在您可以在`@return`函数文档的声明中描述 Promise 会发生什么：

```
/**
* @return {external:Promise}  On success the promise will be resolved with 
* "some result".<br>
* On error the promise will be rejected with an {@link Error}.
*/
function task(err) {
    return err? Q.reject(new Error('Some error')) : Q.resolve('Some result');
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-13T15:27:02.767

Jsdoc3 目前支持的语法：

```
/**
 * Retrieve the user's favorite color.
 *
 * @returns {Promise<string>} A promise that contains the user's favorite color
 * when fulfilled.
 */
User.prototype.getFavoriteColor = function() {
     // ...
}; 
```

以后支持吗？

```
/**
 * A promise for the user's favorite color.
 *
 * @promise FavoriteColorPromise
 * @fulfill {string} The user's favorite color.
 * @reject {TypeError} The user's favorite color is an invalid type.
 * @reject {MissingColorError} The user has not specified a favorite color.
 */

/**
 * Retrieve the user's favorite color.
 *
 * @returns {FavoriteColorPromise} A promise for the user's favorite color.
 */
User.prototype.getFavoriteColor = function() {
    // ...
}; 
```

请参阅 github 讨论：[https ://github.com/jsdoc3/jsdoc/issues/1197](https://github.com/jsdoc3/jsdoc/issues/1197)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-25T19:39:02.223

使用 JSDoc，您还可以使用`@typedef`. 我经常使用它，因此作为字符串或数组的 props/params 链接到类型的描述（例如，`string`我创建了一个 typedef，其中包括可用于字符串的原生对象（请参阅下面的示例 JSDoc）。您可以定义自定义类型以同样的方式。这是因为您不能像 @property 那样使用对象点表示法来表示返回值。因此，如果您要返回对象之类的东西，则可以创建一个定义对于该类型 (' `@typedef MyObject`)，然后`@returns {myObject} Definition of myObject`.

不过，我不会为此发疯，因为类型应该尽可能字面化，并且您不想污染您的类型，但是在某些情况下您想显式定义类型，因此您可以记录什么是在其中（一个很好的例子是 Modernizr ......它返回一个对象，但是您没有它的文档，因此创建一个自定义 typedef 来详细说明该返回中的内容）。

如果您不需要走那条路，那么正如已经提到的那样，您可以使用管道为任何@param、@property 或@return 指定多种类型`|`。

在您的情况下，您还应该记录 an`@throws`因为您正在抛出一个`new error`：`* @throws {error}`当属性 err 未定义或不可用时抛出一个真正的新错误事件。

```
//saved in a file named typedefs.jsdoc, that is in your jsdoc crawl path
/**
    * @typedef string
    * @author me
    * @description A string literal takes form in a sequence of any valid characters. The `string` type is not the same as `string object`.
    * @property {number} length The length of the string
    * @property {number} indexOf The occurence (number of characters in from the start of the string) where a specifc character occurs
    * @property {number} lastIndexOf The last occurence (number of characters in from the end of the string) where a specifc character occurs
    * @property {string|number} charAt Gives the character that occurs in a specific part of the string
    * @property {array} split Allows a string to be split on characters, such as `myString.split(' ')` will split the string into an array on blank spaces
    * @property {string} toLowerCase Transfer a string to be all lower case
    * @property {string} toUpperCase Transfer a string to be all upper case
    * @property {string} substring Used to take a part of a string from a given range, such as `myString.substring(0,5)` will return the first 6 characters
    * @property {string} substr Simialr to `substring`, `substr` uses a starting point, and then the number of characters to continue the range. `mystring.substr(2,8)` will return the characters starting at character 2 and conitnuing on for 8 more characters
    * @example var myString = 'this is my string, there are many like it but this one is HOT!';
    * @example
    //This example uses the string object to create a string...this is almost never needed
    myString = new String('my string');
    myEasierString = 'my string';//exactly the same as what the line above is doing
*/ 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-23T16:56:53.877

还有另一种方法可以做到这一点，即使它*可能*是**DEPRECATED**。强调**可能**，因为[有人](https://stackoverflow.com/a/14854851/828366)说它已被弃用（检查该答案的评论），而[其他人](https://github.com/jsdoc3/jsdoc/issues/1375)说任何一个都可以。为了完整起见，我无论如何都要报告它。

现在，以`Promise.all()`它返回一个用数组实现的 Promise 为例。使用点符号样式，它看起来如下所示：

```
{Promise.<Array.<*>>} 
```

它适用于 JetBrains 产品（例如 PhpStorm、WebStorm），它也用于[jsforce 文档](https://jsforce.github.io/jsforce/doc/Promise.html)。

在撰写本文时，当我尝试使用*PHPStorm*自动生成一些文档时，它默认为这种样式，即使我发现对它的引用很差。

无论如何，如果您以以下功能为例：

```
// NOTE: async functions always return a Promise
const test = async () => { 
    let array1 = [], array2 = [];

    return {array1, array2};
}; 
```

当我让*PhpStorm*生成文档时，我得到了这个：

```
/**
 * @returns {Promise.<{array1: Array, array2: Array}>}
 */
const test = async () => {
    let array1 = [], array2 = [];

    return {array1, array2};
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-29T21:18:11.270

这是我喜欢做的事情（可能有点过头了）：

```
/**
 * @external Promise
 * @see {@link http://api.jquery.com/Types/#Promise Promise}
 */

/**
 * This callback is called when the result is loaded.
 *
 * @callback SuccessCallback
 * @param {string} result - The result is loaded.
 */

/**
 * This callback is called when the result fails to load.
 *
 * @callback ErrorCallback
 * @param {Error} error - The error that occurred while loading the result.
 */

/**
 * Resolves with a {@link SuccessCallback}, fails with a {@link ErrorCallback}
 *
 * @typedef {external:Promise} LoadResultPromise
 */

/**
 * Loads the result
 *
 * @returns {LoadResultPromise} The promise that the result will load.
 */
function loadResult() {
    // do something
    return promise;
} 
```

基本上，使用指向某些文档的链接定义基本承诺（在这种情况下，我链接到 jQuery 的），定义当承诺解决或失败时将调用的回调，然后定义链接回的特定承诺回调文档。

最后，使用您的特定承诺类型作为返回类型。

# python - 比较 plist 键

> ID：13104416
> 
> 赞同：1
> 
> 时间：2012-10-27T21:38:16.477
> 
> 标签：python, perl, shell

我正在尝试添加关于 API 的健全性检查，这往往会很快地改变其结构，因此我正在考虑添加一个例行检查，它将 json 响应存储在带有日期+时间的 plist 文件中，因此相对于到关键结构，与前一个日期比较，看看是否有任何变化。是否已经编写了任何 python、shell 或 perl 脚本来执行此操作？我不想重新发明轮子，所以认为有人可能已经这样做了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:47:04.100

[快速的 CPAN 搜索](https://metacpan.org/search?q=plist)显示了几个用于操作 plist 的模块：[Data::Plist](https://metacpan.org/module/Data%3a%3aPlist)和[Mac::Tie::PList](https://metacpan.org/module/Mac%3a%3aTie%3a%3aPList)。我不知道他们的质量。

Data::Plist 将 plist 文件视为任何其他 XML 文件。Mac::Tie::PList 使用可能更准确的原生 Objective C 接口，但它的 Perl 接口 Foundation/PerlObjCBridge 只能从 OS X 附带的 perl 中获得。

# visual-studio-2010 - 使用 C++ 我需要将选择排序更改为插入排序

> ID：13104418
> 
> 赞同：-2
> 
> 时间：2012-10-27T21:38:17.220
> 
> 标签：visual-studio-2010, c++-cli, insertion-sort

我有一个程序，我必须在其中使用 Visual Studio 2010 将选择排序更改为 C++ 程序中的插入排序。以下代码是我显示选择排序的内容：

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
             {
                 int data[] = {5,6,7,1,2,4,7,8,9,11,12,13,0,7,8,5,3,2,6,8};
                 if (button1->Text == "Start") 
                 {
                     panel1->Visible = true;
                     button1->Text = "Sort";
                     messageLabel->Text="Unsorted Array";
                     DrawArray(data, 20);
                 }
                 else
                 {
                     if(ascButton->Checked )
                     {
                         selectionSort(data,20,1);
                         messageLabel->Text="Sorted Array - Ascending";
                     }
                     else
                     {
                         selectionSort(data,20,2);
                         messageLabel->Text="Sorted Array - Descending";
                     }
                     DrawArray(data, 20);
                 }
             }

    private: System::Void selectionSort(int array[], int n,int ascending)
             {
                 int temp,index; // temporary variable used for swapping and index
                 int i, j;
                 for (i = 0; i < n-1; i++)
                 {
                     index = i;
                     for (j = i+1; j < n; j++)
                     {
                        if(ascending==1)
                        {
                            if (array[j] < array[index])
                            {
                                 index = j;
                            }
                        }
                        else
                        {
                            if (array[j] > array[index])
                            {
                                 index = j;
                            }
                        }
                     }
                    if (index != i) 
                    {
                          temp = array[i];
                          array[i] = array[index];
                          array[index] = temp;
                    }
                 } // end for

             } // end method selectionSort 
```

我实施了以下更改，程序运行没有任何错误，但数据看起来不像正在排序。以下是更新后的代码：

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
             {
                 int data[] = {5,6,7,1,2,4,7,8,9,11,12,13,0,7,8,5,3,2,6,8};
                 if (button1->Text == "Start") 
                 {
                     panel1->Visible = true;
                     button1->Text = "Sort";
                     messageLabel->Text="Unsorted Array";
                     DrawArray(data, 20);
                 }
                 else
                 {
                     if(ascButton->Checked )
                     {
                        insertionSort(data,20,1);
                         messageLabel->Text="Sorted Array - Ascending";
                     }
                     else
                     {
                         insertionSort(data,20,2);
                         messageLabel->Text="Sorted Array - Descending";
                     }
                     DrawArray(data, 20);
                 }
             }

    private: System::Void insertionSort(int array[], int n,int ascending)
             {
                 int data[]= {5,6,7,1,2,4,7,8,9,11,12,13,0,7,8,5,3,2,6,8};
                 int vacant; // Position of last vacated element
                 int temp; // Temporary copy of unsorted value
                 int i;
                 for (i=0; i < n-1; i++)
                 {
                     temp = data[i+1]; // Copy first unsorted value
                     for (vacant = i+1; 
                         ((vacant > 0) && (data[vacant-1] > temp));
                         vacant--)
                     {
                         data[vacant] = data[vacant-1]; // Shift data up
                     } // End inner loop
                 data[vacant] = temp; // Insert value into vacated element
                 } // End outer loop
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:25:19.183

应更改以下代码：

```
if(ascButton->Checked )
{
    //selectionSort(data,20,1);
    insertionSort(data, 20, 1);
    messageLabel->Text="Sorted Array - Ascending";
}
else
{
    //selectionSort(data,20,2);
    insertionSort(data, 20, 1);
    messageLabel->Text="Sorted Array - Descending";
} 
```

还要声明一个 private:`System::Void insertionSort(int array[], int n,int ascending)`就像`System::Void selectionSort(int array[], int n,int ascending)`在那里填写你的插入排序代码一样。

# ruby - TweetStream.track 多个关键字一次

> ID：13104419
> 
> 赞同：0
> 
> 时间：2012-10-27T21:38:25.973
> 
> 标签：ruby, twitter, tweetstream

我正在使用`TweetStream gem`ruby​​，想知道是否有使用方法

```
TweetStream::Client.new.track('key1', 'key2') 
```

并跟踪仅包含**两个关键字**的推文？正常使用跟踪其中**任何一个**的推文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:26:35.040

根据[Twitter Stream Api docs](https://dev.twitter.com/docs/streaming-apis/parameters#track)，您必须发送一个搜索短语（您的 2 个术语，以空格分隔）：

```
TweetStream::Client.new.track('key1 key2') 
```

# android - 安卓 SDK 配置

> ID：13104421
> 
> 赞同：1
> 
> 时间：2012-10-27T21:38:37.563
> 
> 标签：android, eclipse, sdk

我为 Android 制作了一个功能性应用程序，但是当我将源文件复制到新电脑并安装 SDK+Eclipse+ADT 后，我试图打开我的工作区（在以前的电脑上工作）我收到一个错误：

> “无法解析目标‘摩托罗拉移动公司：ICS_R1:15’”

我的`main.java`文件中还显示了三个错误：

*   `android.os.Bundle`无法解析类型。它是从所需的 .class 文件中间接引用的
*   导入`android.content.Intent`无法解决
*   `android.app.Activity`无法解析类型。它是从所需的 .class 文件中间接引用的

有谁知道如何解决这个问题？

# mysql - 连接表但不显示符合 where 子句的行

> ID：13104425
> 
> 赞同：0
> 
> 时间：2012-10-27T21:39:19.003
> 
> 标签：mysql, join, between

我正在加入 mysql 中的表，但我有一张这样保存日期的表：

```
table: cutoff

      date       roomid  
---------------------------  
    2012-11-03     25
    2012-11-04     25
    2012-11-05     25
    2012-11-06     25 
```

这是我的 SQL 查询：

```
SELECT t.RoomId, t.USD, t.MXN, i.Image, a.RoomName, a.RoomDesc, cu.date FROM Tarifas AS t 
INNER JOIN Images AS i ON i.RoomId = t.RoomId
INNER JOIN Availability AS a ON a.RoomId = t.RoomId 
INNER JOIN cutoff AS cu ON cu.roomid = t.RoomId AND cu.date NOT BETWEEN '$from' and '$to' 
WHERE t.Start <= '$from' AND t.End >= '$from' ORDER BY USD 
```

我想获取日期不在截止表中的所有行。但它给了我相反的东西！我不知道该怎么做，这里的任何帮助将不胜感激！

EIDT 添加关税表：

```
table: tarifas
RoomId      Start         End       USD       MXN
---------------------------------------------------
25        2012-11-01   2012-11-20   60.00    620.00
26        2012-11-01   2012-11-20   80.00    820.00
27        2012-11-01   2012-11-20   55.00    570.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:53:24.040

试试这个（编辑）：

```
SELECT t.RoomId, t.USD, t.MXN, i.Image, a.RoomName, a.RoomDesc
FROM Tarifas AS t 
INNER JOIN Images AS i ON i.RoomId = t.RoomId
INNER JOIN Availability AS a ON a.RoomId = t.RoomId 
WHERE t.RoomID NOT IN
    (SELECT DISTINCT roomid FROM cutoff
    WHERE date BETWEEN '$from' AND '$to')
AND t.Start <= '$from' AND t.End >= '$from'
ORDER BY USD 
```

# java - Java 客户端服务器安全通信

> ID：13104426
> 
> 赞同：1
> 
> 时间：2012-10-27T21:39:30.520
> 
> 标签：java, sockets, encryption, client-server

> **可能重复：**
> [java中的网络通信加密](https://stackoverflow.com/questions/3510706/network-communication-encryption-in-java)

我正在设计一个客户端服务器应用程序。我希望对整个会话进行加密。我正在考虑以下方法（使用 RSA 进行公钥加密，使用 AES-128 进行对称加密）：

客户端连接到服务器并发送“hello”消息。服务器用它的公钥响应。客户端生成一个 128 位的 AES 密钥，并使用服务器的公钥加密发送。应用程序协议的其余部分使用 AES 密钥进行加密。

这个逻辑可以吗？有什么缺陷吗？会好还是使用 SSL 更好？基本上我关心的是重放攻击和中间人攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:51:59.107

您所做的是描述 SSL 的基本思想，并且由于实施该方案可能会犯许多小错误，因此使用 SSL 会好得多。

正如您所描述的那样，您的方案将有缺陷，因为您没有任何方法来验证服务器的公钥。任何人都可以发送它。此外，您如何知道加密的 AES 密钥实际上是由客户端生成的？任何人都可以拦截公钥。这就是 SSL（或现在的 TLS）使用信任库和 Diffie-Hellman 以及其他技巧的原因。

如果您不想购买，您可以使用自签名证书，您可以在某些带外程序（例如与客户端应用程序一起分发）中信任该证书。

# php - 使用来自一个表单域的输入来填写另一个

> ID：13104428
> 
> 赞同：0
> 
> 时间：2012-10-27T21:39:52.163
> 
> 标签：php, jquery, forms

我有一个带有几个文本框的表单。

第一个输入框是“企业名称”。还有几个包含各种信息的框，最后一个框是“URL”，我在其中输入我希望该企业在我的数据库中拥有的 url。我希望它采用标题输入框的值，而不是手动输入此 url，并将空格替换为“-”并将其全部设为小写。我还想为网址添加前缀。

因此，如果我输入“Bobs Hotel”，那么一旦我输入完 URL 框，就会预先填充“business/bobs-hotel”。如果我输入“Mikes Hot Dogs”，它将是“business/mikes-hot-dogs”等，然后我就可以提交表格了。

编辑：我忘记了一个重要的细节：“商业”这个词实际上不会被使用。要使用的词来自下拉选择框。此框有 3-4 个*选项名称*（不是值）、“酒店”、“餐厅”等。因此，如果您从下拉列表中选择“酒店”，则 URL 将为“酒店/酒店名称”

一件重要的事情是，尽管您从下拉列表中选择了“酒店”，但酒店的*值*是一个数字，例如 5 或其他任何值（因为它对应于数据库中的类别 ID）

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:45:36.757

使用 jQuery 试试这个

​</p>

```
Business Name : <input type="text" id="business" name="bussiness"​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ /></br>

<label class="url" ></label>

$(function() {

    $('#business').on('change', function() {

        var val = $(this).val().replace(' ', '-').toLowerCase();;
        $('.url').text(this.id + '/' + val)
    });
});​ 
```

**[检查演示](http://jsfiddle.net/sushanth009/j8jWX/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:45:52.183

鉴于您的输入具有 id`name`和`url`，您可以使用 jQuery 执行以下操作：

```
$("#name").on("focusout", function () {
    var business = $("#business").val();
   $("#url").val(business + "/" + $(this).val().toLowerCase().replace(" ", "-"));
}); 
```

**[演示](http://jsfiddle.net/UYfa7/2/)**

**更新：**

更新了示例以从下拉列表中获取业务值。请参阅更新的演示。

**更新 2：**

要获取所选选项的内容而不是值，您可以这样做：

```
$("#name").on("focusout", function () {
    var business = $("option:selected", "#business").text();
   $("#url").val(business + "/" + $(this).val().toLowerCase().replace(" ", "-"));
}); 
```

现在我们在 id 的元素中获取选定的选项元素，并使用该方法`business`读取其内容。`.text()`

**[演示](http://jsfiddle.net/UYfa7/3/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T21:45:19.560

快速`replace`使用正则表达式并`toLowerCase`会处理这个问题。

```
var business_name = $('#business-name').value;
var dashified = business_name.trim().replace(/\s/g,'-').toLowerCase();
var url = 'business/' + dashified;
$('#url-field').value(url); 
```

的第一个参数`replace`可以是正则表达式。这个会找到所有的空白。第二个参数是您要替换的参数，在本例中为破折号。

# eclipse - 验证 Eclipse 的未签名插件

> ID：13104429
> 
> 赞同：5
> 
> 时间：2012-10-27T21:39:54.363
> 
> 标签：eclipse, eclipse-plugin

当我通过 Eclipse 市场安装插件时，总是会显示警告。有没有办法验证插件？除了下载它并使用可能提供的 (MD5/SHA-1) 校验和进行验证

![Eclipse插件未签名警告](../Images/9c856ad3517237139d34b6ad8f660c40.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T05:03:52.123

此验证错误与插件内容无关，而仅与创建者的身份有关。类似于您的浏览器使用证书验证您的银行网站，Eclipse 使用证书验证插件作者。但是大多数插件开发人员不会签署他们的插件。

您可以通过向eclipse.ini[添加一个附加参数](http://aniszczyk.org/2010/05/20/p2-and-the-unsigned-dialog-prompt/)来消除该警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:05:54.940

您无法验证插件。这是插件提供者必须做的事情。我没有听说过未签名插件有任何问题，但假设我想要一个经过验证/签名的插件，如果我要使用它访问我的银行账户。

# ruby-on-rails - 使用 elasticsearch 的 Array 字段应该使用什么索引标记器？

> ID：13104433
> 
> 赞同：1
> 
> 时间：2012-10-27T21:40:27.940
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有一个在创建对象时生成`keyword`的类型字段。`Array`我应该使用什么标记器进行索引？我在 elasticsearch.org 上找不到信息。

关键字值（数组）： `['george', 'apple', 'eats', 'new', 'york']`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:53:46.813

这一切都取决于您的数据以及您想用它做什么。例如，一个关键字可以由多个单词组成吗？如果是这样，您是否希望在搜索时匹配单个单词？另外，您是否希望它区分大小写？

如果您只想精确匹配，区分大小写，您甚至不需要分析该字段，您可以像`index: not_analyzed`在映射中一样配置它。

如果您不希望它区分大小写，您可以对其进行分析并使用不进行标记化的[关键字标记器和](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-tokenizer.html)[小写标记过滤器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/lowercase-tokenfilter.html)。

如果关键字可以由多个单词组成，并且您希望每个单词都匹配，则需要对其进行标记，例如使用[空格标记](http://www.elasticsearch.org/guide/reference/index-modules/analysis/whitespace-tokenizer.html)器甚至默认的[标准分析器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-analyzer.html)。

# html - 目的是 什么？

> ID：13104437
> 
> 赞同：7
> 
> 时间：2012-10-27T21:40:49.737
> 
> 标签：html, xhtml, tags, meta

这个 html 元标记的目的是什么？

```
<meta name="directory" content="submission"> 
```

我在这个[列表中](http://code.lancepollard.com/complete-list-of-html-meta-tags)找到了它，但没有任何解释。
谷歌也没有帮助

我的猜测：

1.  与网站文件的目录布局有关
2.  网站可能托管/开发的目录列表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T11:35:17.747

许多元数据起源于它们被视为 SEO 银弹的时候。他们明显的滥用导致很多人被软件忽略了。尤其是这种看起来像自定义元的东西。该列表中有一些已被使用，现在肯定已被弃用（如`<meta name="language" content="ES">`）。

元数据在浏览器解析方面可能没有特别的用途，但包含可能仍然有意义（`<meta name="author" content="name, email@hotmail.com">`这是一个很好的例子，但即使这已经被human.txt 所取代）。

看到这个元显然是晦涩难懂的，你可以假设软件一般不会对它做任何事情。由于它也没有任何明显的含义，所以我会四肢走出来说这毫无意义。

# android - 何时保存文档

> ID：13104439
> 
> 赞同：1
> 
> 时间：2012-10-27T21:41:20.400
> 
> 标签：android, save, android-activity

我正在制作一个简单的应用程序，其中有一个用户可以编辑文档的活动。我不想包含特定的保存按钮。

我应该将文档保存在哪里？我查看了文档，但从未为 android 开发过，我发现它有点令人困惑：我应该使用`onUserLeaveHint`吗？或者是其他东西？

基本上，我正在寻找一个可以覆盖的函数，该函数会在每次适合保存文档时调用，即当用户完成编辑并因此关闭活动时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:48:28.877

我可能会覆盖您的活动`onPause()`方法并保存在那里。这样，无论何时用户出于任何原因离开 Activity，它都会被保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:08:38.533

你真的应该提供一个保存按钮，因为：

1.  您可以验证输入并向用户显示错误消息（如果可能，最好在用户键入时提供实时检查，并显示错误消息以及直观地禁用保存按钮）

2.  您可以触发操作以响应成功保存（更新拇指、预览、数据库）

3.  **用户期待它**。我知道这可能听起来很傻，但每个人都习惯了“保存”和“取消”按钮。如果你不提供它们，用户会在最后按下返回按钮之前环顾四周，仍然不确定他是否真的保存了内容。这是最重要的一点（例如，WP7 中的“Note”应用程序不提供保存按钮，只需按返回键即可保存笔记：我从来没有发现这种行为一致且舒适，而且我从来没有习惯了）

否则，具体的钩子取决于您的实现细节（它甚至可能不存在）。如果您只使用 Activity，只需 override `onPause()`，保证每次 Activity 离开前台时都会调用它。如果您使用 Fragments，仍然覆盖`onPause()`. 如果您使用自定义机制仅切换小部件，那么您必须连接到您的系统。

# css - CSS2 与预期不匹配

> ID：13104443
> 
> 赞同：0
> 
> 时间：2012-10-27T21:41:40.040
> 
> 标签：css

我有一个CSS规则。它的工作是将我的站点模板的左列放在正确的位置。我正在尝试优化我的 CSS。

```
* html #left { left:220px } 
```

我希望下面的 css 可以正常工作......它在 Chrome 或 IE9 中没有

```
#left {left:220px} 
```

但是，如下明确定义整个路径......可以正常工作。

```
html body div div #left 
```

## 页面上仅使用 CSS。在 Chrome 检查器中验证。

```
html {
margin-left:auto;
margin-right:auto;
font-size:80%;
width:100%;
}

.ie7 {
font-size:80%;
width:100%;
}

.ie8 {
font-size:80%;
width:100%;
}

.ie9 {
font-size:80%;
width:100%;
}

body 
{
position:relative;
text-align:center;
font: .95em "Arial","Helvetica","Trebuchet MS","Verdana","Times New Roman","Sans-Serif"; 
min-width:960px;
max-width:960px;
margin: 0px auto auto auto;
padding:0px 10px;
}

        #header
        {
            text-align:left;
        }

        #container {
            padding-left: 220px;      /* LC width */
            padding-right: 30px;     /* RC width */
            overflow: hidden;
            min-height:100%;
            padding-bottom:300px; 
            background-color:White;
        }

        #container .column {
            position: relative;
            float: left;
            padding-bottom: 20010px;  /* X + padding-bottom */
            margin-bottom: -20000px;  /* X */           
        }

        #left {
            width: 200px;             /* LC width */
            padding:0 10px;
            right: 260px;             /* LC width */
            margin-left: -100%;

        }

    /*  #right {
            width: 200px;             
            padding:0px 10px;
            margin-right: -290px;               
        }
        */

                #center {
            width: 100%;
            background-color:#fff;
            padding: 10px 20px;         
        }

        #footer-wrapper
        {
            background-color:#fff;
        }

        #footer {
            clear: both;
            position: relative;
            background-color:#163748; 
            color:white;
            padding:0;
            text-align:center;
            /*border-top:1px solid #9fa8ac;*/
            height:150px; 
            padding-top:10px;                       
        }
        #footer p
        {
            text-align:center;
        }

#footer a
{
    color:White;

}

.clear
{
    clear: both;
}

#left 
{
    left:220px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:50:31.763

您要优化的 CSS 是这样的：

```
* html #left { left:220px } 
```

您遇到问题的原因是因为它实际上是一个 CSS hack，旨在与特定浏览器一起使用。

在符合标准的浏览器中， `html`DOM 中没有上面的元素，因此`* html`没有意义，不会选择任何内容。

但是在某些版本的 IE 中，这确实有效。因此，`* html`在选择器中使用是对您只想在这些版本的 IE 中工作的代码的 CSS hack。

根据记忆，这种特殊的黑客攻击只在 IE6 中有效，这意味着编写该代码的人试图通过绕过它来修复 IE6 中没有出现在其他浏览器中的问题。您可能会发现还有另一行将`left`属性设置为与其他浏览器不同的值。

显然，这不是您想要在 IE9 中运行的代码。

如果幸运的话，您不再需要支持 IE6，在这种情况下，您可以完全抛弃这个 hack。

如果运气不好，需要继续支持 IE6，那就保持代码不变。它没有伤害任何人。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:47:44.487

在没有看到实际代码的情况下，我的猜测是这是一个 CSS 特异性问题。

以下是有关该主题的几篇文章，您可能会发现它们很有启发性：

[http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# javascript - 如何在 Travis for PHP 环境中测试 Jasmine 测试？

> ID：13104445
> 
> 赞同：2
> 
> 时间：2012-10-27T21:42:04.817
> 
> 标签：javascript, jasmine, travis-ci

我有一个 PHP 项目，我也有 Jasmine JavaScript 测试。如何在 PHP 环境中运行 Jasmine 测试（因为我的服务器端代码在 PHP 中运行）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:53:33.657

我写了一个工具，[OpenPhantomScripts](https://github.com/mark-rushakoff/OpenPhantomScripts)，目的是让你在 Travis 上运行 Jasmine 测试变得非常容易。它只是用于 phantomjs，因此它仍应在您的 PHP Travis 环境中运行。

# javascript - JavaScript：确定图像类型

> ID：13104446
> 
> 赞同：1
> 
> 时间：2012-10-27T21:42:14.430
> 
> 标签：javascript

我有一张图片：

```
<img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQATogyQfWKBYKa-13DRJrXGruHezGarydPB-yDOw-rako27rV4">​ 
```

显示为：

![](../Images/25ab4de4d0ff101b4a69fdfae56929f9.png)​</p>

链接中的图像名称没有明显的扩展名。如何使用 JavaScript 来确定这是什么类型的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:58:24.567

您可以使用 jquery ajax 请求，例如

```
var request = $.ajax({
  type: "HEAD",
  url: "/image_url", 
  success: function(){ 
    var ct = request.getResponseHeader("content-type") || "";
    if (ct.indexOf('jpg') > -1) {
      alert('Jpg');
    } ..
  }

}); 
```

# android - Android Intent 发送数据

> ID：13104447
> 
> 赞同：0
> 
> 时间：2012-10-27T21:42:37.463
> 
> 标签：android

这是我的按钮点击监听器

```
 go.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            // Tab for Photos
            go();
            //photospec.setIndicator(url.getHost().replace("www."," ").replace(".com"," "));
        }
    }); 
```

这是我的 go() 方法

```
public void go(){
         photospec = tabHost.newTabSpec("");
            // setting Title and Icon for the Tab
        // Intent intent = new Intent(getBaseContext(), SignoutActivity.class);
        // intent.putExtra("EXTRA_SESSION_ID", sessionId);
         //startActivity(intent)
         URL url = null;
        try {
            url = new URL( text.getText().toString());
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        photospec.setIndicator(url.getHost().replace("www."," ").replace(".com"," "));
        photosIntent = new Intent(getBaseContext(),PhotosActivity.class);
        //photosIntent.setClass(this, PhotosActivity.class);
        photosIntent.putExtra("URL1", text.getText().toString());
        photospec.setContent(photosIntent);

            if(counter==0){

            tabHost.addTab(photospec);
            }
            counter++;

    } 
```

我在这个方法中有一个按钮单击方法我正在调用名称所在`go()`的函数

这种`go()`方法，我正在创建一个选项卡并且我有意图。在这个意图我发送一些

信息到另一个班级。

问题是当我第一次单击按钮时，我可以正常将数据发送到另一个类。但是，当我单击两次或更多次时，此意图不会将数据发送到其他类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:55:25.927

我认为问题是你问`counter==0`，然后增加那个计数器。下次代码`tabHost.addTab(photospec)`不会被调用，除非我在这里遗漏了一些东西。

这个怎么样：

```
public void go(){
    TabHost.TabSpec photospec = tabHost.newTabSpec("");
    URL url = null;
    try {
        url = new URL( text.getText().toString()); 
        photospec.setIndicator(url.getHost().replace("www."," ").replace(".com"," "));
        Intent photosIntent = new Intent(getBaseContext(),PhotosActivity.class);
        photosIntent.putExtra("URL1", text.getText().toString());
        photospec.setContent(photosIntent);
        tabHost.addTab(photospec);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }

} 
```

# facebook - Facebook 选项卡未显示在客户的浏览器上，但显示在其他任何地方

> ID：13104459
> 
> 赞同：0
> 
> 时间：2012-10-27T21:44:15.357
> 
> 标签：facebook, api

我有一个为客户创建的 Facebook 选项卡，它在我的端显示得很好。我还在 Adob​​e Browser Lab 中对其进行了测试，它在所有主要浏览器上都能正确显示。链接在这里：

[https://www.facebook.com/pages/Jamillah-David-Perfect-Combination/477059612333664?sk=app_425472224179980](https://www.facebook.com/pages/Jamillah-David-Perfect-Combination/477059612333664?sk=app_425472224179980)

当我的客户查看我为他们制作的页面时，他们没有得到任何内容输出。这是他们发给我的屏幕截图（没关系，他们突出显示了所有内容，您可以看到没有输出）：

![截屏](../Images/4058b5296e442d184862470524225878.png)

SSL 和非 SSL 版本都可以工作。沙盒模式被禁用。我不确定下一步是什么来解决这个问题。我让他们访问托管该选项卡的站点，该站点是：

[http://www.miller-media.com/sites/lambs/videos.html](http://www.miller-media.com/sites/lambs/videos.html)

这对他们来说很好，这对我来说很奇怪，所以它与 Facebook 显示它有关。

谢谢您的帮助！

## 编辑

客户端清除浏览器上的缓存，然后转到链接，当他们退出 Facebook 时，它显示正常。一旦他们重新登录，该选项卡就会停止为他们显示。我已经缩小了范围，因为他们的实际帐户能够查看标签（根据我收集的内容）是一个问题。是否有允许人们查看或不查看标签的设置？我似乎找不到他们。

## 编辑

好的，所以他们仍然无法查看该选项卡。他们给了我他们的登录信息，我进去并通过他们的帐户查看了我电脑上的 iFrame 应用程序，它显示正确。所以这不是他们帐户的问题，也不是缓存的问题。我已经让几个人检查了 iFrame，它工作正常（事实上，没有其他人遇到这个问题）。我构建的标签仍然存在此问题。我目前正在让他们检查他们正在使用的 Google Chrome 版本（我不知道这是否会影响它）。还有其他想法吗？

## 编辑

我刚刚从主管理菜单进入“编辑页面”，然后单击左侧的“应用程序”。我找到了有问题的应用程序并单击“链接到此选项卡”，然后我收到了这条消息“这条消息中的某些内容已被 Facebook 用户报告为滥用。” 这些标签上没有辱骂内容。有没有理由会发生这种情况？是故障吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:16:14.707

这很容易与这个（可能是临时的）错误有关：[https ://developers.facebook.com/bugs/514963005198830](https://developers.facebook.com/bugs/514963005198830)

如果您的客户使用“以身份登录`<page>`”功能，几乎可以肯定是由于该错误

否则：如果您的应用程序在客户端尝试加载它时实际上正在接收请求，您应该能够查看该请求是否有一些奇怪的地方，或者在 facebook 向您的服务器发出 POST 请求之前它是否失败

# c - 对生的和熟的终端模式感到困惑？

> ID：13104460
> 
> 赞同：9
> 
> 时间：2012-10-27T21:44:23.033
> 
> 标签：c, io, terminal

我目前有一个`chat client`可以与`a server`. 我应该修改行为，以便**在收到另一条聊天消息时提示向下移动**（即，通过打印`\b`擦除提示、打印消息，然后重新打印提示，将消息打印在提示“上方”）。

我们得到了一个`test client`and`test server`来测试这个功能，目前当用户有提示但没有输入任何内容时，他们可以接收来自其他用户的消息。当他们开始输入时，缓冲区不会刷新，直到他们输入整个消息并按 ENTER 键。

我应该复制这种行为，但*我对原始模式实际上是什么感到非常困惑。*

谁能告诉我如何通过原始模式控制输入/输出，或者为什么我上面描述的测试程序的行为是使用原始模式发生的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-27T22:05:02.470

默认情况下，Unix 风格的 tty（即控制台）驱动程序将在“cooked 模式”下接受输入。在这种模式下，它提供了一定数量的命令行编辑。用户可以输入一行输入，可能会删除并重新输入其中的一些（但这并不总是有效），并且程序在用户点击输入之前不会看到它。

这可能让人想起硬件终端通过串行线连接到计算机的时代。如果终端处理一些低级编辑，则计算机不必处理。它还免费为琐碎的 C 程序提供一些基本的输入编辑。

相反，**原始模式**将 TTY 驱动程序设置为在键入时将每个字符传递给程序。程序（在 Unixish 操作系统上）默认以熟模式启动，需要启用原始模式。

过去如何做到这一点在操作系统之间存在很大差异，尽管现在 POSIX 已经标准化了这些东西。在 Linux 上，您可以阅读文档的“termios”和“tty_ioctl”手册页。基本上，您会获得一个包含 tty 设置的数据结构，修改您关心的部分（特别是启用原始模式），然后将其传回。

另一种可能性是只使用 ncurses 库。它为您抽象出所有这些东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-27T22:04:26.220

在原始模式下，字符直接传递给您的程序。例如，当您在熟模式下键入终端时，您键入的字符会立即在屏幕上回显。在原始模式下，终端会忽略字符（即不回显），您的程序可以*选择*是否回显它。

编辑：维基百科有一篇关于熟模式的好文章。[http://en.wikipedia.com/wiki/Cooked_Mode](http://en.wikipedia.com/wiki/Cooked_Mode) 另外，请注意，在原始模式下，偶数和相似字符会直接传递给您的程序。

# c#-4.0 - 是否有用于在网络上浏览机器的 .net 类/命名空间

> ID：13104462
> 
> 赞同：2
> 
> 时间：2012-10-27T21:44:36.443
> 
> 标签：c#-4.0, system.diagnostics

我正在尝试编写一个 wpf 应用程序，它允许我浏览网络（AD 或工作组）上的服务器/计算机列表。

过去，我使用以下代码打开资源管理器类型窗口以进行文件夹或目录浏览

```
System.Diagnostics.Process.Start("Explorer.exe"); 
```

但在这种情况下，我不需要用户选择文件夹或文件，只需查看网络上机器的名称。

任何人都可以建议任何支持此类功能的 .net 类或命名空间吗？我对 WMI 做了一些粗略的阅读，看起来 System.Management 命名空间可能是要采取的路线。谁能给我一些建议，以缩小我可能想从这个命名空间查看哪些方法？

-干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:00:40.693

C#：你可以使用 Gong Solutions Shell Library

使用 System.Collections；使用 System.Collections.Generic；使用 GongSolutions.Shell；使用 GongSolutions.Shell.Interop；

```
public sealed class ShellNetworkComputers : IEnumerable<string>
{
    public IEnumerator<string> GetEnumerator()
    {
        ShellItem folder = new ShellItem((Environment.SpecialFolder)CSIDL.NETWORK);
        IEnumerator<ShellItem> e = folder.GetEnumerator(SHCONTF.FOLDERS);

        while (e.MoveNext())
        {
            Debug.Print(e.Current.ParsingName);
            yield return e.Current.ParsingName;
        }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

# c - 取模 N 的随机数的一致性

> ID：13104478
> 
> 赞同：18
> 
> 时间：2012-10-27T21:46:37.423
> 
> 标签：c, random, uniform

*在[0, n)*中选择随机数的一种常见方法是取`rand()`模*n* :的结果`rand() % n`。但是，即使可用实现返回的结果是完全一致的，当不被*n*整除时，结果*[0, n)*数字`rand()`的一致性是否应该存在问题？例如，假设是 2，*n*是 2。那么在 3 个可能的输出中：0、1 和 2，当我们使用它们模*n*时，我们分别得到 0、1 和 0 。因此，输出将根本不均匀。*`RAND_MAX + 1`*`RAND_MAX`*`rand()`***

 ***这在实践中是一个真正的问题吗？*在[0, n)*中均匀地从输出中选择随机数的更好方法是什么`rand()`，最好没有任何浮点运算？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T22:03:07.707

你是对的，`rand() % N`不是精确均匀分布的。确切地说，重要程度取决于您想要的数字范围和您想要的随机性程度，但是如果您想要足够的随机性以至于您甚至会关心它，那么您无论如何都不想使用它`rand()`。获取一个真正的随机数生成器。

也就是说，要获得真正的随机分布，请修改 2 的下一个幂并进行采样，直到获得所需范围内的一个（例如，对于 0-9，使用`while(n = rand()%0x10 > 10);`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-27T21:55:12.247

这取决于：

*   RAND_MAX 的值
*   你的 N 值

让我们假设您的 RAND_MAX 是 2^32。如果 N 相当小（假设为 2），则偏差为 1 / 2^31 - 或者太小而无法注意到。

但是如果 N 大很多，比如 2^20，那么偏差是 1 / 2^12，或者大约是 4096 中的 1。大很多，但仍然很小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T22:11:57.533

您可以采取的一种方法如下：

知道 的值`N`，就可以`R_MAX = ((RAND_MAX + 1) / N) * N;`实现一致性。

所以你可以做你的自定义`rand()`功能：

```
int custom_rand(int mod) {
    int x = rand();
    const int R_MAX = ((RAND_MAX + 1) / mod) * mod;    

    while (x > R_MAX) { // discard the result if it is bigger
        x = rand();
    }

    return (x % mod);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T22:42:06.533

将余数（% 不是 C 中的“模”运算符）用于缩小范围内的统一随机数有两个问题。首先是对较小的数字有轻微的偏差（如上所述），其次是典型的 PRNG 在低位比特中往往不太随机。我似乎记得 Knuth （计算机编程的艺术，第二卷，半数字算法）以及声称（在从 MIX 转换为 C 之后）rand()%2 是随机单个位的不良来源。最好选择 (rand() > RAND_MAX/2) （或测试高位，如果 RAND_MAX 接近 2 的幂。）

The remainder should be good enough casual use on small intervals. Avoid it for simulations. Actually, avoid rand() altogether for large simulations or "Monte Carlo" computations. Implementations tend to have a period on the order of 2^32 or less. It's not hard to exceed 4 billion trials on a 2+ GHz processor.***

# javascript - 如何将 dist.js 转换为 Json

> ID：13104481
> 
> 赞同：1
> 
> 时间：2012-10-27T21:47:11.850
> 
> 标签：javascript, json

这是我的 dist.js 文件：

```
var dist = [
    ['town1', [], []],
    ['town2', [271], ['10h30m']],
    ['town3', [93,178], ['3h26m','7h04m']],
    ['town4', [342,71,245], ['13h24m','2h30m','9h29m']],
    ... 
```

将其放入 json 的格式是什么？（跟小镇的距离和时间）请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:04:54.677

这可能是你想要的：

```
var dist = [[
    "town1", 
    [271],
    ['10h30m']
],[
    "town2",
    ...
]];
var output = JSON.stringify(dist);  //"ouptput" is containing
                                    //your array in JSON format 
```

演示：http: [//jsfiddle.net/DerekL/zddME/](http://jsfiddle.net/DerekL/zddME/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:07:48.830

JSON 中数组的语法是：`[ item, item, item ]`

您需要剥离`var dist =`并且可能是 traling `;`。

我不知道 Java，但在 JavaScript 中，这样做的代码类似于：

```
var json = 'var dist = [ .... ];'; // the file's contents

json = json.substring(11);
json = json.replace(/;\s+$/, ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T00:23:21.587

从您提供的上一个问题的链接来看，您似乎在您的 android 项目中包含了一个包含一些 JavaScript 的文件。此 JavaScript 包含您希望在 Java 中使用的信息（使用微调器）。

您在其他问题中的代码表明您已阅读 .js 文件并试图将其转换为 JSONArray。我想这会给你一个 JSON 异常。如果删除 'var dist = ' 和末尾的分号，文件将包含 JSON。您可以验证某些内容是有效的 JSON 作为 JSONLint.com

如果您实际上并未评估 JavaScript，我建议您将文件重命名为 .json 而不是 .js——这将有助于避免混淆。

# html - 为什么框架使用滚动条？

> ID：13104484
> 
> 赞同：0
> 
> 时间：2012-10-27T21:47:46.553
> 
> 标签：html, iframe, scrollbar

我有一个包含框架的网页。框架显示滚动条，为什么？

包含框架的文件的代码： [在此处输入链接描述](http://denis.dk/index.txt)

框架显示的文件代码： [在此处输入链接描述](http://denis.dk/startside.txt)

网页是[这个](http://denis.dk/)

问题：我想显示没有滚动条的整个页面，以便主页滚动然后你想看到框架的底部:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:55:27.503

显示`iframe`一个滚动条，因为它的内容垂直大于其默认高度。在 Chrome 中，默认高度似乎是 150 像素，但它可以是任何值。An`iframe`不会自动调整其内容的大小。

`iframe`我根本质疑使用 a 。它可能应该是主页的一部分；如果需要动态，请使用 AJAX 或在服务器端编写页面。

另请注意，`<center>`页面上多次使用的标签已被弃用。改用 CSS。

# java - 在 Eclipse 中打开 xml 文件时出现 java.lang.NullPointerException

> ID：13104490
> 
> 赞同：2
> 
> 时间：2012-10-27T21:49:41.017
> 
> 标签：java, android, xml

我刚刚在 Eclipse 中打开 .xml 文件时遇到了问题。每次我尝试这样做时，都会收到此错误：“发生错误。有关更多详细信息，请参阅错误日志。java.lang.NullPointerException”

我可以打开我的 AndroidManifest.xml，但不能打开其他任何一个。有任何想法吗？

编辑：

我想我知道我的问题来自哪里。我在我的应用程序中使用了 Aviary API，他们在他们的 SDK 中提供了一个测试应用程序，以了解如何正确实现 Aviary。

在我的应用和测试应用中，清单文件都包含相同的 android:authorities 标记。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:31:05.997

我想到了！只是弄乱了我的 androidManifest 中的一些属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-22T07:21:19.427

我遇到了同样的问题，只是将 SDK 版本从更高版本更改为更低版本，然后再改回其他更高的 api 版本，突然间它开始工作了。

不知道这些对你有没有帮助，但你可以试试。

# javascript - JavaScript 是否通过引用传递？

> ID：13104494
> 
> 赞同：448
> 
> 时间：2012-10-27T21:50:10.600
> 
> 标签：javascript, reference, pass-by-reference, pass-by-value

JavaScript 是通过引用传递还是通过值传递？

这是*[JavaScript: The Good Parts](https://en.wikipedia.org/wiki/Douglas_Crockford#Bibliography)*中的一个示例。`my`我对矩形函数的参数感到非常困惑。它实际上是`undefined`, 并在函数内部重新定义。没有原始参考。如果我从函数参数中删除它，内部区域函数将无法访问它。

是闭包吗？但是没有函数返回。

```
var shape = function (config) {
    var that = {};
    that.name = config.name || "";
    that.area = function () {
        return 0;
    };
    return that;
};

var rectangle = function (config, my) {
    my = my || {};
    my.l = config.length || 1;
    my.w = config.width || 1;
    var that = shape(config);
    that.area = function () {
        return my.l * my.w;
    };
    return that;
};

myShape = shape({
    name: "Unhnown"
});

myRec = rectangle({
    name: "Rectangle",
    length: 4,
    width: 6
});

console.log(myShape.name + " area is " + myShape.area() + " " + myRec.name + " area is " + myRec.area()); 
```

* * *

## 回答 #1

> 赞同：816
> 
> 时间：2012-10-27T21:51:24.643

基元通过值传递，对象通过“引用的副本”传递。

具体来说，当您传递一个对象（或数组）时，您（无形地）传递了对该对象的引用，并且可以修改该对象的*内容*，但是如果您尝试覆盖引用，则不会影响调用者持有的引用 - 即引用本身是按值传递的：

```
function replace(ref) {
    ref = {};           // this code does _not_ affect the object passed
}

function update(ref) {
    ref.key = 'newvalue';  // this code _does_ affect the _contents_ of the object
}

var a = { key: 'value' };
replace(a);  // a still has its original value - it's unmodfied
update(a);   // the _contents_ of 'a' are changed 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-10-27T21:55:52.213

可以这样想：

每当您在 ECMAscript 中创建一个*对象*时，该对象就会在一个神秘的*ECMAscript 通用位置*形成，任何人都无法获得。你得到的只是对这个神秘地方的那个对象的*引用。*

```
var obj = { }; 
```

Even`obj`只是对对象（位于那个特别美妙的地方）的引用，因此，您只能传递此*引用*。实际上，任何访问*obj*的代码都会修改很远很远的*对象。*

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2014-08-07T07:49:40.603

我的两分钱...... JavaScript是否通过引用或值传递参数无关紧要。真正重要的是分配与突变。

我在这个链接中写了一个更长、[更详细的解释](https://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language/25117245#25117245)。

当你传递任何东西（无论是对象还是原语）时，JavaScript 所做的只是在函数内部分配一个新变量……就像使用等号 ( `=`) 一样。

该参数在函数中的行为方式与您刚刚使用等号分配新变量时的行为方式完全相同......以这些简单的示例为例。

```
var myString = 'Test string 1';

// Assignment - A link to the same place as myString
var sameString = myString;

// If I change sameString, it will not modify myString,
// it just re-assigns it to a whole new string
sameString = 'New string';

console.log(myString); // Logs 'Test string 1';
console.log(sameString); // Logs 'New string';
```

如果我将`myString`作为参数传递给函数，它的行为就像我只是将它分配给一个新变量一样。现在，让我们做同样的事情，但使用函数而不是简单的赋值

```
function myFunc(sameString) {

  // Reassignment... Again, it will not modify myString
  sameString = 'New string';
}

var myString = 'Test string 1';

// This behaves the same as if we said sameString = myString
myFunc(myString);

console.log(myString); // Again, logs 'Test string 1';
```

将对象传递给函数时可以修改对象的唯一原因是因为您没有重新分配……相反，可以更改或变异对象……再次，它的工作方式相同。

```
var myObject = { name: 'Joe'; }

// Assignment - We simply link to the same object
var sameObject = myObject;

// This time, we can mutate it. So a change to myObject affects sameObject and visa versa
myObject.name = 'Jack';
console.log(sameObject.name); // Logs 'Jack'

sameObject.name = 'Jill';
console.log(myObject.name); // Logs 'Jill'

// If we re-assign it, the link is lost
sameObject = { name: 'Howard' };
console.log(myObject.name); // Logs 'Jill' 
```

如果我将`myObject`作为参数传递给函数，它的行为就像我只是将它分配给一个新变量一样。同样，具有完全相同的行为但具有功能的相同事物。

```
function myFunc(sameObject) {
  // We mutate the object, so the myObject gets the change too... just like before.
  sameObject.name = 'Jill';

  // But, if we re-assign it, the link is lost
  sameObject = {
    name: 'Howard'
  };
}

var myObject = {
  name: 'Joe'
};

// This behaves the same as if we said sameObject = myObject;
myFunc(myObject);
console.log(myObject.name); // Logs 'Jill'
```

每次将变量传递给函数时，您都在“分配”参数的名称，就像使用`=`等号一样。

永远记住，等号`=`意味着赋值。将参数传递给函数也意味着赋值。它们是相同的，并且两个变量以完全相同的方式连接。

修改变量影响不同变量的唯一时间是底层对象发生突变时。

区分对象和基元是没有意义的，因为它的工作方式与您没有函数并且只是使用等号分配给新变量的方式完全相同。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2016-07-22T19:05:25.660

函数参数通过值或共享传递，但在 JavaScript 中永远**不会**通过引用！

## 按值调用

原始类型按值传递：

```
var num = 123, str = "foo";

function f(num, str) {
  num += 1;
  str += "bar";
  console.log("inside of f:", num, str);
}

f(num, str);
console.log("outside of f:", num, str);
```

**函数范围内的重新分配**在周围范围内不可见。

这也适用于`String`s，它是一种复合数据类型，但不可变：

```
var str = "foo";

function f(str) {
  str[0] = "b"; // doesn't work, because strings are immutable
  console.log("inside of f:", str);
}

f(str);
console.log("outside of f:", str);
```

## 共享呼叫

对象，即所有非原始类型，通过共享传递。持有对对象的引用的变量实际上仅持有该引用的副本。如果 JavaScript 将采用*按引用调用的*评估策略，则该变量将保存原始引用。这是按共享和按引用之间的关键区别。

这种区别的实际后果是什么？

```
var o = {x: "foo"}, p = {y: 123};

function f(o, p) {
  o.x = "bar"; // Mutation
  p = {x: 456}; // Reassignment
  console.log("o inside of f:", o);
  console.log("p inside of f:", p);
}

f(o, p);

console.log("o outside of f:", o);
console.log("p outside of f:", p);
```

**变异**意味着修改现有的某些属性`Object`。变量绑定到的引用副本以及引用此对象的引用副本保持不变。因此，突变在调用者的范围内是可见的。

**重新分配**意味着替换绑定到变量的引用副本。由于它只是一个副本，因此持有相同引用副本的其他变量不受影响。因此，重新分配在调用者的范围内是不可见的，就像使用*引用调用*评估策略一样。

有关ECMAScript中[评估策略](http://dmitrysoshnikov.com/ecmascript/chapter-8-evaluation-strategy/#call-by-sharing)的更多信息。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2012-10-28T01:43:21.067

与 C 一样，最终，一切都是按值传递的。与 C 不同，您实际上不能备份和传递变量的位置，因为它没有指针，只有引用。

它的引用都是对象，而不是变量。有几种方法可以实现相同的结果，但它们必须手动完成，而不仅仅是在调用或声明站点添加关键字。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-03-08T08:48:30.900

JavaScript 是按值传递的。

对于原语，传递原语的值。对于对象，传递对象的引用“值”。

对象示例：

```
var f1 = function(inputObject){
    inputObject.a = 2;
}

var f2 = function(){
    var inputObject = {"a": 1};
    f1(inputObject);
    console.log(inputObject.a);
} 
```

调用 f2 会导致将“a”值打印为 2 而不是 1，因为传递了引用并且更新了引用中的“a”值。

原始示例：

```
var f1 = function(a){
    a = 2;
}
var f2 = function(){
    var a = 1;
    f1(a);
    console.log(a);
} 
```

调用 f2 会导致将“a”值打印为 1。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-08-22T19:12:25.960

为了创建一个使用 const 的简单示例...

```
const myRef = { foo: 'bar' };
const myVal = true;

function passes(r, v) {
  r.foo = 'baz';
  v = false;
}

passes(myRef, myVal);

console.log(myRef, myVal); // Object {foo: "baz"} true 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-11-22T19:39:28.250

实际上，[Alnitak 是正确的](https://stackoverflow.com/questions/13104494/does-javascript-pass-by-reference/13104500#13104500)并且易于理解，但最终在 JavaScript 中，一切都是按值传递的。

对象的“价值”是什么？它是对象引用。

当你传入一个对象时，你会得到这个值的副本（因此是 Alnitak 描述的“引用的副本”）。如果更改此值，则不会更改原始对象；您正在更改该参考的副本。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-24T21:49:18.057

“全局”JavaScript 变量是窗口对象的成员。您可以将引用作为窗口对象的成员来访问。

```
var v = "initialized";

function byref(ref) {
  window[ref] = "changed by ref";
}

byref((function(){for(r in window){if(window[r]===v){return(r);}}})());
// It could also be called like... byref('v');
console.log(v); // outputs changed by ref 
```

请注意，上面的示例不适用于在函数中声明的变量。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-03-09T17:46:53.403

如果没有纯粹主义，我认为在 JavaScript 中通过引用模拟标量参数的最佳方法是使用对象，就像之前的答案一样。

但是，我做的有点不同：

我已经在函数调用中进行了对象赋值，所以可以在函数调用附近看到引用参数。它增加了源代码的可读性。

在函数声明中，出于同样的原因，我将属性作为注释放置：可读性。

```
var r;

funcWithRefScalars(r = {amount:200, message:null} );
console.log(r.amount + " - " + r.message);

function funcWithRefScalars(o) {  // o(amount, message)
  o.amount  *= 1.2;
  o.message = "20% increase";
} 
```

在上面的例子中，`null`清楚地表明了一个输出参考参数。

出口：

```
240 - 20% Increase 
```

在客户端，`console.log`应替换为`alert`.

★★★</p>

另一种更具可读性的方法：

```
var amount, message;

funcWithRefScalars(amount = [200], message = [null] );
console.log(amount[0] + " - " + message[0]);

function funcWithRefScalars(amount, message) {  // o(amount, message)
   amount[0]  *= 1.2;
   message[0] = "20% increase";
} 
```

在这里，您甚至不需要像`r`上面那样创建新的虚拟名称。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-01-29T20:07:35.517

在人们试图证明这一点的示例中，我看不到**传递引用。**我只看到**pass-by-value**。

对于持有对对象的引用的变量，引用是这些变量的*值*，因此引用被传递，然后是**按值传递**。

在这样的声明中，

```
var a = {
  b: "foo",
  c: "bar"
}; 
```

'a' 的值不是对象，而是（到目前为止）对它的引用。换句话说，对象不在变量中`a`——对它的引用。我认为这对于主要只熟悉 JavaScript 的程序员来说似乎很难。但是对于也了解 Java、C# 和 C 的人来说，这很容易。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-05-31T01:48:39.433

对象总是按引用传递，基元按值传递。只需将该参数保持在对象的相同地址即可。

这是一些代码来说明我的意思（在 JavaScript 沙箱中尝试，例如[https://js.do/](https://js.do/)）。

不幸的是，您不能只保留参数的地址；您也保留所有原始成员值。

```
a = { key: 'bevmo' };
testRetain(a);
document.write(' after function ');
document.write(a.key);

function testRetain (b)
{
    document.write(' arg0 is ');
    document.write(arguments[0].key);
    b.key = 'passed by reference';
    var retain = b; // Retaining the original address of the parameter

    // Address of left set to address of right, changes address of parameter
    b = {key: 'vons'}; // Right is a new object with a new address
    document.write(' arg0 is ');
    document.write(arguments[0].key);

    // Now retrieve the original address of the parameter for pass by reference
    b = retain;
    document.write(' arg0 is ');
    document.write(arguments[0].key);
} 
```

结果：

> arg0 是 bevmo arg0 是 vons arg0 在函数通过引用传递之后通过引用传递

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-01-24T12:08:55.410

基元按值传递。但是，如果您只需要读取原始值的值（并且在调用函数时值未知），您可以传递在您需要时检索值的函数。

```
function test(value) {
  console.log('retrieve value');
  console.log(value());
}

// call the function like this
var value = 1;
test(() => value); 
```

# python - 通过 Python 获取 Git 存储库文件的最后提交时间？

> ID：13104495
> 
> 赞同：7
> 
> 时间：2012-10-27T21:50:30.827
> 
> 标签：python, git

我有一个包含数千个文件的 Git 存储库，并且想获取每个单独文件的最后一次提交的日期和时间。这可以使用 Python 来完成吗（例如，通过使用类似的东西`os.path.getmtime(path)`）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-17T17:58:08.017

使用[GitPython](https://gitpython.readthedocs.org/)，这将完成这项工作：

```
import git
repo = git.Repo("./repo")
tree = repo.tree()
for blob in tree:
    commit = repo.iter_commits(paths=blob.path, max_count=1).next()
    print(blob.path, commit.committed_date) 
```

请注意，这`commit.committed_date`是“自纪元以来的秒数”格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T13:30:34.623

一个有趣的问题。下面是一个快速而肮脏的实现。我习惯于`multiprocessing.Pool.imap()`启动子流程，因为它很方便。

```
#!/usr/bin/env python
# vim:fileencoding=utf-8:ft=python
#
# Author: R.F. Smith <rsmith@xs4all.nl>
# Last modified: 2015-05-24 12:28:45 +0200
#
# To the extent possible under law, Roland Smith has waived all
# copyright and related or neighboring rights to gitdates.py. This
# work is published from the Netherlands. See
# http://creativecommons.org/publicdomain/zero/1.0/

"""For each file in a directory managed by git, get the short hash and
data of the most recent commit of that file."""

from __future__ import print_function
from multiprocessing import Pool
import os
import subprocess
import sys
import time

# Suppres annoying command prompts on ms-windows.
startupinfo = None
if os.name == 'nt':
    startupinfo = subprocess.STARTUPINFO()
    startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW

def main():
    """
    Entry point for gitdates.
    """
    checkfor(['git', '--version'])
    # Get a list of all files
    allfiles = []
    # Get a list of excluded files.
    if '.git' not in os.listdir('.'):
        print('This directory is not managed by git.')
        sys.exit(0)
    exargs = ['git', 'ls-files', '-i', '-o', '--exclude-standard']
    exc = subprocess.check_output(exargs, startupinfo=startupinfo).split()
    for root, dirs, files in os.walk('.'):
        for d in ['.git', '__pycache__']:
            try:
                dirs.remove(d)
            except ValueError:
                pass
        tmp = [os.path.join(root, f) for f in files if f not in exc]
        allfiles += tmp
    # Gather the files' data using a Pool.
    p = Pool()
    filedata = [res for res in p.imap_unordered(filecheck, allfiles)
                if res is not None]
    p.close()
    # Sort the data (latest modified first) and print it
    filedata.sort(key=lambda a: a[2], reverse=True)
    dfmt = '%Y-%m-%d %H:%M:%S %Z'
    for name, tag, date in filedata:
        print('{}|{}|{}'.format(name, tag, time.strftime(dfmt, date)))

def checkfor(args, rv=0):
    """
    Make sure that a program necessary for using this script is available.
    Calls sys.exit when this is not the case.

    Arguments:
        args: String or list of strings of commands. A single string may
            not contain spaces.
        rv: Expected return value from evoking the command.
    """
    if isinstance(args, str):
        if ' ' in args:
            raise ValueError('no spaces in single command allowed')
        args = [args]
    try:
        with open(os.devnull, 'w') as bb:
            rc = subprocess.call(args, stdout=bb, stderr=bb,
                                 startupinfo=startupinfo)
        if rc != rv:
            raise OSError
    except OSError as oops:
        outs = "Required program '{}' not found: {}."
        print(outs.format(args[0], oops.strerror))
        sys.exit(1)

def filecheck(fname):
    """
    Start a git process to get file info. Return a string containing the
    filename, the abbreviated commit hash and the author date in ISO 8601
    format.

    Arguments:
        fname: Name of the file to check.

    Returns:
        A 3-tuple containing the file name, latest short hash and latest
        commit date.
    """
    args = ['git', '--no-pager', 'log', '-1', '--format=%h|%at', fname]
    try:
        b = subprocess.check_output(args, startupinfo=startupinfo)
        data = b.decode()[:-1]
        h, t = data.split('|')
        out = (fname[2:], h, time.gmtime(float(t)))
    except (subprocess.CalledProcessError, ValueError):
        return None
    return out

if __name__ == '__main__':
    main() 
```

示例输出：

```
serve-git|8d92934|2012-08-31 21:21:38 +0200
setres|8d92934|2012-08-31 21:21:38 +0200
mydec|e711e27|2008-04-09 21:26:05 +0200
sync-iaudio|8d92934|2012-08-31 21:21:38 +0200
tarenc|8d92934|2012-08-31 21:21:38 +0200
keypress.sh|a5c0fb5|2009-09-29 00:00:51 +0200
tolower|8d92934|2012-08-31 21:21:38 +0200 
```

**编辑**：更新为使用[`os.devnull`](http://docs.python.org/2/library/os.html#os.devnull)（也适用于 ms-windows）而不是`/dev/null`.

**Edit2**：用于`startupinfo`禁止在 ms-windows 上弹出命令提示。

**Edit3**：用于`__future__`使其与 Python 2 和 3 兼容。使用 2.7.9 和 3.4.3 进行测试。现在也[可以在 github 上找到](https://github.com/rsmith-nl/scripts/blob/master/gitdates.py)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T21:53:46.513

您可以使用[GitPython](https://gitpython.readthedocs.org/en/stable/)库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-03T18:53:45.820

这对我有用

[http://gitpython.readthedocs.io/en/stable/tutorial.html#the-tree-object](http://gitpython.readthedocs.io/en/stable/tutorial.html#the-tree-object)

根据文档，由于树只允许直接访问其中间子条目，请使用 traverse 方法获取迭代器以递归方式检索条目

它创建了一个生成器对象来完成工作

```
print tree.traverse()
<generator object traverse at 0x0000000004129DC8>

for blob in tree.traverse():
    commit=repo.iter_commits(paths=blob.path).next()
        print(blob.path,commit.committed_date) 
```

# actionscript-3 - 无法创建功能以非常快（以毫秒为单位）在 Tone 上上下调整音量

> ID：13104497
> 
> 赞同：0
> 
> 时间：2012-10-27T21:50:37.673
> 
> 标签：actionscript-3, air, audio, sound-synthesis

基本上我使用 AS3 来生成音调。我需要能够向我的函数传递一个数组，该数组看起来像`{0,50,100,0,20,500,200,100}`每个代表毫秒。它就像“关闭，打开，关闭，打开，关闭”等，我需要将音调精确到毫秒，没有延迟或打嗝。

我尝试用计时器制作一个函数来完成这个......但它真的没有我需要的那么精确。有轻微的延迟，而且很明显没有像他们需要的那样播放真正短的。

我在想我只是播放我的音调，然后使用 SoundTransform 来打开和关闭音量，这可以帮助它更快，因为我没有开始和停止声音，我只是在真实地操纵音量时间。

但也许不是音量放慢了速度，也许只是计时器不够可靠。这是我的代码，该函数只是循环，直到我用另一个函数停止它。关于如何使这个更精确的任何建议？

我使用所有计时器处理数组的函数

```
private function soundPattern(patternArr:Array):void
        {
            //setup vars
            var pTotal:Number = patternArr.length;
            var pCount:Number = 0;

            if(pTotal >=1)
            {
                //setup listenrs
                patTimer = new Timer(patternArr[pCount],1);
                patTimer.addEventListener(TimerEvent.TIMER_COMPLETE, comp);

                function comp(e:TimerEvent=null):void
                {
                    pCount++;
                    if(pCount != pTotal)
                    {
                        patTimer.removeEventListener(TimerEvent.TIMER_COMPLETE, comp);

                        toneGen.soundTrans.volume=1;
                        toneGen.toneChannel.soundTransform = toneGen.soundTrans;

                        patTimer = new Timer(patternArr[pCount],1);
                        patTimer.addEventListener(TimerEvent.TIMER_COMPLETE, compTwo);

                        if(patternArr[pCount]>0)
                        {
                            patTimer.reset();
                            patTimer.start();
                        }
                        else
                        {
                            compTwo();
                        }
                    }
                    else if(repeat)
                    {
                        trace("1resetting...");
                        patTimer.removeEventListener(TimerEvent.TIMER_COMPLETE, comp);
                        pCount = 0;
                        patTimer = new Timer(patternArr[pCount],1);
                        patTimer.addEventListener(TimerEvent.TIMER_COMPLETE, compTwo);

                        toneGen.soundTrans.volume=0;
                        toneGen.toneChannel.soundTransform = toneGen.soundTrans;

                        if(patternArr[pCount]>0)
                        {
                            patTimer.reset();
                            patTimer.start();
                        }
                        else
                        {
                            compTwo();
                        }
                    }
                }

                //in-between
                function compTwo(e:TimerEvent=null):void
                {
                    pCount++;
                    if(pCount != pTotal)
                    {
                        patTimer.removeEventListener(TimerEvent.TIMER_COMPLETE, compTwo);
                        patTimer = new Timer(patternArr[pCount],1);
                        patTimer.addEventListener(TimerEvent.TIMER_COMPLETE, comp);

                        toneGen.soundTrans.volume=0;
                        toneGen.toneChannel.soundTransform = toneGen.soundTrans;

                        if(patternArr[pCount]>0)
                        {
                            patTimer.reset();
                            patTimer.start();
                        }
                        else
                        {
                            comp();
                        }
                    }
                    else if(repeat)
                    {
                        trace("2resetting...");
                        patTimer.removeEventListener(TimerEvent.TIMER_COMPLETE, compTwo);
                        pCount = 0;
                        patTimer = new Timer(patternArr[pCount],1);
                        patTimer.addEventListener(TimerEvent.TIMER_COMPLETE, comp);

                        toneGen.soundTrans.volume=0;
                        toneGen.toneChannel.soundTransform = toneGen.soundTrans;

                        if(patternArr[pCount]>0)
                        {
                            patTimer.reset();
                            patTimer.start();
                        }
                        else
                        {
                            comp();
                        }
                    }
                }

                //get the tone started, but remember the first is a pause
                toneGen.startTone();

                //start things
                if(patternArr[pCount]>0)
                {
                    patTimer.reset();
                    patTimer.start();
                }
                else
                {
                    comp();
                }
            }
        } 
```

这是我正在使用的toneGen类

```
package
{
    import flash.events.SampleDataEvent;
    import flash.media.Sound;
    import flash.media.SoundChannel;
    import flash.media.SoundTransform;

    public class ToneGenerator {

        [Bindable]
        public var amp_multiplier_right:Number = 0.5;
        [Bindable]
        public var amp_multiplier_left:Number = 0.5;
        [Bindable]
        public var freq_right:Number = 580;
        [Bindable]
        public var freq_left:Number = 580;

        public static const SAMPLING_RATE:int = 44100;
        public static const TWO_PI:Number = 2*Math.PI;
        public static const TWO_PI_OVER_SR:Number = TWO_PI/SAMPLING_RATE;

        public var tone:Sound;
        public var toneChannel:SoundChannel;
        public var soundTrans:SoundTransform;

        public function ToneGenerator() {
        }

        public function stopTone():void {

            if(tone)
            {
                toneChannel.stop();
                tone.removeEventListener(SampleDataEvent.SAMPLE_DATA, generateSineTone);
            }

        }

        public function startTone():void {

            tone = new Sound();

            tone.addEventListener(SampleDataEvent.SAMPLE_DATA, generateSineTone);

            soundTrans = new SoundTransform(0);
            toneChannel = tone.play();
            toneChannel.soundTransform = soundTrans;

        }

        public function generateSineTone(e:SampleDataEvent):void {

            var sample:Number;

            for(var i:int=0;i<8192;i++) {
                sample = Math.sin((i+e.position) * TWO_PI_OVER_SR * freq_left);
                e.data.writeFloat(sample * amp_multiplier_left);
                sample = Math.sin((i+e.position) * TWO_PI_OVER_SR * freq_right);
                e.data.writeFloat(sample * amp_multiplier_right);
            }  

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:45:33.050

众所周知，计时器不准确（这是由于 Flash Player 的架构造成的：[阅读此内容](http://www.kaourantin.net/2006/05/frame-rates-in-flash-player.html)）。

每当您需要精确的基于时间的计算时，请使用该`getTimer()`方法计算两个时刻之间经过的时间。您还需要一种方法来`tick()`尽可能频繁地使用方法（这将是您的准确性），在这种情况下，您可以使用 a`Timer`甚至`Event.ENTER_FRAME`.

```
var ticker:Sprite = new Sprite();
sprite.addEventListener(Event.ENTER_FRAME, tick);

const delay:uint = 300;

var timeReference:uint;
var lastTimeReference:uint = getTimer();

function tick(evt:Event):void {
   timeReference = getTimer();
   if(timeReference - lastTimeReference >= delay)
   {
      trace("delay reached");
      lastTimeReference = timeReference;
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:27:18.233

由于您是通过自己创建原始样本数据来生成音调，因此最准确的做法是调整创建音调的代码中的音量，而不是依赖在单独的线程中运行的其他东西，使用单独的时钟和相关的任意延迟来打开和关闭它。

由于您只有简单的音调，您可以通过在开始和停止之前等待音调“过零”来打开和关闭它们。这通常可以正常工作。或者，您可以乘以一个名义上为 1 或 0 的常数，并在需要更改打开和关闭它时将值在 1 和 0 之间倾斜。一个简单的斜坡方法是使用线性插值：

[http://blog.bjornroche.com/2010/10/linear-interpolation-for-audio-in-cc.html](http://blog.bjornroche.com/2010/10/linear-interpolation-for-audio-in-c-c.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T07:06:02.703

你必须调整发电机。你有一个毫秒序列，代表开/关开关，对吧？每次采样时，您都必须知道声音现在处于哪种状态，打开或关闭。给定 44100 Hz 的样本，您可以精确地调整声音何时停止以及何时开始，方法是在声音由您的指令停止时向通道发送 0.0 而不是正弦波。事实上，逻辑声音结构会不断播放，但音调会断断续续。

以下是如何完成的草图：

```
public class CustomTone {
    private var tone:Sound;
    private var delays:Vector.<Number>;
    private var frequency:Number;
    private var onThreshold:Number;
    private var offThreshold:Number;
    private var finishThreshold:Number;
    private var isOn:Boolean=true;
    private var sequenced:Number; // how many samples were sequenced total. 
    // any check is done within this.
    public function CustomTone(freq:Number,toneArray:Array) {
        tone=new Sound();
        delays=Vector.<Number>(toneArray);
        frequency=freq;
        tone.addEventListener(SampleDataEvent.SAMPLE_DATA,generateTone); 
        tone.addEventListener(Event.COMPLETE,finishedGenerating);
        sequenced=0;
        // fill other values according to array [TODO]
    }
    // other function to taste. Should have there a play and stop functions, as well as to play presampled sound
    }
    private function generateTone(e:SampleDataEvent):void {
        var ep:Number=e.position;
        var howMany:int=Math.min(finishThreshold-sequenced,8192);
        for (var i:int=0;i<howMany;i++) {
            if (isOn) { 
                sample = Math.sin((i+ep) * TWO_PI_OVER_SR * frequency);
                e.data.writeFloat(sample * amp_multiplier_left);
                sample = Math.sin((i+ep) * TWO_PI_OVER_SR * frequency);
                e.data.writeFloat(sample * amp_multiplier_right);
            } else {
                e.data.writeFloat(0.0);
                e.data.writeFloat(0.0);
            }
            if ((i+ep)>offThreshold) {
                isOn=false;
                offThreshold=getNextOffThreshold();
            }
            if (i+ep>onThreshold) {
                isOn=true;
                onThreshold=getNextOnThreshold();
            }
        }
        sequenced+=howMany;
    }
    ...
} 
```

请注意，您可能希望不再从同一个数组中生成这样的声音，因此您可以使用一种方法来重放曾经生成的声音。下一个阈值的方法应该替换为下一个值的内联计算，注意这些是以样本而不是毫秒为单位测量的，因此您也应该将它们转换为样本。

# confluence - 如何在 Confluence 中格式化内联代码？

> ID：13104501
> 
> 赞同：575
> 
> 时间：2012-10-27T21:51:28.920
> 
> 标签：confluence

如何`inline code`在 Confluence 中格式化`like this`？我的意思是，不是单独的代码块，而是`classname`例如 inline 。

* * *

## 回答 #1

> 赞同：698
> 
> 时间：2012-10-29T05:38:23.807

要在 Confluence 中插入内联等宽字体，请将文本用双花括号括起来。

这是一个`{{example}}`.

如果您使用的是 Confluence 4.x 或更高版本，您也可以从段落样式菜单中选择“预格式化”选项。请注意，这将适用于*整*条生产线。

完整参考[这里](https://confluence.atlassian.com/display/CONF56/Quick+Reference+Guide+for+the+Confluence+Editor)。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-12-10T06:08:18.473

默认情况下，Confluence 渲染具有透明背景的等宽文本。您可以编辑全局 CSS 以添加灰色。来自[Confluence 手册](https://confluence.atlassian.com/display/DOC/Styling+Confluence+with+CSS)：

1.  选择屏幕右上角的齿轮图标，然后选择 Confluence Admin。
2.  选择样式表。
3.  选择编辑。
4.  将您的自定义 CSS 粘贴到文本字段中。
5.  选择保存。

用于在等宽块中显示灰色背景的自定义 CSS：

```
code {
    padding: 1px 5px 1px 5px; 
    font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif;
    background-color: #eeeeee;
} 
```

如果您使用 Confluence OnDemand（云）：

1.  单击左侧边栏底部的齿轮/齿轮
2.  选择**外观**
3.  单击**边栏、页眉和页脚**选项卡
4.  将您的自定义 CSS 粘贴到**标题**字段中
5.  将代码包装在一个`{style}`块中
6.  节省

粘贴以下内容：

```
{style}
code {
    padding: 1px 5px 1px 5px; 
    font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif;
    background-color: #eeeeee;
}
{style} 
```

之后，您只需编写`{{sometext}}`.

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2018-05-24T08:33:06.040

# Confluence 4 及更高版本

从 Confluence 4 及更高版本开始，键入两个大括号**不起作用。**

您现在需要选择等宽字体。突出显示要更改的文本，然后：

窗口：Ctrl + Shift + M

Mac：Command + Shift + M

或者，您可以输入一个反引号 (`)，Confluence 将格式化所有内容，直到您输入另一个反引号

或者，在粗体和斜体选项旁边，您可以单击“更多”下拉菜单并选择等宽：

[![在此处输入图像描述](../Images/da43f8bf09ad7278671d0acaa71eb0b8.png)](https://i.stack.imgur.com/mXA2I.png)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2013-06-03T09:03:33.277

你可以请你的 Confluence 管理员为你创建一个宏。这是 Confluence 3.x 的宏示例

```
Macro Name:    inlinecode
Macro Title:   Markup text like stackoverflow inline code
Categories:    Formatting
Macro Body Processing: Convert wiki markup to HTML
Output Format: HTML
Template:

## Macro title: Inline Code
## Macro has a body: Y
## Body processing: Convert wiki markup to HTML
## Output: HTML
##
## Developed by: My Name
## Date created: dd/mm/yyyy
## Installed by: My Name
## This makes the body text look like inline code markup from stackoverflow
## @noparams
<span style="padding: 1px 5px 1px 5px; font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif; background-color: #eeeeee;">$body</span> 
```

然后用户可以使用`{inlinecode}like this{inlinecode}`

您也可以使用`{html}`or`{style}`宏（如果已安装）或将此样式添加到您空间的样式表中。

当您使用它时，请您的 Confluence 管理员为您创建一个 kbd 宏。与上面相同，除了`Macro name`是*kbd*和`Template`是：

```
<span style="padding: 0.1em 0.6em;border: 1px solid #ccc; font-size: 11px; font-family: Arial,Helvetica,sans-serif; background-color: #f7f7f7; color: #333;  -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset; -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset; box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; display: inline-block; margin: 0 0.1em; text-shadow: 0 1px 0 #fff; line-height: 1.4; white-space: nowrap; ">$body</span> 
```

然后，您可以编写文档来告诉用户按`F1`和`Enter`键。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-09-02T15:51:16.870

**用包围您的内联**文本`{{ }}`。

注意事项：

1.  之后你必须***按空格键*** `}}`
2.  您不能复制内联预格式化文本并保持其外观。如果您复制它，您可能无法添加`{{ }}`以修复它。只需重新键入或粘贴而不格式化（Mac 上的`Cmd ⌘`+ `Shift`+ ），然后添加并点击空格。`V``{{ }}`
3.  如果`{{ }}`稍后添加到现有文本中，它不能被其他字符包围，例如，如果您想要在预格式化文本周围加上括号，则无法`(my text)`通过添加大括号来修复`({{my text}})`。首先在文本周围添加空格，`( my text )`然后添加`{{ }}`.

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-03-06T18:59:45.430

在 Confluence 5.4.2 中，您可以`<code></code>`在源代码编辑器中添加带有标签的内联代码：

```
Confluence will show <code>this inline code</code> in a fixed font. 
```

这在需要修改许多片段的情况下很有用，因为双大括号功能仅在 Confluence 编辑器中以交互方式添加文本时才有效。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-11-28T12:45:06.287

如果要插入带有可选行号等的大代码块，请使用代码宏（在宏 -> 其他下可用）。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-03-12T21:35:06.193

要格式化文本中的内嵌代码，请使用“`”字符将代码括起来。通常位于键盘上“1”键的左侧。

例子：

```
`printf("Hello World");` 
```

与 Stack Exchange 相同的分隔符！

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-04-25T05:10:56.540

我发现用颜色格式化有点棘手，因为 Confluence (5.6.3) 对 {{monospace}} 块周围的空间非常挑剔。

![使用 Wiki 标记创建彩色等宽空间](../Images/590da89511dc2cd5a12e78dc02000e14.png)

![由 Confluence 渲染](../Images/5dae6580c72f3b26dddefdba80bfafa1.png)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-03-22T20:17:15.663

在撰写本文时，我发现既不工作`{{string}}`也不`{{ string }}`工作。我的控制面板只有代码块按钮。

但是，列出了固定宽度格式的快捷方式：`Ctrl`++ 。`Shift``M`

我在菜单中四处寻找，但无法找出提供给我们的版本。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-04-07T14:43:34.437

用鼠标或光标标记您的文本，然后按：

*   **Mac：** ⌘ + ⇧ + M（CMD、Shift 和 M 键）
*   **Windows/Linux：** CTRL + ⇧ + M（CTRL、Shift 和 M 键）

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-06-15T08:16:21.523

对我来说最简单的方法是插入标记。

[![Confluence 插入标记](../Images/f1131f4a0fd2a047ad7df53ef78ad8de.png)](https://i.stack.imgur.com/wipHj.jpg)

然后在文本框中键入大括号之间的文本。

它将格式化文本插入新行，但您可以将其复制到任何地方，甚至是内联。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-05-31T21:50:41.230

我结合使用 Zelphir 和 Peter Gluck 的答案。IE

1.  （Mac 语言）单击 COMMAND + SHIFT + D
2.  在模型弹出的下拉列表中选择 Markdown
3.  用代码标签包围你的文本 - 即`<code>bovvered</code>`
4.  单击插入

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-12-13T09:30:02.337

我发现做到这一点的最简单方法是从行首开始写降价。按`Ctrl+D`（打开标记输入对话框的快捷方式）并输入 markdown。普通的 wiki 编辑器似乎不太适合精确格式化。它似乎对字符样式了解不多，只知道段落样式。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-03-01T09:09:14.593

所有这些其他答案听起来当然都是好主意，我建议先使用它们，但为了完整起见，我会继续在列表中添加一个。

您可以简单地使用 html 宏，然后粘贴包含在`<pre> </pre>`标签中的内容。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2016-10-10T23:39:59.753

如果你有 WinWord，你可以复制你需要的内容，修改结果，然后将其粘贴到 Confluence 中。我发现这比这里的其他解决方案更容易。

# python - 如何将“return False”移植到类和“try/except”子句

> ID：13104508
> 
> 赞同：0
> 
> 时间：2012-10-27T21:52:27.267
> 
> 标签：python, python-2.7

我对 Python 比较陌生，我正在尝试学习关于类的一两件事。我对函数有一些经验，我试图了解类是如何工作的。我的问题是关于错误处理的。

通常使用函数，我可以执行一些操作，如果出现问题，我可以简单地返回 False 并在继续执行其余代码之前验证调用函数的位置。

我怎样才能在课堂上做到这一点？

我有一个带有简单方法的简单类，例如：

```
my_object = MyObj()
my_object.swim() 
```

当我让 my_object “游泳”时，我希望能够以简单的方式处理错误或问题。例如：

在执行 def Swim(..) 期间：我希望能够返回 False 或引发不同的错误并在不完全中断应用程序的情况下处理它们。

即我想：

```
try:
    my_object.swim()
except:
    # it can not swim. I want it to tell me why or just tell me "False" so I can execute another codeblock and tell it to perhaps .walk_away() 
```

我读到了 try/except 块、引发错误、它们是如何类的。但它并没有做我喜欢的事情，即尝试执行一个方法并处理该方法的执行结果（也许是真、假或其他错误？）

我怎样才能在 Python 中做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T22:03:48.017

您将执行以下操作：

```
class MayNotSwimException(Exception):
    def __init__(reason):
        self.reason = reason

class Person(object):
    def __init__(self, can_swim):
        self.can_swin = can_swim

    def swim(self):
        if self.can_swim:
            self.do_something()
        else:
            raise MayNotSwimException("I can't swim because...!")

    def walk_away(self):
        self.do_something_else()

p = Person(can_swim = False)
try:
    p.swim():
except MayNotSwimException as e: # In python 2.5-, use MayNotSwimException, e 
    print "That person can't swim because", e.reason
    p.walk_away() 
```

异常可用于：

*   改变控制流程（跳回一个`try/except`块）
*   通过异常本身传输信息。这可以通过引发不同类型的异常（即，我们可以定义 a`MayNotSwimBecauseDoesntWantException`和 a`MayNotSwimBecauseFeelsSleepyException`并分别捕获它们）或通过异常对象本身的属性（`e.reason`）来实现。

请[查看文档](http://docs.python.org/tutorial/errors.html)以获得更详细的说明！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:00:50.593

将 try..except 或其他形式的失败检查（和反应代码）放在游泳方法本身中。异常不一定是致命的，但我建议您将它们限制在可以使用正常条件的地方，以保持代码干净。

# spring-mvc - Shiro/Spring MVC 成功登录后重定向到原始/请求的页面

> ID：13104509
> 
> 赞同：1
> 
> 时间：2012-10-27T21:52:30.557
> 
> 标签：spring-mvc, shiro

如何在具有 Shiro 安全性的 Spring MVC 应用程序中实现以下场景：

> 如果用户未通过身份验证并请求页面，Shiro 应重定向到登录页面。用户登录成功，Shiro 重定向到之前请求的页面而不是`successUrl` URL

登录部分在我的应用程序中工作正常。以下是我现有代码的片段

```
<!-- Shiro filter -->
    <bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
        <property name="securityManager" ref="securityManager" />
        <property name="loginUrl" value="/login" />
        <property name="successUrl" value="/dashboard" />
        <property name="unauthorizedUrl" value="/error" />
        <property name="filterChainDefinitions">
            <value> 
                <!-- !!! Order matters !!! -->
                /authenticate = anon
                /login = anon
                /logout = anon
                /error = anon
                /static/** = anon
                /** = authc
            </value>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:22:25.607

在登录控制器中：

```
public String doLogin(
        HttpServletRequest request,
        HttpServletResponse response,
        @RequestParam(required = true) String username,
        @RequestParam(required = true) String password,
        @RequestParam(required = false, defaultValue = "false") boolean rememberMe,
        Model model) {
    Subject currentUser = SecurityUtils.getSubject();

    ...

    if (currentUser.isAuthenticated()) {
        String fallbackUrl = "redirect:/";
        try {
            // redirect to previously requested page
            WebUtils.redirectToSavedRequest(request, response, fallbackUrl);
        } catch (IOException e) {
            logger.error(e.getMessage(), e);
            return fallbackUrl;
        }
        // return null to prevent spring render another page
        return null;
    } else {
        session.setAttribute("loginFailCount", ++loginFailCount);
    }
    return "login";
} 
```

# android - 如何比较 SQLite 中的小时和分钟？

> ID：13104513
> 
> 赞同：2
> 
> 时间：2012-10-27T21:52:41.570
> 
> 标签：android, sqlite, time

我有一个用户“工作时间”存储在 SQLite 中，就像`HH:MM`在我的 Android 应用程序中一样。如果可能的话，我**不想**更改这些数据的存储方式。那将是一场噩梦。我希望他们能够搜索其时间为`=`、`<`或`>`其他时间戳的条目。

例如，使用我的应用程序，他们可以创建`WHERE`如下子句：列名`time(Hours) > time('5:51')`在哪里。`Hours`但是，即使我*知道*有匹配的行，我似乎也无法得到任何结果。

难道我做错了什么？我没有得到任何例外，只是没有结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:59:25.607

time 将不接受持续时间，除非它们同时也是有效时间。所以即使有人可以工作 40 小时：

```
SELECT (time('40:00') IS NULL); 
```

给出 1（表明这是一个错误）。

```
SELECT (time('11:00') IS NULL); 
```

是0。但大概两者都需要工作。

幸运的是，如果您坚持使用两位数的小时数和两位数的分钟数，您可以将它们作为普通字符串进行比较。

```
SELECT '84:13' > '29:03';
1

SELECT '05:12' > '43:58';
0 
```

**编辑**：更好的解决方案可能是将分钟数简单地存储为 INTEGER （SQLite[基本类型](http://www.sqlite.org/datatype3.html)之一）。是的，您需要进行一次升级转换，但我认为这是一个更好的选择。

你有完全的精确度，你可以很容易地乘以（例如按小时费率），如果你想在某些报告中显示为 HH:MM，它是一个简单的模数。

# c# - 使用反射、链式方法和 lambda 表达式动态创建对象

> ID：13104515
> 
> 赞同：7
> 
> 时间：2012-10-27T21:52:46.093
> 
> 标签：c#, .net, reflection, lambda, expression

**介绍**

我的应用程序使用方法链接实例化一个对象，因此它的生成和配置如下：

```
var car = new Car("Ferrari").Doors(2).OtherProperties(x = x.Color("Red")); 
```

**问题**

我需要在运行时动态生成此对象 - 配置所需的链式方法将在运行时确定，因此必须动态组装所有内容。我过去曾使用反射来创建简单的对象，例如`new Car("Ferrari", 2, "Red")`- 我对此很满意 - 但从来没有使用包含 lambda 表达式作为参数的链式方法 - 这两个因素真的让我卡住了。我研究了表达式树，并相信这是创建动态表达式参数的解决方案的一部分，但我完全陷入了试图弄清楚如何将其与反射缝合在一起以创建基础对象和其他链接方法的过程中。

**感谢和赞赏**

提前花时间查看我的问题以及您可能提供的任何指导或信息。

**更新：结论**

非常感谢 dasblinkenlight 和 Jon Skeet 的回答。我选择了 dasblinkenlight 的答案，因为他的代码示例让我立即启动并运行。对于方法链接，我基本上在接受的答案中使用了相同的循环方法，所以我不会重复该代码，但下面是我编写的代码，用于将表达式树方法调用动态转换为操作委托，然后可以通过反射执行，`Invoke()`如dasblinkenlight 的回答。正如乔恩指出的那样，这确实是问题的症结所在。

帮助类来存储方法元数据。

```
public struct Argument
    {
        public string TypeName;
        public object Value;
    }

public class ExpressionTreeMethodCall
{
    public string MethodName { get; set; }
    public IList<Argument> Arguments { get; set; }

    public ExpressionTreeMethodCall()
    {
        Arguments = new List<Argument>();
    }
} 
```

组装 lambda 表达式方法调用的静态方法，然后将其作为操作委托返回以在其他地方执行（`Invoke()`在我的情况下作为参数传递）。

```
public static Action<T> ConvertExpressionTreeMethodToDelegate<T>(ExpressionTreeMethodCall methodData)
    {            
        ParameterExpression type = Expression.Parameter(typeof(T));

        var arguments = new List<ConstantExpression>();
        var argumentTypes = new List<Type>();

        foreach (var a in methodData.Arguments)
        {
            arguments.Add(Expression.Constant(a.Value));
            argumentTypes.Add(Type.GetType(a.TypeName));
        }

        // Creating an expression for the method call and specifying its parameter.
        MethodCallExpression methodCall = Expression.Call(type, typeof(T).GetMethod(methodData.MethodName, argumentTypes.ToArray()), arguments);

        return Expression.Lambda<Action<T>>(methodCall, new[] { type }).Compile();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:23:57.500

您面临两个不同的问题：

*   调用链式方法，以及
*   调用以 lambda 作为参数的方法

让我们分别处理这两个。

假设您有以下可用信息：

*   A`ConstructorInfo`代表链中的第一项（构造函数）
*   表示构造函数参数的对象数组
*   一组`MethodInfo`对象 - 每个链接函数一个
*   表示每个链接函数的参数的对象数组数组

那么构造结果的过程将如下所示：

```
ConstructorInfo constr = ...
object[] constrArgs = ...
MethodInfo[] chainedMethods = ...
object[][] chainedArgs = ...
object res = constr.Invoke(constrArgs);
for (int i = 0 ; i != chainedMethods.Length ; i++) {
    // The chaining magic happens here:
    res = chainedMethods[i].Invoke(res, chainedArgs[i]);
} 
```

循环结束后，您将`res`包含一个已配置的对象。

上面的代码假设链式方法中没有泛型方法；如果某些方法碰巧是泛型的，则在调用`Invoke`.

现在让我们看看 lambda。根据传递给方法的 lambda 类型，您需要传递具有特定签名的委托。您应该能够使用[`System.Delegate`](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)类将方法转换为可调用的委托。您可能需要创建实现所需委托的支持方法。如果没有看到您必须能够通过反射调用的确切方法，很难说如何。您可能需要使用表达式树，并`Func<...>`在编译它们后获取实例。的调用`x.Color("Red")`如下所示：

```
Expression arg = Expression.Parameter(typeof(MyCarType));
Expression red = Expression.Constant("Red");
MethodInfo color = typeof(MyCarType).GetMethod("Color");
Expression call = Expression.Call(arg, color, new[] {red});
var lambda = Expression.Lambda(call, new[] {arg});
Action<MyCarType> makeRed = (Action<MyCarType>)lambda.Compile(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:57:39.590

> 但绝不会使用包含 lambda 表达式作为参数的链式方法

好吧，链式方法就是一点。这只是多次使用反射的问题。串连起来

```
foo.X().Y() 
```

你需要：

*   `X`从声明的类型中获取方法`foo`
*   使用 的值`foo`作为调用目标，通过反射调用方法，并记住结果（例如`tmp`）
*   *从返回类型*的`Y`声明类型中获取方法（参见）*`X``MethodInfo.ReturnType`*
**   `tmp`使用之前的结果 ( ) 作为调用目标，通过反射调用方法*

 *lambda 表达式更难——它实际上取决于首先如何为您提供表达式。[使用表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)然后调用来构建一个委托来执行一个合理任意的表达式并不难[`LambdaExpression.Compile`](http://msdn.microsoft.com/en-us/library/bb356928.aspx)，但是你需要知道你在做什么。*

# php - 请需要 PHP 会话建议

> ID：13104526
> 
> 赞同：1
> 
> 时间：2012-10-27T21:55:12.320
> 
> 标签：php, html

我正在学习 PHP，如果可能的话需要一些帮助。

我知道我错过了一些简单的东西，但无法弄清楚，我有以下 PHP 代码可以将用户从他们刚刚输入用户名和密码的页面转移到名为`homepage.php`. 该脚本需要生成一个会话名称，但我不确定是否要放置它。

然后我需要一小段 PHP 来检查用户名和密码是否正确，然后再加载页面供用户查看，这有意义吗？有人可以帮忙吗？

```
<?php 
$host="localhost"; // Host name
$username="root"; // username
$password=""; // password
$db_name="gotswapuser"; // Database name
$tbl_name="users"; // Table name

mysql_connect("$host", "$username", "$password");
mysql_select_db("$db_name");

$myusername=mysql_real_escape_string($_POST['myusername']);
$mypassword=mysql_real_escape_string($_POST['mypassword']);

$sql="SELECT * FROM $tbl_name WHERE name='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){
    header("location:homepage.php");
} else {
  header("location:subscriptionpage.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:01:24.253

您应该使用[PDO](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)进行数据库访问，而不是 mysql。Mysql 正在被弃用，不是好的做法。

但是，要回答您的问题：

使用您拥有的代码，您只想在“成功”登录中添加几行：

```
 if($count==1) {  
     session_start();  
     $_SESSION["logged_in"] = 1;  
     header("location:homepage.php");  
 } else {  
   header("location:subscriptionpage.php");  
 } 
```

然后，在用户应该登录的页面上，执行以下操作：

```
 session_start();
 if ( ! isset($_SESSION["logged_in"]) || ! $_SESSION["logged_in"]) {
      header("location:signin.php");
      exit;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:02:28.117

MySQL 命令正在贬值，您应该考虑 Mysqli 或 PDO，但除此之外，您应该在 if 子句中启动会话

```
 if(found){
             session_start();
             $_SESSION['username'] = $myusername;
              redirect user
           }
          rest of code..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T22:01:07.893

首先，您需要开始您的会话。见下文：

```
session_start(); 
```

开始会话后，您可以使用 $_SESSION 超全局变量来存储和检索变量。见下文：

```
$_SESSION['me'] = 'John Doe';
$_SESSION['you'] = 'Jane Doe';
$_SESSION['us'] = 'Doe Family';

echo $_SESSION['us']; 
```

只要确保始终使用 session_start(); 在尝试访问这些变量之前。在此处阅读有关 PHP.net 的更多信息：http: [//php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

运行 session_start() 后，您可以使用 session_id() 函数轻松检索会话 ID。如果您没有使用 session_start()，它将返回 null。见下文：

```
echo session_id(); // Returns session ID. 
```

希望这可以帮助！祝你的项目好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T22:01:30.727

你快到了。您只需要： 1，确保您的会话已启动：`session_start();` 2，为您的用户名创建会话变量：`$_SESSION['username'] = $result[0]['username'];`

```
if($count==1){
    $_SESSION['username'] = $result[0]['username'];
    header("location:homepage.php");
} else {
  header("location:subscriptionpage.php");
} 
```

有几点建议。在调用您的 mysql 语句后，获取行或对象以便能够为您的会话引入您的用户名。

# vb.net - 水晶报表设置背景颜色而不是抑制子报表

> ID：13104532
> 
> 赞同：0
> 
> 时间：2012-10-27T21:56:25.903
> 
> 标签：vb.net, crystal-reports, report

我有一个水晶报表，上面有 2 个子报表。

如果子报表包含 0 行，任何人都知道是否可以设置背景颜色（或图像）？

子报表最多显示 5 行电话号码，但如果行为 0，我需要将该区域设为黑色（或任何颜色）以防止其他人在其上书写。

我的另一个选择是具有该背景颜色的新水晶，并在每种情况下使用正确的水晶报告。

```
VB.Net 2010 & CR 2010. 
```

谢谢！

对不起我的英语不好。有什么不懂的给我留言！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:21:39.130

创建一个参数并将其传递给子报表，然后将其返回给主报表。完成后进入部分专家，单击您想要颜色的部分。然后单击颜色选项卡，并创建如下公式：

```
if {paramField} = 0 then crRed
else crNoColor 
```

如果您不确定如何创建参数并将其传递给子报表，请尝试以下链接： [Crystal Reports：如何将参数从子报表传递到父报表？](https://stackoverflow.com/questions/5745810/crystal-reports-how-to-pass-a-parameter-from-a-subreport-to-the-parent-report)

# objective-c - 如何在收到点击次数后显示警报视图

> ID：13104535
> 
> 赞同：0
> 
> 时间：2012-10-27T21:57:27.763
> 
> 标签：objective-c, ios, xcode

正如标题所暗示的那样，我试图弄清楚如何在按钮获得一定数量的点击后显示警报。到目前为止，我想出了

```
- (IBAction)count:(id)sender {

{
    UITouch *touch = [count];
    if (touch.tapCount == 4)
    {
}
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"My alert text here" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

[alert show];

 }

} 
```

以上不起作用，我已将我的按钮设置`count`为操作和插座`counted`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:07:42.880

该代码没有多大意义（我很惊讶它可以编译，是吗？）。UITouch 不是您选择按钮的一部分。我认为您需要做的是记录按下按钮的次数，并将其存储为实例变量。

例如（在您的实现中）：

```
@interface ClassName() {
    NSUInteger m_buttonTouchCount;
}
@end

// Set m_buttonTouchCount to 0 in your init/appear method, whenever it's appropriate to reset it

- (IBAction)count:(id)sender {
{
    m_touchButtonCount++
    if (m_touchButtonCount == 4)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" 
                                                        message:@"My alert text here" 
                                                       delegate:nil
                                              cancelButtonTitle:@"Ok" 
                                              otherButtonTitles:nil];
        [alert show];
        m_touchButtonCount = 0; // Not sure if you want to reset to 0 here.
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:08:04.930

在代码静态值的开头某处定义：

```
static int numberTouches; 
```

并设置在某处（在 viewWillAppear 中）：

numberTouches = 0;

比：

```
- (IBAction)count:(id)sender {
{
    numberTouches++;
    if(numberTouches == 4)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"My alert text here" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
        [alert show];
    }
} 
```

请记住将 0 设置为您想要执行此操作的地方的 numberTouches，例如在 viewDidDissapear 中，或者如果用户在其他地方录制。

# ios - 使用 XCode 4.4 部署到 iOS 3.0

> ID：13104538
> 
> 赞同：0
> 
> 时间：2012-10-27T21:57:44.470
> 
> 标签：ios, xcode, deployment

有谁知道我在哪里可以获得一个简单的项目模板，用于在使用 XCode 4.4 时将应用程序部署到 iOS 3.0？

编辑：

或者以任何其他方式使用 XCode 4.4 创建部署目标为 3.2 或更低版本的应用程序？

编辑：AppStore 允许的当前最小部署目标是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:15:57.003

看看这个帖子。他们正在做你需要的。我希望这有帮助。

[这是一个链接到一个帖子，这将有助于](https://stackoverflow.com/questions/6075161/ios-3-x-support-in-xcode-4)

# arrays - 如何对单调交替的数组进行排序

> ID：13104539
> 
> 赞同：6
> 
> 时间：2012-10-27T21:58:13.237
> 
> 标签：arrays, sorting

有一个数组在一段时间内单调增加，然后减少，再次增加，......等等，比如`[1,2,3,4,5,3,1,-1,-3,2,5,67,90,8,7,3,0]`. 对该数组进行排序的最佳方法是什么？Stackoverflow 中提出了一些相关问题`K-Way Merge Sort`，尽管没有提供实现细节。

那么理想的排序方式是什么？任何光滑的方法是否会提供比由`O(N*log N)`给出的好旧方法更好的性能`quicksort`，从而值得使用？如果`K-Way Merge Sort`是要做的事情，请提供一些实现细节，我在互联网上找不到！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:47:08.623

我想一个带有预处理的自然合并排序将在 O(n) 中完成。

1.  反转降序子数组中的顺序 - 总共 O(n)
2.  进行自然归并排序 - O(n)：[http ://www.algorithmist.com/index.php/Merge_sort#Natural_mergesort](http://www.algorithmist.com/index.php/Merge_sort#Natural_mergesort)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:00:11.793

您需要[Timsort](http://en.wikipedia.org/wiki/Timsort)，它利用自然运行。

# java - 手动执行 isEmpty、拆分、包含和替换

> ID：13104541
> 
> 赞同：2
> 
> 时间：2012-10-27T21:58:31.673
> 
> 标签：java, regex, string, replace, split

所以我正在研究一个由于某些原因仅限于 java squawk 1.4 的项目。因此，`String`该类不包含标题中的四个方法。我在我的程序中需要这些方法，并得出结论，我必须创建一个 Util 类来自行执行这些方法的功能。

首先，这是否存在于某个地方？显然，我的第一反应是考虑从`String`类中复制源代码，但是这些方法的依赖关系太深了，我无法使用。

其次，我无法复制`split(String regex)`and的行为`replace(CharSequence target, CharSequence replacement)`。`contains(String)`显然很容易，`isEmpty()`但我在编写其他代码时遇到了麻烦。

现在，我`split`正在工作（尽管它的工作方式与 jdk 7 中的不同，我不想得到错误）。

```
public static String[] split(String string, char split) {
    String[] s = new String[0];
    int count = 0;
    for (int x = 0; x < string.length(); x++) {
        if (string.charAt(x) == split) {
            String[] tmp = s;
            s = new String[++count];
            System.arraycopy(tmp, 0, s, 0, tmp.length);
            s[count - 1] = string.substring(x).substring(1);
            if (contains(s[count - 1], split + "")) {
                s[count - 1] = s[count - 1].substring(0, s[count - 1].indexOf(split));
            }
        }
    }
    return s.length == 0 ? new String[]{string} : s;
} 
```

`Replace`很难做到，我已经尝试了几个小时。这似乎是谷歌/档案馆从未尝试过的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:46:02.273

做了方法...

```
public static boolean isEmpty(String string) {
    return string.length() == 0;
}

public static String[] split(String string, char split) {
    return _split(new String[0], string, split);
}

private static String[] _split(String[] current, String string, char split) {
    if (isEmpty(string)) {
        return current;
    }
    String[] tmp = current;
    current = new String[tmp.length + 1];
    System.arraycopy(tmp, 0, current, 0, tmp.length);
    if (contains(string, split + "")) {
        current[current.length - 1] = string.substring(0, string.indexOf(split));
        string = string.substring(string.indexOf(split) + 1);
    } else {
        current[current.length - 1] = string;
        string = "";
    }
    return _split(current, string, split);
}

public static boolean contains(String string, String contains) {
    return string.indexOf(contains) > -1;
}

public static String replace(String string, char replace, String replacement) {
    String[] s = split(string, replace);

    String tmp = "";
    for (int x = 0; x < s.length; x++) {
        if (contains(s[x], replace + "")) {
            tmp += s[x].substring(1);
        } else {
            tmp += s[x];
        }
    }
    return tmp;
} 
```

# javascript - 使用 JsTestDriver 的 basePath 指定从哪里加载夹具数据

> ID：13104542
> 
> 赞同：2
> 
> 时间：2012-10-27T21:58:49.267
> 
> 标签：javascript, js-test-driver

我正在尝试将 HTML 夹具数据加载到 JsTestDriver 测试环境中。当`jsTestDriver.conf`文件位于工作目录的顶层时，我可以让它工作，但如果我把它放在子目录中并尝试使用`basePath`JsTestDriver 的功能，我就无法让它工作。有没有人让这个工作？如果是这样，我做错了什么？

## 首先是有效的目录结构：

```
├── fixtures
│   └── fix.html
├── jsTestDriver.conf
├── lib
│   └── JsTestDriver-1.3.5.jar
├── server.sh
├── test
│   └── dom.fixture.test.js
└── test.sh 
```

jsTestDriver.conf 如下所示：

```
server: http://localhost:9876

# files in the server section are only added if explicitly asked for        
serve:
  - fixtures/fix.html

test:
  - test/dom.fixture.test.js

timeout: 10 
```

server.sh 和 test.sh 分别调用 server 和 test-runner：

服务器.sh：

```
PORT=9876
java -jar lib/JsTestDriver-1.3.5.jar --captureConsole --port $PORT --browser "/usr/bin/firefox;%s,/opt/google/chrome/google-chrome;%s;--allow-file-access-from-files" 
```

测试.sh

```
java -jar lib/JsTestDriver-1.3.5.jar --tests all --captureConsole 
```

我在 dom.fixture.test.js 代码中加载夹具，如下所示：

```
function getFixtureContent() {
  var url = '/test/fixtures/fix.html';

  var request = new XMLHttpRequest();
  request.open('GET', url, false); // synchronous!
  request.send(null);

  return request.responseText;
} 
```

这成功地返回了 fix.html 中的 html，然后我必须将其加载到 DOM 中。

但是，当我将 jsTestDriver.conf 文件推送到 conf 目录时，我似乎无法让 JsTestDriver 中的嵌入式码头服务器在不使用绝对路径 ( `/test//$HOME/javascript/jstd/fixtures/fix.html`) 的情况下找到 fix.html 文件，尽管尝试了许多变化。默认情况下，JSTD 假定`/test`Jetty 的根与您放置 jsTestDriver.conf 文件的位置相关。据说，设置`basePath`应该允许你改变它。

## 这是一次失败的尝试：

目录结构是相同的，除了 jsTestDriver.conf 在一个 conf 目录中：

```
├── conf
│   └── jsTestDriver.conf 
```

jsTestDriver.conf 中的路径都被调整为一个目录：

```
server: http://localhost:9876

# files in the server section are only added if explicitly asked for        
serve:
  - ../fixtures/fix.html

test:
  - ../test/dom.fixture.test.js

timeout: 10 
```

server.sh 和 test.sh 有两个额外的命令行开关：

```
--basePath .. --config conf/jsTestDriver.conf 
```

其余的都是一样的。

错误是：

```
<h2>HTTP ERROR 404</h2>
<p>Problem accessing /test/fixtures/fix.html. Reason:
<pre>NOT_FOUND</pre></p><hr /><i><small>Powered by Jetty://</small></i><br/> 
```

我已经尝试过 1.3.5 和 1.3.4.b 版本。结果相同。感谢任何可以帮助解决这个谜团的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:57:30.150

[我建议尝试 1.3.3d 版本 - 由于该版本修复了相对路径计算](http://code.google.com/p/js-test-driver/issues/detail?id=223)中的错误，我们不得不继续使用该版本，但似乎已作为 1.3.4 的回归重新引入，并且仍然是1.3.5 的问题。

# c - 是否可以在混杂模式下嗅探时注入原始套接字？

> ID：13104545
> 
> 赞同：0
> 
> 时间：2012-10-27T21:59:06.780
> 
> 标签：c, linux, network-programming, libpcap, packet-sniffers

我正在编写一个程序，它使用 libpcap 嗅探流量，只是取出数据包以修改并使用原始套接字重新注入网络。我知道对于无线网卡的正常混杂模式操作，您不应该能够与网络交互，但是可以使用原始套接字来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:18:11.887

简短的回答是肯定的。下面是较长的...

> 我知道对于无线网卡的正常混杂模式操作，您不应该能够与网络交互

我不确定您从哪里获得这些知识，但上述陈述是错误的。混杂模式不会限制您可以做什么以及如何与网络交互。默认情况下，网络接口卡只是试图减少它们传递给主机的数据量以提高效率。例如，如果目标 MAC 地址与接收媒体访问控制器的地址不匹配，则 NIC 不会将以太网帧传递给主机。混杂模式唯一要做的就是告诉设备将它获得的所有内容传递给主机，无论该帧是否为主机寻址。换句话说，无论你在正常操作模式下对 NIC 做什么，在混杂模式下你仍然可以做。另外，NIC 不再为您过滤任何内容，

> 但是可以用原始套接字来做吗？

是的，有可能。只要您有足够的权限，您就可以使用“原始”套接字 API 从用户空间发送和接收以太网帧。设备是否处于混杂模式没有任何区别。

另请注意，如今的路由器非常智能，即使您将主机的 NIC 置于混杂模式，它们也不会将数据包转发到您的主机。因此，在正确的网络中，您不太可能收到实际上不适合您的主机的任何内容，并且混杂模式不会产生任何影响。

如果这有帮助，[这里](https://github.com/posedge/eth_board/blob/master/sw/eth_board.c)有一个简单的例子，它与通过以太网连接到 PC 的 FPGA 板交换自定义数据包。它使用原始套接字 API 并在 Linux 上的用户空间中运行。

# javascript - 从 Backbone.js 模型中完全删除属性

> ID：13104548
> 
> 赞同：11
> 
> 时间：2012-10-27T21:59:56.290
> 
> 标签：javascript, backbone.js, backbone-model

我正在尝试从骨干模型中完全删除一个属性。该模型被发送到一个不太灵活的 API，如果我在应该发送的属性上发送其他属性，它会中断，所以我需要删除一个属性，使其不再存在。

我`model.unset`从[这个问题](https://stackoverflow.com/questions/10605730/remove-an-attribute-from-a-backbone-js-model)尝试过，但是当我打印出对象时，我试图删除的属性仍然列出，只是值为 null。

我需要该属性完全消失。

**我的基本结构是：**

```
model.unset("AttrName", "silent"); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-27T22:06:41.840

问题是您`unset`错误地使用了参数。“静音”应该是[选项哈希](http://backbonejs.org/#Model-unset)的一部分，而不是单独的参数。这有效：

```
model.unset("AttrName", { silent: true }); 
```

* * *

[从带注释的来源](http://backbonejs.org/docs/backbone.html)可以看出奇怪行为的原因：

```
unset: function(attr, options) {
  (options || (options = {})).unset = true;
  return this.set(attr, null, options);
}, 
```

该`unset`方法假定其`options`参数是一个对象，并尝试创建或修改它，然后将其传递给该`set`方法。如果您改为传递字符串，则代码的无意效果是将属性设置为 null，而不是取消设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:03:09.227

覆盖模型的 toJSON 方法，只包含您希望发送的属性。

**更新**：（添加代码示例）

扩展模型时，添加一个 toJSON 函数并返回一个具有所需属性的对象：

```
{
    toJSON : function() {
        return {
            name: this.get('name'),
            age: this.get('age'),
            phoneNumber: this.get('phoneNumber')
        };
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T22:09:45.743

您可以尝试仅使用您想要的属性构建一个对象（并发送它）：

```
serializeModel: function() {
  return {
    email: this.$("#email").val(),
    password: this.$("#password").val()
  }
} 
```

# hibernate - 处女座 Hibernate ClassNotFound

> ID：13104553
> 
> 赞同：0
> 
> 时间：2012-10-27T22:00:51.130
> 
> 标签：hibernate, osgi, classnotfound

我正在尝试将示例应用程序部署到 virgo（我将第三方 jar 文件放在存储库/usr 上）。经过长时间解决项目依赖项后，我得到了“org.springframework.orm.hibernate3.LocalSessionFactoryBean”的ClassNotFound，所以我在清单上添加了spring-orm依赖项。问题得到了解决，但这次我得到了“org/hibernate/cfg/Configuration”的 NoClassDefFound。所以我在清单中的捆绑包上添加了“com.springsource.org.hibernate.core”，但没有任何反应：... 原因：java.lang.NoClassDefFoundError: org.springframework.orm.hibernate3 的 org/hibernate/cfg/Configuration。在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) 在 sun.LocalSessionFactoryBean.(LocalSessionFactoryBean.java:189)。reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126) ... 省略了 20 个常见框架我不'不知道去哪里寻找可疑的东西！！！请帮帮我：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:07:07.820

您需要 Hibernate 特定的罐子。Spring-ORM jar 只提供与 Hibernate 的集成。您仍然需要来自 Hibernate 的包含这些类的实现的实际 jar。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T11:56:52.790

需要查看hibernate jar包是否提供osgi模式，如果没有，需要使用maven-bundle-plugin插件重新打包。您需要在 META-INF 文件夹中查看 manifest.mf。.mf 文件错误或不足：

```
Manifest-Version: 1.0
Implementation-Vendor: The Redisson Project
Implementation-Title: Redisson/All-in-One
Implementation-Version: 2.10.1
Implementation-Vendor-Id: org.redisson
Built-By: root
Build-Jdk: 1.7.0_55
Specification-Vendor: The Redisson Project
Specification-Title: Redisson/All-in-One
Created-By: Apache Maven 3.5.0
Implementation-URL: http://redisson.org
Specification-Version: 2.10
Main-Class: org.redisson.RedissonNode 
```

在.mf文件中：它所依赖的所有包都在Import-Package下，所有用户都可以使用Export-Package下的包，以上文件不包含这些

# java - jar文件不会执行

> ID：13104558
> 
> 赞同：1
> 
> 时间：2012-10-27T22:01:24.540
> 
> 标签：java, jar

自从我编写任何程序以来已经有好几年了，但是我编写了这个小程序来帮助解决我们在工作中遇到的问题。我做了一些关于如何制作 jar 文件的作业并按照这些步骤操作。当我尝试执行创建的 jar 文件时，什么也没有发生。有人可以指出我正确的方向吗？

**源代码**：

```
import java.io.*;

import javax.swing.JFrame;

import javax.swing.JOptionPane;

public class CardOutput
{
    public static void main(String[] args) throws IOException
    {   

        String inputA;
        JFrame parent = new JFrame();

        boolean truth = true;

        while(truth)
        {
            inputA = JOptionPane.showInputDialog("Please Swipe Card");

            if(inputA.length() == 0)
            {
                truth = false;
            }
            else if(inputA.length() != 14)
            {
                inputA = JOptionPane.showInputDialog("Invalid Card Number \n" + "Please Swipe Card");
            }
            else
            {
                JOptionPane.showMessageDialog(parent, "Your Card Number is " + inputA.substring(4,13));
            }
        }       
   JOptionPane.showMessageDialog(parent, "Program is now ending");  
    System.exit(0);
    }   
} 
```

**清单文件行：** Main-Class：CardOutput.class

**我为形成 .jar 文件而创建的批处理文件：**

```
@ECHO OFF
C:
CD "C:\Users\timmcj\Desktop\CardOutput
"C:\Program Files\Java\JDK1.7.0_09\bin\jar.exe" cvfm CardOutput.jar manifest.txt *.class
PAUSE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:04:00.037

将 .class 从您的主文件中删除。只需使用类名，它应该运行。

java -jar yourjar.jar

# parsing - 解析，阅读和词法分析有什么区别？

> ID：13104561
> 
> 赞同：0
> 
> 时间：2012-10-27T22:02:06.037
> 
> 标签：parsing, eval, lex

这3个到底有什么区别？他们的目标不是将字符串转换为数据结构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:10:16.613

解析，或者更正式地说，句法分析，是分析由一系列标记组成的文本的过程。

词法分析或词法分析是将字符序列转换为标记序列的过程。

读取是从源获取数据并将其放入易失性存储器进行处理的过程。

# google-cloud-datastore - 无法在 GAE 数据存储中存储 java.util.Calendar 对象

> ID：13104562
> 
> 赞同：1
> 
> 时间：2012-10-27T22:02:16.250
> 
> 标签：google-cloud-datastore

我有一个使用 java.util.Calendar 类的 GAE 应用程序。我的应用程序在一天过去时更改了一些内部数据/目前我想测试应用程序，所以我有一个假的日期数据成员，我手动设置和修改。我想将其保存到数据存储区。在尝试保存它大约 2 小时后，我决定将它包装在一个名为 FakeDate 的类中。它看起来像这样：

```
@PersistenceCapable
public class FakeDate {

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Serialized
private Calendar _fakeCurrentDate; 
```

唯一的问题是，_fakeCurrentDate 的数据没有保存。起初我将日历日期设置为 8/8/2012 当我打电话时

```
pm.makePersistent(_currentDate); 
```

看起来一切都很好，但是当我打电话时

```
 PersistenceManager pm = PMF.get().getPersistenceManager();
    Query q = pm.newQuery(FakeDate.class);
    try {
        @SuppressWarnings("unchecked")
        List<FakeDate> list = (List<FakeDate>) q.execute();
        for (FakeDate f:list){
            System.out.println(f.getDayOfMonth());
            System.out.println(f.getMonth());
            System.out.println(f.getYear());
        }
    } finally {
        q.closeAll();
        pm.close();
    } 
```

我得到的 FakeDate 实例包含日期为 27/9/2012 的 Calendar 实例。这是我调用 Calendar.getInstance() 时得到的默认日期

看起来我错过了一些很容易的东西。我是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:35:42.657

`Calendar`class 不是数据存储模型支持的字段类型。有关受支持类型的详细信息，请查看[Properties 和 Value Types](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)。如果您需要在模型中有一个 Date 字段，请将其声明为`java.util.Date`并使用`Calendar`.

希望这可以帮助！

# javascript - jQuery重复出现替换innerHTML

> ID：13104563
> 
> 赞同：1
> 
> 时间：2012-10-27T22:02:21.287
> 
> 标签：javascript, jquery

我有基于 id 属性的工作脚本。由于我有很多问题，决定使用 jQuery 的类属性。但是我使用以下脚本没有成功（我不擅长编写脚本:(）

如果您的专家能建议我更好的方法，那就太好了。我有 300 多个单词可以用符号替换（大约 200 页）。

多谢。

**HTML 代码**

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>

 <input type="submit" name="replace" id="replace" value="Replace" />
 <div class="my_div">Default content</div>
 <div class="my_div">Default content 2</div> 
```

**脚本**

```
$('#replace').click(function() {
     var str=document.getElementByClassName("my_div").innerHTML;
     var n=str.replace("default","somesymbol");
     var n=str.replace("content","somesymbol");
     var n=str.replace("im","somesymbol");
     document.getElementByClassName("my_div").innerHTML=n;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:05:36.437

改用这样的东西：

```
$('#replace').click(function() {
    $('.my_div').each(function() {
        var $this = $(this);
        var html = $this.html();

        $this.html(html.replace(/default|content|im/gi, 'somesymbol'));
    });
}​);​ 
```

`getElementByClassName`应该是，它返回一个你必须迭代的。`getElement**s**ByClassName``NodeList`

此外，如果您不需要在替换中保留格式（如`foo <b>bar</b>`），请使用`.text()`而不是`.html()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:32:49.153

如果您使用函数作为参数，则使用 jQuery`html()`方法，它将遍历具有类名的整个元素集合，自动让您访问现有的 html 并在您返回 html 字符串时替换它

```
$('#replace').click(function() {
    $('.my_div').html(function( idx, oldHtml){
    /* if you need access to other properties or attributes of element -"this" or "$(this)" within this function*/
           return oldHtml.replace(/default|content|im/gi, 'somesymbol');
    });
}); 
```

参考：[http ://api.jquery.com/html/](http://api.jquery.com/html/)

向下看 API 页面到 jQuery 版本 1.4 中添加的部分

# visual-studio-2010 - ORA-00911: 无效字符，Visual Studio 2010 使用 aspxgridview

> ID：13104566
> 
> 赞同：0
> 
> 时间：2012-10-27T22:02:41.383
> 
> 标签：visual-studio-2010, oracle, gridview

当您尝试在我的 oracle 数据库中插入一行时，我遇到了这个错误。我使用 aspxgridview 提供的删除、插入功能。

我听说它可能是一个“;” 在 sql 指令的末尾但没有“;” 在这个 sql 语句中，这是带有插入、更新等 sql 指令的代码......

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
           ConflictDetection="CompareAllValues" 
           ConnectionString="<%$ ConnectionStrings:ConnectionStringora %>" 
           DeleteCommand="DELETE FROM &quot;MAQUINA&quot; WHERE &quot;PATENTE&quot; = ? AND &quot;MARCA&quot; = ? AND &quot;MODELO&quot; = ? AND &quot;AÑO&quot; = ? AND &quot;FECHA_ADQUISICION&quot; = ? AND &quot;ESTADO&quot; = ? AND &quot;IDCONDUCTOR&quot; = ? AND &quot;IDMANTENCION&quot; = ?" 
           InsertCommand="INSERT INTO &quot;MAQUINA&quot; (&quot;PATENTE&quot;, &quot;MARCA&quot;, &quot;MODELO&quot;, &quot;AÑO&quot;, &quot;FECHA_ADQUISICION&quot;, &quot;ESTADO&quot;, &quot;IDCONDUCTOR&quot;, &quot;IDMANTENCION&quot;) VALUES (?, ?, ?, ?, ?, ?, ?, ?)" 
           OldValuesParameterFormatString="original_{0}" 
           ProviderName="<%$ ConnectionStrings:ConnectionStringora.ProviderName %>" 
           SelectCommand="SELECT &quot;PATENTE&quot;, &quot;MARCA&quot;, &quot;MODELO&quot;, &quot;AÑO&quot;, &quot;FECHA_ADQUISICION&quot;, &quot;ESTADO&quot;, &quot;IDCONDUCTOR&quot;, &quot;IDMANTENCION&quot; FROM &quot;MAQUINA&quot;" 
           UpdateCommand="UPDATE &quot;MAQUINA&quot; SET &quot;MARCA&quot; = ?, &quot;MODELO&quot; = ?, &quot;AÑO&quot; = ?, &quot;FECHA_ADQUISICION&quot; = ?, &quot;ESTADO&quot; = ?, &quot;IDCONDUCTOR&quot; = ?, &quot;IDMANTENCION&quot; = ? WHERE &quot;PATENTE&quot; = ? AND &quot;MARCA&quot; = ? AND &quot;MODELO&quot; = ? AND &quot;AÑO&quot; = ? AND &quot;FECHA_ADQUISICION&quot; = ? AND &quot;ESTADO&quot; = ? AND &quot;IDCONDUCTOR&quot; = ? AND &quot;IDMANTENCION&quot; = ?"> 
```

我认为可能导致此问题的另一件事是日期字段（FECHA_ADQUISICION）.. aspxgridview 使用格式 dd-mm-yyy，我不知道 oracle 是否接受，因为当我尝试从“服务器”插入时explorer”（您可以查看数据库的那部分）我的日期有问题，我收到“ORA-01843 not a valid month”错误..所以我无法从那里插入。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:06:10.597

`&quot;`是你的问题。将其替换为单引号 ( `'`) 即可。

**更新：不要对你的 sql 查询进行硬编码，而是从后面的代码中传递它。它会起作用的。**

# events - epoll/libevent/libev 可以和 UDT 一起工作吗？

> ID：13104567
> 
> 赞同：0
> 
> 时间：2012-10-27T22:02:43.080
> 
> 标签：events, epoll, libevent, udp-data-transfer, libev

我正在构建一个需要处理数万个活动套接字的高并发服务器。我最初使用 epoll 来构建一个基于事件的服务器，它在中等规模（数千个活动套接字）下运行良好。但是当我的并发超过 10,000 个套接字时，它似乎变得不稳定。所以我正在考虑 libevent（或 libev），因为它是一个成熟的项目，并声称能够“处理数万个活动套接字”。

我也在考虑使用 UDT，因为它是一个“可靠的 UDP”，并且由于开销和内存使用，我开始遇到 TCP 问题。所以一个很自然的想法是使用 libevent 作为我的事件框架工作，使用 UDT 作为传输协议。我知道 UDT 提供了自己的一组 epoll 操作。这是否意味着它不能与常规的 linux epoll 一起使用？如果是这样，它将无法与 libevent 或 libev 一起使用，因为它们是基于 Linux epoll 构建的。

有没有人在 UDT 和 epoll / libevent / libev 上工作过？UDT 可以与它​​们中的任何一个一起使用吗？

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:55:49.587

UDT 公开了一个 epoll API，可用于将协议与 epoll 一起使用。有关详细信息，请参阅[http://udt.sourceforge.net/udt4/doc/epoll.htm](http://udt.sourceforge.net/udt4/doc/epoll.htm)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T18:47:49.613

经过一番研究，我发现 UDT 套接字不是文件描述符，因此无法使用 epoll 处理。

# spring - FailoverTransport 多次实例化

> ID：13104571
> 
> 赞同：0
> 
> 时间：2012-10-27T22:03:09.527
> 
> 标签：spring, jms, websphere, activemq, spring-jms

我正在使用 spring-jms 3.0.5 版和 activeMQ 4.5.2 版。当部署到 Tomcat 时，一切似乎都正常工作。当部署到 WebSphere 时，似乎有四个单独的故障转移传输被实例化，并且我的 MessageListener 实现对于发布到我的主题的每条消息都会收到四次相同的消息。

这是我的配置：

```
<bean id="activeMQConnectionFactory"
      class="org.apache.activemq.ActiveMQConnectionFactory">
       <property name="brokerURL" value="failover://(tcp://server.com:12345,tcp://server2.com:12345)?randomize=false/>
</bean>

<bean id="topic" class="org.apache.activemq.command.ActiveMQTopic">
    <constructor-arg value="TOPIC.ONE" />
</bean>

<bean id="jmsTemplate" class="org.sprinframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="defaultDestination" ref="topic" />
</bean>

<bean name="topicListener" class="com.foo.TopicListener" />

<jms:listener-container connection-factory="connectionFactory" cache="auto" destination-type="topic">
    <jms:listener destination="topic" ref="topicListener" />
</jms:listener-container> 
```

这是我的消息监听器：

```
import javax.jms.MessageListener;
import org.springframework.stereotype.Component;

@Component
public class TopicListener implements MessageListener {

    public void onMessage(Message msg) {
        log(msg);
    }

} 
```

这是我在日志中看到的（仅在 WebSphere 上）

```
11:59:59,764 () INFO (Thread-50) (DefaultLifecycleProcessor) Starting beans in phase 214783647
12:00:00,140 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345
12:00:00,253 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345
12:00:00,342 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345
12:00:00,423 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345
12:00:00,492 () INFO (Thread-50) (ContextLoader) Root WebApplicationContext: initialization completed in 100239 ms 
```

然后，一旦我发布到该主题，我就会看到：

```
12:01:00,250 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#0-1) (TopicListener) logging message
12:01:00,251 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#3-1) (TopicListener) logging message
12:01:00,251 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#2-1) (TopicListener) logging message
12:01:00,275 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#1-1) (TopicListener) logging message 
```

我已经看到一些迹象表明，如果我设置了，可能会出现这种行为`concurrentConsumers > 1`，但据我所知，我没有。如何确保我只收到一次这些消息？

更新：

通过调试登录，我还看到：

```
2012-10-28 12:00:00,000 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#0' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer]
2012-10-28 12:00:00,011 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#1' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer]
2012-10-28 12:00:00,021 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#2' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer]
2012-10-28 12:00:00,029 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#3' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer] 
```

为什么 Spring 要创建四个这样的 bean？

# erlang - 来自控制台的 Erlang pid

> ID：13104573
> 
> 赞同：1
> 
> 时间：2012-10-27T22:03:34.443
> 
> 标签：erlang

我看到消息：

[https://stackoverflow.com/a/4837832/1236509](https://stackoverflow.com/a/4837832/1236509)

与主管：

```
-module(root_sup).
-behaviour(supervisor).
-export([start_link/0]).
-export([init/1]).

start_link() ->
     {ok, Pid} = supervisor:start_link({local, ?MODULE}, 
          ?MODULE, []),
     erlang:unlink(Pid),
     {ok, Pid}.

init(_Args) ->
     RestartStrategy = {simple_one_for_one, 10, 60},
     ChildSpec = {ch1, {ch1, start_link, []},
          permanent, brutal_kill, worker, [ch1]},
     Children = [ChildSpec],
     {ok, {RestartStrategy, Children}}. 
```

在控制台人员调用中：

```
{ok, ChildPid1} = root_sup:start_link(). 
```

当子 pid 更改时，如何`ChildPid1`获得新的 pid 以便始终可以使用`ChildPid1`正确的 pid？需要链接到创建孩子的主管的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:32:34.423

我不会尝试通过 Pid 访问子进程，而是在一个名称下[注册/2](http://www.erlang.org/doc/man/erlang.html#register-2)子进程，因此无论实际的 Pid 是什么都可以访问它。

使用[您引用的答案](https://stackoverflow.com/a/4837832/1236509)中的代码，一种简单的方法是添加`register(ch1, self()),`到孩子的 init 过程中。这将为`ch1.erl`：

```
init(_Args) ->
     io:format("ch1 has started (~w)~n", [self()]),
     % register a name to this process
     register(child, self()),
     {ok, ch1State}. 
```

这会将孩子的 pid 注册`self()`到 name`child` 我们可以看到它的工作原理：

```
1> root_sup:start_link().
{ok,<0.34.0>}
2> supervisor:start_child(root_sup, []).
ch1 has started (<0.36.0>)
{ok,<0.36.0>}
3> lists:filter(fun(X) -> X == child end, registered()).
[child] 
```

我们确实有一个以`child`.

```
4> gen_server:cast(child, calc).
result 2+2=4 
```

它是从`ch1.erl`.

让我们通过调用错误代码来使这个过程崩溃：

```
5> gen_server:cast(child, calcbad).
result 1/0
ok
ch1 has started (<0.41.0>)
6> 
=ERROR REPORT==== 28-Oct-2012::01:31:30 ===
** Generic server <0.36.0> terminating 
** Last message in was {'$gen_cast',calcbad}
** When Server state == ch1State
** Reason for termination == 
** {'function not exported',
       [{ch1,terminate,
            [{badarith,
                 [{ch1,handle_cast,2,[{file,"ch1.erl"},{line,27}]},
                  {gen_server,handle_msg,5,
                      [{file,"gen_server.erl"},{line,607}]},
                  {proc_lib,init_p_do_apply,3,
                      [{file,"proc_lib.erl"},{line,227}]}]},
             ch1State],
            []},
        {gen_server,terminate,6,[{file,"gen_server.erl"},{line,722}]},
        {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]} 
```

于是孩子，进程`<0.36.0>`崩溃了，一个新的孩子`<0.41.0>`开始承担死者的职责`<0.36.0>`。由于这个新进程以相同的名称注册，`calc`将再次工作：

```
6> gen_server:cast(child, calc).   
result 2+2=4
ok 
```

请注意，这并不能保证`gen_server:cast/2`s 总是导致相应代码的执行，因为子进程可能刚刚被杀死，而新进程仍未启动（实际上已注册）。

您可能想参考[Joe Armstrong 撰写的优秀 Programming Erlang: Software for a Concurrent World，](http://pragprog.com/book/jaerlang/programming-erlang "前卫")以了解有关进程注册、监督员、OTP 等的更多详细信息。许多细节也可以在[OTP 的在线文档中](http://www.erlang.org/doc/design_principles/des_princ.html)找到。

# java - GlassFish / Ubuntu 消息传递

> ID：13104581
> 
> 赞同：2
> 
> 时间：2012-10-27T22:04:34.410
> 
> 标签：java, android, jms, messaging, ibm-mq

我想知道（我不确定我在这里需要的架构）是否可以使用 jms 在我家桌面上的 ubuntu 安装上运行 glassfish，然后使用基本 java 应用程序的组合（使用 spring/jms ) 和基本的 android 应用程序运行消息传递服务。例如，java 应用程序可以发布消息并且 android 设备使用它们？这可能是一个荒谬的问题，我可能错过了这一切是如何运作的，但如果可能的话，我想明天尝试一下，尽管如果它不起作用，我宁愿不尝试！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:47:53.083

查看[*在 IBM Worklight Mobile 应用程序中使用 MQ 遥测传输协议*](https://www.ibm.com/support/pages/node/312263)。连接到 WebSphere MQ 的设备中的这种 MQTT 组合允许在设备和 JMS 应用程序（或任何其他 WMQ API 平台，如 C、C#、Java、XMS、REXX、Perl、COBOL 等）之间无缝交换发布/订阅。 ）。

[在 Android 上进行的](http://stephendnicholas.com/archives/1217/)一些基准测试表明，与 HTTPS 相比，MQTT 的吞吐量高达 93 倍，电池使用量降低了 10 倍。这可能就是[Facebook Messenger 使用它](https://www.facebook.com/notes/facebook-engineering/building-facebook-messenger/10150259350998920)的原因。

要了解有关 MQTT 的更多信息，请访问[http://mqtt.org](https://mqtt.org/)。对于开源 MQTT 代理，请查看[http://mosquitto.org](https://web.archive.org/web/20210211165705/http://www.mosquitto.org/)。您可以将客户端设备指向几个公开可用且免费的 MQTT 代理，并且可以使用[WebSphere MQ 试用版](https://www.ibm.com/cloud/mq)来测试 JMS 互操作性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:36:15.920

您可以在 Ubuntu 上安装 ActiveMQ，但很难让客户端在 Android 上运行，因为它不受支持。

另一种选择是 RabbitMQ，它在 Android 上支持 AMQP 稍微好一点。

我真的想将消息发布到 Android 设备我建议你看看 Urban Airship。他们有很好的支持推送通知的平台。Google GCM 是推送通知的另一种选择。两者都有很好的记录。

另一种方法是在 Ubuntu 和 android 设备之间使用 REST/JSON 接口，但当然，它不支持发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T22:25:37.637

我自己从未尝试过，但您当然可以使用像[Gozirra](http://www.germane-software.com/software/Java/Gozirra/)这样的 STOMP 客户端（仅客户端二进制文件只有十几个 KB）并相应地配置消息代理（我找到[了本指南](http://docs.oracle.com/cd/E18930_01/html/821-2438/gjdkc.html)，不确定它是否适合您当前的设置）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:52:40.503

RSMB 是 160KB 的简单易用的免费 MQTT 提供程序，适用于 Linux、Mac、Windows。 [https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=d5bedadd-e46f-4c97-af89-22d65ffee070](https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=d5bedadd-e46f-4c97-af89-22d65ffee070)

您可以在 glassfish 和 android 上使用 Eclipse Paho 的 java 客户端。如果您想在 HTML5/javascript 中创建您的移动应用程序，或者下载适用于 Android 的 Cordova phonegap 插件。

# c# - C# 替换空格

> ID：13104582
> 
> 赞同：-1
> 
> 时间：2012-10-27T22:04:45.753
> 
> 标签：c#

这是我用于进行 piglatin 翻译的程序代码的一部分，因此我为我的句子创建了一个标点符号，但是当我编译它时，它会显示句子中的额外位置。所以我这样做：

```
private bool isPunctuation(string noo)
   {
      int pos = 1;
      string punctuation = ",.!?";
      pos = punctuation.IndexOf(' ');

      while (pos >= 0)
      {
          pos = punctuation.IndexOf(' ', pos + 1);
          //return false;
      }
      return true;
  } 
```

它仍然显示额外的空间。我需要在此代码中进行哪些更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T22:07:27.263

目前尚不清楚您如何尝试*使用*您的方法，但是：

*   您的方法从不使用其输入 ( `noo`)
*   这段代码：

    ```
    string punctuation = ",.!?";
    pos = punctuation.IndexOf(' '); 
    ```

    ... 将始终保留`pos`为 -1，因为`",.!?"`不包含空格

*   您的方法*只能*通过异常或返回退出`true`；`false`由于该`return false;`语句已被注释掉，因此它永远无法返回。（如果没有注释，你会得到一个非常奇怪的`while`循环......）你打算如何使用它？

从根本上说，在我看来，你需要退后一步。想想你为什么想要这样的方法（目前还不清楚它与问题标题的*替换*部分有什么关系）以及它应该如何表现。

# asp.net-mvc-3 - mvc3 - 将焦点设置为从控制器控制

> ID：13104584
> 
> 赞同：0
> 
> 时间：2012-10-27T22:04:57.313
> 
> 标签：asp.net-mvc-3

调用视图时，我可以将焦点从控制器设置到控件吗？

（我了解典型的最佳实践是在页面加载时使用 jQuery 将焦点设置为控件。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:17:06.107

关于 Web 开发，您必须了解的一件事是，您可以在服务器上拥有世界上所有的技术，但最终，这些技术必须生成标准（或通过它的标准）Html、CSS 和 JavaScript。

这意味着没有什么特殊的魔法可以在服务器上自动在客户端上做事。一些框架可以自动生成代码来为你做这件事，但最终还是必须作为标准的 html/css/js 来完成。

MVC 只呈现标准的纯 HTML。Webforms 会为您做很多事情，但最终 Webforms 也必须生成标准的 HTML。它通过自动生成包含在页面中的 javacript 来实现这一点，在加载时设置焦点。

MVC 不会为您做任何这些事情，因此您基本上必须做同样的事情，但您必须编写它。使用一些简单的jquery相对简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T22:16:16.730

控制器的工作（其中之一）是建立一个视图模型，它为视图提供足够的信息以正确呈现。换句话说，控制器和视图应该只松散耦合。

这是一种方法。尽管可以更优雅地完成，但这有点解耦。您仍然需要 JavaScript 来执行客户端脚本，但脚本是根据视图模型中的值生成的。

**控制器**

```
public ActionResult Foo(){

   var model = new MyViewModel();
   model.SelectedItem = "FirstName";

   return View( model );
} 
```

**看法**

```
@model MyViewModel

@Html.TextBoxFor( o => o.FirstName )

@if( Model.SelectedItem != default( string ) ){
    <script>$("#@(Model.SelectedItem)").focus();</script>
} 
```

# macos - 如何让标准输出进入 Console.app

> ID：13104588
> 
> 赞同：18
> 
> 时间：2012-10-27T22:05:38.200
> 
> 标签：macos, stdout

早些时候，我可以从 Console.app 中的应用程序中读取所有 stdout/stderr 数据。一段时间以来，情况不再如此（但 NSLog 数据仍然存在）。我现在10.8。

2010 年有一个[较早的类似问题](https://stackoverflow.com/questions/2196302/where-is-stdout-for-a-mac-app)似乎不再是最新的。

在 SU 上，还有一个[类似的问题](https://superuser.com/questions/401892/console-log-options-doesnt-appear-in-system-log-queries-for-mac-10-7-console)尚未得到解答。

是否已更改，即不应再记录标准输出？或者我的系统是否有问题（从旧的 SU 问题来看，听起来可能是这种情况——尽管没有帮助）？

我可以以某种方式将其改回来吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T09:29:50.937

在 Mountain Lion 之前，由 管理的所有进程（`launchd`包括常规应用程序）都将其 stdout 和 stderr 文件描述符转发到系统日志。在 Mountain Lion 及更高版本中，stdout 和 stderr 无法用于`launchd`托管应用程序。只有明确发送到系统日志的消息才会在那里结束。

如果您正在编写一个应用程序并希望在控制台中显示一些输出，那么请采用基于[`syslog(3)`](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man3/syslog.3.html)或[`asl(3)`](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man3/asl.3.html)替代构建的 API。`NSLog`就是这样一种 API，它还具有记录到 stderr 的优势，因此无论您如何启动应用程序，您都可以轻松查看输出。如果您想要该功能但想直接使用`asl`or `syslog`，那么您需要分别查看 to`ASL_OPT_STDERR`和`asl_open`to`LOG_PERROR`选项`openlog`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T21:26:07.003

如果您有一个旧应用程序并想查看标准输出或标准错误，请从终端打开该应用程序。您可以绕到可执行文件并从命令行打开它，就像在正常的旧世界中一样：输入程序名称。然后消息将出现在终端上。

这并不是对任何其他更好的建议的否定。这只是一种在不改变（旧）程序的情况下获得输出的方法。

# ios - 如何将下载的内容添加到 IOS 应用程序？

> ID：13104589
> 
> 赞同：1
> 
> 时间：2012-10-27T22:05:41.047
> 
> 标签：ios, xcode, in-app-purchase, plist

我正在尝试制作一个 iPhone 应用程序，用户可以在其中购买和下载新内容（声音文件）。我已经使用 Urban Airship 的 API 来设置“应用程序内商店”，因此购买和下载新文件部分已涵盖并且似乎可以正常工作 - 但我很难弄清楚如何将新内容添加到我的应用程序，以便用户可以访问它..

该应用程序首先带有 3 个声音文件，我正在使用 Plist 来显示和播放这些文件 - 根据我的 plist 显示在表格视图中。在我简单的想法中，我在想我需要将新内容添加到我现有的 plist 中，或者我应该让我的 tableview 显示来自多个 plist 的内容，这样每次新下载都可以包含一个 plist，其中包含有关下载文件的信息。

这是我第一次尝试制作应用程序，我完全迷失了！如何将下载的内容添加到我的应用程序？我应该做其他事情而不是 plist 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:04:41.997

您可以将初始 plist 从不可写的应用程序包中复制到应用程序的 Documents 目录，您可以在其中根据需要将信息写入和附加到 plist。然后只需从那个 plist 中填充您的表格。

# c# - 如何在不丢失数据的情况下重命名 Entity Framework 5 Code First 迁移中的数据库列？

> ID：13104592
> 
> 赞同：76
> 
> 时间：2012-10-27T22:05:58.007
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我使用 EF 5.0 Code First 迁移成功运行了默认的 ASP.NET MVC 4 模板。但是，当我更新模型属性名称时，EF 5.0 会删除相应的表列数据。

是否可以在不以自动方式删除数据的情况下重命名表列？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-11-29T00:41:26.487

手动编辑迁移的 Up 和 Down 方法以使用它自动为您生成的`RenameColumn`替换方法。`AddColumn``DropColumn`

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-12-23T23:03:51.997

[如前所述](https://stackoverflow.com/a/13616968/1476885)，将自动生成的`AddColumn`and替换为.`DropColumn``RenameColumn`

例子：

```
namespace MyProject.Model.Migrations
{
    using System;
    using System.Data.Entity.Migrations;

    public partial class RenameMyColumn : DbMigration
    {
        public override void Up()
        {
            // Remove the following auto-generated lines
            AddColumn("dbo.MyTable", "NewColumn", c => c.String(nullable: false, maxLength: 50));
            DropColumn("dbo.MyTable", "OldColumn");

            // Add this line
            RenameColumn("dbo.MyTable", "OldColumn", "NewColumn");
        }

        public override void Down()
        {
            // Remove the following auto-generated lines
            AddColumn("dbo.MyTable", "OldColumn", c => c.String(nullable: false, maxLength: 50));
            DropColumn("dbo.MyTable", "NewColumn");

            // Add this line
            RenameColumn("dbo.MyTable", "NewColumn", "OldColumn");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-01-19T19:31:36.873

如果您这样做，您*可以*让迁移呼叫您：`RenameColumn`

```
[Column("NewName")]
public string OldName { get; set; } 
```

这是生成的迁移：

```
 public override void Up()
    {
        RenameColumn(table: "Schema.MyTable", name: "OldName", newName: "NewName");
    }

    public override void Down()
    {
        RenameColumn(table: "Schema.MyTable", name: "NewName", newName: "OldName");
    } 
```

如果您希望您的属性和 DB 列同名，您可以稍后重命名该属性并删除该`Column`属性。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-17T05:07:53.683

您有 2 个步骤来重命名代码第一次迁移中的列

1.  第一步，在更改的列上方添加 ColumnAttribute，然后使用 update-database 命令

> [Column("Content")]
> public string Description { set; 得到; }

2.  第二步，

    *   add-migration yournamechange 命令以创建分部类 DbMigration。

    *   在此处添加 up 和 down 方法

RenameColumn("yourDatabase","name","newName");

```
public override void Up()
  {
        RenameColumn("dbo.your_database", "oldColumn",          
       "newColumn");
  }

public override void Down()
  {
        RenameColumn("dbo.your_database", "newColumn", 
        "oldColumn");
  } 
```

因为当您连接时，您的数据库和模型类将通过数据库中的 name_column 和上面模型中的属性方法中的 name_type 进行通信。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-27T22:33:08.310

现在，这个答案基于我对 EF4.3 的了解，所以我希望迁移在 EF5 中的工作方式大致相同 :) 创建迁移后，您应该能够在 Up 和 Down 方法中添加代码，介于旧属性的删除和新属性的创建。此代码应将属性数据移动到正确的方向。我已经用 SQL() 方法解决了这个问题，您可以在其中输入原始 SQL 来执行数据移动。

在迁移的 Up 方法中：

```
SQL("update [TheTable] set [NewColumn] = [OldColumn]"); 
```

在 Down() 方法中：

```
SQL("update [TheTable] set [OldColumn] = [NewColumn]"); 
```

这种方法的缺点是您可能会将您的代码与您目前正在使用的数据库结合起来（因为您正在编写原始的特定于 DB 的 SQL）。可能还有其他方法可用于数据移动。

此处提供更多信息：[MSDN](http://msdn.microsoft.com/en-US/data/jj591621)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-25T00:19:06.963

添加到乔什·加拉格尔的答案：

在某些地方 sp_RENAME 语法是这样描述的：

```
sp_RENAME 'TableName.[OldColumnName]' , '[NewColumnName]', 'COLUMN' 
```

但是，这实际上将包括新列名中的括号。

DbMigration 的 RenameColumn() 方法可能会做同样的事情，因此在指定新列名时避免使用括号。

此外，如果要重命名的列是主键的一部分，则 Up() 和 Down() 中的自动生成命令包括 DropPrimaryKey() 和 AddPrimaryKey()。使用 RenameColumn() 时不需要这些。如果需要，底层 sp_RENAME 会自动更新主键。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-07-14T08:31:01.837

在**Entity Framework Core 3.1.1**中，如果您需要重命名列 - 添加迁移如下

```
migrationBuilder.RenameColumn(
                                name: "oldname",
                                table: "tablename",
                                newName: "newname",
                                schema: "schema"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-29T16:26:52.513

就像 +Josh Gallagher 所说，您可以使用 up() 来执行以下操作：

```
public override void Up()
        {

            RenameColumn("dbo.atable","oldname","newname");
            AddColumn("dbo.anothertable", "columname", c => c.String(maxLength: 250));

        } 
```

我发现[这](http://www.asp.net/mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)对开始迁移很有帮助；）

# javascript - 支持历史记录的单页 Web 应用程序中的表单字段：缓存用户输入

> ID：13104595
> 
> 赞同：0
> 
> 时间：2012-10-27T22:06:39.067
> 
> 标签：javascript, html, web, browser-history, singlepage

在我看来，一个好的单页 Web 应用程序应该尽可能接近（并且明智）传统的 Web 应用程序，后者会在每个用户操作上（重新）加载整个页面。特别是，单页 Web 应用程序应支持浏览器历史记录，包括后退和前进按钮。

大多数单页 Web 应用程序的框架都支持浏览器历史记录。但它们似乎没有模仿一件关键的事情：当我在传统 Web 应用程序的第 1 页并填写表单字段时，导航到应用程序的第 2 页，然后单击返回按钮，浏览器将恢复我的输入。

对于单页 Web 应用程序，通常会发生以下两种情况之一：第 1 页的表单字段仍然是第 2 页上的 DOM（但隐藏）的一部分（或至少是 Javascript 数据结构的一部分），因此导航返回后，应用程序可能会再次向我显示填写的表单字段，或者每次我访问第 1 页时都会重新创建表单字段（通过直接导航或按返回按钮）。在后一种情况下，我以前的输入不会恢复。

显然前者更好。但是即使这个解决方案也不是完美的：在传统的 Web 应用程序中，每个历史记录条目都有自己的表单字段缓存值，即使历史记录多次包含前面提到的第 1 页。单页应用程序不会在每个应用程序内导航中重新创建表单字段，但是，它只为每个表单字段缓存一个值。

解决这个问题并使单页 Web 应用程序更好的一个想法是将表单字段的值存储在HTML5 历史接口的 pushState 和 replaceState 方法的*data属性中，以便将它们与其他历史信息一起存储。*当然，当前历史条目必须在用户导航离开之前保持更新，因此必须在所有使用 replaceState 更新当前历史条目的表单控件上使用*onchange事件处理程序。*

现在我的问题是对于上述问题是否有更好的解决方案，以及是否有任何单页 Web 应用程序框架/库来处理它。

# jquery - 在单击事件不起作用时返回 false

> ID：13104597
> 
> 赞同：-1
> 
> 时间：2012-10-27T22:06:52.060
> 
> 标签：jquery, click, return, anchor, preventdefault

知道为什么这段代码不起作用吗？我已经花了一个小时搜索和测试一些本应简单可笑的东西！我已经尝试使用 return false 和其他答案中建议的其他解决方案，但页面仍然跳到顶部忽略 return false。怎么了？

```
$('#about a').click(function(e) {
    $('.overlay').fadeTo(300, 0.95);
    $('#about-text').fadeTo(300, 1);
    e.preventDefault();   
}); 
```

**编辑：**这是#about a 的 html。也许脚本中元素的语法有问题？

```
<div class="projects" id="about"><a href="#">About</a></div> 
```

**编辑 2：**经过广泛的搜索、反复试验，我找不到为什么这不起作用。我决定从#about div 中删除#anchor 链接并直接在div 上应用他的功能，这当然可以正常工作，因为它不再有href。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:11:35.580

尝试：

```
$('#about a').click(function(e) {
    e.preventDefault();  
    $('.overlay').fadeTo(300, 0.95);
    $('#about-text').fadeTo(300, 1);
     return false;
}); 
```

将 e.preventDefault() 放在顶部将确保事件停止。您的 fadeTo 函数可能存在运行时错误。

# database - 用于存储文件夹系统的数据库模式的选择

> ID：13104601
> 
> 赞同：32
> 
> 时间：2012-10-27T22:07:14.557
> 
> 标签：database, database-design, sqlite, schema

我正在尝试实现一个基于 SQLite 的数据库，该数据库可以存储具有复杂子结构（预计 50-100K 文件）的 100GB 文件夹的完整结构。数据库的主要目的是快速查询该文件夹的各个方面（总大小、任何文件夹的大小、文件夹的历史记录及其所有内容等）。

但是，我意识到如果我只是创建一个只有 parent_directory 字段的“文件”表，那么如果没有递归查询，就不可能找到一个文件夹中的所有文件，包括它的所有子文件夹*。*我认为这是我想要的代码中最重要的功能之一，因此我为此考虑了两个模式选项，如下图所示。

1.  在模式 1 中，我将所有文件名存储在一个表中，将目录名存储在另一个表中。他们都有一个“parentdir”项目，但也有一个名为“FullPath”的文本（显然文本/blob在sqlite中是相同的）字段，它将保存从根到特定文件/目录的整个路径（如/ etc / abc/def/wow/longpath/test.txt）。我没有假设最大子文件夹限制，所以*理论上*这可能是一个最多允许 30K 个字符的字段。我的想法是，如果我想要属于任何父级的所有文件或目录，我只需在该字段上查询父级的完整路径并获取文件 ID

2.  在模式 2 中，我仅将文件名、文件 ID 和 DirNames、DirID 分别存储在目录和文件表中。但是在名为“祖先”的第三个表中，我为每个文件存储了一组条目，每个目录是它的祖先（因此在上面的示例中，test.txt 将有 5 个条目，指向文件夹的 DirID 等， abc、def、wow 和 longpath）。然后，如果我想要任何文件夹的全部内容，我只需在此表中查找 DirID 并获取所有文件 ID。

我可以看到，在模式 1 中，主要限制可能是可变长度文本列的全文搜索，而在模式 2 中，主要限制是我可能必须为深埋在 100 个目录或其他东西中的文件添加大量条目.

这些解决方案中什么是最好的？有没有我没有想到的更好的解决方案？

![保持快速的两种可能模式允许快速检索复杂目录结构中目录的*所有*后代](../Images/98015fedd9657e86b1030832bf6e7282.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-28T11:42:35.897

1.  您的第一个架构可以正常工作。在`FullPath`列上放置索引时，使用区分大小写的`BETWEEN`运算符进行查询，或者在索引上使用`LIKE`with[`COLLATE NOCASE`](http://www.sqlite.org/lang_createindex.html)或 with [`PRAGMA case_sensitive_like`](http://www.sqlite.org/pragma.html#pragma_case_sensitive_like)。

    请注意，此模式*还*存储所有父级，但 ID（名称）都连接成一个值。

    重命名目录需要更新其所有子树条目，但您提到历史记录，因此旧条目可能应该保持不变。

2.  您的第二个模式本质上是Dan D 评论中提到的[闭包表。](http://dirtsimple.org/2010/11/simplest-way-to-do-tree-based-queries.html)注意不要忘记深度 0 的条目。

    这*将*存储大量数据，但作为 ID，值不应太大。

    （你实际上并不需要`RelationshipID`，是吗？）

3.  存储树的另一种选择是[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)，或类似的嵌套区间模型。嵌套集模型允许通过查询间隔来检索子树，但更新很麻烦。嵌套区间模型使用分数，它不是本机数据类型，因此不能被索引。

我估计第一个替代方案最容易使用。如果查找被正确索引，我也不应该比其他人慢。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T11:43:55.507

我个人最喜欢的是[访问次数](https://stackoverflow.com/questions/7420885/how-do-i-design-a-database-to-store-properties-selecting-attributes-by-synonyms/7423459#7423459)方法，我认为这对您特别有用，因为它可以很容易地对记录及其后代运行聚合查询。

# ruby-on-rails - 应用程序环境中的 Heroku 应用程序 ID

> ID：13104609
> 
> 赞同：3
> 
> 时间：2012-10-27T22:08:34.263
> 
> 标签：ruby-on-rails, heroku

是否可以在应用程序环境中检索应用程序 ID（app123@heroku.com）？

我知道，我可以手动设置一个配置变量，但我认为 Heroku 可能会公开这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:16:58.590

如果您安装了 SendGrid 或 Memcache 之类的附加组件，则可以访问这些附加组件之一的用户名的环境变量。例如，如果您使用 Ruby，您可以登录控制台并输出 ENV['SENDGRID_USERNAME'] 或 ENV['MEMCACHE_USERNAME'] 的值。从那里提取应用程序 ID 很容易。我不确定哪些其他附加组件也会在环境变量中公开该值，但您可以输出整个 ENV 全局哈希并找出可用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:28:20.673

我使用 Jared 的解决方案一年多了。今天我遇到了一个`ENV['SENDGRID_USERNAME']`尚未出现的问题（在部署期间）。

Heroku 建议自己为此设置一个 config var，所以我设置：

```
heroku config:add APP_NAME=<myappname> --app <myappname> 
```

并启用允许您在编译期间使用它们的[实验室功能](https://devcenter.heroku.com/articles/labs-user-env-compile)

```
heroku labs:enable user-env-compile -a myapp 
```

现在我可以在这里找到我的应用名称：

```
ENV["APP_NAME"] # '<myappname>' 
```

所以我不会再遇到这个问题了，尽管我想从 Heroku 获得这种信息集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T13:58:27.997

这直接来自我对 Heroku 的支持票：

> 您无法自己检索该值。这是 SendGrid 支持要求只有 Heroku 支持才能提供给他们的值。

因此，您需要通过[支持票向 Heroku 询问](https://help.heroku.com/?t=true)

### 更新

有点矛盾的是，我发现我可以通过运行以下命令访问我的 Heroku 应用程序 ID：

```
heroku config:get SENDGRID_USERNAME
app171441466@heroku.com 
```

# php - UTF-8 字符集 CentOS PHP

> ID：13104615
> 
> 赞同：0
> 
> 时间：2012-10-27T22:09:55.530
> 
> 标签：php, utf-8, centos

我的 utf-8 有问题，我试图在我的页面上显示俄语字符，但我得到了???? 而不是那些俄罗斯字符。

我尝试像 AddDefaultCharset UTF-8 一样修改 .htaccess 但没有奏效。

我还观察到，当我尝试使用 .html 扩展名（无 php）显示字符时，它工作正常，但使用 php 文件显示 ?????。

**服务器详细信息**

php 5.3.16
centos 发布 6.3

我和这里有类似的问题

[http://remository.com/forum/func,view/id,18483/catid,24/](http://remository.com/forum/func,view/id,18483/catid,24/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T06:16:24.613

在主 php.ini 中添加这些行对我有用

```
default_charset = "utf-8"
mbstring.internal_encoding=utf-8
mbstring.http_output=UTF-8
mbstring.encoding_translation=On
mbstring.func_overload=6 
```

# string - bash 以空格为参数读取字符串

> ID：13104616
> 
> 赞同：-2
> 
> 时间：2012-10-27T22:09:56.530
> 
> 标签：string, bash, parameters, space

我在论坛上找到了如何解决何时使用更多参数调用函数并且每个参数都作为带有空格的字符串，但是如何从输入中读取带有空格的字符串，我的意思是当有人调用我的脚本时。

在这种情况下，用户应该发送两个 txt 文件地址。所以，我知道后缀，但他也可以发送没有后缀的文件。那么，有什么办法可以读取这两个文件地址呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:23:31.367

脚本参数保存在所谓的“位置参数”中。例如，如果脚本被称为

```
script.sh /path/to/1.txt 2.csv 
```

`$1`将包含第一个文件路径和`$2`第二个文件路径。

# mysql - 在mysql查询中计算相同的值

> ID：13104618
> 
> 赞同：0
> 
> 时间：2012-10-27T22:10:24.253
> 
> 标签：mysql

所以我有一个像这样的查询

```
SELECT * FROM `catalog` WHERE `id` IN ('2','2','3','3','3'); 
```

而这仅返回 2 行，id 为 2 和 3。有可能让它返回 5 行（2 行，id 为“2”，3 行，id 为“3”）或添加计数作为新列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:04:58.943

不知道你为什么要做这样的事情，但你可以使用内部查询而不是使用“in”子句：

```
select *
from `catalog` c,
(
    select 2 ids
    union all
    select 2
    union all
    select 3
    union all
    select 3
    union all
    select 3
) k
where c.id = k.ids 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:13:09.053

尝试这样的事情：

```
SELECT t.p,count(*)  FROM 
    catalog, 
    (SELECT 2 as id
    Union all select 2 as id
    Union all select 3 as id
    Union all select 3 as id
    Union all select 3 as id)as t 
where catalog.id = t.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T23:18:11.040

可以使用临时表来完成：

```
create temporary table arrayt (id int);
insert into arrayt values  ('2'),('2'),('3'),('3'),('3');
select catalog.* from arrayt a LEFT JOIN catalog on (a.id=catalog.id); 
```

如果你需要数

```
select count(catalog.id) as count,catalog.id as id from arrayt a LEFT JOIN catalog on (a.id=catalog.id) group by catalog.id; 
```

# google-visualization - 我在谷歌图表工具中使用以下数据格式和面积图？

> ID：13104619
> 
> 赞同：1
> 
> 时间：2012-10-27T22:11:05.113
> 
> 标签：google-visualization

我一直在为我的一个项目使用面积图。我希望面积图显示完整的网格线，并发现只有在主轴上有数字或日期数据时它才会显示。好吧，我想在主轴上一年。但是将年份作为数字，以数字格式显示。像这样的东西...... 2005 显示 2005.00 。

我通过查看文档发现可以以这种格式传递数据 - {v:2005, f:'2005'}。但是，当我使用 google.visualization.arrayToDataTable() 以这种格式传递值时，这不起作用。

我试图传递的 json 数据具有这样的格式 -

```
[["Years", "sales"],[{v:2005, f:'2005'}, 52450],[{v:2006, f:'2006'}, 63457]] 
```

但是图表没有出现...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:43:46.693

如果你想使用`{v:2005,f:'2005'}`技巧，你不能使用`ArrayToDataTable`，你需要稍微不同地定义 DataTable。[您可以在这里](https://stackoverflow.com/questions/14818429/google-chart-arraytodatatable-formatted-value-not-working/14824662#14824662)看到类似的问题：

**不工作的数据表：**

```
var data = google.visualization.arrayToDataTable([
['Category', 'Amount'],
['Food', {v:5595.819984, f:'5.595,82'}], 
['Home', {v:1890.530002, f:'1.890,53'}], 
['Mail', {v:8.380000, f:'8,38'}], 
['Train', {v:564.899998, f:'564,90'}], 
['Photo', {v:959.119995, f:'959,12'}], 
['Lego', {v:428.760004, f:'428,76'}], 
```

**工作数据表：**

```
var data = google.visualization.DataTable();
data.addColumn('string', 'Category');
data.addColumn('number', 'Amount');
data.addRows([
['Food', {v:5595.819984, f:'5.595,82'}], 
['Home', {v:1890.530002, f:'1.890,53'}], 
['Mail', {v:8.380000, f:'8,38'}], 
['Train', {v:564.899998, f:'564,90'}], 
['Photo', {v:959.119995, f:'959,12'}], 
['Lego', {v:428.760004, f:'428,76'}],
]); 
```

# magento - Magento中具有自定义布局的不同目录中的多存储设置

> ID：13104624
> 
> 赞同：0
> 
> 时间：2012-10-27T22:11:50.337
> 
> 标签：magento

考虑这个例子，我有 2 家商店安装了一个 magento 说 A 和 B。我有 2 个不同的自定义主题用于商店 A 和 B Ex。分别为主题A和主题B。我已按照程序创建商店，子文件夹将仅包含 2 个文件 index.php 和 .htaccess，并对 index.php 文件进行了更改。

现在我将主题 themeA 和 themeB 都放在目录下 - magento/app/design/frontend/default/

同样，两个主题的皮肤文件都将放在目录下 - magento/skin/frontend/default/

完成此操作后，转到管理 > 系统 > 配置。在这里查看顶部的左侧栏中，您将找到当前配置范围下拉列表，该下拉列表将列出您的所有商店，从下拉列表中选择商店 A，magento 将刷新页面并加载该特定商店的所有配置。然后在左侧选项卡中选择设计选项卡 > 转到主题部分并保存主题名称，即主题 A。根据您的配置，此处未选中“使用默认值”或“使用网站”复选框。所以它会将主题应用到商店。对第二家商店应用相同的程序。

问题是每次我运行 storeA 或 B 时，它都会加载相同的布局。请帮助我如何才能为不同的商店加载不同的布局。

谢谢兰纳特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:30:40.150

在目录-magento/app/design/frontend/下创建你的主题themeA & themeB

同样，两个主题的皮肤文件将放在目录下 - magento/skin/frontend/

现在转到管理 -> 系统 -> 配置 -> 更改当前配置范围 -> 单击设计选项卡 -> 更改当前包名称。

![在此处输入图像描述](../Images/a337c92f5b8270a379f575164bf08886.png)

然后清除缓存并检查。

# c - 编译器函数和可执行文件

> ID：13104628
> 
> 赞同：1
> 
> 时间：2012-10-27T22:12:26.717
> 
> 标签：c, compiler-construction, reverse-engineering

> 尽管 UNIX 和 Windows 在开发环境方面的方法看似完全不同，但在编译器（以及许多其他方面，我们将在接下来的页面中发现）时，它们确实共享一个共同的体系结构后端。可执行文件的生成基本上是由一个程序在两个系统上端到端处理的：编译器。两个系统都有一个单一的前端可执行文件，可以作为上述所有 5 个步骤的粘合剂。

在： http: [//www.savs.hcc.edu.tw/~chuavv/articles/RevEng/ch02.html#the_compiler](http://www.savs.hcc.edu.tw/~chuavv/articles/RevEng/ch02.html#the_compiler)

这是什么意思？一台机器上的编译器编译程序（预处理->解析->翻译->汇编->链接）而在另一台机器上，编译器也执行相同的任务，但相反？不确定“可执行文件生成基本上是在两个系统上端到端处理......可执行文件基本上充当所有 5 个步骤的胶水”是什么意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:19:37.237

这基本上是英语阅读理解，而不是编程。

> 可执行文件的生成基本上是在两个系统上端到端处理的。

这意味着从开始到结束，从明文源到最终的可执行文件，一个程序，编译器完成所有工作。

> 基本上所有 5 个步骤都充当胶水的可执行文件。

无论是 GCC 还是 MSVC，都有一个驱动程序，一种“管理器”可执行文件，它调用底层预处理器、解析器、汇编器和链接器（在 GCC 的情况下是 CPP、cc1、as 和 ld）可执行文件。它只是一个保护伞，是其子程序的包装器。

然而，我不同意 Win 和 Unix 共享一个基本架构。他们的共同点只是非常基本的东西，不能真正做不同的事情。例如，它们都有一个内核，它们都能够在 Neumann 架构的计算机上运行，​​等等。就像作者说汽车发动机和手磨机共享一个共同的架构，仅仅是因为它们都是机械设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:19:17.607

这意味着在 windows 和 linux 上，您通常只使用一个程序将代码编译成可执行文件。您不必运行一个单独的程序来进行预处理，另一个用于翻译，另一个用于链接。那个可执行文件“端到端”执行整个过程。

# haskell - 尝试使用 Cabal 安装 ghc-mod 时出现 ExitFailure 9

> ID：13104630
> 
> 赞同：25
> 
> 时间：2012-10-27T22:12:38.010
> 
> 标签：haskell, cabal

当我尝试用 cabal 安装它时，我得到了

```
~$ cabal install ghc-mod
Resolving dependencies...
[1 of 1] Compiling Main             ( /tmp/haskell-src-exts-1.13.5-21238/haskell-src-exts-1.13.5/Setup.hs, /tmp/haskell-src-exts-1.13.5-21238/haskell-src-exts-1.13.5/dist/setup/Main.o )

/tmp/haskell-src-exts-1.13.5-21238/haskell-src-exts-1.13.5/Setup.hs:1:1:
    Warning: In the use of `runTests'
             (imported from Distribution.Simple, but defined in Distribution.Simple.UserHooks):
             Deprecated: "Please use the new testing interface instead!"
Linking /tmp/haskell-src-exts-1.13.5-21238/haskell-src-exts-1.13.5/dist/setup/setup ...
Configuring haskell-src-exts-1.13.5...
Building haskell-src-exts-1.13.5...
Preprocessing library haskell-src-exts-1.13.5...

dist/build/Language/Haskell/Exts/InternalParser.hs:1:12:
    Warning: -fglasgow-exts is deprecated: Use individual extensions instead
[ 1 of 22] Compiling Language.Haskell.Exts.Annotated.Syntax ( src/Language/Haskell/Exts/Annotated/Syntax.hs, dist/build/Language/Haskell/Exts/Annotated/Syntax.o )
cabal: Error: some packages failed to install:
ghc-mod-1.11.1 depends on haskell-src-exts-1.13.5 which failed to install.
haskell-src-exts-1.13.5 failed during the building phase. The exception was:
ExitFailure 9
hlint-1.8.33 depends on haskell-src-exts-1.13.5 which failed to install. 
```

我真的不知道从这里去哪里。我怎样才能找到更多关于它失败的原因？

编辑：我正在使用 GHC 版本 7.4.1 和 Cabal 版本 1.14.0

在详细模式下运行 Cabal 似乎没有给出任何提示，除了：

```
...

World file is already up to date.
cabal: Error: some packages failed to install:
ghc-mod-1.11.1 depends on haskell-src-exts-1.13.5 which failed to install.
haskell-src-exts-1.13.5 failed during the building phase. The exception was:
ExitFailure 9
hlint-1.8.33 depends on haskell-src-exts-1.13.5 which failed to install. 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-28T03:45:46.937

事实证明这是一个内存不足的问题，正如 hammar 所怀疑的那样。通过向系统添加一个 1GB 交换文件，我能够安装它（尽管它非常缓慢）：

```
dd if=/dev/zero of=/swapfile bs=1M count=1024
mkswap /swapfile
swapon /swapfile 
```

显然 EC2 实例默认没有交换。

# r - 为什么我不能在 ifelse() 中使用 element_text()？

> ID：13104631
> 
> 赞同：3
> 
> 时间：2012-10-27T22:12:47.283
> 
> 标签：r, ggplot2

为什么我不能返回 element_text()

```
> ifelse(TRUE,element_text(size=20),element_text(size=10))
[[1]]
NULL 
```

但我能做到吗？

```
> element_text(size=20)
List of 8
 $ family    : NULL
 $ face      : NULL
 $ colour    : NULL
 $ size      : num 20
 $ hjust     : NULL
 $ vjust     : NULL
 $ angle     : NULL
 $ lineheight: NULL
 - attr(*, "class")= chr [1:2] "element" "element_text" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T22:23:44.723

您不能以您尝试使用它的方式：

这是我的意思的一个例子：

```
ggplot(data=PlantGrowth, aes(x=group, y=weight, fill=group)) + 
    geom_boxplot() + 
    theme(legend.text = element_text(size=ifelse(TRUE, 20, 10))) 
```

它与`if` `else`您使用`ifelse`的 ( ) 向量化有关。我认为你在追求`if(){}else{}`：

```
ggplot(data=PlantGrowth, aes(x=group, y=weight, fill=group)) + 
    geom_boxplot()+ 
    theme(legend.text = if(TRUE){element_text(size=20)} else {element_text(size=10)}) 
```

虽然我真的不会以这种方式格式化它，但将其保留在一行中以便与您的方法进行比较。

问题不在于`ggplot2`您使用`ifelse`. 签出`?ifelse`，文档说：

```
 ‘ifelse’ returns a value with the same shape as ‘test’ which is
 filled with elements selected from either ‘yes’ or ‘no’ depending
 on whether the element of ‘test’ is ‘TRUE’ or ‘FALSE’. 
```

在您的问题中，您显示的输出`element_text(size=10)`与`test`结构不同。

# html - IE9 渲染问题

> ID：13104634
> 
> 赞同：1
> 
> 时间：2012-10-27T22:13:03.107
> 
> 标签：html, internet-explorer

我一直在尝试解决这个问题大约一个小时。我问了一些朋友，但他们也没有太多运气。

这个网站的问题是：[http](http://tomdwyerdesign.com/) ://tomdwyerdesign.com/ 在 Chrome 中加载它就可以了。在IE10中加载它就可以了……在IE9中加载它却不是。

它丢失了很大一部分 CSS。我已经使用了 html5shiv 技巧，但它仍然拒绝工作。

另一个网站：[http](http://tomdwyerdesign.com/new) ://tomdwyerdesign.com/new 这个加载很好并且共享几乎相同的标题。

任何人都知道为什么 IE9 不能正确呈现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:34:42.523

IE 将在您的新站点上进入怪癖模式。[使用W3 Validator](http://validator.w3.org/check?uri=http://tomdwyerdesign.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)检查会显示一个可能是您的问题的警告：如果您在 doctype 之前有评论，IE 将进入 quirks 模式。

尝试在评论之前移动您的文档类型，看看是否有帮助。

# javascript - Firefox 没有使用框架在应用程序中选择最新的 css

> ID：13104635
> 
> 赞同：0
> 
> 时间：2012-10-27T22:13:09.013
> 
> 标签：javascript, css, firefox, caching

我正在开发一个使用框架的企业应用程序。我们对 javascript 和 css 文件进行了一些更改，以增强现有功能。

我知道浏览器会缓存这两个东西，所以为了克服这些问题，我们包括 css 和 javscript 文件以包含版本信息，例如

```
<script language="javascript" src="21225/scripts/common_ui_enu.js?v=1"></script>
<link href="files/bootstrap.css?v=2" rel="stylesheet"/> 
```

这种技术似乎适用于除 Firefox 之外的所有其他浏览器。即使在清除缓存后（即使使用 ctrl + F5）也不会拾取最新的 CSS。我正在使用 Firefox 16.0.2 版进行测试。

确保firefox为框架应用程序拾取最新css文件的最佳方法是什么？

**编辑**

版本控制技术可能是旧的，但它的工作原理。我发现的问题是 CSS 中存在语法错误，其中一个规则背景 URL 缺少圆括号。

此后，出于某种原因，Firefox 忽略了所有其他 css 规则。修复 CSS 后，Firefox 也开始根据包含 URL 中提供的版本获取更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:18:50.920

使用查询参数是一种非常老式的防止缓存的方法，并且在 HTTP 1.1 上不可靠。看看使用适当的缓存头：[`expires`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21)等等。

# ruby-on-rails - 当方法名称与另一个可用方法相同时，如何显式使用特定方法？

> ID：13104636
> 
> 赞同：1
> 
> 时间：2012-10-27T22:13:10.977
> 
> 标签：ruby-on-rails

我在课堂上包含了两个不同的模块库。两者都有方法`test_method`。我如何明确地使用一个而不是另一个？

```
class User
include Calculus::Math #a module
include Algebra::Math::Misc #a module

#perform_test is defined in both Calculus::Math and Algebra::Math::Misc
perform_test: 1 

#Calculus::Math::perform_test: 1 #This doesn't work

end 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:37:13.597

如果元编程，您将不得不做一些事情：

```
(Calculus::Math).method(:perform_test).bind(self).call 1 
```

或者

```
include Calculus::Math
alias :foo :perform_test
include ... 
```

我没有测试过这些，可能会犯一些小错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:49:16.787

尝试`perform_test`在`Calculus::Math`.

```
Calculus::Math.module_eval do
  module_function(:perform_test)
  public :perform_test
end

class User
  include Calculus::Math #a module
  include Algebra::Math::Misc #a module

  Calculus::Math.perform_test(1)
end 
```

# c# - 图标到 ImageSource 的运行时转换

> ID：13104637
> 
> 赞同：2
> 
> 时间：2012-10-27T22:13:16.647
> 
> 标签：c#, wpf

我编写了一个应用程序，它从操作系统获取文件图标并绑定到它们，但由于[System.Drawing.Icon](http://msdn.microsoft.com/en-us/library/system.drawing.icon.aspx)对象不能用作[Image](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)控件中的[ImageSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)，我不得不编写一个[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。

经过一番搜索后，我得到了以下代码，我目前正在使用它：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    Icon ico = (value as Icon);
    Bitmap bits = ico.ToBitmap();
    MemoryStream strm = new MemoryStream();

    // add the stream to the image streams collection so we can get rid of it later
    _imageStreams.Add(strm);
    bits.Save(strm, System.Drawing.Imaging.ImageFormat.Png);
    BitmapImage bitmap = new BitmapImage();
    bitmap.BeginInit();
    bitmap.StreamSource = strm;
    bitmap.EndInit();

    // freeze it here for performance
    bitmap.Freeze();
    return bitmap;
} 
```

我有三个问题：

1.  您可以提出更好的解决方案吗？

2.  最终关闭使用的`MemoryStream`s 的最佳方法是什么，因为这里的代码是由绑定系统自动调用的？（它们从不手动实例化，您可能会注意到我将流添加到集合中`Close()`，在析构函数中调用它们，但我认为这不是一个好的解决方案）。

3.  与上一个问题相关，当我尝试在函数结束之前关闭流时，即使在此之前调用[Stream.Flush()](http://msdn.microsoft.com/en-us/library/system.io.stream.flush.aspx) ，图像也会显示为空。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T10:14:01.347

我最近在尝试将我的项目资源 (WindowIcon) 中的图标分配给 Window.Icon ImageSource 时取得了以下成功：

```
using System.Drawing;
using System.Windows.Media;

...

Icon someIcon = Properties.Resources.WindowIcon;
Bitmap someBitmap = someIcon.ToBitmap();
this.Icon = (ImageSource)new ImageSourceConverter().ConvertFrom(someBitmap); 
```

# php - PHP MySQL - 选择所有到期日期=今天日期+ 7天

> ID：13104639
> 
> 赞同：8
> 
> 时间：2012-10-27T22:13:43.963
> 
> 标签：php, mysql, sql, date

我正在使用 PHPMyadmin 并使用 PHP 将值放入数据库中。我使用时间戳存储产品的到期日期，如下所示：

```
2012-11-04 
```

我想选择到期日期等于今天日期加上8天的所有（例如上面的那个）

我还想在单独的页面中选择所有到期日期等于今天日期 + 2 周的所有内容，如果有人可以帮助我，将不胜感激！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-27T22:16:27.420

你可以用这样的查询来做到这一点：

```
SELECT * FROM table WHERE date = DATE_ADD(CURDATE(), INTERVAL 8 DAY) 
```

您可以使用`DATE_SUB`过去的日期。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-27T22:23:06.187

> 1.  选择到期日期等于今天日期加上 8 天的所有日期

```
SELECT
    *
FROM
    products
WHERE
    products.expiry_date >= DATE(now())
AND
    products.expiry_date <= DATE_ADD(DATE(now()), INTERVAL 8 DAY) 
```

> 2.  选择到期日期等于今天日期加上 2 周的所有内容

```
SELECT
    *
FROM
    products
WHERE
    products.expiry_date >= DATE(now())
AND
    products.expiry_date <= DATE_ADD(DATE(now()), INTERVAL 2 WEEK) 
```

这些文档将对您有所帮助：

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)

# java - 我应该如何测试我的 JPA 层？

> ID：13104640
> 
> 赞同：0
> 
> 时间：2012-10-27T22:13:47.403
> 
> 标签：java, jakarta-ee, jpa

我正在使用 Arquillian 进行集成测试，并且我想测试使用 JPA 的存储库层。我尝试使用 DBSetup，但它告诉我找不到 Destination 类，所以我想知道是否还有其他方法可以为每个测试设置带有测试数据的数据库？并且您没有在测试数据库上启用自动增量以便在从上次运行测试中删除数据后插入具有相同主键的行是否正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:21:46.300

我建议您使用 PROD 数据的子集设置集成模式。我使用 Oracle 完成了这项工作，在我的存储库中保留了模式的基本 DMP（用于数据泵导入的模式转储）文件。如果架构更改，我会更新 DMP。我的目标是使测试达到可以针对同一个 DMP 多次运行的程度。这样我就不必在每次运行测试时都使用 CI 工具重新导入 DMP。

在每个测试中还原您所做的更改。如果您添加一个项目，请删除它及其所有历史数据。如果您修改记录，请将其改回。如果你这样做，你不应该需要重新

在您的测试中，您绝不应该使用自动增量 ID 找到记录。如果您这样做，未来的测试可能会改变 id，因此无法再次找到它们。始终通过自然键（例如 first_name、last_name、middle_name 或 SSN）或将来始终存在的其他方法查找。

如果您的 PROD 架构必须更改，请先更改您的集成架构。针对它运行您的测试，然后更改您的 PROD 架构。

您还应该尽可能避免获得新会话。获得会话将非常昂贵。

# android - 如何使用 SQLite 获取过去 24 小时内的事件？

> ID：13104642
> 
> 赞同：4
> 
> 时间：2012-10-27T22:14:14.773
> 
> 标签：android, sqlite, datetime

我有一列包含日期时间条目，我想获取过去 24 小时内的所有项目。现在我正在尝试：

```
SELECT * FROM " + SQLHelp.LOG_TABLE + " WHERE " + SQLHelp.TIME_COLUMN + "> datetime('now','-1day') 
```

其中`SQLHelp.LOG_TABLE and SQLHelp.TIME_COLUMN`分别是表名和列名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:03:43.503

`-1`和之间必须有空格`day`；`datetime('now','-1 day')`按预期工作。

# database - 给定一组（经过清理的）属性标头（元标记），我如何根据这些标记自动为我的数据库中的每个列创建列？

> ID：13104649
> 
> 赞同：1
> 
> 时间：2012-10-27T22:15:26.783
> 
> 标签：database, ruby-on-rails-3, activerecord, automation, rails-migrations

所以这里是未格式化的列表（这个，损益表，有像这样的行标题，所以是的，自动化是这里的方法）。

[“收入”、“其他收入，总计”、“总收入”、“收入成本，总计”...]

这是我通过简单的小消毒程序运行每个数组实体（字符串）后的列表，`CleanZeeString.new.go(str)`.

[“收入”，“其他收入总额”，“总额收入”，“成本_收入总额”...]

所以，我想访问 Rails 方法，这将允许我至少部分自动化数据库列创建过程和迁移，因为这个列表有超过 50 个行标题，还有更多列表，我根本不相信手工做事了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:47:30.880

以后（个人进步）：

*   我开始相信，这个问题的解决方案将涉及在迁移方面走出轨道“盒子”。是的，为了解决这个问题，我认为我们可能必须创造性地考虑迁移......

*   我知道手动或借助某种第三方脚本解决方案的帮助是多么容易，但我只是拒绝。如果我愿意的话，我应该能够在昨晚喝几杯酒后自动做到这一点。给定数组，并且每一列都是相同类型的事实（rails 中的“十进制”），这应该以一种自动的、类似 rails 的方式来实现。

*   迁移文件只是普通的 ruby​​ 文件。根据这一事实制定解决方案。是时候看中了。字符串#to_sym

知道了 - -

```
class CreateIncomeStatements < ActiveRecord::Migration
  def change
    f = File.open(File.join(Rails.root, 'lib', 'assets', 'is_list.json')) 
    is_ary = JSON.parse(f.read)
    create_table :income_statements do |t|
      is_ary.each do |k|
      eval("t.decimal k.to_sym")
      end
      t.timestamps
    end
  end
end 
```

我用了这个`eval()`方法，感觉老师的鬼魂拍在我手腕上，但是，它奏效了。关键的“啊哈哈”是重新考虑迁移文件只是 ruby​​ 文件的事实，因此，我可以做任何我想做的事情。

# php - 会话注册不起作用

> ID：13104650
> 
> 赞同：1
> 
> 时间：2012-10-27T22:15:54.423
> 
> 标签：php, session

我在我的网站登录脚本上注册会话时遇到问题：所以事情是这样的，我正在使用 webmatrix 在我的网站上工作，我在两台不同的计算机上处​​理相同的文件，我也将网站上传到服务器。在所有三种情况下，它都工作得很好！最近我在笔记本电脑上创建了完全相同的工作环境，webmatrix + xampp mysql db - 只有在这里我发现拒绝创建会话，代码：

（登录页面包含在 index.php 页面中。

```
<?php
session_start();
$no_mail_pass_error="";
$no_user_error="";
$wrong_pass_error="";

if ($_POST['submit_login']){

$log_email = $_POST ["log_email"]; //VAR $email = to what usename has entered
$log_password = $_POST ["log_password"]; //VAR $password = to what usename has entered
$remember_me = $_POST ["remember_me"];

$log_email = strip_tags($log_email);
$log_password = strip_tags($log_password);

$log_email = mysql_real_escape_string($log_email);
$log_password = mysql_real_escape_string($log_password);

if ($log_email==""||$log_password=="") {
$no_mail_pass_error='
    <div id="login_errors_div" style="display:none;">
    <table border="0">
    <tr>
    <td>
    <img src="ec_mark_25.png"/>   
    </td>
    <td>
    no mail    
    </td>    
    </tr>
    </table>
    <hr />
     </div>

     ';
}
else {

$login_connect = mysql_connect ("***", "***", "***")

or die ("couldnt connect");
mysql_select_db (***) or die ("not found"); //if db was not found die
mysql_query("SET NAMES 'utf8'");

$login_query = mysql_query("SELECT * FROM users WHERE email='$log_email'"); //search for specific username entered

$login_numrows = mysql_num_rows($login_query); //check that it appears AT LEAST in ONE row

if ($login_numrows!=0) // IF IT APPEARS IN NONE - NO USER EXISTS

    {

    while ($row = mysql_fetch_assoc($login_query)) //Takes the whole row of the specific user and extracts all the fields
    {
        $dbemail = $row['email'];
        $dbpassword = $row['password']; //Sets thoes fields into variables
        $id = $row['id'];
        $log_firstname = $row['firstname'];
        $log_lastname = $row['lastname'];
    }

    if ($log_email==$dbemail&&md5($log_password)==$dbpassword)

    {

    if ($remember_me=='on') {
    setcookie ("email",$email,time()+604800);

          session_register('email');
          $_SESSION['email']=$log_email;

          session_register('id');
          $_SESSION['id']=$id;

          session_register('firstname');
          $_SESSION['firstname']=$log_firstname;

          session_register('lastname');
          $_SESSION['lastname']=$log_lastname;

    header ("Location: homepage.php");
    }
    else if ($remember_me=='') {

          session_register('email');
          $_SESSION['email']=$log_email;

          session_register('id');
          $_SESSION['id']=$id;

          session_register('firstname');
          $_SESSION['firstname']=$log_firstname;

          session_register('lastname');
          $_SESSION['lastname']=$log_lastname;

          header ("Location: homepage.php");
          }

    }
    else {
    $wrong_pass_error='
    <div id="wrong_pass_error_div" style="display:none;">
    <table border="0">
    <tr>
    <td>
    <img src="ec_mark_25.png"/>   
    </td>
    <td>
   wrong pass   
    </td>    
    </tr>
    </table>
    <hr />
     </div>
     ';
    }

    }

    else {
    $no_user_error='
    <div id="no_user_error_div" style="display:none;">
    <table border="0">
    <tr>
    <td>
    <img src="ec_mark_25.png"/>   
    </td>
    <td>
    user not found
    </td>    
    </tr>
    </table>
    <hr />
     </div>
     ';
    }
}

}
?>
<form name="login_form" id="logn_form" method="post" action="index.php">
<table border="0" style="margin-left: 60px; margin-bottom: 3px;">

    <tr>    

    <td id="login_info">mail</td>
    <td id="login_info">pass</td>
    <td></td>
    </tr>

    <tr>
    <td><input id="login_input" name="log_email" type="text"/></td>
    <td><input id="login_input" name="log_password" type="password"/></td>
    <td><input id="login_submit" name="submit_login" type="submit" value="enter"/></td>
    </tr>

    <tr>
    <td valign="top">
    <!-- TABLE FOR REMEMBER ME -->  
    <table style="margin: 0px; padding:0px;"><tr>
    <td>  
    <input name="remember_me" type="checkbox"/>
    </td>
    <td>remember me</td>
    </tr></table>
    <!-- TABLE FOR REMEMBER ME - END -->    
        </td>
    <td valign="top"><div style="margin-top: 5px; margin-right: 5px;"><a id="forgot_password_a" href="#">forgot pass</a></div></td>
    </tr>
    </table>
    </form> 
```

什么可能阻止会话注册？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T23:45:10.983

发表我的评论作为答案；）

检查您的 PHP 版本（我相信它们与两种环境都不同）。

`session_register`自 PHP 5.3 起已弃用，并在 PHP >= 5.4 中删除。只需删除`session_register`并`$_SESSION['key'] = "value";`改用即可。

请参阅[session_register](http://php.net/manual/en/function.session-register.php)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:26:53.080

检查 PHP 保存会话数据的位置。您可以使用 phpinfo() 找到它，并且可以在 php.ini 中更改它。我认为它称为 session.save_path，并确保 apache 用户（或任何 Web 服务器）具有对该目录的写入权限。

另请查看[http://php.net/manual/en/function.session-save-path.php](http://php.net/manual/en/function.session-save-path.php)

# html - HTML CSS 背景颜色

> ID：13104657
> 
> 赞同：1
> 
> 时间：2012-10-27T22:17:15.967
> 
> 标签：html, css

[http://paulsfiles.vacau.com/](http://paulsfiles.vacau.com/)

我正在尝试添加背景颜色，`#maintext`但它没有显示出来。身体形象似乎超越了`#maintext`，尽管`#maintext`更具体。

这就是我试图展示它的方式。

![http://i.imgur.com/LIrsf.jpg](../Images/2621d201f94e1b33050a39b469e3ffa7.png)

我要的逻辑顺序是标题中的导航，以及图像之前的正文。它也是一个固定宽度的网站。

# [*jsFiddle*](http://jsfiddle.net/w9t48/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:28:05.520

`#6E6E6E`您没有为`#maintext`和使用相同的颜色代码`#wrapper`吗？

如果我更改`#maintext`. 希望有帮助吗？否则请回到我身边:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:26:38.243

在`styles.css`line:115 你有这个：

```
#maintext {
  float: right;
  width: 570px;
  background-color: #6E6E6E;
  padding: 20px;
} 
```

这`background-color`恰好与`#wrapper`. `#maintext`没有被覆盖，至少在您发布的链接中没有

# java - SWT: InputDialog 用于密码输入

> ID：13104658
> 
> 赞同：4
> 
> 时间：2012-10-27T22:17:29.657
> 
> 标签：java, dialog, swt, jface

如何使用 SWT`InputDialog`对象输入密码，将普通字符替换为常用字符`*`？

还是不可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T09:28:24.740

只需创建自己的`Dialog`：

```
public static void main(String[] args) {
    PasswordDialog dialog = new PasswordDialog(new Shell());
    dialog.open();

    System.out.println(dialog.getPassword());
}

public static class PasswordDialog extends Dialog {
    private Text passwordField;
    private String passwordString;

    public PasswordDialog(Shell parentShell) {
        super(parentShell);
    }

    @Override
    protected void configureShell(Shell newShell)
    {
        super.configureShell(newShell);
        newShell.setText("Please enter password");
    }

    @Override
    protected Control createDialogArea(Composite parent) {
        Composite comp = (Composite) super.createDialogArea(parent);

        GridLayout layout = (GridLayout) comp.getLayout();
        layout.numColumns = 2;

        Label passwordLabel = new Label(comp, SWT.RIGHT);
        passwordLabel.setText("Password: ");
        passwordField = new Text(comp, SWT.SINGLE | SWT.BORDER | SWT.PASSWORD);

        GridData data = new GridData(SWT.FILL, SWT.CENTER, true, false);
        passwordField.setLayoutData(data);

        return comp;
    }

    @Override
    protected void okPressed()
    {
        passwordString = passwordField.getText();
        super.okPressed();
    }

    @Override
    protected void cancelPressed()
    {
        passwordField.setText("");
        super.cancelPressed();
    }

    public String getPassword()
    {
        return passwordString;
    }
} 
```

结果如下所示：

![在此处输入图像描述](../Images/fb452c2da63def3acae64a7e3b6fecef.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-22T10:13:47.333

您可以继承 InputDialog 并覆盖用于文本控件的样式。

```
public class PasswordDialog extends InputDialog {

    public PasswordDialog(Shell parentShell, String dialogTitle, String dialogMessage, String initialValue, IInputValidator validator) {
        super(parentShell, dialogTitle, dialogMessage, initialValue, validator);
    }

    @Override
    protected int getInputTextStyle() {
        return super.getInputTextStyle() | SWT.PASSWORD;
    }
} 
```

# jquery-ui - 如何在 jQuery UI 中以编程方式触发可拖动？

> ID：13104660
> 
> 赞同：1
> 
> 时间：2012-10-27T22:17:42.477
> 
> 标签：jquery-ui

只需调用 .trigger("mousedown"); 不起作用。

```
scrollPane_Y.draggable({
    axis: "y",
    stop: function (event, ui) { 
        /*
        i get triggered when the containment is hit
        so if a user hits the containment and then
        goes in the other direction nothing happens.
        */
         scrollPane_Y.trigger("mousedown"); // doesnt work
         scrollPane_Y.mousedown(function (e) { // from third link. doesnt work
             scrollPane_Y.trigger(e);
         });
    },
    containment: [0, min_scrollPane_Y, 0, max_scrollPane_Y]
}); 
```

*   [导致无限循环](https://github.com/jquery/jquery-ui/blob/9e8e339648901899827a58e5bf919f7dda03b88e/tests/jquery.simulate.js)
*   [从来没有解释过](http://api.jqueryui.com/draggable/#option-containment)
*   [不工作](https://stackoverflow.com/questions/5252213/how-to-trigger-draggable-behaviour-programmatically)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:33:12.820

您可以使用正确的参数直接调用其私有方法。

```
scrollPane_Y.draggable({
    axis: "y",
    stop: function (event, ui) { 
        /*
        i get triggered when the containment is hit
        so if a user hits the containment and then
        goes in the other direction nothing happens.
        */

         // retrieve the instance and call its private method
         scrollPane_Y.data("ui-draggable")._mouseDown(event);
    },
    containment: [0, min_scrollPane_Y, 0, max_scrollPane_Y]
}); 
```

# ruby-on-rails - 表单上传“nil:NilClass的未定义方法`[]'”

> ID：13104662
> 
> 赞同：0
> 
> 时间：2012-10-27T22:18:31.677
> 
> 标签：ruby-on-rails, ruby, forms, upload, controller

深入研究 Rails 的上传功能并实际遵循[此](http://guides.rubyonrails.org/form_helpers.html#uploading-files)railsguide。

我将以下代码用于**上传表单**：

```
<%= form_tag({ action: :upload }, multipart: true) do %>
    <%= file_field_tag :picture %>
    <%= submit_tag %>
<% end %> 
```

这是我的**上传方法**：

```
def upload
    uploaded_io = params[:customer][:picture]     #erroneous line!!
    File.open(Rails.root.join('public', 'uploads', uploaded_io.original_filename), 'w') do |file|
      file.write(uploaded_io.read)
    end
    flash[:notice] = "File uploaded successfully!"
    redirect_to root_path
end 
```

我在第二个代码片段中标记了我认为错误的行。上传方法只是从 railsguide 粘贴的，我将 params 数组调整为 [:customer]。

上传文件时出现此错误：

```
undefined method `[]' for nil:NilClass 
```

它指的是我上面标记的行。

我还发现[了](https://stackoverflow.com/questions/12721067/undefined-method-for-nilnilclass-for-ror-file-upload)另一个问题，但我还没有弄清楚这对我有什么帮助。

我究竟做错了什么？是我的表格错误还是我的控制器方法错误？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:37:18.603

尝试更改为

```
params[:picture] 
```

可以随时查看日志以了解请求参数哈希的结构。当您在 rails 中使用 form_for 时，假设在下面的客户对象上。然后你得到的字段为

```
[:customer][:field_name] 
```

但是由于您只是使用了 form_tag 帮助程序，因此它没有包含在另一个哈希中：

```
<%= form_for @customer do |f| %>
 <%= f.text_field :field_name %>
<% end %> 
```

# ruby-on-rails - Gmaps4rails：地图不会通过带有erb数据馈送的ajax显示，但在硬编码时会显示

> ID：13104664
> 
> 赞同：0
> 
> 时间：2012-10-27T22:18:36.493
> 
> 标签：ruby-on-rails, ajax, fancybox, gmaps4rails

我想使用 gmaps4rails gem 来显示一个fancybox 中的项目地图。我仔细阅读了wiki 上关于ajax 调用的注释，即脚本必须手动包含在应用程序布局中，地图必须加载到javascript 中（[参见gem wiki](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Using-with-UJS)）。

但是我仍然没有完全成功地使地图显示在框中。

另一方面，当我在 javascript 中硬编码坐标时，它工作正常，地图显示在幻想框中，并且出现标记。

让我回顾一下。

在我的索引视图中，我有一个对项目索引操作的 ajax 调用：

```
<%= link_to "Show Map", items_path(:format => :js, :show_map => true), :remote => true, :class => 'fancybox' %> 
```

在控制器中，我填充地图数据：

```
def index
   @items=Item.all

   if params[:show_map]
       @map= @items.to_gmaps4rails
   end 
 end 
```

在 index.js.erb 文件中，我把

```
<% if params[:show_map] %>
    var content = "<%= escape_javascript( gmaps({:last_map => false})) %>";
    $.fancybox({
            'content': content,
            'padding' : 20
        }); 
    Gmaps.map = new Gmaps4RailsGoogle();
    Gmaps.load_map = function() {
               Gmaps.map.initialize();
               Gmaps.map.markers = <%=  @map %>; 
               Gmaps.map.create_markers();
               Gmaps.map.adjustMapToBounds();
               Gmaps.map.callback();
               };  
    Gmaps.loadMaps(); 
<% else %>
 // blablabla
<% end %> 
```

在地图对象中提供标记的位置。

这不起作用，而不是我的地图，我在fancybox中出现了代码本身。就像是：

```
var content = "\n
\n
<\/div>\n<\/div>\n"; $.fancybox({ 'content': content, 'padding' : 20 }); Gmaps.map = new Gmaps4RailsGoogle(); Gmaps.load_map = function() {Gmaps.map.initialize(); 
//Gmaps.map.markers = [{"lat":50.294,"lng":5.857},{"lat":50.294,"lng":5.857},{"lat":50.548,"lng":4.918},{"lat":50.384,"lng":3.649},{"lat":50.384,"lng":3.649},{"lat":50.08,"lng":4.5760000000000005},{"lat":50.054,"lng":5.195}]; 
Gmaps.map.markers = [{"lat":50.8483059,"lng":4.351783999999999},{"lat":50.496,"lng":5.066},{"lat":50.11,"lng":5.003},{"lat":50.11,"lng":5.003},{"lat":50.162,"lng":5.871},{"lat":50.08,"lng":4.5760000000000005},{"lat":50.08,"lng":4.5760000000000005},{"lat":50.08,"lng":4.5760000000000005}];
 Gmaps.map.create_markers(); Gmaps.map.adjustMapToBounds(); Gmaps.map.callback(); }; Gmaps.loadMaps(); 
```

当我代替 erb`<%= @map %>`时，我对标记进行硬编码，例如：

```
Gmaps.map.markers = [{"lat":50.294,"lng":5.857},"lat":50.294,"lng":5.857},{"lat":50.548,"lng":4.918}]; 
```

有用！

好像我在 json 数据类型转换中遗漏了一些东西。但我不是专家，无法找出问题所在。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:16:36.883

刚刚尝试成功：

```
<a href="#test" class="fancybox">Open</a>

<div id="test" style="display:none;width:300px;">
  <%= gmaps markers: { data: @json } , last_map: false %>
</div>

<script type="text/javascript">
$(".fancybox").fancybox({
    openEffect  : 'none',
    closeEffect : 'none',
    afterLoad   : function() { Gmaps.loadMaps(); }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:30:13.623

好吧，我有什么不顺利。感谢以下答案[https://stackoverflow.com/a/12219016/1100674](https://stackoverflow.com/a/12219016/1100674)。

当我使用以下语法时：

Gmaps.map.markers = <%= @map %>;

我得到这样呈现的json：

```
 Gmaps.map.markers = [{&quot;lat&quot;:50.8483059,&quot;lng&quot;:4.351783999999999},{&quot;lat&quot;:50.11,&quot;lng&quot;:5.003},{&quot;lat&quot;:50.11,&quot;lng&quot;:5.003},{&quot;lat&quot;:50.08,&quot;lng&quot;:4.5760000000000005},{&quot;lat&quot;:50.08,&quot;lng&quot;:4.5760000000000005},{&quot;lat&quot;:50.08,&quot;lng&quot;:4.5760000000000005},{&quot;lat&quot;:50.413,&quot;lng&quot;:4.371}]; 
```

而我使用的`raw()`方法，

Gmaps.map.markers = <%= raw(@map) %>;

我得到正确的格式。

```
 Gmaps.map.markers = [{"lat":50.8483059,"lng":4.351783999999999},{"lat":50.11,"lng":5.003},{"lat":50.11,"lng":5.003},{"lat":50.08,"lng":4.5760000000000005},{"lat":50.08,"lng":4.5760000000000005},{"lat":50.08,"lng":4.5760000000000005},{"lat":50.413,"lng":4.371}]; 
```

# java - java中的“this.x”是什么意思？

> ID：13104667
> 
> 赞同：0
> 
> 时间：2012-10-27T22:18:53.150
> 
> 标签：java, class, instance

有人可以解释一下吗？并举一个简短而简单的例子。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:22:06.717

`this`是对当前对象的引用，并隐式传递给非静态方法。 `this.x`取消引用以获取“x”属性。

如果您想在函数参数和类成员之间消除歧义，请使用它。

```
public void setX(int x)
{
    this.x= x;
} 
```

在这种情况下它是有效但多余的：

```
public void setX(int xValue)
{
    this.x= xValue;
} 
```

或者简单地说：

```
public void setX(int xValue)
{
    x= xValue;
} 
```

# c - int 数组没有得到 char 值

> ID：13104672
> 
> 赞同：3
> 
> 时间：2012-10-27T22:19:36.263
> 
> 标签：c

我在编程方面绝对是全新的，我不知道如何解释我在这里做什么。

这篇文章的全部目的是输入值，然后以相同的顺序打印出来。现在我想在按“q”时退出输入值，所以我必须扫描字符，但是当我将它们分配回 int 数组时，值是不一样的。

希望这对您有意义，但无论如何这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#define SIZE  5000
define flush fflush(stdin)

main() {
    int input[SIZE] = {0},i = 0;
    int counter = 0;
    char inputs, quit;

     do {
        system("cls");
        printf("Input number ('q' to quit and display numbers entered): ");

        flush;
        scanf("%c",&inputs);
        flush;

        if (inputs == 'q')
            quit = 'q';
        else {
            input[i] = inputs;
            counter++;
            i++;
        }
    } while (i < SIZE && quit != 'q');

    for(i = 0; i < counter; i++){
        printf("%i.%i\n", i + 1, input[i]);
    }

    system("pause");
} 
```

顺便说一句，我一直在尝试自己做这件事，并且还在网上研究了一些关于字符的信息，但找不到任何对我有帮助的东西。提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:27:39.183

你不应该通过 %c 获取整数，当这不是意图时，你也不应该将 char 值分配给整数变量，而是你应该处理这样的事情

```
i = 0;
do {
  printf("Enter a number: ");
  scanf("%d", &input[i]);
  i++; counter++;
  printf("Do you want to continue? (y/n) : ");
  scanf("%c", &inputs);
} while(inputs == 'y'); 
```

或者你可以预先获得整数输入的数量并循环获得那么多整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:38:50.113

尝试代替（尽可能使用您的原始代码）：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#define SIZE  5000

int main()
{
  int input[SIZE] = {0},i = 0;
  int counter = 0;
  char inputs[32];
  bool quite = false;

  do
  {
    system("cls");
    printf("Input number ('q' to quit and display numbers entered): ");

    // read a string from user, then convert when appropr
    fgets(stdin, sizeof(inputs), inputs); 

    if (inputs[0] == 'q')
    {
        quit = true;
    }
    else if ( isdigit(inputs[0]) )
    {
        input[i] = atoi(inputs); // this will disregard any ending \n
        counter++;
        i++;
    }
  }
  while (i < SIZE && !quit);

  for(i = 0; i < counter; i++)
  {
    printf("%i.%i\n", i + 1, input[i]);
  }
  system("pause");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T22:47:14.253

另一种变体。无论使用空格，这都会读取字符，因为它使用[`getchar()`](http://www.cplusplus.com/reference/clibrary/cstdio/getchar/)而不是[`scanf()`](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/). 我不确定这是否是你想要的。似乎您**想要**整数但正在**读取**字符。所以这个解决方案可能完全不符合要求。

```
#include <stdio.h>
#include <stdlib.h>
#define SIZE  5000

int main()
{

    char input[SIZE] = {0};
    int i = 0;
    int counter = 0;
    char inputs;

    printf("Input number ('q' to quit and display numbers entered): ");

    while (((inputs = getchar()) != EOF) && (counter < SIZE))
    {
        if (inputs == 'q')
            break;

        input[counter] = inputs;
        counter++;
    }

    for(i = 0; i < counter; i++)
    {
        printf("%c\n", input[i]);
    }

    system("pause");

    return 0;
} 
```

如果你真的想要整数，这个应该可以工作。

请注意，该[`atoi()`](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)函数可用于将 C 字符串转换为 int。

该[`fgets()`](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)函数用于从 STDIN 读取 C 字符串。但是，与您使用`scanf("%s", input);`的相反，也可以在这里工作`scanf("%c", &inputs);`。

```
#include <stdio.h>
#include <stdlib.h>

#define INPUT_SIZE 1000
#define SIZE  5000

int main()
{

    char input[INPUT_SIZE] = {0};
    int numbers[SIZE] = {0};
    int i = 0;
    int counter = 0;

    while ((fgets(input, sizeof(input), stdin) != NULL) && (counter < SIZE))
    {
        system("cls");
        printf("Input number ('q' to quit and display numbers entered): ");

        if (input[0] == 'q')
            break;

        numbers[counter] = atoi(input);
        counter++;
    }

    for(i = 0; i < counter; i++)
    {
        printf("%i\n", numbers[i]);
    }

    system("pause");

    return 0;
} 
```

# ruby-on-rails-3 - 鼠标悬停时 JQueryMobile 列表项变黑

> ID：13104678
> 
> 赞同：1
> 
> 时间：2012-10-27T22:20:55.803
> 
> 标签：ruby-on-rails-3, jquery-mobile

在我自己的网站上，当悬停在列表项上时，它会突出显示黑色，而不是悬停在[JQueryMobile Docs 网站](http://jquerymobile.com/test/docs/lists/lists-ul.html)上时出现的较暗的渐变背景。

![黑名单项目](../Images/a05de2bc6bbd99ff24d17d7ba9d15a2c.png)

我在顶部的“基本链接列表”下找到[了](http://jquerymobile.com/test/docs/lists/docs-lists.html)我的代码。我试过给它其他主题等，但似乎没有什么能解决这个简单的问题。

这是我的一段代码：

```
<ul data-role="listview" data-theme="b">
    <li><a href="acura.html">Acura</a></li>
    <li><a href="audi.html">Audi</a></li>
    <li><a href="bmw.html">BMW</a></li>
</ul> 
```

我唯一能想到的是保存列表的容器，或其他东西，但不是这样......

这是我的设置：使用最新的 JQuery 和最新的 JQueryMobile 运行 Rails 3.2.6。

什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:27:17.187

这也发生在我身上。如果您删除 app/assets/stylesheets/scaffolds.css.scss，列表在悬停时不应再有黑色背景。

# tsql - SQL 别名为 Group By 提供“无效的列名”

> ID：13104679
> 
> 赞同：2
> 
> 时间：2012-10-27T22:20:58.560
> 
> 标签：tsql

我在尝试为新列创建别名并在 GROUP BY 子句中使用它时遇到问题：

```
SELECT TOP 100 Percent
count(id) AS [items_by_day],    
(SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, [date]))) AS [date_part]
FROM [MyDB].[dbo].[MyTable]
GROUP BY DAY([date]), MONTH([date]), YEAR([date]), date_part 
```

我收到以下错误：

```
Msg 207, Level 16, State 1, Line 5
Invalid column name 'date_part'. 
```

如何解决问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T23:53:24.477

# 子查询怎么样？

[在 sqlfiddle 上](http://sqlfiddle.com/#!3/ff7b8/8)查看我的演示

```
Select  Count(*) as nrOfRecords, sq.[items_by_day], sq.[date_part] 
From (
    SELECT TOP 100 Percent count(id) AS [items_by_day]
      ,(Select Dateadd(dd, 0, Datediff(dd, 0, [date]))) AS [date_part]
    From  [MyTable] 
    Group By id, date
) as sq
Group by sq.[items_by_day], sq.[date_part] 
```

该部分[`(SELECT DateAdd(... DateDiff(...))`](http://sqlfiddle.com/#!3/ff7b8/11)似乎返回了简单的日期。你能解释一下我错过了什么吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:56:48.440

您不能在 GROUP BY 中使用列别名，别名用于显示，除非别名在子查询中，在这种情况下，它成为列名。

# d3.js - d3.js 对象中的超链接

> ID：13104681
> 
> 赞同：37
> 
> 时间：2012-10-27T22:20:59.657
> 
> 标签：d3.js

一般来说，我是 d3.js 或 java 的新手。我正在使用来自[http://bl.ocks.org/1093025](http://bl.ocks.org/1093025)的缩进树示例。我花了两个小时才让它在我的本地计算机上工作，所以这应该让你对我的技能水平有所了解。

我打开了flare.json 文件并开始对其进行处理，并且能够成功地对其进行操作。看起来像这样

```
{
    "name": "Test D3",
    "children": [
        {
            "name": "News",
            "children": [
                {
                    "name": "CNN",
                    "size": 1000
                },
                {
                    "name": "BBC",
                    "size": 3812
                }
            ]
        },
        {
            "name": "Blogs",
            "children": [
                {
                    "name": "Engaget",
                    "size": 3938
                }
            ]
        },
        {
            "name": "Search",
            "children": [
                {
                    "name": "Google",
                    "size": 3938
                },
                {
                    "name": "Bing",
                    "size": 3938
                }
            ]
        }
    ]
} 
```

我现在想做的是尝试添加超链接。例如，我希望能够点击“CNN”并访问 CNN.com。我可以对flare.json进行修改吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-28T13:27:45.577

这很简单，只需添加更多“键”：“值”对。例子：

```
 "children": [
            {
                "name": "Google",
                "size": 3938,
                "url":  "https://www.google.com"

            },
            {
                "name": "Bing",
                "size": 3938,
                "url":  "http://www.bing.com"

            }
        ] 
```

当然，在您的 d3 代码中，您需要`append` `<svg:a>`标记并设置它们的`xlink:href`属性。

这是一些可能对您有所帮助的 html 和 d3 代码。首先，您需要在 html 文件中导入 xlink 命名空间：

```
<html xmlns:xlink="http://www.w3.org/1999/xlink">
...
</html> 
```

`svg:a`然后在 d3 绘图代码中，为每个数据元素附加节点，然后用标签将要成为可点击链接的元素包装起来：

```
nodeEnter.append("svg:a")
  .attr("xlink:href", function(d){return d.url;})  // <-- reading the new "url" property
.append("svg:rect")
  .attr("y", -barHeight / 2)
  .attr("height", barHeight)
  .attr("width", barWidth)
  .style("fill", color)
  .on("click", click);  // <- remove this if you like 
```

您可能希望通过删除 .on("click", click) 来删除单击处理程序（在原始示例中存在），因为它可能会干扰 SVG 链接的默认行为。

点击你`rect`的 s 现在应该引导你到适当的`url`. SVG 链接可能无法在所有浏览器中完全实现。

或者，您可以修改`click`处理程序以从中读取 URL，`d.url`并使用该处理程序通过 JavaScript 手动将浏览器重定向到该 URL `window.location = d.url;`：。那么你就不需要`svg:a`标签和`xlink`代码了。虽然添加真实链接（不是脚本链接）具有用户/浏览器可以决定做什么的好处（例如，在新选项卡/页面中打开）。如果您的某些用户禁用了 JavaScript，它也会有所帮助。

# c++ - 由于折叠，Vim 语法突出显示原型.h 文件的中断。折叠保存在哪里？

> ID：13104687
> 
> 赞同：1
> 
> 时间：2012-10-27T22:22:20.437
> 
> 标签：c++, vim, syntax-highlighting, folding

当我包括该行时：

```
au BufWinEnter * silent! loadview "load folds 
```

恢复我保存的折叠，它打破了语法突出显示......但仅限于名为“prototypes.h”的文件......这是我总是命名我的.h文件的，所以它必须是一些保存的数据破坏它。

折叠保存在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:53:59.180

它在帮助中说明，使用以下顺序：：`:help :loadview`“……加载了用“:mkview”存储的视图。”，然后（在文本中`:h :mkview`确实是）：“……生成了一个名称，并在前面添加了'viewdir'……”，（相同，）：“默认为 ... 和 Win32：“$VIM/vimfiles/view”，对于 Unix：“~/.vim/view”...”。我找不到 name 是如何生成的描述，但简单的测试表明它为它生成了.`<C-]>``:mkview``:h 'viewdir'``<C-]>``/usr/share/vim/vim73/doc/starting.txt``=+usr=+share=+vim=+vim73=+doc=+starting.txt=`

如果你想有效地使用 vim，你应该知道如何使用它的帮助系统。

# facebook - Facebook Like 发布的内容与调试器显示的内容不同

> ID：13104688
> 
> 赞同：0
> 
> 时间：2012-10-27T22:22:21.557
> 
> 标签：facebook, web, facebook-like, feed

我无法弄清楚这一点，我已经建立了一个带有电子商务系统的网站，我希望访问者能够喜欢单个产品，从而将该产品添加到他们的提要中。

我已将所有开放图形代码添加到相关位置，但是当有人单击“Like”时，共享的是默认内容而不是特定产品。这是我一直在使用的示例

[https://pinnaclesupplement.co.uk/index.php/shop/168/10/weight-gainers/serious-mass-2-72kg-detail](https://pinnaclesupplement.co.uk/index.php/shop/168/10/weight-gainers/serious-mass-2-72kg-detail)

所以我尝试使用 facebook 调试器来看看我是否能弄清楚，但那是显示正确的信息以及我想在人们的提要上显示的内容！这是一个链接。

[https://developers.facebook.com/tools/debug/og/object?q=https%3A%2F%2Fpinnaclesupplement.co.uk%2Findex.php%2Fshop%2F168​​%2F10%2Fweight-gainers%2Fserious-mass- 2-72kg-详细](https://developers.facebook.com/tools/debug/og/object?q=https%3A%2F%2Fpinnaclesupplement.co.uk%2Findex.php%2Fshop%2F168%2F10%2Fweight-gainers%2Fserious-mass-2-72kg-detail)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:26:00.270

您将 Like 按钮设置为指向[http://www.pinnaclesupplement.co.uk](http://www.pinnaclesupplement.co.uk) - 所以当人们点击喜欢时，他们只会得到“默认内容”，即您的基本站点描述。

如果您希望客户喜欢特定产品页面的 URL，那么您应该`href`将 Like 按钮的参数指向那里。

# c# - 将数据从我的 C# 应用程序发送到浏览器

> ID：13104689
> 
> 赞同：0
> 
> 时间：2012-10-27T22:22:28.663
> 
> 标签：c#, javascript

我的问题是..我如何能够在我的 C# 应用程序中向浏览器发送 2 个数据参数？我有一个命令行应用程序，它是我的游戏的服务器，并且在来自客户端的某个消息中，我必须在客户端正在播放的网页上激活 JavaScript。我用什么来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:24:16.753

哇，这是一个悬而未决的问题。如果来自浏览器的请求是针对完整的 HTML 页面，则将对 JavaScript 函数的调用嵌入页面`script`上的内联标记中。如果来自浏览器的请求将通过 ajax，则完全取决于您如何发送该数据，但 JSON 是一种常见机制。

# node.js - nodejs mongodb对象ID到字符串

> ID：13104690
> 
> 赞同：79
> 
> 时间：2012-10-27T22:22:42.680
> 
> 标签：node.js, mongodb, mongoose

在 nodejs 中，使用 mongodb，mongoosejs 作为 orm

我正在这样做

我有一个模型，用户

```
User.findOne({username:'someusername'}).exec(function(err,user){
console.log(user) //this gives full object with something like {_id:234234dfdfg,username:'someusername'}
//but

console.log(user._id) //give undefined.
}) 
```

为什么？那么如何让 _id 变成字符串呢？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-12-18T13:05:40.613

尝试这个：

```
user._id.toString() 
```

**MongoDB ObjectId**是一个12 字节的 UUID，可用作长度为 24 个字符的 HEX 字符串表示形式。您需要将其转换为字符串以`console`使用`console.log`.

所以，你必须这样做：

```
console.log(user._id.toString()); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-09T03:46:37.373

去掉下划线再试一次：

```
console.log(user.id) 
```

此外，从 id 返回的值已经是一个字符串，如您[在此处](https://github.com/LearnBoost/mongoose/issues/548#issuecomment-2245903)看到的。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-20T04:24:46.597

我正在使用 mongojs，我有这个例子：

```
db.users.findOne({'_id': db.ObjectId(user_id)  }, function(err, user) {
   if(err == null && user != null){
      user._id.toHexString(); // I convert the objectId Using toHexString function.
   }
}) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-11-04T14:39:51.907

尝试这个：

```
objectId.str; 
```

见[文档](http://docs.mongodb.org/manual/reference/object-id/)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-12-23T23:47:37.970

如果您使用的是 Mongoose，确保将 id 作为十六进制字符串的唯一方法似乎是：

```
object._id ? object._id.toHexString():object.toHexString(); 
```

这是因为 object._id 仅在对象被填充时才存在，否则对象是 ObjectId

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-08T13:11:24.030

使用猫鼬时。

的表示`_id`形式通常为（接收到的客户端）

`{ _id: { _bsontype: 'ObjectID', id: <Buffer 5a f1 8f 4b c7 17 0e 76 9a c0 97 aa> },`

如您所见，那里有一个缓冲区。转换它的最简单方法就是做`<obj>.toString()`或`String(<obj>._id)`

所以例如

```
var mongoose = require('mongoose')
mongoose.connect("http://localhost/test")
var personSchema = new mongoose.Schema({ name: String })
var Person = mongoose.model("Person", personSchema)
var guy = new Person({ name: "someguy" })
Person.find().then((people) =>{
  people.forEach(person => {
    console.log(typeof person._id) //outputs object
    typeof person._id == 'string'
      ? null
      : sale._id = String(sale._id)  // all _id s will be converted to strings
  })
}).catch(err=>{ console.log("errored") }) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-30T17:10:06.533

```
function encodeToken(token){
    //token must be a string .
    token = typeof token == 'string' ? token : String(token)
}

User.findOne({name: 'elrrrrrrr'}, function(err, it) {
    encodeToken(it._id)
}) 
```

在 mongoose 中，objectId 是一个**对象**(console.log(typeof it._id))。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-09T00:33:52.163

返回的结果`find`是一个数组。

试试这个：

```
console.log(user[0]["_id"]); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-25T20:13:56.203

从 Mongoose 5.4 开始，您可以使用 SchemaType Getters 将 ObjectId 转换为 String。

请参阅[Mongoose 5.4 中的新增功能：全局 SchemaType 配置](http://thecodebarbarian.com/whats-new-in-mongoose-54-global-schematype-configuration.html#schematype-getters)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-27T00:06:16.437

像这样访问对象 id 中的属性`user._id.$oid`。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-10T10:57:40.990

真正简单的使用`String(user._id.$oid)`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-07T11:05:06.497

尝试这个 ：`console.log(user._doc._id)`

# javascript - 在 JavaScript 中验证 JSON 文件

> ID：13104691
> 
> 赞同：0
> 
> 时间：2012-10-27T22:22:45.957
> 
> 标签：javascript, jquery, json, google-chrome-extension

我的 Google Chrome 扩展使用 JSON.parse(oldJSONstring) 创建一个带有配置信息的对象。“oldJSONstring”是从以前的会话中保存在 Chrome 的 localStorage 上的。

由于我有时会添加新功能，因此在创建新对象后，我会手动验证所有配置条目是否存在，如果不存在，我会将它们设置为默认值。这是完成的，以防用户在更新后第一次加载扩展。

我试图想出一种更自动化的方法，比如使用 JSON Schmea，但我真的不知道从哪里开始，而且我的第一轮谷歌搜索没有产生任何我可以使用的东西。

我认为的另一种方法是迭代我的所有默认设置 - 也存储在 JSON 对象中 - 然后确认它们存在于新对象中......但我刚刚意识到我不知道如何迭代所有 JSON 对象属性 ：）

这样做的最终目标是我想忘记验证新属性，每次我创建一个新功能并发布一个新版本时......这有什么意义吗？它让我懒惰吗？:D

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:54:39.427

保留默认对象并使用 jQuery`$.extend`合并 2 个对象。

```
var defaults={ color:'blue', size:'Large'}

var chromeObj= /* code to grab from storage*/
/* update chromeObj with all key/value pairs in defaults */
 /*  regardless if they already exist or not*/
$.extend( chromeObj, defaults}

/* code to put chromeObj back to storage*/ 
```

参考：http : [//api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:32:27.153

没有“JSON 对象”* 这样的东西，但循环遍历 Javascript 对象的属性非常容易：[如何循环遍历或枚举 JavaScript 对象？](https://stackoverflow.com/questions/684672/loop-through-javascript-object)

* JSON 只是一种字符串格式，它是 Javascript 对象表示法的子集

# algorithm - 查找给定总和是否存在于 BST 中的路径上

> ID：13104692
> 
> 赞同：8
> 
> 时间：2012-10-27T22:22:55.143
> 
> 标签：algorithm, binary-tree, binary-search-tree

问题是找出给定的和是否存在于 BST 中的任何路径上。如果路径意味着从根到叶，问题就非常简单，或者如果路径意味着从根到叶的路径的一部分可能不包括根或叶，那么问题就很简单了。但是这里变得很困难，因为路径可能同时跨越节点的左右子节点。例如，在给定的图中，圆圈路径上的总和为 132。我怎样才能找到这样一条路径的存在？使用哈希存储节点下所有可能的总和是不受欢迎的！

![在此处输入图像描述](../Images/42f3ca3bf74eb715db6257a225231c24.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:12:18.453

不是最快但最简单的方法是使用两个嵌套的深度优先搜索。

使用正常的深度优先搜索来获取起始节点。使用深度优先搜索的第二个修改版本来检查从该节点开始的所有路径的总和。

![在此处输入图像描述](../Images/3dde06f181ec428906094f3a4c2fcdc0.png)

第二深度优先搜索与普通深度优先搜索在两个细节上有所不同：

1.  它保持当前路径总和。每次将新节点添加到路径时，它都会向总和添加值，并在删除某个节点时从总和中删除值。
2.  它仅以相反的方向遍历从根到起始节点的路径边缘（图中的红色边缘）。像往常一样，所有其他边都以正确的方向遍历（图中的黑色边）。为了以相反的方向遍历边缘，它要么使用原始 BST 的“父”指针（如果有的话），或者窥视第一次深度优先搜索的堆栈以获得这些“父”指针。

每个 DFS 的时间复杂度为 O(N)，因此总时间复杂度为 O(N ² )。空间要求为 O(N)（两个 DFS 堆栈的空间）。如果原始 BST 包含“父”指针，则空间要求为 O(1)（“父”指针允许在没有堆栈的情况下以任何方向遍历树）。

* * *

其他方法基于 j_random_hacker 和 robert king 的想法（维护总和列表，匹配它们，然后将它们合并在一起）。它以自下而上的方式处理树（从叶子开始）。

使用 DFS 找到一些叶节点。然后回去找到最后一个分支节点，也就是这个叶子节点的grand-...-grand-parent。这给出了分支和叶节点之间的链。处理这个链：

```
match1(chain)
sum_list = sum(chain)

match1(chain):
  i = j = sum = 0
  loop:
    while (sum += chain[i]) < target:
      ++i
    while (sum -= chain[j]) > target:
      ++j
    if sum == target:
      success!

sum(chain):
  result = [0]
  sum = 0
  i = chain.length - 1
  loop:
    sum += chain[i]
    --i
    result.append(sum)
  return result 
```

![在此处输入图像描述](../Images/8fd0e9d57d652744a6f058e13001eb02.png)

继续 DFS 并搜索其他叶子链。当找到来自同一节点的两条链时，可能在另一条链之前（图中的红色和绿色链，在蓝色链之前），处理这些链：

```
match2(parent, sum_list1, sum_list2)
sum_list3 = merge1(parent, sum_list1, sum_list2)

if !chain3.empty:
  match1(chain3)
  match3(sum_list3, chain3)
  sum_list4 = merge2(sum_list3, chain3)

match2(parent, sum_list1, sum_list2):
  i = 0
  j = chain2.length - 1
  sum = target - parent.value
  loop:
    while sum < sum_list1[i] + sum_list2[j]:
      ++i
    while sum > sum_list1[i] + sum_list2[j]:
      --j
    if sum == sum_list1[i] + sum_list2[j]:
      success!

merge1(parent, sum_list1, sum_list2):
  result = [0, parent.value]
  i = j = 1
  loop:
    if sum_list1[i] < sum_list2[j]:
      result.append(parent.value + sum_list1[i])
      ++i
    else:
      result.append(parent.value + sum_list2[j])
      ++j
  return result

match3(sum_list3, chain3):
  i = sum = 0
  j = sum_list3.length - 1
  loop:
    sum += chain3[i++]
    while sum_list3[j] + sum > target:
      --j
    if sum_list3[j] + sum == target:
      success!

merge2(sum_list3, chain3):
  result = [0]
  sum = 0
  i = chain3.length - 1
  loop:
    sum += chain3[i--]
    result.append(sum)
  result.append(sum_list3[1...] + sum) 
```

在任何两个总和列表或一个链和一个总和列表是同一节点的后代的情况下执行相同的操作。该过程可以继续，直到保留属于根节点的单个总和列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T09:31:12.363

我将按顺序遍历左子树并以相反的顺序同时遍历右子树，这与归并排序的工作方式类似。每次移动使 aum 更接近的迭代器。就像合并排序一样。它的顺序 n

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T13:32:49.463

您当然可以生成所有可能的路径，并在进行过程中逐渐累加。树是 BST 的事实可能会让您通过限制某些总和来节省时间，尽管我不确定这会带来渐近速度的增加。问题是使用给定节点的左孩子形成的总和不一定小于使用右孩子形成的总和，因为前一个总和的路径可能包含更多节点。以下算法适用于所有树，而不仅仅是 BST。

要生成所有可能的路径，请注意路径的最高点是特殊的：它是路径中唯一允许（尽管不是必需）将两个子项都包含在路径中的点。每条路径都包含一个唯一的最高点。因此，递归的外层应该是访问每个树节点，并生成以该节点为最高点的所有路径。

```
// Report whether any path whose topmost node is t sums to target.
// Recurses to examine every node under t.
EnumerateTopmost(Tree t, int target) {
    // Get a list of sums for paths containing the left child.
    // Include a 0 at the start to account for a "zero-length path" that
    // does not contain any children.  This will be in increasing order.
    a = append(0, EnumerateSums(t.left))
    // Do the same for paths containing the right child.  This needs to
    // be sorted in decreasing order.
    b = reverse(append(0, EnumerateSums(t.right)))

    // "List match" to detect any pair of sums that works.
    // This is a linear-time algorithm that takes two sorted lists --
    // one increasing, the other decreasing -- and detects whether there is
    // any pair of elements (one from the first list, the other from the
    // second) that sum to a given value.  Starting at the beginning of
    // each list, we compute the current sum, and proceed to strike out any
    // elements that we know cannot be part of a satisfying pair.
    // If the sum of a[i] and b[j] is too small, then we know that a[i]
    // cannot be part of any satisfying pair, since all remaining elements
    // from b that it could be added to are at least as small as b[j], so we
    // can strike it out (which we do by advancing i by 1).  Similarly if
    // the sum of a[i] and b[j] is too big, then we know that b[j] cannot
    // be part of any satisfying pair, since all remaining elements from a
    // that b[j] could be added to are at least as big as a[i], so we can
    // strike it out (which we do by advancing j by 1).  If we get to the
    // end of either list without finding the right sum, there can be
    // no satisfying pair.
    i = 0
    j = 0
    while (i < length(a) and j < length(b)) {
        if (a[i] + b[j] + t.value < target) {
            i = i + 1
        } else if (a[i] + b[j] + t.value > target) {
            j = j + 1
        } else {
            print "Found!  Topmost node=", t
            return
        }
    }

    // Recurse to examine the rest of the tree.
    EnumerateTopmost(t.left)
    EnumerateTopmost(t.right)
}

// Return a list of all sums that contain t and at most one of its children,
// in increasing order.
EnumerateSums(Tree t) {
    If (t == NULL) {
        // We have been called with the "child" of a leaf node.
        return []     // Empty list
    } else {
        // Include a 0 in one of the child sum lists to stand for
        // "just node t" (arbitrarily picking left here).
        // Note that even if t is a leaf node, we still call ourselves on
        // its "children" here -- in C/C++, a special "NULL" value represents
        // these nonexistent children.
        a = append(0, EnumerateSums(t.left))
        b = EnumerateSums(t.right)
        Add t.value to each element in a
        Add t.value to each element in b
        // "Ordinary" list merge that simply combines two sorted lists
        // to produce a new sorted list, in linear time.
        c = ListMerge(a, b)
        return c
    }
} 
```

上面的伪代码只报告路径中最顶层的节点。可以通过`EnumerateSums()`返回对列表`(sum, goesLeft)`而不是简单的总和列表来重建整个路径，其中`goesLeft`是一个布尔值，指示用于生成该总和的路径最初是否从父节点向左走。

上面的伪代码为每个节点计算了多次总和列表：除了为自身调用之外，还将为树中的`EnumerateSums(t)`每个节点调用一次。可以对每个节点的总和列表进行记忆，这样它就不会在后续调用中重新计算，~~但实际上这并不能改善渐近性：只需要 O(n) 的工作来使用普通递归，并将其更改为 O(1) 不会改变整体时间复杂度，因为任何调用产生的总和列表~~~~通常必须由调用者读取，这需要 O(n) 时间。~~**编辑：**正如 Evgeny Kluev 所指出的，`t``t``EnumerateSums()`~~`EnumerateSums()`~~ **`EnumerateSums()`实际上表现得像归并排序，当树完全平衡时为 O(nlog n)，当它是单个路径时为 O(n^2)。因此，记忆化实际上会带来渐近的性能改进。**

 **可以通过重新排列到一个类似迭代器的对象中来摆脱临时的总和列表，`EnumerateSums()`该对象会延迟执行列表合并，并且可以查询以按升序检索下一个总和。这还需要创建一个`EnumerateSumsDown()`执行相同操作但按降序检索总和的函数，并使用它代替`reverse(append(0, EnumerateSums(t.right)))`. 这样做会将算法的空间复杂度降低到 O(n)，其中 n 是树中的节点数，因为每个迭代器对象都需要恒定的空间（指向左右子迭代器对象的指针，以及记录最后一个总和）并且每个树节点最多可以有一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T08:45:02.900

是否有任何复杂性限制？正如您所说：“*如果路径意味着根到叶，则容易，或者如果路径意味着从根到叶的路径的一部分可能不包括根或叶，则容易*”。您可以通过将根每次设置为不同的节点并进行 n 次搜索来减少此语句的问题。那将是一种简单的方法，不确定是否最佳。

**编辑**：如果树是单向的，这种东西可能会起作用（伪代码）：

```
findSum(tree, sum)
    if(isLeaf(tree))
        return (sum == tree->data)
    for (i = 0 to sum)
        isfound |= findSum(leftSubStree, i) && findSum(rightSubTree, sum-i)
    return isfound; 
```

这里可能有很多错误，但希望它能澄清这个想法。**

# upload - 在 Amazon 负载均衡器后面上传文件

> ID：13104693
> 
> 赞同：1
> 
> 时间：2012-10-27T22:22:58.073
> 
> 标签：upload, amazon-web-services, load-balancing

我想知道当我在负载均衡器后面有几台 EC2 服务器而没有粘性时，他们将图像上传到我的网站是否会出现问题。我考虑过使用[uploadify](http://www.uploadify.com)，但我不确定每次用户将文件上传到服务器时它是否会起作用。对此有任何见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:46:19.783

取决于您最终保存文件的位置。通常对于农场，您最好将文件保存在 S3 上（因为您已经在 EC2 上）。这样，所有服务器都可以访问它。将其保存在处理该特定会话的特定服务器上根本无法扩展。理想情况下，您希望您的服务器完全无状态，以便您可以扩大或缩小它们。将文件保存在特定服务器上使其成为有状态的。

您在客户端上使用什么库来上传与本次讨论无关。Uploadify 似乎做得很好。

# python - 谷歌应用引擎的 Python 替代品

> ID：13104694
> 
> 赞同：-3
> 
> 时间：2012-10-27T22:22:59.073
> 
> 标签：python, google-app-engine

我有一个正在开发的应用程序，目前托管在 google App 引擎上。它是用 python 编写的，并且运行得非常顺利，直到我的要求发生变化并且谷歌应用程序引擎不会让我做我需要做的事情。目前我正在尝试找到一种方法来托管我的代码（python）并能够发出和接受 http:// 请求，并且能够在与 python 脚本所在的目录相同的目录中编辑/添加文件（我需要存储大量文件，而 blobstore 很奇怪）。

如果这是不可能的，我会很高兴能够“在浏览器中”运行 python 脚本，就像在我的本地机器（windows 7 64 位）上使用谷歌应用引擎进行测试一样。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:43:04.510

Google 的 App Engine 支持 WSGI ，而不是 CGI。

您应该能够轻松地将您的代码移植到另一个支持 WSGI 的堆栈。那里没有太多自定义的谷歌特定的东西。

一些支持 WSGI 的流行框架包括：

*   金字塔
*   龙卷风
*   樱桃派
*   瓶子
*   闪光
*   网页.py
*   扭曲的

还有很多

在托管方面：

*   Heroku 可以托管 Python WSGI 应用程序
*   您几乎可以在任何具有 uwsgi、apache 的 mod_wsgi 或无数其他 wsgi 服务器的机器上进行部署
*   大多数框架都有自己的服务器用于本地开发

# python - 从python中的外部文件进行文档搜索和检索

> ID：13104704
> 
> 赞同：0
> 
> 时间：2012-10-27T22:24:25.923
> 
> 标签：python, search, file-io

我正在尝试创建一个程序来搜索我在单独文档中的文章。我无法让我的程序搜索该词并允许我查看仅包含该搜索词的文档。理想情况下，我希望搜索输入类似于月亮，并允许我访问该文档。完整的文档如下所示，我的代码如下。

```
<NEW DOCUMENT>
Look on the bright 
side of Life.
<NEW DOCUMENT>
look on the very, dark
side of the Moon
<NEW DOCUMENT>
is there life
on the moon

search = input("Enter search words: ")
docs = []
document = []
doc_search = []

for line in file2:
    line = line.strip()
    if line == "<NEW DOCUMENT>":
        # start a new document
        document = []
        docs.append(document)
    else:
        # append to the current one
        document.append(line)
docs = ['\n'.join(document) for document in docs]

for line in docs:
    if line == search:
        doc_search = []
        doc_search.append(docs) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:39:42.637

像这样的东西：

```
docs=[]
with open("data1.txt") as f:
    lines=f.read().split("<NEW DOCUMENT>")[1:]
    for x in lines:
        docs.append(x.strip())
    print (docs)
search = input("Enter search words: ")   
for x in docs:
    if search in x:
        print ("{} found in:\t {}".format(search,x)) 
```

**输出：**

```
['Look on the bright \nside of Life.', 'look on the very, dark\nside of the Moon', 'is there life\non the moon']
Enter search words: dark
dark found in:   look on the very, dark
side of the Moon 
```

# javascript - Javascript/Tumblr：按条件添加 CSS 类（必须是 JS，因为 Tumblr）

> ID：13104705
> 
> 赞同：0
> 
> 时间：2012-10-27T22:24:29.983
> 
> 标签：javascript, image, orientation, tumblr

我很抱歉，但经过几个小时的尝试，我只需要问专家:)

我的 Tumblr 主题中有以下代码：

```
 {block:Photo}
   <li class="post photo"> 
   // Retrieving photo url here using {PhotoURL-500}.
   {/block:Photo} 
```

这会检索所有照片帖子并将其显示在页面上。

现在我想给 li 一个类，这取决于图像方向。我已经使用以下方法检索了它：

```
<script type="text/javascript">

var width = {PhotoWidth-500}; // this is a Tumblr variable that gets the width
var height = {PhotoHeight-500}; // this is a Tumblr variable that gets the height

if (width > height) {
// Here I get stuck, I want to append class="horizontal" to the li above.
}
else {
// append class="vertical"
}
</script> 
```

我确实必须在 {block:Photo} 中调用 javascript，否则我无法确定每张照片的单独高度和宽度。作为提醒；我很想在 PHP 中执行此操作并只是回显它，但 Tumblr 不允许这样做。我是一个JS菜鸟......

帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:28:42.010

在任何[现代浏览器](http://caniuse.com/#feat=queryselector)上，您都可以使用[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)来获取`NodeList`与选择器匹配的元素，例如

```
var list = querySelectorAll(".post.photo"); 
```

...然后循环遍历它们附加到它们的`className`属性。例如：

```
var list = querySelectorAll(".post.photo"),
    index,
    node;

for (index = 0; index < list.length; ++index) {
    node = list[index];
    if (some_condition) {
        node.className += " theNewClassToAdd";
    }
} 
```

如果您需要支持较旧的浏览器，`getElementsByClassName`它已经存在了很长时间（但我相信它只支持单个类的查询，因此您必须进行后处理以确保两个类都存在）。

[或者为了获得最广泛的支持，通过使用像jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他任何](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)一个这样的体面的库来利用其他人的工作。

# opengl - gluLookAt 向量和 FPS 风格的相机

> ID：13104713
> 
> 赞同：1
> 
> 时间：2012-10-27T22:25:24.970
> 
> 标签：opengl, graphics, vector-graphics, frame-rate, glulookat

我试图通过更新三个向量来实现 FPS 风格的相机：EYE、DIR、UP。这些向量与 gluLookAt 使用的向量相同（因为 gluLookAt 由相机的位置、它所看的方向和向上向量指定）。

我已经实现了左右和上下扫射运动，但是我很难理解在保持静止的同时让相机环顾四周的数学原理。在这种情况下，EYE 向量保持不变，而我必须更新 DIR 和 UP。

下面是我尝试过的代码，但它似乎无法正常工作。有什么建议么？

```
void Transform::left(float degrees, vec3& dir, vec3& up) {
    vec3 axis;
    axis = glm::normalize(up);
    mat3 R = rotate(-degrees, axis);
    dir = R*dir;
    up = R*up;
};

void Transform::up(float degrees, vec3& dir, vec3& up) {
    vec3 axis;
    axis=glm::normalize(glm::cross(dir,up));
    mat3 R = rotate(-degrees, axis);
    dir = R*dir;
    up = R*up;
}; 
```

rotate 方法创建一个旋转矩阵，该矩阵围绕轴旋转一定度数。

--

编辑：我将它编辑为这个（也将“dir”切换为“center”），但它仍然没有用。当我尝试向左/向右旋转时，没有任何反应。当我尝试向上/向下旋转时，对象消失了。

```
void Transform::left(float degrees, vec3& center, vec3& up) {
    center = center*rotate(-degrees,glm::normalize(up));
}
void Transform::up(float degrees, vec3& center, vec3& up) {
    vec3 axis = glm::normalize(glm::cross(center,up));
    center = center*rotate(-degrees, axis);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:14:22.577

rotate() 方法没有定义，好像忘记实现了。它似乎是围绕任意轴旋转，您可以从公式 [http://upload.wikimedia.org/math/f/b/a/fbaee547c3c65ad3d48112502363378a.png](http://upload.wikimedia.org/math/f/b/a/fbaee547c3c65ad3d48112502363378a.png)
（轴和角度的旋转矩阵）形式 Wiki [http实现它://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

代码：

```
mat3 Transform::rotate(const float degrees, const vec3& axis) { 
glm::mat3 m3;
glm::mat3 I(1.0f,0.0f,0.0f,0.0f,1.0f,0.0f,0.0f,0.0f,1.0f);
glm::mat3 T(axis.x*axis.x, axis.x*axis.y, axis.x*axis.z,axis.y*axis.x, axis.y*axis.y, axis.y*axis.z,axis.z*axis.x, axis.z*axis.y, axis.z*axis.z);
glm::mat3 A(0.0f,-axis.z, axis.y, axis.z, 0.0f, -axis.x,-axis.y,axis.x,0.0f);
m3 = glm::cos(degrees)*I + (1.0f-glm::cos(degrees))*T + glm::sin(degrees)*A;  return m3;} 
```

# visual-c++ - 查询：将 libsndfile 与 Visual Studio 2010 C++ 集成。错误：找不到 libsndfile.dll

> ID：13104714
> 
> 赞同：3
> 
> 时间：2012-10-27T22:25:25.377
> 
> 标签：visual-c++, dll, libsndfile

作为我学习 C++ 的一部分，我正在自学如何将 wav 文件读入 C++。我在网上找到了许多推荐以下库的资源：[libsnfile 库](http://www.mega-nerd.com/libsndfile) 所以我按照下面的一些教程来测试库的基本功能，但我无法使用 Visual Studio 2010 编译该库。

我在网上搜索了以下错误，但没有找到任何对我的特定错误有用的东西。[我下载了此处](http://www.mega-nerd.com/libsndfile/#Download)找到的 libsndfile C++ Windows 安装程序。我使用的是 32 位版本，因为我使用的是 win32 C++ 控制台版本。但是，我的 Visual Studio 是 64 位的。下载安装程序后，我执行了以下操作：

我进入了 Visual Studio。在我的项目下，我做了以下事情：

在项目属性中： 1\. VC++

> > 包含 >> 添加 ...\libsnfile\include 库 >> 添加 ...\libsnfile\lib 2\. C\C++ 添加以下目录作为附加依赖
> > 项 ...\libsnfile\lib\libsndfile-1.lib

我这样做是为了将此第三方库添加到我的项目中。在此之后，为了测试，我运行了以下代码：

```
#include "stdafx.h"
#include <stdio.h>
#include <stdlib.h>
#include <sndfile.h>

int _tmain(int argc, _TCHAR* argv[])
{
    printf("This is a test\n");

   getchar();
   return 0; 
} 
```

我对其进行了编码以确保我可以访问我的程序中的 sndfile.h 并编译所有内容。当我尝试实现以下代码时出现问题：

```
#include "stdafx.h"
#include <stdio.h>
#include <stdlib.h>
#include <sndfile.h>

int _tmain(int argc, _TCHAR* argv[])
{
    printf("This is a test\n");

    //This will be the length of the buffer used to hold samples while the program processes them. 

    //A SNDFILE is like FILE in a standard C library. Consequently, the sf_open_read and sf_open_write functions will return an 
    //SNDFILE* pointer when they successfully open the specified file. 
    SNDFILE* sf = NULL; 

    /*SF_INFO will obtain information of the file we wish to load into our program. */
    SF_INFO info; 

    /*This is where the program will open the WAV file */
    info.format = 0; 
    sf = sf_open("C:\Users\GeekyOmega\Desktop\gameon.wav", SFM_READ, &info);
    if(sf == NULL)
    {
        printf("Failed to open the file.\n");
        exit(-1);
    }

    getchar();
    return 0;
} 
```

然后，当我尝试运行我的程序时，在 Visual Studio 中单击运行时出现系统错误。它说，

```
The program can't start because libsnfile-1.dll is missing from your computer. 
Try reinstalling the program to fix this problem.` 
```

我尝试了 64 位 Windows 安装程序并尝试过，但它不起作用。有人明白我在做什么吗？我在 Windows 7 上运行 Visual Studio 的 2010 作为我的开发环境。

如果我犯了一个愚蠢的错误，我深表歉意，但如果有人能帮助我，我将不胜感激。正如我上面谈到的，我尝试了一些 hacky 修复，但没有任何效果。

编辑：我也知道这个线程[here](https://stackoverflow.com/questions/12767820/visual-studio-2010-dll-missing)，但这对我当前的问题没有任何意义，因为我没有做他们正在谈论的任何这条路径的东西。

热烈的问候， GeekyOmega

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:51:09.753

我解决了这个问题。我认为，对于未来的读者来说，这是一个非常普遍的问题。我将 .dll 放在了我的 Visual Studio 项目的调试文件夹中。否则，Visual Studio 看不到 .dll 文件。在此之后，程序按预期启动并运行。如果这不能为您解决问题，那么我建议可能发生其他事情。

# python - 为 Mac OSX 10.7 安装 NUMPY。(Lion) 用于 Python

> ID：13104717
> 
> 赞同：1
> 
> 时间：2012-10-27T22:25:54.643
> 
> 标签：python, osx-lion, nltk

我需要在 Python 中使用 nltk 和 numpy。我是 Python 的新手，最初使用我的 mac 附带的 python 2.7.3（当前运行 OSX 10.7.5）。我了解到苹果版的 python 可能不够健壮，所以我从 python.org 下载了标准版。

我已经下载了 Mac OSX 10.7 的 nltk 程序。这似乎安装得很好。我正在尝试使用 scipy 网站上的说明下载和安装 numpy。 [http://www.scipy.org/Installing_SciPy/Mac_OS_X](http://www.scipy.org/Installing_SciPy/Mac_OS_X)。

我从 github 克隆了 numpy，但是当我尝试使用以下命令构建它时

```
$ python setup.py build 
```

我收到以下错误

> MacOS/Python：无法打开文件“setup.py”：[Errno 2] 没有这样的文件或目录

我还尝试使用 scons 命令构建它

```
$ python setupscons.py scons --jobs=2 
```

并收到以下错误

> /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python：无法打开文件'setupscons.py'：[Errno 2]没有这样的文件或目录

谁能想到一个可能的解决方法？

# php - Origin wordpress主题中短代码中的评论链接

> ID：13104719
> 
> 赞同：1
> 
> 时间：2012-10-27T22:26:20.820
> 
> 标签：php, wordpress, comments

我正在为 wordpress 使用 Origin 主题，并且正在尝试自定义帖子正上方的评论链接。现在它显示评论的数量和文本“评论”，但我只想显示数字（当没有评论时显示 0）。我在 shortcodes.php 的主题 > 库 > 函数文件夹中找到了相关代码。

我如何编辑它以仅显示没有“评论”文本的评论数量，例如。“1”而不是“1 条评论”？

这是当前的代码：

```
function hybrid_entry_comments_link_shortcode( $attr ) {

    $comments_link = '';
    $number = doubleval( get_comments_number() );
    $attr = shortcode_atts( array( 'zero' => __( 'Leave a comment', 'hybrid-core' ), 'one' => __( '%1$s comment', 'hybrid-core' ), 'more' => __( '%1$s comments', 'hybrid-core' ), 'css_class' => 'comments-link', 'none' => '', 'before' => '', 'after' => '' ), $attr );

    if ( 0 == $number && !comments_open() && !pings_open() ) {
        if ( $attr['none'] )
            $comments_link = '<span class="' . esc_attr( $attr['css_class'] ) . '">' . sprintf( $attr['none'], number_format_i18n( $number ) ) . '</span>';
    }
    elseif ( 0 == $number )
        $comments_link = '<a class="' . esc_attr( $attr['css_class'] ) . '" href="' . get_permalink() . '#respond" title="' . sprintf( esc_attr__( 'Comment on %1$s', 'hybrid-core' ), the_title_attribute( 'echo=0' ) ) . '">' . sprintf( $attr['zero'], number_format_i18n( $number ) ) . '</a>';
    elseif ( 1 == $number )
        $comments_link = '<a class="' . esc_attr( $attr['css_class'] ) . '" href="' . get_comments_link() . '" title="' . sprintf( esc_attr__( 'Comment on %1$s', 'hybrid-core' ), the_title_attribute( 'echo=0' ) ) . '">' . sprintf( $attr['one'], number_format_i18n( $number ) ) . '</a>';
    elseif ( 1 < $number )
        $comments_link = '<a class="' . esc_attr( $attr['css_class'] ) . '" href="' . get_comments_link() . '" title="' . sprintf( esc_attr__( 'Comment on %1$s', 'hybrid-core' ), the_title_attribute( 'echo=0' ) ) . '">' . sprintf( $attr['more'], number_format_i18n( $number ) ) . '</a>';

    if ( $comments_link )
        $comments_link = $attr['before'] . $comments_link . $attr['after'];

    return $comments_link;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:32:28.073

您只需要删除相关位中的“评论”或“评论”一词。

有问题的行以`$attr = shortcode_atts( ....`

在这里为您修改：

```
function hybrid_entry_comments_link_shortcode( $attr ) {

    $comments_link = '';
    $number = doubleval( get_comments_number() );
    $attr = shortcode_atts( array( 'zero' => __( 'Leave a comment', 'hybrid-core' ), 'one' => __( '%1$s', 'hybrid-core' ), 'more' => __( '%1$s', 'hybrid-core' ), 'css_class' => 'comments-link', 'none' => '', 'before' => '', 'after' => '' ), $attr );

    if ( 0 == $number && !comments_open() && !pings_open() ) {
        if ( $attr['none'] )
            $comments_link = '<span class="' . esc_attr( $attr['css_class'] ) . '">' . sprintf( $attr['none'], number_format_i18n( $number ) ) . '</span>';
    }
    elseif ( 0 == $number )
        $comments_link = '<a class="' . esc_attr( $attr['css_class'] ) . '" href="' . get_permalink() . '#respond" title="' . sprintf( esc_attr__( 'Comment on %1$s', 'hybrid-core' ), the_title_attribute( 'echo=0' ) ) . '">' . sprintf( $attr['zero'], number_format_i18n( $number ) ) . '</a>';
    elseif ( 1 == $number )
        $comments_link = '<a class="' . esc_attr( $attr['css_class'] ) . '" href="' . get_comments_link() . '" title="' . sprintf( esc_attr__( 'Comment on %1$s', 'hybrid-core' ), the_title_attribute( 'echo=0' ) ) . '">' . sprintf( $attr['one'], number_format_i18n( $number ) ) . '</a>';
    elseif ( 1 < $number )
        $comments_link = '<a class="' . esc_attr( $attr['css_class'] ) . '" href="' . get_comments_link() . '" title="' . sprintf( esc_attr__( 'Comment on %1$s', 'hybrid-core' ), the_title_attribute( 'echo=0' ) ) . '">' . sprintf( $attr['more'], number_format_i18n( $number ) ) . '</a>';

    if ( $comments_link )
        $comments_link = $attr['before'] . $comments_link . $attr['after'];

    return $comments_link;
} 
```

# java - EditText 将字符串保存为整数然后将其乘以 3 不起作用？

> ID：13104723
> 
> 赞同：0
> 
> 时间：2012-10-27T22:26:54.017
> 
> 标签：java, android, android-edittext

我正在尝试制作一个基本的转换工具，稍后我将对其进行扩展。但是当我从 EditText 获取信息并将其转换为 Integer 然后尝试将其相乘时，我的应用程序在单击按钮时崩溃。我的Java代码如下，这个站点的新成员，但是已经使用它来寻求帮助了好几个星期了，所以谢谢你们已经提供了这么多的帮助

* * *

```
 package com.example.mayconverter;

 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;

 public class Feetyards extends Activity{

EditText feet;
Button convertFeet;
int formula;
TextView displayText;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.feet_yards);

    displayText =(TextView) findViewById(R.id.displayText);
    formula = 3;
    convertFeet = (Button) findViewById(R.id.buttonFeet);   
    final EditText feet = (EditText) findViewById(R.id.editTextFeet);

    convertFeet.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String data = feet.getText().toString();
            final int dataint = Integer.parseInt(data);

            displayText.setText(dataint + formula);

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:29:04.557

发布您的 LogCat 错误*总是*有帮助的，但看起来您有两个问题：

1.  您不小心创建*了两个*具有相同名称的变量`feet`：

    这会创建一个局部`feet`变量（不是您想要的）

    ```
    final EditText feet = (EditText) findViewById(R.id.editTextFeet); 
    ```

    使用它来初始化你的类变量`feet`：

    ```
    feet = (EditText) findViewById(R.id.editTextFeet); 
    ```

2.  您需要将“公式”转换回字符串：

    ```
    displayText.setText((dataint + formula) + ""); 
    ```

当您使用 时`setText(Int)`，这会尝试加载存储在资源中的字符串值，同时`setText(String)`显示传递给函数的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:28:52.970

替换这一行

```
displayText.setText(dataint + formula); 
```

和

```
displayText.setText((dataint + formula)+""); 
```

# dart - Dart 中的多行字符串

> ID：13104729
> 
> 赞同：27
> 
> 时间：2012-10-27T22:28:21.203
> 
> 标签：dart

我仍在研究 Dart。我只想将 .dart 中定义的字符串输出到我的 html 中。我查看了[https://sites.google.com/site/dartlangexamples/learn/variables/strings上的文档](https://sites.google.com/site/dartlangexamples/learn/variables/strings)

我知道我需要使用“””。

当我打印我的查询时，我得到了很好的结果，但是当我用 html 输出它时，它们是并排的。

它是：

.dart：

```
 var symbole = """
      *          
      *** 
    *****  
  ******* 
*********""";
  var element03 = query('#exercice03');
  element03.innerHTML = symbole;
  print(symbole); 
} 
```

Print 给出了我在 var symbole 中设置的确切内容，但是在我的 HTML 中，我得到了这个：

* * *

```
My html is :

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>HelloWorld</title>
    <link rel="stylesheet" href="HelloWorld.css">
  </head>
  <body>
    <div id="container">

      <p class="question">Exercice : Pritn the * : <span id="exercice03"></span></p>
    </div>

    <script type="application/dart" src="web/HelloWorld.dart"></script>
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

我不明白为什么在我的输出 html 中我没有得到与我的飞镖编辑器中的打印相同的结果，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-28T10:52:36.203

我不确定我是否在这里关注你——你想要这个吗？

```
 var symbole = """
      *<br />
      ***<br />
    *****<br />
  *******<br />
*********<br />""";
var element03 = query('#exercice03');
element03.innerHTML = symbole; 
```

我刚刚添加了断线

所以正如马特 B 所说， 的输出`print()`格式与浏览器上的 HTML 不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T01:49:44.843

这是因为 HTML 对空格不敏感。即解析时不显示html中的新行。您需要使用换行符`<br>`，或者需要将其包装在预先格式化的`<pre>`标签中

# xcode - 如何在interface builder mac os x和底栏中插入全屏按钮和底栏

> ID：13104732
> 
> 赞同：1
> 
> 时间：2012-10-27T22:28:29.463
> 
> 标签：xcode, macos

我不明白如何在界面生成器中插入右上角的全屏按钮，如下图：

![在此处输入图像描述](../Images/f093d7649bfe5be388e81b65edd8fc4b.png)

然后还有一个像这样的底栏：

![在此处输入图像描述](../Images/3fc74a054d0969a1b95f60b55271f669.png)

如果我在 Xcode 中创建一个新应用程序，窗口是这样的：

![在此处输入图像描述](../Images/2f12c4936e3feb1b35b9eb0f78844f5f.png)

并且没有角落全屏按钮，也没有底栏......有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:51:59.310

在 Xcode 4.5.2 中，界面生成器中有一个选项可以设置此功能（只需在 IB 中选择您的窗口，该选项在窗口的属性检查器中命名为“全屏”，默认设置为“不支持”，只需切换它在“主窗口”上）

对于“底栏”......我认为它只是一个小于 NSWindow 的 NSView ^^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:47:32.480

你应该在你的 NSApplication 中使用全屏 API。

转到以下链接以了解如何实现此功能。另请注意，此选项仅适用于 Mac OS 10.7.x 和 Mac OS 10.8.x。[Mac OS X 10.6.x 和兼容 10.6.x 的 Xcode 将不支持此功能]

[https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html)

确保您还拥有最新版本的操作系统和 Xcode。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T09:52:39.297

NSWindow -> 大小检查器 -> 内容边框

# php - preg_replace 或正则表达式字符串翻译

> ID：13104733
> 
> 赞同：-1
> 
> 时间：2012-10-27T22:28:32.650
> 
> 标签：php, regex

我找到了一些部分帮助，但似乎无法完全完成我所需要的。我需要能够执行以下操作：

我需要一个正则表达式来用匹配任何表达式替换两个长于 3 个字符的单词之间的任何 1 到 3 个字符的单词：

例如：

```
walk to the beach ==> walk(.*)beach 
```

如果 1 到 3 个字符的单词前面没有超过 3 个字符的单词，那么我想将该 1 到 3 个字母的单词翻译成`'<word> ?'`

例如：

```
on the beach ==> on ?the ?beach 
```

规则越简单越好（当然，如果有更复杂的替代版本，性能更高，那么我会采用它，并且我最终预计最终会大量使用）。

这将在最有可能与[`preg_replace`](http://php.net/preg_replace). 因此，如果你能把它放在那个上下文中，那就更好了！

到目前为止，我得到了以下信息：

```
$string = preg_replace('/\s+/', '(.*)', $string); 
$string = preg_replace('/\b(\w{1,3})(\.*)\b/', '${1} ?', $string); 
```

但这会导致：

```
walk to the beach ==> 'walk(.*)to ?beach' 
```

这不是我想要的。`'on the beach'`似乎翻译正确。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-27T22:47:49.553

我认为您将需要两个替代品。让我们从第一个要求开始：

```
$str = preg_replace('/(\w{4,})(?: \w{1,3})* (?=\w{4,})/', '$1(.*)', $str); 
```

当然，您需要将那些`\w`（匹配字母、数字和下划线）替换为您真正想要视为单词字符的字符类。

第二个更难一些，因为匹配不能重叠，并且lookbehinds不能是可变长度的。所以我们必须在一个循环中运行多次：

```
do
{
    $str = preg_replace('/^\w{0,3}(?: \w{0,3})* (?!\?)/', '$0?', $str, -1, $count);
} while($count); 
```

在这里，我们匹配从字符串开头开始的所有内容，只要它只是由空格分隔的最多 3 个字母的单词，再加上一个尾随空格（**仅当**它后面没有 a 时`?`）。然后我们将所有这些放回原处，并附加一个`?`.

**更新：**

在评论中进行了所有讨论之后，这是一个更新的解决方案。

运行第一行后，我们可以假设剩下的少于 3 个字母的单词将位于字符串的开头或结尾。所有其他人都将被折叠到`(.*)`. 由于您想在 之间添加所有空格`?`，因此您甚至不需要循环（实际上这些是剩下的唯一空格）：

```
$str = preg_replace('/ /', ' ?', $str); 
```

（在我的第一行代码之后立即执行此操作。）

这将给出以下两个结果（结合第一行）：

```
let us walk on the beach now go => let ?us ?walk(.*)beach ?now ?go
let us walk on the beach there now go => let ?us ?walk(.*)beach(.*)there ?now ?go 
```

# java - 字符串将特定数量的单词打印到新行

> ID：13104736
> 
> 赞同：1
> 
> 时间：2012-10-27T22:28:47.260
> 
> 标签：java

我想知道如何更改我的代码，以便在另一个类中指定给定值字的数量。在构造类中，我需要创建一个打印每个给定值的方法。这是我的代码：

```
public void wordBox()
    {
        for (int i = 0; i < words.length(); i++)
        {
        if (words.length() % wordsPerLine == 0 && words.charAt(wordsPerLine) == ' ')
            System.out.println();               
        else 
            System.out.print(words.charAt(i));
        }
        System.out.println();
    } 
```

wordsPerLine 在另一个类中被指定为 3 的数字。字符串是这样的："the quick brown fox jumped over the lazy dog"

输出应该是这样
的：快速的棕色
狐狸跳过了
懒狗

注意：我不允许使用任何其他类，如令牌或缓冲区。另外，我不能使用替换/拆分。所以，这就是我得到的，我需要从那里开始工作。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:35:13.207

`words`与其在构造函​​数中设置和`wordsPerLine`实例变量，不如将它们作为参数传递给您的静态方法，如下所示：

```
public static void wordBox(String words, int wordsPerLine) {
    int count = 1;
    for (int i = 0; i < words.length(); i++)
    {
    if (words.charAt(i) == ' ' && (count++) % wordsPerLine == 0)
        System.out.println();               
    else 
        System.out.print(words.charAt(i));
    }
    System.out.println();
} 
```

这样，您将能够独立于构造函数进行指定，并`words`使用任意单词组合和每行所需的单词数从任何地方调用。`wordsPerLine``wordBox`

这是[ideone 与这个正在运行的程序](http://ideone.com/clone/9KAJ0Z)的链接。

# android - 处理多点触控

> ID：13104740
> 
> 赞同：2
> 
> 时间：2012-10-27T22:29:31.823
> 
> 标签：android, button, action, motionevent

我想做的是处理多点触控按钮。我有 6 个按钮，用户可以触摸 1 到 6 个按钮。问题是`MotionEvent`最多可以处理 3 个指针，但我需要最多 6 个指针。请问有什么帮助吗？

这是代码：

```
public class MultitouchtestActivity extends Activity {
    private class TouchListener implements OnTouchListener {

        @Override
        public boolean onTouch(final View v, final MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                switch (v.getId()) {
                case R.id.button1:
                    sqText = "Square 1 Pressed::Pointer count = "
                            + String.valueOf(event.getPointerCount());
                    break;
                case R.id.button2:
                    sq1Text = "Square 2 Pressed::Pointer count = "
                            + String.valueOf(event.getPointerCount());
                    break;
                case R.id.button3:
                    sq2Text = "Square 3 Pressed::Pointer count = "
                            + String.valueOf(event.getPointerCount());
                    break;
                case R.id.button4:
                    sq3Text = "Square 4 Pressed::Pointer count = "
                            + String.valueOf(event.getPointerCount());
                    break;
                case R.id.button5:
                    sq4Text = "Square 5 Pressed::Pointer count = "
                            + String.valueOf(event.getPointerCount());
                    break;
                case R.id.button6:
                    sq5Text = "Square 6 Pressed::Pointer count = "
                            + String.valueOf(event.getPointerCount());
                    break;
                }

            } else if (event.getAction() == MotionEvent.ACTION_POINTER_1_DOWN) {
                switch (v.getId()) {
                case R.id.button1:
                    sqText = "Square 1 Pointer1Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button2:
                    sq1Text = "Square 2 Pointer1Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button3:
                    sq2Text = "Square 3 Pointer1Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button4:
                    sq3Text = "Square 4 Pointer1Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                }
            } else if (event.getAction() == MotionEvent.ACTION_POINTER_2_DOWN) {
                switch (v.getId()) {
                case R.id.button1:
                    sqText = "Square 1 Pointer2Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button2:
                    sq1Text = "Square 2 Pointer2Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button3:
                    sq2Text = "Square 3 Pointer2Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button4:
                    sq3Text = "Square 4 Pointer2Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                }
            } else if (event.getAction() == MotionEvent.ACTION_POINTER_3_DOWN) {
                switch (v.getId()) {
                case R.id.button1:
                    sqText = "Square 1 Pointer3Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button2:
                    sq1Text = "Square 2 Pointer3Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button3:
                    sq2Text = "Square 3 Pointer3Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                case R.id.button4:
                    sq3Text = "Square 4 Pointer3Down::Pointer count = "
                            + String.valueOf(event.getPointerCount()) + "\n";
                    break;
                }

            }

            // TODO Auto-generated method stub
            return true;
        }
    }

    protected Button sq1;
    protected Button sq2;
    protected Button sq3;
    protected Button sq4;
    protected Button sq5;
    protected Button sq6;

    protected String sqText = new String();
    protected String sq1Text = new String();
    protected String sq2Text = new String();
    protected String sq3Text = new String();
    protected String sq4Text = new String();
    protected String sq5Text = new String();

    private final Handler handler = new Handler();

    private final Runnable mUpdateUITimerTask = new Runnable() {
        @Override
        public void run() {
            // do whatever you want to change here, like:
            updateTextField();
        }
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setViews();
        handler.postDelayed(mUpdateUITimerTask, 5000);
    }

    private void setViews() {
        sq1 = (Button) findViewById(R.id.button1);
        sq2 = (Button) findViewById(R.id.button2);
        sq3 = (Button) findViewById(R.id.button3);
        sq4 = (Button) findViewById(R.id.button4);
        sq5 = (Button) findViewById(R.id.button5);
        sq6 = (Button) findViewById(R.id.button6);

        sq1.setOnTouchListener(new TouchListener());
        sq2.setOnTouchListener(new TouchListener());
        sq3.setOnTouchListener(new TouchListener());
        sq4.setOnTouchListener(new TouchListener());
        sq5.setOnTouchListener(new TouchListener());
        sq6.setOnTouchListener(new TouchListener());
    }

    private void updateTextField() {
        final TextView view1 = (TextView) findViewById(R.id.logView);
        final TextView view2 = (TextView) findViewById(R.id.logView1);
        final TextView view3 = (TextView) findViewById(R.id.logView2);
        final TextView view4 = (TextView) findViewById(R.id.logView3);
        final TextView view5 = (TextView) findViewById(R.id.logView4);
        final TextView view6 = (TextView) findViewById(R.id.logView5);

        // view1.append(sqText + "\n");
        view1.setText(sqText);
        view2.setText(sq1Text);
        view3.setText(sq2Text);
        view4.setText(sq3Text);
        view5.setText(sq4Text);
        view6.setText(sq5Text);

        handler.post(mUpdateUITimerTask);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:51:19.143

您可以使用 android 检测到的指针数量取决于设备。一些较旧的只能检测到一个，而更现代的可能能够检测到更多。

如果您想在市场上发布您的应用程序，请确保您的应用程序也可以在指针较少的设备上运行。

# ios - UITableViewCell 的自定义代码

> ID：13104742
> 
> 赞同：0
> 
> 时间：2012-10-27T22:29:48.947
> 
> 标签：ios, ios5, uitableview

我想知道在哪里输入自定义代码来更改 UITableViewCell 的 Label 属性的值。

我不确定这是如何加载的，因为我在 ViewDidLoad 和 (id)initWithStyle 实例方法中放置了一个 NSLog，但都没有写入日志。

我已经设置了一个 NIB 和自定义类都正确链接，并且标签作为属性链接，不再导致错误。但我无法设置文本。

这是自定义单元格的调用方式：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
LeftMenuTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"LeftMenuTableViewCell" owner:nil options:nil];

    for (UIView *view in views) {
        if([view isKindOfClass:[UITableViewCell class]])
        {
            cell = (LeftMenuTableViewCell*)view;

        }
    }
}

return cell;
} 
```

这是 LeftMenuViewCell 类的 IMP 文件中的代码。

```
-(void)viewDidLoad {

displayName.text = [self.user objectForKey:@"displayName"]; 
```

我可以将 displayName 设置为字符串，这也不会改变。如果我将 NSLog 添加到自定义单元格类的 viewDidLoad 中，它不会显示，就像它没有加载一样，但单元格已加载......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:35:28.057

没有代码细节，我只能给出一个模糊的答案。

您的自定义单元格将需要子类`UITableViewCell`化，并且您需要为您的表格提供此自定义子类时的数据源方法`tableView:cellForRowAtIndexPath:`。

我建议阅读如何在`UITableView`s 中添加/使用单元格：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc /uid/TP40007451-CH7-SW1](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:37:17.360

**例如**

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

 RouteCell *routeCell = [self.tableView dequeueReusableCellWithIdentifier:routeIdentifier];

if (routeCell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"RouteCell" owner:nil options:nil];
    routeCell = [nib objectAtIndex:0];
}

routeCell.travelTime.text = @"Here you are setting text to your label";

return routeCell; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:14:21.830

假设您有一个名为 testLabel 的带有 UILabel 的自定义 UITableViewCell。如果您的 NIB 和自定义类正确链接，则可以使用以下代码：

MyTableViewCell.h

```
@interface MyTableViewCell : UITableViewCell

@property (nonatomic, assign) IBOutlet UILabel *testLabel;

@end 
```

UITableViewController 或 UIViewController 中的 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
      static NSString *CellIdentifier = @"MyTableViewCellId";
      MyTableViewCell *cell = (MyTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

      if (cell == nil) {
          NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"MyTableViewCell" owner:self options:nil];
         cell = [topLevelObjects objectAtIndex:0];    
      }

      [cell.testLabel.text = [_dataSource objectAtIndex:[indexPath row]]];

      return cell;
} 
```

希望能帮助到你 ：）

# php - onclick 在 DIV 上，从其他 div 的数据库中加载内容

> ID：13104744
> 
> 赞同：0
> 
> 时间：2012-10-27T22:30:11.350
> 
> 标签：php, ajax, html

我的概念是在 html 中将 div 的内容加载到其他 div 上。简而言之，我想了解新的 Facebook 收件箱是如何工作的，当我们单击右侧的消息时，从数据库中获取内容并加载到中心列中。我知道它是由一些 AJAX 完成的，但无法弄清楚它是如何实现的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:59:36.500

如果您使用的是 jquery，则可以在 div 上使用 onclick 事件。

这是这样工作的 HTML/JS。

```
<!doctype html>
<html>
    <head>
        <title>Document Title</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script>
            $('.clickable').on('click', function(){
                var data_id = $(this).data('id');
                $.ajax({
                    url: 'ajax.php',
                    type: 'POST',
                    data: {id: data_id},
                    dataType: 'json',
                    success: function(data){
                        $('#more-info').html(data.html);
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        $('#more-info').html('');
                        alert('Error Loading');
                    }
                });
            });

            });
        </script>
    </head>
    <body>
        <div id="item-one" class="clickable" data-id="123">Click me</div>
        <div id="item-two" class="clickable" data-id="456">Click me</div>
        <div id="more-info"></div>
    </body>
</html> 
```

假设我们有一个名为**ajax.php**的 PHP 文件，它将返回一个 json，就像我们之前在 ajax 函数**dataType: 'json'**中指定的那样，我们通过 POST 发送一个**ID**，所以这里有一个示例，您必须对其进行处理。

**ajax.php**

```
<?php
$id = (int)$_POST['id'];
$query = "SELECT * FROM messages WHERE message_id = {$id} LIMIT 1"; //expecting one row
$result = mysql_query( $query );
$message = mysql_fetch_assoc( $result ); //expecting just on row

$json = array();
$json['html'] = '<p>' . $message . '</p>';

header('Content-Type: application/json');
echo json_encode( $json );
?> 
```

# php - ftp_connect 或 curl ftp url

> ID：13104745
> 
> 赞同：0
> 
> 时间：2012-10-27T22:30:39.957
> 
> 标签：php, ftp

我有一个更快的问题，ftp_connect 或构建 ftp url`ftp://username:password@server`并使用 curl 或 file_get_contents 检索目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:35:41.763

`USER`FTP 使用and命令发送凭据`PASS`，因此您提供的 URL 只是将所有内容传递给打包在单个参数中的客户端 API 的便捷方法（然后库将拆分 URL 并提取执行原始套接字对话所需的参数)

这同样适用于也接受用户和密码的其他 URL（如数据库连接字符串）

# php - 通过 PHP 问题从网站发送电子邮件表单

> ID：13104746
> 
> 赞同：1
> 
> 时间：2012-10-27T22:31:18.633
> 
> 标签：php, html, forms, email, web

我正在编写一个个人网站，但我的联系人有问题。如果您能帮我找出问题所在，我将不胜感激。

该网站的链接是 www.tiryakicreative.com，php 表单的代码如下：

```
<div id="form">
<form id="ajax-contact-form" action="contact_form/send_form_email.php…
<fieldset class="info_fieldset">
<div id="note"></div>
<div id="fields">
<label>Name</label>
<input class="textbox" type="text" name="name" value="" />
<label>E-Mail</label><input class="textbox" type="text" name="email" value="" />     
<label>Subject</label>
<input class="textbox" type="text" name="subject" value="" />
<label>Message</label>
<textarea class="textbox2" name="message" rows="5" cols="25"></textarea>
<label> </label><input class="button" type="image" src="send2.gif" id="submit"   Value="Send Message" />    
</div>
</fieldset>
</form>
</div>
</div> 
```

这是给定 html 代码的 php 代码：

```
<?php
if(isset($_POST['email'])) {

// EDIT THE 2 LINES BELOW AS REQUIRED
$email_to = "ian_tiryaki@hotmail.com";
$email_subject = "New Email from Website";

function died($error) {
// ERROR CODE GOES HERE
echo "We are very sorry, but there were error(s) found with the form you submitted. ";
echo "These errors appear below.";
echo $error."";
echo "Please go back and fix these errors.";
die();
}

// validation expected data exists
if(!isset($_POST['name']) || 
!isset($_POST['email']) ||
!isset($_POST['subject']) ||
!isset($_POST['message'])) {
died('We are sorry, but there appears to be a problem with the form you submitted.'); 
}

$first_name = $_POST['name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['subject']; // not required
$comments = $_POST['message']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Z…
if(!preg_match($email_exp,$email_from)) {
$error_message .= 'The Email Address you entered does not appear to be valid.';
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
$error_message .= 'The Name you entered does not appear to be valid.';
}
if(!preg_match($string_exp,$last_name)) {
$error_message .= 'The subject you entered does not appear to be valid.';
}
if(strlen($comments) < 2) {
$error_message .= 'The message you entered do not appear to be valid.';
}
if(strlen($error_message) > 0) {
died($error_message);
}
$email_message = "Form details below.\n\n";

function clean_string($string) {
$bad = array("content-type","bcc:","to:","cc:",…
return str_replace($bad,"",$string);
}

$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Subject: ".clean_string($telephone)."\n";
$email_message .= "Message: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
?>

<!-- include success html here -->

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:18:11.343

您是否在用户发送电子邮件后收到电子邮件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:21:56.450

尝试添加

```
error_reporting(E_ALL); 
```

到脚本的顶部。

您也可以尝试从邮件命令中删除 @

```
mail($email_to, $email_subject, $email_message, $headers); 
```

因为这将抑制正在生成的任何错误。

它可能是一些简单的事情，例如禁用附加标头的 PHP 邮件功能（某些主机出于安全原因这样做），在这种情况下邮件功能将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T12:54:39.757

将此设置在您的操作表单中...您肯定会从这里收到邮件..虽然有错误，但您可能会使用下面的代码使用php发送邮件而不声明变量...比如

```
$email_to=$_POST['email'];
$email_subject=$_POST['subject'];
$email_message=$_POST['message'];
$headers=$_POST['title'];

    mail('$email_to', '$email_subject', '$email_message', '$headers'); 
```

否则使用下面的代码发送邮件

```
mail('$_POST['email']','$_POST['subject']','$_POST['message']','$_POST['title']'); 
```

# database - 参考表与存储表的表命名约定

> ID：13104747
> 
> 赞同：0
> 
> 时间：2012-10-27T22:31:44.983
> 
> 标签：database, database-design, naming, convention

引用表是指一种实体“类型”表，存储表是指存储大量变化信息的表。

例如：

我有一个这样命名的“用户”表，它是一个存储表，因为它可以容纳不确定数量的用户。

然后我有“角色”表，其中包含角色信息，它是一个类型表，因为每个角色都有很多用户。

然后我有一个“配置文件”表，它与“用户”表保持一对一的关系。

现在，我试过这个：

*   用户
*   用户角色
*   用户资料

然而，这个约定对我来说意味着角色和配置文件表每个都与用户具有一对一的关系，而我知道角色表没有。

对于我描述的示例，人们通常如何出于语义目的命名表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:38:32.563

Oracle 约定在这里运行良好。

*   普通表的复数（用户表的用户。表本身是许多用户的存储，所以我将其命名为描述其中的数据）
*   User_Roles 将是不同的角色列表。
*   User_Role_Assignments 用户角色列表。我想如果用户可以具有任何角色并且可以将角色分配给任何用户，那么您会在这里想要多对多。
*   User_Profiles 将是不同的配置文件列表。
*   表的 User_Profile_Assignments 是用户和配置文件之间的多对多关系。

如果您有一对一的关系，那么其中一个表应该有另一个表的键。如果存在一对一关系，用户应该有一个 profile_id。

# tags - FMJ，JMF 民事，关于一个血腥的头痛

> ID：13104752
> 
> 赞同：2
> 
> 时间：2012-10-27T22:32:20.493
> 
> 标签：tags

我正在尝试编写一个使用网络摄像头的 Java 应用程序，但我很绝望。感觉就像不可能完成的任务。

我有两个网络摄像头。它们被 Ubuntu 识别如下

```
ls /dev/vi*

/dev/video0  /dev/video1

ls /dev/v4l/by-id

usb-0471_0310_0169000099000000-video-index0
usb-Fujitsu_Siemens_Computers_FSC_WebCam_130-video-index0 
```

它们可以与任何软件完美配合

vlc，奶酪网络摄像头......你的名字

但是使用 java... (OM G...)

经过一周的尝试和失败...

JMF：不管我怎么试，都不认识这两个摄像头。FMJ（似乎使用民用）在安装 avformat 库后仅识别 video0

但

*   我无法在注册表应用程序中单击添加设备按钮添加任何设备，没有任何反应
*   在 fmjstudio 中，选择 video0，我得到

> 未知或不支持的格式：1448695129

无论如何，在所有情况下，我都不知道如何编写一些严肃且可供任何不知道如何/想要安装库并开始与其他软件包安装作斗争的用户使用的东西

这些库只是纯粹的废话

一个简单的 cat 命令将转储网络摄像头流的内容

那么有谁知道那些蹩脚的图书馆有什么严肃的选择吗？

# jquery - 带有jquery ui多个滑块的表单...只为所有人提交一个值

> ID：13104757
> 
> 赞同：3
> 
> 时间：2012-10-27T22:32:44.313
> 
> 标签：jquery, forms, sliders

我一直在通过 stackoverflow 和其他地方自学，并且学到了很多东西，但对此我还是很陌生。我正在设置一个带有 5 个滑块的表单，然后将其值发布到 PHP 页面。一切正常......除了表单提交每个滑块的最终滑块的值。我想我需要使用`this`属性或`each`函数，但我不确定如何......

这是我的 JS：

```
$(function(){

    var currentValue = $('#currentValue');

    $("#slider1,#slider2,#slider3,#slider4,#slider5").slider({ 
        range: "min",
        value:37,
        min:1,
        max: 500,
        slide: function(event, ui) {
            currentValue.html(ui.value);
            $("input:hidden").val(ui.value);
        }
    });

}); 
```

这是我的 HTML：

```
<input type=hidden name="slider1" id="slider1" class="slider-input" value="ui.value" />
<input type=hidden name="slider2" id="slider2" class="slider-input" value="ui.value" />
<input type=hidden name="slider3" id="slider3" class="slider-input" value="ui.value" />
<input type=hidden name="slider4" id="slider4" class="slider-input" value="ui.value" />
<input type=hidden name="slider5" id="slider5" class="slider-input" value="ui.value" /> 
```

有什么建议么？我难住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:49:09.667

由于对表单中的输入结构缺乏更好的理解，我将假设表单中唯一的隐藏字段与每个滑块匹配，以便可以对它们进行索引。

有时在循环中实现插件更容易，`each`因此您可以简单地访问 javscript 闭包中集合的每个元素。jQuery UI 可以让您访问事件中的各个元素，但并非所有插件都这样做，因此这种模式有时会非常有用。

```
var $sliders=$("#slider1,#slider2,#slider3,#slider4,#slider5")

$sliders.each(function(){
    /* now have access to individual slider eleemnt*/
   var $slide=$(this);
      /* match input index to index of this slider*/
    var $input= $("input:hidden").eq(  $sliders.index($slide) );
    /* initiate slider on this element*/
     $slide.slider({ 
        range: "min",
        value:37,
        min:1,
        max: 500,
        slide: function(event, ui) {
            currentValue.html(ui.value);
            /* assign value to correct input */
            $input.val(ui.value);
        }
    });
}); 
```

# c - 在 C 中对结构数组进行部分初始化时会发生什么？

> ID：13104767
> 
> 赞同：6
> 
> 时间：2012-10-27T17:05:41.633
> 
> 标签：c, coding-style

这段代码是什么意思？

```
struct foo_t {
    int a;
    int b;
} foo[10] = {{0,0}} 
```

foo[0] 是`{0,0}`，但其余的呢？C标准如何处理这个？

*添加。*[我在这里](https://stackoverflow.com/questions/10828294/c-and-c-partial-initialization-of-automatic-structure)建立了一个详尽的答案。我认为我的问题应该被删除。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T22:22:37.490

整个数组将使用 和 的值为 0 的结构进行`a`初始化`b`。这类似于以下具有原始值的情况：

```
int foo[10] = {0}; 
```

数组中的每个整数都将使用 value 进行初始化`0`。

C99 标准规定了以下内容：

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:13:49.530

值 0 通常意味着列表的结尾。我的意思是当你迭代这样一个列表并遇到这个值时，玩具知道你已经到了尽头。我想制作这个广告的人在他的脑海中会出现这样的情况。如果您搜索代码，您可能会发现在列表中附加一个值后设置零值的代码片段。

# iphone - iOS自定义字体不起作用

> ID：13104770
> 
> 赞同：0
> 
> 时间：2012-10-27T22:35:19.053
> 
> 标签：iphone, ios, ipad

我正在尝试在我的应用程序中使用[这种字体](http://www.dafont.com/dk-crayon-crumble.font)。我已将它添加到 plist 和项目中，但由于某种原因它没有加载到标签上。我尝试使用以下方法验证项目中的字体：

```
NSLog(@"DK Crayon Crumble: %@",
          [UIFont fontNamesForFamilyName:@"DK Crayon Crumble"]); 
```

但我得到这个输出：

```
DK Crayon Crumble: ( ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:57:44.150

我发现了问题。由于某种原因，Xcode 没有将字体文件复制到捆绑包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:14:00.070

内置字体的约定（您可以在 Interface Builder 中选择它们）是消除空格并在连字符后添加属性，例如

```
@"HelveticaNeue-Bold" 
```

为`Helvetica Neue, Bold`.

我不知道你字体的确切名称，但如果你遵循这个方案，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T05:21:02.980

有时字体在项目文件中可见，但实际上并未添加到目标中

单击项目名称->单击目标->构建阶段，转到

“复制捆绑资源”，如果相关字体（.ttf 扩展名）文件不存在，则将其添加到列表中。

清理您的项目并运行您应该能够看到字体。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-27T23:12:07.317

也许问题在于字体名称带有空格。删除真实文件名中的空格，再次将其添加到您的 plist 并使用代码重试：

```
[UIFont fontNamesForFamilyName:@"DKCrayonCrumble"]; 
```

此链接可帮助您设置字体：

[设置自定义字体](https://stackoverflow.com/questions/13029660/use-custom-fonts-in-iphone-app/13029722#13029722)

# django - 部署到 Heroku 时，图像在 Django 应用程序中消失

> ID：13104771
> 
> 赞同：3
> 
> 时间：2012-10-27T22:35:19.537
> 
> 标签：django, heroku

我已将我的应用程序部署到 Heroku，但不再加载某些图像。

例如，人们的个人资料照片没有显示，但如果该人重新上传一张，它将是可见的。但是，当他们再次注销/登录时，图片不再存在。

什么会导致这种行为，我该如何解决？本地一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:19:59.700

我在[http://www.gettingstartedwithdjango.com/introduction-and-launch.html#what-heroku-does-every-time-you-push-to-them-is上找到了这些信息](http://www.gettingstartedwithdjango.com/introduction-and-launch.html#what-heroku-does-every-time-you-push-to-them-is)

Heroku 每次向他们推送时所做的是：

*   使用自己的虚拟机、虚拟环境和通过 pip 安装的包创建一个新的应用程序空间。
*   将子域交换到新位置。
*   删除旧的应用程序空间。

这意味着添加到应用程序中的任何不在 Git 中的内容都不会在两次推送之间持续存在。更重要的是，无论如何，这个完全相同的过程每 24 小时发生一次，所以上传的文件必须放到 Heroku 以外的其他地方。

您可能会将此视为问题的可能来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-16T12:17:33.053

这是来自[pythonanywhere](https://www.pythonanywhere.com)博客的答案，它可能会回答您的问题。基本上，在投入生产时，设置（在 settings.py 中）`DEBUG = False`会对篡改图像 url 的文件产生安全锁。

所以基本上文件路径更改是为了`MEDIA_ROOT`从开发到生产。更多信息请参见[此处](https://www.pythonanywhere.com/forums/topic/1674/#id_post_47183)的博客。

希望这可以帮助！

# javascript - javascript 如何 var newclass(in) = oldclass(null, in)？

> ID：13104776
> 
> 赞同：2
> 
> 时间：2012-10-27T22:36:13.543
> 
> 标签：javascript

请原谅我在这里没有使用任何技术描述，因为我是 javascript 新手。但对于任何学习过 javascript 的人来说，这都是一个简单的问题。

我只是想创建一个新类，它只从现有的一个参数中获取一个参数，该类需要两个或多个参数。

```
var newclass(arg) = oldclass(1,"hello",arg); // newclass is pre-filled with 1 and "hello" 
```

因此，我想基本上预先填充参数，所以我可能只需要传入一个参数。在 javascript 中这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:38:52.200

JavaScript 不支持默认参数。您可以执行以下操作：

```
function newClass(arg) {
  return oldClass(1, "hello", arg);
} 
```

或者：

```
function oldClass(arg1, arg2, arg3) {
  arg2 = typeof arg2 !== 'undefined' ? arg2 : "hello";
  arg3 = typeof arg3 !== 'undefined' ? arg3 : 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:44:02.333

[这](http://ejohn.org/blog/simple-javascript-inheritance/)是 John Resig 如何创建类的一个很好的例子。

基本上按照他的例子，你的新课程将是：

```
var newClass = Class.extend({
    init: function (args) {
        this._super(1, "hello", args);
    }
}); 
```

# php - 使用 PHP 的动态表单字段

> ID：13104780
> 
> 赞同：0
> 
> 时间：2012-10-27T22:36:56.060
> 
> 标签：php, html

我正在为以下问题寻找解决方案/最佳实践。

我有一个带有一个下拉列表和一个提交按钮的 HTML 表单的页面。下拉框下方是一个空白空间，我想根据下拉框中的选定值填充表单输入。我认为这可以在 JavaScript 中完成，但如果可能的话，我更喜欢 PHP/客户端解决方案。

示例 HTML：

```
<form name="initialdropdown" action="#" method="post">
    <select name="action">
    <option value="default">--select--</option>
    <option value="a">Option 1</option>
    <option value="b">Option 2</option>
    <option value="c">Option 3</option>
    <option value="d">Option 4</option>
    </select>
    <input type="submit" name="submit" value="submit"></input>
</form> 
```

我已经探索过从表单操作调用这个 php 脚本：

```
 <?php

    $getOption = $_POST['action'];
    $addUrl = $getOption.".php";

    include $addUrl;
    header("Location: htmlpage.php");

    ?> 
```

然后创建几个不同的 php 文件（a.php、b.php、c.php 等。在每个文件中，然后包括我想在函数中回显的 HTML 表单，并将函数包括在主 HTML 页面。我不觉得这是一个好方法。任何人都可以阐明解决这个问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:42:35.353

如果您想在选择不同选项时更新的 HTML 表单上显示某些内容，那么 JavaScript 是自然的选择，因为您不必去向服务器发出请求，这意味着移动数据并等待响应。当用户与页面交互时，JavaScript 可以简单地更改页面任意多次。

但是，如果您一心想用 PHP 生成您想在该表单上显示的任何内容，您可以让 PHP 将显示信息直接输出到 JavaScript 中的页面。然后 JavaScript 显示来自 PHP 的数据。或者，您可以使用对 PHP 的 AJAX 调用来请求在每次选择不同选项时显示数据。

**更新**

鉴于您的最新评论，您可以非常轻松地设置更多表单选项，而无需使用 PHP。在 HTML 中设置您可能想要显示的所有各种表单选项，但使用 CSS 隐藏可选部分。然后根据需要使用一点 JavaScript 显示每个部分。jQuery 可以使这更容易。

# blackberry-10 - 从命令行构建 BlackBerry 10 本机应用程序包

> ID：13104781
> 
> 赞同：1
> 
> 时间：2012-10-27T22:37:08.213
> 
> 标签：blackberry-10, blackberry-ndk

我创建了一个本机`HelloWorld`应用程序，用于在模拟器中`BlackBerry 10`使用`BB NDK 10.0.9`和运行它。我使用`Momentics IDE`并且可以轻松地编译和部署我的应用程序。

但是，我想从命令行设置一个自动构建过程。我能够使用`makefile`. 但我被困在`.bar`文件的创建中。

我尝试`.bar`使用以下命令进行构建：

```
blackberry-airpackager.bat -package HelloWorld2.bar application.xml 
```

但目标`.bar`不包含我的本机二进制文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:48:00.723

本机应用程序有一个特殊的打包程序：`blackberry-nativepackager`

这段代码成功了：

```
blackberry-nativepackager.bat -package HelloWorld2.bar bar-descriptor.xml 
```

`bar-descriptor.xml`除了模拟器之外，还添加了另一个配置：

```
<configuration id="com.qnx.qcc.toolChain.2121420202" name="Device-Release">
   <platformArchitecture>armle-v7</platformArchitecture>
   <asset path="arm/o.le-v7/HelloWorld" entry="true" type="Qnx/Elf">HelloWorld</asset>
</configuration> 
```

# c# - 如何将同一类的两个不同属性添加到一个 POCO 类中？

> ID：13104783
> 
> 赞同：0
> 
> 时间：2012-10-27T22:37:10.893
> 
> 标签：c#, entity-framework-4.1, poco

我有一个类有两个对一个类（用户）的引用：

```
public class Xpto {
    public string Username { get; set; }
    public virtual User User { get; set; }
    public string Username2 { get; set; }
    public virtual User User2 { get; set; }
} 
```

事情是 EF 只创建对第一个键（用户名）的引用。这样 User 和 User2 将 Username 作为键，而不是我想要的...

我发现这是答案：

[nHibernate，将两个属性映射到同一个类](https://stackoverflow.com/questions/6491455/nhibernate-mapping-two-properties-to-the-same-class)

但我不知道如何将其应用于我的场景。

谢谢。

**编辑**：伙计们，没关系......我想我应该看得更远一点。答案就在这里： [如何创建一个对另一个类有 2 个引用的 POCO 对象](https://stackoverflow.com/questions/5904796/how-do-i-create-a-poco-object-that-has-2-references-to-another-class?rq=1)

标准是`<property_name><key_name>` 所以正确的方法是**UserUsername**和**User2Username**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:52:12.707

考虑改用 ForeignKeyAttribute，然后您可以为您的关键属性选择您喜欢的名称。

```
public class Xpto {

    [ForeignKey("User")]
    public string Username { get; set; }

    public virtual User User { get; set; }

    [ForeignKey("User2")]
    public string Username2 { get; set; }

    public virtual User User2 { get; set; }
} 
```

# ios - 获取位置列表（iOS）

> ID：13104787
> 
> 赞同：0
> 
> 时间：2012-10-27T22:38:18.670
> 
> 标签：ios, core-location

我是 Core Location 的新手，我想知道当我们将照片分享到 Facebook 时如何在 iPhoto 中获取位置列表。

例如 ：

1.  用户输入“纽约”，然后点击“搜索”

2.  表格视图将显示具有该名称的位置列表。它还将显示地理标记信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:34:24.780

事实证明，Facebook 没有“位置”，它有的是“地点”，一种“签到”。但是，我们无法以编程方式创建 Place 对象，我们只能根据纬度和经度查找地点。

幸运的是，Apple 已经提供了 CLGeocoder 来查找位置及其纬度和经度，由此我可以提供 Facebook 的 Place 的经度和经度。

# sql - 监视时间范围内的更新和/或使用正则表达式计算字符串中日期的 SQL 查询

> ID：13104790
> 
> 赞同：0
> 
> 时间：2012-10-27T22:38:35.870
> 
> 标签：sql, regex, database-design

这可能是一个岔路口问题。我有一个日志博客，日期标记记录中单个字段的延续。

例子：

项目 #1（ID）：备注（备注字段：） 2012 年 10 月 12 日 - 访问过的网站。2012 年 10 月 11 日 - 更新信息。2012 年 10 月 11 日 - 致电客户。10/10/2012 - 输入信息。

项目 #2（ID）：备注（备注字段：） 2012 年 10 月 10 日 - 访问过的网站。2012 年 10 月 10 日 - 致电客户。10/9/2012 - 输入信息。2012 年 10 月 1 日 - 启动项目。等等等等……

我需要计算在特定时间范围内进行了多少更新。我知道我可以创建一个隐藏字段并在每次有更新时添加 + 1，这对整体更新计数很有用......但是我如何跟踪过去 5 天的更新数量。就像上面的例子，你可以在一天内更新两次，我可能不在乎两周前的更新。

我想我需要创建一个 SQL 来计算自 10/10/12 或自 10/2/12 等以来的“日期”数量。

我已经完成了 SQL：SELECT memo FROM Projects WHERE memo IN ('%10/10/12%', '%10/9/2012%' etc) 然后是 Len(memoStringCombined) - Len(Replace(searchword"" etc)/Len(searchword) 并且它可以很好地计算单个日期...但是如果我在 30 天内计算了多个日期，那么继续重写每个搜索词会变得非常麻烦。是否有正则表达式或 obj 可以为我循环这个？

否则，将不胜感激有关计算时间范围之间更新的任何其他建议。

顺便说一句 - 我真的不能证明创建一个专门用于跟踪更新的新表是合理的，因为将有近 10,000 条记录的 100 次更新，这意味着更新跟踪表将比数据更可怕......或者我错了也有想法？

# c# - windows窗体中的double c#值更改为0.0

> ID：13104797
> 
> 赞同：1
> 
> 时间：2012-10-27T22:39:43.523
> 
> 标签：c#, winforms

我的应用程序是 Windows 窗体（VS2010 C#）；我在表格的开头设置了一个双变量：

```
private double Wwidth; 
```

然后我在打开文件时更改它的值：

```
 Wwidth = image.WindowWidth; 
```

Wwdith 的值等于`265.0`。当我选择一个轨迹栏时，

```
private void tbrWidth_Scroll(object sender, System.EventArgs e)
        {
            double newWidth = tbrWidth.Value;
            double wd = Wwidth - newWidth;
...} 
```

Wwdith 的值变为`0.0`?

有什么建议么。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:50:45.897

变量不会改变自己。所以有两种可能：

1.  一些你忘记的代码改​​变了它
2.  这是一个不同的例子

要排除 2，您可以放置​​（在两个地方）：

```
Debug.WriteLine(
    System.Runtime.CompilerServices.RuntimeHelpers.GetHashCode(this)); 
```

如果你从两个地方得到相同的数字，你可能仍然在同一个实例中。要排除 1 - 更改它并在以下位置设置断点：

```
private double _wwidth;
private double Wwidth {
    get { return _wwidth; }
    set { _wwidth = value; } // <==== put a breakpoint here
} 
```

现在您应该在任何更改值的代码处自动停止

# c# - WPF 应用程序中的 EF Code First 对象图内存使用

> ID：13104798
> 
> 赞同：0
> 
> 时间：2012-10-27T22:40:03.517
> 
> 标签：c#, wpf, memory-management, entity-framework-4.1, ef-code-first

我正在构建一个应用程序来显示源代码控制存储库中更改的历史日志。该应用程序在 .NET 4 WPF 和 Entity Framework Code First 中实现。

我遇到的问题之一是，随着时间的推移，随着更多日志条目被添加到日志中，应用程序使用越来越多的内存并且不会释放对日志条目的引用。每个日志条目都包含一个“已更改文件”列表，并且对于每个已更改文件，文件的前后版本。

UI 显示日志条目列表以及当前选择的新旧版本`LogEntry`和`ChangedFile`. 数据模型大致如下：

```
public class LogSubscription
{
    public List<LogEntry> Log { get; set; }
}

public class LogEntry
{
    public List<ChangedFile> ChangedFiles { get; set; }
}

public class ChangedFile
{
    public string OldVersion { get; set; }
    public string NewVersion { get; set; }
} 
```

由于我使用的是 EF Code First，因此只需访问 List 属性即可查询数据库并自动构建对象模型。我想做的是`ChangedFiles`在一段时间后以某种方式取消对列表的引用，并根据需要重新查询数据库并重建对象模型（即用户已单击返回日志条目）。

EF Code First 有什么方法可以做到这一点？或者我应该采取不同的方法来控制所使用的内存？

该应用程序和完整的源代码托管在 GitHub 上：[https ://github.com/tomhunter-gh/SourceLog](https://github.com/tomhunter-gh/SourceLog)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:23:29.750

正如评论中所说：这很可能发生在从未处理过的静态上下文中。我在源代码中看到 a`ThreadStaticContextBackground`使用了 a `LogEntry`：在类似模式的活动记录中 a`LogEntry`通过它的方法保存自己`MarkAsReadAndSave`，它需要一个上下文。

您可能这样做（我并没有真正仔细检查源代码）以防止在保存日志条目时创建和处置许多上下文。但我认为你应该重新考虑主动记录方法。日志条目由`MainWindowViewModel`. 视图模型应该调用一种服务方法，该方法通过短期上下文保存日志条目，并可能缓存这些条目以使其可用于显示等。它应该从其中接收`RemovedItems`集合`DgLogSelectionChanged`，以便让它们由一个上下文而不是一个上下文处理每个项目的上下文。这有任何意义吗？

# java - 编译器根据什么标准选择重载方法之一

> ID：13104799
> 
> 赞同：2
> 
> 时间：2012-10-27T22:40:30.873
> 
> 标签：java, overloading

偏爱一种方法而不是另一种方法的正式原因是什么（通过编译器）？为什么它为字节等选择第一个。我知道 int 可以表示字节，但也可以表示浮点数。为什么这么正式？

```
public class MethodCurrier {

    public void setValue(int wrt){//naglowek
        System.out.println("Typ int "+ wrt);
    }
    public void setValue(float wrt){//naglowek
        System.out.println("Typ float "+ wrt);
    }
    public static void main(String[] args) {
        MethodCurrier currier = new MethodCurrier();
        currier.setValue(4);//int
        currier.setValue(2.3f);//float
        currier.setValue('c');//char
        currier.setValue((byte)4);

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T22:47:30.917

Java 语言规范对此进行了如下[定义：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)

> 如果多个成员方法既可访问又适用于方法调用，则有必要选择一个为运行时方法分派提供描述符。Java 编程语言使用选择最具体方法的规则。
> 
> 非正式的直觉是，如果第一个方法处理的任何调用可以传递给另一个方法而不会出现编译时类型错误，那么一个方法比另一个方法更具体。

在您的情况下，该`int`方法比该`float`方法更具体，因为 a`int`可以隐式转换为 a `float`，但反之则不行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:46:39.617

因为[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)是这么说的。

# javascript - 有没有办法将 MongoDB shell 输出“漂亮”打印到文件中？

> ID：13104800
> 
> 赞同：106
> 
> 时间：2012-10-27T22:40:50.717
> 
> 标签：javascript, mongodb, shell

具体来说，我想将 mongodb 的结果打印`find()`到文件中。JSON 对象太大，因此我无法使用 shell 窗口大小查看整个对象。

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-10-28T17:16:13.067

Shell 提供了一些不错但隐藏的特性，因为它是一个交互式环境。

当您通过 mongo commands.js 从 javascript 文件运行命令时，您不会得到完全相同的行为。

有两种方法可以解决这个问题。

(1) 伪造外壳，让它认为你处于交互模式

```
$ mongo dbname << EOF > output.json
db.collection.find().pretty()
EOF 
```

或
(2) 使用 Javascript 将 a 的结果`find()`转换为可打印的 JSON

```
mongo dbname command.js > output.json 
```

其中 command.js 包含此（或其等效项）：

```
printjson( db.collection.find().toArray() ) 
```

这将漂亮地打印结果数组，包括`[ ]`- 如果您不希望您可以迭代数组和`printjson()`每个元素。

顺便说一句，如果您只运行一个 Javascript 语句，则不必将其放入文件中，而是可以使用：

```
$ mongo --quiet dbname --eval 'printjson(db.collection.find().toArray())' > output.json 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-05-23T21:34:57.010

由于您是在终端上执行此操作并且只想以理智的方式检查记录，因此您可以使用以下技巧：

```
mongo | tee somefile 
```

正常使用会话 -`db.collection.find().pretty()`或任何您需要做的事情，忽略长输出，然后退出。您的会话记录将在`tee`写入的文件中。

请注意，由于 mongo shell 需要交互式会话，因此输出可能包含转义序列和其他垃圾。 `less`优雅地处理这些。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-28T00:26:37.960

只需将要运行的命令放入文件中，然后将其与数据库名称一起传递给 shell，并将输出重定向到文件中。所以，如果你的 find 命令在`find.js`并且你的数据库是`foo`，它看起来像这样：

```
./mongo foo find.js >> out.json 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-08-16T09:09:21.170

将您的查询（例如`db.someCollection.find().pretty()`）放到一个 javascript 文件中，比如说`query.js`. 然后使用以下命令在操作系统的 shell 中运行它：

`mongo yourDb < query.js > outputFile`

查询结果将在名为“outputFile”的文件中。

默认情况下，Mongo 会打印出前 20 个文档 IIRC。如果您想要更多，您可以在 Mongo shell 中为批量大小定义新值，例如

`DBQuery.shellBatchSize = 100`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-05-08T21:26:31.297

我设法用**writeFile()**函数保存了结果。

```
> writeFile("/home/pahan/output.txt", tojson(db.myCollection.find().toArray())) 
```

Mongo shell 版本是 4.0.9

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-10-07T19:40:38.753

使用`print`and`JSON.stringify`你可以简单地产生一个**有效** `JSON`的结果。
使用`--quiet`flag 从输出中过滤外壳噪声。
使用`--norc`标志来避免`.mongorc.js`评估。（我不得不这样做，因为我使用了一个漂亮的格式化程序，它会产生*无效的 JSON*输出）使用`DBQuery.shellBatchSize = ?`替换`?`实际结果的限制来避免分页。

最后，用于`tee`将终端输出通过管道传输到文件：

```
// Shell:
mongo --quiet --norc ./query.js | tee ~/my_output.json

// query.js:
DBQuery.shellBatchSize = 2000;
function toPrint(data) {
  print(JSON.stringify(data, null, 2));
}

toPrint(
  db.getCollection('myCollection').find().toArray()
); 
```

希望这可以帮助！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-23T09:27:49.223

使用 Asya Kamsky 的这个[答案](https://stackoverflow.com/a/13111118/6053299)，我为 Windows 编写了一个单行 bat 脚本。该行如下所示：

`mongo --quiet %1 --eval "printjson(db.%2.find().toArray())" > output.json`

然后可以运行它：

`exportToJson.bat DbName CollectionName`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-07T03:09:21.990

Neodan mongoexport 的[回答](https://stackoverflow.com/a/47451080/7567116)`-q`对于查询选项非常有用。它还转换`ObjectId`为 JSON 的标准格式`"$oid"`。例如：

```
mongoexport -d yourdb -c yourcol --jsonArray --pretty -q '{"field": "filter value"}' -o output.json 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-29T02:08:13.523

在新的**mongodb shell 5.0+** [mongosh](https://docs.mongodb.com/mongodb-shell/)中，它集成了[Node.js fs 模块](https://nodejs.org/api/fs.html)，因此您可以在新的[mongosh shell 中](https://docs.mongodb.com/mongodb-shell/)**简单地**执行以下操作以漂亮地打印输出：

```
fs.writeFileSync('output.json', JSON.stringify(db.test.find().toArray(), null, 2)) 
```

没有任何问题，如`ObjectId`被剥离等，比`printjson`or好`.pretty()`。

上面的代码可以按照描述的方式工作：

> MongoDB Shell mongosh 是一个**功能齐全的 JavaScript 和 Node.js 14.x REPL**环境，用于与 MongoDB 部署进行交互。您可以使用 MongoDB Shell 直接使用您的数据库测试查询和操作。

旧的`mongo`shell 也被标记为*Legacy*，所以你应该转向这种新的方式。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-23T08:47:39.370

也有[mongoexport](https://docs.mongodb.com/manual/reference/program/mongoexport)，但我不确定它是可用的版本。

例子：

```
mongoexport -d dbname -c collection --jsonArray --pretty --quiet --out output.json 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-08T12:29:18.137

您可以使用此命令来实现它：

`mongo admin -u <userName> -p <password> --quiet --eval "cursor = rs.status(); printjson(cursor)" > output.json`

# multithreading - 有没有办法从进程的 task_struct 中找出哪个用户拥有进程？

> ID：13104803
> 
> 赞同：7
> 
> 时间：2012-10-27T22:41:13.727
> 
> 标签：multithreading, process, permissions, linux-kernel, pid

我有一个`task_struct *`我通过调用得到的`find_task_by_vpid(get_pid())`。我想弄清楚哪个用户拥有该进程，以便我可以在我正在编写的系统调用中进行一些权限检查，但是查看`task_struct`源代码并没有多大帮助。唯一看起来有用的是`loginuid`，但由于某种原因，如果我尝试像这样访问它，内核将无法编译`my_task_struct->loginuid`：是否有另一种方法可以让从 调用该进程的用户`task_struct`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T23:22:36.183

不幸的是，用户/组 ID 不再存储在任务结构中，而是存储在一个单独的权限结构中，该结构在具有相同 ID 的所有任务之间动态分配和共享。这反过来又会造成一种`setuid`可能由于资源耗尽而失败的情况，而无法提供`setuid`权限是臭名昭著的漏洞来源......

无论如何，它在以下成员中`task_struct`：

```
 const struct cred __rcu *real_cred; /* objective and real subjective task
                                     * credentials (COW) */
    const struct cred __rcu *cred;  /* effective (overridable) subjective task
                                     * credentials (COW) */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-21T13:41:22.273

要访问内核空间中的用户 ID (UID)，您可以执行以下操作（从 Linux 4.9.13 开始）：

```
struct task_struct *task;
for_each_process(task) {
    uid_t uid = __kuid_val(task_uid(task));
} 
```

`task_uid`返回一个被调用的结构`kuid_t`并访问你必须调用`__kuid_val`或直接访问它的实际值（`task_uid(task).val`）。

或者，您可以使用`from_kuid(&init_user_ns, task_uid(task))`.

# sed - sed 用星号替换内容

> ID：13104806
> 
> 赞同：1
> 
> 时间：2012-10-27T22:41:43.303
> 
> 标签：sed, tcsh

我可以像这样使用 tcsh 中的 sed：

```
set a = `echo $a | sed -e 's_old_new_'` 
```

一切都很好，但是当我想这样做时：

```
set a = `echo $a | sed -e 's_old_*new_'` 
```

我可以看到“设置：不匹配”。. 我怎样才能逃离这颗星星？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T23:09:22.890

我对 tcsh 了解不多，但很少有实验表明分配变量的集合尝试扩展右侧 *. 这可能会有所帮助：

```
set a="`echo '2e2' | sed -e 's_e_*_'`"
echo "$a"
2*2
echo $a
echo: No match. 
```

所以在反引号周围加双引号，它会起作用。

```
set a = "`echo $a | sed -e 's_old_new_'`" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:12:15.773

未包含在双引号中的命令替换（```或`$(..)`）受文件名扩展（又名“通配符”）和分词的影响。

通常，变量赋值会抑制 RHS 的文件名扩展和分词（即使没有双引号），但在命令替换的情况下显然不会文件名扩展。

这是我为参考目的而运行的测试：

```
$ touch randomfile
$ a="*file"
$ var_expand=$a
$ echo "$var_expand"
*file
$
$ cmd_subst=$(echo '*file')
$ echo "$cmd_subst"
randomfile 
```

所以我想当你分配给变量时总是双引号命令替换是一个好习惯。

```
safe="$(cmd)" 
```

注意：这是在 Bash 中测试的，但我认为 tcsh 在这方面表现出类似的行为。

paragraph 1 paragraph 2 paragraph 3 paragraph 4<textarea id="textarea_1"></textarea>` 于 2012-10-27T23:36:17.090 回答 This answer is useful 1 document.getElementById("textarea_1").innerHTML = document.getElementById("div_1").innerHTML.replace(/
/g, "\n"); 这应该可以解决问题，您必须
用真正的换行符替换标签。 于 2012-10-27T22:46:59.217 回答 Related 1 android - 定义样式的膨胀布局 1 sql - 将值提高到 n 次方时 SQL-Oracle 代码出错 - 需要帮助 1 mysql - Rails 时间戳：updated_at / created_at 的复杂顺序 1 regex - 正则表达式忽略引号字符 3 awk - 使用 grep 或 awk 打印数据列 1 image - 从 akamai 加载的图像未缓存在浏览器中 1 backbone.js - 在 Backbone 中的普通对象上注册回调函数 2 .net - 正则表达式匹配错误 3 java - root 用户可以在运行的 JVM 中访问哪些信息？ 2 gwt - 将 Elemental 添加到 GWT Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# javascript - 如何解码 内部HTML到

below is the

and `<textarea></code> in my webpage</p> <pre><code> <div id="div_1" onclick="document.ge 问问题 问问题 2012-10-27T22:42:10.823 2516 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. javascripthtml 4 3 回答 3 This answer is useful 4 你onclick的格式不正确。您正在使用它来分隔它，"并且也将"其用作内部字符串分隔符。 您还使用比较运算符==而不是赋值运算符=。 onclick="document.getElementById("textarea_1").innerHTML==document.getElementById("div_1").innerHTML;" 这将更好地工作： onclick='document.getElementById("textarea_1").innerHTML=document.getElementById("div_1").innerHTML;' 现在，要解决实际问题 -<br>在需要换行时获取元素。 当你这样做时： document.getElementById("div_1").innerHTML 您需要<br>用换行符替换元素： document.getElementById("div_1").innerHTML.replace(/<br>/g, "\n") 于 2012-10-27T22:44:14.720 回答 This answer is useful 1 您可以在 textarea 上使用 value 而不是 innerHTML <!doctype html> <html> <head> <title>Site Title</title> </head> <body> <div id="div_1" onclick="document.getElementById("textarea_1").value = document.getElementById('div_1').innerHTML;"> paragraph 1 paragraph 2 paragraph 3 paragraph 4 </div> <textarea id="textarea_1"></textarea> ` 于 2012-10-27T23:36:17.090 回答 This answer is useful 1 document.getElementById("textarea_1").innerHTML = document.getElementById("div_1").innerHTML.replace(/
/g, "\n"); 这应该可以解决问题，您必须
用真正的换行符替换标签。 于 2012-10-27T22:46:59.217 回答 Related 1 android - 定义样式的膨胀布局 1 sql - 将值提高到 n 次方时 SQL-Oracle 代码出错 - 需要帮助 1 mysql - Rails 时间戳：updated_at / created_at 的复杂顺序 1 regex - 正则表达式忽略引号字符 3 awk - 使用 grep 或 awk 打印数据列 1 image - 从 akamai 加载的图像未缓存在浏览器中 1 backbone.js - 在 Backbone 中的普通对象上注册回调函数 2 .net - 正则表达式匹配错误 3 java - root 用户可以在运行的 JVM 中访问哪些信息？ 2 gwt - 将 Elemental 添加到 GWT Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13104809
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:44:14.720

你`onclick`的格式不正确。您正在使用它来分隔它，`"`并且也将`"`其用作内部字符串分隔符。

您还使用比较运算符`==`而不是赋值运算符`=`。

```
onclick="document.getElementById("textarea_1").innerHTML==document.getElementById("div_1").innerHTML;" 
```

这将更好地工作：

```
onclick='document.getElementById("textarea_1").innerHTML=document.getElementById("div_1").innerHTML;' 
```

* * *

现在，要解决实际问题 -`<br>`在需要换行时获取元素。

当你这样做时：

```
document.getElementById("div_1").innerHTML 
```

您需要`<br>`用换行符替换元素：

```
document.getElementById("div_1").innerHTML.replace(/<br>/g, "\n") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:36:17.090

您可以在 textarea 上使用 value 而不是 innerHTML

```
<!doctype html>
<html>
<head>
    <title>Site Title</title>
</head>
<body>
    <div id="div_1" onclick="document.getElementById("textarea_1").value = document.getElementById('div_1').innerHTML;">
        paragraph 1

        paragraph 2

        paragraph 3

        paragraph 4
    </div>
    <textarea id="textarea_1"></textarea>
</body> 
```

`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T22:46:59.217

```
document.getElementById("textarea_1").innerHTML = document.getElementById("div_1").innerHTML.replace(/<br>/g, "\n"); 
```

这应该可以解决问题，您必须`<br>`用真正的换行符替换标签。`

# internet-explorer - 如何在 IE F12 控制台中调试 JavaScript 代码？

> ID：13104811
> 
> 赞同：0
> 
> 时间：2012-10-27T22:42:26.670
> 
> 标签：internet-explorer, debugging, console

我正在使用 IE9。我真的很喜欢 F12 调试控制台。我可以输入 JavaScript 代码来试用，而无需创建文件并由服务器加载它。

但是，我无法在控制台中的这段代码上设置断点。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:25:32.817

您需要确保已开始调试（脚本->开始调试），然后您可以使用调试器关键字，这将导致调试器中断。

```
var x = 0;
debugger;
x++; 
```

# memory-management - 共享内存分配器，没有固定的共享段大小，可被多个进程锁定

> ID：13104813
> 
> 赞同：1
> 
> 时间：2012-10-27T22:42:37.913
> 
> 标签：memory-management, malloc, ipc, shared-memory

我需要一个类似 malloc 的接口，允许在共享段中分配内存块。我不想静态设置这个段的大小，分配器应该能够根据需要管理增长。锁定不仅必须在单个进程的线程之间，而且必须在系统范围内：许多进程可能会尝试同时在池中分配块。

有没有现成的图书馆可以做到这一点？我找到了`libmm`，但它似乎不允许进程间锁定，而且我有点担心它看起来已被废弃，最后一次更新是在 2006 年。

# javascript - 如何防止javascript函数更改html表单中的其他值

> ID：13104816
> 
> 赞同：-1
> 
> 时间：2012-10-27T22:42:57.057
> 
> 标签：javascript

我的 html 表单中有两个选择块：

```
<select id="select1">
<option>1</option>
<option>2</option>
<option>3</option>
</select>

<select id="select2" onchange="someFunc()">
<option>A/option>
<option>B</option>
</select> 
```

我有一个从表单标签@onSubmit 调用的 validateForm() 函数。“someFunc”函数在表单的其他地方填充一些 innerHTML。我遇到的问题是，当我点击提交时，select1 的值恢复为其原始默认值，并且 validateForm 函数失败。

someFunc 函数真的很长，所以我没有发布整个内容，但本质上它所做的是检查字符串值并填充 html，例如：

```
if(select2.value = 'A'){
     document.getElementById('anotherElement').innerHTML= '<h1>a new tag</h1>';
} 
```

除了@onChange，还有其他 att 吗？

好的，这是一个完整的 html 表单，描述了我遇到的问题：

```
<html>
<head>
<title>javascript q</title>
<script>
    function updateTag(){
document.getElementById('newHeading').innerHTML='<p     id="status">updated</p>';

    }

    function validateForm(){
        var s1 = document.getElementById('select1');
        var s2 = document.getElementById('select2');

        if( s1.value = 'please select' ){
                alert('please select a value from the pulldown');
                return false;
            }

        // updated html needs to have been performed and value selected
        if(document.getElementById('status') == null ){
                alert('status does not exist');
            }

    }

</script>

</head>
<body>

<h1>Javascript Q</h1>

<form id="testForm" onSubmit="return validateForm();">

<select id="select1">
    <option>please select</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>

<select id="select2" onchange="updateTag()">
    <option>please select</option>
    <option>a</option>
    <option>b</option>
    <option>c</option>
</select>
<input type="submit" value="submit"/>       
<div id="newHeading">

</div>

</form>
</body>
</html> 
```

发生的情况是，我从每个下拉列表中选择一个值，点击提交，然后 select1 的值恢复为其原始值，并且验证失败

希望那会更好。

谢谢，bp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:52:43.690

我认为这样做是将信息发送出去（实际上是提交它）使字段再次变为空白。一个提示是

```
return false 
```

如果您只想填充一些 div 之类的，请在您的 validateForm() 上。如果你真的希望它提交，那么你可能想要这样的东西：

```
$('form').submit(function(e) {
     //Do your checks and innerHTML manipulation here before it sends the info away.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:59:48.230

而不是使用 Robin Jonsson 提到的 return 您应该使用 preventDefault() 来防止在您点击提交时提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T01:41:26.540

mea culpa, 完全是我愚蠢的疏忽

```
if( s1.value = 'please select' ){ 
```

应该

```
if( s1.value == 'please select' ){ 
```

抱歉愚蠢的疏忽

# html - 使用 CSS 和单个列表的简单 2 列导航？

> ID：13104818
> 
> 赞同：2
> 
> 时间：2012-10-27T22:43:12.813
> 
> 标签：html, css, navigation, html-lists, multiple-columns

我希望通过使用`<ul>`包含六个`<li>`项目的单个导航栏来制作两列导航栏：

```
<nav>
    <ul>
    <li>Home</li>
    <li>About</li>
    <li>Team</li>    
    <li>Store</li>
    <li>Blog</li>
    <li>Contact</li>
    </ul>
</nav>​ 
```

一侧三个元素，另一侧三个元素；垂直排列。

现在，制作两个单独的`<ul>`元素并在它们之间放置填充/边距很容易：http: [//jsfiddle.net/Baumr/SJcjN/](http://jsfiddle.net/Baumr/SJcjN/) - 但这不是一个很好的解决方案。

`<span>`也可以在每组三个 's 周围包裹标签`<li>`——但这是唯一的 CSS 解决方案吗？

寻找一些优雅的想法。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T22:52:29.977

```
<ul>
  <li>Home</li>
  <li>About</li>
  <li>Team</li>    
  <li>Store</li>
  <li>Blog</li>
  <li>Contact</li>
</ul> 
```

CSS：

```
li {
  width: 50%;
  float: left;
  padding: 5px 0; 
} 
```

他们会这样订购：

```
Home About
Team Store
Blog Contact 
```

如果这不是问题，那么您有一个非常简单的解决方案。

编辑：

```
li:nth-child(even) {
  width: 50%;
  float: right; 
}
li:nth-child(odd) {
  width: 50%;
  float: left;
} 
```

这将以正确的方式对它们进行排序。不确定 IE 将如何运作，但可以在所有其他浏览器中运行。

或者您可以严格遵循这个`UL-LI`概念，因此您的 html 将如下所示，您可以拥有任意数量的列：

```
<nav>
    <ul class="menuitem">
       <li class="column">
          <ul>               
            <li>Home</li>
            <li>About</li>
            <li>Team</li>
          </ul>
        </li>
        <li class="column">
          <ul>               
             <li>Store</li>
             <li>Blog</li>
             <li>Contact</li>
          </ul>
        </li>               
    </ul>

    <ul class="menuitem">
        <li class="column">
          .....
        </li>
    </ul>      

</nav> 
```

制作正确且格式正确的 html 可以让您的生活更轻松。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T23:47:09.220

我认为使用`<span>`'s 可能是最适合跨浏览器的解决方案。

**除非有人有其他想法？**寻找跨浏览器兼容的东西，遗憾的是 IE 不支持`nth-child(N)`.

使用这些随机跨度，这不像我想要的那样干净（HTML 明智），但这里是 HTML：

```
<nav>
<ul>
<span>
<li>Home</li>
<li>About</li>
<li>Team</li>
</span><span>
<li>Store</li>
<li>Blog</li>
<li>Contact</li>
</span>
</ul>
</nav> 
```

（注意我书中`span`的`ul`- 大失礼。）

和CSS：

```
nav span {
    width: 50%;
    float: left;
} 
```

但这不是一个好的解决方案......还有其他想法吗？

# visual-studio-2010 - 用于 x64 调试的 SOS 扩展

> ID：13104819
> 
> 赞同：2
> 
> 时间：2012-10-27T22:43:16.793
> 
> 标签：visual-studio-2010, debugging, visual-studio-2012, sos

是否有可能在 x64 进程的 Visual Studio 2010/2012（.Net 框架 4）中加载 SOS 扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:52:29.587

如果您安装 VS2012*和*[WDK](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)，您可以通过用户模式调试器传输协议（附加到进程对话框下的选项）附加到 64 位进程。如果这样做，您可以从新的调试器即时窗口加载 SOS。这适用于 32 位和 64 位进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T06:25:50.710

这是不可能的。要使用 SOS 调试 64 位应用程序，您必须使用 windbg。

# iphone - isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum 不会总是返回 YES 吗？

> ID：13104823
> 
> 赞同：2
> 
> 时间：2012-10-27T22:44:03.123
> 
> 标签：iphone, ios, cocoa-touch

我有时对 iOS 开发感到困惑。这不会总是返回 true 吗？

```
if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum])
{
    //
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:46:01.873

如果用户的照片库中没有图像，这将返回 NO。从文档中`UIImagePickerController isSourceTypeAvailable:`：

> 由于媒体源可能不存在或可能不可用，因此设备可能并不总是支持所有源类型。例如，如果您尝试从用户的库中选择图像并且库为空，则此方法返回 NO。

# objective-c - 用三个 CGpoint 计算角度

> ID：13104825
> 
> 赞同：1
> 
> 时间：2012-10-27T22:44:21.963
> 
> 标签：objective-c, ios, rotation, cgpoint

我有三个 CGpoint，我想计算角度。

我画了一个小架构：

![在此处输入图像描述](../Images/93cdcb1fe4fc83576df457f9762bb5c3.png)

我试过这段代码：

```
CGPoint u ;
        u.x = 0;
        u.y = - middleRectY;

        CGPoint v ;
        v.x = x1 -  middelRectX;
        v.y = y1 - middleRectY;

        // formule = u.v / ( ||u|| * ||v||)

        double cosa = (double)((u.x * v.x + u.y * v.y)) / sqrt(u.x * u.x + u.y * u.y) * sqrt(v.x * v.x + v.y * v.y);

        // angle en degré

        double angle = (180.0 / M_PI) * acos(cosa);

        // Signe de l'angle

        int sign = (u.x * v.y - u.y * v.x) > 0 ? 1 : -1;

        rectYellow.transform = CGAffineTransformMakeRotation(angle*sign); 
```

但我的函数返回“nan”：/

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:25:07.293

我发现了问题！

这只是括号的问题：

```
double cosa = ((u.x * v.x) + (u.y * v.y)) / (sqrt((u.x * u.x) + (u.y * u.y)) * sqrt((v.x * v.x) + (v.y * v.y))); 
```

我不明白为什么？因为括号对于乘法来说不是必需的......

# ruby - 当前发布宝石的正确方法是什么？

> ID：13104827
> 
> 赞同：5
> 
> 时间：2012-10-27T22:44:47.900
> 
> 标签：ruby, rubygems, gem

发布 gem 的正确过程似乎总是在不断变化，我已经有一段时间没有这样做了。是否有一套最新的最佳实践将 ruby​​ 库捆绑到 gems 中并发布它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:11:03.633

学习如何发布 gem 的最好方法是浏览[guides.rubygems.org](http://guides.rubygems.org)上的文档。

这里有几个指针：

*   要了解捆绑 gem 的模式，请阅读[本文](http://guides.rubygems.org/patterns/)或探索[gem 示例](https://github.com/qrush/hola)。
*   .gemspec 文件是构建 gem 的描述符。您可以在[此处阅读详细规格](http://guides.rubygems.org/specification-reference/)。

最后，构建您的 gem，命名`hola`为：

```
gem build hola.gemspec 
```

这将创建一个`hola-0.0.1.gem`文件。

要将您的 gem 发布到 ruby​​gems.org（首先您需要一个[ruby​​gems.org](http://rubygems.org)上的用户帐户）：

```
gem push hola-0.0.1.gem 
```

# c++ - 如何在 C++ 中在运行时向对象添加新属性？

> ID：13104830
> 
> 赞同：2
> 
> 时间：2012-10-27T22:45:19.010
> 
> 标签：c++, properties

在 C# 中，我们可以使用这样的东西：

```
MyClass c = new MyClass();
c.Properties.Add("another property", "another value"); 
```

我需要在 C++ 中执行此操作。我正在使用 VS 2012。有什么想法吗？

**编辑**：知道，我可以使用地图或任何列表将属性保存到对象，例如：

```
void ObjectProperty::addItem(string key, XProperty p) 
{
     _object[key] = p;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T22:48:38.373

您不能只为对象添加“属性”——对象的概念完全在编译时完成。在运行时，CPU 不知道给定的内存块称为“对象”或您决定调用类实例的任何内容。

（这本身就很有趣，因为 C++ 没有属性）

如果您只想要一个按名称引用的数据字段，那么任何标准关联容器都应该满足您的需求。

# ios - 过渡到 ARC - 发布不引发错误

> ID：13104831
> 
> 赞同：1
> 
> 时间：2012-10-27T22:45:21.943
> 
> 标签：ios, xcode, memory-management, automatic-ref-counting

我正在尝试将现有的非 ARC 项目移至 ARC。我已将构建设置中的 Objective-C 自动引用计数标志设置为 YES。

这当然造成了很多关于发送显式释放/自动释放消息的错误。对于我的代码中的错误，我删除了显式发布消息、dealloc 块等。对于在第三方库（如 ASIHTTPRequest）中生成的错误，我在 Build Phases - Compile Sources 中为所需文件添加了 -fno-objc-arc 标志部分。

但是，在我修复了所有错误（并且项目编译成功）之后，我的代码中仍然有发布声明。

例如，在应用程序委托中，我使用以下内容：

```
self.loginViewController       = [[LoginViewController alloc] init];
self.window.rootViewController = self.loginViewController;
[self.window makeKeyAndVisible];
[self.loginViewController release]; 
```

现在据我了解，这应该引发错误。但事实并非如此。该应用程序按预期工作，但给我留下了关于这些文件中是否正确完成内存管理的问题。

AppDelegate.m 和 LoginViewController.m 都没有设置 -fno-objc-arc 标志，因此它们应该默认为 ARC。

肯定我做错了什么。我应该仔细检查什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:12:24.173

我刚刚解决了这个问题。我正在使用 iRate 库，在它的一个标头中它定义了发布和自动发布

```
#define release self
#define autorelease self 
```

我删除了这些行，问题得到解决。因此，如果您遇到类似的情况，请检查是否某些 3rd 方库已定义它们。

说真的，哪个体面的程序员会这样定义“发布”和“自动发布”？惊人...

# php - 在 PHP 中的 MySQL 访问在 C-Panel 中创建的数据库

> ID：13104832
> 
> 赞同：0
> 
> 时间：2012-10-27T22:45:22.320
> 
> 标签：php, mysql, cpanel

基本上，我无法使用 php 网页连接到 mysql 数据库。我使用像这样连接的向导在 C-panel 中创建了数据库

```
$db_host = "localhost"; //your host Database address

$db_username = "xxxx"; //your account username

$db_pass = "xxxxx"; //your account password

$db_name = "xxxxx"; //your database name

@mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to     mysql");

@mysql_select_db("$db_name") or die ("no database"); 
```

但我的页面似乎所做的只是触发“无法连接到 mysql”我的页面确实安装了 wordpress，但我打算在我自己创建网站时摆脱它。我只是对为什么它无法连接感到困惑，因为在 Phpmyadmin（C 面板上的一个功能）中，它说数据库在 localhost 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:56:36.590

在 C-panel 中，您需要添加数据库用户并为其分配某些角色，然后才能连接到数据库。

# json - JSON服务传递空/空字符串参数值

> ID：13104839
> 
> 赞同：1
> 
> 时间：2012-10-27T22:46:29.820
> 
> 标签：json, wcf

我有一组 WCF 服务，它们允许使用 JSON 格式进行消息交换。

```
[WebInvoke(Method = "GET", 
 ResponseFormat = WebMessageFormat.Json, 
 RequestFormat = WebMessageFormat.Json, 
 UriTemplate = "SearchStores/{accountId}/{storeName}")]
public IList<Store> SearchStores(string accountId, string storeName) 
```

如何将空/null storeName 传递给该方法？

如果我使用以下 url 调用该方法，我会得到 404 not found 错误。

```
servername:port/myservice/SearchStores/1/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:19:40.287

您可以修改模板以改用查询字符串参数。

```
UriTemplate = "SearchStores?accountId={accountId}&storeName={storeName}" 
```

这样，`accountId`如果`storeName`未在查询中指定，则为 null。如果 only`storeName`允许为空，您当然可以保持`accountId`原样并`UriTemplate`使用查询字符串参数构建`storeName`.

**编辑**

如果您不允许使用查询字符串，则可以`UriTemplate`按照[MSDN UriTemplate 文档](http://msdn.microsoft.com/en-us/library/bb675245.aspx)中的说明在您的中使用默认空值。在你的情况下：

```
UriTemplate = "SearchStores/{accountId}/{storeName=null} 
```

请注意，一旦使用默认空值，右侧的所有段也必须具有空默认值。例如，这将是有效的：

```
UriTemplate = "SearchStores/{accountId}/{storeName=null}/{someParam=null} 
```

但这不会：

```
UriTemplate = "SearchStores/{accountId}/{storeName=null}/{someParam} 
```

# php - Zend Framework 2 TableGateway 返回空结果集

> ID：13104851
> 
> 赞同：4
> 
> 时间：2012-10-27T22:47:30.137
> 
> 标签：php, mysql, zend-framework2

我刚刚开始使用 Zend Framework 2 进行开发，但遇到了障碍。

在最简单的表达式中， fetchAll 函数起作用：

```
public function fetchAll()
{
    $resultSet = $this->tableGateway->select();
    return $resultSet;
} 
```

但是，当我尝试通过以下方式混合加入时：

```
public function fetchAll()
{
    $sql = new Sql($this->tableGateway->getAdapter());

    $select = $sql->select();
    $select->from('Entreprise')
        ->columns(array('id', 'nom', 'categorie_id'))
        ->join(array('C' => 'Categorie'), 'categorie_id = C.id', array('categorie' => 'nom'), \Zend\Db\Sql\Select::JOIN_INNER);
    $resultSet = $this->tableGateway->selectWith($select);
    return $resultSet;
} 
```

结果查询是：

```
SELECT "Entreprise"."id" AS "id", "Entreprise"."nom" AS "nom", "Entreprise"."categorie_id" AS "categorie_id", "C"."nom" AS "categorie" FROM "Entreprise" INNER JOIN "Categorie" AS "C" ON "categorie_id" = "C"."id" 
```

表名和列都很好，因为查询不会引发错误，而是简单地返回一个空结果集。即使删除连接并只留下以下代码也无济于事。

```
public function fetchAll()
{
    $sql = new Sql($this->tableGateway->getAdapter());

    $select = $sql->select();
    $select->from('Entreprise');
    $resultSet = $this->tableGateway->selectWith($select);
    return $resultSet;
} 
```

这让我相信这只是我获取适配器或实例化选择的方式有问题，但我似乎无法弄清楚或找到任何解决方案。

谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:49:38.437

以下代码完美运行：

```
public function fetchAll()
{
    $sql = new Sql($this->tableGateway->getAdapter());

    $select = $sql->select();
    $select->from('Entreprise')
        ->columns(array('id', 'nom', 'categorie_id'))
        ->join(array('C' => 'Categorie'), 'categorie_id = C.id', array('categorie' => 'nom'), \Zend\Db\Sql\Select::JOIN_INNER);
    $resultSet = $this->tableGateway->selectWith($select);
    return $resultSet;
} 
```

...这是在另一个文件中意外输入的错字...

感谢山姆的领导，简单得可笑，但我只是没想过尝试！

# assembly - 使用“$”访问数据值登录程序集

> ID：13104854
> 
> 赞同：-1
> 
> 时间：2012-10-27T22:47:42.020
> 
> 标签：assembly, msp430

我想知道如何访问存储在这些变量中的数据......但我不知道 N0$ 例如代表以及如何将数据从那里提取到寄存器中，例如。

```
N0$:    .byte   DASH,DASH,DASH,DASH,DASH,END    ; 0
N1$:    .byte   DOT,DASH,DASH,DASH,DASH,END     ; 1
N2$:    .byte   DOT,DOT,DASH,DASH,DASH,END      ; 2
N3$:    .byte   DOT,DOT,DOT,DASH,DASH,END       ; 3
N4$:    .byte   DOT,DOT,DOT,DOT,DASH,END        ; 4
N5$:    .byte   DOT,DOT,DOT,DOT,DOT,END         ; 5
N6$:    .byte   DASH,DOT,DOT,DOT,DOT,END        ; 6
N7$:    .byte   DASH,DASH,DOT,DOT,DOT,END       ; 7
N8$:    .byte   DASH,DASH,DASH,DOT,DOT,END      ; 8
N9$:    .byte   DASH,DASH,DASH,DASH,DOT,END     ; 9

A$:     .byte   DOT,DASH,END                    ; A
B$:     .byte   DASH,DOT,DOT,DOT,END            ; B
C$:     .byte   DASH,DOT,DASH,DOT,END           ; C
D$:     .byte   DASH,DOT,DOT,END                ; D
E$:     .byte   DOT,END                         ; E
F$:     .byte   DOT,DOT,DASH,DOT,END            ; F
G$:     .byte   DASH,DASH,DOT,END               ; G
H$:     .byte   DOT,DOT,DOT,DOT,END             ; H
I$:     .byte   DOT,DOT,END                     ; I
J$:     .byte   DOT,DASH,DASH,DASH,END          ; J
K$:     .byte   DASH,DOT,DASH,END               ; K
L$:     .byte   DOT,DASH,DOT,DOT,END            ; L
M$:     .byte   DASH,DASH,END                   ; M
N$:     .byte   DASH,DOT,END                    ; N
O$      .byte   DASH,DASH,DASH,END              ; O
P$:     .byte   DOT,DASH,DASH,DOT,END           ; P
Q$:     .byte   DASH,DASH,DOT,DASH,END          ; Q
R$:     .byte   DOT,DASH,DOT,END                ; R
S$:     .byte   DOT,DOT,DOT,END                 ; S
T$:     .byte   DASH,END                        ; T
U$:     .byte   DOT,DOT,DASH,END                ; U
V$:     .byte   DOT,DOT,DOT,DASH,END            ; V
W$:     .byte   DOT,DASH,DASH,END               ; W
X$:     .byte   DASH,DOT,DOT,DASH,END           ; X
Y$:     .byte   DASH,DOT,DASH,DASH,END          ; Y
Z$:     .byte   DASH,DASH,DOT,DOT,END           ; Z 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:09:50.223

我不知道您的处理器或汇编编译器，但从我所学到的。

在塔斯姆：

将变量重命名为更容易的东西 N0$ 就像

```
 array1    db     'value1','value2','$' 
```

然后使用 tasm 将其写入屏幕

```
 mov ax,09h
    mov dx, offset array1
    int 21h 
```

对不起，如果这不是你要找的。

# php - 解析错误 我收到此错误Error parsing 0){ $response["words"] = array(); while($row = mysql_fetch_array($result)){ $word = array(); $word["id"] = $row["id"]; $word["word"] = $row["word"]; array_push($response["words"], $word); } $response["success"] = 1; echo json_encode($response); } else{ $response["success"] = 0; $response["message"] = "No word found"; echo json_encode($response); } ?> 安卓活动： public class MainActivity extends Activity{ JSONParser jParser = new JSONParser(); ArrayList<hashmap<string, string="">> wordsList; private static String url_webservice = "http://10.0.2.2/portablevision/webservice.php"; private static final String TAG_SUCCESS = "success"; private static final String TAG_WORDS = "words"; JSONArray palavras = null; @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); wordsList = new ArrayList<hashmap<string,string>>(); List <namevaluepair>params = new ArrayList<namevaluepair>(); JSONObject json = jParser.makeHttpRequest(url_webservice, "GET", params); Log.d("All words", json.toString()); try{ int success = json.getInt(TAG_SUCCESS); if(success == 1){ words = json.getJSONArray(TAG_WORDS); for(int i = 0; i < words.length; i++){ JSONObject c = words.getJSONObject(i); String id = c.getString("id"); String word = c.getString("word"); HashMap <string, string="">map = new HashMap<string, string="">(); map.put("id", id); map.put("word", word); wordsList.add(map); } } else{ Toast.makeText(MainActivity.this, "Unable to load words", Toast.LENGTH_LONG).show(); } } catch(JSONException e){ Toast.makeText(MainActivity.this, "Erro: " + e.getMessage(), Toast.LENGTH_LONG).show(); } } JSONParser 类： public class JSONParser { static InputStream is = null; static JSONObject jObj = null; static String json = ""; public JSONParser(){} public JSONObject makeHttpRequest(String url, String method, List <namevaluepair>params){ try{ if(method == "POST"){ DefaultHttpClient httpClient = new DefaultHttpClient(); HttpPost httpPost = new HttpPost(url); httpPost.setEntity(new UrlEncodedFormEntity(params)); HttpResponse httpResponse = httpClient.execute(httpPost); HttpEntity httpEntity = httpResponse.getEntity(); is = httpEntity.getContent(); } else if(method == "GET"){ DefaultHttpClient httpClient = new DefaultHttpClient(); String paramString = URLEncodedUtils.format(params, "utf-8"); url += "?" + paramString; HttpGet httpGet = new HttpGet(url); HttpResponse httpResponse = httpClient.execute(httpGet); HttpEntity httpEntity = httpResponse.getEntity(); is = httpEntity.getContent(); } } catch(UnsupportedEncodingException e){ e.printStackTrace(); } catch(ClientProtocolException e){ e.printStackTrace(); } catch(IOException e){ e.printStackTrace(); } try{ BufferedReader reader = new BufferedReader(new InputStreamReader(is, "utf-8"), 8); StringBuilder sb = new StringBuilder(); String line = null; while((line = reader.readLine()) != null){ sb.append(line + "\n"); } is.close(); json = sb.toString(); } catch(Exception e){ Log.e("Buffer error", "Error converting result " + e.toString()); } try{ jObj = new JSONObject(json); } catch(JSONException e){ Log.e("JSON Parser", "Error parsing data " + json.toString()); } return jObj; } } JSON的结果是正确的： {"words":[{"id":"1","word":"correct place"}],"success":1} 欢迎任何帮助 谢谢 您不能只为对象添加“属性”——对象的概念完全在编译时完成。在运行时，CPU 不知道给定的内存块称为“对象”或您决定调用类实例的任何内容。 （这本身就很有趣，因为 C++ 没有属性） 如果您只想要一个按名称引用的数据字段，那么任何标准关联容器都应该满足您的需求。 phpandroidweb-services 4 0 回答 0 Related 2 playframework - How do I rename a Play project? 0 c# - VirtualQueryEx 返回零且没有 GetLastError() 2 php - Can I add a parameter to a Route::group in Laravel but remove it before dispatching to a route in Laravel? 2 python - How to remove non-common values from elements in a nested list? 1 php - 如何在 apache 2 上创建别名文件夹 2 javascript - jQuery - Multiple Select Elements On Change Not Working 1 jquery - Can I filter a jqGrid by values in a hidden column using input in a visible column? 1 c++ - "ADOM XML v4" in XE4 1 matlab - 如何在 Thrust 或 Cublas 中找到两个矩阵 W 和 X 之间的行到所有行的距离矩阵？ 1 ios - 如何使用 parse.com 服务查询尚未在数组中的对象（刷新数组）？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</namevaluepair></string,></string,></namevaluepair></namevaluepair></hashmap<string,string></hashmap<string,>

> ID：13104858
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, android, web-services

我收到此错误`Error parsing <!DOCTYPE HTML...`，就像它没有找到资源一样，但我传递了正确的 url：

“http://10.0.2.2/portablevision/webservice.php”；

无论如何，这是我的 PHP 网络服务：

```
<?php
    $response = array();

    require_once __DIR__ . '/db_connect.php';

    $db = new DB_CONNECT();

    $result = mysql_query("SELECT * FROM words") or die(mysql_error());

    if(mysql_num_rows($result) > 0){
        $response["words"] = array();

        while($row = mysql_fetch_array($result)){
            $word = array();
            $word["id"] = $row["id"];
            $word["word"] = $row["word"];

            array_push($response["words"], $word);
        }

        $response["success"] = 1;

        echo json_encode($response);
    }
    else{
        $response["success"] = 0;
        $response["message"] = "No word found";

        echo json_encode($response);
    }
?> 
```

安卓活动：

```
public class MainActivity extends Activity{
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> wordsList;

    private static String url_webservice = "http://10.0.2.2/portablevision/webservice.php";
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_WORDS = "words";

    JSONArray palavras = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        wordsList = new ArrayList<HashMap<String,String>>();

        List<NameValuePair> params = new ArrayList<NameValuePair>();

        JSONObject json = jParser.makeHttpRequest(url_webservice, "GET", params);

        Log.d("All words", json.toString());

        try{
            int success = json.getInt(TAG_SUCCESS);

            if(success == 1){
                words = json.getJSONArray(TAG_WORDS);

                for(int i = 0; i < words.length; i++){
                    JSONObject c = words.getJSONObject(i);

                    String id = c.getString("id");
                    String word = c.getString("word");

                    HashMap<String, String> map = new HashMap<String, String>();
                    map.put("id", id);
                    map.put("word", word);

                    wordsList.add(map);
                }
            }
            else{
                Toast.makeText(MainActivity.this, "Unable to load words", Toast.LENGTH_LONG).show();
            }
        }
        catch(JSONException e){
            Toast.makeText(MainActivity.this, "Erro: " + e.getMessage(), Toast.LENGTH_LONG).show();
        }
} 
```

JSONParser 类：

```
public class JSONParser {
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    public JSONParser(){}

    public JSONObject makeHttpRequest(String url, String method, List<NameValuePair> params){
        try{
            if(method == "POST"){
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
             }
             else if(method == "GET"){
                 DefaultHttpClient httpClient = new DefaultHttpClient();
                 String paramString = URLEncodedUtils.format(params, "utf-8");
                 url += "?" + paramString;
                 HttpGet httpGet = new HttpGet(url);

                 HttpResponse httpResponse = httpClient.execute(httpGet);
                 HttpEntity httpEntity = httpResponse.getEntity();
                 is = httpEntity.getContent();
             }
         }
         catch(UnsupportedEncodingException e){
             e.printStackTrace();
         }
         catch(ClientProtocolException e){
             e.printStackTrace();
         }
         catch(IOException e){
             e.printStackTrace();
         }

         try{
             BufferedReader reader = new BufferedReader(new InputStreamReader(is, "utf-8"), 8);
             StringBuilder sb = new StringBuilder();
             String line = null;
             while((line = reader.readLine()) != null){
                 sb.append(line + "\n");
             }

             is.close();
             json = sb.toString();
         }
         catch(Exception e){
             Log.e("Buffer error", "Error converting result " + e.toString());
         }

         try{
             jObj = new JSONObject(json);
         }
         catch(JSONException e){
             Log.e("JSON Parser", "Error parsing data " + json.toString());
         }

         return jObj;
    }
} 
```

JSON的结果是正确的：

```
{"words":[{"id":"1","word":"correct place"}],"success":1} 
```

欢迎任何帮助

谢谢

# c++ - 单例类 - 真的很困惑

> ID：13104859
> 
> 赞同：0
> 
> 时间：2012-10-27T22:48:26.217
> 
> 标签：c++, oop, singleton

我正在尝试在 C++ 中实现一个 Singleton 类并且有点困惑。好的，假设我有以下两个类：

```
class Animal {

public:
    virtual int age() = 0;
    virtual void breed() = 0;   
};

class Cat : public Animal {
  public:
Cat();
int age();
void breed();  
}; 
```

该系统涉及更多类....（狗，鱼等）

现在我有一个单例类，我可以只使用 1 个对象：

```
class Singleton 
{
  public:
    Animal *newAnimal(string theTypeOfAnimal);
  private:   
   static Animal* pinstance;
};                        

Animal *Singleton::newAnimal(string theTypeOfAnimal)
{
pinstance = new Cat;

}           

int main()
{        
Singleton *s;
return 0;
} 
```

更新：

新代码：

```
#include <iostream>
using namespace std;

class Animal {

public:
    virtual int age() = 0;
    virtual void breed() = 0;
};

class Cat : public Animal
{
public:
        virtual int age() { return 9; }
        virtual void breed() { }

 };
class Singleton
{
public:
    Animal *newAnimal(string theTypeOfAnimal);
  private:   
   static Animal* pinstance;
};

Animal* Singleton::pinstance = 0;

Animal *Singleton::newAnimal(string theTypeOfAnimal)
{
     this->pinstance = new Cat;
 return pinstance;
}  

 int main(int argc, char *argv[]) {

Singleton s;

Animal *myAnimal = NULL;

Animal *myAnimal = s->newAnimal("cat"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:11:05.973

您需要明确定义您的静态成员：`Animal *Singleton::pinstance = nullptr;`

`static Animal* pinstance`类内部只是一个声明，即没有为变量分配实际空间。原因是静态成员不属于特定对象，并且没有分配托管类的实例。静态成员在所有类实例中共享，并且必须显式分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:23:40.277

您必须在它之外定义静态类对象：

```
Animal* Singleton::pinstance = 0; 
```

您必须在类中定义函数`Cat`：

```
class Cat : public Animal
{
public:
    Cat() {}
    int age() { return 7; }
    void breed() {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T22:54:18.750

您必须从单例派生，而不是从目标类派生。单例是一种模式。您可以将其实现为模板类（通常）或派生自（罕见）的基类。经典单例具有：

*   私有构造函数
*   隐私复制构造函数
*   私有非虚拟析构函数
*   私人运营商=
*   持有指向自身对象的指针
*   有外部友元函数来获取对象

它可以：

*   没有实现 ctor、cctor、dtor 和 oper=，因此尝试从派生类调用它会导致链接错误
*   私下派生孩子
*   惰性对象初始化
*   ... 更多的东西

关于哪种实现更好，单例是好还是坏，没有共识。在我看来*，单例*对初学者来说弊大于利。在确定它在特定地方需要它之前不要使用它。

作为沙漠一个带有智能指针的糟糕单例模板（发现恐怖错误！）：

```
#include <memory> 
#include <boost/noncopyable.hpp>

template <class T>
class Singleton : public boost::noncopyable
{
public:
    static std::shared_ptr<T> Get()
    {
        if( m_pSelf.get() == 0 )
            return m_pSelf = std::shared_ptr<T>(new T());
        else 
            return m_pSelf;
    }

protected:
    Singleton(){}
    ~Singleton() {}

private:    
    static std::shared_ptr<T> m_pSelf;
};

template <class T> std::shared_ptr<T>  Singleton<T>::m_pSelf; 
```

# android - android中圆形页面指示器的适配器

> ID：13104861
> 
> 赞同：0
> 
> 时间：2012-10-27T22:48:49.593
> 
> 标签：android

我正在尝试使用圆形页面指示器来允许用户通过翻转屏幕来查看多个页面。

每个页面都有用于视图的单独 XML 文件，每个页面都有一个按钮，该按钮绑定到 Activity 中的 java 方法。我想知道如何为多个页面初始化 Activity 中的所有按钮。因为目前，我只能为视图的第一页初始化按钮。我无法初始化第二页和第三页的按钮。有谁知道如何实现这一目标。我已将所有要为所有按钮完成的工作放在一个活动中。

我目前正在使用这个指标：http: [//viewpagerindicator.com/](http://viewpagerindicator.com/)

这是我的圆形页面指示器适配器：

```
 @Override
public Object instantiateItem(View collection, int position) {

    inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resid = 0;
    //View v = null;// inflater.inflate( R.layout.gaugescreen, (ViewPager)collection, false );
    switch( position )
    {
        case 0:
            resid = R.layout.gaugescreen;
            break;
        case 1:
            resid= R.layout.liveworkoutstatisticsscreen;
            break;
         case 2:
             resid = R.layout.mapscreen;
             break;
        default:
            resid = R.layout.gaugescreen;
            break;

    }

        View view = inflater.inflate(resid, null);

        ((ViewPager) collection).addView(view,0);

        return view;
} 
```

有谁知道如何实现这一目标？

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:59:06.517

[使用setOffscreenPageLimit](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)调整屏幕外页面限制，以便您的其他页面也被实例化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T18:37:15.853

CirclepageIndicator 类和 Adapter 类与 PageAdapter 一起使用。这里我使用 CirclePageIndicator 在活动底部显示圆圈并添加两个片段类（可以添加任意数量的片段）。

第 1 步：FragmentActivity 类（如主类）

```
 import android.content.Intent;
    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.view.ViewPager;
    import android.support.v4.view.ViewPager.OnPageChangeListener;
    import android.view.Window;

    import com.viewpagerindicator.CirclePageIndicator;
    import com.viewpagerindicator.PageIndicator;

    public class ViewPager_activity extends FragmentActivity
    {
        private ViewPager _mViewPager;
        private ViewPagerAdapter _adapter;
        PageIndicator mIndicator;
        CirclePageIndicator circlePageIndicator;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.viewpager_main_activity);

            setUpView();
        }

       private void setUpView()
       {
            _adapter = new ViewPagerAdapter(getApplicationContext(),getSupportFragmentManager());
            _mViewPager = (ViewPager) findViewById(R.id.pager);

            _mViewPager.setAdapter(_adapter);
            circlePageIndicator=(CirclePageIndicator)findViewById(R.id.indicator);
            mIndicator=circlePageIndicator;
            circlePageIndicator.setViewPager(_mViewPager);
            final float density = getResources().getDisplayMetrics().density;
            circlePageIndicator.setBackgroundColor(0xFFCCCCCC);
            circlePageIndicator.setRadius(10 * density);
            circlePageIndicator.setPageColor(0xFF888888);
            circlePageIndicator.setFillColor(0x880000FF);
            circlePageIndicator.setStrokeColor(0xFF000000);
            circlePageIndicator.setStrokeWidth(2 * density);
            circlePageIndicator.setSnap(true);
           _mViewPager.setCurrentItem(0);

           setCirclePageIndicator();
           }
            public void setCirclePageIndicator()
            {
                circlePageIndicator.setOnPageChangeListener(new OnPageChangeListener() {

                    @Override
                    public void onPageSelected(int position) {
                        // TODO Auto-generated method stub
                        btnAction(position);
                    }

                    @Override
                    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
                        // TODO Auto-generated method stub
                        //btnAction(position);
                    }

                    @Override
                    public void onPageScrollStateChanged(int arg0) {
                        // TODO Auto-generated method stub

                    }
                });
            }

        private void btnAction(int action){
            switch(action){
              case 0: 

                  break;

              case 2: 

                 startActivity(new Intent(ViewPager_activity.this,HomePage_Activity.class));
                  break;
            }
        }
    } 
```

第 2 步：FragmentPageAdapter.class

```
 public class ViewPagerAdapter extends FragmentPagerAdapter
    {

        private Context _context;
         public static int totalPage=3;

         public ViewPagerAdapter(Context context, FragmentManager fm) {
                super(fm);
                _context=context;

          }

    @Override
        public Fragment getItem(int position) {
            Fragment f = new Fragment();
            switch(position){
            case 0:
                f=ViewPager_first_fragment.newInstance(_context);
                break;
            case 1:
                f=ViewPager_second_fragment.newInstance(_context);
                break;

            }
            return f;
        }
        @Override
        public int getCount() {
            return totalPage;
        }

} 
```

第三步：查看Pager_first_fragment.class

```
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;

public class ViewPager_first_fragment extends Fragment
{
    ImageView advertiseImage;

    public static Fragment newInstance(Context context) {

            ViewPager_first_fragment f = new ViewPager_first_fragment();

            return f;
        }
     @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) 
        {

            ViewGroup root = (ViewGroup) inflater.inflate(R.layout.viewpager_first_fragment, null);
            advertiseImage=(ImageView)root.findViewById(R.id.advertiseScreen1);
            advertiseImage.setImageResource(R.drawable.advertisescreen_1);
            return root;
        }
} 
```

第 4 步：查看Pager_main_activity.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <com.viewpagerindicator.CirclePageIndicator
        android:id="@+id/indicator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:padding="10dip" />

</RelativeLayout> 
```

第 5 步：

```
 <ImageView
       android:id="@+id/advertiseScreen1"
       android:layout_width="fill_parent" 
       android:layout_height="fill_parent"

       />

</LinearLayout> 
```

第 6 步：style.xml 最后你必须更新你的 style.xml indise res/value 文件夹。

```
<style name="AppTheme" parent="AppBaseTheme">
        <item name="vpiCirclePageIndicatorStyle">@style/CirclePageIndicator</item>
    </style>

    <style name="Widget"></style>

    <style name="CirclePageIndicator" parent="Widget">
        <item name="android:textColor">#ffffff</item>
        <item name="android:textSize">14sp</item>
        <item name="android:textStyle">italic</item>
        <item name="android:paddingLeft">16dp</item>
        <item name="android:paddingRight">16dp</item>
        <item name="android:fadingEdge">horizontal</item>
        <item name="android:fadingEdgeLength">8dp</item>
    </style> 
```

# php - 将 Tcl 列表（或类似列表）解析为 PHP 数组

> ID：13104863
> 
> 赞同：0
> 
> 时间：2012-10-27T22:49:23.233
> 
> 标签：php, multidimensional-array, tcl

由于我习惯了 Tcl 并且喜欢它的简单性，我想创建和解析表单的配置文件，

```
block
{
    key1    val1
    key2    val2

    key3
    {
        subkey1 subval1
        subkey2 subval2
    }

    key4
    {
        item1
        item2
        {item3 has spaces in it}
        {item4 {has {bra{ck}ets}} in it}
    }
} 
```

对于上面的例子，我期望的 PHP 数组是：

```
[0] => "block",
[1] => (
    [0] => "key1",
    [1] => "val1",
    [2] => "key2",
    [3] => "val2",
    [4] => "key3",
    [5] => (
        [0] => "subkey1",
        [1] => "subval1",
        [2] => "subkey2",
        [3] => "subval2"
    ),
    [6] => "key4",
    [7] => (
        [0] => "item1",
        [1] => "item2",
        [2] => "item3 has spaces in it"
        [3] => (
            [0] => "item4",
            [1] => (
                [0] => "has",
                [1] => "bra{ck}ets"
            ),
            [2] => "in",
            [3] => "it"
    ),
) 
```

由程序决定读取`block`和`key3`作为键值对的内容，`key4`作为项目数组（折叠嵌套括号）等等。

*我不一定非得使用大括号 ( `{}`)——例如，虽然我对 Lisp 一无所知，但它似乎使用了括号 ( `()`)（看起来它影响了 Tcl——我确定我错过了一个这里有很多相关的历史......），这很好。*

我*认为*上面的例子是一致的，但我不确定。我认为规则是，“如果没有空格（除了前导和尾随），则视为单个文字实体；否则，视为数组。”

1.  **这种数据是否有一个官方术语，其中一切都是一个列表？**

2.  在我开始编写 PHP 函数来执行此操作之前，**有没有人知道现有函数或进行上述转换的一些聪明方法？**

**更新：**

@glennjackman 指出我的例子是不一致的，确实如此。下的第三个实体`key4`应该是：

```
 [2] => (
            [0] => "item3",
            [1] => "has",
            [2] => "spaces",
            [3] => "in",
            [4] => "it",
        ), 
```

然而不幸的是，这不是我想象的输出。经过进一步思考，我认为为了得到我想要的，有*必要*引入一种交替可区分的方式来指示文字，*例如*使用双引号`""`，或者使用 a 后面的空白`{`作为规则来解释为文字。

现在，我会选择后者，直到我想出一个更优雅的解决方案。也就是说，**如果左大括号`{`后面紧跟一个非空白字符，则考虑左大括号的所有内容，即文字字符串。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:34:17.190

这是一个解决方案......**我确信它可以改进**......你的格式让我很头疼，但我能够在一段时间后破解它

使用的代码

```
$string = 'block
    {
        key1    val1
        key2    val2

        key3
        {
            subkey1 subval1
            subkey2 subval2
        }

        key4
        {
            item1
            item2
            {item3 has spaces in it}
            {item4 {has {bra{ck}ets}} in it}
        }

        key5
        {
            This  
            {
                is
                {
                    just
                    {Too Crazy {format}}
                }
            }

        }

    }'; 
```

**编辑前格式化**

```
echo "<pre>";
print_r(parseTCL($string)); 
```

输出

```
Array
(
    [block] => Array
        (
            [0] => key1
            [1] => val1
            [2] => key2
            [3] => val2
            [key3] => Array
                (
                    [0] => subkey1
                    [1] => subval1
                    [2] => subkey2
                    [3] => subval2
                )

            [key4] => Array
                (
                    [0] => item1
                    [1] => item2
                    [2] => item3 has spaces in it <--- Item 3 not broken
                    [item4] => Array
                        (
                            [0] => has
                            [1] => bra{ck}ets 
                        )

                    [3] => in
                    [4] => it
                )

            [key5] => Array
                (
                    [This] => Array
                        (
                            [is] => Array
                                (
                                    [0] => just
                                    [1] => Too
                                    [Crazy] => Array
                                        (
                                            [0] => format
                                        )

                                )

                        )

                )

        )

) 
```

**编辑后的格式**

```
echo "<pre>";
print_r(parseTCL($string,true));
                           ^----------- Additional Option included 
```

输出

```
 .....

            [key4] => Array
                (
                    [0] => item1
                    [1] => item2
                    [2] => item3  <---------- Item 3 has been broken
                    [3] => has
                    [4] => spaces
                    [5] => in
                    [item4] => Array
                        (
                            [0] => has
                            [1] => bra{ck}ets
                        )

                    [6] => in
                    [7] => it
                )

 ..... 
```

使用的功能

```
function parseTCL($string, $breakCurly = false) {
    $dataArray = $paths = $toks = $final = array();
    $path = $last = "";

    /**
     * Prepare Tokens
     */
    $array = array_map("trim", explode("\n", $string));
    foreach ( new ArrayIterator($array) as $value ) {
        if (strpos($value, " {") !== false) {
            $v = trim($value, " {}");
            $v = str_replace(array(" {","} "), array(" \n{","\n}\n"), $v);
            $v = explode("\n", $v);
            foreach ( $v as $n ) {
                if (strpos($n, "{") !== false && strpos($n, "}") !== false) {
                    $toks[] = $n;
                    continue;
                } else if (strpos($n, "{") !== false) {
                    $toks[] = "{";
                    $toks[] = trim($n, "{");
                } else if (strpos($n, "}") !== false) {
                    $toks[] = "}";
                    $toks[] = trim($n, "}");
                } else {
                    if (strpos($n, " ") !== FALSE) {
                        $v = explode(" ", $n);
                        foreach ( $v as $n ) {
                            $toks[] = $n;
                        }
                    } else {
                        $toks[] = $n;
                    }
                }
            }
            continue;
        }

        if (strpos($value, " ") !== FALSE && (strpos($value, "{") !== 0 || $breakCurly == true)) {
            $breakCurly === true AND $value = trim($value,"{}");
            $v = explode(" ", $value);
            foreach ( $v as $n ) {
                $toks[] = $n;
            }
            continue;
        }
        $toks[] = $value;
    }

    unset($array);

    /**
     * Convert Tokens to Paths
     */
    foreach ( new ArrayIterator($toks) as $tok ) {
        $tok = trim($tok);
        if (empty($tok))
            continue;
        if ($tok == "{") {
            $path .= $last . "/";
            continue;
        }
        if ($tok == "}") {
            $path = substr($path, 0, strrpos(trim($path, "/"), "/")) . "/";
            continue;
        }
        $tok = trim($tok, "{}");
        $paths[] = $path . $tok;
        $last = $tok;
    }

    /**
     * Convert PATH To array
     */
    $cit = new CachingIterator(new ArrayIterator($paths));
    foreach ( $cit as $path ) {
        if (empty($path))
            continue;
        if ($cit->hasNext()) {
            $in = $cit->getInnerIterator()->current();
            if (strpos($in, $path) === 0)
                continue;
        }
        $parts = array_filter(explode("/", $path));
        $value = array_pop($parts);

        $temp = &$dataArray;
        foreach ( $parts as $key ) {
            $temp = &$temp[$key];
        }
        $temp[] = $value;
    }
    unset($paths);
    return $dataArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:53:48.953

花了一段时间，但我想出了一个解决方案（不使用正则表达式）。

## 解决方案

```
function list_to_array(&$str, $detect_literals = false)
{
    $arr = array();
    while ($str = ltrim($str))
    {
        if ($str[0] === '{')
        {
            if (!$detect_literals || ctype_space($str[1]))
            {
                $str = substr($str, 1);
                $arr[] = list_to_array($str, $detect_literals);
            }
            else
            {
                $pos = -1;
                do $pos = strpos($str, '}', $pos+1);
                while ($pos && !ctype_space($str[$pos+1]));
                if (!$pos) $pos = strlen($str);
                while ($str[$pos-1] === '}') $pos--;
                $arr[] = substr($str, 1, $pos-1);
                $str = substr($str, $pos+1);
            }
        }
        elseif ($str[0] === '}' && ctype_space(substr(ltrim($str, '}'), 0, 1)))
        {
            $str = substr($str, 1);
            return $arr;
        }
        else
        {
            $pos = strlen(strtok($str, " \t\n\r\0\x0B"));
            while ($str[$pos-1] === '}') $pos--;
            $arr[] = substr($str, 0, $pos);
            $str = substr($str, $pos);
        }
    }

    return $arr;
} 
```

`detect_literals`默认情况下，`false`将所有内容都扩展`{...}`为数组，而不是`true`仅将其`{ ...}`（注意空格）作为数组进行扩展，否则作为文字进行扩展。

## 简单测试（输入）

这是原始问题的输入字符串：

```
$str = '
    block
    {
        key1    val1
        key2    val2

        key3
        {
            subkey1 subval1
            subkey2 subval2
        }

        key4
        {
            item1
            item2
            {item3 has spaces in it}
            {item4 {has {bra{ck}ets}} in it}
        }
    }
'; 
```

## 简单测试（输出，默认）——看起来和预期的一样

```
Array
(
    [0] => block
    [1] => Array
        (
            [0] => key1
            [1] => val1
            [2] => key2
            [3] => val2
            [4] => key3
            [5] => Array
                (
                    [0] => subkey1
                    [1] => subval1
                    [2] => subkey2
                    [3] => subval2
                )

            [6] => key4
            [7] => Array
                (
                    [0] => item1
                    [1] => item2
                    [2] => Array
                        (
                            [0] => item3
                            [1] => has
                            [2] => spaces
                            [3] => in
                            [4] => it
                        )

                    [3] => Array
                        (
                            [0] => item4
                            [1] => Array
                                (
                                    [0] => has
                                    [1] => Array
                                        (
                                            [0] => bra{ck}ets
                                        )

                                )

                            [2] => in
                            [3] => it
                        )

                )

        )

) 
```

## 简单测试（输出，检测文字）——看起来和预期的一样

```
Array
(
    [0] => block
    [1] => Array
        (
            [0] => key1
            [1] => val1
            [2] => key2
            [3] => val2
            [4] => key3
            [5] => Array
                (
                    [0] => subkey1
                    [1] => subval1
                    [2] => subkey2
                    [3] => subval2
                )

            [6] => key4
            [7] => Array
                (
                    [0] => item1
                    [1] => item2
                    [2] => item3 has spaces in it
                    [3] => item4 {has {bra{ck}ets
                )

            [8] => in
            [9] => it
        )

) 
```

请注意，这`[3] => item4 {has {bra{ck}ets`是正确的，因为检测文字的规则是：*（1）左大括号后跟非空白字符和（2）第一个右大括号后跟空白字符*之间的所有内容，*即*内的左大括号文字被忽略。

## 复杂测试（输入）

为了测试稳健性，我还尝试了以下字符串：

```
$str = '
    a
    {
    }
    {}
    {}{}
    {
        b
        {
        }
    }
    {
        {}
        c
    }
    {
        { {{ {d}} }}
    }
    {
        e{f
        g}h
        ij{
        }kl
        mn}
    {
        {op}}
    {qrs
'; 
```

## 复杂测试（输出，默认）——看起来像预期的那样

```
Array
(
    [0] => a
    [1] => Array
        (
        )

    [2] => Array
        (
        )

    [3] => Array
        (
            [0] => }{
        )

    [4] => Array
        (
            [0] => b
            [1] => Array
                (
                )

        )

    [5] => Array
        (
            [0] => Array
                (
                )

            [1] => c
        )

    [6] => Array
        (
            [0] => Array
                (
                    [0] => Array
                        (
                            [0] => Array
                                (
                                    [0] => Array
                                        (
                                            [0] => d
                                        )

                                )

                        )

                )

        )

    [7] => Array
        (
            [0] => e{f
            [1] => g}h
            [2] => ij{
            [3] => }kl
            [4] => mn
        )

    [8] => Array
        (
            [0] => Array
                (
                    [0] => op
                )

        )

    [9] => Array
        (
            [0] => qrs
        )

) 
```

## 复杂测试（输出，检测文字）——看起来和预期的一样

```
Array
(
    [0] => a
    [1] => Array
        (
        )

    [2] => 
    [3] => }{
    [4] => Array
        (
            [0] => b
            [1] => Array
                (
                )

        )

    [5] => Array
        (
            [0] => 
            [1] => c
        )

    [6] => Array
        (
            [0] => Array
                (
                    [0] => { {d
                )

        )

) 
```

请注意，这`[0] => { {d`是正确的，因为一旦`}`找到后跟空格，文字就会关闭。因此，以下`}`s 被作为数组的结尾处理，导致提前终止，并留下部分输入字符串未处理：

```
 }
        {
            e{f
            g}h
            ij{
            }kl
            mn}
        {
            {op}}
        {qrs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T01:51:33.400

*不是答案，但我想要比评论更多的格式*

这是一个难题。当你看到

```
 item2
    {item3 has spaces in it} 
```

你如何决定生产

```
 [1] => "item2",
    [2] => "item3 has spaces in it" 
```

代替

```
 [1] => "item2",
    [2] => (
            [0] => "item3",
            [1] => "has"
            [2] => "spaces"
            [3] => "in"
            [4] => "it"
        ), 
```

??

您是否依赖文档的结构来确定列表是真正的列表还是只是一个字符串？是换行符的存在，还是一行只有 2 个单词等？

# excel - 在 VBA 中循环添加扩展名 .jpg

> ID：13104864
> 
> 赞同：0
> 
> 时间：2012-10-27T22:49:28.340
> 
> 标签：excel, vba, loops, concatenation

我对 VBA 非常陌生，我想为列中包含的值添加一个 .jpg 扩展名。

```
Header Col G
11125;111545
154645
154511;145521;165421
1156556;13165
567418 
```

我想循环进入此列并为每个值添加一个 .jpg（每个单元格多个图像）

编辑： 2n 尝试和工作一个

```
Sub image()
Dim c As Range

    For Each c In Selection.Cells
        Dim Words() As String
        Words() = Split(c.Value, ";")
        Dim x As Integer

        For x = 0 To UBound(Words)
        Words(x) = Words(x) & ".jpg"
        Next x
        c.Value = Join(Words, ";")
    Next
End Sub 
```

可能不是最短的方法..但它的工作原理谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:55:38.773

这是一种非标准的方法......

选择您的单元格

```
dim c as range
for each c in Selection.cells
    c.value = Join(Split(c.value,";"),".jpg;") & ".jpg"
    'This is what I'd actually use:
    'c.value = Replace(c.value, ";", ".jpg;") & ".jpg"
next 
```

要回答您编辑的问题，您做错的是：

```
c.Value = Words(x) & ".jpg" 
```

在这里，您通过每次迭代覆盖 c.Value 的值并添加“.jpg”，因此它最后只会有最后一个值。

如果您想继续使用您的方法，我建议您：

```
dim temp
temp = ""
for x = Lbound(Words) to Ubound(Words)
   temp = temp & Words(x) & ".jpg"
next x
c.value = temp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:15:59.823

```
Sub image()
Dim c As Range

    For Each c In Selection.Cells
        Dim Words() As String
        Words() = Split(c.Value, ";")
        Dim x As Integer

        For x = 0 To UBound(Words)
        Words(x) = Words(x) & ".jpg"
        Next x
        c.Value = Join(Words, ";")
    Next
End Sub 
```

# php - 将人们重定向到网站

> ID：13104865
> 
> 赞同：1
> 
> 时间：2012-10-27T22:49:30.337
> 
> 标签：php, javascript, redirect

我试图弄清楚如何根据引荐来源将某个域上的所有流量重定向到我的其他网站。

例如，我们只希望没有推荐人或从我们的其他网站链接到的人能够访问该网站。

我正在考虑一个脚本，如果他们的推荐人与我指定的网站不匹配（但仍然不允许推荐人流量），则可以将每个人重定向到我选择的网站。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T23:08:14.123

以下 PHP 代码应该这样做（但请记住，这不能用作安全措施，因为`Referer`标头由客户端提供）：

```
if (isset($_SERVER['HTTP_REFERER']) &&
    $_SERVER['HTTP_REFERER'] &&
    stripos($_SERVER['HTTP_REFERER'], "example.org") === false) {
    header("Location: http://example.com/", true, 302);
    exit();
} 
```

在这里，我们检查客户端是否提供了`Referer`标头，然后检查它是否为非空，最后检查它是否缺少正确的域名（此处为“example.org”）。如果是这样，我们将客户端重定向到另一个 URL（此处为“http://example.com/”）并退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T22:53:39.337

您可以只检查 HTTP 引用（故意拼写错误）标头：

```
if (!stristr($_SERVER['HTTP_REFERER'], "somesiteyouspecify") && !$_SERVER['HTTP_REFERER'] == '') ... redirect 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T23:06:01.270

您应该在 Apache 或 nginx 等网络服务器中将其配置为 RewriteRules。可以在文档中轻松找到示例......（如果我知道使用的网络服务器软件，我会给出一个......）

# c++ - C++ 编程循环总和

> ID：13104866
> 
> 赞同：1
> 
> 时间：2012-10-27T22:49:37.453
> 
> 标签：c++, loops, sum

我需要编写一个程序来显示数字 -1.1 到 3.4，然后显示负和和正和。我已经编写了显示数字的循环，但我不知道如何从这个循环中获取负和和正和。我需要在这段代码中的某处分配总和：

```
double deci1 = -1.1; 

while (deci1 <= 3.4)
{
    cout << deci1 << " "; 
    deci1 = deci1 + 0.3; 
} 
```

..这样程序将显示“负和为-2.6”，“正和为21”..在显示值列表之后。请帮忙。我知道这可能真的很简单，我想太多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:54:15.060

会是这样的

```
double sumNeg = 0.0;
double sumPos = 0.0;

while(deci1 <= 3.4)
{
   if(deci1 < 0)
   {
      sumNeg += deci1;
   }
   else
   {
      sumPos += deci1;
   }
   deci1+=0.3;
}

printf("Negative sum: %3.3f\nPositive sum %3.3f\n", sumNeg, sumPos); 
```

您应该注意的是`deci1 <= 3.4`，它可能会或可能不会评估，因为您确实对双精度数的离散表示具有一定的不确定性。（你的 deci1 可能是 3.3999999999 或 3.400000000001，一个返回真，一个返回假）

# css - 您如何将整体图像 css 消除为单个 div？

> ID：13104867
> 
> 赞同：0
> 
> 时间：2012-10-27T22:49:38.723
> 
> 标签：css, image

作为示例，我正在尝试创建缩略图，但应用了下面列出的自动 img css

```
img, img a {
border: none;
  margin-top:10px;
  margin-bottom:10px;
} 
```

由于某种原因，我无法在脑海中理解它。我知道语法可能很简单，但我似乎不记得了。谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:58:08.437

您不能为图像添加边距的原因是因为 img 元素默认情况下是内联的。这意味着您不能为它们提供尺寸，或者从底部或顶部添加边距（以及您可能应该阅读的其他一些内容）。

这意味着为了给 img 元素提供顶部或底部的边距，您需要将其声明为块，或者更确切地说是 inline-block。这是使用

```
img { display: inline-block; } 
```

然后你可以加上你的利润和中提琴：

```
img { 
    display: inline-block;
    margin: 10px 0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:08:08.773

您是否尝试以某种方式设置所有图像的样式，然后排除某个容器 div 中的图像？如果您的容器 div 被称为#wrapper，那么执行以下操作：

```
#wrapper img,
#wrapper a img /* assuming that's what you meant rather than img a */
{
  /* undo what you did above for images inside #wrapper */
  margin-top: 0;   margin-bottom: 0;
} 
```

img 的这种松散选择器可能会很麻烦，因为图像一直在不同的上下文中使用。我更喜欢仅对#content div 或类似内容中的图像进行样式设置。

# c# - 从 sql 数据库向文本框添加值

> ID：13104868
> 
> 赞同：0
> 
> 时间：2012-10-27T22:49:47.500
> 
> 标签：c#, asp.net

我正在尝试创建一个站点来学习 ASP.NET c#。虽然试图从我的数据库中获取值，但我被卡住了，我想说如果“客户”已登录，我可以在一些文本框中显示他的地址详细信息。类似于使用 Select 的存储过程。有人可以帮助我或推荐我在哪里可以学习如何获取登录的客户的详细信息吗？或者是否有一种特殊的方式我应该这样做而不是使用“糟糕的编程方法”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:36:29.070

建议使用内置的 Membership 类：

```
MembershipUser m = Membership.GetUser();

if (m == null)
{
   // User not logged on.
} 
```

存储在 中的用户 ID `m.ProviderUserKey`，如果您使用的是[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)（如果不使用，请考虑使用它。它简单方便）使用以下方法获取有关此用户的数据：

```
var loggedOnUser = context.Users.First(u=>u.ProviderUserKey == m.ProviderUserKey);

    if (loggedOnUser  == null)
    {
       // Shoudn't happen. If do, the user logged in for some reason is not stored in the database.
    } 
```

最好实现从 MembershipUser 派生的 CustomMembershipProvider 和 CustomMembershipUser，因此您可以通过这种方式检索有关用户的所有信息：

```
// Get custom user (if allready logged in)
CustomMembershipUser user = Membership.GetUser() as CustomMembershipUser; 
```

# ruby-on-rails - 如何在 rails3 中嵌入用户创建的 ruby 程序

> ID：13104869
> 
> 赞同：2
> 
> 时间：2012-10-27T22:49:51.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，我是 Rails 的新手，并且在 ruby​​ 方面有几天的经验。我使用线程创建了一个秒表程序。但是现在我想把它放在我的 Rails 应用程序中，并且视图应该有按钮来开始、停止、恢复秒表，因为我正在跟踪一个事件。有人可以展示**如何将 ruby​​ 程序嵌入到 rails 并从视图中使用它吗？**

应从视图中的开始/停止/恢复按钮调用以下程序

**stopwatch.rb：（**它现在只有 start 方法和 pause 方法）

```
class Stopwatch

def initialize
    @t_start
    @t_elapsed 
    @t_total
    @t_current
end

def start
    @t_start = Time.now
    t = Thread.new do 
          while true do
            @t_current = Time.now
            puts @t_current
            @t_elapsed = @t_current - @t_start
            puts "Time elapsed is : #{@t_elapsed.to_i} seconds"
            sleep 1
          end

     end

end

def pause
    # Stop the Thread => Sleep the Thread until Resume is pressed.
    t.kill
    # Calculate the elapsed time
        @t_elapsed = @t_current - @t_start   

    end

end

ticker = Stopwatch.new

ticker.start 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:56:18.127

所以首先你可以在`lib/`你的应用程序的目录中添加这个类。那么问题是你不能`puts`直接到视图中。一种解决方案可能是为此使用[Pusher](http://pusher.com/)。然后在您的控制器中，您可以触发（[那里的文档和示例](https://devcenter.heroku.com/articles/pusher#triggering-events)）要发送到视图的数据。

然后你会在 javascript 中得到值，你可以更新视图。

为了让按钮工作，您还需要使用 Ajax 查询并在控制器中处理它

# c# - 无法获取特定页面的 DOM

> ID：13104871
> 
> 赞同：0
> 
> 时间：2012-10-27T22:50:35.943
> 
> 标签：c#, .net, dom, browser

我尝试了几种解决方案，但在我的测试中都失败了。我正在制作一个读取此页面 DOM 的表单：[http ://www.kayak.com.br/flights#/NYC-DXB/2013-03-29-flexible/2013-04-17-flexible](http://www.kayak.com.br/flights#/NYC-DXB/2013-03-29-flexible/2013-04-17-flexible)

这是一个例子，我想自动搜索特定的航班/日期。该页面有多个框架，我尝试过：

*   [新线程中的 WebBrowser 控件](https://stackoverflow.com/questions/4269800/webbrowser-control-in-a-new-thread/4271581#4271581)
*   [HTML - 我如何知道所有帧何时加载？](https://stackoverflow.com/questions/672731/html-how-do-i-know-when-all-frames-are-loaded)
*   [WebBrowser DocumentCompleted 事件多次触发](https://stackoverflow.com/questions/3239204/webbrowser-documentcompleted-event-fired-more-than-once)
*   [如何在 C# 中使用 WebBrowser 控件 DocumentCompleted 事件？](https://stackoverflow.com/questions/840813/how-to-use-webbrowser-control-documentcompleted-event-in-c)
*   [检测 WebBrowser 完整页面加载](https://stackoverflow.com/questions/2777878/detect-webbrowser-complete-page-loading)

这些链接中的所有解决方案都没有奏效。然后我意识到“documentCompleted”事件没有在进度条的末尾触发，最后一个事件是在航班搜索完成之前触发的。

我能够得到它的唯一方法是将计时器设置为 15 秒（假设研究完成），但这根本不可靠！

这是我在这里的第一篇文章，通常我会找到我需要的一切，但这次我想我需要额外的帮助！:)

# azure - 表存储（模拟器）插入失败，并显示“请求输入之一无效”。

> ID：13104874
> 
> 赞同：3
> 
> 时间：2012-10-27T22:51:05.530
> 
> 标签：azure, azure-table-storage

我有一个导入过程，它从旧源获取数据并将其放入表存储中，这使我可以重新初始化表存储并根据需要重新开始。它在更新到 .NET 的 10 月 Azure SDK (VS2012) 之前一直在工作。现在，在插入一些实体后它失败了（它似乎有所不同，导入的数据本质上不是静态的）。相同类型的第一个实体始终插入成功。分区键是唯一的，每个分区键的 RowKey 是一个空字符串（*非*空）。它在`SaveChangesWithRetries()`. 新 SDK 中是否有任何与我之前所做的不兼容的更改？

**更新**

我一直在通过查询表存储数据库来检查成功插入行的实际 XML。我注意到的一件事是，实体上的可为空的 int 列在为`nvarchar(max)`空和`int`不为空时具有 SqlType。这是故意的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T22:03:13.247

因此，我能够以一致的方式成功地重现该错误，事实证明这是 2012 年 10 月 SDK 中引入的一个非常讨厌的错误。

任何以空格结尾的字符串都会引发异常。在所有字符串输入上调用 Trim() 已经解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:18:31.083

这显然是模拟器的问题之一。您可能知道，它模拟 SQL Server 中的表存储。这在大多数情况下都有效，但是当您尝试做一些特殊的事情时，例如添加额外的属性，或者在您的情况下只是在属性中混合可空值和不可空值时，事情往往会变糟。

[本页](http://msdn.microsoft.com/en-us/library/windowsazure/gg433135.aspx)解释了实际的表存储服务和模拟器中的实现之间的差异。但是您的问题似乎还没有记录在案。您会发现很多关于 Table Storage 模拟器问题的报告（也在[StackOverflow](https://stackoverflow.com/questions/11813376/adding-property-to-entity-in-azure-table-storage-seems-to-add-null-property-to-a)上）。

您唯一的解决方案是使用真实的存储帐户而不是使用模拟器进行开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T00:32:10.267

此问题已在更高版本的 Windows Azure SDK 中得到修复。安装最新版本以解决问题。[http://www.windowsazure.com/en-us/downloads/](http://www.windowsazure.com/en-us/downloads/)

# ajax - 通过 jQuery AJAX 请求更新图像

> ID：13104878
> 
> 赞同：0
> 
> 时间：2012-10-27T22:51:23.190
> 
> 标签：ajax, imagick

我有一个 PHP 脚本，它使用 imagick PHP 扩展创建和图像。我在页面加载时显示图像，如下所示：

```
<img id="myImage" src="php/image-script.php" /> 
```

PHP 脚本通过回显脚本中内置的 imagick 图像对象结束：

```
echo 'myImage'; 
```

这一切都适用于页面加载。我现在添加了一个 jQuery AJAX 请求，该请求在跳出输入框时触发。然后通过查询字符串将输入框的值传递给 image-script.php，如下所示：

```
 $('#inputHeight').on('blur', function(){

    var $height = $('#inputHeight').val(); 

        $.ajax({ url: './php/preview-image.php?h=' + $height,
             type: 'post',
             success: function(output) {
                $('#preview').attr('src', output);             
             }

        });

    }); 
```

我的问题在于 AJAX 请求的成功功能。目前我正在使用输出更新 img src 属性（如上）。这只是将图像的原始字符串值写入属性并且不会更新。我将如何正确更新图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:22:31.657

我找到了一个解决方案，虽然我不确定它是否完全正确，因为我似乎两次调用了我的 preview-image.php 脚本？首先在 URL 中，然后在 Success 函数中。这是更新的代码：

```
$('#inputHeight').on('blur', function(){

    var $width = 550;
    var $height = $('#inputHeight').val(); 

        $.ajax({ url: './php/preview-image.php?w=' + $width + '&h=' + $height,
             type: 'post',
             success: function(output) {
                $('#preview').attr('src', 'php/preview-image.php?w=' + $width + '&h=' + $height + '&' + Math.random());             
             }
    });

}); 
```

# mysql - 如何使用仅更新 x 条记录的 mySQL 编写存储过程？

> ID：13104881
> 
> 赞同：1
> 
> 时间：2012-10-27T22:51:28.813
> 
> 标签：mysql, stored-procedures

我想在 MySQL 中编写一个存储过程，它使用 where 条件获取帐户，将其除以 10 并根据结果更新行数。

例如，如果帐户总数为 100，我将锁定 100/10 = 10 条记录并更新它们。

我是新手。任何的意见都将会有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:06:32.083

我建议进行两步过程。

```
 select @rowcount := count(1) from account; 
```

然后用于`LIMIT`设置要更新的行的限制：

```
 UPDATE account
     SET column1 = desiredvalue
     LIMIT @rowcount/10; 
```

希望这可以帮助。

**编辑：**

```
 select @rowcount := ROUND(count(1)/10) from account;
     UPDATE account
     SET column1 = desiredvalue
     LIMIT @rowcount; 
```

或者

```
 DECLARE rowcount INTEGER;
     SELECT ROUND(count(1)/10) INTO rowcount from account; 
     UPDATE account
     SET column1 = desiredvalue
     LIMIT rowcount; 
```

# ruby-on-rails - Jasminerice：规范失败，因为未定义 jQuery

> ID：13104886
> 
> 赞同：3
> 
> 时间：2012-10-27T22:52:11.903
> 
> 标签：ruby-on-rails, testing, gem, coffeescript, jasmine

我刚刚在 Ruby-on-rails 项目中安装了宝石 Jasminerice。按照[Jasminerice Github](https://github.com/bradphelan/jasminerice)上的说明，我创建了一个规范，启动了 rails 服务器，并导航到 /jasmine 路由。

尽管规范是为了通过而编写的，但它失败并出现 ReferenceError: jQuery is not defined

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:52:11.903

在`spec/javascripts/spec.js.coffee`

只需在`#= require jquery` 前面添加一行`#= require_tree ./`

# visual-studio - Visual Studio 2012 Web 配置？

> ID：13104892
> 
> 赞同：0
> 
> 时间：2012-10-27T22:53:12.350
> 
> 标签：visual-studio

我刚从 Visual Web Developer 切换到 Visual Studio 2012，我是一个非常新手的 asp.net 程序员，对 Web 配置文件的内容应该包含/意味着什么知之甚少。我注意到默认情况下，在 Visual Web Studio 中，Web 配置文件的填充量大大减少，这是否意味着我必须手动编写曾经自动填充的所有内容？或者有没有办法让必需品（例如必要的登录代码）自动填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:02:03.163

您需要根据您的要求将内容添加到 web.config 中。

更少的内容让我们的 web.config 更干净，并且只有需要的东西。

# ios - [故事板 TabController 错误]

> ID：13104896
> 
> 赞同：0
> 
> 时间：2012-10-27T22:53:39.467
> 
> 标签：ios, storyboard, tabbarcontroller

我对 tabbarcontroller 有问题。我正在使用故事板，我在 tabbarcontroller 和 viewcontroller 之间使用导航控制器。而且我有登录页面..从登录页面，我想直接转到 viewcontroller 2.tabbarcontroller..但是当我这样做我看不到标签栏控制器..可能是什么问题？你的建议是什么？

```
 self.tabBarController = [[UITabBarController alloc] init];
    UIImage* tabBarBackground = [UIImage imageNamed:@"Tab_bar_bkg.png"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground];

    [[UITabBarItem appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor whiteColor], UITextAttributeTextColor,
      [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
      [UIFont fontWithName:@"Helvetica" size:0.0], UITextAttributeFont,
      nil] forState:UIControlStateNormal]; 
```

先感谢您..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:09:58.567

最后我找到了解决方案。问题是而不是使用这个：

```
 [self dismissModalViewControllerAnimated:YES]; 
```

我用过那个：

```
[self presentModalViewController:controller animated:YES] 
```

非常感谢你的帮助...

# java - 使用包含 javax.ws.rs.Application 的单独部署的 jar 使用 Jboss 和 RestEasy 进行类加载问题

> ID：13104899
> 
> 赞同：0
> 
> 时间：2012-10-27T22:54:16.387
> 
> 标签：java, jboss, resteasy

我有一个简单的设置，war 文件只包含一个 web.xml，它指定要在 servlet 中使用的 javax.ws.rs.Application 类。

包含 javax.ws.rs.Application 实现的 jar 也完全是微不足道的。web.xml 和实现都基于[jboss 文档中的示例](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html)

但是，当我在 jboss AS 7.1.1 Final 和 jboss 4.0.4 中部署 war + jar 组合时，我得到了不同的行为。在访问其余 api 时，我在 jboss 日志中得到以下异常（仅限片段）：

```
06:33:59,540 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/wrapper]] (MSC service thread 1-2) StandardWrapper.Throwable: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.projectgoth.provider.restapi.RestApiProvider from [Module "deployment.wrapper.war:main" from Service Module Loader]
at org.jboss.resteasy.spi.ResteasyDeployment.createFromInjectorFactory(ResteasyDeployment.java:271) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.spi.ResteasyDeployment.createApplication(ResteasyDeployment.java:259) [resteasy-jaxrs-2.3.2.Final.jar:] 
```

但是，如果我在战争的 pom.xml 中将 jar 的范围从提供的更改为运行时 - 错误确实从 jboss 作为 7.1.1 消失了。

作为参考，我已将用于 war 和 jar 的代码上传到[bitbucket](https://bitbucket.org/ali/jboss-resteasy)（其中 provider = javax.ws.rs.Application 的实现，而 wrapper 是可部署的 war）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:01:17.410

我认为这是正常的。`Per class loader policy, a child class can always see the parent class not the vice verse`. 当您将 jar 范围作为运行时时，JAR 加载到流中的类路径中，而不是 WAR 应用程序，因此它对 WAR 类是可见的。

# interface - 为什么编译器需要对函数签名进行如此严格的匹配？

> ID：13104901
> 
> 赞同：-2
> 
> 时间：2012-10-27T22:54:21.550
> 
> 标签：interface, go

将函数分配给变量时，为什么编译器需要完美的函数签名匹配...

*   变量的类型是一个函数，其参数或返回是一个特定的接口，并且
*   被分配的功能需要不同的接口，但是是嵌入了预期接口的接口。

举这个例子，其中......

*   `Fooer`是一个接口
*   `FooerBarer`是一个嵌入接口的`Fooer`接口
*   `*bar`工具`FooerBarer`

[http://play.golang.org/p/8NyTipiQak](http://play.golang.org/p/8NyTipiQak)

```
 // Define a type that is a function that returns a Fooer interface
type FMaker func() Fooer

/* Define values of the FMaker type */

    // This works, because the signature matches the FMaker type
var fmake FMaker = func() Fooer {
    return &bar{}
}

    // This causes an error even though a FooerBarer ***is*** a Fooer
var fmake2 FMaker = func() FooerBarer {
    return &bar{}
} 
```

所以我的问题不是关于替代解决方案，而是为什么编译器是以这种方式构建的。

似乎编译器会看到通过返回 a `FooerBarer`，因此您正在返回 a `Fooer`，并且会接受分配。

所以...

*   编译器这种严格行为的原因是什么？
*   正在解决什么问题或正在避免什么危险？
*   为什么这与编译器接受`FooerBarer`赋值给`Fooer`变量的值有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T23:35:30.103

简单地说，Fooer 不是 FooerBarer。两者都是接口类型，但它们指向不同的 itable。A Fooer 保证在 itable be 中具有第一个方法`Foo() Fooer`。在 FooerBarer 中，它可能有`Bar() FooerBarer`它的第一个方法。所以在运行时，方法查找会返回错误的方法。

从 FooerBarer 到 Fooer 的任何转换都保证成功，因为 FooerBarer 始终具有 Fooer 所需的方法集。接口转换的工作方式是，运行时首先查找它收到的 FooerBarer 的真实类型（例如 bar），然后查找 bar/Fooer 对的 itable 并创建一个新的接口值。

在 Go 代码中，您可以显式或隐式地导致这种情况发生。例如`x := Fooer(myFooerBarer)`. 这将进行显式转换并将新的接口值放在 x 中。如果你有一个类型的函数`func(Fooer)`并传递了一个 FooerBarer，那么转换就会隐式发生。编译器将进行转换并将结果分配给函数调用的参数。

在上述情况下，您正试图将 a 分配`func() FooerBarer`给 a `func() Fooer`。在 Go 中，没有分配具有自动转换。您不能将 double 分配给 int。即使它们的基础类型相同，您甚至不能将 time.Duration 分配给 int64。在这种情况下，需要包装函数，以便每次运行函数时都可以完成转换。不允许相同底层类型之间的自动转换和自动包装函数会有点不一致。

如果你真的需要做这样的事情，有一个简单的答案。只需包装函数。

```
var fbmake = func() FooerBarer {
    return &bar{}
}

var fmake Fmaker = func() Fooer {
    return fbmake()
} 
```

# php - 将图像从矩形转换为正方形（首选 PHP）

> ID：13104902
> 
> 赞同：0
> 
> 时间：2012-10-27T22:54:31.940
> 
> 标签：php

我一直在运行一个网站，用户可以在该网站上上传和裁剪自己的照片，并且强制执行的图像形状是矩形。

最近，我一直在开发新版本的网站，我现在使用的图像形状是方形的。

我可能有大约 30,000 多张图像，我想将它们从旧站点移动到新站点，但我需要将它们从矩形转换为正方形：

![在此处输入图像描述](../Images/a45e433dfca242a7fb84fdb57029c6ce.png)

有没有办法在不丢失图像的一部分（例如：不切断部分图像）和不扭曲图像的情况下进行这种转换，例如：它被压扁并且看起来不应该？

图像是人的脸。

关于这样的转换有什么建议吗？我很擅长 PHP，所以也许我可以编写一份工作来完成整个转换。我只需要能够成功转换一张图像。

# php - 如何找到某个班级的子班

> ID：13104903
> 
> 赞同：1
> 
> 时间：2012-10-27T22:54:43.657
> 
> 标签：php, class, children

如何`extends`在 PHP 中获取某个类的所有类的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:06:22.563

如果已定义类，您可以`instanceof`使用`get_declared_classes`

你可以试试

```
$classes = array();
foreach ( get_declared_classes() as $class ) {
    if ($class instanceof CertainClass)
        $classes[] = $class;
}
var_dump($classes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:33:07.727

如果您只关注子类，那么[is_subclass_of](http://www.php.net/manual/en/function.is-subclass-of.php)可能有用，而使用 instanceof 也会返回父类。

```
$classes = array();
foreach ( get_declared_classes() as $class ) 
{
    if (is_subclass_of($class, "CertainClass"))
    {
        $classes[] = $class;
    }
}
var_dump($classes); 
```

# iphone - 响应式网站的一页在 iPhone 上模糊/模糊

> ID：13104905
> 
> 赞同：0
> 
> 时间：2012-10-27T22:55:25.870
> 
> 标签：iphone, css, mobile, responsive-design

这是一个奇怪的。我在这里开发一个响应式网站：

```
http://74.209.178.54:3000/index.html 
```

到目前为止构建了三个页面：主页、“为什么”页面和“定价”页面。主页和原因页面在我的 iPhone 4 上很好。“定价”页面真的很模糊。而且我的意思不仅仅是图像模糊 - 绝对一切都是模糊的：文字，边框，背景......

有没有人见过这个？你知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:55:49.840

您的 CSS 中的这段代码导致了问题：-

```
#logos, #seen {
   border: 1px solid #bbbbbb; 
```

（根据评论，在第 909 行或第 751 行附近。）

如您所见，定价页面上使用了#logos，并且给它的边框在所有边上 - 页面宽度增加了 2px。然后 iPhone 在打开时会放大整个页面，并且会出现页面模糊的情况。

我很确定你知道该怎么做，但这里有:-

```
#logos, #seen {
   border-top: 1px solid #bbbbbb;
   border-bottom: 1px solid #bbbbbb; 
```

我实际上还没有在视网膜显示屏 iPhone 上测试过这个，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:13:06.717

问题是 iPhone 4 的视网膜显示屏。我在加载 2 个按钮时遇到了类似的问题，它们在 iPhone 4 上看起来很模糊（比您的网站要多得多），但在我的 3gs（以及您的页面）上看起来很棒。我不知道您需要做什么才能在您的网站上支持 iPhone 4 Retina 显示屏，但我将解释在 Xcode 中编程时的工作原理：

如果要支持retina 和非retina 设备，则必须有相同图像的2 个版本。我建议您先创建视网膜图像，因为它更容易缩小（在 Mac App Store 中搜索“resizer”）。那么，视网膜图像必须命名为：yourimagename@2x.format。您的非视网膜图像，例如：yourimagename.format。然后，在你的项目中添加这两个图像，当你想加载它时，加载非视网膜版本。如果应用程序在视网膜设备上运行，程序将加载视网膜图像。

这种模糊效果是因为文本是在视网膜中渲染的，而图像不是。不是图片的问题，只是图片分辨率的问题。视网膜图像的大小（宽度和高度）是非视网膜图像的 2 倍，因此非视网膜是视网膜的一半。起初可能看起来有点混乱，但你会发现它根本不是。

希望我对你有所帮助。如果您需要更多帮助，请询问！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:57:06.273

问题神秘地消失了——我不知道到底发生了什么。问题消失后，回答问题的人看到了该站点。

# android - 从非活动类启动 Android 活动

> ID：13104912
> 
> 赞同：1
> 
> 时间：2012-10-27T22:56:17.133
> 
> 标签：android, android-activity

我正在使用一个第三方应用程序，它只是启动一个扩展另一个普通类的类。因此，我想从该课程中发起一项活动：

```
public class SkyTest extends VtiUserExit {

    @Override
    public VtiUserExitResult execute() throws VtiExitException {
        // TODO Auto-generated method stub
        logInfo("TEST");

    return null;
    }

} 
```

如何启动`MainActivity`从此处命名的活动？

我试过这个：

```
Context context = null;
        Intent intent = new Intent(context, MainActivity.class);
        context.startActivity(intent); 
```

但它不起作用。我知道我不能使用 null 上下文，但是如何创建一个上下文才能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:38:11.533

`null`上下文不起作用，因为 Android 需要该应用程序上下文才能找到您的 Activity 。我不知道您使用的是哪个框架，但是您应该寻找一种方法来获取对 Context 的引用，您是否已经为您正在扩展的类浏览了 API？

# ruby-on-rails - Twitter 引导模式加载错误的远程数据

> ID：13104919
> 
> 赞同：2
> 
> 时间：2012-10-27T22:57:25.893
> 
> 标签：ruby-on-rails, twitter-bootstrap, modal-dialog

我正在使用 Twitter Bootstrap 模式功能并从远程位置加载数据。我正在为一组缩略图提供远程 URL，希望一旦单击缩略图，就会显示相应的数据（图像的大版本）。我正在使用 html 声明式样式来定义远程 url 和模式的所有功能。

我发现 Twitter 引导模式加载第一个远程 url，然后不显示后续远程数据，（尽管在 Chrome 中请求正确的 url）但总是显示第一个加载的数据。如何让它显示正确的数据？

看法：

```
#gallery-navigation
  %ul
    - @profile.background_images.each do |image|
      %li
        = link_to image_tag(image.background_image.url(:thumb)), remote_image_path(image.id), :role => "button", :data => {:toggle => "modal", :target => "#image-modal", :remote => remote_image_path(image.id)}

/ Modal
#image-modal.modal.hide.fade(role="dialog" aria-hidden="true" data-backdrop="true")
  .modal-body 
```

控制器：

```
 def remote_image
    @image = current_user.profile.background_images.find(params[:image_id])
    respond_to do |format|
      format.html {
        render :partial => "remote_image", :locals => { :image => @image }
      }
    end
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T18:43:00.613

该插件实际上并没有加载错误的数据，它只加载第一个调用。为什么 ？

因为远程加载只在插件的构造函数中完成：[github上的构造函数源码](https://github.com/twitter/bootstrap/blob/v2.1.1/js/bootstrap-modal.js#L33)

每个模态只有一个对构造函数的调用（在其正常行为中）：[github上的单例源](https://github.com/twitter/bootstrap/blob/v2.1.1/js/bootstrap-modal.js#L204)

* * *

恕我直言，远程选项更像是一个额外的、*根本不重要的*、*甚至与模态插件无关的*选项。不过它可能非常有用。

用很少的代码和尽可能多的远程加载很容易重现相同的行为：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/ThLYb/)

```
<a data-toggle="modal" data-load-remote="/some.url" data-remote-target="#myModal .modal-body" href="#myModal" class="btn">Btn 1</a> 
```

```
$('[data-load-remote]').on('click',function(e) {
    e.preventDefault();
    var $this = $(this);
    var remote = $this.data('load-remote');
    if(remote) {
        $($this.data('remote-target')).load(remote);
    }
}); 
```

# c# - 如何获取已安装的应用程序安装文件夹（路径）和卸载程序

> ID：13104924
> 
> 赞同：1
> 
> 时间：2012-10-27T22:58:54.457
> 
> 标签：c#, windows, registry, uninstallation

您好，我需要某种方式来查找 Windows 上所有已安装的应用程序（我已经找到了名称，但我需要实际的文件夹）。我还需要他们的卸载程序的路径。我正在尝试构建一个与 Advanced Uninstaller pro 类似的应用程序。PS。我需要在 C# 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:18:13.743

我认为您不需要安装程序的路径，您必须为每个已安装的应用程序获取 UninstallString 值，以便您可以在想要删除时执行它。所有这些都可以在这里找到：（`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall`我的案例是 64 位系统）您可以通过获取 DisplayName 值从这里枚举所有应用程序。
希望能帮助到你

# navigation - 如何根据用户点击的内容显示对象？

> ID：13104928
> 
> 赞同：0
> 
> 时间：2012-10-27T20:17:50.337
> 
> 标签：navigation, hyperlink

对于我有链接的单个帖子，有没有办法知道用户是否点击了任何链接？链接不会去任何地方。他们只是打开一个弹出窗口。我想在用户单击的每个链接旁边显示一个复选标记。这允许用户知道他们是否已经访问过这些链接。

如果这是不可能的，有没有办法捕获用户点击的最后一个链接？至少这样，用户可以知道当他们回到页面时他们在哪里停止了。

如果以上都不可能，那么为这些未访问的链接着色是否会突出显示，然后为访问的链接着色会淡入页面（白色页面上的浅灰色访问链接）是否有效？一旦 cookie 或浏览器历史记录被删除，这可能会重置。但总比没有好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:50:20.313

我相信你可以使用`:visited`选择器来设置你想要的样式。所以像这样的东西会给所有访问过的链接一个灰色的颜色，并用斜体显示：

```
a:visited {
   color: #ddd;
   font-style: italic;
} 
```

您可以将此添加到您的样式表中。

[**在此处阅读有关`:visited`选择器的更多信息。**](http://www.w3schools.com/cssref/sel_visited.asp)

# javascript - 带有 toString 的 Javascript 嵌套函数

> ID：13104930
> 
> 赞同：2
> 
> 时间：2012-10-27T22:59:44.623
> 
> 标签：javascript

谁能解释一下这段代码？此示例取自 javascript.info。

我不明白，尤其是那`f.toString = function(){ return sum}`部分。

```
function sum(a) {

   var sum = a 

   function f(b) {
       sum += b
       return f
   }

   f.toString = function() { return sum }

   return f
}

alert( sum(1)(2) )  // 3

alert( sum(5)(-1)(2) )  // 6

alert( sum(6)(-1)(-2)(-3) )  // 0

alert( sum(0)(1)(2)(3)(4)(5) )  // 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:01:47.800

javascript 中的所有对象都“继承”一个名为的字段，该字段`toString`存在于 boject 的原型中。赋值后`toString`与 f 上的任何其他字段一样存在。它被分配为一个函数，并且可以这样调用：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:03:27.103

基本上，`sum`是一个可以链接到多个调用的函数。`toString`是对象的一种方法，如果在需要字符串的上下文中使用对象，则返回应该显示的内容。

就个人而言，我认为这样会更容易：

```
function sum() {
    var l = arguments.length, i, a = 0;
    for( i=0; i<l; i++) a += arguments[i];
    return a;
}
alert(sum(1,2));
alert(sum(5,-1,2));
alert(sum(6,-1,-2,-3));
alert(sum(0,1,2,3,4,5)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T23:14:29.530

我认为该片段的作者想要实现一个目标，即类似“伪造”*运算符重载*之类的东西，这在其他语言中是可能的。

由于`sum`返回一个*函数引用*，我们不能像

```
sum(5) + 5; 
```

这会导致一些奇怪的东西，比如`"function sum() { ... }5"`. 这是因为 ECMAscript在*数学*`.toString()`运算中调用对象时会调用该方法。但是由于他覆盖了返回的方法（这是一个数字），它确实再次起作用。*`.toString()``sum`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T23:54:13.473

这是[MDN 文章中关于 Function.toString的片段](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toString)

> Function 对象覆盖了继承自 Object 的 toString 方法；它不继承 Object.prototype.toString。对于 Function 对象，toString 方法以函数声明的形式返回对象的字符串表示形式。即 toString 对函数进行反编译，返回的字符串包括函数关键字、参数列表、花括号和函数体的来源。
> 
> 当函数被表示为文本值时，JavaScript 会自动调用 toString 方法，例如，当函数与字符串连接时。

所以基本上，这段“烦人”的代码正在做的是为 Function.toString 提供一个实现，当需要字符串表示时使用它，即当调用**alert**时（[alert](https://developer.mozilla.org/en-US/docs/DOM/window.alert)将字符串作为参数）。

对于其余的代码，它只是递归地调用自身来计算参数的总和。*

# c# - 如何通过 C# 更新同一 asp.net 页面中的标签

> ID：13104932
> 
> 赞同：1
> 
> 时间：2012-10-27T23:00:05.810
> 
> 标签：c#, asp.net, label

我写了一个页面，用户可以输入名称并从数据库中获取一些信息。在 .cs 文件中，我从数据库中获取文本并将它们分配给标签，在调试模式下，标签确实更改了它们的文本。但我不知道如何在同一页面中更新它们。我使用了一些方法来更新页面，但它更新了整个页面并且在标签中没有显示任何内容。我怎样才能实现这个功能？

我google了一下，发现AJAX是一个好方法，但这是紧急情况我没有时间学习AJAX？

有人有好主意帮我解决吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:27:06.727

你说的是回传。当页面回发到服务器时，页面会被刷新。

如果要设置标签并避免在回发时丢失数据，可以通过 JavaScript 代码中的 ajax 调用来实现，可以设置隐藏字段，也可以在 Session 对象中设置值（不是最好的主意） . 有很多方法可以解决这个问题；你只需要选择一个。

做一些关于 ajax 的阅读（它并不像你想象的那么难）。您可以通过 ajax 调用服务器，这将从 Db 中获取数据并将其作为 JSON 返回到您的 JavaScript。然后，您可以使用它来填写您的标签。

您可能还想查看 UpdatePanel。它们不是可用的最快的解决方案，但它们很容易实现。

# php - PHP函数不显示变量

> ID：13104933
> 
> 赞同：-1
> 
> 时间：2012-10-27T23:00:24.730
> 
> 标签：php, function

包含的 php 文件：

```
 <?php
     session_start();

     $mysqli = new mysqli('[removed]', '[removed]', '[removed]', '[removed]') or mysqli_connect_error();

     function m($str, $mysqli) { return "'".$mysqli->real_escape_string($str)."'"; }
     function h($str, $mysqli) { echo $mysqli->htmlspecialchars($str); }

     $user = $mysqli->real_escape_string($_SESSION['username']);

     $user_query = "SELECT points FROM users WHERE username =" .m($user, $mysqli) ."";
     $result = $mysqli->query($user_query);
     $row = $result->fetch_assoc();
     $points = $row['points'];

     function checklogin(){
        if(isset($_SESSION['username'])){
        echo $user . " Points: " . $points; 
        }
      }
    ?> 
```

html相关部分将是

```
<? include ('config.php')
   session_start(); 
   checklogin(); ?> 
```

注意：在函数外部调用时，这些变量可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T23:06:52.670

如果您想根据最佳实践执行此操作，则以下内容比使用全局变量更好。

```
 function checklogin($user,$points)
    {
        if(isset($_SESSION['username'])){
            echo $user . ' Points: ' . $points;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:03:05.343

这些变量是全局的，所以你不能指望那些在`checkLogin`函数内部。因此，您将值作为函数参数传递：

```
function checklogin($user, $points, $session) {

    if (!isset($session['username'])) return;

    echo $user, " Points: ",  $points; 
  } 
```

用法：

```
<?php
include 'config.php';
checklogin($user, $points, $_SESSION); 
```

从技术上讲，您不需要`$_SESSION`作为参数传递，我们在示例中这样做，以便稍后可以替换它并且函数不需要有`$_SESSION`变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T23:03:23.043

PHP 全局变量只存在于全局范围内。要从函数中访问它们，您必须将全局范围带入函数中。请参阅以下链接：

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T23:18:24.070

您的代码中有多个错误：

*   如果您包含该文件，您有`session_start()`两次会导致[警告](http://codepad.viper-7.com/Qg4zRZ)。
*   您正在尝试访问不在函数范围内的变量，这会导致[通知](http://codepad.viper-7.com/9zsSLK)。
*   您正在使用短的开放标签 ( `<?`)，这是不好的做法。
*   您没有完全启用错误报告，否则您会看到错误/通知。

这些是真正错误的事情。

现在进行一些一般性改进：

*   给你的函数起更好的名字（`m()`而且`h()`名字很烂，因为不清楚它们在做什么）。你的硬盘上有足够的空间，所以不需要多余的字母。如果在接下来的日子里你可能不记得它是 m、h、z 还是 p，你会为此感谢自己。
*   查看准备好的语句和绑定的参数，这样您就不必再转义这些值了。
*   您`config.php`似乎与配置内容无关。

一些可帮助您解决这些问题的一般参考资料：

*   [变量范围](http://php.net/manual/en/language.variables.scope.php)
*   [session_start()](http://nl1.php.net/manual/en/function.session-start.php)
*   [准备好的报表](http://php.net/manual/en/mysqli.prepare.php)
*   [短开放标签](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)
*   [错误报告](http://php.net/manual/en/function.error-reporting.php)
*   [显示错误](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)

# html - 打印滚动 DIV 的所有内容

> ID：13104934
> 
> 赞同：1
> 
> 时间：2012-10-27T23:00:55.330
> 
> 标签：html, printing

我的网站需要一个打印选项，但我已经尝试和谷歌搜索了数周，但我无法弄清楚。该站点上有一个 div，其中有一个滚动条。当我打印时，只打印可见区域。

我已经尝试了很多我在网上找到的东西，从 javascript 到 @media print，我无法让它工作。

这是我的 div：

```
<div style="overflow:scroll; height:814px" id="results">
<table>
...contents, some tables, text and images...
</table>
</div> 
```

一旦我删除“溢出：滚动”打印工作正常，滚动一直让我感到困惑。我真的需要一步一步地掌握如何进行这项工作的指导。

希望可以有人帮帮我，

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:49:40.023

[https://github.com/jasonday/printThis](https://github.com/jasonday/printThis)

密切注意 removeInline 功能，它将删除用于打印的内联样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T13:16:01.707

**使用这个 JS 函数：**
Printable DIV is **results**

```
function printpage()
   {
        var originalContents = document.body.innerHTML;
        var printReport= document.getElementById('results').innerHTML;
        document.body.innerHTML = printReport;
        window.print();
        document.body.innerHTML = originalContents;
    } 
```

# c# - 来自记事本的 EVENT_OBJECT_DESTROY 失去焦点？

> ID：13104936
> 
> 赞同：1
> 
> 时间：2012-10-27T23:01:27.760
> 
> 标签：c#, .net, winapi

我试图在关闭外部应用程序时收到警报。对于我的测试，我检索了记事本的 hwnd 并将其设置到我的显示器中。奇怪的是，每当我从记事本点击到其他应用程序时，即使记事本没有关闭，我也会收到系统事件。有谁知道为什么？

一些快速示例调用代码：

```
uint EVENT_OBJECT_DESTROY = 0x8001;
IntPtr notepadHwnd = <your pointer>
var mon = new WindowMonitor(notepadHwnd, EVENT_OBJECT_DESTROY);
mon.EventOccurred += (sender, args) => Console.WriteLine("closed"); 
```

监视器：

```
 public class WindowMonitor : IDisposable
  {
    //store delegate to prevent GC
    private User32.WinEventDelegate dEvent;

    private IntPtr _hook;
    private readonly IntPtr _window;
    private readonly List<uint> _watchedEvents = new List<uint>();

    public event EventHandler<AccessibleEventTypeEventArgs> EventOccurred;

    public WindowMonitor(IntPtr windowToMonitor, params User32.AccessibleEventType[] eventsToMonitor)
    {
      //prevent junk
      if (eventsToMonitor == null || eventsToMonitor.Length == 0)
        throw new ArgumentNullException("eventsToMonitor", "Must specify events to monitor");
      if (windowToMonitor == IntPtr.Zero)
        throw new ArgumentNullException("windowToMonitor", "Must specify a valid window handle to monitor");

      _window = windowToMonitor;

      //cast them now so we dont have to cast each one when evaluting events
      uint lowest = (uint) User32.AccessibleEventType.EVENT_MAX;
      uint highest = (uint) User32.AccessibleEventType.EVENT_MIN;
      foreach (User32.AccessibleEventType eventType in eventsToMonitor)
      {
        var castType = (uint) eventType;
        _watchedEvents.Add(castType);

        //need the range of events to subscribe to
        if (castType > highest)
          highest = castType;
        if (castType < lowest)
          lowest = castType;
      }

      //sign up for the event
      dEvent = this.winEvent;
      _hook = User32.SetWinEventHook(lowest, highest, IntPtr.Zero, dEvent, 0, 0, User32.WINEVENT_OUTOFCONTEXT);

      //ensure it worked
      if (IntPtr.Zero.Equals(_hook)) throw new Win32Exception();

      //no kill callback
      GC.KeepAlive(dEvent);
    }

    private void winEvent(IntPtr hWinEventHook, uint eventType, IntPtr hWnd, int idObject, int idChild, uint dwEventThread, uint dwmsEventTime)
    {
      //only care about the events for the specified window
      if (hWnd != _window)
        return;

      if (_watchedEvents.Contains(eventType))
      {
        if (EventOccurred != null)
          EventOccurred(this, new AccessibleEventTypeEventArgs((User32.AccessibleEventType) eventType));
      }
    }

    public void Dispose()
    {
      //unhook the listener
      if (!IntPtr.Zero.Equals(_hook))
        User32.UnhookWinEvent(_hook);

      //clear variables
      _hook = IntPtr.Zero;
      dEvent = null;

      //kill any event listeners
      EventOccurred = null;

      GC.SuppressFinalize(this);
    }
  } 
```

和一些winapi（我省略了事件常量列表）：

```
public delegate void WinEventDelegate(IntPtr hWinEventHook, uint eventType, IntPtr hwnd,
  int idObject, int idChild, uint dwEventThread, uint dwmsEventTime);

[DllImport("user32.dll")]
public static extern IntPtr SetWinEventHook(uint eventMin, uint eventMax, IntPtr hmodWinEventProc,
  WinEventDelegate lpfnWinEventProc, uint idProcess, uint idThread, uint dwFlags);

[DllImport("user32.dll")]
public static extern bool UnhookWinEvent(IntPtr hWinEventHook); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T22:39:45.260

您可能会看到插入符号的事件。当你得到一个 winevent 时，你通常需要检查 HWND*和*idObject 以确保它实际上是一个关于你关心的窗口部分的事件；无论是窗口本身 (OBJID_WINDOW) 还是它的某些其他方面，例如滚动条、插入符号或其他内容。

要调试 wevents，请查看[Accessible Event Watcher 工具](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317979(v=vs.85).aspx)- 将其配置为通过 Mode 菜单监听 WinEvents，然后在 Mode/Settings... 中选择您想要的事件 - 例如。EVENT_OBJECT_DESTROY，然后是要显示的事件信息，通常是hwnd、idObject和idChild。

--

顺便说一句，对您的代码有一条评论：如果您只是从特定窗口中查找事件，那么获取该窗口的线程（[GetWindowThreadProcessId](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633522(v=vs.85).aspx)）会更有效，然后将 SetWinEventHook 与该 idThread 一起使用以仅从该特定线程获取事件传递 0 来监听所有线程；这允许 Win32 在事件源为您进行过滤，这比从整个桌面上的所有线程获取该类型的事件然后忽略您不需要的事件更有效。

# php - 如何以不区分重音的方式使用 sql 查询在我的数据库中搜索特殊字符？

> ID：13104939
> 
> 赞同：2
> 
> 时间：2012-10-27T23:02:01.823
> 
> 标签：php, html, sql, database

我的数据库中有一个包含几列的表，其中一些列中有特殊字符，如 á、é、í、ó、ú、Á、É、Í、Ó、Ú、ñ 和 Ñ。我的网页中有一个搜索框，通过使用它，我进行了一个查询来搜索我的 bd 表并显示如下结果：

检索形式：

```
<form action="resultado.php" method="post" name="form1" id="form1">
    <th scope="col"><label for="busqueda"></label>
    <input type="text" name="buscar" id="buscar" width="auto" placeholder="Buscar..." height="auto" />
  </th>
  <th scope="col" align="center" valign="top"><input type="submit" name="ACTION" class="button1" value="Buscar"></th>
</tr></form> 
```

按钮功能：

```
 if (@$_POST['ACTION']=='Buscar'){ 
 $buscar = $_POST['buscar'];
 $query = "SELECT * FROM Medios_table WHERE concat(id,UPPER(Id_Nombre),UPPER(Pais),UPPER(Estado),UPPER(Ciudad),UPPER(website),UPPER(Url),UPPER(Url2),UPPER(InfAnex) COLLATE uft8_unicode_ci) LIKE UPPER('%$buscar%') ORDER BY Id_Nombre ASC";
 $busquedaresult = mysql_query($query);} 
```

在我的表中，我有几列包含类似`"Andalucía"`和`"España"`多次作为此查询的结果，如果我在搜索框中键入`"andalucia"`任何内容，但如果我`"Andalucía"`现在键入它确实显示，如果我搜索`"Espana"`没有显示但`"España"`工作正常，我不能让它不区分口音。我的表格和列排序规则是`utf8_unicode_ci`，我的网页元数据如下所示：

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我在我的网站中使用 phpMyAdmin 来创建或修改我的数据库，它具有 MySQL 服务器 5.1.1

# windows - 在给定的二进制文件中，什么是导出符号？

> ID：13104940
> 
> 赞同：4
> 
> 时间：2012-10-27T23:02:08.417
> 
> 标签：windows, assembly

任何人都可以提供关于可执行二进制文件而不是库的“导出符号”的明确描述吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:26:28.070

他们是一样的东西。您在 dll 中导出一个过程，以便其他代码可以从 dll/lib 中按名称/序号调用该过程。你用一个 exe 做同样的事情，你可以导出函数以同样的方式使用。

![在此处输入图像描述](../Images/98710546ecb5a922dea275d382e92306.png)

# ruby - 何时使用 Ruby DelegateClass 而不是 SimpleDelegator？（DelegateClass 方法与 SimpleDelegator 类）

> ID：13104942
> 
> 赞同：29
> 
> 时间：2012-10-27T23:02:27.883
> 
> 标签：ruby, design-patterns, delegation

可能我错过了一些简单的东西，但我不明白如何使用 Ruby 的[`DelegateClass`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/delegate/rdoc/Object.html)方法，我的意思是什么时候使用它而不是[`SimpleDelegator`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/delegate/rdoc/SimpleDelegator.html)类。例如，以下所有内容似乎几乎都以相同的方式工作：

```
require 'delegate'

a = SimpleDelegator.new([0])
b = DelegateClass(Array).new([0])
c = DelegateClass(String).new([0])
a << 1
b << 2
c << 3
p a # => [0, 1]
p b # => [0, 2]
p c # => [0, 3] 
```

请注意，将哪个类传递给 似乎并不重要`DelegateClass`。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-12T21:16:40.597

> 如果您想要一个对象既具有自己的行为又在其生命周期内委托给不同的对象时，请使用子类 SimpleDelegator。

本质上说，当您创建的类不会获得不同的对象时，请使用 DelegateClass。 [Ruby 中的TempFile](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)只是用来装饰一个 File 对象 SimpleDelegator 可以在不同的对象上重用。

[例子：](http://ruby-doc.com/docs/ProgrammingRuby/html/lib_patterns.html)

```
require 'delegate'

class TicketSeller
  def sellTicket()
    'Here is a ticket'
  end
end

class NoTicketSeller
  def sellTicket()
    'Sorry-come back tomorrow'
  end
end

class TicketOffice < SimpleDelegator
  def initialize
    @seller = TicketSeller.new
    @noseller = NoTicketSeller.new
    super(@seller)
  end
  def allowSales(allow = true)
    __setobj__(allow ? @seller : @noseller)
    allow
  end
end

to = TicketOffice.new
to.sellTicket   »   "Here is a ticket"
to.allowSales(false)    »   false
to.sellTicket   »   "Sorry-come back tomorrow"
to.allowSales(true)     »   true
to.sellTicket   »   "Here is a ticket" 
```

这是另一个很好的解释[a-delegate-matter](http://wondible.com/2012/01/06/a-delegate-matter/)

# php - 页面加载时会自动调用 PHP 函数，而不是通过 onclick 事件调用

> ID：13104943
> 
> 赞同：0
> 
> 时间：2012-10-27T23:02:50.370
> 
> 标签：php, javascript, session, web-applications, post

我正在尝试将网页的用户重定向到两个不同页面之一，具体取决于他们单击的两个按钮中的哪一个。我的方法是将每个 onclick 事件链接到一个 javascript 函数，该函数又会调用一个 php 函数，该函数使用 header() 函数重定向到适当的页面。不幸的是，这两个 php 函数中的后者，即 insertIntoTable()，在每次页面加载和重定向时都会被自动调用，甚至没有让用户有机会查看带有按钮的页面。我想知道这是否是 PHP 扩展方式的产物？*我不太明白，因为似乎在 onclick 事件侦听器这样做之前不应该调用包装 javascript 函数，并且在链接*的 javascript 函数之前不应该调用 php 函数*onclick 这样做。这是代码...*

 *```
<?php
    session_start();
?>
<html>
    <head>
        <script>
            function createATable()
            {
                <?php createATable(); ?>
            }

            function insertIntoTable()
            {
                <?php insertIntoTable(); ?>
            }
        </script>
    </head>
    <body>
        <?php
            // Define our redirection functions for button click events
            function createATable()
            {
                header("Location: http://codd.edu/Project2/createtable.php?<?php echo htmlspecialchars(SID); ?>");*/
            }
            function insertIntoTable()
            {
                header("Location: http://codd.edu/Project2/insertintotable.php?<?php echo htmlspecialchars(SID); ?>");*/
            }

            // Set session variables so that we don't need to worry about whether
            // we're coming from sign in or registration - if $Session['user_name'] 
            // isn't set, we know were coming from the sign in
            if (!$_SESSION['user_name'])
            {
                $_SESSION['user_name'] = $_POST['nametextbox'];
                $_SESSION['user_psswd'] = $_POST['psswdtextbox'];
                echo "<br />setting session variables";
            }
            echo "<br />Not setting session variables";

            // If we aren't setting the session variables, then we are coming from the 
            // registration page, and therefore know that this isn't an admin account
            $_SESSION['is_admin'] = "false";

            // Connect to database
            $conn = mysql_connect("localhost", "601", "23");
                or die('Could not connect: ' . mysql_error());

            // Open database
            mysql_select_db("601", $conn) 
                or die('Could not find database: ' . mysql_error());

            // Get USER tuples, if any
            $user = mysql_query("SELECT * FROM USERS WHERE name='$_SESSION[user_name]' AND password='$_SESSION[user_psswd]'");

            // If there are no entries for this SELECT command, we cannot 
            // allow the user to log in 
            $num_user = mysql_num_rows($user);
            if ($num_user < 1) 
            {
                $_SESSION['is_user'] = "false";
                header("Location: http://codd.edu/Project2/login.php?<?php echo htmlspecialchars(SID); ?>");
                exit;
            } 
            else 
            {
                $_SESSION['user_id'] = SID;
                $_SESSION['is_user'] = "true";
                echo "Welcome ", $_SESSION['user_name'], "!";
                echo "<br />User ID: " . $_SESSION['user_id'];
                echo "<br /> User Password: " . $_SESSION['user_psswd'];
                echo "Is valid user? " . $_SESSION['is_user'];
                session_destroy();

                echo "<button name='createtable' onclick='createATable()'>Create a Table</button>";
                echo "<br /><button name='insert' onclick='insertIntoTable()'>Insert into Table</button>";
            }
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:06:48.607

我看不出为什么`createATable()`不应该在页面加载时调用。PHP 在 javascript 之前在不同的环境中进行评估。此外，PHP 允许您在调用它之后定义/声明一个函数，这正是您正在做的事情。

假装是 PHP 解释器：它不知道 javascript 是什么。你甚至可以在它之前和之后换`<?php createATable(); ?>`行，它会运行。`yadayadayada ... qweryasdasd`

请阅读此内容，看看是否有帮助： http: [//www.developer.com/tech/article.php/923111/Client-side-Versus-Server-side-Coding---Part-1.htm](http://www.developer.com/tech/article.php/923111/Client-side-Versus-Server-side-Coding---Part-1.htm)

PS.：这与您的问题无关，但请看一下：[http ://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:17:41.513

php 在服务器上运行，htnl 输出到客户端。

Instead of trying to use php to redirect, use javascript or a simple a href.*

# python - 如果 MySQL 正在运行，如何在 ubuntu 上使用 python 查找？

> ID：13104944
> 
> 赞同：4
> 
> 时间：2012-10-27T23:02:59.887
> 
> 标签：python, mysql, ubuntu, subprocess

在 Ubuntu 上这个命令行：

```
sudo netstat -tap | grep mysql 
```

如果 MySQL 正在运行，则返回类似的内容：

```
tcp  0  0 localhost:mysql  *:*  LISTEN  6732/mysqld 
```

如果不是，什么都没有。

我正在使用 subprocess 从 python 代码中找出 MySQL 是否启动，方法是在 netstat 返回的内容中查找“LISTEN”，这样做：

```
import subprocess

msqlr = subprocess.Popen(["sudo netstat -tap | grep mysql"], stdout=subprocess.PIPE).communicate()[0]
msqlrLines = msqlr.split("\n")
vals = msqlrLines[0].split()
print "vals[0] : %s" % vals[0]
if vals[0][-2] == "LISTEN":
    print "OK - MySQL is running."
else:
    print "Not OK - MySQL is not running." 
```

当我运行它时，它返回：

```
OSError: [Errno 2] No such file or directory 
```

当在同一个 subprocess.Popen... 我使用一个单词参数（比如说“df”）——它工作正常。如果参数不止一个词（即“df -h /”或像这里的“sudo netstat -tap | grep mysql”）——我会收到“没有这样的文件或目录”错误。

和相关问题（#2），当我在命令行中运行这个命令时——有时它会要求输入 root 密码。如何从 python 脚本传递密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:20:46.810

试试这个。

```
import subprocess
import string

msqlr = subprocess.Popen("sudo /usr/sbin/netstat -al".split(), stdout=subprocess.PIPE).stdout
grep = subprocess.Popen(["/usr/bin/grep", "mysql"], stdin=msqlr, stdout=subprocess.PIPE).stdout
msqlrLines = grep.read().split("\n")
vals = map(string.strip, msqlrLines[0].split())
print vals
if vals[-1] in ("LISTENING", "LISTEN"):
    print "OK - MySQL is running."
else:
    print "Not OK - MySQL is not running." 
```

**我的机器上的**输出：****

 **```
['tcp4', '0', '0', '*.mysql', '*.*', 'LISTEN']
OK - MySQL is running. 
```

这里的想法是您执行正常的 netstat，并收集所有数据。然后使用该子进程中的标准输出作为下一个子进程的标准输入，并在那里执行 grep。

这是在 ubuntu 12.04 上运行的示例

```
import subprocess
import string

msqlr = subprocess.Popen("sudo /bin/netstat -al".split(), stdout=subprocess.PIPE).stdout
grep = subprocess.Popen(["/bin/grep", "mysql"], stdin=msqlr, stdout=subprocess.PIPE).stdout
msqlrLines = grep.read().split("\n")
vals = map(string.strip, msqlrLines[0].split())
print vals
if len(vals) and vals[-1] in ("LISTENING", "LISTEN"):
    print "OK - MySQL is running."
else:
    print "Not OK - MySQL is not running." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T13:55:19.677

为什么不看看你是否可以在 python 中连接：

```
try:

    con = _mysql.connect('localhost', 'user', 
        'password', 'testdb')

except _mysql.Error, e:

print "Error %d: %s" % (e.args[0], e.args[1])
sys.exit(1) 
```**

# batch-file - 使用 .bat 重命名多个文件

> ID：13104948
> 
> 赞同：1
> 
> 时间：2012-10-27T23:03:32.003
> 
> 标签：batch-file

我一直在寻找 Windows 7 中的 .bat 文件，它给出了一个名称和一个文件目录，将该目录中的所有文件重命名为用户传递的名称，并连接到一个从 0 到 9 的数字。例如：假设我有一个包含两个文件 a.txt 和 b.txt 的目录，我想将它们的名称更改为 documentX.txt（X 是从 0 到 9 的数字），所以最后脚本将更改名称到 document1.txt 和 document2.txt

我尝试过这样的事情但没有成功：

```
 @echo off
    @set a=1
    @set pref=hola

    for /D %%f in (C:\*.txt) 
     do 
     rename *.txt %pref%%a%
     @set /A a = %a%+1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:40:45.307

FOR 命令不能跨越多行，除非您使用括号或行继续`^`。第一个左括号必须与 IN 在同一行，第二个与 DO 在同一行。

您不能在带括号的代码块中使用正常扩展，该代码块也设置该值，因为扩展发生在解析时并且整个块被一次解析。因此，该值将是您设置之前存在的值！解决方案是使用延迟扩展。执行该行时会发生这种情况。必须使用 启用它`setlocal enableDelayedExpansion`。

延迟扩展会导致问题，因为在文件名中有效，如果启用延迟扩展`!`时包含 FOR 变量扩展，则会损坏。`!`解决方案是在循环内打开和关闭延迟扩展。

您想要一个没有任何选项的简单 FOR。该`/D`选项查找目录而不是文件。

您不需要在`SET /A`语句中扩展数值变量。

`@`最后一件事 -使用后不需要`ECHO OFF`。

```
@echo off
setlocal disableDelayedExpansion
set "n=0"
set "pref=document"

for %%F in (c:\*.txt) do (
  set "file=%%F"
  set /a n+=1
  setlocal enableDelayedExpansion
  ren "!file!" "%pref%!n!.txt"
  endlocal
) 
```

有一种更简单的方法可以完成任务。用于`DIR /B`列出所有`.txt`文件并将结果通过管道传输到`FINSTDR /N "^"`. FINDSTR 将匹配所有文件，并在每个值前面加上一个序号，后跟一个冒号。使用 FOR /F 将结果解析为数字和文件名，以便您可以重命名。

```
@echo off
setlocal
set "pref=document"
for /f "tokens=1* delims=:" %%A in ('dir /b /a-d *.txt^|findstr /n "^"') do (
  ren "%%B" "%pref%%%A.txt"
) 
```

# javascript - 可以将对象文字中的多个属性设置为相同的值吗？

> ID：13104949
> 
> 赞同：32
> 
> 时间：2012-10-27T23:04:07.140
> 
> 标签：javascript, properties, object-literal

例如，我可以这样做吗？：

```
{ 
   a: b: c: d: 1,
   e: 2,
   geh: function() { alert("Hi!") }
} 
```

编辑：有什么方法可以避免这样做吗？：

```
{ 
   a: 1,
   b: 1,
   c: 1,
   d: 1,
   e: 2,
   geh: function() { alert("Hi!") }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-28T09:08:50.293

对此的更新（就最新的 JavaScript 功能而言）避免了不需要的已定义变量：

```
{
  let v;
  var obj = {
     "a": (v = 'some value'),
     "b": v,
     "c": v
  };
} 
```

这将意味着`v`不会在块之外定义，但`obj`会。

### 原始答案

做同样事情的另一种方法是：

```
var v;
var obj = {
     "a": (v = 'some value'),
     "b": v,
     "c": v
}; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-27T23:17:19.313

您可以在各种属性之间设置一条相等线：

```
var foo = {};
foo.a = foo.b = foo.c = "Hello"; 
```

或者您可以创建一个为您执行批量分配的方法：

```
var foo = {
    setValue: function( props, value ) {
        while ( props.length ) this[ props.pop() ] = value;
    }
}

foo.setValue( [ "a", "b", "c" ] , "Foo" ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-09T06:36:28.640

你可以试试这个。这不是您要寻找的语法糖（例如。`{a,b,c:1, d:2}`），但这是另一种方法，尽管所有这些答案都很好。

```
(object,fields,value)=>Object.assign(object||{}, ...fields.map(f=>({[f]:value}) )) 
```

**解释：**

```
(object,fields,value)=> 
```

接受一个对象（如果您想要一个新对象，则为假值，请随意重新排列参数顺序）

```
Object.assign(object||{}, 
```

将返回一个基于的对象`object` *，*并将改变该对象。要禁用此功能，只需像这样添加第一个参数对象文字`Object.assign({}, object || {}, ...`

```
...fields.map(f=>({[f]:value}) ) 
```

将映射到对象的字段数组作为额外参数列表传播到`Object.assign`. `['a','b'].map(f=>({[f]:value}) )`会给`[{a:value}, {b:value}]`和`f(...[{a:1},{b:1}])`喜欢`f({a:1},{b:1})`。`Object.assign`剩下的:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-04T22:52:56.223

还有另一种方法：使用映射函数......

```
// This will be standard! 
if (!Object.fromEntries)
  Object.fromEntries = entries => entries.reduce ((o, [key, value]) => ({
     ...o,
     [key]: value
  }), {})

const setSameValue = (source, props, value) => ({
  ...source,
  ...Object.fromEntries (
     props.map (prop => [prop, value])
  )
})

// The important part: do what you want with ease!
const output = setSameValue ({}, ['1', '01'], 'string 1')

const obj = { x: 1, y: 'hello' }

const output2 = setSameValue (obj, ['1', '01'], 'string1')

console.log ('output1:', output)
console.log ('output2:', output2)
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-10T15:54:30.357

如果您不想要多个本地变量，您也可以使用闭包。这种语法似乎很流行（但很难看）：

```
var obj = (function() { var v='some value'; return { a:v, b:v, c:v }; })(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-22T07:23:19.757

改用`for of`循环。

```
for (let [key, value] of Object.entries(object_name)) {
        object_name[key] = 0; // the value that you want to assign
      } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-10T15:36:52.467

或者另一种方式：

```
{...['a', 'b', 'c', 'd'].reduce((obj,prop)=>({...obj, [prop]: 1}), {}) } 
```

通过扩展 Array 原型，它可以非常整齐地包装起来：

```
Array.prototype.ditto = function(v) { return this.reduce((o,p)=>({...o, [p]: v}), {}) } 
```

所以现在它可以像这样使用：

```
{ 
    ...['a', 'b', 'c', 'd'].ditto(1),
    ...['e', 'f'].ditto(2)
    geh: function() { alert("Hi!") }
} 
```

解释：`.reduce`从一个空对象开始，`{}`并且对于每个元素`prop`返回一个对象，该对象是对象中已经存在的任何内容，`...obj`加上一个值为 1: 的新属性`[prop]: 1`。然后将这些属性展开到以`...`开头的外部对象中。

如果你有大量的属性 reduce 不是最有效的，但你可以将其更改为：

```
Array.prototype.ditto = function(v) { let o = {}; this.forEach(p => o[p] = v); return o; } 
```

更易读、更高效但不那么酷？？

# c++ - C++ 中的 LRU 缓存

> ID：13104951
> 
> 赞同：4
> 
> 时间：2012-10-27T23:04:20.253
> 
> 标签：c++, caching, data-structures, lru

> **可能重复：**
> [LRU 缓存设计](https://stackoverflow.com/questions/2504178/lru-cache-design)

我在一次编程面试中得到了这个问题。随意考虑如何回答它。

您将如何在 C++ 中实现 LRU（最近最少更新）缓存？基本上，缓存可以容纳`N`项目。如果插入了一个新项目并且缓存中的项目数小于`N`，则它只是插入。但是如果插入了一个新项目并且缓存中的项目数已经是`N`，那么最近最少使用的项目应该从缓存中删除。

考虑一下您的每项操作需要多少运行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:10:30.993

我将拥有存储上次访问时间的缓存元素的成员。当元素被访问（成员函数被调用）时，访问时间成员被更新。当缓存变满时，访问时间最短的元素将被删除。

其他选择是在[intrusive list](http://www.boost.org/doc/libs/1_41_0/doc/html/boost/intrusive/list.html)中有缓存元素。当某些东西被访问并且不在列表顶部时，它会出现在列表顶部。当缓存已满时，列表的底部元素被擦除。每次访问都需要做更多的工作，但可以更快地找到受害者。

基本思想是不要为此类任务提供典型的地图和列表，这些会分散你的记忆。我的算法将缓存始终保持在一个地方。

# java - 将字符串与按钮文本进行比较的问题

> ID：13104952
> 
> 赞同：-4
> 
> 时间：2012-10-27T23:04:29.240
> 
> 标签：java, android

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [微调器如果字符串** == 不工作](https://stackoverflow.com/questions/13000893/spinner-if-strings-not-working)

```
public void btnRecordTrip_Clicked(View v)
{
    Button b = (Button)v;
    String currentText = b.getText().toString();
    if (currentText == "Record Trip") 
```

currentText 的值是“Record Trip”，但它比较不相等。我尝试 .trim() 得到相同的结果。这两个字符串相等，但它们比较不相等。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T23:06:04.277

用于`.equals()`比较 Java 中的字符串

```
if (currentText.equals("Record Trip")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:06:09.490

在 Java 中，当您比较对象时，`==`运算符用于身份检查。对于相等性检查，您应该使用`.equals()`方法。

在您的情况下，即使两个字符串对象的值相等，它们也是两个不同的对象。

# java - 返回值的方法与不返回值的方法

> ID：13104956
> 
> 赞同：2
> 
> 时间：2012-10-27T23:04:53.593
> 
> 标签：java

当您编写方法时，您几乎总是必须检查必须有效的东西。

假设您需要抛出一个`IllegalArgumentException`方法的价格参数是否无效。因为我想把我的程序分成小块，所以我为它创建了一个私有方法。但是，最好的做法是创建一个名为类似的方法`validatePrize`并返回一个布尔值，然后我在 if 语句中检查我调用该`validatePrize`方法的位置，然后抛出 IllegalArgumentException？

还是该方法不返回任何内容并抛出异常更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:12:51.987

我会说这个问题的答案主要是基于偏好。如果您想要一个在调用时不会引发异常的可重用函数，请选择带有布尔返回的 validatePrize。如果您仅使用它来检查异常，则使用引发异常的 validatePrize。在这种情况下，我会说抛出异常的 validatePrize 会更合适，因为它可以用于从类本身外部进行异常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:15:01.173

这完全取决于。

首先，`validatePrize`听起来不像布尔方法，所以 IMO 它不应该返回任何东西。

如果你有一堆保护子句，抛出一个异常。如果您需要在整个应用程序中验证相同的属性集合，请将其设为方法——但该方法也可以用作保护的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T23:11:10.740

由于您已经知道负值是无效参数，因此您可以通过执行以下操作来防止它：

```
if(val < 0)
{
  return false;
} 
```

我在书中读到，防范这种情况是最好的方法。它不符合或不符合“例外标准”。所以是的，我只会返回一个布尔值。

有些人喜欢抛出异常，但这取决于你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T23:13:56.797

如果您确实将检查委托给一个方法，您也可以直接从该方法抛出一个异常，以避免构造函数中的代码混乱。这是番石榴使用的典型方法`Preconditions`：

```
this.value = Preconditions.checkNotNull(value, "value must not be null"); 
```

如果参数为空，此行将抛出带有关联消息的 NullPointerException。如果参数不为空，则返回允许在一行中检查和分配参数的参数。

如果您有兴趣，[代码如下所示](http://code.google.com/p/google-collections/source/browse/trunk/src/com/google/common/base/Preconditions.java?r=44)：

```
public static <T> T checkNotNull(T reference, Object errorMessage) {
  if (reference == null) {
    throw new NullPointerException(String.valueOf(errorMessage));
  }
  return reference;
} 
```

您可以为您的用例使用类似的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T23:18:26.630

**我自己对此的看法是，只有在出现意外**情况时才应抛出异常。空指针可以是 this，也可以是 ID 的负数（应始终为正）。基本上，异常用于显示程序内部的问题。如果您只是验证用户的输入，请使用布尔值和测试。

# jquery-mobile - JQuery Mobile：data-icon 替换 ui-listview 和其他导航栏图标

> ID：13104959
> 
> 赞同：0
> 
> 时间：2012-10-27T23:05:31.117
> 
> 标签：jquery-mobile

我有点像 JQuery Mobile Noob，我一直在尝试寻找答案，但无济于事。我创建了一个带有五个自定义数据图标的 ui-navbar。问题是当我选择五个链接之一时，所选链接左侧的按钮会显示所选图标。此外，ul-listview 元素上的右箭头应该是什么，尽管很难看到，但它也会显示选定的图标。必须使用 Firebug 来扩展它以查看是否是选定的数据图标。

这是我在页脚中用于导航栏的代码：

```
<div data-role="footer">
    <div data-role="navbar" class="nav" data-grid="d">
        <ul>
            <li><a href="#programas" id="programas" data-icon="custom">Programas</a></li>
            <li><a href="#noticias" id="noticias" data-icon="custom">Noticias</a></li>
            <li><a href="#radio" id="radio" data-icon="custom">Radio</a></li>
            <li><a href="#eventos" id="eventos" data-icon="custom">Eventos</a></li>
            <li><a href="#more" id="more" data-icon="custom">More</a></li>
        </ul>
        </div> 
</div> 
```

还有一些CSS：

```
.nav .ui-btn .ui-btn-inner {
padding-top: 40px !important;
}
.nav .ui-btn .ui-icon {
width: 45px!important;
height: 35px!important;
margin-left: -24px !important;
box-shadow: none!important;
-moz-box-shadow: none!important;
-webkit-box-shadow: none!important;
-webkit-border-radius: none !important;
border-radius: none !important;
}
#programas .ui-icon {
background-image: url(images/nav.png);
background-position: 0 0;
background-repeat: no-repeat;
} 
```

知道为什么会发生这种情况吗？我认为这必须与我的风格有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:30:24.790

不要只使用名称**ui-icon**，而是使用**ui-icon-something**，另请参阅有关[自定义图标的文档](http://jquerymobile.com/test/docs/buttons/buttons-icons.html)

> **自定义图标**
> 
> 要使用自定义图标，请指定具有唯一名称的 data-icon 值，例如 myapp-email，按钮插件将通过在 data-icon 值前加上 ui-icon- 来生成一个类并将其应用于按钮： ui-icon -myapp-电子邮件。
> 
> 然后，您可以在样式表中编写针对 ui-icon-myapp-email 类的 CSS 规则，以指定图标背景源。要保持与其余图标的视觉一致性，请创建一个 18x18 像素的白色图标，另存为具有 alpha 透明度的 PNG-8。
> 
> 在本例中，我们只是指向一个独立的图标图像，但您可以轻松地使用图标精灵并指定位置，就像我们在框架中使用的图标精灵一样。
> 
> ```
> .ui-icon-myapp-email {
>     background-image: url("app-icon-email.png");
> } 
> ```

例子

```
<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
 <script src="jquery-1.8.0.min.js"></script>
 <script src="jquery.mobile-1.2.0.min.js"></script>

 <style>
  .ui-icon-taifun {
    background-image: url("taifun.png");
  }

  .nav .ui-btn .ui-btn-inner {
    padding-top: 40px !important;
  }

  .nav .ui-btn .ui-icon-taifun {
    width: 45px!important;
    height: 35px!important;
    margin-left: -24px !important;
    box-shadow: none!important;
    -moz-box-shadow: none!important;
    -webkit-box-shadow: none!important;
    -webkit-border-radius: none !important;
    border-radius: none !important;
  }

  #programas .ui-icon-taifun {
    background-image: url(taifun.png);
    background-position: 0 0;
    background-repeat: no-repeat;
  }
 </style>

 <title>Test</title>
</head>

<body>
  <div data-role="page">
    <div data-role="content">
      <div data-role="collapsible" data-collapsed-icon="taifun" data-expanded-icon="taifun" data-inset="false">
        <h2><img src="favicon.ico"> Pets</h2>
        <ul data-role="listview">
          <li><a href="index.html">Canary</a></li>
          <li><a href="index.html">Cat</a></li>
          <li><a href="index.html">Dog</a></li>
        </ul>
       </div><!-- /collapsible -->
       <div data-role="collapsible" data-collapsed-icon="taifun" data-expanded-icon="taifun" data-inset="false">
         <h2><img src="favicon.ico"> Farm animals</h2>
         <ul data-role="listview">
           <li><a href="index.html">Chicken</a></li>
           <li><a href="index.html">Cow</a></li>
           <li><a href="index.html">Duck</a></li>
         </ul>
      </div><!-- /collapsible -->
    </div>

  <div data-role="footer">
    <div data-role="navbar" class="nav" data-grid="d">
        <ul>
            <li><a href="#programas" id="programas" data-icon="custom">Programas</a></li>
            <li><a href="#noticias" id="noticias" data-icon="custom">Noticias</a></li>
            <li><a href="#radio" id="radio" data-icon="custom">Radio</a></li>
            <li><a href="#eventos" id="eventos" data-icon="custom">Eventos</a></li>
            <li><a href="#more" id="more" data-icon="custom">More</a></li>
        </ul>
    </div>
  </div>

  </div>

</body>
</html> 
```

截屏
![截屏](../Images/00a2dfbc55ef55ee37de6dfc76312bb8.png)

# c++ - 简单的 Http 获取响应

> ID：13104964
> 
> 赞同：7
> 
> 时间：2012-10-27T23:06:14.270
> 
> 标签：c++, http, unix, tcp, get

我一直在为一个类编写一个简单的 Web 服务器 (http 1.0)，但是每当我尝试获取文件时 ( `wget 127.0.0.1 /filename`) 都短了几个字节。令人困惑的是，当我将发送的字节数与文件大小相匹配时，而不是`wget`接收的数量。

为什么`wget`没有得到我写入套接字的所有数据？

一些`wget`输出

```
wget:

    --2012-10-27 19:02:00--  (try: 4)  http://127.0.0.1:5555/
    Connecting to 127.0.0.1:5555... connected.
    HTTP request sent, awaiting response... 200 Document follows
    Length: 5777 (5.6K) [text/html]
    Saving to: `index.html.6'

    99% [=====================================> ] 5,776       --.-K/s   in 0s      

    2012-10-27 19:02:00 (322 MB/s) - Read error at byte 5776/5777 (Connection reset by peer).  Retrying.

    --2012-10-27 19:03:52--  (try: 4)  http://127.0.0.1:5555/ZoEY8.jpg
    Connecting to 127.0.0.1:5555... connected.
    HTTP request sent, awaiting response... 200 Document follows
    Length: 163972 (160K) [image/jpeg]
    Saving to: `ZoEY8.jpg.4'

    91% [==================================>    ] 149,449     --.-K/s   in 0.001s  

    2012-10-27 19:03:52 (98.8 MB/s) - Read error at byte 163917/163972 (Connection reset by peer). Retrying. 
```

获取方法：

```
void *
processGetRequest(requestParser request)
{

  string resp= "HTTP/1.0 200 Document follows\r\nServer: lab5 \r\nContent-Length: ";
  string path="";
  path =request.path;

  //find file
  int page= open (path.c_str(),O_RDONLY);
  FILE * pageF= fdopen(page,"rb"); 

  //get size
  fseek(pageF, 0L, SEEK_END);
  int sz = ftell(pageF);
  fseek(pageF, 0L, SEEK_SET);

  //form content length
  stringstream ss;
  ss<<resp<<sz<<"\r\n";
  resp=ss.str(); 

  //make response
  if(page<0){
      cout<<"404 \n";
    resp = "HTTP/1.0 404 File Not Found\r\nServer: lab5 \r\nContent-type: text/html \r\n \r\n";

    write( request.fd, resp.c_str(), resp.length());

  return 0; 
  }
  if(path.find(".gif")!=string::npos)
   resp += "Content-type: image/gif\r\n \r\n";
  else if(path.find(".png")!=string::npos)
   resp += "Content-type: image/png\r\n \r\n";
  else if(path.find(".jpg")!=string::npos)
   resp += "Content-type: image/jpeg\r\n \r\n";
  else
   resp += "Content-type: text/html \r\n \r\n";

  //write response
  write( request.fd, resp.c_str(), resp.length());

  int total=0;      
  char buff[1024];
  int readBytes = 0;
  int er;

  //send file
  do{

  readBytes= read(page, buff, 1024);
  cout<<"read bytes "<<readBytes<<"\n";

  if(readBytes<0){
    perror("read");

    break;
  }
  total+=readBytes;
  er=  send( request.fd, buff, readBytes,0 );   
  cout<<"sent bytes "<<er<<"\n";
  if (er==-1){
    perror("send");
  }
  else if( er != readBytes){
    cout<<"Read write miss match\n";
  }

 }while(readBytes>0);

 close(page);
 return 0;
} 
```

编辑：

我一直在工作，我想知道我的插座是否做错了

```
// Set the IP address and port for this server
struct sockaddr_in serverIPAddress; 
memset( &serverIPAddress, 0, sizeof(serverIPAddress) );
serverIPAddress.sin_family = AF_INET;
serverIPAddress.sin_addr.s_addr = INADDR_ANY;
serverIPAddress.sin_port = htons((u_short) port);

// Allocate a socket
int masterSocket =  socket(PF_INET, SOCK_STREAM, 0);
if ( masterSocket < 0) {
  perror("socket");
  exit( -1 );
}

while ( 1 ) {

// Accept incoming connections
struct sockaddr_in clientIPAddress;
int alen = sizeof( clientIPAddress );
int slaveSocket = accept( masterSocket,
              (struct sockaddr *)&clientIPAddress,
              (socklen_t*)&alen);
// send slaveSocket to get method 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:34:14.157

我的第一个答案在下面，但我只是注意到了一些东西..

```
"Content-type: text/html \r\n \r\n"; 
```

标头必须用两个 CR/LF 与内容分开。看起来你那里有空间

你可以试试这个：

```
 "Content-type: text/html\r\n\r\n"; 
```

* * *

最后一次写入后输出缓冲区是否正确刷新和关闭？尝试将 1024 字节读取缓冲区的大小更改为大于 gif 文件的大小。这不是解决方法，但您可能会得到不同的结果，这可能有助于找出问题的原因。也许还可以将一些日志记录到读写循环中。查看最后一次缓冲区写入的大小是否等于响应丢失的字节数。

# c# - Windows 8 应用商店应用程序和 Linq

> ID：13104972
> 
> 赞同：0
> 
> 时间：2012-10-27T23:07:19.667
> 
> 标签：c#, linq, windows-8, store

下面的代码片段来自 c# 和 xaml 中的 Windows 8 商店应用程序。我已经从网络上的各种示例中将这段代码放在一起，所以这可能不是最简洁的方法。其中大部分来自 VS2012 中提供的 Grid 模板，我已将我的 web api 作为数据源

请解释以下内容

当我调用 Get 方法时一切正常，并且我将数据返回到 xaml 视图中当我在同一方法中取消注释 Take(10) 时，我没有返回任何数据。

似乎任何尝试放置 LINQ 种类的扩展方法只会停止返回的数据，并且也没有说明原因，它符合要求！

任何帮助表示赞赏

谢谢马克

```
public class TeamDataSource
{
    private static TeamDataSource _sampleDataSource = new TeamDataSource();

    private ObservableCollection<TeamDataItem> _items = new ObservableCollection<TeamDataItem>();
    public ObservableCollection<TeamDataItem> Items
    {
        get { return this._items; }
    }

    public TeamDataSource()
    {
        this.Initialize();
    }

    public static IEnumerable<TeamDataItem> Get()
    {
        var thisdata = _sampleDataSource.Items;
        return thisdata;//.Take(10);
    }

    private async void Initialize()
    {
        using (var client = new DataServiceClient())
        {
            List<TeamDataItem> list = await client.Download<List<TeamDataItem>>("/teams");

            foreach (var i in list.OrderByDescending(t => t.Points).ThenByDescending(t => t.GoalDiff))
            {
                TeamDataItem team = i;
                _items.Add(team);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:59:24.450

好像最后还是很明显的。当我使用 aync 和 await 时，调用在数据到达之前立即返回。因此 Take(4) 没有什么可做的。

现在唯一的问题是我什么时候可以告诉任务已经完成？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:09:33.370

您的问题是`Take`不会立即枚举项目。它推迟枚举，直到它`foreach`被调用或被`GetEnumerator`调用。在这种情况下，它正在枚举的集合被释放（一旦`Get`内容结束），因此当它最终枚举项目时，不再有任何项目。尝试`thisdata.GetEnumerator();`在 return 语句之前添加一行。

从[这里](http://msdn.microsoft.com/en-us/library/bb503062.aspx)：

> 该方法是通过使用延迟执行来实现的。立即返回值是一个存储执行操作所需的所有信息的对象。在通过直接调用其 GetEnumerator 方法或使用 Visual C# 中的 foreach 或 Visual Basic 中的 For Each 枚举对象之前，不会执行此方法表示的查询。

# ruby-on-rails - 在ruby的字符串中使用url

> ID：13104980
> 
> 赞同：0
> 
> 时间：2012-10-27T23:08:35.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我想将字符串中的 url 转换为可用的 url。例如：str = "你好，这是雅虎的链接：[http](http://www.yahoo.com) ://www.yahoo.com "

```
//in the view i have
<%= parse_description(r[:description]) %>

//in helper, i am splitting each word in the string and verifying if i have a string which
//  contains http, if http is present then i am using link_to to make it a valid url:
def parse_description(str)
  s = ""
    str.split.each do |w|
       a =  w.include?("http") ? (link_to nil,"#{w}") : w
       s += "#{a} "
    end 
end 
```

一旦字符串返回到视图中，链接就不可点击了。我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:35:57.307

感谢 pst 的帮助.. 在返回时我只是做了 s.html_safe.. 它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T09:06:18.527

要匹配字符串中的 URI，请使用以下代码：

```
html_string.scan(URI.regexp) do |*matches|
  p $&
end 
```

# php - 从远程站点获取表的内容

> ID：13104983
> 
> 赞同：0
> 
> 时间：2012-10-27T23:08:47.670
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我想使用 file_get_contents() 获取远程网站的内容 这个网站有我感兴趣的文本、图像和表格。该远程站点上有下一个表：

```
<table style="width: 100%" class="style36">
    <tr>
        <td style="width: 25%" class="style38">B3</td>
        <td style="width: 60%" class="style38">Las Flores</td>
        <td style="width: 15%" class="style38">0</td>
    </tr>
</table> 
```

每个单元格上的值都是动态的，我想以最快、更可靠的方式查询它们。

我尝试将 file_get_contents 函数限制为仅读取 X 个字符，但由于页面是动态的，我无法真正知道我的表从哪个字符开始。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:12:42.097

我建议[`curl`](http://us2.php.net/manual/en/book.curl.php)改用。

获得页面输出后，您可以使用各种工具来解析内容。谷歌将成为你的朋友，特别是如果你想找到一个 PHP HTML 解析器。

PHP 有大量的[DOM](http://php.net/manual/en/book.dom.php)函数可供使用，因此您也可以自己开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:13:01.780

你会想看看一个概念调用抓取；有可用的网络抓取库，或者您可以使用 preg_match_all() 通过正则表达式获取所需的元素。 [用于 PHP 的抓取库 - phpQuery？](https://stackoverflow.com/questions/1644669/scraping-library-for-php-phpquery)看看那个链接。

# c++ - 读取 200 MB 的 json 文件需要 1.5 GB 内存

> ID：13104988
> 
> 赞同：4
> 
> 时间：2012-10-27T23:10:13.083
> 
> 标签：c++, json

我正在使用 C++ 中的 json_spirit 库来解析一个 200 mb 的 json 文件。令我惊讶的是，当我的程序读入内存时，我的 RAM 被使用了 1.5 GB。这是反序列化json时所期望的吗？

这是我在 json 文件中加载的方式：

```
 std::ifstream istream(path.c_str());
 json_spirit::mValue val;
 json_spirit::read(istream, val); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:31:36.537

你可以试试[rapidjson](http://code.google.com/p/rapidjson/)。

它针对内存使用和性能进行了优化。

通过使用原位解析选项（即它改变解析的源字符串），它只需要每个 JSON 值产生 16 个字节来存储 32 位架构中的 DOM。字符串值将使用指向修改后的源字符串的指针。

我希望内存使用量会少得多。

另一方面，rapidjson 也支持 SAX 风格的解析。如果应用程序只需要从头到尾遍历 JSON 文件（例如做一些统计），那么 SAX 风格的 API 会更快，而且内存消耗非常少（程序堆栈 + 字符串值的最大长度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:17:51.320

我认为，这不依赖于 JSON。这更多的是数据结构开销的问题。如果您有许多小对象，则管理部分变得越来越重要。

虽然，超过七倍的开销，似乎真的过分了。

# ruby - ruby 中的哈希映射

> ID：13104992
> 
> 赞同：0
> 
> 时间：2012-10-27T23:10:44.200
> 
> 标签：ruby, hash, hashmap, hashtable

鉴于：

```
hash = { "value" => 4, "details" => "I am some details"}, {"value" => 5, "details" => "I am new details"} 
```

我可以做类似的事情：

```
hash.each do |key, value|
   puts "#{key} is #{value}"
end 
```

得到类似的东西：

```
{ "value" => 4, "details" => "I am some details"} is {"value" => 5, "details" => "I am new details"} is 
```

如果哈希表（地图）不是我想要做的，那会是什么？数据库是不可能的。`{}`如果用户需要填写与前两个相同的详细信息，用户应该能够继续添加到另一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:23:34.713

您已经创建了一个哈希数组，您可以更明确地执行以下操作：

```
hashes = [{:value => "foo"}, {:value => "bar"}] 
```

然后你可以附加

```
hashes << {:value => "baz"} 
```

如果你想知道你正在使用什么类型的变量，你可以这样做`var.class`：

```
hash = { "value" => 4, "details" => "I am some details"}, {"value" => 5, "details" => "I am new details"}
hash.class #=> Array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:16:43.403

[Map](http://en.wikipedia.org/wiki/Associative_array)是*Distinct* Keys 到 Values的映射；有一些 Map*变体*可以放松这一点，但 Ruby 的 Hashmap 遵循标准的 Map ADT。

在这种情况下，正在创建一个由两个不同哈希（每个都有一个“值”和一个“详细信息”）组成的数组。

```
>  x = [1,2] # standard Array literal
   => [1,2]   
>  x = 1,2   # as in the posted code, no []'s, but ..
   => [1,2]  # .. the same: the =, production created the Array here! 
```

所以它不是一个 Hash in `hash`，而是一个 Array （包含两个 Hash 元素）:)

将结果与以下结果进行比较，并注意`b`每次`nil`：

```
["one","two","three","four"].each do |a,b|
    puts ">" + a + "|" + b
end 
```

这就是为什么它在迭代数组时打印“hash1.to_str *is* hash2.to_str *is* ” `each`，如上所述，并且只有第一个参数填充了一个有意义的值 - 其中一个哈希值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T23:17:23.980

我不明白在这种情况下“数据库是不可能的”是什么意思。听起来您正在创建一个数据存储，到目前为止，您似乎拥有一个具有相关值的数字 ID。

散列是散列；您将向哈希添加值：

```
h = { "4" => "foo" } # Initial values
h["5"] = "ohai"
h["6"] = "kthxbai" 
```