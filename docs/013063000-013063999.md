# StackOverflow 问答 13063000-13063999

# c# - 如果角色名称包含空格，则无法使 AuthorizeAttribute 工作

> ID：13063001
> 
> 赞同：6
> 
> 时间：2012-10-25T06:40:58.173
> 
> 标签：c#, asp.net, asp.net-mvc-3, authorization

在 Windows 域 Intranet 站点（使用`<authentication mode="Windows" />`）上工作时，我遇到了以下问题：

```
[Authorize(Roles = "Domain Users, Domain Admins")]
public class MyController: Controller {...} 
```

由于活动目录组名称中的空格，此控制器不可用于任何用户。那么我可以让 MVC（或 ASP.Net）正确授权，同时使用带空格的角色名称（这里：AD 组的名称）吗？

只是没有回应的类似问题：

1.  [带有用于角色授权的空格的 AD 组](https://stackoverflow.com/questions/10611313/ad-groups-with-spaces-used-for-roles-authorization)。
2.  [如果角色包含空格，如何编写 AuthorizeAttribute](https://stackoverflow.com/questions/10954907/how-to-write-authorizeattribute-if-a-role-contains-space)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T06:51:19.250

创建您自己的属性并从 AuthorizeAttribute 派生。然后覆盖 AuthorizeCore 方法并通过验证包含空格的角色实现您自己的逻辑。

一个例子可能是这样的：

```
public class CustomAuthAttribute : AuthorizeAttribute
{
   private readonly IUserRoleService _userRoleService;
   private string[] _allowedRoles;

   public CustomAuthAttribute(params string[] roles)
   {
      _userRoleService = new UserRoleService();
      _allowedRoles = roles;
   }
   protected override bool AuthorizeCore(HttpContextBase httpContext)
   {
    //something like this.
    var userName = httpContext.User.Identity.Name;
    var userRoles = _userRoleService .GetUserRoles(userName); // return list of strings
    return _allowedRoles.Any(x => userRoles.Contains(x));
   } 
```

}

**用法**

```
[CustomAuth("role withspace","admin")]
public ActionResult Index()
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-29T18:06:52.977

当我这样做时，空间角色工作正常：

```
public static class AppRoles
{
    public const string Manager     =@"domain\App Manager";
    public const string Admin       =@"domain\App Admin";
}

[Authorize(Roles = AppRoles.Admin)] 
public class MyAbcController : Controller
{
    //code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-09T15:26:18.247

您可以尝试在您的姓名前添加“MyDomain\”。

```
[Authorize(Roles = @"mydomain\Domain Users, mydomain\Domain Admins")] 
```

请记住添加@ 或将斜杠“\”加倍。

# mysql - mysql 无法创建表 - 错误 1005

> ID：13063002
> 
> 赞同：1
> 
> 时间：2012-10-25T06:41:05.310
> 
> 标签：mysql, sql, create-table, mysql-error-1005

我是一名学生，我只是在尝试一些基本的 mysql。但是，当涉及到以下代码时，我不断收到相同的错误。

> 错误代码：1005。无法创建表“mydatabase.orders”（错误号：150）

```
CREATE TABLE Customer
(
P_ID int(3) UNSIGNED NOT NULL,
LastName varchar(10) NOT NULL,
FirstName varchar(10) NOT NULL,
Address varchar(20) NOT NULL,
City varchar(10) NOT NULL
);

CREATE TABLE Orders
(
O_ID int(3) UNSIGNED NOT NULL,
OrderNo int NOT NULL,
P_ID int(3) UNSIGNED NOT NULL,
PRIMARY KEY (O_ID),
FOREIGN KEY(P_ID)REFERENCES Customer(P_ID)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:43:31.977

错误代码：1005 - 您的代码中存在错误的主键引用

通常是由于参考 FK 字段不存在。可能是您有拼写错误，或者检查大小写应该相同，或者字段类型不匹配。FK 链接字段必须与定义完全匹配。

**第一步：**

如果您在服务器上拥有管理员权限，您可能希望在收到错误后立即运行 MySQL 命令“SHOW INNODB STATUS”（或 MySQL 5.5“SHOW ENGINE INNODB STATUS”）。此命令显示日志信息和错误详细信息。

如果您的脚本在一台服务器上运行良好，但当您尝试在另一台服务器上运行时出现错误，则很有可能＃6 是问题所在。不同版本的 MySQL 具有不同的默认字符集设置，您可能在不知情的情况下在不同的服务器上分配了不同的字符集。

**一些已知的原因可能是：**

1.  两个关键字段类型和/或大小不完全匹配。例如，如果一个是 INT(10)，则关键字段也需要是 INT(10)，而不是 INT(11) 或 TINYINT。您可能希望使用 SHOW CREATE TABLE 确认字段大小，因为查询浏览器有时会直观地显示 INT(10) 和 INT(11) 的 INTEGER。您还应该检查一个未签名，另一个未签名。它们都需要完全相同。
2.  您尝试引用的关键字段之一没有索引和/或不是主键。如果关系中的某个字段不是主键，则必须为该字段创建索引。
3.  外键名称是已经存在的键的副本。检查您的外键名称在您的数据库中是唯一的。只需在密钥名称的末尾添加一些随机字符即可进行测试。
4.  您的一个或两个表是 MyISAM 表。为了使用外键，表必须都是 InnoDB。（实际上，如果两个表都是 MyISAM，那么您将不会收到错误消息 - 它只是不会创建密钥。）在查询浏览器中，您可以指定表类型。
5.  您已指定级联 ON DELETE SET NULL，但相关的关键字段设置为 NOT NULL。您可以通过更改级联或将字段设置为允许 NULL 值来解决此问题。

6.  确保 Charset 和 Collat​​e 选项在表级别以及键列的单个字段级别都相同。

7.  您的外键列上有一个默认值（即 default=0）

8.  关系中的一个字段是组合（复合）键的一部分，并且没有自己的单独索引。即使该字段有一个索引作为复合键的一部分，您也必须仅为该键字段创建一个单独的索引才能在约束中使用它。

9.  您的 ALTER 语句中有语法错误，或者您在关系中输入了错误的字段名称之一

    10 您的外键名称超过了 64 个字符的最大长度。

有关详细信息，请参阅： [MySQL 错误号 1005 无法创建表](http://verysimple.com/2006/10/22/mysql-error-number-1005-cant-create-table-mydbsql-328_45frm-errno-150/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:46:15.647

这：

```
FOREIGN KEY(P_ID)REFERENCES Customer(P_ID) 
```

只有当你有

1.  该客户（P_ID）字段的索引，因此您应该添加一个
2.  使用 innodb -> 如果这不是您的默认引擎，您应该专门添加该引擎。

添加索引如下所示：

```
 INDEX(P_ID) 
```

我无法为您尝试，所以这里只是“干”编码，但我很确定就是这样。显然要注意放置之类的事情`,`，但这应该可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:48:25.040

运行以下查询：

```
CREATE TABLE Customer
(
P_ID int(3) UNSIGNED NOT NULL,
LastName varchar(10) NOT NULL,
FirstName varchar(10) NOT NULL,
Address varchar(20) NOT NULL,
City varchar(10) NOT NULL,
PRIMARY KEY (P_ID)
);

CREATE TABLE Orders
(
O_ID int(3) UNSIGNED NOT NULL,
OrderNo int NOT NULL,
P_ID int(3) UNSIGNED NOT NULL,
PRIMARY KEY (O_ID),
FOREIGN KEY(P_ID)REFERENCES Customer(P_ID)
); 
```

在将 P_ID 声明为外键之前，必须将其声明为主键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T06:50:21.673

这应该有效，`PRIMARY KEY`客户表上没有。

**编辑**删除了`ON DELETE CASCADE ON UPDATE CASCADE`子句，也许不需要

```
CREATE TABLE Customer(
    P_ID int(3) UNSIGNED NOT NULL,
    LastName varchar(10) NOT NULL,
    FirstName varchar(10) NOT NULL,
    Address varchar(20) NOT NULL,
    City varchar(10) NOT NULL,
    PRIMARY KEY (`P_ID`)
);

CREATE TABLE Orders(
    O_ID int(3) UNSIGNED NOT NULL,
    OrderNo int(3) NOT NULL,
    P_ID int(3) UNSIGNED NOT NULL,
    PRIMARY KEY (O_ID),
    CONSTRAINT `P_ID` FOREIGN KEY(`P_ID`) REFERENCES `Customer` (`P_ID`)
); 
```

# python-3.x - Python 3 是否有（至少）非 wsdl 肥皂客户端的模块？

> ID：13063003
> 
> 赞同：0
> 
> 时间：2012-10-25T06:41:06.937
> 
> 标签：python-3.x, soap-client

> **可能重复：**
> [是否存在 Python 3 SOAP 客户端模块？](https://stackoverflow.com/questions/1534554/does-a-python-3-soap-client-module-exist)

似乎[没有 WSDL 客户端](https://stackoverflow.com/q/1534554/772981)，但可能存在通用客户端？

顺便说一句，我不确定是否要结束诸如[Python 3.x 的最佳 SOAP 库是什么？](https://stackoverflow.com/q/7817303/772981)有那么好吗？如果存在许多解决方案，最好关闭它，但如果我们没有，我希望这样的问题会一直保持开放，直到出现问题。

# javascript - IE 喜欢 Firefox 的浏览器环境

> ID：13063007
> 
> 赞同：0
> 
> 时间：2012-10-25T06:41:22.983
> 
> 标签：javascript, asp.net, cross-browser

在我们的项目中，我们有一些使用不推荐使用的第三方`asp`控件的 asp 文件。
这些控件在 IE8、IE9、IE10 中正常运行。但是，它们在 Firefox 中无法正常运行（我使用的是 Firefox 16.1 和 firebug）。
有什么办法可以暂时将类似 IE 的浏览器环境安装到 Firefox 中，以便我可以在 Firefox 中进行调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:47:31.413

浏览器不处理 ASP……只是它产生的 HTML、CSS 和 JS。因此，在 IE 中获取您的页面，将其保存，然后在 Firefox 中打开它。

# delphi - 如何测试形状和面板是否在同一位置

> ID：13063009
> 
> 赞同：2
> 
> 时间：2012-10-25T06:41:32.953
> 
> 标签：delphi, delphi-7, collision-detection

这个想法是你必须拍摄面板。因此面板将被设置到屏幕顶部的随机位置，然后向下移动到屏幕底部。您必须在面板到达底部之前用形状拍摄面板。但我不知道如何测试创建的形状是否在面板的位置以重置面板。目前这是我的代码，但 if 测试为假。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls, jpeg;

const
  MaxRays=100;
  RayStep=8;
type
   TForm1 = class(TForm)
   Panel1: TPanel;
    Timer1: TTimer;
    Timer2: TTimer;
    Button1: TButton;
    Shape1: TShape;
    Timer3: TTimer;
    Image1: TImage;
    procedure Timer2Timer(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure FormActivate(Sender: TObject);
    procedure FormMouseWheelDown(Sender: TObject; Shift: TShiftState;
      MousePos: TPoint; var Handled: Boolean);
    procedure FormMouseWheelUp(Sender: TObject; Shift: TShiftState;
       MousePos: TPoint; var Handled: Boolean);
     procedure Timer3Timer(Sender: TObject);
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
  private
    { Private declarations }
    Rays:array[0..MaxRays-1] of TShape;

   public
   procedure StartPanelAnimation1;
   procedure DoPanelAnimationStep1;
   function  PanelAnimationComplete1: Boolean;
   { Public declarations }
  end;

var
  Form1: TForm1;

implementation
 var key : char;
{$R *.dfm}

{ TForm1 }

 { TForm1 }

 procedure TForm1.DoPanelAnimationStep1;
begin
Panel1.Top := Panel1.Top+1;
end;

function TForm1.PanelAnimationComplete1: Boolean;
begin
 Result := Panel1.Top=512;
end;

procedure TForm1.StartPanelAnimation1;
begin
  Panel1.Top := 0;
  Timer1.Interval := 1;
  Timer1.Enabled := True;
end;

procedure TForm1.Timer2Timer(Sender: TObject);
begin
   DoPanelAnimationStep1;
   if PanelAnimationComplete1 then
    StartPanelAnimation1;
   if (shape1.Top < panel1.Top) and (shape1.Left < panel1.Left+104) and (shape1.Left >       panel1.Left)   then
   begin
    startpanelanimation1;
    sleep(10);
   end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
 button1.Hide;
  key := 'a';
  timer2.Enabled := true;
  StartPanelAnimation1; 
end;

procedure TForm1.FormActivate(Sender: TObject);
begin
 shape1.Visible := false;
 timer2.Enabled := false;
 end;

procedure TForm1.FormMouseWheelDown(Sender: TObject; Shift: TShiftState;
  MousePos: TPoint; var Handled: Boolean);
   begin
image1.Left := image1.Left-10;
end;

 procedure TForm1.FormMouseWheelUp(Sender: TObject; Shift: TShiftState;
  MousePos: TPoint; var Handled: Boolean);
    begin
    image1.Left := image1.Left+10;
   end;

procedure TForm1.Timer3Timer(Sender: TObject);
var
  i:integer;
begin
  for i:=0 to MaxRays-1 do
    if Rays[i]<>nil then
    begin
      Rays[i].Top:=Rays[i].Top-RayStep;
      if Rays[i].Top<0 then FreeAndNil(Rays[i]);
    end;
end;

procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
   var
   i:integer;
begin
  i:=0;
  while (i<MaxRays) and (Rays[i]<>nil) do inc(i);
  if i<MaxRays then
   begin
    Rays[i]:=TShape.Create(Self);
    Rays[i].Shape:=stEllipse;
    Rays[i].Pen.Color:=clRed;
    Rays[i].Pen.Style:=psSolid;
    Rays[i].Brush.Color:=clYellow;
    Rays[i].Brush.Style:=bsSolid;
    Rays[i].SetBounds(X-4,Y-20,9,41);
    Rays[i].Parent:=Self;
    end;
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  i:integer;
begin
  for i:=0 to MaxRays-1 do Rays[i]:=nil;
end;

end. 
```

我已经尝试过@NGLN 所说的，但是当我单击鼠标按钮时，形状像 10 像素一样移动然后停止，当它停止时，正常向下移动的面板现在在屏幕顶部像疯了一样移动，改变了它的左侧位置，但顶部位置保持 0。

这是新代码

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls, jpeg;

  const
  MaxRays=100;
  RayStep=8;
type
  TForm1 = class(TForm)
    Panel1: TPanel;
    Timer1: TTimer;
    Timer2: TTimer;
    Button1: TButton;
    Shape1: TShape;
    Timer3: TTimer;
    Image1: TImage;
    Timer4: TTimer;
    procedure Timer2Timer(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure FormActivate(Sender: TObject);
    procedure FormMouseWheelDown(Sender: TObject; Shift: TShiftState;
      MousePos: TPoint; var Handled: Boolean);
    procedure FormMouseWheelUp(Sender: TObject; Shift: TShiftState;
      MousePos: TPoint; var Handled: Boolean);
    procedure Timer3Timer(Sender: TObject);
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
    Rays:array[0..MaxRays-1] of TShape;
  public
   procedure StartPanelAnimation1;
   procedure DoPanelAnimationStep1;
   function  PanelAnimationComplete1: Boolean;
   function EllipticShapeIntersectsPanel(Shape: TShape; Panel: TPanel): Boolean;
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation
 var key : char;
{$R *.dfm}

{ TForm1 }

{ TForm1 }

procedure TForm1.DoPanelAnimationStep1;
begin
Panel1.Top := Panel1.Top+1;
end;

function TForm1.PanelAnimationComplete1: Boolean;
begin
 Result := Panel1.Top=512;
end;

procedure TForm1.StartPanelAnimation1;
var left : integer;
begin
  Panel1.Top := 0;
  randomize;
  left := random(clientwidth-105);
  panel1.Left := left;
  Timer1.Interval := 1;
   Timer1.Enabled := True;
end;

procedure TForm1.Timer2Timer(Sender: TObject);
 var I: Integer;
begin
 DoPanelAnimationStep1;
  if PanelAnimationComplete1 then
    StartPanelAnimation1;
   I := 0;
  while (Rays[I] <> nil) and (I < MaxRays)  do
  begin
    if EllipticShapeIntersectsPanel(Rays[I], Panel1) then
    Inc(I);
    startpanelanimation1;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
 button1.Hide;
 key := 'a';
 timer2.Enabled := true;
 StartPanelAnimation1;
end;

procedure TForm1.FormActivate(Sender: TObject);
begin
 shape1.Visible := false;
 timer2.Enabled := false;
end;

procedure TForm1.FormMouseWheelDown(Sender: TObject; Shift: TShiftState;
  MousePos: TPoint; var Handled: Boolean);
begin
image1.Left := image1.Left-10;
end;

procedure TForm1.FormMouseWheelUp(Sender: TObject; Shift: TShiftState;
  MousePos: TPoint; var Handled: Boolean);
begin
 image1.Left := image1.Left+10;
end;

procedure TForm1.Timer3Timer(Sender: TObject);
var
  i:integer;
begin
  for i:=0 to MaxRays-1 do
    if Rays[i]<>nil then
    begin
      Rays[i].Top:=Rays[i].Top-RayStep;
      if Rays[i].Top<0 then FreeAndNil(Rays[i]);
    end;
end;

procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
 var
  i:integer;
  left : integer;
  top : integer;
begin
  i:=0;
  while (i<MaxRays) and (Rays[i]<>nil) do i:= i+10;
  if i<MaxRays then
   begin
    Rays[i]:=TShape.Create(Self);
    Rays[i].Shape:=strectangle;;
    Rays[i].Pen.Color:=clRed;
    Rays[i].Pen.Style:=psSolid;
    Rays[i].Brush.Color:=clred;
    Rays[i].Brush.Style:=bsSolid;
    left := image1.Left+38;
    top := image1.Top-30;
    Rays[i].SetBounds(left,top,9,33);
    Rays[i].Parent:=Self;
   end;

end;

procedure TForm1.FormCreate(Sender: TObject);
begin
 Screen.Cursor:=crNone;
end;

function TForm1.EllipticShapeIntersectsPanel(Shape: TShape;
  Panel: TPanel): Boolean;
var
  ShapeRgn: HRGN;
begin
  with Shape.BoundsRect do
    ShapeRgn := CreateEllipticRgn(Left, Top, Right, Bottom);
  try
    Result := RectInRegion(ShapeRgn, Panel.BoundsRect);
  finally
    DeleteObject(ShapeRgn);
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T09:03:04.287

由于您的形状是椭圆形的，因此请创建一个临时区域并确定与矩形的交集[`RectInRegion`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162906(v=vs.85).aspx)：

```
function EllipticShapeIntersectsPanel(Shape: TShape; Panel: TPanel): Boolean;
var
  ShapeRgn: HRGN;
begin
  with Shape.BoundsRect do
    ShapeRgn := CreateEllipticRgn(Left, Top, Right, Bottom);
  try
    Result := RectInRegion(ShapeRgn, Panel.BoundsRect);
  finally
    DeleteObject(ShapeRgn);
  end;
end; 
```

*（如果形状是[矩形](https://stackoverflow.com/revisions/9e20538c-5132-4057-851a-34354d3ee088/view-source)，那么你可以使用[Darthman](https://stackoverflow.com/a/13063136/757830)的例程。）*

现在将阵列中的每条射线馈入此例程：

```
procedure TForm1.Timer2Timer(Sender: TObject);
var
  I: Integer;
begin
  ...
  I := 0;
  while (Rays[I] <> nil) and (I < MaxRays)  do
  begin
    if EllipticShapeIntersectsPanel(Rays[I], Panel1) then
      // Do what you want to do
    Inc(I);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T06:52:00.893

```
 if IntersectRect(Panel1.BoundsRect, Shape1.Boundsrect) then
  // collided 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:53:34.737

传统的方法是检查对象 1 的所有 4 个角是否在对象 2 内。

```
function IsPanelCollide(Panel: TPanel; Shape: TShape): boolean;
var
  TL, TR, BL, BR: boolean;
begin
  // if TOP LEFT panel inside shape
  TL := (Panel.Top >= Shape.Top) AND (Panel.Top <= Shape.Top + Shape.Height) AND
        (Panel.Left >= Shape.Left) AND (Panel.Left <= Shape.Left + Shape.Width);

  // if TOP RIGHT panel inside shape
  TR := (Panel.Top >= Shape.Top) AND (Panel.Top <= Shape.Top + Shape.Height) AND
        (Panel.Left + Panel.Width >= Shape.Left) AND (Panel.Left + Panel.Width <= Shape.Left + Shape.Width);

  // if BOTTOM LEFT panel inside shape
  BL := (Panel.Top + Panel.Height >= Shape.Top) AND (Panel.Top + Panel.Height <= Shape.Top + Shape.Height) AND
        (Panel.Left >= Shape.Left) AND (Panel.Left <= Shape.Left + Shape.Width);

  // if BOTTOM RIGHT panel inside shape
  BR := (Panel.Top + Panel.Height >= Shape.Top) AND (Panel.Top + Panel.Height <= Shape.Top + Shape.Height) AND
        (Panel.Left + Panel.Width >= Shape.Left) AND (Panel.Left + Panel.Width <= Shape.Left + Shape.Width);

  Result := (TL) AND (TR) AND (BL) AND (BR);
end; 
```

或者，您也可以使用诸如 DelphiX 之类的库或任何专注于游戏制作的类似库。DelphiX 有一种检查碰撞的方法，您不必使用自己的计时器，DelphiX 的计时器对于动画来说更好更流畅。

# facebook - 通过多个社交网络登录应用程序

> ID：13063011
> 
> 赞同：2
> 
> 时间：2012-10-25T06:41:36.003
> 
> 标签：facebook, ios5, twitter, social-networking, flickr

我有一个要求，用户可以通过不同的社交网络（如 fb、twitter 或 flickr）登录到应用程序。一旦用户选择任何 n/w 登录，就可以链接其他两个帐户。现在我的问题是我应该在哪里保存链接的帐户详细信息，例如身份验证令牌，因为当用户在注销后重新登录时，我们需要这些链接的帐户详细信息。

谢谢，

# ruby-on-rails - 尝试登录和使用heroku时无法识别ruby.exe

> ID：13063014
> 
> 赞同：6
> 
> 时间：2012-10-25T06:41:43.820
> 
> 标签：ruby-on-rails, ruby, heroku, ruby-on-rails-3.2

当尝试创建一个 heroku 应用程序并通过 git 推送它时，我收到以下错误：

```
$ heroku create
' "C:\Program Files <x86>\ruby-1.9.2\bin\ruby.exe" is not recognized as an
internal or external command, operable program or batch file. 
```

然而，

```
$ ruby -v
ruby 1.9.3p125 <2012-02-16> [i386-mingw32] 
```

我检查了 PATH 环境，它肯定包含“C:\Program Files (x86)\ruby-1.9.2\bin”。同样有趣的是，当导航到这个目录时，它实际上并不包含名为 ruby​​.exe 的文件。这正常吗？

为什么当我专门尝试部署到 Heroku 时会出现此错误？我不知道发生了什么……请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:47:02.987

这里也是一个新手，试图让heroku运行起来。我今天遇到了完全相同的问题，首先是“找不到 RubyGem railties”问题，然后在卸载 Ruby 1.9.2 后，heroku 的问题不再工作了。我找到了两种解决方法，但不确定其中一种是否很棒。

不要卸载工具带附带的 ruby​​ 版本。相反，要么

(1)：将其从 PATH 中删除。对我来说，工具带安装将 c:\program files\ruby1.9.3 添加到我的 PATH 系统变量中。我的用户 PATH 变量中已经有 c:\ruby193 （我之前自己安装了 ruby​​）。在从 PATH 中删除工具带添加的那个之后，事情开始起作用了。（注意：c:\ruby193 应该放在 c:\program files\heroku\bin int PATH 系统变量之前，否则它将不起作用）

(2): 或者，我将 c:\ruby193 从我的用户 PATH 移动到我的系统 PATH。重新安装工具带，现在 ruby​​ 和 heroku 都可以工作了。但是我的 PATH 变量中确实有两个版本的 ruby​​。

不确定这两种方法是否很棒，因为我怀疑我现在安装了两个版本的 ruby​​，并且根据我正在做的事情被使用。但至少让我可以继续解决下一个问题，现在我一直在尝试安装 heroku 插件。

我认为 ruby​​ on rails 应该让事情变得简单。尝试配置 30 种不同的新工具已经 4 天了（结束咆哮）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T22:32:46.703

您可以做的另一件事（它对我有用）是编辑 \bin\heroku.bat。

在该文件中，Heroku Ruby 安装路径的引用被标记为 Program Files。它在安装中是默认的。更改为当前的 Ruby 安装路径。

就我而言，我只想在我的机器上安装一个版本的 ruby​​。所以，我卸载了heroku自带的ruby，安装了1.9.3。并简单地更改了批处理文件。

我希望这会有所帮助。享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-08T23:27:12.453

对我来说，问题是一个平行的、损坏的、被遗忘的、有 5 年历史的 heroku cli 安装。恰好比新安装的优先级高。

卸载旧版本解决了我的问题。

# c# - 从内容页面替换 css 文件

> ID：13063018
> 
> 赞同：1
> 
> 时间：2012-10-25T06:41:57.430
> 
> 标签：c#, asp.net, .net, css, vb.net

母版页 (C.masterpage) 有一个父母版页 (P.masterpage)，其中包含所有 10 个 css 文件。这些 css 文件正在应用于所有站点。

我们正在创建一些我们想要不同样式的新页面，因此要求是替换（停止以前的表格，或者如果可能的话删除）两个样式表并添加新的样式表并让它们工作而不是旧的。

在 P.Masterpage 中，所有 css 文件都位于带有 runtat 服务器的 head 标记中。我在 p.masterpage 中也有内容占位符，但是这些 css 文件不在其中，并且在 p.masterpage 中，内容占位符只是一个空标签。请指导我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:57:03.850

为什么不在新的父母版页中声明基本样式表集，从中派生您当前的母版页，添加两个旧样式表，这样就不需要对现有页面进行任何更改。然后用其他两个（新）样式表定义一个新的子主年龄，并从该主继承新页面？

逐页保存黑客攻击...

因此，当前母版 (l1) 成为新母版页（仅包含核心/常用内容）的子级，并且新母版也继承自新母版页，但定义了自己的两个单独的样式表...

# unix - 在 solaris unix 中创建别名

> ID：13063019
> 
> 赞同：1
> 
> 时间：2012-10-25T06:42:01.330
> 
> 标签：unix, solaris, command-line-arguments, alias

我可以在 solaris 中创建一个别名，如下所示：

```
alias x86 "some_command" 
```

我需要一些可以将参数传递给别名的东西，并且该参数将用于构建完整的别名。例如：

有一个类似的命令：

```
ct setview 1.0_myname 
```

对于上述内容，我将别名写为

```
alias sv "ct setview 1.0_myname" 
```

在上面的命令中 1.0 是版本，它可以不断变化。

所以我想要的是创建一个别名，如：

```
alias sv "ct steview $1_myname"#well i donno whether this is correct 
```

我想将此别名用作 `sv 1.0`或`sv 2.0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:50:24.490

如果您使用 bash（或等效的 shell），则别名函数无法传输参数。相反，您可以创建一个函数：

```
sv() { ct "setview $@_myname" ;} 
```

并像别名一样使用它（sv 1.0）

*根据您的配置，您可能需要提供**ct**二进制文件的完整路径*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:25:55.187

对于 csh 和 tcsh shell，别名中的参数替换有限，使用 ! 语法，例如：

```
 alias sv 'ct steview \!:1_myname' 
```

更多详细信息和示例，请访问：

*   [在 csh 和 tcsh 中编写别名](http://home.adelphi.edu/sbloch/class/archive/271/fall2005/notes/aliases.html)
*   [在线 Unix 帮助：C Shell：别名](http://www.decf.berkeley.edu/help/unix/csh/aliases.html)

# java - java中如何截取各种操作系统的屏幕截图？

> ID：13063021
> 
> 赞同：0
> 
> 时间：2012-10-25T06:42:08.513
> 
> 标签：java, awtrobot

我正在从事 Java 项目。我需要捕获不同操作系统的屏幕截图。

```
String outFileName = "c:\\Windows\\Temp\\screen.jpg";
 try{
    long time = Long.parseLong(secs) * 1000L;
    System.out.println("Waiting " + (time / 1000L) + " second(s)...");
    //Thread.sleep(time);
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension screenSize = toolkit.getScreenSize();
    Rectangle screenRect = new Rectangle(screenSize);
    Robot robot = new Robot();
    BufferedImage image = robot.createScreenCapture(screenRect);
    ImageIO.write(image, "jpg", new File(outFileName));
  }catch(Exception screen){} 
```

使用上面的代码，它正在从 Windows XP 中捕获屏幕截图，但在其他操作系统中没有捕获。我需要保持其他任何方法以使其在所有操作系统中都能正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:21:07.100

这是我们使用的一些代码的一个**非常**淡化的版本......

```
try {

    Robot robot = new Robot();

    GraphicsDevice[] screenDevices = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices();
    Area area = new Area();
    for (GraphicsDevice gd : screenDevices) {
        area.add(new Area(gd.getDefaultConfiguration().getBounds()));
    }

    Rectangle bounds = area.getBounds();
    System.out.println(bounds);
    BufferedImage img = new BufferedImage(bounds.width, bounds.height, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2d = img.createGraphics();
    for (GraphicsDevice gd : screenDevices) {
        Rectangle screenBounds = gd.getDefaultConfiguration().getBounds();
        BufferedImage screenCapture = robot.createScreenCapture(screenBounds);
        g2d.drawImage(screenCapture, screenBounds.x, screenBounds.y, null);
    }

    g2d.dispose();
    ImageIO.write(img, "png", new File("path/to/ScreenShot.png"));

} catch (Exception exp) {
    exp.printStackTrace();
} 
```

这适用于 Windows 7 和 XP。回家后我会测试我的 Mac

**更新**

我已经能够使用 JDK 7 和 JDK 6 验证 Mac OS 10.7.5

# qt - QToolBar 位置（如何让它保持在固定位置）

> ID：13063022
> 
> 赞同：2
> 
> 时间：2012-10-25T06:42:09.210
> 
> 标签：qt, qmainwindow, qtoolbar

我最初需要以这种方式显示两个 QToolBar，它们位于两行中。我通过这个找到了该问题的解决方案：

[如何设置 QToolBar 显示的行？](https://stackoverflow.com/questions/1441143/how-to-set-the-line-where-a-qtoolbar-is-displayed)

在我的程序中，第一行有几个 QToolBar，它们可以移动。在第二行中，我有另一个无法移动（固定）的 QToolBar。

我的要求是使第二个 QToolbar 始终位于底行。到目前为止，如果顶部的 QtoolBars 被移动，第二个工具栏的位置也会相应地改变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T12:12:38.350

您是否尝试过将其设置`QToolBar`为不可移动？IE

```
mySecondToolBar->setMovable( false ); 
```

默认情况下，所有`QToolBar`对象都是可移动的。虽然我不确定这个解决方案是否有助于`QToolBar`堆叠两个但值得一试。

[http://doc.qt.digia.com/qt/qtoolbar.html](http://doc.qt.digia.com/qt/qtoolbar.html)

# json - Jersey GET 参数返回 null

> ID：13063024
> 
> 赞同：1
> 
> 时间：2012-10-25T06:42:21.697
> 
> 标签：json, jakarta-ee, jersey

我是 Java EE 的新手，正在尝试编写 GET 服务。要从 Web 服务获取值，我需要将主键作为参数发送到服务。我在服务器端的参数值上得到一个空值。我知道我在这里缺少一些基本的东西。

客户端 Junit 测试

```
//VehicleList
        service = client.resource(UriBuilder.fromUri(
                "http://localhost:8081/mCruiseOnCarPool4All/carpool4all/VehicleList/Request").build());
        service.setProperty("identityHash", identityHash) ;
        VehicleDetailsConcrete[] vehicleList = service.type(MediaType.APPLICATION_JSON).get(
                VehicleDetailsConcrete[].class);
        assertNotNull(vehicleList) ;
        assertTrue(vehicleList.length > 0) ; 
```

服务器端服务

```
@GET
@Path ("Request")
@Produces({ MediaType.APPLICATION_JSON })
public Response getVehicleList(@PathParam("identityHash") String identityHash) {
    VehicleListRequest request = new VehicleListRequest(identityHash) ;
    VehicleListResponse response ;
    clientSession = sessionManager.getClientSession(identityHash) ;
    clientSession.getSendQueue().sendRequest(request) ;
    try {
        response = (VehicleListResponse)clientSession.waitAndGetResponse(request) ;
    } catch (WaitedLongEnoughException e) {
        return Response.serverError().build() ;
    } catch (UnableToResolveResponseException e) {
        return Response.serverError().build() ;
    };
    return Response.ok(response).build();
} 
```

getVehicleList 中的 identityHash 为空

我正在使用 setProperty，假设它会执行 setParam。我确定这就是我所缺少的。一个 setParameter 有点像调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:22:24.727

您使用了错误的方法。[`WebResource.setProperty`](http://jersey.java.net/nonav/apidocs/1.14/jersey/com/sun/jersey/api/client/WebResource.html#setProperty%28java.lang.String,%20java.lang.Object%29)不用于设置查询参数。

我不确定你想`identityHash`成为什么。在您的`@GET`方法中，您使用`@PathParam`. 但是这个方法`{identityHash}`在`@Path`.

因此，我假设您想使用`@QueryParam`.

构建您的[`URI`](http://docs.oracle.com/javase/7/docs/api/java/net/URI.html#URI%28java.lang.String,%20java.lang.String,%20java.lang.String,%20int,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)包含查询参数：

```
URI uri =  new URI("http",
                   null,
                   "localhost",
                   8081,
                   "/mCruiseOnCarPool4All/carpool4all/VehicleList/Request",
                   "identityHash=YourIdentityHash",
                   null);
service = client.resource(uri); 
```

**笔记**

您使用的不是 J2EE，而是 Java EE。J2EE 是在 Java EE 5 之前使用的名称。

# code-snippets - Sublime Text 2：Objective-C 范围选择器的名称

> ID：13063033
> 
> 赞同：2
> 
> 时间：2012-10-25T06:43:07.577
> 
> 标签：code-snippets, sublimetext2

我正在尝试在 Sublime Text 2 中创建一个 Objective-C 片段。我想定义片段的范围，以便该片段在所有 Objective-C 文件中都可用。

但我就是找不到 Objective-C 的范围选择器。这是我的片段...

```
<snippet>
<content><![CDATA[
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
}
]]></content>
    <!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
    <tabTrigger>objdid</tabTrigger>
    <!-- Optional: Set a scope to limit where the snippet will trigger -->
    <!-- <scope>source.html</scope> -->
</snippet> 
```

我尝试了 , , 之类的范围`.m`，但`.h`没有任何效果。像上面一样保存代码段会使代码段在所有文件中弹出，无论是它还是其他任何文件。`.Objective-C``.objective-c``.txt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:07:26.013

如果您检查该`Objective-C.tmLanguage`文件，您将看到一个名为`scopeName`value的键`source.objc`。试试这个范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T11:57:57.170

除了 Joachim 的回答，我推荐一个名为**Scope Hunter**的软件包，它可以让您随时快速找到光标下的范围。它不仅可以让您找到新语言的范围，还可以为您提供很多粒度。

例如，在新的纯文本文件中键入以下内容：

```
* This is a bulleted item 
```

范围：

```
Scope: text.plain meta.bullet-point.star.text 
```

您可以获得非常精细的粒度，这在调试代码片段或定义非常精确的代码片段时通常很有用。例如，如果您想要一个仅在 Markdown 列表中有效的片段，那么您可以快速找到 Markdown 列表的确切范围。

对于寻找新范围非常有用。

[**您可以从Github**](https://github.com/facelessuser/ScopeHunter)或**Package Control**下载 Scope Hunter 。

# php - 如何使用 jquery 在 php 文件中显示来自 json 数组的图像

> ID：13063036
> 
> 赞同：0
> 
> 时间：2012-10-25T06:43:19.380
> 
> 标签：php, jquery, json

我有一个 php 文件，它为我的图像和相应的文本创建一个 json 数组：

```
<?php
$images = array(
"Image 1" => array("name" => "Image 1", 
            "price" => "$299", 
            "desc" => "Description 1",
            "image" =>"images/image1.jpg"),
"Image 2"   => array("name" => "Image 2", 
            "price" => "$199", 
            "desc" => "Description 2",
            "image" => "images/image2.jpg"),
"Image 6"   => array("name" => "Image 6", 
            "price" => "$199", 
            "desc" => "Description 6",
            "image" => "images/image6.jpg")
);

echo json_encode($images); 
```

我的 jQuery 函数如下所示：

```
$(document).ready(function(){
var $div = $("#thumbs");
$.getJSON('getProducts.php', function(data) {
    jQuery.each(data, function(key, val){
        $("<img />").attr("src", val).appendTo($div);
    });
});
}); 
```

当我运行它时，我只会得到损坏的图像链接。萤火虫显示：

```
"NetworkError: 404 Not Found - http://localhost/wpdhw8/%5Bobject%20Object%5D" 
```

在此先感谢您的帮助！

哦，我已将图像移至根目录，因此我从文件名中取出了“图像/”。

为了回答我自己的问题，我通过添加以下行为图像添加了标题：

```
$($div).append('<p>' + val.name + '</p>'); 
```

就在：

```
$("<img />").attr("src", val.image).appendTo($div); 
```

我真的很感谢这个网站上的帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:48:23.600

线

```
$("<img />").attr("src", val).appendTo($div); 
```

应该

```
$div.append('<img src="'+val+'" />'); 
```

**编辑**

哎呀误读了

对于任一行更改`val`为`val.image`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:53:22.813

它应该是：

```
$.getJSON('getProducts.php', function(data) {
    jQuery.each(data, function(key, val){
        $("<img />").attr("src", val.image).appendTo($div);
    });
}); 
```

每个`val`都是一个对象，例如：

```
{ name: "Image 1",
  price: "$299",
  desc: "Description 1",
  image: "images/image1.jpg"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:46:34.437

您的网址“getProducts.php”不正确

也许它需要是'/getProducts.php'或有其他部分......从你的url如何删除域部分......

```
http://localhost.local/getProducts.php => /getProducts.php 
```

404 Not found - 表示无法找到您设置的页面。

# css - css box-flex 显示错误的 Internet Explorer

> ID：13063037
> 
> 赞同：0
> 
> 时间：2012-10-25T06:43:29.757
> 
> 标签：css

我连续三个 div 都充满了内容。2 个外部 div 使用 css 中的框拉伸，这实现了两个外部 div 缩小，中间 div 在缩小屏幕时保持相同的宽度。这个技巧在 Safari、Firefox 和 Chrome 中非常有效。但由于某种原因，它在 Internet Explorer 中显得格格不入。有人知道 Internet Explorer 的技巧吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:56:03.173

早于 10 的 IE 版本不支持灵活框模型。您可以尝试使用 polyfill：[https ://github.com/doctyper/flexie](https://github.com/doctyper/flexie)

# jquery - 关闭对话框时的效果

> ID：13063041
> 
> 赞同：0
> 
> 时间：2012-10-25T06:43:55.840
> 
> 标签：jquery

我正在使用`Jquery Dialog`盒子。在这个我有提交和关闭按钮。我想为关闭按钮放置像[这里这样的 UI 效果。](http://jqueryui.com/effect/)

我的`Dialog box`代码如下，

```
$(document).ready(function() {
    $("#disableDivForm").dialog({
        autoOpen: true,
        position: 'center',
        height: 187,
        width: 472,
        modal: true,
        show: {
            effect: 'explode',
            duration: 400
        }
    });
    $('#body').show();
});​ 
```

里面有一个关闭按钮`disableDivForm`。代码如下，

```
<div id="disableDivForm" name="disableDivForm">
    <input type="submit" id="cancelID" value="Close" onClick="return cancel()" class="but-bl2"/>
</div>

function cancel()
{
    document.disableForm.action=" - myAction goes here - "; 
    document.disableForm.method="POST";
    document.disableForm.submit(); 
} 
```

我尝试了下面的代码来实现效果。

```
$(document).ready(function(){
    $("#cancelID").click(function(){
       hide: {effect: 'explode', duration: 400}
    });
}); 
```

但是，它不起作用。我的对话框本身没有打开。没有 Java 脚本错误。我已经在里面放置了 .click 函数的代码`<div id="disableDivForm">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:22:38.697

check this fiddle out [jsfiddle](http://jsfiddle.net/2vFCC/) , might be what you want. you can add hide effect in during initializing of dialog box

```
 $("#disableDivForm").dialog({
    autoOpen: true,
    position: 'center',
    height: 187,
    width: 472,
    modal: true,
    show: {
        effect: 'explode',
        duration: 400
    },
    hide: {
        effect: 'explode',
        duration: 400
    }
}); 
```

# java - NoSuchElementException

> ID：13063047
> 
> 赞同：2
> 
> 时间：2012-10-25T06:44:29.560
> 
> 标签：java

程序成功运行，但是一旦提示用户在最后使用封装整个程序的 while 循环再次重新运行程序，它就会抛出 NoSuchElementException 并且尽管阅读了这个论坛上的几个线程，但我不明白为什么。任何帮助将非常感激。

```
import java.util.Scanner;
import java.util.Date;
import java.text.SimpleDateFormat;
import java.text.NumberFormat;

public class billingStatement {

public static void main(String[] args) {
    String again="y";
    while (again.equalsIgnoreCase("y"))
    {
        //Declare Variables
        String userName="", dateIn="";
        int month=0, date=0, year=0;

        // Billing Statement Header
        System.out.println("Southwest Power and Light");
        System.out.println("Billing Statement");

        //Date, Create Template, Print Result
        Date now = new Date();              
        SimpleDateFormat todaysDate = new SimpleDateFormat("MM/dd/yyyy");
        System.out.println("\n"+"Date: " + todaysDate.format(now));

        //Initialize Scanner
        Scanner scan = new Scanner(System.in);

        boolean validName = false;
        while (validName!= true)
        {
            System.out.print("Please enter your name (Last, First): ");
            try
            {
                userName = scan.nextLine();
                validName = true;
            }
            catch (Exception invalidName)
            {
                int loopCount=0;
                loopCount++;
                System.out.println("Unexpected input type. Please enter a valid name.");
                if (loopCount==2) validName = true;
            }
        }

        // Loop prompt until input's valid
        boolean validDate = false;
        while (!validDate)
        {
            try
            {
                System.out.print("Meter reading date (mm/dd/yyyy): ");
                dateIn = scan.nextLine();               
                SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
                sdf.setLenient(false);
                sdf.parse(dateIn);
                validDate = true;
            }
            catch (Exception invalidDate)
            {
                System.out.println("Unexpected input. Please enter a valid date.");
            }
        }

        // Use Delimiter
        Scanner scanDate = new Scanner(dateIn);
        scanDate.useDelimiter("/");
        month = scanDate.nextInt();
        date = scanDate.nextInt();
        year = scanDate.nextInt();
        scanDate.close();

        //Meter Reading User Input
        double powerUsed = 0;
        boolean validDouble = false;
        while (!validDouble)
        {
            try
            {
                Scanner scanD = new Scanner(System.in);
                System.out.print("Electricity used (KW): ");
                powerUsed = scanD.nextDouble();
                validDouble = true;
                scanD.close();
            }
            catch (Exception invalidDouble)
            {
                int loopCount=0;
                loopCount++;
                System.out.println("Unexpected input. Please enter a valid number.");
                if (loopCount==2) validDouble = true;
            }
        }

        //Calculate base rate via Meter Read Date
        double baseRate = 0;
        switch (month)
        {
            case 1: //January
                baseRate=0.10;break;
            case 2: //February
                baseRate=0.10;break;
            case 3: //March
                baseRate=0.12;break;
            case 4: //April
                baseRate=0.12;break;
            case 5: //May
                baseRate=0.12;break;
            case 6: //June
                baseRate=0.15;break;
            case 7: //July
                baseRate=0.15;break;
            case 8: //August
                baseRate=0.15;break;
            case 9: //September
                baseRate=0.15;break;
            case 10: //October
                baseRate=0.15;break;
            case 11: //November
                baseRate=0.15;break;
            case 12: //December
                baseRate=0.10;break;
        }

        //Currency Format
        NumberFormat currency = NumberFormat.getCurrencyInstance();

        double totalCharge = 0;
        double baseLineCharge = 0;
        double baseCharge = (baseRate*powerUsed);           
        if(powerUsed<350)
        {
            baseLineCharge = powerUsed*baseRate;
        }
        if(powerUsed>350)
        {
            baseLineCharge = 350*baseRate;
        }       
        //Calculate Total Monthly Charge for Power>350 KW
        if (powerUsed<350)
        {
            totalCharge = baseCharge;
        }
        //Calculate Total Monthly Charge for 500 KW>Power>350 KW
        if (powerUsed>350 & powerUsed<500)
        {
            totalCharge = ((baseRate*350)+((powerUsed-350)*(baseRate*1.10)));
        }
        //Calculate Total Monthly Charge for Power>500 KW
        if (powerUsed>500)
        {
            double pieceChargeOne = (baseRate*350);
            //System.out.println(currency.format(pieceChargeOne));
            double pieceChargeTwo = ((150)*(baseRate*1.10));
            //System.out.println(currency.format(pieceChargeTwo));
            double pieceChargeThree = ((powerUsed-500)*(baseRate*1.25));
            //System.out.println(currency.format(pieceChargeThree));
            totalCharge = pieceChargeOne+pieceChargeTwo+pieceChargeThree;               
        }               

        //Print Output
        System.out.println("\nName: "+ userName);
        System.out.println("Meter Reading Date: " + month + "/" + date + "/" + year);
        System.out.println("Electricity Used (KW): "+ powerUsed);

        System.out.println("Baseline Charge: "+ currency.format(baseLineCharge));
        //System.out.println("Over base Charge: "+currency.format(((powerUsed-350)*(baseRate*1.10))));
        System.out.println("Total Amount Due: "+ currency.format(totalCharge));

        // Prompt user for calculating another bill
        Scanner scanAgain = new Scanner(System.in);
        System.out.print("Calculate another bill (y/n)? ");
        again = scanAgain.nextLine();

        scanAgain.close();
        scan.close();
    }
} 
```

}

这是创建 NoSuchElementException 的块。scanAgain 扫描仪不会读取其上方的 System.out.print 行。不开心的一天。

```
 // Prompt user for calculating another bill
        Scanner scanAgain = new Scanner(System.in);
        System.out.print("Calculate another bill (y/n)? ");
        again = scanAgain.nextLine();

        scanAgain.close();
        scan.close();
    }
} 
```

}

例外

```
Exception in thread "main" java.util.NoSuchElementException:
No line found at java.util.Scanner.nextLine(Unknown Source) at 
billingStatement.main(billingStatement.java:173) – 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:50:35.410

关闭（例如`scanDate.close();`）也`Scanner`关闭底层流（`System.in`）。当您尚未完成从流中读取时，您不应该这样做。

# visual-studio-2010 - 什么是致命的解决方案：.gitconfig 中“color.diff”的配置值错误？

> ID：13063048
> 
> 赞同：3
> 
> 时间：2012-10-25T06:44:34.090
> 
> 标签：visual-studio-2010, git

我的实际问题是我在我的 VS2010 项目中创建了 git 存储库，当我想提交解决方案时，这个错误发生了“'color.diff' 的错误配置值”我检查了 .gitconfig 但没有 color.diff 值. 我也从互联网和[Git Source Control Provider](http://gitscc.codeplex.com)进行了搜索，但找不到解决我问题的确切方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:10:04.967

尝试使用 Git Bash 后我已经解决了我的问题 :) 显示错误是因为我的 color.diff 值没有设置颜色，在将其设置为 true 并将其赋予颜色后，我解决了我的问题。

这是设置 color.diff 的命令。

```
$ git config --global color.diff.meta “blue bold” 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:01:07.623

正如您已经意识到的那样，之所以会发生此错误，是因为配置文件中的某处存在“错误”值（可能是拼写错误或忘记换行符）。

有两个地方可能会发生这种情况：

*   **在您的全局 gitconfig**中 - 在这种情况下，错误发生在所有项目中。[这个答案涵盖了如何找到文件](https://stackoverflow.com/questions/2114111/where-does-git-config-global-get-written-to)
*   **在您的本地 gitconfig** - 如果错误仅发生在该单个项目中。它可以在你的项目目录下找到`.git/config`

使用标准文本编辑器打开此文件，或者您可以使用以下行之一从命令行自动执行此操作（分别用于全局和本地配置文件）：

```
git config --global --edit
git config --edit 
```

找到如下所示的代码块：

```
[color]
    diff = auto
    status = auto
    branch = auto 
```

在我的情况下，`diff`设置为`auto`. 仔细检查您的值是什么，然后将其更改为`auto`或完全删除该行以使用默认值。

# android - 布局位于状态栏下方，这是我用于布局的代码

> ID：13063052
> 
> 赞同：1
> 
> 时间：2012-10-25T06:44:49.857
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/fabb9ccb60661f965b37ffb985240e7e.png)

我在我的应用程序中遇到问题，我必须将从相机拍摄的图像设置为画布中的背景。我正在调用默认相机拍照。拍照后，会显示所拍图像的预览，并询问我们是否保存，如果同时按下保存和主页，我们将进入主屏幕。在此之后，我将从应用程序启动我的应用程序。打开时，放置画布和按钮的布局位于状态栏上方。

**编辑：**

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/background"
    android:src="@drawable/dbg_bg" >

    <RelativeLayout
        android:id="@+id/dd_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:id="@+id/header"
            android:layout_width="310dip"
            android:layout_height="35dip"
            android:layout_alignParentTop="true" >

            <ImageButton
                android:id="@+id/tools"
                android:layout_width="25dip"
                android:layout_height="21dip"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="15dip"
                android:layout_marginTop="8dip"
                android:background="@drawable/ic_launcher"
                android:tag="3"
                 />

        </RelativeLayout>

        <View
            android:id="@+id/border"
            android:layout_width="fill_parent"
            android:layout_height="2dip"
            android:layout_below="@id/header"
            android:background="@drawable/border" />

        <RelativeLayout
            android:id="@+id/footer"
            android:layout_width="fill_parent"
            android:layout_height="35dip"
            android:layout_alignParentBottom="true" >

            <ImageButton
                android:id="@+id/imgbtn"
                android:layout_width="21dip"
                android:layout_height="21dip"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="5dip"
                android:layout_marginTop="8dip"
                android:background="@drawable/ic_launcher"
                android:tag="1"
                android:visibility="invisible" />

            <ImageButton
                android:id="@+id/pt_imgbtn"
                android:layout_width="24dip"
                android:layout_height="19dip"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="2dip"
                android:layout_marginRight="15dip"
                android:layout_marginTop="8dip"
                android:background="@drawable/ic_launcher"
                android:tag="4"
                android:visibility="invisible" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@id/footer"
            android:layout_below="@id/border" >

            <com.xyz.ddd.canvas.SurfaceCanvas
                android:id="@+id/surfacecanvas"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />
        </RelativeLayout>

        <View
            android:id="@+id/footerborder"
            android:layout_width="fill_parent"
            android:layout_height="2dip"
            android:layout_above="@id/footer"
            android:background="@drawable/ic_launcher" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:42:50.693

为什么你的 src 和 background 都有`RelativeLayout`？

删除不需要的那个。

```
android:background="@color/background"
android:src="@drawable/dbg_bg" 
```

希望这可以帮助。

# c++ - 是否存在 LibC 操作系统？

> ID：13063055
> 
> 赞同：32
> 
> 时间：2012-10-25T06:45:01.813
> 
> 标签：c++, c, operating-system, embedded, osdev

我记得听说过一个嵌入式操作系统，它本质上只是 libc（也许它支持 c++）。它没有内核、管道或您期望从操作系统获得的任何其他东西。我尝试[在维基百科中](http://en.wikipedia.org/wiki/List_of_operating_systems#Embedded)查找它，但我没有看到它列出。

这样的操作系统存在吗？是否有支持仅终端或 C/C++ + (tcp) 套接字在 VM 外部通信的操作系统？作为玩具，这对我很有用。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-25T07:44:41.730

The reason that you're not finding a name for this is that it's not an operating system -- it's the absence of an operating system. Often this is called something like "bare-metal" programming.

The general idea of bare-metal programming is that there is a small bit of general-purpose code -- a ["bootloader"](http://en.wikipedia.org/wiki/Bootloader#Boot_loader) -- that sets up the memory controller and other hardware things on the board, and then that transfers control to your program. (Operating systems also have bootloaders, so in that sense your program is *replacing* the operating system.) [Uboot](http://www.denx.de/wiki/U-Boot) is a fairly common open-source bootloader, so that might be a good place to start looking for information.

One of the tricky bits about bare-metal programming is that, since there isn't an operating system in place to handle any of the hardware communication, you have to think about "what does a printf actually mean as far as what data goes to what peripheral?" and "how do I make it go there?" Again, some bootloaders provide support for this sort of thing, though it's not always trivial to connect it all up. Again, Uboot is a good example.

Meanwhile, the C library itself is actually going to be provided by your compiler, rather than the bootloader.

(I should also add, as a name note: The company I work for makes a series of bare-metal and Linux compilers, known as [Sourcery CodeBench](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/). For CodeBench, the bare-metal versions are generally named after the ABI specification they use for linking programs, so the "ELF" or "EABI" versions are all bare-metal compilers, and I think that's a pretty common way of referring to this sort of thing, so you'll see that sort of name around as well.)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T06:52:54.860

我认为你的一些假设有问题。您说操作系统不需要内核是正确的，但是任何可以运行应用程序的东西都可以在 libc 中静态编译。

见：[http ://www.superfrink.net/athenaeum/OS-FAQ/os-faq-libc.html](http://www.superfrink.net/athenaeum/OS-FAQ/os-faq-libc.html)

例如，只要您为您的操作系统编译该函数，就可以使用 printf。所以，只要你为它构建 libc，你就可以使用 MenuetOS。

现在在[http://pdclib.rootdirectory.de/](http://pdclib.rootdirectory.de/)有一个小版本的 libc ，一些嵌入式系统可以使用它。

这样，任何小型操作系统都可以被认为是运行 libc 的操作系统。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-25T06:55:27.263

基本上不需要内核，但如果您正在搜索最小的操作系统[http://wiki.osdev.org/Projects](http://wiki.osdev.org/Projects)可能是一个起点。他们有很多爱好和半专业的项目，它们支持基本的东西并且占用空间很小。还有一些很好的教程可以自己编写。您还需要考虑网络或串行 I/O 等简单事物需要驱动程序等。

此外，Linux 内核总是一个好的开始（前段时间有一个 linux 发行版，只有大约 20MB）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-25T08:44:37.883

有很多这样的。

大多数专业实时操作系统 (RTOS) 都带有或多或少完整的 C 库实现，甚至通常用于 C++（例如 Keil MDK、µItron）。尽管在实践中您通常倾向于避免使用它，因为它使用了太多可用资源。

RTOS 通常有一个非常小的内核，不支持文件或管道。相反，它们倾向于以很少的开销支持任务、计时器、队列和事件标志。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-25T06:57:39.273

Libcc 不是操作系统。尽管 OS 的定义有些模糊，但它确实包含的不仅仅是 API。它需要内存管理、进程调度等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-16T14:13:30.820

**Newlib 最小可运行示例**

[https://sourceware.org/newlib/](https://sourceware.org/newlib/)

使用 Newlib，您可以为裸机平台实现自己的系统调用。

在这里，我提供了一个[高度自动化且记录在案的示例，该示例显示了使用在 QEMU aarch64 中运行的 crosstool-NG 构建的 Newlib](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/8815312cad053d0284c4d91bfbf36a1e9ea207af#baremetal-setup-getting-started)。

例如，在上面的示例中，我们有一个示例程序[`exit.c`](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/8815312cad053d0284c4d91bfbf36a1e9ea207af/baremetal/exit.c)：

```
#include <stdio.h>
#include <stdlib.h>

void main(void) {
    exit(0);
} 
```

在一个单独的 C 文件[`common.c`](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/8815312cad053d0284c4d91bfbf36a1e9ea207af/baremetal/lib/common.c#L62)中，我们`exit`使用[ARM 半主机](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0471g/Bgbjjgij.html)实现：

```
void _exit(int status) {
    __asm__ __volatile__ ("mov r0, #0x18; ldr r1, =#0x20026; svc 0x00123456");
} 
```

您将实现的其他典型系统调用是：

*   `write`将结果输出到主机。这可以通过以下方式完成：

    *   更多半主机
    *   UART硬件
*   `brk`为`malloc`.

    在裸机上很容易，因为我们不必关心分页！

TODO 我想知道在不进入像[Zephyr](https://en.wikipedia.org/wiki/Zephyr_(operating_system))或[FreeRTOS](https://en.wikipedia.org/wiki/FreeRTOS)这样的完整[RTOS](https://en.wikipedia.org/wiki/Real-time_operating_system)的情况下实现[抢先调度系统调用](https://stackoverflow.com/questions/980999/what-does-multicore-assembly-language-look-like/33651438#33651438)执行是否现实。

Newlib 很酷的一点是，它为您实现了所有非操作系统特定的东西`string.h`，并让您只实现操作系统存根。

此外，您不必实现所有存根，只需实现您需要的存根即可。例如，如果您的程序只需要`exit`，那么您不必提供`print`. Newlib 通过将所有系统调用的虚拟无操作实现作为弱符号来实现这一点。

Newlib 源代码树已经有一些实现，包括 ARM 半主机实现[`newlib/libc/sys/arm`](https://sourceware.org/git/gitweb.cgi?p=newlib-cygwin.git;a=tree;f=newlib/libc/sys/arm/newlib/libc;h=9d1deff696bce729b579ca6890044b5b1e8c0cae;hb=HEAD)，但在大多数情况下，您必须自己实现。然而，它确实为这项任务提供了坚实的基础。

设置 Newlib 的最简单方法是使用 crosstool-NG 构建您自己的编译器，您只需告诉它您想使用 Newlib 作为 C 库。[我的安装程序使用这个脚本](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/8815312cad053d0284c4d91bfbf36a1e9ea207af/build-crosstool-ng)自动为你处理，它使用了存在的 newlib 配置[`crosstool_ng_config`](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/8815312cad053d0284c4d91bfbf36a1e9ea207af/crosstool_ng_config)。

C++ 理论上也应该可以工作，但[我最初的尝试是不成功的](https://cirosantilli.com/linux-kernel-module-cheat/#baremetal-cpp)。

# matlab - 在 MATLAB 中实现显式欧拉方法（用于 ODE）

> ID：13063060
> 
> 赞同：-1
> 
> 时间：2012-10-25T06:45:37.597
> 
> 标签：matlab, math, differential-equations

我到处搜索，我找不到任何东西。

首先，让我说我从未使用过 Mat Lab，所以我不知道我在做什么。

我尝试了几件事，但没有一个奏效。显然 y(0)=2 试图创建一个值为 2 的 0 个单位的列表？

无论如何，有人可以帮助我吗？我需要在 Mat Lab 中编写一个灵活的欧拉方法方程来求解一些这样的方程。

1) y' = 5-3sqrt(y) ; y(0)=2

当 h= .1 , .05 , .025, .01 && t =.5 ,1 , 1.5 , 2 , 2.5 ,3

我不知道我在做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:05:29.347

让我们假设以恒定的时间步长来实现该方法，例如`dt>0`。如果我们想把方程积分到一个时间`T>0`，我们考虑一个时间离散化

```
tt = 0:dt:T; 
```

我们最好为速度目的预先分配我们的解决方案向量，即

```
yy=zeros(1,length(tt)); 
```

`yy`将包含我们将产生的解决方案的一阶时间近似（即，很少滥用符号，

```
yy(1)==y_r(t=0) 
```

和

```
yy(end)==y_r(t=T) + global error, 
```

其中函数`y_r=y_r(t)` 是我们真正的解决方案）。

*假设，我们有一个范式*的一阶 ODE ，即

```
 dy_r / dt = f(y_r;t) 
```

和一个初始数据

```
 y_r(t=0)=y_0 
```

（即我们有一个柯西问题）。因此，我们应该首先初始化我们的解向量

```
 yy(1) = y_0; 
```

然后，我们可以找到未来的解决方案，即

```
 N = length(tt);
  for t = 2 : N        // we should look at future times, thus we start from 2
                       // NOTE: this is first order explicit Euler scheme.
       yy(t) = yy(t-1) + dt*f(yy(t-1),t);
  end 
```

我们完成了。我们现在可以绘制解决方案。

```
 plot(tt,yy); 
```

* * *

现在的重点是：您对*一阶准确率***满意**吗？

 *想想如果你使用这个方案来解决*哈密顿*问题（比如简单的谐振子），它会给你的系统带来人为的激励（正确地，你可以看到偏离正确的哈密顿轨道）。简而言之，不久之后，您的解决方案**完全是人工**的。

事实上，当你解决实际问题时，你必须仔细考虑你的问题和你的物理，然后选择一个合适的数值方案来解决你的方程。很快，您可能会被要求实施更准确的方案，例如*Runge Kutta*（您可以更好地信任它，但只是一点点，至少在其原始形式中）。*

# php - PHP：使用特殊字符正确比较字符串

> ID：13063062
> 
> 赞同：0
> 
> 时间：2012-10-25T06:45:50.963
> 
> 标签：php, mysql, character-encoding, special-characters, collation

> **可能重复：**
> [PHP：未找到包含特殊字符的数组键](https://stackoverflow.com/questions/13050767/php-array-key-containing-special-character-not-found)

我正在比较字符串以确定字符串的相应数字。一组字符串存储在 MySQL 数据库中，另一组字符串存储为 php.ini 中数组的键。

尝试查找以下字符串时，在数组中找不到它。“孩子上学前班/托儿所/托儿所/日间妈妈”

有关代码的更多信息，请参阅[前一个问题](https://stackoverflow.com/questions/13050767/php-array-key-containing-special-character-not-found)，该问题导致我进行以下测试。

按照建议进行十六进制转储后，我得到以下结果

来自 MySQL 数据库：

```
43 68 69 6c 64 20 61 74 74 65 6e 64 69 6e 67 20 70 72 65 2d 73 63 68 6f 6f 6c 2f 6e 75 72 73 65 72 79 20 73 63 68 6f 6f 6c 2f 63 72 e8 63 68 65 2f 64 61 79 2d 6d 6f 74 68 65 72 
```

从 php 中的字符串：

```
43 68 69 6c 64 20 61 74 74 65 6e 64 69 6e 67 20 70 72 65 2d 73 63 68 6f 6f 6c 2f 6e 75 72 73 65 72 79 20 73 63 68 6f 6f 6c 2f 63 72 c3 a8 63 68 65 2f 64 61 79 2d 6d 6f 74 68 65 72 
```

区别在于 MySQL 数据库中的“E8”与“C3A8”或“è”与 php 字符串中的“Ã¨”。

那么我该如何确保硬编码的 php 数组键字符仍然是“è”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:02:03.040

您应该在 PHP 和 MySQL 中使用相同的编码。

如果您的 PHP 字符串是 UTF-8 编码的，那么您的表`charset`必须是`utf8`并且`collation`应该是`utf8_general_ci`或`utf8_unicode_ci`。此外，您必须告诉 MySQL 您也想要以 UTF-8 格式查询的结果。以下是实现此目的的三种方法：

1.  **连接查询：**`SET NAMES utf8`连接到 MySQL 后立即执行。
2.  **使用 PDO：** `$pdo = new PDO($dsn, $user, $password, array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8');`这与上面基本相同，但由 PDO 自动执行。
3.  **永久 (my.cnf)：**这将为所有连接设置 UTF-8 隐式。只需添加：`init-connect='SET NAMES utf8'`到 MySQL 的配置文件`my.cnf`。

我个人使用第三个选项，但在共享环境中我会选择第二个。

# hdf5 - `pip install tables` 失败并出现错误:: 找不到本地 HDF5 安装

> ID：13063064
> 
> 赞同：7
> 
> 时间：2012-10-25T06:46:02.717
> 
> 标签：hdf5, pytables

这是我尝试在 Mac OSX 上安装 PyTables 时收到的详细错误消息。

```
calvin$ pip install tables
Downloading/unpacking tables
  Downloading tables-2.4.0.tar.gz (8.9MB): 8.9MB downloaded
  Running setup.py egg_info for package tables
    /var/folders/kl/_52jng9s6sl2knv_0jds9w140000gn/T/H5close2zXB1J.c:1:1: warning: type specifier missing, defaults to 'int' [-Wimplicit-int]
    main (int argc, char **argv) {
    ^~~~
    /var/folders/kl/_52jng9s6sl2knv_0jds9w140000gn/T/H5close2zXB1J.c:2:5: warning: implicit declaration of function 'H5close' is invalid in C99 [-Wimplicit-function-declaration]
        H5close();
        ^
    2 warnings generated.
    ld: library not found for -lhdf5
    clang: error: linker command failed with exit code 1 (use -v to see invocation)
    * Found numpy 1.6.2 package installed.
    * Found numexpr 2.0.1 package installed.
    * Found Cython 0.17.1 package installed.
    ld: library not found for -lhdf5
    clang: error: linker command failed with exit code 1 (use -v to see invocation)
    .. ERROR:: Could not find a local HDF5 installation.
       You may need to explicitly state where your local HDF5 headers and
       library can be found by setting the ``HDF5_DIR`` environment
       variable or by using the ``--hdf5`` command-line option.
    Complete output from command python setup.py egg_info:
    /var/folders/kl/_52jng9s6sl2knv_0jds9w140000gn/T/H5close2zXB1J.c:1:1: warning: type specifier missing, defaults to 'int' [-Wimplicit-int]

main (int argc, char **argv) {

^~~~

/var/folders/kl/_52jng9s6sl2knv_0jds9w140000gn/T/H5close2zXB1J.c:2:5: warning: implicit declaration of function 'H5close' is invalid in C99 [-Wimplicit-function-declaration]

    H5close();

    ^

2 warnings generated.

ld: library not found for -lhdf5

clang: error: linker command failed with exit code 1 (use -v to see invocation)

* Found numpy 1.6.2 package installed.

* Found numexpr 2.0.1 package installed.

* Found Cython 0.17.1 package installed.

ld: library not found for -lhdf5

clang: error: linker command failed with exit code 1 (use -v to see invocation)

.. ERROR:: Could not find a local HDF5 installation.

   You may need to explicitly state where your local HDF5 headers and

   library can be found by setting the ``HDF5_DIR`` environment

   variable or by using the ``--hdf5`` command-line option.

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /Users/calvin/.virtualenvs/pythontrg/build/tables
Storing complete log in /Users/calvin/.pip/pip.log 
```

我的 hdf5-18 库是通过 macports 安装的。他们可以在这里找到 -

```
calvin$ port content hdf5-18
Port hdf5-18 contains:
  /opt/local/bin/gif2h5
  /opt/local/bin/h52gif
  /opt/local/bin/h5c++
  /opt/local/bin/h5cc
  /opt/local/bin/h5copy
  /opt/local/bin/h5debug
  /opt/local/bin/h5diff
  /opt/local/bin/h5dump
  /opt/local/bin/h5import
  /opt/local/bin/h5jam
  /opt/local/bin/h5ls
  /opt/local/bin/h5mkgrp
  /opt/local/bin/h5perf_serial
  /opt/local/bin/h5redeploy
  /opt/local/bin/h5repack
  /opt/local/bin/h5repart
  /opt/local/bin/h5stat
  /opt/local/bin/h5unjam
  /opt/local/include/H5ACpublic.h
  /opt/local/include/H5AbstractDs.h
  /opt/local/include/H5Apublic.h
  /opt/local/include/H5ArrayType.h
  /opt/local/include/H5AtomType.h
  /opt/local/include/H5Attribute.h
  /opt/local/include/H5Classes.h
  /opt/local/include/H5CommonFG.h
  /opt/local/include/H5CompType.h
  /opt/local/include/H5Cpp.h
  /opt/local/include/H5CppDoc.h
  /opt/local/include/H5Cpublic.h
  /opt/local/include/H5DSpublic.h
  /opt/local/include/H5DataSet.h
  /opt/local/include/H5DataSpace.h
  /opt/local/include/H5DataType.h
  /opt/local/include/H5DcreatProp.h
  /opt/local/include/H5Dpublic.h
  /opt/local/include/H5DxferProp.h
  /opt/local/include/H5EnumType.h
  /opt/local/include/H5Epubgen.h
  /opt/local/include/H5Epublic.h
  /opt/local/include/H5Exception.h
  /opt/local/include/H5FDcore.h
  /opt/local/include/H5FDdirect.h
  /opt/local/include/H5FDfamily.h
  /opt/local/include/H5FDlog.h
  /opt/local/include/H5FDmpi.h
  /opt/local/include/H5FDmpio.h
  /opt/local/include/H5FDmpiposix.h
  /opt/local/include/H5FDmulti.h
  /opt/local/include/H5FDpublic.h
  /opt/local/include/H5FDsec2.h
  /opt/local/include/H5FDstdio.h
  /opt/local/include/H5FaccProp.h
  /opt/local/include/H5FcreatProp.h
  /opt/local/include/H5File.h
  /opt/local/include/H5FloatType.h
  /opt/local/include/H5Fpublic.h
  /opt/local/include/H5Gpublic.h
  /opt/local/include/H5Group.h
  /opt/local/include/H5IMpublic.h
  /opt/local/include/H5IdComponent.h
  /opt/local/include/H5Include.h
  /opt/local/include/H5IntType.h
  /opt/local/include/H5Ipublic.h
  /opt/local/include/H5LTpublic.h
  /opt/local/include/H5Library.h
  /opt/local/include/H5Lpublic.h
  /opt/local/include/H5MMpublic.h
  /opt/local/include/H5Object.h
  /opt/local/include/H5Opublic.h
  /opt/local/include/H5PTpublic.h
  /opt/local/include/H5PacketTable.h
  /opt/local/include/H5Ppublic.h
  /opt/local/include/H5PredType.h
  /opt/local/include/H5PropList.h
  /opt/local/include/H5Rpublic.h
  /opt/local/include/H5Spublic.h
  /opt/local/include/H5StrType.h
  /opt/local/include/H5TBpublic.h
  /opt/local/include/H5Tpublic.h
  /opt/local/include/H5VarLenType.h
  /opt/local/include/H5Zpublic.h
  /opt/local/include/H5api_adpt.h
  /opt/local/include/H5overflow.h
  /opt/local/include/H5pubconf.h
  /opt/local/include/H5public.h
  /opt/local/include/H5version.h
  /opt/local/include/hdf5.h
  /opt/local/include/hdf5_hl.h
  /opt/local/lib/libhdf5.7.dylib
  /opt/local/lib/libhdf5.a
  /opt/local/lib/libhdf5.dylib
  /opt/local/lib/libhdf5.la
  /opt/local/lib/libhdf5.settings
  /opt/local/lib/libhdf5_cpp.7.dylib
  /opt/local/lib/libhdf5_cpp.a
  /opt/local/lib/libhdf5_cpp.dylib
  /opt/local/lib/libhdf5_cpp.la
  /opt/local/lib/libhdf5_hl.7.dylib
  /opt/local/lib/libhdf5_hl.a
  /opt/local/lib/libhdf5_hl.dylib
  /opt/local/lib/libhdf5_hl.la
  /opt/local/lib/libhdf5_hl_cpp.7.dylib
  /opt/local/lib/libhdf5_hl_cpp.a
  /opt/local/lib/libhdf5_hl_cpp.dylib
  /opt/local/lib/libhdf5_hl_cpp.la
  /opt/local/share/hdf5_examples/README
  /opt/local/share/hdf5_examples/c++/chunks.cpp
  /opt/local/share/hdf5_examples/c++/compound.cpp
  /opt/local/share/hdf5_examples/c++/create.cpp
  /opt/local/share/hdf5_examples/c++/extend_ds.cpp
  /opt/local/share/hdf5_examples/c++/h5group.cpp
  /opt/local/share/hdf5_examples/c++/readdata.cpp
  /opt/local/share/hdf5_examples/c++/run-c++-ex.sh
  /opt/local/share/hdf5_examples/c++/writedata.cpp
  /opt/local/share/hdf5_examples/c/h5_attribute.c
  /opt/local/share/hdf5_examples/c/h5_chunk_read.c
  /opt/local/share/hdf5_examples/c/h5_compound.c
  /opt/local/share/hdf5_examples/c/h5_drivers.c
  /opt/local/share/hdf5_examples/c/h5_elink_unix2win.c
  /opt/local/share/hdf5_examples/c/h5_extend_write.c
  /opt/local/share/hdf5_examples/c/h5_extlink.c
  /opt/local/share/hdf5_examples/c/h5_group.c
  /opt/local/share/hdf5_examples/c/h5_mount.c
  /opt/local/share/hdf5_examples/c/h5_read.c
  /opt/local/share/hdf5_examples/c/h5_ref2reg.c
  /opt/local/share/hdf5_examples/c/h5_reference.c
  /opt/local/share/hdf5_examples/c/h5_select.c
  /opt/local/share/hdf5_examples/c/h5_shared_mesg.c
  /opt/local/share/hdf5_examples/c/h5_write.c
  /opt/local/share/hdf5_examples/c/ph5example.c
  /opt/local/share/hdf5_examples/c/run-c-ex.sh
  /opt/local/share/hdf5_examples/hl/c++/ptExampleFL.cpp
  /opt/local/share/hdf5_examples/hl/c++/ptExampleVL.cpp
  /opt/local/share/hdf5_examples/hl/c++/run-hlc++-ex.sh
  /opt/local/share/hdf5_examples/hl/c/ex_ds1.c
  /opt/local/share/hdf5_examples/hl/c/ex_image1.c
  /opt/local/share/hdf5_examples/hl/c/ex_image2.c
  /opt/local/share/hdf5_examples/hl/c/ex_lite1.c
  /opt/local/share/hdf5_examples/hl/c/ex_lite2.c
  /opt/local/share/hdf5_examples/hl/c/ex_lite3.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_01.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_02.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_03.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_04.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_05.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_06.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_07.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_08.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_09.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_10.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_11.c
  /opt/local/share/hdf5_examples/hl/c/ex_table_12.c
  /opt/local/share/hdf5_examples/hl/c/image24pixel.txt
  /opt/local/share/hdf5_examples/hl/c/image8.txt
  /opt/local/share/hdf5_examples/hl/c/pal_rgb.h
  /opt/local/share/hdf5_examples/hl/c/ptExampleFL.c
  /opt/local/share/hdf5_examples/hl/c/ptExampleVL.c
  /opt/local/share/hdf5_examples/hl/c/run-hlc-ex.sh
  /opt/local/share/hdf5_examples/hl/run-hl-ex.sh
  /opt/local/share/hdf5_examples/run-all-ex.sh 
```

如何让我`pip install tables`知道在哪里寻找我的 hdf5 安装？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:35:27.483

因为我使用的是 macports，并且已经安装了 hdf5-18，所以就像指定一样简单

```
export HDF5_DIR=/opt/local 
```

在我的 ~/.bash_profile 文件中并打开一个新选项卡（终端实例），以便此 HDF5_DIR 环境变量可用。

在我的新/刷新终端实例中，`pip install tables`将正确编译并链接到我的 hdf5 库（通过 macports 安装）。耶！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-27T14:37:19.793

我也面临同样的问题。然而，在一个新的 conda 环境中，我可以简单地安装它

`conda install -c conda-forge pytables`.

我想知道如何在包的 setup.cfg 文件中指定这一点。

# vb.net - 在 VB 2012 中设置 ComboBox (DropDownList) 的默认值

> ID：13063065
> 
> 赞同：0
> 
> 时间：2012-10-25T06:46:08.237
> 
> 标签：vb.net

如何在 Visual Basic 2012 中设置 ComboBox (DropDownList) 组件的默认值？我是 Visual Basic 的新手

# android - 显示 Activity 的视图后将图像加载到图库中

> ID：13063066
> 
> 赞同：0
> 
> 时间：2012-10-25T06:46:14.483
> 
> 标签：android, android-layout, user-interface, android-asynctask, android-gallery

我正在开发一个 Android 3.1 平板电脑应用程序。

我需要加载并显示一些存储在本地磁盘中的图像。知道 UI 在图像加载并显示在画廊时冻结，我想知道是否有另一种显示 ui 的方式，当显示 ui 时，显示 a`ProgressDialog`然后开始从磁盘加载并显示每个图像。

我知道如何开始，`Asyntask`但是在显示 ui 后我不知道如何做某事。

我穿上`task.execute()`它`OnCreate`，`OnResume`我看到 UI 冻结。

**显示 UI 后如何执行任务？**

如果您需要查看代码，请检查[Gallery images still load very slow](https://stackoverflow.com/questions/13046076/gallery-images-still-load-very-slow)和[ClassCastException: AbsListView$LayoutParams cannot be cast to Gallery$LayoutParams](https://stackoverflow.com/questions/13044353/classcastexception-abslistviewlayoutparams-cannot-be-cast-to-gallerylayoutpar)问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:50:13.440

首先，您应该有一个带有画廊（或您决定使用的任何东西）和画廊适配器的 Activity。在`getView()`适配器中，您应该加载图像（`getView()`是每个画廊对象的画廊）。对于加载，您应该有这样的方法：

```
public static Bitmap loadFromPath(String file_path) {
   BitmapFactory.Options options = new BitmapFactory.Options();
   options.inDither = false; // disable dithering
   options.inScaled = false; // do not scale bitmap when loading; scale later
   options.inPreferredConfig = Bitmap.Config.ARGB_8888;
   Bitmap backgroundBitmap = null;
    try {
         backgroundBitmap = BitmapFactory.decodeFile(file_path, options);
     } catch (OutOfMemoryError e) {
          e.printStackTrace();
     }
     return backgroundBitmap; 
```

}

这个返回的位图可以用来设置 imageView 的源`getView()`。如果您有问题，请告诉我！

# php - 使用 PHPExcel 写入数据库的更简单方法

> ID：13063073
> 
> 赞同：1
> 
> 时间：2012-10-25T06:46:39.040
> 
> 标签：php, mysql, phpexcel

我是 PHPExcel 新手，第一次使用它。我已经编写了这段代码，但我知道有更好、更快的方法。目前，当我阅读示例电子表格（6000 行，与实际电子表格相同）时，在 localhost 上大约需要 2 分钟。

那么，除了让代码更快更精简之外，有没有办法展示实际的进度呢？

我已经阅读了文档，但仍然对此感到困惑。

这是我目前正在使用的代码：

```
/** Include path **/
set_include_path(get_include_path() . PATH_SEPARATOR . '../local_code/classes/');

/** PHPExcel_IOFactory */
include 'PHPExcel/IOFactory.php';

/**  Define a Read Filter class implementing PHPExcel_Reader_IReadFilter  */ 
class MyReadFilter implements PHPExcel_Reader_IReadFilter 
{ 
    public function readCell($column, $row, $worksheetName = '') { 
        //  read columns A, C, G, H from row 2
        if ($row >= 2) { 
            if (in_array($column,array("A","C","G","H"))) { 
                return true; 
            } 
        } 
        return false; 
    } 
} 

$inputFileName = 'newsheet.xlsx'; // change to uploaded file
$sheetname = 'FULL COMBINED';

$inputFileType = PHPExcel_IOFactory::identify($inputFileName);
$objReader = PHPExcel_IOFactory::createReader($inputFileType);
$objReader->setLoadSheetsOnly($sheetname);
$objReader->setReadFilter(new MyReadFilter()); 

$objPHPExcel = $objReader->load($inputFileName);

$sheetData = $objPHPExcel->getActiveSheet()->toArray(null,false,false,true);
foreach($sheetData as $row => $columns) {
    if($row != 1) {
        $value = '';
        foreach($columns as $cell => $val) {
            if($cell == 'A') {
                $val = trim($val);
            }
            if($cell == 'C') {
                if(substr($val,0,1) != 'B') {
                    $val = trim($val);
                    $temp = substr($val,1);
                    if(is_numeric($temp))
                        $val = (int) $temp;
                }
            }
            if($cell == 'G') {
                $val = ($val * 86400) - 2209075200 - 86400;
            }
            if($cell == 'H') {
                $val == floatval($val);
            }
            if($val != "")
                $value[] = $val;
        }
        $values = "('" . implode("','",$value) . "')";
        mysql_query("INSERT INTO projects_timesheet (employee_code,cost_code,date,hours) VALUES " . $values)or die(mysql_error());
    }
} 
```

## 问题 1

有没有更快的方法来做我现在正在做的事情？我知道分块，但似乎我做错了，因为它不起作用。

## 问题2

有没有办法可以向用户显示脚本当前所在的行？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:18:41.010

您有大约 6k 个 SQL 插入，尝试通过一个 SQL 查询插入所有数据。

# html - div 之间的换行符呈现一个空格。如何从 HTML 中消除它？

> ID：13063076
> 
> 赞同：16
> 
> 时间：2012-10-25T06:47:05.700
> 
> 标签：html, tags, line-breaks

我有以下布局

```
<div style="width:100px">
    <div style="width:50%; display: inline-block;">
        div1
    </div>
    <div style="width:50%; display: inline-block;">
        div2
    </div>
</div> 
```

因为在 html 中，在关闭和打开 div（div1 和 div2）之间有一个换行符，浏览器会添加一个“空格”字符来代替换行符，这会导致第二个 div 显示在第一个 div 下方。

但是，如果您删除 div1 和 div2 之间的 \n ，那么它们会彼此相邻显示，这是预期的行为。

```
<div style="width:100px">
    <div style="width:50%; display: inline-block;">
        div1
    </div><div style="width:50%; display: inline-block;">
        div2
    </div>
</div> 
```

然而，这使得代码看起来很难看。我目前正在使用`<DOCTYPE html>`. 我也尝试过切换到 XHTML，但没有成功。我很确定有一些方法可以消除这种换行行为，有什么想法吗？

仅供参考：我不想在渲染期间使用浮点数或在 php 中解析我的 html 输出以删除换行符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T04:34:31.327

另一种可能的方法是将父元素的字体大小设置为零，然后将子元素的字体大小设置为您需要的任何值。像：

```
#mybar { font-size: 0; }
#mybar span { font-size: 14px; } 
```

但是，您必须注意 font-size = 0 的显示因浏览器而异：[http ://webdesign.about.com/od/fonts/qt/tipfont0.htm](http://webdesign.about.com/od/fonts/qt/tipfont0.htm)

我在 Firefox 中测试并按预期工作。如果我没记错的话，最小字体大小也可以根据浏览器设置，所以可能不一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T06:51:24.860

[使用换行符时删除 HTML 元素之间的空格](https://stackoverflow.com/questions/1097006/removing-whitespace-between-html-elements-when-using-line-breaks)可能重复

您可以使用`float:left`css 样式或仅注释标签之间的空格：

```
<div style="width:100px">
    <div style="width:50%; display: inline-block;">
        div1
    </div><!--
    --><div style="width:50%; display: inline-block;">
        div2
    </div>
</div> 
```

**稍后编辑**：我认为 css 解决方案是设置`font-size:0px;`为容器 div 所以：

```
<div style="width:100px; font-size:0px;">
    <div style="width:50%; display: inline-block; font-size:11px;">
        div1
    </div>
    <div style="width:50%; display: inline-block; font-size:11px;">
        div2
    </div>
</div> 
```

应该解决问题。

在 CSS 上看到[锚标签元素之间不需要的间距](https://stackoverflow.com/questions/6902237/css-unwanted-spacing-between-anchor-tag-elements)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T07:41:58.440

我认为唯一真正好的解决方案是用列表切换 div

```
<ul style="width:100px">
    <li style="width:50%; display: inline-block;">
        div1
    </li>
    <li style="width:50%; display: inline-block;">
        div2
    </li>
</ul> 
```

通常“重置”列表属性会使它看起来像一个 div。好处是浏览器不会在`<li>`项目之间产生空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T04:22:37.460

修复它的一种方法是使用“ **display: table-cell** ”而不是“display:inline-block”。

# joomla - Virtuemart 产品过滤器错误

> ID：13063078
> 
> 赞同：2
> 
> 时间：2012-10-25T06:47:17.427
> 
> 标签：joomla, virtuemart

我正在为我的网站使用 Joomla 1.7 和 measure-mart 2.0.6。在管理员产品过滤器部分有一个日期过滤器部分。这是行不通的。我已经为此搜索了产品模型，但他们没有为处理此问题编写任何条件。有人遇到过这种类型的问题吗？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:00:40.867

自 VM1 以来，搜索过滤器中有很多小东西发生了很大变化。我也注意到许多旧领域缺乏支持。您是否知道元数据也不再可搜索？

就我个人而言，我一直在破解管理员/组件/com_virtuemart/models/product.php 的 sortSearchListQuery() 函数来做我想做的事情。

我强烈建议您在[VM 开发门户](http://forum.virtuemart.net/index.php?board=127.0)上发布该错误。开发社区非常活跃，指出这些错误的人越多，VM for all 就会越好！

# mysql - 在 SQL 中使用 count() = 0

> ID：13063079
> 
> 赞同：-1
> 
> 时间：2012-10-25T06:47:22.483
> 
> 标签：mysql, sql

我正在尝试运行以下查询，但出现错误：

```
select S 
from St
where  count(

    select *
    from L
    where L.Wh = S

) = 0 
```

我得到错误：

> 错误代码 1064，SQL 状态 42000：您的 SQL 语法有错误...

我该如何编写这个查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T06:49:29.893

您必须在子选择中使用 COUNT 聚合函数，因此您的子查询返回单个结果。

```
select S 
from St
where (select COUNT(*)
       from L
       where L.Wh = St.S
      ) = 0 
```

如果要选择“St”中没有“L”中任何记录的所有记录，还可以使用该`NOT EXISTS()`功能：

```
SELECT S
FROM St
WHERE NOT EXISTS (SELECT 1 FROM L WHERE L.Wh = St.S) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T06:52:02.537

你可以使用`NOT EXISTS`从句。

```
SELECT S
FROM ST
WHERE NOT EXISTS (    
  SELECT *
  FROM L
  WHERE L.Wh = ST.S
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T06:49:49.300

像这样试试

```
 select s from st
   where (select count(*) from L where l.wh=s)=0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T06:53:00.893

另一种选择是使用`join`：

```
select S from St
left join L on St.S = L.Wh
where L.Wh is null 
```

工作示例：[http ://sqlfiddle.com/#!2/d3c23/2](http://sqlfiddle.com/#!2/d3c23/2)

就个人而言，我通常更喜欢加入，但另一种选择是使用`not in`：

```
select S from St
where S not in (select Wh from L) 
```

示例：[http ://sqlfiddle.com/#!2/d3c23/3](http://sqlfiddle.com/#!2/d3c23/3)

# terminology - 没有循环如何定义“对象”和“类”？

> ID：13063081
> 
> 赞同：0
> 
> 时间：2012-10-25T06:47:24.043
> 
> 标签：terminology, definition

我知道帽子类和对象是。但是我想不出一个好的定义，即简单（对于编程初学者）并且没有循环。

这是一个简单的定义，但有一个 ciclye：

**类**：类是对象的蓝图。

**对象**：对象是实例化的类。

**你能给类和对象的编程初学者一个简单的定义，即不是循环的吗？**

（这个问题的背景：我目前正在做一个教程，我希望我的学生给我非常基本的术语的定义。当我准备我的问题和答案时，我注意到我很难定义这两个术语一个好方法，虽然我可以毫无问题地描述某些编程语言的差异）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:59:29.537

我不确定您是否真的可以定义一个而没有另一个，但我不确定它们是否像您想象的那样具有周期性。

也许反过来：

*   类是描述某些东西的属性和行为的集合 - 在此处插入示例。

*   对象是该事物的特定实例。

我不认为你可以在不引用对象的情况下真正定义类。但是，您可以反过来做：

*   一个对象是同时具有属性（描述它的值）和方法（或操作——可以对它做的事情）的东西。

*   类是抽象对象描述的一种方式，可以说“这种类型的所有对象都具有这些重要的属性和操作”。

不知道有没有用...

# visual-studio - Silverlight 中 CodeFile.cs 和 Class.cs 的区别

> ID：13063083
> 
> 赞同：3
> 
> 时间：2012-10-25T06:47:32.833
> 
> 标签：visual-studio, silverlight, templates, file-type

我是silverlight的新手。我试图在 silverlight 项目中添加一些随机文件。我发现了两种类型 ( `CodeFile and Class`)，都具有扩展名 .cs。

谁能告诉我这两者之间的区别或何时使用它们中的哪一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T06:58:47.517

代码文件和类文件都具有相同的扩展名，但是当您实际将其添加到解决方案时

**类文件带有一些像这样的自动生成的代码**

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace defaultproject
{
    public class Class1
    {

    }
} 
```

**代码文件没有代码，只是空文件，你需要添加你想要的**

只需尝试在您的项目中添加这两种类型的文件，您将轻松获得差异...

# javascript - 浮动值行为

> ID：13063089
> 
> 赞同：0
> 
> 时间：2012-10-25T06:48:09.433
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)
> [Javascript舍入问题](https://stackoverflow.com/questions/4041816/javascript-rounding-issue)

java脚本中的浮点值行为是什么？默认精度值行为如何？

我在徘徊的时候，我检查了

`0.1 + 0.2`在控制台中它给了我 `0.30000000000000004`

谁能帮我理解为什么会发生这种情况及其行为。

提前致谢。

# android - 安卓多语言应用

> ID：13063091
> 
> 赞同：0
> 
> 时间：2012-10-25T06:48:19.340
> 
> 标签：android, localization, multilingual

我有数据库文件 .db ，其中所有数据都以英文提供。我想通过使用数据库在 Android 中制作多语言支持应用程序。

有人可以举一些例子来帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:02:14.563

我可以推荐这个：

[多语言数据库设计的最佳实践是什么？](https://stackoverflow.com/questions/929410/what-are-best-practices-for-multi-language-database-design)

[多语言数据库的架构](https://stackoverflow.com/questions/316780/schema-for-a-multilanguage-database)

因此，根据我的经验，我认为最好的方法是做一个表，其中将包含不会本地化的主要信息，然后为要支持本地化列的每种语言创建单独的表。

但是您肯定需要某种代码设计来根据您的语言环境来处理此问题，而不是为每种语言编写查询。

就像有一种方法可以预处理 SQL 语句，根据语言环境添加带有不同表的连接语句。

还没有真正在 android 上做过这样的事情，而是在后端实现上做过。

然而，大多数 android 都有一个相当小的数据库，只有几列，所以即使只有一个表，其中列有 description_en description_it 等......如果您需要以少量语言和少量本地化，也可以完成这项工作如果在查询中检测到特定列名，则处理 sql 以附加语言环境。

我的建议仍然是拥有多个表并具有良好的设计，因为在 android 应用程序中维护数据库并不是一项简单的任务，因为它们分布在设备、操作系统版本等之间。

一个好的设计将意味着最初花费更多的时间，但在维护上做更少的工作。

# iphone - 如何从字符串中获取字段

> ID：13063094
> 
> 赞同：0
> 
> 时间：2012-10-25T06:48:23.057
> 
> 标签：iphone, nsstring, nsrange

resultString 为 "{lhs: "100 印度卢比",rhs: "1.8612 美元",error: "",icc: true}"

我有一个字符串，在这四个字段中可用。现在我如何获取这个字符串的第二个字段。因为我想使用价值 = 1.8612 美元。我的问题是我的值是双引号，但关键不是。请帮助我进行此解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:51:37.510

这似乎是json。学习一些 json 教程

编辑：

这是教程的链接

[http://www.touch-code-magazine.com/tutorial-fetch-and-parse-json/](http://www.touch-code-magazine.com/tutorial-fetch-and-parse-json/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:02:38.060

你上面写的字符串是一个 JSON 字符串。你需要解析它，你会得到一个 NSDictionary。您可以在这里获得最快的 JSON 解析器：

[Nextive JSON 解析器](http://blog.nextive.com/392-nextive-json-parser-for-ios-and-mac-os-%E2%80%93-fast/)

无论如何，您给出的 JSON 字符串有一些错误。正确的字符串是：

```
{
"lhs":"100 Indian rupees",
"rhs": "1.8612 U.S. dollars",
"error": "",
"icc": true
} 
```

当它被解析时，它看起来像：您将在 NSDictionary 中获得 4 个键 {lhs,rhs,error,icc} 和各自的值。

希望对你有效。

编辑：如果你想检查一个有效的 JSON 字符串：你可以检查是

[JSON 解析器](http://json.parser.online.fr/)。

此链接将让您知道 JSON 字符串中的错误在哪里（如果错误）。否则将向您显示解析的 JSON。

# javascript - 如何获取列表项（ ) 以列表样式类型声明的标记/标签？

> ID：13063095
> 
> 赞同：15
> 
> 时间：2012-10-25T06:48:24.197
> 
> 标签：javascript, jquery, html, css, html-lists

假设我有一个这样的列表：

```
<ul style="list-style-type: upper-latin;">
  <li>Lorem</li>
  <li>Ipsum</li>
</ul> 
```

（`list-style-type`可能是任何东西 - 上罗马，片假名，下希腊）

`list-style-type: upper-latin;`将在每个列表项前面放置一个字母（从 A 开始）。有没有办法为任何给定的列表项获取这封信？[`.index()`](http://api.jquery.com/index/)我可能可以使用 jQuery或类似方法遍历列表。

或者，也许有办法从样式中提取标记？

[这里](https://stackoverflow.com/questions/2800210/possible-to-get-list-item-li-label-with-javascript)的答案仅适用于拉丁字母列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:05:15.433

> 有没有办法为任何给定的列表项获取这封信？

是的。您可以阅读`list-style-type`并生成每种样式类型显示的字符。但是，针对特定项目编号和样式类型显示的字符可能因浏览器而异。

> 或者，也许有办法从样式中提取标记？

没有。（至少目前没有）

编写生成器的一些有用的东西：

*   [Unicode 字符列表](http://en.wikipedia.org/wiki/List_of_Unicode_characters)
*   [列表生成器`list-style-types`](http://jsfiddle.net/rPy8n/)
*   [Javascript中的数字到罗马数字](http://blog.stevenlevithan.com/archives/javascript-roman-numeral-converter)

此外，许多列表样式是其他列表样式的大写版本。很高兴知道它也`myString.toUpperCase()`适用于 unicode 字符。:)

# android - Android 应用程序名称不会显示在应用程序抽屉中

> ID：13063098
> 
> 赞同：2
> 
> 时间：2012-10-25T06:48:40.983
> 
> 标签：android, android-layout

我按照[本教程](https://stackoverflow.com/questions/5443304/how-to-change-an-android-apps-name)`android:label`通过更改清单（AndroidManifest.xml）的应用程序节点中的字段来更改我的 Android 应用程序的名称。

**应用节点：**

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.pps" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**strings.xml** - 包含不同字符串名称的 XML 文件。

```
<resources>
<string name="app_name">PPS</string>
<string name="menu_settings">Settings</string>
<string name="title_activity_main"></string>
</resources> 
```

完成此任务后，名称仍然不会显示。这是我在运行应用程序并将其安装在我的测试设备上时看到的。

![仅应用程序图标； 无名](../Images/04017d07a991a5f99202732829664aac.png)

`android:label`当我通过添加文本来更改活动节点中的当前值时发生了一件奇怪的事情`<string name="title_activity_main"></string>`，应用程序似乎*继承*了它作为它的名称。为什么会发生这种情况？我是否错误地声明了某些内容？某些价值观是否冲突？

**更新：**

当我选择“管理应用程序”时，我实际上看到了应用程序的名称。

![在此处输入图像描述](../Images/49f08fb60f401d732aa9551494ca3d98.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:09:14.407

默认情况下，Android 将第一个活动的名称 (android.intent.action.MAIN) 作为应用程序的显示名称。要为您的活动设置标题，您应该在活动中进行 setTitle() 调用。例如

您的清单如下所示：

```
<activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

您的活动如下所示：

```
public class EntryPoint extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setTitle(R.string.title_activity_main);

} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:10:52.227

抽屉里的东西不是应用程序，而是应用程序的启动器/主要**活动**。

因此，您看到该活动的名称是合乎逻辑的（一个应用程序可以有多个活动）。如果您出于某种原因不希望该活动具有名称，那么您不应该对它最终没有名称感到惊讶。一个名字。

可能最好的办法是“修复”为什么你不希望它有名字？隐藏它，或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:52:55.420

此处字符串为空

```
 <string name="title_activity_main"></string> 
```

将上面的行更改为

```
 <string name="title_activity_main">Your Activity Name</string> 
```

# android-emulator - 如何在android模拟器（android 2.3.3）上安装busybox？

> ID：13063106
> 
> 赞同：0
> 
> 时间：2012-10-25T06:49:41.590
> 
> 标签：android-emulator, busybox

我正在尝试在android模拟器（android 2.3.3）上安装busybox。

我遵循了[将busybox推入android模拟器](https://stackoverflow.com/questions/5336154/pushing-busybox-into-android-emulator)的帖子中给出的两种方法，但我遇到了问题。

我使用了这篇文章中的第二个解决方案，但我得到了“busybox：未找到”：

```
# su
su
# cd /data/busybox
cd /data/busybox
# chmod 775 busybox
chmod 775 busybox
# ./busybox --install
./busybox --install
# busybox
 busybox
 busybox: not found
# ./busybox
./busybox
BusyBox v1.8.1 (2007-11-14 10:11:37 EST) multi-call binary
Copyright (C) 1998-2006 Erik Andersen, Rob Landley, and others.
Licensed under GPLv2\. See source distribution for full notice.

Usage: busybox [function] [arguments]...
   or: [function] [arguments]...

    BusyBox is a multi-call binary that combines many common Unix
    utilities into a single executable.  Most people will create a
    link to busybox for each function they wish to use and BusyBox
    will act like whatever it was invoked as!

Currently defined functions:
    [, [[, addgroup, adduser, adjtimex, ar, arp, arping, ash,
    awk, basename, bunzip2, bzcat, bzip2, cal, cat, catv,
    chattr, chgrp, chmod, chown, chpasswd, chpst, chroot,
    chrt, chvt, cksum, clear, cmp, comm, cp, cpio, crond,
    crontab, cryptpw, cut, date, dc, dd, deallocvt, delgroup,
    deluser, df, dhcprelay, diff, dirname, dmesg, dnsd, dos2unix,
    du, dumpkmap, dumpleases, echo, ed, egrep, eject, env,
    envdir, envuidgid, ether-wake, expand, expr, fakeidentd,
    false, fbset, fdflush, fdformat, fdisk, fgrep, find, fold,
    free, freeramdisk, fsck, fsck.minix, ftpget, ftpput, fuser,
    getopt, getty, grep, gunzip, gzip, halt, hdparm, head,
    hexdump, hostid, hostname, httpd, hwclock, id, ifconfig,
    ifdown, ifup, inetd, init, insmod, install, ip, ipaddr,
    ipcalc, ipcrm, ipcs, iplink, iproute, iprule, iptunnel,
    kbd_mode, kill, killall, killall5, klogd, last, length,
    less, linux32, linux64, linuxrc, ln, loadfont, loadkmap,
    logger, login, logname, logread, losetup, ls, lsattr,
    lsmod, lzmacat, makedevs, md5sum, mdev, mesg, microcom,
    mkdir, mkfifo, mkfs.minix, mknod, mkswap, mktemp, modprobe,
    more, mount, mountpoint, mt, mv, nameif, nc, netstat,
    nice, nmeter, nohup, nslookup, od, openvt, passwd, patch,
    pgrep, pidof, ping, ping6, pipe_progress, pivot_root,
    pkill, poweroff, printenv, printf, ps, pscan, pwd, raidautorun,
    rdate, readlink, readprofile, realpath, reboot, renice,
    reset, resize, rm, rmdir, rmmod, route, rpm, rpm2cpio,
    run-parts, runlevel, runsv, runsvdir, rx, sed, seq, setarch,
    setconsole, setkeycodes, setlogcons, setsid, setuidgid,
    sh, sha1sum, slattach, sleep, softlimit, sort, split,
    start-stop-daemon, stat, strings, stty, su, sulogin, sum,
    sv, svlogd, swapoff, swapon, switch_root, sync, sysctl,
    syslogd, tail, tar, taskset, tcpsvd, tee, telnet, telnetd,
    test, tftp, time, top, touch, tr, traceroute, true, tty,
    ttysize, udhcpc, udhcpd, udpsvd, umount, uname, uncompress,
    unexpand, uniq, unix2dos, unlzma, unzip, uptime, usleep,
    uudecode, uuencode, vconfig, vi, vlock, watch, watchdog,
    wc, wget, which, who, whoami, xargs, yes, zcat, zcip

# busybox
busybox
busybox: not found 
```

然后，我使用了这篇文章中的第一个解决方案，但我得到了“./busybox：permission denied”：

```
# ./busybox --install
./busybox --install
./busybox: permission denied
# ./busybox
./busybox
./busybox: permission denied
# export PATH=/data/busybox:$PATH
export PATH=/data/busybox:$PATH 
```

有谁能指导我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:32:24.720

问题解决了，我按照链接 [http://allencch.wordpress.com/2012/02/29/learn-to-root-android-using-emulator/](http://allencch.wordpress.com/2012/02/29/learn-to-root-android-using-emulator/)中的程序进行操作。

我认为错误是我没有用额外的空间启动 avd，上面的教程提到“我们将为 /system 用额外的磁盘空间启动模拟器。这样，我们以后可以向 /system 添加额外的文件。”

```
emulator -avd MyAndroid -partition-size 128 -no-snapshot-load 
```

本教程还提到“我们需要使用“adb shell”重新挂载/system，以便我们对/system具有写访问权限。”

```
adb shell mount -o rw,remount -t yaffs2 /dev/block/mtdblock0 /system 
```

然后，我们只需要执行以下操作：

```
adb push su /system/xbin/
adb push busybox /system/xbin/ 
```

（在上述步骤之后，如果您收到错误消息

```
failed to copy 'busybox' to '/system/xbin//busybox': Out of memory 
```

然后重新启动分区大小大于 128 的 AVD，例如我以 512 启动它。然后，重复上述步骤。）

```
adb shell chmod 06755 /system/xbin/su
adb shell chmod 06755 /system/xbin/busybox 
```

我认为 su 没有必要，因为模拟器已经拥有 root 访问权限，但我遵循了整个过程。

重新启动模拟器后，一切都恢复默认，这意味着不再有“su”。为了解决这个问题，请从上述教程中阅读标题为“解决方案”的段落。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T05:53:28.493

首先从busy box所在的文件夹复制busy box chmod 777 busybox #from

./busybox --install 。#空格和点是必需的

我认为你只缺少“。”

# windows-phone-7 - 如何在 WP7 (Windows Phone 7) 中集成/添加 phonegap 插件？

> ID：13063132
> 
> 赞同：0
> 
> 时间：2012-10-25T06:51:41.790
> 
> 标签：windows-phone-7, phonegap-plugins

我试图为 Windows 手机添加带有 phonegap 的扫描仪和子浏览器插件。我已经从[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins.I)下载了插件 zip。我只是将项目插件文件夹中的本机 .cs 和 .dll 文件以及相应的 .js 复制到 www 文件夹。我尝试使用以下两种方式调用像 scan() （用于扫描仪）和 showWebPage() （用于子浏览器）这样的插件方法：

```
window.plugins.barcodeScanner.scan(params);

navigator.plugins.barcodeScanner.scan(params); 
```

但插件仍然无法正常工作。我错过了什么吗？我还添加了对我复制的 dll 文件的引用。我想我必须在 WMAppManifest.xml 中为我的插件添加条目，但我不知道该怎么做。有没有人告诉我集成插件的完整过程？以及如何在 WMAppManifest.xml 文件中添加插件条目？提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:14:58.740

在此处查看使用说明 [https://github.com/phonegap/phonegap-plugins/tree/master/WindowsPhone/BarcodeScanner/deploy](https://github.com/phonegap/phonegap-plugins/tree/master/WindowsPhone/BarcodeScanner/deploy)

每个 Apache Cordova/PhoneGap 插件通常包含两个部分（如您所见）：.js 和 .cs

1.  对于 .cs 文件，您只需将其添加到您的 VS 项目中

2.  对于 .js 文件，您需要将其添加到正确的文件夹（作为 VS 项目的一部分），例如添加到“www”，然后在您的 html 页面中添加对此 .js 文件的引用（这一步似乎在您的案子）。

3.  选修的。对于某些库，您还需要添加额外的 dll，但您不能错过这一步，因为会有编译问题。

解决问题

1.  尝试在 .cs 文件中放置一个断点以查看它是否被调用。

2.  尝试在以下位置将 console.log('Hey, I'm initialized') 添加到 barrcodescanner.js

    var BarcodeScanner = 函数（） { }

并查看此消息是否显示在 VS 输出 (Ctrl+Alt+O) 中。如果不是，这意味着您在 html 页面中对 barrcodescanner.js 的引用不正确。

PS。无需修改 WMAppManifest.xm。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:25:05.883

我也试图让 Barcodescanner 在 WP7 上运行，但没有运气。我可以让 iOS 示例正常工作 - [https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner/Example](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner/Example)

添加 hte DLL、js 和 CS 文件后，我们是否应该能够在 index.html 中的 iOS 示例中使用相同的代码，或者我们是否需要进行更改以调用扫描函数？

如果我调用 navigator.plugins.barcodeScanner.scan()，我在输出中看到的错误是“错误：”无法获取属性“扫描”的值：对象为空或未定义”。

如果我调用 window.plugins.barcodeScanner.scan()，我会看到“错误：”无法获取属性“barcodeScanner”的值：对象为空或未定义”。

将继续尝试，但我也让相机样本正常工作，并注意到在连接到 Zune 时无法调用 WP7 相机的帖子并想知道这是否相关。

# android - 如何为列表视图中的每个项目添加按钮

> ID：13063133
> 
> 赞同：0
> 
> 时间：2012-10-25T06:51:44.970
> 
> 标签：android, listview, button

我有一个带有 listView 的布局

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/testMain"
     android:layout_width="fill_parent"         
     android:layout_height="fill_parent" >

    <ListView
         android:id="@+id/notesListView"
        android:layout_width="480dp"
        android:layout_height="wrap_content"
        android:background="#000"
        android:divider="#FFF"
        android:dividerHeight="5dp"         
        android:fadingEdge="none"
        android:overScrollFooter="#000"
        android:layout_marginBottom="15dp"         
         />              
 </RelativeLayout> 
```

我使用 ListView_Adapter 将项目动态添加到列表中。是否可以在列表每一行的右上角添加一个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:59:02.693

是的，您必须使用自定义列表视图。在自定义列表视图中，您必须从布局 xml 文件动态添加列表项。

例子 ：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/testMain"
     android:layout_width="fill_parent"         
     android:layout_height="fill_parent" >

    <Button
         android:id="@+id/notesListView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_alignParentRight="true"

         />              
 </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:56:03.403

将您的 listitem xml 设置为

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="8dp">

<TextView
 android:id="@+id/title"
 android:textColor="#FFF"
 android:layout_width="120dp"
 android:layout_height="wrap_content"/>

 <Button
 android:id="@+id/Btn01"
  android:textColor="#000"
  android:layout_weight="0.20"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="Button1"/>

</LinearLayout> 
```

在列表视图中选中此[按钮](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/)

# ios - 如何通知控制器需要更新

> ID：13063134
> 
> 赞同：2
> 
> 时间：2012-10-25T06:51:53.867
> 
> 标签：ios, xcode

我正在使用[此代码](http://www.addimage.net/blog/?tag=/uiDropDownMenu)“模拟”下拉菜单，因为它在 html 代码中工作。我在我的页面上添加了 2 个下拉菜单。当我在第一个下拉菜单中选择一个项目时，需要通知我的控制器，并且需要在此通知中给出来自所选下拉项目的所选 ID。每当在第一个下拉列表中选择了一个项目时，我如何通知我的控制器？以及如何使用第一个下拉列表中选择的 id 打包通知？

我使用以下代码初始化下拉列表：

```
ddDuration = [[UIDropDownMenu alloc] init];
[ddDuration makeMenu:txtDurationId titleArray:arrDurationIds valueArray: arrDurationNames targetView:self.view];
[ddDuration setDropdownTextColor:[UIColor whiteColor]];
[ddDuration setDropdownBackgroundColor:[UIColor darkGrayColor]]; 
```

`arrDurationsId`和`arrDurationNames`包含相同数量的元素。第一个包含ID，后者包含名称。

然后我希望每当在`dropdown 1`. 发件人需要包含从中选择的项目 ID `dropdown 1`- 以便`dropdown 2`知道应该将哪些内容加载到其中。

```
- (IBAction)didSelectCountry:(id)sender {
    [ddDestination makeMenu:txtDestinationId titleArray:arrDepartureIds valueArray: arrDepartureNames targetView:self.view];
    [ddDestination setDropdownTextColor:[UIColor whiteColor]];
    [ddDestination setDropdownBackgroundColor:[UIColor darkGrayColor]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:23:54.293

您可以在下载代码的同一页面中找到解决方案。检查这个

```
[menu1 addObserver:self forKeyPath:@"selectedValue" options:NSKeyValueObservingOptionNew context:@"menu1"]; 
```

和这个

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change (NSDictionary *)change context:(NSString *)context
{
    // get the selected menu and value
    NSString* changedObject = context;
    NSString* changedValue = [change objectForKey:NSKeyValueChangeNewKey];

    NSLog(@"%@ has changed to %@", changedObject, changedValue);

    // Menu 1 selected
    if ([context isEqualToString:@"menu1"]){
        // create a new array for menu 2\.  
        NSArray *arrayNames2 = [[NSArray alloc] initWithObjects:
                        @"Erik Vanderwal",
                        @"Max Town",  
                        @"Avis Villalon",
                        @"Hugh Salvia",
                        nil];

        // rebuild menu 2 with the new array values
        [menu2 makeMenu:textfield2 titleArray:arrayNames2 valueArray: arrayNames2 targetView:self.view];

        // run makemenu with nil array values to clear the old values from menu 3
        [menu3 makeMenu:textfield3 titleArray:nil valueArray: nil targetView:self.view];

    }

    // Menu 2 selected
    if ([context isEqualToString:@"menu2"]){
        NSArray *arrayNames3 = [[NSArray alloc] initWithObjects:
                            @"Erik Vanderwal",
                            @"Hugh Salvia",
                            nil];

        [menu3 makeMenu:textfield3 titleArray:arrayNames3 valueArray: arrayNames3 targetView:self.view];

    }

} 
```

# java - socket io.read() 无法获取任何数据时，java线程的状态是什么

> ID：13063135
> 
> 赞同：2
> 
> 时间：2012-10-25T06:51:55.967
> 
> 标签：java, multithreading, sockets

如标题所示，当 socket io.read() 无法获取任何数据时，java 线程的状态是什么。很多文章提到io会被阻塞，但是jdk说阻塞发生在getting lock monitor？
怎么理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:00:59.373

如果线程在等待I/O，我的理解是它处于[`RUNNABLE`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html#RUNNABLE)状态。[`BLOCKED`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html#BLOCKED)当它尝试在被另一个线程锁定的对象上同步时，它会进入该状态。它在[`WAITING`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html#WAITING)调用`wait()`（或其他几个方法）时处于状态。

# node.js - 节点 js 获取 HTTP 请求名称

> ID：13063138
> 
> 赞同：1
> 
> 时间：2012-10-25T06:52:16.580
> 
> 标签：node.js

```
 http.createServer(function (request, response) {
   request.on("end", function () {

    if(request.method='PUT')
    {
    buf1='This is PUT';
    console.log('received PUT');
    }

       response.writeHead(200, {
         'Content-Type': 'text/plain'
      });  
      response.end('Hello HTTP!'+buf1);
   }); 
```

我看到即使我也只是尝试执行 GET，PUT 命令正在执行。我缺少什么基本的东西吗？我需要的是我的程序应该根据方法读取所有标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:54:12.993

应该`if (request.method === 'PUT') {`

即你需要两个或三个等号，而不仅仅是一个。

# sql-server - SQL Server 两行合一

> ID：13063139
> 
> 赞同：0
> 
> 时间：2012-10-25T06:52:21.673
> 
> 标签：sql-server, sql-server-2005

您好，感谢您的关注

我需要将两个不同行的数据转换为一行。

让我们想象一下

`ORDERS`桌子：

```
ID    Name    adress   
-------------------- 
01    AA      adr1
02    BB      adr2
03    CC      adr3 
```

`LINEORDERS`桌子：

```
ID    IDorder    IDprofileType     ProfileType      idPers   
------------------------------------------------------------- 
01    01         01                Organizer        0045
01    01         02                Present          0085
01    01         02                Present          0032
01    01         03                Manager          0018 
```

让我们想象一下我们想要的结果 >

期望的结果：

```
IDorder   NameOrder     OrganizerID           PresentID           ManagerID       Diff
------------------------------------------------------------- 
01        AA            0045                  0085                0018            yes
01        AA            0045                  0032                0018            yes 
```

`Diff`是，如果`managerID`和`organizerID`不同。

我怎样才能得到这样的结果？

我需要创建 T-SQL 临时表吗？打火机会是什么？

我的表中有很多行。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:58:27.417

您可以通过子查询来实现这一点，但我真的认为您必须在这里进行一些重新设计。因为会有很多子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:59:25.563

如果您使用的是 MS SQL Server，您应该尝试 PIVOT。以下是一些示例：[SQL Server：PIVOTing String 数据示例](https://stackoverflow.com/questions/24470/sql-server-pivot-examples)

# postgresql - 使用 setMaxRows 的 ebean 限制结果集

> ID：13063149
> 
> 赞同：2
> 
> 时间：2012-10-25T06:53:03.790
> 
> 标签：postgresql, playframework-2.0, ebean

我正在使用 ebean 使用来自搜索表单的参数创建一个查询！框架 2.0.4。根据给定的参数，结果可以有多达一百万行。所以我使用 setMaxRows(100) 来限制结果。最后我有一个包含 100 个条目的列表，但是请求数据的真实语句缺少 LIMIT 关键字，并且所有数据都存储在内存中......

```
Query<Process> query = Process.find.fetch("documents").fetch("documents.workflows").fetch("documents.workflows.state");
ExpressionList<Process> expression = query.where().between("documents.workflows.date", new java.sql.Date(edit_date.getTime()), new java.sql.Date(edit_to.getTime()));
procs = expression.setMaxRows(100).orderBy().desc("id").findList(); 
```

Java
Postgresql 9.1
ebean 2.7.3
玩！框架 2.0.4

谁能告诉我为什么 ebean 在我的情况下不使用 LIMIT 关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:40:00.997

我不知道为什么它没有在语句中使用 LIMIT，我昨天发现了相同的情况。

我的解决方案（我可以接受）是使用[RawSql](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/RawSql.html)和/或[SqlQuery](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/SqlQuery.html)创建自定义查询（两者都允许创建自定义语句）

# symfony - 当我尝试使用我的实体类作为 ORM 用户提供时出现 MappingException

> ID：13063152
> 
> 赞同：0
> 
> 时间：2012-10-25T06:53:06.827
> 
> 标签：symfony, symfony-2.1

我有 5 个到数据库的连接，在 config.yml 和映射中进行了描述：

```
orm:
    default_entity_manager: site
    entity_managers:
        site:
            connection: siteConfig
            mappings:
                CSSBundle: ~
        forum:
            connection: forumConfig
            mappings:
                IPBBridgeBundle: ~ 
```

我使用 CSSBundle 作为一些实体的主要捆绑包，并使用 IPBBridgeBundle 通过 IPB 数据库（“论坛”EM）进行身份验证。在 IPBBridgeBundle 我有成员实体，我在 security.yml 中设置为用户提供者

```
providers:
    main:
        entity: { class: Telnet\IPBBridgeBundle\Entity\Member, property: username } 
```

CSSBundle 处理的所有路由，除了“/login”、“/ligin_check”和“/logout”，它们都由 IPBBridgeBundle (LoginController) 处理。当我试图去 / 我有

```
Fatal error: require_once(): Cannot redeclare class telnet\ipbbridgebundle\controller\logincontroller in /var/www/vhosts/css.ilimnet.ru/www/Symfony/vendor/jms/di-extra-bundle/JMS/DiExtraBundle/HttpKernel/ControllerInjectorsWarmer.php on line 52 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:02:30.090

文件 /var/www/vhosts/css.ilimnet.ru/www/Symfony/vendor/jms/di-extra-bundle/JMS/DiExtraBundle/HttpKernel/ControllerInjectorsWarmer.php

显然是在声明一个名为 logincontroller 的类。由于 PHP 中的类名不区分大小写，它会与您自定义的登录 clontroller 类发生冲突。

将您的登录控制器类名和文件重构为唯一名称，您应该可以使用这个名称。

您上面提到的错误消息为您提供了第一类出现的确切位置。

```
 Previously declared in ... 
```

# java - 编写一个使用堆栈的Java程序，对这样一个具有价值的组合

> ID：13063154
> 
> 赞同：-2
> 
> 时间：2012-10-25T06:53:13.977
> 
> 标签：java, stack

**问题**

考虑一串数字`123456789`。考虑可以通过放置`+`或`-`散布在字符串中形成的所有算术表达式。例子：

```
1 + 2 - 345 + 67 - 8 - 9 = 292
123456 - 789 = 122667 
```

编写一个 Java 程序，该程序使用堆栈来查找具有值的这种组合`2012`。

**我的问题**

我被逻辑困住了，因为我们必须使用两个算术运算符。

```
import java.util.*;

public class arithmeticStack {
    public static void main (String args[]) {
        ArrayList<String> dg = new ArrayList<String>();
        Stack<String> digits = new Stack<String>();
        int number = 0;
        dg.add("1");
        dg.add("2");
        dg.add("3");
        dg.add("4");
        dg.add("5");
        dg.add("6");
        dg.add("7");
        dg.add("8");
        dg.add("9");

        for (int i = 0; i <= dg.size() - 1; i++) {
            digits.push(dg.get(i));
        }

        for (String f : digits){
            number += Integer.parseInt(f);
        }

        while (number == 2012) {
        }                                     
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:00:43.463

所以，你只需要在这个类中添加一个代码，它将检查总和 == 2012。

PS谢谢你的好练习，我会用它给我的学生。

PPS Ups，抱歉，这里只修正了一个错误。此代码可用于任意数量的操作。您只需要在“ops”变量中枚举它们并为计算总和添加特定代码。

```
import java.util.Stack;

public class Arithmetics {

public static void main(String[] args) {
    String digits = "1234567890";
    //String ops = "+-*";
    String ops = "+-";

    String number = "";
    Stack<String> numbers = new Stack<>();
    for (int i = 0; i < 2 << digits.length(); i += 2) {
        number = "" + digits.charAt(0);
        for (int bit = 0; bit < digits.length() - 1; bit++) {
            int j = (2 << bit) & i;
            if (j > 0) {
                numbers.push(number);
                number = "";
            }
            number += digits.charAt(bit + 1);
        }
        numbers.push(number);

        for (String n : numbers) {
            System.out.print(n + " ");
        }
        System.out.println();

        String expression = "";
        Integer sum = 0;
        final int base = ops.length();
        for (int k = 0; k < Math.pow(base, numbers.size() - 1); k++) {
            expression = numbers.get(0);
            sum = Integer.parseInt(expression);
            for (int pos = 0; pos < numbers.size() - 1; pos++) {
                int opNum = k;
                for (int j = numbers.size() - 1; j >= pos + 1; j--) {
                    if (opNum >= Math.pow(base, j)) {
                        opNum = (int) (opNum - (opNum / (int)Math.pow(base, j)) * (int)Math.pow(base, j));
                    }
                }
                if (pos > 0) {
                    opNum = (int) (opNum - Math.pow(base, (pos - 1)));
                    opNum = (int) (opNum / Math.pow(base, pos));
                }
                expression += ops.charAt(opNum);
                // -------------------------------
                if (ops.charAt(opNum) == '+') {
                    sum += Integer.parseInt(numbers.get(pos + 1));
                } else
                if (ops.charAt(opNum) == '-') {
                    sum -= Integer.parseInt(numbers.get(pos + 1));
                } /*else
                if (ops.charAt(opNum) == '*') {
                    sum *= Integer.parseInt(numbers.get(pos + 1));
                }*/
                // -------------------------------
                expression += numbers.get(pos + 1);
            }
            System.out.println(expression + " = " + sum);
        }

        numbers.clear();
    }

}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:43:45.297

找到您需要的组合

```
1234 - 5 - 6 +789  = 2012 
```

但你必须从逻辑上来。

尝试您的组合，同时将（值和 + 或 -）推入堆栈并检查答案是否为 2012（如果不是全部弹出）。所以推并弹出，直到你发现你的组合是 2012。所以堆栈项目包含你的组合从下到上。

```
 String [] numbers = {"1","2","3","4","5","6","7","8","9"};

   String [] operators ={"+","-"}; 
```

您可以使用运算符数组推送到堆栈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:22:35.827

粗略的想法，这是我能想到的：

认为`8 empty boxes`数字之间有，可以用`+,- or nothing`. 所以你可以得到`3^8 = 6561`不同的排列。创建一个包含 8 个字符的数组。现在排列这个数组并找到它所有的可能性..对不起，我现在不知道该怎么做，也许其他人可以向你解释，我很确定可以做到。使用这些排列将这些值插入到原始字符串中。

您可以使用堆栈来评估表达式。可以在不考虑您的情况下的运算符优先级的情况下完成，大致如下：

从左到右迭代，如果遇到操作数，将其压入堆栈。如果遇到运算符，请再次将其压入堆栈。现在，当您输入第二个操作数时，弹出并检索运算符，再次弹出以检索一个操作数，对这两个操作数和运算符进行操作，并将结果推回堆栈。最后，您将结果放在堆栈上。

**编辑：**或者只是使用[Python 的`eval`](https://stackoverflow.com/questions/9383740/what-does-pythons-eval-do)...

# python - 如何在updateView中获取django中的模型

> ID：13063157
> 
> 赞同：0
> 
> 时间：2012-10-25T06:53:22.987
> 
> 标签：python, django

我有这个代码

```
class PbsObjectUpdate(UpdateView):
    def get_template_names(self):
        model_name = self.model.__name__ 
```

我可以通过使用在任何函数中获取模型

```
self.model.__name__ 
```

但是如何在函数之外和类下面得到它，即

```
class PbsObjectUpdate(UpdateView):
      model_name = model.__name__ 
```

因为我在那部分没有自我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:11:23.690

你可以做一个吸气剂：

```
class PbsObjectUpdate(UpdateView):
    @property
    def model_name(self):
        return self.model.__name__ 
```

现在你可以使用`PbsObjectUpdate().model_name`

# css - 根据文件类型自动关联图标不起作用

> ID：13063162
> 
> 赞同：1
> 
> 时间：2012-10-25T06:54:03.663
> 
> 标签：css, anchor, background-image

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-26T10:30:56.133

使用 CSS3 为每个链接带来 pdf 或其他图标的简单方法：

**1\. 使用 FontAwesome 中的图标：**

```
a[href$=".pdf"]:before
{
  content:"\f1c1  ";
  font-family: fontawesome;
} 
```

**2.通过背景图片使用图标：**

```
a[href$=".pdf"]
{
  background:url("your-image-url.png") no-repeat left;
  padding-left:25px;
} 
```

使用图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:56:42.837

尝试将您的 URL 放在引号中：

```
background-image:url("../pics/pdf_icon.gif"); 
```

小提示 - 如果您想指定多个图像，请用逗号分隔 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:29:09.037

删除声明`background-attachment:fixed;`。并确保文档以“标准模式”呈现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T07:44:40.203

我尝试删除：

> 背景附件：固定；

它奏效了。我想用“之前”“修复”不明白在哪里修复它。

# android - Logcat 不显示调试级别消息

> ID：13063164
> 
> 赞同：16
> 
> 时间：2012-10-25T06:54:07.393
> 
> 标签：android

出于某种原因，我能够看到所有级别 Log.i() 及更高级别的消息，但看不到 Log.d() 或 Log.v() 级别。没有太多运气找到原因。有人知道如何解决这个问题吗？

一些进一步的细节：这不是我忘记在 Eclipse 的 logcat 下拉列表中选择适当级别的问题。有问题的日志消息也不会显示在我的手机上用于 logcat 跟踪的应用程序上。（虽然调试日志消息会从其他应用程序中显示）。我正在运行 OSX。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T01:48:28.257

原来我必须直接通过 ADB 启用适当的日志记录级别。

```
$ ./adb shell stop
$ ./adb shell setprop log.tag.MYTAG VERBOSE
$ ./adb shell start 
```

这解决了问题。不过，每次我重新启动手机时，这样做似乎很痛苦。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-10T21:10:04.723

另请记住，一些制造商可能会限制日志记录。（例如华为 -[华为，logcat 没有显示我的应用程序的日志？](https://stackoverflow.com/questions/18124334/huawei-logcat-not-showing-the-log-for-my-app/18395092#18395092)）。如果没有任何效果，请尝试在不同的手机上运行，​​或尝试找到特定于手机的解决方案。

# sql - 选择具有少数唯一列的记录，同时优先选择非空值而不是另一列

> ID：13063167
> 
> 赞同：5
> 
> 时间：2012-10-25T06:54:20.567
> 
> 标签：sql, oracle, unique, tablefilter

我想通过获取 field1 和 field2 唯一的记录来查询表，同时选择具有 field4 的行以获得一些值而不是优先级为 null。

例如在原始表中

```
field1  field2  field3  field4
  1       B       A     (null) 
  1       B       A       2   
  2       C       A       3   
  2       D       A     (null)
  3       D       F       3   
  2       C       A       3 
```

我希望从输出查询中得到的是：

```
field1  field2  field3  field4
  1       B       A       2   
  2       C       A       3   
  2       D       A     (null)
  3       D       F       3 
```

是否有任何有效的 SQL 表连接技术/过滤方法来实现这一点？谢谢

P/S - 为避免混淆，仅区分 field1 和 field2 的目的是因为 field3 可以具有不同的值，所选行将基于那些 field4 优先级不为空的行

例如

```
field1  field2  field3  field4
  1       B       A     (null)   
  1       B       C       2       <- this will be the chosen one 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T07:00:41.680

尝试这个：

您只需要按前 3 个字段分组并取 MAX() of filed4

```
select "field1","field2","field3",max("field4")
from Table1
group by "field1","field2","field3"
order by "field1" 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!4/5aebe/5)

**编辑：**

如果您只想将**field1 和 field2**作为分组的一部分，请尝试以下操作：

```
select "field1","field2","field3","field4"
from(
select "field1","field2","field3","field4",
        row_number() 
        over(partition by "field1","field2" order by "field4" desc) as rn
from Table1)A
where A.rn=1 
```

# [SQL 小提琴演示 2](http://www.sqlfiddle.com/#!4/5aebe/17)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:21:03.997

您可以使用 max，但必须确保您选择了正确的字段 3。这将做到这一点：

```
select field1, 
   field2 , 
   max(field3) keep (dense_rank first order by field4 desc) as field3, 
   max(field4)
from Table1
group by field1, field2 ,field3,
order by field1, field2 
```

# css - 如何在 Squishit 中添加动态 CSS 源 URL？

> ID：13063171
> 
> 赞同：1
> 
> 时间：2012-10-25T06:54:38.993
> 
> 标签：css, asp.net-mvc, razor, compression, squishit

如何在 Squishit 中添加动态 CSS 源路径/url？

```
 @Html.Raw(
        Bundle.Css()
        .Add("~/Styles/" + (ViewBag.SiteName ?? "default") + "/a.css")
        .Add("~/Styles/" + (ViewBag.SiteName ?? "default") + "/b.css")
        .Add("~/Styles/" + (ViewBag.SiteName ?? "default") + "/c.css")
        .Render("~/Styles/" + (ViewBag.SiteName ?? "default") + "/o#.css")
    ) 
```

这将引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:53:44.613

问题在于动态类型。

在插入之前，我首先将 ViewBag.SiteName 转换为 String 并且它起作用了。

# java - 通过元素解析的递归方法

> ID：13063175
> 
> 赞同：0
> 
> 时间：2012-10-25T06:55:08.193
> 
> 标签：java, dom, recursion

我有一个由元素 xx 和 xxt 组成的 xml。每个 xxt 包含一个或多个 xx 元素。每个 xx 都有一个“cap”和“act”属性。我需要做的是将所有的 cap-act 值存储在一个地图中。

现在请注意，我的 xml 可以包含 0 或不定数量的 xxt。因此，这应该递归地完成。现在，我只是在没有 xxt 元素时进行了简单的解析：

```
 for (Element element: (List<Element>) minfo.elements()) {
        if (element.getName().equals("xx")) {
            String cap = element.attributeValue("cap").trim();
            String act = element.attributeValue("act").trim();
            map.put(cap,act);
        }
        else if(element.getName().equals(xxt)){
            //TODO recursive method 
        }
    } 
```

xml 的一个示例可能是这样的：

```
 <xx cap="Min" act="act1"/>
    <xx cap="Ver" act="asd" />
    <xx cap="Tan" act="fw" />
    <xxt id="PR" cap="A">
      <xx cap="tY" act="ate" />
      <xx cap="Tn" act="bga" />
      <xx cap="Tn" act="sga" />
      <xxt cap="an" act="y34" />
          <xx cap="Miu" act="sahg"/>
      </xxt>
    </xxt>
    <xx cap="Mzt" act="act1"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:13:23.583

您只需要创建一个方法，该方法接收节点参数以分析并遍历其子节点。

找到“xx”后，将其添加到地图中。当找到 'xxt' 时，您通过将 'xxt' 节点作为参数传递来调用该函数。

```
public function void analyze(Element element) {
    for (Element child : (List<Element>) element.elements()) {
        if (child.getName().equals("xx")) {
            String cap = child.attributeValue("cap").trim();
            String act = child.attributeValue("act").trim();
            map.put(cap,act);
        } else if(child.getName().equals("xxt")){
            analyze(child);
        }
    }
}

// To start recursivity
analyze(minfo); 
```

这段代码不会编译，但它是给你一个例子。

# python - Python：使用命令行或导入

> ID：13063177
> 
> 赞同：1
> 
> 时间：2012-10-25T06:55:24.120
> 
> 标签：python

```
def nearbin():
    parser = argparse.ArgumentParser(description = "choose near bin")
    parser.add_argument("-bin",  type=int,action = "store", default = "10", help="bin number")   
    args = parser.parse_args()   
    bin = args.bin 
    print bin
    return f(bin)

if __name__ == "__main__":
    nearbin() 
```

在命令行中，我可以使用“python test.py -bin 10”来运行程序

如果我想`import test`在另一个 python 脚本`nearbin(bin)`中使用另一个脚本中的函数，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:01:12.943

我通常的做法：

```
def nearbin(bin):
    ...

def main(args):
    parser = argparse.ArgumentParser(...)
    ...
    args = parser.parse_args(args)

    nearbin(args.bin)

if __name__ == '__main__':
    sys.exit(main(sys.argv[1:])) 
```

这使您可以支持直接命令行调用 ( `./script.py -bin 20`)、使用命令行参数调用 ( )`main("-bin 20".split())`和编程调用 ( `nearbin(20)`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T06:58:12.050

然后您应该解析检查中的命令行参数`__main__`并将它们传递给`nearbin`，如下所示：

```
def nearbin(bin):
    print bin
    return f(bin)

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description = "choose near bin")
    parser.add_argument("-bin",  type=int,action = "store", default = "10", help="bin number")   
    args = parser.parse_args()   
    bin = args.bin 
    nearbin(bin) 
```

# android - 安卓 NDK 查询

> ID：13063178
> 
> 赞同：0
> 
> 时间：2012-10-25T06:55:25.260
> 
> 标签：android, android-ndk

我需要在我的android项目中使用一个c++文件，比如说添加两个数字，逻辑已经写在c++文件中。我有 Eclipse 和 android NDK 解压缩文件以及 SDK。我熟悉android开发。有人可以帮助我完成 NDk 的步骤。我已经在网上阅读了有关 cygwin 的信息，但无法让自己对此感到满意。是否对开发至关重要，同时请帮助我完成步骤任何 a+b=c 程序来实现这一点就足够了，请帮助设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:02:54.580

按照这个视频教程，看起来很适合你所需要的：

[http://marakana.com/s/introduction_to_ndk,1153/index.html](http://marakana.com/s/introduction_to_ndk,1153/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:58:49.567

Cygwin 在更高版本的 NDK 中不是必需的。使用 NDK Eclipse 插件，您可以在每次构建项目时设置环境以构建本机库。下载 NDK 插件，将其指向 NDK 文件夹，然后右键单击项目并选择“添加原生支持”。

此外，还有`ndk-build.cmd`NDK 中的脚本；它是一个不需要 Cygwin 的 Windows 命令文件。

至于编码的第一步，请查看 hello-jni 示例。最重要的一点是，C(++) 代码需要包装在特别命名的 C 函数中，以便 Java 使用它。

# javascript - 我们如何使用 jQuery 动态设置表尾值

> ID：13063179
> 
> 赞同：0
> 
> 时间：2012-10-25T06:55:24.770
> 
> 标签：javascript, jquery

我需要从 JSON 数据源动态填充表格页脚。这是桌子的结构

```
<table  id="example_table">
<tfoot id="example_footer">
<tr id="example-footer" style="font-weight:bold">
<th></th>
<th></th>
<th></th>
<th></th>                                           
<th></th>
</tr>
</tfoot>  
</table> 
```

我打算在 jQuery 中使用 append()，如下所示

```
$('#example_footer').append( '<tr>...</tr>' ); 
```

谁能告诉我如何访问 tfooter 并从 js 变量的内容中赋值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:03:56.417

这实际上取决于您的 JSON 的结构。假设它是在变量“数据”中接收到的并且它有 5 个元素，那么 javascript 会有点像：

```
var tr = '<tr>';
tr+= '<th>'+data.element1+'</th>';
tr+= '<th>'+data.element2+'</th>';
tr+= '<th>'+data.element3+'</th>';
tr+= '<th>'+data.element4+'</th>';
tr+= '<th>'+data.element5+'</th>';
tr+= '</tr>';
$('#example_footer').append(tr); 
```

# mysql - mysql正则表达式与多个替换？

> ID：13063182
> 
> 赞同：1
> 
> 时间：2012-10-25T06:55:32.477
> 
> 标签：mysql, regex, search, replace

正则表达式不可用于替换，但是多个替换的行为与正则表达式一样吗

```
UPDATE `usertree` SET branchIndex=REPLACE(branchIndex,'80',''),
branchIndex=REPLACE(branchIndex,',,',',') WHERE id=1 
```

它的工作成功，它有缺点吗？我以后遇到麻烦

我的新树游戏附有大量技术：

我将添加的分支保存在列名 branchIndex 中，它是一个逗号分隔的字符串，用于保存树上的分支位置。

但是当用户剪切一个分支时，我需要从字符串中删除该索引，并保持字符串准确。此外，超过 2000 - 3000 个用户会更频繁地发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:38:28.987

如果要对同一列进行多次替换，则应将其写为：

```
SET branchIndex = REPLACE(REPLACE(branchIndex, '80', ''), ',,', ',') 
```

但与其使用逗号分隔的字符串，不如将分支放在单独的表中。然后，您只需从表中添加和删除行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:34:56.897

这些步骤可以在一次运行中完成，为了更清晰的视图而中断：

```
SELECT REPLACE(CONCAT(',','80,138,149,145,120,180,280',','), ',80,', ','); 
```

最好保持这样：

```
SELECT TRIM(BOTH ',' FROM REPLACE(CONCAT(',','80,138,149,145,120,180,280',','), ',80,', ',')); 
```

# javascript - 单线检查对象及其方法是否都已定义

> ID：13063183
> 
> 赞同：1
> 
> 时间：2012-10-25T06:55:38.297
> 
> 标签：javascript, undefined

> **可能重复：**
> [在 javascript 中，测试深度嵌套在对象图中的属性？](https://stackoverflow.com/questions/4343028/in-javascript-test-for-property-deeply-nested-in-object-graph)

我只想运行这个代码块，并且只有当 obj.method1.mthod2 为真时。但是当 obj 本身未定义时，可能会出现这种情况。或 method1 未定义。

```
if (obj.method1.method2) {

} 
```

那我应该那样做吗？

```
if (typeof(obj)!="undefined" && typeof(obj.method1)!="undefined" && typeof(obj.method1.method2)!="undefined" && obj.method1.method2) {

} 
```

这看起来很丑！有什么办法可以缩短吗？我已经看到这个[Detecting an undefined object property](https://stackoverflow.com/questions/27509/detecting-an-undefined-object-property-in-javascript)链接，但它没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T06:58:42.083

我通常这样写：

```
if (typeof(obj) != "undefined" && obj.method1 && obj.method1.method2){
    // The magic
} 
```

不过，我主要使用函数来执行此操作，因为我很确定某些原始类型的实例会评估为 false，即使它们不是未定义的。

编辑：正如**lanzz**在评论中指出的那样，obj 需要一个 typeof。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:08:17.693

尝试`try`

```
try {
    if(obj.method1.method2) {
         alert("ok!");
    }
}catch(e) {
    alert("obj or some property not defined");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:16:54.313

更简洁：

```
 if (obj && obj.method1 && obj.method1.method2) {
    ...
  } 
```

# .htaccess - 在 Drupal 7 中使用 .htaccess 将 ?q=user/register 重定向到基本 url

> ID：13063186
> 
> 赞同：2
> 
> 时间：2012-10-25T06:55:50.353
> 
> 标签：.htaccess, drupal, redirect

在我们的 drupal 7 站点中，我们没有提供用户注册，而是使用 .htaccess 将用户/注册页面重定向到基本 url。

```
#Custom redirects

RewriteRule ^user/register$ http://%{HTTP_HOST} [R=301,L]

#End Custom redirects 
```

它正在工作，现在我需要将 '?q=user/register' 也重定向到该基本 url。当我尝试

```
 RewriteRule ^?q=user/register$ http://%{HTTP_HOST} [R=301,L] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:11:48.537

URI`/?q=user/register`已经是基础，它只是有一个查询字符串，URI 仍然是`/`. 如果您的目标是删除查询字符串，那么您需要先匹配查询字符串，这在`RewriteRule`. `%{QUERY_STRING}`您需要在 a中匹配`RewriteCond`：

```
RewriteCond %{QUERY_STRING} q=user/register
RewriteRule ^/?$ http://%{HTTP_HOST}/? [R=301,L] 
```

请注意，目标`?`末尾有 a，这将*删除*查询字符串，因此**q=user/register**不会自动附加。

# pyqt4 - QtWebKit：控制每个http请求可以消耗的时间

> ID：13063190
> 
> 赞同：3
> 
> 时间：2012-10-25T06:56:03.897
> 
> 标签：pyqt4, qtwebkit

中`QtWebKit`，有没有一种方法可以控制每个 HTTP 请求的超时时间？例如，如果我为每个 HTTP 请求设置 3 秒，并且在 3 秒后如果请求未完成，则请求中止，其他请求将开始。

我检查了`QNetworkAccessManager`API 参考，但找不到合适的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T00:50:24.263

没有自定义超时的内置方法。有一个已经开放多年的[错误报告。](https://bugreports.qt-project.org/browse/QTBUG-3443)解决此问题的一种方法是`QTimer`根据您的请求开始自定义并将`timeout`信号连接到`abort`回复方法。

一个简单的例子：

```
import sys
from PyQt4 import QtGui, QtCore, QtNetwork

class Window(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)

        self.output = QtGui.QPlainTextEdit()
        # google won't respond to port 81, so it's a way to get timeout
        self.url = QtGui.QLineEdit('http://www.google.com:81')
        self.button = QtGui.QPushButton('Get')
        self.button.clicked.connect(self.getPage)

        navigateLayout = QtGui.QHBoxLayout()
        navigateLayout.addWidget(self.url)
        navigateLayout.addWidget(self.button)
        layout = QtGui.QVBoxLayout()
        layout.addLayout(navigateLayout)
        layout.addWidget(self.output)
        self.setLayout(layout)

        self.manager = QtNetwork.QNetworkAccessManager(self)
        # slot to process finished requests
        self.manager.finished.connect(self.finished)

        self.timeoutTimer = QtCore.QTimer()
        # it only needs to fire once
        self.timeoutTimer.setSingleShot(True)
        # just to see that we aborted
        self.timeoutTimer.timeout.connect(self.aborted)

    def getPage(self):
        url = QtCore.QUrl(self.url.text())
        # request that page
        # `reply` will be the QNetworkReply we'll get our data
        reply = self.manager.get(QtNetwork.QNetworkRequest(url))

        # set our timeout to abort request
        self.timeoutTimer.timeout.connect(reply.abort)
        # start timer (3000ms = 3s)
        self.timeoutTimer.start(3000)

    def finished(self, reply):
        # everything went smoothly and we got our reply before timeout
        # no need to abort now. so stop the timer
        self.timeoutTimer.stop()

        # do something interesting with the result
        status = reply.attribute(QtNetwork.QNetworkRequest.HttpStatusCodeAttribute).toString()
        self.output.appendPlainText('finished (status code %s)' % status)

    def aborted(self):
        # timed out :(
        self.output.appendPlainText('aborted')

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    w = Window()
    w.show()

    sys.exit(app.exec_()) 
```

# jquery-mobile - 移动页面的面包屑

> ID：13063192
> 
> 赞同：3
> 
> 时间：2012-10-25T06:56:12.737
> 
> 标签：jquery-mobile

我正在使用 JQuery Mobile 构建移动网站，现在我必须为页面流中的每个步骤添加一个面包屑。小屏幕（只有4英寸），我不知道这个。

你们对将面包屑放入移动网页有什么想法吗，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:27:11.130

以下是一些链接，您可以使用这些链接将面包屑放入您的网站

[jQuery 移动特定列表](https://stackoverflow.com/questions/11563874/jquery-mobile-specific-list)

[http://www.comparenetworks.com/developers/jqueryplugins/jbreadcrumb.html](http://www.comparenetworks.com/developers/jqueryplugins/jbreadcrumb.html)

[http://onwebdev.blogspot.com/2011/05/css-breadcrumb-separators-with.html](http://onwebdev.blogspot.com/2011/05/css-breadcrumb-separators-with.html)

[CSS 重叠箭头](https://stackoverflow.com/questions/11075116/css-overlapping-arrow)

对于您的小屏幕（只有 4 英寸），您可以根据自己的方便设置 css。

我希望这些可以帮助你。

# python - 使用 OpenCV warpPerspective 时如何显示整个图像

> ID：13063201
> 
> 赞同：25
> 
> 时间：2012-10-25T06:57:17.227
> 
> 标签：python, image-processing, opencv, numpy, computer-vision

我在这里有 2 个测试图像。我的问题是，如何在不裁剪图像的情况下将第一张图像中的正方形映射到第二张图像中的四边形。

图 1： ![图 1](../Images/57483d957748e7d9f686ade12742411a.png)

图 2： ![图 2](../Images/901a08d493fd76f322b860a26446817e.png)

这是我当前使用 openCV warpPerspective 函数的代码。

```
import cv2
import numpy as np

img1_square_corners = np.float32([[253,211], [563,211], [563,519],[253,519]])
img2_quad_corners = np.float32([[234,197], [520,169], [715,483], [81,472]])

h, mask = cv2.findHomography(img1_square_corners, img2_quad_corners)
im = cv2.imread("image1.png")
out = cv2.warpPerspective(im, h, (800,800))
cv2.imwrite("result.png", out) 
```

结果： ![结果](../Images/1a478be76102a4cc383807459613d4cb.png)

如您所见，由于 warpPerspective 函数中的 dsize=(800,800) 参数，我无法获得图像 1 的完整视图。如果我调整 dsize，正方形将无法正确映射。有没有办法调整输出图像的大小，以便我可以获得图像 1 的全图？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-12-03T15:46:56.543

我的解决方案是计算结果图像大小，然后进行翻译。

```
def warpTwoImages(img1, img2, H):
    '''warp img2 to img1 with homograph H'''
    h1,w1 = img1.shape[:2]
    h2,w2 = img2.shape[:2]
    pts1 = float32([[0,0],[0,h1],[w1,h1],[w1,0]]).reshape(-1,1,2)
    pts2 = float32([[0,0],[0,h2],[w2,h2],[w2,0]]).reshape(-1,1,2)
    pts2_ = cv2.perspectiveTransform(pts2, H)
    pts = concatenate((pts1, pts2_), axis=0)
    [xmin, ymin] = int32(pts.min(axis=0).ravel() - 0.5)
    [xmax, ymax] = int32(pts.max(axis=0).ravel() + 0.5)
    t = [-xmin,-ymin]
    Ht = array([[1,0,t[0]],[0,1,t[1]],[0,0,1]]) # translate

    result = cv2.warpPerspective(img2, Ht.dot(H), (xmax-xmin, ymax-ymin))
    result[t[1]:h1+t[1],t[0]:w1+t[0]] = img1
    return result

dst_pts = float32([kp1[m.queryIdx].pt for m in good]).reshape(-1,1,2)
src_pts = float32([kp2[m.trainIdx].pt for m in good]).reshape(-1,1,2)
M, mask = cv2.findHomography(src_pts, dst_pts, cv2.RANSAC, 5.0)

result = warpTwoImages(img1_color, img2_color, M) 
```

![在此处输入图像描述](../Images/52646f12b5681140aefefa892c7788c7.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T18:09:19.617

是的，但您应该意识到输出图像可能*非常*大。我很快编写了以下 Python 代码，但即使是 3000 x 3000 的图像也无法适应输出，由于转换，它太大了。虽然，这是我的代码，但我希望它对你有用。

```
import cv2
import numpy as np
import cv           #the old cv interface

img1_square_corners = np.float32([[253,211], [563,211], [563,519],[253,519]])
img2_quad_corners = np.float32([[234,197], [520,169], [715,483], [81,472]])

h, mask = cv2.findHomography(img1_square_corners, img2_quad_corners)
im = cv2.imread("image1.png") 
```

这里创建一个输出图像，我以 (3000, 3000) 为例。

```
out_2 = cv.fromarray(np.zeros((3000,3000,3),np.uint8)) 
```

通过使用旧`cv`界面，我直接写入输出，因此它不会被裁剪。我尝试使用`cv2`界面进行此操作，但由于某种原因它不起作用......也许有人可以对此有所了解？

```
cv.WarpPerspective(cv.fromarray(im), out_2, cv.fromarray(h))
cv.ShowImage("test", out_2)
cv.SaveImage("result.png", out_2)
cv2.waitKey() 
```

无论如何，这给出了一个非常大的图像，其中包含您的原始图像 1，扭曲。如果您指定输出图像足够大，整个图像将可见。（这可能确实非常大！）

我希望这段代码可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-31T23:12:29.553

首先，按照前面的解决方案计算单应矩阵。获得单应矩阵后，您需要相对于单应矩阵扭曲图像。最后，合并扭曲的图像。

在这里，我将分享另一个可用于合并扭曲图像的想法。（较早的答案，使用一系列索引进行叠加，这里我使用的是 ROI 的掩蔽）

用黑色掩盖感兴趣区域 (ROI) 和图像。然后添加具有 ROI 的图像。（参见[OpenCV 位掩码教程](http://docs.opencv.org/trunk/d0/d86/tutorial_py_image_arithmetics.html)）

```
def copyOver(source, destination):
    result_grey = cv2.cvtColor(source, cv2.COLOR_BGR2GRAY)
    ret, mask = cv2.threshold(result_grey, 10, 255, cv2.THRESH_BINARY)
    mask_inv = cv2.bitwise_not(mask)
    roi = cv2.bitwise_and(source, source, mask=mask)
    im2 = cv2.bitwise_and(destination, destination, mask=mask_inv)
    result = cv2.add(im2, roi)
    return result

warpedImageB = cv2.warpPerspective(imageB, H, (imageA.shape[1], imageA.shape[0]))
result = copyOver(imageA, warpedImageB) 
```

第一张图片：

[![第一的](../Images/280eef302e2694788284b4b4282ed56b.png)](https://i.stack.imgur.com/3GKoy.jpg)

第二张图片：

[![第二](../Images/8dc98077557cd8803b7e370b6a5f4640.png)](https://i.stack.imgur.com/edI0U.jpg)

拼接图像： [![缝合](../Images/c60572a4c3df5f7a504b026856ea3170.png)](https://i.stack.imgur.com/JWZun.jpg)

# jquery - JQuery 的 Ajax 自动完成功能

> ID：13063205
> 
> 赞同：0
> 
> 时间：2012-10-25T06:57:40.620
> 
> 标签：jquery, autocomplete

已解决，JAVASCRIPT 文件中的错误

我正在尝试使用 [http://www.devbridge.com/projects/autocomplete/jquery/让一个非常简单的自动完成测试页面工作](http://www.devbridge.com/projects/autocomplete/jquery/)

我无法工作的源代码如下所示：

```
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>test</title>

      <link rel="stylesheet" href="stylesheets/test.css">

    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="javascripts/jquery.autocomplete.js"></script>

    <script>
        var options, a;
        jQuery(function(){
          options = {lookup:['Jan', 'Feb']};
          a = $('#query').autocomplete(options);
            });

    </script>
</head>
<body>

<input type="text" name="q" id="query" /> 

</body>
</html> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:02:26.077

j 在 jQuery 中是小写的：

```
jQuery(function(){ 
```

不是

```
JQuery(function(){ 
```

我认为其余的代码没有问题。无论如何，尝试使用一些开发工具来调试您的 javascript 代码。[Firebug](https://getfirebug.com/)之类的东西，或者新[的 Firefox 的内置开发工具](https://hacks.mozilla.org/2012/08/new-firefox-command-line-helps-you-develop-faster/)。（几乎每个现代浏览器都有这样的功能）

您可以尝试的另一件事是在 document.ready 函数中编写此代码，如下所示：

```
$(document).ready(function () {
    //your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:06:30.027

> ```
>  var options, a;
>     JQuery(function(){
>       options = {lookup:['Jan', 'Feb']};
>       a = $('#query').autocomplete(options);
>         }); 
> ```

你能试试这个-

```
a = $('#query').autocomplete(options.lookup); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:07:28.960

试试下面的代码：

```
$(function(){
   var options = {lookup:['Jan', 'Feb']};
   $('#query').autocomplete(options);
}); 
```

## 演示：http: [//jsfiddle.net/JhtNz/](http://jsfiddle.net/JhtNz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T07:07:33.913

这是基本的 JQUeryUI 示例：http: [//jsfiddle.net/yYLxB/](http://jsfiddle.net/yYLxB/)

```
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T07:09:46.013

你必须写`jQuery`而不是`JQuery`.

检查[http://jsfiddle.net/2ZKRR/](http://jsfiddle.net/2ZKRR/)

# java - JAXB - 不接受命名空间

> ID：13063207
> 
> 赞同：0
> 
> 时间：2012-10-25T06:57:43.197
> 
> 标签：java, xml, namespaces, jaxb, unmarshalling

我在条目中有一些带有这些名称空间的 XML：

```
xmlns:s='uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882'
xmlns:dt='uuid:C2F41010-65B3-11d1-A29F-00AA00C14882'
xmlns:rs='urn:schemas-microsoft-com:rowset'
xmlns:z='#RowsetSchema' 
```

不幸的是，据我所知，

```
xmlns:z='#RowsetSchema' 
```

如果我想使用 JAXB 创建类，则启动错误。我试图更改命名空间，但是当我想解组时，JAXB 说他希望他找到另一个命名空间。

所以我试图找到一个解决方案来避免这个问题，如果可能的话不想动态改变我的命名空间......

有什么建议么 ？

# python - DeprecationWarning: BaseException.message 自 Python 2.6 起已弃用 exception.__class__, exception.message,

> ID：13063212
> 
> 赞同：10
> 
> 时间：2012-10-25T06:58:19.837
> 
> 标签：python, exception, python-2.6, deprecation-warning

谁能告诉我在这个 Django 中间件中收到警告背后的实际原因，我该如何解决这个问题？

我收到这条消息“ *DeprecationWarning: BaseException.message has been deprecated as of Python 2.6 exception.class , **exception.message** ,* ”

```
class GeneralMiddleware(object):
    def process_exception(self, request, exception):
        if exception.__class__ is SandboxError:
            # someone is trying to access a sandbox that he has no
            # permission to
            return HttpResponseRedirect("/notpermitted/")

        exc_type, value, tb = sys.exc_info()
        data = traceback.format_tb(
                    tb, None) + traceback.format_exception_only(
                    exc_type, value)
        msg = (
            "Failure when calling method:\n"
            u"URL:'%s'\nMethod:'%s'\nException Type:'%s'\n"
            u"Error Message '%s'\nFull Message:\n%s"
            % (request.get_full_path(), request.method,
               exception.__class__, exception.message, 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-25T07:46:42.950

如果我没记错的话，当 Python 在 2.5（？）中切换到新的 raise 语法时，他们摆脱了`message`成员，转而使用`args`元组。为了向后兼容，`BaseException.message`实际上与 . 相同`BaseException.args[0] if BaseException.args else None`，但您不应该在新代码中使用它。

因此，根据您的需要，更改`message`为`args`（如果您想要所有参数）或`args[0]`（或者，如果您担心可能没有参数，则可以使用更高级的版本来防止 args `()`）。

这种变化的原因是，有了新式的例外，就没有魔法`raise`了`except`。您只是在语句中调用异常类的构造函数`raise`，并在语句中的变量中捕获异常`except`。所以：

```
try:
  raise MyException('Out of cheese error', 42)
except Exception as x:
  print x.args 
```

这将打印`('Out of cheese error', 42)`. 如果你只有`print x.message`你就会得到`'Out of cheese error'`. 因此，过去必须做一些花哨的事情才能将错误代码作为单独的成员等携带的 Exception 子类可以被简化；事实上，整个事情归结为：

```
class BaseException(object):
  def __init__(self, *args):
    self.args = args 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:06:28.523

你的`SandboxError`类是从类继承的`Exception`吗？如果没有，您将收到此消息。推理在[PEP352](http://www.python.org/dev/peps/pep-0352/)中描述。

在代码中，您的异常应该这样定义：

```
class SandboxException(Exception):
    .... 
```

# java - 解释这个 for 循环片段

> ID：13063216
> 
> 赞同：0
> 
> 时间：2012-10-25T06:58:32.703
> 
> 标签：java

这里我们有一个二进制堆的数组实现的片段。我想要一些帮助来了解这个 for 循环在伪代码中的含义：

```
public void insert (Anytype x) { 
    int hole = ++currentSize; //currentSize is the size of the array
    for (array[0] = x; x.compareTO(array[hole / 2]) < 0; hole /= 2)
        array[hole] = array[hole / 2];
    array[hole] = x;
} 
```

我似乎无法理解这个 for 循环是如何工作的。谢谢你。

**编辑**填补了这个漏洞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:10:08.307

转换成二叉堆的数组可以看成如下

```
 [elem 0] <-- put the inserted element here? (why? a precaution perhaps?)

         [element 1]...
    [element2] [ element3 ]  
[elem4][elem5] [elem6][elem7]  
[x][x] [x][x]  [x][XX] ... <-- unoccupied 
```

代码通过将索引孔除以 2 到达每个节点的父节点。然后，如果父节点 > 当前节点，它将父节点向上移动到当前节点。

我认为有一个错误......至少这不是典型的解决方案，将插入的元素作为最后一个未被占用的“洞”并从那个位置向上移动......

正确的方法是开始比较最后一个元素的父元素并迭代到根元素。没有必要交换，但是索引“洞”结束的地方，那是最终放置新元素的合适位置。（典型的解决方案将 'X' 放在最后一个位置并*交换*，但这是低效的。） for 循环中的第一次初始化也是不必要的。

无论如何，当索引 0 被省略时，索引算术是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:10:38.760

我不太确定你在找什么，但这里有：

compareTo 返回一个整数。如果 x 小于 y，x.compareTo(y) 返回一个负数。

所以代码大致是这样的：

```
for( set the first pos in the array to x; if x is less than array[hole/2]; hole/=2){
   array[hole] = array[hole/2];

Set your arr[final val of hole] to x 
```

# android - Web 视图 addJavascriptInterface 问题

> ID：13063222
> 
> 赞同：1
> 
> 时间：2012-10-25T06:58:59.623
> 
> 标签：android

当在 html 页面中单击表格行时，我试图从我的 Web 视图中获得回调。我的活动如下：

```
 public class LocalizationTestActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LinearLayout linearLayout = new LinearLayout(this);
    linearLayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    WebView webView = new WebView(this);
    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
    JavaScriptInterface javaScriptInterface=new JavaScriptInterface(this);
    webView.addJavascriptInterface(new JavaScriptInterface(this), "Android");
    Vector<Employee> test=new Vector<Employee>();
    for (int i=1;i<20;i++){
        Employee employee=new Employee();
        employee.setId(i);
        employee.setName("Norton - "+i);
        employee.setAddress("Indiranagar - " +i);
        test.add(employee);
    }
    javaScriptInterface.setDashboardList(test);

    webView.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageFinished(WebView view, String url) {

            view.loadUrl("javascript:populateData()");
        }

    });

    webView.loadUrl("file:///android_asset/html/test2.html");
    linearLayout.addView(webView);
    setContentView(linearLayout);
}
} 
```

我的 Java 脚本类如下：

```
public class JavaScriptInterface {
private Context mContext;
private Vector employeeList;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    public void callBack(String toast) {

        int index=Integer.parseInt(toast);
        Intent intent=new Intent(mContext, SampleActivity.class);

        if(employeeList!=null && index<employeeList.size()){
            Employee employee=(Employee) employeeList.elementAt(index);
            intent.putExtra("value", "1");
            intent.putExtra("name", employee.getName());
            intent.putExtra("address", employee.getAddress());
        }
        mContext.startActivity(intent);
    }

    public void setEmployeeList(Vector employeeList) {
        this.employeeList= employeeList;
    }
    } 
```

回调工作正常。但是，当我尝试从**callBack**方法访问employeeList 时，尽管我正在从我的活动类中设置列表值，但列表始终为**空。**我错过了什么吗？有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:06:33.140

改变

```
webView.addJavascriptInterface(new JavaScriptInterface(this), "Android"); 
```

至

```
webView.addJavascriptInterface(javaScriptInterface, "Android"); 
```

# cordova - 从移动设备打印

> ID：13063224
> 
> 赞同：1
> 
> 时间：2012-10-25T06:59:03.333
> 
> 标签：cordova, printing, extjs

我们正在开发一个 Sencha Touch 应用程序，该应用程序需要在 android 和 iOS 上都可以打印。

我们愿意使用 phonegap 来实现这一点。是否有任何 phonegap 插件可以帮助我们连接到 wifi 打印机并向其发送作业。请让我知道是否有任何其他方式可以实现此任务。

# entity-framework - 动态属性绑定 + 无法确定类型之间关联的主体端

> ID：13063229
> 
> 赞同：0
> 
> 时间：2012-10-25T06:59:31.293
> 
> 标签：entity-framework, attributes

我正在努力寻找解决“无法确定类型之间关联的主要目的”的正确方法。此关联的主体端必须使用关系流式 API 或数据“实体框架”显式配置

我有一个像这样的实体。

```
public partial class Document
{
     DocumentId {get; set;}
     DocumentName{get; set;}
}

public class SpecialDocument
{
     DocumentId {get; set;}  --> this is actually a foreign key from Document  
                                 at the same time it is also the primary key 
     SpecialDocumentName {get; set;}
} 
```

我找到了一个解决方案，例如在属性上添加 ForeignKey 属性。

```
public partial class SpecialDocument
{
      [ForeignKey("Document")]
      DocumentId {get; set;)
      SpecialDocumentName {get; set;}
} 
```

但是问题是类是自动生成的，每当我更新 edmx 文件时，SpecialDocument 都会被覆盖，所以现在我需要重新添加 ForeginKey 属性。

我可以对属性的 SpecialDocument 或 Dnyaminc 属性附件的单独部分类做些什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:49:23.673

看起来您正在尝试使用继承，因此`DocumentId`不会被视为实体框架的外键。尝试更改您的模型以使用继承，它应该可以解决您的问题，就像这样。

```
public partial class Document
{
     DocumentId {get; set;}
     DocumentName{get; set;}
}

public class SpecialDocument : Document
{
     SpecialDocumentName {get; set;}
} 
```

通过从 中删除`DocumentId`属性`SpecialDocument`并使其继承自`Document`，Entity Framework 将知道，当您创建新属性时`SpecialDocument`，它将首先创建一个标准`Document`，然后在`SpecialDocument`表中根据需要添加属性。

# asp.net - 标签服务器端点击

> ID：13063231
> 
> 赞同：0
> 
> 时间：2012-10-25T06:59:41.777
> 
> 标签：asp.net, javascript-events

我有一个标签控件和 javascript 函数 callme()，如下所示。单击 Press label 时，它可以工作。

```
<asp:Label ID="lblpress" runat="server" onclick="callme()" Text="Press"></asp:Label> 
```

我想从服务器端事件以编程方式单击此标签客户端事件。我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:17:46.983

使用[Attributes 集合属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.attributes.aspx)

```
protected void Page_Load(object sender, EventArgs e)
{ 
    lblpress.Attributes.Add("onclick", "'callme()'");

    //if the attribute already exist, you can change it this way
    lblpress.Attributes["onclick"] = "'callme()'";
} 
```

> Attributes 集合包含在 Web 服务器控件的开始标记中声明的所有属性的集合。这允许您以编程方式控制与 Web 服务器控件关联的属性。您可以向集合添加属性或从集合中删除属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:07:36.750

您可以使用 RegisterClientScriptBlock 来执行此操作。

```
 String csName = "LabelClickScript";    
    ClientScriptManager cs = Page.ClientScript;   
    StringBuilder csText = new StringBuilder();
    csText.Append("<script type=\"text/javascript\"> function DoClick() {");
    csText.Append("alert('Text from client script.')

                    } 
                    DoClick();
                  </");
    csText.Append("script>");
    cs.RegisterClientScriptBlock(this.GetType(), csName, csText.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:46:16.193

为什么不使用适当的控件，例如 HTML 中的链接按钮或锚点

# iphone - iphone / ipad 应用程序中的图像处理

> ID：13063233
> 
> 赞同：1
> 
> 时间：2012-10-25T06:59:48.543
> 
> 标签：iphone, xcode, image, ipad

创建将在 iPad 和 iPhone 上运行的应用程序时，图像管理是如何工作的？

假设您有一个为 iPad 创建的应用程序，并且所有背景图像都是 1024x748（我知道那不是视网膜大小）。

如果您要让这个应用程序也可以在 iPhone 上运行，您不会希望人们必须使用 iPhone 版本下载完整的 1024x748 背景。

我知道您可以为每台设备提供图像，但苹果是否以某种方式设置了应用程序，以便如果您下载 iPhone 版本，它不会下载更大的图片？

还是我完全误解了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:04:06.953

所有默认启动图像都必须随应用程序一起提供。如果应用程序是通用的，则为 iPad 和 iPhone 版本。它们必须有相应的 ~ipad 和 ~iphone 后缀。你不能告诉苹果——“嘿，排除 1024x768 图像，因为这家伙正在使用 iPhone”。应用程序包由您和苹果签署。提交后对其进行调整将导致其无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:04:14.863

你必须选择：

1.  创建一个通用应用程序，所有图形都在里面

2.  创建 2 个单独的应用程序，在 iphone 中仅添加 iphone 图形，在 ipad 中仅添加 ipad 图形。

# ruby-on-rails - 旅客服务器周期性关闭的主要原因是什么？

> ID：13063234
> 
> 赞同：2
> 
> 时间：2012-10-25T06:59:49.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, passenger

在我的 Rails 应用程序中，我正在使用

`Apache + ruby 1.9.2p180 + Rails 3.0.5 + Phusion Passenger version 3.0.13`

有人可以告诉我为什么我的乘客会定期关闭。有人请帮忙

```
This is the last error after which the application stops working

[Fri Aug 31 02:07:23 2012] [error] [client 141.212.121.10] Premature end 
of script headers: 
[ pid=17952 thr=1 file=ext/apache2/Hooks.cpp:817 time=2012-08-31 
02:07:23.257 ]: The backend application (process 13680) did not send a 
valid HTTP response; instead, it sent nothing at all. It is possible 
that it has crashed; please check whether there are crashing bugs in 
this application. 
[Fri Aug 31 04:20:55 2012] [notice] child pid 27795 exit signal 
Segmentation fault (11) 
[Fri Aug 31 04:20:56 2012] [notice] child pid 22071 exit signal 
Segmentation fault (11) 
[Fri Aug 31 04:21:03 2012] [notice] child pid 13025 exit signal 
Segmentation fault (11) 
[Fri Aug 31 04:21:04 2012] [notice] child pid 24538 exit signal 
Segmentation fault (11) 
[Fri Aug 31 04:21:06 2012] [notice] child pid 17065 exit signal 
Segmentation fault (11)

I am using 
ruby 1.9.2p180 
Rails 3.0.5 
Phusion Passenger version 3.0.13 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:15:13.270

错误说：“请检查此应用程序中是否存在崩溃错误。”

您是否尝试删除您的 Web 应用程序，并尝试使用简单的 index.html 页面？

如果它是稳定的，那么问题不是来自乘客配置，而是来自您的应用程序。在这种情况下，通过在您的应用程序中添加记录器来增加日志详细程度，每一步都有用户交互。

还要检查您使用的是 apache2-mpm-prefork 而不是 apache2-mpm-worker。这个 apache2-mpm-worker 是一个多线程版本，不幸的是乘客不支持 apache2 的多线程。尝试以下命令检查它是否已安装：

```
aptitude show apache2-mpm-worker
aptitude show apache2-mpm-prefork 
```

此命令显示什么？

```
passenger-install-apache2-module 
```

你应该把一切都变成绿色。

# java - 使用 <#list> 未定义变量的异常不会生成 pdf

> ID：13063235
> 
> 赞同：0
> 
> 时间：2012-10-25T06:59:53.923
> 
> 标签：java, exception, freemarker

我正在尝试使用以下代码列出所有信用条款，但是，它会产生此错误：异常：freemarker.core.InvalidReferenceException 消息：表达式供应商.凭证在第 345 行第 16 列未定义。

```
<#list supplier.vouchers as voucher>
          <fo:table-cell padding-left="3px" column-width="200px" text-align="center" border="1px solid black">
            <fo:block>${voucher.creditTerm}</fo:block>
          </fo:table-cell>
          </#list> 
```

我究竟做错了什么？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:03:15.623

您引用的变量未定义。您必须检查它是否已定义：

```
<#if supplier?? && supplier.vouchers?? > 
    <#list supplier.vouchers as voucher>
        <fo:table-cell padding-left="3px" column-width="200px" text-align="center" border="1px solid black">
            <fo:block>${voucher.creditTerm}</fo:block>
        </fo:table-cell>
    </#list>
</#if> 
```

# perl - cgi perl 脚本不工作，只有 cgi bash 脚本工作？

> ID：13063237
> 
> 赞同：0
> 
> 时间：2012-10-25T07:00:12.163
> 
> 标签：perl, apache, cgi

我有奇怪的问题。，

从命令行**cgi bash 脚本和 cgi perl 脚本工作**，但从**浏览器只有 cgi bash 脚本工作，而不是 cgi perl**。

从浏览器访问 cgi perl 脚本后，我得到**500 Internal server error**。

```
and apache error log says

[Thu Oct 25 01:58:59 2012] [error] [client x.x.x.x] (13)Permission denied: exec of '/home/x/x/x/x/public_html/cgi-bin/test.cgi' failed
[Thu Oct 25 01:58:59 2012] [error] [client x.x.x.x] Premature end of script headers: test.cgi 
```

我想从浏览器运行 cgi perl 脚本。

我该怎么做。

```
[root@www ~]# which perl
/usr/bin/perl

[root@www cgi-bin]# perl test.cgi
Content-type: text/plain

testing... 
```

test.cgi的来源

```
#!/usr/bin/perl

print "Content-type: text/plain\n\n";
print "testing...\n"; 
```

谢谢你的时间。

它是带有 apache 2 的专用服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:35:14.183

正如 Barmar 所提到的，您可能有权限问题。此外，由于您刚刚开始，这里有一个改进的测试脚本：

```
#!/usr/bin/perl
use strict;
use warnings;

#Useful for testing: Perl error messages, plus your die statements, will get
#sent to the browser.  Otherwise you will just see "Internal Server Error".
use CGI::Carp qw/fatalsToBrowser/;

#Always use the CGI module for your scripts.
use CGI; 

#Create simple HTML output (taken directly from CGI documentation).
my $q = CGI->new;                    # create new CGI object
print $q->header,                    # create the HTTP header
      $q->start_html('hello world'), # start the HTML
      $q->h1('hello world'),         # level 1 header
      $q->end_html;                  # end the HTML 
```

请参阅[有关 CGI 的文档以](http://perldoc.perl.org/CGI.html)获取更多信息。

另外，为了澄清：“脚本头过早结束”错误意味着您的脚本没有向浏览器发送任何输出。在这种情况下，这是因为您的脚本没有运行。但是，如果您的脚本运行但实际上并未发送任何输出，也可能发生这种情况。这是一个有用的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:35:00.650

您是否为 perl 脚本正确设置了权限？将它们与您为 bash 脚本设置的权限进行比较。

也许会按照[这里](http://computer.wer-weiss-was.de/perl/premature_end_of_script_headers-418653.html)`chmod 755`的建议有所帮助（不幸的是，仅限德语）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T03:13:30.693

检查哪个用户正在运行 httpd

```
[root@www ~]# top | grep httpd
15607 apache    16   0  210m  19m 4228 S 23.5  0.2   0:00.52 httpd 
```

在上面的 apache 用户正在运行。

试试苏阿帕奇，

使用命令 whoami 确认您是 apache，

如果您还没有切换到 apache，那么这意味着没有为用户 apache 分配 shell，

现在修改 /etc/passwd 文件

查找用户 apache 并更改结束于

```
/bin/false

to 

/bin/bash 
```

保存 passwd 文件，然后尝试 su apache，检查 whoami，如果您成功切换到用户 apache，然后转到脚本所在的目录并尝试从那里运行它。

你会得到类似的东西

```
bash: /usr/bin/perl: Permission denied 
```

这意味着用户“apache”没有用户 perl 的权限。

您需要向用户“apache”添加执行 perl 脚本的权限。

***不要忘记像以前一样更改 passwd 文件。

您可以通过将组添加到特定用户并更改组名 httpd.conf 来做到这一点。

谢谢

# spring - 春季Hadoop | Job Tracker GUI 上未显示作业

> ID：13063238
> 
> 赞同：1
> 
> 时间：2012-10-25T07:00:19.920
> 
> 标签：spring, hadoop

我正在为我的应用程序使用 Spring for Apache Hadoop 1.0.0.M2。该应用程序使用 maven 程序集插件打包为二进制发行版，并使用以下命令在集群上运行：java -jar mlprocessor.jar

jar 中的清单文件包括对加载 spring 上下文文件的 Main 类的引用。这项工作执行得很好，我也看到了结果。但是，在 Job Tracker GUI 上没有此作业的踪迹。

日志显示以下警告：

```
WARN [org.apache.hadoop.util.NativeCodeLoader] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable 
```

我想检查是否有人知道这个问题，或者我遗漏了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:25:57.077

我确实在 Spring Hadoop 论坛 (http://forum.springsource.org/showthread.php?131245-Job-not-appearing-on-JobTracker-user-interface) 上发布了相同的问题，并在那里收到了答案：

我在 hdp:configuration 中缺少“mapred.job.tracker”属性配置。将配置更改为以下后，Job tracker UI 能够跟踪此作业。

```
<hdp:configuration>
    fs.default.name=${fs.default.name}
    mapred.job.tracker=${mapred.job.tracker}
</hdp:configuration> 
```

# ruby-on-rails - 活动记录关系有很多通过

> ID：13063239
> 
> 赞同：1
> 
> 时间：2012-10-25T07:00:22.843
> 
> 标签：ruby-on-rails, activerecord, has-many-through

我有以下型号：

```
class FavoriteDirectorSet < ActiveRecord::Base
  has_many :links
  has_many :directors, through: :links
end

class Link < ActiveRecord::Base
  belongs_to :favorite_director_set
  belongs_to :director
end

class Director < ActiveRecord::Base
  has_many :links
  has_many :favorite_director_sets, through: :links
  has_many :movies
end

class Movie < ActiveRecord::Base
  belongs_to :director
end 
```

我一直在通过将范围链接在一起来构建查询，但我不清楚如何分解这个。如何创建与给定的 FavoriteDirectorSet id 匹配的电影的 Active Record Relation 对象？

更新

我有两个有效的解决方案（“favourite_director”缩写为 fd）：

1）@rubyman 选项 1：

```
fd_sets = FDSet.find(:fd_set_id)
res = Movie.where('director_id IN (?)', fd_sets.directors.map(&:id)) 
```

2）@rubyman 选项 2：

```
res = Movie.joins(:director=>[:links=>:fd_set]).
    where("fd_sets.id = ?", :fd_set_id) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:56:41.363

一种方法是 fds = FavoriteDirectorSet.find(fds_id)

Movie.where('director_id IN (?)', fds.deectors.map(&:id))

或加入（不确定）

Movie.joins(:director=>[:links=>:favorite_director_sets]).where("favorite_director_sets.id = ?", fds_id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:48:11.830

您可以根据[RubyGuides使用 JOIN](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)

我会使用的语法是：

```
@movie.joins("INNER JOIN favorite_director_sets ON favorite_director_sets.fk_director = movies.fk_director") # please ensure that table names are correct - if they follow convention, I believe they are correct 
```

现在您可以添加 where 条件，即`favorite_director_sets.id = ?, fds_id`

请注意，在您的情况下，您可能想要使用 LINNER 以外的其他东西。在[CoddingHorror](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)上有很好的视觉解释 INNER JOIN 的含义以及替代方案。

更新：

请注意，其他解决方案要简单得多，但性能可能更差：

```
fds = FavoriteDirectorSet.find(fds_id)
@movies = fds.director.movies 
```

或者您甚至可以将其写在一行中：

```
@movies = FavoriteDirectorSet.find(fds_id).director.movies 
```

更新：这个答案是错误的，因为我忘记了链接表。Rubyman 的解决方案看起来不错

# objective-c - 在 iOS 6 中填充 Tableview 单元格

> ID：13063243
> 
> 赞同：16
> 
> 时间：2012-10-25T07:00:32.773
> 
> 标签：objective-c, uitableview

我已经尝试搜索一些关于如何填充表格视图的教程，但我发现的都是旧的和过时的视频。我尝试从最近的一个中进行，但它不起作用。我有

```
- (void)viewDidLoad
{
    [super viewDidLoad];
   [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
    [chemarray addObject:@"2"];
    [chemarray addObject:@"test"];
    [chemarray addObject:@"3"];
    [chemarray addObject:@"science"];  
} 
```

和

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [chemarray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"     forIndexPath:indexPath];

     cell.textLabel.text = [chemarray objectAtIndex:indexPath.row];
    return cell;
} 
```

根据本教程，运行时，它应该显示我的数组中的项目，但对我来说，它没有！有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T07:08:55.020

您忘记为单元格标识符[注册](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)nib/class。

形成 Apple[`UITableView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)文档：

> 重要提示：在调用方法之前，您必须使用[`registerNib:forCellReuseIdentifier:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW76)or 方法注册类或 nib 文件 。[`registerClass:forCellReuseIdentifier:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW93)`dequeueReusableCellWithIdentifier:forIndexPath:`

这是一个普通的例子`UITableViewCell`：

```
- (void) viewDidLoad {
   [super viewDidLoad];

   [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
} 
```

如果您不注册 nib/class，则该方法`dequeueReusableCellWithIdentifier:forIndexPath:`本质上与`dequeueReusableCellWithIdentifier:`. 它不会自动为您创建实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T02:23:01.027

我遇到了同样的问题。如果您使用的是 iOS6，那么我假设您使用的是故事板并且您将视图控制器与您的自定义类相关联。

然后解决方案是进入情节提要，转到表格视图中单元格的属性并将标识符值更改为“单元格”。无需在 ViewDidLoad 中注册该类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:08:18.920

1.  将委托设置为`uitableview.delegate = self`；
2.  检查您是否有声明协议 `<UITableViewDelegate, UITableViewDataSource>`
3.  如果您不使用情节提要，请确保在 cell==nil 时初始化单元格

    ```
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
     if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
     } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-19T16:41:23.150

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.textLabel.text = [chemarray objectAtIndex:indexPath.row];
    return cell;
} 
```

确保你有`UITableViewDataSource`,`UITableViewDelegate`在你的`.h`和连接的`tableview`委托、数据源和`cellindentifier`Cell 中`.xib`。

# r - R的格式化输出

> ID：13063246
> 
> 赞同：3
> 
> 时间：2012-10-25T07:00:50.353
> 
> 标签：r, plot, gnu, output

我想在 GNU 图上绘制 R 的输出。例如，我有一个`x`存储整数的矩阵，我将矩阵`y`设为`y<- x^2`.

现在 GNU plot 需要输入以下格式的输入数据文件：

```
x1 y1
x2 y2
x3 y3
... and so on... 
```

如何从 R 生成此输出文件？

具体来说，如何删除 R 输出中显示的索引并垂直排列矩阵的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:51:32.527

在 TeachingDemos 包中有一组 R 和 gnuplot 之间的基本接口函数，请参阅`?gp.open`. 这些可能会满足您的需求，或者您可以查看代码以获取以 gnuplot 所需格式创建数据文件的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T07:12:20.730

如果你想绘制两个向量，或者对矩阵做一些事情，我并不完全清楚。我假设第一个。让我们创建一些示例数据：

```
x = 1:10
y = x^2    
z = cbind(x, y) 
```

接下来，我们把它放在一个文件中：

```
write.table(z, file = "/tmp/spam", row.names = FALSE, col.names = FALSE) 
```

如果我们检查输出：

```
$ cat /tmp/spam
1 1
2 4
3 9
4 16
5 25
6 36
7 49
8 64
9 81
10 100 
```

我认为这就是你所需要的。或者，只需执行以下操作：

```
plot(y~x, z, type = "l") 
```

![在此处输入图像描述](../Images/9b48b7b82ebd399565ea8fe62dde70bd.png)

并完全避免使用 GNUplot。或者更好的 imo，使用`ggplot2`：

```
require(ggplot2); theme_set(theme_bw())
qplot(x, y, data = data.frame(z), geom = "line") 
```

![在此处输入图像描述](../Images/ea72603d6cac94694f3eb79bcb9c21a6.png)

# sql-server - 在 SQL Server 中的实体上搜索尽可能多的条件

> ID：13063248
> 
> 赞同：0
> 
> 时间：2012-10-25T07:00:52.390
> 
> 标签：sql-server

假设我有一个包含以下列的 SQL Server 表：

```
ID_PK uniqueidentifier NOT NULL PRIMARY KEY,
ID uniqueidentifier NOT NULL,
TYPE int NOT NULL,
VALUE nvarchar(MAX) NOT NULL 
```

进一步假设 ID-TYPE 组合和 ID-TYPE-VALUE 组合在数据库中是唯一的。TYPE 可以是 1、2 或 3。假设我的数据如下所示：

```
UI1 1 'A' 
UI1 2 'B'
UI2 1 'X'
UI2 3 'C'
UI3 2 'Y'
UI4 2 'B' 
```

如果存在，我需要搜索所有类型，其中类型 1 是“A”，类型 2 是“B”，类型 3 是“C”。如果特定 ID 的类型不存在，那么我不需要搜索它。如果类型的值不正确，则不要选择 ID。

所以，我的结果集应该是这样的：

```
UI1 1 'A'
UI1 2 'B'
UI4 2 'B' 
```

UI2 的类型 1 不是 'A'，所以不要返回 UI2。UI3 的类型 2 不是“B”，所以也忽略它。

然后我需要唯一的 ID：

```
UI1
UI4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:05:40.897

试试这个查询：

```
SELECT ID, TYPE, VALUE
FROM Table
WHERE (TYPE = 1 AND VALUE = 'A')
  OR (TYPE = 2 AND VALUE = 'B')
  OR (TYPE = 3 AND VALUE = 'C') 
```

更新：

```
SELECT t.ID
FROM t
INNER JOIN (
  SELECT ID, MIN(CASE WHEN((TYPE = 1 AND VALUE = 'A')
    OR (TYPE = 2 AND VALUE = 'B')
    OR (TYPE = 3 AND VALUE = 'C')) THEN 1 ELSE 0 END) AS VALID
  FROM t 
  GROUP BY t.ID
) x 
ON x.ID = t.ID AND x.VALID = 1
GROUP BY t.ID 
```

# python - 如何在数据集上使用 pandas 找到中位数？

> ID：13063259
> 
> 赞同：1
> 
> 时间：2012-10-25T07:01:26.363
> 
> 标签：python, pandas

我有包含 3 列的数据框数据 - 日期、段和指标。我正在执行以下操作：

```
data = pandas.read_csv("Filename.csv")
ave = data.groupby('Segment').mean() #works
ave = data.groupby('Segment').median() #gives error
ave['median'] = data.groupby('Segment').median()

Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/usr/lib/pymodules/python2.7/pandas/core/frame.py", line 1453, in __setitem__
    self._set_item(key, value)
  File "/usr/lib/pymodules/python2.7/pandas/core/frame.py", line 1488, in _set_item
    NDFrame._set_item(self, key, value)
  File "/usr/lib/pymodules/python2.7/pandas/core/generic.py", line 301, in _set_item
    self._data.set(key, value)
  File "/usr/lib/pymodules/python2.7/pandas/core/internals.py", line 616, in set
    assert(value.shape[1:] == self.shape[1:])
AssertionError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:33:04.497

你遇到什么错误？

```
ave = data.groupby('Segment').median() 
```

我认为这应该可行，也许你的数据中有一些东西导致了错误，比如 nan，我只是在猜测。您可以尝试应用自己的中值函数来查看是否可以解决错误原因，例如：

```
def mymed(group):
    return np.median(group.dropna())

ave = data.groupby('segment')['Metric'].apply(mymed) 
```

如果您可以提供一些复制错误的示例数据会更容易。

这是一种不同的方法，您可以将中值添加回原始数据框，度量列的中值变为：

```
data['metric_median'] = data.groupby('Segment')['Metric'].transform('median') 
```

将组的中位数附加到每个数据点是否有用取决于您之后想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-28T22:17:34.970

我认为我们可以使用以下代码计算中位数。

```
print(data['segment'].median()) 
```

如果它不起作用，我们可以尝试用平均值代替缺失数据，然后计算中位数。

# perl - 如何将 Image::Magick 包装到 PAR(perl)？

> ID：13063261
> 
> 赞同：0
> 
> 时间：2012-10-25T07:01:42.163
> 
> 标签：perl

ImageMagick 下载
[http://www.imagemagick.org/script/binary-releases.php#windows](https://www.imagemagick.org/script/download.php#windows)

C:\Program Files (x86)\ImageMagick-6.8.0-Q16
in ALL Dll copy
*.dll

```
use strict;
use warnings;
my $l;
my @dll=glob "*.dll";
$l.=" -l $_" foreach(@dll);
#print $l;
print `pp -v -o ss.exe$l img.pl`; 
```

运行 image.exe
**成功！！！！**

# 我也试试 gm.exe 谢谢大家

==================================================== ================================

**image.exe(双击)完成不创建k.jpg
请告诉我如何解决**
perl pp.pl -> create "image.exe"

perl image.pl -> 创建 k.jpg
image.exe（双击） -> 无法创建 k.jpg

图像.pl

```
use strict;
use warnings;
use Image::Magick;
my $img=Image::Magick->new;
$img->Read('s.bmp');
$img->Write('k.jpg'); 
```

pp.pl

```
use strict;
use warnings;
my $l;
my @dll=glob "*.dll";
$l.=" -l $_" foreach(@dll);
print $l;
print `pp -v -o image.exe$l -M Image::Magick image.pl`; 
```

请告诉我如何启动 Imagemagick PAR

**== dll List ==**

```
-l analyze.dll -l atl100.dll -l CORE_RL_bzlib_.dll -l CORE_RL_coders_.dll -l CO
RE_RL_filters_.dll -l CORE_RL_jbig_.dll -l CORE_RL_jp2_.dll -l CORE_RL_jpeg_.dll
 -l CORE_RL_lcms_.dll -l CORE_RL_libxml_.dll -l CORE_RL_Magick++_.dll -l CORE_RL
_magick_.dll -l CORE_RL_png_.dll -l CORE_RL_tiff_.dll -l CORE_RL_ttf_.dll -l COR
E_RL_wand_.dll -l CORE_RL_xlib_.dll -l CORE_RL_zlib_.dll -l IM_MOD_RL_aai_.dll -
l IM_MOD_RL_art_.dll -l IM_MOD_RL_avs_.dll -l IM_MOD_RL_bgr_.dll -l IM_MOD_RL_bm
p_.dll -l IM_MOD_RL_braille_.dll -l IM_MOD_RL_cals_.dll -l IM_MOD_RL_caption_.dl
l -l IM_MOD_RL_cin_.dll -l IM_MOD_RL_cip_.dll -l IM_MOD_RL_clip_.dll -l IM_MOD_R
L_clipboard_.dll -l IM_MOD_RL_cmyk_.dll -l IM_MOD_RL_cut_.dll -l IM_MOD_RL_dcm_.
dll -l IM_MOD_RL_dds_.dll -l IM_MOD_RL_debug_.dll -l IM_MOD_RL_dib_.dll -l IM_MO
D_RL_djvu_.dll -l IM_MOD_RL_dng_.dll -l IM_MOD_RL_dot_.dll -l IM_MOD_RL_dps_.dll
 -l IM_MOD_RL_dpx_.dll -l IM_MOD_RL_emf_.dll -l IM_MOD_RL_ept_.dll -l IM_MOD_RL_
exr_.dll -l IM_MOD_RL_fax_.dll -l IM_MOD_RL_fd_.dll -l IM_MOD_RL_fits_.dll -l IM
_MOD_RL_fpx_.dll -l IM_MOD_RL_gif_.dll -l IM_MOD_RL_gradient_.dll -l IM_MOD_RL_g
ray_.dll -l IM_MOD_RL_hald_.dll -l IM_MOD_RL_hdr_.dll -l IM_MOD_RL_histogram_.dl
l -l IM_MOD_RL_hrz_.dll -l IM_MOD_RL_html_.dll -l IM_MOD_RL_icon_.dll -l IM_MOD_
RL_info_.dll -l IM_MOD_RL_inline_.dll -l IM_MOD_RL_ipl_.dll -l IM_MOD_RL_jbig_.d
ll -l IM_MOD_RL_jnx_.dll -l IM_MOD_RL_jp2_.dll -l IM_MOD_RL_jpeg_.dll -l IM_MOD_
RL_label_.dll -l IM_MOD_RL_mac_.dll -l IM_MOD_RL_magick_.dll -l IM_MOD_RL_map_.d
ll -l IM_MOD_RL_mat_.dll -l IM_MOD_RL_matte_.dll -l IM_MOD_RL_meta_.dll -l IM_MO
D_RL_miff_.dll -l IM_MOD_RL_mono_.dll -l IM_MOD_RL_mpc_.dll -l IM_MOD_RL_mpeg_.d
ll -l IM_MOD_RL_mpr_.dll -l IM_MOD_RL_msl_.dll -l IM_MOD_RL_mtv_.dll -l IM_MOD_R
L_mvg_.dll -l IM_MOD_RL_null_.dll -l IM_MOD_RL_otb_.dll -l IM_MOD_RL_palm_.dll -
l IM_MOD_RL_pango_.dll -l IM_MOD_RL_pattern_.dll -l IM_MOD_RL_pcd_.dll -l IM_MOD
_RL_pcl_.dll -l IM_MOD_RL_pcx_.dll -l IM_MOD_RL_pdb_.dll -l IM_MOD_RL_pdf_.dll -
l IM_MOD_RL_pes_.dll -l IM_MOD_RL_pict_.dll -l IM_MOD_RL_pix_.dll -l IM_MOD_RL_p
lasma_.dll -l IM_MOD_RL_png_.dll -l IM_MOD_RL_pnm_.dll -l IM_MOD_RL_preview_.dll
 -l IM_MOD_RL_ps2_.dll -l IM_MOD_RL_ps3_.dll -l IM_MOD_RL_ps_.dll -l IM_MOD_RL_p
sd_.dll -l IM_MOD_RL_pwp_.dll -l IM_MOD_RL_raw_.dll -l IM_MOD_RL_rgb_.dll -l IM_
MOD_RL_rla_.dll -l IM_MOD_RL_rle_.dll -l IM_MOD_RL_scr_.dll -l IM_MOD_RL_sct_.dl
l -l IM_MOD_RL_sfw_.dll -l IM_MOD_RL_sgi_.dll -l IM_MOD_RL_stegano_.dll -l IM_MO
D_RL_sun_.dll -l IM_MOD_RL_svg_.dll -l IM_MOD_RL_tga_.dll -l IM_MOD_RL_thumbnail
_.dll -l IM_MOD_RL_tiff_.dll -l IM_MOD_RL_tile_.dll -l IM_MOD_RL_tim_.dll -l IM_
MOD_RL_ttf_.dll -l IM_MOD_RL_txt_.dll -l IM_MOD_RL_uil_.dll -l IM_MOD_RL_url_.dl
l -l IM_MOD_RL_uyvy_.dll -l IM_MOD_RL_vicar_.dll -l IM_MOD_RL_vid_.dll -l IM_MOD
_RL_viff_.dll -l IM_MOD_RL_wbmp_.dll -l IM_MOD_RL_webp_.dll -l IM_MOD_RL_wmf_.dl
l -l IM_MOD_RL_wpg_.dll -l IM_MOD_RL_x_.dll -l IM_MOD_RL_xbm_.dll -l IM_MOD_RL_x
c_.dll -l IM_MOD_RL_xcf_.dll -l IM_MOD_RL_xpm_.dll -l IM_MOD_RL_xps_.dll -l IM_M
OD_RL_xtrn_.dll -l IM_MOD_RL_xwd_.dll -l IM_MOD_RL_ycbcr_.dll -l IM_MOD_RL_yuv_.
dll -l mfc100.dll -l msvcp100.dll -l msvcr100.dll -l vcomp100.dll -l X11.dll -l
Xext.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:54:59.177

我想你想要的只是拥有从 BMP 转换为 JPG 的实用程序？在这种情况下，我建议简单地获取 ImageMagick **convert.exe**或 GraphicsMagick **gm.exe**的静态编译版本（您可以在[此处](http://sourceforge.net/projects/graphicsmagick/files/graphicsmagick-binaries/1.2.5/GraphicsMagick-1.2.5-Q16-windows-static.exe/download)获取）并将其捆绑在您的应用程序内部或旁边。然后您可以根据需要将其称为外部实用程序，并完全避免这些链接问题（我认为这几乎是 DLL 地狱）。

**编辑**：解释如何让静态 gm.exe 工作。下载并安装[GraphicsMagick-1.2.5-Q16-windows-static.exe](http://sourceforge.net/projects/graphicsmagick/files/graphicsmagick-binaries/1.2.5/GraphicsMagick-1.2.5-Q16-windows-static.exe/download)。安装完成后，在其安装目录中找到**gm.exe**并复制到您自己的目录中（如您的 perl 脚本）。现在您可以卸载 GraphicsMagick - **gm.exe**就是您所需要的。

现在，当您需要将 BMP 转换为 JPG 时，只需像这样调用它：

```
 system("gm convert file.bmp file.jpg"); 
```

如果需要，您还应该能够将 gm.exe 捆绑到您的 PAR 文件中。

# javascript - 我的 knockout.js 模型应该如何？

> ID：13063263
> 
> 赞同：0
> 
> 时间：2012-10-25T07:01:49.170
> 
> 标签：javascript, knockout.js

我有一个选择汽车类型的下拉菜单。每辆车都有不同的输入字段，所以我想只显示与所选汽车相关的字段。这是一些代码：

```
<select>
    <option value="1">car 1</option>
    <option value="2">car 2</option>
    <option value="3">car 3</option>
</select>
<br/>
<div id="car1Fields">
    <input type="text" id="car1field1" />
    <input type="text" id="car1field2" />
</div>
<div id="car2Fields">
    <input type="text" id="car2field1" />
    <input type="text" id="car2field2" />
    <input type="text" id="car2field3" />
</div>
<div id="car3Fields">
    <input type="text" id="car3field1" />
</div> 
```

我正在使用 knockout.js，但我不知道一个或多个模型应该是什么样子。我应该为每种车型提供模型还是为所有结构提供一个模型？如何使用模型控制字段的可见性（选择汽车 2 时我不想显示 car1Fields）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:36:08.777

您可以为所有汽车类型提供一个模型。只需为其添加`car type`属性：

```
function Car(type)
{
    var self = this;   

    self.carType = ko.observable(type);

    self.car1field1 = ko.observable("car1field1");
    self.car1field2 = ko.observable("car1field2");

    self.car2field1 = ko.observable("car2field1");
    self.car2field2 = ko.observable("car2field2");    
    self.car2field3 = ko.observable("car2field3");

    self.car3field1 = ko.observable("car3field1");
} 
```

为了控制您的可见性，`divs`您可以使用`If`或`Visible`绑定：

```
<div data-bind="if: carType() == 'Car 1'" id="car1Fields"> 
```

这是工作示例：http: [//jsfiddle.net/vyshniakov/66AAY/](http://jsfiddle.net/vyshniakov/66AAY/)

# asp.net-mvc-3 - 是否有适用于 ASP.NET MVC 3/4 的响应式模板

> ID：13063268
> 
> 赞同：23
> 
> 时间：2012-10-25T07:02:10.103
> 
> 标签：asp.net-mvc-3, html, css, asp.net-mvc-4, responsive-design

我正在寻找 ASP.NET MVC 3/4 的响应式模板，可以将其用作基础，然后根据需要进行扩展。

谷歌搜索了一段时间后，我遇到了这两个选项。

1.  [Zurb 基金会](http://foundation.zurb.com/)，他们也有一个可用的 nuget 包，[这里](http://www.nuget.org/packages/Zurb_Foundation_MVC3)有详细的程序[说明](http://www.simple-talk.com/dotnet/asp.net/responsive-design-using-foundation-with-asp.net-mvc/)。

2.  [Twitter Bootstrap](http://twitter.github.com/bootstrap/getting-started.html) - 从未使用过，但看起来很有希望

3.  [踢脚线](http://ajkochanowicz.github.com/Kickstrap/)

有没有人知道更多/兼容/更好的响应模板可以与 ASP.NET MVC 网站一起使用？

如果他们有一个响应式模板开始，这肯定会使所有 MVC 开发人员的生活更轻松。谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-26T05:55:23.003

经过大量搜索后，我最终使用了带有 ASP.NET MVC 4 的**Twitter Bootstrap 。**

安装非常简单，你只需要安装[Twitter Bootstrap 的 nuget 包](http://nuget.org/packages/Twitter.Bootstrap)，它会为此下载并添加所需的 css、js 和图像，你也可以使用[本](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://www.codeproject.com/Articles/404633/Transform-ASP-NET-MVC3-Default-Template-with-Twitt&ei=zySKUKy0GY-YiAfvmoDQAw&usg=AFQjCNFqiHsWxkxSmwl3rBUD3vrwrr1cag&sig2=6bvey__uSRUITSNXXi8Qng)教程手动安装。

设置完成后，我发现 twitter bootstrap 非常易于使用，它们为所有内容提供了大量文档。这些文档存在于

*   [脚手架](http://twitter.github.com/bootstrap/scaffolding.html)
*   [基础 CSS](http://twitter.github.com/bootstrap/base-css.html)
*   [零件](http://twitter.github.com/bootstrap/components.html)
*   [Javascript](http://twitter.github.com/bootstrap/javascript.html)

有许多网站，例如[Bootsnip.com](http://bootsnipp.com/)，它们为登录框、注册、投票表单等提供现成的代码片段。

有许多提供定制引导主题的网站可供选择，其中我喜欢的几个网站是[BuiltWithBootstrap.com](http://builtwithbootstrap.com/)和[Bootswatch.com](http://bootswatch.com/)

这是使用 Twitter Bootstrap的另[一篇介绍性文章。](http://webdesign.tutsplus.com/tutorials/complete-websites/twitter-bootstrap-101-introduction/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T15:00:09.067

我完全有偏见的意见是选择#1 Zurb Foundation。（我写了你引用的文章，NuGet 包和[原型框架](http://www.simple-talk.com/dotnet/asp.net/rapid-prototyping,-the-mvc-working-model/)）

自 Foundation 发布以来，我一直在与它合作，我不得不说这是一次愉快的经历。我现在使用该框架完成了 6 个以上的项目，但还没有遇到重大障碍。

此外，最新版本已在 NuGet [Foundation3_MVC4](http://www.nuget.org/packages/Foundation3_MVC4) (Foundation 3 & MVC 4)上发布

请随意浏览我使用 MVC 上的框架构建的网站： [www.TubeTurns.com](http://www.TubeTurns.com) [www.RasklUserMeeting.com](http://www.RasklUserMeeting.com)

更新的单页站点演示：[https ://github.com/EdCharbeneau/Foundation3SinglePageRWD](https://github.com/EdCharbeneau/Foundation3SinglePageRWD)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T10:00:02.047

我使用 Asp.Net 和 VS2012 - 我的网站是使用 2.1.1 版的 Bootstrap 框架构建的。我不使用 MVC 或 webforms（没有 Viewstate），只使用 JQuery 和 HTML5，但由于 Bootstrap 是面向客户端的，它应该可以与 MVC 一起正常工作。Kickstrap 几乎是带有主题的 Bootstrap 框架——我从未使用过它。

这是我的一个引导站点[http://reactivewebdesign.net的链接](http://reactivewebdesign.net)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T17:07:53.173

你试过[Neos-SDI MVC4 模板吗](http://www.mvctemplate.com)？这是开始在 MVC 4 中开发的一个很好的模板。它提供了一个干净的架构和工具来创建一个性能良好的网站。

安装非常简单，因为您可以从 Visual Studio 中进行安装。

# visual-studio-2010 - 提交的文件不会在更新时添加

> ID：13063270
> 
> 赞同：1
> 
> 时间：2012-10-25T07:02:14.720
> 
> 标签：visual-studio-2010, svn, ankhsvn

我们正在使用 VS 2010 进行 SharePoint 开发。我们正在使用带有 AnkhSVN 插件的 SVN。其中一位开发人员创建了新功能并提交了解决方案。我将解决方案更新到最新版本，我可以在项目历史中看到新目录已添加，其中的文件已添加，但这些文件实际上不在它们应有的路径中。这些文件在我的 Pending Changes 列表中也被标记为 DELETED ......知道为什么会发生这种情况以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:54:40.283

还原 Pending 中的更改，然后进行另一次更新。

# android - 如何访问对话框上的活动按钮

> ID：13063271
> 
> 赞同：1
> 
> 时间：2012-10-25T07:02:19.223
> 
> 标签：android

我有一个有 5 个按钮的活动。我通过单击此活动的按钮调用了一个自定义对话框。打开一个对话框列表，我正在选择一个项目并返回该活动。在这里，当我从对话框返回时，我想隐藏 3 个按钮。我无法从对话框中重新开始活动。有人帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:06:22.037

这很简单..在自定义对话框的按钮单击上隐藏您的 3 按钮..

```
Dialog mDialog = new Dialog();
.//Your dialog code.
.
.
.
Button btn; // your custom dialog's button
btn = (Button)customdialog.findViewById(R.id.button);
btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                    // Hide your three main button here
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:04:50.867

您可以在返回一些信息的对话框上进行回调（在您的情况下是您活动中的选定项目）。

你在这里看到多选对话框了吗？

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

在为对话框结果创建该界面之后，只需更改按钮的可见性即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:07:39.743

该对话框是从您的`Activity`而不是作为自治单元运行的。

您可以访问局部变量并更改它们。

您可以做的是：在对话框中，将 3 个按钮的可见性设置为`View.INVISIBLE`

```
public void onClick(View v){
    button1.setVisiblity(View.INVISIBLE);
    button2.setVisiblity(View.INVISIBLE);
    button3.setVisiblity(View.INVISIBLE);
} 
```

# sockets - 将数据从 TCP IP 重定向到 /dev/tty*--但没有连接物理设备

> ID：13063272
> 
> 赞同：1
> 
> 时间：2012-10-25T07:02:21.977
> 
> 标签：sockets, networking, tcp, gpsd

在客户端，有一个 gpsd 进程从物理设备端口 /dev/tty 获取 GPS 数据，并期望设备连接到客户端。

但我的情况不同，我通过 IP 192.168.0.61 和 10002 端口获取 GPS 数据，并且设备连接到服务器。我可以使用 telnet 192.168.0.61 10002 连接到它。我无法访问它的服务器端，因此除了接受来自 TCP IP 的数据之外，无法运行任何其他进程。

我想知道你们中是否有人能告诉我如何让 GPSD 从 TCP IP 端口获取数据。

可能是将 TCP IP 数据重定向到 /dev/tty 的一种方法。

一个问题是我没有在客户端连接设备，所以不会有任何 /dev/tty。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:18:49.440

gpsd 可以使用 TCP 连接。请参阅 gpsd(8) 手册页：

> TCP 馈送
> 
> 带有前缀“tcp://”的 URI，后跟主机名、冒号和端口号。守护程序将打开一个指向指定地址和端口的套接字并从中读取数据包，这将被解释为好像它们是由串行设备发出的。示例：tcp://data.aishub.net:4006。

# r - 在 R 预测值

> ID：13063273
> 
> 赞同：1
> 
> 时间：2012-10-25T07:02:22.770
> 
> 标签：r, forecasting

我对 R 中的预测时间序列模型几乎没有疑问。

我为此得到的预测值是：

**想取这些值：`40,60,67,80,87`作为百分比值。**

那么，如何在百分比中考虑绘图的 Y 轴

```
YrTimeSeries <- c(40,60,67,80,87);

tsValue<-ts(YrTimeSeries,frequency=1,start=2006)
library(forecast)
(forecast(tsValue,h=5))
    Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
2011        86.9993 72.19680 101.8018 64.36083 109.6378
2012        86.9993 66.06645 107.9321 54.98528 119.0133
2013        86.9993 61.36233 112.6363 47.79094 126.2077
2014        86.9993 57.39653 116.6021 41.72576 132.2728
2015        86.9993 53.90256 120.0960 36.38220 137.6164 
```

1.  每年的预测值（蓝线）的值是相同的。有人可以解释一下为什么吗？
2.  95% 的预测区间是`(36.38220,137.62)`. 它推断什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:05:39.470

预测是一条平线，因为您`forecast()`使用其默认配置调用。这会调用`ets()`（查看`forecast(tsValue,h=5)$method`用于预测的方法），模型指定为“ZZZ”。`ets()`然后尝试找到最佳模型并选择“ANN”：加性误差、无趋势、无季节性（请参阅`?ets`），因此模型中没有任何内容会导致预测偏离平线。添加更多数据并调用`ets()`趋势以查看趋势预测：

```
YrTimeSeries <- c(40,60,67,80,87,100,200,300,400)
tsValue<-ts(YrTimeSeries,frequency=1,start=2006)
forecast(tsValue,h=5,model="AAN") 
```

*假设您的模型已正确指定*，95% 预测区间为您提供 95% 的未来观测值的区间。

编辑：Vids 评论说他希望预测值在 0 到 100 之间。在这种情况下，我首先将输入数据转换为 logits (http://en.wikipedia.org/wiki/Logit)，在其中添加了一些数据，以便我们获得自动趋势：

```
YrTimeSeries <- c(10,20,30,40,60,67,80,87)
YrTimeSeries.logit <- log((YrTimeSeries/100)/(1-YrTimeSeries/100))
tsValue<-ts(YrTimeSeries.logit,frequency=1,start=2006) 
```

预测后，我们对平均预测和预测区间限制进行​​反变换：

```
100*(1/(1+exp(-(forecast(tsValue,h=5)$mean))))
100*(1/(1+exp(-(forecast(tsValue,h=5)$upper))))
100*(1/(1+exp(-(forecast(tsValue,h=5)$lower)))) 
```

# python - 蛞蝓太短 - Django

> ID：13063274
> 
> 赞同：2
> 
> 时间：2012-10-25T07:02:23.053
> 
> 标签：python, django

这是我的 models.py 文件中的一段代码：

```
GENRE_CHOICES = (
             ('R', 'Rock'),
             ('B', 'Blues'),
             ('J', 'Jazz'),
             ('P', 'Pop'), 
             ('H', 'Hip-Hop'),    
             )

class Genre(models.Model):
  genre_choices = models.CharField(max_length=1, choices=GENRE_CHOICES)
  slug = models.SlugField(max_length = 100, unique = True) 
```

admin.py 像这样预填充 slug：

```
class GenreAdmin(admin.ModelAdmin):
  prepopulated_fields = {"slug": ("genre_choices",)} 
```

在管理站点中，我注意到 slug 仅填充到第一个字母。例如，对于摇滚，只`R`选择了。我如何选择元组的另一部分，即 Rock 代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:06:14.937

简单，将您的 GENRE_CHOICES 字典更改为：

```
 ('rock', 'Rock'),
 ('hip-hop', 'Hip-Hop'), 
```

等等等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:10:55.597

这看起来像一个废弃的错误：

[https://code.djangoproject.com/ticket/9983](https://code.djangoproject.com/ticket/9983)

由于回归，错误修复从 1.2 推迟到 1.3，并且从未应用于 1.3 似乎您可以通过调整 Django 代码或应用票证中提供的补丁来修复它。不确定它是否适用于您的 Django 版本。

同时，您可以尝试使用能够正确预填充 SlugField 的 object_identifiers ：

```
GENRE_CHOICES = (
             ('rock', 'Rock'),
             ('blues', 'Blues'),
             ('jazz', 'Jazz'),
             ('pop', 'Pop'), 
             ('hip-hop', 'Hip-Hop'),    
             ) 
```

旁注：您的 CharField 中有 max_length=1。也许这个错误实际上已经修复，但 SlugField 只需要一个字符。不过不确定。**编辑：这个 ( `max_length=1`) 实际上并没有改变任何东西。感谢 jpic**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T07:10:51.947

扩大最大长度，

```
genre_choices = models.CharField(max_length=1, choices=GENRE_CHOICES) 
```

至

```
genre_choices = models.CharField(max_length=10, choices=GENRE_CHOICES) 
```

可能有帮助，只是猜测。

# c - c中的帕斯卡三角形与gmp

> ID：13063277
> 
> 赞同：2
> 
> 时间：2012-10-25T07:02:33.023
> 
> 标签：c, gmp

我有问题，我试过用 gmp 做这个。

```
/*
  This code is just to see exactly how much faster C is than python
  at doing numerically stuff. It should calculate the nth row of 
  pascals triangle.
  The way you use it is by calling the executable with the row
  you wish to compute as the only argument. For example if you 
  are on an *nix system:
  ./pascal 6 

  Or in a windows command prompt:
  pascal.exe 6
*/

#include <stdlib.h>
#include <stdio.h>
#include <assert.h>
#include <gmp.h>

/*
  I decided to use a struct here because I thought it was ugly
  to have to pass around the length of my arrays in function 
  calls.
*/

typedef struct{
  int length; //length of the array
  int numbits; //number of bits allocated per val in vals
  mpz_t* vals; //pointer to start of array
} CoolArray;

//initArray allocates memory for the CoolArray.
void initArray(CoolArray* array, int length, int numbits); 

//destroyArray frees allocated memory in the struct.
void destroyArray(CoolArray* array);

//printArray prints the contents of the array.
void printArray(CoolArray* array);

//pascal computes the nth row of pascal's 
//triangle, with n being array->length,
//and stores the values in the array.
void pascal(CoolArray* array);

//setArray takes two CoolArrays of the same length
//and sets the values in the first to the values
//in the second.
void setArray(CoolArray* array1, CoolArray* array2);

int main(int argc, char** argv){
  int length = atoi(argv[1]);
  CoolArray array1;
  initArray(&array1, length, 800); //giving every int 800 bits of memory
  printf("Calculating the %dth row of pascals triangle...\n", length);
  pascal(&array1);
  printArray(&array1);
  destroyArray(&array1);
  return 0;
}

void initArray(CoolArray* array, int length, int numbits){
  assert(length>=1); //don't make arrays with a length <=0!!!
  array->length = length;
  array->vals = (mpz_t*) calloc(length, sizeof(mpz_t)); //first I allocate memory for vals...
  mpz_array_init(array->vals, length, numbits); //then I allocate memory for each val in vals
  return;
}

void destroyArray(CoolArray* array){
  int i=0;
  for(; i < array->length; ++i){ //first I go through the array and 
    mpz_clear(array->vals[i]); //clear the memory used for each val
  }
  free(array->vals); //then use free on the entire array
  return;
}

void pascal(CoolArray* array){
  assert(array->length >= 1);//making sure the length wasn't fiddled with...

  if(array->length == 1){
    mpz_set_ui(array->vals[0], (unsigned long int)1);
    return;
  }
  int row;
  int index;
  mpz_set_ui(array->vals[0], (unsigned long int)1); //if we aren't looking for the first row
  mpz_set_ui(array->vals[1], (unsigned long int)1);//then i'll start with the second row
  CoolArray current;
  initArray(&current, array->length, array->numbits); //current is a helper array
  for(row = 2; row < array->length; ++row){
    mpz_set_ui(current.vals[0], (unsigned long int)1); //set the first val to 1
    for(index = 1; index < row; ++index){
      mpz_add(current.vals[index], //set the value of this...
          array->vals[index],  //to this...
          array->vals[index-1]); //plus this.
    }
    mpz_set_ui(current.vals[row], (unsigned long int)1); //make the last number 1
    //printArray(&current);
    setArray(array, &current); //put every value in current into array
  }
  destroyArray(&current); //get rid of current
  return;
}

void setArray(CoolArray* array1, CoolArray* array2){
  assert(array1->length==array2->length);//making sure they are the same length
  int i=0;
  for(; i < array2->length; ++i){
    mpz_set(array1->vals[i], array2->vals[i]); //array1 is the array whose values are being set
  }
  return;
}

void printArray(CoolArray* array){
  int i=0;
  printf("[");
  for(; i < array->length; ++i){
    mpz_out_str(stdout, 10, array->vals[i]);
    if(i < (array->length - 1)) printf(", ");
    else printf("]\n");
  }
  return;
} 
```

我得到了正确的输出，排序。打印的值是正确的，但我在终端中也得到了一堆这样的行以及预期的输出：

```
gmpascal(80974) malloc: *** error for object 0x1008001a0: Non-aligned pointer being freed (2)
*** set a breakpoint in malloc_error_break to debug 
```

我是否在我的函数中错误地释放了内存`destroyArray`？如果是这样，我该怎么做才能解决它，因为据我所知（通过检查 gmp 手册）正在正确地执行此操作。还是我的 gmp 安装有问题？

*编辑*：好的，当我意识到我将指向我的 mpz_t 数组的每个元素的指针传递给 mpz_clear 时，我 *认为*我发现了主要问题，而我应该只是传递 mpz_t 本身。当我运行程序时，我仍然得到上述输出。但我仍然有这个编译器警告：

```
gmpascal.c: In function ‘initArray’:
gmpascal.c:62: warning: passing argument 1 of ‘__gmpz_array_init’ from incompatible pointer type 
```

这是：

```
mpz_t array[length]; //length is an int
mpz_array_init(array, length, numbits); //and so is numbits 
```

与此不同：

```
mpz_t* array;
array = (mpz_t*) calloc(length, sizeof(mpz_t));
mpz_array_init(array, length, numbits); 
```

?

第一个是直接来自手册的示例，第二个是我在代码中的编写方式。我认为这可能是问题所在，但我不知道为什么两者会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:46:20.950

`sizeof(mpz_t)`是类型`size_t`。在许多现代系统上，`size_t`不定义为`int`. 您应该将结构字段声明为`size_t numbits`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-18T07:39:21.513

我最近回到了这个问题，我找到了一个效果很好的解决方案。我认为我的原始代码的问题之一是`mpz_clear`当文档说不使用`mpz_clear`with时我正在使用`mpz_array_init`。无论如何，该`mpz_array_init`功能现在已被弃用，我的工作代码不使用它。

```
#include <stdio.h>
#include <gmp.h>

#define BASE 10

void usage(){
  puts("triangle N");
  puts("  Prints N rows of Pascal's triangle.");
}

mpz_t *new_row(size_t row_length){
  mpz_t *row = malloc(sizeof *row * row_length);
  size_t i;
  for(i = 0; i < row_length; i += 1)
    mpz_init(row[i]);
  return row;
}

void free_row(mpz_t *row, size_t row_length){
  size_t i;
  for(i = 0; i < row_length; i += 1)
    mpz_clear(row[i]);
  free(row);
}

void print_row(mpz_t *row, size_t length){
  // Prints an array of mpz_t.

  // Find the size in digits of the biggest number first, then allocate that much memory + 2 to hold the encoded ints.
  size_t max_encode_len = mpz_sizeinbase(row[0], BASE);
  size_t i;
  for(i = 0; i < length; i += 1){
    size_t encode_len = mpz_sizeinbase(row[i], BASE);
    if(encode_len > max_encode_len)
      max_encode_len = encode_len;
  }

  //mpz_get_str overwrites our allocated space every time and adds a null terminator.
  char *encoded_int = malloc(sizeof *encoded_int * max_encode_len + 2);
  for(i = 0; i < (length - 1); i += 1){
    mpz_get_str(encoded_int, BASE, row[i]);
    printf("%s ", encoded_int);
  }
  mpz_get_str(encoded_int, BASE, row[length - 1]);
  printf("%s\n", encoded_int);
  free(encoded_int);
}

int main(int argc, char **argv){
  if(argc != 2){
    puts("Incorrect number of arguments.");
    usage();
    return 1;
  }

  int n = atoi(argv[1]);
  if(n < 1){
    puts("Input needs to be an int greater than 0.");
    usage();
    return 1;
  }

  mpz_t *row_a = new_row(n);
  mpz_t *row_b = new_row(n);
  mpz_t *row_temp;

  // Every row starts with 1.
  mpz_set_ui(row_a[0], 1UL);
  mpz_set_ui(row_b[0], 1UL);

  size_t i;
  for(i = 1; i < n; i += 1){
    print_row(row_a, i);
    size_t j;
    for(j = 1; j < (i + 1); j += 1)
      mpz_add(row_b[j], row_a[j - 1], row_a[j]);
    row_temp = row_a;
    row_a = row_b;
    row_b = row_temp;
  }
  print_row(row_a, n);

  free_row(row_a, n);
  free_row(row_b, n);
  return 0;
} 
```

# jquery - async:false 用于服务器请求

> ID：13063280
> 
> 赞同：1
> 
> 时间：2012-10-25T07:02:59.743
> 
> 标签：jquery

我正在使用 async:false 向服务器发布一个同步 ajax 请求（知道不推荐，但有这样的要求之一）。令人担忧的是，请求发布到的服务器不会有任何响应。发送请求的服务器将一些变量添加到第三方使用的全局变量中，因此它不会将任何响应发送回调用函数。async:false 是否适用于不需要服务器响应或服务器总是必须向调用函数返回任何值的方法？如果服务器没有向调用方法返回任何值，服务器是否会返回任何默认值？我的请求看起来像::

```
 $(document).ready(function(){
    $.ajax({
    async:false,
    url:....,
    type:...,
    success:...
    });
    return true;
    }); 
```

请帮忙，因为我是 ajax 请求的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:25:59.433

在 FireFox 中使用 Firebug 或在 Chrome 中使用开发者工具。在其中任何一个上打开网络选项卡后，浏览到您通过 ajax 调用的 url。您应该会看到显示状态代码。希望是 http 代码 200 会告诉 ajax 调用它是成功的。

# java - 空堆栈异常

> ID：13063282
> 
> 赞同：4
> 
> 时间：2012-10-25T07:03:10.727
> 
> 标签：java, stack

这个 EmptyStackException 继续弹出。不知不觉中，我的堆栈中没有任何内容，而是用户输入的第一个元素。但是，我不确定代码的缺陷在哪里。（很多地方）但我只需要修复这个错误。

```
import java.util.*;

public class stacks2 {

public static void main (String []args){
System.out.printf("Enter a math equation in reverse polish notation:\n");

//Create stack of Strings
Stack<String> rpnStack = new Stack<String>();
//Create Scanner 
Scanner input = new Scanner(System.in);
//String in = input.next();

while(input != null) {
    String in = input.next();
        // Tokenize string based on spaces.
        StringTokenizer st = new StringTokenizer(in, " ", true);
            while (st.hasMoreTokens()) {
             rpnStack.push(st.nextToken());
         }
    //Send stack to Calculation Method
    calculate(rpnStack);
     }
}

public static void calculate(Stack<String> stack) {
    // Base case: stack is empty => Error, or finished
    if (!stack.isEmpty())
      // throw new StackUnderflowException("Empty Stack");

    // Base case: stack has 1 element, which is the answer => finished
    if (stack.size() == 1)
        System.out.printf("Finished, Answer: %s\n",stack.peek());

    // Recursive case: stack more elements on it.
    if (stack.size() > 1){
        String temp1 = stack.peek();
        stack.pop();
        String temp2 = stack.peek();
        stack.pop();
        String temp3 = stack.peek();
        stack.pop();

            if (temp3.equals("+")){
            float resultant = Float.parseFloat(temp1) + Float.parseFloat(temp2);
            stack.push(String.valueOf(resultant));
            //System.out.println(resultant);
            calculate(stack);
            }

            if (temp3.equals("-")){
            float resultant = Float.parseFloat(temp1) - Float.parseFloat(temp2);
            stack.push(String.valueOf(resultant)); 
            //System.out.println(resultant);
            calculate(stack);
            }

            else if (temp3.equals("*")){
            float resultant = Float.parseFloat(temp1) * Float.parseFloat(temp2);
            stack.push(String.valueOf(resultant)); 
            //System.out.println(resultant);
            calculate(stack);
            }

            else if (temp3.equals("/")){
            float resultant = Float.parseFloat(temp1) / Float.parseFloat(temp2);
            stack.push(String.valueOf(resultant)); 
            //System.out.println(resultant);
            calculate(stack);
            }

            else{
            System.out.printf("Something severely has gone wrong.");
            }
        }  
    }
} 
```

输入和错误：

```
:~ Home$ java stacks2
Enter a math equation in reverse polish notation:
4 5 * 6 -
Finished, Answer: 4
Exception in thread "main" java.util.EmptyStackException
at java.util.Stack.peek(Stack.java:85)
at stacks2.calculate(stacks2.java:41)
at stacks2.main(stacks2.java:22) 
```

显然，这只是第一个元素，这让我认为我在 17 处的 while 循环是原因。有什么见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:10:54.933

`String in = input.next();`读你一个词，然后你试图标记那个词。也许你的意思是`String in = input.nextLine();`

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next()) [http://docs.oracle.com/javase/1.5.0/docs/api /java/util/Scanner.html#nextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine())

* * *

此外，您的代码中有这两行。

```
if (!stack.isEmpty())
  // throw new StackUnderflowException("Empty Stack"); 
```

这是完全错误的。没有大括号，`if`影响下一条语句。这不是评论 - 它是以下如果。

这个：

```
if (!stack.isEmpty())
// throw new StackUnderflowException("Empty Stack");

// Base case: stack has 1 element, which is the answer => finished
if (stack.size() == 1)
    System.out.printf("Finished, Answer: %s\n",stack.peek()); 
```

相当于：

```
if (!stack.isEmpty())
    if (stack.size() == 1)
        System.out.printf("Finished, Answer: %s\n",stack.peek()); 
```

和这个：

```
if (!stack.isEmpty() && stack.size() == 1){
    System.out.printf("Finished, Answer: %s\n",stack.peek());
} 
```

道德：始终使用带有 AND 的大括号，`if`不要注释掉断言。即使您确实注释掉了断言，也要完整地注释它们，而不是其中的一半，尤其是当另一半是未加括号的 if 时。

* * *

第三，你的逻辑有问题。你来做这件事：

将所有符号推入堆栈，然后弹出前三个并将它们视为运算符和两个数字。**如果**您改用队列，这将适用于**某些**输入。

 **```
4 5 * 6 - 
```

按照您的逻辑，这将弹出`* 6 -`并崩溃。如果您使用队列，它将**在这种情况下工作**

```
4 5 * 6 - 
20 6 -
14 
```

但不是这种情况：

```
(1+1)*(1+1)
express as RPN
1 1 + 1 1 + *
2 1 1 + * 
```

接下来，您弹出 2 1 1 并崩溃。

***相反，你应该做什么：***

```
Read the input. For each symbol:
  if it is a number,
    push it on the stack.
  else,
    pop two numbers from the stack,
    perform the operation and
     push the result. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:15:41.630

堆栈是 LIFO，或“后进先出”。因此，当您有一个输入序列`4 5 * 6 -`并执行以下操作时：

```
rpnStack.push(st.nextToken()); 
```

你弹出的第一件事是“-”，第二件事是“6”，第三件事是“*”。这是你所期望的吗？

此外，而不是：

```
String temp1 = stack.peek();
stack.pop(); 
```

你可以做：

```
String temp1 = stack.pop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T10:20:44.900

```
import logging, sys, time
import jenkins from jenkinsapi.jenkins 
import Jenkins from jenkinsapi.build 
import Build from collections import OrderedDict

LOGGER = logging.getLogger(__name__)
logging.basicConfig(level=logging.INFO) 
```**

# java - Mysql 更新查询/过程

> ID：13063289
> 
> 赞同：1
> 
> 时间：2012-10-25T07:03:38.297
> 
> 标签：java, mysql, procedure

我有一个有 2 列的表， user 和 userMessage 表名为**Messages** 我有另一个表有 2 列作为 user 和 userMessageCount 表名为**MessageCount**。我对编程很陌生。我需要编写一个更新查询或程序来计算来自**Messages**的每个用户的消息数并将计数存储在**MessageCount**中。

我无法理解这样做的正确方法。我知道这是一个非常基本的问题，我应该研究解决这个问题。我在截止日期前跑得很晚。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:06:00.430

```
Insert Into MessageCount 
Select user, count(*)
From Messages
Group by user 
```

http://localhost/wordpress/?p=1 <category></category><headline></headline>我用那个代码读取xml文件 "; print_r($xml); echo ""; } else { exit('Failed to open test.xml.'); } ?> 输出 SimpleXMLElement Object ( [@attributes] => Array ( [version] => 2.0 ) [item] => SimpleXMLElement Object ( [title] => Hello world! [link] => http://localhost/wordpress/?p=1 [category] => SimpleXMLElement Object ( ) [HEADLINE] => SimpleXMLElement Object ( ) ) ) 但我对 xml 中的那些标签有疑问 <category></category><headline></headline>to read data bcoz of it Array ( [version] => 2.0 ) [item] => SimpleXMLElement Object ( [title] => Hello world! [link] => http://localhost/wordpress/?p=1 [category] => Uncategorized [HEADLINE] => Does Sleep Apnea Offer Some Protection During Heart Attack? ) ) $_POST['token'], 'apiKey' => $rpxApiKey, 'format' => 'json'); $curl = curl_init(); curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); curl_setopt($curl, CURLOPT_URL, 'https://rpxnow.com/api/v2/auth_info'); curl_setopt($curl, CURLOPT_POST, true); curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data); curl_setopt($curl, CURLOPT_HEADER, false); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); $raw_json = curl_exec($curl); curl_close($curl); /* STEP 3: Parse the JSON auth_info response */ $auth_info = json_decode($raw_json, true); if ($auth_info['stat'] == 'ok') { /* STEP 3 Continued: Extract the 'identifier' from the response */ $profile = $auth_info['profile']; $identifier = $profile['identifier']; if (isset($profile['photo'])) { $photo_url = $profile['photo']; } if (isset($profile['displayName'])) { $name = $profile['displayName']; } if (isset($profile['email'])) { $email = $profile['email']; } print $identifier; echo "
"; print $photo_url; echo "
"; print $name; echo "
"; print $email; /* STEP 4: Use the identifier as the unique key to sign the user into your system. This will depend on your website implementation, and you should add your own code here. */ /* an error occurred */ } else { // gracefully handle the error. Hook this into your native error handling system. echo 'An error occured: ' . $auth_info['err']['msg']; } } ?> 这将从我们在身份验证后获得的令牌中提取信息。 phpxml 4 3 回答 3 This answer is useful 3 加载文件时试试这个 $xml = simplexml_load_file($this->filename,'SimpleXMLElement', LIBXML_NOCDATA); 于 2012-10-25T07:07:14.857 回答 This answer is useful 0 试试这个： var_dump( (string)$xml->item->category, (string)$xml->item->HEADLINE ); SimpleXML 动态构建东西是毫无价值的，因此print_r()对象不一定显示有用的信息。 于 2012-10-25T07:20:39.503 回答 This answer is useful -1 尝试铸造 [category] => SimpleXMLElement Object ( ) [HEADLINE] => SimpleXMLElement Object ( ) 到字符串，我想你会得到你需要的 $item['category']=(string)$item['category']; 于 2012-10-25T07:08:31.833 回答 Related 2 dynamics-crm-2011 - 如何对 CRM 2011 进行身份验证？ 1 javascript - html/js Windows 8 People App（Facebook、Twitter）不会出现在共享目标上 1 php - mysql中的访问被拒绝超级权限错误？ 4 java - 最简单的云存储服务API 1 java - 重置 Mockito 间谍 1 jquery - 替换为使用 jQuery 3 localhost - 为什么 localhost 返回“502 Bad Gateway”？ 1 android - 如何创建可以作为 Android 项目导入的 Maven 项目 1 svn - 如何自动将 Subversion 中的文件从主干复制到特殊分支？ 1 ios - 如何从 iOS 的默认日历中检索最近完成的待办事项？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# php - 由于该标签，无法从 xml 文件中读取数据 测试.xml <rss version="2.0" xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/" xmlns:content="http://
问问题
问问题 2012-10-25T07:03:44.037
2411 次
This question shows research effort; it is useful and clear
0
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
测试.xml
<?xml version=" 1.0"="" encoding="UTF-8" ?=""><rss version="2.0" xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:wp="http://wordpress.org/export/1.2/"><item><title>Hello world!</title> <link>http://localhost/wordpress/?p=1 <category></category> <headline></headline> </item> </rss> 我用那个代码读取xml文件 "; print_r($xml); echo ""; } else { exit('Failed to open test.xml.'); } ?> 输出 SimpleXMLElement Object ( [@attributes] => Array ( [version] => 2.0 ) [item] => SimpleXMLElement Object ( [title] => Hello world! [link] => http://localhost/wordpress/?p=1 [category] => SimpleXMLElement Object ( ) [HEADLINE] => SimpleXMLElement Object ( ) ) ) 但我对 xml 中的那些标签有疑问 <category></category> <headline></headline> to read data bcoz of it  Array ( [version] => 2.0 ) [item] => SimpleXMLElement Object ( [title] => Hello world! [link] => http://localhost/wordpress/?p=1 [category] => Uncategorized [HEADLINE] => Does Sleep Apnea Offer Some Protection During Heart Attack? ) )  $_POST['token'], 'apiKey' => $rpxApiKey, 'format' => 'json'); $curl = curl_init(); curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); curl_setopt($curl, CURLOPT_URL, 'https://rpxnow.com/api/v2/auth_info'); curl_setopt($curl, CURLOPT_POST, true); curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data); curl_setopt($curl, CURLOPT_HEADER, false); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); $raw_json = curl_exec($curl); curl_close($curl); /* STEP 3: Parse the JSON auth_info response */ $auth_info = json_decode($raw_json, true); if ($auth_info['stat'] == 'ok') { /* STEP 3 Continued: Extract the 'identifier' from the response */ $profile = $auth_info['profile']; $identifier = $profile['identifier']; if (isset($profile['photo'])) { $photo_url = $profile['photo']; } if (isset($profile['displayName'])) { $name = $profile['displayName']; } if (isset($profile['email'])) { $email = $profile['email']; } print $identifier; echo "
"; print $photo_url; echo "
"; print $name; echo "
"; print $email; /* STEP 4: Use the identifier as the unique key to sign the user into your system. This will depend on your website implementation, and you should add your own code here. */ /* an error occurred */ } else { // gracefully handle the error. Hook this into your native error handling system. echo 'An error occured: ' . $auth_info['err']['msg']; } } ?> 这将从我们在身份验证后获得的令牌中提取信息。 phpxml 4 3 回答 3 This answer is useful 3 加载文件时试试这个 $xml = simplexml_load_file($this->filename,'SimpleXMLElement', LIBXML_NOCDATA); 于 2012-10-25T07:07:14.857 回答 This answer is useful 0 试试这个： var_dump( (string)$xml->item->category, (string)$xml->item->HEADLINE ); SimpleXML 动态构建东西是毫无价值的，因此print_r()对象不一定显示有用的信息。 于 2012-10-25T07:20:39.503 回答 This answer is useful -1 尝试铸造 [category] => SimpleXMLElement Object ( ) [HEADLINE] => SimpleXMLElement Object ( ) 到字符串，我想你会得到你需要的 $item['category']=(string)$item['category']; 于 2012-10-25T07:08:31.833 回答 Related 2 dynamics-crm-2011 - 如何对 CRM 2011 进行身份验证？ 1 javascript - html/js Windows 8 People App（Facebook、Twitter）不会出现在共享目标上 1 php - mysql中的访问被拒绝超级权限错误？ 4 java - 最简单的云存储服务API 1 java - 重置 Mockito 间谍 1 jquery - 替换为使用 jQuery 3 localhost - 为什么 localhost 返回“502 Bad Gateway”？ 1 android - 如何创建可以作为 Android 项目导入的 Maven 项目 1 svn - 如何自动将 Subversion 中的文件从主干复制到特殊分支？ 1 ios - 如何从 iOS 的默认日历中检索最近完成的待办事项？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</rss>

> ID：13063290
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, xml

**测试.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0"
    xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.2/"
>

    <item>
        <title>Hello world!</title>
        <link>http://localhost/wordpress/?p=1</link>
        <category><![CDATA[Uncategorized]]></category>
        <HEADLINE><![CDATA[Does Sleep Apnea Offer Some Protection During Heart Attack?]]></HEADLINE>
    </item>
</rss> 
```

**我用那个代码读取xml文件**

```
 <?php
      if (file_exists('test.xml')) {
        $xml = simplexml_load_file('test.xml');
          echo "<pre>";
          print_r($xml);
          echo "</pre>";
      } else {
         exit('Failed to open test.xml.');
         }
     ?> 
```

**输出**

```
 SimpleXMLElement Object
 (
 [@attributes] => Array
    (
        [version] => 2.0
    )

[item] => SimpleXMLElement Object
    (
        [title] => Hello world!
        [link] => http://localhost/wordpress/?p=1
        [category] => SimpleXMLElement Object
            (
            )

        [HEADLINE] => SimpleXMLElement Object
            (
            )

    )

 ) 
```

**但我对 xml 中的那些标签有疑问**

```
 <category><![CDATA[Uncategorized]]></category>
    <HEADLINE><![CDATA[Does Sleep Apnea Offer Some Protection During Heart Attack?]]></HEADLINE>

 to read data bcoz of it <![CDATA[]] in category and HEADLINE 
```

**我需要输出**

```
 SimpleXMLElement Object
   (
 [@attributes] => Array
    (
        [version] => 2.0
    )

[item] => SimpleXMLElement Object
    (
        [title] => Hello world!
        [link] => http://localhost/wordpress/?p=1
        [category] => Uncategorized
        [HEADLINE] => Does Sleep Apnea Offer Some Protection During Heart Attack?
    )

 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:07:14.857

加载文件时试试这个

```
$xml = simplexml_load_file($this->filename,'SimpleXMLElement', LIBXML_NOCDATA); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:20:39.503

试试这个：

```
var_dump(
    (string)$xml->item->category,
    (string)$xml->item->HEADLINE
); 
```

SimpleXML 动态构建东西是毫无价值的，因此`print_r()`对象不一定显示有用的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T07:08:31.833

尝试铸造

```
[category] => SimpleXMLElement Object
            (
            )

        [HEADLINE] => SimpleXMLElement Object
            (
            ) 
```

到字符串，我想你会得到你需要的

```
$item['category']=(string)$item['category']; 
```

# ios - Phonegap Torch for IOS 拒绝编译

> ID：13063292
> 
> 赞同：0
> 
> 时间：2012-10-25T07:03:55.517
> 
> 标签：ios, cordova, phonegap-plugins

嘿，我正在尝试使电话间隙 IOS 与[Torch 插件一起工作。](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Torch)
在我继续安装 Torch 插件之前，cordova 应用程序（2.1.0）准备就绪。

虽然现在我在尝试编译它时遇到错误。我对IOS开发一无所知，所以我恳求你们帮忙。这是 Torch.h 中错误的屏幕截图：

![错误](../Images/a7ffe144d6acd6807da3f01875224d24.png)

Torch.m 中也有错误：

![错误2](../Images/7b9216a150ca1f10c2e0546324c1f34f.png) 包浏览器截图：

![包浏览器](../Images/ed66b90079ef52b25f7bcc32f27b6926.png)

在使用 Elio' .h 更改后，它导致它编译，但 .m 文件现在给出这些错误：

![在此处输入图像描述](../Images/033fd3341164fc4a4ad5cf7708eb111a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:41:23.733

我为 Cordova 2.2.0 编写了一个 Torch 插件。你可以在这里找到它：

[https://github.com/tomschreck/iOS-Torch-Plugin](https://github.com/tomschreck/iOS-Torch-Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T14:02:38.420

我认为问题出在torch插件的预处理器宏中，无论如何看到你使用cordova 2.1.0你可以在插件上删除这部分：试试[这个](https://github.com/ElioDantoni/phonegap-plugins/tree/master/iPhone/Torch)。

# actionscript-3 - 如何将 AS3 Youtube Player 更改为德语标签？

> ID：13063299
> 
> 赞同：1
> 
> 时间：2012-10-25T07:04:30.027
> 
> 标签：actionscript-3, youtube-api

如何将嵌入式 Flash Youtube 视频播放器 (AS3) 的语言更改为德语？我是否必须对 URL [http://www.youtube.com/v/VIDEO_ID?version=3](http://www.youtube.com/v/VIDEO_ID?version=3)进行一些更改 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:37:10.380

没有受支持的方式来强制播放器上的语言。播放器会尝试从您在 www.youtube.com 上的设置中选择最佳语言。

对于 AS3 播放器，语言首选项只会在视频播放开始后激活。

如果您使用 iframe 嵌入（推荐），您的语言首选项将在视频提示状态下应用。

# iphone - 在 Iphone 中使用页面控制滑动图像（第 2 部分）

> ID：13063303
> 
> 赞同：1
> 
> 时间：2012-10-25T07:04:49.993
> 
> 标签：iphone, ios, uiscrollview, scroll, pagecontrol

我正在尝试制作练习应用程序，我可以在其中使用页面控件滚动图像。我能够滚动图像并能够包含页面控件。但我面临的问题是我无法将两者联系起来。意思是说当我滚动图像时，页面控件不受影响，而当我更改页面控件时，图像的滚动不受影响。

我指的是这个网站：[http ://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate>

@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) IBOutlet UIPageControl *pageControl;

@property (nonatomic, strong) NSArray *pageImages;
@property (nonatomic, strong) NSMutableArray *pageViews;

- (void)loadVisiblePages;
- (void)loadPage:(NSInteger)page;
- (void)purgePage:(NSInteger)page;
@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize scrollView = _scrollView;
@synthesize pageControl = _pageControl;

@synthesize pageImages = _pageImages;
@synthesize pageViews = _pageViews;

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // 1
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {
        // 2
        CGRect frame = self.scrollView.bounds;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0.0f;

        // 3
        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]];
        newPageView.contentMode = UIViewContentModeScaleAspectFit;
        newPageView.frame = frame;
        [self.scrollView addSubview:newPageView];
        // 4
        [self.pageViews replaceObjectAtIndex:page withObject:newPageView];
    }
}

- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Update the page control
    self.pageControl.currentPage = page;

    // Work out which pages you want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }

    // Load pages in our range
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }

    // Purge anything after the last page
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }
}

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // Remove a page from the scroll view and reset the container array
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
    }
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Load the pages that are now on screen
    [self loadVisiblePages];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // 1
    self.pageImages = [[NSArray alloc] initWithObjects:
                       [UIImage imageNamed:@"1.jpeg"],
                       [UIImage imageNamed:@"2.jpeg"],
                       [UIImage imageNamed:@"3.jpeg"],
                       nil];

    NSInteger pageCount = self.pageImages.count;

    // 2
    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageCount;

    // 3
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // 4
    CGSize pagesScrollViewSize = self.scrollView.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height);

    // 5
    [self loadVisiblePages];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

第三个图像没有出现，并且仍然无法链接页面控件和图像的滚动。需要一些指导...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:16:01.547

在 loadVisiblePages 中，更改此行：

```
NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f)); 
```

用这条线：

```
NSInteger page = self.scrollView.contentOffset.x / self.scrollView.frame.size.width; 
```

希望这可以帮助。

干杯!

编辑：我想你还没有`[scrollView setDelegate:self];`进入`viewDidLoad`

# git - 在 TeamCity 上构建时如何访问 .git 路径？

> ID：13063305
> 
> 赞同：3
> 
> 时间：2012-10-25T07:04:51.317
> 
> 标签：git, teamcity

在 TeamCity 上构建时，我想查询 .git 目录。那么如何访问该目录呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:19:46.040

默认情况下，那个 .git 目录应该在“ [Build Checkout directory](http://confluence.jetbrains.net/display/TCD7/Build+Checkout+Directory) ”的正下方。

> 在您的**[构建脚本](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity)****`teamcity.build.checkoutDir`**中，您可以通过 TeamCity 提供的属性引用构建检出目录的有效值。

注意：确保“VCS checkout mode”设置为“Automatically on agent”

# c++ - C++：将 uint 合并和拆分为 4 个字节的最快方法

> ID：13063306
> 
> 赞同：1
> 
> 时间：2012-10-25T07:04:52.587
> 
> 标签：c++, performance, visual-c++, binary, byte

> **可能重复：**
> [在 C++ 中将 32 位数字拆分为字节的最快方法](https://stackoverflow.com/questions/741212/fastest-method-to-split-a-32-bit-number-into-bytes-in-c)

有没有办法比我目前正在做的更快地将一个 uint 合并/拆分为 4 个字节？也许一些具有本机操作码的内联汇编程序可以在一条指令中完成？

```
// merge into x0
unsigned int x0 = (data[i] << 24) | (data[i+1] << 16) | (data[i+2] << 8) | data[i+3]; 

// split x0
outputBuffer[i] = (x0 >> 24);
outputBuffer[i+1]  = (x0 >> 16) & 0xFF;
outputBuffer[i+2]  = (x0 >> 8) & 0xFF;
outputBuffer[i+3]  = (x0) & 0xFF; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:14:24.047

您可以将它们直接写入 char，无需转换（虽然不知道这将对生成的程序集做什么，但`gcc -S`可能会帮助您）：

```
 unsigned int i = 0x12345678;

  char LSB = *((char*)&i);
  char MSB = *((char*)&i+3); 
```

# android - 我希望我的应用程序在每个月的特定日期自动启动

> ID：13063308
> 
> 赞同：2
> 
> 时间：2012-10-25T07:05:14.393
> 
> 标签：android, alarm

我希望我的应用程序每月在特定日期自动启动（由用户指定）。我在谷歌上搜索了很多，但我得到了任何解决方案。我收到了几秒钟的警报，就像应用程序在特定的几秒钟后启动一样。我是安卓新手。所以一个例子将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:07:07.937

您正在寻找[**AlarmManager**](http://developer.android.com/reference/android/app/AlarmManager.html)类。从文档中引用，

> 此类提供对系统警报服务的访问。这些允许您安排您的应用程序在将来的某个时间点运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:07:24.973

使用警报管理器创建服务............并在特定日期到来时启动应用程序

# java - JSF 中的默认会话超时

> ID：13063316
> 
> 赞同：1
> 
> 时间：2012-10-25T07:05:49.697
> 
> 标签：java, jsf

我有一个 JSF 应用程序的登录页面。一旦我让登录页面空闲 30 分钟或更长时间，然后输入登录 ID 和密码并提交按钮而不是收到消息：

> 该网站无法显示该页面 - HTTP 500 错误。

虽然我没有在应用程序中配置任何超时，但我正在使用 Web Sphere 服务器来部署应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:06:36.200

```
<session-config>
<session-timeout>-1</session-timeout>
</session-config> 
```

以上 web.xml 文件中的代码解决了我的问题。谢谢大家的帮助。

# c# - 添加到会话 ASP.NET C#

> ID：13063317
> 
> 赞同：1
> 
> 时间：2012-10-25T07:05:50.170
> 
> 标签：c#, asp.net, session

我想添加一个具有更多结果的 Session["i"]

目前它只会显示一组结果

例如 School1 11/10/2011 14/11/2011 GCSE AAA

我想添加更多集合，但它们似乎没有存储在 Session 中

例如

School1 2011 年 11 月 10 日 2011 年 11 月 14 日 GCSE AAA

School2 2012 年 11 月 10 日 2012 年 11 月 14 日 ALevels AAA

```
Education addResults = new Education(schoolName, fromDate, toDate , qualification , grades);

Session["i"] = (addResults );

//schoolarraylist.Add(addResults );

foreach (Education currentschool in schoolarraylist)
      {
         Session["i"] = currentschool.Schoollocation + "," + currentschool.Datefrom + "," + currentschool.Dateto + "," + currentschool.Qualifications + "," + currentschool.Grade + "<br />";

           string tmp = Session["i"].ToString();
           string[] sb = tmp.Split(',');
           string [] ii = new string[sb.GetUpperBound(0) + 1];

            for (int i = 0; i <= sb.GetUpperBound(0); i++)
                {
                    ib[i] = (sb[i]);
                }

            foreach (string j in ii)
                {
                    Response.Write(ii);
                }

            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:07:33.530

您可以将对象列表分配给会话，然后再将其取回。`But you should not put data in seesion without need`. 会话在服务器端为每个用户维护，将数据放入会话中会占用服务器的内存，这可能会降低应用程序的性能。[**在使用会话**](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.85%29.aspx)之前，值得一读。

```
List<string> lst = new List<string>();

Session["i"] = lst; 
```

**从会话对象中获取列表。**

```
List<string> lst = (List<string>)Session["i"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:10:25.900

问题是，您为 Session["i"] 分配了一些东西，当您尝试向会话中添加一些东西时，您实际上会覆盖您以前的值。为了将对象添加到 Session，您要么必须选择另一个名称，例如 Session["j"]，要么在对象周围包装某种容器（列表、数组、字典等）并将该容器存储在 Session 中。

还要尝试为您的 Sessions 找到更好的名称，如果您稍后查看您的代码，您可能不会知道 Session["i"] 实际上应该是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:13:39.037

您还可以使用 ArrayList ：

```
ArrayList list = new ArrayList();
foreach (Education currentschool in schoolarraylist)
{
    list.Add(currentschool.Schoollocation + "," + currentschool.Datefrom + "," + currentschool.Dateto + "," + currentschool.Qualifications + "," + currentschool.Grade)
} 
```

然后遍历arraylist并以您想要显示的任何格式显示

# cocoa - 会话关闭前的 TCP 数据

> ID：13063321
> 
> 赞同：1
> 
> 时间：2012-10-25T07:05:51.707
> 
> 标签：cocoa, networking, tcp, cocoaasyncsocket

无论如何，是否允许在会话关闭之前获取通过 tcp 发送的所有数据？我得到的是我必须在收到数据后才从服务器关闭会话，而且我必须手动传递 EOL 或回车或“\n”或“\r”。

任何帮助和建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:19:02.047

您可以尝试设置`SO_LINGER`套接字选项：

```
GCDAsyncSocket asyncSocket = ...;
struct linger linger;
linger.l_onoff = 1;
linger.l_linger = 30;
int rv = setsockopt([asyncSocket socketFD], SOL_SOCKET, SO_LINGER, &linger, sizeof(linger));
if (rv < 0)
{
    // handle error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:03:20.097

> 无论如何，是否允许在会话关闭之前获取通过 tcp 发送的所有数据？

您一直从套接字读取数据，直到`EOF`收到。

> 我得到的是只有在收到数据后我才必须从服务器关闭会话

从技术上讲，可以关闭 TCP 连接的写入端，使用`shutdown(socket, SHUT_WR)`指示此对等方不再发送任何数据。但是它仍然需要读取所有数据，直到`EOF`看到然后`close(socket)`。

> 而且我必须手动通过 EOL 或回车或“\n”或“\r”

这与套接字或 TCP 无关，而是与更高的应用程序协议（例如 HTTP）有关。有可用于这种流行协议的库来简化此任务。

# c++ - 具有共享只读内存的 c++ 线程池

> ID：13063322
> 
> 赞同：5
> 
> 时间：2012-10-25T07:05:52.253
> 
> 标签：c++, multithreading, threadpool

我是 C++ 并发编程的新手我想根据线程池模式编写服务器（在 linux 机器上），其中线程需要从共享内存读取（并且只读取）以响应传入的请求

我很困惑:(我想知道当线程访问只读内存时是否需要做一些事情来同步线程以及如何做到这一点（也许使用内存映射文件？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:20:46.487

如果数据是只读的，那么您不需要同步读取线程，只有在写入时才这样做。此外，线程共享其父级的内存空间，因此您不需要创建共享内存段或类似的东西。

[http://en.wikipedia.org/wiki/Thread_safety](http://en.wikipedia.org/wiki/Thread_safety)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:11:16.563

我知道关于 C++11 多线程的非常好的文章 -[阅读它](http://www.justsoftwaresolutions.co.uk/threading/multithreading-in-c++0x-part-1-starting-threads.html)。在第 4 部分中，您将看到共享容器的实现和解释。

# xcode - 添加新子视图时 UIScrollView 中断

> ID：13063326
> 
> 赞同：4
> 
> 时间：2012-10-25T07:06:17.407
> 
> 标签：xcode, uiscrollview, subview

一般来说，我对 iOS 平台和目标 C 的编码相当陌生。我正在使用故事板编写一个简单的 iPhone 应用程序，该应用程序具有通过嵌入在 UIScrollView 中的 UIImageView 显示的高 png 文件，并且旁边有一个按钮可以播放电影。

我的问题是，当电影结束/退出并返回到原始屏幕时，UIScrollView 内的滚动不起作用。我已经确定了“原因”。当我将 MPMoviePlayerViewController object.view 添加到 self.view 子视图时会发生这种情况。但我不确定如何纠正这个问题。这是我的蒸馏代码：

.h 文件

```
@interface StuffViewController : UIViewController 

@property (strong,nonatomic) IBOutlet UIImageView *imageView;
@property (strong,nonatomic) IBOutlet UIScrollView *scrollView;

-(IBAction) playMovie;
-(void) moviePlayBackDidFinish:(NSNotification*)notification;

@end 
```

.m 文件

```
-(void) viewDidLoad {
    self.imageView.image = [UIImage imageNamed:@"image.png"];
}

-(void) viewDidAppear:(BOOL)animated {
    self.scrollView.contentSize = self.imageView.image.size;
}

-(void) playMovie {
    NSURL *movieURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"movieTitle" ofType:@"mp4"]];
    MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] 
                                                initWithContentURL:movieURL];
       [[NSNotificationCenter defaultCenter] addObserver:self
                                        selector:@selector(moviePlayBackDidFinish:)
                                            name:MPMoviePlayerPlaybackDidFinishNotification
                                          object:moviePlayer];
    [moviePlayer setMovieSourceType:MPMovieSourceTypeFile];
    [[self view] addSubview:moviePlayer.view];   //SCROLLING BREAKS HERE
    [moviePlayer setFullscreen:YES];
    [moviePlayer play];
}

-(void)moviePlayBackDidFinish: (NSNotification*)notification {
    MPMoviePlayerController *movieDone = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [movieDone.view removeFromSuperview];
    [movieDone setFullscreen:NO];
} 
```

我通过注释掉部分确定了罪魁祸首，就像我说的那样，滚动“锁定”在“[[self view] addSubview:moviePlayer.view];” 线并且直到我导航到不同的视图然后返回才恢复。

对此的任何和所有帮助将不胜感激。

编辑：我发现了一个有趣的皱纹，可能有助于发现潜在的问题。

我一直在使用`MPMoviePlayerController`这个。然而，切换到`MPMoviePlayerViewController`一些有趣的事情已经发生了。

这是更改后的 -(void)playMovie

```
-(void) playMovie {
   self.scrollView.contentOffset = CGPointZero;
   NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                    pathForResource:totalTitle ofType:@"mp4"]];
   MPMoviePlayerViewController *playerController =  [[MPMoviePlayerViewController alloc] initWithContentURL:url];
   [self presentMoviePlayerViewControllerAnimated:playerController];
   playerController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
   [playerController.moviePlayer play];
   playerController = nil;
} 
```

有趣的是 UIScrollView 仍然可以工作，但是，如果它已经向下滚动，它将不再能够从电影开始时的位置向上滚动。我通过`self.scrollView.contentOffset = CGPointZero`在开头添加来解决此问题，`playMovie`以告诉 scrollView 移动到顶部（因此它上面没有任何东西必须滚动回）。我假设在代码中添加某种 if 语句`viewDidAppear`可以防止 scrollView.contentSize 重新执行可能会解决无法向上滚动的问题，但是我喜欢它从最佳。

不过最后一期。`MPMoviePlayerViewController *playerController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];`像这样使用 MPMoviePlayerViewController 会导致在执行 line时在我的调试器中弹出许多有趣的错误。它们如下：

```
Oct 25 10:25:51 Compy.local AppName[14590] <Error>: CGContextSaveGState: invalid context 0x0 
Oct 25 10:25:51 Compy.local AppName[14590] <Error>: CGContextClipToRect: invalid context 0x0
Oct 25 10:25:51 Compy.local AppName[14590] <Error>: CGContextTranslateCTM: invalid context 0x0
Oct 25 10:25:51 Compy.local AppName[14590] <Error>: CGContextDrawShading: invalid context 0x0
Oct 25 10:25:51 Compy.local AppName[14590] <Error>: CGContextRestoreGState: invalid context 0x0 
```

它似乎没有破坏任何东西。然而，当涉及到错误的错误陈述时，我往往是一个完美主义者。我已经对这些错误进行了一些研究，但是我还没有发现任何合适的东西可以在这种情况下发挥强大的作用。

感谢您迄今为止的所有帮助！再一次，我也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:54:56.423

您确定所有内容都从超级视图中删除了吗？另外，您可以尝试更换

```
 MPMoviePlayerController *movieDone = [notification object]; 
```

和

```
 MPMoviePlayerController *movieDone = (MPMoviewPlayerController *)[notification object]; 
```

并添加

```
movieDone = nil; 
```

为确保您的 MPMoviePlayerController 已从 superView 中完全删除，请在视频播放完毕后尝试按下视图上的按钮（在添加 MPMoviePlayerController 之前创建）并查看它是否触发。导航控制器必须以模态方式呈现您的 MPMoviewPlayerController 或进行推送。如果它以模态方式呈现，请尝试在播放完成后将其关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T09:28:27.827

问题的原因是在情节提要中使用了“自动布局”。我不是 100% 确定为什么它会在播放电影之后而不是之前导致它出现问题。但是我通过以下方式修复了它：

A：删除自动布局

或者

B：玩弄约束函数，直到它最终工作为止。（将 UIImageView 的高度更改为 0 并将其更改为`Equals: Default`尽可能低的优先级。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:32:04.780

尝试在方法中设置`SetUserInteractionEnabled`of`self`和/或`self.scrollview`to 。此外，检查滚动视图属性的大小，以检查大小是否大于您的实际屏幕大小，以查看是否导致滚动视图的功能中断。`YES``moviePlayBackDidFinish``ContentSize`

# android - 如果我在 webview 中有 ontouch 事件，内置缩放控制不起作用

> ID：13063328
> 
> 赞同：0
> 
> 时间：2012-10-25T07:06:18.180
> 
> 标签：android, android-webview, webviewclient, pinchzoom

我正在使用 webiview，并且我覆盖了 onTouchEvent，而不是内置缩放控件不起作用。

```
 wv.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View arg0, MotionEvent arg1) 
        {

            if(arg1.getAction()==MotionEvent.ACTION_DOWN)
            {
                x_down = (int) arg1.getX();
                y_down = (int) arg1.getY();

            Log.v("log", "x pos is "+x_down +"y pos is "+y_down);

            }

            else if(arg1.getAction()==MotionEvent.ACTION_UP)
            {
                x_up = (int) arg1.getX();
                y_up = (int) arg1.getY();

            Log.v("log", "x pos is "+x_up +"y pos is "+y_up);

            if((x_down-x_up)>30)
            {
                wv.loadData("<img src=\"myurl_1\">", "text/html", null);
            }
            else if((x_up-x_down)>30)
            {
                 wv.loadData("<img src=\"myurl_2\">", "text/html", null);
            }

            }
            return true;
        }
    }); 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:09:10.637

您总是从该`onTouch`方法返回 true，这意味着您是唯一负责处理触摸事件的人。
您应该仅在您想要的情况下返回 true，并`super.onTouch`在其他情况下返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:08:56.173

```
 webView.getSettings().setBuiltInZoomControls(true); 
```

将此代码添加到您的 webview 我希望它有效

# solr - Nutch 没有抓取来自 seed.txt 的所有 URL

> ID：13063337
> 
> 赞同：2
> 
> 时间：2012-10-25T07:06:37.900
> 
> 标签：solr, nutch

我是 Nutch 和 Solr 的新手。目前我想抓取一个网站，其内容是

由 ASP 生成。由于内容不是静态的，我创建了一个 seed.txt

包含我想抓取的所有网址。例如：

```
http://us.abc.com/product/10001
http://us.abc.com/product/10002
http://jp.abc.com/product/10001
http://jp.abc.com/product/10002
... 
```

regex-urlfilter.txt 有这个过滤器：

```
# accept anything else
#+.
+^http://([a-z0-9]*\.)*abc.com/ 
```

我使用此命令开始爬行：

```
/bin/nutch crawl urls -solr http://abc.com:8983/solr/ -dir crawl -depth 10 -topN 10 
```

seed.txt 包含 40,000 多个 URL。但是，我发现很多网址内容都不是

能够被 Solr 找到。

问题：

1.  这种用于大型seed.txt 的方法是否可行？

2.  如何检查 URL 是否被抓取？

3.  seed.txt 有大小限制吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:09:48.863

查看`db.max.outlinks.per.page`nutch 配置文件中的属性。
此属性的默认值为 100，因此只会从 seed.txt 中提取 100 个 url，其余的将被跳过。
将此值更改为更大的数字以扫描和索引所有 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T07:37:21.337

topN 表示应该获取多少生成的链接。您可能已经生成了 100 个链接，但如果您将 topN 设置为 12，那么这些链接中只有 12 个会被获取、解析和索引。

# ubuntu - 在 openmobster 中构建整个辣酱玉米饼馅时出错

> ID：13063338
> 
> 赞同：28
> 
> 时间：2012-10-25T07:06:42.813
> 
> 标签：ubuntu, cloud, openmobster

```
 cd ~/openmobster-read-only/cloud   mvn -DskipTests -Pbuild-all install 
```

> 错误：无法在项目通用上执行目标 org.apache.maven.plugins:maven-resources-plugin:2.5:resources (default-resources)：无法创建资源输出目录：

注意：我正在遵循此链接中给出的说明。[http://code.google.com/p/openmobster/wiki/Building_OpenMobster_Ubuntu_Maven304](http://code.google.com/p/openmobster/wiki/Building_OpenMobster_Ubuntu_Maven304)

# android - Android 应用程序的手写识别 API

> ID：13063345
> 
> 赞同：19
> 
> 时间：2012-10-25T07:07:15.937
> 
> 标签：android, ocr, handwriting-recognition

有没有什么好的手写识别API来帮助在Android平台上开发应用程序？谷歌已经发布（大约 2012 年 7 月[http://www.google.com/insidesearch/features/search/handwritinginput/index.html](http://www.google.com/insidesearch/features/search/handwritinginput/index.html)）在触摸屏设备中使用手写搜索的功能看起来很棒，是否有可能获得访问这些 API 以在 Android 应用程序中使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-13T04:15:19.760

安卓手写识别的最佳解决方案是 Thulika 应用程序和 Thulika Trainer 源代码可以从[这里下载](https://github.com/sinujohn/ThulikaIME)

它也可以在[google play 中](https://play.google.com/store/apps/details?id=me.sinu.thulika)使用。使用此代码的优点是。

*   代码很容易理解。
*   它使用[Encog](http://www.heatonresearch.com/encog)神经网络库。
*   [您可以使用链接](http://sinujohn.wordpress.com/2013/01/14/training-the-thulika-keyboard/)中解释的教练应用程序创建自己的字符集
*   识别速度非常快（即使在低内存设备中）

使用 thulika trainer 时必须注意以下事项

*   从此[链接](https://www.box.com/s/h905qszbsj27d2rdhoct)下载并使用 alpha.txt 文件。您可以编辑此文本文件。否则它不会加载字母。
*   引擎文件应重命名为 E_enginename 并在单击加载字母之前放入引擎文件夹。
    例如：E_english。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T09:40:22.417

*** 我是 Vision Objects 的产品经理 ***

[我想你可以在Vision Objects](http://devforum.visionobjects.com)的开发者论坛上找到你要找的东西。

[我们在2 周前](http://www.visionobjects.com/en/media-and-community/news/bdd/actualite/60/titre/vision-objects-announces-first-cloud-based-handwriting-recognition-service-for-developers-october)宣布了新的 API 。

[您可以在这里](http://webdemo.visionobjects.com)查看我们的网络演示。

# node.js - node js传入请求源IP

> ID：13063350
> 
> 赞同：2
> 
> 时间：2012-10-25T07:07:31.277
> 
> 标签：node.js

例如：

```
http.createServer(function (request, response) {
   request.on("end", function () {

   });
}); 
```

使用[Request](http://nodejs.org/api/http.html#http_event_request)，我怎样才能找到请求的源 IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:13:28.087

根据请求是由代理转发还是直接连接发出的，源 IP 地址可能存储在不同的位置。您必须先检查`req.header['x-forwarded-for']`，然后再检查`req.connection.remoteAddress`。[此要点](https://gist.github.com/1626318)中显示了一个示例函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:12:46.280

这是一个工作示例：

```
var http = require('http');

var getClientIp = function(req) {
  var ipAddress = null;
  var forwardedIpsStr = req.headers['x-forwarded-for'];
  if (forwardedIpsStr) {
    ipAddress = forwardedIpsStr[0];
  }
  if (!ipAddress) {
    ipAddress = req.connection.remoteAddress;
  }
  return ipAddress;
};

var server = http.createServer();

server.on('request', function(req, res) {
  console.log(getClientIp(req));
  res.writeHead(200, {'Content-Type': 'text/plain'});
  return res.end('Hello World\n');
});

server.listen(9000, 'localhost'); 
```

该`getClientIp`函数取自[此处](https://gist.github.com/1626318)，并进行了一些细微更改。请注意， 的内容`x-forwarded-for`是一个包含代理 IP 的数组，（[在此处](http://en.wikipedia.org/wiki/X-Forwarded-For)阅读更多内容），因此您可能希望检查的不仅仅是第一个元素。

# asp.net - 将文本框文本作为参数传递给弹出控件扩展器动态上下文键

> ID：13063368
> 
> 赞同：0
> 
> 时间：2012-10-25T07:08:47.077
> 
> 标签：asp.net, ajax, popup

我有一个日期文本框，其中日期由用户选择。我想将此值传递给弹出控件扩展程序 DynamicContextKey 值，以便我可以使用该值从数据库中检索值以填充到弹出窗口中。

如何传递这个值。下面是我的弹出控件扩展器。

```
<asp:PopupControlExtender ID="img_magnify_PopupControlExtender" runat="server" 
                    DynamicServicePath="" Enabled="True" Position ="Bottom" 
                    TargetControlID="img_magnify" PopupControlID="panel1" DynamicServiceMethod = "GetRegionalDataSubmissionStatus" DynamicContextKey = '<%# TXT_DATE.TEXT %>' >
                </asp:PopupControlExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:40:47.350

为什么不在要弹出的面板中使用标签，并将其文本与所需数据（在您的情况下为日期）绑定？

# mysql - Hibernate + MySQL：如何为数据库和表设置编码 utf-8

> ID：13063372
> 
> 赞同：27
> 
> 时间：2012-10-25T07:08:54.480
> 
> 标签：mysql, linux, hibernate, jpa, character-encoding

我的系统在**Linux Mandriva**、RDBMS- **MySQL 5**上运行。我需要在**UTF-8**中创建数据库和表。

这是**hibernate.cfg.xml**的一个片段-

```
... 
 <property name="hibernate.hbm2ddl.auto">create-drop</property>   
 <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
 <property name="hibernate.connection.characterEncoding">utf8</property> 
... 
```

**我的.cnf** -

```
# The MySQL server
[mysqld]
...
default-character-set=cp1251
character-set-server=cp1251
collation-server=cp1251_general_ci
init-connect="SET NAMES cp1251"
skip-character-set-client-handshake
...
[mysqldump]
...    
default-character-set=cp1251
... 
```

一些类，例如 -

```
@Entity
@Table(name = "USER")
public class User {
    @Id 
    @Column(name = "USERID")
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @Column(name = "USERNAME")
    private String name;

    @Column(name = "USERPASSWORD")
    private String password;

    @Column(name = "USERIP")
    private String ip;
        // getter's and setter's here
        ... 
```

但是当生成表时，我看到了编码**latin1** 例如-

```
SHOW CREATE TABLE USER;

USER  | CREATE TABLE `user` (
  `USERID` int(11) NOT NULL auto_increment,
  `USERIP` varchar(255) default NULL,
  `USERNAME` varchar(255) default NULL,
  `USERPASSWORD` varchar(255) default NULL,
  PRIMARY KEY  (`USERID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 | 
```

如何将编码更改为**UTF-8**？

我将非常感谢您提供的信息！谢谢！

...

这很奇怪，我都改成了**utf8——**

```
# The MySQL server
    [mysqld]
    ...
    default-character-set=utf8
    character-set-server=utf8
    collation-server=utf8_general_ci
    init-connect="SET NAMES utf8"
    skip-character-set-client-handshake
    ...
    [mysqldump]
    ...    
    default-character-set=utf8
    ... 
```

现在 -

```
SHOW CREATE TABLE USER;

USER  | CREATE TABLE `USER` (
  `USERID` int(11) NOT NULL auto_increment,
  `USERIP` varchar(255) default NULL,
  `USERNAME` varchar(255) default NULL,
  `USERPASSWORD` varchar(255) default NULL,
  PRIMARY KEY  (`USERID`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 | 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-25T07:56:12.813

您还可以使用编码创建数据库。
只需`phpMyAdmin`用于创建数据库/表。

您可以在休眠设置的 URL 中指定一些 URL 参数以使用 UTF8 进行连接：

```
<!-- Database Settings -->
<property name="connection.driver_class">com.mysql.jdbc.Driver</property>
<!--  for performance reasons changed to MyISAM from org.hibernate.dialect.MySQLInnoDBDialect -->
<property name="dialect">org.openmeetings.app.hibernate.utils.MySQL5MyISAMDialect</property>
<property name="connection.url">jdbc:mysql://localhost/openmeetings?autoReconnect=true&amp;useUnicode=true&amp;createDatabaseIfNotExist=true&amp;characterEncoding=utf-8</property>    

<property name="hibernate.connection.CharSet">utf8</property>
<property name="hibernate.connection.characterEncoding">utf8</property>
<property name="hibernate.connection.useUnicode">true</property> 
```

您不需要将数据库中的整个编码设置为 utf8 仅当您使用

```
<!-- Database Scheme Auto Update -->
<property name="hbm2ddl.auto">update</property> 
```

您必须将 MySQL 的默认编码设置为 utf8。原因`hbm2dll`将使用数据库的默认编码。

您可能仍然使用`hbm2ddl.auto`, 并手动修改数据库的表以具有 utf8 排序规则。

如果您不使用`hbm2ddl.auto`，您可以简单地使用您喜欢的编码创建表。无需将数据库设置为特殊编码。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-15T20:24:43.560

> 如何将编码更改为 UTF-8？

我使用了一个扩展`MySQLDialect`并更改了表类型字符串的本地方言类：

```
public class LocalMysqlDialect extends MySQLDialect {
    @Override
    public String getTableTypeString() {
        return " DEFAULT CHARSET=utf8";
    }
} 
```

我实际上是在扩展`MySQL5InnoDBDialect`类型，所以我真的在使用：

```
public class LocalMysqlDialect extends MySQL5InnoDBDialect {
    @Override
    public String getTableTypeString() {
        return " ENGINE=InnoDB DEFAULT CHARSET=utf8";
    }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-18T17:40:09.887

考虑像这样更改连接 url 配置：

```
<property name="hibernate.connection.url">
    jdbc:mysql://localhost/yourdatabase?UseUnicode=true&amp;characterEncoding=utf8
</property> 
```

它解决了这个案子。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-25T07:56:56.433

首先，在 Java 方面，您应该指定 UTF-8 而不是 utf8，请参阅[此处的表格](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-charsets.html)。

其次，`characterEncoding`不是您的表将在其中创建的字符集，这只是一个字符集，将在与数据库进行通信和读取/写入数据时使用。

[MySQL Docs](http://dev.mysql.com/doc/refman/5.0/en/charset-database.html)说，在创建表的过程中，如果在这些方面没有指定任何内容，将使用 DB 字符集。这意味着为了使这成为可能，您的数据库（不是 MySQL 服务器）应该这样创建：

`create database DB_NAME character set utf8;`

之后，您在此数据库中的表应以 utf8 编码创建。与整理相同的故事。

但是当然你不应该依赖 Hibernate 的 hbm2ddl，阅读[这里](https://stackoverflow.com/questions/12433998/hibernate-reversed-column-order-by-hbm2ddl)了解更多细节。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-04-11T11:46:19.340

我正在使用 Spring-Data。我尝试在 URL 中激活参数：

```
jdbc:mysql://localhost:3306/DATABASE?createDatabaseIfNotExist=true&amp;useUnicode=true&amp;characterEncoding=utf-8 
```

此外，我已经尝试过使用休眠属性，但最终对我有用的解决方案是@Gray 提出的解决方案

```
@Bean
@Autowired
public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource) {
    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();
    vendorAdapter.setGenerateDdl(dbGenerateDdl); 
    vendorAdapter.setShowSql(dbShowSql);
    if (Arrays.asList(environment.getActiveProfiles()).contains("prod"))
        vendorAdapter.setDatabasePlatform(CustomMysqlDialect.class.getName());

    Properties jpaProperties = new Properties();
    jpaProperties.put("hibernate.connection.CharSet", "utf-8");
    jpaProperties.put("hibernate.connection.useUnicode", true);
    jpaProperties.put("hibernate.connection.characterEncoding", "utf-8");

    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
    factory.setJpaVendorAdapter(vendorAdapter);
    factory.setPackagesToScan("com.example.model");
    factory.setDataSource(dataSource);
    factory.setJpaProperties(jpaProperties);

    return factory;
} 
```

这条线拯救了我的一天：

```
vendorAdapter.setDatabasePlatform(CustomMysqlDialect.class.getName()); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-02-19T05:31:44.443

对于那些使用 Spring Boot 的人：将`characterEncoding=utf8`参数添加到您的`application.properties`文件到这一行：

```
spring.datasource.url=jdbc:mysql://localhost:3306/mydatabase?useUnicode=true&characterEncoding=utf8&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-07T07:21:52.763

如何更改数据库排序规则？

> ALTER DATABASE [数据库] CHARACTER SET utf8 COLLATE utf8_unicode_ci;

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-14T10:00:53.150

通过 Spring Java Config dataSource() 这应该会有所帮助：

```
@Bean
public DataSource dataSource() {    
    BasicDataSource dataSource = new BasicDataSource();    
    //your username/pass props
    dataSource.setConnectionProperties("useUnicode=true;characterEncoding=utf8;characterSetResults=UTF-8;");
    return dataSource;
} 
```

小心';' 在属性字符串的末尾！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-29T08:06:40.550

您可以使用 Hibernate @Type 属性，根据您的要求，您可以自定义注释并在字段之上应用。像 ：

```
 public class PhoneNumberType implements UserType {
    @Override
    public int[] sqlTypes() {
  return new int[]{Types.INTEGER, Types.INTEGER, Types.INTEGER};
    }

    @Override
    public Class returnedClass() {
        return PhoneNumber.class;
    }

    // other methods
    } 
```

一、空SafeGet方法：

```
 @Override
    public Object nullSafeGet(ResultSet rs, String[] names, 
    SharedSessionContractImplementor session, Object owner) throws HibernateException,                   
      SQLException {
    int countryCode = rs.getInt(names[0]);
     if (rs.wasNull())
        return null;
     int cityCode = rs.getInt(names[1]);
    int number = rs.getInt(names[2]);
    PhoneNumber employeeNumber = new PhoneNumber(countryCode, cityCode, number);
     return employeeNumber;
     } 
```

接下来，null SafeSet 方法：

```
 @Override
     public void nullSafeSet(PreparedStatement st, Object value, 
      int index, SharedSessionContractImplementor session) 
       throws HibernateException, SQLException {
        if (Objects.isNull(value)) {
        st.setNull(index, Types.INTEGER);
        } else {
        PhoneNumber employeeNumber = (PhoneNumber) value;
        st.setInt(index,employeeNumber.getCountryCode());
        st.setInt(index+1,employeeNumber.getCityCode());
        st.setInt(index+2,employeeNumber.getNumber());
      }
     } 
```

最后，我们可以在我们的 OfficeEmployee 实体类中声明我们自定义的 PhoneNumberType：

```
 @Entity
    @Table(name = "OfficeEmployee")
     public class OfficeEmployee {

      @Columns(columns = { @Column(name = "country_code"), 
      @Column(name = "city_code"), @Column(name = "number") })
      @Type(type = "com.baeldung.hibernate.customtypes.PhoneNumberType")
       private PhoneNumber employeeNumber;

     // other fields and methods
      } 
```

这可能会解决您的问题，这将适用于所有数据库。如果您想了解更多信息，请参考 :: [https://www.baeldung.com/hibernate-custom-types](https://www.baeldung.com/hibernate-custom-types) 同样您必须执行 UTF-8 编码/解码和 ISO-8859-1 解码/编码

# liferay-theme - 如何增强 Liferay 的社交办公主题

> ID：13063373
> 
> 赞同：0
> 
> 时间：2012-10-25T07:08:54.863
> 
> 标签：liferay-theme

我想增强 liferay 的社交办公室主题：so-theme。

我尝试使用 liferay IDE 创建一个新主题，但仍使用默认主题。

有人修改过社交办公室主题吗？

非常感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:21:54.920

好的，我在[liferay论坛](http://www.liferay.com/community/forums/-/message_boards/view_message/4149091#_19_message_4147358 "自定义 SO 外观")上找到了答案，[Liferay工作人员](http://www.liferay.com/community/forums/-/message_boards/view_message/4149091#_19_message_4149091)的回答：

> 不幸的是，改变 so-theme 是唯一的方法。我们锁定了部署主题的能力，因为大多数（很可能是所有）门户主题与我们在 SO 中做一些事情的方式不兼容。

[](http://www.liferay.com/community/forums/-/message_boards/view_message/4149091#_19_message_4265045)**Liferay 员工在同一论坛帖子中的[**建议：**](http://www.liferay.com/community/forums/-/message_boards/view_message/4149091#_19_message_4265045)**

 **> 我现在的建议是在 main.css 最后添加另一个“包含”行并将您的更改保留在那里。我认为这将使您的可维护性更容易，直到我们找到主题社交办公室的永久解决方案。

所以不可能基于`so-theme`. 唯一的办法就是直接修改部署主题。**

# sed - 删除搜索字符串旁边的单词

> ID：13063375
> 
> 赞同：1
> 
> 时间：2012-10-25T07:08:59.933
> 
> 标签：sed

如何在搜索字符串后准确删除 1 个单词？我可以删除搜索词，但不能删除之后的词，即“utf8”

```
# echo "varchar(255) CHARACTER SET utf8,"
varchar(255) CHARACTER SET utf8,

# echo "varchar(255) CHARACTER SET utf8," |  sed 's/ CHARACTER SET[^ ]* / /g'
varchar(255) utf8, 
```

预期输出：

```
varchar(255) , 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:15:52.487

```
echo "varchar(255) CHARACTER SET utf8," |  sed 's/ CHARACTER SET [[:alnum:]]\+/ /g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:19:30.237

你是这个意思吗？

```
echo "varchar(255) CHARACTER SET utf8," |  sed 's/ CHARACTER SET[ a-z0-9,]*/ /g' 
```

**输出**

```
varchar(255) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:20:45.993

这可能对您有用（GNU sed）：

```
echo "varchar(255) CHARACTER SET utf8," |  sed 's/ CHARACTER SET \w*/ /g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T04:52:45.450

echo "varchar(255) 字符集 utf8, aa" | sed 's/ 字符集.*,/ /g'

# iphone - 从 imessage 发送短信、图片和视频

> ID：13063379
> 
> 赞同：3
> 
> 时间：2012-10-25T07:09:05.123
> 
> 标签：iphone, objective-c, ios

对于 imessage，Apple 是否提供任何 API 或服务可用于从应用程序内发送 SMS、图像和视频？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:18:42.990

不，您不能直接使用 iMessage，您可以使用[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)发送短信。如果系统随后检测到其他用户是否支持 iMessage，则 SMS 将通过 iMessage 发送。

您不能强制通过 iMessage 发送消息。

此外，不支持通过[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html). 因为[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)只支持短信不支持图片或视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:03:42.457

用于`MFMessageComposeViewController`从应用发送短信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:11:54.397

使用`MessageUI`框架和使用

`MFMessageComposerDelegate`对于短信和

`MFMailCoposerDelegate`用于电子邮件。

全部由苹果提供

# c# - 将 Telerik GridView 导出为带边框的 excel

> ID：13063382
> 
> 赞同：0
> 
> 时间：2012-10-25T07:09:36.687
> 
> 标签：c#, winforms, telerik, export, telerik-grid

我有一个 Telerik radGridView1，我将它导出到 excel，但 excel 文件中没有显示边框。那么如何用边框导出它。我正在以这种方式导出...

```
ExportToExcelML export = new ExportToExcelML(this.radGridView1);
export.ExportVisualSettings = true;
export.RunExport(saveFileDialog1.FileName); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:52:43.333

该`ExcelCellFormatting`活动可能会帮助您：

它提供对单个单元格的 SingleStyleElement 的访问，允许您为与导出的 RadGridView 相关的每个 excel 单元格进行其他格式设置（添加边框、设置对齐、文本字体、颜色、更改单元格值等）：

```
void exporter_ExcelCellFormatting(object sender,Telerik.WinControls.UI.Export.ExcelML.ExcelCellFormattingEventArgs e)
{
    if (e.GridRowInfoType == typeof(GridViewTableHeaderRowInfo))
    {
        BorderStyles border = new BorderStyles();
        border.Color = Color.Black;
        border.Weight = 2;
        border.LineStyle = LineStyle.Continuous;
        border.PositionType = PositionType.Bottom;
        e.ExcelStyleElement.Borders.Add(border);
    }
    else if (e.GridRowIndex == 2 && e.GridColumnIndex == 1)
    {
        e.ExcelStyleElement.InteriorStyle.Color = Color.Yellow;
        e.ExcelStyleElement.AlignmentElement.WrapText = true;
    }
} 
```

点击[这里](http://www.telerik.com/help/winforms/gridview-exporting-data-export-to-excel-via-excelml-format.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:54:48.253

您需要在导出之前为边框设置 rad 网格的以下属性

```
this.radGridView1.GridLines = Both;
this.radGridView1.BorderStyle = BorderStyle.Solid;
ExportToExcelML export = new ExportToExcelML(this.radGridView1);
export.ExportVisualSettings = true;
export.RunExport(saveFileDialog1.FileName); 
```

# symfony - 使用 em->remove($user) 删除对象会删除表中的所有对象

> ID：13063383
> 
> 赞同：0
> 
> 时间：2012-10-25T07:09:40.140
> 
> 标签：symfony, doctrine-orm

我有一个实现 UserInterface 以与 RBAC 系统一起使用的用户实体。我还没有实现整个系统。但是，当我尝试使用以下代码删除用户时，该操作会删除其他表中的所有用户和其他关联对象，然后引发错误。我能够毫无问题地从其他实体中删除对象。

用户实体

```
class User implements UserInterface
{
 **
 * @var integer $id
 *
 * @ORM\Column(name="id", type="smallint")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 * 
protected $id;

 **
 * @var string $username
 *
 * @ORM\Column(name="username", type="string", length=20, unique=TRUE)
 * 
protected $username;

 **
 * @var string $password
 *
 * @ORM\Column(name="password", type="string", length=255)
 * 
protected $password;

 **
 * @var string $salt
 *
 * @ORM\Column(name="salt", type="string", length=255)
 * 
protected $salt;

 **
 * @var string $fullName
 *
 * @ORM\Column(name="full_name", type="string", length=60, unique=TRUE)
 * 
protected $fullName;

 **
 * @ORM\ManyToMany(targetEntity="Role", inversedBy="users", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="users_roles")
 * 
 * @var ArrayCollection $userRoles
 * 
protected $userRoles;

public function __construct()
{
    $this->userRoles = new ArrayCollection();
}
} 
```

删除操作

```
public function deleteUserAction($id) {
$user = $em->getRepository('ACMECompanyBundle:User')->find($id);
$currentUser = $this->get('security.context')->getToken()->getUser();
if ($id == $currentUser->getId()) {
    return new Response("You cannot delete the current user");
}        
if (!$user) {
    throw $this->createNotFoundException('No user found for id '.$id);
}
try {
    $em->remove($user);
    $em->flush();
    $msg = "User deleted!";
    $code = "OK";
} catch (DBALException $e) {
    return new Response($e);
    $msg = "User cannot be deleted!";
    $code = "ERR";
}
$response = new Response(json_encode(array('code' => $code, 'msg' => $msg)));
$response->headers->set('Content-Type', 'application/json');
return $response;
} 
```

删除所有用户后返回的错误是

> InvalidArgumentException：您无法从不包含标识符的 EntityUserProvider 刷新用户。用户对象必须使用由 Doctrine 映射的自己的标识符进行序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T16:26:53.877

您在操作中遗漏了 em 的定义......用

```
$em = $this->getDoctrine()->getEntityManager(); 
```

它应该可以工作。除非你在类本身上设置它，否则你需要`$this->...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:57:13.230

当学说删除用户时，它也会删除分配给该用户的所有角色以及分配给这些角色的所有用户。因此，根据您的注释模式，这是正确的行为，因为 $userRoles 注释中的 cascade={"remove"} 和角色实体中 $users 注释中的 cascade={"remove"} 。

如果您想防止级联删除并希望保持级联持久删除用户和角色关系中的“删除”参数

# javascript - Greasemonkey 脚本中的 XPath 没有在 XHTML 页面上选择正确的节点

> ID：13063386
> 
> 赞同：3
> 
> 时间：2012-10-25T07:09:49.010
> 
> 标签：javascript, xpath, xhtml, greasemonkey, weibo

我正在为*weibo.com*编写 Greasemonkey 脚本。我无法在 XHTML 页面上使用 XPath 选择元素。

此代码无法获取我想要的元素：

```
function resolver(prefix) {
    return prefix === 'x' ? 'http://www.w3.org/1999/xhtml' : null;
}
var allLinks, thisLink;
allLinks = document.evaluate(
  "//x:a[@href]", 
  document, 
  resolver, 
  XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, 
  null 
); 
```

只有`<a>`侧边栏上的元素被选中，其余的仍然存在。请参考[这个，weibo.com，目标页面](http://s.weibo.com/weibo/IBM&Refer=STopic_box)。　

无论如何要选择所有具有属性的元素`action-type="login"`吗？

我用过`"//x:a[@action-type='login']"`，但是没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:15:08.887

问题是脚本在所有这些节点都添加到页面之前正在运行。它们稍后由页面的 AJAX 添加。

因此，您可以在脚本中添加时间延迟。**但：**

1.  如果您只想抓取选择元素，您几乎不需要使用 XPath。改用[`querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll) 或 jQuery。`querySelectorAll`这是一个没有时间延迟的基本示例：

    ```
    var allLinks = document.querySelectorAll ("a[action-type='login']");
    if (allLinks.length) {
        // PROCESS NODES AS DESIRED, HERE.
    } 
    ```

2.  这是一个**完整的 Greasemonkey 脚本**，它使用 jQuery 和[waitForKeyElements() 实用程序](https://gist.github.com/2625891)处理延迟内容问题：

    ```
    // ==UserScript==
    // @name        _Weibo, hilite login links
    // @include     http://s.weibo.com/weibo/*
    // @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
    // @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
    // @grant    GM_addStyle
    // ==/UserScript==
    /*- The @grant directive is needed to work around a design change
        introduced in GM 1.0\.   It restores the sandbox.
    */

    function processLoginLinks (jNode) {
        //***** YOUR CODE HERE *****
        jNode.css ("background", "lime");
    }

    waitForKeyElements ("a[action-type='login']", processLoginLinks); 
    ```

# c++ - C++、TR1、正则表达式和 Boost

> ID：13063387
> 
> 赞同：0
> 
> 时间：2012-10-25T07:10:01.653
> 
> 标签：c++, regex, boost, tr1

我对基本的正则表达式库感兴趣。我相信我可以使用 C++ TR1。在研究期间，类似的答案声称 C++ TR1 是由 Boost 提供的（有些人放弃了）。

也许我遗漏了一些东西，但我没有看到 C++ 技术[委员会](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1836.pdf)对 Boost 的确认，我怀疑 Microsoft、Dinkumware 等是否在他们的实现中使用它。查看 GCC 资源，我什至不确定 GCC 是否使用了 Boost 库。

任何人都可以指出 Boost 提供 TR1 Regex 的说法的参考吗？

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:15:29.053

TR1 不是由 boost 提供的。但是boost有自己的TR1实现。 [http://www.boost.org/doc/libs/1_47_0/doc/html/boost_tr1.html](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_tr1.html)

> TR1 库提供了 C++ Technical Report on Standard Library Extensions 的实现。这个库本身并不实现 TR1 组件，而是一个瘦包装器，将包含您的标准库的 TR1 实现（如果有的话），否则它将包含 Boost 库等效项，并将它们导入命名空间 std::tr1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:17:06.623

**Boost不**提供TR1 正则表达式。TR1 将由您的实现提供。然而，TR1 主要*基于*Boost 库中的内容。Boost 的许多贡献者恰好是 C++ 标准委员会成员，因此 Boost 经常被用作未来采用 C++ 标准库的试验场。然而，TR1 现在已经很老了，大多数实现都将所有内容都移到了它们的标准库中，因此没有太多理由在 TR1 命名空间中使用东西，除非是为了向后兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T13:08:31.010

我推荐PCRE。它是一个非常成熟、健壮和强大的开源 C 库正则表达式引擎，由 Phillip Hazel 编写，并被许多著名的项目使用，如 PHP、Apache、KDE、Safari 等。有一个 C++ 包装器可用。

请参阅：[PCRE - Perl 兼容的正则表达式](http://www.pcre.org/)

# python - 什么时候在文件底部导入模块

> ID：13063390
> 
> 赞同：1
> 
> 时间：2012-10-25T07:10:15.687
> 
> 标签：python

当我阅读文件时`riak-python-client/riak/riak_object.py`。在文件的底部，我看到了这个

```
from mapreduce import * 
```

它有什么用？为什么只在文件顶部导入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:37:22.770

这旨在将所有模块`mapreduce`放在`riak_object`名称空间中。如果将此导入放在 的顶部`riak_object.py`，则会出现错误，因为`mapreduce`导入`RiakObject`from`riak_object`尚未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:15:06.453

您可以`import`在文件中的任何位置使用 ；您只需要确保在导入模块之前不要尝试使用模块中的内容。

如果这实际上是文件中*运行*的最后一行，那么它将没有任何用途。如果它在文件的底部但在某个函数或方法中，这可能意味着该函数/方法不经常运行，并且作者不希望`mapreduce`每次运行程序时都需要导入的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:15:59.550

我不知道该项目的具体原因，但只是将导入放在文件的顶部。这使得依赖关系更容易跟踪，[Python 的样式指南](http://www.python.org/dev/peps/pep-0008/#imports)推荐使用它。

从技术上讲，语句导入的代码只有在语句执行`import`后才可用`import`。这意味着当您将它放在文件的底部时，您不能使用在该文件中导入的任何内容（在模块级别）。该文件中的函数*可以*使用导入......但这只是不好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T07:17:34.843

唯一的原因是`riak_object`（似乎不需要来自 ? 的任何东西）将所有值（或由 指定的值）`mapreduce`带入其命名空间，以作为某种便利。`__all__``mapreduce`

# c# - 生成具有不同“内容”的单选按钮

> ID：13063391
> 
> 赞同：0
> 
> 时间：2012-10-25T07:10:21.460
> 
> 标签：c#, c++, .net, wpf, radio-button

我是一名 C++ 开发人员，目前正在开发一个 WPF 应用程序，我必须在其中动态生成 4 个单选按钮，并且每个按钮都有不同的标题名称。我正在遵循 MVVM 模式。

```
<Grid Grid.Row="0">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="35" />                
        </Grid.RowDefinitions>

        <RadioButton Grid.Row="0" Content="{Binding RadioBase}" IsChecked="{Binding BaseCheck}" Height="15" Width="80" HorizontalAlignment="Center" Margin="0,0,0,0" VerticalAlignment="Center" />
        <Button Grid.Row="1" Content="Refresh Regs" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Width="100" Height="25" />
</Grid> 
```

现在，如果您注意到我的 XAMl，我的`Grid.Row="0"`. 理想情况下，我想生成它 4 次并为其设置绑定`Content`，`IsChecked`这样我就给了我 4 个不同的`Content`.

**视图模型：**

```
private bool sBaseCheck;
    public bool BaseCheck
    {
        get { return this.sBaseCheck; }
        set
        {
            this.sBaseCheck= value;
            this.OnPropertyChanged("BaseCheck");
        }
    }

private string _RadioBase;
    public string RadioBase
    {
        get
        {
            return _RadioBase;
        }

        set
        {
            _RadioBase= value;
            OnPropertyChanged("RadioBase");
        }
    } 
```

我在我的 C++ 应用程序中这样做了，如下所示：

```
for(i = 0; i < 4; i++)
{
    m_registerBase[i] = new ToggleButton(("Base 0x")+String::toHexString(i * 0x40));        
    addAndMakeVisible(m_registerBase[i]);
    m_registerBase[i]->addButtonListener(this);
} 
```

如果您注意到这里，它会创建 4 次并有一个 buttonclick 事件。它创建标题如下：

*   按钮 1 = Base 0x0（因为 i = 0 并且 toHexString 将 0x0 转换为 0）
*   按钮 2 = Base 0x40（因为 i = 1 并且 toHexString 将 0x40 转换为 40）
*   按钮 3 = Base 0x80（因为 i = 2 并且 toHexString 将 0x80 转换为 80）
*   按钮 4 = Base 0xc0（因为 i = 3 并且 toHexString 将 0xc0 转换为 c0）

如何在我的 WPF 应用程序中实现这样的目标？:) 如果你们帮我解决这个问题，我将不胜感激？:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:29:40.657

根据您的评论，我创建了一个完整的示例：

模型：

```
 namespace WpfApplication1
    {
        public class RB
        {
            public bool BaseCheck { get; set; }
            public string RadioBase { get; set; }
        }
    } 
```

RBVM：

```
 namespace WpfApplication1
        {
            public class RBVM : INotifyPropertyChanged
            {

                public RBVM()
                {
                    _rb = new RB();
                }

               private RB _rb;
                public RB RB
               {
                   get
                   {
                       return _rb;
                   }
                   set
                   {
                       _rb = value;
                   }
               }

                public bool BaseCheck
                {
                    get
                    {
                        return RB.BaseCheck;
                    }
                    set
                    {
                        RB.BaseCheck = value;
                        RaisePropertyChanged("BaseCheck");
                    }
                }

                public string RadioBase
                {
                    get
                    {
                        return RB.RadioBase;
                    }
                    set
                    {
                        RB.RadioBase = value;
                        RaisePropertyChanged("RadioBase");
                    }
                }

                public event PropertyChangedEventHandler PropertyChanged;

                                                    #region Methods

            private void RaisePropertyChanged(string propertyName)
            {
                PropertyChangedEventHandler handler = PropertyChanged;
                if (handler != null)
                {
                    handler(this, new PropertyChangedEventArgs(propertyName));
                }
            }
            #endregion
            }
        } 
```

视图模型：

```
 namespace WpfApplication1
    {
        public class RBViewModel : INotifyPropertyChanged
        {

            public void AddRb(string content, bool isChk) 
            {
                _rbs.Add(new RBVM() { RadioBase = content, BaseCheck = isChk });
            }

            public void ClearAllValues() {
                foreach (RBVM item in _rbs)
                {
                    item.BaseCheck = false;
                }

            }

            public RBVM GetChecked() {
                foreach (RBVM item in _rbs)
                {
                    if (item.BaseCheck) {
                        return item;
                    }
                }

                return null;

            }

            private ObservableCollection<RBVM> _rbs = new ObservableCollection<RBVM>();

            public ObservableCollection<RBVM> Rbs
           {
               get
               {
                   return _rbs;
               }
               set
               {
                   _rbs = value;
               }
           }

            public event PropertyChangedEventHandler PropertyChanged;

            #region Methods

            private void RaisePropertyChanged(string propertyName)
            {
                PropertyChangedEventHandler handler = PropertyChanged;
                if (handler != null)
                {
                    handler(this, new PropertyChangedEventArgs(propertyName));
                }
            }
            #endregion
        }
    } 
```

XAML

```
 <Window x:Class="WpfApplication1.MainWindow1"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:WpfApplication1"
            Title="MainWindow1" Height="300" Width="300">

        <Window.DataContext>
            <local:RBViewModel />
        </Window.DataContext>
        <Window.Resources>

            <DataTemplate x:Key="RadioDataTemplate">
                <StackPanel>
                    <RadioButton GroupName="someGroup" Content="{Binding RadioBase}" IsChecked="{Binding BaseCheck}" Height="15" Width="80" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </StackPanel>
            </DataTemplate>

        </Window.Resources>

        <Grid x:Name="main">

            <ItemsControl ItemsSource="{Binding Rbs}" ItemTemplate="{StaticResource RadioDataTemplate}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel x:Name="radios" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>

            <Button Width="50" Height="10" x:Name="test" Click="test_Click" ></Button>
        </Grid>

    </Window> 
```

XAML 代码背后：

```
 namespace WpfApplication1
    {
        /// <summary>
        /// Interaction logic for MainWindow1.xaml
        /// </summary>
        public partial class MainWindow1 : Window
        {
            RBViewModel _viewModel;

            public MainWindow1()
            {
                InitializeComponent();

                _viewModel = (RBViewModel)base.DataContext;

                for (int i = 0; i < 4; i++)
                {
                    _viewModel.AddRb("a" + i, true);

                }
            }

            private void test_Click(object sender, RoutedEventArgs e)
            {
                Console.WriteLine(_viewModel.GetChecked().RadioBase);
                _viewModel.ClearAllValues();
            }

        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:20:01.330

如果你想坚持 MVVM 模式，你应该考虑`Grid`用[`ItemsControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx). 然后，您需要两个视图模型：您在问题中解释的子视图模型和包含子视图模型集合的父视图模型：

```
public ObservableCollection<FPGAViewModel> Children { get; set; }

    public ParentViewModel()
    {
        Children = new ObservableCollection<FPGAViewModel>();
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x0" });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x40" });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x80" });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0xc0" });
    } 
```

如果您希望能够动态添加和删除子项，则应使用基于的集合，`ObservableCollection<T>`但似乎您希望仅保留四个子项。

可以基于`ItemsControl`模板 ( `ItemTemplate`) 为 中的每个项目生成项目`ItemsSource`。这些项目将被放置在`ItemsPanel`默认情况下是一个`StackPanel`。将单选按钮堆叠在每个单选按钮的顶部可能是您想要的。

```
<ItemsControl ItemsSource="{Binding Children}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical"
                    IsItemsHost="True" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <RadioButton Content="{Binding RadioBase}" Margin="0,10,0,0" IsChecked="{Binding BaseCheck}" Height="15" Width="80" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
</ItemsControl> 
```

请注意，`DataContext`应将 的`ItemsControl`设置为 的实例`ParentViewModel`。在 MVVM 中，这是通过将包含 的视图绑定`ItemsControl`到父视图模型来完成的。当`ItemsControl`生成子项时，每个子项都`RadioButton`将`DataContext`绑定到每个`ChildViewModel`实例，并且其中的绑定`RadioButton`将绑定到该视图模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:24:13.043

```
for(i = 0; i < 4; i++)
{
    m_registerBase[i] = new RadioButton();        
    m_registerBase[i].IsChecked=true;
    //Sets the Binding programmatcially
    m_registerBase[i].SetBinding(RadioButton.Content, "MyContent");
} 
```

[单选按钮类](http://msdn.microsoft.com/en-us/library/system.windows.controls.radiobutton.aspx)

[设置绑定](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.setbinding.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:16:03.893

Yopu可以使用以下&实现分组`RadioBox`es的动态生成`XAML``Binding`

**XAML：**

```
<ListBox SelectionMode="Single"
         SelectedValue="{Binding CurrentRadioDescription}"
         SelectedValuePath="Description"
         ItemsSource="{Binding RadioBoxModelList}" 
    Focusable="True"
    KeyboardNavigation.IsTabStop="True"          
    VerticalAlignment="Center"
    BorderBrush="Transparent"
    BorderThickness="0"
    Background="Transparent" >
<ListBox.Resources>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" 
    Color="Transparent"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" 
    Color="Transparent"/> 
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlDarkBrushKey}" 
    Color="Transparent"/> 
    <SolidColorBrush x:Key="{x:Static SystemColors.InactiveBorderBrushKey}" 
    Color="Transparent"/> 
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlDarkDarkBrushKey}" 
    Color="Transparent"/> 
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlLightBrushKey}" 
    Color="Transparent"/> 
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlLightLightBrushKey}" 
    Color="Transparent"/> 
    <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}" 
    Color="Transparent"/>
</ListBox.Resources>
<ListBox.ItemsPanel>
    <ItemsPanelTemplate>
    <StackPanel 
        Orientation="Horizontal"
        Background="Transparent"/>
    </ItemsPanelTemplate>
</ListBox.ItemsPanel>
<ListBox.ItemTemplate>
    <DataTemplate>
    <RadioButton 
          MinWidth="80"
                  Background="Transparent"
          IsChecked="{Binding Path=IsSelected, 
                  RelativeSource={RelativeSource 
                    AncestorType={x:Type ListBoxItem}},
                  Mode=TwoWay}"
         Content="{Binding Description, Mode=OneWay}" 
         Margin="-1"/>
    </DataTemplate>
</ListBox.ItemTemplate>
</ListBox> 
```

**C＃**

```
public class RadioBoxModel : INotifyPropertyChanged { 
      //Raise property changed notifications in Setters below.
      public bool IsChecked { get; set; } 
      public string Description { get; set; }
} 
```

# javascript - 使用Javascript在Firefox中禁用URL（不要复制）

> ID：13063393
> 
> 赞同：0
> 
> 时间：2012-10-25T07:10:30.880
> 
> 标签：javascript, html

我想问我如何限制用户不复制Firefox中显示的URL。一种选择是禁用不向用户显示的 URL，另一种是禁用地址栏，以便可以看到 URL，但不能复制。

但我不知道如何使用 javascript 来实现这些。

任何与代码片段一起的帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:14:15.707

您完全无法控制浏览器 UI 的那部分。

这*是无法*做到的。不是通过 javascript，也可能不是通过任何其他合法方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:26:20.117

[您可以使用该`window.open`方法](https://developer.mozilla.org/de/docs/DOM/window.open#Return_value_and_parameters)打开一个没有地址栏的新窗口。

但

*   某些浏览器（想想移动设备......）不支持隐藏地址栏
*   用户可以在浏览器设置中禁用此功能
*   复制 URL 的方法总是不止一种，不仅是从地址栏

# sql - 添加要查看的列

> ID：13063395
> 
> 赞同：1
> 
> 时间：2012-10-25T07:10:39.850
> 
> 标签：sql, postgresql, pgadmin

我在 Adempiere 工作，现在在 pgAdmin III 中使用来自 adempiere 的数据库。我得到了这段代码，我刚刚学习 SQL 3 天。

所以我有这个代码：

```
SELECT t.m_transaction_id, t.ad_client_id, t.ad_org_id, t.movementtype, 
t.movementdate, t.movementqty, t.m_attributesetinstance_id, 
asi.m_attributeset_id, asi.serno, asi.lot, asi.m_lot_id, asi.guaranteedate,
t.m_product_id, p.value, p.name, p.description, p.upc, p.sku, p.c_uom_id,
p.m_product_category_id, p.classification, p.weight, p.volume, p.versionno,
t.m_locator_id, l.m_warehouse_id, l.x, l.y, l.z, t.m_inventoryline_id,
il.m_inventory_id, t.m_movementline_id, ml.m_movement_id, t.m_inoutline_id,
iol.m_inout_id, t.m_productionline_id, prdl.m_productionplan_id, prdp.m_production_id,
t.c_projectissue_id, pjl.c_project_id, 
COALESCE(il.line, ml.line, iol.line, prdl.line, pjl.line) 
AS line,
daysbetween(
(T .movementdate):: TIMESTAMP WITH TIME ZONE,
getdate()
)AS movementagedays

FROM adempiere.m_transaction t
JOIN adempiere.m_locator l ON t.m_locator_id = l.m_locator_id
JOIN adempiere.m_product p ON t.m_product_id = p.m_product_id
LEFT JOIN adempiere.m_attributesetinstance asi ON t.m_attributesetinstance_id =
asi.m_attributesetinstance_id
LEFT JOIN adempiere.m_inventoryline il ON t.m_inventoryline_id = il.m_inventoryline_id
LEFT JOIN adempiere.m_movementline ml ON t.m_movementline_id = ml.m_movementline_id
LEFT JOIN adempiere.m_inoutline iol ON t.m_inoutline_id = iol.m_inoutline_id
LEFT JOIN adempiere.m_productionline prdl ON t.m_productionline_id =
prdl.m_productionline_id
LEFT JOIN adempiere.m_productionplan prdp ON prdl.m_productionplan_id =
prdp.m_productionplan_id
LEFT JOIN adempiere.c_projectissue pjl ON t.c_projectissue_id = pjl.c_projectissue_id; 
```

以一张漂亮的桌子结尾（查看 rv_transaction）：

[表 http://imageshack.us/a/img829/3558/tablerl.png](http://imageshack.us/a/img829/3558/tablerl.png)

最后一列是motionagedays，它告诉我们有多少天没有对产品进行操作。

我只想添加一列“islager”，如果在 movementagedays 列的相应行中该值小于 -90，则该列将以“超过 90 天”结尾。

所以我写了类似的东西

```
CASE WHEN movementagedays < -90 THEN 'more than 90 days' 
END AS isLager
FROM rv_transaction 
```

但我不知道它是否正确以及**放在哪里。** 此外，如果大代码写得好，性能优化等，idk。

如果有人可以帮助我，我会很高兴。对不起，我的 SQL 技能和我的英语一样糟糕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:38:12.067

你*几乎*是对的。对你来说正确的陈述应该是：

```
SELECT *,
    CASE WHEN movementagedays < -90
         THEN 'more than 90 days'
         ELSE NULL END AS isLager
FROM rv_transaction 
```

# thread-safety - 将变量传递给线程消息有什么好处

> ID：13063398
> 
> 赞同：1
> 
> 时间：2012-10-25T07:10:41.987
> 
> 标签：thread-safety

我怀疑线程安全

假设我们有 n 个线程，在某个线程中声明了一个变量。如果该变量必须由另一个线程使用，我们有 2 个方法

1.  变量可以在某个线程中声明为全局变量，并在另一个线程中使用 extern 访问
2.  通过消息，我们可以传递该变量..

使用第一个选项时，我们遇到变量损坏的问题。我不知道它是如何损坏的。任何测试用例？

问候维杰

# object - jmap 和对象大小

> ID：13063406
> 
> 赞同：1
> 
> 时间：2012-10-25T07:11:18.947
> 
> 标签：object, size, long-integer, jmap

我在我的 JVM 上运行 jmap 试图了解一些内存泄漏，我发现了一些奇怪的东西：`java.lang.Long`使用 24 字节而不是 8 字节！

有人能告诉我我的错误在哪里吗？

```
 num     #instances         #bytes  class name
----------------------------------------------
   1:      11043837      530104176  java.util.HashMap$Entry
   2:      15788616      378926784  java.lang.Long
   3:       2933013      301617976  [C

#bytes / #instance => 378926784 / 15788616  => 24 bytes 
```

怎么回事？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:39:31.190

好的，我不得不刷新我对 java 内存使用的了解。

8 个字节用于长原始类型。

对于一个对象（如 java.lang.Long），标头有 8 个字节的开销。现在; 我已经解决了一半的问题，但仍然缺少 8 个字节......

# android - 无延迟更新视图时没有错误“只有创建视图层次结构的原始线程才能触摸其视图”

> ID：13063408
> 
> 赞同：8
> 
> 时间：2012-10-25T07:11:26.913
> 
> 标签：android, multithreading, view, ui-thread

我遇到了一个有趣的问题。如果在`onCreate/onStart/onResume`activity的方法中编写如下代码：

```
final Button myButton = (Button)findViewById(R.id.myButton);
final TextView myTextView = (TextView)findViewById(R.id.myTextView);
final Thread thread = new Thread(new Runnable() {
    @Override
    public void run() {
        myTextView.setText("Hello text");
    }
});
myButton.setOnClickListener(new OnClickListener() {
    @Override
        public void onClick(View v) {
        thread.start();
    }
}); 
```

或者：

```
final TextView myTextView = (TextView)findViewById(R.id.myTextView);
final Thread thread = new Thread(new Runnable() {
    @Override
    public void run() {
        try {
            Thread.currentThread().sleep(500);
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
        myTextView.setText("Hello text");
    }
});
thread.start(); 
```

应该如何，抛出错误

```
android.view.ViewRoot $ CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views." 
```

**很明显，在这种情况下，我必须更新 ui-thread 中的视图** `(Handler, AsyncTask, runOnUiThread, view.post).`

但是如果你在另一个线程中更新视图没有延迟（没有睡眠调用或没有通过按下按钮启动线程），**则不会抛出异常**。

```
final TextView myTextView = (TextView)findViewById(R.id.myTextView);
final Thread thread = new Thread(new Runnable() {
    @Override
    public void run() {
        myTextView.setText("Hello text");
    }
});
thread.start(); 
```

谁能告诉我为什么会有这样的行为？

**更新：**

我学习了Android的源码，得出以下结论。Nandeesh写下了真相。初始化视图时调用View的dispatchAttachedToWindow(AttachInfo info, int visibility)方法，该方法初始化mAttachInfo字段。mAttachInfo 对象具有 mViewRootImpl 字段。如果为 null，getViewRootImpl 将返回为 null：

```
public ViewRootImpl getViewRootImpl() {
        if (mAttachInfo != null) {
            return mAttachInfo.mViewRootImpl;
        }
        return null;
    } 
```

ViewRootImpl 包含 checkThread 方法。它比较线程：创建视图的线程和请求视图更新的线程。

```
 void checkThread() {
        if (mThread != Thread.currentThread()) {
            throw new CalledFromWrongThreadException(
                    "Only the original thread that created a view hierarchy can touch its views.");
        }
    } 
```

因此，如果视图未初始化，则没有检查和更改不会引发异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T07:56:35.917

`textView`仅当重新布局完成时才会检查线程。但是视图的布局仅在`OnCreate`调用后完成。因此，在未显示 Ui 之前，更改 textView 不会导致视图无效。

但是一旦显示了 textView，就需要重新布局 UI，在这种情况下会检查线程。因此，只有在 Oncreate 一段时间后才会出现异常，但不会立即出现。

# opengl-es - 着色器和UV纹理映射之间的关系

> ID：13063411
> 
> 赞同：0
> 
> 时间：2012-10-25T07:11:33.770
> 
> 标签：opengl-es, shader, glkit

我正在使用 OpenGL ES + GLKit。我这辈子从来没有这么低过，所以我还是要学很多东西。我之前开发过一个 Unity 游戏，你只需给它一个 .obj 文件和相应的纹理，它就完成了。（UV 映射恰好在 .obj 文件中？）

我想开发一种特殊的卡通着色器，具有一些不同的特性，用于 3D 模型。所以我需要写一个顶点着色器（.vsh）和片段着色器（.fsh）对吗？

但是，我只知道要将纹理应用于具有正确 UV 坐标的模型，您必须在着色器中执行此操作吗？（我说得对吗？）使用“纹理着色器”。

所以，如果我想同时应用带有 UV 映射的纹理，**然后**应用我的特殊卡通着色器，我必须在同一个着色器中编写两者？有没有办法我可以创建一个即插即用的卡通着色器，以便我可以将它与任何东西一起使用？

作为一个附带问题，哪种文件格式是 UV 坐标，我怎样才能将它带入着色器程序？什么样的属性变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:56:25.527

> 所以我需要写一个顶点着色器（.vsh）和片段着色器（.fsh）对吗？

是的。

> 但是，我只知道为了将纹理应用于具有正确 UV 坐标的模型

真的

> 有没有办法我可以创建一个即插即用的卡通着色器，以便我可以将它与任何东西一起使用？

检查[优步着色器](http://www.gamedev.net/topic/457909-uber-shaders/)

> 以及如何将其纳入着色器程序？什么样的属性变量？

您自己在着色器中定义属性。检查这个[GLSL 教程](http://www.lighthouse3d.com/tutorials/glsl-tutorial/)

# c# - 面向对象编程基本概念(C#)

> ID：13063412
> 
> 赞同：2
> 
> 时间：2012-10-25T07:11:42.873
> 
> 标签：c#, asp.net, oop, inheritance, abstraction

据我们所知

*默认*修饰符

*   班级
*   结构
*   代表
*   界面
*   枚举

是**内部**的。

1.  *默认情况下*，枚举和接口成员是**public**。

2.  而 Class、Struct 和 Delegate 成员*默认*为**private**。

3.  同一类库的非派生类可以*访问*公共和内部类（以及公共、内部、受保护的内部成员）。

4.  不同类库的非派生类可以*访问*公共类（仅限公共成员）。

5.  不同类库的派生类可以*访问*公共类（public、protected、protected-internal 成员）。

现在我想了解为什么会这样的核心概念......

*受保护成员的范围大于内部？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:17:15.173

从[文档](http://msdn.microsoft.com/en-us/library/ms173121.aspx)：

> **受保护**
> 
> 类型或成员只能由同一类或结构中的代码或从该类派生的类中的代码访问。
> 
> **内部的**
> 
> 类型或成员可以由同一程序集中的任何代码访问，但不能从另一个程序集中访问。
> 
> **受保护的内部**
> 
> 类型或成员可以被声明它的程序集中的任何代码访问，也可以从另一个程序集中的派生类中访问。来自另一个程序集的访问必须在派生自声明受保护内部元素的类的类声明中进行，并且必须通过派生类类型的实例进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:25:56.017

> 4) 不同类库的非派生类可以访问公共类（public、protected、protected-internal 成员）。

这是不正确的。

4）不同类库的非派生类可以访问公共类（仅限公共成员）。

这意味着实际问题也值得商榷：

> 为什么会这样……受保护的成员的范围比内部的更大？

`protected`并且`internal`有*不同的*范围。哪个“更大”很难说。以这种方式比较它们根本没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:14:46.607

*受保护*只是意味着不能在派生类中重写此成员或方法。否则，它们的行为就像*公共*成员/方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T07:15:13.520

> 为什么会这样……受保护的成员的范围比内部的更大？

因为您可以让`protected`成员跨程序集访问，但对于`internal`.

`internal`内部成员只能在同一程序集中的文件中访问。它的范围仅限于组装。

`protected`可以在外部组装。受保护的成员可以从声明它的类中访问，也可以从从声明该成员的类派生的任何类中访问。这个派生类可以在程序集之外。

因此它的范围比`internal`修饰符更大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T07:16:29.883

**内部**成员没有被声明为导出，所以这就是为什么在模块之外看不到它们的原因，它们的 dll。

# vba - 运行时错误 1004：应用程序定义或对象定义错误

> ID：13063418
> 
> 赞同：-1
> 
> 时间：2012-10-25T07:12:03.067
> 
> 标签：vba, excel

![Excel电子表格](../Images/18376873b948abd604655ecc4ae6def7.png)![VBAScrennshot](../Images/6a2186a97eedbb2f1ce7c0c24bd03b40.png)我正在尝试记录一个宏，该宏将从 excel 数据中创建数据透视图，这是已记录的代码：

```
Sub chart1()
 '
 ' chart1 Macro
 '

 '
Range("E1:F11").Select
Sheets.Add
In Debugger, code within the **** **** is shown in Yellow color
***** ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    "data!R1C5:R11C6", Version:=xlPivotTableVersion12).CreatePivotTable _
    TableDestination:="Sheet1!R3C1", TableName:="PivotTable1", DefaultVersion _
    :=xlPivotTableVersion12 ********
Sheets("Sheet1").Select
Cells(3, 1).Select
With ActiveSheet.PivotTables("PivotTable1").PivotFields("question1")
    .Orientation = xlRowField
    .Position = 1
End With
With ActiveSheet.PivotTables("PivotTable1").PivotFields("answer1")
    .Orientation = xlColumnField
    .Position = 1
End With
ActiveSheet.PivotTables("PivotTable1").AddDataField ActiveSheet.PivotTables( _
    "PivotTable1").PivotFields("answer1"), "Count of answer1", xlCount
With ActiveSheet.PivotTables("PivotTable1").PivotFields("answer1")
    .Orientation = xlPageField
    .Position = 1
End With
ActiveSheet.PivotTables("PivotTable1").PivotFields("answer1").Orientation = _
    xlHidden
With ActiveSheet.PivotTables("PivotTable1").PivotFields("answer1")
    .Orientation = xlColumnField
    .Position = 1
End With
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range("Sheet1!$A$3:$D$6")
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range("Sheet1!$A$3:$D$6")
ActiveChart.ChartType = xlColumnClustered
End Sub 
```

当我尝试运行此宏时，为什么会出现运行时错误 1004：应用程序定义或对象定义错误？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:37:01.870

由于您希望图表位于新工作表上，因此您必须将宏的“Sheet1”更改为新工作表的名称，以下宏应该适合您，我已将新工作表命名为 newWs

仅供参考，我认为您的宏的错误消息是由于不允许在“Sheet1”上创建 2 个同名的数据透视表。

他也想知道如何根据 Selected Area 创建 pivotTable，所以我对代码进行了修改。

编辑：我假设您每次选择 2 列

```
Sub chart1()
 '
 ' chart1 Macro
 '

 '
Dim selectedSheetName As String
Dim newWs As Worksheet
Dim rangeName As String
Dim header1 As String
Dim header2 As String
header1 = ActiveSheet.Cells(1, Selection.Column).Value
header2 = ActiveSheet.Cells(1, Selection.Column + 1).Value
selectedSheetName = ActiveSheet.Name
rangeName = Selection.Address
Set newWs = Sheets.Add
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    selectedSheetName & "!" & rangeName, Version:=xlPivotTableVersion12).CreatePivotTable _
    TableDestination:=newWs.Name & "!R3C1", TableName:="PivotTable1", DefaultVersion _
    :=xlPivotTableVersion12
newWs.Activate
Cells(3, 1).Select
With ActiveSheet.PivotTables("PivotTable1").PivotFields(header1)
    .Orientation = xlRowField
    .Position = 1
End With
With ActiveSheet.PivotTables("PivotTable1").PivotFields(header2)
    .Orientation = xlColumnField
    .Position = 1
End With
ActiveSheet.PivotTables("PivotTable1").AddDataField ActiveSheet.PivotTables( _
    "PivotTable1").PivotFields(header2), "Count of answer1", xlCount
With ActiveSheet.PivotTables("PivotTable1").PivotFields(header2)
    .Orientation = xlPageField
    .Position = 1
End With
ActiveSheet.PivotTables("PivotTable1").PivotFields(header2).Orientation = _
    xlHidden
With ActiveSheet.PivotTables("PivotTable1").PivotFields(header2)
    .Orientation = xlColumnField
    .Position = 1
End With
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range(newWs.Name & "!$A$3:$D$6")
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range(newWs.Name & "!$A$3:$D$6")
ActiveChart.ChartType = xlColumnClustered
End Sub 
```

# objective-c - 像 iPhone 上的照片库一样按住并左右移动图像

> ID：13063423
> 
> 赞同：1
> 
> 时间：2012-10-25T07:12:23.813
> 
> 标签：objective-c, ios, xcode, image

目前我正在使用`UISwipeGestureRecognizer`查看每个图像的左侧或右侧，但图像移动得非常快。

哪种方式可以像 iPhone 照片库一样缓慢地握住和移动图像？

在 iPhone 照片上，我们可以非常缓慢地向左或向右移动图像，并且可以看到下一张图像的一部分。我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:25:36.357

使用 UIScrollView。这里有一个教程 - [http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)。

# html - 使用 GET 提取 POST URL

> ID：13063430
> 
> 赞同：0
> 
> 时间：2012-10-25T07:13:02.587
> 
> 标签：html, objective-c, url, post, get

我正在尝试在此网站中模拟表单的功能，但不确切知道帖子 URL 的样子。

该网站的链接在这里：selfservice.mypurdue.purdue.edu/prod/bwckschd.p_disp_dyn_sched >> 然后点击 Spring2013。我试图复制的代码是当用户单击课程搜索并从主题列表中选择 CS 时发生的代码。

您可以查看 HTML 文件以查看他们在 POST 命令中使用的值。单击按钮后，我如何查看值的样子，因为我正在尝试复制它并将变量设置为相同的值。我需要的是一个 URL，所有变量都设置为它们各自的值。我知道这可以通过 GET 命令来完成。有人可以告诉我如何为我提取此 URL 以便我继续吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:35:07.973

我使用 chrome 检查器编辑了页面并将表单操作更改为`GET`- 这是显示的 URL。

[https://selfservice.mypurdue.purdue.edu/prod/bwckschd.p_get_crse_unsec?term_in=201320&sel_subj=dummy&sel_day=dummy&sel_schd=dummy&sel_insm=dummy&sel_camp=dummy&sel_levl=dummy&sel_sess=dummy&sel_instr=dummy&sel_ptrm=dummy&sel_attr=dummy&sel_subj=CS&sel_crse=&sel_title=&sel_schd=%25&sel_from_cred =&sel_to_cred=&sel_camp=%25&sel_ptrm=%25&sel_instr=%25&sel_sess=%25&sel_attr=%25&begin_hh=0&begin_mi=0&begin_ap=a&end_hh=0&end_mi=0&end_ap=a](https://selfservice.mypurdue.purdue.edu/prod/bwckschd.p_get_crse_unsec?term_in=201320&sel_subj=dummy&sel_day=dummy&sel_schd=dummy&sel_insm=dummy&sel_camp=dummy&sel_levl=dummy&sel_sess=dummy&sel_instr=dummy&sel_ptrm=dummy&sel_attr=dummy&sel_subj=CS&sel_crse=&sel_title=&sel_schd=%25&sel_from_cred=&sel_to_cred=&sel_camp=%25&sel_ptrm=%25&sel_instr=%25&sel_sess=%25&sel_attr=%25&begin_hh=0&begin_mi=0&begin_ap=a&end_hh=0&end_mi=0&end_ap=a)

但是，此 URL 无法解析，因为脚本显然需要`POST`数据。

# ios - 如果我更改应用程序的名称，我的 iTunes 网址会怎样？

> ID：13063432
> 
> 赞同：-1
> 
> 时间：2012-10-25T07:13:17.430
> 
> 标签：ios

在整个互联网上，我没有找到这个问题的任何答案。

如果我更改应用程序的名称，我的 iTunes 网址会怎样？我的意思是我的应用程序 url 包含我的应用程序名称，所以如果我更改名称，那么 url 中的字符也会更改，并且我的旧应用程序 url 消失，但可能使用补丁更改名称对应用程序 url 没有影响。我不知道会发生哪一个。

我之所以问，是因为我要将我的应用程序的广告添加到另一个应用程序中，并且该应用程序的名称会有所不同，所以如果我犯了错误，我的广告将一文不值。

这是一个示例（我用 xxxx 代替了我的应用名称，用 11111111 代替了我的 i。）

[https://itunes.apple.com/au/app/xxxxxxxx/id1111111111?mt=8&ign-mpt=uo%3D2](https://itunes.apple.com/au/app/xxxxxxxx/id1111111111?mt=8&ign-mpt=uo%3D2)

这是我的应用程序的网址，它的名字是我将使用这些网址进行广告。

因此，如果我将我的名字更改为 yyyyyyyyyy，网址会保持不变还是地址会改变？

它会变成下面的网址还是保持不变？

[https://itunes.apple.com/au/app/yyyyyyyyy/id1111111111?mt=8&ign-mpt=uo%3D2](https://itunes.apple.com/au/app/yyyyyyyyy/id1111111111?mt=8&ign-mpt=uo%3D2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:45:53.360

据我所见，如果您不包含应用程序名称部分，则链接的工作方式完全相同，例如：

```
https://itunes.apple.com/us/app/id548271470?mt=8 
```

似乎真正重要的是应用程序 ID，如果您只是更改应用程序名称，那将不会改变。

# ruby-on-rails - 未定义的方法 `is_current' 用于# 在 ruby on rails 更新数据

> ID：13063433
> 
> 赞同：1
> 
> 时间：2012-10-25T07:13:17.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, exception

我正在尝试更新数据库中的一些数据，但出现此错误：

```
undefined method `is_current' for #<ActiveRecord::Relation:0x38622a8> 
```

我的控制器：

```
@user = User.where("user_id = #{user_id} and is_current = 1") 

if @user.nil?
  puts"xxxxxxxxxxxxxxxxxxxxxxxxxxx"
else 
  @user.is_current = 0
  @user.to = Time.now
  @user.save
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:17:43.373

User.where 返回一个数组。之后你需要说 .first 。此外，不要在不转义参数的情况下在其中使用字符串。您的查询不安全并且对 SQL 注入开放。

```
@user = User.where(user_id: user_id, is_current: 1).first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:23:15.493

尝试在模型中编写查询，这是一个很好的做法，所以你可以这样做

```
@user = User.where("user_id = #{user_id} and is_current = 1") 
```

用。。。来代替

```
@user = User.user_is_current(user_id,1) # two argument 1) user_id and 2) is_current value 
```

在你的模型中

```
def user_is_current(user_id,is_current)
  where(user_id: user_id, is_current: is_current)
end 
```

它将以数组形式提供数据，因此您可以编写

```
 @user = User.user_is_current(user_id,1).first 
```

# android - 通过命令让系统进入睡眠状态

> ID：13063436
> 
> 赞同：0
> 
> 时间：2012-10-25T07:13:37.777
> 
> 标签：android, linux, sleep

在`Linux`or`Android`里面`/sys/power/wake_lock`有这样一个文件，如果我发现系统没有进入睡眠，可以使用echo`XXX > /sys/power/wake_lock`解锁，让系统进入睡眠。

这会影响系统吗？

# c - 运行 C 代码时输出错误

> ID：13063438
> 
> 赞同：7
> 
> 时间：2012-10-25T07:13:42.143
> 
> 标签：c

> **可能重复：**
> [在 C 中调用函数之前的参数评估顺序](https://stackoverflow.com/questions/376278/parameter-evaluation-order-before-a-function-calling-in-c)

对于下面的代码，我预计输出为 20 和 76，但 75 和 21 是作为输出来的。请解释为什么会这样。

```
 #include<stdio.h>

    unsigned func(unsigned n)
    {

       unsigned int a =1 ;        
       static unsigned int b=2;        
       a+=b; b+=a;        
       {

         unsigned int a=3;        
         a+=b; b+=a;        
       }
       //printf("%d %d ",a,b);
       return (n+a+b);        
    }
    int main()
    {
        printf("%d %d\n",func(4),func(5));
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T07:22:21.297

您希望`func(4)`之前被调用，`func(5)`但您的编译器会发生相反的情况。C 标准*未指定*函数参数的评估顺序。因此，编译器可以自由选择首先调用哪个函数。因此，在不同的运行中，您可能会观察到不同的函数调用顺序，尽管使用相同的编译器不太可能以这种方式发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T07:20:05.120

C 标准没有定义 func(4) 和 func(5) 的求值顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T07:20:47.743

`unspecified behaviour` 因此`func(4)`，表达式的评估`func(5)`顺序可以按照您应该的顺序以不同的顺序调用

您可能想访问它以了解更多信息

[C++ 中的编译器和参数求值顺序](https://stackoverflow.com/questions/621542/compilers-and-argument-order-of-evaluation-in-c)

[在 C 中调用函数之前的参数评估顺序](https://stackoverflow.com/questions/376278/parameter-evaluation-order-before-a-function-calling-in-c)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T07:19:13.267

参数以相反的顺序压入堆栈。似乎在您的编译器实现中，`func(5)`被调用 before `func(4)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T07:23:23.240

评估顺序可能是原因。因为，

```
//printf("%d %d\n",func(4),func(5));
        printf("%d \n",func(4));
        printf("%d \n",func(5)); 
```

印刷

```
20 
76 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T07:25:01.757

func(5) 首先被执行：

执行 func(5) 后的变量值：

```
a = 3
b = 13
func(5) = 21 
```

由于 b 是静态的，因此执行 func(4) 后的值：

```
a = 14
b = 57
func(4) = 75 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-25T07:31:48.733

代码很简单，记住`static`变量将在函数调用之间保留它们的值。

在您的程序中，由于您的编译器（因此编译器特定，未由标准定义）：

`func(5)`首先执行， : 返回 21.. 解释：

```
 unsigned func(unsigned n) /*first with 5*/
    {

       unsigned int a =1 ;        
       static unsigned int b=2;        
       a+=b; b+=a;        // a = 3, b = 5
       {

         unsigned int a=3;        
         a+=b; b+=a;        // a = 8, b = 13
       }
       //printf("%d %d ",a,b);
       return (n+a+b);        // 5 + 3 + 13 = 21\. 
    } 
```

接下来执行 func(4)，

解释：

```
 unsigned func(unsigned n) /*first with 5*/
    {

       unsigned int a =1 ;        
       static unsigned int b=2;        
       a+=b; b+=a;        // a = 14, b = 27
       {

         unsigned int a=3;        
         a+=b; b+=a;        // a = 30, b = 57
       }
       //printf("%d %d ",a,b);
       return (n+a+b);        // 4 + 57 + 14 = 75(which is printed first). 
    } 
```

因此输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-25T07:31:57.273

对此有一个众所周知的术语，称为“功能副作用”。您更改函数内的变量，调用该函数并依赖使用期望它已经更改的变量的语句。通常应该避免这种情况，这不是一个好方法。

在这种情况下，更好的替代方法是调用函数并存储返回值，然后在 printf 中使用它们，或者进行两个不同的 printf 调用。

[副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)

# php - 在新数据库中安装表、字段和静态数据的标准方法是什么？

> ID：13063440
> 
> 赞同：0
> 
> 时间：2012-10-25T07:13:47.717
> 
> 标签：php, mysql, dictionary, configuration-files, rdbms

不幸的是，我所有的 RDMS 经验都来自使用我公司的专有数据库技术，我正在努力寻找将我的知识转移到 PHP/MySQL 实践的类似物。

在我的公司，我们定义了定义表、字段、键等的“数据字典”配置：

```
orders_Dct.cfg
trades_Dct.cfg
profiles_Dct.cfg 
```

一个这样的配置文件可能如下所示：

```
table
{
    name   ORDERS
    fields (ORDER_ID, ORDER_VS, PRICE, QUANTITY)

    key
    {
        name ORDERS_BY_ID_VS
        sort (ORDER_ID, ORDER_VS)
    }
}

field
{
    name ORDER_ID
    type CHARARRAY
    size 8
}

field
{
    name ORDER_VS
    type I32
}

field
{
    name PRICE
    type F64
}

field
{
    name QUANTITY
    type F64
} 
```

此外，我们定义“静态数据”，例如`profiles_Static.cfg`：

```
table
{
    name PROFILES

    entry
    {
        USER_ID    0
        USER_NAME  SYSTEM
        SUPER_USER Y
    }

    entry
    {
        USER_ID    1
        USER_NAME  TEST
        SUPER_USER N
    }
} 
```

然后，我们运行诸如 、 和 之类的命令`Install`来`Remap`根据`LoadStatic`这些配置文件更新数据库。

现在，我当然可以编写脚本，甚至可以复制我公司做事的方式，但我认为在 PHP/MySQL 中必须有一些标准的方式来做到这一点。我想知道我是否在使用错误的术语进行搜索，因为基于诸如“mysql”、“database”、“dictionary”、“configuration”和“rollout”之类的术语，我发现只有[这个关于创建实用程序的问题database dictionary](https://stackoverflow.com/questions/4692022/utility-to-create-data-dictionary-for-mysql-database)，至少乍一看，这似乎不是我要找的。**我想要一种简单的、基于配置文件的方法来设置数据库表、字段、键和静态数据。有人会指出我正确的方向吗？**

**如果没有这样的“标准”做法，那么一定有充分的理由，我愿意适应不同的做事方式。**但是为此目的编写自定义脚本绝对是愚蠢的！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:27:01.480

你很幸运！有一整套语言专门用于描述[数据库表的创建](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)和向其中[插入数据](http://dev.mysql.com/doc/refman/5.1/en/insert.html)。它还支持[对现有表的修改](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)。

这种语言称为.... SQL。

* * *

还有一个命令，`mysqldump`可以从活动数据库生成 SQL。

# iphone - 多点裁剪图像后如何保存UIImage？

> ID：13063441
> 
> 赞同：3
> 
> 时间：2012-10-25T07:13:54.130
> 
> 标签：iphone, ios

我想对图像进行多点裁剪（见图）。它工作正常。我的问题是裁剪图像后如何保存`UIImage`。我正在使用`CAShapeLayer`裁剪图像。下面的代码用于多点裁剪。

```
- (void)multiPointCrop:(CGPoint)cropPoint
{
    UIBezierPath *aPath = [UIBezierPath bezierPath];
    [aPath moveToPoint:cropPoint];

    for (NSString *pointString in self.touchPoints) { 
        if ([self.touchPoints indexOfObject:pointString] != 0)
            [aPath addLineToPoint:CGPointFromString(pointString)];
    }
    [aPath addLineToPoint:cropPoint];
    [aPath closePath];

    [self setClippingPath:aPath andView:self];
    [self setNeedsDisplay];
}

- (void)setClippingPath:(UIBezierPath *)clippingPath andView:(UIView *)view;
{
    if (![[view layer] mask])
        [[view layer] setMask:[CAShapeLayer layer]];

    [(CAShapeLayer*) [[view layer] mask] setPath:[clippingPath CGPath]];
} 
```

如何`UIImage`保存`CAShapeLayer`？如果这是多重裁剪的正确方法或任何其他简单的方法来实现这一点。请给出你的想法、建议、源代码等。任何东西都欢迎。![在此处输入图像描述](../Images/2db78fa7bfcd9e77e38ec189f82b02e5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:20:40.217

尝试将图层渲染到上下文中并从该上下文创建图像。

```
CALayer *layer = view.layer;
CGSize s = layer.frame.size;
// create context
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(NULL, s.width, s.height,
                                             8, (s.width * 4),
                                             colorSpace, kCGImageAlphaPremultipliedLast);

// flip Y
CGContextTranslateCTM(context, 0.0, s.height);    
CGContextScaleCTM(context, 1.0, -1.0);

// render layer
[layer renderInContext:context];

CGImageRef imgRef = CGBitmapContextCreateImage(context);
// here is your image
UIImage *img = [UIImage imageWithCGImage:imgRef];  

// release owned memory
CGImageRelease(imgRef);
CGColorSpaceRelease(colorSpace);
CGContextRelease(context); 
```

# php - 从while循环打印的结果中的随机间隙？

> ID：13063447
> 
> 赞同：0
> 
> 时间：2012-10-25T07:14:20.910
> 
> 标签：php, html, sql, css

我创建了一个搜索表单，允许用户在包装数据库中搜索结果。我最近在将结果打印成三行时遇到了问题，因为所有结果都在下面打印一个，每个结果。我设法解决了这个问题，现在结果是三行，除了现在，有随机间隙，一两行只有一个结果，但结果将在下一行继续 3。我似乎无法确定为什么这是随机发生的。

它似乎没有任何模式，它取决于用户搜索的内容。

这是PHP代码：

```
 <?php
            $con = mysql_connect ("localhost", "horizon1", "");
                   mysql_select_db ("horizon1_delyn", $con);

            if (!$con)
                { 
                    die ("Could not connect: " . mysql_error());
                }

            $descrip = mysql_real_escape_string($_POST['descrip']); 
            $depth   = mysql_real_escape_string($_POST['depth']);
            $varWidth = mysql_real_escape_string($_POST['traywidth']);
            $varHeight= mysql_real_escape_string($_POST['trayheight']);
            $varRange = mysql_real_escape_string($_POST['trayrange']);
            $varType  = mysql_real_escape_string($_POST['traytype']);
            $varShape = mysql_real_escape_string($_POST['trayshape']);
            $varImage = mysql_real_escape_string($_POST['imagename']);

            if (isset($varHeight) && !empty($varHeight)) {
                    $low  = ($varHeight."00");
                    $high = ($varHeight."99");
                } else {
                    $low  = ("000");
                    $high = ("999");
                }

            if (isset($varWidth) && !empty($varWidth)) {
                    $min  = ($varWidth."00");
                    $max = ($varWidth."99");
                } else {
                    $min  = ("000");
                    $max = ("999");
                }   

            $sql = "SELECT * FROM range WHERE 
                        description LIKE '%".$descrip."%'  
                    AND trayrange   LIKE '%".$varRange."%' 
                    AND traytype    LIKE '%".$varType."%' 
                    AND trayshape   LIKE '%".$varShape."%'
                    AND traywidth   BETWEEN '".$min."'  AND '".$max."' 
                    AND trayheight  BETWEEN '".$low."' AND '".$high."' ";

                $r_query = mysql_query($sql);  

    $count = 0;
    while ($row = mysql_fetch_array($r_query)) 
    { 

    $t = $count%1;
    echo ($t==4) ?  '<div id="results">' : '<div id="results" style="float:left">';

    echo '<p class="image">
            <img src="   '. $row['imagename'] . '" width="150" length="80"> 
          </p>';
    echo '<div id="table">
          <br /><strong> Tool Code:  </strong> '. $row['toolcode'];
    echo '<br /><strong> Description:</strong> '. $row['description']; 
    echo '<br /><strong> Tray range: </strong> '. $row['trayrange']; 
    echo '<br /><strong> Tray type:  </strong> '. $row['traytype'];
    echo '<br /><strong> Tray size:  </strong> '. $row['traysize']; 
    echo '<br /><strong> Tray shape: </strong> '. $row['trayshape'] . '</div>' . '<br />';
    echo '<a href="http://www.delynpackaging.co.uk/contact.htm">Enquiry Page</a> <br />' . 
         '<a href="http://176.67.171.11/range-test/rangetest.php">Back to Search</a>';
    echo '</div>' . '</div>';

    $count++;
}

            if (mysql_num_rows($r_query) <= 0){
                echo 'No results match your search, please try again';
           }
    ?> 
```

谁能明白为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:26:12.090

这可能取决于盒子的宽度，当它们不适合该行时它们会包裹起来。还有 $t = $count%1; 看起来不寻常，应该是 $t = $count%3; 然后条件应为： ($count>0 && $t==0)

# iphone - 显示自定义联系人，如 iphone 通讯录

> ID：13063451
> 
> 赞同：-1
> 
> 时间：2012-10-25T07:14:42.113
> 
> 标签：iphone, objective-c, ios, abaddressbook

我试过了

[http://zcentric.com/2008/09/19/access-the-address-book/](http://zcentric.com/2008/09/19/access-the-address-book/)

而且效果很好。但现在我有一个数组或其他结构，而不是地址簿联系人，我有一个包含我的联系人的结构，我想像地址簿一样显示它。

我需要全部自定义还是有什么方法可以使用地址簿显示我的联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:32:48.163

从苹果这里阅读[地址簿编程指南](http://developer.apple.com/library/ios/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/AddressBookProgrammingGuideforiPhone.pdf)，你会得到你问题的详细答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:48:10.977

使用 ABPeoplePickerNavigationController，您只能从 Ipad 或 Iphone 通讯录中获取联系人。

如果您希望结构数据具有相同的功能，则需要使用 UITableView 和其他视图将其全部自定义。

# nginx - NGINX + uWSGI 连接由 Peer 重置

> ID：13063454
> 
> 赞同：10
> 
> 时间：2012-10-25T07:14:47.010
> 
> 标签：nginx, uwsgi, bottle

我正在尝试使用 uWSGI 在 NGINX 上托管 Bottle 应用程序。

这是我的**nginx.conf**

```
location /myapp/ {
        include uwsgi_params;
        uwsgi_param X-Real-IP $remote_addr;
        uwsgi_param Host $http_host;
        uwsgi_param UWSGI_SCRIPT myapp;
        uwsgi_pass 127.0.0.1:8080;
    } 
```

我正在运行 uwsgi

```
uwsgi --enable-threads --socket :8080 --plugin python -- wsgi-file ./myApp/myapp.py 
```

我正在使用 POST 请求。为此，使用 dev Http 客户端。当我发送请求时它会无限

```
http://localhost/myapp 
```

uWSGI 服务器接收请求并打印

```
[pid: 4683|app: 0|req: 1/1] 127.0.0.1 () {50 vars in 806 bytes} [Thu Oct 25 12:29:36 2012] POST /myapp => generated 737 bytes in 11 msecs (HTTP/1.1 404) 2 headers in 87 bytes (1 switches on core 0) 
```

但在 nginx 错误日志中

```
2012/10/25 12:20:16 [error] 4364#0: *11 readv() failed (104: Connection reset by peer) while reading upstream, client: 127.0.0.1, server: localhost, request: "POST /myApp/myapp/ HTTP/1.1", upstream: "uwsgi://127.0.0.1:8080", host: "localhost" 
```

该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-05T19:56:45.173

确保在您的应用程序中使用您的帖子数据

例如，如果你有一个 Django/python 应用程序

```
def my_view(request):

    # ensure to read the post data, even if you don't need it
    # without this you get a: failed (104: Connection reset by peer)
    data = request.DATA

    return HttpResponse("Hello World") 
```

一些细节：[https ://uwsgi-docs.readthedocs.io/en/latest/ThingsToKnow.html](https://uwsgi-docs.readthedocs.io/en/latest/ThingsToKnow.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T07:38:20.100

如果不在应用程序中读取数据，就无法从客户端发布数据。虽然这在 uWSGI 中不是问题，但 nginx 会失败。您可以使用 uWSGI 的 --post-buffering 选项“伪造”该东西以自动从套接字读取数据（如果可用），但您最好“修复”（即使我不认为这是一个错误）您的应用程序

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-11T16:35:57.340

当请求的主体没有被消耗时，就会出现这个问题，因为 uwsgi 无法知道在某些时候是否仍然需要它。所以 uwsgi 将继续持有数据直到它被消耗或直到 nginx 重置连接（因为上游超时）。

uwsgi 的作者在[这里](https://stackoverflow.com/questions/13063454/nginx-uwsgi-connection-reset-by-peer)解释：

```
08:21 < unbit> plaes: does your DELETE request (not-response) have a body ?
08:40 < unbit> and do you read that body in your app ?
08:41 < unbit> from the nginx logs it looks like it has a body and you are not reading it in the app
08:43 < plaes> so DELETE request shouldn't have the body?
08:43 < unbit> no i mean if a request has a body you have to read/consume it
08:44 < unbit> otherwise the socket will be clobbered 
```

因此，要解决此问题，您需要确保始终阅读整个请求正文，或者在不需要时不发送正文（例如 DELETE）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T15:54:42.347

**不使用线程！**

我在 uwsgi 下的 Python 中的 Global Interpretator Lock 也有同样的问题。当我不使用线程时-不重置连接。

uwsgi 配置示例（服务器上的 1Gb Ram）

```
[root@mail uwsgi]# cat myproj_config.yaml 
uwsgi:
    print: Myproject Configuration Started
    socket: /var/tmp/myproject_uwsgi.sock
    pythonpath: /sites/myproject/myproj
    env: DJANGO_SETTINGS_MODULE=settings
    module: wsgi
    chdir: /sites/myproject/myproj
    daemonize: /sites/myproject/log/uwsgi.log
    max-requests: 4000
    buffer-size: 32768
    harakiri: 30
    harakiri-verbose: true
    reload-mercy: 8
    vacuum: true
    master: 1
    post-buffering: 8192
    processes: 4
    no-orphans: 1
    touch-reload: /sites/myproject/log/uwsgi
    post-buffering: 8192 
```

# eclipse - 不支持 Eclipse Juno Tomcat 6 远程主机

> ID：13063456
> 
> 赞同：1
> 
> 时间：2012-10-25T07:14:47.747
> 
> 标签：eclipse, tomcat, tomcat6

我正在尝试在我的 Eclipse Juno 中添加一个 tomcat 6 服务器，但我收到了这个错误：

```
The currently selected server type does not support remote hosts 
```

在 juno 之前，我在同一台机器上安装了 galileo，我能够在其中成功添加 tomcat 6，没有任何问题。

在询问之前我在互联网上进行了搜索，但我得到的唯一相关链接是： [Eclipse Tomcat7 服务器不支持远程主机](https://stackoverflow.com/questions/9444893/eclipse-tomcat7-server-doesnt-support-remote-host) ，它没有多大帮助。

请帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-10T06:57:31.050

我在使用 Tomcat 7 时遇到了同样的问题，我通过从另一个已经设置了服务器的工作区导入 Tomcat 7 项目解决了这个问题。此外，我为 Apache Tomcat 7 添加了运行时环境（窗口 > 首选项 > 服务器 > 运行时环境 > 添加）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T17:20:24.443

我最近遇到了同样的问题，那是因为我安装了以前版本的tomcat，升级到新版本，删除到旧版本，并且从未更改过Eclipse中的运行时环境。这是一个糟糕的错误消息，因为它没有说明问题的真实性质，但无论如何......解决这个问题的最简单方法是：

打开 Eclipse，右键单击工作区并选择 New Server。

进入*Define New Server*向导后，单击 Apache 并选择 Tomcat 6。在这里您应该会看到错误*The current selected server type does not support remote hosts*。现在在服务器运行时环境下单击*配置运行时环境*，将打开新的弹出窗口。您应该会在首选项窗口中看到 Apache Tomcat v6.0。选择此项并单击右侧的编辑。

您将看到一个名为 Edit Server Runtime Environment 的新弹出窗口。在 Tomcat 安装目录下，您可以浏览到 Tomcat 目录的位置。假设您已经下载了 Tomcat 并将其放在 C: 驱动器的顶层，您应该有如下内容：*C:\apache-tomcat-6.0.36*。单击完成，您应该一切顺利。让我们知道它是如何为您服务的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-21T19:14:12.167

我也遇到了同样的问题并尝试遵循@dbk 的解决方案，但我在向导屏幕中没有“配置运行时环境”。对我来说，我需要转到我错误配置运行时环境的首选项-> 服务器-> 运行时环境。所以要清楚，如果您有未正确配置的运行时环境，您必须先编辑它们。

# java - 我可以在同一个块启动同一个线程两次吗？

> ID：13063460
> 
> 赞同：-1
> 
> 时间：2012-10-25T07:15:21.847
> 
> 标签：java

我在两行上两次启动同一个线程，

```
new MyThread(0).start();
new MyThread(1).start(); 
```

我可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:16:26.920

这些是相同**类型的不同****实例**，而且绝对不是同一个线程，你可以这样做。

 **这种表示法可以更清楚地说明原因（尽管除了输出线之外它与原始符号等效）：

```
Thread instance1 = new MyThread(0); //created one instance
Thread instance2 = new MyThread(1); //created another instance

//we have two different instances now
// let's see if that is true, or not:
System.out.println("The two threads are " + (instance1==instance2?"the same":"different"));

instance1.start(); //start first thread instance
instance2.start(); //start second instance 

//we just started the two different threads 
```

但是，根据 的实现`MyThread`，这**可能会**带来问题。多线程编程并不容易。线程实例应该以线程安全的方式运行，这对保证来说并非易事。

推荐阅读：[Java 并发实践（Peierls、Bloch、Bowbeer、Holmes、Lea）](http://www.javaconcurrencyinpractice.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T07:20:03.517

正如[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start%28%29)所说，您不能多次启动一个线程 - 如果您调用`start()`一个已经启动的线程，您将获得一个`IllegalThreadStateException`.

但是，您的代码并没有按照您说的做：您**没有**使用该代码两次启动同一个线程 - 您正在创建两个单独的`MyThread`对象，您可以启动它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:16:48.697

是的，因为您正在实例化两个线程。

尽管它们具有相同的类 ( `MyThread`)，但每次`new`在 java 中使用关键字时，都会实例化一个新对象。这个新对象不能与原始对象共享数据。您已经创建了两个单独的`MyThread`对象；你可以开始一个而不是另一个，或者两个都开始。**

# lua - 如何动态地相对于另一个显示对象放置一个显示对象？

> ID：13063463
> 
> 赞同：0
> 
> 时间：2012-10-25T07:15:37.170
> 
> 标签：lua, coronasdk

当参考对象的大小和位置可能不同时，我想将图像放置在另一个 DisplayObject ( Vector Object ) 中。

```
local memoRect = display.newRect(135,100,440,540)
local memoTitle = display.newImage("images/memobg.png", 135, 100) 
```

我想以相对的方式放置`memoTitle` *在*范围内。`memoRect`但是下面的代码不起作用。

```
local memoRect = display.newRect(135,100,440,540)
local memoTitle = display.newImage("images/memobg.png", memoRect.x + 10, memoRect.y + 20) 
```

我希望上面的代码放在`memoTitle`左上角，`memoRect`而不是这个代码将`memoTitle`原点放在`X`中心`memoRect`和`Y`顶部/0。

这是预期的行为吗？这是一个错误吗？

我如何`DisplayObjects`相对于彼此放置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:01:12.497

经过几个小时尝试不同的事情后，我得出的*正确*答案基本上是`referencePoint`默认设置为荒谬，`display.CenterReferencePoint`而不是`display.TopLeftReferencePoint`

一旦我做了以下事情，一切都如我所料。

```
local memoRect = display.newRect(0,0,440,540)
local memoTitle = display.newImage("images/memobg.png", 0, 0)
memoRect:setReferencePoint(display.TopLeftReferencePoint)
memoTitle:setReferencePoint(display.TopLeftReferencePoint)
memoRect.x = 135; memoRect.y = 100
memoTitle.x = memoRect.x + 10; memoTitle.y = memoRect.y + 20 
```

现在一切都相对于彼此工作（实际上是它们所在的 DisplayGroup ）。这样我可以移动一件东西，而其他东西将相对于该物体定位自己。

*我不知道默认设置背后的荒谬逻辑，`display.CenterReferencePoint`但我能想象的任何推理都不合逻辑。*

# jquery - jQuery validationEngine => onSuccess 似乎不起作用

> ID：13063467
> 
> 赞同：1
> 
> 时间：2012-10-25T07:15:51.003
> 
> 标签：jquery, jquery-validation-engine

首先在这里尝试，我在过去 3 晚尝试了一切可能的 jQuery 插件，得到一个非常简单的东西：

> 当我提交一个表单（target = iframe）时，工作正常，我只需要在它被验证“取消隐藏”一个 div 时......我尝试了每一个小说都没有成功。

不幸的是，我没有尝试过任何工作。

我在官方网站上搜索，但没有“onSuccess”的文档......只是：

onSuccess 如果设置，则在所有验证通过时调用此回调函数。

所以也许有人可以帮助我：

```
$('#MYFORM').validationEngine('attach', {
    onValidationComplete: function(form, status){
        if (status == true) {                   
            alert('success'); << EVEN THIS DOESNT WORKS, FORM SUBMITS OR DISPLAY MISSING FIELDS
        }
    }           
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:37:27.137

嗨，感谢您的帮助。

事实上，我只有 2 个字段（我多次使用这个插件，所以知道它是如何工作的，而且它非常适合验证）。

我`class="validate[required,length[5,100]]"`在两个字段中添加了：

形式太经典了……

```
<form name="MYFORM" id="MYFORM" action="target.cgi"> 
```

所以我尝试将上面的代码添加到“验证”中，如果验证显示一个 div“正在进行中”...

```
$('#MYFORM').validationEngine('attach', {
onValidationComplete: function(form, status){
    if (status == true) {                   
        alert('success'); << EVEN THIS DOESNT WORKS, FORM SUBMITS OR DISPLAY MISSING FIELDS
    }
} 
```

为了测试，我尝试了一切，并想显示一个非常小的“警报”，但没有任何反应。

事实上 onsubmitr “如果验证正常” 我需要在“提交”之前显示 DIV ......但从来没有工作过，尝试了我读过的所有东西......所以我会编写自己的例程：P 不使用验证插件.

任何想法 ？

# javascript - 使用 wp7 模拟器调试 JavaScript

> ID：13063469
> 
> 赞同：0
> 
> 时间：2012-10-25T07:15:54.550
> 
> 标签：javascript, debugging, windows-phone-7

嘿伙计们，我在为 WP7 调试我的移动应用程序时遇到问题。我的 javascript 在另一个 .js 文件中。现在我什至放了调试器；在代码中，但它完全忽略了编码行，我也不能在其中设置断点，一旦我运行断点就变成了一个小圆圈，图像如下：

![在此处输入图像描述](../Images/cbdc60ce72854e9cfa453d3190155aef.png)

真的很需要帮助，公司希望看到结果，但由于调试，我无法完成？任何帮助或链接将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:37:38.027

Windows Phone SDK 不支持调试应用程序中嵌入的 Javascript。

调试 Javascript 代码的最佳方法是使用**桌面**版 Internet Explorer 9，因为它与 WP7 的 IE 和 WebBrowser 控件共享相同的基本代码。

# python - 使用 boto python 从 s3 递归下载文件。

> ID：13063474
> 
> 赞同：22
> 
> 时间：2012-10-25T07:16:00.947
> 
> 标签：python, amazon-s3, amazon-web-services, boto

我在 s3 中有一个存储桶，它具有深层目录结构。我希望我可以一次下载它们。我的文件如下所示：

```
foo/bar/1\. . 
foo/bar/100 . . 
```

有什么方法可以在 python 中使用 boto lib 从 s3 存储桶递归下载这些文件？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-25T07:25:57.117

您可以像这样下载存储桶中的所有文件（未经测试）：

```
from boto.s3.connection import S3Connection

conn = S3Connection('your-access-key','your-secret-key')
bucket = conn.get_bucket('bucket')
for key in bucket.list():
    try:
        res = key.get_contents_to_filename(key.name)
    except:
        logging.info(key.name+":"+"FAILED") 
```

请记住，S3 中的文件夹只是另一种编写密钥名称的方式，只有客户端会将其显示为文件夹。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-06T15:34:18.310

```
#!/usr/bin/env python

import boto
import sys, os
from boto.s3.key import Key
from boto.exception import S3ResponseError

DOWNLOAD_LOCATION_PATH = os.path.expanduser("~") + "/s3-backup/"
if not os.path.exists(DOWNLOAD_LOCATION_PATH):
    print ("Making download directory")
    os.mkdir(DOWNLOAD_LOCATION_PATH)

def backup_s3_folder():
    BUCKET_NAME = "your-bucket-name"
    AWS_ACCESS_KEY_ID= os.getenv("AWS_KEY_ID") # set your AWS_KEY_ID  on your environment path
    AWS_ACCESS_SECRET_KEY = os.getenv("AWS_ACCESS_KEY") # set your AWS_ACCESS_KEY  on your environment path
    conn  = boto.connect_s3(AWS_ACCESS_KEY_ID, AWS_ACCESS_SECRET_KEY)
    bucket = conn.get_bucket(BUCKET_NAME)

    #goto through the list of files
    bucket_list = bucket.list()

    for l in bucket_list:
        key_string = str(l.key)
        s3_path = DOWNLOAD_LOCATION_PATH + key_string
        try:
            print ("Current File is ", s3_path)
            l.get_contents_to_filename(s3_path)
        except (OSError,S3ResponseError) as e:
            pass
            # check if the file has been downloaded locally  
            if not os.path.exists(s3_path):
                try:
                    os.makedirs(s3_path)
                except OSError as exc:
                    # let guard againts race conditions
                    import errno
                    if exc.errno != errno.EEXIST:
                        raise

if __name__ == '__main__':
    backup_s3_folder() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-06T05:53:07.273

```
import boto, os

LOCAL_PATH = 'tmp/'

AWS_ACCESS_KEY_ID = 'YOUUR_AWS_ACCESS_KEY_ID'
AWS_SECRET_ACCESS_KEY = 'YOUR_AWS_SECRET_ACCESS_KEY'
bucket_name = 'your_bucket_name'

# connect to the bucket
conn = boto.connect_s3(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
bucket = conn.get_bucket(bucket_name)

# go through the list of files
bucket_list = bucket.list()
for l in bucket_list:
  keyString = str(l.key)
  d = LOCAL_PATH + keyString
  try:
    l.get_contents_to_filename(d)
  except OSError:
    # check if dir exists
    if not os.path.exists(d):
      os.makedirs(d)  # Creates dirs recurcivly 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-13T01:24:39.163

刚刚将目录创建部分添加到@j0nes 评论

```
from boto.s3.connection import S3Connection
import os

conn = S3Connection('your-access-key','your-secret-key')
bucket = conn.get_bucket('bucket')

for key in bucket.list():
    print key.name
    if key.name.endswith('/'):
        if not os.path.exists('./'+key.name):
            os.makedirs('./'+key.name)
    else:
        res = key.get_contents_to_filename('./'+key.name) 
```

这会将文件下载到当前目录并在需要时创建目录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-09T18:57:40.037

如果文件夹中有超过 1000 个文件，则需要使用分页器来遍历它们

```
import boto3
import os
# create the client object
client = boto3.client(
's3',
aws_access_key_id= S3_ACCESS_KEY,
aws_secret_access_key=  S3_SECRET_KEY
)
# bucket and folder urls
bucket= 'bucket-name'
data_key = 'key/to/data/'

paginator = client.get_paginator("list_objects_v2")
for page in paginator.paginate(Bucket=bucket, Prefix=data_dir):
    for obj in page['Contents']:
        key = obj['Key']
        tmp_dir =  '/'.join(key.split('/')[0:-1])
        if not os.path.exists('/'.join(key.split('/')[0:-1])):
            os.makedirs(tmp_dir)
        else:
            client.download_file(bucket, key, tmp_dir + key.split('/')[-1]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-09T09:38:59.903

```
import boto
from boto.s3.key import Key

keyId = 'YOUR_AWS_ACCESS_KEY_ID'
sKeyId='YOUR_AWS_ACCESS_KEY_ID'
bucketName='your_bucket_name'

conn = boto.connect_s3(keyId,sKeyId)
bucket = conn.get_bucket(bucketName)
for key in bucket.list():
    print ">>>>>"+key.name
    pathV = key.name.split('/')
    if(pathV[0] == "data"):
        if(pathV[1] != ""):
            srcFileName = key.name
            filename = key.name
            filename = filename.split('/')[1]
            destFileName = "model/data/"+filename
            k = Key(bucket,srcFileName)
            k.get_contents_to_filename(destFileName)
    elif(pathV[0] == "nlu_data"):
        if(pathV[1] != ""):
            srcFileName = key.name
            filename = key.name
            filename = filename.split('/')[1]
            destFileName = "model/nlu_data/"+filename
            k = Key(bucket,srcFileName)
            k.get_contents_to_filename(destFileName` 
```

# python - 扩展 django-tables2

> ID：13063477
> 
> 赞同：2
> 
> 时间：2012-10-25T07:16:24.063
> 
> 标签：python, django, django-tables2

我是 django-tables2 的重度用户，我曾想过向 django-table 添加一个通用扩展：我希望允许用户能够将所有表数据导出到 excel（使用 xlwt）或 csv单击位于桌子附近某处的按钮。

现在，我以非通用方式实现了这一点，这意味着我在模板中包含了一个 POST 表单和一个按钮，并添加了一个检查以查看是否单击了填充表格的视图。如果单击该按钮，则返回 xls 而不是普通模板。此外，我实现了一个通用函数，它获取一个 django-table2 表（任何表）并将其转换为 xlwt 表（以便将其放入工作簿）。

这工作正常，但由于我将在我的所有表格中使用此按钮，我不想将导出表单和按钮添加到我的所有包含表格的 html 模板中。此外，我不想将 POST 检查添加到我的所有视图中！这绝对不是 DRY :(

理想情况下，我希望有一个类，假设它是 ExportTable，它将扩展 django-tables2 的 Table 类并且可以用作替代品 - 当我使用 ExportTable 作为基类创建我的表时，然后按钮和该视图将具有导出表所需的组件。据我所知，这是不可能的:(

有人可以向我建议我应该以哪种方式扩展 django-tables2 以便能够以最干燥的方式添加“导出”功能？这意味着我只能在我的模板中使用 {% render_table table %} 标记（或它的扩展），而无需在我的视图中添加检查以查看用户是否单击了导出按钮（以及当然不需要添加额外的视图和 url 路由来处理它）。通用类视图是要走的路吗？

我会接受最干燥和最完整的（我想有一些带有评论的源代码）回答:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:04:33.570

我使用[django-tables2-reports](http://pypi.python.org/pypi/django-tables2-reports/0.0.3)将 table2 数据导出到 csv 和 xls。我在 mo 时遇到了 xls 问题（[在此处报告](https://github.com/goinnn/django-tables2-reports/issues/2)），但我确信很快就会出现解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-27T21:30:00.043

对于任何偶然发现这个问题的人，Django-tables2 有一个部分专门用于简单地使用`tablib`包以各种格式导出。（自 v1.8.0 起存在）

[https://django-tables2.readthedocs.io/en/latest/pages/export.html](https://django-tables2.readthedocs.io/en/latest/pages/export.html)

> ...
> 
> 现在，如果您将 _export=csv 附加到查询字符串，浏览器将下载一个包含您的数据的 csv 文件。支持的导出格式有：
> 
> csv、json、乳胶、ods、tsv、xls、xlsx、yml

# android - 支持安卓多屏

> ID：13063481
> 
> 赞同：3
> 
> 时间：2012-10-25T07:16:35.557
> 
> 标签：android

Android设备中的各种屏幕尺寸是多少。我有三种屏幕尺寸，分别是 320X480、420x00（Samsung Galaxy Player5.0）、600X1024（Samsung Galaxy Tab Sprint）。如何在所有设备中正确安装所有屏幕尺寸的项目/应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T07:04:29.610

在这里，我向您发送不同屏幕尺寸和密度的图像。它将对您有所帮助。![设备密度和尺寸](../Images/41e8bfe9bebb357fa80ff5debd017555.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T07:12:18.567

好的，所以您必须知道的是，support-screens 不会使您的应用程序在您支持的屏幕上看起来“不错”（查看此链接）。它只是告诉具有此类屏幕的用户将能够下载您的应用程序，但要使其正确显示则取决于您。您必须自己为特定屏幕创建布局。

有关它的更多信息，您可以在 Android 的文档中阅读：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

基本上，您必须正确命名存储布局文件的目录，以便让 Android 知道它应该为特定设备选择哪个目录。例如，如果您的布局文件是“layout.xml”，您应该：

```
 /res/layout/layout.xml         // Default layout
  /res/layout-small/layout.xml   // Small screens
  /res/layout-large/layout.xml   // Large screens
  /res/layout-xlarge/layout.xml  // Extra large screens 
```

您可以更进一步，通过在目录名称中指定另一个关键字来为纵向和横向视图制作不同的布局：

```
 /res/layout-small-land/layout.xml      // Small screens, landscape view
  /res/layout-small-portrait/layout.xml  // Small screens, portrait view 
```

请记住，标签顺序很重要，因此您不能编写 layout-portrait-small。

最后将此代码添加到您的 AndroidManifest 文件中：

```
 <supports-screens 
 android:resizeable="true"
 android:smallScreens="true" 
 android:largeScreens="true"
 android:xlargeScreens="true"  
 android:normalScreens="true" 
 android:anyDensity="true" 
```

/>

# android - java.lang.NoClassDefFoundError 尝试运行 tasks-android-sample

> ID：13063485
> 
> 赞同：2
> 
> 时间：2012-10-25T07:16:47.990
> 
> 标签：android, eclipse

我一直在尝试运行[http://samples.google-api-java-client.googlecode.com/hg/tasks-android-sample/instructions.html上提供的示例代码](http://samples.google-api-java-client.googlecode.com/hg/tasks-android-sample/instructions.html)

我已经包含了解决依赖关系所需的所有 jar 文件。我的项目不包含任何错误，但是当我尝试使用该程序时，它给了我以下错误：

> java.lang.NoClassDefFoundError: com.google.api.client.googleapis.auth.oauth2.GoogleCredential

我可以看到上面的类文件存在于我的参考库中，但代码仍然没有运行。试图从 2 天开始解决这个问题。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:20:06.260

我认为您应该将这些 jar 放在`/libs`项目根目录下命名的文件夹中。请参阅这个 SO 问题：[如何在 Android 项目中使用外部 JAR？](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:27:06.253

您是否将您的库包含在 java 构建路径中并在“订购和导出”选项卡中进行了检查？IE

Project > Properties > Java Build Path > Order and Export > 最后，勾选你导入的库。

# javascript - 有效地找到落在某个数字范围内的对象

> ID：13063489
> 
> 赞同：2
> 
> 时间：2012-10-25T07:16:57.807
> 
> 标签：javascript, algorithm, loops, time

这是我的基本问题：我得到了一个`currentTime`. 例如，750 秒。我还有一个包含 1000 到 2000 个对象的数组，每个对象都有一个`startTime`、`endTime`和一个`_id`属性。鉴于`currentTime`，我需要找到具有 a`startTime`并且`endTime`在该范围内的对象——例如`startTime : 740`, `endTime : 755`。

在 Javascript 中执行此操作的最有效方法是什么？

对于初学者，我只是在做这样的事情：

```
var arrayLength = array.length; 
var x = 0;
while (x < arrayLength) {
 if (currentTime >= array[x].startTime && currentTime <= array[x].endTime) {
  // then I've found my object
 }
x++;
}; 
```

但我怀疑循环不是这里的最佳选择。有什么建议么？

**编辑：为清楚起见，`currentTime`必须属于`startTime`and`endTime`**

**我的解决方案：**我的数据结构为我提供了一些好处，使我能够稍微简化一些事情。正如建议的那样，我已经完成了基本的二进制搜索，因为数组已经按 startTime 排序。我还没有完全测试过这个东西的速度，但我怀疑它会快一点，尤其是对于更大的阵列。

```
var binarySearch = function(array, currentTime) {

  var low = 0;
  var high = array.length - 1;
  var i; 

  while (low <= high) {
    i = Math.floor((low + high) / 2);

    if (array[i].startTime <= currentTime) {

      if (array[i].endTime >= currentTime ){
        // this is the one
        return array[i]._id; 

      } else {
        low = i + 1;
      }
    }

    else {
      high = i - 1;
    }
  } 

  return null;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:38:44.390

解决此问题的最佳方法取决于您必须调用搜索功能的次数。

如果你**只调用你的函数几次**，比如说`m`几次，去线性搜索。此函数调用的总体复杂度为`O(mn)`.

如果你**多次调用你的函数**，而且我的意思是*多次*`log(n)`，你应该：

*   排序你的数组`O(nlogn)`by `startTime`，然后`endTime`如果你有几个项目的值相等`startTime`
*   [进行二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)`startTime <= x`以查找带有的元素的范围。这意味着进行**两次**二进制搜索：一次用于`start`范围的，另一次用于`end`范围的。这是在`O(logn)`
*   在里面做线性搜索`[start, end]`。您必须进行线性搜索，因为 的顺序`startTimes`不会告诉您有关`endTimes`. 这可以介于`O(1)`和之间`O(n)`，这取决于您的细分市场分布和`x`.

**平均情况：** `O(nlogn)`用于初始化和`O(logn)`每次搜索。

**最坏情况：**包含许多相等段或具有公共区间的段的数组，并在此区间中搜索。在这种情况下，您将`O(nlogn)`进行初始化和`O(n + logn) = O(n)`搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:22:07.863

听起来像是[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T07:26:50.367

假设您的搜索数组是长期存在且相对恒定的，第一次迭代将按开始时间对所有数组元素进行排序（或者如果您不希望它们排序，则创建指向数组元素的排序开始时间的索引） .

然后，您可以有效地（使用二进制印章）打折那些开始得太晚的产品。然后对其他人进行顺序搜索会更快。

要获得*更高的*速度，请为开始时间和结束时间维护单独的排序索引。然后做前面提到的同样的操作，把那些开始太晚的都扔掉。

*然后，*对于剩下的，用结束时间索引把结束太早的都扔掉，剩下的就是你的候选名单。

但是，请确保这确实是*需要的。*两千个元素似乎不是一个巨大的数量，因此您应该为当前方法计时，并且仅在确实存在问题时才尝试优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T07:38:28.777

从给出的信息中，无法判断最佳解决方案是什么。如果数组没有排序，循环是单个查询的最佳方式。沿着数组的单次扫描只需要 O(N)（其中 N 是数组的长度），而对其进行排序然后进行二分查找需要 O(N log(N) + log(N))，因此它在这种情况下会花费更多时间。

如果您在同一个大数组上有大量不同的查询，则分析看起来会大不相同。如果您对同一个数组有大约 N 个查询，排序实际上可能会提高性能，因为每个查询将花费 O(log(N))。因此，对于 N 个查询，它将需要 O(N log(N))（剩余的 log(N) 现在被删除），而未排序的搜索也将需要 O(N^2)，这显然更大。排序何时开始产生影响也取决于数组的大小。

当您相当频繁地更新数组时，情况也有所不同。更新一个未排序的数组可以在 O(1) 摊销中完成，而更新一个排序的数组需要 O(N)。因此，如果您有相当频繁的更新排序可能会受到伤害。

范围查询也有一些非常有效的数据结构，但同样取决于实际使用情况是否有意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T07:40:50.767

如果数组未排序，则您的方法是正确的。

不要陷入先对数组排序，然后再应用搜索的思维陷阱。

使用您尝试的代码，您的复杂度为**O(n)**，其中**n**是元素的数量。

如果先对数组进行排序，则首先会陷入**O(n log(n))**的复杂度（与[排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)相比），在`average case`.

**然后你必须应用二进制搜索，它以O(log_ 2(n) - 1)**的平均复杂度执行。

*因此，在平均情况下*，您最终会花费：

**O(n log(n)** + **(log_2(n) - 1))**

而不仅仅是**O(n)**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T17:37:46.683

[区间树](http://en.wikipedia.org/wiki/Interval_tree)是一种数据结构，如果总共有 n 个区间，则允许在 O(lg n) 时间（平均和最坏情况）内回答此类查询。构造数据结构的预处理时间是O(n lg n)；空间是 O(n)。[增广](https://github.com/vvondra/Interval-Tree)区间树的插入和删除时间为 O(lg n) 。如果 m 个区间覆盖一个点，则回答所有区间查询的时间是 O(m + lg n)。 [维基百科](http://en.wikipedia.org/wiki/Interval_tree)描述了几种区间树；例如，居中的区间树是一棵三叉树，每个节点存储：

> • 一个中心点
> • 指向另一个节点的指针，该节点包含完全位于中心点左侧的所有区间
> • 指向另一个节点的指针，该节点包含完全位于中心点右侧的
> 所有区间 • 与中心点重叠的所有区间按其起点排序
> • 与中心点重叠的所有区间按其终点排序

请注意，对于找到一个区间来覆盖一个点的平均查询和最坏情况查询，区间树的复杂度为 O(lg n)。先前的答案具有相同的 O(n) 最坏情况查询性能。之前的几个答案声称他们有 O(lg n) 平均时间。但他们都没有提供证据；相反，他们只是断言平均性能是 O(lg n)。这些先前答案的主要特征是使用二进制搜索开始时间。然后有人说使用线性搜索，而另一些人说使用二分搜索，用于结束时间，但没有明确说明后一种搜索结束的间隔集。他们声称有 O(lg n) 的平均性能，但这只是一厢情愿。*[正如在标题Naive Approach](http://en.wikipedia.org/wiki/Interval_tree#Naive_approach)*下的维基百科文章中指出的那样，

> 一种天真的方法可能是构建两棵平行树，一棵按起点排序，一棵按每个区间的终点排序。这允许在 O(log n) 时间内丢弃每棵树的一半，但结果必须合并，需要 O(n) 时间。这给了我们 O(n + log n) = O(n) 的查询，这并不比暴力破解好。

# firefox - Firefox 使 dns 缓存无效

> ID：13063496
> 
> 赞同：55
> 
> 时间：2012-10-25T07:17:26.827
> 
> 标签：firefox, dns, browser-cache

我访问我在客户服务器上设置的站点太快了，Firefox 现在记得，默认站点（例如）

```
testsite.mycompanyname.com (non existing subdomain, same as *.mycompanyname.com) 
```

是

```
www.mycompanyname.dk - or rather the IP of the default server 
```

后来我设置了公共 DNS（a-record）以重定向到另一台服务器，但 Firefox 记住了默认 IP 地址。

Chrome/IE/Safari - 没问题，因为在 DNS 启动之前他们还没有访问过那个站点……

我在 about:config 中设置了这些：

```
network.dns.disablePrefetch = true
network.dnsCacheExpiration = 0 
```

还要别的吗？

我真的需要萤火虫来调试该站点上的前端....

干杯

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-07-20T01:25:18.987

DNS缓存发生在多个级别：应用程序询问本地系统，询问本地配置的解析DNS服务器，询问权威DNS服务器。

### 按应用程序缓存各不相同。

*   我发现 Firefox 可以退出并重新启动。中的相关设置`about:config`是`network.dnsCacheEntries`和`network.dnsCacheExpiration`，可以设置`0`为禁用缓存。

### 本地系统缓存通常为 1 小时。

*   诊断：ping 与其他应用程序一样，使用本地系统 DNS 缓存
*   Flush MacOsX 10.8：（`sudo killall -HUP mDNSResponder` [参考）](http://support.apple.com/kb/HT5343)
    （可能因其他版本而异）
*   刷新 Windows：（`ipconfig /flushdns`仅在`HKLM\SYSTEM\CurrentControlSet\Services\Dnscache`启用 DNS 缓存服务 、 时；使用`net start|findstr /i dns`或进行检查`compmgmt.msc`）
*   Linux/Unix 可以使用`nscd`（名称服务缓存守护进程），或者`dnsmasq`，或者两者都使用...

### 本地解析 DNS 服务器的缓存可能会运行数天，具体取决于与 DNS 记录关联的 TTL。

*   诊断：`nslookup`首先报告解析服务器的地址，然后是请求的地址。
*   冲洗 BIND：`rndc flush` *或* `rndc flushname DOMAIN.NAME`

**TTL**代表“生存时间”，该术语用于描述请求客户端或服务器认为 DNS 记录有效的时间。较短的 TTL 意味着请求者被告知不要将 DNS 查找缓存太久。TTL 的范围可以从几秒钟（例如对于 DynDNS 等）到几天或几周。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-18T09:11:22.563

我一直在使用“清除最近的历史记录\缓存”解决方案一段时间，但我注意到它在一次 Firefox 更新（可能是 20.0.1）后停止工作。因此，我已切换到[https://addons.mozilla.org/en-US/firefox/addon/dns-cache/](https://addons.mozilla.org/en-US/firefox/addon/dns-cache/)附加组件来进行 DNS 清除。我希望这会帮助有同样问题的人。

编辑：按照豪准的建议更改了网址。

Edit2：不幸的是，从 FireFox 32 开始，这个插件不再兼容并且无法使用。可能[https://addons.mozilla.org/en-US/firefox/addon/dns-flusher/](https://addons.mozilla.org/en-US/firefox/addon/dns-flusher/)可以替换它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-30T01:05:58.610

安装适用于我的插件 DNS Flusher。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-26T12:18:51.613

我发现`network.dnsCacheExpiration = 0`仅此一项并不能完全解决问题，但是如果您还设置`network.dnsCacheEntries = 0`了 DNS 缓存，则会永久禁用。所以：

```
network.dnsCacheEntries = 0
network.dnsCacheExpiration = 0 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-04-11T22:14:20.990

以下在某些时候有效的方法目前不起作用（*全部*都不起作用）：

*   重启浏览器
*   清除浏览器缓存
*   环境`network.dnsCacheExpiration=0`
*   `ipconfig /flushdns`

但是，您可以打开一个新的私人窗口，私人窗口显然不使用与常规窗口相同的 DNS 缓存（这令人欣慰）。

# mysql - Mysql多对多关系多重条件

> ID：13063497
> 
> 赞同：1
> 
> 时间：2012-10-25T07:17:26.917
> 
> 标签：mysql, sql, many-to-many

我有三个表，例如：

表

```
id(int)  name(varchar)  ref(int)
1        tissot         1234567
2        addidas        7654321
3        nike           8976543 
```

属性表

```
id(int)  name(varchar)
1        water_resistant
2        material_body
3        material_bracelet
4        watch_type 
```

property_material 表

```
watch_id  property_id   value
1              1          200
1              2         steel
1              3         leather
1              4         quartz
2              1          50
2              2         plastic
2              3         leather
2              4         quartz
3              1         100
3              2         steel
3              3         rubber
3              4        mechanical 
```

我想获得所有具有属性的手表，例如：

*   防水 >= 100
*   material_body = 钢或塑料
*   material_bracelet = 皮革或橡胶
*   watch_type = 石英。

请帮我创建查询。属性可以约为 100。理想情况下，我希望得到结果：

```
watch_id name    ref   water_res mat_body mat_bracelet watch_type
1        tissot  1234   200       steel    leather      quartz 
```

我正在尝试：

```
select 
 w.*, pm.value,pm.property_id 
from 
 watch w 
join 
  property_material pm 
 on w.id = pm.watch_id 
where 
  pm.pid in (1,2,3) 
and 
 pm.value in ('100','Steel','Leather'); 
```

但是此查询返回所有记录，例如，当值为 Steel 或 Leather 时，bur 我需要其中 material_body 是 Steel 而 material_bracelet 是 Leather。

**更新**：您对此查询有何看法？

```
select 
  name, ref 
from
  watch w
join
(SELECT w.id
  FROM watch w
  JOIN property_material pm on w.id = pm.watch_id
  WHERE (pm.property_id = 1 AND pm.value > 100)
   OR (pm.property_id = 2 AND pm.value IN ('steel','plastic'))
   OR (pm.property_id = 3 AND pm.value IN ('leather','rubber'))
   OR (pm.property_id = 4 AND pm.value = 'quartz')
  Group by w.id
  Having count(*) = 4) as t1
 on t1.id = w.id; 
```

**最后更新**：

```
select 
  w.name, 
  max(if(pm.property_id='1',pm.value,'')) water_resistant,
  max(if(pm.property_id='2',pm.value,'')) material_body,
  max(if(pm.property_id='3',pm.value,'')) material_bracelet,
  max(if(pm.property_id='4',pm.value,'')) watch_type
from
  watch w
join
(
    SELECT w.id
  FROM watch w
       JOIN property_material pm on w.id = pm.watch_id
  WHERE (pm.property_id = 1 AND pm.value > 100)
      OR (pm.property_id = 2 AND pm.value IN ('steel','plastic'))
      OR (pm.property_id = 3 AND pm.value IN ('leather','rubber'))
      OR (pm.property_id = 4 AND pm.value = 'quartz')
  Group by w.id
  Having count(*) = 4
  ) as t1 on t1.id = w.id
 join property_material pm on w.id = pm.watch_id
GROUP BY w.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:38:06.053

在这里，您有几个查询可以满足您的需求。但正如你所见，它们都是独立的。这就是为什么我在评论中问你到底需要什么。

如需更多测试，请使用您提供的示例数据使用此[**SQL Fiddle 示例代码。**](http://sqlfiddle.com/#!2/9587b/9)

**编辑**添加了新查询以在一组中包含所有条件和所有结果。在此处查看[**SQL Fiddle 示例代码**](http://sqlfiddle.com/#!2/9587b/17)。

```
SELECT w.name,ref,property_id,value 
  FROM watch w
  JOIN property p on w.id = p.id
  JOIN property_material pm on p.id = pm.property_id 
 WHERE (p.id = 1 AND pm.value > 100)
    OR (p.id = 2 AND pm.value IN ('steel','plastic'))
    OR (p.id = 3 AND pm.value IN ('leather','rubber'))
    OR (p.id = 4 AND pm.value = 'quartz'); 
```

独立查询：

```
SELECT w.name Watch_name, p.name Property_name, pm.value Property_value
  FROM watch w
  JOIN property_material pm ON w.id = pm.watch_id
  JOIN property p ON p.id = pm.property_id
 WHERE p.id = 1
   AND pm.value > 100;

WATCH_NAME  PROPERTY_NAME     PROPERTY_VALUE
tissot      water_resistant   200 
```

另一个：

```
SELECT w.name Watch_name, p.name Property_name, pm.value Property_value
  FROM watch w
  JOIN property_material pm ON w.id = pm.watch_id
  JOIN property p ON p.id = pm.property_id
 WHERE p.id = 2
   AND pm.value IN ('steel','plastic');

WATCH_NAME   PROPERTY_NAME   PROPERTY_VALUE
tissot      material_body      steel
addidas     material_body      plastic
nike        material_body      steel 
```

另一个：

```
SELECT w.name Watch_name, p.name Property_name, pm.value Property_value
  FROM watch w
  JOIN property_material pm ON w.id = pm.watch_id
  JOIN property p ON p.id = pm.property_id
 WHERE p.id = 3
   AND pm.value IN ('leather','rubber');

WATCH_NAME   PROPERTY_NAME      PROPERTY_VALUE
tissot      material_bracelet      leather
addidas     material_bracelet      leather
nike        material_bracelet      rubber 
```

另一个：

```
SELECT w.name Watch_name, p.name Property_name, pm.value Property_value
  FROM watch w
  JOIN property_material pm ON w.id = pm.watch_id
  JOIN property p ON p.id = pm.property_id
 WHERE p.id = 4
   AND pm.value = 'quartz';

WATCH_NAME   PROPERTY_NAME   PROPERTY_VALUE
tissot         watch_type       quartz
addidas        watch_type       quartz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:47:57.437

我知道的唯一可能性是为每个属性连接到属性表，就像这样（我修改了你给定的示例）：

```
select w.*, pm1.value,pm1.pid ,pm2.value,pm2.pid
    from watch w 
        join property_material pm1 on w.id = pm1.watch_id AND pm1.pid = 1 and pm1.value = '100'
        join property_material pm2 on w.id = pm2.watch_id AND pm2.pid = 2 and pm2.value IN ('Steel','Lather'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:38:06.727

```
select watch_table.id,watch_table.name,ref,property_id,value from watch_table join        property_table on watch_table.id=property_table.id
  join property_material on property_table.id=property_material.property_id 
 where WHERE property.id = 3 AND property_material.value IN ('leather','rubber'); 
```

# jquery - 压缩 jQuery 代码并使其更具动态性

> ID：13063501
> 
> 赞同：1
> 
> 时间：2012-10-25T07:17:35.323
> 
> 标签：jquery, dynamic

所以我有以下代码，它会影响 cookie 插件的一些页脚标签。现在我有点n00b，无法找到使代码更加动态的方法。现在我必须复制每个变量并为每个“退出”创建一个新变量。我想知道是否有可能使`if`声明更具活力？请注意，每个`#exit`都位于不同的子页面上，它们都链接到 main.js 文件。

链接： http: [//www.carlpapworth.com/htmlove/index.html](http://www.carlpapworth.com/htmlove/index.html)

jQuery代码：

```
$('#exit1').click(function(){
$('#collection1').css('color', '#ff63ff');
$.cookie('foundHeart1', 'found', {
    path: '/'
});
});

var foundHeart1 = $.cookie('foundHeart1');

if (foundHeart1 == 'found'){
    $('#collection1').addClass('found');
};

    $('#exit2').click(function(){
$('#collection2').css('color', '#ff63ff');
$.cookie('foundHeart2', 'found', {
    path: '/'
});
});

var foundHeart2 = $.cookie('foundHeart2');

if (foundHeart2 == 'found'){
    $('#collection2').addClass('found');
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:24:05.633

您可以通过将元数据添加到元素并为它们全部提供共享类而不是 id 来轻松完成此操作

因此，假设您的 current`#exit1`等`#exit2`是链接，给它们一个类`exit`并添加一些额外`data-*`的以供以后使用：

```
<a href="#" class="exit" data-key="1">Exit</a>
<a href="#" class="exit" data-key="2">Exit</a> 
```

然后你可以只使用 1 个处理程序来执行每个退出：

```
$('.exit').click(function(){
    var key = $(this).data('key');
    $('#collection' + key).css('color', '#ff63ff');
    $.cookie('foundHeart' + key, 'found', {
        path: '/'
    });
}); 
```

现在您可能有 2 个页面，所有页面都使用相同的退出按钮代码，但看起来您希望在每次页面加载时都检查它们，这样就足够了：

```
var maxCookie = 2; // or whatever your number of hearts is
for(var i=1;i<=maxCookie;i++){
   if($.cookie('foundHeart' + i) == 'found'){
       $('#collection' + i).addClass('found')
    }
} 
```

# matlab - 在 MATLAB 中取最大的连续矩阵块

> ID：13063502
> 
> 赞同：5
> 
> 时间：2012-10-25T07:17:39.007
> 
> 标签：matlab, matrix, vectorization

给定矩阵：

```
a =
   1   1   2   2
   1   1   2   2
   3   3   4   4
   3   3   4   4 
```

我想得到以下四个 2x2 矩阵：

```
a1 =
   1   1
   1   1

a2 =
   2   2
   2   2

a3 =
   3   3
   3   3

a4 =
   4   4
   4   4 
```

从那里，我想取每个矩阵的最大值，然后将结果重塑为 2x2 结果矩阵，如下所示：

```
r =
   1   2
   3   4 
```

结果最大值相对于它们在初始矩阵中的原始位置的位置很重要。

目前，我正在使用以下代码来完成此操作：

```
w = 2
S = zeros(size(A, 1)/w);
for i = 1:size(S)
  for j = 1:size(S)
    Window = A(i*w-1:i*w, j*w-1:j*w);
    S(i, j) = max(max(Window));
  end
end 
```

这可行，但似乎必须有一种不涉及迭代（矢量化）的方法。

我尝试像这样使用 reshape ： `reshape(max(max(reshape(A, w, w, []))), w, w, [])` 但是这需要错误值的最大值并返回：

```
ans =
   3   4
   3   4 
```

有没有什么方法可以在没有迭代的情况下完成此任务或以其他方式改进我的迭代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:56:41.860

**更新：**我不确定我是如何获得最多票的（截至 2012 年 10 月 28 日）。对于阅读本文的任何人，请参阅 angainor 或 Rody 的答案以获得不需要任何额外工具箱的更好解决方案。

到目前为止，这是每个答案的赛马（不包括 Nates - 抱歉，没有必要的工具箱）：

```
Z = 1000;

A = [1 1 2 2; 1 1 2 2; 3 3 4 4; 3 3 4 4];
w = 2;

%Method 1 (OP method)
tic
for z = 1:Z
S = zeros(size(A, 1)/w);
for i = 1:size(S)
  for j = 1:size(S)
    Window = A(i*w-1:i*w, j*w-1:j*w);
    S(i, j) = max(max(Window));
  end
end
end
toc

%Method 2 (My double loop with improved indexing)
tic
for z = 1:Z
wm = w - 1;
Soln2 = NaN(w, w);
for m = 1:w:size(A, 2)
    for n = 1:w:size(A, 1)
        Soln2((m+1)/2, (n+1)/2) = max(max(A(n:n+wm, m:m+wm)));
    end
end
Soln2 = Soln2';
end
toc

%Method 3 (My one line method)
tic
for z = 1:Z
Soln = cell2mat(cellfun(@max, cellfun(@max, mat2cell(A, [w w], [w w]), 'UniformOutput', false), 'UniformOutput', false));
end
toc

%Method 4 (Rody's method)
tic
for z = 1:Z
b = [A(1:2,:) A(3:4,:)];
reshape(max(reshape(b, 4,[])), 2,2);
end
toc 
```

速度测试（循环结束`z`）的结果是：

```
Elapsed time is 0.042246 seconds.
Elapsed time is 0.019071 seconds.
Elapsed time is 0.165239 seconds.
Elapsed time is 0.011743 seconds. 
```

讨厌！看来罗迪（+1）是赢家。:-)

**更新：**新加入的比赛 angainor (+1) 领先！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:54:15.370

另一种选择：比 cell2mat(cellfun...) 代码慢，但给出了中间步骤：

```
fun = @(block_struct) reshape((block_struct.data), [],1);
B = reshape(blockproc(A,[2 2],fun),2,2,[])
r=reshape(max(max(B)) ,2,[])

B(:,:,1) =

 1     1
 1     1

B(:,:,2) =

 3     3
 3     3

B(:,:,3) =

 2     2
 2     2

B(:,:,4) =

 4     4
 4     4

r =

 1     2
 3     4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T07:56:39.097

不是很通用，但它适用于`a`：

```
b = [a(1:2,:) a(3:4,:)];
reshape(max(reshape(b, 4,[])), 2,2).' 
```

这个的一般版本有点 *ahum* fuglier：

```
% window size
W = [2 2];

% number of blocks (rows, cols)
nW = size(a)./W;

% indices to first block
ids = bsxfun(@plus, (1:W(1)).', (0:W(2)-1)*size(a,1));

% indices to all blocks in first block-column
ids = bsxfun(@plus, ids(:), (0:nW(1)-1)*W(1));

% indices to all blocks
ids = reshape(bsxfun(@plus, ids(:), 0:nW(1)*prod(W):numel(a)-1), size(ids,1),[]);

% maxima
M = reshape(max(a(ids)), nW) 
```

它可以做得更优雅一点：

```
b = kron(reshape(1:prod(nW), nW), ones(W));    
C = arrayfun(@(x) find(b==x), 1:prod(nW), 'uni', false);    
M = reshape(max(a([C{:}])), nW) 
```

但我怀疑这会更快......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T08:35:43.213

我将加入另一个基于线性索引的非通用（尚未）解决方案的赛马

```
idx = [1 2 5 6; 3 4 7 8]';
splita = [A(idx) A(idx+8)];
reshape(max(splita), 2, 2); 
```

柯林斯代码得到的次数，我的方法最后：

```
Elapsed time is 0.039565 seconds.
Elapsed time is 0.021723 seconds.
Elapsed time is 0.168946 seconds.
Elapsed time is 0.011688 seconds.
Elapsed time is 0.006255 seconds. 
```

该`idx`数组可以很容易地推广到更大的窗口和系统大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T20:49:16.410

注意：Nate 的解决方案使用图像处理工具箱函数 |blockproc|。我会重写：

```
fun = @(x) max(max(x.data));
r = blockproc(A,[2 2],fun) 
```

比较不同计算机之间的时间是充满困难的，就像在几分之一秒内发生的事情一样。TIMEIT 在这里很有用：

[http://www.mathworks.com/matlabcentral/fileexchange/18798](http://www.mathworks.com/matlabcentral/fileexchange/18798)

但是在我的电脑上用 tic/toc 计时需要 0.008 秒。

干杯，布雷特

# android - android NDK 构建问题

> ID：13063508
> 
> 赞同：2
> 
> 时间：2012-10-25T07:17:54.653
> 
> 标签：android, android-ndk

当我尝试 NDK 构建命令时，这是我得到的错误

```
 D:\AndroidWorkSpace\cppTestProj>D:\android-ndk-r8b-windows\android-ndk-r8b\ndk-b
uild.cmd
Android NDK: WARNING: Unsupported source file extensions in jni/Android.mk for m
odule cppTestProj
Android NDK:   LOCAL_SRC_FILES :=
"Compile++ thumb : cppTestProj <= maintestapp.cpp
jni/maintestapp.cpp:1:19: fatal error: iostream: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs/cppTestProj/maintestapp.o] Error 1 
```

JNI 文件夹包含以下文件：

```
maintestapp.cpp
Test_array_type.cpp
Test_array_type.h 
```

你能告诉我这个问题吗？我没有使用 Cygwin。我是否缺少任何文件？

这是制作文件

```
 LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := cppTestProj
LOCAL_SRC_FILES := LOCAL_SRC_FILES := maintestapp.cpp \
                   Test_array_type.cpp

include $(BUILD_SHARED_LIBRARY) 
```

这是cpp文件

```
#include<iostream>
#include"Test_array_type.h"
#include<stdio.h>
#include<conio.h>
using namespace std;
int main()
{
    Test_array_type test_array;
    Test_array_type *ptest_array1;

    test_array.AddToList(10);
    test_array.AddToList(20);
    test_array.AddToList("Basha");
    test_array.PrintList();
    ptest_array1 = test_array.clonelist();
    test_array.DeleteFromList(3);
    test_array.AddToList(10);
    test_array.AddToList(20);
    test_array.AddToList(30);
    test_array.AddToList(40);
    test_array.AddToList(true);
    test_array.AddToList("Java Beon APP");
    test_array.PrintList();
    ptest_array1->PrintList();
    getch();
    return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:57:04.040

您不应从项目`jni`文件夹中运行“ndk-build”命令。在项目的根目录中执行`Android.mk`文件运行命令。`ndk-bild`

你`Android.mk`应该看起来像这样

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := cppTestProj
LOCAL_SRC_FILES := maintestapp.cpp \
                   Test_array_type.cpp

include $(BUILD_SHARED_LIBRARY) 
```

然后运行你的`ndk-build`命令

您可以查看此链接以获取示例[Android.mk](http://code.google.com/p/sipdroid/source/browse/trunk/jni/Android.mk)文件

**更新：**

```
static {
        System.loadLibrary("hello-jni");
    } 
```

有关更多信息，请参阅`HelloJni.java`示例项目的文件。

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T06:32:59.373

您需要添加`LOCAL_C_INCLUDES`并包含您的可视 C++ 包含文件夹，因为您显然正在使用它。

# neo4j - 使用 CSV 填充 Neo4j

> ID：13063511
> 
> 赞同：4
> 
> 时间：2012-10-25T07:18:37.273
> 
> 标签：neo4j

我对 Neo4j 很陌生。我是这个图形数据库的学习者。我需要将 csv 文件加载到 Neo4j 数据库中。我从 2 天开始尝试，我无法找到将 csv 文件读入 Neo4j 的好信息。请建议我将 csv 文件读入 Neo4j 的示例代码或博客。

示例：假设我有一个 csv 文件，这样我们如何将它读入 Neo4j

```
id  name    language
1   Victor Richards West Frisian
2   Virginia Shaw   Korean
3   Lois Simpson    Belarusian
4   Randy Bishop    Hiri Motu
5   Lori Mendoza    Tok Pisin 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:45:11.980

您可能想尝试[https://github.com/sroycode/neo4j-import](https://github.com/sroycode/neo4j-import)

这会直接从一对 CSV 文件中填充数据（条目必须用逗号分隔）

构建：（你需要Maven）

```
sh build.sh 
```

节点文件有一个必填字段 id 和您喜欢的任何其他字段

```
NODES.txt
id,name,language
1,Victor Richards,West Frisian
2,Virginia Shaw,Korean
3,Lois Simpson,Belarusian 
```

关系文件有 3 个必填字段 from,to,type。假设您有一个字段年龄（长整数）和信息，关系文件将如下所示

```
RELNS.txt
from,to,type,age@long,info
1,2,KNOWS,10,known each other from school
1,3,CLUBMATES,5,member of country club 
```

跑步：

```
sh run.sh graph.db NODES.txt RELNS.txt 
```

将在当前文件夹中创建 graph.db，您可以将其复制到 neo4j 数据文件夹中。

注意：如果您使用的 neo4j 是 1.6.* 之后的版本，请在 conf/neo4j.properties 中添加这一行

```
allow_store_upgrade = true 
```

玩得开心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T19:42:55.453

请看一下[https://github.com/jexp/batch-import](https://github.com/jexp/batch-import)

可以作为起点

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T12:10:16.773

由于源数据结构和目标数据结构不同，因此无法将 CSV 数据一般地加载到 Neo4j 中：CSV 数据是表格数据，而 Neo4j 保存图形数据。

为了实现这样的导入，您需要添加一个单独的步骤来将表格数据转换为某种形式的图形（例如树），然后才能将其加载到 Neo4j 中。进一步以树形结构为例，下面的页面展示了如何将 XML 数据转换为 Cypher，然后可以直接针对 Neo4j 实例执行。

[http://geoff.nigelsmall.net/xml2graph/](http://geoff.nigelsmall.net/xml2graph/)

如果有帮助，请随意使用此工具（请记住它只能处理小文件），但这当然需要您先将 CSV 转换为 XML。

干杯

奈杰尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:16:41.053

neo4j 可能没有已知的 CSV 导入器，您必须自己导入：

我通常自己通过 gremlin 的 g.loadGraphML(); 功能。 [http://docs.neo4j.org/chunked/snapshot/gremlin-plugin.html#rest-api-load-a-sample-graph](http://docs.neo4j.org/chunked/snapshot/gremlin-plugin.html#rest-api-load-a-sample-graph)

我用一些外部脚本将我的数据解析为 xml 语法并加载特定的 xml 文件。您可以在此处查看语法： [https](https://raw.github.com/tinkerpop/gremlin/master/data/graph-example-1.xml) : //raw.github.com/tinkerpop/gremlin/master/data/graph-example-1.xml 解析 100mb 文件需要几分钟时间。

在您的情况下，您需要做的是一个简单的二分图，其顶点由用户和语言组成，以及“说话”的边缘。如果您知道一些编程，那么使用参数**id**，**name** |创建**用户节点** 具有参数**名称**的唯一**语言节点**| 您需要将每个用户与特定语言联系起来的**关系。**请注意，用户可以是重复的，而语言不能。

 ******* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:10:59.517

我相信你的问题太笼统了。你的 csv 文件包含什么？csv 文件内容的逻辑含义可能会有很大差异。具有 ID 的两列示例，它们表示相互连接的实体。

```
3921 584
831 9891
3841 92
...

```

在这种情况下，您可以编写一个可以更快导入它的 BatchInserter 代码片段，请参阅[http://docs.neo4j.org/chunked/milestone/batchinsert.html](http://docs.neo4j.org/chunked/milestone/batchinsert.html)。

或者，您可以使用常规的 GraphDatabaseService 导入，事务大小为数千个插入以提高性能。[在http://docs.neo4j.org/chunked/milestone/tutorials-java-embedded.html](http://docs.neo4j.org/chunked/milestone/tutorials-java-embedded.html)了解如何设置和使用图形数据库。******

# wpf - MVVM - 设置具有 DataGrid 的 ControlTemplate 时出现 NullReferenceException

> ID：13063515
> 
> 赞同：0
> 
> 时间：2012-10-25T07:18:44.610
> 
> 标签：wpf, mvvm, datagrid, datatemplate

在我的一个视图中，我有一个 ContentControl 绑定到同一页面中定义为资源的 DataTemplate。在其中，通过设置在 dataTemplate 的触发器中声明的绑定属性，我在运行时使用不同的 controlTemplates（四个）填充了一个控件：

```
 <DataTemplate x:Key="DeviceSetupDataTemplate">
        <Control x:Name="theControl" Template="{DynamicResource BanknotesReaderControlTemplate}" />
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding DeviceSetup.ShowBanknotesReaderControlTemplate, Source={StaticResource Locator}}" Value="true" >
                <Setter TargetName="theControl" Property="Template" Value="{DynamicResource BanknotesReaderControlTemplate}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding DeviceSetup.ShowCoinsReaderControlTemplate, Source={StaticResource Locator}}" Value="true" >
                <Setter TargetName="theControl" Property="Template" Value="{DynamicResource CoinsReaderControlTemplate}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding DeviceSetup.ShowHoppersControlTemplate, Source={StaticResource Locator}}" Value="true" >
                <Setter TargetName="theControl" Property="Template" Value="{DynamicResource HoppersControlTemplate}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding DeviceSetup.ShowCoinsCashBoxControlTemplate, Source={StaticResource Locator}}" Value="true" >
                <Setter TargetName="theControl" Property="Template" Value="{DynamicResource CoinsCashBoxControlTemplate}" />
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate> 
```

...以及我的网格中的内容控件：

```
<ContentControl ContentTemplate="{DynamicResource DeviceSetupDataTemplate}" Margin="5" /> 
```

在我的两个 ControlTemplates 中，我有一个 DataGrid，绑定到我的自定义对象列表（这里有一个）：

```
 <ControlTemplate x:Key="BanknotesReaderControlTemplate" TargetType="{x:Type Control}">
        <Grid d:DesignWidth="772.02" d:DesignHeight="532.76" Margin="15,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.08*" />
                <RowDefinition Height="0.1*" />
                <RowDefinition Height="0.1*" />
                <RowDefinition Height="0.1*" />
                <RowDefinition Height="0.1*" />
                <RowDefinition Height="0.08*" />
                <RowDefinition Height="0.44*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="35*" />
                <ColumnDefinition Width="40*" />
                <ColumnDefinition Width="25*" />
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" >
                <Button Margin="0,3,10,3" Command="{Binding DeviceSetup.AddBanknoteType, Mode=OneWay, Source={StaticResource Locator}}" Content="{DynamicResource 442}" Width="85" Style="{DynamicResource DeviceSetupButtonStyle}" Height="Auto" Padding="2,1" />
                <Button Margin="0,3,10,3" Command="{Binding DeviceSetup.ChangeBanknoteType, Mode=OneWay, Source={StaticResource Locator}}" Content="{DynamicResource 444}" Width="85" Style="{DynamicResource DeviceSetupButtonStyle}" Padding="2,1" />
                <Button Margin="0,3" Command="{Binding DeviceSetup.DeleteBanknoteType, Mode=OneWay, Source={StaticResource Locator}}" Content="{DynamicResource 443}" Width="85" Style="{DynamicResource DeviceSetupButtonStyle}" Height="Auto" Padding="2,1" />
            </StackPanel>
            <DataGrid HorizontalAlignment="Stretch" VerticalAlignment="Top" HorizontalContentAlignment="Center" AutoGenerateColumns="False" ScrollViewer.VerticalScrollBarVisibility="Hidden" Grid.Row="6" Grid.ColumnSpan="3" Margin="0,5" 
                      ItemsSource="{Binding DeviceSetup.BanknotesDetails, Source={StaticResource Locator}}" SelectedItem="{Binding DeviceSetup.SelectedBanknoteDetails, Source={StaticResource Locator}}" >
                <DataGrid.Columns>
                    <DataGridCheckBoxColumn Binding="{Binding IsEnabled}" Width="5*" />
                    <DataGridTextColumn Binding="{Binding Value}" IsReadOnly="True" Header="{DynamicResource 445}" Width="20*" ElementStyle="{DynamicResource SmallSizedTextBlockBlackPlusMatic}" />
                    <DataGridTextColumn Binding="{Binding Currency}" IsReadOnly="True" Header="{DynamicResource 446}" Width="25*" ElementStyle="{DynamicResource SmallSizedTextBlockBlackPlusMatic}" />
                    <DataGridTextColumn Binding="{Binding MoneyCode}" IsReadOnly="True" Header="{DynamicResource 447}" Width="50*" ElementStyle="{DynamicResource SmallSizedTextBlockBlackPlusMatic}" />
                </DataGrid.Columns>    
            </DataGrid>
        </Grid>    
    </ControlTemplate> 
```

现在的问题是：在视图上，我有四个通过命令连接到 viewModel 的按钮，在其中我更改属性的 bool 值以更改控件模板的回调。有时，似乎是随机的，当我将布尔属性设置为 true 以显示数据网格内部的 controltemplate 时，我得到了 NullReferenceException。此外，在异常的堆栈跟踪中，我找到了对 DataGridCellItemAutomationPeer 的引用......我认为这可以作为一个很好的调查起点，但我真的不知道该怎么做。

提前谢谢你。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:46:05.033

成立！！

我真的不解释为什么，但是如果我在更改 DataTemplate 之前将 DataGrid 的 IsEnabled 属性设置为 false，我不会得到任何异常。

因此，我只是将绑定绑定到数据网格的 IsEnabled，并在更改为不同的 ControlTemplate 之前将属性设置为 false，然后在命令回调结束时设置为 true。

L.

# wpf - 如何在 DevExpress 中应用自定义主题？

> ID：13063521
> 
> 赞同：1
> 
> 时间：2012-10-25T07:19:19.493
> 
> 标签：wpf, devexpress

我已经使用 DevExpress 主题编辑器创建了一个自定义主题并构建了 dll 文件并将其包含在资源部分中。但是如何将它应用到应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T07:17:16.053

以下帮助主题提供了有关如何将自定义主题应用于 WPF 应用程序的分步说明： [如何：将新创建的主题应用于应用程序](http://documentation.devexpress.com/#WpfThemeEditor/CustomDocument10603)

相关文章：[WPF 主题编辑器](http://documentation.devexpress.com/#WpfThemeEditor/CustomDocument10429)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:44:16.613

试试这个：

```
public partial class MainWindow : Window 
{
    public MainWindow() 
    {
        Theme theme = new Theme("MyCustomTheme", "DevExpress.Xpf.Themes.MyCustomTheme.v12.1");
        theme.AssemblyName = "DevExpress.Xpf.Themes.MyCustomTheme.v12.1";
        Theme.RegisterTheme(theme);
        ThemeManager.SetTheme(this, theme);
        InitializeComponent();
    }
} 
```

不要忘记添加以下命名空间：

```
using DevExpress.Xpf.Core; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-02T10:19:12.990

要为整个应用程序设置默认主题，您可以使用以下行：

```
ApplicationThemeHelper.ApplicationThemeName = theme.Name; 
```

# iphone - 在 UITableViewController 中使用另一个 UITableView

> ID：13063522
> 
> 赞同：0
> 
> 时间：2012-10-25T07:19:21.890
> 
> 标签：iphone, ios6, uitableview

我有一个 UITableViewController，它有自己的 tableview。但我仍然想要另一个 UITableView，其数据源和委托在另一个类中。

症状是：**iPhone 4.0 无法显示 UITableView ，而 iPhone 6.0 Simulator 可以以可见且正确的方式显示此 UITableView 。**

NSLog 告诉我 UITableView 在 iPhone 上的高度是 0.0。

问题是：我将获得第二个 UITableView

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

和

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;`

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

没有任何反应...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:28:27.413

你可以试试这个。

为 UITableView 创建两个对象。

> numberOfRowsInSection 部分执行此操作

*   (NSInteger)tableView:(UITableView *)tblView numberOfRowsInSection:(NSInteger)section {

    如果（tableView == tblLog）返回 3；//或其他任何值返回2；}

> CELLFORROWATINDEX 部分执行此操作。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UILabel *headingLabel;
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
        cell.backgroundColor = [UIColor whiteColor]; 
    }

    if(tableView == tblLog)
    {
        switch (indexPath.row)
        { 
            case 0:
            {
                //do something

            } break;

            case 1:
            {
               //do something

            } break;
        }

    }
    else if (tableView == tblRange)
    {
        switch (indexPath.row)
        { 
            case 0:
            {
                //do something
            }break;

            case 1:
            {
                //do something
            }break;
        }
    }

    return cell;
} 
```

让我知道这是否有帮助

# jquery - 如何在 jquery-ui 自动完成中映射数据不起作用

> ID：13063527
> 
> 赞同：4
> 
> 时间：2012-10-25T07:19:37.217
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery-ui-autocomplete

我正在使用 jquery-ui 自动完成并在自动完成功能内进行 ajax 调用我正在调用返回 Json 的控制器操作，但建议未显示在下拉列表中

**Javascript**

```
 function log(message) {
            $("<div>").text(message).prependTo("#log");
            $("#log").scrollTop(0);
        }

        $("#search").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Home/GetCompanyNames",
                    dataType: "jsonp",
                    data: "searchterm=" + request.term,
                    success: function (data) {
                        response($.map(data, function (item) {
                            alert(item.Value);
                            return {
                                label: item.Name,
                                value: item.Name
                            };
                        }));
                    }
                });
            },
            minLength: 2,
            select: function (event, ui) {
                log(ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
            },
            open: function () {
                $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
            },
            close: function () {
                $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
            }
        });

    }); 
```

**控制器中的操作：**

```
 public JsonResult GetCompanyNames (string searchterm)
    {
        var companies = context.companyService.Query().Where(x => x.Name.Contains(searchterm)).ToList();
        var list = companies.Select(item => new SearchJsonModel
                                                {
                                                    LogoUrl = item.Logo != null || item.Logo != "" ? "<img  src='/Upload/" + item.Logo + "' />" : "<img src='/home/image?image=" + item.Name + "' />", Name = item.Name, Value = item.InternetName
                                                }).Select(model => (model)).ToList();
        return Json(list, JsonRequestBehavior.AllowGet);
    } 
```

**SearchJsonModel :**

```
 public class SearchJsonModel
{
    public string Name { get; set; }
    public string Value { get; set; }
    public string LogoUrl { get; set; }
} 
```

**这就是我在响应 ajax 调用时得到的（这是萤火虫的图像）**

![在此处输入图像描述](../Images/dc5697d99c23b8d5c0e8844ebddab991.png)

如果您需要更多详细信息，请询问我，并提前致谢。

**编辑**

现在我正在尝试在选择回调中访问选定的值，但它给出`Undefined`

```
select: function (event, ui) {
           alert(ui.item.Name);
                alert(ui.item.Value);
                alert(ui.item.LogoUrl);
        }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:37:38.170

您已经定义了您的`dataType`as`jsonp`但看起来您正在返回 standard `json`，请尝试更改您的`dataType`：

```
$("#search").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/Home/GetCompanyNames",
            dataType: "json",
            data: "searchterm=" + request.term,
            success: function (data) {
                response($.map(data, function (item) {
                    return {
                        label: item.Name,
                        value: item.Name
                    };
                }));
            }});
    },
    minLength: 2,
    select: function (event, ui) {
        log(ui.item ? "Selected: " + ui.item.label : "Nothing selected, input was " + this.value);
    },
    open: function () {
        $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
    },
    close: function () {
        $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:33:35.220

我不确定你的代码有什么问题，但也许你可以尝试另一种更简单的方法来完成自动完成？像

```
$(document).ready(function () {
    $(":input[dataautocomplete]").each(function () {
        $(this).autocomplete({
            source: $(this).attr("dataautocomplete"),
            minLength: 2,
            select: function (event, ui) {
                //do anything u need
                //get ur name  ui.item.Name
                //get ur URL   ui.item.LogoUrl
            }
        });
    });
}); 
```

html之类的

```
<input  class="ui-autocomplete-input" type="text" value="" name="post" dataautocomplete="@Url.RouteUrl("default", new { controller = "somecontroller", action = "someaction" })" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true" /> 
```

# zend-framework2 - 如何在 windows 上将 Zend 框架 2.0.0 升级到 2.0.3？

> ID：13063530
> 
> 赞同：0
> 
> 时间：2012-10-25T07:19:59.193
> 
> 标签：zend-framework2

我正在使用 zend 框架 2.0.0 并希望将其升级到新版本 ZF 2.0.3

有什么办法可以升级吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:16:58.557

从 Github 下载 2.0.3 版本并`vendor\zendframework`手动替换您的文件夹或`php composer.phar update`从项目根目录运行。

# ruby - 未初始化的常量 Twitter::Search (NameError) ~ Ruby noob

> ID：13063533
> 
> 赞同：2
> 
> 时间：2012-10-25T07:20:05.630
> 
> 标签：ruby, twitter, terminal

我正在尝试为我正在构建的 Twitter 机器人运行以下代码（如果这有助于我的事业，则不要向人们发送垃圾邮件），但我不断收到此错误消息：

```
uninitialized constant Twitter::Search (NameError) 
```

在编程方面，我完全是个菜鸟，尤其是 ruby​​。请有人帮忙！

```
require 'rubygems'
require 'twitter'

Twitter.configure do |config|
  config.consumer_key = "XXXXXXXXXXXXXXXXXXXXXX"
  config.consumer_secret = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
  config.oauth_token = "XXXXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
  config.oauth_token_secret = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
end

Twitter.user

  client = Twitter::Client.new
  search = Twitter::Search.new

  search.containing("news").containing("journalism").containing("newsrooms").result_type("recent").per_page(3).each do |x|
    until x.text.length <= 90 do
      y = x.text.chop!
    end
    y = "via: " + y
    client.update("#{y}")
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:48:02.397

我假设您使用的是最新版本的 twitter gem。

根据文档（[Twitter 文档](http://rdoc.info/gems/twitter)）， 似乎*没有* 通过该方法进行搜索（[此处的方法文档](http://rdoc.info/gems/twitter/Twitter/API#search-instance_method)）`Twitter::Search``Twitter::API.search`

# delphi - Delphi 上的大位图

> ID：13063535
> 
> 赞同：7
> 
> 时间：2012-10-25T07:20:06.837
> 
> 标签：delphi, graphics, bitmap

我想用代码创建大位图

```
 LargeBmp := TBitmap.Create;
  try
    LargeBmp.Width := 1000; // fine 
    LargeBmp.Height := 15000; // XP - EOutOfResources, Not enough memory, Win 7 - works fine
    ...
  finally
    FreeAndNil(LargeBmp);
  end; 
```

此代码在 Windows XP 上引发`EOutOfResources`异常并显示“内存不足”消息，但在 Windows 7 中运行良好。

怎么了？为什么*内存不够*？它只有 60 MB。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T08:03:01.467

像这样设置像素格式：

```
LargeBmp.PixelFormat := pf24Bit; 
```

我多次遇到同样的问题，并且总是解决它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T15:26:36.637

如前所述，如果您不设置像素格式，Windows 会将其视为与设备相关的位图。当您设置像素格式时，您将创建一个 DIB（与设备无关的位图）。这意味着它独立于显示设备（显卡）。

我遇到了同样的问题，并想指出 pf24bit 不是唯一的选择。在图形单元中，您还拥有：

```
TPixelFormat = (pfDevice, pf1bit, pf4bit, pf8bit, pf15bit, pf16bit, pf24bit, pf32bit, pfCustom); 
```

对于我正在处理的项目，我发现 8 位选项最适合我的需要，因为我有一个非常大的位图（高分辨率），但颜色有限（我是从一些简单的代码创建整个位图） .

因此，除了 pf24bit 之外，请尝试其他一些方法，以找到最适合您的生产环境的方法。我使用 pf8bit 选项节省了相当多的内存。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T08:49:55.283

创建的位图（默认情况下）存储在某个缓冲区中。该缓冲区的大小取决于视频驱动程序、操作系统，天知道还有什么。这个缓冲区可能非常小（大约 20-25mb），如果您尝试创建更多缓冲区，它将失败。

为避免这种情况，请尝试创建 DIB 而不是 TBitmap，或尝试更改`Pixelformat`为`pf24bit`. 这将告诉系统在用户内存而不是 GDI 缓冲区中创建位图。

现在，你问为什么它在win7中没有失败？好的，可能是因为没有 GDI，但是 GDI+ 和 Direct2D 在 win 7 中使用。也许其他驱动程序的版本，不知道。

# ckeditor - CK 编辑器 - 数据丢失

> ID：13063536
> 
> 赞同：0
> 
> 时间：2012-10-25T07:20:08.153
> 
> 标签：ckeditor, outsystems

我在使用 OutSystems 开发的应用程序中嵌入了 CKEditor。每当我在 CKEditor 中输入一些数据并按“确定”时，数据就会被保存，但是当我再次打开 CKEditor 进行编辑时，之前输入的数据会以某种方式被清除。

这违反了正常功能。用户不希望这种数据丢失。

有什么提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:39:26.680

我不认为 CKEditor 组件有这个错误，所以这听起来像是一个应用程序逻辑问题。

你确定你是：

1.  将绑定到 CKEditor 正在覆盖的输入的变量正确保存到屏幕提交操作内的持久位置（数据库、会话变量等）？
2.  在屏幕准备操作**中**加载具有**该**持久值的相同变量？（当你回来编辑时）

 **米格尔**

# mysql - MySQL 在索引的 TIMESTAMP 列上使用文件排序

> ID：13063540
> 
> 赞同：3
> 
> 时间：2012-10-25T07:20:22.753
> 
> 标签：mysql, timestamp, indexing

我有一个拒绝使用索引的表，它总是使用文件排序。

表格是：

```
创建表`文章`（
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Category_ID` int(11) 默认 NULL，
  `子类别` int(11) 默认为空，
  `CTimestamp` 时间戳 NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `Publish` tinyint(4) 默认为空，
  `Administrator_ID` int(11) 默认为 NULL，
  `位置` tinyint（4）默认'0'，
  主键（`ID`），
  KEY `Subcategory` (`Subcategory`,`Position`,`CTimestamp`,`Publish`),
  KEY `Category_ID` (`Category_ID`,`CTimestamp`,`Publish`),
  KEY `Position` (`Position`,`Category_ID`,`Publish`),
  KEY `CTimestamp` (`CTimestamp`),
  约束`article_ibfk_1`外键（`Category_ID`）参考`category`（`ID`）
) 引擎=InnoDB AUTO_INCREMENT=94290 默认字符集=utf8

```

查询是：

```
SELECT * FROM article ORDER BY `CTimestamp`;

```

解释是：

```
+----+-------------+---------+------+------------- --+------+----------+------+-------+--------------- -+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+---------+------+------------- --+------+----------+------+-------+--------------- -+
| 1 | 简单 | 文章 | 全部 | 空 | 空 | 空 | 空 | 63568 | 使用文件排序 |
+----+-------------+---------+------+------------- --+------+----------+------+-------+--------------- -+

```

当我删除“ORDER BY”时，一切正常。所有其他索引（子类别、位置等）在其他查询中运行良好。不幸的是，即使使用我的简单选择查询，也拒绝使用时间戳。我确定我在这里遗漏了一些重要的东西。

如何让 MySQL 使用时间戳索引？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:06:04.343

在这种情况下，MySQL 没有使用您的索引进行排序，这是一件好事。为什么？您的表仅包含 64k 行，平均行宽约为 26 字节（如果我添加了正确的列大小），因此磁盘上的总表大小应约为 2MB。只需将 2MB 的数据从磁盘读取到内存中（可能只需 1-2 次磁盘操作或查找）然后在内存中执行文件排序（可能是快速排序的变体），这非常便宜。

如果 MySQL 按索引顺序进行检索，它必须执行 64000 次磁盘查找操作，一条又一条记录！它会非常非常缓慢。

当您可以使用索引快速跳转到大文件中的已知位置并仅读取少量数据时，索引可能会很好，例如在 WHERE 子句中。但是，在这种情况下，这不是一个好主意——而且 MySQL 并不愚蠢！

如果您的表非常大（超过 RAM 大小），那么 MySQL 肯定会开始使用您的索引 - 这也是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:57:39.307

好吧，您总是可以提示索引。将您的查询更改为

```
SELECT * FROM article use index (CTimestamp); 
```

这会强制 MySQL 使用索引进行查询。解释：

```
1, 'SIMPLE', 'article', 'ALL', '', '', '', '', 1, 100.00, '' 
```

看不到文件排序，并且由于使用的索引是 CTimestamp，因此应相应地对结果进行排序。

或者，您可以保留您的 order by 子句，但强制使用索引：

```
SELECT * FROM article force index (CTimestamp) order by CTimestamp; 
```

不过，这个问题仍然很奇怪。您是否考虑将其发布到官方 MySQL 帮助论坛？

编辑：你似乎相处得[很好](https://forums.mysql.com/read.php?21,95413,95413)。
编辑：强制索引[似乎效果很好](http://blog.smaldone.com.ar/2008/12/29/is-mysql-a-toy-rdbms/)。

# ios - iOS 6 上的 UIWebView 和客户端证书

> ID：13063541
> 
> 赞同：8
> 
> 时间：2012-10-25T07:20:29.603
> 
> 标签：ios, ssl, uiwebview

我正在尝试通过 UIWebView 浏览安全网站（使用客户端证书）。我正在使用这个示例：[UIWebView iOS 中的客户端证书身份验证](https://stackoverflow.com/questions/9483472/client-certificate-authentication-in-uiwebview-ios/13062999#13062999)

它似乎不适用于 iOS 6。我设法处理了服务器信任，但 UIWebView 似乎忽略了客户端证书。即使我设法使用 ASIHTTPRequest 和身份连接到服务器。

UIWebViewDelegate 中引发以下错误：

```
webView didFailLoadWithError :-1206 The server “xxx.yyy” requires a client certificate.` 
```

我将标志`NSURLCredentialPersistenceForSession`用于`NSURLCredential`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T15:15:10.517

您提供的链接包含问题的正确解决方案。只需确保将客户端证书添加到应用程序包中（Build Phases->Copy Bundle Resources in Xcode）

# java - mongodb日期转换问题

> ID：13063545
> 
> 赞同：0
> 
> 时间：2012-10-25T07:20:35.173
> 
> 标签：java, mongodb, morphia

我在 java 中使用带有 morphia 的 mongoDB，我正在以日期格式保存一个值

保存前的值：Wed Mar 14 03:09:23 IST 2012
保存在 mongo 后：ISODate("2012-03-13T21:39:23Z")

Mongo在保存时添加了一些小时数，有没有办法保存这个值，因为它是日期格式

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:30:43.147

mongodb将datetime保存为“UTC DateTime”，可以参考以下链接。

[日期 - MongoDB](http://www.mongodb.org/display/DOCS/Dates)

要使用您存储的日期，只需将其转换为您的本地时间。你会得到原件。

# junit - 在 Eclipse 中并行运行 JUnit4-Tests

> ID：13063552
> 
> 赞同：10
> 
> 时间：2012-10-25T07:20:49.980
> 
> 标签：junit, parallel-processing, junit4

maven-surefire-plugin 支持并行运行 JUnit 测试[1] - 有没有办法在 Eclipse 中并行运行 JUnit-Tests？

[1] 例如

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12</version>
    <configuration>
        <parallel>methods</parallel>
    </configuration>
</plugin> 
```

“并行运行测试” [https://maven.apache.org/plugins/maven-surefire-plugin/examples/junit.html](https://maven.apache.org/plugins/maven-surefire-plugin/examples/junit.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T07:33:43.373

您可以使用[tempus-fugit](http://tempusfugitlibrary.org/documentation/junit/parallel/)在 Eclipse 中并行运行测试。这应该有效。

# c++ - 如何将一个类与其不同的实现分开

> ID：13063560
> 
> 赞同：2
> 
> 时间：2012-10-25T07:21:39.023
> 
> 标签：c++, design-patterns, architecture

我有一个具有显式类模板专业化和另一个部分类模板专业化的类模板。

```
template< typename T1, typename T2 >
class A{
    internal_representation1 inRep;
    // methods
};

template<>
class A < specific_type_1,specific_type_2 >{
     //internal represenation different for this type.
    internal_representation2 inRep;
    // methods
};

template< template T1 >
class A < T1,specific_type_2 >{
     //internal represenation different for this type.
    internal_representation3 inRep;
    // methods
}; 
```

专业化导致接口重复。类模板及其特化都具有相同的方法名称，但它们的实现不同。具体来说，它们的内部数据结构的表示。

我应该用桥接设计模式替换上述实现吗？

注意：这个问题与我们[如何使用 boost::mpl 实现构建器设计模式有关？](https://stackoverflow.com/questions/13025279/how-can-we-implement-the-builder-design-pattern-using-boostmpl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:32:43.810

您也可以使用[状态模式](http://en.wikipedia.org/wiki/State_pattern)（适用于不同的内部表示），但这取决于您在项目中需要什么。状态模式允许你使用同一个对象，但是如果你需要不同的对象，你也可以使用[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)。

# iphone - 从私有应用程序目录中提取图像，选择其中一些并将它们发送到下一个视图

> ID：13063561
> 
> 赞同：1
> 
> 时间：2012-10-25T07:21:45.680
> 
> 标签：iphone, ios5

我正在开发一个相机应用程序，无论我使用我的应用程序拍摄的照片，这些照片都应该存储在一个**私人应用程序目录**中。

如果我单击**第一个**视图中的按钮，它应该转到显示从我的**私有应用程序目录检索到的图像的****第二个**视图。

 **我应该能够在第二个视图中选择其中一些图像，如果我单击**下一步按钮**，所选图像应该显示在**第三个**视图中。

那么，首先，如何**创建一个私有目录**以及如何从该目录中**检索图像**？

以及如何**选择图像**并将它们发送到下一个视图？

另外，我应该能够在第三个视图中**更改**这些**选定图像的顺序**

只需**拖动它们**。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:06:56.723

首先，

如果您正在考虑创建一个用于存储图像并在其他应用程序中使用图像的应用程序，那么您选择了错误的路径。苹果不会允许你这样做。

您可以做的是将图像存储在应用程序提供的目录中。

对于目录，您可以遵循以下目录：

* * *

需要考虑三种可写路径 - 第一种是 Documents，您可以在其中存储要保留的内容并通过 iTunes 提供给用户（从 3.2 开始）：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

其次，与 Documents 目录非常相似，有 Library 文件夹，您可以在其中存储配置文件和您也想保留的可写数据库，但您不希望用户能够通过 iTunes 搞乱：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *libraryDirectory = [paths objectAtIndex:0]; 
```

请注意，即使用户无法使用 3.2 之前的设备（iPad）查看 iTunes 中的文件，但 NSLibraryDirectory 常量自 iPhoneOS 2.0 起就可用，因此可用于面向 3.0 的构建（如果您仍在使用，则甚至更早）那）。此外，除非您将应用程序标记为允许用户修改文档，否则用户将无法看到任何内容，因此，如果您今天使用 Documents，只要您在更新时更改位置以支持用户文档，就可以了。

最后有一个缓存目录，您可以在其中放置您不关心的图像是否长期存在（手机可能会在某个时候删除它们）：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachePath = [paths objectAtIndex:0];
BOOL isDir = NO;
NSError *error;
if (! [[NSFileManager defaultManager] fileExistsAtPath:cachePath isDirectory:&isDir] && isDir == NO) {
    [[NSFileManager defaultManager] createDirectoryAtPath:cachePath withIntermediateDirectories:NO attributes:nil error:&error];
} 
```

请注意，您必须在那里实际创建 Caches 目录，因此在编写时您必须每次都检查并创建！有点痛，但就是这样。

然后，当您有一个可写路径时，您只需在其上附加一个文件名，如下所示：

```
NSString *filePath =  [documentsDirectory stringByAppendingPathComponent:@"SomeDirectory/SomeFile.txt"]; 
```

或者

```
NSString *filePath =  [cachePath stringByAppendingPathComponent:@"SomeTmpFile.png"]; 
```

使用该路径进行阅读或写作。

请注意，您可以在上述任一示例字符串使用的任一可写路径中创建子目录（假设已创建一个）。

如果您尝试将图像写入照片库，则不能使用文件系统调用来执行此操作 - 相反，您必须在内存中有一个 UIImage，并使用 UIKit 定义的 UIImageWriteToSavedPhotosAlbum() 函数调用。您无法控制目标格式或压缩级别，也不能以这种方式附加任何 EXIF。

* * *

我希望它可以帮助您满足您的需求并了解目录。**

# jquery - jquery beforeunload 不显示消息

> ID：13063563
> 
> 赞同：0
> 
> 时间：2012-10-25T07:22:00.003
> 
> 标签：jquery, onbeforeunload

jsfiddle 位于[http://jsfiddle.net/whDm6/18/](http://jsfiddle.net/whDm6/18/)

如果我取消注释以下代码中的警报，更改表单值并刷新页面，它会显示警报。所以我知道代码正在执行到那时。但是，如果我将警报注释掉，它不会像我期望的那样显示 beforeunload 框。

我尝试使用 bind 并使用基本的 window.onbeforeunload = function() {} 而不将其与 Jquery 绑定，但这些都不起作用。

使用 Jquery 1.8.2

```
var currentUlValues = {};
currentUlValues['input1'] = "red";
currentUlValues['input2'] = "blue";
needToConfirm = true;

$(window).on('beforeunload', function(){
    if (needToConfirm) {
        $.each(currentUlValues, function(key, value) {
            var elem = $("#"+key).val();
            if (typeof elem !== 'undefined') {
                if (elem != currentUlValues[key]) {
                    //alert(elem + " - " + currentUlValues[key]);
                    return 'Are you sure you want to leave?';
                }
            }
        });
    }
}); 
```

HTML 表单

```
<form>
    <input id="input1" name="input1" type="text" value="red" />
    <input id="input2" name="input2" type="text" value="blue" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:35:11.853

您是从 的回调函数中返回的`.each`，它在错误的范围内，您应该返回它之外的字符串。

***[工作演示：](http://jsfiddle.net/whDm6/19/)***

```
$(window).on('beforeunload', function(){
    var is_return = false;
    if (needToConfirm) {
        $.each(currentUlValues, function(key, value) {
            var elem = $("#"+key).val();
            if (typeof elem !== 'undefined') {
                if (elem != currentUlValues[key]) {
                    is_return = true;
                    // here return false is to stop the iterate
                    return false;
                }
            }
        });
        if (is_return) {
            return 'Are you sure you want to leave?';
        }
    }
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:30:45.267

`return`是返回`$.each`匿名函数而不是`beforeunload`函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:30:46.120

在此处查看答案[对话框运行 1 秒然后消失？](https://stackoverflow.com/questions/6063522/jquery-beforeunload) 简短的说法：

> beforeunload 使用浏览器内置的方法，您需要返回一个字符串给它，浏览器会显示该字符串并询问用户是否要离开页面。
> 
> 您不能使用自己的对话框（或 jQueryUI 模式对话框）来覆盖 beforeunload。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T07:27:05.153

也许你应该使用

```
return confirm('Are you sure you want to leave?'); 
```

# bash - 将符号添加到文件中每个字符串的末尾

> ID：13063565
> 
> 赞同：0
> 
> 时间：2012-10-25T07:22:10.557
> 
> 标签：bash, text, awk

我有纯文本的txt文件。只有文本字符串，例如：

```
asdasd asd asd asd
asdasdasdasd asd a
asdasdasdasdasdasd 
```

我需要补充**；**每个字符串末尾的符号。我需要得到：

```
asdasd asd asd asd;
asdasdasdasd asd a;
asdasdasdasdasdasd; 
```

我怎样才能用 awk 或其他文本处理工具来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:24:37.120

```
sed 's/$/;/' file 
```

sed 用分号替换字符串的结尾。

如果需要 awk（根据 OP 的要求）：

```
awk '1' ORS=";\n" file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:25:12.707

*sed*是你的朋友。

```
sed -i "s/$/;/" filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:25:17.663

打开文件`vi`并发出此命令

```
:%s/$/;/g 
```

# c# - System.Reflection 中的 Binder 类有什么用？

> ID：13063572
> 
> 赞同：3
> 
> 时间：2012-10-25T07:22:42.060
> 
> 标签：c#, .net

我注意到有一个`Binder`类驻留在`System.Reflection`.NET 的命名空间中。我通读了 MSDN 上的文档，但我仍然不是很了解它的作用以及如何使用它。

我在 Google 上进行了搜索，但“绑定”一词暗指“数据绑定”。绑定是指“数据绑定”吗？如果是这样，那么我该如何使用它进行数据绑定呢？我希望找到一个简单或易于理解的例子来说明它的用法。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T07:30:48.550

`Binder`从候选列表中选择一个成员，并执行从实际参数类型到形式参数类型 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.binder.aspx) ) 的类型转换。

您还可以创建自己的活页夹。

[也从这个页面](http://www.techrepublic.com/article/getting-net-class-info-with-reflection/1050654)引用

> 一个`System.Reflection.Binder`对象，它控制诸如类型强制和适当的重载方法选择之类的事情。在大多数情况下，您将能够传递 null 并使用默认活页夹。

# entity-framework - 乐观并发异常由用户代码处理

> ID：13063576
> 
> 赞同：0
> 
> 时间：2012-10-25T07:23:05.070
> 
> 标签：entity-framework, c#-4.0, asp.net-mvc-4, objectstatemanager

我将 MVC4 与 Entity Framework 4.1 一起使用。

最初，我们从数据库创建了一个 Ado.net 实体模型。在 .edmx 文件中，数据库中的某些表不可见，因为它们不具有特定表的主键。

随着我们的项目向前推进，我们需要更新到其中一个没有主键字段的日志表。

因此，我们修改了 .edmx 文件，而不是在数据库中进行修改。我们的客户要求我们不要修改数据库字段。我们已经修改了 .edmx 并在表中的一个现有字段（比如`tbl_log`表）上创建了一个 pk。

我们正在尝试更新 tbl_log。但它给出了一条错误消息`Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.`

我在堆栈溢出中看到了很多问题，也搜索了一下，但找不到任何解决方案。

即使我尝试刷新 ObjectStateManager 条目，但它仍然指向相同的错误。

这是我的代码

```
 tbl_log log = new tbl_log();

                    Entity.ObjectStateManager.GetObjectStateEntries(System.Data.EntityState.Modified);

    log.LoginId = strLoginId;
    log.Password = strPassword;
    log.IPAddress = strIpAddress;
    log.Date_Time = DateTime.Parse(DateTime.Now.ToString());
    log.sessionId = new Guid(strSessionId);

    Entity.AddTotbl_log(log);

Entity.SaveChanges();// optimistic concurrency error 
```

请帮忙

谢谢，

卡尔提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:46:13.347

您的模型必须代表数据库模式。如果将 PK 添加到模型中，它也应该存在于数据库中，否则会出错。在任何表上都没有 PK 通常是不好的做法，即使该表是审计日志表也是如此。

异常告诉您的是对象跟踪器无法确定自上次调用数据库以来对象的状态是否已更改。这是因为即使在框架发送了插入/更新查询之后，您设置的 PK 仍然为 0。

不幸的是，没有解决这个问题的好方法。我建议（正如我认为微软所做的那样）为数据库中的每个表添加一个主键列。

**编辑 - 来自评论**

由于 PK 用于跟踪对象，因此如果您已将 PK 设置为在模型中具有身份的 StoreGenerationPattern，它将期望该值发生变化。当它没有改变时，它会抛出你看到的错误。尝试将 StoreGenerationPattern 更改为 None ，因为 EF 不会期望你的人造 PK 改变

# charts - Gnuplot x tic 标签重叠

> ID：13063578
> 
> 赞同：3
> 
> 时间：2012-10-25T07:23:15.847
> 
> 标签：charts, gnuplot

我正在从具有这种格式的数据文件中绘制 gnuplot 图表：

```
01 value_1_1 value_2_1
02 value_1_1 value_2_1
...
01 value_1_n value_2_n 
```

使用该命令：

```
plot "action.dat" using 2:xtic(1) with boxes ls 1 title "First title",\
     "action.dat" using 3:xtic(1) with boxes ls 2 title "Second title"; 
```

X tic 标签从第一列加载。当终端太小时，标签开始重叠。如果 x tic 标签与以前的标签重叠，我该如何隐藏它？或者，至少，我怎样才能只绘制第 n 个标签？

我试图做这样的事情

```
set xtics 10 rotate by -90 
```

但失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:28:15.370

要（有效地）绘制每个第 n 个标签，您可以使用以下内容：

```
plot "action.dat" using 2:xtic(int($0)%3==1 ? strcol(1):'') with boxes ls 1 title "First title" 
```

这实际上会绘制*每个*标签，但不是第 n 个标签的标签只会被绘制为空字符串......

# wpf - 在 TabControl 中更改“Tab”键而不是“Ctrl+Tab”键

> ID：13063580
> 
> 赞同：0
> 
> 时间：2012-10-25T07:23:16.640
> 
> 标签：wpf, wpf-controls, focus, tabcontrol, key-bindings

我想使用`Tab`键而不是标准来切换标签`Ctrl+Tab`

我的代码是

```
<TabControl>
      <TabItem Header="Section 1" Name="tabSection1">
          <ScrollViewer>
               <ContentPresenter Name="cntSection1" />
           </ScrollViewer>
      </TabItem>
      <TabItem Header="Section 2" Name="tabSection2">
          <ScrollViewer>
               <ContentPresenter Name="cntSection2" />
           </ScrollViewer>
      </TabItem>            
 </TabControl>

  <StackPanel>
     <Button Content="Save" Name="btnSave"  />
      <Button Content="Cancel" Name="btnCancel" IsCancel="True" />
   </StackPanel> 
```

我的每一个都`ContentPresenters`包含`UserControls`多个 UI 元素，例如`Textboxes`和`Checkboxes`.

到目前为止，我已经尝试了以下但没有运气。

```
 <TabControl.InputBindings>
            <KeyBinding Key="Tab" Modifiers="Control" Command="EditingCommands.TabForward" />
  </TabControl.InputBindings> 
```

和

```
 <TabControl KeyboardNavigation.TabNavigation="Continue" KeyboardNavigation.ControlTabNavigation="None"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T18:38:04.363

我实现了类似的东西，当标签中的最后一个文本框当前聚焦时，我希望 tab 键更改标签。我使用了以下附加行为：

```
using System;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;

namespace Core.Common
{
    public static class ChangeTabsBehavior
    {
        public static bool GetChangeTabs(DependencyObject obj)
        {
            return (bool)obj.GetValue(ChangeTabsBehaviorProperty);
        }

        public static void SetChangeTabs(DependencyObject obj, bool value)
        {
            obj.SetValue(ChangeTabsBehaviorProperty, value);
        }

        public static readonly DependencyProperty ChangeTabsBehaviorProperty =
            DependencyProperty.RegisterAttached("ChangeTabs",
                typeof(bool), typeof(ChangeTabsBehavior),
                new PropertyMetadata(false, OnChangeTabsChanged));

        private static void OnChangeTabsChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
            var textBox = (FrameworkElement) sender;

            var changeTabs = (bool) (e.NewValue);

            if (changeTabs)
                textBox.PreviewKeyDown += TextBoxOnPreviewKeyDown;
            else
                textBox.PreviewKeyDown -= TextBoxOnPreviewKeyDown;
        }

        private static void TextBoxOnPreviewKeyDown(object sender, KeyEventArgs keyEventArgs)
        {
            if (keyEventArgs.Key == Key.Tab)
            {
                var textBox = (FrameworkElement) sender;
                var tabControl = textBox.TryFindParent<TabControl>();

                if (tabControl.SelectedIndex == tabControl.Items.Count - 1)
                    tabControl.SelectedIndex = 0;
                else
                    tabControl.SelectedIndex++;

                keyEventArgs.Handled = true;
            }
        }
    }
} 
```

有关TryFindParent 方法，请参见[http://www.hardcodet.net/2008/02/find-wpf-parent](http://www.hardcodet.net/2008/02/find-wpf-parent)

然后在 XAML 中附加行为，如下所示：

```
<TextBox local:ChangeTabsBehavior.ChangeTabs="True"/> 
```

您应该能够根据自己的需要轻松修改它。

更多关于行为的信息：[http ://www.jayway.com/2013/03/20/behaviors-in-wpf-introduction/](http://www.jayway.com/2013/03/20/behaviors-in-wpf-introduction/)

# github - 将现有存储库添加到 git 到代理后面的不同分支的最佳方法

> ID：13063585
> 
> 赞同：1
> 
> 时间：2012-10-25T07:24:04.703
> 
> 标签：github, proxy, branch, production

有一个网站正在制作中。我想在 Git 中推送文件。

我认为客户端确实使用 ftp 将所有文件从他的计算机复制到服务器。
我认为他推送了他的 git perso 文件，因为我可以`.git`实时看到一个文件夹。

我在实时服务器上尝试了“ `git status`”，它返回一个文件列表。

我做了：

```
git remote show origin
->error: The requested URL returned error: 401 while accessing.... 
```

实时站点使用代理。

将当前直播网站推送到 Github 的最佳方式是什么？

我想在 github 中创建一个新分支，然后在服务器上，我想做：

```
$ git remote add origin http....
$ git push -u origin newbranch 
```

你认为有办法打破现场直播吗？
我有这个网站的副本，但我不想破坏当前的网站。

你有什么建议吗？
首先创建一个备份？然后做 Github 的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:56:06.973

破坏实时站点的一种方法是，如果您无意中进行了 git pull，一旦您设法将其推送到 GitHub！

另外，您需要使用代理才能访问 GitHub，这一切都在生产平台上。

我真的建议*在*生产服务器上除了*运行*网站所严格需要的东西之外什么都没有。
所以不是 git。

使用 rsynch/copy 机制在 prod 上发布，但在另一台机器上保留一个 git repo，可以轻松联系 Github，并从*那里*推送（不是从 prod）

# android - 是否可以在相对布局中将任何按钮或图像居中对齐？

> ID：13063587
> 
> 赞同：0
> 
> 时间：2012-10-25T07:24:07.260
> 
> 标签：android, android-relativelayout

这是显示我的`login`文本和`Not a Member?`文本相对于[Button](http://cubixshade.com/images/center_text.jpg)不在中心的图像。

我希望该文本位于相应按钮的中心？

这是相关的xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:android1="http://schemas.android.com/apk/res/android"
android:id="@+id/mainLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/white"
android:descendantFocusability="beforeDescendants"
android:focusableInTouchMode="true"
android1:gravity="end" >

<ImageView
    android1:id="@+id/imageView1"
     android:contentDescription="@string/empty"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignParentTop="true"
    android1:layout_centerHorizontal="true"
    android1:src="@drawable/topbar" />

<ImageView
    android1:id="@+id/imageView2"
     android:contentDescription="@string/empty"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_centerHorizontal="true"
    android1:layout_centerVertical="true"
    android1:src="@drawable/field_frame" />

<EditText
    android1:id="@+id/username"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignLeft="@+id/imageView2"
    android1:layout_alignTop="@+id/imageView2"
    android1:layout_marginLeft="10dp"
    android1:layout_marginTop="4dp"
    android1:background="#00000000"
    android1:ems="10"
    android1:height="40dp"
    android1:inputType="textEmailAddress"
    android1:minHeight="40dp"
    android1:text="@string/user_email_given"

    android1:windowSoftInputMode="stateVisible|adjustResize|adjustPan" >       
</EditText>

<EditText
    android1:id="@+id/password"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignLeft="@+id/username"
    android1:layout_alignRight="@+id/username"
    android1:layout_below="@+id/username"
    android1:layout_marginTop="8dp"
    android1:background="#00000000"
    android1:ems="10"
    android1:height="40dp"
    android1:inputType="textPassword"
    android1:minHeight="40dp"
    android1:text="@string/user_pass_given" >

    <requestFocus />
</EditText>

<ImageView
    android1:id="@+id/imageView3"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_above="@+id/imageView2"
    android1:layout_centerHorizontal="true"
    android1:layout_marginBottom="60dp"
    android:contentDescription="@string/empty"
    android1:src="@drawable/transbeacon_logo" />

<ImageView
    android1:id="@+id/imageView4"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_below="@+id/imageView2"
    android1:layout_centerHorizontal="true"
    android1:layout_marginTop="50dp"
    android1:contentDescription="@string/activityimg"
    android1:src="@drawable/button" />

<ImageView
    android1:id="@+id/imageView5"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignLeft="@+id/imageView4"
    android1:layout_below="@+id/imageView4"
    android1:layout_marginTop="5dp"
    android1:contentDescription="@string/activityimg"
    android1:src="@drawable/button" />

<TextView
    android1:id="@+id/TextView01"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignLeft="@+id/imageView5"
    android1:layout_alignTop="@+id/imageView5"
    android1:layout_marginLeft="75dp"
    android1:layout_marginTop="2dp"
    android1:text="@string/not_a_member"
     android:textStyle="bold"
     android1:textColor="#000000"
    android1:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android1:id="@+id/textView2"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignParentTop="true"
    android1:layout_centerHorizontal="true"
    android1:layout_marginTop="10dp"
    android1:text="@string/sign_in"
    android:textStyle="bold"
    android1:textAppearance="?android:attr/textAppearanceLarge"
    android1:textColor="#000000" />

<ImageView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android1:id="@+id/hori_line"
    android1:layout_width="fill_parent"
    android1:layout_height="wrap_content"
    android1:layout_alignParentBottom="true"
    android1:layout_alignParentLeft="true"
    android1:layout_marginBottom="38dp"
    android1:contentDescription="@string/empty"
    android1:paddingBottom="2dp"
    android1:paddingLeft="0dp"
    android1:paddingRight="0dp"
    android1:paddingTop="2dp"
    android1:scaleType="fitXY"
    android1:src="#b5b5b5" />

<ImageView
    android1:id="@+id/imageView6"
    android1:contentDescription="@string/empty"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignRight="@+id/imageView2"
    android1:layout_alignTop="@+id/hori_line"
    android1:layout_marginTop="12dp"
    android1:src="@drawable/help_icon" />

<ImageView
    android1:id="@+id/imageView7"
    android1:contentDescription="@string/empty"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignLeft="@+id/imageView2"
    android1:layout_alignTop="@+id/hori_line"
    android1:layout_marginTop="12dp"
    android1:src="@drawable/bottom_transbeacon" />

    <View
        android1:layout_width="1dip"
        android1:layout_height="40dp"
        android1:layout_alignRight="@+id/imageView5"
        android1:layout_alignTop="@+id/hori_line"
        android1:layout_marginTop="2dp"
        android1:background="#b5b5b5" />

    <TextView
        android1:id="@+id/textView1"
        android1:layout_width="wrap_content"
        android1:layout_height="wrap_content"
        android1:layout_alignLeft="@+id/imageView4"
        android1:layout_alignTop="@+id/imageView4"
        android1:text="@string/login"
        android1:textAppearance="?android:attr/textAppearanceMedium"
        android1:textColor="#000000"
        android1:textStyle="bold" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:28:04.847

您可以使用`ImageButton`而不是`ImageView`

您可以将图像添加为背景和文本以轻松居中`android`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T07:29:25.933

您可以使用 Button 而不是 ImageView 见下面的代码

```
<Button
         android:id="@+id/submitbutton"
            android:layout_width="80dp"
            android:layout_height="40dp"
            android:background="@drawable/button_medium2"
            android:text="Login" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:39:48.087

利用图像按钮并将重力设置为中心

```
<ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/YOURIMAGE"
        android:text="Login"
        android:gravity="center"/> 
```

# c# - 如何在 asp.net 中打印 UPS 运输服务的标签

> ID：13063590
> 
> 赞同：2
> 
> 时间：2012-10-25T07:24:18.793
> 
> 标签：c#, asp.net-mvc, c#-4.0

我正在尝试在我的网站上实施 UPS 运输服务，但我不知道如何使用他们的网络服务打印标签。
我正在开发我的`asp.net`项目`C#`。如果有人以前实现过，请给我一些示例代码，这对我来说真的很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T20:30:44.490

您可以简单地将用户指向一个页面，该页面仅包含运输标签和有关如何使用浏览器文件进行打印的说明 --> 打印

# regex - 如何在 Clojure 中使用正则表达式过滤目录列表

> ID：13063594
> 
> 赞同：3
> 
> 时间：2012-10-25T07:24:47.997
> 
> 标签：regex, clojure

给定一个正则表达式和一个目录路径，我如何获得路径与正则表达式匹配的文件序列？

即，我想要

```
(require '[clojure.java.io :as io])

(regex-file-seq #"\.ssh/.*\.pub$" (io/file "/home")) =>
(#<File /home/x/.ssh/iaf_dsa.pub> #<File ....>) 
```

这花了我几分钟把这些碎片拼凑起来，所以我想我会发布它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:26:32.460

```
(defn regex-file-seq
  "Lazily filter a directory based on a regex."
  [re dir]
  (filter #(re-find re (.getPath %)) (file-seq dir))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T08:44:08.373

[clj-glob](https://github.com/jkk/clj-glob)可以为您做到这一点：

```
(glob "*.{jpg,gif}") 
```

# tridion - 在 Tridion 中发布页面时出错？

> ID：13063595
> 
> 赞同：-4
> 
> 时间：2012-10-25T07:24:49.590
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在使用 Tridion 2011。问题是 - 每当我尝试发布页面时，它的发布都会失败。当我检查发布事务时，它显示发布在部署阶段失败。

谁能建议可能是什么问题以及如何纠正它？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:58:08.387

部署失败的原因可能有上百万个：

1.  数据库未连接
2.  数据库配置错误
3.  磁盘空间不足
4.  密码错误
5.  运行部署程序的用户无权写入文件系统

还有更多。

找出问题的最简单方法是查看部署程序提供的日志，您可能会在 cd_core_.log 或 cd_deployer_.log 中找到错误。检查 logback.xml 以了解这些文件的位置。

如果您可以从这些文件中获取错误并将其发布在此处，我们可能会为您提供更好的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T07:44:51.520

Try giving permissions to user -NetworkService on folder where the package is deployed. Also could you please specify the detailed error?

# c - 好的，作业：X[i] 怎么可能被解释为与 C 中的 i[X] 相同？

> ID：13063602
> 
> 赞同：0
> 
> 时间：2012-10-25T07:25:18.920
> 
> 标签：c, arrays, 32-bit

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

X[i] 怎么可能被解释为与 C 中的 i[X] 相同？

我认为问题是询问如何将 array[elementInArray] 解释为与 elementInArray[array] 相同

另外，在同一个作业上不相关：“解释为什么浮点格式的“隐藏位”不需要表示。” （就 32 位二进制字而言）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:27:04.593

在 C 中，X[i] = i[X] = *(X + i) = *(i + X)。根据交换性质，它们是相同的。

# vb.net - 从事件 y 运行事件 x

> ID：13063603
> 
> 赞同：0
> 
> 时间：2012-10-25T07:25:24.717
> 
> 标签：vb.net, visual-studio-2010, events

（新手 VB.NET 问题）

`winforms`这是我不完全理解的简单背后的特定代码：

```
Private Sub okButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles okButton.Click
    'do something
End Sub

Private Sub MainForm_Enter(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Enter
    okButton_Click(Me, e) '<=== argumanets must be wrong 
End Sub 
```

我想要实现的目标：如果用户`Enter`在他们有`winforms`活动时点击，那么我希望触发的`Click`事件处理程序`okButton`。

显然，从上面我对我需要提供给被`event`调用者的论点的理解`okButton_Click`是缺乏的；什么是正确的论点，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:20:35.067

我想你可能会使用[`AcceptButton`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)表单的属性。只需将其设置为所需的按钮，它就可以解决问题。请注意，还有一个[`CancelButton`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.cancelbutton.aspx)属性。

回答您的事件问题：`sender`参数标记事件的发送者。大多数情况下，这是`Me`类的实例。在我看来，`Me`似乎是绝对正确的。`e`参数包含`EventArgs`特定事件的。如果您没有在函数体中使用此参数，则此变量的内容无关紧要。您可以使用`Nothing`或只是路由`EventArgs`（这就是您所做的）。

参考您的评论： `EventArgs`是特定于事件的数据的基类。例如，如果您要订阅鼠标事件，`e`则将是[`MouseEventArgs`](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.mouseeventargs.aspx). 该类`MouseEventArg`为您提供已按下的鼠标按钮以及触发事件时指针的坐标。

在您的情况下，事件仅具有`EventArgs`仅提供有关事件的基本信息。似乎没有关于它的特殊信息。

注意：如果您想将多个事件组合到一个回调中，您可以使用`e`类型`EventArgs`，因为每个事件都`e`应该继承自`EventArgs`Microsoft 指南。因此，您可以将 Button-Click 与 Mouse-Move 组合成一个回调，因为委托的签名匹配。

比仅仅传递给目标 Sub 更好的方法`Nothing`是将两个回调合并为一个。您可以在 VB.NET 中使用多个`Handles`这样的方法来执行此操作：

```
Private Sub SomeSub(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles okButton.Click, MyBase.Enter
    'this is getting called on a okButton.Click and MyBase.Enter
End Sub 
```

（向右滚动查看手柄）

请注意，您不需要调用第一个 Sub 的第二个 Sub。一切都在一个潜艇中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:43:41.623

试试这个：

```
Protected Overrides Function ProcessCmdKey(ByRef msg As System.Windows.Forms.Message, keyData As System.Windows.Forms.Keys) As Boolean
    If (keyData And Keys.KeyCode) = Keys.Enter Then
        okButton.PerformClick()
        Return True
    End If
    Return MyBase.ProcessCmdKey(msg, keyData)
End Function 
```

如果要将回车键与其他控件一起使用，则可能需要在检查中排除某些控件，即：

```
If (keyData And Keys.KeyCode) = Keys.Enter AndAlso Not Textbox1.Focused Then 
```

# r - 在R中如何使Y轴值以百分比为单位

> ID：13063605
> 
> 赞同：0
> 
> 时间：2012-10-25T07:25:31.207
> 
> 标签：r

我正在绘制带有预测的时间序列图。我需要将 Y 轴值作为百分比。如何进行此操作。请明确说明。

```
val <- sqlQuery(dbhandle, 'select COUNT(*) from Admission where YEAR(YearOFRegistration)=2006 and YEAR(Admission)=2006); 
Ttl <- sqlQuery(dbhandle, 'select COUNT(*) from Admission where YEAR(YearOFRegistration)=2006');
 firstyr<-(val/Ttl)*100 
```

我每年计算的方式相同。

```
>  YrTimeSeries <- c(firstyrs,secyr,thirdyr,forthyr,fifthyr)
tsValue<-ts(YrTimeSeries,frequency=1,start=2006)
library(forecast)
plot(forecast(tsValue,h=5)) 
```

**预测值为**

```
Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
2011        86.9993 72.19680 101.8018 64.36083 109.6378
2012        86.9993 66.06645 107.9321 54.98528 119.0133
2013        86.9993 61.36233 112.6363 47.79094 126.2077
2014        86.9993 57.39653 116.6021 41.72576 132.2728
2015        86.9993 53.90256 120.0960 36.38220 137.6164 
```

我正在做未来6年的预测。我已经包含了 2006 年到 2010 年的数据并以百分比计算。我担心的是我想以接受addmision的儿童百分比来预测值。请详细说明我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:39:21.800

只需重新定义您的 Y 变量

```
x = sort(rnorm(100))
y = x * 2 + rnorm(100)
plot(x,y, type='b') # plain data
plot(x,y/max(y)*100, type='b') # Y-axis in percentage 
```

# javascript - 角落问题的 D3.js 图像

> ID：13063607
> 
> 赞同：3
> 
> 时间：2012-10-25T07:25:38.600
> 
> 标签：javascript, d3.js, force-layout

您好我正在尝试实施这个 D3 项目[http://bl.ocks.org/929623](http://bl.ocks.org/929623)：

![在此处输入图像描述](../Images/d6c9a75edfe58c97e88ba9822a3dd552.png)

像这样的图像[http://bl.ocks.org/950642](http://bl.ocks.org/950642)：

![在此处输入图像描述](../Images/8c3bc17177940d952797a0764d68b673.png)

但我无法使源图像调整大小并与节点一起移动。继承人的代码：

```
var nodesCreated = 1;
var newDistance = 100;
var width =  document.documentElement.clientWidth,
    height = document.documentElement.clientHeight,
    fill = d3.scale.category20(),
    nodes = [],
    links = [];

var vis = d3.select("#chart").append("svg")
    .attr("width", width)
    .attr("height", height);

vis.append("rect")
    .attr("width", width)
    .attr("height", height);

var force = d3.layout.force()
    .linkDistance(newDistance)
    .nodes(nodes)
    .links(links)
    .gravity(.01)
    .size([width, height]);

force.on("tick", function() {
vis.selectAll("line.link")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

vis.selectAll(".node")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });

});

var tempX = window.innerWidth/2;
var tempY = window.innerHeight/2;
var point = tempX,tempY,
node = {imgsrc: "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn1/48799_806120304_700633127_n.jpg"};
n = nodes.push(node);

vis.on("mousedown", function() {
      var point = d3.mouse(this),
      node = {imgsrc: "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/211698_100002756979859_374256176_n.jpg"},
      n = nodes.push(node);
      nodesCreated++;
      console.log(nodesCreated);
      var tempCounter = 0;

      newDistance == 10;
      force.linkDistance(newDistance);
      nodes.forEach(function(target) {
          if (/*Math.sqrt(x * x + y * y) < 100 ||*/ tempCounter == 0) {
              links.push({source: node, target: target});
              tempCounter++;
          }
      });

  restart();
});

function restart() {
  force.start();

  vis.selectAll("line.link")
      .data(links)
    .enter().insert("line", ".node")
      .attr("class", "link");

var realNode = vis.selectAll(".node")
      .data(nodes)
      .enter().append("g")
      .attr("class", "node")
      .call(force.drag);

      realNode.append("image")
      .attr("xlink:href", function(d) { return d.imgsrc; })
      .attr("x", -8)
      .attr("y", -8)
      .attr("width", 160)
      .attr("height", 160);

} 
```

我一直在谷歌寻求帮助，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:27:25.540

您应该将 X 和 Y 坐标添加到您的节点：

```
var tempX = window.innerWidth/2;
var tempY = window.innerHeight/2;
var point = [tempX,tempY],
    node = {imgsrc: "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn1/48799_806120304_700633127_n.jpg", x: tempX, y: tempY}; 
```

和

```
 var point = d3.mouse(this),
      node = {imgsrc: "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/211698_100002756979859_374256176_n.jpg", x:point[0], y:point[1]},
      n = nodes.push(node); 
```

然后需要给`force.on("tick"....`函数添加一个变换：

```
 vis.selectAll(".node")
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ") scale(0.30)"; }); 
```

这会将您的图像缩小到 30%，但您可以对其进行配置。

为了完整起见，这里是所有代码：

```
var nodesCreated = 1;
var newDistance = 100;
var width =  document.documentElement.clientWidth,
    height = document.documentElement.clientHeight,
    fill = d3.scale.category20(),
    nodes = [],
    links = [];

var vis = d3.select("#chart").append("svg")
    .attr("width", width)
    .attr("height", height);

vis.append("rect")
    .attr("width", width)
    .attr("height", height);

var force = d3.layout.force()
    .linkDistance(newDistance)
    .nodes(nodes)
    .links(links)
    .gravity(.01)
    .size([width, height]);

force.on("tick", function() {
vis.selectAll("line.link")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

 vis.selectAll(".node")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });

 vis.selectAll(".node")
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ") scale(0.30)"; });

});

    var tempX = window.innerWidth/2;
    var tempY = window.innerHeight/2;
    var point = [tempX,tempY],
        node = {imgsrc: "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn1/48799_806120304_700633127_n.jpg", x: tempX, y:tempY};
    n = nodes.push(node);

vis.on("mousedown", function() {
  var point = d3.mouse(this),
      node = {imgsrc: "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/211698_100002756979859_374256176_n.jpg", x:point[0], y:point[1]},
      n = nodes.push(node);
      nodesCreated++;
      console.log(nodesCreated);
      var tempCounter = 0;

  newDistance == 10;
  force.linkDistance(newDistance);
  nodes.forEach(function(target) {
    if (/*Math.sqrt(x * x + y * y) < 100 ||*/ tempCounter == 0) {
      links.push({source: node, target: target});
      tempCounter++;
    }
  });

  restart();
});

function restart() {
  force.start();

  vis.selectAll("line.link")
      .data(links)
    .enter().insert("line", ".node")
      .attr("class", "link");

var realNode = vis.selectAll(".node")
      .data(nodes)
      .enter().append("g")
      .attr("class", "node")
      .call(force.drag);

      realNode.append("image")
      .attr("xlink:href", function(d) { return d.imgsrc; })
      .attr("x", -8)
      .attr("y", -8)
      .attr("width", 160)
      .attr("height", 160);

}​ 
```

# wordpress - WordPress 获取所有类别的帖子

> ID：13063608
> 
> 赞同：0
> 
> 时间：2012-10-25T07:25:41.897
> 
> 标签：wordpress

我已经成功开发了 WordPress 网站，但我对按类别获取所有帖子有疑问。我的代码是这样的

```
new WP_Query("cat=54,71,72&order=ASC"); 
```

默认获取第一个类别 id 和 Post。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:12:32.527

您也可以使用此代码，只需要更改帖子数量，就像现在，下面列出的代码仅用于显示 5 个帖子，因此您必须更改此限制。

```
<?php query_posts('showposts=5'); ?>
<ul>
<?php while (have_posts()) : the_post(); ?>
<li><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></li>
<?php the_content();?>
<?php endwhile;?>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:46:46.477

如果您想获取所有类别而不是选定的几个类别，则无需按类别查询。

```
new WP_Query("order=ASC"); 
```

如果你想查询一个特定的分类，但是你不确定分类ID号是多少，可以通过分类slug查询

```
new WP_Query("category_name=your-category-slug&order=ASC"); 
```

# c - 内存泄漏（免费功能不起作用）

> ID：13063614
> 
> 赞同：0
> 
> 时间：2012-10-25T07:26:14.810
> 
> 标签：c, memory-leaks, pthreads, malloc, free

我面临以下代码的内存泄漏问题

```
static char **edits1(char *word)
{
    int next_idx;
    char **array = malloc(edits1_rows(word) * sizeof (char *));
    if (!array)
        return NULL;

    next_idx = deletion(word, array, 0);
    next_idx += transposition(word, array, next_idx);
    next_idx += alteration(word, array, next_idx);
    insertion(word, array, next_idx);

    return array;
}

static void array_cleanup(char **array, int rows) {

        int i;

        for (i = 0; i < rows; i++)
            free(array[i]);
}

static char *correct(char *word,int *count) {

        char **e1, **e2, *e1_word, *e2_word, *res_word = word;
        int e1_rows, e2_rows,max_size;

        e1_rows = edits1_rows(word);
        if (e1_rows) {
            e1 = edits1(word);
        *count=(*count)*300;
            e1_word = max(e1, e1_rows,*count);

            if (e1_word) {

                array_cleanup(e1, e1_rows);
                        free(e1);
                return e1_word;

            }
        }

    *count=(*count)/300;

    if((*count>5000)||(strlen(word)<=4))
        return res_word;

        e2 = known_edits2(e1, e1_rows, &e2_rows);
        if (e2_rows) {
        *count=(*count)*3000;
            e2_word = max(e2, e2_rows,*count);
            if (e2_word)
                    res_word = e2_word;
        }

        array_cleanup(e1, e1_rows);
        array_cleanup(e2, e2_rows);

        free(e1);
        free(e2);
        return res_word;
} 
```

我不知道为什么`free()`不工作。我在线程中调用这个函数“正确”，多个线程同时运行。我使用的是 Ubuntu OS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:59:04.150

您不会显示分配实际数组的位置，而只是显示分配指针数组的位置。因此，您很可能在未显示的代码中的其他地方存在泄漏。

此外，array_cleanup 会泄漏，因为它只会删除那些您没有显示分配位置的数组。它不会删除指针数组本身。该函数的最后一行应该是`free(array);`.

您的主要问题是您使用的是模糊的分配算法。相反，[分配真正的动态二维数组](https://stackoverflow.com/questions/12462615/how-do-i-correctly-set-up-access-and-free-a-multidimensional-array-in-c)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:08:05.583

根据在评论中挖掘更多信息来回答。

大多数 malloc 实现通常不会将内存返回给操作系统，而是保留它以供将来调用 malloc。这样做是因为将内存返回给操作系统会对性能产生很大影响。

此外，如果您有某些分配模式，那么 malloc 保留的内存可能不容易被以后调用 malloc 重用。这称为内存碎片，是设计内存分配器的一大研究课题。

无论 htop/top/ps 报告什么，都不是您当前在程序中使用 malloc 分配了多少内存，而是所有库所做的所有各种分配、它们的储备等等，这可能比您分配的要多得多。

如果您想准确评估泄漏了多少内存，则需要使用 valgrind 之类的工具，或者查看您使用的 malloc 是否有诊断工具来帮助您。

# php - 会话变量在 OpenCart 1.5.3.1 (PHP) 中过于持久

> ID：13063617
> 
> 赞同：1
> 
> 时间：2012-10-25T07:26:25.063
> 
> 标签：php, opencart

我正在使用一个名为 FB JS Connect 的模块（一个免费扩展，我现在似乎无法在 Extensions 中找到它。）它所做的只是允许用户使用他们的 Facebook ID 登录。

它工作得很好，并使用 FB API。

问题是，用户使用 FB Connect 按钮登录 OC，执行操作，然后注销。另一个用户登录（不使用 FB Connect 按钮），之前用户的 FB 信息仍在 $_SESSION 中！

下面列出了 $_SESSION 中持续存在的 4 个变量，直到新的 FB 用户登录：

*   fb__state
*   fb__user_id
*   fb__code
*   fb__access_token

我不敢在没有专家建议的情况下在代码中乱搞来“修复”这个问题，因为它可能会破坏很多东西。

我想我需要手动清除它。

我尝试将以下内容放在 index.php 中，似乎 $session = new Session(); 用户登录时多次调用 index.php 中的内容。

```
// Session
$session = new Session();

unset($session->data['fb_<FBAppId>_state']);
unset($session->data['fb_<FBAppId>_code']);
unset($session->data['fb_<FBAppId>_user_id']);
unset($session->data['fb_<FBAppId>_access_token']);

$registry->set('session', $session); 
```

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:19:59.613

将上面的“未设置”代码放入 logout.php 中，这将修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T00:08:24.977

我也遇到了这个特定扩展的问题，并且在 OC 扩展存储库中也找不到它了。我的建议是使用另一个扩展：[http ://www.opencart.com/index.php?route=extension/extension/info&extension_id=3333](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3333)

# c++ - Visual Studio 2012 编译时间

> ID：13063620
> 
> 赞同：0
> 
> 时间：2012-10-25T07:26:46.177
> 
> 标签：c++, time, compilation, visual-studio-2012

> **可能重复：**
> [为什么 C++ 编译需要这么长时间？](https://stackoverflow.com/questions/318398/why-does-c-compilation-take-so-long)
> [Visual Studio 2012 编译时间慢](https://stackoverflow.com/questions/13057396/visual-studio-2012-slow-compile-time)

我正在使用visual studio 2012，编译时间很长。仅仅 50 行代码大约需要 20 秒。我认为这是我的计算机故障，但 c# 在它上面编译得很好，而不是 c++。我知道 C++ 需要更长的时间来编译，但 20 秒是荒谬的。

这是我正在尝试编译的代码，编译大约需要 20 秒。

```
#include<iostream>
using namespace std;

class Entity
{
protected: 
    int health; 
public: 
    void SetHealth(int value)
    {
        health = value;
    }

    void DisplayHealth()
    {
        cout << "Entity: " << health << endl;
    }
};

class Player : public Entity
{
private:
    int xp;
public: 
    void DisplayHealth()
    {
        cout << "Player: " << health << endl;
    }
};

class Enemy : public Entity
{

};

int main()
{
    Player player; 

    Entity *entity = &player;

    entity->SetHealth(10); 
    player.DisplayHealth();

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:51:17.987

我在我安装的 VS2012 下编译了这段代码，用这个唯一的文件构建一个项目大约需要 3 秒。可能是您在安装 VS2012 时遇到了问题。尝试在[安全模式下](http://msdn.microsoft.com/en-us/library/ms241278%28v=vs.110%29.aspx)运行它以禁用扩展。

# jquery - 将 DIV 拆分为多个部分

> ID：13063628
> 
> 赞同：0
> 
> 时间：2012-10-25T07:27:13.753
> 
> 标签：jquery, jquery-ui

有谁知道可以满足以下要求的jQuery插件：

我在屏幕上有一个 DIV 和一个按钮。当我单击按钮时，DIV 分成 2（我们将它们称为 A 和 B）。再次单击该按钮会将父 DIV 拆分为 3（所以现在我们有 A、B 和 C）。

到目前为止一切都很好，但是......

再次点击按钮，A一分为二，再次点击按钮，B一分为二，再次点击按钮，C一分为二。

如您所见，单击 3 次按钮，我最终会将主 DIV 拆分为 1/3。

单击该按钮 4 次将导致主 DIV 包含 2 1/3 大小的 DIV 和 2 1/6 大小的 DIV。

我确定我在某处看到过类似的东西，但我一生都记不起它在哪里。

如果有人有任何提示或知道类似的插件，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:42:33.953

让我为你编写一个原型：

```
<div class="wrap">
    <a class="large button blue" id="split">Split!</a>
    <hr>
    <div class="inner">
        Test
    </div> 
</div> 
```

* * *

```
$('#split').click(function() {

    width = parseInt($('.wrap').css('width'))-20;
    $('.wrap').append($('.wrap  .inner').first().clone());
    nDivs = $('.wrap .inner').size();
    $('.wrap  .inner').css('width', width/nDivs);

}); 
```

您可以尝试调整边距等：http: [//jsfiddle.net/mKuVm/4/](http://jsfiddle.net/mKuVm/4/)

# php - 处理从 Web 服务返回到数据库的大数据块

> ID：13063633
> 
> 赞同：1
> 
> 时间：2012-10-25T07:27:49.680
> 
> 标签：php, mysql, soap

当 Web 服务返回的数据变大时，我无法处理它。我为此目的使用 NuSOAP PHP 库，当服务返回的数据很小时，一切顺利，但当它变大时，我会遇到内部服务器错误 500。

我所做的只是使用 NuSOAP 来检索数据，这些数据本身将结果解析为一个数组，然后我迭代这个数组以将数据导入本地 DDBB。没有什么花哨。它可以获得的结果越大，结果为 1000 个，因为服务中有一个分页选项参数，该参数将限制为每次调用时的结果....但是在大约 800 条记录之后，我遇到了错误。

我试图增加初始化集中的内存并增加执行时间限制，但没有成功。

我的猜测是问题在于数据的频率与 php 解析数据的频率不同。解决方案？也许缓冲区在这种情况下可以正常工作，但不确定如何在 PHP 中实现这一点。有什么想法吗？

这是代码：

```
$client = new nusoap_client($WSDL);
do {
    $data = $client->call($serviceName, array('GetValuesFrom' => $getValuesFrom,'PW'            => $pw, 'StartIndex' => $startIndex, 'Count' => $count), $ns, $ns);

    // Check there if there are results at all
    if(!$data) {
        $message .= 'No results returned by the service<br>';
    break;
    }

    // Script that imports it to the DDBB       
    require_once('import_into_DDBB.php');

    $pulledData = count($data);
    $totalProcessed += $pulledData;
    $startIndex++;  
}
while($count == $pulledData); 
```

# python - pylab 导入的状态？

> ID：13063642
> 
> 赞同：2
> 
> 时间：2012-10-25T07:28:24.710
> 
> 标签：python, matlab, numpy, matplotlib, scipy

有一个提议在 scipy、numpy 和 matplotlib 命名空间内统一、简化和建立一致性，以便：

```
from pylab import * 
```

相当于：

```
from scipy import *
from numpy import *
from pylab import * (although I personally think it should be from matplotlib) 
```

自[http://www.scipy.org/PyLab](http://www.scipy.org/PyLab)首次编写以来已经 3 年多了（请参阅从该提案链接的邮件列表讨论[http://matplotlib.1069221.n5.nabble.com/Pylab-import-error-由于-dateutil-td39346.html](http://matplotlib.1069221.n5.nabble.com/Pylab-import-error-due-to-dateutil-td39346.html) )

是否有关于这方面的进展的更新，或者它已经停滞不前？这个问题真的是在向那些一直在关注相关包 numpy、scipy、matplotlib、ipython 等的开发邮件列表的人发出呼吁

[编辑]

这不仅仅是污染顶级命名空间。它是关于统一上述四个包的 API 并简化科学编程的过程。就我个人而言，在我的工作中，我发现如果我需要 numpy，我总是需要 matplotlib，而且我经常需要来自 scipy 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:13:56.210

自 2009 年以来似乎就没有讨论过它（尽管 wiki 页面在几个月前更新了）。我同意 mpl 邮件列表中的一篇文章的观点：

```
>>> import this
The Zen of Python, by Tim Peters
...
Namespaces are one honking great idea -- let's do more of those! 
```

我可以看到在项目之间拥有一致的文档策略的好处，但是拥有一个单一的命名空间我不太相信......

在实现方面，matplotlib`pylab`命名空间今天仍然存在于 master 上（因此将成为即将发布的 1.2 版本的一部分），因此肯定没有短期计划来推进这项工作。我会考虑与您所指的页面的作者联系，以了解他们的计划。

高温高压

# php - 拖放 Internet Explorer

> ID：13063648
> 
> 赞同：0
> 
> 时间：2012-10-25T07:28:36.180
> 
> 标签：php, javascript, html, drag-and-drop

我在 Internet Explorer 和 Safari 中拖放时遇到问题。在 Firefox 15（在其他版本上未经测试）中，代码可以正常运行。可以将项目从一个放置区拖放到另一个放置区，并且在顶部放置区中进行排序非常有效。在 Safari 中，拖放似乎仍然有效，但排序却不行。在 Internet Explorer 中，没有任何效果。我想避免使用 jQuery [http://jsfiddle.net/kMbPF/18/](http://jsfiddle.net/kMbPF/18/)

我假设本教程涵盖了解决此问题的方法。我在使用此代码时遇到的问题之一是它们仅将其应用于一个元素，而我有多个。此外，当我将它应用于一个元素时，它使该元素可拖动，但不允许将其拖放到放置区域中。我不是很肯定，但这个解决方案似乎只有在 Internet Explorer 版本 9 或更高版本才有效，这并不理想，但绝对比不支持要好。我也不认为我可以像他们看到我将从数据库中填充我的可拖动对象一样执行此 onload，因此 onload 可能会在将项目放入 dropzone 之前触发。[http://marakana.com/s/html5_drag_n_drop_api,1071/samples/try2.htm](http://marakana.com/s/html5_drag_n_drop_api,1071/samples/try2.htm)具体：

```
if(myDiv.dragDrop){
    myDiv.onselectstart=function(){this.dragDrop();return false};
} 
```

我不是想获得 100% 的浏览器兼容性，但我想获得 Internet Explorer 和 Firefox。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:51:38.337

10 之前的 Internet Explorer 不理解该`draggable`属性。要在 IE 上进行拖放操作，您需要将要拖动的项目设置为天生可拖动的内容：链接、图像或选定的文本。`table`将您的元素更改为`a`元素，它将在 IE 中工作。

# c++ - 如何用卡片类的实例填充甲板类？C++

> ID：13063653
> 
> 赞同：0
> 
> 时间：2012-10-25T07:28:49.973
> 
> 标签：c++, class

我有一个程序，我为它创建了一个简单的卡片类。如何创建和填充一副扑克牌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:33:52.643

如果您有一个类，`card`只需创建一个类，`deck`其中包含一个数据结构（例如`std::vector`数组）来包含`card`对象。然后实现诸如`deal`, `shuffle`etc 之类的功能或任何您认为合适的功能。

要填充你的牌组，你可以使用一个`add_card`函数。然后，您可以使用它来循环所有花色和价值，以创建每种不同花色/价值类型的卡片并将其添加到您的牌组中。或者（或另外），您可以在`deck`构造函数中执行此操作，但拥有一个`add_card`函数将允许您的套牌模拟不同类型的套牌，例如单张纸牌`hands`或多套牌游戏，例如赌场二十一点。

如果您使用支持随机访问迭代器的标准 C++ 库中的容器，则可以使用该`std::random_shuffle`函数来打乱您的`deck`

编辑：更新以纳入评论中提出的一些观点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:47:00.573

这是用一个例子来扩展 mathematician1975 的答案：

```
#include <iostream>
#include <string>
#include <map>
#include <array> //needs c++11 support

enum CARDSUIT { Spades, Hearts, Diamonds, Clubs };
typedef std::pair< int, int > Card;
template< class T, size_t N> struct DECK : public std::array< T, N> 
{
    void shuffle()
    {
        //see here for example:
        // http://www.cplusplus.com/reference/algorithm/random_shuffle/
    }
};
typedef DECK<Card, 52> StandardDeck;

int main()
{
    int i=0,j=0;
    StandardDeck deck;

    for (i=Spades; i<=Clubs; i++)
        for (j=0; j<13; j++)
                deck[j + (i*13)] = Card(i,j);

    for (i=0; i<(int)deck.size(); i++) 
        std::cout << deck[i].first << " " << deck[i].second << "\n";

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:01:31.277

最简单的方法是从 int 转换为卡片，这样从 0-51 的每个数字都会产生一张唯一的卡片。怎么样并不重要，只要它们都是独一无二的。

然后你可以从循环中的每个数字创建一副牌，可能是一个向量，你可以执行 std::random_shuffle 来洗牌。

如果您希望您的牌组对于将要玩什么游戏保持“通用”，那么不要使功能成为卡片的成员功能，而是“免费”功能。例如，黑桃 A 在桥牌上的排名可能超过黑桃 7，但这是桥牌（以及与惠斯特相关的游戏）的特征，而不是一般纸牌的特征。同样，一张牌或一副牌也没有“王牌”的概念。

您可能想要一个小丑的特殊卡片选项。当然，不使用小丑的游戏不允许在套牌中使用其中之一。

# build - 为 Windows 和 Linux 构建 Griffon 应用程序

> ID：13063654
> 
> 赞同：3
> 
> 时间：2012-10-25T07:28:55.237
> 
> 标签：build, griffon

我将为 Windows 和 Linux 构建桌面应用程序。我尝试将 Swing 与 Java 一起使用，但它有点太粗糙了。现在我专注于 Griffon 框架。

是否有可能（我敢打赌）为 Windows（exe 文件）和 Linux（其他可执行文件）构建应用程序？我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:01:27.357

是的，您可以构建针对多个平台的应用程序。在部署方面，即创建特定于平台的安装程序/启动程序，请查看安装程序插件

[http://artifacts.griffon-framework.org/plugin/installer](http://artifacts.griffon-framework.org/plugin/installer)

干杯，安德烈斯

# c - 一个简单的 pthread 变量共享

> ID：13063656
> 
> 赞同：2
> 
> 时间：2012-10-25T07:29:05.797
> 
> 标签：c, pthreads, mutex

> **可能重复：**
> [是否需要互斥锁来同步 pthread 之间的简单标志？](https://stackoverflow.com/questions/7223164/is-mutex-needed-to-synchronize-a-simple-flag-between-pthreads)

在 POSIX 环境中，我有两个线程（用 初始化`pthread_create()`），A 和 B。

A 有时会写入标志变量 (an `int`)，而 B 有时会读取它。

我是否需要使用互斥锁来保护这个变量，或者这些操作是否总是被视为原子操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:33:19.257

如果变量比真/假标志更复杂，您*应该保护它。*不能保证一个线程不会在写入操作的中途读取变量。

有一些方法可以减轻在某些情况下不使用互斥锁保护的情况（例如，如果变量只在递增，则重复双重读取和检查），但是对于对变量的一般修改，互斥锁更好。您不需要*太*在意性能，互斥锁非常有效。

当然，如果您绝对*必须*尽可能多地节省时间，可以使用一些技巧，但它们很少可移植。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:46:41.127

是的，如果您在两个线程中都使用该标志，则需要互斥锁。Mutex 是必须的，因为假设线程 B 正在基于标志执行两个操作，并且线程 A 不断更新标志值。在线程 B 中假设在完成第一个操作上下文切换后，线程 A 更改了标志值，线程 B 将为第二个操作获取新的标志值，因此必须使用 mutext。

您可以通过在线程本地内存中维护全局标志值来最小化锁定，并在本地操作完成后更新全局标志，该方法取决于您的要求。

# lotusscript - 在最近的联系人视图中查找重复的联系人

> ID：13063671
> 
> 赞同：0
> 
> 时间：2012-10-25T07:30:43.413
> 
> 标签：lotusscript

我需要编写代码以在同一内部域内的最近联系人视图中查找重复条目。我不会接触外部互联网联系人。是否有任何特殊的属性或方法（在 Lotus 脚本中？）将所有视图条目与服务器 nab 进行比较是个好主意？谁能建议我最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:14:37.393

不确定我是否完全满足您的需求，但这是我的建议

我建议编写一小段代码，通过视图（最近的联系人）并创建一个列表，然后只放一对唯一的密钥/文档并将所有重复项存储在另一个地方。

你可以用这样的代码创建一个代理（请注意，我可能使用了错误的键，所以只需定义你的哪个字段是唯一键）即

```
Dim session As New NotesSession
Dim view As NotesView
Dim doc As NotesDocument
Dim uniquedocs List As Variant
Dim duplicates As string
Dim key As String

Set view = session.Currentdatabase.Getview("(Recent Contacts)")
Set doc = view.Getfirstdocument()
While Not doc Is Nothing
    ' this is the unique key, please change it if you need
    key = doc.Getitemvalue("MailDomain")(0)

    If key <> "" Then
        If Not IsElement(uniquedocs(key)) Then
            Set uniquedocs(key) = doc
        Else
            If duplicates <> "" Then duplicates = duplicates & " | "
            duplicates = duplicates & key
        End If
    End If

    Set doc = view.Getnextdocument(doc)
Wend

MsgBox duplicates 
```

重复 - 是一个字符串，其中包含至少有 2 个联系人的所有邮件域（最近的联系人）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:18:13.297

```
Sub Initialize
On Error GoTo errHandler

Dim session As New NotesSession
Dim db As NotesDatabase
Dim currdb As NotesDatabase
Dim view As NotesView
Dim view1 As NotesView
Dim vc As NotesViewEntryCollection
Dim namesentry As NotesViewEntry
Dim serdoc As NotesDocument
Dim localdoc As NotesDocument
Dim item As NotesItem

Dim dname As String
Dim serverfullName() As String
Dim localfulName As String
Dim formula As String
Dim result As Variant
Dim count As Integer 

'Getting all the documents from servers NAB ,put that in document collection
Set db=session.GetDatabase("Myserver","names.nsf")
Set view=db.GetView("People")
Set vc = view.AllEntries
Set namesentry = vc.Getfirstentry()
ReDim Serverfullname(CInt(vc.Count))
count = 0

'storing fullnames in array
While Not namesentry Is Nothing

    Set serdoc = namesentry.Document
    serverfullName(count) = serdoc.Getitemvalue("FullName")(0)
    Set namesentry = vc.Getnextentry(namesentry)
    count = count + 1
Wend 
'keeping the string format for Comparison   
Dim x As String
Dim iteration As Integer
x = ""
iteration = 0
ForAll i In Serverfullname
    iteration = iteration + 1
    If i ="" Then
    ElseIf count = iteration Then   
        x = x + |"| + i + |"|
    Else
        x = x + |"| + i + |"| + ":"
    End If
End ForAll
'MsgBox x 'Displaying servers fullname list

'Geetting local NAB contacts
Set currdb= session.CurrentDatabase
Dim selFormula As String
'creating New view to filter documents with same domain
selFormula= {SELECT @UpperCase($AutoCreatedList)  = "DIP" & @LowerCase(MailDomain)=@LowerCase("mydomain")}
Call currdb.Createview("RecentView",selFormula)
Set view1 = currdb.GetView("RecentView")
Set localdoc = view1.GetFirstDocument

While Not localdoc Is Nothing 

    localfulName = localdoc.Getitemvalue("FullName")(0)
    Dim indexresult As Variant
    Dim Formula1 As String

    Formula1 = |@Contains(| & x & |;"| + Localfulname + |")|
    'MsgBox Formula1
    indexresult = Evaluate(Formula1)
    If indexresult(0)= 0 Then

        MsgBox " Duplicate entry " & localfulname & "."
        'Call localdoc.Remove(true)
    End If

    Set localdoc = view1.Getnextdocument(localdoc)
Wend
Exit sub 
```

errHandler: MsgBox Error() & " " & Erl() Exit sub End Sub

# wordpress - 图片附件页面的侧边栏

> ID：13063676
> 
> 赞同：0
> 
> 时间：2012-10-25T07:30:50.927
> 
> 标签：wordpress

当您在帖子中发布图库并链接到附件页面时（即： [gallery columns="4"] ），因此每个图像都有自己的页面。由于某种原因，侧边栏没有出现在这些页面上。

有可能修复吗？

我正在使用 211 主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:54:53.023

您需要编辑您的 image.php 模板并确保它正在调用`<?php get_sidebar(); ?>`

# node.js - Heroku SSE 请求上的 H15

> ID：13063683
> 
> 赞同：8
> 
> 时间：2012-10-25T07:31:16.713
> 
> 标签：node.js, heroku, server-sent-events

我在 Heroku 上有一个 Node.js 应用程序。我最近切换了一个长查询以使用 SSE (EventSource)。虽然它在我的机器上运行良好且快速，但我不断收到`Error H15 (Idle connection)`我的 GET 请求。H15 描述说我每笔交易允许超过 55 秒。但我的整个查询不会超过 4-5 秒。

此外，在阅读了描述之后，我会在点击查询后立即返回我的第一个字节（只是一个数字），然后再开始任何繁重的工作 - 它仍然无法正常工作。

我的问题是：

1.  为了让这件事继续下去，我需要做什么？HTTP 标头参数？客户端JS端的东西？如何避免 H15？
2.  我是在尝试做 Heroku 不支持的事情吗？我不这么认为，因为我在 Heroku 上有另一个成功使用 EventSource 的应用程序（[express-eventsource.herokuapp.com](http://express-eventsource.herokuapp.com)，github 上的源代码：[https](https://github.com/TravelingTechGuy/express-eventsource) ://github.com/TravelingTechGuy/express-eventsource ）

一如既往，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T02:53:20.913

在尝试了一切、更改和重写我的代码、分析网络等之后，最后我的朋友（没有任何 Node 知识）想出了一个让我走上正轨的想法：

这似乎是一个域问题 - 根本不是代码问题。
我设置了一个 ANAME 映射，事实证明，由于 Heroku 使用 5 个不同的 IP，因此仅映射到其中一个会破坏 SSE 调用。基本上，mydomain.com 显示的 IP 与 mydomain.herokuapp.com 不同——这意味着服务器尝试将响应返回到与发起呼叫的 IP 不同的 IP，因此超时。

我放弃了 ANAME 以支持 CNAME（基本上，放弃了裸 mydomain.com 以支持 www.mydomain.com），现在它似乎正在工作。

结论：

1.  并非一切都是代码问题 - 如果它在一个环境中运行良好而不在另一个环境中运行良好，则这是一个配置问题
2.  如果你在某件事上挣扎太久，它会帮助你换一双新的眼睛。即使没有主题专业知识，您也会对可以尝试的新方法有很好的想法
3.  1and1 DNS 控制糟透了 b@lls。搬离那里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-18T23:32:03.037

我在 Meteor 应用程序中遇到了同样的问题。突然之间，每次交互都会在应用程序上返回一个 websocket 错误，在 heroku 上返回一个 h15 错误。我已经通过将根 url 更改为裸域，然后将裸域转发到 www.example.com 来解决它。希望这也会对某人有所帮助。我也完全同意@TravelingTechGuy 关于

> 并非一切都是代码问题 - 如果它在一个环境中运行良好而不在另一个环境中运行良好，则这是一个配置问题

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-04-02T15:23:38.753

这有时可能是由于数据库的原因。如果数据库没有连接，这个错误很可能是可见的！

# html - alt属性中的文字会出现的原因

> ID：13063685
> 
> 赞同：0
> 
> 时间：2012-10-25T07:31:19.980
> 
> 标签：html, css, browser, alt

我尝试使用文本浏览器打开 HTML 页面。是的，img标签的alt属性的值出现了。然后我没有放 alt 属性，而是使用了 CSS：

```
.headerImg:after, .headerImg::after
        { 
            content:" (the alternative)"; 
        } 
```

我希望文本出现在最新的浏览器中。如何？除了它们被放置在不同的路径之外，图像不会显示的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:12:30.900

文本浏览器通常不支持 CSS。他们可以实现 CSS 的某些部分，尤其是在文本样式方面，但大多数 CSS 东西在纯文本渲染中没有多大意义，所以他们没有打扰。（要看到这一点，请使用一些非常简单的 CSS 代码进行测试，这些代码通常在图形浏览器中得到很好的支持，并且也可以在文本浏览器中实现，例如`text-transform: uppercase`.

`alt`在不显示图像的情况下，该属性应该指定图像的替代文本。这种情况通常涉及忽略 CSS 的浏览器（例如，文本浏览器、听觉浏览器）或覆盖作者的大部分 CSS 代码（例如，具有非常特定设置的图形浏览器以帮助具有某种特定类型视觉障碍的视觉对象）。所以尝试使用 CSS 代替`alt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:51:05.030

我不知道我是否很好地理解了这个问题。如果你想在图像加载后显示 de alt 值，你应该试试这个：

```
.headerImg:after { 
    content: attr(alt) 
} 
```

如果您想更改图像的 alt 值，您可以使用 jquery：

```
$('#image1').attr({
  alt: 'Alternative description',
  title: 'Alternative description'
}); 
```

# javascript - jQuery滑动菜单困难

> ID：13063687
> 
> 赞同：0
> 
> 时间：2012-10-25T07:31:32.787
> 
> 标签：javascript, jquery, menu, jquery-animate, hidden

我正在尝试创建一个具有很酷的滑动/淡入效果的多层菜单。现在，它适用于我的第一次点击，但之后它失败了。

**HTML**

```
<ul id="menu">
<li>
    Development
    <div>
        <ul>
            <li>Sub 1</li>
            <li>Sub 2</li>
        </ul>
    </div>
</li>
<li>
    Story
    <div>
        <ul>
            <li>Sub 1</li>
            <li>Sub 2</li>
        </ul>
    </div>
</li>
<li>
    News
    <div>
        <ul>
            <li>Sub 1</li>
            <li>Sub 2</li>
        </ul>
    </div>
</li>
</ul>​ 
```

**JavaScript**

```
var observeClicks = function(){
    var lis = $('#menu').children('li');

    lis.click(function(){
        lis.unbind();
        var $this = $(this);
        var $div = $($this.children('div')[0]);
        var $ul = $($div.children('ul')[0]);

        var clone = $ul.clone(true, true)
            .css({visibility: 'hidden', display: 'block'});
        clone.attr('style', clone.attr('style').replace('block', 'block !important'))
            .insertAfter($ul);

        setTimeout(function(){
            $ul.css({height: clone.css('height')});
            $div.css({height: clone.css('height')});
            clone.remove();
        }, 0);

        if(!lis.hasClass('current')){
            $this.addClass('current');
            $div.slideDown(350, function(){
                $ul.fadeIn(350);
                observeClicks();
            });
        }else{
            if(!$this.hasClass('current')){
                $current = $($('.current')[0]);
                $cdiv = $($current.children('div')[0]);
                $cul = $($cdiv.children('ul')[0]);

                $cdiv.css({height: $cul.css('height')});

                $this.addClass('current');
                $current.removeClass('current');
                $cul.fadeOut(350, function(){
                    $cdiv.slideUp(350, function(){
                        $div.slideDown(350, function(){
                            $ul.fadeIn(350);
                            observeClicks();
                        });
                    });
                });
            }else{
                observeClicks();
            }
        }
    });
}
observeClicks(); 
```

**CSS**

```
#menu {
    cursor: pointer;
    width: 150px;
}

#menu div {
    display: none;
    width: 100%;
}

#menu li ul {
    display: none;
    margin-left: 25px;
} 
```

我遇到的第一个有趣的问题是，我的菜单不会滑动，而是“弹出”进来。那是因为 div 在显示其中的元素之前不会占用空间。所以我通过给它一个固定的区域来克服它。（宽度在 CSS 中设置，高度在 JavaScript 中设置）。我认为这可能是问题所在，我插入一个虚拟元素，读取它的高度，将其分配给 div，然后删除该元素。我知道这很粗略，但我找不到更好的方法。

无论如何，当我第一次单击菜单项时，它可以完美运行。但是当我尝试第二次点击时，似乎没有为div设置高度，并且没有滑动效果。[**在这里查看。**](http://jsfiddle.net/yL944/11/)

您可能还注意到，我没有尝试`.stop()`处理动画，而是取消绑定点击处理程序，然后在所有动画完成后重新绑定它们。这是经过深思熟虑的，在添加之前我遇到了这个问题。如果有人能告诉我要解决什么问题，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:59:36.787

似乎问题出在克隆高度的代码中。我不确定为什么它只适用于单击的第一个元素，但您可以通过简单地在 css 中设置这些元素高度来修复它：

```
#menu div {
    display: none;
    width: 100%;
    height: 40px;
}

#menu li ul {
    display: none;
    margin-left: 25px;
    height: 40px;
} 
```

并删除克隆和分配高度的 js 代码，它在 jsfiddle 中看起来不错：http: [//jsfiddle.net/j7EHu/](http://jsfiddle.net/j7EHu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:59:28.990

请使用它而不是您的代码：

```
#menu {
    cursor: pointer;
    width: 150px;
}

#menu div {
    display: none;
    width: 100%;
}

#menu li ul {
    margin-left: 25px;
} 
```

JS

```
 $("#menu > li").click(function(){
      $('#menu .active').slideUp(350).removeClass('active');
      $(this).find('div').slideDown(350,function() {
          $(this).addClass('active');
      });
 }); 
```

这是一个演示：http: [//jsfiddle.net/yL944/12/](http://jsfiddle.net/yL944/12/)

# jquery - Jquerymobile 在 pageinit 上发出 2 次警报

> ID：13063688
> 
> 赞同：2
> 
> 时间：2012-10-25T07:31:36.173
> 
> 标签：jquery, jquery-mobile

在我的页面加载中，我收到了来自 jqm 的 2 个警报。我的代码有什么问题吗？

我的代码：

```
 $(document).bind('pageinit', function () {

alert('hi') // alerts 2 times...

        if(navigator.platform.indexOf("iPhone") != -1){
           $('div.video-holder span ').hide();
        }

    $('a[href="#"], a.disabled').bind('click touchstart',function (e) {
       e.preventDefault();
    } );

    if($(' #task-1,#task-2').length){
        candidateAccordion($('.candidate-list'));    
    }
    if($('#task-3').length || $('#task-4').length){
        taskSelector($('#task-3,#task-4'));//only for tast list selection
    }
    if($('video').length){
        $('.video-holder').each(function(num,element) {
            videoProcess($(element));
        });
    }
    if($('#task1-candSelected').length){
        candidateUpdate($('#task1-candSelected'));
    }

    if($('#task2-results').length){
        task2ResultProcess();
    }

    if($('#task3-results').length){
        task3ResultProcess();
    }
    if($('#task4-results').length){
        task4ResultProcess();
    }
    if($('#scoredUptoFinal').length){
        scoredUptoFinal();
    }

} ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:31:13.100

如果您的警报触发两次，则该事件将被触发两次。

如何添加`event`到函数参数并像这样安慰它：

```
$(document).bind('pageinit', function (event) {

   console.log( event )

   ... 
```

这应该会给你一些关于正在发生的事情的信息。

`pageinit`关于 SO有很多问题（比如[这里](https://stackoverflow.com/questions/12512174/pageinit-fires-multiple-times?rq=1)），所以也许他们也可以为您指出解决方案。

我也遇到了多个`pageinit`事件触发的问题。我通常在`lock-up`第一次触发后对页面执行此操作：

```
$(document).bind('pageinit', function() {
    if ( !$('html').hasClass("mv-on") ){
        $('html').addClass("mv-on");
        // trigger my stuff
        }
    }); 
```

这样 pageinit 将为`ONCE`整个 DOM 运行。`pageinit`您还可以通过向触发事件的页面添加类或属性来使用它来锁定页面。

此外，请确保`pageinit`您的绑定/处理程序是正确的事件。`pageinit`当我尝试绑定的类尚未插入 DOM 时，我经常尝试设置一些东西，例如按类绑定到元素。我通常`pagebeforeshow`现在就去，因为那时我确定所有背景事情都完成了。但只是个人喜好问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:02:30.493

你有多页模板吗？可能是您有两个`pages`使用相同的 ID。JQM 加载第一个出现的页面，因此会加载两次。

[也可能与此 JQM git issue request](https://github.com/jquery/jquery-mobile/issues/3347)中指出的问题有关。

也看看[这个图表](http://bradbroulik.blogspot.de/2011/12/jquery-mobile-events-diagram.html)，真的很好理解 JQM 触发的事件的顺序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T08:13:40.967

你不应该绑定到`document`pageinit 事件，你可以尝试只显示一个页面吗

例如， `$("#yourpageId").bind('pageinit', function () {...}`

# google-chrome-extension - Chrome 扩展程序——我的源代码是否可供用户使用？

> ID：13063689
> 
> 赞同：2
> 
> 时间：2012-10-25T07:31:39.293
> 
> 标签：google-chrome-extension, obfuscation

我即将向 chrome 网上商店发布我的第一个 chrome 扩展。他们希望压缩和上传代码。如果我理解正确，一旦通过批准，它将以 .crx 文件的形式提供给用户。

但是这些 crx 文件是带有 .crx 扩展名的简单 zip 文件，对吗？如果是这样，用户将无法获得源代码吗？

这意味着，我可能会在我的扩展程序旁边看到我的源代码的 100 多个版本在网上商店中浮动。:(

有没有办法阻止用户获取源代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T10:05:04.760

为您的扩展提供源代码是回馈开源社区的最简单方法。由于您至少使用了一个开源应用程序 (Chrome)，因此您应该考虑将您的项目开源作为偿还债务。

您还应该了解 GitHub/Bitbucket 个人资料是一个开发人员组合。许多公司在提供工作之前都会考虑这些。如今，每个优秀的开发人员都有大量的开源项目。这使任何人都可以了解他们编写的代码有多好，他们与其他开发人员协作的能力如何，他们对细节的关注程度等等。

最后但并非最不重要的一点是，如果您的扩展真的很好，如果您不断维护它并开发新功能并且您的用户喜欢使用它，那么您可以确定它会保护自己免受任何类型的复制。如果你开源你的代码，你肯定会找到一些合作者，他们会提供翻译、新功能并帮助你修复错误。

无论如何，你的问题的答案是这样的：如果你害怕有人会使用你的 JavaScript 代码，你可以[混淆它](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)。当然，拼命阅读的人可以[美化](http://jsbeautifier.org/)混淆代码，但如果没有注释和有意义的变量名，这样做会很痛苦。其他解决方案是编写[NPAPI 插件](http://developer.chrome.com/extensions/npapi.html)或[Native Client 应用程序](https://developers.google.com/native-client/overview)，因为它们允许您编译部分代码。

# python - 将函数应用于dict中的值

> ID：13063691
> 
> 赞同：70
> 
> 时间：2012-10-25T07:31:49.160
> 
> 标签：python, dictionary

我想将一个函数应用于dict中的所有值并将其存储在一个单独的dict中。我只是想看看我如何使用 python 并想看看我如何重写这样的东西

```
for i in d:
    d2[i] = f(d[i]) 
```

类似于

```
d2[i] = f(d[i]) for i in d 
```

第一种写法当然很好，但我想弄清楚如何改变python语法

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-10-25T07:33:48.683

如果您使用的是 Python 2.7 或 3.x：

```
d2 = {k: f(v) for k, v in d1.items()} 
```

这相当于：

```
d2 = {}
for k, v in d1.items():
    d2[k] = f(v) 
```

除此以外：

```
d2 = dict((k, f(v)) for k, v in d1.items()) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-02-22T14:17:26.880

你可以使用`map`：

```
d2 = dict(d, map(f, d.values())) 
```

如果您不介意使用扩展程序。您还可以[`valmap`](https://toolz.readthedocs.io/en/latest/api.html#toolz.dicttoolz.valmap)在[toolz](https://toolz.readthedocs.io/en/latest/index.html)库中使用，它在功能上等同于使用`map`解决方案：

`from toolz.dicttoolz import valmap`

```
d2 = valmap(f, d) 
```

如果不是为了清晰地展示该方法，您还可以选择提供默认返回类，以供需要`dict`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T07:33:32.930

```
d2 = dict((k, f(v)) for k,v in d.items()) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-21T19:03:37.787

字典可以嵌套在 Python 中，在这种情况下，该解决方案`d2 = {k: f(v) for k, v in d1.items()}`将不起作用。

对于嵌套字典，需要一些函数来遍历整个数据结构。例如，如果允许值本身是字典，则可以定义如下函数：

```
def myfun(d):
  for k, v in d.iteritems():
    if isinstance(v, dict):
      d[k] = myfun(v)
    else:
      d[k] = f(v)
  return d 
```

进而

```
d2 = myfun(d) 
```

# c# - 在 C# 中增加 ServiceHost 的 maxRequestLength/executionTimeout

> ID：13063693
> 
> 赞同：0
> 
> 时间：2012-10-25T07:32:01.763
> 
> 标签：c#, winforms, servicehost

我有一个在服务器上运行的 winForms 应用程序，我通过运行在`ServiceHost`.

问题是，当客户想要从中获取的数据`ServiceHost`很大时，我会遇到如下异常：

> 接收时出错，原因可能是未使用 http 协议。

我该如何解决这个问题？这将是一个 Web 应用程序吗？我只需增加 web.config 中的 maxRequestLength/executionTimeout。但是winforms项目中没有web.config。

编辑：这是一些代码：

```
Service s = new Service(this.foo);
ServiceHost host = new ServiceHost(s, baseAddress);
host.AddServiceEndpoint(typeof(IService), new BasicHttpBinding(), "");
host.Open(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:52:34.413

创建绑定时（在您的示例 BasicHttpBinding 中）只需将其 MaxReceivedMessageSize (http://msdn.microsoft.com/de-de/library/system.servicemodel.httpbindingbase.maxreceivedmessagesize.aspx) 设置为适合您的方案的值。

```
 var binding = new BasicHttpBinding { MaxReceivedMessageSize = 20000; }; 
```

# java - 检索存储在 JSONArray 中的 HashMap 的键

> ID：13063694
> 
> 赞同：0
> 
> 时间：2012-10-25T07:32:02.190
> 
> 标签：java, json, hashmap

我有一个 HashMap 如下：

```
Map<String, String> myMap = new HashMap<String,String>();
myMap.put("apple","mac");
JSONArray listOfEntities = new JSONArray();
listOfEntities.put(myMap); 
```

问题：从 listOfEntities 我需要得到“苹果”。怎么做？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:02:48.567

在存储键/值对时，不应使用仅包含索引值的 JSONArray，而应使用 JSONObject，它是存储 K/V 对的 JSON 结构

所以

```
Map<String, String> myMap = new HashMap<String,String>();
myMap.put("apple","mac");
JSONObject listOfEntities = new JSONObject();

for (String key : myMap.keySet){
    listOfEntities.put(key, myMap.get(key));
} 
```

# erlang - 钢筋释放erlexec错误

> ID：13063702
> 
> 赞同：1
> 
> 时间：2012-10-25T07:32:35.077
> 
> 标签：erlang, rebar

我的程序是用 mac os 编写的，`10.6.8(erlang 15B01)`并使用 rebar 发布。

在我的开发电脑中，调用`rel/app_a/bin/app_a`控制台时，它运行正常。

```
 Exec: /Users/***/Documents/Project/***/rel/app_a/erts-5.9.1/bin/erlexec 
-boot /Users/***/Documents/Project/***/rel/app_a/releases/1/capulet 
-mode embedded -config /Users/***/Documents/Project/app_a/rel/app_a/releases/1/sys.config 
-args_file /Users/***/Documents/Project/app_a/rel/app_a/releases/1/vm.args -- console

    Root: /Users/***/Documents/Project/app_a/rel/capulet

    Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] 
[hipe] [kernel-poll:false] 
```

我有 tar`"rel/app_a"`目录，然后将 tar 移动到运行 debian 的目标主机（erlang 版本是 R1501）。

调用时`rel/app_a/bin/app_a console`，显示错误信息如下：

```
 Exec: /home/***/app_a/erts-5.9.1/bin/erlexec -boot /home/***/app_a/releases/1/app_a 
-mode embedded -config /home/***/app_a/releases/1/sys.config 
-args_file /home/***/app_a/releases/1/vm.args -- console

    Root: /home/***/app_a

    /home/***/app_a/erts-5.9.1/bin/erlexec: 4: Syntax error: ")" unexpected 
```

这里有什么意义`erlexec:4`？如何解决问题？

当前系统配置

```
[
 %% SASL config
 {sasl, [
         {sasl_error_logger, {file, "log/sasl-error.log"}},
         {errlog_type, error},
         {error_logger_mf_dir, "log/sasl"},      % Log directory
         {error_logger_mf_maxbytes, 10485760},   % 10 MB max file size
         {error_logger_mf_maxfiles, 5}           % 5 files max
        ]}
]. 
```

vm.args

```
## Name of the node
-name capulet@127.0.0.1

## Cookie for distributed erlang
-setcookie RIOEAGZQBQKWHSMMXOPW

## Heartbeat management; auto-restarts VM if it dies or becomes unresponsive
## (Disabled by default..use with caution!)
##-heart

## Enable kernel poll and a few async threads
##+K true
##+A 5

## Increase number of concurrent ports/sockets
##-env ERL_MAX_PORTS 4096

## Tweak GC to run more often
##-env ERL_FULLSWEEP_AFTER 10 
```

我尝试在 sys.config 文件中创建语法错误以进行实验。所以我认为这不是由 sys.config 语法错误引起的。

```
Crash dump was written to: erl_crash.dump
could not start kernel pid (application_controller) 
(error in config file "/Users/***/Documents/Project/app_a/rel/app_a/releases/1/sys.config" 
(10): syntax error before: ']') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:51:41.267

检查 sys.config 和 vm.args 是否有任何语法错误。

# c# - 异常错误处理

> ID：13063705
> 
> 赞同：0
> 
> 时间：2012-10-25T07:32:48.297
> 
> 标签：c#, asp.net, database, sql-server-2008

![在此处输入图像描述](../Images/bf96c0e9b6e2d5d67da2c60944432230.png)

每当我想在我的航空公司预订系统项目中预订航班时，我都会在上图中出现此错误，我的代码中出现异常错误，此错误消息正在弹出

`IndexOutOfRangeException unhandles by user code`

...关于我如何去做的任何想法我的代码是使用 c sharp 在 asp.net 中编写的？

这是代码

```
public partial class TICKET_BOOKING : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    int a;
    String constring = ConfigurationManager.ConnectionStrings["conn"].ConnectionString.ToString();
    public int Autonumber()
    {
        SqlConnection con = new SqlConnection(constring);
        SqlCommand cmd = new SqlCommand();
        cmd.CommandType = CommandType.Text;
        cmd.Connection = con;
        con.Open();
        cmd.CommandText = "select pid from pid";
        SqlDataAdapter da = new SqlDataAdapter();
        DataSet ds = new DataSet();
        DataTable dt = new DataTable();
        da.SelectCommand = cmd;
        da.Fill(dt);
        a = Convert.ToInt32(dt.Rows[0][0].ToString()) + 1; //this is where its occuring
        con.Close();
        return a;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:44:32.527

试试这个

```
 int a;
    String constring = ConfigurationManager.ConnectionStrings["conn"].ConnectionString.ToString();
    public int Autonumber()
    {
        using (SqlConnection con = new SqlConnection(constring))
        {
            SqlCommand cmd = new SqlCommand
                                 {
                                     CommandType = CommandType.Text,
                                     Connection = con,
                                     CommandText = "select pid from pid",
                                 };
            con.Open();
            // cmd.Connection.Open();
            using (var reader = cmd.ExecuteReader(CommandBehavior.CloseConnection))
            {
                while (reader.Read())
                {
                    if (!reader.IsDBNull(0))
                        a = reader.GetInt32(0);
                }
            }
            return a;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:35:30.130

您的数据表中没有记录，所以接下来

```
dt.Rows[0][0] 
```

失败。请在加入之前检查表是否有记录。像这样的东西：

```
if(dt.Rows.Count > 0) 
{ 
   a = Convert.ToInt32(dt.Rows[0][0].ToString()) + 1; 
} 
```

# python - 加载css django 1.4开发中引用的图片

> ID：13063709
> 
> 赞同：0
> 
> 时间：2012-10-25T07:33:20.183
> 
> 标签：python, css, django

我正在尝试通过 css 文件为我的开发环境加载背景图像。我做了以下事情：

*   我的 main_page.html 链接中有以下内容 rel="stylesheet" href="static/style.css" type="text/css"
*   在 settings.py 我有以下内容：
    STATIC_ROOT = '/home/vinay/myfiles/django-projects/taf/gui/static/'
    STATIC_URL = '/static/'
    STATICFILES_DIRS = ()
    TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth .context_processors.auth”、“django.core.context_processors.debug”、“django.core.context_processors.i18n”、“django.core.context_processors.media”、“django.core.context_processors.static”、“django.core .context_processors.tz", "django.contrib.messages.context_processors.messages",)

*   运行 python manage.py collectstatic

*   style.css 和 bg.jpg 存在于静态文件夹中

*   在 style.css 中，bg.jpg 被引用为：
    background:url("../bg.jpg");
    尝试了所有可能的组合，例如
    background:url("bg.jpg");
    背景：url（“静态/bg.jpg”）；
    background("/static/bg.jpg")

    但似乎没有任何效果。此外，生产服务器显示以下内容：
    [25/Oct/2012 01:31:35] "GET / HTTP/1.1" 200 1364
    [25/Oct/2012 01:31:35] "GET /static/style.css HTTP/1.1" 200 442
    [25/Oct/2012 01:31:35] "GET /static/logo.gif HTTP/1.1" 304 0

因此，看起来它并没有尝试获取“bg.jpg”，但是 main_page.html 中存在徽标，并且它获取了该图像，但没有获取 css 文件引用的图像。为什么会这样？

*   url.py 文件只包含：(r'^$', main_page),

# c++ - CreateFile ，ReadDirectoryChanges 问题

> ID：13063710
> 
> 赞同：1
> 
> 时间：2012-10-25T07:33:21.497
> 
> 标签：c++, multithreading, winapi, createfile, readdirectorychangesw

我`ReadDirectoryChangesW`用来监视我打开的文件夹`CreateFile`，一旦添加了文件，我就会调用一个函数（`OnFileChanged`）来读取大小并打开它进行读取，我的应用程序适用于小文件，但是当我尝试时会出现问题将一个大文件复制到我的文件夹（7,24 M）中，`Permission denied`调用 fopen 读取它后出现错误。

观看过程基于[此](http://sumatrapdf.googlecode.com/svn/trunk/src/FileWatch.h)

```
 void Init(const QString FullPath)
    {    ...
         hDir = CreateFile(
                dirPath, // pointer to the directory containing the tex files
                FILE_LIST_DIRECTORY|GENERIC_READ,                // access (read-write) mode
                FILE_SHARE_READ|FILE_SHARE_DELETE|FILE_SHARE_WRITE,  // share mode
                NULL, // security descriptor
                OPEN_EXISTING, // how to create
                FILE_FLAG_BACKUP_SEMANTICS  | FILE_FLAG_OVERLAPPED , // file attributes
                NULL); // file with attributes to copy

            SecureZeroMemory (&overl, sizeof(overl));
            SecureZeroMemory(buffer, sizeof(buffer));
            overl.hEvent = CreateEvent(NULL, FALSE, FALSE, NULL);

            // watch the directory
           BOOL res= ReadDirectoryChangesW(
                 hDir, /* handle to directory */
                 &buffer[curBuffer], /* read results buffer */
                 sizeof(buffer[curBuffer]), /* length of buffer */
                 FALSE, /* monitoring option */
                 FILE_NOTIFY_CHANGE_FILE_NAME ,
                 //FILE_NOTIFY_CHANGE_LAST_WRITE, /* filter conditions */
                 NULL, /* bytes returned */
                 &overl, /* overlapped buffer */
                 NULL); /* completion routine */

    }

void StartWatchThread()
{
    // if the thread already exists then stop it
    if (IsThreadRunning())
        SynchronousAbort();

    //CrashIf(!hDir);
    if(!hDir)
       { qDebug()<<" handle "<<hDir<<" last error"<<GetLastError();
        exit(-1);}

    else
    {// reset the hEvtStopWatching event so that it can be set if
    // some thread requires the watching thread to stop
    ResetEvent(hEvtStopWatching);

    DWORD watchingthreadID;
    qDebug()<<"befrore creating thread";
    hWatchingThread = CreateThread(NULL, 0, WatchingThread, this, 0, &watchingthreadID);
    qDebug()<<"watchingthreadID"<<watchingthreadID;
    }
}

DWORD WINAPI WatchingThread(void *param)
{
    //qDebug()<<"in WatchingThread";
    FileWatcher *fw = (FileWatcher *)param;

    HANDLE hp[2] = { fw->hEvtStopWatching, fw->overl.hEvent };
    for (;;)
    {

        DWORD dwObj = WaitForMultipleObjects((sizeof(hp)/(sizeof(hp[0])))
                                             , hp, FALSE, INFINITE);
        if (dwObj == WAIT_OBJECT_0) // the user asked to quit the program
        {
            qDebug()<<"in WatchingThread the user asked to quit the program";
            //exit(-1);
            break;
        }
        if (dwObj != WAIT_OBJECT_0 + 1)
        {
            // BUG!
            //assert(0);
            qDebug()<<"dwObj "<<dwObj<<" last error "<<GetLastError();
            break;
        }
        //qDebug()<<"WatchingThread fw->NotifyChange() ";

        //if (fw->wakeup)
            fw->NotifyChange();

    }
    return 0;
} 

bool NotifyChange()
{
    //qDebug()<<"in NotifyChange";

    GetOverlappedResult(hDir, &overl, &dwNumberbytes, FALSE);

    FILE_NOTIFY_INFORMATION *pFileNotify = (FILE_NOTIFY_INFORMATION *)buffer[curBuffer];
    // Switch the 2 buffers
    curBuffer = (curBuffer + 1) % (sizeof(buffer)/(sizeof(buffer[0])));
    SecureZeroMemory(buffer[curBuffer], sizeof(buffer[curBuffer]));
    // start a new asynchronous call to ReadDirectory in the alternate buffer
    ReadDirectoryChangesW(
         hDir, /* handle to directory */
         &buffer[curBuffer], /* read results buffer */
         sizeof(buffer[curBuffer]), /* length of buffer */
         FALSE, /* monitoring option */
         FILE_NOTIFY_CHANGE_FILE_NAME  ,
         //FILE_NOTIFY_CHANGE_LAST_WRITE, /* filter conditions */
         NULL, /* bytes returned */
        &overl, /* overlapped buffer */
         NULL); /* completion routine */

    // Note: the ReadDirectoryChangesW API fills the buffer with WCHAR strings.
    for (;;) {

        if (pFileNotify->Action == FILE_ACTION_ADDED)
        {
            qDebug()<<"in NotifyChange if ";
                char szAction[42];
                char szFilename[MAX_PATH] ;
                memset(szFilename,'\0',sizeof( szFilename));
                strcpy(szAction,"added");
                wcstombs( szFilename, pFileNotify->FileName, MAX_PATH);

                OnFileChanged(szFilename,szAction);
                qDebug()<<"in NotifyChange after OnFileChanged ";

        }

        // step to the next entry if there is one
        if (!pFileNotify->NextEntryOffset)
            return false;
        pFileNotify = (FILE_NOTIFY_INFORMATION *)((PBYTE)pFileNotify + pFileNotify->NextEntryOffset);
    }
    pFileNotify=NULL;
    return true;
} 
```

我无法弄清楚如何处理文件并且不让我阅读它？我试图在调用后调用 Sleep()`OnFileChanged`并在它完成时醒来但徒劳无功。请有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:35:06.317

> 我调用一个函数（OnFileChanged）来读取大小并打开它进行读取

这几乎可以保证迟早会失败。进程写入文件*时*会生成文件更改通知。如果进程尚未完成写入或以其他方式保持文件打开，这会阻止您打开文件。并且不允许读取共享，这对于写入文件的程序很常见。它当然与文件大小有关，文件越大，写入所需的时间越长，因此您尝试打开它而其他进程尚未关闭它的可能性就越大。

您需要处理这种可能的事故。您无能为力，只能将路径排在队列中，以便稍后尝试。

# c# - 为什么游戏开发者使用 C++ 而其他行业为什么不使用 C++？

> ID：13063714
> 
> 赞同：-2
> 
> 时间：2012-10-25T07:33:36.640
> 
> 标签：c#, c++, .net, performance, comparison

今天的事实是，几乎所有为 PC、Xbox 或 PS3 发布的 AAA 视频游戏都是完全用 C++ 编写的。一些供应商表示他们不能迁移到 C#，因为他们内部重用的各种引擎的大型代码库已经在 C++ 中构建和测试（物理、渲染等）。[在性能方面， C++ 代码比 C# 运行得更快](http://www.codeproject.com/Articles/212856/Head-to-head-benchmark-Csharp-vs-NET)是一个普遍接受的事实。

再次重申：**为什么专业游戏开发行业通常使用 C++，我们为什么不使用？**是不是因为一般的业务线应用程序不需要“您可以获得的最佳性能”和交易可靠性（内存泄漏、OOB、堆栈溢出）以换取“不重要”的性能？还是仅仅因为 C++ 通常比用 C# 编写的相同代码“更难维护”（模板、指针、malloc 等）？

还是因为在 C++ 中开发比在 C# 中开发相同的功能集“更耗时”，所以您无法实现尽可能多的功能？[但即使在今天， UDK](http://www.unrealengine.com/en/)和[CryENGINE](http://www.crytek.com/cryengine)等许多高端游戏开发工具包也是完全用 C++ 编写的，它们的[功能](http://www.unrealengine.com/features/)集在任何平台上都是最好的。**因此，如果 C++ 对这些公司来说不是“更难”、“限制”或“错误”，那么为什么它在游戏开发或科学/HPC 行业之外的使用如此之少呢？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T07:40:46.327

它主要不是关于语言，而是平台。

在 .Net 中你不能使用 SSE，你使用 GPU 的能力是有限的；一些无锁多线程算法只能在本机代码中真正按照最初的预期（版本化指针）实现（如果多线程很重要，高效的无锁结构可以提供极大的速度改进）；内存管理在 .Net 中是自动的，而在高性能场景中，您可以通过微管理内存（针对不同对象类型的单独迷你堆）获得巨大的速度优势，并且您可以通过内存进行向量化——这也链接回 SSE，其中通常，您将有多个指针通过大型缓冲区进行矢量化，将值馈送到 SSE 操作中。

仅举几例。

这些事情是商业应用程序通常不关心的事情，因为如果在这个级别上性能真的很重要，那么它很可能是它运行的服务器〜（桌面应用程序不太可能 - 即使在交易场景中它也可能是服务器这需要是实时的），而需要这种性能的企业只会使用更快的机器；或刀片中心。

在零售游戏环境中，它必须在许多不同的硬件配置上工作，因此尝试从用户正在运行的任何硬件中榨取最后一滴性能是有意义的。

I guess that more answers why C++ is used to code most games, rather than why .Net is ubiquitous in business - the lack of need of such performance potential is a factor, of course, as is I think the shorter development life cycle (generally speaking). However there are more factors.

In some ways, though, it's like comparing apples to cows. You select the tech that best fits the problem.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T07:39:52.407

您总是需要优化应用程序的*瓶颈*。

在游戏中，引擎的速度对应用程序的性能至关重要。因此，优化在那里是有意义的。

在一个业务线应用程序中，它花费 X 毫秒等待数据库查询的执行，并且 Y << X 毫秒绘制用户界面并执行实际的“业务代码”，优化 Y 没有*意义*。由于 X 是这里的关键因素，因此通常是用 C、C++ 或其他一些“高性能”语言编写的*数据库引擎。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T07:39:28.123

简而言之：C 或 C++ 使您可以在较低级别处理更多细节，因此您可以从可能的地方获得性能和内存增益，这确实是必需的，因为游戏对绘图和绘图的性能要求非常高不断地重绘事物。

然而，这些细节在公务应用程序中通常不需要，因为首先它们不会执行需要大量工作的“操作”，因此允许使用托管代码，即使这会给您带来一定的惩罚，它们不是很明显会导致物理工作量较低。所以关键是使用正确的工具来完成正确的工作。你不用滑板车做农业，也不需要拖拉机送披萨。

# blackberry-10 - C++ Cascades - Intellisense 不存在？

> ID：13063717
> 
> 赞同：1
> 
> 时间：2012-10-25T07:33:49.440
> 
> 标签：blackberry-10

我正在尝试在 Motics IDE 中编写一些 C++ 代码，项目类型为“C++ Cascades Application”。令我惊讶的是，没有 Intellisense 支持。

有谁知道如何使用 C++ 启用智能感知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:58:33.347

显示列表之前的默认延迟为 500 毫秒。在首选项中，搜索“Content Assist”，您可以配置延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:29:43.280

Momentics IDE 中肯定有自动完成功能。只需按 CTRL+Enter 即可显示可用方法/类等的列表。也适用于对象属性的 QML 编辑器。

# ios - 在 iPad（不是 iPhone）上登录的未知原因

> ID：13063722
> 
> 赞同：0
> 
> 时间：2012-10-25T07:34:21.043
> 
> 标签：ios, ipad, logging

我在我的 iOS 应用程序中使用图像。

当我在 iPad 上测试我的应用程序时，Xcode 返回该日志：

> *** -[__NSCFString stringByAppendingPathExtension:]: 无法将扩展名 'png' 附加到路径 '~iPad@2x'

这是什么意思？

ps 当我在 iPhone 上测试我的应用程序时，Xcode 不会返回该日志。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:42:30.880

If you are checking for if Device is iPad and then set the image by appending "@2x" then Dont. Just use image name without '@2x'. This might solve your problem.

Like if you are setting an image for iPhone UI like

```
UIImageView * imageView = [UIImageView alloc] init];
[imageView setImage[UIImage imageNamed:@"image.png"]]; 
```

And for iPad you are doing this:

```
[imageView setImage[UIImage imageNamed:@"image@2x.png"]]; 
```

Then this might be the problem. Dont append @2x.

# django - 清理芹菜的taskmeta表

> ID：13063723
> 
> 赞同：5
> 
> 时间：2012-10-25T07:34:25.383
> 
> 标签：django, celery, django-celery

我有[Celery](http://celeryproject.org/)运行，一切正常。

Celery 默认使用一个数据库表来存储任务结果，称为`celery_taskmeta`. 这张桌子增长得非常快。我阅读了文档，但没有找到任何关于清理旧条目的提示。

是否有一个由 自动安排的任务`celerybeat`来清理这个表，还是我必须在这里配置一些东西？

**[编辑]**

这与[结果后端设置](http://docs.celeryproject.org/en/latest/configuration.html?highlight=meta#celery-result-backend)有关吗？这有点令人困惑，因为文档说，这没有默认值。但似乎这`database`是默认设置，它使用`default`普通[Django 数据库配置的配置](https://docs.djangoproject.com/en/1.4/ref/settings/#databases)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T15:30:00.090

您可以通过这种方式手动清理此表：

`from djcelery.models import TaskMeta, states TaskMeta.objects.filter(status=states.SUCCESS).delete()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-30T21:36:03.707

也许文档是在您发布问题后编写的。[http://celery.readthedocs.org/en/latest/configuration.html](http://celery.readthedocs.org/en/latest/configuration.html)的页面提供了答案：

> 内置的定期任务将在 [ CELERY_TASK_RESULT_EXPIRES 配置指令中设置的时间] 之后删除结果...默认为 1 天后过期。

对于典型的 Django 安装，您可以将后端设置为*database*。（这就是为什么您会看到存储在数据库的*celery_taskmeta*表中的结果。）此设置的配置指令如下所示：

```
CELERY_RESULT_BACKEND='djcelery.backends.database:DatabaseBackend' 
```

我检查了自己的安装，果然，有一个名为*celery.backend_cleanup的每日定期任务，它是在我安装**celery*时自动创建的（或者可能是在我安装*django-celery*时）。

要运行定期任务，我相信您必须运行*celerybeat*守护进程/服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:16:33.067

你已经阅读了 Celery 的文档。

Django-celery为您[覆盖](https://github.com/celery/django-celery/blob/master/djcelery/loaders.py#L34)结果后端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-16T17:19:59.480

如前所述，清理已经自动完成，默认情况下。您只需要使用以下查询来更新表大小：VACUUM FULL celery_taskmeta

# c - 脚本：在很多很多文件中的最后一个#include 之后插入一个额外的#include

> ID：13063725
> 
> 赞同：0
> 
> 时间：2012-10-25T07:34:42.053
> 
> 标签：c, regex, bash, sed

有那么一秒钟，我希望能够摆脱`sed`' 的`a\`命令，但是`sed`（无论如何，在我手中）并不是保持状态的粉丝（在每个 #include 之后插入）。

那么有没有办法做到这一点`sed`呢？有这样做的*聪明*方法吗？

如果这是要走的路，我会求助于编写一个常规的 Python/Ruby 脚本，但这似乎是某人可能在某个时候遇到的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:55:07.473

在应用 sed 之前，您可以使用命令 tac 逐行反转文件，然后让 sed 执行*插入*而不是追加。当然要确保 sed 只插入一次。像这样：

```
tac file | sed '1,/#include/ {/#include/i\
#include whatever
}' | tac 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:44:41.067

假设您在主程序启动之前没有任何多行注释：

```
 awk '!f && /^ *[a-zA-Z]/{print "#include<newfile.h>";f=1;}1' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:51:13.700

这可能对您有用（GNU sed）：

```
sed -i ':a;$!{N;ba};s/.*#include[^\n]*/&\n#include <new.h>/' file1 file2 fileN 
```

# c# - DataView.Rowfilter 循环中的多个过滤器

> ID：13063726
> 
> 赞同：1
> 
> 时间：2012-10-25T07:34:45.673
> 
> 标签：c#, wpf, dataview, rowfilter

```
DataView DV = DataTable.AsDataView();
for(int i=0; i<ConditonQueue.Count; i++)
{
     DV.RowFilter = ConditonQueue.ElementAt(i);
} 
```

在此循环`DV`仅针对`ConditionQueue`. 如何获得`DV`所有应用队列上的过滤条件？ `ConditonQueue.ElementAt(i)`返回一个字符串，它是 的有效表达式`RowFilter`。

在我的情况下，将所有`ConditonQueue.ElementAt(i)`内容结合起来无济于事。我想`RowFilter`每次都申请。

因为我需要在每个`RowFilter`. `AND`所有条件都无济于事。

有没有其他方法可以重新创建`DV`每次`RowFilter`循环应用的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:48:55.967

很多假设，因为您的问题不清楚。试试这个

```
DataView DV = DataTable.AsDataView();

string[] filter = new string[ConditonQueue.Count];
for(int i=0; i<ConditonQueue.Count; i++)
{
     filter[i] =  ConditonQueue.ElementAt(i).ToString();
}

DV.RowFilter = String.Join(" AND ", filter); // filter1 AND filter2 AND ... AND filterN 
```

我不喜欢您的方法，很抱歉，但我认为您必须更新 DV，以便将新过滤器应用于已过滤的视图

```
for(int i=0; i<ConditonQueue.Count; i++)
{
     DV.RowFilter = ConditonQueue.ElementAt(i);
     DV = DV.ToTable().AsDataView();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:44:30.437

RowFilter 自动应用于数据视图中的所有行。正确的用法是将队列的所有条件组合成适当的字符串表达式，并将该表达式传递给 RowFilter 属性。

还可以查看[http://www.csharp-examples.net/dataview-rowfilter/](http://www.csharp-examples.net/dataview-rowfilter/)以获取 RowFilter 语法的示例。

# jquery - bigvideo.js 循环问题

> ID：13063733
> 
> 赞同：1
> 
> 时间：2012-10-25T07:35:15.387
> 
> 标签：jquery

我们已经在一个网站上实现了这一点，使用以下代码：

```
$(function() {

    // initialize BigVideo
    var BV = new $.BigVideo({useFlashForFirefox:false});
    BV.init();
    BV.show(
        'resources/video/bg_grass.mp4',
        {altSource:'resources/video/bg_grass.ogg'});
}); 
```

问题是视频没有循环播放 - 它只是在最后停止。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T18:36:52.773

如果添加环境参数并将值设置为 true，则视频会循环播放。虽然它不播放声音。

```
// initialize BigVideo
   BV = new $.BigVideo({useFlashForFirefox:false});
   BV.init();
   BV.show('resources/video/bg_grass.mp4',
   {altSource:'resources/video/bg_grass.ogg',ambient:true});
}) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-01T10:14:13.887

万一其他人遇到这个问题，我想添加不同的解决方案。

虽然上面的一个是正确的，但它带走了声音和控制。

如果`ambient:true`您不添加`doLoop:true`，则视频将循环播放，您将保留声音和控件。

请参阅下面的完整代码；

```
$(function() {
   // initialize BigVideo
   var BV = new $.BigVideo({useFlashForFirefox:false});
   BV.init();
   BV.show('resources/video/bg_grass.mp4',
   {altSource:'resources/video/bg_grass.ogg',doLoop:true});
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-16T15:36:13.603

正如freakstyler 所提到的，传递`doLoop`选项是正确的方法。但是，我相信您必须将选项传递给`$.BigVideo()`如下所示：

```
 var opts = {
            controls: false,
            doLoop: true
        }
        BV = new $.BigVideo(opts);
        BV.init();
        BV.show('vid/cycling2.mp4',{ambient: false}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-02T18:21:18.600

此外，如果您想包含三种视频类型以获得最大的浏览器兼容性，请执行以下操作：

```
 $(function() {
    var BV = new $.BigVideo({doLoop:true});
    BV.init();

    if (Modernizr.touch) {
        BV.show('img/fallleaves.jpg');
        } else {
            BV.show([ 
            { type: "video/mp4",  src: "vid/fallleaves.mp4" },
            { type: "video/webm", src: "vid/fallleaves.webm"},
            { type: "video/ogg",  src: "vid/fallleaves.ogg"}
            ]);
        } 
```

});

# antlr - 控制令牌减少

> ID：13063734
> 
> 赞同：0
> 
> 时间：2012-10-25T07:35:17.117
> 
> 标签：antlr, grammar, antlrworks, reduce-reduce-conflict

有没有办法在运行时用 ANTLR 控制令牌的减少操作。例如，我有一个 ANTLR 语法，它看起来像：

```
s: ( a | b);
a: WORD;
b: WORD;
WORD: ('a'..'z')+ 
```

与“a”和“b”相关的确切可能值在运行时已知，即我想在运行时决定是否将 WORD 减少为“a”或“b”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:55:29.237

使用语义谓词。除非您计划向规则 a 和 b 添加操作，否则此示例不会特别有用。

```
s:
   {someBoolFunction();}? a
 | b
;
a: WORD;
b: WORD;
WORD: ('a'..'z')+ 
```

# sparql - 通过 Jena 命令行进行的几个 SPARQL 查询

> ID：13063735
> 
> 赞同：2
> 
> 时间：2012-10-25T07:35:20.713
> 
> 标签：sparql, jena

是否可以将多个 SPARQL 查询放入一个文件（如 SQL SELECTs）并将其用于 tdbquery.bat Jena 命令行工具？

```
tdbquery.bat --loc=../data_dir --query=several_queries.sparql 
```

我可以用 Java 代码做到这一点，但我可以通过 tdbquery 做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:39:32.137

不，您不能使用单个文件运行多个查询。

但是您可以编写自己的`.bat`文件，该文件只需运行`tdbquery`多次，`.sparql`每次调用都有一个单独的文件。这可能比破解 Java 更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:42:54.227

另一种方法是在后台运行 Fuseki 并使用 SOH 命令行工具进行查询。（或将查询发送到服务器的程序，如 curl 或 wget。）

# php - 如何以毫米为单位设置图像尺寸

> ID：13063740
> 
> 赞同：2
> 
> 时间：2012-10-25T07:35:32.373
> 
> 标签：php, css

如果我有一个尺寸为 190x380 像素的图像。现在，如果我想将此图像设为宽 58 毫米和高 115 毫米，并且当我打印时，它将与宽 58 毫米和高 115 毫米相同。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:43:52.063

你不能不。

屏幕/打印分辨率是一个动态因素，取决于品牌和尺寸。Mac 曾经有 72 DPI，Windows 96 DPI。大多数旧的激光打印机都是 300 DPI

所以：如果您的图像需要为 58 毫米（2.7 英寸），您在 Mac 上获得 72 x 2.7 = 194 像素，在 Windows 机器上获得 259 像素。但是您需要在旧的激光打印机上使用 810 像素。

但是在过去，现在每台设备都有自己特定的分辨率，因此您将无法计算出每台设备的正确尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:44:27.463

您*可以*通过调整图像的 DPI（即每英寸点数）来获得您想要的结果。对于图像在屏幕上的显示方式，DPI 没有任何意义，但在打印时，它就会发挥作用。

您可以在此处找到有关它的更大讨论：[http](http://www.webdesignerdepot.com/2010/02/the-myth-of-dpi/) ://www.webdesignerdepot.com/2010/02/the-myth-of-dpi/ 。文章和评论都值得一读。

# matlab - MATLAB中的矩阵尺寸错误

> ID：13063743
> 
> 赞同：1
> 
> 时间：2012-10-25T07:35:47.603
> 
> 标签：matlab, parameters

已经晚了 - 我找不到我的错误在我的`error`函数中的位置。我正在尝试参数估计。

```
function value = lv(t,y,p)
    %Lotka-Volterra Model
    %p(1)=a, p(2) = b, p(3) = c, p(4) = r.
    value = [-p(1)*y(1)-p(2)*y(1)*y(2);-p(4)*y(2)+p(3)*y(1)*y(2)];
end

function error = lverr(p)
    %LVERR: Function defining error function for
    %example with Lotka-Volterra equations.
    H = [30.0 47.2 70.2 77.4 36.3 20.6 18.1 21.4 22 25.4 27.1];
    L = [4 6.1 9.8 35.2 59.4 41.7 19 13 8.3 9.1 7.4];

    [t,y] = ode45(@lv,[0 10],[H(1);L(1)],[],p);
    value = (y(:,1)-H').^2+(y(:,2)-L').^2;
    %Primes transpose data vectors H and L
    error = sum(value);
end 
```

我用来执行代码的主文件：

```
clc; 
clear all;
format long;

H = [30.0 47.2 70.2 77.4 36.3 20.6 18.1 21.4 22 25.4 27.1];
L = [4 6.1 9.8 35.2 59.4 41.7 19 13 8.3 9.1 7.4];
guess = [0.47;0.024;0.023;0.76];
[p,error] = fminsearch(@lverr,guess);
[t,y]=ode45(@lv,[0 10],[30.0; 4.0],[],p);
subplot(2,1,1)
plot(t,y(:,1))
subplot(2,1,2)
plot(t,y(:,2)) 
```

这是错误：

```
??? Error using ==> minus
Matrix dimensions must agree.

Error in ==> lverr at 8
    value = (y(:,1)-H').^2+(y(:,2)-L').^2; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:47:00.160

积分器`ode45`是一种自适应步长、可变阶 Runge-Kutta 方法。这意味着每一步使用的步长取决于该点的解决方案的行为。这意味着输出中的元素数量在`[t,y]`每次运行中会有很大差异，并且永远不应依赖。

在`lverr(p)`中，您想要获取此类积分的结果与某个固定长度向量之间的差异。这几乎总是会失败。你可以

1.  使用固定步长积分器（不推荐）
2.  强制`ode45`仅在指定时间生成输出（调整您`tspan`的元素数量为`H`）
3.  以某种物理意义对向量`H`(and ) 进行插值。`L`

顺便说一句——请不要`error`用作变量名；它也是一个内置函数，可能会给您和 Matlab 解释器造成混淆。

# java - 如何显示启用 Java Kerberos 的应用程序使用的票证

> ID：13063751
> 
> 赞同：1
> 
> 时间：2012-10-25T07:36:03.317
> 
> 标签：java, kerberos

我有一个在 Windows 下的 Tomcat 中运行的 Java 应用程序，它提供 Kerberos 身份验证并使用 JVM GSS-API 实现。

我想看看应用程序获得的票证，但（本机）Windows klist 工具和 Java klist 工具似乎没有显示它们。

运行应用程序的用户在其主目录中没有 krb5cc* 文件，所以我被卡住了。

有没有办法看票？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:17:04.923

Java 不会将服务票证写回本机凭证缓存，无论是 Windows 还是 Unix。它仅将票证存储在私有主题中。

# android - 我的三星 Galaxy 平板电脑中未显示菜单图标

> ID：13063754
> 
> 赞同：2
> 
> 时间：2012-10-25T07:36:16.643
> 
> 标签：android, android-layout

我正在尝试在我的 Galaxy 平板电脑中执行一个带有菜单的应用程序。这是创建菜单的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
} 
```

这是菜单布局：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_about"
        android:title="@string/menu_about"
        android:icon="@drawable/ic_about"
    />
    <item android:id="@+id/menu_limt_time_rocord"
        android:title="@string/menu_limt_time_rocord"
        android:icon="@drawable/ic_menu_timer"
    />
</menu> 
```

在我的手机中，通过按“普通”菜单按钮显示菜单，而在我的 Galaxy 平板电脑中，菜单按钮根本不显示，我根本无法打开菜单。

**如何在平板电脑中显示菜单按钮？**

提前致谢

科比

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:49:27.077

你的菜单和一切都是正确的。做一件事，从清单文件中删除 targetSDKVersion 并仅使用`<uses-sdk android:minSdkVersion="8" />`.

我认为这是唯一的问题。现在从 3.0 开始，您可以看到菜单按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:42:42.903

As per the Documentation described [here](http://developer.android.com/guide/topics/ui/menus.html#options-menu) In android Android 3.x function **onCreateOptionsMenu()** is called when the activity starts to populate ActionBar, not when user touches the Menu button for the first time

# json - 带有 json 数据的 Titanium SDK

> ID：13063756
> 
> 赞同：-2
> 
> 时间：2012-10-25T07:36:27.130
> 
> 标签：json

我想用 JSON 数据制作一个基于 Titanium SDK 的应用程序。请为我提供一个可以帮助我构建应用程序的示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:45:20.977

```
var remoteJSON = {
  "text" : "look at me I put json on the iPads"
}

function doStuffWithData(data) {
    var label = Ti.UI.createLabel({
        text : data.text,
        font : {
            fontSize : 24
        }
    });
    win.add(label);
};
var win = Ti.UI.createWindow();
win.open();
//do a network request, get some JSON data back, see 
//http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Network.HTTPClient
//also, check out https://github.com/appcelerator/KitchenSink
doStuffWithData(remoteJSON); 
```

# php - php自动加载性能

> ID：13063757
> 
> 赞同：1
> 
> 时间：2012-10-25T07:36:35.087
> 
> 标签：php, xdebug

即使使用

```
spl_register_autoload( function( $class )
{
    $file = '/path/to/lib/' . $class;
    require_once( $file );
    return class_exists( $class, false );
} ); 
```

xdebug 显示此关闭的总自身成本 (19%) 略低于其包含成本 (25%)。它比 PDO 的 execute() (2%) 高 10 倍。

为什么需要这么多时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:40:18.107

如果你使用自动加载器，那么你不应该使用 _once 函数，因为它们很慢。使用 require($file) （在我看来，这在您的代码中是错误的，因为您需要不是文件的 $class）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:28:53.607

似乎 xdebug 将包含文件的代码作为闭包的代码。这就是为什么会有这样的结果。我在修改包含文件时发现了它。当我使用 APC 时，执行时间增加了。它影响了关闭的自我成本。

# ios - MonoTouch UITableViewController 与 xib

> ID：13063760
> 
> 赞同：0
> 
> 时间：2012-10-25T07:36:42.303
> 
> 标签：ios, xamarin.ios, uitableview

在 MonoTouch 中，我有一个名为“MyTableViewController”的实用程序类，它派生自 UITableViewController 并实现了一堆有用的 tableview 控制相关的东西。如果我在代码中实例化它，它工作正常，但我现在想制作一个从 xib 加载的 tableview 控制器 - 例如：它在底部有一个工具栏。

在 ObjectiveC 中，我只需将 Xib 中的 tableview 实例与 UITableViewController 的`tableView`属性连接起来。

然而，在 MonoTouch 中，这个属性没有被标记为一个插座，也没有出现在 XCode 的界面构建器中，所以我无法连接它，导致 ObjectiveC 出现关于 nib 正在加载但“但没有得到 UITableView”的异常”。

有什么方法可以在我的派生控制器类上声明一个可以从 xib 绑定​​的插座？其他选项或解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:10:37.087

想通了... tableView 属性不需要连接到 xib 中。而 xib 中的 tableView 应该连接到 File Owners 视图（即：控制器）。

# r - 如何从 regsubsets 中获取 LM 对象

> ID：13063762
> 
> 赞同：8
> 
> 时间：2012-10-25T07:36:54.703
> 
> 标签：r, statistics, glm

假设我们想使用收入、年轻人、城市和地区作为回归变量来模拟美国公立学校的支出（教育）。欲了解更多信息：`?Anscombe` 模型：教育〜（收入+年轻+城市）*地区

```
library(car)
library(leaps)

#Loading Data
data(Anscombe)
data(state)
stateinfo <- data.frame(region=state.region,row.names=state.abb)
datamodel <- data.frame(merge(stateinfo,Anscombe,by="row.names"),row.names=1)
head(datamodel)
   region education income young urban
AK   West       372   4146 439.7   484
AL  South       112   2337 362.2   584
AR  South       134   2322 351.9   500
AZ   West       207   3027 387.5   796
CA   West       273   3968 348.4   909
CO   West       192   3340 358.1   785

#Saturated Model
MOD1 <- lm(education~(.-region)*region,datamodel)
summary(MOD1)
#anova(MOD1)

#Look for the "best" model
MOD1.subset <- regsubsets(education~(.-region)*region,datamodel,nvmax=15)
plot(MOD1.subset) 
```

具有 3 个变量和 1 个交互作用（教育~收入+年轻+城市+RegionWest:young）的模型在 BIC 方面似乎是最好的。

```
coef(MOD1.subset,4) 
```

问题是，*如何在不手动编写公式的情况下从该模型中获取 ML 对象*？

在发布之前，我发现包 HH 具有一些有趣的 regsubsets 对象功能，例如`summaryHH`和`lm.regsubsets`。

```
library(HH)
summaryHH(MOD1.subset)[4,]
lm.regsubsets(MOD1.subset,4) 
```

`lm.regsubsets`做我想要的，但我认为解析交互有一些问题，还有*其他选择*吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:48:18.760

我认为这是不可能的，至少在没有对系数名称进行大量处理的情况下是不可能的。我在那里完成了约 95% 的工作，但在交互项上跌倒了：

```
coefs <- coef(MOD1s, 4)
nams <- names(coefs)
nams <- nams[!nams %in% "(Intercept)"]
response <- as.character(as.formula(MOD1s$call[[2]])[[2]])
form <- as.formula(paste(response, paste(nams, collapse = " + "), sep = " ~ "))
df <- get(as.character(MOD1s$call[[3]]))
mod <- lm(form, data = df)

> mod <- lm(form, data = df)
Error in eval(expr, envir, enclos) : object 'regionWest' not found 
```

这是有道理的，并且源于用于系数的名称：

```
> nams
[1] "income"           "young"            "urban"           
[4] "regionWest:young" 
```

很可能通过一些努力你可以做到：

1.  `:`用on分割任何名称`:`，
2.  对于每一边，查看是否与数据框中的变量部分匹配`df`
3.  如果有匹配，检查不匹配的位是否与变量的级别匹配，`df`如果需要，强制转换为一个因子，
4.  如果与级别匹配，则将交互的那一侧替换为变量名称，
5.  如果没有匹配，查看是否有其他部分匹配，如果没有则失败

等等。对于 [so] 发布来说，这涉及到很多编程，但是如果您能够应对挑战，那么上面的内容应该可以为您提供一些起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T20:40:16.527

很抱歉把这个问题重新提出来，但我自己也在寻找这个问题的答案。

使用的特定标准（例如 AIC、BIC）不会影响 regsubsets 的结果，因为该函数仅与相同大​​小的模型进行比较，而 AIC 与 BIC 的区别仅在于分配给模型大小的“惩罚”。但是，如果您有兴趣比较不同尺寸的模型，可能更喜欢使用 AIC 而不是 BIC。

我不认为 regsubsets 有能力绘制 AIC。但是，可以使用以下方法轻松计算 AIC：

```
aic <-summary(leaps2)$bic + (2 - log(n))*(p+1) 
```

其中 n 是样本数，p 是模型中的参数数（参见[http://stat.wharton.upenn.edu/~khyuns/stat431/ModelSelection.pdf的最后一页](http://stat.wharton.upenn.edu/~khyuns/stat431/ModelSelection.pdf)有关 aic 和 bic 的定义，的最后一页）。

我试图欺骗 regsubsets 来绘制新的 aic 值，但没有成功。但是，您可以通过查看 aic 值的矩阵轻松比较不同大小的模型，或者使用“order(aic)”对它们进行排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T04:05:05.953

我想到了。所以这里是代码。

```
fit <- regsubsets(y~x,data=train)
b <- data[c(predictor columns)]
best <- order(summary(fit)$adjr2,decreasing=T)[1]
a <- as.integer(summary(fit)$which[best,][1:ncol(b)+1]
new_data <- data.frame(t( t(b) * a))
fit_lm <- lm(y~x,data=new_data) 
```

您将列乘以布尔值。如果您的输入始终为 0，则它不会为模型做任何事情。没有解释差异。如果您愿意，您可以通过将“最佳”变量中的最后一个索引替换为 for 循环中的“i”来循环。

警告：您的列必须为您的训练/交叉验证/测试数据排队。如果您的训练集的第一个索引是 Gender，而您的交叉验证集的第一个索引是 Age，那么您会将错误的列归零。

旁注：您可以看到我选择了关于调整后的 R^2 值的最佳模型。随意改变它。

希望我有所帮助。干杯。

# actionscript-3 - 调解员未注册

> ID：13063767
> 
> 赞同：0
> 
> 时间：2012-10-25T07:37:20.283
> 
> 标签：actionscript-3, flash-cs5, robotlegs

我对观点和调解人有一些问题。我有名为 Shop 和他的调解员的视图。

我在我的上下文中映射它：代码：

```
mediatorMap.mapView(Shop, ShopMediator); 
```

然后我创建 Shop 对象并添加到阶段，就像用户在游戏中打开商店一样。问题是在应用程序中根本没有调用中介。

有谁知道是什么原因？

下面粘贴了我的一段代码。

上下文初始化：代码：

```
override public function startup():void
{
....
mediatorMap.mapView(Shop, ShopMediator);
...
mediatorMap.mapView(GameFace, GameFaceMediator);
...
} 
```

商店对象在 GameFace 中创建：

代码：

```
public function initShop(aX:Array):void
    {
        shop = new Shop();
        _aX = aX;

    } 
```

并在玩家在游戏中开店时添加到场景中：

代码：

```
public function openShop(tab:uint = 100):void
{
    shop = new Shop();
    addChild(shop);
    shop.init(_aX);
    shop.x = 396;
    shop.y = 267;
} 
```

当然 GameFace 的对象被添加到显示列表中。有人知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:29:25.260

如果您的应用程序设置与我的类似，您可能实际上并没有创建/激活中介。只需将`mediatorMap`组件映射到他们需要的中介。

尝试将以下代码添加到 and 的构造函数`Shop`中`GameFace`：

```
new LazyMediatorActivator(this); 
```

这应该确保您的调解器在`Shop`和`GameFace`上台时被激活。激活器位于包装中`robotlegs.utilities.lazy`。

如果这不起作用，您可能需要在到达阶段`mediatorMap.createMediator(shop)`时手动调用`shop`，但内置的惰性选项更可取。

# c# - 我应该在哪里使用 Unity 容器在控制台应用程序中注册和解析我的类型？

> ID：13063768
> 
> 赞同：3
> 
> 时间：2012-10-25T07:37:22.310
> 
> 标签：c#, .net, dependency-injection, unity-container, enterprise-library

我是 Unity DI Container 的初学者。

我想将它与一个简单的控制台应用程序一起使用。

我将使用“代码作为配置”

我应该在哪里调用注册和解析摘要的方法？从 Main 方法本身还是有更好、更优雅的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:49:56.860

看看[Composition Roots](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的概念。对于控制台应用程序，该`Main()`方法正是正确的地方。

对于 Unity，您可以将配置捆绑在派生自[UnityContainerExtension](http://goo.gl/00cZ5)的类中，并将注册代码放在`Initialize()`方法中。

然后将您的扩展添加到容器中。

# javascript - Javascript全局变量仅在匿名函数内更新

> ID：13063771
> 
> 赞同：0
> 
> 时间：2012-10-25T07:37:25.717
> 
> 标签：javascript, google-maps-api-3

请给我一些关于这个javascript问题的线索。我有一个全局变量标记。并尝试将每个标记推向标记。但问题是，在推送到标记之后。我试图提醒函数内部和外部函数的值。结果完全不同。函数内部的标记给了我标记数组，但外部的标记保持为空。为什么我得到不同的标记全局变量值？

这是我的代码片段：

```
for (var i = 0; i < netotal; i++) {
    setTimeout(function () {
        marker = new google.maps.Marker({
            position: pos[iterator],
            map: map,
            draggable: false,
            animation: google.maps.Animation.DROP,
            icon: neicon  
        });
        iterator++;
        markers.push(marker);console.log(markers);
    }, i * 50);  
}

alert (markers); 
```

感谢您的帮助或线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:39:07.353

取决于范围，访问全局标记使用`window.markers`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:55:05.630

您正在推送`markers`一个名为 using 的函数`setTimeout`，因此推送要等到一段时间后才会发生。但是您会`alert(markers)`在任何超时发生之前立即致电。所以那个时候数组是空的。

更新：

要查看 的最终内容`markers`，您需要另一个`setTimeout`：

```
setTimeout(function() { alert(markers); }, netotal*50); 
```

# mysql - 使用 INNER JOIN 或 EXISTS 在 m2m 关系中查找属于多个是否更好？

> ID：13063772
> 
> 赞同：24
> 
> 时间：2012-10-25T07:37:25.940
> 
> 标签：mysql, sql, performance, many-to-many

给定 m2m 关系：**items-categories**我有三个表：

*   **物品**，
*   **类别**和
*   **items_categories**包含对两者的引用

我想找到属于**所有给定**类别集的项目：

```
Find Item 
belonging to a category in [1,3,6] 
and belonging to a category in [7,8,4] 
and belonging to a category in [12,66,42]
and ... 
```

在 mySQL 中，我可以想到两种方法来完成此任务。

**选项 A：内部连接：**

```
SELECT id from items 
INNER JOIN category c1 ON (item.id = c1.item_id)
INNER JOIN category c2 ON (item.id = c2.item_id)
INNER JOIN category c3 ON (item.id = c3.item_id)
...
WHERE
c1.category_id IN [1,3,6] AND
c2.category_id IN [7,8,4] AND
c3.category_id IN [12,66,42] AND
...; 
```

**选项 B：存在：**

```
SELECT id from items
WHERE
EXISTS(SELECT category_id FROM category WHERE category.item_id = id AND category_id in [1,3,6] AND
EXISTS(SELECT category_id FROM category WHERE category.item_id = id AND category_id in [7,8,4] AND
EXISTS(SELECT category_id FROM category WHERE category.item_id = id AND category_id in [12,66,42] AND
...; 
```

两种选择都有效。问题是：**对于大型项目表，哪个是最快/最优化的？**还是缺少 OPTION CI？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T07:40:42.517

**选项 A**

`JOIN`比 有一个优势`EXIST`，因为它会更有效地使用索引，尤其是在大表的情况下

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-25T07:51:32.747

`JOIN`一般来说， A更有效。

但是，需要注意的一件事是连接可能会在输出中产生重复的行。例如，如果项目 id 在类别 1 和 3 中，第一个`JOIN`将导致 id 为 123 的两行。如果项目 id 999 在类别 1、3、7、8、12 和 66 中，您将获得*八*行您的结果中有 999 (2*2*2)。

重复行是您需要注意和处理的事情。在这种情况下，您可以只使用`select distinct id...`. 但是，通过复杂的查询消除重复项可能会变得更加复杂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-28T15:53:46.383

```
 select distinct `user_posts_id` from `user_posts_boxes`
     where `user_id` = 5 
     and 
     exists (select * from `box` where `user_posts_boxes`.`box_id` = `box`.`id` 
     and `status` in ("A","F"))
     order by `user_posts_id` desc limit 200;

 select distinct `user_posts_id` from `user_posts_boxes`
 INNER JOIN box on box.id = `user_posts_boxes`.`box_id` and box.`status` in ("A","F")
 and box.user_id = 5
 order by `user_posts_id` desc limit 200 
```

我尝试了这两个查询，但上面的查询对我来说工作得更快。两个表都有大数据集。几乎“user_posts_boxes”有 400 万个，boxes 是 150 万个。

第一次查询花费 = 0.147 毫秒 第二次查询几乎 = 0.5 到 0.9 毫秒

但是我的数据库表是 inno db 并且也应用了物理关系。

所以我应该选择存在，但这也取决于你的数据库结构。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T07:43:13.910

您在**Option A**中使用 Join ，在**Option B中使用**[子查询](http://en.wikipedia.org/wiki/Subquery#Subqueries)。区别在于：

 **在大多数情况下，JOIN 比子查询快，而且子查询更快的情况很少见。

在 JOIN 中，RDBMS 可以创建一个更适合您的查询的执行计划，并且可以预测应该加载哪些数据以进行处理并节省时间，这与子查询不同，子查询将运行所有查询并加载所有数据以进行处理.

子查询的好处是它们比 JOIN 更具可读性：这就是大多数新 SQL 人更喜欢它们的原因；这是简单的方法；但是在性能方面，JOINS 在大多数情况下都更好，即使它们也不难阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T06:46:21.273

另外，请从 Mysql 文档中阅读[此](https://dev.mysql.com/doc/refman/8.0/en/semijoins.html)内容，该文档讨论了这一点以及以前版本中的**新更改**以及 MySql 的实际执行方式`exists`。

> 如果子查询满足上述条件，MySQL 会将其转换为半连接（或者，在 MySQL 8.0.17 或更高版本中，如果适用，则为反连接）并从这些策略中做出基于成本的选择：
> 
> 将子查询转换为联接，或使用表拉出并将查询作为子查询表和外部表之间的内部联接运行。表拉出将表从子查询拉出到外部查询。
> 
> ...**

# java - 在 servlet 中上传文件

> ID：13063773
> 
> 赞同：0
> 
> 时间：2012-10-25T07:37:27.980
> 
> 标签：java, servlets, file-upload, glassfish

我需要将`cad`文件存储在我的服务器上，但无法上传。我试图让这个工作几个小时，但我就是做不到。自动取款机我有这个。这给了我一个错误

*随机数*.temp 不存在`( java.io.FileNotFoundException: /home/nick/.netbeans/7.1.2/config/GF3_1/domain1/generated/jsp/lrt/upload_700679fb_13a96c78523__7ffb_00000006.tmp (No such file or directory )`

```
package Admin;

import java.io.IOexception;
import java.io.InputStream;
import java.io.PrintWriter;
import java.util.Collection;
import javax.servlet.ServletException;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.Part;

@WebServlet(name = "UploadServlet", urlPatterns = {"/UploadServlet"})
@MultipartConfig
public class UploadServlet extends HttpServlet {

    @Override
     protected void doPost(HttpServletRequest request, 
       HttpServletResponse responst) throws ServletException, IOException {
      Collection<Part> parts = request.getParts();
      if (parts.size() != 3) {
         //can write error page saying all details are not entered
      }
       Part filePart = request.getPart("cad");
       InputStream sInputStream = filePart.getInputStream();
       //read imageInputStream
       filePart.write(filePart.getName());
       //Read Name, String Type 
       Part namePart = request.getPart("cad");
       if(namePart.getSize() > 20){
           //write name cannot exceed 20 chars
       }
       //use nameInputStream if required        
       InputStream nameInputStream = namePart.getInputStream();
       //name , String type can also obtained using Request parameter 
       String nameParameter = request.getParameter("name");
       //Similarly can read age properties
       Part agePart = request.getPart("age");
       int ageParameter = Integer.parseInt(request.getParameter("age"));
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:34:04.110

找不到代表上传文件的临时文件。

该路径表明它存储在 Netbeans 项目文件夹中的 Glassfish 工作文件夹中。也许 Netbeans 内部正在进行一些激进的清理/热部署，并且临时文件被扫描得太早了？或者也许只是写权限不足？这取决于抛出异常的方式和位置的上下文 - 从您的问题中不清楚。

首先，我建议告诉`@MultipartConfig`将临时文件存储在一个不同的、更永久和可写的[location](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/MultipartConfig.html#location%28%29)中。例如，

```
@MultipartConfig(location="/var/webapp/temp") 
```

# ruby-on-rails-3 - 安装 Phusion 乘客时出错

> ID：13063778
> 
> 赞同：0
> 
> 时间：2012-10-25T07:37:42.170
> 
> 标签：ruby-on-rails-3, nginx, rvm, passenger

我一直在尝试在托管 rails 3 应用程序的 Centos VPS 上安装 Phusion Passenger，但我不断收到以下错误：

```
Installing Phusion Passenger Standalone...
[********************************             ] Preparing Nginx... \           
checking for OS
 + Linux 2.6.18-238.12.1.el5xen x86_64
checking for C compiler ... found but is not working

./configure: error: C compiler gcc is not found 
```

我已按照[此处](https://stackoverflow.com/questions/12770501/c-compiler-gcc-not-found-while-installing-passenger-and-nginx/12998464#12998464)的所有说明进行操作，但似乎没有任何区别。我尝试过的其他事情是下载 nginx-1.2.3 源并使用不同的源目录手动编译它们，它们可以正确编译和安装。但是当我尝试从我的 Rails 应用程序运行乘客启动时，它会再次触发安装。运行 nginx -v 确实显示它已安装。任何帮助，将不胜感激 ！我正在运行 Ruby 1.9.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:52:12.153

显然`gcc`缺少编译器。您可以通过键入以下内容在控制台中检查它：

```
$ which gcc
/usr/bin/gcc  # expected response 
```

如果您正在运行 Debian/Ubuntu，这应该可以解决它：

```
$ sudo apt-get install gcc make autoconf libc-dev 
```

在 Centos/RedHat/Fedora 上这应该可以工作：

```
$ sudo yum install gcc make autoconf 
```

# java - java中如何使用IOUtils包在jsp中显示多张图片？

> ID：13063787
> 
> 赞同：0
> 
> 时间：2012-10-25T07:38:13.240
> 
> 标签：java, mysql, jsp, spring-mvc, imageview

我通过使用OutputStream.So在jsp中获取一个图像，因此切换到IOUtils，因为想要在Jsp中显示来自DB的所有图像但是我（以二进制格式获取所有图像我需要在图像中显示它）请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:19:06.460

JSP 是视图层的一部分，因此您不应在其中插入任何 Java 代码。只有带有 JSP 标签的 HTML。我建议修改您的 JSP 页面并使用`img`标签来显示图像。要获得这些图像，您需要编写单独的 servlet 来提供图像。

请参阅此处的示例：http: [//balusc.blogspot.com/2007/07/fileservlet.html](http://balusc.blogspot.com/2007/07/fileservlet.html)

# f# - Windows 应用商店应用程序和 F#

> ID：13063792
> 
> 赞同：5
> 
> 时间：2012-10-25T07:38:30.103
> 
> 标签：f#, windows-8, windows-runtime, windows-store-apps

我正在尝试使用 F# 创建一个可移植库以与 Windows 应用商店应用程序一起使用。我用一个类创建了一个 fs 文件：

```
module FunctionalRT

open System.Net
open System.IO

type WebHelper =

    static member DownloadStringAsync (url:string) = async {
        let req = HttpWebRequest.Create(url)
        use! resp = req.AsyncGetResponse()
        use stream = resp.GetResponseStream()
        let reader = new StreamReader(stream) 
        let s = reader.ReadToEnd()
        return s
    } 
```

我在我的 Windows Store 应用程序中引用了这个库，没有任何问题。但问题是，我既不能访问`FunctionalRT`模块，也不能访问`WebHelper`类。当我编写`using FunctionalRT`或尝试使用`FunctionalRT.WebHelper.FunctionalRT`时，编译器抱怨它不知道它。可能是什么问题？

**编辑：** 经过几次构建和清理后，我得到了

```
The type 'Microsoft.FSharp.Control.FSharpAsync`1<T0>' is defined in an assembly that is not referenced. You must add a reference to assembly 'FSharp.Core, Version=2.3.5.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'.  C:\Users\Igor\Documents\Visual Studio 2012\Projects\App3\App3\GroupedItemsPage.xaml.cs  46  13  App3 
```

**编辑：**

添加引用`C:\Program Files (x86)\MSBuild\..\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\.NETPortable\FSharp.Core.dll`解决了上面的错误信息，但是还有一个

```
Cannot await 'Microsoft.FSharp.Control.FSharpAsync<string>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:42:49.017

您必须在您的 Windows 应用商店应用程序中引用此库才能使其工作：

> C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime.NETPortable\FSharp.Core.dll

关于该 FSharpAsync 类，请参阅此线程：
[从 C# 引用异步 F# 数据类型](https://stackoverflow.com/questions/6811072/referencing-asynchronous-f-datatype-from-c-sharp)

您可以使用 FSharpAsync 类型的静态方法来等待返回的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:36:24.130

如果您从 C# 调用此代码，它可能会像这样更好地集成：

```
static member DownloadStringAsync (url:string) = async {
    let req = HttpWebRequest.Create(url)
    use! resp = req.AsyncGetResponse()
    use stream = resp.GetResponseStream()
    let reader = new StreamReader(stream) 
    let s = reader.ReadToEnd()
    return s
} |> Async.StartAsTask 
```

然后您的 C# 项目将不需要引用 FSharp.Core，并且您可以使用标准 C#`await`关键字，就像调用 C# 异步代码一样。

# eclipse - 无头 Buckminster RCP 产品生成失败

> ID：13063798
> 
> 赞同：2
> 
> 时间：2012-10-25T07:38:45.850
> 
> 标签：eclipse, rcp, product, buckminster

我尝试使用 Buckminster 建立一个无头 RCP 构建。

我的项目存在大约 10 个子项目。产品定义基于功能并且位于插件中。我有两个特点。一个功能包含所有插件项目，另一个功能包含其他一些插件。

到目前为止，我没有自动化任何东西。我刚刚遵循 RalfEberts 教程并创建了一个功能，其中包括所有必需的插件，其中包括我的两个功能作为包含功能。我的目标定义是我的本地 eclipse 文件夹，其中包含所有可用的插件。

我使用 Buckminster-Eclipse 插件创建了 site.p2。之后，我尝试在提示符中使用 director 调用生成 exe 等。

问题是，生成的数据不等于 Eclipse 产品导出向导生成的数据。这就是为什么我的应用程序在几秒钟后启动并崩溃的原因。

例如，我有两个 exe 文件（我的应用程序 exe 和一个 eclipsec.exe）。也没有 features 文件夹，其中应该包括我的两个功能和 org.eclipse.rcp 功能。配置和 p2 文件夹内容也不同。

有人知道问题出在哪里吗？使用 Eclipse 中的产品向导导出非常完美。谢谢！

**编辑**

好的，现在我的应用程序不会崩溃，我尝试将 Buckminster 集成到 Jenkins 中。我创建了一个 product.ant、cspec、cquery 和 rmap 文件。我的目标定义 rcp.target 包含我的库的路径。实际上 Buckminster 会找到除 org.eclipse.rcp 之外的所有组件。Org.eclipse.rcp 是一个 jar 文件，位于我的 lib 中，但他没有找到。我尝试了一些严重的事情，比如将 org.eclipse.rcp 放到另一个地方并更改我的 rmap，但我总是得到相同的结果。

这是詹金斯的输出：

```
 INFO:  importtargetdefinition '-A' '/D:/Jenkins/workspace/Buckminster/de.tdb.build/rcp.target'

 INFO:  import '/D:/Jenkins/workspace/Buckminster/de.tdb.build/buckmister.cquery'

 ERROR   [0011] : No suitable provider for component org.eclipse.rcp:eclipse.feature was found in resourceMap file:/D:/Jenkins/workspace/Buckminster/de.tdb.build/site.rmap

 ERROR   [0011] : No suitable provider for component org.eclipse.rcp:eclipse.feature was found in searchPath resources

 ERROR   [0011] : Resolution attempt ended with exception: Provider local(file:///D:/Jenkins/workspace/Buckminster/org.eclipse.rcp/): Missing CSpec source required by component type eclipse.feature

 ERROR   Provider local(file:///D:/Jenkins/workspace/Buckminster/org.eclipse.rcp/): Missing CSpec source required by component type eclipse.feature

 ERROR   [0011] : Resolution attempt ended with exception: Provider local(file:///D:/Jenkins/workspace/Buckminster/de.tdb.dependencies/lib/org.eclipse.rcp/): Missing CSpec source required by component type eclipse.feature

 ERROR   Provider local(file:///D:/Jenkins/workspace/Buckminster/de.tdb.dependencies/lib/org.eclipse.rcp/): Missing CSpec source required by component type eclipse.feature

 ERROR   [0011] : Resolution attempt ended with exception: Provider local(file:///D:/Jenkins/workspace/Buckminster/de.tdb.dependencies/lib/plugins/org.eclipse.rcp/): Missing CSpec source required by component type eclipse.feature

 ERROR   Provider local(file:///D:/Jenkins/workspace/Buckminster/de.tdb.dependencies/lib/plugins/org.eclipse.rcp/): Missing CSpec source required by component type eclipse.feature 
```

# javascript - 查找嵌套的 div 标签

> ID：13063801
> 
> 赞同：3
> 
> 时间：2012-10-25T07:39:12.140
> 
> 标签：javascript, html, dom

我有两个 div 标签，如下所示：

```
<body>
   <div id="divParent">
      <div id="divChild"></div>
   </div>
</body> 
```

如何使用 JavaScript 获取 divChild？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:43:14.403

用这个：

```
divChild = document.getElementById("divChild"); 
```

或者如果您没有孩子 ID：

```
divChild = document.getElementById("divParent").children[0]; 
```

编辑：

你可以隐藏或显示孩子：

```
divChild.style.display = "none";//hide
divChild.style.display = "block";//show 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T07:41:01.537

```
 var myDiv = document.getElementById('divChild'); 
```

然后你可以得到这样的内容

```
 var content = myDiv.innerHTML; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:40:47.277

`var el = document.getElementById("divChild")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T07:41:04.997

```
var div = document.getElementById("divChild"); 
```

# php - 不将我在 android 中的编辑文本值传递给 PHP 变量

> ID：13063806
> 
> 赞同：3
> 
> 时间：2012-10-25T07:39:26.653
> 
> 标签：php, android

我能够连接到我的 MySQL 数据库，但问题是。我的 android 没有使用此代码将编辑文本值传递给 PHP。

```
public class MySQL extends Activity {

    EditText inputName;
     private static String  url_create_product = "http://atlantis-us.com/phpFile.php?";

     JSONParser jsonParser = new JSONParser();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_sql);
        inputName = (EditText) findViewById(R.id.txt1);

       ((Button) findViewById(R.id.btnsend)).setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            new CreateNewProduct().execute();
        }
    });

    }

    class CreateNewProduct extends AsyncTask<String, String, String> {

        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            String name = inputName.getText().toString();
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            return null;
        }

    }

}

this is my PHP codes

<?php

    $DB_HostName = "localhost";
    $DB_Name = "_atlantisdb";
    $DB_User = "atlantis_frux";
    $DB_Pass = "frux2012";
    $DB_Table = "testDB";

    if (isset ($_GET["name"]))
        $name = $_GET["name"];
    else
        $name = "Ghalia";

    $con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die(mysql_error()); 
    mysql_select_db($DB_Name,$con) or die(mysql_error()); 

    $sql = "insert into $DB_Table (name) values('$name');";
    $res = mysql_query($sql,$con) or die(mysql_error());

    mysql_close($con);
    if ($res) {
        echo "success";
    }else{
        echo "faild";
    }// end else

?> 
```

任何人都可以追踪我的代码的磨损情况吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:45:48.180

您正在使用`POST`android 代码中的方法发送编辑文本值，并使用`GET`php 代码中的方法获取值。

```
chage $_GET["name"] to $_POST["name"] or $_REQUEST['name'] 
```

# java - 包含两个变量的列表

> ID：13063808
> 
> 赞同：0
> 
> 时间：2012-10-25T07:39:28.520
> 
> 标签：java, list, loops

我想建立一个地图算法并做以下事情：

首先，在地图上创建所有点。

已经给出了哪些点是连接的以及它们之间的长度（作为整数）。

现在的问题是找到它们之间的最短连接。

因此，我要做的是为每个点创建一个对象，其中包含该特定点连接到的所有点的列表以及从原始点到该点的长度。

一个例子是：

从 A 到 g 的距离为 7

从 A 到 c 的距离为 3

其中 A 连接到 c 并且 A 连接到 g

我的问题是，如果我使用 HashMap，我在找出点是否连接时会遇到一些问题，因为 HashMap 不容易循环，有没有更简单的方法可以做到这一点，或者是否有 HashMap 的替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:42:28.833

请参阅[Prim 算法](http://en.wikipedia.org/wiki/Prim%27s_algorithm)和[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)和[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree)

如果您有一组顶点（在您的情况下为一个点），并且它们之间的路径权重（在您的情况下为距离），则其 MST 仅给出连接所有顶点且距离总和最小的路径。

Prim 算法和 Dijkstra 算法可用于查找 MST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:45:46.530

我相信您正在寻找[Djikstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)的实现（在加权图上找到最短路径）。

我认为这里的[解决方案](http://www.vogella.com/articles/JavaAlgorithmsDijkstra/article.html)符合要求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:48:31.220

既然您询问了遍历 HashMap：您应该使用迭代器来为您执行此操作：

```
HashMap hmap = new HashMap();
hmap.put("a", "hello world!");
hmap.put("b", "goodbye!");
hmap.put("c", 42);
Set s = hmap.entrySet();
Iterator i = s.iterator();
while (i.hasNext()) {
    System.out.println(i.next());
} 
```

# c# - c#中的search api异步获取搜索到的推文

> ID：13063814
> 
> 赞同：0
> 
> 时间：2012-10-25T07:40:00.297
> 
> 标签：c#, asp.net, ajax, twitter

任何人都知道如何进行异步获取，尽管已经搜索过的推文（如 twitter）在 twitter 搜索结果窗格上显示“x New Tweets”。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T08:18:22.267

finally i got an answer my question my self.. the solution is followed by below url [http://thomasbillenstein.com/jTweetsAnywhere/demo/Realtime-ticker/](http://thomasbillenstein.com/jTweetsAnywhere/demo/Realtime-ticker/)

# java - 使用 XStream 保存 XML 文件

> ID：13063815
> 
> 赞同：1
> 
> 时间：2012-10-25T07:40:01.690
> 
> 标签：java, xstream

我用来`XStream`在`xml file`.
然后我再次反序列化文件以使用对象。
我的问题是，关闭程序后，xml“文件”消失了。那么如何将这个 xml 文件保存到特定目录呢？我已经尝试过`FileOutputStream`，但它不起作用......我也用谷歌搜索，但没有找到适合我的解决方案......

方法**savePerson**

```
public void savePerson(String uNummer, Person person) {
    System.out.println("save person");
    try{            
        xml = xstream.toXML(person);

    }catch (Exception e){
        System.err.println("Error in XML Write: " + e.getMessage());
    }
} 
```

和方法**readPerson**

```
public Person readPerson(String uNummer) {
    System.out.println("read person");
     Person person = new Person();
    try{
        person = (Person) xstream.fromXML(file_path + uNummer + ".xml");       
    }catch(Exception e){
        System.err.println("Error in XML Read: " + e.getMessage());
    }
    return person;
} 
```

**目录**：`\\releasearea\ToolReleaseArea\PersistenceSave`

**编辑**
**正确代码**：（由**ppeterka 提供**）

```
public void savePerson(String uNummer, Person person) {
    System.out.println("save person XML");
    FileOutputStream fos = null;
    try{            
        xml = xstream.toXML(person);
        fos = new FileOutputStream(file_path + uNummer + ".xml");
        fos.write("<?xml version=\"1.0\"?>".getBytes("UTF-8"));
        byte[] bytes = xml.getBytes("UTF-8");
        fos.write(bytes);

    }catch (Exception e){
        System.err.println("Error in XML Write: " + e.getMessage());
    }
    finally{
        if(fos != null){
            try{
                fos.close();
            }catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T07:48:42.970

你没有写文件，只是获取了序列化的内容……

```
FileOutputStream fos = null;
try {
    fos = new FileOutputStream("myfilename");
    fos.write("<?xml version=\"1.0\"?>".getBytes("UTF-8")); //write XML header, as XStream doesn't do that for us
    byte[] bytes = xml.getBytes("UTF-8");
    fos.write(bytes);

} catch(Exception e) {
    e.printStackTrace(); // this obviously needs to be refined.
} finally {
    if(fos!=null) {
        try{ 
            fos.close();
        } catch (IOException e) {
            e.printStackTrace(); // this obviously needs to be refined.
        }
    }
} 
```

此外，您的阅读功能也有错误：`xstream.fromXML(String)`接受 a `String`，但它不会将其解释为文件名，而是将其解释为 XML 内容本身......您必须使用该`fromXML(File)`功能：

```
public Person readPerson(String uNummer) {
    System.out.println("read person");
    Person person = new Person(); //if there is an error during deserialization, this is going to be returned, is this what you want?
    try{
        File xmlFile = new File(file_path + uNummer + ".xml");
        person = (Person) xstream.fromXML(xmlFile);       
    }catch(Exception e){
        System.err.println("Error in XML Read: " + e.getMessage());
    }
    return person;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T07:53:59.213

使用重载方法 toXML(Object o, Writer w) 直接序列化到文件。您使用的 toXML 方法不会保存到文件中。

```
xstream.toXML(person, new FileWriter(file)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T13:19:18.087

我这样做效果很好：

```
//Your Stream things...

    String xml = xstream.toXML(type);

        System.out.println(xml);

        BufferedReader reader = new BufferedReader(new StringReader(xml));
        BufferedWriter writer = new BufferedWriter(new FileWriter("test.xml",
                true));

        while ((xml = reader.readLine()) != null) {

            writer.write(xml + System.getProperty("line.separator"));

        }

        writer.close() 
```

;

输出是：

```
<type>
  <OBJECT__TYPE>sdfsdf</OBJECT__TYPE>
  <prop>
    <DESCRIPTION>hfh</DESCRIPTION>
    <PARENT>NULL</PARENT>
    <VIRTUAL>0</VIRTUAL>
    <VISIBLE>1</VISIBLE>
    <PICTURE>NULL</PICTURE>
    <HELP>345345</HELP>
    <MIN__NO>NULL</MIN__NO>
    <MAX__NO>1</MAX__NO>
    <NAME__FORMAT>NULL</NAME__FORMAT>
  </prop>
</type>
<type>
  <OBJECT__TYPE>test</OBJECT__TYPE>
  <prop>
    <DESCRIPTION>test</DESCRIPTION>
    <PARENT>NULL</PARENT>
    <VIRTUAL>0</VIRTUAL>
    <VISIBLE>0</VISIBLE>
    <PICTURE>NULL</PICTURE>
    <HELP>noe</HELP>
    <MIN__NO>NULL</MIN__NO>
    <MAX__NO>NULL</MAX__NO>
    <NAME__FORMAT>5475</NAME__FORMAT>
  </prop>
</type> 
```

# android - 如何在android中创建一个半透明的进度对话框

> ID：13063816
> 
> 赞同：1
> 
> 时间：2012-10-25T07:40:12.210
> 
> 标签：android

我用谷歌搜索了很多，甚至解决了这个网站的许多问题，但我就是找不到解决问题的方法。

我想创建一个如下所示的进度对话框。但我不明白该怎么做..我尝试过创建一个自定义进度对话框但是..你只能修改内部微调器外观..在我的如果我想修改它的布局...我怎样才能实现...????

到目前为止，我已经尝试了以下...

```
public class nextclass extends Activity {

    Thread t;
    ProgressBar dia;

    private ProgressDialog progressDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        MainActivity.progressDialog.dismiss();
        setContentView(R.layout.nextclassview);
    //  requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

        ((Button) findViewById(R.id.button1))
                .setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        // progressDialog = findViewById(R.id.progressBar1);

                        new AuthenticateUserTask().execute();
                    }
                });
    }

    private class AuthenticateUserTask extends AsyncTask<Void, Void, String> {

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

            progressDialog = ProgressDialog.show(
                    nextclass.this, "","Sucessful", true);
/*            progressDialog.setIndeterminate(true);

            progressDialog.setIndeterminateDrawable(getResources()
                    .getDrawable(R.layout.customspinner));
*/

            progressDialog = ProgressDialog.show(nextclass.this, "",
                    "Processing....", true);
            progressDialog.getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

        }

        protected void onPostExecute(String s) {
            if (progressDialog.isShowing())
                progressDialog.dismiss();

            Intent my = new Intent(getApplicationContext(), CountTime.class);
            startActivity(my);

        }

        @Override
        protected String doInBackground(Void... params) {
            // TODO Auto-generated method stub
            try {
                Thread.sleep(2000);![custom spinner][2]
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }
    }
} 
```

![在此处输入图像描述](../Images/0780d4eea394d96737fbe6ee9481c955.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:45:33.717

有关如何创建自定义对话框的详细信息，请参阅[此链接](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

```
WindowManager.LayoutParams WMLP = dialog.getWindow().getAttributes();

     WMLP.x = 100;   //x position
     WMLP.y = 100;   //y position

     dialog.getWindow().setAttributes(WMLP); 
```

**Edit2：** 使用您的代码创建一个对话框活动示例如下所示

```
public class DialogActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle(" ");
        alertDialog.setMessage("");
        alertDialog.setIcon(R.drawable.icon);
        alertDialog.setButton("Accept", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {                
            }
        });
        alertDialog.setButton2("Deny", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            }
        });
        alertDialog.show();
    }
} 
```

并在 android 清单文件中

```
android:theme="@android:style/Theme.Translucent.NoTitleBar" 
```

**或者**

```
AlertDialog.Builder builder = new AlertDialog.Builder(
                    new ContextThemeWrapper(context, R.style.popup_theme)); 
```

在值文件夹中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<color name="back_color">#ffffffff</color>
<style name="popup_theme" parent="@android:style/Theme.Translucent.NoTitleBar">
    <item name="android:windowBackground">@color/back_color</item>
    <item name="android:colorBackground">@color/back_color</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:03:58.180

为此，您需要在 anim 文件夹中有一个旋转动画：

```
<set
xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@anim/linear_interpolator"
>
<rotate
xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="0"
android:toDegrees="360"
android:pivotX="50%"
android:pivotY="51%"
android:repeatCount="infinite"
android:duration="800" />

</set> 
```

在 XML 中创建一个图像视图：

```
 <ImageView
       android:id="@+id/loading"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_below="@+id/splash"
       android:layout_centerInParent="true"
       android:layout_gravity="center_horizontal"
       android:layout_marginTop="10dp"
       android:background="@drawable/load_spinner" /> 
```

使用以下代码：

```
 Animation mRotateAnim;
       ImageView mImgVwRotatingImage;
           mImgVwRotatingImage = (ImageView) findViewById(R.id.loading);
       mRotateAnim = AnimationUtils.loadAnimation(this, R.anim.rotate_anim);

private class splashAsync extends AsyncTask<Void, Void, Void> {
    protected void onPreExecute() {
        mImgVwRotatingImage.startAnimation(mRotateAnim);
    }

    protected Void doInBackground(Void... params) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Void v) {
        startActivity(new Intent(first.this, second.class));
        finish();
    }
} 
```

# plugins - NPAPI 插件如何接受 command+o 事件？

> ID：13063824
> 
> 赞同：0
> 
> 时间：2012-10-25T07:40:44.900
> 
> 标签：plugins, safari, npapi

我遇到了麻烦，因为我的插件想在使用**command+o**时打开文件对话框，但是 safari 持有这个事件。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:04:20.990

我强烈怀疑您对此无能为力。作为插件，您是二等公民，是过程中的客人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:16:33.713

您可以接受命令事件，您必须在 NP_GetEntryPoints 方法中为 NPPluginFuncs 结构的事件成员设置回调。

在该方法中，您将收到所有鼠标和键盘事件，以及窗口焦点事件。您可以将第二个参数从 void* 转换为 NPCocoaEvent，您将在其中找到所有必要的参数，例如事件类型、鼠标状态、键和焦点数据。

在深入研究 NPCocoaEvent 的“数据”联合之前，请检查您正在处理的事件类型，否则您可以获得 EXC_BAD_ACCESS。

我在与浏览器共享命令时遇到问题，在我的情况下，Command+O 应该只触发插件的文件打开对话框，但它也会触发浏览器打开文件对话框。假设，为事件处理方法返回 TRUE 应该报告插件处理事件的浏览器，但我还没有运气。

# iphone - 通过自定义 iphone 应用程序将通行证添加到存折

> ID：13063831
> 
> 赞同：0
> 
> 时间：2012-10-25T07:40:54.150
> 
> 标签：iphone, ios6, barcode-scanner, passbook

我需要从相机或图书馆（UIImagepickerviewcontroller）获取真实世界通行证（忠诚卡）的图像并添加相关字段（如卡名/卡号）并需要保存此 IOS 6 的存折。请建议我，我是具有存折功能的新手。

或者

我们可以使用 IOS 6 以编程方式生成 .pkpass 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:33:53.027

您需要一台服务器来签署通行证。请参阅[开发人员存折](https://developer.apple.com/passbook/)。

`.pkpass`您可以设置一个 API 端点，该端点使用由给定字段和值生成的文件来响应您的应用程序请求。

# iphone - -[__NSCFString objectAtIndex:]：无法识别的选择器发送到实例 0x6891460

> ID：13063835
> 
> 赞同：-2
> 
> 时间：2012-10-25T07:41:04.517
> 
> 标签：iphone, objective-c, ipad

请解决我的问题，它给我的错误为 -[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 0x6891460

```
NSString *urlString = @"http://192.168.1.190:8080/mwharf/retrive.action?action=consigneeName&startConsgn=";
NSString *url = [urlString stringByAppendingString:txtConsignee.text];

NSData *webData=[NSMutableData dataWithContentsOfURL:[NSURL URLWithString:url]];    

NSArray *jsonDict=[NSJSONSerialization JSONObjectWithData:webData options:kNilOptions error:&error];

NSMutableArray *tempArray;
NSMutableArray *consigneeArray=[[NSMutableArray alloc]init];
NSInteger arrayCount=0;
for (int i=0; i<[jsonDict count]; i++) {              
    consigneeArray =[jsonDict objectAtIndex:i]; 
    NSLog(@"consigneeArray :%@",consigneeArray);
    tempArray=[[NSMutableArray alloc]initWithArray:[consigneeArray objectAtIndex:arrayCount]]; 
    [consigneeArray insertObject:tempArray atIndex:arrayCount];
    arrayCount++; 
} 

NSArray *passArray=[NSArray arrayWithObject:consigneeArray];
NSLog(@"passArray :%@",passArray); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:47:54.920

[NSJSONSerialization JSONObjectWithData:] 返回一个 NSDictionary 而不是 NSArray。所以因为 NSDictionary 没有这样的方法 objectAtIndex 你有一个错误。试试这个：

```
NSDictionary *jsonDict=[NSJSONSerialization JSONObjectWithData:webData options:kNilOptions error:&error];

NSMutableArray *tempArray;
NSMutableArray *consigneeArray=[[NSMutableArray alloc]init];
NSInteger arrayCount=0;
for(NSString* key in jsonDict) {

    consigneeArray =[jsonDict valueForKey: key]; 
    NSLog(@"consigneeArray :%@",consigneeArray);
    tempArray=[[NSMutableArray alloc]initWithArray:[consigneeArray objectAtIndex:arrayCount]]; 
    [consigneeArray insertObject:tempArray atIndex:arrayCount];
    arrayCount++; 
} 
```

但是返回类型也可以是 NSArray 或 NSString，这取决于您的 JSON 结构。所以最好的方法是检查返回类型使用

```
 [returnObj isKindOfClass:[NSDictionary class]]

 [returnObj isKindOfClass:[NSArray class]] 
```

等等

并分别解析每个返回类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:56:04.237

出现此错误是因为您尝试使用 NSString 的对象遍历特定索引处的对象。而 objectAtIndex 仅支持 NSArray 或 NSMutableArray。

# vba - Excel 宏（如果文件存在）

> ID：13063837
> 
> 赞同：1
> 
> 时间：2012-10-25T07:41:08.117
> 
> 标签：vba, excel

所以就像主题标题说的那样，我正在寻找一些关于宏的帮助。我的工作需要它，所以每次执行客户端备份时，他都会向邮箱发送邮件，这些邮件会导出到文件夹中。这是邮件格式：

> Backup Rapport Success 客户名称 File Backup Set Taak 2012-10-23 (20 30)

宏需要做一些事情：

*   提取客户端名称
*   提取或备份成功或失败或错过
*   并在正确的单元格中写入成功或失败消息

这甚至可能吗？

```
Public Function FileFolderExists(strFullPath As String) As Boolean
'Author       : Ken Puls (www.excelguru.ca)
'Macro Purpose: Check if a file or folder exists
    On Error GoTo EarlyExit
    If Not Dir(strFullPath, vbDirectory) = vbNullString Then FileFolderExists = True

EarlyExit:
    On Error GoTo 0
End Function

Public Sub TestFolderExistence()
'Author       : Ken Puls (www.excelguru.ca)
'Macro Purpose: Test if directory exists
    If FileFolderExists("c:\test") Then
        MsgBox "Folder exists!"
    Else
        MsgBox "Folder does not exist!"
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:16:55.753

以下将字符串拆分为单词（但仅当 ClientName 为一个单词时才有效）。

```
Sub Test()
    Const sIn As String = "Backup Rapport Geslaagd ClientName File Backup Set Taak 2012-10-23 (20 30), "
    Dim sArr() As String

    sArr = Split(sIn, Space(1))

    Debug.Print "Success=" & sArr(2)
    Debug.Print "ClientName=" & sArr(3)
    Debug.Print "Date=" & sArr(8)
End Sub 
```

有很多方法可以将文本输入到单元格中。一个例子：

```
Range("A1").Value = "Hello"

Range("A2").Value = sArr(2) 
```

**编辑**

扩展 sub 以获取字符串和范围并输入文本：

```
Option Explicit

Sub SplitMailStringAndEnterValues(psMail As String, poRange As Range)
    Dim sArr() As String

    '***** Check that poRange is an object
    If Not poRange Is Nothing Then
        sArr = Split(psMail, Space(1))

        '***** Check that sArr is an array
        '***** and that it contains at least 9 strings
        If IsArray(sArr) And UBound(sArr) >= 8 Then
            '***** Enter values starting in range poRange and use
            '***** offset to place other values to the right
            poRange.Value = sArr(2)                 'Success
            poRange.Offset(0, 1).Value = sArr(3)    'ClientName
            poRange.Offset(0, 2).Value = sArr(8)    'Date
        End If
    End If
End Sub 
```

现在为每个邮件字符串调用它，而不是将整个字符串写在一个列中：

```
Call SplitMailStringAndEnterValues("Backup Rapport Geslaagd ClientName File Backup Set Taak 2012-10-23 (20 30)", Range("Sheet2!A2")) 
```

# javascript - 添加/更改 URL 参数并重定向到新 URL

> ID：13063838
> 
> 赞同：25
> 
> 时间：2012-10-25T07:41:14.237
> 
> 标签：javascript, jquery, append

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-25T07:55:44.680

```
function setGetParameter(paramName, paramValue)
{
    var url = window.location.href;
    var hash = location.hash;
    url = url.replace(hash, '');
    if (url.indexOf(paramName + "=") >= 0)
    {
        var prefix = url.substring(0, url.indexOf(paramName + "=")); 
        var suffix = url.substring(url.indexOf(paramName + "="));
        suffix = suffix.substring(suffix.indexOf("=") + 1);
        suffix = (suffix.indexOf("&") >= 0) ? suffix.substring(suffix.indexOf("&")) : "";
        url = prefix + paramName + "=" + paramValue + suffix;
    }
    else
    {
    if (url.indexOf("?") < 0)
        url += "?" + paramName + "=" + paramValue;
    else
        url += "&" + paramName + "=" + paramValue;
    }
    window.location.href = url + hash;
} 
```

Call the function above in your onclick event.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-03-22T11:53:31.853

Why parse the query string yourself when you can let the browser do it for you?

```
function changeQS(key, value) {
    let urlParams = new URLSearchParams(location.search.substr(1));
    urlParams.set(key, value);
    location.search = urlParams.toString();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-15T14:56:07.153

All the preivous solution doesn't take in account posibility of the substring in parameter. For example [http://xyz?ca=1&a=2](http://xyz?ca=1&a=2) wouldn't select parameter a but ca. Here is function which goes through parameters and checks them.

```
function setGetParameter(paramName, paramValue)
{
  var url = window.location.href;
  var hash = location.hash;
  url = url.replace(hash, '');
  if (url.indexOf("?") >= 0)
  {
    var params = url.substring(url.indexOf("?") + 1).split("&");
    var paramFound = false;
    params.forEach(function(param, index) {
      var p = param.split("=");
      if (p[0] == paramName) {
        params[index] = paramName + "=" + paramValue;
        paramFound = true;
      } 
    });
    if (!paramFound) params.push(paramName + "=" + paramValue);
    url = url.substring(0, url.indexOf("?")+1) + params.join("&");
  }
  else
    url += "?" + paramName + "=" + paramValue;
  window.location.href = url + hash;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-13T17:36:26.670

I had a similar situation where I wanted to replace a URL query parameter. However, I only had one param, and I could simply replace it:

```
window.location.search = '?filter=' + my_filter_value 
```

The [`location.search` property](http://www.w3schools.com/jsref/prop_loc_search.asp) allows you to get or set the query portion of a URL.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T07:52:51.563

To do it in PHP: You have a couple of parameters to view your page, lets say `action` and `view-all`. You will (probably) access these already with `$action = $_GET['action']` or whatever, maybe setting a default value.

Then you decide depending on that if you want to swich a variable like `$viewAll = $viewAll == 'Yes' ? 'No' : 'Yes'`.

And in the end you just build the url with these values again like

```
$clickUrl = $_SERVER['PHP_SELF'] . '?action=' . $action . '&view-all=' . $viewAll; 
```

And thats it.

So you depend on the page status and not the users url (because maybe you decide later that $viewAll is Yes as default or whatever).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T07:57:44.540

Some simple ideas to get you going:

In PHP you can do it like this:

```
if (!array_key_exists(explode('=', explode('&', $_GET))) {
  /* add the view-all bit here */
} 
```

In javascript:

```
if(!location.search.match(/view\-all=/)) {
  location.href = location.href + '&view-all=Yes';
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-25T08:22:22.123

though i take the url from an input, it's easy adjustable to the real url.

```
var value = 0;

$('#check').click(function()
{
    var originalURL = $('#test').val();
    var exists = originalURL.indexOf('&view-all');

    if(exists === -1)
    {
        $('#test').val(originalURL + '&view-all=value' + value++);
    }
    else
    {
        $('#test').val(originalURL.substr(0, exists + 15) + value++);
    }
}); 
```

[http://jsfiddle.net/8YPh9/31/](http://jsfiddle.net/8YPh9/31/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-23T19:02:30.480

Here's a way of accomplishing this. It takes the param name and param value, and an optional 'clear'. If you supply clear=true, it will remove all other params and just leave the newly added one - in other cases, it will either replace the original with the new, or add it if it's not present in the querystring.

This is modified from the original top answer as that one broke if it replaced anything but the last value. This will work for any value, and preserve the existing order.

```
function setGetParameter(paramName, paramValue, clear)
{
clear = typeof clear !== 'undefined' ? clear : false;
var url = window.location.href;
var queryString = location.search.substring(1); 
var newQueryString = "";
if (clear)
{
    newQueryString = paramName + "=" + paramValue;
}
else if (url.indexOf(paramName + "=") >= 0)
{
    var decode = function (s) { return decodeURIComponent(s.replace(/\+/g, " ")); };
    var keyValues = queryString.split('&'); 
    for(var i in keyValues) { 
        var key = keyValues[i].split('=');
        if (key.length > 1) {
            if(newQueryString.length > 0) {newQueryString += "&";}
            if(decode(key[0]) == paramName)
            {
                newQueryString += key[0] + "=" + encodeURIComponent(paramValue);;
            }
            else
            {
                newQueryString += key[0] + "=" + key[1];
            }
        }
    } 
}
else
{
    if (url.indexOf("?") < 0)
        newQueryString = "?" + paramName + "=" + paramValue;
    else
        newQueryString = queryString + "&" + paramName + "=" + paramValue;
}
window.location.href = window.location.href.split('?')[0] + "?" + newQueryString;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-14T14:41:51.977

i would suggest a little change to @Lajos's answer... in my particular situation i could potentially have a hash as part of the url, which will cause problems for parsing the parameter that we're inserting with this method after the redirect.

```
function setGetParameter(paramName, paramValue) {
    var url = window.location.href.replace(window.location.hash, '');
    if (url.indexOf(paramName + "=") >= 0) {
        var prefix = url.substring(0, url.indexOf(paramName));
        var suffix = url.substring(url.indexOf(paramName));
        suffix = suffix.substring(suffix.indexOf("=") + 1);
        suffix = (suffix.indexOf("&") >= 0) ? suffix.substring(suffix.indexOf("&")) : "";
        url = prefix + paramName + "=" + paramValue + suffix;
    }else {
        if (url.indexOf("?") < 0)
            url += "?" + paramName + "=" + paramValue;
        else
            url += "&" + paramName + "=" + paramValue;
    }
    url += window.location.hash;
    window.location.href = url;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-07T07:19:07.313

This is my sample code for rebuild url query string with JS

```
//function get current parameters
$.urlParam = function(name){
    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
    if (results==null){
        return null;
    }
    else{
        return results[1] || 0;
    }
};

//build a new parameters
var param1 = $.urlParam('param1');
var param2 = $.urlParam('param2');

//check and create an array to save parameters
var params = {};
    if (param1 != null) {
        params['param1'] = param1;
    }
    if (order != null) {
        params['param2'] = param2;
    }

//build a new url with new parameters using jQuery param
window.location.href =  window.location.origin + window.location.pathname + '?' + $.param(params);
```

I used JQUERY param: [http://api.jquery.com/jquery.param/](http://api.jquery.com/jquery.param/) to create a new url with new parameters.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-13T10:10:50.810

I need help to adjust my script below or to find a script that could be used on my wordpress site to grab the url suffix parameters from a forward url, then to be added at the button click url for tracking the proper forward ads id.

REASON: parameters are used for advertisement tracking to find out from which ad the user has been forward, even if the user hops from optin page to the sales page by using button click.

Here the goal to reach: 1\. An FB ad points to an optin page with tracking code: [https://ownsite.com/optin-page/?tid=fbad1](https://ownsite.com/optin-page/?tid=fbad1) 2\. At the optin-page there is a button with a setup URL to forward to the sales page, but if clicked then only the URL is forward, but the parameter "?tid=fbad1" is missing. 3\. The auto-forward script below (which is working properly) can be used to change for button click forward, but has a limitation as it grab only "tid" parameters instead also utm parameters.

Therefore a script code shall be implemented to establish click buttons (also to style them or use images instead) and while clicking the button to forward to a different sales page with grabbing the suffix parameter form the current optin-page to forward then to sales-page [https://ownsite.com/sales-page/?tid=fbad1](https://ownsite.com/sales-page/?tid=fbad1) also including UTM parameters

Currently, I could have solved this by using an auto-redirect script, but A.) I do not want to use an autoredirect at this page. Better is an event click button used to let the user himself click to forward with the URL parameter included. B.) The tracking ID parameter in this script is limited to "?tid=..." instead I do also want to track the UTM code on button click also i.e. Grab from current page the paramater of URL [https://www.optin-page.com/?tid=facebookad1?utm_campaign=blogpost](https://www.optin-page.com/?tid=facebookad1?utm_campaign=blogpost) then on button click grab parameters and add to button set URL [https://www.sales-page.com/?tid=facebookad1?utm_campaign=blogpost](https://www.sales-page.com/?tid=facebookad1?utm_campaign=blogpost)

Please now find here the Code below in use for auto-redirect and grabbing the URL parameters. This code shall be changed now to be able to create a button with a click-event to be redirect then to the forward URL with parameter grabbing of current URL if the button is clicked (as stated above).

```
 <p><!-- Modify this according to your requirement - core script from https://gist.github.com/Joel-James/62d98e8cb3a1b6b05102 and suffix grabbing </p>
    <h3 style="text-align: center;"><span style="color: #ffffff; background-color: #039e00;">►Auto-redirecting after <span id="countdown">35</span> seconds◄&lt;/span></h3>
    <p><!-- JavaScript part --><br /><script type="text/javascript">

function findGetParameter(parameterName) {
    var result = null,
        tmp = [];
    location.search
        .substr(1)
        .split("&")
        .forEach(function (item) {
          tmp = item.split("=");
          if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
        });
    return result;
}

    // Total seconds to wait
    var seconds = 45;

    function countdown() {
        seconds = seconds - 1;
        if (seconds < 0) {
            // Chnage your redirection link here
var tid = findGetParameter('tid');
window.location = "https://www.2share.info/ql-cb2/" + '?tid='+tid;
        } else {
            // Update remaining seconds
            document.getElementById("countdown").innerHTML = seconds;
            // Count down using javascript
            window.setTimeout("countdown()", 1000);
        }
    }

    // Run countdown function
    countdown();

</script></p> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-04T14:24:51.457

```
var updateQueryStringParameter = function (key, value) {

    var baseUrl = [location.protocol, '//', location.host, location.pathname].join(''),
        urlQueryString = document.location.search,
        newParam = key + '=' + value,
        params = '?' + newParam;

    // If the "search" string exists, then build params from it
    if (urlQueryString) {
        var updateRegex = new RegExp('([\?&])' + key + '[^&]*');
        var removeRegex = new RegExp('([\?&])' + key + '=[^&;]+[&;]?');

        if( typeof value == 'undefined' || value == null || value == '' ) { 
            params = urlQueryString.replace(removeRegex, "$1");
            params = params.replace( /[&;]$/, "" );

        } else if (urlQueryString.match(updateRegex) !== null) { 
            params = urlQueryString.replace(updateRegex, "$1" + newParam);

        } else {
            params = urlQueryString + '&' + newParam;
        }
    }

    // no parameter was set so we don't need the question mark
    params = params == '?' ? '' : params;

    window.history.replaceState({}, "", baseUrl + params);
}; 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-10-25T08:18:10.153

I think something like this would work, upgrading the @Marc code:

```
//view-all parameter does NOT exist  
$params = $_GET;  
if(!isset($_GET['view-all'])){  
  //Adding view-all parameter  
  $params['view-all'] = 'Yes';  
}  
else{  
  //view-all parameter does exist!  
  $params['view-all'] = ($params['view-all'] == 'Yes' ? 'No' : 'Yes');  
}
$new_url = $_SERVER['PHP_SELF'].'?'.http_build_query($params); 
```

# c - web_reg_find 与 strstr()。表现

> ID：13063840
> 
> 赞同：1
> 
> 时间：2012-10-25T07:41:35.797
> 
> 标签：c, performance, load-testing, qa, loadrunner

您认为哪种操作最快且负载更少，LR`web_reg_find()`还是 C `strstr()`？对于非常强的负载测试，哪个更可取？

如果有人知道它是如何`web_reg_find()`工作的，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:03:50.437

使用 strstr，您必须拉取页面上的每个组件，并在下载后针对缓冲区中的字符串显式搜索。使用 web_reg_find() 您正在设置一个过滤条件，页面上的每个响应组件都会通过该过滤条件。

如果您选择 strstr() 路由，您仍然需要下载页面组件，然后对每个组件运行检查。您将使用更多内存，除非您非常擅长内存管理，否则您有时可能会错过 free() 并引入内存泄漏情况，即您迫于压力将脚本拿出来成为常见的一面影响。使用 web_reg_find() 您可以让它与页面下载同时进行，而不会降低页面下载本身的速度。

我不确定阿德里亚诺在哪里对一个与另一个的原始性能进行了研究，因为两者的操作是如此不同，因为 web_reg_find() 甚至可以在 strstr() 启动之前完成 - 我必须下载并填充在我可以搜索之前要搜索的缓冲区。

# html - 无序列表只改变颜色相同级别

> ID：13063841
> 
> 赞同：1
> 
> 时间：2012-10-25T07:41:41.487
> 
> 标签：html, css

美好的一天，
我有这个 html

```
<ul id="nav" class="nav-1"> 
<li><a href="#">Loans</a></li> 
<li><a href="#">Bancassurance</a> 
  <ul class="nav-2"> 
    <li><a href="#">darb</a></li> 
    <li><a href="#">elem</a></li> 
    <li><a href="#">ghad</a></li> 
  </ul> 
</li> 
</ul 
```

我正在使用 ：

```
.nav-1 li:hover a {
background:#FF0000; 
} 
```

对于 .nav-1 中的每个 li 和 .nav-2 中的所有 li，baground 现在 都是
红色的帮助或链接？ 谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:46:44.810

这是您的解决方案 - [http://jsfiddle.net/sEYba/2/](http://jsfiddle.net/sEYba/2/)

将您的 CSS 编写为 -

```
.nav-1 li a:hover {
  background:#FF0000;
}
.nav-2 li a:hover {
  background: none;
} 
```

[**演示**](http://jsfiddle.net/xPzCb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:52:32.403

这应该是你的答案。这将使其通用，如果您在第一个中添加更多 ul ，您将不必编写额外的代码。

```
.nav-1 li:hover a {
background:#FF0000; 
}

.nav-1 li:hover ul li a {
background:none; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:53:38.003

使用此代码：

```
.nav-1 li a:hover{
    background:#FF0000;
}
.nav-1 li li a:hover{
    background:none;
} 
```

# php - Jquery - 如何从重复中获取当前输入值

> ID：13063843
> 
> 赞同：1
> 
> 时间：2012-10-25T07:41:45.437
> 
> 标签：php, jquery, html

我有一个评论系统，我想在其中添加删除选项，为此我在每个发布`comment-id` 到*delete.php*的评论中实现了一个 POST 表单，它在 php 中工作，但在 jquery 中没有。

即，为了删除评论，必须将评论 id 发布到 delete.php 文件，该文件处理从数据库中删除评论。

我正在尝试从输入值中获取该评论 ID，以便像这样使用 jquery 发布，但它给了我第一个评论 ID 值而不是所选值。

**jQuery**

```
 $('form[name=comments]').submit(function(){

    var comment_delete = $("input[name=comment-delete]").val();
    //$.post('../../delete.php', {value1:comment_delete}, function(data){alert('deleted')});
    alert(comment_delete);
    return false;

    }); 
```

**重复形式是这样的**

```
 <form name="comments" action="../../delete.php" method="post">
      <input name="comment-delete" type="hidden" value="<?php echo $list['comment-id']; ?>" />
      <input value="Delete" type="submit" />
      </form> 
```

如果我使用`.each()`或者`.map()`它给了我所有的评论 ID 值。

请查看并建议任何可能的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:45:11.190

要查找相关输入，即您提交的表单之一，您可以使用：

```
 $('form[name=comments]').submit(function(){
    var comment_delete = $(this).find("input[name=comment-delete]"); 
```

顺便说一句，我不完全确定你做了什么，但你可能会错过 a`.val()`来获取输入的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:47:44.663

您在每个隐藏输入上都有相同的名称，自然会得到所有这些输入，因为您在执行时没有针对正确的形式：

```
$("input[name=comment-delete]"); 
```

“this”应该指向提交函数中的表单。试试这个。

```
$('form[name=comments]').submit(function(){

    var comment_delete = $(this).find("input[name=comment-delete]");
    //$.post('../../delete.php', {value1:comment_delete}, function(data){alert('deleted')});
    alert(comment_delete);
    return false;

}); 
```

正如dystroy所说，您可能缺少.val()。

```
var commentId = $(this).find("input[name=comment-delete]").val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:46:51.513

试试这个

```
$('form[name=comments]').submit(function(){

  var comment_delete = $("input[name=comment-delete]", this);
  //$.post('../../delete.php', {value1:comment_delete}, function(data){alert('deleted')});
  alert(comment_delete);
  return false;

}); 
```

`this`指正在提交的表单（更一般地，提交给事件源）。 `$(...)`接受第二个参数，然后将其用作选择器的上下文。`$(selector, context)`相当于`$(context).find(selector)`

# visual-c++ - 如何在代码中找到密码强度？

> ID：13063845
> 
> 赞同：1
> 
> 时间：2012-10-25T07:41:58.713
> 
> 标签：visual-c++

我正在创建一个 RSA 密钥来签署一些证书，例如，

```
RSACryptoServiceProvider ^RSAkey = gcnew RSACryptoServiceProvider(2048); 
```

在别的地方，

```
array<System::Byte> ^somekey = gcnew array<System::Byte>(24);
TripleDESCryptoServiceProvider ^des3 = gcnew TripleDESCryptoServiceProvider();
ICryptoTransform ^cryptor = des3->CreateEncryptor(somekey, iv); 
```

现在我必须将密码强度更改为 56 位（DES_CBC_SHA）。我必须改变哪一个？

# silverlight - listbox performance in WP7

> ID：13063846
> 
> 赞同：0
> 
> 时间：2012-10-25T07:42:02.833
> 
> 标签：silverlight, windows-phone-7

I have a Itemscontrol nested within a listbox.DataTemplate consits of image and border controls.The listbox scrolling is pretty slow.How can i improve its performance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:50:18.327

您可以使用虚拟化。[这里](http://blogs.msdn.com/b/ptorr/archive/2010/08/16/virtualizing-data-in-windows-phone-7-silverlight-applications.aspx)和[这里](http://shawnoster.com/2010/08/improving-listbox-performance-in-silverlight-for-windows-phone-7-data-virtualization/)的例子很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:15:15.360

我建议使用 David Ansons 的 LowProfileImageLoader 加载图像。你可以在[这里](http://blogs.msdn.com/b/delay/archive/2010/10/04/there-s-no-substitute-for-customer-feedback-improving-windows-phone-7-application-performance-now-a-bit-easier-with-lowprofileimageloader-and-deferredloadlistbox-updates.aspx?Redirected=true)找到更多关于它的信息并[从 nuget 下载一个包](https://nuget.org/packages/PhonePerformance)。在处理图像时，它对我的​​性能问题有很大帮助。它也很容易使用。

# php - Is it safe to use count() on unsanitized array? php

> ID：13063847
> 
> 赞同：-2
> 
> 时间：2012-10-25T07:42:03.313
> 
> 标签：php, security

> **Possible Duplicate:**
> [Can php variable hold harmfull code safely?](https://stackoverflow.com/questions/13062543/can-php-variable-hold-harmfull-code-safely)

Let's say I have array named $content. The array holds harmfull data.

Is it safe to do the following?

```
$test = count($content);
echo $test; 
```

Would count() somehow execute the harmfull data?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:46:02.833

长话短说：不用担心。

长话短说：

Count 将返回一个 int，并且不应执行任何操作。这不是一个非常复杂的功能，所以我怀疑它甚至可能有这样的错误，但事实是

1.  它不应该执行任何事情
2.  如果是这样，这是一个错误。
3.  据我所知，它从未被报道过。
4.  因此，没有真正的理由认为这是一种风险。
5.  如果您仍然认为可以，您可以查看源代码以检查课程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:44:57.617

As far as I'm aware, you'd have to `eval()` any code for it to actually be executed in the manner you describe. So no, nothing would get executed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:50:22.217

[`count`](http://php.net/manual/en/function.count.php)对PHP 未清理的数组是安全的。

但是不要[`eval`](http://php.net/eval)在你的 SQL 语句中使用它并很好地清理它，以防止 SQL 注入

# javascript - Unable to get/set contents of tiny mce editor

> ID：13063848
> 
> 赞同：2
> 
> 时间：2012-10-25T07:42:06.100
> 
> 标签：javascript, jquery, tinymce, wysiwyg, rte

I am using Tiny MCE editor version : 3.5.7
I am using multiple instances of text editor on same page with unique IDs and I have wrapped these editors in a div to show and hide these editors. Everything was working fine. Now I want to clear the contents of the editor when user hide it (so that when it is displayed again the previous contents are removed). I tried to do it using **tinyMCE.get('editorId').setContent('')**, it works fine only once.... I mean once I have used the above function than I am unable to **set** or even **get** the contents of that editor instance. The structure that I have used is as follows:

```
<div id="parentDIV">
  <div id="1_editor">
  </div>
</div>

tinyMCE.init({
        mode: "exact",
        max_char: "2000",
        elements: "1_editor",
        // Setting up ToolBar
        theme: "advanced",
        theme_advanced_layout_manager: "SimpleLayout",
        theme_advanced_buttons1: "bold,italic,underline, strikethrough,     separator,justifyleft, justifycenter,justifyright,  justifyfull, separator,bullist,numlist,separator,fontselect ,fontsizeselect",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
    }); 
```

To show and hide the editor I doing something like this:

```
$('#parentDIV').hide();
$('#parentDIV').show(); 
```

Can anyone help please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:34:21.417

我不完全确定为什么会发生这种情况。一种选择是如果编辑器在 dom 中移动。对您来说，明确关闭编辑器然后隐藏它们可能是更好的方法。

要关闭编辑器实例，请使用：

```
tinymce.execCommand('mceRemoveControl',true,'editor_id'); 
```

重新初始化使用

```
tinymce.execCommand('mceAddControl',true,'editor_id'); 
```

# android - Using Android AutoCompleteTextView with ArrayAdapter instead of ArrayAdapter

> ID：13063849
> 
> 赞同：32
> 
> 时间：2012-10-25T07:42:10.897
> 
> 标签：android, autocomplete, android-view, android-adapter

I wanted to use AutoCompleteTextView in my android application.I know how to use it with simple array of Strings, but I wanted AutoCompleteTextView to use list of Objects to perform completion.My code for this is following:

**ACTIVITY CODE**

```
public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        initialize();
        ArrayAdapter<Student> adapter = new ArrayAdapter<Student>(this,
                R.layout.dropdown_list_item, GetAllStudentsList());

        searchBox.setAdapter(adapter);
        searchBox.setThreshold(THRESHOLD_VALUE);
        searchBox.setTextColor(Color.BLACK);
}

searchBox.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> adapterView, View view,
                int position, long arg3) {
                     //Here i will grab the Student object that user selected from drop-down

        }

    });

public ArrayList<Movies> GetAllStudentsList() {

//This method returns a ArrayList of <Student> type objects
} 
```

**Student** class Object has information regarding a student which is `ID,NAME,ADDRESS,MARKS`.

I know AutoCompleteTextView needs an array of String type object to perform search operation.In my case I want AutoCompleteTextView to use my ArrayList to perform completion on the basis of Student object field NAME.I dont know how should I specify AutoCompleteTextView to use NAME field of Student object.Please help me providing any Link or a small example.

Thanks

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-25T08:28:37.883

两种方式：

1.  `toString()`在课堂上覆盖`Student`并使其返回`name`。您可以使用以下代码获取选择的对象：

    ```
     public static class Student {

        private String name;

            public Student(String name) {
                this.name = name;
            }

            @Override
            public String toString() {
                return name;
            }

        }

    AutoCompleteTextView tv = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
    final ArrayList<Student> list = new ArrayList<MainActivity.Student>();
    list.add(new Student("Viru"));
    list.add(new Student("Gauti"));
    ArrayAdapter<Student> adapter = new ArrayAdapter<MainActivity.Student>(
            this, android.R.layout.simple_dropdown_item_1line, list);
    tv.setAdapter(adapter);

    tv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Student selected = (Student) arg0.getAdapter().getItem(arg2);
            Toast.makeText(MainActivity.this,
                    "Clicked " + arg2 + " name: " + selected.name,
                    Toast.LENGTH_SHORT).show();
        }
    }); 
    ```

2.  实现自定义适配器（通过扩展`BaseAdapter`类或`ArrayAdapter<Student>`类）检查本教程：[http ://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-14T22:12:56.947

您可以使用 an`AbstractList`来获取`String`对象列表中每个项目的表示。

```
private void setupAutoComplete(AutoCompleteTextView view, List<T> objects) {
    List<String> names = new AbstractList<String>() {
        @Override
        public int size() { return objects.size(); }

        @Override
        public String get(int location) {
            return objects.get(location).getName();
        }
    };

    view.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, names));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-01T04:11:25.417

您可以在此适配器中覆盖 getItem，取决于每种类型将其转换为 String

```
 override fun getItem(position: Int): String? {
        val item = listData[position]
        when (item) {
            is BankItem -> {
                return item.bankName
            }
        ....
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-04T09:09:06.223

如果您想在 String[] arr=new String[100] 中添加数据；那么它错了。您可以执行与 ArrayList 形式相同的工作，但请记住，您永远不会在此处放置 Getter/Setter 类。只需简单地声明它。请参阅此示例。

在主分区中声明：

```
 ArrayList<String>arr=new ArrayList<>(); 
```

然后以这种方式初始化它：

```
 for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject jsonObject1 = (JSONObject) jsonArray.get(i);
                    String imei = jsonObject1.getString("imei");
                    String name = jsonObject1.getString("name");
                    String my_pic = jsonObject1.getString("my_pic");
                    String email = jsonObject1.getString("email");

                    arr.add(name);
                }

                adapter= new ArrayAdapter<>
                        (this, android.R.layout.select_dialog_item, arr);
                autoCompleteText.setThreshold(1);//will start working from first character
                autoCompleteText.setAdapter(adapter);//setting the adapter data into the AutoCompleteTextView
                autoCompleteText.setTextColor(Color.RED);

            } 
```

我希望这对你有用....

# jsf - How to get row index in p:orderList?

> ID：13063850
> 
> 赞同：1
> 
> 时间：2012-10-25T07:42:13.730
> 
> 标签：jsf, jsf-2

I have a simple implementation of p:orderList in which I display array list of task objects, namely task name and commandButton which displays more details about task:

```
<p:orderList value="#{taskBean.tasks}" var="t" controlsLocation="none"
           itemValue="#{t}" id="tasks"/>
        <p:column>   
             <h:outputLabel value="#{t.name}"/>
        </p:column>

        <p:column><h:form>
           <p:commandButton title="Details" oncomplete="#{taskBean.details(t.id)}" 
              icon="ui-icon-document-b"/>
        </h:form></p:column>
</p:orderList> 
```

The button calls bean method which finds task in array list whit task id and displays it. Now for some reason, in all rows in orderList I end up whit last (t.id) as attribute for all buttons, so they all display the last task.

Any idea what should I do?

And my second question is how to add button which saves current order of the array list of tasks?

# wordpress - wp e commerce other currency conversion at checkout

> ID：13063852
> 
> 赞同：0
> 
> 时间：2012-10-25T07:42:20.873
> 
> 标签：wordpress

I am using Wordpress 3.4 and the WP E Commerce 3.8

Looked for the following functionality, but couldn't find quite the right answer. Hence I am trying my luck here. The plugin gives you the ability to provide a different price for a different currency. But at checkout, it is the base currency that is shown there. What I am looking for is :

*   The shop will have a drop down to select options. (Like [fabindia](http://fabindia.com) web site)

a) Delivery within India
b) International Delivery

*   According to the selection the price is shown in INR (Delivery withing India) or in USD (International Delivery) IMPORTANT : The USD price is put manually, not converted from INR.
*   If the International Delivery is selected, the prices in the checkout page will be the USD price converted into INR.

Example : (user selected International Delivery)
Product page and single product page : **Sandal Soap : USD 25**
Checkout page - list of products : **Sandal Soap : USD 25**
- Amount payable : INR **1,340.93** ($25 converted into INR at current rate)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:35:02.637

[抱歉，我在货币转换插件](http://haet.at/currency-assistant-pro/#comment-390)的评论中给你的答案显然对你没有帮助......我认为你应该看看 wp-e-commerce-role-discount 插件。它将附加价格字段添加到产品页面并读取“wpsc_top_of_products_page”挂钩中的字段值。也许[源代码](http://plugins.trac.wordpress.org/browser/wp-e-commerce-role-discount/trunk/includes/class-haetrolediscount.php#L136) 可以帮助你：第 7 行和第 136 行（不要忘记 156）。您可以检查“useInternationalPrice()”或某事，而不是检查 isPremiumCustomer()。像那样。

但这只是您问题的第一部分。第二部分是将美元价格转换回印度卢比。这可以通过`wp_remote_get()`google 转换 API 的 a 或 curl 来完成：...google.com/ig/calculator?hl=en&q=100USD=?INR

# maps - 我想在 Google 地图上指出 IP 地址的确切位置

> ID：13063856
> 
> 赞同：0
> 
> 时间：2012-10-25T07:42:33.223
> 
> 标签：maps, location, ip, street-address

我想在谷歌地图或任何其他服务上指出 IP 地址的确切位置。我希望标记准确。我该怎么做，使用哪种服务，收费或免费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T12:55:14.220

只是为了使答案正式化，没有任何地理位置服务可以可靠地提供这种准确性。您可以合理地确定城市/城镇，仅此而已……假设没有故意尝试隐藏其位置，例如[VPN](https://en.wikipedia.org/wiki/Virtual_private_network)，[TOR](https://en.wikipedia.org/wiki/Tor_(anonymity_network))等。

如果您的用户正在合作，那么您可以构建自己的地理位置服务，例如，当手机通过 WiFi 路由器连接时使用 GPS 并将其报告回您的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-08T12:23:20.183

找到地理定位标签，一切顺利

# eclipse-rcp - Double click event prob

> ID：13063857
> 
> 赞同：2
> 
> 时间：2012-10-25T07:42:34.783
> 
> 标签：eclipse-rcp

When ever I double click the tree viewer file that file name should appear in the next form view

Sample.dat -> double click -> name should be appear Sample.dat and File related properties should be appear. I created a treeViewer files and double click the file name that name is not appear. Please kindly help me reg this,eclipse rcp,Juno,e4 etc..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:51:45.347

您需要将点击侦听器添加到您的树中

```
final Tree tree = new Tree(parent, SWT.BORDER);
tree.addMouseListener(new MouseListener(){
    public void mouseDoubleClick(MouseEvent e) {
        //get data of selected element
        //we use array[0], because we have not multiselect tree
        MyDataObject data = (MyDataObject) tree.getSelection()[0].getData();

        //now you need to pass "data" to your view with file info
        //I don't know how to do it in pre e4 RCP apps, so
        //please read this answer: https://stackoverflow.com/a/2227764/1030113
        //hope that helps

    }
    public void mouseDown(MouseEvent e) {}
    public void mouseUp(MouseEvent e) {}
});

//to test
TreeItem treeItem1 = new TreeItem(tree, SWT.NONE);
treeItem1.setText("some item 1");
treeItem1.setData(new MyDataObject("somedata 1"));

TreeItem treeItem2 = new TreeItem(tree, SWT.NONE);
treeItem2.setText("some item 2");
treeItem2.setData(new MyDataObject("somedata 2")); 
```

我不知道如何在 pre e4 RCP 应用程序中的视图之间进行通信，但我在这里找到了一些有用的答案：[https ://stackoverflow.com/a/2227764/1030113](https://stackoverflow.com/a/2227764/1030113)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:12:34.687

透视类... private void setLayouts(IPageLayout layout) { // Range 0.05f to 0.95f.... IFolderLayout explorerFolderLayout = layout.createFolder("explorer", IPageLayout.LEFT, 0.25f, layout.getEditorArea());

## explorerFolderLayout.addView(ExplorerView.ID);

查看类.. viewer.addDoubleClickListener(new IDoubleClickListener() {

```
 @Override
        public void doubleClick(DoubleClickEvent event) {
            // TODO Auto-generated method stub

            IStructuredSelection selection = (IStructuredSelection) viewer.getSelection();

            FileName fn = null;
            FileNameContainer fnc = null;
            if (selection.isEmpty()) 
                return;

            List<Object> list = selection.toList();... 
```

……

# android - 是否可以将 Android 应用与 Google Cloud Messaging 同步

> ID：13063861
> 
> 赞同：1
> 
> 时间：2012-10-25T07:42:56.077
> 
> 标签：android, google-cloud-messaging

我已阅读 Google[网站](http://developer.android.com/guide/google/gcm/gcm.html)的 GCM 详细信息并观看了[Google IO Video](http://www.youtube.com/watch?v=YoaP6hcDctM)。

但在视频和 GCM 文档中有示例 GCM 向多个 android 设备发送相同的消息。但在我的应用程序中，我不想将相同的消息发送到多个 android 设备。

**例如**

我有两个具有不同谷歌帐户的安卓设备，我想在应用程序中与 GCM 同步笔记。

1.  第一台设备注册到 one@gmail.com
2.  第二台设备注册 two@gmail.com

第一个设备有不同的注释。和第二个设备有不同的注释

如果我为第一台设备更新服务器上的注释。我希望它与第一台设备（one@gmail.com）同步，而不是与第二台设备（two@gmail.com）同步

GCM可以吗.....？请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:00:29.920

是的，在每台设备上运行的应用程序的每个实例都将具有唯一的注册 ID

> 注册 ID：由 GCM 服务器颁发给 Android 应用程序的 ID，允许其接收消息。一旦 Android 应用程序获得了注册 ID，它就会将其发送到第 3 方应用程序服务器，该服务器使用它来识别已注册以接收给定 Android 应用程序消息的每个设备。换句话说，注册 ID 与运行在特定设备上的特定 Android 应用程序相关联。

当您在特定设备上的应用程序注册 GCM 时，它会收到一个唯一的注册 ID。GCM 注册成功后收到此注册 ID。您可以使用此注册 ID（one@gmail.com 和一台特定设备唯一）将消息仅发送到该应用程序+设备组合。

> 第 3 方应用程序服务器可以将消息发送到单个设备或多个设备。同时发送到多个设备的消息称为多播消息。

例如

```
Content-Type:application/json
Authorization:key=AIzaSyB-1uEai2WiUapxCs2Q0GZYzPu7Udno5aA

{
  "registration_ids" : ["APA91bHun4MxP5egoKMwt2KZFBaFUH-1RYqx..."],
  "data" : {
    ...
  },
} 
```

上面的代码将消息发送到在特定设备上运行的应用程序的一个实例

# mysql - 根据id的mysql对行进行排名

> ID：13063864
> 
> 赞同：1
> 
> 时间：2012-10-25T07:43:10.317
> 
> 标签：mysql

我有以下查询。

```
SET @rownum := 0;
SELECT result.rank, result.postid FROM (                    
                SELECT CASE @rownum 

                WHEN 5 THEN  @rownum:=1 ELSE @rownum:=@rownum + 1  END AS rank
                    ,c.postid

                FROM comments c
                ORDER BY c.postid DESC
                ) as result 
```

它以以下形式返回我的结果。

```
 rank               postid
    ---------------------------------
      1                    199
      2                    199
      3                    199
      4                    199
      5                    198
      1                    198
      2                    198
      3                    198
      4                    198
      5                    198
      6                    198 
```

现在我想更新这个查询，以便根据 postid.postid 指定排名 199 将从 1 到 4 排名，一旦它识别出新的 postid 出现，它应该再次将其从 1 排名到任何数量的记录id 包含。

`I want the count of rank for each postid to start from 1 and goto the number of times that postid is appearing.`

**编辑：**

@lieven 检查这张图片仍然有问题。![](../Images/47dbc941536e1c4bef2f1cc2b7072244.png)

如您所见，帖子已`172`完成，但排名仍在继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:47:44.707

您可以按多个字段排序：

```
ORDER BY c.postid DESC, c.rank 
```

第一个具有最高优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:21:53.573

您可以使用以下语句，但在任何大表上性能都将是异常的。

对于每条记录，都会执行一个子选择，将其`count`作为 equal 的排名，`postid`其中主键小于或等于当前记录的主键。如果返回 100 条记录，本质上将执行 101 条语句。

**SQL 语句（慢）**

```
>     SELECT c.postid    
>            , (SELECT COUNT(*) 
>               FROM   comments 
>               WHERE  postid = c.postid 
>                      AND tempid <= c.tempid
>              ) AS rank
>     FROM   comments c
>     ORDER BY
>            c.postid 
```

**SQL 语句 (fast(er))**

```
>     SET @rank := 1;
>     
>     SELECT  c1.postid
>             , CASE WHEN c1.postid= c2.postid 
>               THEN @rank := @rank + 1 
>               ELSE @rank := 1 
>               END AS Rank
>     FROM    (
>               SELECT  c.postid
>                       , @rownum1 := @rownum1 + 1 AS rownum
>               FROM    comments c, (SELECT @rownum1 := 1) r       
>               ORDER BY
>                       c.postid
>             ) c1
>             LEFT OUTER JOIN (
>               SELECT  c.postid
>                       , @rownum2 := @rownum2 + 1 AS rownum
>               FROM    comments c, (SELECT @rownum2 := 1) r       
>               ORDER BY
>                       c.postid
>             ) c2 ON c2.postid = c1.postid AND c2.rownum = c1.rownum - 1
>      ORDER BY
>             c1.postid 
```

# android - How to play inline html 5 video on WebView

> ID：13063865
> 
> 赞同：1
> 
> 时间：2012-10-25T07:43:10.530
> 
> 标签：android, android-webview, android-websettings

How I can play html5 video embedded in html page on web view. Please provide descriptive example. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:53:02.767

请参阅HTML5 视频支持部分中有关[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)的文档。

# javascript - how to adjust left and right background in html css?

> ID：13063869
> 
> 赞同：-3
> 
> 时间：2012-10-25T07:43:29.430
> 
> 标签：javascript, html, css

```
<div class="wrapper">
    <div class="left-bg bg-part" id="left-bg">

    </div>

    <div class="content-hold" id="content-hold">
 </div>
    <div class="right-bg bg-part" id="right-bg">

    </div>

</div> 
```

here is the less css code I write.

```
 .wrapper {
        .bg-part {
          width: 30px;
          background: #a2ca46;
          height: 100%;
          position: absolute;
          top: 0;

        }
        .left-bg {
          float: left;
          left: 0;
        }
        .right-bg {
          float: right;
          right: 0;
        }
    } 
```

when content take more place on page the left side and right side's height never incrase. what should I do to make left-bg and right-bg lever to the content-hold's width.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:08:29.477

一种选择是使用一行三列的 html 表格。根据需要将左右列的宽度设置为 30px。

# html - passing variables to perl script from html

> ID：13063879
> 
> 赞同：0
> 
> 时间：2012-10-25T07:44:17.777
> 
> 标签：html, perl, url-parameters

I am trying to call a perl script from my HTML page. The way am trying to do is to call the url of the perl script located on the server.

Here is the piece of code:

HTML:

```
var fname = "Bob";
var url='http://xxx.com:30000/cgi-bin/abc.pl?title=fname';  
window.open(url,"_self"); 
```

The way am trying to retrieve it in perl as:

Perl:

```
print "$ARGV[0]\n"; 
```

Now, I have 3 questions:

1.  I think this is the correct way to pass the variables but am not able to print the argument in perl.
2.  If i want to pass another variable lname, how do i append it to the url?
3.  My window.open should open the output in the same window, since it uses the parameter `_self`. Still it doesn't.

Could anybody point out the problems?

Thanks, Buzz

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:56:03.940

No`@ARGV`包含命令行参数并且将为空。

您需要[CGI](http://perldoc.perl.org/CGI.html)模块

```
use warnings;
use strict;

use CGI;
my $query = CGI->new;
print $query->param( 'title' ); 
```

编辑：查看 dan1111 关于如何生成 HTML 并将其显示在浏览器中的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T08:02:44.070

除了 Matteo 所说的，一个简单的`print`语句还不足以将一些输出发送到浏览器。

请参阅[我最近写的一个答案，](https://stackoverflow.com/a/13063732/1584772)给出了一个带有输出的示例 CGI 脚本。

关于您的其他问题：

变量附加到一个用 分隔的 url `&`：

```
var url='http://xxx.com:30000/cgi-bin/abc.pl?title=fname&description=blah'; 
```

基于[这个问题](https://stackoverflow.com/questions/4813879/window-open-target-self-v-window-location-href)，也许您应该尝试一下`window.location.href = url;`（尽管这并不能解释为什么您的代码不起作用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-09T23:46:16.097

有两种不同的环境，每个环境都以两种不同的方式传递变量。命令行可以通过@ARGV 传递变量，浏览器可以通过@ENV 传递变量。无论您使用什么语言，这些都是您必须使用的数组。

# git - 是否可以在一台服务器上运行 gerrit/phabricator（代码审查）而在另一台服务器上运行 git 存储库？并让它们同步？

> ID：13063882
> 
> 赞同：3
> 
> 时间：2012-10-25T07:44:28.627
> 
> 标签：git, gerrit, phabricator

题目如题。我想使用 gerrit 或 phabricator 等工具改进我们的代码审查。我们无法访问托管我们的 git 存储库的服务器，但我们有其他服务器可以运行 gerrit 或 phabricator - 取决于哪个更好/让我们做我们想做的事。

第一个问题：有可能吗？二：怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:29:53.957

如果开发人员可能会将更改推送到远程存储库，那么 Gerrit/Phabricator 就不会知道这些更改，那么就没有好的选择。代码审查在这一点上并不是真正有效的——开发人员可能会提出一个看起来完全有效的更改以供审查，但实际上这些更改是对上游删除或重构的文件进行的。

我对 Phabricator 不是很熟悉，但这里有一些 Gerrit 的选项可能会起作用：

1.  您可以在本地挂载远程存储库，使其看起来像 Gerrit 的本地文件系统吗？那将是理想的解决方案 - Gerrit 将推送到此存储库并捕获任何合并问题，并将它们呈现给用户。

2.  您可以使用 Gerrit 的复制功能将合并的更改推送到远程存储库。如果存在合并冲突，我不知道处理它们的好方法。

3.  您可以为 Gerrit 编写一个挂钩，将合并的更改推送到远程存储库。这比 #2 更灵活 - 您可以在合并冲突时收到挂钩电子邮件。

4.  使用解决方案 2 或 3，您需要某种方法来保持 Gerrit 的存储库副本是最新的。推送到 Gerrit（绕过审查）的远程存储库上的 git 挂钩是最佳选择。否则我认为你必须有一个脚本来轮询远程服务器的更改并将它们推送到 Gerrit。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:11:21.693

Phabricator 不需要存储库的主副本。许多安装（包括 Phabricator 的元安装）当前将它与 GitHub 一起使用，它不提供对 master 的访问。

这是 Phabricator 目前运行的唯一模式（它目前无法管理 master）所以只需按照正常的安装说明进行配置，特别是：

[http://www.phabricator.com/docs/phabricator/article/Diffusion_User_Guide.html](http://www.phabricator.com/docs/phabricator/article/Diffusion_User_Guide.html)

# sql-server - 如何断开除sa之外的sql server中的所有用户？

> ID：13063887
> 
> 赞同：6
> 
> 时间：2012-10-25T07:44:36.153
> 
> 标签：sql-server, sql-server-2008, maintenance

我想断开所有用户与 SQL Server 的连接，除了`sa`.

对此的需求是：

我为我的 ERP 编写了一个数据库维护实用程序。在运行它之前，我需要要求所有用户注销。因此，我想以某种方式给他们一条消息（通过 ERP）“5 分钟后断开连接，请保存您的工作并注销，否则您将被踢出”，然后在 5 分钟后在服务器上运行命令断开所有人的连接。我希望不要断开“sa”或无论如何“1 个特定用户”，因为数据库维护实用程序将使用该用户进行数据库连接。

我找到了这个：

```
use master
alter database MyDatabase set offline with rollback immediate 
```

但是怎么说“一个特定的用户是一个例外”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T07:52:51.967

使用`single_user`代替`offline`：

```
alter database [DatabaseName] set single_user with rollback immediate 
```

最初的“单一用户”将是发出`alter database`命令的人。然后，您可以继续只允许特定用户登录：

```
alter login [LoginName] disable 
```

# asp.net - 在 GridView asp.net 中将数据绑定到 DropDownList

> ID：13063891
> 
> 赞同：0
> 
> 时间：2012-10-25T07:44:50.347
> 
> 标签：asp.net

我在 GridView 中有一个带有 GridView 和一些控件的 Web 表单。我在 gridview 的 EdtItemTemplate 中有一个 DropDownList。

我需要将此 DropDownList 与我的 CodeBehind 文件中的某个方法绑定，该方法返回一个 LisItems 类型的数组。

我面临的问题是这个。由于控件位于 EditItemTemplate 中，使用 FindControl("MyControlID") 似乎在任何 GridView 事件中都不起作用，它返回 null，换句话说，它似乎无法找到控件，除非我使用 OnRowUpdating 事件，但我不能使用此事件，因为在此之前需要绑定数据。

无论如何我可以使用 <%# Bind("MyMethodName") %> 来绑定控件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:10:57.420

试试这个

在 App_Code 中创建一个数据类，像这样

```
public static class Fruits
{
    public static List<string> GetFruits()
    {
        return new string[] { "Apple", "Mango", "Banana", "Grapes" }.ToList();
    }
} 
```

在您的页面上添加一个网格，我想你们都准备好了

```
<asp:GridView runat="server" ID="grid" AutoGenerateColumns="false" OnRowEditing="grid_RowEditing">
        <Columns>
            <asp:TemplateField HeaderText="Selected Fruit">
                <ItemTemplate>
                    <asp:Label runat="server" ID="Fruit" Text='<%# Eval("Fruits") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList runat="server" ID="fruits" DataSourceID="fruitsDS" />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Edit">
                <ItemTemplate>
                    <asp:Button runat="server" ID="btnEdit" Text="Edit" CommandName="Edit" />
            </ItemTemplate>
      </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

并添加一个对象数据源来绑定你的编辑模板的下拉菜单

```
<asp:ObjectDataSource ID="fruitsDS" runat="server" SelectMethod="GetFruits" TypeName="Fruits" /> 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:23:43.187

试试这个

```
protected void RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowState == DataControlRowState.Edit)
    {
        DropDownList dl = (DropDownList)e.Row.FindControl("myList");
        dl.DataSource = new string[] { "A", "B" };
        dl.DataBind();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:00:45.393

gridview rowdatabound 将用于[将数据绑定到 gridview 中的下拉列表。](http://forums.asp.net/p/1857575/5206062.aspx/1?Bind%20data%20to%20dropdown%20in%20gridview%20)

DropDownList ddl = (DropDownList)e.Row.FindControl("ddlcity"); ddl.DataSource = s;

# jquery - 生成新表行并捕获该行的点击 JQuery

> ID：13063897
> 
> 赞同：0
> 
> 时间：2012-10-25T07:45:16.013
> 
> 标签：jquery, html, onclick

我正在尝试执行以下操作，

我在表格中有一个表格，当单击按钮时，我有一个带有按钮的输入，添加了一个新行，然后我希望捕获对新行元素的任何点击。

```
<table id="mytable">
<tr>
    <td><input type="textbox" class="mytb"/></td>
    <td><button id="addButton">Add New Row</button></td>     
</tr>
</table>​

$(document).ready(function(){

// generate new row
$('#addButton').on('click', function(event){
  event.preventDefault();                 
  var newRow = '<tr><td><input type="text" class="newtb"/></td></tr>';
  $('#mytable').append(newRow);        
});

// capture click of new row?
$('.newtb').on('click', function(event){
    event.preventDefault();  
    alert('clicked');
});
}); 
```

[JSFiddle 示例](http://jsfiddle.net/suF7b/1/)

我被困在创建新行但未捕获单击事件。

如果有人能指出我正确的方向，我将不胜感激，但有人可以解释为什么会发生这种情况，因为我真的被卡住了，想增加我的 JavaScript 知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:53:08.700

我最近遇到过几次。如果您将事件绑定到新的表格行，它将不起作用。原因是在您进行绑定时这些行不存在。您*可以*使用`live`，但我认为它已被[弃用](http://api.jquery.com/live/ "已弃用")以支持以下样式。

您可以使用`on`将其绑定到表，如下所示：

```
$('#myTable').on('click', '.newtb', function (event) {
    //Do stuff
}); 
```

这会在表上设置事件，该事件在绑定时已经存在于 DOM 中。

希望这是有道理的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:48:29.370

```
$('body').on('click', '.newtb', function(event){
    event.preventDefault();  
    alert('clicked');
}); 
```

**[演示](http://jsfiddle.net/pintu31/suF7b/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:49:43.640

请在您的小提琴中查看以下更新。

[http://jsfiddle.net/suF7b/8/](http://jsfiddle.net/suF7b/8/)

每次添加新代码时都需要进行该事件绑定。

```
$('#mytable').append(newRow);
captureEvent();

function captureEvent() {
    // capture click of new row?
    $('.newtb').on('click', function(event){
        event.preventDefault();  
        alert('clicked');
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T07:59:39.257

使用事件委托 ... **[=> FIDDLE HERE <=](http://jsfiddle.net/qBBdc/)**

// 对我来说，“手动”检测目标元素是最好的方法！

// 因为您可以完全处理检测点击元素的方式...

```
$('#mytable').on('click', function(e){
    var $target = $(e.target), $tr = $target.closest('tr');
    if($tr.length)){
      //  $tr.get(0) is the clicked TR element
      alert($tr.get(0).nodeName+' clicked !'+"\n"+e.target.nodeName+' the actual clicked element');
      event.preventDefault();
      return false;
    }
}); 
```

- *替代已弃用的“live”方法：使用“on”方法和委托签名代替*

```
$('#mytable').on('click', 'tr', function(event){
    // don't know if any element inside the tr will be caught while clicking on it
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-25T07:49:13.140

看看这个jsfiddle：

[JSFIDDLE](http://jsfiddle.net/suF7b/5/)

```
<table id="mytable">
<tr>
    <td><input type="textbox" class="mytb"/></td>
    <td><button id="addButton">Add New Row</button></td>     
</tr>
</table>​

$(document).ready(function(){

// generate new row
$('#addButton').on('click', function(event){
  event.preventDefault();                 
  var newRow = '<tr><td><input type="text" class="newtb"/></td></tr>';
  $('#mytable').append(newRow);        
});

// capture click of new row?
$('.newtb').on('click', function(event){
    event.preventDefault();  
    alert('clicked');
});
}); 
```

# iphone - can we install multiple application using single wildcard App ID in iPhone?

> ID：13063900
> 
> 赞同：2
> 
> 时间：2012-10-25T07:45:22.863
> 
> 标签：iphone, ios5, development-environment, wildcard, iphone-developer-program

I have create three developer profile (like A,B,C) with wildcard APP ID.

First, I have install application A using profile A in device.

Now, I have install application B using profile B in device, then this B application is overwrite on application A. means now application A is not available in device only B application is available.

Same issue generate when we use C profile.

So, only one application is install in device at a time that's my problem.

so. pls tell me how to install more than one application in device without generated different APP ID(means using wildcard APP ID).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:48:56.510

似乎您的所有应用程序都使用相同的包标识符（在应用程序的 info.plist 文件中指定）..

这个想法是：

1.  每个应用程序都有自己的唯一标识符；

2.  ( `*`) 通配符配置文件只适用于任何标识符。

捆绑标识符具有通用形式：

```
domain.name.appName 
```

例如

```
com.apple.iphoto 
```

我建议检查这些值是如何在您的应用程序中定义的。

# android - two different layouts for one activity

> ID：13063902
> 
> 赞同：21
> 
> 时间：2012-10-25T07:45:26.833
> 
> 标签：android, android-layout

Is it possible to have two different layouts for different cases in the same activity or do I have to use `intent` to call another `activity` with a different layout

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-25T07:48:46.787

是的，有可能。您可以为单个活动使用尽可能多的布局，但显然不能同时使用。你可以使用类似的东西：

```
if (Case_A)
  setContentView(R.layout.layout1);

else if (Case_B)
  setContentView(R.layout.layout2); 
```

等等...

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-25T09:41:09.853

是的，这也可以通过开关盒实现

我已经尝试过这段代码......

```
switch (condition) {
        case 1:  
    setContentView(R.layout.layout1);
                 break;
        case 2:  
    setContentView(R.layout.layout2);
                 break;
        case 3:  
    setContentView(R.layout.layout3);
                 break;

        default: 
    setContentView(R.layout.main);
                 break;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T07:48:54.967

我建议使用[片段](http://developer.android.com/guide/components/fragments.html)

如果您对片段不满意，如果您可以解释更多以找到其他解决方案，这将很有帮助

**编辑**

使用 android 支持库来支持较低的操作系统版本

**编辑2**

如果要使用两个 xml，可以将两个 xml 合二为一并使用它

```
<include layout="@layout/YOURXMLNAME1" />
<include layout="@layout/YOURXMLNAME2" /> 
```

这在许多情况下再次使用布局时也很有用

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-02T08:58:34.230

有很多方法可以解决这个问题。其他答案至少包括两种方法 - 根据情况使用 setContentView 和使用片段。我还想谈一谈。例如，您包含两个布局

```
<include
android:id = "@+id/layout1"
layout = .../>

<include
android:id = "@+id/layout2"
layout = ...
android:visibility = "gone"/> 
```

在您的 java 代码中，您可以根据用例隐藏或显示您的布局。例如，将内容视图设置为显示上面的布局会显示 layout1。当用户单击下一个按钮时，您可以获得对 layout1 的引用并将其可见性设置为已消失，并将 layout2 的可见性设置为可见。

```
LinearLayout layout1 = findViewById(R.id.layout1);
LinearLayout layout2 = findViewById(R.id.layout2);

buttonNext.setOnClickListener(new View.OnClickListener()
{ 
layout1.setVisibility(View.GONE);
layout2.setVisibility(View.VISIBLE);
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T07:58:51.327

这是最适合您的解决方案[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。
ViewFlipper 是一个简单的 ViewAnimator，它将在添加到其中的两个或多个视图之间进行动画处理。一次只显示一个孩子。如果需要，可以定期在每个孩子之间自动翻转。 [这](http://dj-android.blogspot.in/2012/03/view-flipper-example-android.html)是取景器的好例子。
你也可以看看[这个](http://wptrafficanalyzer.in/blog/image-slideshow-using-viewflipper-in-android/)。
编辑：-[为您提供一个 StackoverFlow 答案](https://stackoverflow.com/a/6871570/1139398)

# mysql - 按字符串的一部分加入

> ID：13063912
> 
> 赞同：0
> 
> 时间：2012-10-25T07:46:03.170
> 
> 标签：mysql, join

我有以下表格：

```
**visitors**
+---------------------+--------------+------+-----+---------+----------------+
| Field               | Type         | Null | Key | Default | Extra          |
+---------------------+--------------+------+-----+---------+----------------+
| visitors_id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| visitors_path       | varchar(255) | NO   |     |         |                |
+---------------------+--------------+------+-----+---------+----------------+

**fedora_info**
+----------------+--------------+------+-----+---------+-------+
| Field          | Type         | Null | Key | Default | Extra |
+----------------+--------------+------+-----+---------+-------+
| pid            | varchar(255) | NO   | PRI |         |       |
| owner_uid      | int(11)      | YES  |     | NULL    |       |
+----------------+--------------+------+-----+---------+-------+ 
```

首先，我通过以下方式寻找`visitors_path`与特定页面相关的内容：

```
SELECT visitors_id, visitors_path
FROM visitors
WHERE visitors_path REGEXP '[[:<:]]fedora/repository/.*:[0-9]+$'; 
```

上述查询返回预期结果。

现在在第二个表中`.*:[0-9]+`提到的上述查询中。现在我想知道在第二个表中`pid`分组的上述查询中的结果计数。`owner_uid`

我怎样才能加入这个表？

**编辑**

样本数据：

```
visitors
+-------------+---------------------------------+
| visitors_id | visitors_path                   |
+-------------+---------------------------------+
|        4574 | fedora/repository/islandora:123 |
|        4575 | fedora/repository/islandora:123 |
|        4580 | fedora/repository/islandora:321 |
|        4681 | fedora/repository/islandora:321 |
|        4682 | fedora/repository/islandora:321 |
|        4704 | fedora/repository/islandora:321 |
|        4706 | fedora/repository/islandora:456 |
|        4741 | fedora/repository/islandora:456 |
|        4743 | fedora/repository/islandora:789 |
|        4769 | fedora/repository/islandora:789 |
+-------------+---------------------------------+

fedora_info
+-----------------+-----------+
| pid             | owner_uid |
+-----------------+-----------+
| islandora:123   |         1 |
| islandora:321   |         2 |
| islandora:456   |         3 |
| islandora:789   |         4 |
+-----------------+-----------+

Expected result:
+-----------------+-----------+
| count           | owner_uid |
+-----------------+-----------+
| 2               |         1 |
| 4               |         2 |
| 3               |         3 |
| 2               |         4 |
| 0               |         5 |
+-----------------+-----------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:05:42.120

我建议你**规范你的数据库**。当在前端语言的`visitors`提取中插入行并将其放在单独的列中时（例如）。然后你就可以轻松加入了。`pid``fi_pid`

以下查询可能对您有用。但这会占用很少的CPU资源。

```
SELECT 
       COUNT(a.visitors_id) as `count`,
       f.owner_uid
FROM   (SELECT visitors_id, 
               visitors_path, 
               SUBSTRING(visitors_path, ( LENGTH(visitors_path) - 
                                          LOCATE('/', REVERSE(visitors_path)) ) 
                                        + 2) AS 
                      pid 
        FROM   visitors 
        WHERE  visitors_path REGEXP '[[:<:]]fedora/repository/.*:[0-9]+$') AS `a`

JOIN fedora_info AS f 
         ON ( a.pid = f.pid ) 

GROUP  BY f.owner_uid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:39:40.717

以下查询返回预期结果，但速度很慢`Query took 9.6700 sec`

```
SELECT COUNT(t2.pid), t1.owner_uid
FROM fedora_info t1
JOIN (SELECT TRIM(LEADING 'fedora/repository/' FROM visitors_path) as pid
FROM visitors
WHERE visitors_path REGEXP '[[:<:]]fedora/repository/.*:[0-9]+$') t2 ON t1.pid = t2.pid
GROUP BY t1.owner_uid 
```

# javascript - 检查用户机器上是否安装了 .net 4 客户端配置文件

> ID：13063918
> 
> 赞同：1
> 
> 时间：2012-10-25T07:46:29.130
> 
> 标签：javascript, .net-4.0, registry, clickonce, user-agent

这个论坛已经提出并回答了类似的问题，但我在这里有不同的查询。

我有一个带有安装按钮的网页，它将应用程序（点击一次）下载并安装到用户的机器中。如果用户的机器缺少 .Net 4 客户端配置文件，我需要在网页上显示一条消息。

我知道的选项是：

1.  检查用户代理字符串（我猜不推荐，根据这么多专家）
2.  检查注册表项（在我的情况下这是不可能的，因为我的用户可能在他们的机器上没有管理员权限，这将阻止检查注册表的代码）

现在我想唯一的选择是检查用户代理字符串。我搜索了 .net 4 客户端配置文件的用户代理字符串，但在任何地方都找不到。

请让我知道是否有任何其他选项可供我使用，或者为此提供合适的用户代理字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:52:49.130

您是否考虑过编写一个与程序一起下载的批处理脚本，并且在安装失败的情况下报告类似于“无法安装”的内容。请联系您的系统管理员或执行相同操作的可执行文件？在没有管理员权限的管理得当的客户端计算机中，您不太可能访问注册表信息，尽管可能有一个可以在批处理脚本中运行的 .net caps 程序。

或者，您可能会考虑类似银光或闪光灯的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:31:38.140

自己找到的：）

navigator.userAgent.indexOf(".NET4.0C") 为我做了诀窍。

```
if (navigator.userAgent.indexOf(".NET4.0C") != -1)
    // .net 4.0 Client Profile exists
else
    // doesn't exist. 
```

# asp.net-mvc - 我如何在 asp.net mvc 中使用区域自定义路由

> ID：13063931
> 
> 赞同：0
> 
> 时间：2012-10-25T07:47:15.640
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我正在研究 asp.net mvc 3。我正在尝试用区域实现该项目。我面临路由问题。我有类似的文件夹结构，`projectName/areas/Dashboard/`并且在我的 DashboardAreaRegistration.cs

```
public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Default_Dashboard",
                "Dashboard/{controller}/{action}/{id}",
                new { action = "Index", id = UrlParameter.Optional }
            );
        } 
```

所以我的路由看起来像，`localhost:56788/Dashboard/Dashboard/Index`在这里我需要我的路由应该看起来像`localhost:56788/Dashboard/Index`我写的那样，

```
context.MapRoute(
                "Default_Dashboard",
                "Dashboard/{action}/{id}",
                new { area = "Dashboard", controller = "Dashboard", action = "PatientPortal", id = UrlParameter.Optional },
                new[]{typeof(Controllers.DashboardController).Namespace}
            );

context.MapRoute(
                "Default_Dashboard",
                "{controller}/{action}/{id}",
                new { area = "Dashboard", controller = "Dashboard", action = "PatientPortal", id = UrlParameter.Optional },
                new[]{typeof(Controllers.DashboardController).Namespace}
            ); 
```

但是没有用，它们都对我不起作用，这意味着它显示资源未找到错误。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:14:06.423

尝试安装[Route Debugger nuget 包](http://nuget.org/packages/routedebugger)，它可以帮助您了解为什么事情不匹配

# delphi - 错误：F1026 找不到文件：“System.Actions.dcu”从 XE3 切换回 Delphi XE2

> ID：13063935
> 
> 赞同：3
> 
> 时间：2012-10-25T07:47:39.157
> 
> 标签：delphi, migration, delphi-xe2, delphi-xe3

我正在将我的代码从 XE2 移到 Delphi XE3，但它应该在两者中编译。我注意到某些单元会自动将“System.Actions”添加到USES 子句中。当返回 XE2 时，这会导致错误：

F1026 找不到文件：'System.Actions.dcu'（单位范围“系统”仅表示 Win64、OSX32、Win32）

我从来没有真正理解单位范围。有没有正确的解决方案来解决这个问题，而不是在编译器版本 {$IFDEF} 中包装东西？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T13:51:53.720

Remy 所说的非常正确，但可能有一种更简单的方法可以让您的代码在 XE2 和 XE3 中都工作。只需添加一个单位别名 from`System.Actions`到`Vcl.ActnList`。

[在Delphi 编译器](http://docwiki.embarcadero.com/RADStudio/XE3/en/Delphi_Compiler)页面上的项目选项中添加它。您需要添加以下内容：

```
System.Actions=Vcl.ActnList 
```

请注意，如果您需要在 XE2 和 XE3 中使用相同的 .dproj 文件进行编译，那么您就不走运了。该单元别名设置将停止在 XE3 下编译程序。但是，如果 XE2 和 XE3 有不同的 .dproj 文件，那么这将允许您在两者中使用相同的源。或者，如果您只需要在命令行编译 XE2，那么您可以在此处添加此单元别名。我不知道这是否会对您有所帮助，但我知道单位别名功能在过去不止一次帮助我摆脱了类似的情况。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T09:13:25.780

XE2中没有`Actions`单元。它是 XE3 中的新功能，作为将 Actions 支持引入 FireMonkey 的重构工作的一部分。这是记录在案的：

[Delphi 和 C++Builder XE3 的新功能](http://docwiki.embarcadero.com/RADStudio/XE3/en/What%27s_New_in_Delphi_and_C%2B%2BBuilder_XE3)：

> 动作：FireMonkey 现在支持动作和动作列表，这两个功能以前仅在 VCL 中支持：
> 
> 重要提示：每个使用动作的 FireMonkey 或 VCL 应用程序都必须在使用部分指定 System.Actions 和 System.Classes 单元。

[VCL 动作实施的变化](http://docwiki.embarcadero.com/RADStudio/XE3/en/Changes_in_Implementation_of_VCL_Actions)

> System.Actions 单元在 RTL 包中创建。Vcl.ActnList 单元中提供独立于框架的动作特性的类被移到这个单元中。System.Actions 中的类扩展了 TBasicAction 和 TBasicActionLink 类中引入的动作特性的最基本行为。
> 
> 重要提示：由于这些更改，您需要将 System.Classes 和 System.Actions 单元添加到使用部分。

[FireMonkey 和 VCL 中动作的实现](http://docwiki.embarcadero.com/RADStudio/XE3/en/Implementation_of_Actions_in_FireMonkey_and_VCL)

> 火猴 (FMX)
> 
> 独立于框架的实现对于 FireMonkey 和 VCL 来说是通用的：这个基本的动作功能在新的 System.Actions RTL 单元中得到了扩展。
> 
> VCL
> 
> 在以前的 RAD Studio 版本中在 Vcl.ActnList 单元中实现的独立于框架的操作功能现在位于 RTL 中的新 System.Actions 单元中（常见于 VCL 和 FireMonkey）。
> 
> 重要提示：由于这些更改，您需要将 System.Actions 单元添加到使用操作的 VCL 应用程序中的使用部分（或 #includes）。

`Actions`如果您实际上没有在代码中使用操作，则必须删除对的引用，否则`{$IFDEF}`将其删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-03T13:02:35.157

如果您有一个项目文件，您仍然可以使用项目路径目录中的“虚拟” System.Actions.pas 文件解决问题：该文件将在 XE2 下获取。XE3 编译器将在 IDE /lib 目录中找到他的 System.Actions.dcu。

无论如何：在正常情况下，您应该使用不同的项目文件 - 然后建议使用具有单元别名的解决方案。

虚拟 System.Actions.pas 可能如下所示：

```
 unit System.Actions;
    (*
    XE2 compatibility unit: since XE3 unit System.Actions will be inserted into every 
    interface in units which use actions.
    compilerswitch in [uses] is ignored by IDE - so this solution enable successful
    compilation in XE2 with same project file than XE3
    *)
    interface

    implementation

    end. 
```

# git - 服务器上的中央 git 存储库，从中推送和拉取

> ID：13063938
> 
> 赞同：1
> 
> 时间：2012-10-25T07:47:46.213
> 
> 标签：git, clone, push, pull

这很可能是一个重复的问题，但我只是找不到我的问题的令人满意的答案。情况是这样的，我有一个网络服务器，我可以通过 ssh 与之交谈，它安装了 git。上面有一个代表网站的文件夹。以前，每个人都只能同时在服务器上工作（通过 FTP）或下载副本到那里的机器，在那里工作，然后通过 FTP 将其返回。

我现在想要的是使该文件夹成为 git repo，人们可以将其克隆到本地机器。处理它，并将更改推送回服务器。

我该怎么做呢？我试过在服务器上创建一个 repo。我可以克隆这个 repo，但不能向它推送任何东西。我已经阅读了一些关于裸 git repo 的内容，但在我看来这对我的问题不起作用，因为我希望服务器上的 repo 是实际的网站文件夹和文件。

我真的希望有人可以提供帮助，或者指出我正确的方向。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:51:18.463

从这里开始：http: [//git-scm.com/book/en/Git-on-the-Server](http://git-scm.com/book/en/Git-on-the-Server)。该文档广泛可用且非常全面，涵盖了有关设置 git 服务器的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:52:25.853

我真的建议将 git 存储库与部署目录分开。

将存储库推送到服务器并在生产中部署站点的新版本**必须**遵循不同的工作流程。实际上，您应该每天多次推送到 git 存储库...

鉴于您已经拥有 ssh 访问权限，您应该简单地

*   以您找到的标准方式使用裸存储库
*   基于 scp 或 rsync 构建一个单行部署脚本（当然您应该提交此脚本）并从其中一台开发计算机执行此脚本

**编辑 ：**

这是一个网站的单行部署脚本示例：

```
rsync -avz --del --stats --exclude="deploy.sh" /path/Chrall/web/* someid@someweb.org:/var/www/canop/chrall 
```

而且我通常在实际项目中使用稍微复杂的（4 或 5 行和一个配置）脚本（参考[我的 github 存储库之一](https://github.com/Canop/braldop/tree/master/scripts)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T19:15:16.227

**准备 web 的 git 部署的简单方法：**

*   准备**不应该共享**的文件列表- temp 和 data 目录 - 到`.gitignore`web 服务器目录中的文件中，应该开始共享：

    ```
    cd /var/www/mydomain.org/
    echo temp >> .gitignore
    echo data >> .gitignore 
    ```

*   在此目录中启动 git 存储库：

    ```
    git init
    git add -A
    git commit -m "Init" 
    ```

*   允许推入此存储库，尽管它不是裸存储库：

    ```
    git config receive.denycurrentbranch false 
    ```

*   添加挂钩以在推送新版本时将工作树设置为当前版本 - 此脚本将在推送后启动：

    ```
    echo '#!/bin/sh'        >  .git/hooks/post-receive
    echo 'git checkout -f'  >> .git/hooks/post-receive
    echo 'git reset --hard' >> .git/hooks/post-receive
    chmod +x .git/hooks/post-receive 
    ```

现在应该准备好服务器，现在您可以将存储库克隆到客户端并正常推送。

# mysql - mysql性能和指数

> ID：13063943
> 
> 赞同：0
> 
> 时间：2012-10-25T07:48:00.867
> 
> 标签：mysql, indexing

我有 5 个关系表，比如

```
ID | FK_USER | FK_POST | DATE 
```

为每种类型的关系使用单独的表，或者只创建一个表，是否更快更有效？

```
ID | FK_USER | FK_POST | TYPE | DATE 
```

其中 type 是一个枚举，我在 TYPE 上放了一个 INDEX ？

假设我搜索“订阅”（这是我的关系类型之一）是使用单独的表并在其上搜索更快，还是使用组合表并将“ `where TYPE = 1`”添加到查询字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:10:06.630

最好在“类型”上有一个带有 where 子句的组合表。无论以何种方式存储数据，性能都不会有太大差异。但是当您有单独的表时，将来如果您要添加新类型，则必须创建另一个表。这将增加您的数据管理头痛。

# c# - 在没有行绑定事件的网格内查找网格控件

> ID：13063946
> 
> 赞同：0
> 
> 时间：2012-10-25T07:48:10.990
> 
> 标签：c#, asp.net

我有一个公司列表网格及其分支机构（公司网格内的子网格）。我有每个绑定的复选框及其 ID（Companyid 和 branchid）。我有一个按钮可以从公司或分支机构添加这些选定的值并在另一个网格中显示所有选定的记录。添加按钮位于 gridview 之外，因此单击添加按钮我必须在这里找到分支gridview，我可以找到它的父网格。我编写了以下代码来查找添加按钮的onclick事件中的控件，但它没有找到该控件：

> `GridView gvbranch= (GridView)gvcompany.FindControl("gvbranch");`

所以请帮助我如何在添加点击事件中找到该子控件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:11:39.810

```
 foreach (GridViewRow row in gv.Rows)
    {
        TextBox txt = row.Cells[0].Controls[0].FindControl("TextBox1") as TextBox;
        string value = txt.Text;
        Response.Write(value);
    } 
```

在按钮事件上使用类似的东西

# php - 如何使用 Zend_Gdata_Calendar 类编辑 Google 日历事件？

> ID：13063952
> 
> 赞同：1
> 
> 时间：2012-10-25T07:48:41.373
> 
> 标签：php, zend-framework, google-calendar-api

当您从日历中检索数据时，您可以像这样在检索数据之前设置用户

```
$gdataCal = new Zend_Gdata_Calendar($this->client, $this->domain);
$calendar_list = $gdataCal->getCalendarListFeed();
$query = $gdataCal->newEventQuery();
$query->setUser( $username . '%40domain.com'); 
```

但是当你想创建/更新一个事件时，你怎么能做到这一点呢？

```
$service = new Zend_Gdata_Calendar($this->client, $this->domain);
$event = $service->newEventEntry(); 
```

`setUser`返回的任何对象都没有类似的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:52:45.780

我也遇到过类似的情况，但是，我所做的事情是：

```
$service->delete($event->getEditLink()-><URL-Of-The-Event>); 
```

稍后，再创建一个。

然而，那是大约一年前的事了。我不确定是否有任何新功能出现，因为在那之后我再也不需要它了。

如果没有人回答，这个解决方法必须为你工作:)

# printing - SSRS 报告的字节大小不适合将其发送到打印机

> ID：13063955
> 
> 赞同：1
> 
> 时间：2012-10-25T07:48:46.183
> 
> 标签：printing, reporting-services, byte

我想将我的 SSRS 报告直接发送到打印机。为此，我将报告呈现为字节数组，然后将这些字节数组发送到打印机。

从 SSRS 打印按钮打印报告时，打印的报告大小与报告的大小完全相同。但问题是：当通过我的代码打印时，报告的大小不正确。

**生成字节的代码：**

```
 Private Function ExporttoPrinter()
    'Start : Code to Check the Page Count -- Binit
    Dim deviceInfo As String
    Dim format As String = "IMAGE"
    Dim encoding As String = ""
    Dim mimeType As String = ""
    Dim extension As String = ""
    Dim warnings As Warning() = Nothing
    Dim streamids As String() = Nothing
    Dim bytes As Byte() = New Byte(0) {&H0}
    Dim numberOfPages As Integer = 1
    Dim pages As Byte()() = New [Byte](-1)() {}
    Dim currentPageStream As Byte() = New Byte(0) {&H0}

    While currentPageStream.Length > 0
        deviceInfo = String.Format("<DeviceInfo><OutputFormat>EMF</OutputFormat><PrintDpiX>200</PrintDpiX><PrintDpiY>200</PrintDpiY> <StartPage>{0}</StartPage><PageWidth>15in</PageWidth><PageHeight>12in</PageHeight><MarginTop>0.5in</MarginTop><MarginLeft>1in</MarginLeft><MarginRight>0in</MarginRight><MarginBottom>0.5in</MarginBottom></DeviceInfo>", numberOfPages)

        currentPageStream = ReportViewer1.ServerReport.Render(format, deviceInfo, mimeType, encoding, extension, streamids, warnings)

        If currentPageStream.Length = 0 AndAlso numberOfPages = 1 Then
            'renderException = EnumRenderException.ZERO_LENGTH_STREAM;
            Exit While
        End If

        'Add the byte stream of current page in pages[] array so that we can have complete report in pages[][] array
        If currentPageStream.Length > 0 Then
            Array.Resize(pages, pages.Length + 1)
            pages(pages.Length - 1) = currentPageStream
            numberOfPages += 1
        End If
    End While

    numberOfPages = numberOfPages - 1
    ' new Checking End

    Dim objPrint As New clsReportPrinting
    objPrint.PrintReport(pages, "CutePDF Writer")

    Return True

End Function 
```

**将字节发送到打印机的代码：**

```
Public Class clsReportPrinting
Private byaPagesToPrint()() As Byte = Nothing, _
        m_oMetafile As Metafile = Nothing, _
        m_iNumberOfPages As Int32 = 0, _
        m_iCurrentPrintingPage As Int32 = 0, _
        m_iLastPrintingPage As Int32 = 0, _
        m_oCurrentPageStream As MemoryStream = Nothing, _
        m_oDelegate As Graphics.EnumerateMetafileProc = Nothing

Public Function PrinterExists(ByVal PrinterName As String) As Boolean

    'Returns TRUE if the named printer is amongst installed printers, FALSE otherwise
    Try

        PrinterName = PrinterName.Trim.ToUpper

        For Each sPrinter As String In PrinterSettings.InstalledPrinters

            'Printers may have UNC names, so we use .EndsWith to deal with \\Server\SharedPrinter
            'if we pass "SharedPrinter" as PrinterName
            If sPrinter.Trim.ToUpper.EndsWith(PrinterName) Then
                Return True
            End If

        Next

        Return False

    Catch oEx As Exception

        Throw (oEx)

        Return False

    End Try

End Function

Public Function MetafileCallback(ByVal oRecType As EmfPlusRecordType, _
                                  ByVal iFlags As Int32, _
                                  ByVal iDataSize As Int32, _
                                  ByVal dpData As IntPtr, _
                                  ByVal oCallbackData As PlayRecordCallback _
                                 ) As Boolean

    Dim byaDataArray() As Byte = Nothing

    If dpData <> IntPtr.Zero Then

        'Copy unmanaged data to managed array for PlayRecord call
        Array.Resize(Of Byte)(byaDataArray, iDataSize)
        Marshal.Copy(dpData, byaDataArray, 0, iDataSize)

    End If

    'Play the record
    m_oMetafile.PlayRecord(oRecType, iFlags, iDataSize, byaDataArray)

    Return True

End Function

Private Function MoveToPage(ByVal lPage As Int32) As Boolean

    'Check current page does exist
    If Me.byaPagesToPrint(m_iCurrentPrintingPage - 1) Is Nothing Then
        Return False
    End If

    'Set current page stream to desired rendered page
    m_oCurrentPageStream = New MemoryStream(Me.byaPagesToPrint(m_iCurrentPrintingPage - 1))
    'Set curernt stream position to its start
    m_oCurrentPageStream.Position = 0

    'Get rid of any former metafile
    If Not m_oMetafile Is Nothing Then
        m_oMetafile.Dispose()
        m_oMetafile = Nothing
    End If

    'Set local metafile to page
    m_oMetafile = New Metafile(m_oCurrentPageStream)

    'Must always return TRUE
    Return True

End Function

Public Sub pd_PrintPage(ByVal oSender As Object, _
                         ByVal oEV As PrintPageEventArgs)

    oEV.HasMorePages = False

    If (m_iCurrentPrintingPage <= m_iLastPrintingPage) And _
       (MoveToPage(m_iCurrentPrintingPage)) Then

        'Draw the page
        DrawPage(oEV.Graphics)

        'Point to next page
        m_iCurrentPrintingPage += 1

        'If there are more pages, flag so.
        oEV.HasMorePages = (m_iCurrentPrintingPage <= m_iLastPrintingPage)

    End If

End Sub

'This draws the current selected stream into a metafile
Public Sub DrawPage(ByVal oGrx As Graphics)

    If m_oCurrentPageStream Is Nothing Or _
       m_oCurrentPageStream.Length = 0 Or _
       m_oMetafile Is Nothing Then

        Return

    End If

    'Critical section follows (no more than one thread a time)
    SyncLock Me

        Dim iWidth As Int32 = m_oMetafile.Width, _
            iHeight As Int32 = m_oMetafile.Height, _
            oDestPoint As Point = Nothing

        'Prepare metafile delegate
        m_oDelegate = New Graphics.EnumerateMetafileProc(AddressOf MetafileCallback)

        'Draw in the rectangle
        oDestPoint = New Point(0, 0)
        oGrx.EnumerateMetafile(m_oMetafile, oDestPoint, m_oDelegate)

        'Clean up
        m_oDelegate = Nothing

    End SyncLock

End Sub

Public Function PrintReport(ByVal byaReport()() As Byte, _
                            ByVal sPrinterName As String _
                           ) As Boolean

    'Report data is an array of pages. Each page in turn is another byte array.

    Me.byaPagesToPrint = byaReport
    m_iNumberOfPages = Me.byaPagesToPrint.Length

    Try

        Dim oPS As PrinterSettings = New PrinterSettings
        oPS.MaximumPage = m_iNumberOfPages
        oPS.MinimumPage = 1
        oPS.PrintRange = PrintRange.SomePages
        oPS.FromPage = 1
        oPS.ToPage = m_iNumberOfPages
        oPS.PrinterName = sPrinterName
        'oPS.DefaultPageSettings.Landscape = False
        'oPS.DefaultPageSettings.Margins.Top = 0.5
        'oPS.DefaultPageSettings.Margins.Bottom = 0.5
        'oPS.DefaultPageSettings.Margins.Left = 0.83
        'oPS.DefaultPageSettings.Margins.Right = 0

        'oPS.DefaultPageSettings.PaperSize.Kind = PaperKind.Custom

        oPS.DefaultPageSettings.PaperSize = New PaperSize("Custom", 1500, 1200)

        'Dim value As Boolean

        'value = oPS.LandscapeAngle
        'oPS.LandscapeAngle = value
        Dim oPD As PrintDocument = New PrintDocument
        m_iCurrentPrintingPage = 1
        m_iLastPrintingPage = m_iNumberOfPages
        oPD.PrinterSettings = oPS

        'Do print the report
        AddHandler oPD.PrintPage, AddressOf Me.pd_PrintPage
        oPD.Print()

        Return True

    Catch oEx As Exception

        Throw (oEx)

    End Try

End Function

'Private Function RenderReport(ByVal reportPath As String, ByVal parameters As ExecutionService.ParameterValue()) As Byte()()
'    ' Private variables for rendering
'    Dim historyId As String = Nothing
'    Dim execHeader As New ExecutionService.ExecutionHeader()

'    Try
'        rs.Timeout = 300000
'        rs.ExecutionHeaderValue = execHeader
'        rs.LoadReport(reportPath, historyId)
'        If (parameters IsNot Nothing) Then
'            rs.SetExecutionParameters(parameters, "en_us")
'        End If

'        Dim pages As Byte()() = New [Byte](-1)() {}
'        Dim format As String = "IMAGE"
'        Dim numberOfPages As Integer = 1
'        Dim currentPageStream As Byte() = New Byte(0) {&H0}
'        ' put a byte to get the loop started
'        Dim extension As String = Nothing
'        Dim encoding As String = Nothing
'        Dim mimeType As String = Nothing
'        Dim streamIDs As String() = Nothing
'        Dim warnings As ExecutionService.Warning() = Nothing

'        While currentPageStream.Length > 0
'            Dim deviceInfo As String = [String].Format("<DeviceInfo><OutputFormat>EMF</OutputFormat><PrintDpiX>200</PrintDpiX><PrintDpiY>200</PrintDpiY>" & "<StartPage>{0}</StartPage></DeviceInfo>", numberOfPages)
'            'rs.Render will render the page defined by deviceInfo's <StartPage>{0}</StartPage> tag
'            currentPageStream = rs.Render(format, deviceInfo, extension, encoding, mimeType, warnings, _
'             streamIDs)

'            If currentPageStream.Length = 0 AndAlso numberOfPages = 1 Then
'                'renderException = EnumRenderException.ZERO_LENGTH_STREAM;
'                Exit While
'            End If

'            'Add the byte stream of current page in pages[] array so that we can have complete report in pages[][] array
'            If currentPageStream.Length > 0 Then
'                Array.Resize(pages, pages.Length + 1)
'                pages(pages.Length - 1) = currentPageStream
'                numberOfPages += 1
'            End If
'        End While

'        numberOfPages = numberOfPages - 1

'        Return pages
'    Catch ex As System.Web.Services.Protocols.SoapException
'        Console.WriteLine(ex.Detail.InnerXml)
'    Catch ex As Exception
'        Console.WriteLine(ex.Message)
'        ' Console.WriteLine("Number of pages: {0}", pages.Length);
'    Finally
'    End Try
'    Return Nothing
'End Function

End Class 
```

# java - 用于控制 Web 应用程序的 kinect API

> ID：13063968
> 
> 赞同：4
> 
> 时间：2012-10-25T07:49:30.270
> 
> 标签：java, javascript, kinect

我想将 kinect（对不起）连接到 PC，以便用户可以通过手势与我的 web 应用程序进行交互。我不清楚为了实现这一点涉及什么级别的编程，但 JavaScript API 将是理想的（Java 也是可以容忍的）。

我看过 DepthJS，但仅安装/设置就几乎打败了我。至少我需要用户能够移动光标并单击，但理想情况下，我还希望他们能够使用智能手机手势，例如捏合。

是否有可用的 API 提供这些功能，可以相对容易地安装/设置，并且可以使用 JavaScript 进行编程？我不知道这是否有什么不同，但我将在 Ubuntu 上进行开发。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:32:32.543

[Kinesis](http://kinesis.io/)利用 Web 技术，开发人员已经知道最擅长的 HTML/CSS/JavaScript。因此，您可以重用现有代码和现有团队，在 Kinect for Windows SDK 之上构建支持手势的应用程序

[Zigfu](http://zigfu.com/en/)为 Kinect 提供了一个名为 ZigJS 的浏览器插件，并将使用手势启用 HTML/JavaScript Kinect 应用程序。

[OpenKinect](http://openkinect.org/wiki/Main_Page)是一个开放社区，人们有兴趣在我们的 PC 和其他设备上使用令人惊叹的 Xbox Kinect 硬件。他们正在开发免费的开源库，这些库将使 Kinect 能够与 Windows、Linux 和 Mac 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:24:45.753

唐关于那个

`At a minimum I need the user to be able to move the cursor and click, but ideally I'd also like them to be able to use smartphone gestures such as pinching.`

你会发现很多关于鼠标光标跟踪的例子。我认为将鼠标连接到 kinect 是 kinect 开发人员尝试实现的第一个目标。这是很简单的事情。您只需将光标与一个连接连接，跟踪他并将其缩放以监控分辨率:)

但我不确定你是否想要它。即使是最低限度。我记得在channel9上我正在看有关由kinect控制的网站的电影。这项技术 100% 存在并且非常稳定。所以你只需要看看那里。

IMO 专注于 api`a/frameworks。将鼠标连接到 kinect 只是为了在网站上使用它有很多缺点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T14:17:27.337

微软去年 9 月发布了带有 Kinect.js 库的新 SDK 1.8。我确定这是您需要的[http://blogs.msdn.com/b/kinectforwindows/archive/2013/09/16/updated-sdk-with-html5-kinect-fusion-improvements-and-more.aspx](http://blogs.msdn.com/b/kinectforwindows/archive/2013/09/16/updated-sdk-with-html5-kinect-fusion-improvements-and-more.aspx)

# c# - 追加子节点

> ID：13063969
> 
> 赞同：0
> 
> 时间：2012-10-25T07:49:30.967
> 
> 标签：c#, xml, appendchild

我在这里遇到了一些任务。我想写入 xml 文件。

这是文件：

```
<?xml version="1.0" encoding="utf-8"?>
<lists>
<plannedList>
    <Skift-a></Skift-a>
    <Skift-b></Skift-b>
    <Skift-c></Skift-c>
    <Skift-d></Skift-d>
    <Skift-e></Skift-e>
  </plannedList>
  <requestedList>
    <Skift-a></Skift-a>
    <Skift-b></Skift-b>
    <Skift-c></Skift-c>
    <Skift-d></Skift-d>
    <Skift-e></Skift-e>
 </requestedList>
</lists> 
```

然后我想使用 c# 和例如数据集或其他方法在loggedIn Skift 下添加一个jobID。所以如果 Skift-a 登录，并按下一个按钮，我希望 xml 文件看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<lists>
<plannedList>
    <Skift-a></Skift-a>
    <Skift-b></Skift-b>
    <Skift-c></Skift-c>
    <Skift-d></Skift-d>
    <Skift-e></Skift-e>
  </plannedList>
  <requestedList>
    <Skift-a></Skift-a>
        <jobID>1<jobID/>
    <Skift-b></Skift-b>
    <Skift-c></Skift-c>
    <Skift-d></Skift-d>
    <Skift-e></Skift-e>
 </requestedList>
</lists> 
```

这是我迄今为止尝试过的：

```
 XmlDocument xmldoc = new XmlDocument();
        xmldoc.Load(this.Page.Server.MapPath("~/StoredData/JobsByUsers.xml"));

        XmlNode Skift = xmldoc.SelectSingleNode("/requestedList/" + User.Identity.Name.ToString());

        XmlNode newJobID = xmldoc.CreateNode(XmlNodeType.Element, "jobID", null);
        newJobID.InnerText = topID.ToString();

        Skift.AppendChild(newJobID);

        xmldoc.Save(this.Page.Server.MapPath("~/StoredData/JobsByUsers.xml")); 
```

# javascript - :not() 多选中的选择器

> ID：13063971
> 
> 赞同：2
> 
> 时间：2012-10-25T07:49:41.070
> 
> 标签：javascript, jquery, jquery-selectors

我有多项选择，我只需要访问未选择的项目

我尝试了以下代码，但它不起作用，因为它还返回所选项目。任何提示如何修复此代码？

```
$('select.myMultippleSelect option:not(selected)');

[
<option value=​"13">​Normal User​&lt;/option>​
, 
<option value=​"14" selected=​"selected">​Euna Baumbach​&lt;/option>​
, 
<option value=​"15">​Test​&lt;/option>​
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:54:06.757

有错别字，应该是`:`before `selected`。这是否存在于您的代码中？如果是这样，那就是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:54:09.113

看看它对我有用，你忘了包括：在你的代码中选择之前，更新的代码是

```
$('select.myMultippleSelect option:not(:selected)'); 
```

## [演示](http://jsfiddle.net/uzhWS/26/)

# java - 为什么 IE9 用 wicket 形式的 get 方法替换 post 方法？

> ID：13063973
> 
> 赞同：1
> 
> 时间：2012-10-25T07:49:48.757
> 
> 标签：java, wicket

我的应用程序中有一些按钮：

```
private class MyForm extends Form<Parametry> {

    private static final long serialVersionUID = 1L;
    public MyForm(final Parametry parametry) {
        add(new AjaxButton("1") { .... }
        add(new AjaxButton("2") { .... }
        add(new Button("run") {
            private static final long serialVersionUID = 1L;

            @Override
            public void onSubmit() {
                logger.error("???????????????????" + parametry.getDatum());
            }
        });
    }
} 
```

在 Firefox 和 Chrome 中一切正常，但我对 IE8 有问题。Ajax 按钮工作正常，但是当我按下按钮时没有任何反应。只是页面是新的（`?x`= `?x+1`），但`logger`没有写任何东西。

我该如何解决？

* * *

**更新：**我使用的是 1.5.7 版。当我删除 ajaxButton 一切正常。

* * *

**UPDATE2：**我用wireshark查看通讯：

火狐：

> POST /rob-mon/statistika?5-4.IFormSubmitListener-statistikaForm HTTP/1.1

这应该很好。

IE9：

> GET /rob-mon/statistika?4-1.IBehaviorListener.0-statistikaForm&random=0.2323892690702561 HTTP/1.1

为什么要使用`GET`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:51:13.170

As an alternative, can't you override `onSubmit` for your `Form` instead of for the button? You could even lose the button and keep a simple `<input type="submit" />` not tied to Wicket, which should work I think.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:37:09.130

Wicket AjaxButtons work by adding to an onclick event to the element. Do you have any js library which could be interfering with the onclick event handler wicket generates? I recall having some issue with a placeholder plugin.

Option 2: use `AjaxFallbackButton` ?

# xml - 如何对元素字符串的一部分进行排序？

> ID：13063976
> 
> 赞同：1
> 
> 时间：2012-10-25T07:50:02.013
> 
> 标签：xml, xslt, xslt-1.0

我遇到了一些 XSLT 转换的问题。在我的 XML 数据中有一些像这样的坐标元素：

XML:

```
[...]
<polygon some="attributes">
  <coordinates>
    <point>(8.234/9.435)</point>
    <point>(2.456/5.678)</point>
    [...]
  </coordinates>
</polygon>
[...] 
```

等等。的值表示 x 和 ay 坐标 (x/y)。现在我必须从特定坐标集中获取 x OR y 的最大值或最小值。

我们在 c++ 代码中使用 msxml，因此我不能将 XSLT 2.0 或 XPath 2.0 用于 min() 和 max() 函数。

格式 (x/y) 是静态的，我也无法更改它，因为它是程序的输出。

我尝试在 XSLT 中这样做：

XSLT：

```
<xsl:template name="getMinOf"> <!--this one is getting nodeset, min/max, x/y params-->
  <xsl:for-each select="$nodeSet"> <!--in this case "//polygon/coordinates/point"-->
    *<xsl:choose>
      <xsl:when test="$MinOrMax = 'min' ">
        <xsl:choose>
          <xsl:when test="$XorY = 'x'">*
        <xsl:sort select="substring-before(substring-after(.,'('),'/')" data-type="number" order="ascending"/> <!--Here is my problem-->
              <xsl:if test="position() = 1">
                <xsl:value-of select="." /><!--  return xMin -->
              </xsl:if>
          </xsl:when>
      [...]
</xsl:template> 
```

select=" **substring-before(substring-after(.,'('),'/')"**应该得到 ( 和 / 之间的部分，即 x 坐标。如果我做

```
<!--this one does return the x value.-->
<xsl:value-of select="substring-before(substring-after(.,'('),'/')"/> 
```

所以......我希望你能理解我的问题并能帮助我。我不知道如何更进一步。谢谢。

编辑：忘记了所需的输出。它应该是这样的：

```
<polygon>
  <xMin>2.456</xMin>
  <xMax>8.234</xMax>
  <yMin>5.678</yMin>
  <yMax>9.435</yMax>
</polygon> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:31:47.190

虽然问题中没有提到，但我猜您的问题是您收到消息“Keyword xsl:sort may not be used here.”，这是因为您的**xsl:sort**嵌套在**xsl:when**应该是什么时候直接在**xsl:for-each下**

实际上，您正在尝试根据您的参数进行条件排序。一个条件是是否按 x 或 y 坐标排序，另一个条件是按升序还是降序排序。

对于排序，您可以定义一个变量，该变量将保存“升序”或“降序”，然后按以下顺序排序：

```
 <xsl:variable name="order">
     <xsl:choose>
        <xsl:when test="$MinOrMax='max'">descending</xsl:when>
        <xsl:otherwise>ascending</xsl:otherwise>
     </xsl:choose>
  </xsl:variable>
  <xsl:for-each select="coordinates/point">
     <xsl:sort select="substring-before(substring-after(.,'('),'/')" data-type="number" order="{$order}"/> 
```

下一个问题是如何根据您的参数选择“x”或“y”坐标。一种方法是使用**xsl:choose**在排序方法之间进行选择

```
 <xsl:choose>
     <xsl:when test="$XorY='x'">
        <xsl:for-each select="coordinates/point">
           <xsl:sort select="substring-before(substring-after(.,'('),'/')" data-type="number" order="{$order}"/>
           <xsl:if test="position() = 1">
              <xsl:value-of select="substring-before(substring-after(.,'('),'/')"/>
           </xsl:if>
        </xsl:for-each>         
     </xsl:when>
     <xsl:otherwise>
        <xsl:for-each select="coordinates/point">
           <xsl:sort select="substring-before(substring-after(.,'/'),')')" data-type="number" order="{$order}"/>
           <xsl:if test="position() = 1">
              <xsl:value-of select="substring-before(substring-after(.,'/'),')')"/>
           </xsl:if>
        </xsl:for-each>         
     </xsl:otherwise>
  </xsl:choose> 
```

但是，有一种方法可以避免这种潜在的代码重复，并且只有一个**xsl:for-each**。试试这个

```
 <xsl:sort select="concat(
          substring(substring-before(substring-after(.,'('),'/'), 1, 100 * ($XorY = 'x')), 
          substring(substring-before(substring-after(.,'/'),')'), 1, 100 * ($XorY = 'y')))" 
       data-type="number" order="{$order}"/> 
```

这利用`($XorY = 'x')`了表达式中将评估为 0 或 1 的事实。为了更好地理解它，它实际上是对这两个表达式进行串联：

```
substring(<x co-ordinate>, 1, 100 * <0 or 1>)
substring(<y co-ordinate>, 1, 100 * <0 or 1>) 
```

当 $XorY = 'x' 时返回 1，因此第一个子字符串（x 坐标）返回一个完整字符串，但第二个子字符串返回一个空字符串。当 $XorY = 'y' 时，则相反，并返回第二个子字符串（y 坐标）。

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="polygon">
      <polygon>
         <xMin>
            <xsl:call-template name="getMinOf">
               <xsl:with-param name="MinOrMax" select="'min'" />
               <xsl:with-param name="XorY" select="'x'" />
            </xsl:call-template>   
         </xMin>
         <xMax>
            <xsl:call-template name="getMinOf">
               <xsl:with-param name="MinOrMax" select="'max'" />
               <xsl:with-param name="XorY" select="'x'" />
            </xsl:call-template>   
         </xMax>
         <yMin>
            <xsl:call-template name="getMinOf">
               <xsl:with-param name="MinOrMax" select="'min'" />
               <xsl:with-param name="XorY" select="'y'" />
            </xsl:call-template>   
         </yMin>         
         <yMax>
            <xsl:call-template name="getMinOf">
               <xsl:with-param name="MinOrMax" select="'max'" />
               <xsl:with-param name="XorY" select="'y'" />
            </xsl:call-template>   
         </yMax>
      </polygon>
   </xsl:template>

   <xsl:template name="getMinOf">
      <xsl:param name="MinOrMax"/>
      <xsl:param name="XorY"/>
      <xsl:variable name="order">
         <xsl:choose>
            <xsl:when test="$MinOrMax='max'">descending</xsl:when>
            <xsl:otherwise>ascending</xsl:otherwise>
         </xsl:choose>
      </xsl:variable>
      <xsl:for-each select="coordinates/point">
         <xsl:sort select="concat(substring(substring-before(substring-after(.,'('),'/'), 1, 100 * ($XorY = 'x')), substring(substring-before(substring-after(.,'/'),')'), 1, 100 * ($XorY = 'y')))" data-type="number" order="{$order}"/>
         <xsl:if test="position() = 1">
            <xsl:value-of select="concat(substring(substring-before(substring-after(.,'('),'/'), 1, 100 * ($XorY = 'x')), substring(substring-before(substring-after(.,'/'),')'), 1, 100 * ($XorY = 'y')))"/>
         </xsl:if>
      </xsl:for-each>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<polygon>
   <xMin>2.456</xMin>
   <xMax>8.234</xMax>
   <yMin>5.678</yMin>
   <yMax>9.435</yMax>
</polygon> 
```

# mysql - MySQL 默认日期时间通过 phpmyadmin

> ID：13063980
> 
> 赞同：24
> 
> 时间：2012-10-25T07:50:15.020
> 
> 标签：mysql, phpmyadmin

在现有数据库中，我有年龄列 (INT)。现在我需要将其设置为 dob (DATETIME)。

我尝试通过 PHPMyAdmin 这样做，将 CURRENT_TIMESTAMP 作为默认值，由[answer with 138 upvotes](https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column)定义。然而，PHPMyAdmin 正在抱怨`#1067 - invalid default value for 'dob'`，如随附的屏幕截图所示：

![错误截图](../Images/9e25a083712b4ebaa050492885341551.png)

有人可以建议我为什么会收到该错误以及如何解决该错误吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-25T08:04:48.143

[您不能](https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column)使用 DATETIME 将 CURRENT_TIMESTAMP 设置为默认值。

但是你可以用 TIMESTAMP 来做到这一点。

看看[这里](https://stackoverflow.com/questions/409286/datetime-vs-timestamp)的区别。

[这个](http://prajapatinilesh.wordpress.com/2007/10/11/is-it-possible-to-set-current-datetime-as-default-value-in-date-column-in-mysql/)博客的话

数据类型规范中的 DEFAULT value 子句指示列的默认值。除了一个例外，默认值必须是一个常量；它不能是函数或表达式。

例如，这意味着您不能将日期列的默认值设置为 NOW() 或 CURRENT_DATE 等函数的值。

例外情况是您可以将 CURRENT_TIMESTAMP 指定为 TIMESTAMP 列的默认值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-25T15:26:51.583

也将字段的类型设置为 TIMESTAMP。

[![在此处输入图像描述](../Images/84e9b329f6b1122ef36ca40940d70c8d.png)](https://i.stack.imgur.com/4VMYN.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T08:26:31.030

我不认为你可以用 mysql date 来实现。您必须使用时间戳或尝试这种方法..

```
CREATE TRIGGER table_OnInsert BEFORE INSERT ON `DB`.`table`
FOR EACH ROW SET NEW.dateColumn = IFNULL(NEW.dateColumn, NOW()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T08:02:27.683

您收到该错误是因为默认值`current_time`对 type 无效`DATETIME`。这就是它所说的，这就是正在发生的事情。

您可以使用的唯一字段`current_time`是时间戳。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-19T13:39:48.617

DateTime 的最佳方法是使用触发器：

```
/************ ROLE ************/
drop table if exists `role`;
create table `role` (
    `id_role` bigint(20) unsigned not null auto_increment,
    `date_created` datetime,
    `date_deleted` datetime,
    `name` varchar(35) not null,
    `description` text,
    primary key (`id_role`)
) comment='';

drop trigger if exists `role_date_created`;
create trigger `role_date_created` before insert
    on `role`
    for each row 
    set new.`date_created` = now(); 
```

# javascript - 如何使用 jquery 访问同一“表 td”中的 div id

> ID：13063982
> 
> 赞同：0
> 
> 时间：2012-10-25T07:50:25.917
> 
> 标签：javascript, jquery, asp.net

我有以下代码：

```
<td>
<div  id="div<%# Eval("Id") %>" class="Display"><%# Eval("Display") %></div>
<div class="Actions">

</div>
    <div class="Comment">
    <span>Comment </span>
    <input id="txt<%# Eval("Id") %>" type="text" width="400px" />
</div>
</td> 
```

我正在寻找的是，当我从

```
<input id="txt<%# Eval("Id") %>" type="text" width="400px" /> 
```

我想在

```
<div  id="div<%# Eval("Id") %>" class="Display"><%# Eval("Display") %></div> 
```

我怎样才能做到这一点？

我确实遵循了这个（但不确定这是否是最好的方法）

```
if (e.which == 13) {
                    var comment = $("#" + this.id).val();
                    var textId = "#" + this.id.replace("txt", "div");
                    $(textId).append(comment);
                    $.ajax({
                        type: "POST",
                        url: "Home.aspx/AddComments",
                        data: "{'id': '" + this.id.replace("txt", "") + "','comments': '" + comment + "'}",
                        dataType: "json",
                        contentType: "application/json",
                        success: function (response) {
                            alert(response.d);
                        }
                    });
                } 
```

**注意：这是 itemtemplate，所以每个 div 和 input 元素都有不同的 id**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:59:31.723

```
var  testTextBox = $('#txt<%# Eval("Id") %>');//your input id
var targetbox=$('div<%# Eval("Id") %>');//your second box.
    var code =null;
    testTextBox.keypress(function(e)
    {
        code= (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {//enter key
              $(targetbox).text($(tstTextBox).val());
        }
        e.preventDefault();
    }); 
```

您基本上需要触发输入按键事件并将值从框 1 复制到框 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:00:00.063

```
<script>
function enterPress(evt,input) {
if(evt.keyCode==13){

var divHtml=document.getElementById('div<%# Eval("Id") %>').innerHTML;
var inputValue=input.value;
inputValue=inputValue+divHtml;
document.getElementById(input.id).value=inputValue;
}
}
</script>
<input id="txt<%# Eval("Id") %>" type="text" width="400px" onkeypress="enterPress(event,this)"/>
<div  id="div<%# Eval("Id") %>" class="Display"><%# Eval("Display") %></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:53:39.133

输入标签的一点修改

```
<input id="txt<%# Eval("Id")%>" class="<%# Eval("Id") %>" type="text" width="400px" /> 
```

然后是所需的 jQuery 代码

```
 $(function(){
    $(".comment :input").keypress(function(e) {
      if(e.which == 13)
        {
            var idNo =$(this).prop("class");
            var comment = $("#text" + idNo).val();
            $("#div"+idNo).append(comment);
            $.ajax({
                type: "POST",
                url: "Home.aspx/AddComments",
                data: "{'id': '" + idNo + "','comments': '" + comment + "'}",
                dataType: "json",
                contentType: "application/json",
                success: function (response) {

                }
            });
        }
        e.preventDefault();
    });
}); 
```

希望能帮助到你。

# c# - 在一个控制器方法中运行异步操作并在另一个控制器方法中获取该操作的结果

> ID：13063983
> 
> 赞同：0
> 
> 时间：2012-10-25T07:50:32.520
> 
> 标签：c#, asp.net, asp.net-mvc, wcf, http

我有一个长期运行的操作，您可能会在我的另一个问题中阅读（供您参考，这里是[first](https://stackoverflow.com/questions/12836060/articles-on-how-to-organize-background-queue-operations)和[second](https://stackoverflow.com/questions/12900382/how-to-determine-progress-of-pending-operations-in-queue)）。

在整个交易开始时，项目公开了一个表单，用户应在该表单中指定有关 XML 文件的所有必要信息并上传 XML 文件本身。在该方法中，所有用户输入数据都被捕获并转到处理此类文件之王的 WCF 服务。控制器仅获得此类处理的任务 ID。然后用户被重定向到进度条页面并定期检索任务完成状态，刷新进度条。

所以我的问题来了。处理 XML 文件时如果结束，如何获取结果并将其显示给用户？

我知道 HTTP 是无状态协议，但是在这种情况下有 cookie 机制可以提供帮助。当然，我可能只是将处理结果保存到一些临时的地方，比如 WCF 服务器中的一个静态类，但是服务负载很高，所以它会吃掉所有提供的内存。

换句话说，我想将任务传递给 WCF 服务（使用 netNamedPipeBinding）并尽可能快地接收结果。我想将临时保存结果转义到某个缓冲区并等到客户端将其收集回来。

* * *

据我所知，不是在服务端而是在客户端使用临时缓冲区：

```
using (XmlProcessingServiceClient client = new XmlProcessingServiceClient())
{
    client.AnalyzeXmlAsync(new Task { fileName = filePath, id = tid });
    client.AnalyzeXmlCompleted += (sender, e) =>
    {
        System.Web.HttpContext.Current.Application.Lock();
        // here is I just use single place for all clients. I know it is not right, it is just for illustrating purposes.
        System.Web.HttpContext.Current.Application["Result"] = e;
        System.Web.HttpContext.Current.Application.UnLock();
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T06:15:50.910

我建议您使用[SignalR 集线器](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)来解决您的问题。您有一种方法可以直接调用客户端上的方法来通知操作已完成。并且无需处理实施此类策略时存在的实际基础设施问题即可发生这种情况。Plus [SignalR](http://signalr.net/)可轻松插入 asp.net MVC 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:45:34.363

老实说，我并没有真正了解有关 wcf 服务器和其他东西的部分，但我想我可以给你更多抽象的答案。为了确定：

1.  您有一个包含一些字段 + 文件上传的表单
2.  用户填写表单并提供 XML 文件
3.  您将 XML 文件发送到处理它的 WFC 服务
4.  同时显示一个更新的进度条
5.  完成后显示结果

如果这不是您想要的，或者这不是您的问题，您可以跳过我的回答，否则请继续阅读。

开始之前：第 3 步有点模糊：这可能意味着我们将数据发送到服务并等待它返回结果，或者我们将数据发送到服务并且我们不等待它返回结果。

情况一：

1.  在视图中创建包含所有必填字段的表单
2.  在您的控制器中创建一个处理回发的操作。
3.  该操作会将数据发送到服务，当服务返回结果时，您的操作将呈现一个带有结果的视图。
4.  在提交按钮上，您在点击事件上添加一个 javascript。这将触发对某些服务器端代码的 ajax 调用，该代码将返回进度。
5.  javascript显示某种具有正确进度的状态栏，并每x秒重复一次
6.  当控制器完成时，它将显示结果

情况2：

1.  -
2.  -
3.  将数据发送到服务后，控制器会显示一个带有进度条的视图。
4.  我们在文档就绪时添加了一个 javascript 事件，它检查 xml 文件的状态并更新进度条。（与情况 1 中步骤 4 中的 onclick 事件相同）
5.  当进度条达到 100% 时，它将重定向到显示结果的不同页面

这回答了你的问题了吗？

此致，

BHD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T00:03:06.917

我不确定这是否是最好的解决方案，但我能够做类似的事情。这是一般设置：

1.  控制器 A 使用要执行的操作的参数初始化一个新类，并传递用户的会话对象
2.  新类在后台线程中调用了一个方法，该方法在用户会话进行时更新了用户会话
3.  控制器 B 具有 json 方法，当由客户端 javascript 调用时，检查用户的会话数据并返回最新进度。

该[线程](https://stackoverflow.com/questions/5096789/asynchronous-threads-and-session)指出以这种方式使用会话对象是不好的，但我相信您可以使用线程安全存储方法（如 sql 或临时文件）执行类似的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:50:14.033

[如果这是您的想法， netNamedPipeBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)将不适用于跨机器通信。

如果您想在 IIS 上托管我们的服务，那么您将需要使用 HTTP 作为其传输协议的绑定之一。查看允许两个端点发送消息的[双工服务。](http://msdn.microsoft.com/en-us/library/ms731064.aspx)这样，服务器可以随时向客户端发送消息。您可以为进度报告创建一个回调接口。如果任务需要花费大量时间来完成，那么通过 HTTP 报告进度的开销可能是可以的。

如果您想通过 HTTP 与 Silverlight ( [PollingDuplexHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.pollingduplexhttpbinding%28v=vs.95%29.aspx) ) 一起使用双工通信，还可以查看[构建和访问双工服务](http://msdn.microsoft.com/en-us/library/cc645026%28v=vs.95%29.aspx)。

最后，您可以寻找 ASP.NET 的[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)实现。在 CodeProject 中，您至少会有一对（[CometAsync](http://www.codeproject.com/Articles/27107/Scalable-COMET-Combined-with-ASP-NET)和[PokeIn](http://www.codeproject.com/Articles/72626/DWR-like-NET-Comet-Ajax-in-ASP-NET)）。

# objective-c - 创建一个全局类objective-c？

> ID：13063984
> 
> 赞同：4
> 
> 时间：2012-10-25T07:50:34.487
> 
> 标签：objective-c, global-variables, instantiation

我想在objective-c中创建一个已经存储数据的类，以便访问数据我不想实例化该类。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T07:51:40.360

您可以使用单例，也可以使用仅由类方法组成的类并允许您访问静态数据。

这是 ObjC 中的基本单例实现：

```
@interface MySingleton : NSObject
{
}

+ (MySingleton *)sharedSingleton;

@property(nonatomic) int prop;
-(void)method;

@end

@implementation MySingleton
@synthesize prop;

+ (MySingleton *)sharedSingleton
{ 
  static MySingleton *sharedSingleton;

  @synchronized(self)
  {
    if (!sharedSingleton)
      sharedSingleton = [[MySingleton alloc] init];

    return sharedSingleton;
  }
}

-(void)method {

}

@end 
```

你像这样使用它：

```
int a = [MySingleton sharedSingleton].prop

[[MySingleton sharedSingleton] method]; 
```

基于类方法的类将是：

```
@interface MyGlobalClass : NSObject

+ (int)data;

@end

@implementation MySingleton

static int data = 0;
+ (int)data
{ 
   return data;
}

+ (void)setData:(int)d
{ 
   data = d;
}

@end 
```

# php - 联系表格在 Wordpress 上不起作用

> ID：13063986
> 
> 赞同：0
> 
> 时间：2012-10-25T07:50:44.733
> 
> 标签：php, wordpress, validation, templates, contact-form

我正在关注[本教程](http://boxmodeljunkie.com/create-a-simple-php-contact-form/)。

我制作了一个`Contact.php`模板来自定义这个页面。我复制并粘贴了所有需要的东西。

我将`validate.php`文件上传到我的主题文件夹

```
public_html/test/wp-content/themes/themename 
```

我有静态页面，我的**主页**是首页，而**新闻**是我的帖子页面。

每次我提交表单时，我都会被重定向到**新闻**页面，但 URL 显示的`domain.com/test/`不是`domain.com/test/contact`（显然是表单所在的位置）。

对于我的`contact.php`模板，我只是将我需要的代码添加到最顶部、下方`template tag`和上方`get_header tag`。

这是我的 PHP 页面的粘贴箱：

**[CONTACT.PHP（模板）](http://pastebin.com/J4piD1s7)**

**[验证.PHP](http://pastebin.com/bmnD1zSs)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:56:02.313

如果您使用的是 Wordpress，为什么要让自己难受呢？使用 Contact Form 7，配置简单，提供良好的验证，是广泛使用的联系表格。

[http://wordpress.org/extend/plugins/contact-form-7/](http://wordpress.org/extend/plugins/contact-form-7/)

# php - phpass 是否有更新/改进/替代版本？

> ID：13063987
> 
> 赞同：1
> 
> 时间：2012-10-25T07:50:50.430
> 
> 标签：php, security, passwords, phpass

我即将将[phpass](http://www.openwall.com/phpass/)实施到一个新的应用程序中，因为它具有安全性的理论和技术论据。这当然不是唯一的安全措施，但对于散列密码，这在我看来是最好的。

但是，在查看它的源代码时，我并没有真正感到高兴。它违背了我的一些最基本的代码约定，尤其是在安全性方面。

```
return $hash == $stored_hash; 
```

我总是`===`在围绕安全性的代码上使用相同的运算符 ()。

```
if ($hash[0] == '*')
    $hash = crypt($password, $stored_hash); 
```

`{`我总是使用带有 if 的大括号。它们是否在同一条线上并不重要，但即使有可能省略它们也不会给我带来好的感觉。

此外，没有办法强制使用 CRYPT_BLOWFISH 方法。现在我通过在我自己的包装器中检查长度是否正好是 60 个字符来做到这一点。

我想知道是否有人知道更新版本？一个由一个更大的社区维护和检查的改进版，然后只有一个人？[正如作者本人已经建议的那样，](http://www.openwall.com/articles/PHP-Users-Passwords)一个较新的版本可以使用 PHP5，例如无缓冲读取？

或者，也许我只是没有真正原因的偏执狂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:57:50.253

如果是新应用程序，请使用[https://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)进行密码散列。它适用于 PHP >= 5.3.7，并重新实现了 PHP 5.5 即将推出的密码功能。

除了安全密码散列之外，确实没有其他选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T14:32:50.880

我的帖子是为那些喜欢 phpass 的人准备的，因为它具有向后兼容性，但又想使用改进的版本。

我对 phpass 使用了以下改进：

*   在构造函数中向 $random_state 引入更多数据。
*   通过添加更多方法和向熵池引入更多数据来改进 get_random_bytes()。
    一些代码来自 padraic 的[SecurityMultiTool](https://github.com/padraic/SecurityMultiTool) 以及来自[ircmaxell](https://github.com/ircmaxell)的 RandomLib 和 password_compat。
*   在 gensalt_blowfish() 如果 PHP_VERSION >= 5.3.7，使用新的、固定的 BLOWFISH salt id。

完整代码，评论中的版本已更新，附加更改：

```
<?php
#
# Portable PHP password hashing framework.
#
# Version 0.3 / okaresz.v1
#
# Written by Solar Designer <solar at openwall.com> in 2004-2006 and placed in
# the public domain.  Revised in subsequent years, still public domain.
#
# There's absolutely no warranty.
#
# The homepage URL for this framework is:
#
#   http://www.openwall.com/phpass/
#
# Please be sure to update the Version line if you edit this file in any way.
# It is suggested that you leave the main version number intact, but indicate
# your project name (after the slash) and add your own revision information.
#
# Please do not change the "private" password hashing method implemented in
# here, thereby making your hashes incompatible.  However, if you must, please
# change the hash type identifier (the "$P$") to something different.
#
# Obviously, since this code is in the public domain, the above are not
# requirements (there can be none), but merely suggestions.
#
# okaresz.v1:
#
#  * Introducing more data to $random_state in the constuctor.
#  * Improve get_random_bytes() by adding more methods and by introducing more data to the entropy pool.
#    Some fo the code is from the SecurityMultiTool by padraic: https://github.com/padraic/SecurityMultiTool
#    and from ircmaxell's RandomLib: https://github.com/ircmaxell/RandomLib
#    and password_compat https://github.com/ircmaxell/password_compat
#  * In gensalt_blowfish() if PHP_VERSION >= 5.3.7, use the new, fixed BLOWFISH salt id.
#
class PasswordHash {
    var $itoa64;
    var $iteration_count_log2;
    var $portable_hashes;
    var $random_state;

    function PasswordHash($iteration_count_log2, $portable_hashes)
    {
        $this->itoa64 = './0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';

        if ($iteration_count_log2 < 4 || $iteration_count_log2 > 31)
            $iteration_count_log2 = 8;
        $this->iteration_count_log2 = $iteration_count_log2;

        $this->portable_hashes = $portable_hashes;

        $this->random_state = microtime();
        if (function_exists('getmypid'))
            $this->random_state .= getmypid();
        $this->random_state .= md5(serialize($_SERVER));
    }

    function get_random_bytes($count)
    {
        $output = '';

        if( function_exists('openssl_random_pseudo_bytes' ) )
        {
            $output = openssl_random_pseudo_bytes($count, $usable);
            if (true === $usable) {
                return $output;
            }
        }
        if( function_exists('mcrypt_create_iv')
            && (version_compare(PHP_VERSION, '5.3.0') >= 0 )
            || (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')
            && !defined('PHALANGER')
        ) {
            $output = mcrypt_create_iv($count, MCRYPT_DEV_URANDOM);
            if ($output !== false && strlen($output) === $count) {
                return $output;
            }
        }

        if (is_readable('/dev/urandom') &&
            ($fh = @fopen('/dev/urandom', 'rb'))) {
            $output = fread($fh, $count);
            fclose($fh);
        }

        if (strlen($output) < $count) {
            $output = '';
            $seed = microtime() . memory_get_usage();
            if( function_exists('gc_collect_cycles') )
                { gc_collect_cycles(); }
            else
            {
                $i = 0;
                while( $i < 32)
                    { $i += 1+(int)round(lcg_value()); }
            }

            $this->random_state .= $seed . microtime();
            for ($i = 0; $i < $count; $i += 16)
            {

                $this->random_state =  md5(microtime() . $this->random_state);
                $output .= pack('H*', md5(substr($this->random_state,0,16)));
            }
            $output = substr($output, 0, $count);
        }

        return $output;
    }

    function encode64($input, $count)
    {
        $output = '';
        $i = 0;
        do {
            $value = ord($input[$i++]);
            $output .= $this->itoa64[$value & 0x3f];
            if ($i < $count)
                $value |= ord($input[$i]) << 8;
            $output .= $this->itoa64[($value >> 6) & 0x3f];
            if ($i++ >= $count)
                break;
            if ($i < $count)
                $value |= ord($input[$i]) << 16;
            $output .= $this->itoa64[($value >> 12) & 0x3f];
            if ($i++ >= $count)
                break;
            $output .= $this->itoa64[($value >> 18) & 0x3f];
        } while ($i < $count);

        return $output;
    }

    function gensalt_private($input)
    {
        $output = '$P$';
        $output .= $this->itoa64[min($this->iteration_count_log2 +
            ((PHP_VERSION >= '5') ? 5 : 3), 30)];
        $output .= $this->encode64($input, 6);

        return $output;
    }

    function crypt_private($password, $setting)
    {
        $output = '*0';
        if (substr($setting, 0, 2) == $output)
            $output = '*1';

        $id = substr($setting, 0, 3);
        # We use "$P$", phpBB3 uses "$H$" for the same thing
        if ($id != '$P$' && $id != '$H$')
            return $output;

        $count_log2 = strpos($this->itoa64, $setting[3]);
        if ($count_log2 < 7 || $count_log2 > 30)
            return $output;

        $count = 1 << $count_log2;

        $salt = substr($setting, 4, 8);
        if (strlen($salt) != 8)
            return $output;

        # We're kind of forced to use MD5 here since it's the only
        # cryptographic primitive available in all versions of PHP
        # currently in use.  To implement our own low-level crypto
        # in PHP would result in much worse performance and
        # consequently in lower iteration counts and hashes that are
        # quicker to crack (by non-PHP code).
        if (PHP_VERSION >= '5') {
            $hash = md5($salt . $password, TRUE);
            do {
                $hash = md5($hash . $password, TRUE);
            } while (--$count);
        } else {
            $hash = pack('H*', md5($salt . $password));
            do {
                $hash = pack('H*', md5($hash . $password));
            } while (--$count);
        }

        $output = substr($setting, 0, 12);
        $output .= $this->encode64($hash, 16);

        return $output;
    }

    function gensalt_extended($input)
    {
        $count_log2 = min($this->iteration_count_log2 + 8, 24);
        # This should be odd to not reveal weak DES keys, and the
        # maximum valid value is (2**24 - 1) which is odd anyway.
        $count = (1 << $count_log2) - 1;

        $output = '_';
        $output .= $this->itoa64[$count & 0x3f];
        $output .= $this->itoa64[($count >> 6) & 0x3f];
        $output .= $this->itoa64[($count >> 12) & 0x3f];
        $output .= $this->itoa64[($count >> 18) & 0x3f];

        $output .= $this->encode64($input, 3);

        return $output;
    }

    function gensalt_blowfish($input)
    {
        # This one needs to use a different order of characters and a
        # different encoding scheme from the one in encode64() above.
        # We care because the last character in our encoded string will
        # only represent 2 bits.  While two known implementations of
        # bcrypt will happily accept and correct a salt string which
        # has the 4 unused bits set to non-zero, we do not want to take
        # chances and we also do not want to waste an additional byte
        # of entropy.
        $itoa64 = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

        $output = (version_compare(PHP_VERSION, '5.3.7') >= 0)? '$2y$' : '$2a$';
        $output .= chr(ord('0') + $this->iteration_count_log2 / 10);
        $output .= chr(ord('0') + $this->iteration_count_log2 % 10);
        $output .= '$';

        $i = 0;
        do {
            $c1 = ord($input[$i++]);
            $output .= $itoa64[$c1 >> 2];
            $c1 = ($c1 & 0x03) << 4;
            if ($i >= 16) {
                $output .= $itoa64[$c1];
                break;
            }

            $c2 = ord($input[$i++]);
            $c1 |= $c2 >> 4;
            $output .= $itoa64[$c1];
            $c1 = ($c2 & 0x0f) << 2;

            $c2 = ord($input[$i++]);
            $c1 |= $c2 >> 6;
            $output .= $itoa64[$c1];
            $output .= $itoa64[$c2 & 0x3f];
        } while (1);

        return $output;
    }

    function HashPassword($password)
    {
        $random = '';

        if (CRYPT_BLOWFISH == 1 && !$this->portable_hashes) {
            $random = $this->get_random_bytes(16);
            $hash =
                crypt($password, $this->gensalt_blowfish($random));
            if (strlen($hash) == 60)
                return $hash;
        }

        if (CRYPT_EXT_DES == 1 && !$this->portable_hashes) {
            if (strlen($random) < 3)
                $random = $this->get_random_bytes(3);
            $hash =
                crypt($password, $this->gensalt_extended($random));
            if (strlen($hash) == 20)
                return $hash;
        }

        if (strlen($random) < 6)
            $random = $this->get_random_bytes(6);
        $hash =
            $this->crypt_private($password,
            $this->gensalt_private($random));
        if (strlen($hash) == 34)
            return $hash;

        # Returning '*' on error is safe here, but would _not_ be safe
        # in a crypt(3)-like function used _both_ for generating new
        # hashes and for validating passwords against existing hashes.
        return '*';
    }

    function CheckPassword($password, $stored_hash)
    {
        $hash = $this->crypt_private($password, $stored_hash);
        if ($hash[0] == '*')
            $hash = crypt($password, $stored_hash);

        return $hash == $stored_hash;
    }
}

?> 
```

# iphone - 将 Xcode 项目更改为新系统不起作用

> ID：13063988
> 
> 赞同：-1
> 
> 时间：2012-10-25T07:50:59.117
> 
> 标签：iphone, ios, ipad

工作项目转移到新系统显示错误

错误：/Raja Projects/Special Build/Oct 24 2_30PM/ACE_SPE/ACE_SPE/ACE_HK/Resource's/Image's/All Image's/en.lproj/change_english_icon.png：没有这样的文件或目录

但这是老路。我的系统没有路径。我应该怎么办。change_english_icon.png 在文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:00:39.073

发生此错误是因为您的项目无法在新系统中找到**change_english_icon.png**。您只需要 change_english_icon.png 图像。**将此图像添加**到您的项目中，并且不要忘记检查**将项目复制到目标组的文件夹**中给出的勾号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:30:51.970

您应该在文件检查器的“身份和类型”部分检查文件路径的相关性（在 XCode 4.x 的右侧面板中，查看 => 实用程序 => 显示文件检查器）。似乎你有类似`Absolute path`set for 的东西`Location`。

为避免这种情况（如果原因是绝对路径或类似原因），请确保您在文件检查器中为“位置”设置了“相对于组”或“相对于项目”或类似的设置。解决这个问题的简单方法是将项目中缺少的文件重新添加到项目中。

# c# - 如何使用 C# 将数据从一个数据桶迁移到沙发库中的另一个桶？

> ID：13063990
> 
> 赞同：0
> 
> 时间：2012-10-25T07:50:59.630
> 
> 标签：c#, nosql, couchbase

我有一个名为“SourceBucket”的数据存储桶..我的视图和文档很少..我需要将所有这些完全迁移到另一个名为“DestinationBucket”的存储桶..我正在使用c#..这可能吗..

对我来说，问题是从 sourcebucket 获取文档和视图。我怎样才能得到它。请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T17:01:49.040

有一个简单的工具可以使用，它与 Couchbase 一起打包，cbtransfer。

您可以使用此工具将内容从一个存储桶传输到另一个存储桶，在您的情况下，只需创建您想要传输到的新存储桶，然后使用 cbtransfer 将在那里获取数据和视图。

[https://github.com/couchbaselabs/docs-ng/blob/master/content/couchbase-manual-2.5/cb-cli/cbtransfer_tool.markdown](https://github.com/couchbaselabs/docs-ng/blob/master/content/couchbase-manual-2.5/cb-cli/cbtransfer_tool.markdown)

另一方面，如果您只需要传输视图，请使用带有 -x design_doc_only=1 开关的 cbtransfer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:11:21.260

在执行迁移的 C# Couchbase 客户端中没有任何特定内容。如果您使用的是 Couchbase Server 2.0，您可以使用视图并在遍历视图时执行插入到第二个存储桶中。另一种方法可能是使用备份和恢复（C# 之外）。

[http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-backup-restore.html](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-backup-restore.html)