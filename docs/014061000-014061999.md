# StackOverflow 问答 14061000-14061999

# xslt - 使用 XSLT 获取节点的高度

> ID：14061002
> 
> 赞同：1
> 
> 时间：2012-12-27T20:38:58.623
> 
> 标签：xslt, xslt-2.0, xpath-2.0

节点的高度是到最远叶节点的路径长度。有点像[节点深度](https://stackoverflow.com/questions/9145391/outputting-depth-of-current-node-in-the-hierarchy)，但在另一个方向，虽然我不认为解决方案可以那么简单。

* * *

我对此没有任何实际用途：我最初认为我需要它的问题原来不需要它。但是由于我在意识到这一点之前就写了一个解决方案，所以我想我会把它贴在这里，以防万一将来会派上用场。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:45:53.713

**使用**：

```
 if(node())
   then
      max(.//node()[not(node())]/count(ancestor::node()))
     -
      count(ancestor::node())
    else 0 
```

**以及为每个元素添加“高度”属性的转换：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:attribute name="height" select=
        "if(node())
         then
           max(.//node()[not(node())]/count(ancestor::node()))
         -
           count(ancestor::node())
         else 0
      "/>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**当应用此转换时，例如在此 XML 文档上：**

```
<producers>
  <producer>
    <id>8</id>
    <name>Emåmejeriet</name>
    <street>Grenvägen 1-3</street>
    <postal>577 39</postal>
    <city>Hultsfred</city>
    <weburl>http://www.emamejerie3t.se</weburl>
    <certified/>
  </producer>
</producers> 
```

**产生了想要的正确结果：**

```
<producers height="3">
  <producer height="2">
      <id height="1">8</id>
      <name height="1">Emåmejeriet</name>
      <street height="1">Grenvägen 1-3</street>
      <postal height="1">577 39</postal>
      <city height="1">Hultsfred</city>
      <weburl height="1">http://www.emamejerie3t.se</weburl>
      <certified height="0"/>
  </producer>
</producers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T23:57:49.303

有什么问题

```
max(.//node()/count(ancestor::*)) - count(ancestor::*) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:38:58.623

以下样式表用`height`属性标记每个节点。

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:exsl="http://exslt.org/common"
                xmlns:math="http://exslt.org/math"
                extension-element-prefixes="math exsl"
                version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="no"/>

  <xsl:template name="height">
    <xsl:param name="node"/>
    <xsl:choose>
      <xsl:when test="$node/node()">
        <xsl:variable name="child-heights">
          <xsl:for-each select="$node/node()">
            <height>
              <xsl:call-template name="height">
                <xsl:with-param name="node" select="."/>
              </xsl:call-template>
            </height>
          </xsl:for-each>
        </xsl:variable>

        <xsl:value-of select="math:max(exsl:node-set($child-heights)/height) + 1"/>
      </xsl:when>

      <xsl:otherwise>
        <xsl:value-of select="0"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="*">
    <xsl:copy>
      <xsl:attribute name="height">
        <xsl:call-template name="height">
          <xsl:with-param name="node" select="."/>
        </xsl:call-template>
      </xsl:attribute>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

# jquery - 无法让 ScrollTo jquery 插件工作？

> ID：14061006
> 
> 赞同：0
> 
> 时间：2012-12-27T20:39:13.613
> 
> 标签：jquery, css, scrollto

认为这与我的容器 div 和他们的 CSS 有关。但我试图让月份水平滚动。它只是行不通。有任何想法吗？

div 应该在彼此左侧浮动 - 不是水平滚动而是垂直滚动。此外，您需要确保预览象限足够大以便正确查看。

JS：

```
jQuery(document).ready(function(){

// active class swapping on menu       
jQuery("#nm12-menu li").click(function (a) {

    // style stuff
    jQuery(this).addClass("active");    
    jQuery(this).siblings( "#nm12-menu li").removeClass("active");

    // now scroll!
    var myHash = jQuery(this).find('a').attr('href');
    jQuery('.scrollme').stop().scrollTo(myHash,800); 
    a.preventDefault();  
    });

});​ 
```

在这里演示：http: [//jsfiddle.net/velcrobots/ffAsR/10/](http://jsfiddle.net/velcrobots/ffAsR/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:57:21.293

浮动的孩子直接包含在滚动容器中，因此它们相互包裹，因为容器与它们的宽度相同。

你有几个选择：

1.  在滚动 div 和子元素之间放置一个内部 div，它`width`设置为子元素的总宽度。
2.  `float`将s更改为`display: inline-block`并设置`white-space: nowrap`在滚动 div 上。

# xml - XSD - 嵌套在同名元素中的元素 - 是否正确？

> ID：14061007
> 
> 赞同：3
> 
> 时间：2012-12-27T20:39:14.197
> 
> 标签：xml, xsd, jaxb, xjc

主题中的问题：在 XSD 中定义嵌套在同名元素中的元素是否有效？

例如，以下代码段是否正确？

```
<xs:element name="TypeOfAction" minOccurs="0">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="TypeOfAction" minOccurs="0">
                <xs:complexType>
                    <xs:simpleContent>
                        <xs:extension base="xs:string">
                            <xs:attribute name="code" type="xs:string"/>
                        </xs:extension>
                    </xs:simpleContent>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

如果是这样，你如何让 xjc 为它正确生成类？我得到了编译错误，比如`TypeOfAction`已经定义了静态类（基本上我会生成两个同名的嵌套静态类）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T21:27:52.597

片段很好。只有全局元素需要具有唯一的限定名称（命名空间和本地名称的组合）。

来自 JDK 7 的 XJC 可以很好地与您的代码片段配合使用。我的示例 XSD 生成正确的类。

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="SomeType">
        <xs:sequence>
            <xs:element name="TypeOfAction" minOccurs="0">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="TypeOfAction"
                            minOccurs="0">
                            <xs:complexType>
                                <xs:simpleContent>
                                    <xs:extension base="xs:string">
                                        <xs:attribute name="code"
                                            type="xs:string" />
                                    </xs:extension>
                                </xs:simpleContent>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

但它不能编译，因为 Java 不允许声明与外部类同名的内部类。尝试使用 xjc 绑定或内联模式注释更改生成的类型名称。[您可以在此处](https://stackoverflow.com/questions/4793637/jaxb-how-to-change-xjc-generated-classes-names-when-attr-type-is-specified-in-x)找到示例。

示例内联绑定：

```
...
<xs:element name="TypeOfAction"
    minOccurs="0">
    <xs:complexType>
        <xs:annotation>
            <xs:appinfo>
                <jaxb:class name="InnerTypeOfAction" />
            </xs:appinfo>
        </xs:annotation>
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="code"
                    type="xs:string" />
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
</xs:element>
... 
```

# mysql - MySQL选择一个数字范围的计数

> ID：14061035
> 
> 赞同：2
> 
> 时间：2012-12-27T20:41:18.970
> 
> 标签：mysql

我不确定如何进行此选择。这是我的表结构。

```
CREATE TABLE `my_table` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `step` int(2) NOT NULL DEFAULT '0',
  `title` varchar(200) NOT NULL,
  `description` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 ; 
```

step 列将包含一个介于 0 和 7 之间的整数。我正在尝试计算我的表中有多少条记录，范围从步骤 1 到 6。我需要整个范围 (1 - 6)，包括 COUNT 等于 0 的地方。我希望它按顺序返回——像这样。

```
+----------+----------+
|   step   |     n    |
+----------+----------+
|   Step 1 |     100  |
+----------+----------+
|   Step 2 |     150  |
+----------+----------+
|   Step 3 |     135  |
+----------+----------+ 
```

我希望我不需要为此定义一个程序。有没有一种简单的方法可以得到我需要的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:48:51.750

```
SELECT
    s.step
  , COALESCE(t.n, 0) AS n
FROM
        ( SELECT 1 AS step UNION ALL
          SELECT 2 UNION ALL
          SELECT 3 UNION ALL
          SELECT 4 UNION ALL
          SELECT 5 UNION ALL
          SELECT 6 
        ) AS s
    LEFT JOIN
        ( SELECT step 
               , COUNT(*) AS n 
          FROM my_table 
          GROUP BY step 
        ) AS t
      ON t.step = s.step
ORDER BY
    s.step ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:07:10.253

如果您只是创建一个列出所有有效步骤的表，可能会更简单，如下所示：

```
CREATE TABLE steps (
  step int(2) NOT NULL PRIMARY KEY
);
INSERT INTO steps VALUES (1),(2),(3),(4),(5),(6); 
```

然后你可以做一个`LEFT JOIN`反对它来获取记录数（[SQLize](http://www.sqlize.com/o6N0UE9avy)）：

```
SELECT
  step, COUNT(id) AS n 
FROM
  steps LEFT JOIN my_table USING (step) 
GROUP BY step; 
```

重要的部分是`COUNT(id)`：只计算`id`列不为空的行。由于`id`被定义为非空列，这意味着它只对由左连接创建的虚拟行进行折扣，否则这些步骤将没有记录。

当然，如果您真的不想创建一个真正的表（甚至是临时表），您也可以使用 ypercube 的子`UNION ALL`选择技巧（[SQLize](http://www.sqlize.com/ptE1W7t05v)）来做到这一点：

```
SELECT step, COUNT(id) AS n
FROM 
  ( SELECT 1 AS step UNION ALL
    SELECT 2 UNION ALL
    SELECT 3 UNION ALL
    SELECT 4 UNION ALL
    SELECT 5 UNION ALL
    SELECT 6 
  ) AS steps
LEFT JOIN my_table USING (step)
GROUP BY step; 
```

# python - Win7 Python 2.6 使用 ctypes 我无法在 COM dll 中调用函数

> ID：14061036
> 
> 赞同：0
> 
> 时间：2012-12-27T20:41:20.870
> 
> 标签：python, windows, ctypes

在使用 Python 2.6 和 ctypes 的 Win7 上，我试图在 COM dll 中调用函数但没有成功。
这是我正在做的代码片段。

```
import ctypes
from ctypes import *
h_func = c_int(0);
h_c    = c_int(0);
h_text = ctypes.create_string_buffer(32);
usbDll = ctypes.WinDLL ("c:\\temp\\PwrUSBDll.dll");
CheckStatusPowerUSB = usbDll.CheckStatusPowerUSB;
InitPowerUSB = usbDll.InitPowerUSB;
#
#===This is where it all goes down the tubes.
#
InitPowerUSB (byref(h_func), byref(h_text), byref(h_c));
#
# I keep getting a WindowsError: exception: access violation writing 0x00000000
#
print h_func.value;
print h_text.value;
print h_c.value; 
```

InitPowerUSB 接受两个参数来返回数据并返回一个返回码。
谁能帮我这个。我有这个在 C# 中工作没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:02:55.140

Why not use [`pypowerusb`](https://github.com/superjoe30/pypowerusb/tree/master/lib)?

Looking at the [relevant header file](https://github.com/superjoe30/pypowerusb/blob/master/lib/PwrUSBInc.h), `InitPowerUSB` takes only *one* argument, a pointer to integer, while you supply three arguments.

Try calling the function with only a single argument.

# python - Python 和 argparse：如何根据第一个参数改变所需的附加参数？

> ID：14061043
> 
> 赞同：8
> 
> 时间：2012-12-27T20:41:56.643
> 
> 标签：python, command-line-arguments, argparse

我的目标是使用 argparse 编写一个 Python 命令行实用程序，该实用程序具有多个命令，每个命令都有不同的所需输入集。

我尝试通读文档、一些谷歌搜索和堆栈溢出，但找不到任何东西。我可以想到一些可能的解决方案，但它们很丑陋，需要手动处理帮助文档和验证。我的怀疑是，这是一种已经广为人知的常见有效解决方案的问题，而我只是缺乏正确的术语来搜索它，或者它太模糊了，以至于没有发布在不少地方。

我现在最好的想法是有一个位置参数，并且基于该输入的值对一组附加参数有不同的要求。也许我会解析两次？

例如，这是一个类似的情况：

有一个位置论点，动物

动物的选择是猫、蜥蜴、鱼

对于猫，参数爪，胡须，爪子是必需的

对于蜥蜴，参数 scale_color, favorite_food 是必需的

对于鱼，参数 water_type 是必需的

我们希望在 -h 中记录每种不同动物值所需的附加参数，而无需采用非正统的做法。

我考虑为每个主要类别选择使用可选参数来执行此操作。这是没有吸引力的，因为该实用程序真的只想接受其中一个论点，如果我可以避免在强制执行和记录这一点方面重新发明轮子，我更愿意这样做。

我可以做类似的事情：

```
valid_commands = ['a','b','c','d','e','f','g']
parser.add_argument('command', choices = valid_commands)
parser.add_argument('inputs', nargs = '*') 
```

但是我没有对每个命令选择的附加参数进行良好的输入检查。

有没有一些正常的方法可以做到这一点？当然，编写一个具有多个可能命令的实用程序以及每个命令所需的不同参数是相当普遍的。通过添加手动检查和帮助文档，我绝对可以满足我的大部分需求，但这种事情我可能会做足够多的时间，所以在第一次尝试时就做好是值得的。

感谢您阅读，如果我可以帮助提供信息，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T20:46:10.453

这似乎是子解析器的用途？

[http://docs.python.org/dev/library/argparse.html#argparse.ArgumentParser.add_subparsers](http://docs.python.org/dev/library/argparse.html#argparse.ArgumentParser.add_subparsers)

# javascript - 如何在 Three.js 中更改圆锥的 BASE 颜色？

> ID：14061044
> 
> 赞同：0
> 
> 时间：2012-12-27T20:42:08.780
> 
> 标签：javascript, webgl, three.js

我的锥体显示在 jsfiddle 链接中。现在整个锥体都是蓝色的单一颜色。但我想将圆锥方形底座的颜色更改为红色。为此，我需要更改构成方形底座的两个面的颜色。怎么做？

我的锥体的 JsFiddle 链接：http: [//jsfiddle.net/sagh0900/suvKg/1/](http://jsfiddle.net/sagh0900/suvKg/1/)

```
function getGeometry(meshMaterial)
{
var cone;
var geo = new THREE.Geometry();
geo.vertices.push(new THREE.Vector3(0, 0, 0));
geo.vertices.push(new THREE.Vector3(-0.5, 0.5, 1));
geo.vertices.push(new THREE.Vector3(0.5, 0.5, 1));
geo.vertices.push(new THREE.Vector3(-0.5, -0.5, 1));
geo.vertices.push(new THREE.Vector3(0.5, -0.5, 1)); 
geo.faces.push( new THREE.Face3(0,1,2));
geo.faces.push( new THREE.Face3(2,1,4));
geo.faces.push( new THREE.Face3(1,3,4));
geo.faces.push( new THREE.Face3(4,3,0));
geo.faces.push( new THREE.Face3(3,1,0));
geo.faces.push( new THREE.Face3(0,2,4));
geo.computeFaceNormals();
cone = new THREE.Mesh(geo, meshMaterial);
cone.doubleSided = true;
cone.overdraw = true;
return cube;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:55:11.570

您可以为顶点指定颜色，然后在材质中使用顶点颜色。这个过程的一个例子，看例子中的源码：

[http://stemkoski.github.com/Three.js/Vertex-Colors.html](http://stemkoski.github.com/Three.js/Vertex-Colors.html)

# c# - 将 Paypal Express 与 VB WPF 应用程序集成

> ID：14061046
> 
> 赞同：1
> 
> 时间：2012-12-27T20:42:15.320
> 
> 标签：c#, vb.net, paypal, express-checkout

我正在创建一个桌面应用程序，它将允许用户管理/使用虚拟化应用程序。我编写的一些应用程序并想出售这些应用程序。现在我有一个按钮（每个应用程序），它将下载应用程序、运行应用程序并输出信息。但是我现在无法将付款集成到程序中。我的想法是写一个类来控制虚拟应用是否已经付费，让用户能够下载我构建的虚拟应用，在这个类中这样做是没有问题的。然而，我需要将 Paypal Express CheckOut 集成到程序中。

集成是否像设置一个链接到我的 Express Check Out 购物车的按钮一样简单？然后一旦 Paypal 处理了付款，将 IPN 发送到应用程序？我遇到的问题是 IPN 回到了超链接。所以，也许我创建了查询交易支付过程的代码，那么如果真的允许用户下载虚拟应用程序？那行得通吗？示例或任何指导都会很棒！

注意：我是用 VB 编写的，但是 C# 中的任何示例都可以。我找到了如何在 vb asp.net 中获取 IPN 的示例：[https](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623) ://www.x.com/developers/PayPal/documentation-tools/code-sample/216623 。我的猜测是我也可以将它集成到 WPF 窗口中？

# ruby - 在 OSX 中更改了主文件夹位置并且找不到 gem

> ID：14061047
> 
> 赞同：0
> 
> 时间：2012-12-27T20:42:17.720
> 
> 标签：ruby, macos, gem, rvm

我将主文件夹更改为另一个硬盘驱动器。在此之后，'gem list' 不会打印我以前拥有的 gem。我尝试在 .rvm 环境中更改路径并重新加载我的终端，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:22:42.740

如果您没有用于`--movable`安装 rubies，那么您需要重新安装所有 rubies：

```
rm -rf $rvm_path/usr/
rvm reinstall all --force 
```

# php - 插入记录，检索 ID 然后插入第二个表 PHP/MySQL

> ID：14061049
> 
> 赞同：-2
> 
> 时间：2012-12-27T20:42:37.393
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [使用 PDO MySQL 插入 2 个表](https://stackoverflow.com/questions/14059172/insert-into-2-tables-with-pdo-mysql)

我试图将数据插入到 2 个表中，我的问题是在 1 个表中我有一个自动递增的 ID，然后我想插入到另一个表中。目前我不知道如何解决这个问题，我使用 rand(); 传递隐藏字段输入；并将该字段插入到两个查询中，只有有时网页可能会被缓存并且某些记录被覆盖，我希望这有意义吗？

```
 $sql = "

  INSERT INTO `directory` (`First_Name`,`Surname`,`Nicknames` ) VALUES (:firstname, :surname, :nicknames);

  INSERT INTO `user_sightings` (`UID`, `postcode`) VALUES (:uid, :lastseenpostcode);

  "; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:44:51.340

`LAST_INSERT_ID()`在您的第二个查询中使用。

```
 $sql = "

  INSERT INTO `directory` (`First_Name`,`Surname`,`Nicknames` ) VALUES (:firstname, :surname, :nicknames);

  INSERT INTO `user_sightings` (`UID`, `postcode`) VALUES (LAST_INSERT_ID(), :lastseenpostcode);

  "; 
```

# jquery - 在 Fancybox 中播放 VideoJS

> ID：14061051
> 
> 赞同：0
> 
> 时间：2012-12-27T20:42:50.110
> 
> 标签：jquery, fancybox, video.js

我有 Fancybox 设置以与 VideoJS v.2.xx 一起使用，但是在他们重新设计了 v.3.x 中的代码之后，`setupAllWhenReady`. 我曾经能够做到这一点

```
jQuery(this).fancybox({
    'onComplete': function () {
        jQuery("#fancybox-inner").css({ 'overflow': 'hidden' });
        VideoJS.setupAllWhenReady();
    }
}); 
```

现在视频仍然在 Chrome 中播放，我猜是因为 Chrome 本身支持 HTML 视频，但在 Firefox 中它根本不播放。首先出现海报 img 和中间的 x，当你点击它时，它会进入一个无尽的加载轮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:36:32.940

这是在动态添加到页面后初始化 video.js 播放器的新方法：

```
var myPlayer = _V_("example_video_1"); 
```

example_video_1 是`<video>`标签的 ID

然后您可以将 myPlayer 用于其他 API 函数，例如 play() 或 pause()

# symfony - 使用 capifony 部署 Symfony2 应用程序时出错

> ID：14061055
> 
> 赞同：0
> 
> 时间：2012-12-27T20:42:58.987
> 
> 标签：symfony, capifony

我正在尝试部署，但执行此命令时出现错误：

```
php app/console assets:install web --env=prod 
```

错误是：

```
[Symfony\Component\DependencyInjection\Exception\ParameterNotFoundException]
You have requested a non-existent parameter "secret". 
```

并且 capifony 正在回滚，所以没有部署任何东西......但是这个参数存在于 parameters.yml 中。我有一个带有 nginx 的 Amazon Linux。

有人可以帮我吗？

现在编辑不同的错误

```
Warming up the cache for the prod environment with debug false
Symfony\Component\Config\Exception\FileLoaderLoadException]
Cannot load resource ".". 
```

仍然无法正常工作...我不知道如何进行，没有帮助吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:01:00.157

您使用的是哪个版本的 Capifony？有同样的问题。重新安装 capifony，在我的项目中备份我的 Capfile 并`capifony .`再次运行解决了这个问题。检查新的上限文件和旧的文件显示了一些很大的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:04:58.023

Is parameters.yml included in the configuration file which is used in the production environment?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:10:49.410

检查`.gitignore`文件，默认情况下它会忽略`parameters.ini`，因此是“秘密”参数。

# joomla - 禁止分页被索引

> ID：14061057
> 
> 赞同：0
> 
> 时间：2012-12-27T20:43:08.033
> 
> 标签：joomla, pagination, robots.txt

我有一个包含 1000 多个页面的 joomla 网站，其中包含如下网址：

```
www.mysite.com/example.html?start=10  
www.mysite.com/example.html?start=20  
www.mysite.com/example.html?limitstart=0 
```

所有这些 URL 都由谷歌索引，在谷歌网站管理员工具中，我有大量由这些分页引起的重复元描述列表。

我知道使用 robots.txt 阻止他们并不难，这就是我需要帮助的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:01:06.723

您可以创建一个 robots.txt 并使用**Disallow**属性。

例如，既然您提到了这 3 个网址：

```
www.mysite.com/example.html?start=10  
www.mysite.com/example.html?start=20  
www.mysite.com/example.html?limitstart=0 
```

你应该使用这个：

```
Disallow: /?start=
Disallow: /?limitstart= 
```

您必须使用**Disallow:**后跟**/**以及您要禁止的内容中包含的模式。它可以针对特定的文件或文件夹。

**您还可以使用User-agent**属性指定要隐藏文件或文件夹的机器人：

```
User-agent: *
Disallow: /?start=
Disallow: /?limitstart= 
```

上面的代码适用于任何机器人或爬行引擎。

```
User-agent: googlebot
Disallow: /?start=
Disallow: /?limitstart= 
```

例如，此代码仅适用于 Google。

作为参考，您可以阅读您在[www.robotstxt.org](http://www.robotstxt.org/)上找到的材料，或者 wikipedia 上的页面已经足够好了。[http://en.wikipedia.org/wiki/Robots.txt](http://en.wikipedia.org/wiki/Robots.txt)

另一个详细的参考可以在这里找到：[https ://developers.google.com/webmasters/control-crawl-index/docs/robots_txt](https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T06:58:08.430

正确答案将是：

用户代理： *

禁止：/*?start=

禁止：/*?limitstart=

# php - 如何在 Zend Framework 中实现我的用户会话类

> ID：14061058
> 
> 赞同：0
> 
> 时间：2012-12-27T20:43:09.040
> 
> 标签：php, zend-framework, session

您好，我有一个网站，我有 3 个类`AnonymousUser`（用于未登录的用户）、`Users`（用于注册的普通用户）和`UsersInSession`（具有会话的用户）所有这些类都继承自 People 类。

我从 sql 查询中获取用户数据，并将其序列化谁正在记录并将其保存到`_SESSION["objectSession"]`，当用户记录每个 PHP 文件时，我取消序列化`_SESSION["objectSession"]`to`$objectSession`对象.. 当我想获取我的好友列表（在 MySQL 的资源中）时我做的对象：

```
$myFriends=$objectSession->getFriends(); 
```

然后我可以这样打印我朋友的数据：

```
 <table> <tr> <td>Name</td><td>Lastnames</td> </tr> <?php
 while($objectFriend=$myFriends->fetchObject("Users")){ ?> <tr> <td><?
 echo $objectFriend->name; ?></td> <td><? echo
 $objectFriend->lastnames; ?></td> <?php } ?></tr></table> 
```

我可以用这些类在 Zend Framework 中实现吗？

我不知道这些类是否可以是模型或控制器..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:13:59.473

对于这个问题，您的 ZF 版本无关紧要，因为它更多的是结构问题，而不是其他任何问题。

对于初学者来说，你目前有 3 个类在很大程度上做同样的事情。您可能可以将这 3 个类压缩为一个具有 3 个（或更多）身份验证和访问级别的用户类。

使用 ZF2 时，您可以使用以下方式进行身份验证（登录）系统：[Zend\Authentication](http://framework.zend.com/manual/2.0/en/index.html#zend-authentication) ，然后当您的应用程序决定每个用户获得的访问级别时，您可以使用访问控制组件之一来控制用户可以访问哪些资源。
[Zend/Permissions/Acl](http://framework.zend.com/manual/2.0/en/modules/zend.permissions.acl.intro.html)，传统的基于对象的 ACL。
[Zend/Permissions/Rbac](http://framework.zend.com/manual/2.0/en/modules/zend.permissions.rbac.intro.html)，基于角色的 ACL。

如果您真的不想/不需要自己的解决方案，您可以在[ZF2 模块中找到一些非常好的访问控制和身份验证解决方案](http://modules.zendframework.com/#modules)

**[编辑]**

> 我可以用这些类在 Zend Framework 中实现吗？

是的，尽管您可能需要重命名它们以便于实施。

> 我不知道这些类是否可以是模型或控制器..

根据您的描述，您的类很可能在每个类中包含模型、控制器甚至视图元素。因此，可能需要进行一些重构。

通常，这些类主要是[“域模型”](http://en.wikipedia.org/wiki/Domain_model)类型的模型类，它们将与一个或多个控制器进行交互，以通过视图进行处理和呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:36:45.660

谢谢，好吧，也许我没有很好地问这个问题..我对这 3 个课程所做的是检查用户是否有“特权”来做这件事，例如：

- 匿名用户（继承自 People 类）不能评论任何个人资料。

- 用户（也继承自 People 类）可以发表评论，并拥有其个人资料和图片。每个用户都有一个隐私表，因此取决于用户是否可以评论他们的朋友或所有用户。这个类有 checkprivacy($iduser ) 方法检查用户是否可以看到 $iduser 的配置文件。这个类也有 checkBlocked($iduserblock) 功能，因为它可以检查用户是否被阻止并且看不到配置文件。

-People 类（这个类做这项工作）检查会话是否是匿名用户，或者用户（已登录）如果已登录我们检查是否被阻止，我们将检查他是否可以发表评论。如果是匿名用户没有必要检查他是否被阻止.. 这个类有方法 loadProfile($id) 来加载配置文件和更多问题

# unix - 在 shell 脚本中执行 linux 命令

> ID：14061060
> 
> 赞同：0
> 
> 时间：2012-12-27T20:43:21.327
> 
> 标签：unix

我正在尝试执行一个命令，但是该命令太长了，而且太长而无法仅从命令行运行。所以我试图把它放在一个shell脚本中，然后我可以运行shell脚本，它会执行非常长的unix命令。

显然我需要标题，然后是命令。我需要添加什么语法才能使这个 shell 脚本起作用？

```
 #!/bin/sh
./mysqldump --defaults-file=../../conf/mysql.conf --single-transaction \
   --ignore-table=st.Event --ignore-table=st.TransferStatus  \
   --ignore-table=st.TransferConfiguration --ignore-table=st.TransferData \ 
   --ignore-table=st.logging_event --ignore-table=st.logging_event_exception \ 
   --ignore-table=st.logging_event_property \
   -u root -pXXXXXXXX st > /tmp/database_backup.sql 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:38:41.390

就语法而言，你的shell脚本对我来说似乎很好......

我要注意的是脚本中的所有相对路径，更具体地说`./mysqldump`是`../../conf/mysql.conf`. 使用相对路径要求脚本*始终*从文件系统中的特定目录执行。使用绝对路径使脚本更安全，尽管它确实将其绑定到特定位置。

如果您坚持使用相对路径，您可以将脚本放在应该运行它的目录中，然后使用绝对路径调用*它。*

要运行脚本，您应该使用`chmod +x`（或其某些变体）使其文件可执行，或者将其作为参数传递给`sh`例如`sh /path/to/my/script.sh`.

如果您提到当前脚本的确切问题是什么，我们可能会提供更多帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:46:09.563

我认为您不需要`./`，而且您可以为该命令创建别名 (http://linuxreviews.org/quicktips/alias/)。一旦你准备好命令`chmod +x`，不要忘记文件。`.sh`

您可能想在此处查看此示例：http: [//bash.cyberciti.biz/backup/backup-mysql-database-server-2/](http://bash.cyberciti.biz/backup/backup-mysql-database-server-2/)

```
MYSQLDUMP="$(which mysqldump)"
$MYSQLDUMP -u $MyUSER -h $MyHOST -p$MyPASS $db 
```

# python - 如何在 python 中渲染 3D 直方图？

> ID：14061061
> 
> 赞同：17
> 
> 时间：2012-12-27T20:43:32.073
> 
> 标签：python, matplotlib, plot, data-visualization, mayavi

我想从[Hacker's Delight](https://rads.stackoverflow.com/amzn/click/com/0321842685)制作这样的情节：

![在此处输入图像描述](../Images/96f374f26cf3d327a2e6a23c70ca0a2e.png)

在 Python 中有哪些方法可以实现这一点？一个可以轻松交互式地调整图形（更改当前观察到的 X/Y 切片）的解决方案将是理想的。

matplotlib 和 mplot3d 模块都没有此功能 AFAICT。我找到了 mayavi2，但它非常笨重（我什至找不到调整大小的选项），而且只有在从 ipython 运行时才能正常工作。

或者 gnuplot 可以工作，但我不想为此学习另一种语言语法。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-23T00:39:17.380

由于 TJD 指出的示例似乎“难以理解”，因此这里是一个修改版本，其中包含一些可能有助于澄清事情的注释：

```
#! /usr/bin/env python
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np
#
# Assuming you have "2D" dataset like the following that you need
# to plot.
#
data_2d = [ [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
            [6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
            [11, 12, 13, 14, 15, 16, 17, 18 , 19, 20],
            [16, 17, 18, 19, 20, 21, 22, 23, 24, 25],
            [21, 22, 23, 24, 25, 26, 27, 28, 29, 30] ]
#
# Convert it into an numpy array.
#
data_array = np.array(data_2d)
#
# Create a figure for plotting the data as a 3D histogram.
#
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
#
# Create an X-Y mesh of the same dimension as the 2D data. You can
# think of this as the floor of the plot.
#
x_data, y_data = np.meshgrid( np.arange(data_array.shape[1]),
                              np.arange(data_array.shape[0]) )
#
# Flatten out the arrays so that they may be passed to "ax.bar3d".
# Basically, ax.bar3d expects three one-dimensional arrays:
# x_data, y_data, z_data. The following call boils down to picking
# one entry from each array and plotting a bar to from
# (x_data[i], y_data[i], 0) to (x_data[i], y_data[i], z_data[i]).
#
x_data = x_data.flatten()
y_data = y_data.flatten()
z_data = data_array.flatten()
ax.bar3d( x_data,
          y_data,
          np.zeros(len(z_data)),
          1, 1, z_data )
#
# Finally, display the plot.
#
plt.show() 
```

# sql - 使用存储过程的输出

> ID：14061063
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:43:52.743
> 
> 标签：sql, sql-server, stored-procedures

我有 MyStoredProcedure，如果 OK，则返回 1，如果 NOK，则返回 0。

```
CREATE PROCEDURE MyStoredProcedure 
AS
RETURN 1
GO 
```

以下代码不起作用：

```
IF MyStoredProcedure() = 0 --GOTO END, do something 
```

（我从另一个 SQL 过程调用 MyStoredProcedure）

我怎样才能使用这个返回值？

SQL 服务器 2005

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T20:47:39.890

在 SQL Server 中使用 EXEC 命令

[http://msdn.microsoft.com/en-us/library/ms188332.aspx](http://msdn.microsoft.com/en-us/library/ms188332.aspx)

例如

```
DECLARE @ret int;
EXECUTE @ret = MyStoredProcedure;

IF (@ret = 0)

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:47:04.900

如果您想按名称这样使用它，则需要将其定义为不作为存储过程，而是作为标量 UDF：http: [//msdn.microsoft.com/en-us/magazine/cc164062.aspx#S1](http://msdn.microsoft.com/en-us/magazine/cc164062.aspx#S1)

然后你可以在你的其他代码中使用函数名。

# android - 如何将 ProgressBar 添加到 SherlockListActivity 类

> ID：14061068
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:44:18.953
> 
> 标签：android, android-layout, listview, listactivity, android-progressbar

我有扩展 SherlockListActivity 的 MainActivity。这是 onCreate 方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new MyXMLDownloader().execute(this);
} 
```

MyXMLDownloader 只是 AsyncTask 类，我用它来从 http 下载 XML 文件。在 onPostExecute 方法中，我调用了 makeMainGUI()，它基于该 XML 文件创建 GUI（我的意思是它填充了我的 ListView）。

这是 main.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

我想添加 ProgressBar 小部件（和一些文本）。它应该在下载 XML 之前显示，并且在填充 ListView 后它应该消失（当然它发生在下载 XML 之后）。我怎样才能做到这一点？

我对此有疑问，因为我必须在 main.xml 中有 ListView，因为我的 MainActivity 类扩展了 SherlockListActivity。

编辑：

我设法做这样的事情：

```
<ProgressBar
        android:id="@android:id/empty"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" /> 
```

我将 ProgressBar 添加到 main.xml 并带有“空”ID。只要 ListView 为空就显示，这是正确的。但我也不知道如何在这里放置一个 TextView，因为只有一个项目可以有一个“空”的 id。

EDIT2：因为我认为我设法做到了这一点。在 main.xml 我添加了以下内容：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center" 
    android:id="@android:id/empty">
    <ProgressBar
    style="?android:attr/progressBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" 
    android:id="@+id/progressBar1"/>

    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Please wait"
    android:textAppearance="?android:attr/textAppearanceLarge" 
    android:id="@+id/waitingTextView"/>

</LinearLayout> 
```

这是我需要的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:48:57.470

在 AsyncTask 类中，使用 onPrexecute 方法显示进度对话框并使用 onPostExecute 关闭它：

```
@Override
protected void onPreExecute()
{
    super.onPreExecute();
    pDialog = new ProgressDialog(YOUR_ACTIVITY_CLASS_NAME.this);
    pDialog.setMessage("Please Wait");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
}

@Override
protected void onPostExecute(String str)
{
    // Dismiss the dialog once finished
    pDialog.dismiss();  
} 
```

在调用它之前不要忘记定义 pDialog：

```
ProgresDialog pDialog; 
```

# java - 创建类、构造函数和方法

> ID：14061075
> 
> 赞同：-2
> 
> 时间：2012-12-27T20:44:59.690
> 
> 标签：java

我收到了一项家庭作业，要创建以所有特定方式定义的课程。我想知道是否有人知道一个好的网站\教程可以帮助我更好地理解类方法和构造函数的确切含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:48:13.480

“用 Java 思考”非常适合理解所有这些概念。

# c# - 代码优先不更新子对象

> ID：14061076
> 
> 赞同：1
> 
> 时间：2012-12-27T20:45:14.400
> 
> 标签：c#, entity-framework, ef-code-first

我在使用 CodeFirst 更新 POCO 的子对象时遇到问题。我的 POCO 如下

```
public class Place
{
    public int ID { get; set; 
    public string Name { get; set; }

    public virtual Address Address { get; set; }
}

public class Address
{
    public int ID { get; set; 
    public string AddressLine { get; set; }
    public string City { get; set; }

    public virtual State State { get; set; }
}

public class State
{
    public int ID { get; set; 
    public string Name { get; set; }
} 
```

我有一个视图来编辑所有地方及其子字段。除了 State 是 DropDownList 之外，所有属性都是文本框。

当用户单击“保存”按钮时，视图会返回所有已填充的 Place 属性，但仅使用 ID 填充的 State 除外，因为它的值来自 DropDownList 并且 Name 为空。

在编辑发布方法中，我有以下代码：

```
if (ModelState.IsValid)
{
    bool isNewPlace = place.ID == -1;
    //Hack, State name is empty from View, we reload
    place.Address.State = new StateBLL().GetByID(place.Address.State.ID);
    new PlaceBLL().Update(place);

    return RedirectToAction("Index");
} 
```

PlaceBLL 类的更新代码如下

```
protected override void Update(Place place)
{
    MyDbContext.Instance().Set<Address>().Attach(place.Address);
    MyDbContext.Instance().Entry(place.Address).State = System.Data.EntityState.Modified;
    MyDbContext.Instance().Set<State>().Attach(place.Address.State);
    MyDbContext.Instance().Entry(place.Address.State) = System.Data.EntityState.Modified;
    MyDbContext.Instance().SaveChanges();
    } 
```

当用户编辑 Place 对象时，除了状态之外的所有字段都正确更新，当用户更改某个地方的状态时，此更改不会持久保存到数据库，如果代码似乎首先没有检测到用户的状态更改。

你知道为什么 code first 没有检测到 Place 的 State 变化值吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:04:07.267

您的`Update`方法更新 (scalar properties of)`Address`并更新 (scalar properties of)`State`但它不会更新 and 之间的关系（*这*不是问题，因为您显然只在视图中编辑属性而没有将另一个实体分配给）和它不会更新 和之间的*关系*。但在你看来，这实际上是你改变的。`place``Address``Address``Address``place`*`place.Address``place.Address.State`*

 *要更新和之间的关系*，*`place.Address`您`place.Address.State`有两种选择：

*   在您的类中引入一个外键属性，该属性`Address`代表状态的 FK（这种类型的关联称为*外键关联*）：

    ```
    public class Address
    {
        public int ID { get; set; 
        public string AddressLine { get; set; }
        public string City { get; set; }

        public int StateID { get; set; }
        public virtual State State { get; set; }
    } 
    ```

    然后确保将下拉列表绑定到`place.Address.StateID`（而不是`place.Address.State.ID`）。`StateID`当您将视图发布到服务器时，将使用下拉列表中新选择的 ID 填充FK 属性。在您的`Update`方法中，您可以删除第三和第四行。单独更新`Address`也会更新`StateID`外键。`State`您还可以删除在您的编辑帖子操作中加载的代码。

*   如果您想保留当前的*独立关联*（= 在模型类中没有暴露外键属性的关联），您必须从数据库加载原始状态并使用新状态更新它：

    ```
    protected override void Update(Place place)
    {
        var dbPlace = MyDbContext.Instance().Places.Include(p => p.Address.State)
            .Single(p => p.ID == place.ID);

        // Update scalar properties of place
        MyDbContext.Instance().Entry(dbPlace)
            .CurrentValues.SetValues(place);

        // Update scalar properties of Address
        MyDbContext.Instance().Entry(dbPlace.Address)
            .CurrentValues.SetValues(place.Address);

        // Change relationship between Adress and State
        if (dbPlace.Address.State.ID != place.Address.State.ID)
        {
            MyDbContext.Instance().States.Attach(place.Address.State);
            dbPlace.Address.State = place.Address.State;
        }

        MyDbContext.Instance().SaveChanges();
    } 
    ```

    同样，您可以删除`State`在 Edit Post 操作中加载的代码，因为正确的键属性 ( `State.ID`) 足以更改关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:54:27.863

您还需要附加实体。以下是您需要做的简单版本。

```
var updated = _dbSet.Attach(item);
_dataContext.Entry(item).State = EntityState.Modified;
return updated; 
```*

# php - 如何防止访问者在 iframe 之外打开页面

> ID：14061078
> 
> 赞同：0
> 
> 时间：2012-12-27T20:45:16.680
> 
> 标签：php

我需要阻止访问者在 iframe 之外打开页面

例如

在浏览器上写入时：

```
www.sss.com/index.php 
```

将开放

但是当写

```
www.sss.com/add_news.php 
```

我需要重定向到主页

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:53:56.363

由于 iframe 发出 GET 请求，因此实际上没有任何方法可以区分来自浏览器本身的 GET 请求和来自嵌入在页面中的 iframe 的请求。在这两种情况下，浏览器都会发出相同的 GET 请求。您可能会在“iframe”页面中编写一些 JavaScript 代码，以检测它是否已加载到顶部窗口中，如果没有则重定向。

从关于[如何识别网页是在 iframe 内还是直接加载到浏览器窗口中的公认答案中？](https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t)

使用窗口属性`top`和`self`

```
<script type="text/javascript">
    if (top === self) {
        location = '/index.php';
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:54:07.023

我建议您生成一些令牌，例如。“982h2jruhndjf92”，将其存储在服务器或 cookie 中，然后将其作为 GET 参数添加到帧内脚本中。

```
<iframe src="www.sss.com/add_news.php?token=982h2jruhndjf92" /> 
```

如果 url 提供相同的标记，则显示正确的视图，否则使用 header() 函数重定向用户。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T20:48:30.153

只使用 php 你可以用标题做到这一点

```
<?php

   header( 'Location: www.sss.com/index.php' ) ;

?> 
```

# python - 访问外部类中的全局变量

> ID：14061086
> 
> 赞同：0
> 
> 时间：2012-12-27T20:46:21.857
> 
> 标签：python, global-variables, scope, python-2.6

我已经学习 Python 大约一周左右，在我的代码变得相当大而且有点混乱之后，我决定将它分解成单独的类文件等，但我遇到了一些问题。

我已经尝试过谷歌搜索并在这里搜索，但我找不到我的具体问题，如果之前有人问过，请原谅我。

考虑2个文件。test.py 和 testClass.py 我在 test.py 中有一个全局变量，它也将在 test.py 中设置，但我想在 testClass.py 的函数中访问该变量。这里有一些代码可以帮助解释。

test.py 看起来像这样：

```
import testClass

dict = {}
z = 5

dict['test'] = testClass.testClass(1, 3)

print dict['test'].sum() 
```

testClass.py 看起来像这样：

```
class testClass:
    def __init__(self, x, y):
        self.foo = x
        self.bar = y

    def sum(self):
        global z
        return self.foo + self.bar + z 
```

目前，口译员正在吐槽：

```
NameError: global name 'z' is not defined 
```

在重新阅读了类和变量范围的 Python 引用后，我认为我已经掌握了它，但显然没有。

这一切的结果只是能够遍历对象实例的字典并运行包含在外部类中的一系列各种检查函数等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:01:47.520

全局对于文件（模块）是全局的，因此您可能希望将其包含在一个类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:59:44.497

如果您在方法中声明它，我不确定 global 是否会起作用，因为这在技术上是一个本地命名空间。尝试将其放在主要和总和之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:02:47.887

全局变量需要在任何会改变它们的函数中定义。

我认为您还需要在 test.py 中将“z”定义为全局变量：

```
import testClass

dict = {}
global z = 5

dict['test'] = testClass.testClass(1, 3)

print dict['test'].sum() 
```

# java - java setters , 不适用于参数 (void)

> ID：14061087
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:46:27.177
> 
> 标签：java

有没有人看到这里做错了什么，我收到此错误“Guest 类型中的方法 giveTea 不适用于参数 (void)，我是 java 新手 + 我的英语不好 XD，所以这是什么意思。

```
Guest alice = new Guest();
alice.giveTea. (new Tea().setName("Roseship Tea"));
alice.giveTea. (new Tea().setSugar(false));
alice.giveTea. (new Tea().setMilk(true));' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:48:31.083

setter 返回 void，而不是实例本身。你应该这样做

```
Guest alice = new Guest();
Tea tea = new Tea();
tea.setName("Roseship Tea");
tea.setSugar(false);
tea.setMilk(true);
alice.giveTea(tea); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:48:50.537

返回类型`new Tea().setName("Rosehip Tea")`是`void`因为`setName()`不返回任何东西。这样做：

```
Tea t = new Tea();
t.setName("Rosehip Tea"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:55:42.370

setter 方法通常具有返回类型 void。方法给茶大概是一种茶。您正在做的是创建一个对象并将属性添加在一起。您应该拆分它或创建一个立即设置某些属性的构造函数。

后者是一个好方法，因为 Tea 对象在创建后应该是一个不可变对象。因此它的设计应该是这样的：

```
public class Tea{
 private final String teatype;
 private final boolean sugar;

 public Tea(String pType, boolean pSugar){
  teatype = pType;
  sugar = pSugar;
 }

 public String getTeatype(){
  return teatype;
 }
 ....

} 
```

# ruby-on-rails - 尝试在表中显示特定 user_id 的结果

> ID：14061090
> 
> 赞同：0
> 
> 时间：2012-12-27T20:46:46.163
> 
> 标签：ruby-on-rails, activerecord

我正在尝试在我的管理区域中显示特定用户的帐单详细信息。我要做的就是在文本字段中输入用户 ID，然后按提交，链接到该 user_id 的帐单将显示在下表中。到目前为止，这是我的 cac 付出的努力：

管理员/index.html.erb

```
<%= form_tag(:action => "show_billings") do %>
<div class="field">
  <p>User ID</p>
  <%= text_field_tag :user_id %>
</div>
<div class="actions">
  <%= submit_tag "Show Billing For This User", :class => 'btn btn-success' %>
</div>
<% end %>

<table class="table table-hover table-striped table-bordered">

<thead style="background-color: #efefef">

<tr>
<th>Date</th>
<th>Description</th>
<th>Debits</th>
<th>Credits</th>
<th>Balance</th>
</tr>

</thead>

<tbody>

<% @billings.each do |billing| %>
  <tr>
    <td><%= billing.date %></td>
    <td><%= billing.description %></td>
    <td><%= number_to_currency(billing.debits) %></td>
    <td><%= number_to_currency(billing.credits) %></td>
    <td><%= number_to_currency(billing.balance) %></td>

  </tr>
<% end %>
</tbody>
</table> 
```

admin_controller.rb

```
def show_billings
    billings = Billing.where(:user_id => params[:user_id])
    if billings.nil?
      @billings = Billing.where(:user_id => '22')
    else
      @billings = billings
    end
  end 
```

我收到以下错误，这就是为什么我试图让@billings 不为零：

```
undefined method `each' for nil:NilClass 
```

我不知道 def show_billings 是否有必要，对 Rails 来说还是很新，我所做的一切总是错误的，所以这可能也是，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:51:47.107

```
def show_billings
    if params[:user_id]
      @billings = Billing.where(:user_id => params[:user_id])
    else
      @billings = Billing.where(:user_id => '22')
end 
```

让我知道你是怎么办的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:47:45.540

嗯，你是`show_billings`从你的`index`行动中调用的吗？您向我们展示了`index.html.erb`在操作之后呈现的内容`index`。该表单确实发布到`show_billings`，但`show_billing.html.erb`通常会呈现 。

因此，或者，在您的 中写入`index.html.erb`类似这样的内容，`@billings = []`这样您就不会收到错误，并让`show_billings`渲染与 index.html 相同的视图。但是，我什至看不到真正需要单独的操作：让搜索表单再次进入索引？无论如何，它是相同的代码。

# html - 将最大宽度设置为容器

> ID：14061097
> 
> 赞同：1
> 
> 时间：2012-12-27T20:47:27.037
> 
> 标签：html, css

如何配置我的 css 以确保一旦容器的垂直长度超过 375px，它会自动将图像添加到第一行旁边？

看看我下面的DEMO

**HTML**

```
<div class="panes">

<div id="one">
<a href="#"><img src=".jpg" width=100 height=100 /></a>
<div>Caption</div>

<a href="#"><img src=".jpg" width=100 height=100 /></a>
<div>Caption</div>

<a href="#"><img src=".jpg" width=100 height=100 /></a>
<div>Caption</div>

</div> 
```

**CSS**

```
.panes {
max-width:375px?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:58:18.593

**向左飘浮;**

[http://jsfiddle.net/LTtEN/](http://jsfiddle.net/LTtEN/)

干得好：

```
<div class="panes">
<div class="test">
<a href="#"><img src=".jpg" width=100 height=100 /></a>
<div>Caption</div>
</div>

<div class="test">
<a href="#"><img src=".jpg" width=100 height=100 /></a>
<div>Caption</div>
</div>

<div class="test">
<a href="#"><img src=".jpg" width=100 height=100 /></a>
<div>Caption</div>
</div>

<div class="test">
<a href="#"><img src=".jpg" width=100 height=100 /></a>
<div>Caption</div>
</div> 
```

CSS：

```
.panes {width:375px}
.test {float: left; width: 100px; padding: 6px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:58:37.753

首先，垂直长度由`height`属性给出，而不是`width`.

其次，你需要一些 javascript 来做你想做的事。将图像插入您想要放置的位置，并使其属性`visibility = "hidden";`.

然后，在加载或更适合您的问题的事件上使用 javascript 函数，以便此函数将图像的可见性重置为`visibility = "visible"`.

您可以使用 javascript 函数插入元素，而不是简单地更改它的可见性。

# javascript - 调用像函数一样声明的对象

> ID：14061101
> 
> 赞同：0
> 
> 时间：2012-12-27T20:47:47.847
> 
> 标签：javascript, function, object, methods

在下面的代码中，我试图调用一个声明为对象的方法。我将如何调用该函数？

```
var draw = function() {
    anotherFunction();
}

draw(); 
```

我收到错误“TypeError：对象 [对象窗口] 的属性‘绘制’不是函数”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:12:57.300

快速 Javascript 范围界定课程；当你这样做时：

```
 function someFunction() {
      var foo = 'bar';
 }
 someFunction();
 // foo doesn't exist 
```

该`foo`变量仅在执行 someFunction 时才存在；之后它就消失了。

您可以通过在“全局对象”上设置 foo 来解决此问题，即。“窗户”：

```
 function someFunction() {
      window.foo = 'bar';
 }
 someFunction();
 // foo does exist! 
```

但是，除非您的站点非常小，否则很快就会变得混乱（编程语言有范围是有原因的：将所有内容放在全局空间中很难使用）。

因此，您真正需要做的是更仔细地查看创建 foo 的内容（好吧，在您的情况下`draw`）以及使用 foo ( `draw`) 的内容，看看您是否不能让两者更接近，或者拥有创建`draw`return的函数它，或类似的东西。

# ruby-on-rails - Rails 模型关系 :through 和 :has_many

> ID：14061102
> 
> 赞同：1
> 
> 时间：2012-12-27T20:47:55.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我有以下模型（仅包括主要细节），其中有它们的时间，它们可能被`Courts`分成任何一个- 或多或少在下面描述。 我该如何建立这样的关系？应该有很多:through ？`CourtTimeSlots``reserved``Users`
`User``CourtTimeSlots``Reservation`

目的是能够获得所有预订并从那里显示`User`和`Court`信息。

```
class User < ActiveRecord::Base
end

class Reservation < ActiveRecord::Base
    ???
end

class Court < ActiveRecord::Base
    attr_accessible :court_number
    has_many :court_sessions
end

class CourtTimeSlot < ActiveRecord::Base
    attr_accessible :start_time, :end_time, :status
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:39:32.013

我懂了。在这种情况下，以下内容可能会实现您的目标，演示如何通过预订访问您正在查找的数据。

```
class Reservation < ActiveRecord::Base
  belongs_to :time_slot
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :reservations
end

class CourtTimeSlot < ActiveRecord::Base
  has_one :reservation
  belongs_to :court
end

class Court < ActiveRecord::Base
  has_many :court_time_slots
end

Reservations.all.each do |r|
  r.user
  r.time_slot.court.court_name
end 
```

# css - CSS3 盒子阴影大小 - 百分比单位？

> ID：14061104
> 
> 赞同：46
> 
> 时间：2012-12-27T20:48:00.720
> 
> 标签：css, percentage, box-shadow

我正在开发一个需要使用 CSS3 box-shadow 属性的项目。这很好，但我发现阴影的传播大小不能设置为父对象的百分比。

我完全理解 box-shadow 不是相加的，因此它不会以父级的大小作为参考。

但是考虑到我需要一个完全响应的站点，并且对象可以流畅地缩放（不仅在断点上），但这也带来了一个问题——我只能以绝对单位（em 或 px）将阴影设置为展开属性。

有什么解决办法吗？我想过在容器中使用内部容器（用于内容）（用于“阴影”——它没有模糊），但这会产生另一个问题——内部容器的垂直居中。

有什么解决办法吗？请不要使用 jQuery，只需纯 CSS。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-11-23T13:03:30.097

> 我发现阴影的传播大小不能设置为父对象的百分比

真的。但是可以`font-size`在父对象上设置，然后在`em`s中定义对象的大小，用同样`em`的s来定义`box-shadow`大小。

或者，如果您的父对象恰好是窗口，您可以使用[视口单位：`vw`和`vh`](http://caniuse.com/#feat=viewport-units).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-26T15:48:02.600

如果您在**插入** `box-shadow`后，您可以使用径向渐变背景来模仿行为。所以，而不是 -

```
box-shadow: inset 0 0 100% #000; 
```

你会使用 -

```
background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0,rgba(0,0,0,1) 100%); 
```

支持：FF16+、IE10+、Safari 5.1+

关于 Chrome 何时开始支持该属性，我找不到任何明确的答案，但我当前的版本 (39.0.2171.65) 绝对支持它。

如果您决定走这条路，[ColorZilla是一个非常有用的工具，用于生成径向（以及其他）渐变以及必要的前缀。](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T11:20:19.637

您是否尝试过使用该`rem`单位（根 em 单位）？我相信您可以使用它来使其流畅地扩展。

rem 单位总是相对于根 html 元素，所以它会相应地缩放，你不必担心内部容器或类似的东西。在这一点上，它也有相当广泛的浏览器支持。

我在我的项目中使用它以使它们更具响应性，但始终遵循已由 px 或 em 定义的参数，以便以防万一它优雅地失败。例如：

```
font-size: 14px; font-size: 1.4rem; 
```

这是一篇很棒的文章，解释了您需要了解的有关本单元的所有信息：http: [//snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-21T14:07:38.350

如果元素具有定义的宽度（百分比宽度除外），您可以为宽度创建自定义属性，然后将自定义属性与`calc()`框阴影功能一起使用。

例如，下面的 CSS 代码使盒子阴影的“扩展半径”为 20%`div`的宽度：

```
div {
    --width: 100px;
    width: var(--width);
    box-shadow: 0 0 0 calc(var(--width) * 0.2) #aaa;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-11T22:19:15.403

您希望 box-shadow 随容器的宽度或容器的高度缩放吗？你不能真正指定阴影的高度和宽度，只能指定一个传播。因此，如果您的容器宽度缩小了 10% 但高度没有缩小，那么您的阴影将缩小 10%（如果可能的话），即您的阴影的高度会缩放，即使它可能不应该缩放。

如果您希望 box-shadow 在高度和宽度方面实际正确缩放，则必须创建多个阴影 - 一个用于高度，一个用于宽度。

但是，您将永远无法缩放实际的阴影，只能缩放阴影的容器。所以你会在你的主容器中创建一个容器，然后给它负边距并附加盒子阴影。但是，您很快就会注意到，当您缩小容器时，您的阴影实际上是在增长而不是缩小。

在不使用媒体查询或 jQuery 的情况下尝试扩展无法扩展的东西似乎有点矫枉过正。

但是，如果您正在寻找可扩展的边框，即没有模糊的框阴影：P，那么不要再看了：

[http://jsfiddle.net/925r2/3/](http://jsfiddle.net/925r2/3/)

```
<style>
    * {
        margin: 0;
        padding: 0;
        border: 0;
        box-sizing: border-box;
    }

    .wrapper {
        position: relative;
        margin: 100px auto 0;
        width: 80%;         /* .content width */
        height: 400px;      /* .content height */
    }

    .content {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: #fff;   /* .content background */
    }

    .shadow {
        position: absolute;
        top: -10%;          /* .content shadow top height */
        right: -5%;         /* .content shadow right width */
        bottom: -10%;       /* .content shadow bottom height */
        left: -5%;          /* .content shadow left width */
        background: #000;   /* .content shadow, unfortuntely no blur effect */
    }
</style>

<div class="wrapper">
    <div class="shadow"></div>
    <div class="content">This is your content</div>
</div> 
```

# c# - 控制 Struct 对象的大小和范围

> ID：14061106
> 
> 赞同：1
> 
> 时间：2012-12-27T20:48:03.837
> 
> 标签：c#, c#-4.0, struct

我正在构建一个库的设计，并且由于我不熟悉 C#，我想创建一个结构（值类型）并让它在内部进行管理。这意味着当有人为所述结构分配值时，它会（在这种情况下）验证值的长度并对值进行一些清理（即变成`whitespace`等`underscores`）。

它对我所错的值的控制。如果它是一个普通的类，我只会将一个事件附加到分配并执行所有验证，但是对于我要创建的对象来说，一个类会是过度杀伤力，我认为一个`struct`对象将是最合适的.

### 结构设计，可能不干净，但我到目前为止：

```
public struct ST_Keytip
{
    private string _value;

    [DefaultProperty]
    public string FooBar
    {
        get { return this._value; }
        set
        {
            if (len(value) < 1 or len(value) > 3)
            {
                throw new exception("blah blah blah....PUKE!!!!")
            }
            else
            {
                this._value = value;
            }
        }
    }
} 
```

我确定它不是一个干净的 C# 设计，但如果它是一个类对象我会做的。基本上我不需要实例化它（因此我没有使用类）并且它应该保持一个值。我只是想知道我是否可以将值验证附加到结构，如果我可以怎么办？如果不是，那么让值类型对其分配的值有限制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T20:51:41.413

可变结构是邪恶的。你应该像躲避瘟疫一样避开它们。

通常，如果有令人信服的理由/需要这样做，并且您完全了解使用结构的所有后果，最好只在类上使用结构。

对于您的情况，尽管您的对象很小，但它应该是一个类。

# perl - 你怎么知道一个套接字客户端断开连接？

> ID：14061109
> 
> 赞同：4
> 
> 时间：2012-12-27T20:48:18.367
> 
> 标签：perl, sockets

我在 Perl 服务器中使用套接字时遇到了一点麻烦。

你怎么知道一个（非阻塞的）客户端刚刚断开连接？在C中，我习惯做

```
if (recv(sock, buff, size, flags) == 0) {
    printf("Client disconnected\n";
} 
```

或 python 或其他语言中的等价物：`recv`如果没有可用数据，则返回 -1，如果客户端退出，则返回 0，如果可以读取数据，则返回正数。

但是 perl`recv`不是这样工作的，并且 using`$data = <$sock>`似乎没有任何可能知道。

有没有（简单的）可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:59:12.977

你必须看看`perldoc perlio`and `perldoc IO::Socket`。

```
#!/usr/bin/perl -w
use IO::Socket; 
```

有很多方法可以与非阻塞 IO 组合，从`PIPE`信号到`recv`您可以使用（取决于您在做什么）：

```
return "Socket is closed" unless $sock->connected; 
```

这就是我控制许多套接字为它们服务的方式`select`。当套接字关闭时，我必须将它们从列表中删除（没有别的，好像断开连接，套接字不再存在，因此无需关闭它们）：

```
unless (eval {$group{$grp}->{'socket'}->connected}) {
    delete $group{$grp}->{'socket'};
    return 0;
}; 
```

这`eval`可以防止对断开连接的套接字进行错误尝试，这将导致脚本以*套接字 io 错误*结束。

希望这可以帮助！

# autohotkey - 字母计数

> ID：14061110
> 
> 赞同：1
> 
> 时间：2012-12-27T20:48:23.357
> 
> 标签：autohotkey

我正在尝试制作一个脚本来计算我键入的不同字母，但是要么我收到错误“太多热键”（我猜是递归调用我自己），要么我输入的键没有显示。

这没有字母

```
a::  
a_cnt += 1  
return  

b::  
b_cnt += 1  
return 
```

这提供了太多的热键

```
a::  
a_cnt += 1  
send a  
return  

b::  
b_cnt += 1  
send b  
return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:23:23.530

尝试以 a 开头`$`，例如

```
$a::
a_cnt += 1
send a
return 
```

[$ 前缀](http://www.autohotkey.com/docs/Hotkeys.htm#Symbols)`Send`防止命令从.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:14:52.980

如果您在热键之前使用 ~，该键将被转发到应用程序并执行命令。这将使其成为单行命令而不是多行命令。

```
~a::a_cnt += 1 ; Lowercase a
~+a::aa_cnt += 1 ; Uppercase a

^a::MsgBox, %a_cnt%
^+a::MsgBox, %aa_cnt% 
```

# asp.net-mvc - 使用实体框架4.1创建复合主键

> ID：14061112
> 
> 赞同：10
> 
> 时间：2012-12-27T20:48:27.807
> 
> 标签：asp.net-mvc, entity-framework-4

我有两张桌子`Projects`和`Task`. `Task`是项目的弱实体，所以task的复合主键是( `ProjectId & TaskID`)。我尝试使用以下代码这样做，但它给出了一个错误

> *无法在表 'Tasks' 中的可为空列上定义 PRIMARY KEY 约束。*

我正在使用代码优先的方法来创建表，并且我确保该列不为空，但它仍然无法正常工作。请帮忙！

```
public class Task
{
    [ForeignKey("ProjectId")]
    public Project Project { get; set; }
    [Required]
    public int ProjectId { get; set; }

    //[Key, Column(Order = 1)]
    [Required]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public virtual int TaskID { get; set; }
    ...
}

//using FluentAPI
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);

    modelBuilder.Entity<Task>().HasRequired(p => p.Project);
    modelBuilder.Entity<Task>().HasKey(p => new { p.ProjectId, p.TaskID });

    modelBuilder.Entity<Project>()
           .HasRequired(e=> e.Employee)
           .WithMany()
            .WillCascadeOnDelete(false);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-11T10:37:47.893

遇到这个寻找别的东西，有点晚了，但这对我来说很好地映射到一个复合键

```
 [Key, Column(Order=1) ]
    public int KeyId { get; set; }
    [Key, Column(Order = 2)]
    public int Key1Id { get; set; }
    [Key, Column(Order = 3)]
    public int Key2Id  { get; set; }
    [Key, Column(Order = 4)]
    public int Key3Id  { get; set; } 
```

希望这可以帮助某人。

# spring-mvc - JSTL forEach 不起作用。在 Spring MVC 中使用

> ID：14061116
> 
> 赞同：1
> 
> 时间：2012-12-27T20:48:38.717
> 
> 标签：spring-mvc, jstl, jsp-tags

我的 Spring MVC 应用程序中的 JSTL 的 forEach-tag 有问题。

我想用对象迭代一个简单的 LinkedList。在这里，您可以从 .jsp 文件中看到我的代码：

```
 <c:forEach items="${posts}" var="single_post">
        <div id="post">
            <label><c:out value="${single_post.topic}" /></label> <br />
            <div id="post_content">
                <c:out value="${single_post.content}" />
            </div>
            <div id="post_information">
                <c:out value="${single_post.username}" />
                |
                <c:out value="${single_post.dayOfCreation}" />
            </div>
            <div id="post_tags">
                <c:out value="${single_post.tags}" />
            </div>
            <hr />
        </div>
    </c:forEach> 
```

forEach-tag 遍历整个列表，但只返回第一个元素。我用一个简单的例子在另一个案例上尝试了它，但没有 LinkedList。

```
<c:forEach var="i" begin="1" end="5">
    Item <c:out value="${i}"/>
</c:forEach> 
```

这个例子工作正常，所以我不知道问题出在哪里。

此致 ：）

**更新 1：** 生成列表的代码是一个简单的 sql 语句。语句的结果被添加到 LinkedList。

在我的控制器中，我有以下方法将 sql 语句的结果添加到模型中：

```
@RequestMapping(value = "/community", method = RequestMethod.GET)
    public String community(Locale locale, Model model) {

    // Add attributes to the model
    model.addAttribute("posts", appService.getRelatedPosts());

    return "/community";
} 
```

forEach-tag 的结果如下所示：

测试名称Bespieltext TestAccount |
Tag_1 、Tag2、Tag_3 测试名称
Tag_1 、Tag2、Tag_3 测试名称 标记_1、标记2、标记_3。. .

是的，数据库中有不同的值；）

# asp.net - Web API 在控制器的 Web 窗体项目中的什么位置？

> ID：14061118
> 
> 赞同：2
> 
> 时间：2012-12-27T20:48:46.367
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我在我的 Web 窗体项目中使用 Web API。我`Application_Start`在 Global.asax 的项目方法中有以下代码：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute("ApiDefault", "api/{controller}/{id}", New With {.id = RouteParameter.Optional}) 
```

这基本上是从有关该主题的 Microsoft 教程中复制和粘贴的。

我还有一个名为`ValuesController`. 此类只是从“添加新项目”向导创建控制器时获得的默认 Web API 控制器，并且位于我的 Web 表单站点中名为的文件夹中`Controllers`：

```
Imports System.Net
Imports System.Web.Http

Public Class ValuesController
    Inherits ApiController

    ' GET api/<controller>
    Public Function GetValues() As IEnumerable(Of String)
        Return New String() {"value1", "value2"}
    End Function

    ' GET api/<controller>/5
    Public Function GetValue(ByVal id As Integer) As String
        Return "value"
    End Function

    ' POST api/<controller>
    Public Sub PostValue(<FromBody()> ByVal value As String)

    End Sub

    ' PUT api/<controller>/5
    Public Sub PutValue(ByVal id As Integer, <FromBody()> ByVal value As String)

    End Sub

    ' DELETE api/<controller>/5
    Public Sub DeleteValue(ByVal id As Integer)

    End Sub

End Class 
```

但是 - 当我去`http://localhost/api/Values`- 而不是看到一些 XML 序列化字符串`value1`和`value2`时，我看到如下错误消息：

```
<Error>
    <Message>No HTTP resource was found that matches the request URI 'http://localhost/api/Values'.</Message>
    <MessageDetail>No type was found that matches the controller named 'Values'.</MessageDetail>
</Error> 
```

所以 - 显然，路由正在工作，因为我没有收到 404，而是收到一条消息，说路由本身无法解析任何内容。但是该路线应该解决一些问题 - 具体来说，我的`ValuesController`班级甚至在一个名为`Controllers`.

有人知道我在做什么错吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:13:42.300

我想到了。这是因为显然 MVC 要求 Controllers 文件夹与声明路由的文件处于同一级别 - 而不是（正如我之前认为的）只是在根级别。

啊。

# javascript - jQuery选择器抓取同一列中的单元格

> ID：14061123
> 
> 赞同：16
> 
> 时间：2012-12-27T20:48:58.470
> 
> 标签：javascript, jquery

给定一个多行、多列表的表格，我如何选择与任意单元格相同的*列中的所有单元格（例如，单击的单元格）。*

就像是：

```
$("td").click(function(){
    var columnNo = $(this).columnNo?
    $(this).closest("table").find("tr td:eq("+columnNo+")").css("color", "red");
}); 
```

我需要这样做而不单独命名列。例如，它应该适用于`table`没有额外类或 ID 的简单通用标记。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-27T20:58:01.450

您的尝试是正确的，您需要做的就是使用[`.index`](http://api.jquery.com/index)查找列号——`<td>`行内的索引。您还需要使用[nth-child-selector](http://api.jquery.com/nth-child-selector)`<td>`来匹配其他元素的列索引。

```
$("td").click(function(){
    var columnNo = $(this).index();
    $(this).closest("table")
        .find("tr td:nth-child(" + (columnNo+1) + ")")
        .css("color", "red");
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T20:53:31.827

这可以使用 jQuery`eq`方法来完成。

```
var $tds = $("td"); // get all tds beforehand, so jquery doesn't 
                    // need to hit the DOM every click

$("td").on("click", function () {
    var position = $(this).index(),
        $tdsInColumn = $tds.filter(":nth-child(" + index + ")");

    // manipulate $tdsInColumn in any way
    $tdsInColumn.addClass("selected");
}); 
```

不确定这是否是最有效的方法，但这是我不久前遇到同样问题时提出的解决方案。

# 参考

[jQuery.eq](http://api.jquery.com/eq/)

# java - 使用构建器构建“部分”可变对象？

> ID：14061126
> 
> 赞同：4
> 
> 时间：2012-12-27T20:49:24.363
> 
> 标签：java, design-patterns, builder

在创建“部分”可变的对象时，我很难确定使用构建器是否是正确的方法，即某些对象的属性是可变的。

让我们考虑这个`IGlass`接口的实现。一个最终的强制参数，一个可以在对象创建后更改的可选参数：

```
public class SimpleGlass implements IGlass {

    // Mandatory.
    private final int size;

    // Optional.
    private boolean isEmpty;

    private SimpleGlass(SimpleGlassBuilder builder) {
        size = builder.getSize();
        isEmpty = builder.isEmpty();
    }

    @Override
    public int getSize() {
        return size;
    }

    @Override
    public boolean isEmpty() {
        return isEmpty;
    }

    @Override
    public void setEmpty(boolean isEmpty) {
        this.isEmpty = isEmpty;
    }

    public static class SimpleGlassBuilder {

        // Mandatory.
        private final int size;

        // Optional.
        private boolean isEmpty = false;

        public SimpleGlassBuilder(int size) {
            this.size = size;
        }

        public SimpleGlassBuilder setEmpty(boolean isEmpty) {
            this.isEmpty = isEmpty;
            return this;
        }

        public IGlass build() {
            return new SimpleGlass(this);
        }

        public int getSize() {
            return size;
        }

        public boolean isEmpty() {
            return isEmpty;
        }
    }
} 
```

因此，构建器创建了可变对象，但是，每当在编程文献中提到构建器时，它都是关于不可变对象的。

在这种情况下可以使用构建器吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T20:56:32.570

我会说 Builder 用于具有很多属性的类，其中大多数是可选的。与其拥有一百万个构造函数，或者一个糟糕的构造函数，不如使用一个构建器并指定你需要的东西。

```
new GlassBuilder(16_OZ).withHandle().withLogo(logo).build()

// instead of
new Glass(16_OZ, 
            /* handle? */ true, 
            /* chipped? */ false, 
            /* monogram? */ null, 
            /* something else? */ null, 
            logo); 
```

最后，可变性很好，因为可变性很好，但它实际上并不影响 Builder 是否让你的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:56:09.187

我会将“空”属性保留在 IGlass 实现类中，但将其从构建器中删除。设置值的地方太多。另外，如果您在构建器中设置它会混淆问题，因为这仅适用于在该点之后创建的 IGlass 实例，并且仅适用于调用它们的“setEmpty()”方法。

我建议您构建它们，然后在新建的对象实例上设置“空”属性。

设计模式的目的是使事物易于谈论和易于理解。通过添加构建器或实例是否设置“空”属性的额外关注，事情不再那么容易。

# android - 实施（或使用）锁定屏幕

> ID：14061127
> 
> 赞同：1
> 
> 时间：2012-12-27T20:49:27.050
> 
> 标签：android

有没有办法可以使用android默认锁屏（SDK）？或者我应该自己实现吗？如果我实现自己的任何指针，该怎么做？

我基本上想使用键盘解锁屏幕，如果我使用某种模式，那么我只能接听来自 X 的电话，如果我使用不同的模式，那么我只能接听来自 Y 的电话（X 和 Y 是特定联系人）。

请帮助我..我需要提示，我可以从那里得到它谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:58:07.270

提示：从 JNI 调用 Android 的锁屏。仍然使用 NDK，如果收到呼叫，您可以找到如何以编程方式解锁它。我的意思是在没有root的手机上！！！！OFC 这将不是将在此处编写的 2 行代码。

# c# - 更改 checkedListBox 的 ToString 值

> ID：14061130
> 
> 赞同：1
> 
> 时间：2012-12-27T20:49:35.217
> 
> 标签：c#, tostring, checkedlistbox

目前正在创建一个基于C#装饰器模式的windows窗体应用程序。该程序的结构是具有一个主类（“计算机”），其中一个主类被扩展到其他类（作为包装器），这些类形成了可用的选项。

问题：使用复选框列表，用户可以在选项之间进行选择，这使得每个选项的特定文本在被选中时出现在一个标签中，无论是只有一个（只有选中的选项文本将显示在标签文本之后）还是全部被选中（所有选中的选项文本将在标签文本之后一个接一个地显示）。以下代码显示了标签中选中的最新选项的设置文本，如果用户取消选中所有选项，它不会删除文本。

```
foreach (object itemChecked in checkedListBox1.CheckedItems)
        {
            Computer computer = (Computer)itemChecked;
            label1.Text = "" + computer.description();
        } 
```

该问题已在此处解决，但解决方案将“描述”替换为 ToString。我的问题是，**我希望将“描述”中保存的内容用于标签中的文本，而不是使用 ToString 中保存的内容来命名每个选中的选项。**下面是它们的代码示例，它们都来自主类（计算机）：

```
public virtual String description()
    {
        return "Currently in basket is a Computer ";
        //return this.ToString();
    }

public override string ToString()
    {
        return "Desktop";
    } 
```

其背后的原因是为了保持装饰器模式结构，ToString 绕过了它，因为它可以在没有装饰器模式结构的情况下以相同的方式使用。前面提到的解决方案如下：

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (e.NewValue == CheckState.Checked && e.CurrentValue == CheckState.Unchecked) //Continue if the new CheckState value of the item is changing to Checked
    {
        label1.Text += "a " + checkedListBox1.Items[e.Index].ToString() +", "; //Append ("a " + the item's value + ", ") to the label1 Text property
    }
        else if (e.NewValue == CheckState.Unchecked && e.CurrentValue == CheckState.Checked) //Continue if the new CheckState value of the item is changing to Unchecked
        {
            label1.Text =  label1.Text.Replace("a " +checkedListBox1.Items[e.Index].ToString() + ", ", ""); //Replace ("a " + the item's value + ", ") with an empty string and assign this value to the label1 Text property
        }
} 
```

我认为在另一个主题（不记得确切）上找到了一个解决方案，更接近我在下面寻找的内容，使用“描述”作为标签的值，而 ToString 保留作为选项的值。然而，这段代码带来了一个错误，即没有“CheckedItem”的定义，也没有任何同名的扩展方法（第四行末尾）：

```
for (int i = 0; i < checkedListBox1.Items.Count; i++)
            if (checkedListBox1.GetItemChecked(i))
            {
                Computer computer = (Computer)checkedListBox1.CheckedItem;
                label1.Text = "" + computer.description();
            }
            else
            {
                label1.Text = "";
            } 
```

PS我是一个新手/初学者程序员，请原谅任何不一致或解释不好的部分。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:55:14.137

如果我很好理解你想要做什么，那么你需要创建一个返回 Computer.ToString() 的公共函数：

```
public string Description(){
    return this.ToString();
}

protected override ToString(){
    /// and here goes the code you need.
} 
```

# scala - 从 List[Int] 到 List[Double] 的隐式转换失败

> ID：14061134
> 
> 赞同：2
> 
> 时间：2012-12-27T20:49:50.067
> 
> 标签：scala, implicit-conversion

我是 Scala 新手，我注意到一种我不理解的行为。当我执行这段代码时，一切都很好：

```
val lD: List[Double] = List(1, 2, 3) 
```

但是，当我执行这个时：

```
val lI = List(1, 2, 3)
val lD: List[Double] = lI 
```

我收到一个错误

```
<console>:11: error: type mismatch;
 found   : List[Int]
 required: List[Double] 
```

您能否给我一个线索，为什么在第二个清单中没有进行隐式转换？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T20:53:30.287

没有定义从 List[Int] 到 List[Double] 的隐式转换，尽管如果你真的想要一个，你可以做一个。请参阅以下内容：

```
Welcome to Scala version 2.9.1.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_37).
Type in expressions to have them evaluated.
Type :help for more information.

scala> val i = 1
i: Int = 1

scala> val d: Double = i
d: Double = 1.0

scala> val il = List(1,2,3,4)
il: List[Int] = List(1, 2, 3, 4)

scala> val dl: List[Double] = il
<console>:8: error: type mismatch;
 found   : List[Int]
 required: List[Double]
       val dl: List[Double] = il
                              ^

scala> object il2dl { implicit def intlist2dlist(il: List[Int]): List[Double] = il.map(_.toDouble) }
defined module il2dl

scala> import il2dl._
import il2dl._

scala> val dl: List[Double] = il
dl: List[Double] = List(1.0, 2.0, 3.0, 4.0)

scala> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T21:09:14.820

只需将 List[Int] 显式转换为 List[Double] 即可：

```
val lI = List(1, 2, 3)
val lD: List[Double] = lI map (_.toDouble) 
```

# javascript - 悬停时如何显示表单

> ID：14061135
> 
> 赞同：-3
> 
> 时间：2012-12-27T20:49:51.460
> 
> 标签：javascript, jquery, ruby-on-rails

我有图片拼贴。我希望能够将鼠标悬停在它们上方并单击“制作个人资料图片”，以便将其设为个人资料图片。

类似于 facebook，如果您将鼠标悬停在图片上，则可以选择编辑/喜欢/评论。

谢谢。

我有以下内容，但它不起作用。

```
<%= link_to image..., :id => "pic" %>
<%= link_to "Profile Pic".... , :remote => true, :id => "pf" %> 
```

jQuery

```
$('#pic').hover(function() {
  $('#pf').show()
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:59:15.883

你可以尝试这样的事情：

[http://jsfiddle.net/jrb9249/UsnfT/3/](http://jsfiddle.net/jrb9249/UsnfT/3/)

内联代码如下所示：

HTML：

```
<body>
<div id="div_parent">
    <img id="myImg" src="http://s13.postimage.org/x23kf7ycz/DSC02036.jpg"
    onMouseOver="javascript:myMouseOver()"/>
    <div id="div_child"
    onMouseOut="javascript:myMouseOut()">
        <a target="_blank" id="myLink">Make profile Picture</a>
        <br><br>
        <a target="_blank" id="closeLink" onclick="javascript:mytest()">Close</a>        
    </div>
</div>
</body> 
```

Javascript：

```
function myMouseOver(){
    $('#div_child').fadeIn('fast');
};

function mytest(){
    $('#div_child').fadeOut('fast');
}; 
```

CSS：

```
div
{
    border:none;
    margin:0;
    padding:0;
}

#div_child a:hover
{
    cursor:pointer;
}

#div_parent
{
    position:relative;
}

#div_child
{
    position:absolute;
    left:155px;
    top:0px;
    display:none;
    border:solid 1px gray;
    padding:5px;
}

#div_parent img
{
    width:150;
    height:112;
}

#closeLink
{
    color:blue;
    font-size:6;
    float:right;
}

#closeLink:hover
{
    text-decoration:underline;
} 
```

它使用相对定位的父级和绝对定位的子级来偏移选项框。然后通过 jquery 使用简单的 mouseover 和 onclick 功能，用户可以轻松查看和关闭框。

我最初尝试使用 onMouseOut 函数来关闭弹出窗口，但我不太确定如何使其正常工作。虽然关闭链接解决了这个问题。

# git - 不能 git aws.push 到带有 ruby repo 的弹性豆茎

> ID：14061141
> 
> 赞同：6
> 
> 时间：2012-12-27T20:50:46.367
> 
> 标签：git, amazon-web-services, command-line-interface, amazon-elastic-beanstalk

我已经完成了不同教程中的所有步骤。

我已经通过 +eb init+ 创建了我的弹性 beantalk 实例，并且我已经正确设置了我的路径。

然后我做了一个 git .init 并尝试了一个 git aws.push 并得到了错误：

```
error: cannot run .git/AWSDevTools/aws.elasticbeanstalk.push: No such file or directory
fatal: While expanding alias 'aws.elasticbeanstalk.push':       
.git/AWSDevTools/aws.elasticbeanstalk.push': No such file or directory 
```

现在我首先从另一个 git repo 克隆了这个项目，所以我做了一个

```
eb stop 
```

旋转实例，然后执行

```
rm -rf .git 
```

在工作目录上清除之前克隆中留下的任何项目。

然后我做了

```
eb init 
```

再次，所有 .git 信息将被重新生成

我什至按照[http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)的步骤 做了一个

```
git init && git add -A && git commit -m "Initial commit" 
```

然后，一旦我尝试执行以下操作：

```
git aws.push 
```

我收到了与以前相同的错误消息。

当然，这是我的第一个 beanstalk 实例，我不确定我在哪里出错了。您是否只允许从将 CLI 下载到的同一目录中运行 git 命令？

**更新**我确实找到了另一个说要执行此步骤的链接：

```
sh /home/elasticbeanstalk-cli/AWSDevTools/Linux/AWSDevTools-RepositorySetup.sh 
```

但所做的只是给我这个信息：

```
sh /home/coder/eb/AWSDevTools/Linux/AWSDevTools-RepositorySetup.sh 
/home/coder/eb/AWSDevTools/Linux/AWSDevTools-RepositorySetup.sh: 18:      
/home/coder/eb/AWSDevTools/Linux/AWSDevTools-RepositorySetup.sh: Bad substitution 
```

*操作系统：Linux（Ubuntu / LTS 12.04）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T18:04:39.287

它说该文件不存在，但是由于未安装ruby而导致错误。因此，如果您使用的是 Linux (Ubuntu)，则应使用以下命令安装它：

```
sudo apt-get install ruby 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T13:28:07.050

我有同样的问题。但我是 Python 开发人员和 ruby​​ 开发的 elasticbeanstalk-cli。我刚刚在我的系统中安装了 ruby​​，所有问题都解决了。

# css - CSS 定位异常 Safari/Chrome

> ID：14061143
> 
> 赞同：4
> 
> 时间：2012-12-27T20:51:07.160
> 
> 标签：css, webkit

请看下面的例子：

[http://6329195.com/stackoverflow/css_li_weird/index.html](http://6329195.com/stackoverflow/css_li_weird/index.html)

如果您刷新页面，每隔一段时间，其中一个图像就会向下移动，与其他图像明显不一致。它似乎不会在 Firefox 中发生。它只偶尔发生一次。大多数情况下它发生在最后一张图像上，但它可以一次发生在任何/多个图像上。您可以在此处查看问题的屏幕截图：

![在此处输入图像描述](../Images/e9d5b62759b8c3e298f1d73bf6947e73.png)

[http://6329195.com/stackoverflow/css_li_weird/screenshot.jpg](http://6329195.com/stackoverflow/css_li_weird/screenshot.jpg)

谁能告诉我出了什么问题/为什么会这样？

（该列表最终用于 jQuery 幻灯片，因此 a 标签中的空白href）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:47:46.633

[一个类似问题的答案](https://stackoverflow.com/a/10007904/1085891)让我尝试`vertical-align: top;`似乎可行的方法。因此，如果由于某种原因您确实需要保留，`overflow:hidden;`那么这可能是防止故障/错误的一种方法。

工作示例：http: [//jsfiddle.net/rtppE/2/](http://jsfiddle.net/rtppE/2/)

```
li.productMenuItem{
    vertical-align: top;
    width: 45px;
    display:inline-block;
    list-style: none;
    height: 45px;
    overflow: hidden
} 
```

# c# - XAML 中带有参数的自定义 UserControl（按钮）

> ID：14061151
> 
> 赞同：1
> 
> 时间：2012-12-27T20:51:40.503
> 
> 标签：c#, wpf, xaml, windows-8

我想制作一个用户控件，我可以将它重用于我的应用程序中的各种按钮。有没有办法通过 XAML 将参数传递给 UserControls？我的应用程序中的大多数按钮将由两个矩形（一个在另一个中）和一些用户指定的颜色组成。它也可能有图像。我希望它表现得像这样：

```
<Controls:MyCustomButton MyVarColor1="<hard coded color here>" MyVarIconUrl="<null if no icon or otherwise some URI>" MyVarIconX="<x coordinate of icon within button>" etc etc> 
```

然后在按钮内部，我希望能够在 XAML 中使用这些值（将 IconUrl 分配给图标的源等，等等。

我只是在想这个错误的方式还是有办法做到这一点？我的目的是减少所有按钮的 XAML 代码。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T20:56:25.883

是的，您可以访问`Control`xaml 中的任何属性，但如果您想要 DataBind、Animate 等，则您的属性`UserControl`必须是`DependencyProperties`.

例子：

```
public class MyCustomButton : UserControl
{
    public MyCustomButton()
    {
    }

    public Brush MyVarColor1
    {
        get { return (Brush)GetValue(MyVarColor1Property); }
        set { SetValue(MyVarColor1Property, value); }
    }

    // Using a DependencyProperty as the backing store for MyVarColor1\.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MyVarColor1Property =
        DependencyProperty.Register("MyVarColor1", typeof(Brush), typeof(MyCustomButton), new UIPropertyMetadata(null));

    public double MyVarIconX
    {
        get { return (double)GetValue(MyVarIconXProperty); }
        set { SetValue(MyVarIconXProperty, value); }
    }

    // Using a DependencyProperty as the backing store for MyVarIconX.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MyVarIconXProperty =
        DependencyProperty.Register("MyVarIconX", typeof(double), typeof(MyCustomButton), new UIPropertyMetadata(0));

    public Uri MyVarIconUrl
    {
        get { return (Uri)GetValue(MyVarIconUrlProperty); }
        set { SetValue(MyVarIconUrlProperty, value); }
    }

    // Using a DependencyProperty as the backing store for MyVarIconUrl.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MyVarIconUrlProperty =
        DependencyProperty.Register("MyVarIconUrl", typeof(Uri), typeof(MyCustomButton), new UIPropertyMetadata(null));

} 
```

xml:

```
<Controls:MyCustomButton MyVarColor1="AliceBlue" MyVarIconUrl="myImageUrl" MyVarIconX="60" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:54:46.343

如果您正在谈论在 XAML 中传递构造函数参数，这是不可能的。您必须在对象初始化后通过属性设置它们，或者您需要通过代码实例化它。

这里有一个类似的问题：[Naming user controls without default constructors in XAML](https://stackoverflow.com/questions/6156924/naming-user-controls-without-default-constructors-in-xaml)

# javascript - 找不到变量

> ID：14061154
> 
> 赞同：-2
> 
> 时间：2012-12-27T20:51:50.263
> 
> 标签：javascript, ios, touch, var

`startPos`我对以下代码有一点问题，它会抛出一个错误，指出`refresh`无法找到 vars。

```
var listElem = document.getElementById('list');
listElem.addEventListener('touchstart', function(e) {
    var startPos = $("#content").scrollTop(),
    eraInput = document.getElementById('input'),
    refresh = false;
});
listElem.addEventListener('touchend', function(e) {
    if (refresh) {
        if (!$("#input").is(":focus")) {
            $("#input").val("");
        }
        // Stuff...
    }
});
listElem.addEventListener('touchmove', function(e) {
    var move_to = startPos-(e.touches[0].clientY-e.changedTouches[0].screenY);
    if (move_to > 50) {
        refresh = true;
    } else {
        refresh = false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:54:31.610

每个函数定义都在 JavaScript 中创建自己的作用域。这意味着您不能在函数内声明变量并在另一个函数内使用它。当您需要共享变量时，需要在公共范围内声明它们：

```
var listElem = document.getElementById('list'),
    startPos,
    refresh,
    eraInput;
listElem.addEventListener('touchstart', function(e) {
    startPos = $("#content").scrollTop(),
    eraInput = document.getElementById('input'),
    refresh = false;
});
listElem.addEventListener('touchend', function(e) {
    if (refresh) {
        if (!$("#input").is(":focus")) {
            $("#input").val("");
        }
        // Stuff...
    }
});
listElem.addEventListener('touchmove', function(e) {
    var move_to = startPos-(e.touches[0].clientY-e.changedTouches[0].screenY);
    if (move_to > 50) {
        refresh = true;
    } else {
        refresh = false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:54:51.570

您应该在以下范围内指定它们`eventListener`：

```
var startPos, eraInput, refresh;

var listElem = document.getElementById('list');
listElem.addEventListener('touchstart', function(e) {
    startPos = $("#content").scrollTop();
    eraInput = document.getElementById('input');
    refresh = false;
});
listElem.addEventListener('touchend', function(e) {
    if (refresh) {
        if (!$("#input").is(":focus")) {
            $("#input").val("");
        }
        // Stuff...
    }
});
listElem.addEventListener('touchmove', function(e) {
    var move_to = startPos-(e.touches[0].clientY-e.changedTouches[0].screenY);
    if (move_to > 50) {
        refresh = true;
    } else {
        refresh = false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:54:53.190

试试这个：

```
var listElem = document.getElementById('list');
var startPos;
var refresh;
listElem.addEventListener('touchstart', function(e) {
    startPos = $("#content").scrollTop(),
    eraInput = document.getElementById('input'),
    refresh = false;
});
listElem.addEventListener('touchend', function(e) {
    if (refresh) {
        if (!$("#input").is(":focus")) {
            $("#input").val("");
        }
        // Stuff...
    }
});
listElem.addEventListener('touchmove', function(e) {
    var move_to = startPos-(e.touches[0].clientY-e.changedTouches[0].screenY);
    if (move_to > 50) {
        refresh = true;
    } else {
        refresh = false;
    }
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:53:53.793

您的变量看起来超出了您访问它们的范围。

在 listElem 之后声明变量并在 'touchstart' 事件中设置它们。

# asp.net - 用位置居中花式框：绝对不允许我改变位置

> ID：14061157
> 
> 赞同：1
> 
> 时间：2012-12-27T20:52:00.800
> 
> 标签：asp.net, css, fancybox

当我点击一个链接时，我有一个弹出框。它在中心区域周围的某个地方打开，但不完全在中间。fancybox 的 css 是：

```
#fancybox-wrap {
    position:absolute;
    /*padding: 20px;*/
    z-index: 1101;
    outline: none;
    display: none;
    margin: 0px auto 0px auto;
} 
```

但是，当我有 时`position:absolute;`，边距设置变为无效。似乎没有任何效果。`left: 50px;`等将不起作用。有任何想法吗？

当我将绝对值更改为相对值时，fancybox 完全位于我想要的中间位置，但它在底部几乎无法看到 fancybox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:00:56.277

当您绝对定位某些东西时，您是在告诉浏览器您希望根据顶部/底部和左侧/右侧属性将其绘制在哪里。

要绝对定位在屏幕的中心：

```
#fancybox-wrap {
    position:absolute; /* want it positioned absolutely relative to parent */
    width:500px;       /* fixed width of 500px */
    top:50px;          /* 50px down from the top of the screen */
    left:50%;          /* positioned in the middle of the screen */
    margin-left:-250px;/* use a negative margin of half the fixed width */
} 
```

# jquery - jquery slideToggle css顶部位置

> ID：14061161
> 
> 赞同：1
> 
> 时间：2012-12-27T20:52:50.647
> 
> 标签：jquery, toggle

我已经想出了如何使用 jquery 移动我的 css 顶部位置，但是我希望 #menu id 根据切换来更改顶部位置。所以基本上我希望#menu 在单击锚点时下降 50 px，并在再次单击锚点时向上滑动 50px，但目前它只向下移动并保持向下，不知道如何实现这一点。我很接近我知道。

```
jQuery(document).ready(function($) {
  $('#menu a').click(function() {
  $('#menu').css("top","50px");
  $('#navResponsive').slideToggle('fast', function() {
  });
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:57:08.630

尝试使用`.toggle()`而不是`.click()`链接上的。

```
$('#menu a').toggle(function(event){
   event.preventDefault();
   $('#menu').animate({top: '50px'}, 'slow');
},function(event){  
    event.preventDefault();    
    $('#menu').animate({top: '0px'}, 'slow');
}); 
```

这将在第一次单击时将菜单向下移动 50 像素，然后在第二次单击时将其恢复。这是一个显示这 一点的[小提琴。](http://jsfiddle.net/bplumb/dxrz6/)

# ruby - Rake 不知道如何构建任务：default 或 minitest

> ID：14061162
> 
> 赞同：16
> 
> 时间：2012-12-27T20:52:51.830
> 
> 标签：ruby, rake, minitest

不久前我构建了一个 gem，没有包含任何测试（我感到羞耻）。从那以后，我试图通过包含 minitest 来解决这个问题，但我被卡在了大门外，出现以下错误：

> 不知道如何构建任务“默认”

这是我的**Rakefile**

```
require 'rake/testtask'

Rake::TestTask.new do |t|
  t.test_files = FileList['test/*_test.rb']
end 
```

和虚拟文件`test/unit_test.rb`

```
require 'minitest/autorun'

class TestPackage < MiniTest::Unit::TestCase

  def test
    assert_equal 10, Array.new(10).size
  end
end 
```

如果我更改 Rakefile 以包含`task :default => 'minitest'`错误消息更改为`Don't know how to build task 'minitest'`

`rake --trace`似乎只是引导我回到处理任务调用的 Rake gem 部分。我看不到任何线索：

```
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/task_manager.rb:49:in `[]'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:115:in `invoke_task'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:94:in `each'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/rake/application.rb:63:in `run'
~/.rbenv/versions/1.9.3-p286/bin/rake:32:in `<main>' 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-27T21:21:26.893

耙任务总是被命名的。该`Rake::TestTask`任务名为`test`，因此如果您运行`rake test`它将运行您的测试。

要使`Rake::TestTask`您的默认任务包括：

```
task :default => :test 
```

在你的`Rakefile`.

[http://rake.rubyforge.org/Rake/TestTask.html](http://rake.rubyforge.org/Rake/TestTask.html)

# backbone.js - View 中的 this.model 有多个模型

> ID：14061164
> 
> 赞同：0
> 
> 时间：2012-12-27T20:53:13.887
> 
> 标签：backbone.js

我在我的 Backbone 视图中看到了一些奇怪的行为。当我 console.log "this.model" 我在我的渲染方法和我的一个自定义方法中得到不同的结果。

这就是我设置路线的方式：

```
app_router.on('route:showTemplates', function(id) {
                var listtemplate = new ListTemplateModel.Model({
                    身份证：身份证
                });
                listtemplate.fetch().then(function() {
                    var detailsview = new ListDetailsView.View({
                        模型：列表模板
                    });
                });
            });
```

如果我 console.log 在我的视图的渲染方法中，我得到了我所期望的：

```
定义（['use!backbone'，'helpers/templateHelper']，函数（B，TemplateHelper）{
    var View = B.View.extend({
        el: '#page',
        模板：TemplateHelper('taskDetailTemplate'),
        事件：{
            'keypress #new-step'：'addOnEnter'
        },
        初始化：函数（）{
            this.render();
        },
        渲染：函数（）{
            this.$el.html(this.template(this.model.toJSON()));
        },
        addOnEnter：函数（e）{
             this.input = this.$('#new-step');

            if (e.which !== 13) {// || !this.input.val().trim()) {
                返回;
            }
            console.log(this.model.toJSON());           
        }
    });

    返回 {
        查看：查看
    };
});

```

但是我的“addOnEnter”方法中的console.log 返回了一个包含通过会话创建的所有模型实例的数组。就像所有先前创建的模型也触发了该事件。

![在此处输入图像描述](../Images/88c720430d7420f79924fff8b40ed085.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:12:01.643

这是因为对于集合中的所有元素，该事件被多次触发，就像[这里](https://stackoverflow.com/questions/5454388/backbonejs-event-occurring-multiple-times)提到的那样。它只是以不同的方式表现出来。

# java - 使用jpda连接weblogic

> ID：14061165
> 
> 赞同：2
> 
> 时间：2012-12-27T20:53:15.653
> 
> 标签：java, jvmti, jpda, jdi

我正在构建一个实用程序/工具来分析/跟踪部署在 Weblogic 10 (java 6) 中的 Java EE 应用程序中的方法调用。目的是快速了解我们庞大的企业应用程序中的事件流。（浏览代码很乏味）

我已经按照与 jdk6 捆绑的“Trace”演示应用程序来构建我的版本。该应用程序在连接到普通桌面样式应用程序并成功跟踪方法调用时工作正常。但是对于 Weblogic，EventQueue.remove 返回 null EventSet。请注意，与 weblogic VM 的连接是成功的。但是一旦连接上，部署的 Web 应用程序中的任何点击或活动都会导致目标 VM 中的线程挂起，最终导致 http 请求超时。

我正在为 weblogic 启动脚本使用以下 vm 参数：

```
-Xdebug -Xnoagent -Djava.compiler=NONE \
-Xrunjdwp:transport=dt_socket,server=y,address=9002,suspend=n 
```

使用的示例代码来自 jdk1.6.0_13\demo\jpda\examples\com\sun\tools\example\trace

有没有人有类似工具的经验或面临类似的问题。想知道Eclipse远程调试是怎么实现的！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:42:12.527

您可以通过在 JDWP 层登录来查看问题所在。为您的操作系统使用 TCP 数据包嗅探器。您可能必须在另一台机器上运行调试器才能捕获流量。只需使用 JDWP 规范即可轻松解码数据包。如果只是分析没有帮助，您可以将您的 JDWP 流量与来自 Eclipse 或您的工作场景的流量进行比较。我已经看到 Eclipse 调试器在使用未加载的类事件淹没连接时出现挂起。

# java - 我将如何使用 JSoup 在 JEditorPane 或类似工具上显示文档

> ID：14061169
> 
> 赞同：0
> 
> 时间：2012-12-27T20:53:40.863
> 
> 标签：java, jsoup, document

我可以`org.jsoup.nodes.Document`在窗口中显示 JSoup 吗？我正在做的是从中获取 HTML 代码`Document doc = Jsoup.connect(URL).get();`，我想`doc`在一个窗口中显示。我该怎么做呢？另外，如果可能的话，我能正确地设置它的样式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:03:35.077

`JSoup`是用于此目的的错误 API。它用于将 HTML 内容解析为其文档元素。

`JEditorPane`有一种`setPage`设置内容的方法，它也会为您提供页面样式：

```
editorPane.setPage(new URL("http://www.mysite.com")); 
```

# php - 如何使用 google places api 添加网站和地址？

> ID：14061181
> 
> 赞同：0
> 
> 时间：2012-12-27T20:54:38.060
> 
> 标签：php, json, google-places-api, google-places

我正在编写一个允许企业进行 SEO 的应用程序，并且当客户激活他们的个人资料时，我正在使用 google places api 添加新位置。

该 api 效果很好，但我只能添加几个参数。我想知道是否有添加他们的网站、工作时间、电话等的功能。

另外我想知道这些地方多久后会在谷歌地图上公开显示。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:39:28.970

只有少数受信任的应用程序提交的请求才会被审核以集成到 Google 地方信息中。如果您想添加一个可以在您的应用程序之外访问的新地点，您可以按照 Google 地图帮助说明[添加一个新地点](http://support.google.com/maps/bin/answer.py?hl=en&answer=144367&topic=1687361&ctx=topic)。

如果您是企业主，您可以使用[Google Places for Business](http://www.google.com/placesforbusiness)在 Google 地图上添加和验证您的企业。

向 Google 地图添加地点的另一种方法是按照Google 地图制作工具帮助中的[说明通过](http://support.google.com/mapmaker/bin/answer.py?hl=en&answer=1096044&ctx=cb&src=cb&cbid=1wf9zf83h3bs7&cbrank=2)[Google 地图制作工具](http://www.google.com/mapmaker)提交修改。

您添加的地点将在经过审核并被接受后出现在 Google 地图中。

# javascript - JavaScript 不会计算并将我的结果输入回我的表单

> ID：14061184
> 
> 赞同：0
> 
> 时间：2012-12-27T20:54:45.173
> 
> 标签：javascript, html, forms, input

试图从我的表单输入字段中提取信息并使用 JavaScript 计算它们。它似乎不起作用。

**HTML** (default1.html)

```
<script type="text/javascript" src="multiplication.js" language="javascript"></script>  
<form>
    <table>
        <tr><!--Row 2-->
            <td class="tdSize7">
                <input class="input" name="name1" type="text"/>
            </td>
            <td class="tdSize7">
                <input class="input" name="source1" type="text"/>
            </td>
            <td class="tdSize8">
                <p>&#36;</p>
            </td>
            <td class="tdSize9">
                <input class="input" name="income1" type="text"/>
            </td>
            <td class="tdSize8">
                <p>X12</p>
            </td>
            <td class="tdSize8">
                <p>&#36;</p>
            </td>
            <td class="tdSize9">
                <input name="ann1" disabled="disabled"/>
            </td>
        </tr>
        <td class="tdSize9"><input class="inputSize2" name="" type="button" value="Calculate" onclick="addme(this.form)"/></td> 
    </table>
</form> 
```

**JavaScript** (multiplication.js)

```
function addme(form) {
//Constant Variables
    const twelve = Number (12);
    const fourHun = Number (400);
    const fourHunEighty = Number (480);

//Monthly  Income 1
    var income1 = Number(frm.income1.value);
    var val = income1 * twelve;
    frm.ann1.value = val;
} 
```

我的 JavaScript 不会计算并将我的结果输入回我的表单。
这只是我的代码示例。我希望这能告诉你足够的信息并帮助你，帮助我解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:58:15.303

您是否打算使用`form`而不是`frm`？这是你问题的一部分

尝试：

```
var income1 = Number(form.income1.value);
var val = income1 * twelve;
form.ann1.value = val; 
```

或者改变

```
function addme(form) 
```

至

```
function addme(frm) 
```

# php - Magento 集团定价 - 如何更改“旧价格”的显示 - “新价格”

> ID：14061188
> 
> 赞同：1
> 
> 时间：2012-12-27T20:54:56.583
> 
> 标签：php, magento

我正在尝试创建一个具有多个定价级别的网站。我目前正试图围绕 magento 如何显示团体定价。

当用户登录时，我看到函数 getHtmlprice() 显示以下内容，并且对他们应用了组价。

旧价格：79.95 美元 现在仅限：51.25 美元

我希望能够只更新价格（基于客户组），而不需要额外的文本/定价。

谁能告诉我如何做到这一点或指向一个可以实现这一目标的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:04:00.047

Can you try $_product->getFinalPrice(); please!

# opencv - Kmeans2 根据它们对应的数据点返回有序质心列表

> ID：14061191
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:55:05.470
> 
> 标签：opencv, cluster-analysis

我在某些数据集上使用 Opencv Kmeans2() 聚类函数。实际上，集群质心从随机初始化开始。然后进行聚类。

我如何按特定顺序请求所有这些质心，比如数据集最大块的第一个 cetroid，然后是下一个（按降序排列，假设在多维空间中没有相同的不同点位置集）等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:28:31.023

我打算计算标签，看看哪个质心集群属于数据集的大部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T07:21:22.847

你为什么不按你自己的喜好订购它们呢？

对于大多数 CV 应用程序，这不是必需的，我想您可以自己轻松完成。好像没有优化的 k-means 以特定顺序返回集群。由于 k-means 是随机初始化的，因此集群没有“自然”顺序。正如您已经指出的，在集群分配和集群大小方面都可能存在联系。

# javascript - Knockout.js：在数据绑定事件中访问父集合

> ID：14061193
> 
> 赞同：5
> 
> 时间：2012-12-27T20:55:22.483
> 
> 标签：javascript, knockout.js

假设我有一个

```
<button type="button" data-bind="click: actions.remove">×</button> 
```

和一个处理程序

```
var actions = {
    remove: function(item) {
        ?array?.remove(item); // ?array? is a containing array, accessed somehow
    }
} 
```

我如何找到`?array?`以便可以`button`在任何`foreach`绑定中使用相同的内容？

**澄清：**如果我放入视图模型
，我知道该怎么做。`remove`然而，视图模型包含分层数组，我真的不想为了在正确的位置获取方法而经历所有这些。视图模型有时也会在 的帮助下从服务器更新`ko.mapping`，但这不会向新数据添加任何方法。这就是我单独实现处理程序的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:23:13.903

你试试这样的。

```
<div data-bind="foreach: someArray">
    <button type="button" data-bind="click: $parent.actions.remove">x</button>
</div>

//Inside your viewmodel.
var self = this;
self.someArray = ko.observableArray();
self.actions = {
remove: function() {
    self.someArray.remove(this); // ?array? is a containing array, accessed somehow
}
} 
```

编辑：对不起，我误解了你的意思。您可以尝试这样的事情，使其适用于任何 foreach 绑定。

```
<div data-bind="foreach: someArray">
    <button type="button" data-bind="click: function() {$parent.actions.remove($parent.someArray(), $data}">x</button>
</div>

//Inside your viewmodel.
var self = this;
self.someArray = ko.observableArray();
self.actions = {
remove: function(arr, item) {
    arr.remove(item); // ?array? is a containing array, accessed somehow
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:37:40.697

目前是不可能的。

我为此提出了一个新的淘汰赛问题（当前开放）：
[允许通过绑定上下文访问当前数组](https://github.com/SteveSanderson/knockout/issues/780)。

同样相关：[在 foreach 中支持 $last](https://github.com/SteveSanderson/knockout/issues/532)。

# youtube-api - 如何在 youtube-api v3 中获取“成绩单”

> ID：14061195
> 
> 赞同：23
> 
> 时间：2012-12-27T20:55:31.410
> 
> 标签：youtube-api

我已经开始在安卓设备上使用 v3 的 YouTube api，使用 java 客户端库。我感兴趣的一些视频有我可以在网络界面上访问的成绩单（如教育视频）。有没有办法使用 v3 api 访问记录（如果存在）？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-02-04T10:49:08.353

我遇到了同样的问题......并花了大约一周的时间寻找解决方案，直到我遇到了这个问题：

[https://stackoverflow.com/questions/10036796/how-to-extract-subtitles-from-youtube-videos](https://stackoverflow.com/questions/10036796/how-to-extract-subtitles-from-youtube-videos)

只需在以下位置发出 GET 请求：http: [//video.google.com/timedtext](http://video.google.com/timedtext?lang=) ?lang= {LANG}&v={VIDEOID} 您不需要任何 api/oauth/etc。访问这个。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-02-22T14:09:53.253

使用 API v3，您可以首先使用片段获取可用的成绩单：

[https://www.googleapis.com/youtube/v3/captions?videoId=U1e2VNtEqm4&part=snippet&key=(my_api_key)](https://www.googleapis.com/youtube/v3/captions?videoId=U1e2VNtEqm4&part=snippet&key=(my_api_key))：

```
{
 "kind": "youtube#captionListResponse",
 "etag": "\"DsOZ7qVJA4mxdTxZeNzis6uE6ck/aGHflncRxq1Uz6m1akhrOLUWUqU\"",
 "items": [
  {
   "kind": "youtube#caption",
   "etag": "\"DsOZ7qVJA4mxdTxZeNzis6uE6ck/IC7rNKkn3SQNdovFwR6fEabUYnY\"",
   "id": "TqXDnlamg84o4bX0q2oaHz4nfWZdyiZMOrcuWsSLyPc=",
   "snippet": {
    "videoId": "U1e2VNtEqm4",
    "lastUpdated": "2016-01-25T21:50:27.142Z",
    "trackKind": "standard",
    "language": "en-GB",
    "name": "",
    "audioTrackType": "unknown",
    "isCC": false,
    "isLarge": false,
    "isEasyReader": false,
    "isDraft": false,
    "isAutoSynced": false,
    "status": "serving"
   }
  },
  {
   "kind": "youtube#caption",
   "etag": "\"DsOZ7qVJA4mxdTxZeNzis6uE6ck/5UP1qPkmq6mzTUaEVnFC8WqjFgU\"",
   "id": "TqXDnlamg84o4bX0q2oaHw_Y53ilUWv6vMFbk0RL3XY=",
   "snippet": {
    "videoId": "U1e2VNtEqm4",
    "lastUpdated": "2016-01-25T21:55:07.481Z",
    "trackKind": "standard",
    "language": "en-US",
    "name": "",
    "audioTrackType": "unknown",
    "isCC": false,
    "isLarge": false,
    "isEasyReader": false,
    "isDraft": false,
    "isAutoSynced": false,
    "status": "serving"
   }
  }
 ]
} 
```

然后选择你想要的成绩单：

[https://www.googleapis.com/youtube/v3/captions/id?id=TqXDnlamg84o4bX0q2oaHz4nfWZdyiZMOrcuWsSLyPc=](https://www.googleapis.com/youtube/v3/captions/id?id=TqXDnlamg84o4bX0q2oaHz4nfWZdyiZMOrcuWsSLyPc=)

或者

[https://www.googleapis.com/youtube/v3/captions/TqXDnlamg84o4bX0q2oaHz4nfWZdyiZMOrcuWsSLyPc=](https://www.googleapis.com/youtube/v3/captions/TqXDnlamg84o4bX0q2oaHz4nfWZdyiZMOrcuWsSLyPc=)

此时您需要提供授权密钥。显然，一个简单的密钥是不够的。可能是因为：

> 配额影响：调用此方法的配额成本约为 200 个单位。

`/caption/`请注意 URL (与`/caption?`)的细微差别。

所有可爱的文档都在这里： [https ://developers.google.com/youtube/v3/docs/captions](https://developers.google.com/youtube/v3/docs/captions)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-28T06:49:33.710

我可能是错的，但我认为还没有记录的方法可以通过 API 的 v3 获取字幕轨道。但是，如果您使用 oAuth2 进行身份验证，那么您的身份验证也适用于 API 的 v2，因此您可以快速调用此提要：

```
http://gdata.youtube.com/feeds/api/videos/[VIDEOID]/captiondata/[CAPTION TRACKID] 
```

得到你想要的数据。要使用 API 的 v2 检索可能的字幕轨道 ID 列表，请访问此提要：

```
https://gdata.youtube.com/feeds/api/videos/[VIDEOID]/captions 
```

该提要请求还接受一些可选参数，包括语言、最大结果等。有关更多详细信息，以及显示字幕轨道列表返回格式的示例，请参阅[https://developers.google.com上的文档/youtube/2.0/developers_guide_protocol_captions#Retrieve_Caption_Set](https://developers.google.com/youtube/2.0/developers_guide_protocol_captions#Retrieve_Caption_Set)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-29T04:30:23.560

这是我编写的一些代码，它可以从任何 youtube 视频中获取所有字幕轨道，而无需使用 API。只需将视频 URL 插入`$video_url`变量中即可。

```
// get video id from url
$video_url = 'https://www.youtube.com/watch?v=kYX87kkyubk';
preg_match("#(?<=v=)[a-zA-Z0-9-]+(?=&)|(?<=v\/)[^&\n]+(?=\?)|(?<=v=)[^&\n]+|(?<=youtu.be/)[^&\n]+#", $video_url, $matches);

// get video info from id
$video_id = $matches[0];
$video_info = file_get_contents('http://www.youtube.com/get_video_info?&video_id='.$video_id);
parse_str($video_info, $video_info_array);

if (isset($video_info_array['caption_tracks'])) {
    $tracks = explode(',', $video_info_array['caption_tracks']);

    // print info for each track (including url to track content)
    foreach ($tracks as $track) {
        parse_str($track, $output);
        print_r($output);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-31T00:52:05.403

可能最好的方法是使用 Youtube API 3。我正在尝试，但您需要一个 API 密钥 + OAuth 2.0 用户。一个快速的解决方案是使用captionsgrabber 并解析返回的HTML 数据。

使用示例：

[https://www.captionsgrabber.com/8302/get-captions.00.php?id=UJTY7ilwSq4](https://www.captionsgrabber.com/8302/get-captions.00.php?id=UJTY7ilwSq4)

// 其中 id 是 youtube 视频 id

# java - 使用 JSONObject 解析特定值的 json 字符串

> ID：14061197
> 
> 赞同：0
> 
> 时间：2012-12-27T20:55:34.177
> 
> 标签：java, json

在java中，我试图从这个json中解析值..

```
[
{
    "2012-01-02": {
        "age": 3,
        "dob": "2010-01-03",
        "name": "jack"
    },
    "2012-01-03": {
        "age": 3,
        "dob": "2010-01-04",
        "name": "jill"
    },
    "2012-01-04": {
        "age": 3,
        "dob": "2010-01-05",
        "name": "john"
    },
    "2012-01-05": {
        "age": 3,
        "dob": "2010-01-06",
        "name": "miran"
    }
}
] 
```

使用 JSONObject，我试图获取“年龄”的值，然后将它们相加以进行一些数据操作。

*   我创建了一个 JSONObject
*   创建了一个迭代器，然后将它们存储到地图中
*   这让我得到了内部元素，例如：

    ```
    {
        "age": 3,
        "dob": "2010-01-06",
        "name": "miran"
    } 
    ```

在此之后，不确定如何从每个元素中提取年龄。我是创建另一个 jsonobject 并传递这个新字符串，从中提取年龄还是有更好的方法来做到这一点？（我确定有一个）

**更新：**

这就是我目前拥有的 {"age":3,"dob":"2012-01-06","name":"miran"}

```
 JSONObject jsonobj = new JSONObject();

        try {
            jsonobj = new JSONObject(pastweekVol);
            Iterator iter = jsonobj.keys();
            Map<String, String> map = new HashMap<String, String>();

            while(iter.hasNext()){
                String jsonkey = (String)iter.next();
                String value = jsonobj.getString(jsonkey);
                logger.debug("first pass value is: {}", value);
                         } catch (JSONException je) {
                logger.debug("exception is: {}",je);
             } 
```

我在想，既然我得到 {"age":3,"dob":"2012-01-06","name":"miran"}，我会创建另一个 json 对象并传入这个字符串，这将给我“年龄”的价值。这里的问题是我得到重复的值。当然，这里缺少一些非常基本的东西，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:58:47.347

如果您将内部元素作为`JSONObject`实例 - 比如说`person`- 那么您可以直接访问年龄：

```
int age = person.getInt("age"); 
```

并用它做点什么：

```
sum += age; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:59:49.783

如果您希望能够轻松地将任意复杂的 JSON 字符串解析为通用对象，您可以考虑使用像 Google 的 GSON (http://code.google.com/p/google-gson/) 这样的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:00:14.177

使用 org.json 可能不是你最好的选择——这个 API 有很多缺陷。使用 Jackson，您可以轻松地`age`从每个成员值中提取：

```
ObjectMapper mapper = new ObjectMapper();

JsonNode fullDocument = mapper.readTree(xxx); // xxx can be many things

// Not an object? Bail out
if (!fullDocument.isObject())
    throw new IllegalArgumentException("not an object");

// This will iterate through object values
for (JsonNode value: fullDocument)
    // do something with value.get("age")
    // in particular, you can test for .isIntegralNumber() 
```

# c# - 最近用户查询

> ID：14061201
> 
> 赞同：4
> 
> 时间：2012-12-27T20:55:46.947
> 
> 标签：c#, .net, linq, join, linq-to-objects

我有 2 个表，例如让我们假设这是数据：

用户表：

```
 ------------------------------
|   user_id     |   username    |
 ------------------------------
| 1             | danny         |
| 2             | george        |
| 3             | lana          |
| 4             | kim           |
| 5             | tim           |
 ------------------------------ 
```

users_logins 表：

```
 -----------------------------------------------
    | record_id | user_id   |   recorder            |
     -----------------------------------------------
    | 1         | 3         | 2012-11-06 04:18:26   |
    | 2         | 3         | 2012-11-06 04:31:05   |
    | 3         | 2         | 2012-11-06 03:44:22   |
    | 4         | 1         | 2012-11-06 04:18:58   |
    | 5         | 1         | 2012-11-06 04:30:15   |
    | 6         | 3         | 2012-11-06 04:31:05   |   X
    | 7         | 1         | 2012-11-06 05:53:47   |
    | 8         | 1         | 2012-11-06 05:55:15   |   X
    | 9         | 4         | 2012-11-06 05:59:31   |
    | 10        | 4         | 2012-11-06 06:12:55   |   X
     ----------------------------------------------- 
```

我想显示 3 个最近登录的用户，因此结果将只显示标有 X 的行，或者用词表示唯一的最近登录。

查询会是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:57:40.777

试试这个 linq to objects

```
 (from login in users_logins.OrderByDescending(user => user.recorder) 
 from user in users
 where user.user_id == login.user_id
 select user).Distinct().Take(3) 
```

此查询
1\. 首先按日期
排序 2\. 然后将排序的登录数据与用户数据连接，
3\. 然后获取不同的用户
4\. 最后获取前 3 条记录。

* * *

以下是替代查询

```
from login in users_logins.OrderByDescending(user =>user.recorder).GroupBy(user=>user.recorder).SelectMany( users=>users.First()).Take(3) 
from user in users
where user.user_id == login.user_id
select user 
```

此查询
1\. 首先排序
2\. 然后在 user_id 上分组
3\. 然后获取具有不同用户 ID 的前 3 条记录，
4\. 然后加入用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:20:43.723

我想这就是你想要的。

```
var resentLogedInUsers =
    users
        .Join(
            users_logins,
            u => u.user_id,
            l => l.user_id,
            (u, l) => new
                            {
                                User = u,
                                Login = l.recorder
                            })
        .GroupBy(j => j.User)
        .Select(l => new {User = l.Key, LastLogin = l.Max(d => d.Login)})
        .OrderByDescending(r => r.LastLogin)
        .Take(3); 
```

# javascript - 如何使 div 点击但可以悬停？

> ID：14061207
> 
> 赞同：4
> 
> 时间：2012-12-27T20:56:15.993
> 
> 标签：javascript, css, html, hover

我需要制作一个 div，以便当光标悬停在它上面时，我可以检测到它（使用 javascript），但我想制作它，以便您可以单击 div 到下面的元素。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:01:02.167

**编辑** 据我所知，通过我的快速搜索，我不相信你能够做到这一点，如果可以的话，我不会认为这不容易或非常实用。

**老的**

使用[jQuery](http://jquery.com/)：

```
$(document).ready(function(){
    $("body").on("hover", "div", function(){
         //do whatever you want on hover
    });

    $("body").on("click", "div .child-class", function(){
        //do whatever on click
    });
}); 
```

如果这不能回答您的问题并做您想做的事，请告诉我更具体的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:55:07.727

根据您的问题，有多种解决方案。我将从一些假设开始： 1\. 你是页面的所有者（你知道那里发生了什么）；2\. 你知道被点击的元素下面是什么元素。

对于这种情况，请检查以下代码：

```
//function executed when you click on element with id: beneath
function clickOnBeneath() {
    alert("beneath click");
}

//function executed when you click on element with id: above
function clickOnAbove() {
    var beneathEl;
    beneathEl = document.getElementById("beneath");
    beneathEl.click();
}

//attach click event on element with id: above and beneath
function attachClickOnElements() {
    var aboveEl,
        beneathEl;
    aboveEl = document.getElementById("above");
    aboveEl.addEventListener("click", clickOnAbove, false);
    beneathEl = document.getElementById("beneath");
    beneathEl.addEventListener("click", clickOnBeneath, false);
}

attachClickOnElements(); 
```

还有工作示例：http: [//jsfiddle.net/darkyndy/xRupb/](http://jsfiddle.net/darkyndy/xRupb/)

如果你不知道它下面是什么元素，那么我会尝试找到一些代码，因为我几年前写过这样的代码，作为起点，你可以检查HTML 元素上可用的*getClientRects()函数（文档：* [https://developer.mozilla.org/en-US/docs/DOM/element.getClientRects](https://developer.mozilla.org/en-US/docs/DOM/element.getClientRects) )

# git - Git：向工作流添加另一台具有相同用户名的开发机器？

> ID：14061214
> 
> 赞同：0
> 
> 时间：2012-12-27T20:56:55.027
> 
> 标签：git, version-control, github, development-environment, ssh-keys

提前为可能是一个明显的问题道歉，但我不想冒险搞砸我们的存储库来测试这个。

我需要在*我的*工作流程中添加另一台机器（MacBook）。我想知道为那台机器创建一个新的 git 用户是否更好，或者我是否可以继续使用我的主要 Git 用户名并假设每台机器上的存储库足够智能以保持同步？

两台机器都将在同一台服务器上签入和签出代码（而且，因为它是 Git，我想他们*可以*直接相互签出代码？！？）

另一个似乎很难兼顾的解决方案是将两台机器之间的开发目录与 rsync 或便携式主目录（通过 OS X 服务器的 PHD）同步。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:15:04.423

> 如果我可以继续使用我的主要 Git 用户名

Git 本身没有用户名。它只有作者/提交者姓名和电子邮件地址，仅用于识别作者或提交者。它不涉及实际授权或其他事情。一般来说，你应该在你的机器上保持这两个设置一致，所以你的所有提交仍然属于你（这个人），而不依赖于你创建提交的机器。

> 每台机器上的存储库是否足够智能以保持同步？

好吧，它们不会自动执行此操作，但您可以像往常一样拉取并推送到存储库以保持更新。

> 两台机器都将在同一台服务器上签入和签出代码

这样一来，在您的两个本地存储库（每台机器上一个）旁边，您就有了一个集中式存储库，它非常适合让您的本地存储库彼此同步。因此，每当您在一个本地存储库中有新内容时，只需推送到集中存储库，这样您就可以使用另一个存储库获取它。

> 因为它是 Git，我想他们可以直接互相检查代码

是的，由于 Git 是去中心化的，因此任何存储库都可以作为远程存储库工作。您所需要的只是与该存储库的网络连接（例如，具有 Samba 共享的私有 LAN），您可以获取并推送到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:15:13.627

无论您在哪里输入，您都希望您的作品能够被唯一标识，因此在您输入时使用相同的名称和电子邮件`git config --global user.name/email`。不过，我会制作一个新的 ssh 密钥对。复制私钥不是一个好主意。如果使用 github，请将新的公钥添加到您在 github 上的用户设置中的密钥集合中。

使存储库保持同步是一个手动过程。每个都将具有跟踪分支，以反映您之后遥控器上的内容`git fetch`。然后，您可以根据需要合并或变基或忽略并删除您的更改。我会查找 DAG（有向无环图）以更好地了解 git 如何存储历史以及如何管理更改：[http ://eagain.net/articles/git-for-computer-scientists/](http://eagain.net/articles/git-for-computer-scientists/)

你可以很容易地从你使用的两台机器上推拉。只需为每个遥控器添加一个遥控器。你很可能会被拉动，因为推送到非裸回购[不是一个好主意](https://stackoverflow.com/questions/1764380/push-to-non-bare-repository)。这取决于这样一个事实，即您可以从另一台机器上看到一台机器，这可能涉及 VPN 访问等。但是仍然可以在不使用第三个 repo 通过补丁或捆绑包的情况下移动更改。`git bundle`非常易于使用，我已经通过电子邮件向自己发送捆绑包。也有保管箱。许多人使用该选项。

# android - Android：滑动标签不显示列表片段

> ID：14061216
> 
> 赞同：0
> 
> 时间：2012-12-27T20:57:13.030
> 
> 标签：android, tabs

我正在处理本教程：[http](http://www.lucazanini.eu/2012/android/tabs-and-swipe-views/?lang=en) ://www.lucazanini.eu/2012/android/tabs-and-swipe-views/?lang=en 。问题是，如果我将选项卡的布局设置为一个简单的静态布局，就像这样（如教程那样），一切正常：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/body1" />

</LinearLayout> 
```

但我需要标签是 ListFragment，问题是我的 ListFragment 什么也没显示。这是代码。不要绝望：我放了很多代码，但我认为您可能只需要查看 SongsFragment 和 SongsListAdapter 类（好吧，我不确定，因为我是它我不会在这里写，但是我想是因为有静态布局一切正常！）

编辑：我在示例中只发布了一个 listfragment，但似乎每个 listfragment 都有相同的问题

**编辑：可能问题是我需要在选择选项卡时使用一种方法来显示片段**

***多谢***

活动：

```
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;

public class PlayerActivity extends FragmentActivity implements
        ActionBar.TabListener {

    CollectionPagerAdapter mCollectionPagerAdapter;
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mCollectionPagerAdapter = new CollectionPagerAdapter(getSupportFragmentManager());

        final ActionBar actionBar = getActionBar();
        actionBar.setHomeButtonEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mCollectionPagerAdapter);
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                // When swiping between different app sections, select
                // the corresponding tab.
                // We can also use ActionBar.Tab#select() to do this if
                // we have a reference to the Tab.
                actionBar.setSelectedNavigationItem(position);
            }
        });

        for (int i = 0; i < mCollectionPagerAdapter.getCount(); i++) {
            actionBar.addTab(actionBar.newTab()
                    .setText(mCollectionPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }

    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // TODO Auto-generated method stub

    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

歌曲片段

```
 import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

public class SongsFragment extends ListFragment {

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

public class SongsFragment extends ListFragment {

    List<String[]> songs;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);    

        songs = SongsDataSource.getInstance().getAllSongs();

        List<String[]> values = new ArrayList<String[]>();

        if (songs.size() == 0) {
            values.add(new String[] { "No files found", "Try to update your database", "" });
        }

        for (String[] song : songs) {
            values.add(new String[] { song[1], song[2], song[0] });
        }

        SongsListAdapter adapter = new SongsListAdapter(getActivity().getApplicationContext(),
                R.layout.songs, R.id.songsFragment_titleTextView,R.id.songsFragment_artistTextView, values);

        setListAdapter(adapter);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.songs, container, false); 
        return view;
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
    }

} 
```

歌曲列表适配器

```
import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class SongsListAdapter extends ArrayAdapter<List<String[]>> {
    private final Context context;
    private final List<String[]> values;
    private final Integer listViewId;
    private final Integer titleTextViewId;
    private final Integer artistTextViewId;

    public SongsListAdapter(Context context, Integer listViewId, Integer titleTextViewId, 
            Integer artistTextViewId, List values) {
        super(context, listViewId, values);
        this.context = context;
        this.listViewId = listViewId;
        this.values = values;
        this.titleTextViewId = titleTextViewId;
        this.artistTextViewId = artistTextViewId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(listViewId, parent, false);
        TextView titleView = (TextView) rowView.findViewById(titleTextViewId);
        TextView artistView = (TextView) rowView.findViewById(artistTextViewId);
        titleView.setText(values.get(position)[0]);
        artistView.setText(values.get(position)[1]);
        return rowView;
    }
} 
```

寻呼机适配器

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

public class CollectionPagerAdapter extends FragmentPagerAdapter {

    public CollectionPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new TabFragment();
        Bundle args = new Bundle();
        args.putInt(TabFragment.ARG_OBJECT, i);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return MyApplication.getInstance().infoFragments.length;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        String tabLabel = null;

        if(0 <= position && position < MyApplication.getInstance().infoFragments.length) {
            tabLabel = MyApplication.getInstance().infoFragments[position].getLabel();
        }

        return tabLabel;
    }
} 
```

TabFragment 类：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

/**
 * A fragment that launches other parts of the demo application.
 */
public class TabFragment extends Fragment {

    public static final String ARG_OBJECT = "object";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        Bundle args = getArguments();
        int position = args.getInt(ARG_OBJECT);

        int tabLayout = 0;

        if(0 <= position && position < MyApplication.getInstance().infoFragments.length) {
            tabLayout = MyApplication.getInstance().infoFragments[position].getLayout();
        }

        View rootView = inflater.inflate(tabLayout, container, false);

        return rootView;
    }
} 
```

MyApplication 类

```
 import android.app.Application;

    public class MyApplication extends Application {

        //SIGLETON DECLARATION

        private static MyApplication mInstance = null;

        public static MyApplication getInstance() { 
            if (mInstance == null) {
              mInstance = new MyApplication();
            }
            return mInstance;
        }

        public static InfoFragment[] infoFragments = new InfoFragment[] {
                new InfoFragment("Songs", R.layout.songs)
        };

        public static class InfoFragment {
            private String label;
            private int layout;

            public InfoFragment(String label, int layout) {
                this.label = label;
                this.layout = layout;
            }

            public String getLabel() {
                return label;
            }

            public int getLayout() {
                return layout;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:04:04.817

哦，看起来你从来没有真正`SongsFragment`在你的 getItem() 方法中返回你的。实际上，您似乎从未使用过它！

```
@Override
public Fragment getItem(int i) {
    Fragment fragment = new TabFragment();
    Bundle args = new Bundle();
    args.putInt(TabFragment.ARG_OBJECT, i);
    fragment.setArguments(args);
    return fragment;
} 
```

# sql - 如何在字符串列中搜索五位数字？

> ID：14061219
> 
> 赞同：2
> 
> 时间：2012-12-27T20:57:19.483
> 
> 标签：sql, string, wildcard, numeric, teradata

我想要做的是确定（使用 Teradata SQL）一个人的邮政编码是否被意外地放在了地址行上。我查看了各种论坛，但找不到任何类似的问题。

最终，我想写一些类似的东西：

```
Where address_line_1 like '%[0-9][0-9][0-9][0-9][0-9]%' 
```

有任何想法吗？

目标数据库是 Teradata 13.x

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:30:37.363

如果您想检查整个列以查看它是否仅包含邮政编码，您可以尝试以下操作：

```
where address_line_1 between '00000' and '99999' 
```

但是，如果您正在考虑在整个字符串中搜索任何出现的五个连续数字，那么这无论如何都不是一个好的测试。例如，以下将是一个完全有效的邮寄地址：

```
28305 Southwest Main Street 
```

加载数据后进行有效性检查很困难；这样的任务确实应该在加载过程中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:04:36.523

查找与此正则表达式匹配的所有条目`[^0-9][0-9][0-9][0-9][0-9][0-9][^0-9]`

因为这将在某些文本中找到正好 5 位数长的数字，假设这是邮政编码的定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-25T17:18:12.763

如果您的address_line_1中有四位数字，则在“00000”和“99999”之间的address_line_1将不起作用，因为它会拾取它们在哪里address_line_1 like '%[0-9][0-9][0-9][ 0-9][0-9]%' 将是一个更好的解决方案。

# html - 删除行内块元素中大文本上方和下方的空白

> ID：14061228
> 
> 赞同：86
> 
> 时间：2012-12-27T20:58:14.997
> 
> 标签：html, css, cross-browser

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-27T21:15:35.583

It appears as though you need to explicitly set a font, and change the `line-height` and `height` as needed. Assuming 'Times New Roman' is your browser's default font:

```
span {
  display: inline-block;
  font-size: 50px;
  background-color: green;
  /*new:*/
  font-family: 'Times New Roman';
  line-height: 34px;
  height: 35px;
}
```

```
<span>
    BIG TEXT
</span>
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-27T22:11:25.917

The browser is not adding any padding. Instead, letters (even uppercase letters) are generally considerably smaller in the vertical direction than the height of the font, not to mention the line height, which is typically by default about 1.2 times the font height (font size).

There is no general solution to this because fonts are different. Even for fixed font size, the height of a letter varies by font. And uppercase letters need not have the same height in a font.

Practical solutions can be found by experimentation, but they are unavoidably font-dependent. You will need to set the line height essentially smaller than the font size. The following seems to yield the desired result in different browsers on Windows, for the Arial font:

```
span.foo
{
  display: inline-block;
  font-size: 50px;
  background-color: green;
  line-height: 0.75em;
  font-family: Arial;
}

span.bar
{
  position: relative;
  bottom: -0.02em;
}
```

```
<span class=foo><span class=bar>BIG TEXT</span></span>
```

The nested `span` elements are used to displace the text vertically. Otherwise, the text sits on the baseline, and under the baseline, there is room reserved for descenders (as in letters j and y).

If you look closely (with zooming), you will notice that there is very small space above and below most letters here. I have set things so that the letter “G” fits in. It extends vertically a bit farther than other uppercase letters because that way the letters *look* similar in height. There are similar issues with other letters, like “O”. And you need to tune the settings if you’ll need the letter “Q” since it has a descender that extends a bit below the baseline (in Arial). And of course, if you’ll ever need “É”, or almost any diacritic mark, you’re in trouble.

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-03-08T23:48:19.100

I'm a designer and our devs had this issue when dealing with Android initially, and our web devs are having the same problem. We found that the spacing between a line of text and another object (either a component like a button, or a separate line of text) that a design program spits out is incorrect. This is because the design program isn't accounting for diacritics when it is defining the "size" of a single line of text.

We ended up adding `Êg` to every line of text and manually creating spacers (little blue rectangles) that act as the "measurement" from the *actual* top of the text (ie, the top of the accent mark on the E) or from the descender (the bottom of a "g"). For example, say you have a really boring top navigation that is just a rectangle, and a headline beneath it. The design program will say that the space between the bottom of the top nav and the top of the headline textbox 24px. However, when you measure from the bottom of the nav to the top of an Ê accent mark, the spacing is actually 20px.

While I realize that this isn't a code solution, it should help explain the discrepancies between the design specs and what the build looks like.

![See this image for an example of what Sketch does with type](../Images/de18aff0c3886004c983eaa69f7c1702.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-31T21:37:45.673

I had a similar problem. As you increase the line-height the space above the text increases. It's not padding but it will affect the vertical space between content. I found that adding a -ve top margin seemed to do the trick. It had to be done for all of the different instances of line-height and it varies with font-family too. Maybe this is something which designers need to be more aware of when passing design requirements (?) So for a particular instance of font-family and line-height:

```
h1 {
    font-family: 'Garamond Premier Pro Regular';
    font-size: 24px;
    color: #001230;
    line-height: 29px;
    margin-top: -5px;    /* CORRECTION FOR LINE-HEIGHT */
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-15T12:30:09.437

```
span::before,
span::after {
    content: '';
    display: block;
    height: 0;
    width: 0;
}

span::before{
    margin-top:-6px;
}

span::after{
    margin-bottom:-8px;
} 
```

Find out the margin-top and margin-bottom negative margins with this tool: [http://text-crop.eightshapes.com/](http://text-crop.eightshapes.com/)

The tool also gives you SCSS, LESS and Stylus examples. You can read more about it here: [https://medium.com/eightshapes-llc/cropping-away-negative-impacts-of-line-height-84d744e016ce](https://medium.com/eightshapes-llc/cropping-away-negative-impacts-of-line-height-84d744e016ce)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-23T21:13:09.127

This worked for me:

```
line-height: 80%; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-08T08:36:21.877

The best way is to use display:

```
inline-block; 
```

and

```
overflow: hidden; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-26T10:07:49.680

If its text that has to scale proportionally to the screenwidth, you can also use the font as an **svg**, you can just export it from something like illustrator. I had to do this in my case, because I wanted to align the top of left and right border with the font's top |TEXT| . Using line-height, the text will jump up and down when scaling the window.

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-02-20T03:41:21.137

I've been annoyed by this problem often. Vertical-align would only work on bottom and center, but never top! :-(

It seems I may have stumbled on a solution that works for both table elements and free paragraph elements. I hope we are at least talking similar problem here.

CSS:

```
p {
    font-family: "Times New Roman", Times, serif;
    font-size: 15px;
    background: #FFFFFF;
    margin: 0
    margin-top: 3px;
    margin-bottom: 10px;
} 
```

For me, the margin settings sorted it out no matter where I put my "p>.../p>" code.

Hope this helps...

# jquery - 使用 JQuery 的键盘导航未按预期运行

> ID：14061238
> 
> 赞同：1
> 
> 时间：2012-12-27T20:59:03.680
> 
> 标签：jquery, list, keyboard

我遵循了以下教程，该教程应该允许键盘滚动和选择无序列表项->[教程](http://www.marcofolio.net/webdesign/advanced_keypress_navigation_with_jquery.html.)

我将它与所描述的建议框一起使用 ->[建议框](http://www.marcofolio.net/webdesign/a_fancy_apple.com-style_search_suggestion.html)

请注意，除了更改 ID 和姓名外，我都遵循了这两个原则。

它似乎确实有效（当我按下悬停效果时确实显示），但在我放开键后它立即消失。如果我按住向下箭头，它会滚动到我的列表底部，但是一旦松开键，悬停效果就会立即消失。JQuery 绝不是我的强项，所以我不确定我做错了什么。我完全按照教程中的描述使用代码。我只将#menu 更改为#suggestions，因为这是我的div 的名称。

然而，这里是代码：

```
 var currentSelection = 0;
var currentUrl = '';

google.load("jquery", "1.3.1");
google.setOnLoadCallback(function()
{
    // Register keypress events on the whole document
    $(document).keypress(function(e) {
        switch(e.keyCode) { 
            // User pressed "up" arrow
            case 38:
                navigate('up');
            break;
            // User pressed "down" arrow
            case 40:
                navigate('down');
            break;
            // User pressed "enter"
            case 13:
                if(currentUrl != '') {
                    window.location = currentUrl;
                }
            break;
        }
    });

    // Add data to let the hover know which index they have
    for(var i = 0; i < $("#suggestions ul li a").size(); i++) {
        $("#suggestions ul li a").eq(i).data("number", i);
    }

    // Simulote the "hover" effect with the mouse
    $("#suggestions ul li a").hover(
        function () {
            currentSelection = $(this).data("number");
            setSelected(currentSelection);
        }, function() {
            $("#suggestions ul li a").removeClass("itemhover");
            currentUrl = '';
        }
    );
});

function navigate(direction) {
    // Check if any of the menu items is selected
    if($("#suggestions ul li .itemhover").size() == 0) {
        currentSelection = -1;
    }

    if(direction == 'up' && currentSelection != -1) {
        if(currentSelection != 0) {
            currentSelection--;
        }
    } else if (direction == 'down') {
        if(currentSelection != $("#suggestions ul li").size() -1) {
            currentSelection++;
        }
    }
    setSelected(currentSelection);
}

function setSelected(menuitem) {
    $("#suggestions ul li a").removeClass("itemhover");
    $("#suggestions ul li a").eq(menuitem).addClass("itemhover");
    currentUrl = $("#suggestions ul li a").eq(menuitem).attr("href");
} 
```

有人可以在这件事上帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:50:11.400

你可以试试这个插件[http://plugins.jquery.com/keyscroll/](http://plugins.jquery.com/keyscroll/)，允许在列表中上下滚动

# javascript - 如何延迟调用 JS 函数 - 动画 gif 在 IE 中不起作用

> ID：14061239
> 
> 赞同：4
> 
> 时间：2012-12-27T20:59:04.433
> 
> 标签：javascript, internet-explorer

我正在努力让动画 gif 在 IE 中运行。适用于所有其他浏览器，但在 IE 中它只是冻结。我对此进行了研究，看起来使用 setTimeout 的延迟可能会起作用。不太确定如何将其添加到以下函数中：

```
<script type="text/javascript">

    $(function(){
        $('#photo_form').on("submit", function () {
        $('#loading').show();

    });

    });

</script> 
```

gif 位于一个名为“正在加载”的 div 中，该 div 是隐藏的。我会将超时添加到按钮的 onClick 还是函数本身？

为什么IE让事情变得如此困难！？

解决此问题的任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:02:45.450

你的意思是这样的？

```
$(function() {

    $('#photo_form').on("submit", function () {

        setTimeout(function () {

              $('#loading').show();

        }, 100);

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:08:02.240

试试这个简单的、未经测试的伪代码：

```
var startTime;
var thread;

$(function(){
        $('#photo_form').on("submit", function () {
        $('#loading').show();
    startTime = time();
    thread = setInterval("showLoadingGif", 1);

    });

function showLoadingGif() {
    var timeToWait = 5; //change interval as needed
    if(timeToWait + startTime <= currentTime) {
        //show the gif
        clearInterval(thread);
    }
} 
```

自从我使用 javascript 以来已经很长时间了，所以这几乎肯定需要调整；但原理是一样的：继续调用那个函数，让那个函数决定什么时候停止调用。

setTimeout() 将导致您的页面在您等待时冻结。setInterval 将异步运行您的代码。

# python - Python加入两个内容相似的字典

> ID：14061249
> 
> 赞同：3
> 
> 时间：2012-12-27T21:00:08.653
> 
> 标签：python, dictionary, set

我正在寻找一种 Pythonic 方式（尽可能少的代码）来统一两个字典的内容：

```
basket1 = {"ham":2,"eggs":3}
basket2 = {"eggs":4,"spam":1} 
```

我想得到第三个篮子，它将成为其他两个篮子的“总和”，篮子 3 应该是：

```
basket3 --> {"ham":2,"eggs":7,"spam":1} 
```

如果可能，请使用`set`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T21:04:02.440

我会使用 a `Counter`，它`defaultdict`具有一些不错的属性：

```
>>> from collections import Counter
>>> basket1 = {"ham":2,"eggs":3}
>>> basket2 = {"eggs":4,"spam":1}
>>> basket_sum = Counter(basket1) + Counter(basket2)
>>> basket_sum
Counter({'eggs': 7, 'ham': 2, 'spam': 1}) 
```

如果您愿意，您可以将其转换回纯`dict`：

```
>>> dict(basket_sum)
{'eggs': 7, 'ham': 2, 'spam': 1} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T21:02:25.467

由于您正在尝试计算值，请使用`collections.Counter`：

```
basket3 = collections.Counter(basket1)
basket3.update(basket2) 
```

或者：

```
basket3 = collections.Counter(basket1) + collections.Counter(basket2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T21:06:01.060

```
In [2]: basket1 = {"ham":2,"eggs":3}

In [3]: basket2 = {"eggs":4,"spam":1}

In [4]: baskets = [basket1, basket2]

In [5]: answer = collections.defaultdict(int)

In [6]: for basket in baskets:
   ...:     for item in basket:
   ...:         answer[item] += basket[item]
   ...:         

In [7]: answer
Out[7]: defaultdict(<type 'int'>, {'eggs': 7, 'ham': 2, 'spam': 1})

In [8]: dict(answer)
Out[8]: {'eggs': 7, 'ham': 2, 'spam': 1} 
```

# javascript - 将标准输出彩色输出传递给 grunt 输出

> ID：14061255
> 
> 赞同：2
> 
> 时间：2012-12-27T21:00:53.063
> 
> 标签：javascript, node.js, gruntjs

我正在尝试创建一个运行 mocha 测试的 grunt 自定义任务，但我无法弄清楚如何让 grunt 从 mocha 获取彩色输出并像直接运行 mocha 命令时那样显示它。即：咕噜声去除颜色或不通过它们。这是繁重的任务：

```
var exec = require("child_process").exec;
grunt.registerTask('mocha', 'Run unit (Mocha) tests.', function () {
    var done = this.async();
    var cmd = "mocha -R Spec tests/mocha/*.js";
    exec(cmd, function (error, stdout, stderr) {
        if (stdout) {
            grunt.verbose.or.write(stdout);
            done();
        }
    });
}); 
```

我意识到我可以使用（并且已经使用过）一个 grunt-mocha 插件，但我正在尝试消除依赖关系，并且还将对此任务进行一些自定义。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T22:06:20.620

这主要是[这个问题](https://stackoverflow.com/questions/9135579/node-js-spawn-with-colors/9137636#9137636)的副本。

您需要添加`--colors`强制 Mocha 输出 ANSI 颜色代码，否则它会自动禁用颜色，因为它不会输出到实际终端。

```
var cmd = "mocha --colors -R Spec tests/mocha/*.js"; 
```

# python - 使用 urllib2 和 simplejson 进行无限循环

> ID：14061261
> 
> 赞同：2
> 
> 时间：2012-12-27T21:01:20.843
> 
> 标签：python, json, urllib2, urllib, simplejson

当 json 响应指示无效请求时，以下代码会表现出奇怪的行为。代码不会记录响应然后点击“if”块，而是记录响应并立即再次跳转到第一个日志调用，并重试 json/urlopen 调用等。此过程将无限重复，直到我终止该过程. 请注意，当 json 响应表明 url 和查询有效且正常时，程序的流程与您预期的一样。

```
log.debug('Retreiving json response for %s' % url)
response = simplejson.load(urllib2.urlopen(url))
log.debug('Retreived json response: %s' % response)
if response['status'] in ['INVALID_REQUEST', 'REQUEST_DENIED', 'UNKNOWN_ERROR']:
    print 'Problem with request: %s' % response['status'] 
```

只是为了演示这个问题，我已经包含了一个生成日志的示例：

```
2012-12-26 09:41:31,505 - json_logger - DEBUG - Retreiving json response for ...
2012-12-26 09:41:31,510 - json_logger - DEBUG - Retreived json response: {'status': 'INVALID_REQUEST', 'results': []}
2012-12-26 09:41:31,512 - json_logger - DEBUG - Retreiving json response for ... 
2012-12-26 09:41:31,530 - json_logger - DEBUG - Retreived json response: {'status': 'INVALID_REQUEST', 'results': []} ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:49:12.373

您是否能够避免使用 simplejson 的实现，而只需执行以下操作？

```
response = simplejson.loads(urllib2.urlopen(url).read()) 
```

我正在使用加载而不是加载来加载字符串，并且只是在您创建的 urllib2 对象上调用 read 方法

# magento - Why are images uploaded through the admin panel of my custom module, having the file name of Array?

> ID：14061264
> 
> 赞同：2
> 
> 时间：2012-12-27T21:01:29.540
> 
> 标签：magento

Here is my BrandController.php [https://gist.github.com/a958926883b9e7cc68f7#file-brandcontroller-php-L53](https://gist.github.com/a958926883b9e7cc68f7#file-brandcontroller-php-L53)

I've gone through all my files of my custom module, and compared them to the one given from the custom module maker, and I couldn't find much differences.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T05:17:31.940

您可能在不知不觉中上传了多个文件。如果这不是您的意图，您可以检查您的 HTML 并检查标签的名称属性。它**不能**是一个数组（像这样）。

```
<input type="file" name="my_files[]" /> 
```

如果您只在数据库中看到 Array()，则表示您确实在上传多个文件。您可以使用循环来处理它们。

如果您确定要上传 1 张图片，您可以按照@Palanikumar 的建议进行操作。使用 print_r() 并显示 $_FILES 并将其粘贴到此处。如果你不想使用它，你可以使用

```
json_encode($the-data-you-are-going-to-insert-to-the-database); 
```

如果你不知道把 print_r() 函数放在哪里，你可以把它放在这个文件的第 56 行之后。

[https://gist.github.com/desbest/a958926883b9e7cc68f7#file-brandcontroller-php-L53](https://gist.github.com/desbest/a958926883b9e7cc68f7#file-brandcontroller-php-L53)

```
if(isset($_FILES['filename']['name']) && $_FILES['filename']['name'] != '') {
 print_r($_FILES);
 die; 
```

如果在 ajax 函数中调用 saveAction()，则需要记录 ajax 响应。假设您使用的是 jquery ..

```
$ajaxResponse = $.POST({...});
console.log($ajaxResponse.responseText); 
```

然后，您可以在浏览器的控制台中查看它。如果没有出现，您可以使用非异步请求

```
$ajaxResponse = $.POST({
    // your options,
    // your another option,
    async: FALSE
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T23:29:38.490

您是否尝试上传多个文件？如果您使用多个具有相同名称的文件上传元素，您将获得一个项目数组。

因此，当调用以下行时，

```
//this way the name is saved in DB
$data['filename'] = $_FILES['filename']['name']; 
```

它将具有价值

```
["name"]=>array(2) {
      [0]=>string(9)"file0.txt"
      [1]=>string(9)"file1.txt"
} 
```

您需要更新代码以循环遍历每个 $_FILES['filename']['name'] 并分别上传和保存文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T11:58:16.350

通常文件上传会以数组格式返回。这样每个上传的文件都会有名称、类型、大小、临时名称、错误等信息。您可以使用打印功能（**print_r($_FILES)**）获取文件信息。所以如果你想显示文件的名称，你必须使用类似这样的东西**$_FILES['filename']['name']**

使用打印功能和调试工具，然后使用循环保存文件信息。

欲了解更多信息，请查看[此处](http://www.w3schools.com/php/php_file_upload.asp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:55:30.950

您没有设置表单的 enctype，因此永远不会发送图像。将代码更新为

```
$form = new Varien_Data_Form(array( 'enctype' => 'multipart/form-data')); 
```

# objective-c - List of closest annotations in MapKit

> ID：14061265
> 
> 赞同：1
> 
> 时间：2012-12-27T21:01:31.000
> 
> 标签：objective-c, xcode, ios6, mapkit

I'm developing an iPhone app with annotations on a map, and I've finished inserting all the annotations. The code I've used for all the annotations (x100) is:

```
CLLocationCoordinate2D theCoordinate1;
theCoordinate1.latitude = 59.92855;
theCoordinate1.longitude = 10.80467;

MyAnnotation* myAnnotation1=[[MyAnnotation alloc] init];

myAnnotation1.coordinate=theCoordinate1;
myAnnotation1.title=@"Økern Senter - DNB";
myAnnotation1.subtitle=@"Økernveien 145, 0580 OSLO";

[mapView addAnnotation:myAnnotation1];

[annotations addObject:myAnnotation1]; 
```

What I'm wondering about is how can I get all these locations in a list that shows the closest annotations to the users location?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T00:49:51.270

您需要做的是计算用户和注释之间的距离。

首先，在您的 中`MyAnnotation`，添加一个保持距离值的变量：将以下内容添加到`MyAnnotation.h`：

```
@property (nonatomic, assign) CLLocationDistance distance; 
```

和合成到.m 文件ofcourse。其次，当您收到新位置时，在您的 mapView 类（保留注释等的类）中添加以下代码：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    [...]
    for (MyAnnotation *annotation in self.mapView.annotations) {
        CLLocationCoordinate2D coord = [annotation coordinate];
        CLLocation *anotLocation = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];
        annotation.distance = [newLocation distanceFromLocation:anotLocation];
    }

    NSArray *sortedArray;
    sortedArray = [self.mapView.annotations sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
        NSNumber *first = [NSNumber numberWithDouble:[(MyAnnotation*)a distance]];
        NSNumber *second = [NSNumber numberWithDouble:[(MyAnnotation*)b distance]];
        return [first compare:second];
    }];

    [...]
} 
```

您现在可以将`sortedArray`tableView 等用作源，它根据距离从最近到最长的距离进行排序。当然

# sql - 从 select 语句插入 SQL

> ID：14061267
> 
> 赞同：-3
> 
> 时间：2012-12-27T21:01:35.943
> 
> 标签：sql, vb.net

我想要代码做的是从文本框 ID 号中获取输入，然后获取 ID 所属的记录并将其插入到另一个表中，但是我更改了 SQL 语句，当我按下按钮时仍然没有任何反应

```
Protected Sub Button4_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button4.Click

Dim con As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0; data source= " & Server.MapPath("~/Members.mdb"))

Dim cmd As New OleDbCommand

 Dim i As Integer

cmd.Connection = con

 cmd.CommandType = Data.CommandType.Text

cmd.CommandText = "insert into kfupm_stu_visitor (kfupm_stu_id, stu_name, kfupm_maj_id, kfupm_dep_id, level_id) select * from kfupm_stu where fupm_stu_id like @kfupm_stu_id"
        cmd.Parameters.Add("KFUPM_STU_ID", OleDbType.Integer).Value = "%" & txtSTU_ID.Text & "%"
        con.Open()

        Try
            i = cmd.ExecuteNonQuery()
        Catch ex As Exception

            Response.Redirect("msgpage.aspx?id=1")
        Finally
            con.Close()
            End Try

        Response.Redirect("msgpage.aspx?id=2")

    End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T21:03:24.443

如果您使用查询来填充列，则不需要该`values (...)`部分。它应该只是：

```
insert into kfupm_stu_visitor 
(kfupm_stu_id, stu_name, kfupm_maj_id, kfupm_dep_id, level_id)
select * from 
kfupm_stu where fupm_stu_id like @kfupm_stu_id 
```

当然，这假设中的列与列表`kfupm_stu`中的列完全匹配`insert into`。

# boolean-logic - boolean logic Are both boolean logic equal

> ID：14061273
> 
> 赞同：0
> 
> 时间：2012-12-27T21:02:42.753
> 
> 标签：boolean-logic

```
A && B || C && D

(A && B) || (C && D) 
```

Are both boolean logic equal in C++? I am confused.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T21:04:12.020

Whether or not they're equal depends entirely on how you define your operator precedence. If `&&` takes precedence over `||`, then yes. Otherwise, no.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:06:12.873

在大多数编程语言中，您会发现运算符`&&`的优先级高于`||`. 例如，在 Java、C#、C、C++、Python、Ruby 等中。

```
A && B || C && D 
```

相当于

```
(A && B) || (C && D) 
```

您甚至可以复制粘贴代码：

```
#include <iostream>
using namespace std;

int main() {
        bool A = false;
        bool B = false;
        bool C = true;
        bool D = true;
        for(int i = 0; i < 2; ++i) {
            A = (i == 0);
            for(int j = 0; j < 2; ++j) {
               B = (j == 0);
                for(int k = 0; k < 2; ++k) {
                   C = (k == 0);
                    for(int l = 0; l < 2; ++l) {
                       D = (l == 0);
                       cout << A << " " << B << " " << C << " " << D << " -> ";
                       cout << ((A && B || C && D) == ((A && B) || (C && D)))  << endl;
                    }
                }
            }
        }
        return 0;
} 
```

到[Ideone](http://ideone.com)自己找出答案。例如，在 C++ 中，输出为：

```
1 1 1 1 -> 1
1 1 1 0 -> 1
1 1 0 1 -> 1
1 1 0 0 -> 1
1 0 1 1 -> 1
1 0 1 0 -> 1
1 0 0 1 -> 1
1 0 0 0 -> 1
0 1 1 1 -> 1
0 1 1 0 -> 1
0 1 0 1 -> 1
0 1 0 0 -> 1
0 0 1 1 -> 1
0 0 1 0 -> 1
0 0 0 1 -> 1
0 0 0 0 -> 1 
```

所以 the`((A && B || C && D) == ((A && B) || (C && D)))`是一个重言式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:41:11.780

虽然最终的答案是您所询问的 C++ 语言的细节，但这里有一些关于为什么（以及可能如何）记住的食物：

合取（AND，&&）通常与乘法相关，而析取（OR，||）通常与加法相关（我们通常知道乘法优先于加法）。

[这是来自http://www.ocf.berkeley.edu/~fricke/projects/quinto/dnf.html](http://www.ocf.berkeley.edu/~fricke/projects/quinto/dnf.html)的引述：

> ...实际上，我们通常将合取与乘法联系起来，将析取与加法联系起来。事实上，如果我们用 1 来识别真，用 0 来识别假，那么 {0,1} 再加上大小为 2 的伽罗瓦域上的加法和乘法的通常定义（例如，算术模 2），然后是加法 (+) 和析取（或）实际上是相同的，乘法和合取（和）也是如此。...

笼统地说，计算机语言倾向于尊重乘法运算符优于加法运算符的优先级。

*（此外，这些关联，例如逻辑和代数中的运算符之间的关联，在其他领域（例如类型系统）中再次出现。有关这方面的有趣说明，请参阅关于代数概念的[http://blog.lab49.com/archives/3011](http://blog.lab49.com/archives/3011)类型系统。）*

# c# - ContentManager 在加载任何数据之前内存不足

> ID：14061279
> 
> 赞同：1
> 
> 时间：2012-12-27T21:03:11.863
> 
> 标签：c#, windows-phone-7, xna

我正在尝试在 XNA 中加载数据，但是，每当我使用 ContentManager 时，它都会引发内存不足异常。当我加载我的第一个资源时会发生这种情况。这是一个 32x32 像素的图像。

我正在使用：

```
contentManager = (Application.Current as App).Content;
contentManager.Load<Texture2D>("Head"); 
```

我已经使用这个很久了，不知道为什么它现在不起作用。有没有人有任何建议让我通过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:06:35.463

我曾经经历过一次，它会在从电话任务回来后一直发生（在我的情况下是 IAP 界面）。

我通过延迟内容加载来解决它。我的假设是 IAP 任务本身正在使用大量内存，我需要花一些时间来释放这些资源，然后再尝试分配更多资源。

您可以尝试在加载内容之前添加延迟（不确定何时执行此操作，但如果您在 Game.Initialize 之类的地方执行此操作应该没问题）。

# python - Python subprocess module

> ID：14061283
> 
> 赞同：0
> 
> 时间：2012-12-27T21:03:28.660
> 
> 标签：python, subprocess, command-prompt, popen, prompt

I am making a GUI aplplication in Python that requires to run a `cmd` prompt command.

e. g.:

```
import subprocess
subprocess.Popen("arp -a > arptable.txt",stdin=PIPE, stdout=PIPE,shell=Ture) 
```

Now, after running this command, I see a small splash of `cmd screen`, and a text file containing the `arp` table is generated. In my application, I don't want this black screen to splash, so that the user doesn't know there's a `cmd prompt` involved in the appplication.

How can I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:13:06.317

在 Windows 上，您需要将一个[`STARTUPINFO`](http://docs.python.org/2/library/subprocess.html#windows-popen-helpers)类传递给`startupinfo`of[`subprocess.Popen`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)来实现这一点。要使其便携：

```
import subprocess
import os

si = None
if os.name == 'nt':
    si = subprocess.STARTUPINFO()
    si.dwFlags |= subprocess.STARTF_USESHOWWINDOW
proc = subprocess.Popen("arp -a > arptable.txt",stdin=PIPE, stdout=PIPE, startupinfo=si) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:58:21.337

你不需要`shell=True`：

```
import os
from subprocess import PIPE, STDOUT, check_call

with open("arptable.txt", "rb") as file, open(os.devnull, "r+b") as devnull:
    check_call(["arp", "-a"], stdin=devnull, stdout=file, stderr=STDOUT) 
```

# php - 在 PHP 中创建嵌套类的正确方法是什么？

> ID：14061285
> 
> 赞同：0
> 
> 时间：2012-12-27T21:03:53.970
> 
> 标签：php, class, multidimensional-array, nested

我需要创建一个多维数组的嵌套结构类，这是我的数组：

```
Array
(

    [days] => Array
        (
            [0] => Array
                (
                    [rows] => Array
                        (
                            [0] => Array
                                (
                                    [activity_id] => 1
                                    [name] => Activity 2
                                    [city] => London
                                    [info] => fsdsdshgsfd 
                                )

                            [1] => Array
                                (
                                    [activity_id] => 3
                                    [name] => Activity 1
                                    [city] => London
                                    [info] => fsdhgsfd 
                                )
                        )

                )
           [1] => Array
                (
                    [rows] => Array
                        (
                            [0] => Array
                                (
                                    [activity_id] => 3
                                    [name] => Activity 1
                                    [city] => London
                                    [info] => fsdhgsfd 
                                )

                                ...

                                )
                        )
                )

                ...
       )
) 
```

我一直在尝试重写我的代码以使其成为类驱动的，但我正在为此苦苦挣扎，构建类结构`Itinerary->Days->Rows`以替换数组的正确方法是什么？我尝试过这样的事情，我不确定它是否有意义，我真的不明白它是如何完成的：

```
class Itinerary
{

    private $days = array();

    public static function addDay($day) {
        $this->$days[] = new ItineraryDay($day);
    }
}

class ItineraryDay implements Countable
{

    private $rows = array();

    public static function addRow($row) {
        $this->$rows[] = new ItineraryRow($row);
    }

    public function count()
    {
        return count($this->rows);
    }
}

class ItineraryRow implements Countable
{

    private $name;
    private $city;
    ...

    function __get($key)
    {
        ...
    }

    function __set($key, $value)
    {
        ...
    }

    public function count()
    {
        return count($this->rows);
    }
}

$itinerary1 = new Itinerary(); 

$day1 = new ItineraryDay(); 
$itinerary1->addDay($day1);

$row1 = new ItineraryRow(); 
$day1->addRow($row1); 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:43:38.990

这真的取决于你最终想用所说的结构做什么，但一般来说，我通常会做这样的事情：

```
class Itinerary implements Countable
{
    private $days;

    public function __construct( array $days = array() )
    {
        $this->setDays( $days );
    }

    public function addDay( ItineraryDay $day )
    {
        $this->days[] = $day;
    }

    public function setDays( array $days )
    {
        $this->days = array();
        foreach( $days as $day )
        {
            $this->addDay( $day );
        }
    }

    public function count()
    {
        return count( $this->days );
    }
}

class ItineraryDay implements Countable
{
    private $rows;

    public function __construct( array $rows = array() )
    {
        $this->setRows( $rows );
    }

    public function addRow( ItineraryRow $row )
    {
        $this->rows[] = $row;
    }

    public function setRows( array $rows )
    {
        $this->rows = array();
        foreach( $rows as $row )
        {
            $this->addRow( $row );
        }
    }

    public function count()
    {
        return count( $this->rows );
    }
}

class ItineraryRow
{
    private $id;
    private $name;
    private $city;
    private $info;

    public function __construct( $id, $name, $city, $info )
    {
        $this->id   = $id;
        $this->name = $name;
        $this->city = $city;
        $this->info = $info;
    }

    /* ... */
} 
```

然后将它与当前数据数组的结构一起使用：

```
$days = array();
foreach( $originalData[ 'days' ] as $days )
{
    $rows = array();
    foreach( $days[ 'rows' ] as $row )
    {
        $rows[] = new ItineraryRow( $row[ 'activity_id' ], $row[ 'name' ], $row[ 'city' ], $row[ 'info' ] );
    }
    $days[] = new ItineraryDay( $rows );
}
$itinerary = new Itinerary( $days ); 
```

或者：

```
$itinerary = new Itinerary;
foreach( $originalData[ 'days' ] as $days )
{
    $day = new ItineraryDay;
    foreach( $days[ 'rows' ] as $row )
    {
        $row = new ItineraryRow( $row[ 'activity_id' ], $row[ 'name' ], $row[ 'city' ], $row[ 'info' ] )
        $day->addRow( $row );
    }
    $itinerary->addDay( $day );
} 
```

因此，您可以将“子”对象传递给构造函数（构造新对象的方法），或者在构造后将它们添加到方法中。如果您希望对象是不可变的，这意味着您不想让对象在构造后接受更多行/天，只需创建`addDay`、和方法`setDays`，或者因此只允许通过构造函数传递“子”对象。`addRow``setRows``protected``private`

请注意，正如 PeeHaa 已经提到的，您不需要静态方法，因为它们在类范围内操作，而不是在类（对象）的单个实例上操作。事实上，您甚至不能按照您的意图使用静态方法，因为`$this`它只能在对象上下文中使用，而不是在类范围的上下文中。

但是，老实说，这个问题有点模糊，无法正确回答。我们必须有更多关于如何构造对象以及稍后将如何使用它们的细节。

# jquery - 如何识别哪个文件进度用于？

> ID：14061286
> 
> 赞同：5
> 
> 时间：2012-12-27T21:03:55.663
> 
> 标签：jquery, blueimp

关于[jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)，有一个`progress`事件会传回一个`data`对象，据我所知，它会报告每个文件的进度。

我正在通过`add()`事件将文件和进度条添加到我的 UI 中，并且我想稍后在`progress()`事件中更新它们各自的进度条。我遇到的问题是如何匹配它们？

我需要给每个文件一个唯一的 ID，以便我可以将它们配对，但据我所知，没有提供一个。我们应该怎么做？

每个 File 对象可能有一些 JavaScript 哈希码吗？

一些代码：

```
$('#fileupload').fileupload({
    url: 'api/combox_upload.php',
    dataType: 'json',
    dropZone: $dropZone,
    done: function (e, data) {
        $.each(data.result, function(index, file) {
            // indicate completeness
        });
    },
    add: function(e, data) {
        $.each(data.files, function(index, file) {
            console.log(file);
            $file_uploads.append($('<li>').text(file.name));
        });
        data.submit(); // start upload immediately
    },
    progress: function(e, data) {
        console.log(data);
    }
}); 
```

* * *

我*想*我可以通过`$.data`如下方式为每个文件附加一个唯一的 ID：

```
var fileId = 0;

$('#fileupload').fileupload({
    url: 'api/combox_upload.php',
    dataType: 'json',
    dropZone: $dropZone,
    done: function (e, data) {
        $.each(data.result, function(index, file) {
            // indicate completeness
        });
    },
    add: function(e, data) {
        $.each(data.files, function(index, file) {
            //console.log(file);
            console.log(filename, fileId);
            $.data(file, 'id', fileId++);
            $file_uploads.append($('<li>').text(file.name));
        });
        data.submit(); // start upload immediately
    },
    progress: function(e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        $.each(data.files, function(index, file) {
            console.log($.data(file,'id'), file.name, progress);
        });
        //console.log(data);
    }
}); 
```

我现在感到困惑的部分是，在进度事件中，它不仅给你一个文件，它给你一个包含 1 个文件的数组......我不确定是否保证它总是有是否有 1 个文件 ( `data.files`)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T00:45:16.227

我应该只阅读名为[How to tie a file to an element node during the life cycle during upload 的部分](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)：

```
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        add: function (e, data) {
            data.context = $('<p/>').text('Uploading...').appendTo(document.body);
            data.submit();
        },
        done: function (e, data) {
            data.context.text('Upload finished.');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T21:13:36.153

您没有发布实际调用文件上传或绑定到进度事件的代码，但我的猜测是您只需要[`$.proxy`](http://api.jquery.com/jQuery.proxy/)在函数周围放置一个包装器`fileuploadprogress`。

该`$.proxy`函数允许您指定`this`将在函数中引用的内容。然后在您的函数内部，您将可以访问`data`并`this`能够提供上下文。

# c# - 可移植类库和反射

> ID：14061291
> 
> 赞同：11
> 
> 时间：2012-12-27T21:04:24.057
> 
> 标签：c#, reflection, portable-class-library

我正在同时为桌面、Windows 8 商店和 Windows 手机构建新的应用程序。所以我创建了可移植类库以在所有平台上具有通用功能。我的问题是，当我尝试在 PCL 中重用我的代码时，我无法访问库中的某些方法和属性。根据 MSDN，这些方法是受支持的，但我现在知道为什么我不能访问它们了。

```
 var property = memberExpression.Member as PropertyInfo;
        if (property == null)
        {
        }

        var getMethod = property.GetGetMethod(true);
        if (getMethod.IsStatic)
        {} 
```

这是无法编译的代码片段。GetGetMethod 和 IsStatic 在 Visual Studio 编辑器中显示为红色。我不知道为什么会发生这种情况以及如何访问这些属性。

所以如果有人做过类似的事情，请帮我编译这段代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-28T01:05:21.470

我们在用于 Windows 应用商店应用的 .NET 的反射 API 中进行了一些重构。有关详细信息，请参阅博客文章[Evolving the Reflection API](http://blogs.msdn.com/b/dotnet/archive/2012/08/28/evolving-the-reflection-api.aspx)。除其他外，API 更改为我们在未来提供了更好的可移植性。新的 API 在 Windows 应用商店应用程序、.NET 4.5 和 Windows Phone 8 中可用。为了兼容性，旧 API 当然仍然在 .NET 4.5 和 Windows Phone 8 上可用。

对于可移植类库，如果您*仅*针对支持新反射 API 的平台，那么您将仅获得新 API。如果您添加一个不支持新 API 的平台，那么您将获得这些 API。

`PropertyInfo.GetGetMethod()`不是新 API 的一部分，因此您应该`PropertyInfo.GetMethod`改用。 `MethodInfo.IsStatic`是新 API 的一部分，您在 Visual Studio 中看到红色曲线的原因是因为它不知道 getMethod 是什么类型，因为您使用`var`了 GetGetMethod() 并且无法识别。

因此，您的代码应如下所示：

```
 var property = memberExpression.Member as PropertyInfo;
    if (property == null)
    {
    }

    var getMethod = property.GetMethod;
    if (getMethod != null && getMethod.IsStatic)
    {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:12:56.893

要提供有关我的评论的一些信息，**请使用 Type.GetMethod**。

**来自类型的元数据**

> 在评估从`System.Type`方法和属性返回的元数据时，相等运算符可能会在不同的平台上返回不同的结果。在 .NET Compact Framework 中，对该`Type.GetMethod`方法的每次连续调用都会返回 的一个新实例 `System.Reflection.MethodInfo`，因此返回值永远不会被计算为相等。但是，在 .NET Framework 4 中，`GetMethod`使用相同参数调用会返回相同的 MethodInfo 实例。当您使用以下 System.Reflection 类型时，您必须检查并可能修改您的代码：`MethodInfo`、`FieldInfo`、 `PropertyInfo`、`EventInfo`、`MemberInfo`、`MethodBase`、`ConstructorInfo`和 `ParameterInfo`。

**对开放泛型类型的反思**

> 在 Windows Phone 7 上，封闭的泛型类型支持反射；但是，开放的泛型类型不支持大多数反射操作。对于开放的泛型类型，Windows Phone 7 仅支持以下反射操作： 通过调用`GetType`or方法检索开放的泛型类型或`GetMethods`方法。`MakeGenericType`通过调用or方法从开放的泛型类型或方法创建泛型类型或 `MakeGenericMethod`方法。对于开放泛型类型的所有其他反射操作，将`NotSupportedException`引发异常。

来源：http: [//msdn.microsoft.com/en-us/library/gg597392.aspx](http://msdn.microsoft.com/en-us/library/gg597392.aspx)

# django - Django Dev. Server Refuses to Quit

> ID：14061292
> 
> 赞同：5
> 
> 时间：2012-12-27T21:04:34.140
> 
> 标签：django, macos, osx-mountain-lion, web-development-server, activity-monitor

The development server for Django is acting very odd. The browser accessing it gets stuck on loading, and any attempt to quit it does not work. When I hit `control c` it seems to quite, but in actuality is still running. The only way to make it quit is to restart my computer, which is very frustrating. Is there any way to force it to quit. I'm on a mac running mountain lion. Does anyone know the name of the processe it runs is called so I can force it to quit from activity monitor.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-05T09:06:57.317

假设您用来运行 django 的命令是：

```
python manage.py runserver 
```

你可以用以下方法杀死它：

```
pkill -f 'python manage.py runserver' 
```

这比`killall python`其他程序可能使用 python 好得多，这会杀死它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:30:25.443

Django 在 Python 进程中运行（有时不止 1 个），你可以使用

```
killall python 
```

或者，从活动监视器中，只需杀死其中包含 Python 的任何东西。不过，在一天结束时，manage.py runserver 命令只会创建一个新的（通常是按顺序编号的）Python 进程。唯一一次停止所有 python 进程可能是一个问题，如果您从计算机上运行超过 1 个 python 服务，在这种情况下，您可能需要编辑 django-admin.py 并查看让它创建一个命名进程。

# python - redis celeryd and apache

> ID：14061297
> 
> 赞同：0
> 
> 时间：2012-12-27T21:05:03.080
> 
> 标签：python, django, redis, celery

I'm a bit new to redis and celery. Do I need to restart celeryd and redis every time I restart apache? I'm using celery and redis with a django project hosted on webfaction.

Thanks for the info in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:08:59.300

如果您正在运行 Redis 和 Celery 的守护进程，则在重新启动 Apache 时不需要重新启动它们。

通常，当您对 Redis 或 Celery 进行配置更改时，您需要重新启动它们，因为应用程序相互依赖。

# arrays - How to fetch and display an array using PDO?

> ID：14061298
> 
> 赞同：1
> 
> 时间：2012-12-27T21:05:20.923
> 
> 标签：arrays, pdo, fetch

I understand there are MANY ways to do all of this, but trying to do it the best way.

I have created the db parameters, dns, dbh, sth, sql and generally quite happy with the result up to ... well ... the result part.

```
<?php

// db parameters
$dbhost = "localhost";
$dbname = "x";
$dbuser = "y";
$dbpass = "z";

// driver invocation (dsn is short for data source name)
$dsn = "mysql:host=$dbhost;dbname=$dbname";

// create db object (dbh is short for database handle)
$dbh = new PDO($dsn, $dbuser, $dbpass);

// execution of database query (sth is short for statement handle)
$sql = "SELECT * FROM a_aif_remaining";
$sth = $dbh->prepare($sql);
$sth->execute(); 
```

**NOT SURE WHAT TO PUT BELOW.... (A) or (B)**

*I just want to present a simple array of the data. One row from the table per line.*

**Option A**

```
echo $_POST['fieldname1'];
echo $_POST['fieldname2'];
echo $_POST['fieldname3']; 
```

**Option B**

```
while ($rows = $sth->fetch(PDO::FETCH_ASSOC)) {
    echo $row[fieldname1],'<br>';
    } 
```

**AND I AM CONFIDENT WITH THE ENDING**

```
 $dbh = NULL;

?> 
```

Any advise would be GREATLY appreciated.

## UPDATED CODE: (Produces nothing on the page)

```
<?php

    // db parameters
    $dbhost = "localhost";
    $dbname = "theaudit_db1";
    $dbuser = "theaudit_user";
    $dbpass = "audit1999";

    $dsn = "mysql:host=$dbhost;dbname=$dbname"; // driver invocation (dsn is short for Data Source Name)

try {
    $dbh = new PDO($dsn, $dbuser, $dbpass); // connect to new db object (dbh is short for Database Handle)
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // set the PDO error mode to enable exceptions
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); // set the PDO emulate prepares to false

    // execute query to database (sth is short for Statement Handle)
    $sql = "SELECT * FROM a_aif_remaining";
    $sth = $dbh->prepare($sql);
    $sth->execute();

    $data = $sth->fetchAll(PDO::FETCH_ASSOC);

    $dbh = NULL;
}

catch(PDOException $e)
    {
    echo $e->getMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T06:14:08.993

虽然我不知道A和B之间有什么联系，但我可以回答

> 我只想展示一个简单的数据数组。每行从表格中提取一行。

问题。

```
$sql = "SELECT * FROM a_aif_remaining";
$sth = $dbh->prepare($sql);
$sth->execute();
$data = $sth->fetchAll(PDO::FETCH_ASSOC); 
```

where`$data`是一个受欢迎的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T09:18:57.960

您更新代码的问题很简单 - 您没有将数据回显出来。你需要添加类似..

```
 foreach($data as $arKey=>$dataRow){
        foreach($dataRow as $arKey=>$rowField){
             echo $rowField.','; //concat with a ',' to give csv like output 
        }
        echo '<br>'; //to get to next line for each row (may want to trim the last ','
   } 
```

我也对 $_POST 的引用感到困惑。确实两者都是关联数组，但这并不意味着 $_POST 选项是可行的 - 如果您将数据放在那里（例如 $_POST = $data），数据将仅在 $_POST 中可用，这将毫无意义。或者，如果您从其他地方发布了数据。两者似乎都不符合您的要求，因此我会忘记 $_POST 并弄清楚您如何访问多维 $data 数组。关于这个主题有无穷无尽的。尝试使用

```
 var_dump($data) 
```

看看里面有什么应该可以帮助你想象正在发生的事情。

注意：在选项 B 中，您没有正确连接或引用您的数组，它应该是：

```
 while ($rows = $sth->fetch(PDO::FETCH_ASSOC)) {
        echo $rows[fieldname1].'<br>'; //$row doesnt exist its $rows and you use . to concat not ,
        } 
```

是的，可能最好使用 unset 而不是将 $dbh 设置为等于 null

```
unset($dbh); 
```

# c# - Simple implementation of SHA-3 Keccak hashing to the wrong output in C#?

> ID：14061299
> 
> 赞同：1
> 
> 时间：2012-12-27T21:05:30.720
> 
> 标签：c#, hash, sha-3, keccak

I am trying to get the HashLib library @ [https://hashlib.codeplex.com/](https://hashlib.codeplex.com/) working for the new SHA-3 Keccak algorithm. I've written a simple Console application that supposedly has to output the correct hash code, but it doesn't!

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Diagnostics;
using HashLib;
using System.Threading.Tasks;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            {
                string passPhrase = "";
                IHash hash = HashFactory.Crypto.SHA3.CreateKeccak512();
                HashResult r = hash.ComputeString(passPhrase, System.Text.Encoding.ASCII);

                Console.WriteLine(r.ToString().ToLower().Replace("-",""));
                Console.WriteLine("{0}, {1}, {2}", hash.BlockSize, hash.HashSize, hash.Name);
                Console.ReadLine();
            }
        }
    }
} 
```

The application builds and runs ok, but the output is very wrong. When I use other people 's implementations of the Keccak algorithm, I get different results and it doesn't match for example this wiki post either. [https://en.wikipedia.org/wiki/SHA-3](https://en.wikipedia.org/wiki/SHA-3) So something is obviously wrong.

When I leave the text empty, as per example, I get the following: "df987cfd23fbc92e7e87faaca300ec3f etc. etc." while the wiki and other tools say I should get

"0eab42de4c3ceb9235fc91acffe746b29c29a8c366b7c60e4e67c466f36a4304c00fa9caf9d87976ba469bcbe06713b435f091ef2769fb160cdab33d3670680e"

,which is something entirely different. I also tried it with non-empty strings of course.

Does anyone have a suggestion?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T21:27:51.990

您的 HashLib 版本太旧。如果您查看[最近的更改](https://hashlib.codeplex.com/SourceControl/diff/file/view/77942?fileId=1104881)，您可以看到测试向量从您得到的向量变为您应该得到的向量。（当然，算法也发生了变化。）

# c# - ASP.NET MVC dropdown filter clear

> ID：14061301
> 
> 赞同：1
> 
> 时间：2012-12-27T21:05:51.753
> 
> 标签：c#, asp.net-mvc, razor, filter

I've created a dropdown to filter results. This works great the 1st time, but if the user selects another option it filters on the filtered results. Is there a way to clear the results before it filters again?

**RAZOR**

```
@using (Html.BeginForm("Index", "Admin", FormMethod.Get))
{
  @Html.DropDownList("category", (SelectList)ViewBag.Categories, "--Select One--") 
  <input type="submit" value="Filter" /> 
} 
```

**Server code**

```
public ViewResult Index(string category, int page = 1)
{
    var categoryList = categoriesRepository.Categories.Select(c => c.CategoryName).Distinct();
    ViewBag.Categories = new SelectList(categoryList.AsEnumerable());

    var viewModel = new ProductsListViewModel
    {
        Products = repository.Products
                    .Where(p => category == null || p.Category == category)
                    .OrderBy(p => p.ProductID)
                    .Skip((page - 1) * PageSize)
                    .Take(PageSize),
        PagingInfo = new PagingInfo
                    {
                        CurrentPage = page,
                        ItemsPerPage = PageSize,
                        TotalItems = category == null
                                    ? repository.Products.Count()
                                    : repository.Products.Where(e => e.Category == category).Count()
                    },
        CurrentCategory = category
    };
    return View(viewModel);
} 
```

# arrays - BASH: Send output of complex command to an array

> ID：14061304
> 
> 赞同：0
> 
> 时间：2012-12-27T21:06:04.290
> 
> 标签：arrays, bash

NOTE FROM OP: Oops. My mistake. I happened to let grep hunt for something(s) non-existent. Of course I got no output. And yes, this is a dup of [another question](https://stackoverflow.com/questions/1753366/redirect-output-to-a-bash-array).

<><><><><><><><><><><><><><><><><><><><>

There are many answers on the web to (most of) this question. The "most of" part is my problem.

How do I capture the output of a command line into a bash array when the command line contains pipe chars, "|"?

```
 array=($(ps -ef | grep myproc | grep -v grep)) 
```

doesn't work. Neither does:

```
 array=(`ps -ef | grep myproc | grep -v grep`) 
```

(those are backquotes in case your font mangles them).

And, can the given answer be use with **array+=** syntax?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:24:52.720

```
array=($(ps -ef | grep myproc | grep -v grep)) 
```

效果很好。您可以在显示数组中的元素数量时检查它

```
echo ${#array[*]} 
```

或完整的数组

```
echo ${array[*]} 
```

# visual-studio-2012 - How can I change theme in VS2012?

> ID：14061305
> 
> 赞同：0
> 
> 时间：2012-12-27T21:06:07.647
> 
> 标签：visual-studio-2012, themes

I searched how to change visual studio 2012 theme many time. But couldn't change it. I download themes. I do everything what guides say in import export settings. It says "Your settings were successfully imported from wekeroad-ink.vssettings." but nothing happens.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:10:23.730

工具>选项>环境>常规有视觉体验部分，如果你想要更多，你可以选择浅色或深色主题，你可以使用[Visual Studio 2012颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05) 它有几个预制主题（尤其是蓝色主题非常好看）您还可以使用它来调整 Visual Studio 的每种颜色。

# javascript - 验证电子邮件客户端

> ID：14061310
> 
> 赞同：0
> 
> 时间：2012-12-27T21:06:21.250
> 
> 标签：javascript, email-validation

> **可能重复：**
> [在 Javascript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

当服务器端无法验证时，如何使用 javascript 在客户端验证电子邮件？据我了解，Javascript 可以关闭，那么如何实现并阻止我收到 PCI 警告？

```
$(document).ready(function() {

var clearMePrevious = "";

// clear input on focus
$("#email").focus(function() { 
    if($(this).val()==$(this).attr("title")) {
        clearMePrevious = $(this).val();
        $(this).val("");
    }
});

// if field is empty afterward, add text again
$("#email").blur(function() {
    if($(this).val()=="") {
        $(this).val(clearMePrevious);
    }
});

$('#submitemail').click(function() {
    app.ajax.load({
         reqName : 'emailSubmit',
         url: '$httpUrl('Bronto-OptIn')$?email=' + $('#email').val(),
         selector : '#emailbox',
         callback: function(responseText, textStatus) { }
    });
            return false;
});

});

<form id="emailsignup_form" name="emailsignup_form" method="post" action="$httpUrl('Bronto-OptIn', 'fid', 'information')$">
<div class="fl"><input class="email-signup-input" type="text" title="Enter Your Email Address" value="Enter Your Email Address" name="email" id="email" /></div>
<div class="fl"><button class="email-signup-btn" value="Submit" name="submitemail" id="submitemail">Submit</button></div>
<div class="clear">&nbsp;</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:52:47.673

如果需要客户端验证，我会在未启用 javascript 的情况下进行后备 -

```
<script type="javascript">
    /* Wire up form submittal */
</script>
<noscript>
    <p>JavaScript is required to use this form, please enable JavaScript in your browser!</p>
</noscript> 
```

看到这个 - [如何检测 JavaScript 是否被禁用？](https://stackoverflow.com/questions/121203/how-to-detect-if-javascript-is-disabled)

# grails - Grails 在 g:select 和服务中使用查询

> ID：14061315
> 
> 赞同：0
> 
> 时间：2012-12-27T21:06:46.197
> 
> 标签：grails, groovy, grails-orm

对 Grails 模型来说相当新，并且在为我的数据库事务使用服务时遇到了一些麻烦。

服务：

```
class ReportService {

    def dataSource
    def listDatatypeValues(Datatype dt) {
        def sql = new Sql(dataSource)
        def list = sql.rows (dt.statement)
        return list
    }
} 
```

控制器：

```
def run(Long id) {

    def reportInstance = Report.get(id)
    def listPromptValues = populatePrompts(reportInstance)

    if (!reportInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'report.label', default: 'Report'), id])            
        return
    }
    [reportInstance: reportInstance, listPromptValues: listPromptValues]
}

def populatePrompts(Report rp){
    //for a prompt in the report, go out and get it's values
    rp.prompts.each {
        List list = reportService.listDatatypeValues(it.datatype)
    }
} 
```

查看片段：

```
<g:if test="${reportInstance?.prompts}">
    <li class="fieldcontain">
    <g:each var="prompt" in="${reportInstance.prompts}">
    <g:if test="${prompt.datatype.type == 'DropDown'}">
    <g:select id="prompt.name" from="${listPromptValues}" name="prompt.name" value="" noSelection="['':'']"/>
        </g:if>
    </g:each>
    </li>
</g:if> 
```

我们有一个报表对象，其中包含提示，而提示又包含数据类型。对于任何给定的报告，当它在 UI 上被拉起时，它会给出报告的详细信息，然后列出给出提示的提示值。问题是当前设置将对象引用列为提示值，而不是从服务返回的值列表。

例如，报告 1 有 2 个提示，即开始期限代码和结束期限代码。它们都使用术语代码作为数据类型，因为它是相同的 SQL 查询，从 listDataTypeValues 返回的列表将是存储在数据库中的 70 多个术语代码的列表。

有什么想法或方向吗？

我试着跟随[这个](http://grails.1312388.n4.nabble.com/How-to-Populate-g-select-With-a-Query-td2996222.html)，但我无法让它工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:50:02.330

您的`populatePrompts`函数没有返回有意义的值。如果您使用`collectMany`而不是`each`表达式的值进行迭代，则将是您查询的所有结果的串联。尝试这样的事情：

```
def populatePrompts(Report rp){
    rp.prompts.collectMany {
        reportService.listDatatypeValues(it.datatype)
    } //.unique()
} 
```

您可能还想对结果调用 unique 以避免`g:select`输入重复。

# linux - Linux 输出中的点

> ID：14061321
> 
> 赞同：0
> 
> 时间：2012-12-27T21:07:13.547
> 
> 标签：linux, bash

我从正在运行的应用程序收到错误消息

错误如下所示：![在此处输入图像描述](../Images/cc73a1ed29a7b9e1fe1cc5fda3ca42f1.png)

我很好奇 /usr/local/bin/../../etc/ 中的点是什么意思

这是我在编写 bash 脚本时可以使用的快捷方式吗？

我知道这可能是一个 Linux 菜鸟问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:09:41.700

```
cd /usr/local/bin/../../etc/yarbu/conf/default 
```

简直就是

```
cd /usr/etc/yarbu/conf/default 
```

而且那个目录不存在。它可能位于`/etc/yarbu/conf/default`这就是为什么它没有找到它`/usr/etc...`

`..`是父目录`.`的快捷方式，是当前目录的快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:10:21.273

出色地...

```
. means same directory
.. means parent directory
~ means home
/ means root 
```

所以，

```
/usr/local/bin/../../etc/yarbu/conf/default 
```

是相同的，

```
/usr/etc/yarbu/conf/default 
```

# php - 如何在mysql表中显示每个父母的孩子

> ID：14061323
> 
> 赞同：0
> 
> 时间：2012-12-27T21:07:37.883
> 
> 标签：php, mysql, sql

如何创建一个查询来显示每个父母及其孩子，而不是先显示所有父母然后再显示孩子。例如，现在，mySQL 表显示所有 COMPUTERS，然后是 DRIVES。我希望它为每台计算机显示，显示与该计算机关联的驱动器。IE：

```
 COMPUTER   DRIVE        PID         ID 
 dell                    1 
 apple                   2
 apple                   3
 hp                      4
 hp                      5
            WD300FV                  1
            WD440GB                  1
            WD55                     2
            WD44X                    2... 
```

我希望它像这样显示，其中每台计算机都显示其驱动器列表：

```
 COMPUTER   DRIVE        PID     
 dell                    1 
            WD300FV      1
            WD440GB      1
 apple                   2
            WD55         2
            WD44X        2
 apple                   3..... 
```

其中计算机具有父 ID，驱动器具有 ID。

当我执行此查询`SELECT * FROM table`时，它不会像我希望的那样创建行。我希望显示计算机的每一行都在计算机行下方显示驱动器列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:25:07.260

我会质疑你的表结构。我认为计算机和驱动器应该位于两个独立但相关的表中，因为它们是两个不同的东西，可能具有自己的属性。

电脑桌：

```
computer_id |  manufacturer
---------------------------
1           |  dell
2           |  apple
3           |  hp 
```

computer_id 将是自动递增的主键

驱动表：

```
drive_id   |  computer_id  |  name
-----------------------------------
1          |  1            | WD300FV
2          |  1            | WD440GB
3          |  2            | WD55
4          |  2            | WD44X
5          |  3            | XYZ 
```

drive_id 将是自动递增的主键

computer_id 将具有索引（如果您使用 InnoDB 并希望强制与计算机表建立关系，则可能还有外键约束）

然后你会这样查询：

```
SELECT c.computer_id, c.manufacturer, d.drive_id, d.name
FROM computer AS c
INNER JOIN drive AS d ON c.computer_id = d.computer_id
ORDER BY c.computer_id ASC, d.drive_id ASC 
```

如果出于某种原因，您不想像我建议的那样使用规范化结构，而是使用类似于您已经拥有的非规范化结构，您至少应该考虑以更多的方式进行非规范化理智的方式。`pid`如果您只是像这样构建表格，则根本不需要您的逻辑：

```
computer  |  drive
------------------
dell      | WD300FV
dell      | WD4440GB
apple     | WD55
apple     | WD44X
hp        | XYZ 
```

您只是增加了一个不需要存在的复杂性级别。您可以轻松地按“计算机”对结果进行排序：

```
SELECT computer, drive FROM table
ORDER BY computer ASC, drive ASC 
```

完全没有架构更改，您可以像这样查询：

```
SELECT computer, drive, CASE WHEN pid = '' THEN id ELSE pid END as `sort_id`
FROM table
ORDER BY `sort_id` ASC, drive ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:36:41.390

要按您需要的顺序获取行，您可以使用以下命令：

```
select
  computer,
  drive,
  coalesce(pid, id)
from
  your_table
order by
  coalesce(pid, id), computer is null, drive is not null 
```

这将按`pid`或（如果`pid`为空）按`id`对行进行排序，并将计算机不为空的行放在顶部（因为`computer is null`当它为假时评估为 0，当它为真时评估为 1），然后将驱动器为空的行放在顶部.

（当然，如果计算机和驱动不能同时为空，你可以通过 just 来订购`computer is null`）

你也可以考虑这个 order by 子句：

```
order by coalesce(pid, id), computer is null, computer, drive is not null, drive 
```

# ruby - 准备在关闭的数据库上调用 rails rspec

> ID：14061325
> 
> 赞同：3
> 
> 时间：2012-12-27T21:07:47.973
> 
> 标签：ruby, ruby-on-rails-3, tdd, rspec-rails, spork

我正在尝试通过 rspec 将 BDD 集成到我的 rails 应用程序中。我正在使用防护和 spork-rails 来加快监控过程。我收到此错误：

```
An error occurred in an after hook 
ActiveRecord::StatementInvalid: ArgumentError: prepare called on a closed database: 
rollback transaction occurred at /Users/davidhahn/.rvm/gems/ruby-1.9.3-p286/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in initialize 
```

我跑了`rake db:test:prepare`，它运行没有任何错误。由于我使用的是 sqlite，因此我检查以确保该`user_man_test.sqlite`文件位于`db/`. 我的测试只是一个简单的集成测试：

```
require 'spec_helper'

describe "Authentication" do
  describe "Login Page" do                                                 
    it "should have the h1 'Welcome to User Management'" do                
      visit '/log_in'                                                      
      page.should have_selector('h1', text: 'Welcome to User Management')  
    end                                                                    
  end                                                                      

  describe "Login" do                                                      
    before { visit '/log_in' }                                             

    describe "with invalid information" do                                 
      before { click_button "Login" }                                      

      it { should have_selector('h1', text: 'Welcome to User Management') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }
    end                                                                    
  end                                                                      
end 
```

我的 spec_helper.rb 看起来像：

```
require 'rubygems' 
require 'spork'
Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
  RSpec.configure do |config|
    config.fixture_path = "#{::Rails.root}/spec/fixtures"
    config.use_transactional_fixtures = true
    config.infer_base_class_for_anonymous_controllers = false
    config.order = "random"
  end
end
Spork.each_run do
  # This code will be run each time you run your specs.
end 
```

~
谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T14:31:33.380

我建议您不要花费数小时尝试正确配置 spork ，而是查看[Zeus](https://github.com/burke/zeus)。很抱歉，如果这不能完全回答您的问题，但是我花了将近一年的时间使用 spork，每次添加新的测试 gem 时都在配置时遇到了很多麻烦，当我进行切换时，一切都神奇地起作用了（并且以我的经验，Zeus 的表现比 Spork 好得多）。

# html - 如何根据徽标的高度使高度自动包装器扩展

> ID：14061328
> 
> 赞同：0
> 
> 时间：2012-12-27T21:08:02.433
> 
> 标签：html, css, height, expand

我遇到了一个问题，我想让包装器的高度根据徽标的高度展开。我知道谷歌有很多这样的问题，但没有一个真正适合我。

我试过 height: auto !important 方法。

我也尝试过 min-height 并且它在大多数情况下都有效，**但是当我将高度设置为 auto 时它对我不起作用。**

这是我的CSS：

```
.header {  
width: 100%; 
height: auto;
min-height: 80px; 
position: relative;
background: red; }

.logo { float: left; border: 0; } 
```

HTML：

```
<div class="header">
  <img src="logo.png" class="logo"/>
  <br class="clear" />
</div> 
```

请注意，我也试过没有浮动。如果这个问题很容易解决，我提前道歉。我做了我的研究，但没有一个对我有用，或者我发现的任何人都处于我的境地。我会很感激一些帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T00:23:40.080

由于你的 logo 是 float:left，你需要使用所谓的 clearfix，所有使用 hight 或 min-height 的操作都是错误的方式。clearfix 有很多种。既然你有`<br class="clear" />`，你只需要添加`.clear { clear: both; }`到你的样式表，但这不是最好的方法。这是更好的一个：

CSS：

```
.header {  
    width: 100%; 
    background: red; 
}

.logo { 
    float: left;
}

.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
} 
```

[http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

HTML：

```
<div class="header clearfix">
  <img src="logo.png" class="logo" />
</div> 
```

您可以在此处查看工作示例：http: [//jsfiddle.net/ZCXVr/1/](http://jsfiddle.net/ZCXVr/1/) PS 提供标题`overflow: hidden`也是一种方法，但我不建议使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:18:05.880

尝试给出标题`overflow: hidden`

# c++ - 用于粒子模拟的并行化 OpenMP 代码性能不佳

> ID：14061330
> 
> 赞同：2
> 
> 时间：2012-12-27T21:08:33.747
> 
> 标签：c++, parallel-processing, openmp

我正在尝试并行化用于基于粒子的模拟的代码，并且遇到基于 OpenMP 的方法的性能不佳。我的意思是：

*   使用 Linux 工具显示 CPU 使用率`top`，运行 CPU 的 OpenMP 线程的平均使用率为 50%。
*   随着线程数量的增加，加速收敛到大约 1.6 倍。收敛速度非常快，即我使用 2 个线程达到了 1.5 的加速。

以下伪代码说明了实现的所有并行区域的基本模板。请注意，在单个时间步中，正在执行以下所示方式的 5 个并行区域。基本上，作用在粒子上的力`i < N`是相邻粒子的几个场特性的函数`j < NN(i)`。

```
omp_set_num_threads(ncpu);

#pragma omp parallel shared( quite_a_large_amount_of_readonly_data, force )
{
   int i,j,N,NN;

   #pragma omp for 
    for( i=0; i<N; i++ ){             // Looping over all particles
       for ( j=0; j<NN(i); j++ ){     // Nested loop over all neighbors of i
          // No communtions between threads, atomic regions,
          // barriers whatsoever.
          force[i] += function(j);
       }
    }
} 
```

我正在尝试找出观察到的瓶颈的原因。我最初的天真猜测是：

如前所述，线程之间共享大量内存以进行只读访问。不同的线程很有可能同时尝试读取相同的内存位置。这会造成瓶颈吗？我应该让 OpenMP 分配私有副本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:17:35.320

有多大`N`，有多密集`NN(i)`？

您说没有共享，但`force[i]`可能在`force[i+1]`. 这就是所谓的[虚假共享](http://en.wikipedia.org/wiki/False_sharing)，可能非常有害。OpenMP 应该将事情一起批处理来弥补这一点，所以如果足够大，`N`我认为这不是你的问题。

如果`NN(i)`不是 CPU 密集型，您可能会遇到一个简单的内存瓶颈——在这种情况下，向其投入更多内核将无法解决任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:46:23.213

假设 force[i] 是 4 或 8 字节数据的普通数组，你肯定有错误的共享，毫无疑问。

假设 function(j) 是独立计算的，您可能需要执行以下操作：

```
 for( i=0; i<N; i+=STEP ){             // Looping over all particles
       for ( j=0; j<NN(i); j+=STEP ){     // Nested loop over all neighbors of i
          // No communtions between threads, atomic regions,
          // barriers whatsoever.
       calc_next(i, j);
       }
    }

void calc_next(int i, int j)
{
    int ii, jj;
    for(ii = 0; ii < STEP; ii++)
    {
        for(jj = 0; jj < STEP; jj++)
        {
            force[i+ii] = function(j+jj);
        }
    }
} 
```

这样一来，你在一个线程上计算一堆东西，在下一个线程上计算一堆东西，每束东西之间的距离足够远，你不会得到错误的共享。

如果您不能这样做，请尝试以其他方式将其拆分，从而导致每次计算更大的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:11:31.580

正如其他人所说，虚假分享`force`可能是一个原因。试试这个简单的方法，

```
#pragma omp for 
for( i=0; i<N; i++ ){
   int sum = force[i];
   for ( j=0; j<NN(i); j++ ){
      sum += function(j);
   }
   force[i] = sum;
} 
```

从技术上讲，`force[i] = sum`仍有可能进行虚假共享。但是，这不太可能发生，因为另一个线程将访问`force[i + N/omp_num_threads()*omp_thread_num()]`，这与`force[i]`.

如果可扩展性仍然很差，请尝试使用诸如 Intel Parallel Amplifier（或 VTune）之类的分析器来查看每个线程需要多少内存带宽。如果是这样，请在您的计算机中放置更多 DRAM :) 这将真正提高内存带宽。

# mysql - 插入带有 4 个表联合的查询

> ID：14061331
> 
> 赞同：0
> 
> 时间：2012-12-27T21:08:46.110
> 
> 标签：mysql, jointable

我有 5 张桌子：

=>帖子

ID

post_author

post_content

帖子标题

post_status

post_name

=>项目

ID

标题

类别

物品

=>条款

term_id //类别id

类别 //items.category

蛞蝓

=>term_taxonomy

term_taxonomy_id

term_id //类别id

taxonomy //分类名称

=>term_relationships

object_id // 帖子.ID

term_taxonomy_id

我认为查询应该是这样的：

* * *

插入 term_relationships (object_id,term_taxonomy_id) 从帖子 a、term_taxonomy b 中选择 a.ID、b.term_taxonomy_id，其中 terms.category = item.category

* * *

如何使用 4 个表联合进行插入查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:16:04.540

好的，你需要这样的东西：

```
INSERT INTO term_relationships
([object_id], term_taxonomy)
(SELECT a.[ID], b.term_taxonomy_id
FROM items i
INNER JOIN posts a
ON i.title = p.post_title
INNER JOIN terms t
ON i.category = t.category
INNER JOIN term_taxonomy b
ON b.term_id = i.category 
```

但是 - 我不知道你是否想要在你的表之间进行 INNER JOIN。您可能需要 OUTER JOIN 或 INNER 和 OUTER JOIN 的组合。如果不知道您希望数据如何组合，我*无法*知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:12:15.047

您需要使用 JOIN。*如果不知道*您想如何加入表格，就不可能完全回答您的问题。我建议看看[这个链接](http://blogs.msdn.com/b/spike/archive/2008/07/22/the-simplification-of-join-simple-example-of-how-t-sql-join-work.aspx?Redirected=true)

# c# - URI 中的特殊字符

> ID：14061338
> 
> 赞同：1
> 
> 时间：2012-12-27T21:09:45.737
> 
> 标签：c#, zip, uri

我有一个 zip 文件，我正在尝试读取其中的内容，在我需要读取一个名为`[Content_Types].xml`. 当我尝试创建一个新的 URI 时，它会尝试将括号转换为对 url 友好的内容，这会导致文件名不匹配。

我`System.IO.Packaging.Package`用来读取 zip 文件，当尝试使用`package.GetPart()`.

如何创建一个 URI 以保持括号完整，以便从包中读取文件？

为了澄清我在这里尝试做什么，Office Open XML 文件（.docx、.xlsx、.pptx 等）实际上是具有不同扩展名的 zip 文件。如果将具有这些扩展名之一的文件重命名为 .zip，则可以看到 Office 文件结构的内容。每个 Office Open XML 文件的根目录中包含的文件之一是一个名为“`[Content_Types].xml`我需要修改该特定文件”的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:14:35.437

有一个接受布尔 dontEscape 的重载 URI 构造函数，它应该防止括号被转义。 [类似的问题](https://stackoverflow.com/questions/4419001/prevent-c-sharp-from-encoding-brackets-in-query-string)

基于重新阅读更新的问题进行编辑：因此，从一些谷歌搜索来看，[Content_Types].xml 是一个将 zip 文件转换为“zip 包”的文件。巧合的是，`System.IO.Packaging.Package`仅适用于 zip 包（而非常规 zip 文件）。它也只编写 zip 包（总是包括 [Content_Types].xml）。我不认为您可以`System.IO.Packaging.Package`通过设计直接访问 [Content_Types].xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:39:48.703

那是不可能的。

根据[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)，诸如`[`和`]`之类的字符属于“不明智”类别，因为已知网关和其他传输代理会修改它们。

无论如何，[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)在这个主题上更加明确：

> 由 Internet 协议文字地址（版本 6
> [RFC3513] 或更高版本）标识的主机通过将 IP 文字
> 括在方括号（“[”和“]”）中来区分。 **这是URI 语法中****唯一允许使用方括号字符的地方。**

因此，您可以使用方括号的唯一方法是您所依赖的代码未能满足 RFC 规范。

我可能会尝试使用该`package.GetParts()`方法遍历这些部分并输出它们的 URI。看看你的特殊文件返回了什么会很有趣。

# javascript - 使用 javascript 的跨域请求

> ID：14061340
> 
> 赞同：0
> 
> 时间：2012-12-27T21:09:57.410
> 
> 标签：javascript, cross-domain

是否可以制作基于 javascript 的 Web 代理，其中用户输入的 url 由 javascript 直接获取而不去代理服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:26:33.857

除非 JavaScript 恰好在服务器上运行，否则您不会使用纯 JavaScript 来执行此操作。

您可以使用[Yahoo Pipes](http://pipes.yahoo.com/pipes/)之类的服务并通过 JSONP 调用获取页面。

# python - “类型错误：无法将'int'隐式转换为str”是什么意思？

> ID：14061342
> 
> 赞同：0
> 
> 时间：2012-12-27T21:10:06.257
> 
> 标签：python

```
def display_positive_indices(strlen):
    print()
    print(' ', end='')
    for i in range(strlen + 1):
        print(i, end='')
        if i != strlen:
            print(' ' * (4 - len(str(i))), end='')
    print() 
```

嗨，我是编程新手。这是我的代码。错误首先指向 main 函数。然后它在 main 中指向这个函数，然后它指向： `for i in range(strlen + 1)`并且它说`Type Error: Can't convert 'int' object to str implicitly`. 为什么会这样说？我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T21:13:53.340

如果您使用整数调用函数，则您的函数可以正常工作，例如：

```
In [499]: display_positive_indices(3)

 0   1   2   3 
```

但是当你用一个字符串调用它时，你会得到这个错误，解释器会告诉你更多信息：

```
In [500]: display_positive_indices('3')

 ---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-500-dd39f751056c> in <module>()
----> 1 display_positive_indices('3')

<ipython-input-495-ac7e32dd0c50> in display_positive_indices(strlen)
      2     print()
      3     print(' ', end='')
----> 4     for i in range(strlen + 1):
      5         print(i, end='')
      6         if i != strlen:

TypeError: Can't convert 'int' object to str implicitly 
```

问题是`strlen + 1`。您正在尝试将 a 添加`str`到`int`. 你会得到完全相同的错误：

```
In [501]: strlen = '3'

In [502]: strlen + 1
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-502-5a3ed0dba868> in <module>()
----> 1 strlen + 1

TypeError: Can't convert 'int' object to str implicitly 
```

在 Python 3 中，尝试向 a 添加一些东西是`str`通过尝试将其他东西隐式转换为 a 开始的`str`，并且正如错误所说，你不能用 a 来做到这一点`int`。

同时，为了将来参考，这里是如何调试这样的错误：

首先，您知道函数中的哪一行有错误。因此，请继续删除内容，直到错误消失。第一的：

```
def display_positive_indices(strlen):
    for i in range(strlen + 1):
        pass 
```

同样的错误。所以：

```
def display_positive_indices(strlen):
    range(strlen + 1) 
```

然后再次：

```
def display_positive_indices(strlen):
    strlen + 1 
```

和：

```
def display_positive_indices(strlen):
    strlen 
```

好的，最后一个成功了，所以问题出在`strlen + 1`. 其他一切都无关紧要。所以，你已经缩小了你必须弄清楚、询问和/或理解的范围。

最后，如果你想让我们弄清楚这个`main`函数出了什么问题，以及为什么它传递的是 a`str`而不是`int`你所期望的，你必须向我们展示这个函数。（在我的脑海中，我的第一个猜测是您正在使用`input`从用户那里获取长度，而不是转换它，可能是因为您阅读的是 Python 2 文档`input`而不是 Python 3 文档。但我会给这个猜测最多 20% 的机会是正确的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:09:08.423

由于您需要一个整数，因此您可以将其强制转换为您想要的类型，如果无法转换，您将收到 TypeError 或 ValueError：

```
...
strlen = int(strlen)
for i in range(strlen + 1):
    ... 
```

# ruby-on-rails - 是否可以在不同的数据类型中使用 more_like_this？

> ID：14061345
> 
> 赞同：2
> 
> 时间：2012-12-27T21:10:22.930
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails, sunspot-solr

[的文档`more_like_this`](https://github.com/sunspot/sunspot#more-like-this)显示了如何使用它来获取更多基于标准的相似类型的内容：

```
class Post < ActiveRecord::Base
  searchable do
    # The :more_like_this option must be set to true
    text :body, :more_like_this => true
  end
end

post = Post.first

results = Sunspot.more_like_this(post) do
  fields :body
  minimum_term_frequency 5
end 
```

我想知道是否可以返回不同数据类型的相关项目。例如，`Videos`与 相关/相似`Articles`。

我想这取决于`more_like_this`是按照“基于一组标准的更多与`Articles`此`Article`相似的事物”的方式运行，还是按照“基于一组标准的更多与此相似的事物`Article`”的方式运行。 ..

我的用例是，如果我正在显示`Article`, 并且我想在页面的一侧显示相关内容 - 可能是 other `Articles`、`Videos`同一类别或`Events`相关主题等的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T21:57:17.913

[http://sunspot.github.com/sunspot/docs/Sunspot.html#more_like_this-class_method](http://sunspot.github.com/sunspot/docs/Sunspot.html#more_like_this-class_method)

> + (Object) more_like_this(object, *types, &block) 启动 MoreLikeThis 搜索。MoreLikeThis 是一种特殊类型的搜索，它使用全文比较来查找相似的文档。要比较的`text`字段是设置为`:more_like_this`选项的字段`true`。默认情况下，more like this 返回与用于比较的对象具有相同类型的对象，但可以选择将类型列表传递给此方法以返回其他类型的相似文档。这仅适用于具有公共字段的类型。

例子：

```
 post = Post.first
  Sunspot.more_like_this(post, Post, Page) do
    fields :title, :body
    with(:updated_at).greater_than(1.month.ago)
    facet(:category_ids)
  end 
```

另见：[http ://sunspot.github.com/sunspot/docs/Sunspot/Query/MoreLikeThis.html](http://sunspot.github.com/sunspot/docs/Sunspot/Query/MoreLikeThis.html)

# regex - 正则表达式 - 匹配所有单词但仅匹配唯一单词一次

> ID：14061349
> 
> 赞同：11
> 
> 时间：2012-12-27T21:10:39.637
> 
> 标签：regex

是否可以使用正则表达式匹配所有单词但只匹配唯一单词一次？**我知道还有其他方法可以做到这一点，但是我很想知道使用正则表达式是否可以做到这一点。**

例如，我目前有以下表达式：

```
(\w+\b)(?!.*\1) 
```

和以下字符串：

```
glass shoes door window door glasses. window glasses 
```

在大多数情况下，该表达式有效并匹配以下单词：

```
shoes
door 
window
glasses 
```

这有两个问题：

1.  正在用“glass”在“glasses”上匹配子字符串，这是不正确的。

2.  “眼镜”和“眼镜”。应该匹配，但目前不匹配。

最后的比赛应该是：

```
shoes 
door 
window 
glasses 
glass 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T21:27:18.453

非常接近，刚刚阅读`\b`了负面的前瞻

```
/(\w+\b)(?!.*\1\b)/ 
```

在[Rubular上查看](http://rubular.com/r/LFzFUxUTC4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-17T08:58:19.523

对于在多行文本中搜索不同的单词，使用`[\s\S]`而不是`.`

```
(\b\w+\b)(?![\s\S]*\b\1\b) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-22T11:15:19.863

与[maček 的答案](https://stackoverflow.com/a/14061509/1944088)完全相同，但在反向引用之前有一个额外的 \b ，否则如果你有

`glass shoes door window door glasses. window glasses sunglasses`

你会错过眼镜的匹配，因为它在太阳镜这个词中找到。

`/(\w+\b)(?!.*\b\1\b)/`

# javascript - 在轮播滑块中显示照片

> ID：14061350
> 
> 赞同：2
> 
> 时间：2012-12-27T21:10:40.860
> 
> 标签：javascript, jquery, carousel, instagram

我正在尝试在 jquery 轮播中显示一些 instagram 照片，由于某种原因，这些照片以相反的顺序显示，并且所有照片都没有显示在轮播滑块中。

我使用的 JavaScript 如下：

```
function(data) {
    for (i=0; i<20; i++){
        $("#carousel").prepend("<li><a target='_blank' href='" + data.data[i].link + "'><img src '" + data.data[i].images.thumbnail.url + "'></img></a>");
    } 
} 
```

的HTML：

```
<ul id ="carousel" class="elasticslide-list">
<li></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:14:34.610

Prepend 会反转一些东西。

想想 a prepend b prepend c 等：

```
a -> ba -> cba -> dcba -> ... 
```

改为使用`append`。

至于丢失的图像，我的猜测是超过硬编码的 20 个。

尝试：

```
for (i = 0; i < data.data.length; ++i) 
```

此外，`i`应该在某处声明。希望它在更高的范围内声明，而不是隐含的全局。

这有点矫枉过正，但如果你愿意，你也可以使用 jQuery 的`each`：

```
$.each(data.data, function() {
    //"this" is now each of the data.data entries.
    //like this.images or this.link
}); 
```

* * *

编辑：看起来你在标签`src`上的属性缺少一个 = 。`img`

我也可能想设置`src`with DOM 操作，因为如果文件名中有引号（这可能不会发生），它可能无法正确转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T13:20:23.097

您可以尝试这种方法（参见[jsbin](https://jsbin.com/quyima/1/edit?html,js,output)示例），使用 [layerJS](http://layerjs.org)和[vue.js](https://vuejs.org/)，我使用来自 flicker 的图像，因为这不需要 api 密钥。

手势动作也很有效，您可以在它们之间进行不同类型的转换。

基本上，您添加一个**舞台**div 放置一个图层，并在图像之间添加任意数量的**帧。**

HTML 看起来像这样：

```
<div data-lj-type="stage">
    <div data-lj-type="layer" data-lj-default-frame="image1">
        <div data-lj-type="frame" data-lj-name="image1" data-lj-neighbors.b="image2" class="frame">
            <image src="img/1.jpg" />
        </div>
        <div data-lj-type="frame" data-lj-name="image2" data-lj-neighbors.b="image3" class="frame">
            <image src="img/2.jpg" />
        </div>
    </div>
</div> 
```

希望这可以在将来对您和其他人有所帮助。

免责声明：我在此处使用的 layerJS 开源库上工作。

# actionscript-3 - Spark TabBar 独特的选项卡

> ID：14061351
> 
> 赞同：0
> 
> 时间：2012-12-27T21:10:48.453
> 
> 标签：actionscript-3, apache-flex, adobe, mxml

我目前有以下设置（为简单起见进行了抽象）：

```
<s:TabBar id="extentTypeTabBar" dataProvider="{vs}"/>
<mx:ViewStack id="vs">
    <s:NavigatorContent id="firstTab" label="Action">
        <!--content-->
    </s:NavigatorContent>
    <s:NavigatorContent id="secondTab" label="Adventure">
        <!--content-->
    </s:NavigatorContent>
    <s:NavigatorContent id="thirdTab" label="Favorites">
        <!--content-->
    </s:NavigatorContent>
</mx:ViewStack> 
```

我希望thirdTab 有一个图像而不是一个标签（即一个星星或心脏的图像，而不是'Favorites' 这个词）。我尝试使用 NavigatorContent 上的“图标”属性，但无济于事。

我相信要实现这一点，我将不得不为 Spark TabBar 创建一个带有逻辑的自定义皮肤，因为我只想对一个选项卡进行唯一的皮肤设置，而不是所有选项卡。有没有人有如何做到这一点的例子？

谢谢！
J.P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:30:38.640

如果您使用对象的`icon`属性，这应该可以正常工作`NavigatorContent`。该`icon`属性的类型为`Class`，因此您必须为其提供表示嵌入图像或 FXG 对象的类。

以下是这两种方法的示例：

```
<s:NavigatorContent icon="@Embed('favorite_icon.png')" /> <!-- embedded icon -->
<s:NavigatorContent icon="{FxgAsset}" /> <!-- fxg asset --> 
```

为方便起见，我将图标放在了我项目的“默认包”中，只需更改图标的路径以匹配您图标的位置即可。我在第二个示例中使用的 FXG 资产可以位于项目中的任何位置。FXG 资产本质上是类，因此您无需指定路径（您的 IDE 应该像任何其他类一样找到它）。

请注意，还有其他几种嵌入图像的方法，它们都应该可以工作……我在这里展示的示例是最简单的:)

# wordpress - Wordpress 选择类别名称与标题相同的帖子

> ID：14061352
> 
> 赞同：0
> 
> 时间：2012-12-27T21:10:49.910
> 
> 标签：wordpress

所以，我创建了一个名为滑块的帖子类型，我使用此代码来检索它的帖子：

```
 query_posts(array('post_type'=>'slider',
                      'posts_per_page'=>'20'
                      ));

    //loop
    if(have_posts()) : 
        while (have_posts()) : the_post(); 
```

我在某处发现，此代码可以显示来自与页面标题同名的类别的所有帖子：

```
<?php query_posts('category_name='.get_the_title().'&post_status=publish,future');?>
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?> 
```

我怎样才能将这两者结合起来？我需要帖子滑块类型，这个幻灯片我已经划分了类别，所以我只需要获取以类别名称作为标题的滑块帖子类型。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:16:27.377

```
query_posts(array('post_type'=>'slider',
                  'posts_per_page'=>'20',
                  'category_name='.get_the_title()
            )); 
```

并检查完整的文档：

[功能参考/查询帖子](http://codex.wordpress.org/Function_Reference/query_posts)

# python - 从 python 调用 shell 命令

> ID：14061353
> 
> 赞同：-1
> 
> 时间：2012-12-27T21:11:13.070
> 
> 标签：python, shell, unix

我有一个等效的 shell 命令（如下所示），我试图在 linux 机器上使用 call 命令从 python 脚本“按原样”运行并遇到编译错误，除了调用 runt 这个命令之外，还有更好的方法吗？我哪里错了？

```
from subprocess import call

def main ():

#ssh -p 29418 company.com gerrit query --commit-message --files --current-patch-set status:open project:platform/vendor/company-proprietary/wlan branch:master |grep refs| awk -F ' ' {'print $2'} |tee refspecs.txt
    call (["ssh -p 29418 company.com gerrit query", "--commit-message", "--files", "--current-patch-set", "status:open project:platform/vendor/company-proprietary/wlan branch:master","|grep refs| awk -F ' ' {'print $2'} |tee refspecs.txt")]

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:14:36.100

您需要拆分`"ssh -p 29418 company.com gerrit query"`（手动进行，而不是使用`.split()`等）。

现在，您的调用`subprocess.call()`尝试执行整个字符串，而您的 PATH 中显然没有该名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:18:58.607

由于您正在设置一个非常严肃的管道，因此最简单的方法是使用 shell 执行命令。另外，请考虑使用[`check_call`](http://docs.python.org/2/library/subprocess.html#subprocess.check_call)，以便您知道是否有问题。当然`)]`最后应该是`])`修复编译错误：

```
from subprocess import check_call

def main ():
    check_call("ssh -p 29418 company.com gerrit query --commit-message --files --current-patch-set status:open project:platform/vendor/company-proprietary/wlan branch:master | grep refs | awk -F ' ' {'print $2'} | tee refspecs.txt", shell=True)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:27:00.587

```
from subprocess import check_call

with open("refspecs.txt", "wb") as file:
    check_call("ssh -p 29418 company.com "
        "gerrit query --commit-message --files --current-patch-set "
        "status:open project:platform/vendor/company-proprietary/wlan branch:master |"
        "grep refs |"
        "awk -F ' ' '{print $2}'",
               shell=True,   # need shell due to the pipes
               stdout=file)  # redirect to a file 
```

我已经删除`tee`以抑制标准输出。

注意：任何部分甚至整个命令都可以在 Python 中实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T21:16:30.723

您以错误的顺序使用了 ) 和 ] 来关闭通话。

```
call (["ssh -p 29418 company.com gerrit query", "--commit-message", "--files", "--current-patch-set", "status:open project:platform/vendor/company-proprietary/wlan branch:master","|grep refs| awk -F ' ' {'print $2'} |tee refspecs.txt"]) 
```

# facebook - 保持 Facebook 帖子从网站到 Facebook 的连续性

> ID：14061356
> 
> 赞同：1
> 
> 时间：2012-12-27T21:11:38.210
> 
> 标签：facebook, facebook-graph-api, post, facebook-like

我正在构建一个社交应用程序，用户将数据发布到网站上，这些数据保存在我们的数据库中。

这会在网站上创建一条记录，可搜索并创建网站的基本内容和功能（此时目的不相关）

当记录保存到我们的数据库时，我想“传播”并将这些数据发送到社交网络。目前，我正在孤立地看待 Facebook。

因此，我知道如何通过 Graph API 创建帖子并将此内容发布到用户时间线，或者实际上发布到与 APP/网站关联的业务页面。但我不确定如何维护，或者如果确实应该维护连续性。

我的意思是......如果用户在我的网站上创建了一条记录，然后网站/应用程序在我的业务页面上创建了一个帖子，并要求用户将其发布在他们的时间轴中，我该如何阻止这两个独立的帖子，而不是一个已共享的帖子？

我想实现：

```
User posts on website
    >
Website posts to Page
    >
Post on Page is "Shared" to users Timeline 
```

相对于：

```
User posts on website
    >
Website posts to Page
    >
Website posts an additional post to users Timeline 
```

我想这样做的原因是，在网站上，我希望能够通过跟踪首次进入我的网站时创建的初始帖子的 ID 来显示来自 Facebook 的分享、喜欢和评论。

还是我想重新发明轮子，应该只使用 Facebook 的评论插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:45:05.397

当您在页面上的 facebook 上创建帖子时，将返回的内容存储`post ID`在您的数据模型中。

据我所知，没有办法`share`直接通过 API 访问普通用户。如果您坚持以编程方式执行此操作而不为您的用户弹出任何对话框，您可以向用户页面发布帖子，该页面具有（开始）页面帖子和指向页面帖子的链接作为附件。这可能是为了防止滥用。

但是，如果您不介意依赖未记录且已弃用的端点，则可以使用旧的 sharer.php 端点，只要您有指向要共享的帖子的完全限定链接（您可以通过api）。这也将要求您的用户在其共享中输入任何适当的内容，然后单击“共享”。

端点是 `http://www.facebook.com/sharer.php`

`u`用url填写的参数调用它，所以

`http://www.facebook.com/sharer.php?u=[URL encoded URL of the post you wanted to call]`

您可以在任何 facebook 帖子中尝试此操作（转到帖子，复制 url，作为参数过去），它仍然有效（我刚刚尝试过），但不能保证。查看 Facebook API 的最佳答案[：“分享”已发布在页面墙上的帖子？](https://stackoverflow.com/questions/13149854/facebook-api-share-a-post-already-posted-on-a-pages-wall#13250197).

* * *

您仍然可以通过 访问该帖子 ID 的喜欢、评论等`Graph API`（并且您可以为您的用户提供帖子的直接链接）。根据建议缓存/更新它们并将它们显示在您自己的页面上。您基本上是在将您发布的帖子在 facebook 上发生的事情反映到您自己的网站上。

我会走这条路，特别是如果您计划扩展到其他服务。这样，您可以从您的平台转发到的多个服务中汇总显示统计信息/喜欢/等。这对用户的数据完整性（至少印象）也有好处：他们知道您的服务代表了他们所做的一切，以防他们的 facebook/etc 帐户发生任何事情。

如果他们担心 facebook/etc 删除他们的任何帖子，或者从 facebook/etc 未正确存储帖子/评论/等的任何问题中恢复，这可能尤其值得注意（例如，评论的最大长度，至少通过主 FB UI，以用户不可恢复的方式静默*丢弃*超过最大长度的任何内容）。

# ruby-on-rails-3 - Capistrano Deploy 要求输入 Git 的用户名，但在我输入之前移动到新行

> ID：14061358
> 
> 赞同：0
> 
> 时间：2012-12-27T21:11:44.530
> 
> 标签：ruby-on-rails-3, github, capistrano

当使用 Capistrano 部署我的 rail 3 应用程序时，它会进入 capistrano 执行此命令的步骤：

```
 * executing "if [ -d /var/www/appname/shared/cached-copy ]; then cd /var/www/dflabs1/shared/cached-copy && git fetch -q origin && git fetch --tags -q origi
n && git reset -q --hard d0a1373a3634935de1a75f377698ba53574fe580 && git clean -q -d -x -f; else git clone -q https://github.com/username/dflabs1.git /va
r/www/appname/shared/cached-copy && cd /var/www/appname/shared/cached-copy && git checkout -q -b deploy d0a1373a3634935de1a75f377698ba53574fe580; fi"
    servers: ["11.10.1.162"]
Password: 
    [11.10.1.162] executing command
 ** [11.10.1.162 :: out] Username for 'https://github.com': 
```

问题是，当它输出 "Username for 'https://github.com'" 时，光标会跳转到新行，而不让我输入用户名。如果我尝试在新行上输入用户名，则部署什么也不做。这发生在 Ubuntu 12.04 桌面到 Ubuntu 12.04 服务器上。

我尝试向 deploy.rb 添加 'set :scm_username' 选项，但没有效果。我在 Ubuntu 终端和 Aptana 内的终端视图中进行了尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:29:42.297

尝试将部署服务器的 SSH 密钥导入 GitHub。

您可以在此处执行此操作：[SSH 密钥](https://github.com/settings/ssh)。您可以在此处找到 SSH 密钥 (Github) 的教程：[生成 SSH 密钥](https://help.github.com/articles/generating-ssh-keys)

[编辑] 实际上我只是自己做了并检查了输出。

您确定您`set :repository, "git@github.com:[GitHub-User]/[GitHub-Repository-Name].git"`在 deploy.rb 中正确设置了吗？

因为你的

```
else git clone -q https://github.com/username/dflabs1.git 
```

看起来像

```
else git clone -q git@github.com:[GitHub-User]/[GitHub-Repository-Name].git 
```

# css - CSS 样式不适用于容器 div

> ID：14061360
> 
> 赞同：2
> 
> 时间：2012-12-27T21:11:54.647
> 
> 标签：css, html, styles, containers

CSS 样式（据我所知）适用于除容器 div 之外的所有元素。我无法让它工作，我已经尝试了一切。它应该具有宽度和高度以及黑色背景色。这是不适用的代码：

```
#container {
    width: 588px;
    height: 617px;
    background-color:#000;
    margin: auto;    
} 
```

代码似乎是正确的。CSS 和 HTML 都通过了 w3c 验证器。

请帮忙，我一无所知。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T21:14:50.383

现在，查看页面的 html，您已将容器标记设置为一个类。您需要将其设置为 div id，或将其更改为 css 中的类。

所以在上面的代码中，只需将 # 更改为 a 。（句号）在容器前

```
.container {   /* replaced # with a period */
    width: 588px;
    height: 617px;
    background-color:#000;
    margin: auto;    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:15:20.203

你的容器是一个`class`而不是一个`id`

# opencv - 捕获机器可读区域的算法

> ID：14061361
> 
> 赞同：3
> 
> 时间：2012-12-27T21:11:55.347
> 
> 标签：opencv, computer-vision, object-detection

什么方法适合从文件照片中捕获（检测）[机读区](http://en.wikipedia.org/wiki/Machine_Readable_Travel_Document)？我正在考虑级联分类器（例如 Viola-Jones），但用它来解决这个问题似乎有点奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:17:48.463

如果您知道您将在护照中查找文本，为什么不先尝试在其上查找护照模型点。使用 ASM/AAM (Active shape model, Active Appearance Model) 技术匹配护照模板。获得护照位置信息后，您可以剪下您感兴趣的区域。但这需要一些时间来实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T17:51:03.600

将此[方法](http://www.pyimagesearch.com/2015/11/30/detecting-machine-readable-zones-in-passport-images/)视为一个很好的起点：

*   [黑色礼帽](https://en.wikipedia.org/wiki/Top-hat_transform)后跟一个[水平衍生物](https://en.wikipedia.org/wiki/Edge_detection)突出了长排字符。
*   [形态闭合](https://en.wikipedia.org/wiki/Closing_(morphology))操作将附近的字符和字符行合并成一个大块。
*   可选的[腐蚀](https://en.wikipedia.org/wiki/Erosion_(morphology))操作去除小斑点。
*   [Otsu 阈值](https://en.wikipedia.org/wiki/Otsu%27s_method)化，然后进行[轮廓检测](https://ru.wikipedia.org/wiki/Marching_squares)并过滤掉明显太小、太圆或位于错误位置的轮廓将为您提供少量可能的 MRZ 位置
*   最后，计算你找到的位置的[边界框，看看你是否可以成功地对它们进行 OCR。](https://en.wikipedia.org/wiki/Minimum_bounding_box_algorithms)

它可能不是解决问题的最有效方法，但它非常强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:55:37.073

更好的方法是使用投影轮廓方法。投影轮廓方法基于以下思想：

为您的黑白输入文档中的每一行创建一个数组 A。现在将 A[i] 设置为原始图像第 i 行中的黑色像素数。

（您还可以通过考虑原始图像中的列而不是行来创建*垂直投影配置文件。）*

现在数组 A 是文档的投影行/列直方图，检测机读区的问题可以通过检查 A 直方图中的谷值来解决。

然而，这个问题并没有完全解决，所以有很多变化和改进。这里有一些额外的文档：

*   Google Scholar 中的投影配置文件：[http ://scholar.google.com/scholar?q=projection+profile+method](http://scholar.google.com/scholar?q=projection+profile+method)
*   Tesseract-ocr，一个很棒的开源 OCR 库：[https ://code.google.com/p/tesseract-ocr/](https://code.google.com/p/tesseract-ocr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T14:53:33.247

您可能要考虑使用[笔画宽度变换](http://www.math.tau.ac.il/%7Eturkel/imagepapers/text_detection.pdf)。
您可以按照[这些提示](https://stackoverflow.com/q/11116199/1714410)来实施它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T22:04:15.787

Viola & Jones 的类似 Haar 的特征会生成许多（许多（许多））特征来尝试描述一个对象，并且在规模等方面更加稳健。他们的方法是解决难题的独特方法。

但是，在这里，您对问题有很多限制，类似的事情似乎有点矫枉过正。我想说的是评估现成的标准 OCR 工具，看看它们能带给你什么，而不是“尽早优化”。相信你会感到惊喜。

PS：
您需要预处理图像以隔离白色背景上的字符。这可以很容易地完成，并将显着帮助 OCR 算法。

# javascript - jQuery Supersized：如何使用从 LI 创建的数组？

> ID：14061362
> 
> 赞同：0
> 
> 时间：2012-12-27T21:11:54.283
> 
> 标签：javascript, jquery

我正在使用 Jquery Supersized 插件，并且想要一种更好的方法来创建使用的图像列表。

我在这里发现了同样的问题[jQuery Supersized: Load images from LI](https://stackoverflow.com/questions/10394456/jquery-supersized-load-images-from-li)但我在实现解决方案时遇到了麻烦。

我有一个带有这样图像名称的 UL：

```
<ul id="slide_list">
<li><div class="slide_src">pic1.jpg</div>
<div class="slide_head">head 1</div></li>

<li><div class="slide_src">pic2.jpg</div>
<div class="slide_head">head 2</div></li>

<li><div class="slide_src">pic3.jpg</div>
<div class="slide_head">head 3</div></li>

</ul> 
```

然后我使用提供的代码 jfriend00 从此列表中创建一个数组：

```
var slides = [];           
$("ul .image").each(function() {
    var this$ = $(this);
    var obj = {};
    obj.image = this$.text();
    obj.title = this$.nextAll(".slide_src").text();
    obj.thumb = this$.nextAll(".slide_head").text();
    slides.push(obj);
});​​​​​​​​​​​​​​​ 
```

我的问题是，当我尝试在超大脚本中使用这个幻灯片数组时，它给了我一个错误“'幻灯片'未定义”

我的超大代码如下所示：

```
jQuery(function($){
    $.supersized({

        //Functionality
        slideshow               :   1,      //Slideshow on/off
        autoplay                :   1,      //Slideshow starts playing automatically
        start_slide             :   1,      //Start slide (0 is random)
        random                  :   0,      //Randomize slide order (Ignores start slide)
        slide_interval          :   5000,   //Length between transitions

        //Components
        navigation              :   0,      //Slideshow controls on/off
        thumbnail_navigation    :   0,      //Thumbnail navigation
        slide_counter           :   0,      //Display slide numbers
        slide_captions          :   0,      //Slide caption (Pull from "title" in slides array)
        slides                  : slides
    }); 
}); 
```

（为简洁起见，我删除了一些超大的选项代码）。

在控制台中显示幻灯片数组的内容向我展示了
`[object Object],[object Object],[object Object]` ，所以我知道我做错了什么......

如果我使用这个： `slidesDisp = JSON.stringify(slides)`

然后数组在控制台中完美显示， `[{"image":"pic1.jpg","title":"head 1"},{"image":"pic2.jpg","title":"head 2"},{"image":"pic3.jpg","title":"head 3"}]` 但是当我在超大脚本中使用它时，什么也没有发生

`slides: slidesDisp`

对我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:24:21.677

您的 HTML 与您的 javascript 不匹配，您没有`.image`类，并确保您没有在不同的 DOM 就绪范围内初始化超大插件：

```
$(function() {

    var slides = [];    

    $("ul .slide_src").each(function() {
        var $this = $(this);
        var obj = {};
        obj.image = $this.text();
        obj.title = $this.next(".slide_head").text();
        slides.push(obj);
    });​​​​​​​​​​​​​​​

    $.supersized({
        // ...........other options
        slides                  : slides
    });
}); 
```

# asp.net-mvc - ASP.NET MVC 唯一 url 路由

> ID：14061365
> 
> 赞同：1
> 
> 时间：2012-12-27T21:12:08.440
> 
> 标签：asp.net-mvc, routing

因此，我已经阅读了有关 MVC 路由的教程和书籍，并在我的项目中使用它，并且对如何使用它来完成我想要用它完成的事情有了相当深刻的理解。

但是，我遇到了一些我还不太清楚的事情。

我想要完成的是每个客户端的唯一 URL，它看起来不像“http://mysite.com/client/1”。这个 url 会将浏览器带到客户端控制器，索引操作，ClientId = 1 ......显然。

我想做的是有一个像“http://mysite.com/Acme”这样的 URL，它会进行数据库查找以确定哪个客户端具有唯一的名称“Acme”，然后将请求重定向到客户端控制器，索引视图并将 ClientId 设置为客户端上名为“Acme”的任何内容。

默认路由一直在抓，处理不了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:19:21.590

我建议使用[全局操作过滤器](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcglobalanddynamicactionfilters_topic2.aspx)来完成此操作，或者您可以创建一个带有静态路径的路由，该路径将路由到您的查找控制器（例如，/lookup/{companyname} 将路由到您的数据库查找控制器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:20:18.843

“http://www.mysite.com/Clients/{ClientName}”怎么样

```
routes.MapRoute(null, "Clients/{ClientName}", new{controller = "Clients", action = "Index"};

public class ClientsController : Controller
{
    public ActionResult Index(string clientName)
    {
        var id = Db.GetClientIdBy(clientName);

        // do your redirect...
    }
} 
```

还是我错过了重点？

# matrix-multiplication - 具有整数值的矩阵数

> ID：14061367
> 
> 赞同：0
> 
> 时间：2012-12-27T21:12:24.073
> 
> 标签：matrix-multiplication, counting

我必须在左上角的条目中找到包含 1 的 NXM 矩阵的数量，所有条目都是整数值，相邻的条目最多相差 1，知道 N 最多为 5，M 可以达到 10^9。显然回溯算法不够快，我认为可以使用矩阵求幂来解决这个问题，但我对这一点没有任何想法。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:14:17.450

每一行都采用以下形式：

```
x (y=x+1/x/x-1) (z=y+1/y/y-1) ... 
```

x 的值并不重要，因此（对于 N = 5）每行有 3^4 = 81 种可能性。

从这里开始，您编写一个简单的程序来确定当前行中这 81 种可能性中的每一种在下一行中出现的频率。

从那里你应该能够找出一个公式，如果有一个简单的公式，否则你有一个 O(10^9) 算法，这至少比你开始的更好。

“最多”和“可以达到”确实与算法有点混乱。

# php - 我将如何允许用户使用 PHP 搜索 MySql 数据库

> ID：14061369
> 
> 赞同：-2
> 
> 时间：2012-12-27T21:12:37.307
> 
> 标签：php, mysql, sql, mysqli, search-engine

我看过谷歌，雅虎，必应我使用了这些关键字

```
allow people to search my database
allow people to search my database PhP,MySql
allow people to search my database PhP,MySql/MySQLi
Php,MySql Database Search script 
```

还有更多的关键词可以为我指明 PHP、MySQL 数据库搜索的正确方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:15:38.353

在我的网站上，我编写了这个脚本，它将搜索数据库并显示结果以及分页： http:
[//phpsnips.com/94/Search-Database#.UNy6HddQC0w](http://phpsnips.com/94/Search-Database#.UNy6HddQC0w)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:43:09.017

您必须创建一个允许人们搜索数据库的界面——这意味着一个 HTML 表单将由一些 PHP 脚本处理，该脚本将查询数据库，然后返回/显示结果。

# sql - SQL将dirty_name从Full_Name替换为standard_Name

> ID：14061378
> 
> 赞同：0
> 
> 时间：2012-12-27T21:13:32.160
> 
> 标签：sql, join, replace, left-join, union

我想从学生的名字中删除 dity_name 并将其替换为 Standard_Name。

实际上我有一个名为“Name_Lookup_Table”的查找表，其中包含字段 Standard_name 和 dirty_name

在查询的这一部分中，我从学生名字的循环表中找到 Dirty_Name。 `tas.Student_First_Name like '% '+nlt.Dirty_Name`

现在我想用 student_first_name 中的standard_name 替换这个dirty_name

我该怎么做？

我正在尝试这个，但标准名称不适合提取它的正确位置

```
SELECT Student_First_Name
    ,concat(LEFT(Student_First_Name , LEN(Student_First_Name)-LEN(nlt.Dirty_Name)),nlt.Standard_Name)
    , nlt.Dirty_Name
    , nlt.Standard_Name

FROM Transformed_All_Student tas
        LEFT JOIN Name_Lookup_Table nlt
                    ON tas.Student_First_Name like '% '+nlt.Dirty_Name
WHERE tas.Student_First_Name like '% '+nlt.Dirty_Name

UNION

   SELECT Student_First_Name
 ,concat(nlt.Standard_Name,LEFT(Student_First_Name , LEN(Student_First_Name)-LEN(nlt.Dirty_Name)))
         , nlt.Dirty_Name
        , nlt.Standard_Name
    FROM Transformed_All_Student tas 
            LEFT JOIN Name_Lookup_Table nlt 
                    ON tas.Student_First_Name like nlt.Dirty_Name+' % '

WHERE tas.Student_First_Name like nlt.Dirty_Name+' % '

    UNION

SELECT Student_First_Name
    ,concat(LEFT(Student_First_Name , LEN(Student_First_Name)-LEN(nlt.Dirty_Name)),nlt.Standard_Name)        
    , nlt.Dirty_Name
    , nlt.Standard_Name

FROM Transformed_All_Student tas 
        LEFT JOIN Name_Lookup_Table nlt 
            ON tas.Student_First_Name like '% '+nlt.Dirty_Name+' % '

WHERE tas.Student_First_Name like '% '+nlt.Dirty_Name+' %' 
```

来自循环表的 ps Dirty_name 和 Standard_name 可以是可变长度

输出：

```
Full_Name             Replaced_Name        Dirty_Name     Standard_Name
1\. Abdul              Adul                 Abdul          Adul
2\. Mouhammad Saroor   MouhammMohammad      Mouhammad      Mohammad
3\. Rashid             Rasheed              Rashid         Rasheed
4\. Salim              Saleem               Salim          Saleem
5\. Sh. Yaseen         Sh. YasSheikh        Sh.            Sheikh 
```

第 2 行和第 4 行的输出不正确。在第二行中，replaced_Name 应该是 Mohammad Saroor，在第 4 行中，replaced_Name 应该是 Sheikh Yaseen：S

replace_name 来自查询： `concat(LEFT(Student_First_Name , LEN(Student_First_Name)-LEN(nlt.Dirty_Name)),nlt.Standard_Name)`

# javascript - 如何更改 Three.js 中的相机类型？

> ID：14061380
> 
> 赞同：3
> 
> 时间：2012-12-27T21:13:38.753
> 
> 标签：javascript, webgl, three.js

我在页面上提供了两个相机（透视和正交）的下拉列表。现在我的三个场景正在使用透视相机。但是根据下拉列表中的选择，如果我在下拉列表中选择透视，我的相机应该更改为“正交”并变为透视。我怎么能做到这一点？请帮我。

有关详细代码，这里是 Jsfiddle 链接：http: [//jsfiddle.net/sagh0900/7Anag/9/](http://jsfiddle.net/sagh0900/7Anag/9/)

```
camera = new THREE.PerspectiveCamera( 45, width / height, 0.1, 1000 );
camera.position.y = 0;
camera.position.z = 40;
camera.lookAt(new THREE.Vector3(0, 0, 0));  
scene = new THREE.Scene();
scene.add(camera);
mesh = new THREE.Mesh(new THREE.Geometry());
scene.add(mesh); 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T21:43:42.683

我曾建议使用CombinedCamera。它不再存在。您可以使用@prisoner849 在这篇文章中建议的[三个 JS，组合相机文档和支持](https://stackoverflow.com/questions/47072699/three-js-combined-camera-documentation-and-support)

> 您可以使用一个变量，将一个或另一个摄像机分配给该变量。– 囚犯849

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T21:42:28.577

我认为您不能即时更改相机实例的相机类型，因为它们是单独的类，需要单独实例化。

但是，您可以创建两个相机实例，一个 Ortographic 和一个 Perspective 相机，并在您的 render() 调用中指定哪个相机处于活动状态。您需要在 UI 事件处理程序上更新相机的位置等，或者在渲染函数中克隆位置等。

不过，查看three.js 源代码，看起来将支持orto/perspective 模式切换的自定义相机类组合在一起并不难......不过，这将是一种黑客行为。

# system-design - 面试：系统/API设计

> ID：14061381
> 
> 赞同：12
> 
> 时间：2012-12-27T21:13:41.827
> 
> 标签：system-design

这个问题是在一家大型软件公司提出的。我想出了一个简单的解决方案，我想知道其他人对此解决方案的感受。

> 您应该为一个系统设计一个 API 和一个后端，该系统可以将电话号码分配给居住在城市中的人们。电话号码将从 111-111-1111 开始，到 999-999-9999 结束。API 应使客户（城市中的人）能够执行以下操作：
> 
> 1.  当客户请求电话号码时，它会为他们分配一个可用号码。
> 2.  有些客户可能想要花哨的数字，所以他们可以专门要求分配给他们的数字。如果请求的号码可用，则系统将其分配给他们，否则系统分配任何可用的号码。
> 
> 系统不必知道哪个号码分配给哪个客户。同一个客户端可能会发出连续的请求并为自己获得多个电话号码，但系统不会受到打扰。在任何时候，系统只知道分配了哪些电话号码，哪些电话号码是免费的。

从 111-111-1111 到 999-999-9999 的数字大致对应 80 亿个数字。假设内存不是约束，我可以想到以下两种方法（几乎相似）。

1.  维护一个长度为 80 亿的巨大布尔数组，并有一个`next`指向数组索引的指针（`next`初始化为零）。如果指向的值`next`不是空闲的，则转发`next`直到找到空闲的数字。当请求花哨的数字时，只需检查相应的索引位置是否空闲并返回数字即可。这种方法的缺点是，当以常规方式分配数字时，如果中间有一大块（比如 10 亿个）数字是通过花式分配分配的，那么`next`指针必须移动 10 亿次。

2.  为了克服之前设计中提到的困难，我们可以使用某种链接的 hashmap。我们维护一个双向链表（这取代了之前设计中的数组）和另一个与列表长度相同的数组，其中数组的每个元素都指向列表中的相应元素。因此，在常规方法中分配数字时，我们在链表中推进一个指针，并将节点标记为分配时（与前面的方法相同）。在分配花式数字时，我们可以直接在列表中找到与请求的特殊数字相对应的节点，首先索引到数组中，然后跟随指针。一旦节点被识别，

让我知道我是否走在正确的轨道上。请告诉我我遗漏的任何重要细节。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-14T16:01:36.097

你可以在回答这个问题时做得更好。

首先你应该设计你的 API。Icarus3 推荐的一款非常好：

```
string acquireNextAvailableNumber();
boolean acquireRequestedNumber(string special); 
```

如果可用，第二个返回 true（并保留数字），否则返回 false。

该问题没有具体说明您如何分配电话号码，因此请根据自己的需要进行分配。使第一个“下一个可用”请求返回“111-111-1111”，下一个“111-111-1112”等。这意味着您只需记住最后一个分配的号码，就可以记录通过“下一个”分配的所有号码。（您需要询问“111-111-1119”后面是“111-111-1120”还是“111-111-1121”，但无论如何你都应该问这种事情。无论如何，重要的是你可以知道最后分配的数字是多少。）

特殊要求，您需要单独存储。哈希表有效，但 BST 或简单的有序列表也有效。这取决于您想要在空间和速度之间进行何种权衡，以及可能请求特殊数字的频率。我将在剩下的部分中使用 BST（按数字排序），原因我会谈到。

那么，你如何编码呢？对于下一个分配的号码：

1.  查看最后分配的编号，然后依次查找下一个。
2.  检查该号码是否未被分配为特殊号码。您可以使用 BST 快速完成此操作，因为如果它存在，它将是 BST 中最低的条目。
3.  如果号码在“特殊号码”数据库中，则增加“分配号码”值（以包括该号码）并从特殊号码中删除条目。然后重复这个过程，直到你得到一个不在特殊数字中的数字。

请注意，此过程确保所有低于“下一个”分配的最后一个的“特殊号码”都不会出现在特殊号码数据库中。随着“最后分配的正常编号”的增加，它会吸收任何小于该分配的特殊编号，并将它们从表中删除。这确保了当我们询问序列中的下一个数字是否在特殊数字数据库中时，我们只需要查看最低的条目。

检查特殊号码很容易。如果它低于分配的最后一个“正常”数字，则它不可用。否则，您检查它是否存在于 BST 中。如果没有，则将其添加到 BST。

您不仅可以在 BST 中存储单个数字，还可以通过存储数字范围来优化此过程。如果分配的特殊数字是密集的，那么它会减少树中的空间量以及查找是否存在的访问次数。在测试期间查找“下一个”数字是否发现大小为 n 的范围，然后您可以立即将最高正常数字增加 n，而不必循环 n 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:49:35.543

首先，您没有对 API 进行原型设计。例如，如果我必须设计这些 API，我将发布 2 个 API。

```
string acquireNextAvailableNumber();
string acquireRequestedNumber(string special); 
```

其次，您需要决定如何实施它。代码驱动还是数据驱动？

您可以为所有这些数字维护哈希（它会消耗内存）并快速查询该数字的可用性。或者

您可以维护单个列表以仅存储分布式数字（更少的内存）。因此，每当请求到来时，您就开始在该列表中搜索 1 到 n 个数字（增加时间复杂度）。如果任何第一个（或请求的）号码不存在，那么您将其分配给客户端并将该条目添加到列表中。

由于有十亿个数字，您需要考虑空间和时间之间的权衡。

您还可以利用数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-26T20:54:32.520

为了增强以前的答案，任何 BST 都可能不够好，因为插入或删除会使其不平衡。一个平衡的 BST，例如红黑树，应该是一个不错的选择。因此，可以创建一棵红黑树并在开头填充以表示可用数字，并且每次分配都应从中删除一个元素。

*   `init(from, to)`- 可以在 O(n) 时间内完成，一个简单的实现将是 O(n log n)。但这是您服务器启动时的一次性初始化
*   `acquireNextAvailableNumber()`- 应该删除最小元素，时间成本 O(1)
*   `acquireRequestedNumber(special)`- 如果找到，应该进行搜索并删除元素，保证时间成本 O(log n)

在 Java 中，可以使用`TreeSet<String>`or `TreeSet<Integer>`，因为它是用红黑树实现的。

下一个问题可能是多个请求处理线程会访问您的 API，因此由于 Java 的 TreeSet 不是线程安全的，因此您应该在初始化时将其包装起来，如下所示：

```
TreeSet numbers = init(...);
SortedSet availableNumbers = Collections.synchronizedSortedSet(numbers); 
```

# c# - MVVM Light Apuntas Notas CategoryEditorViewModel 构造函数

> ID：14061393
> 
> 赞同：0
> 
> 时间：2012-12-27T21:14:58.543
> 
> 标签：c#, wpf, mvvm, light

我已经下载并运行了该示例并了解了大多数内容，除了我无法弄清楚 CategoryEditorViewModel 类从哪里获取它的构造函数参数。它是“ICategoryRepository categoryRepository”，我搜索了参考资料，但仍然无法理解创建视图模型时参数的传递方式和位置。我希望有人能帮我解答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:06:20.013

我也有同样的问题。

据我从线程中发现的

[具有多个参数的构造函数](https://stackoverflow.com/questions/6570109/unity-caliburn-micro-injection-constructor-with-multiple-parameters)

更多的是，在 bootstrap.cs 文件的 Apuntas Notas 项目中，接口 ICategoryRepository 注册到类 CategoryRepository。

因此，当属性`CategoryEditor`尝试通过以下方式解析 ViewModelLocator.cs 中的实例时

```
 public CategoryEditorViewModel CategoryEditor
    {
        get { return _bootStrapper.Container.Resolve<CategoryEditorViewModel>(); }
    } 
```

并且实例不存在，它尝试`CategoryEditorViewModel`使用其唯一需要`ICategoryRespository`接口的构造函数创建该类的对象。

正如我之前提到的，我们在 bootstrap.cs 文件中使用`CategoryRepository`类注册了这个接口。因此，它创建了一个 CategoryRepository 对象并将其传递给视图模型构造函数。

希望这可以消除您的疑问。

哦，如果你想知道如果你有多个构造函数会发生什么，你可以通过在 bootstrap.cs 中注册一个你喜欢的来注册一个类似的东西

```
Container.RegisterType<CategoryEditorViewModel>(new InjectionConstructor(typeof(ICategoryRepository), 5)); 
```

现在，如果您在 CategoryEditorViewModel 中有另一个构造函数还需要一个 int，则将调用该构造函数，而不是之前的构造函数。（传递一个 5 的 int 值非常愚蠢，但希望你能明白，你可以在那里为你的首选构造函数提供参数的类型，并确保它们也在引导容器中注册）

# objective-c - 为 NSTextField 加载 NSUserDefaults 时出错

> ID：14061398
> 
> 赞同：0
> 
> 时间：2012-12-27T21:15:16.250
> 
> 标签：objective-c, exception, nsuserdefaults, nstextfield

我有一堆用户默认值，我保存并加载到 applicationWillTerminate/awakeFromNib 上。见下文。

这些对象是复选框 (NSButton)、滑块 (NSSlider) 和一个文本字段 (NSTextfield)。

我在 OS X 上。复选框和滑块没有问题。

不幸的是，我在使用 NSTextfield 加载行时遇到问题：

```
[txtRemark setStringValue :[myDefaults stringForKey:kTxtRemark]]; 
```

由于某些原因，我得到了一个 SIBART，但我不知道为什么:( 禁用此行时没有错误。

我的应用程序引发异常，但我不知道如何找出问题所在。

一路下来的异常截图。

感谢帮助。

键定义如下：

![在此处输入图像描述](../Images/5df5e87e69ccc61d7da788c509cda3b5.png)

**像这样在**applicationWillTerminate上****保存**myDefaults**

 **```
 NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
  [myDefaults setObject :[isAppointment state]         forKey:kIsAppointment];
  [myDefaults setObject :[boxForEver    state]         forKey:kBoxForEver];
  [myDefaults setObject :[boxMakeSound  state]         forKey:kBoxMakeSound];
  [myDefaults setObject :[tickTackFlag  state]         forKey:kTickTackFlag];
  [myDefaults setObject :[slideHour     intValue]      forKey:kSlideHour];
  [myDefaults setObject :[slideMin      intValue]      forKey:kSlideMin];
  [myDefaults setObject :[slideSec      intValue]      forKey:kSlideSec];
  [myDefaults setObject :[startAuto     state]         forKey:kStartAuto];
  [myDefaults setObject :[txtRemark     stringValue]   forKey:kTxtRemark];
  [myDefaults setObject :[volumeAdjust  intValue]      forKey:kVolumeAdjust]; 
```

**像这样在**awakeFromNib上****加载**myDefaults**

 **```
 NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
   [isAppointment setState       :[myDefaults stringForKey:kIsAppointment]];
   [boxForEver    setState       :[myDefaults stringForKey:kBoxForEver]];
   [boxMakeSound  setState       :[myDefaults stringForKey:kBoxMakeSound]];
   [tickTackFlag  setState       :[myDefaults stringForKey:kTickTackFlag]];
   [slideHour     setIntValue    :[myDefaults stringForKey:kSlideHour]];
   [slideMin      setIntValue    :[myDefaults stringForKey:kSlideMin]];
   [slideSec      setIntValue    :[myDefaults stringForKey:kSlideSec]];
   [startAuto     setState       :[myDefaults stringForKey:kStartAuto]];
   [txtRemark     setStringValue :[myDefaults stringForKey:kTxtRemark]];
   [volumeAdjust  setIntValue    :[myDefaults stringForKey:kVolumeAdjust]]; 
```

![在此处输入图像描述](../Images/194521208dae165dc617438c62d01303.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:25:08.817

-stringForKey: 返回 nil，大概是该默认值实际上并未设置或注册。您可以通过断言消息来判断这一点：“无效参数不满足 aString ！= nil”****

# javascript - Alfresco Share 网络预览折叠问题

> ID：14061401
> 
> 赞同：0
> 
> 时间：2012-12-27T21:15:21.163
> 
> 标签：javascript, share, alfresco, document-preview

我正在使用 Alfresco 4.2b

我有一个问题。使用某些浏览器（现在是 Chrome）时，文档预览显示为折叠状态（它有文档，但高度为 38px）

包含嵌入字段的 div 在“样式”中的高度始终为 38px（如果我尝试在 firebug 中更改它，它会返回到 38px）

```
<div id="template_x002e_web-preview_x002e_document-details_x0023_default-full-window-div" style="position: absolute; left: 10px; top: 226px; width: 824px; height: 38px;" class="web-preview real">
    <embed type="application/x-shockwave-flash" src="/share/components/preview/WebPreviewer.swf" width="100%" height="100%" style="" id="WebPreviewer_template_x002e_web-preview_x002e_document-details_x0023_default" name="WebPreviewer_template_x002e_web-preview_x002e_document-details_x0023_default" quality="high" allowscriptaccess="sameDomain" allowfullscreen="true" wmode="transparent" flashvars="fileName=Minuta2.docx&amp;paging=true&amp;url=http%3A%2F%2Fintra.jaimeillanes.cl%2Fshare%2Fproxy%2Falfresco%2Fapi%2Fnode%2Fworkspace%2FSpacesStore%2F0a41947e-5054-4c6d-a861-caa7b0bb07e2%2Fcontent%2Fthumbnails%2Fwebpreview%3Fc%3Dforce%26lastModified%3Dwebpreview%253A1356554282043&amp;jsCallback=Alfresco.util.ComponentManager.get('template_x002e_web-preview_x002e_document-details_x0023_default').plugin.onWebPreviewerEvent&amp;jsLogger=Alfresco.util.ComponentManager.get('template_x002e_web-preview_x002e_document-details_x0023_default').plugin.onWebPreviewerLogging&amp;i18n_actualSize=Tama%C3%B1o%20actual&amp;i18n_fitPage=Adaptar%20a%20la%20p%C3%A1gina&amp;i18n_fitWidth=Adaptar%20a%20lo%20ancho&amp;i18n_fitHeight=Adaptar%20a%20lo%20alto&amp;i18n_fullscreen=Pantalla%20completa&amp;i18n_fullwindow=Maximizar&amp;i18n_fullwindow_escape=Pulse%20la%20tecla%20Esc%20para%20salir%20del%20modo%20de%20pantalla%20completa&amp;i18n_page=P%C3%A1gina&amp;i18n_pageOf=de&amp;show_fullscreen_button=true&amp;show_fullwindow_button=true&amp;disable_i18n_input_fix=false">
</div> 
```

我一直在寻找，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:54:16.133

我认为您需要在 Alfresco 中进行更深入的搜索。

检查在文档详细信息模板 (xml) 中注入的 flash 预览器 freemarker 模板。在那个 ftl 或对另一个的引用应该是您所指的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:14:21.627

请参阅[https://issues.alfresco.com/jira/browse/ALF-16914](https://issues.alfresco.com/jira/browse/ALF-16914)，这是您的问题吗？

建议您升级到最新的 4.2 版本，我相信它已修复。或者，您可以尝试删除`tablet.css`似乎触发问题的文件文件（但是请注意，这可能会产生意想不到的副作用！）。

# symfony - 使用 Symfony 2.1 和 Doctrine 2 对同一实体类型进行多个 COUNT 查询

> ID：14061403
> 
> 赞同：5
> 
> 时间：2012-12-27T21:15:32.950
> 
> 标签：symfony, count, doctrine

对于一个项目，我需要以 JSON 格式提供大量不同的数据。所有信息都将在同一页面上使用，因此一次调用将产生最少的开销。这些信息都涉及同一个数据库对象，并且在页面上都是必需的。它基本上是一个或多个特定类型的对象数量的集合（这些类型都是布尔值），我们需要知道很多不同的变体。我使用了下面的代码，但我的同事认为我把它放在 JSON 列表中的方式有​​点笨拙，代码可以有更好的性能。我该如何改进这段代码？

```
public function getContactsStatisticsAction()
{
    $response = new Response();
    $json = array();
    $em = $this->getDoctrine()->getEntityManager();
    $cr = $em->getRepository('BlaCoreBundle:Company');

    $json['numberOfCompanies'] = $cr->numberOfCompanies();
    $json['numberOfAccounts'] = $cr->numberOfCompanies(array("typeAccount" => true));
    $json['numberOfCompetitors'] = $cr->numberOfCompanies(array("typeCompetitor" => true));
    $json['numberOfSuppliers'] = $cr->numberOfCompanies(array("typeSupplier" => true));
    $json['numberOfOthers'] = $cr->numberOfCompanies(array("typeOther" => true));
    $json['numberOfUnassigned'] = $cr->numberOfCompanies(array("typeAccount" => false, "typeCompetitor" => false,"typeSupplier" => false,"typeOther" => false));

    $json['numberOfJustAccounts'] = $cr->numberOfCompanies(array("typeAccount" => true, "typeCompetitor" => false, "typeSupplier" => false));
    $json['numberOfJustCompetitors'] = $cr->numberOfCompanies(array("typeAccount" => false, "typeCompetitor" => false, "typeSupplier" => false));
    $json['numberOfJustSuppliers'] = $cr->numberOfCompanies(array("typeAccount" => false, "typeCompetitor" => false, "typeSupplier" => false));

    $json['numberOfCompetitorAndAccounts'] = $cr->numberOfCompanies(array("typeAccount" => true, "typeCompetitor" => true, "typeSupplier" => false));
    $json['numberOfCompetitorAndSuppliers'] = $cr->numberOfCompanies(array("typeAccount" => false, "typeCompetitor" => true, "typeSupplier" => true));
    $json['numberOfSupplierAndAccounts'] = $cr->numberOfCompanies(array("typeAccount" => true, "typeCompetitor" => false, "typeSupplier" => true));
    $json['numberOfCompaniesAndAccountsAndSuppliers'] = $cr->numberOfCompanies(array("typeAccount" => true, "typeCompetitor" => true, "typeSupplier" => true));

    $response->setContent(json_encode($json));
    return $response;
}

public function numberOfCompanies($filters = array())
{
    $qb = $this->getEntityManager()->createQueryBuilder();
    $qb->select('count(c.id)');
    $qb->from('BlaCoreBundle:Company', 'c');
    $sizeFilters = count ($filters);
    $keys = array_keys($filters);
    if($sizeFilters >= 1){
        $qb->where('c.' . $keys[0] . ' = ' . (int) $filters[$keys[0]]);
    }
    for($i = 1; $i < $sizeFilters; $i++){
        $qb->andWhere('c.' . $keys[$i] . ' = ' . (int) $filters[$keys[$i]]);
    }
    return $qb->getQuery()->getSingleScalarResult();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:37:34.717

你的同事是对的。您应该在单个查询中获得所有标量结果。您将以这种方式最小化连接数。

该主题已在[此答案](https://stackoverflow.com/a/12182982)中针对非 Doctrine 案例得到解决。

[这样的用户也在这里](https://stackoverflow.com/questions/10753255/doctrine2-query-builder-left-join-with-select)提出了这个有趣的问题，但没有人回答。

实际上我认为没有办法用**QueryBuilder**或**DQL**来解决这种查询。同样在**Doctrine2.2**的官方文档中也没有 a `JOIN`on a 的示例`SELECT`。

您可以尝试以下 DQL 查询：

```
return $this->getEntityManager()->createQuery(
  SELECT COUNT(c1) AS C1, COUNT(c2) AS C2, COUNT(c3) AS C3 FROM 
    BlaCoreBundle:Company c1, BlaCoreBundle:Company c2, BlaCoreBundle:Company c3
     WHERE c1.prop1 = 'xxx' AND c2.prop2 > '100' AND c3.prop3 LIKE '%XYZ%')               
  ->getResult(); 
```

where 当然，WHERE 子句是一般示例。此查询将返回一个大小相同的数组，其中 C1、C2 和 C3 作为您计算的值的键。当然，使用 JOIN 和任何你需要的东西变得很困难，但你总是可以使用`WHERE IN (SELECT...)`and `WHERE EXISTS (SELECT...)`，例如

```
 SELECT COUNT(c1) AS C1, COUNT(c2) AS C2, COUNT(c3) AS C3 FROM 
    BlaCoreBundle:Company c1, BlaCoreBundle:Company c2, BlaCoreBundle:Company c3
     WHERE c1.prop1 = 'xxx' AND c2.prop2 > '100' AND c3.prop3 LIKE '%XYZ%'
 AND EXISTS (SELECT x FROM BlaCoreBundle:Entity x JOIN x.company comp WHERE x.prop = "valye" AND comp = c1) 
```

# batch-file - Windows 批处理文件

> ID：14061407
> 
> 赞同：1
> 
> 时间：2012-12-27T21:15:48.200
> 
> 标签：batch-file, ftp, windows-server-2003

Windows XP 这种批处理文件/文本文件方法会自动将文件通过 ftp 传输到 FTP 服务器。我试图让它在 WIndows Server 2003 上工作，但我收到一个错误，无法打开 file.txt。关于另一种方法来实现这个工作的任何想法？谢谢

**批处理文件内容：**

ftp -i -n -s:file.txt FTPServerIP

**file.txt 内容：**

用户名
用户
密码
cd import
mput *
quit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:47:10.010

我们的新用户还没有弹出他未知的解决方案，所以我将添加他输入的内容以尝试让人们知道*这已经解决*，尽管用户不知道问题是什么。@user1804387：当您有两分钟的时间时，请随时在此页面上名为“您的答案”的空白框中*发布*您的答案（即使您不知道修复了什么）。一旦你这样做了，我很乐意删除这个答案，这样就只剩下你的了。在您创建答案后，请务必按下新答案旁边的复选标记符号以表明它是正确答案。:-)

同时，这已按照用户描述的方式*解决：*

> “我刚刚有机会再看一遍。我创建了新文件，现在它工作正常。不知道它是什么。”

# excel - 如何根据内容将字体样式和大小应用于 Excel 工作表文本列？

> ID：14061416
> 
> 赞同：0
> 
> 时间：2012-12-27T21:16:54.830
> 
> 标签：excel, parallel-processing, procedural-programming

**问题**

我有一个 Excel 工作表，其中包含一列作为数据的文本，并考虑了一些规则，哪些文本值应该用什么字体和字体大小格式化。

**具体例子**

单元格 A1：“文本”

单元格 A2 .. (Col. A)：文本字符串（从几个单词到几个句子）可以选择格式化为适用的字体和字体大小

单元格 B1：“文本类型”

单元格 B2 ...（Col. B）：单字字符串，例如“标题”、“要求”、“注释”

牢记规则：

如果 B 列中的字符串是“标题”，则使 A 列中的字符串字体大小为 18

如果 B 列中的字符串是“要求”，则在 A 列字体 Calibri 中创建字符串

如果 B 列中的字符串为“note”，则将 A 列中的字符串设为“斜体”

**约束**

Excel 作为电子表格，完全是关于函数式编程（公式）和并行处理（重新计算）。是的，我可以编写程序 VBA，但对我来说，它违背了电子表格的精神（尽管程序编程如此流行，以至于 Excel 和前辈已经提供了很长时间）。

**问题**

*除了特殊用途的*VBA*程序*编程之外，关于如何做到这一点的任何想法？

**什么似乎没有解决**

Excel 条件格式无法解决，因为它明确不允许设置那些特定的单元格属性。

Excel UDF（用户定义函数）不会求解，因为它们不会影响其他单元格。正如预期的功能。即使我想创建一个复制未格式化文本但具有基于值的样式或大小的函数，UDF 也不会影响“环境”——只能返回数据。

我在[这里](https://stackoverflow.com/a/1745917/93190)发现，我什至不能将 VBA 代码作为文本放入 Excel 工作表单元格中，然后将文本评估为 VBA - 为我将放入单元格的字体样式和大小 VBA 语句创建一个简单的通用 VBA 程序处理引擎在我的工作表中。

（如果这些负面信息中的任何一个不正确，并且上述任何一个*都*有效，请纠正我。）

**VBA*特殊用途的过程式*编程示例——有效但尽量避免的方法**

```
Public Sub IterateThroughRangeSetFontStyleSize()

Dim wb As Workbook
Dim ws As Worksheet
Dim rng As Range
Dim cell As Range

Set wb = Application.ActiveWorkbook
Set ws = wb.Worksheets("myWorkSheet")
Set rng = ws.Range("b2", "b4")

For Each cell In rng.Cells
    If LCase(cell.Text) = "bold" Then cell.Offset(0, -1).Font.Bold = True
    If LCase(cell.Text) = "italic" Then cell.Offset(0, -1).Font.Italic = True
    If LCase(cell.Text) = "large" Then cell.Offset(0, -1).Font.Size = 18
Next cell

End Sub 
```

**一些对我来说似乎太难的想法，但也许有人会说他们不是**

*   配置 Excel 以允许 VBA 写入 VBA 编辑器 (VBE)，读取工作表数据列，根据规则计算所需的字体样式和大小，并自动生成 VBA 程序代码，然后更新数据列的字体样式和大小

*   将 Excel 文件导出或另存为 XML，编写一个按照规则格式化的 XSL 样式表，打开（导入？）XML 并告诉 Excel 使用 XSL 样式表

**需要什么**

一些开箱即用的，保持简单的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:29:19.397

我不确定这个问题是否是一个级别 - 您不想编写 VBA 代码，因为“它违背了 Excel 的精神”？VBA 是在 Excel 5.0 中引入的，在此之前有一种过程宏语言。自动化*一直*是 Excel 受欢迎的组成部分（也是之前 Lotus 1-2-3 兴起的主要原因）。

粗体和斜体**可以**通过条件格式进行操作。

对于字体大小，是的，您需要编写一些代码。也许一些样本数据或数据类型（文本、整数、实数……）的指示会引发一些建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T22:58:01.910

可以分别保存数据和格式信息：

`Sheet 1`： 数据;
`Sheet 2`: 描述工作表 1 上相应单元格的单元格格式的函数（导致 bgcolor="#ff00ff", font size="3" 等）；
`Sheet 3`: 数据和格式合并，给出 XSL。

唯一需要的 VBA 是为工作表 2 编写一个 UDF，为工作表 3 编写另一个 UDF。

# ios - 如何使用 Imageview 实现切换行为，没有 UIButton

> ID：14061419
> 
> 赞同：0
> 
> 时间：2012-12-27T21:17:15.110
> 
> 标签：ios, uiimageview, uibutton, uiswitch

我必须在两种状态之间实现类似切换的行为，客户端不想要 UIbuttons，因为他有自己的 png 并希望使用它们。所以我需要将 UIImageViews 彼此相邻。我说的是 UIImageviews，因为客户端想要的切换行为应该是滑动的，因为用户在控件中有两个选项（如开/关），他将 UI 从开到关或从关到开滑动，我是给定 4 个 png：2 个用于开启状态（正常和沮丧），2 个用于关闭状态（正常和沮丧）。

我也研究了 UISwitch，但再次以我想要的方式自定义它看起来很麻烦，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:44:10.437

您可以通过这种方式实现客户想要的：

```
 UIButton *nameOfButton = [UIButton buttonWithType:UIButtonTypeCustom];
   [nameOfButton setImage:[UIImage imageNamed:nameOfYourClientsPNGFiles] forState:UIControlStateNormal];
   [nameOfButton addTarget:self action:@selector(actionForButton) forControlEvents:UIControlEventTouchUpInside];
   [self.view addSubview:nameOfButton]; 
```

//请注意，所有单词都将替换为您的方法和指针。

此外，如果您的客户 PNG 文件不是传统的方形图像，我强烈建议您查看此自定义类:-)

[OBShapedButton](https://github.com/ole/OBShapedButton)

解决了用户只能tab和点击图片形状的问题。

# sql-server-2012 - 用于 informatica powercenter 的 SQL Server 存储库

> ID：14061423
> 
> 赞同：1
> 
> 时间：2012-12-27T21:17:39.050
> 
> 标签：sql-server-2012, informatica-powercenter, informatica

我在 windows server 2008 R2 上安装了 powercenter 9.1。存储库在同一个盒子上，托管在 sql server 2012 上。我已经配置了一个新用户（使用 sql server 身份验证）并拥有该用户拥有的 repo db。（它具有所有者角色）

**核心问题**：我无法在此设置上运行简单的测试工作流程。

这是我一直在尝试的

windows防火墙现在已经关闭了大约一个小时左右。

存储库服务和集成服务分别以跟踪/调试模式运行。

集成服务日志抱怨它无法在特定文件夹中找到特定工作流的特定会话（所有这些都具有 id）。

当我登录到 sql server mgmt 控制台并尝试查询存储库表以获取那些确切的项目时（因为我有来自日志的 id），所有数据都存在......

我不明白我在搞砸什么......

免责声明 - 我对 sql server 的了解真的很低.. 可能是 10 的 1 或 2，因为在我的整个职业生涯中，我一直生活在栅栏的另一边（与 oracle）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T06:28:18.897

您是否尝试保持 sql server 登录名/用户名和关联的默认模式名称相同？

# delphi - JclMapi mapi 一般失败

> ID：14061425
> 
> 赞同：3
> 
> 时间：2012-12-27T21:17:56.473
> 
> 标签：delphi, delphi-7, delphi-2010

我有代码：

```
procedure TfrmMain.btnSendClick(Sender: TObject);
var
  aMail: TJclEMail;
begin
  aMail := TJclEMail.Create;
  Screen.Cursor := crHourGlass;
  try
    aMail.Recipients.Add('service@blabla.com');
    aMail.Subject := '[IMPORTANT] blablba';

    aMail.Body := 'text text text text';
    aMail.Send(True);
  finally
    Screen.Cursor := crDefault;
    aMail.Free;
  end;
end; 
```

这会引发：MAPI 错误：（2）“一般 MAPI 失败”有什么想法吗？

ps: 操作系统 Windows 7 Outlook 2010 Delphi 2007

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:54:32.160

我和你一样，只是包裹在一个班级里，它正在工作。

我在第一次执行 Send() 时检查 MAPI 是否正常：

```
function TMAPIPrerequisites.IsClientAvailable: Boolean;
var
  SimpleMAPI: TJclSimpleMapi;
begin
  SimpleMAPI := TJclSimpleMapi.Create;
  try
    Result := SimpleMAPI.AnyClientInstalled;
  finally
    SimpleMAPI.Free;
  end;
end;

function TMAPIPrerequisites.IsMapiAvailable: Boolean;
var
  SimpleMAPI: TJclSimpleMapi;
begin
  SimpleMAPI := TJclSimpleMapi.Create;
  try
    Result := SimpleMAPI.SimpleMapiInstalled;
  finally
    SimpleMAPI.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:04:40.440

我的问题是我的绝地图书馆不是最新的。我搜索了 jedi 存储库，JclMapi 在 12 月 27 日星期二发生了变化（Mantis 5748：JclMapi 与 64 位不兼容。）下载此更改，重新编译 pkg，现在可以完美运行了！

还是非常感谢！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T18:21:47.330

如果电子邮件客户端尚未运行，则上述代码可以正常工作。

在遇到同样的问题后，我发现 MAPI 客户端必须在与 MAPI 服务器相同的用户上下文中运行（电子邮件客户端 - 在我的例子中是 Thunderbird）。

但是，如果从以管理员权限启动的应用程序调用（例如在调试器中运行的应用程序），则 MAPI 调用将失败并出现错误代码 2。如果调用者和电子邮件客户端都以管理员身份运行，那么一切正常（但谁够疯狂这些天来以管理员身份运行电子邮件客户端？）。

# google-sheets - 谷歌电子表格 CTRL+Shift+E

> ID：14061428
> 
> 赞同：2
> 
> 时间：2012-12-27T21:18:17.507
> 
> 标签：google-sheets

我有两张纸的电子表格：`current_sheet`和`archive_sheet`。

我还有一个脚本（我创建的），它每月删除数据`current_sheet`并将其附加到一次。`archive_sheet`

工作表有一个`arrayFormula`, 并且在每个月的移动操作之后，带有这个的单元格`arrayFormula`最终没有任何结果 - 我收到一条警告消息，表明我应该按`Ctrl`++`Shift`以`E`解决问题。

一旦我这样做了 - 公式再次起作用。我想知道的是......*我怎样才能改变我的脚本，这样我就不必每个月都提供这个手动修复？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:02:37.083

不要使用脚本每月移动数据，而是尝试复制值，然后清除原始数据并重新初始化公式。没有看到你的公式，也没有清楚地了解你在做什么，我有点在黑暗中打拳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:28:55.300

使用时间驱动的触发器每月运行您的脚本

# javascript - 谷歌地图多边形轮廓颜色在多边形重叠时会发生变化

> ID：14061429
> 
> 赞同：0
> 
> 时间：2012-12-27T21:18:24.617
> 
> 标签：javascript, google-maps, google-maps-api-3, polygons

（在看到 API 的特定版本之前，我在谷歌地图论坛上发布了这个。哎呀）

我有一个谷歌地图网页，我试图在其中绘制很多多边形。目前使用 Google maps api v3.8（Ubuntu 10 下的 Firefox 17.0.1）。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.8&libraries=geometry&sensor=false" ></script> 
```

我使用 ajax 调用来创建每个多边形：

```
record.poly = new google.maps.Polygon({
    strokeColor: lineColor,
    strokeOpacity: lineOpacity,
    strokeWeight: lineWidth,
    fillColor: lineColor,
    fillOpacity: fillOpacity
});
for (var i = 0; i < points.length; i += 2)
{
    var point = new google.maps.LatLng(points[i + 1], points[i]);
    record.poly.getPath().push(point);
} 
```

在这个例子中，我通过调用创建了大约 3400 个多边形（蓝色，宽度 2，线条不透明度 0.7，填充不透明度 0.2）：

```
record.poly.setMap(myMap); 
```

当我准备好展示时。

然后我通过调用相同的代码创建了另一个大约 3600 个绿色多边形（宽度 6，线条不透明度 0.7，填充不透明度 0.2）。

问题是我看到的不一致。我预计会看到很多蓝绿色方块或很多蓝绿色方块，这取决于浏览器首先绘制的内容。但我没有。我看到绿蓝色和蓝绿色。

我无法真正链接到我的应用程序，但这是我缩小时地图的样子：http:
[//itic.occinc.com/brian/gmap-boxes-full.png](http://itic.occinc.com/brian/gmap-boxes-full.png)
和放大时：
[http： //itic.occinc.com/brian/gmap-boxes-zoom.png](http://itic.occinc.com/brian/gmap-boxes-zoom.png)

当两者都显示时，我不太关心它是蓝绿色还是绿蓝色，但我确实需要它在整个地图上保持一致。

在高层次上，有什么想法吗？我是否遇到了某种形状限制？

*   乙

# php - 从 Wordpress 中的 preprocess_comment 挂钩更改评论表单字段？

> ID：14061433
> 
> 赞同：1
> 
> 时间：2012-12-27T21:19:14.183
> 
> 标签：php, forms, wordpress, validation

上下文：当访问者在 Wordpress 中提交评论表单时，我想验证 preprocess_comment 中的数据。如果某些参数不满足，我想发生三件事：

1.  评论*未*保存
2.  访问者返回到包含表单的页面，其字段预先填充了提交的值
3.  评论表单已更改，并添加了带有 CAPTCHA 的额外表单元素。

我试图做这样的事情：

```
function myplugin_validate($comment) {
  add_action('comment_form_logged_in_after', 'comment_form_captcha_field');
  return $comment;
}
add_action('preprocess_comment', 'myplugin_validate');

function comment_form_captcha_field() {
  echo "....";
} 
```

这种方法虽然行不通：

没有办法停止 preprocess_comment 中的流程 由于 comment_form_captcha_field() 从未被调用，因此您不会返回到带有用户提交值的预填充评论表单。

当然还有一些“肮脏”的替代方法，例如将提交的值存储在会话中，从 preprocess_comment (wp_redirect) 重定向用户以及在重新加载页面后从会话中捕获值。或者我可以通过 JS 拦截提交处理程序并从那里开始。

我想知道是否有一种方法可以连接到 Wordpress 中的评论系统，并且无需借助 javascript、会话等即可做到这一点。

# cuda - CUDA C：我需要修正我的串行程序的偏差

> ID：14061434
> 
> 赞同：0
> 
> 时间：2012-12-27T21:19:15.947
> 
> 标签：cuda, atomic

所以我有一个非常基本的二维元胞自动机程序。棘手的部分，或者至少我转向学习 GPU 编程的原因是，我的矩阵往往至少有 1 亿个元素。我已经将我的串行程序的我可能称之为天真的实现（第一稿）变成了 CUDA C。它工作得很好，但我认为我看到了一种进一步改进它的方法。

出于测试目的，我有必要在矩阵的每次迭代之间跟踪活细胞计数（在我的实现中，活细胞用 1 表示，死细胞用 0 表示）。在我的第一稿中，主机负责在设备完成更新矩阵后对活细胞计数的 N^2 个嵌套循环。

这是一些伪代码，可以让您更好地了解（以下代码本身位于循环中，该循环在任意次数的迭代后终止）：

```
cuda_kern<<<dimGrid, dimBlock>>>( d_grid );
cudaMemcpy( h_grid, d_grid, matrixSize*sizeof(int), cudaMemcpyDeviceToHost );

*liveCell = 0;
for(a=0; a<gridLength; a++)
    for(b=0; b<gridLength; b++)
        if(h_grid[a][b]==1) (*liveCell)++;

printf("live cell count is %d\n", *liveCell); 
```

如您所见，我手头有两个相当昂贵的操作。首先，我必须在每次迭代时在设备和主机之间传输我的矩阵（上面称为网格）。其次，我有 N^2 操作来组合/计算活细胞计数矩阵。我相信我可以通过在每次迭代中仅在主机和设备之间传输活细胞计数来消除这两个步骤。事实上，我已经非常接近编码了，但是正如问题标题所示，与我的串行程序和我最新的 CUDA 程序确认的实时计数存在轻微的“随机”偏差。

这是我的第二个内核草案中的一些伪代码：

```
__global__ void cuda_kern( liveCell, grid )
{
    i = threadIdx.x + blockIdx.x * blockDim.x
    j = threadIdx.y + blockIdx.y * blockDim.y

    if( i < gridLength AND j < gridLength )
    {
        __shared__ int temp[number of threads in block] 
        x, y, count, changeCounter, sum = 0

        // nested for loops here that update int variable 'count'
        // for those familiar with CA it is a basic neighborhood analysis
        for x to arbitrary neighborhood range
            for y to arbitrary neighborhood range
            {
                //count neighbors, that is update 'count' variable
            }

        // __syncthreads()

        if( grid[i*gridLength+j] == 0 AND count == 5 ) 
        { // NOTE: 'count' above could be any arbitrary integer 1 - 8  
            grid[i*gridLength+j] = 1
            changeCounter += 1
        }
        else if( grid[i*gridLength+j] ==  1 AND count >= 5 )
        {
            grid[i*gridLength+j] = 0
        }
        else 
        {
            grid[i*gridLength+j] = 1
            changeCounter += 1
        }

        //__syncthreads()

        temp[threadIdx.x] = changeCounter 

        //__syncthreads()

        if (threadIdx.x == 0)
            for( i = 0; i < N; i++ ) 
            { 
                sum += temp[i]
                //__syncthreads()
            }

        atomicAdd( liveCell, sum )

    } // end of if ( i < gridLength and j < gridLength )   
    return;
} // end of kernel 
```

上述伪代码的解释：我试图省略非必要的部分，例如元胞自动机函数背后的大部分逻辑。在我的程序中，所有变量都是整数，而矩阵本身是整数类型。我在评论中留下了我尝试同步线程的地方（无济于事）。

我的逻辑解释：如前所述，在讨论我的第一个实现草案时，我想避免在设备和主机之间传输矩阵的昂贵操作以及每次迭代计算主机上活细胞的 N^2 成本。使用变量“changeCounter”可以看到这样做的关键。本质上，每当一个单元格被指定为“1”或活动时，“changeCounter”应该加一。我正在尝试使用由当前线程索引的**共享**变量“temp”来存储“changeCounter”的值。一旦一个块中的所有线程都完成了，我就会尝试将“temp”数组压缩为单个变量“sum”，然后我通过原子操作“atomicAdd”将其添加到 liveCell。

我遇到的问题是我使用这种方法的结果（虽然更快）与我原来的草稿结果不匹配，而且每次我在同一个矩阵上运行程序时，活细胞的每次迭代都会有轻微的偏差数数。

**更新** 1k x 1k 矩阵上的示例输出：

GPU 实施的第一稿每次都会产生以下活细胞计数。这些是我希望在我的第二稿中产生的结果。

```
initial live cell count: 393592 
itr. 0  live cell count: 364118
itr. 1  live cell count: 315417
itr. 2  live cell count: 300413 
itr. 3  live cell count: 284503 
```

2nd Draft GPU 实现的活细胞计数每次都略有不同，但都接近上述值。这里有三个单独的运行可以给你一个想法。

**运行 A：**

```
initial live cell count: 393592
itr. 0  live cell count: 372402
itr. 1  live cell count: 324114
itr. 2  live cell count: 309580
itr. 3  live cell count: 291393 
```

**运行 B：**

```
initial live cell count: 393592
itr. 0  live cell count: 374139
itr. 1  live cell count: 323948
itr. 2  live cell count: 307214
itr. 3  live cell count: 292582 
```

**运行 C：**

```
initial live cell count: 393592
itr. 0  live cell count: 372391
itr. 1  live cell count: 323105
itr. 2  live cell count: 308295
itr. 3  live cell count: 292512 
```

每次都会在主机上计算初始活细胞计数，这解释了为什么它在所有示例中都是一致的。

**更新结束**

感谢您的时间。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:54:37.207

你不应该这样做：

```
 if (threadIdx.x == 0) {
        for( i = 0; i < N; i++ ) 
        { 
            sum += temp[i]
            //__syncthreads()
        }
        atomicAdd( liveCell, sum )// could probably just update the memory without atomic
    } 
```

正如您所说，块中的所有线程都计算它们的总和，然后您使用线程 0 将所有线程的总和相加，然后您应该将其添加到指定的指针中。如果每个线程都执行 atomicAdd 它会有所不同，您可能应该只使用线程 0 执行此操作，并且您可能可以删除原子操作。

另外，对该循环进行缩减：

```
for (i=blockDim.x/2; i>0; i>>=1) {
     if(threadIdx.x < i) {
         temp[threadIdx.x] += temp[threadIdx.x + i];
     }
    __syncthreads();
}
if(threadIdx.x == 0) {
    sum = temp[0];
    liveCell += sum;
} 
```

# assembly - 什么是大双字？

> ID：14061439
> 
> 赞同：4
> 
> 时间：2012-12-27T21:20:11.467
> 
> 标签：assembly, types, x86, ida, dword

此代码部分中的哪些功能又*短*又*大？*large 和*long dword*一样吗？

```
mov eax, ebx
cmp [ebp+var_1], 0
jz  short loc_413123
call sub_40341C
pop large dword ptr fs:0
add esp, 0Ch 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T22:17:21.220

## 短的

`jz short loc_413123`仅仅意味着这个跳转的偏移量（即距离）太小了，以至于它适合一个字节，所以这个跳转被编译成两个简单的字节：

```
0x74 [1-byte-offset] 
```

如果距离更大，编译器将不得不对跳转进行不同的编码，这会占用更多的内存：

```
0x0f 0x84 [4-byte-offset] 
```

使用`short`，IDA Pro 只是告诉你这个跳转使用了什么样的编码。

## 大的

`pop large dword ptr fs:0`是 IDA 引起您注意的方式`fs:0`是[远指针](http://en.wikipedia.org/wiki/Far_pointer)：常规偏移量 ( `0`) 但带有段选择器 ( `fs`)。即与*数据*的宽度（dword）`large`无关，而是*地址*（segment+offset）。但是，并没有真正添加任何新信息，该行仅表示并且可能是您从其他反汇编程序获得的反汇编。**`large``pop dword ptr [fs]`**

 *** * *

当您阅读反汇编代码时，您可以放心地忽略这两个关键字，并且在编写您自己的汇编代码时它们当然不是必需的。**

# typo3 - 如何使用 extbase 在 TYPO3 CMS 6.0 上引导插件？

> ID：14061445
> 
> 赞同：8
> 
> 时间：2012-12-27T21:20:51.217
> 
> 标签：typo3, typoscript, extbase

我正在尝试通过 TYPO3 CMS 6.0 上的打字稿使用 extbase 插件。我使用了以下代码，我发现在整个网络上都重复了该代码：

```
10 = USER
10 { 
    userFunc = tx_extbase_core_bootstrap->run
    pluginName = Sermons
    extensionName = VmfdsSermons
    switchableControllerActions {
        Sermon {
            1 = byLatestSeries
            2 = list
            3 = show
    }
} 
```

但是，这只会给我以下错误：

```
#1289386765: Could not analyse class:Tx_VmfdsSermons_Controller_SermonController maybe not loaded or no autoloader? 
```

在我看来，好像`tx_extbase_core_bootstrap->run`还没有使用命名空间，因此试图加载一个`Tx_VmfdsSermons_Controller_SermonController`应该调用的类`\TYPO3\VmfdsSermons\Controller\SermonController`。有没有解决的办法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T14:12:30.227

您正在寻找物业`vendorName`。所以在你的情况下应该是：

```
10 = USER
10 { 
    userFunc      = TYPO3\CMS\Extbase\Core\Bootstrap->run

    pluginName    = Sermons
    extensionName = VmfdsSermons
    vendorName    = TYPO3
    [...] 
```

我还在以下位置使用了供应商命名空间`ext_localconf.php`：

```
\TYPO3\CMS\Extbase\Utility\ExtensionUtility::configurePlugin(
    '<Vendor>.' . $_EXTKEY, 
    [...] 
```

我通过使用调试器找到了答案。我开始`\TYPO3\CMS\Extbase\Mvc\Dispatcher::resolveController()`并跳入`TYPO3\CMS\Extbase\Mvc\Request::getControllerObjectName()`。有一个 member `controllerVendorName`，所以我在 Extbase 中搜索了 的 setter `\TYPO3\CMS\Extbase\Mvc\Request::setControllerVendorName()`，正好是 for `setControllerVendorName`，并在 中找到了一个匹配`\TYPO3\CMS\Extbase\Mvc\Web\RequestBuilder::build()`，其中一个 member 被调用`vendorName`，就在上面的方法中`\TYPO3\CMS\Extbase\Mvc\Web\RequestBuilder::loadDefaultValues()`，就是答案！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T18:46:13.657

`tx_extbase_core_bootstrap`不应再使用调用，因为它在版本中[已弃用](http://typo3.org/api/typo3cms/class_tx___extbase___core___bootstrap.html)。6.0 并将在 7.0 中删除

你可以尝试不同的。开发人员现在应该使用命名空间来处理所有事情......

你可以使用这个：

```
# bootstrap aufrufen -> run from extbase

userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run 
```

# java - 我们如何在单击按钮时自动生成包含日期、月份、年份和计数器的串联的 ID？

> ID：14061446
> 
> 赞同：0
> 
> 时间：2012-12-27T21:21:03.540
> 
> 标签：java, date

```
public class CalendarUtil

{

    private Calendar cal = null;

    public String getRemId()

    {

        cal = Calendar.getInstance();

        return "" + cal.get(Calendar.DATE) + (cal.get(Calendar.MONTH)+1) +        cal.get(Calendar.YEAR);

    }        
} 
```

我们如何在单击按钮时自动生成 ID，该 ID 将包含日期、月份、年份和从 000 开始的 3 位计数器的串联并将其显示在文本字段中？例如：- 28122012001、28122012002 等。我一直在尝试的代码如上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:39:24.767

我认为两个静态字段可以做到这一点。

```
private static String lastUsedDatePrefix;
private static int counter; 
```

如果要创建新 ID，请检查日期前缀是否与存储的相同，`lastUsedDatePrefix`如果是，则递增`counter`其他设置`counter=0`并设置`lastUsedDatePrefix`为实际日期。

未经测试的实现：

```
public class CalendarUtil{
    private static String lastUsedDatePrefix = "";
    private static int counter = 0;

    public String getRemId(){
        final String datePrefix = new SimpleDateFormat("ddMMyyy").format(new Date());
        if (lastUsedDatePrefix.equals(datePrefix)) {
            CalendarUtil.counter++;
        }
        else{
            CalendarUtil.lastUsedDatePrefix = datePrefix;
            CalendarUtil.counter = 0;
        }
        final String counterSuffix = ((100 <= CalendarUtil.counter) ? ""
                : (10 <= CalendarUtil.counter) ? "0" : "00")
                + CalendarUtil.counter;
        return datePrefix + counterSuffix;
     }   
} 
```

# ios - 照片库像表iOS

> ID：14061447
> 
> 赞同：1
> 
> 时间：2012-12-27T21:21:06.160
> 
> 标签：ios, uiimageview, gallery, tile

我正在设计一个如下图所示的应用程序。我想知道是否有任何东西可以帮助我创建这种风格的桌子。我看过three20和其他来源。我已经想出了如何使用 JSON 从我需要的网站加载图像，现在我需要将其放入该视图样式中。. 看起来它可能是一个基本的画廊布局，但我不确定从哪里开始可能是最好的。

[http://i.imgur.com/e50Uz.jpg](http://i.imgur.com/e50Uz.jpg)

编辑：谢谢大家，这最终也很有帮助：[http ://www.scott-sherwood.com/ios-6-uicollectionviewcontroller/](http://www.scott-sherwood.com/ios-6-uicollectionviewcontroller/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:24:05.727

尝试检查`UICollectionView` [https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:23:27.507

看看[`UICollectionView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)。它非常适合这种事情。

如果您有具体问题，请再次询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:36:50.220

新`UICollectionView`框架就是为这样的事情而设计的，而且非常易于使用。使用集合视图的唯一缺点是它仅在 iOS 6+ 上可用，因此如果您想要向后兼容，您可能需要研究第三方开源框架。

这是一个很棒的关于 s 的教程，`UICollectionView`可以帮助您入门。

[http://www.adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial.php](http://www.adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial.php)

# c# - 将 int 值转换为 3 字节数组（反之亦然）

> ID：14061448
> 
> 赞同：3
> 
> 时间：2012-12-27T21:21:07.533
> 
> 标签：c#, bytearray, bitconverter

我正在开发一个从硬件设备读取/写入数据的 C# WinForms 应用程序。我的应用程序有一个多选列表框，其中包含数字 1 - 100000，用户最多可以选择 10 个数字。当他们选择完每个数字后，用户单击一个按钮，我的事件处理程序代码需要使用 3 个字节来构建一个固定大小（30 个字节）的字节数组来表示每个选定的数字，如果少于 10 个数字则填充数组选择。

例如，假设我的用户选择以下值：

```
17
99152
3064
52588
65536 
```

我目前正在使用此代码将每个数字转换为字节数组：

```
byte[] bytes = BitConverter.GetBytes(selectedNumber);
Array.Reverse(bytes) // because BitConverter.IsLittleEndian() = true
Debug.WriteLine(BitConverter.ToString(bytes)); 
```

对于我上面列出的数字，这会产生以下结果：

```
00-00-00-11
00-01-83-50
00-00-0B-F8
00-00-CD-6C
00-01-00-00 
```

BitConverter 给了我一个 4 字节数组，我只有空间可以使用 3 个字节将每个数字存储在最终字节数组中。我可以删除每个单独字节数组的最高有效字节，然后像这样构建我的最终数组：

```
00-00-11-01-83-50-00-0B-F8-00-CD-6C-01-00-00-[padding here] 
```

将其写入设备应该可以工作。但是从设备中读取数组（或类似数组）给我带来了一些问题。当我有一个 3 字节数组并尝试使用此代码将其转换为 int 时...

```
int i = BitConverter.ToInt32(bytes, 0); 
```

...我得到“目标数组不够长，无法复制集合中的所有项目。” 我想我可以在每三个字节的开头插入一个 0x00 的最重要字节，然后进行转换，但是有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T21:26:04.313

我会想象位移和`|`操作符应该是最有效的方法。

`int i = (bytes[2] << 0) | (bytes[1] << 8) | (bytes[0] << 16);`

另外，作为提醒，您正在删除*最*重要的字节，而不是*最不重要*的字节；p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:33:32.120

```
byte[] bytes = new byte[] { 0x00, 0x00, 0x11, 0x01, 0x83, 0x50, 0x00, 0x0B, 0xF8 };

var ints = bytes.Select((b, i) => new { b, i })
                .GroupBy(x => x.i / 3)
                .Select(g => BitConverter.ToInt32(
                                new byte[] { 0 }.Concat(g.Select(x => x.b))
                                                .Reverse()
                                                .ToArray(),
                                0))
                .ToArray(); 
```

或经典的

```
var ints = new List<int>();
for (int i = 0; i < bytes.Length; i+=3)
{
    int intI=0;
    for (int j = i; j < i + 3; j++)
    {
        intI = intI * 256 + bytes[j]; //or (intI << 8) + bytes[j];
    }
    ints.Add(intI);
} 
```

`ints`将会`17, 99152 and 3064`

# java - 禁用 JFileChooser 中的打开按钮？

> ID：14061450
> 
> 赞同：3
> 
> 时间：2012-12-27T21:21:19.000
> 
> 标签：java, swing, jfilechooser

我扩展了 a`JFileChooser`并覆盖了该`approveSelection`方法，以便当用户选择无效目录然后单击“打开”按钮时，`JOptionPane`将显示 a 中的错误消息。但我想让我`JFileChooser`的用户更友好，并在用户单击无效目录时禁用“打开”按钮，然后在用户单击有效目录时重新启用。是否可以进一步自定义我`JFileChooser`并访问“打开”按钮，以便我可以相应地更改按钮的状态（可能通过侦听目录选择的侦听器）？

```
public class MyFileChooser extends JFileChooser {

  private final JFrame mainFrame;

  public MyFileChooser(JFrame mainFrame) {
    this.mainFrame = mainFrame;
    setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
  }

  @Override
  public void approveSelection() {
    if (/* directory is valid */) {
      super.approveSelection();
      return;
    }
    JOptionPane.showMessageDialog(mainFrame, "Invalid directory", "Error", JOptionPane.ERROR_MESSAGE);
  }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T22:33:20.710

当检测到文件/目录的任何选择更改时，您可以通过调用 chooser.setControlButtonsAreShown(false) 来隐藏接受/取消按钮：

```
myChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
myChooser.addPropertyChangeListener(new PropertyChangeListener() {
  public void propertyChange(PropertyChangeEvent evt) {
        if (JFileChooser.SELECTED_FILE_CHANGED_PROPERTY.equals(evt.getPropertyName())) {
            File file = (File) evt.getNewValue();
            if (file != null && file.isFile()) {    // your condition                  
                myChooser.setControlButtonsAreShown(false);
            }
            else if ( file != null ) {
                System.out.println(file.getName());
                myChooser.setControlButtonsAreShown(true);
            }
        }

        myChooser.repaint();
    }
}); 
```

但这可能会使用户感到困惑，最好制作自定义 FileFilter 并仅显示您需要的文件/目录：

```
public static class MyDirectoryFilter extends javax.swing.filechooser.FileFilter {
  @Override
  public boolean accept( File file ) {
    return file.isDirectory() && customeCondition(file) ;
  }

  @Override
  public String getDescription() {
    return "this only my custom dir";
  }
}

myChooser.setFileFilter( new MyDirectoryFilter () ); 
```

**编辑**：我找到了一种禁用按钮的方法，通过迭代组件并获取打开按钮的句柄：http: [//www.coderanch.com/t/468663/GUI/java/Disabling-Enabling-level-button-folder](http://www.coderanch.com/t/468663/GUI/java/Disabling-Enabling-level-button-folder)

例子：

```
myChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
myChooser.addPropertyChangeListener(new PropertyChangeListener() {
public void propertyChange(PropertyChangeEvent evt) {
    if (JFileChooser.SELECTED_FILE_CHANGED_PROPERTY.equals(evt.getPropertyName())) {
           File file = (File) evt.getNewValue();

           if (file != null && file.isFile()) { 
                setOpenButtonState(myChooser, false);

           }
           else if ( file != null ) {
                setOpenButtonState(myChooser, true);
                System.out.println(file.getName());
           }
        }

        myChooser.repaint();
    }
});

public static void setOpenButtonState(Container c, boolean flag) {
    int len = c.getComponentCount();
    for (int i = 0; i < len; i++) {
      Component comp = c.getComponent(i);

      if (comp instanceof JButton) {
        JButton b = (JButton) comp;

        if ( "Open".equals(b.getText()) ) {
            b.setEnabled(flag);
        }

      } else if (comp instanceof Container) {
          setOpenButtonState((Container) comp, flag);
      }
    }     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T23:04:24.017

正如 Wajdy Essam 已经回答的那样，您通常可以使用隐藏/显示控制按钮

[javax.swing.JFileChooser#setControlButtonsAreShown(boolean)](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFileChooser.html#setControlButtonsAreShown%28boolean%29)

但是这种方法并不适用于所有的 Look&Feel，至少不是我正在使用的那些。

我写了一个在大多数情况下都可以使用的快速解决方法。

此外，您可以完全访问 FileChooser 的取消和批准按钮。

```
public class JFileChooserTest extends JFileChooser {

private JButton approveButton, cancelButton;

public JFileChooserTest() {
    // Lookup the Buttons
    if (approveButton == null) {
        approveButton = lookupButton(JFileChooserTest.this, getUI().getApproveButtonText(this));
    }
    if (cancelButton == null) {
        cancelButton = lookupButton(JFileChooserTest.this, UIManager.getString("FileChooser.cancelButtonText"));
    }

    setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);

    //Creating the Listener
    PropertyChangeListener propertyChangeListener = new PropertyChangeListener() {
        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            //Do action only if the selected file changed
            if (evt.getPropertyName().equals(JFileChooser.SELECTED_FILE_CHANGED_PROPERTY)) {
                File newFile = (File) evt.getNewValue();
                //Validate the new File
                boolean validate = validateFile(newFile);

                //Enable/Disable the buttons
                if (approveButton != null) {
                    approveButton.setEnabled(validate);
                }
                if (cancelButton != null) {
                    cancelButton.setEnabled(validate);
                }
            }
        }
    };

    //Adding the listeners
    addPropertyChangeListener(SELECTED_FILE_CHANGED_PROPERTY, propertyChangeListener);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                JFileChooserTest test = new JFileChooserTest();
                test.showOpenDialog(null);
            } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                Logger.getLogger(JFileChooserTest.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    });

}

/**
 * Simple validation method; only for testing purpose
 *
 * @param f
 * @return
 */
private boolean validateFile(File f) {
    return f != null && !f.getName().startsWith("A");
}

/**
 * Looksup the first JButton in the specific Container (and sub-containers)
 * with the given text.
 *
 * @param c
 * @param text
 * @return
 */
private JButton lookupButton(Container c, String text) {
    JButton temp = null;
    for (Component comp : c.getComponents()) {
        if (comp == null) {
            continue;
        }
        if (comp instanceof JButton && (temp = (JButton) comp).getText() != null && temp.getText().equals(text)) {
            return temp;
        } else if (comp instanceof Container) {
            if ((temp = lookupButton((Container) comp, text)) != null) {
                return temp;
            }
        }
    }
    return temp;
}
} 
```

我还建议使用[javax.swing.filechooser.FileFilter](http://docs.oracle.com/javase/6/docs/api/javax/swing/filechooser/FileFilter.html)来验证选定的文件，而不是覆盖`approveSelection()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T02:15:55.987

> 禁用 JFileChooser 中的打开按钮？

更好的是，安装一个[`FileSystemView`](http://docs.oracle.com/javase/7/docs/api/javax/swing/filechooser/FileSystemView.html)隐藏*无效*目录的自定义。考虑压倒一切[`isHiddenFile(File)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/filechooser/FileSystemView.html#isHiddenFile%28java.io.File%29)。

# android - Android 上 OpenCV 中的中值模糊问题

> ID：14061461
> 
> 赞同：1
> 
> 时间：2012-12-27T21:22:34.497
> 
> 标签：android, opencv

我正在尝试在 Android 上的第一个 OpenCV 应用程序中使用中值模糊。它是“图像操作”示例应用程序的修改。除了我实现的 medianBlur 之外，一切都运行得很好。当我的应用程序在设备上运行时，我从菜单中选择了 medianBlur 选项，然后整个应用程序崩溃了。这是我的应用程序中的 medianBlur 实现代码：

```
 case ImageManipulationsActivity.VIEW_MODE_MEDIAN:
   capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA); 
    if (mRgbaInnerWindow == null || mGrayInnerWindow == null)
       CreateAuxiliaryMats();
 Imgproc.medianBlur(mGrayInnerWindow, mIntermediateMat, 2);
 Core.convertScaleAbs(mIntermediateMat, mIntermediateMat, 10, 0);
 Imgproc.cvtColor(mIntermediateMat, mGrayInnerWindow, Imgproc.COLOR_GRAY2BGRA, 4);
 break; 
```

你能告诉我代码有什么问题吗？与 medianBlur 实现相关的其他代码行应该是正确的，因为它们的编写方式与应用程序的其他功能（如 Canny 过滤器）相同。你能给我一个示例代码如何在 OpenCV for Android 中使用中值模糊过滤器吗？我是 OpenCV 和 Android 编程的新手，所以请原谅我犯的任何错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:30:24.407

1.  捕捉异常。
2.  阅读文档以了解方法参数的有效值。文档明确指出光圈大小必须是奇数且大于 1，但您将其设置为 2。

# amazon-web-services - 如何在使用 EMR/Hive 将数据从 S3 导入 DynamoDB 时处理引号 (CSV) 中的字段

> ID：14061466
> 
> 赞同：17
> 
> 时间：2012-12-27T21:23:31.373
> 
> 标签：amazon-web-services, amazon-s3, hive, amazon-dynamodb, amazon-emr

我正在尝试使用 EMR/Hive 将数据从 S3 导入 DynamoDB。我的 CSV 文件包含用双引号括起来并用逗号分隔的字段。在 hive 中创建外部表时，我可以将分隔符指定为逗号，但如何指定字段用引号括起来？

如果我不指定，我会看到 DynamoDB 中的值填充在两个双引号“值”中，这似乎是错误的。

我正在使用以下命令创建外部表。有没有办法指定字段用双引号括起来？

```
CREATE EXTERNAL TABLE emrS3_import_1(col1 string, col2 string, col3 string, col4 string)  ROW FORMAT DELIMITED FIELDS TERMINATED BY '","' LOCATION 's3://emrTest/folder'; 
```

任何建议，将不胜感激。谢谢吉滕德拉

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-03-05T06:29:54.487

我也遇到了同样的问题，因为我的字段用双引号括起来并用分号（;）分隔。我的表名是employee1。

所以我搜索了链接，我找到了完美的解决方案。

为此，我们必须使用 serde。请使用此链接下载 serde jar：[https ://github.com/downloads/IllyaYalovyy/csv-serde/csv-serde-0.9.1.jar](https://github.com/downloads/IllyaYalovyy/csv-serde/csv-serde-0.9.1.jar)

然后使用 hive 提示执行以下步骤：

```
add jar path/to/csv-serde.jar;

create table employee1(id string, name string, addr string)
row format serde 'com.bizo.hive.serde.csv.CSVSerde'
with serdeproperties(
"separatorChar" = "\;",
"quoteChar" = "\"")
stored as textfile
; 
```

然后使用以下查询从给定路径加载数据：

```
load data local inpath 'path/xyz.csv' into table employee1; 
```

然后运行：

```
select * from employee1; 
```

现在你会看到魔法。谢谢。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-04-17T12:59:37.027

以下代码解决了相同类型的问题

```
CREATE TABLE TableRowCSV2(    
    CODE STRING,        
    PRODUCTCODE STRING, 
    PRICE STRING     
)
    COMMENT 'row data csv'    
ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.OpenCSVSerde'

WITH SERDEPROPERTIES (
   "separatorChar" = "\,",
   "quoteChar"     = "\""
)
STORED AS TEXTFILE
tblproperties("skip.header.line.count"="1"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T00:11:38.967

如果您不喜欢 CSV 文件格式，则必须使用自定义 SerDe；这是一些[基于 opencsv 库的工作](http://dev.bizo.com/2010/11/csv-and-hive.html)。

但是，如果你可以修改源文件，你可以选择一个新的分隔符，这样引用的字段就不需要了（祝你好运），或者重写以使用单个转义字符转义任何嵌入的逗号，例如'\'，这可以使用**ESCAPEED BY**在 ROW FORMAT 中指定：

```
CREATE EXTERNAL TABLE emrS3_import_1(col1 string, col2 string, col3 string, col4 string)  ROW FORMAT DELIMITED FIELDS TERMINATED BY ',' ESCAPED BY '\\' LOCATION 's3://emrTest/folder'; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-14T03:56:20.117

Hive 现在包含一个`OpenCSVSerde`可以正确解析那些引用的字段，而无需添加额外的 jar 或容易出错且速度慢的正则表达式。

`ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.OpenCSVSerde'`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-28T14:59:24.203

Hive 不支持开箱即用的带引号的字符串。有两种方法可以解决这个问题：

1.  使用不同的字段分隔符（例如管道）。
2.  编写基于 OpenCSV 的自定义 InputFormat。

更快（并且可以说更理智）的方法是修改您的初始导出过程以使用不同的分隔符，这样您就可以避免引用字符串。通过这种方式，您可以告诉 Hive 使用带有制表符或管道分隔符的外部表：

```
CREATE TABLE foo (
  col1 INT,
  col2 STRING
) ROW FORMAT DELIMITED FIELDS TERMINATED BY '|'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-24T09:44:51.637

`csv-serde-0.9.1.jar`在您的配置单元查询中 使用该文件，请参阅[http://illyayalovyy.github.io/csv-serde/](http://illyayalovyy.github.io/csv-serde/)

```
add jar /path/to/jar_file

Create external table emrS3_import_1(col1 string, col2 string, col3 string, col4 string) row format serde 'com.bizo.hive.serde.csv.CSVSerde'
with serdeproperties
(
  "separatorChar" = "\;",
  "quoteChar" = "\"
) stored as textfile
tblproperties("skip.header.line.count"="1") ---to skip if have any header file
LOCATION 's3://emrTest/folder'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-18T12:10:14.677

这个问题可以有多种解决方案。

1.  编写自定义 SerDe 类
2.  使用 RegexSerde
3.  从数据中删除转义的分隔符

[在http://grokbase.com/t/hive/user/117t2c6zhe/urgent-hive-not-respecting-escaped-delimiter-characters](http://grokbase.com/t/hive/user/117t2c6zhe/urgent-hive-not-respecting-escaped-delimiter-characters)阅读更多信息

# android - 将 Android PackageManager 限制为单一选择

> ID：14061470
> 
> 赞同：1
> 
> 时间：2012-12-27T21:23:55.430
> 
> 标签：android, bluetooth

我的应用程序会在选择文件时调用 android PackageManager，并向用户提供应用程序选择以处理应如何处理文件。我想将此选择限制为蓝牙。目前蓝牙是第一个选项，这很好，这一切都有效。我想知道是否可以只向用户展示这个单一选项。

```
 case REQUEST_FILE_SELECT:
        if (requestCode == REQUEST_FILE_SELECT) {
            // Get the Uri of the selected file
            Uri uri = data.getData();
            Log.d(TAG, "File Uri: " + uri.toString());
            // Get the path
            String path = null;
            try {
                path = FileUtils.getPath(this, uri);
            } catch (URISyntaxException e) {
                e.printStackTrace();
            }
            Log.d(TAG, "File Path: " + path);
            // Get the file instance
            File mFile = new File(path);
            // Evoke the file chooser
            List<Intent> targetedShareIntents = new ArrayList<Intent>();
            Intent shareIntent = new Intent(
                    android.content.Intent.ACTION_SEND);
            shareIntent.setType("*/*");
            // Evoke the package manager
            List<ResolveInfo> resInfo = getPackageManager()
                    .queryIntentActivities(shareIntent,
                            PackageManager.GET_ACTIVITIES);
            if (!resInfo.isEmpty()) {

                for (ResolveInfo resolveInfo : resInfo) {
                    String packageName = resolveInfo.activityInfo.packageName;
                    if (packageName.equals("com.android.bluetooth")) {

                        Intent targetedShareIntent = new Intent(
                                android.content.Intent.ACTION_SEND);
                        shareIntent.putExtra(Intent.EXTRA_STREAM,
                                Uri.fromFile(mFile));
                        targetedShareIntent.setPackage(packageName);
                        targetedShareIntents.add(targetedShareIntent);
                        startActivity(Intent.createChooser(shareIntent,
                                "Share File"));

                    }

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:31:39.670

解决方法：找出设备对你的意图支持哪些应用，找到蓝牙的那个，直接调用。

这篇文章回答了你的问题： [http ://tsicilian.wordpress.com/2012/11/06/bluetooth-data-transfer-with-android/](http://tsicilian.wordpress.com/2012/11/06/bluetooth-data-transfer-with-android/)

从文章中：我们可以看到 BT 应用程序在这些处理程序中。我们当然可以让用户从列表中选择该应用程序并完成它。但是，如果我们觉得我们应该对用户更友好一点，我们需要更进一步并自己启动应用程序，而不是简单地在其他不必要的选项中显示它……但是如何？

一种方法是通过这种方式使用 Android 的 PackageManager：

```
//list of apps that can handle our intent
PackageManager pm = getPackageManager();
List appsList = pm.queryIntentActivities( intent, 0);

if(appsList.size() > 0 {
   // proceed
} 
```

上面的 PackageManager 方法以封装我们需要的信息的 ResolveInfo 对象列表的形式返回我们之前看到的所有容易处理我们的文件传输意图的活动的列表：

```
//select bluetooth
String packageName = null;
String className = null;
boolean found = false;

for(ResolveInfo info: appsList){
  packageName = info.activityInfo.packageName;
  if( packageName.equals("com.android.bluetooth")){
     className = info.activityInfo.name;
     found = true;
     break;// found
  }
}

if(! found){

  Toast.makeText(this, R.string.blu_notfound_inlist,
  Toast.LENGTH_SHORT).show();
  // exit
} 
```

我们现在有了自己开始 BT 的必要信息：

```
//set our intent to launch Bluetooth
intent.setClassName(packageName, className);
startActivity(intent); 
```

我们所做的是使用之前检索到的包及其对应的类。由于我们是一群好奇的人，我们可能想知道“com.android.bluetooth”包的类名是什么。如果我们将它打印出来，我们会得到：com.broadcom.bt.app.opp.OppLauncherActivity。OPP 代表 Object Push Profile，是允许无线共享文件的 Android 组件。

同样在文章中，如何从您的应用程序中启用蓝牙。

# c# - 在 Autofac 中获取接口的所有注册实现

> ID：14061472
> 
> 赞同：7
> 
> 时间：2012-12-27T21:24:08.987
> 
> 标签：c#, autofac

我需要从一个实现特定接口`IComponentContext`的已注册列表中获取。`Type`

我不想要类型的实际实例，而是`Type`我*可以获得*实例的列表。

我想使用此列表在消息总线上生成订阅。

如何在 Autofac 中获取接口的所有注册实现？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T22:11:55.647

我想通了——

```
var types = scope.ComponentRegistry.Registrations
    .SelectMany(r => r.Services.OfType<IServiceWithType>(), (r, s) => new { r, s })
    .Where(rs => rs.s.ServiceType.Implements<T>())
    .Select(rs => rs.r.Activator.LimitType); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-14T04:22:10.293

使用**AutoFac 3.5.2**（基于这篇文章：[http](http://bendetat.com/autofac-get-registration-types.html) ://bendeat.com/autofac-get-registration-types.html ）

首先实现这个功能：

```
 using Autofac;
    using Autofac.Core;
    using Autofac.Core.Activators.Reflection;
    ...

        private static IEnumerable<Type> GetImplementingTypes<T>(ILifetimeScope scope)
        {
            //base on http://bendetat.com/autofac-get-registration-types.html article

            return scope.ComponentRegistry
                .RegistrationsFor(new TypedService(typeof(T)))
                .Select(x => x.Activator)
                .OfType<ReflectionActivator>()
                .Select(x => x.LimitType);
        } 
```

然后假设我们有`builder`，

```
var container = builder.Build();
using (var scope = container.BeginLifetimeScope())
{
   var types = GetImplementingTypes<T>(scope);
} 
```

# actionscript-3 - AS3 Flash URLRequest 在导出时不起作用

> ID：14061474
> 
> 赞同：0
> 
> 时间：2012-12-27T21:24:20.107
> 
> 标签：actionscript-3, flash, urlrequest

这个简单的登录表单在 CS6 (Flash 11.4) 的测试环境中工作，但在导出时不起作用。我已将问题范围缩小到实际`URLRequest`无法正常工作。希望有人可以阐明！

非常感谢，尼克:)

**AS3**

```
login.loginSubmit.addEventListener(MouseEvent.CLICK, function(){

    if(login.loginPassword.text!="Password" && login.loginPassword.text!=""){

        login.loginSubmit.enabled = false;

        // Begin URL setup for login
        var loginVariables:URLVariables = new URLVariables("email="+login.loginEmail.text+"&password="+login.loginPassword.text); 
        var loginRequest:URLRequest = new URLRequest();
        loginRequest.url = "login.php";
        loginRequest.method = URLRequestMethod.POST; 
        loginRequest.data = loginVariables;
        var loginLoader:URLLoader = new URLLoader();
        loginLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
        loginLoader.addEventListener(Event.COMPLETE, loginHandler);         

        function loginHandler(event:Event):void {
            if(loginLoader.data.passed=="true"){

                var hideInitial:Tween = new Tween(uiInitial, "x", Strong.easeOut, 6, -315, 0.5, true);
                hideInitial.addEventListener(TweenEvent.MOTION_FINISH, function(){
                    member.data.email = loginLoader.data.email;
                    member.data.fname = loginLoader.data.fname;
                    member.data.lname = loginLoader.data.lname;
                    member.flush();
                });

            }else{
                                 trace("error");
            }
        } 
        // Send PHP/SQL request
        loginLoader.load(loginRequest); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T23:01:33.117

您需要为已发布的 SWF 启用网络访问。转到 Flash (.swf) 的发布设置并将“本地播放安全”设置设置为“仅访问网络”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:38:33.217

**原来是同时存在本地和外部 URLRequest，导致设置出现问题。我已经制作了相同的（外部）并且当然将它们托管在与 Flash 相同的域上，现在可以工作了。**

# jquery - 使用 json_encode 的人口选择选项

> ID：14061477
> 
> 赞同：2
> 
> 时间：2012-12-27T21:24:29.113
> 
> 标签：jquery, json

有人可以帮我弄清楚为什么我拥有的 json 数组没有填充我的选择下拉列表吗？该数组打印良好（名称：值），我尝试了不同的方式（.post .getJSON）来填充选择字段。请参阅下面的代码...

PHP

```
$q = "select Site_ID, FirstName, LastName from ClientInfo";
$sql = mysql_query($q);
$data = array();
    while($row = mysql_fetch_array($sql, true)){
    $data[] = $row; 
};
echo json_encode($data); 
```

这是它在网页上打印的内容：

```
[{"Site_ID":"10000001","FirstName":"drew","LastName":"0"},     {"Site_ID":"10000002","FirstName":"hello","LastName":"0"},{"Site_ID":"10000003","FirstName":"hihi","LastName":"0"},{"Site_ID":"10000004","FirstName":"","LastName":"0"},{"Site_ID":"10000005","FirstName":"SueAnn","LastName":"Hall"},{"Site_ID":"10000006","FirstName":"Test","LastName":"Name"}] 
```

带有脚本的 HTML

```
<body>
<script type="text/javascript">
$(function(){
  $.getJSON('checkin.php',function(data){
    $.each(data,function(name,value) 
    {
      items+="<option value='"+item.id+"'>"+item.name+"</option>";
    });
    $("#clients").html(items); 
  });
});
</script>

<select id="clients">
<option>Default</option>
</select>
</body> 
```

在我运行 html 之前工作正常。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:30:06.080

两个问题：

1.  您需要初始化项目：

    变种物品=“”；

2.  您需要将 $.each() 回调中的第二个参数从`value`更改为`item`：

    ```
    $.each(data, function (name, item) {
        items += "<option value='" + item.id + "'>" + item.name + "</option>";
    }); 
    ```

这是假设您的集合是包含 id 和 name 属性的对象列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:30:51.243

1.  您应该`items`在连接之前定义变量。
2.  `item`在您的代码中`undefined`，您应该使用`value`已作为参数传递给处理程序的属性。
3.  您的对象没有`id`和`name`属性。

    ```
    var items = '';
    $.each(data,function(name,value) {
       items += "<option value='"+value.Site_ID+"'>"+value.FirstName+"</option>";
    });
    $("#clients").html(items); 
    ```

[http://jsfiddle.net/5PEPg/](http://jsfiddle.net/5PEPg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:31:11.183

你需要使用`value`. `<option/>`您还可以在`$.each`循环中创建并附加每个新的：

```
$(function(){
  $.getJSON('checkin.php',function(data){
    var lst = $("#clients").empty();
    $.each(data,function(index,value){
        $("<option/>").prop("value", value.Site_ID).text(value.FirstName + " " + value.LastName).appendTo(lst);
    });
  });
});​ 
```

这样做还可以防止解析`.html()`与连接字符串的调用有关的问题。例如，如果某人的名字或姓氏中有双引号，则 html 将无法解析。

# ruby-on-rails - selenium，例子如何选择链接，有的在TD的，有的没有？

> ID：14061486
> 
> 赞同：0
> 
> 时间：2012-12-27T21:25:09.613
> 
> 标签：ruby-on-rails, ruby, forms, selenium, anchor

有哪些关于如何使用 Selenium 选择链接的好例子？

我的一些链接在`table`s 中，其他带有`LI`'s 和其他有`ID`标签。

我有哪些选择“ `A`”锚标签的选项？

此外，还有哪些选项可以单击表单上的复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:25:09.613

我们点击命令：

一个 ' `A`' - 带有文本“日历”的锚标记：

```
xpath=(//a[contains(text(),'Calendar')])[2] 
```

在 LI 中，带有 ID 的列表元素复选框：

```
xpath=(//li[contains(@id,'activity_roles_input')]//input[@type="checkbox"][1]) 
```

在带有 ID 的 LI 之后，一个复选框：

```
xpath=(//li[contains(@id,'a_r_input')]/descendant::input[@type="checkbox"][2]) 
```

表 TD 中测试“Record12345”的删除链接：

```
xpath=(//td[text()='Record12345' ]/../..//a[contains(@class, 'delete')]  ) 
```

检查输入框：

```
xpath=(//label[contains(text(),'Roles')]/../div//input) 
```

选择某个表格行（带有文本“6 Day”），然后在该行上，第 8 个 td，然后是其中的锚点：

```
xpath=(//table[@id='prs']/tbody/tr[td[contains(.,'6 Day')]][1]/td[8]/a)@href 
```

选择具有“周一 - 周五”的表格行，然后在该行上选择第二个“a”链接，然后从中获取 href 属性：

```
xpath=

(//table/tbody/tr[1]/td[contains(text(),'M-F')]/following-sibling::*[2]/a)@href 
```

# java - 休眠返回空对象

> ID：14061489
> 
> 赞同：1
> 
> 时间：2012-12-27T21:25:31.997
> 
> 标签：java, eclipse, hibernate

我是使用休眠的新手，由于某种原因，当我使用以下代码时，我得到了一个空对象列表：

```
public static void main(String args[])
{
    Session s = HibernateUtil.currentSession();
    ArrayList lst = (ArrayList) s.createQuery("from Users").list();
    for(Object obj : lst){
        Users user = (Users)obj;
        System.Out.println(user.getUserid()); // null
    }
} 
```

我的休眠映射 xml 如下所示：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Dec 27, 2012 9:48:45 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="us.Users" table="USERS">
    <id name="userid" type="int">
        <column name="USERID" precision="9" scale="0" />
        <generator class="assigned" />
    </id>
    <property name="username" type="string">
        <column name="USERNAME" length="200"  />
    </property>
    <property name="password" type="string">
        <column name="PASSWORD" length="200" />
    </property>
    <property name="firstName" type="string">
        <column name="FIRST_NAME" length="200" />
    </property>
    <property name="lastName" type="string">
        <column name="LAST_NAME" length="200" />
    </property>
    <property name="dateOfBirth" type="timestamp">  // my guess was that the problem             appears with the timestamp property
        <column name="DATE_OF_BIRTH" />
    </property>
    <property name="registrationDate" type="timestamp">
        <column name="REGISTRATION_DATE" />
    </property>
    <one-to-one name="administrators" class="assignment2.Administrators"></one-to-one>
    <set name="histories" table="HISTORY" inverse="true" lazy="false" fetch="select">
        <key>
            <column name="USERID" precision="9" scale="0" not-null="true" />
        </key>
        <one-to-many class="us.History" />
    </set>
    <set name="loginlogs" table="LOGINLOG" inverse="true" lazy="false" fetch="select">
        <key>
            <column name="USERID" precision="9" scale="0" not-null="true" />
        </key>
        <one-to-many class="us.Loginlog" />
    </set>
</class> 
```

这是我的 hibernate.cfg.xml ：

```
 <?xml version="1.0" encoding="utf-8"?>
 <!DOCTYPE hibernate-configuration PUBLIC
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
 <hibernate-configuration>
  <session-factory>
        <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
    <property name="hibernate.connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
    <property name="hibernate.connection.password">abcd</property>
    <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:xe</property>
    <property name="hibernate.connection.username">SYSTEM</property>
    <property name="hibernate.default_schema">SYSTEM</property>
    <property name="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</property>
    <property name="hibernate.search.autoregister_listeners">false</property>
    <mapping resource="assignment2/History.hbm.xml" />
    <mapping resource="assignment2/Similarity.hbm.xml" />
    <mapping resource="assignment2/Loginlog.hbm.xml" />
    <mapping resource="assignment2/Users.hbm.xml" />
    <mapping resource="assignment2/Administrators.hbm.xml" />
    <mapping resource="assignment2/Mediaitems.hbm.xml" />
</session-factory> 
```

和用户类：

```
/**
 * Users generated by hbm2java
 */
public class Users implements java.io.Serializable {

private int userid;
private String username;
private String password;
private String firstName;
private String lastName;
private Date dateOfBirth;
private Date registrationDate;
private Administrators administrators;
private Set<History> histories = new HashSet<History>(0);
private Set<Loginlog> loginlogs = new HashSet<Loginlog>(0);

public Users() {
}

public Users(int userid) {
    this.userid = userid;
}

public Users(int userid, String username, String password,
        String firstName, String lastName, Serializable dateOfBirth,
        Serializable registrationDate, Administrators administrators,
        Set<History> histories, Set<Loginlog> loginlogs) {
    this.userid = userid;
    this.username = username;
    this.password = password;
    this.firstName = firstName;
    this.lastName = lastName;
    this.dateOfBirth = dateOfBirth;
    this.registrationDate = registrationDate;
    this.administrators = administrators;
    this.histories = histories;
    this.loginlogs = loginlogs;
}

public int getUserid() {
    return this.userid;
}

public void setUserid(int userid) {
    this.userid = userid;
}

public String getUsername() {
    return this.username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return this.password;
}

public void setPassword(String password) {
    this.password = password;
}

public String getFirstName() {
    return this.firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return this.lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public Date getDateOfBirth() {
    return this.dateOfBirth;
}

public void setDateOfBirth(Date dateOfBirth) {
    this.dateOfBirth = dateOfBirth;
}

public Date getRegistrationDate() {
    return this.registrationDate;
}

public void setRegistrationDate(Date registrationDate) {
    this.registrationDate = registrationDate;
}

public Administrators getAdministrators() {
    return this.administrators;
}

public void setAdministrators(Administrators administrators) {
    this.administrators = administrators;
}

public Set<History> getHistories() {
    return this.histories;
}

public void setHistories(Set<History> histories) {
    this.histories = histories;
}

public Set<Loginlog> getLoginlogs() {
    return this.loginlogs;
}

public void setLoginlogs(Set<Loginlog> loginlogs) {
    this.loginlogs = loginlogs;
} 
```

}

非常感谢提前

# jquery - 我需要为游戏玩家开发一个带有 jQ uery 的时钟

> ID：14061490
> 
> 赞同：-4
> 
> 时间：2012-12-27T21:25:35.840
> 
> 标签：jquery, html, css

好吧，我需要为 HTML 页面开发一个时钟，但我不想从用户的电脑时钟中获取`getHours`并`getMinutes`设置它以进行显示，我想获取这些值并将它们转换为游戏中的时间。问题是，这个时钟将由来自具有不同时间的特定游戏的用户使用。

每个实时分钟意味着游戏中的 6 分钟，因此 10 分钟是游戏中的 1 小时。这样，24 小时游戏对我们来说就是 4 小时。

这里有什么帮助吗？
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:42:01.680

首先获取游戏开始的时间（以秒为单位）。

```
var startSecs = (new Date()).getTime() / 1000; 
```

然后使用该数字进行计算以形成要显示的小时、分钟和秒。

```
// Times 6 converts to game seconds
var elapsedGameSecs = ((new Date()).getTime() / 1000) - startSecs) * 6;
// extract hours and minutes
var gameHour = elapsedGameSecs /3600;
var gameMinute = (elapsedGameSecs % 3600) / 60;
// generate a display string
if (gameMinute < 10) gameMinute = "0" + gameMinute;
var time = gameHour + ":" + gameMinute; 
```

您可以添加恒定数量的游戏内秒数，以使游戏时间从某个时间开始。例如，如果您希望开始时间为 8:00，则在提取和显示之前将 8 * 60 * 60 秒添加到 elapsedGameTime

请注意，在游戏中的 24:00 时间过去后，这将搞砸。如果您想将 12:00 用作午夜而不是 24:00，您还必须对此进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:45:22.043

这也是这样做的，没有做任何好的事情，比如格式化，但很容易理解：

```
​&lt;div id="clock">Clock</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

var hours = 0;
var minutes = 0;

$(document).ready(function() {
    setInterval(function() {
        updateClock()
    }, 1000);
});

function updateClock() {

    minutes +=6;

    if (minutes > 59) {
        minutes -= 60;
        hours++;
    }
    if (hours > 23) {
        hours = 0;
    }
    $("#clock").html(hours + ':' + minutes);
}​ 
```

jsfiddle 的链接：http: [//jsfiddle.net/6FkNJ/](http://jsfiddle.net/6FkNJ/)

根据需要更改小时和分钟开始时间以及间隔时间

# eclipse - Eclipse e4：IStartup 扩展不起作用

> ID：14061491
> 
> 赞同：0
> 
> 时间：2012-12-27T21:25:38.383
> 
> 标签：eclipse, eclipse-rcp, eclipse-juno, e4

我正在尝试扩展“org.eclipse.ui.startup”扩展点。但似乎在 eclipse e4 中，它甚至没有被调用。这个扩展在 eclipse e4(Juno) 中被破坏了吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:06:57.357

我遇到了同样的问题，找不到答案，但在这个过程中，我发现了 LifeCycleHandler，这对我的目的来说甚至更好。这对您来说可能也是一个不错的选择。

就像启动扩展一样，您可以从您的 plugin.xml 中引用处理程序：

```
<property name="lifeCycleURI" value="platform:/plugin/<plug-in-id>/<path-to-handler-class>" /> 
```

在处理程序中，您可以使用注释来标记要调用的方法以及依赖注入：

```
public class StartupHandler {
    @Inject
    Foo bar;

    @PostContextCreate
    public void startup(IEclipseContext context) {
       // do something
    }
} 
```

您可以在此处找到详细示例：[https ://marcteufel.wordpress.com/2011/05/05/231/](https://marcteufel.wordpress.com/2011/05/05/231/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T11:03:13.797

IStartup#earlyStartup() 需要兼容层，所以它在纯 E4 应用程序中不起作用。（见[#1](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_startup.html)）

要在纯 E4 应用程序中启动进程，您应该使用生命周期挂钩。所以：

从 plugin.xml 引用您的 ApplicationLifecycle 处理程序类

```
<property name="lifeCycleURI" value="platform:/plugin/<plug-in-id>/<path-to-handler-class>" /> 
```

编写您的生命周期处理程序类

```
public class ApplicationLifecycleHandler {

    @PostContextCreate
    public void startup(IEclipseContext context) {
       // do initialization 
    }
} 
```

添加一个钩子来处理应用程序启动完成时的事件

```
@PostContextCreate
public void postContextCreate(final IEventBroker eventBroker, etc .. ) {

    // 
    eventBroker.subscribe(UIEvents.UILifeCycle.APP_STARTUP_COMPLETE,
            new EventHandler() {
                @Override
                public void handleEvent(Event event) {
                    // Your code executed at startup,
                    // after application startup is completed
                }
            });

} 
```

(#1) [org.eclipse.ui.startup 扩展文档](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_startup.html)

# javascript - InArray 返回 -1 和匹配值

> ID：14061492
> 
> 赞同：1
> 
> 时间：2012-12-27T21:25:44.890
> 
> 标签：javascript, jquery, arrays

```
var x = new Array(10);
$.inArray(10,x);
#Returns -1 
```

[小提琴](http://jsfiddle.net/ccFCK/)

我遇到了这个奇怪的问题，用 来检查数组中的值`$.inArray`，真的很简单。

但是，如果数组中只有一个值，则`inArray`返回`-1`. 如果我向数组添加另一个值，它会按预期工作。

这只发生在整数而不是字符串。

这是怎么回事？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T21:28:15.447

如果你想创建一个包含一个数字（`10`）的数组，你应该使用括号文字：

```
var x = [10];
$.inArray(10,x); 
```

或推：

```
var x = new Array();
x.push(10); 
```

显然，第一个更具可读性和编写速度。

> 使用给定元素初始化 JavaScript 数组，**除非将单个参数传递给 Array 构造函数并且该参数是一个数字**。请注意，这种特殊情况仅适用于使用 Array 构造函数创建的 JavaScript 数组，而不适用于使用括号语法创建的数组文字。
> 
> **如果传递给 Array 构造函数的唯一参数是一个整数，则一个新的空 JavaScript 数组，其长度设置为该数字** [**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)

[固定小提琴](http://jsfiddle.net/ccFCK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:31:56.420

我建议检查 JavaScript 中数组的文档，链接：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)

在您的情况下，通过使用：

```
var x = new Array(10); 
```

它创建一个长度为 10 的数组，并且数组的每个项目都是*未定义的*

我建议使用：

```
var x = [10]; 
```

这是一个数组，其中一个索引为 0 的项目的值为 10。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:31:48.743

`var x = new Array(10);`创建一个包含 10 个插槽的数组，而不是包含“10”的数组

# c# - 获得半圆的积分

> ID：14061494
> 
> 赞同：0
> 
> 时间：2012-12-27T21:25:57.370
> 
> 标签：c#, xna, geometry

标题说了算。这个链接（[维基百科中点圆算法](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)）展示了如何获得一个完整的圆的点，现在我需要它是一个半圆（一个圆弧？）。 **它的半圆应该朝上，就像这张图片（[检查这张图片](https://encrypted-tbn1.gstatic.com/images?q=tbn%3aANd9GcQZNjQIJkifuvr5Gus6xfUQ5WtKfnAItZPdVaXrYXF5buYCRRB8lw)）但圆的底部应该是开放的！**

对于那些可能认为这是家庭作业的人来说，事实并非如此。我正在 Xna 中开发一款游戏，我希望从火箭发射器中出来的“火箭”通过特定的路径，一个半圆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:30:06.710

我不认为该算法是做你想做的事情的正确方法：描述一条路径。该算法用于沿着路径绘制像素，而不是这样描述它。相反，三角函数可能是您想要的。逐步增加从一点到另一点的角度。一个圆是 2π 弧度，所以半个圆是 π 弧度。

这应该提供您描述弧线所需的内容。[http://mathworld.wolfram.com/Trigonometry.html](http://mathworld.wolfram.com/Trigonometry.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:29:16.427

只需将中点圆算法用于值 where `y > 0`（假设圆的中点在`(0, 0)`）。任何低于它的东西都是“开放的”

# twitter-bootstrap - 单击标签时未选择单选按钮

> ID：14061496
> 
> 赞同：1
> 
> 时间：2012-12-27T21:26:12.457
> 
> 标签：twitter-bootstrap, radio-button, codeigniter-2

这是标记：

```
<label for="big" class="labels">
    <input type="radio" name="type" value="big" id="big"> Grandes images
</label> 
```

它是由此产生的：

```
<?php
    $radio_data = array('id'=>'big','name'=>'type','type'=>'radio','value'=>'big');
    echo form_label(form_input($radio_data)." Petites images\n",'small', $label_data);
?> 
```

当我单击标签时，通常会选择单选按钮，但这并没有发生。我正在使用**推特引导程序。**

**编辑：**

新的 HTML：

```
<span>
   <input type="radio" name="type" value="small" id="small">
   <label for="small" class="labels radio"> Petites images</label>
</span> 
```

新的PHP：

```
<?php
    echo form_input($radio1_data);
    echo form_label(" Petites images", 'small', $label_data);
?> 
```

但是，当点击标签时，仍然没有选择收音机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:36:29.860

您将`form_input()`作为参数传递给[form_label()](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)这是不正确的，因为`form_label()`需要以下参数：

`form_label($label_text = '', $id = '', $attributes = array())`

**尝试改变这个：**

```
echo form_label(form_input($radio_data)." Petites images\n",'small', $label_data); 
```

**至：**

```
echo form_input($radio_data) . form_label(" Petites images\n", $radio_data['id'], $label_data); 
```

输出最终应如下所示：

```
<input type="radio" name="type" value="big" id="big">
<label for="big" class="labels"> Petites images</label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T06:15:54.433

我不知道php，但我知道html。

尝试带来这样的输出：

```
<label for="big" class="labels">
    <input type="radio" name="type" value="big" id="big">
    <i>Grandes Images</i>   
</label> 
```

Twitter boostrap 与这个问题没有任何关系。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T21:30:08.267

那不是有效的 HTML。标签不包含输入，它们由`id`输入和`for`标签分隔和连接。查找[规格](http://www.w3schools.com/tags/tag_label.asp)。

# mp3 - 如何读取 mp3 文件中的标签？

> ID：14061497
> 
> 赞同：-1
> 
> 时间：2012-12-27T21:26:12.237
> 
> 标签：mp3

如何借助“Java ID3 标签库”读取 mp3 文件中的标签？我试过了，但没有任何反应。“Java ID3 Tag Library”网站上也没有任何示例。

```
BufferedInputStream fs = new BufferedInputStream(new FileInputStream(f));
int read = fs.read(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:32:13.190

事实上，有一个使用 Java ID3 标记库读取标记的示例：

[MP3 Tag java库快速入门](http://javamusictag.sourceforge.net/QuickStart.html)

# javascript - 如何通过数组循环创建具有innerHTML值/文本节点的表格单元格

> ID：14061499
> 
> 赞同：4
> 
> 时间：2012-12-27T21:26:25.093
> 
> 标签：javascript, for-loop, dom, dom-events

我尝试运行 Javascript 循环以从数组中创建一个包含值的表：我附加了文本节点并尝试将文本节点作为数组值，每个 td 一个长度。到目前为止，这是我的代码，它只会创建一个具有“未定义”值的单元格：

```
function addtd(){
      var table1 = document.getElementsByTagName('table')[0];
      var rowrow =  document.createElement('tr');
      var foods = new Array();

      foods[0] = "milk" ;`enter code here`
      foods[1] = "meat" ;
      foods[2] = "fruit" ;
      foods[3] = "fish" ;
      foods[4] = "salad" ;

      for ( var i=0;i<foods.length;i++)

      var cell1  =  document.createElement('td').innerHTML = 'foods[i]';    
      var text1 = document.createTextNode(foods[i]) ;

      cell1.appendChild(text1);
      rowrow.appendChild(cell1);
      table1.appendChild(rowrow);
      }

       <div id="divfood"> </div>
       <button onclick="addtd()">Click me</button>`enter code here`
       <table border="2" id="tabletable" cellspacing="5" >
       </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:30:16.147

我会改变这个 -

```
var cell1  =  document.createElement('td').innerHTML = 'foods[i]'; 
```

至

```
var cell1  =  document.createElement('td');
cell1.innerHTML = 'foods[i]'; 
```

当您将其 innerHTML 内联链接到 cell1 时，我不希望 cell1 会正确设置，但尚未对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:31:50.917

像这样的东西会遍历你的数组并创建一行，因为这似乎是你想要做的。

```
var foods = ["milk", "eggs", "lettuce", "tomato"],
    food,
    row = document.createElement("tr");

while (food = foods.shift()) {
    var el = document.createElement("td");
        el.innerText = food;

    row.appendChild( el );
}

document.getElementsByTagName("table")[0].appendChild(row); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T09:31:50.630

您的代码中有几个错误，包括`for`循环周围缺少大括号和第 6 行看起来很奇怪的`'enter code here'`句子。您还忘记将 JavaScript 代码放入`<script>`标签中。这是您的代码的工作版本：

```
<script>
function addtd(){
    var table1 = document.getElementsByTagName('table')[0];
    var rowrow =  document.createElement('tr');
    var foods = new Array();

    foods[0] = "milk" ;
    foods[1] = "meat" ;
    foods[2] = "fruit" ;
    foods[3] = "fish" ;
    foods[4] = "salad" ;

    for ( i=0; i <foods.length; i++) {
        var cell1  =  document.createElement('td');
        var text1 = document.createTextNode(foods[i]);
        cell1.appendChild(text1);
        rowrow.appendChild(cell1);
    }
    table1.appendChild(rowrow);
}
</script>

<div id="divfood"> </div>
<button onclick="addtd()">Click me</button>
<table border="2" id="tabletable" cellspacing="5" >
</table>   ​ 
```

这是[jsFiddle 演示](http://jsfiddle.net/a9cTN/1/)。

# hadoop - 如何指定 Hadoop MapReduce 作业生成的目录的权限？

> ID：14061506
> 
> 赞同：1
> 
> 时间：2012-12-27T21:27:02.800
> 
> 标签：hadoop, permissions

当我运行 Hadoop MapReduce 作业时，生成的所有目录都使用“rwxr_xr_x”作为权限。我想将它们更改为'rwxrwxrwx'，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:29:44.180

您可以`hadoop fs -chmod 777 your/directory`在事后使用它来更改它。或者在运行作业之前创建目录，并相应地设置它们的权限。您可能还可以设置该`dfs.umask`值，该值将控制创建目录的权限。

见[http://hadoop.apache.org/docs/r0.20.2/hdfs_permissions_guide.html](http://hadoop.apache.org/docs/r0.20.2/hdfs_permissions_guide.html)

# javascript - 预加载图像不起作用

> ID：14061507
> 
> 赞同：0
> 
> 时间：2012-12-27T21:27:10.880
> 
> 标签：javascript

我的脚本有问题。

我正在尝试将所有图像加载到一个数组中，然后在继续之前检查它们是否都已加载。但它不起作用我同样没有收到任何错误，所以我不确定出了什么问题。

这就是我所拥有的：

```
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback,  element){
            window.setTimeout(callback, 200 / 100);
          };
})();

function img_loader(){

for(var i in Images){
        Images[i]['img_src'].onload = function() {
            countImages ++;
        }
    }
}

function img_load_checker(){

    if(countImages == Images.length){
        return true;
    } else {
        requestAnimFrame( img_load_checker );   // keep checking
    }
}

window.countImages = 0;
img_loader();
    if(img_load_checker()){
            //this never gets executed - reason is unknown
    //continue with rest of the script
    } 
```

这是结构`console.log(Images);`

```
[1: Object, 2: Object]
1: Object
img_src: <img>
2: Object
img_src: <img> 
```

任何人都可以看到错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:38:21.083

你的 if 语句永远不会那样工作。

该函数调用不会神奇地坐在那里等待异步调用返回。

```
if(img_load_checker()){
        //this never gets executed - reason is unknown
//continue with rest of the script
} 
```

使用回电！

```
for(var i in Images){
        Images[i]['img_src'].onload = function() {
            countImages ++;
            if (countImages == Images.length) {
                callSomeMethod();  <-- Call back
            }
        }
    }
} 
```

或者

```
function img_load_checker(){

    if(countImages == Images.length){
        callNextStep();
    } else {
        requestAnimFrame( img_load_checker );   // keep checking
    }
}
img_load_checker(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:37:47.833

您不需要计时器：

```
Images[i]['img_src'].onload = function() {
    if(countImages++ >= Images.length)
    {
         loadingHasFinishedNowDoWhateverYouWant();
    }

} 
```

# regex - CIDR 表示法中 IPV6 地址的正则表达式

> ID：14061510
> 
> 赞同：6
> 
> 时间：2012-12-27T21:27:23.637
> 
> 标签：regex, ip-address, ipv6, lex, cidr

我正在尝试编写一个 lex 模式，它允许我识别 IPV6 地址，包括带有 CIDR 表示法的 IPV6 地址。我使用的模式如下所示。

```
IPV4ADDRESS_CIDR [ \t]*(((2(5[0-5]|[0-4][0-9])|[01]?[0-9][0-9]?)\.){3}(2(5[0-5]|[0-4][0-9])|[01]?[0-9][0-9]?)(\/(3[012]|[12]?[0-9])))[ \t]*
IPV4ADDRESS      [ \t]*(([[:digit:]]{1,3}"."){3}([[:digit:]]{1,3}))[ \t]*
hex4             ([[:xdigit:]]{1,4})
hexseq           ({hex4}(:{hex4})*)
hexpart          ({hexseq}|({hexseq}::({hexseq}?))|::{hexseq})
IPV6ADDRESS      [ \t]*({hexpart}(":"{IPV4ADDRESS})?)[ \t]*
IPV6ADDRESS_CIDR [ \t]*(IPV6ADDRESS)(\/(1[01][0-9]|12[0-8]|[0-9]{1,2}))[ \t]* 
```

IPV6ADDRESS_CIDR 的正则表达式没有按预期工作。我正在测试

```
2001:1234::5678:5:6:7:8/64 
```

它似乎无法正确识别。我在这里犯了一些错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:40:12.633

我设法获得了 IPV6 地址的正则表达式，如下所示。

IPV6ADDRESS_CIDR [ \t] *{IPV6ADDRESS}(/(1[01][0-9]|12[0-8]|[0-9]{1,2}))[ \t]*

我已经测试了上述内容，它正在工作。谢谢。

# coq - 在 Coq 表达式中使用“对称”

> ID：14061518
> 
> 赞同：0
> 
> 时间：2012-12-27T21:28:12.497
> 
> 标签：coq

我试图弄清楚如何在 Coq 中执行以下操作。假设我们已经证明了以下内容：

trans_lemma: a = b -> b = c -> a = c

我们想用它来推断

b = a -> c = b -> a = c。

无论我做什么，我似乎都无法让“应用 trans_lemma with ...”。看起来我需要重写 trans_lemma 中的方程，以便变量以相同的顺序匹配。是否有一些简单的方法可以做到这一点而无需修改引理，即我可以以某种方式在表达式中的方程上应用“对称”策略吗？

（我知道我可以通过使用一些介绍和重写来证明我想要什么而不使用引理，但我想知道是否有一种语法方式可以重用我已经拥有的结果。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:21:57.500

你不能对你的引理应用一些会神奇地改变它的形状的东西。你可以在这里做的是介绍你的等式`b = a`，`c =b`然后应用你的引理，留下两个目标，可以很容易地通过 的对称性来证明`=`。

总的来说，我认为您无法按照您希望的方式将策略应用于术语。

* * *

现在还有一些额外的事情：

*   如果`=`这里是 Coq 的等式，你实际上不需要引理，因为系统给了你传递性。

*   你的引理应该是多态的：`trans_lemma : forall {T} (a b c : T), a = b -> b = c -> c = d`。也许您向我们展示这个是因为您在一个部分中，但是一旦您关闭了该部分，您可能应该推断出第二个目标。

（您可能还对重用`Transitive`来自 ... 的类型类感兴趣`Coq.Classes.RelationClasses`）

# ruby-on-rails - 嵌套资源路由问题

> ID：14061521
> 
> 赞同：0
> 
> 时间：2012-12-27T21:28:24.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这可能很简单，但是我有一段时间没有弄乱rails了，我不确定自3.2以来情况是否发生了很大变化

所以我有两个模型，报告和收据。每份报告都有很多收据，所以我的模型看起来像：

```
class Report < ActiveRecord::Base

    has_many :receipts, :dependent => :destroy
  accepts_nested_attributes_for :receipts, :allow_destroy => true

    attr_protected :id

end
class Receipt < ActiveRecord::Base
    belongs_to :report

    attr_protected :id

    validates_presence_of :vendor, :date, :description, :amount, :acctCode
end 
```

我的收据控制器位于控制器文件夹的根目录中，并列出了所有操作（它是由脚手架生成的）

我的路线有：

```
root :to => "index#index"

resources :reports do
    resources :receipts
end 
```

我的 link_to 看起来像这样：

```
<%= link_to 'New Receipt', new_report_receipt_path, :class=>"btn btn-success" %> 
```

这给了我错误：

```
No route matches {:action=>"new", :controller=>"receipts"} 
```

我跑了 rake 路线，我得到了以下信息：

```
 report_receipts GET    /reports/:report_id/receipts(.:format)          receipts#index
                     POST   /reports/:report_id/receipts(.:format)          receipts#create
  new_report_receipt GET    /reports/:report_id/receipts/new(.:format)      receipts#new
 edit_report_receipt GET    /reports/:report_id/receipts/:id/edit(.:format) receipts#edit
      report_receipt GET    /reports/:report_id/receipts/:id(.:format)      receipts#show
                     PUT    /reports/:report_id/receipts/:id(.:format)      receipts#update
                     DELETE /reports/:report_id/receipts/:id(.:format)      receipts#destroy 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:34:15.490

您只是忘记在您的路线中提供报告 ID。这取决于您如何在视图中访问您的报告，但它必须类似于： `new_report_receipt_path(@report)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:31:26.970

那不应该是：

new_report_receipts_path

? 注意s，即

> link_to '新收据'，new_report_receipts_path，:class=>"btn btn-success"

# linq - 无法运行模型定义的功能

> ID：14061522
> 
> 赞同：1
> 
> 时间：2012-12-27T21:28:25.360
> 
> 标签：linq, entity-framework, entity-framework-4, edmx

例外：

> System.NotSupportedException：“Zx.Data.zxEntities”类型上的指定方法“Int32 CastToInt(System.String)”无法转换为 LINQ to Entities 存储表达式，因为调用它的实例不是其上的 ObjectContext评估使用它的查询。

.edmx 文件声明：

```
<!-- CSDL content -->
<edmx:ConceptualModels>
  <Schema Namespace="zxModel" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
  <!-- blah-blah-blah -->
  <Function Name="CastToInt" ReturnType="Edm.Int32" >
    <Parameter Name="p" Type="Edm.String" />
    <DefiningExpression>
      CAST (p AS Edm.Int32)
    </DefiningExpression>
  </Function>
  </Schema>
</edmx:ConceptualModels> 
```

.Net 函数声明：

```
namespace Zx.Data
{
    using System;
    using System.Data.Objects;
    using System.Data.Objects.DataClasses;

    public partial class zxEntities  
    {
        [EdmFunction("zxModel", "CastToInt")]
        public int CastToInt(String p)
        {
            throw new NotSupportedException("This function is only for L2E query.");
        }
    }
} 
```

调用函数：

```
var suppliers = entities.tblFirmPrice.Where(x => x.cat_Id == item.Cat_id)
    .Join(entities.Firms, fp => fp.frm_Id, f => f.Frm_Id,
        (fp, f) => new
        {
            fp.frm_Id,
            Price = fp.fp_FirmPrice,
            Discount = entities.tblFirmDiscount.Where(
                       x => entities.CastToInt(x.frm_id) == fp.frm_Id)
                       .OrderByDescending(x => x.fd_id)
                       .Select(x => x.fd_discount)
                       .FirstOrDefault(),
            PriceMarkup = entities.CastToInt(
                          SqlFunctions.StringConvert(f.Frm_IcsAdd))
        })
        .Select(x => new
        {
            x.frm_Id,
            Price = x.Price * (1 - ((((int?)x.Discount) ?? 0) / 100M)),
            x.PriceMarkup
        }); 
```

：-（ 有什么建议么？

PS：在编码时，使用[了 http://msdn.microsoft.com/en-us/library/dd456857.aspx](http://msdn.microsoft.com/en-us/library/dd456857.aspx)，[http://msdn.microsoft.com/en-us/library/dd456857.aspx](http://msdn.microsoft.com/en-us/library/dd456857.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:43:38.637

您是否尝试过使用 Convert.ToInt32 方法？

```
Discount = entities.tblFirmDiscount.Where(
              x => Convert.ToInt32(x.frm_id) == fp.frm_Id) 
```

# powershell - 执行直到循环错误

> ID：14061523
> 
> 赞同：1
> 
> 时间：2012-12-27T21:28:27.170
> 
> 标签：powershell

```
do{
$ActionVariable = Read-host "Do you want to delete a folder or empty a folder ? [D/E]"
}
until($ActionVariable = "E" -or"D") 

Read-host 
```

您好，我正在尝试编写一个脚本，让用户选择清空文件夹或将其作为一个整体删除。我写了一个 do until 循环，它似乎不起作用。我是否定义了直到错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T21:34:00.950

这应该会更好：
`until ($ActionVariable -eq 'E' -or $ActionVariable -eq 'D')`

或者也许是这样：
`until ('E','D' -contains $ActionVariable)`

# r - GGplot2中面板背景的条件格式

> ID：14061524
> 
> 赞同：4
> 
> 时间：2012-12-27T21:28:28.800
> 
> 标签：r, ggplot2, regression

我想知道是否有一种“直接”的方式将 ggplot facet 面板中的回归线的斜率链接到该面板的背景颜色（即在视觉上将大网格中的正斜率与负斜率分开）。

我了解如何在 GGplots 中添加回归线 - 正如[在 R 中使用 qplot 添加回归线到 facet_grid 中所解释的那样](https://stackoverflow.com/questions/12572035/adding-a-regression-line-to-a-facet-grid-with-qplot-in-r)

如果您之前已将此信息添加到原始数据框中，我也了解如何更改背景 - 如[使用 facet_grid 有条件地更改面板背景中所述？](https://stackoverflow.com/questions/9847559/conditionally-change-panel-background-with-facet-grid)

但是 - 有没有办法在“geom_rect”公式中执行此操作，而不必例如单独运行回归，将它们绑定到原始数​​据帧，然后将其用作 geom_rect() 的变量？geom_rect() 有没有办法使用来自 stat_smooth() 的信息？

沃特

早期问题的简单回归线图的好例子：

```
library(ggplot2)
x <- rnorm(100)
y <-  + .7*x + rnorm(100)
f1 <- as.factor(c(rep("A",50),rep("B",50)))
f2 <- as.factor(rep(c(rep("C",25),rep("D",25)),2))
df <- data.frame(cbind(x,y))
df$f1 <- f1
df$f2 <- f2

ggplot(df,aes(x=x,y=y))+geom_point()+facet_grid(f1~f2)+stat_smooth(method="lm",se=FALSE) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T23:03:04.520

这不完全是一个解决方案，而是一种解决方法。但结果似乎很好。您链接到的两个帖子都有解决方案的每个部分。[James 的解决方案在这里](https://stackoverflow.com/questions/9789871/method-to-extract-stat-smooth-line-fit)告诉您如何从`stat_smooth`. [Joran 的解决方案在这里](https://stackoverflow.com/questions/9847559/conditionally-change-panel-background-with-facet-grid)讲述了如何使用`geom_rect`来填充背景。

```
# generating data: Usage of set.seed for reproducibility 
# also I changed the multiplication constant to 0.1 to have 
# at least one negative slope.

require(ggplot2)
set.seed(12)
x <- rnorm(100)
y <-  + .1*x + rnorm(100)
f1 <- as.factor(c(rep("A",50),rep("B",50)))
f2 <- as.factor(rep(c(rep("C",25),rep("D",25)),2))
df <- data.frame(cbind(x,y))
df$f1 <- f1
df$f2 <- f2

# first generate your plot in this manner and run it
# from James' post, the part outfit=fit<<-..y.. will store 
# the output of fitted values in "fit"

g <- ggplot(df,aes(x=x,y=y)) + geom_point()+facet_grid(f1~f2) 
g <- g + stat_smooth(aes(outfit=fit<<-..y..), method="lm",se=FALSE)
# now run g to generate "fit"
g

# now extract the slope for each facet and 
# construct the data.frame for geom_rect (as per Joran's post)
# Edit: Just to add more info about "fit". By default it contains
# 80 values per facet. Hence the 80*4 = 320

slopes <- fit[seq(2, 320, by = 80)] - fit[seq(1, 320, by = 80)]
tp <- unique(df[, c('f1', 'f2')])
tp <- transform(tp, slopes=slopes, x=1, y=1)
tp$pos_neg <- ifelse(slopes > 0, 1, 0)
tp$pos_neg <- factor(tp$pos_neg)

# now plot again (but with geom_rect)
g <- ggplot(df,aes(x=x,y=y)) 
g <- g + geom_rect(data = tp, aes(fill = pos_neg), xmin = -Inf, xmax = Inf, ymin = -Inf, ymax = Inf, alpha = 0.5) 
g <- g + geom_point() + facet_grid(f1~f2) + stat_smooth(method = "lm",se = FALSE)
g 
```

输出看起来像![这](../Images/423515a755a0f5b003f5c9c190b355a8.png). 我不确定这是否是您所期望的。严格来说，您确实计算了两次拟合值，但两次您都使用`stat_smooth`. 就像我说的，它只是一种解决方法。

# c++ - OpenGL 应用程序在其他计算机上崩溃

> ID：14061525
> 
> 赞同：2
> 
> 时间：2012-12-27T21:28:29.400
> 
> 标签：c++, windows, visual-studio, opengl

我在 Windows 8 64 位的 Visual Studio 2012 中用 C++ 开发了一个 OpenGL 应用程序。它在我的本地机器上运行良好。该应用程序使用静态链接的库 GLEW、SFML 和 GLM。

现在我想在另一台机器上测试应用程序。所以从发布编译中复制了可执行文件（以及带有着色器文件的文件夹）。窗口显示为白色，但一秒钟后由于未知原因崩溃了。然后我安装了 Visual Studio 2012 并在新机器上编译了源代码，但我得到了同样令人失望的结果。

应用程序在新机器上崩溃的原因是什么？我可以尝试什么？

顺便说一句，两台机器都使用 AMD Phenom II 处理器和带有最新稳定驱动程序的 Radeon 显卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:23:11.267

你说你使用 GLEW。你检查 GLEW 初始化是否真的成功了？即使有，你真正需要的所有功能都在那里吗？

如果另一台机器不支持您通过 GLEW 访问的高级函数，则这些函数指针将是空指针，使用它们会使程序崩溃。

# android - Foregin 关键问题 android SQLite

> ID：14061528
> 
> 赞同：0
> 
> 时间：2012-12-27T21:28:49.513
> 
> 标签：android, sqlite

我想问一下我的代码中我的外键不起作用的问题是什么。主键运行良好。我有 3 个表，以这种方式创建：（有些词可以是波兰语，因为我这样做是为了传递主题，但这些词不重要（我猜））

```
private static final String TABLE_CONTACTS = "Kontrahenci";
private static final String KEY_ID = "id";
private static final String KEY_NAME = "imie";
private static final String KEY_SURNAME = "nazwisko";
private static final String KEY_STREET = "ulica";
private static final String KEY_NRB = "numerBudynku";
private static final String KEY_NRL = "numerLokalu";
private static final String KEY_KOD = "KodPocztowy";
private static final String KEY_CITY = "Miejscowosc";
private static final String KEY_NIP = "NIP";
private static final String KEY_TEL = "Telefon";
private static final String KEY_EMAIL = "Email";

private static final String</b> DATABASE_CREATE = "CREATE TABLE " 
+ TABLE_CONTACTS + " ( " 
        + KEY_ID +" INTEGER PRIMARY KEY, " 
+ KEY_NAME +" TEXT, " 
+ KEY_SURNAME+" TEXT, "  
+KEY_STREET+" TEXT, " 
+KEY_NRB+" INT(4), " 
+KEY_NRL+" INTEGER(4), " 
+KEY_KOD+" INTEGER(5), " 
+KEY_CITY+" TEXT, " 
+KEY_NIP + " TEXT, " 
+ KEY_TEL+" TEXT, " 
+KEY_EMAIL+" TEXT "+" ); ";

 private static final String TABLE_PRODUCTS= "Produkty"; 
private static final String KEY_IDPROD = "id"; 
private static final String KEY_NAMEPROD = "nazwa"; 
private static final String KEY_IMG = "obraz"; 
private static final String KEY_PRICE = "CENA"; 
 private static final String  DATABASE_PRODUCTS_CREATE = "CREATE TABLE "  
+ TABLE_PRODUCTS + " ( "  
        + KEY_IDPROD +" INTEGER PRIMARY KEY, " 
+ KEY_NAMEPROD +" TEXT, " 
+ KEY_IMG+" NUMBER, "  
+KEY_PRICE+" REAL" + " ); "; 

private static final String TABLE_ORDER = "Zamowienia"; 
private static final String KEY_IDORD = "id"; 
private static final String KEY_ID1  = "id_kon"; 
private static final String KEY_ID2 = "id_prod"; 
private static final String KEY_ILOSC = "ilosc"; 
private static final String KEY_STATUS = "Status"; 

 private static final String DATABASE_ORDERS_CREATE = "CREATE TABLE " + TABLE_ORDER + " ( " 
+ KEY_IDORD + " INTEGER PRIMARY KEY, "  
+ KEY_ID1 + " INTEGER, " 
+ KEY_ID2 +" INTEGER, " 
+ KEY_ILOSC + " INTEGER, " 
        + KEY_STATUS + " TEXT, " 
+"FOREIGN KEY (id_kon) REFERENCES "+ TABLE_CONTACTS +"(id), "  
+"FOREIGN KEY (id_prod) REFERENCES " + TABLE_PRODUCTS +"(id));" ; 

public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

  db.execSQL(DATABASE_CREATE);
 db.execSQL(DATABASE_PRODUCTS_CREATE);
 db.execSQL(DATABASE_ORDERS_CREATE);

 if (!db.isReadOnly()) {
    db.execSQL("PRAGMA foreign_keys=ON;");
  }
} 
```

后来我以这种方式向所有人插入数据：

```
public void addProdukt (Produkt produkt){ 
    SQLiteDatabase db = this.getWritableDatabase(); 
    ContentValues values = new ContentValues(); 
    values.put(KEY_NAMEPROD, produkt.getnazwa()); 
    values.put(KEY_IMG, produkt.getZdj()); 
    values.put(KEY_PRICE, produkt.getCena()); 
db.insert(TABLE_PRODUCTS, null, values); 
db.close();} 

 public void addZamow (Zamowienie zamowienie){ 
    SQLiteDatabase db = this.getWritableDatabase(); 
    ContentValues values = new ContentValues(); 
    values.put(KEY_ID1, zamowienie.getIDk()); 
    values.put(KEY_ID2, zamowienie.getIDp()); 
    values.put(KEY_ILOSC, zamowienie.getIlosc()); 
    values.put(KEY_STATUS, zamowienie.getStatus()); 
    db.insert(TABLE_ORDER, null, values); 
    db.close(); 
} 
```

所有没有的表`FOREIGN KEY`都工作正常，但是当我想获取所有数据时，这个表显示“找不到源”。我通过更新`Integer values`并稍后通过按钮应用到表来从 Spinners 添加此密钥，但即使我手动输入

```
db.addZamow(new Zamowienie(1,1,x,tstatus)); 
```

我仍然有这个错误。要获取这些元素的所有列表，我正在使用此函数：

```
public List<Zamowienie> getAllZamowienie(){

    SQLiteDatabase db = this.getWritableDatabase();
    List<Zamowienie> zamowlist = new ArrayList<Zamowienie>();

    String selectQuery = "SELECT * FROM " + TABLE_ORDER;

    Cursor cursor = db.rawQuery(selectQuery, null);

    if(cursor.moveToFirst()){
        do{
            Zamowienie zamow = new Zamowienie();
            zamow.setID(Integer.parseInt(cursor.getString(0)));
            zamow.setIDk(Integer.parseInt(cursor.getString(1)));
            zamow.setIDp(Integer.parseInt(cursor.getString(2)));
            zamow.setIlosc(Integer.parseInt(cursor.getString(3)));
            zamow.setStatus(cursor.getString(4));

            zamowlist.add(zamow);
        }while(cursor.moveToNext());
    }

    return zamowlist;   
} 
```

此行之后出现错误：`zamow.setIDk(Integer.parseInt(cursor.getString(1)));`

你知道我怎样才能让它工作吗？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:53:22.610

```
java.lang.NumberFormatException: Invalid int: "null" 
```

您的数据库中有空值...您可以通过使用`default`值设置表来防止将来发生这种情况： `+ KEY_ID1 + " INTEGER DEFAULT 0, "`。要更正当前表中的数据，请使用`UPDATE`命令将所有空值更改为适当的`default`值。

*另一种方法是每次*检查*每个*值：

 *```
String value = cursor.getString(1);
if(value != null)
    zamow.setIDk(Integer.parseInt(value)); 
```

但这是解决问题的*最慢方法。*
同样，如果您使用适当的方法，`getInt()`：

```
zamow.setIDk(cursor.getInt(1)); 
```

你可能没有这个问题...*

# ivy - 如何从工件访问自定义 jar 文件

> ID：14061530
> 
> 赞同：0
> 
> 时间：2012-12-27T21:28:49.373
> 
> 标签：ivy, artifactory

当我将自定义 jar 文件即 name1.3.jar 部署为 maven 工件时，它会使用 name1.3-name1.3.jar 更改 jar 名称，我真的不想更改名称，所以我取消选中“部署为 Maven 工件”并将目标路径设置为 name/1.3/name1.3.jar。现在，当我尝试获取依赖项标签来访问此 jar 文件时，它没有给我一个选项，我按照教程进行了尝试，但找不到该文件。这是我的依赖标签。

```
<dependency org="name" rev="1.3"> 
  <artifact name="name1.3.jar"/> 
</dependency> 
```

我的 ivysetting.xml 文件中只有一个解析器，我还需要一个吗？

```
<resolvers>
 <ibiblio name="main" m2compatible="true" root="http://abcd.com/libs-release />
  <filesystem name="public">
    <ivy pattern="${opt_dir}/ivys/ivy-[revision].xml" />
    <artifact pattern="${opt_dir}/[revision]/[artifact]-[revision].[ext]" />
  </filesystem> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:27:26.687

您正在使用 m2 compatible 解析器，因此工件路径应该与 maven2 兼容。这意味着 org 和 artifact 都应该存在于路径中。您应该将此工件部署到 name/name/1.3/name1.3.jar

依赖项应该是：

```
<dependency org="name" name="name" rev="1.3">
  <artifact name="name" type="jar"/>
</dependency> 
```

# objective-c - ABPersonViewController 在视图中带有自定义按钮

> ID：14061532
> 
> 赞同：2
> 
> 时间：2012-12-27T21:29:01.570
> 
> 标签：objective-c, ios, button, abpersonviewcontroller

我想在我的 ABPersonViewController 底部添加自定义按钮。我不想只启用allowActions，因为我不想要默认行为。相反，我考虑了两种方法来做到这一点：

A. 为基本的 Person View 创建我自己的自定义视图控制器，并且仅在用户按下编辑时推送 ABPersonViewController。我将默认情况下将 ABPersonViewController 设置为编辑模式：

```
[myPersonViewController setEditing:YES animated:NO  ] 
```

但是 ABPersonViewController 中的工具栏不会将用户带回我的自定义视图控制器，而是非编辑/基本模式下的 ABPersonViewController。我已经看到有关在基本模式下修改导航栏上的按钮的堆栈溢出信息（http://stackoverflow.com/questions/2376531/custom-actions-on-abpersonviewcontroller），但它们在编辑模式下不会改变。任何想法如何解决？

B. 第二种方法是禁用 ABPersonViewController 中的 allowActions 并简单地将按钮添加到视图控制器：

```
[button addTarget:self action:@selector(returnFromEdit) forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80, 210, 20, 400);
[myPersonViewController.view addSubview:button]; 
```

但我担心这种方法会让我的应用程序被 Apple 拒绝，因为他们在文档中指出不应修改 ABPersonViewController 的外观。事实上，苹果可能会拒绝第一种方法的变化？有什么想法吗？

# java - 进行 Apache HttpClient 调用时出现 URI 异常

> ID：14061540
> 
> 赞同：1
> 
> 时间：2012-12-27T21:29:45.117
> 
> 标签：java, base64, uri, apache-httpclient-4.x

我正在使用 Apache`HttpClient v4.2.2`尝试点击一个 URL，并且得到一个`URISyntaxException`我似乎无法弄清楚的：

```
try {
    String uri = "http://a.example.com/12/allrigh/bouncer?my_key1=i[(Gz$xrCcCeaCrHv}[5Ryou4kz@Yh~c@K_if-p7vGQ3ZF[fEpm2SmH(Z6Yh40Ea";

    HttpClient httpClient = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(uri);
    HttpResponse response = httpClient.execute(httpGet);
} catch(Throwable throwable) {
    // Log & handle
}

Exception in thread "main" java.lang.IllegalArgumentException
    at java.net.URI.create(URI.java:859)
    at org.apache.http.client.methods.HttpGet.<init>(HttpGet.java:69)
    ...
Caused by: java.net.URISyntaxException: Illegal character in query at index 65: http://a.example.com/12/allrigh/bouncer?my_key1=i[(Gz$xrCcCeaCrHv}[5Ryou4kz@Yh~c@K_if-p7vGQ3ZF[fEpm2SmH(Z6Yh40Ea
    at java.net.URI$Parser.fail(URI.java:2825)
    at java.net.URI$Parser.checkChars(URI.java:2998)
    at java.net.URI$Parser.parseHierarchical(URI.java:3088)
    at java.net.URI$Parser.parse(URI.java:3030)
    at java.net.URI.<init>(URI.java:595)
    at java.net.URI.create(URI.java:857)
    ... 6 more 
```

据我所知，第 65 个字符是“ `H`”……所以这是怎么回事？！？除了找出我的 URI 有什么问题之外，下一个明显的问题是：我能做些什么来解决这个问题？我需要对 URI 进行 base-64 编码吗？如果是这样，怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:38:07.957

我不太明白如何计算字符以及索引 65 的位置。但是您的 URL 中的无效字符是大括号（请参阅[https://stackoverflow.com/a/7109208/413337](https://stackoverflow.com/a/7109208/413337)）。

为什么你的网址看起来像这样？这些花括号是从哪里来的？

除非服务器期望这样，否则您不能对查询参数进行 Base64 编码。此外，查询参数看起来好像是 Base64 编码的。但是 Base64 编码的常规字符集不是 URL 安全的。

对查询参数进行 URL 编码可能会有所帮助。请参阅[URLEncoder.encode(String, String)](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)。

# html - 如何在可用时通过服务器同步使 Ember.js 应用程序脱机

> ID：14061549
> 
> 赞同：8
> 
> 时间：2012-12-27T21:30:15.483
> 
> 标签：html, ember.js, offline, breeze

有没有处理这个的图书馆？像[backbone.offline](https://github.com/Ask11/backbone.offline)一样吗？如果没有，用Ember.js 会很难实现吗？

**更新**

这个[问题](https://stackoverflow.com/questions/15005419/how-to-make-an-angular-js-app-offline-with-server-sync-when-available "问题")有两个可以提供帮助的库，Breeze.js 和 Jaydata..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T10:01:36.237

[`ember-localstorage`](https://github.com/rpflorence/ember-localstorage-adapter)可以使用适配器。

它可以像其他适配器一样使用。

```
App.store = DS.Store.create({
  revision: 11,
  adapter: DS.LSAdapter.create()
}); 
```

另一个很好的 ember 和 rails 库是[`ember-data-sync.js`](https://github.com/panayi/ember-data-sync)

从 DS.SyncStore 扩展您的 App.Store。定义要用于客户端存储的适配器：

```
App.Store = DS.SyncStore.extend({
      revision: 10,
      adapter: DS.IndexedDB.adapter({
        mappings: {
          person: App.Person,
          persons: App.Person,
          contact: App.Contact,
          contacts: App.Contact
        }
      })

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T23:42:39.557

没有用于此的库，但您可以使用自定义适配器来实现它。适配器 API 的文档并不多，到目前为止，核心中唯一可用的文档是[`RESTAdapter`](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js)和[`FixtureAdapter`](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/fixture_adapter.js).

您基本上需要做的是实现几个钩子并将其插入应用程序的存储中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T16:12:35.307

也在寻找解决方案，并遇到了[ember-sync](https://github.com/kurko/ember-sync)项目。

该项目搭载 Ember-Data，已`ember-cli`准备就绪，并具有智能处理后端记录 CRUD 的排队功能。从我的简要研究来看，我会说这是 Ember.js 离线应用程序的主要项目。

我对这个项目提出的一个批评是，它还应该能够适应[epf.io](http://epf.io)，它本身就是 Ember-Data 的替代品，并提供事务性 CRUD、嵌套存储——甚至是每个模型嵌套存储功能。

在撰写本文时，该项目仍处于 alpha 阶段，尽管它似乎正朝着正确的方向前进。

# javascript - 如何全选 在一个 有一个类名“nav”？

> ID：14061554
> 
> 赞同：21
> 
> 时间：2012-12-27T21:31:04.097
> 
> 标签：javascript, jquery, css, jquery-selectors

由于我是 jQuery 新手，因此遇到了真正的困难，但我不确定我正在处理的教程是否已损坏，或者是否是我，但我正在使用以下代码选择 ul 中的所有 li与一类导航。

```
$(".nav ul li"); 
```

它是否正确？有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-27T21:33:23.913

建设性地，

1.  所有`ul`元素：

    ```
    $("ul") 
    ```

2.  所有`ul`具有类名的元素`nav`：

    ```
    $("ul.nav") 
    ```

3.  具有 classname 的所有`li`元素下的所有元素：`ul``nav`

    ```
    $("ul.nav li") 
    ```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-11T20:11:39.577

这里有一个技巧可以帮助人们学习选择器：

使用 Chrome 浏览器 打开任何页面 右键单击​​页面并选择“检查元素” 在元素检查器中选择控制台选项卡

您可以直接在此控制台中键入命令。只尝试几个选择器，看看你会得到什么。如果您键入 $('p') 并按回车键，它将列出所有 p 元素。如果您输入 $('ul.nav li)，它将显示该选择器是否有效（返回任何内容）。如果命令没有产生有效的选择器，它将返回 []。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T21:31:41.213

将其附加在[元素选择器](http://api.jquery.com/element-selector)之后：

```
$("ul.nav li"); 
```

这会选择`<li>`一个元素中的所有`<ul class="nav">`元素

请参阅文档：[http ://api.jquery.com/class-selector/](http://api.jquery.com/class-selector/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T21:32:25.847

> 选择 ul 中具有 nav 类的所有 li

像这样，选择 ul 中的所有 li`.nav`类：

```
$('ul.nav li') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-27T21:32:45.177

ul 中的所有 li 都具有 nav 类：

```
$("ul.nav li"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-10T08:54:46.693

```
$('ul.nav li') 
```

按照建议选择 ALL `<li />`in `<ul class="nav" />`。如果您只希望直系子女使用：

```
$('ul.nav > li') 
```

[https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator](https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator)

# ruby-on-rails-3 - 在 RSpec2 控制器测试（使用 render_views）中，找到视图实例

> ID：14061556
> 
> 赞同：1
> 
> 时间：2012-12-27T21:31:16.840
> 
> 标签：ruby-on-rails-3, view, internationalization, controller, rspec2

我正在编写一个缺少翻译查找的测试——而且我是 RSpec 的初学者。换句话说，我正在编写一个规范，在视图中，所有可见文本都通过 translate 方法传递。

我指的不是缺少翻译，而是缺少翻译查找（源代码缺少对#t 或#translate 方法的调用）。

为此，我想存根 i18n 翻译方法 (I18n#t)。

为此，我如何找到 RSpec2 正在使用的视图实例？此视图实例包括模块 ActionView::Helpers::TranslationHelper。如果我可以访问该视图对象，我可以（我认为）存根它的翻译方法。顺便说一句，我想我应该从@controller 开始。

规范中的所有其他内容都以通常的方式工作（包括失败的测试），除了查找和存根视图的翻译帮助器方法#t。我正在使用渲染视图。

我尝试过（以各种方式）#helper、#translate 和#view。也许我错过了什么？

在 ObjectSpace 中（在我的测试中）使用方法#translate 搜索所有对象，我能够抓取该对象，因为它的类是 I18n::Backend::Simple。所以我的规范有效，但如果代码不必搜索 ObjectSpace 的话，它可能会快得多！

作为背景，到目前为止，最简单的测试计划似乎是在 RSpec 控制器测试中循环遍历每个控制器的操作，并寻找可见的字母字符。首先，将 Rails 翻译助手存根以返回空字符串。此外，还可以去除标签名称以及任何脚本和样式标签。

我的 Gemfile 包括 capybara 1.1.4、capybara-webkit 0.12.1、factory_girl 4.1.0、factory_girl_rails 4.1.0、rails 3.2.9、rspec 2.12.0、rspec-rails 2.12.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T01:45:01.483

即使在找到正确的对象之后，神秘的 RSpec 的存根（或者我认为）正在破坏其他测试：

```
before(:each) { object.stub   :translate, true }
after( :each) { object.unstub :translate       } 
```

相反，我成功地使用了：

*   I18n::Backend::Simple 的实例方法#translate 上的 Alias_method_chain 和
*   一个 Ruby 全局变量，用于将 #translate 切换为空字符串模式。

后来我得出结论，很可能是 Formtastic 的 i18n 缓存破坏了其他测试。为了解决这个问题，正确的设置（在 config/initializers/formtastic.rb 中）是：

```
Formtastic::FormBuilder.i18n_cache_lookups = ! (Rails.env.development? || Rails.env.test?) 
```

不过，我仍然没有找到视图实例。这就是我想知道的问题！所以，请给我答案，我会接受一个有效的。

# php - 使用 OpenCart 时正确的语言“区域设置”是什么

> ID：14061566
> 
> 赞同：0
> 
> 时间：2012-12-27T21:32:06.770
> 
> 标签：php, locale, opencart

我被要求在 OpenCart 中设置语言扩展。我目前正在填写此表格：

![在此处输入图像描述](../Images/4307e8e3905be913fc7d3126d7051553.png)

我不是 100% 确定在“区域设置”字段中输入什么。

有人可以帮我吗？

非常感谢，圣诞快乐 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:34:55.117

假设您在法国，那么您可能想要`fr_FR`或`fr_FR.UTF-8`。

在这种情况下，语言环境是语言和地区的组合，`french`并且`France`. `.UTF-8`还指定字符编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T22:04:22.307

我相信您应该使用的完整正确字符串是

```
fr_CA.UTF-8,fr_FR.UTF-8,fr_CA,fr_FR,fr-fr,french 
```

这来自以下扩展的文档 [http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6832](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6832)

# sql-server-2005 - 将本地 DB2 表中的数据追加到远程 SQL Server 表

> ID：14061574
> 
> 赞同：1
> 
> 时间：2012-12-27T21:32:30.203
> 
> 标签：sql-server-2005, jdbc, ibm-midrange

我整天都在做这个，但我仍然很难过。我正在尝试将本地 (AS400/i5) DB2 表中的数据附加/插入到远程 SQL Server 2005 表中，作为在 i5 上运行的程序的一部分。我的主要攻击角度是使用 Java/JDBC 访问 MSSQL 表，但到目前为止还没有运气。看起来这应该很容易，但是找到有用的信息却出奇的困难。如何使两个单独的连接以编程方式交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T01:57:20.000

我从 Scott Klement- 学习了从 RPG 访问 SQL Server。[http://www.scottklement.com/jdbc/](http://www.scottklement.com/jdbc/)

希望这能解决您的问题 - 到目前为止对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:48:13.980

如果您使用的是带有 Technology Refresh 4 [TR4] 的 IBM i 7.1，那么您可以在标准命名规则下使用 3 部分命名，这意味着 rdbname.schema.table（或视图）。这使单个 SQL 语句能够引用两个不同系统上的数据。

需要将 SQL-Server 数据库添加为 IBM i 关系数据库目录条目 ( `ADDRDBDIRE`)。阅读[这篇文章](http://www-912.ibm.com/s_dir/slkbase.NSF/0/5a3856efecb7f19f8625672b006cee76)了解详情。为了便于讨论，假设您将条目称为“msdb”。

然后，您应该能够像这样从 SQL Server 复制：

```
INSERT INTO localdb2table (columnlist)
    SELECT columnlist 
        FROM msdb.schema.sometable 
```

（警告：我还没有在 TR4 上，所以我无法测试这个答案。）

# magento - 将侧面分层导航中的 Magento 子类别更改为指向实际类别

> ID：14061575
> 
> 赞同：1
> 
> 时间：2012-12-27T21:32:34.787
> 
> 标签：magento, url, layered-navigation

我想知道是否有任何方法可以更改侧边栏导航的 URL 以指向实际类别。

例如，有一个父类别小部件，其子类别为计算机小部件、笔记本电脑小部件、电话小部件。如果您通过主导航导航到手机小部件 SEO 友好 URL 将是 www.example.com/widgets/phone-widgets，但如果您单击小部件类别，默认情况下，您将拥有带有类别的侧边栏过滤导航计算机小部件、笔记本电脑小部件, 手机小部件。如果在此页面上单击电话小部件，则页面的 URL 将为 www.example.com/widgets?cat=3。

有没有办法让这些侧面类别链接指向 www.example.com/widgets/phone-widgets 而不是 www.example.com/widgets?cat=3？我真的很想通过 Magento 代码而不是扩展或 301 重定向来做到这一点。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T03:12:25.780

我创建了一个模块来解决这个错误。

[https://github.com/jruzafa/Devopensource_LayerCatSeo](https://github.com/jruzafa/Devopensource_LayerCatSeo)

谢谢，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:53:11.637

使用此代码加载给定的类别（按 ID）

```
$category = Mage::getModel('catalog/category')->load($categoryId); 
```

使用它来获取友好的 URL

```
$category->getCategoryUrl(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-08T15:03:53.340

您可以覆盖 Mage_Catalog_Model_Layer_Filter_Item 的 getUrl() 方法。

这是示例：

```
public function getUrl()
{
  $value = $this->getValue();
  $query = array(
      $this->getFilter()->getRequestVar() => $value,
      Mage::getBlockSingleton('page/html_pager')->getPageVarName() => null // exclude current page from urls
  );
  $url = Mage::getUrl('*/*/*', array('_current'=>true, '_use_rewrite'=>true, '_query'=>$query));
  if ($this->getFilter()->getRequestVar() != 'cat') {
    return $url;
  }

  // Change ?cat=4 for real category url if no additional filters are present
  // www.x.com/y?cat=4
  // =>
  // www.x.com/y/z

  $pos = strpos($url, '&');
  if ($pos !== false) {
    return $url;
  } else {
    // no additional filters
    return Mage::getModel('catalog/category')->load($value)->getUrl();
  }
} 
```

# java - 在字符串中替换 '"' 的问题

> ID：14061581
> 
> 赞同：-1
> 
> 时间：2012-12-27T21:33:07.577
> 
> 标签：java, string, replace

我正在尝试从包含`"matchup"`引号中的文本的字符串中删除子字符串。要删除的完整子字符串类似于`To get an in-depth statistical preview, click "matchup" at the top of the screen`.

我正在尝试做一个

```
string.replace("To get an in-depth statistical preview, click "matchup" at the top of the screen", ""); 
```

它将用空白代替那个长句子；然而，由于“matchup”在字符串中实际上有引号，当我将它作为参数传递时，它会吓坏并认为我有两个单独的字符串，`matchup`它们之间有一些随机的文本。

抱歉，如果这很难理解，我可能做得不好。我也试过做

```
...'matchup'.... rather than ..."matchup"... 
```

它似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T21:34:42.930

你可以用一个字符串`\"`来表示`"`

所以

```
string.replace("To get an in-depth statistical preview, click \"matchup\" at the top of the screen", "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:35:19.793

添加一些分隔符，IE`string.replace(" my \"string\" ", " ")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:36:26.157

一些字符需要在字符串文字（甚至字符文字）中进行*转义，如 Java*[此处](http://docs.oracle.com/javase/tutorial/java/data/characters.html)所述。

你应该使用`\"`来表示`"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T21:36:41.030

> 我正在尝试删除包含以下文本的字符串
> 
> “配对”

```
string.replace("\"matchup\"", "") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T21:43:48.110

您需要使用 , 转义`\"`引号

```
String newString = string.replace("To get an in-depth statistical preview, click \"matchup\" at the top of the screen", ""); 
```

因为字符串是不可变的，`replace`所以不能就地工作，您需要将结果分配给`string.replace(..., ...)`新字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T08:52:32.003

简单的方法是使用`\"`to show `"`。

# html - sidenav 内容未对齐

> ID：14061586
> 
> 赞同：0
> 
> 时间：2012-12-27T21:33:27.847
> 
> 标签：html, css, nav

我的 sidenav 中的内容没有留在它的容器中。它在 jsfiddle 中看起来不错，但在我的浏览器中却不行。（Firefox 17.1 Ubuntu Quantal） [jsfiddle](http://jsfiddle.net/247t1aW3b/SGwhD/14/)

```
<div id="page-wrapper">
    <div id="header"></div>
    <div id="content-wrapper">
        <div id="content">
            <h1>Title</h1>&nbsp
            <p>lipsum...</p>
        </div><!-- END content -->        

<div id="menu-wrap">
    <div id="menu">
          <ul>
             <li><a href="#">index</a>
                   <ul>
                       <li><a href="#">Item one</a></li>
                       <li><a href="#">Item two</a></li>
                       <li><a href="#">Item three in the list</a></li>
                   </ul>
              </li>
          </ul>
     </div><!-- END menu -->
</div><!-- END menu-wrap -->

    </div><!-- END content-wrap -->
    <div id="footer"></div>
</div><!-- END page-wrapper --> 
```

CSS

```
h1 {
 font-size:34px;
 text-align: center;    
}

#header {
  height: 35px;
  width: 100%;
  background-color: #336699;
  position: fixed;
  top: 0px;
  z-index: 10;
}

#content-wrapper {
  position: absolute;
  top: 70px;
  bottom: 50px;
  left: 0px;
  right: 0px;
}

#content {
  width: 90%;
  float: right;
  padding-bottom: 50px;
  padding-right: 30px;
  line-height: 2em;    
}

#menu ul li {
 list-style-type: none;  
}  

 #menu ul ul {
   display:none;
   position: fixed;
}

 #menu ul ul a {
}

 #menu ul a {
  text-decoration: none;
  color: black;
}

#menu ul li:hover ul {
  display:block;
  left: 0;  
  line-height: 20px;
  width: 170px;
  height: 400px;
  background: #CCC;
  border-top-right-radius:1em;
  border-bottom-right-radius:1em;
  padding-left: 22px;
  text-align: left;
  line-height: 35px;
  padding-top:20px;
  font-size: 14px;
}

 #menu-wrap {
   position:fixed;
   top:50px;
   width: 52px;
   height: 22px;
   border-top-right-radius: 6px;
   border-bottom-right-radius:6px;
   background: rgba(181,181,181,0.5);
   text-align: center;
   padding-top: 3px;
   z-index: 0;   
}

#footer {
  height: 10px;
  width: 100%;
  background-color: green;
  position: fixed;
  bottom: 0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:09:14.130

这就是你所需要的：

```
ul {padding: 0; margin: 0;} 
```

# c - C - unsigned int 在赋值时没有得到正确的值

> ID：14061590
> 
> 赞同：3
> 
> 时间：2012-12-27T21:33:40.237
> 
> 标签：c, gdb, variable-assignment, unsigned-integer

这是来自 gdb：

```
22      database->size = size;
(gdb) n
23      return database;
(gdb) p size
$6 = 1401
(gdb) p database->size
$7 = 3086862424
(gdb) p &size
$8 = (unsigned int *) 0xbffff050
(gdb) p &database->size
$9 = (unsigned int *) 0xb7fc6ff8 
```

这是来自代码：

```
typedef struct _DATABASE {
    RESULT* res;
    unsigned int size;
} DATABASE;

....
....

DATABASE* alloc_database(unsigned int size, DATABASE* database)
{
    database = (DATABASE*) malloc (sizeof(DATABASE));
    if (!database) return NULL;
    database->res = (RESULT*) malloc (sizeof(RESULT) * size);
    if (!database->res) {
        free_database(database);
        return NULL;
    }
    memset(database->res, 0, sizeof(RESULT) * size);
    database->size = size;
    return database;
} 
```

您可以看到 database->size 和 size 都来自 (unsigned int) 类型，在代码和 gdb 中，但由于某种原因，赋值后的值不同。

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:47:29.323

数据库是函数 alloc_database 的本地数据库。您将 malloc 的结果分配给它，但此分配是函数的本地分配。返回后，数据库返回到调用函数时的值。请注意，在 gdb 中，您在返回后检查 database->size 的值。因此，您在数据库的值在函数之外的范围内检查它。

你有两个选择：

1.  将函数更改为仅接收 size 参数，分配给本地并返回它。然后您可以分配返回值并在gdb中检查它：

2.  如果要在数据库参数中返回结果，则需要将指针传递给数据库指针。

这是选项 2 的代码：

```
DATABASE* alloc_database(unsigned int size, DATABASE** database)
{
    *database = (DATABASE*) malloc (sizeof(DATABASE));
    if (! *database) return NULL;
    (*database)->res = (RESULT*) malloc (sizeof(RESULT) * size);
    if (!(*database)->res) {
        free_database((database);
        *database = NULL;
        return NULL;
    }
    memset((*database)->res, 0, sizeof(RESULT) * size);
    (*database)->size = size;
    return (*database);
} 
```

PS אהבה לא באה בחינם...

# ravendb - 如何跨 RavenDB 中的多个数据库维护 IDocumentSession 范围？

> ID：14061591
> 
> 赞同：3
> 
> 时间：2012-12-27T21:33:41.050
> 
> 标签：ravendb

我的第一个想法是考虑一些工作单元模式，但是我正在做的事情非常小而且很轻，我想避免过度设计我的解决方案..

我想在多个 RavenDB 数据库中拥有一个事务范围.. 类似

```
class WidgetFacade
{
    void SaveData (Widget widget, User user)
    {
          IDocumentStore documentStore = new DocumentStore { Url = "http://server:8080/" };

          IDocumentSession session  = documentStore.OpenSession("database1");
          session.Store(user);

          session = documentStore.OpenSession("database2");
          session.Store(widget);
          session.Savechanges();
          session.Dispose();
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T02:17:22.237

你不能。会话旨在对单个数据库进行操作。

但是，您*可以*让两个会话参与同一事务。

```
var documentStore = new DocumentStore { Url = "http://server:8080/" };

using (var ts = new TransactionScope())
{
   using (var session = documentStore.OpenSession("database1"))
   {
      session.Store(user);
      session.SaveChanges();
   }

   using (var session = documentStore.OpenSession("database2"))
   {
      session.Store(widget);
      session.SaveChanges();
   }

   ts.Complete();
} 
```

如果第二个操作因任何原因失败，第一个操作也将回滚 - 即使您已保存更改并完成了会话。

# c# - 编辑 DataGridViewComboBoxColumn 并按 EnterKey 后如何防止进入下一行？

> ID：14061593
> 
> 赞同：-1
> 
> 时间：2012-12-27T21:33:46.073
> 
> 标签：c#, datagridview, focus, keypress, datagridviewcomboboxcell

我有一个带有 DataGridView 的表单。在 Datagridview 我有一些 DataGridViewComboBoxColumn 和一些 DataGridViewTextBoxColumn。问题是我想使用**Enter**而不是 Tab 从一个单元格切换到另一个单元格，即使我在单元格中处于编辑模式。

[要自定义的 datagridview 的屏幕截图](http://www.bruno.pacifici.name/public/problem/bolle.png)

[要自定义的组合框的屏幕截图](http://www.bruno.pacifici.name/public/problem/ComboBoxInEditMode.PNG)

我成功地为文本框列实现了此[答案](https://stackoverflow.com/a/9917202/249120) [https://stackoverflow.com/a/9917202/249120](https://stackoverflow.com/a/9917202/249120)中提供的解决方案，但我无法为组合框列实现它。怎么做？

重要提示：对于文本框列，defaultCellStyle 必须具有“换行”属性为 True。它起作用了（当你按下回车时，就像你在按下一个选项卡一样）所以我决定也用“CustomComboBoxColumn”来测试它，我尝试创建一个与 CustomTextBoxColumn 非常相似的代码，但它不起作用：

```
#region CustomComboBoxColumn

public class CustomComboBoxColumn : DataGridViewColumn
{
    public CustomComboBoxColumn() : base(new CustomComboBoxCell()) { }

    public override DataGridViewCell CellTemplate
    {
        get { return base.CellTemplate; }
        set
        {
            if (value != null && !value.GetType().IsAssignableFrom(typeof(CustomComboBoxCell)))
            {
                throw new InvalidCastException("Must be a CustomComboBoxCell");
            }
            base.CellTemplate = value;
        }
    }
}

public class CustomComboBoxCell : DataGridViewComboBoxCell
{

    public override Type EditType
    {
        get { return typeof(CustomComboBoxEditingControl); }
    }
}

public class CustomComboBoxEditingControl : DataGridViewComboBoxEditingControl
{
    protected override void WndProc(ref Message m)
    {
        //we need to handle the keydown event
        if (m.Msg == Native.WM_KEYDOWN)
        {
            if ((ModifierKeys & Keys.Shift) == 0)//make sure that user isn't entering new line in case of warping is set to true
            {
                Keys key = (Keys)m.WParam;
                if (key == Keys.Enter)
                {
                    if (this.EditingControlDataGridView != null)
                    {
                        if (this.EditingControlDataGridView.IsHandleCreated)
                        {
                            //sent message to parent dvg
                            Native.PostMessage(this.EditingControlDataGridView.Handle, (uint)m.Msg, m.WParam.ToInt32(), m.LParam.ToInt32());
                            m.Result = IntPtr.Zero;
                        }
                        return;
                    }
                }
            }
        }
        base.WndProc(ref m);
    }
}

#endregion 
```

这样做的最终结果是没有属性 DataSource、DisplayMember、Items、ValueMember 的 ComboBoxColumn，但是当按下 Enter 时会转到下一个单元格。还有什么可做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-12T21:05:07.907

对 Bruno Pacifici 的回答和评论：

**或者**您只能覆盖 1 个方法“ProcessCmdKey”，它会执行相同的操作：

```
 protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        //Override behavior on Enter press
        if (keyData == Keys.Enter)
        {
            if (CurrentCell != null)
            {
                if (CurrentCell.IsInEditMode)
                {
                    //Do Stuff if cell is currently being edited
                    return ProcessTabKey(keyData);
                }
                else
                {
                    //Do Stuff if cell is NOT yet currently edited
                    BeginEdit(true);
                }
            }
        }
        //Process all other keys as expected
        return base.ProcessCmdKey(ref msg, keyData);
    } 
```

PS如果答案不是太大，为什么只发布链接作为答案？当这样的“有用”链接不再起作用时，我经历了很多案例。因此，复制一些带有原始源链接的代码将是更“404”安全的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:49:08.773

我的问题的解决方案非常简单。您必须创建一个自定义的 dataGridView，只覆盖 2 个方法。请参阅此处：[http](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/a44622c0-74e1-463b-97b9-27b87513747e#faq9) ://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/a44622c0-74e1-463b-97b9-27b87513747e#faq9 。

# ruby-on-rails - 在 Rails 模型中动态生成范围

> ID：14061595
> 
> 赞同：15
> 
> 时间：2012-12-27T21:33:55.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord, metaprogramming

我想动态生成范围。假设我有以下模型：

```
class Product < ActiveRecord::Base
    POSSIBLE_SIZES = [:small, :medium, :large]
    scope :small, where(size: :small) 
    scope :medium, where(size: :medium) 
    scope :large, where(size: :large) 
end 
```

我们可以`scope`用基于 POSSIBLE_SIZES 常量的东西替换调用吗？我认为我违反 DRY 重复它们。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-27T21:41:34.903

你可以做

```
class Product < ActiveRecord::Base
  [:small, :medium, :large].each do |s|
    scope s, where(size: s) 
  end
end 
```

但我个人更喜欢：

```
class Product < ActiveRecord::Base
  scope :sized, lambda{|size| where(size: size)}
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T21:40:10.480

你可以做一个循环

```
class Product < ActiveRecord::Base
    POSSIBLE_SIZES = [:small, :medium, :large]
    POSSIBLE_SIZES.each do |size|
        scope size, where(size: size)
    end
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-08T00:35:09.993

对于 rails 4+，只需更新 @bcd 的答案

```
class Product < ActiveRecord::Base
  [:small, :medium, :large].each do |s|
    scope s, -> { where(size: s) } 
  end
end 
```

或者

```
class Product < ActiveRecord::Base
  scope :sized, ->(size) { where(size: size) }
end 
```

# visual-studio - 字和行突出显示在 Visual Studio 中加起来不可读

> ID：14061598
> 
> 赞同：1
> 
> 时间：2012-12-27T21:34:01.123
> 
> 标签：visual-studio, visual-studio-2012

当我在 Visual Studio 中突出显示一行时，某些单词会被突出显示，从而难以阅读。下图显示了同一行未突出显示的行并突出显示（两个示例）。

![线条高亮对比](../Images/af8842cb14604004329f17f789e751dd.png)

我一直在查看 VS 中的无数选项，但无法找到清理它的方法。

屏幕截图来自 VS2012，我确实安装了 Resharper（但我确实记得在 VS2010 中也有类似的东西。谢谢，这让我发疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:03:06.800

[我建议您下载studiostyl.es](http://studiostyl.es/)上的众多主题之一，然后禁用 Resharper 突出显示当前行选项（**Resharper -> 选项 -> 编辑器 -> 突出显示当前行复选框**）

这样，**Tools -> Options -> Environment -> CurrentLine**中的标准选项优先。此命令将当前行的每个单词设置为选择的前景色和背景色，而不尝试用其颜色为每个类别单词着色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:23:52.830

虽然建议的第三方工具可能起到了作用，但我确实找到了一个“重置为默认值”按钮来解决突出显示问题。不过，无论如何我可能会尝试一些建议的工具来调整外观。（这可能是首先导致问题的原因）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:40:59.820

您可以在 VS2012 中编辑任何现有主题，并通过 Tools->Options->Environment 修改它的各个方面（也可以突出显示）。但是...我遇到了类似的问题，最终使用了第三方主题作为编辑器，并为周围环境构建了一个。

# python - 如何在没有人工交互的情况下使用 Google Drive SDK 2 和 Python 获取 OAuth 凭据

> ID：14061599
> 
> 赞同：4
> 
> 时间：2012-12-27T21:34:08.137
> 
> 标签：python, google-drive-api

我有一个 Python 应用程序，它从第三方来源获取数据，选择一个子集，并将其写入一个 CSV 文件，然后将其上传到 Google Drive 并转换为电子表格。我想将此作为 cron 作业运行，但目前 SDK 需要人工与浏览器交互以获取 OAuth 凭据。

我搜索了 Drive SDK 文档并没有找到任何帮助。我还尝试使用 mechanize 库自动执行 OAuth 流程，但未成功。我确定我错过了一些东西。我不敢相信 Drive API 需要人工交互。建议？

我已经咨询了[https://developers.google.com/accounts/docs/OAuth2WebServer#overview](https://developers.google.com/accounts/docs/OAuth2WebServer#overview)这就是我尝试过的。

```
flow = OAuth2WebServerFlow(settings.CLIENT_ID, settings.CLIENT_SECRET
                           setings.OAUTH_SCOPE,settings.REDIRECT_URI)
authorize_url = flow.step1_get_authorize_url() 
```

创建请求 url：

```
https://accounts.google.com/o/oauth2/auth?
scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&
redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&
response_type=code&
client_id=999637210521.apps.googleusercontent.com&
access_type=offline 
```

然后使用我发出的请求库：
`r = req.get(authorize_url)`

但响应正文是一个没有代码的 HTML 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:44:46.223

我之前也有同样的问题。

解决方案：保存凭据以备将来使用。参考以下网址：

[https://developers.google.com/accounts/docs/OAuth2#installed](https://developers.google.com/accounts/docs/OAuth2#installed)

[https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

```
from oauth2client.file import Storage
...
storage = Storage('a_credentials_file')
storage.put(credentials)
...
credentials = storage.get() 
```

我将我的脚本（其中我正在重用凭据以创建新令牌）推送到 github。

[https://github.com/sukujgrg/google_drive](https://github.com/sukujgrg/google_drive)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:08:29.950

您是否查看过 Google Drive API 上的授权部分？（[https://developers.google.com/drive/examples/python#authorization](https://developers.google.com/drive/examples/python#authorization)）

如果这不能满足您的需求，请查看[requests](http://docs.python-requests.org/en/latest/)库。它使用起来非常简单，应该可以让您轻松获得 OAuth 凭据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T06:11:19.013

免责声明：

我不是安全专家，也不知道我可怕的问题解决方案所涉及的风险......但它会让你的代码成为 Cron 可运行的。

如果您愿意在一定范围内对您的应用进行一次手动访问接受，如谷歌快速入门示例（有用部分发布在答案底部）：[https ://developers.google.com/drive/web /快速入门/蟒蛇](https://developers.google.com/drive/web/quickstart/python)

然后，您可以将您生成`CLIENT_SECRET_FILE` 的文件和文件都添加到您的存储库中。`drive-quickstart.json`然后，如果您有一些谷歌驱动器帐户，您总是希望您的代码库的任何副本都可以访问它，那么永远不会再检查凭据。

再次免责声明：

直观地说，这个解决方案的安全性很糟糕，一旦你的代码库以任何方式公开，那么你的谷歌驱动器就完全有被破坏、删除、禁止等的风险......

```
import httplib2
import os

from apiclient import discovery
import oauth2client
from oauth2client import client
from oauth2client import tools

def get_credentials():

    try:
        import argparse
        flags = argparse.ArgumentParser(parents=[tools.argparser]).parse_args()
    except ImportError:
        flags = None

    SCOPES = 'https://www.googleapis.com/auth/drive'
    #ASSUME THAT THE CLIENT SECRETE FILE BELOW IS STORED IN YOUR CODE BASE
    CLIENT_SECRET_FILE = 'client_secret.json'
    APPLICATION_NAME = 'Drive API Quickstart'

    #ASSUME THAT THIS FILE BELOW IS STORED INSIDE YOUR CODE BASE
    credential_dir = os.path.realpath('')
    credential_path = os.path.join(credential_dir,
                                   'drive-quickstart.json')

    store = oauth2client.file.Storage(credential_path)
    credentials = store.get()
    if not credentials or credentials.invalid:
        flow = client.flow_from_clientsecrets(CLIENT_SECRET_FILE, SCOPES)
        flow.user_agent = APPLICATION_NAME
        if flags:
            credentials = tools.run_flow(flow, store, flags)
        else: # Needed only for compatability with Python 2.6
            credentials = tools.run(flow, store)
        print('Storing credentials to ' + credential_path)
    return credentials

def oneTimeRunCredentials():
    credentials = get_credentials()
    http = credentials.authorize(httplib2.Http())
    service = discovery.build('drive', 'v2', http=http)
    results = service.files().list(maxResults=10).execute() 
```

# cmake - CMake 子项目中的覆盖选项

> ID：14061605
> 
> 赞同：35
> 
> 时间：2012-12-27T21:34:33.620
> 
> 标签：cmake, project, option

我正在尝试重用`CMakeLists.txt`我不想更改其来源的第三方项目（确切地说是[expat ）。](https://github.com/alamaison/winsparkle/blob/master/3rdparty/expat/CMakeLists.txt)我已将项目添加为顶层的子项目，使用`add_subdirectory`.

这可行，但现在我想`option`在顶层设置一些子项目的值`CMakeLists.txt`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-28T14:27:08.407

请参阅 具有良好答案[的类似问题。](https://stackoverflow.com/questions/3766740/overriding-a-default-option-value-in-cmake-from-a-parent-cmakelists-txt)

简而言之：

```
SET(SOME_EXPAT_OPTION OFF CACHE BOOL "Use some expat option") 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-12-08T14:31:11.550

如果子项目使用`option`(not `set`) 作为其配置设置，那么您可以`option`在添加子目录之前使用指定值：

```
option(LIB_OPTION1 "" OFF)
option(LIB_OPTION2 "" ON)
add_subdirectory(${CMAKE_SOURCE_DIRECTORY}/lib) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-28T09:29:22.963

在调用之前，您可以使用所需的设置（ON 或 OFF）定义选项`ADD_SUBDIRECTORY`。这将优先`OPTION`于 expat 中的命令，`CMakeLists.txt`因为最后一个参数 to`OPTION`只是一个*默认*值（如果该设置已经存在，则忽略该值）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-28T09:35:40.520

SET 命令具有“PARENT_SCOPE”选项：

```
If PARENT_SCOPE is present, the variable will be set in the scope above the current
scope. Each new directory or function creates a new scope. This command will set the 
value of a variable into the parent directory or calling function (whichever is 
applicable to the case at hand). PARENT_SCOPE cannot be combined with CACHE. 
```

（见：[http](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:set) ://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:set ）

# vim - 为什么（Vim 插件）NetRW 浏览功能不打开目录和文件？

> ID：14061608
> 
> 赞同：2
> 
> 时间：2012-12-27T21:34:42.753
> 
> 标签：vim, vim-plugin, netrw

我正在使用带有 NetRW v147b 的 MacVim 7.3 快照 66（截至 2012 年 12 月的最新版本）。当我从命令行运行`mvim .`时，它运行 NetRW，但浏览行为很奇怪。

我的 NetRW 窗口如下所示（注意奇怪的完整路径，而不是相对路径）：

```
| Users/me/chef/cookbooks/windows/recipes/
| Users/me/chef/cookbooks/windows/resources/
| Users/me/chef/cookbooks/windows/CHANGELOG.md
| Users/me/chef/cookbooks/windows/CONTRIBUTING
| Users/me/chef/cookbooks/windows/LICENSE
| 
```

当我点击`ENTER`一行时，它对目录和文件没有任何作用，它会打开一个新的空白 Vim 缓冲区作为 [New DIRECTORY]。

NetRW 曾经按预期工作，我不知道如何修复它。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:16:50.977

好的，通过`git bisect`我发现导致此问题的确切 NetRW 选项的魔力：

```
" default to tree-style listing, like NERDTree
let g:netrw_liststyle=3 
```

# asp.net-mvc - 验证 IEnumerable 视图中的部分视图

> ID：14061610
> 
> 赞同：0
> 
> 时间：2012-12-27T21:34:53.697
> 
> 标签：asp.net-mvc, jquery, jquery-validate, partial-views

我有一个呈现可编辑数据表的视图。该页面具有 Ajax 控件，允许您在表格中添加和删除单行。我使用强类型视图来完成此操作，该视图具有派生自 IEnumerable 的模型。在视图中，它遍历模型中的每个项目，并使用对该对象进行强类型化的局部视图来呈现它。这样，控制器可以使用父视图来渲染整个列表，而 Ajax 端点可以使用局部视图来渲染并返回一个表格行，以便 jQuery 插入表格。

当点击保存按钮时，jQuery 循环遍历表格，打包数据并分配序号，这样当数据 POST 到服务器时，模型绑定引擎将数据识别为`IEnumerable<TimeLogEntry>`.

这是我的列表视图（去掉了不必要的代码）：

```
@model IEnumerable<TimeTracker.Models.TimeLogEntry>

<table id="time-log">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.FirstOrDefault().StartTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FirstOrDefault().EndTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FirstOrDefault().Description)
            </th>
        </tr>
    </thead>

    <tbody>
        foreach (var item in Model.OrderByDescending(entry => entry.StartTime))
        {
            Html.RenderPartial("~/Views/TimeLog/_EditEntry.cshtml", item);
        }
    </tbody>
</table> 
```

以及显示一个单一的部分视图`TimeLogEntry`：

```
@model TimeTracker.Models.TimeLogEntry

<tr id="@Model.TimeLogEntryId">
    <td class="no-wrap">
        @Html.EditorFor(model => model.StartTime)
        @Html.ValidationMessageFor(model => model.StartTime)
    </td>
    <td class="no-wrap">
        @Html.EditorFor(model => model.EndTime)
        @Html.ValidationMessageFor(model => model.EndTime)
    </td>
    <td>
        @Html.EditorFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </td>
</tr> 
```

此代码无法正确验证，因为呈现它的部分视图与该项目来自的 IEnumerable 是分开的，因此不知道它是在 foreach 循环的上下文中执行的。因此，每个表行中的元素将具有相同的名称和 ID，这会导致客户端验证出现问题。例如，所有`StartTime`文本框的 ID 都是`StartTime`, 而不是`[0].StartTime`,`[1].StartTime`等。EditorFor 方法无法设置`id`or`data-valmsg-for`属性。如何使每个文本框`id`属性唯一，并且`data-valmsg-for`每个验证消息上的属性与其对应的文本框 ID 匹配？我应该这样做还有另一种更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:02:32.397

您可以将视图重新定义为（不使用部分）

```
@model IEnumerable<TimeTracker.Models.TimeLogEntry>
<table id="time-log">
    ...other stuff that you want to add 
    <tbody>
        @{var itemList = Model.OrderByDescending(entry => entry.StartTime).ToList(); }
        @for(var index =0 ; index < itemList.Count;index ++)
        {
           <tr id="@Model.TimeLogEntryId">
             <td class="no-wrap">
                @Html.EditorFor(model => model[index].StartTime)
                @Html.ValidationMessageFor(model => model[index].StartTime)
            </td>
            <td class="no-wrap">
               @Html.EditorFor(model => model[index].EndTime)
               @Html.ValidationMessageFor(model => model[index].EndTime)
            </td>
            <td>
               @Html.EditorFor(model => model[index].Description)
               @Html.ValidationMessageFor(model => model[index].Description)
            </td>
          </tr>
        }
    </tbody>
</table> 
```

# asp.net - 服务器上的 SignalR 错误，而不是开发机器上

> ID：14061612
> 
> 赞同：0
> 
> 时间：2012-12-27T21:34:59.173
> 
> 标签：asp.net, iis-7, signalr

我想要实现的是为新年制作一个小型多人游戏，并使用（学习）SignalR 作为通信方法。在我的开发机器（windows 7、iis 7.5、asp.net forms 4.0 集成）上一切正常。SignalR 的传输方法是**serverSentEvents**，当我让玩家 2 加入时，它运行良好

尽管如此，如果我将我的网站部署在服务器上（windows server 2008、iis 7.0、asp.net 4.0 集成），一切都不会按预期工作。SignalR 已加载，我看到很多请求，例如协商，然后是连接。当我连接播放器2时仍然没有正确通信并且传输方式也不同；当我从 FireBug 网络视图中阅读时，它告诉我它是**longPolling**

如果您想看一看，请访问；[http://ny.scsterallure.nl/](http://ny.scsterallure.nl/)和[http://ny.scsterallure.nl/index.mobile.html](http://ny.scsterallure.nl/index.mobile.html)（这将是播放器 2，移动控制）

此外，我在 global.asax start 中注册了我的路线并且有效（因为否则我的网站将无法在本地运行）我使用的代码不是很复杂，只是 Hub 的一个子类和一些方法。

**更新**似乎如果在 IE9 中测试，服务器页面似乎确实可以正常工作，虽然速度很慢，但可以正常工作。传输方法似乎是foreverframe。

# google-apps-script - 使用 Google App Script 创建基于电子表格的应用程序

> ID：14061613
> 
> 赞同：-2
> 
> 时间：2012-12-27T21:35:00.733
> 
> 标签：google-apps-script, google-apps

我想创建一个围绕基于 Web 的电子表格构建的应用程序。我正在考虑使用 Google 电子表格和 Google App Script 来完成这项工作。我过去写过一些应用程序脚本，但主要是供我个人使用。

我认为该应用程序可以按如下方式工作：用户在应用程序中创建一个新的电子表格，它设置了基本的电子表格结构。它还将一些脚本附加到电子表格中，以添加花里胡哨。此时，用户与增强的电子表格进行交互。

1.  我相信您可以使用 SpreadsheetApp API 在应用程序中创建新的电子表格。但是，我怎样才能将脚本附加到它。
2.  假设 #1 是可能的（可能不是这种情况），如果我需要添加功能，我如何将脚本和电子表格结构的更改推送给已经创建初始文档的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:34:37.040

使用 Google Apps Script 完全可以实现这一点，我个人认为它是许多人访问的应用程序的最佳方法，而不会冒着弄乱包含敏感数据的电子表格的风险。仅供参考，[这里是这样一个 webapp 的示例](https://script.google.com/macros/s/AKfycbxquizfGo85vdeaN7_qss2-LY--UxSLFFeF5ML5rXPWZfrX9oNt/exec)（此公共版本仅限于一些功能，完整版更发达但需要授权）

# php - 更快的图像处理。

> ID：14061614
> 
> 赞同：3
> 
> 时间：2012-12-27T21:35:07.517
> 
> 标签：php, python, image, gd, bdd

我有一个使用 GD PHP 库的应用程序的问题，它需要一张图像并基于它创建一个缩略图/裁剪。此应用程序在数据库中搜索与图像相关的信息，以便我们可以命名并将其分配给客户端。

问题是图像处理（创建或复制图像）正在减慢我们的数据库服务器。

还有另一种方法可以在不影响服务器性能的情况下进行图像处理（缩略图/裁剪）吗？一个使用 Python 的桌面应用程序在本地进行裁剪，然后通过 SSH 传输它们？

关于第二个问题，我想要一些关于哪些 Python 库用于桌面和图像处理的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:17:30.783

如果在上传之前在本地进行裁剪对您的用例有意义，那么是的，这是一个好主意。

第一个问题是，你真的需要使用 Python 吗？如果你已经安装了，那么后面`ImageMagick`的调用是一个 2 行脚本，将其重写为 5 行 Python 脚本可能不会使其更具可读性。[`convert`](http://www.imagemagick.org/script/convert.php)`scp``bash`

但是如果你确实想用 Python 来做，这里有一些选择：

*   由于您可能已经熟悉`gd`. 并且有一些`gd`PHP 代码要移植，因此可以使用 Python`gd`包装器，例如[gdmodule](http://pypi.python.org/pypi/gdmodule/0.56)。
*   [`ImageMagick`](http://www.imagemagick.org/script/api.php#python)做宇宙中的一切，包括这个。
*   [`PIL`](http://www.pythonware.com/products/pil/)是最接近 Python 标准图像库的东西。

同时，为了进行 SSH 复制，您可能需要使用[paramiko](http://www.lag.net/paramiko/)。

# .htaccess - .htaccess, .htpasswd 跨多个 Joomla 实例

> ID：14061616
> 
> 赞同：0
> 
> 时间：2012-12-27T21:35:15.520
> 
> 标签：.htaccess, joomla, joomla2.5, joomla1.5, .htpasswd

我在我的主机帐户上维护了几个 Joomla 实例，主要是 2.5 次安装，但也有一些 1.5 次安装。

1.  是否可以在所有实例的根目录中使用一个 .htaccess 文件。我需要修改什么才能做到这一点？○

2.  我想为所有这些密码保护管理员文件夹。是否可以从根目录执行此操作，还是我需要在每个管理员文件夹中有一个 .htaccess 文件？下一个问题是，我将如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:10:00.420

您可以将 .htaccess 放在您选择的目录中，然后将文件符号链接到您网站的每个根目录。

```
ln -s /var/www/.htacess /var/www/joomla-site-one/.htacess 
```

然后所有更改都将被镜像。只要你不想要额外的变化。

另一种方法是制作一个 php 文件，然后将其命名为 .htacess 并告诉 Apache 将其作为 php 运行，但这还有其他安全问题。

# ruby - 为什么 Ruby 为“var = var + 1”而不是“var = var + 0”创建一个新对象？

> ID：14061620
> 
> 赞同：3
> 
> 时间：2012-12-27T21:35:52.977
> 
> 标签：ruby, object

我有这个 Ruby 代码：

```
var1 = 10
puts var1.object_id
var1 = var1 + 0
puts var1.object_id
var1 = var1 + 1
puts var1.object_id 
```

输出是：

```
1> 21
2> 21
3> 23 
```

问题：为什么 Ruby 在添加非零值时会创建一个新对象，而在添加 0 时不会？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T21:40:36.653

在使用 Fixnums 时，Ruby¹ 内部根本不会创建对象。相反，实现使用“标记”指针，即如果设置了指针的最低有效位，Ruby 理解该指针实际上并不指向对象，而是直接编码 Fixnum 的值。因此，具有相同数值的 Fixnum 将始终由相同的指针值表示。

¹我的意思是官方的 Ruby 解释器——其他实现可能会以不同的方式处理这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T21:44:50.623

在 Ruby 中，`Fixnum`s `true,` `false`、`nil`和`Symbol`s 具有预定义`object_id`的 s。

```
1.object_id #=> 3
2.object_id #=> 5 
```

添加`0`到一个小整数不会改变它的值，因此它`object_id`保持不变。

然而，如果你在`Bignum`s 上运行相同的算术，你会得到不同`object_id`的 s。

```
a = 1073741824
puts a.object_id # => 7658076
b = a + 0
puts b # => 1073741824
puts b.object_id # => 7287012 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T21:39:19.440

它没有。`10`并且`11`是 Fixnums。正弦每个 Integer 值只有一个 Fixnum 实例，`10`有一个 object_id 和`11`一个 object_id。这就是你所看到的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T21:40:02.627

Ruby 有预定义的对象

```
irb(main):001:0> 10.object_id
=> 21
irb(main):002:0> 11.object_id
=> 23 
```

这是一些自然数，甚至更多

```
irb(main):003:0> true.object_id
=> 2
irb(main):004:0> false.object_id
=> 0
irb(main):005:0> nil.object_id
=> 4
irb(main):006:0> 0.object_id
=> 1
irb(main):007:0> -2.object_id
=> -3 
```

并且这些 id 不会改变

# duplicates - Aptana 重复行快捷方式

> ID：14061621
> 
> 赞同：9
> 
> 时间：2012-12-27T21:35:53.730
> 
> 标签：duplicates, line, aptana

如何将 Aptana 中的行复制到新行中？在记事本++中，我可以`CTRL+D`用来复制，但不能在`aptana`. 有什么热键吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T22:13:31.000

> CTRL + SHIFT + D

或者

> 命令 -> 文本 -> 重复行/选择

如果您发现 Aptana（或 Eclipse）中缺少任何内容，您可以随时自行扩展功能。
[阅读文档了解详情](https://wiki.appcelerator.org/display/tis/Customizing+Studio)。

# hadoop - 如何将 Cassandra 中的数据导入 Hadoop 文件系统

> ID：14061623
> 
> 赞同：1
> 
> 时间：2012-12-27T21:35:58.343
> 
> 标签：hadoop, cassandra, bigdata

我想知道如何将数据从 Cassandra 导入 Hadoop 文件系统，以及如何定期定期完成（即当 Cassandra DB 发生更改或将新数据插入 Cassandra 时，我们如何检测更改并将数据迁移到 HDFS（Hadoop 文件系统）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:14:08.783

你有多种选择来做到这一点。您可以为自动化编写顺序程序或 ma​​preduce 作业或 pig 等，您再次有多种选择。你可以有一个 cron 来为你做这件事，或者如果你想让你的工作流更复杂，你可以使用 Oozie（一个工作流引擎），它会根据你想要的任何标准来安排你的工作。高温高压

# java - java中的浮点数

> ID：14061624
> 
> 赞同：0
> 
> 时间：2012-12-27T21:36:05.910
> 
> 标签：java

我有一个变量`time = (float)route / (float)speed;`是 3,96。我想知道是否有一些方法可以将此数字自动转换为时间？例如 3,96 我需要转换为 4,36。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T21:48:32.813

实际上，您得到的“时间”不是：3 小时 96 分钟，但实际上是：3 小时和一小时的 0.96（或 96%）：

```
 int route = 396; // [km]
            int speed = 100; // [km/h]
            float time = (float) route / (float) speed;
            int hours = (int) time;
            int minutes = (int) (60 * (time - hours));
            System.out.println(hours + "h " + minutes + "m"); 
```

输出：

```
3h 57m 
```

# android - 从另一种方法在 TextView 中设置文本

> ID：14061631
> 
> 赞同：1
> 
> 时间：2012-12-27T21:37:02.953
> 
> 标签：android, methods, textview, settext

这个问题有很多类似的问题，但他们都询问如何在另一个 CLASS 的 TextView 中设置文本。我想知道是否有一种简短而简单的方法可以从同一类中的另一个 METHOD 更改文本。

所以一切都在一个类中，但 TextView 是在方法 1 中设置的，我想在方法 2 中设置此文本视图的文本。

在发布重复的问题回复和否决我之前，请阅读问题。我想在同一个类中更改文本，只是使用不同的方法。

更多信息...

```
//Method 1 has:
final TextView tvTitle = (TextView) findViewById(R.id.tvTitle);

//Method 2 has...
tvTitle.setText("TITLE"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:18:30.620

您必须在使用它之前声明该对象，您有两种解决方案：

第一个解决方案：

```
public class MyClass
{
    private TextView tvTitle;

    MyClass()
    {
           tvTitle = (TextView) findViewById(R.id.tvTitle);
    }
} 
```

或第二种方法：

在这两种方法中写下这一行：

`TextView tvTitle = (TextView) findViewById(R.id.tvTitle);`

但第一个是更好的解决方案

# go - 为什么频道类型中有一个'<-'？

> ID：14061633
> 
> 赞同：11
> 
> 时间：2012-12-27T21:37:17.623
> 
> 标签：go

这行得通。

```
var tick <-chan time.Time = time.Tick(1e8) 
```

然而，事实并非如此。

```
var tick chan time.Time = time.Tick(1e8) 
```

为什么我`<-`的频道类型声明中需要一个？我认为那`<-`是为了写入或从频道读取。为什么它会出现在一个类型中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T21:44:41.497

通道可以有一个类型来指示它是只读的、只写的还是两者兼有。

指示通道方向是用 <- 作为类型的一部分完成的，或者对于读/写通道省略。

所以`<-`in`<-chan time.Time`是类型的一部分，

```
chan   time.Time  //Would be a read/writable channel
chan<- time.Time  // Would be a write only channel
<-chan time.Time  // Would be a read only channel 
```

并`time.Tick(1e8)`返回一个只读通道。

[在此处](http://golang.org/ref/spec#Channel_types)阅读语言规范的更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T23:59:17.473

将通道视为**具有两端的管道**的一个好方法。一端是事件流入的地方，另一端是事件流出的地方。所以声明一个通道，例如

```
var c = make(chan int) 
```

创建一个整体的通道 - 即两端。反过来，

```
func consume(c <-chan int) {
    ...
} 
```

定义一个带有通道输入参数的函数 - 即通道的可读端，以及

```
func generate(c chan<- int) {
    ...
} 
```

定义一个带有通道输出参数的函数 - 即通道的可写端。这两个函数都可以将整个通道作为它们的实际参数传递，或者只是它们需要的结尾。

当通道用作局部变量或结构中的字段时，同样的一般原则也适用。

**尽可能使用通道端语法**是一种很好的做法，因为编译器将能够更彻底地检查您是否编写了您想要的内容。

有趣的是，occam 编程语言也有等效的语法来标记通道的哪一端是哪一端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T04:41:19.253

虽然您可以声明一个实际的“只读”或“只写”通道变量，但这样做是没有用的，因为您无法对它们做任何事情。

“只读”和“只写”语法适用于函数参数。这种语法更像 C 中的“const”或 Ada 中的“in”和“out”。

Go 频道也没有两个“端”。UNIX 管道有两个文件描述符，每一端一个。相同的通道类型变量用于读取和写入。

# java - 图表 teechart 周围的边框

> ID：14061635
> 
> 赞同：0
> 
> 时间：2012-12-27T21:37:23.353
> 
> 标签：java, android, teechart

我用 Steema TeeChart 制作了一个图表，图表完成了，但是当它在布局中绘制时，它由图表制作的布局周围有一个边框，不在图表内，我使用了 getwalls.setVisible(false ) 但这仅在轴上有用，如何删除此边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T08:55:03.950

这可能是 BevelOuter。您可以使用以下方法停用它：

```
tChart1.getPanel().setBevelOuter(BevelStyle.NONE); 
```

# c# - 为什么我需要在 XAML 中的静态资源之前插入一个空的 DrawingGroup？

> ID：14061638
> 
> 赞同：2
> 
> 时间：2012-12-27T21:37:45.297
> 
> 标签：c#, xaml

我在资源字典中覆盖了几个 XAML 定义的绘图组，并注意到一些奇怪的行为。如果我这样定义一个 DrawingImage ：

```
<DrawingImage x:Key="My_Icon">
    <DrawingImage.Drawing>
        <DrawingGroup>
            <DrawingGroup.Children>
                <StaticResource ResourceKey="Background" />
                <StaticResource ResourceKey="Foreground" />
                <DrawingGroup>
                    <!-- some content here for an overlay -->
                </DrawingGroup>
            </DrawingGroup.Children>
        </DrawingGroup>
    </DrawingImage.Drawing>
</DrawingImage> 
```

在设计时一切正常，但在运行时出现异常：

> 'XAML 节点流：'System.Windows.Markup.StaticResourceHolder' 的值必须遵循 StartObject 和 StartMember。行号“14”和行位置“22”。

但是，如果我在静态资源之前插入一个空的 DrawingGroup 标记，一切正常：

```
<DrawingImage x:Key="My_Icon">
    <DrawingImage.Drawing>
        <DrawingGroup>
            <DrawingGroup.Children>
                <DrawingGroup />
                <StaticResource ResourceKey="Background" />
                <StaticResource ResourceKey="Foreground" />
                <DrawingGroup>
                    <!-- some content here for an overlay -->
                </DrawingGroup>
            </DrawingGroup.Children>
        </DrawingGroup>
    </DrawingImage.Drawing>
</DrawingImage> 
```

有谁知道为什么会这样？我假设这是一个通用的 XAML 节点处理错误，而不是特定于 DrawingGroups，但我可能是错的......

请注意，有问题的 StaticResources 是 DrawingGroups：

```
<DrawingGroup x:Key="Background">
    <DrawingGroup.Children>
        <GeometryDrawing Geometry="M 3,1.00001L 29,1.00001C 30.1046,1.00001 31,1.89544 31,3.00001L 31,29C 31,30.1046 30.1046,31 29,31L 3,31C 1.89543,31 1,30.1046 1,29L 1,3.00001C 1,1.89544 1.89543,1.00001 3,1.00001 Z ">
            <GeometryDrawing.Pen>
                <Pen LineJoin="Round" Brush="#FFEB8E00"/>
            </GeometryDrawing.Pen>
            <GeometryDrawing.Brush>
                <RadialGradientBrush RadiusX="0.516666" RadiusY="0.516666" Center="0.499999,0.966667" GradientOrigin="0.499999,0.966667">
                    <RadialGradientBrush.GradientStops>
                        <GradientStop Color="#FFFFECA8" Offset="0"/>
                        <GradientStop Color="#FFFFCD52" Offset="0.2"/>
                        <GradientStop Color="#FFFFCD52" Offset="0.669767"/>
                        <GradientStop Color="#FFFFB100" Offset="0.95814"/>
                    </RadialGradientBrush.GradientStops>
                    <RadialGradientBrush.RelativeTransform>
                        <TransformGroup/>
                    </RadialGradientBrush.RelativeTransform>
                </RadialGradientBrush>
            </GeometryDrawing.Brush>
        </GeometryDrawing>
        <GeometryDrawing Brush="#67F9F0AD" Geometry="M 4,19L 28,19C 29.1046,19 30,19.8954 30,21L 30,28C 30,29.1046 29.1046,30 28,30L 4,30C 2.89543,30 2,29.1046 2,28L 2,21C 2,19.8954 2.89543,19 4,19 Z "/>
    </DrawingGroup.Children>
</DrawingGroup> 
```

我的用法很简单——我将整个 DrawingImage 绑定到 Infragistics WPF 按钮控件：

```
<igWPF:ButtonTool igWPF:RibbonGroup.MaximumSize="ImageAndTextLarge" Caption="New Item" SmallImage="{StaticResource My_Icon}" LargeImage="{StaticResource My_Icon}" /> 
```

# jquery - 使用 node.js 和 express 的 JQuery Ajax 发布请求

> ID：14061644
> 
> 赞同：10
> 
> 时间：2012-12-27T21:38:03.057
> 
> 标签：jquery, ajax, node.js, post, express

我试图在 Node.JS 和 Express 中使用 JQuery 向我的 Node.JS 服务器发出 AJAX 发布请求，但它不起作用！

```
var express = require('express')
var app = express();
app.listen(8888);

app.configure(function(){

   app.use(express.bodyParser());
   app.set('views',__dirname + '/views');
   app.set('view engine', 'ejs');
   app.use(express.static(__dirname + '/public'));
   app.use(express.cookieParser());
   app.use(app.router);

});

app.get('/', function (req, res){

   res.render('ajax.ejs');

});

app.post('/ajax', express.bodyParser(), function (req, res){

   console.log(req);
   console.log('req received');
   res.redirect('/');

}); 
```

这是`ajax.ejs`：

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>    
  <script type="text/javascript">

      $('#enter').click(function(){  

     $.ajax({ 
           url: '/ajax',
           type: 'POST',
           cache: false, 
           data: { field1: 1, field2: 2 }, 
           success: function(data){
              alert('Success!')
           }
           , error: function(jqXHR, textStatus, err){
               alert('text status '+textStatus+', err '+err)
           }
        })
     });            

</script>
</head>
<body>

<form>
   <input type="button" id="enter" value="Enter">
</form>

</body> 
</html> 
```

加载后`ajax.ejs`，控制台中没有任何输出，因此发布请求不起作用。我能做些什么？

提前谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T22:12:44.707

我发现了你的问题。您需要将脚本从头部移动到身体（在表单标签之后）：

```
...
</form>
<script type="text/javascript">

   $('#enter').click(function(){  
   ...

</script>
</body> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-20T14:02:24.410

以下代码根据新版本工作。

**服务器.js**

```
var express = require('express')
var app = express();
var bodyparser = require('body-parser');
var urlencodedparser = bodyparser.urlencoded({extended:false})

app.set('views',__dirname + '/views');
app.set('view engine', 'ejs');
app.use(express.static(__dirname + '/public'));
app.use(express.cookieParser());

app.get('/', function (req, res){
   res.render('ajax.ejs');
});

app.post('/ajax', urlencodedparser, function (req, res){  
   console.log(req);
   console.log('req received');
   res.redirect('/');

});

app.listen(8888); 
```

**ajax.ejs**

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>    

</head>
<body>

<form>
   <input type="button" id="enter" value="Enter">
     <script type="text/javascript">

      $('#enter').click(function(){  

     $.ajax({ 
           url: '/ajax',
           type: 'POST',
           cache: false, 
           data: { field1: 1, field2: 2 }, 
           success: function(data){
              alert('Success!')
           }
           , error: function(jqXHR, textStatus, err){
               alert('text status '+textStatus+', err '+err)
           }
        })
     });            

</script>
</form>

</body> 
</html> 
```

# objective-c - Objective-C 中#define 语句的正确位置

> ID：14061645
> 
> 赞同：2
> 
> 时间：2012-12-27T21:38:03.220
> 
> 标签：objective-c, ios

`#define`在 Objective-C中放置语句的正确位置是什么？

从技术上讲，它们在多个位置工作，但是放置它们的“正确”位置是什么？

在我的 .h 文件中的`#include`语句和语句之间？`@interface`

```
#import <UIKit/UIKit.h>

#define BAR        1
#define FOO        2

@interface MyViewController : UIViewController 
```

或者也许在`@interface`声明里面？

```
#import <UIKit/UIKit.h>

@interface MyViewController : UIViewController

#define BAR        1
#define FOO        2 
```

是否有我应该遵循的最佳实践？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T22:11:41.937

当在这样的 .h 文件中使用时，我将它们视为全局变量。因此，我将它们放在导入语句之后和接口之前。换句话说，就像您的第一个选择一样。

# asp.net - CSS Float Bullest 列表项，在 x 元素 IE7 问题后清除浮动

> ID：14061648
> 
> 赞同：2
> 
> 时间：2012-12-27T21:38:08.317
> 
> 标签：asp.net, css, internet-explorer-7

![在此处输入图像描述](../Images/0fcfd8a5b132eb9549b38d4d8433f3d3.png)所以我有一个由列表组成的页脚，这些是向左浮动的，在 5 个项目之后我想要一个新行开始。

这适用于所有浏览器，但不适用于 IE7。

所以我所做的是在第 6 项，即第二行的第一项上添加了一个类..

```
 .liClearLeft        { clear: left;} 
```

问题是IE7即使第二行向左浮动，高度关闭并且它们垂直对齐也不相同，它似乎取决于第一行的高度。所以我猜我想知道如何在 IE7 中让行也垂直对齐？

代码

```
<div id="footerContainer" class="clearfix">
<div class="container">
    <div id="footerMainMenu" class="clearfix">
            <asp:Repeater ID="footerMenuRepeater" runat="server" onitemdatabound="FooterMenuRepeaterItemDataBound">
                <HeaderTemplate>
                    <ul id="mainMenuList">
                </HeaderTemplate>
                <ItemTemplate>
                    <li class="footerParentSubLists <%# ((FooterMenuItem)Container.DataItem).MenuTitleBoldClass %> <%# Container.ItemIndex == 5 ? "liClearLeft" : string.Empty %>">
                        <div id="footerMenuDiv">
                           <a class="footerMenuHeader" href='<%# ((FooterMenuItem)Container.DataItem).CallToActionLink %>'><%# ((FooterMenuItem)Container.DataItem).Title %></a>
                        </div>
                        <asp:Repeater ID="subItemRepeater" runat="server">
                            <HeaderTemplate>
                                <ul class="footerChildSubList">
                            </HeaderTemplate>
                            <ItemTemplate>
                                <li><a class="footerMenuItems <%# ((FooterMenuItem)Container.DataItem).ArrowClass %>" href="<%# ((FooterMenuItem)Container.DataItem).CallToActionLink %>"><%# ((FooterMenuItem)Container.DataItem).Title %></a>
                                </li>
                            </ItemTemplate>
                            <FooterTemplate>
                                </ul>
                            </FooterTemplate>
                        </asp:Repeater>                
                    </li>
                </ItemTemplate>
                <FooterTemplate>
                    </ul>
                </FooterTemplate>
          </asp:Repeater> 
    </div> 
```

CSS：

```
 .footerParentSubLists {
       float: left; 
       width: 170px; 
       max-width: 170px; 
       margin-right: 20px !important;
   }
   .footerChildSubList { 
        margin: 0px;
        position: relative;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:51:46.970

似乎适用于 IE7 的一种解决方案是添加一个“行”`li`并且`ul`大约每五个`footerParentSubLists`. [你可以在这个 fiddle](http://jsfiddle.net/WKkT3/15/)中看到效果。哪个使用此测试代码：

**HTML**

```
<ul id="mainMenuList">
    <li> <!-- row 1  -->
        <ul>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 1</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 1.1</a>
                   </li>
                   <li>
                       <a>Sub 1.2</a>
                   </li>
                   <li>
                       <a>Sub 1.3</a>
                   </li>
                 </ul>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 2</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 2.1</a>
                   </li>
                   <li>
                       <a>Sub 2.2</a>
                   </li>
                 </ul>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 3</a>
                </div>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 4</a>
                </div>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 5</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 5.1</a>
                   </li>
                   <li>
                       <a>Sub 5.2</a>
                   </li>
                 </ul>
            </li>            
        </ul>    
    </li>
    <li> <!-- row 2  -->
        <ul>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 6</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 6.1</a>
                   </li>
                   <li>
                       <a>Sub 6.2</a>
                   </li>
                   <li>
                       <a>Sub 6.3</a>
                   </li>
                 </ul>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 7</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 7.1</a>
                   </li>
                   <li>
                       <a>Sub 7.2</a>
                   </li>
                   <li>
                       <a>Sub 7.3</a>
                   </li>
                 </ul>
            </li>
        </ul>
    </li>
</ul> 
```

**CSS**

```
#mainMenuList {
    width: 950px;
}

#mainMenuList li {
    float: left;
}

#mainMenuList .footerParentSubLists {
    width: 170px;
    max-width: 170px;
    margin-right: 20px;
}

#mainMenuList .footerParentSubLists li {
    float: none;
    padding-left: 10px;
} 
```

# rspec - 不同 rspec 上下文中的代码重用

> ID：14061651
> 
> 赞同：5
> 
> 时间：2012-12-27T21:38:21.967
> 
> 标签：rspec, code-reuse

我正在尝试在 Rails 控制器规范中重用一些通用代码。对于管理员用户和普通用户，我有不同的上下文。但是，对于特定操作，大部分行为是相同的，因此我尝试将这种常见行为提取到辅助函数中：

```
describe SomeController do
    def common_get_new
       # common stuff
    end 

    context "regular users" do
        describe "GET new" do
            common_get_new
        end
    end

    context "admin users" do
        describe "GET new" do
            common_get_new
        end
    end
end 
```

这给了我错误：

> 未定义的局部变量或方法“common_get_new”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T04:06:52.893

您是否尝试过使用[共享示例](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples)？

```
describe SomeController do
  shared_examples_for "common_get_new" do
    # common stuff
  end 

  context "regular users" do
    describe "GET new" do
      it_should_behave_like "common_get_new"
    end
  end

  context "admin users" do
    describe "GET new" do
      it_should_behave_like "common_get_new"
    end
  end
end 
```

根据`common_get_new`您的问题方法中的内容，为了简单地消除您的错误，您可以将该方法放在**spec/support/utilities.rb**中，或者按照@Chris Heald 的建议执行并在顶部定义该方法文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:53:13.400

尝试重新排列您的上下文，以便更深层次的上下文可以共享相同的设置代码：

```
describe SomeController do
  describe "GET new" do
    before do
       # common stuff
    end

    context "regular users" do
    end

    context "admin users" do
    end
  end
end 
```

# dart - Dart 编辑器视觉主 题 — 黑色背景上难以阅读的蓝色文本

> ID：14061655
> 
> 赞同：7
> 
> 时间：2012-12-27T21:39:01.740
> 
> 标签：dart, dart-editor

我想在 Dart 编辑器中设置一个具有黑色背景的视觉主题，但是总是有某些文本显示为蓝色，这使得它难以阅读。例如，HTML 文档中的引用文本显示为蓝色。因此，在以下文本中：

元字符集="utf-8"

“utf-8”是蓝色的（包括引号）。我试图通过创建自己的主题和编辑 dart\plugins\com.google.dart.tools.deploy_0.2.9.r16323\themes 中的 XML 文件来解决此问题，但无济于事。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:39:40.687

你是对的。这是个问题。正如@tomaszkubacki 所说，请为这个错误加注星标（http://code.google.com/p/dart/issues/detail?id=7510）。这是我目前唯一的答案。

# macos - 在 Retina Mac 上合并 Cocoa 中的 2 个图像

> ID：14061658
> 
> 赞同：1
> 
> 时间：2012-12-27T21:39:11.317
> 
> 标签：macos, cocoa, nsimage

我正在尝试将两个图像合并为背景图像。这在非 Retina Mac 上运行良好。

生成的图像具有我原始背景图像的大小。但在 MacBook Pro Retina 上，生成的图像会翻倍。我读到应该使用它`imageWithSize`来解决这个问题，因为 10.8 / Retina 支持图像不再以像素为单位；我们知道它的要点。

我不知道我应该如何更改我的代码来解决这个问题。

到目前为止我所拥有的：

```
 NSSize size =  background.size  ;
    GLsizei width = (GLsizei)size.width;
    GLsizei height = (GLsizei)size.height;
    NSBitmapImageRep* imgRep = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:NULL pixelsWide:width pixelsHigh:height bitsPerSample:8 samplesPerPixel:3 hasAlpha:NO isPlanar:NO colorSpaceName:NSDeviceRGBColorSpace bytesPerRow:width*3 bitsPerPixel:0];  

#ifdef __MAC_10_8

    NSImage* backgroundWrapper = [NSImage imageWithSize:size flipped:YES drawingHandler:^(NSRect dstRect){ return [imgRep drawInRect:dstRect]; }];
    NSPoint backgroundPoint;
    backgroundPoint.x = 0;
    backgroundPoint.y = 0;
    [backgroundWrapper lockFocusFlipped:YES];
    [background drawAtPoint:backgroundPoint fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
    [firstImage firstImage fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
    [backgroundWrapper unlockFocus];

    NSBitmapImageRep *bmpImageRep = [[NSBitmapImageRep alloc]initWithData:[backgroundWrapper TIFFRepresentation]];
    [backgroundWrapper addRepresentation:bmpImageRep];
#else
    [background lockFocusFlipped:YES];
    [firstImage drawAtPoint:firstImagePoint fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
    [background unlockFocus];
    NSBitmapImageRep *bmpImageRep = [[NSBitmapImageRep alloc]initWithData:[background TIFFRepresentation]];
    [background addRepresentation:bmpImageRep];
#endif

    NSData *data = [bmpImageRep representationUsingType: NSPNGFileType properties: nil]; 
```

我怎样才能让它在 Retina 显示器上工作？

**编辑**

我也试过这个：

```
- (NSImage )drawImage:(NSImage)background with:(NSImage*)firstImage { 

    return [NSImage imageWithSize:NSMakeSize(3200, 2000) flipped:NO drawingHandler:^BOOL(NSRect dstRect) { 
        NSPoint backgroundPoint; backgroundPoint.x = 0; 
        backgroundPoint.y = 0; 
        [background drawAtPoint:backgroundPoint fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0]; 
        [firstImage drawAtPoint:backgroundPoint fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0]; 
        return true; 
    }];
} 
```

但生成的图像是 6400x4000px

# c# - WCF 和类库：使用数据传输对象简化序列化导致“隐藏的基本属性”

> ID：14061660
> 
> 赞同：2
> 
> 时间：2012-12-27T21:39:21.170
> 
> 标签：c#, asp.net, wcf, inheritance

我们大多数人都知道，WCF 不支持“面向对象”意义上的继承。话虽如此，有一些解决方法，但它们会产生开销。其中一些解决方法包括 KnownTypes 和 ServiceKnownTypes。为了简化跨线路的消息传递过程并保持性能，我正在考虑使用“数据传输对象”。我已经在“实体类库”和测试库中测试了这些对象，并遵循了两个独立的 CLR 继承结构。下面是每个的简化表示：

第一种情况： ![第一个继承案例图](../Images/40a6689874034d59b312ab88ea619b82.png)

这种情况下，BookDTO 继承自 Book 类所继承的同一个 IBook 接口。从 Book 到 BookDTO 没有“直接”继承。

第二种情况： ![第二个继承案例图](../Images/d7ccaa9ce9f82e1fad323b65b70eaed3.png)

第二种情况允许 BookDTO 直接从 Book 和 IBook 继承。这似乎是最灵活的结构，因为它将支持面向对象的代码，以便在需要时通过直接转换在 Book 和 BookDTO 之间实现松散耦合和可互换性。此外，与 IBook 接口一样，Book 也有一个逻辑父级。但是，明显的问题是这种情况会在 Visual Studio 中引发警告，因为隐式包含的接口成员的属性上的 WCF DataMemberAttribute 属性的任何实现都将隐藏父类属性。

我的问题：如果我的意图是允许在类库中正确继承，同时通过“数据传输对象”支持简化的消息传递基础架构，是否建议创建获取和设置父属性的本地版本的属性？请参阅下面的代码参考：

```
[DataContract(Name="BookDTO")]
class BookDTO: Book, IBook
{
    [DataMember(Name="Author")]
    string Author { get { return base.Author; } set { base.Author = value; } }

    [DataMember(Name = "Publisher")]
    string Publisher { get { return base.Author; } set { base.Author = value; } }

    [DataMember(Name = "Id")]
    int Id { get { return base.Id; } set { base.Id = value; } }

    [DataMember(Name = "Name")]
    string Name { get { return base.Name; } set { base.Name = value; } }
} 
```

确实，这会引发编译器警告 CS0108（2 级警告）。我可以通过使用“新”关键字来克服这个问题。我的问题是，考虑到面向对象代码的逻辑继承，以上两种情况下的结构是可取的吗？为序列化扁平化类层次结构的能力有其好处，但我需要将 DataContractAttribute 和 DataMemberAttribute 添加到每个属性。

我这样做的原因是有几种自定义类型将在“Book”和“BookDTO”的实际生产代码中进行数组序列化。此外，我期待不止一种类型的产品，但“产品”类将保持抽象，永远不应该单独实现。

让我知道我对案例二的直觉是否正确，或者如果 BookDTO 仅源自 IBook 接口，我是否需要考虑“无警告”结构。

附加说明：我喜欢案例二的结构，因为它支持从 BookDTO 向上转换到 Book ... (Book)BookDTO。在 ASP.NET 下的 OOP 模型中，向上转换比支持以下转换结构要便宜得多（几乎免费）：(Book)(IBook)BookDTO ...如果开发人员使用此实体库，这将更加昂贵决定在对象之间进行排序和转换。此外，强制转换需要返回到根接口。这只是让我有点畏缩......

# android - Android：Theme.Holo.Light.NoActionBar vs Theme.Light.NoTitleBar

> ID：14061661
> 
> 赞同：26
> 
> 时间：2012-12-27T21:39:23.470
> 
> 标签：android, android-theme

在`res/values-v11/styles.xml`中，我不能使用`Theme.Holo.Light.NoActionBar`，因为它是在 API 级别 13 中添加的。我可以改用它`Theme.Light.NoTitleBar`，而没有视觉差异吗？据我所知，它们都应该有白色背景、状态和导航栏，没有别的。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-12-27T21:57:54.063

Theme.Light.NoTitleBar 略有不同。解决此问题并保持与 Honeycomb 兼容的最简单方法是创建自己的样式，扩展 Theme.Holo.Light，但删除操作栏。只需创建具有以下定义的样式：

```
<style name="MyTheme" parent="android:Theme.Holo.Light">
    <item name="android:windowActionBar">false</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-26T13:04:50.580

据我所知， Theme.Light.NoTitleBar 是基于旧的 API 级别。你会得到Android 2.3的风格。但是 Theme.Holo.Light.NoActionBar 可以给你4.0以上的风格。

# javascript - 在等待数据时在 Javascript 中使用 gif 图像

> ID：14061664
> 
> 赞同：1
> 
> 时间：2012-12-27T21:39:32.120
> 
> 标签：javascript, jquery, gif, animated-gif

在等待来自服务器的“实时”数据时，我想显示一张`gif`图片。否则客户端什么也看不到，也不知道他们的请求状态。例如，使用诸如“egg-timer”之类的 gif 图像，他们至少会知道请求已发送并且客户端现在正在等待响应。

这就是我的编码方式：

```
 websocket.onmessage = function(data){
     while (!data){
     $("#display").append('/templates/image.gif');
     }
     CODE THAT IS EXECUTED ON RECEIPT OF data
    } 
```

我正在使用 websockets 作为客户端和服务器之间的通信协议。但是在`gif`等待`data`服务器时图像不显示。

我是 javascript 的新手，所以不知道什么 id 错了

编辑

感谢您的帮助，您的建议使 gif 图像正常工作。

但是我得到的图像不是一个`gif`，而是看起来像一个破碎的图片图标（Chrome 和 Firefox 中什么都没有）。这是现在的代码：

```
$("#display").append('<img src="/templates/image.gif" />');
websocket.onmessage = function(data){
         CODE THAT IS EXECUTED ON RECEIPT OF data
} 
```

该`gif`文件没问题并且在正确的目录中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:45:28.423

通常当我想显示加载图像时，我会直接将其嵌入到 HTML 中 display:none （如果它应该在页面加载后等待数据时显示加载图像，则阻止）。每当我请求数据时，我都会在发出请求之前将显示设置为阻塞，以便没有阻塞，然后在数据返回时将显示设置回无。我发现通过样式表控制加载 gif 比添加它们并从 DOM 中删除它们更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:51:01.083

`onmessage`仅在实际有数据时调用，因此您不必循环等待它。

通常，您永远不想在 javascript 中循环等待数据，因为这将阻止您正在等待的实际事件，并且由于 javascript 的单线程性质，您将锁定浏览器并且永远不会获得您的实际事件。

我想你想要这样的东西：

```
// show msg waiting for data
$("#display").append('/templates/image.gif');
websocket.onmessage = function(data){
     // CODE THAT IS EXECUTED ON RECEIPT OF data
     // remove or hide the temporary image here 
     // now that the data has arrived and been processed.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:54:19.153

我认为你应该使用：

```
$("#display").append('<img src="http://www.yourhost.com/templates/image.gif" />'); 
```

代替：

```
$("#display").append('/templates/image.gif'); 
```

或者，您也可以创建一个简单的 css 类，如下所示：

```
.loading {
    display: block;
    width: 16px;
    height: 16px;
    background: transparent url('/templates/image.gif') no-repeat center center;
} 
```

然后做：

```
$("#display").append('<span class="loading"></span>'); 
```

# java - 如何在 JEditorPane 中设置 HTML 样式？

> ID：14061665
> 
> 赞同：0
> 
> 时间：2012-12-27T21:39:32.253
> 
> 标签：java, html, css, swing, jeditorpane

我完全迷失了这一点。我需要在 HTML 文件中明确引用的 CSS 吗？如果是这样，我将如何获得它，以及如何将 CSS 应用于 HTML？我读了一些关于 JSoup 能够获取 CSS 的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:06:49.057

请参阅[如何为 JEditorPane 添加样式表](http://alvinalexander.com/blog/post/jfc-swing/how-add-style-stylesheet-jeditorpane-example-code)。一般来说`http://`，`file://`包含和嵌入的 CSS 是没有问题的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:45:38.923

在各个 HTML 标记中使用 style="" 属性

# eclipse-rcp - 在构建期间定义 .eclipseproduct

> ID：14061666
> 
> 赞同：0
> 
> 时间：2012-12-27T21:39:38.290
> 
> 标签：eclipse-rcp, m2eclipse, tycho

当我构建我的产品时，生成了 .eclipseproduct。这个文件仍然与 Eclipse 3.6+ 相关吗？有没有办法修改这个文件以反映我的产品？我知道我可以自己更改此文件，但想知道是否有插件可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:18:21.257

在产品安装的安装配置文件 ( `p2/org.eclipse.equinox.p2.engine/profileRegistry/<ProfileName>.profile/<highest number>.profile.gz`) 中，您可以找到`.eclipseproduct`文件的来源：它是从工件中提取的`org.eclipse.rcp_root`。`org.eclipse.rcp`安装该功能 (p2 id )时，将始终安装该工件`org.eclipse.rcp.feature.group`。

所以这个文件不是由构建生成的，但它带有构建中引用的工件。如果您想了解它的用途或希望对其进行更改，您应该联系该`org.eclipse.rcp`功能的提供者。

# cassandra - 查看 Cassandra 中是否存在 rowkey

> ID：14061667
> 
> 赞同：1
> 
> 时间：2012-12-27T21:39:42.933
> 
> 标签：cassandra, hbase

在 HBase 中有一个 HTable.exists(Get) 方法，它允许我查看一个行键是否（至少）有一个关联的单元格。卡桑德拉呢？好像没有对应的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:17:18.517

只需请求一列。如果返回任何内容，则该行存在。

例如，在 pycassa 中，你会这样做：

```
if column_family.get(key, column_count=1):
    print key, "exists" 
```

通过 CQL 3，根据您的架构，您只需执行简单的选择，例如：

```
SELECT * FROM mycf WHERE key = 'foo' 
```

# java - 试图在 LongClick 上编辑 TextView 的值——几乎可以工作

> ID：14061668
> 
> 赞同：0
> 
> 时间：2012-12-27T21:39:45.853
> 
> 标签：java, android

我的 XML 布局中有两个元素（TextView），当按下 LongClick 时，它将提示用户输入新值，然后当单击 DONE 按钮时，它应该使用 setText() 将新输入的值显示给 tvScoreHome .

当我对提到的元素进行长按时，编辑字段和键盘会按预期显示。但是，它不允许我输入任何内容。当我输入某些内容时，它什么也没有显示（但设备会像按下按钮一样振动），当单击 DONE 按钮时它也会振动，但它不会退出键盘并在 tvScoreHome 元素中显示任何内容。

任何想法为什么？

```
 // set the onLongClickListener for tvScoreHome
    tvScoreHome.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            final EditText userInput = (EditText) findViewById(R.id.userInput);

            InputMethodManager imm = (InputMethodManager) context.getSystemService(Service.INPUT_METHOD_SERVICE);

            userInput.setVisibility(View.VISIBLE);
            imm.showSoftInput(userInput, 0);
            tvScoreHome.setText( userInput.getText() );
            userInput.setVisibility(View.INVISIBLE);

            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:44:30.983

在复制数据和隐藏 EditText 之前，您需要让用户有机会输入一些文本。
从您的侦听器中删除这两行：

```
tvScoreHome.setText( userInput.getText() );
userInput.setVisibility(View.INVISIBLE); 
```

`userInput`也许您可以在失去焦点时使用 OnFocusChangeListener 来运行这两行。

# c++ - 显示垃圾值的二进制文件处理程序 (Turbo C++)

> ID：14061671
> 
> 赞同：0
> 
> 时间：2012-12-27T20:43:07.390
> 
> 标签：c++, data-structures, file-handling

我使用 Turbo C++ 编写了一段简单的代码，它将银行客户的 ID 和余额保存到`.dat`文件中。但有时当我输入一个id或balance *（特别是3333作为id或3333作为balance）*然后显示数据时，代码不起作用，什么也没有发生。

然后在添加另一个账户的数据时，它会给出随机垃圾值，并在添加新账户时继续给出随机垃圾。我需要一点帮助来解决这个问题。

下面是代码：

```
#include <constream.h>
#include <fstream.h>
#include <stdio.h>
#include <time.h>
#include <string.h>

struct data
{
    int id;
    long bal;
    char date[20];

    data()
    {
        id=0;
        bal=0;
    }

}d1,d2;

void addaccount(void)
{
    clrscr();
    cout<<"\t\t\t Add New Account\n";
    ofstream obj("d:\\tc\\data1.dat",ios::app);
    cout<<"Enter ID  ";
    cin>>d1.id;
    cout<<"\nEnter Amount Deposited at Account Opening  ";
    cin>>d1.bal;

    while(d1.bal<2000)
    {
        cout<<"Amount should be Greater then RS 1999 \n\t\t\TEnter Amount Again ";

        cin>>d1.bal;
    }
    {
        time_t t;
        struct tm * x;
        time(&t);
        x=localtime(&t);
        strftime(d1.date,21,"\n%Y/%m/%d\n%H:%M:%S",x);

    }

    obj.write((char*)&d1,sizeof(data));
    obj.close();
}

void dispall(void)
{
    clrscr();
    cout<<"\t\t\tAll Accounts \n\n\n";
    ifstream obj1("d:\\numan\\data1.dat");

    while(obj1.read((char*)&d1,sizeof(data))!=0)
    {
        cout<<"ID = "<<d1.id;
        cout<<"      Balance = "<<d1.bal<<endl<<endl;
    }

    obj1.close();
    getch();
}

main()
{
    clrscr();
    int menu;

    while(menu!=8)
    {
        clrscr();
        cout<<"\t\t\tBANK MENU\n\t\t Enter Required key To perform a task \n";
        cout<<"Press \n1=> Add New Account \n";
        cout<<"2=> Display All Accounts \n";
        /*cout<<"3=> Search An Account\n";
          cout<<"4=> Delete An Account\n";
          cout<<"5=> Delete All Accounts\n";
          cout<<"6=> Updat An Account\n";
          cout<<"7=> History of An Account\n";
          */
        cout<<"8=> Exit\n";

        cin>>menu;
        switch(menu)
        {
            case 1:addaccount();
                   break;
            case 2:dispall();
                   break;
          /*case 3:search1(0);
                   break;
            case 4:delet1(0);
                   break;
            case 5:deletall();
                   break;
            case 6:update1();
                   break;
            case 7:search1(1);
                   break; */
            case 8: break;
            default:cout<<"Wrong Number Pressed";
                    getch();
        }
    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:43:50.330

我认为问题可能出在这一行：

```
ifstream obj1("d:\\numan\\data1.dat"); 
```

由于您使用的是Windows机器，如果您要读写包含二进制数据的文件，则需要以二进制模式打开文件，如下所示：

```
ifstream obj1("d:\\numan\\data1.dat", ios::binary); 
```

否则，Windows 会对你的二进制数据做一些残忍和不寻常的事情，例如替换虚假的换行符和过早结束文件。

同样，在这一行中：

```
ofstream obj("d:\\tc\\data1.dat",ios::app); 
```

您可能还应该使用二进制模式，如下所示：

```
ofstream obj("d:\\tc\\data1.dat", ios::app | ios::binary); 
```

希望这可以帮助！

# php - PHP：用户的自定义页面登陆

> ID：14061673
> 
> 赞同：-1
> 
> 时间：2012-12-27T21:40:09.707
> 
> 标签：php, authorization, url-routing, laravel

我正在构建一个应用程序，我的客户想要实现一个具有组权限的基本身份验证系统。都好。

我要解决的问题是，他希望能够在每个用户组登录时为他们设置默认登陆 url。他想通过表单来做到这一点，所以它不能被硬编码。

**例如**：管理员的默认网址是

> 我的应用程序/仪表板

而作家的将是

> 我的应用程序/写

起初我想为所有 url 创建表并将它们连接到 groupPermissions 表，但它看起来有点多余。

我的应用程序是使用 Laravel PHP 框架构建的。

**问题**：解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:04:03.447

这取决于您希望系统有多灵活。如果要在管理面板中更改 URI 路径，那么将 URL 存储在某种配置中并在登录时加载它们将是可行的方法。

对于我认为您想要的，我会将组中的 URI 定义为常量：

```
<?php

class Group extends Eloquent {
    const ADMIN_URI = 'myapp/dashboard'; // Could also be named routes.
    const WRITER_URI = 'myapp/write';
} 
```

然后您可以登录用户并获取他们的权限组，然后在登录控制器中进行如下检查：

```
if(defined($redirectUri = sprintf('Group::%s_URI', strtoupper($groupName))) {
    return Redirect::to(constant($redirectUri));
} 
```

或类似的东西：

```
switch(strtolower($group)) {
    case 'admin':
        return Redirect::to(Group::ADMIN_URI);
        break;
    case 'writer':
        return Redirect::to(Group::WRITER_URI);
        break;
    default:
        return Redirect::to('homepage');
        break;
} 
```

这真的是见仁见智。您应该关心的唯一问题是如何存储 URI 路由并统一访问它们的集中位置。

# mysql - MySQL - 关于多语言数据库的建议

> ID：14061675
> 
> 赞同：1
> 
> 时间：2012-12-27T21:40:29.037
> 
> 标签：mysql

我需要一些帮助来为多语言网站创建数据库。我有一种感觉，我正在创造一个怪物。因此，任何建议都会非常有帮助。我有两个表格供文章使用。

此表包含对每种语言都相同的数据：

```
article

id_article
images
date_created
date_start
date_end 
```

此表包含不同的数据 - 英文文本与德文文本不同。

```
article_info

article_id
title
text
info
category_id
lang_id 
```

这背后的想法是一篇文章可以使用多种不同的语言。这是构建表格的好方法还是我做错了什么？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:55:58.447

我相信这种设计，其中一篇文章可以有一个或多个不同语言的渲染，会很好用。我曾在一个类似的系统上工作过，其中多种语言是事后才想到的。在那个系统上，主要语言（通常是 EN-us）在文章表中有列。这个更好。

需要考虑的一件事：您可能希望也可能不希望能够存储文章的摘要数据，例如标题、主题、关键字，甚至可能是多种语言的摘要，即使您没有完整的翻译文章。因此，您可能需要 title_info、text_info、keyword_info 等单独的表，而不是 article_info，每个表都有一个 lang_id 键。

注意你的字符集（utf8 是一个不错的选择）和排序规则。您的默认排序规则应该是 utf8_general_ci，但您的

```
 ORDER BY xxx COLLATE collation 
```

可能需要根据用户偏好设置逐个用户设置。例如，对于`COLLATE utf8_general_ci`其中 n 和 ñ 是不同字母的西班牙语标题，不会做正确的事情。

# java - 如果元素存储在数据库中，如何动态添加元素

> ID：14061683
> 
> 赞同：0
> 
> 时间：2012-12-27T21:42:10.377
> 
> 标签：java, sqlite

> **可能重复：**
> [在应用程序中支持自定义字段的设计模式是什么？](https://stackoverflow.com/questions/1126783/what-are-design-patterns-to-support-custom-fields-in-an-application)

我使用 SQLite 来存储我的数据。我在表中有几列，例如`id`、和。现在我需要扩展我的数据模型并在数据库中保留, , ... ,字段。我希望用户动态添加它们。`title``description``notes``other 1``other 2``other N`

我只是不知道如何处理这种情况，因为表中的列数是固定的。这种情况的处理方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:51:30.210

一种可能的方法是使用属性-值-对模式，您可以在其中拥有具有以下模式的单独表：

*   id（来自您的原始表格）
*   属性名称（可以是您的其他 1、其他 2 等）。
*   属性值

您可以通过为您的属性创建单独的表来进一步规范这种方法，例如使用以下模式：

*   ID
*   姓名
*   数据类型

然后你原来的桌子会变成

*   ID
*   属性标识
*   属性值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:47:53.320

SQLite 支持`ALTER TABLE ADD COLUMN`语法。更多信息[在这里](http://www.techonthenet.com/sql/tables/alter_table.php)。

SQLite 不支持所有[DDL](http://en.wikipedia.org/wiki/Data_definition_language)功能。请参阅[此处](http://www.sqlite.org/omitted.html)了解 SQL92 规范中不受支持的那些特性。

# python - 从 txt 文件中获取数据

> ID：14061689
> 
> 赞同：2
> 
> 时间：2012-12-27T21:43:01.310
> 
> 标签：python

我才刚刚开始我的 Python 之旅。我想建立一个小程序来计算我在摩托车上进行气门间隙时的垫片尺寸。我将有一个包含目标间隙的文件，我将询问用户输入当前垫片尺寸和当前间隙。然后程序将吐出目标垫片尺寸。看起来很简单，我已经建立了一个电子表格，但我想学习 python，这似乎是一个足够简单的项目......

无论如何，到目前为止，我有这个：

```
def print_target_exhaust(f):
    print f.read()

#current_file = open("clearances.txt")
print print_target_exhaust(open("clearances.txt")) 
```

现在，我已经让它读取了整个文件，但是我如何让它只获得例如第 4 行的值。我已经`print f.readline(4)`在函数中尝试过，但这似乎只是吐出了前四个字符。 .. 我究竟做错了什么？

我是新人，请放轻松！-d

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T21:46:00.203

要阅读所有行：

```
lines = f.readlines() 
```

然后，打印第 4 行：

```
print lines[4] 
```

请注意，python 中的索引从 0 开始，因此这实际上是文件中的第五行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T21:49:30.083

```
with open('myfile') as myfile: # Use a with statement so you don't have to remember to close the file
    for line_number, data in enumerate(myfile): # Use enumerate to get line numbers starting with 0
        if line_number == 3:
            print(data)
            break # stop looping when you've found the line you want 
```

更多信息：

*   [与声明](http://www.python.org/dev/peps/pep-0343/)
*   [枚举](http://docs.python.org/2/library/functions.html#enumerate)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T21:49:11.067

效率不是很高，但它应该向您展示它是如何工作的。基本上它会在它读取的每一行上保持一个运行计数器。如果该行是“4”，那么它将打印出来。

```
## Open the file with read only permit
f = open("clearances.txt", "r")
counter = 0
## Read the first line 
line = f.readline()

## If the file is not empty keep reading line one at a time
## till the file is empty
while line:
    counter = counter + 1
    if counter == 4
        print line
    line = f.readline()
f.close() 
```

# javascript - #targetengine 是什么？

> ID：14061690
> 
> 赞同：9
> 
> 时间：2012-12-27T21:43:03.637
> 
> 标签：javascript, adobe-indesign, extendscript

我之前唯一的经验`#targetengine`是在 InDesign 中编写脚本时，我曾经`#targetengine "session";`将对话框变成调色板。但是当我试图弄清楚如何编写菜单脚本时，我开始看到它以其他方式弹出并使用了一个术语（目标？）而不是`session`.

Adobe 喜欢假设每个想要编写脚本的人有时都是经验丰富的程序员，所以我还没有找到关于这是什么的明确解释。

那么，当我使用`#targetengine`时，我在做什么？我可以使用除 之外的任何术语`"session"`吗？一些搜索表明此功能与全局变量有关；是这样吗？如果是这样，如何在不重新启动 InDesign 的情况下清除它们？这是 JavaScript 还是 ExtendScript/InDesign 功能？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-27T22:55:24.047

`#targetengine`特定于 InDesign、PhotoShop、Illustrator 等中的 Adob​​e 脚本 - 它不是一般的 Javascript 功能。

它指定了如何处理所有全局“东西”——不仅是变量，还有函数声明和对全局状态的任何其他更改。

如果您使用默认的“主”引擎，所有全局变量都会在脚本完成后立即消失。如果您使用“会话”引擎，只要主机应用程序继续运行，所有全局变量都会被保留。这意味着如果您运行脚本：

```
#targetengine "session"

var test = "test"; 
```

然后运行脚本：

```
#targetengine "session"

alert(test); 
```

你得到一个消息框`test`而不是给出一个错误

除了两个标准的“主”和“会话”引擎之外，您还可以使用任意名称创建自己的引擎 - 所以如果您运行脚本

```
#targetengine "mine"

var test = "another test"; 
```

然后运行

```
#targetengine "mine"

alert(test); 
```

您会看到一个消息框`another test`，但如果您再次运行

```
#targetengine "session"

alert(test); 
```

你仍然得到`test`：有两个不同的“测试”全局变量，一个在“会话”引擎中，一个在（新创建的）“我的”引擎中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-23T22:14:20.793

这个讨论是在我监控的 Slack 频道中提出的。一位长期开发人员说以下内容（为清楚起见进行了一些清理）：

> 据我所知，`//@targetengine`仅适用于 InDesign（可能包括 InCopy）和 Illustrator。
> 
> 在 InDesign 上它可以正常工作，而在 Illustrator 上则不能。尽管如此，据我所知，其他应用程序都能够使用带有 C++ 的目标引擎，这就是 CEP 对每个 CEP [扩展？] 拥有自己的隔离引擎所做的事情。
> 
> 至少有 3 种类型的引擎。
> 
> 1.  `main`引擎，在 InDesign 中，它是一个临时引擎，在完成脚本执行后会忘记所有内容。
>     
>     
> 2.  `Public Private`像这样的引擎`session`在脚本执行后会记住并处于活动状态，并且对事件侦听器有好处。这些`main`可以使用`$.engineName`并在 ESTK / vsCode 上找到
>     
>     
> 3.  `Private Private` `$.engineName`将显示`""`只能使用 C++ 创建大多数应用程序使用和 CEP 使用的内容，除了 InDesign，其中 CEP 使用`Public Private`可以选择的引擎。

他认为还有第四种他忘记了。

# c++ - 多个代理类可以组成一个 STL-proof 位向量吗？

> ID：14061694
> 
> 赞同：12
> 
> 时间：2012-12-27T21:43:17.410
> 
> 标签：c++, stl, containers, proxy-classes, bitvector

[众所周知](http://www.gotw.ca/publications/mill09.htm)，它`std::vector<bool>`不满足标准的容器要求，主要是因为打包表示阻止`T* x = &v[i]`返回指向布尔值的指针。

我的问题是：当reference_proxy 重载address-of**以返回pointer_proxy****时，这可以补救/缓解吗？`operator&`**

在大多数实现中，指针代理可以包含与 reference_proxy 相同的数据，即指向打包数据的指针和用于隔离块内指向的特定位的掩码。然后，pointer_proxy 的间接生成将产生 reference_proxy。本质上，这两个代理都是“胖”指针，但是与基于磁盘的代理容器相比，它们仍然相当轻量级。

而不是`T* x = &v[0]`一个人可以这样做`auto x = &v[0]`，并且使用`x`like`if(*x)`没有问题。我也希望能够写`for(auto b: v) { /* ... */ }`

**问题**：这种多代理方法是否适用于 STL 的算法？还是某些算法真的依赖于`x`需要成为真实的需求`bool*`？或者是否有太多连续的用户定义转换需要阻止它工作？在尝试完全完成上述实现草图之前，我想知道任何此类障碍。

* * *

**更新**（基于@HowardHinnant 的回答和关于 comp.std.c++的[古老讨论）](https://groups.google.com/forum/#!search/vector$20bool$20C$2B$2B$20Kanze/comp.std.c++/lPF9pX1kS1Y/qKYwSrdMUeoJ)

您几乎可以模仿内置类型：对于任何给定的类型 T，可以使一对代理（例如 reference_proxy 和 iterator_proxy）相互一致，即 reference_proxy::operator&() 和 iterator_proxy::operator* () 互为逆。

但是，在某些时候需要将代理对象映射回其行为类似于 T* 或 T&。对于迭代器代理，可以重载 operator->() 并访问模板 T 的接口，而无需重新实现所有功能。但是，对于参考代理，您需要重载 operator.()，这在当前的 C++ 中是不允许的（尽管[Sebastian Redl 在 BoostCon 2013 上提出了这样的提议](https://github.com/boostcon/cppnow_presentations_2013/blob/master/thu/overloading_dot.pdf?raw=true)）。您可以在引用代理中进行详细的解决方法，例如 .get() 成员，或者在引用中实现所有 T 的接口（这是对 vector::bit_reference 所做的），但这会丢失内置语法或引入没有用于类型转换的内置语义的用户定义的转换（每个参数最多可以有一个用户定义的转换）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T01:49:40.247

> 我的问题是：当reference_proxy 重载地址操作符& 以返回pointer_proxy 时，这可以补救/缓解吗？

[libc++](http://libcxx.llvm.org)实际上就是这样做的。

```
#include <vector>
#include <cassert>

int main()
{
    std::vector<bool> v(1);
    std::vector<bool>::pointer pb = &v[0];
    assert(*pb == false);
    *pb = true;
    assert(v[0] == true);
    std::vector<bool>::const_pointer cbp = pb;
    assert(*cbp == true);
    v[0] = false;
    assert(*cbp == false);
} 
```

`const_pointer`它甚至延伸到`const_reference`模仿相同类型的`vector<int>`. 这是 libc++ 的不符合标准的扩展。但这使得编写可能被实例化的通用代码`vector<bool>`更有可能编译和正确运行。

> 问题：这种多代理方法是否适用于 STL 的算法？还是某些算法真的依赖于 x 必须是真正的 bool* 的要求？或者是否有太多连续的用户定义转换需要阻止它工作？

所有 libc++ 的算法都适用于`vector<bool>`. 其中一些[表现相当壮观](http://isocpp.org/blog/2012/11/on-vectorbool)。特别是一种算法**必须**进行特殊处理，但遗憾的是该标准并未强制要求：

```
#include <vector>
#include <cassert>

int main()
{
    std::vector<bool> v(1);
    bool b = true;
    assert(v[0] == false);
    assert(b == true);
    std::swap(b, v[0]);
    assert(v[0] == true);
    assert(b == false);
} 
```

这很容易实现。只需确保`swap`适用于`bool`和的任何组合`vector<bool>::reference`。但我不知道除了 libc++ 是否有任何实现可以做到这一点，而且它不是 C++11 强制要求的。

位数组是一种**奇妙的**数据结构。但不幸的是，它在 C++ 标准中的规定很差。libc++ 已经有些违法了，以证明这可能是一个非常有用和高性能的数据结构。希望未来的 C++ 标准可以朝这个方向迁移，以使 C++ 程序员受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:03:07.397

我首先要说的是，它实际上将更多地取决于每个单独的 STL 实现的细节，因为它不正式符合标准要求 *reference_type 是 T* 的左值。因此，关于潜在的实施问题：

*任何一段代码都显式依赖于容器的指针是真实* 的主要原因`bool*`是算法是否使用指针算法，在这种情况下指针类型的大小变得相关。指针算法虽然会绕过迭代器接口，从而破坏了整个 STL 逐个迭代器容器设计的主要目的。std::vector<> 本身在 C++11 中保证是连续的，这允许优化 STL 算法和编译器 for(:) 的特化，两者都可以在内部使用指针算术。如果您的类型不是从 std::vector 派生的，那么这应该不是问题；一切都应该只假设迭代器方法。

**然而！** STL 代码可能仍然*使用指针*，但不是为了指针算术，而是为了其他目的。在这种情况下，问题是**C++ 语法**。例如，引用您自己的问题：

> 而不是`T* x = &v[0]`一个可以做`auto x = &v[0]`

STL 中的任何模板化代码也必须做同样的事情……而且在这一点上，STL 实现似乎完全不可能广泛使用`auto`. 可能还有其他情况是 STL 尝试执行巧妙的 r 值转换技巧，但最终失败，因为它不期望不匹配的引用类型。

关于`for(auto b: v) { /* ... */ }`：我认为没有理由不应该工作。我认为它生成的代码的效率远低于你可以在 15 分钟（或更短时间）内完成的相同版本。*我只是在你提到内在函数*后才提出来*在 OP 中，这意味着对性能的一些考虑。您也无法使用内在函数来帮助它。内在函数无法以某种方式超越用于顺序遍历位数组的简单按位移位。大部分增加的开销将来自编译器生成代码以更新迭代器指针和掩码值，然后在下一次迭代时重新加载掩码值。它无法神奇地推断出您正在尝试做的事情并将其变成您的顺序移位操作。它至少可以通过将指针更新+写回阶段缓存到循环外的寄存器中来优化它，但老实说，根据我的经验，我会非常怀疑。*

 *这是一种从头到尾遍历位的方法，只是为了比较（能够从位流中的任意点开始的版本需要一些额外的设置逻辑）：

```
uint64_t* pBitSet   = &v[-1];   // gets incremented on first iteration through loop.
uint64_t  curBitSet =  v[0];

for (int i=0; i<v.length(); ++i)  {
    if ((i % 64) == 0) {
       curBitSet = *(++pBitSet);
    }
    int bit = curBitSet & 1;
    curBitSet >>= 1;

    // do stuff based on 'bit' here.
} 
```*

# d3.js - 构建 nvd3.js 饼图的视觉效果（类似于 highcharts）

> ID：14061695
> 
> 赞同：1
> 
> 时间：2012-12-27T21:43:18.970
> 
> 标签：d3.js, nvd3.js

在构建图形时，我希望创建具有类似于 highcharts ( [http://www.highcharts.com/demo/pie-basic/dark-green ) 的良好视觉效果的饼图。](http://www.highcharts.com/demo/pie-basic/dark-green)

这可能吗？

谢谢

# asp.net - RSS 导入到 .net

> ID：14061702
> 
> 赞同：0
> 
> 时间：2012-12-27T21:43:42.120
> 
> 标签：asp.net, rss

我想将 RSS 提要从 WordPress 导入 .net 站点，将导入限制为最新的帖子，而不是整个提要。到目前为止，我必须通过非公共项目样式表中的 :first-child 伪元素隐藏所有帖子，除了第一个，这在公共站点（隐藏内容）中效果不佳。

以下是我现在拥有的：

```
 <asp:DataList ID="DataList1" runat="server" DataSourceID="XmlDataSource1" CssClass="blog-rss">
     <ItemTemplate>
         <h4><a href="<%# XPath("link") %>"><%# XPath("title") %></a></h4>
         <span class="author"><%# XPath("pubDate") %></span><br />
            <%# XPath("description") %>
            <hr />
      </ItemTemplate>
  </asp:DataList>

  <asp:XmlDataSource ID="XmlDataSource1" Runat="server"
      DataFile="http://blog.domain.com/category/signs/feed/"
      XPath="rss/channel/item">
   </asp:XmlDataSource> 
```

对上述内容有何建议或修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:05:42.343

尝试修改 XPath 以仅获取提要中的第一项

```
 <asp:XmlDataSource ID="XmlDataSource1" Runat="server"
      DataFile="http://blog.domain.com/category/signs/feed/"
      XPath="rss/channel/item[1]">
   </asp:XmlDataSource> 
```

# php - has_many 通过使用自定义表和字段名称

> ID：14061707
> 
> 赞同：2
> 
> 时间：2012-12-27T21:44:22.980
> 
> 标签：php, phpactiverecord

我正在使用[php.activerecord](http://www.phpactiverecord.org/)，我正在尝试将表链接在一起。我没有使用*他们的*结构，但 php.activerecord 假设我是，所以它并不总是有效。我正在尝试在已经制作的应用程序上使用它，所以我无法更改数据库。

我从上一个问题中了解到 -[与自定义表和键名的模型关联](https://stackoverflow.com/questions/13868791/model-association-with-custom-table-and-key-names)- 我需要尽可能明确地使用`primary_key`and`foreign_key`字段。

我现在在使用[has_many through](http://www.phpactiverecord.org/projects/main/wiki/Associations#has_many_through)时遇到问题。我不断得到`NULL`，我不知道为什么。

所以，这是一个场景：我有 3 个表，`contacts`、`contactPrefs`和`preferences`。这些表如下

```
contacts
--------
contactID
name
status

contactPrefs
------------
contactID
prefID
prefValue

preferences
-----------
prefID
name
description 
```

每个`contact`都有多个`contactPrefs`. 每个`contactPrefs`人都有一个`preferences`。我试图用`has_many`它来让它工作，但事实并非如此。这是我的模型：

`Contacts.php`：

```
<?php
class Contact extends ActiveRecord\Model {
    static $primary_key = 'contactID';

    static $has_many = array(
        array(
            'prefs',
            'foreign_key' => 'contactid',
            'primary_key' => 'contactid',
            'class_name' => 'ContactPref'
        ),
        array(
            'preferences',
            'foreign_key' => 'prefid',
            'primary_key' => 'prefid',
            'through' => 'prefs',
            'class_name' => 'Preference'
        )
    );
} 
```

`ContactPref.php`：

```
<?php
class ContactPref extends ActiveRecord\Model {
    static $table_name = 'contactPrefs';

    static $belongs_to = array(
        array(
            'contact',
            'foreign_key' => 'contactid',
            'primary_key' => 'contactid'
        ),
        array(
            'preference',
            'foreign_key' => 'prefid',
            'primary_key' => 'prefid'
        )
    );
} 
```

`Preference.php`：

```
<?php
class Preference extends ActiveRecord\Model {
    static $primary_key = 'prefID';

    static $has_many = array(
        array(
            'prefs',
            'foreign_key' => 'prefid',
            'primary_key' => 'prefid',
            'class_name' => 'ContactPref'
        )
    );
} 
```

根据[文档](http://www.phpactiverecord.org/projects/main/wiki/Associations#has_many_through)，我现在应该能够执行以下操作：

```
<?php
var_dump(Contact::find(1234)->preference); 
```

我不能。我明白了`NULL`。奇怪的是，我*可以*这样做：

```
<?php
var_dump(Contact::find(1234)->prefs[0]->preference); 
```

这工作正常。但是，我不应该能够*直接*通过对象访问`preference`对象吗？我是否误解了文档（在我看来，它们不是最好的）？难道我做错了什么？*`contact`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:56:04.967

首先，您正在阅读带有小缺陷的文档。在文档中，您会看到：

```
$order = Order::first();
# direct access to users
print_r($order->users); # will print an array of User object 
```

您已经通过`Contact::find(1234)->prefs`. 让我稍微煮一下

```
$contact = Contact::find(1234);
# direct access to prefs
print_r($contact->prefs); # will print an array of ContactPref object 
```

其次，你真正想要的是**undefined**。`Contact::find(1234)->preference`实际上应该**怎么做**？返回第一个*ContactPref*的偏好？*返回一个Preference*对象数组？

我想同时提供：

```
<?php
class Contact extends ActiveRecord\Model {
    static $primary_key = 'contactID';

    static $has_many = array(
        array(
            'prefs',
            'foreign_key' => 'contactid',
            'primary_key' => 'contactid',
            'class_name' => 'ContactPref'
        ),
        array(
            'preferences',
            'foreign_key' => 'prefid',
            'primary_key' => 'prefid',
            'through' => 'prefs',
            'class_name' => 'Preference'
        )
    );

    public function get_preference() {
        return isset($this->prefs[0])
            ? $this->prefs[0]->preference
            : null
        ;
    }
    public function get_preferences() {
        $preference=array();
        foreach($this->prefs as $pref) {
            $preference[]=$pref;
        }
        return $preference;
    }
} 
```

让我解释一下我做了什么。**ActiveRecord\Model**类有一个**__ *get($name)****函数，该函数查找另一个名为***get ***_*** **$name**的函数，其中**$name**在您的情况下是**首选项**（对于第一个结果）和**首选项**（对于整个集合）。这意味着您可以执行`Contact::find(1234)->preference`与执行相同的操作`Contact::find(1234)->prefs[0]->preference`（但由于检查而更安全）并`Contact::find(1234)->preferences`获得整个偏好集合。**

 **这可以通过多种方式变得更好或优化，因此请不要照原样接受，但请尝试使其适应您的具体情况。例如，您可以使用首选项的 id 作为数组中的索引，或者不强制从*ContactPrefs 加载*比您要使用的数据更多的数据，并尝试更复杂的查询来获取您特别指定的首选项对象需要。

**如果我通过**处理关系定义找到更好的实现，我会回来的。但是看到活动记录的[单元测试](https://raw.github.com/kla/php-activerecord/master/test/RelationshipTest.php)，我持怀疑态度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:09:42.767

有几件事情看起来很奇怪，因此要为您找到“这将解决它”并不容易，但至少这是一个问题：

字段名在 phpactiverecord 中应该总是小写。无论哪种方式，SQL 都不介意（不是表名区分大小写，但列名不区分）。所以做这个：

```
static $primary_key = 'contactID'; 
```

进入

```
static $primary_key = 'contactid'; 
```

连接 // find 命令可以在 SQL 中使用，在这种情况下，你的键字符串如何“大小写”并不重要，所以有些东西可以工作。但是如果连接通过 phpmyadmin 的内部工作，它将失败。所以看看这个`contactID`，还有`prefID`.

同样，这仅适用于 COLUMN 名称，因此不要将类名或表名更改为小写。

*（额外的一点：phpmyadmin 在组合主键方面有问题。所以虽然它可能很难看，但你可以在你的 contactprefs 表（如果你还没有）中添加一个额外的行`id`，以使该表实际上有一些工作不会给你带来太多麻烦，而且对activerecord库有很大帮助）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:37:04.807

尝试以下操作：

```
<?php 
var_dump(Contact::find(1234)->preferences); 
```

该文档说，对于 has_many 关系，它应该由复数引用（[http://www.phpactiverecord.org/projects/main/wiki/Associations#has_many_through](http://www.phpactiverecord.org/projects/main/wiki/Associations#has_many_through)）。Contact::find(1234) 返回一个 Contact 对象，该对象具有多个 contactPrefs 及其每个 Preference。此外，在您的 Contact 模型中，您将 has_many 指定为**preferences**。

```
static $has_many = array(
    array(
        'prefs',
        'foreign_key' => 'contactid',
        'primary_key' => 'contactid',
        'class_name' => 'ContactPref'
    ),
    array(
        'preferences',
        'foreign_key' => 'prefid',
        'primary_key' => 'prefid',
        'through' => 'prefs',
        'class_name' => 'Preference'
    )
); 
```

通过修改编辑：

尝试以下联系模型

```
<?php
class Contact extends ActiveRecord\Model {
static $primary_key = 'contactID';

static $has_many = array(
    array(
        'prefs',
        'foreign_key' => 'contactid',
        'class_name' => 'ContactPref'
    ),
    array('preferences', 
          'through' => 'prefs', 
          'class_name' => 'Preference',
          'primary_key' => 'prefID')
);
} 
```***

# java - 按位与非布尔值

> ID：14061708
> 
> 赞同：3
> 
> 时间：2012-12-27T21:44:27.830
> 
> 标签：java, bit-manipulation, bitwise-operators, hex, bitwise-and

在以下 Java 程序中，我无法理解这一行的作用：

```
wert = (wert * mult + inkr) & 0x7FFFFFFFL; 
```

我了解按位运算符在条件下的作用，但主要有两个数字（十六进制是 Java 中整数的最大值）。我不明白，为什么*& 0x7FFFFFFFL;* 甚至在这一行也有一定的影响力。在我看来，变量*wert*应该只是具有**(wert * mult + inkr)**的值，因为它是真的。虽然我发现*& 0x7FFFFFFFL;* 显然只有当**(wert * mult + inkr)**为负时才会产生一些影响。为什么以及在这一行中究竟发生了什么？

注释：这应该是一个模拟抽奖的程序。我知道程序中的错误，就在注释所在的位置。但这与我现在无关。如果有人能告诉我以下不是真正特定于 Java 的问题，那就太好了：变量*mult*和*inkr*有什么意义？

```
public static void main(String args[]) {
    int kugeln = 49;
    int ziehen = 6;
    int mult = 1103515245;
    int inkr = 12345;
    long wert = System.currentTimeMillis();
    int zahlen[] = new int[kugeln];

    for(int i = 0; i < kugeln; i++) {
        zahlen[i] = i + 1;
        wert = (wert * mult + inkr) & 0x7FFFFFFFL;
    }

    for(int i = 0; i < ziehen; i++) {
        int index = (int)(wert / 10) % (49 - i);
        int temp = zahlen[49 - i]; // Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 49
        zahlen[49 - i] = zahlen[index];
        zahlen[index] = temp;
        wert = (wert * mult + inkr) & 0x7FFFFFFFL;
    }

    int superzahl = (int)(wert / 10) % 10;
    for(int i = 0; i < ziehen; i++) {
        System.out.println(zahlen[49 - i]);
    }

    System.out.println(superzahl);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T21:47:52.360

将按位与与非布尔值一起使用将按位与两个数字的所有位一个接一个。

在这种情况下，数字`0x7FFFFFFFL`是一个数字的十六进制表示，它是一个 0 位，后跟 31 个 1 位：

```
01111111111111111111111111111111 
```

通过与整数进行与运算，您可以保留低 31 位（因为 1 和 x = x 对于任何 x）并清除最高位（因为 0 和 x = 0 对于任何 x）。由于 Java 使用**[32 位有符号二进制补码表示](http://en.wikipedia.org/wiki/Two%27s_complement)**，这具有清除符号位的效果，强制数字为正数。

我的猜测是，这个程序正在使用某种滚动哈希函数，结果数字必须是正数。为此，代码通过将整数与越来越多的信息相结合来不断更新整数，并在每一步通过清除符号位来强制数字为正数。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:47:17.460

Anding 与 0x7FFFFFFFL 导致仅包含 31 个最低位，其他位设置为 0。结果始终为正，因为符号位被屏蔽掉了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:50:41.600

> int temp = zahlen[49 - i]; // 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 49

`i`是从`0`所以`zahlen[49 ]`被称为

```
 int zahlen[] = new int[kugeln];

int kugeln = 49;

int a[] = new int [49]; 
```

`a[49]`总是会抛出异常。有你的例外。

# c# - 数据绑定中的多个DataContext，有必要吗？

> ID：14061713
> 
> 赞同：0
> 
> 时间：2012-12-27T21:44:39.500
> 
> 标签：c#, design-patterns, data-binding, mvvm

在 MVVM 设计中，是否有必要，甚至是一个坏主意，在数据绑定中有多个 DataContext？

我对 MVVM 的看法是 ViewModel 应该是拥有 View 所需的所有数据的那个。因此，在 View 中指定的 DataContext 的唯一源对象只是 ViewModel。ViewModel 将拥有 View 想要绑定到的所有源数据。

但是，我不确定我的想法是否正确，以及是否存在确实需要 View 想要绑定的多个 DataContext 的某些情况。

那么，在数据绑定中为视图设置多个 DataContext 是不是一个坏主意或做法？只有 ViewModel 作为唯一的 DataContext 就足够了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:08:56.860

是的，ViewModel 应该是唯一的顶级 DataContext，它应该设置在 View 的根目录中。但是，可能还有其他子数据上下文。例如，ListBox 可能绑定到数据列表，其中 ListBox 每一行的 DataContext 绑定到数据列表中的一项。

# c# - Linq 查询按字段 1 分组，对字段 2 进行计数，并按加入集合的值之间的计数进行过滤

> ID：14061718
> 
> 赞同：0
> 
> 时间：2012-12-27T21:45:12.837
> 
> 标签：c#, linq, linq-to-objects

我无法正确获取我的 linq 查询。我一直反对用 foreach 循环来做这件事，因为我试图更好地理解 linq。

我在 LinqPad 中有以下数据。

```
void Main()
{
    var events = new[] {
        new {ID = 1, EventLevel = 1, PatientID = "1", CodeID = "2", Occurences = 0 },
        new {ID = 2, EventLevel = 2, PatientID = "1", CodeID = "2", Occurences = 0 },
        new {ID = 3, EventLevel = 1, PatientID = "2", CodeID = "1", Occurences = 0 },
        new {ID = 4, EventLevel = 3, PatientID = "2", CodeID = "2", Occurences = 0 },
        new {ID = 5, EventLevel = 1, PatientID = "3", CodeID = "3", Occurences = 0 },
        new {ID = 6, EventLevel = 3, PatientID = "1", CodeID = "4", Occurences = 0 }
    };

    var filter = new FilterCriterion();
    var searches = new List<FilterCriterion.Occurence>();
    searches.Add(new FilterCriterion.Occurence() { CodeID = "1", MinOccurences = 2, MaxOccurences = 3 });
    searches.Add(new FilterCriterion.Occurence() { CodeID = "2", MinOccurences = 2, MaxOccurences = 3 });

    filter.Searches = searches;

    var summary = from e in events
        let de = new
        {
            PatientID = e.PatientID,
            CodeID = e.CodeID
        }
        group e by de into t
        select new
        {
            PatientID = t.Key.PatientID,
                CodeID = t.Key.CodeID,
            Occurences = t.Count(d => t.Key.CodeID == d.CodeID)
        };

    var allCodes = filter.Searches.Select(i => i.CodeID);

    summary = summary.Where(e => allCodes.Contains(e.CodeID));

    // How do I find the original ID property from the "events" collection and how do I 
    // eliminate the instances where the Occurences is not between MinOccurences and MaxOccurences.

    foreach (var item in summary)
        Console.WriteLine(item);
}

public class FilterCriterion
{

   public IEnumerable<Occurence> Searches { get; set; }

   public class Occurence
   {
       public string CodeID { get; set; }
       public int? MinOccurences { get; set; }
       public int? MaxOccurences { get; set; }
   }

} 
```

我遇到的问题是需要通过 MinOccurences 和 MaxOccurences 过滤器属性过滤结果，最后我想要 ID 为 1、2、3 和 4 的“事件”对象。

如果您能提供帮助，请提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:14:47.813

要`event.ID`在处理结束时访问，您需要将它与您的第一个查询一起传递。改变`select`这个：

```
// ...
group e by de into t
select new
{
    PatientID = t.Key.PatientID,
    CodeID = t.Key.CodeID,
    Occurences = t.Count(d => t.Key.CodeID == d.CodeID),
    // taking original items with us
    Items = t
}; 
```

完成后，您的最终查询（包括出现过滤器）*可能*如下所示：

```
var result = summary
    // get all necessary data, including filter that matched given item
    .Select(Item => new
        {
            Item,
            Filter = searches.FirstOrDefault(f => f.CodeID == Item.CodeID)
        })
    // get rid of those without matching filter
    .Where(i => i.Filter != null)
    // this is your occurrences filtering
    .Where(i => i.Item.Occurences >= i.Filter.MinOccurences
        && i.Item.Occurences <= i.Filter.MaxOccurences)
    // and finally extract original events IDs
    .SelectMany(i => i.Item.Items)
    .Select(i => i.ID); 
```

`1`结果，这会产生`2`。`3`并被`4`排除在外，因为它们没有过滤过去的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:05:49.280

我已经在 linqpad 中运行了你的程序。

我的理解是，您想对结果数据集的出现次数使用 filter.MinOccurences 和 filter.MaxOccurences 进行过滤。

您可以使用 Where 子句添加其他过滤器。

```
if (filter.MinOccurences.HasValue)
 summary = summary.Where (x=> x.Occurences >= filter.MinOccurences);

if (filter.MaxOccurences.HasValue)
 summary = summary.Where (x=> x.Occurences <= filter.MaxOccurences); 
```

# javascript - 所有渲染意图的 OpenLayers 覆盖点半径

> ID：14061723
> 
> 赞同：1
> 
> 时间：2012-12-27T21:45:48.297
> 
> 标签：javascript, openlayers

在 OpenLayers 中，我试图覆盖所有点样式渲染意图（默认、选择和临时）的点半径。目前我这样做：

```
var styleMap = new OpenLayers.StyleMap({
  "default": OpenLayers.Util.applyDefaults({pointRadius: radius},OpenLayers.Feature.Vector.style['default']),
  "select": OpenLayers.Util.applyDefaults({pointRadius: radius},OpenLayers.Feature.Vector.style['select']),
  "temporary": OpenLayers.Util.applyDefaults({pointRadius: radius},OpenLayers.Feature.Vector.style['temporary'])
}); 
```

似乎应该有一种方法可以说在所有这些中覆盖点半径，但我不知道该怎么做。我希望默认情况下点半径是从默认继承到选择和临时的，但是如果我在默认情况下覆盖它（而不覆盖选择和临时中的任何内容），它们会使用原始的默认点大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:57:45.960

之后尝试调用`vectorLayer.redraw();`。

# python - 如何使用正则表达式在 python 字符串中找到 str.format 的所有占位符？

> ID：14061724
> 
> 赞同：11
> 
> 时间：2012-12-27T21:45:52.980
> 
> 标签：python, regex

我正在创建一个使用用户指定格式重命名文件的类。这种格式将是一个简单的字符串，`str.format`将调用其方法来填充空白。

事实证明，我的过程需要提取大括号中包含的变量名。例如，一个字符串可能包含`{user}`，它应该产生`user`。当然，一个字符串中会有几组大括号，我需要按照它们出现的顺序获取每组的内容，并将它们输出到一个列表中。

因此，`"{foo}{bar}"`应该屈服`['foo', 'bar']`。

我怀疑最简单的方法是使用`re.split`，但我对正则表达式一无所知。有人可以帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-27T21:58:30.580

另一种可能性是使用 Python 的实际[Formatter](http://docs.python.org/2/library/string.html#string.Formatter.parse)本身为您提取字段名称：

```
>>> import string
>>> s = "{foo} spam eggs {bar}"
>>> string.Formatter().parse(s)
<formatteriterator object at 0x101d17b98>
>>> list(string.Formatter().parse(s))
[('', 'foo', '', None), (' spam eggs ', 'bar', '', None)]
>>> field_names = [name for text, name, spec, conv in string.Formatter().parse(s)]
>>> field_names
['foo', 'bar'] 
```

或（较短但信息较少）：

```
>>> field_names = [v[1] for v in string.Formatter().parse(s)]
>>> field_names
['foo', 'bar'] 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-27T21:48:25.170

使用`re.findall()`：

```
In [5]: import re

In [8]: strs = "{foo} spam eggs {bar}"

In [9]: re.findall(r"{(\w+)}", strs)
Out[9]: ['foo', 'bar'] 
```

# c# - 使用 C# 将自定义 li 添加到 ul

> ID：14061727
> 
> 赞同：1
> 
> 时间：2012-12-27T21:46:11.150
> 
> 标签：c#, asp.net, listview, html-lists, htmlgenericcontrol

我正在尝试从 C# 后端构建无序列表。这是我试图实现的结构：

```
 <li><a href="url.com"><img src="../images/most/most05.jpg" alt="" /><br />LinkName</a></li> 
```

使用此代码：

```
foreach (Product prod in productList)
                {
                    HtmlGenericControl li = new HtmlGenericControl("li");
                    products.Controls.Add(li);
                    string productURL = SEOHelper.GetProductUrl(prod);
                    HtmlGenericControl anchor = new HtmlGenericControl("a");
                anchor.Attributes.Add("href", productURL);
                    HtmlGenericControl image = new HtmlGenericControl("img");

                    var productPicture = prod.DefaultProductPicture;
                    if (productPicture != null)
                    {

                        image.Attributes.Add("src", PictureManager.GetPictureUrl(productPicture.Picture, 110, true));
                    }
                    else
                    {

                        image.Attributes.Add("src", PictureManager.GetPictureUrl(productPicture.Picture, 110, true));
                    }

                  anchor.InnerText = prod.Name;                    
                    li.Controls.Add(image);
                    li.Controls.Add(anchor);
                } 
```

我得到这个结构：

```
 <li><img src="http://localhost:22621/images/thumbs/0000724_110.jpg"></img><a href="url.com">LinkName</a></li> 
```

如何调整代码以达到我想要的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:55:15.333

您需要将其添加到锚点，而不是将图像添加到 LI。

此外，让 HtmlGenericControl 发出自结束标记的唯一方法是覆盖它的实现并修复它。

总而言之，我想说要么按照你想要的方式生成文本并发出它，要么查看这些项目的常规 .net 控件。

# git - 同步 git 中的 README 或分支之间的文件

> ID：14061728
> 
> 赞同：-2
> 
> 时间：2012-12-27T21:46:12.047
> 
> 标签：git, synchronization, branch

我想在所有分支中同步我的 README 文件。

*   有没有没有子模块的方法？
*   我可以用于同步 git hooks (.git/hooks) 的目的吗？

你遇到过同样的问题吗？
你是怎么解决的？

感谢您的帮助和加入

更新：让我举个例子。我有我的 company1 分支，现在我创建了一个 company2 分支，如果我在分支 C2 中更新自述文件，那么自述文件也应该在分支 C1 中更新。没有合并:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:52:20.613

听起来您可能还没有将文件添加到 git，并且您缺少一些 Git 工作原理的基础知识。如果你这样做会发生什么`git status`？自述文件是否显示在“未跟踪的文件”下

# python - 现在转换 API 已经停止，有没有办法将 PDF 文件转换为 appengine / python 中的图像？

> ID：14061732
> 
> 赞同：6
> 
> 时间：2012-12-27T21:47:06.423
> 
> 标签：python, google-app-engine

现在[Google Conversion API](https://developers.google.com/appengine/docs/python/conversion/overview)已经停止使用，有没有办法将 PDF 文件转换为**GAE**中的图像，特别是 python？

似乎有人[已经向 Google 提出了此请求](http://code.google.com/p/googleappengine/issues/detail?id=8139)，但尚未采取任何行动。

几年前[的共识](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/UMVZdNevNhg)是这是不可能的。有什么新东西可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:02:32.773

如果您阅读链接到的问题报告，那里有两个建议：

1.  使用[ImageMagick](http://www.imagemagick.org/script/api.php#python)在本地进行。
2.  使用评论中描述的“[运行](https://github.com/lookfirst/convert/)良好”、“超级容易部署”和“免费提供”的服务，并且足够好以至于“可以关闭此问题”。

如果您在不提供的纯托管环境中运行，第一个显然是不可能的`ImageMagick`，但第二个没有这样的问题。当然也不是“官方谷歌”解决方案，但是……那又怎样？

如果有什么具体的事情你不能做，你必须告诉我们什么。

# delphi - 您如何解决“无法为 TClassName 加载单元 UnitName 符号信息。您想尝试自己查找此文件吗？”

> ID：14061734
> 
> 赞同：3
> 
> 时间：2012-12-27T21:47:17.447
> 
> 标签：delphi, activex

在 delphi 中，创建 ActiveX 控件曾经比现在更流行。但是仍然可以使用 Delphi 创建 ActiveX 控件。这个问题假设 Delphi 2007，但无论您使用什么 Delphi 版本，它都应该是相同的。

在创建 ActiveX 控件时，Delphi 中会出现一些奇怪的错误。在我的情况下，我现在不能再导入我试图导入和包装的某个类，Delphi 不会再告诉我为什么，只是它无法加载单元“符号信息”。

在这种情况下，我包装了一个开源控件，我最初几次包装它的尝试工作正常，但我发现一旦发现以 ActiveX 包装器丢失的方式编写的属性，我必须重新导入。重新生成 ActiveX 包装器比手动修复它更容易。直到你像这样被冷落：

```
 Error

 Could not load unit [unit] symbol information for [TClassName]. 
 Do you want to try to find this file yourself? 
```

如果我单击是，我会看到一个浏览（文件打开）对话框，并且它的文件过滤器设置为“DCU”。这意味着，它要我找到这个单元的 DCU 文件。如果我浏览它，或者我不浏览它，结果都是一样的。再多的重新编译都不会清除此错误情况。

有谁知道这个错误的真正含义，更好的是，如何解决它？谷歌搜索这个特定的错误消息显示它出现在英语以外的论坛中，但它是如此模糊，没有人记录它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:30:28.047

Delphi 中的库路径存在问题，要使 ActiveX 控件向导正常工作，解析器解析相关单元所需的所有源都必须在库路径中。由于 ActiveX 控件向导在您的项目之外起作用，因此您的项目搜索路径不包含在用于解析要包装并转换为 ActiveX 控件的 VCL 控件源的文件夹列表中。

解决方案：

修复库路径。

# c++ - c++ boost序列化类互相引用

> ID：14061737
> 
> 赞同：4
> 
> 时间：2012-12-27T21:47:40.490
> 
> 标签：c++, boost-serialization

我是 C++ boost 的新手，所以这个问题可能是基本的：如何序列化两个用指针相互引用的类。例如：

```
class A;
class B;

class A {
  public:
  ...
  private:
    double a;
    vector <B*> b;
}

class B {
  public:
  ...
  private:
    int b;
    list <A*> a;
} 
```

A 类有一个包含指针 B* 的私有向量，而 B 类有一个包含 A* 的私有列表。

特别是通过反序列化会有问题（指针！）。有没有人有想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T23:53:20.517

Boost.Serialization 将很好地处理指针的循环引用，这要归功于[对象跟踪](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/traits.html#tracking)。如果通过指针序列化对象，则默认使用对象跟踪。它还带有一个用于`std::vector`（包括`boost/serialization/vector.hpp`）的序列化程序。

Boost.Serialzation 将跟踪您序列化的对象的地址。如果它遇到一个已经序列化的地址，它将存储一个对对象的“引用”，而不是再次序列化它。

反序列化时，它将在遇到这些引用时将它们解析为正确的地址（这意味着它们必须是指针，以便可以将地址分配给它们）。

唯一的限制是，必须动态分配引用的对象（在堆上）。你可以序列化堆栈上的一个对象，只要它没有被另一个对象引用。

```
A a;
B b;
a.vec.push_back( &b ); // WRONG! deserialization will crash
// if a does not reference to b, it will work
archive << a << b; 
```

这样做的原因是：在序列化*a*（在其向量中）时，首先遇到*b*作为指针。当序列化*b*本身时，只存储对*b*的引用。

 ***```
A a;
B b;
archive >> a >> b; // crashes when deserializing b! 
```

反序列化*a*时，*b*将分配在向量中。现在您要恢复堆栈中已经存在的*b 。*由于您无法为堆栈上的变量分配新地址，因此它将崩溃！

正确的：

```
A* a = new A();
B* b = new B();
a.vec.push_back(b); // OK! this works fine 
```

当反序列化*b*时，boost 将简单地将*b*在 a 的向量中*的*地址分配给它。

Boost.Serialzation 还附带了一个用于`boost::shared_ptr`(include `boost/serialization/shared_ptr.hpp`) 的序列化程序，使用它可以使您的任务更加轻松，`std::vector< boost::shared_ptr<A> >`因此您不必担心释放内存。

有了基础知识，您可以像这样简单地实现类的序列化：

```
// add this to your classes you want to serialize
private:
    friend boost::serialization::access;
    template<class Archive>
    void serialize(Archive& ar, unsigned version) {
        //TODO: serialize other member variables
        ar & BOOST_SERIALIZATION_NVP(vec); // vec is a std::vector
    } 
```

如果您选择使用 shared_ptrs 的向量（仅包括标题），则无需进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:09:07.813

基本思想是避免 yclic 引用，因为您的序列化会造成无限循环。

根据本[教程](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)，A 和 B 的实例相互之间的非循环引用应该没有任何问题。***

# objective-c - 在 PLUICameraViewController 上的 UIButtonLabel 上设置文本

> ID：14061742
> 
> 赞同：3
> 
> 时间：2012-12-27T21:48:12.500
> 
> 标签：objective-c, ios, uilabel, iphone-privateapi

我正在尝试在`PLUICameraViewController`. 我以编程方式浏览了视图层次结构并找到了一些`UIButtonLabel`对象。记录这些文本显示了我的期望：“重拍”、“取消”等。但是设置文本不起作用。按钮只保留其原始文本。这是我尝试过的：

```
if (q is a subclass of UIButtonLabel)
    if ([q respondsToSelector:@selector(setText:)])
        [q performSelector:@selector(setText:) withObject:@"zzz"]; 
```

代码运行时不会崩溃。也 respondsToSelector 返回 YES。**如何使按钮上的文本更新？**

顺便说一句，我知道涉及自定义按钮、我自己的视图等的其他方法。从 Objective-C/运行时/iOS 的角度来看，我真的很好奇为什么上面的代码不起作用。

另请注意，我正在这样做

```
 navigationController:willShowViewController:viewController:animated: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T01:34:58.010

在这种情况下，我认为这不是私有 API*本身*的问题。这就是工作方式`UIButton`。

是的，按钮的标题是 a `UILabel`，实际上，它可能/当前是私有类[UIButtonLabel](https://github.com/nst/iOS-Runtime-Headers/blob/master/Frameworks/UIKit.framework/UIButtonLabel.h)的一个实例。但是，Apple 打算让您更改标题文本的方式是使用这些方法`UIButton`本身：

```
[self.button setTitle: @"newTitle" forState: UIControlStateNormal];
[self.button setTitle: @"newTitle" forState: UIControlStateSelected]; 
```

而不是试图深入到按钮的子视图层次结构中，而是找到一个按钮标签，然后调用`setText:`.

[这是相关的API文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setTitle%3aforState%3a)

至于*为什么*它不起作用，我想那是因为苹果想要那样做。

一方面，更改按钮的标题应该是一个正常的用例。因此，为了方便起见，他们可能希望直接在`UIButton`界面中为您提供一种简单的调用方法。如果他们强迫你深入到视图层次结构中，你不仅需要编写更多代码，而且会让 Apple 更难更改按钮的底层实现。`UIButton`他们可能希望保留以后更改它的能力，为此，他们最好在该级别 保留某种包装器 API 。

此外，如果您直接更改按钮标签上的文本，则您正在规避他们的设计，其中标签文本取决于按钮**状态**（例如正常、突出显示、选中等），尽管大多数人可能使用相同的按钮文本在所有状态下，该设计都允许依赖于状态的文本，因此，隐藏底层`UIButtonLabel`有助于实施这种设计。

这是我对他们动机的猜测。

因此，为了强制执行这一点，在他们的实现中`UIButtonLabel` `setText:`，他们完全有可能在按钮初始化后拒绝更新文本。之后，您必须使用该`setTitle:forState:`方法。

# c# - 不能将 Focus() 放到表单上吗？

> ID：14061746
> 
> 赞同：2
> 
> 时间：2012-12-27T21:48:29.140
> 
> 标签：c#, winforms, .net-4.0, windows-8, focus

我试过：

```
Form myForm = new EULA();
myForm.Show();
this.WindowState = FormWindowState.Minimized;
myForm.BringToFront();
myForm.Activate();
myForm.Focus(); 
```

这段代码把它带到了前面，但由于某种原因，我仍然需要点击表单才能获得焦点，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:54:49.803

表单可能已经聚焦，也许您希望选择其中的控件（如文本框或组合）？

我将在表单的加载方法中使用此代码：

```
private void Form_Load(object sender, System.EventArgs e) 
{ 
  controlName.Select();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T06:09:21.453

嗨，leaf68 只需遵循我的代码即可。试着弄清楚:)

假设我们有`MainForm`并且`LoginForm`

在我们的项目中，我们有一个`Static Class`名为`Program`->*应用程序的主入口点。*作为`run`我们项目的默认类。

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Application.Run(new LoginForm());

        if (LoginForm._loginSuccess)
        {
            var m = new MainForm();
            Application.Run(m);
        }
        else
            Application.Exit();
    }

    public static bool UserLogin() //Add some parameter
    {
        //You Logic here
        LoginForm._loginSuccess = true;
        return LoginForm._loginSuccess;
    }
} 
```

那么这是我们的`LoginForm`代码

```
 public partial class LoginForm : Form
    {
        public LoginForm()
        {
            InitializeComponent();
        }

        public static bool _loginSuccess { get; set; }
        public event EventHandler Login;

        private void loginButton_Click(object sender, EventArgs e)
        {
            if (Program.UserLogin())
            {
                Close();
                Dispose();

                if (Application.OpenForms.Count > 0)
                    if (Application.OpenForms["MainForm"].Name == "MainForm")
                    {
                        Application.OpenForms["MainForm"].WindowState = FormWindowState.Normal;
                        Application.OpenForms["MainForm"].Enabled = true;
                    }
                if (Login != null)
                    Login(this, EventArgs.Empty);
            }
        }
    } 
```

然后假设我们成功`Login`了`MainForm`，这就是我们的`MainForm`代码

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    private void logOutButton_Click(object sender, EventArgs e)
    {
        //Hide();
        Enabled = false;
        WindowState = FormWindowState.Minimized;
        var f = new LoginForm();
        f.Login += loginShow;
        f.Show();
        f.Activate();
    }

    private void loginShow(object sender, EventArgs args)
    {
        Show();
    }
} 
```

我希望它可以帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T22:22:28.230

我有一个不可见的表格，所以只有托盘图标。

我只是使用：

```
this.ShowInTaskbar = true;
this.WindowState = FormWindowState.Normal;
this.Activate(); 
```

按照上面的顺序。程序来到前面并被激活，这意味着打字实际上是在活动字段中写入的。

这有效：

*   当程序自动出现时
*   当用户选择托盘菜单项时。

# android - Android SQLite 错误

> ID：14061750
> 
> 赞同：0
> 
> 时间：2012-12-27T21:49:13.050
> 
> 标签：android, sqlite

我一直在与 AndEngine 合作并开发游戏。我现在已经开始尝试实现锁定级别等的分数。我一直试图让这个 sqlite 数据库运行几个小时，但实际上无济于事。如果我尝试从 1 级到 3 级，它会引发错误，但仍然可以正常工作，但是当我实施第四级或第五级时，我无法访问这些条目并强制关闭。我得到的确切错误是光标超出范围异常，并且从未明确调用过 close()。任何帮助表示赞赏。

这是我的数据库类

```
package com.example.test;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

 public class myDatabase extends SQLiteOpenHelper {

    static final String dbName = "myDB";
    static final String tLevels = "Levels";
    static final String fLevelID = "levelNum";
    static final String fLevelUnLocked = "levelLocked";
    static final String fLevelBeat = "levelBeat";
    static final String fLevelScore = "levelScore";

    public myDatabase(Context context) {

            super(context, dbName, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

            db.execSQL("CREATE TABLE IF NOT EXISTS "+tLevels+" (" +
                                    fLevelID + " INTEGER PRIMARY KEY , " +
                                    fLevelUnLocked + " TEXT, " +
                                    fLevelBeat + " TEXT, " +
                                    fLevelScore + " TEXT" +
                                    ")");

             ContentValues cv = new ContentValues();
                    cv.put(fLevelID, 1);
                    cv.put(fLevelUnLocked, "true");
                    cv.put(fLevelBeat, "false");
                    cv.put(fLevelScore, "0");
                            db.insert(tLevels, null, cv);
                    cv.put(fLevelID, 2);
                    cv.put(fLevelUnLocked, "false");
                    cv.put(fLevelBeat, "false");
                    cv.put(fLevelScore, "0");
                            db.insert(tLevels, null, cv);
                    cv.put(fLevelID, 3);
                    cv.put(fLevelUnLocked, "false");
                    cv.put(fLevelBeat, "false");
                    cv.put(fLevelScore, "0");
                            db.insert(tLevels, null, cv);
                    cv.put(fLevelID, 4);
                    cv.put(fLevelUnLocked, "false");
                    cv.put(fLevelBeat, "false");
                    cv.put(fLevelScore, "0");
                            db.insert(tLevels, null, cv);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

            db.execSQL("DROP TABLE IF EXISTS "+tLevels);
            onCreate(db);
    }

     public String isLevelUnLocked(int ID) {                 
             SQLiteDatabase myDB = this.getReadableDatabase();
             String[] mySearch = new String[]{String.valueOf(ID)};
             Cursor myCursor = myDB.rawQuery("SELECT "+ fLevelUnLocked +" FROM "+               tLevels +" WHERE "+ fLevelID +"=?",mySearch);
             myCursor.moveToFirst();
             int index = myCursor.getColumnIndex(fLevelUnLocked);
             String myAnswer = myCursor.getString(index);
             myCursor.close();
             myDB.close();
             return myAnswer;
     }

     public String isBeat(int ID) {

                         SQLiteDatabase myDB = this.getReadableDatabase();
                         String[] mySearch = new String[]{String.valueOf(ID)};
                         Cursor myCursor = myDB.rawQuery("SELECT "+ fLevelBeat +" FROM "+ tLevels +" WHERE "+ fLevelID +"=?",mySearch);
                         myCursor.moveToFirst();
                         int index = myCursor.getColumnIndex(fLevelBeat);
                         String myAnswer = myCursor.getString(index);
                         myCursor.close();
                         return myAnswer;
                 }

     public int unLockLevel(int ID, String isUnLocked)
     {
            SQLiteDatabase myDB = this.getWritableDatabase();
             ContentValues cv = new ContentValues();
             cv.put(fLevelUnLocked, isUnLocked);
             int numRowsAffected = myDB.update(tLevels, cv, fLevelID+"=?", new String            []{String.valueOf(ID)});
             return numRowsAffected;
     }

  } 
```

这是我称之为的主要活动

```
myDatabase myDB = new myDatabase(this);

         final String checkUnLocked = myDB.isLevelUnLocked(4);

         System.out.println(checkUnLocked);
         if(checkUnLocked.compareTo("true") == 0){
         System.out.println("level one is unlocked!");
         }else{
         System.out.println("level one is not unlocked!");
         }
         myDB.close(); 
```

这是日志猫

```
12-27 13:40:14.896: E/AndEngine(4819): [Debug.java:372:e()]         World1Activity.onCreateScene failed. @(Thread: 'GLThread 13')
12-27 13:40:14.896: E/AndEngine(4819): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
12-27 13:40:14.896: E/AndEngine(4819):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
12-27 13:40:14.896: E/AndEngine(4819):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
12-27 13:40:14.896: E/AndEngine(4819):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
12-27 13:40:14.896: E/AndEngine(4819):  at com.example.test.myDatabase.isLevelUnLocked(myDatabase.java:97)
12-27 13:40:14.896: E/AndEngine(4819):  at com.example.test.World1Activity.onCreateScene(World1Activity.java:159)
12-27 13:40:14.896: E/AndEngine(4819):  at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateScene(SimpleBaseGameActivity.java:48)
12-27 13:40:14.896: E/AndEngine(4819):  at org.andengine.ui.activity.BaseGameActivity$3.onCreateResourcesFinished(BaseGameActivity.java:169)
12-27 13:40:14.896: E/AndEngine(4819):  at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateResources(SimpleBaseGameActivity.java:43)
12-27 13:40:14.896: E/AndEngine(4819):  at org.andengine.ui.activity.BaseGameActivity.onCreateGame(BaseGameActivity.java:181)
12-27 13:40:14.896: E/AndEngine(4819):  at org.andengine.ui.activity.BaseGameActivity.onSurfaceCreated(BaseGameActivity.java:110)
12-27 13:40:14.896: E/AndEngine(4819):  at org.andengine.opengl.view.EngineRenderer.onSurfaceCreated(EngineRenderer.java:80)
12-27 13:40:14.896: E/AndEngine(4819):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1348)
12-27 13:40:14.896: E/AndEngine(4819):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118)
12-27 13:40:14.896: D/AndEngine(4819): [Debug.java:218:d()] World1Activity.onSurfaceChanged(Width=800,  Height=480) @(Thread: 'GLThread 13')
12-27 13:40:15.076: E/Database(4819): [SQLiteDatabase.java:1825:finalize()] close() was never explicitly called on database '/data/data/com.example.test/databases/myDB' 
12-27 13:40:15.076: E/Database(4819): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
12-27 13:40:15.076: E/Database(4819):   at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1847)
12-27 13:40:15.076: E/Database(4819):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
12-27 13:40:15.076: E/Database(4819):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
12-27 13:40:15.076: E/Database(4819):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
12-27 13:40:15.076: E/Database(4819):   at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:579)
12-27 13:40:15.076: E/Database(4819):   at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
12-27 13:40:15.076: E/Database(4819):   at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
12-27 13:40:15.076: E/Database(4819):   at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:187)
12-27 13:40:15.076: E/Database(4819):   at com.example.test.myDatabase.isLevelUnLocked(myDatabase.java:92)
12-27 13:40:15.076: E/Database(4819):   at com.example.test.World1Activity.onCreateScene(World1Activity.java:159)
12-27 13:40:15.076: E/Database(4819):   at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateScene(SimpleBaseGameActivity.java:48)
12-27 13:40:15.076: E/Database(4819):   at org.andengine.ui.activity.BaseGameActivity$3.onCreateResourcesFinished(BaseGameActivity.java:169)
12-27 13:40:15.076: E/Database(4819):   at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateResources(SimpleBaseGameActivity.java:43)
12-27 13:40:15.076: E/Database(4819):   at org.andengine.ui.activity.BaseGameActivity.onCreateGame(BaseGameActivity.java:181)
12-27 13:40:15.076: E/Database(4819):   at org.andengine.ui.activity.BaseGameActivity.onSurfaceCreated(BaseGameActivity.java:110)
12-27 13:40:15.076: E/Database(4819):   at org.andengine.opengl.view.EngineRenderer.onSurfaceCreated(EngineRenderer.java:80)
12-27 13:40:15.076: E/Database(4819):   at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1348)
12-27 13:40:15.076: E/Database(4819):   at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:55:30.057

尝试将 isLevelUnlocked(int ID) 中的光标更改为以下内容

> 光标 myCursor = myDb.query(tLevels, new String [] {fLevelID, fLevelUnlocked, fLevelBeat, fLevelScore }, fLevelID + "=" String.valueOf(ID), null, null, null, null);

看看有没有效果？

# javascript - JSON模型纹理未加载

> ID：14061751
> 
> 赞同：1
> 
> 时间：2012-12-27T21:49:13.070
> 
> 标签：javascript, webgl, three.js

我已经使用 python 工具将 obj 文件转换为 json 模型，我正在尝试加载它这里是代码

```
var camera, scene, renderer;
var mesh, aircraft;

function addModelToScene( geometry, materials )
{
    aircraft = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materials ) );
    scene.add( aircraft );
}

function init()
{
    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 20000 );
    camera.position.z = 30;
    scene = new THREE.Scene();

var jsonLoader = new THREE.JSONLoader( true );
jsonLoader.load( "XA-20.js", addModelToScene );
renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );
}

function animate()
{
    requestAnimationFrame( animate );
    aircraft.rotation.y += 0.02;
    renderer.render( scene, camera );
} 
```

模型正在加载，但上面没有纹理模型文件很大，所以我不能在这里发布，但有材料

```
"materials": [  {
"DbgColor" : 15658734,
"DbgIndex" : 0,
"DbgName" : "plane",
"colorAmbient" : [0.117647, 0.117647, 0.117647],
"colorDiffuse" : [1.0, 1.0, 1.0],
"colorSpecular" : [0.75294099999999997, 0.75294099999999997, 0.75294099999999997],
"illumination" : 2,
"mapBump" : "XA-20_Razorback_Strike_Fighter_N.png",
"mapDiffuse" : "XA-20_Razorback_Strike_Fighter_P01.png",
"specularCoef" : 8.0
},

{
"DbgColor" : 15597568,
"DbgIndex" : 1,
"DbgName" : "glass",
"colorAmbient" : [0.117647, 0.117647, 0.117647],
"colorDiffuse" : [1.0, 1.0, 1.0],
"colorSpecular" : [0.75294099999999997, 0.75294099999999997, 0.75294099999999997],
"illumination" : 2,
"mapDiffuse" : "Glass_Cockpit.png",
"specularCoef" : 8.0
},....... 
```

还有紫外线

```
"uvs": [[0.72626,-0.65659,0.72655,-0.62558,0.72427,-0.6262,0.72391,-0.66141,0.73223,-0.62103,0.73212,....... 
```

我可以在哪里寻找解决方案的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:24:42.457

jsonLoader.load 有第三个参数来设置纹理路径。将此 texturePath 设置为具有纹理的文件夹，它应该可以工作。

[https://github.com/mrdoob/three.js/blob/master/src/loaders/JSONLoader.js#L16](https://github.com/mrdoob/three.js/blob/master/src/loaders/JSONLoader.js#L16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T11:24:09.230

就我而言，问题是我没有正确添加照明，因此模型没有足够的光来显示为彩色它确实加载了纹理但在视觉上它是不可见的，因为照明

因此，如果遇到类似问题，请先检查您的照明

# c++ - 共享库未在函数中链接

> ID：14061753
> 
> 赞同：1
> 
> 时间：2012-12-27T21:49:27.393
> 
> 标签：c++, linux, gcc, linker, g++

我正在 Linux 上构建一个共享库 (.so)，并且我正在编译和链接一个在某些函数中没有动态链接的对象。这些函数是“extern 'C'”函数。它们出现在共享对象的普通符号表中，但不在外部函数列表或动态函数列表中。我正在使用 g++ 进行编译和链接。我已经关闭了编译器优化。是否需要设置特殊标志才能使功能出现？

编辑：我用来将目标文件链接在一起的命令是这样的：

```
g++ -m64 -rpath,/usr/local/Trolltech/Qt-4.8.2/lib -shared -Wl,-soname,libQtCommercialChart.so.1 -o libQtCommercialChart.so.1.0.0 ../build/release/lib/chartdataset.o ../build/release/lib/chartpresenter.o ../build/release/lib/charttheme.o ../build/release/lib/domain.o ../build/release/lib/qchart.o ../build/release/lib/qchartview.o ../build/release/lib/qabstractseries.o ../build/release/lib/chartbackground.o ../build/release/lib/chartelement.o ../build/release/lib/scroller.o ../build/release/lib/chartlayout.o ../build/release/lib/versiontracker.o ../build/release/lib/axisanimation.o ../build/release/lib/xyanimation.o ../build/release/lib/pieanimation.o ../build/release/lib/piesliceanimation.o ../build/release/lib/splineanimation.o ../build/release/lib/baranimation.o ../build/release/lib/stackedbaranimation.o ../build/release/lib/percentbaranimation.o ../build/release/lib/abstractbaranimation.o ../build/release/lib/horizontalbaranimation.o ../build/release/lib/horizontalstackedbaranimation.o ../build/release/lib/horizontalpercentbaranimation.o ../build/release/lib/areachartitem.o ../build/release/lib/qareaseries.o ../build/release/lib/chartaxis.o ../build/release/lib/qabstractaxis.o ../build/release/lib/chartvalueaxisx.o ../build/release/lib/chartvalueaxisy.o ../build/release/lib/qvalueaxis.o ../build/release/lib/chartbarcategoryaxisx.o ../build/release/lib/chartbarcategoryaxisy.o ../build/release/lib/qbarcategoryaxis.o ../build/release/lib/chartcategoryaxisx.o ../build/release/lib/chartcategoryaxisy.o ../build/release/lib/qcategoryaxis.o ../build/release/lib/chartdatetimeaxisx.o ../build/release/lib/chartdatetimeaxisy.o ../build/release/lib/qdatetimeaxis.o ../build/release/lib/bar.o ../build/release/lib/abstractbarchartitem.o ../build/release/lib/qabstractbarseries.o ../build/release/lib/qbarset.o ../build/release/lib/qbarmodelmapper.o ../build/release/lib/qvbarmodelmapper.o ../build/release/lib/qhbarmodelmapper.o ../build/release/lib/qbarseries.o ../build/release/lib/barchartitem.o ../build/release/lib/qstackedbarseries.o ../build/release/lib/stackedbarchartitem.o ../build/release/lib/qpercentbarseries.o ../build/release/lib/percentbarchartitem.o ../build/release/lib/qhorizontalbarseries.o ../build/release/lib/horizontalbarchartitem.o ../build/release/lib/qhorizontalstackedbarseries.o ../build/release/lib/horizontalstackedbarchartitem.o ../build/release/lib/qhorizontalpercentbarseries.o ../build/release/lib/horizontalpercentbarchartitem.o ../build/release/lib/qlegend.o ../build/release/lib/legendmarker.o ../build/release/lib/legendlayout.o ../build/release/lib/linechartitem.o ../build/release/lib/qlineseries.o ../build/release/lib/qpieseries.o ../build/release/lib/piesliceitem.o ../build/release/lib/piechartitem.o ../build/release/lib/qpieslice.o ../build/release/lib/qpiemodelmapper.o ../build/release/lib/qvpiemodelmapper.o ../build/release/lib/qhpiemodelmapper.o ../build/release/lib/qscatterseries.o ../build/release/lib/scatterchartitem.o ../build/release/lib/qsplineseries.o ../build/release/lib/splinechartitem.o ../build/release/lib/xychart.o ../build/release/lib/qxyseries.o ../build/release/lib/qxymodelmapper.o ../build/release/lib/qvxymodelmapper.o ../build/release/lib/qhxymodelmapper.o   -L/usr/local/Trolltech/Qt-4.8.2/lib -L/tmp/qcharts/lib/release -Wl,-rpath,/tmp/qcharts/lib/release -lQtGui -L/usr/local/Trolltech/Qt-4.8.2/lib -L/usr/X11R6/lib64 -lQtCore -lpthread 
```

用于构建缺少功能的对象的命令是这样的：

```
g++ -c -m64 -pipe -fvisibility=hidden -fvisibility-inlines-hidden -O0 -Wall -W -D_REENTRANT -fPIC -DQTCOMMERCIALCHART_LIBRARY -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Trolltech/Qt-4.8.2/mkspecs/linux-g++-64 -I. -I/usr/local/Trolltech/Qt-4.8.2/include/QtCore -I/usr/local/Trolltech/Qt-4.8.2/include/QtGui -I/usr/local/Trolltech/Qt-4.8.2/include -I../include -I../include -I. -Ianimations -Iareachart -Iaxis -Iaxis/valueaxis -Iaxis/barcategoryaxis -Iaxis/categoryaxis -Iaxis/datetimeaxis -Ibarchart -Ibarchart/vertical/bar -Ibarchart/vertical/stacked -Ibarchart/vertical/percent -Ibarchart/horizontal/bar -Ibarchart/horizontal/stacked -Ibarchart/horizontal/percent -Ilegend -Ilinechart -Ipiechart -Iscatterchart -Isplinechart -Ithemes -Ixychart -I../build/release/lib -o ../build/release/lib/versiontracker.o versiontracker.cpp 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T23:07:08.097

从[`man gcc`](http://linux.die.net/man/1/gcc)

> **-fvisibility** =default|internal|hidden|protected
> ...
> **extern**声明不受**-fvisibility影响，因此可以使用****-fvisibility=hidden**重新编译许多代码而无需修改。但是，这意味着对没有显式可见性的**extern**函数的调用将使用 PLT ，因此使用**__attribute ((visibility))**和/或**#pragma GCC visibility**告诉编译器哪些**extern**声明应被视为隐藏更有效.

我自己没有使用过这个，但是从[GCC Wiki - Visibility](http://gcc.gnu.org/wiki/Visibility)和一个小例子，我会说添加

```
__attribute__ ((visibility ("default"))) 
```

到您的`extern "C"`函数，应该使它们在动态函数列表中可见，例如`nm -D libQtCommercialChart.so.1.0.0`.

如果你定义了很多函数，用

```
extern "C" {
#pragma GCC visibility push(default)
...
#pragma GCC visibility pop
}; 
```

可能更方便。

如果您不关心符号可见性，那么`-fvisibility=hidden`从命令行中删除当然也可以。

# c# - 如果删除了winform元素的函数调用，如何修复它？

> ID：14061754
> 
> 赞同：3
> 
> 时间：2012-12-27T21:49:28.400
> 
> 标签：c#

我正在.Net C# 中构建应用程序。我不小心双击了我的应用程序中的文本框，并且正在创建一个 textbox_click 函数，我删除了该函数，因为我不需要它但是当我运行我的应用程序时有一个：

```
Error   1   'Bond_Yield_Calculator.BaseForm' does not contain a definition for 'textBox5_TextChanged' and no extension method 'textBox5_TextChanged' accepting a first argument of type 'Bond_Yield_Calculator.BaseForm' could be found (are you missing a using directive or an assembly reference?)   C:\Users\Alex Chan\documents\visual studio 2010\Projects\Bond Yield Calculator\Bond Yield Calculator\BaseForm.Designer.cs   139 77  Bond Yield Calculator 
```

错误，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T21:52:52.823

双击错误，它将跳转到代码中的该位置。删除创建事件处理程序的代码行。

如果这是winforms，它看起来像

```
Bond_Yield_Calculator.BaseForm.TextBoxChanged += new EventHandler(textBox5_TextChanged); 
```

它可能在一个名为

> *xxxxx* .designer.cs（其中*xxxxxx*是项目中的窗体或控件的名称。）

或者，如果它是 ASP.NET，您会在标签内看到类似的东西

> OnTextChanged="textBox5_TextChanged"

删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:51:28.973

该方法应具有以下签名：

```
protected void textBox5_TextChanged(object sender, EventArgs e) {

} 
```

请参阅[MSDN 上的定义](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T22:55:19.037

删除后面代码中的事件处理程序并不会完全删除事件。您必须将其从设计器中删除。

`CTRL+W,P`在 Visual Studio ( )中打开属性窗口。
单击设计器中的文本框（仅一次！），然后单击属性窗口中的闪电按钮。找到列出的文本更改事件，并删除框中的文本。

# c++ - 链接器会将哪些类型的符号放入可执行的 ELF 中？

> ID：14061757
> 
> 赞同：1
> 
> 时间：2012-12-27T21:49:55.247
> 
> 标签：c++, c, linux, linker, elf

考虑以下命令：

```
g++ -Wl,--start-group main.o liba.a -Wl,--end-group -o a.out 
```

是否有可能在 a.out 中有一些在 liba.a 中定义但 main.o 没有使用的符号？如果是，在什么情况下？在编写源代码或调用编译器或链接器时是否有一些技巧来实现这一点？据我所知，这不应该发生，但我最近确实遇到了这样的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:57:20.713

我可以想到至少三种可能发生这种情况的情况：

1.  `-Wl,--whole-archive`可用于强制`liba.a`包含*整个*文件，而不仅仅是所需的目标文件。
2.  `liba.a`可能包含 C 运行时使用的符号，绕过`main.o`. 此类符号的最常见原因是具有构造函数的 C++ 全局或文件范围对象。
3.  默认情况下，链接器会在单个*目标文件*的规模上修剪未使用的代码；如果一个目标文件定义了一堆符号，只有其中一些被使用，那么无论如何它们都将出现。您可以通过编译所有内容*然后* 在链接时`liba.a`给`-ffunction-sections -fdata-sections`出来解决这个问题。`-Wl,--gc-sections`对于最近的 GCC（我不会尝试使用早于 4.7 的任何东西），编译*所有内容*然后`-flto`链接到`-fwhole-program`也可能会有所帮助。

# scala - 绕过 Scala 类型擦除（使用 Guava EventBus）

> ID：14061758
> 
> 赞同：1
> 
> 时间：2012-12-27T21:49:56.937
> 
> 标签：scala, event-handling, guava

我`EventBus`在我的 Scala 项目中使用 Guava。

我有一个像这样的参数化事件：

```
class MyEvent[T] 
```

还有一个简单的事件监听器：

```
class MyEventListener {

    @Subscribe
    def onStringEvent(event: MyEvent[String]) {
        println("String event caught")
    }

    @Subscribe
    def onIntEvent(event: MyEvent[Int]) {
        println("Int event caught")
    }

} 
```

我可以创建 my `com.google.common.eventbus.EventBus`、 register`MyEventListener`和触发事件：

```
val eventBus = new EventBus
eventBus.register(new MyEventListener)
eventBus.post(new MyEvent[String]) 
```

但是，正如您可能已经猜到的那样，两者都`onStringEvent`被`onIntEvent`调用。问题是 Java/Scala 的类型擦除会在运行时删除参数类型，并且两个订阅在 Guava 中都显示为`event: MyEvent`.

**好的，我的问题：**

由于擦除，以这种方式对不同类型的 Guava 事件使用相同的 Event 对象在 Java 中是不可能的，在 Scala 中也是不可能的。然而，Scala 被证明有许多很好的方法来规避 Java 的擦除问题。有没有人看到另一种方法来实现这一点，也许使用一些 Scala 魔法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T22:11:35.177

问题出在 Guava 中：它看不到类型参数，因此无法区分这两种方法。唯一可能的解决方案是为每种类型创建一个新类。

这真的很容易：

```
class MyEvent[T] protected () { /* Your methods here */ }
class MyEventInt extends MyEvent[Int] {}
class MyEventString extends MyEvent[String] {} 
```

然后每当您需要在代码中执行任何操作时，只需使用`MyEvent[Int]`. 但番石榴至少需要这么多样板文件。

请注意，我已将`MyEvent[T]`构造函数设置为受保护，因此您必须实例化其中一个退化的类。我不确定这是否适用于您的用例；我会假设是这样。你也可以解决这个问题（使用类型类），但它增加了更多样板。

# vector-graphics - 矢量形状差异和交叉点

> ID：14061759
> 
> 赞同：2
> 
> 时间：2012-12-27T21:50:29.817
> 
> 标签：vector-graphics

让我解释一下我的问题：

我有一个黑色矢量形状（假设它现在是一系列连接的直线，但如果我也可以支持二次曲线会很好）。

我还有一个预定义宽度和高度的矩形。我将把它放在黑色形状的顶部，然后将两者结合起来。

我的第一个问题是我不知道如何快速提取向量并集，但我认为有一个定义明确的公式我可以自己弄清楚。

我的第二个也是更棘手的问题是如何有效地检测矩形需要所处的位置（即矩阵需要什么平移和旋转），以便最大化黑色，在联合之后剩余（见下图）。

下面的红色轮廓形状是约 33% 的黑色；绿色大约是 85%；并且有这种形状和矩形的位置，其中任何一个都可以有 100% 的覆盖率。

![最佳矩形定位](../Images/9acd7e79c737b6fe493e0fa508a29d02.png)

显然，我可以通过对矩形的至少一部分接触黑色形状的每个点尝试每个平移和旋转值来强制执行此操作，然后跟踪具有最多黑色覆盖的那个。问题是，我只能尝试有限数量的位置（因此可能会错过最大值）。除此之外，感觉非常低效！

你能想出一种更有效的方法来解决这个问题吗？

我大学时代的一些事情告诉我，傅里叶变换可能会提高这里的效率，但我不知道如何用矢量形状做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:41:58.287

有望比蛮力搜索更快和/或更精确的三个想法：

1.  假设您有一个 3d 物理引擎。定义一个“圆锥形”表面，其中顶点位于 (0,0,-1)，z=0 平面上的黑色多边形边界，其质心位于原点，圆锥表面通过连接顶点形成通过多边形边界的半无限光线。想象一顶派对帽倒置并皱成黑色多边形的形状。现在将矩形约束为平行于 z=0 平面，并且最初在锥体上方如此之高（大 z 值），因此很容易找到它肯定在“内部”的地方。然后让矩形在重力作用下下落，绕 z 轴扭转并在 xy 方向平移，直到它接触到圆锥体，一直停留在里面，直到它稳定下来，不能再进一步移动。物理引擎的碰撞检测和力解析处理了复杂性。当它稳定下来时，它将在局部意义上处于黑色多边形最大覆盖的位置。（如果它以 z<0 稳定，则覆盖率为 100%。）对于凸面情况，它可能是全局最大值。为了概率性地改进非凸情况的结果（如您的示例），您将随机化起始位置，多次丢弃多边形，获得最佳结果。请注意，您实际上并不需要一个成熟的物理引擎（尽管 为了概率性地改进非凸情况的结果（如您的示例），您将随机化起始位置，多次丢弃多边形，获得最佳结果。请注意，您实际上并不需要一个成熟的物理引擎（尽管 为了概率性地改进非凸情况的结果（如您的示例），您将随机化起始位置，多次丢弃多边形，获得最佳结果。请注意，您实际上并不需要一个成熟的物理引擎（尽管[它们当然存在于开源中](http://www.ibm.com/developerworks/library/os-physicsengines/index.html)）。使用碰撞分辨率来告诉您如何以伪物理方式旋转和平移矩形就足够了，因为它会尽可能地沿着 z 轴均匀地扭曲和滑动。

2.  不同的物理模型。假设黑色区域是二维中的有吸引力的场发生器，遵循通常的平方反比规则，如重力和磁力。现在让矩形在响应该场的阻尼介质中漂移。它应该以与黑色区域重叠的最大区域来解决。像甜甜圈中心的“零点”存在问题，但我认为这些永远不可能是稳定的平衡。他们可以吗？通过将两种形状都建模为粒子群，可以轻松完成模拟。或者由于矩形是一个简单的形状并且您是物理学家，您可以为点和矩形之间的吸引力积分提出一个闭合形式。这样，只有黑色形状需要表示为粒子。想来想去，*准确*的答案。不幸的是[，这个讨论](https://physics.stackexchange.com/questions/23181/gravitational-attraction-of-triangles)意味着它不能通过分析来完成。所以粒子云可能是最终的解决方案。好消息是现代处理器，尤其是 GPU，以惊人的速度进行非常大的粒子计算。**编辑：**我实现了这个又快又脏。它适用于凸面形状，但凹面会产生不是您想要的稳定点。使用示例：![这是屏幕截图](../Images/6b87d802fbc7a56b40d16e5871aebc98.png)

3.  这个问题与[机器人路径规划有关](http://planning.cs.uiuc.edu/node261.html). 查看这些文献可能会产生一些想法。在 RPP 中，您有障碍物和机器人，并希望找到机器人可以在避开和/或沿着它们滑动的同时行进的路径。如果机器人是不对称的并且可以旋转，那么 2d 规划是在 3d（环形）配置空间（C 空间）中完成的，其中一维是旋转（因此自身闭合）。这个想法是在 C 空间中“增加”障碍物，同时将机器人缩小到一个点。通过计算 Minkowski 差异来增加障碍。）如果将所有多边形分解为凸形，则有一个简单的“边缘合并”算法来计算 MD。）当 C 空间表示完成时，任何 1d 路径都可以不刺破“长大” 障碍物对应于机器人在世界空间中避开原始障碍物的连续平移/旋转。对于您的问题*白色*区域是障碍物，矩形是机器人。您正在寻找任何开放点。这将对应于 100% 的覆盖率。对于低于 100% 的情况，C 空间必须是 3d 上的函数，它反映了机器人与障碍物的交点有多“糟糕”，而不仅仅是一个二进制值。你正在寻找最小的坏点。C 空间表示是一个开放的研究课题。八叉树可能在这里工作。

在这两种情况下都需要考虑很多细节，它们可能根本不会成功，但至少这些是可以更多地思考问题的框架。物理思路有点像用模拟弹簧系统做图形布局，已经很成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T01:14:09.330

我认为不可能找到这个问题的*精确*最大值，因此您需要使用近似值。

您可能会将矢量图像渲染为位图并为此使用 Haar 功能 - 它们提供了一种非常快速的 O(1) 方法来计算矩形区域的平均颜色。

对于不同的旋转和位置，您仍然需要多次执行此操作，但它会将算法复杂度从天真的 O(n^5) 降低到 O(n^3)，这可能是可以接受的快。（这里的 n 是您正在扫描的不同自由度的大小）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-28T01:25:34.373

你有没有想过用 if whitespace !== 0 来跟踪块内剩余的空白？

# cocos2d-iphone - 将身体附加到 Sprite

> ID：14061762
> 
> 赞同：0
> 
> 时间：2012-12-27T21:50:42.820
> 
> 标签：cocos2d-iphone, touch, box2d, sprite

我正在尝试使用 Cocos2d 2.0 和 box2d 测试/创建示例游戏。我在屏幕上有一堆精灵，当我按下精灵时，我想要一个身体自动附加到那个精灵。我尝试使用 TouchesEnd 方法，但它似乎不起作用。

有人可以将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:22:00.680

试试这个方法...

```
-(void)createB2Body
{
    b2PolygonShape shape;

    float xDist = (sprite.contentSize.width*0.5f)/PTM_RATIO ;
    float yDist = (sprite.contentSize.height*0.5f)/PTM_RATIO ;

    shape.SetAsBox(xDist, yDist);

    b2BodyDef bd;
    bd.type = b2_dynamicBody;
    bd.userData = sprite;
    bd.linearDamping = 0.5f;
    bd.angularDamping = 0.5f;

    bd.position.Set(self.position.x/PTM_RATIO, self.position.y/PTM_RATIO);

    b2FixtureDef fixDef;
    fixDef.shape = &shape;
    fixDef.density = 1.0f;
    fixDef.friction = 0.1f;
    fixDef.restitution = 1.0f;
    fixDef.isSensor = true;

    self.body = self.world->CreateBody(&bd);

    self.body->CreateFixture(&fixDef);

} 
```

只接触？然后使用 ccTouchesBegan。

# windows - 在本机窗口打开时禁用对空中应用程序中其他首选项的访问

> ID：14061764
> 
> 赞同：1
> 
> 时间：2012-12-27T21:51:00.123
> 
> 标签：windows, actionscript-3, air, desktop-application

我有一个空气应用程序。单击应用程序菜单项将打开本机窗口。就像在其他应用程序中一样，我希望在本机窗口打开时，应禁用对应用程序中其他首选项（如关闭应用程序等）的访问。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T00:19:34.587

我不知道有什么简单的方法可以做到这一点。我能想到的最好的方法是监听 DEACTIVATE 事件，阻止它，然后手动重新激活窗口。一些代码：

```
var args:NativeWindowInitOptions = new NativeWindowInitOptions();
var subWindow:NativeWindow = new NativeWindow(args);
subWindow.activate();
subWindow.addEventListener(Event.DEACTIVATE, onDeactivate);

private function onDeactivate(event:Event):void
{
    event.preventDefault();
    NativeWindow(event.target).activate();
} 
```

这将确保此子窗口在关闭之前始终保持焦点。

我可以看到此方法与此类子窗口的典型应用程序行为之间存在两个差异。

1）可以拖动父窗口（由于某种原因，这不会调度 DEACTIVATE 事件）

2）通常子窗口应该有点“闪烁”并播放警报声以表明必须先处理它才能进行进一步操作（至少这是 Windows 7 上其他应用程序的行为；我不确定其他操作系统）。

对于拖动问题，您应该能够让父窗口在子窗口处于活动状态时侦听 MOVING 事件和 preventDefault()。

我没有看到任何复制 2 行为的好方法。您可以`notifyUser(NotificationType.INFORMATIONAL)`在 DEACTIVATE 事件中拥有子窗口，但这与其他应用程序所做的事情不同。

# hash - MD5 是否散列或加密其字符串？

> ID：14061766
> 
> 赞同：0
> 
> 时间：2012-12-27T21:51:22.297
> 
> 标签：hash, md5, encryption

MD5 是对字符串进行散列还是对其进行加密？如果它对其进行哈希处理，那么就像他们所说的那样，单向哈希函数和原始字符串（或数据）无法通过产生的哈希恢复，因为它仅用于身份验证。那么我们如何解释MD5解密的在线网站呢？我实际上尝试过它，它会恢复原始字符串。这是一个这样做的网站：[http ://www.md5decrypter.co.uk/](http://www.md5decrypter.co.uk/)

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:53:14.523

MD5 是一种加密散列函数。它将可变长度字符串映射到 128 位哈希值。这是单向的，但可以使用[Rainbow Tables](http://en.wikipedia.org/wiki/Rainbow_table)快速破解代码。更不用说你发布的网站说它有

> 总共有超过 87 亿个唯一的解密 MD5 哈希值......

因此它甚至可以在需要尝试破解它之前先检查这些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:54:24.130

MD5 是一种哈希算法，这意味着它将任意长度的字符串映射到某个固定长度的字符串。其目的是使其难以从 MD5 散列的输出开始并恢复一些将散列到该输出的特定输入。因为有无限多的字符串和有限多的输出，所以它不是一个加密函数，并且仅给出输出就不可能确定哪个输入产生了该输出。

但是，MD5 有许多加密弱点，并已被各种其他散列函数（SHA 系列）所取代。如果需要加密安全，我强烈建议不要使用 MD5，因为那里有更好的算法。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:57:34.657

他们不会“解密”，他们会找到一个与您的哈希匹配的字符串，这不是一回事，但是当您将自己限制在常见的英语单词时，它很可能是。

要了解发生了什么，您必须考虑可能的 MD5 哈希数 - 2^128，这比英语中的单词数（2^16？）多，但远小于所有可能的字符串值 2^（位数互联网有，然后一些）

当您从较小的集合转换为较大的集合（英语-> MD5）时，可能所有值都会不同，但反之亦然。

底线：使用不是谷歌可以在网络上任何地方找到的字符串的密码。

# google-apps-script - 使用 GAS Ui 服务延迟授权对话

> ID：14061769
> 
> 赞同：0
> 
> 时间：2012-12-27T21:51:55.890
> 
> 标签：google-apps-script

有没有办法在独立的 Google Apps 脚本中延迟授权对话框？我有一个公共脚本，需要从活跃的 Google 用户那里获得多个权限。在请求所有这些权限之前，我想告诉用户脚本是如何工作的。

为什么我需要访问所有服务并不明显，所以这个对话框看起来很可怕： [https ://developers.google.com/apps-script/scripts_google_accounts#grantingAccess](https://developers.google.com/apps-script/scripts_google_accounts#grantingAccess)

我的脚本是一个带有 UI 服务的“Web 应用程序”，因此首先要显示的内容来自 doGet()，但是权限对话框首先打开。难道没有办法延迟对话框**直到实际需要权限**吗？

一种可能的方法是从我想的专用网站调用脚本，但这并不简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:19:26.127

一种解决方法是拥有两个网络应用程序：第一个是使用您的帐户运行的“介绍”网络应用程序，因此它不会提示用户。然后，您将他们重定向到使用他们的帐户运行的第二个 Web 应用程序，该应用程序将提示他们。

# android - Android > 4.0 片段和标签

> ID：14061770
> 
> 赞同：3
> 
> 时间：2012-12-27T21:51:56.920
> 
> 标签：android, android-fragments, android-actionbar, android-tabs

我真的迷路了。

我想制作一个有标签（片段？）的应用程序。因此，每当用户单击选项卡时，都会加载一个新片段。

UI 将类似于 View Control -> Fixed Tabs 下的 UI：http: [//developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)

我不需要向后兼容。

我不知道如何进行，因为我真的很困惑。任何指针将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:17:14.017

您可以很容易地创建一个示例应用程序，其中的片段链接到 Eclipse 中的选项卡：

*   文件 > 新建 > Android 应用程序
*   选择 Min SDK API 14、targetSDK API 17。单击 Next。再次单击下一步。
*   创建你的图标。点击下一步。
*   勾选创建活动。选择空白活动。点击下一步。
*   单击导航类型。选择 Tabs 或 Tabs + Swipe 或您想要的任何选项。单击完成。
*   你完成了。您有一个功能齐全的示例应用程序，其中包含片段和选项卡的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:56:43.313

[您可以在developer.android.com](http://developer.android.com/training/implementing-navigation/lateral.html)上下载一个不错的标签导航示例。如果您不需要向后兼容，那么您不必修改它并可以立即使用它。

# php - json 和 php 类之间的映射器

> ID：14061772
> 
> 赞同：3
> 
> 时间：2012-12-27T21:52:00.273
> 
> 标签：php, json, couchbase, mapper

我正在开始一个使用 couchbase（以 json 格式存储对象的 noSQL 数据库）以及 php.ini 的新项目。

问题是，如果我可以将 json 映射到我自己的 php 类之一（反之亦然），那么与它们一起工作将非常容易。

你知道任何图书馆吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T11:05:45.063

一种开始方法是查看（或使用）此处提供的“Basement”库： [https ://github.com/Basement/Basement](https://github.com/Basement/Basement)

这个库使用 json_decode/encode。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T05:09:04.890

您可以使用我们的[JSONmapper](https://github.com/cweiske/jsonmapper)从 JSON 映射到您的 PHP 类。不幸的是，它不支持映射回来（还）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T06:59:50.373

Tug 已经提到了 Basement，它将在不久的将来提供“模型”的功能，就像您从 ORM 系统中所知道的那样。

除此之外，由于 json_encode/decode 的性质，将普通的旧 php 对象映射到 JSON 非常容易。由于您可以向它传递一个任意对象并将其存储为 JSON，因此基本上您手头唯一需要的就是这些了。如果您需要有关 JSON 和 PHP 的更多信息，我的博客文章是一个好的开始： http: [//nitschinger.at/Handling-JSON-like-a-boss-in-PHP](http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP)

如果您使用 Basement，它会让您更轻松一些，因为它允许您在后台自动将 PHP 类型转换为 JSON（或者如果需要，也可以编写自己的映射器）。

如果您有要构建的特定示例，请告诉我，我很乐意提供示例！

# javascript - 选择除 div 及其内容之外的所有元素

> ID：14061774
> 
> 赞同：0
> 
> 时间：2012-12-27T21:52:10.733
> 
> 标签：javascript, jquery

> **可能的重复：**
> [jQuery：除 ___ 之外的所有目标？](https://stackoverflow.com/questions/1467226/jquery-target-all-except)

我有一个脚本可以检测页面上每个元素的点击。我希望它可以在除特定 div 及其子项之外的所有内容上运行。

我已经尝试使用 :not 选择器来执行此操作，但并不真正了解如何有效地使用它，所以我不确定这是否是正确的方法。

这是一些示例代码：

```
<div id="clickme">This is good stuff</div>

<div id="dontclickme">This should not get selected</div> 
```

我目前正在使用`$("*")`我的选择器。有没有办法使用它来检测它是第二个 div 还是它的任何孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:55:10.903

选择所有`div`s，但不选择`.class`：

```
$("div").not(".class")
```

也适用于其他选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:05:01.970

您可以使用[.filter()](http://api.jquery.com/filter/)和[.closest()](http://api.jquery.com/closest/)来检查元素是否具有某个 id 或元素是否是具有某个 id 的元素的子/后代...

```
$('body *').filter(function(i, v) {        
    return $(v).closest('#dontclickme').length == 0;
}) 
```

[http://jsfiddle.net/wirey00/7JE7x/](http://jsfiddle.net/wirey00/7JE7x/)

# forms - Symfony2：EventSubscriber 产生日期错误

> ID：14061775
> 
> 赞同：0
> 
> 时间：2012-12-27T21:52:14.950
> 
> 标签：forms, events, symfony

我已将 EventSubscriber 添加到表单类中，以便可以使用单个模板来添加和编辑实体。在添加订阅者之前，表单不会为添加或编辑抛出错误。添加订阅者后，当满足添加dateAdded字段的条件时，编辑出现如下错误：

> 给定类型“\DateTime”、“array”的预期参数

否则，EventSubscriber 似乎按预期执行。

### 订户

```
class AddV2FieldsSubscriber implements EventSubscriberInterface {

    private $factory;

    public function __construct(FormFactoryInterface $factory) {
        $this->factory = $factory;
    }

    public static function getSubscribedEvents() {
        return array(FormEvents::PRE_SET_DATA => 'preSetData');
    }

    public function preSetData(DataEvent $event) {
        $data = $event->getData();
        $form = $event->getForm();
        if (null === $data) {
            return;
        }
        // check if the client object is v1
        if (!$data->getId() || $data->getDateAdded()) {
            $date = new \DateTime();
            $form->add($this->factory->createNamed('dateAdded', 'date', $date, array(
                    'widget' => 'single_text',
                    'format' => 'MM/dd/yyyy',
                    'pattern' => '{{ year }}-{{ month }}-{{ day }}',
                    'years' => range(Date('Y'), Date('Y') - 5),
                    'required' => false,
                    'data' => date_create(),))
                    );
            $form->add($this->factory->createNamed('dob', 'dob_age')
                    );
            $form->add($this->factory->createNamed('sex', 'choice', array(
                    'choices' => array('Male' => 'Male', 'Female' => 'Female'),
                    'empty_value' => "Select a gender",
                    'required' => false))
                    );
        }
    }
} 
```

### 其实体中的 dateAdded 字段：

```
/**
 * @var \DateTime $dateAdded
 *
 * @ORM\Column(name="date_added", type="date", nullable=true)
 */
private $dateAdded; 
```

### 模板片段

```
 {% if form.dateAdded is defined %}
        {% include 'ManaClientBundle:Client:v2.html.twig' %}
    {% endif %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:36:12.837

同样，答案是要注意`createNamed()`函数的第三个参数。在这种情况下，我不得不修改

```
$form->add($this->factory->createNamed('sex', 'choice', array(... 
```

读书

```
$form->add($this->factory->createNamed('sex', 'choice', null, array(... 
```

# r - unquote dimension names

> ID：14061778
> 
> 赞同：4
> 
> 时间：2012-12-27T21:52:42.603
> 
> 标签：r

The following function creates a table with the variable names as dimension names

```
col.table <- function(var1, var2, C=T,weights=rep(1,length(var1)), margins=TRUE,data,env=parent.frame()){ 
  require(weights); require(Hmisc)
  v1 <- deparse(substitute(var1)) 
  v2 <- deparse(substitute(var2)) 
  if(!missing(data)){
    var1 <- data[,deparse(substitute(var1))]
    var2 <- data[,deparse(substitute(var2))]
    weights <- data[,deparse(substitute(weights))]
  }

  if (C) {
    crosstab <-prop.table(xtabs(weights ~ var1 + var2,data), margin=2)

    t <- cbind(crosstab, Total=prop.table(xtabs(weights ~ var1,data=data)))
    t <- rbind(t,Total = colSums(t))
    bu<-c(deparse(substitute(v1)), deparse(substitute(v2)))

    names(dimnames(t)) <- bu
    return(round(100*t,2))

}} 
```

Some dummy data

```
d<-data.frame(
  vara =c(1,1,1,1,1,2,2,2,2,2,3,3,3,3,3),
  varb = c(1,1,2,2,3,3,1,1,2,2,3,3,1,1,2),
  varc= c(1,2,3,1,2,3,1,2,3,1,2,3,1,2,3),
  weight= c(.5,.5,.5,.5,.5,1,1,1,1,1,2,2,2,2,2))

a<-col.table(vara,varb,data=d,weights=weight)
a 
```

I'd like the returned object (`a`) to show the variable names without the quotes (just `vara` and `varb` instead of `"vara"` and `"varb"` in this case). Does anyone know how to do this? I want to remove the quotes within the function rather than outside it.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T02:16:22.547

You did something that you did not intend, leading to this behavior.

`v1` and `v2` are not function arguments (i.e., promises). They are `character` variables, in the function's local environment. Passing them to `substitute` does nothing (as they are not promises), but passing to `deparse` adds quote characters on each side of the value. This is the problem with your code.

First:

```
v1 <- deparse(substitute(var1)) 
v2 <- deparse(substitute(var2)) 
```

Then:

```
bu<-c(deparse(substitute(v1)), deparse(substitute(v2))) 
```

Change this latter line to:

```
bu <- c(v1, v2) 
```

This fixes the root of the problem, rather than masking it by removing the quote characters later.

Note the added quote characters in the following expression. This is what is going wrong with your function:

```
> deparse('abc')
[1] "\"abc\"" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T22:16:30.587

Use `gsub('"','',...)` to remove quotation marks: changing the relevant line of code to

```
names(dimnames(t)) <- gsub('"','',bu) 
```

should do it, I think.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:57:51.267

you coud do this:

```
 names(dimnames(a)) <- c("vara","varb") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-21T04:44:33.150

Try as.name() to unquote a string whether with single or double quotes. If the string has an embedded space, as.name() returns it enclosed in backquotes (`string`) and it will be difficult to use it as a variable name, but maybe there is a way.

A demo:

```
> as.name("v7")
v7
> as.name('v7')

> as.name("v7 xx")
`v7 xx`
> as.name('v7 xx')
`v7 xx`
> as.name(`v7`)
Error in as.name(v7) : object 'v7' not found
> `v7` <= data.frame()
Error: object 'v7' not found
> 'v7' <= data.frame
Error in "v7" <= data.frame : 
  comparison (4) is possible only for atomic and list types
> "v7" <= data.frame
Error in "v7" <= data.frame : 
  comparison (4) is possible only for atomic and list types 
```

# c# - 我的 cookie 测试不起作用

> ID：14061783
> 
> 赞同：3
> 
> 时间：2012-12-27T21:52:59.693
> 
> 标签：c#, asp.net, cookies

我正在测试用户是否打开了 cookie，但我似乎没有做正确的事情。

这是我的测试：

```
private bool CookiesAllowed()
{
  var testCookie = new HttpCookie("TestCookie", "abcd");
  System.Web.HttpContext.Current.Response.Cookies.Set(testCookie);

  var tst = System.Web.HttpContext.Current.Request.Cookies.Get("TestCookie");
  if (tst == null || tst.Value == null)
  {
    return false;
  }
  return true;
} 
```

我在外面放一块饼干……然后把它拿回来。但它总是成功的。

这是我禁用它们的方法：

![在此处输入图像描述](../Images/8ba4903a975617e7f01c88bf00e798cf.png)

我去了 Gmail，它告诉我我的 cookie 被禁用了，所以我相信我做的那部分是正确的。

我究竟做错了什么？

**编辑**

为了回答詹姆斯的问题，我从我的登录屏幕调用这个，这是我的第一个检查屏幕：

```
 public ActionResult LogOn(string id)
    {
      if (!CookiesAllowed())
      {
        return View("CookiesNotEnabled");
      } 
```

此外，我已经在视觉工作室之外而不是在本地主机上进行了现场测试，它做了同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:45:13.377

您必须让您的客户端/浏览器执行一个新请求才能查看您是否获得了 cookie。当你向响应对象添加 Cookie 时，你只能在后续的新请求中检查它的存在。

这是在 ASP.NET **WebForms**的同一页面中执行此操作的一种方法（因为我看到您的编辑表明您正在使用 MVC）：

```
private bool IsCookiesAllowed()
{
  string currentUrl = Request.RawUrl;

  if (Request.QueryString["cookieCheck"] == null)
  {
    try
    {
      var testCookie = new HttpCookie("SupportCookies", "true");
      testCookie.Expires = DateTime.Now.AddDays(1);
      Response.Cookies.Add(testCookie);

      if (currentUrl.IndexOf("?", StringComparison.Ordinal) > 0)
        currentUrl = currentUrl + "&cookieCheck=true";
      else
        currentUrl = currentUrl + "?cookieCheck=true";

      Response.Redirect(currentUrl);
    }
    catch
    {
    }
  }

  return Request.Cookies.Get("SupportCookies") != null;
} 
```

[此代码片段受此线程](http://forums.asp.net/t/1044823.aspx)启发。

# jakarta-ee - Java-EE6：InitialContext 真的需要消耗 228 MB 内存吗？

> ID：14061784
> 
> 赞同：0
> 
> 时间：2012-12-27T21:53:09.127
> 
> 标签：jakarta-ee, memory, glassfish

我目前正在使用 Glassfish 3.1.2.2 / MySQL 5.5 和一个用 Java SE 6 编写的独立 Swing 客户端开发一个 3 层应用程序。我使用 JNDI 在 Glassfish 应用程序服务器上查找对我的企业 bean 的引用。为此，我初始化了一个 InitialContext：

```
InitialContext ctx = new InitialContext(); 
```

此行消耗 228 MB 的 RAM。这是正常的还是有办法优化它？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:13:59.930

在 32 位 JVM 上运行独立客户端可将内存消耗减少到 54 MB。[这是一篇讨论这个问题的文章。](http://www.1060.org/blogxter/entry?publicid=1F0377DE37DD6705BE96CC2BC27FEA19)

# html - 无法将 CSS 文件从 Web 拉到我的 html 页面中

> ID：14061792
> 
> 赞同：7
> 
> 时间：2012-12-27T21:53:59.467
> 
> 标签：html, css

我有一个 HTML 页面在我的 github 上引用了一个样式表。

这是：

```
<html>
<head>
    <title>Basic JavaScript Quiz</title>
    <link rel="stylesheet" type="text/css" href="https://raw.github.com/dublintech/JavaScript_Examples/master/jsquiz/css/jquiz.css" /> 
</head>
<body>
    <h1 id="title">Please be styled</h1>
</body>
</html> 
```

我的期望是`Please be styled`将按照样式表进行样式设置。但事实并非如此。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T22:02:44.443

Firefox 在控制台中记录错误：

> > 样式表[https://raw.github.com/dublintech/JavaScript_Examples/master/jsquiz/css/jquiz.css](https://raw.github.com/dublintech/JavaScript_Examples/master/jsquiz/css/jquiz.css)未加载，因为它的 MIME 类型“text/plain”不是“text/css”。@http [://jsbin.com/oyiceq/1/edit](http://jsbin.com/oyiceq/1/edit)

不要使用来自 github 的资源——它不是 CDN。保存文件并从您自己的服务器上提供它。

有关于这种行为的[讨论。](https://github.com/jsfiddle/jsfiddle-docs-alpha/issues/95)相关位是来自 github 的响应：

> > “这是一个功能，有点。请不要像那样滥用原始 URL，它们对我们的服务器来说是一项非常昂贵的操作。你应该在 pages.github.com 上托管这样的文件。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T22:03:06.330

服务器正在发送带有`Content-Type`of的文件`text/plain`，这可能会阻止它被用作 CSS。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T21:58:57.607

从您的 h1 标记中删除属性 id 即可工作。您的 CSS 文件中没有 #title 选择器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T22:00:34.863

使用相对路径，您使用的链接指向*显示*CSS 的页面，但实际上并未将数据作为 CSS 提供。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-27T22:01:37.063

我检查了css文件，你没有任何**标题**ID。**您已经在h1**元素上设置了样式。因此，为了查看样式，您可以选择像这样修改 HTML：

```
<html>
<head>
    <title>Basic JavaScript Quiz</title>
    <link rel="stylesheet" type="text/css" href="https://raw.github.com/dublintech/JavaScript_Examples/master/jsquiz/css/jquiz.css" /> 
</head>
<body>
    <h1>Please be styled</h1>
</body>
</html> 
```

或者像这样修改css：

```
#resultsTable {
   width:100%;
   border-collapse:collapse;
}
#resultsTable td, #resultsTable th 
{
font-size:1em;
border:1px solid #0066CC;
padding:3px 7px 2px 7px;
}
#resultsTable th 
{
font-size:1.1em;
text-align:left;
padding-top:5px;
padding-bottom:4px;
background-color:#A7C942;
color:#ffffff;
}
#resultsTable tr.alt td 
{
background-color:#e7f4c3;
}

body{
    margin: 0px;
    padding: 0px;
    background: #669966;
    cursor: default;
    font-size: 12px;
    font-family: Arial, Tahoma;
}
.questionContainer {
    width: 800px;
    border: 3px double #003366;
    padding: 3px;
    margin: 10px;
}
ul {
    margin: 0px;
    padding: 5px;
}
ul li {
    list-style: none;
}
a {
    border: 1px solid #000;
    padding: 2px 5px;
    font-weight: bold;
    font-size: 10px;
    background: #FFF;
    cursor: pointer;
}
a:hover {
    background: none;
}
.btnContainer {
    width: 96%;
    margin: 10px 0px 10px 2%;
}
#progressKeeper {
    width: 800px;
    height: 25px;
    border: 3px double #003366;
    margin: 0px 10px;
    padding: 3px;
}
#txtStatusBar {
    margin: 5px 10px;
    font-weight: bold;
}
#progress {
    background: green;
    width: 0;
    height: 25px;
}
.radius {
    border-radius: 6px;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    -o-border-radius: 6px;
}
#resultKeeper {
    width: 800px;
    margin: 10px;
    padding: 3px;
    border: 3px double #003366;
    background:#66CC66;
}
#resultKeeper div {
    line-height: 20px;
}
.totalScore {
    font-weight: bold;
    padding:10px;
}
input {
    position: relative;
    top: 2px;
}
#title {
    border-bottom: 1px solid #003366;
    font-size: 16px;
    height: 22px;
    margin: 10px;
    text-indent: 5px;
}
.prev { float: left; }  /** elements after a float will flow around it **/
.next, .btnShowResult { float: right; }
.clear { clear: both; }    /** no floats allowed left or right **/
.hide { display: none; } 
.resultlist  li.altli{background:#CCFFAA;}
.resultlist li {background: #BBEEAA;}
#resultsTable td.fail{color:red;} 
```

# javascript - Jquery post 无法从 django 视图中获得任何响应

> ID：14061793
> 
> 赞同：0
> 
> 时间：2012-12-27T21:54:10.517
> 
> 标签：javascript, jquery, django

这是我的帖子脚本：

```
 <script type="text/javascript">
        $(document).ready(function () {

            $("#email").submit(function () {
                console.log("here2");
                var formData = $("#id_email").serialize();
                console.log("here1");
                $.post("http://127.0.0.1:8000/poste/", formData, function(result){
                    alert(result);
                    console.log("hi")}

            );            
            });
        });
    </script> 
```

这是我的 Django 视图：

```
@csrf_exempt
def posterous_view(request):
    if request.is_ajax():
        message = "Yes, AJAX!"
    else:
        message = "Not Ajax"
    print message
    return HttpResponse(message) 
```

我想在警报框中的前端客户端脚本中打印消息/响应代码，但根据我的控制台，该函数本身没有被调用。有什么理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:23:44.853

您需要返回 false，因此表单不会提交。如果它确实提交了，那么 ajax 请求将被终止，表单本身将优先。试试这个，让我们看看是不是这个问题:)

```
 $(document).ready(function () {

        $("#email").submit(function () {
            console.log("here2");
            var formData = $("#id_email").serialize();
            console.log("here1");
            $.post("/poste/", formData, function(result){
                alert(result);
                console.log("hi")
            });

            return false; // return false here
        });
    }); 
```

# objective-c - 如何从 UIViewController 传递变量来委托 UITableViewController

> ID：14061795
> 
> 赞同：2
> 
> 时间：2012-12-27T21:54:18.500
> 
> 标签：objective-c, uiviewcontroller, nsmutablearray, uitableview

我对 iOS 编程比较陌生，所以请耐心等待。我正在使用的要求如下：

> **屏幕 1：**向用户展示了一个加载了数据的 UITableView，特别是城市和州。用户点击一个选择并被带到屏幕 2。
> 
> **屏幕 2：**向用户显示他们选择进行编辑的项目的“详细”视图。
> 
> *   城市字符串 ( ***selectedCity*** ) 放置在文本框中进行编辑
> *   在 UITableView 中加载了一个 NSArray 状态。***应根据从屏幕 1 ( selectedState*** )传递的字符串在加载表中选择所选城市的状态。如果需要，用户可以在此处选择不同的状态。
> *   第二个 UITableView 将包含一组与城市相关并从数据库中检索的学校。有一组单独的功能可用于管理此列表。

我在实施屏幕 1 时没有遇到任何问题。以下是我将城市和州值传递到屏幕 2 的方式：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //Get the City
    self.checkedCellIndex = indexPath.row;
    FSCity *selectedCity = [CityList objectAtIndex:indexPath.row];
    NSString *cityName = selectedCity.name;
    NSString *stateName = selectedCity.state;

    AdminCityView *dvController = [[AdminCityView alloc] initWithNibName:@"AdminCityView" bundle:[NSBundle mainBundle]];
    dvController.selectedCity = cityName;
    dvController.selectedState = stateName;

    [self.navigationController pushViewController:dvController animated:YES];

    dvController = nil;
} 
```

然而，为了构建屏幕 2，我必须为每个 UITableView（StateTable 和 SchoolTable）创建 UITableViewController，并将它们加载到主 UIViewController（AdminCityView），如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    txtCity.text = selectedCity;

    if (stateController == nil) {
        stateController = [[StateTable alloc] init];
    }
    if (schoolController == nil) {
        schoolController = [[SchoolTable alloc] init];
    }
    [tblState setDataSource:stateController];
    [tblSchool setDataSource:schoolController];

    [tblState setDelegate:stateController];
    [tblSchool setDelegate:schoolController];
    stateController.view = stateController.tableView;
    schoolController.view = schoolController.tableView; 
} 
```

虽然我可以在我的 UIViewController 中很好地获取 selectedState 变量并且我的状态表在 UIView 中加载得很好，但我仍然坚持如何将 selectedState 变量从我的 UIViewController (AdminCityView) 传递到 UITableViewController (StateTable) 以便我可以对带有变量的StateTable进行操作（比如选择与变量匹配的行）。

我一直在 AdminCityView 和 StateTable 上使用 NSLog 进行测试，并且该变量目前肯定只能从 AdminCityView 访问。我不确定是否需要通过 AdminCityView 中的代码传递它，或者我是否应该返回屏幕 1 并在导航到 AdminCityView 之前以某种方式将其传递给 StateTable。

我很高兴发布任何可能有助于获得答案的其他代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:41:06.143

有3种方法可以完成这项工作，选择你的。

如果您正在使用情节提要，则可以只使用 segue 并完成它。从您的代码中，我只能猜测您不是，因为 viewController:initWithNibName 将是不必要的。

所以你有点坚持旧方法，有时结果是最好的......

您可以通过 NSNotificationCenter 使用通知。你订阅你的 stateTable 到 notificationCenter 使用

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(someMethodToCall:) name:@"someName" object:nil]; 
```

其中观察者应该是自我，选择器是您必须实现的方法，当通知发送时将被调用（您可以根据需要选择帽子名称），名称是通知的名称（随意选择），对象是您希望从中接收通知的对象（您可能不需要指定这个，除非您发送大量通知）。

你还需要实现 -(void)someMethodToCall: 像这样：

```
-(void)someMethodToCall:(NSNotification *)notification{
    NSDictionary *dic = notification.userInfo;
    //you will store all the data you want transferred in this, as you will see.
    //use it as you like
} 
```

您的 AdminCityView 现在可以向您的 stateTable 发送消息，并且这些消息可以携带有效负载。您需要做的就是：

```
[self postNotificationName:@"theNameYouChoseAbove" object:yourFirstViewController  userInfo:someDictionaryThatHoldsYourValues]; 
```

现在来自 AdminCityView 的数据在 NSDictionary 中传输。那些东西对他们接受的东西真的很开放，所以你应该没问题。

另一种方法是使用协议。

您可以像这样在 AdminCityView 中实现协议：

```
@protocol yourNameHereProtocol
-(void)methodToCall:(NSString*)theData;
@end 
```

只需在头文件中的接口上方执行此操作，使用适合您的任何类型的数据。NSString 只是一个例子。

现在 stateController 需要符合该协议。在 stateController.h 中在接口后面添加：

```
@interface stateController (UIViewController)<yourNameHereProtocol>{
}
-(void)someMethodToCall:(NSString *)theData; 
```

现在 stateController 需要实现 someMethodToCall，在那里你处理 theData 并且你已经完成了一半。

现在，在创建 dvController 之后执行此操作：

```
[dvController setDelegate:stateController]; 
```

现在，dvController 可以调用 stateController 中的委托方法 someMthodToCall:data，通过 data-attribute 传输数据。

哦，你真的不需要两个 TableViewControllers，你可以让周围的视图符合 UITableViewDataSource 和 TableViewDelegate 协议，并在委托方法中处理所有不同的情况。但那是另一篇文章，我猜。

如果您有任何问题，请对此发表评论，我会尽力回答。另外，我可能混淆了您不同班级的分母等，请随意更改它们，因为这似乎是合理的。

玩得开心

# image-processing - 哪个图像库专注于图像质量？

> ID：14061802
> 
> 赞同：0
> 
> 时间：2012-12-27T21:54:50.097
> 
> 标签：image-processing, imagemagick

当人们[比较 ImageMagick 和 GraphicsMagick](https://stackoverflow.com/questions/862051/imagemagick-vs-graphicsmagick)（或其他类似的库）时，他们倾向于关注性能。然而，我更关心结果的质量，并不真正关心一个库是否需要另一个库的 10 倍。如果我在

*   ImageMagick 和 RMagick
*   GraphicsMagick
*   自由图像和图像科学
*   还有什么你想提醒我的

哪一个可能会给出与 Photoshop 相媲美的结果？我担心质量，因为最近使用 ImageMagick 的一些工作给出了一些不太好的结果。

# c# - Web 客户端 DownloadString 为 PHP 输出空白

> ID：14061804
> 
> 赞同：0
> 
> 时间：2012-12-27T21:55:02.717
> 
> 标签：c#, php

好吧，所以我有一个 php 脚本，它返回 SQL 表的内容并回显它们，当我加载页面时它工作正常但是当我通过 C# 下载字符串时它出现空......如果我输出除了结果之外的其他内容SQL 表它也可以工作。

我也尝试过 WebRequests，但没有运气。

为什么它不能工作？

输出也只是一行。

这是我的 PHP 代码

```
<?php  
$database="example";  
mysql_connect ("localhost", "username", " ");  
@mysql_select_db($database) or die( "Unable to select database");  
$result = mysql_query( "SELECT * FROM names" )  
or die("SELECT Error: ".mysql_error());  
$num_rows = mysql_num_rows($result);  

while ($get_info = mysql_fetch_row($result)){  
foreach ($get_info as $field)  
echo $field;  
}  

?> 
```

C# 代码

```
 HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create("http://10.0.0.3/list.php");
        myHttpWebRequest.MaximumAutomaticRedirections = 1;
        myHttpWebRequest.AllowAutoRedirect = true;
        HttpWebResponse response = (HttpWebResponse)myHttpWebRequest.GetResponse();
        using (Stream stream = response.GetResponseStream())
        {
            StreamReader reader = new StreamReader(stream, Encoding.UTF8);
            String responseString = reader.ReadToEnd();
            MessageBox.Show(responseString);
        } 
```

这是生成的 HTML（这是废话，但我只是在测试）

```
jacobsharkeypetergriffinTimPalmer123testlion ofnarnia 
```

奇怪的是，例如在 php 脚本中，如果我将“$field”更改为“test”之类的东西，它可以完美运行并通过表结果的数量输出 test

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:26:23.983

试试这个来获取 HTML，它的代码要少得多，而且可能更干净一些。

```
string str = string.Empty;

WebClient client = new WebClient();
Stream data = client.OpenRead("http://www.google.com");
StreamReader reader = new StreamReader(data);
str = reader.ReadToEnd(); 
```

# ios - Xcode 加载图像的旧实例而不是新实例

> ID：14061809
> 
> 赞同：1
> 
> 时间：2012-12-27T21:55:15.697
> 
> 标签：ios, xcode, uiimageview

我有一个 UIImageView 加载一个名为 logo.png 的图像。我使用 Interface Builder 创建 UIImageView 并添加图像。我通过删除旧参考并将其移至垃圾箱，然后添加具有相同文件名的新参考来添加新版本的徽标。

问题是这样的：在 Interface Builder 中，徽标显示新图像，但是当我在设备上构建和运行应用程序时，它显示旧徽标。

我已经做了这些事情来解决这个问题：从设备中完全删除应用程序并从 xcode 重新构建它；从项目中删除 logo.png 并再次添加。

这只是 xcode 故障还是我可以采取任何其他步骤来确保在应用程序运行时显示最新版本的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:57:15.690

从模拟器中卸载您的应用程序。从 xcode 清理并构建并运行您的应用程序。

# mysql - 具有匹配 ID MySQL 的所有相关行的总和

> ID：14061814
> 
> 赞同：2
> 
> 时间：2012-12-27T21:56:42.007
> 
> 标签：mysql, sql

我有以下表架构：

```
 tbl_portfolio
    ----------
    id (auto number)
    name 
```

-

```
 tbl_registration
    ----------------
    id(auto number)
    name
    portfolio_id (FK to tbl_portfolio.id) 
```

-

```
 tbl_fund
    ---------
    id (auto number)
    registration_id (FK to tbl_registration.id) 
```

-

```
 tbl_transaction
     ---------------
     id (auto number)
     fund_id (FK to tbl_fund.id)
     type
     shares
     price 
```

我需要创建一个在伪代码中执行以下操作的查询：

```
 SELECT port.*, SUM ALL transactions for each portfolio,
      FROM tbl_portfolio port
      INNER JOIN tbl_registration reg ON reg.portfolio_id = port.id
      LEFT JOIN tbl_fund fund on fund.registration_id = reg.id
      LEFT JOIN tbl_transaction trans ON trans.fund_id = fund.id 
```

现在，该查询当然不起作用......我需要的本质上是将每个基金的所有**价格 * 单位**相加，然后将每个注册的所有这些相加，然后将每个投资组合的所有这些相加。

每个投资组合可以有多个注册，每个注册可以有多个基金，每个基金可以有多个交易。

最后一项在这方面抛出了一个棘手的问题，可能有 10 或 100 的投资组合要计算，所以我不知道如何编写查询，更不用说以不依赖会导致它的子查询的有效方式编写它有严重的表现不佳。

感谢您的帮助！

编辑：PinnyM 的答案有效并正确查询数据 - 但是我应该扩展全部需求。

除了 tbl_transaction 之外，还有一个 tbl_distri 和 tbl_div。两者都将 fund_id 作为 FK 到 tbl_fund.id 。我需要得到 tbl_distri.amount 和 tbl_div.units 的 SUM。因此，完整的伪查询将具有以下效果：

```
 SELECT port.*, SUM ALL transactions for each portfolio, SUM(div.units), SUM(distri.amount)
      FROM tbl_portfolio port
      INNER JOIN tbl_registration reg ON reg.portfolio_id = port.id
      LEFT JOIN tbl_fund fund on fund.registration_id = reg.id
      LEFT JOIN tbl_transaction trans ON trans.fund_id = fund.id
      LEFT JOIN tbl_distri distri on distri.fund_id = fund.id
      LEFT JOIN tbl_div div on div.fund_id = fund.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:58:59.247

你试过使用`SUM()`吗？

```
SELECT port.*, SUM(trans.shares * trans.price) AS transaction_totals
  FROM tbl_portfolio port
  INNER JOIN tbl_registration reg ON reg.portfolio_id = port.id
  LEFT JOIN tbl_fund fund on fund.registration_id = reg.id
  LEFT JOIN tbl_transaction trans ON trans.fund_id = fund.id
  GROUP BY port.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:09:09.153

从您的问题来看，您正在寻找汇总的 SUM

```
 SELECT port.id AS port_id, 
              reg.id  AS reg_id, 
              fund.id AS fund_id,
              SUM ( trans.shares * trans.price) AS net_asset_value
         FROM tbl_portfolio port
   INNER JOIN tbl_registration reg ON reg.portfolio_id = port.id
    LEFT JOIN tbl_fund fund on fund.registration_id = reg.id
    LEFT JOIN tbl_transaction trans ON trans.fund_id = fund.id
     GROUP BY port.id, reg.id, fund.id WITH ROLLUP 
```

这将为您提供 id 的总和。您可以将此作为子查询使用其他 JOIN 操作来获取文本名称。

这将给出如下结果：

```
 port_id  reg_id  fund_id   net_asset_value
    1       1       1          150.00
    1       1       2          100.00
    1       1      NULL        250.00   (rollup of previous two lines)
    1       2       1           24.00
    1       2       4           80.00
    1       2      NULL        104.00   (rollup of previous two lines)
    1      NULL    NULL        354.00   (rollup at portfolio level)
    3       1       1           40.00
    3       1       2           50.00
    3       1      NULL         90.00   (rollup of previous two lines)
    3       2       1           14.00
    3       2       4           60.00
    3       2      NULL         74.00   (rollup of previous two lines)
    3      NULL    NULL        164.00   (rollup at portfolio level)
  NULL     NULL    NULL        518.00   (grand total) 
```

NULL 将其放入此结果集中，因为这就是 WITH ROLLUP 所做的。这个结果集中只有 ID；即使名称不是，ID 也可能是唯一的。投资组合、基金等的非唯一名称会严重混淆 GROUP BY。因此，我之前对检索名称的评论。

# android - 确保我的光标已关闭

> ID：14061821
> 
> 赞同：0
> 
> 时间：2012-12-27T21:57:37.027
> 
> 标签：android, cursor

所以我有一些不同的活动，它们将 SimpleCursorAdapter 用于 ListView。我现在主要担心的是内存泄漏等等。我需要确保光标在应该关闭的时候关闭。

我注意到，由于空指针异常，在我进行更改后重新运行代码时，我的应用程序崩溃了。

有人可以查看我的一项活动的代码，并告诉我光标未正确关闭是否存在问题？或者您看到的任何其他可能导致内存泄漏或 ANR 的问题？

`RoutinesActivity.java`：

```
package com.gauvion.gfit;

import android.annotation.SuppressLint;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class RoutinesActivity extends ListActivity {

    private RoutinesDataSource datasource;
    private SimpleCursorAdapter dataAdapter;
    private boolean isEditing = false;
    private Toast toast_deleted;
    private String[] columns = new String[] { MySQLiteHelper.COLUMN_NAME };
    private int[] to;

    @SuppressLint("ShowToast")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_routines);
        getActionBar().setDisplayHomeAsUpEnabled(true);

        toast_deleted = Toast.makeText(this, "", Toast.LENGTH_SHORT);
        datasource = new RoutinesDataSource(this);
        datasource.open();

        Cursor cursor = datasource.fetchAllRoutines();
        to = new int[] { R.id.listitem_routine_name };
        dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_routine, cursor, columns, to, 0);
        setListAdapter(dataAdapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_routines, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {     
        Cursor cursor = datasource.fetchAllRoutines();
        switch (item.getItemId()) {
        case android.R.id.home:
            this.finish();
            return true;

        case R.id.button_routines_add:
            Intent startRoutineAdd = new Intent(this, RoutineAddActivity.class);
            this.startActivity(startRoutineAdd);
            return true;

        case R.id.button_routines_edit:
            to = new int[] { R.id.listitem_routine_edit_name };
            dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_routine_edit, cursor, columns, to, 0);
            setListAdapter(dataAdapter);

            isEditing = true;
            invalidateOptionsMenu();
            return true;

        case R.id.button_routines_edit_done:
            to = new int[] { R.id.listitem_routine_name };
            dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_routine, cursor, columns, to, 0);
            setListAdapter(dataAdapter);

            isEditing = false;
            invalidateOptionsMenu();
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);

        menu.findItem(R.id.button_routines_edit).setVisible(!isEditing);
        menu.findItem(R.id.button_routines_edit_done).setVisible(isEditing);

        return true;
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long thisID)
    {       
        Cursor cursor = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
        cursor.moveToPosition(position);
        long id = cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.COLUMN_ID));
        String name = cursor.getString(cursor.getColumnIndex(MySQLiteHelper.COLUMN_NAME));

        if (!isEditing) {
            Intent startDaysActivity = new Intent(this, DaysActivity.class);
            startDaysActivity.putExtra("routineDataID", id);
            startDaysActivity.putExtra("routineDataName", name);
            this.startActivity(startDaysActivity);
        }
    }

    public void onClick(View view) {        
        ListView l = getListView();
        int position = l.getPositionForView(view);

        Cursor cursor = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
        cursor.moveToPosition(position);
        long id = cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.COLUMN_ID));
        String name = cursor.getString(cursor.getColumnIndex(MySQLiteHelper.COLUMN_NAME));

        switch (view.getId()) { 
        case R.id.button_routine_edit:
            Intent startRoutineEdit = new Intent(this, RoutineEditActivity.class);
            startRoutineEdit.putExtra("routineDataID", id);
            startRoutineEdit.putExtra("routineDataName", name);
            this.startActivity(startRoutineEdit);
            break;

        case R.id.button_routine_delete:
            toast_deleted.setText(getString(R.string.toast_routine_deleted));
            toast_deleted.show();
            datasource.deleteRoutine(id);
            onResume();
            break;
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
        datasource.open();
        Cursor cursor = datasource.fetchAllRoutines();
        dataAdapter.changeCursor(cursor);
    }

    @Override
    protected void onPause() {
        super.onPause();
        datasource.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:51:38.660

如果您想确保根据您的活动生命周期正确处理您的光标，我建议使用

```
startManagingCursor() 
```

方法。

根据[文档](http://developer.android.com/reference/android/app/Activity.html#startManagingCursor%28android.database.Cursor%29)：

> 此方法允许活动根据活动的生命周期为您管理给定游标的生命周期。也就是说，当活动停止时，它会自动在给定的光标上调用 deactivate()，当它稍后重新启动时，它会为你调用 requery()。当activity被销毁时，所有托管的Cursor都会自动关闭

但是，新的常用方法是使用*CursorLoader*，但如果你只是使用普通的 sqllite 恐怕你不能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:46:58.537

我最终只是将光标设为全局并调用`cursor.close()`@Override `onDestroy()`。

# java - 与 Java 泛型“嵌套”的绑定不匹配

> ID：14061823
> 
> 赞同：2
> 
> 时间：2012-12-27T21:57:38.243
> 
> 标签：java, generics

我在使用泛型对现有设计进行重新设计/重构时遇到了困难。

```
public interface DataDto {
    // some data here
}

public interface SetDto<MyDataDto extends DataDto> {
    List<MyDataDto> getData();
}

public interface Results<MySetDto extends SetDto<DataDto>> {
    MySetDto getResults();
}

public interface MyProblemInterface<MyDataDto extends DataDto,
        MySetDto extends SetDto<MyDataDto>,
        MyResults extends Results<MySetDto>> {
    // some stuff here
} 
```

我的问题是我收到以下错误`MyProblemInterface`：

```
Bound mismatch: The type MySetDto is not a valid substitute for the
bounded parameter <MySetDto extends SetDto<DataDto>> of the type
Results<MySetDto> 
```

我承认我在泛型方面的经验有些有限，但基本上我试图强制其中的所有三种类型`MyProblemInterface`都是相同的“类型”。例如，如果我有`ADataDto`, `BDataDto`, `ASetDto<ADataDto>`, `BSetDto<BDataDto>`, `AResults<ASetDto>`, `BResults<BSetDto>`，我想确保一个类不能以类似的方式实现 MyProblemInterface `AMyProblemInterface<ADataDto, ASetDto, BResults>`。我认为既然`MySetDto`延伸`SetDto<MyDataDto>`得很好，我可以继续更进一步，但我显然错了。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:13:13.390

你对 Java 泛型的要求太多了。

将接口声明如下会更简单：

```
public interface MyProblemInterface<MyDataDto extends DataDto> 
```

然后强制方法使用`SetDto<MyDataDto>`and `Results<MySetDto>`。

通过在类/接口声明中使用泛型，您可以指定稍后在定义中确定的某种种类。但是在您的情况下，您说过`SetDto`并且`Results`将始终`MyDataDto`作为参数，因此没有变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:29:20.660

它不应该是这样的吗，并且仅在实现接口时才添加实际的类。

更新了代码，因为我忘了添加正确的结果定义。这应该有效。

```
public interface DataDto {
    // some data here
}

public interface SetDto<T extends DataDto> {
    List<T> getData();
}

public interface Results<T extends SetDto<? extends DataDto>> {
    T getResults();
}

public interface MyProblemInterface<T extends DataDto, E extends SetDto<T>, K extends Results<E>> {
    // some stuff here
} 
```

# android - 执行后显示进度条

> ID：14061831
> 
> 赞同：0
> 
> 时间：2012-12-27T21:58:29.760
> 
> 标签：android, android-layout

我在使用 ProgressBar 时遇到问题。我以前使用过进度条，从来没有遇到过这个问题。

我有一个按钮，一旦单击，就会运行一个异步任务，这可能需要很长时间才能完成。因此，我设置了一个 ProgressBar 来显示单击按钮的时间。代码是这样的：

```
Button btnFollowing = (Button) findViewById(R.id.btnFollowing);

    final ProgressBar pbFollowing = (ProgressBar) findViewById(R.id.progressBarFollowing);

    btnFollowing.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            pbFollowing.setVisibility(View.VISIBLE);
            ArrayList<String> friends = new ArrayList<String>();
            try {                   
                GetFriends gf = new GetFriends(MainActivity.this);
                friends = gf.execute("value").get();        
            } catch (InterruptedException e) {
                Log.e("Exception MainActivity gettingfriends", e.toString());
            } catch (ExecutionException e) {
                Log.e("Exception MainActivity gettingfriends", e.toString());
            }
            setStringArrayPref(MainActivity.this, "friends", friends);
            pbFollowing.setVisibility(View.INVISIBLE);
        }
    }); 
```

问题是 ProgressBar 在 AsyncTask 结束之前不会显示在屏幕上，即使 setVisible 行在 AsyncTask 创建之前也是如此。

关于为什么会发生这种情况的任何想法？

谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:12:05.057

问题在于这一行：

```
friends = gf.execute("value").get(); 
```

执行将在后台启动任务，但对其调用 get() 将等待执行完成然后返回结果。因此，您的代码将在此行中等待，直到 AsyncTask 完成，之后您的进度条将变得可见，因为您使用 get 调用阻塞了主线程。

您应该在 AsyncTask 上调用 execute 方法，然后使用 AsyncTask 的 onPostExecute 在执行结束时执行您需要执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:03:13.677

AsyncTask onPre... 将在 GUI threead 上运行，它会显示 AsyncTask onPost 也将在 gui 线程上运行，你应该关闭/隐藏

# performance - 带有查询的 Mongodb 计数性能较差

> ID：14061833
> 
> 赞同：0
> 
> 时间：2012-12-27T21:58:40.353
> 
> 标签：performance, mongodb, morphia, mongodb-query, mongo-java

即使在索引字段上计算查询匹配的集合中的记录数也需要太多时间。例如，假设有一个包含 10000 条记录的集合，并且该集合的 creationDate 字段上有一个索引。从集合中获取最后十条记录比计算最后一天创建的记录数要快。返回计数查询的结果需要超过 5 秒，有时甚至长达 70 秒。你知道如何解决这个问题，解决这个问题的最佳方法是什么？

顺便说一句，我们也使用了 morphia，我们看到通过 morphia 获取计数更慢，所以对于计数查询，我们将 morphia 查询转换为 java 驱动程序查询。有没有人遇到过类似的情况，为什么吗啡反应更慢？这仅发生在计数查询中还是与仅使用 java 驱动程序相比通常很慢？

非常感谢您的帮助、建议或解决方法，我们的应用程序严重依赖计数查询，而且系统的缓慢现在对我们来说真的很烦人。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:16:21.153

虽然这可能不是最终答案，但让我们开始并进一步发展：

1.  您的索引应始终适合 RAM，否则您将获得非常糟糕的性能。

2.  要评估使用了多少 RAM，您可以使用 10gen 的 MMS 或使用[各​​种工具](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)进行检查。有关低（常驻）内存使用率的描述以及可能的原因，请参阅[http://www.kchodorow.com/blog/2012/05/10/thursday-5-diagnosing-high-readahead/](http://www.kchodorow.com/blog/2012/05/10/thursday-5-diagnosing-high-readahead/)。或者您只是还没有访问足够的数据，在这种情况下您可以使用[MongoDB 的触摸](http://docs.mongodb.org/manual/reference/command/touch/)（但我怀疑这一点，因为您已经遇到了性能问题）。

除了添加 RAM 并确保使用所有可用的 RAM 之外，您还可以删除未使用的索引或尽可能使用复合索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:30:46.610

等待修复。

正如 Asya Kamsky 评论的那样，计数性能在 2.2 上非常糟糕。我们发现的唯一解决方法是尽可能避免使用它们。

（mongodb 还有其他一些无法解释的缓慢的事情——例如聚合查询——其中大多数都与 JIRA 问题相关并且正在处理/计划中）

# c# - 字符串值尝试在 Vb.net 中捕获

> ID：14061835
> 
> 赞同：1
> 
> 时间：2012-12-27T21:58:49.747
> 
> 标签：c#, vb.net, declaration, definition, declare

我很难理解为什么这总是返回一个空变量

```
 Private Function checkEnvelopeStatus(aEnvelopeID As String) As String
    Dim lEnvelopeStatusMessage As String

    Try
        Dim lEnvelopeStatus = mDsapi.RequestStatusEx(aEnvelopeID)
        lEnvelopeStatusMessage = "Subject:" & lEnvelopeStatus.Subject & vbCrLf & "Status Code: " & lEnvelopeStatus.Status
    Catch ex As Exception
        MessageBox.Show(ex.StackTrace, ex.Message)
    End Try

    Return lEnvelopeStatusMessage
End Function 
```

然而，这将返回我想要的消息

```
 Private Function checkEnvelopeStatus(aEnvelopeID As String) As String
    Dim lEnvelopeStatusMessage As String

    Try
        Dim lEnvelopeStatus = mDsapi.RequestStatusEx(aEnvelopeID)
        aEnvelopeID = "Subject:" & lEnvelopeStatus.Subject & vbCrLf & "Status Code: " & lEnvelopeStatus.Status
    Catch ex As Exception
        MessageBox.Show(ex.StackTrace, ex.Message)
    End Try

    Return aEnvelopeID 
End Function 
```

似乎在我的 TRy 捕获关闭后，当它是函数本地变量时，字符串的值正在被清除。然而，当我用传入的参数替换它时，我能够保留 Try Catch 外部的字符串？我主要是 C#/C++ 开发人员，所以这对我来说是令人困惑的行为。谁能解释为什么会发生这种情况？

这是上面代码的更干净的版本

```
Public Function foo(a As String) As String
    Dim b As String
    Try
        b = "banana:"
    Catch ex As Exception

    End Try

    Return b
End Function 
```

它表现出相同的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:21:25.280

在 C# 中，您无法在执行流程中编译存在路径的方法的代码，这可能导致在未初始化返回值的情况下退出方法。使用未分配的变量会出现编译器错误。

在 VB.NET 中，如果您在项目选项的“构建”页面中将**“在赋值前使用变量”**选项从“**警告**”更改为“**错误**” ，则可以避免该错误 。（我强烈建议这样做）

（不确定选项的确切名称，因为我使用的是本地化版本的 Visual Studio）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T00:49:23.653

在您重新抛出 excaption 之前，它不会编译。考虑以下：

```
public String foo(String a) {
    String b;

    try {
        b="banana:";
    }
    catch {
        throw;
    }

    return b;
} 
```

这段代码会编译，因为如果出现异常，它会重新抛出。编译器预测逻辑问题，例如无法访问的代码（尽管无法访问的代码不是错误）。VB.net 中的等价物：

```
Public Function foo(a As String) As String
    Dim b As String

    Try
        b = "banana:"
    Catch ex As Exception
        Throw ex
    End Try

    Return b
End Function 
```

顺便说一句，捕捉任何异常被认为是一种不好的编码实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T00:30:19.770

该代码不应该编译，我试过这个，它给了我一个编译器错误“错误3使用未分配的局部变量'b'”

你的编译器有问题，你用的是什么？

```
 static public string foo(string a)
    {
        String b;
        try
        {
            b = "banana";
        }
        catch
        {

        }

        return b;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T21:58:49.747

我用 C# 编写了相同的代码

```
public string foo(string a)
{
    String b;
    try
    {
        b = "banana";
    }
    catch
    {

    }

    return b;
} 
```

}

它似乎表现出相同的行为。我被带回来了。多想一想，还是有道理的。我只是在声明该变量并没有真正将它定义为任何东西。所以用这样的东西替换上面的例子：

```
 public string foo(string a)
    {
        String b = "";
        try
        {
            b = "banana";
        }
        catch
        {

        }

        return b;
    }
} 
```

解决了我所有的问题。希望这可以帮助将来的人。你知道的越多....

# javascript - 使用带有警报声的javascript创建倒数计时器

> ID：14061837
> 
> 赞同：0
> 
> 时间：2012-12-27T21:58:53.373
> 
> 标签：javascript, html, audio

我正在尝试创建一个简单的倒数计时器，它会在最后播放警报声（这将用于食谱网站）。我找到了一个简单倒数计时器的脚本，但是我在实现警报声时遇到了麻烦结尾。我正在尝试使用 SoundManager2 来发出警报声。我是编程新手，所以任何提示都会有所帮助！

谢谢！！

这是我的倒计时脚本：

```
function countdown( elementName, minutes, seconds )
{
    var element, endTime, hours, mins, msLeft, time;

    function twoDigits( n )
    {
        return (n <= 9 ? "0" + n : n);
    }

    function updateTimer()
    {
        msLeft = endTime - (+new Date);
        if ( msLeft < 1000 ) {
            mySound.play();

            //element.innerHTML = "countdown's over!";
        } else {
            time = new Date( msLeft );
            hours = time.getUTCHours();
            mins = time.getUTCMinutes();
            element.innerHTML = (hours ? hours + ':' + twoDigits( mins ) : mins) + ':' + twoDigits( time.getUTCSeconds() );
            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
        }
    }

    element = document.getElementById( elementName );
    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
    updateTimer();
}

countdown( "countdown", 0, 15 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:08:14.187

您正在使用 mySound.play()，但我看不到任何声音文件加载。使用 SoundManager，您必须首先“创建”一个声音对象，稍后您可以在该对象上使用 play 方法。sm2 文档中的一个简单示例：

```
var mySoundObject = soundManager.createSound({
 id: 'mySound',
 url: '/audio/mysoundfile.mp3'
});
mySoundObject.play(); 
```

如果你想在 iPhone 或 iPad 上运行它，你应该在播放后调用 mySoundObject.destruct()。否则在第一次播放后您可能什么也听不到。

# azure - 如果 Azure 不使用与我的本地环境相同的 web.config，如何使用代理发布 MVC 应用程序

> ID：14061838
> 
> 赞同：0
> 
> 时间：2012-12-27T21:58:54.933
> 
> 标签：azure

在我的 MVC Web 应用程序中，一个控制器功能（验证）调用服务。请参阅下面的代码并注意 MessageHandlerClient 是在 Visual Studio 中生成的服务代理。服务代理调用 client.ValidateMessage(formdataasbson["HLmessage"].ToString()) 在我的本地开发环境中工作正常。当我将项目发布到 Azure 时，对 Validate 控制器函数的调用不再起作用。怀疑代理有问题，我更改了 Validate() 以返回硬编码结果，重新发布到 Azure，一切正常 - 确认 Azure 中的 Web 服务代理行为存在问题。

```
 [HttpPost]
    public ActionResult Validate(String serializedformdata)
    {
        try
        {
            BsonDocument formdataasbson = this.serializer.JSONFormtoBSON(serializedformdata);    
            MessageHandlerClient client = new MessageHandlerClient();
            this.jsonresponse.ReturnValue = "true";

            StandaloneValidator.My_ServiceReference.Error[] results = client.ValidateMessage(formdataasbson["HLmessage"].ToString());       

            this.jsonresponse.ReturnMessage = results.ToJson();

            return Json(this.jsonresponse);
        }
        catch (Exception ex)
        {
            this.jsonresponse.ReturnValue = "false";
            this.jsonresponse.ReturnMessage = ex.Message;
            return Json(this.jsonresponse);

        }

    } 
```

更重要的是，我在本地 web.config 文件中看到了 Web 服务代理的详细信息，如下所示（IP 故意隐藏）：

我已经阅读了有关 Azure 中 web.config 的各种帖子以及它不可写的事实，所以我怀疑我的本地.....代理信息从未在 Azure 中发布。如果确实 web.config 没有从本地发布到 Azure，那么我明白为什么我的代理不起作用。问题是......我该怎么做才能解决？？！

编辑：我看到各种帖子讨论将某些设置从 web.config 迁移到 Azure 的 csfg 文件 - 也许是一个可行的解决方案？鉴于我没有编写手动读取这些设置的代码（我只是创建了从 URL 到服务的服务代理），我担心自动生成的代码或服务的任何“幕后”行为，不知道如何从csfg。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:45:00.113

根据您上面所写的内容，您似乎对 Web 角色和网站感到困惑。首先，您需要了解这两者之间的区别，以便您可以更好地决定为您的应用程序选择什么。以下是一些有用的链接：

*   关于 Azure 网站和 Web 角色之间差异的[SO 讨论](https://stackoverflow.com/questions/10941488/what-is-the-difference-between-an-azure-web-site-and-an-azure-web-role/10942227#10942227)
*   关于何时以及为什么选择 Azure 网站和 Web 角色以及 Azure VM 的[MSDN 文章](http://msdn.microsoft.com/en-us/library/windowsazure/jj218759.aspx)

Windows Azure 网站，您无法完全控制 IIS Web 服务器，因此某些设置网站特定设置是可配置的，而另一些则不可配置。在 Windows Azure 网站中，添加到 web.config 中的大多数机器和系统特定设置都被覆盖，因此这些设置不起作用。您也不能 RDP 到您的 Azure 网站实例。

如果您必须使用必须需要代理配置的 ASP.NET MVC 应用程序，则必须将其部署到[Windows Azure 云服务](https://www.windowsazure.com/en-us/manage/services/cloud-services/)。

# virtualization - KVM 和 libvirt：虚拟主机中的 CPU 类型错误

> ID：14061840
> 
> 赞同：2
> 
> 时间：2012-12-27T21:58:56.687
> 
> 标签：virtualization, virtual-machine, kvm, libvirt

我们在 6 核（12 HT 核）机器上使用 KVM 和 libvirt 进行虚拟化。

**问题：虚拟主机中的 CPU 类型错误。**

使用的 KVM、libvirt、内核版本：

```
libvirt version: 0.9.8
QEMU emulator version 1.0 (qemu-kvm-1.0), Copyright (c) 2003-2008 Fabrice Bellard
Ubuntu 12.04.1 LTS
kernel: 3.2.0-32-generic x86_64 
```

/usr/share/libvirt/cpu_map.xml 不支持比 Westmare 更新的 cpu 类型。

**我是否需要这种 CPU 虚拟化？**由于某些原因，我们需要虚拟主机中的最大 cpu 性能。很高兴在我的虚拟机中提供服务器的 i7-3930K CPU@3.20GHz 的一些内核。

也许我们做太多 muczh 虚拟化...？

我的虚拟主机的 xml 看起来像：**我在哪里可以设置 cpu -host 标志？**

```
<domain type='kvm'>
  <name>myVirtualServer</name>
  <uuid>2344481d-f455-455e-9558</uuid>
  <description>Test-Server</description>
  <memory>4194304</memory>
  <currentMemory>4194304</currentMemory>
  <vcpu>2</vcpu>
  <cpu match='exact'>
    <model>Westmere</model>
    <vendor>Intel</vendor>
  </cpu>
  <os>
    <type arch='x86_64' machine='pc-1.0'>hvm</type>
    <boot dev='hd'/>
  </os>
  <features>
    <acpi/>
    <apic/>
    <pae/>
  </features> 
```

$ lscpu 物理服务器的 6 (12) 个内核和 HT

```
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                12
On-line CPU(s) list:   0-11
Thread(s) per core:    2
Core(s) per socket:    6
Socket(s):             1
NUMA node(s):          1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 45
Stepping:              7
CPU MHz:               1200.000
BogoMIPS:              6400.05
Virtualization:        VT-x
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              12288K
NUMA node0 CPU(s):     0-11 
```

$ lscpu of virtual Server（错误的 CPU 类型、错误的 L2-Cache、错误的 MHz）

```
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                2
On-line CPU(s) list:   0,1
Thread(s) per core:    1
Core(s) per socket:    1
Socket(s):             2
NUMA node(s):          1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 15
Stepping:              11
CPU MHz:               3200.012
BogoMIPS:              6400.02
Virtualisation:        VT-x
Hypervisor vendor:     KVM
Virtualisation type:   full
L1d cache:             32K
L1i cache:             32K
L2 cache:              4096K
NUMA node0 CPU(s):     0,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:06:16.343

在客户端的xml中

```
<cpu mode='custom' match='exact'>
    <model fallback='allow'>core2duo</model>
    <feature policy='require' name='vmx'/>
</cpu> 
```

举个例子。virsh 编辑然后重新启动来宾。

编辑。忽略这个。我刚刚重新阅读了您的问题，您已经在这样做了。

# sqlite - 使用 SQLite 执行异步失败

> ID：14061845
> 
> 赞同：1
> 
> 时间：2012-12-27T21:59:33.543
> 
> 标签：sqlite, asynchronous, mozilla

我创建了这段代码，将一些插入语句发送到 SQLite DB：

> ```
>  new_db.executeAsync(stmts,stmts.length, {
>             handleResult: function(aResultSet) {
>               Firebug.Console.log("insert_data -> handleResult (" + aResultSet + ")");
>             },
>             handleError: function(aError) {
>               Firebug.Console.log("insert_data -> handleError (" + aError.result + "," + aError.message + ")");
>             },
>             handleCompletion: function(aReason) {
>                 Firebug.Console.log("insert_data -> completed");
>                 Firebug.Console.log(aReason);
>             }   
>         }); 
> ```

在输出中，我发现：

`insert_data -> completed`

`65535`

我不知道这个 65535 是什么意思。这不应该是一个错误（否则我会有 insert_data -> handleError），但为什么返回的值不为零？有没有办法获得代码的描述？

在任何情况下，我的语句都没有插入任何值，所以它应该是一个失败错误代码。

谢谢，

利维奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:33:29.597

我找到了解释...... stmts 数组是空的（stmts.length=0）。这就是这个奇怪的返回码的含义……在我看来，应该以某种方式记录下来。

# c++ - 从地图访问，将字符串转换为 char*

> ID：14061846
> 
> 赞同：0
> 
> 时间：2012-12-27T21:59:40.900
> 
> 标签：c++, map, casting

我在转换时遇到以下问题（或访问数据，我不确定）：

有`map<int, string> keys`我用来描述按钮的，数字与 Allegro5 键码匹配（例如`keys[81] = "PgDown"`）。我想使用 al_draw_text 在屏幕上打印数据，需要`char*`传递参数。

我尝试以这种方式访问​​数据：

```
char dropdownBuffer[16];
cout << keys[dropdownKeyCode] << endl;
sprintf_s(dropdownBuffer, "%s", keys[dropdownKeyCode]);
cout << dropdownBuffer << endl;
gui.drawButton(CLIENT_PADDING, CLIENT_PADDING+50+219, 123, 38, dropdownBuffer); 
```

控制台应该打印字符串`Spacja`两次，但第二次有一些随机字符。

我现在做错了什么？也许还有其他可能的方法可以将此字符串转换为字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:01:09.027

要从字符串中获取指向数据的指针，请使用 c_str()，参见 ref: [this](http://en.cppreference.com/w/cpp/string/basic_string/c_str)

替换代码：

```
sprintf_s(dropdownBuffer, "%s", keys[dropdownKeyCode]); 
```

和：

```
sprintf_s(dropdownBuffer, "%s", keys[dropdownKeyCode].c_str()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:16:36.703

我认为 sprintf_s 需要一个 sizeof 参数。

```
sprintf_s(dropdownBuffer, sizeof(dropdownBuffer), "%s", keys[dropdownKeyCode]); 
```

或者

```
const char* dropdownBuffer = keys[dropdownKeyCode].c_str(); 
```

# c++ - 数据通过 C++ 中的套接字

> ID：14061847
> 
> 赞同：3
> 
> 时间：2012-12-27T21:59:41.493
> 
> 标签：c++, c, sockets, serialization, tcp

我目前正在做一个使用网络的项目。我必须发送一个结构

```
 struct Header
    {
     uint32_t   magic;
     uint32_t   checksum;
     uint32_t   timestamp;
     uint16_t   commandId;
     uint16_t   dataSize;
    };

    struct Packet
    {
     struct Header  header;
     char       data[128];
    }; 
```

我正在尝试使用 TCP 将结构数据包从一个套接字发送到另一个套接字。我试图像这样发送我的结构

```
 send(socket, &my_struct, sizeof(my_struct), 0); 
```

但它不起作用，所以我尝试将我的结构序列化为 char*

```
unsigned char               *Serialization::serialize_uint32(unsigned char *buffer, uint32_t arg)
{
 buffer[3] = (arg >> 24);
 buffer[2] = (arg >> 16);
 buffer[1] = (arg >> 8);
 buffer[0] = (arg);
 return (buffer + sizeof(uint32_t));
}

unsigned char               *Serialization::serialize_uint16(unsigned char *buffer, uint16_t arg)
{
 buffer[1] = (arg >> 8);
 buffer[0] = (arg);
 return (buffer + sizeof(uint16_t));
}

    unsigned char                           *Serialization::deserialize_uint32(unsigned char *buffer, uint32_t *arg)
    {
      memcpy((char*)arg, buffer, sizeof(uint32_t));
      return (buffer + sizeof(uint32_t));
    }

    unsigned char                           *Serialization::deserialize_uint16(unsigned char *buffer, uint16_t *arg)
    {
     memcpy((char*)arg, buffer, sizeof(uint16_t));
     return (buffer + sizeof(uint16_t));
    } 
```

即使客户端 symly 发送 struct 标头数据在我读取服务器端时已损坏 为什么数据已损坏？

客户端发送循环

```
 TcpSocket                     tcp;
    Packet                        p;
    std::stringstream             ss;
    int                           cpt = 0;
    int                           ret = 0;
    char                          *serialized;

    tcp.connectSocket("127.0.0.1", 4242);
    while (getchar())
    {
      ss.str("");
      ss.clear();
  ss << cpt++;
  p.header.magic = 0;
  p.header.checksum = 1;
  p.header.timestamp = 2;
  p.header.commandId = 3;
  p.header.dataSize = ss.str().length();
  memset(p.data, 0, 128);
  memcpy(p.data, ss.str().c_str(), ss.str().length());
  serialized = new char[sizeof(Header) + ss.str().length()];
  bzero(serialized, sizeof(Header) + ss.str().length());
  Serialization::serialize_packet(serialized, p);
  hexDump("serialized", serialized+1, sizeof(Header) + ss.str().length());
  ret = tcp.write(serialized+1, sizeof(Header) + ss.str().length());
} 
```

服务器 recv 循环：（由 select() 调用的函数）

```
 buff = new char[bav];
  socket->read(buff, bav);
  hexdump("buff", buff, bav); 
```

套接字->读取（）：

```
 int                     TcpSocket::read(char *buff, int len)
    {
      int                   ret;

      ret = recv(this->_socket, buff, len, 0);
      return (ret);
    } 
```

当我运行这些程序时：

```
 ./server
    [Server] new connexion :: [5]
    recv returns : 17
    buff serialized:
      0000  00 00 00 00 14 00 00 00 1c 00 00 00 1a 00 00 00  ................
      0010  1b

    ./client
    serialized data:
      0000  00 00 00 00 00 00 01 00 00 00 02 00 03 00 01 30  ...............0
      0010  00
    send returns : 17 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T00:35:00.060

所以，这是错误的，它肯定会导致错误。

```
buff = new char[bav];
socket->read(buff, bav);
hexdump("buff", buff, bav);
socket->read() :

int TcpSocket::read(char *buff, int len)
{
    return recv(this->_socket, buff, len, 0);
} 
```

# `recv()`不能忽略from 的返回值。

来自`man 2 recv`：

```
返回值
     这些调用返回接收到的字节数，如果出错则返回 -1
     发生了。

     对于 TCP 套接字，返回值 0 表示对端已关闭其一半
     连接的一侧。

```

那么，你收到了多少字节？如果您丢弃`recv()`. 也许`recv()`失败了，如果你不检查返回值，你永远不会发现。也许它只填满了你的缓冲区的一部分。 *您必须检查来自`recv()`.* 这是人们在编写使用 TCP 的程序时犯的第一个错误。

您将需要更改代码以处理以下情况：

1.  该`recv()`调用可能会完全填满您的缓冲区。

2.  该`recv()`调用可能会部分填充您的缓冲区。

3.  该`recv()`调用可能返回 0，表示发送方已关闭连接。

4.  该`recv()`调用可能表明`EINTR`因为它被系统调用中断了。

5.  `recv()`呼叫可能表明因为发送方`ECONNRESET`突然关闭了连接或已经消失。

6.  调用可能会`recv()`遇到一些其他错误。

记住：当使用 TCP 时，仅仅因为你`send()`16 字节并不意味着其他对等方将`recv()`16 字节——它可能被分解成块。TCP 是一种流协议。与 UDP 不同，相邻的数据块可以任意连接或拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T22:03:22.180

1.  每次只需要屏蔽低 8 位：

    ```
    buffer[3] = (arg >> 24) & 0xff;
    buffer[2] = (arg >> 16) & 0xff;
    buffer[1] = (arg >> 8) & 0xff;
    buffer[0] = (arg) & 0xff; 
    ```

2.  反序列化时做同样的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T23:12:29.817

如果我是你，我不会重新发明轮子。有很多文档齐全且经过测试的库/协议正是您正在寻找的目的。我想到的一个小清单：

*   [提升序列化](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)
*   [Google 协议缓冲区](http://code.google.com/p/protobuf/)
*   JSON
*   XML
*   科尔巴

# python - 从字符串中删除单词

> ID：14061850
> 
> 赞同：0
> 
> 时间：2012-12-27T22:00:08.357
> 
> 标签：python, string

如果我有一个字符串，例如`'the quick brown fox'`，如何从原始字符串中删除连续的单词，例如“quick brown”以获取`'the fox'`？我试过`strip()`了，但没有用，我不太确定还能做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:01:23.207

使用`str.replace()`：

```
In [2]: strs='the quick brown fox'

In [3]: strs.replace('quick brown','')
Out[3]: 'the  fox'

In [4]: " ".join(strs.replace('quick brown','').split())
Out[4]: 'the fox'                          #single space between 'the' and 'fox' 
```

`help()`上`str.replace()`：

```
S.replace(old, new[, count]) -> str

Return a copy of S with all occurrences of substring
old replaced by new.  If the optional argument count is
given, only the first count occurrences are replaced. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:04:44.920

您*不能*从*原始*字符串中删除单词。字符串是不可变的；见[这里](http://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)：

> “字符串和元组是不可变的序列类型：此类对象一旦创建就无法修改。”

使用[`replace`](http://docs.python.org/2/library/stdtypes.html#str.replace)返回字符串的*副本*。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T22:04:20.710

```
mystring.replace(" quick brown ", " ", 1) 
```

# vb.net - 动态编译代码的反序列化程序集错误

> ID：14061851
> 
> 赞同：0
> 
> 时间：2012-12-27T22:00:25.360
> 
> 标签：vb.net, .net-assembly, binary-deserialization

我正在尝试序列化动态生成/编译的程序集以存储到 SQL 中，然后提取程序集以供使用。但是，我遇到了一个让我发疯的错误。

"*无法加载文件或程序集 '<random code>，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null' 或其依赖项之一。系统找不到指定的文件。* "

当我尝试对程序集进行反序列化时。将不胜感激任何指针。部分代码：

```
 '--------------------------------------------------------------
    'This section SUCCESSFULLY Compile & Execute the Dynamic Code
    '  vsResult returns ok.
    '  **Note: This is partial code to create the compiler.
    '--------------------------------------------------------------
    Dim voCompileResults As System.CodeDom.Compiler.CompilerResults = voCompiler.CompileAssemblyFromSource(voCompilerParams, sb.ToString)
    Dim voAssembly As Reflection.Assembly = voCompileResults.CompiledAssembly
    Dim voInstance As Object = Activator.CreateInstance(voAssembly.GetType("libARules.clsMyRoutine"), {New libARules.Sys.clsInterProcessData(New System.Xml.XmlDocument), New libArrowOps.clsDBAccess})
    Dim vsResult As String = voInstance.GetType().InvokeMember("Run", Reflection.BindingFlags.InvokeMethod, Nothing, voInstance, Nothing)

    '----------------------------------------------------
    'Attempt to Serialize the Assembly for store/forward
    '----------------------------------------------------
    Dim voMemStream As New IO.MemoryStream
    Dim voBF As New Runtime.Serialization.Formatters.Binary.BinaryFormatter
    voBF.AssemblyFormat = Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple
    voBF.Serialize(voMemStream, voCompileResults.CompiledAssembly)

    '--------------------------------------
    'Reset the MemoryStream position to begining
    '--------------------------------------
    voMemStream.Position = 0

    '--------------------------------------
    'Attempt to De-Serialize the MemoryStream back to an assembly
    '--------------------------------------
    voBF = New Runtime.Serialization.Formatters.Binary.BinaryFormatter
    voBF.AssemblyFormat = Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple
    voAssembly = voBF.Deserialize(voMemStream)
    '----- **Error Here** --------------------------------- 
```

**ERROR 此时：**在线`voAssembly = voBF.Deserialize(voMemStream)`

*无法加载文件或程序集 '...<random code>..., Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。**系统找不到指定的文件**。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:13:25.957

好吧，我终于在小睡后想通了......在这里为“后代”记录它：P

显然，我**不应该**对 CompiledAssembly 进行序列化/反序列化。

```
 '-----------------------------------------------------
    'Instead of Generating in Memory, generate it into a temporary Assembly file (I don't need the CompiledAssembly from the compiler).
    ' Note: Again, this is partial code, with only the important parts here.
    '-----------------------------------------------------
    voCompilerParams.ReferencedAssemblies.Add("mscorlib.dll")
    voCompilerParams.GenerateInMemory = False
    voCompilerParams.OutputAssembly = System.IO.Path.Combine(System.IO.Path.GetTempPath(), "deleteNow_" & Guid.NewGuid().ToString() & ".dll")

    Dim voCompileResults As System.CodeDom.Compiler.CompilerResults = voCompiler.CompileAssemblyFromSource(voCompilerParams, sb.ToString)

    '--------------------------------------------------------------------------
    'After the Assembly is generated, open the Assembly file and read the entire content into a byte buffer.
    'Note that this byte buffer **CAN BE STORED into an SQL BLOB field.**
    '--------------------------------------------------------------------------
    Dim voInstance As Object = Nothing
    Dim vsResult As String = ""
    Dim voAssembly As Reflection.Assembly = Nothing
    If Not voCompileResults.Errors.HasErrors Then
        '----------------------------------------------------------------
        'No compilation error, open and read the generated assembly file
        '  into a Byte array.
        '----------------------------------------------------------------
        Dim voBuffer() As Byte = Nothing
        Dim voFileStream As IO.FileStream = IO.File.OpenRead(voCompilerParams.OutputAssembly)
        If voFileStream.CanRead Then
            ReDim voBuffer(voFileStream.Length - 1)
            voFileStream.Read(voBuffer, 0, voFileStream.Length)
        End If
        voFileStream.Close()
        IO.File.Delete(voCompilerParams.OutputAssembly) 'Clean-up after ourselves.

        '----------------------------------------------------------------
        'Now, re-create the CompiledAssembly from the Byte array.
        '----------------------------------------------------------------
        If Not IsNothing(voBuffer) Then
            voAssembly = Reflection.Assembly.Load(voBuffer)
        End If
        If Not IsNothing(voAssembly) Then
            '--------------------------------------------
            'Instantiate my dynamically compiled class
            '--------------------------------------------
            voInstance = Activator.CreateInstance(voAssembly.GetType("libARules.clsMyRoutine"), {New libARules.Sys.clsInterProcessData(New System.Xml.XmlDocument), New libMyLib.clsMyClass})
            If Not IsNothing(voInstance) Then
               '------------------------------------------------
               'Run my dynamic code to proof that it is working
               '------------------------------------------------
                vsResult = voInstance.GetType().InvokeMember("Run", Reflection.BindingFlags.InvokeMethod, Nothing, voInstance, Nothing)
            End If
        End If
    End If 
```

而且...`vsResult`人口众多。这是一个概念证明，`CompiledAssembly`可以在以后存储和重用。**请**注意，在`voAssembly`从`voBuffer()`.

# android - 表中排列的视图之间的双向分页

> ID：14061853
> 
> 赞同：1
> 
> 时间：2012-12-27T22:00:30.493
> 
> 标签：android, android-layout, android-widget

我在表格中排列了视图。该表的一列代表一篇期刊文章；此列中的每一行代表本文的一页。现在我必须能够在文章之间和页面之间滑动。

我知道如何使用 ViewPager 和 Fragments，我也知道这个库： [https](https://github.com/JakeWharton/Android-DirectionalViewPager) ://github.com/JakeWharton/Android-DirectionalViewPager ，但这只允许同时在一个方向上分页。而且，我其实并不想同时在两个方向上翻页，但是一旦我开始向右移动，下一篇文章一定会出现，同样的，一旦我向下移动；文章的下一页必须出现...

我不能使用垂直滚动而不是分页，这是客户要求。

我考虑了两天多的正确方法，但仍然无法弄清楚如何做到这一点。我认为最简单的方法是用 JakeWharton 重写 DirectionalViewPager，它似乎是一个坚实的基础。

在我开始这样做之前，我想在这里问一下 Android 专家：有没有更好的方法或库来做到这一点？

# algorithm - Automated GOTO removal algorithm

> ID：14061856
> 
> 赞同：14
> 
> 时间：2012-12-27T22:00:42.710
> 
> 标签：algorithm, language-agnostic, goto

I've heard that it's been proven theoretically possible to express any control flow in a Turing-complete language using only structured programming constructs, (conditionals, loops and loop-breaks, and subroutine calls,) without any arbitrary `GOTO` statements. Is there any way to use that theory to automate refactoring of code that contains `GOTO`s into code that does not?

Let's say I have an arbitrary single subroutine in a simple imperative language, such as C or Pascal. I also have a parser that can verify that this subroutine is valid, and produce an Abstract Syntax Tree from it. But the code contains `GOTO`s and Labels, which could jump forwards or backwards to any arbitrary point, including into or out of conditional or loop blocks, but not outside of the subroutine itself.

Is there an algorithm that could take this AST and rework it into new code which is semantically identical, but does not contain any Labels or `GOTO` statements?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T22:24:53.263

In principle, it is always possible to do this, though the results might not be pretty.

One way to always eliminate gotos is to transform the program in the following way. Start off by numbering all the instructions in the original program. For example, given this program:

```
start:
    while (true) {
        if (x < 5) goto start;
        x++
    } 
```

You could number the statements like this:

```
0 start:
1     while (x < 3) {
2         if (x < 5) goto start;
3         x++
      } 
```

To eliminate all gotos, you can simulate the flow of the control through this function by using a while loop, an explicit variable holding the program counter, and a bunch of if statements. For example, you might translate the above code like this:

```
int PC = 0;
while (PC <= 3) {
    if (PC == 0) {
         PC = 1;             // Label has no effect
    } else if (PC == 1) {
         if (x < 3) PC = 4;  // Skip loop, which ends this function.
         else PC = 2;        // Enter loop.
    } else if (PC == 2) {
         if (x < 5) PC = 0;  // Simulate goto
         else PC = 3;        // Simulate if-statement fall-through
    } else if (PC == 3) {
         x++;
         PC = 1;             // Simulate jump back up to the top of the loop.
    }
} 
```

This is a really, really bad way to do the translation, but it shows that in theory it is always possible to do this. Actually implementing this would be very messy - you'd probably number the basic blocks of the function, then generate code that puts the basic blocks into a loop, tracks which basic block is currently executing, then simulates the effect of running a basic block and the transition from that basic block to the appropriate next basic block.

Hope this helps!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T14:38:24.920

I think you want to read [Taming Control Flow](http://citeseerx.ist.psu.edu/search?q=%22Taming+Control+Flow%22) by Erosa and Hendren, 1994\. (Earlier link on [Google scholar](http://scholar.google.com.pe/scholar?q=%22Taming+Control+Flow%3A+A+Structured+Approach+to+Eliminating+Goto+Statements%22)).

By the way, loop-breaks are also easy to eliminate. There is a simple mechanical procedure involving the creating of a boolean state variable and the restructuring of nested conditionals to create straight-line control flow. It does not produce pretty code :)

If your target language has tail-call optimization (and, ideally, inlining), you can mechanically remove both break and continue by turning the loop into a tail-recursive function. (If the index variable is modified by the loop body, you need to work harder at this. I'll just show the simplest case.) Here's the transformation of a simple loop:

```
for (Type Index = Start;        function loop(Index: Type):    
     Condition(Index);              if (Condition)
     Index = Advance(Index)){           return                      // break
   Body                             Body
}                                   return loop(Advance(Index))     // continue
                                loop(Start) 
```

The `return` statements labeled "continue" and "break" are precisely the transformation of `continue` and `break`. Indeed, the first step in the procedure might have been to rewrite the loop into its equivalent form in the original language:

```
{
    Type Index = Start;
    while (true) {
        if (!Condition(Index))
            break;
        Body;
        continue;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T14:14:20.327

I use either/both Polyhedron's spag and vast's 77to90 to begin the process of refactoring fortran and then converting it to matlab source. However, these tools always leave 1/4 to 1/2 of the goto's in the program.

I wrote up a goto remover which accomplishes something similar to what you were describing: it takes fortran code and refactors all the remaining goto's from a program and replacing them with conditionals and do/cycle/exit's which can then be converted into other languages like matlab. You can read more about the process I use here:

[http://engineering.dartmouth.edu/~d30574x/consulting/consulting_gotorefactor.html](http://engineering.dartmouth.edu/~d30574x/consulting/consulting_gotorefactor.html)

This program could be adapted to work with other languages, but I have not gotten than far yet.

# jquery - 带有 JQuery 动画的纯 CSS 可折叠树导航

> ID：14061857
> 
> 赞同：2
> 
> 时间：2012-12-27T22:00:42.557
> 
> 标签：jquery, html, css, navigation, html-lists

我正在使用[http://www.thecssninja.com/css/css-tree-menu](http://www.thecssninja.com/css/css-tree-menu)上的纯 CSS 可折叠树导航。我想在导航中添加一些简单的 jquery，以便在折叠打开/关闭时使其平滑过渡，但不确定如何。我的代码如下：

```
<ul class="tree">
    <li>
        <label for="folder1" class="menu_first">Treatment Options</label> <input type="checkbox" id="folder1" /> 
        <ul>
            <li class="file"><a href="">- File 1</a></li>
            <li class="file"><a href="">- File 1</a></li>
            <li class="file"><a href="">- File 1</a></li>
            <li class="file"><a href="">- File 1</a></li>
        </ul>
    </li>
    <li>
        <label for="folder2" class="menu_first">Benefits &amp; Risks</label> <input type="checkbox" id="folder2" /> 
        <ul>
            <li class="file"><a href="">- Benefits</a></li>
            <li class="file"><a href="">- Life &amp; Death</a></li>
            <li class="file"><a href="">- Complications</a></li>
            <li class="file"><a href="">- Psychological Risks</a></li>
            <li class="file"><a href="">- Lifestyle Changes</a></li>
        </ul>
    </li>
    <li>
        <label for="folder3" class="menu_first">Donation: Step-by-Step</label> <input type="checkbox" id="folder3" /> 
        <ul>
            <li class="file"><a href="">- File 1</a></li>
            <li class="file"><a href="">- File 1</a></li>
            <li class="file"><a href="">- File 1</a></li>
            <li class="file"><a href="">- File 1</a></li>
        </ul>
    </li></li></ul>

 ul.tree{
       padding:10px 5px 0 20px;
       width: 230px;
       background-color:#eaeaea;
       margin-top:0px;
       font-family:"FutConM",Arial,Helvetica,sans-serif;
       font-size:28px;
 }
 li{ 
 position: relative; 
 margin-left: -15px;
 list-style: none;
 color:#666;
 }
 li.file{
 margin-left: -1px !important;
 }
 li.file a{
 background:;
 color:#666;
 text-decoration: none;
 display: block;
 margin-left:-63px;
 line-height:25px;
 }
 li.file a[href *= '.pdf']{ 
 background: url(document.png) 0 0 no-repeat; 
 }
 li.file a[href *= '.html']{ 
 background: url(document.png) 0 0 no-repeat; 
 }
 li.file a[href $= '.css']{ 
 background: url(document.png) 0 0 no-repeat; 
 }
 li.file a[href $= '.js']{ 
 background: url(document.png) 0 0 no-repeat; 
 }
 li input{
 position: absolute;
 left: 0;
 margin-left: 0;
 opacity: 0;
 z-index: 2;
 cursor: pointer;
 height: 1em;
 width: 1em;
 top: 0;
 }
 li input + ul{
 background: url("/images/navtree/toggle-small-expand.png") no-repeat scroll 0 0;
 height: 17px;
 margin-left: -2px;
 margin-top: -17px;
 }
 li input + ul > li{ 
 display: none; 
 margin-left: -14px !important;
 padding-left: 1px; 
 }
 li label{
 background:;
 cursor: pointer;
 display: block;
 padding-left: 15px;
 border-top:1px solid #999;
 }
 li label.menu_first:hover{
 background-color:#F63;
 }
 li label.menu_first:active{
 background-color:#F63;
 }
 li label.menu_first:visited{
 background-color:#F63;
 }
 li input:checked + ul{
 background: url("/images/navtree/toggle-small.png") 0px 0px no-repeat;
 margin-left: -2px;
 margin-top: -17px; /* 20px */
 padding: 1.563em 0 0 80px;
 height: auto;
 }
 li input:checked + ul > li{ 
 display: block; 
 margin: 0 0 0.125em;  /* 2px */
 }
 li input:checked + ul > li:last-child{ 
 margin: 0 0 0.063em; /* 1px */  
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:53:49.070

如果你想保持非 JS 工作，你需要切换元素，然后动画它们进/出：

```
$("li input").on('change', function () {
   $("+ ul > li", this).toggle().toggle('slow');
}); 
```

# hbase - 无法让 HBase 独立模式工作

> ID：14061858
> 
> 赞同：3
> 
> 时间：2012-12-27T22:00:46.173
> 
> 标签：hbase

我在带有 virtualbox 的 Win 7 电脑上使用 openSuse 12.2 作为访客。我下载并解压了Hbase 0.94.3版本到/usr/local/hbase目录下

我执行了[此处](http://hbase.apache.org/book.html#quickstart)描述的步骤。

我可以初始化 hbase，但是当我尝试在 hbase shell 中执行任何命令时出现错误。我什至无法列出表格。

这是我的 hbase-site.xml 文件：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
  <property>
    <name>hbase.rootdir</name>
    <value>file:///usr/local/hbase</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/usr/local/zookeeper</value>
  </property>
</configuration> 
```

两个目录都存在。这是我执行命令列表时产生的错误的一部分：

```
12/12/27 19:56:41 ERROR zookeeper.ZooKeeperWatcher: hconnection Received unexpected KeeperException, re-throwing exception
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase 
```

这是生成的日志文件的最后一部分：

```
2012-12-27 19:53:41,820 ERROR org.apache.hadoop.hbase.master.HMasterCommandLine: Failed to start master
java.lang.RuntimeException: Failed construction of Master: class org.apache.hadoop.hbase.master.HMasterCommandLine$LocalHMasterlinux-eh01.site: Name or service not known
    at org.apache.hadoop.hbase.util.JVMClusterUtil.createMasterThread(JVMClusterUtil.java:134)
    at org.apache.hadoop.hbase.LocalHBaseCluster.addMaster(LocalHBaseCluster.java:197)
    at org.apache.hadoop.hbase.LocalHBaseCluster.<init>(LocalHBaseCluster.java:147)
    at org.apache.hadoop.hbase.master.HMasterCommandLine.startMaster(HMasterCommandLine.java:140)
    at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:103)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:76)
    at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:1820)
Caused by: java.net.UnknownHostException: linux-eh01.site: linux-eh01.site: Name or service not known
    at java.net.InetAddress.getLocalHost(InetAddress.java:1438)
    at org.apache.hadoop.net.DNS.getDefaultHost(DNS.java:185)
    at org.apache.hadoop.hbase.master.HMaster.<init>(HMaster.java:246)
    at org.apache.hadoop.hbase.master.HMasterCommandLine$LocalHMaster.<init>(HMasterCommandLine.java:215)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.hadoop.hbase.util.JVMClusterUtil.createMasterThread(JVMClusterUtil.java:131)
    ... 7 more
Caused by: java.net.UnknownHostException: linux-eh01.site: Name or service not known
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866)
    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258)
    at java.net.InetAddress.getLocalHost(InetAddress.java:1434)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:49:47.547

对我来说，这似乎是一个与网络相关的问题，而不是 Hbase。如果您查看日志，它表明正在对其他主机而不是本地主机进行调用。确保您的虚拟机上有正确的 DNS 解析。如果您想顺利运行 Hbase，这一点非常重要。您是否将 /etc/hosts 文件中的“127.0.1.1”行更改为“127.0.0.1”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T16:44:05.000

HBase 不适用于环回 ip。所以尽量避免在你的 /etc/hosts 文件中回送 ip。

环回 IP - HBase 0.94.x 及更早版本 以下建议仅适用于 hbase-0.94.x 及更早版本。这在 hbase-0.96.0 及更高版本中已修复。

在 HBase 0.94.x 之前，HBase 期望环回 IP 地址为 127.0.0.1。Ubuntu 和其他一些发行版默认为 127.0.1.1，这会给您带来问题。请参阅为什么 HBase 关心 /etc/hosts？详情

示例 1\. Ubuntu 的示例 /etc/hosts 文件

以下 /etc/hosts 文件在 Ubuntu 上适用于 HBase 0.94.x 及更早版本。如果遇到麻烦，请将此作为模板。

127.0.0.1 本地主机

127.0.0.1 ubuntu.ubuntu-域 ubuntu

# imagemagick - ImageMagick：JPEG 的透明背景，而不是 PNG

> ID：14061860
> 
> 赞同：1
> 
> 时间：2012-12-27T22:01:04.957
> 
> 标签：imagemagick, png, jpeg

我正在使用 ImageMagick 将 PDF 文件转换为 PNG。（很多文本，所以我宁愿使用 PNG 而不是 JPEG。）我在 OS X 10.8.2 上执行此操作。

我尝试使用 Ghostscript，然后是 ImageMagick，就像**[这里](https://stackoverflow.com/a/3379649/701410)**所做的那样，我得到了一个灰色的背景。我将它缩短为一行，因为 ImageMagick 可以处理 PDF 并尝试了这个：

```
 convert -background transparent -transparent white \
          Background-Page01.pdf TestClearX1.png 
```

我已经尝试过使用 PNG 文件和 JPEG 文件。（有和没有`-transparent white`。）

如果是 JPEG，我可以得到白色背景（这可能很清晰，但在我的查看器中，我无法分辨），但使用 PNG，我总是会得到深色背景。作为测试，我想尝试生成 BMP，然后将其转换为 PNG，但它不会生成 BMP 文件。

如何获得 PNG 文件的透明背景？

如果这是不可能的，因为 JPEG 文件不适合文本，有没有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-31T15:39:52.763

这不是一个答案，但该`comment`部分的格式不允许合理的格式，所以我在这里提供它。

您提到了`Preview`在 OS X 中不能正确显示透明度的事实，这是正确的。为了解决这个问题，我制作了以下脚本，它将您要查看的文件覆盖到像 Photoshop 那样的棋盘图案上。我将其另存为`preview`，然后在其上使用`chmod +x preview`以使其可执行。这是脚本：

```
#!/bin/bash
################################################################################
# preview
# Preview images using OSX "open" but overlay images on top of checkerboard 
# first so you can see transparency/transparent pixels, since Preview renders
# them grey :-(
################################################################################
for f in "$@"
do
   base=$(basename "$f")
   composite -compose Dst_Over -tile pattern:checkerboard "$f" "/tmp/$base"
   open -g "/tmp/$base"
done 
```

这使您能够：

```
/.preview file1.png file2.gif 
```

并且该`-g`选项还意味着`Preview`也不会窃取焦点:-)

所以，而不是看起来像这样：

![在此处输入图像描述](../Images/efeaa12a7c1e8384257842be6e80a120.png)

它看起来像这样：

![在此处输入图像描述](../Images/a8b9226b82966b759a464b70cdf399b2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:58:38.547

在 LibreOffice 中导出 PDF 有两种方法，一种方法不提供任何警告。另一种方法是警告 PDF/A**不能有透明对象**。问题是您使用的 PDF/A 文件不支持透明对象——这会导致您的 PNG 始终具有背景颜色。

# c# - 检查目标计算机中安装的 websphere mq？

> ID：14061864
> 
> 赞同：2
> 
> 时间：2012-12-27T22:01:26.657
> 
> 标签：c#, vb.net, winforms, websphere, ibm-mq

如何通过 vb.net winform 应用程序检查 IBM MQ 客户端是否安装在客户端计算机中？

```
I have added amqmdnet.dll to my project and imported IBM.WMQ namespace. 
```

但是我不知道如何检查目标计算机中安装的 IBM MQ 客户端？（例如，如果你想检查一个 Windows 服务，你可以遍历所有可用的服务，然后检查那个特定的 Windows 服务）

任何输入都会很有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:05:02.663

该`dspmqver`命令将让您知道安装了什么。

来自[微软知识库](http://support.microsoft.com/kb/317540)：

> **注意：**不要在应用程序中使用这些 API 来执行程序集绑定或测试程序集或其他运行时、开发或设计时操作的存在。只有管​​理工具和设置程序必须使用这些 API。如果您使用 GAC，这会将您的应用程序直接暴露给程序集绑定的脆弱性，或者可能导致您的应用程序在 .NET Framework 的未来版本上无法正常工作。

没有用于检查 GAC 的本机 MQ API。（Shashi，如果我在这里忽略了什么，请纠正我。我知道你在看。:-)）

# c++ - 会员检测代码说明

> ID：14061865
> 
> 赞同：9
> 
> 时间：2012-12-27T22:01:33.100
> 
> 标签：c++

这不是一个整体的概念，而是它用来确定一个类是否具有`n`数据成员的方法之一。这是完整的代码；SFINAE 用于成员检测的普通用途。

```
template <typename T>
struct has_X {
    struct Fallback { int X; };
    struct Derived : T, Fallback {};

    template <typename U, U> struct S;

    template <typename C> static char (&f(S<int Fallback::*, &C::X> *))[1];
    template <typename C> static char (&f(...))[2];

    public:
        const static bool value = sizeof(f<Derived>(0)) == 2;
}; 
```

`Derived`继承自两者`Fallback`的部分让`T`我感到困惑，因为当我们对 , 进行重载时`f`，`&C::X`是`&Derived::X`. 但是不应该总是选择这个重载，因为不能`Derived`保证有，`X`因为它继承自`Fallback`哪个数据成员？

也许我忽略了一些东西。然而，这段代码向我展示并教会了我从未知道的东西，所以也许这有*一些*东西。我期望的是始终选择该重载（而不是带有 的重载`...`），因为它`Derived`应该始终具有`X`，因为它继承自`Fallback`. 但这种情况并非如此。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T22:09:36.473

`Fallback`有一个名为 的数据成员，但如果也有一个名为 的成员，则`X`Derived 将有*两个*，在这种情况下不能明确采用。因此，如果没有，则使用第一个重载，如果有，则使用第二个更通用的版本。这就是为什么您可以根据返回类型的大小来区分这些情况。`T``X``Derived::X``T``X``T``X`

# django - django 会话的棘手问题：有时会删除会话信息

> ID：14061866
> 
> 赞同：7
> 
> 时间：2012-12-27T22:01:33.567
> 
> 标签：django, django-sessions

我的应用程序中的 django 会话有一个奇怪的错误：有时（大约 10 次，每天约 20000 次）用户的会话信息被删除。我通过日志文件对其进行了跟踪：在页面 A 有用户会话的信息，在他提交表单之后，在下一页他的会话为空。我尝试了两种类型的存储：memcached+db 和 db only，这个问题是针对它们的。我试图重现这些场景，但正如我所说，一切都按预期工作，这种情况非常罕见。我还检查了不同用户是否存在此问题，并且对于他们而言，每次都不会重现。我不知道如何找出根本原因，也不知道这里还有什么描述。如果有人有任何想法，请告诉我。如果它很重要，我正在使用 django 1.2 + FastCGI 运行我的应用程序。谢谢！

UPD：我检查并看到使用的会话密钥在两个连续请求期间没有更改，第一次请求有一个实际的会话状态，第二个会话变量被替换为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T23:14:03.543

正如@Steve Mayne 所提到的，最好在会话中间件和会话模型保存方法上进行一些日志记录。这就是我要开始的事情。

此外，我想说这可能是与数据库相关的问题，特别是如果您使用 MySQL 数据库后端进行会话。您可以检查日志以查找数据库锁和其他并发问题。我之前不得不处理类似的问题，解决方案很明确：优化和额外的性能。

如果你有一些特定的应用程序中间件，你可以检查干扰 Django 会话的功能。如果没有正确实施，这种并行操作可能会导致问题。

我要做的另一件事是升级到 Django 的最新稳定版本并迁移到 mod_wsgi 设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T10:13:03.447

作为调试此问题的一种方法，我将子类化标准 Django 会话中间件（或您当前使用的任何东西）：

`django.contrib.sessions.middleware.SessionMiddleware`

并在一些额外的日志记录中包装`process_request`和（可能更重要） 。`process_response`然后在 Django 中安装您的子类会话中间件`MIDDLEWARE_CLASSES`，而不是在 Django 中安装。

`session.save()`您还可以通过尝试读回它来验证它实际上已经提交了它的更改。问题可能在于会话状态序列化，并且它在您尝试存储的特定键或值上失败。

这些都不能解决您的问题，但它可能会帮助您确定正在发生的事情。

# cucumber - 在执行期间更改“要运行的标签”

> ID：14061868
> 
> 赞同：1
> 
> 时间：2012-12-27T22:01:35.797
> 
> 标签：cucumber

可以说我有这样的东西

```
@regression @monthly @A
Scenario:A

@regression @B
Scenario:B

@regression
Scenario:General 
```

我使用一个调用黄瓜测试的跑步者来运行我的测试，比如

```
cucumber --tags @regression TEST_PARAM1=something 
```

在特定情况下（基于 TEST_PARAM1 值），我想动态跳过“场景：A 或场景：B”。

我可以以某种方式使用“之前”钩子（或其他东西）根据条件将@A 或@B 标记动态添加到跳过列表中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T22:26:52.923

当前版本的 Cucumber 似乎无法做到这一点。它没有公开的、非弃用的 API 来改变命令行上传递的标签列表。您只能执行一个包装脚本，`cucumber`在执行此操作时调用并动态选择标签。或者，您可以在[文件中](https://github.com/vcr/vcr/blob/2cca59163b2e19d5c29e8650ae34cd1d731a9e39/cucumber.yml)[嵌入 Ruby`cucumber.yml`](https://github.com/vcr/vcr/blob/2cca59163b2e19d5c29e8650ae34cd1d731a9e39/cucumber.yml)。

相关：[是否可以在运行时跳过 Cucumber-JVM 的场景](https://stackoverflow.com/q/16037999/11687)

# grails - 从图像和音频输入创建 YouTube 视频幻灯片

> ID：14061871
> 
> 赞同：1
> 
> 时间：2012-12-27T22:01:49.840
> 
> 标签：grails, audio, video, youtube

我想将音频文件上传到我的网站，使用服务器上已有的图像以编程方式创建视频幻灯片，然后使用其 API 将该视频上传到 YouTube。该网站是基于 Grails 构建的，因此 Java 解决方案会很棒；Linux 命令行也可以工作。

使用 YouTube API 上传视频运行良好。我也可以毫不费力地让 avconv 或 ffmpeg 创建将在例如 Windows Media Player 中播放的视频。这可以制作可播放的电影：

avconv -i image.jpg -i audio.mp3 video.mpg

但是，手动将该视频上传到 YouTube 会导致格式错误。我可以创建 YouTube 将成功处理的其他文件，但音频播放时经常出现断断续续的情况。（一秒钟左右的清晰音频，然后是短暂的间隙，然后是一些清晰的音频，......）例如：

avconv -i image.jpg -i audio.mp3 video.mkv

我尝试过各种输出格式和编解码器，但都属于其中一类：明显编码成功但 YouTube 处理失败，或处理成功但音频播放不可接受。

我想知道是否有人能指出我正确的方向。我愿意接受任何可以让我解决通过我的 Grails 网站将音频上传到 YouTube 的基本问题的解决方案，而无需强迫我的用户自己创建视频幻灯片。

提前感谢任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:01:41.887

在 iPad 上创建 YouTube 幻灯片视频非常容易。[本指南](http://slideshow-studio.com/slideshow/create-video-upload-youtube-ipad/)显示了这些步骤。

添加音乐、应用过渡、编辑照片都可以在那里完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-24T12:33:54.983

我构建了一个非常相似的 Web 服务，基于[`ffmpeg`](http://www.ffmpeg.org)：它被称为`tovid.io`— 将用户提供的 mp3 作为视频上传到 YouTube，使用上传的图像文件作为视觉轨道。用户上传 mp3 文件，一张图片，然后我们在后台渲染一个视频，并在用户账号下发布到 YouTube。

使用 Linux 命令行 ffmpeg按照[YouTube 规范](https://support.google.com/youtube/answer/1722171?hl=en)渲染 h264 mp4 视频非常容易。如果您对我们的特定命令行感兴趣，请告诉我。

# android - 从android shell在数据库中插入行的有效方法？

> ID：14061874
> 
> 赞同：1
> 
> 时间：2012-12-27T22:02:03.197
> 
> 标签：android, sql, database, shell, sqlite

我正在寻找一种在数据库中有效插入约 200 行的方法，专门使用 android shell。

我正在使用的脚本的相关部分是：

```
while read line
do
    uid=`echo $line " awk '{print($2)}'`
    pkg=`echo $line " awk '{print($1)}'`
    /system/xbin/sqlite3 /mnt/sdcard/apps.db "INSERT INTO app_list values($uid, '$pkg', 0, 0, 0, 0, 0, 0)
done < /data/system/packages.list 
```

此脚本的目标是生成一个包含所有已安装应用程序列表（UID/包名称）的数据库。其他列将在以后使用。

对于约 200 个应用程序，此脚本需要几分钟：每个 sqlite 命令需要约 2 秒才能执行。这应该通过使用事务来大大改善，但我看不出有明确的方法来做到这一点。

任何帮助将不胜感激，

谢谢。

编辑：

回应帖子 #1:
Changed:
`qry=$qry ($uid, '$pkg', 0, 0, 0, 0, 0, 0),`to `qry=$qry" ($uid, '$pkg', 0, 0, 0, 0, 0, 0),"`
and `/system/xbin/sqlite3 /mnt/sdcard/apps.db $qry`to `/system/xbin/sqlite3 /mnt/sdcard/apps.db "$qry;"`
Echoing the last command shows:
`/system/xbin/sqlite3 /mnt/sdcard/apps.db INSERT INTO app_list VALUES (10028, 'com.google', 0, 0, 0, 0, 0, 0), (10048, 'com.google.something', 0, 0, 0, 0, 0, 0), ... (10062, 'com.google.somethingelse', 0, 0, 0, 0, 0, 0);`
这似乎是正确的，但在执行时会输出以下错误：
`SQL error: near ",": syntax error`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:08:58.430

每次命令运行并退出时，每行 2 秒的大部分时间可能都用于启动一个新的 sqlite 实例，因此只需一次添加所有行即可获得很多加速。

您可以[在单个 SQL 查询中插入多行](https://stackoverflow.com/questions/452859/inserting-multiple-rows-in-a-single-sql-query)，因此最好将一个巨大的字符串与所有插入值连接起来。bash 脚本看起来像这样。

```
qry=""
while read line
do
    uid=`echo $line " awk '{print($2)}'`
    pkg=`echo $line " awk '{print($1)}'`
    qry="$qry INSERT INTO app_list VALUES ($uid, '$pkg', 0, 0, 0, 0, 0, 0);"

done < /data/system/packages.list

/system/xbin/sqlite3 /mnt/sdcard/apps.db "$qry;" 
```

编辑：

澄清一下，这个脚本**不**使用“INSERT INTO TBL VALUES (row 1 vals), (row 2 vals), (row 3 vals);” 语法，因为 SQLite 不支持它。

# file - 如何编写一个以字符串形式返回文件内容的 elisp 函数？

> ID：14061875
> 
> 赞同：2
> 
> 时间：2012-12-27T22:02:05.830
> 
> 标签：file, elisp

好吧，标题说明了一切；）。当然，我可以创建一个新缓冲区，`insert-file-contents`放入其中，然后将其放入变量中，终止缓冲区并返回变量 - 但这似乎有点矫枉过正。有没有更好的办法？

注意。我的用例是一个`.emacs`声明`smtpmail-auth-credentials`- 我在某个文件中有我的密码，并且不想`.emacs`再次输入它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T22:27:39.880

我相信在不涉及缓冲区的情况下，没有简单的方法可以做你想做的事。我会像这样使用临时缓冲区：

```
(defun file-contents (filename)
  (interactive "fFind file: ")
  (with-temp-buffer
    (insert-file-contents filename)
    (buffer-substring-no-properties (point-min) (point-max)))) 
```

`insert-file-contents-literally`虽然如果您不想要格式解码、自动解压缩等，您可能想要使用。

# bash - 运行 eval 命令后控制到下一条语句

> ID：14061876
> 
> 赞同：9
> 
> 时间：2012-12-27T22:02:09.920
> 
> 标签：bash

我编写了一个 bash 脚本来在后台运行服务并从脚本退出到命令行。但是在运行 eval 命令后，控制不会转到下一条语句。

```
COMMAND="nohup java -jar jenkins.war"
echo "starting service"
eval $COMMAND
echo "service running"
exit 
```

echo "service running" 并退出永远不会发生。我想在后台运行该进程，并在服务仍在运行时返回命令提示符。我该怎么做呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T22:08:56.080

请不要将带有参数的命令放在*string*中。将您的命令及其参数放在一个*数组*中（并且不要使用大写的变量名，这是一种非常糟糕的做法），并且**不要使用`eval`**. `eval`是邪恶的！

```
command=( nohup java -jar jenkins.war )
echo "starting service"
"${command[@]}" 2> /dev/null &
echo "service running" 
```

`&`就是让命令在后台运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T22:32:52.697

尝试：

```
command="java -jar jenkins.war"
echo "starting service"
$command </dev/null >jenkins.out 2>jenkins.err &
echo "service running" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T22:07:24.317

在调用末尾添加一个 & 符号：

```
eval $COMMAND & 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T22:05:26.807

eval 不能解决这个问题，你需要'run-in-background' 字符，即'&'（没有引号）。

将您的行重写为

```
 #eval $COMMAND
 $COMMAND & 
```

根据您在 $COMMAND 中真正拥有的其他内容，您可能需要放回`eval`后面。

此外，根据您的需要，在后台运行进程会产生一些`jobs`输出，即

```
[1]     10079 
```

到控制台的标准错误。您需要一些额外的语法将其重定向到 /dev/null。这是一个例子：

```
COMMAND="sleep 10"
{ $COMMAND & ; } 1>/dev/null 2>&1 
```

使用进程组（不`{ .... ; }`应该引起任何问题，但它可能会。

IHTH

# facebook - Facebook Graph Api url 评论和分享计数不再起作用

> ID：14061877
> 
> 赞同：3
> 
> 时间：2012-12-27T22:02:09.793
> 
> 标签：facebook, facebook-graph-api, facebook-comments

我正在为我的博客使用 facebook 评论插件，直到现在，facebook graph api 帮助我检索了我网站上每个帖子的评论数。所以，正如我所说，我一个月前写的帖子，我可以使用 php 和 json_decode 检索评论计数，如下所示：

```
$wsurl  = 'http://www.example.com/title-of-the-post/';
$wsjson = json_decode(file_get_contents('https://graph.facebook.com/?ids='.$wsurl));
$cmcount = ($wsjson->$wsurl->comments) ? $wsjson->$wsurl->comments : 0; 
```

通常，它会导致“评论”行出现。我不知道为什么，但现在，我创建的每个新帖子都没有“评论”和“分享”行。所以，这就是我从[https://graph.facebook.com/?ids=http://www.example.com/title-of-the-post/得到的](https://graph.facebook.com/?ids=http://www.example.com/title-of-the-post/)

旧帖：

```
{
   "http://www.example.com/title-of-the-post/": {
      "id": "http://www.example.com/title-of-the-post/",
      "shares": 6,
      "comments": 6
   }
} 
```

最新帖子：

```
{
   "http://www.example.com/title-of-the-post/": {
      "url": "http://www.example.com/title-of-the-post/",
      "type": "website",
      "title": "Title of the post",
      "image": [
         {
            "url": "http://www.example.com/thumb.png"
         }
      ],
      "description": "This is a great post about great things.",
      "updated_time": "2012-12-25T17:57:03+0000",
      "id": "66666666666666"
   }
} 
```

“评论”行不再显示，我现在有更多信息（一些我不关心的信息）。所以发生了什么事？我根本没有改变我的代码！顺便说一句，我的评论框仍在工作并显示所有评论（我的点赞按钮正确显示“分享”计数）。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T03:25:42.200

对我来说似乎是一个错误。FQL 查询是一种仍然有效的替代方法。这是一个例子：

```
select comment_count, share_count, like_count from link_stat where url = "http://techcrunch.com/2011/04/12/facebook-comments-now-on-over-50k-sites-get-more-social-with-latest-upgrade/" 
```

在此处尝试 API Explorer：http: [//developers.facebook.com/tools/explorer/ ?fql=select%20comment_count%2C%20share_count%2C%20like_count%20from%20link_stat%20where%20url%20%3D%20%22http %3A%2F%2Ftechcrunch.com%2F2011%2F04%2F12%2Ffacebook-comments-now-on-over-50k-sites-get-more-social-with-latest-upgrade%2F%22](http://developers.facebook.com/tools/explorer/?fql=select%20comment_count%2C%20share_count%2C%20like_count%20from%20link_stat%20where%20url%20%3D%20%22http%3A%2F%2Ftechcrunch.com%2F2011%2F04%2F12%2Ffacebook-comments-now-on-over-50k-sites-get-more-social-with-latest-upgrade%2F%22)

但是，如果他们更改 Graph API 以再次返回共享计数和评论计数，我会很高兴。

这个官方的 Facebook 文档 (developers.facebook.com/docs/reference/plugins/comments/) 仍然建议使用 Graph API 来计算评论，但是它似乎不适用于像这样的新页面：[https://graph。 facebook.com/?ids=http://techcrunch.com/2012/12/27/the-last-imac-question-mark/](https://graph.facebook.com/?ids=http://techcrunch.com/2012/12/27/the-last-imac-question-mark/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T17:54:02.863

Facebook 已弃用 FQL。所以，不要使用 fql。您可以使用以下路径获取共享数量

```
http://graph.facebook.com/?id=http://sriraman.in/ 
```

欲了解更多信息，请参阅[http://blog.sriraman.in/url-share-count-facebook-twitter/](http://blog.sriraman.in/url-share-count-facebook-twitter/)

# php - 2012 SQL 连接字符串 500 内部服务器错误

> ID：14061880
> 
> 赞同：-1
> 
> 时间：2012-12-27T22:02:26.517
> 
> 标签：php, sql-server-2012, windows-server-2012

我在 Windows 2012 服务器上使用 SQL 2012 中的数据库。我在使用代码中的连接字符串连接到它时遇到了一些麻烦。我已经通过网络对其进行了测试，并使用 Visual Basic 和 Excel 连接到它，没有任何问题。我很困惑，因为我无法连接到它，而且它与我的代码有关，我敢肯定。多一双眼睛会有所帮助。

```
<?php 
  $database_server = "servername\databaseservername";
  $database_port = "1433";
  $database_authentication = "SQL Server";
  $database_user = "username";
  $database_password = "password";
  $database_name = "DatabaseName";
  $root = $_SERVER["DOCUMENT_ROOT"];
 ?>

<?php 
require_once("includes/inc_files.php");
$current_page = "find";
$filter = coalesce($_GET["filter"], "Events");
$search = coalesce($_GET["search"], "");
$latitude = coalesce($_GET["latitude"], $_SESSION["latitude"], "");
$longitude = coalesce($_GET["longitude"], $_SESSION["longitude"], "");
if (!empty($latitude) && !isset($_SESSION["latitude"])) $_SESSION["latitude"] =
$latitude;
if (!empty($longitude) && !isset($_SESSION["longitude"])) $_SESSION["longitude"] =
$longitude;

$query = preg_replace("#[^a-z 0-9?!]#i", "", $search);
$do_search = false;
if ($filter == "Events" && !empty($latitude) && !empty($longitude)) {
$do_search = true;
$radius = 40;
$sql_columns = "
    Events.ID AS eventid,
    Events.VenueID AS venueid,
    Events.Title AS title,
    Events.EventDate AS date,
    Venues.Name AS venue,
    Venues.City AS city,
    ROUND(dbo.GETDISTANCE(Venues.Lat, Venues.Lon, $latitude, $longitude, 'Miles'), 0) AS distance,
    Venues.ImageName AS photo";
$sql_where = "
    " . (!empty($search) ? "Events.Tags LIKE '%$query%' AND " : "") . "Events.EventDate >= GETDATE() AND CAST(CAST(Events.VenueID AS varchar(10)) AS bigint) IN (
        SELECT ID
        FROM LiveData
        WHERE ROUND(dbo.GETDISTANCE(Lat, Lon, $latitude, $longitude, 'Miles'), 0) BETWEEN 0 AND $radius
    )";
$sql = "
    SELECT $sql_columns
    FROM LiveData AS Events
    INNER JOIN LiveData AS Venues ON CAST(CAST(Events.VenueID AS varchar(10)) AS bigint) = Venues.ID
    WHERE $sql_where";
$query_recordsets = $database_mssql->query($sql);
$query_data = $query_recordsets[0];
$page = !empty($_GET["page"]) ? (int) $_GET["page"] : 1;
$per_page = 20;
$total_count = count($query_data);
$pagination = new Pagination($page, $per_page, $total_count);
$sql = "
    SELECT *
    FROM (
        SELECT  ROW_NUMBER() OVER(ORDER BY Events.EventDate ASC) AS row,
                $sql_columns
        FROM LiveData AS Events
        INNER JOIN LiveData AS Venues ON CAST(CAST(Events.VenueID AS varchar(10)) AS bigint) = Venues.ID
        WHERE $sql_where
    ) AS a
    WHERE row >= {$pagination->offset()} AND row < {$pagination->offset()} + $per_page";
$query_recordsets = $database_mssql->query($sql);
$query_data = $query_recordsets[0];
}
else if ($filter == "People") {
$do_search = true;
$sql = "
    SELECT  username,
            first_name,
            last_name,
            country
    FROM users
    WHERE username LIKE '%$query%' OR CONCAT(first_name, ' ', last_name) LIKE '%$query%'";
$query_data = User::find_by_sql($sql);
$page = !empty($_GET["page"]) ? (int) $_GET["page"] : 1;
$per_page = 20;
$total_count = count($query_data);
$pagination = new Pagination($page, $per_page, $total_count);
$sql .= " LIMIT $per_page OFFSET {$pagination->offset()}";
$query_data = User::find_by_sql($sql);
}
?> 
```

我在内部托管所有这些并将其推送到网络上。当我在浏览器中使用 localhost 查看它时，我收到 500 内部服务器错误。

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:14:21.963

Just to add an answer to this thread, it looks like IIS and MSSQL 2012 were installed incorrectly. There was a conflict with the database port as well. MySQL and MSSQL were both using port 1433.

# msmq - 未收到 MassTransit 消息

> ID：14061887
> 
> 赞同：1
> 
> 时间：2012-12-27T22:03:00.340
> 
> 标签：msmq, masstransit

我正在使用 MassTransit 2.7.0 版在 Web 服务和网站之间进行通信。Web 服务发布消息，网站订阅它们。

发布服务：

```
 ServiceBus = ServiceBusFactory.New(sbc =>
        {
            sbc.UseMsmq();
            sbc.VerifyMsmqConfiguration();
            sbc.ReceiveFrom("msmq://localhost/publisher");
            sbc.UseMulticastSubscriptionClient();
        }); 
```

订户网站：

```
 ServiceBus = ServiceBusFactory.New(sbc =>
        {
            sbc.UseMsmq();
            sbc.VerifyMsmqConfiguration();
            sbc.ReceiveFrom("msmq://localhost/website");
            sbc.UseMulticastSubscriptionClient();

            sbc.Subscribe(s =>
                {
                    s.Handler<SomethingHappened>(HandleSomethingHappened);
                });
        }); 
```

在我的开发机器上一切正常，但在实时站点上却不行。消息显示在 website_subscriptions MSMQ 队列中，但它们没有被订阅的网站接收。服务器确实有多个 NIC，所以我添加[了注册表设置来支持它](http://docs.masstransit-project.com/en/latest/troubleshooting/index.html)。我没有收到任何错误或任何东西 - 它只是没有从队列中提取消息。

我错过了一些配置或权限问题吗？有什么方法可以查看为什么它不起作用？

**[编辑]** 我刚刚注意到 website_subscriptions 队列是来自框架的所有消息：AddPeerMessage 和 AddPeerSubscriptionMessage。来自服务的所有消息（上例中的 SomethingHappened）都在错误队列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:45:00.343

您可以尝试设置 Log4Net 或 NLog 集成以查看 MassTransit 中发生的情况。他们在记录大量有用的故障排除信息方面做得很好。

# java - SciTE Java 运行子包

> ID：14061893
> 
> 赞同：1
> 
> 时间：2012-12-27T22:03:26.923
> 
> 标签：java, packages, scite

我目前正在使用 SciTE 编写少量的 Java。只有学习语言基础等的东西。目前我有一个基本目录，Java，一个子目录，练习，它有 2 个子目录，运行和测试。当我在 SciTE 中使用“build”命令时，我已经设法将其设置为工作。但是我无法运行的是要运行的 Java\practice\testing\ModelTester 类（practice.testing 包）。我收到 NoClassDefFoundException 和错误名称消息。

我知道问题是我需要运行：

```
java practice.testing.ModelTester 
```

但是如何将它放入 SciTEDirectory.properties 的 command.go.*.java 部分（在 Java 目录中）。显然，我想在 command.go.*.java 中加入一些可以应用于我可能在包中运行的任何 Java 文件的内容。

# git - 无法在 git 中变基

> ID：14061895
> 
> 赞同：0
> 
> 时间：2012-12-27T22:03:59.523
> 
> 标签：git

当我创建一个新分支时，Master 最近的提交是 A。

在我创建了一个新分支之后，对 Master 进行了一些更改，所以现在 master 上的最新提交是 B。

我对我的分支做了一些提交，我 fork 上的最新提交是 C。

现在我将分支硬重置为“A”并使用“git fetch --all”获取所有更改。

当我执行“git rebase upstream/master”时，它显示出一些冲突？为什么会这样？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:24:12.920

您已在两个流中修改了同一行。git 不可能知道你想做什么。无论您是变基还是合并，都是如此。使用 rebase，您正在重放更改，但更改所期望的文档的原始部分不匹配。Git 不会随意这样做。但是，如果这是您的意图，您可以选择合并策略并使用“我们的”来始终覆盖不匹配。然而，这不是默认行为。

如果您认为更改是微不足道的，例如空格或大括号的位置，使用像 Beyond Compare 3 这样的语法感知合并工具将帮助您快速解决冲突。

如果您计划继续根据后续的中心更改重新调整这项工作，请启用 rerere 并且它是自动更新的。这将确保以相同的方式自动为您解决相同的冲突。

# android - 如何在eclipse中为文件输入流添加文件路径

> ID：14061896
> 
> 赞同：0
> 
> 时间：2012-12-27T22:03:59.107
> 
> 标签：android, eclipse, filepath

我正在使用带有 android adt 的 eclipse。我正在尝试初始化文件输入流，该文件位于我项目文件夹中的工作区文件夹中。现在我不知道 eclipse 假设什么是项目的根。我不断收到未找到文件的异常。我也将文件放在 src 文件夹中，然后放在 src/com/.... 文件夹中，其中包含所有活动 java 文件，但徒劳无功。我也尝试给出绝对路径，但出现错误：

```
 /C:/Users/hp/Desktop/events.ics: open failed 
```

我读过类似的问题，但不知何故，它不起作用。任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:13:56.273

> 我正在尝试初始化文件输入流，该文件位于我项目文件夹中的工作区文件夹中。

您的开发机器不是 Android 设备。因此，该文件不会位于 Android 设备的文件系统中。

如果您希望将文件与您的应用程序一起打包，您可以将其作为资产或作为原始资源进行。您可以在文档中阅读更多关于`assets/`和`res/raw/`项目目录[的信息](http://developer.android.com/tools/projects/index.html)。

# sqlite - 如何在 ormlite 中设置 SQLITE_CONFIG_SERIALIZED

> ID：14061899
> 
> 赞同：0
> 
> 时间：2012-12-27T22:04:04.473
> 
> 标签：sqlite, ormlite

我在我的 android 应用程序中使用 Ormlite 和 SQLite。该应用程序有多个线程访问数据库。如何在 ormlite 中启用 SQLITE_CONFIG_SERIALIZED？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:30:28.387

You may be able to use the raw methods in the Daos to send commands to the underlying Sqlite database:

```
http://ormlite.com/docs/raw-update 
```

Maybe something like:

```
fooDao.executeRaw("SQLITE_CONFIG_SERIALIZED;"); 
```

But it seems for this to work the Android Sqlite needs to be built a certain way:

```
http://sqlite.org/c3ref/c_config_getmalloc.html 
```

# ios - Xcode 中的奇怪错误：代码签名操作失败

> ID：14061900
> 
> 赞同：1
> 
> 时间：2012-12-27T22:04:06.093
> 
> 标签：ios, xcode, signing

![这是我尝试将我的应用上传到 AppStore 时出现的对话框](../Images/1a0b05ebeafd1765c826aa1139935bd9.png)

这是我尝试将我的应用上传到 AppStore 时出现的对话框

我在 xcode 中的代码设计如下所示：

![在此处输入图像描述](../Images/5b23f188124d2e55ccec7bdd21df0fa1.png)

我一直在重新下载分发证书和配置文件。我也多次重新安装xcode。

以前遇到过这个错误的任何其他人吗？

请帮我 ：-）

顺便说一句，我正在使用 xcode 4.5.2

# sql - 具有不同 ID 的列的总和？

> ID：14061901
> 
> 赞同：2
> 
> 时间：2012-12-27T22:04:08.517
> 
> 标签：sql, sqlite

我有一个有多个 ID 的表，需要一个查询来返回每个 ID 的列的总和。Calls_table 看起来像这样

```
EmployeeID    TypeOfCall    InvoiceAmount 
John          NC             50
john          NC             100
Joe           NC             76
Joe           NC             50 
```

我有它，所以我现在必须由员工来做

```
SELECT sum(InvoiceAmount/2) as "Total Calls" 
from Calls
where TypeOfCall='NC' and EmployeeID='Derek'; 
```

但我希望它能够像这样返回列表中的所有 ID

```
Total Calls
Joe              100
John             68 
```

我确定我需要使用 Distinct 参数，但无法弄清楚在哪里

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T22:07:01.743

您需要使用 group by 关键字

```
Select EmployeeID, SUM(InvoiceAmount) 
From Calls
Group by EmployeeID 
```

您甚至可以更进一步，按呼叫类型和 EmployeeID 分组，如下所示：

```
Select EmployeeID, TypeOfCall, SUM(InvoiceAmount) 
From Calls
Group by EmployeeID, TypeOfCall 
```

执行此操作时，您选择的字段需要是聚合函数（sum、count、avg 等）或在 Group by 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:08:09.433

```
SELECT EmployeeID, SUM(InvoiceAmount/2)
FROM Calls
WHERE TypeOfCall='NC'
GROUP BY EmployeeID 
```

# math - 整数乘法是否使用双精度浮点数精确到 2^53？

> ID：14061903
> 
> 赞同：5
> 
> 时间：2012-12-27T22:04:11.683
> 
> 标签：math, floating-point, linear-algebra, lapack, double-precision

我问是因为我正在计算所有矩阵值都是整数的矩阵乘法。

我想使用 LAPACK 以便获得正确的快速代码。存储为 s 的两个大整数（其乘积小于`2^53`）`double`在相乘时会产生`double`包含精确整数结果的 a 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T22:11:34.880

你的分析是正确的：

*   ^(-2 53)和 2 ^(53)之间的所有整数都可以用双精度精确表示。
*   IEEE754 标准要求精确执行计算，然后四舍五入到最接近的可表示数字。

因此，两个值的乘积等于该范围内的整数，因此将被精确表示。

**参考**： [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。关键部分是讨论与操作有关的 IEEE 标准。这包含上面第二个要点的陈述。您已经知道第一个要点，而第二个要点完成了论证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T22:12:40.517

是的！double 的数据分为符号、指数和分数：

[维基百科有一篇文章解释了可表示数字的范围](http://en.wikipedia.org/wiki/Double_precision#IEEE_754_double-precision_binary_floating-point_format:_binary64)

> ![双字节](../Images/ae68d4bbd4b3a613210f3baccea5a608.png)
> 
> -2^53 和 2^53 之间的所有整数都可以双精度表示。
> 
> 在 2^52=4,503,599,627,370,496 和 2^53=9,007,199,254,740,992 之间，可表示的数字恰好是整数。对于下一个范围，从 2^53 到 2^54，所有内容都乘以 2，因此可表示的数字是偶数等。相反，对于从 2^51 到 2^52 的上一个范围，间距为 0.5 ， ETC。

# requirejs - 十字路口和requirejs

> ID：14061911
> 
> 赞同：0
> 
> 时间：2012-12-27T22:04:48.250
> 
> 标签：requirejs

我无法使用带有 requirejs 的十字路口来匹配路线。好吧，它可能与requirejs无关，只是想我会提到它。

这就是我的代码的样子：

```
require.config({
    shim: {
        /* use shims to define dependencies for modules. e.g.,
        'jquery.colorize': ['jquery'],
        'jquery.scroll': ['jquery'],
        */
        'crossroads': ['signals', 'can']
    },
    paths: {
        "jquery": "http://code.jquery.com/jquery-1.8.2",
        "can": "/scripts/can/amd/can",
        "can.fixture": "/scripts/can/amd/can/util/fixture",
        "signals": "/scripts/signals/signals",
        "crossroads": "/scripts/crossroads/crossroads"
    }
});

require(['jquery', 'crossroads', 'controllers/project'], function ($, crossroads, projectController) {
    var projectRoute = crossroads.addRoute('projects', function () {
        $(document).ready(function () {
            console.log('projects ready');
            $.when(ProjectModel.findAll()).then(function (projectResponse) {
                var projects = new SortList(projectResponse);
                console.log('doc ready projects=', projects);

                new ProjectsControl('#projects', {
                    projects: projects,
                    defaultSort: 'priority'
                });
            });
        });
    })
    console.log('matched: ', projectRoute.match(window.location.href));
}); 
```

它试图匹配的 url`http://localhost:34382/projects`和 console.log 的输出是“matched: false”

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:28:31.427

我发现我需要更改我匹配的内容。我改变了这条线

```
console.log('matched: ', projectRoute.match(window.location.href)); 
```

对此

```
console.log('matched: ', projectRoute.match(window.location.pathname + window.location.search)); 
```

现在它可以工作了。

还意识到您必须在某处显式调用 crossroads.parse() 才能使其工作（或者我错过了什么？）

所以在我的 require 函数结束时，我调用它并找到我的路线

```
crossroads.parse(window.location.pathname + window.location.search); 
```

另外，如果有人想知道，我使用[CanJS](http://canjs.us/)作为客户端 MVC 框架，使用 ASP.NET MVC4 作为服务器端。

# c++ - C ++中未知类型的宏

> ID：14061917
> 
> 赞同：2
> 
> 时间：2012-12-27T22:05:33.773
> 
> 标签：c++, macros

在查看用 C++ 编写的软件 (openFOAM) 的语言时，我注意到了一些东西。就像，

```
field value; 
```

例如，

```
temperature 25; 
```

我想知道这是如何工作的。我的意思是如何在不使用等号的情况下将温度设置为 25。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:27:48.943

因为 openFOAM 有一个解析器可以理解这种格式。

这样的解析器并不难制作，而 C++（在 yacc、bison 等解析器生成器工具的帮助下）是解析器的流行选择，因为它可以非常快。

C++ 是图灵完备的语言，因此它可以做任何其他语言可以做的任何事情。具体来说，它可以处理看起来不像 C++ 代码的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:34:27.687

编程语言通常是上下文无关的。如果语言是上下文无关的，它可以被解析（我不会说它是微不足道的，但这是一个以前已经解决过很多次的问题，如果你学习编译器类，你将不得不为简单的语言做它）。

解析器只是在寻找格式的声明`field value;`。似乎没有发生类型检查，所以它只是在分号上拆分然后在空格上。如果您有兴趣了解解析源代码，请阅读有关解析无上下文语言、下推自动机和无上下文语法的内容。

# android - Android Play 商店 - 提交第一个版本的日期

> ID：14061922
> 
> 赞同：7
> 
> 时间：2012-12-27T22:06:35.437
> 
> 标签：android, google-play

对于具有多个版本的应用程序，是否有办法判断第一个版本何时发布到 Google Play 商店？看来我只能找到上次提交版本的日期..

（这可能属于另一个堆栈，但作为开发人员，我正在尝试跟踪我的一个应用程序的各种版本的 Play 商店时间线......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T22:22:38.817

有一个新的 Google Play 开发者控制台应该显示你所有 apk 的上传日期。但是，对于我们的应用程序来说，除了最新的数据之外，所有数据似乎都丢失了。

[在http://www.appbrain.com](http://www.appbrain.com)上查找您的应用程序并单击“更改日志”选项卡可能会更好。我相信它显示了最近 10 次更新，包括发布日期。那不是它上传的日期，但大概应该很接近。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T17:34:06.260

我还没有找到它。我认为非上传者也不存在某些技术。但这是我的建议。转到特定应用程序的**用户评论**部分。如果应用程序的评论较少，您可以通过查看最早的评论来确定它的大致上传日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T22:12:18.877

我不知道是否有其他方法可以找出，但你可以看看你的统计数据，第一点应该是第一个发布日期：

![在此处输入图像描述](../Images/18c815738cfbf694a2314f05938f7c9c.png)

这假设您将图表的时间设置为全部。

# c - MPI 运行错误“导致所有级别的集体中止”

> ID：14061927
> 
> 赞同：2
> 
> 时间：2012-12-27T22:06:40.510
> 
> 标签：c, mpi

我正在尝试在 C 中使用 MPI 编写并行程序。但是，当我运行我的程序时，我收到该消息并且我的程序被终止。我不知道该错误消息的原因

> > 警告：无法读取 mpd.hosts 或未提供主机列表。MPI 作业将仅在当前机器上运行。
> > 
> > 解决方案正在启动
> > 
> > 作业 1 中的排名 7 server_name_60409 导致所有排名的集体中止 排名 7 的退出状态：返回代码 0
> > 
> > 作业 1 中的排名 6 server_name_60409 导致所有排名的集体中止 排名 6 的退出状态：返回代码 0
> > 
> > 作业 1 server_name_60409 中的 rank 4 导致所有 rank 的集体中止 rank 4 的退出状态：被信号 9 杀死
> > 
> > 作业 1 server_name_60409 中的 rank 3 导致所有 rank 的集体中止 rank 3 的退出状态：被信号 9 杀死
> > 
> > 作业 1 server_name_60409 中的 rank 2 导致所有 rank 的集体中止 rank 2 的退出状态：返回代码 0
> > 
> > 作业 1 server_name_60409 中的 rank 0 导致所有 rank 的集体中止 rank 0 的退出状态：返回代码 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T15:25:44.893

我的程序因类似的通信而中止：

```
rank 3 in job 58409  vnode-01_39157   caused collective abort of all ranks
  exit status of rank 3: killed by signal 9 
rank 1 in job 58409  vnode-01_39157   caused collective abort of all ranks
  exit status of rank 1: killed by signal 11 
```

由于分配的堆栈内存过多。
切换到堆有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T03:07:29.243

如果`MPI_Finalize()`使用后遗漏了`MPI`，也会产生如下错误：

> 作业 98 n01_44763 中的等级 3 导致所有等级的集体中止
> 等级 3 的退出状态：返回代码 0

# c# - XAML 中的命名空间错误

> ID：14061929
> 
> 赞同：0
> 
> 时间：2012-12-27T22:06:50.383
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml, windows-store-apps

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="Liz.MainPage"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Liz"
xmlns:common="using:Liz.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Page.Resources>
    <DataTemplate x:Key="TempA">
        <Border Background="Red">
            <TextBlock Text="{Binding Title}" />
        </Border>
    </DataTemplate>
    <DataTemplate x:Key="TempB">
        <Border Background="Blue">
            <TextBlock Text="{Binding Title}" />
        </Border>
    </DataTemplate>

    <common:TemplateSelector x:Key="itemsTemplateSelector"
                         TemplateA="{StaticResource TempA}"
                         TemplateB="{StaticResource TempB}" /> 
```

我正在尝试使用数据模板选择器，但在我的 xmal 中，这行代码中不断出现错误：

错误 1 ​​名称“TemplateSelector”在命名空间“using:Liz.Common”中不存在。

我的 TemplateSelector 类在我的 Common 命名空间中定义如下：

```
namespace Liz.Common
{
public class TemplateSelector : DataTemplateSelector
{
    int count = 0;
    public DataTemplate TemplateA { get; set; }
    public DataTemplate TemplateB { get; set; }

    protected override DataTemplate SelectTemplateCore
        (object item, DependencyObject container)
    {
        if (count % 2 == 0)
        {
            count++;
            return TemplateA;
        }
        else
        {
            count++;
            return TemplateB;
        }
    }
  }
} 
```

关于为什么我不断收到此错误的任何想法？我什至尝试在本地（Liz）命名空间中定义 TemplateSelector，结果相同。注意：intellisence 下拉菜单在使用 common: 时发现 TemplateSelector 名称很好，但是从 intellisence 中选择它后仍然出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:47:34.720

上面的 XAML 没有任何问题。我创建了一个新项目，添加了类并插入了 XAML 片段。XAML 编辑器一开始也报同样的错误，但是构建成功，之后错误就消失了。

[这](https://dl.dropbox.com/u/10676122/Liz.zip)是生成的项目供您检查。

# html - 使用多行图像标题标签时减少行距

> ID：14061932
> 
> 赞同：0
> 
> 时间：2012-12-27T22:06:52.553
> 
> 标签：html, tags, title

我已经为语句创建了一个标题标签，并且正在使用 php 命令并
为标题创建多行。有没有办法减少这些行之间的行距或另一种方法在标题标签中有多行？对于这个多行文本，我需要使用 SIZE 和 LINE-HEIGHT 命令以及其他命令。

这就是我所拥有的：

```
<a href="http://www.mydomain.com/storage/<?php echo $rows['file']; ?>" 
title="<?php echo $rows['field1'].$rows['field2']; echo "<br>";?>line 2
<?php echo "<br>"; ?>Line 3">Click Here</a> 
```

我在 SIZE 的标签中尝试了 STYLE 命令，但它不起作用。我已经尝试完全围绕现有的，但这也不起作用。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:17:13.673

浏览器从属性生成的工具提示`title`不能以 CSS 或任何其他方式设置样式。（字体可以由用户更改，但不能由作者更改。）浏览器应该尊重这些值中的换行符，但这不能指望。

几秒钟后，工具提示也会消失。如果文本有几行长，那真是一场可用性噩梦。

士气是使用基于完全不同技术的“CSS 工具提示”要好得多。（您也可以使用 JavaScript，但它并不是真正需要的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:10:57.083

对于标题文本中的换行符，您只需在值中添加换行符。请参阅[如何在 HTML 工具提示中使用回车符？](https://stackoverflow.com/questions/358874/how-can-i-use-a-carriage-return-in-a-html-tooltip)有关该部分的更多详细信息。不确定是否可以使用 CSS 调整此文本的大小/间距，但可以使用 DIV 标签和一些 jQuery 创建自定义弹出窗口。然后你就可以完全控制它们的外观。也许使用某人已经构建的东西，在[http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/有很多可供选择](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)

# c# - LINQ Where 子句包含列表具有复杂对象的位置

> ID：14061935
> 
> 赞同：9
> 
> 时间：2012-12-27T22:07:07.387
> 
> 标签：c#, linq

我在一个简单的对象列表中看到了很多 LINQ 的示例：

```
var intList= new List<int>() { 1, 2, 3 };
var result = db.TableRecords.Where(c => intList.Contains(c.RecordId)).ToList(); 
```

我正在尝试做的事情似乎稍微复杂一些（我认为）。我有一行与此类似的代码为我提供了我需要的列表：

```
var xzList = db.Relations.Where(r => someOtherList.Contains(r.zId))
                         .Select(r => new { AId = r.xId, BId = r.zId })
                         .ToList(); 
```

现在我想得到与上一个示例类似的结果，但列表现在有一个匿名类型，其中包含两个整数。那么，对于每个匿名类型，我现在如何获得`result`in`RecordId`等于`TableRecords`匿名类型中的 in 的位置？`AId``xzList`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T22:21:11.847

听起来您不确定如何从匿名类型中获取值。您可以使用 GunnerL3510 的解决方案将其转储到列表中，或者您应该能够像这样内联它：

```
var result = 
    db.TableRecords
        .Where(c => xzList.Select(n => n.AId)
            .Contains(c.RecordId))
        .ToList(); 
```

由于您在匿名类型中命名值，因此您可以像引用属性一样引用它们。

如果您更喜欢采用更结构化的方法，则可以使用[此](https://stackoverflow.com/a/534794/947171 "创建一个快速课程")方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T09:43:37.753

像这样的东西：

```
db.TableRecords.Select(c=>c.RecordId).Intercept(xzList.Select(n => n.AId)).Any() 
```

# sql-server-2008-r2 - Sql Server 2008 R2 Web 安装程序在启动 FixSqlRegistryKey_x86.exe 时引发应用程序错误

> ID：14061942
> 
> 赞同：0
> 
> 时间：2012-12-27T22:07:49.153
> 
> 标签：sql-server-2008-r2, windows-7-x64

我有 Windows 7 64 位。我安装了 Sql Server 2008 R2 Express。我卸载了它，然后我尝试安装 Sql Server 2008 R2 Web。不幸的是，在“SQL Server 注册表项的一致性验证”的设置支持规则页面上，我得到了“失败”。我花了半天时间试图解决它，但后来我认为注册表项一定有问题，重新安装 Windows 会更快。

格式化磁盘并重新安装 Windows 7 后，重新启动了几十次，我也安装了所有 Windows 更新。我还安装了一些对 Sql Server 设置没有影响的程序，如 Skype、Thundirbird 等。

然后我再次尝试安装 Sql Server 2008 R2 Web。又是一个错误。有点不一样。现在，当设置在设置支持规则页面上时，我收到一个错误消息框，标题为**“FixSqlRegistryKey_x86 - 应用程序错误”**和内容：**应用程序无法正确启动（0xc000007b）。单击确定关闭应用程序。**“SQL Server 注册表项的一致性验证”也获得“失败”状态。

我的队友和我的机器一模一样。他安装没有问题（他甚至不需要重新安装Windows）。

我从本地文件夹以管理员身份运行设置。我什至尝试使用从我的队友那里复制的设置文件，以防我的副本损坏。在设置选项中，我选择了“x64”版本。

有什么想法可能是问题的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:43:44.937

问题解决了。有人建议我不要在 Win 7 上安装 Web 版（仅在 Windows Server 上）。所以也许安装一个不同的版本会起作用。我的队友可能成功了——因为已经在速成版中安装了 sql server ......但这只是一个猜测。在我尝试安装另一个版本的 SqlServer 之前，我下载了 2008 Express 版本并开始安装。从快速版创建的临时文件夹中，我复制了 FixSqlRegistryKey_x86.exe 文件，并用该文件覆盖了 Web 设置中的问题文件。我再次开始设置。这次通过了验证。但后来崩溃了 - 安装程序将安装文件解压缩到 C:\Program Files\Microsoft SQL Server\100\Setup Bootstrap\SQLServer2008R2 并从中运行。所以我需要再次覆盖这个位置的有问题的文件。现在安装成功了。

# maven - intellij 的想法。什么图书馆使用项目？

> ID：14061944
> 
> 赞同：2
> 
> 时间：2012-12-27T22:08:02.413
> 
> 标签：maven, intellij-idea, libraries

我有 Android Maven 项目，它与 Netbeans 和 Eclipse 一起工作，并在命令行本身编译，但我对**Intellij Idea**有一些问题。导入项目后，IDE 抱怨导入方法不存在：

```
import org.w3c.dom.Node; 
cannot find symbol
symbol  : method getTextContent() 
```

`getTextContent()`java 1.5版本新增的方法。我确实使用 1.7 Oracles JDK。以点为单位构建目标`pom.xml`到 1.5

[此处](http://tinyurl.com/d73hzub)提到的关于 Eclipse 中问题的类似帖子说：有许多 jars 用 xml-apis 打包，它们有时包含相同的库例程，但版本不同。

我已经搜索了如何查找与 IDE 一起使用的库版本以及如何确定正确库的优先级。

有人有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:54:41.290

在 intellij 中转到模块设置（右键单击模块及其在上下文菜单中）。

选择项目，您可以在此处选择和/或添加项目 SDK，如果您使用的是 1.7，则可能是该版本。

当您制作/编译您的项目时，它可能会针对上述版本运行。

您可以运行 maven 目标（在我的版本中，右侧有一个选项卡）如果您右键单击 pom 文件，您应该能够执行此操作，这应该可以编译。

总之，在你的 pom 和你的项目中使用相同的 java 版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:21:26.950

尝试向上移动 Android SDK 模块。在“项目结构”->“模块”->“依赖项”中。并确保那里没有旧的 maven 模块 xml-apis。

# node.js - 部署到 Heroku 或 Nodejitsu 时出现 CompoundJS 错误

> ID：14061946
> 
> 赞同：3
> 
> 时间：2012-12-27T22:08:18.357
> 
> 标签：node.js, heroku, nodejitsu, railway.js

我正在尝试将一个compoundjs（又名railwayjs）部署到Heroku 或Nodejitsu，作为我对NodeJS 的第一个端到端测试。

脚步

1.  节点安装：0.8.16
2.  Heroku 工具安装
3.  npm 安装复合 -g (v1.1.4-1)
4.  [CompoundJS 的 Heroku 指南](http://compoundjs.com/docs/#heroku-heroku)中描述的示例 heroku 应用程序

    ```
    compound init heroku-app
    cd heroku-app
    sudo npm link
    compound g crud post title content 
    ```

5.  packages.json 中的调整：添加引擎如下

    ```
    "engines": {
      "node": "0.8.x",
      "npm": "1.1.x"
    }, 
    ```

6.  工头开始 -> 应用程序完美运行

7.  git 添加并提交
8.  git push heroku 大师
9.  heroku ps:scale web=1 （仅第一次）

之后，应用程序被部署并可以通过 heroku 的测试主机访问。应用程序索引工作正常，但 尝试创建新博客文章时显示[错误页面。](http://pastebin.com/H1WEdd9c)

根据其他报告，此问题与依赖项版本有关。根据 git push 输出到 heroku，正在使用以下版本：

```
 Resolving engine versions
   Using Node.js version: 0.8.14
   Using npm version: 1.1.65
   ....
   (main dependencies)
   npm http GET https://registry.npmjs.org/ejs/-/ejs-0.8.3.tgz
   npm http GET https://registry.npmjs.org/coffee-script/-/coffee-script-1.4.0.tgz
   npm http 200 https://registry.npmjs.org/seedjs
   npm http GET https://registry.npmjs.org/seedjs/-/seedjs-0.0.4.tgz
   npm http 200 https://registry.npmjs.org/compound
   npm http 200 https://registry.npmjs.org/ejs-ext/-/ejs-ext-0.1.4.tgz
   npm http 200 https://registry.npmjs.org/express
   npm http GET https://registry.npmjs.org/compound/-/compound-1.1.4-1.tgz
   npm http GET https://registry.npmjs.org/express/-/express-3.0.5.tgz
   npm http 200 https://registry.npmjs.org/jugglingdb
   npm http 200 https://registry.npmjs.org/stylus
   npm http 200 https://registry.npmjs.org/ejs/-/ejs-0.8.3.tgz
   npm http GET https://registry.npmjs.org/jugglingdb/-/jugglingdb-0.2.0-9.tgz
   npm http GET https://registry.npmjs.org/stylus/-/stylus-0.31.0.tgz
   npm http 200 https://registry.npmjs.org/coffee-script/-/coffee-script-1.4.0.tgz
   npm http 200 https://registry.npmjs.org/seedjs/-/seedjs-0.0.4.tgz
   npm http 200 https://registry.npmjs.org/stylus/-/stylus-0.31.0.tgz
   npm http 200 https://registry.npmjs.org/express/-/express-3.0.5.tgz
   npm http 200 https://registry.npmjs.org/compound/-/compound-1.1.4-1.tgz 
```

部署到 nodejitsu 时我面临同样的问题（完全相同）。任何想法 ？我指的是特定的依赖项版本，所以我认为这个问题与服务器中使用的过时依赖项无关。

谢谢。

更新 Nodejitsu 相关信息：

Nodejitsu 登录 jitsu 部署

```
 info:    Welcome to Nodejitsu storni
   info:    jitsu v0.11.4, node v0.8.16
   info:    It worked if it ends with Nodejitsu ok
   info:    Executing command deploy
   info:    Analyzing application dependencies in server.js
   warn:    Local package version appears to be old
   warn:    The package.json version will be incremented automatically
   warn:    About to write F:\repo\mine\last-jitsu-test\package.json
   data:
   data:    {
   data:        scripts: { test: 'nodeunit test/*/*', start: 'server.js' },
   data:        name: 'last-jitsu-test',
   data:        version: '0.0.1-5',
   data:        dependencies: {
   data:            coffee-script: '>= 1.1.1',
   data:            stylus: '0.31.0',
   data:            seedjs: '0.0.4',
   data:            compound: '1.1.4-1',
   data:            ejs-ext: '0.1.4',
   data:            express: '3.0.5',
   data:            ejs: '0.8.3',
   data:            jugglingdb: '>= 0.1.0'
   data:        },
   data:        devDependencies: {
   data:            sinon: '*',
   data:            semicov: '*',
   data:            nodeunit: '*'
   data:        },
   data:        subdomain: 'storni.last-jitsu-test',
   data:        main: 'server.js',
   data:        engines: { npm: '1.1.x', node: '0.8.x' }
   data:    }
   data:
   prompt: Is this ok?:  (yes)
   info:    Creating snapshot 0.0.1-5
   info     Uploading: [=============================] 100%
   info:    Updating app last-jitsu-test
   info:    Activating snapshot 0.0.1-5 for last-jitsu-test
   info:    Starting app last-jitsu-test
   info:    App last-jitsu-test is now started
   info:    http://storni.last-jitsu-test.jit.su on Port 80
   info:    Nodejitsu ok 
```

storni.last-jitsu-test.jit.su/items -> 工作正常 storni.last-jitsu-test.jit.su/items/new -> 显示与 Heroku 部署相同的错误页面。

在这种情况下，我用香草在本地进行了测试

```
 node server.js 
```

# php - Web 主机升级后 RewriteRule 不再工作

> ID：14061949
> 
> 赞同：1
> 
> 时间：2012-12-27T22:08:47.587
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我的虚拟主机最近将他们的 PHP 升级到了新版本，现在我的一个重定向不再有效。

现在不起作用的重定向是：

```
RewriteRule toppers/i-(.*)/n-(.*).html$ toppers.php?i=$1&n=2 
```

我觉得很奇怪，因为我所有其他类似的规则仍然有效。

这是我的完整 .htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule toppers/i-(.*)/n-(.*).html$ toppers.php?i=$1&n=2
RewriteRule classes/i-(.*)/n-(.*).html$ classes.php?i=$1&n=2
RewriteRule news/i-(.*)/n-(.*)\.html$ news.php?i=$1&n=2

RedirectMatch 301 ^/cake-topper-pictures-pages/(.*) http://www.caketopper.co.uk/wedding-toppers.php
RedirectMatch 301 ^/cake-topper-picture-pages/(.*) http://www.caketopper.co.uk/wedding-toppers.php
RedirectMatch 301 ^/Cake-Topper-Pictures-Pages/(.*) http://www.caketopper.co.uk/wedding-toppers.php
RedirectMatch 301 ^/feedback-topper-pages/(.*) http://www.caketopper.co.uk/toppers/i-1/n-Couple-on-red-dragon.html
RedirectMatch 301 ^/feedback-toppers/(.*) http://www.caketopper.co.uk/toppers/i-1/n-Couple-on-red-dragon.html

ErrorDocument 404 /404.html 
```

可能出了什么问题，我该如何解决？

* * *

为了验证它不是 PHP 文件，我尝试过：

```
echo $topperId = $_GET['i'];
echo $topperName = $_GET['n']; 
```

我没有从 URL 中得到任何回应。

* * *

选项 +FollowSymLinks RewriteEngine on

RewriteCond %{REQUEST_URI} toppers/i-(. *)/n-(.* ).html [NC] RewriteRule .* toppers.php?i=%1&n=%2 [L,NC]

RewriteCond %{REQUEST_URI} classes/i-(. *)/n-(.* ).html [NC] RewriteRule .* classes.php?i=%1&n=%2 [L,NC]

RewriteCond %{REQUEST_URI} news/i-(. *)/n-(.* ).html [NC] RewriteRule .* news.php?i=%1&n=%2 [L,NC]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:29:33.757

正如@jeroen 所说，它可能是 php.ini 文件。尝试用类似的东西替换整个文件

```
<?php
die('Got to PHP');
?> 
```

这将确定您是否正在访问 php.ini。如果您关闭了 display_errors 并出现解析错误或其他问题，您可以将显示的代码放在顶部，但仍然会出现空白屏幕。

# ios - 点击/单击图形对象活动不一致 - Facebook iOS

> ID：14061953
> 
> 赞同：0
> 
> 时间：2012-12-27T22:08:59.683
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

我最近在我的一个 iOS 应用程序中实现了开放图。目前，它发布了一个自定义活动，当点击该活动时，它会显示有关该活动的更多信息。

这似乎适用于大多数用户。但是，我收到了一些报告，当他们点击/点击发布的活动时，它只是将他们定向到应用程序的 Facebook 页面。

有没有其他人经历过这种不一致？我无法弄清楚发生了什么。

# iphone - 从 App Delegate 检测 Cocos2D 场景中的变化

> ID：14061960
> 
> 赞同：0
> 
> 时间：2012-12-27T22:09:32.373
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

如何从 App Delegate 检测场景变化？我有一个主菜单，它有一个使用 cocos2D 的菜单系统链接到第二页的按钮。

当用户按下按钮时，我将场景从 MenuScene 过渡到 GameScene。

是否可以从应用程序委托中检测到这种转换，以便我可以在场景转换时运行一些代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:14:48.733

您可以使用通知来通知场景已转换。在你的 appdelegate 的某个地方，监听通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doSomethingAfterTransition) name:@"sceneTransitioned" object:nil]; 
```

在您的 GameScene 的 onEnterTransitionDidFinish 方法中，您可以发布此通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"sceneTransitioned" object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:15:49.137

解决方案可能是在每次更改场景时发布通知。

应用程序委托应注册该通知并在每次场景更改时接收通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T23:14:49.770

你能使用已经内置在 CCNode 对象中的回调吗（CCScene 源自 CCNode）... 下面从 CCNode 复制粘贴来自 2.0 版，但我相信这些方法可以追溯到很久以前。任何 coco 'onSomething' 方法，如果你重写它，不要忘记 [super onSomething]，否则你的里程会有所不同:)

```
/** Event that is called when the CCNode enters in the 'stage'.
 If the CCNode enters the 'stage' with a transition, this event is called when the transition finishes.
 If you override onEnterTransitionDidFinish, you shall 
 call [super onEnterTransitionDidFinish].
*/

-(void) onEnterTransitionDidFinish;

/** callback that is called every time the CCNode leaves the 'stage'.
 If the CCNode leaves the 'stage' with a transition, this callback is called 
 when the transition starts.
 */
-(void) onExitTransitionDidStart; 
```

# mysql - 在第 4 行的“ORDER BY date DESC LIMIT 1”附近使用的正确语法

> ID：14061962
> 
> 赞同：-5
> 
> 时间：2012-12-27T22:09:36.550
> 
> 标签：mysql, php

我不断收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“ORDER BY date DESC LIMIT 1”附近使用正确的语法

```
function printSoldiersOfRank($rank, $branch)
{
  $soldier = new soldierClass;
  $sql = "SELECT * FROM soldier WHERE rank = $rank AND branch = '$branch'";
  $result = mysql_query($sql);
  while($row = mysql_fetch_array($result)):
    $soldier->getInfo($row['sID']);
    $soldier->printInfo(); 
  endwhile;

function printInfo()
  {
    $sql = "SELECT promoter, name, date
    FROM soldier s, log l
    WHERE s.sID = l.promoter AND l.promotee = $this->sid
    ORDER BY date DESC LIMIT 1";
    $result = mysql_query($sql) or die(mysql_error());
    $row = mysql_fetch_array($result);
    echo "<div class='soldierInfo'>";
    echo "<a href='index.php?page=soldier&sid=$this->sid'>";
    echo $this->name;
    echo "</a><br />";
    echo "Last Promoted: ";
    echo date("d M Y", $row['date']);
    echo "<br />By: <a href='index.php?page=soldier&sid=$row[0]'>";
    echo $row['name'];
    echo "</a></div>";
  } 
```

我假设错误在我的`printInfo()`函数中。感谢所有帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:35:41.640

不要假设错误在任何地方。而是创建一条错误消息，为您提供调试所需的所有信息。这是一个例子。

```
$sql = 
"
SELECT promoter, name, date
FROM soldier s, log l
WHERE ( s.sID = l.promoter AND l.promotee = $this->sid )
ORDER BY date DESC 
LIMIT 1
"
;

$result = mysql_query($sql);
if (!$result)
{
    echo PHP_EOL;
    echo "<br/>";
    echo "FAILED QUERY $sql";
    echo "<br/> ON ";
    echo __LINE__;
    echo " IN ";
    echo __FILE__;
    echo "<br/>";
    echo " BECAUSE ";
    die(mysql_error());
} 
```

如果您使用类似的东西，您将能够确定地看到失败的查询和失败的位置。就目前而言，您有一个使用“ORDER BY date DESC”的查询和一条显示“ORDER BY name ASC”的错误消息，所以我想知道我们是否正在查看正确的脚本！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:46:16.680

尝试这个：

```
$sql = "SELECT promoter, name, date
    FROM soldier s, log l
    WHERE s.sID = l.promoter AND l.promotee = '".$this->sid."'
    ORDER BY date DESC LIMIT 1"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T22:48:58.487

日期是一个变量类型。尝试用 `` 将名为 'date' 的字段括起来

例子。

```
set @soldierId = 1 ;

SELECT promoter, name, `date`
    FROM soldier s, log l
    WHERE s.sID = l.promoter AND l.promotee = @soldierId
    ORDER BY `date` DESC LIMIT 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T23:33:03.960

当您收到来自 MySQL 的 SQL 语句的错误消息时，例如

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第**n**行的“ **xxxx** ”**附近使用正确的语法**

 ****你必须留意你在“xxxx”**之前的陈述。**

SQL Parser 由于错误而停止解析语句，并告诉您此（停止）发生在哪一行以及未解析语句的其余部分是什么。

在这种情况下，语句（由 MySQL 接收）将如下所示（`$this->sid`不包含任何内容）

```
SELECT promoter, name, date
FROM soldier s, log l
WHERE s.sID = l.promoter AND l.promotee = 
ORDER BY date DESC LIMIT 1 
```

试一试，您将收到相同的错误消息。

您应该`$this->sid`在查询之前检查是否包含有用的内容。

顺便说一句：使用参数化语句也会让你摆脱这个特殊的陷阱（以及其他几个陷阱）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T22:38:55.473

因为你当时没有说你的桌子

通过别名分配您的列

```
 $sql = "SELECT s.`promoter`, s.`name`, s.`date`
                   ^-----------^--------------------------------if they are log table then replace by l
          FROM soldier s, log l
         WHERE s.sID = l.promoter AND l.promotee = '".$this->sid."'

         ORDER BY s.`date` DESC LIMIT 1";
                  ^--------------------------------look what table the date is. 
```

我只是猜测并做出了`soldier`如果它的`log`桌子然后改变那里的`s`地方`l`

并在 backtiks 之间创建日期，因为 date 是 mysql 的保留字****

# java - 完成时执行目标

> ID：14061963
> 
> 赞同：1
> 
> 时间：2012-12-27T22:09:51.713
> 
> 标签：java, ant

执行完成后有什么方法可以执行目标吗？我有一组目标，每个目标都可以从命令行调用。执行完成后，我需要执行一些清理目标。

我可以使用`antcall`，但是为每个目标编写一个很麻烦。有没有更方便的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:39:19.753

在stackoverflow上有[类似的问题。](https://stackoverflow.com/questions/11830542/ant-start-target-after)所以总的来说，是的，你有两种可能性：

*   利用`antcall`
*   创建另一个取决于您的目标和您的“干净”目标的目标。

关于 antcall 的可用性：您需要能够指定您应该在哪个目标之后执行该目标，无论如何您都无法避免它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T07:21:18.887

只是另一种方法。

编写一个自定义的 ant 任务，其中：

扩展 Ant 的`Task`，实现`BuildListener`or`SubBuilderListener`接口，

```
public class ListenerTask extends Task implements SubBuildListener {
} 
```

在方法中调用您指定的目标（或直接用 Java 编写清理代码）`buildFinished`，

```
@Override
public void buildFinished(BuildEvent be) {
    Target target = (Target)getProject().getTargets().get("Name-To-Your-CleanUp-Target");
    // run the target
    target.performTasks();
} 
```

并且，当然，在构建的一开始就将自己注册到项目中。

```
@Override
public void execute() throws BuildException {
    // addBuildListener will check if the listener has been added
    getProject().addBuildListener(this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T10:52:50.790

最简单的方法是使用默认目标来执行所需的执行顺序

```
<project name="demo" default="build">
    ..
    ..
    <target name="build" depends="init, do-something, do-something-else, clean"/>

</project> 
```

# linker - 静态编译一个android程序

> ID：14061967
> 
> 赞同：1
> 
> 时间：2012-12-27T22:10:32.777
> 
> 标签：linker, android-ndk, arm

我正在尝试在挂载 /system 之前将某些内容写入 dmesg 日志。
我的麻烦是，为了写入 dmesg（在 android 上），我需要使用特定于 android 的东西，而不仅仅是我通常的 crossdev arm 系统。
只是：

```
__android_log_print(ANDROID_LOG_DEBUG, "libnav", "DEBUG - custom program started"); 
```

如果您按以下方式编译它，一切都很好（我在 /var/tmp/android 中创建了一个独立的工具链）：

```
arm-linux-androideabi-gcc --sysroot /var/tmp/android/sysroot -llog -o custom_program custom_program.c 
```

但是上面的命令将构建一个动态链接的可执行文件，如果系统尚未启动，它将运行良好。
“简单，静态编译就行了！” 我想。
android ndk 带有一些库，但 liblog 只是 liblog.so，而不是 liblog.a，那么如何在安装 /system 之前在 dmesg 中记录一些内容？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:10:51.907

使用 arm-unknown-gnueabi-gcc 并
在 fopen 返回的 FILE * 上打开 /dev/kmsg 和 fprintf。
在android运行时运行程序将写入dmesg，但如果在早期启动过程中则不会。为什么？

@auselen 我还修改了 init 来启动这个静态程序：
init.rc 片段

```
on post-fs-data
write /dev/kmsg "launching test"
exec /data/test 
```

我在 dmesg 中看到的就是这个……

```
<4>[    6.336816] launching test
<6>[    6.336902] init: command 'write' r=0
<6>[    6.337115] init: command 'exec' r=-1 
```

这里你是可执行的源代码： http: [//pastebin.com/Hym1APWx](http://pastebin.com/Hym1APWx)

# windows - Lua os.execute 空终端

> ID：14061968
> 
> 赞同：1
> 
> 时间：2012-12-27T22:10:45.273
> 
> 标签：windows, command-line, batch-file, lua, love2d

我有一个程序需要我调用 os.execute 来运行外部程序，但是，当我这样做时，程序运行时会在后台打开一个空终端，这非常痛苦。我想知道是否有办法防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:20:32.857

假设您在 Windows 上，您可以使用[winapi](http://stevedonovan.github.com/winapi/api.html#shell_exec)库，特别`winapi.execute()`是它将运行应用程序而不会弹出终端窗口。

# html - 文本作为链接嵌入到表格中

> ID：14061980
> 
> 赞同：3
> 
> 时间：2012-12-27T22:12:08.627
> 
> 标签：html, ruby

```
def create_email_body_ganglia(array,title,heading1,heading2,heading3,heading4)
  custom_rows =""
  array.each_slice(4) do |row|
  custom_rows << "<tr><td>#{row[0]}</td><td>#{row[1]}</td><td>#{row[2]}</td><td>#{row[3]}</td></tr>"
  end
message = <<MESSAGE_END 
```

我试图动态地形成 html 表，方法是`<td>`从 ruby​​ 代码中的数组中插入元素，然后通过电子邮件发送它。
但是我收到的电子邮件将 html 内容显示为链接，因为我插入的元素是 example.com 的形式。

我可以让它们看起来像文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:45:51.123

您可以使用以下脚本行更改链接的外观。

```
a:link {text-decoration: none; color: black;}               
a:visited {text-decoration: none; color: black;}               
a:active {text-decoration: none; color: black;}             
a:hover {text-decoration: none; color: black;} 
```

这些不仅适用于 eamils，而且适用于网页中的任何链接文本。

# java - How will the third for loop work out?

> ID：14061988
> 
> 赞同：0
> 
> 时间：2012-12-27T22:13:05.850
> 
> 标签：java

I have a question about the third for loop, how does it work please ?

```
public void outputBarChart()
{
    System.out.println("Grade Distribution: \n");

    int frequency[] = new int[11];

    for(int oneGrade : grade)
    {
        ++frequency[oneGrade / 10];
    }

   for (int count = 0; count < frequency.length; count++)
   {
       if (count == 10) {
           System.out.println("100");
       }
       else {
           System.out.printf("%02d-%02d: ",
                   count*10, count*10 + 9);
       }

        //the third for loop here !
        for (int star = 0; star < frequency[count]; star++){
            System.out.print("*");
        }
        System.out.println();

   }
} 
```

The problem is I don't know the mechanics how it print out stars.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:20:22.050

The loop will take the variable `star` and loop and increment until it reaches the value of `frequency[count]`. So it will run the loop the same number of times as the value stored in `frequency[count]`.

Each loop iteration it prints a star. At the end it prints a blank line.

The result is printing the number of stars as `frequency[count]` on a line.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:24:07.530

Well lets go through the code then:

The second for loop which contains the third for-loop will loop 11 times since thats the length of frequencey. Okay that was easy.

Now the third for-loop iterates `frequency[count]` times, we don't know this value, but we know that it is an integer. So what third loop will do is simply to print out a star `frequency[count]` times. After that we're done with the third loop and a newline is printed by the second loop.

```
System.out.println("*" * frequency[count]); 
```

# google-maps-api-3 - Javascript将参数传递给回调或在DistanceMatrixStatus中设置变量值

> ID：14061990
> 
> 赞同：6
> 
> 时间：2012-12-27T22:13:12.687
> 
> 标签：google-maps-api-3, callback, parameter-passing, javascript

我一直在使用 Google 的 DistanceMatrixService。下面的代码有效，但是，如何将另一个参数传递给回调函数或从回调中获取其中一个值？

例如：我有两个 div，我想在（Results1 和 Results2）中显示不同的结果，所以我想我需要
将另一个值传递给 GoogleMapDistance 函数，例如*GoogleMapDistance(YourLatLong,DestLatLong,TheDiv)*
或者
能够抓取回调外部的 ResultStr *document.getElementById("Results1").innerHTML = ResultStr;*
或者
将innerHTM设置为函数document.getElementById("Results1").innerHTML = GoogleMapDistance(YourLatLong,DestLatLong)的返回值；

我被困住了。我怎样才能做到这一点？它现在的样子是我只能运行一次所有这些代码，并且只写入一个 div。

```
<div id="Results1"></div>
<div id="Results2"></div>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>

function GoogleMapDistance(YourLatLong,DestLatLong)
{
    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix(
    {
    origins: [YourLatLong],
    destinations: [DestLatLong],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false
    }, callback);
}

function callback(response, status)
{
    if (status == google.maps.DistanceMatrixStatus.OK)
    {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
      for (var i = 0; i < origins.length; i++)
      {
          var results = response.rows[i].elements;
          for (var j = 0; j < results.length; j++)
          {
              var element = results[j];
              var from = origins[i];
              var to = destinations[j];
              var distance = element.distance.text;
              var duration = element.duration.text;
              var ResultStr = distance + "&nbsp; (<i>" + duration + "</i>)";
          }
      }
    document.getElementById("Results1").innerHTML = ResultStr;
    }
}

var YourLatLong = "45.4049,-122.797997";
var DestLatLong1 = "47.468893,-122.227978";
var DestLatLong2 = "61.221274,-149.831545";

GoogleMapDistance(YourLatLong,DestLatLong1);

</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T22:29:54.327

您无法更改 Google 调用回调的方式，但您可以让它调用您自己的本地函数作为回调，然后在添加所需的额外参数后让它（通过闭包）调用另一个回调，如下所示：

```
function GoogleMapDistance(YourLatLong,DestLatLong, item)
{
    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix(
    {
    origins: [YourLatLong],
    destinations: [DestLatLong],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false
    }, function(response, status) {callback(response, status, item)});
} 
```

或者，您可以只定义您的回调内联，以便它可以直接访问父函数变量：

```
function GoogleMapDistance(YourLatLong,DestLatLong, item)
{
    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix(
    {
    origins: [YourLatLong],
    destinations: [DestLatLong],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false
    }, function callback(response, status)
    {
        // you can access the parent scope arguments like item here
        if (status == google.maps.DistanceMatrixStatus.OK)
        {
        var origins = response.originAddresses;
        var destinations = response.destinationAddresses;
          for (var i = 0; i < origins.length; i++)
          {
              var results = response.rows[i].elements;
              for (var j = 0; j < results.length; j++)
              {
                  var element = results[j];
                  var from = origins[i];
                  var to = destinations[j];
                  var distance = element.distance.text;
                  var duration = element.duration.text;
                  var ResultStr = distance + "&nbsp; (<i>" + duration + "</i>)";
              }
          }
        document.getElementById("Results1").innerHTML = ResultStr;
        }
    }

)} 
```

# apache - 使用 REQUEST_URI 的 RewriteCond 不能像我想要的那样工作

> ID：14061991
> 
> 赞同：0
> 
> 时间：2012-12-27T22:13:25.743
> 
> 标签：apache, url-rewriting

我有一个这样的网址：`www.mydomain.com/file/a-file.pdf`

我想要的是如果我的 REQUEST_URI 以此开头：`/file/`那么 file.php （位于根目录中）应该处理请求。但是如果 URL 是这样的`www.mydomain.com/files/a-file.pdf`，就不应该重写。

我已经这样做了，但它不起作用：

```
RewriteCond %{REQUEST_URI} ^/file/
RewriteRule .* file.php [L] 
```

如果我删除第一行的最后一个 / ，它可以工作，但`www.mydomain.com/files/a-file.pdf`也会被重写。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T16:25:00.763

也许最简单的是忽略请求，它确实匹配真实文件。扩展如下

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_URI} ^/file
RewriteRule .* file.php [L] 
```

这假设您的 /files/a-file.pdf 是一个真实文件。

# java - 将文件夹中的所有图像制作成 IconImages

> ID：14061993
> 
> 赞同：2
> 
> 时间：2012-12-27T22:13:42.467
> 
> 标签：java, jar, embedded-resource, imageicon

我试图弄清楚如何将大量图像添加到我的 Java 程序中，而不必在代码中添加每个文件名。

所以我想把所有`.png`图像放在正确的文件夹中`IconImage`，然后将它们放入一个`ArrayList`.

我现在得到的就是这个。

```
private void fillList()
{
    File[] files = new File("C:/Users/marre/Google Drive/Java/lek/imageplay/src/img").listFiles();

    for (File f : files)
    {
        if (f.isFile()) 
        {
                ImageIcon tempIcon = new ImageIcon(getClass().getResource("/img/"+f.getName()));       
                List.add(tempIcon);
        }
    }
} 
```

这可以按照我想要的方式来获取所有图像的名称。但该文件仅从绝对文件路径读取。

我可以使用什么来获得相同的结果，但它在 .jar 文件中有效（因此它读取`src/img/`而不是整个`c:/ bla bla`..）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:34:48.027

我不确定这是否会有所帮助，但我在尝试获取 jar 文件中的文件时遇到了类似的问题。如果这对您有用，我的方法是使用以下方法获取 jar 中文件的 URL [`ClassLoader`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)：

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
URL url = classLoader.getResource("src/img/"); 
```

检查您的 jar 以确保图像的目录结构，以便您可以指定正确的相对路径。

请记住，jar 是一种打包形式，因此它很可能会返回一个压缩文件（而不是简单的[File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)对象）。你可能不得不涉足[`ZipFile`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html)。

```
ZipFile folderInsideJar = new ZipFile(new File(url.getPath());
Enumeration<? extends ZipEntry> entries = folderInsideJar.entries();
while (entries.hasMoreElements()) {
     // ideally this would be your image file, zipped
    ZipEntry childFile = entries.nextElement();

    // ... etc ...
} 
```

对于 JBoss 等环境，您可能还会获得虚拟文件 (vfsfile/vfszip)。重点是，您可以通过查看结果[URL.getProtocol()](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#getProtocol%28%29)来确定您正在处理的内容。

看起来 ImageIcon 有一个[带有 URL 的构造函数](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.net.URL%29)。在手动尝试检索 zip 文件之前，您可以尝试看看它是否处理了“jar 内的资源”情况。

# javascript - 为什么 JavaScript 中的 0x80000000 >> 1 会产生负值？

> ID：14061999
> 
> 赞同：5
> 
> 时间：2012-12-27T22:14:27.443
> 
> 标签：javascript, bit-manipulation

使用按位运算/使用 JavaScript 进行移位测试

```
0x80000000 >> 1 // returns -1073741824 (-0x40000000) 
```

我希望它会返回 0x40000000 因为

```
0x40000000 >> 1 // returns 0x20000000
0x20000000 >> 1 // returns 0x10000000 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T22:23:32.000

它是一个[算术移位](http://en.wikipedia.org/wiki/Arithmetic_shift)，这就是为什么保留符号，做一个[逻辑移位](http://en.wikipedia.org/wiki/Logical_shift)使用[`>>>`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#%3E%3E%3E_%28Zero-fill_right_shift%29)

```
0x80000000 >>> 1 // returns 1073741824 (0x40000000) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T22:43:57.883

在 Javascript 中，`>>`是有*符号右移运算符*。在[语言规范](http://www.ecma-international.org/publications/standards/Ecma-262.htm)的第 11.7.2 节中，它说：

> 按右操作数指定的量对左操作数执行符号填充按位右移操作。

在移位完成之前，左操作数被转换为有符号的 32 位整数（规范中给出的算法的第 5 步）。在您的情况下，此转换会将给定的正数转换为负值。之后，实际移位完成，保留值的负号。