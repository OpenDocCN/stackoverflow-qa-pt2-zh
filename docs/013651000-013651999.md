# StackOverflow 问答 13651000-13651999

# phpstorm - 如何在 PHPStorm 中更改书签行的复选标记颜色

> ID：13651002
> 
> 赞同：2
> 
> 时间：2012-11-30T18:30:22.760
> 
> 标签：phpstorm

在 PHPStorm 版本 4 中，可以在插入符号位于该行时按 F11 为该行添加书签。这会在装订线中的该线旁边生成一个黑色复选标记。

我查看了 JetBrains 文档、Google，并在 IDE 的设置（文件 > 设置 > IDE 设置 > 编辑器 > 颜色和字体）中进行了彻底搜索，但无法找到允许检查标记颜色的设置改变了。

有什么想法可以改变吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:43:21.057

**不幸的是，您无法更改复选标记图标的颜色。**因为它是位图（图像）而不是文本符号或在运行时自由绘制的东西——就像断点图像一样。

相关票证：http: [//youtrack.jetbrains.com/issue/IDEA-72041](http://youtrack.jetbrains.com/issue/IDEA-72041) （也可能[是 http://youtrack.jetbrains.com/issue/IDEA-39879](http://youtrack.jetbrains.com/issue/IDEA-39879)）

# c - C中的字符串，&str

> ID：13651003
> 
> 赞同：1
> 
> 时间：2012-11-30T18:30:31.903
> 
> 标签：c, pointers

我遇到了这个问题：

```
#include<stdio.h>
int main()
{
 char str[25]="Catch me, if u can!";
 printf("%s\n",&str+2);
 return 0;
} 
```

谁能解释我的意思`&str+2`？这是如何运作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:33:32.330

`&str`返回类型的指针`char (*)[25]`。这意味着，该指针指向的内存大小将是`sizeof(str)`，即 25。根据正常的指针算法，将 2 加到该值将产生一个类型的指针，该指针将指向数组`char (*)[25]`末尾后 25 个字节。`str`打印它很可能是未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T18:52:01.467

`str`是一个类型为“25 个字符的数组”的表达式。在大多数情况下，数组会自动转换为指向其第一个元素的指针。因此， in`str+2`被`str`转换为指向`char`数组中第一个的指针，并且当添加 2 时，结果是指向`char`数组中第三个的指针。

但是，根据 C 2011 6.3.2.1 3，当数组类型的表达式是一元运算符`sizeof`,的操作数，或者是用于初始化数组的字符串文字时，不会发生这种自动转换。因此， in ，不会转换为指针；它仍然是一个 25 个字符的数组。然后是一个指向 25 个字符的数组的指针。将 2 添加到此时，从概念上讲，结果是指向 25 个字符数组的数组的第三个元素的指针。`_Alignof``&``&str+2``str``&str`

但是，指针运算仅在数组内部定义，直到数组末尾的虚构元素。（此外，为了指针算术，单个对象被视为具有一个元素的数组。）由于我们只有一个 25 字符数组而不是 25 字符数组数组，因此没有第三个元素可以指向，并且`&str+2`是未定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:36:08.447

首先，您在那里所做的最多会导致未定义的行为。

`str`是一个符号，它与字符串开始的堆栈上的内存地址有关。`&str`在堆栈符号上无效，使用它将导致未定义的行为。您可能想要的是`str + 2`指向字符串中第三个字节的指针，因此

```
printf("%s\n",str+2); 
```

将打印`"tch me, if u can!\n"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:11:39.293

当你定义你的数组时：

```
char str[25] = "Catch me, if you can!"; 
```

你得到的是堆栈上保留的 25 个字节的空间，其中包含以下内容：

```
@Address                                                                @Address 
0xbfa7fc13                                                             0xbfa7fc2C
 |                                                                          | 
 V                                                                          V
[C][a][t][c][h][ ][m][e][,][ ][i][f][ ][y][o][u][ ][c][a][n][!][\0][\0][\0][\0] 
```

查看str的地址：

```
printf("%#x, %#x\n", str, &str); 
```

你会看到`0xbfa7fc13`，`0xbfa7fc13`。相同的值，因为数组从它的地址开始。当您将 2 添加到 str 时，您将指向字符串的下方：

```
0xbfa7fc13 + 2 = 
    0xbfa7fc15
        |
        V
       [t][c][h][ ][m][e][,][ ][i][f][ ][y][o][u][ ][c][a][n][!][\0][\0][\0][\0] 
```

所以打印：

```
printf("%s\n", str+2); 
```

只会把绳子往下扔一点。但是，如果您将 2 添加到 的地址`str`，那么它将自动为您 * 按您要添加的任何大小的大小：

```
&str + 2 ==> &str + 2 * sizeof(str) ==> &str + 50 ==> 0xbfa7fc45 
```

如您所见，该地址已超出数组在堆栈上的位置，因此打印：

```
printf("%s\n",&str+2); 
```

`'\0'`如果幸运的话，只会吐出数组后 50 字节的任何垃圾，直到找到 a 为止。这是未定义的行为，所以它几乎可以做任何事情。

# ios - 在 iPad 上，如何防止模态视图在键盘呈现时向上移动？

> ID：13651006
> 
> 赞同：7
> 
> 时间：2012-11-30T18:30:52.947
> 
> 标签：ios, ipad, keyboard, modal-dialog

在 iPad 上，我在模式中有一个文本字段；当我点击文本字段以调出键盘时，整个模态视图将向上移动，以使键盘覆盖的区域最小。

我不想要这种行为，因为我的文本字段无论如何都不会被键盘覆盖。如何禁用此行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T04:36:43.120

为此，请遵循这种情况.. 向**文本**
字段 添加一些**标签**..然后在**-(void)textViewDidBeginEditing:(UITextView *)textView**方法中给出条件，例如文本字段标签**不等于您的预定义标签**而不是将模式视图向上移动.. 我希望它会工作..

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T04:21:29.593

作为回退，您可以创建自己的窗口，并将您的视图添加到其中，而不是将您的视图放在 Apple 管理的模式视图中。******

# delphi - 构建配置实现了哪个版本的 Delphi？

> ID：13651008
> 
> 赞同：3
> 
> 时间：2012-11-30T18:30:54.803
> 
> 标签：delphi, conditional-compilation, buildconfiguration

我正在开发一个项目，其中包含用于控制为不同版本的 Delphi 编译什么的条件。我只熟悉版本 7、2010 和 XE2。至少在 Delphi 2010 中，可以在一个项目上创建多个构建配置，每个构建配置都允许您根据当前选择的配置以不同的方式编译应用程序。我只需要知道这些构建配置引入了哪个版本的 Delphi？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T18:36:04.047

它们自 Delphi 2007 以来是新的。它[在 Delphi 2007 中的新增功能中](http://edn.embarcadero.com/article/36608)这么说。[在2006 年 Delphi](http://edn.embarcadero.com/article/33411)的新增功能中没有提到它。

# ruby-on-rails - Rails 未正确解释控制器参数

> ID：13651009
> 
> 赞同：0
> 
> 时间：2012-11-30T18:30:57.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json

我正在根据此处的 API 设置网络挂钩：http: [//docs.exceptional.io/api/webhooks/](http://docs.exceptional.io/api/webhooks/)

我看到的问题是发布的数据似乎无效。从日志中：

```
Started POST "/api/1/services/exceptional/13123123123123123123123123123" for 50.16.14.195 at 2012-11-30 04:27:06 +0000
Processing by ApiV1::Services::ExceptionalController#create as XML
  Parameters: {"{\"error\":{\"id\":110938603,\"title\":\"# (Test-20) \\\"Test message-20\\\"\",\"sub_title\":null,\"app\":{\"id\":17456,\"name\":\"mysite.com\"},\"last_occurrence\":{\"id\":266224025,\"request_method\":null,\"url\":null,\"occurred_at\":\"2012-11-30T04:27:01 00:00\",\"backtrace\":null},\"environment\":null,\"first_occurred_at\":\"2012-11-30T04:27:01 00:00\",\"last_occurred_at\":\"2012-11-30T04:27:01 00:00\",\"url\":\"http://getexl.com/xasdasddsa\"}}"=>nil, "room_token"=>"123123123123213"}
Completed 500 Internal Server Error in 12ms

TypeError (can't convert Array into String):
  app/controllers/api_v1/services/exceptional_controller.rb:20:in `create'
  lib/rack/ie_redirect.rb:19:in `call' 
```

**路线：**

```
 match "/exceptional/:room_token" => "exceptional#create" 
```

关于为什么参数被rails破坏以及如何解决的任何想法？谢谢

**控制器代码：**

类 ApiV1::Services::ExceptionalController < ApiV1::APIController

```
 def create
    exceptional_exception = JSON.parse(params[:error])
  end 
```

exception_exception 是行是 rb:20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:17:47.017

似乎出错的是您没有正确构建 URL。例如，实际错误被 rails 解释为键。

通常你会这样写

```
/api/1/services/exceptional/123123123?error="....<snipped the json>..." 
```

我看到了两种解决方法。恕我直言，解决此问题的最简单方法是编写以下内容：

```
match '/exceptional/:room_token/:error' => 'exceptional#create' 
```

然后你就不必改变任何东西，它就会工作。

否则，您将不得不正确发布数据，就像我上面所说的那样。

[编辑：评论后]

好的，由于您无法控制正在发生的 POST，请返回原始路线，并在您的控制器中执行以下操作：

```
def create
  exceptional_exception = JSON.parse(request.body)
end 
```

我认为这应该有效，但不完全确定。我不太明白，通常rails会自动处理好，所以我假设P​​OST本身有问题。

第二条评论：既然您似乎在“重建”异常，为什么不考虑[errbit](https://github.com/errbit/errbit)。

# javascript - 通过 JavaScript 未经授权访问 Google Calendar API

> ID：13651017
> 
> 赞同：23
> 
> 时间：2012-11-30T18:31:49.637
> 
> 标签：javascript, google-api, oauth-2.0, google-calendar-api

我正在尝试访问包含国定假日的公共日历（来自 Google 日历）：

```
calendarId: 'pt_br.brazilian#holiday@group.v.calendar.google.com' 
```

由于日历是公开的，我想我可以只使用 API 密钥来访问它：

```
function OnLoadCallback() {
    var config = {
        client_id: '32j4lk32j5kj342l5h.googleuser.com', //fake client id
        scope: 'https://www.googleapis.com/auth/calendar.readonly'
    };
    gapi.client.setApiKey('fId345AM20HXXXXXXXXXXXXXXXXgT3f9kyp2REfkaw2'); //fake api key
    gapi.client.load('calendar', 'v3', function() {
        var today = new Date(),
            request;

        request = gapi.client.calendar.calendarList.get({
            calendarId: 'pt_br.brazilian#holiday@group.v.calendar.google.com',
            timeMin: (new Date(today.getFullYear(), today.getMonth(), today.getDay(), 0, 0, 0, 0)).toISOString(),
            timeMax: (new Date(today.getFullYear(), today.getMonth(), today.getDay(), 23, 59, 59, 999)).toISOString(),
            fields: 'items(creator(displayName,email),end,endTimeUnspecified,start,summary)'
        });

        request.execute(function(response) {
            window.alert('length of items: ' + response.items.length);
        });

    });
} 
```

但是，我不断收到以下响应，这是一个 401（未经授权）错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

有人可以澄清我想要做的事情是否可以实现吗？
最后，如果可能的话 - 参考我当前的代码，我必须改变什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-25T13:53:58.410

我能够使用 jQuery 做同样的事情。

```
var mykey = 'your_api_key'; // typically like Gtg-rtZdsreUr_fLfhgPfgff
var calendarid = 'you_calendar_id'; // will look somewhat like 3ruy234vodf6hf4sdf5sd84f@group.calendar.google.com

$.ajax({
    type: 'GET',
    url: encodeURI('https://www.googleapis.com/calendar/v3/calendars/' + calendarid+ '/events?key=' + mykey),
    dataType: 'json',
    success: function (response) {
        //do whatever you want with each
    },
    error: function (response) {
        //tell that an error has occurred
    }
}); 
```

但是，您需要确保您已完成以下操作：-

* * *

[1）在https://code.google.com/apis/console](https://code.google.com/apis/console)注册一个项目
2）生成一个简单的 API 访问密钥
3）确保日历 API 在服务下被激活。

阅读更多[https://developers.google.com/google-apps/calendar/firstapp](https://developers.google.com/google-apps/calendar/firstapp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-07T13:04:35.000

使用普通的 javascript，我能够对上述内容进行 tweek 并使其正常工作！这真的很有帮助，因为我发现 Google 文档主要关注用户访问和更新日历的 Auth 方面。真正深入到我需要拨打电话的确切位置（在什么精确的端点）更难。我显然已经把 XXXXX 放在了你的 calendarId 和 API Key 需要去的地方。

```
 //async function to handle data fetching
    async function getData () {
    //try catch block to handle promises and errors
    try {
        const calendarId = 'XXXXXXXXXXXXX@group.calendar.google.com'
        const myKey = 'XXXXXXXXXXXXXXXXXXXXXXXXXXX'
        //using await and fetch together as two standard ES6 client side features to extract the data
        let apiCall = await fetch('https://www.googleapis.com/calendar/v3/calendars/' + calendarId+ '/events?key=' + myKey)
        //response.json() is a method on the Response object that lets you extract a JSON object from the response
        //response.json() returns a promise resolved to a JSON object
        let apiResponse = await apiCall.json()
        console.log(apiResponse)
    } catch (error) {
        console.log(error)
    }
}
getData() 
```

# html - 带 CSS 的方括号

> ID：13651022
> 
> 赞同：9
> 
> 时间：2012-11-30T18:32:08.257
> 
> 标签：html, css, css-shapes

我希望只用 CSS创建一个`[`和括号。`]`有没有办法指定顶部和底部边框（不切片图像），使它看起来像一个括号？

```
.bracket {
  border-top:20px;
  border-bottom:20px;
  border-right:none;
  border-left: 1px solid black; 
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T18:38:23.240

```
.b:after {
  content: "]"
}

.b:before {
  content: "["
}
```

```
<span class="b">text</span>
```

工作示例：[http ://codepen.io/yardenst/pen/bhGIy](http://codepen.io/yardenst/pen/bhGIy)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-23T13:04:58.977

您可以在不使用纯 css 中的任何伪元素的情况下绘制方括号。

**脚步：**

*   创建一个类似`<div>`or的元素`<span>`并将其设置为 an`inline-block`以便其长度取决于其内容，即此元素的长度将与其中的内容一样长。
*   应用左/右边框。
*   用于`linear-gradient()`创建 4 个带有特定`width`/的背景图像，`height`并使用 . 在框的每个角上绘制`background-position`。的高度因子`background-size`应等于`border-left-width`。

**必要的CSS：**

```
div {
  background-image: linear-gradient(#ffb1bb, #ffb1bb),
                    linear-gradient(#ffb1bb, #ffb1bb),
                    linear-gradient(#ffb1bb, #ffb1bb),
                    linear-gradient(#ffb1bb, #ffb1bb);

  background-repeat: no-repeat;
  background-size: 8px 3px;
                    // ^^^ This value should be equal to width of left OR right border.
  background-position: top left, top right, bottom left, bottom right;

  border: solid #ffb1bb;
  border-width: 0 3px;
} 
```

**有用的资源：**

*   线性梯度：[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient)，[W3](https://www.w3.org/TR/css3-images/#linear-gradients)。

*   背景图片：[MDN](https://developer.mozilla.org/en/docs/Web/CSS/background-image)，[W3](https://www.w3.org/wiki/CSS/Properties/background-image)。

**输出图像：**

[![输出图像：](../Images/50e3ce8a4232b87aabb6c7fabb76891d.png)](https://i.stack.imgur.com/qgzoK.png)

```
* {box-sizing: border-box;}

body {
  background: linear-gradient(white, silver);
  min-height: 100vh;
  margin: 0;
}

.widget-title {
  font: 20px/26px Arial, sans-serif;
  background-image: linear-gradient(#ffb1bb, #ffb1bb),
    linear-gradient(#ffb1bb, #ffb1bb),
    linear-gradient(#ffb1bb, #ffb1bb),
    linear-gradient(#ffb1bb, #ffb1bb);

  background-repeat: no-repeat;
  background-size: 8px 3px;
  background-position: top left, top right, bottom left, bottom right;

  border: solid #ffb1bb;
  text-align: justify;
  border-width: 0 3px;
  display: inline-block;
  vertical-align: top;
  padding: 5px 15px;
  margin: 20px;
}
```

```
<h4 class="widget-title widgettitle">WHAT’S NEW</h4>

<h4 class="widget-title widgettitle">This is some dummy and multiline text and nothing meaning in this sentence,This is some dummy and multiline text and nothing meaning in this sentence,This is some dummy and multiline text and nothing meaning in this sentence...</h4>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:38:48.513

您可以将 :after 和 :sbefore 伪元素与 content 属性一起使用。

[更多信息](https://developer.mozilla.org/en-US/docs/CSS/content)

就像是

```
.bracket:after { content: ']' }
.bracket:before { content: '[' } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T18:49:42.917

不是直接的，但您可以这样做：HTML：

```
<div class="wrapper">
    <div class="left">
        <div class="stick"></div>
        <div class="empty"></div>
        <div class="stick"></div>
    </div>
    <div class="content">Div content</div>
    <div class="right">
        <div class="stick"></div>
        <div class="empty"></div>
        <div class="stick"></div>
    </div>
</div>​ 
```

CSS：

```
.wrapper{
    border-bottom: 2px solid #FF0000;
    border-top: 2px solid #FF0000;
    height: 100px;
    width: 300px;
}
.stick{
    border-left: 2px solid #FF0000;
    height: 33%;
}
.empty{
    height: 34%;
}
.content{ float: left }
.left{ float: left; height: 100%; }
.right{ float: right; height: 100%; }
.clear{ clear: both } 
```

演示：http: [//jsfiddle.net/Q8g4F/](http://jsfiddle.net/Q8g4F/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-21T15:53:25.010

这可以通过使用容器的 :before 和 :after 伪元素来实现。萨斯代码：

```
$container-selector: h1;
$bg-color: white;
$bracket-color: orange;
$bracket-width: 10px;
$bracket-length: 30px;
// just reset
body {
  background-color: $bg-color;
}

// not really related
$container-selector {
  padding: 0 30px;
}

$container-selector {
  position: relative;
  border: $bracket-width solid $bracket-color;
  &:before,
  &:after {
    content: "";
    display: block;
    position: absolute;
    top: -$bracket-width;
    right: $bracket-length - $bracket-width;
    left: $bracket-length - $bracket-width;
    height: $bracket-width;
    background-color: $bg-color;
  }
  &:after {
    top: initial;
    bottom: -$bracket-width;
  }
} 
```

工作示例可在此处获得：[https ://jsfiddle.net/1uuodzdw/](https://jsfiddle.net/1uuodzdw/)

# ruby - Ruby 的 .match 方法总是返回 true

> ID：13651024
> 
> 赞同：-1
> 
> 时间：2012-11-30T18:32:08.740
> 
> 标签：ruby, regex, pattern-matching

有人能告诉我为什么这个方法总是返回 true，即使字符串与模式不匹配？我已经通过 TextWrangler 的正则表达式引擎运行了正则表达式，并且模式是正确的。谢谢

```
def validatePEM pem
 if /^-{4}([-\s])BEGIN/.match(pem)
   print "validatePEM found a match\n"
   return true
 else
   return false
  end
end
@s = '---BEGIN RSA PRIVATE KEY-----'

if validatePEM @s
  print "VALID PEM FILE\n"
else
  print "INVALID PEM FILE\n"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:19:38.820

仅供参考，有几件事是以“非 Ruby”方式完成的。

我会写：

```
def validatePEM pem
if /\A-{4}([-\s])BEGIN/.match(pem)
  print "validatePEM found a match\n"
  return true
else
  return false
  end
end
@s = '---BEGIN RSA PRIVATE KEY-----'

if validatePEM @s
  print "VALID PEM FILE\n"
else
  print "INVALID PEM FILE\n"
end 
```

就像是：

```
def validatePEM(pem)
  !!pem[/\A-{4}([\s-])BEGIN/]
end

@s = '---BEGIN RSA PRIVATE KEY-----'

puts '%s PEM FILE' % (validatePEM(@s) ? 'VALID' : 'INVALID') 
```

在用 Ruby 编写时，有些人可能会质疑使用三元语句进行打印，但[Ruby 风格指南](https://github.com/styleguide/ruby)同意使用三元 ( `?:`) 编写琐碎的条件测试是可以的。

# java - 无法在 Android 中使用 USB 主机获取 USB 设备列表

> ID：13651025
> 
> 赞同：1
> 
> 时间：2012-11-30T18:32:13.897
> 
> 标签：java, android, usb

我想在平板电脑上检索 USB 设备列表。

根据代码，它必须在连接 USB 时启动一个活动，甚至我正在检查设备是否可用但没有得到任何列表。

**显现**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testusb1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <uses-feature android:name="android.hardware.usb.host" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
                android:resource="@xml/usbdevice" />
        </activity>
    </application>

</manifest> 
```

**爪哇代码：**

```
package com.example.testusb1;

import java.util.HashMap;
import java.util.Iterator;

import android.hardware.usb.UsbDevice;
import android.hardware.usb.UsbManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView tv1 = (TextView) findViewById(R.id.tv1);
        UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
        String txt = "defaulr";
        HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
        Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();

        while (deviceIterator.hasNext()) {
            UsbDevice device = deviceIterator.next();
            txt = txt + "  * " + device.getDeviceName();
        }
        tv1.setText(txt);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

和布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

**Xml 文件：（** 我保留 USB 文件是因为我想要有关所有设备的信息）

```
<?xml version="1.0" encoding="utf-8"?>

<resources>
    <usb-device/>
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:56:12.600

您是否检查过您的设备实际上支持完整的 USB API，而不仅仅是 USB OTG？很明显，要检查您是否总是得到一个空的设备列表，并且 Google Play 中有免费的应用程序可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:40:24.443

使用[USB 主机控制器](https://play.google.com/store/apps/details?id=hu.sztupy.android.usbhostcontroller&hl=en)应用程序检查您的平板电脑是否支持 USB 主机模式 API ..OR.. 从关于菜单中提供您平板电脑的一些软件信息。

# wordpress - 维护中的站点：如何也授予对别名子域的私有访问权限？

> ID：13651026
> 
> 赞同：0
> 
> 时间：2012-11-30T18:32:20.750
> 
> 标签：wordpress, .htaccess, mod-rewrite, ip, maintenance

我有一个处于维护模式的 Wordpress 网站，使用 .htaccess 文件中的代码：

```
<Limit GET POST PUT>
order deny,allow
deny from all
allow from xx.xxx.xxx.xxx
</LIMIT>

ErrorDocument 403 /custom-message.html
<Files custom-message.html>
order allow,deny
allow from all
</Files> 
```

当我访问**mywebsite.com**时，一切都对我有用，非常酷。但我想使用别名重定向技术来提高我网站的图像和视频的速度和加载（例如我的**/www文件夹上的****static.mywebsite.com**重定向）。

 **问题是当我从**static.mywebsite.com**上的相同 IP 地址访问时，我在维护页面上被重定向...

您是否知道如何授予我对我创建的别名子域的私有访问权限，以便即使我处于维护模式也可以看到我的静态图像？

非常感谢 ！**

# java - java - 如何从Java代码中的WEKA分类器获取分布的类别名称

> ID：13651027
> 
> 赞同：0
> 
> 时间：2012-11-30T18:32:21.490
> 
> 标签：java, weka

我有一个来自 WEKA 的简单朴素贝叶斯分类器。我正在使用目录结构并通过 TextDirectoryLoader 读取它。目录结构是

```
Training_Data
     Spam (folder)
         text files
     Ham (folder)
         text files 
```

我可以得到这样的分布

```
for(Instance i: testInstances){

    double [] distributions = classifier.distributionForInstance(i);
    for(double d : distributions)
        System.out.println(d);
} 
```

我想要做的是让类别名称与分布一起出现，这样我就可以像这样打印出来

```
System.out.println("Category: "+/*something to get the category name*/+ ":"+ d); 
```

我已经四处寻找几个小时了，不知道该怎么做。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:13:46.893

您可以使用`instance.classAttribute().value(valIndex)`where`valIndex`是类别的索引：

```
for(Instance i: testInstances){
  double [] distributions = classifier.distributionForInstance(i);
  for(int index = 0; index < distributions.length; index++)
      System.out.println(i.classAttribute().value(index) + ": " + distributions[index]);
} 
```

# database - 使用 JSON 的离线数据库文件系统。使用一个或多个文件

> ID：13651028
> 
> 赞同：2
> 
> 时间：2012-11-30T18:32:26.400
> 
> 标签：database, json, filesystems, offline

我只是想听听一些关于我将要做什么的意见。案子很简单。我需要使用 JSON 实现一个离线数据库文件系统。

我遇到的问题是是使用一个 JSON 文件来表示我的所有资源还是为每个资源使用一个 JSON。假设我需要存储有关许多不同文件的信息，并且每个文件可能都有一些注释；也就是说，一组注释，可能还有一些额外的属性，如名称、详细信息等。

我可以创建一个表示该结构的 JSONobject，然后在添加新资源时，将创建一个新的 JSONojbect 来表示该资源。然后它会简单地附加到一个文件中，其中包含所有资源的所有信息。当我想访问资源 1 时，我可以只查询 JSON 文件并找到 id 为 1 的资源。简单，但是当使用许多资源时，它显然会很慢......（在 JS 中实现）并且有点麻烦将所有信息存储在一个数组中......等等。

我正在考虑的另一个解决方案是，因为每个资源都是一个文件，所以我可以用 JSONobject 表示每个文件。假设我现在正是文件的名称，我可以打开 file.json 并获取我想要的信息。

假设我要使用第二种方法，您认为这可能是一个可行的解决方案吗？

任何反馈或替代方法表示赞赏:)。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:59:46.917

我已经将 xml 用于类似的应用程序，发现即使是非常大的文件也不会太慢，但是我使用的 AIR 可能比浏览器更快。由于它的本地性能并不那么重要，所以我认为您不会看到将所有数据存储在一个文件中的任何区别。多个文件的问题是您需要打开一个文件检查数据，然后将其删除，而不是仅仅从数组中删除一个项目。如果这很重要，那么还有文件数量和备份难度。

# mysql - 导出的 Blob 数据与 DB 数据不同

> ID：13651029
> 
> 赞同：6
> 
> 时间：2012-11-30T18:32:35.880
> 
> 标签：mysql, character-encoding, mysqldump

我正在尝试导出我们非常大的 MySQL 数据库（1.6GB - 主要是 BLOB）并导入到新服务器中。我已经解决了大部分问题，最终完成了导入，没有任何错误。使用 MySQL 查询浏览器，我在一张带有 BLOB 图像的表上运行查询并将一个保存到磁盘（使用查询浏览器中的保存图标）。当我尝试打开文件时，我收到“无效的图像格式”错误。哦哦。

使用查询浏览器，我检查了源数据库和最近导入的新数据库上的值。我认为价值观不同。它可能只是编码问题或其他东西。这是我看到的：

源（有效数据）服务器：

```
FF D8 FF E0    00 10 4A 46    49 46 00 01    01 01 00 60
00 60 00 00    FF DB 00 43    00 08 06 06    07 06 05 08
and so on... 
```

新服务器：

```
C3 BF C3 98    C3 BF C3 A0    00 10 4A 46    49 46 00 01
01 01 00 60    00 60 00 00    C3 BF C3 9B    00 43 00 08
and so on... 
```

在此示例中，在我的新手眼中，“新”服务器上的数据前面有 3 个字节的额外数据。

[然后我使用010 编辑器](http://www.sweetscape.com/010editor/)检查了 sql 转储文件。我找到了这个特定示例的行，这就是我所看到的：

```
FF D8 FF E0    5C 30 10 4A    46 49 46 5C    30 01 01 01
5C 30 60 5C    30 60 5C 30    5C 30 FF DB    5C 30 43 5C
30 08 06 06    07 06 05 08    and so on... 
```

现在我已经过头了。我看到了模式，我注意到十六进制对 5C 30 看起来与 00 相同，但我不明白为什么。在这一点上，我有一个源服务器即将被擦除，而一个新的服务器恐怕已经导入了损坏的数据。我希望这是某种编码问题，可以通过在 MySQL 中设置全局变量来解决，但我真的不知道。

我还应该提到，当我从源（工作）服务器和新（损坏）服务器保存文件时，损坏文件的文件大小大约大 40%。

我检查了两台服务器上的字符集变量：

```
SHOW VARIABLES LIKE '%char%' 
```

源服务器：

```
character_set_client      utf8
character_set_connection  utf8
character_set_database    latin1
character_set_filesystem  binary
character_set_results     utf8
character_set_server      latin1
character_set_system      utf8 
```

新服务器：

```
character_set_client      utf8
character_set_connection  utf8
character_set_database    latin1
character_set_filesystem  binary
character_set_results     utf8
character_set_server      latin1
character_set_system      utf8 
```

他们是一样的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T23:42:14.277

来自新数据库的损坏数据看起来像是将源数据从 ISO-8859-1 转换为 UTF-8 的结果（例如 U+00FF — ÿ — 是`FF`前者和`C3 BF`后者）。

由于 BLOB 没有字符集，字符编码不受服务器变量控制；我怀疑`mysqldump`正在将您的 BLOB 数据输出到 UTF-8 编码文件（[这是默认](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_default-character-set)文件）中，并且通过某种服务器设置和传递给的选项的组合以某种方式对其进行编码`mysqldump`。

最好的解决方案可能是[`--hex-blob`](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_hex-blob)在导出 BLOB 字段时使用该选项，这将导致如下结果：

```
INSERT INTO `table` VALUES (0xFFD8FFE0...); 
```

# php - PHP方法返回无值

> ID：13651030
> 
> 赞同：11
> 
> 时间：2012-11-30T18:32:37.060
> 
> 标签：php, oop, return

我正处于迁移到 100% OO php 的阶段，我最终遇到了很多这样的问题。因此，如果您觉得它很愚蠢，请原谅，我只是想在一开始就使我的 OO 编程实践良好，以便以后不必修复它们。

这样做可以吗？

```
private function _some_funct($args) {
    // Some code here....
    if ($something) return;

    //Rest of code
} 
```

基本上，这里有2个问题。

1.  在它之后使用没有值的**return可以吗？**我经常使用它并且没有遇到任何缺点，但从未在其他人的代码中看到它。我只看到**return false**。

2.  通常以这种方式停止功能是否可以，或者我应该重新考虑我的程序结构？

使用它的例子是我正在制作的 CMS。

```
public function _init_engines() {
    $this->_session_engine = $this->_dep['SessionEngine'];
    $this->_login_engine = $this->_dep['LoginEngine'];
    if ($this->_dep['User'] == false) return;   
    $this->_security_engine = $this->_dep['SecurityEngine'];
    //Other engines go here.......
} 
```

所以我让系统启动会话并设置会话变量，然后检查用户是否已登录。如果用户未登录，LoginEngine 会处理并加载“登录”模块。加载登录模块后，我不希望实例化其他引擎，因为它们不需要。我本可以使用*die*或*exit*但这会阻止整个脚本执行。像这样，我的脚本完成执行，其他不是引擎的东西，比如基准测试和其他一些东西仍然被执行，这正是我想要的。同样，我应该在这里重新考虑我的逻辑还是您认为这种方式可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T19:04:54.050

`return`如果满足以下条件，则没有值是可以的：

1.  您的界面明确表示 - docblock 状态`@return void`（如果函数中不需要结果值）或类似`@return sometype|null`where `sometype`is `string`、`int`等的东西。
2.  使用来自此类函数/方法`isset()`的返回值的代码在使用返回值之前进行检查 - 如果使用您的代码的人（或您自己）忘记检查它，这可能会导致错误。

`return`在以下情况下，没有值是不行的：

1.  发生错误 - 请改用异常。异常更容易处理，因为您可以：
    1.  在外部范围内的任何地方捕获它们，甚至在全球范围内
    2.  传递漂亮的错误消息
    3.  扩展异常类以提供附加功能
    4.  准确检查抛出了什么类型的异常
2.  一些特定的结果类型是预期的 - 在这种情况下，您可能会考虑一些默认的“空”结果，或者如果出现问题，再次使用异常 - 它仍然比`isset`因为它更难忘记要好得多 - 异常是一种“响亮”的方式说发生了错误。

并且请不要使用`die()`或`exit()`“处理”错误 - 向用户显示错误的技术细节是一种非常糟糕的做法。

至于你的`_init_engines()`方法——在不知道其余部分的情况下，真的很难说它是对还是错。

如果您对 PHP 中 OOP 的优秀示例感兴趣，我建议您查看[Symfony](http://symfony.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:04:28.987

正如其他人所说，使用`return;`. 您通常会看到`return false;`，因为通常最好在可能的情况下返回有意义的东西来确定函数做了什么。如果你处于“做什么都可以”的状态，那`return;`是完全可以接受的。

关于多次返回，我更喜欢在条件足以确定不应继续执行时使用多个退出点。例如，如果您需要一个`User ID`而您没有收到一个，那么检查其余数据可能没有意义。在这种情况下，您可能会立即使用`return RES_INVALID_USERID`. 在这种情况下，我更喜欢多个`return`而不是一个链`if..else`（当它们嵌套时更糟）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:37:55.213

这深入研究了单返回点与多返回点的宗教战斗，但她我们去......

使用许多没有任何价值或真正需要的返回作为执行流控制来避免继续执行功能是非常糟糕的形式。这有点像神奇的“goto”声明阵营。是的，你可以做到，但我会投反对票反对实际这样做，特别是如果在几个常见情况下，不只是早期的一些回报导致你的功能短路。

为什么不重组你的函数，让它没有返回，但不执行它不需要的代码？如果您发现您的函数/方法太大而易于重组，这可能是一个信号，这意味着您可能希望将它们分解为更小更简洁的方法/函数。

```
 public function _init_engines() {
    $this->_session_engine = $this->_dep['SessionEngine'];
    $this->_login_engine = $this->_dep['LoginEngine'];
    if ($this->_dep['User'] != false){ 
         $this->_security_engine = $this->_dep['SecurityEngine'];
    } else if (){
       //Other engines go here.......
    } 
    //no useless return needed
  } 
```

# gcc - gcc 版本与 progol 软件不兼容

> ID：13651033
> 
> 赞同：1
> 
> 时间：2012-11-30T18:32:48.237
> 
> 标签：gcc

我正在使用一个名为 proGol 的 ILP 系统，它不再是最先进的；progol 实现已经在 C 中，尽管编码的语法类似于 prolog。但是，我可以在 gcc 版本为 3.4.3 的旧机器上运行它。这样的机器很旧，我需要在 4.6.3 的 gcc 版本的新服务器上运行我的代码。当我这样做时，软件会输出分段错误。我认为问题在于不兼容的 gcc 版本，并且 progol 本身可能只能在 32 位处理器上运行。有谁知道我如何将机器的 gcc 版本调整为旧版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-20T19:12:05.543

我知道这是一个老问题，但我最近不得不处理同样的错误，我在这里寻找答案，因为这是目前有人寻找“progol 分段错误”时的第一个谷歌结果。

使用 gcc-4.8 编译 progol 对我有用。我只是简单地将 Makefile 中的 gcc 别名更改为“gcc-4.8”。

我希望这可以帮助某人。

# excel - 如何为多组数据动态构建 COUNTIFS 公式（运行时错误“1004”）

> ID：13651035
> 
> 赞同：1
> 
> 时间：2012-11-30T18:33:02.577
> 
> 标签：excel, vba

我是 VBA 新手，并从其他人那里继承了一个需求跟踪电子表格，我目前正在更新该电子表格。需求已与当前的 VBA 代码正确分组和汇总。我尝试更新的特定块（例如，有多个级别）：

```
For groups = 1 To i ' Level 3 grouping

    Range(Cells(Start(groups), 1), Cells(Finish(groups), 1)).Rows.Group

    Range("G" & Start(groups) - 1).Formula = "=COUNTIF(E" & Start(groups) & ":E" & Finish(groups) & ",""Requirement"")"

    Range("H" & Start(groups) - 1).Formula = "=COUNTIF(H" & Start(groups) & ":H" & Finish(groups) & ",""Ok"")"

Next 
```

我需要向 COUNTIF 添加一个额外的条件，所以我使用的是 COUNTIFS。我只想计算不是 4 级的要求（它们可以是 1、2、3 或 4 级）。我尝试了以下逻辑的变体：

```
For groups = 1 To i ' Level 3 grouping

    Range(Cells(Start(groups), 1), Cells(Finish(groups), 1)).Rows.Group

    Range("G" & Start(groups) - 1).Formula = "=COUNTIFS(E" & Start(groups) & ":E" & Finish(groups) & "," & "Requirement" & ",S" & Start(groups) & ":S" & Finish(groups) & ",""<>4"")"

    Range("H" & Start(groups) - 1).Formula = "=COUNTIF(H" & Start(groups) & ":H" & Finish(groups) & ",""Ok"")"

Next 
```

在执行宏之前，我尝试在正确的单元格中手动输入公式，并且公式正确更新了总和。但是，当我运行宏时，我总是得到以下信息： RunTime Error '1004' Application_defined or object_defined error

我意识到我有很多报价，有些可能可以合并；但是，我更关心逻辑为何失败。能否请你帮忙？我花了太多时间探索不同的途径。

先感谢您！

在此之后，我将不得不学习如何隐藏每个“4 级”要求（这意味着该行和以下 2 行），但这是另一个主题。我想我会先尝试更简单的逻辑..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:09:29.873

您在双引号内使用双引号是您的问题。改为使用`Chr(34)`。

```
Range("G" & Start(groups) - 1).Formula = "=COUNTIFS(E" & Start(groups) & ":E" & Finish(groups) & "," & "Requirement" & ",S" & Start(groups) & ":S" & Finish(groups) & "," & Chr(34) & "<>4" & Chr(34) & ")" 
```

Chr() 方法返回您指定的索引号处的 ASCII 字符。在这种情况下，Chr(34) 返回双引号字符。有关 ASCII 字符的更多信息，请查看下表：

[http://www.asciitable.com/](http://www.asciitable.com/)

编辑：

或者，您也可以使用双双引号，如下所示：

```
Range("A1").formula = "=COUNTIF(B:B,""<>4"")" 
```

代替

```
Range("A1").formula = "=COUNTIF(B:B," & Chr(34) & "<>4" & Chr(34) & ")" 
```

# html - 2个并排相同大小的字段集

> ID：13651043
> 
> 赞同：1
> 
> 时间：2012-11-30T18:33:44.390
> 
> 标签：html, css, primefaces, fieldset

我正在用 Primefaces 设计一个网页，但我认为我的问题更普遍：

我想要 2 个并排的具有相同大小的字段集。我该怎么做 ？

编辑：2 个字段集在一个`<div>`with`height:auto; width:auto;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:44:13.210

在css中试试这个

```
fieldset{
width :50%;
padding : 0;
margin : 0;
display : inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:34:29.767

*   给每个`<fieldset>`50% 的宽度
*   将第一个浮动到左侧，将第二个浮动到右侧

# .htaccess - htaccess 重定向以包含 index.php

> ID：13651046
> 
> 赞同：0
> 
> 时间：2012-11-30T18:33:47.280
> 
> 标签：.htaccess

由于我的服务器没有将 index.php 读取为默认页面，因此我无法控制它。所以我需要重定向：

[http://www.mysite.com/blog/wp-admin/](http://www.mysite.com/blog/wp-admin/)

至

[http://www.mysite.com/blog/wp-admin/index.php](http://www.mysite.com/blog/wp-admin/index.php)

我尝试了以下操作，但它什么也没做。

```
RewriteEngine On
RewriteRule ^/blog/wp-admin$ /blog/wp-admin/index.php [R=301,L] 
```

正确的代码应该是什么？谢谢！

完整内容：

```
RewriteEngine On
RewriteRule ^blog/wp-admin$ /blog/wp-admin/index.php [R=301,L]
RewriteRule ^$ /blog/old/index.php [R=301,L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:38:20.313

您是否尝试转义“。” 在 RewriteRule 中的文件扩展名之前？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:49:05.957

您想要的重定向似乎已经在前 3 行 .htaccess 中进行了规定，尽管它们看起来不正确。尝试像这样修改这些行：

```
RewriteEngine On
RewriteRule ^blog/wp-admin/?$ blog/wp-admin/index.php [R=301,L] 
RewriteRule ^$ blog/old/index.php [R=301,L] 
```

我没有测试过，但应该可以。

# javascript - 如何添加一个计时器以保持检查 500 错误消息，直到它使用 jquery 更改为不同的消息？

> ID：13651050
> 
> 赞同：0
> 
> 时间：2012-11-30T18:34:06.587
> 
> 标签：javascript, jquery, ajax

我想继续检查 500 错误服务器消息，直到成功消息为 200，我希望它在 2 分钟后超时并给出一些消息

我怎样才能以编码方式做到这一点？

这是我下面的代码

```
$(document).ready(function() {
        $.ajax({
            url: "some.json",
            statusCode: {
                500: function() {
                    alert(" 500  lower data still loading");
                    console.log('500 ');
                }
            }
        }); 

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:38:21.277

我想像这样的东西，使用`setTimeout`：

```
var timesChecked = 0;
function checkForMessage() {
    $.ajax({
        url: "some.json",
        statusCode: {
            500: function() {
                if(timesChecked < 240) {
                    alert("500  lower data still loading");
                    console.log('500 ');
                    setTimeout(checkForMessage, 500);
                    timesChecked++;
                } else {
                    alert("Request timed out...");
                }
            },
            200: function() {
                alert("200! Data has loaded.");
            }
        }
    }); 
} 
```

当然，`setInterval`也可以。

# c# - 子循环匹配条件时确定父循环索引的方法

> ID：13651052
> 
> 赞同：0
> 
> 时间：2012-11-30T18:34:08.663
> 
> 标签：c#, .net, for-loop, nested-loops

编辑：正如 Damien_The_Unbeliever 所说，为了让这个问题更容易理解，最终结果是试图“在序列中搜索子序列”。`Blue,Yellow,Green`从`colorsToFind`内部找到序列`colorList`

有没有人有一些指针来确定嵌套 for 循环的最佳方法，其中内部循环需要确定父循环中是否包含一系列字符串？

因此，对于下面的示例，由于在索引 [5]​​、[6]、[7] 处可以找到“Blue”、“Yellow”、“Green”，因此我想返回这些索引。或者至少是 [5] 的第一个找到的索引。

我认为问题与`for (int j`循环如何在找到的索引上爆发有关。

```
string[] colorList = "Royal Blue", "Tomato Red", "Mustard Yellow", "Midnight Blue", "Blue", "Blue", "Yellow", "Green", "Red", "Evergreen", "Purple", "Black", "Jet Black";

string name = "Blue,Yellow,Green";

string[] colorsToFind = name.Split(',');
int found = 0;

for (int i = 0; i < colorList.Count -1; i++)
{
    for (int j = 0; j < colorsToFind.Count; j++)
    {
        if (colorList[i] == colorsToFind[j])
        {
            found = i;
            break;
        }
    }
}

if(found != 0)
{
    return found;
}

return null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:42:17.197

当您的意思是比较发生时，您正在测试是否相等。

```
if (colorList[i].indexOf(colorsToFind[j]) != -1)
{
    found = i;
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:49:13.677

```
string[] colorList = {"Royal Blue", "Tomato Red", "Mustard Yellow", "Midnight Blue", "Blue", "Blue", "Yellow", "Green", "Red", "Evergreen", "Purple", "Black", "Jet Black"};
string[] colorsToFind = "Blue,Yellow,Green".Split(',');

for (int i = 0; i < colorList.Length - colorsToFind.Length; i++)
{
    int j;  // we'll need this later
    for (j = 0; j < colorsToFind.Length; j++)
    {
        if (colorList[j + i] != colorsToFind[j])
        {
            break;  // stop if it doesn't match
        }
    }

    // j for-loop was exited because j == colorsToFind.Length so a set matched
    if (j == colorsToFind.Length)
    {
        Console.WriteLine(i);
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:53:47.733

```
for (int i = 0; i < colorList.Count -3; i++)
{
     if (colorList[i] == colorsToFind[0] && 
         colorList[i+1] == colorsToFind[1] && 
         colorList[i+2] == colorsToFind[2])
     {
            found = i;
            break;
     }
}

for (int i = 0; i < colorList.Count - colorsToFind.count; i++)
{
    for (int j = 0; j < colorsToFind.Count; j++)
    {
        bool match = true;
        if (colorList[i+j] != colorsToFind[j])
        {
            match = false;
        }  
    }
    if (match) 
    {   
        found = i;
        break;
    }
} 
```

# c++ - 当异常掩码未设置为 eofbit 时，为什么 getline() 会抛出“std::ios_base::failure”？

> ID：13651054
> 
> 赞同：9
> 
> 时间：2012-11-30T18:34:16.893
> 
> 标签：c++, exception, getline

考虑以下代码：

```
 ifstream in;
    try {
        in.exceptions ( ifstream::failbit | ifstream::badbit );
        in.open(pConfLocation);
    } catch ( ifstream::failure e ) {
        throw std::runtime_error("Can't open configuration file\n");
    }

    vector<string> lns;
    string s;

    in.clear();
    while ( !in.eof() ){
        getline( in, s );
        boost::algorithm::trim(s);
        lns.push_back( s+='\n');
    } 
```

所以：

1.  我为 try-catch 块的需要设置了以下“异常掩码”（ ifstream::failbit | ifstream::badbit ）。该文件打开没有问题。
2.  在 while{} 块中，我知道将在文件末尾设置 eofbit。[但](http://www.cplusplus.com/reference/ios/ios/exceptions/)

> **异常掩码是所有流对象的内部值，用于指定哪些状态标志在设置时**必须引发异常。

我没有设置*ifstream::eofbit*，但无论如何在运行时出现以下错误：

```
terminate called after throwing an instance of 'std::ios_base::failure'
  what():  basic_ios::clear
The program has unexpectedly finished. 
```

我无法理解这种行为。我尝试在*while{}*之前使用*in.clear()*但没有效果。clear() 本身设置*goodbit*，据我了解，“标志必须抛出异常”（参见上面的引用），但是当*googbit*设置时，它不会导致抛出任何异常......</p>

***如果要删除***

 ***```
 in.exceptions ( ifstream::failbit | ifstream::badbit ); 
```

有用。

* * *

**在这种情况下如何使 getline() 工作？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T18:38:05.593

问题出在您的输入迭代中。`eofbit`仅在最后一次读取到达 EOF 时设置，如果下一次读取将仅读取 EOF，则不会设置。当后者发生时，`failbit`同时设置。[请参阅此处](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)的讨论。

在您的特定情况下，如果文件以换行符结尾（可能是这样），则`getline()`读取并包含该换行符并返回。`eofbit`仍然没有设置。然后下一个`getline()`直接遇到 EOF，根据它的文档，“如果函数没有提取任何元素，它会调用`setstate(failbit)`.”。***

# asp.net-mvc - Ajax.BeginForm - 获取发出请求的元素

> ID：13651055
> 
> 赞同：1
> 
> 时间：2012-11-30T18:34:18.073
> 
> 标签：asp.net-mvc

我的页面中有一些 ajax 表单，当调用 OnSuccess 函数时，我需要获取表单 ID 或表单内的某些元素，例如：

```
<li>
    @using (Ajax.BeginForm(new AjaxOptions
    {
        OnSuccess = "form.onSuccess"
    }))
    {

        @Html.TextBoxFor(m => m.TaskId)

        <button type="submit">Save</button>
    }
</li> 
```

我怎样才能得到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:48:45.950

选项1：

```
@using (Ajax.BeginForm(new AjaxOptions{OnComplete = "DefaultEditOnComplete(xhr, status, 'Person')"}))
{
    //Person data and submit button
}

function DefaultEditOnComplete(xhr, status, entityName) {

    //xhr - the ajax response
    //status - the response text, ex. "success"
    //entityName - your custom argument, in this example 'Person'

    alert('DefaultEditOnComplete fired for ' + entityName);
} 
```

选项 2：

```
 $('form').submit(function () {
   $(this).addClass('activeForm');
 });

 @using (Ajax.BeginForm(new AjaxOptions{OnSuccess= "JaxSuccess(xhr, status)"}))
{
    ....
}

function JaxSuccess(xhr, status) {
 var active = $(".activeForm");

 //Do some stuff here
 .....

 //When Done, remove the activeForm class, making everything clean
 $(".activeForm").removeClass('activeForm');
} 
```

选项 3：放弃 Ajax.BeginForm，并替换常规表单和 jquery 配对：

```
@using (Html.BeginForm("SomethingNice", "Home", FormMethod.Post, new { @id = "CoolForm", @class = "ajaxForm" }))
{
     @Html.LabelFor(m => m.Rating)
    @Html.TextBoxFor(m => m.Rating)
    @Html.LabelFor(m => m.Comment)
    @Html.TextBoxFor(m => m.Comment)
    <input type="submit" value="Submit"/>
}
   <script type="text/javascript">
    $(function() {
        $(".ajaxForm").submit(function(e) {
            e.preventDefault();
            var form = $(this);
            var jaxUrl = form.attr('action');
            var dat = form.serialize();
            alert(form.attr('id'));
            $.ajax({
                url: jaxUrl,
                data: dat,
                success: function(data) {
                    form.parent().append(data);
                },
                error: function(xhr, status) {

                }
            });

        });
    });
</script> 
```

# java - GridBagLayout 组件的位置不起作用

> ID：13651057
> 
> 赞同：1
> 
> 时间：2012-11-30T18:34:18.810
> 
> 标签：java, swing, gridbaglayout

嗨，我是 java 初学者，使用 GridBagLayout 做小 GUI。请参阅随附的代码以及输出。我想要的是根据在 gridx 和 gridy 中分配的位置将 JButtons 放置在左上角。但是它将组件放置在中心而不是按预期的左上角，如果我使用 Insets ， gridx /gridy 一切正常但不是从正确的坐标所以请查看附加的代码和图像并指导我

```
public  rect()
{     

      JPanel panel = new JPanel( new GridBagLayout());
      GridBagConstraints gbc = new GridBagConstraints();
      JButton nb1= new JButton("Button1  ");
      JButton nb2= new JButton("Button2  ");

      gbc.gridx=0;
      gbc.gridy=0 ;
      panel.add(nb1, gbc);
      gbc.gridx=1;
      gbc.gridy=1; 
      panel.add(nb2, gbc);
      panel.setVisible(true);
      JFrame  frame = new JFrame("Address Book "); 
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
      frame.setSize(300, 300 );
      frame.add(panel);

      frame.setVisible(true); 

} 
```

**输出**：想要左上角的这些按钮请指导我

![在此处输入图像描述](../Images/1779e3e565b8367be4f50e095f6d5534.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:39:50.590

我认为问题更多的是使用`setSize(..)`，您应该在将所有组件添加到可见之后和设置可见之前使用适当的并`LayoutManager`调用实例，也不需要：[`pack()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)`JFrame``JFrame``JFrame``panel.setVisible(..)`

![在此处输入图像描述](../Images/6178f54c4ebfdab60da293d440b065e0.png)

```
public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
        @Override

        public void run() {
            JPanel panel = new JPanel(new GridBagLayout());

            JButton nb1 = new JButton("Button1  ");
            JButton nb2 = new JButton("Button2  ");

            GridBagConstraints gbc = new GridBagConstraints();

            gbc.gridx = 0;
            gbc.gridy = 0;
            panel.add(nb1, gbc);

            gbc.gridx = 1;
            gbc.gridy = 1;
            panel.add(nb2, gbc);

            JFrame frame = new JFrame("Address Book ");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            frame.add(panel);

            frame.pack();
            frame.setVisible(true);
        }
    });
} 
```

# ruby-on-rails - Rails select_tag，options_for_select不显示选定的选项

> ID：13651064
> 
> 赞同：1
> 
> 时间：2012-11-30T18:34:53.970
> 
> 标签：ruby-on-rails, form-helpers

[在这里使用options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)助手遇到奇怪的行为。

我有以下代码：

```
= select_tag :mode, options_for_select([['Advanced Mode',true],['Basic Mode',false]], false) 
```

我在`false`这里使用而不是变量，因为它没有工作。即使使用上面的代码，我也永远无法`Basic Mode`在页面加载时被选中。

我觉得我必须间隔开并且遗漏了一个明显的错字或其他东西，但是查看[有关此主题的文档和其他问题，](https://stackoverflow.com/questions/4786047/select-tag-rails-question)我看不出我的代码有什么问题。我在看什么？

* * *

更新，甚至更奇怪......当我添加外部括号时它可以工作：

```
= select_tag(:mode, options_for_select(...)) 
```

# axis2 - 当 Axis2 部署 rahas 时，Apache Axis2 rahas-1.6.2.mar toSAXParseException

> ID：13651066
> 
> 赞同：1
> 
> 时间：2012-11-30T18:35:14.213
> 
> 标签：axis2

我正在编写一个`Apache Axis2`客户端来调用一些远程 Web 服务。我可以让它工作，但我还需要部署 rahas 模型，因为远程服务器正在使用安全性。当我添加`rahas-1.6.2.mar`到我的时，`$Axis_Home/repository/module`我得到以下异常。如果我删除它，那么我不会得到异常。有谁知道如何解决这一问题？

> 2012/11/29 20:45:43:567 GMT [错误] XMLConfigurator - 配置文件不针对模式 org.xml.sax.SAXParseException 进行验证：UndeclaredPrefix：无法将“xt:DEFAULT”解析为 QName：前缀“xt” ' 未声明。在 com.sun.org.apache.xerces.internal.jaxp.validation.Util.toSAXParseException(Util.java:109) 在 com.sun.org.apache.xerces.internal.jaxp.validation.ErrorHandlerAdaptor.error(ErrorHandlerAdaptor. java:104) 在 com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:382) 在 com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter. java:316) 在 com.sun.org.apache.xerces.internal.impl.xs 的 com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:429)。

# json - GWT Autobean - 如何处理列表？

> ID：13651068
> 
> 赞同：7
> 
> 时间：2012-11-30T18:35:19.303
> 
> 标签：json, gwt, autobean

我一直在尝试评估 GWT Autobean 功能以将 JSON 对象解码/编码为域对象以进行 REST 调用。

按照示例：[http ://code.google.com/p/google-web-toolkit/wiki/AutoBean#Quickstart](http://code.google.com/p/google-web-toolkit/wiki/AutoBean#Quickstart)

我能够将单个 JSON 对象转换为域对象：

```
AutoBean<Person> personBean = AutoBeanCodex.decode(factory, Person.class, JsonResources.INSTANCE.json().getText()); 
```

其中 JsonResources.INSTANCE.json() 返回一个 JSON 字符串。

但是，我没有成功从 JSON 转换 Person 对象列表。

如果有人有这方面的例子，这会有所帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-30T19:19:30.340

那么我能想到的唯一方法是创建一个特殊的autobean，它将具有`List<Person>`属性。例如：

```
public interface Result {
    void setPersons(List<Person> persons);
    List<Person> getPersons();
} 
```

以及示例 json 字符串：

```
{
   persons:[
      {"name":"Thomas Broyer"},
      {"name":"Colin Alworth"}
   ]
} 
```

*更新*：当输入 JSON 是一个数组时的解决方法（如`persons[0]`评论中所建议）。例如 JSON 看起来像这样：

```
[{"name":"Thomas Broyer"},{"name":"Colin Alworth"}] 
```

解析代码如下所示：

```
AutoBeanCodex.decode(factory, Result.class, "{\"persons\": " + json + "}").getPersons(); 
```

# node.js - Node.js HTTPParser 不调用某些回调

> ID：13651071
> 
> 赞同：3
> 
> 时间：2012-11-30T18:35:41.287
> 
> 标签：node.js, http, parsing

我在 Node.js v0.8.15 中使用 HTTPParser。不幸的是，一些回调永远不会被调用。

例如，以下代码仅调用`onHeadersComplete`. 无法让它调用`onURL`，`onHeaderField`并且`onHeaderValue`。

```
var
    HTTPParser = process.binding('http_parser').HTTPParser,
    parser = new HTTPParser(HTTPParser.REQUEST),
    request = new Buffer(
        'GET /test HTTP/1.1\r\n' +
        'Host: www.example.com\r\n' +
        'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/17.0 Firefox/17.0\r\n' +
        'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n' +
        'Accept-Language: en-US,en;q=0.5\r\n' +
        'Accept-Encoding: gzip, deflate\r\n' +
        '\r\n'
    );

parser.onURL = function() {
    console.log('onURL');
}

parser.onHeaderField = function() {
    console.log('onHeaderField');
}

parser.onHeaderValue = function() {
    console.log('onHeaderValue');
}

parser.onHeadersComplete = function() {
    console.log('onHeadersComplete');
}

parser.execute(request, 0, request.length); 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-02T13:17:42.550

对于那些从搜索引擎来到这里的人。最新版本的 Node 使用稍微不同的组织。此代码有效：

```
var HTTPParser = process.binding('http_parser').HTTPParser;

var parser = new HTTPParser(HTTPParser.REQUEST);

const kOnHeaders = HTTPParser.kOnHeaders | 0;
const kOnHeadersComplete = HTTPParser.kOnHeadersComplete | 0;
const kOnBody = HTTPParser.kOnBody | 0;
const kOnMessageComplete = HTTPParser.kOnMessageComplete | 0;
const kOnExecute = HTTPParser.kOnExecute | 0;

parser[kOnHeaders] = 
    function(headers, url) {
        console.log('kOnHeaders');
    }
parser[kOnHeadersComplete] = 
    function(versionMajor, versionMinor, headers, method,
             url, statusCode, statusMessage, upgrade, shouldKeepAlive) {
        console.log('kOnHeadersComplete');
    }
parser[kOnBody] = 
    function(b, start, len) {
        console.log('kOnBody');
    }
parser[kOnMessageComplete] = 
    function() {
        console.log('kOnMessageComplete');
    }
parser[kOnExecute] = 
    function() {
        console.log('kOnExecute');
    }

var ret = parser.execute(new Buffer(
        'GET /test HTTP/1.1\r\n' +
        'Host: www.example.com\r\n' +
        'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/17.0 Firefox/17.0\r\n' +
        'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n' +
        'Accept-Language: en-US,en;q=0.5\r\n' +
        'Accept-Encoding: gzip, deflate\r\n' +
        '\r\n'
    )); 
```

或者，有一些包装模块。该对象当前具有以下方法：

*   close - 取消解析并释放解析器 (?)
*   执行 - 读取数据块并解析它。如果标头到达缓慢，可以调用任意次数
*   完成 - 告诉解析器将不再有数据，完成解析
*   重新初始化 - 为另一种类型的消息（请求/响应）准备解析器
*   pause - IDK，可能停止解析数据添加
*   resume - IDK，也许开始解析
*   消费 - IDK，流的东西
*   unconsume - IDK，Stream 的东西
*   getCurrentBuffer - 返回当前数据收集器（？）

至于使用细节，可以参考Node源码：

*   [https://github.com/nodejs/node/blob/master/lib/_http_common.js](https://github.com/nodejs/node/blob/master/lib/_http_common.js)
*   [https://github.com/nodejs/node/blob/master/lib/_http_client.js](https://github.com/nodejs/node/blob/master/lib/_http_client.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T19:04:47.647

`process.binding`应该只被核心节点库使用。根据我对源代码的简短阅读，http 解析器 C++ 代码仅公开了一小部分事件（`onHeaders`、`onHeadersComplete`、`onBody`、`onMessageComplete`），因此我相信这些是您可以锁定的唯一事件。

解析器在内部使用来自解析器的一些额外回调，但它们不会作为事件暴露给 JS 领域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-29T11:16:47.020

2021 年 9 月不再起作用：

```
$ node test.js
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc
Aborted (core dumped)

$ node --version
v14.15.0
$ uname -a
Linux linux 5.4.0-84-generic #94~18.04.1-Ubuntu SMP Thu Aug 26 23:17:46 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux 
```

更好地使用新的 http 解析器模块[https://github.com/creationix/http-parser-js](https://github.com/creationix/http-parser-js)

然后

```
npm install http-parser-js 
```

之后，以下代码起作用：

```
HTTPParser = require('http-parser-js').HTTPParser;

var parser = new HTTPParser(HTTPParser.REQUEST);

const kOnHeaders = HTTPParser.kOnHeaders | 0;
const kOnHeadersComplete = HTTPParser.kOnHeadersComplete | 0;
const kOnBody = HTTPParser.kOnBody | 0;
const kOnMessageComplete = HTTPParser.kOnMessageComplete | 0;
const kOnExecute = HTTPParser.kOnExecute | 0;

parser[kOnHeaders] = 
    function(headers, url) {
        console.log('kOnHeaders');
    }
parser[kOnHeadersComplete] = 
    function(versionMajor, versionMinor, headers, method,
             url, statusCode, statusMessage, upgrade, shouldKeepAlive) {
        console.log('kOnHeadersComplete');
    }
parser[kOnBody] = 
    function(b, start, len) {
        console.log('kOnBody');
    }
parser[kOnMessageComplete] = 
    function() {
        console.log('kOnMessageComplete');
    }
parser[kOnExecute] = 
    function() {
        console.log('kOnExecute');
    }

var ret = parser.execute(new Buffer.from(
        'GET /test HTTP/1.1\r\n' +
        'Host: www.example.com\r\n' +
        'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/17.0 Firefox/17.0\r\n' +
        'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n' +
        'Accept-Language: en-US,en;q=0.5\r\n' +
        'Accept-Encoding: gzip, deflate\r\n' +
        '\r\n'
    )); 
```

# php - 我正在尝试查找有关以下错误的信息：致命错误：调用未定义的方法 OnlineStore::setStoreID()

> ID：13651072
> 
> 赞同：0
> 
> 时间：2012-11-30T18:35:48.187
> 
> 标签：php

我正在复制 PHP Programming with MySQL（第 10 章）的作业，并试图让它正常工作。我收到以下错误：致命错误：调用未定义的方法 OnlineStore::setStoreID()。我不明白为什么会出现问题。有人能帮助我吗？

谢谢你。

这是php代码：

```
if (class_exists("OnlineStore")) {
    if (isset($_SESSION['currentStore']))
    $Store = unserialize($_SESSION['currentStore']);
    else {
        $Store = new OnlineStore();
    }

$Store->setStoreID($storeID);
$storeInfo = $Store->getStoreInformation();
if (isset($_GET['ItemToAdd']))
    $Store->addItem();
}

else {
$ErrorMsgs[] = "The OnlineStore class is not available!";
$Store = NULL;
}
?> 
```

这是其他代码的一部分：

```
<?php
class OnlineStore {
private $DBConnect = NULL;
private $storeID = "";
private $inventory = array();
private $shoppingCart = array();
}

function __construct() {
include("inc_OnlineStoreDB.php");
$this->DBConnect = $DBConnect;
}

function __destruct() {
if (!$this->DBConnect->connect_error)
$this->DBConnect->close();
}

function setStoreID($storeID) {
if ($this->storeID != $storeID) {
    $this->storeID = $storeID;
    $SQLString = "SELECT * FROM inventory " . " where storeID = '" . $this-    >storeID . "'";
    $QueryResult = @$this->DBConnect->query($SQLString);
    if ($QueryResult === FALSE) {
        $this->storeID = "";
    }
    else {
        $this->inventory = array();
        $this->shoppingCart = array();
        while (($Row = $QueryResult->fetch_assoc())
                !== NULL) {
            $this->inventory[$Row['productID']] = array();
            $this->inventory[$Row['productID']] ['name'] =     $Row['name'];
            $this->inventory[$Row['productID']] ['description'] =     $Row['description'];
            $this->inventory[$Row['productID']] ['price'] =     $Row['price'];
            $this->shoppingCart[$Row['productID']] = 0;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:42:55.880

在这段代码中：

```
class OnlineStore {
private $DBConnect = NULL;
private $storeID = "";
private $inventory = array();
private $shoppingCart = array();
} 
```

您正在使用右花括号提前完成课程，之后您定义的所有函数都在课程之外。

# drupal-7 - 无法在 Drupal 的节点 tpl 中获取用户字段的值（使用 field_get_items）

> ID：13651076
> 
> 赞同：1
> 
> 时间：2012-11-30T18:36:06.777
> 
> 标签：drupal-7

我正在尝试在节点的模板中打印节点作者的名字，但我无法让它工作。

这是我尝试过的：

```
$author = user_load($node->uid);
$values = field_get_items('user', $author, 'field_first_name');
$value  = $values[0]['value'];
dpm($value);
print $value; 
```

`dpm($value)`打印正确的值，但`print $value`不打印任何内容。同样的情况`dpm($values)`- 它显示一个数组，其中一个数组元素 [0] 包含正确的元素（值、格式、安全值）。如果我尝试`print_r($values)`它不会打印任何东西。

此外，以下循环给了我一个“为 foreach() 提供的参数无效”警告。

```
foreach ($values as $first_name) {
    print '<pre>';
    print $first_name['value'];
    print $first_name['safe_value'];
    print '</pre>';
} 
```

如果我尝试直接访问该值，我会收到“未定义索引：包含 () 中的 und”通知。

```
 $author       = user_load($node->uid);
 $direct_value = $author->field_first_name['und']['0']['value'];
 print $direct_value; 
```

如何打印此变量？有任何想法吗？

提前致谢。

# xml - 将 *.xml 导入 FileMaker Pro

> ID：13651078
> 
> 赞同：-1
> 
> 时间：2012-11-30T18:36:18.883
> 
> 标签：xml, xslt, filemaker

我是 FileMaker 的新手，我必须将 *.xml 文件导入其中。我已阅读 FileMaker 主页上的帮助并查看了示例 *.xml 和 *.xlst-files。

不幸的是，我没有使用 xslt 的经验。我该如何解决这个问题？

这是示例 *.xml：

```
<ORDER_HEADER>
    <ORDER_INFO>
      <ORDER_ID>1860</ORDER_ID>
      <ORDER_DATE>2012-11-27</ORDER_DATE>
      <ORDER_PARTIES>
        <BUYER_PARTY>
          <PARTY>
            <PARTY_ID type="supplier_specific">999999</PARTY_ID>
            <ADDRESS>
              <NAME>Martin</NAME>
              <STREET>A-Street</STREET>
            </ADDRESS>
          </PARTY>
        </BUYER_PARTY>
        <SUPPLIER_PARTY>
          <PARTY>
            <PARTY_ID type="buyer_specific">1984</PARTY_ID>
            <ADDRESS>
              <NAME>GmbH</NAME>
              <STREET>B-Street</STREET>
            </ADDRESS>
          </PARTY>
        </SUPPLIER_PARTY>
        <INVOICE_PARTY>
          <PARTY>
            <PARTY_ID type="supplier_specific">999999</PARTY_ID>
            <ADDRESS>
              <NAME>AG</NAME>
              <STREET>C-Street</STREET>
            </ADDRESS>
          </PARTY>
        </INVOICE_PARTY>
        <SHIPMENT_PARTIES>
          <DELIVERY_PARTY>
            <PARTY>
              <ADDRESS>
                <NAME>Stadt</NAME>...</
                <NAME2>...</NAME2>
                <STREET>D-Street</STREET>
              </ADDRESS>
            </PARTY>
          </DELIVERY_PARTY>
        </SHIPMENT_PARTIES>
      </ORDER_PARTIES>
      <PRICE_CURRENCY>EUR</PRICE_CURRENCY>
      <TERMS_AND_CONDITIONS>...</TERMS_AND_CONDITIONS>
      <REMARK type="order">...</REMARK>
    </ORDER_INFO>
  </ORDER_HEADER> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:12:01.967

如果您不了解 XSLT，那么唯一的技巧就是学习它。查看 FileMaker/XML 类别中的其他问题；有一些非常详细的例子，例如[这个](https://stackoverflow.com/a/12134342/478521)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T07:06:02.890

You are in luck:

```
File > Import Records > XML Data Source 
```

# javascript - CSS 文本溢出前置省略号

> ID：13651079
> 
> 赞同：1
> 
> 时间：2012-11-30T18:36:20.977
> 
> 标签：javascript, css, text

我有一个`ul>li`包含文件路径列表的结构。它在一个大约 200 像素宽的容器中，因此它会将较长的路径沿一条线包裹起来，这可以正常工作但并不理想。

我可以使用`text-overflow: ellipses`哪个效果很好，除了我主要关心的是能够看到文件名，所以最好将它切断开头并显示结尾。

我很确定这在 CSS 中是不可能的，所以我假设我需要使用 JS，唯一的问题是我需要它尽可能不显眼 -`li`对象是时引用的文本点击。

关于解决此问题的好方法的任何想法？

我知道人们总是想要代码，所以这就是我正在做的事情：http: [//jsfiddle.net/qbvcn/](http://jsfiddle.net/qbvcn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:48:47.757

`text-overflow`是一个不错的 CSS 功能，但它在某种程度上受限于它提供的功能。它所做的只是截断文本并在文本末尾添加一个省略号；它没有选项或灵活性来做你在这里要求的事情。

当 Mozilla 在 FF7 之前拒绝在 Firefox 中支持它时，很多人（[包括我自己](https://stackoverflow.com/questions/4927257/text-overflowellipsis-in-firefox-4-and-ff5)）都大惊小怪，但 Mozilla 由于缺乏灵活性而给出的不早支持它的理由是正确的。

一个简单的事实是，如果您想要的不仅仅是一个简单的尾随省略号，您需要在 Javascript 中完成。@GolezTrol 在评论中指出的[ThreeDots jQuery 插件可能很有用。](http://tpgblog.com/threedots/)不过，还有其他选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:58:06.653

一个简单的解决方案是这样的（假设您愿意使用 jQuery）：

```
​$('li').each(function() {
    var $this = $(this);
    if ($this.text().length > 20) {
        $this.html($this.text().replace(/^(.*)(.{17})$/, '<span style="display:none">\$1</span><span class="ellipsis">...</span>\$2'));
    }
});​​​​​​​ 
```

如果您知道元素可以容纳的字符数，这实际上只会起作用。尽管您可以通过添加一些 javascript 来为您计算此值来克服此问题，但[请参阅此问题](https://stackoverflow.com/questions/8113874/how-to-count-number-of-characters-in-a-line-using-javascript)。

# mysql - 对 Int 字段使用包含时动态 Linq 失败

> ID：13651080
> 
> 赞同：2
> 
> 时间：2012-11-30T18:36:21.567
> 
> 标签：mysql, entity-framework, linq-to-entities, entity-framework-4.1

我正在使用 Entity Frameworks 4.1.0.0 和 MySQL.Data.Entity 6.5.4.0，当我尝试为一系列整数生成动态查询时，出现以下错误：

> “Int32”类型中不存在适用的方法“包含”

当使用类似的结构来检查字符串时，这似乎工作正常。但我想扩展它以支持我在数据中拥有的其他数据库字段。

代码示例：

```
 int[] ids = new int[] { 1, 3, 4 };

        IQueryable<entityname> list = db.tablename.Where("Id.Contains(@0)", ids); 
```

我已将 Dynamic.cs 添加到我的项目中，并跟随 [http://blog.walteralmeida.com/2010/05/advanced-linq-dynamic-linq-library-add-support-for-contains-extension-。 html](http://blog.walteralmeida.com/2010/05/advanced-linq-dynamic-linq-library-add-support-for-contains-extension-.html) ，但使用我通过 Nuget 加载的 Dynamic 并没有什么区别。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T20:19:33.857

语法略有不同：

```
IQueryable<entityname> list = db.tablename.Where("@0.Contains(outerIt.Id)", ids); 
```

按照您所指的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-29T00:46:40.803

如果您需要检查给定（变量）int 值是否包含在实体列中，您可以使用 Dynamic Linq 执行以下操作：

```
return query.Where(String.Format("{0}.ToString().Contains(@0)", field), value); 
```

查看[此答案](https://stackoverflow.com/a/58151331/1233379)以了解可以以相当无缝的方式使用字符串、整数和布尔列类型执行此类任务的扩展方法。

# php - 使用 PHP 脚本的多个收件人？

> ID：13651083
> 
> 赞同：0
> 
> 时间：2012-11-30T18:36:42.680
> 
> 标签：php, html, forms, email

所以问题是我希望我的 PHP 表单有多个收件人。

发生的情况是站点用户输入电子邮件，然后输入另一个电子邮件给另一个人（例如那里的医生）。

所以我需要的是要通过电子邮件发送给的医生。

这就是我用来知道成功的东西

```
$mail_to = $field_emaildoc .$field_email; 
```

这似乎有效？

任何想法都会很棒:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:43:54.243

一种选择是在标题中添加“抄送”：

```
$sender_email = 'email@domain.com';
$sender_name = 'YOUR NAME';
$send_to = 'email@domain.com';
$send_to_copy = 'anotheremail@domain.com';
$message = 'THIS IS YOUR MESSAGE';
$subject = 'THIS IS YOUR SUBJECT';

$headers = 'Content-type: text/html; charset=iso-8859-1' . "\n";
$headers .= 'MIME-Version: 1.0' . "\n";
$headers .= "From: $sender_name<" . $sender_email . ">" . "\r\n";
$headers .= "X-Sender: $sender_name<" . $sender_email . ">" . "\n";
$headers .= "X-Mailer: PHP " . phpversion() . "\n";
$headers .= "X-Priority: 3" . "\n";
$headers .= "X-Sender-IP: " . $_SERVER['REMOTE_ADDR'] . "\n";
$headers .= "Return-Path: $sender_name<" . $sender_email . ">" . "\r\n";
$headers .= "Reply-To: $sender_name<" . $sender_email . ">" . "\r\n"; 
$headers .= "Cc: $send_to_copy" . "\r\n"; 

mail($send_to,$subject,$message,$headers); 
```

这样做的问题是，接收电子邮件的人可以看到谁被复制了。另一种方法是使用：“Bcc”而不是“Cc”，或者只使用该`mail()`功能两次并删除“Cc”或“Bcc” ：

```
mail($send_to1,$subject,$message,$headers);
mail($send_to2,$subject,$message,$headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:38:13.777

您应该在邮件地址之间放置*逗号。***在此处查看to**参数的说明：http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:38:25.243

你需要一个逗号：

```
$mail_to = $field_emaildoc . ',' . $field_email; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:39:45.313

使用 PHP 的默认[邮件](http://php.net/manual/de/function.mail.php)功能。

收件人由逗号分隔。

当你想要抄送和密件抄送时，你可以设置标题。来自 PHP.net 的示例：

```
$header .= 'To: Simone <simone@example.com>, Andreas <andreas@example.com>' . "\r\n";
$header .= 'From: Geburtstags-Erinnerungen <geburtstag@example.com>' . "\r\n";
$header .= 'Cc: geburtstagsarchiv@example.com' . "\r\n";
$header .= 'Bcc: geburtstagscheck@example.com' . "\r\n";

mail($empfaenger, $betreff, $nachricht, $header); 
```

# web-services - Web App 组件的配方和设计模式

> ID：13651084
> 
> 赞同：1
> 
> 时间：2012-11-30T18:36:43.827
> 
> 标签：web-services, security, web-applications, web, web-application-project

我目前正在与一个公司项目的开发人员团队合作，以创建产品和定价信息的集中存储库。这将为公司内部使用和外部客户使用而构建。除了存储产品和定价信息的基本功能之外，我们还需要建立一个基础设施来适应：

*   REST API 端点
*   开发/暂存/部署工作流程（特别是在实时环境中对记录执行更新）
*   日志记录
*   分析
*   报告
*   安全性（身份验证和授权）。

浏览列表，它看起来像是 Web 应用程序的一组非常常见的要求，我怀疑我的公司正在开辟任何新的领域。那么，是否有任何特定资源（框架、技术堆栈、文章、书籍）可以帮助我了解其他 Web 应用程序如何解决这些问题？

关于团队的一些背景。该团队使用 PHP、Mongo 和 MySQL 作为后端，并在前端使用基本的 HTML、CSS、JQuery 开发了一些中小型 Web 应用程序。该团队熟悉设计模式（即四人组），但迄今为止尚未从事任何需要上述所有元素的工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:04:06.940

可能值得尝试使用像 Zend、Yii 甚至 Ruby on Rails 或 Django 这样的可靠 Web 开发框架，它们不是 PHP 框架，但相当成熟且结构良好。即使您不打算使用该框架进行开发，您也会获得一些关于如何构建 Web 应用程序、如何实现日志记录和常见 Web 安全功能的好主意。

就部署和工作流程而言，如果您还没有阅读[极限编程，您可能希望阅读一下。](https://rads.stackoverflow.com/amzn/click/com/0201708426)它描述了当今许多开发人员认为是相当经典的敏捷项目管理方法，但它也涉及重要的实践，例如测试和持续集成，在我看来，它们是开发工作流程中非常重要的组成部分。如果您作为一个团队从头开始，您将从实施可靠的敏捷方法中受益匪浅——或者至少从测试和持续集成的坚实基础中受益。

对于 REST 样式应用程序的示例，您可能希望了解流行的开源实现是如何工作的。其中一些框架将内置 REST 结构，但有许多开源选项，其中一些在[此处](https://stackoverflow.com/questions/3466179/best-lightweight-restful-framework-for-php-5-3)讨论。

[对于分析，谷歌在这里](http://www.google.com/analytics/learn/index.html)有相当多的文档。

就报告而言，我不清楚您需要什么，但如果您在谈论日志解析器和错误或停机报告器，那么有一些出色的工具，包括持续集成自动化工具，例如[Atlassian 的 Bamboo](http://www.atlassian.com/software/bamboo/overview)，它将提供一些报告帮助。这些可以帮助您完成部分报告过程，但根据我的经验，大型、复杂的 Web 应用程序可以从自定义报告元素中受益，从一开始就将其视为开发过程的一部分。以编程方式解析日志并不难，我认为没有一刀切的实现。

附带说明一下，如果您愿意为它们付费，Atlassian 有一些[出色的开发工具](http://www.atlassian.com/software)，但开源替代品应该不难找到，例如无处不在的用于工单跟踪的[Trac](http://trac.edgewall.org)，以及带有集成 wiki 的基本项目管理.

我不能说我知道一个单一的、全面的位置可以为您提供所需的所有信息[（至少现在还没有！）](http://docs.webplatform.org/wiki/Main_Page)，但希望您能从这个答案中收集到一些有趣的东西。与一个新团队一起开始一些严肃的 Web 开发项目（如果我正确地解释了你的情况）可能是一个非常有趣的挑战。祝你好运！

# jquery - 单个 jQuery 选择器中的两个上下文对象

> ID：13651086
> 
> 赞同：0
> 
> 时间：2012-11-30T18:36:45.613
> 
> 标签：jquery

我想知道是否有办法为 jQuery 选择器提供两个对象作为上下文。以下代码段有效，但在语法上缺乏一定的技巧。

```
 jQ('#some_id_or_selector', first_jQ_obj.add(second_jQ_obj) ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:41:37.997

尝试使用逗号分隔的上下文，如下所示，

```
$('someselector', 'context1, context2') 
```

或者简单地说，

```
$('context1, context2').find('someselector') 
```

**演示： http:** [//jsfiddle.net/ud4MU/](http://jsfiddle.net/ud4MU/)和[http://jsfiddle.net/ud4MU/1/](http://jsfiddle.net/ud4MU/1/)

**注意：**如果它是选择器中的某个 ID，那么您可以按 ID 选择元素，`$('#some_id')`而不是使用任何上下文。

既然你有 jQuery 对象，你可以像下面那样做，

```
$context1.add($context2).find('selector'); 
```

**演示：http:** [//jsfiddle.net/ud4MU/3/](http://jsfiddle.net/ud4MU/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:41:44.467

`.find()`功能怎么样

```
first_jQ_obj.add(second_jQ_obj).find('#some_id_or_selector' ) 
```

但是HTML页面中的**ID**应该是**唯一的**..

所以

`jQ('#some_id_or_selector')` 应该足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:41:20.593

你可以这样做 -

```
jQ('selector, selector, selector').doStuff(.... 
```

您还可以使用层次结构 -

```
jQ('parent', 'descnedants').doStuff(... 
```

（修正逗号位置）

# python - 是否可以使用 pyodbc 读取在 Paradox gui 中打开的 Paradox 表？

> ID：13651087
> 
> 赞同：0
> 
> 时间：2012-11-30T18:36:50.443
> 
> 标签：python, odbc, pyodbc, paradox

我在一个管理非常糟糕的遗留 Paradox 数据库系统的环境中工作。（我不是管理员。）我一直在使用 pyodbc 与我们的表进行交互，基本功能似乎可以工作。这是一些（工作）测试代码：

```
import pyodbc

LOCATION = "C:\test"

cnxn = pyodbc.connect(r"Driver={{Microsoft Paradox Driver (*.db )\}};DriverID=538;Fil=Paradox 5.X;DefaultDir={0};Dbq={0};CollatingSequence=ASCII;".format(LOCATION), autocommit=True, readonly=True)
cursor = cnxn.cursor()
cursor.execute("select last, first from test")
row = cursor.fetchone()
print row 
```

问题是我们大多数重要的表几乎总是会在某人的 Paradox GUI 中打开。每当我尝试`select`从其中一个表中执行操作时，我都会收到此错误：

```
pyodbc.Error: ('HY000', "[HY000] [Microsoft][ODBC Paradox Driver] Could not lock 
table 'test'; currently in use by user '(unknown)' on machine '(unknown)'. (-1304) 
(SQLExecDirectW)") 
```

`cursor.execute()`很明显，这是因为 pyodbc 在调用表时会尝试锁定表。这种行为非常有意义，因为`cursor.execute()`运行任意 SQL 代码并可能更改表。

但是，Paradox 本身（通过其 gui）似乎可以很好地处理多个用户。如果您在人们使用表格时尝试重组表格，它只会给您类似的错误。

有什么办法可以让 pyodbc 使用某种只读模式，这样它就不必在我这样做的时候锁定表`select`？还是锁定了我无法解决的工作原理的基本部分？

使用其他模块的解决方案也完全没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:21:07.833

好的，我终于想通了。

显然，odbc 不喜欢没有主键的 Paradox 表。在任何情况下都不能更新没有主键的表，也不能从没有主键的表中读取数据，除非您是唯一尝试访问该表的用户。

不相关的是，如果您不提供密码，您会从受密码保护的表中获得基本相同的错误消息。

所以我在两个不同的表上测试我的脚本，其中一个有密码和主键，而另一个没有。我假设错误消息具有相同的根本原因，但实际上是两个不同的问题，具有不同的解决方案。

如果它们在某人的 GUI 中打开，似乎仍然无法访问没有主键的表，但这是一个较小的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:40:40.020

确保您在[此处](http://code.google.com/p/pyodbc/)`pyobdc`拥有(3.0.6)的最新版本，根据他们的说法，他们

> 添加了 Cursor.commit() 和 Cursor.rollback()。现在可以在代码中只使用游标，而不是跟踪连接和游标。
> 
> 添加了 readonly 关键字来连接。如果设置为 True，则 SQLSetConnectAttr SQL_ATTR_ACCESS_MODE 设置为 SQL_MODE_READ_ONLY。这可以为某些驱动程序提供更好的锁定语义或速度。
> 
> 修复了读取超过 4K 的 SQL Server XML 数据类型的错误。

另外，我已经在一个悖论服务器上使用它进行了测试`readonly`，它*确实*有效。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T16:15:58.480

我刚刚发布了一个 Python 库，用于通过 pxlib C 库读取 Paradox 数据库文件：[https](https://github.com/mherrmann/pypxlib) ://github.com/mherrmann/pypxlib 。这在文件级别上运行，因此还应该让您独立于当前正在访问它的其他人来读取数据库。由于它不同步读/写访问，因此您必须小心！

# python - Python 应用程序中是否需要“cgi.escape”？

> ID：13651090
> 
> 赞同：3
> 
> 时间：2012-11-30T18:36:56.263
> 
> 标签：python, cgi, code-injection

正在查看开发人员的代码。他做了一些我以前在 Python 应用程序中从未见过的事情。他的背景是 PHP 并且刚刚学习 python，所以我不知道这是否可能是他习惯使用的不同系统架构的遗留问题。

他告诉我，这段代码的目的是防止用户通过代码插入攻击应用程序。我很确定这对我们的用例来说是不必要的，因为我们从不将数据评估为代码，但我只是想确保并询问社区。

```
# Import library
from cgi import escape

# Get information that the client submitted
fname   = GET_request.get('fname',   [''] )[0]

# Make sure client did not submit malicious code <- IS THIS NECESSARY?
if fname:
    fname = escape(fname) 
```

*   这在 Python 应用程序中通常是必需的吗？
*   在什么情况下需要？
*   什么情况下不需要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T17:33:09.780

如果用户输入进入数据库或其他任何可能被执行的地方，那么代码注入可能是个问题。

[这个](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection?lq=1)问题询问如何防止 php 中的代码注入，但原理是相同的——执行包含恶意代码的 SQL 查询，可能会执行诸如删除所有数据之类的操作。

[转义](http://docs.python.org/2/library/cgi.html#cgi.escape)函数将<、> 和 & 字符转换为 html 安全序列。

从这两个链接来看，escape() 本身似乎还不够，但确实需要做一些事情来阻止恶意代码。当然，这很可能会在您的代码中的其他地方得到处理。

# google-chrome-extension - 未捕获的 ReferenceError：NPObject 已删除

> ID：13651091
> 
> 赞同：1
> 
> 时间：2012-11-30T18:36:57.703
> 
> 标签：google-chrome-extension, npapi

当我运行我的 chrome 扩展时，我收到一个错误：“未捕获的 ReferenceError：NPObject 已删除”。Atm 我刚刚注意到 .dll 文件在清单中的位置，也许它不应该那样工作，但我不知道你必须在 chrome 网站上的任何地方安装它。所以有人知道这个错误的根源是什么吗？

我的 HTML：

```
<html>
<head>
</head>
<body>

<embed type="application/x-npNewPlugin" id="pluginId">  
<script src='Test.js'></script>

</body>
</html> 
```

更改`<embed>`with`<object>`不会改变我的 JavaScript 的结果：

```
 var plugin = document.getElementById("pluginId");
  var result = plugin().valid;
  console.log("my plugin returned: " + result); 
```

和我的清单：

```
{
  "name": "npNewPlugin",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "plugins": [
    { "path": "npNewPlugin.dll"}
  ],
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup":"Test.htm"
  }
} 
```

当我转到 CMD 和`regsvr32`文件`.dll`时，一切都正确加载，但是我认为您不必注册它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:18:25.633

使用你的 npApi 插件不需要调用

```
plugin() 
```

使用跟随

```
 var plugin = document.getElementById("pluginId");
 var result = plugin.valid;
 console.log("my plugin returned: " + result); 
```

阅读[https://developer.chrome.com/extensions/npapi.html](https://developer.chrome.com/extensions/npapi.html)

# sql-server-2008 - SQL Server 2008 活动监视器

> ID：13651096
> 
> 赞同：4
> 
> 时间：2012-11-30T18:37:06.637
> 
> 标签：sql-server-2008

在查看 SQL Server 中的 Activity Monitor 时，我注意到在“Recent Expensive Queries”选项卡下，“Executions / min”列似乎膨胀到比应有的高得多的数字。这个数字实际上意味着什么？从字面上看，SQL 查询在一分钟内执行了多少次，还是这个数字代表其他东西？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:41:54.143

您正在分析的“昂贵查询”可能正在使用其他子查询（比如说 10）。那么你的“执行次数/分钟”计数可能高出 10 倍吗？由于为每个子查询重新编译执行计划？

[在这里](http://social.msdn.microsoft.com/Forums/en/sqldatabaseengine/thread/6f147fb2-3cd8-46c7-9328-dd4f5ed2d076)找到了这个答案：

> Execution/Min 表示查询每分钟的执行次数，sys.dm_exec_query_stats 中的 execution_count 列表示自上次编译计划以来执行的次数。execution_count 的值不等于 Execution/Min 是正常的，因为如果您的查询的执行计划在执行过程中重新编译或重新生成，那么 execution_count 将被重置为 0 并重新计数。例如，如果这个insert语句包含在一个事务块中，那么执行计划的重新编译可能是由另一个语句的执行计划重新编译引起的，因此execution_count将被重置为0并重新计数。
> 
> 请参阅以下链接以获取更多详细信息：
> 
> > sys.dm_exec_query_stats： http: [//msdn.microsoft.com/en-us/library/ms189741.aspx](http://msdn.microsoft.com/en-us/library/ms189741.aspx) 活动监视器： http://msdn.microsoft.com/en-us/library/cc879320(v=SQL.100 [) .aspx](http://msdn.microsoft.com/en-us/library/cc879320(v=SQL.100).aspx)
> 
> 谢谢， 乔伟林

# javascript - 如何将相机图像作为附件传递给邮件。（Android、iOS、Windows Phone、Phonegap）

> ID：13651098
> 
> 赞同：1
> 
> 时间：2012-11-30T18:37:17.667
> 
> 标签：javascript, android, ios, eclipse, cordova

我正在为我的工作（社会住房）开发一个应用程序，我希望它能够允许用户拍照并将其附加到电子邮件中，以便他们可以将其发送给我们（维修图片等）

我正在使用 Phonegap 和 Eclipse，因为我希望该应用程序是跨平台的，但目前主要在 Android 中进行测试。有没有办法做到这一点？我目前使用下面的代码无济于事。

```
 <script typr="text/javascript" charset="utf-8">

    function camera()
    {
        navigator.camera.getPicture(onSuccess, onFail, { quality: 20,
            destinationType: Camera.DestinationType.DATA_URL
         }); 

        function onSuccess(imageData) {
            var image = document.getElementById('image');
            var data = "data:image/jpeg;base64," + imageData;

            var link = "mailto:johnsmith@gmail.com?body="+data+"&subject=john smith";

            window.location.href = link;
        }

        function onFail(message) {
            alert('Failed because: ' + message);
        }

    }
    </script> 
```

到目前为止，我已经尝试使用 mailto: &attachment 方法将数据传递到邮件应用程序，但从未附加图像（大多数邮件应用程序将此视为安全漏洞）。然后我尝试在邮件正文中嵌入图片的base64代码（如上图）。不幸的是，base64 只显示为纯文本，使邮件无响应。我还尝试在 Phonegap 中使用图像 URI 而不是 Base64 方法，但这会在我的 logcat 中引发“image.URI is not defined”错误。

这可能吗？我知道我可以将意图仅用于 android，如此处另一个问题中所述，但这不适用于 iOS 等。

任何帮助将不胜感激。

**编辑 2012 年 2 月 12 日**

我在这里想要实现的功能与您在原生 Android 画廊/相机应用程序中获得的功能相同。拍照后，您有共享选项，其中之一是邮件。如果您选择通过邮件共享，图像将作为附件传递到邮件应用程序。有什么方法可以在我的应用程序中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:13:56.607

所以看起来这个问题没有“一刀切”的解决方案。

mailto: 方法只是不会在大多数现代邮件应用程序中传递附件，因为它被视为安全风险。因此，无论它是 imageURI 还是 base64 编码的图像， mailto: 都不起作用。'subject' 和 'body' 的传递对于任何想要使用上述代码预先填写没有附件的电子邮件的人来说效果很好。

在其他地方提出这个问题之后，看起来我需要使用 phonegap 插件（iOS 的 emailComposer 和 Android 的 WebIntent）才能将图像成功地从我的 phonegap 应用程序传递到邮件应用程序。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:46:35.870

使用此 JAVA 代码发送带有照片和文字的电子邮件。

```
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.security.Security;
import java.util.Properties;

import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.mail.Message;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class GMailSender extends javax.mail.Authenticator {
    private String mailhost = "smtp.gmail.com";
    private String user;
    private String password;
    private Session session;

    static {
        Security.addProvider(new JSSEProvider());
    }

    public GMailSender(String user, String password) {
        this.user = user;
        this.password = password;

        Properties props = new Properties();
        props.setProperty("mail.transport.protocol", "smtp");
        props.setProperty("mail.host", mailhost);
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");
        props.setProperty("mail.smtp.quitwait", "false");

        session = Session.getDefaultInstance(props, this);
    }

    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(user, password);
    }

    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {
        try {
            MimeMessage message = new MimeMessage(session);
            DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));
            message.setSender(new InternetAddress(sender));
            message.setSubject(subject);
            message.setDataHandler(handler);
            if (recipients.indexOf(',') > 0)
                message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));
            else
                message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));
            Transport.send(message);
        } catch (Exception e) {

        }
    }

    public synchronized void sendMail(String subject, String body, String senderEmail, String recipients, String filePath,String logFilePath) throws Exception {
        boolean fileExists = new File(filePath).exists();
        if (fileExists) {

            String from = senderEmail;
            String to = recipients;
            String fileAttachment = filePath;

            // Define message
            MimeMessage message = new MimeMessage(session);
            message.setFrom(new InternetAddress(from));
            message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
            message.setSubject(subject);

            // create the message part
            MimeBodyPart messageBodyPart = new MimeBodyPart();

            // fill message
            messageBodyPart.setText(body);

            Multipart multipart = new MimeMultipart();
            multipart.addBodyPart(messageBodyPart);

            // Part two is attachment
            messageBodyPart = new MimeBodyPart();
            DataSource source = new FileDataSource(fileAttachment);
            messageBodyPart.setDataHandler(new DataHandler(source));
            messageBodyPart.setFileName("screenShoot.jpg");
            multipart.addBodyPart(messageBodyPart);

            //part three for logs
            messageBodyPart = new MimeBodyPart();
            DataSource sourceb = new FileDataSource(logFilePath);
            messageBodyPart.setDataHandler(new DataHandler(sourceb));
            messageBodyPart.setFileName("logs.txt");
            multipart.addBodyPart(messageBodyPart);

            // Put parts in message
            message.setContent(multipart);

            // Send the message
            Transport.send(message);
        }else{
            sendMail( subject, body,  senderEmail,  recipients);
        }
    }

    public class ByteArrayDataSource implements DataSource {
        private byte[] data;
        private String type;

        public ByteArrayDataSource(byte[] data, String type) {
            super();
            this.data = data;
            this.type = type;
        }

        public ByteArrayDataSource(byte[] data) {
            super();
            this.data = data;
        }

        public void setType(String type) {
            this.type = type;
        }

        public String getContentType() {
            if (type == null)
                return "application/octet-stream";
            else
                return type;
        }

        public InputStream getInputStream() throws IOException {
            return new ByteArrayInputStream(data);
        }

        public String getName() {
            return "ByteArrayDataSource";
        }

        public OutputStream getOutputStream() throws IOException {
            throw new IOException("Not Supported");
        }
    }
} 
```

# sql-server-2008 - 无法使用 SqlConnection 连接到 SQL Server（但使用 OleDbConnection 可以）

> ID：13651100
> 
> 赞同：0
> 
> 时间：2012-11-30T18:37:43.460
> 
> 标签：sql-server-2008, sqlconnection, oledbconnection

我有一个在 Amazon RDS 上运行的 SQL Server 2008 实例和另一个在 Amazon EC2 实例上作为 SQL 2008 Express 安装运行的测试数据库服务器。

我可以使用 SQL Server Management Studio（和其他工具，如 Navicat）连接到这两个服务器，所以我很高兴服务器被正确配置为接受远程 TCP 连接并且没有防火墙问题。

但是，当我尝试使用 C# 应用程序建立连接时`SqlConnection`，它会因超时而失败。但是，如果我尝试使用它进行相同的实验，`OleDbConnection`它工作正常（在调整连接字符串以包含提供程序信息之后）。

作为比较，如果我在 EC2 实例上运行实验，使用`SqlConnection`带有建立连接的连接字符串`(local)`，它也可以正常工作，所以我假设问题与`SqlConnection`远程使用有关。

有谁知道我需要做什么才能开始`SqlConnection`工作，或者我可以采取哪些步骤来进一步诊断问题的原因？

非常感谢您的建议，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:39:03.320

显然，这种行为是由[这个问题](http://connect.microsoft.com/VisualStudio/feedback/details/729323)引起的，就我而言，这特别是因为我的 PCTools 防火墙对由`SqlConnection`.

我通过卸载 PCTools 实现了一个临时解决方法（仅仅禁用防火墙是不够的），所以我现在必须找到一个符合 Windows/SQL 客户端期望的新防火墙。

# linq - 如何在实体框架中进行“嵌套”急切加载？

> ID：13651102
> 
> 赞同：1
> 
> 时间：2012-11-30T18:37:48.523
> 
> 标签：linq, entity-framework

设想：

```
Employee:     EmployeeId   (PK)    DepartmentId_FK  (FK)   Name and other fields
Department:   DepartmentId (PK)    CompanyId_FK     (FK)   Name and other fields
Company:      CompanyId    (PK)                            Name and other fields 
```

如何构建可以连接三个表并返回 EmployeeName、DepartmentName 和 CompanyName 的 linq 查询？

以下语法不起作用，`Company`因为`Employee.cs`.

```
var model = DataContext.Employee
                .Include("Employer")
                .Include("Company"); 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:59:05.920

试试这个 ：

```
 var data = DataContext.Employees.Include("Department").Include("Department.Company"); 
```

但是请谨慎使用，因为如果有大量数据，急切加载可能会造成伤害。

# php - 如何将 URL 的开头添加到变量中？

> ID：13651105
> 
> 赞同：-2
> 
> 时间：2012-11-30T18:37:58.177
> 
> 标签：php, web-scraping

[我编写了一个简短的 PHP 脚本来从http://www.imgur.com](http://www.imgur.com)的主页上抓取图像。这是代码：

```
$imgur = file_get_html('http://www.imgur.com');
foreach($imgur->find('div[class="post"]') as $images)
    echo "<span id=\"images\">$images</span>"; 
```

问题是在使用 class=post 抓取 div 后，图片链接到图片库，但“a href=”看起来像 /gallery/48ZPT 而不是[http://www.imgur.com/gallery/ 48ZPT](http://www.imgur.com/gallery/48ZPT)。

因此，当我单击我网站上图像所在的链接时，它会将我带到 mysite.com/gallery/48ZPT 但该目录不存在，因此出现错误。

无论如何，在从站点中提取每个变量 href 时添加“http://www.imgur.com”吗？

我知道这可能有点令人困惑，但我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:41:36.363

```
$imgur = file_get_html('http://www.imgur.com');
foreach($imgur->find('div[class="post"]') as $images)
{
    echo "<span id=\"images\">"."http://www.imgur.com"."$images</span>";
} 
```

# etl - 如果 Kettle ETL 中不存在文件夹，如何避免失败？

> ID：13651115
> 
> 赞同：1
> 
> 时间：2012-11-30T18:38:29.737
> 
> 标签：etl, pentaho, kettle

使用 Pentaho 的 Kettle 工具，我有一个转换设置，它从一个 Get File Names 步骤开始，以从一个目录中获取所有 XML 文件。步骤配置如下：

```
File/Directory: "c:\DataFolder"
Wildcard (RegExp): ".*xml" 
```

这很好用，并为我提供了文件夹“DataFolder”中的所有 XML 文件。

但是，如果 DataFolder 不存在（因为其他人删除了它），我会收到此错误：

```
2012/11/30 12:15:27 - FileInputList - ERROR (version 4.3.0-stable, build 16786 from 2012-04-24 14.11.32 by buildguy) : org.apache.commons.vfs.FileNotFolderException: Could not list the contents of "file:///c:/DataFolder" because it is not a folder.
2012/11/30 12:15:27 - FileInputList - ERROR (version 4.3.0-stable, build 16786 from 2012-04-24 14.11.32 by buildguy) :  at org.apache.commons.vfs.provider.AbstractFileObject.getChildren(Unknown Source)
2012/11/30 12:15:27 - FileInputList - ERROR (version 4.3.0-stable, build 16786 from 2012-04-24 14.11.32 by buildguy) :  at org.pentaho.di.core.fileinput.FileInputList.createFileList(FileInputList.java:268)
2012/11/30 12:15:27 - FileInputList - ERROR (version 4.3.0-stable, build 16786 from 2012-04-24 14.11.32 by buildguy) :  at org.pentaho.di.trans.steps.getfilenames.GetFileNamesMeta.getFileList(GetFileNamesMeta.java:690)
2012/11/30 12:15:27 - FileInputList - ERROR (version 4.3.0-stable, build 16786 from 2012-04-24 14.11.32 by buildguy) :  at org.pentaho.di.trans.steps.getfilenames.GetFileNames.init(GetFileNames.java:336)
2012/11/30 12:15:27 - FileInputList - ERROR (version 4.3.0-stable, build 16786 from 2012-04-24 14.11.32 by buildguy) :  at org.pentaho.di.trans.step.StepInitThread.run(StepInitThread.java:62)
2012/11/30 12:15:27 - FileInputList - ERROR (version 4.3.0-stable, build 16786 from 2012-04-24 14.11.32 by buildguy) :  at java.lang.Thread.run(Unknown Source) 
```

或者简而言之：FileNotFolderException：无法列出“file:///c:/DataFolder”的内容，因为它不是文件夹。

如果该文件夹不存在，我只想停止转换而不继续。

我尝试使用 File Exists 步骤与 Filter Rows 步骤相结合来提供条件，但没有运气。[Hello World 教程](http://wiki.pentaho.com/display/EAI/04.+Refining+Hello+World)向您展示了如何检查文件是否存在，而不是整个文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:15:01.740

创建一个父作业，添加这个[http://wiki.pentaho.com/display/EAI/Check+if+a+folder+is+empty](http://wiki.pentaho.com/display/EAI/Check+if+a+folder+is+empty)然后如果 FALSE 将您的流程重新分配到您的转换

或者您可以尝试创建文件夹步骤作业：[http ://wiki.pentaho.com/display/EAI/Create+a+folder](http://wiki.pentaho.com/display/EAI/Create+a+folder)

# python - 如何在 Pandas read_csv 函数中过滤加载行？

> ID：13651117
> 
> 赞同：120
> 
> 时间：2012-11-30T18:38:41.750
> 
> 标签：python, pandas

如何使用 pandas 过滤要加载到内存中的 CSV 行？这似乎是一个应该在`read_csv`. 我错过了什么吗？

示例：我们有一个带有时间戳列的 CSV，我们只想加载时间戳大于给定常量的行。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-11-30T21:31:28.067

在将 CSV 文件加载到 pandas 对象之前，没有过​​滤行的选项。

您可以加载文件然后使用过滤器`df[df['field'] > constant]`，或者如果您有一个非常大的文件并且您担心内存耗尽，则使用迭代器并在连接文件块时应用过滤器，例如：

```
import pandas as pd
iter_csv = pd.read_csv('file.csv', iterator=True, chunksize=1000)
df = pd.concat([chunk[chunk['field'] > constant] for chunk in iter_csv]) 
```

您可以改变`chunksize`以适合您的可用内存。有关更多详细信息，请参见[此处](http://pandas.pydata.org/pandas-docs/stable/io.html#iterating-through-files-chunk-by-chunk)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T19:43:40.377

我没有找到在`read_csv`. 但是，`read_csv`返回一个 DataFrame，可以通过 boolean vector 选择行来过滤它`df[bool_vec]`：

```
filtered = df[(df['timestamp'] > targettime)] 
```

这是选择 df 中的所有行（假设 df 是任何 DataFrame，例如`read_csv`调用的结果，至少包含一个 datetime 列`timestamp`）`timestamp`列中的值大于 targettime 的值。[类似的问题](https://stackoverflow.com/questions/11869910/pandas-filter-rows-of-dataframe-with-operator-chaining)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-02T13:59:53.467

如果过滤的范围是连续的（通常使用时间（戳）过滤器），那么最快的解决方案是对行范围进行硬编码。简单地结合`skiprows=range(1, start_row)`参数`nrows=end_row`。然后导入需要几秒钟，而接受的解决方案需要几分钟。考虑到导入时间的节省，初始的一些实验`start_row`并不是一个巨大的成本。请注意，我们使用`range(1,..)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-11T21:13:14.847

已接受答案的替代方法是将 read_csv() 应用于通过过滤输入文件获得的 StringIO。

```
with open(<file>) as f:
    text = "\n".join([line for line in f if <condition>])

df = pd.read_csv(StringIO(text)) 
```

当过滤条件仅保留一小部分行时，此解决方案通常比接受的答案更快

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-28T06:03:04.957

考虑您有以下数据框

```
+----+--------+
| Id | Name   |
+----+--------+
|  1 | Sarath |
|  2 | Peter  |
|  3 | James  |
+----+--------+ 
```

如果您需要过滤记录，`Id = 1`则可以使用以下代码。

```
df = pd.read_csv('Filename.csv', sep = '|')
df = df [(df ["Id"] == 1)] 
```

这将产生以下输出。

```
+----+--------+
| Id | Name   |
+----+--------+
|  1 | Sarath |
+----+--------+ 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-12-13T14:26:29.967

如果你在linux上，你可以使用grep。

```
# to import either on Python2 or Python3
import pandas as pd
from time import time # not needed just for timing
try:
    from StringIO import StringIO
except ImportError:
    from io import StringIO

def zgrep_data(f, string):
    '''grep multiple items f is filepath, string is what you are filtering for'''

    grep = 'grep' # change to zgrep for gzipped files
    print('{} for {} from {}'.format(grep,string,f))
    start_time = time()
    if string == '':
        out = subprocess.check_output([grep, string, f])
        grep_data = StringIO(out)
        data = pd.read_csv(grep_data, sep=',', header=0)

    else:
        # read only the first row to get the columns. May need to change depending on 
        # how the data is stored
        columns = pd.read_csv(f, sep=',', nrows=1, header=None).values.tolist()[0]    

        out = subprocess.check_output([grep, string, f])
        grep_data = StringIO(out)

        data = pd.read_csv(grep_data, sep=',', names=columns, header=None)

    print('{} finished for {} - {} seconds'.format(grep,f,time()-start_time))
    return data 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2018-11-12T05:59:06.790

您可以指定`nrows`参数。

`import pandas as pd df = pd.read_csv('file.csv', nrows=100)`

此代码在 0.20.3 版本中运行良好。

# autoit - 重点改变控制 Autoit

> ID：13651132
> 
> 赞同：0
> 
> 时间：2012-11-30T18:39:36.843
> 
> 标签：autoit

我有一个带有两个文本字段的应用程序窗口（无法访问应用程序代码，因此无法更改任何内容）。用户在字段中扫描条形码，“输入按下”动作已在扫描仪中编程，无法更改。我需要在按下输入之前验证字段，我可以验证第一个字段但问题是我需要在输入之前验证第二个字段（通过扫描仪）。有没有办法使用 AutoIT 来实现？我希望这个问题有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:25:46.127

使用“AutoIt v2 Window Info”工具 (Au3Info.exe) 来识别两个编辑控件。在“控制”选项卡上，您可以找到“高级模式”，它将显示类似“[CLASS:Edit;INSTANCE:2]”的数据。现在使用此信息来读取控件的数据：

```
$Text1 = ControlGetText('window title', '', '[CLASS:Edit; INSTANCE:1]')
$Text2 = ControlGetText('window title', '', '[CLASS:Edit; INSTANCE:2]') 
```

请参阅此处的示例：[http ://www.autoitscript.com/autoit3/docs/functions/ControlGetText.htm](http://www.autoitscript.com/autoit3/docs/functions/ControlGetText.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:22:16.413

大多数条码扫描仪都可以通过扫描用户手册中的几个特殊条码来编程为不发送终止符（输入）

# php - mvc php中的验证

> ID：13651135
> 
> 赞同：5
> 
> 时间：2012-11-30T18:39:57.950
> 
> 标签：php, validation, model-view-controller

不知道哪个最好？您认为最好`user login form`在控制器中验证或其他形式，还是最好在模型中定义一个类，例如“安全类”来验证？或定义一些类进行验证？你知道更好的选择或好的技术吗？

```
<?php
class acontroller{
.
.
.
private function loginformAction()
{
    $this->actionform='loginform';
    $this->errorMsg=array();
    if(isset($post)){
        if(empty($post('aliasName'))){
                       ...
        }else{
           ...
                    }
        if(empty($post('password'))){
                      ...
        }
        if(empty($post('re_password'))){
                      ...   
        }
        if(!empty($post('password')) && isset($post('re_password')) ){
                      ...
        }
    }

    $this->render();
}
  .
  .
  .
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T18:46:07.830

验证是域逻辑的一部分。控制器应该与此无关。它只需要将传入的请求值传递给模型层的适当部分。

验证本身应该发生在模型层的[领域对象中。](http://c2.com/cgi/wiki?DomainObject)此外，在某些表格中，您必须担心数据完整性（即注册表中的唯一用户名）。在这种情况下，数据完整性检查实际上应该由[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)处理，本质上是将数据传递给 SQL 数据库，SQL 数据库执行检查，如果存在违规，它会触发 DB 抽象异常。

### 更新

由于您的问题是处理身份验证/授权，因此您可能会发现[这篇文章](https://stackoverflow.com/a/9685039/727208)是相关的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:46:21.153

IMO“表单验证”又名“字段 X 是否填写？检查长度、检查内容等”*可以*在控制器中处理，但“用户身份验证/访问控制”最好作为其自己的模型对象处理。

在实践中，我有一个“表单”模型对象，它可以构建和验证表单，所以我不会在每个接受输入的控制器中重新实现代码。

# mysql - 如何编写 mysql 查询以从 2 个 sql 查询中获取数据？

> ID：13651137
> 
> 赞同：0
> 
> 时间：2012-11-30T18:40:12.843
> 
> 标签：mysql

我有 2 张桌子

```
tbltraining 

trId(PK)   trname 
-------    ------
1         training1 
2         training2
3         training3
4         training4
5         training5
6         training6

tbltrainAssign 

    trassigno    trId(FK)      date1           date2
    ---------    ------     -----------     ----------
    1            1          12/12/2012      12/12/2013
    1            1          12/12/2012      12/12/2013
    2            3          01/12/2012      08/12/2013
    2            3          01/12/2012      08/12/2013
    2            3          01/12/2012      08/12/2013
    3            1          02/12/2012      12/12/2013
    3            1          12/12/2012      12/12/2013 
```

我想要的是来自 tbltraining 的数据以及分配的计数。trId =1 在 tbltrainAssign 中被分配了 2 次，并且 trId 被分配了 1tim 。所以结果应该看起来像

```
trId        trName       count
1          training1     2
2          training2     0
3          training3     1
4          training4     0
5          training5     0
6          training6     0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:45:46.610

您需要的是一个简单、直接的方法，`JOIN`尤其是`LEFT JOIN`要获得`trName`在第二个表中没有赋值的 unmatched s，`COUNT`并且`GROUP BY`像这样：

```
SELECT t.trId, t.trname, COUNT(s.trId)
FROM tbltraining t
LEFT JOIN tbltrainAssign s ON t.trId = s.trId
GROUP BY t.trId, t.trname; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/1a838/4)

**旁白：**请避免在表名和列名中使用描述性前缀，`tbl`以及`tr`.

**更新：**您必须从分配表中选择不同的日期，以便计算每次培​​训的不同分配，如下所示：

```
SELECT t.trId, t.trname, COUNT(s.trId)
FROM tbltraining t
LEFT JOIN
(
  SELECT DISTINCT trId, DATE(date1), date(date2)
  FROM tbltrainAssign
) s ON t.trId = s.trId
GROUP BY t.trId, t.trname; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/1a838/12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:46:50.657

```
 select a.trId trId,a.trName trName,count(distinct b.trssigno) count 
    from tbltraining a, tbltrainAssign b 
    where a.trId=b.trId 
    group trId,trName 
    order by trId 
```

这将给出预期的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:47:33.303

```
select t.trId, t.trname, count(t.trassigno) from (
    select tb.trId, tb.trname, ta.trassigno from tbltrainAssign ta
    inner join tbltraining tb on ta.trId=tb.trId
) t
group by t.trId, t.trname 
```

# ruby-on-rails-3 - 如何设置 rspec-rails 为水豚生成功能规范

> ID：13651140
> 
> 赞同：11
> 
> 时间：2012-11-30T18:40:15.793
> 
> 标签：ruby-on-rails-3, testing, rspec, capybara, rspec-rails

我正在使用 rspec-rails 2.12.0 和 capybara 2.0.1 进行测试。在 capybara 2.x 中，您需要将规范放在规范/功能而不是规范/请求中。有没有办法，如果我要生成一个脚手架 ala 'rails g scaffold Model'，rspec 会在正确的目录中为我生成功能规范？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T21:06:59.827

“**控制器**”和“**请求**”规范与内部应用程序机制相关联，因此可以由模仿控制器结构的脚手架生成器自动生成。

“**功能**”规范在概念上与这些规范完全不同，因为它们描述了最终用户与应用程序的交互，它们无法提前生成，因为无法有效地猜测您要测试的功能。功能规范也分布在多个控制器中，您不希望它们映射到您的控制器脚手架。唯一可以做的就是生成一个几乎是空的`feature/xyz`文件供您填写，这是非常没用的，因为您可能不得不删除/重命名它。

# ruby - Proj4rb：将纬度/经度转换为鲁滨逊投影

> ID：13651142
> 
> 赞同：1
> 
> 时间：2012-11-30T18:40:21.587
> 
> 标签：ruby, proj

我正在使用[Proj4rb](https://github.com/Caged/proj4rb) gem 将纬度和经度坐标转换为[Robinson projection](http://spatialreference.org/ref/sr-org/20/)中的一个点。这将用于确定在地图图像上放置图钉的位置。

我正在尝试的一个例子（对于纽约）是：

```
 robinson_projection = Proj4::Projection.new('+proj=robin +lon_0=0 +x_0=0 +y_0=0 +a=6371000 +b=6371000 +units=m +no_defs')

  source_point = Proj4::Point.new(40.7142, -74.0064)
  source_projection = Proj4::Projection.new("+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs")

  projected_point = source_projection.transform(robinson_projection, source_point) 
```

这引发了以下异常：

```
#<Proj4::LatitudeOrLongitudeExceededLimitsError: latitude or longitude exceeded limits> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:58:27.457

我看到两个错误，好奇是否是原因之一：

纽约有：纬度/经度：40.713956,-74.00528
第一个错误：
纽约有一个负经度坐标，你写的是 74.0064

第二：
Point.new(x,y) 中long, lat 的顺序应该是long, lat，而不是相反请检查文档！

所以正确的是：

```
source_point = Proj4::Point.new(-74.0064, 40.7142); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T10:11:19.247

问题出在您的源点（lat、lng）内。尝试这个：

```
robinson_projection = Proj4::Projection.new('+proj=robin +lon_0=0 +x_0=0 +y_0=0 +a=6371000 +b=6371000 +units=m +no_defs')

lat = 40.7142
lon = -74.0064
source_point = Proj4::Point.new(Math::PI * lon.to_f / 180,
                                Math::PI * lat.to_f / 180)
source_projection = Proj4::Projection.new("+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs")

projected_point = source_projection.transform(robinson_projection, source_point) 
```

# sql - 将多行转换为单列

> ID：13651143
> 
> 赞同：0
> 
> 时间：2012-11-30T18:40:22.677
> 
> 标签：sql, tsql, entity-framework-4.1, ef-code-first, cursor

我有一个数据库表 UserRewards 有 30+ 百万行。在这一行中，每行有一个用户 ID 和一个奖励 ID（以及其他字段）。

有一个 users 表（有大约 400 万唯一用户），它具有主键 userID 和其他字段。出于性能原因，我想将 userrewards 中每个用户的奖励 ID 移动到 users 中的串联字段中。（名为 Rewards 的新 nvarchar(4000) 字段）我需要一个可以尽快完成此操作的脚本。

我有一个光标，它使用下面的脚本来连接奖励，但它每分钟只处理大约 100 个用户，这需要很长时间才能通过我拥有的大约 400 万唯一用户。

```
 set @rewards = ( select REPLACE( (SELECT rewardsId AS [data()] from userrewards
 where UsersID = @users_Id and BatchId = @batchId
       FOR XML PATH('')  ), ' ', ',') ) 
```

有什么建议可以优化吗？我将尝试一个 while 循环，看看它是如何工作的，但任何其他想法都会受到极大的欢迎。

编辑：

我的网站执行以下操作：

我们有大约 400 万用户，他们已经预先分配了 5-10 个“奖励”。这种关系在 userrewards 表中。

用户来到网站，我们识别他们，并在数据库中查找分配给他们的奖励。

问题是，该站点非常受欢迎，因此我有大量的人同时访问该站点以请求他们的数据。以上将减少我的加入，但我知道这可能不是最好的解决方案。我的数据库服务器在打开站点后的 10 秒内达到 100% 的 CPU 使用率，因此大多数人的请求超时（显示错误页面），或者他们得到结果，但不是在令人满意的时间。

有人可以为我的问题提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:31:20.477

我认为您尝试的方法是一个坏主意有几个原因。首先，您将如何维护 users 表中的逗号分隔列表？奖励可能是批量加载的，比如在晚上，所以现在这不是问题。即便如此，有一天您可能希望更频繁地分配奖励。

其次，当您想删除奖励或更改其中之一的名称时会发生什么？您需要更新两个不同位置的信息，而不是更新一个表。

如果你有 400 万用户，有数千个并发访问，那么由于时间而导致的小不一致会很明显，并且可能会引起用户投诉。首席执行官打来的关于投诉为何增加的电话可能不是您想要处理的事情。

另一种方法是在 UserRewards(UserId, BatchId, RewardsId) 上建立索引。据推测，每个字段只有几个字节，因此 3000 万条记录应该很容易放入 8 GB 的内存中（确保 SQL Server 分配了几乎所有的内存！）。您想要的查询可以通过此索引严格满足，而无需将 UserRewards 表放入内存。所以，只有索引需要被缓存。并且，它将针对此查询进行优化。

可能会减慢一切的一件事是分配奖励的频率。如果这些被分配甚至是读取率的 10%，那么您可能会让插入/更新阻塞读取。您想使用 READ_NOLOCK 进行查询，以避免此问题。您还希望确保在记录或页面级别发生锁定，以避免与读取发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:35:03.647

也许为时已晚，但使用 uniqueidentifiers 作为键不仅会使您的存储空间增加四倍（与使用整数作为键相比），而且会使查询速度降低几个数量级。避免！！！

# java - 在 Eclipse 中添加 API 基线

> ID：13651144
> 
> 赞同：13
> 
> 时间：2012-11-30T18:40:23.473
> 
> 标签：java, eclipse, build

在eclipse源码库中编译。我有“尚未设置 API 基线...”错误。

![在此处输入图像描述](../Images/bad046367dafdefdc23f1e532f6df4db.png)

我尝试添加 API Baseline，但我不知道如何制作或添加它。

API Baseline 的用途是什么，如何添加或制作？

![在此处输入图像描述](../Images/3664f237050c87d7de1a6e07e997048e.png)

![在此处输入图像描述](../Images/2e15e90f019e8b8618582f2af125a490.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-09T16:10:06.390

*我尝试回答问题的“API 基准是什么，......”部分。*

API Baseline 是 PDE Tools / API Tools 的一个概念。它们旨在帮助您维护其他人可以使用的插件。它们帮助您创建兼容的 API 版本。

## 问题：

1.  您创建插件并向公众发布版本 1。
2.  数百万人将使用您的插件并根据您插件的 API 创建自己的代码。
3.  您向公众发布第 2 版。*错误地*更改了插件的 API。
4.  数百万人更新到新版本并不得不调整他们的代码。数以千计的程序失败。人们很伤心。

## 解决方案：

1.  您创建插件，**注释其 API**并向公众发布版本 1。
2.  数百万人将使用您的插件并根据您插件的 API 创建自己的代码。
3.  您将插件的版本 1 声明为自动比较您的代码更改的**API-Baseline 。**在您发布插件或运行测试*之前*，API 中的任何中断都会呈现给您。您发布的版本 2 没有任何 API 更改。
4.  数百万人可以在他们的应用程序中更新您的插件，因为新的插件版本与前一个版本是二进制兼容的。
5.  您声明插件的第 2 版....

## 概括

如果您开发的插件仅供您个人使用，并且对维护兼容的 API 不感兴趣，您可以按照建议禁用警告。

当您为社区开发插件时，例如 eclipse 插件本身，您必须将 API 不兼容性保持在最低限度。然后你会按照建议，在为 4.3 开发时将基线设置为 4.2。API 工具将帮助您使 4.3 成为所有当前 4.2 用户的享受。

请注意，API 工具是供其他人使用的插件的开发人员使用的。这些插件的用户没有解决它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-09T16:28:29.853

引用 Eclipse 站点，“API 基线定义了您想要比较开发工作区包的状态，以实现二进制兼容性、包版本号和@since 标记。例如，如果您正在为 Eclipse 3.4 开发包，您可以使用 Eclipse 3.3 作为您的基线。”

所以基本上这意味着你正在构建需要其他包（依赖包/插件+ OSGi框架（核心和纲要API/服务））的包（一个插件项目，它是一个OSGi包或一个Eclipse插件），你通过“API Baseline”指定它，该“API Baseline”保证它们的（依赖项）存在类似于“配置文件”（例如 IBM WAS 中的 Liberty 配置文件）。

作为一种解决方法，您可以避免通过“插件首选项”为您的工作区设置 API 基线，将其设置为“警告”或“忽略”。这允许您编译插件 (OSGi) 项目。

参考： [http ://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Freference%2Fapi-tooling%2Fpreferences%2Fref-baselines.htm](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Freference%2Fapi-tooling%2Fpreferences%2Fref-baselines.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-11T16:26:42.533

你也可以“忽略”它：[http ://exploreeclipse.blogspot.ch/2014/01/eclipse-error-api-baseline-has-not-been.html](http://exploreeclipse.blogspot.ch/2014/01/eclipse-error-api-baseline-has-not-been.html)

“Windows > Preferences > Plug-in Development > API Baselines > Options > Missing API baseline 然后，在下拉列表中将“错误”更改为“忽略”。

请记住，忽略可能是错误的做法，具体取决于用例：

*   如果您必须在源代码上工作，甚至要提交一个项目，那么忽略 API 基线可能不是一个好主意。
*   如果您仅使用它们作为依赖项导入包，例如通过 Git（可能更容易拉新更改或切换到另一个分支），您可以忽略 API 基线

# python - Google API 类设计上的 AccessTokenRefreshError

> ID：13651145
> 
> 赞同：1
> 
> 时间：2012-11-30T18:40:26.047
> 
> 标签：python, google-app-engine, google-api-python-client

我正在尝试为我的 Google API 调用的基本样板初始化创建一个基类。通过在线阅读教程，我认为应该重用 http 传输对象，而不是在每次调用时重新初始化。

一些基本信息：

**平台**：Google 的 AppEngine - 启用线程的 Python 2.7

**错误**：

```
File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/kay/app.py", line 371, in get_response response = view_func(request, **values)

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/kay/handlers/__init__.py", line 34, in __call__ return func(**kwargs)

File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 1047, in add_context_wrapper return synctasklet(func)(*args,
**kwds)

File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 1029, in synctasklet_wrapper return taskletfunc(*args,
**kwds).get_result()

File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 325, in get_result self.check_success()

File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 371, in _help_tasklet_along value = gen.send(val)

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/<app-name-removed>/backoffice/__init__.py", line 64, in post bigquery = BigQueryClient()

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/<app-name-removed>/api/google/base.py", line 68, in __init__ self.service = build(self.serviceName, self.version, http=credentials.authorize(http))

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/oauth2client/util.py", line 120, in positional_wrapper return wrapped(*args, **kwargs)

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/apiclient/discovery.py", line 193, in build resp, content = http.request(requested_url)

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/oauth2client/util.py", line 120, in positional_wrapper return wrapped(*args, **kwargs)

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/oauth2client/client.py", line 405, in new_request self._refresh(request_orig)

File "/base/data/home/apps/s~<app-name-removed>/gapitest.363541807102146863/oauth2client/appengine.py", line 162, in _refresh raise AccessTokenRefreshError(str(e))

AccessTokenRefreshError 
```

基类实现：

```
import os, httplib2, abc, logging
from apiclient.discovery import build
from oauth2client.appengine import AppAssertionCredentials
from oauth2client.client import Storage, Credentials
from google.appengine.api import memcache

http = None

class FileStorage(Storage):
    def __init__(self, filepath):
        self._filepath = filepath

    def locked_get(self):
        with open(self._filepath, 'r') as f:
            json = f.read()
        credentials = Credentials.new_from_json(json)
        return credentials

class BaseGoogleAPIClient(object):
    __metaclass__ = abc.ABCMeta

    """The following is not ideal, would prefer abstract class properties"""

    @classmethod
    def get_scope(cls):
        raise NotImplementedError("Must define the authorization scope required for this class (multiple scopes should be seperated by a space)")

    @abc.abstractproperty
    def serviceName(self):
        """Define the Service this class will interface with"""
        return

    @abc.abstractproperty
    def version(self):
        """Define the Version of the API we will interface with"""
        return

    def __init__(self):
        global http

        if not http:
            if not os.environ['SERVER_SOFTWARE'].startswith('Development'):
                scopes = []

                for sc in BaseGoogleAPIClient.__subclasses__():
                    for scope in sc.get_scope().split(' '):
                        if not scope in scopes:
                            scopes.append(scope)

                logging.debug("Scopes {scopes}".format(scopes=scopes))

                credentials = AppAssertionCredentials(scope=scopes)
            else:
                """USED FOR LOCAL TESTING"""
                filepath = #PATH REMOVED
                storage = FileStorage(filepath)
                credentials = storage.get()
            http = credentials.authorize(httplib2.Http(memcache))

        self.service = build(self.serviceName, self.version, http=http) 
```

我一定是误解了什么，或者我的设计有缺陷。当我为每个我想与之交互的 API （BigQuery 和存储）专用一个单独的类时，它工作得非常好。我只是想在类之间共享构造函数。

此方法在本地工作得非常好，尽管它使用不同的凭据机制。

此类的实现示例：

```
class BigQueryClient(BaseGoogleAPIClient):

    @classmethod
    def get_scope(cls):
        return 'https://www.googleapis.com/auth/bigquery'

    @property
    def serviceName(self):
        return 'bigquery'

    @property
    def version(self):
        return 'v2'

    #METHODS REMOVED 
```

有什么我做错了吗？我的设计是否有缺陷，是否有更好的方法来实现我想做的事情？我想我不必每次都构建服务接口，但如果我不这样做，它会是线程安全的吗？这种方法甚至是线程安全的吗？

任何帮助，将不胜感激！

# javascript - 按下按钮时切换 cookie 和类

> ID：13651146
> 
> 赞同：0
> 
> 时间：2012-11-30T18:40:29.920
> 
> 标签：javascript, jquery, cookies, setcookie

我试图找出一种方法，以便在按下按钮时切换 cookie + 类。

如果：按下类名为的按钮`btn_fixed`：
- 将 cookie “fixed”设置为“true”，
- 将类添加到`<header>`名为“fixed”的“”中，**同样当页面加载时，类“fixed”是已应用，因为 cookie 设置为 true**。
Else:
- 将 cookie "fixed" 设置为 "false" (默认值，当第一次进入站点时)，
- 从 " " 中删除类 "fixed `<header>`"

这是我到目前为止所得到的，我现在可以看到它与我想要它做的相去甚远：

```
if (jQuery.cookie("fixed") != "true") {  
        jQuery('a.fixed_btn').click(function () {  
            jQuery('header').addClass('fixed');  
            jQuery.cookie("fixed", "true");  
        });  
    }  
    else  
    {  
        jQuery('a.fixed_btn').click(function () {  
            jQuery('header').removeClass('fixed');  
    jQuery.cookie("fixed", "false");
    }  

<a href="#" class="fixed_btn">Fixed/Fluid</a>  
<header>aaa</header>​ 
```

[http://jsfiddle.net/UWLdq/7/](http://jsfiddle.net/UWLdq/7/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:51:17.660

这个怎么样：

```
$(document).on('click','a.fixed_btn',function(){   
    var fixed = jQuery.cookie("fixed");              
    jQuery('header').toggleClass('fixed');
    jQuery.cookie("fixed", fixed === "true" ? "false" : "true");

}) 
```

[http://jsfiddle.net/UWLdq/5/](http://jsfiddle.net/UWLdq/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:52:25.913

您最初只需要切换类，然后绑定一个单击事件即可。

```
jQuery(document).ready(function($) {
    // set class initially based on current cookie value
    $('.cookiefixed').toggleClass('fixed', $.cookie("fixed") == "true");
    // on click, toggle both class and cookie value
    $('a.fixed_btn').click(function() {
        $('.cookiefixed').toggleClass('fixed');
        $.cookie("fixed", $('.cookiefixed').hasClass('fixed'));
    });
});​ 
```

~~我建议不要`'header'`用作选择器，因为一个页面上可以有多个标题，我怀疑你是否希望他们都获得这个类。~~

演示：http: [//jsfiddle.net/UWLdq/6/](http://jsfiddle.net/UWLdq/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:57:40.977

根据 Bluetoft 的回答，您还需要在页面加载时检查 cookie。

[**小提琴**](http://jsfiddle.net/videsignz/UWLdq/8/)

```
$(document).on('click','a.fixed_btn',function(){   
    var fixed = jQuery.cookie("fixed");              
    jQuery('header').toggleClass('fixed');
    jQuery.cookie("fixed", fixed === "true" ? "false" : "true");

});

if ($.cookie("fixed") != "true") {
    $('header').addClass('fixed');
}else{
    $('header').removeClass('fixed');
} 
```

# vb.net - 控制台应用程序输出未显示

> ID：13651147
> 
> 赞同：1
> 
> 时间：2012-11-30T18:41:01.383
> 
> 标签：vb.net, asynchronous, psexec

我在 StackOverflow 中阅读了几个关于从应用程序重定向输出/错误的问题，但它对我没有帮助。

我用 C# 代码开发了一个可执行文件。它从系统注册表中恢复软件并调用 Web 服务将其保存到我们的数据库中。

在可执行文件中，我们正在打印消息

> Console.WriteLine("来自可执行文件的消息");

另一方面，我们有一个 CRM 应用程序，我编写了两个 win 表单，它们使用所需的参数调用 psexec.exe，这个 .exe 被远程复制并在目标机器上启动。

如果您在 cmd.exe 中使用带有该参数的直接 psexec 调用，我们可以看到 psexec 执行横幅和我们的可执行输出

就像是：

> PsExec v1.98 - 远程执行进程
> 
> 版权所有 (C) 2001-2010
> 
> Mark Russinovich Sysinternals - www.sysinternals.com
> 
> 企业软件@2012
> 
> **来自应用程序的消息**
> 
> 机器“XXXXXXX”中的启动任务
> 
> 从注册表中恢复软件列表
> 
> Program.exe 在 MACHINE 上退出，错误代码为 0。

当我使用 .NET 进行 psexec 调用时，我无法恢复我的应用程序输出，它只显示：

> PsExec v1.98 - 远程执行进程
> 
> 版权所有 (C) 2001-2010
> 
> Mark Russinovich Sysinternals - www.sysinternals.com
> 
> Program.exe 在 MACHINE 上退出，错误代码为 0。

我正在为 Process 类分配一个正在从进程中恢复异步数据的委托，但此信息不存在。

我粘贴一些代码来查看是否可以找到我的 C# 控制台应用程序输出未出现的原因：

我启动的命令是：

```
Dim CmdExe As String = "\\#MAQUINA# -u #USUARIO# -p #CLAVE# -s -c -f """ + executionPath + """" 
```

参数 -s（作为系统运行）-c（将本地文件复制到远程系统）-f（强制覆盖）

```
Private Sub LanzarProceso()
        CheckForIllegalCrossThreadCalls = False
        Dim Proceso As New Process
        AddHandler Proceso.OutputDataReceived, AddressOf CallbackProcesoAsync
        AddHandler Proceso.ErrorDataReceived, AddressOf ErrorDataReceivedAsync

        Dim startInfo As New ProcessStartInfo
        startInfo.FileName = execFile
        startInfo.Arguments = CmdExe.Replace("#MAQUINA#", txtFiltroMaquina.Text).Replace _
                                            ("#USUARIO#", txtUsuario.Text.Trim).Replace _
                                            ("#CLAVE#", txtClave.Text.Trim)
        Proceso.EnableRaisingEvents = True
        startInfo.UseShellExecute = False
        startInfo.RedirectStandardOutput = True
        startInfo.RedirectStandardError = True
        startInfo.CreateNoWindow = False
        Proceso.StartInfo = startInfo
        Proceso.Start()
        Proceso.BeginOutputReadLine()
        Proceso.BeginErrorReadLine()
        Proceso.WaitForExit()

    End Sub 
```

代表处理数据：

```
 Private Sub CallbackProcesoAsync(sender As Object, args As System.Diagnostics.DataReceivedEventArgs)

        If Not args.Data Is Nothing AndAlso Not String.IsNullOrEmpty(args.Data) Then
            If Not listtask.InvokeRequired Then
                listtask.Items.Add(args.Data.ToString)
            Else
                Dim d As New TextToControl(AddressOf AddToControl)
                listtask.Invoke(d, args.Data.ToString)
            End If

        End If

    End Sub

    Private Sub ErrorDataReceivedAsync(sender As Object, args As System.Diagnostics.DataReceivedEventArgs)
        If Not args.Data Is Nothing AndAlso Not String.IsNullOrEmpty(args.Data) Then
            If Not listtask.InvokeRequired Then
                listtask.Items.Add(args.Data.ToString)
            Else
                Dim d As New TextToControl(AddressOf AddToControl)
                listtask.Invoke(d, args.Data.ToString)
            End If

        End If
    End Sub 
```

我检查了程序是否正确完成。c# 可执行文件有

```
Enviroment.Exit(0); 
```

在执行结束时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:33:52.083

好的，我发现在执行后获得 psexec 和我的 c# 应用程序之间的所有输出的最佳解决方法是：

> Dim CmdExe As String ="\#MAQUINA# -u #USUARIO# -p #CLAVE# -s -c -f """ + executionPath + """ > outputFileCode.txt"

这使我无需更改任何内容或直接调用我的程序即可解析标准输出，因为我做不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:03:20.207

您在控制台窗口中看到的是由 psexec 和子进程发送到控制台的混合输出。您可以截取 psexec 的输出，但要对孩子做同样的事情，需要 psexec 中的截取代码，显然它没有

尝试删除中介 - 直接调用您的可执行文件

# php - Mysql 选择命令

> ID：13651152
> 
> 赞同：-3
> 
> 时间：2012-11-30T18:41:28.373
> 
> 标签：php, mysql

```
<?php 
    $sn=$_GET['sn'];
    $query="SELECT * FROM `banner_ad` WHERE `banner_no`='$sn'";
    if($query_run=mysql_query($query))
    {
        $num=mysql_num_rows($query_run);
        if($num == 1)
        {
            while($rows=mysql_fetch_array($query_run))
            {
                $banner_name=$rows['banner_name'];
                //$banner_site_url=$rows['Banner_website_url'];
                $banner_image_url=$rows['banner_image_url'];
            }
        } else {
            echo'<font color="red"> There is two entry for this same serial number.</font>';
            }

    } else {
        echo'<font color="red"> Query does not run.</font>';
        }
?> 
```

谁能告诉我我无法执行此查询的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:44:16.907

1）您似乎没有连接到任何数据库。

2）您正在使用已[被弃用](http://www.deprecatedphp.com/mysql)`mysql_`的函数，并使您对 SQL 注入持开放态度。您应该立即停止使用它来编写新代码并使用或功能。`mysqli_``PDO`

3）您需要追加`mysql_error()`以捕获任何可能的错误。也许是这样的：

```
...
} else {
    mysql_error();
    } 
```

4）这是不好的做法`SELECT *`。您应该始终指定一个列列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T19:19:50.013

SQL 单引号

```
$query="SELECT * FROM `banner_ad` WHERE `banner_no`='$sn'"; 
```

更改为 PHP 单引号

```
$query="SELECT * FROM 'banner_ad' WHERE 'banner_no'='$sn'"; 
```

# scala - 返回确切的响应/标题？

> ID：13651153
> 
> 赞同：2
> 
> 时间：2012-11-30T18:41:31.247
> 
> 标签：scala, scala-dispatch

从 web 应用程序的客户端，我点击了一个服务器端路由，它只是第三方 API 的包装器。使用分派，我试图使服务器端请求将第三方 API的**确切标头和响应返回到客户端 AJAX 调用。**

当我这样做时：

```
val req = host("third-pary.api.com, 80)
val post = req.as("user", "pass") / "route" << Map("key" -> "akey", "val" -> "aval")
Http(post > as.String) 
```

我总是看到`200`返回到 AJAX 调用的响应（有点预期）。我已经看到使用的`Either`语法，但我真的更像一个`Any`，因为它只是确切的响应和标题。这要怎么写？

我应该提到我在服务器端使用 Scalatra，所以本地路由是：

```
post("/route") {

} 
```

**编辑：**

这是我正在使用的建议的 Either 匹配示例，但`match`语法没有意义 - 我不在乎是否有错误，我只想返回它。此外，我似乎无法使用此方法返回 BODY。

```
val asHeaders = as.Response { response =>
  println("BODY: " + response.getResponseBody())
  scala.collection.JavaConverters.mapAsScalaMapConverter(
    response.getHeaders).asScala.toMap.mapValues(_.asScala.toList)
}

val response: Either[Throwable, Map[String, List[String]]] =
  Http(post > asHeaders).either()

response match {
  case Left(wrong) =>
    println("Left: " + wrong.getMessage())
    // return Action with header + body
  case Right(good) =>
    println("Right: " + good)
    // return Action with header + body
} 
```

理想情况下，解决方案返回 Scalatra `ActionResult(responseStatus(status, reason), body, headers)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:54:51.403

在使用 Dispatch 时，实际上很容易获得响应头。例如 0.9.4：

```
import dispatch._
import scala.collection.JavaConverters._

val headers: java.util.Map[String, java.util.List[String]] = Http(
   url("http://www.google.com")
)().getHeaders 
```

现在，例如：

```
scala> headers.asScala.mapValues(_.asScala).foreach {
     |   case (k, v) => println(k + ": " + v)
     | }
X-Frame-Options: Buffer(SAMEORIGIN)
Transfer-Encoding: Buffer(chunked)
Date: Buffer(Fri, 30 Nov 2012 20:42:45 GMT)
... 
```

如果您经常这样做，最好将其封装起来，例如：

```
val asHeaders = as.Response { response =>
  scala.collection.JavaConverters.mapAsScalaMapConverter(
    response.getHeaders
  ).asScala.toMap.mapValues(_.asScala.toList)
} 
```

现在您可以编写以下内容：

```
val response: Either[Throwable, Map[String, List[String]]] =
  Http(url("http://www.google.com") OK asHeaders).either() 
```

而且你有错误检查、漂亮的不可变集合等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T09:01:08.393

我们需要对 API 的失败请求的响应体，所以我们想出了这个解决方案：

用and定义你自己的`ApiHttpError`类（对于正文）： `code``body`

```
case class ApiHttpError(code: Int, body: String)
  extends Exception("Unexpected response status: %d".format(code)) 
```

定义`OkWithBodyHandler`类似于源代码中使用的内容`displatch`：

```
class OkWithBodyHandler[T](f: Response => T) extends AsyncCompletionHandler[T] {
  def onCompleted(response: Response) = {
    if (response.getStatusCode / 100 == 2) {
      f(response)
    } else {
      throw ApiHttpError(response.getStatusCode, response.getResponseBody)
    }
  }
} 
```

现在，在您对可能抛出和异常的代码（调用`API`）的调用附近，将`implicit`覆盖添加到`ToupleBuilder`（再次类似于源代码）并`OkWithBody`调用`request`：

```
class MyApiService {
  implicit class MyRequestHandlerTupleBuilder(req: Req) {
    def OKWithBody[T](f: Response => T) =
      (req.toRequest, new OkWithBodyHandler(f))
  }

  def callApi(request: Req) = {
    Http(request OKWithBody as.String).either
  }
} 
```

从现在开始，fetching`either`会给你`[Throwable, String]`(using `as.String)`, and the `Throwable`is our `ApiHttpError`with `code`and `body`.

希望它有所帮助。

# php - symfony 1.4 推进保存嵌入形成一对一关系

> ID：13651154
> 
> 赞同：0
> 
> 时间：2012-11-30T18:41:31.487
> 
> 标签：php, symfony-1.4, propel, admin-generator

我有两个表，这就是架构的样子：

```
customer:
id:
username: { type: varchar, size: 50, required: true }
password: { type: varchar, size: 50, required: true }
hash: { type: varchar, size: 50, required: true }

customer_profile:
id: { type: integer, foreignTable: customer, foreignReference: id, primaryKey: true, required: true, onDelete: cascade, onUpdate: cascade}
country: { type: varchar, size: 80, required: true }
state: { type: varchar, size: 80, required: true }
city: { type: varchar, size: 80, required: true }
zip: { type: varchar, size: 80, required: true }

customer_info:
id: { type: integer, foreignTable: customer, foreignReference: id, primaryKey: true, required: true, onDelete: cascade, onUpdate: cascade}
preference: { type: longvarchar }
likes: { type: longvarchar } 
```

我目前正在使用 Symfony 1.4 的（propel orm）管理员，但我无法成功地将所有这三种形式合并为一个。

```
public function configure()
{
$use_fields = array(........);
$sub_form1   = new CustomerProfileForm($this->getObject()->getCustomerProfile());
$this->embedForm('profile', $sub_form1);
array_push($use_fields, 'profile');

$sub_form1->widgetSchema->setNameFormat('customer_profile[%s]');
$sub_form2   = new CustomerInfoForm($this->getObject()->getCustomerInfo());
$this->embedForm('info', $sub_form2);
array_push($use_fields, 'info');
$sub_form2->widgetSchema->setNameFormat('customer_info[%s]');
$this->useFields($use_fields);
}

public function save($conn = null){
if ($forms === NULL)
 {
 $forms = $this->getEmbeddedForms();
 }
$forms['profile']->getObject()->setId($this->getObject()->getId());
$forms['profile']->save();
$forms['info']->getObject()->setId($this->getObject()->getId());
$forms['info']->save();
$this->getObject()->save();
} 
```

但是我收到此错误：

```
500 | Internal Server Error | sfValidatorErrorSchema

$this->widgetSchema->setNameFormat('customer_profile[%s]');
$this->errorSchema = new sfValidatorErrorSchema($this->validatorSchema);
parent::setup(); 
```

我现在真的被困住了。我希望有人能指出我正确的方向。

我只想将这三个表单合并到一个管理表单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:43:09.920

validatorErrorSchema 只是一个 sfValidator 对象数组，有助于创建与表单字段的关联。这是整个错误信息吗？

删除覆盖 save() 方法的代码。在将 Propel 对象嵌入到相应的形式中之前，您应该创建它们之间的关系，如下所示：

```
public function configure()
{
    $use_fields = array(........);
    $profile = $this->getObject()->getCustomerProfile();
    // Do you assign profile objects if they don't exist?
    if (!$profile) {
        $profile = new CustomerProfile();
        $profile->setCustomer($this->getObject());
    }
    $profileForm = new CustomerProfileForm($profile);
    $this->embedForm('profile', $profileForm);
    array_push($use_fields, 'profile');

    $info = $this->getObject()->getCustomerInfo();
    // Do you assign info objects if they don't exist?
    if (!$info) {
        $info = new CustomerInfo();
        $info->setCustomer($this->getObject());
    }
    $infoForm = new CustomerInfoForm($info);
    $this->embedForm('info', $infoForm);
    array_push($use_fields, 'info');

    $this->useFields($use_fields);
} 
```

# ajax - Facebook使用ajax失去登录用户

> ID：13651163
> 
> 赞同：1
> 
> 时间：2012-11-30T18:42:29.640
> 
> 标签：ajax, facebook

我正在编写一个 Facebook 应用程序并使用了 Facebook php SDK，因此它可以被授权服务器端。我可以看到这是有效的，因为在 Facebook 重定向回我的应用程序授权后，我的 index.php 中有以下代码...

```
require_once 'facebook.php';

$facebook = new Facebook(array(
    'appId' => '111111111111111',
    'secret' => '11111111111111111111111111111111',
    'cookie' => true
));
    // Get User ID
    $user = $facebook->getUser(); 
```

...并且 $user 返回不为空。到目前为止，一切都很好！

我的应用程序上有一个链接，单击时通过 ajax 加载内容。这是JS：

```
$.post('my_content.php', {
    action: 'render'
}, function(res){
    if (res.html.length) {              
        $('.content').html(res.html);
    }
},'json'); 
```

问题是，my_content.php 脚本似乎丢失了用户已登录并授权该应用程序的事实。

我在 my_content.php 脚本中运行以检查用户是否登录的代码与 index.php 中的代码相同

```
require_once 'facebook.php';

$facebook = new Facebook(array(
    'appId' => '111111111111111',
    'secret' => '11111111111111111111111111111111',
    'cookie' => true
));
    // Get User ID
    $user = $facebook->getUser(); 
```

这一次虽然`$user = $facebook->getUser()`返回 null。

在使用 AJAX 调用运行 PHP 脚本时，有没有办法检查用户是否已登录并获得授权？

我应该在我的 index.php 脚本的会话变量中存储一些东西吗？

**编辑**

经过更多阅读，我想知道是否需要使用 JavaScript SDK 检索访问令牌并将其传递给 my_content.php。有谁知道这是否是正确的方法？

**编辑 2**

原来给我的问题不是`$user = $facebook->getUser()`：

就是这个

```
$user_profile = $facebook->api('/me'); 
```

此行失败并显示错误“OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。”

奇怪的是，如果我这样做

```
$access_token = $facebook->getAccessToken();
$user = $facebook->getUser();

echo $access_token;
echo $user; 
```

我确实有一个访问令牌和一个用户 ID，所以它看起来很可能是 CBroe 报告的错误 - 检查下面的评论。

# couchbase - Couchbase：将对象写入存储桶时出错

> ID：13651164
> 
> 赞同：0
> 
> 时间：2012-11-30T18:42:32.387
> 
> 标签：couchbase

我有一个 Web 应用程序，其中 couchbase 存储桶被删除，然后在清除缓存时重新创建（因为刷新对场景没有帮助）。我正在使用具有身份验证类型 sasl 和代理端口 11211 的 REST API 进行创建。_mcache 变量在存储桶重新创建后使用配置文件中的信息重新初始化。

我在尝试在娱乐后缓存对象时遇到错误....考虑到时间问题，在娱乐后添加睡眠也无济于事。这是日志文件片段。

我知道我在这里落后了一些东西，寻求建议。

```
2012-11-30 11:27:19 [DEBUG] 5 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Releasing socket 99103fd0-e03d-4fb8-b2b3-089ce27fc241
2012-11-30 11:27:19 [DEBUG] 5 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Are we alive? True
2012-11-30 11:27:19 [DEBUG] 5 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Acquiring stream from pool. 192.168.70.156:11210
2012-11-30 11:27:19 [DEBUG] 5 Enyim.Caching.Memcached.PooledSocket - Socket 99103fd0-e03d-4fb8-b2b3-089ce27fc241 was reset
2012-11-30 11:27:19 [DEBUG] 5 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Socket was reset. 99103fd0-e03d-4fb8-b2b3-089ce27fc241
2012-11-30 11:27:19 [DEBUG] 5 Couchbase.VBucketAwareOperationFactory.VBGet - Key egfWeo2Xrr1enrI/0gxiqvsNXOe2vHkfNCoh4Lq6UFv0uqAwg+MAvcTYrGMeCBf0KTPL/wEFA7iQqbCWWYbWTw== was mapped to 124
2012-11-30 11:27:19 [DEBUG] 5 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Releasing socket 99103fd0-e03d-4fb8-b2b3-089ce27fc241
2012-11-30 11:27:19 [DEBUG] 5 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Are we alive? True
2012-11-30 11:27:20 [ERROR] 6 Couchbase.MessageStreamListener - The infinite loop just finished, probably the server closed the connection without errors. (?)
2012-11-30 11:27:20 [DEBUG] 6 Couchbase.MessageStreamListener - ReadMessage failed with exception: - System.IO.IOException: Remote host closed the streaming connection
   at Couchbase.MessageStreamListener.ReadMessages(Uri heartBeatUrl, Uri configUrl)
   at Couchbase.MessageStreamListener.ProcessPool()
2012-11-30 11:27:20 [DEBUG] 6 Couchbase.MessageStreamListener - Reached the retry limit, rethrowing. - System.IO.IOException: Remote host closed the streaming connection
   at Couchbase.MessageStreamListener.ReadMessages(Uri heartBeatUrl, Uri configUrl)
   at Couchbase.MessageStreamListener.ProcessPool() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:30:34.583

如果没有更多信息，很难提供完整的答案，但这里有一些想法。

正如您所说，这可能是因为在删除/重新创建存储桶后存储桶/节点尚未恢复在线。您是否尝试过，至少测试要等待“更长”？（我知道这不是一个可行的解决方法，但它有助于确定问题的根源。）

我认为了解为什么*刷新*不起作用很重要，因为它是满足您需要的正确方法。

再一次，如果您能提供更多信息，并检查您是否使用最新的客户端库，那就太好了。

# abap - 双击 ALV 网格中的行和列

> ID：13651166
> 
> 赞同：2
> 
> 时间：2012-11-30T18:42:34.103
> 
> 标签：abap, alv

目前我有一个 ALV 网格，我可以双击调用事务`IE03`并传递第一列中的信息（即`eqkt-equnr`）。但是，无论您单击哪个列，都会调用此事务。`IW33`这不会那么糟糕，但是如果您单击第三列并在那里传递值，我需要能够调用`equz-J_3GEIGNER`。

我当前的双击代码如下。`t_report`是我的结构，`matnr`是`equnr`它的一部分。`maktx`是`J_3GEIGNER`它的一部分。

```
FORM user_command USING r_ucomm
     wa_selrow TYPE slis_selfield.

   IF r_ucomm = '&IC1'.
     READ TABLE t_report INDEX wa_selrow-tabindex.
     IF sy-subrc = 0.
       SET PARAMETER ID 'EQN' FIELD t_report-matnr.
       CALL TRANSACTION 'IE03' AND SKIP FIRST SCREEN.
     ENDIF.
   ENDIF.
ENDFORM. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:28:27.390

使用该字段`wa_selrow-fieldname`来确定单击了哪一列。请注意，您可能必须将网格从行选择模式切换到单元格选择模式 - 因为您没有首先向我们展示您是如何创建网格的，所以我无法告诉您如何在您的情况下执行此操作。看看[`SEL_MODE`楼盘](http://help.sap.com/saphelp_erp2004/helpdata/en/ef/a2e9eff88311d2b48d006094192fe3/content.htm)，或许有帮助。

# maven - Maven 更新到本地存储库

> ID：13651168
> 
> 赞同：0
> 
> 时间：2012-11-30T18:42:37.020
> 
> 标签：maven, maven-3

我正在尝试构建一个自解压 zip 文件并将其上传到我们的本地存储库，我的 pom.xml 中有以下代码片段

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>com.myCompany.management</groupId>
    <artifactId>esm-parent-pom</artifactId>
    <version>SNAPSHOT</version>
</parent>
<groupId>com.myCompany.management.atg</groupId>
<artifactId>XYZ_ABC_SM</artifactId>
<version>SNAPSHOT</version>
<packaging>pom</packaging>
<name>${artifactId}</name>
<scm>
    <connection>scm:svn:http://scm.esm.myCompany.corp/svn/esm/trunk/build/smart-modules/XYZ_ABC_SM</connection>
    <url>http://scm.esm.myCompany.corp/viewer/browse/esm/esm/trunk/build/smart-modules/XYZ_ABC_SM</url>
</scm>
<url>${urlBase}/${artifactId}/${version}</url>
<distributionManagement>
    <site>
        <id>esm-site</id>
        <name>myCompany ESM Maven Site</name>
        <url>${siteDistributionBase}/${artifactId}/${version}</url>
    </site>
</distributionManagement>
<repositories>
    <repository>
        <id>esm-snapshot</id>
        <name>myCompany ESM Snapshots</name>
        <url>http://repo.esm.myCompany.corp/repo/esm-snapshot</url>
        <snapshots>
            <checksumPolicy>fail</checksumPolicy>
            <enabled>true</enabled>
            <updatePolicy>always</updatePolicy>
        </snapshots>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>

    <repository>
        <id>myCompany-main-release</id>
        <name>Factory Repository</name>
        <releases>
            <enabled>true</enabled>
            <checksumPolicy>fail</checksumPolicy>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
        <url>http://repo.release.myCompany.corp/main/repo</url>
    </repository>

</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>esm-release</id>
        <name>ESM Release Repository</name>
        <releases>
            <enabled>true</enabled>
            <checksumPolicy>fail</checksumPolicy>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
        <url>http://repo.esm.myCompany.corp/repo/esm</url>
    </pluginRepository>

    <pluginRepository>
        <id>myCompany-internal-release</id>
        <name>Factory Internal Repository</name>
        <releases>
            <enabled>true</enabled>
            <checksumPolicy>fail</checksumPolicy>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
        <url>http://repo.release.myCompany.corp/internal/repo</url>
    </pluginRepository>
</pluginRepositories>

<build>
    <plugins>
        <!-- Step 1: download Schema Files. -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <!-- Gather Schema Files. -->
                            <artifactItem>
                                <groupId>com.myCompany.management</groupId>
                                <artifactId>management-oracle</artifactId>
                                <version>${project.version}</version>
                                <type>schema</type>
                                <outputDirectory>${project.build.directory}</outputDirectory>
                                <overWrite>true</overWrite>
                            </artifactItem>
                        </artifactItems>
                        <stripVersion>true</stripVersion>
                    </configuration>
                </execution>
            </executions>
        </plugin>

        <!-- Step2: Convert into a Self Extracting Exe File -->
        <plugin>
            <groupId>com.myCompany.build</groupId>
            <artifactId>batch-plugin</artifactId>
            <version>1.1.2</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>executebatch</goal>
                    </goals>
                    <configuration>
                        <batchfilename>BuildLINUX64.bat</batchfilename>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <!-- Step 4: Upload the newely build zip file out to our repository. -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.0</version>
            <executions>
                <execution>
                    <id>attach headers</id>
                    <phase>install</phase>
                    <goals>
                        <goal>attach-artifact</goal>
                    </goals>
                    <configuration>
                        <artifacts>
                            <artifact>
                                <file>${project.build.directory}\XYZ_ABC_SM.exe</file>
                                <type>exe</type>
                            </artifact>
                        </artifacts>
                    </configuration>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build> 
```

Maven 仅在阶段处于包模式时将其上传到本地存储库，但是当我将其更改为安装时，它不会被上传。不应该是相反的吗？我正在使用`mvn install`运行 Maven。

# oracle - 关于在子表中创建限制性记录。（Oracle 表单生成器）

> ID：13651176
> 
> 赞同：0
> 
> 时间：2012-11-30T18:43:05.773
> 
> 标签：oracle, plsql, oracleforms

我创建了一个表单，在其中将记录添加到子表中。但是我不希望人们能够编辑辅助键，只能从父主键列表中选择它或类似的东西。我怎么能这样做？

表格：

```
CREATE TABLE CHAMPIONS (CNAME VARCHAR2(15) NOT NULL, PRICELEVEL NUMBER(1) NOT NULL, ROLE VARCHAR2(10) NOT NULL, HPLEVEL NUMBER(2) NOT NULL, ATKLEVEL NUMBER(2) NOT NULL, MAGICLEVEL NUMBER(2) NOT NULL, DIFFLEVEL NUMBER(2) NOT NULL); 

CREATE TABLE SKINS (SNAME VARCHAR2(20) NOT NULL, CNAME VARCHAR2(15) NOT NULL, PRICELEVEL NUMBER(1) NOT NULL); 

ALTER TABLE Champions ADD CONSTRAINT pk_Champions PRIMARY KEY (CNAME);

ALTER TABLE Skins ADD CONSTRAINT fk_Skins FOREIGN KEY (CNAME) REFERENCES champions(CNAME); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:20:09.590

信息太少，无法给出答案，但我可以试一试。

您可以在`LOV`明细表中创建 s 并将其`LOV`从父表主键中删除，也可以将文本项与 LOV 链接起来，您需要使用与s`WHEN-VALIDATE-ITEM`中相同的查询放置触发器，以便在如果用户键入而不是使用，您可以验证输入，然后在输入无效的情况下提醒他们，并在输入正确值的情况下获取正确的主主键。`LOV``RECORD GROUP``LOV`

下面是带有 LOV 按钮的数据块的外观 -

![在此处输入图像描述](../Images/448cf05cf42811fe1d0a0991e3708aa5.png)

下面是`STORE`数据块中项目的触发器-

![在此处输入图像描述](../Images/8f36f29dde76ad3939855bb8f27bfba7.png)

考虑到查询中的主表，您可以对 RG 进行与触发器中的查询类似的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:32:19.153

获得此功能的最简单方法是基于 Champions.cname 创建一个 LOV 并将其附加到项目表单列 skins.cname（如果您不熟悉创建 LOV:s，请参阅 Forms 帮助）。然后将项目 skins.cname 的项目属性“从列表验证”设置为“是”。这将根据现有的 cname 值验证所有输入的值。

# android - Android中的图像缓存

> ID：13651177
> 
> 赞同：1
> 
> 时间：2012-11-30T18:43:06.397
> 
> 标签：android, image, caching

我需要下载图像 url 并将其作为位图存储在缓存中。我的问题是我必须做任何配置才能将图像位图存储在缓存中..？是否需要创建任何缓存文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:46:04.687

好吧，你可以把它放在应用程序的缓存中（`context.getCacheDir()`）。我推荐的是使用**[wasp](https://github.com/telly/wasp)**：一个很酷的 Android 库来安全地处理位图（安全 == 避免`OutOfMemory`非常常见的异常），基于 LRU 缓存。

它还允许您在后台下载图像并在下载图像后获取回调......或者在下载图像后自动将图像设置为 ImageView。它是开源的，也可供 Maven 用户使用。

免责声明：我是开发 wasp 库的开发人员之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:57:21.707

你应该试试这个库：[https ://github.com/square/pollexor](https://github.com/square/pollexor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:18:25.967

根据您要缓存的图像数量，您可能可以使用 LruCache 使用内存缓存。我会缓存下载的字节数组，而不是位图，因为位图是大事，解码字节数组->位图非常快。

# cakephp-2.0 - 如何使用多个视图的输入构建一个表单

> ID：13651178
> 
> 赞同：0
> 
> 时间：2012-11-30T18:43:14.370
> 
> 标签：cakephp-2.0

我有 3 个表/模型：

客户地址城市

每个人都有自己的观点，但我需要将地址和城市添加到客户视图中，并且每个视图都会有所有输入，并且只会产生一个表单。我阅读了一些关于使用元素将这些视图包含在客户视图中的内容。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:09:08.657

如果我没看错，您有 3 个表格，客户、地址和城市，并且想要在有用户视图时阅读它们？

听起来你想建立[一个 CakePHP 关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)，可能是一个 hasOne 关系。

**编辑：** [这是您如何使用元素](http://book.cakephp.org/2.0/en/views.html#elements)来完成此操作：

```
// Form
<?php echo $this->element('cityselect'); ?>

// app/View/Elements/cityselect.ctp
<?php $cities = $this->requestAction('/cities/index'); ?>
// Use $cities to populate element form 
```

您可能希望为您的城市/地址控制器编写一个操作，该操作返回密钥对以轻松填充您的[选择](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3aselect)字段。

# javascript - jQuery中的同步阻塞动画滑块功能？

> ID：13651181
> 
> 赞同：0
> 
> 时间：2012-11-30T18:43:43.707
> 
> 标签：javascript, animation, nonblocking

可能这已经被讨论过无数次了，我想太多了，但是......

如何创建一个“阻塞”的 jQuery 动画？

我有一个页面，它有一个“特殊”滑块动画，在用户第一次访问该网站时执行。但是每次用户访问同一页面时都会触发一个“正常”的滑块动画。由于两个动画都使用 document.ready() 触发，它们都同时发生。我想要的是第一个动画触发，然后当用户单击按钮关闭窗口时，第二个动画触发。

```
//pseudocode

jQuery( init );
    function init() {
      if(firstVisit) {
        Animation1();  //Special. Only shows 1st visit to site
        Animation2(); 
      } else {
        Animation2(); 
      }
    }
}(); 
```

这是网站：http: [//jchmusic.com](http://jchmusic.com)

我想我可以为 -both- 重新编写代码，以便只有当用户单击第一个动画上的“关闭”按钮时，第二个才会显式启动，但对我来说，如果我可以让它看起来更清晰第一个动画“阻塞”的代码......即。在第一个动画返回之前，第二个动画不会开始。我搞砸了 SetTimeOut 和各种“循环”，它所做的只是挂起浏览器......我相信这已经被考虑过很多次了。

有任何想法吗？

# java - Java - 如何在解析电子邮件时去除电子邮件签名？

> ID：13651183
> 
> 赞同：3
> 
> 时间：2012-11-30T18:43:53.870
> 
> 标签：java, email, outlook, email-attachments

我有一个程序可以检查收件箱中的未读电子邮件，解析电子邮件内容并将其发送到记录。如果电子邮件中有任何图像，这些图像将作为记录的附件发送。现在，如果任何电子邮件的签名部分中有图像，则该图像也将作为附件发送。

有没有办法可以检查电子邮件签名部分中的图像并忽略它们？或者有没有办法让我跳过整个签名内容的解析？

从 Outlook 发送的电子邮件在这里是高优先级的。那么 Outlook 中是否有一个特定的标准来解析电子邮件以获取签名？

# c# - 如何使用动态扩展 c# 4.0 中的现有对象

> ID：13651190
> 
> 赞同：11
> 
> 时间：2012-11-30T18:44:21.510
> 
> 标签：c#, c#-4.0, dynamic

我想在 c# 中有类似于 javascript 的原型属性的东西。
这个想法是像在 javascript 中那样扩展一个类的实例。
我发现最接近的是使用 ExpandoObject，但您不能使用现有对象对其进行初始化。
另一个问题是您可以从 ExpandoObject 取回原始对象。

这是我想做的事情：

```
var originalObject = new Person();
originalObject.name = "Will";
var extendedObject = new ExpandoObject();
extendedObject.lastName = "Smith";

//do something

originalObject = (Person) extendedObject; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T19:02:58.770

您可以使用以下方法部分解决问题：

```
public static class DynamicExtensions
{
    public static dynamic ToDynamic(this object value)
    {
        IDictionary<string, object> expando = new ExpandoObject();

        foreach (PropertyDescriptor property in TypeDescriptor.GetProperties(value.GetType()))
            expando.Add(property.Name, property.GetValue(value));

        return expando as ExpandoObject;
    }
} 
```

但是您无法将方法复制到新的 ExpandoObject

# java - 更改类变量并保存更改以供将来的程序运行？

> ID：13651191
> 
> 赞同：2
> 
> 时间：2012-11-30T18:44:24.223
> 
> 标签：java, attributes, default, final

例如，假设我有：

```
public Class Foo {
    public final int X = 1;

    public getX() {
        return this.X;
    }
} 
```

是否可以编写一些东西来更改 X 的值以供将来运行程序？因此，如果用户想要用于 X 的值发生变化，而他们所拥有的只是一个已编译的 .jar 文件，他们可以运行该方法，然后编译代码中的 X 值将永远改变。

我正在为一个临时工作的研究实验室开发软件。实验室技术人员将与之交互的只是一堆 JFrame。他们不知道如何在代码中更改它然后重新编译等。所以我试图找到一个“更改默认值”按钮的最佳方法，该按钮将为他们打开一个窗口，他们可以编辑默认值，单击“保存”，然后使用新值，直到他们再次更改它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:46:59.967

java.util.Preferences，专为此目的而设计，但涉及一些工作

# php - 长时间运行的后台 PHP 脚本会阻止其他 PHP 页面，直到它完成

> ID：13651195
> 
> 赞同：13
> 
> 时间：2012-11-30T18:44:38.560
> 
> 标签：php, session, background-process

我在 PHP 中编写了一个长脚本，如下所示：

```
ignore_user_abort(true);
set_time_limit(0); 
```

即使我关闭页面，它也会在后台完美运行。我的问题是，在此脚本在后台完成运行之前，我无法打开其他 PHP 文件。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-30T19:17:32.290

当 PHP 脚本使用会话时，PHP 会锁定会话文件，直到脚本完成。尝试使用锁定会话的页面请求将被阻止，直到会话文件被释放。PHP 这样做是为了使会话保持一致的状态。[引用 PHP 错误 #31464](https://bugs.php.net/bug.php?id=31464)：

> [2005-01-10 08:13 UTC] derick at php dot net
> 
> 这确实根本不是一个错误，会话扩展需要锁定会话文件，以便并发更新不会损坏文件。这意味着所有使用相同会话文件的脚本都需要序列化。为了提高性能，您可以在完成读取/设置会话变量后立即使用 [http://php.net/session_write_close](http://php.net/session_write_close)，这将删除文件的锁定。

[上面和这里](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)描述的最简单的解决方法是：

*   称呼`session_start()`
*   读/写任何会话变量
*   称呼`session_write_close()`
*   做冗长的处理

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T19:06:08.723

正如评论中提到的，会话是问题 - 这是因为会话文件被锁定。

在长时间运行的脚本中使用[`session_write_close()`](http://php.net/session-write-close)以解锁会话文件，但请注意，之后您不能`$_SESSION`在该特定脚本中使用变量。

# c++ - C++ windows dll 和 libxml2 依赖问题

> ID：13651196
> 
> 赞同：0
> 
> 时间：2012-11-30T18:44:40.107
> 
> 标签：c++, windows, dependencies, libxml2

我开发了一个 dll 插件，即其他一些进程加载我的 dll，使用 VS 的 C++ ...我需要将 xml 解析添加到我的代码中，并且我使用 libxml2。

我已经添加了我的 dll，现在当应用程序尝试加载我的 dll 时，它无法加载。这是一个依赖问题，但我无法弄清楚我需要添加到我的项目中的所有其他库/dll。

有任何想法吗？

# jpa - 获取加入 JDO

> ID：13651197
> 
> 赞同：-1
> 
> 时间：2012-11-30T18:44:48.420
> 
> 标签：jpa, jdo, fetch

在 JPA fetch join 中，您可以在一个原生 SQL 查询中获取实体及其关联实体。有没有办法在 JDO 中做类似的事情？我正在使用 DataNucleus 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:32:51.677

JDO 具有获取组，这比 JPA 中的任何当前功能都强大得多。只需阅读 JDO 规范。

# php - 使用 require 函数时自动加载文件

> ID：13651198
> 
> 赞同：0
> 
> 时间：2012-11-30T18:44:48.203
> 
> 标签：php, autoload

[自动加载类（ __autoload](http://php.net/manual/en/language.oop5.autoload.php) ）有一个神奇的功能，我想知道是否有办法在没有类的情况下加载文件。

像这样的东西：

```
require ('example_file'); // Trigger __autoloadfiles function

function __autoloadfiles($filename)
{
    $files = array(
        ROOT . DS . 'library' . DS . $filename. '.php',
        ROOT . DS . 'application' . DS . $filename . '.php',
        ROOT . DS . 'application/otherfolder' . DS . $filename. '.php'
    );

    $file_exists = FALSE;

    foreach($files as $file) {
        if( file_exists( $file ) ) {
            require_once $file;
            $file_exists = TRUE;
            break;
        }
    }

    if(!$file_exists)
        die("File not found.");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:31:51.037

您可以定义自己的功能来要求：

```
function require_file($file) {
    // your code
} 
```

然后调用它

```
require_file('file'); 
```

我想没有办法重载`require`函数。

# asp.net-mvc - 如何在 ASP.net MVC 4 RouteConfig.cs 中使用约束？

> ID：13651208
> 
> 赞同：7
> 
> 时间：2012-11-30T18:45:42.590
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试使用最新的 asp.net mvc 4 架构来获得一些路由约束。在 App_Start 下有一个名为 RouteConfig.cs 的文件。

如果我从下面的示例中删除约束部分，则 url 有效。但我需要添加一些约束，以便 url 不匹配所有内容。

应该工作：/videos/rating/1

不工作：/videos/2458/Text-Goes-Here

这就是我所拥有的：

```
//URL: /videos/rating/1
routes.MapRoute(
    name: "Videos",
    url: "videos/{Sort}/{Page}",
    defaults: new { controller = "VideoList", action = "Index", Sort = UrlParameter.Optional, Page = UrlParameter.Optional },
    constraints: new { Sort = @"[a-zA-Z]", Page = @"\d+"}
); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T19:05:16.880

如果你想在同一条路由上有多个可选参数，你会遇到麻烦，因为你的 url 必须始终指定第一个才能使用第二个。仅仅因为您使用约束并不能阻止它评估参数，它反而无法匹配这条路线。

以此为例：`/videos/3`

当它试图匹配时，它会找到视频，并说，“好的，我仍然匹配”。然后它查看下一个参数，即 Sort，它得到值 3，然后根据约束检查它。约束失败，所以它说“OPPS，我不匹配这条路线”，然后它继续前进到下一条路线。为了指定没有定义 sort 参数的页面，您应该定义 2 个路由。

```
//URL: /videos/rating/1
routes.MapRoute(
    name: "Videos",
    url: "videos/{Sort}/{Page}",
    defaults: new { controller = "VideoList", action = "Index", Page = UrlParameter.Optional },
    constraints: new { Sort = @"[a-zA-Z]+", Page = @"\d+"}
);

//URL: /videos/1
routes.MapRoute(
    name: "Videos",
    url: "videos/{Page}",
    defaults: new { controller = "VideoList", action = "Index", Sort = "the actual default sort value", Page = UrlParameter.Optional },
    constraints: new { Page = @"\d+"}
); 
```

我尽可能将最具体的路线放在首位，并以最不具体​​的路线结束，但在这种情况下，由于限制，顺序应该无关紧要。我所说的具体是最定义的值，所以在这种情况下，您*必须*在第一个路由中定义排序，并且您还可以指定页面，因此它比仅使用页面参数的路由更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-09T22:06:53.663

我的输入可能相当晚，但对于仍在寻找答案的其他人。为了简单起见，我将在我的 RoutesConfig 文件中使用以下内容

```
 routes.MapRoute(
     name: "Videos",
     url: "{controller}/{action}/{id}",
     defaults: new { controller = "VideoList", action = "Index", id="" },
     constraints: new { id = @"\d+"}
     ); 
```

根据您选择的实现，id 可以是 UriParameter.Optional，但在这种情况下它将是 id="" ，因为我们将在运行时传递一个字符串/int。

这种风格是从[http://www.asp.net/mvc/overview/older-versions-1/controllers-and-routing/creating-a-route-constraint-cs](http://www.asp.net/mvc/overview/older-versions-1/controllers-and-routing/creating-a-route-constraint-cs)

通过约定控制器类要记住的一件事总是以控制器结尾，例如 VideoListController 类。此类应列在包含以下方法的控制器文件夹下

```
public ActionResult Index(string id)
{
    // note this maps to the action
    // random implementation
    ViewBag.Message=id;
    View()
} 
```

// 请注意，这种方法仍然匹配任何字符串...要仅匹配整数，必须重写 Index 方法

```
public ActionResult Index(int id)
{
     // note this maps to the action
     ViewBag.Message=id;
     View()
} 
```

因此，此方法适用于 VideoList/Index/12，但在放置 VideoList/Index/somerandomtext 时，它会在运行时引发错误。这可以通过使用错误页面来解决。我希望这有帮助。如果它非常有用，请投票。

# asp.net - 当用户将光标放在 asp.net 的文本框中时，我需要发出警报。我该怎么做呢？

> ID：13651210
> 
> 赞同：1
> 
> 时间：2012-11-30T18:45:46.460
> 
> 标签：asp.net, textbox, alert, onfocus

当用户将光标放在 asp.net 中的文本框项目中时，我需要向用户提供自定义警报。我该怎么做呢？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:50:53.383

```
<input type="text" onfocus="alert('Got focus!');"/> 
```

或者更多的参与：

```
<script>
  function InputFocus()
  {
    var inp = document.getElementById('myInput');
    inp.onfocus = null; 
    alert('Got focus - ' + inp.id);
    setTimeout(function() { inp.onfocus = InputFocus; }, 100);
  }
</script>

<input type="text" value="one"/>
<input id="myInput" type="text" onfocus="InputFocus();" value="two"/>
<input type="text" value="three"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:48:53.500

您需要的两个事件是 onfocus （elemant 有焦点并且可以接受输入）和 onblur 在离开元素时被触发（比如文本框）。禁用的元素无法获得焦点，因此在这种情况下不会发生这些事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:54:50.593

焦点事件的 Javascript。

在 Page_Load 或 Page_Init 方法上添加以下代码：

```
 mytextBox.Attributes.Add("onfocus", "enterTextBox();") 
```

然后在页面上添加一个脚本标签：

```
function enterTextBox() {
     alert('hello');
} 
```

# exec - UNIX：xargs 和 exec 的区别

> ID：13651212
> 
> 赞同：1
> 
> 时间：2012-11-30T18:46:06.783
> 
> 标签：exec, xargs

我正在尝试`"rGEO"`使用以下命令在目录中搜索字符串：

```
find . -name "*" -type f -print | xargs grep "rGEO" 
./home/oper1/AgencyTape/geo/exe/gngeo.cmd:${WEB_DIR}/exe/web_reports.sh -aGN -d${prev_ccyy}${prev_mm} -rGEO -nomail 
```

在这种情况下，我会取回具有匹配行的文件名，以及与上述字符串匹配的行。

```
find . -name "*" -type f -exec grep "rGEO" {} \; 
```

在这种情况下，我回来了：

```
${WEB_DIR}/exe/web_reports.sh -aGN -d${prev_ccyy}${prev_mm} -rGEO -nomail 
```

不打印包含该行的文件 - 正如您所见，两个输出之间存在很大差异。

使用`xargs`提供更清晰和精确的输出。

我的问题是：这两个命令有什么区别？对我来说，他们似乎执行相同的逻辑，但得到不同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-13T07:18:59.257

*`what is the difference between the two commands? To me, they seem to be performing the same logic, but getting different results.`*

下面是 xargs 和 exec 之间的一个主要区别：

`find . -name "*.c" -exec ls -al {} \;`对每个单独的文件执行命令 ls -al。

`find . -name "*.c" | xargs ls -al`从 find 命令的输出构造一个参数列表并将其传递给 ls。

考虑下面生成的 find 命令输出：

```
a.c
b.c
c.c 
```

第一个命令（exec）将执行

```
ls -l a.c
ls -l b.c
ls -l c.c 
```

但第二个（xargs）会执行

```
ls -l a.c b.c c.c 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:39:37.880

添加 -print 也将返回文件的名称，尽管方式略有不同。

```
find . -name "*" -type f -exec grep "rGEO" {} \; -print 
```

我不知道内部工作，这是它的不同之处。假设 find 命令找到 2 个文件 a.txt 和 b.txt

-exec 会像处理它们一样。

```
grep "rGEO" a.txt
grep "rGEO" b.txt 
```

但是 xargs 会像..

```
grep "rGEO" a.txt b.txt. 
```

希望能帮助到你

# .net - XML 序列化丢失命名空间

> ID：13651213
> 
> 赞同：4
> 
> 时间：2012-11-30T18:46:07.323
> 
> 标签：.net, xml, serialization, deserialization

我有一个 CRM 实体 XML 消息，如下所示：

```
<c:KeyValuePairOfstringanyType xmlns:c="ns1" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"  >
....
 <c:value i:type="**b:AliasedValue**" **xmlns:b="ns3"**>
 SomethingHere...
 </c:value>
</c:KeyValuePairOfstringanyType> 
```

然后我将它反序列化为一个对象并序列化回
我得到的 xml

```
<c:KeyValuePairOfstringanyType xmlns:c="ns1" xmlns:i="http://www.w3.org/2001/XMLSchema-   instance"  >
 <c:value i:type="b:AliasedValue" >
 SomethingHere...
</c:value>
</c:KeyValuePairOfstringanyType> 
```

我失去了 xmlns:b 定义。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:59:13.120

四十二是正确的：属性值不带有任何默认语义，因此 xml 处理器无法识别名称空间的使用。

如果您希望`b`在您的 -attribute 中引用一些 -data，您`i:type`可以使用映射元素`c:value`与 (hypothesized)关联`b:value`，即：

```
<mapping xml:id="idXY'/>
...
<c:value c:ref="idXY">...</c:value>
...
<b:value b:ref="idXY">...</b:value>
... 
```

...您将`_:ref`在相应的 xml 模式中声明为 IDREF 属性。您可能需要调整 1:n-/m:n - 映射的设计，例如将引用者作为`_:value`.

最好的问候，卡斯滕

# sql-server - XACT_ABORT 在批处理中的行为与 sp_recompile 不一致

> ID：13651216
> 
> 赞同：0
> 
> 时间：2012-11-30T18:46:14.847
> 
> 标签：sql-server, tsql

我有两个类似的 TSQL 脚本，其中我设置了 XACT_ABORT ON。我希望**_test**表在脚本执行后不存在，因为我故意使用包装在事务中的语句会引发错误。

第一个脚本正确回滚 _test 表的创建。

```
SET XACT_ABORT ON
GO
BEGIN TRANSACTION
CREATE TABLE dbo._test(ID int IDENTITY(1, 1) NOT NULL)
EXEC sp_does_not_exist --raises error!
GO
IF @@TRANCOUNT > 0
    COMMIT; 
```

但是，第二个脚本不会回滚 _test 的创建，并且该表在脚本执行后存在：

```
SET XACT_ABORT ON
GO
BEGIN TRANSACTION
CREATE TABLE dbo._test(ID int IDENTITY(1, 1) NOT NULL)
EXEC sp_recompile sp_does_not_exist; --raises error!
GO
IF @@TRANCOUNT > 0
    COMMIT; 
```

为什么第二个脚本在执行后没有删除 _test 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:34:47.533

您没有提到您的 SQL Server 版本，但由于您的脚本的唯一区别是`sp_recompile`，这似乎是一个很好的查看位置。在 2008R2 中，它具有以下逻辑：

```
BEGIN TRANSACTION
-- CHECK VALIDITY OF OBJECT NAME --
--  (1) Must exist in current database
--  (2) Must be a table or an executable object
select @objid = object_id(@objname, 'local')

    if @objid is null OR
        (ObjectProperty(@objid, 'IsTable') = 0 AND
         ObjectProperty(@objid, 'IsExecuted') = 0)
    begin
        COMMIT TRANSACTION
        raiserror(15165,-1,-1 ,@objname)
        return @@error
    end 
```

因此，在尝试直接访问对象*之前*`sp_recompile`检查对象是否存在，如果未找到，则会引发严重性为 -1 的错误。文档[说明](http://msdn.microsoft.com/en-us/library/ms178592%28v=sql.105%29.aspx)严重性级别小于零被解释为零，严重性级别文档说明[严重性](http://msdn.microsoft.com/en-us/library/ms164086%28v=sql.105%29.aspx)为零时不会引发系统错误。*`RAISERROR`*

 *实际上，将`RAISERROR`from添加`sp_recompile`到您的脚本中表明它不会影响`@@TRANCOUNT`：

```
SET XACT_ABORT ON
GO
BEGIN TRANSACTION
CREATE TABLE dbo._test(ID int IDENTITY(1, 1) NOT NULL)
select @@trancount as 'before raiserror'    
raiserror(15165,-1,-1 ,'sp_does_not_exist')
select @@trancount as 'after raiserror' 

GO
IF @@TRANCOUNT > 0
    COMMIT; 
```

`@@TRANCOUNT`在引发错误之前和之后为 1，因此没有什么可以触发回滚。但是如果你这样做，第二个`SELECT`永远不会执行，因为数据库引擎“直接”引发了错误：

```
SET XACT_ABORT ON
GO
BEGIN TRANSACTION
CREATE TABLE dbo._test(ID int IDENTITY(1, 1) NOT NULL)
select @@trancount as 'before raiserror'    
exec sp_does_not_exist
select @@trancount as 'after raiserror' 

GO
IF @@TRANCOUNT > 0
    COMMIT; 
```*

# git - 我的 git 分支是如何忘记它的父级的？

> ID：13651220
> 
> 赞同：2
> 
> 时间：2012-11-30T18:46:34.683
> 
> 标签：git

我以通常的方式创建了一个 git 功能分支：

```
git checkout develop
git checkout -b new_feature_branch 
```

当将功能合并回主开发分支时，合并产生了大量的冲突（比预期的要多，因为主线没有太大变化）。

经过调查，我的功能分支似乎以某种方式从它的父级变成了孤儿。历史中缺少该分支的前 24 次提交，主线的初始分叉也是如此。

我知道这恰好是 24 次提交，因为它们列在`git reflog --all | grep new_feature_branch`.

由于缺少这些早期提交，因此分支现在似乎以整个存储库的副本开始，当我尝试将其合并回开发时会产生很多冲突。

这怎么发生的？

如何恢复丢失的提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:20:49.003

> 这怎么发生的？

*   你从`develop`- 你确定你的本地副本（而不是 say `origin/develop`）在你分支时是最新的吗？
*   绝对`develop`是您想要的父分支（不是`master`或其他）？
*   `develop`分支后你变基了吗？这可能会重写 's 中的父提交，`develop`而不是`new_feature_branch`'s 中的历史记录。
*   你是否在某个时候变基`new_feature_branch`，并在你的分支点之前不小心重写了父提交？

> 如何恢复丢失的提交？

只需将您的分支重新定位*到*所需的分支点（请参阅[此问题](https://stackoverflow.com/q/7744049/212858)或[本书](http://git-scm.com/book/ch3-6.html#More-Interesting-Rebases)等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:03:09.487

To recover, simply use either a [`graft` or a `replace`](https://stackoverflow.com/questions/6800692) which allows you to re-specify the parents of the base(root) of your orphaned branch.

If you do not need to keep your feature branch once it has been merged, then a simple one off graft could be sufficient for you to see the right branching structure.

However the parent linkage at the merge will still keep the orphaned branch and your repo will the have two root commits [probably not what you desire].

The simple improvement is to do a `rebase` (of your orphan onto its proper branch point) or a `filter-branch` after the graft.

It sounds like you had accidentally checked out the specific commit at the original branch point rather than creating a branch (tip) so that you had a `detached HEAD` situation, and did your fix ups in an inappropriate order after some error message - it's easy to do.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T01:55:27.397

好的，这就是我修复它的方法：

1.  运行`git reflog --all | grep <new_feature_branch>`以获取功能分支上的完整提交列表，包括历史记录中丢失的早期提交。
2.  打开`.git/logs/HEAD`并搜索最旧的可见提交以查找其原始父级的完整 SHA（[帽子提示](http://www.bluemangolearning.com/blog/2009/03/recovering-from-a-disastrous-git-rebase-mistake/)）。
3.  签出父提交（现在从分支历史中丢失的那个），然后从这个提交中签出一个新的“恢复”分支以创建一个新的基础。完成此操作后，“丢失”的提交作为恢复分支的一部分重新出现在树中，从开发分支正确分叉。
4.  使用“孤立”分支中最旧的提交运行`git cherry-pick <SHA>`，以将该分支的基础复制到恢复分支的顶端。解决合并冲突。
5.  签出孤立的分支。
6.  运行我刚刚复制到恢复分支的提交`git rebase --onto <new-parent> <old-parent>`在哪里，并且是我从中复制该提交的孤立分支上最旧的提交。完整的分支历史以最小的冲突成功移植。`new-parent``old-parent`

# android - 我得到listView.getChildCount（），设置arrayadapter后为0？

> ID：13651226
> 
> 赞同：6
> 
> 时间：2012-11-30T18:47:01.400
> 
> 标签：android

我想从 facebook 加载图像并填充到列表视图中，我能够获取朋友列表及其信息，但我想设置图像我得到 getChildCount() 0，请帮助，

```
 public static ArrayList<FBUser> fbUserArrayList;
    public static Drawable sharedDrawable;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.friends_list_view);
        this.setTitle("FB Friend List");

        final ListView listView = (ListView) findViewById(R.id.listview);
        FriendListAdapter couponsListAdapter = new FriendListAdapter(this,
                fbUserArrayList);
        listView.setAdapter(couponsListAdapter);

        couponsListAdapter.notifyDataSetChanged();

        setFbUsersImage(listView,fbUserArrayList);

    }

    private void setFbUsersImage(final ListView listView,final ArrayList<FBUser> fbUserArrayList) {
                // here am getting 0 ???
        for (int i = 0; i < listView.getChildCount(); i++) {
 ////           
   }

    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-30T18:48:59.080

ListView 尚未绘制，因此它没有任何子项。不幸的是，当视图被绘制时没有回调，例如`onResume()`，但是您可以使用 Runnable 来做您想做的事情。

* * *

**另外**
让我们做一些改变`onCreate()`：

```
listView.setAdapter(couponsListAdapter);
// Remove your calls to notifyDataSetChanged and setFbUsersImage

// Add this Runnable
listView.post(new Runnable() {
    @Override
    public void run() {
        setFbUsersImage(listView,fbUserArrayList);
    }
}); 
```

您需要制作`listView`一个字段变量，就像`fbUserArrayList`. 现在`setFbUsersImage()`将在 ListView 有子项时运行。

综上所述，如果您尝试以*任何*方式修改行，适配器是执行此操作的最佳位置。

# c - 结构声明

> ID：13651227
> 
> 赞同：0
> 
> 时间：2012-11-30T18:47:15.777
> 
> 标签：c, struct

这两种声明结构的方式有什么区别？

第一种方式：

```
struct x {}; 
```

第二种方式：

```
struct _x {} x; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:49:09.367

第一个仅定义类型`struct x`。第二个定义了类型`struct _x` *并*定义了一个名为 的类型的变量`x`。

虽然这可能不是您的想法，但以下划线开头的名称`_x`在文件范围内保留，因此除非它在其他范围内，否则第二个具有未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:49:23.693

第二种方式声明了一个名为 type的变量`struct _x` *和*一个名为`x`. 第一个仅声明类型`struct x`。

第二种方式基本相同

```
struct _x{};    // define a type
struct _x x;    // allocate a variable of type struct _x 
```

# c++ - 如何创建指向无法修改指向地址的数组的指针？

> ID：13651230
> 
> 赞同：1
> 
> 时间：2012-11-30T18:47:18.020
> 
> 标签：c++

我目前正在尝试学习 C++。在学习中，我喜欢尝试一些奇怪的事情来掌握语言和记忆是如何工作的。现在，我正在尝试创建一个类，该类具有一组在构造时设置的字符。我班级的唯一方法是能够通过参数上的指针获取数组。我已经成功地创建了我的类并且它工作得很好，但现在我想通过确保我永远不会更改数组的值来使其更加安全。

这是我到目前为止所拥有的：

```
#import <stdio.h>

class MyClass {
    public:
        char const * myArray;
        MyClass(char inputChar[]){
            myArray = inputChar;
        }

        void get(const char * retVal[]){
            *retVal = myArray;
        }
};

int main(){
    char myString[] = {'H','E','L','L','O'};
    MyClass somethingNew = MyClass(myString);
    const char * other = new char[4];
    somethingNew.get(&other);
    std::cout << other[0];
    return 0;
} 
```

我注意到我根本无法通过使用取消引用运算符来更改数组的值：

```
myArray[0] = 'h'; 
```

这很好，但这并不意味着我不能更改 myArray[0] 指向的指针：

```
*(&myArray) = new char('h'); 
```

有什么办法可以防止这种情况发生吗？

- - 解析度 - -

```
#import <stdio.h>

typedef const char * const constptr;

class MyClass {
    public:
        constptr * myArray;
        MyClass(constptr inputChar) {
            myArray = &inputChar;
        }

        void get(constptr * retVal){
            retVal = myArray;
        }
};

int main(){
    char myString[] = "Hello";
    MyClass somethingNew(myString);
    constptr other = new char[4];
    somethingNew.get(&other);
    std::cout << other[0];
    return 0;
} 
```

这意味着我不能执行以下任何操作：

```
*myArray[0] = 'h';
*myArray = new char[4];
*&*myArray = new char('h'); 
```

但我可以这样做：

```
myArray = &inputChar; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:48:52.857

是的，您必须创建一个指向 const 对象的 const 指针，如下所示：

```
char const * const myArray; 
```

如您所知，第一个`const`使您无法修改指针指向的内容；第二个`const`使您无法将其他内容重新分配给指针。

您也可以考虑使用 const 引用，这几乎是一样的。

编辑：

正如 Benjamin Lindley 指出的那样，由于指针现在是常量，因此您需要在初始化列表中为其赋值，而不是在构造函数主体中，如下所示：

```
 MyClass(char inputChar[])
   : myArray(inputChar) {
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:49:26.050

您需要`const`像这样创建一个指针：

```
char const * const myArray; 
```

那是一个指向 const char 的 const 指针。

# sql - 基于子集数据结果的 SQL 返回值

> ID：13651231
> 
> 赞同：0
> 
> 时间：2012-11-30T18:47:25.490
> 
> 标签：sql, oracle, case

我会尽力解释我想要完成的事情。

我有一个包含以下数据子集的表：

```
ID    BF_ID    C_ID    T_ID
1     1        10000   182
2     1        230     null
3     2        123     null
4     3        10000   124 
```

基本上，我想根据 查询此表`BF_ID`以查看结果中是否存在同时具有非空`T_ID`和非空 C_ID 的数据。

在上面的示例中，我想区分不同 BF_ID 之间的查询。BF_id 的行数可以是无限的。

*   BF_ID 为 1 将返回“混合”。
*   BF_ID 为 2 将返回“C_ID_ATTRIB”
*   BF_ID 为 3 将返回“T_ID_ATTRIB”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:09:32.403

Gordon 提供的示例的另一种替代方法，可能更具可读性：（只是在没有测试的情况下输入） `select bf_id, case when c is null and t is null then 'neither' when c is null and t is not null then 'T_ID_ATTRIB' when c is not null and t is null then 'C_ID_ATTRIB' else 'mixed' as which_attr from ( select bf_id, max(c_id) c, max(t_id) t from table1 group by bf_id)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:48:55.370

为此，您只需要一个 group by 和 case 语句：

```
select bf_id,
       (case when count(t_id) = 0 and count(c_id) = 0 then 'Neither'
             when count(t_id) > 0 and count(c_id) = 0 then 'T_ID_ATTRIB'
             when count(t_id) = 0 and count(c_id) > 0 then 'C_ID_ATTRIB'
             else 'Mixed'
        end) as WhichAttribute
from t
group by bf_id 
```

# asp.net-mvc - .ajax() 函数错误中的无效 JSON

> ID：13651234
> 
> 赞同：0
> 
> 时间：2012-11-30T18:47:35.820
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, jquery

在我的 $.ajax 我有

```
error: function (xhr, ajaxOptions, thrownError) {
            var result = $.parseJSON(xhr.responseText);
            alert(result.ErrorMessage);
  } 
```

尽管这对我以前的所有应用程序都有效，但这一次却让我窒息并给了我一个无效的 JSON 错误。我正在使用 jQuery 1.5，asp.net MVC 3。

PS：我查看了[jQuery 文档](http://api.jquery.com/jQuery.ajax/#jqXHR)，但没有看到`error`应该使用 JSON 的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:50:49.050

中的价值是`xhr.reponseText`多少？只需使用console.log() 将其打印出来。除非您将错误页面格式化为 JSON，否则您可能会从服务器获得一些标准的 500 HTML，这就是您无法将其解析为 JSON 的原因。

jQuery 没有规定`responseText`服务器在发生错误时返回的内容

# amazon-web-services - TorqueBox 2.x 是否有 Amazon EC2 AMI

> ID：13651236
> 
> 赞同：1
> 
> 时间：2012-11-30T18:47:46.407
> 
> 标签：amazon-web-services, torquebox

我已经使用 TorqueBox 好几个月了，想知道是否有人知道 TorqueBox 2.x 版本的 Amazon Web 服务的公共 TorqueBax AMI。

我已经在 Internet 上搜索过几次，但迄今为止只遇到过 TorqueBox 1.x 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:18:33.473

部署一个免费的 ubuntu 镜像（或者你喜欢的任何风格的 linux）

将 torquebox2.2 解压到 /opt

在/opt/torquebox-2.2.0下解压JDK1.7

将以下内容保存到您的 bashrc

```
export TORQUEBOX_HOME=/opt/torquebox-2.2.0
export JAVA_HOME=/opt/torquebox-2.2.0/jdk1.7.0_10
export JBOSS_HOME=$TORQUEBOX_HOME/jboss
export JRUBY_HOME=$TORQUEBOX_HOME/jruby
export PATH=$JRUBY_HOME/bin:$JAVA_HOME/bin:$PATH 
```

你完成了。除非您指的是具有使用扭矩箱部署的站点示例的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:22:31.667

我通过电子邮件收到了该项目的一位开发人员的回复，这是他们要实施的事情清单上的内容。其他用户也有同样的兴趣。

# .net - 查询更新多行

> ID：13651237
> 
> 赞同：3
> 
> 时间：2012-11-30T18:47:56.570
> 
> 标签：.net, linq, entity-framework

我有带有令牌、用户名、StatusId 的表。在我为特定用户在表中插入任何行之前，我想检查是否存在任何具有活动状态的行，如果有，请将其更新为非活动状态。

我无法弄清楚如何在 LINQ 中执行此操作。目前，我正在将我的值作为下面的查询进行检索。

```
var activeUsers = 
   (from _users in currentDataContext.Users 
        where _users.StatusId.Equals(1) 
        select _session); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:46:10.203

```
users = currentDataContext.Users.Where(o => o.StatusId == 1);
foreach(var item in users)
  item.StatusId = 0;
currentDataContext.SaveChanges(); 
```

请注意，如果您的应用程序是多用户的，那么在您查询数据库后可能会更改数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:01:58.690

这行得通吗？

```
currentDataContext.Users.Where(x=> x.StatusId == true).First().StatusId = False;
currentDataContext.SaveChanges(); 
```

# android - 使用 json 帖子从移动应用程序中使用 Devise 注册帐户

> ID：13651240
> 
> 赞同：2
> 
> 时间：2012-11-30T18:48:22.000
> 
> 标签：android, ruby-on-rails, api, devise

我是 Rails 新手，我希望能在我的 Rails 应用程序上从 Android 设备上注册帐户时获得帮助。目前我正在使用 Devise gem 进行用户注册。使用设计的令牌，我能够使用户身份验证正常工作，但我被困在如何从我的手机注册帐户。

到目前为止，我正在研究两种方法。我的第一次尝试是创建一个名为 MobileRegistrationsController 的新控制器，并使用如下创建方法：

```
class Api::V1::MobileRegistrationsController  < ApplicationController
  respond_to :json

  def create
    @user = User.create!(params[user])
    @user.ensure_authentication_token!

    respond_to do |format|
      format.json { render json: @user }
    end
  end
end 
```

这是我的路线文件夹。我为此遵循了 railscast 教程：

```
namespace :api do

  namespace :v1  do
    resources :tokens,:only => [:create, :destroy], :defaults => { :format => 'json' }
    match 'register' => 'mobile_registrations#create', :via => "post", :defaults => { :format => 'json' }
  end
end 
```

从这里开始，当我使用我的 REST 客户端尝试向

```
localhost:3000/api/v1/register 
```

我得到错误

```
ActionController::RoutingError (uninitialized constant    Api::V1::MobileRegistrationsController): 
```

所以我猜我在做一些根本错误的事情。我已经用谷歌搜索了，也许覆盖 Devise 会话控制器是更好的方法？有没有人有这方面的经验，可以帮助吗？

谢谢！

更新：所以我正在尝试一条新路线。通过将此添加到我的路线文件夹

```
devise_scope :user do
   match "api/v1/register" => "devise/registrations#create"
end 
```

当我尝试向此发送发布请求时。我收到另一个错误：

```
WARNING: Can't verify CSRF token authenticity 
```

我想这比我以前的要好。所以现在我只需要弄清楚如何获得我的 Rails 真实性令牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:48:04.800

好吧。所以我能够弄清楚。万一有人偶然发现并遇到同样的问题。看起来它是我的代码中一些错误的组合。

我重命名了我的控制器，因为我相信“未初始化的常量”错误是由于我的控制器命名不当造成的。为了简单起见，我只是将我的控制器重命名为 RegistersController。这样就解决了我的路由错误。

这导致我发现了一个新错误，即 CSRF 令牌。我添加了这一行：

> skip_before_filter :verify_authenticity_token, :only => :create

跳过了验证方法。这对我来说很模糊，因为我认为这会给我的应用程序增加漏洞，所以如果有人对此有更好的解决方案，请告诉我。

因此，在那之后，我的 create 方法中出现了一个新错误，即：

> 验证失败：电子邮件不能为空，密码不能为空

为了解决这个问题，我将创建方法更改为：

> @user = User.create!(:email => params[:email], :password => params[:password], :password_confirmation => params[:password_confirmation])

我还更改了我的 json 响应以包含我的真实性令牌，我将其作为共享首选项存储在我的 android 应用程序中。

> format.json { 渲染 :status=>200, :json=>{:token=>@user.authentication_token, :user => @user} }

# facebook - 如何从 facebook 实时更新中提取提要增量

> ID：13651241
> 
> 赞同：1
> 
> 时间：2012-11-30T18:48:30.680
> 
> 标签：facebook, facebook-graph-api, real-time

我想要的是能够对用户提要的特定更新采取行动：当其他人评论用户的帖子/照片/链接时，其他人评论评论，其他人喜欢我的用户的评论或帖子，标记用户在照片等中。在这些情况下，我们会通知用户发生的确切更改，因此我们需要确切知道发生了什么更改/发生并采取行动。

我有实时工作、处理挑战、检查 sha1 签名等。更新本身基本上只是告诉我：“用户 A 的提要已更改”。我希望我得到的是“这些是自上次以来的变化”。

我可以想出几种方法来解决这个问题，但它们看起来都很笨拙：

*   每次更新时保留每个用户提要的副本，通过迭代每个键手动区分，确定我检测到的更改是否是我需要采取行动的更改。我仍然不确定这是否会起作用，因为我只看到最后几篇文章。帖子的评论/喜欢是否将该帖子重新排序到前面？
*   跟踪每次更新中最近更改的时间戳，然后在后续更新中进行过滤。这仍然意味着我必须遍历整个提要中的每个帖子/评论/喜欢。
*   我在某处读到帖子/评论 ID 单调增加。每个用户的提要都是这样吗？对于评论，这只是帖子的本地内容吗？帖子/评论/喜欢是否共享一个 id 池，以便我可以在全球范围内依赖它？再次不确定这里的很多细节，但在这种情况下，我可以跟踪一次更新中看到的最高 id，并在后续更新中对其进行过滤。

不管怎样，这一切看起来都很暴力。非常感谢具体的建议或方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:26:36.867

您可以从[Graph 分页](https://developers.facebook.com/docs/reference/api/pagination/)返回的哈希值、您处理的每个帖子类型和评论等中存储“之后”光标。然后为提要进行[扩展字段选择](https://developers.facebook.com/docs/reference/api/field_expansion/)，获取所有帖子、评论、喜欢等。

将您的后游标与扩展字段选择中的散列中的游标进行比较，并丢弃未更改的内容。

对哈希中剩余的内容执行[批处理 API 请求并对其进行处理。](https://developers.facebook.com/docs/reference/api/batch/)

# javascript - 如何在 jQuery 1.8.x 中链接一系列延迟函数？

> ID：13651243
> 
> 赞同：19
> 
> 时间：2012-11-30T18:48:40.300
> 
> 标签：javascript, asynchronous, jquery-deferred

鉴于这些功能：

```
function func1() {
  var dfd = $.Deferred();

  setTimeout(function() {
    dfd.resolve('Password');
  }, 1000);

  return dfd.promise();
}

function func2(message) {
  var dfd = $.Deferred();

  setTimeout(function() {
    if (message == 'Password') {
      dfd.resolve('Hello World');
    }
   }, 1000);

  return dfd.promise();
} 
```

我想找到一种更好的方法来执行以下操作。注意这是使用 jQuery 1.8.x。

```
var promise = func1();

promise.done(function(message1) {

  var promise2 = func2(message1);

  promise2.done(function(message2) {
    alert(message2);
  });
}); 
```

有任何想法吗？我认为使用 jQuery #pipe 或 #then 会起作用，但我想不通。这是一个可以玩的小提琴：http: [//jsfiddle.net/Z7prn/](http://jsfiddle.net/Z7prn/)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-30T18:52:43.200

它并没有那么复杂（无论是使用`.then`还是`.pipe`，我认为自 jQuery 1.8 以来它们都是相同的）。

```
func1().then(func2).done(function(message) {
    alert(message);
}); 
```

由于`func2`返回一个新的延迟对象，所以`.done`回调被附加到那个对象。

[**演示**](http://jsfiddle.net/Z7prn/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-04T15:26:20.817

我有一个类似的用例，所以我认为这应该对您有所帮助。

以下方法将采用一组方法（可能返回也可能不返回 Promises）并按顺序执行它们，等到每个 deferred 完成后再继续。默认行为是在失败时停止；第二个参数让您无论调用是否失败都可以继续。

done/fail 处理程序签名是 (Array< *context* >) Function (Array<Object{ denied|resolved: *arguments* }>)，其中*context*是每个 resolveWith/rejectWith 调用的上下文，或者有问题的延迟，*arguments*是参数在决议/拒绝中通过的集合。

```
(function ($) {
    "use strict";
    var copy = function (a) {
        return Array.prototype.slice.call(a);
    };

    /**
        Handle a sequence of methods, stopping on failure by default
        @param Array<Function> chain    List of methods to execute.  Non-deferred return values will be treated as successful deferreds.
        @param Boolean  continueOnFailure   Continue executing even if one of the returned deferreds fails.
        @returns Deferred
     */
    $.sequence = function (chain, continueOnFailure) {
        var handleStep, handleResult,
            steps = copy(chain),
            def = new $.Deferred(),
            defs = [],
            results = [];
        handleStep = function () {
            if (!steps.length) {
                def.resolveWith(defs, [ results ]);
                return;
            }
            var step = steps.shift(),
                result = step();
            handleResult(
                $.when(result).always(function () {
                    defs.push(this);
                }).done(function () {
                    results.push({ resolved: copy(arguments) });
                }).fail(function () {
                    results.push({ rejected: copy(arguments) });
                })
            );
        };
        handleResult = continueOnFailure ?
                function (result) {
                    result.always(function () {
                        handleStep();
                    });
                } :
                function (result) {
                    result.done(handleStep)
                        .fail(function () {
                            def.rejectWith(defs, [ results ]);
                        });
                };
        handleStep();
        return def.promise();
    };
}(this.jQuery)); 
```

一个简单的使用示例：http: [//jsfiddle.net/rG9rA/](http://jsfiddle.net/rG9rA/)

```
function func1() {
  var dfd = $.Deferred();

  setTimeout(function() {
    dfd.resolve('Password');
  }, 1000);

  return dfd.promise();
}

function func2(message) {
  var dfd = $.Deferred();

  setTimeout(function() {
    if (message == 'Password') {
      dfd.resolve('Hello World');
    }
   }, 1000);

  return dfd.promise();
}

    $.sequence([func1, func2, function () { alert('done'); }]); 
```

# jsf-2 - Primefaces中ManagedBean返回null给graphicImage

> ID：13651248
> 
> 赞同：4
> 
> 时间：2012-11-30T18:49:11.897
> 
> 标签：jsf-2, primefaces, jboss7.x

我在 Primefaces 组件图形图像中显示图像时遇到问题。

当我的 MB 是 SessionScoped 时，一切正常。但是当它是 ViewScoped 时，图像不会显示。

我可以保留 SessionScoped，但我的页面确实在图像中上传/删除，并且这些图像存储在 PostgreSQL 中（请，我的软件架构迫使我这样做）。问题是当我插入新图像或删除图像时，页面仍然显示最后的值（未刷新的值），直到我关闭浏览器并再次打开。我希望使用 ViewScoped 可以重新加载页面并解决我的问题。

这是页面的快照：

```
 <p:panel id="panelListFotoProduto" header="Fotos do Produto" toggleable="true" collapsed="false" closable="false"
                             toggleSpeed="500" widgetVar="panelListFotoProduto" visible="true" >
                        <p:dataTable id="listFotoProduto" paginatorPosition="bottom" value="#{produtoMB.listProdutoFoto}" 
                                     lazy="true" var="pf" selectionMode="single" paginator="true" rows="1"
                                     rowKey="#{pf.id}">
                            <p:column style="width: 100%" >
                                <h:panelGrid columns="1" cellpadding="4"> 
                                    <p:graphicImage id="imageProduto" value="#{produtoMB.getFoto(pf)}" onclick="dialogFotoProduto.show()"/>
                                    <p:commandButton value="Excluir" style="width: 100%;" update=":growl :formProduto:panelListFotoProduto" actionListener="#{produtoMB.removeFoto(pf)}"/>
                                </h:panelGrid>     
                            </p:column>
                            <f:facet name="footer">
                                <h:panelGrid columns="1" cellpadding="4"> 
                                    <p:commandButton value="Adicionar" style="width: 100%;" update=":growl :formProduto:panelListFotoProduto" actionListener="#{produtoMB.adicionarFoto()}"/>
                                    <h:outputText id="totalProdutos" style="font-weight:bold" value="Total de Fotos Cadastrados: #{produtoMB.listProdutoFoto.size() }"/>
                                </h:panelGrid>                                      
                            </f:facet>
                        </p:dataTable>
                    </p:panel> 
```

这是我的MB：

```
@ManagedBean
@SessionScoped
public class ProdutoMB {

    private Produto       produto_atual      = new Produto();
    private Produto_Foto  produto_foto_atual = new Produto_Foto();

    private List<Produto>      listProduto         = null;    
    private List<Produto_Foto> listProdutoFoto     = null;
    private List<Produto_Foto> listProdutoFoto_all = null;

    private boolean adicionarFoto = false;
    private StreamedContent last;

    public Produto getProduto_atual(){
        return produto_atual;
    }    

    public void setProduto_atual(Produto produto) throws SQLException, IOException{        
        if(produto != null && produto_atual != null 
        && produto.getCd_produto().equals(produto_atual.getCd_produto())){
            return ;
        }
        produto_atual = produto;
        produto_foto_atual = null;        
        listProdutoFoto    = new ArrayList<>();

        int index = 0;
        System.out.println("List >> " + getListProdutoFoto_all());
        for(Produto_Foto p_f : getListProdutoFoto_all()){
            if(produto_atual.getCd_produto().equals(p_f.getCd_produto())){
                p_f.setId(index++);
                p_f.setContent(getFoto_b(produto_atual.getCd_empresa(), p_f.getCd_imagem()));
                listProdutoFoto.add(p_f);
            } 
        }

        if(listProdutoFoto.isEmpty()){
            Produto_Foto p_f = new Produto_Foto();
            p_f.setId(-1);
            p_f.setCd_produto(produto_atual.getCd_produto());
            p_f.setCd_empresa(produto_atual.getCd_empresa());
            p_f.setCd_imagem(-1);
            p_f.setContent(getFoto_b(produto_atual.getCd_empresa(), p_f.getCd_imagem()));
            listProdutoFoto.add(p_f);
        }       
    }

    public void setProduto_foto_atual(Produto_Foto produto_foto) {
        if(produto_foto != null && produto_foto_atual != null 
        && produto_foto.getCd_produto().equals(produto_foto_atual.getCd_produto())){
            return ;
        }
        produto_foto_atual = produto_foto;
    }

    public ProdutoMB(){
    }

    public void handleFileUpload(FileUploadEvent event) throws SQLException, IOException{
        if(event != null){            
            UploadedFile imagem_upload = event.getFile();

            byte[] buf = imagem_upload.getContents();
            BufferedImage image = ImageIO.read(ImageIO.createImageInputStream(new ByteArrayInputStream(buf)));            

            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            ImageIO.write( image, "jpg", baos );
            baos.flush();
            buf = baos.toByteArray();
            baos.close();            

            BufferedImage scaledImage = Scalr.resize(image, 250);

            if(scaledImage != null){
                baos = new ByteArrayOutputStream();
                ImageIO.write( scaledImage, "jpg", baos );
                baos.flush();
                byte[] imageInByte = baos.toByteArray();
                baos.close();

                buf = imageInByte;
            }

            if(adicionarFoto){
                adicionarFoto = false;

                Produto_Foto p_f = new Produto_Foto();
                p_f.setId(listProdutoFoto.size());
                p_f.setCd_produto(produto_atual.getCd_produto());
                p_f.setCd_empresa(produto_atual.getCd_empresa());
                p_f.setCd_imagem(-1);
                p_f.setContent(buf);

                if(listProdutoFoto.size() == 1){
                    Produto_Foto p_f_aux = listProdutoFoto.get(0);
                    if(p_f_aux.getId() == -1){
                        p_f.setId(0);
                        listProdutoFoto.set(0, p_f);
                    } else {
                        listProdutoFoto.add(p_f);
                    }
                } else {
                    listProdutoFoto.add(p_f);
                }
                return;
            }

            if(produto_foto_atual != null){
                int index = produto_foto_atual.getId();
                if(index >= 0){
                    produto_foto_atual.setContent(buf);
                    listProdutoFoto.set(index, produto_foto_atual);
                } else if(index == -1){
                    produto_foto_atual.setContent(buf);
                    produto_foto_atual.setId(++index);
                    listProdutoFoto.set(index, produto_foto_atual);
                }
            }
        } 
    }

    public void adicionarFoto(){
        adicionarFoto = true;
        RequestContext.getCurrentInstance().execute("dialogFotoProduto.show()");
    }

    public void removeFoto(Produto_Foto produto_foto) throws SQLException, IOException{
        if(produto_foto == null){
            return ;
        }
        int index = produto_foto.getId();
        if(index >= 0){
            listProdutoFoto.remove(index);

            for(int i = 0; i < listProdutoFoto.size(); i++){
                Produto_Foto p_f = listProdutoFoto.get(i);
                if(p_f.getId() > index){
                    p_f.setId(p_f.getId() - 1);
                }
            }
        }
        if(listProdutoFoto.isEmpty()){
            Produto_Foto p_f = new Produto_Foto();
            p_f.setId(-1);
            p_f.setCd_produto(produto_atual.getCd_produto());
            p_f.setCd_empresa(produto_atual.getCd_empresa());
            p_f.setCd_imagem(-1);
            p_f.setContent(getFoto_b(produto_atual.getCd_empresa(), p_f.getCd_imagem()));
            listProdutoFoto.add(p_f);
        }    
    }

    public void removeFotoAtual(){
        if(produto_foto_atual == null){
            return ;
        }
        int index = produto_foto_atual.getId();
        if(index >= 0){
            listProdutoFoto.remove(index);

            for(int i = 0; i < listProdutoFoto.size(); i++){
                Produto_Foto p_f = listProdutoFoto.get(i);
                if(p_f.getId() > index){
                    p_f.setId(p_f.getId() + 1);
                }
            }
        }
    }

    public void removeFotoBanco(Produto_Foto pf_aux) throws SQLException{
        if(produto_atual == null){
            return ;
        }

        if(pf_aux == null){
            return ;
        }

        Integer cd_empresa = produto_atual.getCd_empresa();

        if(cd_empresa == null){
            return ;
        }

        Connection conn = null;
        Connection conn_p = null;
        PreparedStatement ps = null;
        ResultSet rs         = null;
        try {
            conn   = conectorImagemPostgreSQL.getConnection(); 
            conn_p = conectorPostgreSQL.getConnection();
            conn.setAutoCommit(false);

            ps = conn_p.prepareStatement(" DELETE FROM produto_foto WHERE cd_empresa = ? AND cd_produto = ? AND nm_foto = ? AND cd_imagem = ?;");                        
            ps.setInt(1, cd_empresa);
            ps.setString(2, produto_atual.getCd_produto());
            ps.setString(3, pf_aux.getNm_foto());
            ps.setInt(4, pf_aux.getCd_imagem());
            ps.executeUpdate();
            ps.close();
        } catch(Exception e){
            e.printStackTrace();
        } finally{
            if (rs != null) {
                rs.close();
            }
            if (ps != null) {
                ps.close();
            }
            conn.commit();
        }
    }

    public void salvaFotoBanco() throws SQLException{
        if(produto_atual == null){
            return ;
        }

        if(listProdutoFoto == null || listProdutoFoto.isEmpty()){
            return ;
        }

        Integer cd_empresa = produto_atual.getCd_empresa();

        if(cd_empresa == null){
            return ;
        }

        Connection conn = null;
        Connection conn_p = null;
        PreparedStatement ps = null;
        ResultSet rs         = null;

        conn   = conectorImagemPostgreSQL.getConnection(); 
        conn_p = conectorPostgreSQL.getConnection();  

        ps = conn_p.prepareStatement(" DELETE FROM produto_foto WHERE cd_empresa = ? AND cd_produto = ?;");

        ps.setInt(1, cd_empresa);
        ps.setString(2, produto_atual.getCd_produto());
        ps.executeUpdate();
        ps.close();

        conn_p.commit();

        for(Produto_Foto p_f : listProdutoFoto){                       
            try {
                conn.setAutoCommit(false);
                if(p_f.getId() >= 0 && p_f.getCd_imagem() < 0){

                    ps = conn.prepareStatement("SELECT f_sequencial('IMAGEMLO', ?) as cd_imagem");
                    ps.setInt(1, cd_empresa);
                    rs = ps.executeQuery();
                    if (rs != null) {
                        while(rs.next()) {
                            p_f.setCd_empresa(produto_atual.getCd_empresa());
                            p_f.setCd_produto(produto_atual.getCd_produto());
                            p_f.setCd_imagem(rs.getInt(1));
                        }
                    }
                    byte[] b = p_f.getContentBytes();

                    BufferedImage image = ImageIO.read(ImageIO.createImageInputStream(new ByteArrayInputStream(b)));            

                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    ImageIO.write( image, "jpg", baos );
                    baos.flush();
                    b = baos.toByteArray();
                    baos.close();            

                    BufferedImage scaledImage = Scalr.resize(image, 250);

                    if(scaledImage != null){
                        baos = new ByteArrayOutputStream();
                        ImageIO.write( scaledImage, "jpg", baos );
                        baos.flush();
                        byte[] imageInByte = baos.toByteArray();
                        baos.close();

                        b = imageInByte;
                    }
                    LargeObjectManager lobj = ((org.postgresql.PGConnection)conn).getLargeObjectAPI();
                    int oid = lobj.create(LargeObjectManager.READ | LargeObjectManager.WRITE);
                    LargeObject obj = lobj.open(oid, LargeObjectManager.WRITE);
                    obj.write(b);
                    obj.close();
                    ps = conn.prepareStatement(" INSERT INTO imagemlo(cd_empresa, cd_imagem, ds_imagem, by_imagem) "
                                                        + "VALUES (?, ?, ?, ?);");

                    String file_name = p_f.getCd_empresa() + "_" + 
                                p_f.getCd_produto() + "_" + 
                                p_f.getCd_imagem() + ".jpg";

                    ps.setInt(1, cd_empresa);
                    ps.setInt(2, p_f.getCd_imagem());
                    ps.setString(3, file_name);
                    ps.setLong(4, oid);
                    ps.executeUpdate();
                    ps.close();
                }
                ps = conn_p.prepareStatement(" INSERT INTO produto_foto(cd_empresa, cd_produto, nm_foto, cd_imagem) "
                                                    + "VALUES (?, ?, ?, ?);");

                String file_name = p_f.getCd_empresa() + "_" + 
                                p_f.getCd_produto() + "_" + 
                                p_f.getCd_imagem() + ".jpg";

                ps.setInt(1, cd_empresa);
                ps.setString(2, produto_atual.getCd_produto());
                ps.setString(3, file_name);
                ps.setInt(4, p_f.getCd_imagem());
                ps.executeUpdate();
                ps.close();
            } catch(Exception e){
                e.printStackTrace();
            } finally{
                if (rs != null) {
                    rs.close();
                }
                if (ps != null) {
                    ps.close();
                }
                conn.commit();
            }
        }
        FacesMessage msg = new FacesMessage("Alterações salvas com sucesso.", "");  
        FacesContext.getCurrentInstance().addMessage(null, msg); 
    }

    public void editaFoto(Produto_Foto produto_foto){
        if(produto_foto != null){
            produto_foto_atual = produto_foto;
        }
    }

    public StreamedContent getFotoAtual() throws SQLException, IOException{
        if(produto_foto_atual != null){
            int index = produto_foto_atual.getId();
            if(index >= 0){
                last = listProdutoFoto.get(index).getContent();
            }
        }
        return last;
    }

    public StreamedContent getFoto(Produto_Foto produto_foto) throws SQLException, IOException{
        if(produto_foto != null){
            produto_foto_atual = produto_foto;

            int index = produto_foto.getId();
            if(index >= 0){
                last = listProdutoFoto.get(index).getContent();
            }

            if(index == -1){
                last = listProdutoFoto.get(0).getContent();
            }
        }

        if(last == null){
            last = (new DefaultStreamedContent(new ByteArrayInputStream(getFoto_b(produto_atual.getCd_empresa(), -1)), "image/jpeg", "img_padrao"));
        }
        return last;
    }

    public StreamedContent getFoto(Integer cd_empresa, Integer cd_imagem) throws SQLException, IOException{
        Usuario u = (Usuario)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("LoggedUser");

        if(u == null){
            System.out.println("Usuário é nulo");
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));
            return (new DefaultStreamedContent(fis, "image/jpeg", "img_padrao"));
        }

        if(produto_atual == null){
            System.out.println("Produto Atual é nulo");
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));
            return (new DefaultStreamedContent(fis, "image/jpeg", "img_padrao"));
        }

        if(cd_empresa == null){
            System.out.println("cd_empresa é nulo");
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));
            return (new DefaultStreamedContent(fis, "image/jpeg", "img_padrao"));
        }

        if(cd_imagem == null || cd_imagem < 0){
            System.out.println("cd_imagem é nulo ou menor que zero");
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));
            return (new DefaultStreamedContent(fis, "image/jpeg", "img_padrao"));
        }

        Connection        conn = null;
        PreparedStatement   ps = null;
        ResultSet           rs = null;

        try {        
            conn = conectorImagemPostgreSQL.getConnection();  
            conn.setAutoCommit(false);
            LargeObjectManager lobj = ((org.postgresql.PGConnection)conn).getLargeObjectAPI();

            ps = conn.prepareStatement("SELECT ds_imagem, by_imagem FROM imagemlo WHERE cd_empresa = ? AND cd_imagem = ?");
            ps.setInt(1, cd_empresa);
            ps.setInt(2, cd_imagem);

            rs = ps.executeQuery();
            if (rs != null) {
                while(rs.next()) {

                    String ds_imagem = rs.getString("ds_imagem");   
                    int oid = rs.getInt("by_imagem");

                    LargeObject obj = lobj.open(oid, LargeObjectManager.READ);

                    //read the data
                    byte buf[] = new byte[obj.size()];
                    obj.read(buf, 0, obj.size());
                    obj.close();

                    BufferedImage image = ImageIO.read(ImageIO.createImageInputStream(new ByteArrayInputStream(buf)));            

                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    ImageIO.write( image, "jpg", baos );
                    baos.flush();
                    buf = baos.toByteArray();
                    baos.close();            

                    BufferedImage scaledImage = Scalr.resize(image, 250);

                    if(scaledImage != null){
                        baos = new ByteArrayOutputStream();
                        ImageIO.write( scaledImage, "jpg", baos );
                        baos.flush();
                        byte[] imageInByte = baos.toByteArray();
                        baos.close();

                        buf = imageInByte;
                    }
                    return (new DefaultStreamedContent(new ByteArrayInputStream(buf), "image/jpeg", ds_imagem));
                }
            }
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));

            return (new DefaultStreamedContent(fis, "image/jpeg", "img_padrao"));
        } finally{
            if (rs != null) {
                rs.close();
            }
            if (ps != null) {
                ps.close();
            }
            conn.commit();
        }
    }    

    public byte[] getFoto_b(Integer cd_empresa, Integer cd_imagem) throws SQLException, IOException{
        Usuario u = (Usuario)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("LoggedUser");

        if(u == null){
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));

            ByteArrayOutputStream out = new ByteArrayOutputStream();

            byte[] buffer = new byte[1024]; 
            while (fis.read(buffer) != -1) out.write(buffer); 

            return out.toByteArray();
        }

        if(produto_atual == null){
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));

            ByteArrayOutputStream out = new ByteArrayOutputStream();

            byte[] buffer = new byte[1024];
            while (fis.read(buffer) != -1) out.write(buffer); 

            return out.toByteArray();
        }

        if(cd_empresa == null){
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));

            ByteArrayOutputStream out = new ByteArrayOutputStream();

            byte[] buffer = new byte[1024]; 
            while (fis.read(buffer) != -1) out.write(buffer); 

            return out.toByteArray();
        }

        if(cd_imagem == null || cd_imagem < 0){
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));

            ByteArrayOutputStream out = new ByteArrayOutputStream();

            byte[] buffer = new byte[1024]; 
            while (fis.read(buffer) != -1) out.write(buffer); 

            return out.toByteArray();
        }

        Connection        conn = null;
        PreparedStatement   ps = null;
        ResultSet           rs = null;

        try {        
            conn = conectorImagemPostgreSQL.getConnection();  
            conn.setAutoCommit(false);
            LargeObjectManager lobj = ((org.postgresql.PGConnection)conn).getLargeObjectAPI();

            ps = conn.prepareStatement("SELECT ds_imagem, by_imagem FROM imagemlo WHERE cd_empresa = ? AND cd_imagem = ?");
            ps.setInt(1, cd_empresa);
            ps.setInt(2, cd_imagem);

            rs = ps.executeQuery();
            if (rs != null) {
                while(rs.next()) {

                    String ds_imagem = rs.getString("ds_imagem");   
                    int oid = rs.getInt("by_imagem");

                    LargeObject obj = lobj.open(oid, LargeObjectManager.READ);

                    //read the data
                    byte buf[] = new byte[obj.size()];
                    obj.read(buf, 0, obj.size());
                    obj.close();
                    BufferedImage image = ImageIO.read(ImageIO.createImageInputStream(new ByteArrayInputStream(buf)));            

                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    ImageIO.write( image, "jpg", baos );
                    baos.flush();
                    buf = baos.toByteArray();
                    baos.close();            

                    BufferedImage scaledImage = Scalr.resize(image, 250);

                    if(scaledImage != null){
                        baos = new ByteArrayOutputStream();
                        ImageIO.write( scaledImage, "jpg", baos );
                        baos.flush();
                        byte[] imageInByte = baos.toByteArray();
                        baos.close();

                        buf = imageInByte;
                    }
                    return buf;
                }
            }
            FileInputStream fis = new FileInputStream(FacesContext.getCurrentInstance().getExternalContext().getRealPath("image_not_found.png"));

            ByteArrayOutputStream out = new ByteArrayOutputStream();

            byte[] buffer = new byte[1024]; 
            while (fis.read(buffer) != -1) out.write(buffer); 

            return out.toByteArray();
        } finally{
            if (rs != null) {
                rs.close();
            }
            if (ps != null) {
                ps.close();
            }
            conn.commit();
        }
    }    

    public void save() throws SQLException{
        salvaFotoBanco();
    }

    public List<Produto> getListProduto() {

        Usuario u = (Usuario)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("LoggedUser");

        if(u == null){
            return null;
        }        

        Integer cd_empresa = u.getCd_empresa();

        if(cd_empresa == null){
            return null;
        }

        if(listProduto == null){
            listProduto = getProduto(cd_empresa);
        }

        return listProduto;
    }

    public List<Produto_Foto> getListProdutoFoto_all() {
        if(listProdutoFoto_all == null){
            listProdutoFoto_all = getProduto_Foto(produto_atual.getCd_empresa());
        }
        return listProdutoFoto_all;
    }

    /**
     * Methods to get/set data in the DB...
     */
} 
```

如果我可以使用 SessionScoped 重新加载内容，那就更好了。

谢谢您的帮助。

我正在使用 JBOSS 7，Primefaces 3.4.2

[]s 威廉·伯坦

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-30T20:29:10.897

了解`<p:graphicImage>`with 的`StreamedContent`工作原理很重要。每个图像的遗嘱背后的属性`<p:graphicImage value>`基本上在两个完全独立的 HTTP 请求中进行查询。

第一个 HTTP 请求（执行所有 JSF 工作并因此负责生成包括`<img>`标签在内的一堆 HTML 代码的请求）基本上会查询属性以确定它返回的图像类型（例如 a`String`或 a `StreamedContent`），以便可以内联/自动生成正确的 URL。请注意，如果`StreamedContent`图像的内容**未被**读取。HTML 图像并不是这样工作的：不是网络服务器将它们内联到同一个 HTTP 请求中，而是网络浏览器在另一个 HTTP 请求中单独下载它。

使用时`StreamedContent`，则第二个 HTTP 请求（当浏览器需要根据`<img>`元素的 URL 下载具体图像文件以将其显示在 HTML 文档中的所需位置时触发的请求）将基本上咨询该属性再次以下载图像内容。

视图范围的 bean 通过隐藏的输入字段绑定到特定的 JSF 视图`javax.faces.ViewState`。如果这在 HTTP 请求中不存在（或具有不同的值），那么基本上意味着完全不同的视图。因此，这些图像请求不会重用相同的视图范围 bean 实例。每个图像请求都会获得一个全新的视图范围 bean 实例，所有属性都设置为默认值。会话范围的 bean 基本上与当前在客户端和服务器之间建立的 HTTP 会话一样长，因此相同的 bean 实例将被重用于这些图像请求，所以它就是这样工作的。

要解决您的具体问题，最好是创建一个应用程序或请求范围 bean，它通过其 ID 作为请求参数获取图像。这样，您也不需要一次用数十或数百张图像污染会话（这只会在多个并发用户查看相同图像的情况下浪费服务器内存）。您只需要拥有数据表的图像标识符列表，并通过单独的应用程序范围 bean 提供图像。

### 也可以看看：

*   [在 <ui:repeat> 内的 <p:graphicImage> 中显示数据库 blob 图像](https://stackoverflow.com/questions/10073905/problems-displaying-database-blob-image-in-primefaces-graphicimage/10161878#10161878)
*   [如何在 ui:repeat 中将 <p:graphicImage> 与 DefaultStreamedContent 一起使用？](https://stackoverflow.com/questions/10944673/how-to-use-pgraphicimage-with-defaultstreamedcontent-in-an-uirepeat/10951201#10951201)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T09:03:33.683

我遇到了与 OP“类似”的问题，我来到了这里（以及 BalusC 的许多其他答案）。

BalusC 的解释和往常一样完美，但是如果像我和 OP 一样，你受到严格的限制，你如何解决这个问题？在我的情况下：bean 必须是 ViewScope，存储在 bean 中的图像字节在上传时立即“ajaxely”刷新，您无法根据属性（如 ID）再次检索图像，并将其取出数据库）。一般来说，任何时候你有一个一次性生成的图像（验证码？）或来自 ajaxely 的图像（上传的图像？用户修改的图像？）。

我知道，对于这种富含 ajax 的应用程序，JSF/PrimeFaces 并不是最好的框架，但应用程序完全是用 PrimeFaces 编写的，所以……也许你想坚持使用 PF，看看是否有解决方案。

您可以结合使用 ajax 组件和创造力，即 remoteCommand、一点 JS 和一堆我要链接的 StackOverflow 答案来做到这一点。

首先，您需要调用remoteCommand。我在 fileUploader 的“onupload”事件中执行此操作（类似于此[答案](https://stackoverflow.com/a/24167050/863564)），以及在文档准备时间（针对生成的图像）​​：

```
<p:fileUpload fileUploadListener="#{bean.handleFileUpload}"
              oncomplete="displayImageBegin();" 
```

`displayImageBegin`只需调用远程命令：

```
function displayImageBegin() {
    if (typeof(getImage) == "function")
        getImage();
} 
```

和

```
<p:remoteCommand name="getImage" action="#{bean.getImage()}"
                 oncomplete="displayImageEnd(xhr, status, args);"
                 style="display: none;" /> 
```

在 bean 方面，getImage 函数只返回图像字节。您在这里有两个选择：或者使用内联、base64 编码`img src`（参见[这个答案](https://stackoverflow.com/a/20756091/863564)和[这个](https://stackoverflow.com/a/33552306/863564)），或者只返回和八进制流并将其放入`canvas`. 第二个选项更灵活，适用于更大的图像（我的图像很小，尺寸可控，所以 base64 编码很好）：

您需要完全控制 XHR 答案的格式，就像在这个[答案](https://stackoverflow.com/a/10982930/863564)中一样（顺便说一句，我同意这是滥用 JSF 作为 REST 服务；将此代码视为一个有趣的实验）：

```
public void getImage() throws IOException {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = facesContext.getExternalContext();
    externalContext.setResponseContentType("application/text");
    externalContext.setResponseCharacterEncoding("UTF-8");

    if (getCurrentImagePresent()) {
        String base64Image = Base64.getEncoder().encodeToString(yourByteArray);
        externalContext.getResponseOutputWriter().write(base64Image);
    }
    else {
        externalContext.setResponseStatus(404);
    }
    facesContext.responseComplete();
} 
```

该`remoteCommand` `oncomplete`事件将从这个 bean 函数返回的数据连接到我们的 JS，就像在[这个答案](https://stackoverflow.com/a/7930504/863564)中一样：

```
function displayImageEnd(xhr, status, args) {
    if (xhr.status == 200) {
        $('#previewCurrentImage').attr("src", "data:image/png;base64," + xhr.responseText);
    }
} 
```

（当然，您的 xhtml 中需要正确的 img 标签）

为什么这行得通？答案在[这里](https://stackoverflow.com/a/6026009/863564)：

> @ViewScoped bean 的寿命与 JSF 视图一样长。[...]
> 
> 因此，@ViewScoped bean 在需要跨 Ajax 请求记住（更改的）视图状态的支持 Ajax 的丰富视图中特别有用。

图像的字节数组是作为 bean 创建的一部分生成的，和/或作为对页面上 ajax 操作的响应；然后可以通过页面上的任何其他 ajax 操作来检索它，因为它会命中同一个 ViewScoped bean。

这是一个适用于我的解决方案；我一般不推荐它，但如果你的约束非常相似，你可以做一些事情......相似！:)

我只是想分享它，因为它可能非常适合 OP 问题（或寻找类似问题的人），它是一个很好的 SO 答案的拼贴。

# c - 编译器跳过循环

> ID：13651253
> 
> 赞同：1
> 
> 时间：2012-11-30T18:49:37.887
> 
> 标签：c, flops

我正在通过循环编译触发器，其中包含以下简单操作：

```
for (i = beginvar; i < endvar; i++) {
    for (j = beginvar; j < endvar; j++) {   
        num1 = ((num1 + num2) / num1);
    }
} 
```

但是，我从来没有对 num1 做任何事情，因此编译器会跳过它，无论 beginvar 和 endvar 有多大，这个循环都需要 0 毫秒。

我的问题是，如何强制编译器执行嵌套循环？

我尝试将 num1 声明为 volatile，但这比我想要的优化少。我希望编译器进行优化，但我也希望它执行这个循环。

我也不想在终端上打印任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:51:22.777

将循环后的值`num1`用于某事，以便编译器无法轻易消除它。

# c# - 任务 .Result 始终为空

> ID：13651255
> 
> 赞同：2
> 
> 时间：2012-11-30T18:49:40.580
> 
> 标签：c#, windows-phone-7, asynchronous, task-parallel-library

我正在编写一些代码来通过 Task.Factory.FromAsync （在 WP7 应用程序中）执行 HttpRequest。

任务的 Result 属性始终为 null，但我知道请求本身是正确的，因为如果我将其粘贴到浏览器或 Fiddler 中，它就可以工作。这是我的代码：

```
 string _url = string.Format("http://requestapi.net/{0}/{1}/{2}", 
            "objects","partitionKey","pkey1");
        var request = (HttpWebRequest)WebRequest.Create(_url);
        request.Method = "GET";

        Task<WebResponse> task1 = Task<WebResponse>.Factory.FromAsync(
            (callback, o) => ((HttpWebRequest)o).BeginGetResponse(callback, o)
            , result => ((HttpWebRequest)result.AsyncState).EndGetResponse(result)
            , request);

        task1.Start();
        WebResponse webResponse = task1.Result;
        string responseString;

        using (var response = (HttpWebResponse)webResponse)
        {
            using (Stream streamResponse = response.GetResponseStream())
            {
                StreamReader reader = new StreamReader(streamResponse);
                responseString = reader.ReadToEnd();
                reader.Close();
            }
        } 
```

更新：在 WP7 上，TPL 只能通过 Nuget 获得。我在这里下载了它：http: [//nuget.org/packages/System.Threading.Tasks](http://nuget.org/packages/System.Threading.Tasks)

更新：这有效。迈克是对的——任务还没有完成。我不确定为什么 task1.Result 没有自动等待（它应该隐式调用 task1.wait()），但这是工作代码。如果您发现其他问题，请告诉我！此代码从 task1.Start() 以前的位置开始 - 现在已删除。

```
 //task1.Start();
            string responseString;
            task1.ContinueWith((antecedent) =>
            {

                WebResponse webResponse = task1.Result;

                using (var response = (HttpWebResponse)webResponse)
                {
                    using (Stream streamResponse = response.GetResponseStream())
                    {
                        StreamReader reader = new StreamReader(streamResponse);
                        responseString = reader.ReadToEnd();
                        reader.Close();
                    }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:54:46.747

您基本上是在创建一个任务，但不是在检查结果之前等待它完成。从评论来看，WP7 运行时和框架的工作方式似乎与完整的 CLR 有点不同，当您尝试获取结果时会阻塞。Silverlight 运行时是非常抗阻塞的东西。

您将需要使用`await`关键字（在较新的运行时可用，或者如果您有 VS2012，则使用[Async Targeting Pack](http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack)`ContinueWith` ）或异步启动任务的方法。

# javascript - 在 Ajax.ActionLink 中使用 $(this)

> ID：13651259
> 
> 赞同：1
> 
> 时间：2012-11-30T18:49:55.147
> 
> 标签：javascript, jquery, ajax, this, actionlink

我需要传入一个函数，点击的元素 using `@Ajax.ActionLink`，这个函数将运行 at `OnSuccess`，通常在我们使用的 jQuery 中`$(this)`，但 with`@Ajax.ActionLink`不起作用。有没有其他方法可以做到这一点？

```
@Ajax.ActionLink(Model._friends, "HistoryFriends", "Notification", new AjaxOptions{UpdateTargetId="category-result", OnSuccess = "activeThis(this, '.ctg-active')",  OnFailure = "error"}) 
```

如您所见，我正在尝试传递`this`给函数`activeThis(this, '.ctg-active')`，但无法使其正常工作。

# java - 检查 JAXBElement 参数是否为空

> ID：13651261
> 
> 赞同：1
> 
> 时间：2012-11-30T18:50:01.073
> 
> 标签：java, web-services, jaxb, jersey, jax-rs

我有以下方法，它接收 XML 并在数据库中创建一本新书：

```
@PUT
@Path("/{isbn}")
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML)
public SuccessfulRequestMessage createBook(JAXBElement<Book> bookParam,
        @PathParam("isbn") String isbn) {

    if(bookParam == null)
    {
        ErrorMessage errorMessage = new ErrorMessage(
                "400 Bad request",
                "To create a new book you must provide the corresponding XML code!");
        throw new MyWebServiceException(Response.Status.BAD_REQUEST,
                errorMessage);
    }
        ....................................................................
} 
```

问题是，当我在消息正文中不发送任何内容时，不会引发异常。如何检查邮件正文是否为空？

谢谢！

索林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:31:01.723

试试这个：

```
public SuccessfulRequestMessage createBook(JAXBElement<Book> bookParam, 
                      @PathParam("isbn") String isbn) throws MyWebServiceException 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:48:01.223

可能它`JAXBElement`本身不是空的，但它的有效负载是。检查`bookParam.getValue()`以及只是`bookParam`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:43:09.663

我发现了一个可以做到的小技巧：我没有发送**MediaType.APPLICATION_XML**，而是发送**application/x-www-form-urlencoded**，仅由一个参数表示，该参数将包含 XML 代码。然后我可以检查参数是空还是空。然后，根据参数的内容，构造一个 JAXBElement。代码如下：

```
@PUT
@Path("/{isbn}")
@Consumes("application/x-www-form-urlencoded")
@Produces(MediaType.APPLICATION_XML)
public SuccessfulRequestMessage createBook(@FormParam("code") String code,
        @PathParam("isbn") String isbn) throws MyWebServiceException {

    if(code == null || code.length() == 0)
    {
        ErrorMessage errorMessage = new ErrorMessage("400 Bad request",
                "Please provide the values for the book you want to create!");
        throw new MyWebServiceException(Response.Status.BAD_REQUEST,
                errorMessage);
    }

    //create the JAXBElement corresponding to the XML code from inside the string
    JAXBContext jc = null;
    Unmarshaller unmarshaller;
    JAXBElement<Book> jaxbElementBook = null;
    try {
        jc = JAXBContext.newInstance(Book.class);
        unmarshaller = jc.createUnmarshaller();
        StreamSource source = new StreamSource(new StringReader(code));
        jaxbElementBook = unmarshaller.unmarshal(source, Book.class);
    } catch (JAXBException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    } 
```

# android - ArrayAdapter 中的 getActivity() 有时会返回 null

> ID：13651262
> 
> 赞同：3
> 
> 时间：2012-11-30T18:50:06.770
> 
> 标签：android, android-fragments, android-arrayadapter

我偶尔会`NullPointerException`在填充我的 ListFragment 的 ArrayAdapter 中得到一个。似乎`getActivity()`返回 null，但据我所知，它不应该那样做。

适配器代码`inflater = (LayoutInflater)...`是异常行：

```
@Override
public View getView( int position, View convertView, ViewGroup parent )
{
    view = convertView;

if ( view == null )
{
    /* Inflate a row */
    inflater = (LayoutInflater)getActivity().getSystemService( Context.LAYOUT_INFLATER_SERVICE ); // THIS IS THE EXCEPTION LINE
    view = inflater.inflate( R.layout.pairing_list_row, parent, false );
} 
```

我正在使用 Loader 来获取数据，并且在方法之前我不会初始化它`onActivityCreated`。在加载器完成加载之前不会创建适配器，因此它不应该在`onActivityCreated`.

```
@Override
public void onActivityCreated( Bundle savedInstanceState )
{
    super.onActivityCreated( savedInstanceState );
    getLoaderManager().initLoader( 0, null, this );
}

@Override
public void onLoadFinished( Loader<Cursor> loader, Cursor cursor )
{   
    PairingArrayAdapter pairings = (PairingArrayAdapter)getListAdapter();
    if ( pairings == null )
    {
        pairings = new PairingArrayAdapter( getActivity(), R.layout.pairing_list_row );
        setListAdapter( pairings );
    }
    ... 
```

关于导致 NullPointerException 的任何想法？它不会一直发生，它会发生一次，我再次做同样的事情，它不会发生。我想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:23:22.950

我已经确定唯一可能的解释是`FragmentStatePagerAdapter`我正在使用的 导致`onLoadFinished`在某些情况下分离 Fragment 时调用，因此需要在运行时检查附加的活动`getView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-25T21:25:02.270

在里面`ArrayAdapter.getView()`，使用`getContext()`代替`getActivity()`。

`getActivity()`有时可以`null`在活动轮换期间短暂返回，而在相同情况下`getContext()`不会返回。`null`此问题发生在 Android 4.2、4.1 及更低版本上。

# java - 通过 javascript w/o ajax 执行 java 代码

> ID：13651263
> 
> 赞同：0
> 
> 时间：2012-11-30T18:50:06.347
> 
> 标签：java, javascript

我正在尝试在基于 Web 的应用程序上实现 java 代码以减少冗余并增加 OOP 原则

我在服务器端 java 代码上有一个电话验证正则表达式。我需要在浏览器上执行与人们添加信息相同的验证，而不与服务器通信。我知道我可以将相同的代码放入 javascript，但是我有两个位置来维护相同的代码。我正在寻找一种简单的方法来发送带有 http 响应的正则表达式函数。

```
//java code
Class myVerf
{
    bool verPhone(input) {return //comepare verPhone to regEx}
}

//html
input type = "text" id = "1" onkeypress = "verPhoneFunc()"

//javascript
function verPhoneFunc()
{
    //get value from id 1
    //execute verPhone java code
} 
```

这样做有什么缺点吗？EX：如果运行浏览器的机器上没有 JVM，会发生什么？java代码如何在浏览器上执行？

我想再次强调...我不能使用 AJAX，因为我无法与服务器通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:57:49.850

如果没有一些额外的技术，就没有真正的方法来做你正在寻找的事情。

做你想做的最直接的方法是在 Java 和 Javascript 都可以访问的某个公共位置准备一个字符串。为了便于讨论，我会说这是在某个文本文件中，但如果您使用（例如）JSP，您可以在 Java 中准备字符串并通过您的 JSP 模板将其发布到 Javascript。该字符串将包含（未编译的）正则表达式。

在此解决方案中，您保留了主要设计目标（仅将正则表达式保留在一个地方。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:57:46.360

例如，如果您使用的是 Struts 2，您可以利用该框架的内置声明式验证机制。这支持在一个位置声明验证，并且框架将该验证传播到服务器端验证和客户端验证。

[http://struts.apache.org/2.3.4.1/docs/validation.html](http://struts.apache.org/2.3.4.1/docs/validation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:58:44.950

您无法在服务器端应用程序和客户端应用程序之间轻松可靠地共享 java 代码（就像您说的，如果没有安装 java 怎么办；还有其他原因导致这也不是一个好方法）。

话虽如此，您可以做的是共享验证业务规则。定义一种语言来指定验证规则，然后实现两个可以读取和执行这些规则的验证引擎：一个用于后端的 Java 和一个用于客户端的 Javascript。您的 web 应用程序可以拥有这些规则的集中管理存储库，并始终将它们提供给两个引擎。javascript 引擎可以接收嵌入到页面 HTML 中的这些规则，因此不需要 AJAX。

# documentation-generation - Spring WS - 生成像 .NET webservices 这样的文档

> ID：13651269
> 
> 赞同：1
> 
> 时间：2012-11-30T18:50:39.220
> 
> 标签：documentation-generation, spring-ws

有什么方法可以为我的 Spring Web 服务生成文档页面？这可以像 .NET 在他的默认 asmx 页面中所做的那样，或者如果存在另一种方式。

# javascript - 使用 javascript 在 MS Outlook 中搜索电子邮件

> ID：13651270
> 
> 赞同：1
> 
> 时间：2012-11-30T18:50:43.853
> 
> 标签：javascript, asp.net, outlook

如果我有电子邮件地址并假设公司员工安装了 Outlook，我怎么能编写一些 javascript 来打开同一发件人发送的所有电子邮件的列表。

本质上，他们会单击网页上的人名，然后它会启动 Outlook，以显示该发件人发送的所有电子邮件。（看起来和他们从 Outlook 中做的一样）

# windows-phone-7 - mgwt 与 GWT Mobile - 平台兼容性

> ID：13651273
> 
> 赞同：4
> 
> 时间：2012-11-30T18:50:55.633
> 
> 标签：windows-phone-7, gwt, cordova, mobile, mgwt

我正在尝试决定将哪个框架用于我的新项目：mgwt 或 GWT Mobile（和 PhoneGap）。我已经拥有我的应用程序的 iOS 和 Android 版本，所以我对支持诸如 Blackberry、Windows Phone、Symbian、WebOS 和 Bada 等平台更感兴趣。

所以我的问题是：mgwt 和 GWT Mobile 是否与这些平台兼容？为了支持尽可能多的平台，我应该使用哪一个？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T19:53:09.720

目前这两个框架都不支持 windows phone。GWT Mobile 似乎不支持黑莓，但 mgwt 支持。考虑到其他基于 webkit 的浏览器（bada symbian），您应该考虑编写应用程序的低功能版本。（mgwt 正在谈论支持这样的事情）。

也就是说，mgwt 正在大力开发，我们可能会在框架中看到许多事情发生：mgwt 由 Daniel Kurka 构建，他是 GWT 指导委员会的成员，与 Google 一起开发 GWT。

以下是 GWT 博客中关于使用 mgwt 的移动支持的文章：http: [//googlewebtoolkit.blogspot.de/2012/07/gwt-support-for-mobile-app-development.html](http://googlewebtoolkit.blogspot.de/2012/07/gwt-support-for-mobile-app-development.html)

# javascript - 如何在 JavaScript 中附加窗口大小调整事件侦听器？

> ID：13651274
> 
> 赞同：36
> 
> 时间：2012-11-30T18:50:56.353
> 
> 标签：javascript, plugins

我正在制作一个用于分发的 JS/PHP 插件。我希望它像这样易于安装：

```
<HTML>
<HEAD>
<TITLE>Testing my Plugin</TITLE>
<?php
  include 'path/to/myPlugin.php';
  echo getMyPluginHeadContent();
?>
</HEAD>
<BODY>
<?php
  echo getMyPluginContent("Arguments will go here");
?>
</BODY>
</HTML> 
```

但是，我希望这个插件在**不**覆盖的情况下附加一个窗口调整大小的侦听器`window.onresize`，以防有任何其他脚本也需要使用该方法。**有没有类似的javascript命令`document.addEventListener("resize", myResizeMethod, true);`？**我知道不是这样，因为那行不通，而且 MDN 和 W3C 对参数的含义非常模糊`addEventListener`。

**我不想要一个告诉我使用`window.onresize = myResizeMethod`or的答案`<BODY ONRESIZE="myResizeMethod">`，因为它们对插件不友好。**

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-30T19:03:08.397

由于您试图在调整窗口大小时调用此函数，因此您需要将该函数绑定到窗口而不是文档。要支持低于 9 的 IE 版本，您需要使用`attachEvent`. 请注意，这`attachEvent`需要您指定`on`关键字。这是一个例子：

```
if(window.attachEvent) {
    window.attachEvent('onresize', function() {
        alert('attachEvent - resize');
    });
}
else if(window.addEventListener) {
    window.addEventListener('resize', function() {
        console.log('addEventListener - resize');
    }, true);
}
else {
    //The browser does not support Javascript event binding
} 
```

同样，您可以以相同的方式删除事件。使用时`removeEventListener`，请确保传递与`useCapture`调用时相同的值`addEventListener`。这是第三个参数，即`true/false`值。

```
if(window.detachEvent) {
    window.detachEvent('onresize', theFunction);
}
else if(window.removeEventListener) {
    window.removeEventListener('resize', theFunction, true);
}
else {
    //The browser does not support Javascript event binding
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-30T18:53:32.967

您不会调整文档的大小，而是调整窗口的大小。这有效：

```
window.addEventListener("resize", function(){console.log('resize!')}, true); 
```

# install4j - 如何使用 install4j 的“在 Windows 注册表中设置值”操作在 Windows 注册表中设置字节值

> ID：13651276
> 
> 赞同：1
> 
> 时间：2012-11-30T18:51:08.337
> 
> 标签：install4j

对于字符串值，我已成功使用“在 Windows 注册表中设置值”操作。我似乎无法让它适用于注册表中的“REG_DWORD”类型。无法在 install4j UI 中指定类型。我尝试使用带有字节值的安装程序变量来设置正在设置的注册表项，但是当我检查注册表时它被转换为字符串。

我看到 install4j 中可用的“读取”功能适用于所有 Windows 注册表类型。install4j 是否支持写入非字符串类型的注册表值？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:35:48.640

“在 Windows 注册表中设置值”操作只能设置字符串值。

不过，您可以使用`com.install4j.api.windows.WinRegistry`API。如果你`java.lang.Integer`在调用时传递了一个类的值

```
WinRegistry.setValue(...) 
```

创建一个类型的注册表项`REG_DWORD`。

# iphone - 我完成了我的应用程序，但是当我尝试运行模拟器时，此错误代码不断出现

> ID：13651277
> 
> 赞同：1
> 
> 时间：2012-11-30T18:51:09.483
> 
> 标签：iphone, simulator

编译失败。无法写入路径 User/Alex/Library/Develop...phonesimulator/ElephantJokes.app/en.Iprog/Mainstoryboard.storyboard.dc

关于什么是错的任何想法？我的猜测是故事板 c 丢失了，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:46:02.920

如果您提到的文件夹是 /Users//Library/Developer/Xcode/DerivedData/

如果是这样...您可以删除该文件夹并尝试再次编译...这不会删除您的项目..这只是xcode保留的缓存..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:40:52.823

这只是一个假设，但问题可能与您设置的插座/连接有关，并且由于某种原因编译器不喜欢！问题是找出这是哪个出口。检查故事板文件中的连接检查器是否有一些“旧”连接。

# windows-8 - Segoe UI Symbol中用于图标的字形名称是什么

> ID：13651278
> 
> 赞同：4
> 
> 时间：2012-11-30T18:51:11.113
> 
> 标签：windows-8, fonts

Windows 8 带有新字体 Segoe UI Symbol。该字体有许多 U+E000 - U+EF013 范围内的图标，可在为 Windows 商店构建应用程序时用作按钮。

这些符号的名称列表在哪里？

有很多关于这个主题的帖子，但似乎没有一个有名称列表。

Jeremy Likeness [Windows 8 图标：Segoe UI 符号](http://csharperimage.jeremylikness.com/2012/03/windows-8-icons-segoe-ui-symbol.html)

Jeremy Foster [Windows 8 应用栏图标（来自 Segoe UI）](http://www.codefoster.com/post/2012/08/18/win8icons.aspx)

Jerry Nixon [Windows 8：您已经安装了 1,000 个 Metro 图​​标](http://blog.jerrynixon.com/2012/03/windows-8-1000-metro-icons-you-already.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T19:08:32.883

这个官方页面有一个名字列表 [Segoe UI Symbol icon list (Windows)](http://msdn.microsoft.com/en-us/library/windows/apps/jj841126.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T04:51:58.667

我厌倦了通过字符代码一次一个地弄乱这些图标，因此我根据[这篇开发中心文章](http://msdn.microsoft.com/en-us/library/windows/apps/jj841126.aspx)中列出的名称创建了一个[可重用的主样式表](https://github.com/geekytime/segoe-symbol-css)。

随意在您的 Windows 8 应用程序中使用它。

[（完全披露：我窃取了这个想法，以及来自Font Awesome](http://fortawesome.github.com/Font-Awesome/)的大部分 CSS 代码。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:06:02.790

搜索“字符映射”应用程序（在 Windows 8 上，它是 Windows 键 + Q）（它包含在 Windows 中）。它应该在桌面上打开。对于字体下拉菜单，选择“Segoe UI Symbol”。然后您可以单击每个符号，在底部会显示它们的名称和“U+E000”编号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-27T16:30:29.520

我认为您可能会发现这种在 Segoe UI 符号字体（或任何字体）中查找字形的有用且更可取的方法：我为 Windows 8 商店构建了一个[字符映射应用程序](http://apps.microsoft.com/webpdp/app/32502afd-89cf-4afa-ab64-04fe49dc0bd1)，它比字符映射程序要好得多随 Windows 一起提供。它主要是为寻找图标的开发人员制作的，有许多其他漂亮的花里胡哨，并且是完全开源的。希望你喜欢！

# apache - 如何配置 mod_proxy_ftp

> ID：13651282
> 
> 赞同：2
> 
> 时间：2012-11-30T18:51:29.383
> 
> 标签：apache, apache2, mod-proxy

我正在努力寻找如何配置模块 mod_proxy_ftp 的任何示例

```
# Reverse Proxy
#
ProxyRequests On
#ProxyPreserveHost On
<Proxy *>
    Order deny,allow
    Allow from 192.168.10.0
</Proxy>
ProxyPass /ftp_folder ftp://someserver:9021
</IfModule>
</IfModule> 
```

我使用 apache 作为选择的原因是因为我们没有权限将任何其他软件安装到我们的服务器中，他们给出了使用这个模块的想法。

任何人都可以告诉我这个吗？

谢谢阅读。

# java - 拖放 JLabel

> ID：13651283
> 
> 赞同：2
> 
> 时间：2012-11-30T18:51:31.470
> 
> 标签：java, swing, drag-and-drop, awt

我在 JPanel 中有一堆 JLable，我在 JPanel 上使用 FlowLayout。每个标签都是 JPanel 宽度的 100%，所以当我向 JPanel 添加标签时，它们是垂直放置的。我希望能够做的是单击并在列表中向上或向下拖动 JLabel。使用此代码，我希望将“Here”打印到输出控制台，但事实并非如此。拖放需要做什么？

```
public class LayerItem extends JLabel{
    public LayerItem(){
        this.addMouseListener(new MouseAdapter(){
            @Override
            public void mouseDragged(MouseEvent evt){
                lblMouseDragged(evt);
            }
        });
    }

    public void lblMouseDragged(MouseEvent evt){
        System.out.println("Here");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:00:07.593

改变：

```
this.addMouseListener(new MouseAdapter(){ 
```

到：

```
this.addMouseMotionListener(new MouseAdapter(){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:03:59.993

像[这样](https://stackoverflow.com/questions/8562743/swing-drag-and-drop)的类似问题..顺便说一句，我认为你可以使用`TransferHandler`，像[这样](http://www.roseindia.net/java/example/java/swing/SwingDragDrop.shtml)

# javascript - 替代正则表达式来隐藏匹配的 id 元素？

> ID：13651286
> 
> 赞同：1
> 
> 时间：2012-11-30T18:51:49.610
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-slider

考虑这个 HTML：

```
<div id=plan>
  <div id="plan-1" class='plan-hide'>One</div>
  <div id="plan-2" class='plan-hide'>Two</div>
  <div id="plan-3">Three</div>
  <div id="plan-4" class='plan-hide'>Four</div>
</div> 
```

我想隐藏所有计划（计划 1、计划 2、计划 3、计划 4）`#plan`

我用过正则表达式`[id^=plan-]`，但我相信它很慢。

```
$("#slider").slider({
    range: "min",
    min: 0,
    max: 4
}, {
    slide: function( event, ui ) {
        $("[id^=plan-]").addClass('plan-hide');
        $("#plan-" + (ui.value+1)).removeClass('plan-hide');
    },
}); 
```

什么是替代方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:00:15.880

如果您尝试将该类添加到容器中的所有元素中，除了与 ui 值 + 1 匹配的元素之外，定位所有兄弟元素可能更快：

```
 slide: function( event, ui ) {
        $("#plan-" + (ui.value+1)).removeClass('plan-hide')
                                  .siblings().addClass('plan-hide');
    }, 
```

甚至只是：

```
 slide: function( event, ui ) {
        $('#plan').children('div').addClass('plan-hide');
        $("#plan-" + (ui.value+1)).removeClass('plan-hide');
    }, 
```

并且可能是最快的：

```
var elems = document.getElementById('plan').getElementsByTagName('div'),    
    len = elems.length;

$("#slider").slider({
    range: "min",
    min: 0,
    max: 4
}, {
    slide: function( event, ui ) {
        for (var i=0; i<len; i++) {
            elems[i].className = elems[i].id.indexOf(ui.value+1) != -1 ? '' : 'plan-hide';
        }
    },
});
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:56:18.783

您可以使用 parent id plan 来缩短匹配元素的范围。

```
$('#plan [id^=plan-]').addClass('plan-hide'); 
```

# iis - 如何找出生成 404 的缺失资源或链接来自 IIS 中的哪个页面

> ID：13651288
> 
> 赞同：0
> 
> 时间：2012-11-30T18:51:56.107
> 
> 标签：iis, asp-classic, http-status-code-404

我有一个使用 asp classic 的简单 404 错误页面，当用户遇到 404 错误时会向我发送电子邮件。我使用 Request.ServerVariables("Query_String") 发送网址。我想改进这一点，以便我知道哪个页面包含指向丢失文件或资源的链接。使用 Request.ServerVariables("Query_String") 我只知道没有找到请求的 url，但是如果有一个链接错误的页面，我也想知道那个年龄的 url，以便我可以修复它。这对于缺少图像或其他资源的页面也有帮助。谢谢你的帮助。

我应该说这是一个 Intranet。我可以查看日志，但收到电子邮件肯定更容易。我最近做了一次大清理，这个网站已经有 10 年历史了，而且有很多包袱。有时我会收到一封电子邮件，指出未找到 htc、css 或图像，但我没有看到包含指向丢失资源的链接的页面，只是找不到该文件。此外，如果有指向已删除页面的链接，我想知道哪个页面有该链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:35:53.057

有几种可能性。一个可能是在谷歌上索引的外部链接，我会检查谷歌在爬取时发现的 404 页面。您可以使用谷歌网站管理员工具来做到这一点。

另一种选择是在 Request 中使用 referrer 属性，该属性应该为您提供发送请求的页面

最后一个选项可能是查看 IIS 日志，两者都应该有引用者。如果没有第三方工具来解析日志，此选项将更难获得您要查找的信息。

[请求中的推荐人](https://stackoverflow.com/questions/2648984/httpservletrequest-how-to-obtain-the-referring-url)

# ios - iOS 应用内购买商店对模拟器可见但在实际设备中不可见

> ID：13651291
> 
> 赞同：-2
> 
> 时间：2012-11-30T18:52:01.790
> 
> 标签：ios, in-app-purchase, simulator

我正在尝试配置应用商店，商店项目在模拟器中可见，但在使用实际设备时不可见。

我错过了什么？

谢谢。

编辑：我从真实账户退出，现在商店要求我输入现有的苹果 ID。但是，当我输入测试苹果 ID 时，它会让我通过验证、信用卡等。怎么办？

编辑 2：它适用于 iOS 6.0 模拟器。问题出在模拟器和设备中的 iOS 5.1 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:29:28.320

您可以使用您的测试账户来替换您设备上的真实账户。是的，系统会提示您输入信用卡等。我所做的只是在那一步退出，现在您的测试帐户将在设备上，但不在 iTunes 系统中，我认为这很好，因为测试帐户只是使用沙盒环境。此外，您需要在需要配置文件的测试设备中测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:13:09.393

找到了。AppSync 导致了该问题。删除它，沙盒环境将按预期工作。

此致。

# extjs4 - 如何在不复制 sdk 的情况下拥有多个 extjs 应用程序

> ID：13651294
> 
> 赞同：0
> 
> 时间：2012-11-30T18:52:19.900
> 
> 标签：extjs4

遵循应用程序目录结构的 Sencha 应用程序布局指南，我发现自己在每个应用程序文件夹中都需要一个 sdk 副本（例如 extjs）。所以我有两个问题：

1.  我可以为 extjs 文件夹设置别名，以便多个应用程序只共享一个 extjs 副本吗？
2.  如果没有，我可以从 sdk 的每个副本中剥离多少？

我搜索了 Sencha 文档和网络，但没有明确的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:05:49.863

您可以在需要重定向到共享 sdk（对于 Apache）的文件夹中创建 .htaccess 规则。您还可以为其他网络服务器配置类似的规则。

喜欢：

```
RewriteRule /app/sdk/(.+)$ /shared/sdk/$1 [R] 
```

# linux - 外壳语法错误

> ID：13651296
> 
> 赞同：0
> 
> 时间：2012-11-30T18:52:24.647
> 
> 标签：linux, bash, shell

任何人都可以帮助我会出现什么问题？登录名和密码来自 .netrc。, < 在 example.script 之前不起作用

```
 #!/bin/bash
  HOST='192.163.3.3'
  FILE="a.txt"

  while :; do
      ftp -p -v -i $HOST << example.script >> a.log
      grep -qF "Connected" a.log &&
      grep -qF "File successfully transferred" a.log && break
  done

  exit 0 
```

example.script 包含

```
 put $FILE
 quit 
```

错误是：

```
 ./example.sh: line 15: syntax error: unexpected end of file 
```

* * *

我`sh -vx`在脚本上使用时得到了这个：

```
 while :; do
  ftp -p -v -i $HOST < example.script >> a.log
  grep -qF "Connected" a.log &&
  grep -qF "File successfully transferred" a.log && break
  done
  + :
  + ftp -p -v -i 192.163.3.3
  + grep -qF Connected a.log
  grep: a.log: No such file or directory
  + :
  + ftp -p -v -i 192.163.3.3
  + grep -qF Connected a.log
  grep: a.log: No such file or directory
  + : 
```

*请注意，此代码修复了问题（使用`<`而不是`<<`输入重定向）。脚本文件以`exaple.script`代替`example.script`.*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:53:57.657

更改与此处`<<`无关的此处文档！相反，您的意思是：

```
ftp -p -v -i $HOST < example.script >> a.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:06:35.040

您需要**关闭**您的*here-doc*：

```
#!/bin/bash
HOST='192.163.3.3'
FILE="a.txt"

while :; do
    ftp -p -v -i $HOST <<EOF example.script >> a.log
    grep -qF "Connected" a.log &&
         grep -qF "File successfully transferred" a.log && break
done
EOF 
```

`<<`打开一个*here-doc*

# sql - 在 SqlCommand 中转换数据库列格式

> ID：13651298
> 
> 赞同：3
> 
> 时间：2012-11-30T18:52:25.817
> 
> 标签：sql, sql-server, vb.net, sql-server-2005

在`SELECT`我的 SQL Server 2005 数据库的命令中，我需要将`OrderDelDateTime`列（`datetime`格式为）转换为日期格式，以便我可以选择具有今天日期的所有行，而不管时间如何。

这是我所拥有的：

```
cmd = New Data.SqlClient.SqlCommand("SELECT * FROM [Orders] where [OrderDelDateTime] = '" + Now.Date + "'", conn) 
```

显然，这会返回零结果，因为`11/30/2012 5:30:00 PM`(in db) 不等于`Now.Date`( `11/30/2012`)。

我正在使用 VB.Net。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:39:28.413

像这样进行查询：

```
select *
from Orders
where OrderDelDateTime between @Date1 and @Date2 
```

然后从 C# 中，传递以下两个参数：

```
cmd.Parameters.AddWithValue("@Date1", Now.Date);
cmd.Parameters.AddWithValue("@Date2", Now.Date.AddDays(1).AddMilliseconds(-1)); 
```

SQL小提琴：[http ://sqlfiddle.com/#!3/92105/1](http://sqlfiddle.com/#!3/92105/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:44:44.207

```
cmd = New Data.SqlClient.SqlCommand(String.Format("SELECT * FROM [Orders] where [OrderDelDateTime] >= {0} and  [OrderDelDateTime] < {1}", Now.Date, Now.Date.AddDays(1)), conn) 
```

# javascript - 如何在javascript中重复或重置一个函数？

> ID：13651301
> 
> 赞同：0
> 
> 时间：2012-11-30T18:52:45.263
> 
> 标签：javascript

我有 5 个缩略图排列在一起，2 个箭头可以上下滑动它们。现在，您可以向上单击两次和向下单击两次——就是这样，没有任何动作。我的目标是能够返回并多次单击上下。

[http://jsfiddle.net/acfS6/](http://jsfiddle.net/acfS6/)

```
$('#tmbDown').css ('opacity', '.6');

var timesClickedUp = 0;     

$('#tmbUp').bind('click', function (event) {

  $("#tmbHolder").animate({"marginTop": "-=100px"}, "slow");
  timesClickedUp++;

  if (timesClickedUp >= 2) {
    $(this).unbind(event);
    $('#tmbDown').css ('opacity', '1');
    $('#tmbUp').css ('opacity', '.6');    

  }

});

var timesClickedDown = 0;

$('#tmbDown').bind('click', function (event) {

  $("#tmbHolder").animate({"marginTop": "+=100px"}, "slow")
  timesClickedDown++;

  if (timesClickedDown >= 2) {
    $(this).unbind(event);    
    $('#tmbDown').css ('opacity', '.6');
    $('#tmbUp').css ('opacity', '1');
  }

});
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:49:07.510

请检查这个。一个小的变化：http: [//jsfiddle.net/wghk8/](http://jsfiddle.net/wghk8/)

```
var timesClickedUp = 0;

$('#tmbUp').bind('click', function(event) {

if (timesClickedUp < 2) {
    $("#tmbHolder").animate({
        "marginTop": "-=100px"
    }, "slow");
    timesClickedUp++;
}
else {

    $("#tmbHolder").animate({
        "marginTop": "+=" + (timesClickedUp * 100) + "px"
    }, "slow");
    timesClickedUp = 0;
}
});
var timesClickedDown = 0;

$('#tmbDown').bind('click', function(event) {
if (timesClickedDown < 2) {
    $("#tmbHolder").animate({
        "marginTop": "+=100px"
    }, "slow")
    timesClickedDown++;
}
else {
    $("#tmbHolder").animate({
        "marginTop": "-=" + (timesClickedDown * 100) + "px"
    }, "slow");
    timesClickedDown = 0;
}
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:32:59.877

我认为您可能错过的最重要的事情是，当您单击向下箭头时，您需要减少您的 timesClickedUp ，反之亦然。

然后，您需要根据相应的“timesClicked”值的值淡化/显示两个箭头。

我是这样做的：

[http://jsfiddle.net/acfS6/2/](http://jsfiddle.net/acfS6/2/)

```
var timesClickedUp = 0,
    timesClickedDown = 2;

function updateOpacities() {
    var $tmbUp = $('#tmbUp'),
        $tmbDown = $('#tmbDown');

    timesClickedUp >= 2 ? $tmbUp.css('opacity', '.6') : $tmbUp.css('opacity', '1');
    timesClickedDown >= 2 ? $tmbDown.css('opacity', '.6') : $tmbDown.css('opacity', '1');
}

// Call updateOpacities to initialize the arrows.
updateOpacities();

$('#tmbUp').bind('click', function(event) {

    if (timesClickedUp < 2) {
        $("#tmbHolder").animate({
            "marginTop": "-=100px"
        }, "slow");
        timesClickedUp++;
        timesClickedDown--;
    }

    updateOpacities();
});

$('#tmbDown').bind('click', function(event) {

    if (timesClickedDown < 2) {
        $("#tmbHolder").animate({
            "marginTop": "+=100px"
        }, "slow")
        timesClickedDown++;
        timesClickedUp--;
    }
    updateOpacities();
});​ 
```

# c++ - 我们可以可靠地预先增加/减少右值吗？

> ID：13651313
> 
> 赞同：6
> 
> 时间：2012-11-30T18:53:36.783
> 
> 标签：c++, rvalue, pre-increment

例如，`std::vector<int>::iterator it = --(myVec.end());`。这在 GCC 4.4 中有效，但我听说它不是可移植的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T18:59:56.670

仅当它是具有成员函数`std::vector<int>::iterator`的对象类型时才有效。`operator++`如果它是标量类型（例如`int *`），或者`operator++`是非成员函数，它将失败。

> ### 5.3.2 递增和递减[expr.pre.incr]
> 
> `++`1 -通过添加`1`[...]来修改前缀的操作数。*操作数应为可修改的左值。*[...]
> 2 - [...] prefix `--`[...] 对操作数的要求与 prefix 相同`++`。[...]

可以在临时对象上调用非常量非静态成员函数（因为它们具有非`const`对象类型，根据 9.3.2p3），但非成员函数中的左值引用参数不能绑定到临时对象（13.3.3.1.1）。 4p3)。

```
struct S { S &operator++(); };
struct T { }; T &operator++(T &);
typedef int U;

++S();  // OK
++T();  // fails
++U();  // fails 
```

这意味着它与编译器无关，而是与标准库有关；正如您所观察到的，libstdc++ 是使用`std::vector<int>::iterator`带有 member 的对象类型实现的`operator++`，但是您的代码可以很容易地使用相同的编译器和不同的标准库 where `std::vector<int>::iterator`is进行编译`int *`，在这种情况下它会失败。

`std::vector`，`std::array`并且`std::string`是唯一可以用标量（指针）迭代器实现的容器模板，但这并不意味着调用`++`其他容器的迭代器是安全的；`operator++`他们可以有上述的非成员`T`。

要对 before-the-end 元素创建迭代器，请使用`std::prev`：

```
std::vector<int>::iterator it = std::prev(myVec.end()); 
```

`std::prev`并且`std::next`在 C++11 中是新的，但在 C++03 中很容易实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T19:03:31.883

不，这通常不起作用。

在 C++11 中，我们有：`auto it = std::prev(myVec.end());`，它工作可靠。

如果你在 C++03 中，Boost 也有类似的功能，尽管写起来很简单：

```
template <typename BidirectionalIterator>
BidirectionalIterator
    prev(BidirectionalIterator x,
         typename std::iterator_traits<BidirectionalIterator>::difference_type n = 1)
{
    std::advance(x, -n);
    return x;
} 
```

请记住，您至少需要该范围内的一个元素才能使其有意义。

* * *

这是您的方法通常无法正常工作的示例，请考虑以下精简`std::vector<>`：

```
#include <iterator>

namespace std_exposition
{
    template <typename T>
    struct vector
    {
        // this is compliant:
        typedef T* iterator;

        iterator end()
        {
            return std::end(data);
        }

        T data[4];
    };

    // manually implemented std::prev:
    template <typename BidirectionalIterator>
    BidirectionalIterator
        prev(BidirectionalIterator x,
             typename std::iterator_traits<BidirectionalIterator>::difference_type n = 1)
    {
        std::advance(x, -n);
        return x;
    }
} 
```

测试程序：

```
int main()
{
    std_exposition::vector<int> myVec;

    // Won't compile (method in question):
    auto it0 = --(myVec.end());

    // Compiles
    auto it1 = std::prev(myVec.end());
    auto it2 = std_exposition::prev(myVec.end());
} 
```

* * *

也有相应`std::next`的，在这里实现：

```
template <typename BidirectionalIterator>
BidirectionalIterator
    next(BidirectionalIterator x,
         typename std::iterator_traits<BidirectionalIterator>::difference_type n = 1)
{
    std::advance(x, n);
    return x;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T19:12:13.957

这确实是不可移植的，因为没有办法知道是否`myVec.end()`返回一个类类型的对象，其运算符`--`由成员函数或其他东西重载（甚至可能是一个常规的原始 ponter）。在前一种情况下，重载的`--`将编译（成员函数重载的运算符可以应用于右值），而在后一种情况下则不会。

# mysql - 使用 mysqlimport 时添加列

> ID：13651322
> 
> 赞同：1
> 
> 时间：2012-11-30T18:54:12.633
> 
> 标签：mysql, mysqlimport

我使用bash 脚本`mysqlimport`将 5 个不同`csv`的文件导入到一个通用数据库表中。

```
File[0]=one
File[1]=two
File[2]=three
File[3]=four
File[4]=five

for i in 0 1 2 3 4 5 6 7 8 9 10  
do 
   mysqlimport --fields-optionally-enclosed-by=\" --fields-terminated-by=, --lines-terminated-by="<br />\n" -uusername -ppassword --local tablename /path/${File[i]}.txt
done 
```

现在我想在公用表中添加一个额外的列，每个文件都有一个唯一的 id。例如。对于 one.csv 的所有条目，id 的值为 1。

有没有一种方法可以在通过 bash 脚本导入的同时执行此操作？我不想每次都去 mysql 控制台并从那里开始。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:33:49.037

首先，[mysqlimport](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)只是[`LOAD DATA INFILE`SQL 语句](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)的包装器，虽然 mysqlimport 很方便，但它有一些限制会使您尝试做的事情变得困难，即：

1.  您不能指定表名，它从文件名推断表名
2.  您希望使用的选项，您可以`set`在导入时将字段设置为给定值，不作为 mysqlimport 的选项存在（尽管它确实存在于裸 SQL 中！）

因此，您可能希望跳过 mysqlimport 并直接执行 sql 语句。

这样的事情应该做：

```
File[0]=one
File[1]=two
File[2]=three
File[3]=four
File[4]=five

for i in 0 1 2 3 4 5 6 7 8 9 10  
do
  qry="LOAD DATA LOCAL INFILE '/path/${File[i]}.txt' INTO TABLE tablename FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\\"' LINES TERMINATED BY \"<br />\n\"  (list,comma,separated,column,names,here) SET source_id='$i'"

  mysql -uusername -ppassword << eof
  $qry
  eof
done 
```

该`SET source_id='$i'`字段是在导入时设置该字段的关键。

注意：此代码未经测试，但它应该让您朝着正确的方向前进，只需阅读 mysql 手册`LOAD DATA INFILE`，然后在 Google 上搜索“mysql bash”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:46:55.240

像这样的方法怎么样：

```
#!/bin/bash

echo>/tmp/tmpfile.csv

for i in 0 1 2 3 4 5 6 7 8 9 10
do
  for j in `cat ${FILE[i]}.TXT`; do echo $i,$j>>/tmp/tmpfile.csv; done
done

mysqlimport ..... --table localfile /tmp/tmpfile.csv
rm -f /tmp/tmpfile.csv 
```

当然，这是不完整/未经测试的代码，但您会想到首先创建一个包含添加列的完整文件，然后导入该文件。

您也可以绕过 mysqlimport 并类似地构造 sql：

```
#!/bin/bash

echo>/tmp/tmpfile.csv

for i in 0 1 2 3 4 5 6 7 8 9 10
do
  for j in `cat ${FILE[i]}.TXT`; do echo "insert into tablename (a,b,c,d,e) values ($i,$j);">>/tmp/tmpfile.csv; done
done

mysql -D dbname -u user --password=pass < /tmp/tmpfile.csv
rm -f /tmp/tmpfile.csv 
```

# mysql - MySQL - 比较两个字段并以百分比返回匹配

> ID：13651323
> 
> 赞同：1
> 
> 时间：2012-11-30T18:54:16.067
> 
> 标签：mysql, compare

目前我们有一个网站，它将用户添加的文本存储为 mediumtext 类型。

目前我们的系统正在检查文本是否匹配并在 1:1 时返回 true（是的，它匹配）（100% 相同 - 一个空格，它将被视为新文本）。

我们正在努力使系统更智能。必须有可能以百分比告诉我们有多少内容是相同的（以百分比表示）。不幸的是，我们没有很好的进展。几乎我们能想到的所有算法都不能正常工作，或者非常缓慢和繁重。

我们希望有人能够给我们一个推动力。

*注意：我们试图进行字节比较，但事情没有正常工作。*

编辑：我们不仅限于 MySQL。我们正在寻找 apache solr 服务器。如果它有优势，请在这个方向上提供帮助，或者如果有更好的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:58:17.653

您需要计算 Levenshtein 距离。

[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

SO上的示例： [MySQL Levenshtein](https://stackoverflow.com/questions/12617348/mysql-levenshtein)

```
DELIMITER $$

CREATE FUNCTION LEVENSHTEIN( s1 CHAR(255), s2 CHAR(255)) 
RETURNS int(3) 
DETERMINISTIC
BEGIN
    DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
    DECLARE s1_char CHAR(255);
    DECLARE cv0, cv1 CHAR(255);

    SET s1_len = LENGTH(s1);
    SET s2_len = LENGTH(s2);
    SET cv1 = 0x00;
    SET j = 1;
    SET i = 1;
    SET c = 0;

    IF s1 = s2 THEN
        RETURN 0;
    ELSE IF s1_len = 0 THEN
        RETURN s2_len;
    ELSE IF s2_len = 0 THEN
        RETURN s1_len;
    ELSE
        WHILE j <= s2_len DO 
          SET c = c + 1; 
          IF s1_char = SUBSTRING(s2, j, 1) THEN  
            SET cost = 0; ELSE SET cost = 1; 
          END IF; 
          SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost; 
                SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
                IF c > c_temp THEN
                    SET c = c_temp;
                END IF;
                SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
            END WHILE;
            SET cv1 = cv0, i = i + 1;
        END WHILE;
    END IF;
    RETURN c;
END$$

DELIMITER ; 
```

# c# - 如何在用户命令中显示多个图像？

> ID：13651325
> 
> 赞同：0
> 
> 时间：2012-11-30T18:54:19.037
> 
> 标签：c#, image, event-handling, paintevent

在用户按下 Gui 上的菜单后，我需要能够显示一组图像。我一直在尝试使用以下代码。

```
 private void imagePalleteToolStripMenuItem_Click(object sender, EventArgs e)
    {
        List<string> Files = this.MyImageCollection.ConvertFileNamesToList();
        foreach (string currtFile in Files)
        {
            Image newImage = Image.FromFile(currtFile);

            // Create rectangle for displaying image.
            Rectangle destRect = new Rectangle(100, 100, 450, 150);

            // Draw image to screen.
            e.Graphics.DrawImage(newImage, destRect);
        } 
```

我认为这会起作用，但我得到了错误：

“System.EventArgs”不包含“Graphics”的定义，并且找不到接受“System.EventArgs”类型的第一个参数的扩展方法“Graphics”（您是否缺少 using 指令或程序集引用？）

我尝试用 PaintEventHandler 替换 EventHandler，但随后出现错误：

```
this.imagePalleteToolStripMenuItem.Click += new System.EventHandler(this.imagePalleteToolStripMenuItem_Click); 
```

陈述：

“imagePalleteToolStripMenuItem_Click”没有重载匹配委托“System.EventHandler”

我还尝试将该行更改为：

```
this.imagePalleteToolStripMenuItem.Click += new System.Windows.Forms.PaintEventHandler(this.imagePalleteToolStripMenuItem_Click); 
```

但这也给出了一个错误说明：

无法将类型“System.Windows.Forms.PaintEventHandler”隐式转换为“System.EventHandler”r

**注意：* *我的总体目标是调用一个对话框，以缩略图形式显示所有图像。因此，如果这不是正确的方法，请重定向我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:11:45.843

您将绘制事件与单击事件混淆了。如果您希望在用户单击按钮时发生某些事情，请将其放入 click 事件中。点击按钮你会画什么？

相反，设计一个新表单来显示您的图像，在按钮单击事件中，收集您的图像，并将这些图像提供给您的对话框。让对话框担心显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:12:01.693

看起来您抓取了一些最初在`OnPaint`事件中的示例代码。您已将此添加到完全不同类型的事件中，它不会向您传递`Graphics`对象。您要么需要将此代码放在`OnPaint`您想要的任何控件中，要么尝试完全不同的方法。

正确的解决方案取决于您希望它如何工作（您是否尝试更新屏幕上已有的内容、显示新对话框等）。

# java - 在 Java 中应用这个正则表达式

> ID：13651328
> 
> 赞同：1
> 
> 时间：2012-11-30T18:54:29.867
> 
> 标签：java, regex, regex-negation

我写了这个美妙的正则表达式，我能够实现它：

```
s/(?:[aeiou\u00E4\u00E4\u00F6\u00D6\u00FC\u00DC])h//ig 
```

在 perl 中，但是我似乎很难将它应用到我的 Java 代码中。我尝试了以下方法：

`bar.replaceAll("?:[aeiou\u00E4\u00E4\u00F6\u00D6\u00FC\u00DC])h", "");`

但我似乎缺乏一些特别的东西。

因此，我的问题非常明显：如何将此正则表达式应用于 Java 中的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:58:55.967

不要忘记在 Java 字符串中将反斜杠加倍：

```
bar.replaceAll("(?i)[aeiou\\u00E4\\u00E4\\u00F6\\u00D6\\u00FC\\u00DC]h", ""); 
```

`(?i)`开头的替换不`/i`区分大小写的修饰符。

如果您想保留元音并只删除`h`，请使用[后向断言](http://www.regular-expressions.info/lookaround.html)：

```
bar.replaceAll("(?i)(?<=[aeiou\\u00E4\\u00E4\\u00F6\\u00D6\\u00FC\\u00DC])h", ""); 
```

# php - 拉脱维亚公民个人代码的正则表达式

> ID：13651332
> 
> 赞同：0
> 
> 时间：2012-11-30T18:54:42.003
> 
> 标签：php, javascript, regex

我在为拉脱维亚公民的个人代码编写正则表达式（ php / js ）时遇到问题。拉脱维亚的每个公民都有自己的个人密码。格式为 11 位数字，第六位数字后有破折号。所以前6位数字是出生日期。

ddmmyy （例如： 130589 ）然后进入破折号（ - ）然后进入第七位，可以是 0、1 或 2 表示世纪（0 代表 19.世纪和 2 代表 21.世纪），然后数字从 0000 到9999

例子：

```
080189-12602

08   - day
01   - month
89   - year
-    - dash
1    - 20th century
2602 - random 4 digit combination. 
```

所以问题是有人可以帮我写正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:01:42.093

我建议您[不要使用正则表达式验证日期。](http://www.regular-expressions.info/dates.html)而是只检查正确的格式：

```
/^(\d{6})-[012]\d{4}$/ 
```

这匹配 6 个任意数字，一个破折号，然后是一个来自`0`to的数字`2`，然后是 4 个任意数字。之后，您将在捕获组号中找到日期部分`1`，您可以检查该日期是否有效。或者，您可以分别提取天、月、年：

```
/^(\d{2})(\d{2})(\d{2})-[012]\d{4}$/ 
```

现在日子在抓`1`，月在抓`2`，年在抓`3`。日期范围的验证理论上可以使用正则表达式完成，但实际上不推荐（正则表达式变得非常臃肿且无法维护）。这就是为什么您应该只检查是否有数字，然后您可以使用您的编程语言（PHP 或 JS）来检查给定的数字是否构成有效日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:05:41.563

```
^(0[1-9]|[12][0-9]|3[01])(0[1-9]|1[012])(\d{2})-(0|1|2)(\d{4})$ 
```

*   `^`- 字符串的开头
*   `(0[1-9]|[12][0-9]|3[01])`01-09、10-29、30 或 31（天）
*   `(0[1-9]|1[012])`01-09、10、11 或 12（月）
*   `(\d{2})`任意两位数（年份）
*   `-`破折号
*   `(0|1|2)`0、1 或 2（世纪数字）
*   `(\d{4})`任意四位数

[http://regexr.com?330dj](http://regexr.com?330dj)

请注意，这不会处理某些无效日期的情况，例如 2 月 31 日等。这基本上不可能仅使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:00:55.377

```
^[0-3][0-9][01][0-9][0-9][0-9]-[012][0-9][0-9][0-9][0-9]$ 
```

一个月中的某天（最多 39 天）；一年中的月份（最多 19 个）；00 至 99 年；世纪和 4 位数字。

这是一个非常通用的正则表达式。还有很多其他的写法。其中一些可能更清晰，一些可能更快。您可以使用以下符号使范围更精确：

```
([012][0-9]|3[01]) 
```

它只接受一个月中的 31 的值。但是，您仍然需要拒绝 2 月 31 日，这不是您想尝试在正则表达式中编码的事情（毫无疑问，可以这样做；您只是不想尝试）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:09:46.977

它不是正则表达式，也不是最漂亮的代码，但您可以使用以下代码从 ID 中获取所有位：

```
<?php
$input = '080189-12602';
$id_arr = explode('-', $input);
list($day, $month, $year) = str_split($id_arr[0], 2);

$arr = str_split($id_arr[1]);
$century = 18 + $arr[0];
$id = implode('', array_slice($arr, -4));

printf("%s -> %s%s/%s/%s-%s", $input, $century, $year, $month, $day, $id);
//output: 080189-12602 -> 1989/01/08-2602 
```

鉴于日期的古怪，尝试使用正则表达式验证它们可能是不可取的。例如：试着写一篇告诉你 2 月 29 日是否是有效日期的文章。最好将您的输入切碎并通过一些已实施所有检查的[日期库运行它。](http://us3.php.net/manual/en/book.datetime.php)

# javascript - 清除 AJAX 加载内容中的 JavaScript 变量

> ID：13651333
> 
> 赞同：0
> 
> 时间：2012-11-30T18:54:46.590
> 
> 标签：javascript

我正在开发一个 UI，其中有一个菜单，该菜单通过 AJAX 加载 div，其内容基于单击的菜单项。我的问题是我有一个在脚本块中有 setInterval 调用的视图，当我导航到另一个视图时，即使脚本块已被删除，脚本也会继续运行。真正删除脚本块并停止执行间隔的最佳做法是什么？

# javascript - 是否可以通过 javascript 获得 a:hover 颜色而不将鼠标悬停在元素上？

> ID：13651337
> 
> 赞同：2
> 
> 时间：2012-11-30T18:54:55.750
> 
> 标签：javascript, jquery, html, css, dom

如果我将鼠标悬停在链接上而不实际悬停在链接上，我想嗅探链接会变成的颜色。我想这样做的原因是我知道如何将其改回使用动画，因为可以通过各种可以动态应用的皮肤来设置颜色。我可以使用 javascript 或 jquery 来做到这一点（或者有其他方法吗）？

编辑：我已经使用 CSS 过渡实现了这一点，但我需要 IE9 及以下版本的 javascript

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T18:57:24.530

不，不幸的是，这是不可能的：您可以使用它`getComputedStyle()`来检索有关伪元素 ( `::before`/ `::after`) 的信息，但不能检索`:hover`伪选择器。

参考：

*   [`window.getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle) ^([兼容性](http://www.quirksmode.org/dom/w3c_css.html#t01))。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T19:41:37.363

您可以从样式表中获取值：http: [//jsfiddle.net/wt3qQ/](http://jsfiddle.net/wt3qQ/)

```
// code I found here: http://catcode.com/dominfo/getstyle2.html
function getStyleBySelector( selector )
   {
       var sheetList = document.styleSheets;
       var ruleList;
       var i, j;

       /* look through stylesheets in reverse order that
          they appear in the document */
       for (i=sheetList.length-1; i >= 0; i--)
       {
           ruleList = sheetList[i].cssRules;
           for (j=0; j<ruleList.length; j++)
           {
               if (ruleList[j].type == CSSRule.STYLE_RULE && 
                   ruleList[j].selectorText == selector)
               {
                   return ruleList[j].style;
               }   
           }
       }
       return null;
   }

console.log(getStyleBySelector('a:hover').color);
console.log(getStyleBySelector('#link:hover').color); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T18:58:36.687

如果您打算为颜色设置动画，那么（*对于现代浏览器*）您可以启用颜色的转换，这样它就会自动动画到它变成的任何东西`:hover`

要申请代码，您可以这样做

```
$('element').css({
   '-webkit-transition':'color 0.5s',
   '-moz-transition':'color 0.5s',
   '-o-transition':'color 0.5s',
   'transition':'color 0.5s',
}); 
```

# tfs - 想在没有构建管理的情况下采用 TFS

> ID：13651338
> 
> 赞同：0
> 
> 时间：2012-11-30T18:54:56.327
> 
> 标签：tfs, tfsbuild, visual-sourcesafe

我有一个由 4 名开发人员组成的小型团队。我们一直在将 VSS 与单个非分支 repo 一起使用（前任的决定）。

我们一直在使用 TFS 云，希望能创造出更好的解决方案。TFS 云有很多值得喜欢的地方，包括敏捷工具。

但是强制构建管理将成为我们小型敏捷团队的障碍。我们进行快速构建以测试迷你功能。

从我们所见，没有构建管理就无法使用 TFS 云。作为替代方案，我一直在阅读和搜索有关本地 TFS 服务器的信息。在这里我找不到我最基本问题的答案：**我们可以在不使用构建管理的情况下使用 TFS 进行源代码控制吗？**

我想继续直接从我们的“构建”机器构建，而不需要远程排队构建。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T19:32:28.407

如果您不想，您不必使用 TFS 构建。您可以将 TFS 仅用于源代码控制，并使用您想要的任何内容进行构建。例如，很多人使用 TFS 作为源代码存储库，使用 Team City、Cruise Control、Hudson 等作为构建服务器。

# php - 将单词转换为 PHP 中的数字 II

> ID：13651340
> 
> 赞同：3
> 
> 时间：2012-11-30T18:55:12.973
> 
> 标签：php, numbers, words

这里有一个很棒的功能，将单词转换为来自 El Yobo[的 PHP 中的数字。](https://stackoverflow.com/questions/1077600/converting-words-to-numbers-in-php)但我有一个问题，字符串必须以书面数字开头。如何转换例如“iPhone 有二十三万，七百八十三个应用程序”？

解释功能：

```
function wordsToNumber($data) {
// Replace all number words with an equivalent numeric value
$data = strtr(
    $data,
    array(
        'zero'      => '0',
        'a'         => '1',
        'one'       => '1',
        'two'       => '2',
        'three'     => '3',
        'four'      => '4',
        'five'      => '5',
        'six'       => '6',
        'seven'     => '7',
        'eight'     => '8',
        'nine'      => '9',
        'ten'       => '10',
        'eleven'    => '11',
        'twelve'    => '12',
        'thirteen'  => '13',
        'fourteen'  => '14',
        'fifteen'   => '15',
        'sixteen'   => '16',
        'seventeen' => '17',
        'eighteen'  => '18',
        'nineteen'  => '19',
        'twenty'    => '20',
        'thirty'    => '30',
        'forty'     => '40',
        'fourty'    => '40', // common misspelling
        'fifty'     => '50',
        'sixty'     => '60',
        'seventy'   => '70',
        'eighty'    => '80',
        'ninety'    => '90',
        'hundred'   => '100',
        'thousand'  => '1000',
        'million'   => '1000000',
        'billion'   => '1000000000',
        'and'       => '',
    )
);

// Coerce all tokens to numbers
$parts = array_map(
    function ($val) {
        return floatval($val);
    },
    preg_split('/[\s-]+/', $data)
);

$stack = new SplStack; // Current work stack
$sum   = 0; // Running total
$last  = null;

foreach ($parts as $part) {
    if (!$stack->isEmpty()) {
        // We're part way through a phrase
        if ($stack->top() > $part) {
            // Decreasing step, e.g. from hundreds to ones
            if ($last >= 1000) {
                // If we drop from more than 1000 then we've finished the phrase
                $sum += $stack->pop();
                // This is the first element of a new phrase
                $stack->push($part);
            } else {
                // Drop down from less than 1000, just addition
                // e.g. "seventy one" -> "70 1" -> "70 + 1"
                $stack->push($stack->pop() + $part);
            }
        } else {
            // Increasing step, e.g ones to hundreds
            $stack->push($stack->pop() * $part);
        }
    } else {
        // This is the first element of a new phrase
        $stack->push($part);
    }

    // Store the last processed part
    $last = $part;
}

return $sum + $stack->pop();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:27:20.777

好吧..我不得不承认..这对我个人来说很有趣！！！无论如何......这是代码......你可以在这里测试它：[http ://www.eyerollweb.com/str2digits/](http://www.eyerollweb.com/str2digits/)

这是代码本身：

```
<?php

//The Test string
$str = "two hundred thousand six hundred and two";

$numbers = array(
    'zero' => 0,
    'one' => 1,
    'two' => 2,
    'three' => 3,
    'four' => 4,
    'five' => 5,
    'six' => 6,
    'seven' => 7,
    'eight' => 8,
    'nine' => 9,
    'ten' => 10,
    'eleven' => 11,
    'twelve' => 12,
    'thirteen' => 13,
    'fourteen' => 14,
    'fifteen' => 15,
    'sixteen' => 16,
    'seventeen' => 17,
    'eighteen' => 18,
    'nineteen' => 19,
    'twenty' => 20,
    'thirty' => 30,
    'forty' => 40,
    'fourty' => 40, // common misspelling
    'fifty' => 50,
    'sixty' => 60,
    'seventy' => 70,
    'eighty' => 80,
    'ninety' => 90,
    'hundred' => 100,
    'thousand' => 1000,
    'million' => 1000000,
    'billion' => 1000000000);

//first we remove all unwanted characters... and keep the text
$str = preg_replace("/[^a-zA-Z]+/", " ", $str);

//now we explode them word by word... and loop through them
$words = explode(" ", $str);

//i devide each thousands in groups then add them at the end
//For example 2,640,234 "two million six hundred and fourty thousand two hundred and thirty four"
//is defined into 2,000,000 + 640,000 + 234

//the $total will be the variable were we will add up to
$total = 1;

//flag to force the next operation to be an addition
$force_addition = false;

//hold the last digit we added/multiplied
$last_digit = null;

//the final_sum will be the array that will hold every portion "2000000,640000,234" which we will sum at the end to get the result
$final_sum = array();

foreach ($words as $word) {

    //if its not an and or a valid digit we skip this turn
    if (!isset($numbers[$word]) && $word != "and") {
        continue;
    }

    //all small letter to ease the comparaison
    $word = strtolower($word);

    //if it's an and .. and this is the first digit in the group we set the total = 0 
    //and force the next operation to be an addition
    if ($word == "and") {
        if ($last_digit === null) {
            $total = 0;
        }
        $force_addition = true;
    } else {
        //if its a digit and the force addition flag is on we sum
        if ($force_addition) {
            $total += $numbers[$word];
            $force_addition = false;
        } else {
            //if the last digit is bigger than the current digit we sum else we multiply
            //example twenty one => 20+1,  twenty hundred 20 * 100
            if ($last_digit !== null && $last_digit > $numbers[$word]) {
                $total += $numbers[$word];
            } else {
                $total *= $numbers[$word];
            }
        }
        $last_digit = $numbers[$word];

        //finally we distinguish a group by the word thousand, million, billion  >= 1000 ! 
        //we add the current total to the $final_sum array clear it and clear all other flags...
        if ($numbers[$word] >= 1000) {
            $final_sum[] = $total;
            $last_digit = null;
            $force_addition = false;
            $total = 1;
        }
    }

}

// there is your final answer !
$final_sum[] = $total;
print "Final Answer: " . array_sum($final_sum) . "\n";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:38:20.403

```
$input = "iPhone has two hundred and thirty thousand, seven hundred and eighty-three apps";
$words = explode(' ', preg_replace("/[^A-Za-z0-9]/", ' ', $input)); //replace non-alpha characters like ',' with ' '
$res_arr = array();

foreach( $input_arr as $word ) {
    if( in_array($word, $number_words) ) { //$number_words being the large array given in your code
        $res_arr[] = $word;
    }
}
$clean_input = implode(' ', $res_arr);
//should look like: two hundred and thirty thousand seven hundred and eighty-three 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T09:15:08.893

```
<?php
$val = '';
if(isset($_POST['submit']))
{
    $val_entered = str_replace(',','',$_POST['nmbr']);
    $num_list = explode('.',$val_entered);
    $full_val = convert_num($num_list[0]);$cnxn = '';
    if($num_list[0]!=0){$cnxn = ' and ';}

    $dec_val = convert_num($num_list[1]);
    $val=' Value entered  is '.$val_entered.' =  Rupees '.$full_val.$cnxn.' cents '.$dec_val;

}
?>
<form name="cnvt" id="cnvt" action="" method="post">
<input type="text" id="nmbr" name="nmbr" value="0" />
<input type="submit" id="submit" name="submit" value="Submit"  />
</form>
<?php print  $val ?>

<?php
function convert_num($nmbr)
{
    $numword = 'Zero';
    if($nmbr>0)
    {
    $abacus = setto_abacus($nmbr);
    //print '<pre>';print_r($abacus);print '</pre>';
    $numword = read_abacus($abacus);
    }

    return $numword;

}
function setto_abacus($nmbr)
{
    $abacus = array(1000000=>0,1000=>0,100=>0,1=>0);
    $val = $nmbr; //2,500,605
    foreach(array_keys($abacus)as $key)
    {
        $abacus[$key] = (int)($val/$key);
        $val = $val %$key;
    }
    return $abacus;
}
function read_abacus($abacus)
{
    $position_name = array(100=>'Hundred',1000=>'Thousand',1000000=>'Million');
    $numvals = array(0=>'Zero',1=>'One', 2=>'Two',3=>'Three',4=>'Four',5=>'Five',6=>'Six',7=>'Seven',8=>'Eight',9=>'Nine',
    10=>'Ten',11=>'Eleven', 12=>'Twelve',13=>'Thirteen',14=>'Fourteen',15=>'Fifteen',16=>'Sixteen',17=>'Seventeen',18=>'Eighteen',19=>'Nineteen',20=>'twenty',30=>'Thirty',40=>'Forty',50=>'Fifty',60=>'Sixty',70=>'Seventy',80=>'Eighty',90=>'Ninety');
    $num_words = ""; $cnxn = '';
    foreach($abacus as $key=>$val)
    {
        $cnxn = ''; if($key==1 && $num_words !=''){$cnxn='and';}
        if($val>0)
        {
            if($val>=100)
            {   $rfnum = (int)($val/100);
                $num_words.= $numvals[$rfnum].' '.$position_name[100].' ';
                $rfnum = $val % 100;
            }
            else
            {
                $rfnum = $val;
            }
            if($rfnum>0)
            {   
                $num_words.= get_twodigit_inwords($rfnum, $cnxn);
            }
            $num_words.= ' '.$position_name[$key].' ';

        }

    }
    return $num_words;
}
function get_twodigit_inwords($rfnum, $cnxn)
{
    $numvals = array(1=>'One', 2=>'Two',3=>'Three',4=>'Four',5=>'Five',6=>'Six',7=>'Seven',8=>'Eight',9=>'Nine',
    10=>'Ten',11=>'Eleven', 12=>'Twelve',13=>'Thirteen',14=>'Fourteen',15=>'Fifteen',16=>'Sixteen',17=>'Seventeen',18=>'Eighteen',19=>'Nineteen',20=>'Twenty',30=>'Thirty',40=>'Forty',50=>'Fifty',60=>'Sixty',70=>'Seventy',80=>'Eighty',90=>'Ninety');
    $tens_words = '';$unit_words = '';

    if($rfnum>0)
    {   
        if(array_key_exists($rfnum,$numvals))
        {
            $tens_words= $numvals[$rfnum].' ';
        }
        else 
        {
            $tens_words = $numvals[(int)($rfnum /10)*10];
            $unit_words = $numvals[$rfnum %10];
        }
    }
    $twodigit_name = $cnxn.' '.$tens_words.' '.$unit_words;
    return $twodigit_name;
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T11:29:03.080

```
<?php

$string=$_POST['num'];
$array1=array("one"=>1,"two"=>2,"three"=>3,"four"=>4,"five"=>5,"six"=>6,"seven"=>7,"eight"=>8,"nine"=>9,"ten"=>10,"eleven"=>11,"twelve"=>12,"thirteen"=>13,"fourteen"=>14,"fifteen"=>15,"sixteen"=>16,"seventeen"=>17,"eighteen"=>18,"ninteen"=>19,"twenty"=>20,"thirty"=>30,"fourty"=>40,"fifty"=>50,"sixty"=>60,"seventy"=>70,"eighty"=>80,"ninty"=>90);

$array2=array("hundred"=>100,"thousand"=>1000,"lakh"=>100000,"crore"=>10000000);
echo "<br>";
$number=explode(" ",$string);
echo "<br>";
$count=count($number);
$new=0;
$final=0;
foreach($number as $word)
{
    $lastTwo=$lastOne;
    foreach($array1 as $keyCN=>$valueCN)
    {   

        if($keyCN==$word)
        {
            $new=$valueCN;
            $lastOne=$valueCN;
        }
     }

    foreach($array2 as $key=>$value)
    {
         if($key==$word)
         {

            $new2=$new*$value;
            $num+=$new2;
            $lastOne=0;
            $lastTwo=0;
        }
    }   
}
$final=$num+$lastOne+$lastTwo;

echo "final is $final<br>";
?>
<form method="POST">
<input type="text" name="num" value=""></br>
<input type="submit" value="Convert string to number">
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T19:50:25.463

那么这样的事情应该

```
$numbers = array('0' => "zero",
    '1' => "one", '2' => "two", '3' => "three", '4' => "four", '5' => "five", '6' => "six", '7' => "seven", '8' => "eight", '9' => "nine", '10' => "ten", '11' => "eleven", '12' => "twelve", '13' => "thirteen", '14' => "fourteen", '15' => "fifteen", '16' => "sixteen", '17' => "seventeen", '18' => "eighteen", '19' => "nineteen", '20' => "twenty", '21' => "twenty one", '22' => "twenty two", '23' => "twenty three", '24' => "twenty four", '25' => "twenty five", '26' => "twenty six", '27' => "twenty seven", '28' => "twenty eight", '29' => "twenty nine", '30' => "thirty", '31' => "thirty one", '32' => "thirty two", '33' => "thirty three", '34' => "thirty four", '35' => "thirty five", '36' => "thirty six", '37' => "thirty seven", '38' => "thirty eight", '39' => "thirty nine", '40' => "fourty", '41' => "fourty one", '42' => "fourty two", '43' => "fourty three", '44' => "fourty four", '45' => "fourty five", '46' => "fourty six", '47' => "fourty seven", '48' => "fourty eight", '49' => "fourty nine", '50' => "fifty", '51' => "fifty one", '52' => "fifty two", '53' => "fifty three", '54' => "fifty four", '55' => "fifty five", '56' => "fifty six", '57' => "fifty seven", '58' => "fifty eight", '59' => "fifty nine", '60' => "sixty", '61' => "sixty one", '62' => "sixty two", '63' => "sixty three", '64' => "sixty four", '65' => "sixty five", '66' => "sixty six", '67' => "sixty seven", '68' => "sixty eight", '69' => "sixty nine", '70' => "seventy", '71' => "seventy one", '72' => "seventy two", '73' => "seventy three", '74' => "seventy four", '75' => "seventy five", '76' => "seventy six", '77' => "seventy seven", '78' => "seventy eight", '79' => "seventy nine", '80' => "eighty", '81' => "eighty one", '82' => "eighty two", '83' => "eighty three", '84' => "eighty four", '85' => "eighty five", '86' => "eighty six", '87' => "eighty seven", '88' => "eighty eight", '89' => "eighty nine", '90' => "ninety", '91' => "ninety one", '92' => "ninety two", '93' => "ninety three", '94' => "ninety four", '95' => "ninety five", '96' => "ninety six", '97' => "ninety seven", '98' => "ninety eight", '99' => "ninety nine", '100' => 'hundred', '1000' => 'thousand', '1000000' => 'million');

$words = explode(" ", $string);

$sw = 0;
$words = array_merge($words);

for ($nindex = 0; $nindex < count($words); $nindex++) {

    $numword = $words[$nindex];
    $preservenumword = $numword;

    if ($numword == "one hundred") {
        $numword = "hundred";
        $words[$nindex] = $numword;
    }
    if ($numword == "one thousand") {
        $numword = "thousand";
        $words[$nindex] = $numword;
    }
    if ($numword == "one million") {
        $numword = "million";
        $words[$nindex] = $numword;
    }

    $numwordarray = array_search(strtolower($numword), $numbers);

    if ($numwordarray === false || $numwordarray == 0 || $numwordarray == "") {
        unset($words[$nindex]);
    }
}

$finalNumber = 0;

for ($nindex = 0; $nindex < count($words); $nindex++) {

    $number = array_search(strtolower($words[$nindex]), $numbers);
    if ($number === false || $number == 0 || $number == "")
        continue;

    $cur = strtolower($words[$nindex]);
    if ($nindex + 1 >= count($words))
        $next = '';
    else
        $next = strtolower($words[$nindex + 1]);
    $coupleword = $cur . " " . $next;
    $couplenumber = array_search($coupleword, $numbers);

    if ($couplenumber != false && $couplenumber != 0 && $couplenumber != "") {
        if (strtolower($words[$nindex + 2]) == "hundred") {
            $finalNumber = $finalNumber + ($couplenumber * 100);

            $nindex+=2;
        } elseif (strtolower($words[$nindex + 2]) == "thousand") {

            $finalNumber = ($finalNumber + $couplenumber) * 1000;

            $nindex+=2;
        } else {
            $finalNumber = $finalNumber + $couplenumber;

            $nindex++;
        }

        continue;
    }

    if (strtolower($words[$nindex]) != "thousand" && strtolower($words[$nindex + 1]) == "hundred") {
        $finalNumber = $finalNumber + ($number * 100);
        $nindex++;

        continue;
    } else if (strtolower($words[$nindex + 1]) == "thousand" && strtolower($words[$nindex]) != "hundred") {
        $finalNumber = $finalNumber + ($number * 1000);
        $nindex++;

        continue;
    } else if (strtolower($words[$nindex]) == "thousand") {
        $finalNumber = $finalNumber * 1000;

        continue;
    } else if (strtolower($words[$nindex]) == "hundred") {
        $finalNumber = $finalNumber * 100;

        continue;
    } else if (strtolower($words[$nindex]) == "million") {
        $finalNumber = $finalNumber * 1000000;

        continue;
    } else {
        $finalNumber = $finalNumber + $number;
    }
}

echo $finalNumber; 
```

# git - 恢复意外清除的藏匿处

> ID：13651343
> 
> 赞同：0
> 
> 时间：2012-11-30T18:55:17.167
> 
> 标签：git, git-stash

今天早上，在从一个分支快速移动到另一个分支时，我不得不隐藏我的更改。匆忙中，我发了一个

```
git stash clear 
```

——因为我的藏匿清单相当长。在我清除的藏匿处列表中有一些我需要恢复的工作。有没有办法恢复它？有问题的存储是使用以下方法保存的：

```
git stash save "my notes here" 
```

不确定这是否真的有帮助。有希望吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:58:15.730

由于任何存储都类似于提交，但处理方式不同，您会在 reflog 中找到它们。您可以通过 访问 reflog `git reflog`，您可以在其中获得最近创建的所有提交对象的列表。

# python - 访问使用内置 dir() 调用函数的命名空间

> ID：13651351
> 
> 赞同：0
> 
> 时间：2012-11-30T18:56:34.920
> 
> 标签：python, scope

我的范围有问题。我想让一个函数对内置函数的结果进行操作`dir()`。所以，作为一个简单的例子，我想

```
>>> print (dir())
>>>  .... bunch of stuff ... 
```

但是，我想定义一个对 dir() 的结果进行操作的函数。但是，如果这样尝试

```
>>> def print_dir(dummy_var=None):
        print dir()
>>> print_dir()
>>> ['dummy_var'] 
```

我无法访问所谓的命名空间`print_dir`，我理解这是一个范围事物并且有意义，但是有没有办法访问调用函数的命名空间？还是我必须将 dir() 的结果传递给函数？像。

```
>>> act_on_namespace(dir()) 
```

心中的具体目标是这样的，

```
def act_on_namespace()
    for k in dir():
        try:
            print(eval(k).__module__)
        except:
            pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:00:33.397

`dir`返回一个已[排序的标准 python 列表](http://docs.python.org/2/tutorial/modules.html#the-dir-function)，以便您*可以根据需要*对其进行操作。只需将其存储在一个变量中，鲍勃就是你的叔叔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:17:30.557

为什么不直接传入您感兴趣的命名空间中调用 dir 的结果呢？

```
def act_on_namespace(dir_result)
    for k in dir_result:
        try:
            print(eval(k).__module__)
        except:
            pass

act_on_namespace(dir()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:17:40.740

不，没有像这样操作调用命名空间的直接方法。最简单的方法是执行您已经建议的操作：调用`act_on_namespace(dir())`. 如果您真的想发疯，您可以查看`inspect`模块，它允许您查看调用堆栈，但这可能不是一个好主意，除非您正在编写某种调试工具。

# javascript - js异步图片加载问题

> ID：13651353
> 
> 赞同：0
> 
> 时间：2012-11-30T18:56:57.407
> 
> 标签：javascript, jquery, asynchronous

我正在使用 1x1 像素图像技巧开发跟踪功能，部分基于[http://www.ebrueggeman.com/blog/redis-visitor-tracking](http://www.ebrueggeman.com/blog/redis-visitor-tracking)。

我的`track.php`样子：

```
$out = date("Y-m-d H:i:s \n"); //later will pull and log data from $_SERVER
file_put_contents('log.txt', $out  , FILE_APPEND );
//output appropiate headers and serve pixel
$pixel = '1x1.gif';
header('Content-Length: ' . filesize($pixel));
header('Content-Type: image/gif');
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
print file_get_contents($pixel);
sleep(10); //<== for testing, to simulate possible extra processing or bottlenecks. Should NOT delay loading of main page 
```

我尝试了几种异步加载图像/脚本的方法：

```
//Option 1
//http://www.ebrueggeman.com/blog/redis-visitor-tracking
(function() { //console.log('s');
    var pxl = document.createElement('img');    
    pxl.async = true;
    pxl.src = 'track.php';
    pxl.width = 1;
    pxl.height = 1;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(pxl, s);
})();

//Option 2
var img = $("<img />").attr('src', 'track.php')
    .load(function() {
        if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
            alert('broken image!');
        } else {
            $("#here").append(img);
        }
    });

//Option 3
//https://github.com/sebarmeli/JAIL (Jquery Asynchronous Image Loader)
$(function(){
   $('img.lazy').jail();
  });

//Option4
$.ajax({
  url: "track.php",
  cache: false
}); 
```

在测试选项 1 和 2 时，浏览器会一直“等待”直到延迟`track.php`完成。它应该这样做吗？我尝试了 FF 和 Chrome，它们一直在转动，显示页面尚未完全加载。

在选项 3 和 4 上，页面会立即显示 Ready，但由于使用外部脚本和插件，代码会变得更重。

加载此脚本并尽可能减少延迟并为被跟踪页面添加处理的最佳方式是什么？

感谢您的任何见解。

更新：

我将测试上传到商业托管帐户，它的行为符合预期。即使我的本地测试通过 apache，由于某种原因，通过 localhost 时测试的行为也有所不同。感谢大家的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:16:22.897

您实际上可以为此使用“Image()”对象。

## 使用 jQuery 的示例

```
$(window).load(function(){
    var img = new Image();
    img.src = "track.php";
}); 
```

## 使用标准 DOM 的示例

```
window.addEventListener("load", function(){
    var img = new Image();
    img.src = "track.php";
}, false); 
```

您可能应该在请求上附加一个随机 GET 参数，以确保它不会像这样被缓存：

```
window.addEventListener("load", function(){
    var img = new Image();
    img.src = "track.php?" + Math.floor(Math.random() * 9e9);
}, false); 
```

# jquery - jQuery过滤JSP中的自动完成

> ID：13651354
> 
> 赞同：0
> 
> 时间：2012-11-30T18:56:58.333
> 
> 标签：jquery, jsp, autocomplete

我已经看到了很多关于自动完成的问题和答案，但没有一个特定于我正在做的事情。我要做的是让用户从选择菜单中选择一个选项（即 SSN、名字、姓氏、出生日期），这当然会命中数据库并填满相应的数据。当用户开始在文本框中输入字符时，自动完成功能通过显示正确的数据开始工作。我有一个可以正常工作的自动完成功能，问题是 -

**如何根据所选的选择菜单值确定要访问的数据？**

HTML

```
<div id="search-title"> Employees</div>
        <div id="search-container-large">
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td>
                      <label for="search-text" class="search-label">Search By:</label>
                        <select name="searchkey" size="1" id="searchkey" class="dropDown">
                            <option value="0" selected> </option>
                            <option value="2" >SSN</option>
                            <option value="4" >Last Name</option>
                            <option value="3" >First Name</option>
                            <option value="5" >ID</option>
                            <option value="6" >Number</option>
                        </select>
    <input name="searchvalue" type="text" class="form-field-search" id="searchvalue"/><a href="#"><img src="img/search-btn.png" width="28" height="24" border="0" class="search-btn"/></a>
                     </td>
                   </tr>
                 </table>
    </div> 
```

JAVASCRIPT

```
jQuery(function() {
    $("#searchvalue").autocomplete("http://localhost/test/getData.jsp", {
        extraParams: {
            filter: getDropdownValue()
        }
    });
});

    function getDropdownValue() {
    var compId=document.getElementById("searchkey").value;
    return compId;
    } 
```

JSP

```
<%
    DummyDB db = new DummyDB();

    String name=request.getParameter("filter");

    String query = request.getParameter("q");
    List<String> fnames = db.getData(query);

    Iterator<String> iterator = fnames.iterator();
    while(iterator.hasNext()) {
        String searchvalue = (String)iterator.next();
        out.println(searchvalue);
    }
%> 
```

JAVA文件

```
public class DummyDB {
    private int firstNames;
    private String data = "Alan, Albert, Alex, Bain, Brian, Carl, Chris, David, Derek, Frank, Frodo, Gary, Greg, Yaser";

    private List<String> fnames;
    public DummyDB() {
        fnames = new ArrayList<String>();
        StringTokenizer st = new StringTokenizer(data, ",");

        while(st.hasMoreTokens()) {
            fnames.add(st.nextToken().trim());
        }
        firstNames = fnames.size();
    }

    public List<String> getData(String query) {
        String searchvalue = null;
        query = query.toLowerCase();
        List<String> matched = new ArrayList<String>();
        for(int i=0; i<firstNames; i++) {
            searchvalue = fnames.get(i).toLowerCase();
            if(searchvalue.startsWith(query)) {
                matched.add(fnames.get(i));
            }
        }
        return matched;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:49:31.113

好的，这是我遇到的问题的解决方案。这也需要对 jquery.autocomplete.js 文件进行一些修改。但这一切都可以正常工作 - 用户从下拉/选择菜单中选择一个值，这决定了将访问哪个数据字符串。当用户在文本框中输入字符时，会显示正确的数据列表。如果您有任何问题，请告诉我，我会尽力回答。

HTML Javascript：

```
<script>
    jQuery(function() {
        $("#searchvalue").autocomplete("http://localhost/test/getData.jsp",{mustMatch:1});
    });

        function changeSkey(val)
    {
            $auto.flushCache();
        $auto.setExtraParams({f:val});
    }
</script> 
```

HTML 元素：

```
 <div id="search-container-large">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <label for="search-text" class="search-label">Search By:</label>
                    <select name="searchkey" size="1" id="searchkey" class="dropDown" onchange="changeSkey(this.value);">
                        <option value="0" selected> </option>
                        <option value="1" >SSN</option>
                        <option value="2" >Last Name</option>
                        <option value="3" >First Name</option>
                        <option value="4" >ID</option>
                        <option value="5" >Number</option>
                    </select>
<input name="searchvalue" type="text" class="form-field-search" id="searchvalue"/><a href="#"><img src="search-btn.png" width="28" height="24" border="0" class="search-btn"/></a>
                 </td>
               </tr>
             </table>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:15:54.793

如果您的问题是：如何在 JavaScript 中获取下拉列表中的选定值，那么答案是：[`$('#searchKey').val()`](http://api.jquery.com/val/).

# javascript - 覆盖 jQuery 函数中的客户端错误消息，以便可以添加值

> ID：13651355
> 
> 赞同：3
> 
> 时间：2012-11-30T18:57:04.893
> 
> 标签：javascript, jquery, asp.net-mvc-2, data-annotations, client-side

首先我想说的是，这个站点对于快速掌握 MVC 和 DataAnnotations 非常有帮助。现在，进入问题。

首先，一些事实：我正在使用 MVC2 和 .NET 4.0 框架。更新到 MVC3 目前对我来说不是一个选项（这是我遇到的一半问题的最常见答案，但在这里可能并不重要）。

我创建了一个完全可用的自定义属性来验证数据库结果集中是否已经存在字符串。我还创建了匹配的自定义验证器和 javascript 来输出客户端元数据，它也可以工作。

我想解决的是如何覆盖客户端通过 jquery/javascript 使用的错误消息，而**不是**通过我的验证器。我希望客户端错误消息在输入字段无效时包含输入字段的值，这是无法通过验证器完成的。所以，一些代码：

验证器：

```
public class UniqueStringValidator : DataAnnotationsModelValidator<UniqueStringAttribute>
    {
        public UniqueStringValidator(ModelMetadata metadata, ControllerContext controllerContext,
                                    UniqueStringAttribute attribute)
            : base(metadata, controllerContext, attribute)
        {

        }

        public override IEnumerable<ModelClientValidationRule> GetClientValidationRules()
        {
            //declare the services we'll need

            var rule = new ModelClientValidationRule
            {
                ValidationType = "uniquestring",
                ErrorMessage = "The string is not unique.", //I want to override this on the client, but NOT HERE
            };

            //This is how I pull additional attributes from the viewmodel in MVC2 (wish I was on MVC3)
            //"c" represents the current record we're editing, if we're editing
            if (HttpContext.Current.Request.QueryString["c"] != null)
            {
                int id = Convert.ToInt32(HttpContext.Current.Request["c"]);
                string[] stringNames = //call a service and add some query to remove the current record from the results
                    //and return only the column of strings we're interested in

                rule.ValidationParameters.Add("stringlist", stringNames);
            }
            else
            //If we're here, we're not editing an existing record
            {
                string[] stringNames = //call a service and query only the column of interest
                rule.ValidationParameters.Add("stringlist", stringNames);
            }

            return new[] { rule };
        }
    } 
```

这是我的 javascript 验证器：

```
 jQuery.validator.addMethod("uniquestring", function (value, element, params) {

    var stringNames = params.stringlist;

    for (var i = 0; i < stringNames .length; i++) {
        if (value == stringNames [i]) {
            //I want to override the error message here so I can include value
            return false;
        }
    }

    return true;
}); 
```

我重新审视了这一点，并尝试了更多的事情来真正理解发生了什么。错误消息设置在页面底部的元数据中，所有 javascript 函数似乎都能够确定验证是否应该通过或失败。使用 jquery 在函数末尾添加错误消息，甚至尝试将错误消息元素设置为 javascript 中的某些文本似乎没有什么不同或破坏脚本（我怀疑后一种方法“有效”但立即被元数据覆盖）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T04:40:46.560

假设您使用的是 Microsoft 的不显眼验证，则确实为您设置了错误消息，并将覆盖您尝试在验证器中提供的消息。如果在创建 jquery 验证器时在选项中未指定任何消息，则您在验证器中提供的消息（通过 addMethod）是默认消息。

对于不显眼的验证，错误消息作为属性包含在正在验证的元素上（我没有 MVC2，但对于 3 和 4 是这样）

但是，您仍然可以手动覆盖此消息。

假设您的表单如下所示：

```
<form action="/controller/action" id="myForm" method="post">        
<input data-val="true" data-val-uniquestring="The string is not unique" type="text" name="foo" id="foo"/>
    <div data-valmsg-for="foo"></div>
    <button type="submit">Ok</button>
</form> 
```

您可以看到错误消息是在元素的属性中指定的，它将覆盖您在设置验证器时提供的默认错误消息。

要更改此消息的所有实例，您可以执行以下操作：

```
function myCustomMessage(ruleParams, element) {
    return $(element).val() + " is not a unique value";
}

// This snippet must come after the jquery.validate.unobtrusive.js file
$(function () {
    var settings = $("#myForm").validate().settings;

    for (var p in settings.messages) {
        if (typeof settings.messages[p]["uniquestring"] !== "undefined") {
            settings.messages[p]["uniquestring"] = myCustomMessage;
        }
    }

}); 
```

# java - 无法在 Eclipse 中使用库制作可执行 JAR 文件

> ID：13651360
> 
> 赞同：0
> 
> 时间：2012-11-30T18:57:26.033
> 
> 标签：java, eclipse

我正在尝试将我的项目导出为可执行 jar，除了一件事之外一切都很好：有 2 个窗口 - 第一个是主 jframe，第二个是使用 jzy3d 库制作 3D 表面的 jframe；第一个窗口包含用于执行第二个 jframe 的“显示”按钮。当我在 Eclipse 中执行这个项目时它运行良好，但是当我制作可执行 jar 时它被执行，但是如果我点击“显示”按钮，第二个 jframe 不会打开。所以，请告诉我，我该如何解决？

更新：来自 cmd 的信息：

```
Catched FileNotFoundException: C:\destination-natives-windows-i586.jar (═х єфр
ё  эрщЄш єърчрээ√щ Їрщы), while TempJarCache.bootstrapNativeLib() of jar:file:
:/destination-natives-windows-i586.jar!/ (file:/C:/ + destination-natives-wind
s-i586.jar)
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: no glue
n-rt in java.library.path
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.loadLibrary0(Unknown Source)
        at java.lang.System.loadLibrary(Unknown Source)
        at com.jogamp.common.jvm.JNILibLoaderBase.loadLibraryInternal(JNILibLo
erBase.java:454)
        at com.jogamp.common.jvm.JNILibLoaderBase.access$000(JNILibLoaderBase.
va:59)
        at com.jogamp.common.jvm.JNILibLoaderBase$DefaultAction.loadLibrary(JN
ibLoaderBase.java:90)
        at com.jogamp.common.jvm.JNILibLoaderBase.loadLibrary(JNILibLoaderBase
ava:328)
        at com.jogamp.common.os.DynamicLibraryBundle$GlueJNILibLoader.loadLibr
y(DynamicLibraryBundle.java:390)
        at com.jogamp.common.os.Platform$2.run(Platform.java:249)
        at java.security.AccessController.doPrivileged(Native Method)
        at com.jogamp.common.os.Platform.loadGlueGenRTImpl(Platform.java:231)
        at com.jogamp.common.os.Platform.<clinit>(Platform.java:183)
        at javax.media.opengl.GLProfile.<clinit>(GLProfile.java:99)
        at org.jzy3d.global.Settings.<init>(Settings.java:12)
        at org.jzy3d.global.Settings.getInstance(Settings.java:21)
        at com.nda.fuzzy.views.SurfaceViewerFrame.<init>(SurfaceViewerFrame.ja
:102)
        at com.nda.fuzzy.views.MainFrame$26.actionPerformed(MainFrame.java:579
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.AbstractButton.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknow
Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$200(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown So
ce)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown So
ce)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown So
ce)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:00:09.007

可能在命令行上您没有指定 jzy3d 库的类路径

您可以使用 lib 运行 jar 文件：

```
"java -cp libs/* -jar program.jar" 
```

您将 lib (jzy3d.jar) 放在 libs 文件夹中的位置

如果您使用了一些创建可执行 jar 文件的特殊工具，那么您必须配置该工具以包含要在 exe 中使用的 jzy3d.jar 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:19:25.497

您需要执行以下操作之一：

1.  将每个 jarfile 依赖项的内容重新打包到您自己的可执行 jarfile 中
2.  使用 .exe 包装器（例如 Launch4j）将您的 jarfile 打包成一个自解压和启动的可执行文件
3.  从 Eclipse 创建可执行 jarfile 时，在 MANIFEST.MF 的 Class-Path 属性中包含 jarfile 依赖项，并在分发应用程序时将这些依赖项包含在适当的相对位置

在上述选项中，1 对您来说可能是最简单和最方便的。如果将 jarfile 依赖项的内容提取到 Eclipse 项目中，那么在使用 Eclipse 的向导创建 jarfile 时很容易包含这些资源。

选项 2 和 3 也非常简单，但我建议您制作一个 ant 脚本，以便您可以一键构建。

# java - Android 应用程序的图形 API？

> ID：13651364
> 
> 赞同：0
> 
> 时间：2012-11-30T18:57:49.497
> 
> 标签：java, android

我正在启动一个将收集数据的 Android 应用程序，我想绘制这些数据的图表。

我可以在哪些地方寻找可在 Android 上使用的 Java 图表 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:02:58.927

将此图表库用于 android

[http://code.google.com/p/achartengine/](http://code.google.com/p/achartengine/)

一些例子

[http://aspnetgeek.wordpress.com/2011/09/09/graphs-on-android-using-achartengine/](http://aspnetgeek.wordpress.com/2011/09/09/graphs-on-android-using-achartengine/) [https://github.com/CodeAndMagic/AChartEngineTest](https://github.com/CodeAndMagic/AChartEngineTest)

[http://wptrafficanalyzer.in/blog/android-drawing-pie-chart-using-achartengine/](http://wptrafficanalyzer.in/blog/android-drawing-pie-chart-using-achartengine/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:27:28.593

我强烈推荐 AChartEngine ..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:33:54.567

我推荐这个：[http ://androidplot.com/wiki/Home](http://androidplot.com/wiki/Home)

这个库支持这些图表：

```
Line charts
Scatter charts
Bar charts
Step charts 
```

# android - Eclipse中的VDM不会加载？

> ID：13651365
> 
> 赞同：2
> 
> 时间：2012-11-30T18:57:50.213
> 
> 标签：android, eclipse, sdk, virtual-device-manager

我没有应用程序开发经验，但我对使用 androids SDK 很感兴趣，我下载了 .zip 文件并将所有内容提取到我的桌面上。我试图按照 androids 网站上的介绍性教程进行操作，但是当需要启动虚拟设备管理器时，单击工具栏中的按钮什么也没做。尝试运行应用程序并选择添加 VDM 也不起作用。

直接导航到 VDM 应用程序并尝试启动它会导致 cmd 窗口打开一瞬间。我能够截取消息的屏幕截图，但内容如下：

“模拟器错误：您没有指定虚拟设备名称，找不到系统目录。”

在尝试开始教程之前，我成功启动了 VDM。SDK 的路径在 Eclipse 中设置正确。

我尝试重新下载 SDK 无济于事我正在运行 Windows 7 和最新版本的 Android SDK。

# iphone - 将 BLE 模块连接到微控制器

> ID：13651366
> 
> 赞同：0
> 
> 时间：2012-11-30T18:57:51.853
> 
> 标签：iphone, xcode, bluetooth, core-bluetooth, bluetooth-lowenergy

我正在尝试将 BLE 模块连接到 8051 微控制器。8051 微控制器是 8 位的。而分配的 UUID 是 16 位和 128 位。我必须为此制作自己的UUID吗？或者我如何将 UUID 转换为 8 位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:15:43.150

据我所知，

您只能使用 128 位，而 16 位是为 BLE 标准保留的。如果您只是自己玩，您可以安全地使用 16 位 UUID。如果要投入生产和销售，最好选择 128 位 UUID。

将 128 位 UUID 转换为 8 位是什么意思？您只需选择一个 128 位 UUID 并坚持使用它。当然，在您的 8051 中，您可以使用 16 字节的代码存储器存储 128 位。

# javascript - 复选框新状态未反映

> ID：13651375
> 
> 赞同：0
> 
> 时间：2012-11-30T18:58:20.817
> 
> 标签：javascript, jquery

我已经在[http://jsfiddle.net/7ZpCW/1/展示了这个问题](http://jsfiddle.net/7ZpCW/1/)

我已经实现了代码，这样当我单击复选框或旁边的文本时，应根据其先前的状态选择/取消选择复选框。

问题是当我单击文本时，虽然复选框被选中，但警报消息仅执行了先前复选框被选中的次数。

当我单击复选框时，警报消息将根据当前状态执行。

![截屏](../Images/70dae1dc87b716b5f267af9d7c9800e4.png)

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
<span id="MYARRAYloader_collapse" class = "w195"  style="display:block">
<div class="sp15">&nbsp;</div>

<div class="lf  fs12 lh15" style="padding-left:10px;">
<input type="checkbox" name="MYARRAY[]" id="MYARRAY0"  value="ALL"  checked  class="chbx checkbox-selector1">
<a href="#" class="checkbox-selector" style="color:#5B5B5B;">All</a> 
<br>
<input type="checkbox" name="MYARRAY[]"  value="V"  class="chbx checkbox-selector1">
<a href="#" class="checkbox-selector" style="color:#5B5B5B;">Opt1</a> 
<span class="gray t11">(42)</span>
<br>
<input type="checkbox" name="MYARRAY[]"  value="N"  class="chbx checkbox-selector1">
<a href="#" class="checkbox-selector" style="color:#5B5B5B;">Opt2</a> 
<span class="gray t11">(38)</span>
<br>
</div>
<div class="sp12">&nbsp;</div>
</span>

<script>
$('.checkbox-selector').click(function() {
var chb = $(this).prev();
chb.click();
return false;
})
$('.checkbox-selector1').click(function() {
var chb , chb1 , action;
chb= $(this); 
clusterName = chb.attr('name');
clusterVal = chb.attr('value');

var array = new Array();

$('input[name="'+clusterName+'"]:checked').each(function(i,el){
alert('Count Me');
chb1 = $(this); 

if(clusterVal == 'ALL')
{
if(chb1.attr('value')!='ALL')
{
chb1.attr("checked","");
}
else
array.push($(el).val());
}
else
{
if(chb1.attr('value')=='ALL')
{
chb1.attr("checked","");
}
else
{
array.push($(el).val());
}
}
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:01:27.990

你正在严重地混淆这个问题。您只需将复选框和文本包装在`label`.

```
<label><input type="checkbox" /> This is some text</label>
<label><input type="checkbox" /> This is some text</label>
<label><input type="checkbox" /> This is some text</label> 
```

jsFiddle： http: [//jsfiddle.net/7ZpCW/](http://jsfiddle.net/7ZpCW/) ​</p>

你真的应该像这样格式化你的代码以使其更具语义。但你不会。所以你可以通过替换这个来修复你的代码：

```
$('.checkbox-selector1').click( ... ); 
```

有了这个：

```
$('.checkbox-selector1').change( ... ); 
```

jsfiddle：http: [//jsfiddle.net/7ZpCW/2/](http://jsfiddle.net/7ZpCW/2/)

# internet-explorer - 在 IE 中使用服务器设置阻止 Intranet 站点的兼容性视图模式？

> ID：13651377
> 
> 赞同：1
> 
> 时间：2012-11-30T18:58:28.973
> 
> 标签：internet-explorer, cross-browser

我正在构建一个作为 Intranet 托管的站点。我需要它不在 IE 的兼容性视图中。

显然，IE 默认设置为始终以兼容性视图模式显示 Intranet 站点。我尝试过使用元标记、标准 xhtml dom，但似乎没有什么能够强制关闭兼容模式。唯一的方法是让用户转到工具/兼容性视图设置/并取消选中“在兼容性视图中显示 Intranet 站点”。

有没有办法使用服务器设置强制关闭 Intranet 站点中的兼容性视图？

我努力了：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<title>TEST</title>
</head>
<body> 
    test
</body>
</html> 
```

和，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>TEST</title>
</head>
<body> 
    test
</body>
</html> 
```

和，

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T11:41:00.563

请参阅[Override Intranet compatible mode IE8](https://stackoverflow.com/questions/2518256/override-intranet-compatibility-mode-ie8)，它告诉您修改 http 标头，而不是指定元标记。给出了如何在 ASP.Net web.config 文件中执行此操作的示例。

或者，您可以在 Web 服务器配置中指定自定义标头。例如，在 IIS 7.5 中，

1.  您导航到要重新配置的网站；
2.  查找条目*HTTP 响应标头*；
3.  添加名称：“X-UA-Compatible”和值：“IE=Edge”的设置。

如果您的网站是 ASP.Net Web 应用程序，则两种方法将相互复制。也就是说，第二种方法实际上会更新 web.config 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:51:36.427

您的第一个示例应该有效。但是请注意，IE 仍会将 IE7 User-Agent 标头发送到服务器，因此您不应该对 IE 版本进行服务器端检测。此外，在测试时，您需要在更改代码时清除缓存并重新启动浏览器，因为 IE 会尝试记住您网站上次使用的兼容性视图设置，而不是读取 X-UA-Compatible 值。

# windows - 如何让 gVim (Windows) 为我的插件使用“home\.vim”？

> ID：13651378
> 
> 赞同：18
> 
> 时间：2012-11-30T18:58:33.873
> 
> 标签：windows, vim, vim-plugin

我有一台运行 Windows 7 的台式机和一台运行 Mountain Lion 的 Macbook Pro。我分别使用 gVim 和 MacVim。我喜欢让我的插件和设置在机器之间保持同步，所以我将它们存储在我的 Google Drive 中，我总是可以从那里提取它们。

在我的 Mac 上，我的主文件夹中只有一个 .gvimrc 文件和一个 .vim 文件夹，Vim 会正确加载我的所有插件和设置。

然而，在我的 Windows 计算机上，Vim 将正确地从我的主文件夹中的 .ggvimrc 文件加载设置。但是如果我将插件存储在“home.vim\plugin”中，Vim 将不会加载它们。

要让插件/主题在我的 Windows 机器上运行，我需要将它们放在“C:\Program Files (x86)\Vim\vimfiles\plugin”中

我希望能够将所有内容存储在任何一台机器上的“home.vim”文件夹中，并让它正常工作。

那么有什么方法可以在我的 Windows 机器上进行设置吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-30T19:31:38.943

只要您将您的文件保存`.vimrc`在默认位置（cp. `:help vimrc`），并且只想更改插件、语法文件等的路径，您可以将以下内容放入您的`.vimrc`文件中：

```
if has('win32') || has('win64')
    set runtimepath=path/to/home.vim,$VIM/vimfiles,$VIMRUNTIME,$VIM/vimfiles/after,path/to/home.vim/after
endif 
```

你没有指定你的确切路径，所以我`path/to/home.vim`在这里使用；适应您的系统。

* * *

您同步配置的用例很常见，不同寻常的是您似乎希望将您的配置保持`.[g]vimrc`在默认位置，但只将插件等移动到其他地方。通常，子文件夹`.vimrc`和`.vim/plugins`子文件夹都被移走，人们使用符号链接（`mklink`在 Windows 上创建）从他们的主目录中引用它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-06T03:36:52.930

在您开头的某处`.vimrc`（`if has('win32') || has('win64')`如果您的文件必须在其他平台上运行，则在 a 内）

```
set runtimepath-=~/vimfiles
set runtimepath^=~/.vim
set runtimepath-=~/vimfiles/after
set runtimepath+=~/.vim/after 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T19:32:13.817

在 Windows 7 上，您必须将插件和配色方案放入：

```
C:\Users\username\_vim\ 
```

以及您的设置：

```
C:\Users\username\_vimrc 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-26T14:26:35.717

首先，我将内容`~/vimfiles`放入`~/.vim`.

然后我将它添加到我的 vimrc 中：

```
let &runtimepath.=',$HOME/.vim' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-23T02:14:21.180

在 Windows 10 上，vim 目录位于，您可以通过命令`%USERPROFILE\vimfiles`将其链接到任何其他目录。`mklink`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-19T02:04:37.733

在 Windows 上，我不使用`%USERPROFILE%`to store `.vimrc`，而是创建了一个`%HOME%`指向我的自定义目录的环境变量，并且我已经`%HOME%/.vimrc`在`%HOME%/.vim/`那里，使用`.vim/`确保 Windows git 安装中的“vim”可以直接使用它们。

Windows vim有一个默认的运行时路径入口`~/vimfiles`，`~`对应的是`%HOME%`，所以我创建一个目录符号链接如下：

> cd /d %HOME% mklink /j /d .vim vimfiles

然后我的自定义目录中的所有`.vimrc`和`.vim/`都在不同的环境中工作，为此目的没有`if has("win32")`你的东西。`.vimrc`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T17:51:10.483

由于某种原因，我无法实施您的任何建议。

我最终通过在所有机器上创建指向我的 Google Drive 文件夹的软链接来解决这个问题。现在，如果我在我的 Google Drive 文件夹中编辑我的 .vimrc 或 .vim 文件夹，它会立即反映在所有机器上。这很棒！

# asynchronous - Task.Continue 混乱

> ID：13651383
> 
> 赞同：6
> 
> 时间：2012-11-30T18:58:53.460
> 
> 标签：asynchronous, task, .net-4.5, async-await

使用 ASP.NET 4.5，我正在尝试使用新的 async/await 玩具。我有一个 IDataReader 实现类，它包装了特定于供应商的阅读器（如 SqlDatareader）。我有一个简单的 ExecuteSql() 方法，它可以像这样同步操作：

```
public IDataReader ReaderForSql(string sql)
{
    var cmd = NewCommand(sql, CommandType.Text);
    return DBReader.ReaderFactory(cmd.ExecuteReader());
} 
```

我想要的是这个的异步版本。这是我的第一次尝试：

```
public Task<IDataReader> ReaderForSqlAsync(string sql, CancellationToken ct)
{
    var cmd = NewCommand(sql, CommandType.Text);
    return cmd.ExecuteReaderAsync(ct)
              .ContinueWith(t => DBReader.ReaderFactory(t.Result));
} 
```

我用它：

```
using (var r = await connection.ReaderForSqlAsync("SELECT ...", cancellationToken))
{
    ...
} 
```

到目前为止，这在我有限的测试中效果很好。但是在看了这个 Cloud9 视频几次之后：[http](http://channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET) : //channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET 我对他们给出的警告感到担心：

*   ContinueWith 消耗额外的线程池资源 - Readerfactory 很轻！
*   任务.结果阻塞

并且由于我将 ContinuationToken 传递给 ExecuteReaderAsync() 似乎取消只是 ExecuteReaderAsync() 可能失败的另一个原因（毕竟是 SQL！）

当我尝试 ContinueWith 时，任务的状态是什么？t.Result 会阻塞吗？扔？做错事了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:06:46.393

`ContinueWith`默认情况下将使用当前任务调度程序（线程池线程），但您可以通过传递`TaskContinuationOptions.ExecuteSynchronously`和显式更改它`TaskScheduler`。

也就是说，我会首先努力：

```
public async Task<IDataReader> ReaderForSqlAsync(string sql, CancellationToken ct)
{
  var cmd = NewCommand(sql, CommandType.Text);
  var readerResult = await cmd.ExecuteReaderAsync(ct).ConfigureAwait(false);
  return DBReader.ReaderFactory(readerResult);
} 
```

`async`并以一致的方式为您`await`处理所有`ContinueWith`美味佳肴和边缘条件。**如果**性能测试表明这是一个严重的问题，则可能会使此代码复杂化以更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:39:17.720

`Result`如果任务未完成，则阻塞。但是在延续处理程序中它已经有了。所以它不会阻塞。你在做正确的事。

当您调用`Result`错误任务时（并且您说这可能会发生），将重新抛出异常。这会导致您的继续出现相同的异常，从而导致返回的最终任务`ReaderForSqlAsync`也出现错误。这是一件好事：整个任务链出现故障并且所有异常都已观察到（与被吞没相反）。所以这也是最佳实践。

使用线程进行计算密集型工作总是可以的。再说一次，您使用 ContinueWith 做的事情是正确的。毕竟你必须计算`IDataReader` *某个地方。*你不能不计算它。

# c# - 从部分获取数据

> ID：13651385
> 
> 赞同：1
> 
> 时间：2012-11-30T18:59:02.170
> 
> 标签：c#, asp.net-mvc-3

我有一个主模型，其中包含 3 个对象，每个对象都排成一个局部视图。模型被传递到具有 4 个部分的表单中，每个部分都有模型的一部分传递到其中。当我的表单提交（从主视图，而不是部分）时，我没有从控制器中的部分获取数据。有什么我想念的吗？看来我可以将数据从模型发送到部分，但在提交表单时遇到了麻烦。

```
Main View  
@model  
@Html.BeginForm  
{  
->Partial1(model.section1)  
->Partial2(model.section2)  
->Partial3(model.section3)  
->Partial4(model.section4)  
submit button  
} 
```

如果我没有很好地解释某些事情，我可以发布更多信息。
在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:53:04.370

我想出的解决方案是 EditorTemplates。这些使我能够从表格的分段部分中获取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:49:48.680

如果您的部分是集合，请参阅[http://nuget.org/packages/BeginCollectionItem](http://nuget.org/packages/BeginCollectionItem)

# c# - 表单应用程序中的长图像列表

> ID：13651387
> 
> 赞同：0
> 
> 时间：2012-11-30T18:59:12.693
> 
> 标签：c#, winforms, listview, itemrenderer, listadapter

我正在尝试用小图像填充一个大的水平列表。可能有成千上万的这些图像需要滚动浏览。我想避免分页，因为非流体运动会使区分您在列表中的位置变得棘手。

我知道 iOS、Android 和 Flex 有“列表渲染器”模式。在 Windows 窗体中完成此任务的最佳方法是什么？

列表项的大小不会统一。但大小是可预测的，无需加载控件。IE。我可以指定整个列表的宽度，而无需加载整个列表。

# c# - 如何使用 Linq 获得与 Max(value) 相邻的值？

> ID：13651392
> 
> 赞同：2
> 
> 时间：2012-11-30T18:59:34.277
> 
> 标签：c#, sql, linq

我有一张桌子：

```
Group | BasalArea | SpeciesName
1     | 3.6       | Palustris
1     | 45.0      | MSO
2     | 4.2       | Oak
2     | 2.0       | MSO
... 
```

从这张表中，我想得到由 Group 字段分组的具有最高基底面积的物种名称，如下所示：

```
Group | BasalArea | SpeciesName
1     | 45.0      | MSO
2     | 4.2       | Oak 
```

使用 SQL，我可以获得最高的基底面积：

```
SELECT Group, Max(BasalArea)
FROM TABLE
GROUP BY Group 
```

我不知道如何在不做一些循环的情况下获得物种名称。这可能吗？处理关系的策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:07:04.413

这在 LINQ2SQL 中比在 SQL 中更简单：

```
var res = source.MyTable
    .GroupBy(item => item.Group)
    .Select(g => g.OrderByDescending(item => item.BasalArea).First())
    .ToList(); 
```

`BasalArea`这将返回其中具有最大值的项目列表`Group`，以及`SpeciesName`。

在 SQL 中，您需要连接回原始表，如下所示：

```
SELECT * FROM TABLE b
JOIN (
    SELECT Group, Max(BasalArea) as BasalArea
    FROM TABLE
    GROUP BY Group
) t on t.Group = b.Group AND t.BasalArea = b.BasalArea 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:14:51.283

试试这个：

```
var froup = categories.GroupBy(g => new {g.CategoryType})
                          .Select(g => g.OrderByDescending(i => i.CategoryID).First())
                          .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:14:16.463

sasblinkenlight 说的是 LINQ。出于好奇，这里有一个潜在的 SQL 解决方案。

```
SELECT grouped.Group, raw.SpeciesName, grouped.MaBasalArea
FROM (
        SELECT Group, MAX(BasalArea) as MaxBasalArea
        FROM TABLE
        GROUP BY Group
     ) grouped
INNER JOIN TABLE raw ON grouped.MaxBasalArea = raw.BasalArea AND grouped.Group = raw.Group 
```

# sql - First() 函数使用什么顺序？

> ID：13651394
> 
> 赞同：5
> 
> 时间：2012-11-30T18:59:37.397
> 
> 标签：sql, ms-access, ms-access-2007

为什么以下两个查询返回相同的结果？

```
SELECT FIRST(score) FROM (SELECT score FROM scores ORDER BY score ASC)
SELECT FIRST(score) FROM (SELECT score FROM scores ORDER BY score DESC) 
```

考虑到我手动指定子查询的顺序，这很令人困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:01:57.077

子查询中结果的顺序是无关紧要的，除非您在子查询中使用 TOP，而您在这里没有这样做。大多数 SQL 变体不允许这种语法——例如，在子查询中使用 ORDER BY 会在 SQL Server 中引发错误。

您的顶级查询没有 ORDER BY，因此 FIRST 或 TOP 1 的概念在*该*查询的上下文中未定义。

在[参考文档](http://msdn.microsoft.com/en-us/library/office/bb177902%28v=office.12%29.aspx)中，微软声明（强调我的）：

> 因为记录通常不按特定顺序返回（除非查询包含 ORDER BY 子句），所以这些函数返回的记录将是**任意**的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-17T13:57:39.697

**直接回答问题：**

Access 会忽略`ORDER BY`大多数子查询中的子句。我相信（但无法证明）这是由于查询优化器中的错误/限制，尽管它没有在任何地方记录（我可以找到）。我已经使用 Access 2007 和 Access 2016 测试了很多 SQL 来得出这个结论。

**要使示例按预期工作：**

添加`TOP 100 PERCENT`到子查询：

```
SELECT FIRST(score) FROM (SELECT TOP 100 PERCENT score FROM scores ORDER BY score ASC)
SELECT FIRST(score) FROM (SELECT TOP 100 PERCENT score FROM scores ORDER BY score DESC) 
```

**何时使用`First`/`Last`而不是`Max`/ `Min`：**

当你想要使用这种方法而不是更简单的聚合函数时，一个很好的例子是当`Min`你`Max`想要来自同一记录的另一个字段时，例如，如果基础`scores`表还`name`包含玩家的`round`s 和游戏的 s ，你可以像这样得到最好`name`和`score`最差玩家的和`round`：

```
SELECT
  round, FIRST(name) AS best, FIRST(score) AS highscore, LAST(name) AS worst, LAST(score) AS lowscore
FROM
  (SELECT TOP 100 PERCENT * FROM scores ORDER BY score DESC)
GROUP BY
  round 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-30T20:54:04.210

您的陈述是和的完美**功能等价**物。 如果您真的想检索第一个和最后一个分数，您将需要一个 AutoNumber 或一个 DateTime 字段来指示输入顺序。然后您可以查询：
`SELECT Min(Score) FROM Scores`
`SELECT Max(Score) FROM Scores`

```
SELECT First(Score), Last(Score) FROM Scores ORDER BY MySortKey 
```

如果你坚持你的问题，正确的语法应该是
`SELECT FIRST(score) FROM (SELECT score FROM scores) ORDER BY score ASC`，
或者，简化，
`SELECT FIRST(score) FROM scores ORDER BY score ASC`

# php - htaccess 大写 URL 转小写

> ID：13651395
> 
> 赞同：3
> 
> 时间：2012-11-30T18:59:39.210
> 
> 标签：php, apache, .htaccess, seo

在网站上有文件夹*products/*里面是带有一些大写字符的 php 文件。

**示例：** *www.example.com/products/BIT-Defendar.php*

现在这个网址已经存在多年并且遍布搜索引擎。这是产品经理的错误。

但我想解决这个问题，我只想要小写的 URL。

这会解决我的问题吗？`CheckSpelling On` `CheckCaseOnly On` **(1)**

和上面提到的有**什么不同**：**（2）**

```
RewriteMap tolowercase int:tolower 
RewriteRule ^(.*)$ ${tolowercase:$1} 
```

如果我使用**（1）**，那么所有工作都会失败，我请求 url 小写或大写*（但我会有搜索引擎问题吗？）*

如果我使用**(2)**，我必须将*products/*文件夹中的所有文件重命名为小写。

**- - 编辑 - -**

当我使用时`RewriteRule`，如果 url 是大写的，我会转移到域根目录，如果我使用`CheckSpelling`然后`CheckCaseOnly`一切正常。

我已经[对此进行了测试](http://htaccess.madewithlove.be/)**，** 我得到：

```
RewriteCond %{REQUEST_URI} [A-Z] 
```

*- 满足这个条件*

```
RewriteRule (.*) ${tolowercase:$1} [R=301,L] 
```

*- 符合这条规则，新的 url 是[http://www.example.com/](http://www.example.com/) ${tolowercase:products/BIT-Defendar.php}*

*- 由于 RewriteRule 选项中的 R，测试已停止。将使用状态码 301 进行重定向*

**我的设置`httpd.conf`：**

```
<VirtualHost *:80>
 RewriteMap tolowercase int:tolower
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:06:46.413

[使用 CheckSpelling 和/或 CheckCaseOnly 指令可能会导致不希望的](http://httpd.apache.org/docs/2.2/mod/mod_speling.html)结果，如下文底部所述：

```
1, performance issues
2, some files might be skipped
3, some files might be misinterpreted 
```

我认为允许 apache 为您进行更正是不明智的，因为您依赖 apache 为每次查找搜索目录和文件，而使用小写映射，它可以让您完全控制并创建严格的标准。

我建议添加一个标志`[R=301]`，通知搜索引擎这是新文件，并且您不会遇到任何与搜索引擎相关的问题：

```
RewriteMap tolowercase int:tolower 
RewriteRule ^(.*)$ ${tolowercase:$1} [R=301,L] 
```

您将不得不重命名您的文件，因为它们将不再被识别，但您可以编写一个简单的脚本来扫描所有文件，并将它们重命名为小写。

# javascript - 新的 Coffeescript 文件干扰其他 JS

> ID：13651397
> 
> 赞同：0
> 
> 时间：2012-11-30T18:59:43.827
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, coffeescript

在我的应用程序中，我使用下面的代码来提供展开/折叠功能。

在我的 .js 文件之一中：

```
$(document).ready(function(){

    $('.row .bundle').on('click', function(e) {
        e.preventDefault();
        var $this = $(this);
        var $collapse = $this.closest('.collapse-group').find('.collapse');
        $collapse.collapse('toggle');
    });

}); 
```

在视图中，围绕我想要扩展的任何内容：

```
<div class="row" style="text-align:center">
 <div class="collapse-group">
    <h4 class="normal_links">
        <a class="bundle" href='#'>(Expand)</a>
    </h4><br>
  <div class="collapse normal_links" >
    # Code to expand/collapse here
  </div>
 </div>
</div> 
```

在我开始使用 morris.js 库向我的应用程序引入一些图表之前，它就像一个魅力一样工作，此时展开/折叠（因此强制 EC）功能停止在每个页面上工作，而不是我的图表显示的页面。当我说 EC 不起作用时，我的意思是当我单击展开链接时，它只是跟随它到 '#'。

我的 morris.js 代码，在图表所属模型的 animal.js.coffee 文件中：

```
jQuery ->
Morris.Donut
  element: 'weight_chart'
  data: [
    {label: "Pounds Sold", value: $('#weight_chart').data('sold')}
    {label: "Pounds Left", value: $('#weight_chart').data('left')}
  ]
  colors: ['#0066CC', "#880000"]

Morris.Donut
  element: 'sales_chart'
  data: [
    {label: "Revenue Made", value: $('#sales_chart').data('sold')}
    {label: "Est. Revenue Left", value: $('#sales_chart').data('left')}
  ]
  colors: ["#336633", "#880000"]

Morris.Donut
    element: 'status_chart'
    data: [
        {label: "Incomplete", value: $('#status_chart').data('zero')}
        {label: "Downpaid", value: $('#status_chart').data('one')}
        {label: "Fully Paid", value: $('#status_chart').data('two')}
        {label: "Received", value: $('#status_chart').data('three')}
    ]
    colors: ["#880000", '#E09050', '#989898', '#000000' ] 
```

我如何在视图中实际调用图表的示例：

```
 <%= content_tag :div, "", id: "sales_chart", 
       data: {sold: @animal.rev.round(2), 
              left: @animal.rev_left.round(2)}, 
       class: "morris_chart" %> 
```

图表显示完美，与图表页面上的 EC 一样。在似乎每隔一页上，不是。当我使用 morris 代码（暂时）删除 animal.js.coffee 文件时，问题就消失了。我已经三次检查了我的视图代码，一切都很好（或者至少与正在运行的代码相同）。

可能更令人感兴趣的是，当它工作时，那里曾经是一个空的 animal.js 文件，我用带有 morris 相关代码的 animal.js.coffee 文件替换了它。实际的 morris.js 和 raphael.js 代码在 vendor/javascripts 中。EC javascript 代码完全位于另一个模型的 .js 文件中，但到目前为止这还不是问题。

有任何想法吗？我将离开我的电脑几个小时，但是当我回来时，我会发布任何人想要的任何其他代码。

编辑——认为我的 application.js 文件也可能是相关的：

```
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require raphael
//= require morris
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:00:51.583

问题似乎是 Coffeescript 正在寻找它没有出现的页面上的元素（“sales_chart”等）。发生这种情况时，事情出了问题，我的其他 Javascript 都没有工作。为了解决这个问题，我所要做的就是在调用 Morris 之前检查该元素。所以：

```
jQuery ->

    if $('#weight_chart').length
      Morris.Donut
        element: 'weight_chart'
        data: [
          {label: "Pounds Sold", value: $('#weight_chart').data('sold')}
          {label: "Pounds Left", value: $('#weight_chart').data('left')}
        ]
        colors: ['#0066CC', "#880000"]

    if $('#sales_chart').length
      Morris.Donut
        element: 'sales_chart'
        data: [
          {label: "Revenue Made", value: $('#sales_chart').data('sold')}
          {label: "Est. Revenue Left", value: $('#sales_chart').data('left')}
        ]
        colors: ["#336633", "#880000"]

    if $('#status_chart').length
      Morris.Donut
        element: 'status_chart'
        data: [
          {label: "Incomplete", value: $('#status_chart').data('zero')}
          {label: "Downpaid", value: $('#status_chart').data('one')}
          {label: "Fully Paid", value: $('#status_chart').data('two')}
          {label: "Received", value: $('#status_chart').data('three')}
        ]
        colors: ["#880000", '#E09050', '#989898', '#000000'] 
```

问题解决了。感谢您的帮助，以及学习 Coffeescript 的借口！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:50:51.820

尝试将您的 animal.js.coffee 更改为此，它具有正确的缩进，可以将您的 Morris 调用放置在您传递给 jQuery 的函数中。

```
jQuery ->
  Morris.Donut
    element: 'weight_chart'
    data: [
      {label: "Pounds Sold", value: $('#weight_chart').data('sold')}
      {label: "Pounds Left", value: $('#weight_chart').data('left')}
    ]
    colors: ['#0066CC', "#880000"]

  Morris.Donut
    element: 'sales_chart'
    data: [
      {label: "Revenue Made", value: $('#sales_chart').data('sold')}
      {label: "Est. Revenue Left", value: $('#sales_chart').data('left')}
    ]
    colors: ["#336633", "#880000"]

  Morris.Donut
    element: 'status_chart'
    data: [
        {label: "Incomplete", value: $('#status_chart').data('zero')}
        {label: "Downpaid", value: $('#status_chart').data('one')}
        {label: "Fully Paid", value: $('#status_chart').data('two')}
        {label: "Received", value: $('#status_chart').data('three')}
    ]
    colors: ["#880000", '#E09050', '#989898', '#000000' ] 
```

# r - R - 匹配不同长度矩阵的行和列

> ID：13651402
> 
> 赞同：2
> 
> 时间：2012-11-30T19:00:00.643
> 
> 标签：r, matrix, social-networking, adjacency-matrix, sna

我目前的问题如下。我有一个有向 1-mode 边缘列表，表示在某一年参与联合项目的演员对，可能看起来像：

```
projektleader   projectpartner  year
A               B               2005
A               C               2000
B               A               2002
...             ...             ... 
```

现在我只需要一个特定年份的子集。并非所有参与者都在这一年活跃，因此子集的维度不同。对于后续的网络分析，我需要一个加权的有向邻接矩阵，所以我使用 [network package] 的选项来创建它。我首先将其加载为网络对象，然后将其转换为邻接矩阵。

```
grants_00 <- subset(grants, (year_grant=2000), select = c(projectpartner, projectleader))
nw_00 <- network(grants_08to11[,1:2], matrix="edgelist", directed=TRUE) 
grants_00.adj <- as.matrix(nw_00, matrix.type = "adjacency") 
```

结果矩阵看起来有点像

```
 A    B    C    E    ...
A    0    1    1    0
B    1    0    0    0
... 
```

到目前为止，一切都很好。我现在的问题是：对于我计划做的进一步分析，我需要一个具有相同维度和顺序的每一年的邻接矩阵。这意味着来自初始数据集的所有参与者都必须是相应年份的矩阵的行名和列名，但矩阵应该只包含这一特定年份的观察对。我希望我的问题很清楚。我很欣赏任何建设性的解决方案。

我的想法 ATM 如下：我创建了一个初始数据集和缩减数据集的矩阵。然后我将那里的所有矩阵值设置为零。然后我以某种方式将它与缩减矩阵匹配，并在正确的行和列中填充正确的值。不幸的是，我不知道这怎么可能。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T00:53:35.623

不幸的是，你的问题不清楚，所以我会尽力回答。

如果我明白你想要：

****给定一个大小矩阵：找到它们匹配的位置？****

# 我重新生成你的数据

```
library(network)
N <- 20
grants <- data.frame(
        projectleader  = sample(x=LETTERS[1:20],size=N,replace = TRUE),
        projectpartner = sample(x=LETTERS[1:20],size=N,replace = TRUE),
        year_grant     = sample(x=0:5          ,size=N,replace = TRUE) +2000
)

head(grants)
  projectleader projectpartner year_grant
1             D              K       2002
2             M              M       2001
3             K              L       2005
4             N              Q       2002
5             G              D       2003
6             I              B       2004 
```

# 创建小矩阵的函数

```
## 
adjency <- function(year){
  grants_00 <- subset(grants, (year_grant==year),
        select = c(projectpartner, projectleader))
  nw_00 <- network(grants_00, matrix="edgelist", directed=TRUE) 
  grants_00.adj <- as.matrix(nw_00, matrix.type = "adjacency")
  as.data.frame(grants_00.adj)
} 
```

# 使用 plyr 获取每年的列表

```
library(plyr)
years <- unique(grants$year_grant)
years <- years[order(years)]
bigMatrix <- llply(as.list(years),.fun=adjm) 
```

# 创建完整矩阵（[答案](https://stackoverflow.com/questions/10943338/extending-converting-a-sparse-matrix-into-a-larger-sparse-matrix)）

```
# create an empty matrix with NAs
population <- union(grants$projectpartner,grants$projectleader)
population_size <- length(population)
full_matrix <- matrix(rep(NA, population_size*population_size), 
       nrow=population_size)
rownames(full_matrix) <- colnames(full_matrix) <- population 
```

# 找到它们匹配的位置

```
frn <- as.matrix(bigMatrix[[1]])

tmp <- match(rownames(frn), rownames(full_matrix))
tmp2 <- match(colnames(frn), colnames(full_matrix))

# do a merge
full_matrix[tmp,tmp2] <- frn

head(bigMatrix[[1]])
  D I J K O Q S
D 0 0 0 0 0 0 0
I 0 0 0 0 0 0 0
J 1 0 0 0 0 0 0
K 0 0 0 0 0 0 0
O 0 0 0 1 0 0 0
Q 0 1 0 0 0 0 0 
```

# 完整的矩阵

```
 K  M  L  Q  D  B  E  J  C  S  O  F  G  N  I  A  H
K  0 NA NA  0  0 NA NA  0 NA  0  0 NA NA NA  0 NA NA
M NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
L NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
Q  0 NA NA  0  0 NA NA  0 NA  0  0 NA NA NA  1 NA NA
D  0 NA NA  0  0 NA NA  0 NA  0  0 NA NA NA  0 NA NA
B NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
E NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
J  0 NA NA  0  1 NA NA  0 NA  0  0 NA NA NA  0 NA NA
C NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
S  0 NA NA  1  0 NA NA  0 NA  0  0 NA NA NA  0 NA NA
O  1 NA NA  0  0 NA NA  0 NA  0  0 NA NA NA  0 NA NA
F NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
G NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
N NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
I  0 NA NA  0  0 NA NA  0 NA  0  0 NA NA NA  0 NA NA
A NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
H NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA 
```

# c# - 一个表中的一个外键用于 2 个不同的字段

> ID：13651404
> 
> 赞同：1
> 
> 时间：2012-11-30T19:00:01.550
> 
> 标签：c#, database, sqlite, foreign-keys

有没有办法让我在一个表中只创建一个外键来引用同一个表中的 2 个不同字段

示例：表：家庭

身份证 | 鸟| 高分辨率照片| CLIPARTO 鸟妈妈 | 鸟爸爸

1_ **__ *X* __ *_* __** *2* ***_* __ *_* __** _3

2_ ***_* __** *A* ***_* ___** *4* ***_* __ *_* ___** _5

3____B

4____M

5____N

ID 是主要和自动增量，也是“bird_mom”和“bird_dad”字段的外键。因此，当我更改条目 X、A、B、M、NI 时，不需要在任何地方更改它，但它始终会被外键 ID 识别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:22:48.373

通常，“[外键](http://www.sqlite.org/foreignkeys.html)”是指向父字段的子字段的名称，因此您将有*两个*外键：

```
CREATE TABLE family (
    ID INTEGER PRIMARY KEY,
    bird TEXT,
    bird_mom INTEGER REFERENCES family(ID),
    bird_dad INTEGER REFERENCES family(ID)
) 
```

# mysql - Mysql Query：从特定日期识别可用车辆

> ID：13651407
> 
> 赞同：0
> 
> 时间：2012-11-30T19:00:11.217
> 
> 标签：mysql, database, date, between

我有一个名为**trips**的表，您可以在其中使用指定的`departure_date`和保存行程`return_date`。车辆保存在**车辆**表中。我需要查询在特定日期可用的所有车辆，以便如果车辆被选择用于特定旅行，则在返回之前*不能*再次用于另一次旅行。
我的表结构是这样的

表：**行程**

```
id
vehicle_id
departure_date
return_date 
```

表：**车辆**

```
id  
plate_no 
```

我尝试使用以下命令进行查询，但它似乎不起作用：

```
select v.id from vehicles as v
where v.id not in
    (select vehicle_id from trips
     where (departure_date between '2012-10-31 10:41:30' AND '2012-11-06 10:41:38')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:02:04.100

尝试这个：：

```
select 
v.id 
from 
vehicles as v 
left join trips t on (v.id=t.vehicle_id)
where 
t.departure_date between '2012-10-31 10:41:30' AND '2012-11-06 10:41:38' 
and t.id is null 
```

# c++ - 列表视图中的 CListCtrl 垂直滚动条

> ID：13651410
> 
> 赞同：5
> 
> 时间：2012-11-30T19:00:17.153
> 
> 标签：c++, mfc, scroll, clistctrl

我在“列表”视图模式下有一个 CListCtrl，我无法让它垂直滚动而不是水平滚动。

我在这里尝试过建议：[CListCtrl 中的垂直滚动条，](https://stackoverflow.com/questions/1806669/vertical-scrollbar-in-clistctrl)但这仅在使用图标视图模式时有效。它在列表模式下不起作用。

那么，如何让我的 CListCtrl 在列表视图模式下垂直滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T12:22:36.667

你试过这个吗？“将设计器中的对齐样式从左更改为上。” [CListCtrl 中的垂直滚动条](https://stackoverflow.com/questions/1806669/vertical-scrollbar-in-clistctrl)

# android - 如何从 Android 中的另一个 Activity 访问 Class 方法？

> ID：13651416
> 
> 赞同：0
> 
> 时间：2012-11-30T19:00:37.610
> 
> 标签：android, methods

我的应用程序包含两个类：MainActivity、Activity2。
Activity2 需要访问 MainActivity 的一个非静态方法。怎么做？

我是Java和Android的新手，如果可以的话，请为初学者解释清楚该怎么做。
提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:32:32.817

当 B 从 A 启动时，您应该使用[Bundles将值从 ActivityA 传递给 ActivityB，而不是从不同的 Activity 调用方法。](http://developer.android.com/reference/android/os/Bundle.html)

或者，如果您想重用代码，您应该创建一个可以创建两个实例的非活动对象。假设您在这两个活动中都进行了大量繁重的计算，您可以将计算代码放在“计算”对象中。就像你对任何其他 Java 对象一样启动它。请注意，这两个实例之间不会共享任何数据。

```
Calculate calc = new Calculate();
calc.codeIdLikeToReuse(numbersAndStuff); 
```

希望这可以帮助。我建议您阅读[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)，以了解活动的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:06:07.847

使用广播接收器调用不同活动中的方法，您可以在[此处](http://developer.android.com/reference/android/content/BroadcastReceiver.html)找到帮助 和一个[示例](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:07:56.550

基本上，你不能那样做。两个活动不以这种方式交流。通常，一次只有一个活动处于活动状态（也可能并非总是如此）。真正的答案是使用 Intents。

您应该阅读一些基本的 Android 教程，例如[anddev book](http://andbook.anddev.org/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-15T07:23:49.117

您还可以使用[EventBus](https://github.com/greenrobot/EventBus)之类的库来链接代码。参考[这篇文章](https://stackoverflow.com/a/40602228/6521116)

# java - 如何将 wkhtmltopdf 集成到我的 java web 应用程序中？

> ID：13651419
> 
> 赞同：4
> 
> 时间：2012-11-30T19:00:55.987
> 
> 标签：java, wkhtmltopdf, html-to-pdf

我正在尝试使用 HTML 从 HTML 生成 PDF 文档`wkhtmltopdf`。但我无法弄清楚如何集成`wkhtmltopdf` 到我的 web 应用程序中，因为作者提供的文件中没有`jar`文件`tar`。有人可以帮我设置吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T19:22:58.203

wkhtmltopdf 程序以独立可执行文件的形式提供。它使用[Qt 库中的 Qt Webkit 模块](http://doc.qt.digia.com/qt/qtwebkit.html)来呈现 HTML 并生成 PDF 输出。它是用 C/C++ 编写的，因此您将无法找到任何 JAR 文件。

您可以将 HTML 保存到一个临时文件，使用 Runtime.exec() 或 ProcessBuilder 从 Java 派生一个新进程，当该进程完成时，读取 PDF 文件。

Qt Jambi 的[QWebView](http://doc.qt.digia.com/qtjambi-4.5.2_01/com/trolltech/qt/webkit/QWebView.html)类也可能对您有所帮助。或者，您可以在 C 中在 Qt Webkit 上实现自己的包装器，并使用 JNI 创建 Java 绑定，以便从 Java 进程内调用它。

根据目标环境，您必须评估是否可以负担得起从 Java 派生进程或实现本机调用的费用，因为这可能存在安全风险。

# jquery - 如何从 Zepto 回退到 Google CDN jQuery 到本地 jQuery？

> ID：13651422
> 
> 赞同：7
> 
> 时间：2012-11-30T19:01:12.353
> 
> 标签：jquery, zepto

我已经看到指导或询问如何从 Zepto 回退到 jQuery（尤其是 IE）的页面，如[SO](https://stackoverflow.com/questions/8725905/zepto-fallback-to-jquery)上的此处和[Zepto.js 官方页面](http://zeptojs.com)上的此处。
我还看到了有关如何从 Google 托管的 jQuery 回退到本地站点 jQuery 的示例，例如[Modernizr.load doc page](http://modernizr.com/docs/)。

我的问题是，我如何把这两个东西放在一起？也可能不使用 Modernizr.load，只使用适当的`<script>`块？

这是我想出的，但似乎 IE 从未找到 Google 托管的版本。另外，我不确定`Zepto = jQuery`作业是否正常。

```
<script>
    document.write('<script src=' +
        ('__proto__' in {} ? 
            'js/vendor/zepto.min' : 
            'https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min') +
        '.js><\/script>');
</script>
<script>
    if (window.jQuery) { 
        window.Zepto = window.jQuery; /* let jQuery alias Zepto */ 
    }
    else
    { /* here jQuery could be rightly undefined because Zepto is loaded, 
         so this could be wrong. */
        document.write('<script src=' +
            'js/vendor/jquery-1.8.0.min' +
            '.js><\/script>');
    }
</script>
<script>
    if (window.jQuery) { 
        window.Zepto = window.jQuery; /* let jQuery alias Zepto */ 
    }
    else
    {
        /* same problem as before */
        console.error('Zepto nor jQuery available!');
    }
</script> 
```

有没有更好的办法？助教

**编辑**

在@Ashfame 回答之后，这就是我用过的：

```
<!-- Load local Zepto.js or (as a fallback) jQuery from Google CDN or (as a fallback) local jQuery -->
<script>
    document.write('<script src="' + ('__proto__' in {} ? 
        'js/vendor/zepto' : 
        'http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery') + 
        '.min.js"><\/script>')
</script>
<script>
    window.Zepto || window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><\/script>');
</script> 
```

我无法使用 Google CDN 的无协议/无方案 URL，因为由于某种原因它在我的本地 IE9 上不起作用（它等待了很多，然后总是回退到本地）。

我不再`Zepto`使用`jQuery`: 别名了，只是`$`在 JS 代码中使用。

我似乎没有遇到任何与 jQuery 乱序加载 wrt 依赖代码相关的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T20:10:17.507

**为了尝试这种技术，我会先试试这个：**

我按照 jQuery CDN 关闭时 HTML5 Boilerplate 如何加载本地回退的方式快速编写了这篇文章。

这可能行不通，但我看不出它现在不应该的任何理由。想试一试吗？

```
<script>document.write('<script src="' + ('__proto__' in {} ? 'cdn/zepto.min' :  'cdn/jquery.min') + '.js">\x3Cscript>');</script>
<script>window.Zepto || window.jQuery || document.write('<script src="cdn/jquery.min.js">\x3C/script>')</script>
<script>window.Zepto || window.jQuery || document.write('<script src="local/jquery.min.js">\x3C/script>')</script> 
```

唯一不能很好处理的情况是，当用户使用不兼容 Zepto 的浏览器（如 IE 和同时 jQuery CDN 关闭时），它会尝试再次加载 jQuery CDN，然后最终回退到本地jQuery的副本。

* * *

但实际上，如果我要实现这一点，我只会有 1 个单一的后备到本地。就像尝试检查我们是否可以加载 Zepto 或 jQuery，并且在下一步中，如果它们都没有加载，则加载本地库。最好有一些工作到位，而不是试图优化不会带来那么多收益的东西。明智地优化！上述技术#1 很可能有自己的跨浏览器兼容性问题。

* * *

我刚刚发现了这个问题，即使这种技术（被 HTML5 Boilerplate & Modernizr 使用和推荐）也不可靠。检查这个问题 - [document.write fallback 导致 jQuery 无序加载](https://stackoverflow.com/questions/12323121/)

该问题的另一个解决方案是关于图书馆 Yepnope。您可以检查它是如何工作的 - [https://stackoverflow.com/a/12323328/551713](https://stackoverflow.com/a/12323328/551713)

最后，我要结束这个答案，除非你正在构建完全是你的代码的东西，比如不会因为用户在页面上添加更多东西的可能性而陷入困境，否则不要太为它烦恼，因为您将很快遇到此类技术的问题，因为其他脚本可能会乱序加载并导致问题，而如果它是您的所有代码，您可能可以根据您的后备逻辑使所有内容加载和工作。

# r - 每个主题对一个宽变量的计数求和一次

> ID：13651426
> 
> 赞同：1
> 
> 时间：2012-11-30T19:01:27.663
> 
> 标签：r, data.table

我有一个主题数据集`subjects`，其中包含一组与受试者服用的药物相对应的变量。从这个广泛的变量中，我创建了数据集中所有药物的唯一集合（无论它来自哪个特定变量）。我想找到每个 med 的主题计数，这样如果一个主题列出一次或多个 med ，则该计数增加一。

下面是一种缓慢的方法，但我有 9 个医学变量和超过 50,000 个受试者。有人可以帮我找出更有效的方法吗？谢谢。

```
subjects <- data.table(
 med1= as.factor(c("NASONEX","ALBUTEROL","","BENADRYL","THEODUR")),
 med2= as.factor(c("","ALBUTEROL","ASBRON","NASONEX","MONTEKULAST")),
 medrecent= as.factor(c("MONTEKLUAST","","","THEODUR",""))
 )

 medvarnames <- c("med1","med2","medrecent")

 allmeds <- data.table(
 med=subjects[,unique(unlist(sapply(.SD,levels))), .SDcols=medvarnames],
 count=0
 )

 for(i in 1: dim(subjects)[1]){
 allmeds[, count := count +
 sapply(allmeds$med,function(.m){
 as.integer(
 any(.m == subjects[i,.SD,.SDcols=medvarnames],na.rm=TRUE)
 )
 })
 ]
 }

 allmeds
           med count
1:                 4
2:   ALBUTEROL     1
3:    BENADRYL     1
4:     NASONEX     2
5:     THEODUR     2
6:      ASBRON     1
7: MONTEKULAST     1
8: MONTEKLUAST     1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:18:59.060

关于什么

```
as.data.frame(table(unlist(apply(subjects, 1, unique)))) 
```

可能有更快的方法，但它在您提到的 50,000 x 9 表上做得不错（约 1.5 秒）。

# google-analytics - Google Analytics Adwords 数据终身存储？

> ID：13651430
> 
> 赞同：2
> 
> 时间：2012-11-30T19:01:34.147
> 
> 标签：google-analytics, google-ads-api

有人知道 Google 会将来自 Analytics/Adwords 等帐户的数据存储多长时间？在任何地方都找不到它，也不敢相信他们会永远保存它。例如，很高兴看到 30 年后我在 2010 年有多少访客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-17T13:51:18.257

Google 通常不会删除您的帐户或您帐户中的数据。但是，也有例外：

*   如果您严重违反服务条款，Google 可能会关闭您的整个 Google 帐户。这甚至可能是偶然发生的。请参阅[谷歌帮助论坛上的投诉](https://productforums.google.com/forum/#!topicsearch/deleted$20terms$20of$20service$20violations)。

*   关于 AdWords，Google 于 2015 年 3 月开始[删除未使用的实体](https://support.google.com/adwords/answer/6172751?hl=en)。（“我们只会删除从未累积过展示次数且已被删除超过 100 天的实体。”）

不能保证谷歌会终生存储你的数据（谁知道互联网或谷歌在 30 年后是否仍然存在？），但谷歌不太可能删除它。我见过自 2005 年以来未使用过的 AdWords 帐户，但所有数据仍然存在。

# java - 如何通过 Fedora 16 上的守护进程登录 X Window

> ID：13651438
> 
> 赞同：1
> 
> 时间：2012-11-30T19:02:04.650
> 
> 标签：java, login, x11, kde, fedora16

我在一个带有中央控制站的分布式系统上工作。在这个中央控制站上，我们有软件可以连接到任意数量的运行 Fedora 16 的远程计算机和一个专门的 SystemD 守护程序。连接后，控制站向这些守护程序发送消息，以启动用于用户与中央控制站交互的各种 GUI 系统。

目前这有一个巨大的缺点，因为这些远程计算机需要特定用户登录才能启动 GUI。此用户与运行 SystemD 守护程序的用户相同。如果这些远程计算机未登录，我们会收到以下 java 错误：

`Can't connect to X11 window server using ':0' as the value of the DISPLAY variable.`

该守护程序是用 Java 编写的（使用最新的 java 7）并使用以下代码来启动 GUI：

```
String command = "java -Xmx2000M -cp ...{java classes etc to run}"
ProcessBuilder pb = new ProcessBuilder(command.split("\\s+"));
pb.redirectErrorStream(true);
pb.environment().put("DISPLAY", ":0.0");
try
{
  p = pb.start();
... 
```

当用户正确登录时，这是正确的 DISPLAY 变量。daemon本身不知道有Display是因为什么时候启动的，所以我们目前在ProcessBuilder中设置DISPLAY变量

是否有某种方法可以通过 java 或通过我的守护程序以其他方式正确连接/登录到 X11 Window 服务器，以便这些系统在运行之前不需要手动登录。

目前，所有这些系统在启动 KDE 时都会以适当的用户身份自动登录，但这不是一个非常安全的解决方案，人们倾向于随意注销它们，从而阻止它们充当远程站点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:12:55.207

编辑 /etc/inittab 使 X 以 OS 开头。[指示](http://www.debianadmin.com/how-to-auto-login-and-startx-without-a-display-manager-in-debian.html)

在您的主目录中创建文件 .Xinitrc。从它启动你的守护进程，如果你需要窗口管理器也启动它。

# wpf - 为什么应用样式后无法更改文本框背景？

> ID：13651440
> 
> 赞同：3
> 
> 时间：2012-11-30T19:02:06.217
> 
> 标签：wpf, xaml, textbox, styles

```
<Style x:Key="Border"
       TargetType="{x:Type TextBox}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type TextBox}">
        <Border BorderThickness="1">
          <ScrollViewer Margin="0"
                        x:Name="PART_ContentHost" />
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

`TextBox`为什么应用样式后无法更改背景？

```
<TextBox Style="{StaticResource Border}"
         Background="Bisque"
         Height="77"
         Canvas.Left="184"
         Canvas.Top="476"
         Width="119">Text box</TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:04:29.860

```
<Style x:Key="Border" TargetType="{x:Type TextBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBox}">
                <Border Background="{TemplateBinding Background}" BorderThickness="1">
                    <ScrollViewer Margin="0" x:Name="PART_ContentHost" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

您需要添加以下行：

```
Background="{TemplateBinding Background}" 
```

您覆盖了文本框的原始控制**模板**。**背景**是**Template**的子级。您需要再次将其绑定到目标文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:02:49.417

通过覆盖控件的模板，您实际上是在定义它将如何显示给用户。在您的模板中，您不考虑控件中的任何“设置”，因此它将始终绘制为带有 ScrollViewer 的 Border。

如果要使用控件的属性来自定义模板的某些部分，可以使用将模板内容的属性绑定到控件中的属性`TemplateBinding`

前任：

```
<Style x:Key="Border"
       TargetType="{x:Type TextBox}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type TextBox}">
        <Border BorderThickness="1"
                Background="{TemplateBinding Background}">
          <ScrollViewer Margin="0"
                        x:Name="PART_ContentHost" />
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

在这种情况下，您将 Border ( `Background=`) 的 Background 属性绑定到 TextBox ( `{TemplateBinding Background`)的 Background 属性

因此，总而言之，您在绑定中使用此表示法：

```
ThePropertyIWantToSet="{TemplateBinding PropertyInMyControl}" 
```

# asp.net - Asp.net 在设计时从父窗体为自定义 UITypeEditor 设置一些上下文

> ID：13651441
> 
> 赞同：0
> 
> 时间：2012-11-30T19:02:11.943
> 
> 标签：asp.net, visual-studio, design-time, uitypeeditor

试图为我们的设计师设计一种方法来为我们的客户创建自定义的 asp.net 网络表单。基本思想是我们有一组可以保存的通用字段，每个客户使用这些字段的子集，每个客户可能有自己的名称来表示相似的概念（即一个客户可能使用“患者”而另一个“客户” '）。停留在客户环境中将帮助设计师构建正确的表单以满足客户的需求。

现在要做到这一点，我需要尽可能多地融入设计经验。我有一组自定义控件，它们派生自诸如 asp:TextBox 之类的基本控件，并实现了一个接口以允许我迭代控件并从数据存储中插入值，或获取值以持久保存（完成）。所有这些控件都需要绑定到我的记录对象中的一个数据点。我设置了一个元数据系统以允许绑定，但我遇到麻烦的地方是将可用字段列表放入 UITypeEditor。也就是说，我还没有弄清楚如何（在设计时）在表单上设置客户上下文，然后在每个控件自定义属性编辑器上访问和使用该值（也在设计时）。这可能吗？我是否以错误的方式看待这个问题？一个表单总是有 1 个且只有一个客户上下文。

第二个问题是如何调试这些编辑器？编辑器中存在 Web 上下文的期望，但没有 asp.net 属性网格。即使有，编辑器也是不会在浏览器中运行的 winforms 组件。

如果它简化了问题，我可以包含我当前拥有的代码，但即使是简化的示例也是六个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:55:02.063

我解决了这些问题，在这里发布，以防通用解决方案将来对任何人都有用。

我可以通过另一种方式解决这个问题。我的父 Page 遍历它的控件，并在所有实现特定接口的控件上设置 CustomerId。

至于调试。一些重构让我可以轻松地将实现的 webforms 特定部分换出进行测试。

# sql - 多个左连接 - 如何？

> ID：13651446
> 
> 赞同：1
> 
> 时间：2012-11-30T19:02:41.563
> 
> 标签：sql, ruby-on-rails, join, sum, left-join

我有一个在 Heroku 运行的 Rails 应用程序，我正在尝试计算用户在高分列表中的排名（位置）。

该应用程序是用户相互下注的地方，可以开始下注（创建一个选择），或者他们可以对一个已经创建的选择下注（通过下注）。

我有以下SQL，它应该根据他们在Choices 和Bets 上的总奖金给我一个用户数组。但它给了我一些错误的总奖金，我认为问题出在Left Joins 因为如果我将SQL 重写为只包含 Choice 或 Bet 表，然后我就可以正常工作了..

任何人都知道如何重写 SQL 以使其正常工作:)

```
SELECT users.id, sum(COALESCE(bets.profitloss, 0) + COALESCE(choices.profitloss, 0)) as total_pl
FROM users
LEFT JOIN bets ON bets.user_id = users.id
LEFT JOIN choices ON choices.user_id = users.id
GROUP BY users.id
ORDER BY total_pl DESC 
```

结果：

```
+---------------+
| id | total_pl |
+---------------+
|  1 |      830 |
|  4 |      200 |
|  3 |      130 |
|  7 |     -220 |
|  5 |    -1360 |
|  6 |    -4950 |
+---------------+ 
```

下面是我只连接到一个表的两个 SQL 字符串以及来自该表的两个结果.. 看到下面的总和与上面的结果不匹配.. 下面是正确的总和。

```
SELECT users.id, sum(COALESCE(bets.profitloss, 0)) as total_pl 
FROM users 
LEFT JOIN bets ON bets.user_id = users.id 
GROUP BY users.id 
ORDER BY total_pl DESC

SELECT users.id, sum(COALESCE(choices.profitloss, 0)) as total_pl 
FROM users 
LEFT JOIN choices ON choices.user_id = users.id 
GROUP BY users.id 
ORDER BY total_pl DESC

+---------------+
| id | total_pl | 
+---------------+
|  3 |      170 |
|  1 |      150 |
|  4 |      100 |
|  5 |       80 |
|  7 |       20 |
|  6 |      -30 |
+---------------+

+---------------+
| id | total_pl |
+---------------+
|  1 |       20 |
|  4 |        0 |
|  3 |      -10 |
|  7 |      -30 |
|  5 |     -110 |
|  6 |     -360 |
+---------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:46:37.613

发生这种情况是因为两个 ed 表之间的关系- 也就是说，如果和`LEFT JOIN`中都有（多）行，则看到的总行数是从各个行数乘以，而不是相加。 如果你有`bets``choices`

```
choices
id   profitloss
================
1    20
1    30

bets
id   profitloss
================
1    25
1    35 
```

join的结果其实是：

```
bets/choices
id   bets.profitloss   choices.profitloss
1    20                25
1    20                35
1    30                25
1    30                35 
```

（看看这是怎么回事？）

解决这个问题实际上相当简单。您尚未指定 RDBMS，但这应该适用于其中任何一个（或稍作调整）。

```
SELECT users.id, COALESCE(bets.profitloss, 0) 
                     + COALESCE(choices.profitloss, 0) as total_pl
FROM users
LEFT JOIN (SELECT user_id, SUM(profitloss) as profitloss
           FROM bets
           GROUP BY user_id) bets
ON bets.user_id = users.id
LEFT JOIN (SELECT user_id, SUM(profitloss) as profitloss
           FROM choices
           GROUP BY user_id) choices
ON choices.user_id = users.id
ORDER BY total_pl DESC 
```

（另外，我相信惯例是将表命名为*单数*，而不是复数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:52:19.757

您的问题是您正在破坏您的数据集。如果您执行了 SELECT *，您将能够看到它。试试这个。我无法测试它，因为我没有你的桌子，但它应该可以工作

```
SELECT
 totals.id
 ,SUM(totals.total_pl) total_pl
FROM
(
  SELECT users.id, sum(COALESCE(bets.profitloss, 0)) as total_pl 
  FROM users 
  LEFT JOIN bets ON bets.user_id = users.id 
  GROUP BY users.id 

  UNION ALL SELECT users.id, sum(COALESCE(choices.profitloss, 0)) as total_pl 
  FROM users 
  LEFT JOIN choices ON choices.user_id = users.id 
  GROUP BY users.id 
 ) totals
GROUP BY  totals.id
ORDER BY total_pl DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:57:27.297

在与 Clockwork 类似的解决方案中，由于每个表的列相同，因此我会将它们预先联合起来并求和。因此，在大多数情况下，内部查询将为每个用户提供两条记录……一条用于赌注，一条用于选择——每条记录都是在执行 UNION ALL 后分别预先求和的。然后，简单的加入/求和得到结果

```
select 
      U.userid,
      sum( coalesce( PreSum.profit, 0) ) as TotalPL
   from
      Users U
         LEFT JOIN
            ( select user_id, sum( profitloss ) as Profit
                 from bets
                 group by user_id
              UNION ALL
              select user_id, sum( profitloss ) as Profit
                 from choices
                 group by user_id ) PreSum
            on U.ID = PreSum.User_ID
   group by
      U.ID 
```

# java - 将 Snake 的身体全面移动会导致身体结块

> ID：13651447
> 
> 赞同：3
> 
> 时间：2012-11-30T19:02:43.027
> 
> 标签：java, swing, user-interface, animation

所以我在 JPanel 中全面移动我的 Snake 时遇到了一些问题。现在这不是 JPanel 的问题或错误，我只是无法像应有的那样移动 Snake。我知道问题出在哪里，但我只是想不出一种方法让它正常工作而不会出现问题。

问题：Snake 应该彼此相距约 10 px，但它却聚集成彼此相距约 1 px。

这就是它应该看起来的样子。

![这就是它应该看起来的样子。](../Images/6f7b24a6cbe43949b4af96e3eeaea39a.png)

这是它结块时的样子

![这是它结块时的样子](../Images/d532a2b4a15a1a2cdc15bb6c94768efd.png)

我尝试了几种我能想到的不同方法，并且我已经为此工作了好几天。

Snake 应该以 1px 的速度保持移动，所以它是平滑的动画。头部不需要受到影响，因为无论如何它都在移动。但是一旦循环赶上头部，它就会找到头部的位置，并将位置提供给身体。

蛇的移动。

```
int playerVel = 1;

 public void MovePlayer(){
    //Move the snake tail
    if(IsMoving()){
        //Move the head by its velocity
        if(left){
            X[0] -= playerVel;
        }
        else if(right){
            X[0] += playerVel;
        }
        else if(up){
            Y[0] -= playerVel;
        }
        else if(down){
            Y[0] += playerVel;
        }

        for(int i = getSizeWithArmor(); i > 0; i--){
            //Issue is when the for loop finishes counting down it located the Head's position that is 1 px away, and the rest of the body clumps up to it.
            int newLocX = X[i] - X[i-1];
            int newLocY = Y[i] - Y[i-1];

            if(newLocX != 0){
                if(newLocX == 10 || newLocX == -10){
                    X[i] = X[i-1];
                }
                else if(newLocX > 0){
                    X[i] = X[i-1] + 10;
                }
                else if(newLocX < 0){
                    X[i] = X[i-1] - 10;
                }
                else{
                    X[i] = X[i-1];
                }
            }

            if(newLocY != 0){
                if(newLocY == 10 || newLocY == -10){
                    Y[i] = Y[i-1];
                }
                else if(newLocY > 0){
                    Y[i] = Y[i-1] + 10;
                }
                else if(newLocY < 0){
                    Y[i] = Y[i-1] - 10;
                }
                else{
                    Y[i] = Y[i-1];
                }
            }
        }
    }
} 
```

编辑1：

任何帮助将不胜感激！如果我需要添加更多细节，请随时告诉我！

编辑2：

```
 Move    X[0]    X[1]    X[2]    X[3]    X[4]    X[5]
    -----------------------------------------------------

    1       60      50      40      30      20      10
    2       61      51      41      31      21      11  
    3       62      52      42      32      22      12 
    4       63      53      43      33      23      13 
    5       64      54      44      34      24      14 
    6       65      55      45      35      25      15 
    7       66      56      46      36      26      16 
    8       67      57      47      37      27      17 
```

是我正在尝试做的事情。但随着蛇变长，它必须适应。

编辑3：

这是整个 Player 类。玩家类负责所有的移动，并对齐它自己。

班级球员：

```
public class Player implements Runnable{
//Info about the Player
private int[] X;
private int[] Y;
private int[] size;
private int blockPickup;
private int points;
private int armor;
private int blockSize = 10;

//Speeds
private int playerVel = 1;
private int speedDelay = 100;

//Direction the player is moving
private boolean up = false;
private boolean down = false;
private boolean right = false;
private boolean left = false;
private boolean inGame = false;
private boolean gamePaused = false;

private int boardWidth;
private int boardHeight;
private int allSpaces;

public void AddBlock(){
    size = new int[getSizeWithArmor() + 1];

    points++;
    blockPickup++;
}
private void AddBlock(int increase){
    size = new int[getSizeWithArmor() + increase];
    points++;
}

public void AddArmor(){
    armor++;
    AddBlock(1);
}

public void RemoveArmor(){
    armor--;
    size = new int[getSizeWithArmor() - 1];
}

public int getArmor(){
    return armor;
}
public int getSizeWithArmor(){
    return size.length;
}

public int getSizeWithoutArmor(){
    return size.length - armor;
}

public void ResetSize(){
    size = new int[1 + getArmor()];
}

public int getPoints(){
    return points;
}
public void IsGamePlaying(boolean playing){
    inGame = playing;
}
public void IsGamePaused(boolean pause){
    gamePaused = pause;
}

public void Reset(){
    points = 0;
    armor = 0;
    blockPickup = 0;

    ResetSize();
    InitPlayer();
}

public Image Head(){
    if(up){
        return headUp;
    }
    else if(down){
        return headDown;
    }
    else if(right){
        return headRight;
    }
    else if(left){
        return headLeft;
    }
    else{
        return headRight;
    }
}

public void InitPlayer(){
    for(int i = 0; i <= getSizeWithArmor(); i++){
        X[i] = (boardWidth / 2) - (i * blockSize);
        Y[i] = boardHeight / 2;
    }
}

public void SetDirection(int key){
    if(key == KeyEvent.VK_UP && !down){
        up = true;
        left = false;
        down = false;
        right = false;
    }
    else if(key == KeyEvent.VK_DOWN && !up){
        up = false;
        left = false;
        down = true;
        right = false;
    }
    else if(key == KeyEvent.VK_LEFT && !right){
        up = false;
        left = true;
        down = false;
        right = false;
    }
    else if(key == KeyEvent.VK_RIGHT && !left){
        up = false;
        left = false;
        down = false;
        right = true;
    }
}

public void MovePlayer(){
    //Move the snake tail
    if(IsMoving()){
        //Move the head by its velocity

        for(int i = getSizeWithArmor(); i > 0; i--){

            int newLocX = X[i] - X[i-1];
            int newLocY = Y[i] - Y[i-1];

            //Block going left
            if(newLocX > 0){
                if(newLocX == -1){

                }
                else if(newLocX < -1){
                    X[i] = X[i-1] + 10;
                }
            }
            //Block going right
            else if(newLocX < 0){
                X[i] = X[i-1] - 10;
            }

            //Block going up
            if(newLocY > 0){
                Y[i] = Y[i-1] + 10;
            }
            //Block going down
            else if(newLocY < 0){
                Y[i] = Y[i-1] - 10;
            }
        }

        if(left){
            X[0] -= playerVel;
        }
        else if(right){
            X[0] += playerVel;
        }
        else if(up){
            Y[0] -= playerVel;
        }
        else if(down){
            Y[0] += playerVel;
        }
    }
}

public boolean IsMoving(){
    if(up || down || left || right){
        return true;
    }
    else{
        return false;
    }
}

public int getX(int i){
    return X[i];
}

public int getY(int i){
    return Y[i];
}

public void paint(Graphics2D g){
    for(int i = 0; i < getSizeWithArmor(); i++){
        if(i == 0){
            g.drawImage(Head(), X[0], Y[0], null);
        }
        else if(getArmor() >= i){
            g.drawImage(armorImage, X[i], Y[i], null);
        }
        else{
            g.setColor(Color.YELLOW);
            g.fillRect(X[i], Y[i], blockSize, blockSize);
        }
    }
}

@Override
public void run() {
    try{
        while(inGame){
            if(!gamePaused){
                MovePlayer();
                Thread.sleep(20);
            }
        }
    }
    catch(Exception e){
        System.err.println("Player has encoundered an error: "+e.getMessage());
    }
}
} 
```

我的 Board 类调用了对此类进行更改所需的所有数据。如果这堂课非常杂乱无章，我深表歉意。我还没有回去重新组织它并减少其中的很多废话。我也知道很多代码是多余的，不需要。我正在努力解决所有这些问题。现在我只是想解决蛇的身体问题。

编辑4：

我已经弄清楚了一部分。我已经让它向右和向下平滑地动画。但是，一旦您向左或向上，它就会崩溃，并再次开始引发问题。就像我需要检查它是否在之前以及朝哪个方向移动。

```
public void MovePlayer(){
    //Move the snake tail
    if(IsMoving()){
        //Move the head by its velocity

        for(int i = getSizeWithArmor(); i > 0; i--){
            int newLocX = X[i] - X[i-1];
            int newLocY = Y[i] - Y[i-1];

            //Figure out the last direction it was going in
            if(newLocX != 0 && newLocY != 0){

            }

            //Block going left
            if(newLocX > 0){
                if(newLocX > 0 && newLocX <= 10){
                    X[i] -= 1;
                }
                else if(newLocX > 10){
                    X[i] = X[i-1] - 10;
                }
            }
            //Block going right
            else if(newLocX < 0){
                if(newLocX < 0 && newLocX >= -10){
                    X[i] += 1;
                }
                else if(newLocX < -10){
                    X[i] = X[i-1] + 10;
                }
            }
            //Block going up
            else if(newLocY > 0){
                if(newLocY == 1){
                    Y[i] -= 1;
                }
                else if(newLocY > 1){
                    Y[i] = Y[i-1] - 10;
                }
            }
            //Block going down
            else if(newLocY < 0){
                if(newLocY < 0 && newLocY >= -10){
                    Y[i] += 1;
                }
                else if(newLocY < -10){
                    Y[i] = Y[i-1] + 10;
                }
            }

        if(left){
            X[0] -= playerVel;
        }
        else if(right){
            X[0] += playerVel;
        }
        else if(up){
            Y[0] -= playerVel;
        }
        else if(down){
            Y[0] += playerVel;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:18:19.853

[这个 JSFiddle （生成下表）](http://jsbin.com/ubifuf/2/edit)表明您的循环不符合预期。从 的假设 x 位置开始`[50, 40, 30, 20, 10, 0]`，这是 10 次迭代后的样子：

```
moves   X[0]    X[1]    X[2]    X[3]    X[4]    X[5]
----------------------------------------------------
0       50      40      30      20      10      0
1       51      41      40      30      20      10
2       52      42      31      40      30      20
3       53      43      32      41      40      30
4       54      44      33      42      31      40
5       55      45      34      43      32      41
6       56      46      35      44      33      42
7       57      47      36      45      34      43
8       58      48      37      46      35      44
9       59      49      38      47      36      45
10      60      50      39      48      37      46 
```

我一直在玩它，但想不出一个好的方法来修复此代码以按照应有的方式移动这些片段。我认为这比仅使用数学或仅使用单个 for 循环要复杂一些。一种可能性是存储每个块移动的方向。

您还可以计算出每个块的目的地（即，在 10 步内它将在哪里？）然后进行插值以使其平滑移动。这种方法的优点是您可以在处理动画之前确保积木到达正确的位置 - 在担心它看起来有多漂亮之前确保游戏逻辑正常工作。

* * *

我*认为* [这更接近](http://jsbin.com/ubifuf/6/edit)你想要做的（没有多次移动的行是目标数组）：

```
moves  X[0]    X[1]    X[2]    X[3]    X[4]    X[5]    X[6]    X[7]    X[8]    X[9]    X[10]
--------------------------------------------------------------------------------------------
0      50      40      30      30      30      20      20      20      30      40      50
       50      40      30      30      30      20      20      20      30      40      50
1      51      41      31      30      30      21      20      20      29      39      49
2      52      42      32      30      30      22      20      20      28      38      48
3      53      43      33      30      30      23      20      20      27      37      47
4      54      44      34      30      30      24      20      20      26      36      46
5      55      45      35      30      30      25      20      20      25      35      45
6      56      46      36      30      30      26      20      20      24      34      44
7      57      47      37      30      30      27      20      20      23      33      43
8      58      48      38      30      30      28      20      20      22      32      42
9      59      49      39      30      30      29      20      20      21      31      41
10     60      50      40      30      30      30      20      20      20      30      40
       60      50      40      30      30      30      20      20      20      30      40
11     61      51      41      31      30      30      21      20      20      29      39
12     62      52      42      32      30      30      22      20      20      28      38
13     63      53      43      33      30      30      23      20      20      27      37
14     64      54      44      34      30      30      24      20      20      26      36
15     65      55      45      35      30      30      25      20      20      25      35
16     66      56      46      36      30      30      26      20      20      24      34
17     67      57      47      37      30      30      27      20      20      23      33
18     68      58      48      38      30      30      28      20      20      22      32
19     69      59      49      39      30      30      29      20      20      21      31
20     70      60      50      40      30      30      30      20      20      20      30
       70      60      50      40      30      30      30      20      20      20      30
21     71      61      51      41      31      30      30      21      20      20      29 
```

或以图形方式：

![在此处输入图像描述](../Images/7418cea0d16123a2dc7e5b825f41f532.png)

我会尝试将它翻译成 Java，但是我的 Java 生锈了，我无法将它插入到您的代码中，所以我不能保证它会是完美的。重要的部分是逻辑。另请注意，它仅适用于 x 值，但添加 y 值应该很简单：

您需要一个作为以下副本的目标数组`X`：

`int[] dests = (int[])X.clone();`

然后，在内部`MovePlayer`，仅当块已到达目的地（因此需要新的）时才根据移动方向设置它：

```
if(IsMoving() && X.equals(dests)) {
    for(int i = dests.length - 1; i > 0; i--) {
        if(X[i] != X[i-1])
            dests[i] = X[i-1];
    }

    if(left) {
        dests[0] = X[0] - 10;
    } else if(right) {
        dests[0] = X[0] + 10;
    }
} 
```

最后，将块向目的地移动：

```
for(var i = 0; i < X.length; i++) {
    X[i] += Integer.signum(dests[i] - X[i]);
} 
```

`signum``[-1, 0, 1]`根据参数的符号返回其中之一。

# php - 使用 Mcrypt 加密值是使用目录分隔符

> ID：13651448
> 
> 赞同：-1
> 
> 时间：2012-11-30T19:02:46.877
> 
> 标签：php, apache, mod-rewrite, encryption, mcrypt

我有一个东西要加密并通过 URL 中的 get 传递，我要加密的值类似于“019230132_15/10/2012”（带下划线的数字，后跟巴西格式的日期），当我加密这个值时，我得到类似“cMZns2q7U2vgD9t+zufUeKextc/WyuFB4WyVMQ=”的东西，但是通过 GET 在 url 上传递这个给我带来了问题，因为浏览器认为值中间的“/”是目录分隔符，我的加密算法类似于：

```
base64_encode(
    mcrypt_encrypt(
        MCRYPT_RIJNDAEL_256,
        md5(self::ENCRYPT_SALT),
        $value,
        MCRYPT_MODE_CBC,
        md5(md5(self::ENCRYPT_SALT))
    )
); 
```

我什至不想知道为什么会这样，我只是想要某种方法来加密和解密一个值，它不一定是有史以来最安全的方式，因为我提供的信息并不值得麻烦破解它。

**EDIT1：使用 PHP 函数 urlencode 不起作用，我收到错误 404，因为 url_encode 将 '/' 转换为 '%2F'，我认为值得一提的是我在我的 Apache 上使用了 mod_rewrite**

**EDIT2：设法使 urlencode 像 urlencode(urlencode($value)) 一样使用它两次，并解码两次以获得原始值**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:07:00.957

如果您要在 PHP 中创建值（即，将链接从 PHP 传递到浏览器，就像`a`标签一样），请首先使用 PHP 的[urlencode](http://us1.php.net/urlencode)。

但是，如果您使用 JavaScript，请使用 javascript 的[转义函数](http://www.the-art-of-web.com/javascript/escape/)，尤其是`encodeURIComponent`

# sql - 如何提高Oracle中动态sql的查询性能

> ID：13651453
> 
> 赞同：0
> 
> 时间：2012-11-30T19:02:58.987
> 
> 标签：sql, performance, oracle, plsql

我必须从运行时间定义的表中获取数据并根据运行时间定义的列获取数据，我现在使用带有 ref 游标的动态 sql，如下所示。有没有更有效的方法来提高性能？

```
PROCEDURE check_error(p_table_name IN VARCHAR2
    ,p_keyword  IN VARCHAR2
    ,p_column_name IN VARCHAR2
    ,p_min_num IN NUMBER
    ,p_time_range IN NUMBER
    ,p_file_desc IN VARCHAR2
    )
IS  
   type t_crs is ref cursor;
   v_cur t_crs;

   v_file_name VARCHAR2(100);
   v_date_started DATE;
   v_date_completed DATE;
   v_counter NUMBER := 0;
   v_sql VARCHAR2(500);
   v_num NUMBER :=0;
BEGIN
   v_sql := 'SELECT '||p_column_name||', DATE_STARTED,DATE_COMPLETED FROM '||p_table_name
            || ' WHERE '||p_column_name||' LIKE '''||p_keyword||'%'' AND  DATE_STARTED > :TIME_LIMIT  ORDER BY '||p_column_name;

    OPEN v_cur FOR v_sql USING (sysdate - (p_time_range/1440));
    LOOP
        FETCH v_cur INTO v_file_name,v_date_started,v_date_completed;
        EXIT WHEN v_cur%NOTFOUND; 
        IF v_date_started IS NOT NULL AND v_date_completed IS NULL   
            AND (sysdate - v_date_started)*1440 > p_time_range THEN
                insert_record(co_alert_stuck,v_file_name,p_table_name,0,p_file_desc,p_time_range);               
        END IF;         
    END LOOP;
END; 
```

顺便说一句，这会让它变得更好吗？

```
v_sql := 'SELECT :COLUMN_NAME1, DATE_STARTED,DATE_COMPLETED FROM :TABLE WHERE :COLUMN_NAME2 LIKE :KEYWORD AND  DATE_STARTED > :TIME_LIMIT  ORDER BY :COLUMN_NAME3';

OPEN v_cur FOR v_sql USING p_column_name,p_table_name,p_column_name,p_keyword||'%',(sysdate - (p_time_range/1440)),p_column_name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:23:22.637

首先，我不确定我是否理解代码在做什么。在您发布的代码中（您可能为了简化事情而减少了代码），该`IF`语句检查 which 是否是`v_date_started IS NOT NULL`多余的，因为. 它检查是否只是列上子句的冗余重复。它会检查哪个作为您构建的动态 SQL 语句中的附加子句是否更有效。在一个地方进行所有检查是有意义的，最有效的地方是在 SQL 语句中。`WHERE``DATE_STARTED``(sysdate - v_date_started)*1440 > p_time_range``WHERE``DATE_STARTED``v_date_completed IS NULL``WHERE`

其次，这个查询应该返回多少行，花费的时间在哪里？如果游标可能返回许多行（对于许多行的某些定义），您将通过`BULK COLLECT`从游标到集合中执行 a 并修改`insert_record`过程以接受和处理集合来获得一些效率。如果时间都花在执行 SQL 语句上，而查询本身只返回少数几行，那么 PL/SQL 批量操作可能不会使事情变得更高效。如果瓶颈是执行 SQL 语句，您需要希望传入的任何表上都存在适当的索引。如果瓶颈是`insert_record`过程，我们需要知道该过程在做什么才能注释。

Third, if the `insert_record` procedure is (at least primarily) just inserting the data that you fetched into a different table, it would be more efficient to get rid of all the looping and just generate a dynamic `INSERT` statement.

Fourth, with respect to your edit, you cannot use bind variables for table names or column names so the syntax you're proposing is invalid. It won't be more efficient because it will generate a bunch of syntax errors.

# android - 如何使用drawText在文本下绘制阴影？

> ID：13651454
> 
> 赞同：0
> 
> 时间：2012-11-30T19:03:00.097
> 
> 标签：android, paint

我用了：

```
paint.setShadowLayer(1, 0, 0, Color.BLACK); 
```

但是，结果并不是那么美好。这是绘制阴影的唯一方法吗？

我找到[了这个问题](https://stackoverflow.com/questions/2486936/android-shadow-on-text)，但答案是针对 TextView 的。

# jquery - jquery ui slider - changing the position of the handle

> ID：13651457
> 
> 赞同：0
> 
> 时间：2012-11-30T19:03:11.570
> 
> 标签：jquery, jquery-ui, slider, jquery-ui-slider

I'm using a jquery ui slider with a play/pause button to control a d3.js animation. When i press the play button, i'd like the slider handle to move along, any way to do that?

Likewise, is there any way to position the slider at a specific step within the slider? I still want the max and min to remain the same but for example, if i want the handle to start at the last step when the page loads instead of the first one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:13:01.787

Use `setInterval` and `stopInterval` see [there](http://www.pagecolumn.com/javascript/setinterval.htm)

Lets say you have play button that should invoke under mentioned method and switch to pause mode.

Some example where slider moves each sec and represent hours:

**play**

```
var hoursInterval = setInterval(function(){
        var timeOfDay = (localStorage['hour']==23)?0:parseInt(localStorage['hour'])+1;
        $("#playHour").slider("value",timeOfDay);
    },1000); 
```

**pause**

```
....
clearInterval(hourInterval); 
```

Suppose it will help you

# google-chrome - 如何在当前选项卡之后打开一个新选项卡？

> ID：13651461
> 
> 赞同：4
> 
> 时间：2012-11-30T19:03:15.423
> 
> 标签：google-chrome, google-chrome-extension

我正在开发一个 chrome 扩展，我想打开一个新标签，但是在用户所在的当前标签之后。这是我试图做的：

```
function clickEvent(info, tab) {
    update();
    var url= "http://google.com";
    var id = tab.id+1;
    chrome.tabs.create({'url': url, 'index': id});
} 
```

但创建的选项卡会在 chrome 标签栏中的选项卡队列末尾打开。从 中删除`'index': id`后`chrome.tabs.create`，结果相同。我不知道我该如何解决这个问题。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-06T22:14:14.123

听起来您正在创建一个“子”选项卡，在这种情况下，您应该同时设置 the`index`和`openerTabId`：

```
function addChildTab(url, parentTab) {
    chrome.tabs.create({
        'url': url,
        'windowId': parentTab.windowId,
        'index': parentTab.index + 1, // n.b. index not id
        'openerTabId': parentTab.id   // n.b. id not index
    });
} 
```

设置`openerTabId`意味着新选项卡将正确关联为父选项卡的子选项卡，因此：

*   如果您在子选项卡处于活动状态时关闭它，则父选项卡将成为活动选项卡（而不是子选项卡右侧的选项卡）。这使得它的行为方式与用户在新选项卡中打开的链接相同。
*   在树中显示选项卡的扩展[将正常工作](https://github.com/honestbleeps/Reddit-Enhancement-Suite/issues/151)。

另请参阅添加此内容的[https://code.google.com/p/chromium/issues/detail?id=67539 。](https://code.google.com/p/chromium/issues/detail?id=67539)

* * *

注意：如果您在后台打开选项卡（通过传递`active:false`），则`parentTab.index + 1`不太正确，理想情况下，您应该在以下现有子（和孙子）选项卡之后插入新选项卡`parentTab`：

```
function addBackgroundChildTab(url, parentTab) {
    chrome.tabs.query({'windowId': parentTab.windowId}, function(tabs) {
        var parentAndDescendentIds = {};
        parentAndDescendentIds[parentTab.id] = true;
        var nextIndex = parentTab.index + 1;
        while (nextIndex < tabs.length) {
            var tab = tabs[nextIndex];
            if (tab.openerTabId in parentAndDescendentIds) {
                parentAndDescendentIds[tab.id] = true;
                nextIndex++;
            } else {
                break;
            }
        }
        chrome.tabs.create({
            'url': url,
            'active': false,
            'windowId': parentTab.windowId,
            'index': nextIndex,
            'openerTabId': parentTab.id
        });
    });
} 
```

但这对于您的目的可能有点过头了，在这种情况下，坚持`parentTab.index + 1`我的第一个代码示例应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T19:17:50.477

该选项卡附加在末尾，因为您使用了错误的参数（`id`应该是`index`）。[选项卡](http://developer.chrome.com/extensions/tabs.html#type-Tab) `id`是一个正整数，它唯一地标识会话中的选项卡。因此， 的值`id`始终高于选项卡的数量。

选项卡的位置可以从`index`属性中读取。所以，替换`id`为`index`：

```
function clickEvent(info, tab) {
    update();
    var url = "http://google.com/";
    var index = tab.index + 1;
    chrome.tabs.create({'url': url, 'index': index});
} 
```

# jquery-mobile - jQuery Mobile 站点多个文件

> ID：13651466
> 
> 赞同：0
> 
> 时间：2012-11-30T19:03:25.963
> 
> 标签：jquery-mobile

我正在使用 phonegap 和 jquery mobile 来构建一个应用程序。到目前为止，一直在使用“一个 html 文件中的所有页面”，但是该项目将非常大，并且将所有页面都放在一个文件中会很糟糕。所有页面都在文件 index.html 中，只有一个在mentions.html 中称为提及。

当从 index.html 的页面“仪表板”转到mentions.html 上的“提及”是可以的，转换顺利。但是，当单击后退按钮时，它会转到带有 No transiction 的仪表板页面。

这是我的按钮：

```
 <a href="#dashboard" data-role="button" id="mentions-back-button" class="">Dashboard</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:50:02.217

使用 jQuery Mobile 的[后退按钮链接](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)。

```
<a href="#" data-rel="back" data-role="button" id="mentions-back-button" class="">Dashboard</a> 
```

> “返回”按钮链接 如果您在锚点上使用属性 data-rel="back"，则对该锚点的任何点击都将模仿返回按钮，返回一个历史条目并忽略锚点的默认 href。这在使用 JavaScript 生成“后退”按钮时特别有用，例如关闭对话框的按钮。在源标记中使用此功能时，虽然支持此功能的浏览器不会使用指定的 href 属性，但请务必提供一个实际指向引用页面 URL 的有意义的值，以允许该功能在C 级浏览器。如果用户可以从多个引用页面访问此页面，请指定合理的 href，以便所有用户的导航保持逻辑。还，请记住，如果您只想要一个反向转换而不实际返回历史，您应该使用 data-direction="reverse" 属性。注意： data-direction="reverse" 意味着简单地运行将在该页面更改时运行的过渡的向后版本，而 data-rel="back" 使链接在功能上等同于浏览器的后退按钮和所有标准后退按钮逻辑适用。将 data-direction="reverse" 添加到带有 data-rel="back" 的链接不会反转反向页面转换并产生转换的“正常”版本。旨在简单地运行将在该页面更改时运行的过渡的向后版本，而 data-rel="back" 使链接在功能上等同于浏览器的后退按钮，并且所有标准后退按钮逻辑都适用。将 data-direction="reverse" 添加到带有 data-rel="back" 的链接不会反转反向页面转换并产生转换的“正常”版本。旨在简单地运行将在该页面更改时运行的过渡的向后版本，而 data-rel="back" 使链接在功能上等同于浏览器的后退按钮，并且所有标准后退按钮逻辑都适用。将 data-direction="reverse" 添加到带有 data-rel="back" 的链接不会反转反向页面转换并产生转换的“正常”版本。

# encryption - md5 的替代品（不适用于密码散列）

> ID：13651479
> 
> 赞同：0
> 
> 时间：2012-11-30T19:04:43.403
> 
> 标签：encryption, md5, renaming

所以我想生成一些缓存的 html 文件，并且我想在命名它们时使用某种加密，这样它们就不能被轻易访问。Md5/Sha1,2 可能是不错的选择，但我想要一些轻巧的东西，它会生成一个字符串让我们说 12 个字节长（只是说）。

有没有类似的东西，在 php 中可用？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:11:55.817

为了安全起见，我只会使用 base64 或基于种子的简单随机数，或者可能是简单的日期。问题是我没有看到任何不使用 md5 作为性能打击器的原因，尽管您可以尝试 crc32()，它基本上是一个校验和计算器。如果您坚持使用除 sha1/md5 之外的任何其他内容 - 您还可以在此处查看此列表：[http](http://www.php.net/manual/en/function.hash-algos.php) ://www.php.net/manual/en/function.hash-algos.php并使用 hash() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:12:22.303

您可以使用 uuid [http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)生成唯一名称，但如果您需要能够重现混淆名称，那么您最好的选择是 md5，速度不应该成为问题或您所指的“轻量级”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T19:28:06.140

对于一些简单但安全性较低的东西，请查看适当大小的[FNV 哈希](http://isthe.com/chongo/tech/comp/fnv/)。将哈希作为字节后，根据需要将其转换为 Base64 或其他格式。

# algorithm - 如何按降序对单个行进行排序？

> ID：13651483
> 
> 赞同：1
> 
> 时间：2012-11-30T19:05:11.940
> 
> 标签：algorithm, oracle, plsql

我有一个如下所示的表：

```
Name LastName tPoints aPoints sPoints gPoints type
John   Johnny   15      14     13      10       1
Joe     P.      12      11     26      10       1
Matt    Q.      11      26     37      44       2
Sorine  P.      55      9      8        7       2
Ali     Ahmed   30      44     88      65       2 
...     ...     ..      ..      ..     ..       3            
                                                3 
```

我想对 INDIVIDUAL ROWS 进行排序并根据`TYPE`

笔记：`i can't use order by in oracle because it sorts only 1 row and the others is sorted based on the first row`

我不想将表格分成单独的表格，然后对其进行排序，然后将其更新回原始表格。

所以，输出看起来像这样，因为`tPoints`- 我需要显示所有

```
15  - John Johnny
12  - Joe P. 
```

并且对于`aPoints`

```
44  - Ali Ahmed
26  - Matt Q.
 9  - Sorine P. 
```

等等 ...

***简而言之，如果 type = 1 则对 tPoints 进行降序排序，如果 type = 2 则对 aPoints 进行排序，如果 type = 3 则对 sPoints 进行排序，依此类推......***

什么是韭菜的有效方法？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:35:53.217

为简单起见，此示例仅包括两种类型。根据需要添加任意数量的类型。

```
SQL> with t1(Name1, LastName, tPoints, aPoints, sPoints, gPoints, type1) as(
  2  select 'John'  ,  'Johnny',  15,  14,  13,  10,   1  from dual union all
  3  select 'Joe'   ,  'P.'    ,  12,  11,  26,  10,   1  from dual union all
  4  select 'Matt'  ,  'Q.'    ,  11,  26,  37,  44,   2  from dual union all
  5  select 'Sorine',  'P.'    ,  55,  9 ,  8 ,  7,    2  from dual union all
  6  select 'Ali'   ,  'Ahmed' ,  30,  44,  88,  65,   2   from dual
  7  )
  8  select type1
  9       , tpoints
 10       , apoints
 11       , name1
 12       , Lastname
 13    from t1
 14   order by case when type1=1 then tpoints else type1 end desc,
 15            case when type1=2 then apoints else type1 end desc;

     TYPE1    TPOINTS    APOINTS NAME1  LASTNAME
---------- ---------- ---------- ------ --------
         1         15         14 John   Johnny
         1         12         11 Joe    P.
         2         30         44 Ali    Ahmed
         2         11         26 Matt   Q.
         2         55          9 Sorine P. 
```

# javascript - 使用正则表达式将零添加到一位数字日期的前面

> ID：13651491
> 
> 赞同：0
> 
> 时间：2012-11-30T19:05:46.117
> 
> 标签：javascript, regex

我正在尝试在我的 javascript 代码中使用 Regex 对日期时间字符串进行排序，但遇到了问题。如果字符串“MM/DD/YYYY HH:MM:SS”的 HH 部分是一个数字，我的程序会用一个缺失的数字对其进行排序，因此它是一个较小的数字并且不能正确排序。

我的正则表达式是这样的（有问题的部分以粗体显示）：

> /^(\d{ 1,2 })[/- ](\d{ 1,2 })[/- ](\d{ 4 })[\s]( **\d{ 1, 2}** )[\ :](\d{ 2 })[\:](\d{ 2 })[\s]([ AP]M)?/g

如果数字是一位数，有没有办法在 HH 的前面添加一个零？并且不使用任何 .replace() 方法，因为这在我的排序功能部分不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:13:50.320

不使用就不能修改字符串`replace`。您可以“规范化”与您的正则表达式匹配的日期：

```
var out = old
.replace(/^(\d\d?)[\/ -](\d\d?)[\/ -](\d{4})\s(\d\d?):(\d\d):(\d\d)(?:\s([AP]M))?/g
,function(x,m,d,y,h,i,s,a) {
    if( m.length == 1) m = "0"+m;
    if( d.length == 1) d = "0"+d;
    if( a == "PM") h = ""+((h%12)+12);
    if( a == "AM" && h == 12) h = "0";
    if( h.length == 1) h = "0"+h;
    return y+m+d+h+i+s;
}); 
```

对于今天的日期，这将返回：

```
20121130141320 
```

日期组件从大到小排序，这意味着一个简单的`.sort()`调用将按正确的顺序排列日期，而不会大惊小怪。

注意：我稍微编辑了您的正则表达式，但它仍然匹配相同的内容。唯一的区别是，现在如果没有 AM 或 PM，则不再需要末尾的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:14:26.780

您可以调用自定义排序函数将字符串转换为 Date 对象来比较它们吗？

类似于： [按日期对 Javascript 对象数组进行排序](https://stackoverflow.com/questions/10123953/sort-javascript-object-array-by-date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T08:29:44.043

我在这个主题上有点晚了，但就我个人而言，我不想在这个问题上使用正则表达式。我确实更喜欢尽可能简化事情，因此使用三元运算符：

```
// now (I'm posting at 03/05, so let's take this value)
var datev = new Date(); 

/* 
* here we will simply concatenate the value with a prefix "0" if the number
* is lower than 10\. If not, concatenate the original value.
*/
var string_date = (datev.getMonth()+1 < 10 ? "0"+datev.getMonth()+1 : datev.getMonth()+1) + "/" + (datev.getDate() < 10 ? "0"+datev.getDate() : datev.getDate()); 

// display 03/05 instead of 3/5
console.log(string_date); 
```

想添加这个方法来给这个话题带来一些变化。

**注意**： getMonth() 返回一个介于 0 和 11 之间的值，因此您必须向其添加 1 才能获得正确的值。

# php - Joomla 2.5 数据库连接

> ID：13651496
> 
> 赞同：0
> 
> 时间：2012-11-30T19:06:08.857
> 
> 标签：php, mysql, database-connection, joomla2.5

我在一个 Joomla 网站上工作，我们正在运行 jomsocial，我的问题是关于使用 JFactory 的数据库连接。目前，我需要来自不属于 jomsocial 的数据库表中的信息，因此我必须从特定页面进入数据库，但我做错了。只是因为我无法弄清楚如何使正确的方法起作用，所以我在这里寻求帮助。目前我只是使用常规的 php 和 mysql_connect .. 我的数据库连接看起来像......

```
$db_host = 'localhost';
$db_user = 'xxxxxxxx';
$db_pass = 'xxxxxxxx';
$db_database = 'xxxxxxxx';
$link = mysql_connect($db_host,$db_user,$db_pass) or die('Not connected');
mysql_select_db($db_database,$link);
$user = CFactory::getUser($userid);
$user_plan = mysql_query("SELECT blah FROM blah WHERE blah = '".$user->id."'");
$user_plan_row = mysql_fetch_array($user_plan); 
```

这有效，即使它是错误的。我想做的是使用

```
JFactory::getDbo(); 
```

我发现[这个页面](http://vivavivugeek.blogspot.com/2012/05/joomla-25-classes-for-accessing.html)很好地描述了我认为的语法，但是我无法在不破坏页面的情况下实现所描述的任何方法......

非常感谢任何想法或帮助，因为现在我在文件中拥有所有安全信息，我不希望我想使用正确的方法，因为当需要移动站点时，我要去必须手动更改其中的每一项，而不是像往常一样更改配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:50:17.563

The resource you linked to seems fine to me , you will need to post some specific errors.

# certificate - 处理过期的 ClickOnce 证书和签名

> ID：13651500
> 
> 赞同：1
> 
> 时间：2012-11-30T19:06:29.413
> 
> 标签：certificate, clickonce

我在我们的内部网络上部署了一个 ClickOnce 应用程序。由于这只是一个“内部”应用程序，因此出于任何原因，我真的不需要“官方签名”证书。当我今天去发布更新时，我收到了错误消息

> 签名者的证书对签名无效。

当我检查 Visual Studio 2010 中的“签名”选项卡时，我可以看到我已经过了过期日期。我知道我使用 Visual Studio 中同一选项卡上的“创建测试证书”按钮创建了这个 TemporaryKey。

过去，我只是创建了一个新的测试证书，并使用了它。这基本上“买”了我一年，直到我不得不重新做一遍。我想正确签署一份有效期为 X 年（或永不过期）的新证书。

我做了一些研究，但由于我对整个场景不熟悉，所以命名法非常混乱。我可以按照说明进行操作，但前提是它们是以中级用户可以理解的方式编写的。有没有一步一步解释这个过程的参考，希望有截图？我无法相信我四处张望我还没有找到这个，所以我一定不是在查找相关的关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:40:07.313

为了将来参考，这里是[您想要的关于在 ClickOnce 部署中过期证书的所有信息。](http://msdn.microsoft.com/en-us/library/ff369721.aspx) 它还向您展示了如何创建证书并设置其有效的日期范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:28:17.893

使用[Xenos 证书生成器](http://www.xenossoftware.com/free-tools/certificate-generator/)，这是一个免费工具，可让您创建一个有效期为 x 天的证书。

# sql - 关于继承和外键引用的数据库设计查询

> ID：13651504
> 
> 赞同：2
> 
> 时间：2012-11-30T19:06:37.300
> 
> 标签：sql, database-design, inheritance, foreign-keys

我有一个关于我遇到的设计问题的疑问......</p>

有一个表 A 具有子类型 B 和 C。表 A 有一个属性类型，它告诉类型是 B 还是 C。 B 和 C 的公共属性在 A 中。

问题是 B 没有额外的属性 .. B 所需的所有属性都已经在 A 中。但是，C 有额外的属性。

如果我只制作表 A 和 C，这是一个可接受的解决方案吗？？...提取 BI 的实体将通过表 A 中的类型属性进行查询

你可以参考任何材料吗？

我还有另一个困惑，表 A 有子类型 B,C,D 。表 Z 有一列需要主 ID 值为 B 或 C 但不是 D。

我想将 A 的主 id 列添加为对 Z 列的外键引用，然后进行触发器以确保 id 不是 D ...

任何人都可以评论吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:27:28.753

许多人只是在应用程序代码中强制执行所有这些规则。也就是说，它们“简单地”不会插入错误的数据。当然，这是非常脆弱的，并且始终依赖于编写完美的应用程序代码。所以我们希望数据库强制执行约束，这样就永远不会插入错误的数据。

```
CREATE TABLE A (
  id INT PRIMARY KEY,
  type CHAR(1) NOT NULL,
  unique key (id, type)
);

CREATE TABLE B (
  id INT PRIMARY KEY,
  type CHAR(1) NOT NULL DEFAULT 'B',
  FOREIGN KEY (id, type) REFERENCES A(id, type)
); 
```

如果您可以强制 B.type 始终为“B”（检查约束、触发器或引用单行查找表），那么它当然可以引用 A 中 type='B' 的父行。并在表 C 和 D 中执行类似的操作，因此 A 的每一行只能被一个子类型表中的一行引用。

也就是说，如果 A.type 在给定行上是“B”，而 C.type 只能是“C”，则 C 的任何行都不能引用 A.type 为“B”的任何行。

现在如果你想让表 Z 引用 B 或 C 而不是 D，你可以通过 id*和*type 来引用，所以 Z 也有自己的 type 列。您可以使用查找表来限制 Z.type：

```
CREATE TABLE Ztypes (
  type CHAR(1) PRIMARY KEY
);

INSERT INTO Ztypes VALUES ('B'), ('C');

CREATE TABLE Z (
  id INT PRIMARY KEY,
  Aid INT NOT NULL,
  type CHAR(1) NOT NULL,
  FOREIGN KEY (Aid, type) REFERENCES A(id, type),
  FOREIGN KEY (type) REFERENCES Ztypes(type)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:05:29.850

你已经得到了你正在寻找的答案。但是对于遇到此问题的其他人来说，值得研究两种技术：类表继承和共享主键。

这两种技术一起使用使得将 A 的数据与 B 或 C 的数据连接起来变得快速、简单和容易。在这个模式中，B 只包含密钥，但仍然包含有用的信息。

这两种技术都有自己的标签。

# javascript - 使用鼠标滚轮时导致 IE 严重滞后的窗口滚动事件

> ID：13651505
> 
> 赞同：4
> 
> 时间：2012-11-30T19:06:43.530
> 
> 标签：javascript, jquery, internet-explorer, scroll

我在页面顶部附近有一个导航容器，当页面滚动超过某个值时，它应该添加或删除类名“stuck”（在位置：静态和位置：固定之间切换）。似乎在 FF 和 Chrome 中运行良好，但 IE（7,8 和 9）当然有问题。

使用鼠标滚轮滚动时，页面会严重滞后（基本上无法使用），尽管如果我抓住并拖动水平滚动条，则页面会平滑滑动而没有滞后。

我的搜索显示，这可能是因为 IE 执行的滚动事件比其他浏览器多，但我无法确切知道如何限制被触发的事件数量。您可以在下面的代码块中看到，我也在使用“滚动停止”解决方案，但我确实还需要能够在用户超出页面上的某个点时仍在滚动时执行回调。

我认为我实现它的方式很漂亮，精简和基本，但有没有更好的方法来处理这个，至少只适用于 IE？

```
var scrollValue = 0;
var scrollTimer = false;

$(window).bind('scroll', function(){
    scrollValue = $(window).scrollTop();

    // SET TIMER DELAY FOR SCROLL-STOP
    if (scrollTimer) {
        clearTimeout(scrollTimer);
    }
    scrollTimer = setTimeout(scrollStopped, 25);

    // STICK/UNSTICK HEADER
    if (scrollValue > 320){
        if (!$(stickyWrap).hasClass('stuck')){
            $(stickyWrap).addClass('stuck')
        }
    } else {
        if ($(stickyWrap).hasClass('stuck')){
            $(stickyWrap).removeClass('stuck');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-05T19:53:28.510

**Down with timeout, up with switch**

如果您让 jQuery 变得更简单一些，并添加一个开关以在阈值之前和之后只执行一次，它应该可以很好地加快速度。

```
var header = $('.stickyWrap'),
    trig = 320,
    go = true;

$(window).bind('scroll', function(){
    var scrollValue = $(this).scrollTop();

    if ((go && scrollValue > trig) || (!go && scrollValue <= trig)) {//before or after
        header.toggleClass('stuck');//toggle class
        go ? go = false : go = true;//toggle boolean
    }
}); 
```

现在它只会尝试在超过阈值之前和之后执行一次`320`。

**[做了一个小提琴>](http://jsfiddle.net/filever10/jc17v5hm/)**

# sql - 或使用 Group By 条件

> ID：13651508
> 
> 赞同：1
> 
> 时间：2012-11-30T19:06:47.660
> 
> 标签：sql, database, ms-access

我有两张桌子，一张是观察者，另一张是动物。

我试图获得看到超过 5 只动物或看到熊的观察者的名字。

我能够让观察者拥有超过 4 只动物，但不知道如何做 OR 语句。

这是我的代码：

```
SELECT o.last_name, o.first_name, a.observer_id, count (a.observer_id) as Animals_Seen
from animals as a inner join observer as o 
on a.observer_id = o.observer_id
group by a.observer_id, o.last_name, o.first_name
having count (a.observer_id) > 4; 
```

这就是我得到的：

![在此处输入图像描述](../Images/d21d79f8f58a9c62dc4ed393d5522dee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:09:45.903

它应该是 WHERE 子句

```
SELECT fields
FROM tables
WHERE COUNT(a.observer_id) > 4
OR a.observer_id = bear_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:26:54.343

每当发现熊时，将布尔值设置为 1...然后检查观察者的熊数是否 > 0：

```
select
    o.last_name, o.first_name, a.observer_id, count(a.observer_id) as Animals_Seen,
    sum(iif(a.animal = "bear", 1, 0)) as BearCount
from 
    animals as a inner join observer as o 
on 
    a.observer_id = o.observer_id
group by 
    a.observer_id, o.last_name, o.first_name
having
    count(a.observer_id) > 4 or sum(iif(a.animal = "bear", 1, 0)) > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:17:05.340

只需将*Or*语句添加到 having 子句

```
SELECT o.last_name, o.first_name, a.observer_id, count (a.observer_id) as Animals_Seen
from animals as a inner join observer as o 
on a.observer_id = o.observer_id
group by a.observer_id, o.last_name, o.first_name
having count (a.observer_id) > 4 OR a.observer_id = 'bear'; 
```

# javascript - JSON.stringify() 跨所有浏览器？

> ID：13651509
> 
> 赞同：0
> 
> 时间：2012-11-30T19:06:55.513
> 
> 标签：javascript, json, html

如何获得 JSON.stringify() 的跨浏览器版本？

我希望它接受所有三个参数：

```
JSON.stringify(value [, replacer] [, space]) 
```

并在每个主要浏览器中返回相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:08:50.030

不确定我是否正确理解了您的问题，无论如何过去我曾使用Douglas Crockford 的[json2](https://github.com/douglascrockford/JSON-js)在 Internet Explorer LT8 上使用`JSON.parse`/ 。`JSON.stringify`

# css - 将“background-size:cover”应用于 Twitter Bootstrap Carousel 幻灯片

> ID：13651515
> 
> 赞同：11
> 
> 时间：2012-11-30T19:07:38.983
> 
> 标签：css, twitter-bootstrap, slider, background-image

我正在使用带有三张幻灯片的基本引导轮播。在我实现滑块之前，我通过其各自 div 的 css background-image 获得了一张静态图像。在我的 CSS 中，我使用了 background-size:cover，并且非常喜欢图像响应不同浏览器宽度的方式。根据我图像的宽度，我可以让图像的重要部分始终保持可见和居中，而两侧的额外宽度仅在宽屏显示器上可见作为附加效果。

现在我正在使用 Bootstrap 的 Carousel，我想保留相同的图像行为，但即使我为幻灯片的视口分配了尺寸，我仍然无法显示我的背景图像。我目前已经设置好了，因此每张幻灯片都显示一个单独的 css 类，并且每张幻灯片都有不同的背景图像，因此它可以在三个图像之间滚动。

如果通过背景图像无法做到这一点，那么还有另一种方法来操作图像元素，使其显示行为与背景大小相同：封面？

这是我的 HTML：

```
 <div id="myCarousel" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item ad1">
      <img src="{{ STATIC_URL }}img/TestBannerAd.png">
    </div>
    <div class="item ad2">
      <img src="{{ STATIC_URL }}img/TestBannerAd2.png">
    </div>
    <div class="item ad3">
      <img src="{{ STATIC_URL }}img/TestBannerAd3.png">
    </div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

还有我的 CSS：

```
#myCarousel {
    width: 100%;
}
.carousel-control {
    margin-top: 20px;
}
.carousel-inner {
    width: 100%;
    height: 400px;
}
.ad1 {
    background: url(../img/TestBannerAd.png) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
.ad2 {
    background: url(../img/TestBannerAd2.png) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
.ad3 {
    background: url(../img/TestBannerAd3.png) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

希望这不是一个愚蠢的问题，我们可以解决这个问题！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-14T20:28:11.453

我知道我的回复已经很晚了，但我只是通过搜索找到了你的问题来做类似的事情。首先，您需要从 HTML 中删除图像并稍微更改 CSS 以将高度应用于轮播中具有类“item”的所有 div。

将我的修改应用于您的代码应该是这样的：

```
<div id="myCarousel" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
     <div class="item active ad1">
        <div class="carousel-caption">
           <h4>First Thumbnail label</h4>
           <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
        </div>
     </div>
     <div class="item ad2">
        <div class="carousel-caption">
            <h4>Second Thumbnail label</h4>
            <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
         </div>
     </div>
     <div class="item ad3">
        <div class="carousel-caption">
           <h4>Third Thumbnail label</h4>
           <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
        </div>
    </div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

和CSS：

```
#myCarousel {
    width: 100%;
}
.carousel-control {
    margin-top: 20px;
}
.carousel-inner .item {
    width: 100%;
    height: 400px;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
.ad1 {
    background: url(../img/TestBannerAd.png) no-repeat center center fixed; 
}
.ad2 {
    background: url(../img/TestBannerAd2.png) no-repeat center center fixed; 
}
.ad3 {
    background: url(../img/TestBannerAd3.png) no-repeat center center fixed; 
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-16T12:43:39.373

这是封面代码的jQuery等价物：

```
 $.each( jQuery('.carousel .item'), function( i, val ) {
    $(this).css('background-image','url('+$(this).find('img').attr('src')+')').css('background-size','cover').find('img').css('visibility','hidden');
  }); 
```

它获取图像源并传递给项目，然后隐藏实际图像。

此外，您可能需要隐藏轮播直到 jQuery.each 完成。我建议对 CSS 级别的图像进行可见性：隐藏 hack。因此用户不会在更大的屏幕上注意到图像放大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-22T20:00:21.160

刚刚发现这个使用另一种解决方案的codepen [https://codepen.io/wisnust10/pen/mPJwWv/ 。](https://codepen.io/wisnust10/pen/mPJwWv/)（见CSS）

```
.item:nth-child(1) {
  background: url('https://snap-photos.s3.amazonaws.com/img-thumbs/960w/HZZKGVVJ6I.jpg');
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
    } 
```

在 chrome 和 IE 中对此进行了测试，它成功了。

希望它可以以某种方式提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T06:27:18.603

在“.item”类中使用“背景属性”，不使用“img”标签

```
.carousel {
    height: 300px;
}

.carousel-inner {
    height: 100%;
}

.item {
    width: 100%;
    height: 100%;

    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

    background-position: center;
}
/*
img {                
    object-fit: cover;
}
*/
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

<div id="myCarousel" class="carousel slide">

    <!-- Carousel items -->
    <div class="carousel-inner">

        <div class="item active" style="background-image: url(https://dummyimage.com/300x200/000/fff)" >
<!--            <img src="http://placehold.it/650x450/aaa&text=Item 1" style="width: 100%; height: 100%" /> -->
        </div>

        <div class="item" style="background-image: url(https://dummyimage.com/600x400/000/fff)" >
<!--            <img src="http://placehold.it/350x350/aaa&text=Item 2" style="width: 100%; height: 100%" /> -->
        </div>

        <div class="item" style="background-image: url(https://dummyimage.com/1200x800/000/fff)" >
<!--            <img src="http://placehold.it/350x350/aaa&text=Item 3" style="width: 100%; height: 100%" /> -->
        </div>

    </div>

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right"></span>
        <span class="sr-only">Next</span>
    </a>

</div>
```

### 密码笔

*   [编辑](https://codepen.io/antelove/pen/LogGdr)*   [全视图](https://codepen.io/antelove/full/LogGdr)

[img 的版本](https://stackoverflow.com/questions/33685259/stretch-and-fill-image-in-bootstrap-carousel/56356256#56356256)

# sql - 如何以一张表中的数据为列，将两张表合并为一张表？

> ID：13651516
> 
> 赞同：1
> 
> 时间：2012-11-30T19:07:53.997
> 
> 标签：sql, join

我有两张表，person(id, phonetype, phonenumber), phonetype(id, txtDisplay)。例如

电话号码

```
Id  txtDisplay
1   Home Phone
2   Work Phone
3   Mobile Phone 
```

人

```
Id  phonetype   phonenumber
0001    1       6310001111
0001    2       6310001112
0002    3       5160002113
0003    2       7180003112 
```

结果表应该是

```
Id  home_phone  work_phone  mobile_phone
0001    6310001111  6310001112
0002                    5160002113
0003            7180003112 
```

我该如何为此编写查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:11:03.000

仅当您已经知道所有电话类型时，这才有效：

```
SELECT
  id,
  max(case when phonetype=1 then phonenumber end) as home_phone,
  max(case when phonetype=2 then phonenumber end) as work_phone,
  max(case when phonetype=3 then phonenumber end) as mobile_phone
FROM Person
GROUP BY id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:12:24.580

在 SQL 中，在解析查询时必须知道列名。您不能编写一个根据找到的数据自动扩展列数的查询。

但是，您可以在两个查询中执行此操作：

1.  首先，从 Phonetype 表中获取所有不同的电话号码类型。

2.  其次，编写代码以添加与不同电话号码类型一样多的列。

Microsoft SQL Server supports a [PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx) operation that helps for these types of queries a little bit, but you must still know all the distinct values for which you want columns. So my two-step process above applies to Microsoft as well as any other implementation of SQL.

# opengl - 多个过剩窗口，但显示功能相同

> ID：13651521
> 
> 赞同：2
> 
> 时间：2012-11-30T19:08:15.917
> 
> 标签：opengl, glut

我正在尝试在过剩的两个窗口中渲染模型。但它仅在其中一个窗口中呈现。是否可以在具有不同回调函数的两个窗口中进行渲染？

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
#define WINDOW_TITLE_PREFIX "Chapter 2"

int CurrentWidth = 800,
    CurrentHeight = 600,
    WindowHandle = 0;

unsigned FrameCount = 0;

GLuint
    VertexShaderId,
    FragmentShaderId,
    ProgramId,
    VaoId,
    VboId,
    ColorBufferId;

const GLchar* VertexShader =
{
    "#version 400\n"\

    "layout(location=0) in vec4 in_Position;\n"\
    "layout(location=1) in vec4 in_Color;\n"\
    "out vec4 ex_Color;\n"\

    "void main(void)\n"\
    "{\n"\
    "   gl_Position = in_Position;\n"\
    "   ex_Color = in_Color;\n"\
    "}\n"
};

const GLchar* FragmentShader =
{
    "#version 400\n"\

    "in vec4 ex_Color;\n"\
    "out vec4 out_Color;\n"\

    "void main(void)\n"\
    "{\n"\
    "   out_Color = ex_Color;\n"\
    "}\n"
};

void Initialize(int, char*[]);
void InitWindow(int, char*[]);
void ResizeFunction(int, int);
void ResizeFunction1(int, int);
void RenderFunction(void);
void RenderFunction1(void);
void TimerFunction(int);
void TimerFunction1(int);
void IdleFunction(void);
void IdleFunction1(void);
void Cleanup(void);
void CreateVBO(void);
void DestroyVBO(void);
void CreateShaders(void);
void DestroyShaders(void);

int Wh1;

int main(int argc, char* argv[])
{
    Initialize(argc, argv);

    glutMainLoop();

    exit(EXIT_SUCCESS);
}

void Initialize(int argc, char* argv[])
{
    GLenum GlewInitResult;

    InitWindow(argc, argv);

    glewExperimental = GL_TRUE;
    GlewInitResult = glewInit();

    if (GLEW_OK != GlewInitResult) {
        fprintf(
            stderr,
            "ERROR: %s\n",
            glewGetErrorString(GlewInitResult)
        );
        exit(EXIT_FAILURE);
    }

    fprintf(
        stdout,
        "INFO: OpenGL Version: %s\n",
        glGetString(GL_VERSION)
    );

    CreateShaders();
    CreateVBO();

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
}

void InitWindow(int argc, char* argv[])
{
    glutInit(&argc, argv);

    glutInitContextVersion(4, 0);
    glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
    glutInitContextProfile(GLUT_CORE_PROFILE);

    glutSetOption(
        GLUT_ACTION_ON_WINDOW_CLOSE,
        GLUT_ACTION_GLUTMAINLOOP_RETURNS
    );

    glutInitWindowSize(CurrentWidth, CurrentHeight);

    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);

    WindowHandle = glutCreateWindow(WINDOW_TITLE_PREFIX);
    std::cout<<WindowHandle<<std::endl;
    if(WindowHandle < 1) {
        fprintf(
            stderr,
            "ERROR: Could not create a new rendering window.\n"
        );
        exit(EXIT_FAILURE);
    }
    glutSetWindow(WindowHandle);
    glutReshapeFunc(ResizeFunction);
    glutDisplayFunc(RenderFunction);
    glutTimerFunc(0, TimerFunction, 0);
    glutCloseFunc(Cleanup);
#if 1
    Wh1 = glutCreateWindow("sasd"); 
//  std::cout<<i<<"s"<<std::endl;
    glutReshapeFunc(ResizeFunction1);
    glutDisplayFunc(RenderFunction1);
    glutTimerFunc(0, TimerFunction1, 0);
    glutCloseFunc(Cleanup);
    glutSetWindow(Wh1);
#endif

}

void ResizeFunction(int Width, int Height)
{
    CurrentWidth = Width;
    CurrentHeight = Height;
    glViewport(0, 0, CurrentWidth, CurrentHeight);
}

void ResizeFunction1(int Width, int Height)
{
    CurrentWidth = Width;
    CurrentHeight = Height;
    glViewport(0, 0, CurrentWidth, CurrentHeight);
}

void RenderFunction(void)
{
    ++FrameCount;

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glutSwapBuffers();
    glutSetWindow(WindowHandle);
    glutPostRedisplay();
    glutSetWindow(Wh1);
    glutPostRedisplay();
}

void RenderFunction1(void)
{
    ++FrameCount;

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glutSwapBuffers();

    glutSetWindow(WindowHandle);
    glutPostRedisplay();
    glutSetWindow(Wh1);
    glutPostRedisplay();
}

void IdleFunction(void)
{
    glutSetWindow(WindowHandle);
    glutPostRedisplay();
    glutSetWindow(Wh1);
    glutPostRedisplay();
}

void IdleFunction1(void)
{
    glutSetWindow(WindowHandle);
    glutPostRedisplay();
    glutSetWindow(Wh1);
    glutPostRedisplay();
}
void TimerFunction(int Value)
{
    if (0 != Value) {
        char* TempString = (char*)
            malloc(512 + strlen(WINDOW_TITLE_PREFIX));

        sprintf(
            TempString,
            "%s: %d Frames Per Second @ %d x %d",
            WINDOW_TITLE_PREFIX,
            FrameCount * 4,
            CurrentWidth,
            CurrentHeight
        );

        //glutSetWindowTitle(TempString);
        free(TempString);
    }

    FrameCount = 0;
    glutTimerFunc(250, TimerFunction, 1);
}
void TimerFunction1(int Value)
{
    if (0 != Value) {
        char* TempString = (char*)
            malloc(512 + strlen(WINDOW_TITLE_PREFIX));

        sprintf(
            TempString,
            "%s: %d Frames Per Second @ %d x %d",
            WINDOW_TITLE_PREFIX,
            FrameCount * 4,
            CurrentWidth,
            CurrentHeight
        );

        //glutSetWindowTitle(TempString);
        free(TempString);
    }

    FrameCount = 0;
    glutTimerFunc(250, TimerFunction, 1);
}

void Cleanup(void)
{
    DestroyShaders();
    DestroyVBO();
}

void CreateVBO(void)
{
    GLfloat Vertices[] = {
        -0.8f, -0.8f, 0.0f, 1.0f,
         0.0f,  0.8f, 0.0f, 1.0f,
         0.8f, -0.8f, 0.0f, 1.0f
    };

    GLfloat Colors[] = {
        1.0f, 0.0f, 0.0f, 1.0f,
        0.0f, 1.0f, 0.0f, 1.0f,
        0.0f, 0.0f, 1.0f, 1.0f
    };

    GLenum ErrorCheckValue = glGetError();

    glGenVertexArrays(1, &VaoId);
    glBindVertexArray(VaoId);

    glGenBuffers(1, &VboId);
    glBindBuffer(GL_ARRAY_BUFFER, VboId);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);
    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);
    glEnableVertexAttribArray(0);

    glGenBuffers(1, &ColorBufferId);
    glBindBuffer(GL_ARRAY_BUFFER, ColorBufferId);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Colors), Colors, GL_STATIC_DRAW);
    glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, 0);
    glEnableVertexAttribArray(1);

    ErrorCheckValue = glGetError();
    if (ErrorCheckValue != GL_NO_ERROR)
    {
        fprintf(
            stderr,
            "ERROR: Could not create a VBO: %s \n",
            gluErrorString(ErrorCheckValue)
        );

        exit(-1);
    }
}

void DestroyVBO(void)
{
    GLenum ErrorCheckValue = glGetError();

    glDisableVertexAttribArray(1);
    glDisableVertexAttribArray(0);

    glBindBuffer(GL_ARRAY_BUFFER, 0);

    glDeleteBuffers(1, &ColorBufferId);
    glDeleteBuffers(1, &VboId);

    glBindVertexArray(0);
    glDeleteVertexArrays(1, &VaoId);

    ErrorCheckValue = glGetError();
    if (ErrorCheckValue != GL_NO_ERROR)
    {
        fprintf(
            stderr,
            "ERROR: Could not destroy the VBO: %s \n",
            gluErrorString(ErrorCheckValue)
        );

        exit(-1);
    }
}

void CreateShaders(void)
{
    GLenum ErrorCheckValue = glGetError();

    VertexShaderId = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(VertexShaderId, 1, &VertexShader, NULL);
    glCompileShader(VertexShaderId);

    FragmentShaderId = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(FragmentShaderId, 1, &FragmentShader, NULL);
    glCompileShader(FragmentShaderId);

    ProgramId = glCreateProgram();
        glAttachShader(ProgramId, VertexShaderId);
        glAttachShader(ProgramId, FragmentShaderId);
    glLinkProgram(ProgramId);
    glUseProgram(ProgramId);

    ErrorCheckValue = glGetError();
    if (ErrorCheckValue != GL_NO_ERROR)
    {
        fprintf(
            stderr,
            "ERROR: Could not create the shaders: %s \n",
            gluErrorString(ErrorCheckValue)
        );

        exit(-1);
    }
}

void DestroyShaders(void)
{
    GLenum ErrorCheckValue = glGetError();

    glUseProgram(0);

    glDetachShader(ProgramId, VertexShaderId);
    glDetachShader(ProgramId, FragmentShaderId);

    glDeleteShader(FragmentShaderId);
    glDeleteShader(VertexShaderId);

    glDeleteProgram(ProgramId);

    ErrorCheckValue = glGetError();
    if (ErrorCheckValue != GL_NO_ERROR)
    {
        fprintf(
            stderr,
            "ERROR: Could not destroy the shaders: %s \n",
            gluErrorString(ErrorCheckValue)
        );

        exit(-1);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:12:07.060

`glutDisplayFunc`，以及所有其他回调，为调用函数时当前的任何窗口设置回调。所以如果你想为某个窗口设置显示回调，调用`glutDisplayFunc`后调用`glutSetWindow`。

> 我发现了 gldrawArrays 需要创建新的 vbo 来重绘的问题。我不知道为什么。

这是因为每个窗口都代表一个*单独*的OpenGL 上下文。除非您明确共享对象（通过特定于平台的调用），否则每个上下文都将拥有自己的独立对象。如果没有明确共享（并且在新上下文中创建对象之前这样做），您不能使用在另一个中创建的缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:41:32.897

Opengl 函数不是线程安全的。因此，多个窗口中的 gldrawArrays 可能在两个线程中运行。所以他们的行为是不确定的。

# regex - 用正则表达式去除中间的首字母

> ID：13651523
> 
> 赞同：0
> 
> 时间：2012-11-30T19:08:19.810
> 
> 标签：regex, perl

我知道我在这里做了一些愚蠢的事情，但我很累而且我显然只是没有看到它。我有以下脚本：

```
#!/usr/bin/perl
use strict;
use warnings;

my @names = (
    "John Q. Public",
    "James K Polk"
);

foreach (@names)
{
    print "Before: $_\n";
    s/\b[A-Z]\.?\b//;
    print "After:  $_\n";
} 
```

当我运行这个脚本时，我得到以下输出：

```
Before: John Q. Public
After:  John . Public      <== Why is the period still here?
Before: James K Polk
After:  James  Polk 
```

请注意，在*John Q. Public*示例中，保留了句点。可选的匹配参数 ( `?`) 不是贪婪的吗？根据[perlre 文档](http://perldoc.perl.org/perlre.html)：

> ? 匹配 1 或 0 次

句号不应该和中间的首字母一起消失吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:12:16.970

问题是

```
". " =~ /\.\b/ or print "There is no word boundary between a dot and a space.\n" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:33:02.057

我想我会选择在空格上拆分名称并仅选择第一个和最后一个字段。

像这样：

```
use strict;
use warnings;

my @names = ("John Q. Public", "James K Polk");

foreach (@names) {
  print "Before: $_\n";
  $_ = join ' ', (split)[0, -1];
  print "After:  $_\n";
} 
```

**输出**

```
Before: John Q. Public
After:  John Public
Before: James K Polk
After:  James Polk 
```

# java - 音频处理 - Num Chunking & Forward Fourier Transform？

> ID：13651526
> 
> 赞同：1
> 
> 时间：2012-11-30T19:08:31.093
> 
> 标签：java, audio, fft, processing

我无法理解老师教给我的概念，并且在同学之间得到的答案非常不一致。我想知道是否有人可以帮助澄清这个想法或概念？

它在音频处理中被称为 num chunking。**我们只需要处理 WAV 文件。**所以我们假设我们的音频数据是未压缩的。

numChunking 与音频正弦波上的傅立叶变换有关。

为了确定 numChunks 的数量，我们执行类似的操作

方法1：

```
int numChunks = totalNumOfSamples/chunkSize 
```

但我与之交谈过的其他人也很少说

方法2：

```
int numChunks = totalNumOfSamples/binSize 
```

不同之处在于**chunkSize**只是一些指定或硬编码的数字，例如 1024 或 2000 之类的。**另一方面， binSize**是我们在对样本应用傅里叶变换后绘制的频率数。我们通常绘制的 bin 数量（面板上的条形图/频率条形图）大约是 50-100 个，以便在屏幕上显示，这将永远持续下去。

*在方法 1 中，我们从例如 47988 个样本 / 2000 = 23 个 numChunks 中获得了一些 numchunk。然后我们将这些块发送到一个 for 循环并将声音数据的每个样本添加到每个块中，**所以如果我们将所有 23 个 numChunk 放在一起，我们几乎拥有整个声音数据，但由于无法容纳而损失了一些精度该部门的每个样本。**然后我们将它们添加到一个数组或 ArrayList 中，稍后发送到离散傅里叶变换（前向傅里叶函数），我们得到我们的结果并将它们放在我们的 bin 中并将结果绘制/绘制为条形。*

*我不确定的最后一个细节是傅立叶变换是否除以整个声音中的 TOTAL 个样本，或者只是 numChunk 中的样本总数。*

*在方法 2 中，这个方法的工作方式是 numChunks = total samples / binSize 例如，我们将使用相同的示例。47988/30bins = 1599 numChunks。**在这个想法中，我的同学向我解释说 numChunks 是一些子数组。所以我制作了一个二维数组，1599 个数组，每个数组的长度为 binSize 所以当我们通过正向傅立叶变换处理每个子阵列时，我们得到我们的结果幅度值或频率**然后我们通过正向傅立叶运行每个子阵列，将值除以总样本整个声音的大小。*

这两种想法的结果是不规则的不同。方法 1 产生的第一个值约为 37.5，方法 2 产生的值为 3689。他们的以下值似乎都是正确的，所以我不确定哪种方法是正确的，或者是否有任何方法是正确的。

**这是用Java编码的**

这个问题很令人困惑，因为您可以说我自己也很困惑。我希望有人可以帮助澄清哪个是正确的或不正确的或解释这个概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:07:58.977

哇，你有点糊涂了。我会尽力帮助解释一下。

您使用 DFT（离散傅立叶变换）所做的是获取大量样本 N 并将它们从时域转换为频域。您在频域中得到的数组的大小与您在时域中放入的数组的大小相同。因此，您可以将 numChunks 设置为您想要的任何值，具体取决于您在输出数组中想要的频率分辨率，因为频率分辨率将是 sampleRate/numChunks。因此，如果您想要输出 80 个频率值，请使用 80 的块大小。将您的声音文件分成 totalNumSamples/80 个块，您将依次获得每个块的频率内容。

要回答您的另一个问题，整个声音中的样本总数无关紧要 - 您所做的每个 DFT 都是完全独立的，所以重要的是您放入每个 DFT 的样本数量。

我希望这会有所帮助。

# java - Java 2D 光照效果

> ID：13651527
> 
> 赞同：3
> 
> 时间：2012-11-30T19:08:45.137
> 
> 标签：java, graphics, 2d

我正在尝试在 Java 2D 中复制下图中每个条上显示的照明效果。我真的不知道从哪里开始，因为我没有 Java 2D 经验。

谁能给我一些指示？

![在此处输入图像描述](../Images/f233f9ebc698c261a134f432e1389b5e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T19:12:42.973

这些是应用于矩形和其他多边形的基本渐变。

您可以使用它[`GradientPaint`](http://docs.oracle.com/javase/7/docs/api/java/awt/GradientPaint.html)来创建渐变效果。

```
g.setPaint(yourGradientPaint);
g.draw(yourShape); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:31:27.773

如果您甚至不了解 Java 2d，您应该先从官方文档中学习它，或者随时查看 Java 2d 的介绍和 教程[http://www.apl.jhu.edu/~hall/java/Java2D-Tutorial.html](http://www.apl.jhu.edu/~hall/java/Java2D-Tutorial.html)通过你会发现可以解决这个问题的 gradianpaint ..

# css - 使内部元素在溢出时右对齐

> ID：13651528
> 
> 赞同：0
> 
> 时间：2012-11-30T19:08:47.240
> 
> 标签：css, position, overflow

我在 div 中有一个 div。div的`.outer`溢出设置为隐藏，宽度为 200 像素。`.inner`div 宽 300 像素，按照规范隐藏得很好`overflow`。

我想做的是找到一种对齐内部 div 的方法，以便它切断左侧而不是右侧的溢出。

我可以使用定位和负边距，但最终内部 div 是可变宽度，所以我希望有一种方法可以在没有“硬编码”的情况下实现这一点？

这是小提琴：http: [//jsfiddle.net/xCYPc/](http://jsfiddle.net/xCYPc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:12:34.030

尝试`float: right;`设置`.inner`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:15:55.610

只需添加`direction: rtl`到您的`.outer`div 中，请参阅工作[**小提琴**](http://jsfiddle.net/kCwr8/)

来自[http://www.w3.org/wiki/CSS/Properties/direction](http://www.w3.org/wiki/CSS/Properties/direction)：

> direction 属性指定块的基本写入方向以及 Unicode 双向算法的嵌入和覆盖方向。
> 
> 此外，它指定了表格列布局的方向，水平溢出的方向，以及在'text-align：justify'的情况下块中不完整的最后一行的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:14:14.990

制作`.outer` `position:relative`和`.inner` `position:absolute;right:0`。这将使内部 div 保持正确对齐，无论其宽度如何。

# powershell - Powershell Select-String 删除回车符

> ID：13651530
> 
> 赞同：2
> 
> 时间：2012-11-30T19:08:52.590
> 
> 标签：powershell

我正在尝试在报告的各个行中选择回车。最后，我想删除回车。如果我使用`"`n"`, `"`r"`, `"\n"`, `"\r"`，我不会得到任何结果。当我在 Vi 中访问报告时，我可以看到回车 ( `^L`)。所以我现在不知道该怎么做，但把我的头发拉出来。

```
ls C:\DOWNLOAD\STANDARD\AUDIT*PRM3711* | %{ gc $_ | Select-String -Pattern '\** WARNING \** -  ' } 
```

结果

```
** WARNING ** -  SAMPLE REPORT
** WARNING ** -  SAMPLE REPORT
** WARNING ** -  SAMPLE REPORT
** WARNING ** -  SAMPLE REPORT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:30:54.273

[`gc`](http://go.microsoft.com/fwlink/?LinkID=113310)将文件的内容作为行数组返回，其中不包含换行符。

如果您需要跨行匹配，我会建议[此答案](https://stackoverflow.com/a/8082508/2495)的方法，例如：

```
$content = [IO.File]::ReadAllText( $_.FullName )
if( $content -match "(?s)..." ) {
  # use values in $matches
} 
```

要从匹配项中删除换行符，请尝试`$matches[0] -replace [Environment]::NewLine`或`$matches[0] -replace "`r*`n*"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:59:46.707

在powershell回车+换行应该是``n`

我认为你可以使用这个：

```
[string]::Join("",(gc 'C:\temp\test.txt')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T19:06:46.527

Powershell 使用

```
`r`n 

```

用于回车换行

`get-content`制作一个字符串数组

所以你可以使用 `$result = (cat C:\DOWNLOAD\STANDARD\AUDIT*PRM3711* | where { $_ -like '** WARNING ** - ' } ) $result = $result -replace '** WARNING ** - ' , '`r`n** WARNING ** - '`

或者，我认为在 PS3 中，您可以使用 `get-content -delimiter `0`

我现在没有PS3盒子在我面前......

# python - Python 正则表达式速度 - 贪婪与非贪婪

> ID：13651531
> 
> 赞同：4
> 
> 时间：2012-11-30T19:08:55.680
> 
> 标签：python, regex, performance, non-greedy

我在 Python 中进行了几个正则表达式替换

```
 \w\s+\w 
```

在许多大文件上。显然，如果我使正则表达式不贪婪（使用 a `?`），它不会改变匹配的内容（如`\w`!= `\s`），但它会使代码运行得更快吗？换句话说，对于非贪婪的正则表达式，Python 是否从匹配的第一个字符开始工作，而不是从文档末尾返回到该字符，或者这是一个幼稚的观点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:44:19.960

这是你暗示的模式吗？

```
In [15]: s = 'some text   with \tspaces  between'

In [16]: timeit re.sub(r'(\w)(\s+)(\w)', '\\1 \\3', s)
10000 loops, best of 3: 30.5 us per loop

In [17]: timeit re.sub(r'(\w)(\s+?)(\w)', '\\1 \\3', s)
10000 loops, best of 3: 24.9 us per loop 
```

在这里似乎是一个很小的差异。非贪婪只有 5 微秒，

使用 500 个单词的 lorem-ipsum，每个单词之间有多个混合空格，我得到了 8 毫秒的差异。

# macos - 创建 Applescript 或 Shell 脚本来解压缩和重命名文件？

> ID：13651533
> 
> 赞同：0
> 
> 时间：2012-11-30T19:09:06.320
> 
> 标签：macos, shell, applescript, rename, unzip

我有几个 .zip 文件的文件夹，我想执行以下操作：

*   将随附的文件或文件夹提取到与 .zip 相同的位置
*   将生成的文件或文件夹重命名为 .zip 文件的名称
*   删除 .zip 文件

.zip 文件始终包含单个文件或单个文件夹，因此无需担心重命名错误文件夹。

我对 Applescript 只有一点经验，对 shell 脚本几乎没有。任何人都可以提供帮助或提出任何建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:09:23.993

解压缩文件不是您问题的难点。困难的部分是重命名，因为我们不知道解压缩了哪些文件/文件夹。所以这里的策略是在解压前获取文件夹中所有项目的列表，解压后获取文件夹中所有项目的另一个列表，然后比较这两个列表。第二个列表中没有第一个列表中的项目是解压缩的项目......所以如果它们的名称与 zip 文件不同，我们可以重命名它们。

***建议***：要学习applescript，去[这里](http://macscripter.net/viewtopic.php?id=25631)做名为“AppleScript Tutorial for Beginners”的教程。我就是这样学习的。它们做起来很简单，你会学到很多东西。祝你好运。

```
-- get the folder containing the zip files
set folderOfZips to (choose folder) as text

tell application "Finder"
    -- get the zip files from the chosen folder
    set zipFiles to files of folder folderOfZips whose name extension is "zip"

    repeat with aZip in zipFiles
        -- we use this when renaming the unzipped files
        set zipName to text 1 thru -5 of (get name of aZip)

        -- get a list of all the items in the folder before unzipping
        set origItems to name of items of folder folderOfZips

        -- unzip the item
        my unzipItem(aZip as text, folderOfZips)

        -- get a list of all the items in the folder after unzipping
        set nowItems to name of items of folder folderOfZips

        -- compare the 2 lists of items, before and after unzipping
        repeat with i from 1 to count of nowItems
            set thisItem to item i of nowItems

            -- if thisItem is not in origItems then it means this is one of the unzipped files, so we rename it
            if thisItem is not in origItems then
                set thisItemPath to folderOfZips & thisItem
                set ext to name extension of item thisItemPath
                if ext is "" then
                    set newname to zipName
                else
                    set newname to zipName & "." & ext
                end if
                if newname is not thisItem then
                    try
                        set name of item thisItemPath to newname
                    end try
                end if
            end if
        end repeat
        move aZip to trash
    end repeat
end tell

tell me
    activate
    display dialog "Finished!" buttons {"OK"} default button 1 with icon note
end tell

on unzipItem(zipPath, destinationFolder)
    do shell script "/usr/bin/ditto -xk " & quoted form of POSIX path of zipPath & space & quoted form of POSIX path of destinationFolder
end unzipItem 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:22:25.590

这是另一种方法：

```
set mainFolder to (path to desktop as text) & "My Folder"
tell application "Finder" to set myZips to (every file of folder mainFolder whose name extension is "zip") as alias list
repeat with aZip in myZips
    set zipName to itemName(aZip)
    tell application "System Events"
        set newItem to open aZip
        set newItem's name to zipName
        delay 1
        delete aZip
    end tell
end repeat

on itemName(anItem)
    tell application "System Events" to set {name:fileName, name extension:nameExtension} to anItem
    set baseName to text 1 thru ((get offset of "." & nameExtension in fileName) - 1) of fileName
end itemName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T16:15:45.603

```
temp=$(mktemp -d -t zip)
trap "rm -r $temp" EXIT
cd ~/Desktop

find . -name \*.zip | while IFS= read -r f; do
  if [[ $(zip -sf "$f" | awk 'END{print $2}') -eq 1 ]]; then
    unzip "$f" -x __MACOSX/* -d $temp
    for file in $temp/*; do
      ext=${file##*.}
      mv "$file" "${f%.zip}.$ext"
    done
  elif [[ $(zip -sf "$f" | sed '1d;$d' | awk -F/ '!a[$1]++' | wc -l) -eq 1 ]]; then
    unzip "$f" -x __MACOSX/* -d $temp
    mkdir -p "${f%.zip}"
    mv $temp/*/* "${f%.zip}"
    rm -r $temp/*
  else
    unzip "$f" -x __MACOSX/* -d "${f%.zip}"
  fi
done 
```

*   If an archive only contains one file, the file is renamed to have the same basename as the archive
*   If all members are in one top level folder, the folder is renamed to have the same basename as the archive
*   Otherwise a new containing folder is created

If the archives have AppleDouble files, unzip creates a __MACOSX folder instead of converting them back to extended attributes or other metadata. [unar](http://unarchiver.c3.cx/commandline) would preserve the information in AppleDouble files.

These would always create a folder with the same name as the archive:

```
for f in ~/Desktop/**/*.zip; do unzip "$f" -d "${f%.zip}"; done
find ~/Desktop -name \*.zip | parallel unzip {} -d {.} 
```

If `archive.zip` was normally extracted to `archive/`, the commands above would extract it to `archive/archive/`.

# c - 在 C 中读取文件

> ID：13651535
> 
> 赞同：0
> 
> 时间：2012-11-30T19:09:10.853
> 
> 标签：c, file, input

我和我的朋友正在做一个项目，我们需要从 C 文件中读取输入。

该文件如下所示：

```
15 25 200
3 10
17.99 22.99 109.99
100 2 4
5.99 99.99 20.00 49.99
10 10 10 10 10 10 10 10 10 10
3.99 5.99 7.99 8.00 5.00 5.00 5.00 6.00 7.00 9.99
5 
```

我需要逐行读取文件，并将每个值设置为不同的变量。例如，第一行的第一个值必须设置为变量 preSalePrices，第二个值 doorPrices，第三个 preSales。我需要帮助弄清楚如何指定每行上的值的数量。例如，我如何告诉程序在第一行获取三个值，但在第二行只获取两个值？然后是第五行的四个值，依此类推。

这是我的代码，但它只是崩溃：

```
int main() {
    float preSalePrices, doorPrices;
    int preSales;
    FILE *fp;
    fp = ("C://Users//Jake//Desktop//Charity Ball//auction01.txt", "r");

    while(fscanf(fp, "%f %f %i", &preSalePrices, &doorPrices, &preSales) != EOF) {
        printf("%f, %f, %i", preSalePrices, doorPrices, preSales);               
    } 
} 
```

我在整个互联网上都看过，我找不到任何与此相关的具体内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:14:29.743

如果您总是知道每行中的值的数量，则可以忽略行尾并一一读取值。

如果行尾很重要，最简单的方法是分别读取每一行（例如`fgets`），然后从那里读取数据，使用`sscanf`.

# jquery - 在jquery中放置x以关闭对话框

> ID：13651536
> 
> 赞同：0
> 
> 时间：2012-11-30T19:09:19.177
> 
> 标签：jquery, dialog

我希望能够将 x 放在对话框的右上角而不是关闭文本。另外，我喜欢不能拖动这个对话框，你能帮忙在jquery中如何做这两件事吗？

```
<script type="text/javascript"> 
            jQuery(document).ready( function(){       
                jQuery("#lin").click( showDialog );

                //variable to reference window
                $myWindow = jQuery('#myDiv');

                //instantiate the dialog
                $myWindow.dialog({ height: 600,
                    width: 700,
                    modal: true,
                    draggable: true,
                    position: 'center',
                    autoOpen:false,
                    title:'Hello World',
                    overlay: { opacity: 0.5, background: 'black'}
                    });
                }

            );
        //function to show dialog   
        var showDialog = function() {
            //if the contents have been hidden with css, you need this
            $myWindow.show(); 
            //open the dialog
            $myWindow.dialog("open");
            }

        //function to close dialog, probably called by a button in the dialog
        var closeDialog = function() {
            $myWindow.dialog("close");
        }

    </script>

    </head>

    <body>

    <div id="myDiv">
        <p>this is a test</p>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:27:08.637

好吧，您在上面实现的内容对于您正在尝试做的事情来说看起来非常复杂。这是一个 jsFiddle，它显示了一个更基本的示例，似乎可以满足您想要做的事情：http: [//jsfiddle.net/pgNVa/2/](http://jsfiddle.net/pgNVa/2/)

我几乎直接从[jQueryUI 文档中窃取了代码](http://jqueryui.com/dialog/)

希望这可以帮助。

```
<a href="#" id="lin">Click Me!</a>   
<div id="dialog" title="Basic dialog" style="display:none;">
   <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>

<script type="text/javascript">
$(function() {
   $("#lin").click(function(){
     $( "#dialog" ).dialog();
   });
});
</script> 
```

​</p>

# android - 长按 EditText 时触发广播接收器

> ID：13651538
> 
> 赞同：2
> 
> 时间：2012-11-30T19:09:32.307
> 
> 标签：android, service, broadcastreceiver

我最近才开始使用 BroadcastReceivers，我想创建一个服务，当有人长按 editText 时会触发该服务。我认为在我的一部旧手机（原始 EVO 4G）上，如果您长按 editText，就会有一个监听器来更改输入法。现在（如果字段中有文本）并长按它，然后会出现剪切复制和粘贴的选项。

我想知道我应该为我的广播接收器（如果可能的话）使用什么意图过滤器来监听editTexts（在我的应用程序之外，例如在网络浏览器中）上的长按事件，以便我可以触发我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:13:01.120

> 我想知道我应该为我的广播接收器（如果可能）使用什么意图过滤器来监听 editTexts 上的长按事件

BroadcastReceiver 不会监听长点击事件，但 OnLongClickListeners 会。

```
editText.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        // Do something
        return false;
    }
}) 
```

> （在我的应用程序之外，例如在网络浏览器中），以便我可以触发我的应用程序？

我不相信这是可能的。

# gcc - 在没有 sudo 的服务器上安装隔离的 gcc

> ID：13651540
> 
> 赞同：1
> 
> 时间：2012-11-30T19:09:43.720
> 
> 标签：gcc, installation

我可以访问服务器（但在那里没有 root 权限）。长话短说，管理员不会升级到我需要的较新版本的 gcc，但建议我可以在本地安装它。

[尽管尝试遵循http://gcc.gnu.org/install/index.html](http://gcc.gnu.org/install/index.html)上的指南，但我在执行此操作时遇到了一些问题。我想使用服务器上现在安装的新版本的 GMP、MPFR 和 MPC。

我首先进入服务器上的主目录，`mkdir mygcc`然后`cd`进入（这是构建目录，不是 src 目录的子目录），从那里开始

```
/home/username/gcc-4.6.3/configure --with-gmp="/software/gmp-5.0.5" --with-  
gmp-include="/software/gmp-5.0.5/include" --with-gmp-lib="/software/gmp-5.0.5/lib" 
--with-mpfr="/software/mpfr-3.1.1" --with-mpfr-include="/software/mpfr-3.1.1/include"
--with-mpfr-lib="/software/mpfr-3.1.1/lib" --with-mpc-include="/home/username/usr/local
/include" --with-mpc-lib="/home/username/usr/local/lib" --prefix="/home/username/mygcc"
 --with-local-prefix="/home/username/usr/local" 
```

我解压缩的 src 文件位于`/home/pmxlh1/gcc-4.6.3`.

我还制作了目录`/home/username/usr/include`等`/home/username/usr/local`，并设置了前缀标志以尝试在那里安装各种东西，但如果我出于同样的原因将这些标志排除在外，它也会失败。

然而，当我开始制作时，它以

```
checking for suffix of object files... configure: error: in `/home/pmxlh1/mygcc/x86_64-  
unknown-linux-gnu/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details.
make[2]: *** [configure-stage1-target-libgcc] Error 1
make[2]: Leaving directory `/home/pmxlh1/mygcc'
make[1]: *** [stage1-bubble] Error 2
make[1]: Leaving directory `/home/pmxlh1/mygcc'
make: *** [all] Error 2 
```

不确定我是否以正确的方式进行此操作？但基本上我想将它安装在我的 home/dir 中，以便它使用正确的 GMP/MPFR/MPC，而不是可能潜伏在服务器其他地方的旧版本。

谢谢你的帮助

# c# - 如何从 int 创建引用类型

> ID：13651543
> 
> 赞同：10
> 
> 时间：2012-11-30T19:09:50.467
> 
> 标签：c#, .net

我试过：

```
int i = 5;
object o1 = i; // boxing the i into object (so it should be a reference type)
object o2 = o1; // set object reference o2 to o1 (so o1 and o2 point to same place at the heap)

o2 = 8; // put 8 to at the place at the heap where o2 points 
```

运行此代码后，o1 中的值仍为 5，但我预计为 8。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T19:18:02.010

这不是 C# 中变量的工作方式。它与装箱值类型无关。

考虑一下：

```
object o1 = new object();
object o2 = o1;

o2 = new object(); 
```

为什么你会期望`o1`并`o2`包含对同一个对象的引用？设置时它们是相同的`o2 = o1`，但是一旦设置`o2 = new object()`，值（变量指向的内存位置）`o2`就会发生变化。

也许你想要做的事情可以这样做：

```
class Obj {
    public int Val;
}

void Main() {
    Obj o1 = new Obj();
    o1.Val = 5;
    Obj o2 = o1;
    o2.Val = 8;
} 
```

最后`Main`， 的`Val`属性`o1`将包含`8`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T19:22:59.140

要执行您想要执行的操作，该值必须是引用类型的属性：

```
public class IntWrapper
{
    public int Value { get; set; }
    public IntWrapper(int value) { Value = value; }
}

IntWrapper o1 = new IntWrapper(5);
IntWrapper o2 = o1;

o2.Value = 8; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T22:01:12.237

@Ken 给你完美的答案。这是如何使用`struct`（值类型）获得相同的行为。

**注意**：可变值类型有非常不直观的行为，不要在家里尝试这个:)。

要获得与值类型类似的行为，您需要实现一些接口并通过接口设置属性，因为取消装箱`struct`到它自己的类型将始终创建副本并且您将无法修改原始值。

```
void TortureMutableBoxedValueType()
{
  object o1 = new IntWrapper(5);
  object o2 = o1;
  Console.WriteLine(((IValue)o1).Value); // outputs original 5
  ((IValue)o2).Value = 8; 
  Console.WriteLine(((IValue)o1).Value); // outputs new 8
}

interface IValue 
{
  int Value {get;set;}
}

// Don't use mutable value types - this is just sample.
public struct IntWrapper : IValue 
{
  int v;
  public int Value { get { return v;} set {v = value;}}
  public IntWrapper(int value) { v = value; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:22:49.847

正如 Joel 指出的那样，即使 boxed 它仍然是一个值类型，因此它没有被引用，它被克隆了。这就是您看到此结果的原因 - o1 和 o2 指向不同的内存位置。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-09-17T18:35:24.310

也许不相关，但是如果您正在寻找一个整数作为引用类型（例如在某个方法中传递变量并对其进行一些操作并在退出方法后保留该值），那么您可以使用 ref 关键字。像这样：

```
int index = 0;

SomeMethod(ref index); 
```

方法是这样的：

```
public void SomeMethod(ref int parameter)
{
   parameter++;
} 
```

# git - 您如何在 git 中的多个部署环境中保持独立和隔离的更改？

> ID：13651548
> 
> 赞同：2
> 
> 时间：2012-11-30T19:10:13.273
> 
> 标签：git, jakarta-ee, deployment, git-workflow

在我的工作场所，我们正在尝试设计一个基于 Git 的工作流来处理我们的部署和代码更改。

我们有一个 Java EE Web 应用程序和 3 个部署环境（测试、QA 和生产）。我们还有一个 Jenkins CI 实例来处理构建和部署。

当对应用程序的代码（在分支中）进行更改时，我们需要能够挑选出哪些被提升到 QA 和 Production 的代码。有些人可能会进行质量检查，然后永远不会投入生产。

我们还需要避免在升级和合并时意外将其他所有人的代码包含在您的分支中。

分支的“提升”也需要自动化 - 分析师将选择分支或变更集，然后 jenkins 或其他一些脚本将执行实际的合并和部署。我在这里看到合并冲突是一个问题......

您会如何建议设置 (a) Git 存储库来处理这些要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:14:02.637

正如我在“[使用 Git 进行代码提升](https://stackoverflow.com/a/3032126/6309)”中提到的，不要忘记分支*不是*隔离开发工作的唯一方式（例如跨环境提升）。

您自己也有 git 存储库，并且可以将 git 存储库分配给特定角色（“测试”存储库、“QA”存储库等）

结合[Gitolite](http://sitaramc.github.com/gitolite/index.html#what)，您可以保护这些存储库免受不应直接推送到开发生命周期中某个阶段的用户的访问。

还与受**[保护的提交](https://stackoverflow.com/questions/3209208/what-is-the-cleverest-use-of-source-repository-that-you-have-ever-seen/3209767#3209767)**结合使用，您可以推送到测试存储库，该存储库将：

*   如果未通过编译和/或某些单元测试，则拒绝您的提交
*   或接受它，*并自动将其推*送到 QA repo 以供审查。

# visual-studio - 如何使用 Resharper 在 Visual Studio 中快速移动到生成的大括号/括号/等的末尾？

> ID：13651552
> 
> 赞同：0
> 
> 时间：2012-11-30T19:10:52.303
> 
> 标签：visual-studio, resharper

我的 google fu 让我失望了。Visual Studio 和 Resharper 有助于提供右括号等。例如，键入“var foo = new Foo(”会立即插入一个 )。伟大的！所以我去插入一堆其他的东西。我知道我可以只输入结束字符，它会很好地掩盖，但是当我做这样的事情时......

```
var foo = new Foo(new Bar()
{
    Something = 48,
    SomethingElse = new Fred(new Bob())
}; 
```

在输入 Bob 之后，就生成了其余部分。我希望能够干净地移动到生成的代码的末尾并移动到下一行，而无需触摸箭头键。一个更简单的例子：

```
if (something)
{
    Something();
} 
```

最后一个花括号是为我制作的，但我想在不触摸箭头键的情况下跳过它。有没有我想念的捷径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:20:05.613

继续打字。键入结束符“)”（ReSharper 将移过它），然后键入分号（ReSharper 将输入它）。

# javascript - 如何防止绝对定位的元素在窗口调整大小时重叠？

> ID：13651556
> 
> 赞同：0
> 
> 时间：2012-11-30T19:11:03.047
> 
> 标签：javascript, css, animation

我的动画脚本修改了 div 文本元素的绝对位置。我正在尝试找出防止元素在窗口上重叠或调整文本大小的最佳方法。理想情况下，它将采用液体布局。

感谢您提供任何帮助！这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Untitled Page</title>
<style type="text/css">
    .slogan
    {
        font-weight: bold;
        font-size: 1.5em;
        width: 12em;
        margin: 0.5em;
        cursor: pointer;
    }
    #slogan1
    {
         position: absolute;
         left: -250px;     
         margin-right: 1em;                    
    }
    #slogan2
    {
         position: absolute;
         left: -250px; 
    }
</style>
<script type="text/javascript">

    window.onload = slideRight;

    function slideRight() {                  
        //code that slides slogan1 and slogan2 into place on page load   
        //by assigning to divElement.style.left recursively
        slider = document.getElementById('slogan1');
        slider.style.left = '5%';
        slider = document.getElementById('slogan2');
        slider.style.left = '50%';
    }               
</script>
</head>
<body>
<div class="slogan" id="slogan1">Some
    <div id="rep1">
        <p>Some copy that represents parent slogan ipso lorum 1234567890 2345 7890 234567890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890</p>
        <p>More copy that represents parent slogan ipso lorum 1234567890 2345 7890 234567890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890?</p>
        <p>More copy that represents parent slogan ipso lorum 1234567890 2345 7890 234567890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890!</p>
    </div>
</div>          
<div class="slogan" id="slogan2">Slogan
    <div id="rep2">
        <p>Some copy that represents parent slogan ipso lorum 1234567890 2345 7890 234567890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890</p>
        <p>More copy that represents parent slogan ipso lorum 1234567890 2345 7890 234567890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890?</p>
        <p>More copy that represents parent slogan ipso lorum 1234567890 2345 7890 234567890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890 2345 7890!</p>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:25:32.123

你不..这正是为什么应尽可能避免绝对位置的原因。

绝对位置意味着像素固定在某个位置。如果您调整窗口大小，元素将保留您给它们的位置，如果这意味着它们将重叠，那就是它们将执行的操作。

如果您希望您的内容适应屏幕大小，请使用浮动元素而不是绝对定位元素。

# c - 这个程序中的 strcmp 有什么问题？

> ID：13651557
> 
> 赞同：2
> 
> 时间：2012-11-30T19:11:11.943
> 
> 标签：c, strcmp

当我运行程序并回答“是”时，它告诉我我错了。有人知道执行此类程序的方法吗？

```
#include <string.h>
#include <stdio.h>
int strcmp(const char *str1,const char *str2 );

// I am trying to make a program that asks the user to input an answer 
int main() 
{
    char answer[20];

    printf("Can birds fly?\n");   
    scanf("%s", &answer[20]);    

    if(strcmp(answer, "yes") == 0)  
    {
        printf("You are right"); 
    }else
    {
        printf("You are worng"); 
    }

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T19:13:49.807

更改此行：

```
scanf("%s", &answer[20]); 
```

至：

```
scanf("%s", answer); 
```

您必须传递到`scanf`要放置字符串的地址，然后选择字符串`answer[20]`中第 21 个字符的值（未定义，因为字符串只有 20 个字符），然后获取指向它的指针（垃圾，您甚至可以获得访问冲突）。

# angularjs - 如何“取消观看”表达式

> ID：13651578
> 
> 赞同：70
> 
> 时间：2012-11-30T19:12:26.733
> 
> 标签：angularjs

假设我有一个带有大数组的 ng-repeat。

当 ng-repeat 运行时，它会将该数组的每个元素添加到一个独立的作用域中，并将数组本身放在一个作用域中。这意味着 $digest 检查整个数组是否有更改，最重要的是，它会检查该数组中的*每个单独元素*是否有更改。

[将此 plunker](http://plnkr.co/edit/ui7HTm?p=preview)视为我正在谈论的示例。

在我的用例中，我从不更改数组的单个元素，因此我不需要监视它们。我只会更改整个数组，在这种情况下 ng-repeat 会重新渲染整个表格。（如果我错了，请告诉我..）

在（比如说）1000 行的数组中，还有 1000 个我不需要评估的表达式。

**如何在观察主数组的同时从观察者注销每个元素？**

也许不是取消注册，我可以更好地控制我的 $digest 并以某种方式跳过每一行？

这个具体案例实际上是一个更普遍的问题的例子。我知道[$watch 返回一个“取消注册”功能](https://groups.google.com/d/msg/angular/UFJ3_5VZsEI/w2pXyWvmcLoJ)，但是当指令注册手表时，这无济于事，这在大多数情况下都是如此。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-30T19:53:01.037

**拥有一个带有大型阵列的中继器，您不会观看每个项目。**

您需要创建一个自定义指令，该指令接受一个参数和数组的表达式，然后在链接函数中您只需观察该数组，并且您将让链接函数以编程方式刷新 HTML（而不是使用ng-重复）

类似（伪代码）：

```
app.directive('leanRepeat', function() {
    return {
        restrict: 'E',
        scope: {
           'data' : '='
        },
        link: function(scope, elem, attr) {
           scope.$watch('data', function(value) {
              elem.empty(); //assuming jquery here.
              angular.forEach(scope.data, function(d) {
                  //write it however you're going to write it out here.
                  elem.append('<div>' + d + '</div>');
              });
           });
        }
    };
}); 
```

......这似乎是一个痛苦的屁股。

**替代hackish方法**

您也许可以循环`$scope.$$watchers`并检查`$scope.$$watchers[0].exp.exp`它是否与您要删除的表达式匹配，然后通过简单的`splice()`调用将其删除。这里的 PITA 是`Blah {{whatever}} Blah`标签之间的内容将是表达式，甚至包括回车。

从好的方面来说，您可能只需遍历 ng-repeat 的 $scope 并删除所有内容，然后显式添加您想要的手表......我不知道。

无论哪种方式，这似乎都是一个黑客。

**删除由 $scope.$watch 制作的观察者**

您可以`$watch`使用调用返回的函数取消注册 a `$watch`：

例如，`$watch`只有一次火灾：

```
var unregister = $scope.$watch('whatever', function(){ 
     alert('once!');
     unregister();
}); 
```

当然，您可以随时调用 unregister 函数……这只是一个示例。

**结论：没有真正的好方法可以完全按照您的要求进行**

但要考虑的一件事：它甚至值得担心吗？此外，将数千条记录分别加载到数十个 DOMElement 中真的是个好主意吗？深思熟虑。

我希望这会有所帮助。

* * *

**编辑 2（删除了坏主意）**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-22T18:07:50.353

$watch 返回一个在调用时取消绑定 $watch 的函数。这就是“watchOnce”所需的全部内容：

```
var unwatchValue = scope.$watch('value', function(newValue, oldValue) {
  // Do your thing
  unwatchValue();
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-28T12:16:53.667

编辑：查看我发布的其他答案。

我已经以可分离的方式实现了 blesh 的想法。我的指令只是破坏了在每个项目`ngOnce`上创建的子范围。`ngRepeat`这意味着范围不会从其父母那里得到，`scope.$digest`并且观察者永远不会被执行。

[JSFiddle 上的源代码和示例](http://jsfiddle.net/FsUuH/3/)

指令本身：

```
angular.module('transclude', [])
 .directive('ngOnce', ['$timeout', function($timeout){
    return {
      restrict: 'EA',
      priority: 500,
      transclude: true,
      template: '<div ng-transclude></div>',
        compile: function (tElement, tAttrs, transclude) {
            return function postLink(scope, iElement, iAttrs, controller) {
                $timeout(scope.$destroy.bind(scope), 0);
            }
        }
    };
}]); 
```

使用它：

```
 <li ng-repeat="item in contents" ng-once>
          {{item.title}}: {{item.text}}
      </li> 
```

**Note** `ng-once`不会创建自己的范围，这意味着它可以影响同级元素。这些都做同样的事情：

```
 <li ng-repeat="item in contents" ng-once>
      {{item.title}}: {{item.text}}
  </li>
  <li ng-repeat="item in contents">
      <ng-once>
          {{item.title}}: {{item.text}}
      </ng-once>
  </li>
  <li ng-repeat="item in contents">
      {{item.title}}: {{item.text}} <ng-once></ng-once>
  </li> 
```

**请注意** [，这可能是个坏主意](https://github.com/angular/angular.js/issues/2720)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-25T14:20:50.207

您可以将`bindonce`指令添加到您的`ng-repeat`. 您需要从[https://github.com/pasvaz/bindence](https://github.com/pasvaz/bindonce)下载它。

**编辑**：一些警告：

如果您`{{}}`在模板中使用插值，则需要将其替换为`<span bo-text>`.

如果您使用`ng-`指令，则需要用正确的`bo-`指令替换它们。

此外，如果您将`bindonce`and`ng-repeat`放在同一个元素上`bindonce`，您应该[尝试](https://github.com/Pasvaz/bindonce/issues/25#issuecomment-25457970)将`track by``ng-repeat`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-31T08:29:33.103

如果您正在使用`angularjs 1.3`或以上，您可以使用单一绑定语法作为

```
<li ng-repeat="item in ::contents">{{item}}</li> 
```

这将绑定该值，并在第一个摘要周期运行并且该值第一次从`undefined`变为时删除观察者`defined`。

一个非常有用的[博客](https://toddmotto.com/angular-one-time-binding-syntax/)。

# php - 清理数组的某些部分

> ID：13651580
> 
> 赞同：0
> 
> 时间：2012-11-30T19:12:28.967
> 
> 标签：php, arrays

我使用以下代码导入具有两列的 csv - 帐户和电话：

```
$csv = array();
$file = fopen('import.csv', 'r');

while (($result = fgetcsv($file)) !== false)
{
    $csv[] = $result;
}

fclose($file); 
```

结果看起来像：

```
Array
(
    [0] => Array
        (
            [0] => 5182334
            [1] => (360) 293-7786
        )

    [1] => Array
        (
            [0] => 8372855
            [1] => (360) 755-3237
        )

    [2] => Array
        (
            [0] => 8373250
            [1] => (360) 873-8853
        )

    [3] => Array
        (
            [0] => 8373226
            [1] => (360) 588-1905
        )
) 
```

我需要做的是循环遍历数组并清理电话号码，删除空格、参数等。我知道如何进行清理，但不知道如何遍历数组进行所述清理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:17:43.550

例如，您可以使用`array_map`和`preg_replace`。

```
function clean($item) {
   $item[1] = preg_replace('#[^\d]#', '', $item[1]);
   return $item;
}

$csv = array_map("clean", $csv); 
```

或者直接在加载阶段：

```
$csv = array();
$file = fopen('import.csv', 'r');

while (($result = fgetcsv($file)) !== false)
{
    $result[1] = preg_replace('#[^\d]#', '', $result[1]);
    $csv[] = $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:15:01.093

尝试：

```
$arr = array(....); //your array
//Removing '(', ')', ' ' and '-' from the array values.
foreach($arr as $v)
 $v = str_replace(array(' ', '(', ')', '-'), '', $v); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:20:05.867

```
$search = array(' ', '-', '(', ')'); 
foreach($csv as &$line) {
    $line[1] = str_replace($search, '', $line[1]);
} 
```

# css - 是什么 CSS 元素使这个文本如此之小？

> ID：13651581
> 
> 赞同：0
> 
> 时间：2012-11-30T19:12:29.600
> 
> 标签：css

如果你去这里 - [http://www.joecrabtree.com/store](http://www.joecrabtree.com/store) - 并将产品添加到购物车，购物车中的所有文本都比其他所有文本都小。

我在 Chrome 的元素检查器中玩过，但找不到任何可以更改的内容，这些内容可以使购物车文本变大而不影响页面上的其余文本。

也就是说，我不明白是什么使它比其他所有东西都小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:15:19.980

看起来封闭`<td>`标签包含以下样式：

```
media="all"
body, caption, th, td, input, textarea, select, option, legend, fieldset {
    font: 0.75em/1.6em Helvetica, Arial, sans-serif;
} 
```

从 style.css 的第 34 行开始。我看到您对表格单元格的嵌套父级有类似的规范。这些可以产生累积效应。

我可以建议您以点或像素为单位指定字体大小吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:16:24.227

**样式.css 第 34 行**：

```
body, caption, th, td, input, textarea, select, option, legend, fieldset {
    font: 0.75em/1.6em Helvetica,Arial,sans-serif;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:28:12.077

`em`字体大小是相对于当前大小的..

当您嵌套与 1 不同的元素时，您`font-size`的嵌套越深，您的字体就会逐渐变大或变小。.

示例[http://jsfiddle.net/gaby/NcKNF/](http://jsfiddle.net/gaby/NcKNF/)

您的代码具有元素`0.75em`的字体大小`td`，甚至更高的 DOM 具有`#cart-block-contents-ajax`字体`0.9em`大小。不断地..

你目前的结构是

```
#page 0.83em  
    .sidebar 0.95em  
        #ajaxCartUpdate 0.95em  
            #cart-block-contents-ajax 0.9em
                时差 0.75em

```

所以你在 DOM 中走得越深，它就会越小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:21:40.550

问题似乎是小于 1em 的级联字体大小：

来自萤火虫：

```
#cart-block-contents-ajax   0.9em   style.css?H (line 870)

#page   font-size: 0.83em   style.css?H (line 30)

.sidebar    font-size: 0.95em   style.css?H (line 297)

body    font-size: 100% layout.css?H (line 149)

body    font-size: 0.75em   style.css?H (line 34)

td          font-size: 0.75em   style.css?H (line 34) 
```

所以`body`设置为`100%`，然后重置为`0.75em`，然后是`.83em`(#page)，然后是`.95em`(.sidebar)，然后是`.75em`(td)，最后`.9em`是 (#cart-block-contents-ajax)

所以这是 .9 of .75 of .95 of .83 of .75 of 100% = .399 em

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T19:35:25.003

您可以将其添加到您的 css 中，它将覆盖任何其他导致您的字体变小的 css。这只会影响您购物车中的内容。

```
/*cart item */
.block .content #cart-block-contents-ajax .cart-block-items tbody .odd {font-size:15px;}

/* remove product links */
.block .content #cart-block-contents-ajax .cart-block-items tbody .cart-block-item-desc {font-size:15px; font-weight:bold;}

/* Total Items */
.cart-block-summary-items,.cart-block-summary-total {font-size:15px; padding:5px}

/* View cart and Checkout links */
.cart-block-summary-links .links {font-size:15px; font-weight:bold;} 
```

希望这可以帮助。

并回答您的问题：添加到的这个属性`body`是使您的字体变小的原因：

`font: 0.75em/1.6em Helvetica, Arial, sans-serif;`

# c# - XPath / 在后面的代码中抓取节点值

> ID：13651583
> 
> 赞同：3
> 
> 时间：2012-11-30T19:12:37.920
> 
> 标签：c#, asp.net, xml, repeater, xmldatasource

我是 ASP.NET 的新手（PHP 程序员 8 年），所以如果我的术语不正确，请原谅我。

我目前正在中继器中获取远程 XML 文件`XMLDataSource`，并且在`DataFile`后面的代码中设置了属性（我`DataFile`根据 URI 参数进行了动态更改，例如 ?cat=blah 等）。这很好用，不是问题。

在这个转发器中是一个`<asp:HyperLink>`，其 URL 也将在后面的代码中动态更改。

**现在的问题：**

从后面的代码来看，如何查看 XML 节点是否为空，如何获取非空节点的值？

我已经在这个问题上讨论了大约 3 天（搜索了几个小时），但是我就是想不出看起来应该如此简单的东西！这是我目前拥有的代码，但是`Object reference not set to an instance of an object`对于具有`CreateNavigator();`

希望比我更擅长 ASP.NET 和 C# 的人可以轻松发现问题或知道我可以完成此任务的方法吗？

**代码**

```
<asp:XmlDataSource ID="rssFeed" runat="server"></asp:XmlDataSource>
<asp:Repeater runat="server" DataSourceID="rssFeed" OnItemDataBound="Repeater_ItemDataBound">
        <ItemTemplate>
                <asp:HyperLink ID="articleURL" Text='<%#XPath("title")%>' runat="server" />
        </ItemTemplate>
</asp:Repeater> 
```

**C# 背后的代码**

```
protected void Page_Load(object sender, EventArgs e)
{
        // rss variables
        var rssSource = "http://websiteurl.com/xmlfeed/";
        var rssPath = "rss/channel/item";
        var searchQueries = "?foo=bar";
        string currCat = Request.QueryString["cat"];
        string searchTerms = Request.QueryString["s"];

        // insert categories query
        if(currCat != null){
                searchQueries += "&cat=" + currCat;
        }

        // insert search query
        if(searchTerms != null){
                searchQueries += "&s=" + searchTerms;
        }

        // load RSS file
        rssFeed.DataFile = rssSource + searchQueries;
        rssFeed.XPath = rssPath;
}

protected void Repeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
        XPathNavigator nav = ((IXPathNavigable)e.Item.DataItem).CreateNavigator();
        string hyperlinkURL = nav.SelectSingleNode("link").Value;
        // removed code here that changes URL to hyperlinkURL to shorten post
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:44:52.940

对于那些可能对此感兴趣的人，我找到了一个可以轻松检查和操作 xml 项的解决方案。

```
protected void Repeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    // make sure we are not checking item in ItemHeader or ItemFooter to prevent null value
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
        string myVar = XPathBinder.Eval(e.Item.DataItem,"title").ToString();

        // utilize and manipulate myVar XML value here
    }
} 
```

# mongodb - MongoDB 不显示子文档中的所有元素

> ID：13651586
> 
> 赞同：0
> 
> 时间：2012-11-30T19:12:48.277
> 
> 标签：mongodb

我有以下结构的文件：

```
{
  "_id" : ObjectId("50b8f881065f90c025000014"),
  "education" : {
    "schoolCountry" : 4,
    "schoolTown" : -1,
    "uniCountry" : 4,
    "uniTown" : -1
  },
  "info" : {
    "ava" : "auto.jpg",
    "birthday" : ISODate("1942-04-01T21:00:00Z"),
    "email" : "mail@gmail.com",
    "name" : "name",
    "sex" : 1,
    "surname" : "surname"
  }
} 
```

我试图只输出姓氏和名字

我唯一能做到的是：

```
db.COLL.find({ }, {
   "_id" : 0,
   "education" : 0,
   "info" : 1
}) 
```

我只显示子文档中我需要的元素的想法失败了：

```
db.COLL.find({ }, {
   "_id" : 0,
   "education" : 0,
   "info.surname" : 1,
   "info.name" : 1,
}) 
```

但隐藏 (info.email : 0) 有效。是否可以在不隐藏所有不需要的字段的情况下实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:10:44.963

`_id`除了关闭（默认包含）之外，您不能混合包含和排除字段。

所以只需请求`info.surname`和`info.name`字段：

```
db.coll.find({ }, {
    "_id" : 0,
    "info.surname" : 1,
    "info.name" : 1,
}) 
```

样本输出：

```
{ "info" : { "name" : "name", "surname" : "surname" } } 
```

# cocoa - CABasicAnimation 后 NSView 不响应鼠标事件

> ID：13651591
> 
> 赞同：1
> 
> 时间：2012-11-30T19:12:57.560
> 
> 标签：cocoa, animation, core-animation, mouseevent

我有一个动画，可以为 2 个视图的位置`pageLeft`和`pageRight`alpha 设置动画，总共有 4 个同步 `CABasicAnimation`s：

1.  将下一页移到视图中
2.  将当前页面移出视图
3.  淡入下一页
4.  淡出当前页面

一切都适用于动画和设置。这个问题是关于页面动画之后的鼠标事件。我发现动画运行后，`nextView` **没有**收到`mouseDown:`事件。如果动画没有运行，因为`shouldNotAnimate`块在下面运行，`nextView` **则**接收`mouseDown:`事件。

这意味着关于我设置我`CABasicAnimation`的 s 的方式并`CATransaction`导致了这种情况。我很困惑它可能是什么。有任何想法吗？

* * *

动画代码：

```
BOOL forward = currentIndex < index;

if (shouldNotAnimate) {
    // handles swapping pages faster than the animation duration
    [self.sourceViewContainer setSubviews:[NSArray array]];

    [nextView.layer removeAllAnimations];
    [nextView setFrame:self.sourceViewContainer.bounds];
    [nextView.layer setPosition:self.sourceViewContainer.bounds.origin];
    [nextView.layer setOpacity:1.0];
    [self.sourceViewContainer addSubview:nextView];

    [currentView removeFromSuperview];      
    [currentView.layer removeAllAnimations];
    [currentView setFrame:self.sourceViewContainer.bounds];
    [currentView.layer setPosition:self.sourceViewContainer.bounds.origin];
    [currentView.layer setOpacity:1.0];

    self.animationsRunning = NO;

} else {

    self.animationsRunning = YES;

    [CATransaction begin];
    [CATransaction setCompletionBlock:^{
        self.animationsRunning = NO;
    }];

    // Setup incoming push animation
    [nextView setFrame:CGRectMake(self.sourceViewContainer.bounds.size.width * (forward ? 1 : -1), 0, self.sourceViewContainer.bounds.size.width, self.sourceViewContainer.bounds.size.width)];
    [self.sourceViewContainer addSubview:nextView];
    CABasicAnimation *incomingAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
    incomingAnimation.fromValue = [NSValue valueWithPoint:nextView.frame.origin];
    incomingAnimation.toValue = [NSValue valueWithPoint:self.sourceViewContainer.bounds.origin];
    incomingAnimation.duration = PANEL_PAGE_SWIPE_ANIMATION_DURATION;
    incomingAnimation.removedOnCompletion = NO;
    incomingAnimation.fillMode = kCAFillModeForwards;
    incomingAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    incomingAnimation.completion = ^(BOOL finished) {
        [nextView.layer setPosition:self.sourceViewContainer.bounds.origin];
        [nextView.layer removeAnimationForKey:@"incoming"];
    };

    [nextView.layer addAnimation:incomingAnimation forKey:@"incoming"];

    // Setup outgoing push animation
    CGRect offscreen = CGRectMake(self.sourceViewContainer.bounds.size.width * (forward ? -1 : 1), 0, self.sourceViewContainer.bounds.size.width, self.sourceViewContainer.bounds.size.height);
    CABasicAnimation *outgoingAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
    outgoingAnimation.fromValue = [NSValue valueWithPoint:self.sourceViewContainer.bounds.origin];
    outgoingAnimation.toValue = [NSValue valueWithPoint:offscreen.origin];
    outgoingAnimation.duration = PANEL_PAGE_SWIPE_ANIMATION_DURATION;
    outgoingAnimation.removedOnCompletion = NO;
    outgoingAnimation.fillMode = kCAFillModeForwards;
    outgoingAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    outgoingAnimation.completion = ^(BOOL finished) {
        [currentView removeFromSuperview];
        [currentView.layer setPosition:self.sourceViewContainer.bounds.origin];
        [currentView.layer removeAnimationForKey:@"outgoing"];

    };
    [currentView.layer addAnimation:outgoingAnimation forKey:@"outgoing"];

    // Setup incoming alpha animation
    CABasicAnimation *fadeInAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    fadeInAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
    fadeInAnimation.toValue = [NSNumber numberWithFloat:1.0f];
    fadeInAnimation.duration = PANEL_PAGE_SWIPE_ANIMATION_DURATION;
    fadeInAnimation.removedOnCompletion = NO;
    fadeInAnimation.fillMode = kCAFillModeForwards;
    fadeInAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    fadeInAnimation.completion = ^(BOOL finished) {
        [nextView.layer setOpacity:1.0f];
        [nextView.layer removeAnimationForKey:@"fadeIn"];
    };
    [nextView.layer addAnimation:fadeInAnimation forKey:@"fadeIn"];

    // Setup outgoing alpha animation
    CABasicAnimation *fadeOutAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    fadeOutAnimation.fromValue = [NSNumber numberWithFloat:1.0f];
    fadeOutAnimation.toValue = [NSNumber numberWithFloat:0.0f];
    fadeOutAnimation.duration = PANEL_PAGE_SWIPE_ANIMATION_DURATION;
    fadeOutAnimation.removedOnCompletion = NO;
    fadeOutAnimation.fillMode = kCAFillModeForwards;
    fadeOutAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    fadeOutAnimation.completion = ^(BOOL finished) {
        [currentView removeFromSuperview];
        [currentView.layer setOpacity:1.0f];
        [currentView.layer removeAnimationForKey:@"fadeOut"];

    };
    [currentView.layer addAnimation:fadeOutAnimation forKey:@"fadeOut"];

    [CATransaction commit];

} // Run animations 
```

* * *

**解决方案**

我必须在完成块中显式设置视图框架，即使我在动画调用之前就已经这样做了。

```
 [CATransaction begin];
    [CATransaction setCompletionBlock:^{
        self.animationsRunning = NO;
        [nextView setFrame:self.sourceViewContainer.bounds];
    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:43:19.153

我想我知道发生了什么。

CAAnimation 对象实际上并没有改变它们动画的底层属性。相反，它将属性应用于表示层，而不是常规层。当您使用 removedOnCompletion=false 创建动画时，表示层会在动画完成后保持活动状态，但底层属性仍不会更改。另外，移动视图的层并不会移动视图本身，因此它不会响应用户在新位置的交互。

我建议使用 UIView 块动画（UIView animateWithDuration:completion: and it's relatives）而不是使用 CAAnimation 对象来移动您的视图。这些方法实际上将视图移动到它的新位置，以便在动画完成后响应最终位置的用户交互。

您可以在一个动画块中完成所有移动和 alpha 更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:51:53.690

我曾经遇到过 iOS 的问题，其中 UIMapView 因为调用地图视图而在动画后无响应。动画完成后，不知何故 userInteractionEnable 被设置为 FALSE。

如果是这种情况，您可以做的测试是断言 userInteractionEnable 的值为 TRUE。

```
assert(view.userInteractionEnable != FALSE); // ensure user interaction is enabled 
```

您可能会发现，当您运行应用程序时，它会在此断言上中断。如果是这样，您只需将其设置为 TRUE，您的应用程序就会按预期运行。

至于我的 UIMapView 问题，在 iOS 版本更新后问题就消失了，因此很可能是由边缘情况引起的错误。我提交了一个关于该问题的错误，这可能有助于提高对意外行为的认识。

# javascript - TinyTable 排序器得到一个未定义的

> ID：13651595
> 
> 赞同：0
> 
> 时间：2012-11-30T19:13:09.087
> 
> 标签：javascript, jquery, html-table

我正在尝试使用 TinyTableV3 JQuery 插件；但是，我不断收到“未定义”不存在错误。然后，当单击列进行排序时，我得到“排序器”不存在错误。这表明存在初始化问题，但由于该插件似乎没有自述文件，我不确定它可能出错的地方。代码如下。帮助？

```
<html>
<head>    
    <script type="text/javascript" src="javascript/jquery.1.8.3.min.js"></script>
    <script type="text/javascript" src="javascript/TinyTableV3/script.js"></script>
    <script type="text/javascript">
        var sorter;
        $(document).ready(function () {
            sorter = new TINY.table.sorter('sorter', 'listtbl', {
                headclass: 'head',
                ascclass: 'asc',
                descclass: 'desc',
                evenclass: 'evenrow',
                oddclass: 'oddrow',
                evenselclass: 'evenselected',
                oddselclass: 'oddselected',
                paginate: false,
                size: 100,
                sortcolumn: 1,
                sortdir: 1,
                init: true
            });
        });
    </script>
</head>
<body>
        <table id="listtbl" class="listtbl">
            <tr>
                <th>number</th>
                <th>name</th>
                <th>address</th>
                <th>comment</th>
            </tr>
            <tr>
                <td>97</td>
                <td>bob</td>
                <td>666 mantime</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>912</td>
                <td>daisy</td>
                <td>856 mantime</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>24</td>
                <td>john</td>
                <td>666 sooome</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>365</td>
                <td>kindle</td>
                <td>66 mantimed</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>56</td>
                <td>ishmael</td>
                <td>12 diddles</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>234</td>
                <td>hoppy</td>
                <td>666 mantime</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>43</td>
                <td>snaps</td>
                <td>666 mantime</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>123</td>
                <td>pickpic</td>
                <td>666 mantime</td>
                <td>this is a comment</td>
            </tr>
            <tr>
                <td>15</td>
                <td>hahazabamadan</td>
                <td>666 mantime</td>
                <td>this is a comment</td>
            </tr>
        </table>
</body>
</html> 
```

[在http://www.scriptiny.com/2009/11/advanced-javascript-table-sorter/](http://www.scriptiny.com/2009/11/advanced-javascript-table-sorter/)找到的小表 v3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:37:58.460

尝试将您的重命名`var tinytable`为`var sorter`- 这似乎是这个小提琴 [http://jsfiddle.net/cP6qv/中的问题](http://jsfiddle.net/cP6qv/)

您的 html 也被混淆了 - 您的 body 标签在您的 head 标签内。ETC..

您还应该使用标签来包裹您的和包裹​​您的表格主体

# jquery - `'jQuery.timer.global' 为空或不是对象`

> ID：13651596
> 
> 赞同：1
> 
> 时间：2012-11-30T19:13:14.437
> 
> 标签：jquery, internet-explorer-8, ie-developer-tools, ie8-browser-mode

我在其中一台计算机上的 IE8 中收到以下错误，但在另一台计算机上没有：

> 'jQuery.timer.global' 为 null 或不是对象

错误来自`jquery.timers.js`本节中的文件（`var global`定义在哪里）：

```
if (jQuery.browser.msie)
    jQuery(window).one("unload", function() {
        var global = jQuery.timer.global;
        for ( var label in global ) {
            var els = global[label], i = els.length;
            while ( --i )
                jQuery.timer.remove(els[i], label);
        }
    }); 
```

我不知道这段代码的用途或作用，但这显然是问题的根源，因为最初导致我出现在这里的错误与在一台计算机上运行的鼠标事件的时间有关，但是不是我发现这个 JS 错误的地方。

我能想到的计算机之间的唯一区别是它的工作原理实际上是运行 IE10，但设置为 IE8 文档/标准模式。过去我发现 IE 文档模式是可靠的，但也许这就是问题所在？

这个错误是什么意思，为什么它显示不一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:14:33.120

Not sure why the error is showing up in IE8.

Your plugin appears to be v1.0 and comes from the old JQuery plugin repository:

[http://archive.plugins.jquery.com/node/3656/release](http://archive.plugins.jquery.com/node/3656/release)

And the author put in a fix in a later release of this plugin for `JQuery.timer.global` but doesn't say what was fixed.

The plugin repository has been shut down, but you can download the latest version (1.2) of this plugin (still quite old - 2009) here and give it a try:

[https://github.com/patryk/jquery.timers/blob/master/jquery.timers.js](https://github.com/patryk/jquery.timers/blob/master/jquery.timers.js)

# android - 放大时 MapView 覆盖消失（填充区域）

> ID：13651597
> 
> 赞同：0
> 
> 时间：2012-11-30T19:13:17.607
> 
> 标签：android, android-mapview, android-canvas, zooming, ondraw

我的问题是，当我放大到更高级别时，绘图填充区域消失了。

这将是一个非常跟进的话题： [Android MapView 覆盖在放大时消失](https://stackoverflow.com/questions/13513578/android-mapview-overlay-disappearing-when-zooming-in)

上面的链接解决了我画线的问题，但填充区域仍然存在同样的问题。

我也需要帮助来解决填充区域。

我当前的代码如下：

```
class MyOverlay extends Overlay {
    private final List<GeoPoint>    points;
    private int             oldX;
    private int             oldY;

    public MyOverlay(List<GeoPoint> points) {
        this.points = points;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow);

        int x1 = -1;
        int y1 = -1;
        int x2 = -1;
        int y2 = -1;

        Paint paint = new Paint();
        paint.setStyle(Paint.Style.STROKE);

        paint.setColor(Color.GREEN);
        paint.setStrokeWidth(5);
        int size = points.size();
        for (int i = 0; i <= size; i++) {
            Point point = new Point();
            mapView.getProjection().toPixels(points.get(i % size),
                point);
            x2 = point.x;
            y2 = point.y;
            if (i > 0) {
                canvas.drawLine(x1, y1, x2, y2, paint);
            }
            x1 = x2;
            y1 = y2;
        }

                    //the following are drawing the filled area

        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.FILL);
        paint.setAlpha(60);
        Projection projection = mapView.getProjection();
        Point p1 = new Point();
        Point p2 = new Point();
        Point p3 = new Point();
        projection.toPixels(gpoint1, p1);
        projection.toPixels(gpoint2, p2);
        projection.toPixels(gpoint3, p3);
        Path path = new Path();
        path.moveTo(p1.x, p1.y);
        path.lineTo(p2.x, p2.y);
        path.lineTo(p3.x, p3.y);
        canvas.drawPath(path, paint);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:28:52.420

您可以从此代码中获得帮助。

```
public abstract class BalloonItemizedOverlay<Item> extends
        ItemizedOverlay<OverlayItem> {

    private MapView mapView;
    private BalloonOverlayView balloonView;
    private View clickRegion;
    private int viewOffset;
    final MapController mc;

    /**
     * Create a new BalloonItemizedOverlay
     * 
     * @param defaultMarker
     *            - A bounded Drawable to be drawn on the map for each item in
     *            the overlay.
     * @param mapView
     *            - The view upon which the overlay items are to be drawn.
     */
    public BalloonItemizedOverlay(Drawable defaultMarker, MapView mapView) {
        super(defaultMarker);
        this.mapView = mapView;
        viewOffset = 0;
        mc = mapView.getController();
    }

    @Override
    public void draw(Canvas c, MapView m, boolean shadow) { // for disabling the
                                                            // shadow of overlay

        super.draw(c, m, false);
    }

    /**
     * Set the horizontal distance between the marker and the bottom of the
     * information balloon. The default is 0 which works well for center bounded
     * markers. If your marker is center-bottom bounded, call this before adding
     * overlay items to ensure the balloon hovers exactly above the marker.
     * 
     * @param pixels
     *            - The padding between the center point and the bottom of the
     *            information balloon.
     */
    public void setBalloonBottomOffset(int pixels) {
        viewOffset = pixels;
    }

    /**
     * Override this method to handle a "tap" on a balloon. By default, does
     * nothing and returns false.
     * 
     * @param index
     *            - The index of the item whose balloon is tapped.
     * @return true if you handled the tap, otherwise false.
     */
    protected boolean onBalloonTap(int index) {
        Globals.mapPinpointTap = true;
        return false;
    }

    /*
     * (non-Javadoc)
     * 
     * @see com.google.android.maps.ItemizedOverlay#onTap(int)
     */
    @Override
    protected final boolean onTap(int index) {

        boolean isRecycled;
        final int thisIndex;
        GeoPoint point;
        Globals.mapPinpointTap = true;

        thisIndex = index;
        point = createItem(index).getPoint();

        if (balloonView == null) {
            balloonView = new BalloonOverlayView(mapView.getContext(),
                    viewOffset);
            clickRegion = (View) balloonView
                    .findViewById(R.id.balloon_inner_layout);
            isRecycled = false;
        } else {
            isRecycled = true;
        }

        balloonView.setVisibility(View.GONE);

        List<Overlay> mapOverlays = mapView.getOverlays();
        if (mapOverlays.size() > 1) {
            hideOtherBalloons(mapOverlays);
        }

        balloonView.setData(createItem(index));

        MapView.LayoutParams params = new MapView.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, point,
                MapView.LayoutParams.BOTTOM_CENTER);
        params.mode = MapView.LayoutParams.MODE_MAP;

        setBalloonTouchListener(thisIndex);

        balloonView.setVisibility(View.VISIBLE);

        // /
        /*
         * String url = "http://maps.google.com/maps?q=" +
         * (point.getLatitudeE6() / 1E6) + "," + (point.getLongitudeE6() / 1E6);
         */
        // String url = "http://iceapp.coeus-solutions.de/api/map?location="
        // + (point.getLatitudeE6() / 1E6) + ","
        // + (point.getLongitudeE6() / 1E6);
        // Intent browserIntent = new Intent(Intent.ACTION_VIEW,
        // Uri.parse(url));
        // balloonView.getContext().startActivity(browserIntent);
        // /

        if (isRecycled) {
            balloonView.setLayoutParams(params);
        } else {
            mapView.addView(balloonView, params);
        }

        mc.animateTo(point);

        return true;
    }

    /**
     * Sets the visibility of this overlay's balloon view to GONE.
     */
    private void hideBalloon() {
        if (balloonView != null) {
            balloonView.setVisibility(View.GONE);
        }
    }

    /**
     * Hides the balloon view for any other BalloonItemizedOverlay instances
     * that might be present on the MapView.
     * 
     * @param overlays
     *            - list of overlays (including this) on the MapView.
     */
    private void hideOtherBalloons(List<Overlay> overlays) {

        for (Overlay overlay : overlays) {
            if (overlay instanceof BalloonItemizedOverlay<?> && overlay != this) {
                ((BalloonItemizedOverlay<?>) overlay).hideBalloon();
            }
        }

    }

    /**
     * Sets the onTouchListener for the balloon being displayed, calling the
     * overridden onBalloonTap if implemented.
     * 
     * @param thisIndex
     *            - The index of the item whose balloon is tapped.
     */
    private void setBalloonTouchListener(final int thisIndex) {

        try {
            @SuppressWarnings("unused")
            Method m = this.getClass().getDeclaredMethod("onBalloonTap",
                    int.class);
            Globals.mapPinpointTap = true;

            clickRegion.setOnTouchListener(new OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {

                    View l = ((View) v.getParent())
                            .findViewById(R.id.balloon_main_layout);
                    Drawable d = l.getBackground();

                    if (event.getAction() == MotionEvent.ACTION_DOWN) {
                        int[] states = { android.R.attr.state_pressed };
                        if (d.setState(states)) {
                            d.invalidateSelf();
                        }
                        return true;
                    } else if (event.getAction() == MotionEvent.ACTION_UP) {
                        int newStates[] = {};
                        if (d.setState(newStates)) {
                            d.invalidateSelf();
                        }
                        // call overridden method
                        onBalloonTap(thisIndex);
                        return true;
                    } else {
                        return false;
                    }

                }
            });

        } catch (SecurityException e) {
            if (Globals.SHOW_LOGS)
                Log.e("BalloonItemizedOverlay",
                        "setBalloonTouchListener reflection SecurityException");
            return;
        } catch (NoSuchMethodException e) {
            // method not overridden - do nothing
            return;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:21:54.407

您应该扩展 ItemizedOverlay 而不是 Overlay。

[与此处](https://developers.google.com/maps/documentation/android/hello-mapview) “第 2 部分：添加叠加项目”中所述类似地实现它

并向其中添加您的绘图方法和其他必要的东西。然后它应该工作。

# jquery - Twitter-Bootstrap Modal on Modal 自定义关闭

> ID：13651599
> 
> 赞同：2
> 
> 时间：2012-11-30T19:13:35.937
> 
> 标签：jquery, twitter-bootstrap

将 twitter 引导框架用于 Web 应用程序。我正在使用一个模态，其中我调用另一个模态，在另一个模态之上有一个模态。目前，如果您单击关闭“x”按钮，它会关闭两个模态窗口。我只想关闭顶部模式。

Modal 类定义从 bootstrap.js 的第 750 行开始。

**模态 HTML**

```
<div class="modal fade hide modal-creator" id="myModal_crop_image" style="display: none;height:600px;" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" data-target="#myModal_crop_image">×</button>
        <h3>Create New Gallery</h3>
    </div>
    <div class="modal-body">
        <img style="height:50%;" src="<?php echo base_url(); ?>data/001/images/album/014.jpg" alt="" />
    </div><!-- /modal-body -->

    <div class="modal-footer">

</div> 
```

**引导程序 JS**

```
!function ($) {

  "use strict"; // jshint ;_;

 /* MODAL CLASS DEFINITION
  * ====================== */

  var Modal = function (element, options) {
    this.options = options
    this.$element = $(element)
      .delegate('[data-dismiss="modal"]', 'click.dismiss.modal', $.proxy(this.hide, this))
    this.options.remote && this.$element.find('.modal-body').load(this.options.remote)
  }

  Modal.prototype = {

      constructor: Modal

    , toggle: function () {
        return this[!this.isShown ? 'show' : 'hide']()
      }

    , show: function () {
        var that = this
          , e = $.Event('show')

        this.$element.trigger(e)

        if (this.isShown || e.isDefaultPrevented()) return

        $('body').addClass('modal-open')

        this.isShown = true

        this.escape()

        this.backdrop(function () {
          var transition = $.support.transition && that.$element.hasClass('fade')

          if (!that.$element.parent().length) {
            that.$element.appendTo(document.body) //don't move modals dom position
          }

          that.$element
            .show()

          if (transition) {
            that.$element[0].offsetWidth // force reflow
          }

          that.$element
            .addClass('in')
            .attr('aria-hidden', false)
            .focus()

          that.enforceFocus()

          transition ?
            that.$element.one($.support.transition.end, function () { that.$element.trigger('shown') }) :
            that.$element.trigger('shown')

        })
      }

    , hide: function (e) {
        e && e.preventDefault()

        var that = this

        e = $.Event('hide')

        this.$element.trigger(e)

        if (!this.isShown || e.isDefaultPrevented()) return

        this.isShown = false

        $('body').removeClass('modal-open')

        this.escape()

        $(document).off('focusin.modal')

        this.$element
          .removeClass('in')
          .attr('aria-hidden', true)

        $.support.transition && this.$element.hasClass('fade') ?
          this.hideWithTransition() :
          this.hideModal()
      }

    , enforceFocus: function () {
        var that = this
        $(document).on('focusin.modal', function (e) {
          if (that.$element[0] !== e.target && !that.$element.has(e.target).length) {
            that.$element.focus()
          }
        })
      }

    , escape: function () {
        var that = this
        if (this.isShown && this.options.keyboard) {
          this.$element.on('keyup.dismiss.modal', function ( e ) {
            e.which == 27 && that.hide()
          })
        } else if (!this.isShown) {
          this.$element.off('keyup.dismiss.modal')
        }
      }

    , hideWithTransition: function () {
        var that = this
          , timeout = setTimeout(function () {
              that.$element.off($.support.transition.end)
              that.hideModal()
            }, 500)

        this.$element.one($.support.transition.end, function () {
          clearTimeout(timeout)
          that.hideModal()
        })
      }

    , hideModal: function (that) {
        this.$element
          .hide()
          .trigger('hidden')

        this.backdrop()
      }

    , removeBackdrop: function () {
        this.$backdrop.remove()
        this.$backdrop = null
      }

    , backdrop: function (callback) {
        var that = this
          , animate = this.$element.hasClass('fade') ? 'fade' : ''

        if (this.isShown && this.options.backdrop) {
          var doAnimate = $.support.transition && animate

          this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')
            .appendTo(document.body)

          if (this.options.backdrop != 'static') {
            this.$backdrop.click($.proxy(this.hide, this))
          }

          if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

          this.$backdrop.addClass('in')

          doAnimate ?
            this.$backdrop.one($.support.transition.end, callback) :
            callback()

        } else if (!this.isShown && this.$backdrop) {
          this.$backdrop.removeClass('in')

          $.support.transition && this.$element.hasClass('fade')?
            this.$backdrop.one($.support.transition.end, $.proxy(this.removeBackdrop, this)) :
            this.removeBackdrop()

        } else if (callback) {
          callback()
        }
      }
  } 
```

这是js的链接。[http://jsfiddle.net/dazaweb/5cR95/](http://jsfiddle.net/dazaweb/5cR95/)

关于我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:44:01.410

在您拥有的模态定义中`data-dismiss="modal"`，添加`data-target="#theIdOfTheModal"`

这将告诉它只关闭该特定模式

我创建了一个小提琴来演示这一点，它实际上可以在有或没有数据目标的情况下工作： [小提琴！](http://jsfiddle.net/Nv9dd/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T12:55:33.000

1.  在取消和关闭按钮中删除： data-dismiss="modal";
2.  然后添加一个类，例如：“close_modal”；
3.  在 javascript 中创建一个委托函数，如下所示：

Javascript：

```
$(document).on('click', 'button:button.close_modal', function ( event ) {
  event.preventDefault();
  var $this = $(event.currentTarget);
  var modalId = $this.closest('div.modal').attr('id');
  $('#'+modalId+'').modal('hide');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T20:01:38.530

添加到模态隐藏方法（最上面一行）

```
e & e.stopPropogation(); 
```

这将停止向父母和其他孩子冒泡事件。

此外，在转义方法中传递事件参数`hide()`（使其变为）。`hide(e)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-11T11:08:37.313

选择

```
$('#myModal .close').click(); 
```

# drupal - Drupal 自定义模块返回错误的标题

> ID：13651608
> 
> 赞同：1
> 
> 时间：2012-11-30T19:14:04.283
> 
> 标签：drupal, menu, title

对于我的 drupal 网站，在我的自定义模块 (hr_payroll.module) 中，我有以下内容来添加 URL 处理程序：

```
function hr_payroll_menu() {
  $items['hr/payroll/employee/hours/overtime'] = array(
    'title' => 'Overtime Submission',
    'page callback' => 'hr_payroll_page',
    'page arguments' => array('employee','hours','overtime'),
    'access arguments' => array('access hr payroll'),
    'type' => MENU_CALLBACK,
  );
  $items['hr/payroll'] = array(
    'title' => 'Payroll',
    'page callback' => 'hr_payroll_intro',
    'access arguments' => array('access hr payroll'),
    'type' => MENU_CALLBACK,
  );
  return $items;
} 
```

在我的网站上是一个仅包含的块 `echo(drupal_get_title());`

如果我转到 URL `hr/payroll`，它会显示标题“工资单”，但如果我转到 URL `hr/payroll/employee/hours/overtime`，它仍然显示“工资单”而不是预期的“加班提交”

那么我完全误解了菜单项的 $title 元素或`function drupal_get_title()`工作原理是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:53:36.657

我相信您根据您想要做的事情以错误的方式使用 hook_menu。第一个菜单

```
$items['hr/payroll/employee/hours/overtime'] = array(
    'title' => 'Overtime Submission',
    'page callback' => 'hr_payroll_page',
    'page arguments' => array('employee','hours','overtime'),
    'access arguments' => array('access hr payroll'),
    'type' => MENU_CALLBACK,
  ); 
```

参数“员工”“小时”“加班”是静态的还是动态的？，并且我看到提供的页面参数是相同的 ('employee','hours','overtime') 如果它们是动态的，则使用通配符代替

```
 $items['hr/payroll/%/%/%'] = array(
        'title' => 'Overtime Submission',
        'page callback' => 'hr_payroll_page',
        'page arguments' => array(2,3,4),
        'access arguments' => array('access hr payroll'),
        'type' => MENU_CALLBACK,
      ); 
```

如果菜单链接“hr/payroll/employee/hours/overtime”是静态的，这意味着您不需要提供的访问参数，因为您已经知道这些值在您的页面回调函数中是什么。

还有你为什么使用类型作为 MENU_CALLBACK。这是有原因的还是随机的？

# sas - 如何为一组变量分配一个 ID

> ID：13651609
> 
> 赞同：0
> 
> 时间：2012-11-30T19:14:04.327
> 
> 标签：sas

我有一个面板数据集，需要根据（Year、LoadPort、DischargePort）的唯一组合为变量组创建一个 ID。我想在数据集中保留其他变量，但不需要识别组。例如：

```
Year LoadPort  DischargePort ID
2007 ARZEW     LOOP TERMINAL 1
2008 ARZEW     LOOP TERMINAL 1
2011 RAS TANURA ZHONGSHAN    2
2010 RAS TANURA ZHONGSHAN    2 
```

我需要创建最后一列。这是我尝试过的，但它给了我无意义的结果：

```
proc sort data=data.benchmark5;
by loadport dischargeport year;
run;

data data.benchmark6;
   set data.benchmark5;
   retain ID;
   by loadport dischargeport year;
   if first.year then ID = 0;
   ID = ID + 1;
   run; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:35:51.090

你很亲近；仅在 first.year 上增加您的 ID 变量：

```
data data.benchmark6;
   set data.benchmark5;
      by loadport dischargeport year;
   retain ID 0;
   if first.year then ID = ID + 1;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:12:25.227

这将为您提供示例显示的 ID。

```
data data.benchmark6;
 set data.benchmark5;
  if loadport^=lag(loadport) or DischargePort^=lag(DischargePort) then ID+1;
    else ID+0;
 run; 
```

# android - 使用长按和上下文菜单将声音设置为铃声？

> ID：13651616
> 
> 赞同：1
> 
> 时间：2012-11-30T19:14:30.223
> 
> 标签：android

我试图在长按时将声音设置为铃声，当用户单击时我的应用程序播放声音时，我将声音保存为整数数组以用于它们在原始文件中的位置，并且我使用以下代码在长按时显示上下文菜单然后用户可以选择它需要的操作，我被困在我的代码应该从gridview上单击的项目中获取特定声音并将其设置为铃声我的代码是：

```
package com.De7kat.Grid;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.media.MediaPlayer;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;
import android.widget.Toast;

public class De7katGrid extends Activity {
private MediaPlayer mp;

public Integer[] mSongsIds = { R.raw.l_1, R.raw.l_2, R.raw.l_3, R.raw.l_4,
        R.raw.l_5, R.raw.l_6, R.raw.l_7, R.raw.l_8, R.raw.tom, R.raw.love,
        R.raw.b_1, R.raw.b_2, R.raw.b_3, R.raw.b_4, };

public Object getItem(int position) {
    return mSongsIds[position];

}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);
    registerForContextMenu(gridView);
    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            stopPlaying();
            mp = MediaPlayer.create(De7katGrid.this, mSongsIds[position]);
            mp.start();

        }
    });
}

@Override
public void onPause() {
    super.onPause();
    stopPlaying();

}

private void stopPlaying() {
    if (mp != null) {
        mp.stop();
        mp.release();
        mp = null;

    }
}

    public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo)         {  
    super.onCreateContextMenu(menu, v, menuInfo);  
        menu.setHeaderTitle("Context Menu");  
        menu.add(0, v.getId(), 0, "Set As RingTone");  
        menu.add(0, v.getId(), 0, "Set As Notification");

    }  

    public boolean onContextItemSelected(MenuItem item) {  
        if(item.getTitle()=="Set As RingTone"){
            function1(item.getItemId());
            }  
        else if(item.getTitle()=="Set As Notification"){function2(item.getItemId());}  
        else {return false;}  
    return true;  
    }  

    public  void function1(int id){ 

        Toast.makeText(this, "function 1 called", Toast.LENGTH_SHORT).show();
        // >>>  savering(mSongsIds[position]); <<<< Here I want to get sound as above where I can play sound by getting it's position from mSongsIds array

    }

    public void function2(int id){  
        Toast.makeText(this, "function 2 called", Toast.LENGTH_SHORT).show();  
    } 

    public boolean savering(int ressound){
        byte[] buffer=null;
        InputStream fIn = getBaseContext().getResources().openRawResource(ressound);
        int size=0;

           try {  
            size = fIn.available();  
            buffer = new byte[size];  
            fIn.read(buffer);  
            fIn.close();  
           } catch (IOException e) {  
            // TODO Auto-generated catch block  
            return false;  
           }  

           String path="/sdcard/media/audio/ringtones/";  
           String filename="soundtest4"+".ogg";  

           boolean exists = (new File(path)).exists();  
           if (!exists){new File(path).mkdirs();}  

           FileOutputStream save;  
           try {  
            save = new FileOutputStream(path+filename);  
            save.write(buffer);  
            save.flush();  
            save.close();  
           } catch (FileNotFoundException e) {  
            // TODO Auto-generated catch block  
            return false;  
           } catch (IOException e) {  
            // TODO Auto-generated catch block  
            return false;  
           }      

           sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse("file://"+path+filename)));  

           File k = new File(path, filename);  

           ContentValues values = new ContentValues();  
           values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());  
           values.put(MediaStore.MediaColumns.TITLE, "HahaSound");  
           values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/ogg");  
           values.put(MediaStore.Audio.Media.ARTIST, "cssounds ");  
           values.put(MediaStore.Audio.Media.IS_RINGTONE, true);  
           values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);  
           values.put(MediaStore.Audio.Media.IS_ALARM, true);  
           values.put(MediaStore.Audio.Media.IS_MUSIC, false);  

           //Insert it into the database  
           this.getContentResolver().insert(MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath()), values);  

           return true;  
          }  

} 
```

# ruby-on-rails - 有没有一种在 Rails 应用程序和 API 之间共享代码的好方法？

> ID：13651617
> 
> 赞同：1
> 
> 时间：2012-11-30T19:14:31.833
> 
> 标签：ruby-on-rails, ruby, tdd, sinatra, bdd

我们有一个 Rails 应用程序和一个带有独立代码库的 Sinatra API。他们需要与同一个数据库一起工作。

我们可以使用 API 创建记录，然后使用 Rails 应用程序显示该记录的页面。使用 API 创建记录时，需要同时创建许多其他记录。这一切都在 Rails 应用程序上运行良好。

问题来了：在 API 创建记录时，测试所有其他记录以及页面在 Rails 应用程序上正确呈现的最佳方法是什么？

我正在为此在 Rails 应用程序中编写测试。由于 API 与 Rails 应用程序是分开的，我可以创建一个模拟。但是 mock 需要做 API 会做的所有事情，所以它并不是真正的 mock。

是否可以（或实际）在 Rails 应用程序中包含包含创建记录调用的 API 文件？

或者有没有更好的方法来测试这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:52:50.650

好吧，您有两个 Web 应用程序。也就是说，两个应用程序在网络上公开（或多或少）公共接口并响应 HTTP 调用。

为什么不使用 HTTP 客户端来调用所有两个服务器并执行完整的测试（“工作流测试”，如果您愿意的话）？

您可能可以为此使用任何现有的 Web 测试工具，或者使用任何语言编写测试脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:37:52.760

不，不可能在 Rails 应用程序中包含来自 API 的文件。

它们托管在不同的服务器上。即使我让它在我的本地机器上工作，它也不会在生产中工作。

**编辑**：实际上，这不是真的。如果文件只需要共享用于测试，那么它只会在本地机器上运行（除非有某种 CI 系统）。所以生产环境无关紧要。只有测试 (CI) 环境很重要。

# r - R或MATLAB：将大型稀疏矩阵置换为块对角矩阵

> ID：13651619
> 
> 赞同：5
> 
> 时间：2012-11-30T19:14:36.170
> 
> 标签：r, matlab, block, sparse-matrix, diagonal

我有一个大的稀疏矩阵，我想置换它的行或列以将原始矩阵变成块对角矩阵。任何人都知道 R 或 MATLAB 中的哪些函数可以做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:51:14.037

我并没有真正准备好对此进行测试，但是对于矩阵`m`我会尝试：

```
p = symrcm(m);
block_m = m(p,p); 
```

如果这不起作用，请查看列出的其他功能`help sparfun`，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T06:02:50.683

R 中的`seriation`包有许多解决与此相关的问题的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T07:44:18.710

不完全确定这是否是您想要的，但在 MATLAB 中这是我过去使用的。可能不是最优雅的解决方案。我从稀疏到完整，然后把东西切成方块。

```
A=full(A); 
```

然后：

```
blockedmatrix = mat2cell(A, (n*ones(1,size(A,1)/n)), ...
(n*ones(1,size(A,1)/n))); %found somewhere on internetz 
```

这将返回一个单元格，其中每个条目的大小为 nxn。很容易提取感兴趣的块，对其进行操作，然后使用 cell2mat 将它们恢复为矩阵。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-21T10:32:07.657

游戏可能有点晚了，但是由于有可用的命令，这里是一个简单的命令。如果您有一个矩阵 H 并且需要块对角线形式，您可以通过以下行（**MATLAB**）获得它：

```
[p,q] = dmperm(H);
H(p,q) 
```

这相当于*Dulmage - Mendelsohn*排列。

# javascript - 如何根据用户输入从表中选择结果并显示它们？

> ID：13651626
> 
> 赞同：0
> 
> 时间：2012-11-30T19:15:03.300
> 
> 标签：javascript, xml, ajax, client-side

假设我正在创建一个产品推荐器，例如推荐一台好的笔记本电脑购买（从少数可能性中）。用户选择特定选项（例如“$300-$400”或“Windows 8”），页面应自动向用户显示相关结果。显然，可以查询 mySQL 数据库以获取信息，但对于少量数据，最好在客户端完成所有操作。

什么是在客户端存储数据的好方法，以便轻松选择相关数据并使用 javascript 显示它？

# r - 带有ggplot2的嵌套构面图

> ID：13651627
> 
> 赞同：8
> 
> 时间：2012-11-30T19:15:07.397
> 
> 标签：r, ggplot2

如果我有一个嵌套因素，在这种情况下，我有多个包含在因素“订单”中的“家庭”级别，我想潜在地创建一个

```
facet_grid(Family / Order ~.) 
```

而不是当前的

```
facet_grid(Family + Order ~.) 
```

基本上 - 每个订单一个条带 - 旁边包含该订单内每个家庭的所有条带。我知道 facet_grid(Family / Order ~.) 目前是不可能的，但是我该如何实现这个效果呢？可以用一个主题（）来完成吗？太感谢了。--SB

我应该在上面指定家庭和秩序都是因素。数据值 B 是由具有它们所属的家庭级别和订单级别的物种组成的。这是我的情节的代码：

```
p <- ggplot(models, aes(B,Species)) + geom_point() + facet_grid(Family + Order ~
 .,scales="free",space="free") 
```

以下是一些示例数据：

```
structure(list(Species = c("Acanthocyclops robustus", "Acroperus harpae", 
"Alona affinis", "Ascaphus truei", "Bosmina longirostris"), Intercept = c(-36.1182388331068, 
-27.2140776216155, -25.7920464721491, -39.2233884219763, -31.4301301084581
), B = c(0.919397836908493, 0.716601987210452, 0.685455190113372, 
1.04159758611351, 0.81077051300147), Bconf = c(0.407917065756464, 
0.181611850119198, 0.254101713856315, 0.708582768458448, 0.234313394549538
), Order = c("Cyclopoida", "Diplostraca", "Diplostraca", "Anura", 
"Diplostraca"), Family = c("Cyclopidae", "Chydoridae", "Chydoridae", 
"Leiopelmatidae", "Bosminidae")), .Names = c("Species", "Intercept", 
"B", "Bconf", "Order", "Family"), row.names = c(NA, 5L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-18T05:16:52.553

使用`facet_grid`或`facet_wrap`不会构建您正在尝试构建的图形。但是，您可以构建一个图形列表，然后通过`gridExtra::grid.arrange`. 这是一个例子

```
library(ggplot2)
library(gridExtra)
library(dplyr)

dat <-
  structure(list(Species = c("Acanthocyclops robustus", "Acroperus harpae", 
  "Alona affinis", "Ascaphus truei", "Bosmina longirostris"), Intercept = c(-36.1182388331068, 
  -27.2140776216155, -25.7920464721491, -39.2233884219763, -31.4301301084581
  ), B = c(0.919397836908493, 0.716601987210452, 0.685455190113372, 
  1.04159758611351, 0.81077051300147), Bconf = c(0.407917065756464, 
  0.181611850119198, 0.254101713856315, 0.708582768458448, 0.234313394549538
  ), Order = c("Cyclopoida", "Diplostraca", "Diplostraca", "Anura", 
  "Diplostraca"), Family = c("Cyclopidae", "Chydoridae", "Chydoridae", 
  "Leiopelmatidae", "Bosminidae")), .Names = c("Species", "Intercept", 
  "B", "Bconf", "Order", "Family"), row.names = c(NA, 5L), class = "data.frame")

dat

# A ggplot object with NO data.  Omit the order from the facet_grid call
g <- 
  ggplot() +
  aes(Species, B) +
  geom_point() +
  facet_grid(. ~ Family,
             scales = "free", space = "free") +
  ylim(range(dat$B)) +
  xlab("")

# Build a seperate graphic for each Order and title
plots <-
  lapply(unique(dat$Order), function(o) {
           g %+% dplyr::filter_(dat, ~ Order == o) + ggtitle(o)
             })

# build as Grobs and plot via gridExtra::grid.arrange
plots %>%
  lapply(ggplotGrob) %>%
  arrangeGrob(grobs = .) %>%
  grid.arrange(., ncol = 1) 
```

[![在此处输入图像描述](../Images/932af76bd666270efa961dcc4ff4bf76.png)](https://i.stack.imgur.com/Lfc8Y.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T19:53:08.900

这是一个简单的解决方案：`foo`向您的数据添加一个变量，该变量折叠内部因素的水平，使其`interaction(foo, outer)`具有与 相同的水平集`inner`。我知道我缺少一些标签，所以如果有人能找到一种快速填写标签的方法，我会将其编辑到我的答案中。

```
library(ggplot2)
library(gridExtra)
library(dplyr)

dat <-
  structure(list(Species = c("Acanthocyclops robustus", "Acroperus harpae", 
                             "Alona affinis", "Ascaphus truei", "Bosmina longirostris"), 
                 Intercept = c(-36.1182388331068, -27.2140776216155, -25.7920464721491, 
                               -39.2233884219763, -31.4301301084581), 
                 B = c(0.919397836908493, 0.716601987210452, 0.685455190113372, 
                          1.04159758611351, 0.81077051300147), 
                 Bconf = c(0.407917065756464, 
                           0.181611850119198, 0.254101713856315, 0.708582768458448, 0.234313394549538
                          ), 
                 Order = c("Cyclopoida", "Diplostraca", "Diplostraca", "Anura", 
                           "Diplostraca"), 
                 Family = c("Cyclopidae", "Chydoridae", "Chydoridae", 
                            "Leiopelmatidae", "Bosminidae")), 
            .Names = c("Species", "Intercept", 
                       "B", "Bconf", "Order", "Family"), row.names = c(NA, 5L), class = "data.frame")

replace_with_int_rank = function (x) as.numeric(as.factor(x))
collapse_nested_factor = function( inner, outer ){
  ave(as.character(inner), outer, FUN = replace_with_int_rank )
}
dat$Family_collapsed = collapse_nested_factor(inner = dat$Family, dat$Order)
p <- ggplot(dat) + geom_point(aes(B,Species)) + facet_grid(Order~Family_collapsed, scales = "free") 
```

[![嵌套 ggplot 刻面](../Images/09a3f810d1b1e4fa94114dcbd469d3ea.png)](https://i.stack.imgur.com/VPqcO.png)

# android - OOM问题安卓

> ID：13651628
> 
> 赞同：0
> 
> 时间：2012-11-30T19:15:09.823
> 
> 标签：android, bitmap, out-of-memory

如何解决android中的OOM问题。我已经尝试了几乎所有的事情，比如缩放位图、BitmapOption 中的 inPurgeable、释放所有资源等，但仍然遇到 OOM 问题。这基本上是在相机拍摄的图像或任何大于 1.5 mb 的图像中。我的应用程序中还有 15-20 mb 大小的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T11:58:43.197

你试过`Bitmap.recycle();`吗？

它曾经解决了我的内存不足问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T13:56:42.733

这是我正在做的避免OOM错误，使用一些android培训的代码。这是在我的班级“ScaledFactor”中

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);
    options.inPurgeable = true; // I aded this to the android training code, without this I still have OOM errors. so try using inPurgeable = true

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
} 
```

在我的活动中，我使用

```
 background = ScaledFactor.decodeSampledBitmapFromResource(getResources(), R.drawable.menu, screenheight, screenwidth); // screeenhieght is the output height , screenwidth is the output width 
```

然后在 on destroy 方法中，或者在调用其他意图后我使用 background.recycle();

我没有使用 hdpi、ldpi 等文件夹......我只是使用带有大位图的可绘制对象，并进行缩放。这样你就可以在最终的 apk 文件中节省一些 mb

安卓培训代码在这里获取更多信息[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap)

呸！希望这会有所帮助，我花了一天的时间试图弄清楚这一点并阅读了这个论坛中的所有问题和答案。这只是背景图像的示例，但我的游戏中有 20 多张图像都以这种方式加载，但输出尺寸较小，而且运行非常流畅。

# c# - 将 DateTime 转换为表示日期的字符串

> ID：13651631
> 
> 赞同：-2
> 
> 时间：2012-11-30T19:15:17.380
> 
> 标签：c#, date

如何将 a 转换`DateTime`为 a `String`？

例如，我想转换一个`DateTime`表示：

```
11/30/2012 
```

到

```
November Thirtieth Two Thousand Twelve 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:19:26.100

我的朋友，你的 google-fu 很弱，但你会学到： [http](http://www.c-sharpcorner.com/UploadFile/b942f9/converting-dates-to-words-in-C-Sharp/) ://www.c-sharpcorner.com/UploadFile/b942f9/converting-dates-to-words-in-C-Sharp/ :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:18:50.550

这里没有运气，但部分缓解：

String.Format("{0:dddd, MMMM d, yyyy}", dt); // “2008 年 3 月 9 日，星期日” [来源](http://www.csharp-examples.net/string-format-datetime/)

日和年字符串你将不得不做很长的路要走。可以使用星期几和月份。

# version-control - 给定这个分支模型，这是正确还是不正确的操作？

> ID：13651634
> 
> 赞同：0
> 
> 时间：2012-11-30T19:15:29.527
> 
> 标签：version-control, mercurial, branch, branching-and-merging

我正在使用 Mercurial，但我[使用以下作为我的分支模型](http://nvie.com/posts/a-successful-git-branching-model/)：

![在此处输入图像描述](../Images/66184cae85302409d77afcb877365418.png)

我有一个正在开发的功能，所以它在它自己的功能分支中。但是，我在开发分支中更改了一些较小的项目，我想在另一个分支中处理特定功能时使用它们。考虑到这个模型，是否允许将开发合并到该功能分支中？或者这会违反这个模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:18:51.177

> 考虑到这个模型，是否允许将开发合并到该功能分支中？

**没有**常识。

您之前违反了工作流程：当“我在开发分支中更改了一些较小的项目”时 - 这些更改必须在单独的功能分支中，您*可以*将其合并到您的功能分支中或（更好）到临时“组合"（你的 + 侧）分支：在理想的 nvie-workflow 开发分支的情况下，必须**只**包含来自任务分支的合并集

PS - 从另一边“不是安息日的人，但安息日是为人而设的”，如果*你*合并，你只会有肮脏的历史

# c# - 在 WPF C# 应用程序中将数据网格单元格转换为字符串

> ID：13651637
> 
> 赞同：1
> 
> 时间：2012-11-30T19:15:43.880
> 
> 标签：c#, wpf, string, datagrid, formatting

我目前正在尝试获取 a 中选定行的内容，以便在按下按钮时`DataGrid`出现在单个文本框中。`DataGrid`就目前而言，我可以将值放入各自的文本框中，但是，文本框不仅像我想要的那样将单元格值作为字符串提供，而是像这样显示值类型： System.Windows.Controls.DataGridCell: Leary .

我尝试用几种不同的方式将单元格值转换为字符串，但我最近的尝试是这样的：

```
 var rowSelection = EditGrid.GetSelectedRow(myGrid);
    var columnSelection = EditGrid.GetCell(myGrid, rowSelection, 3);
    string cellToEdit = Convert.ToString(columnSelection);

    customerNameTxt.Text = cellToEdit; 
```

如果有人想查看它，我可以提供我创建的 EditGrid 类，但是，我认为这不是问题所在，因为我将正确的单元格放入每个文本框；我希望这只是一个格式问题。

提前感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:24:20.250

尝试将其投射到您的`UIElement`：

```
string cellToEdit = ((TextBlock)columnSelection.Content).Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:07:51.580

你的 UI 逻辑是如何实现的？当您以 MVVM 方式执行时，WPF 中的此类事情非常容易。如果您的`DataGrid`作品绑定到实体集合，您只需将您的作品绑定`TextBox.Text`到`DataGrid.SelectedItem`.

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="525"
    Height="350"
    mc:Ignorable="d">
<Window.DataContext>
    <local:ViewModel/>
</Window.DataContext>
<Grid x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <DataGrid x:Name="MyDataGrid" ItemsSource="{Binding Items}"/>
    <TextBlock Grid.Column="1" Text="{Binding SelectedItem.MyProperty, ElementName=MyDataGrid}"/>
</Grid>
</Window> 
```

# compiler-construction - SCEV 传入 LLVM 用于数组访问模式

> ID：13651639
> 
> 赞同：2
> 
> 时间：2012-11-30T19:15:48.847
> 
> 标签：compiler-construction, llvm, arrayaccess

我正在尝试使用 LLVM 在 ac 代码中查找数组访问模式。我发现 SCEV 可用于此目的，但无法找到任何使用 scev 的示例代码。关于如何使用 scev 确定数组访问模式的任何想法。

PS：SCEV代表标量评估

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:09:28.397

您能否通过说“数组访问模式”来详细说明您的意思。LLVM 中的 SCEV 通行证用于识别循环中的归纳变量（[详见此处](http://llvm.org/docs/Passes.html#scalar-evolution-scalar-evolution-analysis)），所以我不确定它是否是您需要的。无论如何，如果您发现确实需要它，您可以在 LLVM 本身内部找到使用示例。例如在`./lib/Analysis/DependenceAnalysis.cpp`

# ruby - 带有通配符的正则表达式负回溯

> ID：13651640
> 
> 赞同：9
> 
> 时间：2012-11-30T19:15:55.243
> 
> 标签：ruby, regex, lookbehind

如果附近没有另一块文本，我正在尝试匹配一些文本。例如，我想匹配`"bar"`if`"foo"`不在它之前。我可以在此正则表达式中使用否定查找来匹配`"bar"`if`"foo"`不*立即在它之前：*

```
/(?<!foo)bar/ 
```

但我也喜欢不匹配`"foo 12345 bar"`。我试过：

```
/(?<!foo.{1,10})bar/ 
```

但在 Ruby 中使用通配符 + 范围似乎是无效的正则表达式。我是不是把问题想错了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T19:23:35.990

你正在以正确的方式思考它。但不幸的是，lookbehinds 通常是固定长度的。唯一的主要例外是 .NET 的正则表达式引擎，它允许在lookbehinds 中使用重复量词。但是因为你只需要一个消极的向后看，而不是向前看。有一个 hack 适合你。反转字符串，然后尝试匹配：

```
/rab(?!.{0,10}oof)/ 
```

然后反转匹配结果或从字符串的长度中减去匹配位置，如果那是你所追求的。

现在从您给出的正则表达式来看，我想这只是您实际需要的简化版本。当然，如果`bar`是一个复杂的模式本身，需要更多的思考如何正确地反转它。

请注意，如果您的模式需要可变长度的后视和前瞻，那么您将很难解决这个问题。此外，在您的情况下，可以将您的lookbehind解构为多个可变长度的（因为您既不使用`+`也不使用`*`）：

```
/(?<!foo)(?<!foo.)(?<!foo.{2})(?<!foo.{3})(?<!foo.{4})(?<!foo.{5})(?<!foo.{6})(?<!foo.{7})(?<!foo.{8})(?<!foo.{9})(?<!foo.{10})bar/ 
```

但这并不是那么好，不是吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T21:26:43.147

正如 m.buettner 已经提到的，Ruby regex 中的lookbehind 必须具有固定长度，并且在文档中进行了描述。因此，您不能将量词放在后面。

您无需一步完成所有检查。尝试执行多个正则表达式匹配步骤以获得您想要的。假设`foo`在单个实例前面存在`bar`打破条件而不管是否存在另一个`bar`，那么

```
string.match(/bar/) and !string.match(/foo.*bar/) 
```

会给你你想要的例子。

如果您希望匹配成功`bar foo bar`，那么您可以这样做

```
string.scan(/foo|bar/).first == "bar" 
```

# objective-c - Objective-C 中的空指针取消引用未定义行为吗？

> ID：13651642
> 
> 赞同：1
> 
> 时间：2012-11-30T19:15:59.703
> 
> 标签：objective-c, c, undefined-behavior

在 C 和 C++ 中，空指针取消引用是未定义的行为。Objective-C 呢？

换句话说，这段代码保证做什么？

```
*(long*)0 = 0; 
```

背景：我想知道[这个答案](https://stackoverflow.com/a/13510808/122718)是否会触发未定义的行为，可能会导致随机的事情，比如语句被优化甚至更奇怪的事情。

当然，我不赞成这样做。尽管如此，了解语言规则还是很重要的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T19:19:31.733

由于 Objective-C 只不过是 C 之上的面向对象层，因此纯 C 语句没有特殊的附加含义。据此，在这种情况下，`*(long*)0 = 0;`就像在 C 中一样评估和解释（因为它*是*C），因此它调用未定义的行为。因此，不能保证做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:20:57.180

取消引用空指针在 Objective-C 中仍未定义。

唯一需要注意的是消息传递不需要取消引用。向空指针（或`nil`Objective-C 术语）发送消息总是明确安全的，并定义为返回进一步的空指针。

因此，像 一样的复合消息传递`[[class alloc] init]`始终是明确安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:18:52.960

该语句唯一能*保证*做的就是调用未定义的行为。

可以保证使用特定编译器在特定平台上执行特定操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:48:42.623

在那个答案中看到的 strcpy(0, "bla") 总是崩溃，我看不出它是如何工作的——或者被编译器优化掉。

# ios - 为什么我的 UITextView 中的文本在我按 Enter 之前是透明的？

> ID：13651644
> 
> 赞同：2
> 
> 时间：2012-11-30T19:16:02.637
> 
> 标签：ios, ipad, ios6, uitextview

这是我的文本视图的配置

![](../Images/57806ef7091a9f5c7a40f8dcd5a8a23d.png)

![](../Images/99fcf20bfeef591e6c84968084f8aa5a.png)

当我开始输入它时，我得到了这个：

![](../Images/b501c074f721f85045fb8aab762db8a3.png)

直到我按回车键，然后我得到这个： ![](../Images/58314af6c17ee8a1b798ed279ba96089.png)

有没有人知道为什么会发生这种情况？这是在 iOS6 中，在 iPad 上，无论是在模拟器还是在设备上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T16:27:39.227

这个包含答案：[UITextView width greater than 512 doesn't show text](https://stackoverflow.com/questions/3212894/uitextview-width-greater-than-512-doesnt-show-text?rq=1)

似乎在 UITextView 的调整大小选项中禁用“灵活宽度”可以解决问题。显然 UIKit methinks 中的一个错误。

仅供参考，我的 textview 是 504 像素宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T15:37:48.933

尝试这个：

```
textView.frame = textView.frame; 
```

# sql - 在连接表上编写不同的查询

> ID：13651648
> 
> 赞同：-1
> 
> 时间：2012-11-30T19:16:10.110
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子。产品 A 和产品 B。

产品A

```
ID Description

A1 ProdA1
B1 ProdB1
C1 ProdC1
D1 ProdD1
E1 ProdE1 
```

产品B

```
ID SubId

A1 112
A1 118
B1 111
B1 113
D1 117
D1 118
E1 115
E1 116
E1 117 
```

我想编写一个查询，它输出 ProductA 表中的所有记录和 ProductB 表中的 SubId 列，这样如果 ProductA 中的 ID 存在于 ProductB 中，那么它将显示 SubId 否则为 NULL。因此对于上述表格，它将显示以下输出。

```
ID Description SubId

A1  ProdA1      112
B1  ProdB1      111
C1  ProdC1      NULL
D1  ProdD1      117
E1  ProdE1      116 
```

我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:20:01.073

> *如果 ProductA 中的 ID 存在于 ProductB 中，那么它将显示 SubId 否则为 NULL*

这就是`LEFT OUTER JOIN`s 的目的。否则，您将为`ProductB.subId`per选择最低值`ID`，这意味着[聚合`MIN()`](http://msdn.microsoft.com/en-us/library/ms179916.aspx)。

```
SELECT
  ProductA.ID,
  ProductA.Description,
  /* Aggregate MIN() to get the first SubId per Id */
  MIN(ProductB.SubId) AS SubId
FROM
  ProductA
  LEFT OUTER JOIN ProductB ON ProductA.ID = ProductB.ID
GROUP BY
  ProductA.ID,
  ProductA.Description 
```

因此，您根据样本输出寻找的并不是一个`DISTINCT`集合，而是一个聚合分组集合。

### [这是 SQLFiddle.com 上的演示](http://sqlfiddle.com/#!2/d0722/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:20:01.487

`LEFT JOIN`两张表：

```
SELECT a.Id, a.description, b.subId
FROM ProductA a
LEFT JOIN
(
  SELECT Id, MIN(subId) subid
  FROM ProductB
  GROUP BY ID
)b ON a.Id = b.Id 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/2eda2/5)

# android - 当 webview 尝试从微调器中检索字符串时，Android 应用程序崩溃

> ID：13651649
> 
> 赞同：1
> 
> 时间：2012-11-30T19:16:10.110
> 
> 标签：android, android-spinner

我的应用 2 微调器，基本上是允许用户选择值的下拉列表。Spinner1 在下拉菜单中有 4 个选项，而 Spinner2 在下拉菜单中有 5 个选项。

如果用户从 spinner1 中选择 option1 并从 spinner2 中选择 option1，则项目符号列表 [在此应用程序的 HTML webapp 版本中，我使用 li 标签] 应显示在 web 视图中的其余视图片段中。图像将使事情变得更多清除。现在每次我尝试从两个微调器中选择值并单击提交时，应用程序都会崩溃。

我附上下面的代码

这是用于启动活动-

```
import java.util.ArrayList;
import java.util.List;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.Toast;

public class MyAndroidAppActivity extends Activity {

    private Spinner spinner1, spinner2;
    private Button btnSubmit;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        addItemsOnSpinner2();
        addListenerOnButton();
        addListenerOnSpinnerItemSelection();

    }

    //add items into spinner dynamically
    public void addItemsOnSpinner2() {

        spinner2 = (Spinner) findViewById(R.id.spinner2);
        List<String> list = new ArrayList<String>();
        list.add("Equipment");
        list.add("Indications");
        list.add("Illustration");
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner2.setAdapter(dataAdapter);
    }

    public void addListenerOnSpinnerItemSelection(){

        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener());
    }

    //get the selected dropdown list value
    public void addListenerOnButton() {

        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner2 = (Spinner) findViewById(R.id.spinner2);

        btnSubmit = (Button) findViewById(R.id.btnSubmit);

        btnSubmit.setOnClickListener(new OnClickListener() {

            /*@Override
            public void onClick(View v) {

                Toast.makeText(MyAndroidAppActivity.this,
                        "OnClickListener : " + 
                        "\nSpinner 1 : " + String.valueOf(spinner1.getSelectedItem()) +
                        "\nSpinner 2 : " + String.valueOf(spinner2.getSelectedItem()),
                        Toast.LENGTH_SHORT).show();
            }*/

             @Override
                public void onClick(View v) {

                     WebViewerFragment wvf = (WebViewerFragment) getFragmentManager().findFragmentById(R.id.webviewfrag);
                       if (wvf != null && wvf.getView() != null) { 
                            wvf.updateWebView(spinner1.getSelectedItemPosition(), spinner2.getSelectedItemPosition());
                       }
                }

        });

    }

} 
```

这是webview的方法

```
import android.R.string;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.widget.AdapterView;
import android.widget.Toast;

public class WebViewerFragment extends Fragment {

    private WebView mWebView;
    // a two dimensional array representing the data to put in the WebView
     String mData[][]= new String[4][5]; 
     {
        for (int i=0;i<4;i++)
        {
            for(int j=0;j<4;j++)
            {
                mData[i][j]="<html><body><h1>Temp1</h1></body></html>";

            }
        }
     }

/*     Toast.makeText(this, mData[i][j],Toast.LENGTH_SHORT);   
*/     

 /*    int[][] a1 = {
              { 1, 2, 3, },
              { 4, 5, 6, },
            };
   {  {},{}};

  */

/*     String SurgEqui="<html><body><h2>Equipment</h2><ul><li><p>IV catheter :Be certain that IV is in place and flushing easily</p></li></body><html>";
*/           

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View mainView = (View) inflater.inflate(R.layout.frag_layout, container, false);
        mWebView = (WebView) mainView.findViewById(R.id.webView1); 
        return mainView;
    }

    public void updateWebView(int firstSelection, int secondSelection) {
         if (firstSelection == AdapterView.INVALID_POSITION || secondSelection == AdapterView.INVALID_POSITION) {
              return;  
         } else {
              if (mWebView != null) {
                  mWebView.loadData(mData[firstSelection][secondSelection].replace("+", "%20"), "text/html", "utf-8");
                  // mWebView.loadData(mData[firstSelection][secondSelection], "text/html", null);
                   //wv.loadData(URLEncoder.encode(myString).replace("+", "%20"), "text/html, "utf-8");

              }
         }

    }

} 
```

这是布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
     >

    <Button
        android:id="@+id/btnSubmit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="101dp"
        android:text="@string/submit" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:entries="@array/country_arrays" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/spinner1" />

    <fragment
        android:id="@+id/webviewfrag"
        android:name="android.webkit.WebViewFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnSubmit"
        android:layout_marginLeft="246dp"
        android:layout_marginTop="244dp"
       />

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btnSubmit" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:35:08.723

您应该在错误中包含 logcat。但是，我注意到了两个问题：

1.  您在 addItemsOnSpinner2() 中初始化了 spinner2，然后在覆盖 spinner2 的地方调用 addListenerOnButton()。这可能会导致 NullPointerException
2.  在调用 addListenerOnButton() 后调用 addListenerOnSpinnerItemSelection()，其中您引用了在 addListenerOnButton() 中实例化的 spinner1。这也会给你 nullPointerException。要修复它，请尝试：

1.删​​除：

```
spinner1 = (Spinner) findViewById(R.id.spinner1);
spinner2 = (Spinner) findViewById(R.id.spinner2); 
```

来自 addListenerOnButton() 方法。

2.在addListenerOnButton()之前调用addListenerOnSpinnerItemSelection()：

```
addListenerOnSpinnerItemSelection();
addListenerOnButton(); 
```

# java - 如何在关闭 GUI 时停止程序运行无限循环

> ID：13651654
> 
> 赞同：1
> 
> 时间：2012-11-30T19:16:28.237
> 
> 标签：java, sockets, terminate

我有一个使用套接字进行服务器/客户端通信的简单程序。服务器类包含`run()`方法，该方法有无限循环等待套接字接受。

无论如何，我在构造函数中编写了一个代码来终止处理关闭，

```
 this.addWindowListener(new java.awt.event.WindowAdapter() {
    @Override
    public void windowClosing(java.awt.event.WindowEvent windowEvent) {
        System.out.println("Close operation server done");
        toClient.println("Bye");
        closeStreams();
        socket = null;
        serverSocket = null;
        System.exit(0);
    }
}); 
```

当我阅读该[方法](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html#windowClosing%28java.awt.event.WindowEvent%29) `windowClosing(WindowEvent e)`的 API 时，它说：

> 当窗口正在关闭时调用。此时可以覆盖关闭操作。

它说**当**一个窗口正在关闭的过程中。但是 run() 方法内部的循环仍然获得控制权，由于程序的逻辑，不会结束，所以不会关闭窗口（实际上是关闭了 GUI），但处理仍在幕后进行。

如何正确强制程序运行？

整个工作服务器类：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.io.*;
import java.net.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class ChatServer extends JFrame
{

    private InetAddress serverAddress;
    private Socket socket;
    private ServerSocket serverSocket;
    private InputStream is;
    private OutputStream os;
    private BufferedReader fromClient;
    private PrintWriter toClient;
    private JButton send;
    private JPanel uperPanel;
    private JPanel midPanel;
    private JPanel downPanel;
    private JTextArea textToSend;
    private JTextArea textToReceive;
    private JLabel addressL;
    private final int port = 5555;
    private boolean idle = false;
    private int timeout = 3000;
    public static String newline = System.getProperty("line.separator");

    private ChatServer()
    {
        this.setGUI();
        this.setVisible(true);
        try
        {
            serverSocket = new ServerSocket(port);
            this.run();
        } catch (IOException ex)
        {
            Logger.getLogger(ChatServer.class.getName()).log(Level.SEVERE, null, ex);
        }

        this.addWindowListener(new java.awt.event.WindowAdapter()
        {
            @Override
            public void windowClosing(java.awt.event.WindowEvent windowEvent)
            {
                idle = true;
                closeStreams();
                socket = null;
                serverSocket = null;
                System.exit(0);
            }
        });
    }

    public void run() throws IOException
    {
        try
        {
            while (true)
            {
                System.out.println("System is running");
                socket = serverSocket.accept();
                System.out.println("Client accepted on server side");
                openStreams();
                toClient.println("Hello: server is connected " + serverAddress.getLocalHost().toString());
                processClient();
                //   closeStreams();
            }
        } catch (java.net.SocketTimeoutException ee)
        {

            closeStreams();
            System.out.println(ee);

        } catch (Exception e)
        {
            System.out.println("Error accepting server " + e);
        }

    }

    public void processClient() throws IOException
    {
        System.out.println("Porcessing start");
        String line = fromClient.readLine();
        try
        {
            while (!(line.equals("Bye")))
            {
                textToReceive.append("He: " + line + newline);
                line = fromClient.readLine();
            }
            closeStreams();

        } catch (IOException ex)
        {

            System.out.println("Error reading from client " + ex);

        }
    }

    private void setGUI()
    {

        this.setSize(375, 314);

        send = new JButton("send");

        try
        {
            addressL = new JLabel("My Server address: " + serverAddress.getLocalHost().toString()
                    + "  Port: " + this.port);
        } catch (Exception e)
        {
            System.out.println("Unknown Host problem " + e);
        }

        textToReceive = new JTextArea(12, 30);
        textToReceive.setLineWrap(true);
        JScrollPane recievedScrolledText = new JScrollPane(textToReceive);
        recievedScrolledText.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        textToReceive.setEditable(false);

        textToSend = new JTextArea(3, 25);
        textToSend.setLineWrap(true);
        JScrollPane sentScrolledText = new JScrollPane(textToSend);
        sentScrolledText.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        textToSend.setEditable(true);

        uperPanel = new JPanel();
        midPanel = new JPanel();
        downPanel = new JPanel();

        uperPanel.add(addressL);

        midPanel.add(recievedScrolledText);
        downPanel.add(sentScrolledText);
        downPanel.add(send);

        Container c = getContentPane();
        c.setLayout(new BorderLayout());
        c.add(uperPanel, "North");
        c.add(midPanel, "Center");
        c.add(downPanel, "South");

        send.addActionListener(new ButtonWatch());
        textToSend.addKeyListener(new KeyWatch());
    }

    private void openStreams() throws IOException
    {

        is = socket.getInputStream();
        fromClient = new BufferedReader(new InputStreamReader(is));
        os = socket.getOutputStream();
        toClient = new PrintWriter(os, true);
        System.out.println("open stream is open on server");
    }

    private void closeStreams()
    {
        try
        {

            if ((toClient != null) && (os != null)
                    && (fromClient != null) && (is != null)
                    && (fromClient != null) && (socket != null))
            {
                toClient.close();
                os.close();
                fromClient.close();
                is.close();
                socket.close();
            }

        } catch (IOException ex)
        {
            System.out.println("Problem closing streams " + ex);
        }
    }

    private class KeyWatch extends KeyAdapter
    {

        public void keyPressed(KeyEvent e)
        {
            if (e.getKeyCode() == KeyEvent.VK_ENTER)
            {
                String line = textToSend.getText();
                textToSend.setText("");
                toClient.println(line);
                textToReceive.append("You: " + line + newline);
            }
        }

        public void keyReleased(KeyEvent e)
        {
            if (e.getKeyCode() == KeyEvent.VK_ENTER)
            {
            }
        }

        public void keyTyped(KeyEvent e)
        {
            if (e.getKeyCode() == KeyEvent.VK_ENTER)
            {
            }
        }
    }

    private class ButtonWatch implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent e)
        {
            Object buttonPressed = e.getSource();

            if (buttonPressed == send)
            {
                String line = textToSend.getText();
                textToSend.setText("");
                toClient.println(line);
                textToReceive.append("You: " + line + newline);

                System.out.println("send to client " + line);
            }

        }
    }

    public static void main(String[] args)
    {
        ChatServer s = new ChatServer();
        s.setVisible(true);
    }
} 
```

现在如何在单击 (x) 关闭图标后正确终止它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:29:05.560

还：

你看过[setDefaultCloseOperation](http://www.java2s.com/Code/JavaAPI/javax.swing%5b/JFramesetDefaultCloseOperationintoption.htm)和[CloseListener](http://tips4java.wordpress.com/2009/05/01/closing-an-application/)窗口事件处理程序吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:19:15.847

使用 a`Thread`并将其设置为`daemon`线程。在这里，我更改了代码的前几行：

```
public class ChatServer extends JFrame implements Runnable
{
    private ChatServer()
    {
        this.setGUI();
        this.setVisible(true);
        try
        {
            serverSocket = new ServerSocket(port);
            Thread accept = new Thread(this);
            accept.setDaemon(true);
            accept.start();
        } catch (IOException ex)
        {
            Logger.getLogger(ChatServer.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:26:41.097

`serverSocket.close()`在`windowClosing`处理程序中关闭您的服务器套接字。这将抛出`SocketException`您的接受循环并中断它。您可以捕获它并进行处理以进行正常关机。

# php - 节点列表的 PHP SimpleXML @attributes 行为

> ID：13651655
> 
> 赞同：0
> 
> 时间：2012-11-30T19:16:37.440
> 
> 标签：php, xml, simplexml

我已经多次看到这个问题，并希望得到明确的答案。

给定 xml 中的这种结构：

```
<ByteListSet>
    <Byte Order="0">14</Byte>
</ByteListSet> 
```

我无法访问属性“订单”。var_dump（不出所料）不显示 ByteListSet 的任何属性。实际上，foreach 迭代不会产生 @attributes 项。

但是，以下结构：

```
<ByteListSet>
    <Byte Order="0"><Value>3729</Value></Byte>
</ByteListSet> 
```

正确地导致 ByteListSet 有一个子 Byte，它是一个具有 @attributes 的 SimpleXmlObject。

我会假设 SimpleXML 确实从第一个案例中获取了@attributes，但是它将它们保留在哪里？问题在于，在前一个结构中，ByteListSet 在 ->children() 的 var_dump 上生成：

```
object(SimpleXMLElement)[25]
  public 'Byte' => string '14' (length=2) 
```

如果我对它进行 get_object_vars() 和 var_dump ，我只会得到：

```
string '14' (length=2) 
```

表明 Byte 不是作为 xml 对象返回给我，而是作为字符串返回；作为它上面的 ByteList 对象的属性。

Order="0" 在某处，但我无权访问它。我怎么去呢？注意： ->attributes() 如您所料，返回一个空白数组。

（我们不控制此架构，因此无法对其进行重组。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:42:45.493

你写了：

> 给定 xml 中的这种结构：
> 
> ```
> <ByteListSet>
>     <Byte Order="0">14</Byte>
> </ByteListSet> 
> ```
> 
> 我无法访问属性“订单”。

当然，因为该属性`order`不存在。[XML 区分大小写](https://stackoverflow.com/q/7414747/367456)，属性以`Order`大写`O`开头。

使用正确的属性名称，您可以在手册中找到[的 SimpleXML 扩展的基本示例中的示例 #5 中](http://php.net/simplexml.examples-basic.php#example-5289)访问值作为大纲：

```
$ByteListSet = simplexml_load_string(<<<XML
<ByteListSet>
    <Byte Order="0">14</Byte>
</ByteListSet>
XML
);

echo $ByteListSet->Byte['Order']; # 0 
```

请记住，您所看到的`var_dump`或`print_r`并不总是您所得到的。这对于 Simplexml 尤其如此（比较：[*如何获取 xml 元素的值？*](https://stackoverflow.com/q/2849678/367456)；[*SimpleXML 和 print_r() - 为什么这是空的？*](https://stackoverflow.com/q/3109302/367456)），但是，对于 PHP 中使用[`ArrayAccess`](http://php.net/ArrayAccess),[`__toString()`](http://php.net/language.oop5.magic)或[`IteratorIterator`](http://php.net/class.IteratorIterator)/的其他对象也是如此[`IteratorAggregate`](http://php.net/class.IteratorAggregate)。

请让我知道这是否回答了您的问题。你不是很具体，到目前为止你还没有理解哪些现有的解决方案，所以我回答了你的问题，但如果我一针见血，我不是 100%。

# jquery - 使用 $.ajax url 传递多个参数

> ID：13651656
> 
> 赞同：16
> 
> 时间：2012-11-30T19:16:41.950
> 
> 标签：jquery, ajax

我在使用 ajax url 传递参数时遇到问题。我认为错误出在参数代码语法中。请帮助。

```
 var timestamp = null;
function waitformsg(id,name) {

    $.ajax({
        type:"Post",
        url:"getdata.php?timestamp="+timestamp+"uid="+id+"uname="+name,
       async:true,
       cache:false,
       success:function(data) {

        });
     } 
```

我访问这些参数如下

```
<?php          

  $uid =$_GET['uid'];

 ?> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-30T19:19:38.487

为什么要结合 GET 和 POST？使用其中一种。

```
$.ajax({
    type: 'post',
    data: {
        timestamp: timestamp,
        uid: uid
        ...
    }
}); 
```

php:

```
$uid =$_POST['uid']; 
```

或者，只需正确格式化您的请求（您缺少获取参数的与号）。

```
url:"getdata.php?timestamp="+timestamp+"&uid="+id+"&uname="+name, 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T19:19:45.287

为什么不只是将数据与您的键/值对一起传递给对象，那么您不必担心编码

```
$.ajax({
    type: "Post",
    url: "getdata.php",
    data:{
       timestamp: timestamp,
       uid: id,
       uname: name
    },
    async: true,
    cache: false,
    success: function(data) {

    };
}​);​ 
```

# python - 如何在旧列的一侧写新列

> ID：13651658
> 
> 赞同：0
> 
> 时间：2012-11-30T19:16:59.930
> 
> 标签：python

我想制作一个脚本，从 file-1 中提取两列，然后将它们写入 file-2。但是，如果 file-2 已经包含列，并且希望将新列写入（当前列的）一侧，而不是底部。我当前的脚本在当前脚本的底部附加了“新”列，而不是在旁边进行。如何将新列添加到不在底部的一侧？有人建议使用 CSV 模块，我试过了，但我不知道该怎么做。

这是我当前的代码

[https://dl.dropbox.com/u/63216126/paula.txt](https://dl.dropbox.com/u/63216126/paula.txt)

如果我运行一次脚本，这是输出文件

[https://dl.dropbox.com/u/63216126/try2.txt](https://dl.dropbox.com/u/63216126/try2.txt)

如果我运行脚本两次，这是输出文件（请记住，这不是我想要的）

[https://dl.dropbox.com/u/63216126/try3.txt](https://dl.dropbox.com/u/63216126/try3.txt)

这是我希望输出在运行脚本三次后的样子

[https://dl.dropbox.com/u/63216126/try.txt](https://dl.dropbox.com/u/63216126/try.txt)

这是两个输入样本

[https://dl.dropbox.com/u/63216126/file5.txt](https://dl.dropbox.com/u/63216126/file5.txt)

[https://dl.dropbox.com/u/63216126/file6.txt](https://dl.dropbox.com/u/63216126/file6.txt)

我希望我想做的事情很清楚。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:21:17.070

`sys.argv`是一个列表。您可以使用 获取参数的数量`len(sys.argv)`，并像这样遍历它们：

```
for arg in sys.argv[1:]:
    do_something(arg) 
```

# javascript - 在 .load 中插入代码

> ID：13651660
> 
> 赞同：-1
> 
> 时间：2012-11-30T19:17:03.093
> 
> 标签：javascript, jquery

我使用 jquery 1.3.2 并且正在修改购物车模块以更好地满足我的需要。我找到了一个我认为应该是我正在寻找的功能。

```
function ajaxCartReloadCartView() {
  if (jQuery('#cart-form-pane').length) { 
    jQuery('#cart-form-pane').parent().load(Drupal.settings.uc_ajax_cart.SHOW_VIEW_CALLBACK, ajaxCartReloadCartViewSuccess );
  }
} 
```

是否可以在函数 ajaxCartReloadCartViewSuccess 之前和之后插入代码？例如，我需要插入此代码 $("#cart-block-contents-ajax").removeClass("xxx");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:25:41.120

最简单的方法就是用闭包包装函数。像这样：

```
function ajaxCartReloadCartView() {
  if (jQuery('#cart-form-pane').length) { 
      jQuery('#cart-form-pane').parent().load(Drupal.settings.uc_ajax_cart.SHOW_VIEW_CALLBACK, 
          function (response,status,xhr) {
             $("#cart-block-contents-ajax").removeClass("xxx");
             ajaxCartReloadCartViewSuccess(response,status,xhr);
             // some other code
          });
      }
  }
} 
```

这样您就不必修改原始的*ajaxCartReloadCartViewSucces*函数。

编辑：我不知道你在这个成功函数中到底在处理什么，我从 jQuery 文档中获取了那些参数（响应、状态、xhr）。

# ruby-on-rails - 需要在 Rails 中进行模型关联的指导

> ID：13651666
> 
> 赞同：3
> 
> 时间：2012-11-30T19:17:30.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我对 Ruby on Rails 非常陌生，我正在尝试从特定组织访问分数。我想知道是否有人可以指出我能够做到这一点的正确方向。我目前有以下型号：

这是用户模型

```
class User < ActiveRecord::Base
 attr_accessible :fname, :lname, :email, :password, :password_confirmation
 has_secure_password
 belongs_to :organization 
```

这是组织模型

```
class Organization < ActiveRecord::Base
 attr_accessible :name, :employee_number, :country, :postal_code, :sic_code, :primary_url
 has_many :users
 has_many :social_entities
 has_many :social_scores, :through => :social_entity  
 has_many :social_channels, :through => :social_entity 
```

这是实体模型

```
class SocialEntity < ActiveRecord::Base
 attr_accessible :name, :org_id
 has_many :social_channels
 has_many :social_scores  
 belongs_to :organization 
```

这是渠道模型

```
class SocialChannel < ActiveRecord::Base
 attr_accessible :authorized, :channel_identifier, :channel_type, :name, :social_entity_id
 belongs_to :social_entity  # edited from original post, :socialentity 
```

这是分数模型

```
class SocialScore < ActiveRecord::Base
 attr_accessible :engagement_score, :popularity_score, :presence_score, :reputation_score,   :score_period_end, :score_period_start, :score_period_type, :score_timestamp, :social_entity
 belongs_to :social_entity 
```

这是我正在尝试做的事情的描述。一个用户登录系统，用户绑定到一个组织，每个组织都有一个社交实体，它有社交渠道和分数。我希望能够在视图中显示组织的分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:49:13.027

如果您有一个组织实例，则该`has_many`声明会创建一个属性（实际上是一个方法），该属性获取由 引用的 SocialScores 的集合`social_scores`，例如

```
@org = Organization.find(:first)  # or however else it is that you get the organization instance
@org.social_scores.each do |ss|
   puts "Popularity score for id #{ss.id} is #{ss.popularity_score}"
end 
```

那是你要找的吗？

# android - android 应用程序 - gps、wifi 和 twitter

> ID：13651669
> 
> 赞同：1
> 
> 时间：2012-11-30T19:17:36.377
> 
> 标签：android, gps, android-wifi, android-twitter

我在学校有一个项目的 android 应用程序。该应用程序的目标是获取 GPS 位置，扫描可用的 wifi 网络，并将该信息捆绑到要发布的字符串中（也由应用程序发送）。gps 和 wifi 部分是从头开始编写的，而 twitter 代码是我的一位队友发现的一些开源内容。我们中没有人以前有任何 android 编程经验，所以我们一直在学习我们只需要飞行的东西。该应用程序现在可以正常工作，但还不够好。它通常可以关闭一些推文，但最终总是会收到 ANR。我认为这可能来自 GPS 或 WIFI 代码，因为这是我们自己编写的。我们只用 twitter 代码编写了一个单独的应用程序来测试它，它似乎工作正常，所以我不这么认为'

一些有更多经验的 android 程序员是否可以查看其中的一些代码并指出他们看到的任何问题，特别是可能导致该应用程序 ANR 的原因？此外，如果有人愿意提出比我们目前拥有的更好的架构/框架，我会很感兴趣。当应用程序运行时，我们最终会发送一条类似于下面这样的推文：

# ajd7v-34 U0b0ed38fc_ ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _** *00b0ed39c4* ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _** _W0b0edf50c+44974893-093232387

这是我们活动类的相关代码......

```
 private Intent in;
public static TextView textView1;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spectral_tweets);

    mConsumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);

    mProvider = new DefaultOAuthProvider(
            "http://api.twitter.com/oauth/request_token",
            "http://api.twitter.com/oauth/access_token",
            "http://api.twitter.com/oauth/authorize");

    prefs = PreferenceManager.getDefaultSharedPreferences(this);
    String token = prefs.getString("token", null);
    String tokenSecret = prefs.getString("tokenSecret", null);

    if (token != null && tokenSecret != null) {
        mConsumer.setTokenWithSecret(token, tokenSecret);
        oauthClient = new OAuthSignpostClient(CONSUMER_KEY,
                CONSUMER_SECRET, token, tokenSecret);
        twitter = new Twitter(TWITTER_USER, oauthClient);
    } else {
        Log.d(TAG, "onCreate. Not Authenticated Yet " );
        new OAuthAuthorizeTask().execute();
    }

    in = new Intent(this, BackgroundService.class);
    textView1 = (TextView) findViewById(R.id.textView1);
    changeText("On Create");
}

public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_spectral_tweets, menu);
    return true;
}

/**
 * Changes textView1 to string msg
 */
public static void changeText(String msg) {
    textView1.setText(msg);
}

/**
 * tell the service to start displaying GPS/WIFI updates
 */
public void startMessages(View view) {
    startService(in);
}

/**
 * tell the service to stop displaying GPS/WIFI updates
 */
public void stopMessages(View view) {
    changeText("stopped");
    stopService(in);
}

/**
 * When the BACK key is pressed ask the user if they want to quit
 * if they do then stop the service and exit the program
 */
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        @SuppressWarnings("unused")
        AlertDialog alertbox = new AlertDialog.Builder(this)
        .setMessage("Do you want to exit the application?")
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            // stop the service and end the program
            public void onClick(DialogInterface arg0, int arg1) {
                stopService(in);
                finish();
            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {
            // return to program
            public void onClick(DialogInterface arg0, int arg1) {}
        })

        .show();
    }
    return super.onKeyDown(keyCode, event);
} 
```

这是我们服务中处理 gps 和 wifi 的代码......

```
public class BackgroundService extends Service implements LocationListener
{
private static Timer repeater = new Timer();
private static LocationManager lm;
private getInfoAndTweet getAndTweet = this.new getInfoAndTweet();

private static final int MIN_TIME_MILLISECONDS = 0;
private static final int MIN_DIST_METERS = 0;
private static final int frequency = 30 * 1000;
private double temp_long = 0.0;
private double temp_lat = 0.0;
private int temp_count = 0;
private boolean thread_running = false;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

public void onCreate()
{
    super.onCreate();
    lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME_MILLISECONDS, MIN_DIST_METERS, this);
    Toast.makeText(getApplicationContext(), "Location display is on", Toast.LENGTH_SHORT).show();
    startService();
}

public void onDestroy()
{
    repeater.cancel();
    lm.removeUpdates(this);
    unregisterReceiver(getAndTweet.receiver);
    Toast.makeText(getApplicationContext(), "Location display is off", Toast.LENGTH_SHORT).show();
    temp_lat = 0;
    temp_long = 0;
    temp_count = 0;
}

private void startService()
{
    repeater.scheduleAtFixedRate(getAndTweet, 0, frequency);
}

/* this class will contain all of the GPS and WIFI classes so that none of that stuff clogs up the main thread */
private class getInfoAndTweet extends TimerTask
{
    WifiManager wifi;
    BroadcastReceiver receiver;

    DecimalFormat lat = new DecimalFormat("00.000000");
    DecimalFormat lon = new DecimalFormat("000.000000");
    String gps_info;
    String wifi_info;
    String final_string;
    private final String hashtag = "#ajd7v-34 ";
    int count = 0;

    private class WIFIscanner extends BroadcastReceiver
    {

        private final ArrayList<Integer> channel_numbers = new ArrayList<Integer> (Arrays.asList(0, 2412, 2417, 2422, 2427, 2432, 2437, 2442, 2447, 2452, 2457, 2462));
        List <ScanResult> results;
        Map<Integer, String> levels = new HashMap<Integer, String>();
        String empty_channel = "__________";        // 10 spaces

        public WIFIscanner()
        {
            init_levels();
        }

            public void onReceive(Context context, Intent intent)
        {
            wifi_info = "";
            results = wifi.getScanResults();
            ScanResult sr;
            Iterator<ScanResult> it = results.iterator();
            ScanResult channel_info[] = new ScanResult[12];

            for (int i = 1; i < 12; i++)
            {
                channel_info[i] = null;
            }

            while (it.hasNext())
            {
                sr = it.next();
                int channel = channel_numbers.indexOf(Integer.valueOf(sr.frequency));

                if (channel_info[channel] == null)
                {
                    channel_info[channel] = sr;
                }
                else
                {
                    if (channel_info[channel].level < sr.level)
                    {
                        channel_info[channel] = sr;
                    }
                }
            }

            for (int i = 1; i < 12; i++)
            {
                if (channel_info[i] != null)
                {
                    wifi_info += (levels.get(channel_info[i].level) == null ? "0" : levels.get(channel_info[i].level))  + channel_info[i].BSSID.replace(":", "").substring(2, 11);
                }
                else
                {
                    wifi_info += empty_channel;
                }
            }

            final_string = hashtag + wifi_info + gps_info;
            if (temp_count != 0)
            {
                if(Twitter_Test_AppActivity.twitter != null) {
                    Twitter_Test_AppActivity.twitter.setStatus(final_string);
                    Twitter_Test_AppActivity.changeText("Auto Tweet Sent: " + count + "\t" + final_string);
                } else {
                    Twitter_Test_AppActivity.changeText("Tweet not sent");
                }
            }
            else
            {
                Twitter_Test_AppActivity.changeText(count + "\tno new GPS info");
            }
            thread_running = false;
        }

    }

    public void run()
    {
        thread_running = true;
        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        if (receiver == null)
        {
            receiver = new WIFIscanner();
        }
        registerReceiver(receiver, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));

        String latitude = lat.format(temp_lat / temp_count).replace(".",  "");
        String longitude = lon.format(temp_long / temp_count).replace(".",  "");
        gps_info = ((temp_lat / temp_count) > 0 ? "+" : "") + latitude + ((temp_long / temp_count) > 0 ? "+" : "") + longitude;

        wifi.startScan();
        count++;
    }
}

public void onLocationChanged(Location location) {
    if (thread_running)
    {
        temp_lat += location.getLatitude();
        temp_long += location.getLongitude();
        temp_count ++;
    }
}

public void onProviderDisabled(String provider) {
    Toast.makeText(getApplicationContext(), "GPS disabled", Toast.LENGTH_SHORT).show();

}

public void onProviderEnabled(String provider) {
    Toast.makeText(getApplicationContext(), "GPS enabled", Toast.LENGTH_SHORT).show();

}

public void onStatusChanged(String provider, int status, Bundle extras) {} 
```

}

编辑当我更多地考虑这个问题时，我想到在主线程上运行的 twitter 代码也可能导致我的 ANR。学校的网络不是最好的，我的笔记本电脑有时甚至无法上网（不是我的笔记本电脑的错，其他地方都很好）。尝试发送推文时，网络连接缓慢或不良是否会导致我的主线程挂断，从而导致手机 ANR 我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:00:56.613

首先`TimerTask`不是存储数据的最佳位置。使用您的`TimerTask`only 定期从您的`Service`.

其次，最好将所有`Context`相关组件的所有内部类都设为类`Activity`或类。这将保护您的代码免受内存泄漏。`Service``static`

此外，您最好只注册`BroadcastRreceiver`一次，并且不要在每次调用计时器任务时都这样做。

我真的建议您阅读一些东西，例如 Reto Meier “Android 应用程序开发”一书。

# jquery - 可点击的幻灯片

> ID：13651677
> 
> 赞同：0
> 
> 时间：2012-11-30T19:18:11.107
> 
> 标签：jquery, slideshow, clickable

我从这里开始......我正在尝试设置一个非常简单的可点击幻灯片，例如在此页面上使用的幻灯片，但水平而不是垂直。

[http://benhulse.com/Look-of-the-Games](http://benhulse.com/Look-of-the-Games)

我正在尝试使用这个插件：

[http://jquery.malsup.com/cycle/basic.html](http://jquery.malsup.com/cycle/basic.html)

他们的基本脚本是：

```
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
});
</script> 
```

我是 jquery 初学者，所以不确定如何在脚本中实现以下默认选项：

```
prevNextEvent:'click.cycle',// event which drives the manual transition to the previous or next slide 
```

我不想要任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:25:30.890

您可以将水平滚动的要求设置为“scrollLeft”

```
$('#slideshow').cycle({ 
fx:      'scrollLeft', 
speedIn:  2000, 
speedOut: 500, 
easeIn:  'easeInCirc', 
easeOut: 'easeOutBounce', 
delay:   -2000 
}); 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:36:00.543

要继续点击下一张幻灯片，您可以执行以下操作：

```
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'scrollLeft' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
    $('.slideshow').cycle('pause');
    $(".slideshow").click(function() {
        $('.slideshow').cycle('next');
    });
}); 
```

[http://jsfiddle.net/KKs2z/1/](http://jsfiddle.net/KKs2z/1/)

# mysql - 选择数据时的codeigniter数据库错误

> ID：13651678
> 
> 赞同：3
> 
> 时间：2012-11-30T19:18:10.727
> 
> 标签：mysql, codeigniter

我在从数据库中选择数据时遇到问题。它向我显示以下错误

```
 A Database Error Occurred

 Error Number: 1054

 Unknown column 'BA' in 'where clause'

 SELECT * FROM crime_details INNER JOIN crime_slink ON crime_slink.report_ID =crime_details.report_ID INNER JOIN crime_suspect ON crime_suspect.id=crime_slink.suspect_id INNER JOIN crime_vlink ON crime_vlink.report_ID=crime_details.report_ID INNER JOIN crime_victim ON crime_victim.id=crime_vlink.victim_id WHERE crime_details.report_ID =BA-12-00002

 Filename: C:\xampp\htdocs\CNPPO\system\database\DB_driver.php

 Line Number: 330 
```

似乎问题出在这部分 `WHERE crime_details.report_ID =BA-12-00002` 我认为问题是由我的查询中的破折号或连字符引起的。我使用`$this->db-query()`codeigniter 的功能进行查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:03:03.450

`crime_details.report_ID`持有 a `VARCHAR`，所以你的 where 条件应该是

```
WHERE crime_details.report_ID = 'BA-12-00002' 
```

即，您需要将值括在引号中。

此外，`$this->db->query()`您应该使用 ActiveRecord 的查询构建器，而不是使用它来运行您的手写 MySQL 查询，它会为您处理这些问题。例如，您可以这样做：

```
$query = $this->db->get_where('crime_reports', array( 'report_ID' => 'BA-12-00002' )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:02:28.797

改变

```
WHERE crime_details.report_ID =BA-12-00002 
```

到

```
WHERE crime_details.report_ID = "BA-12-00002" 
```

# sql-server - 链接 SQL Server 和更新 Varchar(MAX) 被截断

> ID：13651680
> 
> 赞同：4
> 
> 时间：2012-11-30T19:18:20.990
> 
> 标签：sql-server, sql-server-2008-r2

我有许多数据库要维护，并且我不想为每个环境创建一个脚本，所以我创建了同义词并结合链接服务器来抽象出我的更新语句的表。

我的问题是我似乎无法更新超过 24-32 个字符的 varchar(max) 字段（而且它会有所不同！）

我一直在研究网络，但找不到任何与此直接相关的内容。（更新：链接到我的工作站，而不是通过网络连接到服务器，本地链接的 sql 服务器更新正常。我认为这是主机的一部分环境问题？也许是一些定义的限制？）

下面是我如何设置的示例。

```
--I create some dynamic sql to create the sysnonyms for me.
declare @Synonym varchar(30) = 'sym_Employee'
declare @DBTable = 'Employee'
Select @Stmt = 'create synonym ' + @Synonym + ' for TargetSQLServer.' + @DBName + '.dbo.' + @DBTable + ';'
exec @Stmt

--this statment stops at 24 chars, but the column def is varchar(max)
update sym_employee
set Notes = '012345678901234567890123456789'
where employee_ID = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:42:05.783

您是否尝试过设置`lazy schema validation`to `true`/ `false`？

以下链接的更多详细信息：

[http://msdn.microsoft.com/en-us/library/ms178532.aspx](http://msdn.microsoft.com/en-us/library/ms178532.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:01:05.840

请确保您已使用 varchar 数据类型定义长度，因为当您未使用 varchar 定义长度时，它采用可能导致问题的默认长度（我猜是 20 个字符）。

# ios5 - MKNetworkkit：从服务器获取 JSONArray

> ID：13651682
> 
> 赞同：1
> 
> 时间：2012-11-30T19:18:43.247
> 
> 标签：ios5, mknetworkkit, mknetworkengine

我正在使用 MKNewtworkkit 进行网络操作是我的 ios 应用程序。我在服务器中有 JSONInterface，我可以通过它检索 JSONArray。我也能够在 android 应用程序和浏览器中获取数据，但是当我尝试使用 MKNetworkkit [completedOperation responseJSON] 获取 ftech 数据时返回 nil。请你帮助我好吗

```
MKNetworkEngine *network_engine= [[MKNetworkEngine alloc] initWithHostName:@"****.com"];
 NSMutableDictionary* params=[[NSMutableDictionary alloc] initWithCapacity:3];
[params setObject:[self.userName text] forKey:@"user"];
[params setObject:[self.password text] forKey:@"password"];
[params setObject:@" " forKey:@"meters"];
MKNetworkOperation* operation =[network_engine operationWithPath:@"q/out" params:params httpMethod:@"GET" ssl:NO]; 
[operation onCompletion:^(MKNetworkOperation *completedOperation) {
    NSLog(@"response: %@",[completedOperation responseString]);
    @try {
        NSArray *data_array=[completedOperation responseJSON];
        for (int i=0; i<[data_array count]; i++) {
            NSDictionary *dict=[data_array objectAtIndex:i];
            NSString *id=[dict valueForKey:@"mid"];
            NSString *location=[dict valueForKey:@"location"];
            NSLog(@"id:%@ , location:%@",id,location);
        }
    }

    @catch (NSException *exception) {
        NSLog(@"Exception: %@",[exception name]);
    }

} onError:^(NSError *error) {
         NSLog(@"Couldn't make network call");
}];
[network_engine enqueueOperation:operation]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-12T19:32:54.847

我知道这是一个旧帖子，但万一其他人遇到这个......

看起来您正在将“responseJSON”转换为 NSArray，但它应该是 NSDictionary。

这对我有用->

```
 MKNetworkOperation *op = [mkNetworkEngine operationWithURLString:CONFIG_FILE_URL];
[op setShouldNotCacheResponse:YES];

[op addCompletionHandler:^(MKNetworkOperation *completedOperation) {

    NSLog(@"** Success downloading config file...");

    NSDictionary* responseJSON = completedOperation.responseJSON;

} errorHandler:^(MKNetworkOperation *completedOperation, NSError *error) {

    NSLog(@"** Failed downloading config file - error: %@",error);

}];

[mkNetworkEngine enqueueOperation:op]; 
```

# c# - Visual Studio 2010 Thinks it's in Debug Mode (but it's set to Release mode)

> ID：13651683
> 
> 赞同：2
> 
> 时间：2012-11-30T19:18:46.220
> 
> 标签：c#, wpf, visual-studio-2010, release, visual-studio-debugging

I have verified in the project properties and solution properties, configuration manager, that my solution and project are set to x64 Release. The output path is "bin\x64\Release\".

I have the following in app.xaml.cs (it's a C# WPF application), which was working shortly ago:

```
#if (!DEBUG)
        Mouse.OverrideCursor = Cursors.None;
#endif 
```

Currently, in Release mode, the middle line is grayed out. Removing the "!" restores it.

When running, in Release mode, the mouse cursor is not hidden, and this section is seeminly skipped over.

Visual Studio, in another project, works well and fine with Debug vs. Release modes. Has anyone seen this behaviour, and does anyone have any ideas on how to fix it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:23:49.787

Check your constant definitions, DEBUG can be turned on even for release configuration

Right click on the project, select properties, on the Build sheet in the general section make sure the "Define DEBUG constant" box is not checked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:25:27.787

"Debug" and "Release" mode are just two different configurations that are created by default by Visual Studio. There are a number of settings for each configuration set when they are created, but all of them can be changed manually. You can change whether or not the compiler will compile the project with debugging information, whether optimizations are enabled, and *whether or not the DEBUG precompiler directive is defined*. It would seem that the debug derictive was defined on your Release build.

# regex - 如何使这个正则表达式变得懒惰

> ID：13651691
> 
> 赞同：0
> 
> 时间：2012-11-30T19:18:58.993
> 
> 标签：regex

我有这个字符串：

```
XXXX:  150: some texxt: long text 
```

在这种情况下，我只需要获取`::`like之间的数字。`:150:`

```
 echo "$LINE" |sed -n 's/^.*\XXXX:\(.*\)\:.*/\1/p' 
```

得到我 `150: some texxt`

如何让它变得懒惰并在第一场比赛中停止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:21:02.657

```
$ LINE='XXXX:  150: some texxt: long text'

$ echo "$LINE" | sed -r 's@^[^:]+:([^:]+):.*@\1@g'
 150 
```

或者

```
$ echo "$LINE" | perl -pe 's@.*?:([^:]+):.*@\1@g'
 150 
```

**解释**

*   `[^x]`表示：排除**x**字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:25:16.063

我不确定这是否适用于您的情况，但是此正则表达式将找到 : 字符之间的所有数字。

```
:\s*(\d+)\s*: 
```

您将在捕获组 1 中找到该编号。

另一种您不需要查看捕获组并简单地使用整个匹配的类似方法是（看起来这个在 Perl 中不起作用）：

```
(?<=:\s*)\d+(?=\s*:) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:28:19.140

术语是“非贪婪”：

```
^.*?\XXXX:\(.*\)\:.* 
```

它是通过添加一个`?`之后来实现的`.*`

# python - Python ljust 方法在格式化字符串上没有按预期工作

> ID：13651709
> 
> 赞同：0
> 
> 时间：2012-11-30T19:20:02.883
> 
> 标签：python

使用字符串格式化时，结果字符串比预期的要长。

例如：

```
In [1]: "%s".ljust(7) % "123456"
Out[1]: '123456     ' 
```

输出字符串不是 7 个字符长。

我对“在后台”究竟发生了什么导致这种行为感兴趣？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:22:58.963

`"%s"`首先被调整到 7 个位置 - 例如`"%s "`，然后你用`'123456'`%s 替换 ......因此你得到的结果......

```
>>> '%s'.ljust(7)
'%s     '
>>> _ % '123456'
'123456     ' 
```

你可以使用：

```
>>> ('%s' % '123456').ljust(7)
'123456 
```

或者在格式字符串中指定适当的宽度...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:23:14.710

应用于您的`ljust()`格式化字符串，因为它只有两个字符长，所以附加了五个空格。

然后将另一个字符串插入其中。

# python - 替换原来的python

> ID：13651713
> 
> 赞同：0
> 
> 时间：2012-11-30T19:20:08.520
> 
> 标签：python

由于某些需要，我被迫更正`os.environ['PATH']`以能够运行`dir\to\fake\python.cmd`脚本，该脚本在执行之前向原始参数添加了一些额外的参数。

我还有两个 python 脚本：

**测试1.py：**

```
# ...
p = subprocess.call("test2.py")   # shell=True works fine
# ... 
```

**测试2.py：**

```
# ...
print "Hello from test2.py"
# ... 
```

当我运行`python test1.py`我的“假”`python.cmd`做它的东西时，指的是原始 python`c:\Python25`并`test1.py`使用我的额外参数运行。但是，遗憾的`test2.py`是，脚本从未被调用。如果我把`shell=True`作为`subprocess.call`论点 - 一切都很好，`test2.py`被称为。

我知道，默认情况下，Windows 正在尝试在实际`c:\Python25`工作目录中找到用于调用的 python 解释器。`shell=False`

对您的问题是：如何在不更改`test1.py`and 中的代码的情况下实现目标`test2.py`？也许`virtualenv`图书馆在这种情况下可能非常有用？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:34:16.590

如[文档中所述](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)：

> shell 参数（默认为 False）指定是否使用 shell 作为程序来执行。

和

> 在 shell=True 的 Windows 上，COMSPEC 环境变量指定默认 shell。唯一需要在 Windows 上指定 shell=True 的情况是当您希望执行的命令内置到 shell 中时（例如 dir 或 copy）。您不需要 shell=True 来运行批处理文件或基于控制台的可执行文件。

因此，当您调用 时`subprocess.call("test2.py")`，系统会尝试将`test2.py`其作为可执行文件进行调用，但事实并非如此，因此它失败了。但是，您不会捕获返回值`subprocess.open`来检查错误情况，因此它会静默失败。当您使用 调用它时`shell=True`，它会使用参数 调用系统 shell `test2.py`，后者会依次查找`.py`系统上文件的默认可执行文件，然后以这种方式执行文件。

尽管如此，这里更深层次的问题是你的代码设计得很糟糕。您有正当理由通过操作系统从另一个 python 脚本分派 python 脚本的可能性非常小。与其在已有的基础上修补另一个笨拙的 hack，不如省去自己的麻烦，并重构系统，让它以更简单、更明智、更自然的集成方式做事。

# html - 如何控制 html 中的 SVG 图像表？

> ID：13651714
> 
> 赞同：0
> 
> 时间：2012-11-30T19:20:09.863
> 
> 标签：html, google-chrome, firefox, svg, html-table

我想制作一张 SVG 图像表。下面的代码在 Firefox 中运行良好，使两个相邻的黑色方块按比例放大到表格单元格的大小，但在 Chrome 中，svg 图像是表格单元格内的小东西。

我在做傻事吗？有没有一种便携的方法可以让 SVG 缩放以适合桌子？

```
<table width="800" height="400" border="1" cellpadding="0" cellspacing="0">
<tr>
 <td>
  <svg viewBox="0 0 220 220"><rect width="220" height="220"/>
  </svg>
 </td>
 <td>
  <svg viewBox="0 0 220 220"><rect width="220" height="220"/>
  </svg>
 </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:45:58.617

唯一有点可移植的方法似乎是使用 svg 宽度/高度的绝对值，如本例所示：http: [//jsfiddle.net/Rd7ed/1/](http://jsfiddle.net/Rd7ed/1/)。

```
svg { 
    width: 100px;
    height: 100px;
    display: block;
} 
```

但是，在 Chrome 中，上述内容似乎导致边框没有完全围绕桌子绘制（可能是一个错误）。

改用百分比宽度和高度：http: [//jsfiddle.net/Rd7ed/](http://jsfiddle.net/Rd7ed/)（这在 Chrome 中无法正常工作，这可能是另一个错误）。

也许您可以使用一个 svg 而根本没有表格？

# python - Python 不能对 csv 文件使用 loadtxt

> ID：13651715
> 
> 赞同：1
> 
> 时间：2012-11-30T19:20:12.010
> 
> 标签：python, numpy

我有一个包含所有数字的 Excel 电子表格，当我尝试打开它时出现错误：

```
 for fname in glob.glob("Train*"):

     prob = 0
     a = array(loadtxt(fname, skiprows=1, dtype=object)[prob], dtype=float) 
```

错误：a = array(loadtxt(fname, skiprows=1, dtype=object)[prob], dtype=float) ValueError: 使用序列设置数组元素。

我记得这个工作之前，但我有一段时间没有打开它，不知道出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T13:52:06.803

把它分解。

第一步是确定给您带来问题的文件。插入

```
print fname 
```

作为循环内的第一行。它在错误之前打印的姓氏是有问题的文件。然后，在命令提示符下运行

```
loadtxt("thebadfilename", skiprows=1, dtype=object) 
```

看看你得到了什么。

大约在这一点上，您应该看到出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:11:31.097

正如评论中所说，`numpy.loadtxt`无法读取 Excel 文件。

您可以尝试[`pandas.ExcelFile`](http://pandas.pydata.org/pandas-docs/stable/io.html#excel-files)读取您的数据（不确定这是否可行，因为您没有给出示例。

文档字符串：

> ```
> Class for parsing tabular excel sheets into DataFrame objects.
> Uses xlrd for parsing .xls files or openpyxl for .xlsx files.
> See ExcelFile.parse for more documentation
> 
> Parameters
> ----------
> path : string or file-like object
>     Path to xls file
> kind : {'xls', 'xlsx', None}, default None 
> ```

# perl - 以fasta顺序搜索和替换

> ID：13651717
> 
> 赞同：1
> 
> 时间：2012-11-30T19:20:26.690
> 
> 标签：perl, unix, sed, awk

我正在寻找一种使用通配符搜索和替换的班轮解决方案。

输入：

```
>sequence1
ATGCCAAACTGGAACT[A/T]ATTCAATGGCATGGACATAAATTC[A/C]ATACAATTACAAA
>sequnce2
ATCAAACCGGTATGTACATT[A,T/G]ATTCATTACTA 
```

输出：

```
>sequence1
ATGCCAAACTGGAACTNATTCAATGGCATGGACATAAATTCNATACAATTACAAA
>sequnce2
ATCAAACCGGTATGTACATTNATTCATTACTA 
```

我需要用 "N" 替换 "[" 和 "]" 之间的所有内容。数据长度可能会有所不同。我能够使用 awk 脚本找到该模式，但不知道如何替换它。请帮忙..

```
awk -F'[][]' '{for(i=2;i<=NF;i=i+2) print $i}' 1.fasta 
```

我尝试的另一件事是 vi 编辑器

```
:%s/[.*\]/N/g 
```

使用以上一个，它将所有“[A/T]ATTCAATGGCATGGACATAAATTC[A/C]”替换为 N

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:30:25.080

尝试这样做：

```
perl -pe 's/\[.*?\]/N/g' file.txt 
```

**解释**（关于[正则表达式）](http://en.wikipedia.org/wiki/Regex)

*   `s///`是基本的替换*骨架*（对于`perl`or `sed`）：`s/before/after/`
*   `s///g`：最后的`g`修饰符，表示*所有出现*
*   `\[`: 表示 : 文字`[`（或其他任何*反斜杠*）
*   `.`: 意思是:*任何字符*
*   `*`表示：*0 或 N 个字符*
*   `?`告诉最后一个正则表达式处于*非贪婪*模式

也就是说，我有另一个*有趣的*解决方案：

```
perl -ne 'print join "N", split /\[.*?\]/;' file.txt 
```

也许像这样更清楚？！（但还是一样）

```
perl -ne '
    print join(
        "N",
        split(/\[.*?\]/)
    );
' file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:33:28.220

只需添加另一个 awk 单行。您的目标是替换，无需使用 $x

```
awk '{gsub(/\[[^\]]*\]/,"N")}1' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:25:33.653

```
sed 's/\[[^]]*\]/N/g' file 
```

编辑：按要求解释：

查找文字“[”（[），然后是零个或多个非“]”字符（[^]]*）的任何序列，然后是文字“]”（]），并将整个字符串替换为字母 N。在每条线上“全局”地进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:44:26.113

这适用于 vi 编辑器：

```
%s/\[[^\]]*\]/N/g 
```

# c# - 如何在 texbox 数据绑定时将默认值设置为 radgrid 中的 asp 文本框

> ID：13651718
> 
> 赞同：1
> 
> 时间：2012-11-30T19:20:33.670
> 
> 标签：c#, asp.net, radgrid

我在 .aspx 文件中有如下文本框代码

```
 <telerik:GridTemplateColumn  UniqueName="Format" HeaderText="Format" DataField="SystemMessageTextId" HeaderStyle-Width="60">
                <ItemTemplate>
                        <asp:Label runat="server" ID="lblFormat" Text='<%# Eval("Format") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtFormat" Text='<%# Bind("Format") %>' MaxLength="255"></asp:TextBox>
                    <span style="color: Red">*&nbsp;
                        <asp:RequiredFieldValidator ID="rfFormat" runat="server" ErrorMessage = "Please enter a valid Format value." ControlToValidate="txtFormat" Display="Dynamic"></asp:RequiredFieldValidator>
                    </span>
                </EditItemTemplate>
            </telerik:GridTemplateColumn> 
```

.aspx.cs 文件如下所示

```
 if ((e.Item is GridEditableItem) && (e.Item.IsInEditMode))

 {
        GridEditableItem edititem = (GridEditableItem)e.Item;
       ((TextBox)(edititem["Format"].FindControl("txtFormat"))).Text = "pdf";
 } 
```

我在 GridItemCreated 函数中有这部分，但是当我尝试它时，默认值不会显示。有人可以帮我弄这个吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:05:39.867

请尝试使用以下代码片段。

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridEditableItem && e.Item.IsInEditMode)
    {
        GridEditableItem item = e.Item as GridEditableItem;
        TextBox txtFormat = (item.FindControl("txtFormat") as TextBox);
        txtFormat.Text = "Your text";
    }
} 
```

如果您想分配/访问数据，那么最好使用 ItemDataBound 事件。假设您想将 textchanged 事件分配给 Textbox，那么如果我们必须使用 ItemCreated 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T07:45:44.873

请在 gridview 的文本框中输入 Text="0" 以设置默认值 0。

# c# - HTML Firefox 表格对齐问题

> ID：13651719
> 
> 赞同：2
> 
> 时间：2012-11-30T19:20:39.223
> 
> 标签：c#, asp.net, html, firefox

这段代码似乎在除 Firefox 之外的所有浏览器上都能正常运行。在 Firefox 上，每个表的第一行都正确对齐，但其余行则偏右。这是我的第一个网站，所以如果我没有遵循任何其他正确的编码实践，请告诉我。该网站是实时的，可以在 www.topclassfifa.com 查看硬币页面是与 Firefox 对齐问题的页面。

```
<div class="center">
 <table id="XboxTable1" cellspacing="0" cellpadding="0" width="1000" 
    align="center" dir="ltr">
        <tr>
            <td style="padding-left:50px; padding-right:50px; padding-top:0px; padding-bottom:0px;" align="center" width="333" colspan="0" rowspan="0">
                <asp:Image ID="Image7" runat="server" ImageUrl="~/Images/Xbox50kIcon.png" /></td>
            <td style="padding-left:50px; padding-right:50px; padding-top:0px; padding-bottom:0px;" align="center" width="334" colspan="0" rowspan="0"><asp:Image ID="Image8" runat="server" ImageUrl="~/Images/Xbox100kIcon.png"/></td>
            <td style="padding-left:50px; padding-right:50px; padding-top:0px; padding-bottom:0px;" align="center" width="333" colspan="0" rowspan="0"><asp:Image ID="Image9" runat="server" ImageUrl="~/Images/Xbox250kIcon.png" /></td>
    </tr>
        <tr>
            <td style="font-weight: bold; font-size:medium"; width="333" align="center"colspan="0" rowspan="0">
                <font color="#92C83E">£<%=Xbox50kPrice %></font></td>
            <td style="font-weight: bold; font-size:medium" width="334" align="center" colspan="0" rowspan="0">
                <font color="#92C83E">£<%=Xbox100kPrice %></font></td>
            <td style="font-weight: bold; font-size:medium" width="333" align="center" colspan="0" rowspan="0">
                <font color="#92C83E">£<%=Xbox250kPrice %></font></td>
    </tr>
        <tr>
            <td style="width: 333px" align="center" colspan="0" rowspan="0">
                <asp:Label ID="Label4" runat="server" Text="Quantity: " ForeColor="#92C83E"></asp:Label>
                <asp:DropDownList ID="DropDown50kXbox" runat="server" Width="44px" 
                    onselectedindexchanged="Changed50kXbox" AutoPostBack="true" BackColor="#0168D4" 
                    ForeColor="#92C83E">
                    <asp:ListItem>0</asp:ListItem>
                    <asp:ListItem>1</asp:ListItem>
                    <asp:ListItem>2</asp:ListItem>
                    <asp:ListItem>3</asp:ListItem>
                    <asp:ListItem>4</asp:ListItem>
                    <asp:ListItem>5</asp:ListItem>
                    <asp:ListItem>6</asp:ListItem>
                    <asp:ListItem>7</asp:ListItem>
                    <asp:ListItem>8</asp:ListItem>
                    <asp:ListItem>9</asp:ListItem>
                    <asp:ListItem>10</asp:ListItem>
                </asp:DropDownList>
            </td>
            <td style="width: 334px" align="center" colspan="0" rowspan="0">
                <asp:Label ID="Label5" runat="server" Text="Quantity: " ForeColor="#92C83E"></asp:Label>
                <asp:DropDownList ID="DropDown100kXbox" runat="server" Width="44px" 
                    onselectedindexchanged="Changed100kXbox" AutoPostBack="true" BackColor="#0168D4" 
                    ForeColor="#92C83E">
                    <asp:ListItem>0</asp:ListItem>
                    <asp:ListItem>1</asp:ListItem>
                    <asp:ListItem>2</asp:ListItem>
                    <asp:ListItem>3</asp:ListItem>
                    <asp:ListItem>4</asp:ListItem>
                    <asp:ListItem>5</asp:ListItem>
                    <asp:ListItem>6</asp:ListItem>
                    <asp:ListItem>7</asp:ListItem>
                    <asp:ListItem>8</asp:ListItem>
                    <asp:ListItem>9</asp:ListItem>
                    <asp:ListItem>10</asp:ListItem>
                </asp:DropDownList>
            </td>
            <td style="width: 333px" align="center" colspan="0" rowspan="0">
                <asp:Label ID="Label6" runat="server" Text="Quantity: " ForeColor="#92C83E"></asp:Label>
                <asp:DropDownList ID="DropDown250kXbox" runat="server" Width="44px" 
                    onselectedindexchanged="Changed250kXbox" AutoPostBack="true" BackColor="#0168D4" 
                    ForeColor="#92C83E">
                    <asp:ListItem>0</asp:ListItem>
                    <asp:ListItem>1</asp:ListItem>
                    <asp:ListItem>2</asp:ListItem>
                    <asp:ListItem>3</asp:ListItem>
                    <asp:ListItem>4</asp:ListItem>
                    <asp:ListItem>5</asp:ListItem>
                    <asp:ListItem>6</asp:ListItem>
                    <asp:ListItem>7</asp:ListItem>
                    <asp:ListItem>8</asp:ListItem>
                    <asp:ListItem>9</asp:ListItem>
                    <asp:ListItem>10</asp:ListItem>
                </asp:DropDownList>
            </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>       
    </tr>
        <tr>
            <td style="width: 333px; font-weight: bold; font-size:large" align="center" colspan="0" rowspan="0">
                <font color="#92C83E">£<%=Xbox50kTotal %></font></td>
            <td style="width: 333px; font-weight: bold; font-size:large" align="center" colspan="0" rowspan="0">
                <font color="#92C83E">£<%=Xbox100kTotal %></font></td>
            <td style="width: 333px; font-weight: bold; font-size:large" align="center" colspan="0" rowspan="0">
                <font color="#92C83E">£<%=Xbox250kTotal %></font></td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:43:29.627

尝试从标签中删除`rowspan="0"`and`colspan="0"`属性。`<td>`

# bash - bash脚本中的mvn if语句

> ID：13651723
> 
> 赞同：8
> 
> 时间：2012-11-30T19:20:57.023
> 
> 标签：bash, maven

我想在 bash 脚本中运行命令 mvn clean。但我想把它放在一个 if 语句中。如果清理无法正常运行，我想使用 echo 语句退出 bash 脚本。这是导致问题的代码： if [ mvn clean ]; 然后

我尝试将 $(mvn clean) 放在 if 语句中，但终端说参数太多。有谁知道这是否可能？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-30T19:27:51.890

这就是你想要的：

```
mvn clean
if [ "$?" -ne 0 ]; then
    echo "Maven Clean Unsuccessful!"
    exit 1
fi 
```

**解释：**

*   `$?`是一个[特殊的 shell 变量](http://unixhelp.ed.ac.uk/scrpt/scrpt2.2.2.html)，包含最近执行的命令的退出代码（无论它是否成功终止）。
*   `-ne`是`test` [内置](http://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#Bourne-Shell-Builtins) `[`选项。它代表“不相等”。所以在这里我们正在测试退出代码`mvn clean`是否不等于零。
*   `echo "Maven Clean Unsucccessful!"`- 如果是这种情况，那么我们会输出一些指示性消息，并使用错误的退出代码退出脚本本身。

当你这样做时`$(mvn clean)`，它会生成一个新的子 shell 来运行，然后简单地将输出到该子 shell 中的`mvn clean`所有内容从 running 转储到父shell 中使用的位置。`stdout``mvn clean``$(...)`

* * *

**或者**，您可以这样做：

```
mvn clean || { echo "Maven Clean Unsuccessful"; exit 1; } 
```

这只是做同样事情的速记语法糖。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T19:28:13.223

检查退出状态不需要括号：

```
if mvn clean ; then
   echo ok
else
   echo Something went wrong.
   exit 1
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-29T17:57:52.073

我更喜欢使用变量来捕获返回码。提高可读性并允许运行其他命令而不必担心破坏返回码值：

```
mvn clean

MVN_RTN=$?
if [ "${MVN_RTN}" -ne 0 ]; then
   echo "Maven returned failure code ${MVN_RTN}"
   exit 1
fi 
```

# .net - DPAPI 和 ProtectedData.Protect() 如何处理 .net 4 中的磁盘映像/克隆？

> ID：13651725
> 
> 赞同：9
> 
> 时间：2012-11-30T19:20:58.250
> 
> 标签：.net, dpapi

我正在测试将 .net v4 的 System.Security.Cryptography.ProtectedData() 和 UnprotectData() 方法与 DataProtectionScope.LocalMachine 范围一起使用以确保文件只能在单台机器上加密/解密的想法。这是我在做什么的一般想法......

```
//Encrypt    
byte[] outBytes = ProtectedData.Protect(File.ReadAllBytes(fileIn), null, DataProtectionScope.LocalMachine);
File.WriteAllBytes(fileOut, outBytes);

//Decrypt    
byte[] outBytes = ProtectedData.Unprotect(File.ReadAllBytes(fileIn), null, DataProtectionScope.LocalMachine);            
File.WriteAllBytes(fileOut, outBytes); 
```

我已经完成了大量测试，以确保在执行此操作时获得预期的行为，并且它似乎可以完美地工作，因为同一台机器上的任何用户都可以使用上面列出的方法调用加密/解密文件。

我的问题是，如果有人制作包含使用此机制加密的文件的系统的磁盘映像或克隆（使用 Acronis、Ghost 等），然后将该映像恢复到另一台机器，会发生什么？（一个例子是 IT 部门预加载了一个系统，然后该系统成为一组具有相同硬件配置的机器的基本映像）。在不同硬件上恢复的操作系统是否能够解密在“原始”系统上加密的文件？我希望由于不同的硬件，解密会失败，但如果所有必要的加密信息都存在于注册表或文件系统中，它可能会起作用。

显然，我可以自己测试这个，但我现在真的没有资源这样做，并且一直在无休止地搜索，看看是否有其他人可能已经知道答案。非常感谢任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:31:08.920

我的答案仅适用于`DataProtectionScope.LocalMachine`因为显然`DataProtectionScope.CurrentUser`使用存储在 Active Directory 或其他漫游源中的密钥，并且根据设计明确地不绑定到单个物理密钥。

就`LocalMachine`目前而言，计算机的克隆将能够打开相同的文件，因为机器密钥存储在机器的 HDD 上，并且是使用安装 Windows 的“sysprep”阶段生成的（这就是企业 Windows 推出的原因可以使用相同的系统映像，但只要它们运行 sysprep，每个系统都会有自己的密钥）。

计算机可以重新创建其机器密钥（它还可以保留旧密钥，以便旧数据仍然可以解密）。但是，我不知道如何让它重新创建密钥然后删除旧密钥。

来源： http: [//www.windows-server-answers.com/microsoft/Security-Cryptography/30350079/local-machine-masterkey-in-dpapi.aspx](http://www.windows-server-answers.com/microsoft/Security-Cryptography/30350079/local-machine-masterkey-in-dpapi.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:35:04.503

好问题 - 似乎每 ca 都会自动重新生成主密钥。90 天。在 Passcape.com 上有一个很好的[分析](http://www.passcape.com/index.php?section=blog&cmd=details&id=20)- DPAPI 安全性的核心与系统的 SYSKEY 相关联，该系统的 SYSKEY 存储在 SYSTEM 配置单元下的注册表中。

因为[显然](http://www.mombu.com/microsoft/security-crypto/t-local-machine-masterkey-in-dpapi-1053937.html)可以使用带有 CRYPT_PROTECT_REGENERATE 标志的 CryptProtectData() 调用来刷新克隆系统上的 DPAPI 主密钥，所以您的 DPAPI 保护用例似乎存在安全风险。

我对此事的看法是，虽然 DPAPI 对本地机器上的安全性非常有用（但请参阅 Epyx Forensics 上关于密码恢复的这篇[文章](http://epyxforensics.com/node/34)），但在克隆时您可能需要实施额外的安全措施，尤其是在您无法控制的情况下如何克隆系统。

这个问题可能会在[https://security.stackexchange.com/](https://security.stackexchange.com/)上得到更好的答案，因此您可能也想在那里提问。

# php - 在 Wordpress 中搜索自定义元字段

> ID：13651731
> 
> 赞同：0
> 
> 时间：2012-11-30T19:21:37.820
> 
> 标签：php, wordpress

我的侧边栏中有一个高级搜索表单。该操作设置为 get_bloginfo('home') ，因此它应该指向 search.php （因为表单的 id 是“searchform”）

该搜索表单应按自定义元字段过滤结果。

我尝试并创建了这个 search.php，

```
<?php
function get_reviews_by_custom_search() {
    global $wpdb;

    $grad           = preg_replace( '/^[0-9a-zA-Z-]/', '', $_GET['grad'] );
    $adType         = preg_replace( '/^[0-9a-zA-Z-]/', '', $_GET['adType'] );
    $realEstateType = preg_replace( '/^[0-9a-zA-Z-]/', '', $_GET['realEstateType'] );
    $dioGrada       = preg_replace( '/^[0-9a-zA-Z-]/', '', $_GET['dioGrada'] );
    $squareFrom     = preg_replace( '/[^0-9]/', '', $_GET['squareFrom'] );
    $squareTo       = preg_replace( '/[^0-9]/', '', $_GET['squareTo'] );
    $priceFrom      = preg_replace( '/[^0-9]/', '', $_GET['priceFrom'] );
    $priceTo        = preg_replace( '/[^0-9]/', '', $_GET['priceTo'] );
    $roomsNum       = preg_replace( '/[^0-9]/', '', $_GET['roomsNum'] );

    // Change the defaults if not chosen
    if($squareFrom == '') { $squareFrom = '0'; }
    if($squareTo == '') { $squareTo = '10000000'; }

    // Define the arguments for the WP query
    $args = array(
            'post_type' => 'post',
            'relation' => 'AND',
            'meta_query' => array(
                    array(
                            'key' => 'ex_lokacija',
                            'value' => $grad ,
                            'compare' => 'LIKE'
                    ),
                    array(
                            'key' => 'ex_vrsta_oglasa',
                            'value' => $adType ,
                            'compare' => 'LIKE'
                    ),
                    array(
                            'key' => 'ex_tip_nekretnine',
                            'value' => $realEstateType ,
                            'compare' => 'LIKE'
                    ),
                    array(
                            'key' => 'ex_dio_pg',
                            'value' => $dioGrada ,
                            'compare' => 'LIKE'
                    ),
                    array(
                            'key' => 'ex_dio_pg',
                            'value' => $dioGrada ,
                            'compare' => 'LIKE'
                    ),
                    array(
                            'key' => 'et_square_footage',
                            'value' => array( $squareFrom, $squareTo ),
                            'type' => 'numeric',
                            'compare' => 'BETWEEN'
                    ),
                    array(
                            'key' => 'et_price',
                            'value' => array( $priceFrom, $priceTo ),
                            'type' => 'numeric',
                            'compare' => 'BETWEEN'
                                    )
            )
    );

    $searched_posts = new WP_Query( $args );

    return $searched_posts;
}

$searched_posts = get_reviews_by_custom_search();       

     get_header(); ?>

        <div id="content-top">
            <div id="menu-bg"></div>
            <div id="top-index-overlay"></div>

            <div id="content" class="clearfix">
                <div id="main-area">
                    <?php get_template_part('includes/breadcrumbs'); 

                        foreach ($searched_posts as $searched_post) {

                            echo "<h1 class=\"entry-title\"><a href=\"" . get_permalink($searched_post->ID) . "\">" . $searched_post->post_title . "</a></h1>";

                            echo "Rating - " . get_post_meta($searched_post->ID,'rating',true) . "<br>";
                            echo "Audience - " . get_post_meta($searched_post->ID,'audience',true) . "<br>";
                            echo "Length - " . get_post_meta($searched_post->ID,'length',true) . "<br>";    

                            echo "<a href=\"" . get_permalink($searched_post->ID) . "\">Read More</a>";

                        }
                    ?>

                </div> <!-- end #main-area -->

                <?php get_sidebar(); ?>

    <?php get_footer(); ?> 
```

我在网上找到了大部分代码，我还在学习PHP。

第一部分是应该返回搜索帖子数组的函数。但是，代码的某些部分是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:27:29.253

这里有几个选项：

1，有一个不错的[Wordpress 插件](http://wordpress.org/extend/plugins/wp-custom-fields-search/)，你可以看看

2，您可以捕获搜索词，然后在您的`WP_QUERY`：

```
$s = $_POST['search_field'];
$my_query = new WP_Query('meta_value='.$s); 
```

# c# - 比较两个图像并使用 emgu cv 库提取差异

> ID：13651734
> 
> 赞同：3
> 
> 时间：2012-11-30T19:21:41.783
> 
> 标签：c#, image-comparison

我想比较两个图像，如 image1.png 和 image2.png.both 图像看起来非常相似，但有一些不同。所以我想得到差异并想在第一个图像 image1.png 上应用差异。我搜索了很多以获取该库的类似代码，但没有找到。

经过大量搜索后，我得到了一些类似的东西，我在 java 代码中寻找。这是网址[http://mindmeat.blogspot.in/2008/07/java-image-comparison.html](http://mindmeat.blogspot.in/2008/07/java-image-comparison.html)

请转到网址，在那里您可以看到代码生成的第三张图片有所不同，但我的要求有点不同。我不想生成第三张图像，而是想在第一张图像 image1.png 上应用差异。有人告诉我，使用 emgu cv 库可以很容易地完成。所以我根据 emgu cv 库搜索类似的代码，但没有找到。任何人都可以使用 emgu cv 库指导我使用示例代码，这对我有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-14T12:47:17.210

我认为你需要的是：

图像 1 = 图像 2 - 图像 1；

由于运算符重载，这可以直接在 Emgu CV 中实现

# c# - 将预计算与延迟加载混合

> ID：13651737
> 
> 赞同：2
> 
> 时间：2012-11-30T19:21:55.053
> 
> 标签：c#, lazy-loading, priority-queue, preload

我有一个包含一堆部分的应用程序，每个部分都包含需要大量时间来计算的数据。我可以看到一些方法：

1.  简单的解决方案1：计算应用程序启动时所有部分的数据。这意味着应用程序启动会很慢。

2.  简单的解决方案 2：在用户加载时计算每个部分中的数据。这意味着加载每个部分会很慢（这很糟糕，因为每个部分都必须进行大量的渲染计算，所以它们已经有点慢了。

3.  由于性能对于此应用程序至关重要，因此这些解决方案都不是理想的。所以这给我带来了一个不太简单的解决方案：在应用程序启动时，开始在后台线程上计算部分数据。这个解决方案的问题是我没有很好的方法来预测用户将首先加载哪个部分。因此，如果他们加载最后一部分以加载到后台线程上，他们最终会等待比我刚刚使用解决方案 2 时更长的时间。

4.  所以这给我带来了解决方案：在应用程序启动时，开始在后台线程上计算部分数据，但是当用户加载部分时，暂停后台线程并开始计算用户请求的部分。*除非*计算已经开始，在这种情况下你让它完成。

我不确定如何实现解决方案 4。我认为最简单的解决方案可能是使用优先级队列并在加载任务时提高其优先级，但我不确定如何在 C# 中实现这一点。这是一个合理的方法吗？C# 中的优先级队列有哪些好的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:36:12.973

作为解决方案 4 的修改，您可以开始在后台加载每个部分。当用户选择一个部分时，检查它当前是否正在由主线程队列加载，如果没有，则分拆一个新线程并以更高的优先级加载该部分。当然，您会希望从主任务队列中删除此选择。

这是从 MSDN 设置优先级的[示例](http://msdn.microsoft.com/en-us/library/system.threading.thread.priority%28v=vs.110%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:10:48.410

因此，我们将从对象的数组（或其他一些数据结构，如果需要）开始`Task<Section>`。

```
private Task<Section>[] sections = new Task<Section>[5]; 
```

您应该确保在应用程序的最开始（而不是在后台）创建集合并实际定义任务。

```
for (int i = 0; i < sections.Length; i++)
{
    int sectionNumber = i; //copy for closure
    Task<Section> next = new Task<Section>(() => CreateSection(sectionNumber));
    //note the task isn't started.
    sections[i] = next;
} 
```

然后你可以启动后台任务来实际处理一个任务：

```
Task.Run(() =>
{
    for (int i = 0; i < sections.Length; i++)
    {
        EnsureStarted(sections[i]);
        sections[i].Wait();
    }
}); 
```

`Parallel.For`如果您想让多个线程处理项目，您可以使用。

该方法使用此辅助方法：

```
public void EnsureStarted(Task task)
{
    if (task.Status == TaskStatus.Created)
    {
        task.Start();
    }
} 
```

然后真正得到一个完成的部分（如果需要，开始它）：

```
public Section GetFinishedSection(int sectionNumber)
{
    EnsureStarted(sections[sectionNumber]);
    return sections[sectionNumber].Result;
} 
```

如果您需要它的非阻塞版本（可能是`await`它），您可以使用它：

```
public Task<Section> EnsureSectionComplete(int sectionNumber)
{
    EnsureStarted(sections[sectionNumber]);
    return sections[sectionNumber];
} 
```

# asp.net-mvc - 通过在 mvc 3 中扩展 html 助手来创建一个复选框 ist 控件？

> ID：13651738
> 
> 赞同：1
> 
> 时间：2012-11-30T19:21:55.873
> 
> 标签：asp.net-mvc, dynamic, controls, html-helper

我正在尝试使用扩展的 html 助手创建动态复选框列表控件？单选按钮列表将由项目列表填充？不知道如何使任何列表项更灵活。

```
public static string CheckBoxList(this HtmlHelper helper, string name, <Some List> items)
        {
            var output = new StringBuilder();
            output.Append(@"<div class=""checkboxList"">");

            foreach (var item in items)
            {
                output.Append(@"<input type=""checkbox"" name=""");
                output.Append(name);
                output.Append("\" value=\"");
                output.Append(item.Value);
                output.Append("\"");

                output.Append(" />");
                output.Append(item.Value);
                output.Append("<br />");
            }

            output.Append("</div>");

            return output.ToString();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:33:04.997

如何将值属性名称作为参数传递，然后通过反射获取该属性？

```
var itemValue = item.GetType( ).GetProperty( propName ).GetValue( item, null ); 
```

所以你的方法签名是这样的：

```
public static string CheckBoxList(this HtmlHelper helper, string name, List<object> items, string propName) 
```

# c++ - C++，带矢量 我可以 push_back({someNum1,someNum2}) 吗？

> ID：13651740
> 
> 赞同：5
> 
> 时间：2012-11-30T19:22:14.397
> 
> 标签：c++, vector, push-back

我有向量：

```
vector<int[2]> storeInventory; //storeInventory[INDEX#]{ITEMNUM, QUANTITY} 
```

我想使用该`push_back()`方法将新数组添加到库存向量中。与此类似的东西：

```
const int ORANGE = 100001;
const int GRAPE = 100002

storeInventory.push_back({GRAPE,24});
storeInventory.push_back{ORANGE, 30}; 
```

但是，当我尝试使用上面的语法时，我得到了错误`Error: excpeted an expression`。我正在尝试的事情是不可能的，还是我只是以错误的方式去做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T19:32:08.243

内置数组不是*Assignable*或*CopyConstructible*。这违反了容器元素要求（至少对于 C++03 和更早版本）。换句话说，你不能拥有`std::vector`of`int[2]`元素。您必须包装您的数组类型以满足上述要求。

正如已经建议的那样，它`std::array`是 C++11 中包装器类型的完美候选者。或者你可以做

```
struct Int2 {
  int a[2];
}; 
```

并使用`std::vector<Int2>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T19:30:48.093

我不相信有可能传递这样的数组。考虑`std::array`改用：

```
vector<std::array<int, 2> > storeInventory; 
storeInventory.push_back({{GRAPE,24}}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T21:07:51.203

如果它只是 int[2] 的向量，您可以使用：

```
std::vector<std::pair<int, int>> vec 
```

添加元素：

```
int a, b;
vec.push_back(std::make_pair(a, b)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T19:25:19.250

```
storeInventory.push_back({GRAPE, 24});
storeInventory.push_back({ORANGE, 30}); 
```

你可以试试这个。我想你忘记了括号。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-30T19:32:53.080

C 样式的数组不可复制，因此不能用作 a 中的元素类型`std::vector`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-22T19:17:59.787

只需使用`std::vector<int *>`:)

# php - 如何使用 codeigniter 加入表单的字段？

> ID：13651741
> 
> 赞同：1
> 
> 时间：2012-11-30T19:22:21.437
> 
> 标签：php, html, codeigniter

我有这段代码

```
<input type="text" id="name1" name="name1">
<input type="text" id="name2" name="name2">
<input type="text" id="name3" name="name3"> 
```

我想将它们连接到一个变量中（类似于 $variable = name1.name2.name3），所以我可以在一个数组中（在控制器中）设置该值，如下所示：

```
$form_data = array(

    'Name' => set_value($variable),
    'Sexo' => $this->input->post('optionsRadios')   
    ); 
```

我不知道上面的代码是否可行，但这就是我想做的事情的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:24:14.417

为什么不这样呢？

```
$variable = $this->input->post('name1')
          . $this->input->post('name2')
          . $this->input->post('name3'); 
```

# html - 将微数据实现到非 HTML5 页面

> ID：13651749
> 
> 赞同：3
> 
> 时间：2012-11-30T19:22:52.200
> 
> 标签：html, microdata

我想在我的网页上实现微数据结构（使用 Schema.org）。我的网页尚未使用 HTML5。

如何实现`itemscope`和`itemtype`标签？当我添加这些时，我得到了错误：

> `itemscope`不是元素的有效属性`dive`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:56:56.600

包含 itemscope 和 itemtype 属性的微数据是 HTML5 工作的一部分，因此没有可用于将微数据与早期文档类型一起使用的标准文档类型。你有几个选择，但没有一个特别好吃。

1.  将您的页面更改为 HTML5。这可能是最好的前进方式。

2.  忽略验证错误。验证器只是帮助您的工具。微数据的消费者不太可能关心您使用的文档类型。

3.  您可以将 RDFa 与您的 schema.org 词汇表一起使用，而不是使用微数据。HTML4.01 和 RDFa 有一个文档类型，`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01+RDFa 1.1//EN" "http://www.w3.org/MarkUp/DTD/html401-rdfa11-1.dtd">`W3C HTML 验证器可以识别这一点。

4.  为 HTML4.01 + 微数据编写您自己的文档类型定义，并据此验证您的页面。或者谷歌看看其他人是否已经写过非官方的。

# internet-explorer-9 - 无法在 IE9 中强制使用 IE8 文档模式

> ID：13651755
> 
> 赞同：1
> 
> 时间：2012-11-30T19:23:07.957
> 
> 标签：internet-explorer-9

谁能告诉我为什么以下内容无法在 IE9 中触发 IE8 文档模式？开发人员工具栏显示 IE9。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<title>My Title</title>
</head>
<body>
Nothing to see here.    
</body>
</html> 
```

我收到此错误：

X-UA 兼容 META 标记 ('IE=8') 被忽略，因为文档模式已经完成。

# c# - 如何使用 BinaryReader Read 方法读取动态数据？

> ID：13651757
> 
> 赞同：3
> 
> 时间：2012-11-30T19:23:10.203
> 
> 标签：c#, generics, dynamic, binaryreader

我正在尝试以通用方式使用 BinaryReader Read 方法。只有在运行时我才知道正在读取的数据类型。

```
 public static T ReadData<T>(string fileName)
        {
            var value = default(T);

            using (var fs = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read))
            {
                using (var reader = new BinaryReader(fs))
                {
                    if (typeof (T).GetGenericTypeDefinition() == typeof (Int32))
                    {
                        value = (dynamic) reader.ReadInt32();
                    }
                    if (typeof (T).GetGenericTypeDefinition() == typeof (string))
                    {
                        value = (dynamic) reader.ReadString();
                    }
                    // More if statements here for other type of data
                }
            }
            return value ;
        } 
```

如何避免多个 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:36:34.223

除了使用反射（这会很慢）之外，我能想到的你可能更喜欢的唯一选择是构建一个字典：

```
static object s_lock = new object();
static IDictionary<Type, Func<BinaryReader, dynamic>> s_readers = null;
static T ReadData<T>(string fileName)
{
    lock (s_lock)
    {
        if (s_readers == null)
        {
            s_readers = new Dictionary<Type, Func<BinaryReader, dynamic>>();
            s_readers.Add(typeof(int), r => r.ReadInt32());
            s_readers.Add(typeof(string), r => r.ReadString());
            // Add more here
        }
    }

    if (!s_readers.ContainsKey(typeof(T))) throw new ArgumentException("Invalid type");

    using (var fs = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read))
    using (var reader = new BinaryReader(fs))
    {
        return s_readers[typeof(T)](reader);
    }
} 
```

您调用它的代码会更简洁，但您仍然不得不将每个 Read 函数映射到一个类型。

# jquery - jquery验证插件不在rails中显示错误消息

> ID：13651759
> 
> 赞同：1
> 
> 时间：2012-11-30T19:23:18.830
> 
> 标签：jquery, ruby-on-rails-3, jquery-plugins, jquery-validate

我正在尝试在 rails 中使用 Jquery 客户端验证。

我的以下代码工作正常 [http://jsfiddle.net/hr1383/5CFRB/1/](http://jsfiddle.net/hr1383/5CFRB/1/)

“正确显示错误信息”

现在我正在尝试做同样的事情。由于我不确定将相应的 JS 和 CSS 放在哪里，所以我决定放入 application.html.erb 文件开始。

```
<html>
  <head>
    <title>Umvox</title>
      <%= stylesheet_link_tag    "application" %>
      <%= javascript_include_tag "application" %>
      <%= javascript_include_tag "jquery.validate" %>
      <%= javascript_include_tag "jquery.validate.min" %>
      <%= javascript_include_tag "jquery-1.7.2" %>
      <%=  javascript_include_tag  "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"%>
       <%=  javascript_include_tag  "http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"%>
     <%= javascript_include_tag :defaults %>
     <%= csrf_meta_tags %>

      <script type="text/javascript">
         $(document).ready(function() {
       $("#company_form").validate({
            rules: {
                "company": {required:true}
             },
             messages:{
                company: "Enter Company name"
              }
           });
         });​
       </script>
      <style type="text/css">
        #company_form {background-color: aqua}
        #company_form label { width: 250px; }
        #company_form label.error, #company_form input.submit { margin-left: 253px; }
    </style>
 </head>
 <body>
   <%= render "shared/dashboard_button_login" %>
   <%= yield %>
 </body>
</html> 
```

而我的 _form.html.erb 部分包含

```
<%= form_tag("/locations/search" , :remote=> true, :id=>"company_form",        :name=>"company_form", :form_to_validate=>'location') do  %>
<table>
   <tr>
   <th>Company</th>
   <th>City</th>
   <th>Country</th>
   <th>ZipCode</th>
  </tr>
  <tr>
     <td><%= text_field_tag :company %></td>
     <td><%= text_field_tag :city %></td>
     <td><%= text_field_tag :country %></td>
     <td><%= text_field_tag :zipcode %></td>
      <td><%= submit_tag 'search'%></td>
  </tr>
</table> 
```

以下表单转换为 html，如中所示

[http://jsfiddle.net/hr1383/5CFRB/1/](http://jsfiddle.net/hr1383/5CFRB/1/)

这似乎不起作用，并且总是在不显示错误消息的情况下进行服务器调用。

为什么会这样？由于表单不属于某个模型对象所以我不知道在这里放置js？

更新：我将 application.html.erb 更改为只包含两个所需的文件：

```
<html>
  <head>
    <title>Umvox</title>
      <%= stylesheet_link_tag    "application" %>
      <%= javascript_include_tag "application" %>
      <%= javascript_include_tag "jquery.validate" %>
      <%= javascript_include_tag "jquery-1.7.2" %>
       <%= csrf_meta_tags %>

      <script type="text/javascript">
         $(document).ready(function() {
       $("#company_form").validate({
            rules: {
                "company": {required:true}
             },
             messages:{
                company: "Enter Company name"
              }
           });
         });​
       </script>
      <style type="text/css">
        #company_form {background-color: aqua}
        #company_form label { width: 250px; }
        #company_form label.error, #company_form input.submit { margin-left: 253px; }
    </style>
 </head>
 <body>
   <%= render "shared/dashboard_button_login" %>
   <%= yield %>
 </body>
</html> 
```

谢谢哈屎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:27:45.403

Ehrm，我不是 ruby​​ 方面的专家，但似乎您同时包括：jquery.validate 和 jquery.validate.min，以及两个不同版本的 jquery。那不是很好。但只是出于好奇，你为什么不在 jquery 之后弹出你的 jquery validate 呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:03:47.027

我同意 povilasp，您不必同时包含 jquery.validate 和 jquery.validate.min 文件。它们之间的唯一区别是前者是调试版本，而后者是压缩版本。

**此外**，如果您的 rails 版本比较新，则不必显式包含 jquery，因为 jquery 始终是 rails 使用的 js 库。（对不起，我不记得确切的版本）

# winrt-xaml - WinRT XAML 自定义转换

> ID：13651769
> 
> 赞同：9
> 
> 时间：2012-11-30T19:24:22.060
> 
> 标签：winrt-xaml

是否可以在 WinRT 中实现自定义转换？例如，控制可见性的转换会很好。因此，当您显示/隐藏拆分视图的一部分时，它会使用滑动效果为整个视图设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T10:55:00.780

据我所知，您无法构建自定义转换并像普通 WinRT 转换一样使用它们，即在 TransitionCollection 中。

```
<ListView.Transitions>
    <TransitionCollection>
        <myTransitions:PotatoeTransition/>
    </TransitionCollection>
</ListView.Transitions> 
```

据我所知，您不能执行上述操作。（忽略我以 ListView 为例的事实，我认为它适用于所有事物）

您可能必须使用为 RenderTransform (TranslateTransform) 和 Opacity 设置动画的 Storyboard 来实现您的目标。
我认为如果你想让它更可重用，你仍然可以创建一个行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:56:29.233

是的，您可以使用通常的 WPF 动画技术，只需对 WinRT 进行少量更改。

通常的模式是通过故事板将双色/颜色/缓动动画应用于您的 UI 元素 - 由视觉状态管理器中的更改触发。您可以以声明方式或通过代码隐藏来执行此操作。

[http://www.codeproject.com/Articles/23257/Beginner-s-WPF-Animation-Tutorial](http://www.codeproject.com/Articles/23257/Beginner-s-WPF-Animation-Tutorial)

[http://blogs.msdn.com/b/wpfsdk/archive/2009/02/27/the-visualstatemanager-and-triggers.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2009/02/27/the-visualstatemanager-and-triggers.aspx)

# java - C++ 到 java 数组的转换

> ID：13651771
> 
> 赞同：0
> 
> 时间：2012-11-30T19:24:29.613
> 
> 标签：java, c++, arrays, java-native-interface

如何将 c++ 中的 short* 转换为 java 中的 jshortArray？

我正在网上寻找一些文档，但并不容易找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:59:02.657

```
jshortArray convertShortArrayToJNI(JNIEnv* env, short* arr, size_t count) {
  jshortArray retval = env->NewShortArray(count);
  env->SetShortArrayRegion(retval,0,count,arr);
  return retval;
} 
```

您不需要释放`retval`. 它是一个“本地引用”，这意味着只要您通过 JNI 从最近的调用返回，它就会被 JVM 释放。除非您从本机线程调用它，当然...

# android - IP更改时端口会发生什么？

> ID：13651772
> 
> 赞同：0
> 
> 时间：2012-11-30T19:24:41.483
> 
> 标签：android, sockets, networking, tftp

我在端口 8080 上运行了小型 TFTP 服务器。它是一个 Android 应用程序。当我在以太网上尝试连接它时，它可以无缝运行。但是，当我从以太网切换到 Wifi 时。我收到“连接拒绝”错误。或者有时它会显示第一页，然后当我尝试导航时，它会因同样的错误而崩溃。那么，如果IP发生变化，我需要做什么？我需要重新启动 TFTP 服务器吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:45:18.740

由于某些无线电干扰或硬件问题，这看起来像是 wifi 网络错误。连接被拒绝错误可能是在（部分）尝试建立通信通道失败后触发的某些超时的影响。这就是为什么您有时可以看到所请求文档的一部分。

我几乎可以肯定您正在使用无线路由器来允许两个设备相互通信。您是否尝试过不同的路由器和/或完全不同的地方（例如朋友家）？

# python - python string '" ' : 字符串内的单双引号

> ID：13651779
> 
> 赞同：6
> 
> 时间：2012-11-30T19:25:32.123
> 
> 标签：python, command-line

双引号看起来像这样 "。如果我把它放在 python 字符串中，我得到这个`' " '`。在 python 中，我可以在一个字符串中放两个双引号，`' "" '`这会打印为两个双引号。但是，我不能放一个双引号在一个字符串中，和以前一样，`' " '`我在 Eclipse 中使用 pydev 执行此操作，它给出了一个`error: "encountered "\r" (13), after : ""`。我正在尝试使用命令管道和文件名执行以下操作：

```
logA = 'thing.txt'
cmdpipe = os.popen('copy "C:\upe\' + logA + '"' + ' "C:\upe\log.txt"') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:26:50.830

您需要转义反斜杠：

```
logA = 'thing.txt'
cmdpipe = os.popen('copy "C:\\upe\\' + logA + '"' + ' "C:\\upe\\log.txt"') 
```

`r'...'`通常，当字符串文字中有反斜杠时，会使用原始字符串 ( )。但是，正如@BrenBarn 所指出的，这在这种情况下不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:30:01.537

你需要避开反斜杠，否则它会做奇怪的事情。

```
logA = 'thing.txt'
cmdpipe = os.popen(
    'copy "C:\\upe\\' + logA + '"' + ' "C:\\upe\\log.txt"') 
```

编辑：一个更pythonic的方式是这样的：

```
logA = 'thing.txt'
cmdpipe = os.popen('copy "C:\\upe\\{}" "C:\\upe\\log.txt"'.format(logA)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:36:12.430

后面的反斜杠`upe`转义第一个单引号关闭：

```
'copy "C:\upe\' + logA + '"' + ' "C:\upe\log.txt"'
--------------^ add an escape at least here, and it will work! 
```

另一种选择是在更多步骤中编写命令：

```
basepath = r'C:\upe'
inpath = os.path.join(basepath, logA)
outpath = os.path.join(basepath, 'log.txt')
logA = 'thing.txt'
command = 'copy "%s" "%s"' % (inpath, outpath)

print command

cmdpipe = os.popen(command) 
```

# sql - 仅当 COUNT(*) > 0 时求和数据

> ID：13651783
> 
> 赞同：0
> 
> 时间：2012-11-30T19:25:47.663
> 
> 标签：sql, sql-server

这是我到目前为止...

```
SELECT pr.[name], SUM(COALESCE(qm.iscompleted,0)) count_yes,
  SUM(COALESCE(qm.iscompleted,1)) count_no,
   COUNT(p.id) AS tot
FROM   (aco.practices pr
      left JOIN aco.patients_practices ppr ON (ppr.practiceid = pr.id)
      left JOIN aco.patients p ON (p.id = ppr.patientid)
      LEFT JOIN aco.qmheader qm ON (qm.patientid = p.id AND qm.practiceid = pr.id)
)
WHERE  (pr.parentaco = 30982)
GROUP BY pr.[name]
ORDER BY pr.[name] 
```

以下是一些结果

```
姓名 count_yes count_no tot
姓名1 0 1 0
名称2 0 1 0
姓名3 0 273 273
姓名4 0 114 114

```

在大多数情况下它是正确的，我唯一需要的是如果 tot 为 0，则不要在 count_no 上求和。

有没有办法轻松做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:29:51.703

`select`将您的条款更改为：

```
SELECT pr.[name], 
       SUM(COALESCE(qm.iscompleted,0)) AS count_yes,
       (case when COUNT(p.id) > 0 then 
             SUM(COALESCE(qm.iscompleted,1))
        else
             0 end) AS count_no,
       COUNT(p.id) AS tot 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:28:47.437

使用`HAVING`子句：

```
SELECT pr.[name], SUM(COALESCE(qm.iscompleted,0)) count_yes,
  SUM(COALESCE(qm.iscompleted,1)) count_no,
   COUNT(p.id) AS tot
FROM   (aco.practices pr
      left JOIN aco.patients_practices ppr ON (ppr.practiceid = pr.id)
      left JOIN aco.patients p ON (p.id = ppr.patientid)
      LEFT JOIN aco.qmheader qm ON (qm.patientid = p.id AND qm.practiceid = pr.id)
)
WHERE  (pr.parentaco = 30982)
GROUP BY pr.[name]
HAVING COUNT(p.id) = 0
ORDER BY pr.[name] 
```

# android - 号码选择器问题

> ID：13651787
> 
> 赞同：1
> 
> 时间：2012-11-30T19:26:31.730
> 
> 标签：android, android-layout

我正在使用数字选择器从用户那里获取信息，但是当我在 XML 中调用数字选择器时，我只能看到 EditText，并且按钮没有出现。

```
<NumberPicker android:id="@+id/reais_picker"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_marginTop="50dp"
    android:layout_marginLeft="40dp"
    android:layout_toRightOf="@id/type_spinner" 
    android:layout_below="@id/valor_text" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:33:48.643

尝试设置最大值和最小值，看看是否有区别。

```
setMaxValue (int maxValue)
setMinValue (int minValue) 
```

编辑：我还建议在真实设备上进行测试。

# .htaccess - 使用 htaccess 更改 URL 但留在同一页面上

> ID：13651790
> 
> 赞同：1
> 
> 时间：2012-11-30T19:26:42.777
> 
> 标签：.htaccess, url, mod-rewrite

我有一个网址：

www.example.com/property-listings/united-states/colorado/denver/denver-co-office-space

我想留在上面的同一页面上，但只需在地址栏中显示 URL，如下所示：

www.example.com/property-listings/united-states/colorado/denver/office-space

如何使用 htaccess 和重写规则完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:56:47.870

如果我理解正确，请尝试编写如下规则：

```
RewriteEngine on
RewriteRule property-listings/united-states/colorado/denver/office-space  http://www.example.com/property-listings/united-states/colorado/denver/denver-co-office-space [L] 
```

好的。您没有提供模式或提到有任何模式，所以我不得不猜测模式取决于 /denver/ 子目录。尝试这个：

```
RewriteEngine on
RewriteRule ^(property-listings/united-states/colorado/denver/)(office-space)/?$  $1denver-co-$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:06:28.200

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(property-listings/united-states/colorado)/(denver)/(office-space)/?$ $1/$2/$2-co-$3 [L,NC] 
```

# c# - 我想读取 XML 文件的单个元素并将其输出到 aspx 控件

> ID：13651791
> 
> 赞同：2
> 
> 时间：2012-11-30T19:26:45.943
> 
> 标签：c#, asp.net, xml

我的 XML 如下所示：

```
<product id="1">
    <name>A thing</name>
    <description>This is what it's like</description>
</product> 
```

我一直在寻找一个可能看起来像这样的例子：

```
string productID = 1;
XDocument productsXML = XDocument.Load("Products.xml");
for item in productsXML {
    if (item.ID == productID) {
        productNameLabel.Text = item.name;
    }
} 
```

想法是，我将能够将单个 xml 子元素输出到 .aspx 页面。

```
A thing 
```

那有意义吗？我已经找了几个小时的例子，我开始认为我需要更多的脚手架，但是由于所有的例子都如此不同，我不确定要遵循哪一个！

那么，如何获取单个 XML 子元素的内容，并将其输出到 .aspx？拿着这个：

```
<product id="1">
    <name>A thing</name>
    <description>This is what it's like</description
</product> 
```

并输出：

```
A thing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:31:31.257

您可以使用 XPath (in `System.Xml.XPath`)

```
string value = productsXML.XPathSelectElement("//product[@id='1']/name").Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:55:37.820

在这种情况下，我同意 LB 的回答，因为它相当简单。如果您喜欢 Linq（我注意到您使用的是 XDocument，它是一个 Linq to XML 对象），这里有一个替代解决方案：

```
XDocument productsXML = XDocument.Load("Products.xml");
        string item = productsXML.Elements("product")
                                 .Where(p => p.Attribute("id").Value == productID)
                                 .First()
                                 .Element("name").Value; 
```

`productsXML.Elements("product")`这将获取文档中的所有产品节点。这只会获取与您的 productiD 匹配
`.Where(p => p.Attribute("id").Value == productID)`的产品节点。由于该函数返回一个节点集合，因此它会抓取第一个节点。这会在产品节点中找到一个被调用的元素并返回它的值。`id`
`.First()``.Where`
`.Element("name").Value;``name`

对于这样一个简单的模式，XPath 似乎不那么冗长，但如果您一开始不了解 XPath，则有点难以理解。Linq 的代码行数更多（在本例中），但如果您不了解 XPath，它的可读性会更高。

# php - 调整图像输出文件名问题

> ID：13651794
> 
> 赞同：0
> 
> 时间：2012-11-30T19:26:59.887
> 
> 标签：php, gd

我在使用下面的代码时遇到问题，由于某种原因，我收到以下错误：

```
**Warning: imagejpeg() expects parameter 1 to be resource** 
```

使用以下代码：

```
$image = "image1.png";
$output = "filename.jpg";

// Call function
$img = resize_image($image, $output);

function resize_image($file, $output) {
  imagejpeg($img, $output, 60);
} 
```

我基本上是在尝试将输出文件名 ( `$output = "filename.jpg";`) 传递给`imagejpeg()`函数，但出现上述错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:36:25.893

看起来您的输入参数是问题所在。尝试这个：

```
$image = "image1.png";
$output = "filename.jpg";

// Call function
$img = resize_image($image, $output);

function resize_image($file, $output) {
  imagejpeg(imagecreatefromjpeg($img), $output, 60);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:31:11.910

它在文档中说您需要将参数传递给资源类型的函数。也就是说，需要使用图片创建函数来创建图片资源对象，比如imagecreatetruecolor()：

> image - 由图像创建函数之一返回的图像资源，例如 imagecreatetruecolor()。

[http://php.net/manual/en/function.imagejpeg.php](http://php.net/manual/en/function.imagejpeg.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:32:05.983

非常简单，问题不在于 $output 而在于输入变量。我转换图像并调整`$dst`结果大小。

```
imagejpeg($dst, "$output", 60); 
```

# c# - PLINQ订单如何输入

> ID：13651796
> 
> 赞同：0
> 
> 时间：2012-11-30T19:27:09.143
> 
> 标签：c#, multithreading, plinq

如果我在 IEnumerable (list) 中有以下顺序：

1 - 2 - 3 - 4 - 5

如果我对此运行 PLINQ 查询：

```
list.AsParallel().AsOrdered().WithDegreeOfParallelism(10).Select(
                s => SomeDelegateFunction(s)).AsSequential().ToList(); 
```

对于上面的查询，我在我的日志记录（内部委托函数）中看到它使用多个线程，但不维护列表的处理顺序。但是对于以下查询，我确实维护了序列，但使用单个线程来执行整个操作：

```
list.AsParallel().AsOrdered().WithDegreeOfParallelism(10).AsSequential().Select(
               s => SomeDelegateFunction(s)).ToList(); 
```

这两个查询之间的区别是第二个查询中的“AsSequential()”，我遇到的问题是当我使用 AsSequential() 时：

1 - 为什么它不使用多线程？它本可以将工作分解为：

```
1 - 2 (Give it to thread 1)
3 - 4 - 5 (Give it to thread 2) 
```

相反，它确实执行 1 - 2 - 3 - 4 - 5 （按此顺序），但它在单个线程上执行 - 为什么？

基本上，我需要在作为输入但在多个线程上输入的 ORDER 中处理我的列表。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:29:19.850

> 基本上，我需要在作为输入但在多个线程上输入的 ORDER 中处理我的列表。

这些是相互排斥的要求。你可以做一个或另一个，但永远不要两者兼而有之。

如果您不关心项目的处理顺序，您只想确保最终结果是对象按照它们最初进入的顺序，因为您可以执行以下操作：

```
var list = new List<int> { 1, 2, 3, 4, 5 };

Parallel.For(0, list.Count, i =>
{
    list[i] = Process(i);
}); 
```

如果您更喜欢 PLINQ，`Parallel.For`则可以执行以下操作：

```
Enumerable.Range(0, list.Count)
    .AsParallel()
    .WithDegreeOfParallelism(10)
    .ForAll(i =>
    {
        list[i] = Process(i);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:42:09.150

回答你的第一个问题

> 为什么它不使用多线程？

是做什么`AsSequential()`与做什么完全相反`AsParallel()`。 对序数可枚举`AsParallel()`进行了处理，以允许在多个线程中并行执行。用于将并行执行的结果合并为一个可枚举返回到调用者线程。`ParallelQuery<T>``IEnumerable<T>``AsSequential()`

回答你的第二个问题

> 它本可以将工作分解为：

```
1 - 2 (Give it to thread 1)
3 - 4 - 5 (Give it to thread 2) 
```

是的，它可以，但如果并行执行这个序列，3 可能会比 1 更早处理，它不会是顺序执行。

不过，您可以明确控制如何`PLINQ`将序列分解为多个分区。因此，您可以控制自己的数据如何在多个线程之间分布，请参阅[PLINQ 的自定义分区器](http://msdn.microsoft.com/en-us/library/dd997411.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:46:59.800

多线程生产者-消费者模式将允许您确保以相同的顺序处理项目，同时允许同时处理项目。但是，如果您需要确保每个项目的处理在下一个项目的处理开始之前完成，那么您就不走运了，正如 Servy 所说。

在生产者-消费者模式中，为了维护顺序，您可以使用线程安全队列。一个或多个生产者线程将要处理的项目排入队列；在这种情况下，您将有一个生产者将列表中的项目按顺序传递到队列。然后，多个消费者线程可以使项目出列，这将是有序的。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Producer-consumer_problem](http://en.wikipedia.org/wiki/Producer-consumer_problem)。

# java - 网络钓鱼扫描程序帮助

> ID：13651797
> 
> 赞同：0
> 
> 时间：2012-11-30T19:27:11.190
> 
> 标签：java, arrays, methods, phishing

我在我的 java 类中有一个任务是制作一个非常简单的网络钓鱼扫描器。程序需要读取一个文本文件，然后为列出的单词分配一个分值，然后打印出词频和分值的摘要。

最终结果看起来像这样。计数值将根据单词的频率而变化。

![结果](../Images/328114a1f46ed7228fe453d480a0aa6f.png)

我的问题是，在制作测试字符串来检查值和频率时，它工作正常。当我从文本文件中读取并将其转换为数组列表然后再转换为数组时，它不能按应有的方式工作。testWords 数组具有所有正确的值，但是当我尝试对照 phishingWords 数组检查它时，它没有注册任何单词。我不完全确定出了什么问题，因为它看起来应该可以正常工作。如果我能得到 wordTest 方法中出现问题的解释或解决方案，将不胜感激。

这是我的代码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.HashMap;

public class PhishingScanner
{       
private static final int phishingWordsCount[] = new int [30];

private static final String[] phishingWords = {
    "amazon", "official", "bank", "security", "urgent", "alert",
    "important", "information", "ebay", "password", "credit", "verify",
    "confirm", "account", "bill", "immediately", "address", "telephone",
    "ssn", "charity", "check", "secure", "personal", "confidential",
    "atm", "warning", "fraud", "citibank", "irs", "paypal" };

private static final int phishingPoints[] = { 2, 2, 1, 1, 1, 1, 1, 2,
 3, 3, 3, 1, 1, 1, 1, 1, 2, 2, 3, 2, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1 };

//String used for testing the wordTest()
//private static String[] testWords = {"thanks", "amazon", "paypal", "bank", "amazon"};

public static void main(String[] args)
{
    readFile();

    //used for testing the wordTest() not used in final application
    //wordTest(testWords);
}

public static void wordTest(String[] testWords)
{        
    int total = 0;

    for(int j = 0; j < testWords.length; j++)
    {        
        for(int i = 0; i < phishingWords.length; i++)
        {
            if(testWords[j] == phishingWords[i])
            {  
                ++phishingWordsCount[i];

                total += phishingPoints[i];
            }                               
        }
    }

    System.out.printf("%-15s%-10s%s\n","Word", "Count", "Points\n");

    for (int k = 0; k < phishingWords.length; k++)
    {
        System.out.printf("%-15s%-10s%s\n", phishingWords[k] , phishingWordsCount[k], phishingPoints[k]);
    }

    System.out.println("Total points: " + total);
}

private static void readFile() 
{
    ArrayList<String> textFileWords = new ArrayList<String>();

    try
    {
        BufferedReader br = new BufferedReader(new FileReader("c:\\test.txt"));
        String str = "";
        String st;
        while ((st = br.readLine()) != null) 
        {
            str += st + " ";
        }
        HashMap<String, Integer> map = new HashMap<String, Integer>();

        str = str.toLowerCase();
        //^^ reads and converts the entire file into a single lowercase string
        int count = -1;
            for (int i = 0; i < str.length(); i++) 
            {
                if ((!Character.isLetter(str.charAt(i))) || (i + 1 == str.length())) 
                {
                    if (i - count > 1) 
                    {
                        if (Character.isLetter(str.charAt(i))) 
                        {
                            i++;
                        }
                        String word = str.substring(count + 1, i);

                        if (map.containsKey(word)) 
                        {
                            map.put(word, map.get(word) + 1);
                        } 
                        else 
                        {
                            map.put(word, 1); 
                        }                                                        
                        textFileWords.add(word);

                        //^^ Reads each word and puts it into the textFileWords Array List
                    }
                    count = i;
                }
            }                
    }       
    catch (Exception e)
    {
        System.out.println(e);
    }       

    String[] testWords = new String[textFileWords.size()];
    testWords = textFileWords.toArray(testWords);

    wordTest(testWords);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:30:58.790

这行代码可能没有做你认为它正在做的事情。除非字符串被实习，否则`==`用于比较与使用不同`.equals()`

```
 if(testWords[j] == phishingWords[i]) 
```

尝试改用这个：

```
 if(testWords[j].equals(phishingWords[i])) 
```

[在此处](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)阅读有关字符串拘留的信息

# xslt - 使用 XSL 构建 HTML 表

> ID：13651805
> 
> 赞同：2
> 
> 时间：2012-11-30T19:27:51.713
> 
> 标签：xslt

我是 XSL 的新手，试图为我做一些有点复杂的事情，并寻求帮助。

下面是 XML 的示例：

```
<foo>
  <customers>
    <customer>
      <title>Ms</title>
      <name>
        <firstName>Jane</firstName>
        <lastName>Customer</lastName>
      </name>
      <reservations>
        <reseration>
          <reservationNumber>123</reservationNumber>
          <reservationDate>2013-02-15</reservationDate>
          <table>12</table
        </reservation>
        <reseration>
          <reservationNumber>456</reservationNumber>
          <reservationDate>2013-03-24</reservationDate>
          <table>09</table
        </reservation>
        <reseration>
          <reservationNumber>789</reservationNumber>
          <reservationDate>2013-05-02</reservationDate>
          <table>22</table
        </reservation>
      </reservations>
    </customer>
    <customer>
      <title>Dr</title>
      <name>
        <firstName>John</firstName>
        <lastName>Smith</lastName>
      </name>
      <reservations>
        <reseration>
          <reservationNumber>ABC</reservationNumber>
          <reservationDate>2013-02-15</reservationDate>
          <table>05</table
        </reservation>
        <reseration>
          <reservationNumber>DEF</reservationNumber>
          <reservationDate>2013-03-24</reservationDate>
          <table>10</table
        </reservation>
        <reseration>
          <reservationNumber>GHI</reservationNumber>
          <reservationDate>2013-05-02</reservationDate>
          <table>16</table
        </reservation>
      </reservations>
    </customer>
  </customers>
</foo> 
```

我希望结果表如下所示：

```
Title     Name              Reservation     Date           Table
-----     ----              -----------     ----           -----
Ms        Jane Customer     123             2013-02-15     12
                            456             2013-03-24     09
                            789             2013-05-02     22
Dr        John Smith        ABC             2013-02-15     05
                            DEF             2013-03-24     10
                            GHI             2013-05-02     16 
```

我知道如何使用 XSL for-each 来构建每一行。棘手的是如何构建递归，它将第一个子元素中的预订详细信息（预订、日期和表格）拉到与第一行的父元素相同的行中。然后只有剩余行中剩余子元素的保留详细信息。

所以这：

```
Title     Name              Reservation     Date           Table
-----     ----              -----------     ----           -----
Ms        Jane Customer     123             2013-02-15     12
                            456             2013-03-24     09
                            789             2013-05-02     22 
```

不是这个：

```
Title     Name              Reservation     Date           Table
-----     ----              -----------     ----           -----
Ms        Jane Customer     
                            123             2013-02-15     12
                            456             2013-03-24     09
                            789             2013-05-02     22 
```

做了很多搜索，并没有看到类似的东西。

**更新**

这是我能够开始工作的地方

```
<xsl:for-each select="customers/customer">
  <xsl:for-each select="./reservations/reservation">
    <xsl:choose>
      <xsl:when test="position() = 1"> 
        <tr>
          <td><xsl:value-of select="../../title"/></td> 
          <td><xsl:value-of select="reservationNumber"/></td>
        </tr>
      </xsl:when>
      .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:11:39.480

最简单的方法可能是**只**匹配`reservation`元素。

对于 each `reservation`，您可以使用`<xsl:when test="node[position() > 1]">`来测试 each 是否是其父级的第一个子级。如果是，您可以使用`parent`轴来获取`customer`详细信息；否则，您可以用空白填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:16:32.807

如果您想让 Title 和 Name 跨越多行，您可以使用该[`count()`](http://www.w3.org/TR/xpath/#function-count)函数找出预订的数量。

您需要以与其他人不同的方式处理第一个预订，因为第一个预订在同一个表格行上。

以下片段说明了这个想法：

```
 <xsl:template match="customer">
    <xsl:variable name="res" select="reservations/reservation"/>
    <tr>
      <td rowspan="{count($res)}"><xsl:value-of select="title"/></td>
      <td rowspan="{count($res)}"><xsl:apply-templates select="name"/></td>
      <!-- the first reservation goes to the same row -->
      <xsl:apply-templates select="$res[1]"/>
    </tr>
    <!-- the rest of the reservations go to their own rows -->
    <xsl:for-each select="$res[position() &gt; 1]">
      <tr>
        <xsl:apply-templates select="."/>
      </tr>
    </xsl:for-each>
  </xsl:template>

  <xsl:template match="name">
    <xsl:value-of select="concat(firstName, ' ', lastName)"/>
  </xsl:template>

  <xsl:template match="reservation">
    <td><xsl:value-of select="reservationNumber"/></td>
    <td><xsl:value-of select="reservationDate"/></td>
    <td><xsl:value-of select="table"/></td>
  </xsl:template> 
```

# django - django 查询集排序

> ID：13651810
> 
> 赞同：0
> 
> 时间：2012-11-30T19:28:37.803
> 
> 标签：django, django-templates

我正在列出查询集结果，并想添加一个选项来选择显示的订单结果。

我想将数据库中的实际数据传递到其他页面进行排序。我能够通过获取所有对象 id 并使用 django session 根据订单条件重新创建一个新的查询集来实现这样的事情。

我在想是否有其他方法可以实现这样的目标？

10倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:38:53.243

假设您当前正在将数据显示为表格，您可以给一些 javascript 客户端表格排序器（例如[tablesorter](http://tablesorter.com/docs/) ）提供机会。有很多 javascript 表格排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:11:08.923

我现在离开我的开发机器，但我认为你可以将 id 列表传递给一个新的 Queryset，`pk__in=list_of_object_ids`然后使用本机`order_by`函数。

例如：

```
objs = Object.objects.filter(pk__in=list_of_object_ids).order_by('value_to_order_by') 
```

无论如何，这就是我首先要尝试的方法，尽管我确信会有更好的优化。

例如，您可以传递带有键值对的字典，而不是对象 ID 列表，该键值对具有您想要排序的值。

例如：

```
[{'obj_id':1,'obj_value':'foo'},{'obj_id':2,'obj_value':'foo'}] 
```

然后使用一些 lambda 函数对其进行排序，就像[这里](https://stackoverflow.com/questions/72899/in-python-how-do-i-sort-a-list-of-dictionaries-by-values-of-the-dictionary)一样。

# teradata - Teradata 是否支持 DATE 和 TIMESTAMP 的文字？

> ID：13651811
> 
> 赞同：5
> 
> 时间：2012-11-30T19:28:45.223
> 
> 标签：teradata

我希望能够做这样的事情：

`insert into mydb.mytable (updatetimestamp) values (#1/15/2012 01:03:00#)`

...或者...

`select * from mydb.mytable where updatetimestamp = #1/15/2012 01:03:00#`

使用文字不需要冗长的强制转换等等，因为它会立即将表达式解释为 DATE 或 TIMESTAMP。

Teradata 是否支持这种类型的语法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T19:41:22.943

是的，Teradata 支持日期和时间戳的 ANSI 格式。参考：[http ://www.teradataforum.com/l070316a.htm](http://www.teradataforum.com/l070316a.htm)

例如：

```
INSERT 
  INTO  mydb.mytable (updatetimestamp) 
VALUES (TIMESTAMP '2012-01-15 01:03:00'); 
```

或者：

```
SELECT * 
  FROM mydb.mytable 
 WHERE updatedate = DATE '2012-01-15'; 
```

# vb.net - vb.net 在表单内启动应用程序

> ID：13651815
> 
> 赞同：5
> 
> 时间：2012-11-30T19:29:03.563
> 
> 标签：vb.net, winforms, process, windows-8, visual-studio-2012

我想在面板中运行应用程序或在我的应用程序中运行某些东西。这是一个模拟器前端。您浏览游戏，然后当您选择一个游戏时，它会启动模拟器。我找到了以下代码并将其改编为我的项目

```
Public Class Form1
    Declare Auto Function SetParent Lib "user32.dll" (ByVal hWndChild As IntPtr, ByVal hWndNewParent As IntPtr) As Integer
    Declare Auto Function SendMessage Lib "user32.dll" (ByVal hWnd As IntPtr, ByVal Msg As Integer, ByVal wParam As Integer, ByVal lParam As Integer) As Integer
    Private Const WM_SYSCOMMAND As Integer = 274
    Private Const SC_MAXIMIZE As Integer = 61488
    Dim proc As Process

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        proc = Process.Start("C:\WINDOWS\notepad.exe")
        proc.WaitForInputIdle()

        SetParent(proc.MainWindowHandle, Panel1.Handle)
        SendMessage(proc.MainWindowHandle, WM_SYSCOMMAND, SC_MAXIMIZE, 0)
    End Sub
End Class 
```

如果我用记事本尝试它，甚至 zsnesw.exe 它工作正常，但如果我尝试将一些参数传递给 zsnesw 它有点吓坏了，我必须重新启动我的计算机（我无法切换应用程序甚至打开任务经理）。

此外，即使它确实有效，开始菜单也会像我切换到另一个应用程序一样弹出。这是我一开始就试图避免的，因为我的应用程序是全屏的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T20:10:29.817

我让它工作了！

```
 Dim proc As Process
        proc = Process.Start(emuPath + "zsnesw", "-m """ + selGame.romPath + """")
        proc.WaitForInputIdle()
        SetParent(proc.MainWindowHandle, Me.Panel1.Handle)
        SendMessage(proc.MainWindowHandle, WM_SYSCOMMAND, SC_MAXIMIZE, 0)
        Me.BringToFront() 
```

**问题 1：**我错误地传递了参数。我试图使用 Process.StartInfo.Arguments。由于某种原因没有工作。在 Process.Start 中使用逗号可以正常工作。

**问题 2：**我添加了 Me.BringToFront() 以再次隐藏开始菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-27T12:10:34.783

使用 Thread.Sleep ;)

'在 Panel2 控件中运行 Calc 应用程序

```
Dim proc As Process
proc = Process.Start("Calc.exe")
proc.WaitForInputIdle()
Thread.Sleep(1000)
SetParent(proc.MainWindowHandle, Me.Panel2.Handle)
Thread.Sleep(1000)
SendMessage(proc.MainWindowHandle, WM_SYSCOMMAND, SC_MAXIMIZE, 0) 
```

# javascript - Google 网站中的分析自定义变量

> ID：13651816
> 
> 赞同：3
> 
> 时间：2012-11-30T19:29:04.857
> 
> 标签：javascript, google-analytics, google-sites

是否可以在谷歌网站中注册自定义变量？我已经尝试了一个星期，但仍然无法获得它。

我知道有两种方法可以做到这一点。

*   异步：这是分析文档推荐的，但它不起作用，因为 gSites 不允许使用 DOM 动态添加节点。我试了很多次...

    `_gaq.push(['_setCustomVar', 4, 'customVar4', "cuatro", 2 ]);`
    `_gaq.push(['_trackPageview']);`

*   同步：我无法完成这项工作，它会在准备好（或完全加载）之前尝试使用 _gat 对象并以错误结束。

    `var tracker = _gat._getTracker("UA-XXXXXX-X");`

    `tracker._setCustomVar(2,"tracker2","mail",1);`

    `pageTracker._trackPageview();`

有谁能够帮我？**问题仅在谷歌网站中，创建应用脚本并将其添加为小工具。**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:43:53.263

如[本帮助页面中所述](http://support.google.com/sites/bin/answer.py?hl=en&answer=2500646&ctx=cb&src=cb&cbid=1jsv9tss5vkzm&cbrank=4)

1.  转到您要在其中嵌入 HTML 的 Google 协作平台页面。
2.  转到插入菜单并选择 HTML 框。
3.  在打开的对话框中，添加 HTML、CSS 和/或 Javascript 代码。
4.  现在您可以插入`<script>`标签

尝试添加通用代码片段：

```
<script type="text/javascript">
_gaq.push(function() {
    var tracker = _gat._getTrackerByName();
    tracker._setCustomVar(1, 'Feedback', 'Closed', 1);
    tracker._trackPageview();
});
</script> 
```

我还建议您查看[Google Analytic 的开发指南](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:10:10.003

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

[https://developers.google.com/analytics/devguides/collection/gajs/asyncTracking](https://developers.google.com/analytics/devguides/collection/gajs/asyncTracking)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:22:26.557

由于 Google 协作平台不允许动态插入，因此只需明确添加脚本：

```
<script type="text/javascript" src="https://ssl.google-analytics.com/ga.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_setCustomVar', 4, 'customVar4', "cuatro", 2 ]);
  _gaq.push(['_trackPageview']);

</script> 
```

# php - CakePHP __construct 用数组执行

> ID：13651820
> 
> 赞同：0
> 
> 时间：2012-11-30T19:29:31.487
> 
> 标签：php, cakephp, cakephp-2.0

我在 CakePHP 应用程序中实现了一个简单的回文问题来学习语言和框架。我一切正常，但有一点我无法解释的奇怪行为。

我有一个名为 Palindrome 的类，它有一个 __construct 方法，它接受一个参数，该参数应该始终是一个字符串。但是，我第一次实例化回文类的实例时，__construct 方法执行了两次，第一次传入的数组似乎是对该类的一些引用。我已经能够解决这个问题，但我不明白为什么会这样。任何人都可以启发我吗？这是我的代码：

类文件：

```
class Palindrome {
    public $base_string = "";

    public function __construct($passed_string)
    {   
        print "==> $passed_string<br />";

        if(!is_array($passed_string))
        {
            $this->base_string = trim($passed_string);
        }
    }
} 
```

控制器：

```
class PalindromesController extends AppController
{
    public $helpers = array('Html', 'Form');

    public function index()
    {

    }

    public function test_strings()
    {
        $string_array = explode("\n", $_POST["text_to_test"]);

        $string_index = 0;

        $palindrome_array = array();

        while($string_index < count($string_array))
        {
            $my_string = $string_array[$string_index];

            print "---> $lcString<br />";

            array_push($palindrome_array, new $this->Palindrome(strtoupper($my_string)));
            $string_index = $string_index + 1;
        }

        $this->set("palindrome_array", $palindrome_array);
    }
} 
```

输入 "foo\nbar\nbaz" 生成此输出 -

```
---> foo 
==> Array
==> FOO 
---> bar 
==> BAR 
---> baz
==> BAZ 
```

这是带有 PHP 5.3.15 的 CakePHP 2.2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:43:06.390

你有`new $this->Palindrome(...)`

1.  $this->Palindrome 还不存在，所以 cake 会自动为你创建它。
2.  new（回文实例）创建另一个回文实例。

来自控制器的`$this->Model`行为有点像单例。它是自动创建的，然后您可以多次使用它来读取/写入数据到您的数据源。例如，在整个代码块中使用了相同的 Model 对象：

```
$record1 = $this->Model->findById(4);
$record2 = $this->Model->findById(5);
$this->Model->create(array(/*...*/));
$this->Model->save(); 
```

# java - MessageDigest MD5 算法没有返回我所期望的

> ID：13651822
> 
> 赞同：8
> 
> 时间：2012-11-30T19:29:52.880
> 
> 标签：java, md5

我脑后的某些东西告诉我，我在这里遗漏了一些明显的东西。

我正在将现有的 java 项目与使用 api 密钥的 md5 哈希进行身份验证的第三方 api 集成。它对我不起作用，在调试过程中我意识到我生成的哈希与他们提供的示例不匹配。我发现一些网站从字符串创建 MD5 哈希来检查他们的例子，据我所知，我错了，他们是对的。

例如，根据[这个网站](http://md5-hash-online.waraxe.us/)，字符串“hello”会生成“5d41402abc4b2a76b9719d911017c592”的哈希值。（FWIW 我对这个网站一无所知，除了它似乎正确地散列了我拥有的示例）。当我通过我的代码运行它时，我得到：

XUFAKrxLKna5cZ2REBfFkg==

这是我用来生成 md5 哈希/字符串的简单方法：

```
private String md5(String md5Me) throws Exception {
    MessageDigest md = MessageDigest.getInstance("MD5");
    md.reset();
    md.update(md5Me.getBytes("UTF-8"));

    return Base64.encodeBase64String(md.digest());
} 
```

上周，我使用了一种非常相似的方法成功地验证了使用 SHA1 算法的不同 API。我想知道问题是否与 org.apache.commons.net.util.Base64.encodeBase64String 相关...如果仅进行一些测试以查看 byteArray 是否正确但转换后的字符串错误，则非常感谢任何帮助.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T19:42:31.443

> 例如，根据这个网站，字符串“hello”会生成“5d41402abc4b2a76b9719d911017c592”的哈希值。（FWIW 我对这个网站一无所知，除了它似乎正确地散列了我拥有的示例）。当我通过我的代码运行它时，我得到：
> 
> XUFAKrxLKna5cZ2REBfFkg==

两者都是表示相同 16 字节散列的正确方法。`5d41402abc4b2a76b9719d911017c592`将散列的每个字节表示为两个十六进制数字，而`XUFAKrxLKna5cZ2REBfFkg==`使用 Base-64 将散列的每*三个*字节表示为*四个*字符。

要生成此第三方 API 期望的十六进制版本，您可以更改此：

```
Base64.encodeBase64String(md.digest()); 
```

对此：

```
String.format("%032x", new BigInteger(1, md.digest())); 
```

（主要取自[这个 StackOverflow 答案](https://stackoverflow.com/q/923863/978917)）。

但是，您可能需要考虑为此使用外部库。[Perception](https://stackoverflow.com/users/680925/perception)在上面的评论中提到了 Apache Commons DigestUtils。如果您使用它，您将需要[该`md5hex`方法](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html#md5Hex%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T19:41:35.960

md5 哈希算法是核心 java API 的一部分，因此不需要任何外部库。这是我使用 MD5 加密密码的方法。

```
import java.security.MessageDigest;

/**
 * Use to encrypt passwords using MD5 algorithm
 * @param password should be a plain text password.
 * @return a hex String that results from encrypting the given password.
 */
public static String encryptPassword(String password) {
    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.update(password.getBytes());

        byte byteData[] = md.digest();

        StringBuffer hexString = new StringBuffer();
        for (int i=0;i<byteData.length;i++) {
            String hex=Integer.toHexString(0xff & byteData[i]);
            if(hex.length()==1) hexString.append('0');
            hexString.append(hex);
        }
        return hexString.toString();
    }
    catch(java.security.NoSuchAlgorithmException missing) {
        return "Error.";
    }
} 
```

# excel-formula - 范围内的单元格对匹配另一张纸上的一对单元格在第一张纸上显示结果

> ID：13651823
> 
> 赞同：0
> 
> 时间：2012-11-30T19:29:54.040
> 
> 标签：excel-formula

在工作表“96-97”上如果单元格 L 和 M 的范围从第 9497 行到 13240 匹配（都需要匹配）工作表“CNP”上从第 12133 行到 24125 => 的单元格对 G 和 H => 然后在工作表“96 -97" 显示从 O、P、Q、R 和 S 列上的相应行（来自“CNP”表）到 N、O、P、Q、R 列上表 96-97 上的相应行的内部内容。

很快：如果 9497 L`on sheet 1`匹配 12133 G`sheet 2`并且 9497 M`on sheet 1`匹配 12133 H`sheet 2` **然后在同一行**中`sheet 1`但在 N、O、P、Q、R 列上 显示 O、P、Q、R、S 列中匹配行的内容.

我正在使用 Excel 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:14:33.767

In row 2, column O put:

```
=IF(Sheet1!L9497=Sheet2!G12133 & Sheet1!M9497=Sheet2!H12133, Sheet2!O2,"") 
```

assuming you want blanks if the condition isn't met. I'm also assuming you want to copy what's in Sheet2 to Sheet1 in the O,P,Q,R and S columns, although you don't say so. Then you can copy this formula to your other rows and columns.

# xamarin.ios - 更改状态栏方向无效

> ID：13651825
> 
> 赞同：2
> 
> 时间：2012-11-30T19:30:01.267
> 
> 标签：xamarin.ios, orientation, statusbar

我有两个 ViewControllers - 主要的只有肖像 - 第二个，它显示加载了 YouTube 视频的 WebView 可以旋转到任何方向。当它在 Landscape 中被关闭时，返回到主 ViewController，状态栏留在 Landscape 模式。我知道 YouTube 视图何时被关闭并在被调用方法中的代码上放置了以下行：

```
UIApplication.SharedApplication.SetStatusBarOrientation(UIInterfaceOrientation.Portrait,true); 
```

但它对状态栏没有影响。还有其他地方可以设置方向吗？其他想法？

谢谢，瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:37:36.617

通过将以下内容添加到 AppDelegate 修复了该问题

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations (UIApplication application, UIWindow forWindow)
{
     return UIInterfaceOrientationMask.AllButUpsideDown;
} 
```

然后这段代码实际上做了它应该做的事情：

```
UIApplication.SharedApplication.SetStatusBarOrientation(UIInterfaceOrientation.Portrait,true); 
```

# javascript - Kendo UI/jQuery 点击事件多次运行

> ID：13651828
> 
> 赞同：2
> 
> 时间：2012-11-30T19:30:06.637
> 
> 标签：javascript, jquery, kendo-ui

我正在使用 Telerik 的名为 Kendo UI 的 jQuery 软件来创建一个模态弹出窗口。我对包含`"Confirm"/"Cancel"`确认的 Kendo 模态弹出框有一个相当奇怪的问题。第一次打开确认窗口并单击任一按钮（确认或取消）时，窗口工作正常。我第二次打开此弹出窗口并单击按钮时，我的 Kendo`click`事件会触发两次。我第三次打开窗口时，点击事件触发了 3 次，等等。我不知道为什么。它应该只发射一次。

这是我的 JS 代码。触发两次的 click 函数在 Confirm & Cancel 部分中，从以下行开始`.click(function () {`：

```
var kendoWindow = $("#delete-confirmation").kendoWindow({
    title: "Confirm",
    resizable: false,
    modal: true,
    center: true
});

kendoWindow.data("kendoWindow")
    .center().open();

kendoWindow
    .find(".delete-confirm")
    .click(function () {
        kendoWindow.data("kendoWindow").close();
        destroyItem();
    })
   .end();

kendoWindow
    .find(".delete-cancel")
    .click(function () {
        kendoWindow.data("kendoWindow").close();
    })
   .end(); 
```

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:41:04.433

听起来您应该只初始化一次对话框（创建它并添加您的处理程序）。然后每次你需要对话框显示你只调用你的

```
kendoWindow.data("kendoWindow").center().open(); 
```

行代码。看起来每次您打开对话框时都会添加一个新的单击处理程序，并且以前的处理程序和新的处理程序都将在单击事件上被调用。

# android - 广播接收器独立于应用程序？

> ID：13651831
> 
> 赞同：0
> 
> 时间：2012-11-30T19:30:32.017
> 
> 标签：android, broadcastreceiver, network-state

我对如何使用广播接收器知之甚少，现在要问这个愚蠢的问题。我需要一个广播接收器来注册独立于主应用程序的网络状态变化。我的意思是，即使应用程序没有启动和运行，它也可以工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:32:38.370

当您的广播接收器注册后，它将保持注册状态，直到您取消注册为止。如果您在没有取消注册的情况下关闭程序，它实际上会保持注册状态。这样，即使应用程序未运行，它也会不断注意到网络变化（在您的情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:35:51.547

在清单文件中使用它

```
<receiver android:name=".YOURRECEIVER">
  <intent-filter>
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
  </receiver>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

更改 Internet 连接时将调用 OnReceive 方法。希望它会帮助你。这里发布了很多相同的问题，请搜索以进行澄清。

# linux - 可执行文件上缺少动态库，但仅在以 sudo 运行时

> ID：13651832
> 
> 赞同：0
> 
> 时间：2012-11-30T19:30:36.497
> 
> 标签：linux, shared-libraries

我很困惑为什么`libiconv.so.2`并且`libcharset.so.1`两者都没有找到，但只有当我对不同的用户使用 sudo 时。LD_LIBRARY_PATH 完全相同，因为我使用 -E 运行 sudo：

```
$ ldd `which git`
    linux-vdso.so.1 =>  (0x00007fff51975000)
    libz.so.1 => /usr/lib64/libz.so.1 (0x0000003e60600000)
    libiconv.so.2 => /internal/lib/libiconv.so.2 (0x00007f0962bdd000)
    libcrypto.so.6 => /lib64/libcrypto.so.6 (0x0000003e6a400000)
    libcharset.so.1 => /internal/lib/libcharset.so.1 (0x00007f09629db000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x0000003e61600000)
    libc.so.6 => /lib64/libc.so.6 (0x0000003e60a00000)
    libdl.so.2 => /lib64/libdl.so.2 (0x0000003e61200000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003e60200000)
$ sudo -ucgaadm -EH ldd `which git`
    linux-vdso.so.1 =>  (0x00007fff5b148000)
    libz.so.1 => /usr/lib64/libz.so.1 (0x0000003e60600000)
    libiconv.so.2 => not found
    libcrypto.so.6 => /lib64/libcrypto.so.6 (0x0000003e6a400000)
    libcharset.so.1 => not found
    libpthread.so.0 => /lib64/libpthread.so.0 (0x0000003e61600000)
    libc.so.6 => /lib64/libc.so.6 (0x0000003e60a00000)
    libdl.so.2 => /lib64/libdl.so.2 (0x0000003e61200000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003e60200000) 
```

只需检查 LD_LIBRARY_PATH，似乎 libiconv.so.2 的路径确实存在：

```
$ echo $LD_LIBRARY_PATH
...
$ sudo -ucgaadm -EH echo $LD_LIBRARY_PATH
... same output as previous command ... 
```

从我的常规使用以及 sudo 用户中也可以看到应该包含这些库的目录：

```
$ ls /internal/lib/ -lah
total 2.5M
drwxr-xr-x 2 apsg apsggrp 4.0K Jan 31  2010 .
drwxr-xr-x 6 apsg apsggrp 4.0K Jan 31  2010 ..
-rw-r--r-- 1 apsg apsggrp  212 Jan 31  2010 charset.alias
-rw-r--r-- 1 apsg apsggrp  24K Jan 31  2010 libcharset.a
-rw-r--r-- 1 apsg apsggrp  993 Jan 31  2010 libcharset.la
lrwxrwxrwx 1 apsg apsggrp   19 Jan 31  2010 libcharset.so -> libcharset.so.1.0.0
lrwxrwxrwx 1 apsg apsggrp   19 Jan 31  2010 libcharset.so.1 -> libcharset.so.1.0.0
-rw-r--r-- 1 apsg apsggrp  24K Jan 31  2010 libcharset.so.1.0.0
-rw-r--r-- 1 apsg apsggrp  969 Jan 31  2010 libiconv.la
lrwxrwxrwx 1 apsg apsggrp   17 Jan 31  2010 libiconv.so -> libiconv.so.2.5.0
lrwxrwxrwx 1 apsg apsggrp   17 Jan 31  2010 libiconv.so.2 -> libiconv.so.2.5.0
-rw-r--r-- 1 apsg apsggrp 1.2M Jan 31  2010 libiconv.so.2.5.0
-rw-r--r-- 1 apsg apsggrp 1.2M Jan 31  2010 preloadable_libiconv.so
$ sudo -ucgaadm -EH ls /internal/lib/ -lah
... same output as previous command ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:36:34.067

尝试“sudo su -”然后运行您的命令“-”更改为 root 用户并创建一个新的 shell。

# migration - Camping 可以处理回滚吗？

> ID：13651833
> 
> 赞同：0
> 
> 时间：2012-11-30T19:30:37.963
> 
> 标签：migration, camping

我写了一个迁移并迁移到它（当然是在开发副本上），然后才意识到我忘记初始化一个值，然后在接下来的十分钟里对 Camping 如何使回滚成为可能感到困惑。我意识到我可以[编写另一个迁移来修复数据](http://guides.rubyonrails.org/migrations.html)，这是我打算做的，但它引出了一个问题：

**我可以在 Camping 中回滚迁移**，还是在我错过某些东西时必须依靠编写 X.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:17:41.183

您可以告诉`App.create_schema`要迁移到哪个版本：

```
Camping.goes :App

…

App.create_schema(:version => 1.1) 
```

请注意，您必须定义向下迁移（或使用更改迁移）才能使其正常工作。

# ruby - 了解 Rails 中的路由

> ID：13651834
> 
> 赞同：2
> 
> 时间：2012-11-30T19:30:47.197
> 
> 标签：ruby, ruby-on-rails-3

好的，首先我不得不说我对 Rails 很陌生。在过去的几天里，我一直在学习一个又一个教程，但仍然缺少一些概念。主要是因为我只想从一个简单的站点结构开始，但每个教程要么是购物车，要么是博客，它们是站点内的更多应用程序。我的网站上有一些页面将包含数据库驱动的照片库，但现在我只是想获得这些问题的一些答案。

网站结构：

> *主页 | 照片 | 关于 | 工作 | 接触*

作品有子页面，例如：

> *html | 红宝石 | 导轨 | 废话*

*   **控制器**：

我是否需要为每个新页面设置一个控制器，或者我是否可以有一个控制器来处理所有主级别页面。如果我可以使用一个控制器，那将如何工作，我是否需要定义一个操作来处​​理每个页面（视图），例如

```
class MainController < ApplicationController
  def index
  end

  def photos
  end

  def contact
  end

  # and so on ......
end 
```

*   **路由：**

我将如何路由上述内容。*资源*和 *get有什么区别

*   获取“照片/照片”
*   资源：照片

当我为特定页面设置控制器时。rails g controller 联系方式

它在我的视图中创建了一个名为contact的文件夹，在其中创建了一个名为contact的视图，这意味着我的url是contact/contact，它还添加了一个路由get“contact/contact”现在如果我只想让用户输入`http://mydomain/contact`那么这不会发生去工作。我将如何设置它以便用户不必添加`http://mydomain/contact/contact` 我能找到解决此问题的唯一方法是使用匹配动词。

```
match "contact" => 'contact#contact' 
```

这是否意味着我必须对我网站上的每个页面使用匹配来更改 url 路径？

这些只是我所遇到的许多问题中的一小部分，这些问题在我阅读过的大多数教程中都不是很清楚。请不要告诉我使用用户指南，因为我已经并且现在不知所措。我只是想从一些在 Rails 中工作的开发人员那里得到一些明确的答案，并且会像我上面概述的那样建立一个结构。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:55:30.707

我想你会得到一些相互矛盾的建议，但这就是我要做的。

*   创建一个 MainController（我更喜欢 HomeController，因为它也可以处理主页，但这只是我）。这个控制器将处理 home、about 和 contact 的动作。

*   创建一个 PhotosController 因为您说照片来自数据库，并且很有可能每张照片都有一个索引/列表页面和单独的页面。

*   创建一个处理工作主页和所有子页面的 WorksController。

现在.. 一些人会争论（包括我自己）home、about、contact 和所有的工作页面（子页面也是）应该由一个通用的 PagesController 处理，它足够聪明，知道该做什么。不过我现在不打算谈了。

这两条路线的区别：

```
get "photos/photos"
resources :photos 
```

是不是第一个只会为“/photos/photos”的 GET 请求创建*单个路由。*第二个将为“/photos”创建标准的 CRUD 操作。

对于您的静态页面，我可能会继续创建：

```
match "about" => 'main#about'
match "contact" => 'main#contact'
... 
```

很难说照片和工作，因为我不知道你会在那里做什么。上面的内容并不像它可能的那样 DRY，但除非你走“智能页面控制器”路线，否则它是最简单的。

# css - 奇怪的 Chrome 问题，可能是渲染器中的问题

> ID：13651836
> 
> 赞同：0
> 
> 时间：2012-11-30T19:30:47.560
> 
> 标签：css, google-chrome, textbox, page-refresh

让我简单地说一下。在一个有 5 个文本框的页面上，当您刷新页面时，Chrome 会弄乱页面的样式，从而使导航栏向下移动。

但是，如果您取出其中一个文本框，那么它将始终正确呈现样式：

HTML：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <link rel="stylesheet" href="index.css" type="text/css" />

        <link href='http://fonts.googleapis.com/css?family=Raleway:500' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Josefin+Slab:400,600' rel='stylesheet' type='text/css'>
        <link rel="icon" type="image/png" href="images/favicon.png" />

        <title>Improper Style</title>
    </head>
    <body>
        <header>

            <img src="images/placeholder.jpg" height="50px" />

            <div id="navbar">
                <ul>
                    <li>

                        <a href="">My Profile</a>
                    </li>
                    <li>
                        <a href="">Shopping Cart</a>
                    </li>
                    <li>
                        <a href="">Logout</a>
                    </li>
                </ul>
            </div>
        </header>
        <div id="logo" >

            <a href="index.html"><h1>Generic Name</h1></a>
            <h2>This page has improper format (on refresh)</h2>
        </div>

        <div id="navbar2">
            <ul>
                <li id="newCustomer">
                    <a href="proper.html">Click for page with <br /> correct format</a>
                </li>

                <li>
                    <a href="">Shirting</a>
                </li>

                <li>
                    <a href="">Trousers</a>
                </li>
                <li>
                    <a href="">Blog</a>
                </li>

            </ul>

        </div>

        <div id="main">
            <form id="signup" method="post" >
                <div id="signCol1">
                    <ul>
                        <li>
                            <strong>Email</strong>
                        </li>
                        <li>
                            <input type="email" size="25" maxlength="100" name="email" />
                        </li>
                    </ul>
                </div>
                <div id="signCol2">
                    <ul>
                        <li>
                            <strong>Choose password</strong>
                        </li>
                        <li>
                            <input type="password" size="25" maxlength="100" name="password" />
                        </li>
                    </ul>

                </div>
                <div id="signCol3">
                    <ul>
                        <li>
                            <strong>Repeat password</strong>
                        </li>
                        <li>
                            <input type="password" size="25" maxlength="100" name="pwconfirm" />
                        </li>
                    </ul>
                </div>
                <div id="signCol4">
                    <ul>
                        <li>
                            <strong>First Name</strong>
                        </li>
                        <li>
                            <input type="text" size="25" maxlength="100" name="fname" />
                        </li>
                    </ul>
                </div>
                <div id="signCol5">
                    <ul>
                        <li>
                            <strong>Last Name</strong>
                        </li>
                        <li>
                            <input type="text" size="25" maxlength="100" name="lname" />
                        </li>
                    </ul>
                </div>

                <input type="submit" value="Next Step" />

            </form>
        </div>

    </body>
</html> 
```

CSS：

```
html {
    overflow-x: hidden;
}

body {
    font-size: 16pt;
}

#main {

    margin-left: auto;
    margin-right: auto;
}

header {
    background-color: rgb(59,0,0);
    width: 100%;
}

#navbar {
    float: right;

}

#navbar ul {

}

#navbar ul li {
    list-style: none;
    display: inline-block;
    padding-right: 20px;
}

#navbar ul li a {
    text-decoration: none;
    color: blue;

}

#navbar2 {
    float: left;
    position: relative;
    top: 10%;
    left: 3%;
    font-size: 16pt;
    line-height: 300%;
    z-index: 5;
}

#navbar2 ul {
    list-style: none;
}

#navbar2 ul li a {
    text-decoration: none;
    color: rgb(100,0,0);

}

#logo {
    text-align: center;
    clear: right;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    top: 5px;
    left: 35px;
    font-family: bigmouth-reg;
    font-size: 20pt;
}

a img {
    border: none;
}

#signup {
    position: relative;
    left: 10%;
}

#signup div {

    /*float: left;*/
    padding-left: 5%;
    padding-right: 5%;
    display: inline-block;
    text-align: center;
}

#signup div ul {
    margin-left: 0;
    padding: 0;
}

#signup div ul li {
    list-style: none;
    padding: 0;
    margin-left: 0;
}

#signCol4 {
    margin-left: 15%;
}

#newCustomer {
    line-height: 120%;
}

#mainVid {
    text-align: center;
    position: relative;
    top: 10%;
    right: 5%;
}

#products {
    width: 65%;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    /*left:5%;*/

}

#products ul {
    list-style: none;
    float: left;
    height: 400px;
}

#products ul li {
    width: 200px;
    text-align: center;
    line-height: 150%;
}

#products ul li img {
    height: 300px;
    width: 190px;
}

#productHeader {
    width: 80%;
    color: rgb(59,0,0);
    text-align: center;
    font-size: 32pt;
    position: relative;
    left: 5%;
}

.listHeader {
    text-align: center;
    width: 100%;
    position: relative;
    /*right:5%;*/
    left: 3%;
}

.listHeader hr {
    width: 75%;
    clear: right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:11:34.953

我想我只是发布正确的答案，如[https://stackoverflow.com/users/1401973/dmi3y](https://stackoverflow.com/users/1401973/dmi3y)给出的。

我只是将图像放在导航栏的 div 下方，这似乎解决了这个问题。

再次感谢 dmi3y。

# asp.net - 在 Page_Load 子例程中使用 .IsPostBack

> ID：13651839
> 
> 赞同：5
> 
> 时间：2012-11-30T19:31:00.710
> 
> 标签：asp.net, vb.net, ispostback

像本示例编码一样，始终在 Web 表单的 Page_Load 子例程中使用 .IsPostBack 是“最佳实践”吗？

我希望可以问这个问题。如果没有，我将立即删除该问题。

基本上我想用你们大多数人编码的方式来编码。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not Page.IsPostBack Then

        ' More coding will go here.
        '--------------------------
    End If 
```

请给出它的使用的优点和缺点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T19:36:46.943

这与其说是“最佳实践”的案例，不如说是您是否需要使用它的案例。

的确，您通常会将`IsPostBack`.`Page_Load``Page_Init``HTML`

在这种情况下，您实际上是在使用该命令来防止正文中的代码在页面回发到自身时触发；例如表单提交或`AutoPostBack`服务器控件，例如`DropDownList`.

没有任何，至少我能想到的，赞成和反对的。它是需要或不需要的情况。

理想情况下需要它的一个示例是只想从数据库中获取数据一次并将其绑定到`DropDownList`. 当您回发时，此数据将在视图状态中可用。所以你不需要在回发时再次访问数据库。

不将代码放入其中的一个示例是，如果您正在生成具有事件处理程序的服务器控件（例如按钮），例如`click`，同时添加。这需要在回发时重新生成，以便事件处理程序可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T19:36:40.433

好处是您只能执行一次昂贵的操作。绑定到gridView...等。

大多数是您不想在刷新期间执行的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:16:12.697

它始终取决于您要优化的内容。如果你的初始化代码需要很长时间，最好只做第一次，让你的控件通过 ViewState 来初始化。然后你使用`If Not IsPostBack`.

但是，如果您的目标是带宽更重要的移动设备，您可能会关闭 ViewState 并在回发时再次初始化您的数据（您可以从 Cache 或 SessionState 中读取它）。始终注意您的 ViewState，我看过 20 kByte ViewState 或更多的页面。

优点：

*   初始化开销更少（例如访问数据库）
*   服务器上的内存更少（会话或缓存）

反对：

*   ViewState 的更多带宽

# html - CSS3 命名空间是否用于除 XML 之外的任何内容？

> ID：13651841
> 
> 赞同：4
> 
> 时间：2012-11-30T19:31:05.273
> 
> 标签：html, xml, css, xml-namespaces

我们有一个客户希望我们使用 CSS3 命名空间。但是，我发现的所有内容都表明它专门用于样式化 XML 而不是 HTML。任何人都可以验证将它用于 CSS/HTML 或澄清你将如何做到这一点吗？遵循这种方法有什么负面影响？

```
@namespace toto "http://toto.example.org";

toto|Product {
    display:block;
}

toto|Code {
    color: black
} 
```

[http://www.w3.org/TR/css3-namespace/](http://www.w3.org/TR/css3-namespace/)

[http://onwebdev.blogspot.com/2010/04/css3-namespace-selectors.html](http://onwebdev.blogspot.com/2010/04/css3-namespace-selectors.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:22:20.307

> 任何人都可以验证将它用于 CSS/HTML 或澄清你将如何做到这一点吗？

主流浏览器使用一个默认的命名空间，`http://www.w3.org/1999/xhtml`它是 XHTML 的命名空间，即使是 HTML 也是如此，然后继续他们的业务。但从技术上讲，由于 HTML 不是 XML，除非您考虑到基于 XML 的语言（如 SVG 和 MathML）无论如何都可以嵌入到 HTML 中，否则没有任何意义。

如果您的客户想要使用 CSS 命名空间，他们可能需要为您提供用某种与 CSS 兼容的命名空间机制的语言编写的东西。尝试将这些知识应用于 HTML 本身是没有意义的，因为

*   HTML 最初的设计初衷并不是为了命名空间
*   浏览器已经为 (X)HTML 文档分配了默认命名空间，您无论如何都无法显式访问

更多信息可以在[这个答案](https://stackoverflow.com/questions/3608819/what-does-this-mean-in-css/12979656#12979656)中找到。

要回答您的问题标题，文档语言[不一定必须基于 XML](http://www.w3.org/TR/css3-namespace/#terminology)：

> 除了本规范引入的术语，CSS 命名空间使用 XML 1.0 中的命名空间中定义的术语。但是，此处定义的语法不限于表示 XML 元素和属性名称，还可以表示宿主语言定义的其他类型的名称空间。

[为了方便起见，CSS 命名空间规范从XML 命名空间](http://www.w3.org/TR/xml-names)中借用了术语，因为 CSS 最常应用于 HTML 和 XML 文档（即便如此，更多人使用 XSL(T) 代替后者）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:59:59.777

CSS 命名空间不是关于对 CSS 规则进行逻辑分组（类似于 C++ 和 C# 中的命名空间），而是关于应用规则，因为它们适用于给定主机语言中的命名空间元素（在这种情况下，是具有 XML 命名空间的 XML 文档），而是规范是语言中立的，因此它可以与 JSON（如果有人为此发明命名空间）或任何其他结构化语言（[http://www.w3.org/TR/css3-namespace/](http://www.w3.org/TR/css3-namespace/)）一起使用。

> ### 2.1。术语
> 
> [..] 但是，这里定义的语法不限于表示 XML 元素和属性名称，还可以表示宿主语言定义的其他类型的名称空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T17:15:24.710

唯一的其他用途是使用[命名空间属性](https://developer.mozilla.org/en-US/docs/Web/API/element.setAttributeNS)和多语言 HTML5（可以呈现为 HTML 和序列化 XHTML 的标记）。以下是 CSS3 命名空间的一些用途：

*   [XHTML5 + CSS 命名空间](http://matt.garrish.ca/2013/02/xhtml5css-namespaces/)
*   [正面报道：Epub3](http://www.balisage.net/Proceedings/vol7/html/Freese01/BalisageVol7-Freese01.html)
*   [EPub 中的一些 W3C 文档](http://www.w3.org/blog/dpub/2014/01/18/some-w3c-documents-in-epub3/)
*   [ePub 示例](http://code.google.com/p/epub-samples/)
*   [多语种 ePub](http://matt.garrish.ca/2013/11/polyglot-epub/)
*   [Mozilla HTML 样式表](https://dxr.mozilla.org/mozilla-central/source/layout/style/res/html.css)
*   [Mozilla MathML 样式表](https://dxr.mozilla.org/mozilla-central/source/layout/mathml/mathml.css)
*   [Mozilla SVG 样式表](https://dxr.mozilla.org/mozilla-central/source/layout/svg/svg.css)
*   [WebCore HTML 样式表](http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/css/html.css)
*   [WebCore MathML 样式表](http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/css/mathml.css)
*   [WebCore SVG 样式表](http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/css/svg.css)
*   [闪烁 HTML 样式表](https://src.chromium.org/viewvc/blink/trunk/Source/core/css/html.css)
*   [闪烁 SVG 样式表](http://src.chromium.org/viewvc/blink/trunk/Source/core/css/svg.css)
*   [闪烁 MathML 样式表](http://src.chromium.org/viewvc/blink/trunk/Source/core/css/mathml.css)
*   [闪烁 XHTML 移动配置文件样式表](http://src.chromium.org/viewvc/blink/trunk/Source/core/css/xhtmlmp.css)
*   [Evolus Pencil Skin：对话框样式表](http://code.google.com/p/evoluspencil/source/browse/branches/pencil-2.0/app/skin/classic/dialog.css?r=346)
*   [Epub3 示例：儿童书籍样式表](http://code.google.com/p/epub-samples/source/browse/trunk/30/childrens-media-query/EPUB/childrens-book-style.css)

# vb.net - WCF RESTful 服务，服务器没有提供有意义的回复

> ID：13651851
> 
> 赞同：0
> 
> 时间：2012-11-30T19:31:46.733
> 
> 标签：vb.net, wcf, rest, .net-3.5, wcf-rest

我正在使用 WCF 创建一个安静的服务，但我不断收到错误消息：

服务器没有提供有意义的回复；这可能是由于合同不匹配、会话过早关闭或内部服务器错误造成的。

它是一个时钟应用程序，它接收用户名和当前时间并将其存储在数据库中用于登录/注销。

我是 REST 世界的新手，任何人都可以帮助我吗？

我的服务接口：

```
ServiceContract(Namespace:="WCFRESTService")> _
Public Interface IService1

<OperationContract()> _
<WebInvoke(UriTemplate:="/login", Method:="PUT")> _
Function InsertUserDetails(ByVal username As String, ByVal time As DateTime) As String
End Interface 
```

服务代码：

```
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Required)> _
<ServiceBehavior(Namespace:="WCFRESTService")> _
Public Class Service1
    Implements IService1

    Private con As New SqlConnection("Data Source=TE-LAPTOP-001\SQL2008R2;Initial Catalog=timeClock;Integrated Security=True")

    Public Function InsertUserDetails(ByVal username As String, ByVal time As DateTime) As String Implements IService1.InsertUserDetails

        Dim strMessage As String = String.Empty
        Dim errorMessage As String = String.Empty
        Dim numcount As Integer = 0

        numcount = getusercount(username)
        If (numcount = 0) Then

            Try

                con.Open()
                Dim cmd As New SqlCommand("spInsertLog", con)
                cmd.CommandType = CommandType.StoredProcedure

                cmd.Parameters.AddWithValue("@username", username)
                cmd.Parameters.AddWithValue("@timein", time)

                cmd.ExecuteNonQuery()

            Catch ex As Exception
                errorMessage = ex.ToString
            Finally
                con.Close()
            End Try

            strMessage = "You have Signed In at: " + time
        ElseIf (numcount = 1) Then

            strMessage = "Error: You need to SignOut before you can SignIn"
        End If

        Return errorMessage + strMessage
    End Function

    Public Function getusercount(ByVal username As String) As Integer
        Dim count As Int32 = 0
        Try
            con.Open()
            Dim cmd As New SqlCommand("spgetcount", con)
            cmd.CommandType = CommandType.StoredProcedure

            cmd.Parameters.AddWithValue("@username", username)
            count = Convert.ToInt32(cmd.ExecuteScalar())

        Catch ex As Exception
        Finally
            con.Close()
        End Try

        Return count
    End Function
End Class 
```

我的客户代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim objervice As New ServiceReference1.Service1Client()
    Dim result As String = objervice.InsertUserDetails("User1", DateTime.Now)
    MsgBox(result)
End Sub 
```

服务网络配置：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
<services>
  <service name="WcfRESTService1.Service1" behaviorConfiguration="WcfRESTService1.Service1Behavior">
    <!-- Service Endpoints -->
    <endpoint address="http://localhost:62131/Service1.svc" binding="webHttpBinding" contract="WcfRESTService1.IService1" behaviorConfiguration="web">
      <!--
          Upon deployment, the following identity element should be removed or replaced to reflect the 
          identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
          automatically.
      -->
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="WcfRESTService1.Service1Behavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp/>
    </behavior>
  </endpointBehaviors>
</behaviors>
</system.serviceModel> 
```

客户端配置：

```
<system.serviceModel>
            <bindings>
              <customBinding>
                <binding name="WebHttpBinding_IService1">
                  <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                    messageVersion="Soap12" writeEncoding="utf-8">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                      maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                  </textMessageEncoding>
                  <httpTransport/>
                </binding>
              </customBinding>
            </bindings>
            <client>

              <endpoint address="http://localhost:62131/Service1.svc" binding="customBinding" bindingConfiguration="WebHttpBinding_IService1"
                contract="ServiceReference1.IService1" name="WebHttpBinding_IService1" />
            </client>
              <behaviors>
                <endpointBehaviors>
                  <behavior name="test">
                    <webHttp />
                  </behavior>
                </endpointBehaviors>
              </behaviors>

</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:04:53.213

您在这里不需要 REST（对于此类客户端）。但如果你愿意 - 尝试使用来自 REST 方法的 WebGet 响应流：

```
[OperationContract, WebGet(UriTemplate = "/SendMessage?login={login}&password={password}&phoneNum={phoneNum}&message={message}", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json)]    
System.IO.Stream SendMessage(string login, string password, string phoneNum, string message, TimeSpan timeout);
//..

public Stream SendMessage(string login, string password, string phoneNum, string message, TimeSpan timeout)
{
//..
return new MemoryStream(Encoding.Default.GetBytes(jsonString)); 
} 
```

# c++ - 查找非二叉树的高度

> ID：13651852
> 
> 赞同：0
> 
> 时间：2012-11-30T19:31:50.020
> 
> 标签：c++, tree

我在一个网站上做练习，在练习中我们必须通过实现一个函数来找到一个非二叉树的高度。我在下面有一个 TreeNode 类。

```
class TreeNode
{
public:
TreeNode();
TreeNode(string data);
void addChild(TreeNode* child);
vector<TreeNode*>& getChildren();
void setData(string data);
string getData();
void visit();
}; 
```

我实现了这个[http://codepad.org/BiXkbABf](http://codepad.org/BiXkbABf)。但这不起作用。我该如何实现这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:35:01.680

循环内的逻辑是完全错误的。出于某种原因，您正在查看成对的连续孩子。相反，您应该一次只看一个孩子，然后选择一个身高最大的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:35:50.633

此行有错误；尝试自己发现它：

```
if(k>maxi)k=maxi; 
```

此外，尽管您的整体方法应该有效，但它执行的工作比必要的要多，因为大多数子树的高度几乎都被计算了两次。您可能希望重写代码以仅计算每个高度一次（提示：不要直接比较两个高度；相反，将前一个子树的高度存储在一个变量中，并仅将一个子树的高度与该变量进行比较）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:45:35.123

```
int hight(TreeNode* node) {
    vector<TreeNode*>& children = node.getChildren();
    unsigned int h = 0;
    for(int i = 0; i < children.size(); i++) {
        h = std::max(h, hight(children[i]));
    }
    return h + 1;
} 
```

`return 1 + maxi`; 是一个错误。您已经考虑了当前节点`k = 1 + max(height((tree->getChildren)()[i]),height((tree->getChildren)()[i+1]));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:00:37.720

接下来将以下行放在源代码顶部；尝试弄清楚它们的用途并相应地修复您的代码

```
#include <algorithm>
using namespace std; 
```

# c++ - 合并函数参数的适当命名约定是什么？

> ID：13651863
> 
> 赞同：0
> 
> 时间：2012-11-30T19:32:30.697
> 
> 标签：c++, naming-conventions

我正在编写一个 C++ 函数，它接受两个 Foo 对象并将第一个对象的元素添加到第二个对象中，如下所示：

```
MyFunction(const Foo& a, Foo* b) {
  for (int i = 0; i < a.bar_count(); i++) {
    b->Bar(i) = b->HasBar(i) ? Average(a.Bar(i), b->Bar(i)) : a.Bar(i);
  }
} 
```

`MyFunction`显然，这是一个玩具示例，但我的意思是：`a`和的名称应该是什么`b`？我的第一个想法是这样的，`MergeFoo`但后来我不确定如何命名参数，因为我最好的想法是这样的`merger`，`mergee`而且看起来很愚蠢。

`a`, `b`, 和的好名字是什么，`MyFunction`这样 API 对这个函数的用户来说是清楚的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:37:06.407

我会称它们为`merge()`,`src`和`dest`，但当然还有其他好名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:39:16.643

这看起来像是一个就地`zip`然后平均的操作。（[http://docs.python.org/2/library/functions.html#zip](http://docs.python.org/2/library/functions.html#zip)）

因此，不是索引访问，而是迭代器访问。然后[http://www.boost.org/doc/libs/1_41_0/libs/iterator/doc/zip_iterator.html](http://www.boost.org/doc/libs/1_41_0/libs/iterator/doc/zip_iterator.html)将这两个压缩，然后[http://www.boost.org/doc/libs/1_35_0/libs/iterator /doc/transform_iterator.html](http://www.boost.org/doc/libs/1_35_0/libs/iterator/doc/transform_iterator.html)将结果转换回第一个迭代器（条件平均）。

用 C++ 编写确实有点烦人。

迭代器`boost::optional<bar>`，压缩成一对，然后`boost::optional<bar>`通过取一个或平均（如果两者都存在）来产生 a。

那么，`left.ZipThenAverageInPlace( right )`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:54:38.353

`from`并且`into`似乎它们可能是合适的，但我个人会将其作为您`Foo`班级的一种方法。这意味着没有不明确的参数顺序，没有不方便的参数命名等......`Foo::merge(const Foo& other_foo)`

顺便说一句，我会考虑称它为不同的东西。合并对我来说表明最终结果是原始组件的集合并集，而您正在执行某种移动平均计算或类似计算。我没有一个好的替代名称可以建议，因为我不知道 , or 的实际用途或功能， `Foo`所以这必须由你决定！`Bar``Average`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:07:03.830

一个常见的 C++ 命名约定是`lhs`and `rhs`。这意味着左侧和右侧。通常，如果函数修改了它的一个参数，那就是`lhs`. 所以在你的例子中：

```
void MyFunction(Foo& lhs, const Foo& rhs); 
```

请注意，订单是从您的示例中交换的。

例如，查看 boost 库，例如： http: [//www.boost.org/doc/libs/1_52_0/libs/utility/operators.htm](http://www.boost.org/doc/libs/1_52_0/libs/utility/operators.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T20:34:07.493

[根据merge](http://www.cplusplus.com/reference/algorithm/merge/)，维护者对容器类对象的“合并”期望是功能。您想要完成的是在名为[transform](http://www.cplusplus.com/reference/algorithm/transform/)的 STL 中使用名为“average”的二元运算符。如果您不使用 STL 算法，我会将函数命名为“平均”以避免“合并”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T16:51:11.240

在考虑了所有选项后，我决定最好的选择是`AverageBarsInPlace(const Foo& new_bars, Foo* existing_bars);`. 我喜欢 Yakk 的“InPlace”后缀。我同意可能会说“`Merge`除非它实际上在进行合并，否则不要调用它”的回答。

然而，我对这个问题缺乏共识的真正收获是：这个函数的范围定义不明确。我应该将函数分解成更有凝聚力的块，例如一个函数进行合并，另一个函数进行平均。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-22T14:59:02.650

可以这样定义合并函数：一个实例吸收另一个实例释放的元素。所以这导致我使用参数名称`absorber`和`releaser`

在 PHP 中，这会导致以下函数定义：

`public function merge(ClassName $absorber, ClassName $releaser): void`

# python - Python gtalk客户端代码不起作用

> ID：13651865
> 
> 赞同：0
> 
> 时间：2012-11-30T19:32:36.537
> 
> 标签：python, linux, xmpp

我正在尝试运行此代码来制作 gtalk 客户端，但它没有运行。我是新手，我猜我犯了一些愚蠢的错误。请帮帮我。还请告诉我如何删除这些警告

```
#!/usr/bin/env python 

import xmpp 
import hashlib

user="username@gmail.com"
password="password"
server="gmail.com"

jid = xmpp.JID(user) 
connection = xmpp.Client(server,debug=[]) 
connection.connect() 
result = connection.auth(jid.getNode(), password,"LFY-client") 

connection.sendInitPresence() 

while connection.Process(1): 
    pass

The code is giving following error :

/usr/lib/python2.6/dist-packages/xmpp/auth.py:24: DeprecationWarning: the sha module is deprecated; use the hashlib module instead
  import sha,base64,random,dispatcher,re
/usr/lib/python2.6/dist-packages/xmpp/auth.py:26: DeprecationWarning: the md5 module is deprecated; use hashlib instead
  import md5
/usr/lib/python2.6/dist-packages/xmpp/transports.py:308: DeprecationWarning: socket.ssl() is deprecated.  Use ssl.wrap_socket() instead.
  tcpsock._sslObj    = socket.ssl(tcpsock._sock, None, None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:40:54.447

这些是警告而不是错误，它们不是由您的代码引起的，该`xmpp`模块正在使用一些不推荐使用的模块，我建议您升级它。

# c# - 我在哪里可以在这个 C# 语句中添加“Trim”？

> ID：13651867
> 
> 赞同：5
> 
> 时间：2012-11-30T19:32:40.093
> 
> 标签：c#, arrays, string

我被困住了。我在哪里可以在这个 C# 语句中添加“Trim”？每行将是一个单独的文件名。但是因为每个文件后面可能都有空格，所以我想把它剪掉。

```
string[] lines = (File.ReadAllLines(@"C:\Users\Jim\Desktop\adminkeys.cfg")); 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T19:34:05.797

如果您尝试修剪每一行，那么您需要逐行进行，例如，使用 LINQ：

```
string[] lines = (File.ReadAllLines(@"C:\Users\Jim\Desktop\adminkeys.cfg"))
    .Select(l => l.Trim()).ToArray(); 
```

# java - MediaStore.Images.Thumbnails.getThumbnail 返回错误的缩略图而不是 NULL

> ID：13651871
> 
> 赞同：12
> 
> 时间：2012-11-30T19:33:08.337
> 
> 标签：java, android, mediastore, android-cursor, android-cursorloader

考虑如下图所示的场景：

[![原生画廊](../Images/95bfca0871b1238d22d9af8d8d5e127e.png)](https://i.stack.imgur.com/ddk45.png)

三张照片，其中一张是大型 GIF 文件 (3MP)。

我正在查询 MediaStore 以检索相应的缩略图。如果我使用此 sortOrder 通过 CursorLoader 初始化游标：

```
MediaStore.Images.Media.DATE_ADDED + " DESC"" 
```

**会发生什么：** MediaStore 返回上一个成功检索的缩略图：

[![DESC](../Images/b3c552a4b93767826164e069a2d7e3a9.png)](https://i.stack.imgur.com/4uOf7.png)

**预期行为：**当 MediaStore 由于某种原因无法检索给定图像的缩略图时，它必须返回 NULL，根据其 Javadoc：*“...返回一个 Bitmap 实例。如果与 origId 关联的原始图像没有，它可能为 null存在或内存不足。”*

如果我用这个 sortOrder 初始化游标：

```
MediaStore.Images.Media.DATE_ADDED + " ASC"" 
```

它运行得很好：

[![ASC](../Images/8fabbda8da4a2426576b33406bbaad19.png)](https://i.stack.imgur.com/m0BLx.png)

但是我不能简单地更改 sortOrder，因为要求是首先显示最新的图片。

下面是我的示例代码，[这里是完整的示例项目](https://android.googlecode.com/issues/attachment?aid=407140000002&name=GetImageFromMediaStoreExampleProject.zip&token=ABZ6GAcGDf13pp4ktibq2Zw1EkoGpJxieg%3A1489362551677&id=40714&mod_ts_token=ABZ6GAdwzTpYyb6wV8KipxVBat6rbuvG5g%3A1489362551677)以及[用于重现的三个图像](https://android.googlecode.com/issues/attachment?aid=407140000001&name=imagesToReproduceTheIssue.zip&token=ABZ6GAfiJSB12pLeNiC8Nf7H_HBW2TCCQQ%3A1489362551677&id=40714&mod_ts_token=ABZ6GAcCePJNM3_wDBpXptuzQvZHrLqQjw%3A1489362551677)。

```
package com.example.getimagefrommediastore;

import android.app.Activity;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.provider.MediaStore;
import android.support.v4.content.CursorLoader;
import android.widget.ImageView;
import android.widget.TextView;

public class GetThumbnailsFromMediaStoreSampleActivity extends Activity {

TextView mThumb_id_01;
TextView mThumb_id_02;
TextView mThumb_id_03;
ImageView mImg_01;
ImageView mImg_02;
ImageView mImg_03;
boolean isThumb01 = true; // Simple flag to control this example
boolean isThumb02 = true;
Cursor mCursorLoader;
int mColumnIndex;
long mOrigId; // Original image id associated with thumbnail of interest

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Just initializing views
    mThumb_id_01 = (TextView) findViewById(R.id.thumb_id_01);
    mThumb_id_02 = (TextView) findViewById(R.id.thumb_id_02);
    mThumb_id_03 = (TextView) findViewById(R.id.thumb_id_03);
    mImg_01 = (ImageView) findViewById(R.id.thumb_01);
    mImg_02 = (ImageView) findViewById(R.id.thumb_02);
    mImg_03 = (ImageView) findViewById(R.id.thumb_03);

    // Initializing CursorLoader
    mCursorLoader = initializeCursorLoader();
    mColumnIndex = mCursorLoader.getColumnIndex(MediaStore.Images.Media._ID);

    // Go thru all the images in the device (EXTERNAL_CONTENT_URI)
    // In this example there are only three images
    for (int i = 0; i < mCursorLoader.getCount(); i++) {
        mCursorLoader.moveToPosition(i);
        mOrigId = mCursorLoader.getInt(mColumnIndex);

        // Update views
        chooseViewToUpdate();
    }
}

private Cursor initializeCursorLoader() {
    String[] COLUMNS = {
            MediaStore.Images.Thumbnails._ID, MediaStore.Images.Media.DATA
    };

    CursorLoader cursorLoader = new CursorLoader(
    GetThumbnailsFromMediaStoreSampleActivity.this, // Context
    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, // Uri
    COLUMNS, // Projection
    null, // Selection
    null, // Selection Args

    // Sort Order: DESC = newest first
    // Sort Order: ASC = oldest first

    MediaStore.Images.Media.DATE_ADDED + " DESC");

    // *** NOTE ***
    // With:
    //
    // MediaStore.Images.Media.DATE_ADDED + " ASC"
    //
    // It runs just fine (MediaStore returns 'null' for invalid thumbnails)
    // The problem seems to reside on the " DESC" tag.
    //
    // How bizarre is that?

    return cursorLoader.loadInBackground();
}

private void chooseViewToUpdate() {
    if (isThumb01) {
        updateUI(mThumb_id_01, mImg_01);
        isThumb01 = false;
    } else if (isThumb02) {
        updateUI(mThumb_id_02, mImg_02);
        isThumb02 = false;
    } else {
        updateUI(mThumb_id_03, mImg_03);
    }
}

private void updateUI(TextView textView, ImageView imgView) {
    textView.setText("ID:" + String.valueOf(mOrigId));

    Bitmap mediaStoreThumbmail = MediaStore.Images.Thumbnails.getThumbnail(
            this.getContentResolver(),
            mOrigId,
            MediaStore.Images.Thumbnails.MICRO_KIND, null);

    if (mediaStoreThumbmail != null) {
        imgView.setImageBitmap(mediaStoreThumbmail);
    }
} 
```

我错过了什么吗？有谁知道可能出了什么问题？

[无论如何，我填写了一个针对 Android 的错误](http://code.google.com/p/android/issues/detail?id=40714)。

**编辑**

这个问题似乎[在 Lollipop 中得到了解决。](https://code.google.com/p/android/issues/detail?id=40714)（对该线程的最后评论）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-16T05:48:29.937

我只是在这里猜测。当您要求 MICRO_KIND 时，操作系统正在创建一个新图像，该图像将在 DESC 光标上再次生成相同的图像。

一种解决方法是为图像 id 加载一个 ArrayList。然后去寻找从 ArrayList 工作的缩略图。

使用 MINI_KIND 和 bmoptions.inSampleSize = 2; 尝试您的代码的可能性

```
 final BitmapFactory.Options bmOptions = new BitmapFactory.Options();
            bmOptions.inSampleSize =2;

                    Bitmap bm = MediaStore.Images.Thumbnails.getThumbnail(
                            context.getContentResolver(), newImageId,
                            MediaStore.Images.Thumbnails.MINI_KIND,
                            bmOptions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-12T23:42:53.667

三年后，这个问题似乎[在 Lollipop 中得到了解决](https://code.google.com/p/android/issues/detail?id=40714)。（对该线程的最后评论）。
因此，我正在回答我自己的问题。

# map - IE8 的复杂等值线图

> ID：13651872
> 
> 赞同：1
> 
> 时间：2012-11-30T19:33:08.603
> 
> 标签：map, internet-explorer-8, visualization, vml

我正在尝试为美国县设置一个[等值线地图](http://leafletjs.com/examples/choropleth.html)，作为地图服务上的一个图层（例如，使用传单）或作为一个普通的 SVG/VML 图。

问题是：虽然 Chrome 或 Firefox 可以完美地呈现任何一个选项，但 IE8 不能处理这么多的多边形，而且它的加载时间是不可接受的。

在回到生成静态 PNG 服务器端之前，您知道任何可以在 IE8 中生成这种可视化的轻量级组件（不是基于 Flash 的）吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:54:03.583

按照复杂度递增的顺序：

[使用Tableau](http://www.tableausoftware.com/public/blog/2011/04/choropleth-counties)可以非常轻松地创建等值线图。可视化可以导出并进行交互。Tableau 不是免费软件，但您将有一个试用期来试用它。

我们还让[学生使用](http://cs171.org/)[D3](http://blog.visual.ly/how-to-make-choropleth-maps-in-d3/)实现他们的等值线图，并使用 JSON 导入地图。据我所知，这并没有对 IE 造成问题，尽管我没有专门在 IE 上测试它们。

[最后，在我们的一个课程竞赛中获胜的团队使用Processing](http://processing.org/)创建了一张地图（虽然不是等值线，但他们仍然在上面可视化数据）。这通常涉及更多的编码（类似 Java），但可行，您可以在 IE8 浏览器上测试它们的可视化（在[此链接](http://tweetography.herokuapp.com/)- 可视化加载速度非常慢，但这更多是因为它们提取了高音提要而不是地图本身）。

[通常，您可以在此 URL](http://cs171.org/projects/project-list.php)上看到我们学生的可视化，其中一些具有地图可视化 - 您可以在[visualizing.org](http://visualizing.org/)网站上浏览用于 choropleth 地图的技术。

# c# - 如何在 PropertyGrid 中使用 NodaTime 类？

> ID：13651874
> 
> 赞同：5
> 
> 时间：2012-11-30T19:33:19.353
> 
> 标签：c#, .net, propertygrid, nodatime

我正在将一些应用程序代码转换为使用 NodaTime 类而不是 System.DateTime。我的应用程序的一部分使用 PropertyGrid 控件来允许用户编辑包含 LocalDate 和 Instant 的类。在不更改任何内容的情况下，PropertyGrid 可以正常显示属性，但它们不再可编辑。允许用户编辑这些字段的最佳方式是什么。

为了说明起见，我们可以使用这个类作为我想要显示和编辑的事物类型的代表：

```
public class User
{
    public string Name { get; set; }
    public LocalDate BirthDate { get; set; }
    public Instant NextAppointment { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:36:36.260

到目前为止我想出的最好的：

第 1 步：创建 TypeConverter，以便 Noda 类可编辑

```
public class ToAndFromStringTypeConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
            return true;
        else
            return base.CanConvertFrom(context, sourceType);
    }
    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        if (destinationType == typeof(string))
            return true;
        else
            return base.CanConvertTo(context, destinationType);
    }
}

public class LocalDateTypeConverter : ToAndFromStringTypeConverter
{
    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        if (value is string)
        {
            DateTime parsed;
            if (!DateTime.TryParse((string)value, out parsed))
                throw new ArgumentException("Cannot convert '" + (string)value + "' to LocalDate.");
            else
                return new LocalDate(parsed.Year, parsed.Month, parsed.Day);
        }
        else
        {
            return base.ConvertFrom(context, culture, value);
        }
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(string))
        {
            var tvalue = (LocalDate)value;                
            try
            {
                var x = tvalue.ToString("yyyy-MM-dd");
                return x;
            }
            catch (NullReferenceException)
            {
                return "1900-1-1";
            }
            catch
            {
                throw new ArgumentException("Could not convert '" + value.ToString() + "' to LocalDate.");
            }                
        } 
        else 
            return base.ConvertTo(context, culture, value, destinationType);
    }

public class InstantTypeConverter : ToAndFromStringTypeConverter
{
    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        if (value is string)
        {
            try
            {
                DateTime parsed = DateTime.Parse((string)value);
                LocalDateTime dt = LocalDateTime.FromDateTime(parsed);
                Instant i = dt.InZoneLeniently(DateTimeZoneProviders.Default.GetSystemDefault()).ToInstant();
                return i;
            }
            catch
            {
                throw new ArgumentException("Cannot convert '" + (string)value + "' to Instant.");
            }
        }
        else
        {
            return base.ConvertFrom(context, culture, value);
        }
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(string))
        {
            try
            {
                Instant tvalue = (Instant)value;
                LocalDateTime local = tvalue.InZone(DateTimeZoneProviders.Default.GetSystemDefault()).LocalDateTime;
                string output = LocalDateTimePattern.CreateWithInvariantCulture("yyyy-MM-dd HH:mm:ss.FFFFFF").Format(local);
                return output;
            }
            catch
            {
                throw new ArgumentException("Could not convert '" + value.ToString() + "' to LocalDate.");
            }                    
        }
        else
            return base.ConvertTo(context, culture, value, destinationType);
    }
} 
```

第 2 步：注册 TypeConverters

将此代码放在应用程序的顶部：

```
TypeDescriptor.AddAttributes(typeof(LocalDate), new TypeConverterAttribute(typeof(LocalDateTypeConverter)));
TypeDescriptor.AddAttributes(typeof(Instant), new TypeConverterAttribute(typeof(InstantTypeConverter))); 
```

第 3 步：使用自定义集合编辑器处理列表等内容

```
public class NodaCollectionEditor : System.ComponentModel.Design.CollectionEditor
{
    public NodaCollectionEditor(Type collection_type) : base(collection_type) { }

    protected override object CreateInstance(Type itemType)
    {
        if (itemType == typeof(LocalDate))
            return LocalDateHelper.MinValue;
        else 
            return base.CreateInstance(itemType);
    }
} 
```

This can be registered by adding this attribute to any appropriate properties:

```
[System.ComponentModel.Editor(typeof(NodaCollectionEditor),typeof(System.Drawing.Design.UITypeEditor))] 
```

# python - Google Drive SDK Python 快速入门示例

> ID：13651876
> 
> 赞同：3
> 
> 时间：2012-11-30T19:33:30.783
> 
> 标签：python, google-drive-api

当我看到本教程并尝试运行测试代码 Google Drive SDK Python Quickstart Sample

视频： [https ://www.youtube.com/watch?v=zJVCKvXtHtE&list=PL0FA2818902D9D123](https://www.youtube.com/watch?v=zJVCKvXtHtE&list=PL0FA2818902D9D123)

代码： [https ://docs.google.com/document/d/1GD3Ee07QsqxQZ-UDTNIbMqtSu4U_servCeQsd9rCkp8/edit](https://docs.google.com/document/d/1GD3Ee07QsqxQZ-UDTNIbMqtSu4U_servCeQsd9rCkp8/edit)

我收到一个错误，它说“ValueError：redirect_uri 的值不能为无”

我google了一下，无法解决这个问题。我应该修复什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:11:35.767

问题实际上很简单。API 只需要知道如何处理凭据。您会看到已安装的应用程序和 Web 应用程序处理它的方式不同。对于 Web 应用程序，授权会将用户重定向到另一个页面。对于已安装的应用程序，您可能希望获得一个密钥。

因此，如果您使用的是已安装的应用程序，请更改以下代码行。

```
from oauth2client.client import flow_from_clientsecrets

path_to_json="client_secrets.json"    # download from https://code.google.com/apis/console/
AUTH_SCOPE 'https://www.googleapis.com/auth/drive'
#redirect_uri also provided in api console.The other URI mentioned there is for web applications.

flow = flow_from_clientsecrets(Path_to_JSON,AUTH_SCOPE,redirect_uri="urn:ietf:wg:oauth:2.0:oob") 
```

`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T14:58:47.217

我有同样的问题。我的解决方案是在代码中添加**redirect_uri="urn:ietf:wg:oauth:2.0:oob"**。

```
#Before

flow = OAuth2WebServerFlow(CLIENT_ID, CLIENT_SECRET, OAUTH_SCOPE)

#After

flow = OAuth2WebServerFlow(CLIENT_ID, CLIENT_SECRET, OAUTH_SCOPE, redirect_uri="urn:ietf:wg:oauth:2.0:oob") 
```

# c++ - 内存中进程的实际起始地址/Win32 调试 API

> ID：13651878
> 
> 赞同：3
> 
> 时间：2012-11-30T19:33:53.590
> 
> 标签：c++, debugging, winapi, entry-point

起初，我是 C++ 和调试的新手。我使用带有 DEBUG_ONLY_THIS_PROCESS 参数的 CreateProcess api，然后等待 CREATE_PROCESS_DEBUG_EVENT。收到后，我检查 Eip 寄存器以获取该点的地址。我认为这一点是主函数的地址。

为了验证这个想法，我使用 ollydbg 查看 exe 的起始地址。但和我的不一样。我用调试 api 找到的是 0x77a364d8，但 olly 说它是 0x00401000。然后我没有停下来检查olly中的地址0x77a364d8。我找到了地址并在那里设置了一个断点。

然后我重新加载了olly，看到olly首先进入0x77a364d8地址并加载进程，然后进入0x00401000地址并在那里等待。如我所见，0x77a364d8 地址指向一些 ntdll 函数以将进程加载到内存。

如果是真的，我如何通过代码获取 0x00401000 地址（c++，我是新手，请越过 t 的 :)），它是 Main 函数的地址还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:53:04.740

收到后，[`CREATE_PROCESS_DEBUG_EVENT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679302%28v=vs.85%29.aspx)您应该能够访问[`CREATE_PROCESS_DEBUG_INFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679286%28v=vs.85%29.aspx)工会成员。它有一个名为 的成员`lpStartAddress`。

您的调试事件循环应类似于：

```
DWORD dwContinueDebugStatus = DBG_CONTINUE;
while(dwContinueDebugStatus)
{
    DEBUG_EVENT debugEvt;
    WaitForDebugEvent(&debugEvt, INFINITE);
    switch(debugEvt.dwDebugEventCode)
    {
    case CREATE_PROCESS_DEBUG_EVENT:
        // Grab the main thread entry point.
        LPTHREAD_START_ROUTINE exentry = debugEvt.u.CreateProcessInfo.lpStartAddress;
        break;
        /* Handle the rest of your debug events here. */
    }
    ContinueDebugEvent(debugEvt.dwProcessId, debugEvt.dwThreadId, dwContinueDebugStatus);
} 
```

**编辑：** 我忘了提到几件事......

通过这些方式中的任何一种获取入口点都可能是调用您的`main()`. 没有一种可靠的方法可以`main()`在 using 中获取无符号查找`dbghelp.dll`。

此外，John Robbins的《[*调试应用程序》一书中有一章是关于使用一些示例代码创建一个小型调试器。*](https://rads.stackoverflow.com/amzn/click/com/0735608865)这可能是我找到的最好的文档/示例（但我希望它更好）。它可以很便宜，所以它可能值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:49:26.887

入口点（至少通常）不会*与*`main`. 入口点的签名是`void entrypoint(void);`. 这必须检索命令行，将其解析为单独的参数等，以准备调用`main`（并且有一个完全独立的命令行，用于在调用`WinMain`GUI 程序之前检索相当不同的“东西”）。

如果您想要 的实际地址`main`，您可能至少要尝试使用[`SymFromName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681325.aspx)for 名称`_main`和/或`_wmain`（或者，如果您可能正在处理 GUI 程序，`WinMain`/ `wWinmain`）以获取真正属于目标程序的代码，而不是几乎没有人见过的图书馆模块中的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:52:42.820

这都是凭记忆，所以可能包含一些错误。

为了在新进程中找到EXE的入口点地址，需要读取该进程的PEB字段`ImageBaseAddress`。PEB 始终位于固定地址，但这取决于您的 EXE 是 32 位还是 64 位，您必须事先确定（WOW64 有 32 位 PEB，但我认为它可能尚未初始化在那时候）。

请注意，您不能只从 EXE 中获取它，因为它可能会因 ASLR 而被重新定位。一旦你有了这个，你可以使用读取 EXE 的 PE 头并从结构中`ReadProcessMemory`获取`AddressOfEntryPoint`字段。`IMAGE_OPTIONAL_HEADER`这是一个 RVA，所以将它添加到之前找到的基地址，瞧，你有你的入口点地址。

# android - 连接 USB 电缆时获取广播

> ID：13651881
> 
> 赞同：0
> 
> 时间：2012-11-30T19:34:18.823
> 
> 标签：android

> **可能重复：**
> [USB 连接通知](https://stackoverflow.com/questions/5522963/usb-connection-notification)

如果我想为所有 USB 电缆进行广播，在资源 XML 文件和清单中做什么。目前资源 XML 文件是这样的：

```
<resources>
<usb-accessory manufacturer="Acme, Inc" model="Whiz Banger" version="7.0" />
</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:43:17.373

将此添加到您的清单中

```
<receiver android:name=".YourReceiverClassName">
   <intent-filter>
        <action android:name="android.intent.action.UMS_CONNECTED" />
        <action android:name="android.intent.action.UMS_DISCONNECTED" />
   </intent-filter>
</receiver> 
```

将您的接收器类名称中的 onReceive 修改为此

```
public void onReceive(Context context, Intent intent) {

if (intent.getAction().equalsIgnoreCase( "android.intent.action.UMS_CONNECTED"))
{
    Log.d(TAG,"USB connected..");
}

if (intent.getAction().equalsIgnoreCase( "android.intent.action.UMS_DISCONNECTED"))
{
     Log.d(TAG,"USB connected..");
} 
```

}

# java - Primefaces 数据表不起作用

> ID：13651882
> 
> 赞同：1
> 
> 时间：2012-11-30T19:34:24.033
> 
> 标签：java, jsf, primefaces

当我运行下面的代码时，Apache Tomcat Log 说：

`Property 'recuClientes' not found in type com.swc.rc.recu.UtilsRecu`

网页返回`No records found.`

有什么建议吗？

这是电话

```
<p:outputPanel>
    <h:form>  
        <p:dataTable var="rec" value="#{rc.recu}">  
            <p:column headerText="recu">  

                <h:outputText value="#{rec.deudor}" />  

            </p:column>  
        </p:dataTable>  
    </h:form>
</p:outputPanel> 
```

这是源，我可以使用它，不是吗？

```
@XmlTransient
public Collection<Procs> getProcsCollection() {
    return procsCollection;
}

public void setProcsCollection(Collection<Procs> procsCollection) {
    this.procsCollection = procsCollection;
} 
```

这是 managedBean..

```
@ManagedBean(name = "rc")
@SessionScoped
public class UtilsRecu {

    private Clientes cliente=new Clientes();

    private List <Procs> recu=new LinkedList<Procs>(); 

    public void recuClientes(){

        recu=(List<Procs>) cliente.getProcsCollection();

    }        

    public void setRecu(List<Procs> recu) {

        this.recu= recu;
    }

    public List<Procs> getRecu() {
        recuClientes();
        return recu;
    }

} 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:55:20.167

您面临的异常不是由目前显示的 Facelets 代码引起的。`#{rc.recuClientes}`它是由同一页面中其他地方的错误使用引起的。也许你已经把它放在模板文本中，像这样

```
#{rc.recuClientes} 
```

并希望它会在加载时执行该方法。但它不是那样工作的。它将被解释为一个值表达式，因此它会寻找一个 getter 方法`getRecuClientes()`，该方法返回一些内容，然后可以打印到输出中。但是由于不存在这样的 getter 方法，因此将抛出您所面临的“未找到属性”异常。

鉴于此方法执行一些业务逻辑（填充列表），它应该由一些操作组件调用，例如`<h:commandButton>`.

```
<h:form>
    <h:commandButton value="Submit" action="#{rc.recuClientes}" />
</h:form> 
```

或者，如果您打算在初始 GET 请求期间调用它，则只需对其进行注释，`@PostConstruct`而无需在视图中的任何位置引用它。

```
@PostConstruct
public void recuClientes() {
    recu = (List<Procs>) cliente.getProcsCollection();
} 
```

这样在 bean 构建后会直接调用它。

顺便说一句，这种演员阵容是一种代码味道。在精心设计的代码中，您不应该在这个特定的构造中需要这种转换。

# eclipse - 如何防止在 Eclipse RCP 应用程序上重复执行键绑定

> ID：13651885
> 
> 赞同：1
> 
> 时间：2012-11-30T19:34:30.400
> 
> 标签：eclipse, rcp, key-bindings

我需要防止我的应用程序在用户持有触发序列时，在该操作与按键出价相关联时一遍又一遍地执行相同的操作。

我需要模拟实现 KeyListener#keyReleased 可以实现的相同行为，并仅在用户释放序列时执行相关操作。

有没有办法做到这一点？

# parsing - 在 OCaml 中构建 AST

> ID：13651889
> 
> 赞同：6
> 
> 时间：2012-11-30T19:34:49.353
> 
> 标签：parsing, ocaml, grammar

我正在使用 OCaml 为 Scheme 的子集构建递归下降解析器。这是语法：

```
 S -> a|b|c|(T)
    T -> ST | Epsilon 
```

所以说我有：

```
 type expr = 
       Num of int | String of string | Tuple of expr * expr 
```

**伪代码**

这些函数必须返回 expr 类型来构建 AST

```
parseS  lr =
   if head matches '(' then
     parseL lr
   else
     match tokens a, b, or c 
```

使用第一组 S，它们是令牌和 '('：

```
parseL lr = 
   if head matches '(' or the tokens then
       Tuple (parseS lr, parseL lr)
  else
       match Epsilon 
```

我的问题是“我如何返回 Epsilon 部分，因为我无法返回 ()？”。OCaml 函数需要相同的返回类型，即使我将 Epsilon 部分留空，OCaml 仍然采用单位类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T20:06:53.037

据我所知，您的 AST 与您的语法不符。

您可以通过在 AST 类型中使用一个专门的空节点来表示语法中的 Epsilon 来解决问题。

或者，您可以更改语法以排除 Epsilon。

这是一个没有 Epsilon 的等效语法：

```
S -> a|b|c|()|(T)
T -> S | S T 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T19:45:27.557

也许与其手动创建解析器函数，不如使用现有的方法：例如，基于 LALR(1) [ocamlyacc](http://plus.kaist.ac.kr/~shoh/ocaml/ocamllex-ocamlyacc/ocamlyacc-tutorial/)或 camlp4 的 LL(k)[解析器](http://www.ffconsultancy.com/ocaml/benefits/parsing.html)？

# android - Android：从 URL 启动时加载图像

> ID：13651891
> 
> 赞同：0
> 
> 时间：2012-11-30T19:35:00.973
> 
> 标签：android, url, image-load

我是一名学习者，一直在开发一个家庭访问者应用程序，以从访问者的 URL 获取图像。使用我在网上找到的以下代码，我能够通过在屏幕前添加一个意图并在屏幕上添加一个显示“查看访客图像”的按钮来加载图像，但现在我希望我的图像应该在应用程序后立即加载发射。我可以做些什么改变来做到这一点？谢谢你的帮助。

```
OnClickListener getImageBtnOnClick = new OnClickListener() {
    public void onClick(View view) {
        Context context = view.getContext();
        Editable ed = inputUrl.getText();
        Drawable image = ImageOperations(context,ed.toString(),"image.jpg");
        ImageView imgView = new ImageView(context);
        imgView = (ImageView)findViewById(R.id.image1);
        imgView.setImageDrawable(image);
    }
};

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    inputUrl = ((EditText)findViewById(R.id.imageUrl));
    inputUrl.setSingleLine();
    inputUrl.setTextSize(11);
    Button getImageButton = (Button)findViewById(R.id.getImageButton);
    getImageButton.setOnClickListener(getImageBtnOnClick);

}   

private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}

public Object fetch(String address) throws MalformedURLException,IOException {
    URL url = new URL(address);
    Object content = url.getContent();
    return content;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:31:12.053

您可以使用 SmartImageView，它是 Android 标准 ImageView 的替代品，它还允许从 URL 或用户的联系人地址簿加载图像。图像缓存到内存和磁盘以实现超快速加载。

[https://github.com/loopj/android-smart-image-view](https://github.com/loopj/android-smart-image-view)

或者在您的活动的 OnResume 上开始下载图像形式的 url，就像您现在在单独线程中的按钮的单击侦听器中所做的那样，以避免阻塞主 UI 线程。完成下载后，您可以使用工作线程中的处理程序更新图像视图。

您也可以使用异步任务，而不是创建自己的线程和处理程序来更新 UI。有关异步任务的更多信息，请参阅以下链接[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# c# - radcharview在主题化后失去了所有颜色

> ID：13651896
> 
> 赞同：1
> 
> 时间：2012-11-30T19:35:16.917
> 
> 标签：c#, telerik

我像这样为我的应用程序设置了主题 office2007Black

```
private void MainWindow_Load(object sender, EventArgs e)
{
   ThemeResolutionService.ApplicationThemeName = "Office2007Black";
} 
```

但在此之后，我在此应用程序的另一种形式中的 radchartview 失去了所有颜色（线系列已变为全灰色）。我已经设置`this.radChartView1.EnableTheming = false;`，但它没有帮助。如何在不删除主题的情况下返回（或设置）线条颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:03:31.443

相反，尝试这样的事情：

```
public partial class MainWindow : RadRibbonWindow
{
    static MainWindow()
    {
        RadRibbonWindow.IsWindowsThemeEnabled = false;
    }
    public MainWindow()
    {
        StyleManager.ApplicationTheme = new Office_BlackTheme();
        InitializeComponent();
    }
} 
```

请参阅此文档：[RadWindow](http://www.telerik.com/help/wpf/radribbonview-ribbon-window-wpf.html)

# php - 编写 PHP 以使用循环在文本文件中查找单词

> ID：13651898
> 
> 赞同：0
> 
> 时间：2012-11-30T19:35:44.567
> 
> 标签：php

编写 PHP 脚本以在文本文件（标题为 a.txt）中搜索单词。文本文件包含 50 个单词，每个单词占 1 行。在 JavaScript 端，客户端在文本字段中键入一个随机单词并提交该单词。PHP 脚本使用循环搜索这 50 个单词以找到正确的单词，该循环一直运行直到在 a`.txt`文件中找到该单词。如果找不到该词，则必须出现一条错误消息，指出该词不在列表中。

JavaScript 部分是正确的，但我在使用 PHP 时遇到了问题：

```
$file = fopen("a.txt","r") or die("File does not exist in the current folder.");
$s = $_POST["lname"];
$x = file_get_contents("a.txt");
$a = trim($x);
if(strcmp($s, $a) == 0)
print("<h1>" . $_POST["lname"] . " is in the list</h1>");
else
print("<h1>" . $_POST["lname"] . " is not in the list</h1>");
fclose($file);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:40:50.153

如果它只有 50 个单词，那么只需用它制作一个数组并检查它是否在数组中。

```
$file = file_get_contents('a.txt');
$split = explode("\n", $file);

if(in_array($_POST["lname"], $split))
{
    echo "It's here!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:43:23.053

```
function is_in_file($lname) {
    $fp = @fopen($filename, 'r'); 
    if ($fp) { 
        $array = explode("\n", fread($fp, filesize($filename))); 
        foreach ($array as $word) {
            if ($word == $lname)
                return True;
        }
    }
    return False;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:44:53.617

您没有在代码中搜索“单词”，但也许下面的代码会对您有所帮助

```
$array = explode("\n",$string_obtained_from_the_file);
foreach ($array as $value) {
    if ($value== "WORD"){
      //code to say it has ben founded
    }
}
//code to say it hasn't been founded 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:55:50.063

这是一些花哨的正则表达式:)

```
$s = $_POST["lname"];
$x = file_get_contents("a.txt");

if(preg_match('/^' . $s . '$/im', $x) === true){
    // word found do what you want
}else{
    // word not found, error
} 
```

如果您不希望搜索不区分大小写 ，请删除`i`from那里告诉解析器匹配行尾，所以这是有效的。`'$/im'`
`m``^$`

这是一个工作示例：http: [//ideone.com/LmgksA](http://ideone.com/LmgksA)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T19:56:05.823

如果您正在寻找的只是快速存在检查，您实际上不需要将文件分解成一个数组。

```
$file = fopen("a.txt","r") or die("File does not exist in the current folder.");
$s = $_POST["lname"];
$x = file_get_contents("a.txt");

if(preg_match("/\b".$s."\b/", $x)){
    echo "word exists";
} else {
    echo "word does not exists";
} 
```

这匹配字符串中的任何单词标记。

# .net - 从 .Net 应用程序发送 SMS（文本）消息

> ID：13651899
> 
> 赞同：2
> 
> 时间：2012-11-30T19:35:47.750
> 
> 标签：.net, sms, messages

我想知道是否有人曾经从网站设置过短信，该网站是.Net。

唯一的要求似乎是，最终用户不需要列出他们的提供商，只需列出他们的手机号码。

我研究了一些第三方供应商，它们每条文本收取几美分，但如果可能的话，我想避免这种情况。

是否可以在不以某种方式将手机插入服务器的情况下从 .Net 应用程序发送短信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:53:31.757

几乎所有提供商都能够通过电子邮件接受 SMS 文本。我不知道您将如何在不了解提供者的情况下解决问题 - 有一些第三方网站会进行反向提供者查找，但上帝知道这些网站有多么狡猾。

我认为没有任何免费的 SMS 网关。它们复杂且维护成本高。:(

这是一个列表：[http ://en.wikipedia.org/wiki/List_of_SMS_gateways](http://en.wikipedia.org/wiki/List_of_SMS_gateways)

# iphone - Iphone 蓝牙连接到非 IOS 设备

> ID：13651906
> 
> 赞同：3
> 
> 时间：2012-11-30T19:36:00.267
> 
> 标签：iphone, objective-c, bluetooth

我一直在考虑为我的 iphone 应用程序添加一个支持蓝牙设备输入的功能。根据我在研究中的发现，大多数人都指向使用`GameKit FrameWork`. 这里的问题是它似乎只支持 Iphone -> Iphone 连接。

我看到的大多数文档或问题都在 1-2 岁之间，也许已经发布了其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:27:04.320

您是否检查过 Apple的[核心蓝牙框架？](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html#//apple_ref/doc/uid/TP40011295)它适用于 iOS 5+

# c# - 类似于 C# 的 BeautifulSoup

> ID：13651909
> 
> 赞同：13
> 
> 时间：2012-11-30T19:36:11.110
> 
> 标签：c#, python, beautifulsoup

有没有类似的库`BeautifulSoup`for `C#`？

我想简单地解析 HTML 和 XML，特别是有错误的 HTML。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T19:58:22.443

我过去使用[HTMLAgilityPack](http://html-agility-pack.net/?z=codeplex)取得了一些成功，但它在解析格式错误的 HTML 或缺少结束标签时遇到了一些问题。不过那是大约 2 年前的事了。

我通常倾向于使用[SGMLReader](http://developer.mindtouch.com/SgmlReader)，它允许您使用 XML Reader 包装它，因此您可以轻松地在 C# 中使用 XDocument 或 XmlDocument 来读取 HTML。SGMLReader 已经处理了我扔给它的所有格式错误的 HTML。

# xna - 距离雾 XNA 4.0

> ID：13651913
> 
> 赞同：1
> 
> 时间：2012-11-30T19:36:19.167
> 
> 标签：xna, xna-4.0

我一直在从事一个有助于在笔记本电脑和/或台式机上创建虚拟现实体验的项目。我在 Visual Studio 2010 上使用 XNA 4.0。当前场景如下所示。我已经通过 kinect 连接了一个人头部的运动。因此，如果该人的头部相对于笔记本电脑向右移动，则图像中看到的场景会向左旋转，从而产生虚拟旅行的效果，或者就像透过窗户观看一样。

为了增强视觉吸引力，我想在背板上添加一个黑暗。就像盒子看起来好像是一个隧道。

盒子是用三角条制成的。用于盒子平面的 BasicEffect 称为效果。

```
effect.VertexColorEnabled = true;
        effect.EnableDefaultLighting();
        effect.FogEnabled = true;
        effect.FogStart = 35.0f;
        effect.FogEnd = 100.0f;
        effect.FogColor = new Vector3(0.0f, 0.0f, 0.0f);
        effect.World = world;
        effect.View = cam.view;
        effect.Projection = cam.projection; 
```

![场景](../Images/132f3a06aea993404d73803676d99591.png)

在编译错误是关于一些法线。我不知道他们是什么意思。我已经足够努力地挖掘互联网了。（我最初的印象是在盒子的背面放了一个黑色的泛光灯）。

错误附在下面： ![错误](../Images/57f160e4293e03fdd6f4af9b1dbe4103.png)

'verts' 是用于构建盒子的 VertexPositionColor [][]。

我该如何解决这个错误？方法/方法是否正确？

欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:10:45.477

你的 Vertex 有 Position 和 Color 通道，但是没有法线......所以你必须提供 vertex 有它。

如果您不需要颜色，则可以使用 VertexPostionNormalTexture，或者构建一个提供法线的自定义结构......

这是您的自定义实现：[VertexPositionNormalColor](https://www.assembla.com/code/lazlo/subversion/nodes/Xna/VertexPositionNormalColor.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:36:53.530

您需要将法线（vector3）添加到您的顶点类型。

此外，如果您想要距离雾，则必须编写自己的着色器，因为 BasicEffect 仅实现深度雾（虽然看起来不太好但速度更快）

# vim - Vim 和 Emacs 之间的曝光差异

> ID：13651914
> 
> 赞同：6
> 
> 时间：2012-11-30T19:36:25.093
> 
> 标签：vim, emacs, color-scheme

我知道已经有过多的 Vim/Emacs 和 Solarized 问题，所以我有点犹豫要不要再添加一个，但我似乎找不到任何可以解决这个确切问题的问题。

问题是当两个编辑器都设置为使用 solarized-dark 主题时，同一个文件在 Vim 中与在 Emacs 中看起来非常不同。我无法弄清楚这是 Solarized 的问题还是仅仅是 Vim 和 Emacs 之间的根本区别。

这是我正在使用的内容：

*   [Crunchbang Linux](http://crunchbang.org/)
*   rxvt-unicode-256color 使用[solarized-xresources](https://github.com/altercation/solarized/blob/master/xresources-colors-solarized/Xresources)
*   Tmux`default-terminal`设置为`screen-256color`
*   Vim 7.3 使用[这个晒黑的主题](https://github.com/altercation/vim-colors-solarized)
*   Emacs 24.3 使用[这个 solarized-dark 主题](https://github.com/sellout/emacs-color-theme-solarized)

为了让 Emacs 正确显示背景颜色，我必须明确地将 TERM 设置为`xterm-16color`. `-nw`但是，无论我是在终端中运行编辑器还是在它们各自的 GUI（没有标志的 gvim 和 emacs）中运行编辑器，颜色看起来都完全相同。

这是一个截图，左边是 Vim，右边是 Emacs：

![在此处输入图像描述](../Images/af7cfb2516d94e1601718f07ba6fc48a.png) [大版本](https://i.imgur.com/xQ0gz.png)

最终，我想让 Emacs 颜色看起来与 Vim 颜色完全一样。这可能吗？如果是这样，是否需要调整 Emacs 版本的配色方案？或者，这只是两个无法更改的编辑器之间的根本区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:55:58.400

使用相同的*Solarized*色彩方案，您将在两个编辑器中获得相同的调色板（即一组选定的颜色）。仍然不同的是编辑器如何解析文件类型的语法（即检测到多少不同的语法元素），以及如何将解析的语法元素分组以突出显示组。

Vim（我不能代表 Emacs）使用特定于文件类型的语法组（例如`vimCommand`），然后将其链接到一组固定的高亮定义（`Statement`在本例中）。颜色方案为这些定义提供颜色；可以在以下位置找到约定`:help group-name`（但并非每个语法定义都必须完全遵守它们）。

这对你意味着什么？您可以比较差异并（在 Vim 中）通过`:hi link ...`命令自定义映射，但这对于您使用的每种文件类型来说都是很多工作。它仍然取决于解析的工作方式。我猜你最终会决定选择一个编辑器。与此同时，我不会为这些差异而烦恼太多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T00:16:07.970

我不是用 Ruby 编写的，但我从 Emacs 处理这种情况的一般方法是：

*   将点移动到您认为未正确绘制的单词，然后`M-x``customize-face`这将使用点下的面部名称自动填充迷你缓冲区，一旦按下`RET`将打开一个自定义缓冲区，您可以在其中更改面部的渲染方式。看起来至少可以通过这种方式消除一些差异。

*   主要编辑模式通常将面孔（通常来自字体锁定变体）与目标语言中的某个词汇组相关联。您需要调查哪些选项以及 Ruby 模式如何准确地将面分配给语言的语法元素。可能对人脸的全局调整过于极端（可能也会影响其他模式），因此如果您可以调整 Ruby 模式，仅将不同的语法组与不修改人脸的人脸相关联，这将是首选。

*   您可以调查装饰水平。通常 Emacs 中的语言模式使用字体锁定模式来绘制文本，某些模式提供或多或少的颜色，具体取决于级别。更多信息在这里：[http ://www.gnu.org/software/emacs/manual/html_node/elisp/Levels-of-Font-Lock.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Levels-of-Font-Lock.html)

*   也有可能 Ruby 模式最初不强调您想要强调的某些字符（数字符号和引号）。如果这不能通过调整语法元素与面孔的关联而不是通过装饰级别来实现，那么您可以尝试向字体锁定模式添加更多关键字，如下所述：[http ://www.gnu.org/software/emacs /manual/html_node/emacs/Font-Lock.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Font-Lock.html)

*   看起来您还想以某种方式显示空白字符[http://emacswiki.org/emacs/ShowWhiteSpace#toc7](http://emacswiki.org/emacs/ShowWhiteSpace#toc7)这里有一些关于如何做到这一点的信息，它还有关于显示最大行长的边距的信息。

*   `M-x``linum`您可以使用命令切换行号的显示。

PS。还要注意 GUI 版本和终端版本可能有不同的配色方案。终端版本可能总体上使用较少的颜色，并且通常会争取更高的对比度，然后是 GUI。

# java - Hibernate 继承表相互引用

> ID：13651919
> 
> 赞同：0
> 
> 时间：2012-11-30T19:36:35.580
> 
> 标签：java, hibernate, hibernate-annotations

我正在使用hibernate，在我的数据模型中，我在两个不同的地方使用Hibernate.Inheritence Single-Table，但是当它们相互反应时会出现问题。让我试着用这个例子来简化一下。

基本上发生的事情是当我执行 letter.setWord(word) 然后保存它时，单词没有对字母的引用。根据我对mappedBy的理解，您不必在两端显式设置和保存它吗？当我查看数据库时，该字段正在使用它所引用的 Word 的 guid 正确设置。难道我做错了什么？

旁注：我在 getter 上有注释的原因是，如果将它们直接放在全局变量上，hibernate 根本不会拾取它们。（我在从 Letter 扩展的类上没有设置主键错误）。hibernate 不处理多个相互引用的继承表吗？当我只有一个继承表时，一切都可以直接在全局变量上使用注释。

谢谢，迈克

```
@Entity
@Table(name="Letter")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(
    name = "LETTER_TYPE",  
    discriminatorType=DiscriminatorType.STRING)
public abstract class Letter {

   private String id;

   private String value;

   private Word word;

   @Id
   @GeneratedValue(generator = "uuid")
   @GenericGenerator(name = "uuid", strategy = "org.hibernate.id.UUIDHexGenerator")
   @Access(AccessType.PROPERTY)
   public String getId() {
       return id;
   }

   @Column(name = "VALUE")
   @Access(AccessType.PROPERTY)
   public String getValue() {
         return value;
   }

   @ManyToOne
   @JoinColumn(name = "WORD_ID")
   @Access(AccessType.PROPERTY)
   public Word getWord() {
        return word;
   }

          ********BASIC SETTERS WITH NO ANNOTATIONS********
} 
```

* * *

```
 @Entity
@Table(name="Word")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(
    name = "WORD_TYPE",  
    discriminatorType=DiscriminatorType.STRING)
public abstract class Word {

   private String value;

   private List<Letter> letters;

   private String id;

   @Id
   @GeneratedValue(generator = "uuid")
   @GenericGenerator(name = "uuid", strategy = "org.hibernate.id.UUIDHexGenerator")
   @Access(AccessType.PROPERTY)
   public String getId() {
       return id;
   }

   @Column(name = "VALUE")
   @Access(AccessType.PROPERTY)
   public String getValue() {
         return value;
   }

  @OneToMany(mappedBy="word")
  @Cascade({CascadeType.ALL})
  @Access(AccessType.PROPERTY)
   public List<Letter> getLetters() {
        return letters;
   }

        ***************BASIC SETTERS WITH NO ANNOTATIONS**********
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:52:41.727

您的理解是错误的，您有责任维护您修改的实体的正确记忆状态。Hibernate 不会自动将新对象添加到另一端的内存中实体。

# php - 无法使用 PHP 变量设置 $_SESSION 变量

> ID：13651920
> 
> 赞同：0
> 
> 时间：2012-11-30T19:36:37.613
> 
> 标签：php

这是我设置会话变量的地方。

```
function validateUser()
{
session_regenerate_id (); //this is a security measure
$_SESSION['user'] = $_POST['username'];
$_SESSION['valid'] = 1;
$_SESSION['firstname'] = $firstname;
$_SESSION['lastname'] = $lastname;
} 
```

这就是 print_r ($_SESSSION) 的回声。

```
Array ( [user] => aboshart [valid] => 1 [firstname] => [lastname] => ) 
```

如果我回显 $firstname 和 $lastname 我会得到正确的值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:38:49.180

您没有将 $firstname 或 $lastname 传递给函数。

```
function validateUser($firstname, $lastname)
{
    session_regenerate_id (); //this is a security measure
    $_SESSION['user'] = $_POST['username'];
    $_SESSION['valid'] = 1;
    $_SESSION['firstname'] = $firstname;
    $_SESSION['lastname'] = $lastname;
} 
```

$_POST 和 $_SESSION 应该在范围内，但其他不在

# ruby-on-rails - RGeo 投影缓冲区多边形太小

> ID：13651923
> 
> 赞同：5
> 
> 时间：2012-11-30T19:36:49.230
> 
> 标签：ruby-on-rails, gis, postgis, rgeo

我有一个使用带有 proj4 支持的 rgeo 0.3.19 的 rails 应用程序，它使用 rgeo-activerecord 0.4.5 gem 连接到 PostGIS 1.5 数据库。

我的应用程序有一个名为 Region 的模型，其中包含一个地理点、一个半径和一个多边形形状。当一个新区域即将保存时，它使用该区域的 geofactory 的缓冲区函数使用半径和地理点创建一个多边形。

这是用于区域模型的 geofactory

```
GEOFACTORY = RGeo::Geographic.projected_factory(:buffer_resolution => 8, :projection_proj4 => '+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs', :projection_srid => 3857) 
```

我正在使用的 projection_srid 是 Apple 和 Google 映射的墨卡托投影 3857。问题是正在创建的缓冲区与我在苹果地图或谷歌地图中绘制的缓冲区大小不同。例如，如果我使用内置的 MapKit 函数 MKCircle

```
[MKCircle circleWithCenterCoordinate:self.coordinate radius:50]; 
```

圆圈将像这样绘制和覆盖。 ![iOS 绘图半径](../Images/168e6573512a2ad84b005d2c8fbb01ac.png)

但是，如果我从构成数据库中多边形形状的缓冲区函数中获取创建的坐标并将它们绘制在谷歌地图上，我就会得到这个。

![谷歌地图半径](../Images/283cba1283337a80912a06ea9da541fd.png)

如您所见，使用相同投影系统创建的多边形比应有的要小。根据定义的半径大小，这个问题会以指数方式失控。我还尝试使用 RGeo 中定义的 simple_mercator 工厂，它产生了相同的结果。

希望有人对为什么在缓冲经度、纬度投影点时会创建大小不正确的多边形有所了解。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T06:54:04.120

您在这里观察到的是墨卡托失真。除非您在赤道，否则墨卡托投影中的“50”距离并不对应于真实行星表面上的 50 米。

您的 iOS 地图绘制的圆圈是正确的：半径为 50 米。我怀疑您为创建第二张图像所做的是将点投影到墨卡托投影中（根据您提供的 Proj4）。然后您继续在投影坐标系中创建半径为 50 的缓冲区。然而，纬度 40.61 的 50 个墨卡托单位仅对应于地球表面距离的约 37.96 米。因此，当您将该多边形投影回纬度和经度并绘制它时，这就是您所看到的：一个 38 米的圆圈。

一种可视化的方法是在谷歌地图上查看完整的世界地图。在赤道处画一个半径为 50 像素的圆。然后在格陵兰岛再画一个半径为 50 像素的圆。在地图上（在墨卡托坐标中），这些圆圈的大小相同。但是，如果您知道您的墨卡托投影，就会知道它会扭曲格陵兰岛，因为格陵兰岛远离赤道，因此您在格陵兰岛上方的圆圈实际上比赤道上方的圆圈要小得多。在纬度 40 度处，失真没有那么严重，但仍然存在。

如果你想纠正这个，这很容易。墨卡托投影造成的尺寸变形与纬度的割线成正比。也就是说，赤道上的 50 个墨卡托单位等于 50 米，但纬度 x（以弧度为单位）的 50 个墨卡托单位对应于 50 / sec(x) 米。因此，如果您想要 50 米的半径，请将 50 乘以 sec（纬度），然后将该数字用作墨卡托坐标中的半径。在 RGeo 中：

```
p_lonlat = GEOFACTORY.point(40.610355377197266, -75.38220214843749)
p_proj = p_lonlat.projection
buf_proj = p_proj.buffer(50.0 * (1 / Math.cos(p_lonlat.y / 180.0 * Math::PI)))
buf_lonlat = GEOFACTORY.unproject(buf_proj) 
```

# jquery-ui - jQuery 重新加载日期选择器不适用于 Chrome，但它适用于 Firefox

> ID：13651932
> 
> 赞同：1
> 
> 时间：2012-11-30T19:37:37.517
> 
> 标签：jquery-ui, google-chrome, jquery, datepicker

我正在实现一个 jquery datepicker。当我重新加载 datepicker 在 fireFox 上工作正常但我无法让它在 chrome 上工作时。

```
 $('#startDate').datepicker("change", {
            beforeShowDay: function(date){

                return disableRangeOfDays(date, datesWithMyList);
            }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:16:31.293

我发现了这个问题。在 chrome 时区中，当与 firefox 比较时，日期的日期是不同的，这导致 datepicker 永远不会启用列出的日期。而不是创建对象 Date=new Date(myDate);

我正在解析日期：

```
function disableRangeOfDays(date, datesWithMyList){
for (var i = 0; i < datesWithMyList.length; i++) {
        var parsedDate = $.datepicker.parseDate('yy-mm-dd', datesWithMyList[i]);
        if (date.getDate() === parsedDate.getDate() && date.getMonth() === parsedDate.getMonth() && date.getFullYear() === parsedDate.getFullYear()) {
            return [true];
        }
    }

return [false]; 
```

}

# python - 如何在 Flask 中创建一个忽略静态文件的包罗万象的 URL 路由？

> ID：13651934
> 
> 赞同：3
> 
> 时间：2012-11-30T19:37:54.713
> 
> 标签：python, flask

如何使用忽略静态文件的 Flask 创建一个包罗万象的 url 路由`favicon.ico`和`image.png`？

例子：

*   我想抓住`/bZdFFek`并忽略`/favicon.ico`。
*   我想抓住`/of9WfXz`并忽略`/style.css`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:15:26.800

[Flask](http://flask.pocoo.org/docs/design/#the-routing-system) / [Werkzeug](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Map)通常会做正确的事情。路由按复杂程度排序，因此最不复杂的路由（如“/favicon.ico”）应*始终*匹配在全部路由之前：

```
@app.route("/<short_id>")
def view_data(short_id):
    return "You are viewing short ID: {}".format(short_id)

@app.route("/favicon.ico")
def favicon():
    return send_static_file(FAVICON_PATH) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:30:10.323

我认为最好的方法是在路由参数中使用正则表达式。This answer to another question有一个很好的例子说明如何做到这一点：[https ://stackoverflow.com/a/5872904/64266](https://stackoverflow.com/a/5872904/64266)

# visual-studio-2010 - 无法使用 Visual Studio 调试 NUnit 测试

> ID：13651937
> 
> 赞同：3
> 
> 时间：2012-11-30T19:38:10.323
> 
> 标签：visual-studio-2010, visual-studio, unit-testing, nunit

尝试在 VS2010 中调试 NUnit 测试并且没有在断点处停止。上次我尝试需要调试测试时（可能是 1 年前）它正在工作，但现在它不起作用。

我尝试了以下方法：

*   [如何使用 vs.net 2008 和 nunit 进行调试？](https://stackoverflow.com/questions/9202369/how-to-debug-with-vs-net-2008-and-nunit)

*   [http://erraticdev.blogspot.com/2012/01/running-or-debugging-nunit-tests-from.html](http://erraticdev.blogspot.com/2012/01/running-or-debugging-nunit-tests-from.html)

我试过附加，重新检查我的安装，更新配置文件，所以它使用 4.0 运行时，仍然没有命中断点。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-22T12:29:30.543

这是一个早该提出的问题，但我还没有看到直接在 Visual Studio 中调试 NUnit 测试的解决方案。这很容易实现，无需任何第三方工具。您所要做的就是配置您的测试项目（这只是一个普通的旧类库项目），以便在您点击`F5`或`Ctrl-F5`（仅运行，无需调试）时启动 NUnit 测试运行程序。

特别是你必须配置你的项目属性来启动一个外部程序：

![项目配置](../Images/73d327e4c28170d92cd477ebf51950e1.png)

逐步配置在[这篇博文](http://erraticdev.blogspot.com/2012/01/running-or-debugging-nunit-tests-from.html)中有很好的描述。它建议您在尝试运行库项目时使用 NuGet 获取 NUnit 测试运行程序并配置项目以执行运行程序。就如此容易。不使用通常不是免费的**特定工具。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-14T14:29:03.803

您只能在 VS Studio 社区版本中调试 nunit 测试。为此，您需要安装`Nunit3testAdpter`. 您可以在工具 -> 扩展和更新中添加它。或来自 Nuget 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-06T12:13:49.760

发生这种情况的原因有多种。如果您的应用程序的目标框架与 NUnit 的不同，那么您将无法调试，因为测试实际上是由 nunit-agent.exe 运行的。

对我来说，我的应用程序使用的是 4.5，但 NUnit 使用的是 3.5。（您可以从 NUnit GUI 应用程序之一 -> 帮助 -> 关于中找到它）

要解决此问题，请将 nunit.exe.config 文件更改为在配置部分中包含以下内容：

```
<startup>
  <requiredRuntime version="4.0.30319" />
</startup> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-14T00:40:11.500

当您的 PDB 生成设置为`embedded`. 将其切换到`full`将允许 nunit 测试适配器从附加的调试器开始。此时可以切换回`embedded`它，它将再次调试。

该设置位于项目属性页面的“构建”选项卡中，然后单击“高级”按钮。我总是在顶部选择“所有配置”，因此我确保在构建发布配置程序集时也发出有用的 PDB（或嵌入信息）。 [![在此处输入图像描述](../Images/9c12c6d7f47e679151ad790e54a11091.png)](https://i.stack.imgur.com/UVc38.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T20:27:57.957

前几天我在 NUnit 调试中没有遇到断点。我花了一段时间才意识到有人将测试复制/粘贴到不同的文件中，而我运行的测试与断点所在的测试不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-02T14:54:28.193

我最近遇到了类似的问题。将项目平台更改为 AnyCPU 为我解决了这个问题。也值得检查：

1) 检查 NUnit 的最新版本（我使用的是 2.5.7，更新到 2.6.2） 2) 测试项目的目标框架。我使用的是 .NET 4.0（您可以在 VS2010 上的属性 -> 应用程序下找到它）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-02T15:21:33.787

至少到 vs2010 调试器只能调试 32 位应用程序，但不能调试 64 位应用程序。

对于 vs2010，我使用的是**32 位 nunit.exe 版本**并使用“附加到调试器”。这对我很有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-28T10:11:47.517

请升级 NUnit 测试扩展并关闭 Visual Studio，以便 Visx（可能是拼写）运行并更新 NUnit 工具。在此之后，您可以打开您的项目并运行 NUnit 测试项目。它会运行。我测试准确。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-08-02T23:04:56.533

尝试将测试更改为 x64。从菜单做

`Test`-> `Test Settings`-> `Default Processor Architecture`-> `x64`。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-12-03T08:30:21.603

我想你不能用 Visual Studio 调试。最好安装 TestDriven.NET。

然后

1.  将 BreakPoint 放在测试方法上
2.  右键单击测试方法。
3.  选择TestWith->调试器

# php - 获取包含最新嵌套对象的前 5 个文档

> ID：13651941
> 
> 赞同：2
> 
> 时间：2012-11-30T19:38:36.460
> 
> 标签：php, mongodb

我在 MongoDB 中有以下数据结构：

```
{ "_id" : ObjectId( "xy" ),
  "litter" : [ 
    { "puppy_name" : "Tom",
      "birth_timestamp" : 1353963728 }, 
    { "puppy_name" : "Ann",
      "birth_timestamp" : 1353963997 }
   ]
} 
```

我有很多这样的“垃圾”文件，里面有不同数量的小狗。时间戳数字越高，小狗越年轻（=出生较晚）。

我想做的是从所有垃圾文件的集合中检索五只最年轻的小狗。

我尝试了一些东西

```
find().sort('litter.birth_timestamp' : -1).limit(5) 
```

获取拥有最小幼犬的五窝幼犬，然后在 PHP 脚本中从每窝幼犬中提取最年轻的幼犬。

但我不确定这是否能正常工作。关于如何正确执行此操作的任何想法（不更改数据结构）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:22:58.377

您可以使用 MongoDB 2.2 中的新[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)来实现此目的：

```
<?php
    $m = new Mongo();
    $collection = $m->selectDB("test")->selectCollection("puppies");

    $pipeline = array(

        // Create a document stream (one per puppy)
        array('$unwind' => '$litter'),

        // Sort by birthdate descending
        array('$sort' => array (
            'litter.birth_timestamp' => -1
        )),

        // Limit to 5 results
        array('$limit' => 5)
    );

    $results = $collection->aggregate($pipeline);
    var_dump($results);
?> 
```

# recursion - 如何防止序言中没有？

> ID：13651942
> 
> 赞同：1
> 
> 时间：2012-11-30T19:38:37.810
> 
> 标签：recursion, lambda, prolog, prolog-cut

Prolog，递归函数：我希望它使用列表的每个元素打印 C，例如：C=30 和 [H|T]= [-9,-10,-30]

```
myfunc(C,[H|T]):-   
    (\+([H|T]=[])),
    write(C), write(' with '), write(H), nl,
    myfunc(C,T). 
```

我在开始时检查列表的头部不为空。它给了我这个输出

```
30 with -9
30 with -10
30 with -30

    (32 ms) no 
```

这个输出是我想要的，但我不想在最后得到一个“否”，因为这会使父函数也失败！我怎样才能将其删除并改为“是”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:04:03.237

简单的方法：只需添加一个带有空列表的基本案例。

```
myfunc(_, []) :- !.

myfunc(C,[H|T]):-   
    write(C), write(' with '), write(H), nl,
    myfunc(C,T). 
```

测试：

```
?- myfunc(30, [1, 2, 3]).
30 with 1
30 with 2
30 with 3
true. 
```

我不知道这是否是最好的方法，但是您没有向我们提供有关您的整个程序的太多详细信息，因此我选择了对您的谓词进行小的修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:46:50.463

如果你的 Prolog 中有 maplist，你可以写

```
myfunc(N, L) :-
    maplist(my_write(N), L).

my_write(N, Val) :-
    format('~w with ~w~n', [N, Val]). 
```

使用 SWI-Prolog 和模块[lambda](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)

```
:- use_module(library(lambda)).

myfunc(N, L) :-
    maplist(\X^format('~w with ~w~n', [N, X]), L). 
```

# node.js - node.js 中的 module.parent 有什么用？如何引用 require()ing 模块？

> ID：13651945
> 
> 赞同：43
> 
> 时间：2012-11-30T19:39:00.310
> 
> 标签：node.js, node-modules

我正在查看[node.js 模块](http://nodejs.org/api/modules.html)文档，并注意到每个模块都有一个属性 - `module.parent`。我尝试使用它，但被模块缓存烧毁了——无论当前上下文如何，`module.parent`似乎只对*第一个 require()的模块来说是这样。*

那么它的用途是什么？有没有其他方法可以让我获得对*当前*require()ing 模块的引用？现在我将模块包装在一个函数中，因此它被称为：

```
require("mylibrary")(module) 
```

但这似乎不是最理想的。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-30T20:15:48.497

“父”是导致脚本被解释（和缓存）的模块，如果有的话：

```
// $ node foo.js
console.log(module.parent); // `null` 
```

```
// require('./foo')
console.log(module.parent); // `{ ... }` 
```

您期待的是 Node 不会为您保留的“调用者”。为此，您需要将当前使用的导出函数作为该值的闭包。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-03-25T17:35:55.167

有一个解决方法。Node 在完成加载之前将一个模块添加到模块缓存中。这意味着模块可以在加载时从模块缓存中*删除自己！*然后每次`require`模块都加载模块的新实例。

**魔术.js**

```
console.log('Required by ' + module.parent.filename);
delete require.cache[__filename]; 
```

**模块1.js**

```
//prints "Required by Module1.js"
require('./Magic'); 
```

**模块2.js**

```
//prints "Required by Module2.js"
require('./Magic'); 
```

当然，这样做的副作用是您的模块不再是单例，因此您必须在编写代码`Magic.js`时牢记这一点。如果您需要存储全局数据，您可以始终将其保存在 require() 的模块中，该模块不会从缓存中删除自身。

# php - 使 ID 在 HTML 中唯一

> ID：13651948
> 
> 赞同：0
> 
> 时间：2012-11-30T19:39:18.793
> 
> 标签：php, html, variables, if-statement, unique-id

我是 PHP 的菜鸟。我真的坚持这一点，可以做一些帮助！

我正在使用以下代码来控制当变量（例如 $project1title 和 $project1description）为空/非空时是否出现 div 类和 span ID。

```
$html = '<div class="infobar"><div class="infobar-close"></div>';
$content = false;

if ($project1title !== '' && $project1description !== '')
{
$html .= '<span id="title"></span><span id="description"></span>';
$content = true;
}
// etc.

$html .= '</div>';

if ($content)
{
echo $html;
} 
```

当我只有一个项目标题和描述时，代码可以正常工作，但是当我开始添加时`($project2title !== '' && $project2description !== '') if ($project3title !== '' && $project3description !== '')`，它会变得混乱，因为我需要每个项目标题和描述的唯一 ID。我的问题是，我怎样才能让他们每个人都有一个唯一的 ID？（我需要使用数组吗？）一旦我给每个项目一个唯一的 ID，我需要在上面的代码中声明每个唯一的 ID 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:52:23.673

操作不应该是：

```
!= 
```

代替

```
!== 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:57:34.233

那这个呢 ：

```
<?php

$projects = array(
    array(
        'title' => 'myTitle',
        'description' => 'my description',
    ),
    array(
        'title' => 'myTitle2',
        'description' => 'my description2',
    ),
);

$html = '<div class="infobar"><div class="infobar-close"></div>';
$content = false;

$id = 1;
foreach($projects as $project){
    if(!empty($project['title']) && !empty($project['description'])){
        $html .= '<span id="title'. $id .'"></span><span id="description'. $id .'"></span>';
        $content = true;
    }
    $id++;
}

$html .= '</div>';

if ($content) {
    echo $html;
} 
```

请注意，如果 id 对您很重要，您可以在项目数组中添加一个 id 键。这有帮助吗？

或者，我认为你应该看看动态变量：这是你可以用它们做什么的简单例子：

```
<?php

$html = '<div class="infobar"><div class="infobar-close"></div>';
$content = false;

for($i = 1;$i<=10;$i++){
    $title = 'project' . $i . 'title';
    $description = 'project' . $i . 'description';

    if (isset($$title) && isset($$description) && $$title !== '' && $$description !== '')
    {
        $html .= '<span id="title'. $i .'"></span><span id="description'. $i .'"></span>';
        $content = true;
    }

}

$html .= '</div>';

if ($content)
{
    echo $html;
} 
```

# vb.net - 尝试自动登录网站

> ID：13651951
> 
> 赞同：0
> 
> 时间：2012-11-30T19:39:31.997
> 
> 标签：vb.net, authentication, login, web, webbrowser-control

我需要为朋友做一个自动登录工作，但我无法完成，我无法使用文本框的 id 插入文本，

调试器说：“对象引用未设置为对象的实例”

你能告诉我我做错了什么或如何解决它吗？

![在此处输入图像描述](../Images/7306aebeb3f076980dd0f6662541fd45.png)

这是表格：

```
Public Class Form1

    'Dim WebBrowser1 As New WebBrowser
    Dim elm
    Public Sub searchbutton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles searchbutton.Click

        'WebBrowser1.Document.GetElementById("id_username").SetAttribute("value", "yourusernamehere")
        WebBrowser1.Document.GetElementById("id_username").InnerText = "yourusernamehere"

    End Sub

    Public Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        'WebBrowser1.Navigate("http://www.planetromeo.com/")
        WebBrowser1.Navigate("http://www.planetromeo.com/main/login.php")

    End Sub

End Class 
```

这是 http://site.../main/login.php 源：

```
<body class="pgLe" id="pgLeLo">
<div id="head"> <h1>Inicio de sesión</h1></div>
<div id="loginWindow">
  <form method="post" action="https://www.planetromeo.com" name="login" target="_top" onsubmit="return submithandler()">
  <input type="hidden" name="PHPSESSID" value="wLzgSbXmdg7Goi1VYDiaXc4Hs4PV71gs" />  <input type="hidden" name="salt" id="id_salt" value="8547695" />
  <input type="hidden" name="resX" id="id_resX" value="" />
  <input type="hidden" name="resY" id="id_resY" value="" />
  <input type="hidden" name="secure" id="id_secure" value="" />
  <input type="hidden" name="initCallSec" id="id_initCallSec" value="0" />

  <div id="loginBox">
    <div class="spacer" style="height:9px;padding:0"></div>
    <div class="inputBox">
      <input type="text" name="username" value="" id="id_username" size="12" maxlength="70" class="textbox" onchange="document.forms['login'].erinnern.checked=false" /><br />
      <label for="id_username">Nombre del perfil</label>
    </div>
    <div class="inputBox">
      <input type="password" name="passwort" value="" id="id_password" size="12" maxlength="20" class="textbox" onchange="document.forms['login'].secure.value=''" /><br />
      <label for="id_password">Contraseña</label>
    </div>
    <div id="statusBox">
      <select name="status" id="status" class="textbox">
                <option value="-1">Como última vez</option>
        <option value="2">Charlar</option><option value="6">Amigos</option><option value="1">Nada</option><option value="3">Relación</option><option value="4">Cita</option><option value="7">Sexo</option><option value="8">Ocupado</option><option value="0">Ausente</option><option value="5">Invisible&nbsp;(Plus)</option>      </select>
    </div>
    <div class="checkerBox">
      <input type="checkbox" name="erinnern" value="1" id="id_erinnern" class="checkbox" /><label for="id_erinnern"><a href="../service/kontakthilfe/keyword_suche.php?helpid=166" onclick="return openUrl(this.href)">Recordar</a></label>
    </div>
    <div class="checkerBox">
      <input type="checkbox" name="jugendfrei" value="1" id="jugendfrei" class="checkbox" /><label for="jugendfrei"><a href="../service/kontakthilfe/keyword_suche.php?helpid=167" onclick="return openUrl(this.href)">Sin XXX</a></label>
    </div>
    <div>
      <input type="submit" value="Entrar" class="button" />
    </div>
  </div>
  <div id="infoBox">
    <a href="https://www.planetromeo.com//00000000000000000000000000000000/service/login/" target="mitte">¿Olvidaste tu contraseña?</a><br />
          <a href="https://www.planetromeo.com" target="_top">Activar SSL</a>
      </div>
  </form>
</div> 
```

这是 http://site...com 来源：

```
<!DOCTYPE html>
<html>
<head>
<meta name="apple-itunes-app" content="app-id=404386888" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /><title>PlanetRomeo</title>
<script type="text/javascript">

function switchLanguage(lang) {
  var frm = frames['oben'].document.forms['jump'];
  frm.lang.value = lang;
  frm.submit();
  return false;
}

</script>

  <meta name="keywords" content="planetromeo,romeo,community,chat,men,kontakte" />
  <meta name="description" content="Online community and dating service for men. Free registration and search." />
      <link rel="apple-touch-icon-precomposed" href="/v1/img/touch-icon.png" />
</head>

<frameset cols="*,796,*" framespacing="0" border="0" frameborder="0">
<frame name="links" src="/00000000000000000000000000000000/main/left.php" scrolling="no" noresize="noresize" />
<frameset rows="58,*" framespacing="0" border="0" frameborder="0">
<frame name="oben" src="/00000000000000000000000000000000/main/top.php" marginwidth="0" marginheight="0" scrolling="no" noresize="noresize" />
<frameset cols="116,680" framespacing="0" border="0" frameborder="0">
  <frame name="persoenliches" src="/main/login.php" marginwidth="0" marginheight="0" scrolling="no" noresize="noresize" />
  <frame name="mitte" src="/00000000000000000000000000000000/main/index.php" marginwidth="0" marginheight="0" scrolling="auto" noresize="noresize" />
</frameset>
</frameset>
  <frame name="heartbeat" src="/00000000000000000000000000000000/main/right.php" scrolling="no" noresize="noresize" />

  <noframes>
  <h1></h1>
  <p>Online community and dating service for men. Free registration and search.</p>
  <p>Sorry, frame support needed!</p>
  <a href="/00000000000000000000000000000000/main/top.php">Menu</a><br />
  <a href="/00000000000000000000000000000000/main/index.php">Main Page</a>
  </noframes>

</frameset>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:02:19.780

本文建议使用不同的语法...

[http://vbcity.com/blogs/jatkinson/archive/2009/12/12/programmatically-entering-and-data-using-the-webbrowser-control.aspx](http://vbcity.com/blogs/jatkinson/archive/2009/12/12/programmatically-entering-and-data-using-the-webbrowser-control.aspx)

例如

Dim usernameTextBox As HtmlElement = Me.mainWebBrowser.Document.All.Item("Email")
usernameTextBox.InnerText = "james.t.atkinson"

但对于按钮

Me.mainWebBrowser.Document.GetElementById("signIn").InvokeMember("click")

# python - 使用 django-taggit 获取特定的标签对象

> ID：13651952
> 
> 赞同：0
> 
> 时间：2012-11-30T19:39:34.210
> 
> 标签：python, django

我正在使用[django-taggit](https://github.com/alex/django-taggit)来管理我的应用程序中的标签。我可以像这样提取标记的项目：

```
photos = Photo.objects.filter(
    Q(status = 1) & Q(tags__id__in=[id])
).order_by('-position') 
```

我想得到的是当前的标签名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:02:57.020

您正在传递`tags__id__in`，这意味着您知道标签 ID？所以直接得到它们。

```
tags = Tags.objects.filter(id__in=[ids])
for tag in tags:
    print tag.name 
```

交替使用您提到的查询（我不包括`tags__id__in`在您的查询中）

```
photos = Photo.objects.filter(status=1).order_by('-position')
for photo in photos:
    tags = photo.tags.all()
    for tag in tags:
        print tag.name 
```

# c# - 按计算属性搜索对象列表

> ID：13651953
> 
> 赞同：5
> 
> 时间：2012-11-30T19:39:43.790
> 
> 标签：c#, linq, list, linq-to-entities, where

这是我的课：

```
public class Person
{
  public string FirstName { get; set; }
  public string LastName { get; set; }
  public string FullName { get { return FirstName + " " + LastName; } }
} 
```

这是我的清单：

```
var persons = new List<Person>();
persons.Add(...);
persons.Add(...);
etc. 
```

如果我尝试通过“计算”属性 FullName 搜索列表，如下所示：

```
return persons.Where(p => p.FullName.Contains("blah")) 
```

我收到以下错误：

> System.NotSupportedException：LINQ to Entities 不支持指定的类型成员“FullName”。仅支持初始化程序、实体成员和实体导航属性。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:02:58.753

您不能在`IQueriable`谓词中使用计算属性。有两种方法可以实现这一点。

您可以在数据库中创建一个视图并在那里创建计算出的 FullName 列并将该列映射回您的数据实体。

其次，您可以将所有数据检索回客户端并在内存中过滤它们：

```
persons
  .ToList() // Execute this query and get results
  .Where(p => p.FullName.Contains("blah"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:01:19.467

在您的情况下，您可以简单地更改您`Where`以使用计算属性的两个部分：

```
return persons.Where(p => (p.FirstName + " " + p.LastName).Contains("blah")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T17:18:33.223

试试我创建的这个 nuget 包： [https ://www.nuget.org/packages/NinjaNye.SearchExtensions/](https://www.nuget.org/packages/NinjaNye.SearchExtensions/)

安装后，您将能够执行以下操作

```
people.Search("blah", p => p.FirstName, p => p.LastName); 
```

上面返回的记录中“blah”存在于`FirstName`OR`LastName`中。所有这些都是使用`Expression Trees`所以搜索是在 SQL**中而不是在内存中完成的**

查看项目页面以获取其他示例用法： [https ://github.com/ninjanye/SearchExtensions](https://github.com/ninjanye/SearchExtensions)

# asp.net - 使用 Page.GetRouteUrl 时 application_authenticaterequest 不会触发

> ID：13651954
> 
> 赞同：1
> 
> 时间：2012-11-30T19:39:49.233
> 
> 标签：asp.net

我正在使用 ASP.NET 4.0 友好的 SEO Urls 从 Web 应用程序转换一些 URL：

从 `<a href="profile.aspx" ></a>`

至 `<a href="<%= Page.GetRouteUrl("Profile", null) %>" ></a>`

问题是在转换之前，当我尝试点击 profile.aspx 时，它会触发 application_authenticaterequest，但在转换之后，当我尝试点击 Page.GetRouteUrl 时，它不会触发 application_authenticaterequest。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:01:29.757

我想到了。这是我检查以 .aspx 结尾的请求并正在返回的条件。使用 Page.GetRouteUrl 时，application_authenticaterequest 实际上正在触发

# sql - sql问题中的多个COUNT

> ID：13651956
> 
> 赞同：2
> 
> 时间：2012-11-30T19:39:51.107
> 
> 标签：sql, sql-server, tsql

我有一点有线问题。
我必须从查询 Likes 和 Collects 中选择两个计数，但是当我添加第二个查询而不是`2 likes and 10 collects`我得到`10 likes and 10 collects`.
我在这里做错了什么？

```
select  COUNT(tl.ItemLikeId) as a, COUNT(tib.PacketId) as b
from Items i
left join ItemLikes il
on il.ItemId = i.ItemId
left join ItemsInPackets iip
on iip.ItemId = i.ItemId
where i.ItemId = 14591 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T19:41:30.873

试试`SELECT COUNT(DISTINCT tl.ItemLikeId) AS a, COUNT(DISTINCT tib.PacketId) as b`。

您的联接为您提供十行，因此每个表都有十个 ID。但是，并非所有 ID 都是唯一的。您正在寻找唯一的 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:43:51.987

Count 返回行数。不是具有值的行数，也不是不同行数。

获取具有值的数字行行

```
select  SUM(CASE WHEN tl.ItemLikeId IS NOT NULL THEN 1 ELSE 0 END) as a, 
        SUM(CASE WHEN tib.PacketId IS NOT NULL THEN 1 ELSE 0 END) as b 
```

要获得不同值的数量，请执行 zimdanen 建议并使用`COUNT(DISTINCT)`

```
select  COUNT(DISTINCT tl.ItemLikeId) as a, COUNT(DISTINCT tib.PacketId) as b 
```

另一种方法，如果你正在使用`ItemLikes`的`ItemsInPackets`只是计数

```
select
    (
        SELECT COUNT(ItemLikeId) 
        FROM ItemLikes
        WHERE ItemId = i.ItemId
    ) as a,
    (
        SELECT COUNT(PacketId) 
        FROM ItemsInPackets
        WHERE ItemId = i.ItemId
    ) as b
from Items i
where i.ItemId = 14591 
```

# sql - 将文件名传递给批量插入

> ID：13651958
> 
> 赞同：-2
> 
> 时间：2012-11-30T19:39:56.347
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我正在尝试通过变量将文件名传递给批量插入/

这不起作用：

```
bulk insert XMLfile 
from 
@Name_of_file
with ( rowterminator = ''' + char(10) + ''' ) 
```

但是，这样做：

```
bulk insert XMLfile 
from 
'abc.xml'
with ( rowterminator = ''' + char(10) + ''' ) 
```

我将如何将文件名传递给该语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:56:09.300

您不能使用变量作为文件名。如果您查看[BULK INSERT 语法](http://msdn.microsoft.com/en-us/library/ms188365%28v=SQL.100%29.aspx)，您将看到文件名是一个常量。为了实现您所寻找的，您必须使用动态 SQL，即将查询构建为字符串。

# matlab - 递归方案中生成点向量的有效方法

> ID：13651961
> 
> 赞同：1
> 
> 时间：2012-11-30T19:40:10.067
> 
> 标签：matlab, recursion, pass-by-reference, octave

我在 Matlab 中递归地实现自适应辛普森方法。我希望存储进行函数评估的所有点，以便在积分后生成直方图。我目前有：

```
function [S, points] = adsimp(f, a, b, fv, tol, level, points)
...
d = (a+b)*0.25;
e = (a+b)*0.75;
points = [points, d, e];
... 
```

因此，对于每个函数调用，我将长度增加`points`2。我对Matlab的函数输入/输出方案的理解很差。我想知道：

1）当输入和输出共享一个变量名时，这是使用单个变量，还是制作本地副本然后返回？

2）如果是副本，有没有办法`points`通过引用传递并预先分配足够的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:58:08.463

要回答您的第一个问题，请参见[此处](http://www.mathworks.com/matlabcentral/answers/152)。大多数 MATLAB 变量都是按值传递的（矩阵等），除非它是句柄对象（函数句柄、轴句柄等）。只有在函数中更改了该变量时，才会生成输入变量的本地副本。IE。

```
function y = doTheFunc1(x)
    x(2) = 17;
    y = x; 
```

必须制作一份副本。相对于：

```
function y = doTheFunc2(x)
    y = x(1); 
```

在函数内部不需要复制。换句话说，MATLAB 是一种“写时复制”的语言。无论您的输出变量输出名称是什么，我几乎可以肯定这是正确的（即，即使您的输出和输入都被命名，这也成立`x`）。

要回答您的第二个问题，请在[此处](https://stackoverflow.com/questions/4137905/how-to-modify-an-array-in-function)查看第一个答案。考虑使用[嵌套函数](http://www.mathworks.com/help/matlab/matlab_prog/nested-functions.html?s_tid=doc_12b)或[句柄对象](http://www.mathworks.com/help/matlab/matlab_prog/copying-objects.html)。

# gxt - GWT-GXT 文件上传字段

> ID：13651962
> 
> 赞同：0
> 
> 时间：2012-11-30T19:40:10.593
> 
> 标签：gxt

我尝试在 GXT 中制作一个表单来上传文件，但我在网上看到了更多示例，我未能使其成为一个简单的 FileUploadField 来在本地保存文件。

Cde片段：

```
 formPanel = new FormPanel();
    formPanel.setBodyBorder(false);
    formPanel.setHeaderVisible(false);
    formPanel.setAction(GWT.getModuleBaseURL() + "fileUpload");
    formPanel.setEncoding(Encoding.MULTIPART);
    formPanel.setMethod(Method.POST);
    formPanel.setButtonAlign(HorizontalAlignment.CENTER);      
    formPanel.setHeaderVisible(true);

    fileUploadField = new FileUploadField();
    fileUploadField.setName("fileName");
    fileUploadField.setAllowBlank(false);
    fileUploadField.setFieldLabel("Archivo");                       
    fileUploadField.addListener(Events.OnChange, new Listener<BaseEvent>() {

        public void handleEvent(BaseEvent BaseEvent) {
            aSubmitButton.setEnabled(true);
        }
      });

        aSubmitButton = new Button("OK");
    aSubmitButton.setEnabled(false);
    aSubmitButton.setId("submit_button");       
    aSubmitButton.addSelectionListener(new SelectionListener<ButtonEvent>() {

        @Override
        public void componentSelected(ButtonEvent inButtonEvent) {
          formPanel.submit();
    }
      }); 
```

上面的代码是FormPanel和FileUploadField的声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:10:38.573

我们使用 gwtupload-0.6.3-compat.jar 库来完成这项工作。

基本上，这个想法是在服务器端，您需要创建一个 servlet，它将接受您上传的文件。提到的库提供了 UploadAction servlet 扩展来促进这一点。

在客户端，您可以使用 gwtupload 组件之一。例如，我们使用 MultiUploader。这实际上是几行代码。主要代码在监听器中：

```
private IUploader.OnFinishUploaderHandler onFinishUploaderHandler = new IUploader.OnFinishUploaderHandler() {
    public void onFinish(IUploader uploader) {
        if (uploader.getStatus() == Status.SUCCESS) {
            // What you want to do when file is uploaded.
        }
    }
}; 
```

其余的由组件处理。由于该库是用于 GWT 的，因此它带有源代码，因此您可以看到它在幕后所做的事情并阅读代码中的大量注释。

当然免费使用。

# python - 在 Jinja2 中迭代同一个列表两次？

> ID：13651965
> 
> 赞同：7
> 
> 时间：2012-11-30T19:40:19.787
> 
> 标签：python, google-app-engine, jinja2

我正在尝试在两个不同的位置打印标签列表，但第二次我 for/in 列表时，它不会循环。

```
<ul>
# for tag in tags
    <li><a href="/my-tags/{{tag.name}}">{{tag.name}}</a></li>
# endfor
</ul>

<ul>
# for tag in tags
    <li><a href="/my-tags/{{tag.name}}">{{tag.name}}</a></li>
# endfor
</ul> 
```

如果我把它放在我的模板中，第二个 UL 最终会是空的。

有任何想法吗？

编辑：

这就是我填充标签变量的方式。

```
contact_data.append({'name': 'Placeholder', 'emails': contact.emails, 'tags': [tag for tag in nt_tags.get_tags_by_taggee(contact)]}) 
```

再次编辑：

记录了我正在传递的内容及其

```
[<nt_tags.Tag object at 0x0000000005CAFF28>, <nt_tags.Tag object at 0x0000000005CAFFD0>] 
```

看起来只是一个列表而不是迭代器吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T19:43:24.330

如果`tags`是一个迭代器，那么在第一次迭代结束时，将没有任何东西可以迭代。您可以在将其传递给您`eg: list(tags)`的上下文中的模板之前将其具体化为一个列表......

# validation - 在 Rails 中，如何使用 validates_timeliness gem 在比较的基础上验证两个日期属性？

> ID：13651966
> 
> 赞同：1
> 
> 时间：2012-11-30T19:40:29.863
> 
> 标签：validation, date, ruby-on-rails-3.2

我正在尝试验证两个日期属性，以便它们是连续的。

gem **[validates_timeliness](https://github.com/adzap/validates_timeliness)**非常适合验证不正确的日期，例如 2 月 31 日。

但是我正在尝试使用**:before**和**:after**参数，但它不起作用。它接受 2012 年 12 月 31 日的开始日期，而结束日期设置为 2012 年 1 月 1 日。

我的模型：

```
class Meeting < ActiveRecord::Base
  attr_accessible :date_start, :date_end
  validates :date_start, :date_end, :presence => true

  # Ressource : https://github.com/adzap/validates_timeliness
  validates_date :date_start, :before => :date_end
  validates_date :date_end, :after => :date_start
end 
```

validates_timeliness 允许做我想做的事还是不是为此而建的？

我宁愿避免使用两个 gem 来处理我的应用程序中的日期。我的意思是同时使用 validates_timeliness gem 和 date_validator gem。

===== 更新 =====

尽管我找不到原因，但有些东西无法与 validates_timeless 一起正常工作。即使我在我的模型中设置了以下验证，它也接受 date_start 是在今天之后：

```
validates_date :date_start, :before => lambda { Date.current } 
```

我的**/config/initializers/validates_timeliness.rb**（供参考）：

```
ValidatesTimeliness.setup do |config|
  # Extend ORM/ODMs for full support (:active_record, :mongoid).
  config.extend_orms = [ :active_record ]

  # Re-display invalid values in date/time selects
  config.enable_date_time_select_extension!

  # Handle multiparameter date/time values strictly
  config.enable_multiparameter_extension!

  # Shorthand date and time symbols for restrictions
  config.restriction_shorthand_symbols.update(
     :now   => lambda { Time.current },
     :today => lambda { Date.current }
   )
  # Use the plugin date/time parser which is stricter and extendable
  config.use_plugin_parser = false
end 
```

请注意，如果我尝试将日期设置为 2 月 31 日，则会收到一条错误消息，告知日期不正确。每次更改配置后，我也会重新启动服务器。

===== 更新 2 =====

我什至尝试过这个无效的 hash_key，Rails 没有抱怨：

```
 validates_date :date_start, :blablabla => lambda { Date.current } 
```

发生什么了 ？我究竟做错了什么 ？

===== 更新 3 =====

这似乎是一个错误。这两个选项确实有效：

```
 validates_date :date_start, :on_or_before => lambda { Date.current }
  validates_date :date_start, :on_or_after => lambda { Date.current } 
```

这两个选项不起作用：

```
 validates_date :date_start, :before => lambda { Date.current }
  validates_date :date_start, :after => lambda { Date.current } 
```

我正在使用 Rails 3.2.9 和 Ruby 1.9.3p194。

有人可以确认他有同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:47:52.017

我没有使用过这个 gem，但它们似乎支持 lambda 的值。尝试以下（应该）将您的 Meeting 实例传递给 lambda 并将结果返回给验证方法。它必须在 lambda 中完成，因为它是特定于实例的。

```
 validates_date :date_start, :before => lambda{|m| m.date_end}
  validates_date :date_end, :after => lambda{|m| m.date_start} 
```

# html - HTML5 视频在 IE9 中不起作用

> ID：13651969
> 
> 赞同：4
> 
> 时间：2012-11-30T19:40:45.647
> 
> 标签：html

我在让 HTML5 在 IE9 中工作时遇到问题。它显示为执行视频标签失败。它在 Firefox、Opera 和 Safari 中运行良好，但我在 IE 中出现了一个空白屏幕。这是代码：

```
<video width="320" height="240" controls="controls">
    <source src="video1.mp4" type="video/mp4"/>
    <source src="video1.ogg" type="video/ogg"/>
</video> 
```

[然后我在http://html5test.com](http://html5test.com)上运行了 HTML5 兼容性测试，我在 IE 中也得到了一个空白屏幕，所以它不仅仅是有问题的视频标签。

然后我尝试`.mp4`在线运行示例视频（[http://archive.org/details/Pbtestfilemp4videotestmp4](http://archive.org/details/Pbtestfilemp4videotestmp4)） - 它不在浏览器中运行，而是在 VLC 播放器中打开！在 Firefox、Opera 和 Safari 中，它在浏览器中运行。

我已经重新安装了 IE - 不好。当我检查 IE 版本时，它显示 Internet Explorer 9，但在“版本：”之后，有一个空白。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T07:45:04.180

我遇到了类似的问题，结果发现我的服务器没有为视频对象返回正确的 MIME 类型。查看这个人的信息 - [http://blogs.msdn.com/b/thebeebs/archive/2011/07/20/html5-video-not-working-in-ie9-some-tips-to-debug.aspx](http://blogs.msdn.com/b/thebeebs/archive/2011/07/20/html5-video-not-working-in-ie9-some-tips-to-debug.aspx)

我刚刚将此代码添加到我的 .htaccess 文件中，它立即生效 - `AddType video/mp4 .mp4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:09:32.820

使用 [ **[HTML5Shiv](http://code.google.com/p/html5shiv/)** ] 为 Internet Explorer 启用 HTML5 标签。并将 WebM 视频格式添加到源中

# java - JavaFX 中属性的延迟初始化

> ID：13651974
> 
> 赞同：1
> 
> 时间：2012-11-30T19:40:56.080
> 
> 标签：java, javafx-2, javafx

属性的延迟初始化似乎是 JavaFX 中一种常见的设计模式。例如，[OpenJFX Labeled 实现](http://hg.openjdk.java.net/openjfx/2.2/master/rt/file/e71070b0e0c0/javafx-ui-controls/src/javafx/scene/control/Labeled.java "OpenJFX 标记的实现")包含以下代码片段：

```
public final StringProperty textProperty() {
    if (text == null) {
        text = new SimpleStringProperty(this, "text", "");
     }
     return text;
} 
```

鉴于可以从 JavaFX UI 线程以及其他潜在的客户端线程访问该属性，并且此实现[不是线程安全](http://en.wikipedia.org/wiki/Double-checked_locking "双重检查锁定")的，这似乎是一个错误。考虑到该模式的使用频率，这要么是一个非常严重的问题，要么访问控件上的属性并不是线程安全的（我误解了 JavaFX 并发策略）。

谁能解释不使延迟初始化线程安全的理由？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:02:52.353

JavaFX 不是线程安全的，它像 Swing 一样是线程受限的。事实上，如果您不从 JavaFX 线程中使用它，JavaFX API 中的许多方法都会抛出异常。

# jquery - jQuery Datepicker - 如何在加载时调用函数

> ID：13651979
> 
> 赞同：1
> 
> 时间：2012-11-30T19:41:03.750
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有一个加载了事件的日期选择器。当月份更改为另一个月份时，会进行数据库调用以恢复事件并且这工作正常。但是，我需要在日历首次显示以及稍后与用户交互时发生这种情况。这是我的代码，为了简化我的问题，当日历第一次显示在屏幕上时，如何让“getJsonDate”函数运行？我几乎可以肯定这是相当基本的东西，但它并没有在我身上跳出来。

```
 $(function () {
        function getJsonDate(year, month) {
            var theYear = year;
            var theMonth = month;
            alert('You are in, baby!');
            $.post('GetMonthCalendar', {
                data: { year: theYear, month: theMonth },
                success: function(data) {
                    //TODO: make determination on ResourceScheduleTypeId for correct css
                    var i = 0;
                    for (i = 0; i < data.data.length; i++) {
                        $('.ui-datepicker-calendar td a:exactly(' + data.data[i]['d'] + ')')
                            .css({ color: 'blue' })
                            .attr('href', data.data[i]['link'])
                            .parent().attr('onclick', '');
                    }

                }
            });
        }

        $.expr[":"].exactly = function (el, i, m) {
            var s = m[3];
            if (!s) return false;
            return eval("/^" + s + "$/i").test($(el).text());
        };
        $('#date').datepicker({
            inline: true,
            onSelect: function (dateText, inst) {
                Date.prototype.toString = function () { return isNaN(this) ? 'NaN' : [this.getDate(), this.getMonth(), this.getFullYear()].join('/'); };
                d = new Date(dateText);
                //alert(d.getDate() + ", " + d.getFullYear());
                getJsonDate(d.getFullYear(), d.getDate());
            },
            onChangeMonthYear: function (year, month, inst) {
                //alert(year + ", " + month);
                getJsonDate(year, month);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:47:53.377

由于`datepicker`继承自[`Widget`](http://api.jqueryui.com/jQuery.widget)，我认为您可以添加一个[`create`回调](http://api.jqueryui.com/jQuery.widget/#event-create)，该回调将在小部件初始化后执行。

```
$("#date").datepicker({
    // …
    create: function(event, ui) {
        getJsonDate(/* year, month */)
    }
}) 
```

# jquery - 逐案 $.ajaxSetup 调用

> ID：13651980
> 
> 赞同：0
> 
> 时间：2012-11-30T19:41:06.667
> 
> 标签：jquery, ajax, caching

我`$.post`在我的脚本中做了几个调用，我想用它`$.ajaxSetup`来处理缓存控制。

```
function function1() 
$.ajaxSetup({
    type: 'POST',
    headers: { "cache-control": "no-cache", "pragma-cache": "no-cache" }
});
$.post('getLists.php', {user: authUser, token: authToken}, function(data){
    $('nav a[class!=btnNewList]').remove();
    $.each(data.objects, function(index, element){
        $('nav').append('<a href="#" data-list-id="'+element.id+'">'+element.title+'</a>');
    });
    $('nav').children('a:first-child').next('a').addClass('selected');

    getClipsForList($('nav').children('a:first-child').next('a').attr('data-list-id'));
}, 'json');

function function2(){
$.ajaxSetup({
    type: 'POST',
    headers: { "cache-control": "public", "pragma-cache": "public" }
});
$.post('getClips.php', {user: authUser, token: authToken}, function(data){
    spinner.stop();
    $.each(data.objects, function(index, element){
        if(element.list == '/api/lists/'+id+'/'){
            $('#clips ul').append('<li data-url="'+element.url+'">'+truncate(element.title, 100)+'</li>');
        }
    });
},'json');
} 
```

我正在构建一个移动网络应用程序，我注意到它正在缓存我的 JSON 响应，所以我做了一些研究并找到了`$.ajaxSetup`解决方案。它工作得很好，但现在看来，无论我将缓存控件属性设置为什么，它现在*总是在*缓存。我只想缓存某些 $.post 调用。有什么办法可以做到这一点？

我已经尝试使用`$.ajax`而不是`$.post`我想要缓存数据的函数并将全局属性设置为 false，但它仍然不会缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:04:21.630

通过简单地为每个调用使用 $.ajax 并在每个调用的基础上明确设置标头，而不是尝试使用 $.post 的全局设置来解决此问题。

# c - memove导致总线错误

> ID：13651983
> 
> 赞同：0
> 
> 时间：2012-11-30T19:41:13.447
> 
> 标签：c, bus-error, memmove

此代码中的 memmove 调用导致程序因总线错误而崩溃。基本上，代码接收一个 IP 数据包，然后创建一个新数据包。它计算了输入数据包中几个不可变字段的 MD5_HMAC（除 TTL、校验和之外的所有字段），并将这些值推送到输出数据包中。

```
int ahmd5_input(u_char *packet, ssize_t *len, struct ahmd5_xdata *xd)
{
  struct ip *ip, *ipo; /* pointers to ip headers */
  struct  ah* ah;   /* pointer to AH header */
  struct ahmd5 aho; /* pointer to AHMD5 for Check */

  /* get length of the result packet */
  opacket_len = *len - sizeof(struct ahmd5);

  /* allocate memory for output packet */
  opacket = (u_char *)malloc(opacket_len);
  if(opacket == NULL) {
    printf("Cannot allocate memory buffer");
    return ERR_ALLOC;
  }

  /* get pointer to output ip header */
  ipo = (struct ip *)opacket;

  /* get pointer to AH header */
  ah = (struct ah*)(ip + 1);

  /* zeroize the tos, sum & ttl for auth. data calculation */
  *ipo = *ip;
  ipo->ip_tos = 0;
  ipo->ip_ttl = 0;
  ipo->ip_sum = 0;

  /* Calculate Auth. Data (digest) */
  MD5Init(&ctx);
  MD5Update(&ctx, (unsigned char *)xd->amx_key, xd->amx_klen);
  MD5Update(&ctx, (unsigned char *)ipo, sizeof (struct ip));
  MD5Update(&ctx, (unsigned char *)ah, AH_FLENGTH);
  MD5Update(&ctx, md5zeroes, xd->amx_alen);
  MD5Update(&ctx, (unsigned char *)xd->amx_key, xd->amx_klen);
  MD5Final((unsigned char *)(&(aho.ah_data[0])), &ctx);

  /* Authentication checking */
  if (bcmp(aho.ah_data, ah->ah_data, xd->amx_alen))
    {
      time(&curr_time);
      printf("bad auth.: packet id = %d from %s : date: %s", ipo->ip_id, inet_ntoa(ipo->ip_src), ctime(&curr_time));
      free(opacket);
      return ERR_AUTH;
    }

  /* restore ip header*/
  *ipo = *ip;

  /* copy the contents of the packet */
  memmove((void *)(ipo+1),(void*)((struct ahmd5 *)ah+1), opacket_len-sizeof(struct ip));

  // memcpy((void *)(ipo+1),(void*)((struct ahmd5 *)ah+1), opacket_len-sizeof(struct ip));

  bcopy(opacket, packet, opacket_len);
  *len = opacket_len;

  printf("   ** Inbound processing complete\n");

  free(opacket);

  return 0;
} 
```

我不确定如何解决这个问题。将不胜感激一些帮助。谢谢

以下是结构：

```
struct ahmd5
{
u_char  ah_nh;          /* Next header (protocol) */
u_char  ah_hl;          /* AH length, in 32-bit words */
u_short ah_rv;          /* reserved, must be 0 */
u_long  ah_spi;         /* Security Parameters Index */
u_char  ah_data[AHMD5_AMAX];    /*  */
};

struct ahmd5_xdata
{
u_short amx_klen;       /* Key material length */
u_short amx_alen;       /* authenticator length */
u_char  amx_key[AHMD5_KMAX];    /* Key material */
};

struct ah
{
u_char  ah_nh;          /* Next header (protocol) */
u_char  ah_hl;          /* AH length, in 32-bit words */
u_short ah_rv;          /* reserved, must be 0 */
u_long  ah_spi;         /* Security Parameters Index */
u_char  ah_data[1];     /* More, really*/
};

struct ahstat
{
u_long  ahs_hdrops;     /* packet shorter than header shows */
u_long  ahs_notdb;
u_long  ahs_badkcr;
u_long  ahs_badauth;
u_long  ahs_noxform;
u_long  ahs_qfull;
}; 
```

# ios - 在 iOS SDK 上将录制的电影转换为 GIF

> ID：13651984
> 
> 赞同：0
> 
> 时间：2012-11-30T19:41:14.973
> 
> 标签：ios, sdk, uiimagepickercontroller, gif, file-conversion

我正在构建一个 iOS 应用程序，它要求我允许用户录制一个 15 秒的剪辑（例如使用 UIImagePickerController），然后将其转换为动画 GIF。我怎么能做到这一点？是否有任何库/框架可用于此类任务？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-27T09:17:23.953

我制作了一个名为 Regift 的库，用于在 iOS 上将电影转换为 gif。它[在 Github](https://github.com/matthewpalmer/Regift)上可用。希望这可以帮助你:)

如果你安装它，你可以这样做

```
Regift.createGIFFromURL(videoURL, withFrameCount: frameCount, delayTime: delayTime, loopCount: loopCount) 
```

创建一个 gif。

最好检查完整的文档，因为我会保持更新而不是这个答案。

# javascript - javascript标注覆盖问题

> ID：13651985
> 
> 赞同：0
> 
> 时间：2012-11-30T19:41:19.550
> 
> 标签：javascript, jquery, callout

我需要帮助来解决在鼠标悬停离开图标后它们不再隐藏的标注问题，如屏幕截图所示。

这是head部分的js代码的一部分

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.core.js"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.slide.js"></script>
<script>
$(document).ready(function () {
    // TOP NAV DROPDOWNS
    $('nav div ul li').hover(
        function () {
            $(this).children('div').slideDown("fast");
        }, 
        function () {
            $(this).children('div').slideUp("fast");
        }
    );
    // HOMEPAGE SERVICES SLIDE OUTS
    $('.right-slide a').hover(
        function () {
            $(this).siblings('.info-bubble').show('slide', {direction: 'left'}, 100);
        }, 
        function () {
            $(this).siblings('.info-bubble').hide('slide', {direction: 'left'}, 100);
        }
    );
    $('.left-slide a').hover(
        function () {
            $(this).siblings('.info-bubble').show('slide', {direction: 'right'}, 100);
        }, 
        function () {
            $(this).siblings('.info-bubble').hide('slide', {direction: 'right'}, 100);
        }
    );
    // RESETS POPULATED FIELDS
    $('.clear-field').each(function() {
        var default_value = this.value;
        $(this).focus(function() {
            if(this.value == default_value) {
                this.value = '';
                $(this).removeClass('clear-field');
            }
        });
        $(this).blur(function() {
            if(this.value == '') {
                this.value = default_value;
                $(this).addClass('clear-field');
            }
        });
    });
});
</script> 
```

截屏

[http://i50.tinypic.com/2ia66g3.png](http://i50.tinypic.com/2ia66g3.png)

这是html代码

```
 <div class="home-services">

        <div class="home-service right-slide home-web-hosting">
            <a href="/web-hosting/">WEB HOSTING</a>
            <div class="info-bubble">
                <h2>Web Hosting</h2>
                Company's custom server clustering and all-out IT management services keep your hosting needs running efficiently.
            </div>
        </div>

        <!--- RESELLERS -->
        <div class="home-service right-slide home-resellers">
            <a href="/resellers/">RESELLERS</a>
            <div class="info-bubble">
                <h2>Resellers</h2>
                Company's free Auto-Install Script Hosting Software, free White-Label Name Servers, intuitive Domain Panels and organic site builder options get you up and running in no time.
            </div>
        </div>

        <!--- VPS -->
        <div class="home-service right-slide home-vps">
            <a href="/virtual-private-servers/">VPS</a>
            <div class="info-bubble">
                <h2>Virtual Private Servers</h2>
                Company's robust 
                managed VPS servers and strong system resources offer 
                top-shelf performance at a fraction of the cost of dedicated 
                servers.
            </div>
        </div>

        <!--- SEARCH-->
        <div class="home-service left-slide home-search">
            <a href="/other-services/domain-registration.php">DOMAIN<br>SEARCH</a>
            <div class="info-bubble">
                <h2>Domain Search</h2>
                Easily transfer your current domain to LogicWeb. You can also register a new domain, bulk domains with significant discounts. We offer over 30 TLDs to 
                register from.
            </div>
        </div>

        <!--- DEDICATED SERVERS -->
        <div class="home-service right-slide home-dedicated-servers">
            <a href="/dedicated-servers/">DEDICATED<br>SERVERS</a>
            <div class="info-bubble">
                <h2>Dedicated Servers</h2>
                Need IT support? Company's managed dedicated servers and clustering possibilities, certified 24/7  Support engineers , IAVA/CloudLinux hosting 
                focused on quality. We'll manage your data so you don't have to.
            </div>
        </div>

        <!--- LOGICWEB VIDEO -->
        <div class="home-service left-slide home-logicweb-video">
            <a href="/">NETWORK TOUR</a>
            <div class="info-bubble">
                <h2>Network Tour</h2>
                Watch a brief video tour of our network infrastructure and learn more about our dedication to data protection, network redundancy and state-of-the-art data
                center facility.     
            </div>
        </div>

        <!--- CLOUD HOSTING -->
        <div class="home-service left-slide home-cloud-hosting">
            <a href="/cloud-hosting/">CLOUD<br>HOSTING</a>
            <div class="info-bubble">
                <h2>Cloud Hosting</h2>
                Company's Groundbreaking Hosting offers security, stability and superior server uptime, making traditional server instability issues yesterday's news.
            </div>
        </div>

        <!--- OTHER SERVICES -->
        <div class="home-service left-slide home-other-services">
            <a href="/other-services/email.php">OTHER<br>SERVICES</a>
            <div class="info-bubble">
                <h2>Other Services</h2>
                Domains, Colocation, Marketing, SSL, Merchant Accounts—whatever you need, it's here.
            </div>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:49:07.690

不错的布局！

我认为无论出于何种原因，您的隐藏事件都没有被触发。我的方法不是解决最初的问题，而是不向 .hover() 添加 mouseout 函数，而是隐藏所有显示的弹出按钮，而不是当前悬停在 hover() 上的弹出按钮。让我举例说明：

在您的代码中，您有：

```
$('.left-slide a').hover(
    function () {
        $(this).siblings('.info-bubble').show('slide', {direction: 'right'}, 100);
    }, 
    function () {
        $(this).siblings('.info-bubble').hide('slide', {direction: 'right'}, 100);
    }
); 
```

让我们试试这个：

```
$('.left-slide a').hover(
    function () {
        $('.left-slide .info-bubble:visible:not(#'+$(this).attr('id')+')').hide('slide', {direction: 'left'}, 100);
        $(this).siblings('.info-bubble').show('slide', {direction: 'right'}, 100);
    }
); 
```

由于图标不同，他们肯定都有 id（尽管在这里猜测）。这种方法可能效果不佳，但可能符合您的需求。

# tomcat - Tomcat 服务器不会启动无效的 CATALINA_BASE

> ID：13651987
> 
> 赞同：1
> 
> 时间：2012-11-30T19:41:23.237
> 
> 标签：tomcat, tomcat6, ubuntu-12.04

我有一个在 Ubuntu 12.04 中运行的 tomcat6 服务器（成功）。

我试图通过 apt-get 安装 Jenkins，但没有意识到它会使用与 tomcat6 相同的端口。但是，一旦我禁用了 Jenkins，tomcat6 仍然无法启动。我收到以下错误：

```
* invalid CATALINA_BASE: /var/lib/tomcat6 
```

我已经尝试将我的`CATALINA_BASE`env 变量设置为我认为应该是的（/usr/share/tomcat6），但它似乎没有任何效果。有什么建议么？

我也尝试设置`CATALINA_HOME`和`CATALINA_BASE`in `startup.sh`，但再次没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:51:35.453

显然安装 Jenkins 完全卸载了 Tomcat6。

我决定尝试卸载并重新安装 Tomcat6，并且在尝试卸载时被告知我没有安装 Tomcat6。

通过 apt-get install 安装了 Tomcat6，一切正常。

这里可能还有更多我不明白的地方，但问题已经解决。

# c++ - 如何在 Visual Studio C++ 2010 中使用 stat 检查文件是否存在？

> ID：13651988
> 
> 赞同：1
> 
> 时间：2012-11-30T19:41:22.920
> 
> 标签：c++

这是我用于检查 Visual Studio 2010 C++ 项目中是否存在文件的代码：

```
bool GLSLProgram::fileExists( const string & fileName )
{
    struct stat info;
    int ret = -1;

    ret = stat(fileName.c_str(), &info);
    return 0 == ret;
} 
```

我不确定为什么当该文件确实存在时它会为“shaders/color.vert”返回 false，并且着色器是我项目主文件夹中的一个文件夹。

你能看出有什么不对吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:26:58.210

好的，为了说明从 IDE 运行的怪癖，我做了一个小测试。希望这可以帮助您弄清楚相对路径在 VS 中是如何工作的。

所以我的文件夹层次结构如下所示：

```
/_Sandbox
    _Sandbox.sln
    /Debug
        _Sandbox.exe
        /shaders
            color.vert
    /_Sandbox
        _Sandbox.proj
        main.cpp 
```

代码如下所示：

```
#include <iostream>
#include <string>
#include <sys/stat.h>

int main(int argc, char* argv[])
{
    struct stat info;

    std::string path = "shaders/color.vert"; // To not I get the same behavior with "shaders\\color.vert"
    int ret = stat(path.c_str(), &info);

    ret == 0 ? std::cout << "File found." << std::endl : std::cout << "File doesn't exist." << std::endl;

    std::cin.get();
    return 0;
} 
```

因此，如果我在 IDE 中运行它，我会得到“文件不存在。”，如果我在 IDE 之外运行它，我会得到“文件找到”。为了让程序从 VS 中找到着色器文件，我必须像这样放置着色器文件夹：

```
/_Sandbox
    _Sandbox.sln
    /Debug
        _Sandbox.exe
    /_Sandbox
        /shaders
            color.vert
        _Sandbox.proj
        main.cpp 
```

但是，您可以获取代码以从 IDE 内部和外部查找文件夹。您要做的是转到项目的设置。在“调试”中并将“工作目录”更改为`$(SolutionDir)$(Configuration)\`

希望这可以为您解决问题。

# sql-server - 安全审计 (CRUD) - Microsoft Access

> ID：13651990
> 
> 赞同：1
> 
> 时间：2012-11-30T19:41:27.990
> 
> 标签：sql-server, security, ms-access, vba, audit

我的客户使用 Microsoft Access 2010 已经有一段时间了，他们收到了一些安全审核要求。他们使用链接表方法连接到 Microsoft SQL Server 2012 Express。

要求规定必须记录针对数据的所有操作。（插入、更新、删除和选择语句）

对于 INSERT、UPDATE、DELETE 语句，我可以创建一个触发器来记录更改。

问题是围绕 SELECT 语句的审计。如果数据是只读的，我可以使用存储过程来记录查询。但是执行存储过程会使 Recordset 不可更新。

有谁知道如何应对这一挑战？

我对很多策略持开放态度......（通过 Web 服务连接访问 SQL，任何东西......）

需要注意的是，我的客户没有 3 万美元可用于 SQL Sever 企业版，因为他们是一家员工不到 10 人的小型企业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:09:50.880

SELECT 语句是[SQL Server 中数据库级审计操作组的](http://msdn.microsoft.com/en-us/library/cc280663.aspx)一部分。（在该页面中搜索“数据库级审计操作”。）但该级别的审计需要 SQL Server Enterprise 版本。

理论上，您可以将所有访问限制为仅使用存储过程，而不管数据是否为只读。编写存储过程，首先将审计信息写入日志，然后执行其他需要完成的操作——SELECT、INSERT 等。

实际上，您*可能*无法做到这一点。这取决于访问您的数据库的应用程序。将所有访问限制为仅使用存储过程可能会破坏期望其他事情的应用程序。（如果您切换到仅存储过程，Ruby on Rails 应用程序将如何响应？）

使您的数据库无法使用的防弹审计系统不是很好；完全关闭数据库服务器更简单、更便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T04:03:09.777

You could upgrade to a SQL Server edition that supports SQL Server profiler. The other option is to get other tools to audit like sql audit for example.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T19:44:19.820

您可以打开 JET showplan。这将记录 Access 使用的所有查询。

[http://www.techrepublic.com/article/use-microsoft-jets-showplan-to-write-more-efficient-queries/?siu-container](http://www.techrepublic.com/article/use-microsoft-jets-showplan-to-write-more-efficient-queries/?siu-container)

正如我在评论中指出的那样，您确实在愚弄审计要求，除非每个表单都使用 where 子句打开，该子句将对该表单中数据的查看限制为 ONE 记录。如果您不这样做，那么打开到链接表的表单可能有 1000 条记录，并且用户按 ctrl-f 查找并跳转到一条记录意味着 SELECT 语句告诉您用户实际的内容为零看着。因此，虽然您可以打开显示计划，但审核概念不会告诉您用户实际查看的任何内容，除非更改应用程序设计以将表单限制为一条记录。公平地说，我 99% 的应用程序实际上确实通过 where 子句打开并限制主编辑表单到一个记录。

因此，虽然您可以按照上述技术明智地记录所有 SELECT 命令，但它并不是真正属于此类日志的精神，因为此类日志对于确定用户查看的实际记录没有任何用处。

# java - 当我最大化 JInternalFrame 时 JInternalFrame 上的示例程序 JMenubar

> ID：13651991
> 
> 赞同：4
> 
> 时间：2012-11-30T19:41:30.250
> 
> 标签：java, swing, jinternalframe, jmenubar

嗨，我需要一个示例程序，其中当我最大化 JInternalFrame 时，JFrame 的 JMenuBar 应该设置在 JInternalFrame 上，当我再次最小化 JInternalFrame 时，JMenuBar 应该离开 JinternalFrame 并设置为 JFrame，如下所示 ![当 JInternalFrame 最大化时](../Images/566fc1385f7aed8e224882cb331ead4b.png)

![当 JInternalFrame 被最小化时](../Images/b30f362a573c347d13702a8012e7f924.png)

请为我提供 Java Swing 中的示例程序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T19:49:10.903

似乎工作正常，请发布[SSCCE](http://sscce.org)以显示具体问题：

![在此处输入图像描述](../Images/c63451f95772209639202320a7a4790f.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingUtilities;

public class JInternalFrameDemo {

    JDesktopPane jdpDesktop;
    static int openFrameCount = 0;

    public JInternalFrameDemo() {
        JFrame frame = new JFrame("JInternalFrame Usage Demo");

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // A specialized layered pane to be used with JInternalFrames
        jdpDesktop = new JDesktopPane() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(600, 600);
            }
        };

        createFrame(); // Create first window

        frame.setContentPane(jdpDesktop);

        frame.setJMenuBar(createMenuBar());

        // Make dragging faster by setting drag mode to Outline
        jdpDesktop.putClientProperty("JDesktopPane.dragMode", "outline");

        frame.pack();
        frame.setVisible(true);
    }

    protected JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("Frame");
        menu.setMnemonic(KeyEvent.VK_N);
        JMenuItem menuItem = new JMenuItem("New IFrame");
        menuItem.setMnemonic(KeyEvent.VK_N);
        menuItem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                createFrame();
            }
        });
        menu.add(menuItem);
        menuBar.add(menu);
        return menuBar;
    }

    protected void createFrame() {
        MyInternalFrame frame = new MyInternalFrame();
        frame.setVisible(true);
        // Every JInternalFrame must be added to content pane using JDesktopPane
        jdpDesktop.add(frame);
        try {
            frame.setSelected(true);
        } catch (java.beans.PropertyVetoException e) {
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JInternalFrameDemo();
            }
        });
    }

    class MyInternalFrame extends JInternalFrame {

        static final int xPosition = 30, yPosition = 30;

        public MyInternalFrame() {
            super("IFrame #" + (++openFrameCount), true, // resizable
                    true, // closable
                    true, // maximizable
                    true);// iconifiable
            setSize(300, 300);
            // Set the window's location.
            setLocation(xPosition * openFrameCount, yPosition
                    * openFrameCount);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:30:32.103

我也有类似的问题。这是 JInternalFrame LookAndFell 中的一个错误。JInternalFrames 使用Windows L&F，应该更像Windows。如果我最大化 JInternalWindow，则该窗口无法像在 Windows 中那样工作。它的顶栏应与 MDI 为一。Meus 和工具栏应该在里面。最大化内部框架不应有自己的边框。

访问 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4102061](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4102061) 获取数据。

# iphone - iPhone：强制网页始终以 1.0（不是 1.5）的像素比呈现

> ID：13651998
> 
> 赞同：2
> 
> 时间：2012-11-30T19:41:56.500
> 
> 标签：iphone, pixel

以前在这里有人问过这个问题，但从未解决，所以我决定看看是否有人在过去一年中弄清楚了如何做到这一点：

默认情况下，如果不存在视口元标记，iPhone 和 Android 将自动缩放页面以尝试使其适合框架。为桌面设计的网站将被缩小，以便它们适合小视口，但显然像素并没有真正真实地表示。

那么，如何在移动浏览器上显示全尺寸网页，以便“300px”在移动设备屏幕上实际用 300 个实际像素表示？

我知道元视口方法，但据我目前所知，当缩放设置为 100% 且宽度设置为 device_width 时，在这种情况下使用的像素比为 1.5 或 1.0，并且您可以检测移动设备正在渲染的像素比率。我似乎无法找到某种方法来明确强制设备仅使用 1.0 像素比率而不是 1.5 像素比率。

我如何让设备使用 1.0 的像素比，以便 CSS 中定义的 300 个“像素”实际呈现在移动设备屏幕上的 300 个像素上？如何以实际真实大小而不是 1.5 像素比显示网页？

这是我不想要的示例：目前，如果您使用元标记来设置移动浏览器的视口属性，如下所示：

```
<meta name="viewport" content="width=device_display, initial-scale=1.0" /> 
```

那么这意味着移动浏览器将呈现页面几乎与设计页面一样，除了 CSS 中定义的每个“像素”实际上包含设备屏幕上的 1.5 个像素，因此像素比为 1.5。这个 1.5 像素比率的约定是为了让设计在高分辨率设备上看起来不会太小。

我明白这一点，但在我的情况下我不希望这样。

我想要一个 1.0 的强制像素比，我会以自己的方式处理高分辨率设备。如何在移动浏览器中强制使用 1.0 像素比率？

*** *如果有一种方法可以简单地将像素比加倍也可以

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T15:49:16.397

我能够使用以下代码为我的网站解决此问题：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```